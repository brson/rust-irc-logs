[00:00:02] <bjz> o/
[00:00:25] <bjz> nszceta: good to have you here
[00:01:32] *** Quits: brson (brson@moz-62518563.mtv2.mozilla.com) (Ping timeout)
[00:02:11] *** Quits: nstdloop (nstdloop@moz-65256C41.hsd1.fl.comcast.net) (Input/output error)
[00:03:10] *** Quits: pepp (Mibbit@moz-A17B47F9.net.upcbroadband.cz) (Quit: http://www.mibbit.com ajax IRC Client)
[00:03:23] *** Quits: bleibig (bleibig@moz-B4D9C5AF.hsd1.ca.comcast.net) (Quit: bleibig)
[00:03:52] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[00:05:55] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[00:08:00] *** kimundi is now known as zz_kimundi
[00:09:16] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[00:10:15] *** Quits: alkino_ (alkino@moz-AAF51602.w92-151.abo.wanadoo.fr) (Ping timeout)
[00:10:53] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[00:11:13] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[00:12:13] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[00:13:43] <herrwolfe45> what is the correct way to get debug info into a rust binary? I have the `compiler hit an unexpected error` error and need to get a test running in gdb
[00:13:50] <strcat> -g
[00:13:53] <herrwolfe45> thanks
[00:14:02] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[00:14:04] <herrwolfe45> is the -Z debug... piece deprecated in 0.10 pre?
[00:14:52] <Havvy> -g is just a short form of that.
[00:14:58] <herrwolfe45> got it, thanks
[00:15:52] <strcat> Havvy: it's also gone from -Z
[00:16:13] <strcat> there's just -g and --debuginfo #
[00:16:16] <strcat> where -g is --debuginfo 2
[00:16:16] <Havvy> strcat:  Oh? Didn't like the duplication?
[00:16:26] <strcat> Havvy: I'm not sure that it was ever duplicated
[00:16:32] <strcat> afaik -g replaced the -Z flags
[00:17:51] *** Quits: IanCormac84 (User@C9D75F95.2A8D8854.67DFF8B4.IP) (Ping timeout)
[00:18:30] <aatch> there may have been some temporary duplication
[00:18:36] <aatch> it would have been accidental though
[00:19:43] *** Quits: canhtak (canhtak@moz-805AE185.wl.t.ulaval.ca) (Quit: canhtak)
[00:20:53] *** Quits: noam (noam@F6B530A7.720527A7.416762B.IP) (Ping timeout)
[00:21:26] *** Joins: noam (noam@F6B530A7.720527A7.416762B.IP)
[00:22:26] *** Joins: vodik_ (simon@moz-FD4ADBC6.cable.teksavvy.com)
[00:22:28] *** Quits: cgaebel (clark@moz-F9D89110.nyc.res.rr.com) (No route to host)
[00:22:51] *** Quits: japaric (japaric@208B24D4.A23A5F6C.E5B504CC.IP) (Ping timeout)
[00:23:50] *** Joins: japaric (japaric@4E9B7B9.E321A207.5C7588CA.IP)
[00:25:43] *** Joins: earlzlap (earlz@moz-483E1E31.neo.res.rr.com)
[00:26:14] *** Joins: IanCormac84 (User@B0017895.2A8D8854.67DFF8B4.IP)
[00:28:02] *** Quits: q66 (q66@moz-F9A4BCC3.range109-154.btcentralplus.com) (Quit: Leaving)
[00:29:17] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[00:30:21] *** Joins: canhtak (canhtak@moz-805AE185.wl.t.ulaval.ca)
[00:30:23] *** Quits: [squiddy] (squiddy@moz-767EF079.dynamic.cablesurf.de) (Input/output error)
[00:30:28] *** Joins: nstdloop (nstdloop@moz-65256C41.hsd1.fl.comcast.net)
[00:30:55] *** Quits: jroweboy1 (jrowe7@moz-18814A6B.provo.static.broadweavenetworks.net) (Ping timeout)
[00:31:22] *** Quits: andrewd18 (andrew@moz-DAC9D29F.wi.res.rr.com) (Quit: Leaving.)
[00:31:46] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[00:31:56] *** Quits: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP) (Client exited)
[00:34:05] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[00:34:12] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[00:34:26] *** Quits: brandonson (SingingBoy@610D90A5.EE9B234.1ECA502.IP) (Ping timeout)
[00:34:30] *** Joins: clusterfoo (Mibbit@moz-F8B381B4.hm.shawcable.net)
[00:34:44] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[00:36:31] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[00:36:51] *** Quits: nstdloop (nstdloop@moz-65256C41.hsd1.fl.comcast.net) (Input/output error)
[00:37:12] *** Quits: clusterfoo (Mibbit@moz-F8B381B4.hm.shawcable.net) (Quit: http://www.mibbit.com ajax IRC Client)
[00:37:19] *** jorendorff is now known as jorendorff_away
[00:37:25] *** Joins: nstdloop (nstdloop@moz-65256C41.hsd1.fl.comcast.net)
[00:37:56] *** Quits: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net) (Quit: killerswan)
[00:39:14] *** Joins: cgaebel (clark@moz-F9D89110.nyc.res.rr.com)
[00:40:56] * Havvy wishes the T and U on http://static.rust-lang.org/doc/master/sync/fn.duplex.html were S and R for Send and Receive.
[00:41:24] <Havvy> Same for http://static.rust-lang.org/doc/master/sync/struct.DuplexStream.html
[00:41:26] <eddyb> Havvy: but it doesn't matter which is which :)
[00:41:31] *** Joins: dotfelix (felix@BC309821.AB3AC796.40E092AA.IP)
[00:41:37] <eddyb> oh, I see, it does :P
[00:41:39] <sfackler> make a PR!
[00:42:00] <Havvy> sfackler:  Would PRs for that actually be allowed?
[00:42:27] <sfackler> if it makes the documentation clearer, I'd be onboard with it
[00:42:28] *** Quits: jviereck (Adium@moz-7D34B37E.dclient.hispeed.ch) (Quit: Leaving.)
[00:43:15] <sfackler> it wouldn't really make sense for sync::duplex, though, right?
[00:43:46] <sfackler> since each type is sent in one DuplexStream and received in the other
[00:44:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[00:44:37] *** Quits: dotfelix (felix@BC309821.AB3AC796.40E092AA.IP) (Ping timeout)
[00:44:44] *** Quits: io2 (io2@moz-EE406A5.home.otenet.gr) (Quit: )
[00:46:30] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[00:47:39] <Tobba> uh, huh
[00:47:48] <Tobba> what prevents something from being Send?
[00:48:33] <sfackler> Rc, Gc, &, &mut
[00:48:40] <sfackler> probably some other stuff
[00:48:40] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[00:48:46] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[00:49:14] <Tobba> hm
[00:49:19] <Tobba> I need to have a Send & pointer to this object
[00:49:25] <Tobba> that should be possible if it satisfies Share though
[00:49:29] <Tobba> not sure how to make that happen
[00:49:29] *** Quits: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:50:02] <Tobba> hmm... wait I know
[00:50:04] <Tobba> ... shit
[00:50:07] <sfackler> I mean & by definition can't be Send since there'd be no guarantee the thing it points to will stick around
[00:50:26] <Tobba> in this case it is
[00:50:33] <Tobba> the function where the object is created is !
[00:50:57] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[00:50:58] <sfackler> you may want to use an unsafe pointer then I guess
[00:51:03] <Tobba> I'll have to write some mess of unsafety yeah
[00:51:31] <eddyb> Tobba: you usually want Share and not Send for &
[00:51:46] *** Quits: twi (Adium@moz-ED056769.cust.vodafonedsl.it) (Quit: Leaving.)
[00:52:05] <eddyb> but AFAIK Rust doesn't have fork-join primitives in the libraries
[00:52:21] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[00:52:29] *** Joins: twi (Adium@moz-ED056769.cust.vodafonedsl.it)
[00:53:00] *** Joins: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net)
[00:53:12] *** Quits: twi (Adium@moz-ED056769.cust.vodafonedsl.it) (Quit: Leaving.)
[00:53:15] <strcat> not yet
[00:53:20] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[00:53:27] <Havvy> sfackler:  For sync::duplex, it's <S, R> -> (<S, R>, <R, S>) 
[00:53:30] *** Joins: Vermeille (Mibbit@D6B9FB69.DF3CA0D0.BA2F4534.IP)
[00:53:46] *** Quits: nszceta (nszceta@moz-E6CA8D6.hsd1.pa.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:54:04] <Vermeille> Hi!
[00:54:08] <sfackler> right, but S and R don't really have any more meaning there than T and U since they don't realy mean Send and Receive
[00:54:23] <eddyb> sfackler: directionality
[00:54:30] <eddyb> sfackler: T one way, U the other way
[00:55:00] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[00:55:02] *** Joins: TheHydroImpulse_ (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[00:55:05] <sfackler> ?
[00:55:16] <eddyb> sfackler: you need to know which is which
[00:55:32] *** Quits: mgottschlag (quassel@moz-CD246736.hsi7.kabel-badenwuerttemberg.de) (Ping timeout)
[00:55:36] <eddyb> one of the returned streams sends T and receives U, the other one is opposite
[00:56:11] <eddyb> sfackler: though I think I see what you mean
[00:56:18] <eddyb> I should really sleep and stop talking
[00:56:24] <eddyb> or the other way around, even
[00:56:25] <sfackler> I know. I'm just saying that <S, R> -> (<S, R>, <R, S>) is isomorphic to <T, U> -> (<T, U>, <U, T>)
[00:56:31] *** Joins: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[00:56:53] <eddyb> sfackler: maybe DuplexStream should use S/R
[00:56:56] <Havvy> sfackler:  Yeah, I see what you mean, but it gives a hint that you should declare your sendable type first and your receiving type second.
[00:56:58] *** Joins: twi (Adium@moz-ED056769.cust.vodafonedsl.it)
[00:57:01] <eddyb> because there it matters
[00:57:29] <Havvy> And giving hints to a convention, even arbitrary, should make things slightly easier.
[00:57:42] *** Quits: twi (Adium@moz-ED056769.cust.vodafonedsl.it) (Quit: Leaving.)
[00:58:16] *** Quits: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[00:58:47] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[01:00:02] *** Quits: judder (maradukewa@75FA4DEE.A989D80C.78E362FE.IP) (Ping timeout)
[01:00:28] *** Joins: andrew-d_w (andrew-d_w@moz-17320F4E.hsd1.ca.comcast.net)
[01:02:07] <Vermeille> http://pastebin.com/NqpPBvKV I wrote that code, and when I print what parse_csv() returns, it just prints a vector containing garbage. So I'm assuming some conversion is done between ascii and utf8 but I'm not skilled in manipulating those concepts. Any help appreciated :)
[01:03:06] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[01:03:14] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[01:03:32] <eddyb> Vermeille: you hit a bug
[01:03:42] <eddyb> Vermeille: well, a known one
[01:04:12] <eddyb> Vermeille: each line gets freed while you still keep slices to it
[01:04:44] *** Quits: andrew-d_w (andrew-d_w@moz-17320F4E.hsd1.ca.comcast.net) (Input/output error)
[01:04:57] *** Quits: alonlevy (alon@moz-944C9098.red.bezeqint.net) (Ping timeout)
[01:05:01] <Vermeille> goddam, I can't write 20 lines of rust without having an issue, I'm cursed :'(
[01:05:10] <eddyb> a workaround would be to replace line.split(',').collect() with line.split(',').map(|s| s.to_owned()).collect() and use ~str instead of &str
[01:05:14] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[01:05:49] <Vermeille> okay, is that a bug related to lifetimes (which I did not read about for now)?
[01:06:55] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[01:07:04] <cmr> vadimcn: that's not a curse.
[01:07:06] <cmr> that's standard.
[01:07:13] *** Quits: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net) (Connection reset by peer)
[01:07:31] <Vermeille> (it seems that lines() returns the \n, am I doing something wrong?)
[01:07:37] *** Joins: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net)
[01:07:47] <Vermeille> s/returns/includes/
[01:08:00] <eddyb> Vermeille: you can .trim() before .to_owned()
[01:08:32] <Vermeille> Great! Thx!
[01:08:46] <Vermeille> Hopefully one day I will be rust proficient!
[01:09:14] *** Quits: jmgrosen (user@moz-848F6087.sb.sd.cox.net) (Ping timeout)
[01:13:03] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[01:13:54] <Vermeille> Do you have any plans for a v1.0 :D ?
[01:14:57] <cmr> this year!
[01:15:03] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[01:15:09] *** Joins: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca)
[01:15:13] *** Joins: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net)
[01:15:17] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[01:16:12] <Vermeille> greaaaat :D ! I *have* to apply for an internship on Rust :D
[01:17:12] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[01:17:43] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[01:18:10] *** Quits: tmh (e@6F8495BB.FEF84806.AA32EE5B.IP) (Ping timeout)
[01:18:15] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[01:19:00] *** Joins: magg (magg@A9A36154.9E924F16.3D0AE249.IP)
[01:19:02] <Havvy> Vermeille:  20? I can barely get past 6.
[01:19:34] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[01:19:41] <magg> can i have a vector of chucks of vectors?
[01:20:00] <Tobba> if rust code I wrote ever compiles on the first try I assume the compiler broke
[01:20:27] *** Joins: arturo (Thunderbir@moz-E83B14F0.superkabel.de)
[01:21:46] *** Joins: robhobbes (robert@moz-9B0672CB.hsd1.ut.comcast.net)
[01:21:46] *** Quits: wzsk (wzsk@4F7252F2.CEBBE496.E48CFF63.IP) (Ping timeout)
[01:22:07] <Tobba> ugh
[01:22:17] <Tobba> apparently you could change the value of what you're matching inside matches before
[01:22:17] *** Joins: brson (brson@moz-24157589.mtv2.mozilla.com)
[01:22:17] *** ChanServ sets mode: +ao brson brson
[01:22:23] <Tobba> because my old code is doing that and its breaking out the ass now
[01:22:38] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.3)
[01:22:40] *** Quits: eibwen (kvirc@moz-6D827A33.dip0.t-ipconnect.de) (Ping timeout)
[01:22:50] <huon> yeah, it was incorrect
[01:23:03] <Tobba> its correct though if you stop using it
[01:23:06] <huon> compiler bugs /o\
[01:23:10] <Tobba> after the assignment takes place
[01:23:31] *** Quits: leowoe (Leo@moz-72D47201.dclient.hispeed.ch) (Quit: Leaving.)
[01:24:55] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[01:25:08] <huon> match foo { Some(a) => { bar(a); a = 1; } }
[01:25:18] <huon> you mean that's correct?
[01:25:20] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[01:25:28] <huon> with the dead assignment to `a`?
[01:26:22] <Tobba> nah
[01:26:48] *** Joins: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net)
[01:26:55] <Tobba> match foo { Some(a) => { bar(a); foo = None }, ... }
[01:27:44] *** Quits: arturo (Thunderbir@moz-E83B14F0.superkabel.de) (Ping timeout)
[01:28:24] <Tobba> it disallows this
[01:28:28] <Tobba> and its one of the most annoying things ever
[01:28:29] <huon> oh, that changed?
[01:28:48] <Tobba> yeah
[01:29:04] <huon> rusti: let mut foo = Some(~1); match foo { Some(a) => { foo = None }, None => {} }
[01:29:08] -rusti- pastebinned 7 lines of output: http://sprunge.us/igQg
[01:29:09] <Florob> I could make up an argument that this should be valid… I could also make one up for its semantics being confusing
[01:29:29] <huon> Tobba: seems to be valid to me?
[01:29:32] <Tobba> its super-frustrating when writing state machines
[01:29:41] <huon> Tobba: do you have a `ref` in the pattern match?
[01:29:46] <Tobba> yeah
[01:29:50] <Tobba> the issue is that foo gets borrowed
[01:30:04] <Tobba> and the borrow doesnt end when it should
[01:31:24] <huon> s/should/could/
[01:31:51] <Tobba> it makes state machines absolutely dreadful to write
[01:31:57] *** Quits: LU324 (asdf@moz-864C7465.dyn.embarqhsd.net) (Ping timeout)
[01:33:03] <brson> what's the best way to cast a slice to a struct?
[01:33:28] <brson> &[u8]
[01:34:21] <huon> brson: probably unsafe { &*(bytes.as_ptr() as *Struct) } to get a &Struct
[01:34:48] *** Quits: earlzlap (earlz@moz-483E1E31.neo.res.rr.com) (Ping timeout)
[01:35:06] <Havvy> Did VecVec go away?
[01:35:07] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Quit: Computer has gone to sleep.)
[01:35:30] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[01:36:19] <huon> Havvy: what is VecVec?
[01:37:14] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[01:37:28] *** Joins: newguy (Mibbit@moz-1C68F6E0.hsd1.va.comcast.net)
[01:37:48] <newguy> if its not too busy, can i ask a pycharm project question?
[01:37:55] <newguy> if anyone has experience using python?
[01:38:04] <Havvy> Last I saw it, it was a trait for methods for Vectors of Vectors.
[01:38:26] *** Joins: jmgrosen (user@moz-848F6087.sb.sd.cox.net)
[01:38:38] <robhobbes> So... can somebody help me figure out a bug?
[01:38:38] <robhobbes> error: first-class methods are not supported
[01:38:38] <robhobbes> let trie = SomeTrie::new(routes);
[01:39:09] *** Quits: newguy (Mibbit@moz-1C68F6E0.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[01:39:11] *** Joins: shyoso (Mibbit@moz-8EBA3569.hsd1.ca.comcast.net)
[01:40:05] <huon> Havvy: oh, I think that's VectorVector?
[01:40:10] *** Quits: jmgrosen (user@moz-848F6087.sb.sd.cox.net) (Ping timeout)
[01:40:32] <Florob> Tobba, if you're overwriting `foo` anyway, is there really a need for the `ref`?
[01:40:42] <Tobba> yes
[01:40:48] <Tobba> if I'm not modifying it all the time
[01:40:55] <Tobba> also things that cant be copied
[01:40:59] <Havvy> huon:  Ah, yes.
[01:41:04] <Havvy> It's in std::slice now.
[01:41:04] <sfackler> robhobbes: does new take &self?
[01:41:25] <robhobbes> sfackler: should it not?
[01:41:32] <sfackler> nope
[01:41:37] <sfackler> that makes it an instance method
[01:41:42] <robhobbes> sfackler: ahh. that makes sense
[01:41:46] <sfackler> i.e. trie.new(routes)
[01:41:54] <robhobbes> got it
[01:42:02] <robhobbes> thanks, that did the trick
[01:42:07] <sfackler> np
[01:42:15] <masonl> for [a, b] in [1,2,3,4].windows(2) { println!("{} {}", a, b) } 
[01:42:33] <masonl> Trying to figure out what is wrong with the above.
[01:42:48] *** Quits: ganitsu (ganitsu@moz-AF9A3990.dialup.adsl.anteldata.net.uy) (Quit: WeeChat 0.4.3)
[01:42:51] <masonl> Complains about non-exhaustive patterns.
[01:43:11] <Havvy> rusti:  [1,2,3,4].windows(2)
[01:43:12] -rusti- pastebinned 8 lines of output: http://sprunge.us/bXXI
[01:43:22] <sfackler> windows returns a general &[T], so the compiler can't guarantee that it returns a 2 element vector
[01:43:41] *** Quits: TheHydroImpulse_ (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[01:43:44] <huon> need dependent types for that :P
[01:43:49] <masonl> So should I collect first?
[01:44:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[01:44:07] <huon> just don't pattern match in the `for`
[01:44:21] <sfackler> no, just do for foo in [1,2,3,4].windows(2) { println!("{}, {}" foo[0], foo[1]) }
[01:44:24] <Florob> Tobba, By "all the time" do you mean in all match arms?
[01:44:31] <masonl> Oh ok.
[01:44:43] <Tobba> Florob: in a branch inside of one match arm
[01:46:03] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[01:46:35] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[01:47:01] <Florob> Tobba, I think you get an award for writing code that's particularly hard to get through borrowck :)
[01:51:21] *** Quits: magg (magg@A9A36154.9E924F16.3D0AE249.IP) (Quit: magg)
[01:54:33] *** Quits: paraze (paraze@moz-96380A71.w86-209.abo.wanadoo.fr) (Client exited)
[01:55:57] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[01:56:03] *** Quits: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net) (Ping timeout)
[01:56:36] *** Joins: magg (magg@A9A36154.9E924F16.3D0AE249.IP)
[01:56:52] *** Quits: magg (magg@A9A36154.9E924F16.3D0AE249.IP) (Quit: magg)
[01:58:27] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[02:00:21] *** Quits: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com) (Ping timeout)
[02:01:12] *** Joins: mib_y20qdq (Mibbit@7E217F04.2C8DBE39.CC1A2609.IP)
[02:01:33] *** Quits: eddyb (eddy@F8B50789.F33C1089.FB866788.IP) (Ping timeout)
[02:02:05] *** Quits: shyoso (Mibbit@moz-8EBA3569.hsd1.ca.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[02:05:54] *** Quits: robhobbes (robert@moz-9B0672CB.hsd1.ut.comcast.net) (Ping timeout)
[02:08:42] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[02:10:29] *** Quits: dsrx (tom@moz-EEA4C0D9.lsanca.fios.verizon.net) (Quit: WeeChat 0.4.1)
[02:11:20] *** Quits: mib_y20qdq (Mibbit@7E217F04.2C8DBE39.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[02:12:10] *** flaper87 is now known as flaper87|afk
[02:14:29] *** Joins: brson_ (brson@moz-62518563.mtv2.mozilla.com)
[02:14:36] *** Quits: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP) (Quit: buildmaster reconfigured: bot disconnecting)
[02:14:37] *** Quits: brson (brson@moz-24157589.mtv2.mozilla.com) (Ping timeout)
[02:15:41] *** Joins: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP)
[02:17:11] *** Quits: brson_ (brson@moz-62518563.mtv2.mozilla.com) (Ping timeout)
[02:17:51] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[02:18:02] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[02:18:09] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[02:19:16] *** Joins: brson (brson@moz-62518563.mtv2.mozilla.com)
[02:19:16] *** ChanServ sets mode: +ao brson brson
[02:20:03] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[02:24:43] *** Quits: LRN (LRN@moz-EA80C63C.nationalcablenetworks.ru) (Quit: Leaving.)
[02:26:14] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Ping timeout)
[02:26:52] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[02:29:31] *** Joins: LRN (LRN@moz-EA80C63C.nationalcablenetworks.ru)
[02:32:07] *** Quits: nstdloop (nstdloop@moz-65256C41.hsd1.fl.comcast.net) (Input/output error)
[02:32:49] *** Joins: nstdloop (nstdloop@moz-65256C41.hsd1.fl.comcast.net)
[02:32:58] *** Quits: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net) (Connection reset by peer)
[02:33:18] *** Joins: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net)
[02:34:46] *** Quits: nstdloop (nstdloop@moz-65256C41.hsd1.fl.comcast.net) (Ping timeout)
[02:36:53] *** Joins: nstdloop (nstdloop@moz-65256C41.hsd1.fl.comcast.net)
[02:37:42] *** Joins: mib_ep1zv5 (Mibbit@A54702E.4B947797.97F07BE5.IP)
[02:37:44] *** Quits: mib_ep1zv5 (Mibbit@A54702E.4B947797.97F07BE5.IP) (Quit: mib_ep1zv5)
[02:38:19] *** Joins: goldcloud (Mibbit@A54702E.4B947797.97F07BE5.IP)
[02:39:07] *** Joins: jmgrosen (user@moz-848F6087.sb.sd.cox.net)
[02:39:11] *** Quits: Vermeille (Mibbit@D6B9FB69.DF3CA0D0.BA2F4534.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[02:40:36] *** Quits: LRN (LRN@moz-EA80C63C.nationalcablenetworks.ru) (Quit: Leaving.)
[02:41:01] *** Quits: jmgrosen (user@moz-848F6087.sb.sd.cox.net) (Ping timeout)
[02:41:16] <goldcloud> In vec.rs there is a function that uses transmute T -> U but I don't see it provide a U, I am confused, here it is fn as_slice<'a>(&'a self) -> &'a [T] {  let slice = Slice { data: self.ptr as *T, len: self.len };  unsafe { transmute(slice) }
[02:41:24] *** jorendorff_away is now known as jorendorff
[02:41:36] <goldcloud> what's going on with trasmute(slice)?
[02:41:39] *** Quits: jzelinskie (sid17772@moz-A42E5B7B.irccloud.com) (Ping timeout)
[02:41:39] *** Quits: patrikstenmark (sid16326@moz-A42E5B7B.irccloud.com) (Ping timeout)
[02:41:39] *** Quits: balpert_ (sid15886@moz-A42E5B7B.irccloud.com) (Ping timeout)
[02:41:39] *** Quits: huhlig (sid17687@moz-A42E5B7B.irccloud.com) (Ping timeout)
[02:42:29] <o11c> goldcloud: rust does type inference both ways
[02:43:25] <aatch> o11c, more accurately, Rust does type inference.
[02:43:48] <aatch> both ways doesn't really come into it.
[02:43:56] <o11c> there's no *real* advantage of Rust's type inference over "one way" inference like C++14 does
[02:44:05] <o11c> the only difference is exactly where you write the type
[02:44:20] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[02:44:36] <goldcloud> Didn't know that, I guess I am thinking to linearly, so basically it recognizes it needs to transmute the slice to &[T]
[02:44:43] *** Joins: kanru (kanru@moz-DB4A9C19.scl3.mozilla.com)
[02:45:16] <o11c> in this case, it looks ahead to the return type of the function
[02:45:29] *** Joins: patrikstenmark (sid16326@moz-A42E5B7B.irccloud.com)
[02:45:56] *** Quits: brendanc (brendan@moz-CA4BEC19.cs.ubc.ca) (Ping timeout)
[02:46:19] <aatch> goldcloud, type inference is like a big contraint solver, it figures out what values need to be which types to satify all the constraints
[02:46:37] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[02:46:39] *** Joins: brendanc (brendan@moz-CA4BEC19.cs.ubc.ca)
[02:47:35] *** Joins: balpert_ (sid15886@moz-A42E5B7B.irccloud.com)
[02:47:35] *** Joins: jzelinskie (sid17772@moz-A42E5B7B.irccloud.com)
[02:47:56] *** Joins: LRN (LRN@moz-EA80C63C.nationalcablenetworks.ru)
[02:48:33] <goldcloud> aatch: Okay I see, that's pretty cool, like the kind of stuff you do with prolog? I think I am going to really like Rust's type system then!
[02:48:38] *** Quits: LRN (LRN@moz-EA80C63C.nationalcablenetworks.ru) (Connection reset by peer)
[02:49:03] <aatch> goldcloud, well the algorithm is Hindley-Milner, same as Haskell
[02:49:13] <o11c> goldcloud: it seems nice at first, and then you realize this is the reason Rust doesn't have default arguments
[02:49:30] *** Joins: LRN (LRN@moz-EA80C63C.nationalcablenetworks.ru)
[02:51:23] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Ping timeout)
[02:51:52] <zwarich> o11c: you can have default arguments with type inference
[02:52:04] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[02:52:06] <huon> o11c: why are you even here? You can apparently write perfect C++ so Rust offers nothing to you, and you make a lot of unhelpful snide remarks.
[02:52:16] *** Quits: LRN (LRN@moz-EA80C63C.nationalcablenetworks.ru) (Ping timeout)
[02:52:43] <goldcloud> aatch: then consider me sold!
[02:53:08] <o11c> zwarich: sure, you *can*, but it's the thing blocking it from being implemented easily
[02:53:12] <aatch> goldcloud, main difference between Haskell and Rust in this regard is that Rust only does inference locally
[02:53:38] <aatch> Whereas Haskell does it globally.
[02:53:58] <sellout> o11c: What part of inference is an impediment to default arguments? Nothing comes to mind immediatel.
[02:54:16] <o11c> huon: I'm here because I *want* to see Rust become a great language
[02:54:43] <o11c> sellout: because if you don't know the type of '(foo)', then you don't know what default arguments to get from (foo).funcion(...)
[02:55:56] *** Joins: dsrx (tom@moz-74B18595.public.wayport.net)
[02:56:01] <huon> o11c: do you reckon you could be slightly more positive, then?
[02:57:52] *** Joins: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[02:58:04] *** Joins: huhlig (sid17687@moz-A42E5B7B.irccloud.com)
[02:58:16] <huon> o11c: I don't think that example breaks
[02:59:38] <huon> because if you don't know the type of `(foo)` then you don't even know what the non-default arguments are
[02:59:51] *** Quits: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[02:59:52] *** Joins: LRN (LRN@moz-EA80C63C.nationalcablenetworks.ru)
[02:59:56] <huon> i.e. it wouldn't compile now
[03:00:17] <goldcloud> aatch: I see, still cool though, but I don't think I'll be as confused by the types anymore when reading rust code, would it be more difficult with global type inference?
[03:00:57] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[03:01:10] <Havvy> Global type inference means that you could leave the type of functions/function args unspecified.
[03:01:12] <o11c> huon: I *started* positive
[03:01:36] <Havvy> As long as the system can infer the types for them.
[03:01:39] <aatch> goldcloud, Haskell is proof that global type inference can lead to confusing errors
[03:02:17] <aatch> And my experience with OCaml code is that not having the types around is confusing because it makes code harder to read.
[03:02:31] <huon> o11c: anyway, I believe the main resistance to default args is human.
[03:02:35] <huon> i.e. people not wanting it
[03:02:41] *** Quits: jesse99 (jesse99@moz-D8DE13A5.hsd1.wa.comcast.net) (Ping timeout)
[03:02:58] <o11c> if you don't want default args, don't *use* them
[03:03:15] <goldcloud> Havvy: I would have trouble reading code like that I think, if I didn't have an IDE.
[03:03:17] <huon> doesn't work, libraries will use them
[03:03:19] <o11c> it's better to have a more flexible language and subset it yourself, than to exclude features people want
[03:03:21] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[03:03:21] *** Quits: LRN (LRN@moz-EA80C63C.nationalcablenetworks.ru) (Ping timeout)
[03:03:26] *** Joins: jesse99 (jesse99@moz-D8DE13A5.hsd1.wa.comcast.net)
[03:03:28] <o11c> (yes, C++ is extreme in this)
[03:03:30] <huon> subsets don't work properly
[03:04:10] <o11c> not having default arguments means I have to create N copies of my function, call them function0, function1, function2, ... functionN
[03:04:41] <huon> and anyway, every language feature is extra burden on the specification, extra burden on the compiler, and can have unexpected other interactions with other features
[03:04:44] *** Quits: james4k (james@moz-9BB5AE72.consolidated.net) (Ping timeout)
[03:04:46] *** Joins: LRN (LRN@moz-EA80C63C.nationalcablenetworks.ru)
[03:05:03] <o11c> in other words - Rust is no longer an evolving language, it's a stagnant one
[03:05:04] <huon> no, it really doesn't
[03:05:08] <huon> wtf.
[03:05:19] <mrmonday> let x = ~4; let mut y = x; // How does this work exactly? Is a new, mutable slot allocated, then x is copied into it?
[03:05:27] <o11c> because every new feature proposal gets shot down with "it will interact iwth older features"
[03:05:31] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[03:05:41] <huon> o11c: yeah, we're not adding new features like DST
[03:05:56] *** Quits: nstdloop (nstdloop@moz-65256C41.hsd1.fl.comcast.net) (Input/output error)
[03:06:01] <aatch> o11c, and it's not like I'm working on first-class SIMD support or anything
[03:06:11] <huon> or modifying how the compiler reasons about types to make concurrency better
[03:06:16] <huon> nothing like that
[03:06:25] <zwarich> o11c: I'm not involved with Rust development, but it seems that the focus is on features whose absence is a backwards compatibility concern for 1.0
[03:06:25] *** Quits: Tari (tari@moz-A009139E.net) (Ping timeout)
[03:06:26] <huon> the language is stagnant, definitely
[03:06:38] *** Joins: nstdloop (nstdloop@moz-65256C41.hsd1.fl.comcast.net)
[03:06:42] <zwarich> o11c: default and named arguments would be useful, but they can be added at a later point
[03:06:46] <o11c> yeah, there is a blessed list of features on the 1.0 list
[03:06:58] <huon> the list changes
[03:07:08] <huon> as people experiment and develop
[03:07:26] <huon> the design of DST isn't set in stone
[03:07:34] <zwarich> OCaml added default and named arguments a long time after the language's release, and the type system problems were trickier for OCaml than for Rust
[03:07:34] *** Joins: james4k (james@moz-9BB5AE72.consolidated.net)
[03:07:44] <o11c> a lot of experimentation is made difficult because of existing features ... like two-way type inference
[03:08:11] <huon> I don't believe that your default arg example was actually broken
[03:08:19] *** Quits: nstdloop (nstdloop@moz-65256C41.hsd1.fl.comcast.net) (Ping timeout)
[03:08:21] <huon> due to HM
[03:08:22] <o11c> sure, it's not *impossible*
[03:08:29] <o11c> but it's trivial without HM
[03:08:37] <o11c> with it, it requires touching everything
[03:08:50] <zwarich> does Rust actually use HM, i.e. when does it do polymorphic generalization?
[03:09:13] <huon> o11c: No; I mean that example fails to compile under default args exactly when it fails to compile without them
[03:09:17] <aatch> zwarich, we do monomorphisation, not polymorphic generalisation
[03:09:36] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[03:09:36] <o11c> "it's possible" is not the most important question - "it's convenient" is
[03:09:39] <aatch> (assuming that I understand what that is)
[03:09:44] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[03:09:59] <huon> o11c: I'm not just saying it's possible
[03:10:14] <huon> I'm saying it's not *that* inconvenient
[03:11:29] *** jorendorff is now known as jorendorff_away
[03:11:59] <huon> o11c: the real killer would be C++ style function overloading; but we're not getting that
[03:12:08] <o11c> well, show me a patch to add default arguments if it's so easy to make one - and more importantly, show me how easy it is to maintain it in a fork for a long time if it doesn't get upstreamed quickly
[03:12:20] <o11c> sure, C++-style function overloading isn't needed
[03:12:37] <o11c> (though it can be emulated perfecty with a function that takes a trait that really impl's the function)
[03:13:13] <o11c> sigh
[03:13:16] *** Joins: tmh (e@6F8495BB.FEF84806.AA32EE5B.IP)
[03:13:20] <o11c> at least cargo is moving in the right direction
[03:13:32] *** jorendorff_away is now known as jorendorff
[03:13:32] <o11c> maybe the rest of Rust will too, eventually
[03:13:58] *** Quits: goldcloud (Mibbit@A54702E.4B947797.97F07BE5.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[03:13:58] <huon> just fork it and create the language you want
[03:14:15] *** Joins: robhobbes (robert@moz-9B0672CB.hsd1.ut.comcast.net)
[03:14:22] <o11c> I've thought about it ... if I had a bit more time I would
[03:15:20] <o11c> fixing mod and using [] instead of <> should be trivial changes for me ... touching type inference as it stands is not ...
[03:15:22] <huon> If you really want default args, write an RFC https://github.com/rust-lang/rfcs/
[03:15:33] *** jorendorff is now known as jorendorff_away
[03:15:46] <o11c> hah
[03:15:48] <huon> https://github.com/rust-lang/rfcs/blob/master/active/0001-rfc-process.md is how
[03:15:59] <huon> if you really want changes to the module system, write an RFC
[03:16:26] <o11c> there already is one
[03:16:31] <huon> there is now a process that's not constantly complaining in IRC
[03:16:39] <o11c> it gets distracted by all the people saying the module system is perfect
[03:16:54] <o11c> despite the fact that we get newcomers pretty much every day who think it works the other way
[03:17:21] <zwarich> I'm almost afraid to ask, but what's the confusion with the module system?
[03:17:34] <huon> zwarich: https://github.com/mozilla/rust/issues/11745
[03:17:50] <o11c> zwarich: the fact that 'mod' and 'use' both exist, and 'mod' must be used ONLY at the crate root
[03:18:05] *** Quits: LRN (LRN@moz-EA80C63C.nationalcablenetworks.ru) (Ping timeout)
[03:18:14] <o11c> (which requires global knowledge, which is a Bad Thing)
[03:18:15] <huon> o11c: that's not true
[03:18:20] <sfackler> what?
[03:18:25] <huon> mod can be used outside the crate root
[03:18:29] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[03:18:52] <o11c> sure, can ... but the way it works now, that is just asking for trouble, and when people ask, you say "only use mod at the root"
[03:18:56] *** Joins: LRN (LRN@moz-EA80C63C.nationalcablenetworks.ru)
[03:19:01] <sfackler> uh
[03:19:01] <o11c> (well, or in a dir/mod.rs)
[03:19:04] <huon> some people say that
[03:19:06] * huon doesn't
[03:19:22] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[03:19:30] <aatch> I don't know anybody that says that.
[03:19:36] <huon> cmr does
[03:19:39] <zwarich> didn't Rust have dedicated .rc files in the past? why were they removed?
[03:19:54] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[03:19:58] <huon> but he's the only one I can recall
[03:20:01] <aatch> zwarich, the syntaxes converged and made them obsolete
[03:20:16] *** Joins: earlz (earlz@moz-483E1E31.neo.res.rr.com)
[03:20:17] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[03:20:40] <sfackler> you can't really make a module heirarchy with a depth greater than 1 without using mod outside of the crate root
[03:20:51] <zwarich> in other systems that separate namespace management from compilation unit definition, they tend to be separate, which is less confusing but also causes more syntax to exist
[03:21:00] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[03:21:01] <cmr> I do think it's better to keep mod in the root
[03:21:02] <o11c> sfackler: I did admit that I forgot the dir/mod.rs case
[03:21:10] *** Quits: brson (brson@moz-62518563.mtv2.mozilla.com) (Ping timeout)
[03:21:10] <cmr> but in dir/mod.rs it's not bad.
[03:21:22] <cmr> but anywhere otuside those two places is crazy
[03:21:27] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Quit: Leaving...)
[03:21:30] <o11c> *currently crazy
[03:21:39] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[03:22:04] <huon> o11c: convert that the mozilla/rust RFC into a rust-lang/rfcs RFC if you're so concerned about this
[03:22:05] <o11c> if mod and use were merged, everything would just work the way everyone expects, and I'm pretty sure it wouldn't even break any code!
[03:22:32] *** Joins: espindola (espindola@moz-8F3C95E7.dsl.teksavvy.com)
[03:22:45] <o11c> huon: what's the point? previously or now, RFCs submitted saying "there is something wrong with rust" just get blackballed
[03:22:53] <sfackler> uh
[03:23:15] <sfackler> literally every major change has been the result of "something being wrong with rust" or there would be no reason for the change to exist
[03:23:15] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[03:23:29] <huon> Example: iterators
[03:23:35] <o11c> sfackler: right, and now major changes are stopping - other than DST and whatever is changing with lambdas
[03:23:49] <huon> strcat had to fight hard to get them to change
[03:24:04] <o11c> I would rather 1.0 be *years* in the future if it means we can have a better language *now*
[03:24:14] <huon> o11c: it's not clear that there is something wrong with Rust in most cases
[03:24:22] <dsrx> is there a list of compiler directives somewhere?
[03:24:29] <cmr> dsrx: "directives"?
[03:24:29] *** Joins: lpy (lpy@1834E2CB.F09091A8.1348A864.IP)
[03:24:29] <o11c> huon: see, this is what I'm saying
[03:24:30] <sfackler> dsrx: rustc --help
[03:24:35] <huon> it's normally someone who doesn't have the full story (I'm not saying this is the case with the `mod` rfc)
[03:24:40] *** Joins: pongad (pongad@moz-7E8AAD2E.res.gatech.edu)
[03:24:44] <o11c> "this is something wrong with rust" - "there isn't anything wrong with rust"
[03:24:52] <dsrx> er I guess directives is the wrong term
[03:25:00] <dsrx> things like #[deriving], #[test]
[03:25:04] <cmr> attributes.
[03:25:07] <dsrx> thank
[03:25:08] <dsrx> s
[03:25:13] <cmr> https://github.com/mozilla/rust/wiki/The-Rusticon
[03:25:21] <cmr> one-stop shop for all your syntax questions
[03:25:27] <dsrx> ahh, excellent
[03:25:35] <cmr> (table at the bottom too)
[03:26:07] <dsrx> and a list of those is in the reference manual. thanks!
[03:26:15] <cmr> dsrx: unfortunately not all of the attributes are documented :(
[03:26:36] <huon> o11c: I was referring to things like "remove the need for `extern crate`"
[03:27:03] <huon> where there isn't a problem with declaring the libraries you're using
[03:27:05] <cmr> dsrx: all the attributes the compiler recognizes are listed at https://github.com/mozilla/rust/blob/master/src/librustc/middle/lint.rs#L961
[03:27:11] <sfackler> o11c: It's unclear to me as well that there are major issues with the module system because 1) it makes sense to me and 2) I'm not reading 100+ comments of bikeshedding on that github issue. The RFC system exists to have a coherent writeup of "this is what sucks, here's a system that I think will work better and here's why"
[03:27:12] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[03:27:13] <huon> but some gets annoyed by it
[03:27:16] <huon> *someone
[03:27:51] <o11c> sfackler: well, I did that in my comment on that RFC
[03:28:06] <cmr> Which comment is being discussed?
[03:28:11] <dsrx> cmr: thanks a bunch :)
[03:28:13] <o11c> https://github.com/mozilla/rust/issues/11745#issuecomment-36447533
[03:28:19] <cmr> ah that one
[03:28:45] <o11c> includes what sucks, what's better, and why
[03:28:45] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Client exited)
[03:28:49] <huon> o11c: should be easy enough to convert that into the RFC format then ;)
[03:29:00] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[03:29:45] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Client exited)
[03:29:54] <o11c> huon: okay, I'll give it another shot
[03:30:03] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[03:30:11] <cmr> I'd be in favor of that RFC.
[03:30:15] <huon> o11c: did you resolve the unanswered questions yet, btw?
[03:30:17] <cmr> I think it's more intuitive.
[03:30:26] <huon> (such as importing from parent scopes)
[03:30:33] <SiegeLord> I don't see how you put mod's inside a file in that RFC
[03:30:47] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Client exited)
[03:30:57] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[03:31:11] *** Quits: lpy (lpy@1834E2CB.F09091A8.1348A864.IP) (Client exited)
[03:31:40] *** Quits: IanCormac84 (User@B0017895.2A8D8854.67DFF8B4.IP) (Ping timeout)
[03:31:41] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Client exited)
[03:32:02] <o11c> huon: I don't think I knew about super:: at the time
[03:32:03] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[03:32:08] *** Quits: Rym (y@83FA2518.3DA4EAA.51C6DE68.IP) (Ping timeout)
[03:32:35] *** Joins: IanCormac84 (User@9AFA1D9.2A8D8854.67DFF8B4.IP)
[03:32:35] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Connection reset by peer)
[03:32:39] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[03:33:03] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Client exited)
[03:33:13] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[03:33:30] *** Quits: untitaker (untitaker@moz-84178CC6.adsl.highway.telekom.at) (Ping timeout)
[03:33:33] <huon> o11c: so importing from a parent scope in say `std::rt::logging` requires `super::super::option::{None, Some, Option}`?
[03:33:49] <cmr> I can't imagine absolute imports would go away?
[03:33:58] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Client exited)
[03:34:29] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[03:35:12] <huon> cmr: that seems to be a consequence of the changes there
[03:36:11] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[03:36:14] <cmr> o11c: also "Currently it's not, but if the import is pub, it could be ::penguin::foo::qux" that's not true, you can say `#[path="penguin/qux.rs"] mod pqux;`
[03:37:41] <o11c> cmr: #[path=] should probably be removed I think
[03:37:48] *** Quits: cgaebel (clark@moz-F9D89110.nyc.res.rr.com) (Client exited)
[03:38:00] <o11c> huon: well, you could still do an absolute one of course
[03:38:19] <cmr> I don't think so. it's the only way to decouple files from modules :(
[03:38:29] <huon> o11c: most imports are absolute
[03:38:30] <huon> btw.
[03:38:31] <o11c> well, I won't comment on it
[03:38:37] <o11c> huon: oh, definitely
[03:39:18] <Kroisse> May I ask the way to fix this error? https://gist.github.com/Kroisse/cff67e1dbdb71e154e46
[03:39:22] <o11c> but with certain libraries, it can be quite useful
[03:39:57] *** Joins: jmgrosen (user@moz-848F6087.sb.sd.cox.net)
[03:40:12] *** Joins: __notmatt (Mibbit@moz-9FB2565E.vc.shawcable.net)
[03:40:22] <o11c> Kroisse: introduce a temporary if you can - or does partials.find() return something with a lifetime?
[03:40:37] <sfackler> I'm not sure I fully understand the proposal. It seems like it's the current arrangement with more "mod" declarations
[03:40:41] <Kroisse> self.partials is a HashMap
[03:41:13] *** Joins: untitaker (untitaker@moz-4ED70EEC.adsl.highway.telekom.at)
[03:41:16] *** Quits: __notmatt (Mibbit@moz-9FB2565E.vc.shawcable.net) (Quit: http://www.mibbit.com ajax IRC Client)
[03:41:20] <o11c> sfackler: with 'mod' closer to the place where it's actually used, and less 'use' statements
[03:41:33] <Kroisse> the lifetime of its returns is same as self.partials's
[03:41:39] <o11c> sfackler: in particular, you no longer have to worry about which one specific file you use to load a mod
[03:41:42] *** Quits: jmgrosen (user@moz-848F6087.sb.sd.cox.net) (Ping timeout)
[03:41:51] <o11c> (which is global knowledge, whether it's in the crate root or not)
[03:42:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[03:42:27] <Kroisse> Hello, erick.
[03:42:33] <Kroisse> oops, sorry
[03:43:33] <sfackler> I mean, I've always had the parent of the submodule declare the submodule. The module heirarchy here is postgres::types::{array, range}. Where else would these mod items ever end up? https://github.com/sfackler/rust-postgres/blob/master/src/types/mod.rs#L16
[03:43:37] <aatch> Kroisse, so the issue is that you're borrowing self immutably for the find, then trying to borrow it mutably a second time.
[03:44:01] <Kroisse> erickt: Thanks for your rust-mustache library. It's very useful for me :)
[03:44:37] <aatch> Kroisse, so you need to re-arrange your code somehow so the result of the finds is dead by the time you do replace_inner_ctx
[03:44:39] <o11c> sfackler: right, but think about if there's a 'postgres::types::internal' mod that's used by both array and range
[03:45:03] <o11c> sfackler: despite the fact that it's internal to them, it must be declared in postgres::types
[03:45:43] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[03:45:43] <o11c> Kroisse: possibly take advantage of the fact that 'match' is an expression
[03:45:54] <Kroisse> aatch: I tried that by enclosing self.partials.find(name) with separated block, but this didn't affect
[03:46:18] <aatch> Kroisse, well can you clone the tokens?
[03:46:35] <sfackler> o11c: what "internal" module?
[03:47:47] <Kroisse> I'm not sure I can clone it.
[03:48:29] <Kroisse> I think the reference is needed in this case
[03:49:09] *** Joins: pepper_chico (pepper_chi@BE2968B5.6F4A2706.E4090502.IP)
[03:49:47] <o11c> sfackler: the kind of internal module that often needs to exist
[03:50:23] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[03:50:36] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[03:50:37] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[03:50:44] <Florob> Kroisse, This might work, but untested, unsure and sleepy: match self.partials.find(name).map(|tokens| { let mut ctx = self.clone_with_tokens(tokens.iter()); ctx.indent.push_str(*ind); ctx }).and_then(|ctx| { self.replace_inner_ctx(Some(~ctx as ~Iterator<_>)); })
[03:51:04] <sfackler> I'm not following. It seems like the structure here is identical to src/penguin in that RFC: https://github.com/sfackler/rust-postgres/tree/master/src/types
[03:51:07] <aatch> Florob, nope, same problem
[03:51:29] <sfackler> except that I don't have to have a "mod types::array" wherever i have a "use types::array"
[03:51:31] <Kroisse> This try is not very effective: https://gist.github.com/Kroisse/8f8db47d9061c6696ad5
[03:52:02] *** Quits: zz_kimundi (kimundi@moz-5822FC56.dip0.t-ipconnect.de) (Ping timeout)
[03:52:04] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[03:52:08] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[03:52:36] <aatch> Kroisse, the issue is that Rust doesn't know that replace_inner_ctx won't invalidate your reference to `tokens`
[03:53:31] <o11c> sfackler: s/use/mod/ for the canonical way I propose
[03:53:54] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[03:54:07] <o11c> sfackler: IMO 'use' *should* only be used for importing a single item from a module, but of course it can maintain the current behavior as well for backward compatibility
[03:54:18] <cmr> backwards compatability really isn't a concern.
[03:54:20] <aatch> so as long as that reference exists *anywhere* you can't modify self.
[03:54:34] <cmr> if we find the perfect module system for us and it's entirely different, there's no reason not to break everything for it.
[03:55:29] <sfackler> But how does replacing some (but not all) instances of "use" with "mod" 1) makes things less confusing and 2) have anything to do with this "internal" mod thing?
[03:55:48] *** Joins: zz_kimundi (kimundi@moz-2E6F4AE4.dip0.t-ipconnect.de)
[03:55:48] <o11c> cmr: just pointing out that this doesn't *require* breaking it, like so many other things do
[03:55:57] <cmr> sure
[03:56:08] *** zz_kimundi is now known as kimundi
[03:56:14] <o11c> sfackler: simple: you always use 'mod' to get a module, you use 'use' to get something *from* a module
[03:56:36] <Kroisse> https://gist.github.com/Kroisse/b2b7006c952d85d801e0
[03:56:50] <o11c> for 2, if there was another internal module, it could be 'mod'ed by both range and array, and not mentioned at all by mod.rs
[03:57:01] <o11c> currently there is no good way to do that
[03:57:35] *** Joins: voltagex (voltagex@moz-11D4D0E3.voltagex.org)
[03:57:38] <Kroisse> hmmm...
[03:57:54] <voltagex> has anyone tried building the rust package from collab-maint in debian?
[03:58:41] <cmr> voltagex: I doubt it. To my knowledge everyone is just using the ppa or building it themselves (no package) on debian.
[03:58:46] *** Joins: p1start (rewi@moz-E7F3D014.org)
[03:59:12] <voltagex> cmr: I'm trying to work out why the debian package is trying to build for i386 instead of amd64
[03:59:56] *** Joins: brandonson (SingingBoy@610D90A5.EE9B234.1ECA502.IP)
[04:00:11] <brandonson> what happened to Freeze?  Did it get renamed?
[04:00:16] *** Quits: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net) (Connection reset by peer)
[04:00:33] <Kroisse> Most wondering part is: replacing self.replace_inner_ctx() call to self.inner_ctx = value is not cause the error
[04:00:38] *** Joins: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net)
[04:00:44] <cmr> brandonson: https://github.com/mozilla/rust/pull/12686
[04:02:18] *** Quits: earlz (earlz@moz-483E1E31.neo.res.rr.com) (Client exited)
[04:03:08] <Florob> Kroisse, That is expected. self.partials is borrowed immutably. So you can't borrow all of self mutably, because then you could change self.partials, but you can change a different portion of self, like self.inner_ctx.
[04:03:28] <Kroisse> ah
[04:04:07] <sfackler> o11c: would I use "mod" to get a module from another crate?
[04:04:10] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[04:04:17] <o11c> can someone give me an example of code that has `use super::` ?
[04:04:21] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[04:04:26] <cmr> o11c: almost any test module in libstd
[04:04:30] <sfackler> o11c: tons of test modules
[04:04:43] <sfackler> I can't really think of any place other than that
[04:04:52] <sfackler> almost all imports are absolute, not relative
[04:04:54] <o11c> sfackler: I wasn't thinking you would
[04:05:01] <Kroisse> Florob: I got it
[04:05:19] <o11c> you think logically "I am importing an object from this crate", which is `use`
[04:06:29] <sfackler> I mean, there needs to be *some* way to call e.g. "some_crate::some_mod::some_otehr_mod::some_function" as "some_other_mod::some_function"
[04:06:31] <o11c> sfackler: anyway, you can bikeshed that part later - my proposal is about making life easier for decent-sized projects *within* one crate
[04:06:51] <o11c> sfackler: `use some_crate::some_mode` would do that
[04:07:13] <o11c> er, with an extra ::some_other_mod
[04:07:38] *** Joins: hjr3 (hradtke@moz-699EABC0.lsanca.fios.verizon.net)
[04:07:58] <o11c> `mod` is saying "get something from *here*", where as `use` is saying "get something from that module" (in this case, mod some_crate)
[04:08:19] <SiegeLord> Why wouldn't you get a module from another module?
[04:08:21] <o11c> there's actually a fairly convincing argument that the code shouldn't care about crate boundaries at all ... but that's kind of extreme
[04:08:41] <o11c> SiegeLord: no, you get a module from the filesystem (if it isn'at already cached)
[04:08:47] <SiegeLord> Why?
[04:08:59] <SiegeLord> Why do mod foo::bar; instead of use foo::bar;
[04:09:26] <dsrx> test moduels?
[04:09:27] <Kroisse> Resolved: https://gist.github.com/Kroisse/f522a57c725050029877
[04:09:29] <o11c> because this means you don't have to have exactly one global place where you do mod foo { mod bar; }
[04:09:53] <dsrx> I've been putting tests for modules inside the same module, is that weird?
[04:10:09] <Kroisse> Florob, aatch, o11c: thanks to advise :)
[04:11:18] <SiegeLord> It's not clear why use foo::bar; does something different depending on whether foo is an extern crate, or a module
[04:11:22] <sfackler> dsrx: it's a bit more common to put them inside a #[cfg(test)] mod tests { ... } inner module so you don't have to worry about having unused imports for things only used in tests
[04:11:28] <o11c> SiegeLord: it doesn't
[04:11:56] *** Quits: patpat (patpat@moz-1599AAE4.as13285.net) (Ping timeout)
[04:11:59] *** Joins: zv (zv@moz-955F83E9.hsd1.ca.comcast.net)
[04:12:12] <o11c> SiegeLord: the fundamental problem being solved is that `mod` will not do duplicate imports if you use it in multiple files
[04:12:13] <sfackler> but I wouldn't say it's weird to have them inline
[04:12:20] *** Joins: patpat (patpat@moz-1599AAE4.as13285.net)
[04:12:27] <o11c> I should take a shower before it gets too late ...
[04:12:36] <SiegeLord> Why not just make that rule
[04:12:39] <dsrx> sfackler: ah, I see
[04:12:55] <sfackler> or just throw an error if the same file is "mod"'d twice
[04:13:09] <SiegeLord> Or at least a lint
[04:13:20] <sfackler> yeah
[04:13:21] <SiegeLord> It's really suspicious to have that happen
[04:13:34] <SiegeLord> I do it, but from separate crates
[04:13:43] <SiegeLord> But not from within the same crate
[04:13:51] <sfackler> I can imagine *someone* would have some weird use case so a lint would be a bit safer
[04:14:00] <cmr> I can't imagine a single usecase, really.
[04:15:56] <sfackler> neither can I :P
[04:16:00] <huon> sfackler: problem with lints is name resolution/type checking happens waaaay before linting
[04:16:20] * huon wants to split lints up so that things get linted as early as possible
[04:16:39] <huon> e.g. purely AST based things (like capitalisation) can happen straight after macro expansion
[04:16:49] <huon> as can this mod lint
[04:17:28] <sfackler> I assumed up until like last week that lints were split up
[04:17:29] <huon> it would add a pile of new AST visits, though, which might be annoyingly slow
[04:17:33] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[04:17:44] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[04:17:51] <voltagex> okay, so following the instructions from https://github.com/mozilla/rust/wiki/Note-getting-started-developing-Rust, make is throwing an error for llvm: No rule to make target `all'.
[04:18:03] <cmr> voltagex: what rust version?
[04:18:08] <voltagex> git head
[04:18:24] *** Quits: espindola (espindola@moz-8F3C95E7.dsl.teksavvy.com) (Input/output error)
[04:18:29] <huon> voltagex: what platform?
[04:18:39] <voltagex> Debian sid x64 in a VM
[04:20:10] <huon> did ./configure run perfectly?
[04:21:01] <voltagex> make: http://sprunge.us/aCgW
[04:21:17] <voltagex> configure: http://sprunge.us/hbIh
[04:21:59] *** Joins: lpy (lpy@8B40CDAC.F09091A8.1348A864.IP)
[04:23:57] <robhobbes> So, have implemented my own tree-like data structure, but I can't seem to go from node to node. Like if I do 'let current_node = tree.head' I can't loop over the tree saying 'current_node = current_node.left' because I can't borrow it as mutable more than once. How do I overcome this?
[04:24:17] *** Joins: leowoe (Leo@moz-72D47201.dclient.hispeed.ch)
[04:24:24] *** Quits: leowoe (Leo@moz-72D47201.dclient.hispeed.ch) (Quit: Leaving.)
[04:24:57] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[04:25:04] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[04:25:51] <sfackler> robhobbes: could you post the code?
[04:26:01] *** Joins: enos (jkingyens@moz-B0C1B161.hsd1.ca.comcast.net)
[04:26:10] <robhobbes> sfackler: um... all of it? It's kinda big
[04:26:25] <robhobbes> and it has lots of dependent files and stuff
[04:26:29] *** Quits: enos (jkingyens@moz-B0C1B161.hsd1.ca.comcast.net) (Quit: enos)
[04:26:33] *** Joins: enos (jkingyens@moz-B0C1B161.hsd1.ca.comcast.net)
[04:26:39] <aatch> robhobbes, is it on github or similar?
[04:26:52] <aatch> for this kind of thing, just a snippet doesn't help much.
[04:27:15] <robhobbes> yeah I'll go ahead and push it up. I'm working on a new feature of an existing project
[04:27:35] *** Quits: hdevalence (quassel@moz-D125A39F.home3.cgocable.net) (Client exited)
[04:27:39] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[04:28:11] <voltagex> huon, cmr - anything I've missed from the logs I posted?
[04:28:39] <aatch> voltagex, is this a new clone?
[04:28:50] <voltagex> yes
[04:28:52] <cmr> voltagex: I don't see anything obvious.
[04:29:01] <cmr> the submodule seems to have been checked out ok
[04:29:04] <cmr> configure completed.
[04:29:04] <aatch> hmm, strange.
[04:29:11] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[04:29:44] <robhobbes> aatch and sfackler, here it is https://github.com/jroweboy/oxidize/blob/trie_routing/src/route/trierouter.rs
[04:29:46] <aatch> voltagex, do you mind doing another clean clone and just running ./configure && make ?
[04:29:58] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[04:30:10] <voltagex> aatch: is there a way I can save the llvm submodule? 120mb takes a while here
[04:30:26] <aatch> voltagex, ah.
[04:31:02] <aatch> Hmm, unfortunately, that may be why you're having trouble, if there was an issue while checking it out, then it could be corrupt.
[04:31:52] <aatch> robhobbes, line?
[04:32:18] <aatch> robhobbes, because current_node.left doesn't exist there.
[04:32:44] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[04:32:59] <robhobbes> aatch: that was just an example, look at line 168
[04:33:21] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[04:34:08] <aatch> robhobbes, does it say where the previous borrow is?
[04:34:36] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[04:34:40] <robhobbes> voltagex: have you heard of rust-nightly? it might not work for you. It's a ubuntu ppa that will take care of installing rust for you (if you aren't on ubuntu or you want to actually contribute to the rust code, then it won't work)
[04:35:22] <voltagex> robhobbes: I just wanted to learn what -> was, then I got very, very, very sidetracked
[04:35:29] <voltagex> (3 hours later here I am)
[04:35:33] <cmr> heheh
[04:35:36] <cmr> that's quite the sidetrack
[04:35:38] <robhobbes> aatch: it says it end on line 171 and occurs at the same line (168)
[04:35:40] <aatch> robhobbes, otherwise you may have run into a rvalue lifetime bug.
[04:35:57] <aatch> robhobbes, yeah, though that might be it.
[04:36:13] <robhobbes> rvalue lifetime bug huh?
[04:36:19] <robhobbes> what does that mean?
[04:36:22] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[04:36:29] <robhobbes> and is there a workaround?
[04:36:47] <robhobbes> maybe even a forseeable fix to the bug?
[04:37:14] <aatch> try doing something like: `{ let mut children = current_node.children; children.find_or_insert(..) }`
[04:37:36] *** Quits: japaric (japaric@4E9B7B9.E321A207.5C7588CA.IP) (Quit: WeeChat 0.4.3)
[04:37:42] <aatch> I mean `let current_node = { let mut children = current_node.children; children.find_or_insert(..) }`
[04:38:23] <robhobbes> I'll give it a shot
[04:38:27] <aatch> robhobbes, the bug is known about, the fix is.. tricky as it requires pinning down some currently loosely-defined behaviour around rvalue references.
[04:39:12] *** Joins: japaric (japaric@4E9B7B9.E321A207.5C7588CA.IP)
[04:39:25] *** Quits: pongad (pongad@moz-7E8AAD2E.res.gatech.edu) (Quit: Leaving)
[04:39:59] <aatch> robhobbes, if that doesn't work, it may be harder to fix as it may not be an actual bug.
[04:40:09] *** Joins: adu (ajr@moz-FF5D4001.washdc.fios.verizon.net)
[04:40:12] *** Joins: hdevalence (quassel@moz-D125A39F.home3.cgocable.net)
[04:40:40] *** Joins: jmgrosen (user@moz-848F6087.sb.sd.cox.net)
[04:40:49] <robhobbes> aatch: can you explain the syntax of that bit of code you posted. I don't understand wrapping the two statements in { }
[04:41:09] <aatch> robhobbes, it introduces a new scope. In rust, most things are expressions.
[04:41:42] <aatch> so `{ stmt; stmt; expr }` is an expression in it's own right
[04:41:55] <aatch> and lifetimes are defined based on scopes
[04:42:26] <robhobbes> aatch: okay that makes sense. Well, I gotta go, but I'll try playing around with that. Thank you for your help.
[04:42:30] *** Quits: hjr3 (hradtke@moz-699EABC0.lsanca.fios.verizon.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[04:42:38] *** Quits: jmgrosen (user@moz-848F6087.sb.sd.cox.net) (Ping timeout)
[04:43:43] *** Quits: mib_uz8ut6 (Mibbit@moz-7002DE99.lns20.adl2.internode.on.net) (Quit: http://www.mibbit.com ajax IRC Client)
[04:44:05] *** Parts: robhobbes (robert@moz-9B0672CB.hsd1.ut.comcast.net) ()
[04:44:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[04:45:38] *** Quits: klaus (koz@moz-4486E876.hsd1.wa.comcast.net) (Quit: klaus)
[04:46:33] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[04:47:46] *** Joins: jmgrosen (user@moz-848F6087.sb.sd.cox.net)
[04:49:19] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[04:50:47] *** Joins: magg (magg@A9A36154.9E924F16.3D0AE249.IP)
[04:51:38] <magg> how do i declare a matrix like data structure… can i have for example a vector of vectors?
[04:51:44] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[04:52:43] <aatch> magg, yep, if you know the size ahead-of-time, you can just do `[[f32,..4],..4]` for a 4x4 matrix (for example)
[04:52:48] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[04:52:54] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[04:53:48] <magg> aatch: aah great, but what then if I don’t know the size. i get it in runtime
[04:54:12] <aatch> magg, then you have to use Vec, which isn't quite so nice to work with
[04:54:29] <magg> :o
[04:54:38] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[04:54:48] <aatch> hang on, there might be an alternative, two seconds.
[04:54:49] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[04:55:11] <magg> aatch, do you have a link with info about Vec. ok sure
[04:55:56] <sfackler> magg: http://static.rust-lang.org/doc/master/std/vec/struct.Vec.html
[04:56:45] <magg> thanks, sfackler
[04:57:42] <aatch> Ok, so what I'm thinking of isn't available publicly, it's internal to the compiler.
[04:57:43] <o11c> hm, revising my previous module proposal slightly ...
[04:58:00] <aatch> (and not any simpler to use than Vec)
[04:58:46] <magg> ooh thanks anyway aatch
[04:59:10] <magg> this Vec, is it available in 0.9? 
[04:59:20] <sfackler> oh, no
[04:59:20] *** Joins: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[04:59:24] <aatch> magg, no.
[04:59:25] <sfackler> you'll want to use ~[T] instead
[04:59:26] <magg> :(
[04:59:34] <aatch> You should probably be using master if you can though.
[04:59:39] <cmr> it's basically drop-in though.
[04:59:39] <magg> ooook
[05:00:13] *** Quits: dsrx (tom@moz-74B18595.public.wayport.net) (Quit: WeeChat 0.4.1)
[05:00:18] <magg> i’ll try with generics first..
[05:00:21] <magg> thanks guys
[05:00:30] <magg> before moving to master
[05:00:54] *** Quits: japaric (japaric@4E9B7B9.E321A207.5C7588CA.IP) (Ping timeout)
[05:01:02] *** Quits: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[05:02:24] *** Joins: japaric (japaric@F7BC3ABB.DC1425E6.84437BC5.IP)
[05:03:36] *** Quits: heftig (heftig@moz-8FC19561.dip0.t-ipconnect.de) (Ping timeout)
[05:09:16] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[05:10:09] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[05:11:07] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[05:11:22] *** Joins: shyoso (Mibbit@moz-8EBA3569.hsd1.ca.comcast.net)
[05:11:25] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[05:12:02] *** Joins: heftig (heftig@moz-D8B6C64B.dip0.t-ipconnect.de)
[05:13:28] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[05:19:14] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[05:20:35] *** Quits: nfroidure (nfroidure@moz-C115682E.w90-34.abo.wanadoo.fr) (Ping timeout)
[05:20:45] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[05:21:03] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[05:24:07] *** Joins: pczarn (pczarn@moz-69A55FA.izacom.pl)
[05:27:26] *** Quits: pepper_chico (pepper_chi@BE2968B5.6F4A2706.E4090502.IP) (Quit: WeeChat 0.4.1)
[05:27:30] *** Quits: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net) (Connection reset by peer)
[05:27:56] *** Quits: canhtak (canhtak@moz-805AE185.wl.t.ulaval.ca) (Quit: canhtak)
[05:27:59] *** Joins: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net)
[05:28:38] *** Joins: dsrx (tom@moz-EEA4C0D9.lsanca.fios.verizon.net)
[05:28:55] *** Quits: adu (ajr@moz-FF5D4001.washdc.fios.verizon.net) (Quit: adu)
[05:29:31] *** Joins: edwardw (Mibbit@13A2FE5.E4C8743.30C05AB6.IP)
[05:30:29] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[05:32:55] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[05:33:08] *** Quits: bytbox (s@moz-E1E7FAC3.washdc.fios.verizon.net) (Client exited)
[05:33:19] *** Joins: bytbox (s@moz-E1E7FAC3.washdc.fios.verizon.net)
[05:33:30] *** Quits: jmgrosen (user@moz-848F6087.sb.sd.cox.net) (Ping timeout)
[05:35:09] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[05:35:29] *** Joins: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP)
[05:35:48] *** Quits: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP) (Quit: This computer has gone to sleep)
[05:36:43] *** Joins: jmgrosen (user@moz-848F6087.sb.sd.cox.net)
[05:38:06] *** Quits: sp3d (s@6361F3B1.19CD1E54.8354FB35.IP) (Quit: sp3d)
[05:39:00] *** Quits: bollu (bollu@31CCE710.7065DDB9.6D6A344F.IP) (Ping timeout)
[05:39:27] <voltagex> okay, rust is successfully built
[05:39:38] <voltagex> now where's the binary? :P
[05:40:10] <edwardw> built from github checkout?
[05:40:23] *** Quits: reverend_paco (chatzilla@moz-FDBE15EC.hsd1.ma.comcast.net) (Ping timeout)
[05:40:31] <voltagex> edwardw: yep
[05:40:35] <cmr> voltagex: x86_64-unknown-linux-gnu/stage2/bin
[05:40:44] <edwardw> if so, <platform-triple>/stage2/bin
[05:41:15] <voltagex> ah, right, the date on rustc -v is the commit date, not the build date
[05:41:26] <cmr> it should be the build date.
[05:41:29] <cmr> rusti: version
[05:41:33] -rusti- rustc 0.10-pre (0e6f90e 2014-03-22 11:06:46 -0700)
[05:41:48] <voltagex> blah
[05:41:50] <voltagex> ./x86_64-unknown-linux-gnu/stage2/bin/rustc 0.10-pre (94e4e91 2014-03-22 17:21:51 -0700)
[05:42:18] <cmr> hah it is the commit date
[05:42:21] <cmr> how long I have been wrong
[05:42:28] <edwardw> LOL
[05:42:38] <voltagex> now to go write hello world :P
[05:42:48] <edwardw> cool
[05:43:04] *** Quits: Earnestly (earnest@18162BE0.BA6AC103.30311652.IP) (Ping timeout)
[05:44:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[05:44:42] *** Quits: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[05:44:43] *** Quits: magg (magg@A9A36154.9E924F16.3D0AE249.IP) (Quit: magg)
[05:45:28] *** Joins: Mech (Mibbit@moz-40CAA913.dsl.dyn.ihug.co.nz)
[05:45:54] *** Quits: silotis (quassel@moz-4B8C4631.oc.oc.cox.net) (Ping timeout)
[05:46:25] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[05:46:41] *** Joins: silotis (quassel@moz-4B8C4631.oc.oc.cox.net)
[05:47:05] <Havvy> voltagex:  Welcome to Rust.
[05:47:20] *** Quits: edwardw (Mibbit@13A2FE5.E4C8743.30C05AB6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[05:47:39] <voltagex> thanks.
[05:49:51] *** Joins: hjr3 (hradtke@moz-699EABC0.lsanca.fios.verizon.net)
[05:52:56] *** Joins: edwardw (edwardw@C5A98CE5.177282A3.FAED9FFC.IP)
[05:53:19] *** Quits: james4k (james@moz-9BB5AE72.consolidated.net) (Ping timeout)
[05:53:39] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[05:53:46] *** Joins: james4k (james@moz-9BB5AE72.consolidated.net)
[05:54:19] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[05:55:22] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[05:56:30] *** Joins: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net)
[05:56:44] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[05:57:18] *** Joins: Doppp (Doppp@ED5E5331.58AB7B93.EE633EE.IP)
[05:57:30] <Havvy> Can a no-arg function return a DuplexStream created in the function?
[05:58:29] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[05:58:39] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[05:58:45] <cmr> sure.
[05:58:52] <cmr> its constructor does that, after all :p
[05:59:33] <voltagex> hello.rs:1:1: 1:1 error: can't find crate for `std` - even RUST_LOG=rustc::metadata::creader doesn't tell me anything else
[05:59:34] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[05:59:54] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[06:00:24] <cmr> voltagex: did you make a package and install that?
[06:00:26] *** Quits: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Quit: It is tiem!)
[06:00:44] *** Quits: shyoso (Mibbit@moz-8EBA3569.hsd1.ca.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[06:00:53] <voltagex> cmr: no, I need to fix the prefix but I don't want to recompile >>
[06:00:59] <Havvy> Ah, I was returning a reference to it instead of the stream itsel.f
[06:01:05] *** Joins: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[06:01:09] <voltagex> I naively moved the rustc binary to /opt/bin
[06:01:12] *** Quits: wilmoore (wilmoore@moz-4EF3CEBC.hsd1.co.comcast.net) (Ping timeout)
[06:01:16] <cmr> yeah that was wrong
[06:01:23] <cmr> it cares a lot about where it lives.
[06:01:29] <cmr> and what is next to it.
[06:01:37] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[06:01:45] * Havvy wishes that executables didn't care about where they lived.
[06:01:49] <Havvy> Or libraries.
[06:02:56] *** Quits: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[06:03:42] *** Joins: sp3d (s@6361F3B1.19CD1E54.8354FB35.IP)
[06:03:46] <cmr> voltagex: make install takes a DESTDIR, not ideal, but you could just set it to /opt
[06:05:17] *** Quits: jmgrosen (user@moz-848F6087.sb.sd.cox.net) (Ping timeout)
[06:05:23] *** Quits: vodik_ (simon@moz-FD4ADBC6.cable.teksavvy.com) (Client exited)
[06:06:53] <voltagex> okay
[06:07:27] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[06:07:28] *** Quits: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca) (Quit: Leaving.)
[06:07:34] <Havvy> How do I tell Rust that an instance of None is from a different enum than Option<T>?
[06:07:55] <cmr> Havvy: just `use`ing it should be sufficient...
[06:08:19] <cmr> but you can't have your None and the None from Option in the scope at once.
[06:08:30] <cmr> so you'll need to do std::option::None etc
[06:09:18] *** Joins: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP)
[06:09:38] *** Quits: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP) (Quit: This computer has gone to sleep)
[06:09:55] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[06:10:19] *** Quits: philix_ (felipe@moz-7695080F.user.veloxzone.com.br) (Quit: leaving)
[06:10:40] <Havvy> I think I'll just use a different name...
[06:10:53] <cmr> that's usually the path towards  sanity :p
[06:11:38] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[06:11:44] <cmr> shadowing the builtin names *works* but isn't fun.
[06:13:19] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[06:15:22] <Havvy> When you say using it, do you mean the enum or the enum items?
[06:15:39] <cmr> the variants themselves.
[06:16:04] <cmr> each enum variant defines its own constructor, which for all intents and purposes is its own function.
[06:16:27] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[06:16:28] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[06:16:32] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[06:16:53] <cmr> the only way to construct a value whose type is that enum is through one of its construct functions
[06:16:56] <cmr> so you need to import it
[06:17:03] <cmr> Option's None is in the prelude
[06:17:10] <cmr> so it's automatically imported everywhere.
[06:17:31] <cmr> but if you `use` your enum's constructor that will shadow it.
[06:18:07] <Havvy> So if we have library L with `enum { A, B, C }`, and want to use them in a function in an executable that has `extern crate L`...
[06:18:32] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[06:19:23] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[06:19:23] *** ChanServ sets mode: +ao dherman dherman
[06:19:28] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[06:19:31] <Havvy> https://gist.github.com/Havvy/6164dac34ddcff1a64b3
[06:19:48] <Havvy> I've tried `use rusttower::Input::*;`  too.
[06:19:50] <cmr> not quite
[06:19:55] <cmr> enums don't define their own namespace
[06:20:01] <cmr> so it's just rusttower:QuitGame
[06:20:07] <cmr> :: that is
[06:20:09] <cmr> etc
[06:20:19] <Havvy> Oh.
[06:20:29] <cmr> rusttower::Input is the type, the constructors are rusttower::{QuitGame, MoveLeft, ...}
[06:21:02] <Havvy> Interesting.
[06:21:14] <Havvy> Sounds like pollution of the module namespace, but interesting.
[06:22:03] <aatch> Sigh.. I'm out of interesting SIMD related things to implement...
[06:22:10] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[06:22:13] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[06:22:41] <cmr> aatch: GOOD! :shipit:
[06:22:54] <cmr> unless that just means all you have left are the boring bits :P
[06:22:58] <Havvy> Interesting != Useful @ crm
[06:23:11] <Havvy> Gah, typoed a nick.
[06:23:11] <aatch> Havvy, well it is useful too.
[06:23:27] <aatch> cmr, a few boring bits, not much though.
[06:23:41] <aatch> also, tests.
[06:23:44] <Havvy> Well, there's the not interesting but useful parts of every project.
[06:24:04] <aatch> But I don't really want spend time on that before my RFC is approved
[06:24:56] <cmr> mm
[06:25:04] <cmr> I'll make sure to bring it up at the meeting
[06:25:13] <voltagex> phew, only a few hours to get to hello world :P
[06:26:00] <cmr> aatch: carter (cartazio on github) is basically the resident expert on simd ... so if he thumbs-upped it I think it's good :P
[06:26:19] <cmr> I'm a fan of the syntax too
[06:27:10] <aatch> cmr, I implemented the type syntax essentially as a hack, I don't know if that is a big deal in terms of getting a PR through though...
[06:27:26] *** Quits: matp (matp@moz-16FE1E05.matp.at) (Ping timeout)
[06:27:27] <aatch> since we can't expand macros in a type position atm
[06:27:54] <cmr> yeah
[06:28:05] <cmr> I feel like that's not a very big evil though?
[06:28:21] <cmr> I mean we'd never ship anything if we got the compiler into tip-top shape to implement it...
[06:28:47] *** Joins: jackneill (jackneill@moz-67DBB0FB.pool.digikabel.hu)
[06:29:26] <cmr> aatch: I seem not to be able to put line comments on the commits since there's no pull request.
[06:29:34] <cmr> aatch: want to play with the new code review tool? :D
[06:29:53] <aatch> cmr, sure
[06:29:59] <Havvy> error: cannot provide an extension implementation where both trait and type are not defined in this crate   :(
[06:32:35] <cmr> bah damn wifi
[06:32:59] <cmr> aatch: http://phabricator.octayn.net/
[06:33:07] <cmr> should hook right into your github account.
[06:33:45] *** Joins: jmgrosen (user@moz-848F6087.sb.sd.cox.net)
[06:34:03] <cmr> you'll also need the command line tool. on arch arcanist-git is in the aur
[06:34:42] *** Joins: matp (matp@moz-16FE1E05.matp.at)
[06:35:33] <cmr> then you need to do "arc --conduit-uri=http://phabricator.octayn.net/api/ install-certificate"
[06:35:50] *** Quits: jmgrosen (user@moz-848F6087.sb.sd.cox.net) (Ping timeout)
[06:35:51] <cmr> and then you can do "arc --conduit-uri=http://phabricator.octayn.net/api/ diff", and it will submit the commits for review.
[06:36:02] <Havvy> task '<main>' has overflowed its stack
[06:36:02] <Havvy>  \n Illegal instruction (core dumped)
[06:37:06] <aatch> Havvy, you have infnite recursion
[06:37:11] *** Quits: jeaye (jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: bed)
[06:38:02] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[06:39:04] *** Joins: jroweboy (jrowe7@moz-E748E982.provo.static.broadweavenetworks.net)
[06:39:46] *** Joins: jroweboy1 (jrowe7@moz-18814A6B.provo.static.broadweavenetworks.net)
[06:39:59] *** Parts: jroweboy1 (jrowe7@moz-18814A6B.provo.static.broadweavenetworks.net) ()
[06:40:05] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[06:40:45] *** Quits: jroweboy (jrowe7@moz-E748E982.provo.static.broadweavenetworks.net) (Ping timeout)
[06:41:30] *** Joins: ofeldt- (ofeldt@moz-D7DFF966.dip0.t-ipconnect.de)
[06:42:28] *** Quits: ofeldt (ofeldt@moz-940AFC76.dip0.t-ipconnect.de) (Ping timeout)
[06:43:46] *** Joins: meyer (meyer@moz-A9CF56E4.hsd1.ca.comcast.net)
[06:44:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[06:46:04] <aatch> cmr: 413 Request Entity Too Large :(
[06:46:24] <cmr> nuu
[06:46:27] <cmr> let me tweak settings
[06:46:28] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[06:47:06] <aatch> cmr, need bigger receive buffers in nginx
[06:47:13] <cmr> oh it was from nginx itself?
[06:47:22] <aatch> cmr, yep
[06:47:34] <aatch> cmr, also, you should try running phabricator on HHVM.
[06:47:43] <cmr> that's mildly unpleasant. I figured ubuntu server would have had a Just Works config
[06:48:11] <edwardw> oh, is phabricator the one from fb?
[06:48:12] <cmr> aatch: does it actually run on hhvm? I thought about it briefly but decided not to mess with it
[06:48:24] <aatch> cmr, phabricator is from facebook
[06:48:38] <aatch> I would be very surprised if it didn't run on HHVM...
[06:48:55] <cmr> epriestly claims fb runs it on hhvm internally
[06:49:00] <cmr> I'll fuss with that tomorrow then
[06:49:15] <aatch> cmr, ping me if you need help with that, btw.
[06:49:22] <cmr> sure, thanks :)
[06:49:35] * aatch is a HHVM contributor
[06:49:38] <huon> cmr: speaking of fussing with things, how are the benches going?
[06:49:50] <aatch> Oh, I can talk about Hack now!
[06:49:53] <huon> aatch: rewritten it into Rust yet?
[06:49:56] <huon> :P
[06:50:07] <aatch> I'm not under an NDA about it anymore
[06:50:34] <cmr> huon: builder has been running okish I think
[06:50:49] <aatch> I can't use PHP anymore, spent too long writing Hack code.
[06:50:49] <cmr> huon: every few builds seems to have some issue or another which prevents it from ever completing :\
[06:50:56] <cmr> heh
[06:51:22] <voltagex> why can't I do println!("{}",arr[1] as str); where arr is [1,2,3]?
[06:51:39] <Havvy> arr[1].to_str()
[06:51:50] <sp3d> str isn't a type, for one thing
[06:51:55] <cmr> voltagex: first, `str` isn't a type, second, that's not how one converts between types in rust.
[06:52:01] <voltagex> oh.
[06:52:06] <cmr> `as` exists for roughly the same operations static_cast does in c++
[06:52:21] <voltagex> I'm coming from C#, so I assumed it was just a cast.
[06:52:35] <Havvy> Is it worth having static casting have a two level keyword?
[06:52:52] <cmr> sp3d: voltagex: you don't need to do any operations at all to get that println to work though
[06:52:57] <cmr> println!("{}", arr[1])
[06:53:00] <cmr> works
[06:53:08] <aatch> cmr, you fixed nginx yet?
[06:53:13] <cmr> rusti: let arr = [1, 2, 3]; println!("{}", arr[1])
[06:53:14] -rusti- 2
[06:53:14] -rusti- ()
[06:53:19] <cmr> aatch: no. do you know exactly what I need to set?
[06:53:34] <aatch> cmr, fine, gimme a minute
[06:53:35] <voltagex> where println!(arr[1]); is a syntax error
[06:53:42] *** Joins: magg (magg@A9A36154.9E924F16.3D0AE249.IP)
[06:53:51] <cmr> aatch: well I'm looking, I just don't know what I'm looking for :P
[06:53:51] <voltagex> rusti: println!(1);
[06:53:52] -rusti- <anon>:10:18: 10:19 error: format argument must be a string literal.
[06:53:52] -rusti- <anon>:10         println!(1);
[06:53:52] -rusti-                            ^
[06:53:52] -rusti- error: aborting due to previous error
[06:53:53] -rusti- application terminated with error code 101
[06:53:56] <aatch> I haven't fiddled with nginx settings in a while.
[06:54:01] <voltagex> wow, that's a bit noisy :P
[06:54:02] <cmr> voltagex: right, the println macro takes a string literal as the first argument
[06:54:04] <aatch> cmr, I do know what I'm looking for
[06:54:10] <Kroisse> voltagex: println!() is not a normal function.
[06:54:17] <Kroisse> it's a syntax extension
[06:54:25] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[06:54:32] <Kroisse> and its first arugment should be a string literal
[06:54:52] <voltagex> this is all rather mind-expanding
[06:54:56] *** Quits: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net) (Connection reset by peer)
[06:55:18] *** Joins: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net)
[06:56:07] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[06:56:13] <voltagex> the tutorial seems to skip parts
[06:56:18] <voltagex> no for loops, for one
[06:56:35] <cmr> aatch: I changed client_max_body_size to 2M, which is also what I have it set to in phabricator.
[06:56:43] <cmr> voltagex: yes, it's being rewritten as we speak.
[06:57:03] <aatch> cmr, you using fastcgi?
[06:57:04] <cmr> voltagex: the other guides (listed on http://static.rust-lang.org/doc/master/index.html) cover their subjects more clearly and thoroughly.
[06:57:10] <cmr> aatch: via fpm, yes.
[06:57:32] <Kroisse> http://static.rust-lang.org/doc/master/guide-container.html#for-loops
[06:58:35] <voltagex> ah, why is .iter() required for looping through vectors? In C# and python you could do something similar to for i in some_collection
[06:58:45] <voltagex> (I'll shut up soon)
[06:59:00] <cmr> voltagex: partly language limitations, partly not knowing how to implement.
[06:59:10] <cmr> there's an open rfc for it: https://github.com/rust-lang/rfcs/pull/17
[06:59:20] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[07:00:05] <aatch> cmr, the diff I'm sending is 2.1M...
[07:00:12] <aatch> I'll see if theres a compression setting or something
[07:00:18] <Kroisse> actually the syntax and semantics of for loops are replaced in the past.
[07:00:19] <cmr> I can bump it up to 10M
[07:00:27] <cmr> I honestly didn't think diffs would get that large :P
[07:00:41] <aatch> cmr neither...
[07:00:51] <cmr> arc probably just isn't gzipping it :\
[07:01:02] <Kroisse> In the past, Rust's for loop is similar to Ruby's one
[07:01:15] *** Quits: edwardw (edwardw@C5A98CE5.177282A3.FAED9FFC.IP) (Quit: Leaving...)
[07:01:18] <Kroisse> was*
[07:01:36] <Kroisse> but now it's not
[07:01:48] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[07:02:52] <cmr> aatch: everything should be bumped up to 10M though
[07:02:55] <cmr> *now
[07:03:20] *** Joins: alonlevy (alon@2CD54432.57968636.E9C721AF.IP)
[07:05:20] <aatch> Woo, I'm D1
[07:05:36] <cmr> yup
[07:05:42] <voltagex> I'm not even sure what to google for with the issues I'm having. Feeling very dumb at the moment. Can I just ask dumb questions in here?
[07:06:00] <huon> heh, I was just doing a performance comparison between Clang and Rust; and the C was about 10x faster... so I was digging around in the asm/IR finding the smallest differences...
[07:06:04] <voltagex> bugger, this is logged :P
[07:06:05] <aatch> voltagex, that's what we here for
[07:06:11] <cmr> voltagex: yes, please ask all the dumb questions.
[07:06:26] <huon> turns out I was just doing 1 million iterations in the C, and 10 million in the Rust :/
[07:06:27] *** Quits: magg (magg@A9A36154.9E924F16.3D0AE249.IP) (Quit: magg)
[07:06:31] <voltagex> preferred pastebin?
[07:06:36] <cmr> voltagex: possibly recording the answers for later integration into a tutorial or http://static.rust-lang.org/doc/master/complement-cheatsheet.html ? :)
[07:06:38] <cmr> gist
[07:06:43] <cmr> huon: good job
[07:06:55] <cmr> huon: :P
[07:06:59] <cmr> counting zeros is hard
[07:07:04] * aatch condescendingly pats huon on the head
[07:07:24] * huon <3 10_000_000
[07:07:34] <huon> </3 1000000
[07:08:14] <cmr> aatch: so... what do I actually do to use hhvm instead of the zend php that came in the box?
[07:08:20] *** Joins: frogzilla (Mibbit@D35DF66D.B5ECCD09.301675BC.IP)
[07:08:29] <cmr> I see there's an hhvm binary
[07:08:49] <voltagex> ignoring the issues with the algorithm, what's wrong with https://gist.github.com/voltagex/9719773?
[07:08:49] <aatch> cmr, theres an hhvm-nightly package that they provide
[07:09:02] <cmr> aatch: I got it from the ppa listed on their github wiki
[07:09:03] <frogzilla> how do I get `*c_char` from str? (I want to call http://static.rust-lang.org/doc/master/std/libc/funcs/posix88/fcntl/ffi.open.html)
[07:09:18] <cmr> frogzilla: http://static.rust-lang.org/doc/master/std/c_str/struct.CString.html
[07:09:30] <aatch> cmr, well the easiest solution is to set up hhvm in fastcgi mode and use it as a drop-in replacement.
[07:09:34] <voltagex> /home/voltagex/rust/ex1_peak.rs:7:13: 7:20 error: mismatched types: expected `&<generic integer #9>` but found `<generic integer #10>` (expected &-ptr but found integral variable)
[07:09:46] <voltagex> these errors are a bit out-there
[07:09:55] <cmr> voltagex: `let lastnum = num;` doesn't do what you think it does. that's not actually assignment, it's creation of a new variable.
[07:09:58] <huon> voltagex: you're not modifying lastnum either
[07:10:06] <cmr> `let` always introduces new bindings (variable names)
[07:10:07] *** Joins: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net)
[07:10:08] <voltagex> hold up
[07:10:24] <huon> and the vector iterator yields references/pointers into the vector, not the elements themselves
[07:10:34] <voltagex> oh
[07:10:42] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[07:10:43] <voltagex> so I'm getting pointers where I thought I was getting integers?
[07:10:49] <huon> yeah
[07:10:55] <huon> *num should be fine
[07:11:05] <voltagex> clearly I'm still in the C# mindset :P
[07:11:10] <huon> or `for &num in ...` to pattern match through the pointer
[07:11:33] <cmr> aatch: would that be `hhvm -m s` ?
[07:11:51] <voltagex> with lastnum = *num; I still get the same error
[07:11:58] <voltagex> oh
[07:11:59] *** Quits: frogzilla (Mibbit@D35DF66D.B5ECCD09.301675BC.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[07:12:01] <voltagex> nevermind
[07:12:08] <huon> voltagex: you need it everywhere you use num?
[07:12:11] <cmr> wrong line :P
[07:12:12] <voltagex> right
[07:12:18] <aatch> cmr, not sure, I've not used hhvm in fastcgi mode. I'd have to look at our deployment scripts at work.
[07:12:31] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[07:12:41] <aatch> But I think that, yes, that is it.
[07:12:53] <aatch> there's an init script that should have been installed
[07:13:27] <voltagex> I feel like I'm missing parts of the theory here - why do I have to explicitly mark things as mutable?
[07:13:48] <cmr> voltagex: it helps catch bugs.
[07:14:02] <fmtq> better than marking them as constant
[07:14:06] <fmtq> :)
[07:14:08] <voltagex> hm
[07:14:11] <cmr> either when you don't mark something mutable and you meant it to be, or you marked something mutable but it's never used mutably -- these are both bugs rustc frequently catches.
[07:14:16] <voltagex> so it's like readonly-by-default
[07:14:22] <cmr> essentially.
[07:14:24] <fmtq> yes
[07:14:33] *** Joins: alkino_ (alkino@moz-AAF51602.w92-151.abo.wanadoo.fr)
[07:15:09] <Havvy> Which if you are somebody like me, is a really good thing.
[07:15:12] <cmr> last time I looked, less than half of bindings in every rust codebase I could find were marked mutable
[07:15:36] <Havvy> cmr:  I have more RefCells than I do mut bindings.
[07:15:47] <aatch> turns out that just doing another `let` is sufficient
[07:15:59] <cmr> (admittedly this was via some less-than-precise greps)
[07:16:32] *** Quits: hjr3 (hradtke@moz-699EABC0.lsanca.fios.verizon.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[07:17:05] <cmr> voltagex: also more rustically that is written as let lastnum = arr.iter().max().unwrap_or(0);
[07:17:22] <cmr> (... although without the println...)
[07:17:28] <voltagex> cmr: rustically!
[07:17:58] <aatch> cmr, so differential is up, now what? :P
[07:17:59] <Havvy> rustic is already an adjective.
[07:18:08] <cmr> and a fantastic one.
[07:18:17] <voltagex> I'm running through MIT OpenCourseWare's intro to algorithms, hence the "slow" way of doing things.
[07:18:21] <cmr> aatch: I'll look at it after I get hhvm working :P
[07:18:30] <cmr> voltagex: ah cool, let me know how it is :)
[07:18:33] *** Joins: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP)
[07:19:01] <voltagex> I'm guessing with .iter there's no way of knowing where I'm up to in the array?
[07:19:19] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[07:19:21] <alan_andrade> peekable() could help
[07:19:23] <cmr> you can add in a .enumerate() to get a count of number of items iterated so far.
[07:19:27] <aatch> theres a translation option to put phabricator into all caps
[07:19:46] <cmr> aatch: much easier than actually l10n :p
[07:19:46] <aatch> THIS IS AMAZING
[07:20:01] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[07:20:07] <aatch> CAPS LOCK IS CRUISE CONTROL FOR COOL
[07:20:12] <aatch> jensnockert!
[07:20:31] <aatch> jensnockert, I have exiting things on the SIMD front!
[07:21:28] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[07:21:45] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[07:22:06] *** Joins: wilmoore (wilmoore@moz-4EF3CEBC.hsd1.co.comcast.net)
[07:22:25] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[07:23:12] *** Quits: gwty (gwtypc@3CAC4C72.A9D442CE.49FF672.IP) (Ping timeout)
[07:23:37] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[07:24:29] *** Joins: gwty (gwtypc@3CAC4C72.A9D442CE.49FF672.IP)
[07:24:51] <Havvy> Progress for the day:  https://github.com/Havvy/rustlike/commit/9d1115a9ffc9e52e385e7c6153a1c2d861793edb
[07:25:08] *** Quits: james4k (james@moz-9BB5AE72.consolidated.net) (Ping timeout)
[07:26:50] <cmr> Havvy: wrangling the module system is often the most frustrating part of rust imo
[07:27:33] <cmr> Havvy: does it do anything yet? let me know when there's something to show, I'd love to have it in TWiR :)
[07:27:43] <voltagex> is there a list of functions in the standard library somewhere?
[07:27:45] <Havvy> cmr:  Well, you can walk around in a big room.
[07:27:56] <Manishearth> voltagex: there are the docs, no?
[07:27:59] <Havvy> And press 'q' or 'F1' to end.
[07:28:04] <voltagex> I'm looking for things like .count() and .length() - shows how much I rely on intellisense
[07:28:09] <cmr> voltagex: http://static.rust-lang.org/doc/master/std/index.html
[07:28:14] <cmr> voltagex: even has a search
[07:28:36] <voltagex> crap, I missed the 'std' link on the front page
[07:28:38] <voltagex> sorry
[07:28:40] <cmr> :p
[07:29:24] <Havvy> Suggestion: Link to that page at the bottom of the tutorial.
[07:29:42] <cmr> it's there
[07:29:46] <cmr> "See the API documentation for details."
[07:29:49] <Havvy> I don't remember it there. :/
[07:29:57] <cmr> In the "standard library" section :p
[07:30:14] *** Quits: gwty (gwtypc@3CAC4C72.A9D442CE.49FF672.IP) (Ping timeout)
[07:30:55] *** Joins: magg (magg@A9A36154.9E924F16.3D0AE249.IP)
[07:31:02] *** Quits: magg (magg@A9A36154.9E924F16.3D0AE249.IP) (Quit: magg)
[07:33:01] <o11c> huon: should have used 10'000'000 in C++ ...
[07:33:16] <o11c> anyway, rfc written
[07:34:40] *** Joins: jmgrosen (user@moz-848F6087.sb.sd.cox.net)
[07:36:39] *** Quits: jmgrosen (user@moz-848F6087.sb.sd.cox.net) (Ping timeout)
[07:36:52] <cmr> aatch: hhvm achieved.
[07:36:53] *** Quits: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP) (Quit: This computer has gone to sleep)
[07:37:05] <aatch> cmr, awesome.
[07:37:32] <Havvy> cmr:  BTW, if you do add it to TWiR, it's called `rusttower`, not `rustlike` (which is the name of the repo)
[07:37:47] <cmr> Havvy: I'll hold off until it's somewhat more impressive :P
[07:38:28] <Havvy> rusti:  std::vec_ng::new()
[07:38:29] -rusti- pastebinned 11 lines of output: http://sprunge.us/eESE
[07:38:58] <Havvy> Yay...I somehow grabbed one of the last bulids before std::vec_ng was removed?
[07:39:06] *** Joins: nical (nico@DA4ABEAF.1DE10CA8.D8E68FF6.IP)
[07:39:57] *** Joins: aurynj (Eon@6FE096E1.6EA7AEE4.364694FC.IP)
[07:40:27] <meyer> Do you think grapheme cluster iteration should be in the standard library?
[07:41:52] *** Joins: edwardw (edwardw@C5A98CE5.177282A3.FAED9FFC.IP)
[07:42:31] <strcat> Havvy: was renamed 3 days ago
[07:42:59] <Havvy> Uh, what do we do about Rust (the game) posts in /r/rust ?
[07:43:08] <cmr> Havvy: report them
[07:43:20] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[07:43:54] <Havvy> Reported.
[07:44:18] *** Joins: [squiddy] (squiddy@moz-767EF079.dynamic.cablesurf.de)
[07:45:35] *** Quits: aurynj (Eon@6FE096E1.6EA7AEE4.364694FC.IP) (Ping timeout)
[07:45:49] *** Joins: aurynj (Eon@53E88241.65896F99.364694FC.IP)
[07:46:08] <huon> meyer: yes
[07:46:56] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[07:48:24] <yorhel> Is there a way to get an enum value from an integer other than writing a huge match block?
[07:48:54] <cmr> yorhel: not safely, but there's #[deriving(FromPrimitive)] to do it for you.
[07:49:04] <huon> yorhel: put #[deriving(FromPrimitive)] to get the compiler to make the match for you
[07:49:42] <yorhel> Oh that can be automatically derived? Awesome, exactly what I need. Thanks!
[07:51:48] * huon wonders if the match for enum Foo {A, B, C, D} ends up being `if A as u8 <= x && x <= D as u8 { cast::transmute(x) }` post-optimisation
[07:51:59] <huon> I'd guess not, which is unfortunate :(
[07:52:03] *** Joins: klaus (koz@moz-4486E876.hsd1.wa.comcast.net)
[07:52:35] *** Joins: skade (skade@moz-1EC0F118.pools.arcor-ip.net)
[07:52:50] <cmr> they might be
[07:53:16] <edwardw> compiler is that smart?
[07:53:17] <huon> oh, yes, it does
[07:53:19] <huon> \o/
[07:53:25] <cmr> if not, the deriving could check if the variants are contiguous and do that itself :p
[07:53:32] <cmr> edwardw: the compiler is very smart.
[07:53:39] <cmr> but dumb in others.
[07:53:41] <edwardw> hmm, so cool
[07:53:46] <edwardw> lol
[07:53:48] <cmr> in short, it's a computer.
[07:53:51] <cmr> :p
[07:54:03] <huon> woah
[07:54:26] <huon> A,B,C,D,E,F=10 optimises to a < 11, and then two array look-ups
[07:54:36] <huon> super cool
[07:54:47] <huon> (although strictly speaking the second array index is useless.)
[07:55:06] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[07:55:54] *** Quits: nlminhtl (ignotus@moz-393BCEC.la.net.ua) (Ping timeout)
[07:56:05] <huon> but it becomes switch on all the discriminants for `F=15` :(
[07:56:46] <edwardw> how do you find out that, checking LLVM IR?
[07:56:48] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[07:56:49] *** Joins: dapz (textual@moz-F958911.hsd1.ca.comcast.net)
[07:56:51] <huon> yeah
[07:56:56] <edwardw> k
[07:57:18] <huon> foo.rs `#[deriving(..)] enum Foo { ... }` rustc foo.rs -O --emit=ir --crate-type=lib
[07:58:56] <edwardw> I got lost in foo.ll :P
[07:59:42] *** Joins: eibwen (kvirc@moz-BBC2056C.dip0.t-ipconnect.de)
[08:00:05] <huon> edwardw: http://llvm.lyngvig.org/Articles/Mapping-High-Level-Constructs-to-LLVM-IR is a reasonable starting point for working out what things mean
[08:00:27] <huon> (as is looking at very simple things like `fn foo(x: int) -> int { x + 1 }` etc.)
[08:00:48] <edwardw> awesome, bookmarked
[08:01:39] <huon> http://llvm.org/docs/LangRef.html also
[08:01:54] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[08:02:01] <meyer> huon: It looks like there is an existing library on Github (https://github.com/sbillig/rust-grapheme). I think I'll either modify that, or write one from scratch tomorrow. If I modify the existing one, should I contact the author before it gets included (not that I wouldn't)? Also, as for API: I'm thinking it should be a StrSlice method, and iterate over (sub-)slices of the string, without a
[08:02:03] <meyer> llocating anything. Or should I introduce a struct called GraphemeCluster or do something different?
[08:02:14] <huon> (not necessarily the best learning resource, but good as a reference manual)
[08:02:22] *** Joins: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[08:02:58] <huon> meyer: I think iterating over &str or struct GraphemeCluster { s: &str } is good
[08:03:31] <huon> that library is super old, but yeah, if you use it as a starting point talk to them
[08:03:41] <huon> (especially since there's no license)
[08:04:01] <meyer> Yeah, that's what I was going to do. Is there a default license for code on Github?
[08:04:06] <cmr> no
[08:04:11] <huon> no
[08:04:12] *** Quits: edwardw (edwardw@C5A98CE5.177282A3.FAED9FFC.IP) (Quit: Leaving...)
[08:04:23] <huon> https://github.com/mozilla/rust/search?q=grapheme&ref=cmdform&type=Issues is relevant too
[08:04:28] *** Quits: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[08:04:36] <huon> actually, I think *not* putting it on StrSlice is better
[08:04:59] <huon> the plan is to create a libunicode crate of some sort
[08:05:02] <meyer> Should it just be a function in char?
[08:05:15] <huon> definitely strings
[08:05:46] <strcat> some would be in char
[08:06:06] <strcat> you iterate over graphemes by checking if the code point is a grapheme, which would be done via char
[08:06:08] <huon> yeah (the iterator itself is definitely a string thing)
[08:06:16] <huon> (is what I meant)
[08:06:38] <meyer> I guess a Unicode library would make sense. But, at the same time, if Rust's native strings are assumed to be Unicode strings, shouldn't it all be string stuff?
[08:06:49] <huon> anyway I would recommend writing the code outside of of std::str, since bootstrapping is annoying
[08:06:59] <huon> the unicode librayr would be handling str
[08:08:58] <meyer> And std::prelude would re-export some of it?
[08:09:27] *** Quits: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) (Connection reset by peer)
[08:09:33] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[08:09:51] *** Joins: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se)
[08:09:54] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[08:10:29] *** Quits: harish (harish@moz-24DD2596.hsd1.ca.comcast.net) (Ping timeout)
[08:11:31] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[08:11:32] <cmr> rusti: let s = "sadface"; s[0] == 0x73
[08:11:33] -rusti- true
[08:11:36] <cmr> rusti: let s = "sadface"; s[0]
[08:11:38] -rusti- 115
[08:11:44] <cmr> ah right
[08:11:44] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[08:12:08] <voltagex> continuing the algorithms course...
[08:13:14] <voltagex> https://gist.github.com/voltagex/9719773#file-peak-finding-faster-rs I'm not sure what's causing the error here
[08:13:21] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[08:13:26] <voltagex> (error noted in comments this time)
[08:13:40] <meyer> huon: Is there a branch with a libunicode, or should I just write it in StrSlice and sit on it?
[08:14:01] <cmr> voltagex: indexing an array doesn't yield a reference.
[08:14:05] <huon> meyer: I guess StrSlice is fine
[08:14:17] <huon> and then someone can move it/tell you to move it when we work out what's up
[08:14:55] <voltagex> oh, pointers again?
[08:15:23] <cmr> mhm
[08:15:29] <cmr> unary * dereferences a pointer.
[08:15:41] <meyer> huon: Alright. I've wanted it for proper-looking Unicode diffs in the VCS I'm working on. I'll probably write it and send a PR tomorrow. 
[08:16:52] <voltagex> erm, why is rust trying to compile my comments?
[08:17:09] <voltagex> oh, nvm
[08:17:53] <voltagex> no, it actually is trying to compile my comments
[08:17:55] *** Joins: gwty (gwtypc@3CAC4C72.A9D442CE.49FF672.IP)
[08:18:01] <cmr> a much overlooked feature, rustc is actually a strong AI, and will figure out what you want when you write comments.
[08:18:11] <voltagex> lol
[08:18:15] <cmr> voltagex: you have uncommented span markers.
[08:18:20] <cmr> at least in the gist
[08:18:27] <voltagex> I've fixed that
[08:18:51] <voltagex> I'll just remove the comments for now
[08:19:46] <voltagex> so I needed & instead of *, but don't understand why
[08:20:09] <cmr> you don't need anything. `if (arr[middle-1] > arr[middle])` works.
[08:20:16] <voltagex> oh.
[08:20:38] <voltagex> ah, when the docs say a 'view' into the array, do they mean I now have values, not references?
[08:20:52] <cmr> yes.
[08:21:24] *** Joins: eddyb (eddy@F8B50789.F33C1089.FB866788.IP)
[08:21:47] *** Joins: NiccosSystem (NiccosSyst@moz-CF331A7F.nextgentel.com)
[08:22:25] *** Quits: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net) (Connection reset by peer)
[08:22:43] *** Joins: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net)
[08:25:23] <kvanb> vadimcn: you around?
[08:25:58] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[08:26:56] <voltagex> I can now write a first year uni student algorithm in rust :P
[08:28:18] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[08:28:19] *** Joins: harish (harish@moz-24DD2596.hsd1.ca.comcast.net)
[08:29:26] <cmr> aatch: done review
[08:29:32] <cmr> <3 phabricator
[08:29:38] <kvanb> hi cmr
[08:29:54] <cmr> hello
[08:31:37] <kvanb> any idea why I might get this error https://gist.github.com/kvanberendonck/9720260
[08:31:50] <kvanb> I'm on a different branch to normal and I'm running ./configure
[08:32:22] <cmr> besides github bugs, no
[08:32:24] <alan_andrade> It seems the connection dropped or the pkg is corrupted. That's my guess
[08:33:04] <kvanb> I tried it 3 or 4 times
[08:34:00] <alan_andrade> remove the contents of src/ maybe will force it to do it all over agina
[08:34:01] <alan_andrade> ?
[08:35:34] *** Joins: jmgrosen (user@moz-848F6087.sb.sd.cox.net)
[08:36:01] *** Joins: koderok (Thunderbir@8D14BB74.6560E2B0.85BF2EFC.IP)
[08:37:33] *** Quits: jmgrosen (user@moz-848F6087.sb.sd.cox.net) (Ping timeout)
[08:37:47] <kvanb> ill test
[08:38:15] <aatch> cmr, it's fatal because I copied the code from another match arm :/
[08:38:24] *** Joins: jroweboy (jrowe7@moz-18814A6B.provo.static.broadweavenetworks.net)
[08:38:25] <alan_andrade> thinking twice, that might be bad idea.
[08:44:44] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[08:46:35] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[08:50:04] *** Joins: nkoep (nik@moz-8846C716.pool.mediaways.net)
[08:51:33] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[08:51:54] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[08:52:05] *** Quits: Mech (Mibbit@moz-40CAA913.dsl.dyn.ihug.co.nz) (Quit: http://www.mibbit.com ajax IRC Client)
[08:52:10] *** Quits: brandonson (SingingBoy@610D90A5.EE9B234.1ECA502.IP) (Quit: WeeChat 0.4.3-dev)
[08:53:37] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[08:55:11] *** Quits: onelson (owen@18CF7301.95770028.5B6BFE7D.IP) (Ping timeout)
[08:55:42] <eddyb> cool thing: http://www.wei-wang.com/ExplainGitWithD3 though everyone has seen it by now, since it's on HN :/
[08:56:00] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[08:56:08] *** Joins: brandonson (SingingBoy@610D90A5.EE9B234.1ECA502.IP)
[08:56:49] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[08:56:53] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[08:57:44] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[08:58:10] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[09:00:39] *** Quits: koderok (Thunderbir@8D14BB74.6560E2B0.85BF2EFC.IP) (Ping timeout)
[09:03:04] <mindcat> chartable = ''.join(reduce(lambda x,y: x + y, [[chr(x) for x in xrange(y,z + 1)] for y,z in (map(lambda x: [ord(x) for x in x][0],tuple(x)) for x in ["az", "AZ", "09"])]))
[09:03:14] <jroweboy> Just curious, but the collections::trie::TrieMap doesn't seem to have a way to insert new items into them. In the source code there is a insert function but it is not public. Am I overlooking something?
[09:04:28] *** Quits: alkino_ (alkino@moz-AAF51602.w92-151.abo.wanadoo.fr) (Ping timeout)
[09:04:36] *** Joins: koderok (Thunderbir@119AA61D.FEE11226.8D9DA8D9.IP)
[09:04:38] *** Quits: IanCormac84 (User@9AFA1D9.2A8D8854.67DFF8B4.IP) (Ping timeout)
[09:05:03] <kimundi> jroweboy: They are trait implementation.
[09:05:32] *** Joins: IanCormac84 (User@43DBEFFC.2A8D8854.67DFF8B4.IP)
[09:05:32] <kimundi> jroweboy: Somewhere the Map trait is defined, which provides the insert function.
[09:06:00] <jroweboy> kimundi: Is the docs just lying to me then, since it doesn't say it impls the Map trait
[09:06:08] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[09:06:13] <jroweboy> oops
[09:06:16] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[09:06:36] <jroweboy> wrong page I was looking at.. Ok, so it DOES impl map, but it only says it adds find
[09:06:56] <jroweboy> and MutableMap only adds find_mut swap and pop
[09:07:29] *** pnkfelix is now known as pnkfelix|away
[09:07:45] *** Joins: nlminhtl (ignotus@moz-393BCEC.la.net.ua)
[09:09:18] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[09:09:29] <brandonson> jroweboy: MutableMap provides default implementations of insert and remove, so insert is there, but the TrieMap uses the default implementation so it doesn't show up in the docs.
[09:09:32] <kimundi> jroweboy: MutableMap contains insert and remove as default methods, and those get hidden for some reason now. Klick on the trait itself to look at them.
[09:10:08] <jroweboy> Oh cool! I didn't know thats how it worked. Thats pretty cool then. thanks brandonson and kimundi
[09:10:26] *** flaper87|afk is now known as flaper87
[09:10:38] <kimundi> Ah I see, swap is the generic insert that returns the previous value if any, and insert is sugar over that that just ignores that return value...
[09:10:49] *** Quits: p1start (rewi@moz-E7F3D014.org) (Ping timeout)
[09:11:01] *** Joins: bourbaki (chatzilla@moz-94D28F6C.dip0.t-ipconnect.de)
[09:11:05] <bourbaki> moin
[09:11:39] <bourbaki> Is there a higher kinded types / template template equivalent in Rust?
[09:11:41] *** Quits: wilmoore (wilmoore@moz-4EF3CEBC.hsd1.co.comcast.net) (Ping timeout)
[09:12:17] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[09:12:19] <aatch> bourbaki, there is not
[09:12:31] <bourbaki> Meh too bad.
[09:12:49] <bourbaki> Can you abuse macros to construct something like this?
[09:13:18] <eddyb> not really
[09:13:37] <eddyb> you can use the HKT transform, but you get something open instead of close and it's kinda fringe
[09:13:46] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[09:13:49] <bourbaki> Hm hm hm
[09:13:55] *** pnkfelix|away is now known as pnkfelix
[09:13:59] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[09:14:25] <eddyb> not to mention that trait bounds aren't used in inference, so by doing the HKT transform, you dig yourself deeper in the inference failure hole
[09:14:37] <bourbaki> :)
[09:14:44] <eddyb> whereas real HKT would provide better inference results
[09:14:53] <bourbaki> And shovel the dirt right back over your head:)?
[09:15:10] <bourbaki> Is that a direction Rust intends to head into?
[09:15:13] <bourbaki> In general
[09:18:59] <kimundi> bourbaki: In general the Rust core devs are not opposed to someone adding HKT, testing it properly, and making sure it integrates well in the language. But its not a pre-1.0 priority for them.
[09:19:16] <bourbaki> Sure was not expecting this.
[09:19:31] <bourbaki> I would still like to get a feel in what direction Rust wants to go.
[09:19:35] <kimundi> I expect we get them sooner or later.
[09:19:39] <eddyb> bourbaki: upwards
[09:19:43] <bourbaki> :)
[09:19:53] <bourbaki> I expect nothing else.
[09:20:44] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[09:22:24] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[09:22:33] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[09:22:48] *** Joins: twi (Adium@moz-ED056769.cust.vodafonedsl.it)
[09:24:13] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[09:25:47] *** Quits: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net) (Input/output error)
[09:32:54] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Input/output error)
[09:33:06] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[09:35:31] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[09:35:32] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[09:35:58] *** Joins: paraze (paraze@moz-96380A71.w86-209.abo.wanadoo.fr)
[09:36:31] *** Quits: NiccosSystem (NiccosSyst@moz-CF331A7F.nextgentel.com) (Ping timeout)
[09:36:36] *** Joins: jmgrosen (user@moz-848F6087.sb.sd.cox.net)
[09:37:05] *** Joins: alkino_ (alkino@moz-AAF51602.w92-151.abo.wanadoo.fr)
[09:38:24] *** Quits: jmgrosen (user@moz-848F6087.sb.sd.cox.net) (Ping timeout)
[09:40:26] *** Joins: Titof (Titof@moz-EAAEA701.w81-248.abo.wanadoo.fr)
[09:40:40] <Titof> hi
[09:41:27] *** Joins: Ms2ger (Ms2ger@moz-CE3CEBEE.access.telenet.be)
[09:41:36] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[09:41:57] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[09:44:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[09:44:41] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[09:46:30] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[09:47:04] *** Quits: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP) (Connection reset by peer)
[09:50:39] *** Joins: shafire (Mibbit@BFFB9AE2.2A28A9A6.B40B392D.IP)
[09:50:43] <shafire> hi
[09:50:52] <shafire> is there any collected information source about ide support and questions like "does a llvm compiler for rust exsits"?
[09:51:14] <nical> shafire: the rust compiler is based on llvm
[09:51:43] <nical> the question could be "Is there a non-llvm-based rust compiler" and I think the answer would be no
[09:51:44] <shafire> Good to know :-)
[09:52:40] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[09:52:56] <Titof> Can someone help me I try to convert a ~str to &str and return it but I get error: borrowed value does not live long enough
[09:52:59] <nical> shafire: as far as IDEs are concerned, I think that right now we mostly have syntax coloring in some editors like vim, emacs, sublime, etc.
[09:53:30] <nical> Titof: can you pastebin the code?
[09:53:44] <shafire> thanks nical 
[09:54:52] <Titof> nical: http://paste.awesom.eu/pcT1&ln  line 147
[09:55:00] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[09:55:10] <nical> Titof: example of what you are probably trying to do:
[09:55:12] <nical> fn get_slice(&'l self) -> &'l str { return self.my_string.slice(); }
[09:55:45] <nical> Titof: ok, so you need to add lifetime annotations to get_nick
[09:55:56] <nical> the self parameter needs to be annotated
[09:56:04] <nical> so &self becomes &'l self
[09:56:29] <huon> (.as_slice(), not .slice())
[09:56:32] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[09:56:48] <nical> the slice you return must have the same lifetime so -> &str becomes -> &'l str
[09:56:58] <Titof> ok thx :)
[09:58:04] *** Joins: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net)
[09:58:18] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[09:58:45] *** Quits: koderok (Thunderbir@119AA61D.FEE11226.8D9DA8D9.IP) (Ping timeout)
[09:59:07] *** Joins: kris (kris@C2FE3F4A.C760DD8D.1352A07E.IP)
[09:59:17] <nical> workflow question: is it a good thing to merge the latest changes into a pull-request's branch, or should I rebase instead?
[09:59:59] *** Joins: jviereck (Adium@moz-EFBFEE68.dynamic.hispeed.ch)
[10:00:09] <huon> rebase
[10:00:12] <nical> rebasing looks nice because the PR's commits are still on top of the log but it rewrites the history which makes git complain when pushing
[10:00:28] *** Quits: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net) (Ping timeout)
[10:00:49] <huon> push -f to stop it whinging
[10:01:13] <nical> huon: cool, thanks
[10:01:21] *** Quits: kris (kris@C2FE3F4A.C760DD8D.1352A07E.IP) (Client exited)
[10:01:27] *** Joins: kris (kris@C2FE3F4A.C760DD8D.1352A07E.IP)
[10:01:34] <huon> but yeah, it's nice to keep each PRs history as clean as possible
[10:01:53] *** Joins: arturo (Thunderbir@moz-E83B14F0.superkabel.de)
[10:02:04] <jroweboy> I'm struggling to make a tree in rust. I saw in the Tutorial how to make a Linked List, but I couldn't find a way to use an enum to represent a tree. Instead, I'm going the ugly route and using a HashMap<~str, Option<Node>> In order to simulate a tree. That's giving me lifetime errors though . 
[10:02:23] <jroweboy> Here is the sample code I wrote (please ignore the crappy string handling :p) https://gist.github.com/jroweboy/9720969
[10:03:58] *** Quits: rweir (rob@moz-B98DF6FB.members.linode.com) (Ping timeout)
[10:04:01] <huon> store it as just children: HashMap
[10:04:02] <huon> without the ~
[10:04:10] <huon> (that won't solve the problem though.)
[10:04:13] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[10:04:43] *** Quits: Axord (xord@moz-BC8E2FBC.static.rvsd.ca.charter.com) (Ping timeout)
[10:05:08] <jroweboy> huon: I'm sleepy and just threw ~ everywhere in my sample, but my actual code doesn't look like that thankfully :)
[10:05:15] <kimundi> jroweboy: What trouble did you have with representing a tree as a enum?
[10:05:45] <huon> jroweboy: I also don't understand why it needs to be &mut Some(...)/
[10:05:46] <huon> ?
[10:05:56] *** Quits: kris (kris@C2FE3F4A.C760DD8D.1352A07E.IP) (Ping timeout)
[10:05:58] <kimundi> enum Tree<T> { Node(~Tree, ~Tree), Leaf(T) } ought to work for something simple.
[10:06:20] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[10:06:34] *** Joins: rweir (rob@moz-B98DF6FB.members.linode.com)
[10:07:06] <jroweboy> kimundi: Well, I couldn't think of a way to say that I want any number of items to map to a Node though. Doesn't your example only work for a Tree with two children?
[10:07:24] <kimundi> Ah, then do
[10:07:34] <kimundi> enum Tree<T> { Node(~[Tree]), Leaf(T) } ought to work for something simple.
[10:07:46] <jroweboy> huon: That's what happens when I code at 4 AM :S I just noticed I didn't have an option there in my main code
[10:09:24] <jroweboy> kimundi: Hmm, that would make lookup work by traverse to the right depth in the tree, then loop over every item in the vector right?
[10:09:28] *** Quits: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se) (Quit: mediocrity)
[10:09:35] <huon> jroweboy: I have a feeling that https://gist.github.com/huonw/9721035 works
[10:09:45] <huon> but I also suspect it doesn't
[10:09:47] *** Quits: klaus (koz@moz-4486E876.hsd1.wa.comcast.net) (Quit: klaus)
[10:10:06] <kimundi> jroweboy: I guess? Depends on what you want to do with this.
[10:11:25] <jroweboy> huon: cannot borrow `*ptr.children` as mutable more than once at a time It says the lifetime of ptr is till the end of main, so I can't borrow it in the loop?
[10:12:54] <jroweboy> kimundi: Well, getting it to work is my first goal and then making it better can come later. Thanks for the advice!
[10:12:55] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[10:12:59] <huon> jroweboy: https://gist.github.com/huonw/2b658fd166c8375d5eca
[10:13:04] <huon> that does work
[10:13:15] <huon> the only major difference is the `let tmp = ptr;`
[10:13:27] <huon> which basically makes sure the compiler know that the borrows aren't overlapping
[10:13:37] <huon> it's not a fundamental change
[10:13:50] <huon> (i.e. theoretically the compiler could work this out itself, but currently doesn't)
[10:14:35] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[10:14:49] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[10:14:52] <jroweboy> huon: That's amazing! Now to try that in my main code to see if it works... I tried something similar previously, but I moved the pointer with let mut tmp which appears to be a mistake.
[10:15:14] <huon> jroweboy: I don't think the `mut` should stop it compiling
[10:15:24] <huon> it may make the compiler warn, though.
[10:16:43] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[10:17:03] <jroweboy> huon: Oh, so its actually the { } block you defined ptr in then? I just noticed that was added as well
[10:18:41] <huon> jroweboy: oh, yeah, that helps too: it restricts the borrow of `main` so that it is usable later
[10:19:13] <huon> (i.e. the println!("{}", main) wouldn't be valid without it)
[10:19:18] *** Quits: shafire (Mibbit@BFFB9AE2.2A28A9A6.B40B392D.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[10:20:52] <brandonson> are Rc<RefCell<T>>'s sendable?  getting a type error about something not being Send when converting to a trait object.
[10:21:59] <huon> they're not sendable
[10:22:20] <huon> You need a MutexArc<T> for the sendable equivalent
[10:22:24] <huon> (or RWArc<T>)
[10:23:17] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[10:23:23] <brandonson> ah, right.  though I'm not sure why I need Send, now that I think about it.  pushing to a vector shouldn't require that the value I'm pushing is Send, should it?
[10:23:26] *** Joins: q66 (q66@moz-AD992F6.range81-152.btcentralplus.com)
[10:24:02] <huon> no,it shouldn't
[10:24:09] <jroweboy> huon: That worked! Thank you so much, spent all night on this one :)
[10:24:13] <huon> if you're using a trait object you need to override the default Send
[10:24:15] <huon> bound
[10:24:23] <huon> jroweboy: :)
[10:24:39] <huon> brandonson: `~Trait:` (`~Trait` is implicitly `~Trait:Send`)
[10:25:02] <brandonson> huon: ah.  so how do I override that default?
[10:25:02] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[10:25:52] *** Joins: leowoe (Leo@moz-72D47201.dclient.hispeed.ch)
[10:25:56] <Titof> I get an error with the compiler
[10:25:57] <Titof> http://paste.awesom.eu/sWD4&ln
[10:26:03] *** Quits: leowoe (Leo@moz-72D47201.dclient.hispeed.ch) (Quit: Leaving.)
[10:26:18] <Titof> code : https://bitbucket.org/Oli4242/loli-battle/
[10:26:27] <Titof> who know how to fix it ?
[10:26:30] <huon> "ld: can't open output file for writing: LoliRC, errno=21 for architecture x86_64"
[10:26:41] <huon> do you have the right file permissions?
[10:26:56] <jroweboy> brandonson: I think you can say Trait: with just a colon to override it?
[10:27:20] *** Joins: mgottschlag (quassel@moz-CD246736.hsi7.kabel-badenwuerttemberg.de)
[10:27:55] <Titof> yes huon 
[10:28:20] <huon> brandonson: my `'d text was how to override it
[10:28:46] <huon> Titof: the file LoliRC is a directory
[10:28:51] <huon> "file"
[10:28:51] <Titof> yes
[10:29:17] <Titof> i have lolirc/lolirc.rs
[10:29:22] <huon> if you are running `rustc LoliRC.rs` then it attempts to create an exectable with the same name
[10:29:34] <brandonson> jroweboy, huon: ah, well, that sort of worked.
[10:29:38] <Titof> it is case sensitive?
[10:29:38] <brandonson> got the right trait bounds
[10:29:55] <brandonson> it still thinks I need Send though...
[10:30:32] *** Joins: kngl (Adium@40AE2BF6.ABCDAFD6.7C797F8E.IP)
[10:30:49] <brandonson> oh wait, there we go
[10:31:04] <brandonson> had to fix the declaration of the vector too.
[10:32:10] <huon> Titof: what operating systemare you on?
[10:32:15] <huon> *system are
[10:32:20] <Titof> i'm on OSX Marvericks
[10:32:23] <huon> (I just opened https://github.com/mozilla/rust/issues/13098 too)
[10:35:23] *** Joins: NiccosSystem (NiccosSyst@moz-CF331A7F.nextgentel.com)
[10:36:56] *** Joins: jmgrosen (user@moz-848F6087.sb.sd.cox.net)
[10:40:48] *** Quits: jmgrosen (user@moz-848F6087.sb.sd.cox.net) (Ping timeout)
[10:41:47] * mindcat see "Loli"
[10:44:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[10:44:46] *** Joins: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net)
[10:45:44] *** Joins: james4k (james@moz-9BB5AE72.consolidated.net)
[10:46:27] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[10:47:28] *** Quits: james4k (james@moz-9BB5AE72.consolidated.net) (Ping timeout)
[10:49:32] *** Joins: Axord (xord@moz-BC8E2FBC.static.rvsd.ca.charter.com)
[10:51:21] *** Joins: sawrubh|bot (~sawrubhbo@moz-E0F149F7.members.linode.com)
[10:53:21] *** Quits: Mowah (Mowah@moz-8548F376.cust.bredbandsbolaget.se) (Ping timeout)
[10:57:20] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[10:57:41] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[10:59:03] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[11:00:00] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[11:00:10] *** Quits: q66 (q66@moz-AD992F6.range81-152.btcentralplus.com) (Ping timeout)
[11:00:10] *** Joins: kris (kris@moz-147EE6DF.diku.dk)
[11:01:30] *** Quits: khodzha (khodzha@BE81805F.A859D9FD.CA6E2165.IP) (Ping timeout)
[11:04:12] *** Joins: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com)
[11:08:08] *** Parts: jroweboy (jrowe7@moz-18814A6B.provo.static.broadweavenetworks.net) ()
[11:08:53] *** Joins: dsrx_ (tom@8B9E623D.B2983DC1.5670445F.IP)
[11:09:11] *** Quits: dsrx (tom@moz-EEA4C0D9.lsanca.fios.verizon.net) (Quit: WeeChat 0.4.1)
[11:09:32] *** Quits: alonlevy (alon@2CD54432.57968636.E9C721AF.IP) (Ping timeout)
[11:11:41] <huon> heh, with the new `box` operator, we have cargo, crates and boxes
[11:12:09] <yorhel> Is this behaviour intended? http://p.blicky.net/kihgl
[11:12:41] <huon> just need some barrels and pails and we can open a shipping company
[11:13:02] <huon> yorhel: nope, it's a bug that the fix for match hasn't been extend to let
[11:13:16] <huon> (previously even the match would be rejected)
[11:13:21] <Kroisse> and cargo ships will be rusted and drowned...
[11:13:33] <huon> Kroisse: :'(
[11:13:37] <huon> maybe it's not such a good idea
[11:13:47] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[11:13:59] *** Joins: Palmik (palmik@moz-DEC2AB.pks.muni.cz)
[11:14:20] <yorhel> huon: Alright, good to know
[11:14:24] *** Quits: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net) (Quit: killerswan)
[11:14:59] *** Joins: lpy_ (lpy@E44EE2C4.F09091A8.1348A864.IP)
[11:15:22] *** Quits: lpy (lpy@8B40CDAC.F09091A8.1348A864.IP) (Ping timeout)
[11:15:38] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[11:15:44] *** Quits: lpy_ (lpy@E44EE2C4.F09091A8.1348A864.IP) (Client exited)
[11:16:16] *** Joins: lpy (lpy@8B40CDAC.F09091A8.1348A864.IP)
[11:17:52] *** Joins: khodzha (khodzha@4D2BECD3.71D0B9BF.E8ACC090.IP)
[11:19:05] *** Joins: io2 (io2@moz-EE406A5.home.otenet.gr)
[11:19:47] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[11:20:13] *** Quits: gwty (gwtypc@3CAC4C72.A9D442CE.49FF672.IP) (Ping timeout)
[11:21:33] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[11:21:50] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[11:22:08] <kimundi> huon: Make it a ship that ships rust. The longer it operates, the more profit it turns.
[11:22:38] *** Joins: ajaxbee (Mibbit@A54702E.4B947797.97F07BE5.IP)
[11:22:51] <huon> kimundi: we could have a ship that rusts ships too.
[11:23:07] <huon> and then operate them together => infinite profit
[11:23:13] <Tobba> we got the box operator now?
[11:23:25] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[11:23:34] *** Quits: not_gavin (gavin@gavinsharp.com) (Ping timeout)
[11:23:52] *** Joins: not_gavin (gavin@gavinsharp.com)
[11:23:58] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[11:24:04] <huon> kimundi, Kroisse and I will be billionaires with our genius business plan
[11:24:05] *** Quits: mgottschlag (quassel@moz-CD246736.hsi7.kabel-badenwuerttemberg.de) (Ping timeout)
[11:24:18] <huon> rusti: box 1
[11:24:19] -rusti- 1
[11:24:33] <huon> rusti: println!("{:?}", box 1)
[11:24:34] -rusti- ~1
[11:24:34] -rusti- ()
[11:24:48] <huon> it's hard coded to just ~ (and Gc, I think) for now
[11:24:54] <Tobba> ah
[11:25:02] <Tobba> yeah I thought I had missed something for a second
[11:25:41] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[11:27:14] <yorhel> This is somewhat unintuitive: http://p.blicky.net/70rdy - known issue or should I file a bug?
[11:28:29] <ajaxbee> Does anybody know what's going on with transmute casting a slice to a &[T] in this piece of code in vec.rs : let slice = Slice { data: self.ptr as *T, len: self.len }; unsafe { transmute(slice) }
[11:29:21] <huon> ajaxbee: what about it?
[11:30:23] <ajaxbee> I am confused about what the transmute function is doing, can you just cast a struct to a pointer like that, I don't have much experience with rust.
[11:30:24] *** Quits: not_gavin (gavin@gavinsharp.com) (Input/output error)
[11:30:40] *** Joins: not_gavin (gavin@gavinsharp.com)
[11:30:53] <huon> the transmute function is saying "treat the bytes of `slice` as if there were a &[T]"
[11:30:59] *** Joins: gimpf (gimpf@moz-F83BFCD0.adsl.highway.telekom.at)
[11:31:19] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[11:31:22] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[11:31:30] <huon> i.e. it's just reinterpreting the value as a different type
[11:31:43] <kimundi> yorhel: Its how the ownership system works. None is just a possible value of a Option<~T>, which is a moving type, and can not be simply copied that way.
[11:31:45] <huon> and &[T] isn't actually a pointer
[11:32:00] <huon> it's a pointer + a length
[11:32:33] <huon> so that's constructing a new slice by hand out of a pointer and length going via the `Slice` struct (which has the same in-memory representation as &[T])
[11:32:48] <kimundi> yorhel: That said, there is talk about making this work, by identifying things like `None` as copyable constructors, and allowing you to use them for this.
[11:33:30] <ajaxbee> ahh okay, where is it defined in the source? &[T] I mean.
[11:33:41] <kimundi> ajaxbee: Its defined by the compiler.
[11:33:56] <yorhel> kimundi: Alright, makes sense.
[11:34:37] *** Quits: gsathya (gsathya@moz-5068C8E5.gsathya.in) (Ping timeout)
[11:34:51] <yorhel> Good to see I'm not hitting any unknown/unexplored issues yet :)
[11:34:59] *** Joins: gwty (gwtypc@3CAC4C72.A9D442CE.49FF672.IP)
[11:35:18] <huon> ajaxbee: it's define entirely in the compiler, the Slice struct is our way of (semi)safely constructing a &[T] manually
[11:35:21] <huon> *defined
[11:35:31] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[11:35:46] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[11:35:48] <huon> because it will always have the right representation (if the representation changes someone will update the struct definition)
[11:35:49] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[11:36:10] <huon> so that people don't get the ordering wrong, or forget to pass the correct value for one of the fields, etc.
[11:37:16] *** Quits: jviereck (Adium@moz-EFBFEE68.dynamic.hispeed.ch) (Quit: Leaving.)
[11:37:22] <ajaxbee> okay i see, that clears up a lot! I spent so long actually looking for a &[T] type, lots to learn, I can see that now.
[11:37:42] <ajaxbee> huon: thanks
[11:37:57] <ajaxbee> kimundi : thanks
[11:38:10] *** Quits: ajaxbee (Mibbit@A54702E.4B947797.97F07BE5.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[11:40:45] *** Quits: yota (sdouche@moz-7D878FB8.securactive.net) (Ping timeout)
[11:40:54] *** Quits: dsrx_ (tom@8B9E623D.B2983DC1.5670445F.IP) (Quit: ZNC - http://znc.in)
[11:41:56] *** Quits: patpat (patpat@moz-1599AAE4.as13285.net) (Ping timeout)
[11:41:59] *** Joins: yota (sdouche@moz-7D878FB8.securactive.net)
[11:42:05] *** Joins: patpat (patpat@moz-1599AAE4.as13285.net)
[11:42:37] *** Joins: tyoverby (tyoverby@1390DFB8.FBC7597F.11F8506F.IP)
[11:43:05] <tyoverby> How can I get the byte-array out of a MemWriter?
[11:43:38] <tyoverby> I'm trying to call inner() on it, but I'm getting an error that it isn't implemented 
[11:43:46] <huon> .unwrap()
[11:43:46] <huon> iirc
[11:43:53] *** Quits: patpat (patpat@moz-1599AAE4.as13285.net) (Ping timeout)
[11:43:57] *** Joins: patpat (patpat@moz-1599AAE4.as13285.net)
[11:44:02] <huon> oh
[11:44:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[11:44:10] <huon> nope
[11:44:11] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[11:44:17] <huon> http://static.rust-lang.org/doc/master/std/io/struct.MemWriter.html are useless
[11:44:20] <huon> !
[11:44:21] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[11:44:37] <huon> ah, wait, the example has something
[11:44:55] *** Quits: Ms2ger (Ms2ger@moz-CE3CEBEE.access.telenet.be) (Quit: bbl)
[11:45:21] *** Joins: jviereck (Adium@moz-EFBFEE68.dynamic.hispeed.ch)
[11:45:45] *** Quits: patpat (patpat@moz-1599AAE4.as13285.net) (Ping timeout)
[11:45:51] *** Joins: patpat (patpat@moz-1599AAE4.as13285.net)
[11:46:01] <tyoverby> Hmm
[11:46:10] <tyoverby> I really should switch from 0.9 to master shouldn't I
[11:46:26] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[11:46:49] <Tobba> probably
[11:46:51] <kimundi> Is it possible with todays custom syntax extensions to write a attribute you put on a `impl X for Y` item, which expands to an additional `impl Z for Y` item?
[11:46:53] <Tobba> a lot of things are different now
[11:47:24] *** Joins: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se)
[11:47:39] *** Quits: patpat (patpat@moz-1599AAE4.as13285.net) (Ping timeout)
[11:47:44] *** Joins: patpat (patpat@moz-1599AAE4.as13285.net)
[11:48:41] *** Joins: reverend_paco (chatzilla@moz-FDBE15EC.hsd1.ma.comcast.net)
[11:49:27] *** Quits: patpat (patpat@moz-1599AAE4.as13285.net) (Ping timeout)
[11:49:29] *** Joins: avsej (avsej@D9A610B8.4841F515.FB33447D.IP)
[11:49:29] *** Joins: patpat (patpat@moz-1599AAE4.as13285.net)
[11:50:00] *** Joins: Mowah (Mowah@moz-8548F376.cust.bredbandsbolaget.se)
[11:50:25] <Tobba> uh
[11:50:30] <Tobba> whats special about closure_exchange_malloc
[11:50:56] <huon> tyoverby: oh, if you're on 0.9: http://static.rust-lang.org/doc/0.9/std/io/mem/struct.MemWriter.html
[11:51:19] <huon> tyoverby: I think you need to import the `std::io::Decorator` trait
[11:51:19] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[11:52:05] *** Quits: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se) (Quit: mediocrity)
[11:53:27] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[11:53:51] <huon> ( https://github.com/mozilla/rust/issues/13100 it's almost like rustdoc needs tests or something ;P )
[11:54:12] <huon> kimundi: yes, #[deriving] is essentially that
[11:54:24] <huon> (although obvs. with struct/enum items rather than impl ones)
[11:54:34] <huon> Tobba: in what way?
[11:54:48] <kimundi> huon: yeah, deriving is for types, not for impls, so I wasn'T sure.
[11:54:56] <Tobba> what should I implemetn differently from exchange_malloc
[11:55:02] <Tobba> what special magic does it need to do
[11:55:44] <huon> Tobba: look at the implementation in the stdlib
[11:55:50] <kimundi> Tobba: No idea, but maybe the impl in Rusts stdlib will tell you :)
[11:55:56] <Tobba> I looked at them
[11:56:00] <Tobba> I got more questions than answers
[11:56:04] <kimundi> haha
[11:56:18] <Tobba> it does a normal malloc then attaches some boxed "drop glue"
[11:56:46] <huon> Tobba: oh, yeah, that's the destructor for any captured things that need destruction
[11:56:59] *** Joins: nfroidure (nfroidure@moz-C115682E.w90-34.abo.wanadoo.fr)
[11:57:08] <Tobba> ugh
[11:57:12] <Tobba> I think I've got this
[11:57:26] <Tobba> on a completely unrelated matter, is there any set() method for Vec at all
[11:57:31] <Tobba> I can only find grow_set
[11:57:37] <huon> *v.get_mut(0) = 1
[11:57:41] <Tobba> ah
[11:58:08] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[11:58:36] <Tobba> also someone should make range() work for arbitary number types
[11:59:14] <kimundi> huon: Do we have any example of how to write an attribute macro?
[11:59:41] *** Joins: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net)
[11:59:57] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[12:00:07] <kimundi> Tobba: It does work for arbitrary number types afaik?
[12:00:28] <Tobba> only ints
[12:00:39] <Tobba> or, actually
[12:00:47] <Tobba> it could be due to some stupidity with how generic integers work
[12:01:00] <kimundi> rusti: for byte in range(0u8, 5) {  print!("{:?} ", byte );}
[12:01:01] -rusti- 0u8 1u8 2u8 3u8 4u8 ()
[12:01:21] <Tobba> rusti: for i in range(0, 5u8) { print!("{:?}", i) } 
[12:01:22] -rusti- 0u81u82u83u84u8()
[12:01:26] <Tobba> uh, huh
[12:01:42] <Tobba> rusti: let a = 5u8; for i in range(0, a) { print!("{:?}", i) }
[12:01:43] -rusti- 0u81u82u83u84u8()
[12:01:47] <Tobba> I have to coerce this stuff a LOT usually
[12:01:50] <Tobba> what the hell
[12:01:52] *** Quits: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net) (Ping timeout)
[12:01:57] <kimundi> Its true though, that inference doesn'T always manage to completely see through a chain of generic calls.
[12:02:16] <Tobba> it'll sometimes decide that the first 0 is an int
[12:02:19] <Tobba> not sure why
[12:02:25] <Tobba> didnt we all agree that int as a default type is also very dumb
[12:02:33] <kimundi> Tobba: It decides that if it can'T figure out what type it should be
[12:02:40] <kimundi> as a fallback
[12:02:56] <kimundi> I agree with strcat that we just should remove that fallback :)
[12:03:20] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[12:03:37] <Tobba> hm
[12:03:38] *** Quits: jviereck (Adium@moz-EFBFEE68.dynamic.hispeed.ch) (Quit: Leaving.)
[12:03:41] <Tobba> I think I know what the issue is
[12:03:48] <Tobba> I think it tries to resolve it and defaults too early
[12:04:23] *** Joins: LU324 (asdf@moz-864C7465.dyn.embarqhsd.net)
[12:04:29] <Tobba> rusti: fn foo() -> u8 { 5u8 } let a = foo(); for i in range(0, a) { print!("{:?}", a) }
[12:04:30] -rusti- <anon>:10:51: 10:52 warning: unused variable: `i`, #[warn(unused_variable)] on by default
[12:04:30] -rusti- <anon>:10         fn foo() -> u8 { 5u8 } let a = foo(); for i in range(0, a) { print!("{:?}", a) }
[12:04:30] -rusti-                                                             ^
[12:04:30] -rusti- 5u85u85u85u85u8()
[12:04:34] *** Joins: gsathya (gsathya@moz-5068C8E5.gsathya.in)
[12:04:48] <huon> kimundi: deriving?
[12:04:57] <Tobba> rusti: fn foo() -> Option<u8> { Some(5u8) } let a = match foo() { Some(a) => a, None => fail!("bar") }; for i in range(0, a) { print!("{:?} ", a) }
[12:04:59] -rusti- pastebinned 4 lines of output: http://sprunge.us/gQcc
[12:05:01] <Tobba> there we go
[12:05:09] <Tobba> or not
[12:05:10] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[12:05:10] <Tobba> ugh
[12:05:16] <huon> kimundi: (that's the only attribute macro I know of, maybe sfackler has one)
[12:05:18] <Tobba> turns out replicating that is a pain
[12:05:24] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[12:05:25] <kimundi> huon: I though thats still defined in libsyntax?
[12:07:32] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[12:08:03] <huon> kimundi: just do the same thing as a "normal" external syntax extension, but return a ItemDecorator (or ItemModifier) instead of a NormalTT
[12:08:43] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[12:08:50] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[12:08:57] <kimundi> huon: Yeah, I'm already at that part, I just have zero experience with the AST, so I'm kinda lost at every step. :)
[12:09:18] *** Quits: arturo (Thunderbir@moz-E83B14F0.superkabel.de) (Ping timeout)
[12:09:52] *** Joins: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se)
[12:11:03] <kimundi> huon: Okay, the decorator is a fn(&mut ExtCtxt, Span, @ast::MetaItem, @ast::Item, |@ast::Item|), and I have no idea what any of those is for ;)
[12:11:55] <huon> extctxt is the manager of the expansion see it's `impl` blcok in syntax::ext::base for useful things
[12:12:11] <huon> (and the methods of build::AstBuilder)
[12:12:31] <huon> Span is the span of the syntax extension attribute 
[12:12:35] *** Quits: tetsuhar_ (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[12:12:37] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[12:12:42] <huon> MetaItem is the attribute itself
[12:12:59] <huon> (i.e. if you have arguments to your syntax extension you pattern match on that, see syntax::attr for helpers)
[12:13:16] <huon> item is the thing that the attribute is attached to
[12:13:31] <huon> so you'd pattern match on that to get a ItemImpl
[12:13:44] *** Quits: khodzha (khodzha@4D2BECD3.71D0B9BF.E8ACC090.IP) (Ping timeout)
[12:14:17] *** Joins: leowoe (Leo@moz-72D47201.dclient.hispeed.ch)
[12:14:31] <huon> (and if it's not an itemimpl, emit an error: `cx.span_err(span, "#[iterable] should only be used on impls")`)
[12:14:33] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[12:14:44] <huon> (assuming you're doing the iterable thing?)
[12:14:50] <kimundi> Thanks! Very helpful. I also see that the implementations of each deriving thingy uses the same signature as entry point, so I can probably look there for examples too.
[12:14:56] <huon> and the last one is to push the new items onto the ast
[12:14:58] <kimundi> huon: Yeah, doing exactly that.
[12:14:59] <huon> i.e. the ones you create
[12:16:23] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[12:17:32] *** Quits: nlminhtl (ignotus@moz-393BCEC.la.net.ua) (Ping timeout)
[12:19:13] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Ping timeout)
[12:19:55] *** Parts: meyer (meyer@moz-A9CF56E4.hsd1.ca.comcast.net) ()
[12:22:38] *** Joins: WalrusPony (retep998@moz-9F58AA44.bstnma.east.verizon.net)
[12:22:40] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.3)
[12:22:45] *** Quits: reverend_paco (chatzilla@moz-FDBE15EC.hsd1.ma.comcast.net) (Ping timeout)
[12:23:01] *** Quits: WalrusPony1 (retep998@moz-9F58AA44.bstnma.east.verizon.net) (Ping timeout)
[12:24:45] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[12:25:33] *** Joins: doener (doener@moz-C68F600D.unity-media.net)
[12:26:36] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[12:26:36] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[12:27:54] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[12:34:02] *** Joins: james4k (james@moz-9BB5AE72.consolidated.net)
[12:34:13] *** Joins: khodzha (khodzha@BE81805F.A859D9FD.CA6E2165.IP)
[12:35:25] <Tobba> ugh
[12:35:34] <Tobba> I should make a macro to wrap this match thing
[12:35:48] *** Quits: james4k (james@moz-9BB5AE72.consolidated.net) (Ping timeout)
[12:35:57] <Tobba> currently at 42 instances of ", Err(_) => return Err("I/O error") }"
[12:38:32] *** Quits: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[12:40:18] *** Quits: khodzha (khodzha@BE81805F.A859D9FD.CA6E2165.IP) (Ping timeout)
[12:40:49] *** Quits: yota (sdouche@moz-7D878FB8.securactive.net) (Ping timeout)
[12:41:09] *** Joins: pepp (Mibbit@moz-A17B47F9.net.upcbroadband.cz)
[12:41:41] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[12:41:46] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[12:41:48] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[12:43:24] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[12:44:40] *** Quits: dapz (textual@moz-F958911.hsd1.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[12:48:08] *** Joins: khodzha (khodzha@BE81805F.A859D9FD.CA6E2165.IP)
[12:49:26] <Tobba> seems we have context sensitive keywords now thankfully
[12:49:44] <Tobba> although proc isnt context sensitive and I'm writing code for something that referrs to something called "procs" a lot, send help
[12:57:26] <Tobba> why doesnt MemReader take a slice?
[12:58:30] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[12:58:40] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[13:00:14] <eddyb> Tobba: that's BufReader AFAIK
[13:00:23] <Tobba> oh, neat
[13:00:44] *** Quits: sunfish (chatzilla@moz-42DA0C69.dsl.dynamic.sonic.net) (Ping timeout)
[13:00:52] <Tobba> it lives and this worries me
[13:00:59] *** Joins: judder (maradukewa@75FA4DEE.A989D80C.78E362FE.IP)
[13:01:02] *** Joins: mye (mye@moz-E368405.dip0.t-ipconnect.de)
[13:01:13] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[13:01:19] *** Quits: mye (mye@moz-E368405.dip0.t-ipconnect.de) (Quit: So long, and thanks for all the fish!)
[13:01:24] *** Joins: mye (mye@moz-E368405.dip0.t-ipconnect.de)
[13:01:26] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[13:01:47] *** Joins: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP)
[13:01:57] *** Joins: drawoc (drawoc@moz-BAC1D3AB.res-cmts.sesh.ptd.net)
[13:02:40] *** Parts: judder (maradukewa@75FA4DEE.A989D80C.78E362FE.IP) ()
[13:02:46] *** Joins: judder (maradukewa@75FA4DEE.A989D80C.78E362FE.IP)
[13:03:34] *** jorendorff_away is now known as jorendorff
[13:04:01] *** jorendorff is now known as jorendorff_away
[13:06:46] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[13:07:04] *** Joins: Guest (textual@3E0487DF.D8252BC.9532F1CE.IP)
[13:07:15] *** Quits: stephenmac7 (quassel@moz-F2C114C1.hsd1.fl.comcast.net) (Ping timeout)
[13:07:26] *** Joins: stephenmac7 (quassel@moz-F2C114C1.hsd1.fl.comcast.net)
[13:07:40] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[13:08:06] *** Quits: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP) (Quit: This computer has gone to sleep)
[13:08:14] *** Joins: dsrx (tom@8B9E623D.B2983DC1.5670445F.IP)
[13:08:28] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[13:09:34] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[13:09:55] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[13:10:04] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[13:11:40] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[13:11:46] *** Joins: q66 (q66@moz-AD992F6.range81-152.btcentralplus.com)
[13:12:14] *** Parts: kvanb (kvanb@moz-B34A43F2.lnse7.win.bigpond.net.au) ()
[13:12:38] *** Joins: edwardw (Mibbit@CEDA2251.A25DFE4.D39A8B3F.IP)
[13:13:19] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[13:14:36] *** Joins: lowry (Mibbit@E116A398.7EA8D355.64C81A5A.IP)
[13:15:10] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[13:15:16] *** Parts: lowry (Mibbit@E116A398.7EA8D355.64C81A5A.IP) ()
[13:16:25] <doomlord_> r.e. int coersions: is int in rust defined as the same size as the pointer - is it safe to assume any other :Int type can be cast to it without losing information, unsigned->signed *would* lose a bit - but wrapround arithmetic would mean it makes no difference 
[13:16:55] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[13:17:06] <doomlord_> i was wondering if i need to put a compile-time that an argument casting to int for pointer-offseting will be safe.
[13:17:58] <eddyb> doomlord_: Int the trait?
[13:18:04] <doomlord_> yes; 
[13:18:08] <eddyb> doomlord_: that's all integers
[13:18:17] <eddyb> like u8
[13:18:23] <eddyb> and i16
[13:18:29] <doomlord_> calmed down after yesterday and i'm trying to build some abstractions so its more pleasant in future
[13:18:46] <eddyb> I know that feel
[13:18:53] <doomlord_> right - so one thing my helper does is, co-erces  i16's whatever upward
[13:19:03] <eddyb> oh then it could be fine
[13:19:17] <eddyb> keep in mind that u64 can be bigger than uint
[13:19:29] <doomlord_> my_byte_ofs_ref::<ResultType>(base_object,   offset /* this could be i16 .. */)
[13:19:44] <doomlord_> ok thats the hazard
[13:20:06] <doomlord_> (and yes I've worked on machiens with 64bit word size, 32bit adress space)
[13:20:08] <eddyb> doomlord_: you can have an assert or something like that
[13:20:28] <eddyb> doomlord_: that will get eliminated for most types
[13:21:09] <doomlord_> assert!( size_of::<InputInt>() <= size_of::<int>()) i guess
[13:22:21] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[13:22:28] <eddyb> doomlord_: oh yeah
[13:22:58] <doomlord_> unsafe fn byte_ofs_ref<'a,X,Y,I:Int=int>(base:&'a X, ofs:I)->&'a Y {	&*( (base as *_ as *u8).offset( ofs.to_int().unwrap() ) as *Y) }
[13:22:59] <eddyb> doomlord_: you can use a different trait on 32-bit-pointer architectures or something like that, if you want to enforce it in the type system
[13:23:17] <doomlord_> ^^ i coudl make that 'safe' but that seems kind of wrong,
[13:23:28] <eddyb> yeah, it's unsafe
[13:23:35] <doomlord_> (unsafe block inside it ..)  any code calling that is going to be hazardous
[13:23:52] <eddyb> it's safe only in the context where you know the types and offsets are sane
[13:24:03] <doomlord_> What could make it 'safer' is passing a pointer to an enclosing blob - then it could assert (in debug builds) that the result is within the blob
[13:24:08] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[13:24:13] <eddyb> that is, the offset + sizeof Y doesn't go past the end of the buffer
[13:24:31] <eddyb> and X/Y are byte-observable data
[13:24:47] <eddyb> no smart pointers, not even tagged enums
[13:25:07] <eddyb> we don't have that meaning of "POD" encoded in the type system, though that would be cool
[13:25:22] <doomlord_> i could also make a straightforward safe relative pointer: which can only be created by assignment from real pointers - that would be much more theoretically safe
[13:25:31] <eddyb> doomlord_: basically anything that can be *exploited* to produce unsafety should be marked as unsafe
[13:25:34] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[13:25:42] <doomlord_> it could fail on creation if it can't hold the result - the check on creation is fine
[13:25:59] <doomlord_> ok : this is data coming in , so that's a potential 'exploit' for sur
[13:26:14] <doomlord_> ... unless there is verification running on data that comes in..
[13:26:40] <doomlord_> macros could roll verification code
[13:27:15] <doomlord_> (i guess at that point you might as well have built it)
[13:27:18] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[13:27:32] *** Quits: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se) (Quit: mediocrity)
[13:28:17] *** Quits: Guest (textual@3E0487DF.D8252BC.9532F1CE.IP) (Ping timeout)
[13:29:39] *** Quits: edwardw (Mibbit@CEDA2251.A25DFE4.D39A8B3F.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[13:29:44] <doomlord_> consoles are different to a browser... they're a curated channel
[13:30:01] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[13:31:47] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[13:31:53] *** Joins: jviereck (Adium@moz-EFBFEE68.dynamic.hispeed.ch)
[13:32:06] *** Joins: goku12 (gokuldas@4D9EAA49.7233474D.6AA50C35.IP)
[13:33:41] <doomlord_> https://gist.github.com/dobkeratops/9716302 <<< next a  naming question :)  so impl'd added a trait method "void_ptr()" for Vec, returnbing the vec's contents as a voidptr .. so you can pass directly to gl functions.  I seemed able to impl that for &T aswell, asn was ble to use it - however i'm a bit iffy about places where you might have a &Vec<T> and it would become ambiguous between getting the vec contents or a void* of th
[13:33:41] <doomlord_> e vec header .. that sort of thing was going wrong for me with &self's .. (the type system didn't save me from using the type system wrongly :) .. i was needing to write debug code to print adresses out for sanity to find that)    
[13:34:57] <doomlord_> i think i really want a different function, "void_ref" or something...      "myvec.get_element_as_void_ptr(0)"
[13:36:28] <doomlord_> if you dont have a helper.. its a messy double cast.    flSomething( ...   myvec.get(0) as _* as *c_void)
[13:36:46] <eddyb> we had an as_void_ptr()
[13:36:51] *** Joins: alonlevy (alon@moz-B7197631.red.bezeqint.net)
[13:36:53] <eddyb> actually part of Any
[13:37:02] <doomlord_> heh as i suspected - a lot of argument over what should and shouldn't be standard
[13:37:16] <eddyb> was removed because we don't need it to go through the vtable anymore
[13:37:43] <eddyb> i.e. Any only needs to expose a method (or preferably, an associated constant) for grabbing the TypeId
[13:37:55] <doomlord_> ok different reason 
[13:38:48] *** Quits: gwty (gwtypc@3CAC4C72.A9D442CE.49FF672.IP) (Ping timeout)
[13:39:37] <doomlord_> perhaps ".get_void_ptr(index)" is clear enough as being an operatioin within a collection , vs ".as_void_ptr" or ".to_void_ptr"
[13:40:11] <eddyb> as_void_ptr is the "correct" naming
[13:40:46] <Tobba> hm
[13:41:01] <Tobba> writing disassemblers is weird
[13:41:04] <doomlord_> would myvec.as_void_ptr() be the same as     myvec.get(0) as *_ as *c_void .. is that symetrical with other uses (CString, string..)
[13:41:55] *** Joins: edwardw (edwardw@861842BE.B4F65FC7.A0A36CCE.IP)
[13:42:04] <doomlord_> i should look into slices from voids aswell - i'm guessing constructing a slice within one of these 'blob' structures would be valid (and later work with indexing operator..)
[13:42:08] <eddyb> doomlord_: well, we have as_ptr()
[13:42:15] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[13:42:30] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[13:43:35] <eddyb> doomlord_: hmpf
[13:44:01] <doomlord_> ok any suggestions about  my doubt about myvec[i].as_void_ptr()      vs     x:&T.. x.as_void_ptr() << that definitely seems error prone to me 
[13:44:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[13:44:17] *** Joins: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP)
[13:44:28] <doomlord_> (because i might have a &Vec and i really meant the vec)
[13:44:39] <eddyb> heh yeah
[13:44:56] <eddyb> doomlord_: if you implement a kind-like trait for the alternate version of "POD" and deal with bytes instead of *c_void, wouldn't that solve a few issues?
[13:45:09] <doomlord_> thats why i thought i should make .get_void_ptr()   which is explicitely for vecs 
[13:45:34] <doomlord_> ^ and roll in indexing aswell, and just write .get_void_ptr(0) for the first element
[13:45:45] *** Joins: tigrou3tac (fabien@moz-6E2397FF.fbx.proxad.net)
[13:45:46] <huon> doomlord_: vecs already have .as_ptr() and .as_mut_ptr()
[13:46:02] <eddyb> i.e. write an abstraction allowing safe byte-based reinterpretation
[13:46:22] <eddyb> and then take byte pointers/slices in the FFI
[13:46:26] <doomlord_> It was definitely a question in my mind, when to return void* and when to return bytes...
[13:46:28] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[13:46:43] <doomlord_> ... the draw to void* is C library functions wanting it
[13:47:09] <eddyb> &[Vec3f] -> &[u8] for example is a safe operation
[13:47:24] <eddyb> and you can even have the FFI interface generic over something that can be viewed as bytes
[13:47:30] <doomlord_> getting a new slce with the size appropriate
[13:48:10] <doomlord_> hmm. maybe there's a macro solution to wrapping GL functions
[13:48:12] <huon> eddyb: &Anything -> &[u8] is safe
[13:48:27] <eddyb> mmmaybe
[13:48:31] <huon> (assuming C aliasing rules)
[13:48:38] <eddyb> the reverse isn't true, for sure
[13:48:42] <huon> the unsafe part is &[u8] -> &T
[13:48:50] <huon> and it's not even safe for T: Pod
[13:48:51] <eddyb> I should've used <-> :D
[13:49:02] <eddyb> huon: yeah we need a different kind of POD here
[13:49:02] <huon> (e.g. `&U` is Pod)
[13:49:10] <eddyb> not Copy-able
[13:49:29] <doomlord_> thinking out loud..    wrapped_ffi!(   glDrawElements(GLenum, GLsizei, GLenum, *c_void) ) << but stuff more information in the parameters, add safe Int coersions as generics ...
[13:49:29] *** Quits: LRN (LRN@moz-EA80C63C.nationalcablenetworks.ru) (Connection reset by peer)
[13:50:06] *** Joins: LRN (LRN@moz-EA80C63C.nationalcablenetworks.ru)
[13:50:12] *** Joins: canhtak (canhtak@moz-1300C4D7.wl.t.ulaval.ca)
[13:50:31] <doomlord_> roll that as   glDrawElements<T0,T1,T2,T3>(.. ) with some appropriate coercions implied.... eg the GLsizei being an int.. the *c_void accepting any array..
[13:51:00] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[13:51:46] *** Quits: goku12 (gokuldas@4D9EAA49.7233474D.6AA50C35.IP) (Quit: Konversation terminated!)
[13:53:02] <doomlord_> ok so it seems ".to_void_ptr" is the correct naming, for current '.void_ptr' , but i have another reason to suggest .get_void_ptr(index)  as another version of .get_ref(index): it'll make it clearer i mean the data and not the &Vec
[13:53:10] <doomlord_> ^as_ sorry
[13:53:24] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[13:53:46] *** Quits: q66 (q66@moz-AD992F6.range81-152.btcentralplus.com) (Ping timeout)
[13:55:41] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[13:56:04] *** Quits: aurynj (Eon@53E88241.65896F99.364694FC.IP) (Quit: Leaving)
[13:56:19] *** Joins: zucchini (Mibbit@12C726B0.7B2B7DF7.53840FFD.IP)
[13:56:30] <zucchini> hello
[13:56:47] *** Quits: zucchini (Mibbit@12C726B0.7B2B7DF7.53840FFD.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[13:57:02] *** Quits: edwardw (edwardw@861842BE.B4F65FC7.A0A36CCE.IP) (Quit: Leaving...)
[13:57:25] <doomlord_> perhaps i just want a different name for a wrapper to turn &T into *c_void , and stick with 'as_void_ptr' for synetry with as_ptr
[13:57:34] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[13:57:52] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[13:58:16] *** Joins: doskey (Mibbit@E38B7AAE.31799CCB.77BEDD39.IP)
[13:59:50] *** Joins: edwardw (edwardw@4299445D.BF90DB87.492F1EB9.IP)
[14:00:52] *** Quits: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP) (Quit: This computer has gone to sleep)
[14:01:28] *** Joins: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net)
[14:01:41] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[14:02:53] *** Joins: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP)
[14:03:24] *** Quits: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net) (Ping timeout)
[14:06:36] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[14:08:50] *** Joins: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[14:10:37] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[14:12:23] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[14:12:59] *** Parts: judder (maradukewa@75FA4DEE.A989D80C.78E362FE.IP) ()
[14:13:08] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[14:15:05] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[14:15:54] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[14:17:35] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[14:18:32] *** Joins: hjr3 (hradtke@moz-699EABC0.lsanca.fios.verizon.net)
[14:19:09] *** Joins: Ms2ger (Ms2ger@6BCD8197.DF5CCC78.F15B0BB3.IP)
[14:20:18] <Ms2ger> Looks like someone broke Url-keyed hashtables
[14:21:12] *** Joins: q66 (q66@moz-6F2D224B.range109-157.btcentralplus.com)
[14:21:26] <Ms2ger> Probably https://github.com/mozilla/rust/pull/13088
[14:21:41] <eddyb> Ms2ger: the hash is not equivalent to the hash of the result of to_str?
[14:21:59] <eddyb> Ms2ger: ah, Url doesn't implement TotalEq?
[14:22:02] <Ms2ger> Indeed
[14:22:06] <eddyb> that's a one-line fix
[14:22:12] <Ms2ger> Two, I think
[14:22:29] <Ms2ger> Sounds like I should become a rust contributor :)
[14:23:43] * Ms2ger looks for a way to not compile everything everywhere
[14:24:17] *** Quits: jviereck (Adium@moz-EFBFEE68.dynamic.hispeed.ch) (Ping timeout)
[14:24:34] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[14:24:42] <SiegeLord> Heh... somebody made a significant whitespace syntax for Go, and everybody got so mad. I wonder what'll happen when someone introduces a significant whitespace Rust variant
[14:24:56] <eddyb> Ms2ger: liburl is not built for stage1, is it?
[14:25:06] <Ms2ger> Dunno?
[14:25:17] <eddyb> SiegeLord: I have a project name taken for that, but no time for it :P
[14:25:20] <Ms2ger> SiegeLord, I'd love it :)
[14:25:25] <eddyb> snake-oil
[14:25:36] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[14:25:49] <eddyb> huon: I have two new ideas: one is like coverage or callgrind, but for types (which we know for both stack and heap!!!) - so you can tell that the weak refcount on Rc or the refcount in RefCell are being written a lot during a phase of the compiler, for example
[14:25:56] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[14:26:07] <SiegeLord> I had an idea for a rustfmt fork I'll make when it's made... ringfmt ;)
[14:26:12] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[14:26:37] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[14:26:39] <eddyb> Tobba: the other idea... I know how to make weak lang items (or weak library cooperation in general) work without LTO bloat :D
[14:26:50] <Tobba> :D
[14:26:57] <SiegeLord> (I presume rustfmt won't allow configurable destination syntax, like gofmt doesn't, so ringfmt would capture the essence of rust-is-not-go and provide configuration)
[14:27:34] *** Joins: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch)
[14:27:55] *** Joins: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net)
[14:27:56] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[14:27:57] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[14:28:01] <eddyb> Tobba: build pre-LTO'd versions of crates you need, in combination with the libraries you pick
[14:28:42] <eddyb> Tobba: so, like, if we were to have optionally baken in runtime, you could end up with std-green-jemalloc as a combination of three crates, std, green and jemalloc
[14:28:44] <eddyb> Tobba: it wouldn'
[14:28:49] <eddyb> dammit, enter key
[14:29:22] <Tobba> hm
[14:29:28] <eddyb> Tobba: it wouldn't export symbols from the latter two, just inline the needed functions/constants into the library
[14:29:55] <eddyb> this way, stage1 librustc can still link dynamically against those libraries
[14:30:49] <eddyb> and provide equivalent performance as today, without LTO
[14:30:56] <eddyb> I mean, it won't be worse
[14:31:22] <Tobba> that would be good
[14:31:43] <eddyb> Tobba: build times for generic libraries would double *unless* you build the combined version directly
[14:32:00] <eddyb> but building a binary, for example, shouldn't take longer than it does today, and it shouldn't be worse
[14:32:22] <Tobba> I wonder if we could completely dissolve libstd for 1.0
[14:32:47] <eddyb> Tobba: I was actually considering weak library interop before you started caring about weak lang items
[14:33:09] <eddyb> Tobba: in the context of the task runtime, which is pluggable right now
[14:33:18] <Tobba> yeah
[14:33:18] <eddyb> (and holds around massive amounts of code, as a result)
[14:33:44] <eddyb> what I thought was a static trait object for the operations
[14:34:12] <eddyb> the value of that static in libstd would be an implementation that does something similar to what we do today
[14:34:26] <eddyb> dynamic dispatch and whatnot
[14:34:47] <Ms2ger> r? https://github.com/mozilla/rust/pull/13103
[14:35:26] *** Joins: guest2222 (guest2222@moz-1D2D613F.ga.at.cox.net)
[14:36:15] <eddyb> Tobba: then, if you linked in *only one* runtime-providing crate, and did LTO, that static would be resolved, and there would be no dynamic behavior
[14:36:28] <Ms2ger> (Who do I badger for that?)
[14:36:28] *** Quits: IanCormac84 (User@43DBEFFC.2A8D8854.67DFF8B4.IP) (Connection reset by peer)
[14:36:29] <olle> When my code des not compile, and it complains 'use of undeclared type name Vec', it needs to explicityly import std::vec?
[14:36:37] <Tobba> eddyb: that would be excellent
[14:36:50] <eddyb> Ms2ger: strcat isn't here, maybe huon
[14:37:01] <Ms2ger> Hi huon!
[14:37:02] <eddyb> olle: use std::vec::Vec;
[14:37:05] <guest2222> Is Rust's library going to be amenable to embedded systems applications?
[14:37:06] <Tobba> olle: Vec was added to the prelude recently, but yeah
[14:37:08] *** Quits: copumpkin (copumpkin@B1BD1E0F.D360D990.9850EA4D.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[14:37:13] <Tobba> you should update though
[14:37:31] <eddyb> Tobba: heck, as a result, all the opaque IO interfaces would be devirtualized, as the constructor would be constant
[14:38:04] <eddyb> Tobba: so, with libnative (which will be the default soon - if it already isn't), you suddenly drop one level of abstraction
[14:38:18] <Tobba> its default
[14:38:19] *** Joins: IanCormac84 (User@F7CE68A0.64D641E5.67DFF8B4.IP)
[14:38:19] <eddyb> Tobba: all we need is LTO against libc and you suddenly output syscalls
[14:38:19] <olle> Tobba: So, a full "make" would save me from embarrassment again?
[14:38:43] <eddyb> olle: any reason why you can't use nightlies?
[14:38:57] <Tobba> theres the cholcatey nightly but its hardly a nightly
[14:39:06] <Tobba> its more like a whenever-the-heck-it-wantsly
[14:39:37] <eddyb> Tobba: but that's on windows
[14:39:50] *** Quits: edwardw (edwardw@4299445D.BF90DB87.492F1EB9.IP) (Quit: Leaving...)
[14:39:55] *** Joins: Guest_ (textual@3E0487DF.D8252BC.9532F1CE.IP)
[14:39:56] <Tobba> oh yeah
[14:39:59] <Tobba> I'm not sure about linux nightlies
[14:40:01] <eddyb> Tobba: anyways, previously I thought this requires LTO
[14:40:10] <eddyb> Tobba: and I don't think I had a good solution for it
[14:40:28] <olle> eddyb: I'm repairing code in terminfo module, in prep of a PR with docs. https://github.com/mozilla/rust/pull/12948/files I recompile one last time to see things not break, so I took a deeper dive. configure/make/install'ing a new Rust to run the documentation generation again.
[14:40:31] <eddyb> std-green-jemalloc sounds so good, I want it
[14:40:56] <Tobba> heh
[14:40:56] <olle> eddyb: "Repairing code", as in keeping a PR up-to-date
[14:40:58] *** Joins: copumpkin (copumpkin@B1BD1E0F.D360D990.9850EA4D.IP)
[14:41:07] <olle> eddyb: 7 days are a long time to let a PR rot in Rust.
[14:41:40] <eddyb> Tobba: and now I have to read that as "standard green jelly"
[14:41:48] <Tobba> ahahahah
[14:41:55] <eddyb> olle: ah you're working on Rust, fair enough
[14:42:18] <Tobba> eddyb: although wait, getting inlining across modules without LTO?
[14:42:26] <Tobba> or did you mean that with LTO
[14:42:36] <eddyb> Tobba: specialization without LTO
[14:42:40] <Ms2ger>                 let font_metrics = font.with(|font| {
[14:42:40] <Ms2ger>                     font.metrics.clone()
[14:42:40] <Ms2ger>                 });
[14:42:44] <Ms2ger> What do I replace that with?
[14:42:53] <Ms2ger> (That with with?)
[14:42:58] <eddyb> Ms2ger: font.metrics.clone()
[14:43:04] <Ms2ger> Nope
[14:43:09] <eddyb> Ms2ger: or font.borrow().metrics.clone()
[14:43:10] <Ms2ger> error: attempted access of field `metrics` on type `std::rc::Rc<std::cell::RefCell<font::Font>>`, but no field with that name was found
[14:43:39] <Tobba> eddyb: although, I'd prefer if the non-LTO method if linking was killed in general
[14:43:51] <Ms2ger> Okay, borrow() is better
[14:43:54] <Tobba> having to link to precompiled binaries causes a few problems
[14:44:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[14:44:16] <Tobba> if the bitcode output contained the bytecode of every crate you had imported that would be amazing
[14:44:32] <Tobba> s/bytecode/bitcode
[14:44:48] <eddyb> that's LTO
[14:44:54] *** Quits: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP) (Quit: This computer has gone to sleep)
[14:44:59] <Tobba> pretty much
[14:45:12] <eddyb> but the actual optimization part of it takes looong :(
[14:45:14] <Tobba> afaik bitcode output with LTO doesnt contain the crates you imported
[14:45:31] <eddyb> Tobba: it might not duplicate things it didn't use to optimize
[14:45:46] <eddyb> Tobba: otherwise you'd need mergefunc to clean it up
[14:45:49] <Tobba> it gets soooo awful if you're using your own LLVM
[14:46:04] <Tobba> need to have a list of crates its importing, find those, rip the bc out of them, inflate it, then link up the bitcode
[14:46:28] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[14:46:37] *** Quits: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net) (Ping timeout)
[14:49:20] *** Joins: nszceta (nszceta@moz-E6CA8D6.hsd1.pa.comcast.net)
[14:50:31] *** Quits: nszceta (nszceta@moz-E6CA8D6.hsd1.pa.comcast.net) (No route to host)
[14:51:04] *** Joins: nszceta (nszceta@moz-E6CA8D6.hsd1.pa.comcast.net)
[14:51:58] *** Joins: maxli (Adium@moz-B19F68ED.student.cs.uwaterloo.ca)
[14:54:28] *** Joins: nstdloop (nstdloop@moz-65256C41.hsd1.fl.comcast.net)
[14:54:30] <pepp> hello, do enums implement std::cmp::Eq
[14:54:34] *** Quits: copumpkin (copumpkin@B1BD1E0F.D360D990.9850EA4D.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[14:55:01] <pepp> ...?
[14:55:26] <Tobba> not by default
[14:55:35] <Tobba> #[deriving(Eq)]
[14:55:40] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[14:55:44] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[14:55:58] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[14:56:56] <eddyb> Tobba: feel free to drop that "specialization" idea into a RFC if you write it
[14:57:10] <Tobba> yeah
[14:57:19] <Tobba> someone else had it on their list of RFCs to write
[14:57:27] <Tobba> I think I should write one after I get this stupid disassembler to work
[14:57:36] <Tobba> did I ever mention this peice of shit has context sensitive instructions
[14:57:45] <eddyb> haha what is that?
[14:58:17] <Ms2ger> Y'all sure know how to keep me busy
[14:58:23] <Tobba> the base selector of a value reference in an opcode is dependant on the previously executed value reference that was decoded
[14:58:25] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[14:58:39] <Tobba> uh that last bit came out wrong
[14:58:54] *** Quits: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net) (Input/output error)
[15:00:01] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[15:00:08] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[15:01:13] <Tobba> oh and this thing has probably around 300 opcodes
[15:01:46] <eddyb> Tobba: but what is it? a VM of sorts?
[15:01:53] <Tobba> yeah
[15:01:55] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[15:02:05] <Tobba> its the bytecode this horrible language compiles into
[15:02:24] *** Quits: q66 (q66@moz-6F2D224B.range109-157.btcentralplus.com) (Ping timeout)
[15:02:24] <Tobba> fun fact: the del instruction has to go through every value in the game to verify theres no leftover references to an object
[15:02:28] <Tobba> aka "what are weak references"
[15:02:46] *** Joins: yota (sdouche@moz-7D878FB8.securactive.net)
[15:02:47] <Tobba> this of course breaks constantly and then the entire thing crashes in nonsensical ways
[15:03:23] <eddyb> Tobba: wish I had r3 in a good enough shape to "disassemble" that bytecode into more than just a sequence of instructions
[15:03:32] <Tobba> heh
[15:03:51] <Tobba> my idea is to "decompile" it back into some made up intermediate format
[15:03:55] <eddyb> wiREd had pretty good control flow code in it, I mean, it was more readable than HexRays at times
[15:03:55] *** Quits: yota (sdouche@moz-7D878FB8.securactive.net) (Quit: Ex-Chat)
[15:04:02] <Tobba> which contains an AST, the decompiler does no optimization at all
[15:04:10] <eddyb> aha
[15:04:36] <Tobba> except for constant folding which didnt even work properly like until last year
[15:04:59] <eddyb> Tobba: if there's non-confidential information about it on the web, I could do with a bookmark ;)
[15:05:28] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[15:05:32] *** Joins: gregburd (uid3997@moz-E77DEB21.irccloud.com)
[15:05:41] <Tobba> its of course non-confidential, its just one of those things that no programmer would poke with a 10 foot pole
[15:09:46] *** Quits: Guest_ (textual@3E0487DF.D8252BC.9532F1CE.IP) (Ping timeout)
[15:11:11] *** Joins: kngl1 (Adium@40AE2BF6.ABCDAFD6.7C797F8E.IP)
[15:11:11] *** Quits: kngl (Adium@40AE2BF6.ABCDAFD6.7C797F8E.IP) (Connection reset by peer)
[15:11:25] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[15:11:49] *** Joins: arturo (Thunderbir@moz-E83B14F0.superkabel.de)
[15:13:10] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[15:13:32] *** Quits: rootnode (rootnode@moz-F28659C4.pools.arcor-ip.net) (Ping timeout)
[15:14:11] <Tobba> eddyb: it's not work-related though, I just dont like saying I actually willingly spent time reverse engineering this
[15:14:16] *** Joins: pyrac (pyrac@moz-EBBD1EA7.w86-201.abo.wanadoo.fr)
[15:14:22] *** Joins: lpy_ (lpy@E44EE2C4.F09091A8.1348A864.IP)
[15:15:12] <eddyb> Tobba: haha
[15:15:12] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[15:15:21] <eddyb> Tobba: I wasted several months on a GPS app
[15:15:23] *** Quits: lpy (lpy@8B40CDAC.F09091A8.1348A864.IP) (Ping timeout)
[15:15:24] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[15:15:33] <eddyb> Tobba: and got pretty nice things out of it
[15:16:03] *** Quits: pyrac (pyrac@moz-EBBD1EA7.w86-201.abo.wanadoo.fr) (Quit: pyrac)
[15:16:16] *** Quits: lpy_ (lpy@E44EE2C4.F09091A8.1348A864.IP) (Ping timeout)
[15:16:18] <eddyb> like, I think I got to the point where I can load the completely obscure map files and display 3D structures on top of something like google maps
[15:16:21] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[15:16:23] *** Quits: skade (skade@moz-1EC0F118.pools.arcor-ip.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[15:16:26] <eddyb> Tobba: but IDA is sooo bad
[15:16:37] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[15:17:19] <Tobba> eddyb: the whole thing is basicaly "hey you wanna make something that looks like a NES game, runs like ass and takes an i7 to run" and then someone made an actually decent game ontop of it involving 300k lines of code
[15:18:08] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:18:25] <Tobba> eddyb: also IDA isnt that bad with the decompiler, even though that thing is slooow and the results are shit
[15:18:25] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[15:18:39] <Tobba> its still a thusand times better than browsing the disam 
[15:19:37] <SiegeLord> Do we have [] delimited macros yet?
[15:20:04] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[15:21:22] *** Joins: rootnode (rootnode@moz-83F76E1A.pools.arcor-ip.net)
[15:22:28] *** Quits: pczarn (pczarn@moz-69A55FA.izacom.pl) (Input/output error)
[15:22:36] *** Joins: Guest_ (textual@3E0487DF.D8252BC.9532F1CE.IP)
[15:23:08] *** Joins: jensnock_ (jensnocker@moz-33279404.customers.ownit.se)
[15:23:24] <SiegeLord> And what's the rule for the () vs {}?
[15:23:46] *** Joins: skade (skade@moz-1EC0F118.pools.arcor-ip.net)
[15:24:23] *** Quits: Guest_ (textual@3E0487DF.D8252BC.9532F1CE.IP) (Ping timeout)
[15:24:52] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[15:24:54] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[15:25:02] *** Quits: jensnock_ (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[15:25:35] <eddyb> SiegeLord: there's a PR open for []
[15:26:54] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[15:27:05] <SiegeLord> Why are there so many PRs ._.
[15:28:32] *** Joins: aurynj (Eon@C498BDEC.C264657C.C6282BC4.IP)
[15:28:40] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[15:32:17] <SiegeLord> I wonder if it's likely to be merged
[15:33:14] <SiegeLord> I guess people are gearing up for 0.10 and neglecting the PRs a bit?
[15:33:31] <SiegeLord> Or is this fallout from the office move?
[15:34:25] <eddyb> SiegeLord: some of it is (fallout)
[15:36:40] *** Quits: skade (skade@moz-1EC0F118.pools.arcor-ip.net) (Client exited)
[15:36:52] *** Joins: skade (skade@moz-1EC0F118.pools.arcor-ip.net)
[15:38:29] *** Quits: canhtak (canhtak@moz-1300C4D7.wl.t.ulaval.ca) (Quit: canhtak)
[15:39:10] *** Quits: nszceta (nszceta@moz-E6CA8D6.hsd1.pa.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[15:39:42] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:41:09] *** Joins: reverend_paco (chatzilla@moz-FDBE15EC.hsd1.ma.comcast.net)
[15:41:41] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[15:42:09] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Input/output error)
[15:42:43] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[15:42:49] *** Joins: jmgrosen (user@moz-848F6087.sb.sd.cox.net)
[15:43:35] *** Joins: edwardw (edwardw@D286B842.1B2F6624.7F41E82D.IP)
[15:44:28] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Ping timeout)
[15:44:31] *** Quits: dcrewi (david@moz-AB8667CE.gyrae.net) (Ping timeout)
[15:44:39] *** Quits: jmgrosen (user@moz-848F6087.sb.sd.cox.net) (Ping timeout)
[15:44:44] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:44:45] <Boreeas> Is there a way to tell configure where to look for files? I have both Python 2.7 and Python 3.2 installed and configure fails because it tries to use the 3.2 version
[15:46:13] *** Joins: vfetwnuncszu (david@moz-AB8667CE.gyrae.net)
[15:46:28] *** vfetwnuncszu is now known as dcrewi
[15:46:33] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[15:46:38] *** Joins: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca)
[15:47:31] *** Quits: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net) (Input/output error)
[15:48:21] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[15:49:50] *** Joins: khodzha1 (khodzha@9C64BDF9.3E410295.CA6E2165.IP)
[15:50:13] *** Quits: khodzha (khodzha@BE81805F.A859D9FD.CA6E2165.IP) (Ping timeout)
[15:51:46] *** Joins: lpy (lpy@1834E2CB.F09091A8.1348A864.IP)
[15:56:56] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[15:58:43] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[16:00:56] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[16:01:48] *** Quits: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch) (Ping timeout)
[16:03:07] *** Joins: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch)
[16:03:24] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[16:03:33] *** Quits: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch) (Max SendQ exceeded)
[16:03:41] *** Joins: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch)
[16:03:42] *** Quits: ChrisOei (ChrisOei@moz-30D80888.hsd1.ca.comcast.net) (Client exited)
[16:04:27] *** Quits: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch) (Max SendQ exceeded)
[16:04:50] *** Joins: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch)
[16:06:41] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[16:07:56] *** Joins: pongad (pongad@moz-7E8AAD2E.res.gatech.edu)
[16:08:29] *** Joins: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net)
[16:10:04] *** Joins: james4k (james@moz-9BB5AE72.consolidated.net)
[16:10:14] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[16:11:22] *** Quits: hjr3 (hradtke@moz-699EABC0.lsanca.fios.verizon.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[16:11:48] *** Quits: james4k (james@moz-9BB5AE72.consolidated.net) (Ping timeout)
[16:12:03] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[16:14:28] *** Joins: Rym (y@7E883303.78CA6893.8772DA20.IP)
[16:16:31] <Boreeas> Ah, figured it out. Having both in the path apparently causes configure to use the 3.2 version
[16:16:49] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[16:17:36] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[16:18:11] *** Joins: canhtak (canhtak@moz-1300C4D7.wl.t.ulaval.ca)
[16:18:48] *** Joins: Guest_ (textual@3E0487DF.D8252BC.9532F1CE.IP)
[16:19:17] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[16:19:27] *** Joins: samx (sami@moz-D9F3E0AE.pp.htv.fi)
[16:20:07] *** Quits: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch) (Quit: Leaving.)
[16:20:38] <paraze> Hey guys, I need some help. I want to put in my structure Game a vector of int (actually, it's more a slice I think), with_capacity(4). But I get a lot of errors : cannot move out of dereference of `&`-pointer/`&mut`-pointer. Here is the current code, the code which compiles : https://github.com/paraze/2048-rs (src/game.rs). And... the wrong code : http://paste.awesom.eu/gSd2
[16:21:00] <Ms2ger> error: cannot borrow immutable anonymous field `damage#0` as mutable
[16:21:34] *** Quits: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net) (Input/output error)
[16:21:41] *** Joins: nszceta (nszceta@moz-E6CA8D6.hsd1.pa.comcast.net)
[16:21:59] *** Joins: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net)
[16:22:25] *** Quits: lpy (lpy@1834E2CB.F09091A8.1348A864.IP) (Ping timeout)
[16:22:26] *** Joins: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch)
[16:23:11] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[16:23:50] *** Quits: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net) (Ping timeout)
[16:25:03] *** Quits: Guest_ (textual@3E0487DF.D8252BC.9532F1CE.IP) (Ping timeout)
[16:25:03] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[16:25:39] *** Joins: Guest_ (textual@3E0487DF.D8252BC.9532F1CE.IP)
[16:28:03] <pongad> paraze: Where's the error?
[16:28:59] <eddyb> Ms2ger: do you have DerefMut around?
[16:29:03] <paraze> With the wrong code : http://paste.awesom.eu/gSd2 (multiples cannot move out of dereference of `&`-pointer)
[16:29:10] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[16:29:18] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[16:29:30] <Ms2ger> I have no idea what I'm doing...
[16:30:40] *** Quits: Guest_ (textual@3E0487DF.D8252BC.9532F1CE.IP) (Ping timeout)
[16:30:44] <pongad> paraze: I am not quite sure what the code is trying to do...:D
[16:30:50] *** Joins: lpy (lpy@1834E2CB.F09091A8.1348A864.IP)
[16:30:50] *** Joins: j3rky (gmpreussne@moz-97180B8B.nc.res.rr.com)
[16:31:45] <Tobba> oh
[16:31:49] *** Joins: Guest_ (textual@3E0487DF.D8252BC.9532F1CE.IP)
[16:31:50] <Tobba> closure_exchange_malloc wants you to return some odd box thing
[16:31:55] <Tobba> with legacy managed pointers
[16:31:57] <pongad> paraze: One thing I see from list_move though is that `tmp = self;` on line 225 is definitely wrong
[16:32:03] <Tobba> this is strange to say the least
[16:32:34] <pongad> paraze: Since once you assign, the variable self loses ownership and so it cannot be referenced to again in the next iteration
[16:35:05] <paraze> pongad, Ok I see, but I don't how to do it otherwise
[16:35:39] *** Quits: Guest_ (textual@3E0487DF.D8252BC.9532F1CE.IP) (Ping timeout)
[16:37:01] *** Quits: samx (sami@moz-D9F3E0AE.pp.htv.fi) (Ping timeout)
[16:37:50] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[16:37:54] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[16:40:10] *** Quits: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch) (Ping timeout)
[16:40:32] <SiegeLord> What would be a valid attribute on a struct field/enum variant?
[16:41:06] <pongad> paraze: I'm not sure what the code is really doing so I can't really say...Though I guess a lot of .clone() will make your code work, if not optimal
[16:42:07] *** Joins: samx (sami@moz-77A1C177.pp.htv.fi)
[16:42:12] <pongad> What does `#[deriving(Clone, Eq, Hash)]` do with a raw pointer?
[16:43:41] *** Joins: pczarn (pczarn@moz-69A55FA.izacom.pl)
[16:44:45] *** Joins: jviereck (Adium@moz-C5545DF0.dclient.hispeed.ch)
[16:45:10] <paraze> pongad, Have a lot of .clone() in rust is nice/normal/correct ?
[16:46:06] <pongad> paraze: It's correct but usually not nice nor normal. There are usually ways to get around it, though sometimes you need to be pretty clever about it
[16:46:11] *** Quits: japaric (japaric@F7BC3ABB.DC1425E6.84437BC5.IP) (Ping timeout)
[16:46:20] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[16:46:26] <pongad> paraze: I haven't been coding in Rust for that long, so it's still a little weird to me
[16:46:33] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[16:46:47] *** Joins: japaric (japaric@D2861789.743D7231.BFC118EE.IP)
[16:48:49] <paraze> Ok, thanks a lot pongad :), I'm new so .clone() will be ok for me I think, at least for the time being
[16:48:52] <SiegeLord> rusti: let crate = 1;
[16:48:53] -rusti- <anon>:10:13: 10:18 error: found `crate` in ident position
[16:48:53] -rusti- <anon>:10         let crate = 1;
[16:48:54] -rusti-                       ^~~~~
[16:48:54] -rusti- error: aborting due to previous error
[16:48:54] -rusti- application terminated with error code 101
[16:50:31] *** Quits: [squiddy] (squiddy@moz-767EF079.dynamic.cablesurf.de) (Input/output error)
[16:53:21] *** Quits: lpy (lpy@1834E2CB.F09091A8.1348A864.IP) (Client exited)
[16:56:37] *** Joins: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se)
[16:56:47] *** Quits: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se) (Client exited)
[16:56:53] *** Quits: Kxepal (Miranda@moz-D0E0B353.pppoe.mtu-net.ru) (Ping timeout)
[16:57:03] *** Quits: blank_name (blank_name@2C5A9B5B.E6D3F868.537E532E.IP) (Ping timeout)
[16:57:27] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[16:59:14] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[17:01:12] *** Joins: Kxepal (Miranda@moz-CC5238CC.pppoe.mtu-net.ru)
[17:02:42] *** Joins: ahunt (ahunt@moz-9E6A804D.range86-150.btcentralplus.com)
[17:04:04] *** Quits: sigma (sigma@moz-55097A0B.range86-163.btcentralplus.com) (Ping timeout)
[17:04:46] *** Joins: Guest__ (textual@3E0487DF.D8252BC.9532F1CE.IP)
[17:05:53] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:08:16] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:08:56] *** Joins: jmgrosen (user@moz-848F6087.sb.sd.cox.net)
[17:09:47] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[17:09:51] *** Quits: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Ping timeout)
[17:10:36] *** Joins: ChrisOei (ChrisOei@moz-30D80888.hsd1.ca.comcast.net)
[17:10:40] *** Joins: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[17:10:59] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[17:11:37] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[17:11:56] *** Quits: leowoe (Leo@moz-72D47201.dclient.hispeed.ch) (Ping timeout)
[17:12:35] *** Quits: bourbaki (chatzilla@moz-94D28F6C.dip0.t-ipconnect.de) (Ping timeout)
[17:12:42] <SiegeLord> Hmm... ignore! is gone
[17:12:42] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[17:12:48] <SiegeLord> Oh, I bet I can write it myself
[17:13:43] * Ms2ger shakes his fist at sfackler
[17:13:49] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[17:13:52] *** Joins: Vermeille (Mibbit@moz-A002109C.w80-13.abo.wanadoo.fr)
[17:13:55] *** Parts: Vermeille (Mibbit@moz-A002109C.w80-13.abo.wanadoo.fr) ()
[17:13:59] *** Joins: q66 (q66@moz-6F2D224B.range109-157.btcentralplus.com)
[17:15:11] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[17:15:16] <pongad> Does anyone know what deriving Clone, Eq, Hash does when it sees raw pointers?
[17:15:34] *** Joins: vermeille1 (vermeille@moz-9947004C.kimsufi.com)
[17:15:37] <SiegeLord> You can probably run rustc --pretty expanded to see what is generated
[17:15:48] *** Quits: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Ping timeout)
[17:15:59] <sfackler> Ms2ger: :(
[17:16:01] <pongad> Oh right, didn't think of that
[17:16:30] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[17:16:34] *** Joins: bourbaki (chatzilla@moz-3BA991E8.dip0.t-ipconnect.de)
[17:16:35] <Ms2ger> Do you have any idea how many with_mut calls Servo has? :(
[17:16:47] <vermeille1> Hello :)
[17:16:55] *** Quits: masonl (masonl@AE7AAB74.497EC1B8.5EFB9497.IP) (Ping timeout)
[17:16:56] *** Joins: sigma (sigma@moz-15A267A9.range109-152.btcentralplus.com)
[17:17:30] <sfackler> Ms2ger: you should be able to automate the transition without too much trouble
[17:17:35] <SiegeLord> Drat, how do you write an ignore macro?
[17:17:39] <eddyb> SiegeLord: what would ignore do?
[17:17:59] <sfackler> it's basically like with_mut(|e| e.whatever) -> borrow_mut().whatever
[17:18:00] <SiegeLord> It transformed anything you passed into the macro into nothingness
[17:18:08] <sfackler> that used to exist
[17:18:11] *** Joins: leowoe (Leo@moz-72D47201.dclient.hispeed.ch)
[17:18:22] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[17:18:25] <sfackler> from the days before nested comments were supported
[17:18:26] <SiegeLord> It's the old solution to nesting block comments
[17:18:47] *** Joins: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se)
[17:18:54] <SiegeLord> ($($t: tt)*) => {} isn't working atm
[17:19:03] <eddyb> hah I was just going to say that
[17:19:09] <eddyb> SiegeLord: why {} on the RHS? shouldn't it be ()?
[17:19:38] <sfackler> SiegeLord: #[cfg]s can end up on fields/variants in places
[17:19:42] <SiegeLord> That doesn't help
[17:20:04] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[17:20:40] *** Parts: jgmize (jmize@BF58DE81.56CA2DB3.882D51D2.IP) (WeeChat 0.4.0)
[17:21:29] <Ms2ger> Nothing near as bad as .get(), though...
[17:21:34] * Ms2ger shakes his first at acrichto 
[17:21:44] *** Quits: leowoe (Leo@moz-72D47201.dclient.hispeed.ch) (Ping timeout)
[17:22:05] <sfackler> Ms2ger: I'm also thinking about getting rid of RefCell::{get, set}
[17:22:15] *** Joins: Earnestly (earnest@18162BE0.BA6AC103.30311652.IP)
[17:22:25] <Ms2ger> Not before I land this upgrade, please? :)
[17:22:27] <SiegeLord> Oh, I could use a cfg! macro for this
[17:22:42] <SiegeLord> I just need to make sure my parser ignores the contents of macro invocations
[17:23:25] *** Joins: quux00 (uid24415@moz-E77DEB21.irccloud.com)
[17:23:42] *** Joins: leowoe (Leo@moz-72D47201.dclient.hispeed.ch)
[17:23:52] <SiegeLord> At least I thought cfg! macro existed
[17:23:54] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[17:24:23] <eddyb> SiegeLord: cfg!(x) checks whether --cfg x exists
[17:24:39] <SiegeLord> Ah... that's not quite what I wanted
[17:24:51] <SiegeLord> Time to search the git history for the definition of ignore!
[17:25:40] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[17:26:17] <SiegeLord> Oh it's: (($($x:tt)*) => (()))
[17:26:29] *** Joins: ventos (ventos@moz-C7808201.dip0.t-ipconnect.de)
[17:26:31] <SiegeLord> Downright lispy
[17:26:58] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[17:27:08] *** Quits: jmgrosen (user@moz-848F6087.sb.sd.cox.net) (Ping timeout)
[17:27:27] *** Joins: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[17:28:07] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[17:28:10] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:29:00] *** Quits: leowoe (Leo@moz-72D47201.dclient.hispeed.ch) (Ping timeout)
[17:30:01] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:30:42] *** Quits: samx (sami@moz-77A1C177.pp.htv.fi) (Ping timeout)
[17:30:51] *** Quits: ventos (ventos@moz-C7808201.dip0.t-ipconnect.de) (Quit: WeeChat 0.4.3)
[17:30:58] *** Joins: klaus (koz@moz-4486E876.hsd1.wa.comcast.net)
[17:31:04] <bourbaki> When you pass a variable without a & or ~ will it be passed by value and thus copied?
[17:31:44] *** Quits: sp3d (s@6361F3B1.19CD1E54.8354FB35.IP) (Ping timeout)
[17:32:19] *** Joins: ventos (ventos@moz-C7808201.dip0.t-ipconnect.de)
[17:32:34] *** Quits: ventos (ventos@moz-C7808201.dip0.t-ipconnect.de) (Quit: WeeChat 0.4.3)
[17:32:40] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[17:34:34] <eddyb> bourbaki: if it's larger than an uint, it will be passed by reference
[17:35:42] <vermeille1> How can I get the internal pointer to an str's buffer? (not a CString copy)
[17:35:42] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[17:35:48] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[17:36:12] *** Quits: ahunt (ahunt@moz-9E6A804D.range86-150.btcentralplus.com) (Ping timeout)
[17:36:38] *** vermeille1 is now known as Vermeille
[17:36:45] <japaric> hmmm, anyone has seen this error before: "error: mismatched types: expected `T` but found `T` (expected type parameter but found type parameter)" ? - reproducible with https://gist.github.com/japaric/9726619
[17:37:15] <cmr> Vermeille: .as_slice().as_ptr()
[17:37:20] <cmr> Vermeille: http://static.rust-lang.org/doc/master/std/str/trait.StrSlice.html#tymethod.as_ptr
[17:37:25] *** Joins: samx (sami@moz-D9F3E0AE.pp.htv.fi)
[17:37:31] *** Joins: leowoe (Leo@moz-72D47201.dclient.hispeed.ch)
[17:37:52] <sfackler> japaric: the Ts on lines 13 and 15 are not the same and the second one shadows the first
[17:38:23] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[17:39:55] *** Joins: pepper_chico (pepper_chi@BE2968B5.6F4A2706.E4090502.IP)
[17:40:10] <Vermeille> Okay, I don't understand how to deal with the documentation. Methods applicable on an object seems to be spread where all traits they implement are defined
[17:40:30] *** Quits: nstdloop (nstdloop@moz-65256C41.hsd1.fl.comcast.net) (Input/output error)
[17:40:34] <cmr> Vermeille: that's only true for the built-in types.
[17:40:41] <cmr> Real types have all their methods in one place.
[17:40:46] <cmr> as well as all the traits they implement
[17:40:52] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[17:40:57] *** Joins: nstdloop (nstdloop@moz-65256C41.hsd1.fl.comcast.net)
[17:41:09] <Vermeille> (that's also quite "annoying" to have to add some "use" directives to import *methods*)
[17:41:56] <Vermeille> Oh okay, I'm doing very newbish Rust, that could be an explanation
[17:42:10] *** Quits: StarLight (StarLight@moz-79597C94.dynamic.avangarddsl.ru) (Ping timeout)
[17:42:43] *** Quits: nstdloop (nstdloop@moz-65256C41.hsd1.fl.comcast.net) (Ping timeout)
[17:43:24] *** Quits: NiccosSystem (NiccosSyst@moz-CF331A7F.nextgentel.com) (Ping timeout)
[17:43:50] *** Quits: pepper_chico (pepper_chi@BE2968B5.6F4A2706.E4090502.IP) (Quit: WeeChat 0.4.1)
[17:44:04] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:44:51] *** Joins: pepper_chico (pepper_chi@BE2968B5.6F4A2706.E4090502.IP)
[17:44:54] <SiegeLord> rusti: let be = 1;
[17:44:55] -rusti- <anon>:10:13: 10:15 error: `be` is a reserved keyword
[17:44:55] -rusti- <anon>:10         let be = 1;
[17:44:55] -rusti-                       ^~
[17:44:55] -rusti- application terminated with error code 101
[17:45:00] <SiegeLord> What is be for?
[17:45:12] <cmr> intended future use is opt-in tail calls.
[17:45:39] <japaric> sfackler: I see, moving the <T> from the trait Bar into fn bar() makes the error go away in the sample, I'll try that on my real code. Thanks
[17:46:03] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[17:46:18] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[17:46:22] <SiegeLord> What is Static?
[17:46:25] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:46:27] *** Joins: blank_name (blank_name@74F8D612.6AA59BE4.31328D85.IP)
[17:46:29] *** Quits: Rym (y@7E883303.78CA6893.8772DA20.IP) (Ping timeout)
[17:47:47] <SiegeLord> It's mentioned in a comment in token.rs
[17:47:50] <SiegeLord> / Static and Self are also special idents (prefill de-dupes)
[17:47:57] <cmr> Static used to be a kind iirc
[17:48:35] *** Joins: StarLight (StarLight@moz-737B2678.pppoe.avangarddsl.ru)
[17:49:12] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:49:14] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[17:49:16] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[17:51:33] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:56:54] *** Quits: doener (doener@moz-C68F600D.unity-media.net) (Quit: leaving)
[17:57:53] *** Quits: leowoe (Leo@moz-72D47201.dclient.hispeed.ch) (Connection reset by peer)
[17:58:07] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[17:58:42] <Ms2ger> "rust must abort now. so sorry."
[17:58:47] *** Joins: clusterfoo (Mibbit@moz-F8B381B4.hm.shawcable.net)
[17:59:54] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[18:00:25] <eddyb> SiegeLord: those names are the ones used in the code for the tokens
[18:00:34] <eddyb> SiegeLord: those two dupes are self and static
[18:00:56] <SiegeLord> So unrelated to Self?
[18:01:01] <eddyb> SiegeLord: I think it has something to do with lifetimes, 'self and 'static were the two special lifetimes
[18:01:03] <SiegeLord> The trait Self
[18:01:06] <eddyb> SiegeLord: that's SelfTy I think
[18:01:11] <eddyb> or something special like that
[18:01:12] <SiegeLord> Ok
[18:01:33] <eddyb> s/trait/implementer type in a trait/
[18:01:36] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[18:01:40] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[18:02:22] *** Joins: leowoe (Leo@moz-72D47201.dclient.hispeed.ch)
[18:02:23] <clusterfoo> If I copy the example at http://static.rust-lang.org/doc/master/tutorial.html#move-semantics , (#[deriving(Clone)]), I get an error when compiling: -- type `main::List` does not implement any method in scope named `clone`
[18:02:49] *** Quits: Guest__ (textual@3E0487DF.D8252BC.9532F1CE.IP) (Ping timeout)
[18:02:55] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[18:02:58] <clusterfoo> what's missing for that to work?
[18:04:25] *** Joins: NiccosSystem (NiccosSyst@E6859586.4109E00C.C494D41A.IP)
[18:06:17] *** Joins: Guest__ (textual@3E0487DF.D8252BC.9532F1CE.IP)
[18:07:05] <Yurume> clusterfoo, where did you get the error? (the exact line with an error, as reported by rustc)
[18:07:57] <Yurume> maybe you also need to post the exact source code (use pastebin.com or similar for posting), since the original code does not work without modification.
[18:08:09] <Yurume> (you at least need to wrap it in `fn main() { ... }`.)
[18:09:28] <clusterfoo> yurume: https://gist.github.com/CLUSTERfoo/9727064 I highligted the line where the error occurs
[18:09:46] <Ms2ger> sfackler, mm, runtime borrow failures everywhere... I'm blaming with_mut removal
[18:09:53] <Yurume> aha, #[deriving] does not (yet) work on the function. you need to put enum out of main.
[18:10:21] <Yurume> hmm... wait, what version of rustc are you using?
[18:10:23] <Yurume> (rustc -v)
[18:11:21] <Yurume> it has been fixed in recent version: https://github.com/mozilla/rust/issues/4913
[18:11:25] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[18:11:32] *** Joins: bellows (Mibbit@7E217F04.2C8DBE39.CC1A2609.IP)
[18:11:34] *** Joins: nstdloop (nstdloop@moz-65256C41.hsd1.fl.comcast.net)
[18:12:28] <clusterfoo> yurume : 0.9 -- yep, taking it out of the function worked. thanks :)
[18:12:56] <Yurume> you are strongly advised to use the recent version (nightlies or manual builds) ;)
[18:13:08] <Yurume> things get fixed (and introduced) very much quickly...
[18:13:10] *** Quits: doskey (Mibbit@E38B7AAE.31799CCB.77BEDD39.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[18:13:18] *** Quits: nstdloop (nstdloop@moz-65256C41.hsd1.fl.comcast.net) (Ping timeout)
[18:13:19] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[18:13:46] *** Joins: Rym (y@7E883303.78CA6893.8772DA20.IP)
[18:14:28] *** Quits: jviereck (Adium@moz-C5545DF0.dclient.hispeed.ch) (Ping timeout)
[18:15:20] *** Joins: p1start (rewi@moz-E7F3D014.org)
[18:21:13] <clusterfoo> yurume: yes I'm hoping to get deeper into rust once I learn it well and following dev more closely. -- it's my first non-scripting language so I'm learning tons every day. 
[18:21:24] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[18:21:56] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[18:22:04] *** Joins: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP)
[18:22:58] *** Joins: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch)
[18:23:36] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[18:23:42] *** Quits: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se) (Quit: mediocrity)
[18:24:09] <paraze> ... I tried to put some .clone(), but... I don't get anywhere... When I do "tmp = self" : use of moved value: `self`, and when I do "tmp = self.clone()" -> doesn't work
[18:24:37] <paraze> "`self` moved here because it has type `game::Game`, which is non-copyable (perhaps you meant to use clone()?)" -> why it's non-copyable ?
[18:25:11] <Ms2ger> Because it contains non-plain-old-data
[18:25:51] *** Joins: Ferreus (ferreus@moz-58E71689.lsn.wtnet.de)
[18:26:14] *** Joins: WebeWizard (WebeWizard@moz-7CCD1DAE.ks.ks.cox.net)
[18:26:21] *** Quits: hdevalence (quassel@moz-D125A39F.home3.cgocable.net) (Client exited)
[18:26:46] *** Joins: jmgrosen (user@moz-848F6087.sb.sd.cox.net)
[18:26:47] <paraze> Ms2ger, in other words ?
[18:27:05] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[18:27:07] <Ms2ger> A ~str?
[18:27:34] <cmr> paraze: any type with a destructor (implements "Drop")
[18:27:53] *** Joins: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net)
[18:28:07] *** Joins: Matthias247 (Miranda@moz-678B5E4A.hsi2.kabel-badenwuerttemberg.de)
[18:28:15] <hoverbear> So, I'm wondering how hard it would be to build wayland bindings for rust.
[18:28:19] *** Quits: alonlevy (alon@moz-B7197631.red.bezeqint.net) (Ping timeout)
[18:28:19] *** Quits: samx (sami@moz-D9F3E0AE.pp.htv.fi) (Ping timeout)
[18:28:23] <cmr> hoverbear: simple
[18:28:39] <hoverbear> Then I realized I don't have a machine that can run wayland well enough to benefit from it.
[18:28:40] *** Quits: jmgrosen (user@moz-848F6087.sb.sd.cox.net) (Ping timeout)
[18:28:51] <cmr> :p
[18:28:56] * hoverbear sighs.
[18:28:57] <cmr> weston, you mean?
[18:29:17] <hoverbear> My desktop is nvidia based and I use a mac for most of my programming.
[18:29:26] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[18:29:30] <hoverbear> And GTX 660 support is bad in nouveau
[18:30:53] *** Quits: bellows (Mibbit@7E217F04.2C8DBE39.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[18:30:58] *** Joins: samx (sami@moz-77A1C177.pp.htv.fi)
[18:31:29] <Ms2ger> acrichto, you know what's up with https://github.com/mozilla/rust/pull/13103? Seems like travis is broken
[18:33:38] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[18:33:53] *** Joins: ahunt (ahunt@moz-9E6A804D.range86-150.btcentralplus.com)
[18:34:38] *** Quits: Doppp (Doppp@ED5E5331.58AB7B93.EE633EE.IP) (Ping timeout)
[18:35:52] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[18:36:00] *** Quits: samx (sami@moz-77A1C177.pp.htv.fi) (Quit: This computer has gone to sleep)
[18:38:41] *** Quits: Rym (y@7E883303.78CA6893.8772DA20.IP) (Ping timeout)
[18:41:03] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[18:41:25] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[18:41:42] <bascule> o_O goto in Rust
[18:42:54] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[18:42:58] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[18:43:10] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[18:44:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[18:46:09] *** Joins: Rym (y@7E883303.78CA6893.8772DA20.IP)
[18:46:33] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[18:47:15] *** Joins: onelson (owen@18CF7301.95770028.5B6BFE7D.IP)
[18:47:32] *** Joins: ffsdff (Mibbit@moz-B7B38139.dsl.frs2ca.sbcglobal.net)
[18:47:49] <SiegeLord> It'd be nice to have, but it'd probably play badly with the borrow checker
[18:48:22] <sfackler> it's pretty useless in C++ since you can't jump over any constructors
[18:48:31] <sfackler> and there'd be even more restrictions in rust
[18:49:19] *** Joins: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP)
[18:51:00] <acrichto> Ms2ger: oh that's just travis spurious failures
[18:51:09] <acrichto> llvm's aptitude servers aren't always up
[18:51:20] <cmr> O_o
[18:52:08] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[18:52:17] *** Joins: mihneadb (mihneadb@moz-6B31F5AA.static.ziggozakelijk.nl)
[18:52:30] *** Quits: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP) (Quit: This computer has gone to sleep)
[18:52:34] *** Quits: mihneadb (mihneadb@moz-6B31F5AA.static.ziggozakelijk.nl) (Client exited)
[18:53:15] <whitequark> sfackler: make it unsafe?
[18:53:16] *** Quits: ffsdff (Mibbit@moz-B7B38139.dsl.frs2ca.sbcglobal.net) (Quit: http://www.mibbit.com ajax IRC Client)
[18:53:29] <whitequark> actually that sounds like a good idea even if it was memory-safe :)
[18:54:13] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[18:54:14] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[18:54:56] *** Quits: Houm (Houm@moz-25669AA8.fbx.proxad.net) (Ping timeout)
[18:55:57] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[18:56:35] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[18:57:30] *** Quits: leowoe (Leo@moz-72D47201.dclient.hispeed.ch) (Quit: Leaving.)
[18:58:59] <Ms2ger> src/libstd/os.rs:    // More recursive_mkdir tests are in extra::tempfile
[18:59:01] <Ms2ger> Orly
[18:59:54] <Tobba> I recall there being a few tests that still used extra
[19:00:00] <Tobba> that would somehow suceed up until a few days ago
[19:01:10] *** Quits: brandonson (SingingBoy@610D90A5.EE9B234.1ECA502.IP) (Ping timeout)
[19:01:19] *** Joins: orospakr (orospakr@E5F02728.3C7B6A44.86CC3CCD.IP)
[19:01:26] *** Quits: clusterfoo (Mibbit@moz-F8B381B4.hm.shawcable.net) (Quit: http://www.mibbit.com ajax IRC Client)
[19:01:57] *** Joins: Guest (textual@3E0487DF.D8252BC.9532F1CE.IP)
[19:02:01] *** Quits: Guest__ (textual@3E0487DF.D8252BC.9532F1CE.IP) (Ping timeout)
[19:02:14] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[19:02:42] *** Quits: orospakr (orospakr@E5F02728.3C7B6A44.86CC3CCD.IP) (Quit: Textual IRC Client: www.textualapp.com)
[19:04:20] *** Quits: Guest (textual@3E0487DF.D8252BC.9532F1CE.IP) (Ping timeout)
[19:04:34] *** Joins: orospakr (orospakr@E5F02728.3C7B6A44.86CC3CCD.IP)
[19:05:00] *** Joins: evanm (evanm@moz-4D6F9A00.hsd1.ca.comcast.net)
[19:05:17] *** Joins: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP)
[19:05:43] *** Quits: orospakr (orospakr@E5F02728.3C7B6A44.86CC3CCD.IP) (Quit: Textual IRC Client: www.textualapp.com)
[19:07:19] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Client exited)
[19:07:42] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[19:07:43] *** Joins: james4k (james@moz-9BB5AE72.consolidated.net)
[19:07:46] *** Joins: pupoque (Adium@297D6F99.EF706C30.C0C64AB3.IP)
[19:07:55] *** Joins: doskey (Mibbit@77F3FE1.F60C24FB.B2C01940.IP)
[19:08:08] *** Quits: pupoque (Adium@297D6F99.EF706C30.C0C64AB3.IP) (Quit: Leaving.)
[19:08:13] *** Quits: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP) (Quit: This computer has gone to sleep)
[19:08:54] *** Joins: pupoque (Adium@297D6F99.EF706C30.C0C64AB3.IP)
[19:08:54] <doskey> is there an easy way to save a proc/closue to a method so it can be called with a self later on?
[19:09:23] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[19:09:54] <doskey> or what is the rust-y way right now to deal with proc/closures? I can't find an up to date documentation?
[19:10:26] *** Quits: evanm (evanm@moz-4D6F9A00.hsd1.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[19:11:17] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[19:11:21] *** Quits: doskey (Mibbit@77F3FE1.F60C24FB.B2C01940.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[19:11:32] <eddyb> doskey: you can create a bare function (or a closure) that takes a self and all the arguments and calls the method
[19:11:56] <eddyb> aww parted before I finished writing that
[19:12:04] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[19:12:15] *** Joins: nstdloop (nstdloop@moz-65256C41.hsd1.fl.comcast.net)
[19:12:49] *** Quits: p1start (rewi@moz-E7F3D014.org) (Ping timeout)
[19:13:10] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[19:13:10] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[19:13:17] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[19:13:37] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Connection reset by peer)
[19:13:41] <Ms2ger> error: type `std::vec::Vec<~str>` does not implement any method in scope named `head`
[19:13:46] * Ms2ger looks disapprovingly
[19:13:50] <eddyb> .get(0)?
[19:13:51] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[19:13:59] *** Quits: nstdloop (nstdloop@moz-65256C41.hsd1.fl.comcast.net) (Ping timeout)
[19:14:02] <eddyb> or... what's the Option returning method?
[19:14:07] <eddyb> Ms2ger: that method is probably on &[T]
[19:14:16] <eddyb> Ms2ger: so I guess you can always .as_slice().head()
[19:14:38] * Ms2ger tries
[19:15:00] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[19:15:05] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[19:15:19] <Ms2ger> test result: FAILED. 0 passed; 61 failed; 0 ignored; 0 measured
[19:15:21] *** Joins: jensnockert (jensnocker@moz-EF95FD94.astro.lu.se)
[19:15:23] <Ms2ger> Yay, the tests build!
[19:15:39] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[19:15:49] <eddyb> lol
[19:15:49] <Havvy> XD
[19:16:04] <eddyb> Ms2ger: they're all failing to read /dev/urandom, no?
[19:16:05] <Havvy> I dont think I've ever had 61 test failures.
[19:16:19] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[19:16:21] <eddyb> Havvy: touch trans. I dare you
[19:16:33] <Havvy> I don't even know what that is.
[19:16:38] <eddyb> Rust AST -> LLVM IR
[19:16:39] <Ms2ger> eddyb, either that or borrowchk failures
[19:17:06] *** Quits: jensnockert (jensnocker@moz-EF95FD94.astro.lu.se) (Ping timeout)
[19:17:30] <edwardw> or variance inference!
[19:18:19] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[19:18:27] *** Parts: pupoque (Adium@297D6F99.EF706C30.C0C64AB3.IP) ()
[19:19:38] * edwardw hopes my first trans patch land soon
[19:20:12] *** Joins: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru)
[19:20:17] *** Quits: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru) (Quit: Leaving...)
[19:24:44] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[19:26:34] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[19:27:44] *** eatkinson-away is now known as eatkinson
[19:27:51] *** Joins: Guest (textual@3E0487DF.D8252BC.9532F1CE.IP)
[19:29:16] *** Quits: Havvy (Havvy@moz-4FE57F72.hsd1.wa.comcast.net) (Quit: Leaving)
[19:31:04] <bourbaki> So if everything bigger than a uint will be passed as a reference, how do you copy something? With clone?
[19:31:14] *** eatkinson is now known as eatkinson-away
[19:32:07] <bourbaki> From here http://static.rust-lang.org/doc/master/guide-lifetimes.html
[19:32:49] <bourbaki> Chapter 2 i thought that if you just have a type without borrowing or pointer type it would get copied always.
[19:33:09] <Ms2ger> There's two things here
[19:33:28] <Ms2ger> What the language semantics are, and what the machine code does
[19:34:35] <bourbaki> Ok and what is what?
[19:35:11] <bourbaki> So everything is implicitly passed by reference?
[19:35:20] <eddyb> everything larger than an uint
[19:35:33] <eddyb> bourbaki: but that's just function arguments and return
[19:35:35] <bourbaki> So the statement in the link posted is not correct?
[19:35:58] <Ms2ger> I didn't find your quote in that link
[19:36:04] <bourbaki> that is, it takes the points by value. But if we define it this way, calling the function will cause the points to be copied.
[19:36:27] <eddyb> bourbaki: copied to a temporary and then a pointer to the temporary is sent to the function
[19:36:32] *** Quits: NiccosSystem (NiccosSyst@E6859586.4109E00C.C494D41A.IP) (Ping timeout)
[19:36:38] <bourbaki> Ah
[19:37:13] <bourbaki> But how can push then just have a by value call?
[19:37:19] <eddyb> and LLVM can optimize that sometimes. we should just be passing by value and letting LLVM decide what to do, but it has downsides
[19:37:28] <eddyb> bourbaki: by reference is an implementation detail
[19:37:37] <eddyb> bourbaki: it still looks and behaves like a value
[19:37:38] *** Joins: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net)
[19:37:45] <bourbaki> Ok so its like inline you dont know what happens?
[19:37:52] <bourbaki> Let the compiler do the magic :)
[19:37:53] <edwardw> RUST_LOG=::help rustc doesn't work any more?
[19:38:11] <eddyb> edwardw: it works differently now
[19:38:19] <bourbaki> Is there anything i can read about that to get into that kind of stuff?
[19:38:20] <eddyb> log level is queried by string
[19:38:26] <eddyb> bourbaki: not... really
[19:38:29] <edwardw> how?
[19:38:51] <bourbaki> I feel its kinda important, at least as a C++ programmer.
[19:38:57] <eddyb> edwardw: as in, log_level!() expands to something like `log::get_log_level(current module path)`
[19:38:58] <bourbaki> er as :)
[19:39:37] <Ms2ger> bourbaki, want to write that documentation? ;)
[19:39:46] <eddyb> bourbaki: we can make me more efficient, if we keep that model, we just need last-use analysis
[19:40:15] <bourbaki> Ms2ger: I guess its a pain
[19:40:29] <eddyb> bourbaki: sometimes (or maybe most of the time) you don't need to make a copy, you can just reuse a pointer to the data you already have
[19:40:30] <bourbaki> Just saying that i think that this is an important detail
[19:40:32] <SiegeLord> Hmm... why does *mut not implicitly convert to *?
[19:40:33] <Ms2ger> Well, people have lots of things to get done :)
[19:40:38] <SiegeLord> &mut seems to do so for &
[19:40:47] <Ms2ger> SiegeLord, more importantly, why are you using *? :)
[19:40:52] <SiegeLord> FFI
[19:41:06] <SiegeLord> And my FFI is correct, in as much as I use * to represent const*
[19:41:07] <edwardw> eddyb: but the command line RUST_LOG=::help is gone?
[19:41:21] <eddyb> edwardw: there's no module map anymore
[19:41:24] <SiegeLord> But I have a *mut and it seems odd that I can't pass it to those functions
[19:41:29] <eddyb> edwardw: because of how it's been reimplemented
[19:41:35] <edwardw> k
[19:41:56] * edwardw tries to adapt to that
[19:41:56] <eddyb> bourbaki: like, imagine a recursive function moving a value down the stack - you don't want multiple copies of it, if it's large enough
[19:42:28] <SiegeLord> Well, that's why God sent us kimundi and he gave us as *_
[19:42:56] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[19:43:27] <edwardw> eddyb: then how to do backtrace?
[19:43:40] <bourbaki> Ok i see, ty :) clarifies some things.
[19:43:50] <eddyb> edwardw: RUST_LOG=backtrace?
[19:44:04] *** Joins: aatch_ (James@moz-B437F499.pocketrent.com)
[19:44:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[19:44:23] *** Quits: aatch (aatch@moz-2BB0AC01.cable.telstraclear.net) (NickServ (GHOST command used by aatch_))
[19:44:28] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[19:44:28] *** aatch_ is now known as aatch
[19:44:39] <edwardw> doesn't work :(
[19:44:40] *** Joins: aatch_ (aatch@moz-2BB0AC01.cable.telstraclear.net)
[19:44:48] <aatch> One day I'll remember to log out at home.
[19:45:05] *** Joins: jmgrosen (user@moz-848F6087.sb.sd.cox.net)
[19:46:01] *** Quits: murph (murph@moz-769F6638.oracle.com) (Client exited)
[19:46:12] *** Joins: murph (murph@moz-769F6638.oracle.com)
[19:46:28] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[19:46:54] <edwardw> eddyb: RUST_BACKTRACE=1 rustc foo.rs
[19:47:20] <eddyb> oh it changed
[19:47:22] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[19:47:27] <eddyb> Ms2ger: ^^
[19:48:50] <Ms2ger> Mm? Then that's what I used, I guess :)
[19:49:22] *** Quits: blank_name (blank_name@74F8D612.6AA59BE4.31328D85.IP) (Ping timeout)
[19:51:05] <aatch> goddammit sage, why must you be so big...
[19:51:17] *** Joins: octeract (Mibbit@moz-D63AE93E.du.xdsl.is)
[19:52:18] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[19:52:26] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[19:53:01] *** Quits: edwardw (edwardw@D286B842.1B2F6624.7F41E82D.IP) (Quit: Leaving...)
[19:53:36] *** Quits: arturo (Thunderbir@moz-E83B14F0.superkabel.de) (Ping timeout)
[19:53:38] *** Joins: Florob (Florob@moz-39532932.de)
[19:53:43] *** Joins: arturo (Thunderbir@moz-E83B14F0.superkabel.de)
[19:54:03] *** Joins: evanm (evanm@moz-4D6F9A00.hsd1.ca.comcast.net)
[19:55:27] *** Joins: blank_name (blank_name@AD525492.9285D4F9.93A5C78C.IP)
[19:56:10] *** Joins: jeaye (jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[19:56:13] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[19:56:16] <japaric> what's the syntax to call trait methods? this doesn't work: https://gist.github.com/japaric/9728912
[19:57:05] <eddyb> I bet it's a missing &self
[19:57:19] <eddyb> ah, no, missing type hint
[19:57:27] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[19:57:34] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[19:57:37] <eddyb> japaric: there's nothing to make Foo::foo different for each implementation of Foo
[19:57:58] <eddyb> japaric: you need "self" or "Self" to show up somewhere in that method
[19:59:11] <eddyb> japaric: what you are trying might work in the future as Self::foo() or Foo::<for Self>::foo()
[19:59:11] *** Joins: orospakr (orospakr@E5F02728.3C7B6A44.86CC3CCD.IP)
[19:59:13] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[19:59:24] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[19:59:33] <japaric> eddyb: how would I make Self show up in the method? (I know how to use self for that)
[20:01:05] *** Quits: orospakr (orospakr@E5F02728.3C7B6A44.86CC3CCD.IP) (Quit: Textual IRC Client: www.textualapp.com)
[20:01:09] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[20:01:35] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[20:01:50] *** Joins: bvssvni (Mibbit@moz-A47B6F8E.bb.online.no)
[20:01:50] <eddyb> japaric: you can take _: Option<Self> and just pass None
[20:02:32] <eddyb> japaric: trait methods like that are rare enough to not cause pressure to fix them :P (though we do want to fix them)
[20:03:04] *** Joins: orospakr (orospakr@E5F02728.3C7B6A44.86CC3CCD.IP)
[20:03:08] <eddyb> japaric: is it some kind of associated-item-like thing?
[20:03:19] <eddyb> (a static getter, I guess)
[20:03:24] <japaric> eddyb: wait, if I use Option<Self>, how do I call the method afterwards?
[20:03:38] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[20:03:49] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[20:05:20] *** Joins: mgottschlag (quassel@moz-93D11D99.cust.bluewin.ch)
[20:05:32] *** Quits: Rym (y@7E883303.78CA6893.8772DA20.IP) (Ping timeout)
[20:06:44] *** Quits: Guest (textual@3E0487DF.D8252BC.9532F1CE.IP) (Quit: Textual IRC Client: www.textualapp.com)
[20:07:28] <herrwolfe45> I'm working on a small patch for librustc/lib.rs. Should I need to `make check` each time I want to test or is there a somewhat quicker approach?
[20:07:59] <herrwolfe45> not that I'm complaining about time, just want to make sure i'm handling this correctly
[20:08:05] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[20:08:27] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[20:08:44] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[20:08:49] <bvssvni> herrwolfe45: maybe you should ask in #rust-internals?
[20:08:58] <herrwolfe45> thanks - I will
[20:09:58] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[20:09:58] *** Quits: IanCormac84 (User@F7CE68A0.64D641E5.67DFF8B4.IP) (Connection reset by peer)
[20:10:07] *** Quits: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch) (Quit: Leaving.)
[20:10:13] *** Joins: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch)
[20:11:05] <eddyb> japaric: oh, sorry, I wasn't clear enough
[20:11:10] <eddyb> japaric: None::<Self>
[20:11:18] *** Joins: IanCormac84 (User@841D33B0.2A8D8854.67DFF8B4.IP)
[20:13:15] *** Joins: [squiddy] (squiddy@moz-767EF079.dynamic.cablesurf.de)
[20:13:15] *** Joins: nstdloop (nstdloop@moz-65256C41.hsd1.fl.comcast.net)
[20:14:35] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[20:14:42] <japaric> eddyb: type `std::option::Option<Self>` does not implement any method in scope named `foo`        println!("{}", None::<Self>.foo()) ?
[20:14:52] *** Joins: lkuper (lkuper@moz-143692FE.dyn.optonline.net)
[20:14:58] <eddyb> japaric: Foo::foo(None::<Self>)
[20:14:59] *** Quits: nstdloop (nstdloop@moz-65256C41.hsd1.fl.comcast.net) (Ping timeout)
[20:15:18] <eddyb> (sorry for the confusion)
[20:15:58] <japaric> eddyb: error: internal compiler error: unexpected failure :D
[20:16:12] *** Joins: captpancakes (textual@moz-11E164FE.washdc.fios.verizon.net)
[20:16:12] <eddyb> wooot
[20:16:20] <eddyb> japaric: how did you cause an ICE with that? gist pls
[20:16:23] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[20:16:36] *** Quits: captpancakes (textual@moz-11E164FE.washdc.fios.verizon.net) (Quit: Textual IRC Client: www.textualapp.com)
[20:17:28] <japaric> eddyb: https://gist.github.com/japaric/9728912
[20:19:24] <japaric> eddyb: can reproduce?
[20:19:59] <eddyb> japaric: try (_: Option<Self>)
[20:20:16] <eddyb> the form you have there never worked all the time for me
[20:21:05] *** Joins: Rym (y@7E883303.78CA6893.8772DA20.IP)
[20:21:12] *** Quits: WebeWizard (WebeWizard@moz-7CCD1DAE.ks.ks.cox.net) (Client exited)
[20:21:19] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[20:21:26] *** Joins: brandonson (SingingBoy@610D90A5.EE9B234.1ECA502.IP)
[20:22:46] *** Joins: mib_822ux1 (Mibbit@7E217F04.2C8DBE39.CC1A2609.IP)
[20:23:09] *** Quits: rook (rook@moz-97AF7010.hsd1.mn.comcast.net) (Quit: rook)
[20:23:19] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[20:25:18] *** Quits: skade (skade@moz-1EC0F118.pools.arcor-ip.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[20:25:54] *** Quits: orospakr (orospakr@E5F02728.3C7B6A44.86CC3CCD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[20:26:10] <japaric> eddyb: that one works, but why does the other one ends with ICE? it says index out of bounds
[20:27:01] <eddyb> japaric: it's probably some weird thing caused, by, uhm, not having a pattern
[20:27:20] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[20:27:20] *** Quits: huon (Thunderbir@moz-826BD85A.lns20.syd6.internode.on.net) (Ping timeout)
[20:28:47] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[20:28:47] <japaric> eddyb: is there an issue for that?
[20:28:58] <eddyb> no idea
[20:31:25] *** Quits: mib_822ux1 (Mibbit@7E217F04.2C8DBE39.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[20:32:12] <bvssvni> japaric: you can open an issue, if it is a duplicate, it gets tagged
[20:33:14] *** Joins: EastByte_ (EastByte@moz-4B858842.ewe-ip-backbone.de)
[20:33:18] <eibwen> http://static.rust-lang.org/doc/master/std/unit/index.html what is this about?
[20:33:42] *** Quits: EastByte (EastByte@moz-B828DF5B.ewe-ip-backbone.de) (Ping timeout)
[20:33:47] <japaric> bvssvni: I'll file an issue then
[20:33:57] <kimundi> eibwen: Seems like a module that contains nothing interesting ;)
[20:34:14] <eddyb> methods & functions for ()
[20:34:40] <kimundi> Actually just trait impls for (), so that explains why they don'T get shown there
[20:36:04] *** Quits: bourbaki (chatzilla@moz-3BA991E8.dip0.t-ipconnect.de) (Quit: ChatZilla 0.9.90.1 [Firefox 27.0.1/20140212131424])
[20:38:29] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[20:39:29] *** Joins: soumyaC_ (uid15286@moz-E77DEB21.irccloud.com)
[20:39:42] *** soumyaC_ is now known as soumyaC
[20:40:35] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[20:42:47] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[20:43:01] *** Quits: mgottschlag (quassel@moz-93D11D99.cust.bluewin.ch) (Ping timeout)
[20:45:30] *** Quits: pczarn (pczarn@moz-69A55FA.izacom.pl) (Input/output error)
[20:46:00] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[20:46:01] *** Joins: fournm (Aria@moz-ABB60BA0.austin.res.rr.com)
[20:48:04] *** Quits: nszceta (nszceta@moz-E6CA8D6.hsd1.pa.comcast.net) (Quit: Textual IRC Client: www.textualapp.com)
[20:48:41] *** Quits: lkuper (lkuper@moz-143692FE.dyn.optonline.net) (Quit: lkuper)
[20:48:53] *** Joins: doskey (Mibbit@687DFD4C.AC4EEB5A.9E22F775.IP)
[20:49:36] *** Joins: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org)
[20:50:33] *** Quits: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca) (Quit: Textual IRC Client: www.textualapp.com)
[20:51:09] <aatch> So if I wanted to visit the Rust team at Mozilla, which office should I crash?
[20:52:10] *** Joins: skade (skade@moz-1EC0F118.pools.arcor-ip.net)
[20:52:11] <Ms2ger> I think there's a few people in MV?
[20:52:20] <Ms2ger> And at least one in Paris
[20:52:30] *** Joins: meyer (meyer@moz-A9CF56E4.hsd1.ca.comcast.net)
[20:52:45] <bvssvni> I was impressed by the Claymore project: Nov 5th: triangle, Nov 10th: model loading
[20:52:48] <bvssvni> http://claymore-dev.blogspot.no/
[20:53:52] <eddyb> Ms2ger: I wonder if there's anything official in Bucharest
[20:53:56] <aatch> Specifically California, I'm going to be there for a few days in April, figured I'd drop in and say hello
[20:54:09] <Ms2ger> I don't think we have an office there
[20:54:46] <aatch> There are, however, two in CA
[20:54:56] <eddyb> http://mozilla.ro/ oh dear
[20:55:21] <eddyb> "romănească" is so... folk-ish
[20:55:35] *** Quits: tigrou3tac (fabien@moz-6E2397FF.fbx.proxad.net) (Ping timeout)
[20:55:57] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[20:56:56] <doskey> Can anyone please help me solve how to get closures to work with methods in rust? Here is an example of what I am trying to accomplish:
[20:56:57] <doskey> http://pastebin.com/MXG8rB7J
[20:57:08] *** Joins: newguy (Mibbit@moz-1C68F6E0.hsd1.va.comcast.net)
[20:57:09] <doskey> but I get a:
[20:57:17] <doskey> Missing lifetime specifier
[20:57:36] <bvssvni> doskey: add <'a> after Remember
[20:57:45] <eddyb> and 'a before ||
[20:57:47] <newguy> if its not too busy, can someone help me answer a Flask question
[20:57:51] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[20:57:58] <eddyb> newguy: pls no
[20:57:59] <newguy> no one is responding on the flask irc :(
[20:58:01] <newguy> lol
[20:58:02] <newguy> k
[20:58:07] <eddyb> #rust is not #everything
[20:58:29] <eddyb> newguy: you can ask on SO, I guess
[20:58:55] *** Quits: kngl1 (Adium@40AE2BF6.ABCDAFD6.7C797F8E.IP) (Quit: Leaving.)
[20:58:59] *** Quits: newguy (Mibbit@moz-1C68F6E0.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[20:59:02] *** Joins: dapz (textual@moz-F958911.hsd1.ca.comcast.net)
[20:59:44] <doskey> bvssvni: Thanks trying to play with it now...
[20:59:59] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[21:00:13] <herrwolfe45> newguy
[21:00:18] <eddyb> doskey: actually, you can use 'static || and not make Remember generic on <'a>
[21:00:21] <herrwolfe45> I will jump into flask and see if i can help
[21:00:22] <eddyb> herrwolfe45: gone
[21:00:29] * bvssvni wondering what Flask is
[21:00:48] * bvssvni will never know :(
[21:01:05] <herrwolfe45> bvssvni: it is a web microframework written in python
[21:01:14] <bvssvni> ah
[21:01:39] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[21:01:44] <herrwolfe45> basically, just implements request/response stuff, it is nice to work with
[21:02:08] <meyer> I'm planning the Grapheme Cluster iterator I'm writing, and it should be relatively simple. You can determine if there is a break between grapheme clusters by looking at pairs of adjacent characters (codepoints). To do this efficiently, though, I need to quickly classify each character, from this table: http://www.unicode.org/Public/UCD/latest/ucd/auxiliary/GraphemeBreakProperty.txt . So, my
[21:02:10] <meyer>  thought is to use TreeMap as an interval tree, dump the table into it, and query using 1-character intervals, defining TotalOrd so that intervals are equal if they have any overlap.
[21:03:14] <meyer> My question is, since this would theoretically be a standard library function, what's the proper way to handle building the tree?
[21:03:25] *** Quits: arturo (Thunderbir@moz-E83B14F0.superkabel.de) (Ping timeout)
[21:03:42] <meyer> (hardcode a long list of insert operations, generated from the linked document or something else?)
[21:03:54] <doskey> eddyb: Thanks that simplified it a bit
[21:04:27] <eddyb> doskey: but.... you could use an enum instead of a closure, in that case :P
[21:04:37] *** Joins: guest22221 (guest2222@58D73AF.F299E8.284344F5.IP)
[21:04:38] <kimundi> meyer: Hm, this sounds like a static memory data structure, is that right?
[21:04:49] <meyer> kimundi: Yes.
[21:04:55] <eddyb> syntax extension time :P
[21:05:06] <bvssvni> oh dear
[21:05:12] *** Quits: guest2222 (guest2222@moz-1D2D613F.ga.at.cox.net) (Connection reset by peer)
[21:05:13] <eddyb> or you can probably generate the values in the python stript
[21:05:18] * bvssvni putting on syntax extension glasses
[21:05:21] *** Joins: guest22222 (guest2222@moz-1D2D613F.ga.at.cox.net)
[21:05:24] <doskey> still having problems actually calling the callback. Should I be able to do self.callback(argument)?
[21:05:29] *** Quits: jackneill (jackneill@moz-67DBB0FB.pool.digikabel.hu) (Input/output error)
[21:05:35] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[21:05:37] <kimundi> meyer: Is this not expressible as these binary search codepoint tables we have?
[21:05:47] *** Joins: guest2222 (guest2222@58D73AF.F299E8.284344F5.IP)
[21:06:19] *** Quits: guest22221 (guest2222@58D73AF.F299E8.284344F5.IP) (Ping timeout)
[21:06:24] <doskey> ah got it I needed (self.callback)(argument)
[21:06:24] *** Joins: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP)
[21:06:26] <kimundi> I didn't really understand what gets mapped to what from you explanation
[21:06:28] <aatch> doskey, you need to do (self.callback)(argument)
[21:06:34] <Ms2ger> Yay, I'm a rust contributor!
[21:07:01] *** Quits: guest22222 (guest2222@moz-1D2D613F.ga.at.cox.net) (Ping timeout)
[21:07:04] <bvssvni> doskey: there are no arguments ||
[21:07:17] <doskey> eddyb: The reason I prefer the callback over an enum is, a) so I can play with closures
[21:07:36] <doskey> b) in the real code I am using it as a cheap state machine
[21:07:56] *** Joins: arturo (Thunderbir@moz-E83B14F0.superkabel.de)
[21:08:10] <kimundi> meyer: is it "map current codepoint to all intervals it belongs to"?
[21:08:31] <meyer> kimundi: I'm not sure. Where are those? I just started this five minutes ago, and am using the words iterator as a reference. The way the grapheme cluster algorithm works is that each character (unicode codepoint) has a "grapheme cluster break" property (from a small set of possible ones). The characters with the same cluster property aren't all adjacent, though some are. 
[21:08:32] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[21:08:44] <meyer> kimundi: Each codepoint only has one cluster break property
[21:08:46] <meyer> The intervals don't overlap
[21:09:24] <kimundi> meyer: so you need a lookup codepoint -> one cathegory?
[21:09:25] <doskey> eddyb, bvssvni: OK so how rust-y is this: http://pastebin.com/VfpNnkQw ? - I don't really like passing the self as an extra argument but it's not too bad.
[21:09:47] <bvssvni> meyer: so you need a tree that stores the intervals?
[21:10:01] <aatch> meyer, the best option would probably be the binary search tables kimundi mentioned.
[21:10:14] <meyer> kimundi: Looking at the document, there are only 20,000 or so codepoints that have a special reference, counting them all separately. That's tiny, so I can probably use a hash table instead
[21:10:27] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[21:10:43] <aatch> Basically you have [((lo, hi), value)]
[21:10:59] <meyer> I'm just trying to encode this: http://www.unicode.org/Public/UCD/latest/ucd/auxiliary/GraphemeBreakProperty.txt
[21:11:05] <kimundi> meyer: well its hard to get a complicated static data structure in Rust, so if it can be framed as static vector that makes things easier
[21:11:16] <bvssvni> meyer: what about doing binary search on a sorted vector?
[21:11:22] <meyer> But I think a simple hash table might be best, since the total number of non-"Other" characters is only 20000 or so
[21:11:41] <bvssvni> meyer: you can do binary search [start0, end0, start1, end1, ...]
[21:11:44] <meyer> bvssvni: That'd work.
[21:12:11] <bvssvni> meyer: I might have some code for that
[21:12:31] <aatch> meyer in std/unicode.rs there are tables that are actually *generated* from that format.
[21:12:51] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[21:13:33] <meyer> aatch: Thanks
[21:14:04] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Quit: Leaving...)
[21:14:15] *** Joins: nstdloop (nstdloop@moz-65256C41.hsd1.fl.comcast.net)
[21:14:38] *** Quits: Ms2ger (Ms2ger@6BCD8197.DF5CCC78.F15B0BB3.IP) (Quit: nn)
[21:14:43] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[21:15:03] <bvssvni> meyer: https://github.com/bvssvni/csharp-utils/blob/master/Utils/Objects/Group.cs#L851
[21:15:20] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[21:16:00] <meyer> bvssvni: Looks like there is already code for other similarly-done codepoint classification in std. 
[21:16:00] *** Quits: nstdloop (nstdloop@moz-65256C41.hsd1.fl.comcast.net) (Ping timeout)
[21:16:13] <bvssvni> meyer: ok
[21:17:03] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[21:17:09] <meyer> (for lower case / upper case and whatnot)
[21:20:22] *** Quits: mojoB_ (mojoB@moz-A4312114.static.exetel.com.au) (Ping timeout)
[21:20:53] *** Joins: ktt3ja (ktt3ja@moz-8D2A07E1.hsd1.va.comcast.net)
[21:21:04] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[21:21:15] <kimundi> meyer: yeah, the upper/lower one landed recently
[21:21:30] <kimundi> rusti: 'ä'.to_upper()
[21:21:32] -rusti- pastebinned 11 lines of output: http://sprunge.us/hJES
[21:21:35] <kimundi> rusti: 'ä'.to_uppercase()
[21:21:35] -rusti- Ä
[21:21:38] *** Joins: mojoB (mojoB@moz-A4312114.static.exetel.com.au)
[21:21:42] <bvssvni> meyer: btw, my search algorithm is [start, end), not [start, end]
[21:22:27] <meyer> bvssvni: I probably won't need to write anything new for classification. I'm just going to use the existing format in std/unicode.rs
[21:22:28] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[21:22:34] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[21:23:34] <Florob> meyer, just remember that this is generated by src/etc/unicode.py and should not be changed directly. But there should indeed by plenty of useful bsearch code in there for you ;)
[21:24:31] <meyer> Florob: I see that. Thanks for the heads up.
[21:25:07] *** Joins: lkuper (lkuper@moz-61339218.dyn.optonline.net)
[21:25:34] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[21:25:43] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[21:25:43] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[21:25:49] *** Quits: Palmik (palmik@moz-DEC2AB.pks.muni.cz) (Quit: Lost terminal)
[21:25:51] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[21:26:35] *** Quits: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch) (Ping timeout)
[21:26:44] <meyer> Is the eventual hope that CTFE + Rust's macros would make a python script like this unnecessary?
[21:27:32] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[21:27:53] <kimundi> meyer: should be possible in theory.
[21:28:11] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[21:28:16] <bvssvni> is it possible to ignore stuff like comments in macros?
[21:28:46] <kimundi> meyer: However, seeing how these tables rarely change, generating the code anew on each compile sounds like wasted time.
[21:29:15] *** Joins: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch)
[21:30:48] *** Quits: Titof (Titof@moz-EAAEA701.w81-248.abo.wanadoo.fr) (Quit: Titof)
[21:31:12] <meyer> kimundi: Sounds like something to fix with make / how dependencies are set up in the buildscript. I don't know how the code gen works, though. Is there an intermediate artifact output after macros are expanded?
[21:32:04] *** Parts: pepp (Mibbit@moz-A17B47F9.net.upcbroadband.cz) ()
[21:32:16] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[21:32:29] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[21:32:37] *** Quits: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch) (Ping timeout)
[21:32:47] <kimundi> meyer: For what, the python thing or the macro thing?
[21:33:16] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[21:34:02] <meyer> The macro thing. Make the macro-expanded file depend on the macro file, while depends on something which represents if the pages have been updated
[21:34:11] <meyer> *which
[21:34:13] <meyer> I mean
[21:34:53] <meyer> The Python script is fine, there is no reason to remove it, really.
[21:36:48] <bvssvni> anybody who wants to fix this? https://github.com/mozilla/rust/issues/12986
[21:37:45] *** Joins: guest22221 (guest2222@moz-1D2D613F.ga.at.cox.net)
[21:37:51] *** Quits: octeract (Mibbit@moz-D63AE93E.du.xdsl.is) (Quit: http://www.mibbit.com ajax IRC Client)
[21:37:55] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[21:38:09] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[21:38:13] <kimundi> meyer: Well Rusts macro system can't really express that inside the same crate I think. But a seperate unicode_table crate that std depends on, and the gets build once by make might do the trick, but I guess it would still get rebuild often enough that its no real time saver over a macro that just expands to these tables at every compile.
[21:38:35] *** Joins: krebbit (Mibbit@7E217F04.2C8DBE39.CC1A2609.IP)
[21:38:38] *** Quits: guest2222 (guest2222@58D73AF.F299E8.284344F5.IP) (Ping timeout)
[21:39:02] <kimundi> If a macro could permanently change a source file that would be another story, but I think one where we don't want to go ;)
[21:39:14] *** Quits: Rym (y@7E883303.78CA6893.8772DA20.IP) (Ping timeout)
[21:39:15] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[21:40:04] *** Joins: omnus (omnus@moz-2E009EE2.stny.res.rr.com)
[21:40:16] <kimundi> Actually, you could write a macro that changes a sourcefile today (procedural macros can run arbitrary code)- but it would be more effort than just making a standalone generator program.
[21:40:20] *** Joins: hdevalence (quassel@moz-D125A39F.home3.cgocable.net)
[21:40:56] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[21:40:57] <bvssvni> or rustc --pretty expand > source.rs?
[21:41:04] *** Joins: Rym (y@7E883303.78CA6893.8772DA20.IP)
[21:41:19] <meyer> kimundi: It'd also be a pain to deal with if the user has networking and whatnot. You'd probably want to explicitly download the source files for the unicode tables anyway, at which point you might as well have a separate generation script.
[21:41:30] *** Quits: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org) (Ping timeout)
[21:41:39] *** Quits: evanm (evanm@moz-4D6F9A00.hsd1.ca.comcast.net) (Ping timeout)
[21:41:43] <kimundi> yeah
[21:42:14] <meyer> It'd be neat to be able to do, though. Have all that expressed completely in Rust
[21:43:31] <kimundi> Okay, idea about the best way it could probably work:
[21:44:23] <kimundi> have a unicode_table!() macro that basically just includes a generated source file like the existing unicode.rs
[21:44:43] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[21:44:52] *** Quits: krebbit (Mibbit@7E217F04.2C8DBE39.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[21:45:14] <kimundi> but if you pass a configure flag, that macro regenerates a new version of the unicode.rs before including it.
[21:45:35] *** Joins: evanm (evanm@moz-4D6F9A00.hsd1.ca.comcast.net)
[21:46:01] <kimundi> make update-unicode => unicode.rs gets regenerated as part of the regular compilation, and can be commited
[21:46:36] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[21:46:41] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[21:47:36] *** Joins: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org)
[21:47:39] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[21:47:49] <meyer> (another question) To quickly look up if there is a break between a pair of characters of two types, I'm going to make an array of bools of length (# types)^2. Should I just not use enums at all, and have the generated unicode table use u8 like "combining_class"?
[21:48:03] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[21:48:20] <meyer> (or should I cast from enum to u8? Is there a way to guarantee that it'll be safe, or throw a warning if the enum ends up represented bigger or something?)
[21:49:07] *** Quits: hdevalence (quassel@moz-D125A39F.home3.cgocable.net) (Client exited)
[21:49:50] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[21:49:53] <andor> why are all the impls of some io things gone from the docs? here, for example http://static.rust-lang.org/doc/master/std/io/struct.BufferedReader.html
[21:49:58] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[21:51:15] <aatch> meyer, how many types are there?
[21:51:28] <meyer> 13
[21:51:49] <meyer> I doubt (though don't quote me) that Unicode will ever gain more than 256
[21:52:29] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[21:52:33] *** Joins: jviereck (Adium@moz-859307B0.dclient.hispeed.ch)
[21:52:34] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[21:52:36] <meyer> I'm planning to encode this in the array of bools: http://www.unicode.org/reports/tr29/#Grapheme_Cluster_Boundary_Rules
[21:53:00] <meyer> (div symbol is break, mul is join)
[21:53:17] <herrwolfe45> what is the recommended way to split file paths in rust? my goal is to strip the filename from its path
[21:54:46] <bvssvni> herrwolfe45: I believe there is a method for that
[21:54:56] <aatch> meyer, a 2D array of bools is what you want, then you can index using uint.
[21:55:10] <herrwolfe45> i'll look through std::path some more
[21:55:20] <herrwolfe45> i must have just skipped it somehow
[21:55:21] *** Quits: aurynj (Eon@C498BDEC.C264657C.C6282BC4.IP) (Ping timeout)
[21:55:21] <aatch> You can case from an enum of #[repr(u8)] to a uint no problem.
[21:55:47] *** Quits: [squiddy] (squiddy@moz-767EF079.dynamic.cablesurf.de) (Input/output error)
[21:55:52] <aatch> so you just have is_break[type_1][type_2]
[21:55:55] *** Quits: jviereck (Adium@moz-859307B0.dclient.hispeed.ch) (Quit: Leaving.)
[21:57:00] <bvssvni> herrwolfe45: http://static.rust-lang.org/doc/master/std/path/posix/struct.Path.html#method.filename ?
[21:57:08] <herrwolfe45> thanks!
[21:57:12] <meyer> aatch: Great. If I use fixed-size arrays, there won't be a second pointer dereference either, right? It'll be contiguous in memory. Where is that attribute for enums documented? 
[21:57:17] *** Quits: ahunt (ahunt@moz-9E6A804D.range86-150.btcentralplus.com) (Ping timeout)
[21:57:33] <aatch> meyer, I have no idea where it is documented sorry.
[21:57:51] <aatch> And if you use fixed size arrays, you are correct, there won't be any dereference.
[21:58:19] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[21:58:19] <aatch> rusti: std::mem::size_of::<[[bool,..13],..13]>()
[21:58:21] -rusti- 169
[21:58:24] *** Joins: adu (ajr@moz-FF5D4001.washdc.fios.verizon.net)
[21:58:27] *** Quits: adu (ajr@moz-FF5D4001.washdc.fios.verizon.net) (Quit: adu)
[21:58:29] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[21:58:31] *** Joins: guest2222 (guest2222@58D73AF.F299E8.284344F5.IP)
[21:58:38] <bvssvni> herrwolfe45: there is a filename_str too
[21:58:42] *** Quits: guest22221 (guest2222@moz-1D2D613F.ga.at.cox.net) (Connection reset by peer)
[21:58:56] *** Joins: guest22221 (guest2222@moz-1D2D613F.ga.at.cox.net)
[21:59:20] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[21:59:21] <aatch> 169 bytes (plus padding) is nothing. I guess you could drop it down by doing this though:
[21:59:41] <aatch> rusti: std::mem::size_of::<[u16,..13]>()
[21:59:42] -rusti- 26
[22:00:19] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[22:00:23] *** Quits: guest2222 (guest2222@58D73AF.F299E8.284344F5.IP) (Ping timeout)
[22:00:28] <meyer> Where the bits in the u16 are the second dimension?
[22:00:29] <aatch> and using the bits set in the u16. Probably not worth the computational complexity though.
[22:00:39] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[22:00:44] *** Joins: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se)
[22:01:06] *** Joins: dotfelix (felix@4DB81C3F.AB3AC796.40E092AA.IP)
[22:01:24] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[22:01:30] <meyer> I'd profile that before using it. 169 bytes is nothing
[22:01:50] <aatch> meyer, exactly. I just enjoy thinking about optimizations
[22:02:18] *** Quits: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP) (Quit: This computer has gone to sleep)
[22:02:26] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[22:02:45] *** Quits: evanm (evanm@moz-4D6F9A00.hsd1.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[22:02:51] <meyer> aatch: Always good. 
[22:03:04] <meyer> It'd be nice if there was a standard pattern for providing a macro to make a literal version of a data structure
[22:03:37] <meyer> Like vec!(), but also for HashMap, TreeMap, bitset, etc
[22:03:44] <aatch> In theory, you can drop it down a bit more to 22 bytes, but thats just being silly since padding would bring that up to 32 bytes of effective memory anyway
[22:04:13] <meyer> aatch: And if it wasn't byte-aligned, computing offsets would be more work
[22:04:56] <aatch> meyer, yeah, a 2d array almost certainly compiles down to a mul and a load
[22:05:03] <meyer> Vec<bool> isn't specialized to being bit-packed, is it?
[22:05:07] <pongad> Is there any unit test for lints?
[22:05:08] <aatch> meyer, nope
[22:05:24] <aatch> mostly because we can't do specialisation.
[22:05:53] <SiegeLord> I wonder if Clang can tell that a size_t is a size_t and not merely an unsigned int or w/e
[22:05:57] <Matthias247> meyer: hopefully. That's one of the most stupidest things in the c++ stdlib
[22:06:59] <aatch> There is a bitv datastructure in libcollections
[22:07:39] *** Joins: evanm (evanm@moz-4D6F9A00.hsd1.ca.comcast.net)
[22:09:12] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[22:09:35] *** Joins: Valloric (Valloric@moz-288722BA.hsd1.ca.comcast.net)
[22:11:01] <bvssvni> meyer: perhaps you can use this? http://static.rust-lang.org/doc/master/collections/enum_set/struct.EnumSet.html
[22:11:34] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[22:11:54] <Valloric> could someone explain why my macro is failing? https://gist.github.com/Valloric/4b5d6a7bf4ef630b3f3c
[22:12:03] <meyer> bvssvni: I'm going to use the #[repr(u8)] + a normal enum, and then a [[bool, ..13], ..13], I think.
[22:12:08] <Valloric> I get “macro expansion ignores token …”
[22:12:39] <zwarich> SiegeLord: it's pretty tough to do anything different than treating size_t like a specific integer type, since platform ABIs generally require it
[22:13:09] <SiegeLord> Ideally it'd convert it to uint
[22:13:26] <SiegeLord> But looking at how it's all implemented, it doesn't appear that that information is available
[22:15:02] <bvssvni> Valloric: [u8]?
[22:15:03] *** Joins: nstdloop (nstdloop@moz-65256C41.hsd1.fl.comcast.net)
[22:15:31] <Valloric> bvssvni: yeah… I’m not sure what you’re asking
[22:15:58] <bvssvni> Valloric: just curious, does it turn into a [u8, ..n]?
[22:16:05] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[22:16:07] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[22:16:24] <Valloric> no, it’s supposed to generate this:  static input: &'static [u8] = bytes!( "foo" );
[22:16:30] *** Joins: Guest_ (textual@3E0487DF.D8252BC.9532F1CE.IP)
[22:16:39] <Valloric> given  byte_vars!( input = "foo"; );
[22:16:48] *** Quits: nstdloop (nstdloop@moz-65256C41.hsd1.fl.comcast.net) (Ping timeout)
[22:17:04] <bvssvni> Valloric: yeah, I get that
[22:17:06] <Valloric> I’m trying to cut down on some boilerplate with the macro
[22:17:42] *** Quits: eternaleye (eternaleye@D55ECA0A.3FAF8C6D.B8C1C2E1.IP) (Ping timeout)
[22:17:48] *** Joins: lucian_ (lucian@moz-8408FDFA.cable.virginm.net)
[22:17:52] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[22:17:56] <kimundi> Valloric: What rust version are you using?
[22:18:01] <bvssvni> Valloric: try { } instead of ( ) to wrap the macro body
[22:18:04] <Valloric> kimundi: latest nightly
[22:18:08] *** Joins: Aetherspawn_BNC (uid6924@moz-31ABA2C0.irccloud.com)
[22:18:23] <kimundi> okay, then its definitly not the only-one-statement thing...
[22:18:26] <Aetherspawn_BNC> vadimcn: around?
[22:18:27] <bvssvni> Valloric: after the =>
[22:18:33] <Aetherspawn_BNC> cmr: around?
[22:18:50] <Aetherspawn_BNC> Does anyone know what the prefix url for snapshots are
[22:18:57] <Aetherspawn_BNC> if I wanted to download a snapshot by hand
[22:19:04] <Valloric> bvssvni: replacing => (…) with => {…} gives the same error
[22:19:11] *** Joins: eternaleye (eternaleye@D55ECA0A.3FAF8C6D.B8C1C2E1.IP)
[22:19:33] *** Quits: lucian_ (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[22:20:23] *** Quits: Guest_ (textual@3E0487DF.D8252BC.9532F1CE.IP) (Ping timeout)
[22:21:27] <bvssvni> Valloric: could it be the ; after the macros?
[22:21:47] <Valloric> which ;?
[22:21:58] *** Quits: Rym (y@7E883303.78CA6893.8772DA20.IP) (Ping timeout)
[22:22:03] <bvssvni> after byte_vars!();
[22:22:37] <Valloric> tried removing, same error
[22:22:46] *** Joins: flabbergaster (Mibbit@moz-78317ED0.dc.dc.cox.net)
[22:23:53] <bvssvni> Valloric: I'll check after finished compiling
[22:24:06] <Valloric> bvssvni: thank you
[22:24:13] <flabbergaster> hey -- trying to sort an array of strings; I found documentation for "extra::sort", which doesn't seem to exist in master...?
[22:24:39] <Valloric> flabbergaster: libextra was split apart AFAIK
[22:24:58] <Valloric> flabbergaster: so the code is still… somewhere, just not in that place probably
[22:25:28] <flabbergaster> Okay, what's the best strategy to find it (other than bugging you guys :-) )?
[22:25:56] <flabbergaster> Should i look in TWiR?  I seem to remember extra mentioned there.
[22:26:29] <Valloric> flabbergaster: I found two sort methods; first: http://static.rust-lang.org/doc/master/std/slice/trait.MutableTotalOrdVector.html#tymethod.sort
[22:26:46] <Valloric> flabbergaster: second: http://static.rust-lang.org/doc/master/std/vec/struct.Vec.html#method.sort
[22:26:51] *** Quits: doskey (Mibbit@687DFD4C.AC4EEB5A.9E22F775.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:27:00] *** Quits: q66 (q66@moz-6F2D224B.range109-157.btcentralplus.com) (Ping timeout)
[22:27:25] <Valloric> one of them should probably work for you
[22:27:32] <flabbergaster> Cool, thanks!  I was googling the wrong site... I'll check static.rust-lang.org in the future.
[22:27:59] *** Quits: [o__o] (~o__o@604A2740.DB688352.F4ADE383.IP) (Input/output error)
[22:28:00] <Valloric> flabbergaster: pages on static.rust-lang.org also have a search bar at the top
[22:28:10] *** Joins: [o__o] (~o__o@604A2740.DB688352.F4ADE383.IP)
[22:28:10] <Valloric> it works great
[22:29:19] <flabbergaster> d'oh
[22:29:49] *** Quits: nomadic (nomadic@moz-E01D5C49.hsd1.ga.comcast.net) (Quit: Leaving)
[22:31:29] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[22:31:48] *** Joins: cschneid (cschneid@moz-621ACC77.hlrn.qwest.net)
[22:32:52] <Valloric> bvssvni: I think I’ve found the root of the macro issue. From the macro guide: “A macro invocation may take the place of (and therefore expand to) an expression, an item, or a statement.”
[22:33:02] <Valloric> so I don’t think I can generat multiple statements
[22:33:04] <Valloric> sad...
[22:33:14] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[22:33:24] <aatch> Valloric, ah, yes. You cannot expand to multiple expressions or statements.
[22:33:38] <bvssvni> ah
[22:33:43] <aatch> However, you can wrap them in a block, so it's still actually just 1 expression/statement anyway
[22:33:47] <meyer> When using #[repr(u8)] for an enum, how do I explicitly assign values to variants? Or can I just assume that they start at 0 and go up?
[22:33:50] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[22:33:59] <Valloric> aatch: but then my var decls aren’t visible outside the block
[22:34:03] <bvssvni> but he is declaring static
[22:34:09] <aatch> Valloric, ah, yes that is an issue
[22:34:10] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[22:34:57] <sellout> Valloric: can your macro take a `body` parameter – for the code you want the vars to be in scope for?
[22:35:18] <Valloric> sellout: how would that work?
[22:35:34] <aatch> Valloric, the var decls wouldn't be visible outside the macro anyway because of hygiene
[22:35:52] <Valloric> aatch: good catch
[22:36:07] <Valloric> aatch: so no way to simplify var decls with macros?
[22:36:14] <sellout> Valloric: I haven’t use Rust macros at all … but in other languages, you would effectively pass a block in to be part of the expansion.
[22:36:18] <bvssvni> Valloric: kimundi works around this by using structs https://gist.github.com/Kimundi/8782487
[22:36:20] <aatch> Valloric, no sorry.
[22:36:24] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[22:36:34] <Valloric> aatch: thanks, at least I can stop wasting my time now :)
[22:36:42] <Aetherspawn_BNC> hi aatch 
[22:36:55] <aatch> Aetherspawn_BNC, hi
[22:36:57] <SiegeLord> Why does hygiene affect variable declarations, but not type names?
[22:37:00] <Valloric> bvssvni: I’ll take a look, thanks
[22:37:24] <aatch> SiegeLord, types are items and it doesn't affect items.
[22:37:39] <SiegeLord> I mean... conceptually
[22:37:58] <Aetherspawn_BNC> is it a bad thing if I group together some of the windows stuff in configure?
[22:38:08] <bvssvni> Valloric: seems like if you add a dummy struct between each statement, it will work :P
[22:38:11] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[22:38:11] <Aetherspawn_BNC> There's a note here "FIXME: Thise needs to parameterized over target triples. Do it in platform.mk"
[22:38:22] <Aetherspawn_BNC> but now that theres 2 windows triples... things are sketchy
[22:38:39] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[22:38:42] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[22:38:43] <aatch> SiegeLord, I don't know the the details, but I think it's different for item macros vs other macros.
[22:38:51] <Aetherspawn_BNC> I've done this, but I feel like I'm going to get yelled at for doing so? https://gist.github.com/kvanberendonck/9730939
[22:39:04] <SiegeLord> Hygiene seems like a double edged sword
[22:39:28] <SiegeLord> I don't think procedural macros are required to respect it though, right?
[22:39:50] <SiegeLord> Somewhat of a pain to go that route just to avoid hygiene
[22:40:08] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[22:40:44] *** Quits: dotfelix (felix@4DB81C3F.AB3AC796.40E092AA.IP) (Ping timeout)
[22:41:01] <eibwen> cmr: will there be a This Week in Rust this week?
[22:41:57] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[22:43:16] <Valloric> aatch: would you know how one imports macros from other modules?
[22:43:26] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[22:43:33] <Valloric> they don’t seem to respect “use” statements
[22:43:42] <aatch> Valloric, use #[macro_escape] on the macro, then import the containing module
[22:44:04] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[22:44:19] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[22:44:26] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[22:44:35] *** Joins: jviereck (Adium@moz-859307B0.dclient.hispeed.ch)
[22:44:36] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[22:44:51] *** Aetherspawn_BNC is now known as kvanb
[22:45:04] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[22:45:05] <SiegeLord> Is that how it works? I thought you annotated the module with the macro with #[macro_escape] and this made the macro available to module siblings and below
[22:45:10] <Valloric> aatch: didn’t seem to work… added #[macro_escape] above the macro decl and tried to import the name with “use” in a different module
[22:45:37] *** Joins: leowoe (Leo@moz-9AE46036.dip0.t-ipconnect.de)
[22:45:38] <aatch> Valloric, you can't import the macro directly. Just import the module.
[22:46:30] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[22:46:30] <sfackler> you don't even need to import the module
[22:46:39] <Valloric> aatch: still doesn’t work… 
[22:46:43] <sfackler> #[macro_escape] just pushes the definition up one level
[22:46:55] <aatch> Oh
[22:46:58] <SiegeLord> So do you annotate the macro or the module?
[22:47:03] <sfackler> module
[22:47:05] <SiegeLord> I just have module annotations
[22:47:09] <aatch> Oh dammit.
[22:47:21] <aatch> I know this language, honest.
[22:47:31] <sfackler> annotating a module with #[macro_escape] says that macro definitions should escape from that module to the next one up
[22:47:45] <SiegeLord> It'd be nice if you could import macros instead of this macro_escape mechanism
[22:48:09] <SiegeLord> Not necessarily through use statements or anything, but with a different attribute with different semantics
[22:48:15] <sfackler> it would be
[22:48:29] <SiegeLord> Like #[macro_import=foo::bar]
[22:48:31] <sfackler> macro_escape is a huge hack
[22:48:50] <SiegeLord> That'd grab the macros from module foo::bar
[22:49:09] <SiegeLord> Oh, I had a question about that...
[22:49:15] <SiegeLord> Macros shadow each other, right?
[22:49:27] <sfackler> yeah
[22:49:30] <SiegeLord> Or rather, is the precedence predictable?
[22:49:34] *** Quits: flabbergaster (Mibbit@moz-78317ED0.dc.dc.cox.net) (Quit: http://www.mibbit.com ajax IRC Client)
[22:49:50] <sfackler> yeah, it's lexical order
[22:49:57] <sfackler> basically depth first, top to bottom
[22:50:10] <SiegeLord> I see
[22:50:27] *** Quits: pongad (pongad@moz-7E8AAD2E.res.gatech.edu) (Quit: Leaving)
[22:50:42] <Valloric> sfackler: thanks for the explanation
[22:50:49] <SiegeLord> Maybe it's even best to include! macros at this time
[22:51:02] <SiegeLord> That seems to work more nicely (I don't know if it works for sure)
[22:51:10] <sfackler> it should definitely work
[22:51:17] <sfackler> or, if it doesn't, it's a bug
[22:51:22] *** Quits: Ferreus (ferreus@moz-58E71689.lsn.wtnet.de) (Quit: WeeChat 0.4.4-dev)
[22:51:49] <sfackler> I really want to get macros to work just like anything else wrt resolve but that'll be a huge undertaking
[22:52:27] *** Joins: Guest_ (textual@3E0487DF.D8252BC.9532F1CE.IP)
[22:52:31] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[22:53:35] *** Quits: omnus (omnus@moz-2E009EE2.stny.res.rr.com) (Ping timeout)
[22:54:31] *** Quits: paraze (paraze@moz-96380A71.w86-209.abo.wanadoo.fr) (Quit: bb)
[22:54:51] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[22:56:24] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Quit: Leaving)
[22:56:52] *** Joins: clusterfoo (Mibbit@moz-F8B381B4.hm.shawcable.net)
[22:58:01] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Quit: )
[22:58:42] <meyer> Writing all this true, true, true, false, true, true by hand is giving me that feeling that "true" shouldn't be spelling the way it is
[22:58:49] <meyer> t-rue
[22:59:17] <aatch> meyer, semantic satiation
[22:59:28] *** Quits: cschneid (cschneid@moz-621ACC77.hlrn.qwest.net) (Client exited)
[22:59:28] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[22:59:34] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[23:00:18] <bvssvni> true, !true, true, true, !true
[23:00:23] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[23:00:26] <Earnestly> aatch: Finally, a word for it, thanks \o/
[23:00:36] *** Quits: jviereck (Adium@moz-859307B0.dclient.hispeed.ch) (Quit: Leaving.)
[23:00:54] <aatch> i started to get it with SIMD
[23:00:55] *** Quits: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org) (Ping timeout)
[23:01:07] *** Quits: nical (nico@DA4ABEAF.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[23:01:16] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[23:01:17] *** Joins: jviereck (Adium@moz-859307B0.dclient.hispeed.ch)
[23:01:45] *** Quits: twi (Adium@moz-ED056769.cust.vodafonedsl.it) (Quit: Leaving.)
[23:02:04] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[23:02:49] <Earnestly> It happens pretty quick with "owe"
[23:03:00] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[23:04:25] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[23:04:29] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[23:05:15] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[23:06:11] <SiegeLord> Hmm... it'd be neat if you were forced to cast between C types and Rust types
[23:07:10] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[23:07:29] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[23:09:25] <SiegeLord> Specifically, c_int might change size depending on what system you're in
[23:09:32] <SiegeLord> A bit more realistic with c_long though...
[23:11:06] <kvanb> I think the arch representation of any integer types
[23:11:17] <kvanb> would be to represent them as i/u<n>
[23:11:19] <kvanb> including bools
[23:11:44] <kvanb> typedef u1 bool; bool x = 3 // = 1.
[23:11:56] <kvanb> true :: u1; true = 1. etc
[23:11:56] <SiegeLord> Well the point is that it'd be nice to have some guarantee of my code compiling on 32 bits if it compiled on 64
[23:12:22] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[23:12:26] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[23:12:32] <SiegeLord> You can't go from int to i32/i64 without a cast, but you can from c_long
[23:12:43] *** Quits: jmgrosen (user@moz-848F6087.sb.sd.cox.net) (Ping timeout)
[23:12:43] <SiegeLord> (depending on what c_long happens to be)
[23:12:44] <kvanb> requiring a cast would indeed be ideal.
[23:13:19] <SiegeLord> Either way, it's a bit trick to do proper typedef's
[23:13:20] <kvanb> some kind of type barrier (I think they are called opaque/phantom types?) would be suffice.
[23:13:21] <SiegeLord> *tricky
[23:13:34] <SiegeLord> Maybe newtype'd structs would be ok
[23:13:43] *** Joins: nstdloop (nstdloop@moz-65256C41.hsd1.fl.comcast.net)
[23:13:48] <SiegeLord> Since you're not likely to want to do any math with C types anyway
[23:13:49] *** Quits: clusterfoo (Mibbit@moz-F8B381B4.hm.shawcable.net) (Quit: http://www.mibbit.com ajax IRC Client)
[23:14:02] <SiegeLord> Toss them into the Rust type asap and carry on
[23:14:18] <SiegeLord> Oh well
[23:14:23] *** Quits: Guest_ (textual@3E0487DF.D8252BC.9532F1CE.IP) (Ping timeout)
[23:14:24] <kvanb> got to be careful you don't make ffi struct marshalling a huge pita
[23:14:33] *** Quits: gregburd (uid3997@moz-E77DEB21.irccloud.com) (Quit: Connection closed for inactivity)
[23:14:35] <kvanb> working with C types cannot be annoying.
[23:14:37] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[23:14:39] <SiegeLord> Would it be safe to go from &[(int, int)] to *int?
[23:14:59] <kvanb> I don't actually /really/ know rust, I'm just hacking the build system...
[23:15:24] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[23:15:36] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[23:16:11] *** Quits: nstdloop (nstdloop@moz-65256C41.hsd1.fl.comcast.net) (Input/output error)
[23:16:33] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[23:16:44] *** Joins: nstdloop (nstdloop@moz-65256C41.hsd1.fl.comcast.net)
[23:17:48] *** Quits: arturo (Thunderbir@moz-E83B14F0.superkabel.de) (Ping timeout)
[23:18:21] *** Quits: jviereck (Adium@moz-859307B0.dclient.hispeed.ch) (Quit: Leaving.)
[23:18:38] *** Quits: nstdloop (nstdloop@moz-65256C41.hsd1.fl.comcast.net) (Ping timeout)
[23:19:12] <kvanb> I feel uneasy about the build system when I sleep/unsleep my laptop..
[23:19:28] *** Joins: masonl (masonl@AE7AAB74.497EC1B8.5EFB9497.IP)
[23:19:33] *** Joins: paraze (paraze@moz-96380A71.w86-209.abo.wanadoo.fr)
[23:20:22] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[23:20:31] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[23:20:35] *** Quits: ChrisOei (ChrisOei@moz-30D80888.hsd1.ca.comcast.net) (Client exited)
[23:20:39] *** Quits: paraze (paraze@moz-96380A71.w86-209.abo.wanadoo.fr) (Quit: rust is the best, <censored> the rest :D)
[23:21:29] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[23:21:48] *** flaper87 is now known as flaper87|afk
[23:24:19] *** Joins: Guest (textual@3E0487DF.D8252BC.9532F1CE.IP)
[23:26:11] *** Joins: jensnock_ (jensnocker@moz-33279404.customers.ownit.se)
[23:28:01] *** Quits: jensnock_ (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[23:29:27] *** Quits: alkino_ (alkino@moz-AAF51602.w92-151.abo.wanadoo.fr) (Ping timeout)
[23:30:34] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[23:31:53] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Ping timeout)
[23:32:23] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[23:33:19] <kimundi> SiegeLord: What do you mean?
[23:33:39] <SiegeLord> Which part?
[23:33:52] <kimundi> SiegeLord: &[(int, int)] -> *int
[23:33:53] <SiegeLord> Also... something changed in rustdoc and broke my beatufil CSS
[23:34:13] <SiegeLord> Well, literally slice.as_ptr() as *int
[23:34:17] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[23:34:18] *** Quits: enos (jkingyens@moz-B0C1B161.hsd1.ca.comcast.net) (Quit: enos)
[23:34:27] *** Quits: io2 (io2@moz-EE406A5.home.otenet.gr) (Quit: )
[23:34:36] <SiegeLord> In fact, somebody broke Rust documentation without javascript
[23:34:38] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[23:35:08] <kimundi> SiegeLord: Well, its safe to do that, or else you couldn't do that cast in safe code. The question is what you're going to do with it.
[23:35:20] <SiegeLord> Pass it to a C function
[23:35:24] <kimundi> Creating a *int is not unsafe. dereferencing it is
[23:35:56] <kimundi> So if you know the c function only reads it, and know that its the right size the C function expects, all is fine
[23:36:07] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[23:36:40] <SiegeLord> Looks like the CSS file location changed... that's good
[23:37:10] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[23:37:48] <SiegeLord> Wait, I don't get it
[23:38:00] <SiegeLord> The javascript stuff is now placed in the doc directory
[23:38:11] *** Joins: aurynj (Eon@C498BDEC.C264657C.C6282BC4.IP)
[23:38:16] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[23:38:17] <SiegeLord> But what if you have multiple crates?
[23:38:56] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[23:38:58] *** Quits: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se) (Quit: mediocrity)
[23:39:10] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[23:39:13] <SiegeLord> The search index seems to contain stuff from all the crates, somehow
[23:39:22] <eddyb> huh?
[23:39:28] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[23:39:33] <SiegeLord> But that makes no sense, unless the crate documentation is hosted in the same location
[23:39:36] <eddyb> I thought that didn't work yet
[23:40:04] *** Joins: brson (brson@moz-62518563.mtv2.mozilla.com)
[23:40:05] *** ChanServ sets mode: +ao brson brson
[23:40:20] *** Quits: Matthias247 (Miranda@moz-678B5E4A.hsi2.kabel-badenwuerttemberg.de) (Connection reset by peer)
[23:40:44] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[23:41:13] <SiegeLord> It's... very strange
[23:41:23] <SiegeLord> It completely breaks rust-ci documentation hosting
[23:42:28] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[23:42:34] *** Joins: Rym (y@C5DDBC24.DE104CC8.51C6DE68.IP)
[23:42:38] <eddyb> SiegeLord: ohh I see
[23:42:52] <SiegeLord> So I think it should work fine if rust-ci fixes its script
[23:42:53] *** Quits: pepper_chico (pepper_chi@BE2968B5.6F4A2706.E4090502.IP) (Ping timeout)
[23:42:57] <eddyb> I didn't realize that worked now
[23:43:07] <SiegeLord> But I do need to fix my CSS file location
[23:43:25] <SiegeLord> Still, I'm not super happy that the documentation now needs javascript for the sidebar to work
[23:43:44] <eddyb> why no search bar here? http://static.rust-lang.org/doc/master/index.html
[23:44:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[23:44:17] *** Joins: pepper_chico (pepper_chi@BE2968B5.6F4A2706.E4090502.IP)
[23:44:27] <SiegeLord> But I'll live... I suppose the combined search is useful
[23:44:46] <SiegeLord> Although, I don't think you need javascript to get the sidebar working
[23:44:51] <SiegeLord> In principle, at least
[23:44:58] <SiegeLord> It's just a static list of crates
[23:45:30] <Earnestly> It's a bit irritating, yeah, oh well
[23:46:32] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[23:47:18] *** Joins: nstdloop (nstdloop@moz-65256C41.hsd1.fl.comcast.net)
[23:49:00] *** Quits: nstdloop (nstdloop@moz-65256C41.hsd1.fl.comcast.net) (Ping timeout)
[23:52:09] *** Quits: canhtak (canhtak@moz-1300C4D7.wl.t.ulaval.ca) (Quit: canhtak)
[23:52:31] *** Quits: skade (skade@moz-1EC0F118.pools.arcor-ip.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[23:53:45] <meyer> rusti: (1, 2, 3,)
[23:53:48] -rusti- (1, 2, 3)
[23:54:01] <meyer> rusti: [1, 2, 3, 4,]
[23:54:02] -rusti- pastebinned 8 lines of output: http://sprunge.us/XIDg
[23:54:43] *** Joins: enos (jkingyens@moz-E6FB95AC.lightspeed.sntcca.sbcglobal.net)
[23:56:59] *** Quits: eternaleye (eternaleye@D55ECA0A.3FAF8C6D.B8C1C2E1.IP) (Ping timeout)
[23:57:34] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[23:59:21] *** Quits: brson (brson@moz-62518563.mtv2.mozilla.com) (Client exited)
