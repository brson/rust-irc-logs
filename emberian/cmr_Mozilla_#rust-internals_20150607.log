[00:00:00] *** Quits: aksjdhgfkajh (Mibbit@moz-6ujaf4.pppoe.mtu-net.ru) (Quit: http://www.mibbit.com ajax IRC Client)
[00:00:26] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Connection closed)
[00:04:41] *** Quits: zmike (discomfitor@moz-oek0ra.ct.comcast.net) (Ping timeout: 121 seconds)
[00:07:58] *** Quits: James (quassel@moz-8qs8a3.range86-148.btcentralplus.com) (Ping timeout: 121 seconds)
[00:10:24] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[00:10:56] *** Quits: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se) (Ping timeout: 121 seconds)
[00:14:22] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[00:15:22] *** bkoropoff_ is now known as bkoropoff
[00:17:22] *** Joins: zmike (discomfitor@moz-94l.v53.167.208.IP)
[00:27:08] *** Quits: ytain (ytain@moz-l74f7c.dsl.teksavvy.com) (Quit: Textual IRC Client: www.textualapp.com)
[00:35:13] *** Joins: Kingsquee (kingsley@moz-p5n.0o3.20.154.IP)
[00:49:42] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[00:54:09] *** Joins: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu)
[00:54:14] *** Quits: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu) (Connection closed)
[00:54:38] *** Joins: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu)
[00:59:28] *** Joins: Barca (Mibbit@moz-j9a.ns7.133.129.IP)
[01:00:28] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[01:02:28] *** Quits: mib_is2qcf (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[01:06:03] *** Quits: Barca (Mibbit@moz-j9a.ns7.133.129.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[01:06:55] <bkoropoff> eddyb: I have some monotonically-growing vector prototypes that seem promising
[01:07:23] *** Quits: ashish (ashish@irc.mozilla.org) (Connection closed)
[01:07:23] *** Quits: gavin (gavin@irc.mozilla.org) (Error in the push function.)
[01:07:23] *** Quits: nmatsakis (nmatsakis@moz-no0.93r.245.63.IP) (Connection closed)
[01:07:23] *** Quits: sunfish (sunfish@moz-no0.93r.245.63.IP) (Error in the push function.)
[01:07:48] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[01:09:26] *** Quits: capella-s3 (capella-s3@moz-vcqob4.res.rr.com) (Ping timeout: 121 seconds)
[01:09:34] *** Joins: nmatsakis (nmatsakis@moz-no0.93r.245.63.IP)
[01:09:34] *** ChanServ sets mode: +o nmatsakis
[01:09:58] *** Joins: gavin (gavin@irc.mozilla.org)
[01:11:57] *** Joins: capella-s3 (capella-s3@moz-vcqob4.res.rr.com)
[01:13:17] <eddyb> bkoropoff: allowing safe references into the old elements of the vector?
[01:13:30] <eddyb> and push with &self?
[01:32:03] *** Quits: larsberg (sid89@moz-1a60qu.0j4i.jtu0.0101.2620.IP) (Quit: )
[01:41:20] <bkoropoff> eddyb: yeah
[01:42:06] <bkoropoff> eddyb: I also have a hetergenous version that allows you to push different types and iterate over an erased type (e.g. a trait reference)
[01:42:20] <eddyb> bkoropoff: cc me and nmatsakis if you put them up somewhere :D
[01:42:22] <bkoropoff> eddyb: and typed/untyped arenas based on them
[01:42:28] <eddyb> hmm
[01:42:41] <eddyb> have you tried writing a FIFO queue for erased types?
[01:42:56] <eddyb> it should be possible now with <Trait: ?Sized, T: Unsize<Trait>>
[01:43:43] <eddyb> your heterogenous version does sound like that, but have you used the Unsize trait, or do you have some hacky replacement?
[01:43:54] <bkoropoff> I used CoerceUnsized
[01:44:35] *** Joins: elif (chatzilla@moz-ev8m1p.res.rr.com)
[01:44:38] <bkoropoff> I'll see if just Unsize works
[01:45:01] <eddyb> well, CoerceUnsized is part of the same feature, so you are doing it right, it's just more cumbersome
[01:45:24] <eddyb> with T: Unsize<Trait> you can do anything DST-ish
[01:45:47] <eddyb> including Rc::new(RefCell::new(x)): Rc<RefCell<Trait>>
[01:46:11] <bkoropoff> yeah, Unsize is cleaner
[01:46:18] <eddyb> \o/
[01:46:52] <eddyb> bkoropoff: you're building some stuff I've wanted to see around for like a year now. and I'm sure I'm not alone (in the gamedev community, in particular)
[01:47:06] <bkoropoff> I can do `where T: Unsize<U>` instead of `where for<'a> &'a T: CoerceUnsized<&'a U>`
[01:47:23] <bkoropoff> thanks for the tip, I hadn't looked at the final DST spec too carefully
[01:47:46] <eddyb> I am glad you've put it to use
[01:48:23] <bkoropoff> I'm using a phantom type to parameterize my heterogeneous vector over an erasure strategy, where unsized coercion is the default
[01:48:44] <bkoropoff> but you can define your own by defining a dummy type and implementing a trait
[01:48:46] <eddyb> so, what about the FIFO queue? is it one of them?
[01:48:52] *** Quits: davebettin (textual@moz-acc.cl4.35.72.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[01:48:56] <bkoropoff> I haven't looked at anything other than vec so far
[01:49:00] <eddyb> because you can put the unsizing data before the element and quickly query things
[01:49:06] <bkoropoff> I'd also like to have a hash table
[01:49:35] <eddyb> so you can store different types in the same ring buffer without indirection
[01:49:39] *** Quits: c74d (c74d3a4ebb6@moz-0ersgu.oc.cox.net) (Connection closed)
[01:50:25] <bkoropoff> Oh yeah, one cool thing I have is that MonoVec<u8> implements Write, and it also has a format() method that takes a fmt::Arguments and returns a &str of the result
[01:50:32] *** Joins: c74d (c74d3a4ebb6@moz-0ersgu.oc.cox.net)
[01:50:35] *** Joins: davebettin (textual@moz-acc.cl4.35.72.IP)
[01:50:52] <eddyb> have you seen how fmt::Write lets you write directly to a String?
[01:51:33] <bkoropoff> yeah, the interesting part is the format() method, which guarantees the result is contiguous
[01:51:41] <bkoropoff> so it can return a slice
[01:52:22] <bkoropoff> I need to sprinkle some preliminary comments around and throw this on github
[01:58:37] *** Quits: joh (uid13099@moz-2c7ap3.ealing.irccloud.com) (Quit: Connection closed for inactivity)
[01:59:07] <bkoropoff> ah, I can use drop_in_place now instead of ptr::read
[01:59:25] <eddyb> s/can/have to
[02:00:15] <bkoropoff> for unsized types, yeah, but in my case I know the size where I need to drop it
[02:04:03] *** Joins: nicknikolov (nicknikolov@moz-7ep.6g7.220.90.IP)
[02:07:09] <bkoropoff> How would a FIFO work?  You can peek but you have to relinquish all borrow to pop an element?
[02:07:33] *** Quits: Havvy (Havvy@moz-2v0ao2.5euu.k9bm.0007.2601.IP) (Quit: Leaving)
[02:07:41] <eddyb> guess so
[02:08:05] *** Quits: nicknikolov (nicknikolov@moz-7ep.6g7.220.90.IP) (Ping timeout: 121 seconds)
[02:08:10] <eddyb> can also iterate in one direction
[02:08:29] <bkoropoff> A stack could also work that way
[02:09:02] <eddyb> yes, it's bidirectional that's hard
[02:09:25] <eddyb> or rather, requires one more usize after the data, containing the length
[02:11:35] <bkoropoff> Yeah.  If you don't mind limiting objects to 4GB, you could use 32-bit lengths, which might end up filling what would otherwise be padding
[02:12:52] <bkoropoff> You could allow popping with hetergeneous vecs by giving the user a Box :)
[02:14:07] <bkoropoff> I guess you could also transfer it into another vec
[02:14:24] <bkoropoff> or hook in to a placement box mechanism when we get one
[02:25:09] *** Joins: c74d3 (c74d3a4ebb6@moz-3tkm7g.mggc.hibn.4404.2002.IP)
[02:26:29] *** Quits: c74d (c74d3a4ebb6@moz-0ersgu.oc.cox.net) (Ping timeout: 121 seconds)
[02:27:09] *** c74d3 is now known as c74d
[02:27:10] *** Joins: skeuomorf (skeuomorf@moz-d3l.n1e.32.197.IP)
[02:32:15] *** Joins: mib_ciaf3i (Mibbit@moz-juv.9o3.252.72.IP)
[02:35:11] *** Quits: mib_ciaf3i (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[02:43:03] *** Joins: nham (nham@moz-lglsfe.il.comcast.net)
[02:50:23] *** Quits: koobs (koobs@moz-lu0tvm.internode.on.net) (Client exited)
[02:58:04] *** Quits: zz_kimundi (kimundi@moz-dnib7h.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[02:59:34] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[03:01:07] *** Joins: zz_kimundi (kimundi@moz-qrrgd6.dip0.t-ipconnect.de)
[03:01:09] *** zz_kimundi is now known as kimundi
[03:05:02] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Ping timeout: 121 seconds)
[03:05:43] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[03:08:13] *** Quits: davebettin (textual@moz-acc.cl4.35.72.IP) (Connection closed)
[03:10:50] *** Joins: avikpal (avikpal@moz-2hi.cvs.194.117.IP)
[03:16:49] <bkoropoff> No thanks github, I'm not calling my repo turnt-dubstep
[03:19:53] <bkoropoff> eddyb: https://github.com/bkoropoff/monotonic
[03:20:44] <bkoropoff> eddyb: it's still incomplete, undocumented, barely tested, etc.
[03:22:08] *** Joins: summerlight (summerlight@moz-99k.2mj.130.121.IP)
[03:27:37] *** Joins: semarie (semarie@moz-egq1an.kimsufi.com)
[03:28:27] *** Joins: koobs (koobs@moz-lu0tvm.internode.on.net)
[03:29:31] *** Joins: annodomini (lambda@moz-qgii5v.ma.comcast.net)
[03:29:35] *** Quits: avikpal (avikpal@moz-2hi.cvs.194.117.IP) (Connection closed)
[03:29:35] *** Quits: annodomini (lambda@moz-qgii5v.ma.comcast.net) (Client exited)
[03:32:16] *** Joins: c74d3 (c74d3a4ebb6@moz-0ersgu.oc.cox.net)
[03:34:08] *** Quits: c74d (c74d3a4ebb6@moz-3tkm7g.mggc.hibn.4404.2002.IP) (Ping timeout: 121 seconds)
[03:34:16] *** c74d3 is now known as c74d
[03:43:19] *** Quits: Diggsey (diggsey@moz-sjh3ba.dsl.pipex.com) (Ping timeout: 121 seconds)
[03:45:12] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[03:50:01] *** Joins: zxq9 (ceverett@moz-qsm369.mesh.ad.jp)
[04:01:16] <bkoropoff> Is there a standard means for writing unit tests that code fails to compile?
[04:01:58] <XMPPwocky> bkoropoff: yes, i think it's https://github.com/rust-lang/rust/tree/master/src/test/compile-failhttps://github.com/rust-lang/rust/tree/master/src/test/compile-fail
[04:02:01] <XMPPwocky> ack, https://github.com/rust-lang/rust/tree/master/src/test/compile-fail
[04:02:15] <bkoropoff> I mean outside of the rust tree, in the broader ecosystem
[04:03:02] <bkoropoff> oftentimes you want to test that your API is providing the static guarantees you think it is
[04:03:59] <bkoropoff> e.g. the way that Arena prevents drop unsafety is subtle and merits test cases involving bad application code failing to compile
[04:04:32] *** Joins: mib_wpr7sg (Mibbit@moz-juv.9o3.252.72.IP)
[04:05:06] *** Quits: mib_wpr7sg (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[04:07:40] <steveklabnik> Manishearth: yeah that is :)
[04:21:14] *** Joins: yjv (yjv@moz-tue.hqu.153.50.IP)
[04:22:06] *** Joins: genbattle (genbattle@moz-r09mao.xtra.co.nz)
[04:26:25] *** Quits: yjv (yjv@moz-tue.hqu.153.50.IP) (Ping timeout: 121 seconds)
[04:31:12] *** Joins: achanda (achanda@moz-dta.4ef.21.113.IP)
[04:33:10] *** Joins: achanda_ (achanda@moz-dta.4ef.21.113.IP)
[04:35:14] *** Quits: achanda (achanda@moz-dta.4ef.21.113.IP) (Ping timeout: 121 seconds)
[04:36:09] *** Joins: yjv (yjv@moz-tue.hqu.153.50.IP)
[04:40:56] *** Joins: bombless (_@moz-qji.piv.41.59.IP)
[04:50:27] *** Quits: achanda_ (achanda@moz-dta.4ef.21.113.IP) (Connection closed)
[04:58:02] *** Joins: achanda (achanda@moz-dta.4ef.21.113.IP)
[04:58:39] *** Quits: yjv (yjv@moz-tue.hqu.153.50.IP) (Connection closed)
[04:59:22] *** Joins: harrisonclarke (harrisoncla@moz-mh0.9rm.212.173.IP)
[05:05:32] *** Quits: harrisonclarke (harrisoncla@moz-mh0.9rm.212.173.IP) (Connection closed)
[05:10:51] *** Quits: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net) (Ping timeout: 121 seconds)
[05:13:16] *** Joins: mukilan (mukilan@moz-5ke.d4s.164.122.IP)
[05:21:04] *** Quits: jgallagher (john@moz-6ge.dhn.131.24.IP) (Client exited)
[05:24:26] *** Quits: bkoropoff (bkoropoff@moz-kthi5c.wa.comcast.net) (Client exited)
[05:31:58] *** Quits: amir (amir@moz-jnohkj.3bcq.01f6.0168.2a02.IP) (Ping timeout: 121 seconds)
[05:33:29] <blaenk> ey bros can you guys tell me of anyone you know with windows skills with respect to rust? like WindowsBunny and klutzy (I think?)
[05:36:13] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[05:38:58] *** Quits: summerlight (summerlight@moz-99k.2mj.130.121.IP) (Connection closed)
[05:39:10] *** Joins: summerlight (summerlight@moz-99k.2mj.130.121.IP)
[05:40:37] <bombless> tomaka I guess, he's working on game development on Windows
[05:40:46] <blaenk> thanks bombless
[05:42:57] <bombless> actually I think Alex has written tons of Windows-dependent code althogh he's not a fan of Windows :P
[05:43:13] <blaenk> haha alex is beast tho
[05:43:51] <blaenk> they should make a sculpture of that guy holding the world on his shoulders except it's him and it's the rust logo cog on his shoulders
[05:43:55] *** Quits: achanda (achanda@moz-dta.4ef.21.113.IP) (Connection closed)
[05:43:55] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[05:45:09] *** Joins: amir (amir@moz-qbf4gg.fiber7.init7.net)
[05:46:07] *** Quits: genbattle (genbattle@moz-r09mao.xtra.co.nz) (Quit: Leaving)
[05:47:28] *** Joins: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net)
[05:51:32] <bombless> I think rustdoc used to call `maketest` to print example code, but this is untrue now as I see. Anyone now what is the exact replacement? rustbook still use `maketest` though.
[06:00:56] *** Quits: summerlight (summerlight@moz-99k.2mj.130.121.IP) (Connection closed)
[06:02:42] *** Joins: summerlight (summerlight@moz-99k.2mj.130.121.IP)
[06:29:59] *** Quits: chc4 (chc4@moz-mjph4c.ma.comcast.net) (Quit: AHHHHH BEES)
[06:50:02] <klutzy> blaenk: vadimcn is the expert of windows internals :)
[06:50:14] <blaenk> thanks klutzy :))
[06:54:24] *** Quits: Kxepal (Miranda@moz-mh1uld.pppoe.mtu-net.ru) (Ping timeout: 121 seconds)
[06:58:34] *** Joins: erz (erz@moz-fiq1tl.broadband.corbina.ru)
[07:03:42] *** Joins: achanda (achanda@moz-rh4.5g1.66.182.IP)
[07:04:27] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Quit: It's a joke, it's all a joke.)
[07:16:51] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[07:17:48] *** Quits: bombless (_@moz-qji.piv.41.59.IP) (Ping timeout: 121 seconds)
[07:34:40] *** Quits: achanda (achanda@moz-rh4.5g1.66.182.IP) (Connection closed)
[07:45:31] *** Joins: ptalbot (ptalbot@moz-j4gnuh.fbx.proxad.net)
[07:59:11] *** Joins: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se)
[08:02:41] *** Joins: joh (uid13099@moz-2c7ap3.ealing.irccloud.com)
[08:02:50] *** Quits: elif (chatzilla@moz-ev8m1p.res.rr.com) (Ping timeout: 121 seconds)
[08:03:22] *** Joins: achanda (achanda@moz-oj0.a9j.66.182.IP)
[08:05:08] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[08:06:17] *** Joins: bombless (_@moz-8lluek.0v2u.0v40.0da8.2001.IP)
[08:08:55] *** Joins: bombless_ (_@moz-qji.piv.41.59.IP)
[08:10:51] *** Quits: bombless (_@moz-8lluek.0v2u.0v40.0da8.2001.IP) (Ping timeout: 121 seconds)
[08:22:19] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Client exited)
[08:24:13] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[08:27:24] *** Joins: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de)
[08:30:53] *** Joins: nicknikolov (nicknikolov@moz-7ep.6g7.220.90.IP)
[08:36:07] *** Quits: nicknikolov (nicknikolov@moz-7ep.6g7.220.90.IP) (Connection closed)
[08:36:10] *** Joins: nicknikolov (nicknikolov@moz-7ep.6g7.220.90.IP)
[08:43:30] *** Joins: larhat1 (Adium@moz-9vj.vcf.204.37.IP)
[08:45:14] *** Joins: munksgaard (munksgaard@moz-urnkl5.u.parknet.dk)
[08:45:25] *** Quits: achanda (achanda@moz-oj0.a9j.66.182.IP) (Ping timeout: 121 seconds)
[08:47:02] *** Joins: achanda (achanda@moz-dta.4ef.21.113.IP)
[08:50:57] *** bombless_ is now known as bombless
[08:53:09] *** Quits: larhat1 (Adium@moz-9vj.vcf.204.37.IP) (Quit: Leaving.)
[08:54:37] *** Quits: nicknikolov (nicknikolov@moz-7ep.6g7.220.90.IP) (Connection closed)
[08:56:05] *** Joins: nickniko_ (nicknikolov@moz-7ep.6g7.220.90.IP)
[08:57:13] *** Quits: nickniko_ (nicknikolov@moz-7ep.6g7.220.90.IP) (Connection closed)
[08:57:34] *** Joins: nicknikolov (nicknikolov@moz-7ep.6g7.220.90.IP)
[08:58:37] *** Joins: nickniko_ (nicknikolov@moz-7ep.6g7.220.90.IP)
[08:58:37] *** Quits: nicknikolov (nicknikolov@moz-7ep.6g7.220.90.IP) (Connection closed)
[09:09:52] *** Quits: nham (nham@moz-lglsfe.il.comcast.net) (Quit: leaving)
[09:12:49] *** Quits: munksgaard (munksgaard@moz-urnkl5.u.parknet.dk) (Ping timeout: 121 seconds)
[09:13:18] <SimonSapin> Do we have Arc<Trait> yet?
[09:13:35] <SimonSapin> (library-defined fat pointers)
[09:20:03] *** Quits: nickniko_ (nicknikolov@moz-7ep.6g7.220.90.IP) (Connection closed)
[09:22:54] *** Joins: nicknikolov (nicknikolov@moz-7ep.6g7.220.90.IP)
[09:22:59] *** Quits: nicknikolov (nicknikolov@moz-7ep.6g7.220.90.IP) (Connection closed)
[09:23:00] *** Joins: nicknikolov (nicknikolov@moz-7ep.6g7.220.90.IP)
[09:24:25] *** Quits: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[09:25:24] *** Quits: zxq9 (ceverett@moz-qsm369.mesh.ad.jp) (Quit: Konversation terminated!)
[09:33:08] <aatch> SimonSapin, I'm not sure if Arc has been converted yet, but it should at least possible to do now.
[09:34:20] <eddyb> SimonSapin: Arc<RwLock<Trait>> should work, now, too
[09:34:27] <eddyb> Arc<Trait> has been working for a week or two
[09:44:44] *** Joins: munksgaard (munksgaard@moz-33d.hq0.225.130.IP)
[09:47:15] <SimonSapin> what kind of conversion is needed?
[09:47:48] <SimonSapin> just adding `?Sized` ?
[09:48:00] *** Joins: eibwen (eibwen@moz-48oias.dip0.t-ipconnect.de)
[09:48:35] <Mutabah> SimonSapin: Looks like it
[09:48:38] <eddyb> SimonSapin: conversion in what?
[09:48:41] <Mutabah> (for RwLock I assume?)
[09:48:54] <eddyb> ah, yeah, that was done a while ago
[09:48:54] <SimonSapin> to support DST in library-defined smart pointers
[09:49:00] <eddyb> oh that's more involving
[09:49:11] <Mutabah> Yeah...
[09:49:17] <Mutabah> not too hard, but more involved
[09:49:20] <eddyb> SimonSapin: you have to switch to the proper intrinsics in Drop, you can't handwave it like we used to
[09:49:22] <SimonSapin> I’m curious how that works
[09:49:32] <eddyb> ptr::read is a nono
[09:49:33] <Mutabah> SimonSapin: Take a look at std, or my kernel
[09:49:47] <SimonSapin> I’m looking at arc.rs now
[09:49:47] <eddyb> size_of_val, min_align_of_val and drop_in_place
[09:50:02] <eddyb> and you need a CoerceUnsized impl for coercions to be allowed
[09:51:16] <Mutabah> SimonSapin: The biggest changes are CoerceUnsized and the different Drop impl iirc
[09:51:57] <eddyb> that's correct, we don't have a box protocol yet
[09:52:11] <eddyb> (if we did, it would have to support more interesting usecases)
[09:52:34] <SimonSapin> box protocol?
[09:52:52] <Mutabah> SimonSapin: user-defined handles for the box keyword
[09:52:52] <eddyb> the configurable box expr and in place { expr }
[09:53:05] <eddyb> or customizable or w/e
[09:53:15] <Mutabah> (I'm looking forward to that, the RFC proto looks quite nice
[09:53:35] <eddyb> they would have to support moving unsized types, at least unsafely
[09:54:01] <eddyb> or rather, allocating the space for a later "manual" move/initialization
[10:01:47] *** Quits: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com) (Ping timeout: 121 seconds)
[10:02:09] *** Quits: nicknikolov (nicknikolov@moz-7ep.6g7.220.90.IP) (Connection closed)
[10:05:35] *** Joins: nicknikolov (nicknikolov@moz-7ep.6g7.220.90.IP)
[10:11:24] *** Joins: James (quassel@moz-8qs8a3.range86-148.btcentralplus.com)
[10:25:49] *** Quits: ranma42 (ranma42@moz-2if8va.di.unipi.it) (Ping timeout: 121 seconds)
[10:27:05] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Quit: Leaving.)
[10:27:21] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[10:28:22] *** Joins: ranma42 (ranma42@moz-2if8va.di.unipi.it)
[10:33:56] *** Quits: aatch (james@moz-is4j4r.cable.telstraclear.net) (Ping timeout: 121 seconds)
[10:35:55] *** Joins: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de)
[10:36:38] *** Quits: achanda (achanda@moz-dta.4ef.21.113.IP) (Connection closed)
[10:52:27] *** Joins: Binero (jeroen@moz-91joat.69vi.s4ge.1810.2a02.IP)
[10:58:24] *** Joins: rkruppe (chatzilla@moz-e23ql9.diu2.0rth.0908.2a02.IP)
[11:00:20] *** Quits: Binero (jeroen@moz-91joat.69vi.s4ge.1810.2a02.IP) (Client exited)
[11:02:20] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[11:03:47] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[11:15:59] *** Joins: Diggsey (diggsey@moz-g327vj.dsl.pipex.com)
[11:16:19] *** Joins: rkruppe_ (chatzilla@moz-olc3ok.unity-media.net)
[11:19:17] *** Quits: rkruppe (chatzilla@moz-e23ql9.diu2.0rth.0908.2a02.IP) (Ping timeout: 121 seconds)
[11:19:31] *** rkruppe_ is now known as rkruppe
[11:28:34] *** Quits: nicknikolov (nicknikolov@moz-7ep.6g7.220.90.IP) (Connection closed)
[11:28:35] *** Joins: nicknikolov (nicknikolov@moz-7ep.6g7.220.90.IP)
[11:29:19] *** Quits: nicknikolov (nicknikolov@moz-7ep.6g7.220.90.IP) (Connection closed)
[11:30:01] *** Joins: nicknikolov (nicknikolov@moz-7ep.6g7.220.90.IP)
[11:30:34] *** Quits: Kingsquee (kingsley@moz-p5n.0o3.20.154.IP) (Quit: Konversation terminated!)
[11:30:40] *** Quits: nicknikolov (nicknikolov@moz-7ep.6g7.220.90.IP) (Connection closed)
[11:30:41] *** Joins: nicknikolov (nicknikolov@moz-7ep.6g7.220.90.IP)
[11:31:25] *** Quits: nicknikolov (nicknikolov@moz-7ep.6g7.220.90.IP) (Connection closed)
[11:32:48] *** Joins: nicknikolov (nicknikolov@moz-7ep.6g7.220.90.IP)
[11:39:07] *** Quits: ptalbot (ptalbot@moz-j4gnuh.fbx.proxad.net) (Connection closed)
[11:41:53] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[11:55:11] *** Quits: nicknikolov (nicknikolov@moz-7ep.6g7.220.90.IP) (Connection closed)
[11:55:12] *** Joins: nicknikolov (nicknikolov@moz-7ep.6g7.220.90.IP)
[11:55:56] *** Quits: nicknikolov (nicknikolov@moz-7ep.6g7.220.90.IP) (Connection closed)
[11:58:53] *** Quits: bombless (_@moz-qji.piv.41.59.IP) (Ping timeout: 121 seconds)
[12:01:15] *** Joins: nicknikolov (nicknikolov@moz-7ep.6g7.220.90.IP)
[12:01:20] *** Quits: nicknikolov (nicknikolov@moz-7ep.6g7.220.90.IP) (Connection closed)
[12:05:55] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[12:44:31] *** Joins: O01eg (o01eg@moz-b3rai2.3lcq.3egh.2698.2a02.IP)
[12:47:37] *** Quits: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net) (Ping timeout: 121 seconds)
[12:51:00] *** Joins: montezuma (Mibbit@moz-juv.9o3.252.72.IP)
[12:54:06] *** Quits: semarie (semarie@moz-egq1an.kimsufi.com) (A TLS packet with unexpected length was received.)
[12:54:19] *** Joins: semarie (semarie@moz-b4qb6c.eecs.umich.edu)
[13:04:46] *** Joins: aatch (james@moz-is4j4r.cable.telstraclear.net)
[13:12:36] *** Joins: ytain (ytain@moz-l74f7c.dsl.teksavvy.com)
[13:13:42] *** Quits: bjz (bjz@moz-puppgq.tpgi.com.au) (Quit: My Mac has gone to sleep. ZZZzzz…)
[13:16:55] *** Joins: jgallagher (john@moz-6ge.dhn.131.24.IP)
[13:21:56] *** Quits: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[13:44:24] *** Quits: James (quassel@moz-8qs8a3.range86-148.btcentralplus.com) (Ping timeout: 121 seconds)
[13:45:24] *** Joins: bombless (_@moz-7q209u.0v2u.0v40.0da8.2001.IP)
[13:48:04] *** Joins: larsberg (Adium@moz-kmvlue.cable.rcn.com)
[13:55:00] *** Joins: James (quassel@moz-8qs8a3.range86-148.btcentralplus.com)
[13:56:11] *** Quits: montezuma (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:25:23] *** Quits: jgallagher (john@moz-6ge.dhn.131.24.IP) (Client exited)
[14:29:22] *** Joins: ytain_ (ytain@moz-o0gerq.dsl.teksavvy.com)
[14:32:19] *** Quits: ytain (ytain@moz-l74f7c.dsl.teksavvy.com) (Ping timeout: 121 seconds)
[14:40:54] *** ytain_ is now known as ytain
[14:42:06] *** Quits: munksgaard (munksgaard@moz-33d.hq0.225.130.IP) (Quit: Lost terminal)
[14:47:01] *** Joins: bjz (bjz@moz-puppgq.tpgi.com.au)
[14:49:01] *** Joins: Quxxy (chatzilla@moz-efh10q.internode.on.net)
[14:49:59] <Quxxy> I've got linking errors building rustc.  They appear to be coming from llvm due to duplicate symbols.  I tried make clean, that didn't help; is there anything I should do other than a completely fresh check-out?
[14:54:33] <WindowsBunny> Quxxy: platform?
[14:54:43] <Quxxy> Windows; Mingw-w32
[14:55:03] <Quxxy> I just did a pull, ./configure, make clean, make rustc-stage1
[14:55:06] <Quxxy> But I haven't built in a while
[14:55:32] <Quxxy> (prior to doing this build, I mean)
[14:56:56] <WindowsBunny> Quxxy: w32? :|
[14:57:10] <WindowsBunny> I hope you mean a 32-bit mingw-w64
[14:57:16] <Quxxy> Using the 32-bit toolchain for ... yes
[14:59:11] <Quxxy> If there isn't some kind of make really-clean, I suppose I'll just try nuking everything
[14:59:12] *** Joins: Simplebrain (Simplebrain@moz-6h4u6b.skybroadband.com)
[15:00:08] <WindowsBunny> Quxxy: I've never encountered a situation where a make clean and configure wasn't enough
[15:00:27] <Quxxy> Oh, well, I'm *good* at triggering apparently impossible behaviour :D
[15:13:07] <bombless> hmm I guess use 64-bit unless you have good reason.. 64-bit rustc is like 3 times faster than 32-bit version
[15:13:36] <Quxxy> bombless: I've had trouble with 64-bit in the past
[15:13:39] <bombless> and I think LLVM just get updated a few hours ago.. and my last build was before that
[15:13:40] <Quxxy> 32-bit tends to be more reliable
[15:14:36] <bombless> I used to think that way until WindowsBunny pointed out that 64-bit is as reliable as 32-bit.
[15:14:47] <Quxxy> Well, it's not :P
[15:14:59] <Quxxy> He's a fibbing bunny
[15:15:27] <bombless> Actually I have a problem when downloading 64-bit snapshot, since 64 is a sensitive word in my country..
[15:15:34] <WindowsBunny> bombless: what
[15:15:41] <WindowsBunny> bombless: are you for real
[15:16:02] <bombless> yes I say that seriously at least for cargo snapshot
[15:16:11] <WindowsBunny> Quxxy: Also, what reliability issues have you encountered with 64-bit that 32-bit doesn't have?
[15:16:34] <WindowsBunny> bombless: Which country?
[15:17:06] <bombless> WindowsBunny: China, because there was an event happened at 1989.6.4
[15:17:22] <Quxxy> WindowsBunny: Debuggers not working, breakpoints not working, not being able to get libraries...
[15:17:32] <Quxxy> it feels like every time I tried to go 64-bit native, *something* broke horribly
[15:18:50] *** Quits: sav (e@moz-9u3te2.cc) (Connection closed)
[15:18:54] *** Joins: sav (e@moz-9u3te2.cc)
[15:19:23] <WindowsBunny> bombless: ah... that
[15:19:31] <bombless> Quxxy: wait, you can debug on 32-bit?
[15:19:50] <WindowsBunny> I don't use debuggers with Rust anyway so *shrug*
[15:19:55] <bombless> like gdb progron.rs?
[15:20:06] <bombless> programme.rs*
[15:20:10] <WindowsBunny> I've had no issues with getting libraries for 64-bit though
[15:20:42] <bombless> ah once again I spelled it wrong
[15:20:47] *** Quits: ranma42 (ranma42@moz-2if8va.di.unipi.it) (Ping timeout: 121 seconds)
[15:22:28] *** Joins: ranma42 (ranma42@moz-2if8va.di.unipi.it)
[15:33:49] <Quxxy> bombless: Sorry, missed your question; Rust?  No.  I'm talking about the last time I tried to get a 64-bit C++ toolchain working properly
[15:35:26] *** Joins: bkoropoff (bkoropoff@moz-kthi5c.wa.comcast.net)
[15:40:39] <WindowsBunny> Quxxy: Rust is actually pretty stable on 64-bit Windows
[15:42:03] <Quxxy> Another good reason: if I can only have one toolchain, being able to produce binaries that everyone can use it nice :D
[15:43:16] <bombless> hmm at least that's why tomaka is using 32-bit rustc
[15:54:19] <Quxxy> Really should stuck a "time" out the front of "make rustc-stage1"
[16:02:05] *** Joins: arielb1 (Ariel@moz-53k.mgl.67.109.IP)
[16:10:21] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[16:10:31] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[16:23:54] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[16:24:14] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[16:29:15] *** Quits: bombless (_@moz-7q209u.0v2u.0v40.0da8.2001.IP) (Ping timeout: 121 seconds)
[16:34:15] *** Joins: Kxepal (Miranda@moz-mmj01e.pppoe.mtu-net.ru)
[16:37:17] *** Quits: Simplebrain (Simplebrain@moz-6h4u6b.skybroadband.com) (Quit: Leaving)
[16:40:53] *** Joins: Simplebrain (Simplebrain@moz-1hs5ek.rev.poneytelecom.eu)
[16:45:43] *** Joins: chc4 (chc4@moz-mjph4c.ma.comcast.net)
[16:48:54] *** Quits: Simplebrain (Simplebrain@moz-1hs5ek.rev.poneytelecom.eu) (Ping timeout: 121 seconds)
[16:51:27] *** Joins: sigma (sigma@moz-1fikdt.range86-146.btcentralplus.com)
[16:58:54] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[17:00:32] *** Joins: Binero (jeroen@moz-9quuoa.access.telenet.be)
[17:03:14] *** Quits: summerlight (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[17:04:00] <Quxxy> Anyone here familiar with how rustc parses options; I'm trying to add one and... failing
[17:04:55] <Quxxy> Getting a "No option 'extern-macro' defined" panic
[17:05:22] <Quxxy> I've added a opt::multi_u to rustc_optgroups, though
[17:10:05] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[17:10:36] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[17:11:04] *** Joins: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de)
[17:11:42] *** Quits: chc4 (chc4@moz-mjph4c.ma.comcast.net) (Ping timeout: 121 seconds)
[17:12:25] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[17:14:55] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[17:15:03] *** Joins: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net)
[17:19:04] <Quxxy> Nevermind; found a workaround
[17:21:16] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[17:21:26] *** Quits: Binero (jeroen@moz-9quuoa.access.telenet.be) (Client exited)
[17:23:05] *** Quits: Quxxy (chatzilla@moz-efh10q.internode.on.net) (Ping timeout: 121 seconds)
[17:31:00] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[17:31:03] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[17:31:33] *** Quits: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net) (Ping timeout: 121 seconds)
[17:40:29] *** Quits: sigma (sigma@moz-1fikdt.range86-146.btcentralplus.com) (Ping timeout: 121 seconds)
[17:45:51] *** Joins: blaenk_ (blaenkdenum@moz-ggnkpd.res.rr.com)
[17:46:17] *** Quits: semarie (semarie@moz-b4qb6c.eecs.umich.edu) (Ping timeout: 121 seconds)
[17:48:15] *** Quits: blaenk (blaenkdenum@moz-ggnkpd.res.rr.com) (Ping timeout: 121 seconds)
[17:48:23] *** Joins: achanda (achanda@moz-81o.o94.66.182.IP)
[17:49:11] *** Joins: semarie (semarie@moz-abe.mi6.31.176.IP)
[17:56:02] *** Quits: meteredsection (meteredsect@moz-k1pkr3.wa.comcast.net) (Ping timeout: 121 seconds)
[17:56:20] *** Joins: achanda_ (achanda@moz-81o.o94.66.182.IP)
[17:56:57] *** Quits: achanda (achanda@moz-81o.o94.66.182.IP) (Connection closed)
[18:02:42] *** Quits: acrichto (acrichto@moz-u3dg2t.sfo1.mozilla.com) (Ping timeout: 121 seconds)
[18:02:42] *** Joins: achanda (achanda@moz-81o.o94.66.182.IP)
[18:02:47] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[18:03:26] *** Joins: brson (brson@moz-jbs.7vl.56.172.IP)
[18:03:26] *** ChanServ sets mode: +o brson
[18:03:27] *** Quits: achanda (achanda@moz-81o.o94.66.182.IP) (Connection closed)
[18:03:49] <brson> we haven't produced a new nightly since 6/2!
[18:04:31] <WindowsBunny> brson: Is that bad?
[18:05:02] <brson> yes. they are supposed to happen every night
[18:05:42] <WindowsBunny> I suppose not having nightlies every night would be kinda bad
[18:06:04] <WindowsBunny> Looks like theres a problem with gdb
[18:06:16] <WindowsBunny> So entirely out of my scope
[18:06:47] *** Quits: achanda_ (achanda@moz-81o.o94.66.182.IP) (Ping timeout: 121 seconds)
[18:07:37] <XMPPwocky> in two more days they'll be weeklies
[18:08:56] *** Joins: acrichto (acrichto@moz-u3dg2t.sfo1.mozilla.com)
[18:08:56] *** ChanServ sets mode: +o acrichto
[18:10:26] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[18:11:37] <brson> acrichto: r? https://github.com/rust-lang/rust/pull/26070
[18:12:29] <brson> acrichto: nightlies have been broken for several days
[18:12:31] *** Joins: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net)
[18:13:07] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[18:13:32] <XMPPwocky> i feel like there should be some sort of flashing red alarm that goes off when nightlies break
[18:14:09] <Amaranth> You need a foam bat
[18:14:10] <brson> me too
[18:19:01] *** Joins: Binero (jeroen@moz-9quuoa.access.telenet.be)
[18:19:59] *** Joins: nicknikolov (nicknikolov@moz-7ep.6g7.220.90.IP)
[18:20:22] *** Quits: acrichto (acrichto@moz-u3dg2t.sfo1.mozilla.com) (Ping timeout: 121 seconds)
[18:22:48] *** Joins: elif (chatzilla@moz-ev8m1p.res.rr.com)
[18:23:00] *** Joins: acrichto (acrichto@moz-u3dg2t.sfo1.mozilla.com)
[18:23:00] *** ChanServ sets mode: +o acrichto
[18:25:49] *** Quits: skeuomorf (skeuomorf@moz-d3l.n1e.32.197.IP) (Ping timeout: 121 seconds)
[18:26:09] *** Joins: skeuomorf (skeuomorf@moz-d3l.n1e.32.197.IP)
[18:28:39] *** Quits: bkoropoff (bkoropoff@moz-kthi5c.wa.comcast.net) (Client exited)
[18:30:06] *** Joins: bkoropoff (bkoropoff@moz-kthi5c.wa.comcast.net)
[18:34:14] *** Quits: bkoropoff (bkoropoff@moz-kthi5c.wa.comcast.net) (Ping timeout: 121 seconds)
[18:37:10] *** Quits: mib_yz1vj7 (Mibbit@moz-g6k.oht.161.46.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[18:37:56] *** Quits: playbot (playbot@moz-1vk5qd.compute.amazonaws.com) (RecvQ exceeded)
[18:38:07] *** Joins: playbot (playbot@moz-1vk5qd.compute.amazonaws.com)
[18:38:09] <XMPPwocky> is the issue that homu only runs some of the buildbots?
[18:39:28] <brson> XMPPwocky: the testing for integration and the testing for nightlies is a lot different so there's occassional breakage we don't catch
[18:39:46] <brson> the testing for nightlies is alarmingly insufficient
[18:40:32] *** Quits: acrichto (acrichto@moz-u3dg2t.sfo1.mozilla.com) (Ping timeout: 121 seconds)
[18:40:44] <brson> we test very little on the dist builds and rely on the integration bots to ensure things are good
[18:41:36] <brson> edunham: fyi^ this has been a longstanding concern
[18:41:42] <WindowsBunny> well, if we test everything in the integration tests, then nothing should break in the dist builds, right?
[18:42:15] <brson> WindowsBunny: in theory. i am not so confident
[18:42:31] <brson> builds can go wrong, and the environment is actually different
[18:42:33] <WindowsBunny> Do we run those gdb tests in integration testing?
[18:42:49] <brson> WindowsBunny: i hope so! i don't know offhand what difference is causing the failure
[18:43:00] <WindowsBunny> lemme investigate :D
[18:43:09] *** Quits: skeuomorf (skeuomorf@moz-d3l.n1e.32.197.IP) (Ping timeout: 121 seconds)
[18:43:13] <XMPPwocky> at least some sort of IRC bot that pops in here or #rust-bots and tells everybody when a nightly build fails, seems like a useful thing
[18:43:25] *** Joins: acrichto (acrichto@moz-u3dg2t.sfo1.mozilla.com)
[18:43:25] *** ChanServ sets mode: +o acrichto
[18:44:05] <WindowsBunny> brson: nope!
[18:44:20] <WindowsBunny> wait, yes we do
[18:44:25] <WindowsBunny> my ctrl +f failed me :D
[18:45:04] <WindowsBunny> gdb-pretty-struct-and-enums runs and passes on auto-linux-64-opt
[18:46:00] <WindowsBunny> So gdb-pretty-struct-and-enums is only failing on the dist builds
[18:46:06] <WindowsBunny> which is... bad?
[18:46:44] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[18:48:16] <WindowsBunny> brson: I'm going to blame it on....
[18:48:34] <WindowsBunny> https://github.com/rust-lang/rust/pull/25905
[18:48:39] <WindowsBunny> That seems like the most likely candidate
[18:49:02] <WindowsBunny> Its the only debuginfo related PR between the two nightlies
[18:50:42] <brson> WindowsBunny: thank you for investigating
[18:56:39] *** Joins: chc4 (chc4@moz-pdo0at.ma.comcast.net)
[18:57:17] *** Quits: rkruppe (chatzilla@moz-olc3ok.unity-media.net) (Ping timeout: 121 seconds)
[19:00:12] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[19:05:01] *** Quits: acrichto (acrichto@moz-u3dg2t.sfo1.mozilla.com) (Ping timeout: 121 seconds)
[19:05:05] *** Joins: sp3d (sp3d@moz-ik970v.enn1.s22b.000d.2601.IP)
[19:08:42] *** Joins: acrichto (acrichto@moz-u3dg2t.sfo1.mozilla.com)
[19:08:42] *** ChanServ sets mode: +o acrichto
[19:13:46] *** Quits: arielb1 (Ariel@moz-53k.mgl.67.109.IP) (Quit: Ex-Chat)
[19:18:36] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[19:18:42] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[19:20:43] * brson back to work on crater.rs
[19:21:55] *** kimundi is now known as zz_kimundi
[19:30:19] *** Quits: untitaker_ (untitaker@moz-k24d8a.highway.telekom.at) (Ping timeout: 121 seconds)
[19:34:21] *** Joins: untitaker (untitaker@moz-rtvb9i.highway.telekom.at)
[19:43:16] *** Quits: brson (brson@moz-jbs.7vl.56.172.IP) (Quit: leaving)
[19:45:02] *** Quits: semarie (semarie@moz-abe.mi6.31.176.IP) (A TLS packet with unexpected length was received.)
[19:45:20] *** blaenk_ is now known as blaenk
[19:45:33] *** Joins: rkruppe (chatzilla@moz-p17lhc.diu2.0rth.0908.2a02.IP)
[19:47:19] *** Joins: jgallagher (john@moz-6ge.dhn.131.24.IP)
[19:48:27] *** Quits: jgallagher (john@moz-6ge.dhn.131.24.IP) (Client exited)
[19:53:00] *** zz_kimundi is now known as kimundi
[19:56:26] *** Joins: bkoropoff (bkoropoff@moz-kthi5c.wa.comcast.net)
[20:04:07] *** kimundi is now known as zz_kimundi
[20:06:00] *** zz_kimundi is now known as kimundi
[20:07:07] *** Quits: rkruppe (chatzilla@moz-p17lhc.diu2.0rth.0908.2a02.IP) (Quit: ChatZilla 0.9.91.1 [Firefox 38.0.5/20150525141253])
[20:07:36] *** Joins: laumann (thomas@moz-n9e72h.0.fullrate.dk)
[20:09:26] *** Joins: nrc (sid365@moz-3taf2s.0j4i.jtu0.0101.2620.IP)
[20:11:48] *** ChanServ sets mode: +o nrc
[20:14:47] *** Quits: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net) (Ping timeout: 121 seconds)
[20:18:38] *** kimundi is now known as zz_kimundi
[20:19:15] *** Quits: mukilan (mukilan@moz-5ke.d4s.164.122.IP) (A TLS packet with unexpected length was received.)
[20:28:03] *** Joins: sunfish (sunfish@moz-no0.93r.245.63.IP)
[20:32:46] *** Joins: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com)
[20:33:11] *** Joins: jincreator (Thunderbird@moz-d7i.i1g.195.175.IP)
[20:43:12] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Quit: It's a joke, it's all a joke.)
[20:47:17] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[20:51:47] *** Quits: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu) (Quit: Leaving)
[20:55:35] <simukis> how does one cc the team, e.g. @rust-lang/libs?
[20:58:26] *** Joins: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP)
[20:58:30] *** Quits: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP) (Connection closed)
[20:58:37] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[20:58:52] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[21:05:37] *** zz_kimundi is now known as kimundi
[21:07:56] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[21:09:30] *** Joins: brson (brson@moz-cfhap5.mtv2.mozilla.com)
[21:09:31] *** ChanServ sets mode: +o brson
[21:21:19] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Client exited)
[21:22:23] *** Joins: mib_4oob3t (Mibbit@moz-g6k.oht.161.46.IP)
[21:22:32] *** Quits: flaper87 (flaper87@moz-fnn.1e9.132.209.IP) (Ping timeout: 121 seconds)
[21:24:26] *** Quits: laumann (thomas@moz-n9e72h.0.fullrate.dk) (Quit: leaving)
[21:26:32] *** Joins: Kingsquee (kingsley@moz-3fm07c.bchsia.telus.net)
[21:27:40] *** Quits: Binero (jeroen@moz-9quuoa.access.telenet.be) (Client exited)
[21:32:48] *** Joins: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu)
[21:35:22] *** Quits: erz (erz@moz-fiq1tl.broadband.corbina.ru) (Connection closed)
[21:35:44] *** Joins: erz (erz@moz-fiq1tl.broadband.corbina.ru)
[21:40:27] *** Quits: larsberg (Adium@moz-kmvlue.cable.rcn.com) (Quit: Leaving.)
[21:43:22] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[21:54:51] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[21:56:21] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[22:00:21] *** Quits: eibwen (eibwen@moz-48oias.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[22:09:24] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[22:09:48] *** Quits: brson (brson@moz-cfhap5.mtv2.mozilla.com) (Quit: leaving)
[22:17:33] *** Joins: nickniko_ (nicknikolov@moz-u6h.qr2.219.90.IP)
[22:19:02] *** Quits: nicknikolov (nicknikolov@moz-7ep.6g7.220.90.IP) (Ping timeout: 121 seconds)
[22:23:31] *** Quits: eddyb (eddyb@moz-2fd.hlc.26.188.IP) (Ping timeout: 121 seconds)
[22:26:08] *** Joins: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net)
[22:30:11] *** Quits: erz (erz@moz-fiq1tl.broadband.corbina.ru) (Quit: My Mac has gone to sleep. ZZZzzz…)
[22:32:33] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[22:33:18] *** Joins: erz (erz@moz-fiq1tl.broadband.corbina.ru)
[22:33:28] <nrc> cmr or anyone else: how do I use discuss via email? E.g., if I want to create a new topic, which address do I email? And do I need to ahve anything in the subject etc?
[22:38:09] *** Quits: erz (erz@moz-fiq1tl.broadband.corbina.ru) (Quit: My Mac has gone to sleep. ZZZzzz…)
[22:39:19] *** Quits: mib_4oob3t (Mibbit@moz-g6k.oht.161.46.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:51:15] <nrc> well, I've taken a guess, lets see what happens on Friday
[22:53:49] *** Quits: nickniko_ (nicknikolov@moz-u6h.qr2.219.90.IP) (Connection closed)
[22:57:42] *** Joins: nicknikolov (nicknikolov@moz-u6h.qr2.219.90.IP)
[22:57:59] *** Quits: James (quassel@moz-8qs8a3.range86-148.btcentralplus.com) (Ping timeout: 121 seconds)
[22:58:26] *** Joins: mib_q9jp5e (Mibbit@moz-g6k.oht.161.46.IP)
[23:00:31] *** Joins: meteredsection (meteredsect@moz-k1pkr3.wa.comcast.net)
[23:01:19] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[23:06:14] *** Joins: eddyb (eddyb@moz-2fd.hlc.26.188.IP)
[23:09:11] *** kimundi is now known as zz_kimundi
[23:15:05] *** Quits: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[23:17:30] *** Quits: nicknikolov (nicknikolov@moz-u6h.qr2.219.90.IP) (Connection closed)
[23:18:14] *** Joins: summerlight (summerlight@moz-99k.2mj.130.121.IP)
[23:28:53] <bkoropoff> eddyb: ping
[23:29:06] <eddyb> shoot
[23:29:07] <steveklabnik> SimonSapin: like that, i think
[23:29:14] <steveklabnik> errr simias ^ sorry SimonSapin 
[23:29:42] <eddyb> bkoropoff: is this about monotonic?
[23:29:45] <bkoropoff> yes
[23:29:46] <steveklabnik> simias: might need a "Libs" since the name is capitaliszed
[23:30:23] *** Joins: larsberg (Adium@moz-kmvlue.cable.rcn.com)
[23:31:27] <bkoropoff> eddyb: I think I figured out a way to permit backwards iteration of HetVec without storing a separate usize
[23:31:46] <eddyb> wat
[23:32:01] <eddyb> bkoropoff: how?!
[23:32:05] <eddyb> oh that is evil
[23:32:19] <eddyb> I did not consider looping from the other side
[23:32:31] <eddyb> O(n) though
[23:32:36] <bkoropoff> no, O(1)
[23:32:53] <eddyb> I was amazed already :/
[23:33:17] <bkoropoff> I'll lay it out, and you can tell me what I'm missing the torpedoes the whole idea :)
[23:33:26] <eddyb> what's the magic?
[23:34:10] <bkoropoff> so, I'm currently storing a single function pointer which accepts the current pointer into the vec and returns a struct of (pointer to next glue, pointer to object, drop/erase glues)
[23:34:47] <bkoropoff> this is to work around lack of const fns/associated constants that would let me use a pointer to a static struct
[23:35:46] <eddyb> ehm
[23:35:53] <bkoropoff> with me so far?
[23:36:03] <eddyb> why not just store the erased info?
[23:36:16] <eddyb> which is not error-prone in any way
[23:36:23] <eddyb> (AFAIK)
[23:36:41] <bkoropoff> to avoid consuming more than one usize of metadata per object
[23:36:46] <eddyb> and works with slices, not only trait objects
[23:36:52] <eddyb> but it is one usize
[23:37:56] <bkoropoff> I allow application code to define their own erasure schemes
[23:38:11] *** Quits: summerlight (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[23:38:27] <eddyb> hmpf
[23:38:37] <bkoropoff> Otherwise I would use the trick from libarena of extracing a vtable pointer
[23:38:58] <eddyb> bkoropoff: but wouldn't the fn ptr thing be the base for a custom erasure scheme?
[23:39:03] <eddyb> and not the default?
[23:39:22] <bkoropoff> But that's beside the point.  I'm using a single metadata pointer, which contains, among other things, information necessary to advance to the next object
[23:39:35] <eddyb> yes, that would be the size
[23:40:19] <eddyb> size_of_val(queue.front()) etc.
[23:40:57] <bkoropoff> The easy thing to do is to also have a function (or, more generally, metadata pointer) which contains the offset of the previous entry, and write that at the end.  This makes reverse traversal possible, but costs an additional usize.
[23:41:24] <bkoropoff> So here's the trick.  Instead of storing them both, xor them together and store that.
[23:41:36] <eddyb> hahahahahaha
[23:41:55] <bkoropoff> When traversing forward, the forward metadata knows what the reverse metadata pointer will be
[23:41:59] <eddyb> they don't even need to be related
[23:42:10] <bkoropoff> so you can xor it into the next metadata pointer to recover the next forward pointer
[23:42:15] <bkoropoff> same when traversing backwards
[23:42:15] <Tobba> bkoropoff: lol, that's brilliant
[23:42:29] <bkoropoff> the only complication is alignment
[23:42:45] <eddyb> bkoropoff: xor is truly amazing
[23:42:50] <cmr> bkoropoff: is this different from the standard xor-list or am I missing something?
[23:42:51] <bkoropoff> when traversing backwards, there are potentially multiple locations where the object may have started due to padding
[23:43:17] <bkoropoff> but only for types that require alignment > that of usize
[23:43:23] <eddyb> OTPs. and then Mill doing its fancy private memory spaces by xoring addresses (sooo much faster than TLB)
[23:43:38] <eddyb> cmr: there is a xor list thing?
[23:43:42] <bkoropoff> if usize is 8 bytes, and you have a type with 16 byte alignment, there are 2 possible locations it could be
[23:43:49] <cmr> eddyb: http://en.wikipedia.org/wiki/XOR_linked_list
[23:43:58] <cmr> eddyb: as far as I'm concerned it's a standard technique :P
[23:44:05] <bkoropoff> so, have 2 metadata pointers, and select the correct one depending
[23:44:34] <bkoropoff> when traversing forward, you know how much padding you needed, so you know which one to use to xor
[23:44:42] <bkoropoff> Yes, I was inspired by the XOR linked list
[23:44:44] <eddyb> cmr: uh oh
[23:44:56] <eddyb> that changes everything
[23:45:59] <eddyb> I wonder if you can come up with a scheme that's relocation-friendly
[23:47:48] <bkoropoff> It's somewhat complicated by the alignment issue, which is what I needed to figure out
[23:48:15] <eddyb> well, left-align the start and right-align the end
[23:48:40] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[23:48:52] <eddyb> bkoropoff: alignment is part of the metadata
[23:49:07] <bkoropoff> right, but not the actual padding you inserted
[23:49:21] <bkoropoff> that depends on what address you happened to be on when you pushed
[23:50:19] <eddyb> can you give a concrete example? I'm a bit confused
[23:51:09] <eddyb> page-aligned buffer. usize metadata. usize padding. object aligned to 2xusize
[23:51:13] <eddyb> is this it?
[23:51:22] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[23:51:54] <bkoropoff> let's say you have 8-byte pointers, and push an object requiring 16-byte alignment
[23:52:00] <eddyb> and when going back, you can't tell whether you started at the start of the buffer or one usize in
[23:52:10] <bkoropoff> right
[23:52:24] <bkoropoff> there are two possible locations you could have started
[23:52:45] <eddyb> so when going back... you want a pointer to the metadata
[23:52:58] <bkoropoff> so you have two pieces of static reverse metadata, and you store one into the vector based on which is the case
[23:52:59] <eddyb> nothing else
[23:53:42] <bkoropoff> if you just have a pointer to the last metadata, you can't go any further
[23:53:55] <eddyb> why?
[23:53:58] <bkoropoff> because you would need to know what the metadata is to xor and recover the next back pointer
[23:54:05] <eddyb> oh
[23:54:35] <eddyb> right, for this to work, both ends need to have the exact same data
[23:54:57] <bkoropoff> So you need a (backwards pointer, previous metadata) pair.  More specifically, a pointer to one.
[23:55:05] <eddyb> align the static metadata and use the lowest bits?
[23:55:15] <bkoropoff> that's one possibility, yeah
[23:55:32] <bkoropoff> or just have two pieces of static metadata and choose one
[23:55:44] <eddyb> that does not scale
[23:56:32] <bkoropoff> Hmm?  It scales linearly with the number of monomorphic types, same as usual.
[23:56:48] <eddyb> here is an idea... you already waste the padding space
[23:57:34] <bkoropoff> I have to know it's padding space before I can read any data I scribble there
[23:57:50] <eddyb> what if you use a special scheme
[23:57:53] *** Quits: aatch (james@moz-is4j4r.cable.telstraclear.net) (Ping timeout: 121 seconds)
[23:57:53] *** Quits: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net) (Ping timeout: 121 seconds)
[23:58:37] <eddyb> if what you get from xoring the known metadata with the usize before the object, is 0, go back one usize and repeat
[23:59:03] *** Quits: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se) (Ping timeout: 121 seconds)
[23:59:06] <eddyb> but that is not great. you could use something smarter to encode the offset
[23:59:28] <bkoropoff> let me think
