[00:10:25] *** Joins: jgallagher (john@moz-6ge.dhn.131.24.IP)
[00:18:53] *** Quits: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se) (Ping timeout: 121 seconds)
[00:20:50] *** Quits: willem (willem@moz-facs2s.dynamic.upc.nl) (Quit: leaving)
[00:24:44] *** Joins: mib_ch9xq2 (Mibbit@moz-juv.9o3.252.72.IP)
[00:25:15] *** Quits: mib_ch9xq2 (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[00:28:54] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Client exited)
[00:31:20] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[00:38:42] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[00:52:34] *** Quits: Guest38 (textual@moz-4hh.6p3.217.74.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[00:57:06] <huon> Manishearth: invalid markdown: "slightly more complex in the case of [RwLock][rwlock]"
[00:57:39] <huon> Manishearth: (btw, your stylesheet doesn't give any indication when inline code is a link)
[00:58:41] * o11c mutters that changing link colors from the default is the greatest sin of a web dev
[00:59:30] <huon> Manishearth: (also, total nitpicks, but e.g. Box<T> and Vec<T> are only Send and 'static when T is, and, Mutex<T> is only Sync when T is Send)
[01:01:25] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[01:10:23] *** Joins: aatch (james@moz-is4j4r.cable.telstraclear.net)
[01:12:49] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[01:13:08] *** Quits: nham (nham@moz-lglsfe.il.comcast.net) (Ping timeout: 121 seconds)
[01:13:35] *** Quits: jincreator (Thunderbird@moz-d7i.i1g.195.175.IP) (Client exited)
[01:15:47] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[01:25:10] *** Joins: adu (ajr@moz-0foa9t.md.comcast.net)
[01:27:21] *** Joins: joneshf-laptop (joneshf@moz-l4h.b5s.208.98.IP)
[01:27:25] *** Joins: p1start (p1start@moz-nftjhe.org)
[01:31:25] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[01:32:34] *** Quits: cantsin (cantsin@moz-vu7a2t.ch) (Ping timeout: 121 seconds)
[01:33:36] *** Quits: shachaf (shachaf@moz-evr8ss.members.linode.com) (Ping timeout: 121 seconds)
[01:33:58] *** Quits: jld (jld@moz-onnk26.xlerb.net) (Ping timeout: 121 seconds)
[01:34:22] *** Quits: Eridius (kevin@moz-6opvqs.us) (Ping timeout: 121 seconds)
[01:34:26] *** Quits: seanmonstar (seanmonstar@moz-jd3i0j.fkdv.ulf6.3c01.2600.IP) (Ping timeout: 121 seconds)
[01:35:55] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[01:40:16] *** Joins: maralla (uid69246@moz-mq40mv.brockwell.irccloud.com)
[01:40:31] *** Quits: Sho (sho@moz-jrjdrg.cust.telecolumbus.net) (Quit: Konversation terminated!)
[01:43:48] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[01:44:58] *** Joins: eerie (eerie@moz-ja0t6l.red.bezeqint.net)
[01:48:44] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Connection closed)
[01:53:02] *** Quits: ytain (ytain@moz-ffpck2.dsl.teksavvy.com) (Quit: Textual IRC Client: www.textualapp.com)
[02:01:47] *** Quits: JuggleTux (tux@moz-ho0t1f.adslplus.ch) (Quit: leaving)
[02:03:17] *** chmanchester is now known as chmanchester|afk
[02:05:42] *** Quits: James (quassel@moz-q6malq.range86-148.btcentralplus.com) (Ping timeout: 121 seconds)
[02:17:51] *** Quits: eerie (eerie@moz-ja0t6l.red.bezeqint.net) (Connection closed)
[02:19:53] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[02:25:34] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[02:28:00] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[02:29:01] *** Joins: p1start (p1start@moz-nftjhe.org)
[02:29:17] *** Quits: harrisonclarke (harrisoncla@moz-v2i.4mr.177.142.IP) (Connection closed)
[02:30:04] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[02:30:15] *** Joins: harrisonclarke (harrisoncla@moz-v2i.4mr.177.142.IP)
[02:33:40] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[02:38:45] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[02:39:07] *** Joins: yourabi (yourabi@moz-q8dqtg.ca.comcast.net)
[02:39:44] *** Quits: yourabi (yourabi@moz-q8dqtg.ca.comcast.net) (Quit: Textual IRC Client: www.textualapp.com)
[02:39:48] *** Joins: p1start (p1start@moz-nftjhe.org)
[02:42:46] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[02:46:53] *** Joins: semarie (semarie@moz-s8pl2t.torservers.net)
[02:52:14] *** Quits: adu (ajr@moz-0foa9t.md.comcast.net) (Client exited)
[02:53:10] *** Quits: zz_kimundi (kimundi@moz-68riih.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[02:54:57] *** Joins: zz_kimundi (kimundi@moz-pu1phi.dip0.t-ipconnect.de)
[02:54:58] *** zz_kimundi is now known as kimundi
[02:58:01] *** Quits: harrisonclarke (harrisoncla@moz-v2i.4mr.177.142.IP) (Connection closed)
[03:04:02] *** Joins: kendle (Mibbit@moz-juv.9o3.252.72.IP)
[03:04:22] *** Quits: kendle (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[03:08:45] *** Quits: andars (andars@moz-bsldst.sntcca.sbcglobal.net) (Ping timeout: 121 seconds)
[03:10:48] <sfackler> acrichto: unusual network sadness? http://buildbot.rust-lang.org/builders/auto-linux-64-opt/builds/5151/steps/git/logs/stdio
[03:11:11] <acrichto> sfackler: yeah
[03:14:44] <frewsxcv> what does rustc use graphviz for?
[03:15:44] <semarie> it seems that rustc-beta-src.tar.gz archive under https://static.rust-lang.org/dist/ wasn't updated with beta on github. is it intented ?
[03:16:35] <semarie> (file date: 2015-05-17 04:02)
[03:16:59] *** Quits: ryanhiebert (ryanhiebert@moz-nsd5kl.ks.cox.net) (Connection closed)
[03:17:07] <mcpherrin> frewsxcv: I think it can print dependency graphs of crates
[03:17:26] *** Joins: avikpal (avikpal@moz-vkq.hfh.194.117.IP)
[03:17:35] *** Quits: avikpal (avikpal@moz-vkq.hfh.194.117.IP) (Connection closed)
[03:17:46] *** Joins: avikpal (avikpal@moz-vkq.hfh.194.117.IP)
[03:19:43] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[03:20:52] <sfackler> semarie: yeah, a new beta release is rolled out periodically, but not for every commit to the beta branch
[03:21:10] *** Joins: andars (andars@moz-bsldst.sntcca.sbcglobal.net)
[03:21:33] <semarie> oh, it is a manual process
[03:21:45] <semarie> so it makes sens :) thanks
[03:24:14] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[03:24:24] *** Quits: avikpal (avikpal@moz-vkq.hfh.194.117.IP) (Ping timeout: 121 seconds)
[03:26:02] *** Joins: Astrum|Lap (Astrum|Lap@moz-e4c.9jn.170.50.IP)
[03:32:19] *** Joins: avikpal (avikpal@moz-vkq.hfh.194.117.IP)
[03:36:48] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Connection closed)
[03:37:37] *** Quits: andars (andars@moz-bsldst.sntcca.sbcglobal.net) (Ping timeout: 121 seconds)
[03:37:47] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[03:39:19] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[03:40:14] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[03:42:16] *** Quits: avikpal (avikpal@moz-vkq.hfh.194.117.IP) (Ping timeout: 121 seconds)
[03:42:26] *** Joins: avikpal_ (avikpal@moz-obe.6lo.194.117.IP)
[03:44:05] *** Quits: maralla (uid69246@moz-mq40mv.brockwell.irccloud.com) (Quit: Connection closed for inactivity)
[03:46:35] *** Quits: erz (erz@moz-fiq1tl.broadband.corbina.ru) (Quit: My Mac has gone to sleep. ZZZzzz…)
[03:58:16] *** Quits: avikpal_ (avikpal@moz-obe.6lo.194.117.IP) (Connection closed)
[04:01:40] *** Joins: avikpal (avikpal@moz-obe.6lo.194.117.IP)
[04:07:20] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[04:08:56] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Connection closed)
[04:09:19] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[04:09:29] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[04:13:21] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Ping timeout: 121 seconds)
[04:13:52] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[04:14:25] *** Joins: Quxxy (chatzilla@moz-0nv.jkp.167.59.IP)
[04:16:55] *** Quits: Guest60769 (rovar@moz-6iq.47m.88.38.IP) (Ping timeout: 121 seconds)
[04:17:50] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[04:18:24] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[04:22:52] *** Joins: Guest60769 (rovar@moz-6iq.47m.88.38.IP)
[04:24:18] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[04:28:52] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[04:32:52] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[04:32:59] <Manishearth> huon: thx
[04:38:57] *** Quits: Guest60769 (rovar@moz-6iq.47m.88.38.IP) (Ping timeout: 121 seconds)
[04:43:47] *** Joins: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net)
[04:43:47] *** ChanServ sets mode: +o pcwalton
[04:43:51] *** Quits: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net) (A TLS packet with unexpected length was received.)
[04:44:51] *** Joins: Guest60769 (rovar@moz-6iq.47m.88.38.IP)
[04:49:29] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[04:49:37] *** Joins: ahartzheim (ahartzheim@moz-7dj.uug.52.72.IP)
[04:50:33] *** Joins: p1start (p1start@moz-nftjhe.org)
[05:00:13] *** Joins: genbattle (genbattle@moz-r09mao.xtra.co.nz)
[05:00:28] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[05:01:20] *** Joins: nodweber_ (nodweber@moz-knt.fgq.178.5.IP)
[05:03:26] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[05:03:29] *** Joins: avikpal_ (avikpal@moz-i6e.imq.194.117.IP)
[05:03:36] *** Quits: avikpal (avikpal@moz-obe.6lo.194.117.IP) (Ping timeout: 121 seconds)
[05:03:50] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[05:04:32] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[05:07:31] *** Quits: avikpal_ (avikpal@moz-i6e.imq.194.117.IP) (Connection closed)
[05:09:35] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[05:11:17] <Manishearth> huon: around?
[05:11:32] <Manishearth> I suspect ScopedKey can let us violate Sync
[05:13:37] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Ping timeout: 121 seconds)
[05:15:20] *** Joins: avikpal (avikpal@moz-i6e.imq.194.117.IP)
[05:18:27] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[05:20:54] <Manishearth> huon: http://is.gd/a8G2l6
[05:21:02] <Manishearth> I'm cloning an Rc from two different threads
[05:21:05] <Manishearth> pls send halp
[05:22:59] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[05:30:45] *** Quits: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com) (Ping timeout: 121 seconds)
[05:31:35] *** Quits: bjz (bjz@moz-4cc8qn.bigpond.net.au) (Quit: My Mac has gone to sleep. ZZZzzz…)
[05:31:54] *** Joins: bjz (bjz@moz-4cc8qn.bigpond.net.au)
[05:33:35] *** Quits: genbattle (genbattle@moz-r09mao.xtra.co.nz) (Ping timeout: 121 seconds)
[05:39:15] *** Quits: bjz (bjz@moz-4cc8qn.bigpond.net.au) (Quit: My Mac has gone to sleep. ZZZzzz…)
[05:41:53] *** Quits: nodweber_ (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[05:42:36] *** Quits: joh (uid13099@moz-2c7ap3.ealing.irccloud.com) (Quit: Connection closed for inactivity)
[05:51:55] <eternaleye> Manishearth: Does it need a !Sync impl?
[05:52:04] <eternaleye> Manishearth: Since IIR &T is Send if T is Sync?
[05:52:07] <eternaleye> *IIRC
[05:52:31] <Manishearth> eternaleye: the problem is that it has a Sync impl which is unqualified
[05:52:32] <Manishearth> http://is.gd/fhErmT
[05:52:38] <eternaleye> Mm
[05:52:53] <eternaleye> Manishearth: But since it's TLS, shouldn't it be !Send !Sync unconditionally?
[05:53:09] <Manishearth> I'm not sure how it works
[05:53:28] <Manishearth> I think it's supposed to be a sendable key
[05:54:11] <Manishearth> it's some voodoo
[05:55:18] <eternaleye> Incidentally, not a fan of how the Sync impl is hidden inside a "mod imp"
[05:55:33] <eternaleye> I'd very much prefer to see _in the docs_ when types are Send and/or Sync
[05:56:14] <eternaleye> Because that has real effects on the programmer
[05:56:49] <Manishearth> eternaleye: (a) that's due to some macro hackery
[05:57:14] <Manishearth> (b) the problem is that Sync and Send don't get shown in the docs when they get autoderived
[05:57:19] <Manishearth> via OIBIT
[05:57:44] *** Quits: avikpal (avikpal@moz-i6e.imq.194.117.IP) (Connection closed)
[05:58:10] <eternaleye> Mm
[05:58:59] <Manishearth> iut's not that itthe impl is hidden
[05:59:27] *** Joins: avikpal (avikpal@moz-t5f.nmc.194.117.IP)
[06:02:52] <eternaleye> ...you _really_ need to figure out what's borked with your irc/terminal setup
[06:04:06] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[06:05:49] <Manishearth> eternaleye: oh no that's just the internet being slow and me not getting to backspace
[06:06:29] <eternaleye> Manishearth: It inserted two characters that look like little pentagons.
[06:06:50] <Manishearth> huh
[06:07:00] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[06:07:18] <eternaleye> After "it" and before "the"
[06:07:32] <eternaleye> It probably _got_ the backspace, but mangled it
[06:08:01] *** Joins: avikpal_ (avikpal@moz-rgc.uhm.194.117.IP)
[06:08:03] *** Joins: mermirex (Mibbit@moz-juv.9o3.252.72.IP)
[06:08:18] *** Quits: avikpal (avikpal@moz-t5f.nmc.194.117.IP) (Ping timeout: 121 seconds)
[06:08:22] <Manishearth> nah
[06:08:25] <Manishearth> backspace works fin
[06:08:27] <Manishearth> *fine
[06:08:38] *** Quits: mermirex (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[06:08:55] <eternaleye> Manishearth: Well, two pentagon characters right where two backspaces would remove the "it", fixing the sentence, says something to me.
[06:09:27] <Manishearth> ah
[06:09:47] <Manishearth> https://github.com/rust-lang/rust/issues/25894 cc Guest60769 
[06:09:48] <Manishearth> oops
[06:09:50] <Manishearth> Gankro: 
[06:10:00] <eternaleye> Ah, and it seems to be a literal ^H or ^? (backspace) if I paste it into my terminal to try and get "ord" with perl
[06:10:12] *** Quits: _Vi (vi@moz-bbs.vhj.131.104.IP) (Ping timeout: 121 seconds)
[06:10:38] <Manishearth> ah
[06:12:36] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[06:13:27] <eternaleye> Mm, yeah, ^?
[06:13:28] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[06:13:38] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[06:13:48] <eternaleye> 0x7f literal
[06:15:31] <eternaleye> http://en.wikipedia.org/wiki/Delete_character
[06:15:33] <eternaleye> DOS/Windows never used this character in any way, using the backspace (0x08, or control-H) to delete the previous character. EGA/VGA fonts, as fonts used by Win32 console, usually have the "house" symbol ⌂ at 127 (0x7F) code point, see Code page 437 for details.
[06:15:40] <Manishearth> I know what ^H is :)
[06:15:56] <eternaleye> Yeah, I was more going for the explanation of the "house" character
[06:16:00] <eternaleye> Since that had confused me
[06:16:59] *** Quits: avikpal_ (avikpal@moz-rgc.uhm.194.117.IP) (Ping timeout: 121 seconds)
[06:17:08] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[06:18:47] *** Joins: avikpal (avikpal@moz-cbn.fgm.194.117.IP)
[06:23:44] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[06:27:59] *** Joins: nham (nham@moz-lglsfe.il.comcast.net)
[06:30:33] *** Quits: Diggsey (diggsey@moz-9s9ol4.dsl.pipex.com) (Ping timeout: 121 seconds)
[06:31:43] *** Joins: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com)
[06:32:13] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[06:32:23] *** Joins: cantsin (cantsin@moz-vu7a2t.ch)
[06:35:28] *** Quits: semarie (semarie@moz-s8pl2t.torservers.net) (Quit: WeeChat 1.1)
[06:41:24] *** Joins: avikpal_ (avikpal@moz-1bv.uhm.194.117.IP)
[06:42:44] *** Quits: avikpal (avikpal@moz-cbn.fgm.194.117.IP) (Ping timeout: 121 seconds)
[06:49:29] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[06:54:43] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[06:56:20] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Quit: It's a joke, it's all a joke.)
[06:57:47] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[06:59:49] *** Joins: mib_54acuu (Mibbit@moz-juv.9o3.252.72.IP)
[07:00:41] *** Quits: mib_54acuu (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[07:06:47] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[07:11:18] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[07:15:50] *** Quits: aatch (james@moz-is4j4r.cable.telstraclear.net) (Connection closed)
[07:19:19] *** Quits: avikpal_ (avikpal@moz-1bv.uhm.194.117.IP) (Ping timeout: 121 seconds)
[07:25:13] *** Joins: avikpal (avikpal@moz-5n4.mde.194.117.IP)
[07:28:36] *** Joins: Jesin (Jesin@moz-8sq.94j.16.107.IP)
[07:34:21] *** Joins: eerie (eerie@moz-ja0t6l.red.bezeqint.net)
[07:37:29] *** Quits: avikpal (avikpal@moz-5n4.mde.194.117.IP) (Connection closed)
[07:38:59] *** Joins: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se)
[07:44:54] *** Joins: c0170 (c0170@moz-4stj9o.cable.virginm.net)
[07:46:55] *** Quits: Quxxy (chatzilla@moz-0nv.jkp.167.59.IP) (Ping timeout: 121 seconds)
[07:53:09] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Connection closed)
[07:53:31] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[07:55:15] *** Joins: iitaku (textual@moz-u578hl.ocn.ne.jp)
[07:55:52] *** Quits: Kxepal (Miranda@moz-k6rt2h.pppoe.mtu-net.ru) (Ping timeout: 121 seconds)
[07:57:33] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Ping timeout: 121 seconds)
[07:57:43] *** Joins: Kxepal (Miranda@moz-fbtdfm.pppoe.mtu-net.ru)
[08:00:54] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[08:01:21] *** Quits: O01eg (o01eg@moz-stqs0u.1si9.4n8f.2698.2a02.IP) (Ping timeout: 121 seconds)
[08:04:22] *** Joins: eerie_ (eerie@moz-ja0t6l.red.bezeqint.net)
[08:05:28] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[08:07:23] *** Quits: eerie (eerie@moz-ja0t6l.red.bezeqint.net) (Ping timeout: 121 seconds)
[08:08:34] *** Joins: eerie (eerie@moz-8nl6b2.red.bezeqint.net)
[08:09:24] *** Quits: eerie_ (eerie@moz-ja0t6l.red.bezeqint.net) (Ping timeout: 121 seconds)
[08:11:28] *** Joins: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP)
[08:13:32] <geofft> if anyone can suggest how I can cross-compile Android tests (host is 64-bit Linux) so I can catch compilation failures I'd be grateful 
[08:13:53] <geofft> `make` seems not to try, `make check` seems to use the rust lying around in x86_64-linux-gnu/ :( 
[08:14:03] <Manishearth> geofft: you need an emulator I think?
[08:14:15] <geofft> I don't actually want to run the tests, I just want to compile them 
[08:14:19] <geofft> if possible? 
[08:14:31] <geofft> (my PR is failing to compile tests) 
[08:14:42] <Manishearth> dunno
[08:14:50] <Manishearth> geofft: check out the steps that buildbot runs
[08:15:01] <geofft> oh yeah, I guess that's the obvious right answer, duh 
[08:15:50] <geofft> aha, `make check-stage2-T-arm-linux-androideabi-H-x86_64-unknown-linux-gnu` 
[08:16:14] <geofft> I _almost_ had figured that out on my own! but not quite. thanks. 
[08:16:22] <Manishearth> heh
[08:17:27] *** Quits: Astrum|Lap (Astrum|Lap@moz-e4c.9jn.170.50.IP) (Client exited)
[08:17:30] *** Quits: iitaku (textual@moz-u578hl.ocn.ne.jp) (Quit: My Mac has gone to sleep. ZZZzzz…)
[08:17:45] *** Joins: avikpal (avikpal@moz-5n4.mde.194.117.IP)
[08:25:41] *** Joins: munksgaard (munksgaard@moz-478pev.u.parknet.dk)
[08:31:53] *** Quits: Skyler (Skyler@moz-rv949t.sd.cox.net) (Client exited)
[08:31:58] *** Joins: Skyler (Skyler@moz-rv949t.sd.cox.net)
[08:38:03] *** Quits: munksgaard (munksgaard@moz-478pev.u.parknet.dk) (Ping timeout: 121 seconds)
[08:44:36] *** Joins: eerie_ (eerie@moz-qld.8t4.67.109.IP)
[08:45:06] *** Joins: avikpal_ (avikpal@moz-307.cra.194.117.IP)
[08:45:47] *** Quits: avikpal (avikpal@moz-5n4.mde.194.117.IP) (Ping timeout: 121 seconds)
[08:46:36] *** Quits: eerie (eerie@moz-8nl6b2.red.bezeqint.net) (Ping timeout: 121 seconds)
[08:48:27] *** Joins: avikpal (avikpal@moz-uf6.mf2.194.117.IP)
[08:49:59] *** Quits: avikpal_ (avikpal@moz-307.cra.194.117.IP) (Ping timeout: 121 seconds)
[08:55:03] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[08:59:37] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[09:00:37] *** Joins: dinfuehr (dinfuehr@moz-ltusc3.highway.telekom.at)
[09:04:07] *** Quits: nham (nham@moz-lglsfe.il.comcast.net) (Quit: leaving)
[09:05:22] *** Joins: eibwen (eibwen@moz-qjhnnl.dip0.t-ipconnect.de)
[09:08:29] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[09:09:22] *** Quits: avikpal (avikpal@moz-uf6.mf2.194.117.IP) (Ping timeout: 121 seconds)
[09:10:30] *** Joins: munksgaard (munksgaard@moz-vj4.hq0.225.130.IP)
[09:12:25] *** Quits: eerie_ (eerie@moz-qld.8t4.67.109.IP) (Connection closed)
[09:12:41] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[09:14:31] *** Joins: larhat (Adium@moz-vlo5br.cable.virginm.net)
[09:16:10] *** Joins: avikpal (avikpal@moz-761.p8t.194.117.IP)
[09:20:34] *** Quits: avikpal (avikpal@moz-761.p8t.194.117.IP) (Ping timeout: 121 seconds)
[09:25:14] *** Joins: iitaku (textual@moz-u578hl.ocn.ne.jp)
[09:25:55] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[09:27:01] *** Joins: avikpal (avikpal@moz-qgc.onn.194.117.IP)
[09:28:07] *** Quits: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com) (Ping timeout: 121 seconds)
[09:30:08] *** Quits: larhat (Adium@moz-vlo5br.cable.virginm.net) (Quit: Leaving.)
[09:31:32] *** Joins: eerie (eerie@moz-qld.8t4.67.109.IP)
[09:32:48] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[09:33:21] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[09:35:20] *** Quits: andrewseidl (andrewseidl@moz-7e86q0.aas.io) (A TLS packet with unexpected length was received.)
[09:36:31] *** Joins: laumann (thomas@moz-gqpfnm.science.ku.dk)
[09:37:32] *** Quits: avikpal (avikpal@moz-qgc.onn.194.117.IP) (Connection closed)
[09:37:35] *** Joins: avikpal_ (avikpal@moz-af8.p8t.194.117.IP)
[09:39:31] *** Quits: iitaku (textual@moz-u578hl.ocn.ne.jp) (Quit: My Mac has gone to sleep. ZZZzzz…)
[09:43:13] *** Joins: avikpal (avikpal@moz-7ra.loq.194.117.IP)
[09:43:33] *** Quits: avikpal_ (avikpal@moz-af8.p8t.194.117.IP) (Ping timeout: 121 seconds)
[09:48:18] *** Joins: aepsil0n (eduard@moz-6491ha.mv2h.pepi.8071.2a02.IP)
[09:49:14] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[09:50:06] <eddyb> mcpherrin: there is no direct symbol -> type mapping
[09:51:03] <eddyb> mcpherrin: you may be able to list all known symbols and their types and make a map out of that
[09:51:42] *** Joins: X-Scale (gbabios@moz-qvs1f5.rev.vodafone.pt)
[09:52:15] <Manishearth> eddyb: oy, got a data race in safe code, need someone smarter than me (who understands TLS) to verify
[09:53:35] *** Joins: iitaku (textual@moz-u578hl.ocn.ne.jp)
[09:53:46] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[09:54:22] *** Joins: aochagavia (aochagavia@moz-jgp6eg.static.ziggozakelijk.nl)
[09:56:15] *** Joins: mukilan (mukilan@moz-agl.8le.164.122.IP)
[09:57:02] *** Quits: dinfuehr (dinfuehr@moz-ltusc3.highway.telekom.at) (Connection closed)
[10:01:04] *** Joins: sigma (sigma@moz-k1ghg8.range109-153.btcentralplus.com)
[10:02:18] *** Quits: avikpal (avikpal@moz-7ra.loq.194.117.IP) (Connection closed)
[10:02:19] *** Joins: avikpal_ (avikpal@moz-9v7.167.227.117.IP)
[10:05:49] *** Quits: iitaku (textual@moz-u578hl.ocn.ne.jp) (Quit: My Mac has gone to sleep. ZZZzzz…)
[10:06:02] *** Joins: iitaku (textual@moz-u578hl.ocn.ne.jp)
[10:09:03] *** Quits: eerie (eerie@moz-qld.8t4.67.109.IP) (Connection closed)
[10:15:49] *** Joins: duesenfranz_ (jona@moz-711djm.tirol.surfer.at)
[10:16:18] *** Quits: iitaku (textual@moz-u578hl.ocn.ne.jp) (Quit: My Mac has gone to sleep. ZZZzzz…)
[10:16:48] *** Joins: iitaku (textual@moz-u578hl.ocn.ne.jp)
[10:21:12] *** Joins: avikpal (avikpal@moz-hpb.3e4.194.117.IP)
[10:22:35] *** Quits: avikpal_ (avikpal@moz-9v7.167.227.117.IP) (Connection closed)
[10:23:48] *** Parts: aochagavia (aochagavia@moz-jgp6eg.static.ziggozakelijk.nl) ("Leaving")
[10:28:20] <bluss> here's a strange lifetime inference failure with closures  https://play.rust-lang.org/?gist=cd7384addc1f957de3a3&version=nightly
[10:28:43] <bluss> |x: &[_]| doesn't infer, but |x| { let x: &[_] = x   is fine
[10:32:28] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[10:35:56] *** Joins: laumann_ (thomas@moz-33d.hq0.225.130.IP)
[10:37:02] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[10:37:57] *** Quits: laumann (thomas@moz-gqpfnm.science.ku.dk) (Ping timeout: 121 seconds)
[10:43:20] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[10:47:24] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[10:48:51] *** Quits: iitaku (textual@moz-u578hl.ocn.ne.jp) (Quit: My Mac has gone to sleep. ZZZzzz…)
[10:49:14] *** Joins: nicknikolov (nicknikolov@moz-ko7.r6m.215.90.IP)
[10:49:17] *** Quits: nicknikolov (nicknikolov@moz-ko7.r6m.215.90.IP) (Connection closed)
[10:49:18] *** Joins: nicknikolov (nicknikolov@moz-ko7.r6m.215.90.IP)
[10:49:22] *** Joins: iitaku (textual@moz-u578hl.ocn.ne.jp)
[10:53:48] *** Quits: X-Scale (gbabios@moz-qvs1f5.rev.vodafone.pt) (Connection closed)
[10:54:10] <bluss> once I figured out this workaround though ^ I've had productive use of self recursive closures
[10:59:19] *** Quits: iitaku (textual@moz-u578hl.ocn.ne.jp) (Quit: My Mac has gone to sleep. ZZZzzz…)
[10:59:49] *** Joins: iitaku (textual@moz-u578hl.ocn.ne.jp)
[11:02:06] *** Joins: erz (erz@moz-imu.af0.232.213.IP)
[11:03:35] *** Quits: mukilan (mukilan@moz-agl.8le.164.122.IP) (A TLS packet with unexpected length was received.)
[11:03:40] *** Joins: joh (uid13099@moz-2c7ap3.ealing.irccloud.com)
[11:07:02] *** Joins: ytain (ytain@moz-ffpck2.dsl.teksavvy.com)
[11:09:46] *** Joins: eerie (eerie@moz-qld.8t4.67.109.IP)
[11:10:56] *** Joins: erz_ (erz@moz-fiq1tl.broadband.corbina.ru)
[11:11:50] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: Textual IRC Client: www.textualapp.com)
[11:12:53] *** Quits: erz (erz@moz-imu.af0.232.213.IP) (Ping timeout: 121 seconds)
[11:13:51] *** Quits: eerie (eerie@moz-qld.8t4.67.109.IP) (Ping timeout: 121 seconds)
[11:19:39] *** Joins: mukilan (mukilan@moz-agl.8le.164.122.IP)
[11:20:01] *** Joins: eerie (eerie@moz-qld.8t4.67.109.IP)
[11:26:43] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[11:29:11] *** Quits: eerie (eerie@moz-qld.8t4.67.109.IP) (Connection closed)
[11:31:07] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[11:31:31] *** Joins: avikpal_ (avikpal@moz-nlh.bv6.226.117.IP)
[11:32:19] *** Quits: avikpal (avikpal@moz-hpb.3e4.194.117.IP) (Connection closed)
[11:32:29] *** Joins: avikpal (avikpal@moz-hpb.3e4.194.117.IP)
[11:36:02] *** Quits: avikpal_ (avikpal@moz-nlh.bv6.226.117.IP) (Ping timeout: 121 seconds)
[11:38:31] *** Joins: eerie (eerie@moz-qld.8t4.67.109.IP)
[11:39:19] *** Joins: avikpal_ (avikpal@moz-nlh.bv6.226.117.IP)
[11:41:28] *** Quits: avikpal (avikpal@moz-hpb.3e4.194.117.IP) (Ping timeout: 121 seconds)
[11:43:48] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[11:48:26] *** Joins: avikpal (avikpal@moz-tvm.hfh.194.117.IP)
[11:48:58] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[11:49:53] *** Joins: larhat (Adium@moz-vlo5br.cable.virginm.net)
[11:50:33] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[11:51:19] *** Quits: avikpal_ (avikpal@moz-nlh.bv6.226.117.IP) (Ping timeout: 121 seconds)
[11:54:40] *** Quits: iitaku (textual@moz-u578hl.ocn.ne.jp) (Quit: My Mac has gone to sleep. ZZZzzz…)
[11:59:37] *** Joins: lorenzb (lorenzb@moz-3jglg9.ethz.ch)
[12:00:54] *** Joins: killercup (killercup@moz-723bo4.dip0.t-ipconnect.de)
[12:01:12] *** Quits: nicknikolov (nicknikolov@moz-ko7.r6m.215.90.IP) (Connection closed)
[12:03:27] *** Quits: avikpal (avikpal@moz-tvm.hfh.194.117.IP) (Ping timeout: 121 seconds)
[12:08:23] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[12:10:45] *** Joins: nodweber_ (nodweber@moz-knt.fgq.178.5.IP)
[12:12:58] <huon> Manishearth: nice catch!
[12:13:50] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[12:15:54] *** Joins: _Vi (vi@moz-bbs.vhj.131.104.IP)
[12:16:47] *** Joins: nicknikolov (nicknikolov@moz-ko7.r6m.215.90.IP)
[12:17:14] *** Joins: avikpal (avikpal@moz-aoe.6lo.194.117.IP)
[12:17:35] <WindowsBunny> Oh how I wish Rust allowed recursive glob imports
[12:17:45] <WindowsBunny> it would make my life so much easier
[12:19:53] <Mutabah> WindowsBunny: In what context?
[12:20:03] <Mutabah> (does it not allow them)
[12:20:18] <WindowsBunny> Mutabah: mod A globs imports B and mod B glob imports A
[12:20:38] <Mutabah> Oh.. .what the, why are you doing that?
[12:20:44] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[12:20:49] *** Quits: nicknikolov (nicknikolov@moz-ko7.r6m.215.90.IP) (Ping timeout: 121 seconds)
[12:21:06] <WindowsBunny> Mutabah: Because winapi
[12:21:55] <Manishearth> huon: help
[12:22:11] <Manishearth> huon: why is there a test that says that ScopedKey should be able to use Cell?
[12:22:15] * Manishearth confused
[12:22:30] *** Quits: jgallagher (john@moz-6ge.dhn.131.24.IP) (Ping timeout: 121 seconds)
[12:23:14] *** Joins: jgallagher (john@moz-6ge.dhn.131.24.IP)
[12:24:11] <Manishearth> not only is ScopedKey broken, there's a test that ensures it stays broken :p
[12:24:19] <Manishearth> (see the PR)
[12:24:39] *** Joins: nicknikolov (nicknikolov@moz-ko7.r6m.215.90.IP)
[12:24:50] <huon> Manishearth: I don't undersatnd what "use Cell" means?
[12:24:58] <huon> maybe you could link me to the test? :)
[12:25:18] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[12:25:19] <Manishearth> huon: https://github.com/rust-lang/rust/pull/25897
[12:25:30] <Manishearth> https://github.com/Manishearth/rust/blob/scoped_strikes_again/src/libstd/thread/scoped_tls.rs#L261
[12:25:33] <Manishearth> fn cell_allowed()
[12:25:39] <Manishearth> no, cell should not be allowed
[12:25:43] *** Joins: iitaku (textual@moz-u578hl.ocn.ne.jp)
[12:25:49] <huon> why shouldn't cell be allowed?
[12:26:05] <huon> if it stays on one thread, Cell is fine
[12:26:12] <Manishearth> well, cell should not be allowed in a way that has it being sent across thread boundaries
[12:26:16] <huon> (the assumption is that it stays on one thread)
[12:26:23] <huon> since it's designed to be a thread local 
[12:26:26] <Manishearth> yeah
[12:26:37] <Manishearth> huon: why is there a sync impl in the first place then O.o
[12:26:49] <huon> because it presumably is designed to work in a `static`
[12:27:11] <Manishearth> also, my PR fails that test because Cell isn't sync. I should have a closer look
[12:27:46] <Manishearth> huon: how does 'static affect syncness?
[12:27:53] <huon> not 'static
[12:28:03] <huon> `static NAME: Type` etc.
[12:28:05] <Manishearth> yeah
[12:28:18] <Manishearth> how does that affect syncness? :)
[12:28:20] <huon> playbot: static X: Option<Cell<u8>> = None;
[12:28:21] -playbot- <anon>:9:26: 9:34 error: use of undeclared type name `Cell`
[12:28:21] -playbot- <anon>:9         static X: Option<Cell<u8>> = None;
[12:28:21] -playbot- output truncated; full output at: http://bit.ly/1FKcikz
[12:28:27] <huon> playbot: static X: Option<std::cell::Cell<u8>> = None;
[12:28:28] -playbot- <anon>:9:49: 9:53 error: the trait `core::marker::Sync` is not implemented for the type `core::cell::UnsafeCell<u8>` [E0277]
[12:28:29] -playbot- <anon>:9         static X: Option<std::cell::Cell<u8>> = None;
[12:28:29] -playbot- output truncated; full output at: http://bit.ly/1HUGYmF
[12:28:35] <Manishearth> ohhh
[12:28:37] <Manishearth> nice
[12:28:40] <huon> it's the other way around :P
[12:28:49] <huon> Sync-ness affects `static`-legality
[12:29:27] <Manishearth> huon: so how do we fix this?
[12:29:41] <Manishearth> T: Sync makes it impossible to put cell types in it, which I assume we want
[12:29:49] *** Quits: eerie (eerie@moz-qld.8t4.67.109.IP) (Connection closed)
[12:30:17] * Manishearth proposes burninating all APIs which talk of scopedness
[12:31:06] <huon> I think we fix this by making the Sync requirement on statics more precise 
[12:31:12] <huon> but I'm unsure if that's accurate
[12:31:14] <Manishearth> oh
[12:31:15] <Manishearth> hmm
[12:31:26] <huon> (i.e. there may be unintended fall-out)
[12:31:28] <Manishearth> yeah
[12:31:40] <huon> I don't think a knee-jerk killing of scoped-ness is sensible
[12:31:46] <Manishearth> huon: I was joking :p
[12:31:55] <huon> although maybe #[unstable] and detailed thinking would be helpful
[12:32:17] <Manishearth> T: Sync on this already unstable API would be a quickfix (breaks ScopedKey<Cell> though)
[12:32:24] *** Quits: duesenfranz_ (jona@moz-711djm.tirol.surfer.at) (Client exited)
[12:32:26] <Manishearth> I'm not sure I like the Sync requirement for statics
[12:32:37] <Manishearth> it seems like Sync is being used as a proxy for something
[12:32:46] <Mutabah> Manishearth: It makes perfect sense
[12:32:56] <Mutabah> Manishearth: Sync = Safe for multiple threads to have &-ptrs
[12:32:59] <Manishearth> yep
[12:33:12] <Manishearth> not when you consider that statics also include TLS and scoped TLS
[12:33:20] <Mutabah> A static is shared between all theads, so they all could get... ah
[12:33:29] <huon> I'd rather regard those as separate kinds of globals
[12:33:34] <Mutabah> Yeah, same here
[12:33:35] <Manishearth> yeah
[12:33:46] <Mutabah> First-class thread-local variables (for non-Sync) types would be nice
[12:33:48] <Manishearth> can we not abuse `static` for TLS (and just use it internally)?
[12:33:54] <Mutabah> (thread static)?
[12:34:01] <Manishearth> static mut!~
[12:34:04] <Mutabah> or (static thread S_SOMETHING)
[12:34:14] <huon> Manishearth: why's using `static` an abuse? it's designed to be a global memory location
[12:34:31] *** Quits: larhat (Adium@moz-vlo5br.cable.virginm.net) (Quit: Leaving.)
[12:34:41] <huon> `static mut` isn't safe even on a single thread
[12:34:45] <Manishearth> hm
[12:34:52] <Manishearth> that I know
[12:34:58] <huon> the compiler can't disallow taking &mut's in multiple locations
[12:35:00] <Manishearth> Sorry, wasn't clear about the static thing
[12:35:37] *** Joins: eerie (eerie@moz-qld.8t4.67.109.IP)
[12:35:39] <Manishearth> forget what I said about static abuse -- I thought I saw an issue there, but it's clearer (and consequently muddier) now
[12:36:41] *** Joins: duesenfranz_ (jona@moz-711djm.tirol.surfer.at)
[12:39:05] <Manishearth> huon: wait, what's special about ScopedKey that causes these problems (where LocalKey doesn't)?
[12:39:19] <Manishearth> the API is different, but the Send/Sync/static ness should be the same, no?
[12:39:26] <Manishearth> both are !Send
[12:40:46] * Manishearth is trying to pinpoint a problem in the API, if possible. I'm too sleepy to think about changing compiler internals now ;p
[12:41:26] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Quit: )
[12:44:09] *** Quits: avikpal (avikpal@moz-aoe.6lo.194.117.IP) (Ping timeout: 121 seconds)
[12:53:53] *** Quits: Simplebrain (Simplebrain@moz-6h4u6b.skybroadband.com) (Quit: Leaving)
[12:54:42] *** Joins: avikpal (avikpal@moz-gop.igl.194.117.IP)
[12:55:06] *** Quits: nodweber_ (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[12:57:32] *** Quits: eerie (eerie@moz-qld.8t4.67.109.IP) (Connection closed)
[13:02:47] *** Quits: Kxepal (Miranda@moz-fbtdfm.pppoe.mtu-net.ru) (Ping timeout: 121 seconds)
[13:14:53] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[13:15:24] *** Joins: James (quassel@moz-q6malq.range86-148.btcentralplus.com)
[13:19:25] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[13:19:44] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[13:19:54] *** Quits: lorenzb (lorenzb@moz-3jglg9.ethz.ch) (Quit: Bye bye)
[13:22:33] *** Quits: madmalik (uid13697@moz-lfin5p.brockwell.irccloud.com) (Quit: Connection closed for inactivity)
[13:23:46] *** Quits: avikpal (avikpal@moz-gop.igl.194.117.IP) (Ping timeout: 121 seconds)
[13:24:23] *** Joins: avikpal (avikpal@moz-2db.36b.194.117.IP)
[13:26:51] *** Joins: rkruppe_ (chatzilla@moz-3nj.rnu.131.95.IP)
[13:27:41] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[13:27:53] *** Joins: rkruppe__ (chatzilla@moz-3nj.rnu.131.95.IP)
[13:29:04] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[13:29:04] *** rkruppe__ is now known as rkruppe
[13:29:41] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[13:29:42] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[13:31:01] *** Quits: rkruppe_ (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[13:36:48] *** Quits: eibwen (eibwen@moz-qjhnnl.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[13:37:04] *** Quits: avikpal (avikpal@moz-2db.36b.194.117.IP) (Connection closed)
[13:49:36] *** Joins: avikpal (avikpal@moz-2db.36b.194.117.IP)
[13:52:24] *** Joins: larhat (Adium@moz-vlo5br.cable.virginm.net)
[13:58:14] *** Joins: eerie (eerie@moz-qld.8t4.67.109.IP)
[14:02:19] *** Quits: eerie (eerie@moz-qld.8t4.67.109.IP) (Ping timeout: 121 seconds)
[14:05:42] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[14:10:07] *** Quits: laumann_ (thomas@moz-33d.hq0.225.130.IP) (Ping timeout: 121 seconds)
[14:11:15] *** Joins: laumann (thomas@moz-33d.hq0.225.130.IP)
[14:12:56] *** Joins: harrisonclarke (harrisoncla@moz-th044a.ns.bellaliant.net)
[14:15:32] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[14:15:46] *** Quits: duesenfranz_ (jona@moz-711djm.tirol.surfer.at) (Client exited)
[14:18:11] *** Quits: larhat (Adium@moz-vlo5br.cable.virginm.net) (Quit: Leaving.)
[14:21:02] *** Joins: schnozzle (Mibbit@moz-juv.9o3.252.72.IP)
[14:21:57] <eddyb> the key shouldn't be Sync
[14:22:10] <eddyb> #[thread_local] shouldn't require Sync
[14:22:24] <eddyb> maybe it should require !Sync
[14:22:46] *** Joins: larhat (Adium@moz-vlo5br.cable.virginm.net)
[14:23:06] <Mutabah> eddyb: Nah, just not requiring Sync will do :)
[14:23:28] <eddyb> nono
[14:23:49] *** Joins: avikpal_ (avikpal@moz-42h.3e4.194.117.IP)
[14:24:33] *** Quits: avikpal (avikpal@moz-2db.36b.194.117.IP) (Ping timeout: 121 seconds)
[14:24:34] *** Joins: nodweber_ (nodweber@moz-knt.fgq.178.5.IP)
[14:25:20] *** Quits: ytain (ytain@moz-ffpck2.dsl.teksavvy.com) (Quit: Textual IRC Client: www.textualapp.com)
[14:26:42] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[14:27:08] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[14:27:36] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[14:28:02] <eddyb> &'static T: Send iff T: Sync
[14:28:30] <eddyb> you don't want safe borrows of Sync thread_local's
[14:29:02] <eddyb> static mut is useless, so, really, you'll be using it with Cell and RefCell most of the time
[14:29:06] <eddyb> which aren't Sync
[14:29:17] <eddyb> Manishearth: want to make this change?
[14:29:21] *** Joins: madmalik (uid13697@moz-lfin5p.brockwell.irccloud.com)
[14:29:51] <eddyb> keep in mind the TLS stuff is only #[thread_local] in some conditions
[14:30:53] <eddyb> huon: can you confirm this makes sense?
[14:31:09] *** Quits: harrisonclarke (harrisoncla@moz-th044a.ns.bellaliant.net) (Connection closed)
[14:31:35] <eddyb> #[thread_local] static FOO: Cell<bool> = Cell::new(false); should work now on a nightly, btw
[14:31:51] <eddyb> it's just that not all platforms support it, and the TLS support abstracts over that
[14:32:37] <eddyb> (it should work modulo the Sync problem)
[14:33:18] <eddyb> &'static LocalKey is safe to share because it's only a wrapper, AFAIK
[14:33:37] <eddyb> but ScopedKey doesn't have the same indirection
[14:34:25] <eddyb> (maybe it should? LLVM devirtualizes that stuff readily, unless you pass the key around instead of using it directly)
[14:34:46] *** Quits: avikpal_ (avikpal@moz-42h.3e4.194.117.IP) (Ping timeout: 121 seconds)
[14:35:18] *** Quits: schnozzle (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:36:06] *** Joins: avikpal (avikpal@moz-63p.imq.194.117.IP)
[14:36:10] <Manishearth> eddyb: *Key can be explicitly marked !Send if needed
[14:36:15] *** Joins: rkruppe_ (chatzilla@moz-3nj.rnu.131.95.IP)
[14:36:26] <eddyb> Manishearth: that is useless
[14:36:43] <Manishearth> (I was referring to your suggestion that it should require !Sync)
[14:36:45] <eddyb> Manishearth: because &'static {Scoped,Local}Key is what you deal with
[14:37:03] * Manishearth is still parsing the rest of what you said
[14:37:24] <eddyb> you CANNOT make #[thread_local] safe without requiring !Sync
[14:37:35] <eddyb> that's pretty much what I said
[14:37:53] <eddyb> also that allowing Sync is almost useless
[14:38:04] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[14:38:09] <Manishearth> &'static T: Send iff T: Sync --> that can be circumvented with a !Send refinemt
[14:38:10] *** rkruppe_ is now known as rkruppe
[14:38:16] <Manishearth> so we can allow Sync types
[14:38:44] <Manishearth> eddyb: &'static LocalKey is not Send
[14:38:51] <Manishearth> it can't be shared
[14:39:08] <Manishearth> wait no
[14:39:24] <eddyb> LocalKey is harmless though
[14:39:32] <eddyb> it doesn't have pointers to the actual data
[14:39:38] <Manishearth> I'll get back to you, between things right now and hard to think
[14:39:52] <eddyb> Manishearth: we can't allow Sync types
[14:40:22] <eddyb> Manishearth: you're only going to fix some usecases with !Send (which you can't impl on a &T, I'm pretty sure)
[14:40:23] <Manishearth> why?
[14:40:34] <Manishearth> oh gah youre right
[14:40:43] <eddyb> but other ones are going to be broken
[14:41:11] <eddyb> #[thread_local] static FOO: i32 = 0; is possible right now
[14:41:15] <eddyb> that is memory unsafe
[14:41:22] <Manishearth> ..why?
[14:41:29] <Mutabah> eddyb: because you can send a pointer of that?
[14:41:35] <eddyb> the fact that you need to ask the question is part of the problem
[14:41:37] <eddyb> Mutabah: yes
[14:41:44] <Manishearth> eddyb: ?
[14:41:45] <eddyb> you can pass the pointer to another thread and die
[14:41:52] <Manishearth> oh I see
[14:42:09] <Mutabah> Actually... how can that be a safety problem? Threads share an address space...
[14:42:12] <eddyb> and nobody has come with a good design for lifetimes "shorter" than 'static
[14:42:15] <eddyb> Mutabah: wat
[14:42:16] *** Quits: larhat (Adium@moz-vlo5br.cable.virginm.net) (Quit: Leaving.)
[14:42:26] <eddyb> Mutabah: TLS is an allocation
[14:42:35] <Mutabah> ... yes... oh ... right
[14:42:35] <eddyb> oh
[14:42:44] <eddyb> you mean it would point to a different thread's TLS
[14:42:46] <Mutabah> Thread dies while the pointer is active
[14:43:05] <eddyb> now use a mutex and get access to the inner data of a different mutex
[14:43:08] *** Quits: nicknikolov (nicknikolov@moz-ko7.r6m.215.90.IP) (Connection closed)
[14:43:11] <eddyb> that is also memory unsafe :P
[14:43:29] *** Joins: nicknikolov (nicknikolov@moz-ko7.r6m.215.90.IP)
[14:43:37] <Mutabah> eddyb: I don't think TLS reuses addresses
[14:43:37] *** Quits: nicknikolov (nicknikolov@moz-ko7.r6m.215.90.IP) (Connection closed)
[14:43:38] <eddyb> and 'static is no longer priviledged
[14:43:47] <eddyb> so, really, you can't fix this with a lifetime
[14:44:02] <eddyb> because any &T is Send
[14:44:30] <Mutabah> So, the solution is to have a way of annotating a primitive to be non-Sync?
[14:44:37] <eddyb> Mutabah: no
[14:44:47] <Mutabah> I guess using a RefCell on it does that for you
[14:45:14] <eddyb> Mutabah: the cool thing is that a #[thread_local] static has to have inner mutability to be useful
[14:45:24] *** Joins: harrisonclarke (harrisoncla@moz-4oc07n.ns.bellaliant.net)
[14:45:25] <eddyb> static mut doesn't count for anything reasonable
[14:45:33] <eddyb> Mutabah: so you don't lose anything, really
[14:45:50] <eddyb> Cell, RefCell, or some other abstraction
[14:46:13] <Mutabah> yep
[14:46:38] <eddyb> it might be a bit hard to build certain safe abstractions if you can't let the !Sync requirement bubble up
[14:46:49] <eddyb> you can't just write !Sync
[14:47:00] <eddyb> as a bound
[14:48:08] <eddyb> but I believe it's a step forward
[14:48:42] <Manishearth> eddyb: could you leave a comment on the issue to this effect?
[14:48:47] <Manishearth> as in, your proposal
[14:48:48] <eddyb> what issue?
[14:48:55] <Manishearth> https://github.com/rust-lang/rust/issues/25897
[14:49:08] * Manishearth is a bit tied up right now, but will ponder more on it later
[14:49:38] <Manishearth> also I think between the Send/Sync blog post and the ScopedKey thing I broke my brain or something :p
[14:49:41] *** Joins: avikpal_ (avikpal@moz-l34.0kg.194.117.IP)
[14:49:43] <eddyb> you mean gh25894?
[14:49:43] <[o__o]> unsafe: ScopedKey allows for Sync-ification of non-Sync data: https://github.com/rust-lang/rust/issues/25894
[14:50:03] *** Quits: avikpal (avikpal@moz-63p.imq.194.117.IP) (Ping timeout: 121 seconds)
[14:50:12] <Manishearth> yeah
[14:50:20] <Manishearth> the PR is wrong
[14:50:45] <eddyb> hmm, I may know how to deal with the inversion for statics
[14:51:04] <eddyb> impl<T> !Sync for ScopedKey<T> where T: Sync
[14:51:14] <eddyb> can that even work?
[14:52:09] *** Quits: faern (faern@moz-4ef681.jagochmittmoln.se) (Connection closed)
[14:52:12] *** Quits: iitaku (textual@moz-u578hl.ocn.ne.jp) (Quit: My Mac has gone to sleep. ZZZzzz…)
[14:52:40] *** Joins: faern (faern@moz-4ef681.jagochmittmoln.se)
[14:52:58] <eddyb> but that would still have differing characteristics depending on implementation details
[14:53:00] <eddyb> ugh
[14:53:58] <kimundi> can't you just make ScopedKey opt out of Sync in general?
[14:54:19] <kimundi> like, just remove the "where T: Sync" part
[14:54:29] <eddyb> kimundi: then it can't go in a static
[14:54:40] <eddyb> which it has to on platforms w/o TLS
[14:55:04] <kimundi> ah. well either statics need to change then or this will not work :P
[14:55:47] <eddyb> or we use option III
[14:55:50] <kimundi> Anyway, I have no idea what I'm talking about...
[14:56:10] <eddyb> (which is something I haven't said yet because of how ridiculous it is)
[14:56:53] <eddyb> #[unsafe(non_sync_static)]
[14:58:07] *** Joins: avikpal (avikpal@moz-4ap.0kg.194.117.IP)
[14:58:42] *** Quits: avikpal_ (avikpal@moz-l34.0kg.194.117.IP) (Ping timeout: 121 seconds)
[14:58:53] *** Joins: eerie (eerie@moz-qld.8t4.67.109.IP)
[15:01:22] *** Joins: mw (mw@moz-f1s7jp.vie.surfer.at)
[15:01:27] <kimundi> eddyb: Heh, I was just about to propose "unsafe static" or just using "static mut" :P
[15:01:43] <eddyb> no
[15:01:52] <eddyb> it has to be a safe static but non-Sync
[15:02:05] * kimundi never liked the weird asymetry that started with statics requiring Sync
[15:02:06] <eddyb> it's actually Sync, but you don't want to expose that property
[15:02:15] <eddyb> kimundi: asymetry?
[15:02:39] <kimundi> Okay, maybe I'm missing stuff, is the static required to be public and user facing? never used the tls apis...
[15:03:00] <eddyb> kimundi: the key itself is in a static
[15:03:10] *** Quits: eerie (eerie@moz-qld.8t4.67.109.IP) (Ping timeout: 121 seconds)
[15:03:20] <eddyb> in the LocalKey case, it might as well be a const, it's just a pair of function pointers which can be used to access the data
[15:05:49] <eddyb> in the ScopedKey case, the static which may or may not be #[thread_local] is the one you directly access
[15:05:56] <eddyb> kimundi: https://github.com/rust-lang/rust/issues/25894#issuecomment-107050015
[15:06:07] *** Joins: duesenfranz_ (jona@moz-711djm.tirol.surfer.at)
[15:07:19] <Manishearth> eddyb: Ah, I get you now
[15:09:16] <kimundi> So scoped_thread_local!(static RC: Rc<u8>); creates a ScopedKey static that is either in efficient TLS or not depending on platform?
[15:09:29] <kimundi> ANd that static is the public ibnterface for accessing it?
[15:09:50] <eddyb> yes
[15:10:46] <eddyb> a similar thing happens in the LocalKey case, but the maybe-#[thread_local] static is hidden in that case
[15:10:51] <eddyb> you can read the implementation now btw
[15:11:27] <eddyb> https://github.com/rust-lang/rust/blob/master/src/libstd/thread/local.rs#L120-L129
[15:12:03] <eddyb> and https://github.com/rust-lang/rust/blob/master/src/libstd/thread/scoped_tls.rs#L78-L85
[15:12:17] <kimundi> Hm, how about making the macro generate a unit-like struct with a deref impl? :P
[15:12:37] <eddyb> that's still bad
[15:12:50] <eddyb> because the resulting structure may or may not be Sync
[15:12:56] <eddyb> you really don't want to expose the internals
[15:13:04] <eddyb> OH
[15:13:06] <kimundi> could have it be non-sync without needing to put it in a safe static that way
[15:13:10] <eddyb> kimundi: you mean, always non-Sync
[15:13:13] <kimundi> yes
[15:13:35] <eddyb> so basically... the kind of accessor LocalKey uses, but via Deref
[15:13:53] <kimundi> This is basically the opposite of what I was struggling with my lazy_static with at the beginning :)
[15:14:10] <eddyb> kimundi: you should make a comment about that. I hope it can be used to smooth out the weirdness of LocalKey, too
[15:14:37] *** Joins: gsingh93 (gulshan@moz-ln1ktu.st3l.iv8o.0004.2601.IP)
[15:14:45] <kimundi> eddyb: Hm, do const require Sync?
[15:15:06] <eddyb> no
[15:15:46] *** Joins: mib_qtav95 (Mibbit@moz-juv.9o3.252.72.IP)
[15:15:53] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[15:16:13] *** Joins: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com)
[15:17:25] *** Quits: mib_qtav95 (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[15:18:27] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[15:19:04] *** Quits: harrisonclarke (harrisoncla@moz-4oc07n.ns.bellaliant.net) (Connection closed)
[15:19:52] *** Joins: harrisonclarke (harrisoncla@moz-4oc07n.ns.bellaliant.net)
[15:20:10] *** Quits: harrisonclarke (harrisoncla@moz-4oc07n.ns.bellaliant.net) (Connection closed)
[15:24:49] <kimundi> eddyb: commented
[15:28:37] *** Joins: eerie (eerie@moz-qld.8t4.67.109.IP)
[15:34:05] <Manishearth> kimundi: in this model we can't switch dynamically on locals htough
[15:34:26] <Manishearth> but I think any pattern depending on that can be restructured
[15:34:29] <Manishearth> s/pattern/code
[15:34:37] *** Joins: larsberg (Adium@moz-kmvlue.cable.rcn.com)
[15:36:31] <kimundi> Manishearth: Not sure what you mean
[15:37:50] <Manishearth> kimundi: in the past we could juggle multiple keys
[15:37:53] <Manishearth> since a key was a value
[15:37:58] <Manishearth> now the keys are types
[15:38:05] <kimundi> ah, yeah
[15:38:28] <kimundi> well, you can juggle around references to the derfered types
[15:38:34] <Manishearth> yeah
[15:38:36] <Manishearth> basically
[15:38:44] <Manishearth> like I said, can be restructured
[15:39:14] *** Joins: annodomini (lambda@moz-qgii5v.ma.comcast.net)
[15:39:15] <Manishearth> I find this whole concept of using unit types as a proxy for values to be slightly hackish. Brilliant, but also hackish :p
[15:39:20] <kimundi> yeah, its going to be a bit awkward here and there, like with my lazy_static macro :P
[15:39:39] <Manishearth> heh
[15:39:49] <kimundi> Manishearth: I don't disagree the slightest :D
[15:40:08] <Manishearth> TLS is basically lazy_static on targets that  don't support it, right?
[15:40:34] *** Quits: gsingh93 (gulshan@moz-ln1ktu.st3l.iv8o.0004.2601.IP) (Ping timeout: 121 seconds)
[15:40:40] <kimundi> might be? I'm not sure
[15:41:15] *** Quits: larsberg (Adium@moz-kmvlue.cable.rcn.com) (Quit: Leaving.)
[15:41:31] *** Joins: gsingh93 (gulshan@moz-ln1ktu.st3l.iv8o.0004.2601.IP)
[15:43:43] *** Joins: nicknikolov (nicknikolov@moz-ko7.r6m.215.90.IP)
[15:44:38] *** Quits: avikpal (avikpal@moz-4ap.0kg.194.117.IP) (Connection closed)
[15:45:54] *** Joins: avikpal (avikpal@moz-4ap.0kg.194.117.IP)
[15:48:45] *** Quits: nicknikolov (nicknikolov@moz-ko7.r6m.215.90.IP) (Ping timeout: 121 seconds)
[15:57:19] *** Joins: harrisonclarke (harrisoncla@moz-6v8.jf9.227.142.IP)
[16:01:53] *** Quits: jgallagher (john@moz-6ge.dhn.131.24.IP) (Ping timeout: 121 seconds)
[16:04:53] *** Joins: semarie (semarie@moz-32rrpe.snydernet.net)
[16:06:54] *** Joins: larhat (Adium@moz-vlo5br.cable.virginm.net)
[16:21:17] *** Joins: mib_gzprm3 (Mibbit@moz-juv.9o3.252.72.IP)
[16:21:38] *** Quits: mib_gzprm3 (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[16:21:51] *** Quits: avikpal (avikpal@moz-4ap.0kg.194.117.IP) (Ping timeout: 121 seconds)
[16:21:53] *** Joins: nham (nham@moz-lglsfe.il.comcast.net)
[16:24:20] *** Joins: avikpal (avikpal@moz-9c0.0pm.194.117.IP)
[16:25:40] *** Quits: larhat (Adium@moz-vlo5br.cable.virginm.net) (Quit: Leaving.)
[16:28:49] *** Quits: avikpal (avikpal@moz-9c0.0pm.194.117.IP) (Ping timeout: 121 seconds)
[16:29:49] *** Parts: mw (mw@moz-f1s7jp.vie.surfer.at) ("")
[16:29:51] *** Joins: rkruppe_ (chatzilla@moz-3nj.rnu.131.95.IP)
[16:31:04] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[16:31:16] *** rkruppe_ is now known as rkruppe
[16:41:34] *** Joins: avikpal (avikpal@moz-oek.cen.194.117.IP)
[16:47:28] *** Joins: ytain (ytain@moz-ffpck2.dsl.teksavvy.com)
[16:50:46] <eddyb> Manishearth: even on those that do
[16:51:26] <Manishearth> eddyb: oh?
[16:51:33] <Manishearth> I thought there were magical syscalls?
[16:52:05] <eddyb> if a target supports #[thread_local], then it's a memory access
[16:53:11] <eternaleye> Manishearth: http://people.redhat.com/drepper/tls.pdf
[16:53:37] <eddyb> otherwise, it's a pthreads/WINAPI library call
[16:53:46] <Manishearth> ah
[16:54:36] <eddyb> kimundi: btw, I thought you would deref to ScopedKey<T>, not T
[16:54:44] <eddyb> kimundi: look at the ScopedKey interface
[16:55:09] <eddyb> actually, ugh
[16:55:12] <eddyb> it's all a mess
[16:55:23] <Manishearth> eddyb: now you know why my head hurts
[16:57:47] *** Joins: avikpal_ (avikpal@moz-vr8.3e4.194.117.IP)
[16:58:27] *** Quits: avikpal (avikpal@moz-oek.cen.194.117.IP) (Ping timeout: 121 seconds)
[17:01:28] *** Quits: gsingh93 (gulshan@moz-ln1ktu.st3l.iv8o.0004.2601.IP) (Ping timeout: 121 seconds)
[17:01:49] <eddyb> bwahahahaha
[17:01:50] <eddyb> oh dear
[17:02:02] *** Joins: larhat2 (Adium@moz-vlo5br.cable.virginm.net)
[17:02:44] *** Quits: avikpal_ (avikpal@moz-vr8.3e4.194.117.IP) (Ping timeout: 121 seconds)
[17:02:57] *** Quits: eerie (eerie@moz-qld.8t4.67.109.IP) (Connection closed)
[17:04:10] <Manishearth> eddyb: I was hammering out the nuances of Send/Sync late yesterday night for the blog post. Today I find the soundness violation in a confusing API and spend more time hammering things out. Now there's too much concurrencyish stuff in my head. whyyyy
[17:04:38] <eddyb> I laugh because
[17:04:39] <eddyb> well
[17:08:54] *** Quits: harrisonclarke (harrisoncla@moz-6v8.jf9.227.142.IP) (Connection closed)
[17:09:25] *** Joins: harrisonclarke (harrisoncla@moz-6v8.jf9.227.142.IP)
[17:11:13] <eddyb> Manishearth: https://github.com/rust-lang/rust/issues/25894#issuecomment-107066703
[17:11:23] <eddyb> I have done my share of magic for the day
[17:11:41] *** Joins: arielb1 (Ariel@moz-9he9ta.red.bezeqint.net)
[17:11:58] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[17:12:40] <Manishearth> eddyb: brilliant
[17:13:04] <eddyb> it's just a few lines in mem_categorization
[17:13:27] *** Quits: harrisonclarke (harrisoncla@moz-6v8.jf9.227.142.IP) (Ping timeout: 121 seconds)
[17:13:44] <eddyb> Manishearth: https://github.com/rust-lang/rust/blob/master/src/librustc/middle/mem_categorization.rs#L614
[17:13:57] <eddyb> actually, you can implement this without adding any lines
[17:14:13] <Manishearth> eddyb: we'd need to specialcase TLS right?
[17:14:22] <eddyb> #[thread_local], yes
[17:14:24] <Manishearth> yeah
[17:14:47] <Manishearth> oh I see yeah it could be a one line change if you just put a "ternary" if block there
[17:14:58] <eddyb> https://github.com/rust-lang/rust/blob/master/src/librustc/middle/mem_categorization.rs#L854
[17:15:19] <Manishearth> ahh
[17:16:01] <eddyb> so... if static_is_thread_local(def_id) { cat_rvalue(self.temporary_scope(id)) } else { cat_static_item }
[17:16:13] <Manishearth> yep
[17:16:25] <eddyb> I'm not sure where to get static_is_thread_local from
[17:16:38] <Manishearth> has_attr?
[17:16:45] <eddyb> and you'd replace def::DefStatic(_, mutbl) with def::DefStatic(def_id, mutbl)
[17:16:52] <eddyb> Manishearth: keep in mind it has to work across crates
[17:17:22] <Manishearth> eddyb: has_attr doescsearch
[17:17:29] <Manishearth> *does csearch
[17:17:31] <eddyb> perfect
[17:17:57] <eddyb> to make it pretty, the diff will be -2 | +5, I believe
[17:18:21] <eddyb> I can make that PR from the web interface :P
[17:18:34] <eddyb> fixing LocalKey will be harder
[17:18:43] <eddyb> and ScopedKey needs a minor redesign
[17:18:48] <eddyb> at least in the macro
[17:19:08] <eddyb> Manishearth: you might want an attribute which does this on an arbitrary static
[17:19:18] <Manishearth> hm
[17:19:27] <eddyb> to have uniform behavior across implementations
[17:19:32] <Manishearth> ...okay
[17:19:37] <eddyb> but then LocalKey has been stabilized
[17:19:40] <eddyb> with &'static borrows
[17:19:58] <eddyb> acrichto: see, if you'd have used a constant, now this wouldn't be an issue :P
[17:20:09] <eddyb> acrichto: but constants would have their own issues so I'm being pretentious here
[17:20:12] *** Quits: larhat2 (Adium@moz-vlo5br.cable.virginm.net) (Quit: Leaving.)
[17:20:21] <Manishearth> ha!
[17:21:02] <Manishearth> eddyb: what does I-nominated mean btw? nominated for what?
[17:22:45] *** Quits: arielb1 (Ariel@moz-9he9ta.red.bezeqint.net) (Quit: Ex-Chat)
[17:22:57] <sfackler> a priority
[17:23:14] <Manishearth> but we already have P-high there 
[17:23:46] *** Quits: annodomini (lambda@moz-qgii5v.ma.comcast.net) (Client exited)
[17:24:34] <eddyb> there is no easy upgrade path, most likely this will be hidden behind the public interface
[17:25:35] *** Joins: goyox86 (textual@moz-6gq.t8s.78.166.IP)
[17:25:42] *** Joins: mib_9uizcj (Mibbit@moz-juv.9o3.252.72.IP)
[17:25:48] <eddyb> acrichto: uhm, we're missing #[inline] on the pseudostatic: https://github.com/rust-lang/rust/blob/master/src/libstd/thread/local.rs#L120
[17:26:06] <eddyb> acrichto: that means devirtualization won't happen...
[17:26:34] <eddyb> although, how many of these are used across crates?
[17:26:47] <eddyb> it might not be prevalent enough for it to count
[17:27:00] <eddyb> Manishearth: still, you might be interested in knowing this caveat, for servo
[17:28:09] *** Quits: mib_9uizcj (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[17:29:55] <Manishearth> eddyb: I suggest pinging pcwalton about it later, I'm not familiar with our TLS usages
[17:30:19] *** Quits: nodweber_ (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[17:31:44] *** Joins: eerie (eerie@moz-qld.8t4.67.109.IP)
[17:36:34] <WindowsBunny> Manishearth: I-nominated means it is nominated for triage to re-evaluate what tags it should have
[17:38:41] <Manishearth> ah okay
[17:38:49] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[17:39:04] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[17:41:40] *** Joins: annodomini (lambda@moz-qgii5v.ma.comcast.net)
[17:45:47] *** Quits: annodomini (lambda@moz-qgii5v.ma.comcast.net) (Client exited)
[17:46:09] *** Joins: nicknikolov (nicknikolov@moz-ko7.r6m.215.90.IP)
[17:50:11] *** Quits: nicknikolov (nicknikolov@moz-ko7.r6m.215.90.IP) (Ping timeout: 121 seconds)
[17:51:46] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[17:52:26] *** Joins: avikpal (avikpal@moz-7g2.cvs.194.117.IP)
[17:58:24] *** Quits: doener (doener@moz-929cn9.unity-media.net) (Quit: leaving)
[17:59:53] *** Joins: rkruppe_ (chatzilla@moz-3nj.rnu.131.95.IP)
[18:01:04] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[18:01:05] *** rkruppe_ is now known as rkruppe
[18:03:24] *** Quits: ebfull (ebfull@moz-2hf06a.co.comcast.net) (Ping timeout: 121 seconds)
[18:03:37] *** Joins: ebfull (ebfull@moz-2hf06a.co.comcast.net)
[18:06:07] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[18:09:10] *** Quits: avikpal (avikpal@moz-7g2.cvs.194.117.IP) (Connection closed)
[18:09:56] *** Quits: martin (martin@moz-bmp33l.u0v6.gff7.1608.2001.IP) (Ping timeout: 121 seconds)
[18:11:31] *** Quits: capella (chatzilla@moz-vcqob4.res.rr.com) (Quit: ChatZilla 0.9.90.1-rdmsoft [XULRunner 22.0/20130619132145])
[18:12:23] *** Joins: avikpal (avikpal@moz-0vf.3e4.194.117.IP)
[18:12:35] *** Joins: skeuomorf (skeuomorf@moz-a8h.ni9.32.197.IP)
[18:12:49] *** Quits: eerie (eerie@moz-qld.8t4.67.109.IP) (Connection closed)
[18:15:25] *** Joins: nicknikolov (nicknikolov@moz-ko7.r6m.215.90.IP)
[18:22:02] *** Joins: avikpal_ (avikpal@moz-gg0.6lo.194.117.IP)
[18:22:17] *** Quits: avikpal (avikpal@moz-0vf.3e4.194.117.IP) (Ping timeout: 121 seconds)
[18:23:55] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[18:28:10] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Ping timeout: 121 seconds)
[18:30:14] *** Joins: adu (ajr@moz-0foa9t.md.comcast.net)
[18:34:59] *** Joins: eerie (eerie@moz-qld.8t4.67.109.IP)
[18:36:43] <Gankro> Manishearth: generally see I-nominated as "everyone look here"
[18:36:52] <Gankro> *genereally I see
[18:42:11] <Manishearth> ah
[18:43:26] *** Joins: avikpal (avikpal@moz-2l9.6lo.194.117.IP)
[18:43:54] *** Quits: avikpal_ (avikpal@moz-gg0.6lo.194.117.IP) (Ping timeout: 121 seconds)
[18:45:57] *** Joins: lorenzb (lorenzb@moz-5umjr6.ethz.ch)
[18:46:46] *** Quits: avikpal (avikpal@moz-2l9.6lo.194.117.IP) (Connection closed)
[18:47:07] *** Quits: summerlight_ (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[18:49:39] *** Joins: willem (willem@moz-facs2s.dynamic.upc.nl)
[18:51:20] *** Joins: dinfuehr (dinfuehr@moz-pbm8jk.highway.telekom.at)
[18:52:27] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[18:52:49] *** Quits: goyox86 (textual@moz-6gq.t8s.78.166.IP) (Ping timeout: 121 seconds)
[18:55:03] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[18:55:39] *** Joins: annodomini (lambda@moz-qgii5v.ma.comcast.net)
[18:58:35] *** Joins: avikpal (avikpal@moz-3m6.cvs.194.117.IP)
[19:00:09] *** Quits: adu (ajr@moz-0foa9t.md.comcast.net) (Client exited)
[19:01:01] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[19:01:07] *** Quits: eerie (eerie@moz-qld.8t4.67.109.IP) (Connection closed)
[19:01:43] *** Quits: ebfull (ebfull@moz-2hf06a.co.comcast.net) (Ping timeout: 121 seconds)
[19:03:18] *** Joins: ebfull (ebfull@moz-2hf06a.co.comcast.net)
[19:12:43] <bstrie> acrichto: I'm giving more thought to this idea of a compiler flag that would only generate metadata without generating artifacts, so that we could typecheck an entire crate and all its deps really really fast
[19:13:28] <eddyb> bstrie: that's not the version I came up with
[19:13:44] <bstrie> eddyb: enlighten me with your version
[19:14:00] <bstrie> I just want to make progress here, I don't care how
[19:14:03] <eddyb> bstrie: generate metadata and artifacts and use IPC to signal the rustc "workers" for the crates which depend on the current one
[19:14:16] <eddyb> oh, you want to do just typeck
[19:14:38] <bstrie> yeah, the endgame is a `cargo check` command that's just for making sure my types are sane
[19:14:46] <eddyb> keep in mind metadata isn't exactly complete without some stuff trans generates. but that may be possible to fix
[19:14:48] <bstrie> though obviously there's some overlap with parallel codegen, yes
[19:14:53] *** Joins: jgallagher (john@moz-6ge.dhn.131.24.IP)
[19:16:26] <bstrie> eddyb: I'd be interested to know what trans stuff is needed for metadata
[19:17:09] <eddyb> bstrie: there's a bunch of symbol names that end up in metadata
[19:17:38] <eddyb> let me see if I can find anything relevant for you
[19:17:51] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[19:17:56] <bstrie> are those symbol names only used for linking? if so, could we just come up with dummies?
[19:18:16] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[19:18:29] <Manishearth> Symbol Names for Dummies
[19:18:53] <eddyb> bstrie: you could just not put them anywhere
[19:19:09] <eddyb> I thought you wanted complete metadata :P
[19:19:22] <bstrie> eddyb: I don't need metadata that's only used for code generation or linking
[19:19:23] <eddyb> that can be later used to compile the crates
[19:20:04] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Connection closed)
[19:20:09] *** Quits: lorenzb (lorenzb@moz-5umjr6.ethz.ch) (Ping timeout: 121 seconds)
[19:20:10] <bstrie> I know that acrichto was of the opinion that if we have a mode where we're separately emitting metadata and artifacts then we should just use that instead of rlibs, but I'm just interested in whatever works the soonest
[19:21:05] <bstrie> I'm happy with .dummymeta files that can't be used for actual codegen if it means I don't have to wait for my entire project to build just to test and see if I got my types right
[19:21:45] *** Joins: avikpal_ (avikpal@moz-e8n.mpm.194.117.IP)
[19:22:04] <eddyb> it's going to be lighter because a lot less AST needs to be encoded
[19:22:27] <bstrie> good, that sounds even faster
[19:22:35] *** Quits: avikpal (avikpal@moz-3m6.cvs.194.117.IP) (Ping timeout: 121 seconds)
[19:24:23] <eddyb> item_symbols is one of the parameters, that's what I was thinking of
[19:24:40] <eddyb> it's hard to tell what else trans puts into metadata
[19:24:53] <eddyb> because it's most likely going to be "writing to a tcx map"
[19:25:30] <eddyb> git grep '\btcx\..*\.borrow_mut\(\)' src/librustc_trans/trans
[19:25:34] <eddyb> heh, that has 0 results
[19:25:55] <eddyb> with tcx\(\), I get two results
[19:26:14] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[19:26:17] <eddyb> inlining and type normalization
[19:26:21] <eddyb> both of which are local effects
[19:26:45] *** Joins: Eridius (kevin@moz-6opvqs.us)
[19:27:00] <eddyb> bstrie: you're pretty good then, you might be able to copy the trans::base::write_metadata function and give it empty collections for the stuff you don't have
[19:27:09] <bstrie> hmmm
[19:27:10] <eddyb> bstrie: you should be able to create a rlib btw
[19:27:17] <eddyb> which only has the metadata file
[19:27:29] <bstrie> yeah I guess it wouldn't make a difference as long as the compiler knows to stop before trying to codegen with it
[19:27:30] <eddyb> that might be easier than anything else
[19:31:25] *** Quits: James (quassel@moz-q6malq.range86-148.btcentralplus.com) (Ping timeout: 121 seconds)
[19:33:32] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[19:37:08] *** Joins: James (quassel@moz-8qs8a3.range86-148.btcentralplus.com)
[19:38:17] *** Quits: avikpal_ (avikpal@moz-e8n.mpm.194.117.IP) (Connection closed)
[19:39:06] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[19:41:08] *** Joins: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP)
[19:43:51] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[19:44:59] *** Quits: nicknikolov (nicknikolov@moz-ko7.r6m.215.90.IP) (Connection closed)
[19:45:02] *** Quits: semarie (semarie@moz-32rrpe.snydernet.net) (A TLS packet with unexpected length was received.)
[19:45:26] <Gankro> wtf the homu queue is empty
[19:49:10] *** Quits: laumann (thomas@moz-33d.hq0.225.130.IP) (Quit: leaving)
[19:51:12] *** Quits: munksgaard (munksgaard@moz-vj4.hq0.225.130.IP) (Ping timeout: 121 seconds)
[19:51:47] *** Joins: nicknikolov (nicknikolov@moz-ko7.r6m.215.90.IP)
[19:53:10] *** Quits: mukilan (mukilan@moz-agl.8le.164.122.IP) (A TLS packet with unexpected length was received.)
[19:53:43] *** Quits: nicknikolov (nicknikolov@moz-ko7.r6m.215.90.IP) (Connection closed)
[19:54:37] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[19:56:35] *** Joins: nickniko_ (nicknikolov@moz-ko7.r6m.215.90.IP)
[19:57:38] <sfackler> here's an error I've never seen before: error: cannot transmute to or from a type that contains type parameters in its interior
[19:59:14] <Manishearth> sfackler: probably because transmutes need to be the same size
[19:59:24] <eddyb> sfackler: transmute from (T,) to (U,)?
[19:59:39] <eddyb> or any custom structure with type-parameter fields
[20:00:08] *** Quits: sigma (sigma@moz-k1ghg8.range109-153.btcentralplus.com) (Ping timeout: 121 seconds)
[20:00:24] <sfackler> it's a bit unfortunate since all I want to do is change a 'a to 'static - all of the type parameters are the same between the source and dest types
[20:01:14] <eddyb> oh
[20:01:27] <eddyb> sfackler: don't use transmute for that
[20:01:39] <eddyb> pointer casts should work
[20:01:43] *** Joins: avikpal (avikpal@moz-e8n.mpm.194.117.IP)
[20:02:11] <eddyb> well, depends on what exactly you're passing to transmute
[20:02:36] <eddyb> sfackler: I'd have to see the structures and the code calling transmute to tell whether it's possible
[20:03:14] <sfackler> eh, i'll just do it a different way without unsafe lifetime munging
[20:03:20] *** Quits: nickniko_ (nicknikolov@moz-ko7.r6m.215.90.IP) (Connection closed)
[20:09:03] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[20:09:05] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Ping timeout: 121 seconds)
[20:09:32] *** Quits: annodomini (lambda@moz-qgii5v.ma.comcast.net) (Client exited)
[20:10:17] *** Joins: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP)
[20:10:31] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[20:12:08] *** Quits: dinfuehr (dinfuehr@moz-pbm8jk.highway.telekom.at) (Connection closed)
[20:13:06] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[20:13:16] *** Quits: blank_na1e (blank_name@moz-pah0nm.mi.frontiernet.net) (Ping timeout: 121 seconds)
[20:14:18] *** Joins: blank_name (blank_name@moz-1gd.aq8.36.50.IP)
[20:14:26] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[20:14:54] *** Quits: avikpal (avikpal@moz-e8n.mpm.194.117.IP) (Connection closed)
[20:15:12] <sfackler> is Box magic in that you can do self: Box<Self>? it doesn't seem to work for Arc<Self>
[20:15:26] <eddyb> yes it is
[20:15:33] <sfackler> :(
[20:18:16] *** Joins: eibwen (eibwen@moz-qjhnnl.dip0.t-ipconnect.de)
[20:20:51] <bstrie> sfackler: one day this should be lifted
[20:25:58] *** Joins: annodomini (lambda@moz-qgii5v.ma.comcast.net)
[20:36:21] *** Joins: munksgaard (munksgaard@moz-urnkl5.u.parknet.dk)
[20:38:40] *** Joins: p1start (p1start@moz-nftjhe.org)
[20:41:59] *** Joins: rkruppe_ (chatzilla@moz-3nj.rnu.131.95.IP)
[20:42:46] *** Joins: mib_xxrfou (Mibbit@moz-juv.9o3.252.72.IP)
[20:44:08] *** Joins: andars (andars@moz-bsldst.sntcca.sbcglobal.net)
[20:44:55] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[20:44:55] *** rkruppe_ is now known as rkruppe
[20:45:13] *** Joins: nicknikolov (nicknikolov@moz-ko7.r6m.215.90.IP)
[20:45:49] *** Quits: mib_xxrfou (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[20:46:41] *** Quits: nicknikolov (nicknikolov@moz-ko7.r6m.215.90.IP) (Connection closed)
[20:48:21] *** Joins: nicknikolov (nicknikolov@moz-ko7.r6m.215.90.IP)
[20:49:17] *** Quits: nicknikolov (nicknikolov@moz-ko7.r6m.215.90.IP) (Connection closed)
[20:52:03] *** Joins: xilec (Mibbit@moz-g6k.oht.161.46.IP)
[20:53:11] *** Joins: nickniko_ (nicknikolov@moz-ko7.r6m.215.90.IP)
[21:02:28] *** Quits: nickniko_ (nicknikolov@moz-ko7.r6m.215.90.IP) (Connection closed)
[21:02:43] <eddyb> kimundi, bstrie: https://github.com/rust-lang/rfcs/issues/1140
[21:02:57] <eddyb> I don't want to be the jerk who cc's the whole core team
[21:06:49] *** Joins: nicknikolov (nicknikolov@moz-ko7.r6m.215.90.IP)
[21:08:32] *** Quits: nicknikolov (nicknikolov@moz-ko7.r6m.215.90.IP) (Connection closed)
[21:11:25] *** Quits: kwantam (kwantam@moz-1adqok.DYNAPOOL.NYU.EDU) (Quit: WeeChat 1.1.1)
[21:11:47] *** Joins: rkruppe_ (chatzilla@moz-3nj.rnu.131.95.IP)
[21:14:04] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[21:14:12] *** rkruppe_ is now known as rkruppe
[21:14:17] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[21:20:39] *** Joins: swgillespie (swgillespie@moz-n9d.t9i.206.12.IP)
[21:20:40] <eddyb> bstrie: what do you think of the new title?
[21:23:38] *** Quits: joneshf-laptop (joneshf@moz-l4h.b5s.208.98.IP) (Ping timeout: 121 seconds)
[21:26:11] *** Joins: kwantam (kwantam@moz-1adqok.DYNAPOOL.NYU.EDU)
[21:26:32] *** Joins: Diggsey (diggsey@moz-9s9ol4.dsl.pipex.com)
[21:30:05] <bstrie> eddyb: new title is good. this is a doc issue so maybe cc steve
[21:31:02] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[21:34:25] *** Joins: rkruppe_ (chatzilla@moz-3nj.rnu.131.95.IP)
[21:36:56] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[21:37:04] *** rkruppe_ is now known as rkruppe
[21:37:21] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Client exited)
[21:41:32] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[21:41:47] *** Joins: joneshf-laptop (joneshf@moz-l4h.b5s.208.98.IP)
[21:47:17] <bstrie> eddyb: what non-trait associated items even exist
[21:47:29] <eddyb> bstrie: methods, constants and types
[21:47:41] <eddyb> not all of those are properly implemented, but that's bugs
[21:48:20] *** Quits: joneshf-laptop (joneshf@moz-l4h.b5s.208.98.IP) (Ping timeout: 121 seconds)
[21:49:22] <bstrie> eddyb: I don't understand, I consider "associated items" to be all of associated functions, associated types, associated constants, and associated lifetimes, and these are all "associated" with a trait
[21:49:36] <eddyb> bstrie: that's not what associated means
[21:49:43] <eddyb> bstrie: they're associated with the type, not the trait
[21:49:59] <eddyb> and associated lifetimes aren't a thing
[21:50:06] <bstrie> they're planned to be
[21:50:17] <bstrie> at least they were as of the original associated item rfc
[21:50:35] *** Joins: joneshf-laptop (joneshf@moz-l4h.b5s.208.98.IP)
[21:50:36] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[21:50:39] <eddyb> I don't like them because they use a keyword even if they could totally avoid it
[21:52:16] <bstrie> imo, the only reason I would ever use UFCS would be to disambiguate something, as per the "breaking change" RFC which proposes a "maximally disambiguated" form of rust code which can never be broken by new compiler versions
[21:52:23] *** Quits: farcaller (farcaller@moz-8bdd0s.prod.ihdev.net) (Quit: .oO( z..z..z.. ))
[21:52:58] <eddyb> have you seen PathBuf::from("foo")?
[21:53:30] <bstrie> looks like an associated function to me
[21:53:40] *** Joins: farcaller (farcaller@moz-8bdd0s.prod.ihdev.net)
[21:54:02] <eddyb> that's sugar for <PathBuf>::from which resolved to <PathBuf as From<_>>::from
[21:54:37] <eddyb> *resolves
[21:54:42] <eddyb> that's what we call "UFCS"
[21:54:48] <bstrie> this only strengthens my resolve to never use UFCS :P
[21:54:58] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Quit: It's a joke, it's all a joke.)
[21:54:59] <eddyb> PathBuf::from is "UFCS"
[21:55:10] *** Quits: skeuomorf (skeuomorf@moz-a8h.ni9.32.197.IP) (Quit: WeeChat 1.2)
[21:55:24] <eddyb> you seem to confuse the fully qualified type+trait syntax with the whole feature
[21:55:48] <kimundi> eddyb: I'm trying to implement Fat<Trait> right now, and I'm running in the annoying issue that the transmute-size-check does not know that a Unsized type parameter will always be greater than one pointer
[21:55:50] <bstrie> I really don't want to learn the whole feature because it looks like insanity
[21:55:54] <bluss> using trait methods that way is extremely neat
[21:56:04] <bstrie> non-unified function call syntax works just fine for me :)
[21:56:24] <eddyb> bstrie: why are you saying things if you don't even bother to get the basics right?
[21:56:26] <kimundi> bstrie: Its really not complicated...
[21:56:27] <bluss> bstrie: From trait declares fn from, so if you impl From your type gets that? sounds straightforward to me
[21:56:38] <bstrie> show me a tutorial on UFCS, then
[21:56:54] <eddyb> trait+type-qualified is <Trait as T>::foo. type-qualified is <T>::foo. trait/type-based is X::foo
[21:56:59] <eddyb> that's it
[21:57:00] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[21:57:04] <bstrie> kimundi: you also say "it's really not complicated" about our module system :P
[21:57:15] <rkruppe> Well... it isn't
[21:57:32] <kimundi> bstrie: Well it _did_ get less-not-really-complicated over time since then. But this is way easier than that
[21:57:47] <eddyb> bstrie: that's where I used to ask people if they're dumb or they're faking it. but the rust community made me want to be nice even to trolls :P
[21:59:51] *** Quits: xilec (Mibbit@moz-g6k.oht.161.46.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:00:22] <bstrie> eddyb: now use the words that you just used to describe it to me, and assemble them into a name
[22:00:29] <bstrie> eddyb: "qualified" shows up a lot, work that in there
[22:00:58] <eddyb> bstrie: qualified+unqualified path syntax?
[22:01:01] <eddyb> QUPS
[22:01:13] <kimundi> bstrie: UFCS is just, like 3 syntactic ways to refer to an associated item, with a spectrum between convenience and unabiguity. In 99% of all cases you just use the Foo::Bar form. In the 0.9% of cases where you have two traits with the same associated item names in scope, you use <Foo as Trait>::Bar to pick the right one. In the 0.1% of cases where The trait as a trait object has a associated item with the same name, you need to 
[22:01:13] <kimundi> use <Trait>::Bar
[22:01:41] <bstrie> "qualified path syntax" looks fine, even if "path" is still jargon
[22:01:52] <eddyb> well, kimundi, <T>::foo is nicer than <T as DarnLongTrait>::foo
[22:01:56] <eddyb> not all types are paths
[22:02:08] <eddyb> e.g. <[_]>::len
[22:02:16] <eddyb> bstrie: the point is that qualification is a choice of the feature
[22:02:35] <eddyb> bstrie: before "UFCS", PathBuf::foo wouldn't have worked
[22:02:45] <eddyb> bstrie: calling methods on type aliases wouldn't have worked
[22:02:54] <eddyb> (static methods, I mean)
[22:02:57] <kimundi> eddyb: Aaah, thats the aspect I was missing. 
[22:02:58] <eddyb> s/foo/from
[22:03:20] <kimundi> [X]::Bar not being a path, that is... Could it be made to wrok, syntatically?
[22:03:26] <bstrie> eddyb: by static methods you mean associated functions :P
[22:03:29] <kimundi> no, actually not
[22:03:52] <kimundi> lol, point for bstrie 
[22:03:55] <eddyb> bstrie: I meant what that name meant before "UFCS"
[22:04:31] <eddyb> i.e. people (including compiler devs) were complaining about "not being able to call static methods on type aliases"
[22:04:38] <eddyb> there might even be an issue with that in its title
[22:05:23] <eddyb> bstrie: also, they're associated values, if you want to be pedantic
[22:06:11] <bstrie> new acronym: Maybe Our Names Are Dumb Sometimes
[22:06:14] <eddyb> the main difference about a callable associated const is that method calls don't work
[22:06:21] <eddyb> MONADS
[22:06:22] <eddyb> oh dear
[22:06:39] <eddyb> I was hoping for gibberish
[22:07:07] <kimundi> bwahaha
[22:08:09] <eddyb> bstrie: that is Eloquently Venting Intellectual Leverage
[22:08:30] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[22:08:50] <bstrie> https://sp.yimg.com/ib/th?id=JN.8UwNHYwHvIGNCVwnatnm9A&pid=15.1&P=0
[22:09:05] <eddyb> I knew there was a simpler solution :P
[22:09:09] *** Quits: ctennis (ctennis@moz-vcpg3c.in.comcast.net) (Quit: Linkinus - http://linkinus.com)
[22:09:15] <eddyb> bstrie: you've made me waste enough time nothing, thank you
[22:10:24] <bstrie> I still think you're trying too hard to come up with a scientifically-precise name for this
[22:10:28] <Havvy> AILS > UFCS because AILS can be said as a word.
[22:10:41] <bstrie> just call it "that damn ugly explicit path syntax" and everyone will know immediately what you mean
[22:10:51] <eddyb> bstrie: you're missing the point again
[22:10:56] <eddyb> bstrie: that's just HALF of it
[22:11:27] <eddyb> the feature includes foo::bar meaning something different than just a thing named bar in a container named foo
[22:11:30] <kimundi> TDUEPS is a worse acronym that AILS
[22:12:12] <eddyb> bstrie: the best part about the feature is that you don't have to use the qualified syntax most of the time, but you get its semantics
[22:12:27] <bstrie> ugh, I just remembered that we have HRTB, that's already bad enough
[22:12:38] <bstrie> no more acronyms!
[22:12:49] <bstrie> I will fork the documentation
[22:13:00] <eddyb> if we fix the implementation, Range::<i32>::Item::ZERO might just work :P
[22:13:45] <bstrie> I can't tell there if the ::<i32>:: is because of UFCS or because of generic type parameters in expressions
[22:13:53] <eddyb> the latter
[22:14:11] <eddyb> actually, no, that should work today
[22:14:16] <eddyb> I had a nicer example :P
[22:14:54] <bstrie> just wait for me to convince everyone to make the grammar infinite-lookahead so we can have Range<i32>::Item::ZERO
[22:15:00] <eddyb> but Type::AssocTyA::AssocTyB::AssocTyC::AssocValue should work eventually
[22:15:09] <eddyb> bstrie: meh, that's a solved problem
[22:15:15] <eddyb> Range(i32)::Item::ZERO
[22:15:17] *** Joins: ctennis (ctennis@moz-vcpg3c.in.comcast.net)
[22:15:28] <eddyb> what's not solved is how to make everything work with less corner cases
[22:15:43] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[22:16:07] <bstrie> I've solved the problem by shipping new keyboards to everyone in the world that feature two more sets of bracketed delimeters
[22:17:09] <bstrie> trying to imagine how programming languages would ever survive if they hadn't decided to put [] and {} on qwerty
[22:17:15] <benh> just ship a new font that makes ~ and ` into brackets, we don't really need those in rust
[22:17:25] <eddyb> bstrie: digraphs
[22:17:28] <kimundi> ~ and @
[22:17:28] <eddyb> and... trigraphs
[22:17:44] <eddyb> kimundi: did you not see my plan for @?
[22:17:47] <bstrie> Range::??(i32??)::Item::ZERO
[22:18:22] <kimundi> Range//i32//Iterm/Zero
[22:18:32] *** Parts: ctennis (ctennis@moz-vcpg3c.in.comcast.net) ("Linkinus - http://linkinus.com")
[22:19:06] <eddyb> (0..10).map(@_ + 1)
[22:19:12] <eddyb> kimundi: use \
[22:19:31] <kimundi> eddyb: @ for bind syntax?
[22:19:42] *** Quits: annodomini (lambda@moz-qgii5v.ma.comcast.net) (Client exited)
[22:19:48] <eddyb> kimundi: da
[22:19:49] <kimundi> why not _ directly?
[22:19:52] <bstrie> eddyb: the vast majority of closures like that only take one parameter, just have a `my` keyword to represent that parameter and automatically create a closure context. `(0..10).map(my + 1)`
[22:19:53] <eddyb> dammit
[22:20:01] <benh> does that translate to (|x| x) + 1
[22:20:16] <eddyb> kimundi: that was an interesting context switch
[22:20:17] <benh> bstrie: why "my" and not "it"?
[22:20:21] <eddyb> bstrie: that's what _ is
[22:20:28] <eddyb> bstrie: it doesn't work
[22:20:53] <bstrie> eddyb: if it's a single expression it does
[22:20:55] <eddyb> oh, I see what you mean
[22:21:02] <eddyb> the problem is that @_ isn't one thing
[22:21:04] <kimundi> eddyb: Also, I opened an issue about wanting sucha  bind syntax like 2 years ago, to which I go thwe asnwer that we had that like 4 years ago, and it got removed because it was unclear how far up in the expression it binds
[22:21:11] <eddyb> it parses as @(_ + 1)
[22:21:21] <eddyb> a single syntactical element couldn't do that
[22:21:35] <eddyb> unless you felt crazy enough to suggest something with two precedences
[22:21:40] <eddyb> and weird parse rules
[22:21:57] <eddyb> kimundi: I saw some examples on bstrie's slides
[22:22:09] <benh> pretty sure someone suggested weird parse rules before and defended it
[22:22:19] <kimundi> oh, @ would be a prefix operator with low precendence to amke everything after it into a closure?
[22:22:30] <eddyb> _ were the arguments and bind was the stopper
[22:22:33] <benh> use \ for that imo
[22:22:35] *** Quits: swgillespie (swgillespie@moz-n9d.t9i.206.12.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[22:22:37] <bstrie> now you're just trying to turn rust into scala
[22:22:40] <eddyb> yeah, I just did s/bind/@
[22:22:45] <eddyb> benh: oh
[22:22:47] <eddyb> \_ + 1
[22:22:51] <kimundi> nice
[22:22:52] <eddyb> I don't... hate it
[22:22:55] <bstrie> scratch that, haskell
[22:23:14] <eddyb> but then someone will write \x -> foo and wonder why it doesn't work
[22:23:17] <kimundi> bstrie: So, its either \_ or AILS, pick your poison
[22:23:25] <bstrie> I fork the language
[22:23:29] <benh> :D
[22:23:30] <eddyb> kimundi: why not both?
[22:23:40] <bstrie> then I fork the language twice
[22:23:44] *** Joins: genbattle (genbattle@moz-r09mao.xtra.co.nz)
[22:23:54] <eddyb> bstrie: too bad strcat is busy forking OpenBSD and Android
[22:24:00] <kimundi> but then we have 4 languages. what do you do with the 4. one?
[22:24:02] <bstrie> StrBSD
[22:24:04] <eddyb> a Rust fork would've been fun to watch
[22:24:29] <bstrie> kimundi: you've heard of distributed version control? this would be distributed language design
[22:24:32] <bstrie> forks for everyone!
[22:24:46] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Quit: Leaving)
[22:24:48] <kimundi> well it works with LISP...
[22:24:54] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[22:25:40] <aji> in my fork of rust, you'd write your program as a syntax extension, and then the source code would be simply the name of your syntax extension
[22:25:51] <aji> for example, the >>===<=!==> operator is an irc bot i'm working on
[22:25:51] <eddyb> https://www.cs.umd.edu/~hammer/adapton/ huh, I can't tell what this is
[22:26:26] <eddyb> you know what nobody realized?
[22:26:35] <eddyb> you can use PHP as a pre-processor for anything
[22:26:50] <bstrie> you can also use it as a floor wax and a dessert topping
[22:26:50] <cmr> eddyb: "nobody"?
[22:26:51] <eddyb> and syntax extensions aren't in stable Rust...
[22:26:59] <bstrie> you can also use the C preprocessor for anything
[22:27:06] <aji> that's php's mode of operation on the console
[22:27:20] <eddyb> cmr: have you seen someone write syntax extensions for Rust in PHP?
[22:27:36] <cmr> eddyb: I only know of 3 people who use both Rust and PHP.
[22:27:41] <eddyb> erickt's syntex is so 1.0
[22:27:59] <bstrie> I know people who want to write php extensions in rust, but it's a huge pain to call into c from php
[22:28:23] <eddyb> bstrie: amazing, given the libc feel of PHP
[22:38:53] *** Quits: ytain (ytain@moz-ffpck2.dsl.teksavvy.com) (Quit: Textual IRC Client: www.textualapp.com)
[22:43:30] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[22:45:22] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[22:46:18] *** Quits: andars (andars@moz-bsldst.sntcca.sbcglobal.net) (Ping timeout: 121 seconds)
[22:47:53] *** Joins: andars (andars@moz-bsldst.sntcca.sbcglobal.net)
[22:48:12] *** Joins: ChrisPls (Mibbit@moz-ou1.3i1.67.138.IP)
[22:50:05] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[22:53:35] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Connection closed)
[22:54:09] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[22:54:37] *** Quits: zmike_ (discomfitor@moz-oek0ra.ct.comcast.net) (Quit: Leaving)
[22:57:23] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[22:58:22] *** Quits: zmike (discomfitor@moz-qdk.22c.55.66.IP) (Ping timeout: 121 seconds)
[22:58:25] *** Quits: killercup (killercup@moz-723bo4.dip0.t-ipconnect.de) (Quit: My Mac has gone to sleep. ZZZzzz…)
[22:59:12] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[23:11:24] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[23:13:03] *** Joins: zmike (discomfitor@moz-oek0ra.ct.comcast.net)
[23:16:00] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[23:17:57] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Quit: ChatZilla 0.9.91.1 [Firefox 38.0.1/20150513174244])
[23:19:30] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[23:26:37] *** Quits: genbattle (genbattle@moz-r09mao.xtra.co.nz) (Ping timeout: 121 seconds)
[23:32:43] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[23:36:29] *** Joins: iitaku (textual@moz-u578hl.ocn.ne.jp)
[23:41:18] *** Quits: joneshf-laptop (joneshf@moz-l4h.b5s.208.98.IP) (Ping timeout: 121 seconds)
[23:42:04] *** Joins: joneshf-laptop (joneshf@moz-l4h.b5s.208.98.IP)
[23:43:36] *** Quits: munksgaard (munksgaard@moz-urnkl5.u.parknet.dk) (Ping timeout: 121 seconds)
[23:45:24] *** Joins: killercup (killercup@moz-723bo4.dip0.t-ipconnect.de)
[23:46:43] *** Quits: joneshf-laptop (joneshf@moz-l4h.b5s.208.98.IP) (Ping timeout: 121 seconds)
[23:46:54] *** Joins: joneshf-laptop (joneshf@moz-l4h.b5s.208.98.IP)
[23:50:38] <Havvy> playbot: ();
[23:50:38] -playbot- <anon>:9:11: 9:12 error: unknown start of token: \u{37e}
[23:50:39] -playbot- <anon>:9         ();
[23:50:39] -playbot- output truncated; full output at: http://bit.ly/1LUlrZn
[23:52:23] *** Quits: killercup (killercup@moz-723bo4.dip0.t-ipconnect.de) (Quit: My Mac has gone to sleep. ZZZzzz…)
[23:52:42] *** Quits: iitaku (textual@moz-u578hl.ocn.ne.jp) (Quit: My Mac has gone to sleep. ZZZzzz…)
[23:53:21] *** Joins: iitaku (textual@moz-u578hl.ocn.ne.jp)
[23:56:14] *** Joins: summerlight_ (summerlight@moz-99k.2mj.130.121.IP)
[23:57:20] *** Quits: joneshf-laptop (joneshf@moz-l4h.b5s.208.98.IP) (Ping timeout: 121 seconds)
