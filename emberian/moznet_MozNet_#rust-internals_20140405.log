[00:01:01] *** Quits: eibwen (kvirc@moz-6F69D9D5.dip0.t-ipconnect.de) (Ping timeout)
[00:10:59] <acrichto> aww, there were 7 PRs in the rollup, but it bounced 5 times, so it's dubious how much time was gained :(
[00:11:49] *** Joins: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP)
[00:11:49] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/oKDRQQ
[00:11:49] *** Parts: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP) ()
[00:12:00] <huon> acrichto: haha
[00:13:47] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[00:14:03] *** Quits: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP) (Quit: Lost terminal)
[00:14:43] *** Joins: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP)
[00:14:43] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/tnwHgQ
[00:14:43] *** Parts: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP) ()
[00:14:44] *** Joins: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP)
[00:14:44] <ghrust> [13rust] 15bors pushed 4 new commits to 06auto: 02http://git.io/0DjV3w
[00:14:44] <ghrust> 13rust/06auto 142cddd68 15Felix S. Klock II: Avoid injecting unfulfilled dependence in compiletest on libnative.
[00:14:44] <ghrust> 13rust/06auto 143cbd98e 15Felix S. Klock II: Two fixes to get `make check-stage1` working....
[00:14:44] <ghrust> 13rust/06auto 1479a0534 15Felix S. Klock II: Fix android problems with newly fixed rpass-full variable definition....
[00:14:46] *** Parts: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP) ()
[00:18:01] *** Quits: TimAbraldes (quassel@125EF623.B2666F0E.66399531.IP) (Input/output error)
[00:26:19] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.3)
[00:27:25] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[00:28:54] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[00:29:03] *** kimundi is now known as zz_kimundi
[00:35:49] *** Quits: tjc (tjc@5358A633.3778D849.1D6E592A.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[00:43:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[00:45:09] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[01:00:19] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[01:00:20] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[01:01:37] *** Joins: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP)
[01:01:37] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14413ee7b to 144cf8d8c: 02http://git.io/N3iJvQ
[01:01:37] *** Parts: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP) ()
[01:01:38] *** Joins: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP)
[01:01:38] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/tdD2-Q
[01:01:38] <ghrust> 13rust/06auto 14304d82a 15Alex Crichton: syntax: Tweak parsing lifetime bounds on closures...
[01:01:38] <ghrust> 13rust/06auto 14899c635 15bors: auto merge of #13268 : alexcrichton/rust/parse-closure, r=cmr...
[01:01:38] *** Parts: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP) ()
[01:15:17] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Ping timeout)
[01:22:46] *** Joins: ELBA573 (ELBA573@moz-FA5E2341.pools.arcor-ip.net)
[01:24:03] *** Quits: ELBA573 (ELBA573@moz-FA5E2341.pools.arcor-ip.net) (User has been banned from Mozilla (no spamming here))
[01:34:44] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[01:41:37] *** Joins: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP)
[01:41:37] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/kehKFw
[01:41:37] <ghrust> 13rust/06auto 145b05b9d 15Alex Crichton: syntax: Tweak parsing lifetime bounds on closures...
[01:41:37] <ghrust> 13rust/06auto 14ff8b93d 15bors: auto merge of #13268 : alexcrichton/rust/parse-closure, r=cmr...
[01:41:38] *** Parts: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP) ()
[01:59:16] *** Quits: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com) (Quit: Leaving.)
[02:02:24] <larsberg> was there a change in the last month or so to how target triples are passed into configuration files? the one we used to pass ("arm-linux-androideabi") seems to be ignored
[02:02:57] <cmr> hm
[02:03:06] <cmr> I seem to remember something with thumb.
[02:05:46] <larsberg> cmr: hrm, maybe https://github.com/mozilla/rust/pull/10942 ...
[02:05:51] <larsberg> I'll play around some more
[02:06:35] <larsberg> cmr: speaking of strange hardware, apart from Android I'm also trying to help get servo running on a http://pandaboard.org/node/223/#PBSetUp
[02:15:07] *** Quits: blank_name (blank_name@B722FFEC.940B1E75.6D228269.IP) (Ping timeout)
[02:16:38] *** Joins: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP)
[02:16:38] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14ff8b93d to 144cf8d8c: 02http://git.io/N3iJvQ
[02:16:38] *** Parts: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP) ()
[02:16:39] *** Joins: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP)
[02:16:39] <ghrust> [13rust] 15bors pushed 9 new commits to 06auto: 02http://git.io/P-OvyA
[02:16:39] <ghrust> 13rust/06auto 14ae5da74 15Brian Anderson: Remove check-fast. Closes #4193, #8844, #6330, #7416
[02:16:39] <ghrust> 13rust/06auto 143dd9500 15Brian Anderson: test: Ignore compile-fail/issue-5806.rs...
[02:16:40] <ghrust> 13rust/06auto 144ab711e 15Brian Anderson: mk: Pass the name of the make command to maketest.py...
[02:16:42] *** Parts: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP) ()
[02:23:08] *** Quits: Jesse (jruderman@moz-62518563.mtv2.mozilla.com) (Quit: Jesse)
[02:32:01] *** Quits: zz_kimundi (kimundi@moz-DF1E95E2.dip0.t-ipconnect.de) (Ping timeout)
[02:33:21] *** Joins: c74d3 (c74d3a4ebb@moz-E2EAC718.oc.oc.cox.net)
[02:35:29] *** Joins: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com)
[02:35:42] *** Joins: zz_kimundi (kimundi@moz-79C0736A.dip0.t-ipconnect.de)
[02:35:43] *** zz_kimundi is now known as kimundi
[02:49:01] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[02:59:32] *** Joins: blank_name (blank_name@E4C1FCD5.66204B68.6D228269.IP)
[03:12:12] *** Quits: Luqman (laden@moz-AB7945E9.csclub.uwaterloo.ca) (Ping timeout)
[03:12:52] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[03:15:39] *** Joins: Luqman (laden@moz-AB7945E9.csclub.uwaterloo.ca)
[03:16:20] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[03:16:40] *** Joins: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP)
[03:16:40] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14ac3a51b to 144cf8d8c: 02http://git.io/N3iJvQ
[03:16:40] *** Parts: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP) ()
[03:26:22] *** Joins: lpy (lpy@207F51B2.F09091A8.1348A864.IP)
[03:28:57] *** Quits: lpy (lpy@207F51B2.F09091A8.1348A864.IP) (Connection reset by peer)
[03:29:09] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[03:31:30] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[03:32:05] *** Joins: lpy (lpy@186A8F3A.F09091A8.1348A864.IP)
[03:33:08] *** Joins: lpy_ (lpy@34124F54.F09091A8.1348A864.IP)
[03:33:13] *** Quits: Nekit1234007_ (Nekit12340@6B5BB457.8C6C029.4707F662.IP) (Quit: )
[03:33:43] *** Quits: lpy (lpy@186A8F3A.F09091A8.1348A864.IP) (Connection reset by peer)
[03:36:00] *** Quits: lpy_ (lpy@34124F54.F09091A8.1348A864.IP) (Client exited)
[03:46:27] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[03:49:06] *** Joins: brson (brson@moz-62518563.mtv2.mozilla.com)
[03:49:06] *** ChanServ sets mode: +qo brson brson
[03:54:16] *** Quits: canhtak (canhtak@moz-641FE58F.wl.t.ulaval.ca) (Quit: canhtak)
[04:06:37] *** Joins: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP)
[04:06:38] <ghrust> [13rust] 15bors 04force-pushed 06auto from 146839594 to 144cf8d8c: 02http://git.io/N3iJvQ
[04:06:38] *** Parts: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP) ()
[04:06:39] *** Joins: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP)
[04:06:39] <ghrust> [13rust] 15bors pushed 5 new commits to 06auto: 02http://git.io/q-0aNA
[04:06:39] <ghrust> 13rust/06auto 143ccbffa 15Felix S. Klock II: After a hash mismatch error, emit file-system paths of crates involved....
[04:06:39] <ghrust> 13rust/06auto 141599d22 15Felix S. Klock II: Added session.fileline_note() method and support infrastucture for it....
[04:06:39] <ghrust> 13rust/06auto 144afd060 15Felix S. Klock II: Accumulate list of paths for crate hash mismatch....
[04:06:41] *** Parts: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP) ()
[04:19:46] *** Quits: blank_name (blank_name@E4C1FCD5.66204B68.6D228269.IP) (Ping timeout)
[04:22:23] *** Quits: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com) (Quit: Leaving.)
[04:28:09] *** Joins: blank_name (blank_name@AD0BCBC4.940B1E75.6D228269.IP)
[04:29:40] *** Joins: mib_um8v0v (Mibbit@3E3094EC.34458CF2.CC1A2609.IP)
[04:30:19] *** Quits: det (chris@moz-EAECB432.lv.lv.cox.net) (Ping timeout)
[04:31:44] *** Quits: mib_um8v0v (Mibbit@3E3094EC.34458CF2.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[04:32:34] *** Joins: whitglint (uid15486@moz-31ABA2C0.irccloud.com)
[04:38:41] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Quit: Textual IRC Client: www.textualapp.com)
[04:41:44] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[04:41:46] *** Quits: Rym (y@393F734D.E175BF4B.51C6DE68.IP) (Ping timeout)
[04:42:09] *** Joins: Rym (y@393F734D.E175BF4B.51C6DE68.IP)
[04:50:57] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[04:52:18] *** Quits: mcpherrin (mcpherrin@moz-464166A4.hsd1.ca.comcast.net) (Client exited)
[04:54:25] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[04:54:40] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[04:56:41] *** Joins: det (chris@moz-EAECB432.lv.lv.cox.net)
[04:57:47] *** Quits: det (chris@moz-EAECB432.lv.lv.cox.net) (Quit: Leaving)
[04:58:06] *** Joins: det (chris@moz-EAECB432.lv.lv.cox.net)
[05:08:56] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[05:09:40] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[05:10:31] *** Joins: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP)
[05:10:32] <ghrust> [13rust] 15alexcrichton 04force-pushed 06try from 14a46a133 to 1404fff6f: 02http://git.io/k471pw
[05:10:32] <ghrust> 13rust/06try 14ae5da74 15Brian Anderson: Remove check-fast. Closes #4193, #8844, #6330, #7416
[05:10:32] <ghrust> 13rust/06try 143dd9500 15Brian Anderson: test: Ignore compile-fail/issue-5806.rs...
[05:10:32] <ghrust> 13rust/06try 144ab711e 15Brian Anderson: mk: Pass the name of the make command to maketest.py...
[05:10:34] *** Parts: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP) ()
[05:14:49] *** Quits: blank_name (blank_name@AD0BCBC4.940B1E75.6D228269.IP) (Ping timeout)
[05:18:30] *** Quits: aatch|mobile (aatch@moz-2BB0AC01.cable.telstraclear.net) (Client exited)
[05:18:33] *** Joins: aatch|mobile (aatch@moz-2BB0AC01.cable.telstraclear.net)
[05:21:35] *** Joins: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP)
[05:21:36] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/q-0aNA
[05:21:36] *** Parts: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP) ()
[05:23:07] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[05:24:34] *** Joins: blank_name (blank_name@AB55F408.AA624E84.6D228269.IP)
[05:25:11] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[05:26:37] *** Joins: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP)
[05:26:37] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/TrB-dw
[05:26:37] *** Parts: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP) ()
[05:26:38] *** Joins: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP)
[05:26:38] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/8tW9UQ
[05:26:38] <ghrust> 13rust/06auto 14fbff5e6 15Alex Crichton: syntax: Tweak parsing lifetime bounds on closures...
[05:26:38] <ghrust> 13rust/06auto 14f01a458 15bors: auto merge of #13268 : alexcrichton/rust/parse-closure, r=cmr...
[05:26:39] *** Parts: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP) ()
[05:27:06] *** Joins: edwardw (Mibbit@4660DACB.EE06708D.4BFBD933.IP)
[05:30:32] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[05:32:17] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[06:00:00] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[06:01:35] *** Joins: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP)
[06:01:35] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/uC-OWA
[06:01:35] <ghrust> 13rust/06auto 14fbff5e6 15Alex Crichton: syntax: Tweak parsing lifetime bounds on closures...
[06:01:35] <ghrust> 13rust/06auto 140e5bacd 15bors: auto merge of #13268 : alexcrichton/rust/parse-closure, r=cmr...
[06:01:35] *** Parts: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP) ()
[06:01:36] *** Joins: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP)
[06:01:37] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14f01a458 to 14339d400: 02http://git.io/N3iJvQ
[06:01:37] *** Parts: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP) ()
[06:04:00] *** Quits: Rym (y@393F734D.E175BF4B.51C6DE68.IP) (Ping timeout)
[06:06:45] *** Quits: brson (brson@moz-62518563.mtv2.mozilla.com) (Ping timeout)
[06:20:17] *** Joins: Rym (y@393F734D.E175BF4B.51C6DE68.IP)
[06:23:30] *** Joins: brson (brson@moz-62518563.mtv2.mozilla.com)
[06:23:30] *** ChanServ sets mode: +qo brson brson
[06:26:55] *** Quits: b (b@moz-55CA322E.org) (Ping timeout)
[06:29:20] *** Joins: b (b@moz-55CA322E.org)
[06:30:39] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[06:32:36] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[06:36:07] *** Quits: japaric_ (japaric@E527F424.ABE6A7FD.E5B504CC.IP) (Ping timeout)
[06:38:09] *** Quits: victorporof (victorporo@moz-1C281963.dsl.bell.ca) (Quit: victorporof)
[06:38:50] *** Joins: japaric_ (japaric@AD8E3BA8.D2FA42B.95AFB88D.IP)
[06:42:42] <Eridius> goddammit, lldb is still not able to see the stack past rt::unwind::begin_unwind_inner
[06:42:46] <Eridius> acrichto: ^
[06:43:21] <Eridius> this is rather problematic because I'm getting a task failure due to Err().unwrap(), but the backtrace suggests it's coming from my function and yet my function doesn't call .unwrap()
[06:43:42] <huon> `RUST_BACKTRACE=1 ./foo` ?
[06:43:52] <Eridius> huon: yeah that's what suggests the unwrap() is called by my function
[06:44:06] <Eridius> the only result-related stuff I have is try!(writeln!(&mut io::stder(), ...))
[06:45:31] * huon hates how useless Result.unwrap() is
[06:45:48] <huon> it'd be really nice if it required E: Show to display the contents
[06:46:01] *** Joins: rajaram_ (rajaram@E8598C35.797776A.BE4CF869.IP)
[06:46:02] <Eridius> it would be nice if it could be partially specialized for E: Show
[06:46:09] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[06:46:39] <Eridius> or if ~Any could be tricked into somehow yielding a ~Show
[06:47:44] <Eridius> oh fuck. I just found the unwrap. goddammit. I had one call that wasn't a writeln!(). But I searched for the string "unwrap"! Fucking Vim
[06:47:57] <huon> could have unwrap use Show and `unwrap_with_a_shitty_error_message()` do what our current unwrap does.
[06:48:18] <sfackler> == huon
[06:48:33] <Eridius> eh, I think we'd have to do something like .unwrap_show() and leave .unwrap() as it is
[06:48:48] <Eridius> but it would be significantly better if we could just partially specialize!
[06:48:50] <huon> Eridius: ... default should be the nicest, in my mind
[06:49:04] <Eridius> I really want to get impl<T:!Show> to work, because then this would work. But I'm not convinced negative trait bounds are actually doable
[06:49:16] <huon> they probably break the typesystem
[06:49:22] <huon> or inference
[06:49:27] * huon doesn't know, though
[06:49:38] <Eridius> at the very least you can create an undecidable cycle, where either 2 or more types implement a series of traits, or they implement none of them
[06:49:45] <Eridius> and that would have to be detected and triggering an error
[06:49:51] <Eridius> but I don't know if there are more serious unfixable problems
[06:51:13] <Eridius> on an unrelated note, apparently using posix_spawnp() to spawn a task with stdout connected to a FIFO, when there's nobody reading the FIFO, will freeze the entire terminal
[06:51:34] <Eridius> or at least I froze it when spawning a process inside lldb, but when I managed to kill -9 the spawned process, lldb indicated the error was an interruption of posix_spawnp()
[06:51:36] *** Joins: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP)
[06:51:36] <ghrust> [13rust] 15bors 04force-pushed 06auto from 140e5bacd to 14339d400: 02http://git.io/N3iJvQ
[06:51:36] *** Parts: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP) ()
[06:51:39] *** Joins: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP)
[06:51:39] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/gWFDIA
[06:51:39] <ghrust> 13rust/06auto 1407de282 15Alex Crichton: rmake: Fix a test on FreeBSD
[06:51:39] <ghrust> 13rust/06auto 145bd1f0e 15bors: auto merge of #13288 : alexcrichton/rust/remove-check-fast, r=brson...
[06:51:40] *** Parts: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP) ()
[06:51:52] <Eridius> and by "terminal" I mean the entirety of Terminal.app was frozen
[06:51:55] * Eridius should have sampled it
[06:52:28] <Eridius> woohoo, I just produced a 100% reliable reproduction case of Rust getting EAGAIN from .write() to stdout
[06:52:34] <Eridius> acrichto: ^
[06:53:04] <huon> Eridius: \o/
[06:53:17] <huon> now you get to produce a 100% reliable fix :P
[06:53:30] <Eridius> so the question is, should the fix be to turn off O_NONBLOCK on the fd, or to fall back to select()/whatever?
[06:53:42] <Eridius> huon: the issue is libnative's file I/O assumes the fd is never O_NONBLOCK
[06:53:54] <Eridius> which, assuming nobody calls into libc::fcntl(), seems like a reasonable assumption
[06:54:09] <Eridius> except that character devices and FIFOs share the O_NONBLOCK flag across processes
[06:54:31] <Eridius> so I have a tiny C program that sets O_NONBLOCK on its stdout, and I run `(./mknblock; ./rust_program) > fifo`
[06:54:38] <Eridius> rust_program just writes 1MB to its stdout
[06:55:36] <Eridius> and if I do something silly like `sleep 1 < out` for the read side, rust fills up its 8k buffer and dies
[06:55:57] <Eridius> well, write() returns EAGAIN. Which nobody was expecting it to do
[07:10:49] *** Parts: tikue (tikue@A7ECB14D.ADD881BB.D5A9E6FD.IP) ()
[07:11:29] *** Joins: tikue (tikue@A7ECB14D.ADD881BB.D5A9E6FD.IP)
[07:11:49] *** Quits: Rym (y@393F734D.E175BF4B.51C6DE68.IP) (Ping timeout)
[07:12:09] <huon> Eridius: oh...
[07:12:19] <huon> that's a little annoying
[07:15:24] <Eridius> huon: I wrote up the issue as https://github.com/mozilla/rust/issues/13336
[07:24:00] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[07:25:40] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[07:26:05] <cmr> eugh
[07:26:18] <cmr> I hate that I can't take two types, each which have the same inherent methods.
[07:26:22] <cmr> factor that out into a trait
[07:26:27] <cmr> and not break backwards compat.
[07:26:41] <cmr> because now to use those methods the trait needs to be in scope.
[07:27:02] <cmr> I really hate importing traits sometimes.
[07:27:17] <cmr> I feel like when a trait and the type it's implemented for are in the same crate, the trait shouldn't have to be in scope.
[07:29:57] <edwardw> will nmatsakis' trait/method resolving work change that?
[07:31:15] <cmr> not to my knowledge.
[07:31:22] <cmr> I don't even know what that change entials, really.
[07:31:28] <cmr> is there any description of it?
[07:33:46] <edwardw> part of "trait reform" I believe: https://github.com/mozilla/rust/issues/5527
[07:34:42] <edwardw> it is a metabug so I don't know what he referred to when saying "finally got time to (mostly, mostly) finish up prototyped method/trait resolution algorithm code" yesterday :P
[07:34:47] <Eridius> cmr: I have briefly considered the idea that every crate should be able to define its own prelude, which gets used in dependant crates (with syntax to opt out). This would make libstd's prelude no longer special (the only special bit would be automatically linking to libstd)
[07:35:37] <cmr> Eridius: I've talked about this at length and I don't think that feature is desirable.
[07:35:53] <Eridius> yeah, it's got some pros and it's got some cons
[07:35:54] <cmr> hell, I'm pretty sure the last discussion I had about was with you :p
[07:36:00] <cmr> I prefer `inherit use`
[07:36:04] <cmr> or just making that the only `use`
[07:36:04] <Eridius> the primary reason for it is because of the issue with having a lot of traits that need to be in scope
[07:36:43] <Eridius> if we could make glob patterns actually usable and not feature-gated then we could have a convention of `use crate::traits::*` where traits is a module that re-exports all traits
[07:36:48] <cmr> less magic, doesn't rely on library authors to be responsible, puts the power in crate's developers hands.
[07:37:13] <cmr> crate developers'?
[07:37:16] <cmr> feh
[07:37:34] <cmr> crateses developerseseses
[07:38:13] <cmr> I still don't like that because 1. glob imports are seen as unclean, 2. it still doesn't solve the problem of having a `use` all the time.
[07:38:15] <doener> hrm, deriving(Eq) even for C-style enums optimizes rather poorly
[07:39:09] * cmr sighs
[07:39:19] <cmr> I'm going to spend the rest of the night writing rfcs instead of docs I guess
[07:39:28] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Quit: Textual IRC Client: www.textualapp.com)
[07:40:03] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[07:40:24] <Eridius> cmr: if macros were allowed to expand to view items, you could define a macro that imports all your traits ;)
[07:41:52] *** Joins: mawuli (mawuli@2760A9B5.4882C7ED.DE15C958.IP)
[07:44:31] <huon> cmr: do you feel like writing an RFC for renaming char to something else :P
[07:45:16] <Eridius> huon: what would you rename it to?
[07:45:31] <huon> Eridius: https://github.com/mozilla/rust/issues/12730
[07:46:28] <edwardw> closed!
[07:47:04] <edwardw> oh, closed as needing rfc
[07:47:38] <Eridius> huon: eh, I think all the alternatives are worse than char
[07:48:39] <huon> that's just, like, your opinion, man
[07:48:40] <huon> :P
[07:48:41] <Eridius> "{
[07:48:43] <Eridius> :P
[07:48:52] <huon> (but yeah, I'm not particularly keen on any of them... including `char`.)
[07:49:42] <Eridius> `char` isn't great, but it's a short name, and it's similar enough to characters to work
[07:49:54] <edwardw> `wchar`?
[07:50:24] <Eridius> edwardw: why use a name that includes `char` but is not `char`? The only reason to have a `wchar` is if it's to make it distinct from a `char`, but if there's no `char` then there's no distinction
[07:51:04] <Eridius> pretty much any name that would be more accurate than `char` would require users to learn more about unicode terminology than they probably know in order to understand the name
[07:51:10] <Eridius> (and if they don't understand the name it will be hard to remember it)
[07:51:22] <Eridius> `codepoint` is really the only one that springs to mind that doesn't have this issue, but I think that's too long
[07:51:29] <edwardw> well, there's always `char`. that's the reason why moving away from it
[07:51:37] *** Joins: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP)
[07:51:37] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/j2hMcA
[07:51:37] <ghrust> 13rust/06auto 14fbff5e6 15Alex Crichton: syntax: Tweak parsing lifetime bounds on closures...
[07:51:37] <ghrust> 13rust/06auto 1401f0c4b 15bors: auto merge of #13268 : alexcrichton/rust/parse-closure, r=cmr...
[07:51:38] *** Parts: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP) ()
[07:51:48] <edwardw> but yeah, I agree `wchar` is kinda stuoid
[07:51:54] <edwardw> stupid*
[07:53:00] <huon> Eridius: theoretically one isn't handling `char`/`codepoint`s in normal code
[07:53:02] <huon> ... theoretically.
[07:53:47] <Eridius> no? if I'm going to write a parser for some format that needs to handle more than ASCII my first inclination will be to process the output of s.chars()
[07:53:49] *** Joins: Axord (xord@moz-BC8E2FBC.static.rvsd.ca.charter.com)
[07:53:54] <Eridius> which means dealing with char
[07:54:04] <huon> that's likely incorrect though
[07:54:09] <Eridius> why?
[07:54:11] <huon> assuming you're interested in visible characters
[07:54:16] <Eridius> I'm not. It's a file format parser
[07:54:20] <Eridius> not a GUI text editor
[07:54:36] <huon> so how do you handle √∂ when it's o + :
[07:54:37] <huon> ?
[07:54:52] * huon apologies for the abuse of :
[07:55:15] <Eridius> why would I need to care? Depending on the grammar I'm parsing, either the codepoint (either one) is invalid in the current spot, or perhaps it's a string type at which point I just preserve it as-is
[07:55:47] <Eridius> on my screen I see that as a colon (:). Not sure what you're actually typing. mosh tends to mangle some unicode characters (the ones it can't figure out the visible width of)
[07:55:55] <huon> (i am typing a colon)
[07:56:01] <Eridius> oh, then why are you apologizing?
[07:56:19] <huon> because it's not the correct composing codepoint :P
[07:57:10] <huon> I guess that works for a grammar like that... but how often is one doing exactly that? I would think the most common uses of `char` are either working with (assumed to be) pure ASCII data, or an incorrect attempt to handle unicode.
[07:57:25] <Eridius> if it's pure ASCII data I'll just use u8
[07:57:43] <Eridius> and again, most transformations of unicode text shouldn't really care about composed/decomposed
[07:57:45] <huon> yeah, exactly, hence name of `char` doesn't matter. (both of those cases were "incorrect")
[07:57:58] <huon> what's a valid transformation of unicode text?
[07:58:11] <Eridius> it's only when doing things that require counting grapheme clusters, which really should be rare outside of user interfaces, and doing transformations like reversing a string
[07:58:18] <Eridius> huon: any sort of automated text processing
[07:59:03] <huon> is it even correct to do something as basic as transform case based on individual codepoints?
[07:59:46] <huon> (oh, sorry, "what's a valid codepoint-wise transformation of unicode text?")
[07:59:54] <Eridius> transforming case? I don't know. Probably not for languages like Thai (assuming that even has a case mapping)
[08:00:39] <Eridius> the trivial examples I can think of unfortunately work equally well when handling the input as u8 ;)
[08:01:19] <huon> replacing text doesn't work codepoint-wise (e.g. "a" -> "b" probably doesn't want to touch a decomposed √§)
[08:01:24] <Eridius> but back to file format parsing, that still seems like a fine example to me. If I define identifiers using XID_Start and XID_Continue then I need to actually have unicode support, e.g. using `char`. But I don't see why that kind of parsing would be tripped up by decomposed characters
[08:01:36] <huon> searching text doesn't work
[08:01:50] <Eridius> huon: right, the problems typically occur when you have boundaries for your transformations that are not well-defined
[08:02:13] <Eridius> searching works if I convert to nkfc/nkfd first
[08:02:18] <Eridius> (both the search string and the text I'm searching)
[08:02:21] <huon> does it?
[08:02:34] <Eridius> yep. that's the whole point of nkfc/nkfd. It's a canonical form
[08:02:34] <huon> a would find √§ for nkfd, right_
[08:02:37] <huon> ?
[08:02:43] *** Quits: Axord (xord@moz-BC8E2FBC.static.rvsd.ca.charter.com) (Quit: I'm sure it's perfectly safe)
[08:02:46] <Eridius> which may or may not be desired
[08:02:49] <Eridius> depends on your use case
[08:02:57] <Eridius> ignoring diacritics is often desirable when searching text
[08:02:57] <huon> I'm assuming it's a grapheme search
[08:03:39] <Eridius> well if it's a grapheme search then char isn't sufficient sure. But that's not necessarily what you want
[08:03:52] <Eridius> anyway, my very first example still works, which is a file format parser ;)
[08:04:14] <huon> yes... I acknowledged that
[08:04:50] <Eridius> in any case, anything that detects graphemes will likely be built on top of a char stream
[08:05:07] * ChrisMorgan loves iterators
[08:05:19] <huon> Eridius: not at a higher level?
[08:05:25] <Eridius> ChrisMorgan: I still want to find the time to resurrect my encoding library that uses iterators
[08:05:45] <huon> it would receive a stream of &str (or Grapheme or whatever)
[08:05:54] <Eridius> huon: you have to parse the bytes into chars first, and then parse the chars into your grapheme clusters
[08:06:03] *** Joins: Axord (xord@moz-BC8E2FBC.static.rvsd.ca.charter.com)
[08:06:33] <huon> Eridius: ... yeah?
[08:06:33] <Eridius> I mean you could alternatively detect grapheme cluster boundaries as indexes into a &str without actually converting the data type, but meh
[08:06:42] <huon> surely that's so obvious as to not be worth mentioning??
[08:06:47] <Eridius> Iterator<char> is a great building block for other things
[08:07:06] <Eridius> huon: if it's so obvious then isn't it obvious that translating a char stream to a Grapheme stream requires having chars?
[08:07:14] <huon> what's your point??
[08:07:39] <Eridius> now you've confused me
[08:07:50] <huon> I'm not saying we should remove chars
[08:08:02] <huon> nor that handling codepoints is never appropriate
[08:08:03] * ChrisMorgan steals all the confusion, leaving clarity and a baffled ChrisMorgan
[08:08:08] <Eridius> you suggested that producing a grapheme cluster stream would be done "at a higher level" than chars. And I'm saying that parsing chars is how you create your grapheme cluster stream
[08:08:11] <huon> just that it's rarely appropriate
[08:08:18] <Eridius> huon: ok, how are you going to implement your grapheme cluster stream without handling codepoints?
[08:08:20] <huon> Eridius: higher-level to the user
[08:08:23] <huon> eh??
[08:08:29] <huon> i.e. they get a stream of graphemes
[08:08:29] <Eridius> sigh
[08:08:31] * ChrisMorgan wonders how much people actually care about grapheme clusters
[08:08:34] <Eridius> libstd doesn't support grapheme clusters
[08:08:38] <huon> bug
[08:08:40] <Eridius> any such support will likely be in a separate library
[08:08:50] <Eridius> (because of the requirement for semantic knowledge about unicode)
[08:08:52] <huon> doesn't make handling codepoints correcter
[08:09:03] <huon> someone had a pretty small implementation of a grapheme stream
[08:09:06] <Eridius> huon: it depends on your use case!
[08:09:18] <Eridius> again, back to my very first example, a file format parser almost certainly wants to handle chars, not grapheme clusters
[08:09:23] <huon> yes, obviously
[08:09:40] <Eridius> ok, obviously my example is correct? Then why do you keep suggesting that handling chars is something nobody should really want to do?
[08:09:44] <Eridius> file format parsing is pretty common
[08:09:54] <huon> clearly the correctness of handling codepoints depends on your use case, and yes, a file format parser in that context does want codepoints
[08:10:11] <ChrisMorgan> Can you give me an example of something that wants grapheme clusters and not codepoints?
[08:10:14] <huon> but most things with actual strings
[08:10:24] <Eridius> ChrisMorgan: the trivial example is reversing a string
[08:10:39] <huon> ChrisMorgan: counting characters, computing display width, searching (often), replacing
[08:10:48] <ChrisMorgan> Eridius: and when do you actually *do* that one?
[08:10:49] <edwardw> or `to_upper`
[08:10:54] <Eridius> huon: all of those actions are typically related to user interfaces
[08:11:05] <Eridius> so the basic answer is "anything user-interface related" generally wants to deal in grapheme clusters
[08:11:12] * ChrisMorgan would expect case conversion to be at the codepoint level rather than the grapheme cluster level, but may be wrong
[08:11:14] <Eridius> ChrisMorgan: I dunno. Very rarely
[08:11:40] *** Quits: edwardw (Mibbit@4660DACB.EE06708D.4BFBD933.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[08:11:52] <huon> ChrisMorgan: there are almost certainly some edgecases that mean doing it codepoint-wise is incorrect
[08:12:00] <huon> I'm not 100% sure on that though
[08:12:05] <ChrisMorgan> I'd defer to the Unicode spec on that, not sure of it.
[08:12:08] <cmr> huon: I also think all the alternatives are worse than char.
[08:12:18] <Eridius> huon: I'm not convinced there are. It's plausible, but not necessarily true
[08:12:27] <huon> Eridius: isn't handling a (unicode) textual input format essentially a user interface too?
[08:12:32] <ChrisMorgan> Really, searching with just a *little* bit of replacing (*never* involving splitting things up) is the only thing that I think "normal" programs should be doing with graphemes.
[08:12:44] <Eridius> huon: typically, no
[08:12:57] <huon> yes, normal programs should avoid introspecting strings as much as possible
[08:13:17] <Eridius> anyway, I meant to fix this libnative O_NONBLOCK bug an hour ago
[08:13:23] <Eridius> and my wife is bugging me to come to bed
[08:13:32] *** Quits: brson (brson@moz-62518563.mtv2.mozilla.com) (Quit: leaving)
[08:14:00] <cmr> Eridius: http://servomemes.tumblr.com/post/79357362642/internet-husband-larsberg-promises-that-it-will-be
[08:14:08] <Eridius> cmr: :D
[08:14:12] <cmr> I believe that particular upgrade took a month? :p
[08:14:22] * ChrisMorgan wonders whether actively *stopping* people from doing *anything* with strings mightn't be a better plan
[08:15:06] <cmr> ChrisMorgan: personally I think we should just remove strings!
[08:15:09] <cmr> floats, too.
[08:15:13] <cmr> and preferably io
[08:15:17] <huon> http://unicode.org/faq/casemap_charprop.html fwiw
[08:15:21] *** Joins: eibwen (kvirc@moz-BD8512E7.dip0.t-ipconnect.de)
[08:15:23] <cmr> but I'm willing to compromise on that.
[08:15:24] <huon> floats are nice
[08:15:29] <ChrisMorgan> cmr: yeah, that might be overkill.
[08:16:12] <cmr> no, overkill is bikeshedding the name of `char` for a year :p
[08:16:14] <huon> they're a really good solution to the problem they solve.
[08:16:16] <Eridius> huon: yay, uppercasing √ü produces SS. Good luck lowercasing that again!
[08:16:26] <Eridius> (lowercase/uppercase really needs to be locale-aware to handle things like that)
[08:16:36] <cmr> indeed, uppercasing is not surjective.
[08:16:39] <huon> turkish i is the canonical example of that
[08:16:46] <ChrisMorgan> Eridius: I've been told that √ü and ss are, in German, precisely equivalent.
[08:16:56] <Eridius> ChrisMorgan: well that's good
[08:17:04] <doener> no
[08:17:05] <Eridius> huon: what's the turkish i?
[08:17:19] <huon> http://en.wikipedia.org/wiki/Dotted_and_dotless_I
[08:17:20] <Eridius> oh goddammit stop distracting me!
[08:17:20] <ChrisMorgan> An *amazing* mess.
[08:17:33] <huon> http://unicode.org/faq/casemap_charprop.html#9
[08:17:35] <doener> for example, Masse = mass, Ma√üe = measures
[08:17:37] <ChrisMorgan> Eridius: and the capital of √ü is ·∫û
[08:17:50] <ChrisMorgan> doener: you speak German?
[08:18:00] <doener> I am german
[08:18:19] <doener> so, yes :-)
[08:18:21] <ChrisMorgan> Well, that conflicts with what I had been told, something which had been very convenient to "know" ‚òπ
[08:18:25] * ChrisMorgan is now sad
[08:18:39] <ChrisMorgan> doener: is ·∫û used much at all?
[08:18:48] <huon> doener: being german doesn't imply speaking german ;P
[08:18:53] <huon> it's just strong evidence.
[08:19:24] * ChrisMorgan is Australian and doesn't do a particularly good job of speaking Australian :P
[08:20:24] * cmr isn't good at English in any locality
[08:20:30] <cmr> ohh!
[08:20:33] <cmr> I should define en_CMR
[08:20:39] <cmr> clearly this is the solution
[08:21:05] <cmr> and my own timezone, Earth/Cmr
[08:21:12] <huon> anyway, afaict, it seems that case folding is essentially codepoint -> &[codepoint]
[08:22:24] <doener> ChrisMorgan: there aren't that many words that use it, but those that do aren't exactly uncommon, e.g. street (Stra√üe), measures (Ma√üe). And the distinction between √ü and ss is important.
[08:22:41] <ChrisMorgan> doener: no, I meant ·∫û, as distinct from √ü
[08:25:09] <doener> ah, that's the uppercase version, right? That's rather uncommon. Not even officially part of the language rules.
[08:25:40] <ChrisMorgan> OK.
[08:31:25] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[08:33:22] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[08:38:22] <Eridius> where did libc come from?
[08:38:38] <Eridius> or more specifically, what's the process to get things into it that it doesn't currently hvae?
[08:38:41] <Eridius> (like F_SETFL)
[08:46:36] *** Joins: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP)
[08:46:36] <ghrust> [13rust] 15bors 04force-pushed 06auto from 1401f0c4b to 14339d400: 02http://git.io/N3iJvQ
[08:46:36] *** Parts: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP) ()
[08:53:38] <doener> can you read the discriminant of a enum value from rust code?
[08:56:38] *** Joins: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP)
[08:56:38] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14daf2268 to 14339d400: 02http://git.io/N3iJvQ
[08:56:38] *** Parts: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP) ()
[08:56:38] *** Joins: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP)
[08:56:38] <ghrust> [13rust] 15bors pushed 5 new commits to 06auto: 02http://git.io/aET5kw
[08:56:38] <ghrust> 13rust/06auto 14308c035 15Corey Richardson: Remove libc from std...
[08:56:38] <ghrust> 13rust/06auto 1406ad5eb 15Corey Richardson: Change how the readdir/opendir hack works
[08:56:39] <ghrust> 13rust/06auto 140459ee7 15Corey Richardson: Fix fallout from std::libc separation
[08:56:41] *** Parts: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP) ()
[09:14:53] *** Joins: eddyb (eddy@717B0165.D51DAF03.FB866788.IP)
[09:19:27] <eddyb> acrichto: huh? https://travis-ci.org/mozilla/rust/jobs/22296828
[09:19:39] <eddyb> acrichto: is this one of those "output was cut off" issues?
[09:21:56] <eddyb> nmatsakis: let me know as soon as you get the resolution fixed - I'd like to implement the Index traits
[09:24:21] *** Joins: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP)
[09:24:21] <ghrust> [13rust] 15kballard 04force-pushed 06try from 1404fff6f to 14c74c073: 02http://git.io/k471pw
[09:24:21] <ghrust> 13rust/06try 14968612e 15Kevin Ballard: Add run-make test for libnative file I/O and O_NONBLOCK...
[09:24:21] <ghrust> 13rust/06try 14c74c073 15Kevin Ballard: libnative: Convert non-blocking fds to blocking when necessary...
[09:24:22] *** Parts: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP) ()
[09:24:51] <eddyb> oooh, non-blocking IO in libnative?
[09:24:57] <Eridius> eddyb: other way around
[09:25:19] <Eridius> it's possible for fds to be marked as O_NONBLOCK even though Rust didn't do it, and libnative doesn't expect it
[09:25:31] <Eridius> Rust's I/O model expects that read/write will block
[09:25:48] <Eridius> so this commit teaches libnative how to turn off O_NONBLOCK and try again
[09:26:06] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[09:26:19] <eddyb> oh :(
[09:26:25] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[09:26:41] <Eridius> yeah, sorry. non-blocking I/O in libnative is a wee bit of a more invasive change
[09:27:09] <Eridius> one of my worries with this commit is I don't know if I need to do anything about win32
[09:27:13] <Eridius> I only modified file_unix.rs
[09:27:27] <Eridius> and I have no idea how run-make tests interact with windows
[09:27:31] <Eridius> but that's why I pushed to try
[09:27:33] <Eridius> and now I'm going to bed
[09:31:23] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[09:32:10] *** Quits: ski (ski@moz-E5796727.student.chalmers.se) (Quit: Lost terminal)
[09:33:20] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[09:41:36] *** Joins: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP)
[09:41:36] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/_6CuSQ
[09:41:36] <ghrust> 13rust/06auto 142344c6c 15Alex Crichton: rustdoc: Fix hiding of private fields...
[09:41:36] <ghrust> 13rust/06auto 14d54d56a 15bors: auto merge of #13319 : alexcrichton/rust/rustdoc-fields, r=brson...
[09:41:37] *** Parts: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP) ()
[09:41:39] *** Joins: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP)
[09:41:39] <ghrust> [13rust] 15bors 04force-pushed 06auto from 140e25044 to 14339d400: 02http://git.io/N3iJvQ
[09:41:39] *** Parts: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP) ()
[09:42:10] <cmr> I now have rustc builds going back a full year.
[09:42:41] <eddyb> cmr: but do you have the two P graphs :P?
[09:42:44] <cmr> no
[09:42:46] <cmr> :(
[09:43:06] <eddyb> cmr: such NP >:(
[09:45:03] *** Quits: rajaram_ (rajaram@E8598C35.797776A.BE4CF869.IP) (Ping timeout)
[09:47:59] <eddyb> cmr: looking at PNaCl in depth, I don't like the i8 buffers restriction
[09:48:23] <eddyb> cmr: it feels like it could break aliasing and whatnot
[09:48:58] <eddyb> hmm, maybe the sane thing to do here would be to optimize x32 code as usual and then have a normalization pass for PNaCl
[09:49:41] <cmr> What restriction is that/
[09:49:47] <cmr> I haven't looked at pnacl in some time.
[09:50:11] <eddyb> cmr: see global variables and alloca https://developers.google.com/native-client/dev/reference/pnacl-bitcode-abi
[09:50:32] <eddyb> "The only allowed type for alloca instructions in PNaCl bitcode is i8."
[09:50:43] <cmr> aw no unnamed_addr
[09:51:13] <eddyb> I can't see this working without LTO first and then normalization
[09:51:38] <eddyb> can't possibly get all the optimizations you'd normally get, if you have the PNaCl restrictions
[09:52:54] <cmr> does llvm have a pnacl legalization pass?
[09:52:57] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[09:53:02] <eddyb> no idea
[09:53:32] <eddyb> it could be part of google's toolchain or we may have to craft it ourselves
[09:54:10] <cmr> http://lists.cs.uiuc.edu/pipermail/llvmdev/2014-March/070853.html
[09:54:21] <cmr> sounds like they have their own set of passes that do it.
[10:04:37] *** Quits: eddyb (eddy@717B0165.D51DAF03.FB866788.IP) (Ping timeout)
[10:06:10] *** Quits: luzie (lu.cy@moz-CD18B14B.customer.cdi.no) (Input/output error)
[10:06:17] *** Joins: luzie (lu.cy@moz-CD18B14B.customer.cdi.no)
[10:06:43] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[10:08:42] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[10:11:01] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[10:13:31] *** Quits: bytbox (s@moz-E1E7FAC3.washdc.fios.verizon.net) (Client exited)
[10:14:02] *** Joins: bytbox (s@moz-E1E7FAC3.washdc.fios.verizon.net)
[10:19:42] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[10:21:35] *** Joins: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP)
[10:21:35] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14d54d56a to 14339d400: 02http://git.io/N3iJvQ
[10:21:35] *** Parts: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP) ()
[10:21:36] *** Joins: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP)
[10:21:36] <ghrust> [13rust] 15bors pushed 3 new commits to 06auto: 02http://git.io/zxy65w
[10:21:36] <ghrust> 13rust/06auto 1451ea4fb 15Christopher Kendell: Small change to example to make variable values more sensible.
[10:21:36] <ghrust> 13rust/06auto 14dab5de2 15Christopher Kendell: Removed all instance of `@` in code examples.
[10:21:36] <ghrust> 13rust/06auto 143bfa050 15bors: auto merge of #13329 : ckendell/rust/remmanaged_tutorial, r=brson...
[10:21:38] *** Parts: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP) ()
[10:24:59] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[10:25:43] *** Joins: eddyb (eddy@717B0165.D51DAF03.FB866788.IP)
[10:26:48] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[10:31:23] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[10:33:21] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[10:41:44] *** Joins: lpy (lpy@1AF10827.F09091A8.1348A864.IP)
[10:43:00] <doener> hm, any good reason why deriving(Eq) still generates ne()? The default method should handle that now and AFAICT, there shouldn't be any significant performance difference
[10:43:15] <cmr> doener: probably not
[10:43:28] <cmr> probably hasn't been touched since default methods started working robustly
[10:43:59] <doener> ok, then I'll submit a PR
[10:45:04] <doener> still wondering how to improve the generated eq() :-/
[10:46:07] <cmr> hm
[10:46:15] <cmr> it looks like it expands into a pretty simple match.
[10:46:29] <cmr> is llvm not optimizing that into a single comparison?
[10:46:38] <doener> yeah, and llvm doesn't recognize the equality across the switches
[10:46:44] <cmr> ouch :(
[10:47:03] <cmr> for C-like enums we could cast to u64 and then compare those?
[10:47:19] <doener> yep. But currently, instead of a single cmp for a CEnum, you get one per variant
[10:47:22] <cmr> or cast to whatever the "repr" is if it has one
[10:47:45] <doener> also, llvm doesn't hoist loads out of switch cases, so you also have the load duplicated in each case
[10:47:51] <cmr> ouch
[10:47:53] <doener> Repr is also i64
[10:48:21] <doener> and llvm correctly optimizes (e as i64) down to the actual discriminant type
[10:48:56] <cmr> so this seems like it would work nicely for C-like enums, no?
[10:49:24] <doener> yep, I don't see how to add that optimization yet though
[10:50:05] <doener> also, maybe we can do better
[10:50:17] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Ping timeout)
[10:50:33] <cmr> well the deriving could simply check if none of the variants have data, can't it?
[10:51:33] <eibwen> in case of Pod, couldn't the generated Eq function simply memcmp?
[10:51:34] <doener> node_to_repr (or something like that) does that and could possibly be used there. But I don't understand how non_self_args is used yet. So I'm not sure where to put it
[10:53:24] *** Joins: gimpf (gimpf@moz-DD95D3C.adsl.highway.telekom.at)
[10:53:27] <doener> eibwen: depends on how you define Pod. Custom Eq implementation could break that, and Eq is implemented for things like int as well
[10:54:19] <eibwen> okay, I was talking about structs that #[derive(Eq)] themselves
[10:54:57] <doener> eibwen: so deriving(Eq) all the way down? Yeah, that would work I think
[10:55:06] <eibwen> yea
[10:56:00] <doener> what I'm pondering is doing a cmp of the discriminants first, returning false if they don't match. Then switch on one of the discriminants (since we know that we have the same variants), and if necessary do a struct compare
[10:56:26] <doener> Guess I'll try that in IR first to see how LLVM handles that
[10:58:19] *** Joins: rajaram_ (rajaram@E8598C35.797776A.BE4CF869.IP)
[11:04:26] *** Quits: rajaram_ (rajaram@E8598C35.797776A.BE4CF869.IP) (Ping timeout)
[11:12:10] <doener> heh, even just prependig the discriminant comparison allows llvm to perform better
[11:12:28] <doener> (comparison + early return that is)
[11:13:26] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[11:15:03] <huon> doener: the reason is eq != !ne for every type
[11:15:08] <huon> e.g. floats
[11:15:15] <huon> (and Eq is not total.)
[11:15:31] <huon> (i.e. doesn't have the requirement for totality)
[11:15:33] <doener> huon: ah, right.
[11:15:59] <huon> eibwen: &T is an example of a pod type for which Eq is not a memcmp
[11:16:20] <huon> (also, fwiw, Pod has been renamed to Copy :) )
[11:16:22] <cmr> we need to keep a central list of "this is wrong because $REASON"
[11:16:34] <cmr> the "pod means memcmp" thing has come up before.
[11:16:49] <huon> there's also "pod means safe to transmute to and from"
[11:16:57] <huon> & kills them all :P
[11:17:07] <eibwen> yea, but that's just because & wants deep compare
[11:17:33] <huon> also, float comparisons aren't just memcmp
[11:17:54] <huon> eibwen: ("just" because that doesn't mean that it's not broken to use memcmp ;P )
[11:18:30] <eibwen> huon: yea right, but we also noticed that #[deriving(Eq)] all the way down would work
[11:18:52] <eibwen> not sure if you'd want to special case that, though
[11:19:08] <huon> how do you have deriving(Eq) all the way down?
[11:19:24] <huon> Oh, I guess empty structs and enums as the bottom case
[11:19:58] <huon> seems rare to never ever transitively have a primitive type in a nontrivial aggregate type
[11:20:02] <huon> (but yeah, I guess so)
[11:20:19] *** Joins: victorporof (victorporo@moz-1C281963.dsl.bell.ca)
[11:20:27] <eibwen> huon: what about ints?
[11:20:42] <eibwen> they have memcmp-compatible Eqs too
[11:21:07] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzz‚Ä¶)
[11:21:14] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[11:22:11] <huon> eibwen: only unsigned ones, right?
[11:22:19] <eibwen> mh no
[11:22:23] <eibwen> also signed ones
[11:22:27] <huon> really?
[11:22:29] <eibwen> yes
[11:22:35] <huon> also, endianness plays a part
[11:22:48] <eibwen> all integers have the same endianness on the same platform
[11:22:49] <huon> I don't think so...
[11:23:11] <eibwen> either we're talking about different things or I don't get what could be going wrong with memcmp on integers
[11:23:25] <huon> -128i8 and 128u8 have the same representation, but compare differently to 0
[11:23:28] <huon> oh, wait
[11:23:31] <eddyb> heh
[11:23:32] <huon> we're just doing Eq
[11:23:37] <huon> sorry
[11:23:39] <eddyb> :)
[11:23:41] <huon> I do believe you :)
[11:24:00] <cmr> eibwen: integers actually don't have the same endianness on the same platform, on certain architectures you can mix endianness, and it can be changed at runtime which is used.
[11:24:01] <huon> anyways... floats still fail.
[11:24:12] <eibwen> didn't say nothing about floats :P
[11:24:59] <huon> yup :)
[11:25:01] <eibwen> so, structs, enums with #[deriving(Eq)] all the way down and ints would be safe for that optimized Eq
[11:25:06] <huon> hm
[11:25:26] <huon> what about `enum A { B(int), C }`
[11:25:38] <huon> I think the `int` part of the memory is undefined when the value is C
[11:25:55] <huon> and also the padding
[11:26:08] <cmr> Ohhh yes that kills this suggestion entirely.
[11:26:09] <huon> so memcmp can return false incorrectly
[11:26:16] <cmr> padding contents are going to be undefined entirely once I'm done with tbaa
[11:26:24] <eddyb> <3
[11:26:27] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[11:26:39] <eibwen> padding content isn't nulled?
[11:26:43] <eibwen> :(
[11:26:46] <cmr> it is now, it won't be in the future.
[11:26:55] <eibwen> why not? :)
[11:26:57] <huon> that'd be "pointless" extra work
[11:27:13] <cmr> because it's less efficient not to, and llvm can optimize better when it knows padding is undefined
[11:27:24] <huon> at a guess, they'd probably end up being zero most of the time
[11:27:32] <huon> but no guarantee of it
[11:27:35] <eibwen> cmr: depends :)
[11:27:49] <cmr> eibwen: it doesn't depend!
[11:27:50] <eibwen> e.g. when comparng it can optimize better when it's nulled...
[11:27:57] <huon> eibwen: being undefined gives LLVM strictly more choice
[11:28:06] <cmr> https://github.com/mozilla/rust/issues/10613
[11:28:16] <huon> (theoretically LLVM could choose to keep it zero always, if it thought that would be faster)
[11:28:36] <cmr> ok, but llvm doesn't do comparison
[11:28:39] <cmr> that's something we do
[11:28:44] <huon> (i find it highly unlikely that any compiler would have any logic for making that decision though)
[11:29:33] <eibwen> I've seen some C code that always keeps the padding zeroed, for easier comparison
[11:31:03] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzz‚Ä¶)
[11:31:24] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[11:33:21] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[11:33:42] <doener> with the manually adjust IR, results don't look too bad
[11:33:44] <doener> https://gist.github.com/dotdash/90c36c2eab6a9d59b740
[11:34:26] <cmr> doener: and that was changed just to compare discriminators first, right?
[11:35:00] <doener> no, that's with all the changes I intend to (try to) do
[11:35:08] <cmr> oh
[11:35:35] <cmr> doener: also you're a hero for spending all this time with the tiny details <3
[11:35:39] <huon> doener: changing just codegen, right? (not #[deriving])
[11:35:44] * huon <3 doener too
[11:36:34] *** Joins: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP)
[11:36:34] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/zxy65w
[11:36:34] *** Parts: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP) ()
[11:36:54] <doener> huon: I have no idea how to get it into rustc yet. But likely it's going into deriving. It's rather special
[11:37:30] <huon> doener: ok
[11:37:35] <huon> have fun with it :P
[11:38:11] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[11:41:35] *** Joins: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP)
[11:41:35] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/Tk0BVg
[11:41:35] <ghrust> 13rust/06auto 143766453 15Huon Wilson: rustc: move the check_loop pass earlier....
[11:41:35] <ghrust> 13rust/06auto 14e714859 15bors: auto merge of #13330 : huonw/rust/loop-error, r=alexcrichton...
[11:41:35] *** Parts: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP) ()
[11:41:38] *** Joins: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP)
[11:41:38] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/K96PXQ
[11:41:38] *** Parts: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP) ()
[11:42:28] <eddyb> this looked nicer in my head :/ https://github.com/mozilla/rust/pull/13316
[11:42:42] *** Quits: lpy (lpy@1AF10827.F09091A8.1348A864.IP) (Ping timeout)
[11:43:00] <huon> eddyb: put it back in your head and just put a photo of it there
[11:43:01] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[11:43:08] <huon> (photo of your head)
[11:43:13] <eddyb> potato
[11:43:19] *** Joins: lpy (lpy@1AF10827.F09091A8.1348A864.IP)
[11:43:32] <eddyb> ahh where is pnkfelix? I know how to consume the AST completely into a CFG
[11:43:57] <huon> do we want to actually consume it?
[11:44:11] <eddyb> well, does it make sense to keep both around?
[11:44:16] <huon> dunno?
[11:44:18] <eddyb> they aren't exactly tiny
[11:44:28] <huon> are there things (e.g. lints) that work more naturally on the AST
[11:44:31] <huon> ?
[11:44:36] <cmr> we still need spans and pretty printing.
[11:44:46] <eddyb> cmr: you'd store spans in the CFG ;)
[11:45:06] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[11:45:19] <eddyb> pretty printing after type-check? ugh
[11:45:34] <eddyb> anyways, most of the idea was about storing enough information in the CFG so nothing needs to touch the AST afterwards
[11:45:59] <eddyb> the CFG also becomes a recipe for producing SSA
[11:47:58] <eddyb> (including phis, if we want to start generating those ourselves instead of making a million allocas)
[11:48:08] <eddyb> oh, another idea. almost forgot this one *sigh*
[11:48:25] <cmr> eddyb: https://etherpad.mozilla.org/O7HIOOo25R :P
[11:48:31] <cmr> add a "eddyb's idle thoughts" section :p
[11:48:38] <eddyb> hehe
[11:48:51] <benh> oh boy a wishlist
[11:49:00] <benh> *copy+pastes D feature list*
[11:49:02] <eddyb> cmr: I had my own pad :D. but didn't use it properly :(
[11:49:12] <cmr> benh: this is a concrete, short-term feature list.
[11:49:13] <eddyb> benh: short term busy stuff
[11:49:18] <cmr> and not language features
[11:49:22] <cmr> (mostly)
[11:49:28] <eddyb> like "rename foo to Foo because it bugs me"
[11:51:17] <eddyb> acrichto, cmr: how crazy would it be to mix the bc of all the crates, do some simple reachability analysis to remove as many dead functions as possible, then run module passes? - instead of having LTO passes after module passes on the current crate
[11:52:41] <cmr> eddyb: llvm does that already iirc?
[11:52:52] <cmr> I thought basiccg stripped uncalled internal functions.
[11:53:08] <eddyb> but are rlib functions internal?
[11:53:11] <cmr> yes.
[11:53:18] <cmr> everything is marked internal in lto
[11:53:18] <eddyb> exported ones?
[11:53:21] <eddyb> aaah okay
[11:53:29] <cmr> that's *why* it is an optimization :p
[11:53:41] <eddyb> cmr: anyways, the big deal is moving the merger earlier
[11:54:05] <eddyb> pretty sure it's being redundant atm
[11:54:25] <cmr> once we merge the bc we're going to be doing the exact same thing llvm is to strip dead stuff.
[11:54:48] <cmr> unless we de-serialize the other libraries to do reachability on the ast/cfg
[11:55:06] <huon> is lto a executable-only thing?
[11:55:09] <cmr> yes
[11:55:14] <cmr> well
[11:55:17] <cmr> I think so, at least?
[11:55:26] <cmr> yes.
[11:55:32] <eddyb> cmr: forget the dead code part of my suggestion :P
[11:55:44] <cmr> well that's not strictly trie.
[11:55:45] <cmr> *true
[11:55:50] <eddyb> just compacting module/LTO passes
[11:55:51] <cmr> staticlib can receive lto too
[11:56:00] <cmr> but that's a hack for making non-binary binaries
[12:00:26] *** Quits: japaric_ (japaric@AD8E3BA8.D2FA42B.95AFB88D.IP) (Ping timeout)
[12:00:28] *** Joins: japaric (japaric@B39CB389.EFCA05B1.5C7588CA.IP)
[12:01:16] *** Joins: rajaram_ (rajaram@E8598C35.797776A.BE4CF869.IP)
[12:01:32] <cmr> eddyb: also I forgot to mention: I'm running benches to catch up with all the building I've been doing recently, and then I'll bench P
[12:02:48] <cmr> oh lol
[12:02:59] <cmr> it's benching one of my first PR's
[12:03:45] <eddyb> cmr, acrichto: hmm, maybe we can just disable module passes when LTO is enabled
[12:04:08] <eddyb> I guess we also need to fix the IO Runtime nonsense that makes LTO quite inefficient
[12:04:15] <cmr> https://github.com/mozilla/rust/pull/6485 nostalgia
[12:04:37] <eddyb> cmr: wow
[12:04:43] <eddyb> 3 bors builds
[12:05:00] <cmr> yeah that was when incoming and master weren't the same.
[12:05:06] <cmr> and also when master was always broken.
[12:06:09] <eddyb> https://github.com/mozilla/rust/pull/9850 my first PR - half an year ago :D
[12:07:20] <cmr> my rustiversary is in 20-odd days
[12:07:33] *** Quits: rajaram_ (rajaram@E8598C35.797776A.BE4CF869.IP) (Ping timeout)
[12:07:47] *** Joins: rajaram_ (rajaram@E8598C35.797776A.BE4CF869.IP)
[12:07:58] * huon is older
[12:08:00] <huon> https://github.com/mozilla/rust/pull/4159
[12:08:02] <huon> :P
[12:08:16] *** flaper87|afk is now known as flaper87
[12:08:46] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[12:08:47] <cmr> preb-bors!
[12:08:57] <cmr> *pre
[12:08:58] <eddyb> haha out of us 3 I have the newest and largest first PR :P
[12:09:05] <cmr> that wasn't my first pr
[12:09:09] <cmr> my first pr was much more modest
[12:09:13] <eddyb> hah
[12:09:16] <cmr> it was a doc patch
[12:09:26] <eddyb> docs? NOPE. borrowck
[12:10:10] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[12:10:41] <cmr> eddyb: https://github.com/mozilla/rust/commit/92bf9b68da05504e925e2b66ceb9f3e5f1a5b0ee
[12:10:46] <eddyb> oh, I've passed the 20k mark in lines added/removed (separately)
[12:11:04] *** Quits: lpy (lpy@1AF10827.F09091A8.1348A864.IP) (Client exited)
[12:11:07] <eddyb> now I "only" need to double it to pass huon :D
[12:11:07] <doener> I had the smallest first PR :-) https://github.com/mozilla/rust/pull/5867
[12:11:25] <eddyb> cmr: right, because with_capacity is not obvious :)))
[12:11:34] *** Joins: lpy (lpy@8B40CDAC.F09091A8.1348A864.IP)
[12:11:35] <cmr> eddyb: everything deserves docs.
[12:11:54] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[12:12:49] <flaper87> o/
[12:12:50] <eddyb> acrichto, cmr: another random thing: we can make HashMap::new be generic over H: Default = SipState, after we add fallback to inference
[12:13:01] <huon> doener wins
[12:13:10] <cmr> flaper87: thanks for doing the snaps recently :)
[12:13:13] <cmr> it's thankless work.
[12:13:20] <flaper87> cmr: my pleasure :)
[12:13:24] <eddyb> wow, a copy operator
[12:13:26] <cmr> (although I just contracted myself)
[12:13:32] <cmr> eddyb: there was `move` too.
[12:13:42] <flaper87> are we navigating Rust's history?
[12:13:45] <huon> cmr: there's not much of you to contract
[12:13:45] <cmr> yup
[12:13:49] <huon> 'c'?
[12:13:50] * flaper87 doesn't remember what his first contribution was
[12:13:57] <cmr> oops.
[12:14:06] <cmr> huon: the cmrvirus strikes again!
[12:14:28] <huon> flaper87: "Add SharedPort wrapper around rt::comm::SharedPort"
[12:14:46] <cmr> *contradicted
[12:14:49] <huon> actually, that's a lie
[12:15:22] <huon> flaper87: "Make rekillable consistent with unkillable", since it appears you changed your git name
[12:15:38] <eddyb> lol, what are those?
[12:15:48] * eddyb doesn't like zombie processes
[12:16:07] <cmr> unkillable was for opting out of linked failure in a critical section.
[12:16:10] <flaper87> huon: ah yeah, I changed it at some point
[12:20:46] <eddyb> gaaah the conflicts between my tiny ExprVec/ExprRepeat change and P
[12:25:55] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[12:26:17] *** Joins: edwardw (Mibbit@FF3CCB4.1B2F6624.7F41E82D.IP)
[12:27:22] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[12:28:18] <eddyb> did we decide on whether to implement Deref for shorter access to .node fields?
[12:28:34] <eddyb> like for Spanned<T>
[12:31:24] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[12:33:21] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[12:39:15] *** huon is now known as eddby
[12:39:55] *** flaper87 is now known as edbdy
[12:40:14] *** edbdy is now known as edbyd
[12:49:02] *** eddby is now known as eddby|grep
[12:49:36] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[12:52:46] <eddyb> https://travis-ci.org/mozilla/rust/jobs/22333754 yay rustdoc failures
[12:55:23] *** eddby|grep is now known as huon
[12:56:38] *** Joins: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP)
[12:56:38] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/Tk0BVg
[12:56:38] *** Parts: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP) ()
[12:56:45] <cmr> eddyb: oh I was thinking that we should do that during my attempted nap.
[12:57:34] <eddyb> cmr: I thought we should do that during some RL stuff yesterday :P
[13:01:37] *** Joins: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP)
[13:01:37] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/K7jCZQ
[13:01:37] <ghrust> 13rust/06auto 14d27dd82 15Michael Darakananda: Removed cmath and instrinsic wrapper.
[13:01:37] <ghrust> 13rust/06auto 1460d3c08 15bors: auto merge of #13331 : pongad/rust/remove-wrapper, r=thestinger...
[13:01:38] *** Parts: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP) ()
[13:01:39] *** Joins: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP)
[13:01:39] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/CK-L_A
[13:01:39] *** Parts: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP) ()
[13:12:16] <edbyd> bbl
[13:12:21] *** edbyd is now known as flaper87
[13:12:24] <flaper87> :P
[13:12:56] *** flaper87 is now known as flaper87|afk
[13:25:55] <eddyb> haha I confused github
[13:26:02] <eddyb> cmr: https://github.com/mozilla/rust/pull/13316
[13:26:10] <eddyb> cmr: the commit being tested by travis is the last one
[13:26:39] <eddyb> the rustdoc commit shows below it for some reason of timing
[13:27:04] <eddyb> ohh so close to +5k. need to fix more things :D
[13:30:43] <huon> github's insistence on chronological, not topological ordering is a well known problem
[13:31:05] <huon> (at least among bors users, since bors only looks at the topological ordering, and hence ignores some r+'s.)
[13:31:26] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[13:33:20] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[13:43:09] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[13:44:02] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[13:46:50] *** Joins: canhtak (canhtak@moz-641FE58F.wl.t.ulaval.ca)
[13:47:06] *** Quits: japaric (japaric@B39CB389.EFCA05B1.5C7588CA.IP) (Ping timeout)
[13:47:27] <benh> First time trying to work on librustc :}
[13:48:08] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Quit: Computer has gone to sleep.)
[13:48:32] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[13:49:21] *** Joins: japaric (japaric@2ECEA8F9.C4F72AE.F29ED47E.IP)
[13:50:13] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[13:54:28] <eddyb> you know what's amazing about Rust?
[13:54:40] <cmr> that the compiler works?
[13:55:01] <eddyb> given an abstraction using unsafety internally, like Vec<T>, we can dream of proving its safety in the future
[13:55:27] <eddyb> the footprint is tiny compared to what you would have to verify in the C++ world
[13:58:19] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[13:58:22] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[14:04:28] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[14:06:26] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[14:10:35] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[14:12:42] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[14:12:55] <eddyb> wait, did I remove desugar_doc when it was used by rustdoc? oops
[14:13:53] <eddyb> aah, I changed it to with_desugared_doc
[14:16:41] *** Joins: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP)
[14:16:42] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/K7jCZQ
[14:16:42] *** Parts: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP) ()
[14:17:38] *** Quits: lpy (lpy@8B40CDAC.F09091A8.1348A864.IP) (Ping timeout)
[14:21:38] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[14:21:38] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/LxuRGQ
[14:21:38] <ghrust> 13rust/06auto 14fbba696 15Matt Brubeck: Remove references to obsolete `do` keyword...
[14:21:38] <ghrust> 13rust/06auto 142dcdc75 15bors: auto merge of #13332 : mbrubeck/rust/doc-edit, r=huonw...
[14:21:38] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[14:21:41] *** Joins: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP)
[14:21:41] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/P2k1zQ
[14:21:41] *** Parts: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP) ()
[14:21:42] <eddyb> cmr: hang on, what??
[14:22:02] <eddyb> cmr: ty_unboxed_vec is not created anymore. how'd that happen?
[14:22:23] <huon> git blame
[14:22:27] <eddyb> tvec used to create it, I think
[14:22:46] <eddyb> huon: how? it's removed
[14:23:25] <huon> eddyb: git magical-blame
[14:23:30] *** Joins: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com)
[14:23:55] <doener> git log -Sty_unboxed_vec
[14:24:15] <eddyb> doener: thanks :D
[14:24:24] * huon runs it on his (probably) faster disk
[14:25:11] <huon> eddyb: 39f839d9ee2cbef25de4f3a4fca514f5ed8a313d
[14:25:14] <eddyb> though it's probably -Smk_unboxed_vec
[14:25:15] <huon> maybe
[14:25:59] <huon> hm, nope
[14:27:10] <eddyb> it's not cmr's dead code thing
[14:27:26] <eddyb> tvec used to call mk_unboxed_vec, pretty sure about that one
[14:28:25] <eddyb> let unboxed_vec_ty = ty::mk_mut_unboxed_vec(tcx, unit_ty);
[14:28:46] <eddyb> joke's on me
[14:28:51] <huon> hah
[14:29:52] *** huon is now known as Ms2ger|happy
[14:30:48] <doener> o.O
[14:30:52] *** Quits: eddyb (eddy@717B0165.D51DAF03.FB866788.IP) (Ping timeout)
[14:31:21] *** Ms2ger|happy is now known as huon
[14:41:48] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[14:46:34] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[14:46:58] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[14:48:38] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[15:04:57] *** Quits: edwardw (Mibbit@FF3CCB4.1B2F6624.7F41E82D.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[15:05:46] *** Joins: eddyb (eddy@717B0165.D51DAF03.FB866788.IP)
[15:05:57] *** Joins: edwardw (Mibbit@FF3CCB4.1B2F6624.7F41E82D.IP)
[15:11:47] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[15:13:27] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[15:17:13] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[15:17:49] *** Quits: canhtak (canhtak@moz-641FE58F.wl.t.ulaval.ca) (Quit: canhtak)
[15:19:08] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[15:23:49] *** Quits: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com) (Quit: Leaving.)
[15:24:04] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[15:24:23] *** Joins: jaras (textual@CA59A5EC.5F4B69C0.52E4E107.IP)
[15:25:06] <eddyb> mk_mut_unboxed_vec uses ast::MutImmutable
[15:25:08] <eddyb> wat
[15:25:25] <eddyb> huon: rustc is making fun of me, I'm sure of it now
[15:26:03] *** Quits: jaras (textual@CA59A5EC.5F4B69C0.52E4E107.IP) (Ping timeout)
[15:36:36] *** Joins: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP)
[15:36:36] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/LxuRGQ
[15:36:36] *** Parts: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP) ()
[15:41:34] *** Joins: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP)
[15:41:34] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/lZPR2w
[15:41:34] <ghrust> 13rust/06auto 1428938d0 15Kevin Butler: librustc: Improve error message for incompatible trait method signatures.
[15:41:34] <ghrust> 13rust/06auto 1494a055c 15bors: auto merge of #13333 : Ryman/rust/improve_incompatible_type_error, r=alexcrichton...
[15:41:34] *** Parts: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP) ()
[15:41:36] *** Joins: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP)
[15:41:36] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/RQDEQA
[15:41:36] *** Parts: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP) ()
[15:53:23] *** Joins: bvssvni (Mibbit@moz-A47B6F8E.bb.online.no)
[15:59:28] *** Joins: lpy (lpy@1834E2CB.F09091A8.1348A864.IP)
[16:01:24] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[16:03:21] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[16:07:07] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[16:11:39] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[16:12:31] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[16:13:31] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[16:15:02] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[16:20:21] *** Quits: rajaram_ (rajaram@E8598C35.797776A.BE4CF869.IP) (Ping timeout)
[16:26:14] <benh> Is there a way to get from a DefId that refers to a struct variant potentially from another crate to the enum defid/ty/name it belongs to?
[16:27:53] <benh> It's not so elegant to pass the enum's defid down just so I can report the name of the enum in an error, but I am a bit lost trying to figure out how to do it with just the variant's defid
[16:29:49] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.3)
[16:32:00] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[16:32:03] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[16:35:24] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[16:37:36] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[16:38:10] *** Quits: darnuria (darnuria@moz-AB6EB255.ip-91-121-133.eu) (Quit: WeeChat 0.4.3)
[16:38:15] *** Joins: darnuria (darnuria@moz-AB6EB255.ip-91-121-133.eu)
[16:43:34] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[16:44:07] *** Quits: lpy (lpy@1834E2CB.F09091A8.1348A864.IP) (Client exited)
[16:45:01] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[16:46:58] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[16:49:15] *** Quits: aatch|mobile (aatch@moz-2BB0AC01.cable.telstraclear.net) (Client exited)
[16:49:17] *** Joins: aatch|mobile (aatch@moz-2BB0AC01.cable.telstraclear.net)
[16:49:39] <eddyb> huon, cmr: not sure why I was scared of ty_unboxed_vec, this will be a tiny patch :D
[16:51:27] *** Quits: edwardw (Mibbit@FF3CCB4.1B2F6624.7F41E82D.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[16:52:12] <doener> hrm, so with an intrinsic to get the discriminant, I can write an eq implementation for enums that optimizes fairly well. Now how to get that into deriving...
[16:52:46] *** Quits: blank_name (blank_name@AB55F408.AA624E84.6D228269.IP) (Ping timeout)
[16:56:39] *** Joins: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP)
[16:56:39] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/lZPR2w
[16:56:39] *** Parts: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP) ()
[16:57:11] *** Joins: blank_name (blank_name@AB55F408.AA624E84.6D228269.IP)
[16:57:23] *** Joins: edwardw (edwardw@8229534F.B77F1D58.FAED9FFC.IP)
[17:01:35] *** Joins: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP)
[17:01:35] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/5idNag
[17:01:35] *** Parts: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP) ()
[17:01:36] *** Joins: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP)
[17:01:36] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/3jy5HA
[17:01:36] <ghrust> 13rust/06auto 14d9a1af2 15Ms2ger: Make the fields of semver::Version public again.
[17:01:36] <ghrust> 13rust/06auto 145dacd11 15bors: auto merge of #13339 : mozilla-servo/rust/semver-pub, r=cmr
[17:01:36] *** Parts: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP) ()
[17:01:43] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[17:01:50] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[17:05:32] <benh> $ grep 'is private' * | wc -l => 97
[17:05:34] <benh> lots of test coverage :3
[17:08:30] *** Joins: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net)
[17:08:58] <hoverbear> Hey folks, how can I make a build of rustc that skips building documentation? Like a `make` flag or something?
[17:10:26] *** Quits: Kxepal (Miranda@moz-78168BB9.pppoe.mtu-net.ru) (Ping timeout)
[17:10:58] <bvssvni> hoverbear: https://github.com/mozilla/rust/wiki/Note-build-system
[17:11:11] <bvssvni> hoverbear: according to this page it should be 'make rustc'
[17:11:46] <bvssvni> wonder if it works with make install, though
[17:11:48] <hoverbear> bvssvni: That's exactly what I was looking for, thank you so much. :)
[17:14:01] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[17:14:03] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[17:14:49] *** Joins: Kxepal (Miranda@moz-9AA2D61B.pppoe.mtu-net.ru)
[17:16:31] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[17:20:16] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[17:31:24] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[17:33:21] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[17:39:46] *** Joins: bjz_ (bjz@B398BE78.F804C29E.D35A31DF.IP)
[17:39:46] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[17:50:14] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzz‚Ä¶)
[18:03:59] *** Quits: gimpf (gimpf@moz-DD95D3C.adsl.highway.telekom.at) (Ping timeout)
[18:15:35] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[18:16:37] *** Joins: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP)
[18:16:37] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/3jy5HA
[18:16:37] *** Parts: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP) ()
[18:18:07] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[18:19:56] *** Joins: canhtak (canhtak@moz-641FE58F.wl.t.ulaval.ca)
[18:22:59] <Eridius> why did only try-win and try-bsd fail because of a missing license in my run-make file, and not the other bots?
[18:30:32] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[18:30:59] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[18:30:59] *** ChanServ sets mode: +o pnkfelix
[18:31:24] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[18:32:38] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[18:33:10] *** Joins: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP)
[18:33:10] <ghrust> [13rust] 15kballard 04force-pushed 06try from 14c74c073 to 14b51a4fd: 02http://git.io/k471pw
[18:33:10] <ghrust> 13rust/06try 14b51a4fd 15Kevin Ballard: libnative: Convert non-blocking fds to blocking when necessary...
[18:33:10] *** Parts: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP) ()
[18:33:21] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[18:34:29] *** Quits: bvssvni (Mibbit@moz-A47B6F8E.bb.online.no) (Quit: http://www.mibbit.com ajax IRC Client)
[18:36:01] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Ping timeout)
[18:36:01] *** Joins: Nekit1234007 (Nekit12340@450259EC.ABE6C08B.4707F662.IP)
[18:38:22] <eddyb> how do I git grep with absolute paths?
[18:40:21] <doener> eddyb: what do you mean?
[18:40:35] <eddyb> well, going with this for now: cd ~/Projects/rust; git grep -En --full-name %s src | sed 's|^|/home/eddy/Projects/rust/|' >&2
[18:40:56] <eddyb> doener: I'm adding a "git grep current selection and give me a list of things I can click on" to my IDE setup
[18:40:57] <Eridius> goddammit. `make clean` failed on try-win. That's the bot I actually want to test! http://buildbot.rust-lang.org/builders/try-win/builds/963/steps/clean/logs/stdio
[18:41:54] <Eridius> eddyb: so why do they have to absolute? Your grep there will spit them out relative to the top of the project
[18:41:59] <Eridius> which is a much nicer thing to display to the user
[18:42:05] <eddyb> > user
[18:42:08] <Eridius> and you can make them absolute if necessary when clicked on
[18:42:20] <eddyb> Eridius: this is not a new IDE
[18:42:25] <Eridius> ah
[18:42:31] <eddyb> just a tiny script for kdevelop
[18:42:55] <Eridius> in that case my only suggestion is to teach sed to use $PWD instead of hard-coding the path ;)
[18:43:20] <eddyb> nah, that's not useful
[18:43:39] *** Quits: edwardw (edwardw@8229534F.B77F1D58.FAED9FFC.IP) (Quit: Leaving...)
[18:43:54] <Eridius> try-win appears to have been failing for a while
[18:43:58] <Eridius> can anyone fix it?
[18:44:35] *** Joins: edwardw (edwardw@B5386878.16F55560.50B134B9.IP)
[18:44:47] <eddyb> hmm, is there a way to revert the order?
[18:45:02] <eddyb> if I change things, it's better to go bottom-to-up
[18:45:44] <Eridius> the order.. of output from grep?
[18:45:58] <eddyb> yeah
[18:46:49] <Eridius> I'm assuming it operates in depth-first tree order, which I'm also assuming means alphabetical. You want reverse alphabetical?
[18:47:21] <eddyb> reverse within a file
[18:47:31] <Eridius> ooh
[18:47:35] <eddyb> (there's probably a search function in the IDE itself that I don't know of)
[18:47:46] <Eridius> ..you want reverse within a file? That seems curious to me
[18:48:06] <Eridius> I very highly doubt grep supports that, because it searches the file as it reads it rather than buffering the whole thing in memory
[18:48:20] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[18:48:20] <Eridius> you'd need some sort of post-processing step that splits it based on each file and reverses the chunks individually
[18:49:12] <eddyb> hehe, thanks, I'll try to live without it for now, then :)
[19:01:12] <eddyb> cmr, huon: r? https://github.com/mozilla/rust/pull/13344
[19:02:00] *** Quits: doener (doener@moz-C68F600D.unity-media.net) (Quit: leaving)
[19:02:07] <eddyb> or anyone, really...
[19:02:19] <eddyb> though I should wait for a travis run
[19:03:05] <eddyb> yeah, oops
[19:03:17] *** Quits: blank_name (blank_name@AB55F408.AA624E84.6D228269.IP) (Ping timeout)
[19:07:42] *** Quits: canhtak (canhtak@moz-641FE58F.wl.t.ulaval.ca) (Quit: canhtak)
[19:07:48] *** Joins: blank_name (blank_name@4E09E8F4.3C0D267A.6D228269.IP)
[19:09:34] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[19:09:34] *** ChanServ sets mode: +o pnkfelix
[19:10:35] *** Joins: canhtak (canhtak@moz-641FE58F.wl.t.ulaval.ca)
[19:11:33] *** Joins: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP)
[19:11:33] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/qEyhdQ
[19:11:33] <ghrust> 13rust/06auto 14dbeea14 15Tobias Bucher: Fix an unnecessary use of `cast::transmute`...
[19:11:33] <ghrust> 13rust/06auto 149539be6 15bors: auto merge of #13343 : tbu-/rust/pr_smallfix, r=pcwalton...
[19:11:34] *** Parts: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP) ()
[19:16:25] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[19:18:55] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[19:22:24] *** Joins: rustilite (rustilite@moz-61B073BC.cpe.net.cable.rogers.com)
[19:22:31] *** Joins: rusti (rusti@moz-61B073BC.cpe.net.cable.rogers.com)
[19:26:10] <benh> metadata is weird
[19:26:31] <eddyb> src/librustc/middle/ty.rs:1783:15: 1783:77 warning: code is never used: `InteriorUnsized`, #[warn(dead_code)] on by default
[19:26:34] <eddyb> cmr: ^^ wow
[19:26:59] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Quit: Lost terminal)
[19:27:03] <edwardw> DST stuff?
[19:27:26] <eddyb> edwardw: I removed ty_unboxed_vec which was a trans-only thing
[19:28:16] <edwardw> oh ok
[19:31:29] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[19:33:21] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[19:35:58] <eddyb> acrichto: hopefully this will pass travis - r? https://github.com/mozilla/rust/pull/13344
[19:45:16] *** flaper87|afk is now known as flaper87
[19:45:45] <eddyb> cmr: how many days do you reckon until you can get some graphs of this?
[19:47:50] <Eridius> is there anyone around who has access to the bots to fix try-win?
[19:49:01] *** Quits: edwardw (edwardw@B5386878.16F55560.50B134B9.IP) (Quit: Leaving...)
[19:49:40] *** Joins: edwardw (edwardw@B5386878.16F55560.50B134B9.IP)
[19:51:13] *** Quits: blank_name (blank_name@4E09E8F4.3C0D267A.6D228269.IP) (Ping timeout)
[19:54:22] *** Joins: blank_name (blank_name@4E09E8F4.3C0D267A.6D228269.IP)
[19:55:15] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[19:56:54] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[20:03:53] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[20:06:44] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzz‚Ä¶)
[20:07:49] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[20:12:16] <eddyb> acrichto: not this again https://travis-ci.org/mozilla/rust/jobs/22353710
[20:17:54] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[20:19:37] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[20:19:38] *** Quits: edwardw (edwardw@B5386878.16F55560.50B134B9.IP) (Quit: Leaving...)
[20:21:30] *** Joins: edwardw (edwardw@B5386878.16F55560.50B134B9.IP)
[20:24:26] *** Quits: edwardw (edwardw@B5386878.16F55560.50B134B9.IP) (Quit: Leaving...)
[20:25:46] *** Quits: blank_name (blank_name@4E09E8F4.3C0D267A.6D228269.IP) (Ping timeout)
[20:26:05] *** Joins: blank_name (blank_name@4E09E8F4.3C0D267A.6D228269.IP)
[20:26:37] *** Joins: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP)
[20:26:37] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/qEyhdQ
[20:26:37] *** Parts: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP) ()
[20:28:00] *** Quits: blank_name (blank_name@4E09E8F4.3C0D267A.6D228269.IP) (Ping timeout)
[20:28:45] *** Joins: gimpf (gimpf@moz-F1EE3FEC.adsl.highway.telekom.at)
[20:30:12] *** Quits: victorporof (victorporo@moz-1C281963.dsl.bell.ca) (Ping timeout)
[20:30:13] *** Joins: blank_name (blank_name@F6A7B6FC.3527F9CE.93A5C78C.IP)
[20:31:26] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[20:31:38] *** Joins: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP)
[20:31:38] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/4SIUVA
[20:31:38] *** Parts: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP) ()
[20:31:59] *** Quits: gimpf (gimpf@moz-F1EE3FEC.adsl.highway.telekom.at) (Quit: Leaving.)
[20:33:22] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[20:37:49] *** Quits: doomlord_ (servitor@moz-56F8DA57.range86-148.btcentralplus.com) (Connection reset by peer)
[20:37:59] *** Joins: brson (brson@moz-62518563.mtv2.mozilla.com)
[20:37:59] *** ChanServ sets mode: +qo brson brson
[20:38:16] *** Joins: doomlord_ (servitor@moz-56F8DA57.range86-148.btcentralplus.com)
[20:43:57] * eddyb wonders what time it is in huon-land and cmr-land
[20:52:08] <bjz_> 6:50 in huon/bjz land
[20:52:15] <bjz_> (am)
[20:52:17] *** Quits: whitglint (uid15486@moz-31ABA2C0.irccloud.com) (Quit: Connection closed for inactivity)
[20:52:23] <eddyb> okay, that explains *that*
[20:52:37] <bjz_> added some links to the other IRC channels: https://github.com/mozilla/rust/pull/13345
[20:53:07] <eddyb> ugh, what is going on? now I have to debug this issue on my own :(
[20:53:23] <eddyb> really wish travis-ci would dump some binaries
[20:53:29] <bjz_> oh poor diddums
[20:53:38] * flaper87 wonders what is bjz_ doing up at 6:50 on a sunday
[20:53:50] * bjz_ couldn't sleep
[20:54:50] <eddyb> I have to wake early this sunday (in about 8h)
[20:55:27] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[20:56:14] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[21:07:21] <eddyb> acrichto: can we get travis-ci to output full backtraces on fatal errors? and an optional SIGSEGV handler to print a backtrace would be nice :)
[21:09:07] *** Quits: fhahn (fhahn@moz-7924DB5C.vie.surfer.at) (Ping timeout)
[21:16:22] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[21:17:07] *** Joins: fhahn (fhahn@moz-7924DB5C.vie.surfer.at)
[21:18:37] <eddyb> I'm not seeing the segfault that showed up in travis CI
[21:18:44] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[21:21:14] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[21:21:16] <eddyb> acrichto: this is great :( CNR https://travis-ci.org/mozilla/rust/jobs/22355529
[21:21:31] <eddyb> let's try run something to make sure it still actually works
[21:26:16] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[21:26:16] *** Quits: bjz_ (bjz@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[21:27:32] <eddyb> Current branch ast-ptr is up to date.
[21:27:37] <eddyb> well, ain't I an idiot
[21:31:32] <cmr> eddyb: tomorrow probs
[21:31:41] <eddyb> :(
[21:31:56] <eddyb> wait, no, it's still saturday there :D
[21:32:35] *** Joins: victorporof (victorporo@moz-1C281963.dsl.bell.ca)
[21:34:40] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[21:35:00] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[21:40:06] *** Quits: bytbox (s@moz-E1E7FAC3.washdc.fios.verizon.net) (Ping timeout)
[21:40:42] *** Joins: bytbox (s@moz-E1E7FAC3.washdc.fios.verizon.net)
[21:43:45] * flaper87 wants a nice css decoration on reddit :(
[21:44:01] *** Joins: Nekit1234007_ (Nekit12340@4CE4BE01.1B26E7DA.4707F662.IP)
[21:44:32] *** Quits: Nekit1234007 (Nekit12340@450259EC.ABE6C08B.4707F662.IP) (Ping timeout)
[21:46:37] *** Joins: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP)
[21:46:37] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/chAa1Q
[21:46:37] *** Parts: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP) ()
[21:47:07] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[21:51:33] *** Joins: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP)
[21:51:33] <ghrust> [13rust] 15bors pushed 4 new commits to 06auto: 02http://git.io/w0cGZA
[21:51:33] <ghrust> 13rust/06auto 142cddd68 15Felix S. Klock II: Avoid injecting unfulfilled dependence in compiletest on libnative.
[21:51:33] <ghrust> 13rust/06auto 143cbd98e 15Felix S. Klock II: Two fixes to get `make check-stage1` working....
[21:51:34] <ghrust> 13rust/06auto 144edf7b8 15Felix S. Klock II: Fix android problems with newly fixed rpass-full variable definition....
[21:51:36] *** Parts: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP) ()
[21:54:56] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[21:56:08] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[21:56:28] *** Joins: victorporof_ (victorporo@moz-1C281963.dsl.bell.ca)
[21:56:34] *** Quits: blank_name (blank_name@F6A7B6FC.3527F9CE.93A5C78C.IP) (Ping timeout)
[21:56:41] <Eridius> dammit acrichto, you r+'d a second before me! >_<
[21:57:06] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[21:57:15] *** Quits: victorporof (victorporo@moz-1C281963.dsl.bell.ca) (Ping timeout)
[21:58:33] *** Joins: victorporof (victorporo@moz-1C281963.dsl.bell.ca)
[21:59:00] <flaper87> Eridius: hehe, sounds like him :D
[21:59:00] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (services.mozilla.org (Too many invalid passwords))
[21:59:19] *** Quits: victorporof_ (victorporo@moz-1C281963.dsl.bell.ca) (Ping timeout)
[22:03:49] *** Quits: victorporof (victorporo@moz-1C281963.dsl.bell.ca) (Ping timeout)
[22:04:30] <Eridius> flaper87: last time it was cmr
[22:05:00] *** Joins: victorporof (victorporo@moz-1C281963.dsl.bell.ca)
[22:06:20] *** Quits: victorporof (victorporo@moz-1C281963.dsl.bell.ca) (Ping timeout)
[22:06:25] <benh> does travis ci run the testsuite too or does it just build?
[22:07:35] <flaper87> benh: it runs a subset of stage1 tests
[22:07:50] <flaper87> benh: https://github.com/mozilla/rust/blob/master/.travis.yml#L44
[22:08:13] <benh> ah, neat
[22:09:33] <benh> ... is there a manual for our makefile[s] anywhere, beyond https://github.com/mozilla/rust/wiki/note-build-system#make-targets ?
[22:10:36] <eddyb> omg acrichto is amazing https://github.com/mozilla/rust/pull/13268
[22:12:52] <eddyb> wait, what, do we still have once fns?
[22:12:55] *** Quits: brson (brson@moz-62518563.mtv2.mozilla.com) (Ping timeout)
[22:13:25] * eddyb haven't seen this before https://github.com/mozilla/rust/blob/master/src/test/run-pass/once-move-out-on-stack.rs
[22:13:32] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[22:13:41] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[22:14:07] <eddyb> why... are we not using it?
[22:14:25] <eddyb> *hasn't
[22:14:46] <benh> feature-flagged I guess
[22:15:43] <eddyb> I guess in the future we will base onceness on the (lack of) Copy-ability of the captures
[22:15:53] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[22:16:05] <Eridius> whoa. I had no idea whe had that either
[22:16:07] <Eridius> I want once fns now
[22:16:13] <eddyb> though strcat's proposal scares me. how many thousands of closures need capture by reference?
[22:16:15] <Eridius> I mean, I always wanted them, but I want them today
[22:21:46] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[22:22:47] * flaper87 thought procs used onceness
[22:22:59] <eddyb> flaper87: we're talking once ||
[22:23:30] <flaper87> yeah, I thought procs were implemented using something similar, I haven't looked at the implementation, TBH
[22:23:57] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[22:24:10] <eddyb> flaper87: procs are once, yes
[22:24:16] <Eridius> procs are once, but behave differently in other ways
[22:24:26] <Eridius> they don't capture values by reference, captured values are instead moved into them
[22:24:29] <Eridius> and they live on the heap
[22:28:00] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[22:28:46] *** Quits: eddyb (eddy@717B0165.D51DAF03.FB866788.IP) (Ping timeout)
[22:30:31] *** Joins: eddyb (eddy@717B0165.D51DAF03.FB866788.IP)
[22:43:36] *** Joins: blank_name (blank_name@69FB4306.94CCB18F.53C6B850.IP)
[22:44:10] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[22:48:50] <eddyb> *** Error in `x86_64-unknown-linux-gnu/test/run-pass/auto-ref-slice-plus-ref.stage1-x86_64-unknown-linux-gnu': malloc: top chunk is corrupt: 0x00000000010a5510 ***
[22:48:53] <eddyb> well, crud
[22:59:44] <benh> acrichto: thanks for the review!
[22:59:45] *** Quits: eibwen (kvirc@moz-BD8512E7.dip0.t-ipconnect.de) (Ping timeout)
[23:00:06] <benh> regarding doing the matching in one step, I mostly avoided that to stick to the 78 column limit of the surrounding code
[23:00:11] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[23:00:12] <ghrust> [13rust] 15alexcrichton 04force-pushed 06try from 14b51a4fd to 144fe0cd1: 02http://git.io/k471pw
[23:00:12] <ghrust> 13rust/06try 14308c035 15Corey Richardson: Remove libc from std...
[23:00:12] <ghrust> 13rust/06try 1406ad5eb 15Corey Richardson: Change how the readdir/opendir hack works
[23:00:12] <ghrust> 13rust/06try 140459ee7 15Corey Richardson: Fix fallout from std::libc separation
[23:00:14] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[23:00:25] <benh> i'll look into it soon
[23:02:58] <eddyb> cmr: heh, my new invocation ./x*/stage1/bin/rustc --emit=ir -O -o - -
[23:03:10] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[23:03:37] *** Joins: andrew-d_w (andrew-d_w@moz-17320F4E.hsd1.ca.comcast.net)
[23:04:39] <eddyb> acrichto: if only LTO did more than just a mess :(
[23:05:06] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[23:05:47] *** Quits: andrew-d_w (andrew-d_w@moz-17320F4E.hsd1.ca.comcast.net) (Input/output error)
[23:06:10] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[23:06:33] *** Joins: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP)
[23:06:33] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/w0cGZA
[23:06:33] *** Parts: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP) ()
[23:08:06] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Input/output error)
[23:11:32] *** Joins: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP)
[23:11:32] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/XjVYLQ
[23:11:32] *** Parts: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP) ()
[23:11:33] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[23:11:33] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/yuYIyw
[23:11:33] <ghrust> 13rust/06auto 14e82d8ce 15Alex Crichton: syntax: Tweak parsing lifetime bounds on closures...
[23:11:33] <ghrust> 13rust/06auto 145a192b9 15bors: auto merge of #13268 : alexcrichton/rust/parse-closure, r=cmr...
[23:11:33] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[23:18:37] <eddyb> ewww so much code in exchange malloc
[23:19:06] <eddyb> is_null is being silly
[23:19:16] *** Quits: doomlord_ (servitor@moz-56F8DA57.range86-148.btcentralplus.com) (Quit: Leaving)
[23:29:00] <benh> are block-local `use` items bad style?
[23:29:24] <benh> as in "gee, all these qualification make my oneliners take up too much space, better import a few names into this small scope so i can omit them"
[23:31:24] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[23:33:19] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[23:34:30] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[23:34:53] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[23:36:50] <eddyb> benh: not really
[23:37:21] <eddyb> but I'd use them sparingly. a rare piece of unsafe code dealing with intrinsics, that's a good reason
[23:37:57] *** flaper87 is now known as flaper87|afk
[23:38:38] <benh> It's more like if I import a bunch of variants from ty::, I can get away with a triply nested pattern that fits within 78 columns... ;)
[23:38:52] <benh> Probably not a good reason
[23:39:38] <eddyb> bleah
[23:39:50] <eddyb> I don't think I changed anything relevant :|
[23:39:59] <eddyb> the IR shows nothing obvious
[23:44:18] <eddyb> there we go, ~[~int] shows something
[23:51:00] <eddyb> ohh I was looking at the wrong test. maybe I should sleep, big day tomorrow :|
[23:51:00] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Quit: ChatZilla 0.9.90.1 [Firefox 28.0/20140314220517])
[23:56:19] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[23:57:04] <eddyb> haha. a division. wrong type. much lack of safety in trans
