[00:09:04] *** Quits: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca) (Quit: canhtak)
[00:11:47] *** Joins: twb (textual@moz-5DE8950B.hsd1.ga.comcast.net)
[00:14:26] *** Joins: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca)
[00:17:42] *** Joins: vky (chatzilla@moz-4F2E17BF.dsl.dynamic.sonic.net)
[00:45:32] *** Quits: twb (textual@moz-5DE8950B.hsd1.ga.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[01:03:03] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[01:07:34] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[01:07:52] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[01:24:25] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[01:37:59] *** kimundi is now known as zz_kimundi
[01:49:54] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Input/output error)
[01:50:01] *** Joins: twb (textual@moz-5DE8950B.hsd1.ga.comcast.net)
[02:16:21] *** Quits: vky (chatzilla@moz-4F2E17BF.dsl.dynamic.sonic.net) (Ping timeout)
[03:15:20] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[03:20:41] *** Quits: zz_kimundi (kimundi@moz-8CF1B152.dip0.t-ipconnect.de) (Ping timeout)
[03:24:18] *** Joins: zz_kimundi (kimundi@moz-E2132B33.dip0.t-ipconnect.de)
[03:24:20] *** zz_kimundi is now known as kimundi
[05:43:11] *** Quits: nielsle (nielsle@moz-C46DA772.boa.fiberby.dk) (Ping timeout)
[05:45:12] *** Joins: nielsle (nielsle@moz-C46DA772.boa.fiberby.dk)
[05:51:10] *** Quits: nielsle (nielsle@moz-C46DA772.boa.fiberby.dk) (Ping timeout)
[05:51:47] *** Quits: dbaupp (Thunderbir@A192CB9D.D5A1DCF.37681C44.IP) (Ping timeout)
[05:52:39] *** Joins: nielsle (nielsle@moz-C46DA772.boa.fiberby.dk)
[05:57:40] *** Quits: nielsle (nielsle@moz-C46DA772.boa.fiberby.dk) (Ping timeout)
[05:59:35] *** Joins: nielsle (nielsle@moz-C46DA772.boa.fiberby.dk)
[06:16:08] *** Quits: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca) (Quit: canhtak)
[06:32:49] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: sleep)
[06:38:14] *** Quits: twb (textual@moz-5DE8950B.hsd1.ga.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[07:27:34] *** Joins: eddyb (eddy@EBE709F3.F7C96DA2.FCAAE698.IP)
[07:38:22] *** Joins: vky (chatzilla@moz-4F2E17BF.dsl.dynamic.sonic.net)
[08:05:09] *** Joins: dbaupp (Thunderbir@moz-3BE4086E.lns20.syd6.internode.on.net)
[08:59:54] *** Quits: bjz (bjz@moz-DD4A2A91.lnse2.cha.bigpond.net.au) (Ping timeout)
[09:13:43] <eddyb> pcmattman: woo, I'm removing your extern "Rust" fn's
[09:14:12] <eddyb> pcmattman: and you can actually use closures for irqs and stuff
[09:37:17] <eddyb> gaaah, qemu, start behaving!
[09:38:46] <eddyb> can't get it to output serial, can't get it to crash, after I enable interrupts
[09:45:24] <eddyb> I have to find out how to debug qemu :/
[09:57:18] *** Joins: bjz (bjz@moz-DD4A2A91.lnse2.cha.bigpond.net.au)
[10:04:39] *** Quits: vky (chatzilla@moz-4F2E17BF.dsl.dynamic.sonic.net) (Ping timeout)
[10:23:27] <eddyb> pcmattman: I think your set_isr_handler handler is broken
[10:23:35] <pcmattman> hm?
[10:25:43] <eddyb> s/handler/hack
[10:25:48] <pcmattman> ah
[10:25:50] <pcmattman> how so?
[10:25:58] <eddyb> it's reading the start of an instruction
[10:26:06] <eddyb> qemu: fatal: Trying to execute code outside RAM or ROM at 0x247c8366
[10:26:13] <eddyb> it might be part of the BIOS
[10:26:17] <pcmattman> hmm
[10:26:28] <pcmattman> could be that passing the address of the function isn't working properly anymore
[10:26:34] <eddyb> don't worry, I think assembly can use the function directly now
[10:26:56] <pcmattman> that is correct, that was sorted out recently :)
[10:27:17] <eddyb> it's annoying how IRQs just don't work
[10:27:26] * pcmattman has been busy as of late, only going to get worse before the new year :P
[10:28:27] <pcmattman> the nice thing about IRQs is that getting them going is a pain, but once you have a good abstraction around them you literally never think about them again
[10:29:49] <eddyb> SIGABRT now, neat
[10:31:30] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[10:37:11] <eddyb> pcmattman: single-stepping BIOS is a bad idea :(
[10:40:16] <eddyb> Program received signal SIGUSR1, User defined signal 1.
[10:40:45] <eddyb> from... memset? WTF is going on?
[10:48:06] <eddyb> why would qemu abort :(
[10:50:18] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[10:57:56] <eddyb> pcmattman: BWAHAHAHAHA
[10:59:26] <eddyb> it's cycling through the isr handlers
[11:01:34] <eddyb> why is the jump not taken >_>
[11:12:03] <eddyb> pcmattman: it's... corrupted :/
[11:13:32] <eddyb> and it has pointers in it
[11:19:05] <eddyb> qemu: fatal: Trying to execute code outside RAM or ROM at 0x000a0000
[11:19:24] <eddyb> why can't it just let me see where it comes from?
[11:22:16] <eddyb> alignment matters, it seems
[11:25:30] <eddyb> pcmattman: ooooooooh. it's a stack overflow
[11:27:12] <eddyb> esp            0x102460 0x102460 <isr_9+6>
[11:39:32] <eddyb> I AM GOING MAD
[11:40:01] <eddyb> why can't qemu deal with executing code outside of RAM/ROM without an abort?
[11:57:54] <eddyb> pcmattman: mov gs, 0x18; triggers a #GP
[11:59:48] <eddyb> HAHAHAHahahahAHAHA
[11:59:57] <eddyb> pcmattman: it works with 0x28
[11:59:59] <eddyb> fucking hell
[12:14:36] <eddyb> pcmattman: https://github.com/eddyb/rustic/commits/refactoring
[12:14:55] <eddyb> I'm not sure if I should separate them into a thousand branches
[12:15:12] * eddyb has breakfast at 2pm
[12:37:45] *** kimundi is now known as zz_kimundi
[13:48:40] *** Joins: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca)
[14:14:09] *** Quits: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca) (Quit: canhtak)
[14:29:36] *** Joins: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca)
[14:39:41] *** Quits: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca) (Quit: canhtak)
[14:41:34] *** Quits: eddyb (eddy@EBE709F3.F7C96DA2.FCAAE698.IP) (Ping timeout)
[14:47:43] *** zz_kimundi is now known as kimundi
[14:54:23] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[15:05:33] *** kimundi is now known as zz_kimundi
[15:17:51] *** Joins: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca)
[15:26:45] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[15:27:34] *** Quits: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca) (Quit: canhtak)
[16:00:08] *** zz_kimundi is now known as kimundi
[16:04:38] *** Joins: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca)
[16:15:00] *** Quits: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca) (Quit: canhtak)
[16:51:02] *** Joins: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca)
[17:01:06] *** Quits: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca) (Quit: canhtak)
[17:07:37] *** Joins: devbug (quassel@2D4E172D.4C8B6099.9B57EA59.IP)
[17:10:08] *** Joins: twb (textual@moz-5DE8950B.hsd1.ga.comcast.net)
[17:24:05] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: Leaving.)
[17:35:29] *** Joins: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca)
[18:14:10] *** Quits: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca) (Quit: canhtak)
[18:27:14] *** Joins: eddyb (eddy@EBE709F3.F7C96DA2.FCAAE698.IP)
[18:30:35] *** Joins: zhbfvuvabar87r (esucg0aq47@629A2543.39B15D88.DB9D6342.IP)
[18:30:37] <zhbfvuvabar87r>   YOU MAY BE WATCHED 
[18:30:37] <zhbfvuvabar87r> WARNING       WARNING      WARNING,                       WARNING
[18:30:37] <zhbfvuvabar87r> WARNING             WARNING              WARNING,     WARNING         WARNING
[18:30:37] <zhbfvuvabar87r>  YOU MAYWATCHED
[18:30:37] <zhbfvuvabar87r> YOU MAY BE WATCHED
[18:30:37] <zhbfvuvabar87r>    YOU MAY BE WATCHED
[18:30:37] <zhbfvuvabar87r>             )
[18:30:37] *** Quits: zhbfvuvabar87r (esucg0aq47@629A2543.39B15D88.DB9D6342.IP) (User has been banned from Mozilla (no spamming here))
[18:31:07] *** Joins: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca)
[18:37:02] *** Joins: jmbto (jmbto@moz-FE174E29.fbx.proxad.net)
[18:37:36] <geomyidae> wut
[18:40:09] <eddyb> nothing new here
[18:42:34] <strcat> eddyb: https://github.com/thestinger/rust-core/commit/9531ebda9b8d71a31a2ccca53ce667bb52a8be90 it works! ;p
[18:43:28] <eddyb> yummy
[18:43:33] <strcat> http://ix.io/9cf
[18:43:39] <strcat> !0 = metadata !{metadata !"branch_weights", i32 64, i32 4}
[18:43:42] <strcat> \o/
[18:45:20] <eddyb> now most_likely which is always true if cfg(not(debug)) :P
[18:45:59] <eddyb> (I know the name is stupid, it's just what I used in a C++ project where I needed this)
[18:47:07] <eddyb> strcat: can we get #[naked] or something similar?
[18:47:14] <strcat> which would do what?
[18:47:50] <eddyb> remove the prelude fiddling with the stack and other similar things
[18:48:05] <eddyb> I want to move the interrupt handling routines in Rust
[18:48:34] <strcat> eddyb: that stuff should just be removed altogether
[18:48:44] <strcat> eddyb: there's #[no_split_stack] fwiw
[18:48:59] <eddyb> not just that
[18:49:10] <strcat> what else?
[18:49:54] <eddyb> let me look up docs on __attribute__((naked))
[18:51:11] <eddyb> strcat: http://wiki.osdev.org/Interrupt_Service_Routines#Naked_Functions
[18:51:30] <eddyb> there we go, prologue and epilogue, I forgot those names
[18:52:49] <eddyb> strcat: see the gcc example below
[19:00:11] *** Quits: eddyb (eddy@EBE709F3.F7C96DA2.FCAAE698.IP) (Ping timeout)
[19:17:51] *** Joins: eddyb (eddy@EBE709F3.F7C96DA2.FCAAE698.IP)
[19:28:00] *** Quits: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca) (Quit: canhtak)
[19:28:00] *** Quits: twb (textual@moz-5DE8950B.hsd1.ga.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[19:36:54] *** Joins: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca)
[19:38:10] *** Joins: twb (textual@moz-5DE8950B.hsd1.ga.comcast.net)
[20:41:46] *** Quits: jmbto (jmbto@moz-FE174E29.fbx.proxad.net) (Quit: Leaving)
[21:18:00] *** Quits: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca) (Quit: canhtak)
[21:37:43] *** Joins: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca)
[21:53:10] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[22:20:41] *** Joins: jmbto (jmbto@moz-FE174E29.fbx.proxad.net)
[22:31:04] *** Quits: jmbto (jmbto@moz-FE174E29.fbx.proxad.net) (Quit: Leaving)
[22:36:44] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[23:03:27] *** Quits: devbug (quassel@2D4E172D.4C8B6099.9B57EA59.IP) (Ping timeout)
[23:15:55] *** Quits: eddyb (eddy@EBE709F3.F7C96DA2.FCAAE698.IP) (Ping timeout)
[23:53:14] *** Quits: twb (textual@moz-5DE8950B.hsd1.ga.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
