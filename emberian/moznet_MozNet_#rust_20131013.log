[00:02:35] *** Quits: ztomo (ztomo@moz-596F7BA2.lns11.woo.bigpond.net.au) (Ping timeout)
[00:02:44] *** Joins: jviereck (Adium@moz-428D7628.dip0.t-ipconnect.de)
[00:04:31] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Input/output error)
[00:04:53] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[00:06:33] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[00:07:47] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[00:08:21] *** Joins: fyolnish (fyolnish@moz-548FF837.uqwimax.jp)
[00:09:27] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[00:09:34] <dcrewi> given "trait Tr { fn new() -> ~Tr }" I should be allowed to do Tr::new() right?
[00:10:03] <kimundi> yeah
[00:10:04] *** Quits: fyolnish (fyolnish@moz-548FF837.uqwimax.jp) (Ping timeout)
[00:10:04] *** Joins: Sonarpulse (user@moz-424CB7EB.cs.brown.edu)
[00:10:07] *** Quits: fran_ (fran@moz-38B8E3FD.telecom.net.ar) (Ping timeout)
[00:10:35] <kimundi> except you can't currently select what Self type to use
[00:11:03] <dcrewi> "cannot determine a type for this bounded type parameter: unconstrained type"
[00:11:05] *** Joins: nkoep (nik@moz-4C4B2E7F.pool.mediaways.net)
[00:11:26] <kimundi> yeah, it doesn't which new() to call
[00:12:01] <kimundi> The correct way would be Tr::<for Foo>::new()
[00:12:06] <kimundi> But that doesn'T work right now
[00:12:09] <dcrewi> well in my case, I actually define new on the trait, so there's only one
[00:12:22] <kimundi> No, there are still many
[00:12:31] <kimundi> They are just identical everywhere
[00:12:56] <kimundi> Because they are default assoziated functions
[00:13:22] <dcrewi> so plain Tr::new() will never be correct
[00:13:35] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[00:14:21] <kimundi> Well. It would be incorrect in the sense that rustc could never figure out which new() to call without you giving the explicit hint
[00:14:30] *** Joins: fran_ (fran@E9A485CA.32D89670.87338559.IP)
[00:15:04] <bjz_> do you think it might be useful to have a wiki page or tutorial regarding the construction of common task/messaging patterns?
[00:15:05] <dcrewi> if they're all the same, it doesn't matter which one
[00:15:18] <dcrewi> and <for X> is just noise
[00:15:26] <dcrewi> but okay
[00:15:35] <kimundi> dcrewi: THey might not all be the saem though
[00:15:46] <dcrewi> right
[00:16:00] <bjz_> there was a really good chapter in the O'reily Erlang book that went through them
[00:16:00] <kimundi> dcrewi: What if someone implements the trait and overwrites the default method? It would do something different
[00:16:40] <bjz_> here's one from the Erlang docs, though not as in-depth as the book chapter I mentioned: http://www.erlang.org/course/concurrent_programming.html
[00:16:44] <dcrewi> kimundi: I hadn't thought of that
[00:17:21] *** Joins: tautologico (shung@E14878C0.75051ED3.7B974E06.IP)
[00:17:30] *** Quits: jviereck (Adium@moz-428D7628.dip0.t-ipconnect.de) (Quit: Leaving.)
[00:19:11] *** Joins: Shaladdle (Shaladdle@moz-424BC304.hsd1.pa.comcast.net)
[00:19:25] <bjz_> brson: ^
[00:20:04] <bjz_> not sure where to look for examples in other languages though
[00:20:24] <bjz_> Erlang's messaging seems a little hard to transfer over
[00:20:51] <bjz_> lbergstrom mentioned that looking at CML style patterns might be more useful
[00:21:22] <bjz_> seeing as its closer to how Rust implements messaging
[00:22:13] *** Joins: GGpin (hell@moz-B9EFFE2E.dyn.optonline.net)
[00:23:17] <bjz_> another intersting thing is how OTP allows you to create concurrent thingimajigs without directly using ports/chans
[00:23:38] <sp3d> how's that?
[00:23:44] <bjz_> like the gen_fsm thing
[00:24:08] <bjz_> (although fsms aren't really concurrent)
[00:24:54] <bjz_> I think they also have gen_server
[00:26:33] *** Quits: tikue_ (quassel@moz-FEADCD38.hsd1.pa.comcast.net) (Connection reset by peer)
[00:26:34] *** Joins: tikue (quassel@moz-FEADCD38.hsd1.pa.comcast.net)
[00:27:19] <bjz_> sp3d: http://learnyousomeerlang.com/event-handlers#generic-event-handlers
[00:27:34] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Quit: Leaving)
[00:27:49] <bjz_> sp3d: I might not have it completely right, it still seems like you have to deal with some process stuff
[00:29:39] <bjz_> sp3d: http://erldocs.com/R16B02/stdlib/gen_fsm.html
[00:30:13] <bjz_> http://erldocs.com/R16B02/stdlib/gen_server.html
[00:30:16] *** Joins: maik (maik@moz-47F6ECD1.dip0.t-ipconnect.de)
[00:30:42] <bjz_> but bear in mind my erlang knowledge/experience is limited
[00:31:25] <sp3d> cool, thanks
[00:35:35] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[00:35:47] *** Joins: fabiok (fabiok@CA86482E.391D4E6.D1BD090B.IP)
[00:37:00] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[00:37:24] *** Quits: Ferreus (ferreus@moz-F74C2E7B.pools.arcor-ip.net) (Quit: WeeChat 0.4.2)
[00:38:15] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[00:39:14] *** Quits: fabiok (fabiok@CA86482E.391D4E6.D1BD090B.IP) (Quit: Saindo)
[00:40:22] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[00:42:05] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[00:44:14] *** Joins: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP)
[00:45:12] *** Joins: jeffb (jeff@moz-D13B6004.hsd1.ca.comcast.net)
[00:46:19] *** Quits: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP) (Ping timeout)
[00:51:13] *** Quits: nkoep (nik@moz-4C4B2E7F.pool.mediaways.net) (Client exited)
[00:52:39] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[00:53:19] *** Quits: mr_boo (Mibbit@moz-B234C23B.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[00:53:41] *** Joins: timot_ (timot@moz-7E76BCFD.mobile.tre.se)
[00:57:00] *** Joins: ztomo (ztomo@moz-596F7BA2.lns11.woo.bigpond.net.au)
[01:03:44] *** Quits: maik (maik@moz-47F6ECD1.dip0.t-ipconnect.de) (Ping timeout)
[01:04:52] <Sonarpulse> I want a variable length array (fixed size after initialization) in one of my enum cases. I realize I'll have ot use an unsafe block but is there any cannonical rust way of doing this?
[01:05:10] <Sonarpulse> so at least the code might look more familier to others?
[01:05:34] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Connection reset by peer)
[01:05:39] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[01:06:06] <tautologico> maybe a vector?
[01:06:21] <Sonarpulse> well a vector is resizable
[01:06:39] <Sonarpulse> I am thinking like a C99 variable length array
[01:06:58] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Quit: Leaving)
[01:07:34] *** Quits: timot_ (timot@moz-7E76BCFD.mobile.tre.se) (Ping timeout)
[01:08:01] <Sonarpulse> the point of this is the slightly increase data locality in the trie I am implementing (persistent unlike the one in std) so the overhead of vec would not be worth it.
[01:09:19] *** Joins: fyolnish (fyolnish@moz-1DACDDD9.uqwimax.jp)
[01:11:01] *** Quits: fyolnish (fyolnish@moz-1DACDDD9.uqwimax.jp) (Ping timeout)
[01:11:38] <tautologico> variable length arrays should be in the library 
[01:11:56] <Sonarpulse> oh cool!
[01:12:07] *** Joins: p_adams (p_adams@moz-EB08CC70.dhcp.stls.mo.charter.com)
[01:12:13] <tautologico> I don't know if they will be, just saying they should :)
[01:12:29] <tautologico> In the meantime you probably could create a small lib to contain the parts of the code that need to be unsafe
[01:12:33] *** p_adams is now known as yrdz
[01:13:14] *** Quits: GGpin (hell@moz-B9EFFE2E.dyn.optonline.net) (Quit: AndroIRC - Android IRC Client ( http://www.androirc.com ))
[01:13:41] <Sonarpulse> Well I am working on this trie (hamt, to be exact) in hopes that it might get in extra, as there is a request on the wiki for "persistent, hash-based, maps and sets"
[01:14:46] <Sonarpulse> so perhaps I should try to do something for variable length arrays too
[01:15:00] *** Joins: scribu (Mibbit@161D9EE3.62969CB9.2662C207.IP)
[01:15:50] <scribu> hello, I'm trying to compile Rust 0.8 on OSX
[01:15:53] <scribu> getting this:
[01:15:55] <scribu> clang: error: no such file or directory: 'x86_64-apple-darwin/rt/stage0/libuv/libuv.a'
[01:16:13] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[01:17:39] <tautologico> scribu: apparently there's a problem with gyp when only the Xcode command line tools are installed (instead of the whole IDE)
[01:17:39] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[01:18:19] <scribu> tautologico: saw that thread; I have Xcode installed in full (needed it for Firefox OS)
[01:19:04] <tautologico> scribu: is it the first time you're compiling rust? or are you updating?
[01:19:13] <scribu> tautologico: first time
[01:20:21] *** Quits: yrdz (p_adams@moz-EB08CC70.dhcp.stls.mo.charter.com) (Quit: WeeChat 0.4.2)
[01:20:24] *** Joins: p_adams (p_adams@moz-EB08CC70.dhcp.stls.mo.charter.com)
[01:20:44] <tautologico> I don't know, I sometimes encountered a similar error when updating but it was solved after a make clean or re-cloning the repo
[01:21:10] <tautologico> is libuv building ok?
[01:21:37] <scribu> I installed it using Homebrew
[01:21:48] <scribu> anyway, previously I did ./configure --enable-clang
[01:22:06] <scribu> if I do a regular ./configure, I end up with the error about make: *** [x86_64-apple-darwin/rt/stage0/librustrt.dylib] Error 1
[01:22:12] <tautologico> I think rust needs a specific version of libuv
[01:25:07] *** kimundi is now known as zz_kimundi
[01:26:10] *** Quits: busylizzy (lisa@85228838.12D0DC84.211374C4.IP) (Ping timeout)
[01:26:15] *** Joins: busylizzy (lisa@85228838.12D0DC84.211374C4.IP)
[01:26:28] *** Quits: ztomo (ztomo@moz-596F7BA2.lns11.woo.bigpond.net.au) (Ping timeout)
[01:26:55] *** Joins: ztomo (ztomo@moz-596F7BA2.lns11.woo.bigpond.net.au)
[01:34:02] <earlz> So, if you have impl Foo { fn new() -> Foo { Foo{bar=0};}}, it will yield an error that nothing is returned.. removing the semi-colon results in success.. Is that to be expected? 
[01:34:10] *** Joins: fyolnish (fyolnish@moz-1DACDDD9.uqwimax.jp)
[01:34:24] *** Joins: qrpth (andreas@moz-C54F6246.dyn.estpak.ee)
[01:34:48] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[01:34:56] *** Joins: mikezaby (mikezaby@moz-908EA8DE.home.otenet.gr)
[01:35:27] <dbaupp> earlz: yes
[01:35:49] <dbaupp> a block takes the value of the last expression, and a `;` makes the expressions have value ()
[01:36:02] <dbaupp> (but the compiler gives a nicer error message in this casE)
[01:36:07] *** Quits: qrpth (andreas@moz-C54F6246.dyn.estpak.ee) (Ping timeout)
[01:36:24] <dbaupp> rusti: let a: int = { 1 + 2; };
[01:36:26] -rusti- pastebinned 7 lines of output: http://ix.io/8rj
[01:36:29] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[01:36:31] <bjz_> dbaupp: I want to create a 2d iterator, so I can do .map(|(x, y)| ...).to_owned_vec()
[01:36:50] <bjz_> dbaupp: how does one do?
[01:36:55] <dbaupp> bjz_: "2d iterator"?
[01:37:19] <bjz_> well, compose two together or something?
[01:37:19] <dbaupp> i.e. you want to be able to iterate along 2 dimensions? or just yield (A,B)?
[01:37:27] <bjz_> mm
[01:37:29] <earlz> That seems rather confusing, given that if you are to do `let f=...; let t=...` and remove the semicolon, it'll result in an error that it's missing a ;
[01:37:32] <bjz_> former
[01:37:51] <bjz_> them map with the coords
[01:37:53] <bjz_> *then
[01:37:53] <dbaupp> rusti: range(0, 10).zip(range(0, 10)).map(|(a,b)| a + b).to_owned_vec()
[01:37:54] -rusti- ~[0, 2, 4, 6, 8, 10, 12, 14, 16, 18]
[01:38:05] <dbaupp> bjz_: oh, a cross-product iterator?
[01:38:13] <bjz_> yeah
[01:38:19] <bjz_> that's the one!
[01:38:28] <dbaupp> earlz: `let` is a statement, not an expression
[01:38:57] <bjz_> earlz: all assignments are statements
[01:39:10] <dbaupp> bjz_: untrue, only let is
[01:39:27] <dbaupp> rusti: let mut a = 1; let b = (a = 2); (a, b)
[01:39:28] -rusti- <anon>:9:17: 9:18 warning: value assigned to `a` is never read, #[warn(dead_assignment)] on by default
[01:39:29] -rusti- <anon>:9          let mut a = 1; let b = (a = 2); (a, b)
[01:39:29] -rusti-                           ^
[01:39:29] -rusti- (2, ())
[01:39:32] <bjz_> dbaupp: relly?
[01:39:57] <dbaupp> bjz_: yeah, `x = y` outside of a let has type ()
[01:40:07] *** Joins: qrpth (andreas@moz-C54F6246.dyn.estpak.ee)
[01:40:08] <dbaupp> (and is an expression)
[01:40:15] <bjz_> oh ok
[01:40:20] <bjz_> cool
[01:41:26] <tautologico> rust, just as functional languages, try to make everything an expression
[01:41:31] * bjz_ learned something
[01:41:35] <bjz_> rusti: let a; let b = (a = 2); (a, b)
[01:41:36] -rusti- (2, ())
[01:41:47] <bjz_> dbaupp: no warning! :D
[01:41:48] *** Joins: aegeaner (Mibbit@D4983C8C.B40334C3.A28F48E3.IP)
[01:41:51] *** Quits: qrpth (andreas@moz-C54F6246.dyn.estpak.ee) (Ping timeout)
[01:42:00] <bjz_> although you knew that :)
[01:42:42] <bjz_> tautologico: <3 composable expressions
[01:43:41] <dbaupp> bjz_: I don't really know how one would do a cross-product though
[01:43:48] <dbaupp> you'd need lots of things to be Clone
[01:43:51] <bjz_> dbaupp: ok
[01:44:06] <bjz_> dbaupp: was just wondering if that was possible
[01:44:13] <dbaupp> bjz_: yeah it is
[01:44:28] <bjz_> you could nest them
[01:44:45] <dbaupp> in the limit, you could even just .to_owned_vec() them and vectors can clearly be cross-producted
[01:44:48] *** Joins: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP)
[01:45:09] <bjz_> yep
[01:46:29] <bjz_> rusti: range(0, 10).map(|x| range(0, 10).map(|y| (x, y)).to_owned_vec()).to_owned_vec()
[01:46:45] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[01:46:50] <bjz_> :(
[01:46:53] *** Quits: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP) (Ping timeout)
[01:46:56] <dbaupp> we killed rusti
[01:46:56] <bjz_> snubbed
[01:47:39] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[01:47:51] <bjz_> rusti: range(0, 10).map(|x| range(0, 10).map(|y| (x, y)).to_owned_vec()).to_owned_vec()
[01:47:54] -rusti- pastebinned 1 lines of output: http://ix.io/8rm
[01:48:06] <bjz_> yay!
[01:48:43] <aegeaner> who is rusti
[01:49:03] <tautologico> the rust interpreter
[01:49:09] <bjz_> we send it rust programs
[01:49:26] <bjz_> and he quickly compiles them for us
[01:49:30] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[01:49:31] <earlz> So, anyone want to tell me what stupid thing I did wrong? http://pastebin.com/JX7qtERL  "error: type `&Route` does not implement any method in scope named `handler`" when trying to call a function callback (handler being callback name)
[01:49:37] <aegeaner> i see
[01:49:37] <bjz_> then sends it back
[01:49:37] <bjz_> very industrious fellow
[01:50:01] <bjz_> rusti: "hi mate!"
[01:50:07] -rusti- "hi mate!"
[01:50:15] <dbaupp> earlz: (route.handler)(...) to disambiguate feelds from methods
[01:50:17] <dbaupp> *fields
[01:50:26] <earlz> ah, I see
[01:51:03] <bjz_> see
[01:51:03] <bjz_> he talks back
[01:51:06] *** Joins: pnathan1 (Adium@moz-BDC3EE62.tukw.qwest.net)
[01:51:13] <aegeaner> great
[01:51:37] <earlz> now I have other errors about pointers, but those I'll muscle through to figure out :) 
[01:53:11] <dbaupp> aegeaner: you can also private-message rusti to use it as a (severely restricted) repl
[01:54:07] *** Quits: fyolnish (fyolnish@moz-1DACDDD9.uqwimax.jp) (Client exited)
[01:54:28] *** Joins: fyolnish (fyolnish@moz-1DACDDD9.uqwimax.jp)
[01:55:41] <earlz> My favorite part about rust is if you can get it to compile, then it will probably work as you expect heh.. That compiler double and triple checks your code to ensure it's correct and complains loudly if it probably isn't heh
[01:55:47] <ercxx__> Who's responsible with vim files for rust?
[01:56:08] *** Quits: BitPuffin (isak@moz-98F8BF74.cust.tele2.se) (Ping timeout)
[01:56:10] *** Quits: fyolnish (fyolnish@moz-1DACDDD9.uqwimax.jp) (Ping timeout)
[01:56:11] *** Quits: pnathan1 (Adium@moz-BDC3EE62.tukw.qwest.net) (Quit: Leaving.)
[01:56:17] <ercxx__> earlz: My problem is it doesn't do what I think it should :)
[01:56:24] <bjz_> dbaupp: can you think of a way to do: range(0, 10).map(|x| range(0, 10).map(|y| (x, y)).to_owned_vec()).to_owned_vec() but instead of a vector of vectors, return a single vector?
[01:56:34] <bjz_> earlz: have you ever used Haskell?
[01:56:40] <bjz_> :)
[01:56:40] <cmr> ercxx__: ChrisMorgan has been maintaining them most recently.
[01:56:45] <tautologico> flatmap/concatmap
[01:56:47] <ercxx__> Compiler always wins the argument.
[01:56:52] <ercxx__> cmr: Ok.
[01:56:53] *** Joins: Aegeaner1 (Aegeaner@D4983C8C.B40334C3.A28F48E3.IP)
[01:57:08] *** Joins: Addle (quassel@moz-89E971E4.cable.teksavvy.com)
[01:57:22] <bjz_> range(0, 10).concat_map(|x| range(0, 10).map(|y| (x, y)).to_owned_vec()).to_owned_vec()
[01:57:29] <bjz_> rusti: range(0, 10).concat_map(|x| range(0, 10).map(|y| (x, y)).to_owned_vec()).to_owned_vec()
[01:57:32] -rusti- pastebinned 7 lines of output: http://ix.io/8rq
[01:57:34] <bjz_> heh
[01:57:36] <tautologico> yeah that's a thing with static functional languages… that's what surprised me most when I started using OCaml for serious projects, compiling often meant the code did what I wanted it to do
[01:57:56] * bjz_ checks docs
[01:58:42] <tautologico> rust is more similar to the ML family than to Haskell, except for traits/type classes
[01:59:18] <tautologico> rust is basically ML with type classes and weird pointers :)
[02:00:47] <bjz_> well it was originally built in OCaml
[02:01:01] <bjz_> the original compiler
[02:01:09] <Sonarpulse> haskell was made to be a lazy ml derivative
[02:01:28] <bjz_> Sonarpulse: I dunno about that
[02:01:28] <Sonarpulse> but I think type classes are more important than laziness these days
[02:01:34] *** Joins: qrpth (andreas@moz-C54F6246.dyn.estpak.ee)
[02:01:42] <tautologico> kinda… the G-Machine that is used for implementation of Haskell was originally created for LazyML though
[02:01:44] <Sonarpulse> bjz_: there is a paper history of haskell that iirc says that
[02:02:02] <bjz_> Sonarpulse: wasn't it more a standardisation of lots of the ISWIM languages into one?
[02:02:07] <tautologico> Haskell was actually based on Miranda and other languages by David Turner
[02:02:19] <tautologico> but Turner decided to make Miranda proprietary
[02:02:50] <tautologico> of course Turner was influenced by ML originally but the "equational style" of Haskell is from KRC/Miranda 
[02:03:00] <Sonarpulse> http://research.microsoft.com/en-us/um/people/simonpj/papers/history-of-haskell/history.pdf
[02:03:18] *** Quits: qrpth (andreas@moz-C54F6246.dyn.estpak.ee) (Ping timeout)
[02:03:21] <dbaupp> bjz_: there's flat_map, but it doesn't work, because the closure in .map captures the param from the outer-map and so cannot be returned from the .flat_map call
[02:03:47] <dbaupp> bjz_: (so you'd have to write it "by hand" rather than use a closure to make the (x,y))
[02:04:01] <bjz_> damn
[02:04:03] <bjz_> oh well
[02:04:27] *** Joins: lex (lex@moz-22635C92.bootp.virginia.edu)
[02:04:30] <tautologico> http://www.cs.kent.ac.uk/people/staff/dat/miranda/examples/treesort.html
[02:04:36] <bjz_> I could use vec::build, then iterate in the middle
[02:04:38] <earlz> Is it possible to extend vectors containing a fixed type? Something like `impl [Foo]` ? 
[02:04:43] <bjz_> but less pretty
[02:04:43] <dbaupp> bjz_: well, kinda
[02:04:46] <lex> Hey, I just got a segfault from safe code.
[02:04:48] <Aegeaner1>  error: type `std::iter::Range<int>` does not implement any method in scope named `concat_map`
[02:04:56] <cmr> lex: ! got a reduced testcase?
[02:05:02] <Sonarpulse> ah, miranda was less explicitly based upon ml than I thought
[02:05:11] <bjz_> dbaupp: oh but I'd need the beginning size
[02:05:12] <lex> cmr: I have a backtrace
[02:05:14] <cmr> Also if your'e using anything in std::unstable it has known bugs :P
[02:05:15] <bjz_> Sonarpulse: yah
[02:05:25] <lex> cmr: No, I'm not. No unsafe blocks, no threads.
[02:05:30] *** Quits: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net) (Ping timeout)
[02:05:38] *** Quits: mark_edward (quassel@moz-DCB0B750.lightspeed.cicril.sbcglobal.net) (Client exited)
[02:06:10] *** Quits: Sonarpulse (user@moz-424CB7EB.cs.brown.edu) (Quit: ERC Version 5.3 (IRC client for Emacs))
[02:06:24] *** Joins: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net)
[02:06:36] <tautologico> I got ICEs when trying to use my homemade 2-dimensional indexing for matrices :)
[02:07:15] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[02:07:35] <lex> cmr: Wait, it looks like I may be creating a stack overflow
[02:09:05] *** Quits: aegeaner (Mibbit@D4983C8C.B40334C3.A28F48E3.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[02:09:31] *** Quits: Aegeaner1 (Aegeaner@D4983C8C.B40334C3.A28F48E3.IP) (Quit: Leaving.)
[02:09:47] *** Joins: Aegeaner (Aegeaner@D4983C8C.B40334C3.A28F48E3.IP)
[02:10:37] *** Quits: Aegeaner (Aegeaner@D4983C8C.B40334C3.A28F48E3.IP) (Quit: Leaving.)
[02:10:49] *** Joins: aegeaner (Aegeaner@D4983C8C.B40334C3.A28F48E3.IP)
[02:13:56] *** Quits: aegeaner (Aegeaner@D4983C8C.B40334C3.A28F48E3.IP) (Quit: Leaving.)
[02:14:01] *** Joins: aegeaner (Aegeaner@D4983C8C.B40334C3.A28F48E3.IP)
[02:16:56] <earlz> Does vec.append_one actually exist? 
[02:17:01] <earlz> rusti: let t: ~[int] = ~[]; t.append_one(1);
[02:17:06] -rusti- pastebinned 7 lines of output: http://ix.io/8rt
[02:17:30] <dbaupp> rusti: let mut t = ~[]; t.push(1); t
[02:17:31] -rusti- ~[1]
[02:17:39] <dbaupp> earlz: a synonym exists, yes
[02:17:47] <earlz> so the docs are out of date? 
[02:17:53] <cmr> very likely
[02:18:00] <cmr> Although I thought append_one was an immutable thing
[02:18:13] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[02:18:17] <earlz> well, append_one appears to be mutable, but marked as immutable
[02:18:21] <earlz> http://static.rust-lang.org/doc/master/std/vec/fn.append_one.html
[02:18:29] *** Quits: ztomo (ztomo@moz-596F7BA2.lns11.woo.bigpond.net.au) (Ping timeout)
[02:18:31] <cmr> Ah, it's not a method.
[02:18:42] <cmr> And it takes ownership
[02:18:47] <cmr> That's a stupid functino, should be removed.
[02:19:10] *** Joins: Chef (Chef@A0949AC6.5F4C6DA3.AE2B2F80.IP)
[02:19:22] <aegeaner> rusti: range(0, 10).concat_map(|x| range(0, 10).map(|y| (x, y)).to_owned_vec()).to_owned_vec()
[02:19:26] -rusti- pastebinned 7 lines of output: http://ix.io/8rq
[02:19:38] <earlz> Where would vec.push be located in the documentation? I have a feeling either the documentation is very incomplete, or I'm browsing it wrong
[02:19:45] *** Joins: ztomo (ztomo@moz-596F7BA2.lns11.woo.bigpond.net.au)
[02:20:06] <cmr> It's on one of the traits in std::vec
[02:20:09] <cmr> Probably OwnedVector
[02:20:15] <aegeaner> type `std::iter::Range<int>` does not implement any method in scope named `concat_map`?
[02:20:43] <earlz> So do I just have to browse the traits to determine what methods actually exist? 
[02:20:44] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[02:20:48] <earlz> Maybe that's why I'm so confused heh
[02:20:55] <cmr> It's a bug in rustdoc
[02:21:03] <dbaupp> aegeaner: the method is actually called 'flat_map'
[02:22:01] <bjz_> dbaupp: this is what I did: https://gist.github.com/bjz/d3803ea8c0de0f6a74b5
[02:22:21] *** Joins: brson_ (brson@6A848D32.C1B840DD.76F66111.IP)
[02:22:26] <brson_> unwinding through __morestack did work
[02:22:32] <dbaupp> bjz_: that's a very reasonable solutions
[02:22:44] <dbaupp> bjz_: a sensible one, even.
[02:22:46] *** Joins: qrpth (andreas@moz-C54F6246.dyn.estpak.ee)
[02:22:57] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[02:23:02] <bjz_> yay procedural
[02:23:04] <dbaupp> brson_: was that aimed that the discussion on #rust-internals?
[02:23:42] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[02:25:16] <earlz> how would I specify a mutable vector in a field? I've tried things like foo: mut ~[bar], but that yields `found mut in ident position`
[02:25:38] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[02:25:45] <brson_> dbaupp: probably
[02:26:00] <earlz> or am I understanding vectors, ownership and fields? 
[02:26:01] *** Quits: mikezaby (mikezaby@moz-908EA8DE.home.otenet.gr) (Input/output error)
[02:26:03] <earlz> misunderstanding*
[02:26:10] <tautologico> earlz: I usually define a field that's just a vector and use mut on the struct (field inherits the mutability)
[02:26:27] <jeaye> gar
[02:26:38] <jeaye> What's the syntax for the second line supposed to be? https://gist.github.com/jeaye/d5710bb19812934348da
[02:26:38] *** Quits: scribu (Mibbit@161D9EE3.62969CB9.2662C207.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[02:28:43] *** Quits: zz_kimundi (kimundi@moz-2CA954C8.dip0.t-ipconnect.de) (Ping timeout)
[02:28:43] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[02:29:22] <earlz> tautologico: It seems like no matter where I try to place the mut, I just get error: found `mut` in ident position
[02:30:14] <earlz> How would I make the struct itself mutable? 
[02:30:39] <tautologico> struct S { a: ~[int] }
[02:30:53] <tautologico> let mut s = S { a: ~[1, 2, 3] }
[02:30:59] <cmr> rusti: struct Foo { a: uint } let mut x = Foo { a: 32 }; x.a = 42; x
[02:31:01] -rusti- main::Foo{a: 42u}
[02:31:40] *** Quits: aegeaner (Aegeaner@D4983C8C.B40334C3.A28F48E3.IP) (Quit: Leaving.)
[02:31:48] <tautologico> I think it makes sense, you can define operations on the struct that do not need mutability of a particular field, but some will need it, so you declare the whole object as mutable instead of forcing a field to be mutable (like in ML)
[02:31:48] *** Joins: aegeaner (Aegeaner@D4983C8C.B40334C3.A28F48E3.IP)
[02:31:51] <earlz> ok, then what I mean is how would I enforce in a method that self is mutable? 
[02:31:55] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[02:31:55] *** Joins: zz_kimundi (kimundi@moz-5EF96D6C.dip0.t-ipconnect.de)
[02:31:56] <dbaupp> rusti: struct Foo { a: ~[uint] } let mut x = Foo { a: ~[] }; x.a.push(1); x
[02:31:57] -rusti- main::Foo{a: ~[1u]}
[02:32:04] <dbaupp> earlz: &mut self
[02:32:07] <cmr> earlz: You want &mut self
[02:32:09] <earlz> ah ok
[02:32:12] *** zz_kimundi is now known as kimundi
[02:32:27] <earlz> I was doing `mut &self`. ugh learning a new langauge is so hard
[02:32:35] <dbaupp> jeaye: doesn't exist
[02:32:51] <jeaye> dbaupp: That explains why nothing works. :P
[02:32:58] <jeaye> dbaupp: What would I do in that case?
[02:33:03] <dbaupp> jeaye: it will become something like Driver::<for Term_Driver>::...
[02:33:10] <dbaupp> but
[02:33:18] <dbaupp> you can't do anything currently
[02:33:23] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[02:33:46] *** Quits: aegeaner (Aegeaner@D4983C8C.B40334C3.A28F48E3.IP) (Quit: Leaving.)
[02:33:49] <jeaye> :(
[02:33:59] <dbaupp> fwiw, the normal trait would be `fn new() -> Self` and then you'd write `let x: ~Term_Driver = Driver::new(); x as ~Driver`
[02:34:02] <jeaye> Thanks for the info
[02:34:07] <dbaupp> (if you needed a trait object)
[02:34:36] <jeaye> ah
[02:35:22] <jeaye> So the problem is because I'm not using Self?
[02:35:42] *** Joins: fyolnish (fyolnish@moz-1DACDDD9.uqwimax.jp)
[02:35:47] <jeaye> My trait says `trait Driver { fn new() -> ~Driver: }`
[02:37:03] <dbaupp> yeah (I worked that out :P )
[02:37:21] <dbaupp> at the moment the only way to specify the Self type of a static method is via inference
[02:37:35] <dbaupp> so if you don't mention Self anywhere in the type sig, you're screwed
[02:38:14] <dbaupp> jeaye: you can do something like std::num::Primitive https://github.com/huonw/card-trace/blob/master/bin.rs
[02:38:17] <dbaupp> gah
[02:38:20] <dbaupp> http://seld.be/rustdoc/master/std/num/trait.Primitive.html
[02:38:23] <jeaye> heh
[02:38:39] <dbaupp> https://github.com/mozilla/rust/blob/master/src/libstd/num/num.rs#L287
[02:38:57] <dbaupp> so it's called like Primitive::bits(None::<YourTypeHere>)
[02:40:07] *** Joins: z0w0 (zack@moz-C877F2F7.lnse2.cha.bigpond.net.au)
[02:40:26] <jeaye> Got it working now. Thanks, dbaupp 
[02:40:34] <jeaye> I look forward to that new syntax.
[02:40:38] <jeaye> As weird as it seems. :P
[02:42:30] <earlz> If I want a buffer that is continually added to one string at a time, and the final size is impossible to know, should I use a vector, or is there something more performant? 
[02:42:50] <dbaupp> vector will be reasonbly performant
[02:42:56] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[02:43:14] <dbaupp> if you have some idea of a minimum size, you can use `vec::with_capacity(n)`, but other than that, .push is (amortised) O(1)
[02:43:24] <dbaupp> s/other than/even without/
[02:44:23] <earlz> that's what I was hoping. How does vector work behind the scenes? Is it a list of arrays, or does each push cause it to allocate new memory and copy itself? 
[02:44:26] *** Parts: lex (lex@moz-22635C92.bootp.virginia.edu) ()
[02:45:16] <mcpherrin> a vector is a single contiguous array
[02:45:21] *** Joins: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP)
[02:45:30] <mcpherrin> It could be larger than the number of items so each push may not need to allocate
[02:45:38] <tautologico> common strategy is to double the capacity when it's full
[02:45:43] <mcpherrin> Think C++ std::vector
[02:45:55] <tautologico> not reallocate space for just one more item
[02:46:32] <earlz> ah. Is there something else then? I mean, I never want to be doing a full copy of the array on a push
[02:47:09] *** Joins: aegeaner (Aegeaner@D4983C8C.B40334C3.A28F48E3.IP)
[02:47:17] <ross> never? use `vec::with_capacity(n)` to allocate one the exact size you need. never push more than n elements to it
[02:47:18] <earlz> It'd work good enough, but curious as to what's out there :) 
[02:47:23] *** Quits: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP) (Ping timeout)
[02:47:23] *** Joins: phddoom (Mibbit@moz-8D867055.res.bhn.net)
[02:47:43] <earlz> See, the thing is I never know the exact size I need ahead of time
[02:48:09] <tautologico> amortised O(1) means it will sometimes do a copy but in the long run it will not affect performance significantly
[02:48:45] <earlz> Well if (hypothetically), you have 20M in your vector, you might have a very bad time heh
[02:49:36] <dbaupp> yeah, but it happens so infrequently (logarithmically infrequently) that the costs of doing 20M .pushs (without copies) is greater
[02:50:30] <earlz> Well, really it wouldn't be a .push, it'd be an append.. but that doesn't matter
[02:51:10] *** Quits: fyolnish (fyolnish@moz-1DACDDD9.uqwimax.jp) (Client exited)
[02:51:17] <dbaupp> there's no append method, so what do you mean by "append"?
[02:51:37] <dbaupp> if you mean appending a single element, that's done by .push
[02:51:52] <earlz> I mean appending a list of elements
[02:52:34] <earlz> I have [1, 2, 3] and [4, 5] and I want [1,2,3,4,5].. I'd do something like [1,2,3].append([4,5]) or something
[02:53:00] <dbaupp> ah
[02:53:52] <earlz> I'll just use a vector for now, but will keep a look out for if there is a better way implemented in the library, or when I actually start to figure this language out, maybe implement it myself
[02:54:27] <dbaupp> the only thing that would be faster would be a rope style datastructure (well, in this case, that reduces to just nested lists)
[02:55:05] <dbaupp> i,e, ~[~[1,2,3]] => .push(~[4,5])  => ~[~[1,2,3], ~[4,5]]
[02:55:36] <dbaupp> fwiw, .push_all (which appends a vector) is implemented internally by calling .push repeatedly
[02:55:57] <dbaupp> and .push_all_move is a plain memcpy (but it takes a ~[], rather than a &[])
[02:56:45] <earlz> hmm.. yea, maybe vector is good enough then. I don't think I'll be implementing a rope anytime soon at least :) 
[02:58:39] <sp3d> what about a vec-based dequeue, if just to avoid ever copy-resizing a huge vec?
[02:59:16] *** Joins: nwmcsween (nwmcsween@E0025B86.51EE1362.3655BBF5.IP)
[02:59:17] <sp3d> i.e. linked-list-of-fixed-size-vecs
[02:59:49] <dbaupp> that's a simple rope, and, yes, that's what I meant :)
[02:59:55] <earlz> That was what my original idea kind of was, but I tend to think splitting vecs to fit and later the more complex retrieval might not make it worth it
[03:00:02] <sp3d> mmk
[03:00:21] *** Quits: phddoom (Mibbit@moz-8D867055.res.bhn.net) (Quit: http://www.mibbit.com ajax IRC Client)
[03:01:22] *** Quits: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca) (Quit: Leaving.)
[03:01:31] *** Quits: p_adams (p_adams@moz-EB08CC70.dhcp.stls.mo.charter.com) (Quit: WeeChat 0.4.2)
[03:01:32] <sp3d> I thought rope only referred to doing that w/ a tree rather than a list
[03:02:24] <dbaupp> hence "simple" :P
[03:02:37] * dbaupp is often too loose with his terminology
[03:03:27] *** Quits: nwmcsween (nwmcsween@E0025B86.51EE1362.3655BBF5.IP) (Ping timeout)
[03:03:32] <sp3d> fair enough :)
[03:05:48] *** Joins: anshin (anshin@CD85F10D.F21429E2.354459FA.IP)
[03:07:39] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Quit: Jesse)
[03:07:49] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[03:07:57] *** Quits: six600110 (six600110@moz-C663577C.hsd1.il.comcast.net) (Client exited)
[03:08:37] *** Joins: phddoom (Mibbit@moz-8D867055.res.bhn.net)
[03:08:50] *** Joins: datanoise (Mibbit@moz-FE305E75.mia.fl.atlanticbb.net)
[03:09:21] *** Quits: Earnestly (earnest@moz-BE290A2B.dyn.plus.net) (Ping timeout)
[03:11:12] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[03:11:23] <earlz> Does str implement every that vec[u8] does? the documentation seemed to say they were aliases, but I'm having troubles with it :/ 
[03:11:45] <dbaupp> no
[03:11:58] <dbaupp> they're binary-identical, but are semantically different types
[03:12:04] <cmr> earlz: They're represented the same as ~[u8], but they aren't the same.
[03:12:48] *** Joins: michaelfletcher (michaelfle@DA60130B.4474880.28B68B9E.IP)
[03:12:52] *** Parts: michaelfletcher (michaelfle@DA60130B.4474880.28B68B9E.IP) ()
[03:13:00] <earlz> ok then. I shoudl've read the str page first :) 
[03:16:39] *** Joins: michaelfletcher (michaelfle@DA60130B.4474880.28B68B9E.IP)
[03:16:43] *** Parts: michaelfletcher (michaelfle@DA60130B.4474880.28B68B9E.IP) ()
[03:17:33] *** Quits: canhtak (jeremy@moz-EF57C296.wl.t.ulaval.ca) (Quit: canhtak)
[03:21:45] <jeffb> nmatsakis has a blog post about fork-join concurrency within a single task. Does either the std or extra lib have an implementation of that? 
[03:23:00] <dbaupp> not yet
[03:23:26] <jeffb> mmmk thanks. Is that something that has been talked about much?
[03:23:46] <dbaupp> it comes up every so often
[03:24:29] <dbaupp> the core-devs are busy doing more fundamental work (mainly semantic/syntax changes that aren't backwards-compatible, which this is)
[03:25:26] *** Joins: alan (alan@moz-F8EE186F.lightspeed.snantx.sbcglobal.net)
[03:27:36] <jeffb> that makes sense
[03:28:31] <sp3d> what's the new std::u8::from_str_radix?
[03:28:46] <sp3d> oh, std::num
[03:32:55] *** Joins: mikefletcher (michaelfle@DA60130B.4474880.28B68B9E.IP)
[03:33:22] *** Joins: six600110 (six600110@moz-C663577C.hsd1.il.comcast.net)
[03:39:38] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[03:41:06] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[03:43:39] *** Joins: Zy (Mibbit@moz-4909F05D.lightspeed.stlsmo.sbcglobal.net)
[03:43:57] *** Parts: Zy (Mibbit@moz-4909F05D.lightspeed.stlsmo.sbcglobal.net) ()
[03:45:07] *** Joins: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net)
[03:45:20] *** Joins: fyolnish (fyolnish@moz-5935FDDC.uqwimax.jp)
[03:45:23] *** Joins: siritori (siritori@moz-4155F3B3.panda-world.ne.jp)
[03:45:25] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[03:45:48] *** Joins: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP)
[03:45:51] *** sam113101 is now known as sam113101_afk
[03:46:34] *** sam113101_afk is now known as sam113101
[03:46:51] *** Quits: fyolnish (fyolnish@moz-5935FDDC.uqwimax.jp) (No route to host)
[03:46:54] *** Joins: frogmella (Mibbit@moz-4155F3B3.panda-world.ne.jp)
[03:47:09] *** Quits: frogmella (Mibbit@moz-4155F3B3.panda-world.ne.jp) (Quit: http://www.mibbit.com ajax IRC Client)
[03:47:16] *** Joins: fyolnish (fyolnish@moz-5935FDDC.uqwimax.jp)
[03:47:53] *** Quits: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP) (Ping timeout)
[03:48:04] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[03:48:57] *** Quits: fyolnish (fyolnish@moz-5935FDDC.uqwimax.jp) (Ping timeout)
[03:52:10] *** Parts: Chef (Chef@A0949AC6.5F4C6DA3.AE2B2F80.IP) ()
[03:52:14] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[03:52:37] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[03:54:27] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[04:06:58] *** Quits: jeffb (jeff@moz-D13B6004.hsd1.ca.comcast.net) (Quit: jeffb)
[04:11:26] *** Quits: siritori (siritori@moz-4155F3B3.panda-world.ne.jp) (Ping timeout)
[04:12:08] *** Joins: siritori (siritori@moz-4155F3B3.panda-world.ne.jp)
[04:15:48] *** Quits: siritori (siritori@moz-4155F3B3.panda-world.ne.jp) (Ping timeout)
[04:16:34] *** Quits: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net) (Quit: eholk)
[04:16:35] *** Joins: siritori (siritori@moz-4155F3B3.panda-world.ne.jp)
[04:16:50] <sp3d> rusti: let a = 0u8; let b = 1 * a; b as char
[04:16:53] -rusti- pastebinned 7 lines of output: http://ix.io/8rv
[04:17:35] *** Joins: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net)
[04:17:58] *** Quits: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net) (Quit: eholk)
[04:21:20] <dbaupp> sp3d: huh
[04:21:32] <dbaupp> rusti: let a = 0u8; let b: u8 = 1 * a; b as char
[04:21:34] -rusti- '\x00'
[04:21:58] <sp3d> yeah, that's what I had to do
[04:22:27] <dbaupp> I guess something is running based on the pre-inference types
[04:22:35] <dbaupp> file a bug!
[04:22:47] <sp3d> https://github.com/mozilla/rust/blob/a3b04c1535ab0e733e59b8e1f7801e523cd72fa3/src/librustc/middle/typeck/check/mod.rs#L2700
[04:25:03] <dbaupp> I guess ty::get(te).sty == ty_infer (or whatever the type representing a hole to fill by inference is)
[04:26:28] *** Quits: fran_ (fran@E9A485CA.32D89670.87338559.IP) (Ping timeout)
[04:28:15] *** Quits: Jesin (Jessin_@moz-5654D37.washdc.fios.verizon.net) (Quit: Leaving)
[04:31:09] *** Joins: fran_ (fran@moz-1E39CBE8.telecom.net.ar)
[04:42:55] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[04:43:47] <erickt> can anyone figure out how to get something like this to work? https://gist.github.com/erickt/6958155
[04:44:16] *** Quits: brson_ (brson@6A848D32.C1B840DD.76F66111.IP) (Quit: leaving)
[04:44:35] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[04:44:36] <erickt> I'm trying to figure out how to write a MutIter trait, but I'm stymied by &[T] types
[04:46:20] *** Joins: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP)
[04:48:08] *** Joins: fyolnish (fyolnish@moz-8C398CB4.uqwimax.jp)
[04:48:23] *** Quits: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP) (Ping timeout)
[04:49:50] *** Quits: fyolnish (fyolnish@moz-8C398CB4.uqwimax.jp) (Ping timeout)
[04:54:58] <erickt> Trying to modify the `&'self mut [T]` impl to take `&mut self` doesn't work
[04:58:02] *** Quits: fran_ (fran@moz-1E39CBE8.telecom.net.ar) (Ping timeout)
[04:58:54] *** Quits: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net) (Ping timeout)
[05:00:34] *** Joins: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net)
[05:03:15] <dcrewi> erickt: what's the error message?
[05:03:37] <erickt> dcrewi: foo.rs:24:13: 24:27 error: type `[int, .. 3]` does not implement any method in scope named `mut_iter2`
[05:03:49] <dcrewi> I have not had success using types like [int, .. 3]
[05:03:51] <erickt> which is … odd
[05:03:54] *** Joins: fran_ (fran@moz-63A55738.telecom.net.ar)
[05:04:09] <dcrewi> I think they are to the compiler a different type than &[int]
[05:04:09] *** Joins: jeffb (jeff@moz-D13B6004.hsd1.ca.comcast.net)
[05:04:15] <dcrewi> at least presently
[05:04:47] <erickt> they should be able to cast to &[int] though.
[05:05:08] <erickt> rusti: let x: [int, .. 3] = [1,2,3]; let y: &[int] = x;
[05:05:09] -rusti- <anon>:9:43: 9:44 warning: unused variable: `y`, #[warn(unused_variable)] on by default
[05:05:09] -rusti- <anon>:9          let x: [int, .. 3] = [1,2,3]; let y: &[int] = x;
[05:05:09] -rusti-                                                     ^
[05:05:09] -rusti- ()
[05:05:21] <dcrewi> yes they should, but I don't know whether they do?
[05:05:24] <erickt> dcrewi: ^ if you ignore the warning
[05:06:46] <erickt> lol, I didn't even have the hashmap impl right.
[05:06:55] * erickt grrs at the 'self lifetime
[05:07:33] <dcrewi> so it should probably work if you do a manual cast to &[int] like you did above
[05:07:41] *** Quits: datanoise (Mibbit@moz-FE305E75.mia.fl.atlanticbb.net) (Quit: http://www.mibbit.com ajax IRC Client)
[05:07:49] <erickt> … right, because we can't declare a trait method that uses the 'self mode because it ICEs
[05:09:01] <erickt> dcrewi: sadly I think I'm stepping on a bug I've run into before. I think I filed a ticket a while ago about it...
[05:09:47] <dcrewi> erickt: is this for a numerics library?
[05:10:20] <erickt> dcrewi: libstd/container.rs library. We've got traits defined for maps and sets, but not sequences
[05:11:03] <erickt> a couple people have run into this bug: https://github.com/mozilla/rust/search?q=assertion+failed%3A+self.variance.is_some%28%29&ref=cmdform&type=Issues
[05:13:01] *** Quits: jeffb (jeff@moz-D13B6004.hsd1.ca.comcast.net) (Quit: jeffb)
[05:14:20] *** Quits: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca) (Connection reset by peer)
[05:16:56] *** Joins: timot_ (timot@moz-7E76BCFD.mobile.tre.se)
[05:21:46] *** Parts: aegeaner (Aegeaner@D4983C8C.B40334C3.A28F48E3.IP) ()
[05:21:53] *** Quits: timot_ (timot@moz-7E76BCFD.mobile.tre.se) (Ping timeout)
[05:22:15] *** Joins: timot_ (timot@moz-7E76BCFD.mobile.tre.se)
[05:24:59] *** Quits: dbaupp (Thunderbir@moz-BFBD65B3.lns20.syd6.internode.on.net) (Ping timeout)
[05:25:47] *** Quits: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net) (Ping timeout)
[05:27:59] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Quit: Leaving)
[05:28:16] *** Joins: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net)
[05:29:33] *** Joins: dbaupp (Thunderbir@moz-BFBD65B3.lns20.syd6.internode.on.net)
[05:30:06] *** Quits: timot_ (timot@moz-7E76BCFD.mobile.tre.se) (Ping timeout)
[05:31:48] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[05:34:28] *** Quits: alan (alan@moz-F8EE186F.lightspeed.snantx.sbcglobal.net) (Quit: alan)
[05:42:23] *** Joins: timot_ (timot@moz-7E76BCFD.mobile.tre.se)
[05:43:12] *** Joins: [squiddy] (squiddy@moz-A441D2CD.dynamic.cablesurf.de)
[05:45:31] *** Joins: fyolnish (fyolnish@moz-4E0053D3.uqwimax.jp)
[05:45:50] <jeaye> Can I impl a variant struct in an enum?
[05:46:21] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[05:46:51] *** Joins: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP)
[05:47:05] *** Quits: qrpth (andreas@moz-C54F6246.dyn.estpak.ee) (Ping timeout)
[05:47:13] *** Quits: fyolnish (fyolnish@moz-4E0053D3.uqwimax.jp) (Ping timeout)
[05:47:22] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[05:47:39] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[05:48:49] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[05:48:53] *** Quits: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP) (Ping timeout)
[05:49:53] <ercxx__> ChrisMorgan: I started (slowly) on CompactLWS.
[05:51:06] <ChrisMorgan> ercxx__: great! Sorry there aren't _good_ tests to compare results with, but the tests on the implemented header types should catch most things (I expect you'll be able to enable most or all of the ones ignored with the reason "lws collapse bug")
[05:51:54] <ChrisMorgan> When I started with rust-http, it was too thoroughly experimental for tests to be of any value whatsoever. Now it's solid enough that I need to be focusing on adding tests and docs everywhere.
[05:52:48] <ercxx__> Yeah, took me a while to wrap my head around. It would be nice if I knew something about http :)
[05:53:10] <ercxx__> I'll probably bother you a bit.
[05:53:37] <cmr> ChrisMorgan: A fuzz tester would probably be appropriate.
[05:53:37] <ChrisMorgan> Good :-)
[05:53:50] <ChrisMorgan> cmr: it certainly would be
[05:54:11] <cmr> I've been thinking about how to write one
[05:54:42] *** Quits: tautologico (shung@E14878C0.75051ED3.7B974E06.IP) (Quit: tautologico)
[05:54:52] *** Quits: timot_ (timot@moz-7E76BCFD.mobile.tre.se) (Ping timeout)
[05:55:02] *** Joins: timot_ (timot@moz-7E76BCFD.mobile.tre.se)
[05:55:05] <ChrisMorgan> Great!
[05:55:25] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[05:55:25] *** Quits: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[05:56:21] *** Joins: qrpth (andreas@moz-C54F6246.dyn.estpak.ee)
[05:58:07] *** Quits: qrpth (andreas@moz-C54F6246.dyn.estpak.ee) (Ping timeout)
[05:58:08] <sam113101> %test
[05:58:51] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[05:59:39] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[05:59:39] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[06:01:28] <ercxx__> ChrisMorgan: Would you like to change the conceal in rust.vim to something fancier?
[06:01:32] *** Joins: qrpth (andreas@moz-C54F6246.dyn.estpak.ee)
[06:01:48] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[06:01:50] <ChrisMorgan> ercxx__: what precisely do you mean/suggest?
[06:03:16] *** Quits: qrpth (andreas@moz-C54F6246.dyn.estpak.ee) (Ping timeout)
[06:04:20] <ercxx__> A little cheesy but I already got used to it: http://imgur.com/OW2QMi5
[06:05:37] <ChrisMorgan> For myself, I use conceal extensively in a couple of filetypes of my own (I've got my own DSL for play scripts/opera libretti and use conceal to hide the `markers` and the like), but after trying the conceal stuff in the Rust filetype got rid of it—gnome-terminal, gVim and Android Terminal Emulator don't do a good job of displaying a non-monospaced character such as → is in the fonts I use (Ubuntu Mono on my laptop).
[06:06:12] <ercxx__> I always hated the double arrow trying to squeze in a rectangular box sideways.
[06:06:39] *** Joins: qrpth (andreas@moz-C54F6246.dyn.estpak.ee)
[06:06:47] *** Joins: alonlevy (alon@moz-204DF55A.bb.netvision.net.il)
[06:07:07] <ChrisMorgan> Those characters are still ⇒ and →, right?
[06:07:43] <ercxx__> No, they are two chars each.
[06:08:35] <ercxx__> http://pastebin.mozilla.org/3247323
[06:09:13] <ercxx__> That's from your after/syntax/rust.vim, after a small change.
[06:15:54] *** Quits: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net) (Ping timeout)
[06:16:14] *** Quits: GeneralMaximus (ankur@B244336D.C4164B78.D5D59AD9.IP) (Ping timeout)
[06:18:02] <ChrisMorgan> Can't say I'm really in favour of it. Using the proper ⇒ and → is one thing, that just ends up looking a little ugly, filled as it is. For myself at least, I'll stick with -> and =>.
[06:19:36] *** Joins: GeneralMaximus (ankur@CBB1129D.40259142.D5D59AD9.IP)
[06:19:48] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[06:20:36] <ercxx__> They are kinda ugly, but I got used to it. I can see them from a mile.
[06:20:50] *** Quits: anshin (anshin@CD85F10D.F21429E2.354459FA.IP) (Quit: anshin)
[06:21:06] *** Joins: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net)
[06:21:12] *** Quits: qrpth (andreas@moz-C54F6246.dyn.estpak.ee) (Ping timeout)
[06:21:27] <ercxx__> I enabled the ignored lws tests. One still failing.
[06:21:34] <ercxx__> almost
[06:22:45] <ChrisMorgan> BTW, on the matter of end-of-line, I *think* it's reasonable to pass CR though, to be considered part of LWS, and treat LF as the EOL marker. RFC 2616 does suggest something along those lines.
[06:23:14] <ChrisMorgan> Some header types may need consume_optional_lws or something of the sort to be added to get their tests to pass.
[06:23:23] *** Joins: dew (Instantbir@moz-8EDFD40B.static.stls.mo.charter.com)
[06:23:40] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[06:24:59] *** Quits: Kxepal (Miranda@moz-EB6B0A42.pppoe.mtu-net.ru) (Ping timeout)
[06:25:15] <ercxx__> Treat CR as LWS?
[06:25:30] <ChrisMorgan> Yep, I think so.
[06:25:47] <ercxx__> That will make some things easier probably.
[06:26:19] <ChrisMorgan> Yeah. I'm afraid the HTTP specs are *really* poor as far as defining all behaviour is concerned.
[06:26:28] * ChrisMorgan loves the HTML 5 spec which defines all behaviour
[06:26:38] <ercxx__> I looked at cr and lf inside quotes.
[06:27:03] * ChrisMorgan doesn't have the faintest idea whether it should be allowed inside quotes or not—it's not in the slightest bit clear
[06:27:29] <ercxx__> well there's something with the Reader
[06:27:56] *** Joins: Kxepal (Miranda@moz-8B4910BA.pppoe.mtu-net.ru)
[06:28:36] <ChrisMorgan> Seriously, don't pay too much attention to what is done there at present. I've been figuring out precisely how lots of these things should be interpreted myself as I go along and I have in at least one or two places implemented HTTP/1.1-non-compliant code.
[06:28:38] <ercxx__> I couldn't look into it much but in "some\r\nstuff" I couldn't recover past \r\n.
[06:29:07] <ercxx__> So I just slapped a quote at the end :)
[06:29:08] *** Joins: qrpth (andreas@moz-C54F6246.dyn.estpak.ee)
[06:29:19] <ercxx__> ok
[06:29:28] <ChrisMorgan> I *think* it would still require either the same LWS rules (thus the likes of "\r\n stuff", with the space after the \n), or be forbidden.
[06:30:58] *** Quits: qrpth (andreas@moz-C54F6246.dyn.estpak.ee) (Ping timeout)
[06:31:17] *** Joins: bholley (anonymous@moz-D5EB36E2.rev.numericable.fr)
[06:31:24] <ercxx__> That might be the FF extension I used also.
[06:31:33] <ercxx__> Ok
[06:32:38] *** Parts: ztomo (ztomo@moz-596F7BA2.lns11.woo.bigpond.net.au) ()
[06:33:49] <ChrisMorgan> It's the sort of thing where I should just try getting other tools to emit some of these things and see how they do it. I guess such characters could be done with an encoding, "=?Q?...?="... we'll need to implement that somewhere along the way.
[06:34:05] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[06:36:21] *** Quits: jordyd (jordyd@moz-6C21E717.seg40.ucf.edu) (Ping timeout)
[06:36:37] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[06:37:13] <ercxx__> I want rust-http to be good enough to start working on a proper web framework.
[06:37:43] <cmr> Please do so; manual URL routing is a pain and also fragile.
[06:37:51] <cmr> Though pattern matching makes it not like sleeping on nails.
[06:38:24] <ercxx__> I want to be able to call things by their name.
[06:38:41] <ercxx__> That makes things very easy.
[06:38:50] *** Joins: auscompgeek (aucg@aries.trekweb.org)
[06:38:58] <cmr> I wonder how far it could be taken with macros
[06:39:09] *** Joins: Jackneill (Jackneill@moz-5B85B16F.pool.digikabel.hu)
[06:39:10] <ercxx__> I tried, but my brain hurt.
[06:39:41] <ChrisMorgan> cmr: gotta be able to use macros from another crate. I wonder... `crate_name::macro_name!(...)`
[06:40:00] <ChrisMorgan> I also have grand designs for a Rust web framework. And that's also why I started rust-http!
[06:40:18] <cmr> I never want to write another web framework.
[06:40:22] * ChrisMorgan should finish writing the first version of his vision document
[06:40:24] <cmr> I did once.
[06:40:50] *** Joins: canhtak (jeremy@moz-EF57C296.wl.t.ulaval.ca)
[06:41:15] <ercxx__> Well mine isn't really grand. I wanted to make something small and simple kinda like "By retards, for retards." and put my picture right there.
[06:42:11] <cmr> If widmann worked I'd use it, but it's too limited for me to want to bother with it, and my needs are miniscule.
[06:42:11] <ChrisMorgan> My framework will be most notably different from all the Python/Ruby/JavaScript/etc. ones out there in that it will be: (a) fast; (b) safe; (c) correct. (I'll even be dealing with things like compiling templates. I *love* Django, but I *hate* the way its templates are designed to just fail entirely silently.)
[06:42:32] *** Quits: canhtak (jeremy@moz-EF57C296.wl.t.ulaval.ca) (Ping timeout)
[06:42:37] <ercxx__> cmr: what do you mean? What do you need?
[06:42:38] <cmr> Yes, a good template lib is something I've been wanting to do, and it's not nearly as painful as a web framework.
[06:43:03] <cmr> ercxx__: super super straightforward routing
[06:43:17] *** Joins: Riddler (Riddler@B5FA00F0.63835AD5.5D27626C.IP)
[06:43:20] <cmr> So straightforward that hardcoding it as pattern matching on the resource vector isn't that bad.
[06:43:28] *** Quits: alonlevy (alon@moz-204DF55A.bb.netvision.net.il) (Ping timeout)
[06:43:52] <erickt> cmr / ChrisMorgan: I wrote a rust version of mustache if that interests you: https://github.com/erickt/rust-mustache. I have yet to port it to 0.8 though
[06:44:05] <ChrisMorgan> I think nested routing is the right thing for Rust rather than the repeat-yourself-quite-a-lot pattern matching used in most frameworks.
[06:44:17] <ChrisMorgan> erickt: does it compile with type checking and all?
[06:44:22] <ChrisMorgan> That's what I want, see. :-)
[06:44:25] <ChrisMorgan> g2g
[06:44:30] <cmr> Sure, I used a similar style with my lua one.
[06:44:32] <cmr> It's quite nice.
[06:44:42] * ChrisMorgan is loving using the i3 window manager
[06:44:44] <ercxx__> cmr: I was playing with rust-http and rustsqlite: http://pastebin.mozilla.org/3247509
[06:44:58] <erickt> ChrisMorgan: it uses the Encoders/Decoders to translate from structs into the templates
[06:45:20] *** Joins: qrpth (andreas@moz-C54F6246.dyn.estpak.ee)
[06:45:21] *** Joins: fyolnish (fyolnish@moz-61796E5E.uqwimax.jp)
[06:45:37] *** Joins: jaen (jaen@moz-E5B18A83.catv.broadband.hu)
[06:45:41] <ercxx__> erickt: I wanted to use that.
[06:45:52] <erickt> The last time I worked on it we still had anonymous records, so it was a bit less wordy to use than it would be nowadays :(
[06:45:56] <ercxx__> How complete is it?
[06:46:18] <erickt> it passed the mustache test suite
[06:46:22] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[06:46:31] <ercxx__> That's good.
[06:47:00] <ercxx__> I'll take a look at it at some point.
[06:47:01] <erickt> or almost all of it, I think there was one case I couldn't do
[06:47:02] *** Quits: fyolnish (fyolnish@moz-61796E5E.uqwimax.jp) (Ping timeout)
[06:47:17] <erickt> ercxx__: I'll look into updating it tomorrow
[06:47:20] *** Joins: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP)
[06:47:42] <ercxx__> I was going to write my own, but it's just dumb while there is stuff that's ready :)
[06:47:45] <cmr> "Update to Rust 0.5."
[06:47:48] <erickt> so many things to do, it helps to have an interested party to help prioritize things :)
[06:47:51] <cmr> That's going to be a painful update
[06:47:56] <erickt> heh
[06:48:32] <erickt> cmr: I actually started porting it a couple weeks ago
[06:48:43] <cmr> Ah
[06:48:57] <erickt> not quite sure the current state
[06:49:02] *** Quits: six600110 (six600110@moz-C663577C.hsd1.il.comcast.net) (Connection reset by peer)
[06:49:25] *** Quits: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP) (Ping timeout)
[06:50:23] <Riddler> i am a complete begginer in native coding . and now i want to try rust as my first language , so is there any RUST tutorial for noobs
[06:50:32] <erickt> anyway, bedtime for me. gnight all!
[06:51:06] *** Joins: six600110 (six600110@moz-C663577C.hsd1.il.comcast.net)
[06:51:22] <cmr> Riddler: Not really, and the language is not really intended for beginners. It's difficult to explain the tradeoffs the languages make if you haven't felt the pain or don't know the problems that traditional systems languages bring.
[06:51:49] <cmr> Not that it can't be done, just very difficult, and nobody has really put in too much effort into it.
[06:52:04] <cmr> Rust for Rubyists is probably the closest, but it papers over many of the finer points in the name of simplicity.
[06:52:07] <cmr> slash clarity.
[06:52:33] <Riddler> ho  so have to leran it it the hard way
[06:52:38] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[06:52:39] <cmr> yup!
[06:52:58] <dbaupp> Riddler: btw, http://rustforrubyists.com/ 
[06:53:35] *** Quits: ercxx__ (ercan@moz-7CFF3469.dyn.optonline.net) (Quit: WeeChat 0.4.2)
[06:54:27] <Riddler> okkay i have have some knowledge in PHP will it help me in learning rust ?
[06:54:51] <cmr> Not particularly, besides general programming concepts like conditionals and iteration.
[06:55:30] *** Quits: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net) (Ping timeout)
[06:56:14] <dbaupp> cmr: did you see my message about https://travis-ci.org/huonw/multibuilder & http://hiho.io/rust-ci/p/24/ ? (just incidentally)
[06:56:33] <cmr> dbaupp: no
[06:56:39] <cmr> where do you leave these messages that I never see them? :P
[06:57:52] <dbaupp> cmr: #rust, maybe you don't go there enough?
[06:57:54] <dbaupp> :P
[06:58:14] *** Joins: StarLight (StarLight@moz-A74BE872.dynamic.avangarddsl.ru)
[06:58:40] <cmr> Oh that message
[06:58:51] <cmr> Yeah I saw it but apparently immediately forgot about it
[06:58:57] <dbaupp> haha
[07:00:18] *** Quits: jaen (jaen@moz-E5B18A83.catv.broadband.hu) (Ping timeout)
[07:00:51] <dbaupp> cmr: (in any case, it's probably kinda pointless, given there are no tests, but compiling is a good start.)
[07:00:59] <cmr> A very good start.
[07:01:23] <cmr> I wonder if I could hook rustdoc into travis-ci and just provide hosting, rather than also having to build things.
[07:01:26] <cmr> hansjorg: ping
[07:02:38] <dbaupp> can you get data out of travis like that?
[07:03:46] <cmr> no idea, but if I can get some sort of notification when travis tests pass, and allow projects to have like .rustdocrc or even crate attributes, it'd make my ad-hoc program to run it simpler
[07:04:02] <cmr> not rustdocrc
[07:04:04] <cmr> cmrdocrc :p
[07:04:10] <cmr> or .cmrdoc.conf, looks prettier.
[07:04:22] *** Quits: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) (Connection reset by peer)
[07:04:34] *** Joins: eddyb (eddy@3C6E2DBB.FFB4E060.A5830293.IP)
[07:05:00] *** Joins: timot (timot@moz-EA613DEA.mobile.tre.se)
[07:05:09] *** Quits: timot_ (timot@moz-7E76BCFD.mobile.tre.se) (Ping timeout)
[07:06:16] <cmr> Does anyone have announcements for TWiR?
[07:06:36] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[07:09:49] *** Quits: timot (timot@moz-EA613DEA.mobile.tre.se) (Ping timeout)
[07:10:23] *** Joins: timot (timot@moz-F66122AC.bredband.tre.se)
[07:12:37] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[07:18:03] *** Joins: alonlevy (alon@moz-B0E66DB7.static.bezeqint.net)
[07:22:27] <mcpherrin> cmr: I'd like to announce "Hello, everyone!"
[07:22:38] <mcpherrin> Alternatively MCPHERRIN WAS HERE
[07:24:00] <cmr> http://cmr.github.io/blog/2013/10/12/this-week-in-rust/
[07:24:22] <cmr> mcpherrin: you're lucky I had a brilliant idea for JITing redcode, otherwise I would have already published it :p
[07:25:15] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[07:25:46] <mcpherrin> :D
[07:26:35] <mcpherrin> Hmm I feel like I should do something sweet in Rust tomorrow so I can announce it next week.  To balance my spam-karma :)
[07:27:04] <cmr> Want a project? :)
[07:27:17] <mcpherrin> Do you have one in mind? :P
[07:27:20] *** Joins: aegeaner (Aegeaner@D4983C8C.B40334C3.A28F48E3.IP)
[07:27:58] <cmr> Yes. Currently all functions have an unused environment parameter as this first argument, to make conversion to &fn cheap and easy. Making that go away would be a huge perf boon, I think.
[07:28:02] <mcpherrin> I was going to go try to make rust+emscripten javascript work, and thus avoid using javascript for a project I want to make
[07:28:42] <cmr> Experimenting with manually removing that first parameter from some smallish Rust code to see how much better it optimizes/performs would be a useful first step.
[07:29:24] <dbaupp> cmr: your raw string has mismatch #s
[07:29:30] *** Joins: jeffb (jeff@moz-D13B6004.hsd1.ca.comcast.net)
[07:29:34] <cmr> Really?
[07:29:36] <cmr> DAmmit
[07:30:10] <cmr> And I actually proofread this week too :(
[07:31:11] *** Quits: GeneralMaximus (ankur@CBB1129D.40259142.D5D59AD9.IP) (Ping timeout)
[07:33:20] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[07:35:00] *** Joins: GeneralMaximus (ankur@660B907.950545B2.274D17D6.IP)
[07:35:34] <dbaupp> cmr: also, re rustpkg remote fetching, https://github.com/mozilla/rust/issues/9781
[07:35:49] <cmr> Ah that's the issue I was looking for.
[07:35:51] <cmr> Thanks!
[07:35:56] *** Joins: steveklabnik (steveklabn@701D470.129BE976.EE0D0080.IP)
[07:36:39] <cmr> My omniscience is clearly lacking
[07:37:21] *** Quits: jeffb (jeff@moz-D13B6004.hsd1.ca.comcast.net) (Quit: jeffb)
[07:41:35] *** Joins: timot_ (timot@moz-6ABAFC38.mobile.tre.se)
[07:41:44] *** Quits: timot (timot@moz-F66122AC.bredband.tre.se) (Ping timeout)
[07:45:32] *** Joins: fyolnish (fyolnish@moz-6D0D11BA.uqwimax.jp)
[07:47:15] *** Quits: fyolnish (fyolnish@moz-6D0D11BA.uqwimax.jp) (Ping timeout)
[07:47:49] *** Joins: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP)
[07:49:47] *** Joins: jeffb (jeff@moz-D13B6004.hsd1.ca.comcast.net)
[07:49:53] *** Quits: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP) (Ping timeout)
[07:49:55] <jeaye> Thanks for another TWiR, cmr. :)
[08:05:31] *** Joins: skade (skade@moz-4865967C.pools.arcor-ip.net)
[08:06:16] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[08:06:26] *** Joins: bheylin (brianheyli@moz-6C75ED86.speed.planet.nl)
[08:07:54] *** Joins: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP)
[08:08:45] <devbug> "Welcome to another issue of *This Week in Rust*. ... the removal of the `rust` tool"
[08:08:49] <devbug> Hmm?
[08:10:02] *** Joins: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com)
[08:10:11] <dbaupp> the `rust` command-line tool was removed because it wasn't done properly
[08:11:10] <devbug> dbaupp: Will it be reintroduced?
[08:11:33] <mcpherrin> devbug: If somebody puts in the effort to do it right
[08:11:50] <mcpherrin> And more importantly, maintain it
[08:11:52] <devbug> And "right" would be?
[08:12:06] <dbaupp> handling command line args correctly
[08:12:28] <devbug> dbaupp: We need Thor, but for Rust, then?
[08:12:37] <dbaupp> e.g. `rust run --help` was the same as `rustc --help` because it was just passing the args through directly
[08:12:42] <dbaupp> "Thor"?
[08:12:46] <mcpherrin> Lord of asgard?
[08:12:57] <devbug> mcpherrin: No no,
[08:13:20] <devbug> It doesn't cast lightning, unfortunately
[08:13:29] <devbug> mcpherrin: https://github.com/erikhuda/thor
[08:13:41] <devbug> dbaupp:  ^
[08:13:52] <dbaupp> oh
[08:14:17] <dbaupp> well, I guess something like that would help
[08:16:09] *** Joins: Ms2ger (Ms2ger@D2CDF20A.29977EA1.187A1082.IP)
[08:21:56] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[08:22:04] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[08:23:44] *** Quits: skade (skade@moz-4865967C.pools.arcor-ip.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[08:24:04] *** Joins: jviereck (Adium@moz-A0F658.dip0.t-ipconnect.de)
[08:24:56] *** Quits: jeffb (jeff@moz-D13B6004.hsd1.ca.comcast.net) (Quit: jeffb)
[08:28:02] <steveklabnik> btw: http://bpaste.net/show/TY23ICfWkpmx9n9WIv24/
[08:28:46] *** Quits: timot_ (timot@moz-6ABAFC38.mobile.tre.se) (Ping timeout)
[08:28:54] *** Quits: bheylin (brianheyli@moz-6C75ED86.speed.planet.nl) (Quit: bheylin)
[08:29:00] *** Quits: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com) (Ping timeout)
[08:29:05] *** Joins: timot_ (timot@moz-6ABAFC38.mobile.tre.se)
[08:29:25] *** Quits: Riddler (Riddler@B5FA00F0.63835AD5.5D27626C.IP) (Connection reset by peer)
[08:29:45] *** Joins: quasisphere (btw@DC685DC2.94302614.1D0D91FF.IP)
[08:30:18] <dbaupp> steveklabnik: "known" bug (as in, we know that the bigints are really unoptimised
[08:30:18] <dbaupp> )
[08:30:20] *** Quits: fran_ (fran@moz-63A55738.telecom.net.ar) (Ping timeout)
[08:30:24] <steveklabnik> figured!
[08:30:28] <steveklabnik> just figured i'd mention it, in case.
[08:30:54] <dbaupp> but, I guess python's using gmp, so there's no comparison
[08:31:16] <steveklabnik> btw, i'm actually giving a talk about Rust today, at RuPy. should be recorded.
[08:31:28] <dbaupp> Ru(st)Py?
[08:31:29] <steveklabnik> it's just an intro. anything i should absolutely make sure to mention?
[08:31:31] <steveklabnik> ha!
[08:31:32] * dbaupp is hopeful :P
[08:32:01] <steveklabnik> Ruby/Python. now includes JS and closure as well. they're chaning the name to 'polyconf' next year, they want to rebrand as europe's polyglot conf
[08:32:55] <Dcoder> python doesn't use gmp
[08:33:10] <Dcoder> python bignums are actually quite slow compared to gmp
[08:33:35] *** Joins: fran_ (fran@moz-B6479678.telecom.net.ar)
[08:34:48] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[08:36:42] *** Joins: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net)
[08:39:47] *** Joins: maik (maik@moz-47F6ECD1.dip0.t-ipconnect.de)
[08:43:39] *** Joins: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP)
[08:43:56] *** Quits: timot_ (timot@moz-6ABAFC38.mobile.tre.se) (Ping timeout)
[08:44:21] *** Joins: timot_ (timot@moz-E43F318D.mobile.tre.se)
[08:45:41] *** Joins: fyolnish (fyolnish@moz-64F7530F.uqwimax.jp)
[08:47:15] *** Quits: steveklabnik (steveklabn@701D470.129BE976.EE0D0080.IP) (Ping timeout)
[08:47:25] *** Quits: fyolnish (fyolnish@moz-64F7530F.uqwimax.jp) (Ping timeout)
[08:49:18] *** Joins: skade (skade@moz-4865967C.pools.arcor-ip.net)
[08:50:08] *** Quits: maik (maik@moz-47F6ECD1.dip0.t-ipconnect.de) (Ping timeout)
[08:50:37] *** Quits: skade (skade@moz-4865967C.pools.arcor-ip.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[08:50:46] *** Joins: steveklabnik (steveklabn@701D470.129BE976.EE0D0080.IP)
[08:51:58] *** Quits: eddyb9 (eddy@3C6E2DBB.FFB4E060.A5830293.IP) (Quit: Leaving)
[08:53:34] *** Quits: steveklabnik (steveklabn@701D470.129BE976.EE0D0080.IP) (Ping timeout)
[08:56:44] *** Joins: jaen (jaen@701D470.129BE976.EE0D0080.IP)
[08:57:42] *** Joins: steveklabnik (steveklabn@701D470.129BE976.EE0D0080.IP)
[08:59:51] *** Joins: foudfou (foudfou@moz-555DD0EA.net-81-220-236.rev.numericable.fr)
[08:59:54] *** Quits: siritori (siritori@moz-4155F3B3.panda-world.ne.jp) (Ping timeout)
[09:00:32] *** Joins: siritori (siritori@moz-4155F3B3.panda-world.ne.jp)
[09:03:28] <dbaupp> Dcoder: oh, ok
[09:06:39] *** Quits: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net) (Ping timeout)
[09:07:07] *** Joins: ofeldt- (ofeldt@moz-DAC41220.dip0.t-ipconnect.de)
[09:07:18] <jaen> I'm at RuPy at noticed someone tapping away at a Rust presentation, but I see none on the official agenda. Anyone know anything perchance?
[09:07:30] <steveklabnik> hi!
[09:07:31] <steveklabnik> it's me.
[09:07:38] <steveklabnik> i'm the very very last speaker, in the other room
[09:07:47] *** Quits: ofeldt (ofeldt@moz-7E2AC172.dip0.t-ipconnect.de) (Ping timeout)
[09:07:50] *** Joins: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net)
[09:08:26] <steveklabnik> after alban said they're rebranding to polyconf i asked him if i could switch my talk
[09:08:38] <jaen> steveklabnik: Hi! So that's the TBA talk? Cool, I'll see if I can herd my friends there ; d
[09:09:03] <steveklabnik> yup!
[09:09:05] <steveklabnik> awesome. :)
[09:09:21] *** Joins: bheylin (brianheyli@moz-6C75ED86.speed.planet.nl)
[09:09:29] *** Quits: bheylin (brianheyli@moz-6C75ED86.speed.planet.nl) (Quit: bheylin)
[09:10:39] *** Joins: MrOrdinaire (Mibbit@1143DEE0.A607747.FD383126.IP)
[09:10:43] <steveklabnik> jaen: also: https://twitter.com/steveklabnik/status/389305682442203138
[09:11:19] <dbaupp> steveklabnik: what was your old talk?
[09:11:26] <jaen> Ah, I'm not that much of a twitter person, so that's why I might have not noticed ; p
[09:11:28] <steveklabnik> 'something philosophical'
[09:11:33] <steveklabnik> dbaupp: ^^^
[09:11:37] <jaen> Good thing I saw what you were doing
[09:12:02] <steveklabnik> i agreed to speak at this conf last year, and that was all that we said. then when i got here, i realized we hadn't agreed on what that meant.
[09:12:43] *** Joins: bheylin (brianheyli@moz-6C75ED86.speed.planet.nl)
[09:12:51] <dbaupp> haha, so you slotted in a Rust talk; awesome!
[09:13:04] <steveklabnik> yup.
[09:13:13] <steveklabnik> it's just an intro
[09:13:23] *** Joins: maik (maik@moz-47F6ECD1.dip0.t-ipconnect.de)
[09:13:28] <steveklabnik> is there anything i should be sure to cover?
[09:13:46] * dbaupp doesn't know
[09:15:29] *** Quits: timot_ (timot@moz-E43F318D.mobile.tre.se) (Ping timeout)
[09:18:44] *** Joins: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP)
[09:20:49] *** Quits: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP) (Ping timeout)
[09:20:52] *** Quits: alonlevy (alon@moz-B0E66DB7.static.bezeqint.net) (Ping timeout)
[09:22:35] *** Quits: steveklabnik (steveklabn@701D470.129BE976.EE0D0080.IP) (Quit: omg internet)
[09:27:44] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[09:28:18] *** Quits: bheylin (brianheyli@moz-6C75ED86.speed.planet.nl) (Quit: bheylin)
[09:29:40] <Thiez> hmmn, the text that describes public and private visibility is a bit ambiguous, is it not?
[09:30:50] <Thiez> '1. If an item is public, then it can be used externally through any of its public ancestors. 2. If an item is private, it may be accessed by the current module and its descendants.'
[09:31:15] *** Joins: bheylin (brianheyli@moz-6C75ED86.speed.planet.nl)
[09:31:20] <Thiez> so would this imply that a public item is not accessable by its descendants? :p
[09:31:58] <Thiez> or is that supposed to be the case?
[09:35:20] *** Joins: alonlevy (alon@moz-B0E66DB7.static.bezeqint.net)
[09:35:58] *** Joins: q66_ (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[09:36:09] *** Quits: maik (maik@moz-47F6ECD1.dip0.t-ipconnect.de) (Ping timeout)
[09:36:57] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Ping timeout)
[09:36:59] *** Joins: CarpNet (Alasdair@moz-EF831A5E.cable.virginmedia.com)
[09:37:29] *** Joins: q66__ (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[09:38:28] *** Quits: q66_ (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Ping timeout)
[09:38:58] <kimundi> rusti: r##"foo"##
[09:38:59] -rusti- "foo"
[09:39:11] <kimundi> rusti: r##""#"##
[09:39:11] -rusti- "\"#"
[09:39:42] <FreeFull> rusti: "me/     /ow"
[09:39:43] -rusti- "me/     /ow"
[09:39:50] <FreeFull> rusti: "me\     \ow"
[09:39:52] -rusti- pastebinned 6 lines of output: http://ix.io/8rz
[09:40:09] <FreeFull> Ok, it doesn't do the Haskell thing there
[09:40:13] <kimundi> rusti: r"me\     \ow"
[09:40:14] -rusti- "me\\     \\ow"
[09:40:26] <dbaupp> FreeFull: the haskell thing?
[09:40:32] <kimundi> rusti: println(r"me\     \ow");
[09:40:33] -rusti- me\     \ow
[09:40:33] -rusti- ()
[09:40:39] <Ms2ger> dbaupp, "magic"? :)
[09:40:47] <FreeFull> dbaupp: \<whitespace> will skip all subsequent whitespace until another \
[09:41:01] <kimundi> we have that too, but only at a linebreak
[09:41:04] *** Joins: timot_ (timot@moz-E43F318D.mobile.tre.se)
[09:41:11] <dbaupp> FreeFull: woaaah
[09:41:23] * dbaupp clearly hasn't used strings in Haskell enough
[09:41:28] <dbaupp> kimundi: not quite
[09:41:30] <FreeFull> So "me\    \ow" becomes just "meow"
[09:41:38] <dbaupp> Ms2ger: hah
[09:41:48] <kimundi> well, it escapes all whitespace starting from a \n to the next non-whitespace
[09:42:12] <FreeFull> Putting any non-whitespace characters in there will result in an error
[09:42:20] *** Joins: skade (skade@moz-4865967C.pools.arcor-ip.net)
[09:42:30] <FreeFull> kimundi: What if you do want some whitespace afterwards?
[09:42:38] <FreeFull> I guess you can just put it before
[09:42:45] <kimundi> then you have a problem :)
[09:42:52] <kimundi> yeah, that too
[09:43:15] <Ms2ger> So I was right :)
[09:44:15] *** Joins: donri (donri@moz-9BB61102.tbcn.telia.com)
[09:44:19] <FreeFull> How is that magic?
[09:44:49] <kimundi> Maybe we could augment the rule we have right now to allow terminating with \ to...
[09:44:58] <kimundi> rusti: "hello\ world"
[09:45:00] -rusti- pastebinned 6 lines of output: http://ix.io/8rA
[09:45:32] *** Joins: fyolnish (fyolnish@moz-71BD528.uqwimax.jp)
[09:45:35] <eddyb> cmd: \
[09:45:44] <FreeFull> I don't think it'd be worth it
[09:45:49] <kimundi> like, second '\' => it skips all whitespace till the first one; else it skips until the '\'
[09:45:51] <FreeFull> It'd break existing code
[09:46:02] <kimundi> yeah
[09:46:05] <eddyb> ^ sorry about that. anyways, just checked, in JS, '\ ' === ' '
[09:46:43] <FreeFull> eddyb: JS probably makes unrecognised escapes just be that character
[09:47:13] <kimundi> cmr: Is TwiR still in the "find errors for me please" phase? :P
[09:47:14] *** Quits: fyolnish (fyolnish@moz-71BD528.uqwimax.jp) (Ping timeout)
[09:47:31] *** Quits: GeorgeH (George@moz-FB5F2302.hsd1.nj.comcast.net) (Connection reset by peer)
[09:47:43] <FreeFull> The compiler finds errors for you
[09:48:03] *** Quits: z0w0 (zack@moz-C877F2F7.lnse2.cha.bigpond.net.au) (Quit: z0w0)
[09:48:19] <eddyb> FreeFull: yeah, I think you can escape any character even if it's pointless
[09:49:08] *** Joins: z0w0 (zack@moz-C877F2F7.lnse2.cha.bigpond.net.au)
[09:49:16] *** Quits: z0w0 (zack@moz-C877F2F7.lnse2.cha.bigpond.net.au) (Quit: z0w0)
[09:49:45] *** Joins: z0w0 (zack@moz-C877F2F7.lnse2.cha.bigpond.net.au)
[09:49:52] *** Quits: z0w0 (zack@moz-C877F2F7.lnse2.cha.bigpond.net.au) (Quit: z0w0)
[09:50:18] *** Joins: z0w0 (zack@moz-C877F2F7.lnse2.cha.bigpond.net.au)
[09:55:53] *** Quits: skade (skade@moz-4865967C.pools.arcor-ip.net) (Quit: Textual IRC Client: www.textualapp.com)
[09:56:46] *** Quits: MrOrdinaire (Mibbit@1143DEE0.A607747.FD383126.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[09:58:06] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[09:58:10] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[10:03:37] *** Quits: jaen (jaen@701D470.129BE976.EE0D0080.IP) (Ping timeout)
[10:04:23] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[10:05:27] *** Joins: maik (maik@moz-47F6ECD1.dip0.t-ipconnect.de)
[10:06:35] *** Joins: HollyRain (HollyRain@moz-50A83091.dyn.user.ono.com)
[10:06:58] <HollyRain> hi! I compiled rust from trunk but I get the next error:
[10:07:14] <HollyRain> $ rust --version
[10:07:15] <HollyRain> rust: symbol lookup error: /usr/local/bin/../lib/librust-5828c92a27389871-0.9-pre.so: undefined symbol: _ZN9main_args19ha62757258577f6e5a711v0.9$x2dpreE
[10:07:20] *** Parts: aegeaner (Aegeaner@D4983C8C.B40334C3.A28F48E3.IP) ()
[10:08:26] <kimundi> HollyRain: That's because the rust tool got removed, and you have the old one left in your path
[10:10:42] <eddyb> kimundi: make install should remove rust or at least print a big bold red notice if it's still installed
[10:10:50] *** jorendorff_away is now known as jorendorff
[10:10:56] *** Quits: StarLight (StarLight@moz-A74BE872.dynamic.avangarddsl.ru) (Ping timeout)
[10:11:26] *** Quits: timot_ (timot@moz-E43F318D.mobile.tre.se) (Quit: Konversation terminated!)
[10:11:29] *** Joins: timot (timot@moz-E43F318D.mobile.tre.se)
[10:11:42] <HollyRain> kimundi, fixed, I just removed '/usr/local/bin/rust'; instead, it is named rustc now
[10:11:49] <kimundi> well, we have make uninstall, but I suspect whoever removed the rust tool did not think that far
[10:12:03] <kimundi> HollyRain: rustc was always named rustc
[10:12:04] *** Joins: Earnestly (earnest@moz-BE290A2B.dyn.plus.net)
[10:12:26] <kimundi> HollyRain: "rust" just served as a hub for rustc, rustdoc, rustpkg etc
[10:12:33] <HollyRain> ok
[10:12:46] <HollyRain> like go tool
[10:13:36] <dbaupp> yes, but 'rust' was implemented much less well than the go tool
[10:13:51] <dbaupp> (and no-one was maintaining it/improving it)
[10:14:20] <kimundi> yeah, that was the intention. Sadly I didn't keep up with maintaining it since I introduced it, and now it got removed because it had to many detail issues because of that :(
[10:14:50] <kimundi> ... And now every day new people show up that miss it xD
[10:15:06] *** Joins: StarLight (StarLight@moz-879AB5FF.dynamic.avangarddsl.ru)
[10:15:41] * dbaupp hugs kimundi
[10:19:22] *** Joins: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP)
[10:20:36] *** Quits: bheylin (brianheyli@moz-6C75ED86.speed.planet.nl) (Quit: bheylin)
[10:21:19] *** Quits: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP) (Ping timeout)
[10:22:47] *** Joins: mikezaby (mikezaby@moz-908EA8DE.home.otenet.gr)
[10:24:48] <kimundi> aww
[10:24:54] * kimundi hugs dbaupp back
[10:25:51] *** Quits: [squiddy] (squiddy@moz-A441D2CD.dynamic.cablesurf.de) (Ping timeout)
[10:29:30] *** Quits: siritori (siritori@moz-4155F3B3.panda-world.ne.jp) (Ping timeout)
[10:35:16] *** Quits: GeneralMaximus (ankur@660B907.950545B2.274D17D6.IP) (Ping timeout)
[10:35:24] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Client exited)
[10:36:05] *** Quits: HollyRain (HollyRain@moz-50A83091.dyn.user.ono.com) (Quit: bye, bye)
[10:37:26] *** Joins: bheylin (brianheyli@moz-6C75ED86.speed.planet.nl)
[10:38:54] *** Joins: GeneralMaximus (ankur@285A483.9B33ED22.BE90E62C.IP)
[10:40:38] *** Quits: GeneralMaximus (ankur@285A483.9B33ED22.BE90E62C.IP) (Ping timeout)
[10:41:11] *** Joins: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[10:41:11] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[10:45:17] *** Quits: bheylin (brianheyli@moz-6C75ED86.speed.planet.nl) (Quit: bheylin)
[10:45:23] *** Joins: fyolnish (fyolnish@moz-4DE2B71.uqwimax.jp)
[10:47:00] *** Joins: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP)
[10:47:05] *** Quits: fyolnish (fyolnish@moz-4DE2B71.uqwimax.jp) (Ping timeout)
[10:47:13] *** Quits: bholley (anonymous@moz-D5EB36E2.rev.numericable.fr) (Quit: bholley)
[10:47:20] *** Joins: GeneralMaximus (ankur@1204D680.E1A0A7E0.BE90E62C.IP)
[10:47:41] *** Joins: exobit (foo@moz-90D1B547.nycmny.fios.verizon.net)
[10:49:03] *** Quits: GeneralMaximus (ankur@1204D680.E1A0A7E0.BE90E62C.IP) (Ping timeout)
[10:52:26] *** Joins: fyolnish (fyolnish@moz-4DE2B71.uqwimax.jp)
[10:52:43] *** Joins: GeneralMaximus (ankur@1A0FE27A.9EE11D7D.D2D1FAF0.IP)
[10:54:12] *** Quits: CarpNet (Alasdair@moz-EF831A5E.cable.virginmedia.com) (Ping timeout)
[10:54:34] *** Joins: Ferreus (ferreus@moz-5FF2A40A.pools.arcor-ip.net)
[10:54:54] *** Joins: bholley (anonymous@moz-D5EB36E2.rev.numericable.fr)
[10:55:07] *** Joins: martndemus (martndemus@moz-A2C32059.upc-h.chello.nl)
[10:56:25] *** Quits: martndemus (martndemus@moz-A2C32059.upc-h.chello.nl) (Quit: leaving)
[10:56:28] *** Joins: martndemus (martndemus@moz-A2C32059.upc-h.chello.nl)
[10:56:42] *** Quits: heftig (heftig@moz-1DCFAF1E.dip0.t-ipconnect.de) (Ping timeout)
[11:00:32] *** Quits: fran_ (fran@moz-B6479678.telecom.net.ar) (Ping timeout)
[11:02:14] *** Joins: fran_ (fran@moz-E6F26381.telecom.net.ar)
[11:05:14] *** Joins: heftig (heftig@moz-17D40E43.dip0.t-ipconnect.de)
[11:06:33] <eddyb> rusti: let foo = "bar";
[11:06:34] -rusti- <anon>:9:13: 9:16 warning: unused variable: `foo`, #[warn(unused_variable)] on by default
[11:06:34] -rusti- <anon>:9          let foo = "bar";
[11:06:34] -rusti-                       ^~~
[11:06:34] -rusti- ()
[11:06:40] <eddyb> rusti: let in = "bar";
[11:06:47] -rusti- pastebinned 7 lines of output: http://ix.io/8rC
[11:09:11] <kimundi> eddyb: What you're trying to do?
[11:09:22] <eddyb> kimundi: use "in" as an identifier :(
[11:09:31] <kimundi> AH, in is a keyword
[11:09:36] <eddyb> as in, io::out and io::in
[11:09:40] *** Joins: CarpNet (Alasdair@moz-EF831A5E.cable.virginmedia.com)
[11:09:54] <kimundi> how about "inp" ?
[11:09:55] <eddyb> kimundi: I know, but it's technically possible to restrict it to its (only?) usage in for
[11:10:07] <kimundi> eddyb: That would be a contextual keyword though
[11:10:14] <kimundi> eddyb: And we try not to have those
[11:10:29] <eddyb> oh, ok. can't argue with sound design logic :P
[11:10:43] <kimundi> eddyb: Would be a weird failure case too, if you ahve a local varibale "in" that you need to rename first to use it in a for loop
[11:10:59] <benh> would you really tho
[11:11:20] <kimundi> hmm#
[11:11:22] <benh> the "in" in a for-loop is nearly superfluous, isn't it
[11:11:27] <kimundi> for <pat> in <expr>
[11:11:37] <benh> you can almost parse for <pat> <expr>?
[11:11:39] <eddyb> C++11 when with :
[11:11:44] <eddyb> *went with
[11:12:06] <kimundi> Better to not start a bikesheed _again_ about this xD
[11:12:10] <eddyb> hehe
[11:12:28] <kimundi> eddyb: We went through all common variations recently when we changed the for sugar to what it is today
[11:13:08] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[11:13:30] <kimundi> it used to be "for foo() || { ... }" == "foo(|| {  })" with additional rewrite rules that would allow break and continue to kinda work
[11:14:10] <myname> are there plans for something like "with"?
[11:14:25] <kimundi> Anyway, the issue with ':' instead of in is that we want to use ":" as value:type seperator only (exception being struct construction)
[11:14:35] <kimundi> myname: what would with do?
[11:15:36] <myname> kimundi: with somestruct.value.subvalue { .subvalues_method(some_normal_function()); .subvalues_property = 5; }
[11:16:21] *** Quits: jviereck (Adium@moz-A0F658.dip0.t-ipconnect.de) (Quit: Leaving.)
[11:16:22] <dbaupp> myname: unlikely
[11:16:26] <kimundi> ah, method chaining without needing the methods to return Self
[11:16:38] <kimundi> Maybe something like dart uses?
[11:16:53] <eddyb> with is hated in JS, mainly because it doesn't work with the . prefix. so you're just increasing the cost for every identifier
[11:17:06] <myname> not chaining, no
[11:17:06] <Thiez> myname: what is the advantage to doing { let &mut foo = somestruct.value.subvalue; foo.subvalues_method(...); foo.subvalues_property = 5; } ? :)
[11:17:09] <eddyb> but that cost doesn't exist in Rust, so it might work even without the dot
[11:17:25] <kimundi> "foo..bar() ..baz() ..etc()" == "let tmp = foo; tmp.bar(); tmp.baz(); tmp.etc()"
[11:17:27] <eddyb> Thiez: nesting
[11:18:33] <kimundi> hm, this could be done as a macro
[11:18:42] *** Quits: timot (timot@moz-E43F318D.mobile.tre.se) (Quit: Konversation terminated!)
[11:18:55] *** Joins: timot (timot@moz-E43F318D.mobile.tre.se)
[11:19:24] <kimundi> with!( somestruct.value.subvalue { .subvalues_method(some_normal_function()); .subvalues_property = 5; })
[11:19:29] <kimundi> or so
[11:19:47] *** Joins: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP)
[11:19:59] <Thiez> kimundi: can it match on elements of expessions starting with '.'?
[11:20:21] <Thiez> like so: .subvalues_property = .othersubvalue_property + 3;
[11:20:27] <kimundi> the question is of course whether somestruct.value.subvalue should be re-accessed on each sub-acces, or be bound to a temporary variable
[11:20:42] <eddyb> and bounding requires renaming
[11:20:50] <kimundi> Thiez: Well, procedural macros should be able to do that
[11:21:04] <kimundi> Thiez: Could be hard with declarative ones
[11:21:12] <eddyb> http://llvm.org/docs/LangRef.html#module-level-inline-assembly can this be done in Rust?
[11:21:41] <Thiez> having seen the vbscript 'with' in action I can't say I miss it in rust
[11:21:50] *** Quits: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP) (Ping timeout)
[11:22:09] <kimundi> Aww, I liked with when I started programming with Visual Basic 6 :P
[11:22:28] *** Quits: bholley (anonymous@moz-D5EB36E2.rev.numericable.fr) (Quit: bholley)
[11:23:02] <Thiez> I think I'm having a lobotomy when I no longer have to touch that language :p
[11:23:22] <eddyb> I have to deal with a semi-idiot who likes VB, please don't remind me of that
[11:23:51] <Thiez> eddyb: at least it's not brainfuck :)
[11:24:08] *** Joins: siritori (siritori@moz-E54AAD3B.east.global.crust-r.net)
[11:24:43] *** Joins: nkoep (nik@moz-64C29CCB.pool.mediaways.net)
[11:26:58] *** Quits: maik (maik@moz-47F6ECD1.dip0.t-ipconnect.de) (Ping timeout)
[11:27:56] *** Quits: Earnestly (earnest@moz-BE290A2B.dyn.plus.net) (Ping timeout)
[11:28:49] *** Quits: siritori (siritori@moz-E54AAD3B.east.global.crust-r.net) (Ping timeout)
[11:29:27] *** Joins: maik (maik@moz-47F6ECD1.dip0.t-ipconnect.de)
[11:30:17] *** Joins: Earnestly (earnest@moz-BE290A2B.dyn.plus.net)
[11:31:55] *** Quits: Uther (Instantbir@moz-834083A8.hfc.dyn.abo.bbox.fr) (Quit: Instantbird 1.4 -- http://www.instantbird.com)
[11:35:15] *** Joins: steveklabnik (steveklabn@701D470.129BE976.EE0D0080.IP)
[11:36:00] *** Quits: martndemus (martndemus@moz-A2C32059.upc-h.chello.nl) (Ping timeout)
[11:39:41] *** Quits: foudfou (foudfou@moz-555DD0EA.net-81-220-236.rev.numericable.fr) (Quit: WeeChat 0.4.0)
[11:39:47] *** Quits: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP) (Connection reset by peer)
[11:39:53] *** Joins: foudfou (foudfou@moz-555DD0EA.net-81-220-236.rev.numericable.fr)
[11:42:30] *** Joins: jaen (jaen@moz-55AE6C19.eduroam.elte.hu)
[11:45:22] <eddyb> I'm not sure what this is, maybe a rustc bug:
[11:45:45] <eddyb> the following works (gcc and clang): echo 'int main(){short port = 0; int val = 0; asm("out %0, %1" :: "a" (val), "d" (port));}' | clang -x c -
[11:46:41] <eddyb> rusti: unsafe { let port = 0u16, val = 0u32; asm!("out %0, %1" :: "a" (val), "d" (port)); }
[11:46:46] -rusti- pastebinned 8 lines of output: http://ix.io/8rD
[11:47:22] <eddyb> rusti: unsafe { let (val, port) = (0u16, 0u32); asm!("out %0, %1" :: "a" (val), "d" (port)); }
[11:47:23] -rusti- error: couldn't allocate input reg for constraint 'a'
[11:47:23] -rusti- application terminated with error code 1
[11:48:05] <eddyb> so is this rustc's or llvm's fault?
[11:51:50] <dbaupp> eddyb: rustc + llvm
[11:52:15] <dbaupp> I think "{ax}"(val), "{edx}"(port) should work
[11:52:24] <eddyb> does clang have a special case for x86 that would be too hacky to use in rustc?
[11:52:27] *** Joins: hjr3 (hradtke@moz-64EFEFAE.cable.mindspring.com)
[11:53:09] <FreeFull> I assume rusti doesn't actually run unsafe blocks?
[11:53:12] <dbaupp> eddyb: it does have arch-specific special cases, yes; don't know about "too hacky".
[11:53:25] <Thiez> is our asm!() stuff actually documented these days?
[11:53:40] <dbaupp> rusti: unsafe { std::cast::transmute::<u64, f64>(10000) }
[11:53:41] -rusti- 0f64
[11:53:46] <dbaupp> FreeFull: it does
[11:54:16] <FreeFull> Someone could probably trash the bot then
[11:54:17] *** Quits: maik (maik@moz-47F6ECD1.dip0.t-ipconnect.de) (Ping timeout)
[11:54:23] <eddyb> FreeFull: sandboxed
[11:54:26] <dbaupp> FreeFull: try :P
[11:54:28] *** Joins: fmt (fmt@moz-5769BD38.static.tpgi.com.au)
[11:54:37] <dbaupp> Thiez: not sure
[11:54:41] <dbaupp> Thiez: ask Luqman
[11:54:47] <FreeFull> Is the source code available?
[11:55:03] <eddyb> rusti: unsafe {*(0 as u8*)}
[11:55:06] -rusti- pastebinned 6 lines of output: http://ix.io/8rF
[11:55:10] <dbaupp> FreeFull: most of it is in https://github.com/thestinger/rust-playpen
[11:55:19] <dbaupp> rusti: unsafe {*(0 as *u8)}
[11:55:19] -rusti- application terminated abnormally with signal 11 (Segmentation fault)
[11:55:38] <dbaupp> FreeFull: https://github.com/thestinger/playpen is the sandbox
[11:55:41] *** Quits: timot (timot@moz-E43F318D.mobile.tre.se) (Ping timeout)
[11:55:49] <eddyb> dbaupp: the trick here is to get the type from a function parameter. although now I'm not sure generics would blend as well as C++ templates would, in this case
[11:56:06] *** Joins: timot (timot@moz-D742E434.mobile.tre.se)
[11:56:10] <FreeFull> rusti: loop { }
[11:56:12] -rusti- pastebinned 12 lines of output: http://ix.io/8rG
[11:56:13] <dbaupp> FreeFull: https://github.com/thestinger/rust-playpen/blob/master/bin/irc.sh is the script that is run inside the sandbox to invoke rustc with our input
[11:56:17] *** Quits: fmt (fmt@moz-5769BD38.static.tpgi.com.au) (Ping timeout)
[11:56:24] <dbaupp> rusti: if true { loop { } }
[11:56:29] -rusti- timeout triggered!
[11:56:40] <dbaupp> eddyb: the trick for what?
[11:56:55] <eddyb> dbaupp: why I would like a and d, instead of explicitly sized registers
[11:57:48] <dbaupp> eddyb: oh, right. yes, although I don't see why it needs to be a function parameter rather than just using the type information the compiler knows for every single expression?
[11:59:24] *** Quits: timot (timot@moz-D742E434.mobile.tre.se) (Ping timeout)
[11:59:32] <eddyb> dbaupp: the code above would be wrapped in a fn outport<T:OneOf_u8_u16_u32>(port: u16, val: T) {}
[11:59:55] <eddyb> pardon my possibly wrong syntax, I'm still new
[12:00:18] *** Quits: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP) (Ping timeout)
[12:00:22] <dbaupp> eddyb: ah; Rust monomorphises very similar to how C++ does, so that should work
[12:00:54] <dbaupp> (in the world where rust has "a"(x) and "d"(y) working, which isn't this one, yet.)
[12:01:01] <eddyb> dbaupp: oh, thanks. I'll look in clang to see what it does
[12:02:14] *** Joins: martndemus (martndemus@moz-A2C32059.upc-h.chello.nl)
[12:02:17] <eddyb> <insert "... if you don't hear from me again" joke>
[12:03:30] <FreeFull> rusti: sleep(10000000); print("a");
[12:03:32] -rusti- pastebinned 7 lines of output: http://ix.io/8rH
[12:03:41] <Dcoder> "{ax}"(val), "{edx}"(port) doesn't seem to work
[12:03:53] <Dcoder> final assembly file looks like out %0, %1
[12:03:55] <eddyb> Dcoder: it does, you got them wrong
[12:04:16] <eddyb> Dcoder: oh, you mean it doesn't substitute?
[12:04:22] <eddyb> rusti: unsafe { let (val, port) = (0u16, 0u32); asm!("out %0, %1" :: "{eax}" (val), "{edx}" (port)); }
[12:04:23] -rusti- ()
[12:04:24] <FreeFull> rusti: std::rt::io::timer::sleep(1000); print("a");
[12:04:26] -rusti- a()
[12:04:36] <FreeFull> rusti: std::rt::io::timer::sleep(100000000); print("a");
[12:04:37] <eddyb> FreeFull: that's a second, most likely
[12:04:42] -rusti- timeout triggered!
[12:04:42] *** Joins: timot (timot@moz-D742E434.mobile.tre.se)
[12:04:59] <eddyb> FreeFull: try to break it in PM, please. as I assure you it will be hard
[12:05:20] <FreeFull> One last try and then I'll stop
[12:05:29] <FreeFull> Ok?
[12:05:38] <Dcoder> eddyb: yeah, doesn't substitute
[12:05:43] <Dcoder> (ftr, this is windows 0.8)
[12:06:01] <FreeFull> rusti: if true { loop { std::rt::io::timer::sleep(1000); print("a"); } }
[12:06:06] -rusti- aaaatimeout triggered!
[12:06:10] <dbaupp> eddyb: oh, it might be $0 $1, or %%0 %%1
[12:06:15] <FreeFull> Ok, I am content
[12:06:42] <FreeFull> The timeout is 5 seconds or so?
[12:06:44] <Dcoder> it's $0
[12:06:49] <Dcoder> now it works
[12:06:53] <eddyb> dbaupp: oh, yeah, the working version uses $0 and $1 https://github.com/pcmattman/rustic/blob/master/src/io/mod.rs
[12:07:37] <dbaupp> FreeFull: it's running using linux cgroups, which (approximately) means programs will get killed at the kernel level when they exceed the resource limits strcat has set (5s wall time, 128 MB memory)
[12:08:05] <eddyb> dbaupp: so right now I get rid of the mov hacks, but I should try to fix the constraints problem
[12:08:11] <eddyb> *I can get rid
[12:08:35] <dbaupp> eddyb: I think the constraints need to be "{eax}" etc too, but I'm not sure
[12:08:45] <dbaupp> I've never got asm!() to work reliably
[12:08:53] *** jorendorff is now known as jorendorff_away
[12:09:27] <dbaupp> eddyb: (fwiw, it's just using LLVM's raw syntax, whatever that is; clang translates its inline asm into the LLVM format internally)
[12:09:29] <FreeFull> dbaupp: Could it be circumvented by spawning a new program, or do children inherit the time the parent has been on for?
[12:09:37] *** Joins: sebcrozet (sebcrozet@moz-6DA639AF.w80-13.abo.wanadoo.fr)
[12:09:50] <eddyb> FreeFull: I think you can disable fork
[12:10:32] <dbaupp> FreeFull: no, it's all in one shared cgroup, so if the combined memory usage of all the spawned programs is > 128MB, they all get killed
[12:10:40] <dbaupp> (I believe)
[12:12:44] <FreeFull> So you can't really break the sandbox without exploiting linux?
[12:12:57] <eddyb> dbaupp: it handles GCC-style assembly specially: https://github.com/llvm-mirror/clang/blob/master/include/clang/AST/Stmt.h#L1498-L1670
[12:14:50] *** Quits: Kroisse (Kroisse@7CF4064D.E3B51CAE.ECA1BB11.IP) (Ping timeout)
[12:15:57] *** Joins: Kroisse (Kroisse@7CF4064D.E3B51CAE.ECA1BB11.IP)
[12:19:21] *** Joins: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com)
[12:19:35] <dbaupp> FreeFull: yes, and there's a whitelist of allowed syscalls too, so you have to exploit one of them, or somehow get around the whitelist-checker
[12:19:52] <dbaupp> eddyb: ah!
[12:20:14] *** Joins: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP)
[12:20:32] *** Quits: hjr3 (hradtke@moz-64EFEFAE.cable.mindspring.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[12:21:12] *** Joins: canhtak (jeremy@moz-EF57C296.wl.t.ulaval.ca)
[12:21:17] *** Quits: steveklabnik (steveklabn@701D470.129BE976.EE0D0080.IP) (Quit: brb)
[12:21:37] *** Joins: steveklabnik (steveklabn@701D470.129BE976.EE0D0080.IP)
[12:22:29] *** Quits: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP) (Ping timeout)
[12:25:17] *** Joins: io2 (io2@moz-A6202C16.home.otenet.gr)
[12:26:39] *** Joins: maik (maik@moz-9C654BFC.dip0.t-ipconnect.de)
[12:29:20] <Ms2ger> error: internal compiler error: trans_lvalue reached fall-through case: ExprMethodCall(362988, @syntax::ast::Expr{id: 362987, node: ExprSelf, span: syntax::codemap::Span{lo: syntax::codemap::BytePos(2417292u), hi: syntax::codemap::BytePos(2417297u), expn_info: None}}, syntax::ast::Ident{name: 3482u, ctxt: 0u}, ~[], ~[], NoSugar)
[12:29:28] * Ms2ger wants an ICE badge
[12:30:06] <FreeFull> No compiler is foolproof
[12:30:13] <FreeFull> Even GHC gets weird closure errors
[12:30:33] <FreeFull> I guess a BF compiler could be perfect
[12:31:18] * dbaupp takes a badge out of his freezer and gives it to Ms2ger
[12:31:22] *** Joins: fgb (fgb@moz-EF8ABD54.hsd1.ma.comcast.net)
[12:31:31] <Ms2ger> Thank you, kind sir!
[12:32:41] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[12:32:50] <eddyb> !define ICE
[12:33:31] <eddyb> Ms2ger: what does it mean? I've seen in once, in the fix for the static packed structures
[12:33:44] <steveklabnik> itnernal compiler error
[12:33:47] <steveklabnik> internal
[12:34:05] <steveklabnik> ideally, Rust should _never_ ICE. If you can get rustc to ICE, it's a bug.
[12:34:32] <Ms2ger> But it's not too hard ;)
[12:34:39] <steveklabnik> it used to be way easier
[12:34:55] <eddyb> steveklabnik: ah, thanks, I couldn't the see the simplest acronym possible :))
[12:35:11] <eddyb> is there a rustc fuzzer yet?
[12:35:12] *** Quits: Earnestly (earnest@moz-BE290A2B.dyn.plus.net) (Ping timeout)
[12:35:22] <dbaupp> there used to be one
[12:35:32] <eddyb> but the language got too smart?
[12:35:46] <dbaupp> but it got removed because the language was moving too fast and keeping it up to date was too hard
[12:35:52] <kimundi> More like, the fuzzer got used to infrequently and was a constant maintanance burden
[12:36:41] *** Quits: jaen (jaen@moz-55AE6C19.eduroam.elte.hu) (Ping timeout)
[12:37:08] <eddyb> dbaupp: looks like jackpot to me https://github.com/llvm-mirror/clang/blob/c53143cc5f4edbd0490eefa9ecc1de4f9c24d8dd/lib/CodeGen/CGStmt.cpp#L1377-L1409
[12:37:23] <eddyb> (ignore the hash, it was open from github search)
[12:38:24] *** Joins: BitPuffin (isak@moz-98F8BF74.cust.tele2.se)
[12:44:03] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[12:45:09] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[12:47:44] <eddyb> dbaupp: so this needs the same transform https://github.com/mozilla/rust/blob/master/src/librustc/middle/trans/asm.rs#L27-L143
[12:53:42] <eddyb> dbaupp: hmm https://github.com/llvm-mirror/clang/blob/master/lib/Basic/Targets.cpp#L2861-L2879
[12:58:17] <eddyb> rusti: unsafe { let (val, port) = (0u32, 0u16); asm!("out $0, $1" :: "{ax}" (val), "{dx}" (port)); }
[12:58:18] -rusti- ()
[12:58:22] <eddyb> dbaupp: O
[12:58:41] <eddyb> dbaupp: err. I've tested this and it seems to promote ax to eax based on the size of val
[13:00:24] *** Quits: steveklabnik (steveklabn@701D470.129BE976.EE0D0080.IP) (Ping timeout)
[13:00:29] *** Joins: steveklabnik (steveklabn@701D470.129BE976.EE0D0080.IP)
[13:00:36] <eddyb> dbaupp: and it changes ax to al when it's 0u8. problem fixed :P
[13:01:32] *** Joins: jaen (jaen@701D470.129BE976.EE0D0080.IP)
[13:03:05] <eddyb> btw, who's responsible for the rust katepart syntax file? there's a few problems
[13:03:43] <steveklabnik> send a pull!
[13:03:44] <steveklabnik> :)
[13:03:49] <benh> I don't expect the various editor thingies are actively maintained
[13:04:06] <benh> If you can add raw string literals to whatever editor you use, that'd be great, too, by the way :v
[13:04:43] <eddyb> steveklabnik: I wanted to discuss things first before I go hulk on it. the main problem is that whoever wrote it used custom styles, which makes it stand apart from other languages
[13:04:55] <steveklabnik> gotcha
[13:05:22] <kimundi> Yeah, I've also noticed how my kate slowly drifted apart from current rust in the last few months ... :)
[13:05:23] <eddyb> orange instead of gray, brighter red that makes my eyes bleed
[13:06:24] <eddyb> but I have to figure first how to stop kdevelop from partially parsing it as C++
[13:06:32] <steveklabnik> if you check out github
[13:06:36] <steveklabnik> https://github.com/mozilla/rust/blob/master/src/etc/kate/rust.xml
[13:06:38] <steveklabnik> 7 contributors
[13:06:46] <steveklabnik> counting bors
[13:07:48] <benh> I keep editing the vim syntax file locally to make it less colorful :D
[13:07:50] <eddyb> who's vincent? https://github.com/mozilla/rust/commit/076dab92f73bb882e59e2f6a1ee6ba2b47bf6110
[13:08:19] <eddyb> (thanks git blame)
[13:08:55] *** Joins: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca)
[13:09:04] <eddyb> kimundi: kdevelop doesn't stop on syntax errors, so it successfully annotates parts of a rust file and it sprinkles some lines with red background
[13:09:37] <kimundi> eddyb: Which I guess is annoying?
[13:09:51] <eddyb> kimundi: combines with the weird colors? very
[13:10:19] *** Quits: fran_ (fran@moz-E6F26381.telecom.net.ar) (Ping timeout)
[13:13:00] <eddyb> *combined
[13:14:09] *** Joins: fran_ (fran@moz-D3193A50.telecom.net.ar)
[13:14:38] *** Quits: z0w0 (zack@moz-C877F2F7.lnse2.cha.bigpond.net.au) (Broken pipe)
[13:15:15] <eddyb> kimundi: oh, that explains it, text/x-csrc. is there any official kde4 mimetype fix for .rs files?
[13:15:31] <kimundi> No idea
[13:15:37] <ChrisMorgan> benh: the Vim highlighting can easily be overridden in your own config; you shouldn't be modifying the files in the Rust repository
[13:16:26] <benh> I copied out of the rust repository into ~/.vim/ and edited it there, I mean
[13:16:53] <benh> I suppose I should do it in .vimrc but I don't really know vim config files very well
[13:16:53] <ChrisMorgan> Don't do it that way; instead, override the highlighting rules.
[13:16:55] *** Joins: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP)
[13:17:36] <ChrisMorgan> Any places where you have `hi def ...`, that's the default highlighting. Override it with the same thing sans `def`.
[13:17:38] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[13:18:53] <eddyb> kimundi: it can be automated: xdg-mime install [--mode mode] [--novendor] mimetypes-file
[13:19:12] <eddyb> but there's no kde4 rust file icon :P
[13:19:56] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Quit: Leaving)
[13:20:45] *** Joins: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP)
[13:21:41] <eddyb> okay, it's relatively easy to do in systemsettings
[13:22:30] *** Joins: sockmister (Mibbit@moz-980DDEA5.columbus.res.rr.com)
[13:22:54] *** Quits: sockmister (Mibbit@moz-980DDEA5.columbus.res.rr.com) (Quit: http://www.mibbit.com ajax IRC Client)
[13:22:57] *** Quits: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP) (Ping timeout)
[13:24:20] *** Joins: novabyte (novabyte@91E276A6.70DD2D14.E7727734.IP)
[13:24:31] *** Joins: jviereck (Adium@moz-A0F658.dip0.t-ipconnect.de)
[13:24:46] <eddyb> kimundi: apparently it would be a good idea to fix this "officially" over at http://freedesktop.org/wiki/Software/shared-mime-info/
[13:26:08] *** Quits: sebcrozet (sebcrozet@moz-6DA639AF.w80-13.abo.wanadoo.fr) (Ping timeout)
[13:26:11] <kimundi> eddyb: Sounds like something you should talk about with the devs :) Integrating Rust better in existing software environments is certainly something that needs to get tackled
[13:26:20] *** Joins: fmt (fmt@moz-5769BD38.static.tpgi.com.au)
[13:27:06] <eddyb> kimundi: riiight. at this point I'm not sure who's a dev and who's not :P
[13:27:19] *** Quits: maik (maik@moz-9C654BFC.dip0.t-ipconnect.de) (Ping timeout)
[13:27:36] <kimundi> eddyb: A goof approximation is to start with those that have OP here :)
[13:27:42] <kimundi> Err, good*
[13:27:56] *** Joins: claude (Mibbit@moz-980DDEA5.columbus.res.rr.com)
[13:28:12] <kimundi> More specifically, nmatsakis and acrichto are both devs, whil kmc I think just is a op for channel maintanance?
[13:28:14] *** Joins: aegeaner (Aegeaner@B81B2974.1EBC9917.4446104D.IP)
[13:29:30] <benh> kmc is a servo dev at least
[13:29:36] *** Joins: Toussa (Mibbit@moz-546BEC58.adsl.alicedsl.de)
[13:29:37] *** Joins: madjar (Mibbit@moz-EFD4327A.compiletoi.net)
[13:29:38] <kimundi> ah, okay
[13:29:43] <madjar> Hello there
[13:29:48] <Toussa> Hi guys
[13:29:51] <kimundi> hi
[13:30:44] <madjar> Trying rust on this sunday afternoon, and I have a newbie question : why does std::run::process_output take a &[~str] and not a &[&str] ?
[13:31:11] *** Quits: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net) (Input/output error)
[13:31:27] *** Joins: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca)
[13:33:02] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[13:34:02] *** Quits: fmt (fmt@moz-5769BD38.static.tpgi.com.au) (Ping timeout)
[13:34:03] <steveklabnik> what is the right way to print with a format string? I keep forgetting
[13:34:21] <steveklabnik> fmt format println! println printfln!
[13:34:21] <steveklabnik> heh
[13:34:23] <steveklabnik> all blends together
[13:34:25] *** Joins: fmt (fmt@moz-5769BD38.static.tpgi.com.au)
[13:34:32] *** Quits: claude (Mibbit@moz-980DDEA5.columbus.res.rr.com) (Quit: http://www.mibbit.com ajax IRC Client)
[13:34:33] <benh> format! makes a string, println! uses format! to print to stdout
[13:34:39] <steveklabnik> thanks
[13:34:41] <benh> fmt, printfln re the old bits
[13:35:03] <benh> format! is documented in std::fmt or so
[13:35:11] <Toussa> madjar: i think its a lifetime thing
[13:35:11] <kimundi> madjar: Well, one issue is that that we can't deeply borrow
[13:35:37] <kimundi> madjar: AS in, to get a ~[&str] from a ~[~str] you need to allocate a new vector
[13:35:42] *** Joins: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net)
[13:35:53] <kimundi> However, we _can_ in principle solve that today with generics...
[13:36:19] <madjar> kimundi: you can'd deeply borrow ? Well, that's annoying
[13:36:25] <kimundi> As in, change the function to take <S: Str> &[S]
[13:37:06] <eddyb> madjar: I can't see a way that could be free
[13:37:45] <kimundi> It could be free if &T and ~T would always have the same memory layout, but that is unlikely to be the case
[13:38:30] <Toussa> i have a small problem of understanding an issue, i have this code
[13:38:34] <kimundi> Also, it wouldn't scale well to other types
[13:38:36] <Toussa> http://mibpaste.com/DZk01V 
[13:38:53] <Toussa> which lead to: cannot move out of dereference of & pointer
[13:38:55] <benh> ChrisMorgan: I can't figure out how to not make function names cyan :(
[13:38:55] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Ping timeout)
[13:38:59] <kimundi> As it could only get implemented for "structural" types like tuples or vectors...
[13:39:17] <benh> I'm trying to put things like hi link rustFunction rustIdentifier
[13:39:25] *** Quits: jaen (jaen@701D470.129BE976.EE0D0080.IP) (Ping timeout)
[13:39:25] <benh> into my vimrc
[13:39:33] <kimundi> Toussa: You need &mut self probably
[13:39:56] *** Joins: gareth0 (gareth0@moz-EE93C7BA.dynamic.dsl.as9105.com)
[13:40:19] <kimundi> Toussa: Or return a Option<&'a BinaryNode>, with 'a being the lifetime of self
[13:40:20] *** Quits: gareth0 (gareth0@moz-EE93C7BA.dynamic.dsl.as9105.com) (Connection reset by peer)
[13:40:27] <ChrisMorgan> benh: that's rustFuncName
[13:40:44] <Toussa> the problem is my self.left
[13:40:58] <ChrisMorgan> And rustFuncCall
[13:40:59] <benh> Still not doing anything, is "anywhere in ~/.vimrc" the right place?
[13:41:05] <Toussa> left is a Option<~BinaryNode>
[13:41:15] <ChrisMorgan> No, it should be in ~/.vim/syntax/rust.vim
[13:41:24] *** Quits: mikefletcher (michaelfle@DA60130B.4474880.28B68B9E.IP) (Quit: Leaving.)
[13:41:26] <Toussa> so doing self.left.unwrap() move out the pointer
[13:41:38] <madjar> kimundi: so, for example, the problem could be solved by making all functions of run.rs generics ?
[13:41:49] *** Joins: mikefletcher (michaelfle@DA60130B.4474880.28B68B9E.IP)
[13:41:55] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[13:41:56] <benh> oh but that's where I symlinked the rust.vim from the repository into and I thought you said I shouldn't edit it there :(
[13:42:14] <ChrisMorgan> benh: OK then, ~/.vim/after/syntax/rust.vim will do as well
[13:42:21] <kimundi> Toussa: right, can't do that through an &self reference. With &mut self, you could do self.left.take(), which would set self.left to None and give you the Option
[13:42:33] <benh> rust also comes with a file to put in there though :)
[13:42:52] <ChrisMorgan> benh: you're better to actually add the path to src/etc/vim to 'runtimepath'
[13:43:01] <benh> ok, that sounds good
[13:43:04] <ChrisMorgan> set runtimepath+=.../src/etc/vim
[13:43:12] <kimundi> madjar: Yeah, but I remember that someone wanted to do that months ago... Either there where some issues, or it's already done today and your using an old version :)
[13:43:21] * kimundi looks how the current state actually is
[13:43:33] <eddyb> src/io/mod.rs:18:19: 18:27 error: attempt to bound type parameter with a nonexistent trait `Unsigned`
[13:43:41] <eddyb> that's what I get for no_std :(
[13:44:37] <kimundi> Need to import the num stuff to then :P
[13:44:39] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Ping timeout)
[13:44:52] <Toussa> kimundi: a right a saw that on the doc, the problem is i dont want to move out the object, since is has to stay here, should i do a match then (even i i check before if its a None or not?)
[13:45:09] <eddyb> kimundi: this is barebones :(
[13:45:57] <kimundi> Toussa: Well you can't return self.left without moving left out of self
[13:46:11] <eddyb> outport is actually fine, but inport requires casting 0 to T: src/io/mod.rs:24:25: 24:26 error: mismatched types: expected `T` but found `<VI0>` (expected type parameter but found integral variable)
[13:46:58] <Toussa> kimundi: i just want to call a function on the pointer inside the option, should i still move it out, call, and move back?
[13:47:07] <madjar> kimundi: so, bug tracker archeology it is !
[13:47:14] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[13:47:52] <kimundi> Toussa: If the function does not take self by value, but by reference, then you could rewrite find_left to return an reference to the BinaryNode instead
[13:48:03] <kimundi> Toussa: Is BinaryNode a trait, or a struct?
[13:48:19] <kimundi> (Not that that changes much)
[13:48:32] *** Parts: aegeaner (Aegeaner@B81B2974.1EBC9917.4446104D.IP) ()
[13:48:35] <Toussa> kimundi: its a struct, but i saw option.get_ref(), which could solve my problem
[13:48:45] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[13:48:48] <madjar> kimundi: thoses arguments are stored in a structure, I guess that's the end of it
[13:48:54] <kimundi> DO you use current master or 0.8?
[13:49:10] <eddyb> kimundi: I created my own trait, implemented by u8, u16 and u32, but I still can't cast 0 to it :(
[13:49:35] <kimundi> eddyb: Well, casting will never work for that
[13:50:03] <kimundi> eddyb: Need to write a assoziated fuction like "from_uint(uint) -> Self"
[13:50:20] <Toussa> kimundi: ok i got what you mean, my return self.left sucks
[13:50:36] <eddyb> kimundi: seriously :(?
[13:50:59] <kimundi> eddyb: It's how traits work? Maybe I misunderstand your problem
[13:51:05] <Toussa> kimundi: thats why i need to return a reference with the lifetime of self.
[13:51:55] <eddyb> kimundi: I wanted to use a trait to bound the possible types to 3 integral ones so casting 0 would work, but I guess I was silly
[13:55:36] <eddyb> rusti: unsafe { let mut val = 0u32; let port = 0u16; asm!("in $1, $0" :: "={ax}" (val), "{dx}" (port)); }
[13:55:43] -rusti- pastebinned 6 lines of output: http://ix.io/8rI
[13:55:50] <kimundi> eddyb: You have two options: Implement a trait for those three types so that they can be used interchangably, which means haveing constructor functions for initilaizing them with a specific value of a specific type, or implement a trait that allows you to cast all three types to, eg, u64 and then keep working with that
[13:56:15] <eddyb> kimundi: I did the former
[13:56:21] <kimundi> Alright
[13:57:44] <eddyb> aaah, rustc is right, I didn't place val in the right part of the inline asm specifiers
[13:57:58] *** Joins: gareth0 (gareth0@moz-EE93C7BA.dynamic.dsl.as9105.com)
[13:58:34] *** Quits: gareth0 (gareth0@moz-EE93C7BA.dynamic.dsl.as9105.com) (Input/output error)
[13:59:18] *** Quits: fgb (fgb@moz-EF8ABD54.hsd1.ma.comcast.net) (Quit: Leaving)
[13:59:59] <eddyb> rusti: Unsigned::from_uint(0) as u16
[14:00:02] -rusti- pastebinned 7 lines of output: http://ix.io/8rJ
[14:00:57] <eddyb> hmm, how is it done in std? I want to leave the right comment for posterity :P
[14:00:59] <kimundi> rusti: std::num::Unsigned::from_uint(0) as u16
[14:01:01] -rusti- pastebinned 7 lines of output: http://ix.io/8rK
[14:01:14] <eddyb> rusti: ::std::num::Unsigned::from_uint(0) as u16
[14:01:17] -rusti- pastebinned 7 lines of output: http://ix.io/8rL
[14:01:24] <eddyb> okay....
[14:01:28] *** Quits: madjar (Mibbit@moz-EFD4327A.compiletoi.net) (Quit: http://www.mibbit.com ajax IRC Client)
[14:01:35] <kimundi> AH, Unsigned does not have any functions
[14:01:43] *** Quits: steveklabnik (steveklabn@701D470.129BE976.EE0D0080.IP) (Ping timeout)
[14:02:00] <eddyb> kimundi: Integer + Unsigned, and Integer for the function?
[14:02:16] <eddyb> rusti: Integer::from_uint(0) as u16
[14:02:18] -rusti- pastebinned 7 lines of output: http://ix.io/8rM
[14:02:22] *** Joins: Kruppe (user@moz-EE1E894A.home3.cgocable.net)
[14:02:26] <kimundi> Integer has just calculation functions
[14:02:32] <eddyb> this counts as spamming already :(
[14:02:34] <kimundi> Need FromPrimitve
[14:03:14] <eddyb> http://static.rust-lang.org/doc/master/std/num/trait.FromPrimitive.html
[14:03:18] <kimundi> rusti: let v: Option<i8> = std::num::FromPrimitve::from_uint(0); v
[14:03:21] -rusti- pastebinned 13 lines of output: http://ix.io/8rN
[14:04:07] <kimundi> rusti: let v: Option<i8> = std::num::FromPrimitive::from_uint(0); v
[14:04:08] -rusti- Some(0i8)
[14:04:15] <kimundi> there
[14:04:21] <kimundi> (should also spell it right :P)
[14:04:25] *** Quits: barosl (barosl@3DE683B6.E551553C.7544CABF.IP) (Quit: 랜덤은 쇠퇴했습니다.)
[14:04:54] <myname> nah, distance of 1 is fine
[14:05:36] <eddyb> kimundi: so I can't restrict the specialization of a function in a way that I can use the type as one of the three types I want it working for?
[14:05:41] *** Joins: maik (maik@moz-9C654BFC.dip0.t-ipconnect.de)
[14:05:52] <Toussa> kimundi: i actually solved my problem thanks to your advices, thanks a lot
[14:05:57] <kimundi> Anyway, T: Unsigned + FromPrimitive will restrict to uint, u8, 16,u32, u64 in the stdlib and allow you to construct these
[14:06:04] <eddyb> s/working/instantiated/
[14:06:09] <kimundi> eddyb: You can
[14:06:37] *** Joins: jaen (jaen@moz-55AE6C19.eduroam.elte.hu)
[14:06:44] <eddyb> kimundi: is there an "or" for type bounds?
[14:07:04] <myname> eddyb: how should that work?
[14:07:28] <myname> i.e. if you are saying "i know both can do $method" you can use traits
[14:08:00] <eddyb> fn inport<T : u8 | u16 | u32>(port: u16) -> T {let mut val : T = 0; ...}
[14:08:17] <kimundi> rusti: trait Us {} impl Us for uint {} impl Us for u8 {} fn foo<T: Us+::std::num::FromPrimitive>() -> T { ::std::num::FromPrimitive::from_uint(5).unwrap() } foo::<u8>()
[14:08:18] -rusti- 5u8
[14:08:33] <kimundi> That restricts to uint and u8 for example
[14:08:45] <myname> what's the problem with Unsigned+FromPrimitve?
[14:09:09] <kimundi> eddyb: T: ... are _trait_ bounds, not _type_ bounds :P
[14:09:15] <eddyb> sorry :(
[14:09:33] <kimundi> myname: More than the three types he wants, and also he is not using the stdlib
[14:09:37] <eddyb> myname: no_std, so I'd have to implement my own, and the instructions are only defined for those 3 types I mentioned
[14:10:16] <eddyb> kimundi: so I can't do this without a trait method? that's what i want to know
[14:10:48] <kimundi> eddyb: Correct. But it doesn't need to be a method, and it also doesn'T cost anything with inlining
[14:10:54] *** Quits: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca) (Input/output error)
[14:11:27] <eddyb> kimundi: I wanted to say function. and I know it doesn't cost anything, but in my case it looks hacky
[14:12:16] <kimundi> rusti: trait Us { fn new(uint) -> Self; } impl Us for uint { fn new(n: uint) -> uint { n } } impl Us for u8 { fn new(n: uint) -> u8 { n as uint } } let x: u8 = Us::new(45u); let y: uint = Us::new(98u); (x, y)
[14:12:18] -rusti- pastebinned 7 lines of output: http://ix.io/8rP
[14:12:40] <kimundi> rusti: trait Us { fn new(uint) -> Self; } impl Us for uint { fn new(n: uint) -> uint { n } } impl Us for u8 { fn new(n: uint) -> u8 { n as u8 } } let x: u8 = Us::new(45u); let y: uint = Us::new(98u); (x, y)
[14:12:41] -rusti- (45u8, 98u)
[14:12:58] <eddyb> oooh, new. suddenly it's less hacky :P
[14:13:25] <kimundi> Well, you can use any function name there :P
[14:13:58] <eddyb> I had a zero function, with the body {0} for all implementations
[14:14:00] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[14:14:16] <kimundi> Yeah, that's also a way to do it if you only care about the value zero
[14:14:52] <myname> you could define your own unsigned int witz zero and s :p
[14:15:23] <eddyb> that's what I care about. only because rustc can't tell I'm writing to val :(
[14:15:42] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[14:15:58] <eddyb> rusti: unsafe { let mut val; let port = 0u16; asm!("in $1, $0" : "={ax}" (val) : "{dx}" (port)); }
[14:16:00] -rusti- pastebinned 7 lines of output: http://ix.io/8rQ
[14:16:19] <eddyb> rusti: unsafe { let mut val : u32; let port = 0u16; asm!("in $1, $0" : "={ax}" (val) : "{dx}" (port)); }
[14:16:23] <maik> kimundi, u are also German right? Did you switch to QWERTY?
[14:16:27] -rusti- failed to pastebin 9 lines of output
[14:16:33] <eddyb> oh c'mon...
[14:16:39] *** Quits: jaen (jaen@moz-55AE6C19.eduroam.elte.hu) (Ping timeout)
[14:16:45] <eddyb> rusti: unsafe { let mut val : u32; let port = 0u16; asm!("in $1, $0" : "={ax}" (val) : "{dx}" (port)); }
[14:16:47] -rusti- pastebinned 9 lines of output: http://ix.io/8rR
[14:16:52] *** Joins: nwmcsween (nwmcsween@E0025B86.51EE1362.3655BBF5.IP)
[14:17:21] <eddyb> not sure if this can be considered a bug or not, but it requires me to initialize val although it is only written to
[14:17:34] <kimundi> maik: I switched to Neo in theory, but right now I'm using qwertz again because I was too lazy to configure my archlinux to allow easy switching between both yet :P
[14:18:22] <eddyb> > German. Neo.
[14:19:10] <eddyb> so, checker being overzealous with inline asm, or should I get back to having a trait?
[14:19:38] <maik> kimundi, haha
[14:20:10] <kimundi> No idea, the moment you start using asm! is the moment I'm losing any understanding about what's going to happen ;)
[14:21:09] *** Quits: nwmcsween (nwmcsween@E0025B86.51EE1362.3655BBF5.IP) (Ping timeout)
[14:21:14] *** Joins: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP)
[14:21:23] *** Joins: steveklabnik (steveklabn@701D470.129BE976.EE0D0080.IP)
[14:21:37] <eddyb> I'm not that good with constraints, but the placement of val (after the first colon) and the = before {ax} should tell rustc that the value is written to
[14:22:14] <eddyb> (it's like giving by reference to asm)
[14:22:36] *** Joins: lfox (lfox@moz-F9C0E858.nycmny.east.verizon.net)
[14:23:22] *** Quits: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP) (Ping timeout)
[14:23:43] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[14:24:23] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[14:27:50] <eddyb> kimundi: rustc bug/unhandled constraint modifier: http://gcc.gnu.org/onlinedocs/gcc/Modifiers.html = means val is only written to and the previous value is never read
[14:27:54] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[14:28:22] *** Quits: fran_ (fran@moz-D3193A50.telecom.net.ar) (Ping timeout)
[14:29:29] <kimundi> I'd say open an issue about that then?
[14:30:17] *** Joins: anshin (anshin@CD85F10D.F21429E2.354459FA.IP)
[14:32:12] *** Quits: timot (timot@moz-D742E434.mobile.tre.se) (Connection reset by peer)
[14:32:39] *** Quits: steveklabnik (steveklabn@701D470.129BE976.EE0D0080.IP) (Ping timeout)
[14:32:53] *** Joins: fran_ (fran@moz-20FC5A12.telecom.net.ar)
[14:33:15] *** Joins: timot (timot@moz-D742E434.mobile.tre.se)
[14:33:40] *** Joins: kvark (Mibbit@moz-F30E0473.cpe.net.cable.rogers.com)
[14:33:41] *** Joins: steveklabnik (steveklabn@701D470.129BE976.EE0D0080.IP)
[14:33:50] *** Joins: jaen (jaen@701D470.129BE976.EE0D0080.IP)
[14:34:50] <kvark> Supposing I've got a struct like that: struct A{foo : Option<~fn(&mut A)>}
[14:35:13] <kvark> How do I call "foo" on self in a method of A?
[14:35:52] <kimundi> I think you have to move the ~fn out of self irst
[14:36:05] <kvark> temporarily?
[14:36:20] <kimundi> at least, yeah
[14:36:51] <kvark> so I swap it with some other function, execute, and then swap again? this sounds like a good idea, even if slightly convoluted :)
[14:37:34] <kimundi> let f = a.foo.take().unwrap(); f(&mut a); a.foo = Some(f); // something like that I guess
[14:38:01] *** Joins: tefter (tefter@B5D119DC.B856A0A1.73804765.IP)
[14:38:09] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[14:39:17] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[14:39:40] <benh> I don't think that's necessary?
[14:40:06] *** Joins: sebcrozet (sebcrozet@moz-6DA639AF.w80-13.abo.wanadoo.fr)
[14:40:15] <kvark> kimundi: "a.foo.take().unwrap()" gives me "cannot move out of dereference of & pointer"... I guess I'll need to swap it somehow
[14:40:17] <benh> http://ix.io/8rT something like this?
[14:40:55] *** Quits: canhtak (jeremy@moz-EF57C296.wl.t.ulaval.ca) (Quit: canhtak)
[14:41:05] <kvark> benh: that indeed compiles
[14:41:48] <kimundi> hu, I could've sworn that would not be possible. Well if it works, yay ;)
[14:42:40] <myname> what the hell
[14:42:48] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[14:43:07] <kvark> I don't get why it works either... isn't get_ref supposed to freeze "self"?
[14:43:51] <myname> so it prints itself?
[14:44:42] <kvark> in benh variant - yes
[14:44:56] *** Quits: mikezaby (mikezaby@moz-908EA8DE.home.otenet.gr) (Input/output error)
[14:45:07] <myname> i... it just looks wrong
[14:45:34] *** Joins: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[14:45:36] <benh> Looks wrong to me too - should probably print ~fn, not fn
[14:45:44] *** Quits: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Quit: G'night everynyan~!)
[14:46:08] <myname> i'm talking about that "apply a function to onseself" thing
[14:46:51] *** Quits: lfox (lfox@moz-F9C0E858.nycmny.east.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[14:47:08] <benh> kvark: I'm not sure why it works either. It stops working if you try to split up call() into let r = ...; (*r)(self); or something like that
[14:47:53] <kvark> benh: yeah... and my actual code is more complicated that the test case, so I'm still unable to compile stuff...
[14:48:23] <kvark> what I get is "cannot borrow `*self` as mutable because it is also borrowed as immutable"
[14:48:46] <kvark> and indeed when I access the function I have to borrow self as something
[14:48:57] *** Quits: jaen (jaen@701D470.129BE976.EE0D0080.IP) (Ping timeout)
[14:49:38] <benh> yeah...
[14:50:36] <kvark> In other words, if we could modify the test case to split up call(), I'd be able to use it
[14:51:18] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[14:51:51] *** Quits: Kruppe (user@moz-EE1E894A.home3.cgocable.net) (Ping timeout)
[14:52:18] <benh> It's probably closer to what kimundi suggested
[14:52:34] *** Joins: cubic_ (cubic@moz-FE5AD6C7.mc.videotron.ca)
[14:52:51] <kvark> please see "actual-case.rs" attached to https://gist.github.com/kvark/6952791
[14:53:13] *** Quits: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca) (Ping timeout)
[14:53:35] <benh> ( http://ix.io/8rV )
[14:53:41] <kvark> I don't think I can even swap it with anything... since it's borrowed
[14:53:43] <eddyb> could anyone help me with some rustc internals?
[14:55:45] <kvark> benh: wow,
[14:56:51] <eddyb> where is an assignment processed so that the uninitialized value isn't live_on_entry here (I hope I'm making the right assumptions)? https://github.com/mozilla/rust/blob/master/src/librustc/middle/liveness.rs#L691-L704
[14:57:56] <benh> kvark: Does that help? 
[14:58:08] <benh> I'm not sure whether fun is the Option in your example
[15:00:04] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[15:00:25] <kvark> benh: It helps a bit, though "fun" is definitely not in Option... and I access the function as immutable at the moment, so can't swap/take it out... unless I hack it to be mutable
[15:01:24] <kvark> benh: I'm thinking it would be architecturally right to just separate the owner of "fun" with the target object of "fun", in which case no conflict happens
[15:03:33] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[15:05:29] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[15:06:18] <benh> Kind of annoying that that should be necessary :/
[15:08:40] <eddyb> https://github.com/mozilla/rust/blob/master/src/librustc/middle/liveness.rs#L1234-L1236 found what I need to fix :D
[15:09:30] <eddyb> time to setup my rust dev environment
[15:09:46] *** Joins: zslayton (Mibbit@moz-693C0D64.nyc.res.rr.com)
[15:17:16] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[15:19:40] *** Quits: jviereck (Adium@moz-A0F658.dip0.t-ipconnect.de) (Quit: Leaving.)
[15:20:02] *** Quits: lbergstrom (Adium@moz-5D8E4B14.lightspeed.cicril.sbcglobal.net) (Quit: Leaving.)
[15:21:43] *** Quits: qrpth (andreas@moz-C54F6246.dyn.estpak.ee) (Ping timeout)
[15:21:46] *** Joins: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP)
[15:23:56] *** Quits: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP) (Ping timeout)
[15:24:27] *** Quits: steveklabnik (steveklabn@701D470.129BE976.EE0D0080.IP) (Ping timeout)
[15:24:52] *** jorendorff_away is now known as jorendorff
[15:25:42] *** Quits: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP) (Ping timeout)
[15:25:56] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[15:27:08] *** Joins: qrpth (andreas@moz-C54F6246.dyn.estpak.ee)
[15:28:54] *** Quits: fran_ (fran@moz-20FC5A12.telecom.net.ar) (Ping timeout)
[15:31:50] *** Joins: canhtak (jeremy@moz-EF57C296.wl.t.ulaval.ca)
[15:32:02] *** Parts: canhtak (jeremy@moz-EF57C296.wl.t.ulaval.ca) ()
[15:32:13] *** Joins: fran_ (fran@moz-957B301B.telecom.net.ar)
[15:32:29] *** Joins: canhtak (jeremy@moz-EF57C296.wl.t.ulaval.ca)
[15:34:45] *** Joins: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[15:34:51] *** Quits: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Client exited)
[15:36:52] *** Joins: kurisumasu (queen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[15:38:23] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[15:38:37] <eddyb> can I use system rust as stage0 and build only stage1?
[15:39:45] *** Quits: maik (maik@moz-9C654BFC.dip0.t-ipconnect.de) (Ping timeout)
[15:40:18] <klutzy> configure --local-rust-root=/path/to/system/rust and make rustc-stage1?
[15:40:28] <klutzy> I'm not totally sure for former one
[15:42:48] *** Joins: mindcat (mindcat@53D928E9.EEF2A000.F956842C.IP)
[15:42:49] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[15:43:33] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[15:43:40] <eddyb> why is it looking for node.js? is something in rust using node?
[15:44:13] <benh> the docs are generated via a process that involves node
[15:44:23] <kimundi> some parts of the rust documentation process is/was using node.js
[15:44:45] <kimundi> In general though half the things configure looks for are not really used anymore
[15:44:53] <eddyb> ah, that explains it
[15:44:54] <benh> can't believe no one has released anything under the name node.rs
[15:45:20] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[15:45:23] *** Joins: aegeaner (Aegeaner@B81B2974.1EBC9917.4446104D.IP)
[15:45:30] <benh> kimundi: iirc i had to install node to build the docs to find out that the pdf generation process didn't seem to like unicode glyphs
[15:45:32] <kimundi> And rewriting the makefile in rustpkg is a goal
[15:45:41] <kimundi> haha
[15:46:02] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Ping timeout)
[15:46:07] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[15:46:35] <eddyb> benh: hmm, it's possible to do io in a similar fashion to node.js (having the same abstraction layer helps)
[15:46:59] *** Joins: Mathuin (Mibbit@moz-72D4363C.rev.sfr.net)
[15:47:03] <Mathuin> hi
[15:47:10] <eddyb> but it would be mostly an aesthetic hack
[15:47:14] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[15:47:19] *** Joins: jordyd (jordyd@moz-FAF29139.seg36.ucf.edu)
[15:47:29] *** Quits: timot (timot@moz-D742E434.mobile.tre.se) (Ping timeout)
[15:47:31] *** Joins: timot_ (timot@moz-B7B80F79.mobile.tre.se)
[15:48:04] <eddyb> klutzy: it still downloads stage0
[15:48:10] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[15:48:20] *** Parts: aegeaner (Aegeaner@B81B2974.1EBC9917.4446104D.IP) ()
[15:48:52] <mindcat> rusti: 2^90-1
[15:48:52] -rusti- 91
[15:49:18] <Mathuin> sorry if it's a dumb question, but does Rust feature **optional** laziness somewhere ?
[15:50:03] <mindcat> how calculate 2^90-1 in rust?
[15:50:14] *** Joins: siritori (siritori@moz-E54AAD3B.east.global.crust-r.net)
[15:50:17] <eddyb> rusti: pow(2, 90) - 1
[15:50:21] -rusti- pastebinned 7 lines of output: http://ix.io/8rZ
[15:50:36] <eddyb> mindcat: but it doesn't fit in a double, why do you want that number?
[15:50:41] <eddyb> mindcat: maybe you need a BigInt
[15:50:50] <mindcat> eddyb: yes, a bigint
[15:51:32] <myname> Mathuin: optional as opposed to nothing or as opposed to forced?
[15:51:41] <mindcat> eddyb: it just I want do this calculate, then I calculate this.
[15:51:43] <eddyb> mindcat: https://github.com/ahmadsalim/rust-bigint it's old though
[15:52:26] <eddyb> mindcat: here you go: http://static.rust-lang.org/doc/master/extra/bigint/index.html
[15:52:47] *** Joins: oberstet (quassel@moz-1F99C134.dynamic.mnet-online.de)
[15:53:00] <mindcat> eddyb: ok, thanks :D
[15:53:25] *** Joins: squiddy (squiddy@moz-8A4A4B84.adsl.alicedsl.de)
[15:54:05] <eddyb> rusti: 0.to_biguint()
[15:54:07] -rusti- pastebinned 7 lines of output: http://ix.io/8s0
[15:54:12] <mindcat> rusti: let mut a = 2 as u64; do 32.times { a = a * 2 };a
[15:54:13] -rusti- 8589934592u64
[15:54:41] <eddyb> 1 << 32
[15:54:50] <eddyb> rusti: 2 << 32
[15:54:51] -rusti- 8589934592
[15:55:07] <mindcat> rusti: let mut a = 2 as ::extra::bigint::BigUint; do 32.times { a = a * 2 };a
[15:55:10] -rusti- pastebinned 10 lines of output: http://ix.io/8s1
[15:55:18] <eddyb> as won't work
[15:55:42] <eddyb> mindcat: and your do is a bad idea, use left shift or pow
[15:55:58] *** Quits: GeneralMaximus (ankur@1A0FE27A.9EE11D7D.D2D1FAF0.IP) (Ping timeout)
[15:56:06] <eddyb> rusti: use extra::bigint::FromBigUint; 0.to_biguint()
[15:56:09] -rusti- pastebinned 10 lines of output: http://ix.io/8s2
[15:56:29] <eddyb> rusti: use extra::bigint::ToBigUint; 0.to_biguint()
[15:56:35] -rusti- pastebinned 37 lines of output: http://ix.io/8s3
[15:56:50] <eddyb> oh for crying out loud
[15:57:06] <eddyb> rusti: use extra::bigint::ToBigUint; 0u.to_biguint().unwrap()
[15:57:07] -rusti- extra::bigint::BigUint{data: ~[]}
[15:57:20] <eddyb> rusti: use extra::bigint::ToBigUint; 2u.to_biguint().unwrap() << 32
[15:57:21] -rusti- extra::bigint::BigUint{data: ~[0u32, 2u32]}
[15:57:43] <eddyb> rusti: use extra::bigint::ToBigUint; (1u.to_biguint().unwrap() << 192) - 1
[15:57:45] -rusti- pastebinned 7 lines of output: http://ix.io/8s5
[15:57:53] *** Joins: Kruppe (user@moz-EE1E894A.home3.cgocable.net)
[15:58:01] <eddyb> rusti: use extra::bigint::ToBigUint; (1u.to_biguint().unwrap() << 192) - 1u.to_biguint().unwrap()
[15:58:02] -rusti- extra::bigint::BigUint{data: ~[4294967295u32, 4294967295u32, 4294967295u32, 4294967295u32, 4294967295u32, 4294967295u32]}
[15:58:15] <eddyb> mindcat: ^^
[15:58:32] *** Quits: TD-Linux (TD-Linux@E338EB99.2B4F0AE0.A0A36CCE.IP) (Ping timeout)
[15:59:33] *** Quits: fran_ (fran@moz-957B301B.telecom.net.ar) (Ping timeout)
[15:59:36] *** Joins: GeneralMaximus (ankur@8FFCD1BD.90E3F4F6.D2D1FAF0.IP)
[16:01:05] <eddyb> klutzy: aaah, I was missing --enable-local-rust
[16:01:11] *** jorendorff is now known as jorendorff_away
[16:02:20] <Mathuin> myname: As opposed to forced
[16:02:21] *** Joins: TD-Linux (TD-Linux@E338EB99.2B4F0AE0.A0A36CCE.IP)
[16:02:32] <Mathuin> I mean, in OCaml you can have lazy lists
[16:02:38] *** Quits: silotis (quassel@moz-4B8C4631.oc.oc.cox.net) (Client exited)
[16:03:11] <Mathuin> but, you can have strict ones
[16:03:17] <Mathuin> you just need to choose
[16:03:37] *** Joins: fran_ (fran@moz-DCB31255.telecom.net.ar)
[16:03:41] <mindcat> eddyb: sorry, but I want see a big number
[16:03:58] <eddyb> mindcat: you probably need some to_str
[16:04:09] <kimundi> Mathuin: We don't have any kind of automaticv lazyness buildin anywhere. Everything are explicitl library functions, and you can implement it however you want
[16:04:12] <eddyb> rusti: use extra::bigint::ToBigUint; ((1u.to_biguint().unwrap() << 192) - 1u.to_biguint().unwrap()).to_str()
[16:04:13] -rusti- ~"6277101735386680763835789423207666416102355444464034512895"
[16:04:21] <eddyb> rusti: use extra::bigint::ToBigUint; ((1u.to_biguint().unwrap() << 192) - 1u.to_biguint().unwrap()).to_str(16)
[16:04:25] -rusti- pastebinned 7 lines of output: http://ix.io/8s6
[16:04:31] <mindcat> eddyb: oh, I didn't think out
[16:04:55] *** Joins: silotis (quassel@moz-4B8C4631.oc.oc.cox.net)
[16:04:56] <eddyb> are function arguments not overloadable?
[16:04:56] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[16:05:01] <kimundi> Mathuin: Like, our external iterators are lazy, but you can also operate on, eg, a vector directly
[16:05:07] <Mathuin> that's good
[16:05:10] <eddyb> rusti: use extra::bigint::ToBigUint; ((1u.to_biguint().unwrap() << 192) - 1u.to_biguint().unwrap()).to_str_with_base(16)
[16:05:17] -rusti- pastebinned 7 lines of output: http://ix.io/8s7
[16:05:34] <Mathuin> because in Haskell, lazyness can cause stack overflows if you don't think about what you're doing
[16:05:51] *** Joins: bheylin (brianheyli@moz-8255E94E.adsl.online.nl)
[16:05:58] <Mathuin> but in some cases, that's very useful, like in lazy bytestrings
[16:06:31] <kimundi> Mathuin: We aim to be as non-magic as possible :)
[16:06:32] <eddyb> rusti: use extra::bigint::ToBigUint; ((1u.to_biguint().unwrap() << 192) - 1u.to_biguint().unwrap()).to_str_radix(16)
[16:06:33] -rusti- ~"ffffffffffffffffffffffffffffffffffffffffffffffff"
[16:06:59] <mindcat> rusti: use extra::bigint::ToBigUint; ((1u.to_biguint().unwrap()  << 90) - 1u.to_biguint().unwrap()).to_str()
[16:07:00] -rusti- ~"1237940039285380274899124223"
[16:07:02] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[16:07:28] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[16:07:39] <mindcat> eddyb: thanks you solved my problem :D
[16:07:48] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[16:07:54] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[16:07:57] <Mathuin> good
[16:08:31] *** Quits: Toussa (Mibbit@moz-546BEC58.adsl.alicedsl.de) (Quit: http://www.mibbit.com ajax IRC Client)
[16:09:36] *** Joins: maik (maik@moz-9C654BFC.dip0.t-ipconnect.de)
[16:10:04] *** Quits: GeneralMaximus (ankur@8FFCD1BD.90E3F4F6.D2D1FAF0.IP) (Ping timeout)
[16:10:28] <Mathuin> thanks
[16:10:31] *** Quits: Mathuin (Mibbit@moz-72D4363C.rev.sfr.net) (Quit: http://www.mibbit.com ajax IRC Client)
[16:10:32] <bstrie> Mathuin: having not read most of that conversation, I can only assume that you have found some novel and practical use of causing haskell code to stack overflow :)
[16:11:22] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[16:11:23] * mindcat just see Mathuin gone and then bstrie speak.
[16:11:56] *** Quits: siritori (siritori@moz-E54AAD3B.east.global.crust-r.net) (Ping timeout)
[16:13:00] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[16:13:28] *** Joins: GeneralMaximus (ankur@C33F1E32.50CD76D5.274D17D6.IP)
[16:14:38] <eddyb> is gyp used anymore? and I recall seeing llvm patches in the main repo, are there any?
[16:14:42] *** Quits: kvark (Mibbit@moz-F30E0473.cpe.net.cable.rogers.com) (Quit: http://www.mibbit.com ajax IRC Client)
[16:15:04] *** Quits: bheylin (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin)
[16:15:30] *** Quits: Kruppe (user@moz-EE1E894A.home3.cgocable.net) (Ping timeout)
[16:15:43] *** Joins: jviereck (Adium@moz-A0F658.dip0.t-ipconnect.de)
[16:17:38] *** Quits: alonlevy (alon@moz-B0E66DB7.static.bezeqint.net) (Ping timeout)
[16:18:37] *** Quits: kurisumasu (queen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Quit: G'night everynyan~!)
[16:20:37] *** Joins: Kruppe (user@moz-EE1E894A.home3.cgocable.net)
[16:21:12] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[16:21:23] *** Joins: bheylin (brianheyli@moz-8255E94E.adsl.online.nl)
[16:22:15] *** Joins: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP)
[16:23:36] *** Quits: timot_ (timot@moz-B7B80F79.mobile.tre.se) (Ping timeout)
[16:24:20] *** Joins: timot_ (timot@moz-72D6E8C2.mobile.tre.se)
[16:24:27] *** Quits: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP) (Ping timeout)
[16:24:27] *** Joins: siritori (siritori@moz-E54AAD3B.east.global.crust-r.net)
[16:25:19] *** Quits: jviereck (Adium@moz-A0F658.dip0.t-ipconnect.de) (Quit: Leaving.)
[16:26:53] *** Joins: sankha93 (Instantbir@6F5BFBBD.85282E88.EFB84E89.IP)
[16:27:59] *** Quits: maik (maik@moz-9C654BFC.dip0.t-ipconnect.de) (Ping timeout)
[16:28:30] *** Quits: six600110 (six600110@moz-C663577C.hsd1.il.comcast.net) (Quit: Ex-Chat)
[16:28:37] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[16:29:22] *** Joins: six600110 (six600110@moz-C663577C.hsd1.il.comcast.net)
[16:29:22] *** Quits: dsirenko (mitra@8E712A0.54C21BA0.9F317420.IP) (Ping timeout)
[16:32:40] *** Quits: eddyb (eddy@3C6E2DBB.FFB4E060.A5830293.IP) (Ping timeout)
[16:34:02] <jld> rusti: static S: i32 = 1 << 32; enum E { V = S } fn main() { assert_eq!(S as u64, V as u64); }
[16:34:03] -rusti- ()
[16:34:09] <jld> ...huh.
[16:35:31] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[16:35:37] *** Joins: maik (maik@moz-9C654BFC.dip0.t-ipconnect.de)
[16:36:29] *** Joins: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP)
[16:36:40] *** Joins: eddyb (eddy@3C6E2DBB.FFB4E060.A5830293.IP)
[16:37:13] <cmr> eddyb: gyp is used for libuv. we still have llvm patches, yes.
[16:37:30] <cmr> kimundi: no? :P
[16:37:42] <jld> rusti: static S: i32 = 1 << 32; static T: i32 = S >> 16; fn main() { assert_eq!(T, S >> 16); }
[16:37:43] -rusti- ()
[16:38:06] <kimundi> cmr: hm? ... Ah, haha, yeah
[16:39:04] *** Joins: [squiddy] (squiddy@moz-8A4A4B84.adsl.alicedsl.de)
[16:39:17] <jld> *In*teresting.  So if I need to bisect that, I could maybe start from rusti's version.
[16:39:29] <cmr> rusti: version
[16:39:31] -rusti- "rustc 0.9-pre (80878ff 2013-10-11 12:21:20 -0700)"
[16:39:42] *** Quits: squiddy (squiddy@moz-8A4A4B84.adsl.alicedsl.de) (Ping timeout)
[16:39:58] <cmr> jld: I have every pull since sometime between 0.5 and 0.6 built, if you can make a simple testcase :)
[16:40:15] <strcat> rusti: version
[16:40:16] -rusti- "rustc 0.9-pre (c6e3501 2013-10-12 07:26:20 -0700)"
[16:40:22] <strcat> rusti: static S: i32 = 1 << 32; enum E { V = S } fn main() { assert_eq!(S as u64, V as u64); }
[16:40:23] -rusti- ()
[16:40:27] *** Quits: Kruppe (user@moz-EE1E894A.home3.cgocable.net) (Ping timeout)
[16:41:03] <strcat> rusti: static S: i32 = 1 << 32; enum E { V = S } fn main() { assert_eq!(S as u64, V as u64); }
[16:41:04] -rusti- ()
[16:41:19] <strcat> rusti: static S: i32 = 1 << 32; enum E { V = S } fn main() { assert_eq!(S as u64, V as u64); }
[16:41:19] -rusti- ()
[16:41:38] <strcat> jld: that's all the way back to 0.7.2559.g917d3c2-1
[16:41:53] *** Quits: GeneralMaximus (ankur@C33F1E32.50CD76D5.274D17D6.IP) (Ping timeout)
[16:42:14] <strcat> 0.7-2559-g917d3c2
[16:43:15] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Ping timeout)
[16:43:42] *** Joins: glosoli (glosoli@moz-72C60525.static.zebra.lt)
[16:44:22] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[16:44:25] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[16:45:11] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[16:51:12] <eddyb> oooh, the actual feature is in LLVM http://llvm.org/releases/3.3/docs/SegmentedStacks.html
[16:55:39] *** Joins: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr)
[16:56:31] <osa1> at some point I had an error saying that I need to implement to_bytes for my data type, I'm doing something wrong, right?
[16:56:45] <osa1> what kind of pointer do I need to use just to return a new data type but give also the ownership
[16:56:47] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[16:57:00] <eddyb> cmr: I just saw this. I guess it's still TODO :( https://github.com/mozilla/rust/pull/8955
[16:57:01] <cmr> osa1: you don't use a pointer for that, just return a value.
[16:57:14] <adridu59> kimundi: ping
[16:57:15] <cmr> eddyb: yup, very much so.
[16:57:29] <osa1> cmr: but then I have to implement to_bytes, right?
[16:57:43] <cmr> osa1: no, you don't. do you have code you can show?
[16:57:50] <osa1> sure, 1 min
[16:58:29] <osa1> cmr: http://lpaste.net/94237
[16:58:38] <osa1> this fails with failed to find an implementation of trait std::to_bytes::IterBytes for RHS
[16:58:53] <eddyb> cmr: right now it requires this hack capable of summoning nasal demons https://github.com/pcmattman/rustic/blob/master/src/start.S#L40-L45
[16:59:07] <cmr> osa1: Yes, HashSet requires that the type implements IterBytes
[16:59:12] <adridu59> kimundi: would you be able to resurrect this? https://github.com/mozilla/rust/commit/a9dddbacde8e204ee7485bc11b5c23a06d57430d
[16:59:24] <adridu59> I thought it was cool to have
[16:59:29] *** Quits: bheylin (brianheyli@moz-8255E94E.adsl.online.nl) (Ping timeout)
[16:59:37] *** Quits: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[16:59:45] <cmr> eddyb: amusingly, I originally made that pr because I needed it for my own OS project ;)
[17:00:03] <eddyb> is it public?
[17:00:07] <cmr> I still plan on working on it, but my todo list is incredibly long.
[17:00:12] <cmr> https://github.com/cmr/cmoss
[17:00:14] <osa1> cmr: this is annoying ... do I really have to do that? any workarounds or something else?
[17:00:20] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[17:00:22] *** Joins: bheylin (brianheyli@moz-8255E94E.adsl.online.nl)
[17:00:33] <cmr> osa1: it uses IterBytes to hash the type, there's no way around it if you want to use HashSet
[17:00:49] <cmr> osa1: put #[deriving(IterBytes)] on RHS
[17:01:21] <eddyb> cmr: I could work with an arch-specific entry point (that would be the only function without a stack check), setting up GDT for the kernel TLS
[17:02:03] *** Quits: martndemus (martndemus@moz-A2C32059.upc-h.chello.nl) (Ping timeout)
[17:02:07] <osa1> cmr: yeah that worked. it's great to have this feature(I'm coming from Haskell :p)
[17:03:15] *** Joins: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca)
[17:03:54] <eddyb> cmr: right now I'm preparing a patch to fix liveness analysis of write-only inline asm outputs. because I don't want to use traits to initialize a never-read variable that is written by asm("in ...")
[17:04:06] *** Joins: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net)
[17:04:43] <cmr> eddyb: std::unstable::intrinsics::uninit()
[17:05:01] <eddyb> what's that for?
[17:05:04] <cmr> that might not be what you want
[17:05:20] <eddyb> no, it's a missing analysis case
[17:05:23] <cmr> ok
[17:05:40] <eddyb> https://github.com/mozilla/rust/blob/master/src/librustc/middle/liveness.rs#L1234-L1236 should care about = from http://gcc.gnu.org/onlinedocs/gcc/Modifiers.html
[17:05:46] *** Joins: mikezaby (mikezaby@moz-908EA8DE.home.otenet.gr)
[17:06:30] *** Quits: maik (maik@moz-9C654BFC.dip0.t-ipconnect.de) (Ping timeout)
[17:06:56] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[17:06:57] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[17:06:59] <cmr> Do we parse and accept that?
[17:07:06] <cmr> Our inline asm is pretty limitied, https://github.com/mozilla/rust/blob/master/src/libsyntax/ext/asm.rs
[17:09:59] <eddyb> cmr: it parses anything GCC does AFAIK, for codegen it only misses some target-specific maps clang does, like a => {ax}, d => {dx} (apparently they're equivalent, {ax} can be {eax} or {al} depending on the size of the given value)
[17:10:21] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Ping timeout)
[17:11:54] <FreeFull> If there wasn't a difference between al and ah, you'd be able to get rid of the e, x and l completely
[17:12:12] <eddyb> FreeFull: you forget r
[17:12:33] <FreeFull> r too
[17:12:36] <eddyb> cmr: the liveness thing is not technically a bug, because rustc is being conservative, more like an inconvenience
[17:13:48] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[17:14:08] *** Quits: timot_ (timot@moz-72D6E8C2.mobile.tre.se) (Ping timeout)
[17:14:26] *** Quits: KindOne (KindOne@moz-B764F4D3.dynamic.ip.windstream.net) (Ping timeout)
[17:15:00] <eddyb> cmr: what's with the mixed indentation? which one should I use?
[17:15:00] *** Joins: timot_ (timot@moz-72D6E8C2.mobile.tre.se)
[17:15:18] *** Joins: pnathan1 (Adium@moz-BDC3EE62.tukw.qwest.net)
[17:15:50] *** Joins: KindOne (KindOne@moz-B764F4D3.dynamic.ip.windstream.net)
[17:17:41] *** Quits: glosoli (glosoli@moz-72C60525.static.zebra.lt) (Quit: Textual IRC Client: www.textualapp.com)
[17:18:22] *** Quits: timot_ (timot@moz-72D6E8C2.mobile.tre.se) (Ping timeout)
[17:19:08] *** Joins: timot_ (timot@moz-72D6E8C2.mobile.tre.se)
[17:19:16] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[17:19:27] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[17:20:35] *** Joins: ercxx (ercan@moz-7CFF3469.dyn.optonline.net)
[17:20:59] *** Joins: maik (maik@moz-9C654BFC.dip0.t-ipconnect.de)
[17:21:16] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Ping timeout)
[17:22:47] *** Joins: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP)
[17:22:58] <jld> rusti: static S: i32 = 0x0123456789abcdef; enum E { V = S } (S as u64) == (V as u64)
[17:22:59] -rusti- false
[17:23:47] *** Parts: ercxx (ercan@moz-7CFF3469.dyn.optonline.net) (WeeChat 0.4.2)
[17:23:48] *** Quits: siritori (siritori@moz-E54AAD3B.east.global.crust-r.net) (Quit: WeeChat 0.3.2)
[17:23:57] <eddyb> rusti: static S: i64 = 0x0123456789abcdef; enum E { V = S } (S as u64) == (V as u64)
[17:23:58] -rusti- true
[17:24:48] *** Quits: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca) (Quit: Leaving.)
[17:24:54] *** Quits: timot_ (timot@moz-72D6E8C2.mobile.tre.se) (Connection reset by peer)
[17:24:55] *** Quits: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP) (Ping timeout)
[17:24:58] *** Joins: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca)
[17:25:04] <jld> rusti: enum E { V = std::i32::max_value } (V as u64, std::i32::max_value as u64)
[17:25:04] -rusti- (18446744071562067967u64, 2147483647u64)
[17:26:16] *** Quits: sebcrozet (sebcrozet@moz-6DA639AF.w80-13.abo.wanadoo.fr) (Ping timeout)
[17:26:17] <eddyb> rusti: enum E { V = std::i32::max_value } (V as i64, std::i32::max_value as i64)
[17:26:19] -rusti- error: internal compiler error: unexpected failure
[17:26:19] -rusti- note: the compiler hit an unexpected failure path. this is a bug
[17:26:19] -rusti- note: try running with RUST_LOG=rustc=1 to get further details and report the results to github.com/mozilla/rust/issues
[17:26:19] -rusti- (-2147483649i64, 2147483647i64)
[17:26:42] *** Joins: sebcrozet (sebcrozet@moz-6DA639AF.w80-13.abo.wanadoo.fr)
[17:26:52] *** Joins: ercxx (ercan@moz-7CFF3469.dyn.optonline.net)
[17:27:52] <jld> rusti: version
[17:27:53] -rusti- "rustc 0.8 (48499c7 2013-09-26 15:36:10 -0700)"
[17:28:02] *** Quits: eddyb (eddy@3C6E2DBB.FFB4E060.A5830293.IP) (Ping timeout)
[17:28:07] *** kimundi is now known as zz_kimundi
[17:29:55] *** Quits: io2 (io2@moz-A6202C16.home.otenet.gr) (Ping timeout)
[17:32:03] *** Joins: kurisumasu (queen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[17:33:44] *** Joins: martndemus (martndemus@moz-A2C32059.upc-h.chello.nl)
[17:33:53] *** Quits: mikefletcher (michaelfle@DA60130B.4474880.28B68B9E.IP) (Ping timeout)
[17:34:36] *** Joins: eddyb (eddy@3C6E2DBB.FFB4E060.A5830293.IP)
[17:36:37] <ercxx> are we going to be able to declare multiple variables without putting them in tuples?
[17:36:40] *** Joins: Earnestly (earnest@moz-BE290A2B.dyn.plus.net)
[17:38:06] <eddyb> sorry for the reconnect, was compiling librustc with -j4 (and it still hasn't finished)
[17:38:38] <eddyb> Ms2ger: is this a true ICE?
[17:38:42] <eddyb> rusti: enum E { V = std::i32::max_value } (V as i64, std::i32::max_value as i64)
[17:38:43] -rusti- (-2147483649i64, 2147483647i64)
[17:38:53] <eddyb> hmm, it's fine now
[17:39:03] <Ms2ger> Apparently not :)
[17:40:09] <eddyb> rusti: enum E { V = 0x10000000} V as i64
[17:40:09] -rusti- 268435456i64
[17:40:17] <jld> ...is LLVM enforcing C's rules for signed overflow on Rust?
[17:40:21] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[17:40:25] <eddyb> rusti: enum E { V = 0x80000000} V as i64
[17:40:26] -rusti- 2147483648i64
[17:40:41] *** Quits: Shaladdle (Shaladdle@moz-424BC304.hsd1.pa.comcast.net) (Quit: Leaving)
[17:40:47] <Ms2ger> jld, C has rules for signed overflow?
[17:41:02] <eddyb> it has nasal demons% UB
[17:41:10] <eddyb> oh c'mon, I screwed that up
[17:41:55] <eddyb> I should upgrade to 8GB of RAM just for Rust
[17:42:52] <benh> or launch a memshrink initiative for the rust compiler :)
[17:43:16] <jld> rusti: static S: u32 = 1 << 32; static T: u32 = S >> 1; (S, T)
[17:43:16] -rusti- (0u32, 0u32)
[17:43:24] <jld> rusti: static S: i32 = 1 << 32; static T: i32 = S >> 1; (S, T)
[17:43:25] -rusti- (0i32, -1i32)
[17:43:40] <eddyb> woot
[17:43:42] <jld> rusti: static S: i32 = 23 << 32; static T: i32 = S >> 5; (S, T)
[17:43:43] -rusti- (0i32, -1i32)
[17:43:58] <eddyb> 1 << 32 should be 0 AFAIK
[17:44:08] <eddyb> rusti: 1u32 << 32
[17:44:09] -rusti- 32684u32
[17:44:20] <eddyb> that... that can't be right
[17:44:40] <eddyb> rusti: 1u32 << 31
[17:44:41] -rusti- 2147483648u32
[17:44:46] <jld> Shift by greater than or equal to width is also nasal demons.
[17:44:53] <bjz_> is specifying the size of c-style enums supported yet?
[17:45:20] <eddyb> Rust should be UB-free where possible
[17:45:22] <jld> bjz_: Guess what I was working on when I ran into all of this.
[17:45:32] <bjz_> I think it was something like #[repr(..)]
[17:45:58] *** Quits: martndemus (martndemus@moz-A2C32059.upc-h.chello.nl) (Ping timeout)
[17:46:12] <eddyb> rusti: 1u32 << 32
[17:46:12] -rusti- 32764u32
[17:46:20] <bjz_> jld: c-style enums?
[17:46:22] <bjz_> :P
[17:46:23] <eddyb> oh c'mon, it's not even deterministic
[17:46:39] <eddyb> is it leaking CPU registers?
[17:46:42] *** Quits: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net) (Quit: No Ping reply in 180 seconds.)
[17:47:02] *** Quits: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net) (Ping timeout)
[17:47:09] *** Joins: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net)
[17:47:10] <eddyb> it's showing us the rust in the barrel shifters :P
[17:47:29] <jld> bjz_: So, look at src/test/run-pass/deriving-primitive.rs, and think about what that does on 32-bit when the discriminant can be 64-bit... and const_eval helpfully tells us that int::max_value is 0xffffffff7fffffff....
[17:49:15] <bjz_> eek
[17:49:38] *** Joins: nwmcsween (nwmcsween@E0025B86.51EE1362.3655BBF5.IP)
[17:50:13] <eddyb> we need wtf.rs if only for this shifting weirdness
[17:50:26] <eddyb> rusti: (1u32 << 32, 1u32 << 32, 1u32 << 32, 1u32 << 32, 1u32 << 32)
[17:50:27] -rusti- (1505812544u32, 32620u32, 1508020952u32, 32620u32, 1542653008u32)
[17:50:29] *** Joins: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net)
[17:50:31] <jld> I think the actual problem is in the enum stuff -- it's taking an expression that's typed as int (or i32, in the portable version) and using all 64 bits of the const_eval result.
[17:51:13] *** Joins: martndemus (martndemus@moz-A2C32059.upc-h.chello.nl)
[17:52:40] <jld> I guess the question is, how do we know it's int?  Or, *when* do we know it's int?
[17:53:17] <eddyb> so, uhm, is the shift thing a known problem? should I run to the bugtracker and check?
[17:54:14] <jld> I don't actually know.  I dimly recall seeing the behavior of out-of-range shifts come up in discussion before, but not what happened to it.
[17:56:13] <eddyb> GAAAAH it took me like an hour to build stage1 and test, and I didn't fix the problem :(
[17:56:45] *** Joins: io2 (io2@moz-A6202C16.home.otenet.gr)
[17:57:07] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[17:58:36] <eddyb> shouldn't a rebuild with 1 file changed be faster?
[17:58:45] <tiffany> what does it mean that a type is immediate?
[17:59:02] <eddyb> tiffany: it fits in an uint, maybe
[17:59:25] <eddyb> which is defined to be uintptr_t IIRC
[17:59:39] <cmr> It's less than the size of int, yes.
[17:59:41] <cmr> at least atm
[17:59:45] <cmr> well
[17:59:49] <cmr> what that means I don't now
[17:59:50] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[17:59:51] <cmr> *know
[17:59:59] <cmr> I think it means we don't use outptrs/etc for them
[18:00:26] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[18:00:51] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Input/output error)
[18:00:55] *** Joins: lmandel (lmandel@moz-D957E76.dsl.bell.ca)
[18:01:12] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[18:01:17] <jld> I *think* what it means is that we'll use the value directly if possible, instead of stack-allocating it and storing and loading it and needing LLVM to optimize that back out.
[18:02:44] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[18:03:01] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[18:06:03] <eddyb> I changed this to take the constraint into account and it doesn't change the liveness behavior: https://github.com/mozilla/rust/blob/master/src/librustc/middle/liveness.rs#L1234-L1236
[18:06:52] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Ping timeout)
[18:07:15] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Client exited)
[18:07:27] <eddyb> ExprInlineAsm shows up in one more place, in check_expr, but I'm not sure what I should do there
[18:07:36] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[18:08:13] *** Quits: lmandel (lmandel@moz-D957E76.dsl.bell.ca) (Quit: lmandel)
[18:08:55] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[18:09:21] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Ping timeout)
[18:09:40] *** Quits: ross (ross@moz-5EA04060.br.br.cox.net) (Ping timeout)
[18:09:55] *** Joins: fabiand (fabiand@moz-5D3A22BA.adsl.alicedsl.de)
[18:10:13] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: Leaving.)
[18:10:17] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[18:11:22] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[18:13:09] *** Quits: bheylin (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin)
[18:14:09] *** Quits: Qibbit (Qibbit@B7BFB858.FAB07856.1A968954.IP) (Ping timeout)
[18:14:43] *** Quits: qrpth (andreas@moz-C54F6246.dyn.estpak.ee) (Ping timeout)
[18:15:11] <osa1> how can I convert type of rhs of pattern matching to () ?
[18:15:34] <cmr> match Foo { x => { ....; }
[18:15:52] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[18:16:13] <eddyb> cmr: are the braces mandatory?
[18:16:14] *** Joins: nejucomo1 (Adium@moz-434492BB.dsl.static.sonic.net)
[18:17:24] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Ping timeout)
[18:17:34] *** Parts: pnathan1 (Adium@moz-BDC3EE62.tukw.qwest.net) ()
[18:17:38] <myname> only if you want more than one expression
[18:17:52] <myname> basically, {} makes one expression out of a group of expressions
[18:18:10] *** Joins: Qibbit (Qibbit@565C832A.9D76C378.3002A442.IP)
[18:18:42] <eddyb> ; is the sufix unary operator T -> ()
[18:18:54] <osa1> "cannot move out of dereference of & pointer" what does that mean?
[18:19:05] *** Joins: qrpth (andreas@moz-C54F6246.dyn.estpak.ee)
[18:19:11] <eddyb> (or that's what Haskell guys would think)
[18:19:35] <myname> osa1: did you try something like Foo(bar) => bar.baz()?
[18:19:46] *** Joins: gareth0 (gareth0@moz-EE93C7BA.dynamic.dsl.as9105.com)
[18:19:55] *** Quits: busylizzy (lisa@85228838.12D0DC84.211374C4.IP) (Ping timeout)
[18:20:01] <osa1> myname: TRHS(NT(nt)) => { }
[18:20:15] <myname> you may want to have Foo(ref bar) to get bar as a reference to whatever is inside Foo
[18:20:24] *** Quits: gareth0 (gareth0@moz-EE93C7BA.dynamic.dsl.as9105.com) (Connection reset by peer)
[18:20:26] *** Joins: anon_mg (anon_mg@moz-A269735D.dhcp.mtpk.ca.charter.com)
[18:20:30] <eddyb> oh c'mon, I removed self.propagate_through_lvalue_components(expr, succ) and I got an ICE
[18:20:35] <eddyb> y u so hard?
[18:20:36] *** Joins: Yeri (jasonjasmi@41C91A8A.CE609BA5.E39FBF79.IP)
[18:21:02] <myname> 99 compile time errors to fix, 99 compile errors
[18:21:20] <myname> fix an error, recompile, 100 compile time errors to fix
[18:21:29] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[18:21:49] <nejucomo1> hehe.
[18:21:53] *** nejucomo1 is now known as nejucomo
[18:21:55] <anon_mg> noob question on git.  I forked and pushed a new branch to my repo ... is it fine to do a pull request from that branch
[18:22:18] *** Quits: mikezaby (mikezaby@moz-908EA8DE.home.otenet.gr) (Input/output error)
[18:22:57] <anon_mg> i've read the contributions doc but i'm still a little scurred
[18:22:58] <nejucomo> anon_mg: That's more of a github question.  I'm not certain if github ui handles that well, but someone familiar with git could figure it out and do the right thing.
[18:23:16] *** Joins: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP)
[18:23:22] <mcpherrin> anon_mg: I think that works fine
[18:23:26] <nejucomo> I'm not a rust dev at all, but I would say go ahead with the PR and if someone wants it changed, they'll let you know.
[18:24:30] <anon_mg> kk
[18:24:58] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[18:25:16] *** Joins: busylizzy (lisa@85228838.12D0DC84.211374C4.IP)
[18:25:19] *** Quits: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP) (Ping timeout)
[18:25:27] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[18:26:04] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Ping timeout)
[18:26:08] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[18:26:14] <nejucomo> Of course people tasks with cutting down the open issue count might not agree with a liberal PR/new-issue policy.  ;-)
[18:26:32] *** Joins: lmandel (lmandel@moz-D957E76.dsl.bell.ca)
[18:27:23] <anon_mg> hmmm i didn't create an open issue for it, just the pull request ... its for typos lol
[18:27:31] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[18:27:31] <Ms2ger> I hope nobody's tasked with that :)
[18:28:22] *** Quits: fabiand (fabiand@moz-5D3A22BA.adsl.alicedsl.de) (Quit: Verlassend)
[18:28:38] *** Joins: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP)
[18:28:44] *** Quits: fran_ (fran@moz-DCB31255.telecom.net.ar) (Ping timeout)
[18:29:42] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[18:29:48] * nejucomo files a ticket for someone to close more tickets.
[18:29:51] <nejucomo> j/k
[18:30:41] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[18:31:57] *** Joins: fran_ (fran@moz-D5B20FF3.telecom.net.ar)
[18:34:40] *** Joins: mikefletcher (michaelfle@DA60130B.4474880.28B68B9E.IP)
[18:35:50] *** Quits: io2 (io2@moz-A6202C16.home.otenet.gr) (Ping timeout)
[18:36:18] *** Joins: bholley (anonymous@moz-D5EB36E2.rev.numericable.fr)
[18:36:49] *** Quits: maik (maik@moz-9C654BFC.dip0.t-ipconnect.de) (Ping timeout)
[18:37:02] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Ping timeout)
[18:37:36] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[18:37:49] *** Joins: gareth0 (gareth0@moz-1445517C.dynamic.dsl.as9105.com)
[18:38:30] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[18:38:30] *** ChanServ sets mode: +ao dherman dherman
[18:42:15] <earlz> Rust has no concept of exceptions or anything else that would cause stack-unwinding, right? All errors are handled C-style by returning error codes
[18:42:37] *** Quits: lmandel (lmandel@moz-D957E76.dsl.bell.ca) (Quit: lmandel)
[18:42:42] <saati> task failure causes stack unwinding
[18:42:50] <saati> but you can't stop it in the task
[18:44:05] <mikefletcher> I have a program that will not compile and I cannot figure out why.  I was using master from yesterday.  It appears to be that TcpStream implements std::rt::io::Reader.
[18:44:09] <mikefletcher> http://pastebin.com/Q6Ndybvh
[18:44:32] *** Quits: Yeri (jasonjasmi@41C91A8A.CE609BA5.E39FBF79.IP) (Quit: Yeri)
[18:44:50] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[18:45:33] *** Quits: nwmcsween (nwmcsween@E0025B86.51EE1362.3655BBF5.IP) (Ping timeout)
[18:48:13] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[18:48:44] <jld> What's the new upcall_fail?
[18:49:02] <jld> i.e., the thing to break on in gdb to get a backtrace of where something's failing.
[18:50:22] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[18:54:20] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[18:54:33] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[18:54:56] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[18:55:08] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: Leaving.)
[18:58:31] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[18:58:31] *** ChanServ sets mode: +ao dherman dherman
[18:59:07] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Input/output error)
[18:59:26] *** Joins: ksf_ (ksf@moz-5534317B.adsl.alicedsl.de)
[18:59:29] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[19:00:59] *** Quits: tefter (tefter@B5D119DC.B856A0A1.73804765.IP) (Connection reset by peer)
[19:01:14] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[19:01:43] *** mcpherrin is now known as McPherrin
[19:01:44] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[19:02:14] *** Joins: tefter (tefter@B5D119DC.B856A0A1.73804765.IP)
[19:02:39] *** Joins: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr)
[19:02:39] <ksf_> hi, how do I take an exponent of an i64? I tried ^ (which turned out to be xor), and neither pow nor exp are defined for i64.
[19:02:48] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Ping timeout)
[19:03:48] <eddyb> ksf_: have you tried BigInt?
[19:04:06] *** Joins: Jesin (Jessin_@moz-5654D37.washdc.fios.verizon.net)
[19:04:17] <ksf_> that's quite a large hammer, isn't it?
[19:04:42] <eddyb> ksf_: it uses a vector and it can be inlined, so no
[19:04:59] <ksf_> but no, no pow or exp either.
[19:05:11] <eddyb> uhm...
[19:05:17] *** Quits: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[19:05:23] <ksf_> (according to the docs)
[19:06:06] <eddyb> powm/modp is one of the most useful things you can do with a BigInt (at least in crypto)
[19:06:47] <benh> rusti: std::num::int::pow(2, 32)
[19:06:52] -rusti- pastebinned 11 lines of output: http://ix.io/8sm
[19:06:56] <benh> boo
[19:07:00] *** Joins: ktt3ja (Mibbit@moz-6B6EE8C0.hsd1.va.comcast.net)
[19:07:12] <benh> rusti: std::int::pow(2, 32)
[19:07:14] -rusti- 4294967296
[19:07:48] <eddyb> rusti: use std::i64; pow(2i64, 63)
[19:07:49] -rusti- <anon>:9:23: 9:26 error: unresolved name `pow`.
[19:07:49] -rusti- <anon>:9          use std::i64; pow(2i64, 63)
[19:07:49] -rusti-                                 ^~~
[19:07:49] -rusti- error: aborting due to previous error
[19:07:49] -rusti- application terminated with error code 101
[19:08:08] <ksf_> http://static.rust-lang.org/doc/0.8/std/num/trait.Algebraic.html says float, f32, f64
[19:08:10] <eddyb> rusti: std::i64::pow(2i64, 63)
[19:08:10] -rusti- <anon>:9:9: 9:22 error: unresolved name `std::i64::pow`.
[19:08:10] -rusti- <anon>:9          std::i64::pow(2i64, 63)
[19:08:11] -rusti-                   ^~~~~~~~~~~~~
[19:08:11] -rusti- error: aborting due to previous error
[19:08:11] -rusti- application terminated with error code 101
[19:08:16] <eddyb> pffft
[19:08:47] <eddyb> ksf_: that's 0.8, you probably want master (float is gone)
[19:08:55] <benh> i suppose that's for like 2.0.pow(32.0)
[19:09:30] <ksf_> eddyb, you mean so that my code gets broken even more often? :)
[19:10:22] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[19:10:46] <engla> there is a generic function std::num::pow
[19:11:04] <engla> rusti: std::num::pow(2.0, 3.2)
[19:11:05] -rusti- 9.18958684
[19:11:27] <eddyb> rusti: std::num::pow(2i64, 62)
[19:11:28] -rusti- <anon>:9:9: 9:22 error: failed to find an implementation of trait std::num::Algebraic for i64
[19:11:28] -rusti- <anon>:9          std::num::pow(2i64, 62)
[19:11:28] -rusti-                   ^~~~~~~~~~~~~
[19:11:28] -rusti- application terminated with error code 101
[19:11:45] <eddyb> rusti: std::int::pow(2i64, 62)
[19:11:45] -rusti- <anon>:9:23: 9:27 error: mismatched types: expected `int` but found `i64` (expected int but found i64)
[19:11:45] -rusti- <anon>:9          std::int::pow(2i64, 62)
[19:11:46] -rusti-                                 ^~~~
[19:11:46] -rusti- error: aborting due to previous error
[19:11:46] -rusti- application terminated with error code 101
[19:11:50] <eddyb> wheeee spam
[19:12:06] <earlz> Is there any decent documentation on how to implement and use macros?
[19:12:12] <FreeFull> I don't think there is a pow for i64
[19:12:27] <eddyb> earlz: there's the macro tutorial
[19:12:30] <benh> rusti: std::int::pow(2, 32)
[19:12:31] -rusti- 4294967296
[19:12:47] <eddyb> benh: that's... cheating
[19:12:55] <FreeFull> rusti: 9223372036854775807i64 as int
[19:12:56] -rusti- 9223372036854775807
[19:13:08] <eddyb> it won't work on 32bit
[19:13:11] <FreeFull> Yeah
[19:13:14] <mindcat> rusti: 1 << 31
[19:13:15] -rusti- 2147483648
[19:13:15] <benh> It also doesn't look like a very clever implementation
[19:13:27] <benh> so just roll your own and you won't be much worse off :D
[19:13:30] <mindcat> rusti: 1 << 90
[19:13:31] -rusti- 140437324481616
[19:13:33] <FreeFull> Well, here is something you can contribute to the std
[19:13:39] <mindcat> rusti: 1 << 89
[19:13:40] -rusti- 140110522381392
[19:13:44] <earlz> I don't see anything here at least eddyb https://github.com/mozilla/rust/wiki/Docs
[19:13:52] <eddyb> ksf_: you can implement your own exponentiation by squaring
[19:14:09] <earlz> The only thing I found was this, which was a bit too dense for me. http://static.rust-lang.org/doc/master/rust.html#macros
[19:14:13] <eddyb> earlz: http://static.rust-lang.org/doc/master/tutorial-macros.html
[19:14:18] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Ping timeout)
[19:14:32] <eddyb> earlz: it's linked in the Docs wiki page you were looking at
[19:14:58] *** Quits: sankha93 (Instantbir@6F5BFBBD.85282E88.EFB84E89.IP) (Quit: Gone to save the world!)
[19:16:17] <earlz> ah, I see it now. sorry
[19:16:23] <bjz_> earlz: re. exceptions: http://static.rust-lang.org/doc/master/tutorial-conditions.html
[19:17:09] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[19:17:14] <bjz_> earlz: there are multiple ways to handle errors, but no exceptions
[19:18:15] <earlz> and there are no plans to add exception-like functionality, right? 
[19:18:34] <bjz_> nope
[19:18:45] <eddyb> task::try looks a lot like a try-catch block :P
[19:18:51] *** zz_kimundi is now known as kimundi
[19:19:05] <bjz_> kimundi is apparently working on improving fail!
[19:20:57] *** Joins: lfox (lfox@moz-B8648F0F.nycmny.fios.verizon.net)
[19:21:25] <bjz_> but yeah, I for one am glad Rust has gone without exceptions :)
[19:21:52] <eddyb> oooh, conditions are cool
[19:22:20] *** Quits: olsonjeffery (pf@B8927AE1.CFEFA148.239A1A9E.IP) (Ping timeout)
[19:22:23] * bjz_ hasn't got around to conditions
[19:22:28] *** Quits: cubic_ (cubic@moz-FE5AD6C7.mc.videotron.ca) (Quit: Leaving)
[19:23:07] *** Quits: mindcat (mindcat@53D928E9.EEF2A000.F956842C.IP) (Quit: Lost terminal)
[19:23:57] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[19:24:58] *** Quits: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net) (Input/output error)
[19:24:59] <ksf_> ugh, no bigint literals
[19:25:15] *** Joins: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca)
[19:25:39] *** Joins: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net)
[19:25:57] *** Joins: vmx (vmx@moz-D3D6C952.pools.arcor-ip.net)
[19:26:13] <eddyb> ksf_: you can probably use macros to get close
[19:28:12] <eddyb> I need the brain of a librustc/middle dev :(
[19:28:21] <eddyb> *to borrow
[19:28:48] <vmx> hi all. i still try to implement a "from_float" function for the Ratio type. i'm getting closer and closer. the current code i have is super ugly and i wonder if i miss some basic concept to make it look nice. any look is appreciated (it's only 9 lines) https://www.friendpaste.com/6ardEwuLCfkykoFVm4xYEZ
[19:29:20] *** Quits: sk (sk@61A494B3.BA40E8A.AAC02D62.IP) (Quit: Leaving)
[19:30:11] *** Joins: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP)
[19:32:05] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[19:35:09] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[19:35:33] *** Joins: io2 (io2@moz-A6202C16.home.otenet.gr)
[19:38:13] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[19:38:24] *** Quits: bholley (anonymous@moz-D5EB36E2.rev.numericable.fr) (Quit: bholley)
[19:39:43] *** Quits: oberstet (quassel@moz-1F99C134.dynamic.mnet-online.de) (Client exited)
[19:40:09] *** Quits: Jackneill (Jackneill@moz-5B85B16F.pool.digikabel.hu) (Input/output error)
[19:40:52] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[19:41:39] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[19:42:06] *** Quits: mikefletcher (michaelfle@DA60130B.4474880.28B68B9E.IP) (Ping timeout)
[19:44:01] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[19:47:37] <earlz> Has anyone successfully made a fluent-ish API yet in Rust? 
[19:49:06] *** Joins: jeffb (jeff@moz-D13B6004.hsd1.ca.comcast.net)
[19:49:48] <bjz_> earlz: I dunno if you would consider the iterators flueintish
[19:50:57] *** Quits: jeffb (jeff@moz-D13B6004.hsd1.ca.comcast.net) (Quit: jeffb)
[19:52:48] *** Quits: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net) (Input/output error)
[19:53:07] <ktt3ja> how do I deal with this error if I still want to get value of v_count inside the spawn block? https://friendpaste.com/6ardEwuLCfkykoFVm566i0
[19:56:25] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Input/output error)
[19:56:47] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[19:58:06] *** Quits: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net) (Ping timeout)
[19:58:31] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[19:58:32] *** Joins: jaen (jaen@moz-E5B18A83.catv.broadband.hu)
[19:58:37] *** Joins: Yeri (jasonjasmi@41C91A8A.CE609BA5.E39FBF79.IP)
[19:58:58] *** Joins: nwmcsween (nwmcsween@E0025B86.51EE1362.3655BBF5.IP)
[19:59:18] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[19:59:41] *** Quits: Yeri (jasonjasmi@41C91A8A.CE609BA5.E39FBF79.IP) (Quit: Yeri)
[19:59:41] *** Joins: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net)
[20:00:32] *** Joins: Yeri (jasonjasmi@41C91A8A.CE609BA5.E39FBF79.IP)
[20:01:00] *** Quits: heftig (heftig@moz-17D40E43.dip0.t-ipconnect.de) (Quit: Quitting)
[20:01:52] *** Quits: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net) (Connection reset by peer)
[20:02:20] *** Joins: heftig (heftig@moz-17D40E43.dip0.t-ipconnect.de)
[20:02:43] *** Joins: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net)
[20:03:12] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[20:04:43] *** Quits: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net) (Connection reset by peer)
[20:04:55] *** Joins: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net)
[20:06:24] <earlz> How does one specify that a function argument should be a function callback? 
[20:06:52] <earlz> I tried something like `foo: fn(int) -> int`, but that yields error: obsolete syntax: bare function type
[20:09:18] *** Joins: aatch (James@moz-B437F499.pocketrent.com)
[20:09:34] <kimundi> earlz: We have different kinds of function types: &fn, ~fn and extern fn
[20:09:46] <kimundi> You probably want &fn or ~fn
[20:09:48] <earlz> ah yea.. forgot that function pointers still have ownership
[20:10:54] *** Joins: jeffb (jeff@moz-D13B6004.hsd1.ca.comcast.net)
[20:11:18] <earlz> Speaking of ownership.. in the fields of a struct, when should you use a managed @ pointer or an owned ~ pointer? 
[20:12:05] <ksf_> you should use ~ by default
[20:12:23] <ksf_> @ are only necessary when cycles are involved
[20:12:23] <earlz> I have a struct that needs to hold a reference it doesn't own(ie, it's created elsewhere and has a longer lifetime), but I'm not sure a managed pointer is the way to go
[20:12:51] <ksf_> ...modulo organising your code in a way that leaves you no other choice :)
[20:12:54] <McPherrin> You can put &s in structs too, but you have to become more careful with lifetimes
[20:13:17] <earlz> Anytime I put &, I get an error that anonymous lifetimes aren't allowed
[20:13:18] *** Quits: novabyte (novabyte@91E276A6.70DD2D14.E7727734.IP) (Quit: Leaving.)
[20:14:05] <McPherrin> earlz: yes, you need to explicitly mark lifetimes
[20:14:09] <ksf_> ...which means that you have to pass through the region of the longer-living object via &'foo
[20:14:11] *** Joins: novabyte (novabyte@91E276A6.70DD2D14.E7727734.IP)
[20:14:14] <ksf_> er, lifetime.
[20:14:21] *** Quits: novabyte (novabyte@91E276A6.70DD2D14.E7727734.IP) (Quit: Leaving.)
[20:15:18] * ksf_ will never get used to that name. regions have lifetimes, but how can you pass a lifetime as a parameter?
[20:16:02] <bjz_> what is the difference between a region and a lifetime>
[20:16:19] <bjz_> 'a is a lifetime right?
[20:16:31] <ksf_> the scientific literature calls what rust calls lifetimes regions.
[20:16:40] <bjz_> ok
[20:16:43] <ksf_> to further confuse things, those regions have lifetimes :)
[20:16:54] <bjz_> ick
[20:17:34] * bjz_ thinks he will start calling them regions then, just to be subvertive
[20:17:47] <Ms2ger> And then you have transmute_region
[20:17:50] <ksf_> the revolution has begun!
[20:18:41] <bjz_> ksf_: we totally sould have `trait`->`class`, to totally confuse the OO programmers
[20:19:31] <earlz> But I'm confused enough already :( 
[20:19:36] <ksf_> and higher kinds, so there can be proper monads \o/
[20:19:51] <bjz_> \o/
[20:19:52] *** Joins: tikue3 (tikue_star@3DC9855F.F3E8A984.689607DE.IP)
[20:20:15] <bjz_> earlz: traits are really type classes
[20:20:38] <ksf_> ...which are a special case of qualified types.
[20:20:48] <bjz_> earlz: I'm guessing we chose `trait`, because Rust used to have classes
[20:20:55] <bjz_> ie. OO classes
[20:21:13] <bjz_> (also maybe to be kinder to C++/Java devs
[20:21:23] <earlz> I've been equating traits to a more powerful equivalent to C#/Java interfaces
[20:21:24] <bjz_> hah, 'kinder'
[20:21:32] <bjz_> earlz: yeah
[20:21:35] <ercxx> While running tests if I use RUST_TEST_TASK=1 I get nicely colored output. Why not without it?
[20:21:35] <ksf_> earlz, that's not the worst start
[20:21:54] <bjz_> earlz: that's the way I introduce them
[20:21:57] <ksf_> in fact, that's what haskellers tell oo programmers all the time to get them off their feet.
[20:22:04] <bjz_> yep
[20:22:18] <earlz> Traits really shine when used in combination with generics, having a more powerful generic system than my native tongue (C#) :) 
[20:22:22] <bjz_> and Java has default impls as of 1.8
[20:22:36] <bjz_> for interfaces
[20:22:46] *** Quits: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net) (Ping timeout)
[20:23:12] <bjz_> earlz: they really fall down though with impl<T> Trait for T
[20:23:16] <bjz_> :(
[20:24:10] *** Quits: exobit (foo@moz-90D1B547.nycmny.fios.verizon.net) (Quit: Textual IRC Client: www.textualapp.com)
[20:24:45] *** Joins: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net)
[20:24:54] <ktt3ja> how do I print out curly brace with println! ? I get "unterminated format string" if I try something like println!("{{")
[20:25:24] <tiffany> will the proposed changes to fn types allow me to embed closures into Clone-able structures?
[20:26:07] <McPherrin> ktt3ja: One option is to print a string literal
[20:26:21] <McPherrin> rusti: println!("{}", "{")
[20:26:22] -rusti- {
[20:26:22] -rusti- ()
[20:26:43] <McPherrin> rusti: println!("{}", "{{"); // Or whatever you want
[20:26:44] -rusti- {{
[20:26:44] -rusti- ()
[20:26:46] <bjz_> rusti: println!(r"{}")
[20:26:49] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Client exited)
[20:26:51] -rusti- pastebinned 8 lines of output: http://ix.io/8sp
[20:27:02] <bjz_> heh
[20:27:13] <bjz_> rusti: println!("\\{\\}")
[20:27:14] -rusti- {}
[20:27:14] -rusti- ()
[20:27:34] <bjz_> ktt3ja: at the moment we have a problem
[20:27:52] <bjz_> ktt3ja: \ needs to go through two parsers
[20:28:04] <bjz_> the rust parser and the fmt parser
[20:28:29] <earlz> How does one construct a generic struct? I have something like `Foo<T>{bar: 123}`, but I get  `expected one of `;`, `}` but found `:``
[20:28:39] <benh> rusti: println(r"\{\}")
[20:28:40] -rusti- <anon>:9:20: 9:21 error: unknown string escape: {
[20:28:40] -rusti- <anon>:9          println(r"\{\}")
[20:28:40] -rusti-                              ^
[20:28:40] -rusti- application terminated with error code 101
[20:29:06] <benh> earlz: try Foo::<T>{...}
[20:29:08] <bjz_> so you first need to escape the \ for the rust parser, in order to head through the fmt parser
[20:29:18] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[20:29:18] <bjz_> rusti: println!("\\\\")
[20:29:19] -rusti- error: internal compiler error: unexpected failure
[20:29:19] -rusti- note: the compiler hit an unexpected failure path. this is a bug
[20:29:20] -rusti- note: try running with RUST_LOG=rustc=1 to get further details and report the results to github.com/mozilla/rust/issues
[20:29:20] -rusti- \
[20:29:20] -rusti- ()
[20:29:26] <earlz> ah... such odd syntax for that heh
[20:29:34] <ktt3ja> hmm
[20:29:52] <McPherrin> bjz_: I'm having nightmares about typing 16 \ in a row once now :P
[20:29:55] <ktt3ja> guess I will just use fmt! when I have to print curly bracket
[20:29:55] <bjz_> earlz: to disambiguate <
[20:30:24] <bjz_> earlz: an unfortunate consequence of going with C++'s <
[20:30:27] <benh> I was hoping to go with % for escapin in format strings :(
[20:30:53] *** Joins: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com)
[20:30:53] <bjz_> acrichto: isn't % yet to be implemented?
[20:31:05] <benh> No, we're sticking to \ because raw strings make it somewhat less painful, I guess
[20:31:16] <bjz_> ah
[20:31:23] <benh> rusti doesn't seem to do raw strings yet
[20:31:43] <bjz_> doing println!(r"") is ugly though :(
[20:31:47] *** Quits: xentrac (kragen@moz-BCBE1DED.canonical.org) (Quit: leaving)
[20:32:36] <bjz_> benh: would be nice if there was a $s:raw_str token option in macro_rulse!
[20:33:05] *** Joins: miloshadzic (miloshadzi@moz-85EDE417.dynamic.isp.telekom.rs)
[20:33:17] * ksf_ wonders whether haskell-style vararg formatting is half-way sanely implementable in rust
[20:33:28] <bjz_> ?
[20:33:46] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[20:35:07] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[20:35:44] <ksf_> http://stackoverflow.com/questions/3467279/how-to-create-a-polyvariadic-haskell-function
[20:36:34] <ksf_> so it'd look like print("foo")(1)("bar");
[20:36:41] <benh> not a fan :V
[20:37:03] <ksf_> I think the obstacle is implementing a trait matching on (->)
[20:37:58] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[20:38:01] <bjz_> benh: yeah, sad fact about not having a nice syntax for currying :(
[20:40:07] <benh> I'd honestly rather have C++-style variadic templates
[20:40:11] <benh> but I'm weird like that
[20:40:31] <bjz_> variadic templates would be lovely
[20:40:53] <ktt3ja> bjz_: is there a reason why println! and format! doesn't escape a curly bracket with another curly bracket like in Python?
[20:41:44] <bjz_> ktt3ja: there was I think. I believe it was for nested {{s. you can put rust code within the format string
[20:41:58] <bjz_> have to ask acrichto about that
[20:42:04] <benh> yeah, there's some cases in the format string grammar where you legitimately end up with }}
[20:42:14] <earlz> So I'm getting a really weird error with generics... http://pastebin.com/SJzKtVXD
[20:42:15] <earlz> protomvc.rs:69:8: 69:26 error: mismatched types: expected `ControllerBox<T>` but found `ControllerBox<()>` (expected type parameter but found ())
[20:42:15] <earlz> protomvc.rs:69         ControllerBox::<T>{
[20:42:23] <benh> (supposedly, 80% of my format strings are {}, the rest is {:?})
[20:42:33] <ktt3ja> ah k, thanks
[20:43:18] <bjz_> earlz: creator returns ()?
[20:43:34] <bjz_> earlz: shouldn't it return ->T?
[20:43:42] <earlz> oh wait. 
[20:43:55] <earlz> ok.. yea, I missed a set of parentheses in there
[20:44:05] <bjz_> earlz: you don't need the ::<T> hint, because it is trivial to infer that
[20:44:20] *** Quits: TD-Linux (TD-Linux@E338EB99.2B4F0AE0.A0A36CCE.IP) (Ping timeout)
[20:44:24] <bjz_> earlz: but I'm guessing you were trying to fix that error
[20:44:59] <bjz_> earlz: fn controller<T>(@self, creator: ~fn(&HttpContext) -> T) ?
[20:45:29] <earlz> oh.. I can leave the <T> off of the struct creation completely.. wasn't sure that inference was that powerfuk
[20:45:46] <earlz> but yea, fixed declaration was this: fn controller<T>(@self, creator: (~fn(&HttpContext) -> T)) -> ControllerBox<T>
[20:45:47] <bjz_> earlz: we have a local HM type inference
[20:46:01] <bjz_> so it's usually plenty powerful
[20:46:18] <bjz_> you don't need the parens around the fn type
[20:46:36] <bjz_> earlz: http://en.wikipedia.org/wiki/Hindley-Milner
[20:47:26] <bjz_> earlz: basically puts C#, C++ inference to shame :P
[20:47:52] <earlz> I've noticed that with a few things already :) 
[20:48:03] <earlz> ...So, when Rust is 1.0, it'll be the language to end all languages, right? :) 
[20:48:09] <bjz_> earlz: it's what powers the ML languages, Haskell etc
[20:48:13] <bjz_> eh hell no
[20:48:21] <McPherrin> HM is the only way to fly
[20:48:23] *** Joins: TD-Linux (TD-Linux@E338EB99.2B4F0AE0.A0A36CCE.IP)
[20:48:27] <benh> No, ending all other languages is a 2.0 feature
[20:48:49] <bjz_> mcpherrin: I'm sure there are even better things to discover
[20:48:55] <bjz_> mcpherrin: but atm yes
[20:49:06] <earlz> I guess that's fair. There has never been a perfect v1.0 language 
[20:49:22] <glennsl> How would I allocate a vector of Nones as a vector of Options of some type? It doesn't seem to be able to coerce the Nones to Options of the right type
[20:49:45] <benh> rusti: let v: ~[Option<int>] = ~[None, None, None];
[20:49:46] -rusti- <anon>:9:13: 9:14 warning: unused variable: `v` [-W unused-variable (default)]
[20:49:46] -rusti- <anon>:9          let v: ~[Option<int>] = ~[None, None, None];
[20:49:46] -rusti-                       ^
[20:49:46] -rusti- ()
[20:50:22] *** Quits: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP) (Quit: victorporof)
[20:52:24] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[20:52:47] *** Joins: ross (ross@moz-5EA04060.br.br.cox.net)
[20:53:16] <bjz_> earlz: probably the next genration above rust will be language that can achieve the low level memory control of C, the zero cost abstractions of C++, the memory safety of Rust, and be pure functional with succinct composability of functions. dunno if that is possible though
[20:53:53] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[20:53:59] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[20:54:17] <glennsl> benh: hmm, I must be doing something else to confuse it then… I bet it's lifetimes again… :/
[20:54:24] *** Quits: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP) (Quit: foo)
[20:54:31] <earlz> Well, it's already a worthy competitor on a lot of fronts. I've seen OS kernels written in Rust, it has the concurrency emphasis of Go, it's natively compiled, but includes advanced features like Generics that developers of Java and C# love
[20:54:43] <bjz_> earlz: of course
[20:55:28] <earlz> And it has such a strong emphasis on safety. Are there similar languages (other than maybe Haskell) that places such an emphasis? 
[20:55:32] <bjz_> earlz: but it definitely isn't going to be the end of systems lang design. (I know you might have been speaking in jest though)
[20:55:42] <bjz_> Idris is fascinating
[20:56:06] <bjz_> but it still relies on GC, and you can't mangage low level stuff nicely
[20:56:13] <earlz> Well, C will always be in more places than Rust.. but being based on LLVM, I imagine porting Rust to new platforms is much easier than say gcc
[20:56:29] <bjz_> ATS is also cool, but it's extremely verbose, and doesn't have regions
[20:57:17] <bjz_> earlz: http://www.idris-lang.org/
[20:57:38] <earlz> ATS does look ridiculously verbose heh
[20:57:43] <bjz_> earlz: they have an (albeit experimental) backend to LLVM
[20:57:50] <benh> I don't think Haskell places that much of an emphasis on safety?
[20:58:01] <bjz_> earlz: but it's not really a systems lang, unfortunately
[20:58:03] <benh> iirc it's fairly easy to break memory safety in the IO monad
[20:58:30] <Ms2ger> Memory safety is hard :)
[20:58:40] <ksf_> not without unsafe functions.
[20:58:43] <benh> their FFI/encoding of C-like operations isn't tagged as any more evil than println("hello world")
[20:58:48] <ksf_> or a specific IORef trick.
[20:59:29] <earlz> So, does Rust have the same target audience as Go? Basically where you're making complex things that need to go fast and work at a farily low level (such as servers) 
[20:59:32] <ksf_> there's tons of ways to turn haskell into an unsafe beast, it's just either unconvenient or made deliberately scary.
[20:59:33] <bjz_> earlz: I guess I'd be looking for a language, perhaps with inbuilt theorum proving, so you could prove properties about your program. perhaps some of the language's safety features could even be built out of that
[20:59:45] <Ms2ger> Ada?
[21:00:07] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.2)
[21:00:13] <vmx> i'd like to convert a Ratio<BigInt> to a f64. my idea was to just do a simple division. the problem is that i would need to convert the bigints into f64 before that. but it doesn't seem that i can convert bigints>int to a f64. any hints?
[21:00:15] <earlz> ah yea, ada is the classic safe language isn't it? No null pointers and what not at least
[21:00:26] <ksf_> idris with a region system would be a good start
[21:00:48] <Ms2ger> vmx, f64 can only represent integers up to 2**53 or so
[21:00:53] <bjz_> ksf_: aye. also better memory control
[21:01:15] <bjz_> ksf_: but they seem focused on having multiple backends, so I have a hard time seeing that happen
[21:01:23] <vmx> Ms2ger: sure, but it could still be approximated (this seems to be what python does)
[21:01:40] <bjz_> ksf_: ie. Java, JavaScript, C, LLVM
[21:01:47] <vmx> so a "close enough" float would be good enough
[21:02:29] <bjz_> ksf_: :( https://github.com/idris-lang/Idris-dev/blob/master/rts/idris_rts.h#L28
[21:02:57] *** Quits: Ferreus (ferreus@moz-5FF2A40A.pools.arcor-ip.net) (Quit: WeeChat 0.4.2)
[21:03:55] <bjz_> Ms2ger: Ada doesn't really have any memory safety garantees I don't think, altho it does make it harder to screw up, eps. in terms of some of its type system features, like rang/mod types etc
[21:04:46] <bjz_> Ms2ger: once nmatsakis and co. can nut out a proof for Rust's semantics (hopefully before 1.0), then we will be able to be much more confident
[21:04:52] *** Joins: bholley (anonymous@moz-D5EB36E2.rev.numericable.fr)
[21:05:04] <Ms2ger> Sounds like fun :)
[21:05:05] <ksf_> there's even academic work on implementing gc as a library without unsafe primitives
[21:05:21] <bjz_> Ms2ger: indeed, super tricky
[21:05:30] <ksf_> don't think that's ready performance-wise, though.
[21:05:37] <bjz_> type theory stuff is crazy
[21:05:52] <bjz_> ksf_: mm
[21:06:02] <Ms2ger> I had a class on it, and that's pretty much the conclusion I had too :)
[21:06:05] <bjz_> ksf_: that's still in the future
[21:06:44] <bjz_> Ms2ger: I'm trying to improve my discrete math abilities so I can start making headway into Types and Programming Languages :)
[21:07:01] *** Quits: bholley (anonymous@moz-D5EB36E2.rev.numericable.fr) (Quit: bholley)
[21:07:06] <bjz_> so much to learn
[21:07:20] <Ms2ger> bjz_, hmm, I didn't notice a lot of discrete math, but then again, I have a math background so I may have missed it :)
[21:07:43] <bjz_> Ms2ger: proofs, set theory, abstract algebra
[21:07:48] <ksf_> not so much in the directoin of say reoccurrence equations, but proofs.
[21:07:52] <bjz_> Ms2ger: functions/relations
[21:08:00] <Ms2ger> Mm
[21:08:13] <ksf_> as, alas, when dealing with type theory one can't just ignore all that proof stuff.
[21:08:19] <bjz_> yep
[21:08:27] <Ms2ger> The proof stuff is kind of the point :)
[21:08:31] <bjz_> ksf_: alot of inductive proofs?
[21:08:34] <Ms2ger> Yeah
[21:09:01] <bjz_> well, isn't typechecking performing an automatic proof of your program?
[21:09:05] <Ms2ger> I tend to think that's a simple concept, but I saw a *lot* of those in three years of mathematics :)
[21:09:27] <ksf_> bjz_, the program *is* the proof.
[21:09:31] <bjz_> Ms2ger: yeah I still have to get comfortable with it
[21:09:42] <ksf_> you have to check it against, or infer, the preposition.
[21:09:44] <bjz_> ksf_: that curry/howard isomorphism thing?
[21:09:48] <ksf_> yep
[21:09:59] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Input/output error)
[21:10:11] <bjz_> what is the proposition?
[21:10:18] <ksf_> ...the type.
[21:10:20] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[21:10:21] <bjz_> cool
[21:10:27] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[21:10:27] *** ChanServ sets mode: +ao brson brson
[21:10:33] <bjz_> (what I was thinking)
[21:10:34] <Ralith> bjz_: typechecking is *checking* the proof
[21:10:38] *** Quits: decoder (quassel@moz-D7023D7D.own-hero.net) (Ping timeout)
[21:10:40] <Ralith> for consistency
[21:10:42] <ksf_> but don't despair, I'm the living proof that one can implement HM without having grokked tapl.
[21:10:50] *** Joins: decoder (quassel@moz-D7023D7D.own-hero.net)
[21:10:58] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[21:11:06] <ksf_> otoh, I never ever got ADTs working.
[21:11:22] <bjz_> heh
[21:12:02] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[21:12:03] <bjz_> Ralith: does idris use HM btw? or something more generalised?
[21:13:08] <Ralith> bjz_: hindley-milner type inference is simply not capable of operating in idris's type theory
[21:13:21] <bjz_> Ralith: yeah, that's what I thought
[21:13:56] <Ralith> I believe idris uses a variant of miller pattern unification, which, note, is not a type inference algorithm.
[21:13:57] *** Quits: lfox (lfox@moz-B8648F0F.nycmny.fios.verizon.net) (Client exited)
[21:14:11] *** Joins: lfox (lfox@moz-B8648F0F.nycmny.fios.verizon.net)
[21:14:22] <bjz_> Ralith: when mcpherrin said "HM is the only way to fly", I thought of idris
[21:14:35] <Ralith> bjz_: also, idris is not "focused on" having multiple backends, nor are features constrained by any expectation of support across them; it's merely the case that backends are pretty easy to put together.
[21:14:55] <bjz_> Ralith: ah ok, sorry for the wrong impression
[21:15:40] <bjz_> It was indeed an assumption, rather than something I'd checked
[21:16:04] <glennsl> Is this horribly wrong:
[21:16:07] <glennsl> rusti: struct T<'self> { v: &'self [int] }; let f = |v| T { v: v }; f(&[0, ..10])
[21:16:07] -rusti- <anon>:9:72: 9:82 error: mismatched types: expected `&[int]` but found `&[<VI1>, .. 10]` (expected vector but found &-ptr)
[21:16:07] -rusti- <anon>:9          struct T<'self> { v: &'self [int] }; let f = |v| T { v: v }; f(&[0, ..10])
[21:16:08] -rusti-                                                                                  ^~~~~~~~~~
[21:16:08] -rusti- error: aborting due to previous error
[21:16:09] -rusti- application terminated with error code 101
[21:16:34] <aatch> rusti: struct T<'self> { v: &'self [int] }; let f = |v| T { v: v }; f([0, ..10])
[21:16:35] -rusti- <anon>:9:72: 9:81 error: mismatched types: expected `&[int]` but found `[<VI1>, .. 10]` ([] storage differs: expected & but found 10)
[21:16:35] -rusti- <anon>:9          struct T<'self> { v: &'self [int] }; let f = |v| T { v: v }; f([0, ..10])
[21:16:35] -rusti-                                                                                  ^~~~~~~~~
[21:16:36] -rusti- error: aborting due to previous error
[21:16:37] -rusti- application terminated with error code 101
[21:16:46] <Ms2ger> rusti: struct T<'self> { v: &'self [int] }; let f = |v| T { v: v }; f([0i, ..10])
[21:16:47] -rusti- <anon>:9:72: 9:82 error: mismatched types: expected `&[int]` but found `[int, .. 10]` ([] storage differs: expected & but found 10)
[21:16:47] -rusti- <anon>:9          struct T<'self> { v: &'self [int] }; let f = |v| T { v: v }; f([0i, ..10])
[21:16:47] -rusti-                                                                                  ^~~~~~~~~~
[21:16:47] -rusti- error: aborting due to previous error
[21:16:49] -rusti- application terminated with error code 101
[21:17:01] <bjz_> rusti: struct T<'self> { v: &'self [int] }; let f = |v| T { v: v.slice() }; f(~[0, ..10])
[21:17:01] -rusti- <anon>:9:65: 9:76 error: the type of this value must be known in this context
[21:17:02] -rusti- <anon>:9          struct T<'self> { v: &'self [int] }; let f = |v| T { v: v.slice() }; f(~[0, ..10])
[21:17:02] -rusti-                                                                           ^~~~~~~~~~~
[21:17:02] -rusti- error: aborting due to previous error
[21:17:03] -rusti- application terminated with error code 101
[21:17:23] <bjz_> heh, see, the inference is not perfect
[21:17:48] <bjz_> rusti: struct T<'self> { v: &'self [int] }; let f = |v: ~[int]| T { v: v.slice() }; f(~[0, ..10])
[21:17:48] -rusti- <anon>:9:73: 9:84 error: this function takes 2 parameters but 0 parameters were supplied
[21:17:48] -rusti- <anon>:9          struct T<'self> { v: &'self [int] }; let f = |v: ~[int]| T { v: v.slice() }; f(~[0, ..10])
[21:17:48] -rusti-                                                                                   ^~~~~~~~~~~
[21:17:48] -rusti- error: aborting due to previous error
[21:17:49] -rusti- application terminated with error code 101
[21:18:02] <bjz_> :/
[21:18:13] <Ralith> bjz_: we're all quite interested in having a better deterministic memory management story, too; it's simply a matter of someone having enough time and motivation to hack on it.
[21:19:15] <zokier`> rusti, trait A { fn a() -> uint; }; struct B; impl A for B { fn a() -> uint { 42 } }; B::a()
[21:19:32] <zokier`> rusti: trait A { fn a() -> uint; }; struct B; impl A for B { fn a() -> uint { 42 } }; B::a()
[21:19:35] -rusti- pastebinned 11 lines of output: http://ix.io/8sv
[21:20:06] <bjz_> rusti: struct T<'self> { v: &'self [int] }; let f = |v: ~[int]| T { v: v.as_slice() }; f(~[0, ..10])
[21:20:10] -rusti- pastebinned 15 lines of output: http://ix.io/8sw
[21:21:07] *** Joins: bholley (anonymous@moz-D5EB36E2.rev.numericable.fr)
[21:21:40] <zokier`> how do i call standalone/static trait methods?
[21:21:43] *** Joins: olsonjeffery (pf@B8927AE1.CFEFA148.239A1A9E.IP)
[21:22:14] <bjz_> zokier`: Trait::foo
[21:22:37] <bjz_> zokier`: not the Self type has to be somewhere in there for Rust to be able to infer
[21:22:44] <glennsl> bjz: so it's a type inference bug you think?
[21:22:50] <earlz> Why would I get `cannot capture variable of type `@mut ControllerBox<T>`, which does not fulfill `Send`, in a bounded closure`.. My struct contains 2 owned fields, and one owned function pointer
[21:23:10] <bjz_> Ralith: Sorry, I might have been picking up more on profmakx's feelings
[21:23:17] * Ms2ger has rust_begin_unwind in the fingers by now
[21:23:39] <zokier`> bjz_, I want to call trait method implemented for a struct, see my above line for rusti
[21:23:58] <Ralith> bjz_: ?
[21:24:23] <bjz_> glennsl: no, it's an issue that you're trying to return a struct with a borrowed pointer, I think
[21:24:26] <Ms2ger> (Though it would be nice if the first interesting frame wasn't #8)
[21:24:29] *** Quits: bholley (anonymous@moz-D5EB36E2.rev.numericable.fr) (Quit: bholley)
[21:24:37] <bjz_> Ralith: re: memory management
[21:24:51] * Ralith doesn't follow
[21:25:02] <bjz_> Ralith: dw
[21:25:12] <Ralith> bjz_: also note that the llvm backend isn't especially experimental at this point; I'm not aware of any nontrivial case where it doesn't function better than the C backend perfwise.
[21:25:18] *** Quits: gareth0 (gareth0@moz-1445517C.dynamic.dsl.as9105.com) (Ping timeout)
[21:26:01] *** Quits: miloshadzic (miloshadzi@moz-85EDE417.dynamic.isp.telekom.rs) (Ping timeout)
[21:26:17] <bjz_> glennsl: Rust doesn't know the lifetime, and so doesn't know when to deallocate the vector. I think. I could have that explanation wrong
[21:26:35] <bjz_> glennsl: but this is it: struct T<'self> { v: &'self [int] }; let f = |v| T { v: v.as_slice() }; f(~[0, ..10])
[21:26:59] *** Quits: nwmcsween (nwmcsween@E0025B86.51EE1362.3655BBF5.IP) (Connection reset by peer)
[21:27:24] <bjz_> zokier`: you can't do that unfortunately
[21:27:59] <bjz_> zokier`:  because Rust doesn't know what impl to get B::foo() from
[21:28:00] <glennsl> bjz: is the owner of the owned vector the stack then?
[21:28:33] *** Joins: nwmcsween (nwmcsween@E0025B86.51EE1362.3655BBF5.IP)
[21:28:37] <bjz_> zokier`: imagine for instance, if you also impled B for C
[21:29:21] <bjz_> zokier`: the plan that has been proposed is to be able to do B::<for A>::foo()
[21:29:27] *** Quits: foudfou (foudfou@moz-555DD0EA.net-81-220-236.rev.numericable.fr) (Quit: WeeChat 0.4.0)
[21:29:33] <bjz_> zokier`: but that is not implemented yet
[21:29:51] *** Quits: Ms2ger (Ms2ger@D2CDF20A.29977EA1.187A1082.IP) (Quit: nn)
[21:30:12] <zokier`> ok.. that is bit unfortunate. i'll have to think some workaround then. thanks anyways
[21:30:12] <bjz_> zokier`: does that make sense?
[21:30:18] <bjz_> yeah, it is
[21:30:22] <bjz_> I run into it a lot
[21:30:47] <bjz_> that method is literally uncallable at the current time
[21:31:54] <bjz_> rusti: trait A { fn a(_: Option<Self>) -> uint; }; struct B; impl A for B { fn a(_: Option<B>) -> uint { 42 } }; B::a(None<B>)
[21:31:54] -rusti- <anon>:9:127: 9:128 error: unexpected token: `)`
[21:31:54] -rusti- <anon>:9          trait A { fn a(_: Option<Self>) -> uint; }; struct B; impl A for B { fn a(_: Option<B>) -> uint { 42 } }; B::a(None<B>)
[21:31:54] -rusti-                                                                                                                                         ^
[21:31:54] -rusti- application terminated with error code 101
[21:32:09] <bjz_> rusti: trait A { fn a(_: Option<Self>) -> uint; }; struct B; impl A for B { fn a(_: Option<B>) -> uint { 42 } }; B::a(None::<B>)
[21:32:12] -rusti- pastebinned 11 lines of output: http://ix.io/8sy
[21:33:29] <SiegeLord> Can you not make a temporary and call it from there?
[21:33:41] <bjz_> rusti: trait A { fn a(_: Option<Self>) -> uint; }; struct B; impl A for B { fn a(_: Option<B>) -> uint { 42 } }; A::a(None<B>)
[21:33:42] -rusti- <anon>:9:127: 9:128 error: unexpected token: `)`
[21:33:42] -rusti- <anon>:9          trait A { fn a(_: Option<Self>) -> uint; }; struct B; impl A for B { fn a(_: Option<B>) -> uint { 42 } }; A::a(None<B>)
[21:33:42] -rusti-                                                                                                                                         ^
[21:33:42] -rusti- application terminated with error code 101
[21:33:43] *** Quits: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com) (Ping timeout)
[21:34:07] <bjz_> SiegeLord: no, because a returns a uint, not a Self
[21:34:46] <zokier`> rust doesn't have reflection, does it?
[21:35:19] <bjz_> zokier`: I have proposed the B::a() form of calling, but it seems to be unpopular. There are geniune difficulties with it in more complex scenarios
[21:35:44] <bjz_> rusti: trait A { fn a(_: Option<Self>) -> uint; }; struct B; impl A for B { fn a(_: Option<B>) -> uint { 42 } }; A::a(None::<B>)
[21:35:46] -rusti- 42u
[21:35:55] <bjz_> zokier`: there you go^
[21:36:07] <bjz_> zokier`: ugly, but it works
[21:36:34] <zokier`> ooh, nice. thanks
[21:38:41] <earlz> Is closure and anonymous functions considered stable?
[21:38:59] <SiegeLord> Probably the most unstable feature atm :P
[21:39:03] <bjz_> heh
[21:39:17] <bjz_> earlz: http://smallcultfollowing.com/babysteps/blog/2013/10/10/fn-types-in-rust/
[21:39:36] <bjz_> earlz: by mr nmatsakis
[21:40:04] <earlz> Is that at all implemented yet? 
[21:40:09] <bjz_> no
[21:40:31] <earlz> I really need the no-environment syntax :( 
[21:40:48] <bjz_> earlz: you can use anonymous functions all right, just expect semantic changes in the future
[21:41:36] <bjz_> yeah, we are suffering issues with owned closure for callbacks atm with glfw-rs
[21:41:44] <bjz_> :(
[21:41:47] *** Quits: martndemus (martndemus@moz-A2C32059.upc-h.chello.nl) (Ping timeout)
[21:41:55] <bjz_> they are block holes
[21:42:00] <bjz_> *black holes
[21:42:20] <bjz_> move something into the environment, never get it back
[21:43:29] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[21:44:14] <earlz> Basically, my problem is thus: I need to create a function that will "collapse" a generic struct so that it can be called without worrying about generics. Basically I need to create a function (anonymous/closure?) that will call a user defined callback to create a generic struct of some sort, and then the user provides a second function which invokes a behavior on the generic struct
[21:44:33] <earlz> All of it can be contained so that generics aren't required, but it's much easier to program against with generics... 
[21:46:36] <earlz> my collapsing function is probably wrong in many ways, but here it is: http://pastebin.com/Efd1tqCE
[21:46:54] <earlz> The error I get though is cannot move out of dereference of & pointer
[21:47:08] <earlz> I'm not sure what type of pointer I would use in such a case
[21:48:03] *** Quits: eevee_ (eevee@moz-B2437F13.evrt.wa.frontiernet.net) (Connection reset by peer)
[21:48:11] *** Joins: eevee (eevee@moz-B2437F13.evrt.wa.frontiernet.net)
[21:48:22] <jmgrosen> earlz: you could have self.creator be an Option and then .take it, but then you wouldn't be able to use it again
[21:49:15] <earlz> Well, ideally, creator would only ever be used from this constructed function
[21:49:48] <earlz> So, maybe that's right.. seems a bit odd to use Option there though
[21:50:49] *** Quits: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net) (Ping timeout)
[21:51:11] *** Quits: io2 (io2@moz-A6202C16.home.otenet.gr) (Quit: )
[21:51:41] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Client exited)
[21:52:02] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[21:52:42] *** Joins: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net)
[21:53:46] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Ping timeout)
[21:55:13] *** Quits: zenware (zenware@moz-D9635376.hsd1.il.comcast.net) (Ping timeout)
[21:56:36] *** Joins: alonlevy (alon@moz-176C0E22.bb.netvision.net.il)
[21:58:58] <eddyb> hmm, so Rust has no structural inheritance? just composition?
[22:00:22] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[22:01:56] *** Quits: nkoep (nik@moz-64C29CCB.pool.mediaways.net) (Ping timeout)
[22:02:17] <earlz> jmgrosen: yea, that actually ends up producing a slightly more cryptic error: cannot move out of captured outer variable in a heap closure
[22:02:45] <jmgrosen> earlz: can I see the function / struct definition?
[22:03:13] <earlz> http://pastebin.com/0ZgU7aVg
[22:03:13] <ksf_> eddyb, there's full interface inheritance, but no implementation inheritance at all.
[22:03:38] <earlz> (yes it's a mess, I'm learning :) )
[22:03:50] <ksf_> (modulo default methods, but that's not the same thing as inheriting an implementation as per common OOP terms)
[22:04:02] *** Quits: zslayton (Mibbit@moz-693C0D64.nyc.res.rr.com) (Quit: http://www.mibbit.com ajax IRC Client)
[22:05:03] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: Leaving.)
[22:05:48] *** Quits: alonlevy (alon@moz-176C0E22.bb.netvision.net.il) (Ping timeout)
[22:06:33] <jmgrosen> earlz: what's the definition of Route?
[22:06:53] *** Joins: zenware (zenware@moz-D9635376.hsd1.il.comcast.net)
[22:07:10] *** Joins: steveklabnik (steveklabn@moz-1DC93A6C.wiera.hu)
[22:07:31] <earlz> jmgrosen: here is my whole source: https://github.com/Earlz/rustymvc/blob/master/proto/protomvc.rs
[22:08:11] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Ping timeout)
[22:09:01] <eddyb> hmm, maybe my change didn't work because the value was wrapped in ExprAddrOf
[22:10:17] *** Quits: CarpNet (Alasdair@moz-EF831A5E.cable.virginmedia.com) (Quit: Leaving)
[22:10:21] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[22:10:59] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[22:11:28] <cmr> eddyb: what about indentation?
[22:12:54] *** Quits: eddyb (eddy@3C6E2DBB.FFB4E060.A5830293.IP) (Ping timeout)
[22:13:20] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[22:13:20] *** Quits: donri (donri@moz-9BB61102.tbcn.telia.com) (Client exited)
[22:13:46] <jmgrosen> earlz: I'm not sure why it's not working as-is, but changing Some(t) to Some(ref t) and (t)(c) to (*t)(c) seemed to work
[22:13:48] *** Joins: eddyb (eddy@3C6E2DBB.FFB4E060.A5830293.IP)
[22:14:35] <eddyb> cmr: two spaces vs four
[22:14:37] <earlz> heh that's odd. maybe some kind of small bug
[22:15:08] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[22:16:07] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[22:16:23] *** Joins: nkoep (nik@moz-6FE669C.vpn.rwth-aachen.de)
[22:16:48] <cmr> eddyb: in my rust?
[22:17:18] <eddyb> cmr: sorry, I forget to supply information all the time. in rust itself
[22:17:45] <cmr> Oh. The style is 4 space indentation, anything that doesn't have that is probably super old
[22:18:40] <eddyb> mkay, that's what I thought. I hope I got this now
[22:19:37] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[22:21:06] <eddyb> test.rs:5:36: 5:39 error: use of possibly uninitialized variable: `val` GAAAAAAH
[22:21:34] *** Quits: Boreeas (Boreeas@moz-F35C832D.boreeas.net) (Quit: ZNC - http://znc.in)
[22:21:39] <eddyb> I probably get over failures if it didn't take at least 15 minutes for each rebuild
[22:21:41] *** Quits: nwmcsween (nwmcsween@E0025B86.51EE1362.3655BBF5.IP) (Ping timeout)
[22:21:47] <eddyb> *I'd
[22:22:38] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Quit: Leaving)
[22:23:04] <dbaupp> eddyb: is this some problem with asm!()?
[22:23:35] <eddyb> dbaupp: trying to add support for the write-only constraint modifier http://gcc.gnu.org/onlinedocs/gcc/Modifiers.html
[22:23:55] <dbaupp> I thought we had that...
[22:23:59] <eddyb> dbaupp: my guess is that I have to change https://github.com/mozilla/rust/blob/master/src/librustc/middle/liveness.rs#L1234-L1236
[22:24:13] <eddyb> dbaupp: nah, constraints are just passed through, from what I can tell
[22:24:15] *** Joins: judder (maradukewa@218D70FD.A9DBEB8D.78E362FE.IP)
[22:24:26] *** Parts: judder (maradukewa@218D70FD.A9DBEB8D.78E362FE.IP) ()
[22:24:28] *** Joins: judder (maradukewa@218D70FD.A9DBEB8D.78E362FE.IP)
[22:24:31] *** Quits: steveklabnik (steveklabn@moz-1DC93A6C.wiera.hu) (Ping timeout)
[22:24:31] <dbaupp> rusti: unsafe { let mut x; asm!("mov 1, $0" : "=r"(x)); x }
[22:24:34] -rusti- pastebinned 10 lines of output: http://ix.io/8sA
[22:24:47] <dbaupp> rusti: unsafe { let mut x: u32; asm!("mov 1, $0" : "=r"(x)); x }
[22:24:50] -rusti- pastebinned 7 lines of output: http://ix.io/8sB
[22:25:16] <dbaupp> oh
[22:25:21] * dbaupp misremembered
[22:25:55] <eddyb> dbaupp: I even unwrapped the ExprAddrOf and did the same thing the assign ops do, no change
[22:26:38] <aatch> eddyb, we pass the constraints straight to llvm
[22:26:54] <aatch> so technically, we support anything llvm does.
[22:27:15] <eddyb> aatch: the rule here is simple, and should require just a small change to the liveness analysis, but I can't get it right :(
[22:27:21] *** Joins: xitology (xi@85437D54.5AFA3E4.CEDFC552.IP)
[22:28:15] <eddyb> there's this other place, but I'm not sure what could be changed here https://github.com/mozilla/rust/blob/master/src/librustc/middle/liveness.rs#L1479-L1488
[22:28:30] <aatch> eddyb, I'm not sure if it's worth doing. There's an `uninit` intrinsic to "initialize" the variable, since the same thing happens with C interfaces.
[22:29:03] <dbaupp> rusti: std::unstable::intrinsics::uninit::<u64>()
[22:29:04] -rusti- <anon>:9:9: 10:5 error: call to unsafe function requires unsafe function or block
[22:29:04] -rusti- <anon>:9          std::unstable::intrinsics::uninit::<u64>()
[22:29:04] -rusti- <anon>:10     };
[22:29:04] -rusti- error: aborting due to previous error
[22:29:04] -rusti- application terminated with error code 101
[22:29:13] <dbaupp> rusti: unsafe { std::unstable::intrinsics::uninit::<u64>() }
[22:29:14] -rusti- 140152069215312u64
[22:29:19] <xitology> Hi! What's wrong with this program? fn main() { let i = std::io::stdin().read_line().word_iter(); }
[22:29:38] <xitology> I'm getting error: borrowed value does not live long enough
[22:30:23] <cmr> xitology: you're calling a method (.word_iter()) on an rvalue (.read_line()), which doesn't work atm. You want to stash the result of read_line in a variable and call word_iter on that.
[22:30:25] <eddyb> aatch: I just need someone who understands the internals to tell me what I'm doing wrong
[22:31:09] <xitology> cmr: i see...  thanks!
[22:31:13] <dbaupp> eddyb: we don't even know what you're doing... post a diff?
[22:32:52] <eddyb> dbaupp: here's that case, starting on line 1230 https://gist.github.com/eddyb/aac212991118712b20df
[22:34:02] <eddyb> I'm doing what ExprAssign does, AFAICT
[22:37:58] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[22:37:58] *** ChanServ sets mode: +ao dherman dherman
[22:40:43] *** Parts: judder (maradukewa@218D70FD.A9DBEB8D.78E362FE.IP) ()
[22:41:23] <aatch> eddyb, I think you need to do self.propagate_through_expr(inner, succ) inside the match arm.
[22:41:25] *** Joins: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP)
[22:41:41] <aatch> after the propagate_through_lvalue_components
[22:42:11] *** Quits: bytbox (s@moz-54E13927.washdc.fios.verizon.net) (Input/output error)
[22:42:13] <eddyb> why, inner is an lvalue
[22:42:30] <eddyb> ExprAssign does propagate_through_expr for the RHS
[22:43:34] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Ping timeout)
[22:43:57] <aatch> eddyb, hmm, actually, I have a feeling it's not propagating up through the ExprAddrOf.
[22:44:51] <eddyb> that ExprAddrOf is a PITA, why weren't inline asm outputs just lvalues?
[22:45:27] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[22:45:46] <aatch> eddyb, because asm support was just hacked in. There aren't even any tests for it.
[22:46:25] <aatch> This was likely the easiest way to deal with it.
[22:46:30] <eddyb> aatch: propagating through ExprAddrOf just unwraps the inner expression
[22:46:30] *** Quits: nkoep (nik@moz-6FE669C.vpn.rwth-aachen.de) (Ping timeout)
[22:47:03] <jeffdb> exit
[22:47:08] <jeffdb> ah sorry
[22:48:09] <eddyb> aatch: how do I enable the debug2! output?
[22:48:11] *** Quits: heftig (heftig@moz-17D40E43.dip0.t-ipconnect.de) (Ping timeout)
[22:48:36] <aatch> eddyb, configure with --enable-debug and then run the compiler with RUST_LOG=rustc
[22:48:49] <aatch> so RUST_LOG=rustc rustc ...
[22:48:53] * dbaupp thought debug2! was now enabled by default
[22:49:09] <aatch> dbaupp, it is? I don't know. I don't keep up with these things
[22:49:14] <eddyb> aatch: I ain't recompiling LLVM for this
[22:49:22] <dbaupp> eddyb: you don't haev to
[22:49:29] <dbaupp> at least, you shouldn't
[22:49:29] *** Joins: heftig (heftig@moz-17D40E43.dip0.t-ipconnect.de)
[22:49:43] <cmr> aatch: enable-debug doesn't touch llvm
[22:49:48] <cmr> llvm debugging is always on
[22:49:50] <cmr> erm, @eddyb
[22:49:51] <eddyb> kill me nao
[22:50:26] <eddyb> I was using /usr/bin/rustc. oh, wait, it still doesn't work with my modified version
[22:51:38] <eddyb> wheee debug
[22:52:02] *** Quits: dbaupp (Thunderbir@moz-BFBD65B3.lns20.syd6.internode.on.net) (Ping timeout)
[22:52:08] <cmr> The ToStr for extra::uuid::Uuid uses the unhyphenated version, should it use the hyphenated version?
[22:52:17] <cmr> Every uuid I've seen in hyphenated.
[22:54:18] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[22:55:12] *** Joins: bytbox (s@moz-54E13927.washdc.fios.verizon.net)
[22:55:24] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[22:55:58] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[22:56:22] *** Joins: mikefletcher (michaelfle@DA60130B.4474880.28B68B9E.IP)
[22:58:16] <eddyb> aatch: https://gist.github.com/eddyb/aac212991118712b20df
[22:59:16] *** Joins: kasey1 (Kasey@moz-5B3D44D8.lsanca.dsl-w.verizon.net)
[23:01:32] <eddyb> [ln(1) of kind ExprNode(...... @"asm", span: None) reads  writes v(0)  precedes ln(3)]
[23:01:58] <eddyb> aatch: that's the only access to v(0), and it's a write.... so what's wrong?
[23:02:47] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[23:03:28] <eddyb> aatch: can anything other than liveness cause the error "use of possibly uninitialized value: `val`"
[23:03:57] <eddyb> or am I blind?
[23:04:08] <aatch> eddyb, well if it's not initialized on all paths. Try adding some debug output to your rule.
[23:04:17] <aatch> It's possible it's not being called.
[23:04:37] <aatch> Also, check against some similar code that does work, but isn't in asm!
[23:04:45] <maikeru> I has a sad :( --- task '<unnamed>' failed at 'explicit failure', /home/mletterle/dev/rust/src/libstd/rt/io/net/tcp.rs:87
[23:05:02] *** Joins: nkoep (nik@moz-64C29CCB.pool.mediaways.net)
[23:05:19] <aatch> so `let mut a = 1; let b = &mut a; (*b) = 2;`
[23:07:00] <earlz> So I get this error: `type `ControllerBox<TestController>` does not implement any method in scope named `handles``.. despite my code: `impl<T> ControllerBox<T>{  fn handles(@mut self, path: ~str) -> @mut ControllerBox<T>{ ... `
[23:07:20] <earlz> Do I have to do something special to make my handles implemenation apply or something?
[23:07:23] <eddyb> aatch: I doubt it's liveness now, if I try a blatant uninitialized error, I get the error just after check_local() with no initializer
[23:07:25] *** Quits: vmx (vmx@moz-D3D6C952.pools.arcor-ip.net) (Quit: Leaving)
[23:07:38] <eddyb> *try to cause
[23:07:39] *** kimundi is now known as zz_kimundi
[23:07:55] <cmr> earlz: ControllerBox is not a @mut ControllerBox
[23:08:21] <cmr> You're using @mut self, you can't give it a value.
[23:08:36] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[23:08:48] <aatch> eddyb, well that seems like progress
[23:08:53] <earlz> ahhh.. I did have `let mut test = @ControllerBox::create... `, thinking that would make @mut apply
[23:09:06] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[23:09:19] <eddyb> aatch: assuming my ExprAddrOf unwrapping is correct, here's the full error log: http://ix.io/8sD
[23:09:28] <cmr> earlz: No. @ and @mut are entirely different types.
[23:09:30] *** Quits: kasey1 (Kasey@moz-5B3D44D8.lsanca.dsl-w.verizon.net) (Connection reset by peer)
[23:09:41] <eddyb> shows up after each_bit_on_entry_frozen(id=15, on_entry=[01-00-00-00-00-00-00-00])
[23:10:06] <earlz> It would be infinitely useful if the compiler gave a bit more info when an implementation was disqualified solely due to different ownership rules on self
[23:11:22] <cmr> earlz: they're different types, nothing to do with different ownership rules.
[23:11:27] <cmr> But yes.
[23:11:28] <eddyb> aatch: uhm, does ExprAddrOf create a borrowed pointer that it ends up in borrowck?
[23:11:37] <eddyb> s/it/then
[23:11:41] <aatch> eddyb, possible
[23:11:44] <aatch> possibly*
[23:11:55] <eddyb> little bugger....
[23:12:40] <cmr> Of course it does. AddrOf returns a &ptr, which borrowck cares very much about.
[23:14:20] <eddyb> report_use_of_moved_value in borrowck has the misfortune of using the exact same error output :(
[23:14:22] <cmr> Can one call associated methods of a trait, given a trait object?
[23:14:38] <cmr> associated functions, sorry.
[23:14:57] <eddyb> aatch: time to rip apart space-time continuum
[23:15:52] <aatch> cmr, I don't think so. Since you have to specify the actual trait name
[23:17:17] <cmr> Mm.
[23:17:31] <cmr> it should be able to be in the vtable, so self.some_associated_function() wouldn't be that nonsensical.
[23:17:56] <cmr> Or even x::some_associated_function(), given x: &Trait
[23:18:14] <aatch> cmr, but associated functions aren't in the vtable.
[23:18:33] <aatch> since they are associated with the type, not the object.
[23:18:51] <cmr> vtables are also associated with the type
[23:19:04] <cmr> The implementation of the trait for the given type
[23:19:17] <earlz> I don't understand what this means: "error: cannot move out of dereference of @ pointer" In the context of trying to pass self.route to a function, where self is an @mut
[23:20:01] <cmr> earlz: passing self.route is a move. @mut has no ownership, you can't move out of it.
[23:20:27] <eddyb> gosh, I have to fix libsyntax, too
[23:20:49] *** Quits: sebcrozet (sebcrozet@moz-6DA639AF.w80-13.abo.wanadoo.fr) (Quit: Gone)
[23:21:31] <aatch> cmr, but given that a call to an associated function is known at compile-time, it doesn't have a vtable entry
[23:23:09] <cmr> aatch: but it's clearly not known: trait objects :p
[23:24:27] <ercxx> earlz: are you trying to write a url router/mapper?
[23:25:20] <aatch> cmr, associated functions are called through the type though. I assume you're talking about functions like `MyStruct::new`, right?
[23:25:48] <cmr> aatch: yes
[23:25:53] <cmr> No
[23:25:53] <earlz> ercxx: kind of, more of just trying to learn my way through it so far though
[23:25:55] <cmr> I'm not
[23:26:00] <cmr> trait Foo { fn bar(); }
[23:26:09] <cmr> It'd be Foo::bar()
[23:26:13] <cmr> But for trait objects, that doesn't work.
[23:26:53] <aatch> cmr, ok, well then that's a place it falls down.
[23:27:18] <earlz> How would I resolve `expected ~fn ... but found &fn` when trying to assign a closure to a field.? 
[23:28:12] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[23:28:26] <earlz> I would tend to think maybe @ woudl be better for it, but then I get managed closures aren't supported :( 
[23:28:30] <ercxx> earlz: can you show the code?
[23:28:48] <cmr> earlz: @fn has been replaced by @Trait
[23:29:05] <cmr> There's an explanation in the TWiR for the week that was removed (it was in the past month)
[23:29:18] <ercxx> cmr: Where can I read it?
[23:29:40] <cmr> http://cmr.github.io/blog/2013/09/30/this-week-in-rust/
[23:30:09] <ercxx> "if you really need @fn (you probably don’t)" :)
[23:30:40] <earlz> ercxx: http://pastebin.com/wNS97GpW
[23:31:17] <earlz> basicaly, how can I create a new function and then persist it in a struct is what it boils down to
[23:31:30] <ercxx> ok
[23:32:03] <ercxx> I was able to shove anonymous functions in a hashmap.
[23:32:22] *** Quits: jaen (jaen@moz-E5B18A83.catv.broadband.hu) (Ping timeout)
[23:33:05] <earlz> how though? it's always needing ~fn to persist it, but anonymous functions seem to always be &fn
[23:33:31] <earlz> unless it's possible using the lifetime stuff that I haven't learned too much about yet
[23:34:28] <eddyb> aatch: let there be dragons
[23:35:38] <earlz> ugh. I just want to finally get this to compile :/ 
[23:36:32] <earlz> "(expected ~ closure, found & closure)" how is it even possible to get an ~ closure? 
[23:36:42] <ercxx> earlz: let me find it
[23:36:55] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[23:37:33] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[23:41:43] <maikeru> eh, weird, not calling eof() causes the error to go away.. of course I don't know when to stop reading...
[23:42:34] <aatch> maikeru, sounds like a bug. I assume eof() returns whether there has been an eof?
[23:42:47] <maikeru> indeed
[23:43:19] <maikeru> http://static.rust-lang.org/doc/master/std/rt/io/trait.Reader.html#tymethod.eof
[23:43:36] <aatch> maikeru, apparently, that function has not yet been implemented
[23:44:45] <maikeru> yeah, I was about to say that this implementation doesn't look promising: fn eof(&mut self) -> bool { fail2!() }
[23:44:46] <aatch> maikeru, so calling eof() itself just fails
[23:44:57] <aatch> You should be able to handle the condition though.
[23:45:15] <maikeru> the problem is that it throws before eof is actually reached.
[23:45:27] *** Quits: nkoep (nik@moz-64C29CCB.pool.mediaways.net) (Client exited)
[23:45:54] <aatch> Oh, actually, the condition is thrown only when the error *isn't* eof
[23:47:07] <aatch> so if read returns None, that's your EOF.
[23:47:30] <maikeru> mmmm
[23:47:54] *** Quits: eddyb (eddy@3C6E2DBB.FFB4E060.A5830293.IP) (Ping timeout)
[23:48:25] *** Joins: eddyb (eddy@3C6E2DBB.FFB4E060.A5830293.IP)
[23:50:20] <maikeru> not in this context at least... 
[23:50:34] <osa1> in this code http://lpaste.net/94259 is there a way to remove `ref`s and do nested pattern match instead?
[23:53:11] <ercxx> earlz: http://pastebin.com/i8viATY6
[23:54:12] <eddyb> hmm, I've had a nifty idea for implementing memory regions - here's an example for scrolling up one row in vga text mode:
[23:54:13] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[23:54:14] <eddyb> let mem = vga_text_mode_mmio; mem.slice(COLUMNS * 2, COLUMNS * ROWS * 2).copyTo(mem.slice(0, COLUMNS * (ROWS - 1) * 2))
[23:54:32] *** Joins: tautologico (shung@E14878C0.75051ED3.7B974E06.IP)
[23:54:35] <maikeru> ah I got it. read returns the option, yeah that worked.
[23:54:54] <eddyb> the problem is that I can't just use vector slices for free, and shared_ptr scenarios makes it harder to reason about
[23:55:17] <earlz> hmm.. I don't see how that's all that different from my existing code ercxx, other than using a hashset 
[23:55:49] <tautologico> is anyone using SublimeText to edit rust code?
[23:56:05] <Amaranth> Sure
[23:56:24] <bjz_> tautologico: yep
[23:56:31] <earlz> ok ercxx I think this might actually be a bug, with a workaround
[23:56:45] <Amaranth> I should probably learn some of the features of this editor too
[23:56:48] <tautologico> bjz_: do you use this? https://github.com/dbp/sublime-rust
[23:57:01] <bjz_> tautologico: yeah. it needs some love though
[23:57:04] <earlz> try replacing `router.add_route(~"blog", ||{println("Blog!");});` with the closure being creating and assigned to a local variable first and then passed to the add_route
[23:57:08] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: brb)
[23:57:09] <Amaranth> I just use it as a text input window with syntax highlighting
[23:57:31] <bjz_> tautologico: I'm thinking it might be a good idea to draw it into the main rust repo
[23:57:34] <tautologico> so it works with current rust?
[23:57:39] <eddyb> aatch: error is in the same place, but what's borrowck still doing there? http://ix.io/8sL
[23:58:03] <bjz_> tautologico: yeah. I think I made some alterations to it though, I can't remember what, unfortunately
[23:58:08] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[23:58:30] <tautologico> it seems the repository owner is not interested in maintaining it anymore
[23:58:49] <bjz_> yep
[23:59:21] * bjz_ thinks maybe he should take it over
[23:59:58] <tautologico> that'd be cool, I'm thinking about using this :)
