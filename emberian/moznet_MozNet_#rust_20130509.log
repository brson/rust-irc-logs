[00:00:08] <graydon> kimundi: oh, I think it's fine to differentiate static / dynamic APIs. they "mean" very different things.
[00:00:11] *** Quits: dherman (dherman@2557E599.66715431.D25A875A.IP) (Quit: dherman)
[00:01:03] <dbaupp> nmatsakis: do you happen know if there is a function that checks if a pattern is entirely by-ref?
[00:01:14] *** Quits: vosen (vosen@moz-266BA656.icpnet.pl) (Quit: Leaving)
[00:02:02] <nmatsakis> dbaupp: not sure, though that's a bit stricter of a condition than is necessary
[00:02:07] <kimundi> graydon: Right, but they could be used identically. 
[00:02:09] <benh> strcat: What are the relevant specs of your laptop, out of curiosity?
[00:02:16] <nmatsakis> dbaupp: there is a pass that computes whether bindings are by move
[00:02:18] *** Quits: pcwalton (pcwalton@2557E599.66715431.D25A875A.IP) (Quit: pcwalton)
[00:02:32] <kimundi> graydon: I see it as an optimisation strategy
[00:02:34] <strcat> benh: mid-range dual-core ivy-bridge cpu and 8GiB of memory
[00:02:37] <nmatsakis> dbaupp: I have to go refresh my memory as to where these constraints are enforced
[00:02:48] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Quit: ChatZilla 0.9.90 [Firefox 21.0/20130506154904])
[00:03:51] <strcat> benh: http://pkgbuild.com/ this server takes ~20-30mins (dunno how much of the 30mins is the clone + compression)
[00:04:17] <strcat> and that's the full build
[00:04:35] *** Joins: Jesin (Jessin_@4FE0CEF2.B4552BE7.C85D72.IP)
[00:04:39] <strcat> I measured the peak memory this time and it was 2100MiB
[00:04:41] <ssbr> kimundi: people are likely to care a little deeply about the results of the optimization strategy, and not want it to silently fall back to the runtime thing though
[00:04:49] *** Joins: lkuper (lkuper@moz-D6AAFF3.cs.indiana.edu)
[00:04:50] <benh> I did  time chrt --batch 0 sh -c '../configure && make -j9' in a fresh subdirectory
[00:05:02] <ssbr> at least for myself, I like the benefit of compile-time-checked regexps to want it to silently not check syntax and types at compile time
[00:05:12] *** Joins: pcwalton (pcwalton@43CB6079.66715431.D25A875A.IP)
[00:05:12] *** ChanServ sets mode: +o pcwalton
[00:05:14] <ssbr> I'd want to say "definitely check at compile time"
[00:05:17] <benh> with 8G of memory and a i7-2820QM which I think is one generation behind yours
[00:05:27] <kimundi> ssbr: Well you'd be able to optionally assert that
[00:05:34] *** Joins: dherman (dherman@2557E599.66715431.D25A875A.IP)
[00:05:34] *** ChanServ sets mode: +o dherman
[00:06:12] *** Quits: brson (brson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[00:06:12] <ssbr> kimundi: it's substantially less clean :(
[00:06:22] <kimundi> yeah...
[00:06:24] <ssbr> perhaps the case it's clean for is where you want to parse at compile time but build at runtime
[00:06:38] <ssbr> the only way to do that when compile/runtime are cleanly separated is compile(parse!(...))
[00:06:46] <ssbr> which is not as cool as re!(...)
[00:07:03] *** Quits: Jesse (jruderman@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: Jesse)
[00:07:10] <strcat> why would you want to build at runtime though? if it was known at compile-time
[00:07:34] *** Joins: brson (brson@2557E599.66715431.D25A875A.IP)
[00:07:34] *** ChanServ sets mode: +o brson
[00:07:46] <kimundi> strcat: For custom engines. They get the AST, which would be compiletime checked
[00:07:49] <ssbr> strcat: I think the only case that could happen built-in is if a flag is determined dynamically
[00:07:51] *** Quits: Sodel_the_V (user@moz-853663E1.va.shawcable.net) (Quit: Eaten by a grue)
[00:08:03] <ssbr> e.g. if you only ignore case based on some variable
[00:08:24] <strcat> kimundi: wouldn't they get the AST at compile-time?
[00:08:46] <ssbr> strcat: a third party can't write anything the syntax extension can see
[00:09:03] <kimundi> strcat: But the code for that isn't compiled at that point
[00:09:04] <ssbr> since there's no dynamic loading yet, and no custom syntax extensions yet
[00:09:40] <ssbr> I think this is a case most people don't care about though
[00:09:47] <ssbr> the dynamically set flags are more likely to happen
[00:10:04] <kimundi> sigh, yeah...
[00:10:05] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[00:10:07] <ssbr> (although even then, not very likely)
[00:10:26] <ssbr> (so it's quite easy for one to say, 'whatever, make that slightly more difficult, that won't affect most')
[00:10:48] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[00:11:04] <strcat> rusti: std::rc::Rc::new(5)
[00:11:06] <rusti> {ptr: (0x7fe518200940 as *())}
[00:11:11] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[00:11:11] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14dd15df5 to 145a65f51: 02http://git.io/N3iJvQ
[00:11:11] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[00:11:14] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[00:11:14] <ghrust> 01[13rust01] 15bors pushed 26 new commits to 06auto: 02http://git.io/QI_78g
[00:11:14] <ghrust> 13rust/06auto 14da2ac90 15Patrick Walton: libstd: Remove mutable fields from fileinput and net_tcp
[00:11:14] <ghrust> 13rust/06auto 1492d2ec4 15Patrick Walton: libstd: Remove mutable fields from flatpipes and io_util
[00:11:15] <ghrust> 13rust/06auto 14bba0680 15Patrick Walton: libstd: Remove mutable fields from future and par
[00:11:17] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[00:11:17] <aatch> strcat, nice
[00:11:35] <strcat> he successfully updated himself ;p
[00:11:43] <sammykim> Hello ? Isn't there anyone who is working in mozilla? I want to ask how to use conference call with new number..
[00:11:50] <sammykim> we are heading a problem.
[00:11:50] <aatch> strcat, that was automatic?
[00:11:53] <strcat> aatch: yep
[00:12:03] <aatch> sweeeet
[00:12:16] <strcat> it automatically checks for a new build and just re-creates the root fs
[00:12:24] <sammykim> nmatsakis: hello?
[00:12:25] <dherman> sammykim: is the phone number not working?
[00:12:29] <dbaupp> strcat: are the builds done daily at a fixed time?
[00:12:41] <strcat> dbaupp: yes, but it checks hourly ;p
[00:12:47] <azita> sammykim: please use the new phone number that was just sent out
[00:12:52] <sammykim> azita : it's working but which number do we have to use?
[00:13:03] <sammykim> 1-650-something? or 1-800-something?
[00:13:07] <strcat> was easiest to just drop it in cron.hourly instead of trying to synchronize it
[00:13:18] <azita> i think you have to use 1-650
[00:13:21] <dbaupp> strcat: cool, cutting edge rust-bot :D
[00:13:25] *** Joins: sonwow (Mibbit@B2593FBD.40A224DC.301BE678.IP)
[00:13:26] <sammykim> when we use 1-650-something, what's password and pin number?
[00:13:42] <azita> password is the same
[00:13:45] <strcat> dbaupp: just need to get it on my server so I don't need to keep my laptop on :)
[00:13:55] <azita> please look at the updated invite that was just sent out
[00:13:57] <sammykim> 7864907#? is this one?
[00:14:01] <aatch> strcat, I might actually start using your daily builds, what the repo location again?
[00:14:03] <dbaupp> strcat: oh, is rusti running on your laptop?
[00:14:10] <strcat> aatch: http://pkgbuild.com/~thestinger/repo/
[00:14:14] *** Quits: Jesin (Jessin_@4FE0CEF2.B4552BE7.C85D72.IP) (Ping timeout)
[00:14:15] <strcat> dbaupp: yeah, for now
[00:14:22] <sammykim> 1-650-903-0800 x92 or
[00:14:22] <sammykim> 1-800-707-2533 pin 369
[00:14:22] <sammykim> then 9 5360
[00:14:23] <aatch> sammykim, is it a good idea to solicit passwords in a public chatroom?
[00:14:30] <dherman> sammykim: let's not share pins on a public channel
[00:14:31] <strcat> my server is arm, and I'm not sure if rust is working on non-android arm yet
[00:14:31] <sammykim> sorry;;
[00:14:33] <dherman> we'll need to change it now
[00:14:45] <sammykim> I'm sorry.
[00:15:11] *** Quits: jclements (jclements@2557E599.66715431.D25A875A.IP) (Quit: jclements)
[00:15:26] <dbaupp> strcat: I saw someone say they could run hello world
[00:15:26] <aatch> fortunately I have no desire to spend a fortune on international calling to gatecrash a conference call.
[00:15:47] <kimundi> ssbr, heading to bed now.
[00:15:53] *** Quits: mschifer (Adium@2557E599.66715431.D25A875A.IP) (Quit: Leaving.)
[00:16:14] *** Quits: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: ChatZilla 0.9.90-rdmsoft [XULRunner 18.0.2/20130201065344])
[00:16:30] <sammykim> dherman , azita : Could you send mail to duddlf.choi@samsung.com for toll free number and password.?
[00:16:39] <strcat> dbaupp: it's a bit simpler now, the bot itself runs in the VM
[00:16:43] <strcat> and just makes a container for each req.
[00:16:53] <strcat> now that I set up the container sanely
[00:17:22] <dbaupp> strcat: oh nice
[00:17:28] <strcat> rusti: core::run::run_program("ls", [~"/dev", ~"/sys", ~"/proc"]);
[00:17:30] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/VGfO
[00:17:51] <strcat> rusti: core::run::run_program("uname" , [~"-a"]);
[00:17:53] <rusti> Linux sandbox 3.8.11-1-ARCH #1 SMP PREEMPT Wed May 1 20:18:57 CEST 2013 x86_64 GNU/Linux
[00:18:00] <azita> sammykim: emailed the number 
[00:18:26] <strcat> dbaupp: vm has 256MiB of memory and the container gets 128MiB
[00:18:28] <sammykim> azita: I'm sorry about this situation. 
[00:18:36] <sammykim> azita: Thanks 
[00:18:52] *** Quits: sonwow (Mibbit@B2593FBD.40A224DC.301BE678.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[00:19:39] <dbaupp> rusti: 1
[00:19:39] <dbaupp> rusti: 2
[00:19:39] <dbaupp> rusti: 3
[00:19:41] <rusti> 1
[00:19:41] <rusti> 2
[00:19:41] <rusti> 3
[00:19:58] <dbaupp> strcat: oh, it doesn't oom with 3 requests ;P
[00:20:12] <strcat> dbaupp: it does them synchronously
[00:20:29] <strcat> which is why I think I'm going to disable PMs again
[00:20:37] <benh> aw :(
[00:20:42] <aatch> strcat, aww, I liked that.
[00:20:45] <aatch> Oh well.
[00:20:54] <strcat> well... I'll leave it until a spammer breaks it ;p
[00:21:16] <strcat> it wouldn't turn out well if one of those spammers came along and spammed 100k requests
[00:21:19] <aatch> fortunately #rust doesn't get many spammers
[00:21:25] *** Joins: Sodel_the_V (user@moz-853663E1.va.shawcable.net)
[00:21:25] <cmr> rate limit?
[00:21:36] <rhodesd> Is there a way to bind pattern matches? in haskell binding to 'bar' in a function 'foo' goes like: foo bar@(Point x y z) = dosomething bar;
[00:21:38] <benh> strcat: geordi on freenode had its own channel for tooling around with the bot without interrupting conversations with debugging sessions, maybe that might be a compromise?
[00:21:55] <aatch> robarnold, pretty much the same I think
[00:22:02] <strcat> benh: yeah
[00:22:08] <strcat> benh: the thing is I can run more than one bot process
[00:22:20] <strcat> but I don't want the #rust one to be blocked by pms
[00:22:22] <pcwalton> rhodesd: yes, same syntax
[00:22:23] <pcwalton> use @
[00:22:25] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Client exited)
[00:22:30] <dbaupp> rhodesd: yes, that works, but it's in the process of being removed
[00:22:37] <dbaupp> (and/or changed)
[00:22:45] <aatch> rusti: match 5 { a @ 5 => a }
[00:22:46] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/OQXR
[00:22:54] <rhodesd> ok, thanks!
[00:23:03] <aatch> rusti: match 5 { a @ 5 => a, _ => fail!() }
[00:23:04] <rusti> 5
[00:23:05] <Sodel_the_V> YAY! I never knew about that syntax!
[00:23:32] <aatch> Sodel_the_V, and like dbaupp said, it's likely going to be changed
[00:24:03] <Sodel_the_V> Well, it's the feature I'm happy with. I'm okay if the shed's painted a different colour. :)
[00:24:37] <aatch> Sodel_the_V, I like that outlook.
[00:24:47] <dbaupp> rusti: match Some(4) { Some(a @ _) => a, None => -1 }
[00:24:48] <rusti> 4
[00:25:04] <aatch> semantics >> syntax
[00:25:27] <Sodel_the_V> Hear hear!
[00:25:31] <dbaupp> rusti: match @1 { a@@1 => a, _ => -1 }
[00:25:32] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/YKZG
[00:25:58] *** Quits: true_droid (Adium@moz-123FD9B8.beck.volia.net) (Ping timeout)
[00:26:05] <aatch> rusti: match @1 { a@@1 => a, _ => fail!() }
[00:26:07] <rusti> @1
[00:26:17] <aatch> -1 != @-1
[00:26:28] <dbaupp> aatch: yup
[00:27:00] *** kimundi is now known as zz_kimundi
[00:27:21] * aatch has not had package signing on for a while >.>
[00:27:51] *** Joins: steven_is_false (quassel@moz-144077DE.bchsia.telus.net)
[00:29:35] *** Joins: true_droid (Adium@moz-123FD9B8.beck.volia.net)
[00:30:23] *** Joins: Jesin (Jessin_@4FE0CEF2.B4552BE7.C85D72.IP)
[00:30:32] <strcat> aatch: have to make that repo SigLevel = Optional since I can't really sign it
[00:30:38] <strcat> if only pkgbuild.com had https
[00:30:58] <strcat> anyway it's not mirrored so the usual need for package signing isn't really there... if there was https ;p
[00:31:14] <aatch> strcat, I did, but I now have it turned on for the other repos too
[00:31:20] *** Quits: true_droid (Adium@moz-123FD9B8.beck.volia.net) (Quit: Leaving.)
[00:33:00] <strcat> I have to nag a server admin to add my name to the my page so I might as well get them to enable ssl
[00:33:42] <strcat> rusti: 5
[00:33:43] <rusti> 5
[00:34:07] <strcat> rusti: loop {}
[00:34:08] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/ZPGb
[00:34:19] <strcat> rusti: fn foo() { loop {} }; foo()
[00:34:25] <rusti> timed out after 5 seconds
[00:35:34] *** Joins: jessicah (jessicah@moz-B8A3AE25.massey.ac.nz)
[00:40:54] *** Joins: mib_9zqggn (Mibbit@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[00:41:11] *** Quits: dbaupp (Thunderbir@moz-7D1EB5E8.lns20.syd6.internode.on.net) (Quit: dbaupp)
[00:42:32] <cmr> when's the warning police coming through?
[00:42:50] <aatch> cmr when somebody get's annoyed enough to fix them
[00:42:59] <cmr> oh goodie
[00:43:23] <cmr> I was hoping there wasn't someone who was assigned to do it on a regular basis, because they're starting to really annoy me:p
[00:43:54] *** Joins: wilmoore (wilmoore@moz-B74097.factorylabs.com)
[00:44:43] *** Quits: echristo (echristo@CFC3C6C3.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[00:46:35] <ssbr> Is this a compelling argument? https://github.com/mozilla/rust/wiki/Lib-re#compatibility
[00:47:58] <Sodel_the_V> Can someone give a short explanation of the `substs` struct in the compiler? I haven't quite been able to wrap my head around it.
[00:48:52] <cmr> ssbr: yes.
[00:48:59] <cmr> Certainly convinced me
[00:49:04] *** Joins: dbaupp (Thunderbir@moz-7D1EB5E8.lns20.syd6.internode.on.net)
[00:49:11] <ssbr> cmr: excellent :)
[00:49:19] <Sodel_the_V> I think it's the `tps` field that's tripping me up.
[00:50:16] <Sodel_the_V> Er, scratch that last statement.
[00:51:45] *** Joins: wilsonk-laptop (kvirc@moz-39EFBFC2.cg.shawcable.net)
[00:52:23] *** Quits: wilsonk|2 (kvirc@moz-39EFBFC2.cg.shawcable.net) (Ping timeout)
[00:54:24] *** Quits: Luqman (laden@moz-345B5EBA.csclub.uwaterloo.ca) (Ping timeout)
[00:54:38] *** Quits: aatch (aatch@moz-2BB0AC01.cable.telstraclear.net) (Client exited)
[00:55:45] <nmatsakis> Sodel_the_V: the Substs contains the values for type parameters...
[00:55:55] <nmatsakis> Sodel_the_V: tps stands for "type parameters"
[00:56:16] <nmatsakis> Sodel_the_V: it contains the value for each of the type parameters in scope
[00:57:15] <nmatsakis> Sodel_the_V: so e.g. if you had "fn map<A,B>(v: &[A], ...)"
[00:57:48] <nmatsakis> Sodel_the_V: tps would have length 2 when substituting values for A&B into the type of `v`
[00:58:25] *** Joins: aatch (aatch@moz-2BB0AC01.cable.telstraclear.net)
[00:58:40] <aatch> Woo new kernel!
[00:59:02] <cmr> woo!
[00:59:05] <Sodel_the_V> nmatsakis: Why wouldn't the substs for a ty_trait only contain the relevant type params?
[00:59:29] <Sodel_the_V> Rather than all off the type params in scope?
[00:59:38] <Sodel_the_V> of*
[01:00:08] <Sodel_the_V> nmatsakis: (Also, thanks!)
[01:00:18] *** Quits: jorendorff (jorendorff@moz-30F4FB9E.hfc.comcastbusiness.net) (Quit: jorendorff)
[01:00:32] *** Quits: dherman (dherman@2557E599.66715431.D25A875A.IP) (Quit: dherman)
[01:02:04] *** Quits: azita (Azita@2557E599.66715431.D25A875A.IP) (Quit: azita)
[01:02:08] <Sodel_the_V> Mm, I just discovered ty_param(p) and p.idx. So, that's how the correct item in tps is selected.
[01:03:28] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[01:04:34] <dbaupp> nmatsakis: I'm thinking of moving the match-on-struct-with-dtor check to middle::check_match, where it only fails if there is a move in the pattern (like with &/~/@)
[01:04:39] <dbaupp> nmatsakis: is that reasonable?
[01:05:57] <seth> when the rust docs say a function "fails", presumably that means the _task_ fails?
[01:05:58] *** Quits: inolen (Adium@moz-9F4F17DF.tourcaster.com) (Quit: Leaving.)
[01:06:11] <seth> specifically i'm wondering about core::cell::take() here
[01:06:25] <nmatsakis> Sodel_the_V: I'm not sure if I understand your question
[01:06:30] <nmatsakis> dbaupp: where is it now?
[01:06:48] <dbaupp> nmatsakis: um, typeck::_match I think
[01:07:05] <nmatsakis> dbaupp: yes, check_match is a better place for it
[01:07:17] <aatch> seth, the task fails yes
[01:07:19] <nmatsakis> dbaupp: since that takes place after we have computed the set of move bindings
[01:07:32] <aatch> and by default task failure propogates up to the parent tasks
[01:08:00] *** Quits: pcwalton (pcwalton@43CB6079.66715431.D25A875A.IP) (Quit: pcwalton)
[01:08:15] <aatch> however that can be changed (for example the test harness runs each test in it's own task so you can just fail! a test)
[01:08:27] <seth> aatch: that's a bit extreme... what is the use case for cell?
[01:08:38] <seth> aatch: why would i prefer it over option? (i'm probably missing something simple)
[01:08:47] <Sodel_the_V> nmatsakis: Actually, I'm not sure if I understand what I'm asking. I guess I'll have to review the code a bit more. 
[01:08:50] <aatch> seth, the use case for Cell is a nullable location.
[01:08:53] *** Joins: pcwalton (pcwalton@43CB6079.66715431.D25A875A.IP)
[01:08:53] *** ChanServ sets mode: +o pcwalton
[01:09:04] <aatch> It basically just has some convenience over Option
[01:09:12] <dbaupp> nmatsakis: is there a built-in way to "mark" the pattern/struct as shouldn't-be-moved-out of in typeck::_match, or should I also move this logic to middle::check_match?
[01:09:17] <aatch> (and in fact uses Option<T> behind the scenes)
[01:09:44] <aatch> I haven't found many uses for Cell though to be fair
[01:10:00] <seth> i'm struggling to think of when i would want such a thing
[01:10:07] <seth> it's used in quite a few places in servo, i notice
[01:10:19] <seth> but i'm not sure why cell was chosen there...
[01:10:19] <nmatsakis> dbaupp: by "this logic" do you mean "checking if it is a struct with a dtor"?
[01:10:38] <dbaupp> nmatsakis: yes
[01:10:52] <nmatsakis> dbaupp: I figured you'd just move that logic into check_match---that is, when you see a pattern matching a type with a dtor, we then check that there are no by-move subbindings, basically same as with @T and &T
[01:11:11] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[01:11:11] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/QI_78g
[01:11:11] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[01:11:32] <dbaupp> nmatsakis: yup, cool, just checking :)
[01:12:47] *** Quits: Jesin (Jessin_@4FE0CEF2.B4552BE7.C85D72.IP) (Ping timeout)
[01:13:25] <pcwalton> yesss
[01:13:32] <pcwalton> argument modes and mutable fields are now gone from the language
[01:13:41] <aatch> seth, also, some things in rust are outdated and/or made obsolete by more recent changes to the compiler
[01:13:49] <pcwalton> well, you can write mut, but it's ignored
[01:13:56] <pcwalton> need a snapshot to fully remove it
[01:14:09] <aatch> pcwalton, `core::cell::Cell` still useful?
[01:14:12] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[01:14:13] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/gCc-1w
[01:14:13] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[01:14:33] <steven_is_false> DANG IT BORS, I was just checking my patches against the latest incoming.
[01:14:54] <steven_is_false> Do I have to check again if I want to make a pull request?
[01:14:57] <nmatsakis> pcwalton: did it land?
[01:15:03] <pcwalton> nmatsakis: yup! just now
[01:15:07] <nmatsakis> pcwalton: wow! great.
[01:15:20] <pcwalton> aatch: yeah to work around the lack of one-shot closures
[01:15:29] <Sodel_the_V> nmatsakis: I think I was confused by the fact that `tps` is a list of type parameters that an arg or var *might* be, and `self_ty` is the trait that *will* be substituted as the self type.
[01:15:29] <dbaupp> steven_is_false: probably not, unless you touch similar areas
[01:15:34] <seth> pcwalton: could you explain in more detail?
[01:15:38] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Quit: Leaving.)
[01:15:40] <seth> pcwalton: i can't understand its use
[01:15:47] <steven_is_false> dbaupp: Ok.
[01:15:48] <aatch> steven_is_false, depends, probably not required if it checks ok on a recent commit
[01:15:56] <pcwalton> seth: try to move out of something you closed over in a do spawn { ... }
[01:15:59] <pcwalton> that's where it's useful
[01:16:22] <aatch> Before Cell, there was a thing called "The Option dance"
[01:16:26] <nmatsakis> Sodel_the_V: yeah, in reality Self is basically the same as any other type parameter, but we break it out specially...
[01:16:31] <aatch> Cell basically does the option dance for you.
[01:16:42] <seth> pcwalton: yeah, i guess aatch is about to explain, but it sounds like option can be used in the same way...
[01:16:46] <pcwalton> yes, it can
[01:16:52] <pcwalton> but Cell more clearly specifies your intent
[01:16:53] <seth> but maybe the option dance is more verbose than i'm envisioning =)
[01:17:16] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[01:17:16] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/gCc-1w
[01:17:16] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[01:17:17] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[01:17:17] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/MvJ8_A
[01:17:17] <ghrust> 13rust/06auto 14cb66d89 15Zack Corr: Remove #[cfg(notest)] and use #[cfg(not(test))] to cooincide with #[cfg(debug)]
[01:17:17] <ghrust> 13rust/06auto 143bbbb31 15bors: auto merge of #6327 : z0w0/rust/rm-notest, r=brson...
[01:17:17] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[01:17:32] <steven_is_false> IMO I've found that a lot of times a more functional approach can get rid of the option dance.
[01:17:46] <seth> so basically cell serves to document when you're following this particular pattern
[01:17:53] * aatch is trying to find an example in core
[01:18:05] <steven_is_false> For instance, instead of using range, I made my own function range_fold which is like vec::foldl but for numbers.
[01:18:12] <strcat> seth: moving out of option won't work right now
[01:18:22] <strcat> it won't let you move into a closure with swap_unwrap
[01:18:37] <strcat> Cell is a workaround. it uses unsafe code under the hood (but implements a safe interface)
[01:18:45] <seth> strcat: when you say "right now", does that mean it's not a permanent situation?
[01:18:51] <strcat> should go away mostly or entirely in the future
[01:19:01] <seth> gotcha
[01:19:03] <aatch> strcat, though it does use transmute_mut, which is probably not a good idea
[01:19:12] <strcat> aatch: I marked it with #[mutable]
[01:19:16] <strcat> so it's not a Const type anymore
[01:19:22] <aatch> strcat, ah good.
[01:19:48] * aatch remembers mention of possibly informing LLVM of the mutability of data
[01:22:12] <aatch> There are lots of examples of the option dance in core::comm
[01:22:44] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Connection reset by peer)
[01:22:47] <aatch> so it can send data along channels
[01:23:20] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[01:27:35] *** Quits: steven_is_false (quassel@moz-144077DE.bchsia.telus.net) (Ping timeout)
[01:27:59] <seth> aatch: thanks for the reference, i was curious to see an example of the pattern
[01:28:52] *** Joins: steven_is_false (quassel@moz-144077DE.bchsia.telus.net)
[01:29:10] *** Joins: Jesin (Jessin_@4FE0CEF2.B4552BE7.C85D72.IP)
[01:34:58] *** Quits: int3_ (int3_@moz-34B610F6.subnet-248.amherst.edu) (Client exited)
[01:38:44] *** Quits: thomaslee_ (thomaslee@moz-6C3931E3.static.twtelecom.net) (Client exited)
[01:45:49] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[01:50:48] *** Quits: wilmoore (wilmoore@moz-B74097.factorylabs.com) (Client exited)
[01:52:00] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Ping timeout)
[01:58:34] *** Joins: inolen (Adium@moz-FA2406D8.socal.res.rr.com)
[01:59:43] *** Quits: Sodel_the_V (user@moz-853663E1.va.shawcable.net) (Input/output error)
[02:05:44] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[02:05:56] *** Joins: int3_ (int3_@moz-E4EAE753.hsd1.ma.comcast.net)
[02:09:05] <mib_9zqggn> d
[02:09:48] <aatch> db
[02:09:51] <aatch> qp
[02:10:28] *** Quits: pcwalton (pcwalton@43CB6079.66715431.D25A875A.IP) (Quit: pcwalton)
[02:10:46] <graydon> hm hm
[02:11:00] <graydon> I wonder if I should just post these rust-lang.org traffic stats
[02:11:14] <aatch> graydon, are they good?
[02:11:26] <cmr> r? https://github.com/mozilla/rust/pull/6347
[02:11:35] <graydon> I have no idea what "good" means
[02:11:40] <graydon> many people visit our site!
[02:11:54] <lkuper> graydon: it's my secret botnet
[02:12:03] *** Quits: Jesin (Jessin_@4FE0CEF2.B4552BE7.C85D72.IP) (Ping timeout)
[02:12:11] *** Joins: enticeing (user@40584768.29B601FE.5037098C.IP)
[02:12:19] <aatch> graydon, is the number per unit-time increasing?
[02:13:03] <graydon> yeah
[02:13:11] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[02:13:11] <graydon> and we got quite a traffic spike on 0.6
[02:13:19] <aatch> graydon, then they are good
[02:13:49] <enticeing> gah, what all do i need to build rust-bindgen anyways
[02:13:59] <enticeing> i have llvm/clang built and installed and it's still complaining
[02:14:21] <aatch> enticeing, did you perform the ritual sacrifice?
[02:14:35] <graydon> we had a visitor from RISC OS!
[02:14:42] <enticeing> i actually sacrificed all my goats yesterday
[02:14:46] <graydon> and 2 from Amiga
[02:14:50] <graydon> and 3 from OS/2
[02:14:54] <graydon> hooray
[02:15:09] <cmr> I didn't even know those were still alive and kicking.
[02:15:22] *** Joins: wilmoore (wilmoore@moz-B74097.factorylabs.com)
[02:15:27] <enix> I'm very confused about why some code won't compile. Is it frowned upon to paste my code here as ask why? Its just 11 lines.
[02:15:37] <cmr> Probably more of a twitch by now...
[02:15:39] <aatch> enix, pastebin or gist
[02:15:40] <cmr> enix: paste on gist.github.com
[02:16:06] <aatch> otherwise, we are happy to help with your code
[02:16:18] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[02:16:32] <aatch> (what kind of programming language room doesn't help people with the language?)
[02:17:07] <steven_is_false> enticeing: I don't recall rust-bindgen to be too difficult to build.
[02:17:42] <enticeing> i've built and installed llvm/clang and it's still complaining about not being able to find -lclang
[02:17:51] <enticeing> something about being on amd64 maybe?
[02:18:08] <cmr> enticeing: Well, is there a libclang anywhere?
[02:18:13] <enticeing> there is
[02:18:23] <cmr> Is it in your library include path?
[02:18:23] <aatch> on the path?
[02:18:25] <enticeing> /usr/lib64/llvm/libclang.so
[02:18:34] <enticeing> it should be in the include path
[02:18:54] <cmr> Also, is it a hanging symlink?
[02:19:00] <enticeing> although it's been a while since i've had to muck about with library include paths
[02:19:19] <cmr> cc -L /usr/lib64/llvm
[02:19:23] *** Quits: int3_ (int3_@moz-E4EAE753.hsd1.ma.comcast.net) (Client exited)
[02:19:40] <cmr> (and on linux you can add it to /etc/ld.so.conf and run ldconfig for it to pick it up at runtime)
[02:19:46] <enticeing> it's not a symlink at all
[02:19:48] *** Joins: int3_ (int3_@moz-E4EAE753.hsd1.ma.comcast.net)
[02:19:50] <cmr> (without modifying LD_LIBRARY_PATH, that is)
[02:20:54] <aatch> enticeing, are you using clang to build?
[02:22:21] <enticeing> it fails whether cc is gcc or clang
[02:22:48] <aatch> enticeing, with clang, do clang -print-search-dirs
[02:23:02] <aatch> it'll tell you where it is searching for libraries
[02:24:10] <dbaupp> graydon: I think bors might've hung again?
[02:25:09] *** Quits: int3_ (int3_@moz-E4EAE753.hsd1.ma.comcast.net) (Ping timeout)
[02:25:16] <graydon> kicked
[02:25:19] <graydon> going home how. it's late.
[02:25:23] <enticeing> and that wasn't put in my include path for whatever reason, i think
[02:25:34] *** Quits: graydon (Adium@A5087023.2354C43D.D8E68FF6.IP) (Quit: Leaving.)
[02:25:52] *** Joins: graydon (Adium@A5087023.2354C43D.D8E68FF6.IP)
[02:25:52] *** ChanServ sets mode: +qo graydon graydon
[02:25:53] *** Quits: graydon (Adium@A5087023.2354C43D.D8E68FF6.IP) (Quit: graydon)
[02:27:00] <enticeing> /usr/lib64 *is* in `clang -print-search-dirs` though
[02:27:15] <cmr> But /usr/lib64/llvm isn't
[02:27:21] <aatch> enticeing, no idea then.
[02:27:21] <cmr> right?
[02:27:32] <enix> Ok, the code I have that i'm confused about is: https://gist.github.com/DaGenix/5545095
[02:27:33] <enticeing> cmr: but it should search subdirs, right?
[02:27:36] <cmr> afaik it doesn't descend into subdirs
[02:27:45] <aatch> enticeing, it does not
[02:27:50] *** Joins: Jesin (Jessin_@4FE0CEF2.B4552BE7.C85D72.IP)
[02:29:01] <enix> its not useful code, but while trying to learn the language, i was expirimenting with passing around closures to other closures, and its not working like I would have expected it it. I'm using a version of Rust i compiled from git master on Apr 30.
[02:29:49] <aatch> enix, it's not really possible to pass around owned closure like that.
[02:29:57] <cmr> enix: did you see http://static.rust-lang.org/doc/tutorial.html#closures ?
[02:30:02] <cmr> there are different kinds of closures
[02:31:10] <aatch> I'm not completely savvy on the interaction of closures with other systems, but I do know that moving data into and out of closures can be tricky
[02:31:18] *** Quits: dbaupp (Thunderbir@moz-7D1EB5E8.lns20.syd6.internode.on.net) (Ping timeout)
[02:32:34] <aatch> Ah, I got it! So the dangling allocation is a bug.
[02:32:38] <aatch> (obviously)
[02:32:40] <enticeing> oh my, you'd think the people across the hall don't remember it's quiet this week :(
[02:33:17] <enix> Where am I going wrong? I'm able to move an owned closure into another owned closure without problems. Alternatively, I can pass an owned closure into a function that then invokes that owned closure. However, I can't combine those two operations.
[02:33:20] <aatch> In the case of the first one, basically, you need to think about the possiblity of a closure being run more than once
[02:33:38] <aatch> the one returned from get in this case
[02:33:52] <aatch> call() takes ownership of it's argument
[02:34:22] <enix> ah! ok, that makes lots of sense
[02:34:51] <aatch> so calling the surrounding closure more than would cause it to access a moved value
[02:35:08] <enix> I assume my 3rd snippet is a compile bug, though, right? I wouldn't expect the code to compile and then coredump.
[02:35:24] <aatch> enix, it is a bug.
[02:35:33] <enix> ok, cool, thanks!
[02:35:42] <aatch> If you want, try it on a more recent build from incoming.
[02:35:45] *** Joins: sonwow (sonwow@5AB4884B.FCC4549.14D5B978.IP)
[02:36:02] <aatch> There was recently a big patch that affected that kind of thing recently
[02:36:08] <aatch> so it may have been fixed
[02:36:09] <enix> ok, I'll give it a shot. Should I report if it still coredumps or is this some known failure?
[02:36:29] <aatch> enix, check to see if it's been reported already, otherwise go ahead
[02:36:52] <cmr> It runs correctly on incoming-as-of-right-now
[02:37:18] <aatch> https://github.com/mozilla/rust/issues/6141
[02:37:43] <cmr> So does that
[02:38:07] <cmr> Oh niko even noted it was fixed
[02:38:29] <aatch> I just closed the issue
[02:38:59] <enticeing> does this still hang rustc on incoming? https://github.com/mozilla/rust/issues/6238
[02:39:31] <cmr> nope
[02:39:43] <enticeing> i'll mark that closed then
[02:39:43] <cmr> but... it doesn't error, either.
[02:39:50] <enticeing> wait, what?
[02:40:07] <enticeing> you have to use the struct, sorry
[02:40:12] <enticeing> just initialize it
[02:40:12] <cmr> oh
[02:40:22] <enticeing> that's when it hangs
[02:40:41] <cmr> How do I initialize it?
[02:41:09] <enticeing> just `let group = Group{ contents: None };` should do it
[02:41:30] *** Quits: Jesin (Jessin_@4FE0CEF2.B4552BE7.C85D72.IP) (Ping timeout)
[02:41:42] <cmr> ah, yupah, yup.
[02:41:48] <cmr> whoops
[02:41:57] <aatch> still hangs
[02:42:00] <enticeing> it *should* error
[02:42:09] <enticeing> someone should get one of the higher-ups to take a look at it :P
[02:42:14] *** Joins: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net)
[02:42:23] <cmr> enticeing: you look at it!
[02:42:41] <aatch> and more-or-less OOMs
[02:42:43] <aatch> Woo!!
[02:42:44] <cmr> even just getting a backtrace would be useful
[02:43:07] *** Joins: Sodel_the_V (user@moz-853663E1.va.shawcable.net)
[02:43:14] * cmr zzz
[02:43:27] *** Joins: dbaupp (Thunderbir@moz-8807BCB5.lns20.syd6.internode.on.net)
[02:49:39] <enticeing> okay, so not knowing much about gdb
[02:50:01] <enticeing> i started it up, let it run a while, then stopped it and did a backtrace
[02:50:36] <enticeing> https://gist.github.com/enticeing/5545231
[02:51:23] *** Joins: akashj87 (akash@95234D83.1A55CE86.35E3DDC8.IP)
[02:52:13] <enticeing> it seems to be stuck in pthread_cond_wait
[02:53:09] <sammykim> r? https://github.com/mozilla/rust/pull/6297
[02:53:19] <jdm> enticeing: t a a bt
[02:53:27] *** Joins: int3_ (int3_@moz-97B8C071.subnet-248.amherst.edu)
[02:53:32] <enticeing> err what?
[02:53:44] <jdm> enticeing: it's a gdb command to get backtraces for all threads
[02:53:49] <jdm> thread apply all bt
[02:53:50] *** Quits: wilmoore (wilmoore@moz-B74097.factorylabs.com) (Client exited)
[02:54:04] <enticeing> ah, thanks
[02:54:20] <aatch> enticeing, it traverses the type while trying to emit an `alloca` for it.
[02:55:01] *** Quits: thelivingded (thelivingd@moz-9453CC48.austin.res.rr.com) (Ping timeout)
[02:56:15] <enticeing> yeah, i can see a lot of type_contents::type_size
[02:56:16] *** aatch is now known as aatch|lunch
[02:56:49] *** Joins: Jesin (Jessin_@4FE0CEF2.B4552BE7.C85D72.IP)
[03:00:35] *** Quits: dbaupp (Thunderbir@moz-8807BCB5.lns20.syd6.internode.on.net) (Ping timeout)
[03:00:51] *** Quits: zz_kimundi (kimundi@moz-587F344C.dip0.t-ipconnect.de) (Ping timeout)
[03:03:06] *** Joins: fread2281 (zcarterc@moz-CB181B42.dia.static.qwest.net)
[03:04:04] *** Joins: zz_kimundi (kimundi@moz-88B5CFB8.dip0.t-ipconnect.de)
[03:04:21] *** zz_kimundi is now known as kimundi
[03:05:21] *** Joins: erickt (Adium@moz-6A641B4B.maine.res.rr.com)
[03:05:22] *** Joins: Luqman (laden@moz-345B5EBA.csclub.uwaterloo.ca)
[03:07:51] <fread2281> someone help me with getting my lz4 bindings to link with lz4 and build lz4?
[03:08:42] *** Quits: ksev (DrunkenPan@CB7DAFF1.B919BE8A.47C41102.IP) (Ping timeout)
[03:09:11] *** Quits: rntz (rntz@moz-C76A8D96.sp.cs.cmu.edu) (Ping timeout)
[03:09:26] *** Quits: brson (brson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[03:10:58] *** Quits: Jesin (Jessin_@4FE0CEF2.B4552BE7.C85D72.IP) (Ping timeout)
[03:11:53] *** Quits: jdm (jdm@F2D29657.F60B0462.67AC9B1.IP) (Quit: Lost terminal)
[03:12:29] <strcat> nmatsakis: https://github.com/mozilla/rust/pull/6349 r?
[03:15:18] *** Joins: rntz (rntz@moz-C76A8D96.sp.cs.cmu.edu)
[03:17:15] *** Quits: sully (sully@moz-45967CBE.emarhavil.com) (Ping timeout)
[03:17:45] *** Joins: sully (sully@moz-45967CBE.emarhavil.com)
[03:20:09] *** Joins: catpigger (catpig@moz-42667BF1.dip0.t-ipconnect.de)
[03:21:16] *** Quits: catpig (catpig@moz-4F520E5D.dip0.t-ipconnect.de) (Ping timeout)
[03:22:04] *** Quits: Sodel_the_V (user@moz-853663E1.va.shawcable.net) (Quit: Eaten by a grue)
[03:23:57] *** Quits: erickt (Adium@moz-6A641B4B.maine.res.rr.com) (Quit: Leaving.)
[03:26:29] *** Quits: lkuper (lkuper@moz-D6AAFF3.cs.indiana.edu) (Ping timeout)
[03:27:08] *** Joins: Jesin (Jessin_@4FE0CEF2.B4552BE7.C85D72.IP)
[03:27:12] *** Joins: solancile (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net)
[03:27:28] *** Quits: jgilbert (jgilbert@2557E599.66715431.D25A875A.IP) (Input/output error)
[03:29:02] *** Parts: judder (maradukewa@DABDEEA3.F2C0D0AC.78E362FE.IP) ()
[03:29:45] *** Joins: jgilbert (jgilbert@2557E599.66715431.D25A875A.IP)
[03:31:11] *** Quits: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net) (Quit: Computer has gone to sleep.)
[03:31:13] *** Joins: bEcker (Thunderbir@moz-13862EB0.resnet.ucsc.edu)
[03:31:29] *** Quits: bEcker (Thunderbir@moz-13862EB0.resnet.ucsc.edu) (Quit: bEcker)
[03:32:16] *** aatch|lunch is now known as aatch
[03:32:30] <aatch> fread2281, link?
[03:35:56] *** Quits: jgilbert (jgilbert@2557E599.66715431.D25A875A.IP) (Ping timeout)
[03:37:45] <steven_is_false> rusti: let x : &[Add <int, int>] = fail! ("foo"); "Type checks!"
[03:37:47] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/Ldfh
[03:39:09] *** Quits: sonwow (sonwow@5AB4884B.FCC4549.14D5B978.IP) (Quit: leaving)
[03:40:32] <fread2281> aatch: my structure is like https://github.com/fread2281/rust-lz4 , how do I link+build lz4?
[03:41:05] <aatch> fread2281, recursive make?
[03:41:19] <aatch> I guess it depends on what you want to build.
[03:42:11] <fread2281> aatch: the lz4 makefile is just for binaries, I want a standalone rust lib with lz4 and bindings
[03:42:53] <aatch> fread2281, you can pass linker arguments to rustc with --link-args
[03:43:07] <fread2281> aatch: and I have no clue what to pass
[03:43:23] *** Joins: Jesse (jruderman@moz-BE33DA21.fw1.sfo1.mozilla.net)
[03:45:56] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[03:50:51] *** Joins: passcod (passcod@moz-5BCF5019.passcod.name)
[03:53:35] <TD-Linux> fread2281, you can also specify link args in a .rc file
[03:54:15] <TD-Linux> fread2281, http://static.rust-lang.org/doc/tutorial-ffi.html
[03:55:07] <strcat> there's nothing special about .rc anymore
[03:55:27] <strcat> the rust source still uses them because it has a makefile looking for those
[03:55:55] <aatch> strcat, there was talk of having rustpkg look for them too
[03:55:56] <aatch> I think
[03:56:12] <aatch> I also like them as "point rustc here" files
[03:56:44] <strcat> well cargo used to do that ;p
[03:56:53] *** Joins: gfan (Mibbit@moz-3C6E5E57.dllstx.fios.verizon.net)
[03:57:56] <fread2281> TD-Linux: except I don't know what link args to use
[03:58:08] <TD-Linux> fread2281, the same as you would use in C? -lz4?
[03:58:44] <fread2281> TD-Linux: I'm not from C/++?
[03:58:49] *** Quits: gfan (Mibbit@moz-3C6E5E57.dllstx.fios.verizon.net) (Quit: http://www.mibbit.com ajax IRC Client)
[03:59:13] <TD-Linux> fread2281, oh that's harder then, you have to know at least a little bit to interface to a C library :)
[03:59:20] <TD-Linux> but you use -l<libraryname>
[03:59:40] <TD-Linux> which will cause it to dynamically link with the file named lib<libraryname>.so
[04:00:35] *** Quits: SiegeLord (sl@moz-56D7E78.bstnma.fios.verizon.net) (Quit: It's a joke. It's all a joke.)
[04:02:44] <fread2281> TD-Linux: right, but I want to statically link to a .o file I think
[04:02:44] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.0)
[04:02:47] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[04:02:55] *** Joins: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP)
[04:03:10] <steven_is_false> I don't understand what issue https://github.com/mozilla/rust/issues/6119 means by crate level.
[04:05:34] <aatch> fread2281, I've got a thrown together makefile for you, I'm about to submit a pull req
[04:09:30] *** Quits: Jesin (Jessin_@4FE0CEF2.B4552BE7.C85D72.IP) (Ping timeout)
[04:11:14] *** Quits: lmandel (lmandel@FE1F74.86ED00A7.971E19F6.IP) (Quit: lmandel)
[04:12:42] *** Joins: lmandel (lmandel@FE1F74.86ED00A7.971E19F6.IP)
[04:14:51] *** Quits: lmandel (lmandel@FE1F74.86ED00A7.971E19F6.IP) (Quit: lmandel)
[04:21:13] <aatch> fread2281, https://github.com/fread2281/rust-lz4/pull/1
[04:21:42] *** Joins: brson (brson@E9CDE21E.991753BB.CA4D1600.IP)
[04:21:42] *** ChanServ sets mode: +o brson
[04:21:54] <brson> <3 rust
[04:22:09] <bjz> :)
[04:22:23] <fread2281> aatch: thanks. why did you change up the bindings?
[04:22:35] *** Joins: doomlord_ (doomlod@moz-568ADDE2.range86-176.btcentralplus.com)
[04:23:03] <aatch> fread2281, obsolete syntax
[04:23:08] <fread2281> aatch: oh
[04:23:19] <bjz> brson: would separating importing of mods and items help resolution? `use mod foo; use item Bar;`?
[04:23:51] <bjz> brson: seeing as they are separate namespaces (apparently)
[04:24:05] <aatch> fread2281, it still had argument modes.
[04:24:15] <aatch> rust-bindgen is kinda out-of-date
[04:24:50] *** Quits: rfw (rfw@moz-C65A114.rfw.name) (Ping timeout)
[04:24:54] <fread2281> aatch: right. Also, I'm on 0.6 which doesn't have --link-args
[04:25:20] <aatch> fread2281, oh.
[04:25:29] *** Joins: Jesin (Jessin_@4FE0CEF2.B4552BE7.C85D72.IP)
[04:25:32] <aatch> Well I can't do much about that.
[04:27:29] <brson> bjz: yes, I think so. it's one of the options pcwalton has discussed
[04:27:43] <brson> bjz: but he would be the bestest one to ask about it
[04:28:01] <strcat> brson: https://github.com/mozilla/rust/pull/6349 r?
[04:28:04] <bjz> brson: I'm just thinking of a possible move away from using 'type' for typedefs
[04:28:16] <bjz> brson: as strcat suggested
[04:28:35] <bjz> brson: I really do think it's an unfortunate name
[04:28:59] <bjz> brson: but I don't know how much will is out there to change it
[04:29:16] *** Joins: rfw (rfw@moz-C65A114.rfw.name)
[04:29:38] <bjz> brson: I should say 'type aliases', as that's what they are
[04:35:12] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[04:35:12] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/MvJ8_A
[04:35:12] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[04:37:03] *** Quits: Jesse (jruderman@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: Jesse)
[04:38:15] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[04:38:15] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/jmfGyQ
[04:38:15] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[04:38:27] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[04:39:33] *** Quits: Jesin (Jessin_@4FE0CEF2.B4552BE7.C85D72.IP) (Ping timeout)
[04:41:13] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[04:41:13] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/jmfGyQ
[04:41:13] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[04:41:49] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[04:41:52] *** Quits: mib_9zqggn (Mibbit@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: http://www.mibbit.com ajax IRC Client)
[04:44:13] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[04:44:13] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/jmfGyQ
[04:44:13] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[04:47:11] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[04:47:11] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/jmfGyQ
[04:47:11] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[04:47:12] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[04:47:12] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/OfduGA
[04:47:12] <ghrust> 13rust/06auto 14ad5ee00 15Huon Wilson: libstd: convert chained ifs to a match in base64.
[04:47:12] <ghrust> 13rust/06auto 14101d4bf 15bors: auto merge of #6332 : huonw/rust/std-base64-match, r=nikomatsakis
[04:47:12] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[04:55:23] <brson> bjz: I don't mind changing `type`
[04:57:39] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Broken pipe)
[04:58:45] *** Joins: igl1 (igl@moz-6225A211.adsl.alicedsl.de)
[04:58:53] *** Quits: igl (igl@moz-894C9094.adsl.alicedsl.de) (Ping timeout)
[05:17:47] *** Quits: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP) (Ping timeout)
[05:21:36] *** Quits: catpigger (catpig@moz-42667BF1.dip0.t-ipconnect.de) (Quit: Verlassend)
[05:22:01] <aatch> Hey, whats the point of the `@~str`s in syntax?
[05:24:50] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:24:58] <strcat> rusti: 5
[05:24:58] <rusti> 5
[05:25:02] *** Quits: steven_is_false (quassel@moz-144077DE.bchsia.telus.net) (Ping timeout)
[05:28:40] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[05:36:00] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[05:36:00] *** ChanServ sets mode: +o dherman
[05:37:36] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[05:39:31] *** Joins: steven_is_false (quassel@moz-144077DE.bchsia.telus.net)
[05:41:26] *** Quits: blitter (blitter@moz-7C98731E.dyn.centurytel.net) (Quit: Leaving)
[05:43:02] *** Joins: recrack (Mibbit@B4104EBB.3CC170B1.1E14B209.IP)
[05:44:13] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.0)
[05:44:34] <aatch> hey, should a &[@str] be able to be coerced into a &[&str] ?
[05:44:54] *** Quits: recrack (Mibbit@B4104EBB.3CC170B1.1E14B209.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[05:46:59] *** Joins: dymk (dymk@moz-9602A022.sub-70-211-66.myvzw.com)
[05:47:22] <dymk> I've got a question about making a program modular
[05:47:50] <aatch> ok
[05:48:03] <dymk> If I was doing this in Ruby, and I had a module of a program, say, "foo", that does quite a bit, I'd have "foo.rb" and then the folder "foo/", which contains implementations of stuff in module "foo"
[05:48:30] <dymk> that way I could just "require 'foo'" and foo.rb would take care of re-exporting all the stuff in "foo/"
[05:48:31] <aatch> dymk, the convention is to have a folder foo/ with a "top-level" file mod.rs
[05:49:00] <aatch> then in another crate use the #[path] attribute to tell the compiler that a module as at that file.
[05:49:08] <aatch> You can find quite a few instances in libcore
[05:49:22] <dymk> and then mod.rs has "pub mod foo { pub mod foo_one; pub mod foo_two; }" etc?
[05:49:28] <aatch> dymk, yep
[05:49:43] <dymk> it just seems kinda dirty that the program can't be made more modular
[05:49:44] <aatch> Oh, actually lose the top-level mod
[05:50:07] <aatch> like I said, there are plenty of examples in libcore
[05:50:21] <dymk> yeah, I was looking through that, and it works sometimes
[05:50:30] *** Quits: doomlord (doomlod@moz-568ADDE2.range86-176.btcentralplus.com) (Ping timeout)
[05:50:30] *** Quits: doomlord_ (doomlod@moz-568ADDE2.range86-176.btcentralplus.com) (Ping timeout)
[05:51:01] <dymk> but once you've got a group of related files that all take care of one part of the module, you end up having to load every one of them as a module in your crate file
[05:51:25] <dymk> seems like it'd make more sense to allow them to be loaded as submodules
[05:51:34] *** Quits: enticeing (user@40584768.29B601FE.5037098C.IP) (Client exited)
[05:52:01] <aatch> dymk, you can use `pub use` to re-export
[05:52:03] <dymk> the other solution would be to make that submodule a totally different crate, but that gets just as cumbersome when you've got a lot of submodules making up your crate
[05:53:00] <dymk> true, but there was something preventing me from doing that; but I forget the exact example
[05:53:11] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[05:53:12] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/OfduGA
[05:53:12] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[05:53:23] *** Joins: mzabaluev (mzabaluev@moz-91FFD755.dhcp.inet.fi)
[05:56:13] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[05:56:13] <ghrust> 01[13rust01] 15bors pushed 6 new commits to 06auto: 02http://git.io/uwpHUQ
[05:56:13] <ghrust> 13rust/06auto 149a292b3 15Youngmin Yoo: libcore: rename vec::each(variable) to variable.each
[05:56:13] <ghrust> 13rust/06auto 14472d9f3 15Youngmin Yoo: librustdoc: rename vec::each(var) to var.each
[05:56:13] <ghrust> 13rust/06auto 14d4fa0f1 15Youngmin Yoo: libstd: rename vec::each(var) to var.each
[05:56:15] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[06:10:00] *** Quits: wilsonk-laptop (kvirc@moz-39EFBFC2.cg.shawcable.net) (Connection reset by peer)
[06:10:12] *** Joins: wilsonk-laptop (kvirc@moz-39EFBFC2.cg.shawcable.net)
[06:11:15] *** Joins: akashj87_ (akash@DC8DEB03.373F35FC.35E3DDC8.IP)
[06:11:23] *** Quits: akashj87 (akash@95234D83.1A55CE86.35E3DDC8.IP) (Ping timeout)
[06:12:49] *** Joins: akash__ (akash@C8152B50.373F35FC.35E3DDC8.IP)
[06:13:35] *** Quits: akashj87_ (akash@DC8DEB03.373F35FC.35E3DDC8.IP) (Ping timeout)
[06:16:34] *** Quits: akash__ (akash@C8152B50.373F35FC.35E3DDC8.IP) (Ping timeout)
[06:17:19] *** Joins: akash__ (akash@5DDA4B5B.D970ECA9.35E3DDC8.IP)
[06:24:46] <dymk> rusti: u16::max_size
[06:24:48] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/KiGT
[06:24:54] <dymk> rusti: u16::max_value
[06:24:55] <rusti> 65535
[06:25:08] <dymk> rusti: type MyType = u16; MyType::max_value
[06:25:09] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/KeMi
[06:25:20] <dymk> Bug?
[06:28:04] *** Joins: jviereck (Adium@moz-908CE59C.dclient.hispeed.ch)
[06:30:15] <aatch> rusti: num::u16::max_value
[06:30:16] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/fQcP
[06:31:12] <aatch> rusti: u16::max_value()
[06:31:14] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/ZgKW
[06:31:21] <bjz> dymk: unfortunately you can't do that right now :(
[06:31:26] *** Quits: dymk (dymk@moz-9602A022.sub-70-211-66.myvzw.com) (Ping timeout)
[06:31:48] <aatch> rusti: let a = u16::max_value(); a
[06:31:49] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/LfXB
[06:32:01] <bjz> hopefully that changes in the near future (it's a feature I require for lmath)
[06:32:24] <bjz> rusti: Bounded::max_value::<u16>()
[06:32:26] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/HOeY
[06:32:47] <aatch> rusti: num::Bounded::max_value::<u16>()
[06:32:48] <rusti> 65535
[06:32:56] *** Joins: doener (doener@moz-121949B3.unitymediagroup.de)
[06:32:59] <bjz> there you go
[06:33:26] <bjz> hopefully in the future you'll be able to do: u16::max_value()
[06:35:13] *** Joins: Sodel_the_V (user@moz-853663E1.va.shawcable.net)
[06:35:20] <bjz> aatch: http://www.reddit.com/r/rust/comments/1dgduy/meetingweekly20130430_borrowck_closure_recursion/c9q14yz
[06:37:32] *** Quits: devbug_ (quassel@moz-E1DE087C.bchsia.telus.net) (Client exited)
[06:40:44] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[06:42:23] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[06:45:14] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[06:47:40] *** Quits: steven_is_false (quassel@moz-144077DE.bchsia.telus.net) (Ping timeout)
[06:49:54] *** Joins: steven_is_false (quassel@moz-144077DE.bchsia.telus.net)
[06:50:30] <Jeaye> Yay, Q3 map voxelization is functional. :D
[06:51:22] <Jeaye> https://raw.github.com/Jeaye/q3/master/pics/012_3_wire_color.png for wireframe
[06:51:35] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[06:52:28] <Ralith> you need some LOD
[06:53:12] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[06:55:00] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[06:55:04] <Jeaye> LOD is not applicable here.
[06:55:17] <Jeaye> Some good paging will surely help though. That's next on the list.
[06:55:48] *** Quits: arete (arete@moz-CC2E6F16.new.xen.prgmr.com) (Ping timeout)
[06:56:39] <Jeaye> I only say LOD isn't applicable because it kind of defeats the purpose of the voxelization and destructibility, in my opinion.
[06:57:07] *** Quits: steven_is_false (quassel@moz-144077DE.bchsia.telus.net) (Ping timeout)
[06:57:43] <aatch> bjz, ?
[06:58:22] <bjz> aatch: ?
[06:58:27] <Jeaye> ?
[06:58:39] <aatch> the link you posted
[06:58:54] <bjz> aatch: look at the links
[06:59:16] *** Quits: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Quit: zzzZZZzzz)
[06:59:19] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[06:59:24] <bjz> aatch: they refer to the associated functions you were trying to call before on u16
[06:59:36] <aatch> bjz, ahh
[07:01:56] *** Quits: solancile (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net) (Ping timeout)
[07:08:29] <aatch> bjz, do you know what a @~str is supposed to be for?
[07:11:06] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[07:11:06] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/uwpHUQ
[07:11:06] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[07:12:54] *** Joins: Mowah (Mowah@moz-59D1A475.cust.bredbandsbolaget.se)
[07:13:42] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[07:14:08] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[07:14:08] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/azzogQ
[07:14:08] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[07:16:08] *** Joins: arete (arete@moz-CC2E6F16.new.xen.prgmr.com)
[07:16:10] *** Quits: doener (doener@moz-121949B3.unitymediagroup.de) (Connection reset by peer)
[07:16:48] *** Joins: doener (doener@moz-121949B3.unitymediagroup.de)
[07:17:09] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[07:17:09] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/azzogQ
[07:17:09] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[07:17:10] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[07:17:10] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/Shbezg
[07:17:10] <ghrust> 13rust/06auto 14044abef 15Daniel Micay: fix incorrect region code based on the old 'self...
[07:17:10] <ghrust> 13rust/06auto 14fda176b 15bors: auto merge of #6337 : thestinger/rust/fix_region, r=thestinger...
[07:17:10] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[07:17:23] *** Quits: flipcoder (flipcoder@moz-EE3A28B2.dhcp.rvsd.ca.charter.com) (Client exited)
[07:18:34] <bjz> aatch: well I guess it's a managed pointer to an owned str
[07:18:45] <bjz> :P
[07:18:47] <aatch> bjz, yes, but what is the point of it?
[07:18:52] <bjz> no idea
[07:19:11] <aatch> Hmm. I'm trying to reduce the allocations in libsyntax
[07:19:17] <bjz> rusti: @~@3
[07:19:18] <rusti> @~@3
[07:19:23] <bjz> :P
[07:19:32] <bjz> rusti: @@@@@@@@@~~~3
[07:19:33] <rusti> @@@@@@@@@~~~3
[07:19:35] * Sodel_the_V get the willies
[07:19:55] <aatch> rusti: @~@~@~@~@~@~@@@~~~@@~@~@~@~@~@~@~@()
[07:19:56] <rusti> @~@~@~@~@~@~@@@~~~@@~@~@~@~@~@~@~@()
[07:20:15] <bjz> rusti: @@@(**~~3 + ****~~~~4)
[07:20:16] <aatch> rusti: sys::size_of::<@~@~@~@~@~@~@@@~~~@@~@~@~@~@~@~@~@()>()
[07:20:17] <rusti> @@@7
[07:20:17] <rusti> 8
[07:20:22] <bjz> :P
[07:20:32] <bjz> rusti: @@@(**~~3 + ****~~~4)
[07:20:33] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/FOih
[07:20:44] <bjz> rusti: @@@(**~~3 + ***~~~4)
[07:20:44] <rusti> @@@7
[07:21:03] <bjz> so yeah
[07:21:16] <doener> aatch: I'd guess that you can avoid string copies that way, if your code needs to accept owned pointers but wants managed pointer internally
[07:21:31] <bjz> no reason why you can't go insane with indirection
[07:21:34] <aatch> doener, yeah, that's what I thought.
[07:21:36] <bjz> but not reccomended
[07:22:19] <bjz> with an owned string it requires a malloc and free every time
[07:23:02] <aatch> Well for the interner, it would probably be better to just build owned strings.
[07:23:09] <aatch> I mean managed strings
[07:23:19] <aatch> to pass to the interner
[07:23:33] *** Joins: webber46 (webber46@moz-F6310FF0.lha.sgsnet.se)
[07:23:44] <doener> aatch: https://github.com/dotdash/rust/commit/39d01a409f9a92b8d7d1fd4ac87c3cc1f4885881
[07:24:17] <doener> didn't get around to submit that yet, couldn't keep up with rebasing :-/
[07:24:31] <aatch> doener, doh!
[07:24:35] *** Quits: brson (brson@E9CDE21E.991753BB.CA4D1600.IP) (Quit: leaving)
[07:24:36] <bjz> yeah most functions these days take a borrowed str
[07:24:55] <bjz> much better
[07:26:14] <aatch> doener, but it looks like you did most of the changes I was going to do.
[07:26:53] <bjz> aatch: https://mail.mozilla.org/pipermail/rust-dev/2013-May/004086.html
[07:26:56] *** Joins: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk)
[07:27:35] <doener> aatch: going to rebase and submit that now, otherwise I'll never that that done...
[07:27:35] <aatch> bjz, I saw that, seems pretty tangential though
[07:27:52] <aatch> doener sweet
[07:28:06] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[07:28:16] <aatch> should give a minor speed boost to the parser
[07:31:15] <doener> aatch: the only thing I could measure was that compiling libsyntax itself was faster
[07:31:46] *** Joins: true_droid (Adium@moz-123FD9B8.beck.volia.net)
[07:32:21] <aatch> rusti: fn foo(f:~once fn() -> int) { f(); } foo(|| 5)
[07:32:40] <aatch> rusti: 1
[07:32:41] <rusti> 1
[07:32:58] <aatch> rusti: fn foo(f:~once fn() -> int) -> int { f() } foo(|| 5)
[07:33:00] <rusti> 5
[07:33:12] <aatch> When did 'once' happen?
[07:33:34] <aatch> or has it always been there?
[07:33:42] <aatch> just ineffective?
[07:34:08] <aatch> rusti: fn foo(f:~once fn() -> int) -> int { f(); f() } foo(|| 5)
[07:34:10] <rusti> 5
[07:34:21] <aatch> ok, so just ineffective.
[07:36:48] *** Joins: heftig_ (heftig@moz-2B9E1139.dip0.t-ipconnect.de)
[07:37:08] *** Joins: pyrac (pyrac@moz-516480D0.w92-156.abo.wanadoo.fr)
[07:37:44] *** Quits: heftig (heftig@moz-C8CBE7BC.dip0.t-ipconnect.de) (Ping timeout)
[07:39:16] *** Joins: doomlord (doomlod@moz-1D2F91FA.range86-150.btcentralplus.com)
[07:43:35] *** Quits: flowsnake (flowsnake@moz-1918C33E.aztw.cable.virginmedia.com) (Ping timeout)
[07:43:59] <sammykim> r? https://github.com/mozilla/rust/pull/6325
[07:47:00] *** Joins: flowsnake (flowsnake@moz-1918C33E.aztw.cable.virginmedia.com)
[07:53:29] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[08:07:34] *** Joins: wunki (wunki@moz-D4C0427D.cm-6-7d.dynamic.ziggo.nl)
[08:14:21] *** Joins: donri (dag@moz-9BB61102.tbcn.telia.com)
[08:15:25] *** Quits: wunki (wunki@moz-D4C0427D.cm-6-7d.dynamic.ziggo.nl) (Ping timeout)
[08:16:14] *** Joins: victorporof (victorporo@90976241.6D2FB7A4.79933D60.IP)
[08:18:58] *** Joins: EXetoC (ex@moz-2DBEB1E4.customer.t3.se)
[08:23:05] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[08:23:05] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/Shbezg
[08:23:05] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[08:23:13] *** Joins: dbaupp (Thunderbir@moz-FE630C1B.lns20.syd6.internode.on.net)
[08:24:38] *** Quits: jviereck (Adium@moz-908CE59C.dclient.hispeed.ch) (Quit: Leaving.)
[08:24:58] <aatch> Hmm, I'm curious about the best way to implement C-style unions
[08:25:21] <doener> enums?
[08:25:30] <aatch> doener, that's what I was thinking.
[08:25:46] <aatch> But it turns out to be a bit more complicated than that.
[08:26:05] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[08:26:05] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/bXkUzA
[08:26:05] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[08:26:08] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[08:26:08] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/RYb8yA
[08:26:08] <ghrust> 13rust/06auto 14ddd69ac 15Alex Crichton: Mark c_vec functions as unsafe again
[08:26:08] <ghrust> 13rust/06auto 1416b30ce 15bors: auto merge of #6339 : alexcrichton/rust/unsafe-cvec, r=graydon...
[08:26:08] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[08:26:42] <doener> aatch: could you elaborate?
[08:26:50] <dbaupp> aatch: there was a suggestion for a newtype struct + static constants (+ overloading `|` )
[08:27:02] <dbaupp> (at some point)
[08:27:35] <aatch> while one of the more common usages of unions is tagged unions, it's not the only usage
[08:27:55] <aatch> dbaupp, unions, not enums
[08:28:06] <dbaupp> aatch: oh... oops
[08:28:17] <dbaupp> aatch: I've made that mistake before :(
[08:29:11] <aatch> and an enum-like would only work well for tagged unions.
[08:29:44] *** Joins: jensnockert (jensnocker@moz-448E1CBE.mobileonline.telia.com)
[08:30:53] *** Joins: jviereck (Adium@moz-908CE59C.dclient.hispeed.ch)
[08:31:01] <dbaupp> aatch: what about methods wrapping transmute? i.e. union Foo { int, float } becomes struct Foo([u8, .. 4]) + impl Foo { fn int() { transmute to int } fn float() { transmute to float } }
[08:31:41] <dbaupp> (where those methods return the appropriate type)
[08:31:51] <aatch> dbaupp, I was thinking about something like that.
[08:32:38] <aatch> since it would pretty much only be for C-interop, you could probably get away with a syntax extension for it.
[08:33:13] <aatch> so union!(name, { field: type, .. })
[08:34:05] <aatch> The problem is trying to find the size of the union...'
[08:36:02] *** Joins: CarpNet (ac@moz-FD24B77.sohonet.co.uk)
[08:37:42] *** Joins: boggle (boggle@moz-9B91F0B7.dip0.t-ipconnect.de)
[08:39:51] *** Quits: jensnockert (jensnocker@moz-448E1CBE.mobileonline.telia.com) (Input/output error)
[08:40:24] <doener> aatch: and that wouldn't work for e.g. union { int x; char y; }
[08:40:42] <dbaupp> doener: why not?
[08:41:38] <doener> dbaupp: oh, nvm... You'd just have to manually take the correct slice
[08:41:56] <doener> dbaupp: only tried a plain transmute, and that complains about mismatching sizes
[08:42:11] <aatch> doener, it would be a pointer transmute
[08:42:25] <aatch> so &union -> &char
[08:42:28] <aatch> same size
[08:43:07] <dbaupp> rusti: let i = 0x12345678i32; let x: &u8 = cast::transmute(&i); println(fmt!("%?", x))
[08:43:09] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/dbKW
[08:43:24] <dbaupp> rusti: let i = 0x12345678i32; let x: &u8 = unsafe { cast::transmute(&i) }; println(fmt!("%?", x))
[08:43:25] <rusti> &120
[08:43:41] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Quit: ["Textual IRC Client: www.textualapp.com"])
[08:44:08] <aatch> rusti: let i = 0x12345678i32; let x: &u8 = unsafe { cast::transmute(&i) }; println(fmt!("%x", x))
[08:44:09] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/EQDd
[08:44:34] <aatch> rusti: let i = 0x12345678i32; let x: &u8 = unsafe { cast::transmute(&i) }; println(fmt!("%x", (*x) as uint))
[08:44:35] <rusti> 78
[08:44:35] <dbaupp> rusti: 0x78
[08:44:36] <rusti> 120
[08:46:21] *** Joins: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP)
[08:47:09] *** Joins: jensnockert (jensnocker@moz-448E1CBE.mobileonline.telia.com)
[08:48:40] *** Joins: jviereck1 (Adium@moz-908CE59C.dclient.hispeed.ch)
[08:49:01] *** Quits: jviereck (Adium@moz-908CE59C.dclient.hispeed.ch) (Ping timeout)
[08:50:21] *** Joins: zakora (NC@moz-8EAF945F.fbx.proxad.net)
[09:04:22] <aatch> if I'm right, I'm pretty sure that adding the uninit intrinsic is a ~10 line change
[09:04:31] * aatch is waiting for it to compile
[09:08:07] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[09:08:07] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1416b30ce to 14fda176b: 02http://git.io/N3iJvQ
[09:08:07] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[09:08:09] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[09:08:09] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/7DnHaQ
[09:08:09] <ghrust> 13rust/06auto 14c8b1ece 15Graydon Hoare: rustc: change 'use' to 'add' in error message, fix #2994
[09:08:09] <ghrust> 13rust/06auto 142de51cd 15bors: auto merge of #6340 : graydon/rust/issue-2994, r=thestinger
[09:08:11] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[09:09:44] *** Quits: webber46 (webber46@moz-F6310FF0.lha.sgsnet.se) (Quit: webber46)
[09:12:22] *** Joins: webber46 (webber46@moz-F6310FF0.lha.sgsnet.se)
[09:13:58] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[09:18:11] *** Quits: jviereck1 (Adium@moz-908CE59C.dclient.hispeed.ch) (Quit: Leaving.)
[09:19:36] <AutomatedTester> are there any plans to have test code in files next to, or in a different directory, to "production" code
[09:19:46] <AutomatedTester> or should I just build crates and do it that way if i wanted
[09:22:29] <dbaupp> AutomatedTester: rustc has unit tests at the bottom of most files, and then more extensive tests in a separate directory
[09:22:44] <dbaupp> (just as an example/precedent)
[09:23:06] *** Quits: webber46 (webber46@moz-F6310FF0.lha.sgsnet.se) (Ping timeout)
[09:23:31] <AutomatedTester> dbaupp: its the "tests at the bottom of most files" that I find icky
[09:23:50] <AutomatedTester> but its a preference :)
[09:23:50] *** Joins: webber46 (webber46@moz-F6310FF0.lha.sgsnet.se)
[09:24:03] <dbaupp> AutomatedTester: yeah, I agree... it gets annoying sometimes
[09:24:24] *** Quits: IdolfHatler (idolf@moz-4103EACC.pwnies.dk) (Ping timeout)
[09:24:47] <AutomatedTester> It feels like when you have code that is non-trivial the file would be quite large
[09:25:31] *** Joins: IdolfHatler (idolf@moz-4103EACC.pwnies.dk)
[09:26:34] <dbaupp> AutomatedTester: yeah. core::vec and core::str are both over 4000 lines long 
[09:27:08] <AutomatedTester> eeek
[09:27:09] <aatch> To my knowledge, there is no reason why you couldn't have test modules in seperate files.
[09:27:19] <aatch> At least for testing public interfaces
[09:27:54] <AutomatedTester> would that still use the test config decorators?
[09:28:10] <aatch> AutomatedTester, yes
[09:28:13] <dbaupp> aatch: depending on the exact behaviour of `super`, I believe inline `mod foo { .. }` and separate-file `mod foo;` are the same, so yes
[09:32:38] *** Joins: Blub\w (wry@moz-7632B9F.wireless.dyn.drei.com)
[09:38:08] *** Joins: jviereck (Adium@moz-908CE59C.dclient.hispeed.ch)
[09:47:06] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[09:47:06] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 142de51cd to 14fda176b: 02http://git.io/N3iJvQ
[09:47:06] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[09:47:07] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[09:47:07] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/rnKyrQ
[09:47:07] <ghrust> 13rust/06auto 140c02d0f 15Daniel Micay: rename iter::iter_to_vec to iter::to_vec...
[09:47:07] <ghrust> 13rust/06auto 145617916 15bors: auto merge of #6343 : thestinger/rust/new_iter, r=brson...
[09:47:09] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[09:48:37] <jensnockert> bjz: I commented on https://gist.github.com/bjz/ea210efe72b82134c4f2, sorry for being so late.
[09:51:09] <nmatsakis> aatch: afaik it's supposed to be the case that the module a::b can access a's private contents...
[09:51:32] <aatch> nmatsakis, "supposed" to be being the operative word.
[09:51:37] <nmatsakis> yes :)
[09:51:50] <nmatsakis> but that would allow tests to access private contents, if we evre fix that
[09:52:07] <nmatsakis> is there even an issue open for it? I've asked pcwalton about it a time or two and he was surprised to learn that's how I thought it was supposed to work :)
[09:52:12] <nmatsakis> so maybe there isn't as much consensus as I thought
[09:52:25] <nmatsakis> but I do remember discussing it, and I think it makes sense (for example here)
[09:52:39] <kimundi> In any case 'mod tests;' and 'mod tests {}' should always behave the same, right?
[09:52:43] <aatch> nmatsakis, since you're here, an `uninit` intrinsic is pretty much just a no-op right?
[09:53:09] <nmatsakis> aatch: yes, I imagine so
[09:53:12] <nmatsakis> kimundi: yes.
[09:53:31] <aatch> Cool, I might have a patch that adds it in.
[09:53:50] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[09:54:04] <aatch> Unfortunately I'm not sure how well it plays with memory safety, etc.
[09:54:43] <nmatsakis> aatch: well, clearly it should be an unsafe intrinsic...
[09:55:06] <aatch> nmatsakis, so don't worry about it?
[09:55:13] <aatch> (I marked it unsafe)
[09:55:34] <nmatsakis> aatch: basically :)
[09:55:55] <nmatsakis> aatch: but seriously, I think ... it should be fine, as long as you *actually do* initialize the value before you use it any way
[09:56:16] *** Quits: jensnockert (jensnocker@moz-448E1CBE.mobileonline.telia.com) (Ping timeout)
[09:56:20] <aatch> nmatsakis, cool. Turns out to be really easy. Just an empty function (almost)
[09:58:19] <nmatsakis> it's kind of amazing to me how many bugs get found by just being very aggressive about unused imports, varialbes, qualifiers, etc.
[09:58:56] <nmatsakis> at least in my code anyway:)
[10:05:10] <aatch> nice, using uninit instead of init is almost 10 times faster
[10:05:21] <nmatsakis> aatch: for what?
[10:05:33] <aatch> I'm just initializing a fixed size array
[10:05:39] <aatch> 2048 bytes
[10:05:51] <aatch> so it's a little artificial
[10:06:37] <nmatsakis> oh, ok :)
[10:06:53] <aatch> I'm using #[bench]
[10:07:11] <nmatsakis> aatch: still, that'll be very useful
[10:11:00] <aatch> Actually I just realized that uninit is constant time
[10:11:55] <doener> are there things other than creating some @T that cause glue_take to be called?
[10:12:19] <nmatsakis> doener: lots and lots. glue_take is used whenever copying values.
[10:13:39] *** Joins: berak (chatzilla@79BDCC61.5291F4C0.16E13E53.IP)
[10:15:22] <doener> nmatsakis: hm, I don't see glue_take being called with this code https://gist.github.com/dotdash/5546699
[10:15:29] <doener> nmatsakis: only when I changed the arguments to @Foo
[10:16:36] <nmatsakis> doener: yes, sorry, more precisely when copying non-POD values 
[10:16:58] <nmatsakis> doener: right now at least copying an @T requires us to adjust the ref-count, hence it is not "plain old data"
[10:17:10] <nmatsakis> doener: but for something like `Foo`, we'll just memcpy the value
[10:17:34] *** Joins: jensnockert (jensnocker@moz-FD94A888.mobileonline.telia.com)
[10:17:36] <aatch> Woo! So I'm creating 3 fixed-size vectors, 256, 4096 and 8192 bytes. Using init() I get 246ns, 2774ns and 3693ns per iter. Using uninit() I get 147ns, 120ns and 115ns per iter
[10:17:36] <nmatsakis> doener: if you change that code to use ~Foo and then do `bar(copy s)` you will also see calls to glue_take
[10:17:57] <nmatsakis> doener: (I think, anyway)
[10:20:27] *** Joins: spider-mario (spidermari@moz-2BC095A6.rev.sfr.net)
[10:29:13] *** Quits: boggle (boggle@moz-9B91F0B7.dip0.t-ipconnect.de) (Quit: boggle)
[10:32:01] *** Quits: Sodel_the_V (user@moz-853663E1.va.shawcable.net) (Quit: Caught the Wumpus!)
[10:32:02] <doener> nmatsakis: excluding bugs, is there any reason why passing a ~str to a function that expects a &str might perform a copy?
[10:34:03] *** Joins: giselher (Mibbit@moz-17BE0554.adsl.highway.telekom.at)
[10:35:15] <doener> I'm asking because that's what seems to happen here: https://github.com/mozilla/rust/blob/master/src/libsyntax/parse/lexer.rs#L185 -- which seems to be a performance regression
[10:35:41] <giselher> Hi, I like to link againts a extern constant which is defined in a c header and I defined it in the extern mod {} as static foobar: u8;  But the linker complains that there is no reference to foobar23 <-- I never appended 23 to the name.
[10:36:11] <aatch> giselher, put #[no_mangle] before it
[10:42:36] <doener> aatch: how does one use #[bench]?
[10:42:52] <aatch> doener, https://github.com/mozilla/rust/wiki/Doc-unit-testing#benchmarking
[10:43:15] <doener> thanks!
[10:45:28] *** Joins: judder (maradukewa@DABDEEA3.F2C0D0AC.78E362FE.IP)
[10:46:41] <giselher> aatch: before extern mod or the static foobar: u8;?
[10:46:56] <aatch> giselher, before the static var
[10:48:10] <giselher> iI still get the no reference to var23 error
[10:48:51] <aatch> giselher, can you post an example somewhere?
[10:49:28] <giselher> https://gist.github.com/giselher/5546823 line 38
[10:50:05] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[10:50:05] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/rnKyrQ
[10:50:05] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[10:52:52] <doener> hm, the "mut" is causing the copy
[10:53:06] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[10:53:06] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/CjUqfQ
[10:53:06] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[10:53:08] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[10:53:08] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/b43QWA
[10:53:08] <ghrust> 13rust/06auto 14bd4ee7c 15Sean Moon: Fix typos
[10:53:08] <ghrust> 13rust/06auto 14ca95e7f 15bors: auto merge of #6345 : seanmoon/rust/fix-typos, r=sanxiyn...
[10:53:08] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[10:53:25] <aatch> giselher, is it not doing it to any other declarations?
[10:54:28] *** Quits: doomlord (doomlod@moz-1D2F91FA.range86-150.btcentralplus.com) (Ping timeout)
[10:54:41] <giselher> aatch: it does it to every static declaration
[10:54:51] <aatch> same number or different?
[10:54:58] <giselher> same number
[10:55:09] *** Quits: KindOne (KindOne@moz-AAA92C5A.dynamic.ip.windstream.net) (Ping timeout)
[10:56:35] <giselher> ah I guess I found my mistake, 
[10:56:50] <giselher> I use the module in a different module too
[10:56:55] <giselher> *used*
[10:57:18] <giselher> I guess it got redefined in a different namespace
[10:57:44] <dbaupp> doener: what happens if you manual force it to be a slcie
[10:57:47] <dbaupp> *slice
[10:58:08] <dbaupp> doener: e.g. rdr.src.slice(0, rdr.src.len())
[10:59:06] <doener> dbaupp: better
[10:59:07] *** Joins: KindOne (KindOne@moz-1436D8AE.dynamic.ip.windstream.net)
[10:59:45] <dbaupp> doener: how much was the regression?
[11:01:21] <doener> compiling libcore goes from ~20s to ~26s
[11:01:48] <dbaupp> doener: oh, nice
[11:01:48] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[11:03:11] <doener> dbaupp: https://gist.github.com/dotdash/5546866
[11:03:49] <dbaupp> doener: woaah
[11:03:50] <aatch> doener, woah
[11:03:58] <aatch> lol
[11:04:02] <nmatsakis> doener: it shouldn't, no
[11:04:34] <dbaupp> doener: (there's str::repeat)
[11:04:34] <nmatsakis> doener: however, is libsyntax building with vecs_implicitly_copyable?
[11:05:02] <nmatsakis> doener: maybe there is some interaction there. that is a horrible, horrible hack that should be removed
[11:05:12] <doener> src/libsyntax/syntax.rc:#[allow(vecs_implicitly_copyable)];
[11:05:13] <dbaupp> doener: (for making long, repetitive strings)
[11:05:14] <doener> looks like it
[11:05:38] <aatch> doener, remove it and try compiling again.
[11:05:40] <nmatsakis> doener: yeah, that switch makes the compiler think that vectors and strings can be cheaply copied...I don't know why that would cause this behavior, but it seems...plausible.
[11:05:44] <aatch> There will likely be many errors
[11:05:46] <nmatsakis> aatch: it's not so easy to remove :)
[11:05:48] <doener> nmatsakis: the benchmark is without it though
[11:06:11] <nmatsakis> doener: ok, that's good because I don't know why it would cause this 
[11:06:28] <nmatsakis> doener: you have a small benchmark? I can take a quick look, I recently changed some code in that area, maybe I caused it
[11:06:36] <doener> https://gist.github.com/dotdash/5546866
[11:06:57] <doener> it's just the "mut" modifier that breaks it
[11:08:41] <nmatsakis> doener: interesting. ok, I have to go, but I'll be back in an hour or so, can you open an issue with that benchmark and your observations and then send me the link on IRC? (and/or mention @nikomatsakis in it)?
[11:08:42] *** Parts: berak (chatzilla@79BDCC61.5291F4C0.16E13E53.IP) ()
[11:08:45] <nmatsakis> thanks.
[11:08:53] <doener> I'll do
[11:08:59] <nmatsakis> doener: it's almost certainly due to one of the changes I've done recently, which have been in that area :)
[11:18:30] *** Quits: akash__ (akash@5DDA4B5B.D970ECA9.35E3DDC8.IP) (Ping timeout)
[11:20:02] *** Quits: true_droid (Adium@moz-123FD9B8.beck.volia.net) (Quit: Leaving.)
[11:20:07] <doener> https://github.com/mozilla/rust/issues/6355
[11:20:24] <dbaupp> aatch: shouldn't/couldn't the intrinsics in std just be accessed via core::unstable::intrinsics?
[11:20:36] *** Quits: jensnockert (jensnocker@moz-FD94A888.mobileonline.telia.com) (Input/output error)
[11:20:42] <dbaupp> (for your uninit patch... that's awesome btw :D )
[11:21:12] <aatch> dbaupp, probably, but that was easier
[11:21:45] <aatch> it's kinda scary how much faster using uninit is for large datastructures is though.
[11:23:09] <aatch> especially since it's constant time, so "initializing" 100 bytes takes the same amount of time as initializing 100 Kb (within reason)
[11:23:34] *** Joins: akash__ (akash@5DDA4B5B.D970ECA9.35E3DDC8.IP)
[11:23:52] *** Joins: wunki (wunki@moz-7300E3D6.ip.prioritytelecom.net)
[11:25:18] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[11:25:59] <dbaupp> aatch: yeah... initialising something with 0s only to reinitialise it on the next line is annoying
[11:26:04] *** bhearsum|afk is now known as bhearsum
[11:26:29] <aatch> dbaupp, I can see it getting some use in C bindings too
[11:26:41] <aatch> Micro-optimize!
[11:26:48] <dbaupp> aatch: yup :D
[11:27:22] *** Quits: mzabaluev (mzabaluev@moz-91FFD755.dhcp.inet.fi) (Ping timeout)
[11:27:50] <aatch> I'm surprised it wasn't done earlier tbh.
[11:28:00] <aatch> It's not exactly complex code.
[11:28:28] <dbaupp> aatch: everyone has other things to do?
[11:28:41] <aatch> dbaupp, what are you implying? :P
[11:28:56] <dbaupp> aatch: :P
[11:30:25] <aatch> dbaupp, have you seen the translation tangent on the mailing list?
[11:31:23] <dbaupp> aatch: yeah I'm following it
[11:31:32] <dbaupp> aatch: languages are the worst :/
[11:31:34] <aatch> I just find it amusing.
[11:32:00] <dbaupp> why can't we all just speak, i dunno, esperanto or something sensible
[11:32:09] <aatch> dbaupp, lojban
[11:32:16] <dbaupp> aatch: that's the one
[11:32:33] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[11:32:40] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[11:32:59] *** Joins: Palmik (palmik@moz-DADC71F0.pks.muni.cz)
[11:34:01] <dbaupp> doener: out of interest, how did you narrow down the line that caused that problem?
[11:35:35] <doener> dbaupp: "perf" told me that with --no-trans about 50% of the time was spent in __memcpy_ssse3_whatever, coming via bump(). The rust code told me nothing, so I took a look at the generated assembler code (with -Z asm-comments turned on)
[11:35:54] <doener> dbaupp: there were only three memcpy calls in it, and two were from assert!()s
[11:36:05] <dbaupp> doener: oh, that's my favourite technique too :D
[11:36:31] <dbaupp> doener: I wondered if there was some way to do it straight in perf...
[11:37:13] <aatch> doener, there is a -S option to output assembly btw
[11:37:19] <doener> for C/C++ you get inline code in the disassembly view, having that for rust would be awesome
[11:37:46] <dbaupp> doener: presumably it would be possible if debug info worked correctly
[11:37:48] <aatch> doener, misread your line, you obviously did that.
[11:38:29] <dbaupp> (possible for rust, I mean)
[11:38:45] <doener> aatch: yeah. But took me some time today to figure out how to get the inline code comments back. Been used to have them there by default
[11:38:47] *** Joins: BitPuffin (quassel@moz-8370D1B9.bredband.comhem.se)
[11:39:08] *** Quits: jviereck (Adium@moz-908CE59C.dclient.hispeed.ch) (Quit: Leaving.)
[11:45:37] *** Quits: Blub\w (wry@moz-7632B9F.wireless.dyn.drei.com) (Quit: reboot)
[11:52:21] <aatch> sweet, the changes actually compile now
[11:53:41] <doener> weird, even *{rdr.src} instead of *rdr.src fixes the problem
[11:54:14] <dbaupp> doener: that's pretty strange
[11:55:58] *** Quits: ssbr_ (ssbr@A9D9D38C.B6F034AC.72A31D6.IP) (Ping timeout)
[12:02:07] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[12:02:07] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/b43QWA
[12:02:07] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[12:05:07] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[12:05:07] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/RaMqBw
[12:05:07] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[12:05:09] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[12:05:09] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/ZAgrdA
[12:05:09] <ghrust> 13rust/06auto 14ffcc6cd 15Daniel Micay: remove vecs_implicitly_copyable from libstd
[12:05:09] <ghrust> 13rust/06auto 147cec3df 15Daniel Micay: remove vecs_implicitly_copyable from libcore
[12:05:09] <ghrust> 13rust/06auto 14123501c 15bors: auto merge of #6349 : thestinger/rust/explicit_copy, r=brson...
[12:05:11] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[12:05:25] *** Quits: webber46 (webber46@moz-F6310FF0.lha.sgsnet.se) (Ping timeout)
[12:05:59] *** Joins: webber46 (webber46@moz-F6310FF0.lha.sgsnet.se)
[12:09:08] *** Joins: thelivingded (thelivingd@moz-9453CC48.austin.res.rr.com)
[12:09:41] <sammykim> Hello :)
[12:11:12] *** Joins: ssbr_ (ssbr@A9D9D38C.B6F034AC.72A31D6.IP)
[12:11:14] *** Joins: Jesin (Jessin_@4FE0CEF2.B4552BE7.C85D72.IP)
[12:15:53] *** Joins: Blub\w (wry@moz-EF729D52.wireless.dyn.drei.com)
[12:16:21] *** Joins: akashj87_ (akash@9EF307D6.D8B89461.35E3DDC8.IP)
[12:17:17] *** Quits: akash__ (akash@5DDA4B5B.D970ECA9.35E3DDC8.IP) (Ping timeout)
[12:22:44] *** Quits: thelivingded (thelivingd@moz-9453CC48.austin.res.rr.com) (Ping timeout)
[12:28:05] *** Joins: maxli (maxli@F2D29657.F60B0462.67AC9B1.IP)
[12:28:32] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[12:32:09] <bstrie> "The purpose of creating this new language in order to solve a chronic illness: the evolution of the speed of the software is much lower than the evolution of the hardware and software at the language level can not really take advantage of multi-core computing performance boost. Rust is proposed for multi-core system language, and absorb some of the important characteristics of other dynamic languages, such as do not need to manage memory, for exa
[12:32:22] <bstrie> I'm actually pretty impressed at the quality of automatic translation nowadays
[12:32:59] <bstrie> this is from chinese
[12:35:24] <aatch> bstrie, nice'
[12:36:11] *** Joins: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP)
[12:36:57] <dbaupp> bstrie: is that from oschina.net (maybe?) from the website logs?
[12:38:09] <kimundi> wheew, working at a patch to replace most fail!(~"...") calls with fail!("..."). I expect a lot of merge conflicts while trying to land it :)
[12:38:51] <bstrie> dbaupp: yes, I found that from sanxiyn's website logs thing
[12:39:28] *** Joins: jdm (jdm@DB05BBF2.BB1F48F2.971E19F6.IP)
[12:39:45] <bstrie> kimundi: huzzah
[12:39:57] <bstrie> death to the overexuberance of ~
[12:40:11] <aatch> kimundi, that sounds similar to doener's patch for the string interner
[12:40:31] <doener> actually, I have one for fail!(~" and fail!(fmt!( as well...
[12:40:36] <kimundi> bstrie: fail!(fmt!(...)) will also be replaced with fail!(...) :)
[12:40:52] <kimundi> doener: Oups... xD
[12:40:58] * doener needs to actually get his stuff submitted :-/
[12:41:21] <kimundi> I guess I should've checked before if someone else is working on it ._.'
[12:41:36] <aatch> doener, do it quickly so you can inflict more conflicts on kimundi 
[12:41:41] <doener> heh
[12:42:13] *** Quits: victorporof (victorporo@90976241.6D2FB7A4.79933D60.IP) (Quit: victorporof)
[12:42:38] <thiez> merge your trees for fun and profit, then submit a pull request for the merge ;)
[12:44:36] *** Joins: victorporof (victorporo@90976241.6D2FB7A4.79933D60.IP)
[12:45:21] <bstrie> "To the listed on the website main features include a compatible with C + + Kompiliermodell" <-- perhaps german is harder to translate than chinese :)
[12:46:53] *** Joins: SimonSapin (simon@moz-C4A83ED9.net-89-2-126.rev.numericable.fr)
[12:47:03] <kimundi> bstrie: I think chinese has simply the advantage that their characters allow for more precise definitions.
[12:48:04] <kimundi> bstrie: Where did you get the german text?
[12:48:24] <bstrie> http://www.heise.de/developer/meldung/Mozilla-praesentiert-Programmiersprache-Rust-1421145.html
[12:48:40] <bstrie> still looking through the referrer log
[12:48:50] <bstrie> er, the "referer" log :P
[12:48:51] <kimundi> ah, good old heise :)
[12:49:29] <doener> kimundi: https://github.com/mozilla/rust/pull/6357
[12:49:30] <kimundi> brr, version 0.1. That article is ancient :)
[12:50:06] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[12:50:41] <sp3d> kimundi: the hard part is deciding on one of about seven precies definitions ;)
[12:50:50] <sp3d> precise*
[12:51:06] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[12:51:13] <kimundi> doener: Nice :) I think I'll rebase my stuff on your branch and look at the differences then.
[12:51:51] *** Quits: victorporof (victorporo@90976241.6D2FB7A4.79933D60.IP) (Quit: victorporof)
[12:52:03] <kimundi> sp3d: heh, I guess :)
[12:52:06] <bstrie> "In general, there was talk about "optional" deliverance from the runtime in the future." <-- from russian
[12:52:47] <bstrie> I suppose I'm only finding all these foreign rust discussions because I've already read all the english ones :P
[12:53:10] <aatch> kimundi, that pull request is immense
[12:53:34] <kimundi> aatch: Which one, doeners?
[12:53:41] <aatch> kimundi, yours
[12:53:58] <kimundi> hm? I don't have one atm
[12:54:07] <bstrie> I don't see any pull requests from kimundi
[12:54:09] *** Joins: victorporof (victorporo@90976241.6D2FB7A4.79933D60.IP)
[12:54:27] *** Joins: doomlord (doomlod@moz-1D2F91FA.range86-150.btcentralplus.com)
[12:54:29] <aatch> oh wait
[12:54:43] <aatch> Its a second one from doener
[12:55:35] * aatch wasn't paying attention.
[12:55:55] <bstrie> you can tell that google really doesn't give a damn about google translate because its error pages look like they're from 1999
[12:56:36] <engla> they shut down their translate API some time ago :|
[12:59:05] <ssbr> heh, "deliverance"
[12:59:13] <ssbr> that's one way to put it.
[13:04:14] *** Quits: RMF (RMF@moz-52793E40.dsl.telepac.pt) (Ping timeout)
[13:07:43] *** Joins: RMF (RMF@moz-A559AD33.dsl.telepac.pt)
[13:16:34] <bstrie> haha
[13:16:47] <bstrie> according to the logs, the most popular browser is "YandexBot"
[13:16:56] <bstrie> and the second most popular is Googlebot
[13:17:16] <ssbr> kimundi: mmf
[13:17:21] <bstrie> but that's only because chrome and firefox append a version number to their UA
[13:17:26] <kimundi> ssbr: Hm?
[13:17:31] <ssbr> kimundi: re engines, I take it back, longest/shortest/pcre definitely shouldn't be separate engine types, but options to engines
[13:17:41] *** Quits: Mowah (Mowah@moz-59D1A475.cust.bredbandsbolaget.se) (Ping timeout)
[13:17:43] <ssbr> kimundi: since likely I want multiple "efficient" engines that all have longest/shortest/pcre variants
[13:18:16] <ssbr> so it should probably be a compile option, like ignore-case is
[13:18:54] <ssbr> kimundi: https://github.com/mozilla/rust/wiki/Lib-re#notion-of-a-regexp-engine ?
[13:19:05] <kimundi> ssbr: Sure, the main reason I thought of them as seperate engines was to unifiy the api in a re!() macro. Which, apparently is not wanted so there is no reason to keep it like that.
[13:19:14] <ssbr> ah, I see
[13:19:19] <ssbr> cool
[13:19:23] <bstrie> oh gross, half of all requests to the website are met with "access forbidden"
[13:20:58] <tristram> I guess if you are on http://static.rust-lang.org/doc/core/vec.html you are expecting getting to all the core with http://static.rust-lang.org/doc/core/
[13:21:21] <ssbr> Very much so.
[13:21:29] <ssbr> there's no breadcrumbs to go back up the doc tree
[13:22:30] <bstrie> part of me just wants to use sphinx, but the look of sphinx is soooo associated with python things
[13:22:53] <ssbr> bstrie: you can create a custom "look"
[13:23:00] <ssbr> and sphinx has been used for other projects also
[13:23:17] <tristram> we use sphinx for ou c++ project
[13:23:19] <ssbr> le.g. LLVM
[13:23:25] <ssbr> (also one PHP framework I saw once)
[13:23:26] *** Quits: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net) (Ping timeout)
[13:23:44] <ssbr> (and Rust is associated with LLVM, so it's fine, right?)
[13:25:45] <bstrie> we'd also have to convert our markdown to rest
[13:25:52] <bstrie> which pandoc can probably already do
[13:26:56] <aatch> ssbr, you should probably add a user story for the common case
[13:27:10] <ssbr> aatch: I don't actually know what the common case is
[13:27:14] <ssbr> which is sad
[13:27:34] <ssbr> "I just wanted to hack up a file format and don't really care, just don't take forever"?
[13:27:47] <aatch> ssbr, pretty much
[13:28:08] <ssbr> OK, adding now
[13:28:12] *** Joins: jviereck (Adium@moz-908CE59C.dclient.hispeed.ch)
[13:28:17] <aatch> standard regex usages are for stuff like email address verification and simple file format processing.
[13:29:11] <dbaupp> aatch: emails + re = http://ex-parrot.com/~pdw/Mail-RFC822-Address.html
[13:29:25] <kimundi> he, email verification with regex. good one. ;)
[13:29:57] <aatch> dbaupp, I've seen that before
[13:30:05] <ssbr> man crap
[13:30:11] <ssbr> this is why regexp engines need support for regular grammars
[13:30:17] *** Quits: SimonSapin (simon@moz-C4A83ED9.net-89-2-126.rev.numericable.fr) (Quit: Leaving.)
[13:30:31] <ssbr> the actual grammar for email addresses is pretty readable and AFAIK acyclic, so that it can be compiled to a regexp easily enough
[13:30:39] <dbaupp> email address verification should really be library function, to avoid people trying/failing to do use regexes
[13:30:57] <ssbr> dbaupp: that seems eminently reasonable
[13:33:26] <bstrie> bjz: I think you might need to spellcheck that tweet to john carmack :P
[13:34:09] <bjz> *fail*
[13:34:14] <bjz> :P
[13:34:16] <bstrie> :)
[13:34:16] <ssbr> aatch: I think validating user input and parsing files are probably different use cases with different concerns, so I added them separately
[13:34:19] <EXetoC> omg yes!
[13:34:30] <ssbr> I probably need to start wrapping up everything and writing an actual proposal
[13:34:32] <EXetoC> edit now!
[13:34:35] *** Joins: FrozenCow (FrozenCow@moz-9DF5D010.dynamic.upc.nl)
[13:34:38] <ssbr> idk how "hard" the 1 week discussion period thing is
[13:34:52] <ssbr> the ML thread has been dead, although I've gotten enough feedback here
[13:34:57] <bjz> bstrie: I hate how twitter doesn't let you edit
[13:35:31] <ssbr> bjz: Oops!
[13:35:34] <ssbr> :)
[13:36:00] <bjz> :)
[13:36:04] <bstrie> I think it's just funny that @ruslang just so happens to be an israeli php developer
[13:36:28] <bstrie> it's *just* baffling enough
[13:36:43] <dbaupp> ssbr: I think the 1 week thing is really loose
[13:36:51] <ssbr> OK, good :)
[13:37:42] <bjz> bstrie: the sad thing is the probably 75% of my followers follow him, so they've all seen my lovely spelling
[13:38:16] <ssbr> bjz: who are you on twitter?
[13:38:23] <ssbr> I'm curious what this horrible mistake was
[13:38:26] <bjz> @_bjz_
[13:38:33] <EXetoC> you could change your identity, and rewrite that while you're at it
[13:38:35] <bjz> oh, I deleted it
[13:38:39] <EXetoC> might be overkill though
[13:38:44] * bjz is cowardly
[13:38:44] <EXetoC> that's better
[13:38:53] *** Joins: SimonSapin (simon@moz-C4A83ED9.net-89-2-126.rev.numericable.fr)
[13:39:13] <bjz> ssbr: I just wrote @ruslang instead of @rustlang
[13:39:21] <ssbr> wahwah
[13:39:31] <bjz> :P
[13:39:34] <ssbr> I don't know how to use twitter
[13:39:36] <ssbr> I can't find this
[13:39:53] <ssbr> why are these newfangled social websites so confusing?! half of the stuff on your page isn't even written by you!
[13:40:01] <ssbr> twitter is clearly useless and will die soon
[13:40:31] <bstrie> I agree, twitter is incomprehensible
[13:40:49] <aatch> I use twitter to supplement my new feed
[13:40:53] <bjz> it's funny, Andrei Alexandrescu , also tweeted him: @ID_AA_Carmack this is awesome but then y u no use D? #dlang
[13:40:56] <ssbr> oh, he deleted it, right
[13:41:02] <bjz> *GC* *cough*
[13:41:16] <ssbr> who the hell says "y u no" to Carmack
[13:41:37] <bjz> (regarding his project to port Wolfenstein to Haskell)
[13:41:47] <ssbr> does haskell have some secret no-GC mode?
[13:42:09] *** aatch is now known as aatch|bed
[13:42:23] <EXetoC> please tell me that most routers do *not* have to be restarted every damn day for some reason -.-
[13:42:56] <dbaupp> ssbr: nope
[13:42:57] <EXetoC> it's ridiculous
[13:42:57] *** Quits: victorporof (victorporo@90976241.6D2FB7A4.79933D60.IP) (Quit: victorporof)
[13:42:57] <bjz> bstrie: twitter is amazing
[13:43:11] <bjz> bstrie: you just have to follow the right people
[13:43:14] <ssbr> I don't get the complaint w.r.t. D then.
[13:43:30] <dbaupp> ssbr: because the compiler is much smarter?
[13:43:45] *** Quits: heftig_ (heftig@moz-2B9E1139.dip0.t-ipconnect.de) (Quit: Quitting)
[13:43:50] <ssbr> dbaupp: GHC? I guess so.
[13:44:02] <ssbr> I would've figured carmack was using haskell to broaden his horizons or something, which D wouldn't do.
[13:44:15] *** Joins: heftig (heftig@moz-2B9E1139.dip0.t-ipconnect.de)
[13:44:17] <dbaupp> ssbr: so (with some effort) you can get faster-than-C performance, occasionally
[13:44:25] <ssbr> (Rust kinda might, but there's a definite difference in the difficulty of Haskell vs Rust)
[13:44:30] <bjz> ssbr: agreed
[13:44:34] <dbaupp> ssbr: I think he likes the bug-flattening nature of the compiler
[13:44:53] <ssbr> Ah.
[13:44:55] <EXetoC> dbaupp: only comparing official compilers eh? or maybe it's smarter than gdc as well for example, but everyone knows that dmd generates awful code :-P
[13:44:56] <dbaupp> (as much as I've read on his motivations for this... which isn't much)
[13:45:14] <bjz> I don't thing D would have been 'different enough' to warrent a rewrite
[13:45:46] <EXetoC> no one ever responds when I complain about my router, so I'm guessing that this is a fairly rare problem
[13:45:49] <EXetoC> most likely
[13:45:52] *** Quits: EXetoC (ex@moz-2DBEB1E4.customer.t3.se) (Quit: WeeChat 0.4.0)
[13:46:01] <ssbr> poor EXetoC :(
[13:46:05] <bjz> :(
[13:46:13] <dbaupp> eaten by a router :(
[13:46:18] <bjz> nom nom nom
[13:46:38] *** Joins: EXetoC (ex@moz-2DBEB1E4.customer.t3.se)
[13:46:49] *** Quits: wunki (wunki@moz-7300E3D6.ip.prioritytelecom.net) (Ping timeout)
[13:47:04] <dbaupp> EXetoC: I've got no idea about any D compilers... but I guess GHC is smarter than most compilers :P
[13:47:13] <bjz> EXetoC: https://botbot.me/irc.mozilla.org/rust/msg/3105518/
[13:48:03] <EXetoC> lol :p
[13:48:09] <bstrie> EXetoC: throughout my life, my experience has been that all routers ever made are shit and should be taken to a field and destroyed with a baseball bat
[13:48:43] <EXetoC> :E
[13:50:07] *** Joins: saml (sam@moz-14C16814.cst.lightpath.net)
[13:53:04] <TD-Linux> EXetoC, what's your excuse for not running OpenWRT?
[13:53:22] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[13:53:22] *** ChanServ sets mode: +o dherman
[13:54:44] <EXetoC> TD-Linux: looking into it now... nope, my device doesn't seem to be supported
[13:55:17] <bstrie> that's also my excuse
[13:57:28] <TD-Linux> heh, I purchase routers exclusively on the basis of OpenWRT support
[13:59:05] *** Quits: Jesin (Jessin_@4FE0CEF2.B4552BE7.C85D72.IP) (Ping timeout)
[13:59:18] *** Joins: lmandel (lmandel@F2D29657.F60B0462.67AC9B1.IP)
[14:00:00] <EXetoC> are any old-ish routers supported? mine seems to have been released in 2004
[14:00:50] <EXetoC> TD-Linux: yeah? sounds like a good idea
[14:01:34] <TD-Linux> most of those without support are ones with the new broadcom chips which have unreleased closed source drivers
[14:01:36] <EXetoC> not that I know how good it is, but I think I've heard good things about it, and it's nice to be able to choose
[14:01:48] <EXetoC> right
[14:02:11] *** Joins: lkuper (lkuper@moz-D6AAFF3.cs.indiana.edu)
[14:10:48] *** Joins: ksev (DrunkenPan@5688B28D.841F5BFE.B9B3705E.IP)
[14:11:18] *** Quits: Blub\w (wry@moz-EF729D52.wireless.dyn.drei.com) (Quit: reboot)
[14:13:30] *** Quits: EXetoC (ex@moz-2DBEB1E4.customer.t3.se) (Ping timeout)
[14:14:04] *** Joins: Blub\w (wry@moz-880DF0FC.wireless.dyn.drei.com)
[14:15:00] *** Joins: EXetoC (ex@moz-C741B177.customer.t3.se)
[14:15:04] <EXetoC> bop
[14:15:19] <bjz> boop
[14:15:27] <bstrie> bleep
[14:15:34] *** Joins: Jesin (Jessin_@4FE0CEF2.B4552BE7.C85D72.IP)
[14:15:48] *** Quits: dbaupp (Thunderbir@moz-FE630C1B.lns20.syd6.internode.on.net) (Quit: dbaupp)
[14:15:56] <EXetoC> I hope it's only because the router is old and it can't handle the bandwidth. where can I steal a better one?
[14:17:10] <EXetoC> bjz: dawkins eh? have you seen the reading of his hate mail? hilarious
[14:19:21] <EXetoC> "I hope you get hit by a church van"
[14:19:48] *** Joins: dbaupp (Thunderbir@moz-FE630C1B.lns20.syd6.internode.on.net)
[14:20:17] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[14:23:02] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[14:23:56] *** Joins: sammykim_ (sammykim__@48AEBDE2.ACF655DA.97B9B372.IP)
[14:26:21] <EXetoC> :set conceallevel=0... and the weird rust.vim stuff appears not :>
[14:26:52] *** Quits: dbaupp (Thunderbir@moz-FE630C1B.lns20.syd6.internode.on.net) (Ping timeout)
[14:28:39] *** Joins: mzabaluev (mzabaluev@moz-91FFD755.dhcp.inet.fi)
[14:28:52] <kimundi> doener: ping
[14:28:59] <doener> kimundi: pong
[14:29:17] <EXetoC> bong
[14:29:54] *** Joins: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com)
[14:30:15] <kimundi> doener: I have a pullrequest for you from what remained of the difference of my fail! refactorings and yours
[14:30:48] <kimundi> doener: Should I send it to you so you can rebase the pr to the main repo?
[14:31:42] <doener> kimundi: yeah, I guess it's easier if it ends up as a single pr
[14:32:11] <kimundi> doener: okay, I send it.
[14:32:51] <kimundi> doener: Ended up mostly being cosmetic changes
[14:35:29] <ssbr> is there any way to specify within a module safe vs unsafe versions of the same code?
[14:36:12] <bstrie> ssbr: usually you name your functions "foo" and "foo_unsafe" if that's important
[14:36:25] <ssbr> bstrie: it's a small piece of code within a larger function
[14:36:28] <bstrie> or "unsafe_foo", maybe
[14:36:39] <kimundi> ssbr: You could use a module for the unsafe variants, and have the safe ones be wrappers around them. That's what for example core::str does
[14:36:47] <bstrie> ssbr: why do you need multiple versions of the same bit oc code?
[14:36:49] <bstrie> of
[14:37:02] <ssbr> bstrie: not need, exactly
[14:37:06] <ssbr> I know that i < foo.len()
[14:37:32] <ssbr> it would be interesting to compare performance of using foo.unsafe_get(i) instead of foo[i] . And if it turns out to matter, I'd probably want to be able to build the module to use the former
[14:37:55] <bstrie> ssbr: if you're iterating over foo, you can use `each`, which doesn't use bounds checks
[14:38:01] <ssbr> bstrie: I am not
[14:38:17] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[14:38:22] <bstrie> you can use #[cfg()] for this, perhaps
[14:38:29] <ssbr> bstrie: I preprocess a regexp to produce an array of tag locations, and also a bytecode that saves tag information to those locations
[14:38:33] <doener> kimundi: added to the pr. Kept it as its own commit but adjusted the msg
[14:38:41] <doener> kimundi: thanks!
[14:38:43] <ssbr> if my code is correct, a tag save instruction does not exist which saves to a tag location that does not exist
[14:38:45] <kimundi> doener: Nie :)
[14:38:50] <kimundi> nice*
[14:39:11] <ssbr> in ATS or haskell I could use indexed types to make the compiler check that my assumptions are correct, but no can do in rust
[14:39:16] <ssbr> bstrie: which cfg(), though?
[14:39:28] <bstrie> ssbr: I'm imagining that you'd stick this functionality out into a helper function, force it to be inlined with #[inline(always)], and then do conditional compilation on some flag
[14:39:28] <ssbr> (there's no list; if there's an "unsafe" config setting, that'd be great)
[14:39:35] <ssbr> bstrie: yes
[14:39:44] <ssbr> I don't know anything about the flag/cfg system though
[14:39:50] <ssbr> but that was what I was hoping to be able to do
[14:39:53] <bstrie> so you'd have two versions of the function, one annotated with #[cfg(unsafe)] and one with #[cfg(not(unsafe)] (or however it looks)
[14:40:01] <bstrie> and then you'd need to define unsafe, somehow, when you compile
[14:40:02] <ssbr> bstrie: is that possible?
[14:40:09] <bstrie> ssbr: I presume it is
[14:40:26] <ssbr> I don't know how to use rustc --cfg. Can I just do rustc --cfg unsafe and it Just Works?
[14:40:26] <kimundi> ssbr: I don't think there is a special flag for this. Just invent one, use it to compare, and then decide on one technique
[14:40:27] <bstrie> not 100% sure, though
[14:40:45] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[14:40:45] *** ChanServ sets mode: +o dherman
[14:41:00] <kimundi> ssbr: In general yes that's how it should work
[14:41:05] <ssbr> OK
[14:41:09] *** Quits: Blub\w (wry@moz-880DF0FC.wireless.dyn.drei.com) (Quit: bbl)
[14:41:09] <ssbr> thanks :)
[14:41:34] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[14:41:36] <bstrie> I agree with kimundi that if you can get away with only having one version of it, just use that always
[14:41:42] <bstrie> premature optimization and so on
[14:41:51] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Ping timeout)
[14:41:59] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[14:42:09] <ssbr> well, in the case that my code has bugs, doing arbitrary behavior C-style and having no way to make it fail!() instead, would suck
[14:42:27] <ssbr> assuming it turns out that checking array accesses, or some other safe thing I can disable, is a burden
[14:42:41] * ssbr shrugs
[14:42:53] <bstrie> you can always change it if you determine that it's a bottleneck
[14:42:58] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[14:43:16] <ssbr> Yeah, it isn't right now or for the immediate future. I wanted to know how to do this because it was in the back of my mind when I wrote the code :)
[14:43:44] <ssbr> There's a lot of optimizations that can be done even now. It's very nice to have a big todo list. :)
[14:43:59] <bstrie> indeed
[14:44:01] <ssbr> ("do things unsafely when I know it's safe to" is at the bottom of the list)
[14:45:54] *** Joins: true_droid (Adium@moz-123FD9B8.beck.volia.net)
[14:50:03] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[14:51:03] *** Quits: donri (dag@moz-9BB61102.tbcn.telia.com) (Ping timeout)
[14:52:43] *** Quits: mzabaluev (mzabaluev@moz-91FFD755.dhcp.inet.fi) (Ping timeout)
[14:53:16] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[14:53:16] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14123501c to 14ca95e7f: 02http://git.io/N3iJvQ
[14:53:16] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[14:53:45] *** Joins: telotortium (rmi1@moz-90BFA359.dhcp.mdsn.wi.charter.com)
[15:00:38] *** Quits: cdidd (cdidd@moz-D4A67B0B.broadband.corbina.ru) (Input/output error)
[15:02:42] *** Joins: thou (thou@moz-1C1CA9F7.fasttrackcomm.net)
[15:05:16] <EXetoC> I like Rust. Do you like Rust?
[15:05:29] <sammykim_> I don't like Rust. I love Rust :)
[15:05:45] <sammykim_> (crown) to EXetoC
[15:07:34] *** Quits: SimonSapin (simon@moz-C4A83ED9.net-89-2-126.rev.numericable.fr) (Quit: Leaving.)
[15:08:03] *** Joins: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net)
[15:08:32] <Luqman> hi
[15:08:38] <sammykim_> Hi
[15:09:28] <telotortium> Hi, so I ran into a bug on the incoming branch (commit ca95e7f94e).
[15:09:39] <telotortium> Or, at least, rustc crashed.
[15:10:01] <sammykim_> what's error message?
[15:10:22] <telotortium> After enabling verbose failure logging, I got the message 'struct variant kinds unimpl in enum_variants'
[15:11:43] <Luqman> do you have the code to reproduce it?
[15:11:46] <telotortium> I can also give you the code I was trying to compile and the backtrace if you need it.
[15:13:07] *** Joins: jaen (jaen@moz-8613EA97.play-internet.pl)
[15:13:40] *** Quits: naq (naq@D5C2D2DF.E4265FCD.E481B5B.IP) (No route to host)
[15:14:01] <Luqman> telotortium: sure, you can post a link here
[15:14:46] <sammykim_> You can use this for your code and error message.
[15:14:47] <sammykim_> https://www.google.co.kr/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CDoQFjAA&url=http%3A%2F%2Fpastebin.mozilla.org%2F&ei=8ryLUaXxKqa6iAeUooGgAQ&usg=AFQjCNHvaRtzgBCr9eUfbzEuK-82ibuxPQ&sig2=rrFxzBne05--raQz2bZZEg&bvm=bv.46226182,d.aGc&cad=rjt
[15:14:50] <sammykim_> Sorry.
[15:14:52] <sammykim_> http://pastebin.mozilla.org/
[15:14:53] <sammykim_> This.
[15:15:30] <bstrie> oh, google
[15:15:42] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[15:15:42] *** Joins: wilsonk|2 (kvirc@moz-39EFBFC2.cg.shawcable.net)
[15:15:45] <sammykim_> I hate google. It was a mistake.
[15:15:59] <sammykim_> I like mozilla.
[15:16:01] <sammykim_> ;)
[15:16:02] <telotortium> Here: http://pastebin.mozilla.org/2387846
[15:16:14] *** Quits: wilsonk-laptop (kvirc@moz-39EFBFC2.cg.shawcable.net) (Ping timeout)
[15:17:34] <telotortium> Now, it looks like it should be a compile error, since I can't add a `code` member to `Action` itself, but only to its variants.
[15:17:52] *** Quits: ksev (DrunkenPan@5688B28D.841F5BFE.B9B3705E.IP) (Ping timeout)
[15:19:58] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Client exited)
[15:20:26] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[15:20:41] <bstrie> telotortium: but it compiles if you take out the definition of Exe...
[15:21:27] <bstrie> I've reduced it some: https://gist.github.com/bstrie/5548131
[15:21:29] *** Joins: victorporof (victorporo@DC4EF07A.183F338A.6A4F8DA2.IP)
[15:21:43] <bstrie> I'm honestly baffled at what's happening in the definition of Action.
[15:22:03] <telotortium> You mean what I'm doing or what the compiler is doing?
[15:22:03] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Broken pipe)
[15:22:09] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[15:22:13] <bstrie> just what it's *supposed* to be doing
[15:22:22] <bstrie> I've never seen syntax like that inside of an enum definition
[15:22:59] <bstrie> and it's obviously legal, as if you take out the Exe struct it compiles
[15:23:38] <bstrie> apaprently enums can have struct variants? this is news to me
[15:23:47] <telotortium> I was looking at the tutorial, section 5.2 (Enums)
[15:23:58] <bstrie> yes, I've just found that
[15:24:39] <bstrie> I'll file a bug on this
[15:25:28] <bstrie> hahaha
[15:25:42] <bstrie> it *also* only happens if the definition of Exe comes *before* the definition of Action
[15:25:47] <bstrie> which is screwy as hell
[15:27:07] *** Quits: Jesin (Jessin_@4FE0CEF2.B4552BE7.C85D72.IP) (Ping timeout)
[15:27:13] *** Quits: sammykim_ (sammykim__@48AEBDE2.ACF655DA.97B9B372.IP) (Quit: Leaving)
[15:27:31] <telotortium> Before, I had a little more code, but starting with the Exe and Action declarations and ending with a main function. This failed to compile, but for understandable reasons, since I'm just starting to learn Rust.
[15:29:27] <kimundi> doener, urg, I seem to have missed one tiny change that causes a test failure... (an error message changed). Will send an fixup commit asap :/
[15:31:08] * kimundi should REALLY stop being so sloppy....
[15:31:42] <bstrie> telotortium: https://github.com/mozilla/rust/issues/6362
[15:32:03] <bstrie> I think I'm subconsciously attempting to set the record for longest, most specific bug title
[15:35:58] <bstrie> telotortium: I also don't think this is supposed to be a compilation failure. as I've said, try moving the definition of Exe after the definition of Action and it should compile. you can also *not* use a struct variant within action, and just use a normal variant instead
[15:36:38] <bstrie> I'm not even sure why we support both :P
[15:38:48] *** Joins: naq (naq@D5C2D2DF.E4265FCD.E481B5B.IP)
[15:39:01] <thiez> que
[15:39:11] <thiez> since when does incoming fail to compile? :O
[15:40:58] <doener> kimundi: well, I didn't test your changes either, so we both failed... Is it the giraffe thing?
[15:42:44] <kimundi> doener: Nah its the ext/expand change where I made the assert_eq message more clear. Wich is very stupid of me because I just knew that I have to adjust an testcase for that, but forgot it momentarly :|
[15:43:17] <doener> ah the != part
[15:43:17] *** Joins: erickt (Adium@moz-6A641B4B.maine.res.rr.com)
[15:43:18] <kimundi> doener: I'm running the testsuite again atm, shoult finish shortly...
[15:43:39] *** Joins: Jesin (Jessin_@4FE0CEF2.B4552BE7.C85D72.IP)
[15:47:35] *** Quits: victorporof (victorporo@DC4EF07A.183F338A.6A4F8DA2.IP) (Ping timeout)
[15:47:49] <kimundi> doener: I changed that because the assert_approx_eq has a nicer message, and I already had planned to improve the message. So when a fail!() change touched that part I just did the change, thinking 'I will catch any fallout later in the testsuite'. Then I noticed that you didi the same changes, and in the process of merging that forgot about it, sorry :)
[15:48:49] *** Quits: akashj87_ (akash@9EF307D6.D8B89461.35E3DDC8.IP) (Quit: Leaving)
[15:48:56] <doener> no problem, I mess up things more than often enough myself ;-) And there are still 3 other build in bors' queue before our pr
[15:49:09] <doener> :-)
[15:49:17] <thiez> has the newest incoming failed to compile for anyone else?
[15:49:30] <thiez> appears to crash near the end of stage0-rustc
[15:49:34] *** Joins: victorporof (victorporo@B86E46F.1B500F07.6A4F8DA2.IP)
[15:49:45] <tristram> is there some priority queue in core or std? 
[15:50:12] <thiez> looks like out-of-memory but it has 2GB + 1GB swap...
[15:51:04] <doener> thiez: it currently leaks like hell
[15:51:18] <doener> thiez: libstd compile is currently at 3.5G RSS
[15:51:24] <thiez> what
[15:51:28] <thiez> since when?
[15:51:48] <doener> arg, damnit, wrong column again... Not used to the new top layout yet
[15:52:19] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[15:52:22] <doener> sorry...
[15:52:38] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Connection reset by peer)
[15:52:50] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[15:53:14] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[15:53:14] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/n_sIIw
[15:53:14] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[15:53:16] <telotortium> bstrie: Okay, thanks a lot.
[15:54:48] <doener> thiez: there's a leak that triggers with graydon's gc work, so I thought that it was present on incoming too when I read the mem% column instead of RES
[15:54:54] <rhodesd> thiez: I ran into that this morning, but killed the build before too long, re'configure'd with --disable-optimize --disable-valgrind, and it took ~25minutes on my machine, which is about average for a desktop
[15:55:16] <doener> thiez: stage0 just finished here
[15:56:13] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[15:56:13] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/nVf5JQ
[15:56:13] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[15:56:14] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[15:56:14] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/SPH8FQ
[15:56:14] <ghrust> 13rust/06auto 14dc48a55 15Sangeun Kim: Show lint names
[15:56:14] <ghrust> 13rust/06auto 141b4e375 15Sangeun Kim: Add space
[15:56:14] <ghrust> 13rust/06auto 147a4c6e5 15bors: auto merge of #6325 : sammykim/rust/lint-name, r=graydon...
[15:56:14] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[15:56:31] <thiez> I might try without valgrind :)
[15:56:39] <thiez> I really like my optimize though
[15:56:55] *** Quits: Jesin (Jessin_@4FE0CEF2.B4552BE7.C85D72.IP) (Ping timeout)
[15:57:18] <thiez> I don't suppose there's a --legacy-refcounting option... ;)
[15:57:40] <bstrie> 0.6 is your legacy refcounting option :P
[15:57:43] *** Joins: Mowah (Mowah@moz-59D1A475.cust.bredbandsbolaget.se)
[15:57:54] <thiez> 0.6 is *so* not an option :p
[15:59:25] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[15:59:38] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[16:03:31] *** Joins: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net)
[16:04:01] *** Joins: dylukes (dylukes@moz-B5418F79.hsd1.pa.comcast.net)
[16:04:32] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[16:04:40] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[16:05:59] <strcat> rusti: 1
[16:06:03] <rusti> 1
[16:06:05] <strcat> rusti: 1
[16:06:06] <rusti> 1
[16:07:53] <Flibo> rusti: 2+2
[16:07:54] <rusti> 4
[16:07:58] <Flibo> wow
[16:08:08] <tristram> how come rusti on irc works but not the one compiled from master?
[16:08:13] <Flibo> haha, yeah
[16:08:27] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[16:09:26] <strcat> tristram: it's really rustc
[16:10:32] *** Joins: ksev (DrunkenPan@5688B28D.841F5BFE.B9B3705E.IP)
[16:10:33] *** Quits: zakora (NC@moz-8EAF945F.fbx.proxad.net) (Quit: Textual IRC Client: www.textualapp.com)
[16:11:13] *** Joins: mzabaluev (mzabaluev@moz-91FFD755.dhcp.inet.fi)
[16:11:52] <bstrie> strcat: not sure if you saw https://github.com/mozilla/rust/issues/4992#issuecomment-17661281
[16:12:25] <thiez> wow, we don't have overloaded impls? I never noticed that
[16:12:34] <bstrie> what do you mean?
[16:12:57] *** Joins: Jesse (jruderman@moz-BE33DA21.fw1.sfo1.mozilla.net)
[16:12:58] *** Joins: Jesin (Jessin_@4FE0CEF2.B4552BE7.C85D72.IP)
[16:13:31] <thiez> I had a fn load(&self) and a fn load(&self, SomeEnum) and it seems to confuse the compiler a lot
[16:13:52] <thiez> but with a different argument that is not an enum it seems to work fine
[16:13:58] <strcat> there isn't function/method overloading outside of traits
[16:14:20] <strcat> which is type-based
[16:14:54] <naq> hey, was to_upper() removed?
[16:15:10] <strcat> naq: moved to an ascii module because it was incorrect for str
[16:15:28] <naq> ah I see
[16:15:58] <thiez> rusti: struct S{x:int} ; impl S { fn magic(&self) -> int {self.x} fn magic(&self,y:int) -> int {y}} let s = S{x:8} ; (s.magic(),s.magic(2))
[16:15:59] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/WjVO
[16:16:43] <thiez> how silly, rustc impls with method overloading, but it can't use them
[16:16:54] <thiez> rustc compiles*
[16:17:41] <strcat> it's a bug if it compiles
[16:18:07] <thiez> rusti: struct S{x:int} ; impl S { fn magic(&self) -> int {self.x} fn magic(&self,y:int) -> int {y}} let s = S{x:8} ; s.magic()
[16:18:08] <rusti> 8
[16:18:09] <thiez> look, a bug
[16:18:11] <thiez> :p
[16:18:33] <thiez> is there any reason we don't allow this?
[16:18:35] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Computer has gone to sleep.)
[16:18:54] <strcat> because it doesn't make things more generic, you can just do the same with another name
[16:19:29] * strcat doubts it will be added as a feature
[16:19:29] <bstrie> woah, that's crazy
[16:19:35] <bstrie> why does that compile?
[16:19:41] <engla> or use Option<T> for default values
[16:20:05] <thiez> because I give cookies to rustc when nobody is looking
[16:20:34] <doener> kimundi: test suite still running?
[16:20:52] <kimundi> doener: Yup, at pretty tests atm
[16:20:58] <doener> ok
[16:23:27] *** Quits: ksev (DrunkenPan@5688B28D.841F5BFE.B9B3705E.IP) (Ping timeout)
[16:24:00] *** Quits: erickt (Adium@moz-6A641B4B.maine.res.rr.com) (Quit: Leaving.)
[16:24:49] <nmatsakis> bstrie: presumably because we fail to check for multiple def'ns of a single method..
[16:24:57] *** Joins: ksev (DrunkenPan@5688B28D.841F5BFE.B9B3705E.IP)
[16:25:06] <nmatsakis> it's not supposed to work :)
[16:25:55] *** Joins: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[16:29:29] <thiez> rusti: struct S{x:int} ; impl S { fn magic(&self) -> int {self.x} } impl S { fn magic(&self,y:int) -> int {y}} let s = S{x:8} ; (s.magic(),s.magic(2)) // I wonder... :)
[16:29:31] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/SALc
[16:29:39] *** Joins: SiegeLord (sl@moz-56D7E78.bstnma.fios.verizon.net)
[16:29:45] <thiez> lol
[16:31:10] <thiez> bstrie: read the above pastebin for more hilarity
[16:32:48] *** Quits: mzabaluev (mzabaluev@moz-91FFD755.dhcp.inet.fi) (Ping timeout)
[16:34:47] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[16:35:14] <rhodesd> I understand that this convenient way of binding on pattern matches is changing, but if someone could please confirm this as an expected error, I'd appreciate it: https://gist.github.com/drhodes/5548317
[16:35:47] *** Joins: mzabaluev (mzabaluev@moz-91FFD755.dhcp.inet.fi)
[16:37:07] *** Joins: tjc (tjc@A5087023.2354C43D.D8E68FF6.IP)
[16:37:07] *** ChanServ sets mode: +o tjc
[16:37:28] <tjc> nmatsakis: what vidyo room are we in? (assuming there's a triage meeting, I'm not caught up)
[16:37:51] <nmatsakis> tjc: CYA, but I think it's not till 1
[16:37:59] <tjc> nmatsakis: oh ok, guess I haven't seen the email yet
[16:38:01] <tjc> thx
[16:39:11] <nmatsakis> tjc: I thought it was 12:30 but I checked the calendar and it said 1
[16:39:14] * nmatsakis shrugs
[16:39:23] <tjc> nmatsakis: either way, it's not 9:30, so that's good :-)
[16:41:35] *** Joins: Blub\w (wry@moz-339716B9.wireless.dyn.drei.com)
[16:41:40] <tjc> oh, 1 *your* time
[16:41:44] * naq compiles incoming, expects it to fail
[16:41:44] <tjc> ok, everything makes sense now
[16:42:34] *** Joins: azita (Azita@2557E599.66715431.D25A875A.IP)
[16:42:35] *** Joins: graydon (Adium@A5087023.2354C43D.D8E68FF6.IP)
[16:42:35] *** ChanServ sets mode: +qo graydon graydon
[16:43:18] <kimundi> doener: Finished without further hick, sending pr...
[16:45:36] *** Joins: cmr_ (cmr_@moz-E7EA111C.clients.kiwiirc.com)
[16:46:11] <cmr_> r? https://github.com/mozilla/rust/pull/6347
[16:46:54] <nmatsakis> tjc: oh, right, yes. :)
[16:48:26] <jack> in `unsafe { let mut foo: c_int = 0; something(&foo); /* foo != 0 here */ } is that mut unnecessary?
[16:48:27] *** Quits: jaen (jaen@moz-8613EA97.play-internet.pl) (Ping timeout)
[16:48:47] <jack> the compiler tells me that it is not needed, but it's unclear to me whether this is really true
[16:48:54] <nmatsakis> jack: that code is buggy.
[16:48:59] <nmatsakis> jack: it should be written as: &mut foo
[16:49:07] <nmatsakis> jack: and the native function should be declared *mut foo
[16:49:25] <jack> it's a C FFI all, which are all *u8 :)
[16:49:30] <jack> oh maybe not. just a second.
[16:49:34] <nmatsakis> yeah, so it should be *mut u8 then.
[16:49:50] <nmatsakis> for those parameters which are (potentially) written to
[16:49:58] <nmatsakis> C doesn't make the distinction but we do
[16:50:04] <strcat> rust-bindgen defaults to immutable * which might be part of why they're used everywhere
[16:50:13] <nmatsakis> yes, it's ... not something that is easily automated.
[16:50:36] <kimundi> MAybe default to *mut ?
[16:50:40] <nmatsakis> I don't know of any way to solve this unfortunately, maybe augment valgrind?
[16:50:44] <nmatsakis> or perhaps default to *mut
[16:50:46] <kimundi> Better have it err on the wrong side...
[16:50:57] <jack> and the compiler accepts this because it has no way to know that foo changes inside the function
[16:51:00] <jack> ?
[16:51:14] <nmatsakis> jack: right. but it would be within its rights to constant-propagate 0
[16:51:19] <jack> i think all pointers should be *mut by default in teh FFI. otherwise what' the point?
[16:51:22] <nmatsakis> jack: so that's why I say the code is buggy.
[16:51:31] <nmatsakis> well, most pointers *are* only read
[16:51:33] <strcat> jack: well there isn't a default, people write them ;p
[16:51:42] * nmatsakis shrugs
[16:51:51] <nmatsakis> I don't have a strong opinion about the default, but I do have a strong opinion that the code is wrong
[16:51:52] <jack> fair enough. i guess it's unsafe so you're on your own anyway
[16:51:58] <nmatsakis> :)
[16:52:03] <jack> nmatsakis: i don't disagree with the code being wrong :)
[16:52:35] <strcat> the finalize signature is a proper
[16:52:36] <strcat> problem*
[16:53:12] <kimundi> I think for unsafe pointers it would make more sense ifm instead of * and *mut, there would be *immut and *.
[16:54:05] <jack> nmatsakis: passing &mut foo doesn't make the compiler complain when the C FFI takes &c_int instead of &mut c_int. that seems a little strange.
[16:54:18] <jack> actually it might be that there's a transmute here.
[16:54:20] *** Joins: cm (Mibbit@moz-CB7D40BE.range86-156.btcentralplus.com)
[16:55:06] <kimundi> The problem with * is that the compiler stops annoying you even if you do it wrong. So maybe it would be better to have a 'slower' default than buggy code because peaople don't think of constant propagation...
[16:55:14] <strcat> jack: you can turn &mut into & in pure rust too
[16:55:23] *** Quits: Jesin (Jessin_@4FE0CEF2.B4552BE7.C85D72.IP) (Ping timeout)
[16:55:30] *** Joins: jclements (jclements@2557E599.66715431.D25A875A.IP)
[16:55:41] <doener> kimundi: updated
[16:55:45] <strcat> kimundi: it mirrors &
[16:55:46] <nmatsakis> jack: it's just freezing, that's all...
[16:56:00] <strcat> afaik it's mostly just because rust-bindgen does the wrong thing
[16:56:02] <nmatsakis> strcat: in which respect? the `&self`?
[16:56:18] <nmatsakis> I think you guys are right, though, bindgen should default to *mut...and people can change it back
[16:56:26] <strcat> if you do it by hand it's easy to get right
[16:56:34] <nmatsakis> jack: but it is a kind of unfortunate interaction
[16:56:37] <strcat> if you use bindgen you'd have to then go and check which ones are const
[16:57:39] <kimundi> strcat: Sure, but unlike & there is no handholding to not do the wrong thing. So a less error prone default for the 'easier typed' symbol might make more sense, idk...
[16:58:09] <strcat> I haven't found it to be a problem
[16:58:19] <strcat> open the .h file, translate to rust
[16:58:24] <strcat> if I used bindgen it would have been a problem.
[16:58:54] <strcat> I don't think it's difficult to understand that the * mutability mirrors &
[16:59:18] *** Joins: solancile (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net)
[17:00:10] <kimundi> strcat: Well, you know what you're doing. :P I'm thinking of a sensible default that would prevent errors by the mass of coders who might not care that much. But maybe it's not a problem in practice, i dunno
[17:00:20] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[17:00:26] <strcat> you have to know what you're doing to write safe unsafe code
[17:00:34] <nmatsakis> strcat: it is quite tedious, is the thing.
[17:00:43] <nmatsakis> hence the use of bindgen :)
[17:00:47] <strcat> nmatsakis: I agree, rust-bindgen should default to *mut if it's not const
[17:01:06] <nmatsakis> yes, that makes sense.
[17:01:42] *** Quits: spider-mario (spidermari@moz-2BC095A6.rev.sfr.net) (Input/output error)
[17:01:52] <strcat> afaik it can verify type signatures against dwarf stuff
[17:01:58] <strcat> if there are debug symbols at least
[17:02:00] *** Quits: int3_ (int3_@moz-97B8C071.subnet-248.amherst.edu) (Client exited)
[17:02:10] <strcat> there usually aren't ;p
[17:02:54] <graydon> nmatsakis: ping, triage-o-clock!
[17:03:35] <doener> nmatsakis: I guess I roughly know what's going on with the memcpy/parser regression. It ends up rooting both, the @~str as well as the ~str itself. I guess due to the get_vec_base_and_len() call in auto_slice() 
[17:03:35] <nmatsakis> graydon: ok, coming...
[17:03:44] <nmatsakis> doener: I know the cause I believe
[17:03:58] <nmatsakis> doener: it's actually an existing FIXME
[17:04:05] <nmatsakis> doener: working on a fix now
[17:04:12] <nmatsakis> doener: but yes you've got the diagnosis about right
[17:04:17] *** Quits: azita (Azita@2557E599.66715431.D25A875A.IP) (Quit: azita)
[17:04:19] <graydon> nmatsakis: turning off vecs-implicitly-copyable might also help?
[17:04:23] <graydon> or is that a red herring?
[17:04:27] <nmatsakis> red herring
[17:04:28] <doener> nmatsakis: #6272?
[17:04:53] <doener> err, no
[17:04:56] <nmatsakis> doener: yes.
[17:05:22] <doener> ok, then the ticket text just confused me :-)
[17:06:42] *** Joins: azita (Azita@2557E599.66715431.D25A875A.IP)
[17:08:17] *** Joins: brson (brson@2557E599.66715431.D25A875A.IP)
[17:08:17] *** ChanServ sets mode: +o brson
[17:09:22] *** Quits: Blub\w (wry@moz-339716B9.wireless.dyn.drei.com) (Ping timeout)
[17:10:42] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[17:12:12] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[17:14:11] *** Joins: mschifer (Adium@moz-BE33DA21.fw1.sfo1.mozilla.net)
[17:14:34] *** Joins: drguildo (drguildo@moz-D4255ABE.drguildo.com)
[17:14:43] *** Joins: Sevki (Sevki@moz-EB20D033.cable.virginmedia.com)
[17:16:13] *** Quits: Sevki (Sevki@moz-EB20D033.cable.virginmedia.com) (Quit: Linkinus - http://linkinus.com)
[17:18:16] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Computer has gone to sleep.)
[17:18:59] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[17:23:06] *** Joins: joone (joone@moz-8D1F45AD.jf.intel.com)
[17:24:54] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[17:24:54] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/4XwKAA
[17:24:54] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[17:25:21] *** Quits: pyrac (pyrac@moz-516480D0.w92-156.abo.wanadoo.fr) (Ping timeout)
[17:25:22] *** Quits: cm (Mibbit@moz-CB7D40BE.range86-156.btcentralplus.com) (Quit: http://www.mibbit.com ajax IRC Client)
[17:25:29] *** Joins: spider-mario (spidermari@moz-2BC095A6.rev.sfr.net)
[17:26:22] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[17:27:02] *** Joins: Jesin (Jessin_@moz-A03A364F.cc.lehigh.edu)
[17:27:17] *** Joins: int3_ (int3_@moz-ED221D8C.pools.spcsdns.net)
[17:27:57] *** Quits: bnicholson (bnicholson@moz-E98974C1.hsd1.ca.comcast.net) (Ping timeout)
[17:28:00] *** Joins: pyrac (pyrac@moz-B95F505.w92-156.abo.wanadoo.fr)
[17:28:46] *** Quits: CarpNet (ac@moz-FD24B77.sohonet.co.uk) (Quit: Leaving)
[17:29:16] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[17:29:16] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 145d27bed to 147a4c6e5: 02http://git.io/N3iJvQ
[17:29:16] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[17:29:18] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[17:29:18] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/dbPwpw
[17:29:18] <ghrust> 13rust/06auto 14dc2ca9d 15Niko Matsakis: Refactor representation of bounds to separate out BuiltinBounds into...
[17:29:18] <ghrust> 13rust/06auto 1409019b6 15Niko Matsakis: rustc: Add EnumSet tests
[17:29:18] <ghrust> 13rust/06auto 14a809ce1 15bors: auto merge of #6336 : nikomatsakis/rust/issue-6308-closure-bounds, r=nikomatsakis...
[17:29:19] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[17:31:06] <acrichto> strcat: is https://github.com/mozilla/rust/blob/incoming/src/libstd/rc.rs#L56 supposed to be free(x) ?
[17:31:22] <strcat> no
[17:31:39] <strcat> the box is heap allocated (self.ptr)
[17:31:48] <strcat> it swaps the value out of the box so it gets destroyed
[17:31:51] <strcat> before freeing it
[17:32:01] <acrichto> oh ok, just wanted to make sure
[17:32:17] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:32:35] *** Quits: int3_ (int3_@moz-ED221D8C.pools.spcsdns.net) (Client exited)
[17:33:05] <acrichto> is there a difference between rusti::init() and intrinsics::init() ?
[17:33:37] <strcat> same thing but it should probably be intrinsics::init() now
[17:33:38] *** Quits: mzabaluev (mzabaluev@moz-91FFD755.dhcp.inet.fi) (Ping timeout)
[17:33:41] <strcat> instead of using an extern block
[17:34:16] <acrichto> both are used in rc.rs, and I was taking out the <-> operator so I'll just do that while I'm at it
[17:34:20] * strcat forgot to change one
[17:34:41] *** Joins: mzabaluev (mzabaluev@moz-91FFD755.dhcp.inet.fi)
[17:35:00] <strcat> so... the compiler really doesn't want to let me get a ~str into this heap closure
[17:35:12] <bstrie> acrichto: has it been agreed that it's ok to remove <-> ?
[17:35:17] <strcat> moving doesn't work, copying doesn't work, taking &str outside of it and using .to_str() doesn't work
[17:35:22] <bstrie> I thought there was an issue where it was necessary, or something
[17:35:25] <strcat> and Cell's take method doesn't work ;\
[17:35:42] <acrichto> bstrie: https://github.com/mozilla/rust/issues/3466
[17:35:46] <acrichto> that's what I was going off of
[17:36:28] <bstrie> cool
[17:36:40] *** Joins: pcwalton (pcwalton@43CB6079.66715431.D25A875A.IP)
[17:36:40] *** ChanServ sets mode: +o pcwalton
[17:36:42] <bstrie> would be happy to see it go
[17:37:26] *** Joins: erickt (Adium@7486F7B.9F7BDBDF.8B824544.IP)
[17:38:38] <strcat> net_tcp.rs:1871:66: 1871:70 error: illegal by-move capture of captured outer variable in a heap closure
[17:38:40] <strcat> net_tcp.rs:1871                             tcp_write_single(&sock, str::to_bytes(resp));
[17:38:42] <strcat> where resp is ~str
[17:38:46] <strcat> how do I work around that?
[17:38:54] *** Joins: RobocopOrange (Mibbit@moz-F612B5E4.residential.rdsnet.ro)
[17:38:54] *** Joins: int3_ (int3_@moz-ED221D8C.pools.spcsdns.net)
[17:39:20] <strcat> a copy is fine
[17:39:28] <strcat> just a test
[17:39:28] <Luqman> perhaps Cell?
[17:39:38] *** Quits: int3_ (int3_@moz-ED221D8C.pools.spcsdns.net) (Client exited)
[17:39:46] <strcat> tried let resp_cell = Cell(resp); outside it and resp_cell.take() inside
[17:39:48] <strcat> didn't work
[17:40:11] *** Joins: echristo (echristo@CFC3C6C3.D6CCE4AE.77834EAA.IP)
[17:40:12] <strcat> sec
[17:40:23] *** Quits: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP) (Ping timeout)
[17:40:48] <strcat> net_tcp.rs:1872:66: 1872:75 error: illegal by-move capture of captured outer variable in a heap closure
[17:40:51] <strcat> net_tcp.rs:1872                             tcp_write_single(&sock, str::to_bytes(resp_cell.take()));
[17:40:52] <strcat> :(
[17:41:14] <acrichto> strcat: wouldn't you need @Cell ?
[17:41:37] <strcat> can you *only* put @ stuff into @fn?
[17:41:45] <strcat> can't copy immutable data into it?
[17:41:52] *** Joins: bnicholson (bnicholson@2557E599.66715431.D25A875A.IP)
[17:41:53] <strcat> I guess I'll just use @~str then
[17:42:17] <acrichto> that's what I thought at least, I don't know much about them...
[17:42:53] <bstrie> strcat: how much would associated items affect the container apis? I'm a little concerned that pushing it off to post-1.0 would be hugely disruptive wrt public interfaces, but I'm not sure if these fears are unfounded
[17:43:14] <strcat> bstrie: it wouldn't change backwards compatibility
[17:43:19] <bstrie> really?
[17:43:29] <strcat> there's nothing about the container traits that need them
[17:43:33] <strcat> iterators need them
[17:43:42] <strcat> to make a sane Iterable trait.
[17:43:56] <bstrie> ah ok
[17:43:57] <strcat> net_tcp.rs:1872:67: 1872:75 error: value has non-owned type `@~str`
[17:43:58] <strcat> net_tcp.rs:1872                             tcp_write_single(&sock, str::to_bytes(*resp_box));
[17:44:00] <strcat> acrichto: nope
[17:44:04] <acrichto> :(
[17:44:06] <strcat> I'm convinced this isn't possible now
[17:44:17] <strcat> can't use @, can't use by-move, can't use by-copy, can't use Cell
[17:44:30] <strcat> I guess this function can't exist without vecs_implicitly_copyable? doesn't make sense to me
[17:46:16] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Quit: Leaving)
[17:49:30] *** Parts: RobocopOrange (Mibbit@moz-F612B5E4.residential.rdsnet.ro) ()
[17:49:38] *** jdm is now known as jdm|f00d
[17:50:07] *** Joins: Blub\w (wry@moz-77A51BC7.wireless.dyn.drei.com)
[17:50:13] <bstrie> how the hell do I get a merge conflict when merging my copy of incoming with github's incoming
[17:50:14] *** Joins: int3_ (int3_@moz-ED221D8C.pools.spcsdns.net)
[17:50:22] <bstrie> how is this even possible
[17:51:44] <erickt> bstrie: you could try a git merge --ff
[17:52:06] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Quit: Computer has gone to sleep.)
[17:52:39] <bstrie> I'm just blowing away my repo, it's from like two years ago and could use a refresh
[17:52:53] <bstrie> it's from back when rust actually compiled on this machine :)
[17:52:56] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Computer has gone to sleep.)
[17:53:02] <bstrie> now I just use it for browsing source code
[17:56:28] * strcat sighs
[17:56:32] <strcat> net_tcp.rs:1871:52: 1871:61 error: illegal by-move capture of captured outer variable in a heap closure
[17:56:34] <strcat> net_tcp.rs:1871                             tcp_write_single(&sock, resp_cell.take());
[17:56:36] <strcat>                                                                     ^~~~~~~~~
[17:57:03] <strcat> I thought that would work...
[17:57:49] *** Quits: erickt (Adium@7486F7B.9F7BDBDF.8B824544.IP) (Ping timeout)
[17:58:22] <strcat> pcwalton: any idea? ^
[17:58:38] <strcat> I have no idea how to put something into this function ;p
[17:59:00] <pcwalton> hmmm
[17:59:29] <pcwalton> why is that by-move?
[17:59:32] <strcat> no idea.
[17:59:39] <strcat> it really hates me apparently
[17:59:57] <strcat> pcwalton: http://ix.io/5yH context
[18:00:01] *** Joins: erickt (Adium@7486F7B.9F7BDBDF.8B824544.IP)
[18:00:09] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[18:00:12] <strcat> oh
[18:00:16] <strcat> because it's a nested closure
[18:00:20] <strcat> I think I need multiple levels of cell
[18:00:24] <pcwalton> yeah, use multiple levels
[18:02:23] <strcat> yay finally seems to have worked.
[18:02:56] *** Quits: jclements (jclements@2557E599.66715431.D25A875A.IP) (Quit: jclements)
[18:04:11] *** Quits: erickt (Adium@7486F7B.9F7BDBDF.8B824544.IP) (Connection reset by peer)
[18:04:15] *** Quits: pcwalton (pcwalton@43CB6079.66715431.D25A875A.IP) (Quit: pcwalton)
[18:05:03] *** Joins: pcwalton (pcwalton@43CB6079.66715431.D25A875A.IP)
[18:05:03] *** ChanServ sets mode: +o pcwalton
[18:05:11] <EXetoC> wasn't there a milestone summary issue for 0.6? is there one for 0.7? maybe it'll be added later
[18:05:17] *** Joins: jclements (jclements@2557E599.66715431.D25A875A.IP)
[18:05:27] <EXetoC> can't search for it because I don't have a clue what they did to that search input field
[18:06:07] <strcat> https://github.com/mozilla/rust/issues/milestones
[18:06:29] *** Quits: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP) (Ping timeout)
[18:06:51] *** Joins: erickt (Adium@7486F7B.9F7BDBDF.8B824544.IP)
[18:09:23] *** Joins: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com)
[18:09:55] <thiez> EXetoC: you might also be interested in issues met the 'metabug' tag
[18:09:56] <EXetoC> ok that should've been obvious :>
[18:09:59] <tjc> graydon: is https://github.com/mozilla/rust/issues/2064 still a problem?
[18:10:06] <tjc> there are enough subsidiary issues that it's hard for me to tell
[18:10:31] <graydon> I think brson knows the precise status of it
[18:10:33] <graydon> or better than I do :(
[18:10:54] *** Quits: inolen (Adium@moz-FA2406D8.socal.res.rr.com) (Quit: Leaving.)
[18:10:55] <EXetoC> got it
[18:11:09] *** Quits: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[18:11:14] *** Joins: inolen (Adium@moz-FA2406D8.socal.res.rr.com)
[18:11:28] *** Quits: inolen (Adium@moz-FA2406D8.socal.res.rr.com) (Connection reset by peer)
[18:12:20] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[18:14:03] *** Quits: int3_ (int3_@moz-ED221D8C.pools.spcsdns.net) (Client exited)
[18:16:23] *** Quits: Jesin (Jessin_@moz-A03A364F.cc.lehigh.edu) (Connection reset by peer)
[18:16:50] *** Joins: mschifer1 (Adium@moz-BE33DA21.fw1.sfo1.mozilla.net)
[18:16:59] *** Joins: wunki (wunki@moz-D4C0427D.cm-6-7d.dynamic.ziggo.nl)
[18:18:08] *** Quits: mschifer (Adium@moz-BE33DA21.fw1.sfo1.mozilla.net) (Ping timeout)
[18:19:06] *** Quits: cmr_ (cmr_@moz-E7EA111C.clients.kiwiirc.com) (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
[18:20:18] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[18:20:18] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14a809ce1 to 147a4c6e5: 02http://git.io/N3iJvQ
[18:20:18] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[18:20:48] <brson> tjc: i closed it
[18:20:54] <tjc> brson: thanks!
[18:25:19] <pcwalton> from a coding style POV, how do people feel about omitting semicolons where they're unnecessary?
[18:25:41] <tjc> pcwalton: example?
[18:25:45] <pcwalton>                 if url.path.ends_with(".js") {
[18:25:46] <pcwalton>                     self.content_task.send(ExecuteMsg(url))
[18:25:46] <pcwalton>                 } else {
[18:25:46] <pcwalton>                     self.content_task.send(ParseMsg(url))
[18:25:46] <pcwalton>                 }
[18:25:47] <pcwalton>                 return true
[18:25:51] <pcwalton> for example
[18:26:00] *** Joins: int3_ (int3_@moz-51878B58.public.wayport.net)
[18:26:05] <tjc> I like including explicit semicolons -- so I would do so in both branches of the if -- to make it clear what I consider a statement
[18:26:12] <tjc> that is, to say "I am executing this only for its effects"
[18:26:15] <bstrie> I agree
[18:26:20] <pcwalton> I consider it somewhat more beautiful to omit the semicolons
[18:26:21] <pcwalton> but that's me
[18:26:42] <erickt> I like omitting the semicolons too
[18:27:05] <pcwalton> "I consider it somewhat more beautiful to omit the semicolons" sounds like something that would go on a rust_ebooks twitter account
[18:27:10] <tjc> heh
[18:27:17] <tjc> we'll know we've made it when someone creates rust_ebooks
[18:27:26] <strcat> heh
[18:27:29] <tjc> I'd be mildly annoyed if a coding style required me to omit them, but I don't have a problem with different code using different semicolon-usage-or-not styles
[18:27:29] <strcat> rustc: /home/strcat/projects/rust/src/llvm/lib/IR/Instructions.cpp:1084: void llvm::StoreInst::AssertOK(): Assertion `getOperand(0)->getType() == cast<PointerType>(getOperand(1)->getType())->getElementType() && "Ptr must be a pointer to Val type!"' failed.
[18:27:32] <strcat> rustc hates tuples
[18:27:37] * strcat always hits this on
[18:27:39] <tjc> rustc, why do you hate tuples so much
[18:27:39] <strcat> e
[18:27:54] <strcat>                     for xs.each |&(stored, ref value)| {
[18:27:56] <strcat> ;p
[18:27:59] <strcat> solution: not using each
[18:28:00] <strcat> I guess.
[18:28:33] <strcat> error: internal compiler error: Asked to compute contents of fictitious type
[18:28:36] <strcat> \o/
[18:28:38] * strcat hasn't seen that before
[18:28:46] <tjc> heh, a bunch of people have been seeing it lately
[18:29:13] <tjc> strcat: https://github.com/mozilla/rust/issues/6319 -- may be the same thing you're seeing
[18:29:16] <tjc> in fact, it looks quite likely
[18:29:18] <strcat> maybe rustc is trying to tell me to make a burst trie with treemap buckets instead of vectors
[18:29:22] <erickt> strcat: that's been around for a while :(
[18:29:45] * strcat doesn't think treemap will be faster than just splitting the trie though :(
[18:30:30] <pcwalton> is there deriving(Clone) yet?
[18:30:38] <strcat> yes, I think you made it ;p
[18:30:45] <pcwalton> oh
[18:30:47] <tjc> pcwalton: do you think this is still a problem? https://github.com/mozilla/rust/issues/3552
[18:30:59] *** Quits: erickt (Adium@7486F7B.9F7BDBDF.8B824544.IP) (Connection reset by peer)
[18:32:08] *** Quits: mschifer1 (Adium@moz-BE33DA21.fw1.sfo1.mozilla.net) (Connection reset by peer)
[18:32:08] *** Joins: mschifer (Adium@moz-BE33DA21.fw1.sfo1.mozilla.net)
[18:32:37] <pcwalton> tjc: yeah, it is
[18:32:38] <strcat> graydon: bors broke :(
[18:32:47] <tjc> pcwalton: ok, I'll figure out which milestone to nominate it
[18:32:48] <ssbr> it takes you 84 seconds to compile rustc?
[18:32:53] <ssbr> (yikes.)
[18:32:59] <tjc> ssbr: 84 seconds seems pretty fast to me!
[18:33:16] <ssbr> well, is "rustc" the same as "rust" in this context?
[18:33:20] <ssbr> because if so that's scarily fast
[18:33:47] <ssbr> (I guess not, though)
[18:33:48] <tjc> I think it's just the time to compile one stage of rustc, as in the compiler itself
[18:33:50] <tjc> or well
[18:33:53] <tjc> librustc, actually, probably
[18:33:53] <strcat> it takes me 4 mins per stage on a mid-range ivy bridge laptop cpu
[18:33:59] <tjc> but not counting the time for core, std, libsyntax, etc.
[18:34:06] <ssbr> strcat: not counting core/std/etc.?
[18:34:07] <strcat> I wouldn't be surprised if my desktop was 2x as fast, but I haven't tried...
[18:34:11] <strcat> ssbr: counting those
[18:34:17] <strcat> 12 mins to do stage0 through stage2
[18:34:22] *** Quits: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP) (Quit: buildmaster reconfigured: bot disconnecting)
[18:34:22] <ssbr> man wtf, ivy bridge is something else.
[18:34:24] <strcat> tests take longer afaik
[18:34:28] <thiez> people can compile rustc in 84 seconds? oO
[18:34:34] <ssbr> first gen i7 over here takes like 90 minutes
[18:34:39] <ssbr> to go through all the stages
[18:34:46] <strcat> ssbr: sounds like you're running out of memory.
[18:34:56] <ssbr> I have 9GB of RAM
[18:35:03] <strcat> it takes 30mins for me on a nehalem i7 cpu
[18:35:17] <strcat> but I think that's more to do with it having an HDD instead of an SSD
[18:35:27] *** Joins: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP)
[18:35:29] <strcat> maybe
[18:35:39] <ssbr> well, then I'm only 3x as slow, but it is the same generation
[18:35:47] <strcat> which OS?
[18:35:49] <ssbr> well
[18:35:53] <thiez> is it really I/O bound? on my machine it happily uses 100% CPU almost the entire compilation
[18:36:02] <ssbr> strcat: oh, heh, asking that question reminded me I am dumb
[18:36:09] <thiez> I doubt SSD would make much difference
[18:36:13] <ssbr> I'm looking at the wrong computer of course. I never got it compiling on windows.
[18:36:33] <ssbr> so yeah, on the other one it's an i5, linux, only 4GB of RAM
[18:36:41] <ssbr> 3x as long is reasonable
[18:36:52] <strcat> thiez: well, I don't have much of an explanation of why it's 2x as fast on my laptop compared to a build server with a higher clocked cpu ;p
[18:37:26] <ssbr> Well, I should try to get it compiling on my desktop, and then I can live the dream of sub-hour compile times
[18:37:42] <pcwalton> unresolved name: "Engine". Did you mean "osmain"?
[18:38:50] <thiez> ssbr: I compile in a debian VM and it's about 20 minutes or so
[18:38:57] <tjc> ssbr: it should only be taking an hour if you're recompiling LLVM (and even then, that's a long time...)
[18:39:10] <strcat> heh, I know why it takes 30mins on the build server
[18:39:15] <strcat> I didn't realize how long the xz compression took
[18:40:00] <SiegeLord> What algorithm is used to sort the suggestions for unresolved names?
[18:40:03] *** Joins: erickt (Adium@7486F7B.9F7BDBDF.8B824544.IP)
[18:40:20] <strcat> edit distance afaik
[18:40:32] <pcwalton> it's a lot better than it was
[18:40:34] <SiegeLord> Maybe there should be a small cutoff
[18:40:38] <pcwalton> there is
[18:40:40] <SiegeLord> Those two words are 5 apart
[18:40:45] <SiegeLord> Maybe something like 2 :P
[18:41:16] <strcat> better than not getting useful suggestions in some cases imo
[18:41:27] *** Quits: erickt (Adium@7486F7B.9F7BDBDF.8B824544.IP) (Connection reset by peer)
[18:41:36] <thiez> does it suggest the syntax extensions these days?
[18:47:59] *** Quits: jviereck (Adium@moz-908CE59C.dclient.hispeed.ch) (Ping timeout)
[18:48:32] <tjc> nmatsakis: r? https://github.com/mozilla/rust/pull/6366 (it's a quick one)
[18:49:11] <nmatsakis> tjc: r+
[18:49:16] <tjc> thx
[18:53:01] <thiez> speaking of quick changes, surely 'forget' is unsafe as well?
[18:54:10] <thiez> forget(~"Oh dear I think we might be leaking memory");
[18:54:26] *** Joins: jviereck (Adium@moz-C6A807E7.dataway.ch)
[18:54:38] <strcat> or worse
[18:54:41] *** Joins: erickt (Adium@7486F7B.9F7BDBDF.8B824544.IP)
[18:54:46] *** Quits: jviereck (Adium@moz-C6A807E7.dataway.ch) (Max SendQ exceeded)
[18:54:55] *** Quits: azita (Azita@2557E599.66715431.D25A875A.IP) (Quit: azita)
[18:55:20] <strcat> I think I'll just make a vector-backed map and use that in the trie
[18:55:35] <strcat> rustc hates ref patterns ;p
[18:57:12] <thiez> rusti: core::unstable::intrinsics::forget(~"foo")
[18:57:13] <rusti> exchange heap not empty on exit
[18:57:13] <rusti> 1 dangling allocations
[18:57:13] <rusti> Aborted (core dumped)
[18:57:17] <thiez> :D
[18:57:21] <tjc> heh
[18:57:32] <tjc> fair point
[18:57:55] <strcat> rusti: 1
[18:57:56] <rusti> 1
[18:58:07] <strcat> rusti: core::run::run_program("mount", []);
[18:58:09] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/jQiZ
[18:58:24] * tjc is making "forget" unsafe as well
[18:58:33] <tjc> heh
[18:58:57] <tjc> rusti: core::run::run_program("cat", [~"/etc/passwd"]);
[18:58:59] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/UdAY
[18:59:20] <tjc> heh
[18:59:20] *** Joins: enticeing (user@40584768.29B601FE.5037098C.IP)
[18:59:21] <strcat> tjc: it's in a world by itself ;p
[18:59:26] <tjc> yeah, I know
[18:59:41] * strcat stripped it down quite a bit
[18:59:47] <strcat> no more /sys and only a few devices
[19:00:02] <thiez> rusti: core::run::run_program("uname", [~"-a"]);
[19:00:03] <rusti> Linux sandbox 3.8.11-1-ARCH #1 SMP PREEMPT Wed May 1 20:18:57 CEST 2013 x86_64 GNU/Linux
[19:00:27] <strcat> rusti: core::run::run_program("ps", [~"ax"]);
[19:00:29] <rusti> line longer than 100 columns, pastebinned: http://sprunge.us/aDaf
[19:01:14] <tjc> rusti: core::run::run_program("finger", [~"-l"]);
[19:01:15] <rusti> line longer than 100 columns, pastebinned: http://sprunge.us/bNgO
[19:01:17] *** Quits: heftig (heftig@moz-2B9E1139.dip0.t-ipconnect.de) (Ping timeout)
[19:01:21] <tjc> well-done
[19:01:24] *** Joins: inolen (Adium@moz-9F4F17DF.tourcaster.com)
[19:01:24] <strcat> it has no net devices
[19:01:32] <strcat> rusti: core::run::run_program("ls", [~"dev"]);
[19:01:33] <rusti> ls: cannot access dev: No such file or directory
[19:01:35] <strcat> rusti: core::run::run_program("ls", [~"/dev"]);
[19:01:36] <rusti> kmsg
[19:01:36] <rusti> mqueue
[19:01:36] <rusti> random
[19:01:36] <rusti> shm
[19:01:36] <rusti> urandom
[19:01:45] <strcat> rusti: core::run::run_program("ls", [~"/sys"]);
[19:01:50] <thiez> It's an impressive little bot
[19:02:04] <strcat> and it auto-updates itself to my nightly build repo of incoming now :)
[19:02:12] <brson> erickt: do you still have llvm patches you want in?
[19:02:30] <erickt> hey brson! I do
[19:02:39] <brson> do other people have llvm patches? I think there were some more arm segmented stack work
[19:02:42] * strcat doesn't really understand why it needs kmsg/mqueue
[19:02:44] <erickt> I included a rebase, which was probably unnecessary
[19:03:02] <strcat> rusti: core::run::run_program("lsmod", []);
[19:03:02] <erickt> brson: I can backport my patch so it'll be easier to merge
[19:03:03] <rusti> line longer than 100 columns, pastebinned: http://sprunge.us/DTfG
[19:03:05] <brson> erickt: I'm going to open another issue to batch up llvm patches
[19:03:09] <brson> there are a few
[19:03:31] <jesse98> what is the status of the GC?
[19:03:33] <strcat> rusti: core::run::run_program("dmesg", []);
[19:03:35] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/bOFB
[19:04:05] <thiez> I think we're still refcounting atm?
[19:04:08] <strcat> funny, it sees the VM's kernel logs through those
[19:04:34] <jesse98> I know graydon was working on a GC and I thought he was quite far along
[19:04:49] <graydon> yes
[19:05:16] *** Quits: Jesse (jruderman@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: Jesse)
[19:05:29] *** Joins: mschifer1 (Adium@moz-BE33DA21.fw1.sfo1.mozilla.net)
[19:05:33] <graydon> when we're not leaking infinite memory during parsing due to its poor interations with new-borrowck's rooting shenanigans, it .. almost-mostly works
[19:05:35] *** Quits: mschifer (Adium@moz-BE33DA21.fw1.sfo1.mozilla.net) (Connection reset by peer)
[19:05:55] * strcat will just set it to whitelist-based devices
[19:05:57] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[19:06:00] <jesse98> hmm
[19:06:11] <thiez> I'd like to see brson complete the i/o stuff, I think it would be easy to redirect std{in,out,err} on a per-task basis at that point
[19:06:25] <thiez> which should make running the tests much cleaner
[19:06:34] <graydon> nmatsakis: incidentally, how far from sensibly-fixable do you think those shenanigans are? I can find other stuff to do if it'll be days of work
[19:07:15] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[19:07:20] *** Joins: azita (Azita@2557E599.66715431.D25A875A.IP)
[19:07:26] <strcat> rusti: core::run::run_program("ls", [])
[19:07:27] <rusti> foo
[19:07:27] <rusti> foo.rs
[19:07:27] <rusti> 0
[19:07:43] *** Quits: ssbr_ (ssbr@A9D9D38C.B6F034AC.72A31D6.IP) (Ping timeout)
[19:07:47] <nmatsakis> graydon: I was hopin to push a fix soon
[19:07:50] <doener> hm, someone said that it should be straight forward to allow ~"foo" == "foo" in addition to "foo" == ~"foo". Could somebody push me into the right direction as to where I would start looking?
[19:07:58] <strcat> rusti: core::run::run_program("mknod", [~"bar", ~"c", ~"1", ~"3"])
[19:07:59] <rusti> mknod: 'bar': Operation not permitted
[19:07:59] <rusti> 1
[19:08:03] <strcat> hm.
[19:08:09] <nmatsakis> graydon: in another triage meeting now but I was going to look at that afterwards :)
[19:08:14] <thiez> graydon: on a scale of 'no difference' to 'it'll be amazing!', how much less memory will rustc use after we get the gc?
[19:08:16] <nmatsakis> graydon: got about 50% of the way through
[19:08:18] <pcwalton> doener: I would search for overloaded_op in the various modules in typeck/
[19:08:36] <nmatsakis> graydon: (through a fix, that is)
[19:09:00] <graydon> thiez: hard to judge. the gc will collect @-boxes slower than the rc (i.e. they remain-live longer) so the @-heap is likely to be bigger
[19:09:10] <pcwalton> some @-boxes
[19:09:16] <pcwalton> other @ boxes it will collect faster
[19:09:26] <graydon> the ones it was waiting on task-death to collect
[19:09:33] <brson> erickt: I opened https://github.com/mozilla/rust/issues/6367 to track our pending LLVM patches. I am personally not all that eager to do this upgrading though. If somebody else wants to do the legwork of pushing this stuff through the bots it's fine with me.
[19:09:51] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[19:09:58] <graydon> thiez: but there's a big reduction in codegen, which means we're sending a lot less stuff through LLVM, and LLVM memory use (and time) are actually the big burdens when compiling rustc
[19:10:24] <graydon> thiez: the codegen reduction is on the order of 20%, IIRC?
[19:10:55] <brson> thiez: I hadn't considered making stdio per-task. it seems like a potentially useful idea though. maybe you can open an issue on it?
[19:11:09] <strcat> there's std::rc now for places that can actually benefit from refcounting
[19:11:27] <strcat> ofc the drop flag really needs to go away for it to be lightweight
[19:11:49] <strcat> either by overloading moves or figuring that out with the compiler
[19:12:09] <graydon> if something was waiting until task-death to collect it was probably a cycle before. it's not clear to me what the weight of cycles in the @-heap are.
[19:12:19] <graydon> I guess I can check that relatively easily
[19:12:46] <thiez> brson: I will. The usecase I was imaging is buffering the #test outputs so that they appear in order even when you run the tests in parallel
[19:12:52] *** Quits: erickt (Adium@7486F7B.9F7BDBDF.8B824544.IP) (Connection reset by peer)
[19:13:03] <thiez> but I'm sure there are other nice applications
[19:13:53] *** jdm|f00d is now known as jdm
[19:14:04] *** Quits: int3_ (int3_@moz-51878B58.public.wayport.net) (Client exited)
[19:14:26] *** Quits: Axord (xord@moz-C3CCF156.lsanca.dsl-w.verizon.net) (Quit: I'm sure it's perfectly safe)
[19:14:30] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[19:14:31] <strcat> rusti: 5
[19:14:32] <rusti> line longer than 100 columns, pastebinned: http://sprunge.us/IYeC
[19:14:37] *** Quits: spider-mario (spidermari@moz-2BC095A6.rev.sfr.net) (Input/output error)
[19:14:37] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[19:15:02] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[19:15:04] <strcat> rusti: 5
[19:15:05] <rusti> 5
[19:15:24] <strcat> rusti: core::run::run_program("dmesg", [])
[19:15:26] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/JVZN
[19:15:45] <strcat> I guess dmesg is a syscall.
[19:18:09] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[19:20:04] <brson> aren't intrinsics unsafe by default by virtue of being extern fns?
[19:20:34] <thiez> rusti: core::unstable::intrinsics::forget(~"foo")
[19:20:45] <tjc> brson: oh, really? hmm, maybe I messed up
[19:20:46] <strcat> sec he's having surgery ;p
[19:20:47] <thiez> curses, it's gone again :D
[19:21:15] <thiez> anyway, your rusti does not use an unsafe block, right?
[19:22:39] * strcat doesn't understand why kmsg doesn't fall under this rule
[19:22:46] <strcat> I guess dmesg has a CAP on the file...
[19:22:58] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[19:23:11] <strcat> rusti: core::run::run_program("cat", [~"/dev/kmsg"])
[19:23:12] <rusti> cat: /dev/kmsg: No such file or directory
[19:23:12] <rusti> 1
[19:23:25] <strcat> rusti: core::run::run_program("ls", [~"/dev/"])
[19:23:27] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/AGER
[19:23:43] <thiez> rusti: core::run::run_program("ls",[~""])
[19:23:44] <rusti> ls: cannot access : No such file or directory
[19:23:44] <rusti> 2
[19:24:10] <thiez> rusti: core::run::run_program("ls",[])
[19:24:11] <rusti> foo
[19:24:11] <rusti> foo.rs
[19:24:11] <rusti> 0
[19:24:25] <thiez> rusti: core::run::run_program("cat",[~"foo.rs"])
[19:24:29] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/cOeN
[19:24:54] <thiez> I guess that proves that the intrinsics are not unsafe by default :)
[19:25:09] <thiez> rusti: core::unstable::intrinsics::forget(~"foo") // because this works without an unsafe block
[19:25:11] <rusti> exchange heap not empty on exit
[19:25:11] <rusti> 1 dangling allocations
[19:25:11] <rusti> Aborted (core dumped)
[19:25:15] <strcat> aren't the ones in core::unstable::intrinsics wrappers?
[19:25:30] <thiez> nope, I don't think so
[19:26:13] *** Quits: dylukes (dylukes@moz-B5418F79.hsd1.pa.comcast.net) (Quit: ["Textual IRC Client: www.textualapp.com"])
[19:27:01] <strcat> hmm dmesg has no capability set
[19:27:13] <strcat> rusti: core::run::run_program("dmesg", [])
[19:27:15] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/LSLB
[19:27:24] <strcat> black magic.
[19:29:10] <thiez> it runs in bochs? cool
[19:29:39] <strcat> hm? no
[19:29:58] *** Joins: int3_ (int3_@moz-AA317CC3.pools.spcsdns.net)
[19:29:58] <strcat> it's in a container inside qemu
[19:30:24] <strcat> dmesg is wrong ;p
[19:30:55] <strcat> I guess they just use the same driver
[19:31:02] <strcat> for DMI
[19:31:10] <strcat> the fake bios 
[19:32:30] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[19:32:30] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/H-7boA
[19:32:30] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[19:33:14] *** Joins: cstrahan (cstrahan@12405AA6.ED659C99.2C87C8BD.IP)
[19:33:23] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[19:35:00] <tjc> brson: intrinsics are, apparently, not unsafe by default
[19:35:12] <tjc> I think that only app;ies to extern C functions?
[19:35:24] <tjc> it seems that it's different for extern things where the abi is "rust-intrinsics"
[19:37:27] <thiez> yup, our atomic ops are 'safe' too
[19:38:34] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[19:38:34] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/kULy4A
[19:38:34] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[19:38:38] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[19:38:38] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/01Poew
[19:38:38] <ghrust> 13rust/06auto 14050c744 15James Miller: Add uninit intrinsic
[19:38:38] <ghrust> 13rust/06auto 14f5ab112 15James Miller: Replace init() with uninit() where appropriate
[19:38:38] <ghrust> 13rust/06auto 145750970 15James Miller: Make staged versions of the functions that use uninit
[19:38:39] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[19:39:36] <brson> tjc: imo that's a bug
[19:39:42] <busylizzy> guys, where i can read about proto! macro? in the reference manual it's only mentioned but no more than.
[19:40:17] <tjc> brson: ok, well, we can discuss that; I don't have strong opinions about it. I'm still fixing these two for now, since there's a bug open
[19:40:24] <brson> np
[19:40:38] <thiez> Most of them aren't truly unsafe, are they?
[19:40:57] *** Joins: ssbr_ (ssbr@moz-2E1A56C2.wireless.utoronto.ca)
[19:41:02] <thiez> size_of should be benign
[19:41:25] <thiez> and all the math stuff
[19:41:37] <brson> thiez: probably not, but it seems inconsistent to me. most code should not be using them directly anyway. i.e. only sys::size_of should ever be calling intrinsics::size_of
[19:42:24] <strcat> brson: I think there should be an attribute for marking extern fns as safe
[19:42:39] *** Quits: lmandel (lmandel@F2D29657.F60B0462.67AC9B1.IP) (Quit: lmandel)
[19:42:40] <thiez> sure, but marking things that aren't unsafe with unsafe just to discourage people from using them seems like it wasn't the true intent of 'unsafe'
[19:43:11] <strcat> #[safe] fn abs(j: c_int) -> c_int;
[19:43:13] <brson> strcat: that's not my intent. my intent is to make the unsafety of foreign ABI's consistent
[19:43:14] <strcat> or whatever
[19:43:18] <thiez> and it encourages people to use unsafe blocks where they are not required
[19:43:21] <brson> strcat: makes sense to be
[19:43:22] <brson> *me
[19:43:45] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[19:43:46] <strcat> rusti: 5
[19:43:47] <rusti> 5
[19:43:55] <thiez> imho it would be quite awesome to have atomic<int> without unsafe code :)
[19:45:06] * strcat doesn't understand why lxc-init mounts stuff *inside* the container
[19:45:37] *** Joins: Jesse (jruderman@moz-BE33DA21.fw1.sfo1.mozilla.net)
[19:47:05] <nmatsakis> graydon: got the fix now for that perf issue
[19:47:24] <strcat> rusti: core::run::run_program("ls", [~"/dev/"])
[19:47:25] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/UORO
[19:47:28] <graydon> nmatsakis: excellent. r=me
[19:47:52] <graydon> (I mean, I can review it if you like also, though I am not sure I'll understand it.. I should work on that)
[19:48:10] <brson> oops, strcat my comment about consistency of foreign ABI's was addressed to thiez, not you. sorry for confusion
[19:48:46] *** Joins: jviereck (Adium@moz-908CE59C.dclient.hispeed.ch)
[19:49:22] *** Parts: doomlord (doomlod@moz-1D2F91FA.range86-150.btcentralplus.com) (Leaving)
[19:50:00] <jld> rusti: core::run::run_program("ls", [~"/"])
[19:50:01] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/SZdL
[19:51:12] * jld wonders what interesting information might be hiding in procfs or sysfs.
[19:51:31] <strcat> jld: there's no sysfs
[19:51:44] <strcat> rusti: core::run::run_program("ls", [~"/proc"])
[19:51:46] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/WBcj
[19:52:06] <strcat> rusti: core::run::run_program("cat", [~"/proc/cpuinfo"])
[19:52:07] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/jNMj
[19:52:10] <jld> rusti: core::run::run_program("cat", [~"/proc/version"])
[19:52:12] <rusti> line longer than 100 columns, pastebinned: http://sprunge.us/FPAW
[19:52:19] <thiez> rusti: core::run::run_program("find",[~"/"])
[19:52:20] <busylizzy> one guy in another chat said that fmt!("%s %d", "str", 5) is shit
[19:52:26] <strcat> it sees a real cpu core ;p
[19:52:28] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/BXMh
[19:52:38] <busylizzy> is fmt! a language part?
[19:53:03] <thiez> busylizzy: sort-of, it's a syntax extension
[19:53:07] <Jeaye> It's statically analyzed.
[19:53:37] <doener> busylizzy: did he elaborate on that or just state it?
[19:53:42] <strcat> brson: I think your PR will conflict with the uninit one
[19:53:55] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[19:54:18] <thiez> perhaps he should have used fmt!("%? %?", "str", 5), much nicer
[19:54:29] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[19:55:13] <busylizzy> so it's possible to implement something like fmt!("str {2+2+$my_var} dkj") ? why authors didn't do this?
[19:55:32] <brson> strcat: it will, yes. i'll iterate until bors is happy
[19:55:39] * brson lunch
[19:55:58] <busylizzy> but without "$". this is awful.
[19:56:12] <tjc> busylizzy: Because fmt! is based on printf, which is familiar to people who know C/C++
[19:56:35] <tjc> someone else could contribute a different formatting library that used different conventions
[19:58:35] *** Joins: gareth0 (gareth0@moz-C702DAA6.dynamic.dsl.as9105.com)
[19:58:49] <Jeaye> "but without "$". this is awful." o.O If we added $ to it, would you be happy?
[19:58:51] *** Joins: mschifer (Adium@moz-BE33DA21.fw1.sfo1.mozilla.net)
[19:58:51] *** Quits: mschifer1 (Adium@moz-BE33DA21.fw1.sfo1.mozilla.net) (Connection reset by peer)
[19:58:52] <busylizzy> in python they refuse old-style formating and use more convenient
[19:59:06] <Jeaye> Needs more cowbell, and more $!
[19:59:44] <thiez> we're not python though
[20:00:36] <busylizzy> Jeaye: you misunderstood me. i mean that $ is awful.
[20:00:52] <nmatsakis> graydon: still working on a good test, I'll push the fix in the meantime
[20:00:56] *** Quits: int3_ (int3_@moz-AA317CC3.pools.spcsdns.net) (Client exited)
[20:01:57] <Jeaye> busylizzy: If you do have a solid complaint with a productive alternative suggestion, the mailing list is the place to go. 
[20:02:31] <busylizzy> tjc: realy? how can someone contribute different formating library if fmt! is part of the language?
[20:02:31] <SiegeLord> I think we just have to wait for non-compiler procedural macros... and then anybody can create one of their own
[20:02:33] <nmatsakis> graydon: https://github.com/mozilla/rust/pull/6373
[20:03:05] <tjc> busylizzy: fmt! isn't part of the language; it's just a set of macros (syntax extensions) built on top of core library functions. Someone else could write different macros based on the same core library functions.
[20:03:33] <busylizzy> okay. sorry :)
[20:03:36] <tjc> no prob
[20:03:56] <strcat> nmatsakis: I wonder if that fixes the bug brson found with fail!()
[20:03:58] <graydon> nmatsakis: thanks
[20:04:01] <strcat> probably not
[20:04:02] <tjc> Jeaye is also correct; proposing something different is a good thing to do on the mailing list, since people tend to miss things on IRC
[20:04:13] <tjc> (IRC is great for "how do I?" questions and such)
[20:04:24] <thiez> IRC is pretty useful for a quick impression though
[20:04:26] *** Quits: KindOne (KindOne@moz-1436D8AE.dynamic.ip.windstream.net) (Ping timeout)
[20:04:37] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[20:04:44] * strcat tries lxc-start
[20:05:03] *** Joins: KindOne (KindOne@moz-1436D8AE.dynamic.ip.windstream.net)
[20:05:06] <strcat> aha lxc-start works
[20:05:29] <nmatsakis> strcat: which bug?
[20:05:39] *** Joins: int3_ (int3_@moz-AA317CC3.pools.spcsdns.net)
[20:05:46] <SiegeLord> busylizzy, What is the alternative to $, incidentally? I kind of like $ as it resembles bash variable expansion
[20:05:48] <strcat> nmatsakis: some random crash from fail! unless debug! was above it
[20:05:54] <strcat> don't remember enough to find it
[20:06:12] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:06:13] <strcat> rusti: 5
[20:06:14] <rusti> line longer than 100 columns, pastebinned: http://sprunge.us/AWFR
[20:06:20] <strcat> heh
[20:06:22] <Jeaye> o.O
[20:06:27] <Jeaye> strcat: You broke it!
[20:06:34] <strcat> rusti: 10
[20:06:35] <rusti> line longer than 100 columns, pastebinned: http://sprunge.us/FGWK
[20:06:47] <strcat> well ls works, I wonder why rustc doesn't
[20:06:49] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[20:07:13] <nmatsakis> strcat: I...don't know. Kind of doubt it.
[20:08:38] <doener> strcat: https://github.com/mozilla/rust/blob/incoming/src/libstd/ebml.rs#L382 this?
[20:08:46] <strcat> yeah
[20:10:09] <strcat> dies in task_start_wrapper with lxc-start
[20:10:11] <strcat> hm
[20:10:29] <busylizzy> SiegeLord: i don't know fundamental alternatives
[20:10:31] <strcat> ah I need to mount /proc myself. maybe
[20:10:56] <strcat> yep there's no /proc
[20:11:41] <SiegeLord> busylizzy, I guess you might mean the {blah:blah} from C#? I kind of like it too over printf's formatting
[20:11:57] *** Quits: Blub\w (wry@moz-77A51BC7.wireless.dyn.drei.com) (Quit: night)
[20:12:44] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:12:45] <busylizzy> SiegeLord: yep
[20:12:46] <jdm> I'm going to be pleased when we've finished nominating and triaging the backlog of open issues
[20:12:48] <strcat> rusti: 10
[20:12:49] <rusti> 10
[20:12:50] <strcat> awesome
[20:12:59] <strcat> rusti: core::run::run_program("ps", [~"ax"]);
[20:13:00] <rusti>   PID TTY      STAT   TIME COMMAND
[20:13:00] <rusti>     1 ?        S+     0:00 su -lc cd /home/rust && rustc foo.rs && exec ./foo rust
[20:13:00] <rusti>     3 ?        Ssl    0:00 ./foo
[20:13:00] <rusti>    14 ?        R      0:00 ps ax
[20:13:06] <strcat> no more init!
[20:13:14] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[20:13:18] <jdm> then it will just be bot comments cluttering up my github inbox again
[20:13:46] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:13:53] <strcat> rusti: core::run::run_program("mount", [])
[20:13:54] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/FHXh
[20:14:20] <doener> rusti: core::run::run_program["./foo", [])
[20:14:21] <rusti> foo.rs:5:43: 5:44 error: incorrect close delimiter: `)`
[20:14:21] <rusti> foo.rs:5          core::run::run_program["./foo", [])
[20:14:21] <rusti>                                                     ^
[20:14:28] <doener> rusti: core::run::run_program(["./foo", [])
[20:14:28] <rusti> foo.rs:5:44: 5:45 error: incorrect close delimiter: `)`
[20:14:28] <rusti> foo.rs:5          core::run::run_program(["./foo", [])
[20:14:28] <rusti>                                                      ^
[20:14:45] <doener> rusti: core::run::run_program("./foo", [])
[20:14:46] <rusti> 1
[20:14:46] <rusti> 0
[20:14:46] <rusti> 0
[20:14:47] <rusti> 0
[20:14:56] <strcat> it goes oom
[20:15:23] <doener> hm, where's that output from?
[20:15:25] <strcat> rusti: core::run::run_program("find", [~"/"])
[20:15:33] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/AiBe
[20:15:43] <strcat> doener: 1 is a return value
[20:15:46] <strcat> dunno about the others
[20:16:36] <strcat> anyway I could let it run as root now ;p
[20:16:36] <thiez> those are also return values?
[20:16:38] *** Quits: int3_ (int3_@moz-AA317CC3.pools.spcsdns.net) (Ping timeout)
[20:16:49] <strcat> thiez: yeah
[20:16:56] <strcat> don't really know why they're 0 though
[20:16:59] *** Quits: pyrac (pyrac@moz-B95F505.w92-156.abo.wanadoo.fr) (Quit: pyrac)
[20:17:10] <strcat> oh
[20:17:15] <strcat> it's because it doesn't bubble up the return
[20:17:17] <strcat> makes sense now
[20:17:21] <thiez> :)
[20:17:25] <strcat> 1 is from the parent of the pid killed by the oom killer
[20:17:30] <strcat> and then it bubbles up the stack successfully
[20:17:32] <thiez> I wonder why there's only 4 lines tho
[20:17:41] *** Joins: int3_ (int3_@moz-AA317CC3.pools.spcsdns.net)
[20:17:49] <strcat> thiez: well the 5th one down used more memory ;p
[20:17:50] <graydon> nmatsakis: what is //! in comments?
[20:17:56] <strcat> so the oom killer killed it first
[20:18:10] <thiez> VM has very little memory?
[20:18:13] *** Quits: int3_ (int3_@moz-AA317CC3.pools.spcsdns.net) (Client exited)
[20:18:21] <strcat> thiez: the VM has 256MiB, but the cgroup has 128MiB
[20:18:28] <strcat> thiez: anyway it probably went 1000 or so down
[20:18:29] <graydon> oh, interior doc-comment for fn
[20:18:31] <graydon> got it
[20:18:36] <strcat> thiez: well, more than 1000
[20:18:45] <strcat> but the 5th one down was the one it killed first.
[20:19:04] <strcat> rusti: core::run::run_program("./foo", [])
[20:19:06] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/eHhI
[20:19:11] <strcat> rusti: core::run::run_program("./foo", [])
[20:19:13] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/Ffgd
[20:19:39] <thiez> how lucky that we only got 4 lines the first time
[20:20:21] <strcat> http://ix.io/5yV anyway this is the container cfg now
[20:20:26] <strcat> lxc.cgroup.memory.limit_in_bytes = 128M
[20:21:25] *** Quits: wunki (wunki@moz-D4C0427D.cm-6-7d.dynamic.ziggo.nl) (Ping timeout)
[20:21:25] *** Joins: pyrac (pyrac@moz-B95F505.w92-156.abo.wanadoo.fr)
[20:22:20] <strcat> rusti: core::run::run_program("ls", [~"/dev"])
[20:22:21] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/FjjR
[20:22:27] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[20:22:54] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:22:55] <strcat> rusti: core::run::run_program("ls", [~"/dev"])
[20:22:56] <rusti> kmsg
[20:22:56] <rusti> random
[20:22:56] <rusti> shm
[20:22:56] <rusti> urandom
[20:22:56] <rusti> 0
[20:23:01] <strcat> huh.
[20:23:11] * strcat doesn't understand where kmsg comes from
[20:23:29] <strcat> rusti: core::run::run_program("df", ~["-h"])
[20:23:31] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/iGMD
[20:23:37] <strcat> rusti: core::run::run_program("df", ["-h"])
[20:23:38] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/LhEd
[20:23:43] <strcat> rusti: core::run::run_program("df", [~"-h"])
[20:23:45] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/GLQU
[20:24:37] <thiez> strcat: why does rusti not allow private messages?
[20:24:49] <strcat> it does right now iirc
[20:24:52] <thiez> oh, nice
[20:24:53] <strcat> it probably shouldn't
[20:25:02] <strcat> because it can block for 5 seconds from a req
[20:26:09] <busylizzy> hm. fmt! checks formatting in compile-time. so compiler knows about fmt!, it's not just library macro!
[20:26:22] *** Quits: mschifer (Adium@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: Leaving.)
[20:26:37] *** Joins: mschifer (Adium@moz-BE33DA21.fw1.sfo1.mozilla.net)
[20:26:42] <strcat> busylizzy: fmt! just takes an AST and outputs an AST though
[20:26:59] <strcat> the type checking has to be after fmt! generates the code afaik.
[20:27:15] <strcat> rusti: fmt!("%s", 5)
[20:27:16] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/DUFA
[20:27:16] <tjc> busylizzy: if you're curious about the details, libsyntax/ext/fmt.rs in the Rust repo is the code that expands the fmt! macro
[20:27:36] <tjc> there is extra code that checks some things, but it's all written in Rust; as far as I know, the compiler doesn't have any special magic for fmt!
[20:27:48] <tjc> code-that-expands-macros can do anything Rust code can
[20:27:50] <busylizzy> i need take a look on implementation fmt!
[20:28:06] <busylizzy> tjc: oh, thanks
[20:28:09] <busylizzy> ^)
[20:28:11] <tjc> yw
[20:28:56] <strcat> rusti: core::run::run_program("ls", []);
[20:28:57] <rusti> foo
[20:28:57] <rusti> foo.rs
[20:29:04] <strcat> rusti: core::run::run_program("touch", [~"bar"]);
[20:29:07] <strcat> rusti: core::run::run_program("ls", []);
[20:29:08] <rusti> foo
[20:29:08] <rusti> foo.rs
[20:29:11] <strcat> hm
[20:29:38] <strcat> I guess lxc-start is fine.
[20:29:44] <strcat> I wonder why that silly lxc-execute version exists
[20:29:47] <Jeaye> core::run::run_program("ls", ["-r", "/"]);
[20:29:54] <Jeaye> rusti: core::run::run_program("ls", ["-r", "/"]);
[20:29:56] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/YJhc
[20:30:41] <strcat> rusti: core::run::run_program("dmesg", []);
[20:30:43] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/cYhV
[20:31:14] *** Joins: brendan (brendaneic@moz-4DDE9085.sub-70-197-3.myvzw.com)
[20:31:38] <Jeaye> rusti: core::run::run_program("sudo", []);
[20:31:39] <rusti> line longer than 100 columns, pastebinned: http://sprunge.us/IcMG
[20:31:47] <cantsin> strcat: is rusti a wrapper around the actual rusti or something else? (apologies if this has been asked before)
[20:31:54] <strcat> rustc
[20:32:00] <Jeaye> rusti: core::run::run_program("reboot", []);
[20:32:01] <rusti> line longer than 100 columns, pastebinned: http://sprunge.us/TbXG
[20:32:09] <strcat> until rusti works and doesn't want gobs of time and memory ;p
[20:32:12] <cantsin> :P
[20:32:13] <cantsin> gotcha
[20:32:36] <strcat> Jeaye: it's non-root but even if it was root it doesn't have that capability
[20:32:39] <strcat> here
[20:32:41] <strcat> I'll make it root
[20:32:41] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[20:32:53] <strcat> well it has no init anyway
[20:33:07] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:33:13] <strcat> rusti: core::run::run_program("whoami", []);
[20:33:14] <rusti> root
[20:33:14] <Jeaye> rusti: core::run::run_program("init 6", []);
[20:33:15] <rusti> line longer than 100 columns, pastebinned: http://sprunge.us/eNXP
[20:33:23] <Jeaye> :)
[20:33:54] <thiez> rusti: core::run::run_program("ls",[~"/root"]);
[20:34:20] <strcat> rusti: core::run::run_program("umount", [~"/tmp"]);
[20:34:21] <rusti> umount: /tmp: must be superuser to umount
[20:34:27] *** Quits: maxli (maxli@F2D29657.F60B0462.67AC9B1.IP) (Quit: Leaving.)
[20:34:29] <Jeaye> rusti: core::run::run_program("rm", [~"-rf", ~"/"]);
[20:34:30] <rusti> rm: it is dangerous to operate recursively on '/'
[20:34:30] <rusti> rm: use --no-preserve-root to override this failsafe
[20:34:34] <strcat> rusti: core::run::run_program("id", []]);
[20:34:35] <rusti> foo.rs:5:40: 5:41 error: incorrect close delimiter: `]`
[20:34:35] <rusti> foo.rs:5          core::run::run_program("id", []]);
[20:34:35] <rusti>                                                  ^
[20:34:40] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[20:34:46] <thiez> rusti: core::run::run_program("ls",[~"/root"]);
[20:34:47] <strcat> Jeaye: read-only fs ;p
[20:34:56] * Jeaye tips his hat.
[20:34:57] <thiez> oh, there is nothing in /root :p
[20:35:03] <thiez> I was wondering why it was ignoring me
[20:35:05] <strcat> and it has no CAP_SYS_ADMIN so it can't umount/mount
[20:35:06] *** Quits: jviereck (Adium@moz-908CE59C.dclient.hispeed.ch) (Quit: Leaving.)
[20:35:14] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:35:23] <strcat> anyway back to non-root but I think there's nothing to be done with root
[20:35:36] <strcat> http://linux.die.net/man/7/capabilities it drops basically all of these now
[20:35:48] <strcat> wow that's a poorly formatted site
[20:41:31] <engla> it would be nice if the crypto/hash modules implement the Writer trait after the new io is done. So you could just pass a sha1writer to hash data
[20:43:45] *** Quits: nukkesi (nukke@moz-1D115A2B.sd.sd.cox.net) (Ping timeout)
[20:43:53] *** Joins: arthurg (ag@moz-19D2AE70.unitymediagroup.de)
[20:44:21] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[20:44:21] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/01Poew
[20:44:21] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[20:46:28] *** Joins: mdu (mdu@moz-9962C9F4.rev.numericable.fr)
[20:46:30] *** Joins: lmandel (lmandel@FE1F74.86ED00A7.971E19F6.IP)
[20:47:23] <seth> Chan<()> means something very similar to Chan () in Haskell, right? (specifically asking about the () type)
[20:47:26] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[20:47:26] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/93tCZw
[20:47:26] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[20:47:27] <gareth0> are the tests currently broken on incoming?
[20:48:05] *** Quits: lkuper (lkuper@moz-D6AAFF3.cs.indiana.edu) (Ping timeout)
[20:48:58] <seth> ah ok, just found it in the docs
[20:49:05] <seth> and the answer to my question is yes
[20:49:05] <mzabaluev> gareth0: worked fine for me as of 7a4c6e5
[20:49:21] * strcat found a flaw in rusti
[20:49:40] <friggle> strcat: just one?
[20:49:54] <strcat> I mean the bot ;p
[20:49:57] <gareth0> thanks mzabaluev, must be just me
[20:50:08] <strcat> tmpfs resource usage isn't accounted for as part of the cgroup memory usage
[20:50:27] <strcat> so you can make the VM go OOM (and it kills the python script supervising the container)
[20:52:03] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[20:53:06] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:53:21] * strcat fixes it
[20:53:52] *** Joins: SimonSapin (simon@506BD4CF.DDD32887.F17D41AD.IP)
[20:54:05] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[20:54:10] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[20:58:22] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[21:00:59] *** Quits: Palmik (palmik@moz-DADC71F0.pks.muni.cz) (Quit: Lost terminal)
[21:03:00] *** Quits: Jesse (jruderman@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: Jesse)
[21:04:26] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[21:04:31] *** Quits: noam (noam@F6B530A7.720527A7.416762B.IP) (Ping timeout)
[21:04:39] *** Joins: Jesse (jruderman@moz-BE33DA21.fw1.sfo1.mozilla.net)
[21:05:24] *** Quits: jdm (jdm@DB05BBF2.BB1F48F2.971E19F6.IP) (Quit: Lost terminal)
[21:05:28] *** Joins: noam (noam@F6B530A7.720527A7.416762B.IP)
[21:05:52] <enticeing> man, using X is a nightmare with any language
[21:06:23] *** Quits: Jesse (jruderman@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: Jesse)
[21:06:33] <sp3d> truth
[21:06:44] *** Quits: raze (raze@moz-4E6675AF.bredband.comhem.se) (Ping timeout)
[21:07:28] *** Quits: gareth0 (gareth0@moz-C702DAA6.dynamic.dsl.as9105.com) (Ping timeout)
[21:07:58] <jack> tjc: rustpkg::Crate doesn't exist anymore?
[21:08:58] *** Quits: ssbr_ (ssbr@moz-2E1A56C2.wireless.utoronto.ca) (Ping timeout)
[21:09:12] <enticeing> can someone give me the syntax for deriving eq again?
[21:09:34] <jack> enticeing: #[deriving(Eq)] right before the struct def.
[21:09:44] <enticeing> thanks
[21:10:52] <bjz> graydon: thoughts? https://github.com/mozilla/rust/pull/6333#issuecomment-17649068
[21:13:53] *** Quits: seth (seth@moz-C03D0C61.vlan426.asr1.sfo1.gblx.net) (Ping timeout)
[21:14:35] <aatch|bed> bjz, well I like it :D
[21:16:02] *** Joins: seth (seth@moz-BE33DA21.fw1.sfo1.mozilla.net)
[21:16:06] <bjz> :)
[21:16:55] *** Joins: lkuper (lkuper@99346DF3.FFCF2A3B.51B6877.IP)
[21:18:12] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[21:18:25] <enticeing> can you index a tuple like a vector?
[21:18:29] <strcat> rusti: core::run::run_program("df", [~"-h"]);
[21:18:31] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/BOYQ
[21:18:33] <enticeing> oh, nevermind that
[21:18:34] <pcwalton> tjc: r? https://github.com/mozilla/rust/pull/6375
[21:18:35] <strcat> enticeing: no, have to destructure it
[21:18:47] <tjc> pcwalton: looking
[21:18:53] <tjc> jack: hmm, let me check what that was...
[21:20:01] <tjc> jack: hmm, I think it's still there -- in rustpkg.rc
[21:20:29] *** Quits: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net) (Quit: jorendorff)
[21:20:58] *** Joins: thelivingded (thelivingd@moz-9453CC48.austin.res.rr.com)
[21:21:47] *** Quits: cstrahan (cstrahan@12405AA6.ED659C99.2C87C8BD.IP) (Ping timeout)
[21:21:58] *** Joins: cstrahan (cstrahan@12405AA6.ED659C99.2C87C8BD.IP)
[21:22:33] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[21:23:03] *** Quits: Ralith (ralith@moz-50F3C77.vc.shawcable.net) (Ping timeout)
[21:23:07] <enticeing> would it be hard to set up something with rust similar to play.golang.org ?
[21:23:43] *** Quits: brendan (brendaneic@moz-4DDE9085.sub-70-197-3.myvzw.com) (Quit: brendan)
[21:23:48] <tjc> enticeing: I don't imagine it would be especially hard. just a project waiting for someone to pick it up
[21:23:57] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[21:24:11] <enticeing> i probably would, but i don't know the first thing about web development
[21:24:18] <strcat> enticeing: essentially the same as the rusti bot I made.
[21:24:24] <strcat> just with a web frontend instead of irc
[21:24:24] *** Joins: ssbr_ (ssbr@A9D9D38C.B6F034AC.72A31D6.IP)
[21:24:39] *** Quits: lmandel (lmandel@FE1F74.86ED00A7.971E19F6.IP) (Quit: lmandel)
[21:24:44] <enticeing> strcat: speaking of rusti, if you /msg it will it /msg back?
[21:24:56] <strcat> yes for now
[21:25:02] <strcat> dealing with fs issues atm ;p
[21:25:10] <enticeing> don't want to be clogging up the channel with silly rusti things
[21:25:51] <aatch|bed> Hmm, I could probably set up a basic rust play site quite quickly.
[21:25:59] * aatch|bed is a web dev by day
[21:26:01] *** aatch|bed is now known as aatch
[21:26:17] <strcat> the sandboxing is the only non-trivial part
[21:26:37] <cantsin> aatch: would this play site be built in rust?
[21:26:40] <strcat> needs to be fast which containers are nice for
[21:26:51] <aatch> cantsin, no
[21:26:51] <enticeing> i just like to keep something like that open to run silly little code fragments
[21:26:52] *** bhearsum is now known as bhearsum|afk
[21:27:07] <aatch> not if you want it to be done quickly
[21:27:31] <aatch> honestly, I'd almost certainly do it in PHP, since that's what I know
[21:27:43] * cantsin backs away  ;)
[21:28:27] <nmatsakis> graydon: r? https://github.com/mozilla/rust/pull/6376
[21:28:32] <nmatsakis> graydon: took me a while to get a test for that...
[21:28:37] <strcat> it would take me 10 seconds to swap out the irc frontend I have for this with a web frontend ;p
[21:29:12] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Ping timeout)
[21:29:44] <aatch> strcat, yeah, I was thinking a couple hours including making it pretty and use AJAX
[21:29:45] *** Quits: azita (Azita@2557E599.66715431.D25A875A.IP) (Quit: azita)
[21:29:47] *** Quits: webber46 (webber46@moz-F6310FF0.lha.sgsnet.se) (Quit: webber46)
[21:30:02] <strcat> well that's easy too!
[21:30:17] <aatch> CSS is a bitch though
[21:31:01] <doener> nmatsakis: with the fix, performance is much closer to what it was. Still 10% slower when compiling libcore, but I can't tell why, yet
[21:31:19] <nmatsakis> doener: 10% perf drop in the parser specifically, or in general?
[21:31:22] <cmr> aatch: doing it with bootstrap usually makes things reasonably good-looking, reasonably fast.
[21:31:40] <aatch> cmr, I guess.
[21:31:52] <doener> nmatsakis: for the whole build of libcore.so
[21:31:57] <giselher> Hi, how do I access c functions take variable arguments with foreign interface?
[21:32:00] <doener> nmatsakis: from 20s to 22s
[21:32:04] <nmatsakis> doener: have you compraed with -Z time-passes?
[21:32:13] <aatch> giselher, unfortunately, you don't
[21:32:13] <nmatsakis> doener: I know that the new borrowck has some perf issues, which I was working on separately...
[21:32:24] <nmatsakis> doener: ...might be that.
[21:32:30] <giselher> aatch: oh, ok thanks
[21:33:14] <doener> nmatsakis: not yet, I don't have old binaries around anymore and it's 11:30pm over here, so I'll be off to bed, soon. It "feels" like the perf profile has more glue_take_* in it than before
[21:33:19] <aatch> giselher, generally it's easier to write wrapper functions in C and call those
[21:34:01] <nmatsakis> doener: k.
[21:34:02] *** Joins: ahsanulhaque (Adium@BF4FF158.609A36E8.8A1977BB.IP)
[21:34:24] <jack> tjc: how do i get ahold of a rustpkg::Ctx?
[21:34:28] <giselher> aatch: do I need to write a library and link against it or can I compile c files with rust files?
[21:34:49] <jack> tjc: oh wait. nevermind. i want what used to be rustpkg::build and that does not seem to be Ctx::build
[21:35:09] <cmr> giselher: you can link to object files made with 'cc -c'
[21:35:16] <tjc> jack: ok. I don't have a "default Ctx" constructor yet anyway...
[21:35:17] <cmr> you don't need to specifically make a library
[21:35:39] <tjc> jack: the struct definition is in librustpkg/context.rs -- the only field that's used anywhere yet is sysroot_opt
[21:35:45] <cantsin> what could i use to profile rust? or do i have to look at the generated assembly for that?
[21:36:00] <strcat> cantsin: perf, etc.
[21:36:03] <cmr> cantsin: on linux I use perf
[21:36:07] <strcat> aatch: http://ix.io/5z4 I mean that's the entire backend part with what I already have ;p
[21:36:15] <tjc> jack: you can look at test_sysroot() in librustpkg/tests.rs for what to set the sysroot to
[21:36:20] <tjc> (that's kind of ugly right now)
[21:36:33] <cantsin> thanks guys!
[21:36:45] *** Quits: doener (doener@moz-121949B3.unitymediagroup.de) (Quit: leaving)
[21:37:52] <jack> if i have pkg.rs it skips lib.rs right?
[21:38:56] <tjc> jack: yes, that's right
[21:39:19] *** Quits: SimonSapin (simon@506BD4CF.DDD32887.F17D41AD.IP) (Quit: Leaving.)
[21:40:44] <jack> I can't get ahold of the PkgSrc object in pkg.rs either it seems
[21:41:14] <jack> the tests just call rustc with core::run, but that seems wrong.
[21:41:41] <cantsin> strcat: your python3 backend part -- "import rust" -- how does that work? 
[21:42:08] <strcat> cantsin: runs rust code in a container
[21:42:27] <strcat> and that's where the pastebin logic is atm (but it shouldn't be if it were to be generic)
[21:42:46] <cantsin> ah, right, but how do you call rust.evaluate from python? i'm assuming a c interface to both python/rust?
[21:42:51] *** Joins: raze (raze@moz-4E6675AF.bredband.comhem.se)
[21:42:53] <jack> tjc: it seems to e missing a way to trigger the build of a crate from inside pkg.rs
[21:43:17] <strcat> cantsin: rust.evaluate just spawns a container, compiles the code with rustc and returns the result
[21:43:21] <tjc> jack: yeah, that's my fault I didn't understand at first that the pkg.rs file was supposed to manually trigger the build as opposed to have having pre-build or post-build hooks...
[21:43:25] <cantsin> strcat: thanks!
[21:43:32] <tjc> but I think I have an example that does it, though it's more clunky than it should be
[21:43:33] <tjc> 1 sec
[21:44:07] *** Quits: Excureo (c@moz-DE8C33F1.static.yakm.wa.charter.com) (Input/output error)
[21:44:14] <jack> tjc: i saw the test that used core::run
[21:44:40] <strcat> cantsin: http://ix.io/5z8 it's just this
[21:44:53] <tjc> jack: Ah, yes, that's the one I was thinking of. I couldn't remember where I was using core::run or calling the driver
[21:45:16] <tjc> jack: well, you have two choices -- either call the driver functions directly (basically grabbing the relevant code out of util.rs in rustpkg), or wait for me to add a helper function that wraps them up more nicely
[21:45:16] <enticeing> and now i've hanged rustc again...
[21:46:34] <cantsin> strcat: ah, when i first saw "import rust", i thought it was some kind of python-rust binding ;)
[21:46:46] <cantsin> but yea makes sense
[21:46:49] *** Joins: jgilbert (jgilbert@2557E599.66715431.D25A875A.IP)
[21:47:16] *** Joins: Jesse (jruderman@moz-C03D0C61.vlan426.asr1.sfo1.gblx.net)
[21:48:12] *** Joins: Ralith (ralith@moz-95DA29C.wireless.sfu.ca)
[21:50:25] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[21:50:39] *** Joins: SimonSapin (simon@506BD4CF.DDD32887.F17D41AD.IP)
[21:51:32] *** Quits: pyrac (pyrac@moz-B95F505.w92-156.abo.wanadoo.fr) (Quit: pyrac)
[21:51:47] *** Quits: arthurg (ag@moz-19D2AE70.unitymediagroup.de) (Quit: Leaving)
[21:52:24] <seth> does rust have compile-time reflection of any sort? trying to figure out if one could write a macro that would automatically write a constructor for a struct
[21:52:44] <pcwalton> seth: usually what you do in that case is to have the macro take the structure definition as an argument
[21:53:18] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[21:53:18] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/AWoCAQ
[21:53:18] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[21:53:21] <seth> pcwalton: ahh i see, and then generate both the real structure definition and then constructor. that makes sense; thanks
[21:53:26] *** Quits: SiegeLord (sl@moz-56D7E78.bstnma.fios.verizon.net) (Quit: It's a joke. It's all a joke.)
[21:53:58] *** Parts: true_droid (Adium@moz-123FD9B8.beck.volia.net) ()
[21:54:52] *** Quits: thelivingded (thelivingd@moz-9453CC48.austin.res.rr.com) (Ping timeout)
[21:54:52] <aatch> seth, that might not work exactly as expected though, as macros currently can only expand to one item
[21:54:53] <enticeing> okay, why do i keep getting `illegal borrow: creating mutable alias to dereference of immutable ~ pointer`
[21:55:09] <pcwalton> enticeing: because your ~ pointer is immutable
[21:55:14] <pcwalton> and you're trying to mutate it somehow
[21:55:16] <aatch> enticeing, because you are making a &mut out of a ~?
[21:55:17] <enticeing> it shouldn't be though
[21:55:32] <aatch> enticeing, is the variable holding your ~ marked `mut`?
[21:55:40] <enticeing> it's in a struct
[21:55:54] <aatch> enticeing, is the variable holding the struct marked mut?
[21:55:56] <seth> aatch: ahh, drat! and i suppose there is nothing that would serve the purpose of a "block" at the top level to expand into
[21:56:23] <enticeing> there isn't a variable holding the struct yet
[21:56:32] <aatch> enticeing, is this a method?
[21:56:48] <enticeing> yes, and i made sure i was using `&mut self`
[21:57:23] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[21:57:40] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[21:57:44] <strcat> rusti: 1
[21:57:45] <rusti> 1
[21:57:47] <aatch> Hmm, no idea then.
[21:58:32] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[21:58:34] *** Joins: thelivingded (thelivingd@moz-9453CC48.austin.res.rr.com)
[21:58:37] <pcwalton> make sure you've assigned the struct to a mutable variable
[21:58:41] <pcwalton> rvalues are immutable in rust
[21:58:56] <aatch> pcwalton, its a method with &mut self
[21:59:01] *** Joins: Excureo (c@moz-DE8C33F1.static.yakm.wa.charter.com)
[21:59:07] <pcwalton> if you're calling that method on an rvalue
[21:59:12] <pcwalton> you're going to get that error.
[21:59:13] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[21:59:13] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/IL9xTQ
[21:59:13] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[21:59:14] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[21:59:14] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/aIpzYA
[21:59:14] <ghrust> 13rust/06auto 14acc78d1 15Brian Anderson: Move flate from core to std
[21:59:14] <ghrust> 13rust/06auto 1415520d1 15bors: auto merge of #6205 : brson/rust/flate, r=brson...
[21:59:14] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[21:59:36] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[21:59:40] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[22:00:03] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[22:00:21] *** Quits: cstrahan (cstrahan@12405AA6.ED659C99.2C87C8BD.IP) (Ping timeout)
[22:01:21] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[22:01:42] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[22:01:59] <enticeing> this is what i'm doing http://ix.io/5za/
[22:02:18] <enticeing> i'm having trouble around line 40
[22:02:43] *** Quits: saml (sam@moz-14C16814.cst.lightpath.net) (Quit: Leaving)
[22:03:43] <aatch> enticeing, `let left = ...`, `let right = ...` should be `let mut ...`
[22:04:10] <enticeing> even then i still get use of partially moved value
[22:04:26] <enticeing> and then if i use copy, i get back to the earlier error
[22:04:29] <aatch> enticeing, get_ref
[22:04:35] <aatch> on option
[22:05:11] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[22:05:28] *** Quits: lkuper (lkuper@99346DF3.FFCF2A3B.51B6877.IP) (Ping timeout)
[22:05:38] <enticeing> get_ref ?
[22:06:04] <aatch> I'm pretty sure that's the name
[22:06:26] <aatch> instead of get()
[22:06:32] <engla> maybe get_mut_ref?
[22:06:43] <aatch> engla, possibly
[22:07:34] <enticeing> get_mut_ref compiles...
[22:09:10] *** Quits: seth (seth@moz-BE33DA21.fw1.sfo1.mozilla.net) (Ping timeout)
[22:09:49] *** Quits: thelivingded (thelivingd@moz-9453CC48.austin.res.rr.com) (Ping timeout)
[22:09:54] *** Quits: jessicah (jessicah@moz-B8A3AE25.massey.ac.nz) (Ping timeout)
[22:09:54] *** Quits: jyyou (jyyou@moz-47B052FA.cs.nctu.edu.tw) (Ping timeout)
[22:10:17] *** Joins: seth (seth@moz-BE33DA21.fw1.sfo1.mozilla.net)
[22:11:26] *** Quits: lerc (quassel@121.75.155.67) (Connection reset by peer)
[22:11:46] *** Joins: lerc (quassel@6174E42B.BEFA2430.788638A4.IP)
[22:12:21] <pcwalton> typeck::check::check_expr is a 1,675 line function
[22:12:33] <aatch> pcwalton, holy...
[22:12:50] <aatch> I think there needs to be a little refactoring...
[22:12:51] *** Joins: HOLYCOWBATMAN (Mibbit@moz-AB722A1C.mc.videotron.ca)
[22:13:46] <pcwalton> oh well, it has a bunch of inner functions
[22:13:48] * aatch considers ~200 lines to be "large"
[22:13:52] <pcwalton> still, it's 683 lines not counting them
[22:14:26] <aatch> pcwalton, I'm not sure about that inner function pattern in rustc, eh?
[22:14:34] <pcwalton> yeah, I'm not a big fan
[22:15:19] <tjc> yeah, I'm not sure why those inner functions have to be inner functions
[22:16:00] <aatch> Also, the generalized closures are way more useful, since they can capture the environment.
[22:16:13] <tjc> I think much of the code with inner functions actually pre-dates closures
[22:16:16] <tjc> well
[22:16:17] *** Joins: jyyou (jyyou@moz-47B052FA.cs.nctu.edu.tw)
[22:16:19] <tjc> pre-dates closures being useful
[22:16:27] <aatch> tjc, that's what I thought
[22:16:39] <tjc> I remember back when we had to use bind for everything...
[22:16:51] <pcwalton> I remember that
[22:16:58] *** Quits: echristo (echristo@CFC3C6C3.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[22:17:04] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[22:17:05] *** Quits: EXetoC (ex@moz-C741B177.customer.t3.se) (Quit: WeeChat 0.4.0)
[22:17:06] <aatch> "In my daaayyy..."
[22:17:07] <strcat> rusti: 1
[22:17:08] <rusti> 1
[22:17:09] <strcat> yay!
[22:17:18] <strcat> rusti: core::run::run_program("dmesg", [])
[22:17:19] <rusti> [    0.000000] Initializing cgroup subsys cpuset
[22:17:19] <rusti> [    0.000000] Initializing cgroup subsys cpu
[22:17:19] <rusti> [    0.000000] Linux version 3.8.11-1-ARCH (tobias@T-POWA-LX) (gcc version 4.8.0 20130425 (prerelease) (GCC) ) #1 SMP PREEMPT Wed May 1 20:18:57 CEST 2013
[22:17:19] <rusti> [    0.000000] Command line: root=UUID=6203ac1a-aad4-4010-a581-dd9f09354a5a rw
[22:17:19] <rusti> [    0.000000] e820: BIOS-provided physical RAM map:
[22:17:19] <rusti> [    0.000000] BIOS-e820: [mem 0x0000000000000000-0x000000000009fbff] usable
[22:17:19] <rusti> [    0.000000] BIOS-e820: [mem 0x000000000009fc00-0x000000000009ffff] reserved
[22:17:20] <rusti> [    0.000000] BIOS-e820: [mem 0x00000000000f0000-0x00000000000fffff] reserved
[22:17:22] <rusti> [    0.000000] BIOS-e820: [mem 0x0000000000100000-0x000000000fffdfff] usable
[22:17:24] <rusti> [    0.000000] BIOS-e820: [mem 0x000000000fffe000-0x000000000fffffff] reserved
[22:17:24] *** concrete.mozilla.org sets mode: +M 
[22:17:26] <rusti> [    0.000000] BIOS-e820: [mem 0x00000000feffc000-0x00000000feffffff] reserved
[22:17:27] <strcat> heh
[22:17:28] <rusti> [    0.000000] BIOS-e820: [mem 0x00000000fffc0000-0x00000000ffffffff] reserved
[22:17:30] <rusti> [    0.000000] NX (Execute Disable) protection: active
[22:17:31] <Jeaye> uh oh
[22:17:31] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[22:17:32] <tjc> does it not pastebin anymore?
[22:17:35] <strcat> I broke it.
[22:17:43] <tjc> onoez!
[22:17:51] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[22:17:55] <strcat> rusti: core::run::run_program("dmesg", [])
[22:17:56] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/JRJX
[22:18:01] <tjc> :-D
[22:18:17] <strcat> it still doesn't do what I want ;p
[22:18:24] <aatch> Grr, stupid client not identifying me
[22:18:27] <strcat> rusti: core::run::run_program("touch", [~"/foo"])
[22:18:28] <rusti> touch: cannot touch '/foo': Read-only file system
[22:18:28] <rusti> 1
[22:18:32] *** Joins: thelivingded (thelivingd@moz-9453CC48.austin.res.rr.com)
[22:18:37] <seth> is there a standard library function that encapsulates the pattern "if an Option matches Some x, then return Some f(x), else return None"?
[22:18:40] *** Joins: jessicah (jessicah@moz-B8A3AE25.massey.ac.nz)
[22:18:49] <pcwalton> seth: map()
[22:19:01] <seth> pcwalton: ah ok
[22:19:05] <strcat> or chain, depending on the specific thing you want to do
[22:19:12] <strcat> rusti: core::run::run_program("df", [~"-h"])
[22:19:14] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/UUeS
[22:19:15] <aatch> or mutate
[22:19:26] <strcat> ughh I have trouble understanding how the fs namespaces work
[22:19:30] * aatch likes mutate_default
[22:20:01] * strcat wonders why there are two / and two /dev/shm :|
[22:20:16] <strcat> rusti: core::run::run_program("ls", [~"/dev"])
[22:20:17] <rusti> random
[22:20:18] <rusti> shm
[22:20:18] <rusti> urandom
[22:20:18] <rusti> 0
[22:20:29] <strcat> and.... how does dmesg work without kmsg?
[22:20:36] <strcat> rusti: core::run::run_program("dmesg", []);
[22:20:39] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/dCDY
[22:20:52] <strcat> must be a syscall ;\
[22:22:15] <strcat> rusti: core::run::run_program("sh", [~"-c", ~"yes | tee /tmp/foo /dev/shm/foo /home/rust/foo /var/spool/mail/foo"]);
[22:22:19] *** Quits: aatch (aatch@moz-2BB0AC01.cable.telstraclear.net) (Ping timeout)
[22:22:24] *** concrete.mozilla.org sets mode: -M 
[22:22:36] <strcat> well that's good, a new kind of error!
[22:23:21] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[22:26:36] *** Quits: Ralith (ralith@moz-95DA29C.wireless.sfu.ca) (Ping timeout)
[22:27:10] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[22:27:19] <strcat> rusti: core::run::run_program("sh", [~"-c", ~"yes | tee /tmp/foo"]);
[22:28:03] <strcat> ah that makes sense ;p
[22:28:11] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[22:30:05] *** Quits: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: ChatZilla 0.9.90-rdmsoft [XULRunner 18.0.2/20130201065344])
[22:30:06] <strcat> python's subprocess module isn't very robust ;p
[22:30:45] *** Joins: aatch (aatch@moz-2BB0AC01.cable.telstraclear.net)
[22:30:54] <strcat> Note
[22:30:57] <strcat> The data read is buffered in memory, so do not use this method if the data size is large or unlimited.
[22:35:17] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[22:35:17] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1415520d1 to 14f547a67: 02http://git.io/N3iJvQ
[22:35:17] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[22:35:20] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[22:35:20] <ghrust> 01[13rust01] 15bors pushed 9 new commits to 06auto: 02http://git.io/kNCBSQ
[22:35:20] <ghrust> 13rust/06auto 14fc9ff24 15Alex Crichton: Implement a new protocol for `for` loops that's much more easily composable
[22:35:20] <ghrust> 13rust/06auto 1473c1397 15Alex Crichton: core: Use the new `for` protocol
[22:35:20] <ghrust> 13rust/06auto 149d07076 15Alex Crichton: std: Use the new `for` protocol
[22:35:22] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[22:36:25] *** Quits: seth (seth@moz-BE33DA21.fw1.sfo1.mozilla.net) (Ping timeout)
[22:36:25] *** Quits: geomyidae (geomyidae@9FDA6BE2.37A86C23.448B98CC.IP) (Ping timeout)
[22:36:28] *** Joins: brendan (brendaneic@2557E599.66715431.D25A875A.IP)
[22:37:08] <enticeing> hey aatch, could you tell me if i'm missing something here? http://ix.io/5ze
[22:37:13] *** Joins: seth (seth@moz-BE33DA21.fw1.sfo1.mozilla.net)
[22:37:16] <enticeing> ConfigureWindow seems to be having no effect
[22:37:33] *** Quits: ssbr_ (ssbr@A9D9D38C.B6F034AC.72A31D6.IP) (Ping timeout)
[22:38:10] *** Quits: seth (seth@moz-BE33DA21.fw1.sfo1.mozilla.net) (Connection reset by peer)
[22:38:56] *** Joins: geomyidae (geomyidae@9FDA6BE2.37A86C23.448B98CC.IP)
[22:39:16] *** Quits: geomyidae (geomyidae@9FDA6BE2.37A86C23.448B98CC.IP) (Input/output error)
[22:39:59] *** Joins: seth (seth@moz-BE33DA21.fw1.sfo1.mozilla.net)
[22:40:34] <aatch> enticeing, no idea sorry
[22:40:44] *** Joins: int3_ (int3_@moz-AA317CC3.pools.spcsdns.net)
[22:40:56] <enticeing> it's fine
[22:41:00] *** Joins: ssbr_ (ssbr@A9D9D38C.B6F034AC.72A31D6.IP)
[22:41:05] <enticeing> it seems to happen at random, which bugs me
[22:41:16] <enticeing> i'll implement one feature or another, and suddenly windows refuse to configue
[22:41:29] <aatch> So was it working before?
[22:41:43] *** Quits: seth (seth@moz-BE33DA21.fw1.sfo1.mozilla.net) (Ping timeout)
[22:41:53] *** Joins: echristo (echristo@CFC3C6C3.D6CCE4AE.77834EAA.IP)
[22:41:58] <enticeing> well, the odd thing is that i won't even change that part of the program, and it'll change
[22:42:02] <enticeing> so i really have no idea at this point
[22:45:05] *** Joins: jorendorff (jorendorff@moz-30F4FB9E.hfc.comcastbusiness.net)
[22:45:40] *** Joins: catpig (catpig@moz-42667BF1.dip0.t-ipconnect.de)
[22:46:40] <cantsin> soo... i may be missing something incredibly basic here but when you compile rust, it goes through several stages, right? what does each stage do, exactly? (any documentation on that somewhere or is it llvm specific?)
[22:47:07] <strcat> cantsin: that's just because it's self-hosting
[22:47:08] <aatch> cantsin, rust is a bootstrapped compiler.
[22:47:17] <strcat> gcc builds itself in 3 stages too
[22:47:54] <cantsin> ah ok, so the first stage (0) is bootstrapping, but what do the rest do?
[22:48:12] <aatch> So it downloads a pre-built compiler, compiles itself, then uses that compiler to compile itself again and finally does one last compile of itself
[22:48:29] *** Joins: seth (seth@moz-BE33DA21.fw1.sfo1.mozilla.net)
[22:48:31] <enticeing> it's to make sure you don't have other things affect the final system
[22:48:41] <cantsin> ah, is that why it takes so long to build? each stage, i presume, optimizes the previous one?
[22:48:47] <seth> so do macros support any kind of stringification? e.g. if i match $x:expr in the pattern, can i get back the literal string of source code that $x matched?
[22:48:59] <enticeing> it's the same reason you build a temporary toolchain in linux from scratch
[22:49:03] <aatch> seth, there is stringify!
[22:49:35] <jack> cantsin: the goal is to have a compiler built with itself. stage0 is the old one. stage1 is the new one built by the old one. stage2 is finally the new one build with the new one.
[22:49:35] <kimundi> cantsin: stage0: compile libaries and compiler with downloaded compiler. stage1: build libaries and compiler with compiler buil by old downloaded compiler. stage2: build libaries and compiler with compiler build by current compiler
[22:49:40] <aatch> I'm not sure if it accepts arbitrary token trees though
[22:50:09] <cantsin> awesome, thanks guys. that makes sense.
[22:50:29] <seth> aatch: nice. looks like it might work for my purposes, at least
[22:50:43] <jack> there's also a stage3, where you build the new one with one that has been built by the new one. stage2 should be the same as stage3, so in practice you don't build stage3 except for testing i think
[22:50:46] <cantsin> any documentation i could look at?
[22:50:55] <aatch> cantsin, for the build process?
[22:51:35] <cantsin> yeah, i'm curious as to the details.
[22:52:17] <aatch> https://github.com/mozilla/rust/wiki/Note-compiler-snapshots - Something
[22:52:41] <cantsin> aatch: perfect, many thanks!
[22:53:02] <mdu> In libsyntax/parse/parser.rs, in fn bump(&self), it is written :   *self.buffer_start = (*self.buffer_start + 1) & 3;
[22:53:10] <mdu> what is the & 3 part for ?
[22:53:14] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Quit: Leaving.)
[22:53:27] <pcwalton> mdu: it's the trick for efficiently caching lookahead in a buffer
[22:53:59] <mdu> ok, I don't get it
[22:54:11] <pcwalton> you have 4 tokens of lookahead
[22:54:19] <pcwalton> stored in a circular buffer
[22:54:27] <pcwalton> using & 3 is the way to efficiently cycle through the buffer
[22:54:38] <pcwalton> & 3 is the same as % 4
[22:55:24] <aatch> rusti: fmt!("%t", 3)
[22:55:35] <aatch> Dammit...
[22:55:36] *** Quits: bjz (brendanzab@moz-C1DF04F7.lns8.woo.bigpond.net.au) (Quit: Leaving...)
[22:55:39] <mdu> ok, so the key is that the lookahead is a cirular buffer. thanks a lot
[22:55:45] <aatch> 3 = 0x111
[22:55:55] <aatch> 0x11*
[22:55:59] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[22:56:05] <strcat> rusti: 21
[22:56:06] <rusti> 21
[22:56:11] <strcat> rusti: core::run::run_program("sh", [~"-c", ~"yes | tee /tmp/foo /dev/shm/foo /home/rust/foo /var/spool/mail/foo"]);
[22:56:12] <aatch> Godammit rusti
[22:56:12] <rusti> more than 10000 lines of output, bailing out
[22:56:20] <strcat> rusti: core::run::run_program("sh", [~"-c", ~"yes | tee /tmp/foo /dev/shm/foo /home/rust/foo /var/spool/mail/foo >/dev/null"]);
[22:56:20] <rusti> sh: /dev/null: Read-only file system
[22:56:25] <strcat> heh
[22:56:28] <strcat> I have no dev/null
[22:56:40] <strcat> rusti: core::run::run_program("sh", [~"-c", ~"yes | tee /tmp/foo /dev/shm/foo /home/rust/foo /var/spool/mail/foo >/dev/urandom"]);
[22:56:44] <aatch> rusti: fmt!("%t", 3)
[22:56:45] <rusti> timed out after 5 seconds
[22:56:48] *** Joins: Ralith (ralith@moz-50F3C77.vc.shawcable.net)
[22:56:51] <strcat> rusti: 1
[22:56:51] <aatch> ?
[22:56:59] * strcat severely broke it
[22:57:08] <strcat> rusti: 5
[22:57:18] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[22:58:26] *** Quits: brendan (brendaneic@2557E599.66715431.D25A875A.IP) (Quit: brendan)
[22:58:41] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[22:58:44] <strcat> rusti: 1
[22:58:44] <rusti> 1
[22:58:47] <strcat> rusti: 5
[22:58:47] <rusti> 5
[22:58:51] <strcat> rusti: loop {}
[22:58:52] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/TQfK
[22:58:54] <Jeaye> rusti: -1
[22:58:55] <rusti> -1
[22:58:59] <aatch> rusti: fmt!("%t", 3)
[22:59:00] <rusti> ~"11"
[22:59:01] <strcat> rusti: fn foo() { loop {} }; foo()
[22:59:06] <rusti> timed out after 5 seconds
[22:59:07] <strcat> rusti: 5
[22:59:09] <seth> i don't see a map with the arguments reversed in the iter module
[22:59:13] *** Quits: joshua_ (joshua@moz-45967CBE.emarhavil.com) (Quit: User disconnected)
[22:59:14] <strcat> hm it doesn't recover from that now
[22:59:17] <Jeaye> strcat: uh oh
[22:59:28] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[22:59:37] <strcat> I had to write my out signal handling
[22:59:41] <strcat> the python stuff is really fragile
[22:59:44] <seth> looks like there is no built-in "flip" either
[22:59:47] <strcat> it builds up a huge buffer of all the stdout
[22:59:52] *** Quits: int3_ (int3_@moz-AA317CC3.pools.spcsdns.net) (Ping timeout)
[23:00:11] *** Quits: ahsanulhaque (Adium@BF4FF158.609A36E8.8A1977BB.IP) (Ping timeout)
[23:01:20] *** Quits: SimonSapin (simon@506BD4CF.DDD32887.F17D41AD.IP) (Quit: Leaving.)
[23:01:21] <aatch> seth, what do you mean?
[23:02:59] <strcat> oh it somehow loses lxc-start
[23:03:05] <seth> aatch: well, i was just wondering if there was a core function to reverse the arguments of another (two argument) function
[23:03:22] <seth> aatch: in haskell that's "flip" (i see there's another function called flip in rust, but it's not the same)
[23:04:49] *** Quits: thou (thou@moz-1C1CA9F7.fasttrackcomm.net) (Input/output error)
[23:05:35] *** Joins: int3_ (int3_@moz-AA317CC3.pools.spcsdns.net)
[23:05:37] *** Quits: sully (sully@moz-45967CBE.emarhavil.com) (Client exited)
[23:06:21] <strcat> seth: probably isn't a utility
[23:06:26] <strcat> just have to do |x, y| f(y, x)
[23:06:38] *** Quits: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[23:06:51] *** Joins: bEcker (Thunderbir@moz-3F74B132.resnet.ucsc.edu)
[23:07:19] <tjc> in Haskell, flip usually goes along with point-free style and automatically-curried functions
[23:07:26] <cantsin> seth: use a macro?
[23:07:28] <tjc> since we have neither in Rust, it's less useful, though not totally useless
[23:07:42] <seth> what i really wanted was map with the arguments reversed
[23:07:43] *** Quits: thelivingded (thelivingd@moz-9453CC48.austin.res.rr.com) (Ping timeout)
[23:07:51] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[23:07:53] *** Parts: bEcker (Thunderbir@moz-3F74B132.resnet.ucsc.edu) ()
[23:07:58] <strcat> rusti: 1
[23:07:59] <rusti> 1
[23:08:04] <strcat> rusti: fn foo() { loop {} }; foo()
[23:08:10] <rusti> timed out after 5 seconds
[23:08:12] <strcat> rusti: 5
[23:08:12] <rusti> 5
[23:08:14] <strcat> yay
[23:08:31] <strcat> and now it won't have to kill itself on huge outputs
[23:08:52] <strcat> rusti: loop { println("foo") }
[23:08:53] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/jTig
[23:09:06] <strcat> rusti: fn foo() { loop { println("foo") } }; foo()
[23:09:07] <rusti> more than 10000 lines of output, bailing out
[23:09:11] <strcat> rusti: fn foo() { loop { print("foo") } }; foo()
[23:09:15] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[23:09:17] <rusti> timed out after 5 seconds
[23:09:43] <cantsin> erm, that pastebin just has "<subprocess.Popen object at 0x7f3b80d0d0d0>"
[23:09:53] <strcat> cantsin: heh
[23:10:04] <engla> tjc: was a function composition operator considered?
[23:10:10] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[23:10:13] *** Joins: maxli1 (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[23:10:19] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Connection reset by peer)
[23:10:24] *** Quits: int3_ (int3_@moz-AA317CC3.pools.spcsdns.net) (Client exited)
[23:10:40] *** Quits: maxli1 (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Quit: Leaving.)
[23:10:42] <tjc> engla: not as far as I know. it kind of relates to the question of composing iterators, though
[23:10:45] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[23:11:02] <tjc> a lot of the work Haskell does with lazy lists (and other lazy data structures) gets done with iterators in Rust
[23:11:13] <engla> good point
[23:11:15] <tjc> that is, in Haskell, lazy data structures are the glue between functions in a point-free pipe line
[23:11:15] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[23:11:16] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1484a88d8 to 14f547a67: 02http://git.io/N3iJvQ
[23:11:16] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[23:11:18] <tjc> in Rust, iterators are the glue
[23:11:51] <tjc> (not that we have point-free style anyway but if we did, it would basically be about composing iterators, unless we changed the language in more radical ways)
[23:12:37] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[23:12:44] <strcat> rusti: fn foo() { loop { print("foo") } }; foo()
[23:13:02] <strcat> rusti: 5
[23:13:07] * strcat sighs
[23:13:14] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[23:14:18] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[23:14:18] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/IL9xTQ
[23:14:18] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[23:14:22] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[23:14:22] <ghrust> 01[13rust01] 15bors pushed 27 new commits to 06auto: 02http://git.io/j4DrsQ
[23:14:22] <ghrust> 13rust/06auto 14d20956a 15Brian Anderson: core::rt: Remove Close trait...
[23:14:22] <ghrust> 13rust/06auto 14e010ec5 15Brian Anderson: core::rt: Fix a warning about unnecessary mutable variable
[23:14:22] <ghrust> 13rust/06auto 149c84294 15Brian Anderson: core::rt: Begin implementing TcpStream...
[23:14:24] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[23:14:28] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[23:14:39] <strcat> rusti: 5
[23:14:40] <rusti> 5
[23:14:43] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[23:14:45] <strcat> rusti: aaa
[23:14:46] <rusti> more than 5 lines of output, pastebinned: http://sprunge.us/LKGK
[23:14:58] <strcat> rusti: fn foo() { loop { } }; foo()
[23:15:03] <rusti> timed out after 5 seconds
[23:15:04] <strcat> rusti: fn foo() { loop { } }; foo()
[23:15:18] <strcat> ;\
[23:15:25] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[23:16:10] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[23:16:15] <strcat> rusti: fn foo() { loop { } }; foo()
[23:16:21] <rusti> timed out after 5 seconds
[23:16:23] <strcat> rusti: fn foo() { loop { } }; foo()
[23:16:28] <rusti> timed out after 5 seconds
[23:16:30] <strcat> rusti: fn foo() { loop { } }; foo()
[23:16:36] <rusti> timed out after 5 seconds
[23:16:40] <strcat> ah that's it
[23:16:44] <strcat> SIGTERM blocks.
[23:17:30] <strcat> rusti: core::run::run_program("sh", [~"-c", ~"yes | tee /tmp/foo /dev/shm/foo /home/rust/foo > /var/spool/mail/foo"]);
[23:17:36] <rusti> tee: /home/rust/foo: Text file busy
[23:17:36] <rusti> tee: standard output: No space left on device
[23:17:36] <rusti> tee: /tmp/foo: No space left on device
[23:17:36] <rusti> tee: /dev/shm/foo: No space left on device
[23:17:36] <rusti> timed out after 5 seconds
[23:18:17] <strcat> rusti: println("foo"); core::run::run_program("cat", [])
[23:18:22] <rusti> foo
[23:18:22] <rusti> timed out after 5 seconds
[23:18:25] <strcat> \o/
[23:20:21] *** Joins: SiegeLord (sl@moz-56D7E78.bstnma.fios.verizon.net)
[23:22:29] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[23:22:47] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[23:23:14] <mdu> pcwalton: I'm new to rust and I'm working on bug #6342 as my first bug. I had a couple of questions about some code you wrote
[23:23:35] <pcwalton> mdu: sure
[23:24:58] <mdu> on parser.rs:4260
[23:25:15] <mdu> if visibility != inherited you bubble up an error AIUI
[23:25:29] <pcwalton> send me link on github to the line, I've edited that file so I don't know exactly what line you're referring to :)
[23:25:49] <mdu> there you go : https://github.com/mozilla/rust/blob/master/src/libsyntax/parse/parser.rs#L4260
[23:26:38] <mdu> i was wondering what could happend if you went to the return statement "return iovi_none;" without bubbling up an error
[23:26:47] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[23:26:59] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[23:27:02] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Client exited)
[23:28:08] <pcwalton> I think you could probably write "pub" before any expression
[23:28:12] <pcwalton> pub x = 3;
[23:28:14] <pcwalton> or whatever
[23:28:51] <mdu> ok, that's the point
[23:29:18] <mdu> look at the code in https://github.com/mozilla/rust/issues/6342
[23:30:06] <mdu> it obviously doesn't parse "pub" or anything, and I think that might be what triggers an ICE
[23:30:23] <pcwalton> no, the problem here is just that it shouldn't assert on that line
[23:30:33] <pcwalton> https://github.com/mozilla/rust/blob/master/src/libsyntax/parse/parser.rs#L3732
[23:30:47] <pcwalton> just change assert! to expect() or something
[23:30:55] <pcwalton> grep around the file for other uses of expect()
[23:31:25] <mdu> hmmm okay I'll have a look at expect(). i've already seen it a couple of times
[23:31:38] *** Joins: int3_ (int3_@moz-AA317CC3.pools.spcsdns.net)
[23:31:53] <aatch> it's pretty much just self.expect("token")
[23:32:04] <benh> When @-pointers are backed by a GC, will it be possible to take the address of arbitrary subobjects of an @-pointee as an @-pointer that keeps the enclosing object alive?
[23:32:27] <pcwalton> benh: no, unfortunately, but I really really wish you could!
[23:32:33] <mdu> but it is safe anyway to return iovi_none on line 4267 ?
[23:32:36] <pcwalton> it would be nice to have some solution
[23:32:37] <pcwalton> mdu: no
[23:32:39] <pcwalton> it is not
[23:32:42] <pcwalton> you could write pub x = 3;
[23:32:44] <pcwalton> I thin k
[23:32:52] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Textual IRC Client: www.textualapp.com)
[23:33:04] <aatch> it might still throw an error, but not at the correct place.
[23:33:40] <mdu> ok sure but in this case can we expect("pub or priv") or something along those lines ? just before the return statement
[23:34:49] <mdu> i'm not sure about that but i'm quite convinced that saying "expecting }" as an error message for the code in https://github.com/mozilla/rust/issues/6342 feels wrong
[23:35:23] <aatch> mdu, the grammar states that it is expecting an item
[23:35:32] <aatch> or the end of the block
[23:35:58] <aatch> and saying "expected `}` is fine in this case."
[23:36:33] <aatch> Since it would actually say "Unexpected token `what` expected `}`" and give a line number
[23:37:50] <mdu> hmmmm
[23:37:58] <mdu> okay
[23:38:08] <mdu> so the fix is to replace the assert with a expect() ?
[23:38:17] <aatch> mdu, more or less
[23:38:24] <aatch> try it and see
[23:39:43] <Diablo-D3> [16:17] <joepie91> " I wrote a tool called SQLrillex. When you run it, it drops all databases."
[23:39:54] <aatch> lol
[23:40:37] *** Joins: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net)
[23:41:45] *** Joins: bbrittain (ben@moz-632384CB.dr02.roch.ny.frontiernet.net)
[23:45:24] *** Quits: int3_ (int3_@moz-AA317CC3.pools.spcsdns.net) (Client exited)
[23:45:46] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[23:46:56] <pcwalton> tjc: updated https://github.com/mozilla/rust/pull/6375
[23:51:11] <graydon> bors grew new capabilities
[23:51:27] <aatch> "Whats this? Bors is evolving!"
[23:51:33] *** Quits: FrozenCow (FrozenCow@moz-9DF5D010.dynamic.upc.nl) (Quit: Leaving)
[23:51:37] <graydon> feedback welcome
[23:51:37] <SiegeLord> So what's the replacement for that? #[link_args] and extern "foo" {} ?
[23:51:43] <graydon> I had to scrunch a lot of stuff up to fit it on the page
[23:51:47] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[23:51:50] <graydon> and my graphic design skills are ... appalling
[23:52:45] <tjc> graydon: maybe "Needs rebase" would be a little less judgmental than "bitrotted"?
[23:53:12] <graydon> "stale"?
[23:53:29] <tjc> sure
[23:53:44] <tjc> also, the "unreviewed" ones sort of disappear into the wallpaper given that the "discussing" ones have lots of text in the comments field
[23:53:57] <tjc> maybe there's a way to make the rows all the same height or something, IDK
[23:54:19] <brson> nice work graydon. thanks
[23:55:12] <graydon> tjc: switched to STALE
[23:55:16] <graydon> look ok?
[23:55:43] <tjc> graydon: looks ok wrt that, my second comment still stands, but that's harder to fix
[23:56:07] <tjc> graydon: or maybe the unreviewed ones could just come before the discussing ones?
[23:56:19] <tjc> usually if I visit the page I'm either checking the status of my own pull requests, or looking for unreviewed ones to review
[23:58:31] <aatch> I have an idea for the UNREVIEWED being bigger.
[23:58:32] *** Joins: steven_is_false (quassel@moz-144077DE.bchsia.telus.net)
[23:58:52] <graydon> I'm happy to just move them to the top
[23:59:03] <graydon> or um, above DISCUSSING
[23:59:13] <aatch> Basically, wrap the status text in a `<p>` and give it `min-height`
[23:59:16] <graydon> since DISCUSSING and UNREVIEWED are logically equivalent to bors' brain
[23:59:48] <graydon> it was actually kinda intentional that we squish things up that are small. so the page is a bit denser.
[23:59:53] <graydon> maybe that's a mistake? hm
