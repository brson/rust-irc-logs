[00:01:21] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[00:03:37] *** Joins: andrew-__ (andrew-d_w@26B64496.9DFA657C.CC0301A2.IP)
[00:04:08] *** Quits: andrew-d_w (andrew-d_w@3D890366.5FA265D1.30850A2D.IP) (Ping timeout)
[00:04:29] <andrew-__> join #rust
[00:04:32] *** Quits: andrew-__ (andrew-d_w@26B64496.9DFA657C.CC0301A2.IP) (Input/output error)
[00:07:12] *** Quits: lkuper_ (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper_)
[00:08:24] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[00:12:07] *** Joins: jdm (jdm@A931292E.20A5B7E6.930FA32.IP)
[00:12:16] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[00:14:22] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[00:26:59] <brson> acrichto: does your __morestack patch valgrind successfully?
[00:27:15] <acrichto> brson: hm, I have not checked
[00:27:21] * acrichto spins up a vm
[00:27:35] <acrichto> I don't trust osx valgrinding at all
[00:27:39] <brson> let's make sure the test suite valgrinds before putting in this crazy hack
[00:27:56] <acrichto> is this not something we'd want to keep?
[00:28:05] <brson> i mean the .globl thing
[00:28:10] <acrichto> it scares me :(
[00:28:20] <strcat> acrichto: in the long term we don't want __morestack simply for stack safety
[00:28:27] <brson> although this really is only going to matter on paths where we call abort, so those aren't even going to valgrind right
[00:28:51] <brson> but still, the crash is happening even when not executing __morestack. it would give me peace of mind to know valgrind still works
[00:29:21] *** Joins: lkuper_ (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[00:29:31] <acrichto> it's an insane error
[00:29:45] <acrichto> valgrind says that it's doing an jump on uninitialized bytes in free(), and then later everything dies
[00:29:53] <acrichto> and the stack trace at the time is some uv fs request
[00:30:31] <acrichto> brson: https://gist.github.com/alexcrichton/7033025 is enough to trigger the segfault
[00:31:04] <acrichto> whre the only real difference that I can see is that morestack no longer touches librustrt, it only touches libstd
[00:56:21] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[00:56:21] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/qZZwrw
[00:56:21] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[00:57:32] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Connection reset by peer)
[00:57:48] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[00:58:11] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[00:58:53] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[01:01:22] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[01:01:22] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/AHvvLg
[01:01:22] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[01:01:26] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[01:01:26] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/4m0UPw
[01:01:26] <ghrust> 13rust/06auto 14cf844ab 15Alex Crichton: rustdoc: Don't treat "super" specially for urls...
[01:01:26] <ghrust> 13rust/06auto 1451709fc 15bors: auto merge of #9916 : alexcrichton/rust/issue-9861, r=brson...
[01:01:27] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[01:11:11] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[01:12:45] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[01:13:40] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[01:14:39] *** Joins: brson (brson@6A848D32.C1B840DD.76F66111.IP)
[01:14:39] *** ChanServ sets mode: +qo brson brson
[01:22:29] <acrichto> brson: I appear to have gotten myself in a conundrum wherein fail!() prints using the task's logger which is also controlled by uvio. Turns out this causes problems b/c a lot of uvio calls task::unkillable which doesn't play nice if the task was already killed (or something related that I haven't quite grasped just yet)
[01:22:49] <acrichto> is the idea for task failure to send the message somewhere else, and not log it at all?
[01:22:59] <acrichto> b/c in that case then I'll just plaster over this with a rterrln using native I/O
[01:23:36] <strcat> task failure should eventually just hand the parent task some data (if they want to handle it) and only print an error if it's killing the top-level task
[01:23:47] <strcat> printing at the failure site is really silly
[01:23:59] <acrichto> that's what I would imagine, I don't want to make things worse though
[01:24:26] <strcat> removing the logging you mean? as long as it logs at the top-level it's fine
[01:24:44] <acrichto> removing logging to the task's logger, and instead using rterrln! to print to the console forcibly via native I/O
[01:24:45] <strcat> it shouldn't log anything if the parent explicitly handles it
[01:24:49] *** Quits: brson (brson@6A848D32.C1B840DD.76F66111.IP) (Ping timeout)
[01:25:43] <strcat> acrichto: it shouldn't print anything
[01:25:55] <strcat> anyway I'm not sure how hard it would be to fix failure
[01:26:36] <strcat> if we say failure can be handled, it needs to be silent unless you don't handle it or you can't use it for a real application
[01:26:59] *** Joins: brson (brson@6A848D32.C1B840DD.76F66111.IP)
[01:26:59] *** ChanServ sets mode: +qo brson brson
[01:27:15] <strcat> can it just bubble up an ~str, and if it gets to the top-level where it's going to terminate, print it?
[01:27:17] <strcat> otherwise don't
[01:27:36] <acrichto> I think that's the plan, only with an ~Any-style object instead
[01:27:56] <strcat> needs to be something printable for the top-level to handle it I guess
[01:28:27] <acrichto> it would be really nice for the task's logger to receive the message though
[01:28:36] <acrichto> it's kinda what you would expect
[01:28:48] <strcat> is it? I'd expect the parent's logger to receive it
[01:29:03] <acrichto> hmm good point
[01:29:13] <acrichto> and they can still do I/O
[01:29:21] <Eridius> boy, doing threading in Obj-C, I really wish I had the equivalent of a channel or an MVar :/
[01:29:21] <strcat> yeah
[01:29:49] <acrichto> hm, well I'm gonna rterrln and see if the tests pass, I haven't gotten stdtest to pass in ages
[01:30:16] <acrichto> 118 files changed, 2658 insertions(+), 2959 deletions(-) I need to make smaller changes
[01:32:24] <brson> acrichto: I'm not sure what the idea is. I guess I think the failure should always get logged, even when it's sent to another task, but I can imagine maybe it only gets logged if no other task is registered to recieve the result
[01:32:39] <brson> acrichto: as to this problem you're hitting, can't the logging be done before failure starts?
[01:33:19] <acrichto> it's a test that does "do rekillable {}" immediately which fails but muddles with the kill flag so when I/O calls "do unkillable {}" everything gets sad
[01:34:29] <acrichto> brson: I also just recently discovered #8674, and I still don't quite grasp the issue but I think that all the uvio bindings I've been writing are wrong
[01:35:10] <acrichto> is the problem that basically any scheduling operation could start unwinding?
[01:35:25] <acrichto> due to linked failure specifically
[01:36:00] <brson> acrichto: only when tasks are killable. I believe the home_for_IO method makes all I/O unkillable though to avoid this problem
[01:36:30] <acrichto> it doesn't look like home_for_io makes the i/o itself unkillable though
[01:36:40] <acrichto> or I just don't know what's going on
[01:36:49] <acrichto> but it looks like there are unkillable blocks around moving schedulers
[01:36:53] <acrichto> but not around the i/o itself
[01:37:46] <brson> acrichto: lol, you're right. the code is wrong
[01:37:51] <acrichto> :(
[01:38:14] <acrichto> brson: so one big thing is that we can't unwind in a uv-callback, right? 
[01:38:22] <acrichto> being on some weird stack in the middle of nowhere
[01:38:34] <strcat> definitely can't unwind through foreign libraries
[01:38:50] <strcat> they aren't going to clean up resources properly, or maintain invariants
[01:39:05] <strcat> if it was epoll/kqueue-based you wouldn't have callbacks ;p
[01:39:08] *** Quits: geoffhill (geoffhill@moz-79C8D45C.amazon.com) (Ping timeout)
[01:39:09] <brson> acrichto: I think those two unkillable blocks need to be replaced with one giant unkillable around all of home_for_io
[01:39:45] <acrichto> brson: ok I'll look into doing so, what's another few hundred lines on 3k existing ones :P
[01:39:56] <strcat> windows screws everything up by having a completely different way of doing events
[01:40:11] <brson> acrichto: that's right, but all the uv callbacks are in scheduler context and unwinding in scheduler context is probably going to blow up for multiple reasons
[01:40:41] <brson> acrichto: once the callbacks context-switch back to a task then the task can unwind fine
[01:41:05] <acrichto> so these are all tagged with fixme because the unkillable regions are larger than they should be?
[01:41:50] <brson> acrichto: i think no, more like because unkillable shouldn't be necessary. we *should* be able to interrupt i/o to kill a task, but the way to do that is probably case-specific
[01:42:21] <strcat> acrichto: https://github.com/mozilla/rust/blob/master/src/libstd/hash.rs#L323 the glue that holds all of rustc together
[01:42:27] <strcat> (not really)
[01:42:32] <acrichto> oh hm interesting, when a task unwinds is it guaranteed to unwind on the scheduler it was originally blocked on
[01:43:02] <brson> acrichto: no
[01:43:03] <acrichto> strcat: wait what? I must be missing something...
[01:43:12] <strcat> acrichto: that's what I thought ;]
[01:44:10] <acrichto> brson: oh hm, so basically when the I/O callback gets invoked it should realize that the task has unwound, none of its captured arguments are usable, and bail immediately?
[01:44:54] <brson> acrichto: something like that, yeah
[01:46:09] <acrichto> brson: ok this makes sense, I'll try to digest this tonight and see if I can figure out what needs to get done
[01:48:12] <brson> acrichto: i suggest not worrying about killable I/O yet. I want to rip out linked failure and redesign from scratch still
[01:48:43] <acrichto> oh hm ok
[01:49:49] <acrichto> I'll just conveniently forget to put unkillable blocks around my uv bindings then
[02:06:22] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[02:06:22] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/4m0UPw
[02:06:22] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[02:07:10] <strcat> brson: can you also see if we can just update our copyright headers to the current year?
[02:07:26] <strcat> instead of trying (and failing) to be accurate about ranges of dates
[02:08:17] <kmc> write a script to pull the range of years changed out of git :)
[02:08:31] <strcat> that's not really meaningful though
[02:08:37] *** Joins: reedlepee (Mibbit@BD7C15CC.C619D10B.9D59D0D8.IP)
[02:09:12] * strcat will just touch every file so they can be the same ;p
[02:11:21] <brson> strcat: sure, i can ask
[02:11:23] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[02:11:23] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/LHBKbg
[02:11:23] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[02:11:25] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[02:11:25] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/-lNONA
[02:11:25] <ghrust> 13rust/06auto 1434d376f 15Brian Anderson: std: Move size/align functions to std::mem. #2240
[02:11:25] <ghrust> 13rust/06auto 14d8d1b8f 15bors: auto merge of #9896 : brson/rust/stdmem, r=alexcrichton...
[02:11:25] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[02:14:34] <brson> reedlepee: what's your background? what type of code do you like to write?
[02:16:00] <reedlepee> brson:I have experience with C but don't have any experience with rust 
[02:16:29] <reedlepee> brson:I would like to contribute to mozilla through OPW
[02:17:31] <reedlepee> brson:for that i have to solve a bug as a small contribution
[02:17:44] <brson> reedlepee: what do you like doing?
[02:17:52] <brson> what sort of code do you write?
[02:18:05] <jdm> reedlepee: hmm, rust seems like an odd way to start for OPW
[02:19:01] <brson> jdm: what do you mean? rust is awesome
[02:19:03] <jdm> we're not really set up to support an OPW contributor; for other mozilla areas, there are usually suggestions for the kinds of tasks to take on
[02:19:17] <brson> jdm: we're doing opw this year!
[02:19:34] <jdm> brson: the rust team in particular?
[02:19:37] <brson> it's not announced yet, reedlepee just has the inside scoop
[02:19:38] <brson> yep
[02:19:43] <jdm> oh, very cool
[02:19:45] <jdm> carry on then :)
[02:21:01] * jdm shakes his fist at lists of immutable @items in the ast
[02:22:39] *** Joins: kimundi_ (kimundi@moz-729E00E8.dip0.t-ipconnect.de)
[02:23:18] <jdm> I forgot about how immutable the AST is when I started writing this tool to rename arbitrary items
[02:23:21] <strcat> meh. I think my laptop's screen is cracked ;s
[02:23:22] *** Quits: kimundi (kimundi@moz-55AF642C.dip0.t-ipconnect.de) (Ping timeout)
[02:23:22] *** kimundi_ is now known as kimundi
[02:23:26] <brson> jdm: https://wiki.mozilla.org/GNOME_Outreach_December2013 fyi
[02:24:29] <jdm> wow, this is super complete
[02:24:30] <reedlepee> brson:what do you mean by what sort of code?
[02:24:44] <jdm> I'm surprised I haven't heard about any of this
[02:24:53] <kmc> ==, I only heard yesterday
[02:25:00] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[02:25:52] <brson> reedlepee: just wondering what sort of domains you've worked in and what you enjoy. for example, in rust there's a clear division between compiler hacking and library hacking, and some prefer one over the other. i'm just trying to get a sense for what you would be more into
[02:26:03] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[02:26:36] <brson> reedlepee: the bug you are looking at with cmr is a decent one to start, but it does dig into compiler internals, which can be a bit intimidating. i gave you some starting points on it in #rust, but i'm also digging through other issues for interesting stuff
[02:28:19] <reedlepee> brson: I would be more interested in library hacking 
[02:28:49] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[02:28:58] <brson> reedlepee: ok. that's usually an easier way to get started
[02:29:40] <reedlepee> As i am completely new. Could you please help me in selecting a bug to start with
[02:30:05] <brson> reedlepee: yes
[02:31:25] <reedlepee> brson: Thanks :)
[02:31:34] *** kimundi is now known as zz_kimundi
[02:33:00] <reedlepee> brson: I am completely new to rust but i have programming experience with C
[02:35:03] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[02:36:37] * jdm just got an email from someone interested in the Rust OPW as well
[02:36:51] <jdm> how thrilling
[02:36:58] <kmc> awesome :)
[02:37:41] <brson> anybody have opinions about the fate of std::kinds? https://github.com/mozilla/rust/issues/7881
[02:38:18] <brson> in lieu of a decision to start adding code directly to std::prelude my inclination is to rename kinds to builtins, though 'builtins' isn't all that descriptive of what these traits are either
[02:38:19] *** zz_kimundi is now known as kimundi
[02:38:30] <brson> there are other traits that are 'built-in'
[02:38:44] <brson> these are even more special
[02:39:03] <acrichto> kind seems like a pretty good word for it
[02:39:03] <brson> reedlepee: still looking. the one i linked above is an easy candidate if we can decide a course of action on it
[02:39:09] <acrichto> or possibly bounds...
[02:39:32] <brson> maybe we just leave as-is then
[02:39:44] <reedlepee> jdm: Hi i sent you the mail :) I came across the bug opened by you but I couldn't see you on irc so i mailed you :)
[02:39:54] <acrichto> I imagine that when "kind" was a thing in rust it probably needed to get renamed, but perhaps it's been long enough :P
[02:40:00] <jdm> oh, I see :)
[02:40:55] <acrichto> brson: how about purging ctypes from rust fns in std::os ?
[02:41:38] <brson> acrichto: that's one we were talking about, but it immediately got bogged down in design questions!
[02:41:49] <brson> like how to represent flags in rust
[02:41:56] <acrichto> oh good point
[02:42:06] <brson> this one's easy https://github.com/mozilla/rust/issues/8180
[02:42:51] <brson> though maybe not an actual problem ...
[02:43:18] <brson> oneshot ports can only be *constructed* for Send, but none of methods on oneshot require Send
[02:43:28] <brson> the Send bound should probably be one everything though
[02:44:16] <brson> native mutex bindings aren't particularly hard, a bit fiddly though https://github.com/mozilla/rust/issues/9105
[02:45:17] <brson> removing uses of Either ...
[02:45:18] <reedlepee> brson:There are some bugs suggested on https://wiki.mozilla.org/GNOME_Outreach_December2013#Outreach_Program_For_Women_2013 also ..:)
[02:45:22] <brson> https://github.com/mozilla/rust/issues/9157
[02:46:21] <brson> ebml to atom trees - https://github.com/mozilla/rust/issues/9303
[02:46:24] <brson> sorry this is probably getting overwhelming
[02:47:03] <brson> reedlepee: this is probably a pretty good one, making struct fields private https://github.com/mozilla/rust/issues/4386
[02:47:11] <brson> reedlepee: it will let you see a lot of the libraries
[02:47:43] <brson> reedlepee: basically, grep for all the structs in std and extra, try to determine whether it's public fields should really be exposed or not, and if not, write `priv` in front of them
[02:48:00] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[02:48:45] <brson> reedlepee: i'm guessing that most types should be opaque and not allowing callers to muck with the fields. i don't know how common this problem is though. needs somebody to go do some evaluation
[02:51:02] <brson> reedlepee: similarly https://github.com/mozilla/rust/issues/3965 is a good one for newcomers since it let's you dig through the test suite
[02:51:06] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[02:51:23] <brson> it's just about identifying tests that are disabled and figuring out how to reenable them
[02:51:44] <brson> pretty open-ended - if you can just find one or two to fix that's a worthy pull request
[02:52:42] <brson> reedlepee: similarly, there are a bunch of disabled benchmarks in src/test/bench that need to be fixed
[02:52:58] <strcat> likely rewritten
[02:53:19] <brson> the ones that say 'reading from os::args()[1] are pretty trivial to fix - they're just using os::args incorrectly
[02:54:49] <brson> for those, just copy the argument handling from benchmarks that do work
[02:55:22] <brson> reedlepee: I'll let you mull those over. Here's my list of good stuff to think about https://gist.github.com/brson/7035805
[03:09:18] <acrichto> <3 warnings in stage0 again
[03:16:19] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[03:16:19] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/-lNONA
[03:16:19] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[03:17:18] <dbaupp> acrichto: i'm not particularly attached to fileinput... is it getting too annoying to keep hanging around?
[03:18:39] <dbaupp> rusti: ("foo"[0], "Ã¶"[1]) // jdm
[03:18:42] -rusti- pastebinned 7 lines of output: http://ix.io/8yO
[03:19:00] <acrichto> dbaupp: migrating to std::rt::io was going to be pretty painful
[03:19:20] <dbaupp> acrichto: "was"?
[03:19:29] <acrichto> dbaupp: I ended up removing it as part of https://github.com/mozilla/rust/pull/9901
[03:19:44] <acrichto> I started to migrate it and didn't make it very far about halfway through :(
[03:20:25] <dbaupp> probably worth mentioning the deletions in the PR description
[03:20:52] <acrichto> oh I should update that
[03:20:55] <dbaupp> (but, yeah, that's fine, I'll copy it out into another repo with a goal to port it at some point.)
[03:21:55] <acrichto> sorry :(
[03:21:59] <dbaupp> np
[03:22:16] <dbaupp> I don't think it's very good code anyway
[03:22:49] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[03:23:28] <dbaupp> acrichto: you can put a "closes https://github.com/mozilla/rust/issues/9895 " message too
[03:23:47] <acrichto> I need to wade through a number of issues once that goes through
[03:23:57] <acrichto> does github close based on pull reuqest comments as well?
[03:24:01] <acrichto> or just commit comments?
[03:24:49] <dbaupp> don't know
[03:24:50] <benh> the top PR message works iirc
[03:24:53] <dbaupp> but if you put it in the PR text
[03:24:58] <dbaupp> ... it works
[03:25:09] <dbaupp> (I don't know if this is because of bors' merge commit or not though)
[03:25:13] <acrichto> oh that's right!
[03:25:21] * acrichto sneakily edits in some issues
[03:25:40] <reedlepee> brson: I could see priv infront  of fields of structs in /src/libstd/str.rs.. But how do I know whether should be a filed private or not ??
[03:25:51] <reedlepee> field*
[03:26:13] <dbaupp> reedlepee: if they already have 'priv' they should still be private
[03:27:02] <dbaupp> if they don't have 'priv' and there is no comment nearby that says it should be public then you can try making them private
[03:28:12] <reedlepee> dbaupp: https://github.com/mozilla/rust/issues/4386 I am trying to solve this bug ..
[03:28:45] <reedlepee> So i should try making such fields as private and check if there is some error ??
[03:28:51] <dbaupp> yes
[03:29:17] <dbaupp> try making the public fields private and then run `make`. if there is no error then they can be private.
[03:30:46] <reedlepee> dbaupp: ohk :)
[03:31:27] <brson> reedlepee: it does require some consideration of the purpose of the types and whether they should be abstract or not, but generally I think dbaupp is right - if nobody is using those fields then they probably shouldn't be public
[03:31:48] <dbaupp> reedlepee: you should also run `make check` (very very slow) or just `make check-stage2-rpass` occasionally to check that none of the tests are using them
[03:33:05] *** Quits: brson (brson@6A848D32.C1B840DD.76F66111.IP) (Quit: leaving)
[03:33:06] <dbaupp> (and it's a backwards compatible change to make a private field public anyway.)
[03:34:13] <jack> How do you make small changes to rust libs without recompiling everything? Is that possible?
[03:34:16] <dbaupp> rusti: "Ã¶dd".starts_with("-") // jack
[03:34:17] -rusti- false
[03:34:19] <dbaupp> oh
[03:34:38] <jack> dbaupp: it's just broken. starts_with should be using slice_chars i think.
[03:34:38] <dbaupp> jack: does that fail!() for you?
[03:34:42] <jack> not slice_to
[03:34:48] <dbaupp> why?
[03:34:55] <dbaupp> oh
[03:35:12] <dbaupp> yeah, it shouldn't be using slice_to
[03:35:56] <dbaupp> hm... the implementation I see doesn't use slice_to?
[03:37:02] <dbaupp> jack: i see starts_with checking some lengths and then calling match_at, which does a byte-wise comparison
[03:37:44] <jack> i am using rust from a few hours ago. what rust are you on?
[03:38:11] <jack> i'm on 3fd0e3a
[03:38:24] * jack wonders if the rebase went wrong.
[03:38:29] <reedlepee> dbaupp:what do you mean by this "(and it's a backwards compatible change to make a private field public anyway.)"
[03:38:39] <dbaupp> jack: 386fa1d
[03:38:41] <jack> no, that rust looks right.
[03:38:47] <dbaupp> jack: ~12 hours ago
[03:39:08] <jack> kevin ballard introduced this in between those revisions :)
[03:39:23] <dbaupp> oh! Eridius >:(
[03:39:57] <dbaupp> reedlepee: if we do decide that we need a field to be public, it doesn't change the API of the standard libraries (it only adds to them), so it will not break existing code
[03:40:12] <jack> https://github.com/mozilla/rust/commit/d4a32386f3b61a4997de54ed00c0a80fd07ecc75#diff-ef43d0c5b6411f26f55af5708958a682R2011
[03:40:34] <jack> Eridius: ping?
[03:41:28] <dbaupp> :/
[03:41:41] * dbaupp would've hoped the tests caught that
[03:42:06] <jack> they will shortly :)
[03:42:17] <dbaupp> you're fixing it?
[03:42:23] <jack> allthe starts_with tests are ascii only
[03:42:41] <dbaupp> just putting an .as_bytes() on needle and self should work
[03:42:44] <jack> i bet throwing in utf8 in all these tests would find bugs :)
[03:43:08] <dbaupp> quite a few of them do, unless someone removed it.
[03:43:37] <dbaupp> at least, there's a string with a pile of thai(?) in it that gets used in a few places.
[03:44:42] <reedlepee> dbaupp:how much time does 'make'  take ?
[03:45:22] <dbaupp> reedlepee: ~20 minutes, but it takes much longer the first time because you have to build LLVM
[03:45:38] <dbaupp> reedlepee: in this case, I think `make rustc-stage1` would be enough.
[03:51:48] <reedlepee> yeah actually i changed some field to private it gave some errors then i again changed that to public then ran make .. its still running and giving some warnings !!
[03:53:38] <reedlepee> dbaupp:can i stop it in the middle by hitting ctlr-Z
[03:54:32] <dbaupp> reedlepee: ctrl-C should be fine
[03:56:21] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[03:56:21] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/AHSCpw
[03:56:21] <ghrust> 13rust/06auto 1458b336d 15sp3d: track language changes, improve attr handling in GtkSourceView language-spec...
[03:56:21] <ghrust> 13rust/06auto 14737413d 15bors: auto merge of #9921 : sp3d/rust/master, r=alexcrichton...
[03:56:22] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[03:56:25] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[03:56:25] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/uEYcHQ
[03:56:25] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[03:58:29] *** Quits: reedlepee (Mibbit@BD7C15CC.C619D10B.9D59D0D8.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[04:04:46] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[04:20:34] *** Quits: aatch (James@moz-B437F499.pocketrent.com) (Quit: Leaving)
[04:23:09] <dbaupp> jack: in answer to your "How do you make small changes to rust libs without recompiling everything? Is that possible?", you can run `make check-stage2-std NO_REBUILD=1` if you're just wanting to run the tests/check it compiles
[04:23:36] <strcat> check-stage1-std
[04:24:01] <jack> why stage1? 
[04:24:12] <strcat> saves you building a stage
[04:24:21] <jack> i basically just want to rebuild enough to compile code using the new str module
[04:25:46] <dbaupp> oh
[04:26:50] <dbaupp> If you're not changing the public API I guess building std with your (recently built) stage2 compiler and copying it whereever it's supposed to go might not explode
[04:27:01] <dbaupp> *might*.
[04:41:34] *** Quits: jdm (jdm@A931292E.20A5B7E6.930FA32.IP) (Ping timeout)
[04:45:09] *** Quits: dbaupp (Thunderbir@moz-54ADD9F4.lns20.syd6.internode.on.net) (Ping timeout)
[04:45:21] <Eridius> jack: pong
[04:46:12] * Eridius reads backscroll. "I see"
[04:46:25] <Eridius> I take it str.starts_with/ends_with didn't have good (or any?) tests :/
[04:47:10] *** Joins: dbaupp (Thunderbir@moz-54ADD9F4.lns20.syd6.internode.on.net)
[04:47:30] <Eridius> jack: shall I assume you're fixing it? I think dbaupp is right, throwing .as_bytes() is the simplest solution
[04:56:44] <jack> Eridius: yeah, working on a patch now.
[04:56:56] <jack> i went for char_len() and slice_chars()
[04:57:50] <jack> it occurs to me that might be really slow.
[04:57:55] <dbaupp> that'll be unnecessarily slow
[04:57:56] <dbaupp> yeah
[04:58:15] <dbaupp> using bytewise comparison will get us SSE etc.
[04:58:29] <dbaupp> (and char_len() is O(n))
[05:01:23] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[05:01:23] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/AHSCpw
[05:01:23] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[05:06:25] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[05:06:25] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/PoYHYA
[05:06:25] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[05:06:29] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[05:06:30] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/WPLsCw
[05:06:30] <ghrust> 13rust/06auto 1482f5f65 15Alex Crichton: Move sys::refcount to managed::refcount...
[05:06:30] <ghrust> 13rust/06auto 140e4d1fc 15bors: auto merge of #9922 : alexcrichton/rust/less-sys, r=thestinger...
[05:06:30] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[05:10:00] <Eridius> hrm, I wonder if ~str should implement FromIter<~str> (and &str and @str)
[05:10:29] <Eridius> I kind of also want to have it implement FromIter<u8> but of course it would have to fail if the iterator doesn't yield a valid utf-8 sequence
[05:10:53] <strcat> acrichto: how do you bootstrap feature gate things?
[05:11:12] <dbaupp> strcat: what are you adding?
[05:11:20] <strcat> managed_boxes
[05:11:24] <dbaupp> ah
[05:11:26] <dbaupp> need a snap
[05:11:40] <strcat> yeah but what do you set to bootstrap it? just Accepted?
[05:11:56] <dbaupp> whatever makes it allowed, yeah
[05:11:57] <acrichto> strcat: no, Active
[05:12:19] <strcat> acrichto: but I can't add it to #[feature] things yet?
[05:12:21] <acrichto> Accepted == no longer needed as a feature gate
[05:12:26] <acrichto> not in libstd/libextra
[05:12:31] <acrichto> and rustc/syntax I guess tooo
[05:12:36] <strcat> so how do I bootstrap it
[05:12:40] <acrichto> same thing as the stage0 problem
[05:12:50] <acrichto> add the entry to KNOWN_FEATURES
[05:13:04] <strcat> I did, but now it's not going to allow them to be used in libstd
[05:13:26] *** Quits: Kxepal (Miranda@moz-D440E09C.pppoe.mtu-net.ru) (Ping timeout)
[05:13:30] <acrichto> promoting old language features to feature-gated things is a bit tricky
[05:13:36] <acrichto> you'll have to take a snapshot of it not doing anything
[05:13:39] * dbaupp thinks unknown features should be a warning...
[05:13:42] <acrichto> and then afterwards impement the lint
[05:13:45] <strcat> acrichto: ah right
[05:13:54] <acrichto> also I'm starting to lean towards what dbaupp is saying
[05:14:06] <acrichto> I'd rather it be a lint though
[05:14:10] <acrichto> which is deny-by-default
[05:16:55] *** Joins: Kxepal (Miranda@moz-6C231589.pppoe.mtu-net.ru)
[05:18:55] *** Quits: dbaupp (Thunderbir@moz-54ADD9F4.lns20.syd6.internode.on.net) (Ping timeout)
[05:19:03] *** Quits: km (quassel@moz-777F24DE.kevinmehall.com) (Ping timeout)
[05:19:35] *** Joins: dbaupp (Thunderbir@moz-54ADD9F4.lns20.syd6.internode.on.net)
[05:22:28] *** Quits: dbaupp (Thunderbir@moz-54ADD9F4.lns20.syd6.internode.on.net) (Ping timeout)
[05:23:38] *** Joins: km (quassel@moz-777F24DE.kevinmehall.com)
[05:26:49] <acrichto> strcat: was there a decision reached to put @ behind a feature gate?
[05:27:17] *** Joins: dbaupp (Thunderbir@moz-54ADD9F4.lns20.syd6.internode.on.net)
[05:27:32] <strcat> acrichto: no, but it seems fairly obvious since there isn't actually a GC yet and we are probably going to rm the syntax
[05:27:43] <strcat> I don't think feature gates existed when @ was talked about
[05:27:57] <acrichto> gc is a big thing for 1.0 though, and I think that we're seriously considering rebooting the work on it soon
[05:28:30] <dbaupp> the syntax though?
[05:28:59] <acrichto> not sure if a dinifinitve consensus has been reached
[05:29:01] <strcat> acrichto: it's not there yet though, @ leaks cycles and is really slow
[05:29:28] <acrichto> oh yeah definitely
[05:29:36] <strcat> it also "leaks" a lot due to holding onto refs all the way down the call stack
[05:29:43] <acrichto> I was more wondering if I could r+, but it sounds like we should have some discussion first
[05:34:13] <jack> r? https://github.com/mozilla/rust/pull/9924
[05:34:26] *** kimundi is now known as zz_kimundi
[05:37:07] <jack> dbaupp: fixed that typo.
[05:40:25] <dbaupp> jack: r+
[05:42:39] <jack> dbaupp: let's hope that all the commits between strcats fix and my fix dont' break something else :)
[05:43:04] <jack> this servo upgrade has been particularly brutal
[05:43:50] <strcat> lets hope I figure out how to finish that fix, because there are still problems ;p
[05:43:59] <strcat> although those problems always existed... if people used newtypes
[05:44:08] <jack> strcat: i'm just hoping servo doesn't hit them :)
[05:44:45] <strcat> jack: unlikely, unless you use #[unsafe_no_drop_flag], because any custom destructors add a word
[05:45:03] <dbaupp> jack: yeah, from what I've seen on #servo every upgrade attempt has hit new bugs/huge porting... :( moving targets.
[05:47:20] <Luqman> but on the bright side it means bugs get fixed :)
[05:48:34] <dbaupp> Luqman: or introduced as #9924 is rectifying
[05:55:56] *** zz_kimundi is now known as kimundi
[05:58:12] <acrichto> why are intra-function cals annotated with @plt on linux?
[05:58:17] <acrichto> intra-crate*
[06:00:48] <dbaupp> acrichto: http://stackoverflow.com/questions/5469274/what-does-plt-mean-here
[06:01:22] <acrichto> but that's across shared libraries
[06:01:25] <acrichto> inside the same one?
[06:01:34] <dbaupp> oh
[06:01:50] <dbaupp> do we really have intra-crate ...@plt's?
[06:01:53] <acrichto> I figured they'd all be rip-relative calls
[06:01:55] <dbaupp> sounds weird
[06:02:01] <acrichto> looks like they all are
[06:02:06] <strcat> tl;dr is that dynamic linking sucks and adds a bunch of indirection + a ridiculous amount of work on the first calls
[06:02:10] <acrichto> they're all triggering dynamic lookups as I step through them
[06:02:10] <strcat> look at it in gdb ;p
[06:02:30] <acrichto> but don't shared libraries internally use relative calls?
[06:02:39] <strcat> to private symbols
[06:02:42] <acrichto> across libraries the plt makes sense to me
[06:02:46] <strcat> all our symbols are basically public last time I checked
[06:02:53] <strcat> we pay double indirection overhead on every call
[06:02:55] <strcat> yay
[06:02:58] <acrichto> I thought libraries wer elocated in a chunk
[06:03:02] <acrichto> not symbols
[06:05:09] <acrichto> gdb is so much better on linux than osx
[06:05:19] <acrichto> I need to develop on a linux server...
[06:06:21] <strcat> anyway libraries suck, it's all about whole program optimization ;p
[06:09:49] *** Quits: lkuper_ (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper_)
[06:11:10] <acrichto> I'm not sure that we're using jemalloc...
[06:11:25] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[06:11:26] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/WPLsCw
[06:11:26] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[06:11:28] <acrichto> rt::global_heap::malloc_raw::hbc5969e10a864a8a4 calls __GI___libc_malloc
[06:13:15] <strcat> that would explain why vectors got slower
[06:13:56] <strcat> acrichto: can you try checking out before the libuv/jemalloc changes and seeing?
[06:14:14] <strcat> acrichto: I expect this has to do with -fno-whole-archive
[06:14:21] <strcat> or whatever it's called
[06:14:33] <strcat> I think jemalloc needs to be linked like this
[06:14:48] <strcat> -Wl,--whole-archive -ljemalloc -Wl,--no-whole-archive
[06:14:51] <strcat> to re-export the symbols
[06:15:07] <acrichto> we have a whitelist of symbols so I don't think that would help
[06:15:13] <strcat> I may be wrong
[06:15:17] <strcat> acrichto: yeah but we used to have that
[06:15:20] <strcat> I think
[06:15:22] <strcat> and it used to work
[06:15:41] <strcat> anyway let me try something
[06:16:23] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[06:16:23] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/3DAKog
[06:16:23] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[06:16:30] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[06:16:30] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/043ncQ
[06:16:30] <ghrust> 13rust/06auto 147ab0b0c 15Eduard Burtescu: Handle inline asm outputs as write-only in liveness, borrowck and trans.
[06:16:30] <ghrust> 13rust/06auto 14d0d5544 15bors: auto merge of #9850 : eddyb/rust/inline-asm-constraints, r=luqmana...
[06:16:30] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[06:16:44] <strcat> acrichto: LD_PRELOAD of jemalloc also doesn't work anymore
[06:16:49] <strcat> hrm
[06:16:52] <strcat> oh nvm
[06:17:31] <strcat> *shrug*
[06:17:35] <acrichto> it's a static library
[06:17:40] <acrichto> you'd have to pick it up through librustrt
[06:18:00] <acrichto> hmm, well it's exporting a malloc symbol
[06:18:01] <strcat> yes, it used to work
[06:18:13] <strcat> afaict we are using jemalloc but it is really slow 
[06:18:26] <acrichto> how is it slow?
[06:20:47] <strcat> acrichto: you can compare the perf before/after the changes to how we build it
[06:22:36] <dbaupp> did we enable debugging accidentally, or something?
[06:24:42] <strcat> maybe we shouldn't be using jemalloc :s
[06:25:11] <strcat> anyway I can't really explain why that thing got much slower
[06:25:11] <dbaupp> use eddyb9's allocator... yay rust!
[06:25:21] <acrichto> ugh we're allocating with libc and freeing with jemalloc
[06:25:24] <acrichto> and that segfaults :(
[06:25:57] <strcat> acrichto: when?
[06:26:12] <acrichto> oh this is bad
[06:26:14] <strcat> I fixed that servo bug, it was a double free
[06:26:16] <acrichto> libuv calls strdup
[06:26:19] <acrichto> then calls free
[06:26:25] <acrichto> strdup => libc strdup => libc malloc
[06:26:31] <acrichto> how has this not died sooner
[06:26:37] <strcat> really? I thought it was supposed to call malloc
[06:26:44] <acrichto> so this is all on my morestack branch
[06:26:50] <acrichto> so maybe I seriously messed something up
[06:27:03] <acrichto> but linking didn't change at all...
[06:27:13] <strcat> acrichto: well I think something is messed up since the libuv/jemalloc building change
[06:27:20] <strcat> I can measure it
[06:27:22] <strcat> I can't say why
[06:27:30] <acrichto> it didn't change though
[06:27:37] <acrichto> it was just building it once instead of three times
[06:27:40] <strcat> it changed on linux
[06:27:56] <strcat> acrichto: well something changed because it's slower ;\
[06:28:01] <strcat> I can build before/after
[06:28:31] <acrichto> not using jemalloc may account for the slowness
[06:29:01] <strcat> but it performs the same if I LD_PRELOAD jemalloc
[06:29:22] <acrichto> are you sure jemalloc is getting called?
[06:30:06] <acrichto> so I removed the LDFLAGS passed to jemalloc's make command
[06:30:21] <acrichto> I thought that it wouldn't matter b/c we're making a static library
[06:30:35] <strcat> well it depends what we put in them
[06:30:43] <acrichto> CFG_GCCISH_LINK_FLAGS
[06:30:48] <acrichto> LIBUV_FLAGS_$$(HOST_$(1)
[06:31:02] <acrichto>  -shared -fPIC -ldl -pthread  -lrt -g -m32
[06:31:08] <acrichto> for i686 linux
[06:31:22] <strcat> I really dunno what is wrong
[06:32:12] <dbaupp> what happens if you LD_PRELOAD something with malloc == abort? (i.e. is it actually calling the correct thing?)
[06:32:55] <acrichto> I'm gonna see if this is my fault, gonna test on master
[06:33:23] <acrichto> oh dear
[06:33:28] <acrichto> how has this passed at all
[06:33:31] <acrichto> on anything
[06:33:34] <strcat> dbaupp: yes it aborts
[06:33:37] <acrichto> stage0 just flat out segfaults for me
[06:33:53] <strcat> acrichto: with or without the morestack changes?
[06:34:04] <acrichto> just the last snapshot
[06:34:07] <dbaupp> :S
[06:34:10] <acrichto> zsh: segmentation fault (core dumped)  ./i686-unknown-linux-gnu/stage0/bin/rustc
[06:34:14] <acrichto> what
[06:34:21] <dbaupp> jack: is https://github.com/mozilla/rust/issues/9925#issuecomment-26574523 on linux?
[06:35:34] <dbaupp> acrichto: what are you running stage0 on?
[06:35:41] <acrichto> a ubuntu vm
[06:35:45] <acrichto> no arguments
[06:36:06] <dbaupp> I mean, what source?
[06:36:12] <dbaupp> oh, just `rustc`?
[06:36:16] <acrichto> yeah
[06:36:25] <acrichto> ./i686-unknown-linux-gnu/stage0/bin/rustc
[06:36:27] <acrichto> that's it
[06:36:59] <dbaupp> works for me (with s/x86_64/i686/)
[06:37:22] <acrichto> can you break on uv_fs_open in gdb
[06:37:34] <acrichto> and then follow the strdup to see what malloc it calls?
[06:40:34] <dbaupp> yeah, sure
[06:40:51] <acrichto> whoa
[06:40:56] <acrichto> we are totally not using jemalloc at all on osx
[06:41:16] <acrichto> callq  0x103080448 <dyld_stub_free> inside of a uv function
[06:45:02] <dbaupp> hmm, I can't drive gdb well enough :S
[06:45:42] <acrichto> eh it's ok
[06:48:09] <dbaupp> breaking on malloc does say it's jemalloc's malloc though
[07:06:05] <strcat> acrichto: ok, the link flags aren't passed right
[07:06:11] <strcat> there are PRE link flags and POST link flags
[07:06:21] <strcat> -Wl,--whole-archive and -Wl,--no-whole-archive
[07:06:25] <strcat> only the post link flags are passed
[07:06:30] <strcat> so let me try just adding that
[07:07:07] <acrichto> we're not building jemalloc correctly
[07:07:11] <strcat> how so?
[07:07:16] <acrichto> its symbosl have the je_ prefix
[07:07:45] <acrichto> or at least on osx they do
[07:07:54] <acrichto> I'm not sure how jemalloc was getting used at all on linux
[07:08:02] <strcat> it is being used
[07:08:25] <acrichto> also we don't want whole-archive
[07:08:34] <acrichto> we only want to whitelist jemalloc's public api
[07:08:49] <strcat> librustrt definitely exposes malloc
[07:09:32] <acrichto> it's an undefined symbol on osx
[07:10:23] <acrichto> and now it's a defined symbol, yay!
[07:10:31] <strcat> hm?
[07:10:41] <strcat> acrichto: can you benchmark the vector thing
[07:11:25] <acrichto> strcat: I can try yeah
[07:11:41] <acrichto> build faster rustc
[07:11:46] <acrichto> which issue was that again?
[07:13:34] <strcat> https://github.com/mozilla/rust/issues/8981
[07:14:10] <strcat> I think something might just be wrong with the jemalloc we build
[07:14:13] <strcat> as in it's really slow
[07:14:15] <strcat> ;\
[07:14:37] <strcat> would explain OS X not regressing, if it stopped using it
[07:16:13] <acrichto> hm osx segfaulted in stage1
[07:16:59] <strcat> going to try not linking in jemalloc
[07:21:21] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[07:21:21] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/043ncQ
[07:21:21] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[07:26:10] <strcat> acrichto: turning off jemalloc fixes performance
[07:26:13] <strcat> something is wrong with it
[07:26:18] <strcat> test bench::push                  ... bench:     34380 ns/iter (+/- 2455)
[07:26:20] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[07:26:20] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/lPaAAQ
[07:26:20] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[07:26:20] <strcat> test bench::push_preallocated     ... bench:     29570 ns/iter (+/- 1505)
[07:26:22] <strcat> with jemalloc
[07:26:23] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[07:26:23] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/pPbZFg
[07:26:23] <ghrust> 13rust/06auto 14090b245 15Jack Moffitt: Fix starts_with() and ends_with()....
[07:26:23] <ghrust> 13rust/06auto 1471c3f8c 15bors: auto merge of #9924 : metajack/rust/fix-starts-with-ends-with, r=huonw...
[07:26:24] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[07:26:24] <strcat> test bench::push                  ... bench:      7797 ns/iter (+/- 180)
[07:26:26] <strcat> test bench::push_preallocated     ... bench:      7040 ns/iter (+/- 170)
[07:26:28] <strcat> without
[07:26:43] <strcat> acrichto: I am just going to send in a PR disabling it for now
[07:31:31] <acrichto> strcat: ok
[07:34:03] * acrichto zzzz
[07:35:14] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[07:54:33] *** kimundi is now known as zz_kimundi
[08:12:04] *** zz_kimundi is now known as kimundi
[08:31:19] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[08:31:19] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/pPbZFg
[08:31:19] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[08:42:18] *** Quits: dbaupp (Thunderbir@moz-54ADD9F4.lns20.syd6.internode.on.net) (Ping timeout)
[08:56:17] *** Joins: dbaupp (Thunderbir@moz-54ADD9F4.lns20.syd6.internode.on.net)
[09:00:09] *** Quits: hansjorg (hansjorg@moz-41C5CE61.redpill-linpro.com) (Ping timeout)
[09:02:01] *** Joins: hansjorg (hansjorg@moz-41C5CE61.redpill-linpro.com)
[09:20:12] *** Joins: jdm (jdm@A931292E.20A5B7E6.930FA32.IP)
[09:20:22] *** Quits: jdm (jdm@A931292E.20A5B7E6.930FA32.IP) (Quit: Lost terminal)
[09:32:38] *** flaper87|afk is now known as flaper87
[09:34:44] *** kimundi is now known as zz_kimundi
[09:39:56] *** Joins: csp (textual@moz-E2D0A481.dcs.gla.ac.uk)
[09:43:19] *** Quits: csp (textual@moz-E2D0A481.dcs.gla.ac.uk) (Quit: Textual IRC Client: www.textualapp.com)
[09:43:25] *** Joins: csp (textual@moz-E2D0A481.dcs.gla.ac.uk)
[09:43:53] *** Quits: csp (textual@moz-E2D0A481.dcs.gla.ac.uk) (Client exited)
[09:44:00] *** Joins: csp (textual@moz-E2D0A481.dcs.gla.ac.uk)
[09:44:26] *** Quits: csp (textual@moz-E2D0A481.dcs.gla.ac.uk) (Quit: Textual IRC Client: www.textualapp.com)
[09:45:03] *** Quits: dbaupp (Thunderbir@moz-54ADD9F4.lns20.syd6.internode.on.net) (Quit: dbaupp)
[09:46:17] *** Joins: csp (textual@moz-E2D0A481.dcs.gla.ac.uk)
[09:48:26] *** Quits: csp (textual@moz-E2D0A481.dcs.gla.ac.uk) (Quit: Textual IRC Client: www.textualapp.com)
[09:48:29] *** Joins: csp (textual@moz-E2D0A481.dcs.gla.ac.uk)
[09:48:57] *** Quits: csp (textual@moz-E2D0A481.dcs.gla.ac.uk) (Quit: Textual IRC Client: www.textualapp.com)
[09:49:01] *** Joins: csp (textual@moz-E2D0A481.dcs.gla.ac.uk)
[09:50:33] *** Joins: dbaupp (Thunderbir@moz-54ADD9F4.lns20.syd6.internode.on.net)
[09:51:22] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[09:51:22] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/4sX9cw
[09:51:22] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[09:51:24] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[09:51:24] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/nxkzxw
[09:51:24] <ghrust> 13rust/06auto 1486a0d3d 15Alex Crichton: Optimize include_bin! for large inputs...
[09:51:24] <ghrust> 13rust/06auto 14b217f68 15bors: auto merge of #9851 : alexcrichton/rust/include_bin, r=huonw...
[09:51:24] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[10:05:23] *** zz_kimundi is now known as kimundi
[10:06:02] <dbaupp> nmatsakis: re https://github.com/mozilla/rust/issues/3309#issuecomment-26584505, there's now a __log_level() function that (unsurprisingly) gets the logging level of the current module, so it is possible to write user code conditional on it without hacks with the error/warn/info macros
[10:06:07] <dbaupp> rusti: __log_level()
[10:06:08] -rusti- 1u32
[10:06:22] <dbaupp> nmatsakis: is this something like what you're referring too?
[10:07:57] <kimundi> r? https://github.com/mozilla/rust/pull/9926
[10:12:03] *** Quits: StarLight (StarLight@moz-C2023557.dynamic.avangarddsl.ru) (Ping timeout)
[10:16:11] *** Joins: StarLight (StarLight@moz-3501BC4B.dynamic.avangarddsl.ru)
[10:24:53] *** kimundi is now known as zz_kimundi
[10:29:43] *** flaper87 is now known as flaper87|afk
[10:53:38] *** Joins: jdm (jdm@88F51059.F3BBB17D.144F44FA.IP)
[11:27:42] *** zz_kimundi is now known as kimundi
[11:48:32] *** flaper87|afk is now known as flaper87
[11:51:20] *** kimundi is now known as zz_kimundi
[12:00:26] *** zz_kimundi is now known as kimundi
[12:40:02] *** Joins: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp)
[12:42:03] *** Quits: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp) (Client exited)
[13:05:43] *** Joins: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp)
[13:08:31] *** Quits: csp (textual@moz-E2D0A481.dcs.gla.ac.uk) (Quit: Textual IRC Client: www.textualapp.com)
[13:09:04] *** Joins: csp (textual@moz-E2D0A481.dcs.gla.ac.uk)
[13:09:07] *** Quits: csp (textual@moz-E2D0A481.dcs.gla.ac.uk) (Client exited)
[13:11:19] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[13:11:19] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14b217f68 to 1471c3f8c: 02http://git.io/N3iJvQ
[13:11:19] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[13:11:23] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[13:11:23] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/B17zIw
[13:11:23] <ghrust> 13rust/06auto 143011801 15Marvin LÃ¶bel: Made `std::task::TaskBuilder::future_result()` easier to use
[13:11:23] <ghrust> 13rust/06auto 143f240fe 15bors: auto merge of #9926 : Kimundi/rust/future_result_bad_sig, r=huonw
[13:11:24] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[13:55:13] <nmatsakis> dbaupp: as usual, I am surpassed by our amazing community here...
[13:55:25] <nmatsakis> dbaupp: __log_level sounds like pretty much what I am referring to
[13:56:14] *** Quits: StarLight (StarLight@moz-3501BC4B.dynamic.avangarddsl.ru) (Ping timeout)
[13:56:23] <dbaupp> nmatsakis: you've got acrichto to thank for that one :)
[13:56:41] * nmatsakis thanks acrichto 
[13:59:01] *** kimundi is now known as zz_kimundi
[14:00:37] *** Joins: StarLight (StarLight@moz-771B3E3E.dynamic.avangarddsl.ru)
[14:04:44] *** Joins: lkuper_ (lkuper@5C7623CF.14CD977C.51B6877.IP)
[14:07:14] *** zz_kimundi is now known as kimundi
[14:16:27] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[14:16:27] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/B17zIw
[14:16:27] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[14:21:26] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[14:21:26] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/nnscjA
[14:21:26] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[14:21:28] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[14:21:28] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/USZCuw
[14:21:28] <ghrust> 13rust/06auto 141093730 15Chris Morgan: Fix extra::url::to_str to include the port....
[14:21:28] <ghrust> 13rust/06auto 14a1848bc 15bors: auto merge of #9927 : chris-morgan/rust/fix-url-to_str-so-it-includes-the-port, r=huonw...
[14:21:28] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[14:28:03] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[14:37:10] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[14:38:57] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[14:40:05] *** Quits: StarLight (StarLight@moz-771B3E3E.dynamic.avangarddsl.ru) (Ping timeout)
[14:44:06] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[14:47:51] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[14:49:38] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Connection reset by peer)
[14:49:53] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[15:00:41] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[15:06:06] *** Joins: pnkfelix (pnkfelix@moz-B65AF445.hfc.comcastbusiness.net)
[15:06:06] *** ChanServ sets mode: +o pnkfelix
[15:11:14] *** Quits: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp) (Client exited)
[15:16:09] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[15:21:55] *** Quits: lkuper_ (lkuper@5C7623CF.14CD977C.51B6877.IP) (Quit: lkuper_)
[15:25:28] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[15:26:32] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[15:26:32] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/USZCuw
[15:26:32] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[15:27:03] *** Joins: sanxiyn (tinuviel@B4104EBB.3CC170B1.1E14B209.IP)
[15:30:32] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[15:31:25] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[15:31:25] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/DL_YGw
[15:31:25] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[15:35:23] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[15:41:38] *** Joins: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp)
[15:43:44] *** Joins: StarLight (StarLight@moz-9D8F5E9E.dynamic.avangarddsl.ru)
[15:44:07] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[15:45:13] *** Quits: Axord (xord@moz-1B228827.lsanca.dsl-w.verizon.net) (Quit: I'm sure it's perfectly safe)
[15:46:54] *** Quits: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp) (Ping timeout)
[15:54:53] *** kimundi is now known as zz_kimundi
[15:57:03] *** Joins: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp)
[15:57:53] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[16:05:18] <acrichto> nmatsakis: :D, although we should certainly put it behind a macro b/c that's just something completely aribtrary that I came up with
[16:07:18] *** Quits: doomlord_ (servitor@moz-6732E9D4.range86-184.btcentralplus.com) (Connection reset by peer)
[16:07:23] *** Quits: olsonjeffery (pf@B8927AE1.CFEFA148.239A1A9E.IP) (Ping timeout)
[16:10:17] *** Joins: doomlord_ (servitor@moz-6732E9D4.range86-184.btcentralplus.com)
[16:22:15] <bstrie> acrichto: pingggg
[16:22:22] <acrichto> bstrie: pongggggggg :)
[16:22:33] <bstrie> I've been pinging you since yesterday over in #rust :P
[16:22:46] <bstrie> now... let me just remember what I wanted to tell you :)
[16:22:49] * acrichto is bad at scrollback
[16:23:46] <bstrie> rusti: println!("{:f.6}", 100.0);
[16:23:48] -rusti- pastebinned 7 lines of output: http://ix.io/8zY
[16:24:02] <bstrie> acrichto: ^ that error seems weird
[16:24:10] <bstrie> figured as the ifmt author you might have some insight
[16:24:20] <acrichto> the errors aren't always the best
[16:24:34] <acrichto> I have the exact location of the error, but I don't know how to span a portion of a token
[16:24:52] <cmr> dbaupp: bencher getting rusti-related build failures, diagnosing.
[16:25:01] <acrichto> but I agree, that should rather say something like "extra characters found after format string" or something like that
[16:25:39] <bstrie> kk, just wanted to make sure you were aware
[16:25:55] <acrichto> bstrie: would you mind opening an issue about it? I don't think that there's anything currently tracking it
[16:26:06] <bstrie> will do
[16:26:24] <acrichto> thanks!
[16:29:28] <bstrie> will done
[16:31:09] <acrichto> bstrie: what if that said: "expected `}`, found `.`"
[16:31:55] <bstrie> acrichto: that would be great
[16:32:04] <bstrie> like I said, I'm not sure how specific we can get there
[16:32:07] <acrichto> I swear I did this at some point
[16:32:09] <bstrie> this is why I came to you
[16:32:11] <bstrie> :P
[16:32:12] <acrichto> I wonder what happened to it
[16:32:15] <acrichto> :)
[16:33:22] *** Quits: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp) (Client exited)
[16:36:29] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[16:36:29] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/mieF-w
[16:36:29] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[16:41:34] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[16:41:34] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/bcsDlg
[16:41:34] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[16:41:36] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[16:41:36] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/QXsu8g
[16:41:36] <ghrust> 13rust/06auto 14273784e 15Alex Crichton: Optimize include_bin! for large inputs...
[16:41:36] <ghrust> 13rust/06auto 14d052912 15bors: auto merge of #9851 : alexcrichton/rust/include_bin, r=huonw...
[16:41:36] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[16:55:18] *** zz_kimundi is now known as kimundi
[17:03:41] *** Joins: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp)
[17:05:26] *** Quits: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp) (Ping timeout)
[17:09:20] *** Quits: sanxiyn (tinuviel@B4104EBB.3CC170B1.1E14B209.IP) (Quit: Leaving)
[17:23:23] *** Quits: jdm (jdm@88F51059.F3BBB17D.144F44FA.IP) (Quit: Lost terminal)
[17:25:53] <cmr> I love how `make clean` updates submodules.
[17:30:09] *** flaper87 is now known as flaper87|afk
[17:41:49] *** Joins: pauls (pauls@moz-7140CF01.ccs.neu.edu)
[17:46:24] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[17:46:24] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/QXsu8g
[17:46:24] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[17:51:31] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[17:51:31] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/MMEc-g
[17:51:31] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[17:51:33] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[17:51:33] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/TLRHQw
[17:51:33] <ghrust> 13rust/06auto 14cd0b51e 15LEE Wondong: Fix unicode errors on Windows in path_is_dir, path_exists, getcwd and rust_localtime....
[17:51:33] <ghrust> 13rust/06auto 141df4246 15bors: auto merge of #9812 : HNO3/rust/windows-utf8, r=alexcrichton...
[17:51:34] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[17:57:12] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[17:57:12] *** ChanServ sets mode: +qo brson brson
[18:00:15] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[18:01:15] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[18:01:16] *** ChanServ sets mode: +qo brson brson
[18:01:37] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[18:01:37] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 141df4246 to 14d052912: 02http://git.io/N3iJvQ
[18:01:37] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[18:01:41] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[18:01:41] <ghrust> 01[13rust01] 15bors pushed 7 new commits to 06auto: 02http://git.io/rbRomA
[18:01:41] <ghrust> 13rust/06auto 14396f872 15Adrien TÃ©tar: doc: switch pandoc to html5
[18:01:41] <ghrust> 13rust/06auto 147b3dd1e 15Adrien TÃ©tar: doc/rust.HTML: proper version box
[18:01:41] <ghrust> 13rust/06auto 1479a4d7f 15Adrien TÃ©tar: doc: tidy and cleanup CSS deps, add tutorial PDF generation
[18:01:43] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[18:02:07] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[18:03:41] <bstrie> brson: ping, when you have a moment
[18:06:31] *** Joins: olsonjeffery (pf@B8927AE1.CFEFA148.239A1A9E.IP)
[18:09:31] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[18:09:34] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[18:11:01] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[18:11:05] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[18:12:28] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[18:12:35] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[18:12:35] *** ChanServ sets mode: +qo brson brson
[18:22:58] *** Joins: geoffhill (geoffhill@moz-244CF33A.amazon.com)
[18:31:32] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[18:31:32] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 142e11861 to 14d052912: 02http://git.io/N3iJvQ
[18:31:32] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[18:31:39] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[18:31:39] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/vF6QiQ
[18:31:39] <ghrust> 13rust/06auto 146a11e17 15Alex Crichton: Fix an off-by-one in managed::refcount...
[18:31:39] <ghrust> 13rust/06auto 14a1b25f2 15bors: auto merge of #9930 : alexcrichton/rust/refcount-tests, r=thestinger...
[18:31:39] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[18:34:12] *** Joins: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp)
[18:36:00] *** Quits: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp) (Ping timeout)
[18:38:00] <kimundi> brson: ping too, after you got time for bstrie :)
[18:45:24] *** Quits: StarLight (StarLight@moz-9D8F5E9E.dynamic.avangarddsl.ru) (Connection reset by peer)
[18:49:49] *** Joins: tjc (tjc@moz-80F8D2BA.hsd1.ca.comcast.net)
[18:49:49] *** ChanServ sets mode: +o tjc
[18:51:18] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[18:54:06] *** Quits: lbergstrom (Adium@moz-5D8E4B14.lightspeed.cicril.sbcglobal.net) (Quit: Leaving.)
[19:02:43] *** Quits: pnkfelix (pnkfelix@moz-B65AF445.hfc.comcastbusiness.net) (Quit: Leaving.)
[19:07:06] <acrichto> dbaupp: ping
[19:20:30] <brson> bstrie: pong
[19:20:32] <brson> kimundi: pong
[19:21:12] *** Quits: tjc (tjc@moz-80F8D2BA.hsd1.ca.comcast.net) (Quit: zzzzzzzzzz)
[19:21:34] <bstrie> brson: yesterday you pointed reedlepee towards working on https://github.com/mozilla/rust/issues/4386 , and I've been working with her to get her started on it but I had a question for you
[19:22:05] <bstrie> brson: namely, how do we determine what fields should be public and which should be private?
[19:22:29] <bstrie> brson: right now I'm just telling her to put priv on every pub struct and see what breaks, is this the best way?
[19:22:40] <bstrie> *put priv on every field on every pub struct
[19:23:15] <bstrie> brson: also, I remember hearing a long time ago that we were possibly going to make struct fields priv-by-default. did that ever get decided one way or the other?
[19:23:48] *** Joins: pnkfelix (pnkfelix@82680D2B.9F7BDBDF.8B824544.IP)
[19:23:48] *** ChanServ sets mode: +o pnkfelix
[19:24:01] *** Quits: pnkfelix (pnkfelix@82680D2B.9F7BDBDF.8B824544.IP) (Connection reset by peer)
[19:24:07] *** Joins: pnkfelix (pnkfelix@82680D2B.9F7BDBDF.8B824544.IP)
[19:24:07] *** ChanServ sets mode: +o pnkfelix
[19:28:24] <brson> bstrie: hasn't been decided yet
[19:29:07] <brson> bstrie: personally I think it's a matter of taste, but for the most part priv is probably the right default. it's to some extent a question of whether the struct is a 'value type' or an 'object type'
[19:29:59] <pnkfelix> brson: I was talking to nmatsakis about this today at lunch
[19:30:14] <bstrie> brson: ok, then in the meantime I'm going to tell her to privatize every field in every pub struct in libstd and libextra, and if it passes the test suite I'm gonna tell her to submit it. we can always make the API less restrictive later
[19:30:17] <pnkfelix> brson: it became clear that I had not clearly outlined my idea on this (or one of my ideas on it)
[19:31:36] <pnkfelix> brson: which was: `pub struct s { x: int, y: int };` ==> everythings pub.  `struct s {x: int, y: int }; pub use type s;` : export just the typename for `s` as pub.
[19:31:57] <nmatsakis> or possibly `struct s_ { ... }; pub type s = s_;`
[19:32:01] <pnkfelix> brson: (the syntax for that last `pub` decl is up in the air.)
[19:32:11] <pnkfelix> brson: ah yes, and what nmatsakis said
[19:32:52] <kimundi> brson: So, I'm still trying my hand at making fail messages receivable at task::try.
[19:33:20] <nmatsakis> of course, using `pub type` means that the number of semi-goofy patterns required to make OOP work seems to grow and grow 
[19:33:26] *** Joins: tjc (tjc@moz-A979B497.tmodns.net)
[19:33:26] *** ChanServ sets mode: +o tjc
[19:33:49] <kimundi> brson: I'm at the point where I changed the on_exit field of the Death type from ~fn(bool) to ~fn(MyResultType)
[19:34:03] <brson> pnkfelix: we've removed that type of visibility inheritance before
[19:34:16] <brson> for impls last time
[19:34:20] <kimundi> becuase spawn::spawn_raw uses that to connect the future result pipe with task failure
[19:35:07] <pnkfelix> brson: another option I was outlining was `pub struct s pub { x: int, y: int}`, where the trailing `pub` overrides the usual default of `priv` for fieldsâ¦ but I think nmatsakis was somewhat disgusted by that.
[19:35:11] <kimundi> The problem is, this opens up a can of worms with the child_tombstone linked list of ~fn(bool) closures
[19:36:17] <nmatsakis> pnkfelix: I *am* whiny aren't I
[19:36:20] <kimundi> And I'm unsure how to proceed. The existing code basicaly does some kind of boolean logic with the various tombstone task results, but that doesn't work if instead of a bool it becomes a sendable type
[19:36:28] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[19:36:28] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/vF6QiQ
[19:36:28] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[19:36:32] <pnkfelix> nmatsakis: You're pretty good at hiding it i think
[19:37:21] <nmatsakis> pnkfelix: I think I like it even less seeing it typed into IRC
[19:37:27] <pnkfelix> brson: hmm.  I'll have to go see if the arguments from when we removed `pub impl` are documented (adnd apply here).
[19:38:11] <nmatsakis> brson: I don't think this is comparable to pub impl? 
[19:38:24] <nmatsakis> brson: I think the idea was that the fields of a pub strct are pub by default, fields of a non-pub struct are priv,
[19:38:37] <nmatsakis> brson: and then you give access to the struct itself another way
[19:38:45] <nmatsakis> brson: ah, but I remember now what you mean, yes, we did change the rules that's true
[19:39:09] <nmatsakis> brson: I was thinking of the distinction between "pub impl X for Y"
[19:39:44] <brson> kimundi: why doesn't it work? can't the result type be interpreted as a boolean somehow? is it a problem with cloning?
[19:39:48] <pnkfelix> nmatsakis: I assume this is about something where `pub impl S { â¦ }` caused all the fn items within the impl to be pub?)
[19:40:10] <acrichto> pnkfelix: that's what it used to do yeah
[19:40:22] <acrichto> same thing with 'pub extern { ... }'
[19:40:43] <pnkfelix> nmatsakis: the bodies of struct items should tend to be fewer lines than impl items, though, right?
[19:40:50] <brson> nmatsakis: that doesn't seem to solve the problem to me. from my persective the whole problem is that it's too easy to hide the details of public structs
[19:41:02] <brson> *to forget to
[19:41:05] <nmatsakis> yes
[19:41:24] <nmatsakis> it offers a pattern to hide, but it's still not the *default*
[19:41:31] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[19:41:31] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/YYTd9g
[19:41:31] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[19:41:35] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[19:41:35] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/Q76_cQ
[19:41:35] <ghrust> 13rust/06auto 1438b8415 15LEE Wondong: Fix unicode errors on Windows in path_is_dir, path_exists, getcwd and rust_localtime....
[19:41:35] <ghrust> 13rust/06auto 14ccac024 15bors: auto merge of #9812 : HNO3/rust/windows-utf8, r=alexcrichton...
[19:41:35] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[19:41:58] <acrichto> superpub struct Foo { .. }
[19:41:59] <pnkfelix> `pub struct s pub { â¦ }` would certainly solve *that* problem
[19:42:09] <pnkfelix> no one in their right mind would write it without meaning it
[19:42:19] <brson> lol
[19:42:55] <pnkfelix> acrichto: pub^2 struct Foo { â¦ }
[19:43:04] <acrichto> pub class vs pub struct
[19:43:07] <acrichto> :D
[19:43:24] <pnkfelix> acrichto: yeah nmatsakis was suggesting we add a `class` keyword
[19:43:37] <pnkfelix> acrichto: and just follow C++ on this
[19:43:52] <acrichto> I suppose you don't ever type struct or class anywhere else
[19:43:57] <acrichto> as part of the type that is
[19:44:06] <strcat> pnkfelix: that's one of the many things about C++ with a tendency to confuse people
[19:44:09] <acrichto> I feel like we can do better than that though
[19:44:17] <strcat> if the difference is pub vs priv, it should use words related to those
[19:44:49] <kimundi> brson: Well, if the child tombstone linked list keeps using bool's, then that means I can't pass the sendable task result value further along. If I make the linked list use the type of the sendable task result, that means I need to somehow handle that there can be more than one possible task result for a task failure
[19:45:39] *** Quits: tjc (tjc@moz-A979B497.tmodns.net) (Ping timeout)
[19:45:54] <kimundi> brson: Ideally I would just bypass the tombstone list, but I don'T see an alternative in the unwinding path
[19:46:24] <nmatsakis> pnkfelix: belated LOL
[19:46:30] * nmatsakis catches up on backscroll
[19:50:47] <brson> kimundi: the tombstone list is a bunch of closures that return bool, not ~fn(bool). these are just reporting whether the child died, but don't play into future_result, that i'm aware of (i.e. if a child dies that can become a failure like 'task failed because child failed' [for now], similarly to other linked failure situations), so I don't think they need to change to ~fn() -> YourResultType
[19:50:53] <brson> kimundi: bbl. lunch
[19:52:03] *** Joins: tjc (tjc@moz-A979B497.tmodns.net)
[19:52:03] *** ChanServ sets mode: +o tjc
[19:52:05] <kimundi> brson: Yeah, I don't want to change them either, but as I see it the path between fail!() -> ... -> task::try uses exactly that list to propagate the failure
[19:53:12] <kimundi> (Also sorry for getting the types wrong, there is quite a lot of code so it's kinda hard to keep an overview :()
[19:57:23] <kimundi> Hm, maybe my problem is that I don't understand Death::collect_failure() enough
[20:04:59] *** Joins: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp)
[20:06:40] *** Quits: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp) (Ping timeout)
[20:12:19] *** Joins: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[20:12:19] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[20:20:27] <kimundi> I think I'm making progress here...
[20:26:25] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[20:26:25] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14ccac024 to 14a1b25f2: 02http://git.io/N3iJvQ
[20:26:25] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[20:26:33] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[20:26:33] <ghrust> 01[13rust01] 15bors pushed 7 new commits to 06auto: 02http://git.io/eH_Row
[20:26:33] <ghrust> 13rust/06auto 14396f872 15Adrien TÃ©tar: doc: switch pandoc to html5
[20:26:33] <ghrust> 13rust/06auto 147b3dd1e 15Adrien TÃ©tar: doc/rust.HTML: proper version box
[20:26:33] <ghrust> 13rust/06auto 1403e3a68 15Adrien TÃ©tar: doc: tidy and cleanup CSS deps, add tutorial PDF generation
[20:26:35] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[20:33:46] *** Joins: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp)
[20:33:47] <bstrie> tjc: ping
[20:34:00] <tjc> bstrie: pong, might drop offline though, I'm on a train
[20:34:25] <bstrie> tjc: I've been working with reedlepee all day, and we got her first PR submitted
[20:34:50] <tjc> bstrie: wonderful! Thank you so much for stepping up -- I had a weird sleep schedule today and was worried that I might be missing people in #opw
[20:34:56] <tjc> bstrie: what's the PR number?
[20:35:14] <bstrie> tjc: the bug we have her on regards working on libstd, and essentially just requires trial-and-error of compiling it over and over again... which could get time-consuming
[20:35:24] <bstrie> tjc: https://github.com/mozilla/rust/issues/4386
[20:35:28] <tjc> bstrie: True, though it's good practice for working on rustc :P
[20:35:34] *** Quits: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp) (Ping timeout)
[20:35:55] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[20:35:59] <bstrie> tjc: was wondering if there was some special target to avoid having to compile libstd every time... I'm honestly not even sure at what point any errors would become visible
[20:36:07] <bstrie> er
[20:36:09] <tjc> bstrie: There are some magical make flags for that...
[20:36:17] <bstrie> to compile libstd without having to compile librustc and friends
[20:36:24] <tjc> hmm
[20:36:26] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[20:36:27] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 148675436 to 14a1b25f2: 02http://git.io/N3iJvQ
[20:36:27] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[20:36:29] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[20:36:29] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/Rryjdg
[20:36:29] <ghrust> 13rust/06auto 14c3a0a7d 15Alex Crichton: Try to improve format! error messages...
[20:36:29] <ghrust> 13rust/06auto 14dd2c34b 15bors: auto merge of #9932 : alexcrichton/rust/better-fmt-errors, r=cmr...
[20:36:29] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[20:36:36] <tjc> I mean, in general it's not really kosher to recompile std but not librustc
[20:36:41] <tjc> since rustc depends on std :-)
[20:36:56] <tjc> In this particular case, you would see errors if something in rustc was incorrectly depending on struct fields that should really be private
[20:37:16] <tjc> What I do sometimes is just hit ^C if I only want to see if my changes to libstd worked
[20:38:11] <bstrie> tjc: that's sort of the thing though... I don't think that priv has any effect on fields on structs that are local to your crate?
[20:38:14] <bstrie> or something
[20:38:15] <bstrie> I'm unclear
[20:38:22] <tjc> bstrie: hmm
[20:38:37] <bstrie> so just compiling libstd might not actually reveal anything
[20:38:42] <tjc> bstrie: I'm actually not sure either, since we've discussed and changed this a bunch of times
[20:38:43] <tjc> True
[20:38:43] <bstrie> it would only realize when running the test suite
[20:39:05] <tjc> well, you would notice *if* the type was used in rustc or syntax, and if rustc or syntax was using something that should be private
[20:39:07] <tjc> since those are all separate crates
[20:39:20] <tjc> but it's probably more likely that you would notice in the tests, if at all
[20:39:20] <tjc> Okay, I understand what you're asking now
[20:39:27] <tjc> so there's a make flag that lets you treat a particular file as "old"
[20:40:27] <tjc> bstrie: I don't know what it is offhand, but basically if you knew what the flag was, you could tell it to treat librustc and libsyntax as "old"
[20:40:35] <tjc> I have to get off the train, but I'll be back online in a few minutes
[20:41:13] <bstrie> ok
[20:41:58] *** Quits: tjc (tjc@moz-A979B497.tmodns.net) (Quit: zzzzzzzzzz)
[20:51:09] *** Joins: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp)
[20:52:53] *** Quits: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp) (Ping timeout)
[21:00:17] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[21:02:30] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[21:05:00] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[21:05:01] *** ChanServ sets mode: +qo brson brson
[21:05:38] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[21:16:27] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[21:16:27] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14dd2c34b to 14a1b25f2: 02http://git.io/N3iJvQ
[21:16:27] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[21:16:28] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[21:16:28] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/c-kcLQ
[21:16:28] <ghrust> 13rust/06auto 14bdcd29c 15chitra: Make fields in std::comm private
[21:16:28] <ghrust> 13rust/06auto 146b07d88 15bors: auto merge of #9935 : reedlepee123/rust/my_new_branch, r=bstrie
[21:16:28] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[21:26:16] *** Joins: tjc (tjc@moz-BE33DA21.fw1.sfo1.mozilla.net)
[21:26:16] *** ChanServ sets mode: +o tjc
[21:32:37] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[21:34:05] <tjc> bstrie: Were you able to figure out what that flag was?
[21:38:02] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[21:47:40] <dbaupp> bstrie, tjc: you can use `make check-stage2-std NO_REBUILD=1` (is this what you were looking for?)
[21:47:47] <dbaupp> acrichto: pong
[21:48:15] <acrichto> dbaupp: do you have any thoughts about https://github.com/mozilla/rust/pull/9856 ?
[21:48:16] <tjc> dbaupp: We were trying to figure out how to run tests while rebuilding std, but not extra, syntax, or librustc
[21:48:45] <dbaupp> tjc: cool, sounds like NO_REBUILD=1 is the correct thing then :)
[21:48:51] <tjc> dbaupp: great, thanks
[21:49:26] <acrichto> tjc: also don't forget the PLEASE_FIX_MY_BUGS_FOR_ME=1 variable, it's saved me so many times
[21:49:33] <tjc> acrichto: oh word
[21:50:04] <tjc> works better with PLEASE_FIX_MY_BUGS_FOR_ME=1 , INTRODUCE_MORE_BUGS_WHILE_DOING_SO=0 , though ;-)
[21:50:11] <acrichto> haha
[21:50:32] <dbaupp> acrichto: whats the difference between inaccessible/private and when do the occur?
[21:51:51] <dbaupp> acrichto: oh, looking at the tests it's clear
[21:52:01] <acrichto> yay tests!
[21:52:14] <dbaupp> acrichto: inaccessible is a `pub` thing with a private module chain, and private is a non-`pub` thing (right?)
[21:52:44] <acrichto> dbaupp: not necessarily, it's something where the access was denied not due to the thing in question
[21:53:03] <acrichto> so if you're asking about a private thing with a private parent, then it still says inaccessible with the reason pointing to the parent
[21:53:13] <acrichto> although if you fix the parent and then recompile you'll get another error saying the thing is private
[21:56:17] *** Quits: lkuper (lkuper@moz-D862222C.dhcp-bl.indiana.edu) (Ping timeout)
[21:57:40] <dbaupp> ah, ok, sounds good
[22:08:02] <brson> with nested block comments, what's the standard solution when you *actually* want to write a standalone `/*` inside of one?
[22:08:24] <brson> i can think of: use /// instead, or some kind of escaping
[22:08:39] <pnkfelix> brson: can you find a unicode character that looks like a / or a * ?  :)
[22:08:49] <benh> or a zero-width space inbetween?
[22:08:58] <benh> the possibilities are endless~
[22:09:01] <pnkfelix> benh: that's even more evil!
[22:09:05] <pnkfelix> benh: :D
[22:09:30] <brson> hm this is in a code example, so copy-pastability is important
[22:09:53] <pnkfelix> brson: can you sneak an ending */ somewhere else ?
[22:10:34] <acrichto> brson: what if we lexed /* as a token
[22:10:54] <acrichto> "foo/*bar" would not be considered as not having a starting /* for a block comment
[22:11:12] <acrichto> some sort of whitespace/newline combination must be surrounding the /*
[22:11:42] <brson> fyi here's the problem, in a doc comment https://github.com/madjar/rust/commit/41a55868bae6d2cdb57f3afd908c95a2cf4cc95b
[22:11:43] <pnkfelix> ah I see, I did not understand the context of brson's Q
[22:11:44] <strcat> brson: I think you have to use /// or //!
[22:12:02] <benh> oh, in a string literal!
[22:12:17] <benh> i was about to suggest trickery involving one of these somewhere... :(
[22:12:56] <strcat> wouldn't this only be a problem for */ ?
[22:13:03] <strcat> oh, this commit is adding support for nested ones
[22:13:29] <benh> further water on the mills of line-comment supremacists
[22:14:04] <pnkfelix> the string literael could be changed
[22:14:07] <pnkfelix> to use a unicode escape
[22:14:13] <pnkfelix> for the * or the /
[22:14:26] <benh> well, it's still an example, so it ought to be pretty more than functional
[22:17:00] * strcat is happy with just /// and //! ;p
[22:17:09] <strcat> block comments are too complicated for me
[22:17:13] <pnkfelix> acrichto's idea is starting to grow on me
[22:17:16] <strcat> choosing how to align things? pfft
[22:17:55] <benh> maybe replace the doc comment with the explicit doc attribute form using a raw string literal for the doc text!
[22:18:03] <pnkfelix> acrichto: though i think you only want to require a leading whitespace; we don't want to disallow /** /*! /*^ etc
[22:18:22] <pnkfelix> benh: yeah I was also thinking of suggesting that
[22:18:30] <acrichto> pnkfelix: hm I wouldn't want to get too magical though
[22:18:49] <strcat> well it would be fine if we only used line comments
[22:19:02] <benh> worked for perl, didn't it
[22:19:26] <strcat> python doesn't have block comments
[22:19:39] <pnkfelix> another option would be to rewrite the example to build up the string via concatenation
[22:19:49] <Luqman> strcat: it kind of does
[22:19:57] <strcat> it has multi-line strings
[22:20:01] <strcat> but you can't nest them
[22:20:33] <strcat> we have multi-line strings
[22:20:51] <strcat> but they obviously won't work at the top level
[22:21:25] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[22:21:25] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/c-kcLQ
[22:21:25] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[22:21:45] <acrichto> brson: with jemalloc gone, I've removed the terrible hack from the morestack changes, did you have lingering concerns about it or should I stamp it through after jemalloc is removed?
[22:21:52] *** Joins: lbergstrom (Adium@moz-5D8E4B14.lightspeed.cicril.sbcglobal.net)
[22:22:06] <brson> acrichto: r+
[22:22:11] <acrichto> wheeeee
[22:22:26] <acrichto> I keep meaning to change log_str
[22:23:31] <acrichto> brson: minor comment on sys::log_str, an xxx can be knocked out!
[22:23:48] <acrichto> which will actually maybe make {:?} more reasonable in huge situations
[22:24:43] <brson> acrichto: ok
[22:25:32] <acrichto> and only FailWithCause left over!
[22:26:02] <strcat> hm?
[22:26:11] <acrichto> to axe std::sys
[22:26:20] <strcat> oh
[22:26:26] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[22:26:26] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/bKeJxw
[22:26:26] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[22:26:33] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[22:26:33] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/OFCI0A
[22:26:33] <ghrust> 13rust/06auto 1490911d7 15Alex Crichton: Remove jemalloc from the runtime...
[22:26:33] <ghrust> 13rust/06auto 14df187a0 15bors: auto merge of #9933 : alexcrichton/rust/no-jemalloc, r=brson...
[22:26:33] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[22:27:18] <strcat> it annoys me that I can't use the test harness in #[no_std] applications ;p
[22:27:49] <strcat> acrichto: would it make sense for rustdoc to support --cfg?
[22:27:55] <acrichto> strcat: certainly
[22:28:04] <acrichto> rustdoc is a bit lacking when it comes to ifdefs
[22:28:32] <strcat> is this an open bug?
[22:28:47] <acrichto> https://github.com/mozilla/rust/issues/1998
[22:29:20] <acrichto> task '<unnamed>' has overflowed its stack
[22:29:24] <acrichto> I can't wait to get those legitimately
[22:29:30] <acrichto> so easy to break on
[22:30:19] <strcat> how does the segmented stack prelude not totally break the program with #[no_std]?
[22:30:26] <acrichto> strcat: it does
[22:30:33] <strcat> I mean before your change
[22:30:36] <acrichto> it's pure luck that it works at all
[22:30:43] *** Quits: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Quit: Leaving...)
[22:30:49] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[22:30:49] <strcat> I've just been doing rustc -> bytecode -> clang
[22:30:52] <acrichto> #[no_std] programs still have a prologue each function 
[22:30:56] <acrichto> even with my change
[22:31:02] <strcat> if you go through rustc's backend :)
[22:31:06] <acrichto> hehe
[22:31:21] <strcat> acrichto: Luqman: btw I think that person on the LLVM mailing list is wrong
[22:31:22] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[22:31:25] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[22:31:26] <acrichto> I think though that actually we've only ever run #[no_std] on actual os user-threads
[22:31:28] <strcat> their split-stack attribute suggestion
[22:31:36] <strcat> at least the justification
[22:31:49] <strcat> they mention that the rust code would be using it and not the C code but..... you don't want that
[22:31:50] <acrichto> I doesn't matter too much one way or another
[22:31:58] <strcat> you want as much as possible using it or not using it at all anywhere
[22:32:02] <acrichto> we only have two no_split_stack functions anyway
[22:32:18] <strcat> it's going to matter for servo
[22:32:32] <strcat> they want to compile in inline C functions
[22:32:39] <acrichto> I agree that no_split_stack makes more ense to me than split_stack
[22:33:01] <strcat> meh, I dunno
[22:33:04] <acrichto> if we could inline c functions...
[22:33:11] <strcat> well, we can
[22:33:14] <strcat> if you don't use the runtime
[22:33:24] <acrichto> brson: btw r=me on moving log_str with that change
[22:33:42] <acrichto> strcat: actually maybe you could
[22:33:43] <Luqman> strcat: acrichto well i have a patch that lets you choose whether to enable split stacks globally or a per-fn basis
[22:33:46] <acrichto> so long as you link to the runtime
[22:34:03] <strcat> acrichto: the C functions will probably call more external functions though
[22:34:26] <strcat> and they won't have fixed-stack-segment
[22:34:29] <strcat> so meh
[22:57:19] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[22:57:19] <ghrust> 01[13rust01] 15catamorphism 04force-pushed 06try from 140983ebe to 148cb7d5b: 02http://git.io/k471pw
[22:57:19] <ghrust> 13rust/06try 14bac3f7e 15Tim Chevalier: rustpkg: Make rustpkg tests stop comparing dates...
[22:57:19] <ghrust> 13rust/06try 14f3032d2 15Tim Chevalier: rustc: Check that the output file is writeable before linking...
[22:57:20] <ghrust> 13rust/06try 14d4a5ea2 15Tim Chevalier: rustpkg: invoke touch with a portable set of args
[22:57:22] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[23:10:35] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[23:10:35] <ghrust> 01[13rust01] 15catamorphism pushed 1 new commit to 06try: 02http://git.io/rKJbIw
[23:10:35] <ghrust> 13rust/06try 14b02ef63 15Tim Chevalier: squash (linker)
[23:10:35] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[23:10:49] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[23:14:28] <dbaupp> Does anyone know if https://github.com/mozilla/rust/issues/7221 is fixed?
[23:15:50] <acrichto> dbaupp: we don't have a builder which is mac-32-nopt-c
[23:15:56] <acrichto> so I presume it's still a problem
[23:16:34] * acrichto spins off a bulid locally
[23:18:43] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[23:18:43] <ghrust> 01[13rust01] 15catamorphism pushed 1 new commit to 06try: 02http://git.io/FkOhog
[23:18:43] <ghrust> 13rust/06try 1415b105a 15Tim Chevalier: rustpkg: more squashing (tests.rs)
[23:18:43] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[23:31:20] *** Quits: pnkfelix (pnkfelix@82680D2B.9F7BDBDF.8B824544.IP) (Ping timeout)
[23:31:27] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[23:31:27] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/OFCI0A
[23:31:27] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[23:36:26] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[23:36:26] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/4pQ5Tw
[23:36:26] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[23:36:27] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[23:36:27] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/o0GNdg
[23:36:27] <ghrust> 13rust/06auto 14d031d2e 15Alex Crichton: Use __morestack to detect stack overflow...
[23:36:27] <ghrust> 13rust/06auto 14713181c 15bors: auto merge of #9834 : alexcrichton/rust/morestack, r=brson...
[23:36:27] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[23:38:17] *** Joins: jeffdb (jeff@moz-D13B6004.hsd1.ca.comcast.net)
[23:46:46] *** Quits: tjc (tjc@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: zzzzzzzzzz)
