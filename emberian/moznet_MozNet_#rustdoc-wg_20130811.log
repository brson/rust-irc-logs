[00:00:14] <Seldaek> cmr: regarding &mut, I don't see this in the json
[00:00:22] <cmr> checking
[00:02:42] <cmr> yup I ignure the mutability, my bad
[00:03:41] <cmr> Actually no I don't
[00:03:47] <cmr> yes I do
[00:03:51] <cmr> just in a different way than I thought
[00:04:05] <cmr> Seldaek: Where are you getting the lifeetimes for BorrowedRef from O_o
[00:05:42] <Seldaek> ehh what do I know :p
[00:05:52] <cmr> well they seem to be in the docs
[00:05:57] <cmr> but I do not output hem in any way
[00:06:36] <Seldaek> where do you see that?
[00:06:45] <cmr> http://seld.be/rustdoc/master/std/iterator/struct.TakeWhile.html
[00:06:47] <cmr> I se a 'self
[00:07:47] <Seldaek> yeah
[00:07:55] <Seldaek> well the struct has it in generics.lifetimes
[00:08:04] <Seldaek> the field has it in region
[00:08:11] <Seldaek> but it has no lifetimes
[00:08:32] <Seldaek> I assumed these were one and the same:p
[00:11:06] <cmr> oh it's because it's a closure and closures are weird
[00:11:17] <Seldaek> yeah tell me about it :p
[00:13:25] <Seldaek> what does RegionBound mean now
[00:13:45] <cmr> Lesse...
[00:14:19] <Seldaek> ah it's just a T with nothing it seems
[00:14:21] <Seldaek> I think
[00:14:26] <cmr> no, it's 'self
[00:14:34] <cmr> I... just don't remember what context you'd see it anymore
[00:14:38] <cmr> as in, what code creates it
[00:14:44] <cmr> I'm very out of it today it seems :p
[00:14:49] <Seldaek> that's easy to see 
[00:15:09] <Seldaek> https://github.com/mozilla/rust/blob/master/src/libstd/task/local_data_priv.rs#L178
[00:15:16] <Seldaek> there the T is regionbound
[00:15:27] <Seldaek> but 'static isn't 'self ;)
[00:15:27] <cmr> what the hell
[00:15:37] <cmr> I don't even know what that means, sorry :\
[00:15:43] <Seldaek> :)
[00:16:23] <Seldaek> I'll check what this has in the json https://github.com/mozilla/rust/blob/master/src/libstd/iterator.rs#L935
[00:16:50] <cmr> I thought /that/ was a RegionBound
[00:16:53] <cmr> the 'self there
[00:17:03] <cmr> I think the T: 'static is some other weird thing
[00:17:23] <Seldaek> nope 
[00:17:28] <Seldaek> the 'self has no bounds
[00:17:32] <Seldaek> but it has a region self
[00:17:40] <Seldaek> well, a lifetime self sorry
[00:24:05] <cmr> Ok yeah, RegionBound is T: 'static
[00:24:17] <cmr> it seems my brain has flushed the rustdoc cache for the day
[00:25:14] <cmr> Seldaek: which TraitRefs are unresolved? all of them?
[00:27:26] <Seldaek> I don't know
[00:27:34] <Seldaek> sorry but I'm deep into this mess, can't look at anything right now
[00:27:38] <cmr> ok
[00:27:53] <Seldaek> I need to cover it all once and for all :)
[00:28:18] <Seldaek> I can't express how much of a mess this is becoming thoguh
[00:28:41] <Seldaek> once the json stabilizes we need a way to test this :)
[00:29:09] <cmr> https://github.com/cmr/rustdoc_ng/issues/6 :P
[00:29:53] <Seldaek> yeah, I mean for my render helpers too :)
[00:30:00] <Seldaek> because there is so much recursion and insanity going on
[00:30:08] <Seldaek> I seriously don't know what goes on anymore in some cases
[00:30:16] <cmr> lol
[00:30:30] <Seldaek> and since it renders thousands of pages at once, debugging is fun :/
[00:30:48] <Seldaek> can't isolate anything
[00:36:23] <Seldaek> yay!
[00:36:27] <Seldaek> https://github.com/mozilla/rust/blob/master/src/libstd/task/local_data_priv.rs#L178 renders 1:1 
[00:36:37] <cmr> sweet!
[00:36:40] <Seldaek> and I think I even know why ;)
[00:36:45] <cmr> hahah
[00:38:10] <Seldaek> cmr: when you have a sec, can you try to explain me what the hell this does? https://github.com/mozilla/rust/blob/master/src/libextra/sort.rs#L176
[00:38:21] <Seldaek> an impl for self
[00:38:31] <Seldaek> I kinda get the other generics
[00:38:39] <cmr> That's just how you implement something for a borrowed reference to a type
[00:38:53] <Seldaek> you lost me at "a" :p
[00:39:07] <cmr> So for example: let x = &[1, 2, 3]
[00:39:21] <cmr> that's a &[int], slice / borrowed pointer
[00:40:22] <cmr> To implement a trait for that type you need
[00:40:32] <cmr> impl<'self> Foo for &'self [int]
[00:40:43] <Seldaek> ah I see
[00:40:46] <cmr> Normally when you use a borrowed pointer you don't need the lifetime
[00:40:58] <cmr> But for impls, it needs to be named because it can't be inferred: there's nothing to infer it from
[00:41:27] <Seldaek> but is it only for implementing stuff on vectors of things?
[00:41:31] <cmr> It isn't
[00:41:44] <cmr> impl<'self, T> Foo for &'self T
[00:41:54] <cmr> would be an implementation of Foo for every borrowed pointer to type T
[00:42:00] <Seldaek> yeah fair enough
[00:42:17] <Seldaek> except this blows my mind a bit
[00:42:25] <cmr> I don't entirely understand it either
[00:42:27] <Seldaek> but I'll pretend I got it and move on for now
[00:42:29] <cmr> certainly not well enough to explain
[00:42:38] <Seldaek> I mean I get more or less what it does..
[00:42:59] <Seldaek> but my question actually, which I still don't know how to answer, is: where the heck do I show it in the docs? :/
[00:43:05] <cmr> Oh!
[00:43:10] <Seldaek> because T isn't very descriptive
[00:43:10] <cmr> Good question
[00:43:37] <cmr> http://static.rust-lang.org/doc/extra/sort.html#implementation-of-sort-for-self-mut-t-where-self-t-clone-ord-eq is how rustdoc shows it
[00:43:44] <cmr> I dislike the wording...
[00:43:55] <Seldaek> yeah 
[00:44:03] <Seldaek> well it shows it in the module where it's declared
[00:44:10] <Seldaek> but frankly this shit could be anywhere no?
[00:44:15] <cmr> yeah it could be
[00:44:23] <cmr> I dunno
[00:44:25] <cmr> put it next to the trait
[00:44:29] <cmr> that'd be where I'd expect to find it
[00:44:37] <Seldaek> I guess on the trait page I can list it yes
[00:44:40] <Seldaek> but not on any struct
[00:44:48] <cmr> no, not on any struct unfortunately
[00:44:51] <cmr> well.... maybe
[00:45:01] <cmr> nah, that'd be a rustdoc_ng plugin
[00:45:29] <cmr> rustdoc_ng could give impls and ID and say "this type has impls X, Y, and Z, here's what they are"
[00:45:39] <cmr> which could work even for generics, because it has access to the compiler
[00:45:47] <cmr> but I don't even know where to start with that, or how useful it'd be :p
[00:45:55] <Seldaek> yeah let's leave it for now I guess 
[00:46:19] <Seldaek> most likely you look at the Sort trait if you search for sorting things
[00:46:24] <Seldaek> then you'll see that generic impl
[00:46:32] <Seldaek> should be good enough
[00:46:38] <cmr> hopefully
[00:46:41] <Seldaek> and if not well, bummer :p
[00:46:46] <cmr> heh :P
[00:46:57] <cmr> if it's confusing or someone has a suggestion they'll give it in #rust I'm sure
[00:55:48] <Seldaek> yay! trait FromIterator<A, T: Iterator<A>> {
[00:55:50] <Seldaek> that was a nasty one
[00:56:01] <cmr> the json or implementing it? :)
[00:56:07] <Seldaek> implementing :p
[00:56:21] <cmr> What are you using for template?
[00:56:26] <cmr> templating language that is
[00:56:35] <Seldaek> well, thanks to the json generous nesting, I'm going mad trying to track down why stuff is undefined because I forgot one .fields or .whatever[0].foo somewhere
[00:56:52] <cmr> yeah..
[00:57:05] <Seldaek> all this stuff I'm not writing in the templates, it's just too complex I need js and recursive functions and tons of conditionals
[00:57:11] <cmr> I'm wondering if I should add a separate pass that sucks in the json, reformats it to not suck, and spits out new stuff
[00:57:24] <Seldaek> but I use https://github.com/justjohn/twig.js/ for the templates otherwise
[00:57:43] <Seldaek> cmr: dude if you refactor the json again I jump :P
[00:57:51] <cmr> hahah
[00:58:12] <Seldaek> nah but yes, it does suck
[00:58:19] <Seldaek> and having a cleanup pass at some point might be good
[00:58:27] <Seldaek> but I'd like to have tests and stuff first 
[00:58:44] <cmr> yes
[00:58:48] <Seldaek> checking all these variants by hand is insane
[00:59:08] <cmr> I'm slightly embarassed to admit I've pushed all the hard work in that area onto you..
[00:59:28] <cmr> I barely even check the json that comes out anymore, except for changes I make :p
[01:00:28] <Seldaek> check! trait Extendable<A, T: Iterator<A>>: FromIterator<A, T> {
[01:00:40] <cmr> I've updated the JSON slightly
[01:00:49] <cmr> Managed and RawPointer now have another field
[01:00:54] <cmr> the first one, "mutability"
[01:00:57] <Seldaek> I don't care I'm never updating it again :p
[01:00:59] <cmr> for @mut, *mut
[01:01:02] <cmr> heh
[01:01:07] <Seldaek> no ok cool
[01:01:14] <Seldaek> but I'll finish this stuff 
[01:01:21] <Seldaek> one more self missing somewhere
[01:01:24] <cmr> and BorrowedPtr is now a struct { lifetime, mutability, type_ }
[01:01:26] <Seldaek> then I think we're looking good
[01:01:35] <cmr> the lifetime is the name for like &'a Foo
[01:01:47] <cmr> which I think was the last missing piece of the typedef puzzle
[01:01:51] <cmr> not positive...
[01:02:39] <Seldaek> ah well ok that lifetime is what I needed just now
[01:02:42] <Seldaek> so updating
[01:04:54] <Seldaek> ehh wtf happened
[01:05:40] <Seldaek> oh ok 
[01:06:03] <Seldaek> cmr: so it's Mutable or Immutable?
[01:06:07] <cmr> Seldaek: yes
[01:06:14] <cmr> Immutable is the default and is unnotable
[01:06:21] <Seldaek> aye
[01:06:22] <cmr> Mutable should be shown as just "mut"
[01:07:21] <Seldaek> @foo or @mut foo
[01:07:32] <cmr> @mut foo
[01:07:34] <Seldaek> well "and" not or
[01:07:36] <cmr> oh, yes.
[01:07:43] <Seldaek> just checking for whitespace
[01:08:01] <cmr> be careful with the borrowed pointers
[01:08:11] <cmr> the "proper" formatting is &'lifetime mut foo
[01:08:18] <cmr> and when no lifetime, just &mut
[01:08:30] <Seldaek> err
[01:08:40] <Seldaek> we'll have to find one in the code and see what happens
[01:08:43] <Seldaek> because I can't tell :)
[01:08:45] <cmr> heh
[01:09:28] <Seldaek> heck this is almost turning into a json to rust generator 
[01:09:30] <cmr> std::container has a few, the find_mut method
[01:09:34] <cmr> Yup!
[01:09:38] <cmr> I was a bit worried about that
[01:09:45] <cmr> it's basically a very restricted rust pretty printer
[01:10:14] <cmr> but, it manages to avoid all the hard stuff like match and expressions and the various types of everything that isn't a type
[01:10:35] <Seldaek> yeah, I'm glad we only do the *easy* stuff :|
[01:10:57] <Seldaek> so.. it blows up because of the mutable change
[01:11:03] <Seldaek> but I don't get why
[01:11:09] <cmr> Yay!
[01:11:19] <cmr> The first field of the variant is the mutability, not the second
[01:11:25] <cmr> and the structure of BorrowedRef changed entirely
[01:11:40] <cmr> Other than that... I don't think anything else changed
[01:12:23] <Seldaek> yeah :/
[01:12:42] <Seldaek> I just get something in the output that I can't find in the json
[01:12:43] <Seldaek> that's great
[01:12:57] <cmr> ghosts in the code
[01:13:41] <Seldaek> oh ok 
[01:14:03] <Seldaek> I see why, just not sure where the heck it came from still
[01:15:33] <Seldaek> also node is a piece of junk, the logging to the console seems to be buffered somehow, and if an error happens it loses whatever wasn't flushed yet
[01:15:45] <Seldaek> so I have to throw exceptions with the messages I want to log to make sure I see them
[01:15:51] <Seldaek> brilliant :)
[01:16:35] <Seldaek> cmr: RawPointer also got a mutable field now!
[01:17:04] <Seldaek> wait, you said that
[01:17:19] <Seldaek> I am an idiot it seems
[01:18:28] <Seldaek> ok so BorrowedRef has region mut type, and the other two have just mut type
[01:18:57] <Seldaek> *mut really? never saw that .. 
[01:19:46] <cmr> Yes
[01:19:48] <cmr> Yeah
[01:19:50] <cmr> It's not used a lot
[01:19:59] <cmr> it should probably be used more
[01:20:04] <cmr> only really useful in C FFI
[01:20:25] <cmr> I think it's slated to be removed eventually
[01:20:58] <Seldaek> ok
[01:21:03] <Seldaek> yay it built
[01:21:29] <Seldaek> fn extend(iterator: &mut T);
[01:21:33] <Seldaek> half win
[01:21:44] <Seldaek> &mut self, still missing in there
[01:21:50] <cmr> Hm
[01:21:59] <Seldaek> but wait it's probably me
[01:22:00] <cmr> Ok that'd be self_ on TyMethod
[01:22:03] <cmr> yeah it is :p
[01:22:39] <Seldaek> ah ok 
[01:22:41] <Seldaek> yeah 
[01:22:43] <Seldaek> just spotted
[01:22:57] <Seldaek> easy fix
[01:23:03] <cmr> I also jjust realized Method and TyMethod are 100% identical
[01:23:23] <Seldaek> I don't read the type anyway 
[01:23:32] <Seldaek> well, not of everything
[01:24:18] <cmr> SelfTy is SelfStatic for static methods (ie, there is no self), SelfValue for plain "self", SelfBorrowed for "&'a self", SelfManaged for @mut self and @self, and SelfOwned for ~self
[01:24:33] <cmr> SelfManaged just has a mutability, SelfBorrowed a lifetime and a mutability (in that order)
[01:26:36] <Seldaek> oh
[01:26:39] <Seldaek> ok thanks
[01:26:52] <Seldaek> that'll save me some failed builds ;)
[01:28:24] <Seldaek> what do you mean by SelfTy is SelfStatic for static methods though?
[01:28:41] <Seldaek> for SelfStatic I just don't return anything?
[01:28:48] <cmr> yep
[01:28:56] <Seldaek> and SelfTy does it appear at all?
[01:29:06] <cmr> for example, trait Default { pub fn default(); }
[01:29:11] <cmr> default's self_ is SelfStatic
[01:29:17] <cmr> SelfTy is just the name of the enum
[01:29:25] <Seldaek> oh ok ok 
[01:33:14] <Seldaek> cool
[01:33:15] <Seldaek> trait Extendable<A, T: Iterator<A>>: FromIterator<A, T> {
[01:33:15] <Seldaek>     fn extend(&mut self, iterator: &mut T);
[01:33:23] <cmr> shipit
[01:34:01] <Seldaek> still an issu
[01:34:12] <Seldaek> geez, last letters of the sentence are hard today
[01:34:27] <Seldaek> https://github.com/mozilla/rust/blob/master/src/libextra/arc.rs#L488-492
[01:34:39] <Seldaek> this shows up as:
[01:34:39] <Seldaek>     data: &self mut T,
[01:34:40] <Seldaek>     token: extra::sync::RWLockWriteMode,
[01:34:51] <Seldaek> there's a ' missing there, and the <'self> too
[01:35:24] <cmr> Hm
[01:35:58] <Seldaek> the <'self> is my bad for sure
[01:36:01] <Seldaek> the ' I guess as well
[01:36:03] <cmr> No I don't think so
[01:36:11] <cmr> I don't think I include <'self> at all
[01:36:22] <Seldaek> yes yes it's there
[01:36:30] <cmr> oh it is?
[01:36:53] <Seldaek> there's a lifetime yeah
[01:37:03] <cmr> ok cool :D
[01:37:08] <cmr> oh right, paths can only have one, I forgot
[01:37:54] <Seldaek> ok the ' is fixed
[01:40:17] <Seldaek> OK shipped
[01:41:15] <Seldaek> rwwritemode
[01:41:18] <Seldaek> http://seld.be/rustdoc/master/extra/arc/struct.RWWriteMode.html
[01:41:25] <cmr> I still see two two extra crates?
[01:41:40] <Seldaek> yeah I don't know what's up with that:)
[01:41:52] <Seldaek> but once you click on it you can switch to std
[01:42:00] <Seldaek> I'll check..
[01:42:28] <cmr> Did you do impls yet?
[01:42:42] <Seldaek> :(
[01:42:51] <Seldaek> no I started indexing them
[01:42:54] <Seldaek> but didn't do the render
[01:42:54] <cmr> ok
[01:43:02] <cmr> no that's fine, just wondering if I was missing something
[01:43:06] <Seldaek> no no 
[01:43:20] <Seldaek> just got stuck with those damned bounds and whatnot forever
[01:43:28] <cmr> yeah :(
[01:47:33] <Seldaek> but it's good, had to be done..
[01:52:15] <Seldaek> haha http://seld.be/rustdoc/master/std/rand/distributions/ziggurat_tables/index.html
[02:54:53] <Seldaek> cmr: in trait_ in impls, there is no id of the trait
[02:54:57] <Seldaek> is this possible to have?
[02:55:01] <Seldaek> would be good for linking
[02:55:13] <cmr> sec
[02:55:17] <Seldaek> and to actually be able to show them on the trait page.. :)
[02:55:51] <cmr> Seldaek: as in, trait_ is always null?
[02:56:42] <Seldaek> no
[02:57:01] <cmr> it should include a TraitRef, which is {path, id}
[02:57:01] <Seldaek> but trait_ is an object with  a path
[02:57:12] <Seldaek> ah is the id present there th eid of the trait
[02:57:18] <cmr> I hope so!
[02:57:20] <Seldaek> I thought it might be the unique id of this particular impl
[02:57:36] <cmr> it's the same structure the parent refs on traits use
[02:57:40] <Seldaek> let's see :)
[02:57:41] <cmr> so... I don't know if it's right?
[02:57:46] <Seldaek> ah ;)
[02:58:04] <Seldaek> nah I can't find the id
[02:59:09] <Seldaek> e.g. std::num::num for int has a trait id 45294, but this id doesn't exist anywhere else
[02:59:31] <cmr> let me see if it's a quick fix
[03:00:03] <cmr> "resolve maps each trait_ref's ref_id to its defining trait"
[03:00:06] <cmr> well there's the problem
[03:00:37] <cmr> I never look it up in the definition map
[03:06:47] <Seldaek> cmr: http://seld.be/rustdoc/master/extra/sha2/struct.Sha512.html
[03:06:49] <Seldaek> it's hardly finished
[03:07:01] <Seldaek> but it's 5am I have to stop :)
[03:07:30] <Seldaek> not sure yet how to handle this if there should be a detailed page per method or not.. 
[03:07:31] <cmr> Seldaek: awesome!
[03:07:42] <Seldaek> it's hard to cram all the info there without making a mess
[03:08:37] <cmr> You probably don't even need to list the methods for trait implementations
[03:08:40] <cmr> just a link back to the trait
[03:08:47] <cmr> ...unless there are docs for that methods
[03:08:49] <cmr> *method
[03:08:55] <cmr> in which case, it's probably important that it's listed
[03:09:05] <Seldaek> yeah that's the thing
[03:09:21] <Seldaek> and frankly I like that it's all there 
[03:09:33] <Seldaek> it makes it look more like a real "object" with all the avail methods
[03:09:48] <Seldaek> that's maybe my devious OO brain
[03:10:00] <Seldaek> but it freaks me out a bit that structs and impls are split off
[03:10:08] <cmr> Hm no, you're right, I like the method lists too
[03:10:13] <cmr> it's more useful when there's more than one trait :P
[03:11:17] <Seldaek> yeah still needs some serious styling though
[03:11:18] <Seldaek> http://seld.be/rustdoc/master/std/vec/struct.VecIterator.html
[03:11:19] <Seldaek> this is chaos
[03:11:29] <cmr> Seldaek: if I update the json with proper IDs can you test it before going to bed?
[03:11:37] <Seldaek> yeah sure
[03:11:44] <Seldaek> takes me 2secs I just have to uncomment some code
[03:12:09] <Seldaek> and I mean, there's always a 1h window between "I'm off" and me really leaving anyway
[03:12:14] <cmr> lol
[03:13:09] <cmr> Ok, std.json.gz updated
[03:13:19] <cmr> some of them might still be unresolved, since they can point outside the crate
[03:13:37] <Seldaek> well in std they shouldn't ;)
[03:13:48] <cmr> oh right
[03:13:50] <cmr> duh
[03:14:29] <Seldaek> hmm
[03:14:40] <Seldaek> different error
[03:14:46] <Seldaek> let me check quickly
[03:19:33] <Seldaek> cmr: ok it links fine!
[03:19:39] <cmr> Seldaek: Awesome!
[03:19:50] <Seldaek> so if you can make sure it works for extra with external things
[03:19:50] <cmr> Just gotta fix cross-crate...everything, and it should be good, yeah?
[03:19:54] <Seldaek> yeah
[03:20:02] <Seldaek> well, cross-crate works for structs and all
[03:20:14] <Seldaek> if you do the same for traits awesome
[03:20:22] <cmr> just giving the full path?
[03:21:14] <Seldaek> yes well, ideally instead of a path thing if I could get an External or ResolvedPath 
[03:21:20] <Seldaek> that'd make my life easier
[03:21:27] <cmr> Ok, I can do External
[03:21:36] <cmr> maybe ResolvedPath
[03:21:41] <Seldaek> ok
[03:22:04] <Seldaek> otherwise I'll work around it, no huge deal, but would be good to keep things somewhat consistent
[03:22:10] <cmr> yes
[03:22:13] <cmr> it's already hacky enough
[03:37:55] <Seldaek> cmr: http://seld.be/rustdoc/master/std/hashmap/index.html lists tons of private stuff, could we have doc(hidden) on those in the json perhaps?
[03:38:05] <Seldaek> well no ok they could have docs but be private
[03:38:18] <Seldaek> guess I have to improve my filtering
[03:38:22] <cmr> What is private there?
[03:38:43] <Seldaek> SearchResult, resize_at() 
[03:38:54] <Seldaek> I didn't check the structs
[03:39:09] <cmr> Ah it's a priv enum
[03:39:19] <cmr> Yeah probably shouldn't list priv items in the index
[03:39:29] <Seldaek> yup
[03:39:35] <Seldaek> I write that down
[03:41:42] <cmr> Seldaek: go sleep :P
[03:41:47] <Seldaek> yeah :p
[03:41:51] <Seldaek> seriously considering it 
[03:42:00] <Seldaek> but I'm too braindead to take the decision
[03:42:02] <Seldaek> just sitting here staring
[03:42:17] <cmr> well eventually you'll pass out, might as well do it in bed, eh?
[03:42:24] <Seldaek> I'm too old for this shit :p
[03:43:04] <Seldaek> in the good ol' days I'd not pass out until noon ;)
[03:45:47] <Seldaek> oh noes, trams are running already, that's bad :p 
[03:45:55] <Seldaek> alright cya..
[04:48:08] *** Quits: n0v (n0v@moz-690FFF9D.org) (Ping timeout)
[04:50:59] *** Joins: n0v (n0v@moz-690FFF9D.org)
[05:29:19] *** Quits: n0v (n0v@moz-690FFF9D.org) (Ping timeout)
[11:49:05] <dbaupp> is fixed size vectors not printing their length a known bug? http://seld.be/rustdoc/master/extra/cryptoutil/struct.FixedBuffer128.html
[11:56:58] *** Quits: dbaupp (Thunderbir@moz-712A1135.lns20.syd6.internode.on.net) (Quit: dbaupp)
[11:58:54] *** Joins: dbaupp (Thunderbir@moz-712A1135.lns20.syd6.internode.on.net)
[12:08:20] <Seldaek> dbaupp: I noticed it in statics but figured there it didn't matter so much
[12:08:28] <Seldaek> but in structs I guess it's more relevant
[12:08:31] <Seldaek> cmr: ^
[14:34:33] <cmr> Seldaek: updated the JSON
[14:34:55] <Seldaek> what's new?
[14:35:01] <cmr> There is now a FixedVector type, which has a Type, and then a string just like statics, representing the expression that is the length
[14:35:15] <cmr> Where before there was a TraitRef, now it's just an External or ResolvedPath
[14:36:05] <Seldaek> ok cool
[14:53:43] <Seldaek> cmr: are you on the wrong rust?
[14:54:09] <Seldaek> no more "variant"/"fields"  pairs
[14:54:16] <Seldaek> I see ["ModuleItem", {}]
[14:57:38] <cmr> ah poop yes I am
[15:23:32] <cmr> Seldaek: should be fixed
[15:29:12] <Seldaek> thanks
[17:11:34] <Seldaek> cmr: ok cool! http://seld.be/rustdoc/master/std/iterator/trait.FromIterator.html
[17:11:40] <Seldaek> the parent Iterator is linked
[17:12:14] <Seldaek> should there be a space after T: ?
[17:12:20] <Seldaek> I found both variants in the code
[17:12:30] <dbaupp> Seldaek: yes space
[17:12:30] <cmr> the current style guide says ye
[17:12:31] <Seldaek> I think it's easier to read with the space..
[17:12:32] <cmr> s
[17:12:34] <dbaupp> Seldaek: but that's awesome
[17:12:34] <Seldaek> ok
[17:12:54] <Seldaek> dbaupp: yup, we're getting really close :)
[17:13:06] <Seldaek> let me try and show what structs implement a given trait
[17:14:57] <Seldaek> dbaupp: and the fixed vectors are now showing their size btw
[17:15:17] <Seldaek> except I messed up the syntax ;)
[17:15:35] <dbaupp> cool!
[17:15:48] <dbaupp> oh, and impls are linked to their trait!
[17:15:49] <Seldaek> every time I get it wrong and type u8..4 instead of , ..4
[17:16:15] <Seldaek> dbaupp: yeah we've been busy while you were sleeping down there :p
[17:16:29] * dbaupp hasn't slept recently at all
[17:16:34] <Seldaek> hehe 
[17:16:44] * dbaupp really should be sleeping now
[17:21:02] <Seldaek> dbaupp, cmr: how about showing inherited methods on traits if they have parents? [yn]: 
[17:21:14] <cmr> Seldaek: y!
[17:21:16] <cmr> that'd be awesome
[17:21:39] <Seldaek> ok :)
[17:23:45] <Seldaek> impls can only be crate local right?
[17:23:54] <cmr> nope
[17:24:00] <cmr> you can impl a trait for a type outside your crate
[17:24:07] <cmr> as long as you define the trait
[17:24:07] <Seldaek> oh really
[17:24:11] <Seldaek> ok then
[17:25:26] <cmr> and you can impl a trait from outside your crate, on a type in your crate
[17:44:06] <Seldaek> cool cool
[17:44:28] <Seldaek> http://seld.be/rustdoc/master/std/iterator/trait.Iterator.html see bottom for implementors
[17:44:56] <Seldaek> cmr: and for our nasty friend of yesterday implenting a generic thing for self, I just output it straight: http://seld.be/rustdoc/master/extra/sort/trait.Sort.html
[17:48:32] <cmr> Seldaek: looks good to me
[17:48:51] <cmr> "Implementors" is incomplete though
[17:48:57] <cmr> for example, all the stuff from Vec and Str are missing
[17:50:17] <Seldaek> yes but I don't know what's up with those
[17:50:26] <Seldaek> do we have them in the json?
[17:50:44] <cmr> they should be
[17:50:45] <Seldaek> also one of the main concerns still si all the numeric stuff
[17:50:51] <Seldaek> generated by uint_macros and whatnot
[17:50:56] <cmr> they should be impls in the vec module
[17:51:15] <Seldaek> I'll check, maybe I'm missing something
[17:51:28] <Seldaek> but now I'm trying to format impls in a readable way
[18:02:33] <Seldaek> cmr: ok I'm not sure about the vec stuff
[18:02:43] <Seldaek> can you give a concrete example?
[18:03:38] <cmr> https://github.com/mozilla/rust/blob/master/src/libstd/vec.rs#L2258
[18:04:03] <cmr> http://seld.be/rustdoc/master/std/vec/struct.VecIterator.html
[18:04:06] <cmr> The implementations are listed
[18:04:14] <cmr> It's just not listed as an implementor
[18:04:19] <Seldaek> ah
[18:04:31] <Seldaek> yes that's true :)
[18:04:33] <Seldaek> funny
[18:04:54] <Seldaek> weird
[18:11:42] <Seldaek> cmr: don't quite get it :| 
[18:13:33] <Seldaek> oh yes ok I am a moron
[18:13:38] <Seldaek> :p
[18:16:34] <Seldaek> cmr: ok I fixed that but only within a crate
[18:16:42] <Seldaek> so implementors out of the current crate aren't listed
[18:16:45] <Seldaek> I think that's acceptable
[18:16:54] <cmr> as do I
[18:19:24] <Seldaek> cmr: http://seld.be/rustdoc/master/std/iterator/trait.Iterator.html#implementors 
[18:19:35] <Seldaek> long list is long
[18:19:48] <cmr> And also poorly formatted!
[18:19:50] <cmr> needs flexbox
[18:20:15] <cmr> wait, not flexbox
[18:20:18] <cmr> the column layout one
[18:20:22] <cmr> with reflow
[18:21:08] <Seldaek> it does use that
[18:21:58] <Seldaek> problem is the names are way too long
[18:23:02] <Seldaek> not the main concern anyway
[18:24:17] <Seldaek> cmr: also I now show full impls first then the docs for each method.. not sure what's best really but at least this is easier to parse I Think
[18:24:20] <Seldaek> http://seld.be/rustdoc/master/std/cell/struct.Cell.html
[18:24:36] <Seldaek> I'll try and grab docs from the trait if there are no docs on the method itself
[18:24:42] <Seldaek> because it looks silly
[18:25:24] <cmr> Also, not listing a method's name after the impl box if there's no docs would be nice
[18:25:28] <cmr> otherwise it looks very silly :p
[18:25:57] <cmr> Also http://seld.be/rustdoc/master/std/clone/trait.DeepClone.html looks pretty sully!
[18:26:05] <cmr> *silly
[18:26:10] <Seldaek> holy shit
[18:26:11] <Seldaek> :)
[18:26:49] <Seldaek> maybe it's best to just remove columns for this
[18:26:52] <Seldaek> it doesn't fit 
[18:27:24] <cmr> Is the "impl ... for type" necessary in that list?
[18:27:39] <cmr> Isn't the full impl<T......." listed on the type's page?
[18:28:01] <Seldaek> it only lists it for "self" impls
[18:28:07] <Seldaek> the others are just links
[18:28:12] <Seldaek> like the 4 first ones on the DeepClone page
[18:31:24] <Seldaek> cmr: ok DeepClone without cols now
[18:31:39] <Seldaek> still looks funky but it's not exactly your typical trait :)
[18:31:45] <cmr> yeah
[18:39:30] <cmr> I'm looking through a bunch of the docs
[18:39:40] <cmr> don't think there's anything missing besides relatively minor polish issues.
[18:39:56] <cmr> Oh!
[18:40:09] <cmr> https://github.com/mozilla/rust/issues/5486
[18:40:12] <cmr> Last thing
[18:40:14] <Seldaek> reexports are still missing
[18:40:24] <Seldaek> yeah
[18:40:31] <Seldaek> it's on my todos :)
[18:44:26] <Seldaek> cmr: see what you made me do :P references[impl.inner.fields[0].trait_.fields[2]].def.inner.fields[0].methods
[18:44:37] <cmr> gahhh it burns
[18:44:54] <Seldaek> I'm getting good at it htough, almost no undefined errors today ;)
[18:48:35] <Seldaek> cmr: that RWArc makes me think, if the struct is private and I fix my listings, it'll hide the struct from the list 
[18:48:41] <Seldaek> so you can't reach the public impl
[18:48:58] <cmr> hmp
[19:03:07] <Seldaek> yay, parent docs
[19:03:30] <cmr> example?
[19:03:53] <Seldaek> http://seld.be/rustdoc/master/std/cell/struct.Cell.html
[19:03:58] <Seldaek> the clone method for example
[19:04:08] <cmr> Oh!
[19:04:10] <cmr> Nice
[19:04:15] <Seldaek> and I hid those without any docs
[19:04:21] <Seldaek> because indeed it was a bit senseless
[19:04:29] <cmr> now I need to find the issue about that and close it...
[19:04:32] <Seldaek> though it would be a good way to encourage people to write docs
[19:04:39] <Seldaek> I could put kitten images when there are no docs
[19:05:05] <Seldaek> cmr: btw what about that pass to convert inherited visbilities? :)
[19:05:17] <cmr> Seldaek: I'll do that in a sec
[19:38:07] <cmr> I really need to setup a better system than installing over my system rustc when I want to test a patch
[19:38:20] <cmr> waiting 15 minutes for a rustc with the json patch sucks :p
[19:40:23] <Seldaek> just don't make install and run it from a (second) local dir where you compile it?
[20:03:58] <Seldaek> we have markdown :) http://seld.be/rustdoc/master/std/index.html
[20:04:13] <cmr> Woot!
[20:05:06] <Seldaek> reexports is the last missing feature I think
[20:05:14] <Seldaek> the rest is a couple things that would be nice but aren't showstoppers
[20:05:31] <Seldaek> so.. I'm gonna go eat :)
[20:33:02] <cmr> Seldaek: updated with visibilitys fully resolved
[20:33:12] <cmr> "inherited" no longer exists, just public and private.
[20:33:40] <Seldaek> yay
[20:40:01] <cmr> So impls are always public
[20:40:05] <cmr> But hm
[20:42:26] <cmr> Ok, RWArc is private, but you can use it.
[20:42:29] <cmr> I have no idea that works!
[20:43:01] <Seldaek> we should clear that up :)
[20:43:06] <cmr> Yes
[22:23:19] <dbaupp> Seldaek: you're a hero! :D
[22:30:26] <cmr> He really is
[22:31:12] <dbaupp> it looks so cool
[22:31:14] <dbaupp> and has links
[22:31:25] <cmr> Yup
[22:31:26] <dbaupp> and impls on the traits, and traits on the types.
[22:31:38] <cmr> Once my JSON patch gets fixed/lands I'll open a PR pulling it into mainline.
[22:34:08] <Seldaek> cmr: pulling ng or do you want to pull my stuff in too?
[22:35:13] <Seldaek> as for heroics, I'm just doing what I can to help the language move forward, like everyone else. It's just more visual work than working on rustc :p
[22:37:34] <dbaupp> Seldaek: most of the time spent helping new people start is apologising for the bad docs; this stuff is amazing! :D
[22:39:17] <Seldaek> well I'm glad if it helps, I've been staring at it so much I frankly can't tell anymore if it's any good :p
[22:51:10] <cmr> Seldaek: both
[22:52:00] <cmr> Seldaek: So pcwalton says the priv thing is a bug
[22:52:10] <cmr> for now, list all priv items I guess :|
[22:53:07] <dbaupp> is it planned for e.g. http://seld.be/rustdoc/master/std/iterator/index.html to have the first sentence of each item?
[22:56:45] <Seldaek> dbaupp: yeah I guess I should add that
[22:56:59] <Seldaek> cmr: still a /*! there :)
[22:57:22] <dbaupp> also, is extra up-to-date?
[22:57:27] <Seldaek> dbaupp: the question is whether http://seld.be/rustdoc/master/std/index.html should stay like that as just one big list of modules, or if we expand it to a one-per-line with short descriptions
[22:57:42] <dbaupp> Seldaek: dunno
[22:58:04] <Seldaek> it's *very* long with one per line
[22:58:12] <Seldaek> but if you don't know what you're looking for this is maybe not so helpful
[22:58:34] <dbaupp> yeah
[22:59:14] <dbaupp> http://seld.be/rustdoc/master/extra/ringbuf/struct.RingBufIterator.html seems to be missing the traits in the impls
[23:01:08] <Seldaek> yeah.. I don't know why nor if what cmr sent me recently was up to date or not
[23:01:21] <Seldaek> I just sync up blindly
[23:01:55] <dbaupp> ok, cool :)
[23:01:58] <Seldaek> let's pretend it's ok for now
[23:02:04] * dbaupp was just wondering if it's a cross-crate bug, or something
[23:02:12] <Seldaek> it could well be 
[23:02:27] <Seldaek> I didn't check that in much detail
[23:11:05] <Seldaek> dbaupp: ok fixed
[23:11:14] <Seldaek> it was indeed not picking up external traits correctly
[23:13:05] <Seldaek> now they're shown as impls, but still not shown as implementors in the trait page though
[23:13:42] <dbaupp> yeah, I imagine that we can't show them as implementors on the trait page
[23:13:59] <dbaupp> (e.g. haddock doesn't for haskell's traits; iirc.)
[23:14:43] <Seldaek> well..
[23:14:49] <Seldaek> I'm gonna check
[23:14:55] <Seldaek> might be possible
[23:15:09] <Seldaek> through the power of hackery :p
[23:16:29] <dbaupp> I mean, it's gonna add a pile of irrelevant things
[23:16:40] <dbaupp> especially for types like Eq
[23:17:14] <Seldaek> irrelevant how?
[23:19:07] <dbaupp> as in, a pile from crates all over the place
[23:19:16] <Seldaek> well it wouldn't be all over the place
[23:19:17] <dbaupp> if it does cross-crate links in general
[23:19:19] <dbaupp> ?
[23:19:21] <Seldaek> it'd only be from extra
[23:19:26] <dbaupp> ah
[23:20:24] <Seldaek> from any crate anywhere would be more than hackery
[23:20:27] <Seldaek> it would be black magic :p
[23:20:46] <Seldaek> and indeed it'd be useless
