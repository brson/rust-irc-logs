[00:00:00] <pcwalton> there are a few useless uses of Cells
[00:00:01] <o11c> you only have to duplicate the contains rule ...
[00:00:03] *** Joins: Skif_ (emschwar@moz-CA025D57.ip.mcleodusa.net)
[00:00:08] <pcwalton> which are just inserted and then immediately removed
[00:00:13] <o11c> I've written vim syntax files before
[00:00:14] <pcwalton> I guess because people were so used to them :)
[00:00:39] *** Quits: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net) (Ping timeout)
[00:00:44] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[00:01:17] *** Joins: mark_edward (mark@moz-DCB0B750.lightspeed.cicril.sbcglobal.net)
[00:01:29] <dbaupp> ChrisMorgan: btw /*** and //// are no longer parsed as doc comments
[00:01:37] <ChrisMorgan> dbaupp: I know, I've got that.
[00:01:47] <dbaupp> ChrisMorgan: ah, good; just checking.
[00:01:49] *** Quits: Skif_ (emschwar@moz-CA025D57.ip.mcleodusa.net) (Ping timeout)
[00:02:04] <ChrisMorgan> I actually gave a patch for that before the PR landed and it was included.
[00:02:33] <ChrisMorgan> o11c: so, what happens with "/*  */*"?
[00:03:13] <o11c> that would be caught as */ I guess ...
[00:03:27] <ChrisMorgan> Desired result: Comment("/* */") Operator("*"). Actual result: Comment("/* *" Comment("/*")).
[00:03:27] <o11c> but if you want it's easy enough to treat it as /*
[00:03:37] <pcwalton>  35 files changed, 208 insertions(+), 387 deletions(-)
[00:03:39] <pcwalton> de-Celling
[00:03:42] <ChrisMorgan> Yay :-)
[00:04:00] * ChrisMorgan was glad to be able to get rid of Cell in rust-http's server
[00:04:07] <o11c> ChrisMorgan: I'm not sure why it would treat it as nested in that case ...
[00:04:28] <o11c> still, easy enough to fix
[00:04:33] <ChrisMorgan> o11c: it's got a continuing match, that's why. Vim is more greedy for start patterns than for end patterns.
[00:04:45] *** Quits: sk (sk@61A494B3.BA40E8A.AAC02D62.IP) (Ping timeout)
[00:04:45] <Sharp> ChrisMorgan: That isn't related to /** and /* though, is it?
[00:04:57] <Sharp> Anyway, I'd think there would be a similar problem for something like ML.
[00:05:00] *** Joins: sk (sk@61A494B3.BA40E8A.AAC02D62.IP)
[00:05:03] <o11c> to handle the end-of-line issue correctly, you'll just have to do a negative lookahead
[00:05:05] <ChrisMorgan> Sharp: that particular part isn't. I've managed to resolve the /** and /* problems now.
[00:05:09] <Sharp> How does it resolve it?
[00:05:15] *** Quits: happy4crazy (happy4craz@87D98E32.4046EB22.428F94DD.IP) (Client exited)
[00:05:38] <ChrisMorgan> Sharp: Haskell uses {- -}, which means you can't run into this problem (our problem is caused because of using the slash for both opening and closing)
[00:05:43] *** Joins: twb (textual@moz-56C3F201.res.gatech.edu)
[00:05:47] <Sharp> Oh, right.
[00:06:12] <ChrisMorgan> o11c: "easy enough to fix"? Having thought about it and rashly tried a couple of things, I don't believe it is possible to fix it at all.
[00:06:29] *** Quits: mark_edward (mark@moz-DCB0B750.lightspeed.cicril.sbcglobal.net) (Ping timeout)
[00:06:44] <o11c> ChrisMorgan: what you logically need to say is "*/ not followed by *"
[00:06:48] <o11c> and regular expressions can say that
[00:06:53] <o11c> er, wait
[00:06:58] <o11c> /* not preceded by *
[00:07:09] <ChrisMorgan> o11c: I present to you the next broken case: /*/**/*/.
[00:07:42] <o11c> you might have to duplicate again for top-level comments though
[00:07:55] <Sharp> The trouble is, I know DFAs can't do it, but PCREs can do thinks DFAs can't :P
[00:08:25] *** Joins: Sgeo (quassel@moz-D0F30617.dyn.optonline.net)
[00:08:27] <ChrisMorgan> ... and then when you've fixed that, /*/*/**/*/*/, &c. ad infinitum. (Those are the main cases.)
[00:08:28] <dbaupp> ChrisMorgan: what's that meant to be? two nested comments?
[00:08:34] <ChrisMorgan> dbaupp: yep
[00:09:11] *** flaper87 is now known as flaper87|afk
[00:09:22] <ChrisMorgan> In the end, I'm removing the \*\@<! and allowing the */* case to be broken.
[00:10:13] <Sharp> I'm still confused about how regular expressions can deal with nested comments in the first place.
[00:10:23] <ChrisMorgan> ("\*\@<!" in Vim RE == "(?<!\*)" in PCRE.)
[00:10:57] <ChrisMorgan> Sharp: it's not using a regular expression, it's using Vim's syntax regions, which get a start and an end delimiter.
[00:11:06] <o11c> Sharp: vim does the nesting itself, the regexes are only for the start and end delimiters
[00:11:09] <ChrisMorgan> (And, optionally, a list of things they can contain.)
[00:11:11] <Sharp> Oh.  I see.
[00:11:25] <Sharp> Ahhh
[00:11:35] <Sharp> So the issue is that we can't reliably differentiate between a start and end token.
[00:11:40] <ChrisMorgan> o11c: can you see any way around it or do you agree with me that it's probably impossible?
[00:12:03] <o11c> ChrisMorgan: I'll have to think about it
[00:12:21] <o11c> it *should* be possible, possible with some \(\)*s 
[00:12:47] <ChrisMorgan> Sharp: more or less correct. Vim is designed for one mode of operation (greedy start matches) while the tokeniser is just searching for the earliest-starting thing it can.
[00:13:19] *** Quits: telotortium (rmi1@moz-4341776B.hsd1.il.comcast.net) (Ping timeout)
[00:13:29] <ChrisMorgan> o11c: I don't see how that's going to help, though I'd be pleased to be proven wrong.
[00:13:53] <Sharp> o11c: I think he's right, because using the same start and end delimiter means that identifying which tokens are ending and which are starting requires knowing nesting depth.
[00:14:03] <Sharp> Well, not the same, but close enough.
[00:15:52] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[00:16:01] *** Quits: sk (sk@61A494B3.BA40E8A.AAC02D62.IP) (Ping timeout)
[00:16:02] <wycats_> z.o.m.g.
[00:16:04] <wycats_> it's working
[00:16:06] *** Joins: itdnhr (it@moz-7FAAAB8D.bstnma.fios.verizon.net)
[00:16:09] <wycats_> https://github.com/skylightio/skylight-rust/releases/tag/v0.3.0-pre.1
[00:16:12] <wycats_> static linking
[00:16:14] <wycats_> all tests pass
[00:16:15] <wycats_> wheeee
[00:16:16] *** Joins: sk (sk@61A494B3.BA40E8A.AAC02D62.IP)
[00:16:24] <wycats_> ah
[00:16:26] <o11c> woot!
[00:16:30] <wycats_> :D
[00:16:35] <wycats_> tomorrow I will attempt to deploy
[00:16:36] *** Joins: canhtak (canhtak@moz-A53E1151.wl.t.ulaval.ca)
[00:16:39] <wycats_> we will see if it crashes and burns
[00:17:11] <wycats_> the static build is 6MB but gzips down to 1.5MB
[00:17:15] <wycats_> which I think I can tolerate
[00:17:39] *** Joins: derek_c (derek@moz-2B22A3A6.cit.cornell.edu)
[00:18:34] <derek_c> I'm writing a program that behaves like this: the main thread spawns a task, which in turn can spawn many tasks, which in turn can spawn many other tasks, etc.  Now, I want the main thread to wait until all spawned tasks finish.  How may I do that?
[00:19:07] <derek_c> I don't know ahead of time how many tasks will be spawned
[00:19:35] <ChrisMorgan> wycats_: I'm curious: what would the problem be with a larger static build?
[00:20:00] <wycats_> ChrisMorgan: every Skylight user has to add this to their gem
[00:20:08] <wycats_> Gemfile*
[00:20:17] <wycats_> an 8MB download means 8MB more to download on deploys
[00:20:23] <ChrisMorgan> Ah, yes.
[00:20:25] <wycats_> sometimes downloads are slow
[00:20:52] <o11c> 8MB? that's just 1 second ...
[00:21:10] <o11c> it's not like we're still on dial-up
[00:21:44] <o11c> (one dialup it would be an hour)
[00:22:23] <Sharp> ChrisMorgan: Am I correct that these pathological examples aren't actually broken if you don't fix that first */* case?
[00:23:04] *** Quits: lbonn (lbonn@moz-FBFAA8BC.rev.sfr.net) (Quit: leaving)
[00:23:23] <ChrisMorgan> Sharp: no, /*/**/*/ is still broken and can only be fixed with a space: /*/**/ */.
[00:23:25] <brson_> derek_c: maybe have them all send messages on a SharedChan that bumps a ref count (enum TaskCount { StartTask, EndTask }), and have the main task wait until it hits 0
[00:23:54] <derek_c> brson_: holy shit that's a great idea
[00:23:56] <brson_> derek_c: er, bump the ref count before spawning, and drop the ref before terminating
[00:24:01] <derek_c> brson_: thanks :)
[00:24:04] <Sharp> ChrisMorgan: Really? Vim lets tokens share characters?  Or does it just scan for open tokens first?
[00:24:43] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[00:24:44] <Sharp> Or is this because of special-cased /**?
[00:24:55] <o11c> it scans for current block's close and nested open
[00:25:05] <ChrisMorgan> Sharp: it lets a region start obscure a region end which is in progress.
[00:25:10] <o11c> if the nested open starts before the current block closes, it ignores the close
[00:25:37] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[00:25:41] <Sharp> Why?  That seems like weird behavior.
[00:26:42] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[00:27:30] <ChrisMorgan> It has things like a keepend flag which means "don't let anything contained go past an end match unless it has the extend flag"... but naturally that won't work for this case as we need it to go past the first end match for nesting to work.
[00:28:14] *** Joins: happy4crazy (happy4craz@moz-4514D716.nycmny.fios.verizon.net)
[00:28:41] *** Joins: happy4cr_ (happy4craz@moz-4514D716.nycmny.fios.verizon.net)
[00:28:41] *** Quits: happy4crazy (happy4craz@moz-4514D716.nycmny.fios.verizon.net) (Connection reset by peer)
[00:28:48] *** Joins: maxiepoo_ (Max@moz-6F50ADE.hsd1.il.comcast.net)
[00:29:17] *** Quits: Cork (Cork@moz-352B7E7B.a370.priv.bahnhof.se) (Ping timeout)
[00:29:51] *** Joins: tautologico (iorek@E0D804D3.CFE755C8.C27E1635.IP)
[00:29:57] *** Joins: tikue (tkuehn@494ACD0F.28336FB0.689607DE.IP)
[00:30:44] <Sharp> Oh, I see.  That's icky.
[00:30:51] *** Joins: carter (carter@moz-F3C2A2D8.nycmny.fios.verizon.net)
[00:32:25] <Sharp> Vim's pattern matching looks kind of hacky :P  Maybe you can just contribute a new flag specifically for Rust.
[00:32:32] *** Joins: headcrash (Mibbit@moz-3B82F90D.sub-174-227-193.myvzw.com)
[00:32:58] <o11c> no, vim works pretty well
[00:33:42] <ChrisMorgan> Ah well, all this work has ended up simplifying things a lot, so that I get down from 8 rules back to 4.
[00:33:44] <aatch> Sharp, it is, but it's also supposed to be fast. It's just that sometimes you run into cases where expressing what you want is complicated.
[00:34:11] <Sharp> aatch: Yeah, I get that--it looks like people just added flags when its syntax wasn't adequate for their usecase.
[00:34:23] *** Joins: mark_edward (mark@BEC2CE18.E44DCB14.95579CE8.IP)
[00:34:26] *** Quits: donri (donri@moz-9BB61102.tbcn.telia.com) (Client exited)
[00:34:48] *** Quits: happy4cr_ (happy4craz@moz-4514D716.nycmny.fios.verizon.net) (Quit: Leaving...)
[00:35:08] <derek_c> how do you concatenate two vectors?
[00:35:24] <aatch> derek_c, do you want a new vector?
[00:35:25] <tikue> derek_c: append
[00:35:36] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[00:35:46] <aatch> rusti: let a = ~[1,2,3]; let b = ~[4,5,6]; a+b
[00:35:47] <derek_c> aatch: guess I don't
[00:35:50] -rusti- ~[1, 2, 3, 4, 5, 6]
[00:36:11] <derek_c> rusti let a = ~[1, 2]; let b = ~[3, 4]; a.append(b)
[00:36:14] <dbaupp> .push_all and .push_all_move also work
[00:36:18] *** Quits: alan (alan@moz-FE02DD30.sat6.rackspace.com) (Ping timeout)
[00:36:24] <derek_c> rusti: let a = ~[1, 2]; let b = ~[3, 4]; a.append(b)
[00:36:24] -rusti- <anon>:9:43: 10:5 error: type `~[<VI1>]` does not implement any method in scope named `append`
[00:36:25] -rusti- <anon>:9          let a = ~[1, 2]; let b = ~[3, 4]; a.append(b)
[00:36:26] -rusti- <anon>:10     };
[00:36:28] -rusti- error: aborting due to previous error
[00:36:30] -rusti- application terminated with error code 101
[00:36:48] <aatch> rusti: let mut a = ~[1, 2]; let b = ~[3, 4]; a.push_all(b)
[00:36:49] -rusti- ()
[00:36:53] <aatch> rusti: let mut a = ~[1, 2]; let b = ~[3, 4]; a.push_all(b); a
[00:36:54] -rusti- ~[1, 2, 3, 4]
[00:37:06] <aatch> rusti: let mut a = ~[1, 2]; let b = ~[3, 4]; a.append(b); a
[00:37:07] -rusti- <anon>:9:47: 9:59 error: type `~[<VI1>]` does not implement any method in scope named `append`
[00:37:07] -rusti- <anon>:9          let mut a = ~[1, 2]; let b = ~[3, 4]; a.append(b); a
[00:37:07] -rusti-                                                         ^~~~~~~~~~~~
[00:37:07] -rusti- error: aborting due to previous error
[00:37:07] -rusti- application terminated with error code 101
[00:37:13] <tikue> append is a function
[00:37:15] <tikue> not am ethod
[00:37:21] <tikue> it moves the second vector rather than copying
[00:37:22] <aatch> Ah, I thought it was a method.
[00:37:27] <tikue> or maybe moves both idk
[00:37:48] <sp3d> rusti: let mut a = ~[1, 2]; let b = ~[3, 4]; a.push_all(b); a
[00:37:48] -rusti- ~[1, 2, 3, 4]
[00:38:15] <ChrisMorgan> http://static.rust-lang.org/doc/master/std/vec/fn.append.html
[00:38:25] <tikue> rusti: use std::vec::append; append(~[1, 2, 3], [4, 5, 6])
[00:38:25] -rusti- ~[1, 2, 3, 4, 5, 6]
[00:38:32] *** Quits: aatch (James@moz-B437F499.pocketrent.com) (Client exited)
[00:38:40] <ChrisMorgan> That indicates it does *not* consume RHS.
[00:38:42] *** Joins: aatch (James@moz-B437F499.pocketrent.com)
[00:38:43] <tikue> eys
[00:38:45] <tikue> yes i know
[00:38:46] <tikue> i was wrong
[00:39:11] <ChrisMorgan> If you want to consume RHS, use http://static.rust-lang.org/doc/master/std/vec/trait.OwnedVector.html#tymethod.push_all_move
[00:39:15] <pcwalton> brson_: opinions on https://github.com/mozilla/rust/pull/10690 ?
[00:39:31] <tikue> append is just push_all but returns as well
[00:39:49] <aatch> append is just the functional version
[00:39:51] <dbaupp> append consumes LHS too
[00:40:06] <tikue> well append returns the LHS
[00:40:09] <ChrisMorgan> (Or if you don't want to consume RHS, I suggest using http://static.rust-lang.org/doc/master/std/vec/trait.OwnedCopyableVector.html#tymethod.push_all rather than append, which is just a useless wrapper for push_all.)
[00:40:28] <tikue> well it saves a line
[00:40:32] <ChrisMorgan> append's body: `let mut v = lhs; v.push_all(rhs); v`.
[00:40:39] <tikue> yeah, it saves a line
[00:40:39] <tikue> lol
[00:40:52] <brson_> pcwalton: reviewing now
[00:41:06] *** Joins: vky (chatzilla@moz-4F2E17BF.dsl.dynamic.sonic.net)
[00:41:11] <pcwalton> we have a bunch of PRs that have gone unnoticed I think
[00:41:19] <ChrisMorgan> If it were written now, the signature would bind lhs as mut (not possible when it was written) and the body would then be `lhs.push_all(rhs); lhs`.
[00:41:32] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[00:41:32] <ChrisMorgan> I vote std::vec::append should be removed.
[00:41:34] <derek_c> can't you do recursion in Rust?
[00:41:54] <ChrisMorgan> derek_c: sure you can.
[00:41:55] <pcwalton> yes
[00:42:07] <derek_c> I'm calling a function in itself and rustc complains about use of undeclared type name
[00:42:20] <ChrisMorgan> derek_c: code?
[00:42:23] <aatch> derek_c, that's not related to recursion.
[00:42:27] <derek_c> rusti: fn a() { a() }; a()
[00:42:28] -rusti- application terminated abnormally with signal 11 (Segmentation fault)
[00:42:39] <ChrisMorgan> (Stack overflow.)
[00:43:02] <derek_c> http://upl.io/50khg5
[00:43:17] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[00:43:33] <derek_c> yeah it says undeclared type name `du`
[00:43:50] *** Joins: SingingBoyo (brandon@DA28FB90.A5D0D593.4F048BDC.IP)
[00:44:13] <ChrisMorgan> derek_c: you've got that as the return type
[00:44:16] <aatch> derek_c, that's because you have the wrong syntax for the closure.
[00:44:37] <derek_c> OMG
[00:44:42] <ChrisMorgan> "|| -> du(f)" means "a closure with return type du(f) [and no body, which would be a syntax error]"
[00:44:42] <derek_c> sorry :)
[00:44:46] *** Quits: canhtak (canhtak@moz-A53E1151.wl.t.ulaval.ca) (Quit: canhtak)
[00:45:02] <dbaupp> ChrisMorgan: I think it's actually return type `du` with body `(f)`
[00:45:05] <brson_> what's adrien tetar's irc nick?
[00:45:21] <ChrisMorgan> dbaupp: sorry, you're right.
[00:45:56] <pcwalton> acrichto: r? https://github.com/mozilla/rust/pull/10791
[00:46:29] <aatch> pcwalton, brson_, since you're here, can we have a message along the lines of: "if you can, provide code with your question" added to the topic? Since it's almost always the first thing that happens.
[00:46:40] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[00:46:41] <ChrisMorgan> derek_c: BTW, Future::spawn now takes a proc rather than a closure.
[00:47:03] <ChrisMorgan> That means you can use `do Future::spawn { du(f) }` if you want.
[00:47:28] <acrichto> pcwalton: read the title, r+
[00:47:32] <pcwalton> :)
[00:47:33] <pcwalton> thanks
[00:47:49] <aatch> "Hey, I'm getting this error: <error>" "What's the code"
[00:48:03] *** Joins: santiago (santiago@moz-8ADE82B4.socal.res.rr.com)
[00:48:26] <derek_c> ChrisMorgan: hah I just got to that. thanks!
[00:49:29] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[00:50:43] *** Quits: mark_edward (mark@BEC2CE18.E44DCB14.95579CE8.IP) (Connection reset by peer)
[00:51:06] *** Joins: mark_edward (mark@C3432E59.E44DCB14.95579CE8.IP)
[00:52:16] *** Joins: mib_fn5o7o (Mibbit@45136FAB.A9DA0237.DDE5D3F6.IP)
[00:53:13] *** Quits: dherman (dherman@moz-BBE3ABD.mv.mozilla.com) (Quit: dherman)
[00:53:20] <mib_fn5o7o> Hi all, I am working on a little project for a class and was wondering: Is it possible to build the compiler from my own snapshot (modified compiler) rather than the snapshot it downloads?
[00:54:29] *** Quits: paradoxiology (paradoxiol@237710B7.6BC67377.D019BDD0.IP) (Ping timeout)
[00:54:41] <aatch> mib_fn5o7o, yep.
[00:55:51] *** Joins: isaacd (me@moz-6902374D.dhcp.oxfr.ma.charter.com)
[00:56:17] <ChrisMorgan> mib_fn5o7o: `./configure --local-rust --local-rust-root=/path/to/root`, by the looks of it.
[00:56:36] <aatch> ChrisMorgan, I'm not sure if that works.
[00:57:39] <aatch> mib_fn5o7o, why do you want to anyway?
[00:58:02] <ChrisMorgan> aatch: I took a decko at configure and mk/stage0.mk, looks to me like it should.
[00:58:45] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[00:58:59] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[00:59:14] <mib_fn5o7o> aatch: It's a theoretical approach on how inserting a compiler backdoor would work for an intro CS class. 
[00:59:17] <dbaupp> --local-rust* is (I believe) untested, and so likely broken; also compiling stage0 with anything other than the snapshot may be tricky.
[00:59:53] *** Quits: icebattle (icebattle@8A14A542.EBE2EE2B.C7CEC4ED.IP) (Quit: Leaving)
[01:00:15] *** Joins: icebattle (icebattle@8A14A542.EBE2EE2B.C7CEC4ED.IP)
[01:00:15] <mib_fn5o7o> dbaupp: Hmm ok. I will give it a shot to see what happens.
[01:01:13] <SingingBoyo> really not convinced by the change to do.  I know there's no really nice solution, but it's making evict's code even uglier :/
[01:01:17] <ChrisMorgan> At a quick look, it looks entirely reasonable what it does.
[01:01:21] <aatch> intro CS? I never saw anything like this in intro CS classes. It was all basic "how to program" stuff.
[01:01:40] <SingingBoyo> Maybe we just need a nicer way of combining groups of options...
[01:02:33] <mib_fn5o7o> aatch: Well not really intro-CS but rather this is something new to me so the depth that I am initially exploring it to isn't really noteworthy.. 
[01:03:57] <isaacd> Running `rustc --test something.rs` from a compile of yesterday's Rust master gives me `/usr/bin/ld: cannot find -lrustrt`, and indeed I can't find librustrt installed anywhere (though it is in the rust build directory).  Did I do something wrong?
[01:04:07] <ChrisMorgan> isaacd: rebuild, it was broken briefly.
[01:04:15] <aatch> isaacd, blame acrichto 
[01:04:16] <isaacd> ChrisMorgan: okay, thanks :)
[01:04:37] <acrichto> isaacd: sorry about that :( if you update your compiler though it'll work!
[01:04:48] <isaacd> acrichto: updating now :)
[01:04:51] <aatch> acrichto, just teasing :P
[01:04:53] <ChrisMorgan> You'll probably need to run `make clean` before `make`, BTW.
[01:04:58] <isaacd> oh okay
[01:05:26] * ChrisMorgan :-( apologises for ruining the nice curve of smileys
[01:05:44] <isaacd> is the procedure `git pull && ./configure --prefix=/where/ever && make && make install` normally a right one for updating rust master?
[01:06:08] <ChrisMorgan> Should do it.
[01:06:11] <isaacd> cool.
[01:06:36] <ChrisMorgan> ./configure won't normally be necessary; the Makefile is actually imbued with the power to run it itself if it needs to update itself.
[01:06:58] <aatch> I can hardly talk about breaking the compiler, since I made one change that roughly doubled compile times and another that jump memory usage by like 25%. (I fixed the first one, and mostly fixed the second one)
[01:07:17] <isaacd> I've been setting a different prefix for each day I build rust, so that I have clean snapshots of each version in the unlikely event that it's useful
[01:07:31] <isaacd> thus, re-running configure
[01:07:44] <isaacd> does that rebuild everything unnecessarily? :P
[01:07:55] * ChrisMorgan doesn't know
[01:08:14] *** Quits: ricepuddin (graham@moz-7D68765A.cable.virginm.net) (Ping timeout)
[01:09:11] <dbaupp> isaacd: iirc it shouldn't rebuild LLVM
[01:09:20] <dbaupp> (unless it has to)
[01:09:38] <dbaupp> but everything else likely requires to be rebuild on a fresh pull anyway.
[01:09:42] <dbaupp> *rebuilt
[01:09:49] <isaacd> right
[01:10:33] <isaacd> someone fixed an issue with deriving Eq since last week so I am pretty happy with updating despite the slowness of building :)
[01:10:48] <isaacd> I'm trying out writing persistent data structures in Rust
[01:11:37] <dbaupp> what issue did deriving(Eq) have?
[01:12:02] <SingingBoyo> 'linking with 'cc' failed'... Does that fall under the 'go rebuild cause someone broke it'?
[01:12:50] <Luqman> SingingBoyo: whats the error exactly?
[01:12:57] <isaacd> dbaupp: Something related to deriving Eq for structs/enums containing Rc members.  I could give you a test case but there's no point now that it's fixed :P
[01:13:24] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[01:13:38] <ChrisMorgan> SingingBoyo: make clean and make again. It's part of the known problem situation.
[01:14:07] *** Quits: zaphod_b (ford_p@moz-CCE57F2F.eblcom.ch) (Client exited)
[01:15:59] *** Joins: jensnockert (jensnocker@moz-6EE759F7.afb.bredband2.com)
[01:16:16] *** Joins: canhtak (canhtak@moz-A53E1151.wl.t.ulaval.ca)
[01:17:35] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[01:17:41] <aatch> isaacd, (dbaupp wrote most the deriving code, hence his interest)
[01:17:57] <isaacd> ok i'll find the test case :P
[01:18:03] *** Quits: jensnockert (jensnocker@moz-6EE759F7.afb.bredband2.com) (Ping timeout)
[01:18:04] <dbaupp> isaacd: don't worry
[01:18:27] *** Quits: Kingsley (kingsley@9B172CBE.BEA5C56D.DF4B730F.IP) (Ping timeout)
[01:18:30] <dbaupp> isaacd: (fwiw, I'd actually guess it was a change to Rc, since I don't recall anything changing in deriving recently; but it doesn't matter.)
[01:18:31] *** Joins: lfox (lfox@moz-B8648F0F.nycmny.fios.verizon.net)
[01:19:09] <jmgrosen> the docs for std::io use "File::open(blah).lines()" as an example -- where is .lines() defined?
[01:19:36] *** Joins: Kingsley (kingsley@9B172CBE.BEA5C56D.DF4B730F.IP)
[01:19:43] *** Joins: paradoxiology (paradoxiol@237710B7.6BC67377.D019BDD0.IP)
[01:19:48] <jmgrosen> it's not in Reader, where I would have expected it
[01:20:35] <ChrisMorgan> jmgrosen: http://static.rust-lang.org/doc/master/std/str/trait.StrSlice.html#tymethod.lines is the only lines in libstd
[01:21:20] <jmgrosen> ChrisMorgan, okay, thanks -- perhaps the docs for std::io need to be changed, then
[01:21:21] *** Quits: nkoep (nik@moz-55CF6C2C.pool.mediaways.net) (Client exited)
[01:21:30] <ChrisMorgan> jmgrosen: prolliably.
[01:21:31] *** Quits: bytewise (bytewise@moz-6075ED52.adsl.alicedsl.de) (Quit: bytewise)
[01:21:36] <aatch> jmgrosen, well you should be using std::rt::io at the moment.
[01:21:47] <aatch> (which will eventually replace std::io)
[01:21:58] <jmgrosen> aatch: as far as I know, std::io has been replaced by std::rt::io
[01:22:07] <jmgrosen> std::rt::io doesn't exist anymore
[01:22:09] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[01:22:30] <jmgrosen> and the API for std::io looks like what std::rt::io used to be :P
[01:22:41] <diverse> damn, all that talk about using `[]` and `!()` for `<>` was pure bikeshed. Sometimes I wonder if it was worth the time reading all that backlog...
[01:23:17] * diverse sighs
[01:23:19] *** Joins: Elw_Elfo (ircap@moz-D6AC70D5.dynamic.jazztel.es)
[01:23:32] <isaacd> dbaupp: "struct Foo { ptr : std::rc::Rc<int> }", former errors "error: mismatched types: expected `&&std::rc::Rc<int>` but found `&std::rc::Rc<int>` (expected &-ptr but found struct std::rc::Rc)", "error: failed to find an implementation of trait std::cmp::Eq for std::rc::Rc<int>"
[01:23:45] <aatch> jmgrosen, ah, you are correct.
[01:23:51] <isaacd> maybe Rc just didn't have an Eq instance last week
[01:23:57] *** Quits: Elw_Elfo (ircap@moz-D6AC70D5.dynamic.jazztel.es) (Quit: • IRcap • 8.6 •)
[01:23:57] <isaacd> I mean impl
[01:24:14] <isaacd> and I got confused because of the first line of the error message
[01:24:23] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[01:24:34] <aatch> diverse, well Rust used to use '[]' for generics once upon a time.
[01:25:27] <aatch> (before my time though)
[01:26:09] <isaacd> If I wanted to try and improve some of Rust's error messages, how big a project would that be?
[01:26:27] <tikue> i'm pretty sure std::rt::io finished its move to std::io 
[01:26:56] *** Quits: mark_edward (mark@C3432E59.E44DCB14.95579CE8.IP) (Ping timeout)
[01:29:25] *** kimundi is now known as zz_kimundi
[01:30:02] <aatch> isaacd, depends on the message.
[01:30:11] <isaacd> e.g. the error message for creating a struct with Foo{val = bar} instead of Foo{val: bar} is misleading
[01:30:36] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Client exited)
[01:30:45] *** Quits: Sorella (quildreen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Client exited)
[01:30:46] <isaacd> also a warning for using `--x` could be nice if that were easy to write
[01:30:56] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[01:31:03] <aatch> rusti: struct Foo { val: int } let a = Foo { val = bar };
[01:31:03] -rusti- <anon>:9:45: 9:46 error: expected `;` but found `{`
[01:31:03] -rusti- <anon>:9          struct Foo { val: int } let a = Foo { val = bar };
[01:31:03] -rusti-                                                       ^
[01:31:04] -rusti- application terminated with error code 101
[01:31:14] <aatch> That one ^^
[01:31:34] <aatch> rusti: struct Foo { val: int } let a = Foo { val: 1 };
[01:31:35] -rusti- <anon>:9:37: 9:38 warning: unused variable: `a` [-W unused-variable (default)]
[01:31:35] -rusti- <anon>:9          struct Foo { val: int } let a = Foo { val: 1 };
[01:31:35] -rusti-                                               ^
[01:31:35] -rusti- ()
[01:32:03] <isaacd> nope, "error: expected one of `;`, `}` but found `{`"
[01:32:09] *** Quits: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net) (Quit: I'm sure it's perfectly safe)
[01:32:13] <isaacd> let's see if I can get rusti to say that
[01:32:29] <aatch> So that one is a little tricky, since it's a parse error, but shouldn't be too hard.
[01:32:48] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[01:33:02] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[01:33:07] <isaacd> rusti: struct Foo { val: int } Foo { val = 1 };
[01:33:07] -rusti- <anon>:9:37: 9:38 error: expected one of `; }` but found `{`
[01:33:07] -rusti- <anon>:9          struct Foo { val: int } Foo { val = 1 };
[01:33:07] -rusti-                                               ^
[01:33:08] -rusti- application terminated with error code 101
[01:33:50] <aatch> isaacd, Ah. Same cause though.
[01:33:53] <isaacd> yeah
[01:34:24] <isaacd> In this case the message is confusing because the mistake is further forward in the code than where it points the error msg at
[01:34:36] <isaacd> and its list of possible expected things doesn't include the right one
[01:34:44] <dbaupp> isaacd: ah, yes, that error message means that Rc doesn't have an Eq instance (and one was added recently)
[01:35:02] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[01:35:13] *** Quits: mib_fn5o7o (Mibbit@45136FAB.A9DA0237.DDE5D3F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[01:35:22] <isaacd> dbaupp: is there maybe a way for the second line of the error to come first?
[01:35:30] <isaacd> the one that says Rc didn't have Eq, that is
[01:35:45] <aatch> isaacd, ok, shouldn't actually be that hard.
[01:35:51] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[01:36:32] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Quit: Leaving...)
[01:36:33] <dbaupp> isaacd: I've tried to make the error messages from deriving better, but I couldn't get anything to work :(
[01:36:39] <isaacd> aw :(
[01:37:01] * dbaupp will try again soon
[01:37:07] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[01:37:18] <aatch> isaacd, the primary issue is making sure you dont make them more misleading.
[01:37:28] <isaacd> aatch: yeah
[01:37:32] <isaacd> aatch: for the parse error, I don't know what I want the error msg to look like, just that the current one is more confusing to me than "error: Parse error" would be
[01:37:39] *** Joins: pradeep (pradeep@5AB4884B.FCC4549.14D5B978.IP)
[01:38:18] <aatch> isaacd, well, it's because `Foo;` is a valid expression.
[01:38:31] <aatch> constructing a unit struct.
[01:39:23] <aatch> What it does is check for 'ident:' after the '{' to see if it's a struct literal.
[01:39:39] <isaacd> aatch: ah
[01:40:01] <isaacd> so it needs to add "ident:" to the error msg in the list of possible things it expected there?
[01:40:02] *** Quits: notmatt (notmatt@CC62CF7E.1E7FDFDB.A82DBDDB.IP) (Client exited)
[01:40:37] * isaacd hasn't looked at how rust's parser generates error messages yet
[01:41:02] *** Joins: vmx (vmx@moz-3F65CCF1.pools.arcor-ip.net)
[01:41:25] <aatch> isaacd, not exactly. But given that I don't think `Ident { thing }` is valid, it might be possible to fail earlier.
[01:41:36] *** Quits: tautologico (iorek@E0D804D3.CFE755C8.C27E1635.IP) (Quit: zzz)
[01:41:45] *** Joins: tautologico (iorek@E0D804D3.CFE755C8.C27E1635.IP)
[01:41:54] <vmx> is alexcrichton here? (acrichto sounds promising :)
[01:42:04] <aatch> vmx, yes
[01:42:40] <vmx> acrichto: i just thought that irc might be easier than thousands of github comments (in regards to #10790)
[01:43:11] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Quit: ChatZilla 0.9.90.1 [Firefox 25.0.1/20131112160018])
[01:43:27] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[01:43:48] <mletterle> eh.. maybe I should start on that rust presentation I'm supposed to give for my company's internal Lunch and Learn tomorrow...
[01:43:56] <kmc> strcat: i ended up writing a .c file with asm("mov %%fs:0x70, %0") and then LD_PRELOADing it into gdb :)
[01:44:06] <strcat> heh
[01:44:11] <ChrisMorgan> r? https://github.com/mozilla/rust/pull/10793 (lots of Vim improvements)
[01:44:32] *** Joins: Jesse_ (jruderman@moz-5973C6FA.oc.oc.cox.net)
[01:44:33] <diverse> vim improvements are good :)
[01:44:35] <kmc> vimprovements
[01:44:40] <acrichto> vmx: ah yes I am here
[01:44:46] <diverse> kmc: :)
[01:44:57] <acrichto> vmx: so it sounds like the children aren't getting the argv that we're expecting, so I'm curious what the argv for the children ar
[01:45:05] *** Quits: Kingsley (kingsley@9B172CBE.BEA5C56D.DF4B730F.IP) (Ping timeout)
[01:45:07] *** Quits: Jesse (jruderman@moz-5973C6FA.oc.oc.cox.net) (Ping timeout)
[01:45:28] <mletterle> Wow.. emacs stuff hasn't been updated since before October.. I thought I was behind.. but nope.
[01:45:44] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[01:45:48] *** Parts: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net) ()
[01:45:58] *** Joins: Kingsley (kingsley@9B172CBE.BEA5C56D.DF4B730F.IP)
[01:46:06] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[01:46:08] * ChrisMorgan wonders how many people use it
[01:46:16] * diverse uses it
[01:46:29] <diverse> oh wait you mean the emacs one?
[01:47:04] <diverse> ChrisMorgan: ^
[01:47:21] *** Joins: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net)
[01:47:22] <ChrisMorgan> I mean emacs.
[01:47:24] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[01:47:33] <ChrisMorgan> (Well, more specifically, rust and emacs.
[01:47:36] <aatch> ChrisMorgan, done.
[01:47:37] <diverse> consider what I said is () :P
[01:47:37] <ChrisMorgan> )
[01:47:49] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[01:48:51] <ChrisMorgan> aatch: you can't possibly have tested it all in that time...
[01:48:55] <diverse> thanks aatch
[01:49:06] <aatch> ChrisMorgan, no, I just trust you.
[01:49:23] <ChrisMorgan> That's not the idea of a review process...
[01:49:40] <aatch> I read through it, and the changes seem reasonable
[01:50:03] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[01:50:29] <derek_c> how do you use format! to get a string with a certain width?
[01:50:37] <aatch> ChrisMorgan, eh, it's a vim file. I get your point, but given that you wrote most the current one...
[01:51:08] <pradeep> hi, I have some customizations regarding Emacs rust-mode
[01:51:21] <pradeep> like mark-defun, move by functions, etc.
[01:51:33] <mletterle> I use the emacs one
[01:51:42] <mletterle> and right now indenting seems wrong.
[01:51:48] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[01:51:55] <mletterle> but I haven't bothered trying to do anything with it.
[01:52:04] *** Joins: mark_edward (mark@moz-DCB0B750.lightspeed.cicril.sbcglobal.net)
[01:52:40] <pradeep> can I directly submit a pull request for it? (first time contributing to Rust)
[01:52:54] <diverse> pradeep: why not?
[01:53:34] <pradeep> ok, I'll do that then :)
[01:53:50] *** Joins: alan (alan@32702EE8.939109B2.FB082A98.IP)
[01:54:10] *** Joins: docbrown (docbrown@5CE9D448.F0B9EFB2.7F8758CE.IP)
[01:54:31] <SiegeLord> derek_c: Do you mean padding?
[01:54:49] <mletterle> pradeep: please do!
[01:55:01] <derek_c> SiegeLord: I guess
[01:55:38] <SiegeLord> rusti: format!("|{:<5}|", 1)
[01:55:39] -rusti- ~"|1    |"
[01:56:03] <SiegeLord> Or > to align it to the right
[01:56:53] *** Quits: SingingBoyo (brandon@DA28FB90.A5D0D593.4F048BDC.IP) (Ping timeout)
[01:56:54] <SiegeLord> rusti: format!("|{:>$1}|", 1, 5)
[01:56:55] -rusti- <anon>:9:17: 9:27 error: unterminated format string
[01:56:55] -rusti- <anon>:9          format!("|{:>$1}|", 1, 5)
[01:56:55] -rusti-                           ^~~~~~~~~~
[01:56:55] -rusti- error: aborting due to previous error
[01:56:56] -rusti- application terminated with error code 101
[01:56:56] *** Joins: SingingBoyo (brandon@DA28FB90.A5D0D593.4F048BDC.IP)
[01:57:22] <vmx> acrichto: sorry it takes i while. i try to write the output into a file, which isn't that trivial if you're a rust newbie
[01:57:34] <SiegeLord> rusti: format!("|{:>1$}|", 1, 5)
[01:57:35] -rusti- ~"|    1|"
[01:57:45] <SiegeLord> This formatting stuff is pretty neat
[01:58:00] <acrichto> vmx: no worries! you can also set up the children to print to the same file descriptors
[01:58:14] <acrichto> vmx: the io array should have something like [InheritFd(0), InheritFd(1), InheritFd(2)]
[01:58:23] <derek_c> SiegeLord: thanks that's exactly what I was looking for :)
[01:58:58] <vmx> acrichto: tbh, i've no clue what you're talking about :)
[01:59:18] <acrichto> vmx: oh so in the ProcessConfig that's set up, there's an 'io' variable
[01:59:35] <acrichto> vmx: if you set that to the array above, it means that the children will print their output to the parent's stdout/stderr
[01:59:48] <acrichto> vmx: you may need to import InheritFd from std::io::process though
[02:00:40] <vmx> acrichto: got it. will try
[02:00:52] *** Quits: SingingBoyo (brandon@DA28FB90.A5D0D593.4F048BDC.IP) (Ping timeout)
[02:02:26] *** Joins: mib_effiw1 (Mibbit@moz-EDB20D57.dsl.dynamic.sonic.net)
[02:02:52] *** Quits: mib_effiw1 (Mibbit@moz-EDB20D57.dsl.dynamic.sonic.net) (Quit: http://www.mibbit.com ajax IRC Client)
[02:03:45] *** Quits: csherratt (csherratt@moz-CAF331EA.cable.teksavvy.com) (Quit: csherratt)
[02:04:08] *** Joins: SingingBoyo (brandon@DA28FB90.A5D0D593.4F048BDC.IP)
[02:04:23] <kmc> in my version of rustc (67d7be0 2013-10-29), rt::global_heap::malloc_raw is #[fixed_stack_segment] and this (?) makes it check for having 2MB of stack free, and it doesn't take much recursion in my program for that not to be the case
[02:04:33] <kmc> will this problem just go away on master rust, which does away with #[fixed_stack_segment]?
[02:04:39] *** Quits: mye (mye@moz-D9E6B585.dip0.t-ipconnect.de) (Ping timeout)
[02:04:43] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[02:04:50] <acrichto> kmc: fixed_stack_segment has been removed in master
[02:05:08] <acrichto> oh wait nvmd, needed to keep reading
[02:05:09] <kmc> what determines the size of a task's stack, anyway?
[02:05:12] <docbrown> I'm so very happy to see the "enum mod" proposal. I was just wishing this morning that Rust had something like C++11's "enum class".
[02:05:29] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[02:05:29] <acrichto> kmc: the task spawner determines the stack size, and right now it's a prayer that C doesn't overflow and an abort if rust overflows
[02:05:33] *** Joins: mib_vm4bh4 (Mibbit@BD56BC05.A8C88833.28033D54.IP)
[02:05:33] <diverse> docbrown: link?
[02:05:43] *** Quits: mib_vm4bh4 (Mibbit@BD56BC05.A8C88833.28033D54.IP) (User has been banned from Mozilla (no spamming here))
[02:06:01] <docbrown> diverse: https://github.com/mozilla/rust/issues/10090
[02:06:06] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[02:06:08] <vmx> acrichto: i get this during compilation (that's cased by the InheritFd()s: rustc: /home/vmx/src/rust/rust/src/llvm/lib/IR/Instructions.cpp:281: void llvm::CallInst::init(llvm::Value*, llvm::ArrayRef<llvm::Value*>, const llvm::Twine&): Assertion `(i >= FTy->getNumParams() || FTy->getParamType(i) == Args[i]->getType()) && "Calling a function with a bad signature!"' failed.
[02:06:35] <acrichto> vmx: hm, I've seen that before, try lifting the array outside of the struct definition into a local, and then use the local to pass it into a field of the struct
[02:06:48] <vmx> k, cool
[02:06:48] <acrichto> vmx: something liek "let io = ...; let config = ProcessConfig { io: io, ... }"
[02:07:37] <kmc> acrichto: so on master rust, functions which call C functions won't check for having 2MB of stack free?
[02:07:49] <kmc> or does the check still happen even though there's no attribute anymore
[02:07:51] <acrichto> kmc: correct, that's the idea behind starting with a large stack
[02:07:52] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[02:07:54] <kmc> ok
[02:08:08] <acrichto> kmc: in theory we'll have a guard page to prevent C stack overflow
[02:08:21] <headcrash> are there any books available on rust yet or is it pretty much limited to the tutorial on rust-lang.org?
[02:08:27] <cmr> headcrash: rust for rubyists
[02:09:31] <vmx> acrichto: finally i have output! the os::args() is an array of the filename. it seems to grow by one copy for every child
[02:09:50] <acrichto> vmx: interesting!
[02:09:58] <acrichto> vmx: so it's ~[filename, filename, filename, ... ] ?
[02:10:28] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[02:10:31] <vmx> acrichto: yes e.g. args: ~[~"./vmx-issue-10626", ~"./vmx-issue-10626"]
[02:10:45] <kmc> and the default size is std::rt::env::min_stack() == 4MB?
[02:11:01] <acrichto> kmc: 2000000 currently
[02:11:09] <acrichto> vmx: hm, that is not good at all
[02:11:14] <acrichto> vmx: what system are you on?
[02:11:26] <kmc> acrichto: ah it seems to be 4MB in my version... or set by RUST_MIN_STACK
[02:11:32] <vmx> acrichto: debian 64-bit
[02:11:36] <acrichto> kmc: oh I suppose that changed as well
[02:11:39] <kmc> anyway, thanks acrichto, I think I understand what's going on now :)
[02:11:40] <strcat> we really need a guard page + LLVM needs to support -fcheck-stack :(
[02:12:16] <strcat> then we can just say calling C code won't overflow the stack as long as a) the C code doesn't have uninit frames larger than the guard size or b) it's compiled with -fcheck-stack
[02:12:22] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Ping timeout)
[02:12:26] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[02:13:26] <acrichto> vmx: hm, I feel like this is some related codegen problem rather than a libuv problem, but I'm not sure about that...
[02:13:42] *** Quits: sbalmos (quassel@CA5677B6.576D0C1.ED2EFC1B.IP) (Connection reset by peer)
[02:13:45] <vmx> acrichto: wait
[02:13:46] *** Joins: sbalmos (quassel@CA5677B6.576D0C1.ED2EFC1B.IP)
[02:14:05] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[02:14:07] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[02:14:44] *** Quits: jlong (jlong@moz-6DFDE846.socal.res.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[02:15:14] <vmx> acrichto: false alarm. my code was wrong. i diffed it again with the original code and only added the output of os::args. now it's printing out "hello?". let me have a closer look
[02:17:29] *** Joins: csherratt (csherratt@moz-CAF331EA.cable.teksavvy.com)
[02:18:07] <wycats_> pcwalton: thanks for the RT
[02:18:15] <pcwalton> no problem
[02:18:25] <mletterle> ChrisMorgan: ping
[02:18:35] <wycats_> mmalecki: if you get it working on solaris, let me know
[02:18:37] <ChrisMorgan> mletterle: pong
[02:18:47] <wycats_> at some point we're gonna need to support solaris customers
[02:19:09] <mletterle> ChrisMorgan: You were playing with rust logos a while back.. do you have any good sized ones, or know where one could be found?
[02:19:13] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[02:19:35] <ChrisMorgan> mletterle: I was working only at 16x16; you want the larger one, I suppose?
[02:19:41] <vmx> acrichto: when i comment out the "println" and "error" from the code, so that i see the output from os::args() more easily, i always get: args: ~[~"./vmx-issue-10626", ~"child"]
[02:20:05] <mletterle> ChrisMorgan: Indeed.. wasn't sure if you were working off a larger one or making one.. no worries, I think this'll do: http://www.blogcdn.com/www.engadget.com/media/2013/04/mozilla-rust.jpg
[02:20:15] <ChrisMorgan> mletterle: https://github.com/graydon/rust-www/tree/gh-pages/logos
[02:20:37] <ChrisMorgan> www.rust-lang.org needs a press page with those logos
[02:20:39] <mletterle> eh... http://mozorg.cdn.mozilla.net/media/img/styleguide/identity/mozilla/rust.png
[02:20:46] <mletterle> yes please!
[02:20:55] <acrichto> vmx: hm, sounds mysterious... certainly needs some more investigation
[02:20:56] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[02:21:07] *** Joins: ekiara (emk@moz-9B1940E9.tech.co.ke)
[02:21:09] <mletterle> oh beautiful, thanks ChrisMorgan !
[02:21:29] <vmx> acrichto: ok. i'll leave a comment with the code
[02:22:09] <acrichto> vmx: thanks for looking into it!
[02:23:40] *** Joins: vmx_ (vmx@moz-C9BC1A9E.pools.arcor-ip.net)
[02:23:53] *** Joins: frogzilla (Mibbit@moz-3E85D6A6.static.tpgi.com.au)
[02:24:36] *** Quits: vmx (vmx@moz-3F65CCF1.pools.arcor-ip.net) (Ping timeout)
[02:25:07] *** Quits: frogzilla (Mibbit@moz-3E85D6A6.static.tpgi.com.au) (Quit: http://www.mibbit.com ajax IRC Client)
[02:25:13] *** Joins: telotortium (rmi1@moz-4341776B.hsd1.il.comcast.net)
[02:26:27] <vmx_> acrichto: thanks for your time. i think i've posted everything relevant. g'night
[02:27:25] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[02:28:19] *** Quits: reyre (reyre@moz-89E9865B.com) (Ping timeout)
[02:28:31] *** Quits: moostik (Icedove@moz-5159DC42.w92-151.abo.wanadoo.fr) (Ping timeout)
[02:32:20] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[02:32:26] *** Quits: vmx_ (vmx@moz-C9BC1A9E.pools.arcor-ip.net) (Quit: Leaving)
[02:32:48] *** Quits: canhtak (canhtak@moz-A53E1151.wl.t.ulaval.ca) (Quit: canhtak)
[02:34:05] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[02:35:01] *** Quits: telotortium (rmi1@moz-4341776B.hsd1.il.comcast.net) (Ping timeout)
[02:35:10] *** Quits: Kingsley (kingsley@9B172CBE.BEA5C56D.DF4B730F.IP) (Ping timeout)
[02:36:09] *** Joins: Kingsley (kingsley@9B172CBE.BEA5C56D.DF4B730F.IP)
[02:36:53] *** Joins: canhtak (canhtak@moz-A53E1151.wl.t.ulaval.ca)
[02:37:34] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[02:37:41] *** Quits: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net) (Connection reset by peer)
[02:38:45] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Connection reset by peer)
[02:38:45] <kmc> does rustc do any checking that unreachable!() calls are unreachable, or is it purely an optimization hint which will break everything if executed
[02:39:04] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[02:39:08] <strcat> neither
[02:39:21] <strcat> it's just fail!("blah blah unreachable")
[02:39:23] <Eridius> kmc: I'm pretty sure it compiles to a fail
[02:39:25] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[02:39:38] <Eridius>     macro_rules! unreachable (() => (
[02:39:38] <Eridius>         fail!("internal error: entered unreachable code");
[02:39:39] <Eridius>     ))
[02:40:23] <strcat> it would be nice if failure just printed a stack trace in debug builds
[02:40:32] <kmc> ah
[02:40:34] <strcat> wouldn't need those hacks
[02:40:47] *** Quits: brson_ (brson@6A848D32.C1B840DD.76F66111.IP) (Quit: leaving)
[02:40:50] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[02:41:48] <kmc> is there any way to do a static assertion of unreachability?
[02:42:22] <strcat> as in an unsafe one?
[02:42:27] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[02:42:32] *** Quits: SingingBoyo (brandon@DA28FB90.A5D0D593.4F048BDC.IP) (Ping timeout)
[02:43:04] <kmc> there's a spot where I want to put "break" for clarity, but rustc warns it's unreachable, but I want a warning if that's ever no longer the case
[02:43:08] *** Quits: alan (alan@32702EE8.939109B2.FB082A98.IP) (Quit: alan)
[02:43:31] <kmc> boo well the unreachable!() call also triggers the warning
[02:43:54] <Eridius> unreachable!() is meant for code that the compiler cannot statically assert is unreachable
[02:44:57] <aatch> kmc, it's pretty rare that you have a situation like that. The only exception is in `match`, but those have exhaustiveness checking.
[02:45:45] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[02:45:55] *** Joins: SingingBoyo (brandon@DA28FB90.A5D0D593.4F048BDC.IP)
[02:45:57] <kmc> aatch: I have a return inside loop { ... } and the code after the loop { ... } is statically proven unreachable
[02:46:02] <kmc> (because there's no "break" in the loop)
[02:46:09] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[02:46:36] <kmc> but in this case I can easily revise the control flow to be less weird, so whatever
[02:46:47] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[02:47:27] *** Quits: sprang (sprang@moz-920A95C4.hsd1.ca.comcast.net) (Quit: sprang)
[02:47:30] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[02:47:36] <aatch> kmc, yeah, I'm not sure what the case is that you'd have the other side of the loop be reachable without it either being intended or causing an error
[02:48:11] *** Quits: Kingsley (kingsley@9B172CBE.BEA5C56D.DF4B730F.IP) (Ping timeout)
[02:48:13] *** Quits: paradoxiology (paradoxiol@237710B7.6BC67377.D019BDD0.IP) (Quit: Leaving...)
[02:48:35] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[02:48:58] *** Joins: Kingsley (kingsley@9B172CBE.BEA5C56D.DF4B730F.IP)
[02:49:02] <aatch> If your function returns a value, then the block after loop becomes reachable, you have a code path that doesn't return a value and that's an error.
[02:50:06] <isaacd> How do I document my code to make docs like this: http://static.rust-lang.org/doc/master/std/hashmap/struct.HashSet.html ?
[02:50:08] <isaacd> I tried running `rustdoc mycode.rs` and it told me `rustdoc requires a \#[link(name="foo")] crate attribute`.  Putting `#[link(name="foo")]` at the top of mycode.rs didn't change the error.
[02:50:22] <dbaupp> isaacd: you need a semicolon
[02:50:30] <dbaupp> `#[link(name="foo")];`
[02:50:34] <isaacd> dbaupp: whoops thanks
[02:51:02] *** Quits: SingingBoyo (brandon@DA28FB90.A5D0D593.4F048BDC.IP) (Ping timeout)
[02:51:40] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[02:52:20] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[02:52:33] *** Quits: headcrash (Mibbit@moz-3B82F90D.sub-174-227-193.myvzw.com) (Quit: http://www.mibbit.com ajax IRC Client)
[02:53:38] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[02:54:06] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[02:54:12] *** Joins: SingingBoyo (brandon@DA28FB90.A5D0D593.4F048BDC.IP)
[02:54:15] <isaacd> dbaupp: but what does that attribute mean?  I can't find a description in the manual, and the docs suggest it means the entire file is inside a module named "foo"
[02:54:47] * isaacd would submit doc improvements if I was sure what the correct things to say were
[02:55:18] <isaacd> by "the docs suggest" I mean the docs generated by rustdoc
[02:55:22] <isaacd> when I run it
[02:55:32] <isaacd> sorry for being confusing/confused :)
[02:56:25] <dbaupp> isaacd: I think it's basically saying "this crate is called <whatever>"
[02:56:26] <SiegeLord> From a certain point of view, the fact that that attribute is required is a bug
[02:56:50] <kmc> yeah that's about crates not modules
[02:57:09] *** Parts: prudhvi (p@moz-154A460A.supr.io) ()
[02:57:18] <SiegeLord> As it conflicts with rustpkg... but which one is right, is left up in the air
[02:57:28] <SiegeLord> Today's meeting made me hopeful of a redesign of rustpkg
[02:57:45] * isaacd reading http://static.rust-lang.org/doc/master/rust.html#crates-and-source-files hoping it will explain the relation of modules, crates and files to me
[02:58:11] <SiegeLord> There is a module tutorial somewhere which is better
[02:58:51] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[03:00:33] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[03:00:41] <SiegeLord> I wonder where it is... I can't find it anywhere :3
[03:02:05] <dbaupp> http://static.rust-lang.org/doc/master/tutorial.html#crates-and-the-module-system
[03:02:07] <dbaupp> maybe?
[03:02:39] <pcwalton> oh geez
[03:02:41] <SiegeLord> Oh, I guess it's integrated in the tutorial... yeah, that looks like it
[03:02:48] <pcwalton> I spent over an hour tracking down why the scheduler was crashing
[03:02:57] <diverse> :(
[03:02:58] <pcwalton> turns out I wrote impl<T> Borrowed<T> instead of impl<T> Drop for Borrowed<T>
[03:03:05] <pcwalton> and "drop" was never called
[03:03:06] <pcwalton> ahaha
[03:03:35] <dbaupp> #[warn(method_called_drop_outside_of_drop_trait)] ;P
[03:03:39] <pcwalton> I wonder if we can warn for that
[03:04:27] *** Joins: jensnockert (jensnocker@moz-6EE759F7.afb.bredband2.com)
[03:05:37] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[03:06:09] *** Quits: jensnockert (jensnocker@moz-6EE759F7.afb.bredband2.com) (Ping timeout)
[03:06:18] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[03:06:35] <pcwalton> people are still arguing with me that dynamic size calculations are the right thing for Rust
[03:06:36] * pcwalton is amazed
[03:06:51] <aatch> pcwalton, dynamic size calculations for what? Stack sizes?
[03:07:07] <pcwalton> when you pass a type parameter, calculate its size dynamically and don't monomorphize
[03:07:20] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[03:07:24] <pcwalton> also if you have e.g. struct Foo<T,U> { x: T, y: U }
[03:07:34] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Ping timeout)
[03:07:36] <pcwalton> to access "y" you have to calculate the size of x at runtime and round up due to alignment
[03:07:47] <Eridius> pcwalton: o_OOO
[03:07:47] <pcwalton> we tried that in Rust 0.1
[03:07:54] <pcwalton> we actually implemented it and made it work
[03:08:08] <pcwalton> we had "type descriptors" and "derived type descriptors" and "derived derived type descriptors"
[03:08:11] <pcwalton> it was horrible :P
[03:08:13] <Eridius> wat
[03:08:17] <pcwalton> also the code size was *worse* than monomorphization
[03:08:21] <pcwalton> because of the dynamic size calculations
[03:09:10] <pcwalton> there is a paper on this, it's called "intensional type analysis"
[03:09:17] <pcwalton> it might work for ML but not for a systems language
[03:09:42] <diverse> sigh
[03:09:47] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[03:09:48] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[03:10:08] <Eridius> pcwalton: can we go ahead and revert the `new` name changes?
[03:10:31] *** Joins: sprang (sprang@moz-7E6ECAD1.danastreet.live555.com)
[03:10:38] <pcwalton> sure
[03:11:57] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[03:12:09] <diverse> Eridius: you mean ::init() to ::new()?
[03:12:17] <Eridius> diverse: yes
[03:12:22] <diverse> \o/
[03:13:00] <Eridius> pcwalton: offhand I'm aware of std::Path and extra::Json being renamed. It also looks like std::rt::deque was created with init(). Is that it? I see other init()s in the source, but I assume they're not renamed new()s
[03:13:11] <pcwalton> there's some more in Servo but I think that's it.
[03:13:31] <Eridius> damn, the Path rename doesn't revert cleanly. Not surprising though
[03:13:40] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[03:13:48] *** Joins: jstevans (Instantbir@C8FA662C.9FF7733C.DDE5D3F6.IP)
[03:14:12] *** Quits: jweinberg (jweinberg_@3E5CF971.9533F93D.26E46D7D.IP) (Ping timeout)
[03:14:22] <SiegeLord> I wonder if somebody should write a web frontend to the mailing list like the D folks did, heh
[03:14:28] <SiegeLord> This gmane thing is scary...
[03:14:40] <SiegeLord> (in Rust, of course)
[03:14:55] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[03:15:03] *** Quits: zz_kimundi (kimundi@moz-87DF3113.dip0.t-ipconnect.de) (Ping timeout)
[03:16:34] <Eridius> oh hm, Json constructors weren't using ::new() to begin with. They were using the old Path convention of functions named after the type. Interesting
[03:17:52] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[03:18:00] <vky> Where is the binding syntax for pattern matching defined? Stumbled onto this issue, https://github.com/mozilla/rust/issues/7173, that's neat.
[03:18:27] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[03:18:30] *** Joins: zz_kimundi (kimundi@moz-D617C5E3.dip0.t-ipconnect.de)
[03:18:34] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[03:18:55] *** Joins: jweinberg (jweinberg_@3E5CF971.9533F93D.26E46D7D.IP)
[03:19:00] *** zz_kimundi is now known as kimundi
[03:19:46] *** Quits: Diamond (dick@moz-80556682.ks.ks.cox.net) (Client exited)
[03:19:50] <pcwalton> acrichto: r? https://github.com/mozilla/rust/pull/10791
[03:19:52] <Eridius> vky: I don't think that change needs doing anymore, since @ is going away
[03:19:58] <pcwalton> more de-Celling by RAII-ifying Local::borrow
[03:19:58] <isaacd> vky: well, @ is not continuing to be a sigil for Gc<>, so maybe @ can stay for that ticket
[03:20:01] *** Joins: p_adams (p_adams@moz-6E953D23.dhcp.stls.mo.charter.com)
[03:20:19] <pcwalton> also removes some rightward drift, although I had to work around the lack of a couple of missing language features
[03:20:23] <pcwalton> but we'll fix those
[03:20:23] <isaacd> (I don't think it's particularly pretty, but it seems fine)
[03:20:24] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[03:20:28] <pcwalton> anyway, 12 Cells gone
[03:20:31] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[03:20:42] <vky> Eridius, isaacd: the issue is more about documenting it, it's not in the tutorial and I didn't see it in the manual.
[03:20:51] *** p_adams is now known as yrdz
[03:21:21] <acrichto> assert!(self.sched == sched.sched().sched_id(),
[03:21:24] <acrichto> that's a lot of scheds
[03:21:28] <Eridius> vky: the tutorial does pattern matching in section 4.2
[03:21:42] <dbaupp> "I put a sched in your sched so you can schedule while you schedule"
[03:21:52] <Eridius> vky: and the manual does match in section 7.2.22
[03:21:56] <Yurume> sched-a-matic.
[03:23:40] <aatch> "who wants to be Chief Curator Of Cat Herding?" - dherman
[03:24:57] <vky> Eridius: right, but I'm not seeing anything about like the particular example huonw has in the issue, "match (1,2) { c@(a,b)..." where c prints as "(1, 2)". 
[03:25:19] *** Joins: echristo (echristo@4A478D49.F847711A.D4043753.IP)
[03:25:36] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[03:26:53] *** Joins: tcr (tcr@moz-1EBF1EAD.olin.edu)
[03:26:55] *** Quits: geoffhill (geoffhill@moz-738DC0DB.org) (Quit: )
[03:28:29] *** Quits: sbalmos (quassel@CA5677B6.576D0C1.ED2EFC1B.IP) (Client exited)
[03:29:39] <diverse> dbaupp: if you could schedule jails to scheduling, that would make sense.
[03:30:53] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Quit: Leaving.)
[03:31:12] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[03:31:14] *** Quits: Jesse_ (jruderman@moz-5973C6FA.oc.oc.cox.net) (Quit: Jesse_)
[03:31:15] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Input/output error)
[03:31:46] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[03:32:39] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[03:33:32] *** Joins: Jesse (jruderman@moz-5973C6FA.oc.oc.cox.net)
[03:34:39] <erickt1> hey folks, does anyone have an argument against adding a WithCapacity trait that implements a with_capacity(uint) fn? Taken along with container::Mutable* it allows us to generically load data into a structure
[03:35:02] *** Quits: maxiepoo_ (Max@moz-6F50ADE.hsd1.il.comcast.net) (Quit: maxiepoo_)
[03:35:31] <erickt1> Alternatives could be to add the `with_capacity()` constructor directly to MutableSet/MutableMap/etc
[03:36:34] <cmr> erickt1: sounds fine to me, but I don't think our current container heirarchy is all that sensical..
[03:36:42] <cmr> *sensible
[03:36:47] <aatch> erickt1, WithCapacity doesn't really make sense to me.
[03:36:58] <aatch> (as a trait)
[03:37:33] <erickt1> cmr: I agree, the container heirarchy needs a bunch more work. I think work stalled because of some ICEs in the type system that hopefully are solved
[03:37:34] <cmr> I agree it doesn't make sense, but neither does the rest of the traits (IMO)
[03:38:27] <erickt1> aatch: have a better place where I could put that functionality?
[03:39:07] <erickt1> I ran into a case where I couldn't use FromIterator
[03:39:19] *** Quits: Earnestly (earnest@88884C6.A3735F9C.39C00A7A.IP) (Ping timeout)
[03:39:28] <aatch> erickt1, not sure. Most containers have a concept of capacity, though I'm not sure if having it on *all* containers makes sense.
[03:40:00] <aatch> I'm just thinking that foo<T:WithCapacity>(...) just doesn't seem right to me.
[03:40:23] <erickt1> aatch: it wouldn't be on all containers, although it wouldn't be *that* bad to initialize, say, a TreeMap with a with_capacity that's a no-op
[03:40:31] <sfackler> acrichto: if I'm pulling drop out of util, should I just dump everything inside of util into the prelude while I'm at it?
[03:40:34] <aatch> erickt1, that's what I was thinking.
[03:40:41] <sfackler> with the possible exception of Void, what is that actually used for?
[03:40:53] <acrichto> what else is in there?
[03:41:13] <aatch> I mean, with_capacity is, almost by definition, an optimization.
[03:41:14] <sfackler> id, swap, replace, NonCopyable, Void
[03:41:19] <sfackler> Void seems really weird
[03:41:49] <sfackler> it's an empty enum with a single method "fn uninhabited(self) -> ! { match self {} }"
[03:41:50] <acrichto> I personally don't like the idea of any of those in the prelude
[03:41:55] <strcat> erickt1: perhaps add `new` and `with_capacity` to Container itself
[03:42:01] <acrichto> but we need to put them somewhere
[03:42:06] <strcat> with new as a default method implemented as with_capacity(0), dunno ;p
[03:42:14] * strcat shrugs
[03:42:16] <acrichto> I'd move drop for now, and we can figure out what to do with the others in a separate PR
[03:42:19] <sfackler> ok
[03:42:21] <erickt1> strcat: that also could work
[03:42:43] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Quit: Sharp)
[03:43:41] *** Quits: gandalf (zbraniecki@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: My lid went down)
[03:43:47] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[03:43:55] <erickt1> strcat: hrm. are there any containers that it wouldn't make sense to have a `fn new()`?
[03:43:57] <aatch> It definitely makes a bit more sense to me to have with_capacity on Container rather than a seperate trait.
[03:44:06] <cmr> erickt1: what use is a container if you can't create it?
[03:44:14] <cmr> Or are you thinking something that needs more information to create it?
[03:44:23] <erickt1> cmr: I was thinking that it's a container where you need to pass in more data
[03:45:02] <aatch> What container would you *need* to pass in more information?
[03:45:20] <cmr> A TreeMap could need a comparator function
[03:45:46] <sfackler> uh, doesn't "-> !" mean "this function never returns"?
[03:45:49] <cmr> The Container trait isn't very useful anyway, though.
[03:45:56] <cmr> sfackler: yep
[03:45:56] <erickt1> cmr: ah that's a good one. Or a HashMap with a custom hash fn
[03:46:09] <sfackler> how is the definition of Void::uninhabited legal then?
[03:46:16] <cmr> no idea!
[03:46:32] <erickt1> cmr: although at that point it'd probably be better to use a `struct foo(bar)` type
[03:46:33] <aatch> sfackler, because you can't construct a Void
[03:47:21] <benh> even if it's legal what is it even for
[03:47:22] <aatch> Anyway, just because you *can* supply extra info, doesn't mean you *need* to. It could use defaults instead.
[03:48:14] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[03:48:16] <benh> What about a container with some weird storage backend
[03:49:07] <aatch> benh, then don't implement Container?
[03:49:12] <benh> sure
[03:49:16] <erickt1> benh: such as treating a database as a MutableMap?
[03:49:19] <aatch> I mean, cmr has a point about it not being very useful.
[03:49:40] <benh> erickt1: i was thinking something like that, or something like dbus, i dunno
[03:50:10] <benh> not sure if it makes sense ;)
[03:50:12] <aatch> There's also the (admittedly not brilliant) option of documenting that it doesn't work and just fail!-ing.
[03:50:23] <erickt1> I could see it being pretty handy to use MutableMap for that. That's a pretty good argument against adding new/with_capacity to Container for me
[03:51:09] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[03:51:11] <aatch> Eh, I always find that trying to abstract like that just leads to tears.
[03:51:19] *** Quits: rootnode (rootnode@moz-7FAB5E8.ip1.george24.com) (Ping timeout)
[03:52:46] <sfackler> Add a ConstructableMap trait! /s
[03:52:53] <erickt1> there's certainly a point of over-abstraction
[03:53:14] <aatch> I mean, an external service has more failure modes than a normal map.
[03:53:17] <strcat> erickt1: can't treat a db as a MutableMap
[03:53:20] <strcat> it uses lifetimes
[03:53:49] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Quit: ChatZilla 0.9.90.1 [Firefox 25.0.1/20131112160018])
[03:53:57] <strcat> unless the db happens to just be a mmap'ed hash table representing the values with native endianness
[03:55:00] <aatch> If I get 'None' back from a map, it's because that key isn't there. A db (or similar) could close the connection, or experience some other error that would either have to fail!() or return None too
[03:55:09] <erickt1> strcat: fair point
[03:55:38] <aatch> To check for those, I need to know it's something else, defeating the point of the abstraction.
[03:57:20] <erickt1> ok. I'll explore adding new/with_capacity to Container
[03:57:34] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[03:57:40] <erickt1> maybe with_capacity should only go with a MutableContainer
[03:59:29] *** Quits: tikue (tkuehn@494ACD0F.28336FB0.689607DE.IP) (Ping timeout)
[04:00:24] *** Joins: tikue (tkuehn@494ACD0F.28336FB0.689607DE.IP)
[04:00:25] *** Quits: yrdz (p_adams@moz-6E953D23.dhcp.stls.mo.charter.com) (Quit: WeeChat 0.4.2)
[04:01:18] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[04:01:28] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[04:01:45] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[04:02:12] *** Quits: tikue (tkuehn@494ACD0F.28336FB0.689607DE.IP) (Ping timeout)
[04:02:23] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[04:02:24] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[04:03:03] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[04:03:47] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[04:04:42] <sfackler> erickt1: keep in mind that it'll have to be called by the kind of awkward "let mut map: HashMap<int, int> = Container::new()"
[04:05:21] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[04:06:16] <dbaupp> aren't &[] and &str and so on considered `Container`s? (i.e. things that can't be constructed and then dynamically filled.)
[04:06:22] <strcat> yeah, generic static methods are pretty close to useless atm ;p
[04:06:59] *** Quits: ktt3ja (Mibbit@moz-D69B60E4.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[04:07:05] <strcat> dbaupp: they could still define new as returning &'static str I guess
[04:07:15] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[04:08:18] *** Quits: mark_edward (mark@moz-DCB0B750.lightspeed.cicril.sbcglobal.net) (Ping timeout)
[04:09:21] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[04:14:26] <jstevans> In this asm! macro, what do the three colons mean? Also, why are those registers listed at the end? https://github.com/pczarn/rustboot/blob/master/arch/arm/cpu/interrupt.rs#L18
[04:15:41] <dbaupp> jstevans: asm! is asm!(<code> : <output registers> : <input registers> : <clobbers>) (and possibly some others)
[04:16:04] <jstevans> Ah! That makes a lot of sense, thanks!
[04:16:05] <dbaupp> jstevans: so in that case, there are no input or output registers, but there registers listed there are modified by the code.
[04:16:58] <jstevans> Is there any documentation on that and other macros?
[04:18:10] <ChrisMorgan> http://static.rust-lang.org/doc/master/rust.html#syntax-extensions and http://static.rust-lang.org/doc/master/rust.html#compiler-features
[04:18:16] <dbaupp> jstevans: https://github.com/mozilla/rust/wiki/Doc-detailed-release-notes#inline-assembly
[04:19:37] *** Quits: Jesse (jruderman@moz-5973C6FA.oc.oc.cox.net) (Quit: Jesse)
[04:19:39] *** Joins: zslayton (Mibbit@moz-4806B979.nyc.res.rr.com)
[04:20:02] <jstevans> Ahhh, this is perfect! Thanks, guys! :)
[04:20:04] <jstevans> 'night!
[04:21:22] *** Quits: JanC (janc@moz-8305164E.dsl.scarlet.be) (Ping timeout)
[04:21:22] *** Quits: Kingsley (kingsley@9B172CBE.BEA5C56D.DF4B730F.IP) (Ping timeout)
[04:21:36] *** Joins: Jesse (jruderman@moz-5973C6FA.oc.oc.cox.net)
[04:22:59] *** Joins: JanC (janc@moz-8305164E.dsl.scarlet.be)
[04:23:21] *** Joins: Kingsley (kingsley@9B172CBE.BEA5C56D.DF4B730F.IP)
[04:23:46] *** Joins: jstevans1 (Instantbir@15596062.D41652FF.DDE5D3F6.IP)
[04:24:39] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: Textual IRC Client: www.textualapp.com)
[04:24:51] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[04:25:27] *** Quits: jstevans (Instantbir@C8FA662C.9FF7733C.DDE5D3F6.IP) (Ping timeout)
[04:26:14] *** Joins: jstevans (Instantbir@91B42F49.AA9008B0.DDE5D3F6.IP)
[04:27:14] *** Joins: jstevans2 (Instantbir@C667FC39.80BB6BFD.DDE5D3F6.IP)
[04:27:44] *** Quits: jstevans1 (Instantbir@15596062.D41652FF.DDE5D3F6.IP) (Ping timeout)
[04:27:58] *** Quits: jstevans (Instantbir@91B42F49.AA9008B0.DDE5D3F6.IP) (Ping timeout)
[04:28:04] *** Joins: jstevans (Instantbir@2740AF27.E8B6FA7D.DDE5D3F6.IP)
[04:28:18] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[04:28:54] *** Quits: jstevans2 (Instantbir@C667FC39.80BB6BFD.DDE5D3F6.IP) (Ping timeout)
[04:30:01] *** Quits: tautologico (iorek@E0D804D3.CFE755C8.C27E1635.IP) (Quit: zzz)
[04:30:08] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[04:30:11] *** Joins: tautologico (iorek@E0D804D3.CFE755C8.C27E1635.IP)
[04:31:27] <derek_c> there is no such thing as a global variable in Rust, correct/
[04:31:28] <derek_c> ?
[04:31:33] <derek_c> only global constants?
[04:31:43] <isaacd> derek_c: static mut?
[04:31:54] <derek_c> isaacd: oh can we have that?
[04:31:59] <isaacd> it requires 'unsafe' code to access
[04:32:03] <isaacd> but it exists
[04:32:17] <isaacd> (unsafe because it can't prevent concurrent mutation)
[04:32:26] <strcat> isaacd: not the only reason
[04:32:34] <strcat> it also can't enforce the borrowing rules
[04:32:51] <isaacd> strcat: yeah, basically everything to do with being mutable everywhere
[04:33:00] <derek_c> ok I was thinking about having such a global variable that all tasks can access
[04:33:00] <dbaupp> and it only allows constant initialisation without allocations (i.e. can't do  `static mut foo: HashMap<int, int> = HashMap::new();`)
[04:33:05] <erickt1> dbaupp / strcat: yep, &[] are containers, so we'd need a separate trait for that
[04:33:12] <isaacd> strcat: (or is that a bad description)
[04:33:15] <derek_c> dbaupp: I see
[04:35:44] *** Joins: mark_edward (mark@moz-DCB0B750.lightspeed.cicril.sbcglobal.net)
[04:37:00] *** Quits: itdnhr (it@moz-7FAAAB8D.bstnma.fios.verizon.net) (Ping timeout)
[04:37:09] <SingingBoyo> on the topic of global vars, is it possible to use MutexArc (or other Arcs) as immutable global vars?
[04:37:15] *** Joins: jvshahid (jvshahid@moz-C1BC0CE4.nyc.res.rr.com)
[04:38:14] *** Quits: Jesse (jruderman@moz-5973C6FA.oc.oc.cox.net) (Quit: Jesse)
[04:38:35] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Client exited)
[04:38:40] <strcat> SingingBoyo: it's not, they require allocation
[04:38:49] <strcat> if you have a single instance you don't need an Arc
[04:38:59] *** Joins: earlzlap (earlz@moz-483E1E31.neo.res.rr.com)
[04:39:42] *** Joins: Jesse (jruderman@moz-5973C6FA.oc.oc.cox.net)
[04:41:02] *** Quits: echristo (echristo@4A478D49.F847711A.D4043753.IP) (Ping timeout)
[04:41:10] <SingingBoyo> strcat: ah yeah, just curious about whether I could have a global MutexArc that allows me to have a safe var, or whether I'd need to send it to every new task... looks like the latter
[04:43:03] <cmr> SingingBoyo: you can have a global, it just needs a static constructor.
[04:43:15] <cmr> Easiest way it just using static foo: Option<MutexArc<...>> = None
[04:44:34] <sfackler> you'll need to be careful with memory fences if you want to do that though
[04:45:09] <strcat> makes more sense to add a macro for safe mutable global data imo
[04:45:19] <dbaupp> cmr: if MutexArc has a dtor then that won't work
[04:46:42] <sfackler> it actually will right now unfortunately
[04:46:44] <dbaupp> static foo: *Whatever = 0 as *Whatever; and then initialising it in some function works. (one possibly should initialise it atomically, i.e. store it as one of the std::unstable::atomics types (iirc).)
[04:47:04] <sfackler> I've been using an AtomicUint and then transmuting to *Whatever
[04:47:05] <dbaupp> sfackler: oh, I though dtors in statics crashed the compiler?
[04:47:11] <dbaupp> isn't there AtomicPtr?
[04:47:21] <sfackler> it doesn't have a static initializer
[04:47:25] <dbaupp> ah
[04:47:33] <strcat> or just make something like https://github.com/thestinger/rust-core/blob/master/core/macros.rs#L31 for mutex protected data
[04:47:34] <sfackler> since it's generic
[04:47:35] <dbaupp> why?
[04:47:50] <dbaupp> ah, right.
[04:47:52] <sfackler> dbaupp: all of the AtomicFoos have dtors since they use NonCopyable internally
[04:48:27] <sfackler> which hilariously means that let foo = INIT_ATOMIC_FOO segfaults
[04:48:42] <dbaupp> nice
[04:48:44] <dbaupp> :(
[04:52:27] *** Quits: zslayton (Mibbit@moz-4806B979.nyc.res.rr.com) (Quit: http://www.mibbit.com ajax IRC Client)
[04:52:41] *** Joins: jensnockert (jensnocker@moz-6EE759F7.afb.bredband2.com)
[04:54:31] *** Quits: jensnockert (jensnocker@moz-6EE759F7.afb.bredband2.com) (Ping timeout)
[04:56:08] *** Quits: Jesse (jruderman@moz-5973C6FA.oc.oc.cox.net) (Quit: Jesse)
[04:57:20] *** Quits: twb (textual@moz-56C3F201.res.gatech.edu) (Ping timeout)
[04:58:49] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[04:59:56] *** Quits: jstevans (Instantbir@2740AF27.E8B6FA7D.DDE5D3F6.IP) (Ping timeout)
[05:00:37] *** Joins: avsej (avsej@D9A610B8.4841F515.FB33447D.IP)
[05:00:41] *** Joins: jstevans (Instantbir@15596062.D41652FF.DDE5D3F6.IP)
[05:01:38] *** Joins: jstevans1 (Instantbir@3FA2EE4E.8239D6FF.DDE5D3F6.IP)
[05:02:14] *** Quits: sprang (sprang@moz-7E6ECAD1.danastreet.live555.com) (Quit: sprang)
[05:02:33] *** Quits: jstevans (Instantbir@15596062.D41652FF.DDE5D3F6.IP) (Ping timeout)
[05:03:06] *** Joins: ray (Mibbit@moz-AF4653FA.hsd1.va.comcast.net)
[05:03:23] *** Quits: jstevans1 (Instantbir@3FA2EE4E.8239D6FF.DDE5D3F6.IP) (Ping timeout)
[05:03:23] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[05:03:34] *** Quits: Kingsley (kingsley@9B172CBE.BEA5C56D.DF4B730F.IP) (Ping timeout)
[05:04:09] *** Joins: Kingsley (kingsley@9B172CBE.BEA5C56D.DF4B730F.IP)
[05:04:45] <ray> Can I bug anyone here with a pointer question?  I'm getting a "cannot move out of dereference of @ pointer" error on line 22 of the following problem code:  http://pastebin.com/P9SZggfA
[05:05:59] <erickt1> ray: that's because you can't move out of a @ pointer :)
[05:06:16] *** Quits: Kingsley (kingsley@9B172CBE.BEA5C56D.DF4B730F.IP) (Ping timeout)
[05:06:34] <erickt1> If you need to do that, you could use a Mut<T>, Cell<T>, or a Option<T> and call .take()
[05:06:54] <SingingBoyo> ray: more specifically, you can't move camera.position and camera.direction out of camera and into the Ray3D
[05:06:58] *** Joins: Kingsley (kingsley@9B172CBE.BEA5C56D.DF4B730F.IP)
[05:07:02] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[05:07:30] <ray> It's not imperative that my camera be of type @RayCamera.  I moved it to an @ pointer type because I thought it would help.
[05:07:35] <sp3d> you might just want to clone those
[05:07:44] <SingingBoyo> ray: from the context, my guess is that you want camera.position.clone()
[05:07:54] *** Quits: mark_edward (mark@moz-DCB0B750.lightspeed.cicril.sbcglobal.net) (Ping timeout)
[05:08:45] <ray> SingingBoyo, I'd agree.  I then get the error  "failed to find an implementation of trait std::clone::Clone for Point3D"
[05:09:13] <sp3d> #[deriving(Clone)] above your struct declaration will generate a reasonable implementation
[05:10:20] <ray> !!  It compiles!
[05:10:27] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[05:10:29] <ray> I'm beside myself, thank you so much
[05:10:34] <SingingBoyo> ray: \o/
[05:11:17] *** Joins: jstevans (Instantbir@moz-8EDAC95C.bootp.virginia.edu)
[05:11:32] <SingingBoyo> ray: though if possible, your camera probably shouldn't be @RayCamera.  just plain RayCamera is much better, and less likely to get removed than @-ptrs
[05:11:59] *** Joins: Jesse (jruderman@moz-5973C6FA.oc.oc.cox.net)
[05:12:14] <ray> I went ahead and moved it back to a plain RayCamera, the @ was my frantic effort to get the code to compile.  =)
[05:12:23] *** Quits: alonlevy (alon@moz-DCBA91C6.bb.netvision.net.il) (Ping timeout)
[05:14:15] <ray> Just out of interest, is # used to denote pre-processor directives in Rust?
[05:14:22] *** Quits: kphelps (kphelps@moz-8B098CA5.hsd1.ma.comcast.net) (Ping timeout)
[05:14:23] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[05:14:39] *** Quits: jvshahid (jvshahid@moz-C1BC0CE4.nyc.res.rr.com) (Ping timeout)
[05:15:29] <sfackler> nope, it's for attributes
[05:15:40] *** Quits: pjenvey (pjenvey@moz-B23F7990.org) (Ping timeout)
[05:15:44] <cmr> We don't have a preprocessor
[05:16:44] *** Quits: Kingsley (kingsley@9B172CBE.BEA5C56D.DF4B730F.IP) (Ping timeout)
[05:16:59] <erickt1> ugh. One UI downside of a NewConstructor trait is you need to write `let wr: MemWriter = NewConstructor::new()`
[05:17:03] *** Joins: alonlevy (alon@moz-DCBA91C6.bb.netvision.net.il)
[05:17:24] *** Joins: Kingsley (kingsley@9B172CBE.BEA5C56D.DF4B730F.IP)
[05:18:00] *** Quits: jweinberg (jweinberg_@3E5CF971.9533F93D.26E46D7D.IP) (Ping timeout)
[05:18:08] <sfackler> what's the upside of NewConstructor?
[05:18:37] *** Joins: jweinberg (jweinberg_@3E5CF971.9533F93D.26E46D7D.IP)
[05:18:42] <erickt1> sfackler: you could generically construct containers
[05:19:26] <sfackler> is that a thing that people want to do?
[05:19:45] <erickt1> sfackler: If FromIterator is pulling values into a container, a combination of NewConstructor and MutableSeq is pushing values into a container
[05:19:50] <erickt1> sfackler: I want to do it :)
[05:20:12] <SingingBoyo> erickt1: couldn't you just add a MemWriter::new function as well?
[05:20:24] <SingingBoyo> erickt1: or am I missing something here?
[05:20:24] *** Quits: jweinberg (jweinberg_@3E5CF971.9533F93D.26E46D7D.IP) (Ping timeout)
[05:20:37] *** Joins: jweinberg (jweinberg_@3E5CF971.9533F93D.26E46D7D.IP)
[05:20:43] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[05:20:43] *** ChanServ sets mode: +ao dherman dherman
[05:21:07] <erickt1> SingingBoyo: Oh, hm. maybe. I was thinking that there'd be name collisions, but this is a static method so they wouldn't be in the same namespace
[05:22:58] *** Joins: mark_edward (mark@F209156.FE7B7049.95579CE8.IP)
[05:24:39] *** Quits: Jesse (jruderman@moz-5973C6FA.oc.oc.cox.net) (Quit: Jesse)
[05:24:50] *** Quits: alonlevy (alon@moz-DCBA91C6.bb.netvision.net.il) (Ping timeout)
[05:26:05] <erickt1> sfackler: a specific example. We can change this to work with any NewContainer-compatible types: https://github.com/mozilla/rust/blob/master/src/libstd/result.rs#L363
[05:27:08] *** Joins: pjenvey (pjenvey@moz-B23F7990.org)
[05:29:12] <sfackler> seems like that'd need HKT, right?
[05:30:20] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Quit: Sharp)
[05:31:53] *** Quits: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com) (Ping timeout)
[05:32:09] <erickt1> sfackler: I *think* you need HKT you want to use arbitrary monadic transformers. I think it's okay here because we're coding up for a single case
[05:33:32] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[05:34:00] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[05:34:05] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Quit: willingc)
[05:34:52] *** Quits: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[05:35:03] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[05:36:03] *** Quits: mark_edward (mark@F209156.FE7B7049.95579CE8.IP) (Connection reset by peer)
[05:36:18] *** Joins: mark_edward (mark@ECD56F7A.FE7B7049.95579CE8.IP)
[05:37:07] *** Joins: maxiepoo_ (Max@moz-6F50ADE.hsd1.il.comcast.net)
[05:38:19] *** Quits: bascule (bascule@moz-3D395603.compute-1.amazonaws.com) (Quit: leaving)
[05:38:43] *** Joins: bascule (bascule@moz-3D395603.compute-1.amazonaws.com)
[05:40:12] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[05:40:31] *** Quits: Jesin (Jesin@moz-63C897DA.res.lehigh.edu) (Quit: Leaving)
[05:42:18] *** Quits: maxiepoo_ (Max@moz-6F50ADE.hsd1.il.comcast.net) (Quit: maxiepoo_)
[05:44:08] *** Quits: ray (Mibbit@moz-AF4653FA.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[05:44:50] *** Quits: robarnold (rob@moz-59F6B5.hfc.comcastbusiness.net) (Ping timeout)
[05:47:04] *** Quits: mark_edward (mark@ECD56F7A.FE7B7049.95579CE8.IP) (Connection reset by peer)
[05:47:21] *** Joins: mark_edward (mark@C7382359.FE7B7049.95579CE8.IP)
[05:48:06] *** Joins: robarnold (rob@moz-59F6B5.hfc.comcastbusiness.net)
[05:51:29] *** Joins: beifeng (Mibbit@284C36E7.3062CEC3.670EEFD.IP)
[05:52:42] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[05:54:27] *** Quits: tautologico (iorek@E0D804D3.CFE755C8.C27E1635.IP) (Quit: Entscheidungsproblem)
[05:55:53] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.2)
[05:59:18] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[06:00:16] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[06:01:40] *** Quits: canhtak (canhtak@moz-A53E1151.wl.t.ulaval.ca) (Quit: canhtak)
[06:06:13] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[06:06:39] *** Joins: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP)
[06:07:07] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[06:08:01] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[06:08:53] *** Quits: vky (chatzilla@moz-4F2E17BF.dsl.dynamic.sonic.net) (Quit: ChatZilla 0.9.90.1 [Firefox 26.0/20131125215016])
[06:12:13] *** Quits: garthk (garth@moz-B118B14A.static.internode.on.net) (Quit: garthk)
[06:26:03] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[06:26:22] *** Quits: carter (carter@moz-F3C2A2D8.nycmny.fios.verizon.net) (Quit: Textual IRC Client: www.textualapp.com)
[06:27:22] *** Joins: synackse (jordyd@7DAC4ACE.77F880E0.D9401097.IP)
[06:28:22] *** Quits: docbrown (docbrown@5CE9D448.F0B9EFB2.7F8758CE.IP) (Client exited)
[06:28:22] *** Quits: kemurphy (kemurphy@3863AC20.C4E71399.9510F13D.IP) (Connection reset by peer)
[06:28:43] *** Joins: kemurphy (kemurphy@3863AC20.C4E71399.9510F13D.IP)
[06:29:37] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[06:30:13] *** Joins: maxiepoo_ (Max@moz-6F50ADE.hsd1.il.comcast.net)
[06:30:21] *** Joins: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com)
[06:31:59] *** Joins: Torwegia (tor@moz-8D4C28CD.lightspeed.renonv.sbcglobal.net)
[06:32:56] <diverse> "auto merge of #10785 : alexcrichton/rust/omg-i-hate-windows" <- Funniest pull request ever
[06:35:00] * ChrisMorgan reckons he's made ones that are just as interesting
[06:36:04] <ChrisMorgan> GitHub doesn't cope well with a branch name like unreachable-macro-part-two-of-two-containing-the-destruction-of-the-unreachable-function (and I had even resisted the urge to treble its length!)
[06:37:37] *** Joins: maxiepoo__ (mnew@moz-6F50ADE.hsd1.il.comcast.net)
[06:38:01] *** Quits: synackse (jordyd@7DAC4ACE.77F880E0.D9401097.IP) (Ping timeout)
[06:40:57] *** Joins: jensnockert (jensnocker@moz-6EE759F7.afb.bredband2.com)
[06:40:58] *** Quits: SingingBoyo (brandon@DA28FB90.A5D0D593.4F048BDC.IP) (Ping timeout)
[06:42:15] <Torwegia> Hello rust friends! I was wondering if someone could explain something I ran into while trying play around with the rustforrubyists book. This gist https://gist.github.com/Torwegia/7783305 shows what I ran into.
[06:42:41] *** Quits: jensnockert (jensnocker@moz-6EE759F7.afb.bredband2.com) (Ping timeout)
[06:44:09] <Torwegia> Something about having a closure capture a channel in a loop versus not in a loop
[06:44:33] <SiegeLord> I would have imagined you need a channel per task
[06:44:52] <Eridius> Torwegia: the `do spawn { .. }` is actually creating a proc, which is a heap-allocated once closure
[06:45:01] <Eridius> the `chan` is moved into this proc, where it's then used. It becomes inaccessible outside
[06:45:16] <Eridius> in noWorks(), you're trying to move the same `chan` into 100 different procs
[06:45:23] <Torwegia> I see
[06:45:49] <Torwegia> So i would need to provide each task with its own channel then?
[06:46:08] <Eridius> Torwegia: yes. See std::comm::SharedChan
[06:46:23] <Eridius> you construct a SharedChan from a chan, then clone it for every task you need to give it to
[06:46:54] <Torwegia> I will give that a shot, thanks for the assistance!
[06:46:55] *** Joins: mcpherrin (mcpherrin@moz-DFB1CE19.hsd1.ca.comcast.net)
[06:47:11] *** Quits: mcpherrin (mcpherrin@moz-DFB1CE19.hsd1.ca.comcast.net) (Quit: leaving)
[06:47:15] <Eridius> Torwegia: https://gist.github.com/kballard/7783359
[06:47:19] *** Quits: ssbr_ (~ssbr@46FE74EC.C60FE7DC.4065847B.IP) (Ping timeout)
[06:47:27] *** Joins: mcpherrin (mcpherrin@moz-DFB1CE19.hsd1.ca.comcast.net)
[06:47:30] *** Joins: ssbr_ (~ssbr@98D3BE03.C60FE7DC.4065847B.IP)
[06:48:30] <Torwegia> Thank you, still getting used to all the ownership stuff. 
[06:48:50] *** Quits: mcpherrin (mcpherrin@moz-DFB1CE19.hsd1.ca.comcast.net) (Quit: leaving)
[06:52:53] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[06:56:34] *** Quits: heftig (heftig@moz-F8B26C9F.dip0.t-ipconnect.de) (Quit: Quitting)
[06:56:36] *** Joins: Blei (philipp@moz-B2F9E4BD.cust.bluewin.ch)
[06:56:44] *** Joins: jviereck (Adium@moz-4BE889C3.dip0.t-ipconnect.de)
[06:56:56] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[06:58:14] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[06:58:32] *** Quits: lfox (lfox@moz-B8648F0F.nycmny.fios.verizon.net) (Quit: ZZZzzzâ€¦)
[06:59:32] *** Quits: maxiepoo_ (Max@moz-6F50ADE.hsd1.il.comcast.net) (Quit: maxiepoo_)
[07:01:02] *** Joins: fabiand (fabiand@moz-E5C33560.adsl.alicedsl.de)
[07:02:53] *** Quits: ssbr_ (~ssbr@98D3BE03.C60FE7DC.4065847B.IP) (Ping timeout)
[07:03:04] *** Joins: ssbr_ (~ssbr@46FE74EC.C60FE7DC.4065847B.IP)
[07:03:45] *** Quits: earlzlap (earlz@moz-483E1E31.neo.res.rr.com) (Ping timeout)
[07:04:26] *** Quits: tcr (tcr@moz-1EBF1EAD.olin.edu) (Client exited)
[07:04:46] *** Joins: tcr (tcr@moz-1EBF1EAD.olin.edu)
[07:06:23] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Client exited)
[07:06:36] *** Quits: tcr (tcr@moz-1EBF1EAD.olin.edu) (Ping timeout)
[07:08:22] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[07:10:03] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[07:12:05] <derek_c> are you guys aware of a way to read the apparent size of a file?
[07:12:15] <derek_c> as in du --apparent-size
[07:13:55] *** Joins: thesnowdog (doug@468C83C8.9D0B7490.6F17036B.IP)
[07:14:13] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[07:15:33] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[07:15:39] <Blei> http://static.rust-lang.org/doc/master/std/io/fs/fn.stat.html and http://static.rust-lang.org/doc/master/std/io/struct.FileStat.html#structfield.size
[07:15:42] <Blei> i would guess
[07:16:42] *** Quits: jviereck (Adium@moz-4BE889C3.dip0.t-ipconnect.de) (Quit: Leaving.)
[07:16:46] *** Joins: jviereck (Adium@moz-4BE889C3.dip0.t-ipconnect.de)
[07:17:23] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[07:18:02] <derek_c> Blei: the file size there is the real file size though
[07:18:24] *** Quits: jviereck (Adium@moz-4BE889C3.dip0.t-ipconnect.de) (Quit: Leaving.)
[07:18:28] *** Quits: avsej (avsej@D9A610B8.4841F515.FB33447D.IP) (Connection reset by peer)
[07:20:16] <geomyidae> what is the placement stuff? What are example values for the places things could be put? GC? stack? heap? 
[07:21:02] <eddyb> you could probably use it for arenas
[07:21:17] <Blei> derek_c: hmm, i see. how is apparent size computed then? from block size and block count? if so, look into the `unstable` field instead
[07:21:22] <Eridius> smart points (GC, RC), arenas, etc.
[07:21:45] <eddyb> simple Rc/Gc uses would most likely be type inferred (like from_str or collect)
[07:22:57] <Blei> geomyidae: one common example: instead of creating a value and pushing it to a vector, you can create it in place in the last vector position
[07:23:37] <geomyidae> hm interesting
[07:24:25] *** Joins: Ms2ger (Ms2ger@moz-F5FA54B5.ugent.be)
[07:24:27] <geomyidae> eddyb: that's what I thought, wasn't sure if I was missing something or am too much of a PL noobie to see the obvious benefits. Arenas is a keyword I know of that I can go look into at least.
[07:25:00] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[07:25:57] <eddyb> Blei: common? I've never seen that (well, except as an "in place" method on C++ std::vector)
[07:26:23] <Eridius> eddyb: he's describing emplace_back
[07:27:13] <Blei> ok, let me rephrase, one common operation that could maybe be made a bit more efficient with placement new
[07:27:33] <eddyb> Blei: ah, okay. still a little weird for placement new/box
[07:27:41] <Blei> why?
[07:27:42] <eddyb> Eridius: yeah, that's what I was thinking of
[07:28:03] <Eridius> Blei: Rust doesn't have constructor functions. I'm not really sure how emplace_back fits into Rust
[07:28:19] <Eridius> even with that email on the ML. The only way I can see it working is with the copy-on-return elision being mandated
[07:28:24] <Eridius> but AFAIK that's considered an optimization
[07:28:40] <Blei> isn't this what placement new is all about (at least in rust)?
[07:28:53] <diverse> Eridius: https://mail.mozilla.org/pipermail/rust-dev/2013-December/007186.html
[07:28:57] <Eridius> placement new in C++ does not rely on copy-on-return elision
[07:29:19] <diverse> and Rust's placement new is not really `placement new`
[07:29:45] <Eridius> diverse: yes I saw that, and I wonder why Patrick seems to be ignoring the fact that the closure requires copy-on-return elision in order to be considered proper placement
[07:30:15] * geomyidae 's reading wikipedia as fast as possible
[07:31:28] *** Quits: mark_edward (mark@C7382359.FE7B7049.95579CE8.IP) (Ping timeout)
[07:31:59] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[07:33:53] *** Quits: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) (Connection reset by peer)
[07:34:52] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[07:36:09] <diverse> Eridius: why not ask that question on the ML?
[07:36:41] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[07:37:54] <diverse> I have a hunch he is going to say that because its a systems language, some exceptions have to be made.
[07:38:07] *** Joins: Cork (Cork@moz-352B7E7B.a370.priv.bahnhof.se)
[07:38:58] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[07:39:53] <derek_c> what's the idiomatic way to convert a string to an int?
[07:40:26] <Blei> derek_c: let a: int = from_str("123").unwrap();
[07:40:42] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[07:41:28] <diverse> we should start calling our `placement new`, `placement box` or `boxing` instead
[07:42:19] <derek_c> Blei: thanks!
[07:42:54] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Ping timeout)
[07:43:48] *** Quits: Liothen (liothen@96625EAC.566451EE.31191230.IP) (Ping timeout)
[07:44:19] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[07:46:01] *** Joins: mark_edward (mark@moz-DCB0B750.lightspeed.cicril.sbcglobal.net)
[07:48:27] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[07:51:30] *** Quits: paulproteus (quassel@199.199.210.158) (Ping timeout)
[07:51:45] *** pmoore|away is now known as pmoore
[07:52:30] *** Joins: paulproteus (quassel@458FE134.3EC36C88.CBDCF1DC.IP)
[07:56:37] *** pmoore is now known as pmoore|away
[07:59:32] *** flaper87|afk is now known as flaper87
[08:00:50] *** Joins: pnkfelix (pnkfelix@1ED7AD9.5831E18D.54C3481B.IP)
[08:03:05] *** Quits: dbaupp (Thunderbir@4F13D67D.D5A1DCF.37681C44.IP) (Ping timeout)
[08:04:01] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[08:04:57] *** pmoore|away is now known as pmoore
[08:09:26] *** Quits: cubic (cubic@moz-80241A3A.mc.videotron.ca) (Quit: Leaving)
[08:10:08] *** Joins: loren (loren@1F18520C.8C2A521C.405878F2.IP)
[08:10:31] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[08:11:41] <loren> Anyone know how to expand a "block" argument to a rust macro?
[08:12:15] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[08:12:19] <loren> I get "error: unexpected token: `an interpolated block`"
[08:13:15] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Quit: Sharp)
[08:13:53] <eddyb> loren: maybe { $blk }?
[08:14:13] <Yurume> rusti: macro_rules! foo(($x:expr $a:block) => (if $x $a)) foo!(true { println("lo!"); })
[08:14:14] -rusti- lo!
[08:14:14] -rusti- ()
[08:14:31] <Yurume> block is there for {}-delimited constructs
[08:14:52] <Yurume> so you can only use them as such
[08:15:47] *** Joins: oberstet (quassel@moz-78A627DF.dynamic.mnet-online.de)
[08:16:43] <loren> Yurume: eddyb: maybe I'm running into something odd
[08:17:51] <loren> I basically want my_macro!("blah", { writer.doSomething() }) to expand to { let writer = Writer::new(); writer.doSomething(); assert_eq!(get_str(&writer), "blah"); }
[08:18:06] <loren> but I can't seem to get my block to be able to reference the writer variable declared in the macro
[08:18:09] <loren> is that by design?
[08:18:47] <eddyb> loren: yes
[08:18:56] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[08:19:03] <eddyb> that's hygiene, I think
[08:19:54] <loren> I think I'm just being stupid, I can solve this easier with a function parameter than with a macro
[08:20:10] <eddyb> oh yeah
[08:20:37] <eddyb> loren: you can use a closure for this
[08:20:51] <Yurume> loren, a-ha, yeah, that is a side effect of hygienic macros (new in 0.8, I think)
[08:20:53] <eddyb> test_writer("blah", |w| w.doSomething());
[08:21:03] <loren> yep, that makes much more sense
[08:21:03] <Yurume> that can be one way.
[08:21:05] <loren> I'm not thinking
[08:21:17] <loren> I'm used to having to use macros for that sort of thing :|
[08:21:19] <Yurume> or, you can do something like this: |$writer:ident| $blk:block
[08:21:33] <Yurume> and use $writer instead of writer to define the variable.
[08:21:54] <eddyb> nah, don't use macros if you can cleanly do it otherwise, they're not very good
[08:22:49] <eddyb> Yurume: the other side effect is linear memory usage (proportional to the number of locals), even when you don't use macros at all
[08:23:22] <eddyb> and quadratic run time, IIRC
[08:23:26] <Yurume> hmm?
[08:23:47] <Yurume> how can make it use more memory when no code is emitted via macros?
[08:23:53] <Yurume> did you mean compilation time?
[08:23:59] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[08:24:08] *** Joins: morphevs (Adium@moz-C1F7EB20.cust.bluewin.ch)
[08:24:18] <eddyb> Yurume: memory/time usage during compilation, yes
[08:24:25] <loren> It definitely makes more sense to use a closure for this, everything is working well now! Thanks for your help
[08:25:02] *** Quits: morphevs (Adium@moz-C1F7EB20.cust.bluewin.ch) (Quit: Leaving.)
[08:25:04] *** Joins: morphevs (Adium@moz-D1B4E172.uzh.ch)
[08:26:32] *** Quits: csherratt (csherratt@moz-CAF331EA.cable.teksavvy.com) (Quit: csherratt)
[08:26:44] *** Joins: avsej (avsej@DF1824D5.EFF97412.48F984E6.IP)
[08:27:45] <Yurume> eddyb, closures cannot be easily used when the closure body tries to return from the enclosing function though
[08:28:10] <Yurume> I have quite large suite of macros because of it
[08:28:15] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:29:35] *** Quits: markwash (mwashenber@moz-E830FEBB.hsd1.ca.comcast.net) (Quit: markwash)
[08:30:54] <loren> wow, rust's unit testing rocks...
[08:31:11] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Client exited)
[08:31:20] *** kimundi is now known as zz_kimundi
[08:31:26] <Yurume> ...and benchmarking sucks (yet) ;)
[08:31:32] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[08:31:41] <eddyb> s/yet/for now/
[08:31:51] <Yurume> ah, yes
[08:32:08] *** Joins: skade (skade@30BBD5E6.505237C9.CAE22B62.IP)
[08:32:15] <Yurume> as a non-native speaker, I sometimes mixes marginally associated (but not equivalent) words altogether
[08:32:18] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[08:32:19] <Yurume> sometimes mix*
[08:32:42] <Yurume> anyway, the current --bench is suitable for microbenchmarks but not for larger benchmarks.
[08:33:17] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[08:34:30] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[08:35:41] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[08:36:47] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Quit: Sharp)
[08:37:39] *** Quits: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca) (Ping timeout)
[08:38:07] *** Joins: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca)
[08:38:27] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[08:39:06] *** Joins: jaeman (Mibbit@B4104EBB.3CC170B1.1E14B209.IP)
[08:40:07] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[08:41:22] *** Quits: loren (loren@1F18520C.8C2A521C.405878F2.IP) (Quit: leaving)
[08:41:27] *** Quits: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca) (Ping timeout)
[08:41:32] *** Quits: thesnowdog (doug@468C83C8.9D0B7490.6F17036B.IP) (Quit: WeeChat 0.4.1)
[08:41:38] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[08:41:54] *** Joins: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca)
[08:43:10] *** zz_kimundi is now known as kimundi
[08:43:14] *** Joins: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP)
[08:44:12] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[08:44:47] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[08:45:10] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:45:26] <jaeman> The object Task is initialized in either three functions 'fn new_root_homed()', 'fn new_sched_task()' or 'fn new_child_homed'. What is difference between Tasks from these functions?
[08:46:28] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[08:46:43] *** Joins: SingingBoyo (brandon@DA28FB90.A5D0D593.4F048BDC.IP)
[08:47:02] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Ping timeout)
[08:49:42] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[08:51:15] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[08:51:28] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[08:51:30] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[08:52:03] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[08:53:15] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[08:55:10] *** Joins: Jackneill (Jackneill@moz-BCB5ED93.pool.digikabel.hu)
[08:55:37] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[08:56:05] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[08:56:56] *** Quits: pnkfelix (pnkfelix@1ED7AD9.5831E18D.54C3481B.IP) (Quit: Leaving.)
[08:58:07] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[08:59:56] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[08:59:56] *** Joins: autra (augustin@A14DAE84.7F753DD1.EE2CA32B.IP)
[08:59:59] *** Joins: Ferreus (ferreus@moz-377A62A7.dip0.t-ipconnect.de)
[09:00:09] *** Quits: autra (augustin@A14DAE84.7F753DD1.EE2CA32B.IP) (Client exited)
[09:01:15] *** Quits: FreeFull (freefull@moz-672577F6.as13285.net) (Quit: )
[09:02:14] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[09:03:04] *** Quits: Flibo (Flibo@moz-40397852.org.aalto.fi) (Ping timeout)
[09:03:55] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[09:04:31] *** Joins: dbaupp (Thunderbir@moz-454781A5.lns20.syd6.internode.on.net)
[09:05:21] *** Joins: Diamond (dick@moz-80556682.ks.ks.cox.net)
[09:06:08] *** Joins: morphevs1 (Adium@moz-C1F7EB20.cust.bluewin.ch)
[09:06:20] *** Quits: dbaupp (Thunderbir@moz-454781A5.lns20.syd6.internode.on.net) (Ping timeout)
[09:06:34] *** Joins: dbaupp (Thunderbir@moz-EB2EFE6F.lns20.syd6.internode.on.net)
[09:06:36] *** Quits: morphevs (Adium@moz-D1B4E172.uzh.ch) (Connection reset by peer)
[09:06:58] *** Quits: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca) (Ping timeout)
[09:07:10] *** Quits: mcarberry (mcarberry@moz-BE1C9F3F.lightspeed.frokca.sbcglobal.net) (Ping timeout)
[09:07:27] *** Joins: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca)
[09:08:35] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[09:10:11] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[09:10:25] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[09:11:09] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[09:12:00] *** Joins: zaphod_b (ford_p@moz-CCE57F2F.eblcom.ch)
[09:12:59] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[09:14:04] *** Quits: zxcdw (r-a@BC4D85C9.B543C4DE.3933CC16.IP) (Ping timeout)
[09:15:03] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[09:15:57] *** Quits: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca) (Ping timeout)
[09:16:46] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[09:18:27] *** Joins: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca)
[09:21:32] *** Joins: moostik (Icedove@moz-698B575F.w86-212.abo.wanadoo.fr)
[09:21:51] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[09:22:13] *** Joins: mcarberry (mcarberry@moz-BE1C9F3F.lightspeed.frokca.sbcglobal.net)
[09:22:21] *** Quits: cdidd (cdidd@moz-D6B46712.broadband.corbina.ru) (Ping timeout)
[09:22:25] *** Joins: rootnode (rootnode@moz-7FAB5E8.ip1.george24.com)
[09:23:31] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[09:24:23] <eddyb> what exactly is type checking doing that can take 70 seconds?
[09:24:40] <eddyb> quadratic complexity again?
[09:24:55] *** Quits: flowsnake (flowsnake@moz-E4E567EE.aztw.cable.virginm.net) (Ping timeout)
[09:26:54] *** Joins: Heather (Heather@19663F6.F53BAACC.9C17E900.IP)
[09:27:00] <Heather> ey
[09:27:28] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[09:28:16] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[09:28:23] <Heather> may someone help me to debug my app?
[09:28:31] <Heather> I've got stuck here: https://github.com/Heather/Mirana/blob/master/src/Mirana/Mirana.rs#L264
[09:30:03] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[09:30:36] *** Quits: Ke (jkarlson@moz-785A3407.org.aalto.fi) (Ping timeout)
[09:33:33] *** Quits: Kxepal (Miranda@moz-C8D50DC5.pppoe.mtu-net.ru) (Ping timeout)
[09:33:53] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Ping timeout)
[09:33:58] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[09:34:44] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[09:35:15] <Yurume> Heather, what's exactly your problem?
[09:36:25] <Heather> Yurume hi, I'm stuck on console after this line
[09:36:26] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[09:36:44] *** Joins: Kxepal (Miranda@moz-F2C9521E.pppoe.mtu-net.ru)
[09:37:41] <Yurume> stuck on console? you mean, it stops printing anything after that?
[09:37:57] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[09:38:16] <Yurume> (while it still runs)
[09:38:26] <Heather> Yurume yes, I need to Ctrl+C it because it doesn't react on anything like in infinite loop or something
[09:39:03] *** Joins: adridu59 (Mibbit@moz-E7A273CD.ac-paris.fr)
[09:39:18] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[09:40:03] *** Quits: derek_c (derek@moz-2B22A3A6.cit.cornell.edu) (Ping timeout)
[09:40:43] <Yurume> Heather, hmm, are you sure that "return;" (line 267) is reached?
[09:40:49] *** Joins: cdidd (cdidd@moz-D4289E71.broadband.corbina.ru)
[09:40:59] <Yurume> can you verify that by inserting println or similar right before return;?
[09:41:11] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[09:41:27] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[09:41:44] <Heather> Yurume well at least print is reached
[09:42:08] <Heather> Yurume there is print before....
[09:42:51] <Yurume> I meant you may also insert print between "}" and "return;" in the same line, but anyway.
[09:42:51] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[09:43:00] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[09:43:02] <Yurume> then I guess other tasks are running and not terminated properly.
[09:43:02] <Heather> Yurume I used to put another return right after that print but with same effect
[09:43:23] <Heather> other tasks :S
[09:43:44] *** Quits: avsej (avsej@DF1824D5.EFF97412.48F984E6.IP) (Client exited)
[09:43:45] <Yurume> it seems that Wrappers have some fancy output routines using tasks there? ;)
[09:44:08] *** Joins: avsej (avsej@DF1824D5.EFF97412.48F984E6.IP)
[09:44:17] <Yurume> hmm, but it has a proper termination mechanism (as far as I understand)
[09:45:08] <Heather> yes I also think so but can't understand where the stuck cames from
[09:45:26] <Yurume> you can also try using gdb with debugging informations.
[09:46:00] <Yurume> compile with -Z debug-info, run `gdb --args your-program --with-arguments`, type r <return>, and press Ctrl-C when it stucks.
[09:46:02] <Heather> Yurume :S
[09:47:25] *** Joins: CarpNet (ac@moz-FD24B77.sohonet.co.uk)
[09:47:43] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[09:48:13] *** Joins: andre_ (andre@CA528A4A.45A4338E.8EE27E6.IP)
[09:49:24] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[09:49:57] <Heather> ok
[09:50:10] <Yurume> any progress there?
[09:50:11] <Heather> Yurume: [New Thread 4308.0x1c98]  Program received signal SIGINT, Interrupt. [Switching to Thread 4308.0x1c98] 0x7660e36d in KERNEL32!FormatMessageA () from C:\Windows\system32\kernel32.dll
[09:50:28] <Heather> it's after "zz added" message
[09:50:37] <Yurume> uh, how about `info threads`?
[09:50:51] <Heather> Yurume eh?
[09:51:01] <Yurume> Ctrl-C spawns gdb prompt
[09:51:25] <Yurume> `info threads` will print the list of active threads
[09:51:28] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[09:51:45] <eddyb> well, it actually interrupts the program, returning to the gdb prompt (it doesn't nest)
[09:52:06] <Heather> let me pastebin
[09:52:07] <Yurume> eddyb, right
[09:52:27] <Heather> https://gist.github.com/Heather/7785002
[09:52:29] <Yurume> anyway, the thread list itself is not much meaningful, since rust has a built-in scheduler that spawns multiple threads
[09:52:29] <mmalecki> wycats_: sure.
[09:52:47] <Yurume> but you can navigate what task is being executed in each threads then.
[09:52:52] <Yurume> each thread*
[09:53:04] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[09:53:07] <Yurume> ha!
[09:53:10] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[09:53:21] <Heather> ...
[09:53:29] <Yurume> Heather, how about `bt` (prints the stack trace, provided that the stack didn't go nuts)?
[09:53:56] <Heather> Yurume https://gist.github.com/Heather/7785002#comment-963020
[09:54:18] <SingingBoyo> whoo, evict haz tags now.  After a complete restructuring of my issue timeline data...
[09:54:23] *** Joins: arodier74 (Thunderbir@5901C3C8.B6144566.D3B9122.IP)
[09:55:53] <Yurume> hmm, looks like some kind of finalization failure, but the stack trace is not quite helpful...
[09:56:01] *** Joins: Mowah (Mowah@moz-436C35C5.cust.bredbandsbolaget.se)
[09:56:16] <Heather> yep :S
[09:56:28] <Yurume> Heather, does it occur only for that branch (i.e. -a option?)
[09:56:40] <Heather> for -d too
[09:56:54] <Yurume> and not others?
[09:57:00] <Heather> Yurume not
[09:57:10] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[09:57:16] <Heather> Yurume you can try if it will also fail there on your environment
[09:57:32] <Yurume> I don't know how to use it, does it require any other configurations?
[09:57:57] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[09:58:05] <Heather> no
[09:58:26] <Heather> just make on linux or build.bat on windows and run it first time then run it second time ...
[09:58:38] *** Quits: adridu59 (Mibbit@moz-E7A273CD.ac-paris.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[09:59:38] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[10:01:36] <Heather> oops
[10:01:38] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[10:01:42] <Heather> seems like something else broken
[10:01:49] <Yurume>         No config file found, consider providing one
[10:01:49] <Yurume>         For now one is created just for example
[10:02:05] <Yurume> and it breaks after "not a directory" failure :S
[10:02:16] <Heather> Yurume yes I just get same error
[10:02:24] <Heather> trying to understand it now ...
[10:02:56] <Heather> operation not permitted....
[10:03:32] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[10:04:26] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[10:04:42] <Yurume> Heather, isn't an empty path (Path::init("")) somewhat problematic?
[10:05:11] <Yurume> did you mean the current working directory (i.e. Path::init(".") or os::getcwd())?
[10:05:25] <Heather> hm
[10:06:27] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[10:06:30] <Heather> Yurume yes, seems like
[10:06:55] *** Joins: yota (sdouche@moz-7D878FB8.securactive.net)
[10:07:10] <Heather> Yurume pushed fix
[10:09:31] <Yurume> afk
[10:09:39] *** Quits: pradeep (pradeep@5AB4884B.FCC4549.14D5B978.IP) (Quit: leaving)
[10:10:20] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[10:10:31] *** Joins: Earnestly (earnest@88884C6.A3735F9C.39C00A7A.IP)
[10:12:15] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[10:14:24] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[10:17:20] *** Joins: refold (gman@moz-42D68426.a258.priv.bahnhof.se)
[10:22:25] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[10:25:01] *** Joins: thomas001 (thomas@moz-968FA222.informatik.uni-leipzig.de)
[10:27:21] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[10:31:04] *** Joins: octurion (octurion@moz-E7EA111C.clients.kiwiirc.com)
[10:31:29] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[10:31:53] *** Joins: nkoep (nik@moz-45C7E23F.pool.mediaways.net)
[10:32:20] *** Quits: SingingBoyo (brandon@DA28FB90.A5D0D593.4F048BDC.IP) (Ping timeout)
[10:32:38] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[10:34:54] <octurion> Hello everyone. What is the rationale for passing an Option<Self> and not &self to bits() in std::num::Primitive?
[10:35:25] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[10:37:53] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[10:38:50] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[10:40:01] *** Joins: pnkfelix (pnkfelix@1ED7AD9.5831E18D.54C3481B.IP)
[10:40:42] *** Joins: Sorella (quildreen@D2D1E5DD.81EFC25A.A95FAE2B.IP)
[10:40:46] <dbaupp> octurion: they are designed to be static constants that are shared by a trait, which is unfortunately only possible with methods (hence static methods); and they are called like `Primitive::bits()` and always return the same type, so for the compiler to work out which implementation of the trait to use there has to be some way to hint the Self type
[10:41:00] <cmr> octurion: see the comment in the source: they require some sort of way to infer the Self type, and that is the easiest way.
[10:41:11] <dbaupp> hence the methods are designed to be called like `Primitive::bitss(None::<foo>)`
[10:41:13] <dbaupp> *bits
[10:41:48] *** Quits: KindOne (KindOne@moz-1F6A65EB.dynamic.ip.windstream.net) (Ping timeout)
[10:41:55] *** Joins: mye (mye@moz-690373B4.dip0.t-ipconnect.de)
[10:42:00] <dbaupp> This is a work around for what will possibly look like `Primitive::<for Foo>::bits()` in future. When we get that syntax the methods will just be `fn bits() -> uint;` etc.
[10:42:25] *** Joins: KindOne (KindOne@moz-1F6A65EB.dynamic.ip.windstream.net)
[10:45:53] *** Joins: peterdn (chatzilla@moz-5EB9CC81.as13285.net)
[10:46:03] *** Quits: andre_ (andre@CA528A4A.45A4338E.8EE27E6.IP) (Ping timeout)
[10:48:50] <Yurume> Heather, okay, I've spotted the bug.
[10:49:08] <Yurume> ...though it seems a bit strange and may well be rustc's bug.
[10:51:10] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[10:54:01] *** Joins: dredozubov (dredozubov@2F14E2C1.F70E5FA9.F63E14E8.IP)
[10:55:29] <Heather> Yurume yes, possibly
[10:55:37] <nathan7> dbaupp: size_of is called as size_of<T>(), which seemed acceptable to me
[10:55:39] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[10:56:25] <Yurume> Heather, replace task::spawn_with(SingleThreaded) with just task::spawn, that fixes the stuck for me
[10:56:35] <Yurume> (in Wrappers.rs)
[10:56:39] *** Quits: dredozubov (dredozubov@2F14E2C1.F70E5FA9.F63E14E8.IP) (Ping timeout)
[10:57:22] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Ping timeout)
[10:57:25] *** Joins: andre_ (andre@CA528A4A.45A4338E.8EE27E6.IP)
[10:57:30] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[10:57:36] <Yurume> I don't know why, but I spotted pthread_join from gdb's `info threads` output
[10:58:19] *** Joins: dredozubov (dredozubov@2F14E2C1.F70E5FA9.F63E14E8.IP)
[10:59:05] <cmr> nathan7: no it isn't, it's definitely size_of::<T>
[10:59:50] <nathan7> cmr: oh okay
[11:00:03] <nathan7> the :: is a minor detail to me
[11:00:15] * nathan7 needs to do more Rust
[11:00:27] <dbaupp> nathan7: context?
[11:00:58] <dbaupp> nathan7: are you talking about the "Primitive::<for Foo>::bits()" syntax?
[11:00:59] <nathan7> the bits thing
[11:01:04] <nathan7> Yeah.
[11:01:07] <dbaupp> right, size_of is slightly different
[11:01:08] <Yurume> nathan7, that's because sizeof is not a built-in syntax in Rust, it's just like std::numeric_limits<T>::min() etc.
[11:01:12] <dbaupp> since it's not a trait method
[11:01:25] <nathan7> mhm
[11:01:29] <Yurume> hmm, seems that I missed the focus
[11:01:30] <Yurume> anyway
[11:01:34] <cmr> rusti: let sizeof = 5
[11:01:36] <nathan7> that makes sense
[11:01:36] -rusti- <anon>:9:13: 9:19 error: `sizeof` is a reserved keyword
[11:01:36] -rusti- <anon>:9          let sizeof = 5
[11:01:36] -rusti-                       ^~~~~~
[11:01:36] -rusti- application terminated with error code 101
[11:01:38] <cmr> Mm
[11:01:46] <cmr> I wonder how hard it would be to fix that..
[11:01:48] <Yurume> what?
[11:01:52] <nathan7> > sizeof 3
[11:02:02] <dbaupp> cmr: "fix"? what's broken about it?
[11:02:33] <cmr> dbaupp: it's not a constexpr
[11:02:59] <dbaupp> cmr: oh, you mean "implement sizeof as a constexpr"?
[11:03:15] <cmr> yeah
[11:03:49] <dbaupp> type T = [int, .. sizeof u8]; type U = [int, .. sizeof T];
[11:03:54] *** Quits: zaphod_b (ford_p@moz-CCE57F2F.eblcom.ch) (Ping timeout)
[11:03:57] <dbaupp> have fun digging around in typeck :P
[11:04:29] <dbaupp> merging trans and the type checker... "yay" :P
[11:04:40] <cmr> oh yeah
[11:04:42] <cmr> good point
[11:05:00] <cmr> that's going to be hard and platform specific :\
[11:05:24] <dbaupp> well, it's mostly just having the logic in trans available to the type checker/const evaluator, I guess.
[11:05:43] <cmr> yeah, and it's doable... for the most part.
[11:05:48] <dbaupp> along with some tricks for something like `type T = [int, .. sizeof ~T]`
[11:06:26] <cmr> rusti: struct A { a: [B, ..sizeof B] } struct B { b: [A, ..sizeof A] }
[11:06:26] -rusti- <anon>:9:29: 9:35 error: `sizeof` is a reserved keyword
[11:06:26] -rusti- <anon>:9          struct A { a: [B, ..sizeof B] } struct B { b: [A, ..sizeof A] }
[11:06:26] -rusti-                                       ^~~~~~
[11:06:26] -rusti- application terminated with error code 101
[11:06:28] <dbaupp> (also, it'd be useful if `sizeof <expr>` worked as well as `sizeof <type>`... but cover grammar, I geuss.
[11:06:31] <cmr> heh, it doesn't even parse.
[11:06:32] <dbaupp> )
[11:06:56] <cmr> rusti: struct A { a: B } struct B { b: A }
[11:06:58] -rusti- pastebinned 8 lines of output: http://sprunge.us/KGTd
[11:08:28] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[11:10:11] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[11:10:17] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[11:11:39] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[11:12:29] *** Joins: mib_w95hhd (Mibbit@E2775782.D39F47AF.3BD9FE04.IP)
[11:12:44] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[11:13:16] *** Quits: mib_w95hhd (Mibbit@E2775782.D39F47AF.3BD9FE04.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[11:13:28] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[11:13:42] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[11:14:56] *** Joins: zxcdw (r-a@ACF33729.B543C4DE.3933CC16.IP)
[11:15:28] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[11:15:31] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[11:19:01] *** pmoore is now known as pmoore|lunch
[11:20:02] <diverse> so, does drop() actually nil the variable or literally dispose of it?
[11:20:11] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[11:20:29] <cmr> diverse: what do you mean nil?
[11:20:35] <cmr> and what do you mean dispose? :P
[11:20:37] <cmr> It's a normal move.
[11:20:40] <diverse> `()`
[11:20:49] *** Joins: Ble1 (philipp@moz-B2F9E4BD.cust.bluewin.ch)
[11:21:07] <cmr> Moves it into the functions stack frame, which immediately returns, thus calling the drop glue, which calls the destructor.
[11:21:22] *** Quits: Blei (philipp@moz-B2F9E4BD.cust.bluewin.ch) (Ping timeout)
[11:21:28] *** Ble1 is now known as Blei
[11:21:41] <diverse> cmr: so thats what they are doing here? https://github.com/mozilla/rust/commit/9635c763ba5edc8c8ea2868b895548b52f640e5a
[11:21:55] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[11:22:21] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Ping timeout)
[11:22:45] *** Joins: lpy (lpy@B07408E1.F09091A8.1348A864.IP)
[11:23:01] <cmr> diverse: that's just a rename
[11:23:10] <cmr> but yes.
[11:23:24] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[11:23:25] <diverse> Cool, thanks.
[11:23:29] <Heather> Fix Mirana !
[11:23:45] <Heather> :(
[11:23:54] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[11:24:24] *** Quits: Kingsley (kingsley@9B172CBE.BEA5C56D.DF4B730F.IP) (Ping timeout)
[11:25:51] *** Joins: Kingsley (kingsley@9B172CBE.BEA5C56D.DF4B730F.IP)
[11:26:11] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[11:26:11] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[11:26:40] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[11:26:55] <diverse> cmr: that's pretty neat. :)
[11:27:40] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Quit: Sharp)
[11:28:22] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[11:28:42] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Ping timeout)
[11:29:07] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[11:29:31] <octurion> Shouldn't Unsigned inherit all traits that Int does?
[11:30:02] <cmr> octurion: most likely!
[11:30:08] <octurion> This would allow, for example,  to rely on the fact that >> is a logical shift.
[11:30:21] <octurion> (with unsigned types)
[11:32:03] *** Joins: TisButMe (Mibbit@moz-40463609.w80-9.abo.wanadoo.fr)
[11:33:08] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[11:34:40] <diverse> Umm? http://static.rust-lang.org/doc/master/std/num/trait.Int.html 
[11:34:44] <diverse> It does?
[11:34:54] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[11:35:08] <TisButMe> Hi there. Can anyone tell me which encoding is used internally to store Rust's strings ? The manual says UTF-8, but 'Ã¤' seems to be stored as 195, which doesn't fit with the table I've seen ?
[11:35:15] <octurion> diverse: http://static.rust-lang.org/doc/master/std/num/trait.Unsigned.html
[11:35:23] <Ms2ger> TisButMe, utf-8 it is
[11:35:36] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Ping timeout)
[11:35:40] <Ms2ger> rusti: "ä".to_bytes()
[11:35:41] -rusti- error: internal compiler error: unexpected failure
[11:35:41] -rusti- note: the compiler hit an unexpected failure path. this is a bug
[11:35:41] -rusti- note: try running with RUST_LOG=rustc=1 to get further details and report the results to github.com/mozilla/rust/issues
[11:35:41] -rusti- application terminated with error code 101
[11:35:44] <Ms2ger> Bah
[11:36:02] <Ms2ger> rusti: "ä".as_bytes()
[11:36:02] -rusti- error: internal compiler error: unexpected failure
[11:36:02] -rusti- note: the compiler hit an unexpected failure path. this is a bug
[11:36:03] -rusti- note: try running with RUST_LOG=rustc=1 to get further details and report the results to github.com/mozilla/rust/issues
[11:36:03] -rusti- application terminated with error code 101
[11:36:09] <Ms2ger> rusti: "a".as_bytes()
[11:36:10] -rusti- &[97u8]
[11:36:30] <TisButMe> "Ã¤".as-bytes()
[11:36:36] <TisButMe> "Ã¤".as_bytes()
[11:36:44] <Ms2ger> rusti: "\u00e4".as_bytes()
[11:36:44] <TisButMe> I can't play ? :)
[11:36:45] -rusti- &[195u8, 164u8]
[11:36:51] <octurion> diverse: If your code mustn't use signed types, then you should use Unsigned, not Int
[11:36:53] <cmr> TisButMe: needs the rusti prefix.
[11:37:16] <TisButMe> rusti: "Ã¤".as_bytes()
[11:37:17] -rusti- &[195u8, 164u8]
[11:37:27] <TisButMe> alright, so it gives 195
[11:37:40] <cmr> it's utf8
[11:37:42] <Ms2ger> Right
[11:37:51] <TisButMe> which according to http://www.utf8-chartable.de/ is not supposed to be true ?
[11:38:17] <dbaupp> TisButMe: it is giving "195 164" the two bytes make up the single Ã¤ character
[11:38:23] <Ms2ger> 0xC3, and 0xC2-0xDF means there's another byte following
[11:38:35] <TisButMe> oh, ok
[11:38:46] *** Joins: Joe8Bit_ (Joe8Bit@moz-FB3BBD36.hari.cable.virginm.net)
[11:39:19] <TisButMe> Anyways, that's not really why I'm here :). When using the slice method on strings, if first uses is_char_boundary in an assert!
[11:39:29] <Ms2ger> Yep
[11:39:38] <Ms2ger> All strings need to be valid utf-8
[11:39:39] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[11:39:45] <TisButMe> and the is_char_boundary method checks b < 128u8 || b >= 192u8
[11:40:04] <Ms2ger> So in the case of ä, you can't split it between 195u8 and 164u8
[11:40:25] <TisButMe> wait, the splice works on bytes and not chars ?
[11:40:39] <Ms2ger> I believe so
[11:40:51] <TisButMe> alright
[11:40:56] <TisButMe> Thanks for the help :)
[11:41:00] <Ms2ger> "Returns a slice of the given string from the byte range [begin..end)"
[11:41:07] <nmatsakis> TisButMe: Reasoning is that byte indexing is cheap, char indexing is expensive, and usually if you are iterating over characters you can easily maintain the byte indices as you go
[11:41:08] <TisButMe> indeed.
[11:41:09] <Ms2ger> slice_chars
[11:41:11] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[11:41:23] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[11:41:23] *** Quits: Kingsley (kingsley@9B172CBE.BEA5C56D.DF4B730F.IP) (Ping timeout)
[11:41:40] <TisButMe> Someday i'll learn how to read. Thanks everyone :)
[11:42:04] <Ms2ger> Np
[11:42:22] *** Joins: Kingsley (kingsley@9B172CBE.BEA5C56D.DF4B730F.IP)
[11:44:55] <diverse> octurion: I see, so you want "pub trait Unsigned: Num + Int {}" to make Unsigned distinct
[11:45:18] <octurion> diverse: Yes
[11:45:31] <Heather> no-one wants to fix mirana :(
[11:45:36] <octurion> diverse: Actually scratch that
[11:46:05] *** Quits: Ms2ger (Ms2ger@moz-F5FA54B5.ugent.be) (Quit: bbl)
[11:46:05] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[11:46:07] *** Quits: Kingsley (kingsley@9B172CBE.BEA5C56D.DF4B730F.IP) (Ping timeout)
[11:46:28] <octurion> I want Integer + Primitive + Bitwise + BitCount to be Unsigned
[11:46:50] *** Joins: Kingsley (kingsley@9B172CBE.BEA5C56D.DF4B730F.IP)
[11:47:14] <octurion> Signed types implement Num + Int
[11:47:19] <octurion> too
[11:47:24] *** Joins: heftig (heftig@moz-F8B26C9F.dip0.t-ipconnect.de)
[11:48:40] *** Parts: Joe8Bit_ (Joe8Bit@moz-FB3BBD36.hari.cable.virginm.net) (Textual IRC Client: www.textualapp.com)
[11:48:52] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[11:49:19] *** pmoore|lunch is now known as pmoore
[11:49:26] <Blei> Heather: doesn't yurume's fix work?
[11:51:56] <Heather> Blei which
[11:52:16] *** Quits: AutomatedTester (David@moz-DB4A9C19.scl3.mozilla.com) (Quit: ZNC - http://znc.in)
[11:52:16] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Quit: ZNC - http://znc.in)
[11:52:16] *** Quits: pmoore (pmoore@moz-DB4A9C19.scl3.mozilla.com) (Write error: Connection reset by peer)
[11:52:38] <Heather> ah
[11:52:40] *** Quits: thomas001 (thomas@moz-968FA222.informatik.uni-leipzig.de) (Ping timeout)
[11:52:42] <Heather> Sorry I missed it
[11:52:44] <Heather> let me try
[11:53:25] *** Quits: Kingsley (kingsley@9B172CBE.BEA5C56D.DF4B730F.IP) (Ping timeout)
[11:54:07] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[11:54:22] *** Joins: Ke (jkarlson@moz-785A3407.org.aalto.fi)
[11:54:35] *** Joins: Kingsley (kingsley@9B172CBE.BEA5C56D.DF4B730F.IP)
[11:55:22] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[12:00:23] <Heather> Blub Yurume same effect with spawn for me :S
[12:01:32] *** Joins: pmoore|away (pmoore@moz-DB4A9C19.scl3.mozilla.com)
[12:01:32] *** Quits: pmoore|away (pmoore@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[12:01:37] *** Joins: frenberg (frenberg@moz-AEFEBCBF.netatonce.net)
[12:02:32] *** Joins: pmoore|away (pmoore@moz-DB4A9C19.scl3.mozilla.com)
[12:02:32] *** Quits: pmoore|away (pmoore@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[12:02:44] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[12:03:02] *** Joins: pmoore|away (pmoore@moz-DB4A9C19.scl3.mozilla.com)
[12:03:02] *** Quits: pmoore|away (pmoore@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[12:03:32] *** Joins: pmoore|away (pmoore@moz-DB4A9C19.scl3.mozilla.com)
[12:03:32] *** Quits: pmoore|away (pmoore@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[12:03:37] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[12:04:02] *** Joins: pmoore|away (pmoore@moz-DB4A9C19.scl3.mozilla.com)
[12:04:02] *** Quits: pmoore|away (pmoore@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[12:04:04] *** Quits: frenberg (frenberg@moz-AEFEBCBF.netatonce.net) (Quit: Leaving)
[12:04:32] *** Joins: pmoore|away (pmoore@moz-DB4A9C19.scl3.mozilla.com)
[12:04:32] *** Quits: pmoore|away (pmoore@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[12:05:02] *** Joins: pmoore|away (pmoore@moz-DB4A9C19.scl3.mozilla.com)
[12:05:02] *** Quits: pmoore|away (pmoore@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[12:05:25] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[12:05:32] *** Joins: pmoore|away (pmoore@moz-DB4A9C19.scl3.mozilla.com)
[12:05:32] *** Quits: pmoore|away (pmoore@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[12:05:49] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[12:06:02] *** Joins: pmoore|away (pmoore@moz-DB4A9C19.scl3.mozilla.com)
[12:06:02] *** Quits: pmoore|away (pmoore@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[12:06:20] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Client exited)
[12:06:32] *** Joins: pmoore|away (pmoore@moz-DB4A9C19.scl3.mozilla.com)
[12:06:32] *** Quits: pmoore|away (pmoore@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[12:07:02] *** Joins: pmoore|away (pmoore@moz-DB4A9C19.scl3.mozilla.com)
[12:07:02] *** Quits: pmoore|away (pmoore@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[12:07:32] *** Joins: pmoore|away (pmoore@moz-DB4A9C19.scl3.mozilla.com)
[12:07:32] *** Quits: pmoore|away (pmoore@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[12:08:02] *** Joins: pmoore|away (pmoore@moz-DB4A9C19.scl3.mozilla.com)
[12:08:02] *** Quits: pmoore|away (pmoore@moz-DB4A9C19.scl3.mozilla.com) (Max SendQ exceeded)
[12:08:12] <Blei> Heather: how do i use this tool? all i get are errors
[12:08:21] <Blei> 'Unhandled condition: io_error: io::IoError{kind: OtherIoError, desc: "not a directory", detail: None}'
[12:08:31] <Heather> ahm...
[12:08:42] *** Joins: pmoore (pmoore@moz-DB4A9C19.scl3.mozilla.com)
[12:08:43] <Heather> Blei do you run linux ?
[12:08:49] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[12:08:53] <Blei> i do
[12:08:56] <diverse> Most people here would.
[12:09:02] <cmr> diverse: A bunch use OS X
[12:09:20] *** Quits: arodier74 (Thunderbir@5901C3C8.B6144566.D3B9122.IP) (Ping timeout)
[12:09:22] <Heather> Blei it's line 132 in Mirana.rs
[12:09:29] <Heather> Blei do you have XDG_CONFIG_HOME ?
[12:09:34] *** Quits: andre_ (andre@CA528A4A.45A4338E.8EE27E6.IP) (Ping timeout)
[12:09:49] <Heather> I didn't tested this part of code yet
[12:10:20] <diverse> cmr: sigh
[12:10:22] <Blei> Heather: i don't :S
[12:10:26] <diverse> *most people here would use UNIX-like systems or OSes that use a FreeBSD kernel
[12:10:31] <Heather> how you don't ...
[12:10:40] <Blei> i don't know :3
[12:10:44] <Blei> i'll set it manually
[12:10:55] <Heather> echo ${01XDG_CONFIG_HOME01}
[12:11:10] <Blei> ah, much better
[12:11:14] <Blei> yeah, it was not set
[12:11:15] *** Joins: arodier74 (Thunderbir@5901C3C8.B6144566.D3B9122.IP)
[12:11:19] <Blei> I've set it manually now
[12:11:23] <Heather> Poettring sayd any linux should have it
[12:11:27] <Blei> ok, it's hanging here as well
[12:11:54] <Heather> you mean stuck on -a or -d ?
[12:11:57] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[12:12:06] <Blei> stuck on `./Mirana`
[12:12:18] <Heather> Blei any error?
[12:12:38] <Blei> nothing
[12:12:54] <Heather> Blei o_O
[12:12:58] <Heather> e.g. just nothing ?
[12:13:08] <Heather> Blei may you show full log of running it?
[12:13:46] <Blei> Heather: http://paste.factorcode.org/paste?id=3122
[12:14:00] <Heather> Blei it's ok, run again
[12:14:25] <Heather> Blei it's created 2 json files
[12:15:01] <Blei> http://paste.factorcode.org/paste?id=3122#1421
[12:15:07] <Blei> yeah, it works now
[12:15:11] <Blei> i.e. is not stuck
[12:15:26] <TisButMe> Does anyone know a nice piece of code where lifetimes are used within structs ?
[12:15:27] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[12:15:33] <Heather> Blei now mirana -a test
[12:15:44] <cmr> TisButMe: almost all of the iterators.
[12:15:52] <TisButMe> thanks
[12:15:59] <Blei> Heather: ok, now it's stuck again
[12:16:09] <Blei> "test added" is the last output
[12:16:36] <Heather> Blei and no stuck?
[12:16:39] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[12:16:51] <dbaupp> TisButMe: https://github.com/mozilla/rust/blob/master/src/libstd/comm.rs#L51-L76 is one (relatively) simple example
[12:16:53] <Heather> e.g. you don't need ctrl+c it
[12:16:55] <Heather> ?
[12:16:57] <Blei> it's stuck
[12:17:03] <Heather> that's issue
[12:17:09] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[12:17:13] <Heather> I can't understand why is it stucking there
[12:17:19] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[12:17:24] *** Joins: kphelps (kphelps@moz-8B098CA5.hsd1.ma.comcast.net)
[12:18:00] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[12:18:57] <eddyb> time: 5435.027s      translation
[12:19:09] <eddyb> I have truly created the ultimate compiler benchmark
[12:20:17] <Blei> heh, so many threads
[12:20:23] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[12:20:31] <eddyb> it's been running for more than 3 hours now, peaked at 3.5GB (I think. might have went further) and right now it's still running LLVM passes
[12:20:40] <Heather> Blei also strange .... why it's failed to clone tyapa
[12:21:00] <Heather> Blei no access I guess
[12:21:08] <Blei> no access to `/home/tyapa`
[12:21:12] <Heather> Blei try sudo mirana )
[12:21:18] <Blei> no :D
[12:21:24] <diverse> rofl
[12:21:34] <Heather> Blei it will only create /home/tyapa :D
[12:21:54] <diverse> Blei: chroot and then run sudo mirana
[12:22:06] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[12:22:42] *** jorendorff_away is now known as jorendorff
[12:22:58] *** Joins: andre_ (andre@CA528A4A.45A4338E.8EE27E6.IP)
[12:23:04] <Heather> Blei I should really clone test repository somewhere else )))
[12:23:13] <Blei> and now my music player crashed... i blame you guys
[12:23:26] <Heather> eh?
[12:23:31] <Blei> j/k
[12:23:31] <diverse> hey I told you to chroot, that's your problem :P
[12:23:51] *** Quits: lpy (lpy@B07408E1.F09091A8.1348A864.IP) (Ping timeout)
[12:24:00] <eddyb> diverse: are you assuming chroot is enough to hold Russian code back?
[12:24:15] <Heather> -_-'
[12:24:42] <Heather> Blei it's line 387 saying to clone to /home/...
[12:24:45] <eddyb> I would've made a joke, but got nothin'
[12:24:51] <diverse> eddyb: I'm talking for testing, not setting up jails where you run servers that forward to the internet.
[12:25:15] <diverse> and also joking
[12:25:26] <eddyb> about my monster, the process manager reports 6 minutes of total user time
[12:25:27] <Heather> have users access to /var ?
[12:25:32] <Heather> maybe clone to var ?
[12:25:40] <cmr> ... why not /tmp ?
[12:25:41] <Heather> var/lib/mirana/stuff ?
[12:25:49] <Heather> because I usually clean tmp
[12:25:52] <diverse> cmr: +1
[12:25:57] <Heather> and it's not temporary
[12:26:17] <cmr> Then why not let the directory be configurable?
[12:26:22] <cmr> cli arg or config file or something..
[12:26:28] <Heather> it's configurable
[12:26:33] <Heather> but /home is default
[12:26:37] <Heather> which is not very good
[12:26:38] <eddyb> --cfg + cfg!
[12:26:54] <Heather> eddyb ?
[12:27:06] *** Joins: lpy (lpy@B07408E1.F09091A8.1348A864.IP)
[12:27:13] <eddyb> wait, can cfg! extract strings or just bools?
[12:27:14] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[12:27:24] <dbaupp> eddyb: it just tests for existence
[12:27:32] <dbaupp> (and equality)
[12:28:10] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[12:28:25] <octurion> Is it possible to shift an std::num::Bitwise type by an amount of type uint?
[12:28:37] *** Quits: sk (sk@61A494B3.BA40E8A.AAC02D62.IP) (Quit: Leaving)
[12:28:39] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Connection reset by peer)
[12:28:45] *** Joins: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net)
[12:28:56] <octurion> Shl<Self, Self> and Shr<Self, Self> do not allow this
[12:28:59] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[12:29:00] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[12:29:13] <cmr> octurion: if Self implements FromPrimitive, yes :P
[12:30:44] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[12:31:02] <Heather> so
[12:31:12] <Heather> does /var available for users to write to ?
[12:31:17] <Heather> e.g. /var/lib/mirana/stuff ?
[12:31:43] <diverse> for config?
[12:31:43] <cmr> no
[12:31:59] <Heather> for repositories
[12:32:06] <cmr> (not generally, and certainly not on any linux distro by default_
[12:32:07] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[12:32:08] <Heather> that's sad....
[12:32:20] <diverse> probably for /usr
[12:32:25] <cmr> User writable is typically only home and /tmp
[12:32:30] <Heather> and it's weird more and more users have no 01XDG_CONFIG_HOME env var.... Poettring is liar
[12:32:42] <cmr> Most people *don't* have an XDG_CONFIG_HOME 
[12:32:46] <cmr> That's why it has a default value.
[12:32:58] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[12:33:03] *** Joins: Ms2ger (Ms2ger@moz-B6861E63.ibbt.be)
[12:33:13] <Heather> then I also should check HOME/.config
[12:33:21] <diverse> Heather: take my advice, don't listen to Poettring, and don't buy into his systemd gimmick
[12:33:37] <Heather> diverse I switched to systemd :D
[12:33:46] <Blei> this is so weird
[12:33:47] <Heather> because of gnome3 at first ...
[12:33:47] <diverse> ;/
[12:33:55] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[12:33:57] <Heather> Blei what ?
[12:34:05] <Blei> even when removing everything that spawns anything it's still stuck
[12:34:15] <Blei> and none of the threads show any relevant stacktrace
[12:34:16] <Heather> Blei rust bug?
[12:34:19] <Heather> possibly...
[12:34:21] <Blei> maybe
[12:34:57] *** Joins: vmx (vmx@moz-C9BC1A9E.pools.arcor-ip.net)
[12:35:28] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[12:35:54] <Blei> or uv bug
[12:36:02] <cmr> more likely a rust bug
[12:36:05] <eddyb> cmr: I think that because of the swapping, it took 35 times longer to run than it actually needed to >_>
[12:36:13] <cmr> eddyb: sounds accurate.
[12:36:33] <Heather> >_>
[12:36:35] <cmr> eddyb: is this the thing you gisted in #rust-osdev?
[12:36:42] <cmr> Or.. can you gist it? :P
[12:36:48] * cmr has bountiful RAMs
[12:37:05] <diverse> 32G?
[12:37:12] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[12:37:18] <cmr> well, 16G, but I have access to a machine with 192G if I need it.
[12:37:23] <diverse> nice
[12:37:45] <eddyb> I should just give up and buy 4GB of RAM so I can do something at all
[12:38:13] *** Quits: octurion (octurion@moz-E7EA111C.clients.kiwiirc.com) (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
[12:38:41] *** Joins: donri (donri@moz-9BB61102.tbcn.telia.com)
[12:38:47] *** Joins: canhtak (canhtak@moz-A53E1151.wl.t.ulaval.ca)
[12:39:50] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[12:40:06] <Heather> Blei pushed lesser path fixes, may you try it? )
[12:40:30] <vmx> acrichto: thanks for fixing issue 10790. now it only needs to get reviewed
[12:41:18] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[12:41:41] <eddyb> cmr: was my last message about 4GB of RAM?
[12:41:58] <diverse> eddyb: yes
[12:42:01] <diverse> and only that
[12:42:02] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[12:42:07] <vmx> btw: how are reviews done in the rust project? how do you know that you are the one that should review something (i'm used to gerrit for review, where you assign people that should review your change)
[12:42:14] <eddyb> "cmr: oh now you're just making me jelly. it's almost the same thing I gisted + a main function that tests the contraption (and instantiates the huge default function in the trait)"
[12:42:23] <diverse> rofl
[12:42:25] <cmr> eddyb: I don't see a gist link anywere.
[12:42:53] <cmr> vmx: most of us just browse the bors queue from time to time and review randomly.
[12:43:16] <eddyb> unless poked sufficiently by me :P
[12:43:25] <Blei> Heather: still fails with same error
[12:43:32] <Heather> Blei :S
[12:43:34] <cmr> If we don't feel comfortable giving it an r+, we wait for another reviewer, or specifically @ping someone (usually code "owner")
[12:43:37] <Heather> Blei access ?
[12:44:12] <Blei> 'Unhandled condition: io_error: io::IoError{kind: OtherIoError, desc: "not a directory", detail: None}'
[12:44:19] <Heather> ....
[12:44:29] <Heather> ...
[12:44:33] <Heather> WHY
[12:44:34] <cmr> vmx: it's pretty informal atm
[12:44:45] <cmr> Blei: strace it to see which directory it's looking for.
[12:44:47] <eddyb> cmr: it's almost the same as the older arch-x86_16.rs I have on gist, which I linked a few days ago. this revision isn't anywhere and right now I can do nothing about that
[12:44:53] <vmx> cmr: thanks for the info. that's cool to hear
[12:45:11] <eddyb> unless... I can probably run the ix tool from the IRC client :D
[12:45:49] <vmx> i really like they way things work at mozilla. i'm happy that i work on an open source project for work, but it sadly is corporate open source, not community driven open source
[12:45:51] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[12:46:38] *** Quits: pnkfelix (pnkfelix@1ED7AD9.5831E18D.54C3481B.IP) (Quit: Leaving.)
[12:46:42] <eddyb> cmd: http://ix.io/9ft
[12:46:52] <eddyb> cmr: ^ does that work? should have a main function
[12:46:53] <diverse> vmx: why not suggest to your boss for community contributions?
[12:47:04] <cmr> eddyb: yes!
[12:47:07] <cmr> but nothing else :P
[12:47:08] <Heather> Blei I've  got getenv("XDG_CONFIG_HOME")                     .unwrap_or(getenv("HOME")                     .unwrap_or(~"./"))).join("Mirana"); how that could not exist :S
[12:47:14] <cmr> I imagine it's just the normal x16 dist?
[12:47:20] <eddyb> nope
[12:47:36] <eddyb> cmr: the file is huge, though
[12:47:41] <eddyb> cmd: file 1 over limit 1000000B
[12:47:43] <eddyb> cmd: http://ix.io/
[12:48:24] <cmr> s/dist/gist/
[12:48:34] <cmr> by normal I mean the one it's including.
[12:49:01] <cmr> vmx: I imagine the process will change as rust matures and becomes more stable.
[12:49:11] <cmr> vmx: but it is very nice :)
[12:49:18] <vmx> diverse: they are generally open to it, so i can build a community if i'd like tom but it's just hard to build a community without being fully backed by the company (and it's something that's not really useful for the average person)
[12:49:51] <eddyb> cmr: well... it might work with it, if you remove the () type params in the file with fn main() - and remove the empty fn main(){} in the gist. but I'd rather upload the current version. any ideas?
[12:50:15] <Blei> Heather: oh, wait a second
[12:50:17] <Blei> ...
[12:50:19] <cmr> ideas for.. what?
[12:50:30] <eddyb> one-liner upload :P
[12:50:31] <Heather> Blei ok
[12:50:32] <cmr> oh
[12:50:32] <Blei> i fetched the updates but didn't merge them yet :/
[12:50:40] <Heather> Blei :D
[12:50:40] <cmr> well, arke.me has anonymous ftp access :p
[12:51:08] <Blei> Heather: ok, works now!
[12:51:15] <Blei> (but it's still stuck, of course)
[12:51:16] <Heather> great :D
[12:51:32] <diverse> Blei: way to land the punch line
[12:51:39] <Heather> Blei when run with no parameters goes fine ?
[12:51:58] <Blei> yeah, tyapa has been cloned
[12:52:04] <Heather> >_<
[12:52:07] <Heather> cool
[12:52:12] *** Quits: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[12:52:27] <cmr> vmx: https://github.com/mozilla/rust/wiki/Note-development-policy
[12:52:30] <cmr> vmx: finally found it :P
[12:52:58] <Heather> Blei Yurume must we write an bugreport about Mirana ?
[12:53:51] *** Quits: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com) (Ping timeout)
[12:54:01] <Blei> probably would be a good idea
[12:54:01] <vmx> cmr: thanks, i think i read it once a long time again. time to read it again
[12:54:17] <Blei> but the project is much too big, have to minimize an example first
[12:54:18] *** Joins: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com)
[12:54:51] <Heather> Blei it's hard.... it needs understanding what exactly causing it....
[12:56:25] *** Joins: abinader (abinader@D8B9C081.E820043D.D4C04133.IP)
[12:56:29] <Heather> Blei I think maybe opts.iter().filter_map(|opt| matches.opt_str(*opt)).next() making it?
[12:56:47] *** Quits: fabiand (fabiand@moz-E5C33560.adsl.alicedsl.de) (Quit: Verlassend)
[12:56:50] *** Quits: apoelstra (username@moz-C92A9641.sw.biz.rr.com) (Quit: WeeChat 0.4.1)
[12:57:13] *** Quits: canhtak (canhtak@moz-A53E1151.wl.t.ulaval.ca) (Ping timeout)
[12:58:11] *** Quits: Sgeo (quassel@moz-D0F30617.dyn.optonline.net) (Connection reset by peer)
[12:58:51] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[12:59:03] *** Joins: canhtak (canhtak@moz-A53E1151.wl.t.ulaval.ca)
[12:59:57] <vmx> and when a change gets r+ it gets merged into auto, if it passed into master. then the next change in the queue that got +r will be merged into auto. so there's always only one new change in auto. is that correct?
[13:00:07] <cmr> vmx: correct.
[13:02:08] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[13:02:34] <Blei> Heather: why do you think so?
[13:05:22] <Heather> Blei well because what else?
[13:05:47] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[13:06:19] *** Joins: Krymise (Nietzsche@moz-CA789EF5.nwrknj.fios.verizon.net)
[13:07:34] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[13:08:53] <bjz> rusti: std::task::with_task_name(|x| println!("{:?}", x))
[13:08:54] -rusti- You've met with a terrible fate, haven't you?
[13:08:54] -rusti- fatal runtime error: local malloc outside of task
[13:08:54] -rusti- application terminated abnormally with signal 11 (Segmentation fault)
[13:09:47] *** Quits: moostik (Icedove@moz-698B575F.w86-212.abo.wanadoo.fr) (Ping timeout)
[13:09:57] *** Quits: Kingsley (kingsley@9B172CBE.BEA5C56D.DF4B730F.IP) (Ping timeout)
[13:09:57] <bjz> :o
[13:10:58] *** Joins: Kingsley (kingsley@9B172CBE.BEA5C56D.DF4B730F.IP)
[13:11:06] <klutzy> SimonSapin: on #10707, did you implement (or do you have a plan to implement) domain label to ascii?
[13:11:15] <bjz> is there a way of asserting that you're on the main platform thread?
[13:12:28] <SimonSapin> klutzy: I have not. I was thinking of not supporting IDNA for the time being (just fail on non-ASCII labels)
[13:12:37] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[13:12:52] *** Quits: lpy (lpy@B07408E1.F09091A8.1348A864.IP) (Client exited)
[13:13:05] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[13:13:42] *** Quits: Kingsley (kingsley@9B172CBE.BEA5C56D.DF4B730F.IP) (Ping timeout)
[13:14:11] *** Joins: sk (sk@9E6B574B.EB2AA036.2CAF0D3B.IP)
[13:14:18] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[13:14:37] <Blei> Heather: fun: comment out line 266
[13:15:24] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Ping timeout)
[13:15:49] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[13:17:12] *** Joins: zaphod_b (ford_p@moz-CCE57F2F.eblcom.ch)
[13:17:42] *** Joins: Kingsley (kingsley@9B172CBE.BEA5C56D.DF4B730F.IP)
[13:17:54] *** Quits: canhtak (canhtak@moz-A53E1151.wl.t.ulaval.ca) (Quit: canhtak)
[13:18:57] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[13:20:43] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[13:21:28] <Blei> ok, narrowing it down
[13:21:32] <Blei> looks like a rust bug
[13:23:42] <Blei> Heather: change the code to look like this: https://gist.github.com/Blei/7787352
[13:24:49] <Blei> This one still gets stuck: https://gist.github.com/Blei/7787352#comment-963096
[13:25:35] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[13:25:51] <cmr> Does it still if you remove the @mut ?
[13:27:14] *** Joins: Caspy7 (chatzilla@A077DB81.8D4B4332.33F321FD.IP)
[13:27:26] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[13:27:40] <Blei> https://gist.github.com/Blei/7787352#comment-963097
[13:28:10] *** Joins: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net)
[13:28:14] <Caspy7> nmatsakis: saw this and thought it could be of interest http://developers.slashdot.org/story/13/12/04/0148255/the-challenge-of-cross-language-interoperability
[13:28:23] <Blei> so, @mut is broken in some circumstances
[13:28:32] <Caspy7> well, I suppose to anyone
[13:28:39] <nmatsakis> Caspy7: ok
[13:29:26] <nmatsakis> Blei: what does "not work" mean?
[13:29:33] *** Joins: Jesse (jruderman@moz-5973C6FA.oc.oc.cox.net)
[13:29:34] <cmr> Blei: troubling.. can you get a stack trace?
[13:29:36] <Blei> the corresponding project gets stuck
[13:29:41] <Blei> not sure about the exact reason
[13:29:47] <Blei> i assume some destructor is not being run
[13:29:52] <Blei> stacktrace incoming
[13:30:09] <Heather> Blei which line? )
[13:30:21] <Blei> https://gist.github.com/Blei/7787352#comment-963098
[13:30:23] *** Quits: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net) (Ping timeout)
[13:30:34] *** Parts: madjar (uid18432@moz-A42E5B7B.irccloud.com) ()
[13:31:03] *** Joins: canhtak (canhtak@moz-A53E1151.wl.t.ulaval.ca)
[13:31:08] <Blei> i assume the destructor of the constructed file is not run, causing some uv threads to wait eternally, causing the scheduler to wait eternally
[13:31:18] <Blei> but i haven't really looked into it yet
[13:31:37] *** jorendorff is now known as jorendorff_away
[13:31:54] <Blei> Heather: change save_JSONPretty to https://gist.github.com/Blei/7787352#comment-963097
[13:32:01] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[13:33:32] *** Quits: Krymise (Nietzsche@moz-CA789EF5.nwrknj.fios.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[13:33:50] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[13:36:34] <Heather> e.g. @mut -> &mut ?
[13:36:42] *** Joins: pnkfelix (pnkfelix@1ED7AD9.5831E18D.54C3481B.IP)
[13:37:30] <Heather> let mut f2 = f; ...
[13:37:44] <Blei> heh, more self contained example:
[13:38:11] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[13:38:15] <Blei> https://gist.github.com/Blei/7787352#comment-963102
[13:38:18] <Blei> get's stuck
[13:38:22] <Blei> *gets
[13:38:30] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[13:38:36] <Blei> Heather: yes
[13:38:40] <Blei> that should work
[13:39:38] <Heather> Blei yes, thanks!
[13:39:52] <Heather> another ugly hack in Mirana :D
[13:40:06] <Blei> Heather: well, it's more efficient at least :D
[13:40:19] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[13:40:19] <Heather> )
[13:40:27] <Heather> yep
[13:40:57] <Heather> and let's see if I can drop managed_boxes
[13:43:23] <Heather> Blei https://github.com/Heather/Mirana/commit/b2200cdd49676705b999678b60a84cc5adb8c3ff
[13:43:23] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[13:44:37] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[13:44:38] <Blei> Ty <3
[13:45:04] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[13:45:43] *** Quits: Kingsley (kingsley@9B172CBE.BEA5C56D.DF4B730F.IP) (Ping timeout)
[13:45:50] *** Joins: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net)
[13:46:33] <Heather> Blei huh, it's thanks to you )
[13:46:44] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[13:46:44] *** Joins: Kingsley (kingsley@9B172CBE.BEA5C56D.DF4B730F.IP)
[13:46:49] <mletterle> Good morning Rusticeans.
[13:46:59] <Heather> O_O
[13:48:16] <Heather> I will go nightclub ~end of this week and will dance like buildbot...
[13:48:44] <Blei> ok, even more minimized: https://gist.github.com/Blei/7787352#comment-963109
[13:48:45] <Heather> <(^.^<)
[13:48:47] <Heather> <(^.^)>
[13:48:53] <Blei> do buildbots dance?
[13:48:58] <diverse> Heather: well at least you went to using borrowed pointers, @T is going to the std lib anyway, so I think your code is a lot better.
[13:49:13] *** jorendorff_away is now known as jorendorff
[13:49:25] <Heather> diverse you mean after last change?
[13:49:30] <diverse> yeah
[13:49:48] <Heather> but still it's a lot of convertations :S
[13:49:57] *** jorendorff is now known as jorendorff_away
[13:50:19] <Heather> offtopic but how to write ' in sql string ?
[13:50:54] <eddyb> double it, maybe?
[13:51:03] <Heather> hm...
[13:51:31] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[13:51:33] <Heather> yes... if I include ' to " it should work
[13:51:42] <eddyb> s/include/replace/
[13:51:56] <Blei> s/replace/change/
[13:52:06] <diverse> haha
[13:52:07] <eddyb> oh, right, "to" silly me
[13:52:16] <eddyb> s/"/",/
[13:52:33] <Heather> hm
[13:52:35] <eddyb> Heather: best thing to do is use prepared queries (mentioning parameters that you supply outside of the string), at least AFAIK
[13:52:48] <eddyb> s/is/is to/
[13:53:12] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[13:53:44] *** Joins: jlong (jlong@moz-6DFDE846.socal.res.rr.com)
[13:53:47] <Heather> "" is not a sting
[13:53:53] <Heather> at least I can't exec it
[13:54:11] <diverse> http://stackoverflow.com/questions/1912095/how-to-do-a-sql-insert-with-a-value-with-an-apostrophe-in-it
[13:54:29] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[13:55:04] <Heather> ah...
[13:55:16] <diverse> basically `''` 
[13:55:31] <Heather> it works
[13:55:33] <Heather> thanks
[13:55:37] <Heather> in my case it's '''
[13:55:55] <Heather> a bit weird syntax )
[13:57:59] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[13:58:53] <Blei> reported: https://github.com/mozilla/rust/issues/10802
[13:58:59] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[14:00:01] <Heather> great, thanks
[14:00:05] *** Quits: beifeng (Mibbit@284C36E7.3062CEC3.670EEFD.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:01:27] <eddyb> Blei: DroppableStruct isn't dropable =))
[14:01:45] <diverse> irony
[14:02:13] <eddyb> Blei: at least AFAIK, zero-sized structures will bite you
[14:02:30] <Blei> well, in the original case, the struct wasn't zero-sized
[14:02:35] *** Quits: Kingsley (kingsley@9B172CBE.BEA5C56D.DF4B730F.IP) (Ping timeout)
[14:02:39] <Blei> appears to be independent
[14:02:55] <eddyb> Blei: if the test case behaves identically with a non-zero sized structure, add a field
[14:03:02] <Blei> ok, will do
[14:03:41] *** Joins: Kingsley (kingsley@9B172CBE.BEA5C56D.DF4B730F.IP)
[14:03:48] <Blei> done
[14:03:55] <eddyb> (you should retest all 4 cases just to make sure)
[14:04:49] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[14:05:39] <eddyb> rusti: struct Foo; impl Drop for Foo {fn drop(&mut self) {println!("Dropping");}} {let x = Foo;} fn foo(_: Foo) {} foo(Foo); Foo
[14:05:40] -rusti- pastebinned 7 lines of output: http://sprunge.us/dQMj
[14:05:59] *** Joins: Shaladdle (shaladdle@moz-FDE833F3.wv.cc.cmu.edu)
[14:06:15] <eddyb> hah, it works. I guess the "compute moves" pass does that
[14:06:54] <eddyb> rusti: #[deriving(ToStr)] struct Foo; impl Drop for Foo {fn drop(&mut self) {println!("Dropping");}} &Foo as &ToStr
[14:06:55] -rusti- <anon>:9:103: 9:117 error: failed to find an implementation of trait std::to_str::ToStr for main::Foo
[14:06:55] -rusti- <anon>:9          #[deriving(ToStr)] struct Foo; impl Drop for Foo {fn drop(&mut self) {println!("Dropping");}} &Foo as &ToStr
[14:06:55] -rusti-                                                                                                                 ^~~~~~~~~~~~~~
[14:06:55] -rusti- application terminated with error code 101
[14:07:09] <eddyb> hmpf
[14:09:10] <eddyb> Blei: *maybe* I was wrong. anyways, funkier things go on behind the scenes ^-^
[14:09:32] <Blei> wrong in what way?
[14:10:02] <eddyb> Blei: zero-sized structures appear droppable, at least in the immediate (no trait indirection) case
[14:10:02] *** Joins: sbalmos (quassel@CA5677B6.576D0C1.ED2EFC1B.IP)
[14:10:14] <Blei> ah, i see
[14:10:28] <Blei> well, i tested that with my code, didn't i ;)
[14:12:05] <bjz> eddyb: can't do attributes in rusti
[14:15:24] * eddyb should use his laptop keyboard, it's just the perfect temperature during winter :D
[14:16:21] *** Quits: diverse (diverse@moz-ED94B8D.oc.oc.cox.net) (Quit: WeeChat 0.4.2)
[14:17:19] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[14:17:21] *** Parts: Heather (Heather@19663F6.F53BAACC.9C17E900.IP) ()
[14:17:36] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[14:19:11] *** Quits: kphelps (kphelps@moz-8B098CA5.hsd1.ma.comcast.net) (Ping timeout)
[14:19:22] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[14:20:04] *** Quits: heftig (heftig@moz-F8B26C9F.dip0.t-ipconnect.de) (Ping timeout)
[14:28:33] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[14:29:26] *** Joins: Savago (Savago@D8B9C081.E820043D.D4C04133.IP)
[14:30:42] *** Quits: Tari (tari@moz-1713FB27.mtu.edu) (Ping timeout)
[14:31:17] *** Joins: Tari (tari@moz-1713FB27.mtu.edu)
[14:32:15] *** pmoore is now known as pmoore|away
[14:32:18] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[14:32:23] *** Joins: octurion (octurion@moz-4C1E443F.clients.kiwiirc.com)
[14:32:32] <abinader> is there a similar to __func__ in rust?
[14:33:23] <abinader> i.e. I want to print the function name/signature, like println!("{}", function_name);
[14:34:51] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[14:35:10] <eddyb> rusti: {struct Foo; format!("{:?}", Foo)}
[14:35:10] -rusti- ~"main::Foo"
[14:35:21] *** Joins: pepper_chico (pepper_chi@8035D121.EE19EE8C.F546FA5F.IP)
[14:35:21] *** jorendorff_away is now known as jorendorff
[14:35:59] <eddyb> abinader: I'm not aware of a proper solution, you can always do ^ that and replace "::StructName" at the end with ""
[14:36:36] <abinader> eddyb: thanks, I'll try :-)
[14:37:48] <Amaranth> rusti: format!("{:?}", stringify!(arbitrary_text))
[14:37:48] -rusti- ~"\"arbitrary_text\""
[14:37:56] <Amaranth> You could always go that route too
[14:38:07] <octurion> Why does 0x8000i16 to 0xFFFFi16 result in an out of range compiler error, while 0x8000i16 does not?
[14:38:11] <Amaranth> Won't work for passing a function pointer around though
[14:38:17] *** Quits: Tari (tari@moz-1713FB27.mtu.edu) (Ping timeout)
[14:38:20] *** pmoore|away is now known as pmoore
[14:38:21] *** pmoore is now known as pmoore|mtg
[14:38:26] <octurion> rusti: 0x8000i16
[14:38:27] -rusti- -32768i16
[14:38:31] <octurion> rusti: 0x8001i16
[14:38:32] -rusti- <anon>:9:9: 9:18 error: literal out of range for its type
[14:38:32] -rusti- <anon>:9          0x8001i16
[14:38:32] -rusti-                   ^~~~~~~~~
[14:38:32] -rusti- error: aborting due to previous error
[14:38:32] -rusti- application terminated with error code 101
[14:38:36] <eddyb> Amaranth: nah, abinader needs the name of the enclosing function
[14:39:01] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[14:39:17] <Amaranth> eddyb: Yeah I was just saying you could cheat and be explicit even though it's more work
[14:39:50] <Amaranth> But it seems you can't really do anything without triggering generation of RTTI info so you may as well use it
[14:40:11] *** Joins: Tari (tari@moz-1713FB27.mtu.edu)
[14:40:41] <eddyb> Amaranth: the only places I've seen __func__ used in C/C++ were macros which you could put in any function and they would still do the right thing
[14:40:43] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[14:41:08] <eddyb> like a DEBUG(...) that prepends "[function_name] " to the output
[14:41:44] <Amaranth> I understand that I'm just always looking for ways to avoid RTTI
[14:41:57] *** Joins: FreeFull (freefull@moz-672577F6.as13285.net)
[14:42:07] <cmr> octurion: probably a bug! using a <= when there shuold be a <
[14:42:16] <abinader> eddyb: yes, that's more or less my use case (good ol' debugging)
[14:44:24] *** Joins: heftig (heftig@moz-C8EBC776.dip0.t-ipconnect.de)
[14:45:14] <Blei> abinader: i don't think that exists, there is file!() and line!() though
[14:45:28] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Quit: Leaving...)
[14:45:37] <abinader> Blei: guess that should suffice for now then
[14:45:40] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[14:47:23] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[14:50:21] *** Joins: reyre (reyre@moz-89E9865B.com)
[14:50:56] *** Quits: penguin_dan (dan_johnsi@6902762D.11B071D.FB9A45AF.IP) (Client exited)
[14:51:01] *** Quits: JanC (janc@moz-8305164E.dsl.scarlet.be) (Connection reset by peer)
[14:51:19] *** Joins: JanC (janc@moz-F2C90C96.dsl.scarlet.be)
[14:51:51] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[14:51:56] *** jorendorff is now known as jorendorff_away
[14:52:00] *** Joins: penguin_dan (dan_johnsi@6902762D.11B071D.FB9A45AF.IP)
[14:53:44] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[14:58:42] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[15:00:24] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[15:00:52] *** Joins: ricepuddin (graham@moz-7D68765A.cable.virginm.net)
[15:02:09] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[15:02:18] *** Quits: pepper_chico (pepper_chi@8035D121.EE19EE8C.F546FA5F.IP) (Quit: Ex-Chat)
[15:03:15] *** Joins: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net)
[15:05:03] <TeXitoi> rusti: let mut seq = ~[]; seq.mut_slice(begin + 1, seq.len() - 1);
[15:05:04] -rusti- <anon>:9:42: 9:47 error: unresolved name `begin`. Did you mean `seq`?
[15:05:04] -rusti- <anon>:9          let mut seq = ~[]; seq.mut_slice(begin + 1, seq.len() - 1);
[15:05:04] -rusti-                                                    ^~~~~
[15:05:04] -rusti- error: aborting due to previous error
[15:05:04] -rusti- application terminated with error code 101
[15:05:11] *** Quits: dew1 (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[15:05:15] <TeXitoi> rusti: let mut seq = ~[]; seq.mut_slice(1, seq.len() - 1);
[15:05:16] -rusti- <anon>:9:28: 9:31 error: internal compiler error: borrow-vec associated with bad sty: &ty_err
[15:05:16] -rusti- <anon>:9          let mut seq = ~[]; seq.mut_slice(1, seq.len() - 1);
[15:05:16] -rusti-                                      ^~~
[15:05:16] -rusti- application terminated with error code 101
[15:05:23] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[15:05:36] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[15:05:57] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Client exited)
[15:06:21] *** Quits: avsej (avsej@DF1824D5.EFF97412.48F984E6.IP) (Client exited)
[15:06:43] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[15:06:43] *** Joins: robitex (Mibbit@moz-FFC03272.libero.it)
[15:06:45] *** Quits: zaphod_b (ford_p@moz-CCE57F2F.eblcom.ch) (Connection reset by peer)
[15:06:48] *** jorendorff_away is now known as jorendorff
[15:06:50] <TeXitoi> on master, I have "error: cannot borrow `(*seq)[]` as immutable because it is also borrowed a\
[15:06:53] <TeXitoi> s mutable"
[15:06:57] *** Joins: zaphod_b (ford_p@moz-CCE57F2F.eblcom.ch)
[15:07:07] <cmr> TeXitoi: that is correct.
[15:07:23] <TeXitoi> the arguments aren't evaluated before calling the function ?
[15:07:25] <cmr> mut_slice creates a mutable borrow, and then len tries to take an immutable borrow.
[15:07:28] <cmr> it's a bug
[15:07:42] <cmr> nmatsakis: yes? this is the rvalue problem and innermost enclosing scope, right?
[15:08:00] <cmr> TeXitoi: the workaround is to stash seq.len() in a local
[15:08:11] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[15:08:23] <TeXitoi> cmr: sure, I've fond that, just asking why ;)
[15:08:53] <TeXitoi> ok, so I'll define a local, thanks cmr 
[15:09:30] <TeXitoi> cmr: do you have a corresponding issue?
[15:09:41] *** Joins: markwash (mwashenber@moz-E830FEBB.hsd1.ca.comcast.net)
[15:10:04] <cmr> TeXitoi: https://github.com/mozilla/rust/issues/3511 I think
[15:10:11] <cmr> Not exactly sure, though.
[15:10:17] <cmr> It could be something else
[15:13:35] <robitex> Hi, I have a question on strings concatenation
[15:14:08] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[15:14:29] <robitex> This function fails: fn test() -> &str { "first" + "second" }
[15:15:18] <robitex> How I can return a &str value?
[15:15:29] <TeXitoi> rusti: fn test() ->~str {~("first" + "second")} test()
[15:15:29] -rusti- <anon>:9:27: 9:49 error: mismatched types: expected `~str` but found `~~str` (expected ~str but found ~-ptr)
[15:15:29] -rusti- <anon>:9          fn test() ->~str {~("first" + "second")} test()
[15:15:30] -rusti-                                     ^~~~~~~~~~~~~~~~~~~~~~
[15:15:30] -rusti- error: aborting due to previous error
[15:15:30] -rusti- application terminated with error code 101
[15:15:45] <TeXitoi> rusti: fn test() ->~str {"first" + "second"} test()
[15:15:46] -rusti- ~"firstsecond"
[15:16:10] *** jorendorff is now known as jorendorff_away
[15:16:33] <TeXitoi> robitex: you need to allocate to do the concatenation, so I suppose you want to return ~str, not &str
[15:17:06] <robitex> My function is a recursive function...
[15:17:12] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Client exited)
[15:17:26] <robitex> Can I return an ~str value?
[15:17:33] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[15:17:35] <cmr> robitex: yes.
[15:17:52] <cmr> The reason `"first" + "second"` isn't a &str is because it needs to allocate space for the result.
[15:17:59] <TeXitoi> rusti: fn test<'a>(s: &'a str) -> &'a str {s} test("foo)
[15:18:00] -rusti- <anon>:11:16: 11:17 error: unknown start of token: ?
[15:18:01] -rusti- <anon>:11     println!("{:?}", r)
[15:18:01] -rusti-                           ^
[15:18:01] -rusti- application terminated with error code 101
[15:18:15] <TeXitoi> rusti: fn test<'a>(s: &'a str) -> &'a str {s} test("foo")
[15:18:16] -rusti- "foo"
[15:18:49] <vmx> yay, as "make check" finally works again after 3 days, here's my first proper (non documentation, potentially ready to merge) pull request :) https://github.com/mozilla/rust/pull/10803
[15:18:50] *** Quits: dredozubov (dredozubov@2F14E2C1.F70E5FA9.F63E14E8.IP) (Input/output error)
[15:18:52] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[15:18:58] *** Quits: ross (ross@moz-5EA04060.br.br.cox.net) (Quit: )
[15:19:15] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[15:19:55] *** Joins: matthewhammer (Mibbit@moz-DB7727E0.wireless.umd.edu)
[15:20:43] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[15:21:44] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[15:22:44] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[15:22:57] *** Joins: Jesin (Jesin@moz-63C897DA.res.lehigh.edu)
[15:23:22] *** Quits: pnkfelix (pnkfelix@1ED7AD9.5831E18D.54C3481B.IP) (Quit: Leaving.)
[15:24:03] *** Joins: ianj (ianjneu@moz-7140CF01.ccs.neu.edu)
[15:24:30] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[15:24:33] <robitex> Thanks. But I wish to concatenate &'static str with &str
[15:24:46] <cmr> robitex: you can do that, but you can't return a &str
[15:25:20] *** Quits: heftig (heftig@moz-C8EBC776.dip0.t-ipconnect.de) (Quit: Quitting)
[15:25:52] <sp3d> robitex: an &str is a reference to a string whose actual data is stored elsewhere. in the case of an &'static str, that data is a read-only portion of the executable file; in the case of an &str derived from a ~str, the data is stored in the heap
[15:26:07] <TeXitoi> rusti: fn test(s: &str) -> ~str {"foo" + s) test("bar")
[15:26:07] -rusti- <anon>:9:44: 9:45 error: incorrect close delimiter: `)`
[15:26:07] -rusti- <anon>:9          fn test(s: &str) -> ~str {"foo" + s) test("bar")
[15:26:08] -rusti-                                                      ^
[15:26:08] -rusti- application terminated with error code 101
[15:26:10] <sp3d> in order to create a new string which contains the concatenation of two others' contents, you have to make an ~str
[15:26:17] <TeXitoi> rusti: fn test(s: &str) -> ~str {"foo" + s} test("bar")
[15:26:18] -rusti- ~"foobar"
[15:26:47] <TeXitoi> rusti: fn test(s: &str) -> ~str {"foo" + s} test(test("bar"))
[15:26:47] -rusti- ~"foofoobar"
[15:26:48] <sp3d> then later you can borrow/slice that ~str to an &str outside the function that returned the ~str
[15:28:41] *** kimundi is now known as zz_kimundi
[15:29:31] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[15:29:34] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[15:30:41] *** Joins: thomas001 (thomas@moz-968FA222.informatik.uni-leipzig.de)
[15:30:56] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[15:31:20] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[15:31:48] *** Joins: csherratt (csherratt@moz-CAF331EA.cable.teksavvy.com)
[15:32:15] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[15:33:30] *** Joins: cubic (cubic@moz-80241A3A.mc.videotron.ca)
[15:35:28] *** Joins: zslayton (Mibbit@81EB2473.5F4BC84E.66C78B76.IP)
[15:35:44] *** Quits: markwash (mwashenber@moz-E830FEBB.hsd1.ca.comcast.net) (Quit: markwash)
[15:36:39] *** Quits: bjustin (bjustin@moz-8FC28563.sierrabravo.net) (Ping timeout)
[15:37:54] *** Joins: markwash (mwashenber@moz-E830FEBB.hsd1.ca.comcast.net)
[15:37:58] *** Joins: Scriptor (anonymous@moz-E06F46F0.corp.bitshelter.com)
[15:38:40] <robitex> I will change my strategy: don't use &'static str vector of data and substitute it with a function, so I don't need to concatenation with &str
[15:39:34] <eddyb> robitex: hmm? a &'static str is a &str
[15:39:41] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[15:40:06] *** Joins: moostik (Icedove@moz-698B575F.w86-212.abo.wanadoo.fr)
[15:40:29] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[15:40:43] *** Joins: jvns (bork@87D98E32.4046EB22.428F94DD.IP)
[15:41:25] *** Joins: bjustin (bjustin@moz-8FC28563.sierrabravo.net)
[15:41:53] *** Quits: canhtak (canhtak@moz-A53E1151.wl.t.ulaval.ca) (Quit: canhtak)
[15:42:13] <robitex> eddyb: I need to concatenation string in a recursive function using global vectors
[15:43:04] *** Joins: thesnowdog (doug@4D17280F.9D0B7490.6F17036B.IP)
[15:43:37] *** Joins: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net)
[15:43:45] *** Quits: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net) (Client exited)
[15:44:06] *** Joins: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net)
[15:44:30] <eddyb> robitex: when you concatenate a &str with another &str, you get a ~str. what is the problem with that? can you show some code?
[15:45:09] <robitex> eddyb: I can copy and paste here?
[15:45:17] <eddyb> robitex: use https://gist.github.com
[15:45:41] <eddyb> (don't forget to select "Rust" for syntax highlighting, it helps with reading :P)
[15:46:34] <sp3d> rusti:  fn concat(strs: &[&str]) -> ~str { match &strs { &[] => ~"", &[x, ..rest] => x+concat(rest), } }; concat(&["foo", "bar"])
[15:46:35] -rusti- ~"foobar"
[15:47:22] *** Quits: jstevans (Instantbir@moz-8EDAC95C.bootp.virginia.edu) (Ping timeout)
[15:47:32] <sp3d> or, fewer sigils, fn concat(strs: &[&str]) -> ~str { match strs { [] => ~"", [x, ..rest] => x+concat(rest), } }; concat(&["foo", "bar"])
[15:47:50] <robitex> a function to traslate italian numbers in letter: https://gist.github.com/anonymous/7789813
[15:48:17] <eddyb> rusti: ["a", "b", "c"].concat()
[15:48:18] -rusti- ~"abc"
[15:48:22] <eddyb> sp3d: ^
[15:48:57] *** Joins: lpy (lpy@12172131.F09091A8.1348A864.IP)
[15:49:06] *** pmoore|mtg is now known as pmoore|afk
[15:49:27] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[15:49:42] *** Quits: Jesin (Jesin@moz-63C897DA.res.lehigh.edu) (Ping timeout)
[15:50:23] *** Joins: jstevans (Instantbir@A1BBC016.67684BE1.DDE5D3F6.IP)
[15:52:48] <eddyb> rusti: let x = "foo"; ~x
[15:52:49] -rusti- ~"foo"
[15:53:34] <eddyb> robitex: not the best solution: https://gist.github.com/eddyb/7789849
[15:54:08] *** Joins: Jesin (Jesin@moz-63C897DA.res.lehigh.edu)
[15:55:15] *** Joins: avsej (avsej@D9A610B8.4841F515.FB33447D.IP)
[15:55:32] <eddyb> robitex: your function is recursive, but only on one level: d + num2text(t) could be d + if t > 0 { a19[t-1] } else { "" }
[15:55:54] <Blei> wtf. there is _no_ good timer functionality available anywhere. not in rust (i did expect that), nor in uv, nor in gtk. the only one i've found is timerfd, but that's not fun if i want to integrate it with either rust tasks or the gtk main loop
[15:56:02] <Blei> meh, maybe i'll just do that
[15:57:00] <robitex> eddyb: the function in not yet complete...
[15:57:00] <bstrie> Blei: I thought uv had a timer
[15:57:24] <Blei> bstrie: it does, but it doesn't support what i want (i.e. stopping and resuming a timer)
[15:57:50] <Blei> it could be added on top, but there's no way to get the current time from a uv timer either, so that's not possible
[15:58:07] <eddyb> robitex: then I have only one simplification: https://gist.github.com/eddyb/7789849
[16:00:23] *** Joins: alan (alan@moz-FE02DD30.sat6.rackspace.com)
[16:00:31] *** zz_kimundi is now known as kimundi
[16:00:40] *** Joins: pepper_chico (pepper_chi@6D1D0FAA.4F150827.E4090502.IP)
[16:01:22] *** Quits: maxiepoo__ (mnew@moz-6F50ADE.hsd1.il.comcast.net) (Quit: Leaving)
[16:02:06] <robitex> eddyb: Ok, is more elegant...
[16:02:58] <robitex> eddyb: but the compiler says:  error: match arms have incompatible types: expected `~str` but found `~&'static str` ...
[16:03:15] <eddyb> rusti: let x: &'static str = "foo"; ~x
[16:03:16] -rusti- ~"foo"
[16:03:22] *** Quits: csherratt (csherratt@moz-CAF331EA.cable.teksavvy.com) (Quit: csherratt)
[16:03:27] <eddyb> rusti: let x: &'static str = "foo"; let y: ~str = ~x; y
[16:03:28] -rusti- <anon>:9:52: 9:54 error: mismatched types: expected `~str` but found `~&'static str` (expected ~str but found ~-ptr)
[16:03:28] -rusti- <anon>:9          let x: &'static str = "foo"; let y: ~str = ~x; y
[16:03:28] -rusti-                                                              ^~
[16:03:28] -rusti- error: aborting due to previous error
[16:03:29] -rusti- application terminated with error code 101
[16:03:32] <eddyb> rusti: let x: &'static str = "foo"; let y: ~str = ~*x; y
[16:03:33] -rusti- pastebinned 8 lines of output: http://sprunge.us/LCXJ
[16:03:48] <eddyb> rusti: let x: &'static str = "foo"; let y: ~str = x.to_owned(); y
[16:03:49] -rusti- ~"foo"
[16:03:51] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[16:03:54] *** Quits: ivan (ivan@moz-531C3EC9.members.linode.com) (Ping timeout)
[16:04:16] <eddyb> robitex: updated: https://gist.github.com/eddyb/7789849#file-gistfile1-rs-L19
[16:04:55] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Ping timeout)
[16:05:01] *** Joins: canhtak (canhtak@moz-A53E1151.wl.t.ulaval.ca)
[16:05:31] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[16:05:48] *** Joins: ivan (ivan@moz-531C3EC9.members.linode.com)
[16:05:54] *** Quits: Shaladdle (shaladdle@moz-FDE833F3.wv.cc.cmu.edu) (Ping timeout)
[16:06:46] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[16:06:46] *** ChanServ sets mode: +o jdm
[16:08:09] <robitex> eddyb: Thank you very much. Now I will study the chat conversation to understand details, thank you again
[16:10:14] *** Quits: markwash (mwashenber@moz-E830FEBB.hsd1.ca.comcast.net) (Ping timeout)
[16:11:22] *** Joins: markwash (mwashenber@moz-E830FEBB.hsd1.ca.comcast.net)
[16:12:51] *** jorendorff_away is now known as jorendorff
[16:15:44] *** Quits: thomas001 (thomas@moz-968FA222.informatik.uni-leipzig.de) (Ping timeout)
[16:18:08] *** Joins: Shaladdle (shaladdle@moz-FDE833F3.wv.cc.cmu.edu)
[16:20:02] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[16:22:02] *** Quits: abinader (abinader@D8B9C081.E820043D.D4C04133.IP) (Ping timeout)
[16:22:38] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[16:23:44] *** Quits: arodier74 (Thunderbir@5901C3C8.B6144566.D3B9122.IP) (Quit: arodier74)
[16:26:18] <bstrie> dammit Ms2ger!
[16:26:28] *** Joins: lfox (lfox@moz-89EEE1BF.nyc.res.rr.com)
[16:26:29] <Ms2ger> :(
[16:26:43] <bstrie> Ms2ger: actually, we decided not to implement a custom select form element
[16:27:01] <bstrie> Ms2ger: instead, there's another catastrophe beyond my control that I'll now blame you for
[16:27:38] <Ms2ger> :D
[16:28:00] *** Joins: abinader (abinader@D8B9C081.E820043D.D4C04133.IP)
[16:28:08] *** Quits: pepper_chico (pepper_chi@6D1D0FAA.4F150827.E4090502.IP) (Quit: Ex-Chat)
[16:29:29] <bstrie> specifically, there's been a regression in chrome behavior that I have to hack around
[16:29:29] *** Joins: jvshahid (jvshahid@BE83DFD.50866E69.CA2DF2C0.IP)
[16:29:40] *** Joins: tOkeshu (tOkeshu@moz-BC063B9E.me)
[16:30:05] <nmatsakis> TeXitoi / cmr: that is issue #6268
[16:30:14] <TeXitoi> nmatsakis: thanks
[16:30:15] <nmatsakis> (that being "the need to put seq.len() into a separate value")
[16:30:22] <nmatsakis> it's non-trivial to fix, certainly going to be post rust 1.0
[16:30:35] *** Joins: csherratt (csherratt@moz-CAF331EA.cable.teksavvy.com)
[16:30:40] *** Quits: markwash (mwashenber@moz-E830FEBB.hsd1.ca.comcast.net) (Ping timeout)
[16:31:26] *** Joins: barosl (barosl@3DE683B6.E551553C.7544CABF.IP)
[16:31:36] *** Quits: zslayton (Mibbit@81EB2473.5F4BC84E.66C78B76.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[16:31:53] *** Joins: zslayton (Mibbit@81EB2473.5F4BC84E.66C78B76.IP)
[16:32:11] *** Quits: Ms2ger (Ms2ger@moz-B6861E63.ibbt.be) (Quit: bbl)
[16:32:26] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Quit: Lost terminal)
[16:32:28] *** Joins: markwash (mwashenber@moz-E830FEBB.hsd1.ca.comcast.net)
[16:37:31] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Ping timeout)
[16:38:04] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Ping timeout)
[16:38:24] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[16:38:31] *** Joins: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net)
[16:46:41] *** Quits: lpy (lpy@12172131.F09091A8.1348A864.IP) (Quit: Leaving...)
[16:46:56] *** Joins: jstevans1 (Instantbir@38A72B22.362CC69C.B7830B68.IP)
[16:48:17] *** Quits: jstevans (Instantbir@A1BBC016.67684BE1.DDE5D3F6.IP) (Ping timeout)
[16:48:40] *** Quits: jstevans1 (Instantbir@38A72B22.362CC69C.B7830B68.IP) (Ping timeout)
[16:48:51] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[16:49:00] *** Quits: dcrewi (david@moz-AB8667CE.gyrae.net) (Ping timeout)
[16:49:51] *** Joins: jstevans (Instantbir@moz-250314A9.bootp.virginia.edu)
[16:49:56] *** Quits: victorporof (victorporo@FB8E2A00.483E5FE1.9B1E38F4.IP) (Ping timeout)
[16:50:55] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[16:51:14] *** Joins: jstevans1 (Instantbir@49B6A035.4D74B5A0.DDE5D3F6.IP)
[16:51:50] *** Joins: sprang (sprang@moz-920A95C4.hsd1.ca.comcast.net)
[16:52:25] *** Quits: jstevans (Instantbir@moz-250314A9.bootp.virginia.edu) (Ping timeout)
[16:52:26] <jvns> what's the link for the Rust nightly builds again? I can't find it.
[16:52:26] *** Quits: abinader (abinader@D8B9C081.E820043D.D4C04133.IP) (Quit: Fui!)
[16:52:36] <bstrie> jvns: for arch or ubuntu?
[16:52:42] <cmr> https://github.com/mozilla/rust/wiki/Doc-packages,-editors,-and-other-tools
[16:52:49] <jvns> bstrie: oh never mind found it
[16:52:52] <bstrie> there's no way that's a link
[16:53:04] <cmr> Why not?
[16:53:05] <jvns> there's no nightly for mac, right?
[16:53:07] <bstrie> since when are commas valid in URLs
[16:53:09] <bstrie> am I just crazy
[16:53:17] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[16:53:18] <cmr> commas are valid.
[16:53:28] <bstrie> I don't think I've ever seen them in URLs, in my life
[16:53:37] <bstrie> jvns: nope, not yet
[16:53:38] <cmr> have you ever used wikipedia?
[16:53:41] *** Quits: icebattle (icebattle@8A14A542.EBE2EE2B.C7CEC4ED.IP) (Client exited)
[16:53:47] <cmr> jvns: I feel like I saw your name somewhere for something...
[16:54:13] <bstrie> ugh, it looks so wrong
[16:54:16] <cmr> jvns: Oh! Hacker School: very cool, thanks for working on Rust :D
[16:54:23] <jvns> cmr, oh, thanks =D
[16:54:29] <jvns> I'm sitting next to lkuper right now and it is the best
[16:54:44] <cmr> I didn't realize lkuper was in it too!
[16:54:49] <jvns> she is a resident!
[16:54:50] <bstrie> what is hacker school
[16:54:58] <cmr> bstrie: https://www.hackerschool.com/
[16:55:20] <cmr> Philip Guo is too!
[16:55:23] <cmr> All these people I know
[16:55:32] <bstrie> take it over with rust people
[16:55:36] <bstrie> Rust School
[16:55:50] <jvns> yesss
[16:55:56] <jvns> Philip Guo is also the best
[16:56:40] <sp3d> commas being valid in urls is one of the reasons you're supposed to enclose urls in <> when placing them inline in plaintext
[16:57:10] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[16:57:16] <bstrie> sp3d: it is an abomination. cats and dogs, living together!
[16:57:32] <bstrie> mass hysteria, is what I am implying
[16:57:34] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[16:57:49] *** Joins: icebattle (icebattle@8A14A542.EBE2EE2B.C7CEC4ED.IP)
[16:58:06] *** Joins: marshall_law (marshall@BCC5EC56.B2070AF7.505F6A0C.IP)
[16:58:23] *** Joins: lkuper (lkuper@87D98E32.4046EB22.428F94DD.IP)
[16:58:56] <bstrie> next they'll allow periods in URLs
[16:59:07] <bstrie> and who knows what other sorts of obscene punctuation
[16:59:13] *** Quits: Shaladdle (shaladdle@moz-FDE833F3.wv.cc.cmu.edu) (Ping timeout)
[16:59:18] <cmr> uh
[16:59:21] <cmr> bstrie plz
[16:59:48] * bstrie registers @#$@%@.~!#()#$%@*.@#)$(!@&~H~($Y
[16:59:52] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.2)
[16:59:53] <bstrie> that is my new domain name
[17:00:08] <bstrie> I'm doomsday prepping for the coming URLpocalypse
[17:01:01] <bstrie> actually, that perl program gives me an idea for a one-dimensional roguelike
[17:01:23] <Blei> nice!
[17:01:27] <sbalmos> bstrie: How about registering some URL that forces entry by Unicode codepoints? :P
[17:01:53] <zslayton> Hi all! Has nmatsakis' proposal for Single Inheritance come to fruition, or is that still a work in progress? (http://smallcultfollowing.com/babysteps/blog/2013/10/24/single-inheritance/) 
[17:01:53] <bstrie> oh wait, DCSS already made a one-dimensional roguelike as a minigame
[17:01:57] <bstrie> and it's pretty great
[17:02:01] <erickt> bstrie: if you start now, you can corner the market on the .@#)$(!@&~H~($Y TLD. Think of the money you can make selling those domains! 
[17:02:06] <bstrie> zslayton: still in progress
[17:02:10] <nmatsakis> zslayton: not implemented nor agreed upon
[17:02:25] <zslayton> Ah, ok. Thanks!
[17:02:57] <bstrie> sbalmos: actually I'd rather register a name that is technically invalid unicode
[17:03:15] <bstrie> and see how many people are even capable of entering it into their web software of choice
[17:03:30] <bstrie> it does raise the question of how I'd register it
[17:03:41] <bstrie> I'd have to like go to their servers and push bits manually into their database
[17:04:05] <Earnestly> bstrie: This is why most advertisements in japan tell you how to search the website instead of giving you a direct link, so people don';t have to type, essentially, ascii
[17:04:10] *** Quits: csherratt (csherratt@moz-CAF331EA.cable.teksavvy.com) (Ping timeout)
[17:04:13] <Earnestly> Also, punycode
[17:04:28] <bstrie> Earnestly: but we *have* internationalized domains now
[17:04:33] <bstrie> surely this isn't still a problem
[17:04:38] *** Joins: csherratt (csherratt@moz-CAF331EA.cable.teksavvy.com)
[17:04:39] *** Quits: Jesin (Jesin@moz-63C897DA.res.lehigh.edu) (Quit: Leaving)
[17:04:58] <Blei> it's not about the impossibility, but about the inconvenience
[17:05:02] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[17:05:12] <Earnestly> It is, and of course you now have lots of exploits due to people not implementing unicode correctly
[17:05:13] <bstrie> but internationalized domains shouldn't require you to type any latin characters
[17:05:25] <Blei> true, disregard my statement
[17:05:35] <Earnestly> https://en.wikipedia.org/wiki/Punycode
[17:05:39] <bstrie> you'd still need a keyboard with ./ keys
[17:05:52] <erickt> nmatsakis: along the lines of things in your blog that I want, has there been any progress on associated types? I *think* we can create an Iterate trait now, and it'd be much more pleseant to use an associated type than have to write Iterate<vec::VecIterator> everywhere
[17:06:02] <sbalmos> http://U+0275U+0277U+0172.U+... blah blah blah
[17:06:10] <bstrie> Earnestly: in any case, I find that dubious. when you present someone with a link, you can just copy/paste it around rather than typing it
[17:06:44] <bstrie> surely they have copy/paste in japan
[17:06:52] *** Joins: Shaladdle (shaladdle@moz-FDE833F3.wv.cc.cmu.edu)
[17:06:54] <erickt> nmatsakis: I'm considering working on it for my next big project if it hasn't been already decided against
[17:07:13] <Blei> it's not spam/adwords, it's real-life advertisement (tv, billboards, and especially metro ads)
[17:07:16] <bstrie> erickt: ooh, that sounds very cool
[17:07:17] <Earnestly> bstrie: What, like: "Ñ€Ð°yÑ€Ð°l" ?
[17:07:26] <bstrie> Blei: ah I see
[17:07:48] <bstrie> I thought you meant like, you would navigate to a website and instead of giving you a link they would just tell you to use the in-site search box
[17:08:01] <erickt> for those who haven't heard about associated items, this is the blog about them: http://smallcultfollowing.com/babysteps/blog/2013/04/02/associated-items/
[17:08:06] <Earnestly> Ñ€Ð°yÑ€Ð°l.com have fun
[17:08:13] *** Quits: skade (skade@30BBD5E6.505237C9.CAE22B62.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[17:08:19] <Earnestly> See what Firefox does to it
[17:08:30] <bstrie> Earnestly: to be fair we have camera phones now, this should be a solved problem! :)
[17:08:34] <bstrie> OCR on all links
[17:08:40] <bstrie> who even needs QR codes
[17:08:44] <Earnestly> Because OCR can't be exploited?
[17:08:49] <Earnestly> QR*
[17:08:51] <zslayton> erikt: Thanks, I was about to ask. :)
[17:09:01] <zslayton> *erickt
[17:09:13] <Earnestly> I wonder how long it'll take before people learn how unicode works
[17:09:19] <bstrie> Earnestly: not sure what you mean, how would one intentionally explot OCR. at best you'd just try to register lookalike domains and hope the OCR got it wrong
[17:09:20] <Earnestly> At least python 3 can handle it
[17:09:28] *** Joins: devbug (quassel@2D4E172D.4C8B6099.9B57EA59.IP)
[17:09:34] <erickt> zslayton: glad to help. nmatsakis's blog is a treasure trove of good ideas that are waiting to be implemented
[17:10:58] <Earnestly> bstrie: E.g. http://minsky.gsi.dit.upm.es/semanticwiki/index.php/Using_UTF-8_Encoding_to_Bypass_Validation_Logic
[17:14:20] <robitex> eddyb: the complete code: https://gist.github.com/robitex/7790914
[17:15:48] <eddyb> robitex: does it work? it looks cool :D
[17:16:06] <bstrie> Earnestly: that IIS vuln sounds really funny
[17:16:19] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Client exited)
[17:16:40] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[17:17:15] <robitex> eddyb: I think yes ...
[17:17:27] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[17:17:54] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Connection reset by peer)
[17:17:54] *** Joins: tcr_ (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[17:17:56] <robitex> eddyb: try yourself
[17:18:46] *** Quits: tcr_ (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Connection reset by peer)
[17:18:53] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[17:19:15] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Client exited)
[17:19:15] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[17:19:18] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Client exited)
[17:19:39] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[17:19:49] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[17:20:26] *** Joins: victorporof (victorporo@FB8E2A00.483E5FE1.9B1E38F4.IP)
[17:21:21] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[17:22:05] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[17:22:33] *** Joins: tcr (tcr@66796279.4683C875.9D2C3D3E.IP)
[17:23:16] <octurion> Interesting tidbit about performance: I wrote a function that takes 2 64-bit integers and returns their 128-bit product
[17:23:44] <octurion> in rrust and C. Turns out that rustc generates better assembly code than gcc.
[17:23:57] <eddyb> octurion: both at -O3?
[17:24:04] <octurion> Yes.
[17:24:13] *** Quits: tcr (tcr@66796279.4683C875.9D2C3D3E.IP) (Ping timeout)
[17:24:17] <eddyb> I'd try the same C code in clang, too
[17:24:22] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[17:24:25] <octurion> rustc 0.8 at --opt-levell=3 and gcc 4.8 at -O3
[17:24:30] <bstrie> yes, I want to see how we compare to clang
[17:24:45] <eddyb> because it could just be a GCC vs LLVM difference
[17:24:56] <bstrie> octurion: also, I'd like to see rust master as opposed to 0.8. that's very old
[17:25:24] *** Quits: morphevs1 (Adium@moz-C1F7EB20.cust.bluewin.ch) (Quit: Leaving.)
[17:25:28] *** Joins: tcr (tcr@66796279.4683C875.9D2C3D3E.IP)
[17:25:41] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[17:25:57] *** Quits: tcr (tcr@66796279.4683C875.9D2C3D3E.IP) (Client exited)
[17:26:08] *** Joins: tcr (tcr@66796279.4683C875.9D2C3D3E.IP)
[17:26:10] *** Quits: tcr (tcr@66796279.4683C875.9D2C3D3E.IP) (Client exited)
[17:26:32] *** Joins: tcr (tcr@66796279.4683C875.9D2C3D3E.IP)
[17:26:42] <octurion> Here's the C version: http://pastebin.com/keMRuKwi
[17:27:28] <octurion> Rust: http://pastebin.com/j7kPZDPQ
[17:28:01] *** Quits: Ferreus (ferreus@moz-377A62A7.dip0.t-ipconnect.de) (Ping timeout)
[17:28:03] <cmr> octurion: how to time/benchmark?
[17:28:12] <erickt> did we ever get implemented `Foo<int>::bar()`?
[17:28:15] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[17:28:16] *** Quits: tcr (tcr@66796279.4683C875.9D2C3D3E.IP) (Ping timeout)
[17:28:17] <cmr> erickt: not yet
[17:28:22] <cmr> Wait, yes.
[17:28:27] <cmr> Foo::<int>::bar()
[17:28:31] <cmr> But that isn't the impl of Foo for int
[17:28:34] <cmr> that's just a typaram
[17:28:52] <erickt> cmr: thats what I meant, thanks :)
[17:28:54] <octurion> GCC asm: http://pastebin.com/aBqBQ3nN
[17:29:23] <octurion> rustc asm: http://pastebin.com/fjiM9JM0
[17:29:56] <cmr> octurion: it may be shorter, but is it faster? or smaller?
[17:30:41] <octurion> cmr: I haven't written any benchmarks yet
[17:31:27] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Client exited)
[17:31:54] <octurion> But I think the llvm version is slightly faster
[17:32:12] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[17:33:42] *** Joins: shiva (shiva@B79166AE.C8F45B0E.3FEEFD97.IP)
[17:33:54] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Ping timeout)
[17:33:58] <octurion> For example, in a few cases llvm makes use of cmp/sbb
[17:34:10] *** Parts: shiva (shiva@B79166AE.C8F45B0E.3FEEFD97.IP) (Konversation terminated!)
[17:34:16] <octurion> while gcc has to do a cmp/seta/mvzbl
[17:34:21] <octurion> *movzbl
[17:35:41] *** Joins: pnkfelix (pnkfelix@1ED7AD9.5831E18D.54C3481B.IP)
[17:36:10] *** Quits: pnkfelix (pnkfelix@1ED7AD9.5831E18D.54C3481B.IP) (Max SendQ exceeded)
[17:36:11] *** Quits: Diamond (dick@moz-80556682.ks.ks.cox.net) (Ping timeout)
[17:37:00] *** Joins: Diamond (dick@moz-80556682.ks.ks.cox.net)
[17:37:41] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Ping timeout)
[17:38:27] *** Joins: abinader (abinader@D8B9C081.E820043D.D4C04133.IP)
[17:39:07] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[17:40:05] * jvns makes more pull requests to the Rust tutorial =D
[17:40:20] *** Joins: fixplz (uid18459@moz-A42E5B7B.irccloud.com)
[17:41:14] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[17:41:47] <octurion> Clang 3.0 asm (will upload 3.3 asm in a minute): http://pastebin.com/7mZefkLN
[17:42:31] <eddyb> interesting, #0  0x00000000005e97a9 in task::failing::hfea740957c6d2ac1af::v0.9$x2dpre ()
[17:42:42] <jvns> Should it say in the Getting Started section of the tutorial "don't use 0.8, it's old"?
[17:42:47] <eddyb> that program just stops abruptly, no error code, no visible failure
[17:43:24] <cmr> jvns: Well... in the 0.8 tutorial, it should have a big fat note "THIS IS NOT A SUPPORTED RELEASE. For many improvements, bugfixes, and support, use [master](link-to-master-tutorial)"
[17:43:35] <jvns> cmr: sweet
[17:43:36] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[17:43:41] <jvns> I will add it!
[17:43:45] <jvns> so
[17:43:52] <jvns> should the 0.8 version just not be linked on the homepage?
[17:44:12] <cmr> Well, they should be...
[17:44:32] <cmr> Should probably have "([unsupported](explanation link))" next to them though
[17:44:38] *** Joins: mikezaby (mikezaby@moz-4BF6308B.home.otenet.gr)
[17:44:50] *** Parts: mikezaby (mikezaby@moz-4BF6308B.home.otenet.gr) ()
[17:45:30] <jvns> is the Rust homepage in the repo?
[17:45:40] <jvns> I don't see it 
[17:45:48] <cmr> no
[17:45:55] <cmr> it's... somewhere :p
[17:46:02] <jvns> haha
[17:46:07] *** Joins: heftig (heftig@moz-E8E2034C.inf.fh-bonn-rhein-sieg.de)
[17:46:12] *** Joins: q66__ (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[17:46:24] <cmr> https://github.com/brson/rust-www/tree/gh-pages
[17:46:36] <cmr> that seems to be not up to date
[17:46:54] <jvns> haha
[17:47:01] <bstrie> cmr: it's in graydon's repo
[17:47:10] <bstrie> afaik
[17:47:10] *** Quits: q66_ (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Ping timeout)
[17:47:15] <cmr> https://github.com/graydon/rust-www/tree/gh-pages maybe
[17:47:16] <cmr> yeah
[17:47:29] <cmr> durr, it even says it's a fork
[17:47:29] <bstrie> brson just has commit access to it
[17:48:43] *** Quits: avsej (avsej@D9A610B8.4841F515.FB33447D.IP) (Ping timeout)
[17:48:51] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[17:49:11] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[17:49:30] <jvns> man I love making documentation pull requests
[17:49:42] *** Joins: avsej (avsej@D9A610B8.4841F515.FB33447D.IP)
[17:50:08] <jvns> but now lkuper gave me a short tour of the Rust source, so I'm going to see if I can fix this parser complaint I have! =D (https://github.com/mozilla/rust/issues/10767)
[17:51:34] <cmr> lkuper: are you corrupting people over there? ;)
[17:51:54] <lkuper> cmr: muahahaha
[17:53:53] <bstrie> so if lkuper has an erdos number of 4, and I've committed to the same git repository as she has, does that give me an erdos number of 5? :D
[17:54:10] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: brb)
[17:54:20] <eddyb> what's an erdos number?
[17:54:32] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[17:54:33] <cmr> eddyb: https://en.wikipedia.org/wiki/Erd%C5%91s_number
[17:54:41] <cmr> bacon number for math
[17:54:42] <jvns> So the tutorial links to a Rust 0.8 installer for Windows, but obviously that's not how to build Rust from source on windows
[17:54:51] <jvns> How should someone on Windows build rust?
[17:54:55] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[17:55:02] <bstrie> jvns: by installing a linux partition
[17:55:05] <jvns> okay cool
[17:55:08] <cmr> jvns: instructions to build are on the wiki
[17:55:12] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[17:55:20] <bstrie> jvns: nah you can do it on windows, it's just a pain
[17:55:24] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: WeeChat 0.4.2)
[17:55:34] <eddyb> you can cheap out and use the snapshot compiler
[17:56:08] <eddyb> (for fiddling with Rust master without building it yourself)
[17:56:18] <jvns> so I can say "You can install Rust 0.8 using the Windows installer, but it's no longer supported"?
[17:56:52] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[17:57:01] <cmr> s/no longer/not/
[17:57:05] <cmr> it was never supporetd :)
[17:57:12] <octurion> Clang 3.3 (no significant changes apart from different registers): http://pastebin.com/SeBZAR5b
[17:57:13] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[17:58:09] *** Quits: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net) (Ping timeout)
[17:58:37] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[17:58:41] <jvns> :)
[17:58:48] <FreeFull> bstrie: Officially you need to write a maths paper
[17:58:56] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[17:59:13] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[17:59:24] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[17:59:41] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[17:59:41] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[18:00:30] *** Joins: dherman (dherman@moz-BBE3ABD.mv.mozilla.com)
[18:00:30] *** ChanServ sets mode: +ao dherman dherman
[18:02:02] *** Quits: yusukesuzuki (yusukesuzu@moz-FEE44B6.net220148245.t-com.ne.jp) (Ping timeout)
[18:02:20] *** Joins: yusukesuzuki (yusukesuzu@moz-FEE44B6.net220148245.t-com.ne.jp)
[18:02:26] <octurion> Does rust have an equivalent to omp_get_wtime()?
[18:02:38] <Blei> hmm, is there a "move T to &mut T without destroying the already existing value" operator?
[18:02:49] <cmr> Blei: that's not a move
[18:02:54] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[18:03:02] <cmr> octurion: stuff in extra::wtime?
[18:03:10] <cmr> octurion: We have a built-in benchmark runner.
[18:03:26] <cmr> It does statistics magic that takes deviation into account.
[18:03:37] <kimundi> Blei: swap?
[18:03:39] <Blei> ah, move_val_init
[18:03:41] <cmr> https://github.com/mozilla/rust/wiki/Doc-unit-testing#benchmarking
[18:03:50] <cmr> Blei: oh I see what you mean.
[18:03:51] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[18:04:02] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: WeeChat 0.4.2)
[18:04:05] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[18:06:18] *** Joins: brson (brson@981AA104.E81F12CD.76F66111.IP)
[18:06:18] *** ChanServ sets mode: +ao brson brson
[18:08:07] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Ping timeout)
[18:08:07] *** Quits: alan (alan@moz-FE02DD30.sat6.rackspace.com) (Ping timeout)
[18:08:08] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[18:08:30] *** Joins: vodik (simon@moz-9745F68B.net.uwaterloo.ca)
[18:08:56] *** Joins: alan (alan@C5AA0317.1983C9D0.839F6EC0.IP)
[18:09:52] *** pmoore|afk is now known as pmoore|away
[18:10:06] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[18:10:06] *** ChanServ sets mode: +ao pcwalton pcwalton
[18:10:25] *** Quits: dherman (dherman@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[18:10:51] <octurion> cmr: Is extra::test supported on 0.8?
[18:11:17] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[18:11:30] *** Quits: alan (alan@C5AA0317.1983C9D0.839F6EC0.IP) (Ping timeout)
[18:11:40] <sfackler> octurion: the test framework works on 0.8
[18:11:45] *** Quits: peterdn (chatzilla@moz-5EB9CC81.as13285.net) (Quit: ChatZilla 0.9.90.1-rdmsoft [XULRunner 22.0/20130619132145])
[18:11:49] *** Joins: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr)
[18:11:51] <cmr> octurion: yes.
[18:11:59] *** Joins: dherman (dherman@moz-BBE3ABD.mv.mozilla.com)
[18:11:59] *** ChanServ sets mode: +ao dherman dherman
[18:12:17] *** Joins: sanxiyn (tinuviel@876FBD25.AD6AF8AA.A737E77F.IP)
[18:13:33] *** Joins: alan (alan@moz-FE02DD30.sat6.rackspace.com)
[18:13:36] <bstrie> jvns: uh oh, looks like your post is on the front page of HN :)
[18:13:53] <Blei> so, how can i set an extern "C" fn pointer to NULL
[18:13:57] <Blei> in static data
[18:14:17] <bstrie> Blei: is *0 a null pointer?
[18:14:17] *** Quits: a__ (a__@moz-56DB9895.nycmny.fios.verizon.net) (Ping timeout)
[18:14:45] <Blei> i don't think that's valid rust :P
[18:14:52] <Blei> also ptr::null() doesn't seem to work
[18:14:58] <bstrie> right, because static
[18:15:13] <bstrie> can you just do like... `0 as *fn`
[18:15:16] <bstrie> I dunno :P
[18:15:17] <Blei> no, the type system doesn't want to accept it
[18:15:26] <Blei> non-scalar cast: `<VI0>` as `extern "C" fn(*mut gtk::ffi::Struct__GSource, *mut i32) -> i32`
[18:15:28] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[18:15:29] *** pmoore|away is now known as pmoore
[18:15:34] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[18:15:39] <sfackler> Blei: you can make it an Option<extern "C" fn()> and set it to None
[18:15:55] <bstrie> Blei: how about `&0i as *fn`
[18:16:07] <eddyb> Option<||>
[18:16:12] *** Joins: peterdn (chatzilla@moz-5EB9CC81.as13285.net)
[18:16:27] <Blei> bstrie: doesn't work
[18:16:32] <Blei> sfackler: hmm, i'll try that
[18:16:51] *** Joins: a__ (a__@moz-56DB9895.nycmny.fios.verizon.net)
[18:16:53] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[18:16:53] <bstrie> sfackler: I think the fact that that's a null pointer is technically an implementation detail :)
[18:16:59] *** Quits: jstevans1 (Instantbir@49B6A035.4D74B5A0.DDE5D3F6.IP) (Ping timeout)
[18:17:14] *** Joins: jstevans (Instantbir@49B6A035.4D74B5A0.DDE5D3F6.IP)
[18:17:29] *** Quits: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr) (Ping timeout)
[18:17:33] <sanxiyn> I remember this worked in the past... When did it change?
[18:17:45] <eddyb> Blei: it doesn't work because the second type there isn't a pointer
[18:17:46] <bstrie> sanxiyn: that which approach worked, casting 0 to fn?
[18:17:55] <sfackler> iirc when nmatsakis disallowed 0 as extern "C" fn he guaranteed that the null pointer optimization will be applied
[18:18:04] <sanxiyn> bstrie: Yes. Obviously unsafe, so I guess that's why it's fixed...
[18:18:21] <eddyb> Blei: extern "C" fn isn't a pointer, that's why it was failing
[18:18:25] *** Quits: Shaladdle (shaladdle@moz-FDE833F3.wv.cc.cmu.edu) (Ping timeout)
[18:18:32] <bstrie> sfackler: still, it's kinda gross... though I guess null pointers are also gross
[18:18:53] <Blei> eddyb: really? what else would it be?
[18:18:56] *** Quits: octurion (octurion@moz-4C1E443F.clients.kiwiirc.com) (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
[18:19:03] *** Quits: sanxiyn (tinuviel@876FBD25.AD6AF8AA.A737E77F.IP) (Quit: Bye)
[18:19:59] <eddyb> Blei: *fn is a pointer to a fn. fn isn't a pointer. wait... maybe I'm wrong again, but you should try adding a *
[18:20:06] <Blei> bstrie: i have to interface with C, null pointers everywhere
[18:20:17] <sfackler> extern "C" fn is equivalent to a C function pointer
[18:20:24] <Blei> eddyb: will this be guaranteed to be the same as a C function pointer?
[18:20:42] <Blei> (bbiab)
[18:20:46] <eddyb> sfackler: oh? but...
[18:21:18] * eddyb starts babbling incoherently and exits the room
[18:21:36] *** Joins: tikue (tkuehn@2AB8160C.E6CB677E.689607DE.IP)
[18:21:54] <sfackler> for example, SSL_CTX_set_verify takes a nullable function pointer, and here's the Rust binding for it https://github.com/sfackler/rust-ssl/blob/master/ffi.rs#L119
[18:22:04] *** Quits: sigma (sigma@moz-A17EB325.range86-184.btcentralplus.com) (Client exited)
[18:22:10] *** Joins: flowsnake (flowsnake@moz-10902DAB.cable.virginm.net)
[18:23:06] <mletterle> So.. I just got done giving a little talk on rust at my company.. and someone asked me "Why does Mozilla want to invest in rust?" I thought that was a good question.. 
[18:23:33] *** Quits: tikue (tkuehn@2AB8160C.E6CB677E.689607DE.IP) (Quit: tikue)
[18:23:42] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[18:23:51] <cmr> mletterle: Because C++ isn't sufficient for the needs of browsers.
[18:23:52] <pcwalton> because of the NSA
[18:24:00] <pcwalton> (only half joking)
[18:24:04] <SiegeLord> o_O
[18:24:19] <mletterle> only.. half? -_-
[18:24:22] <pcwalton> security in browsers is really important and C++ is really unsafe
[18:24:37] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[18:24:40] <mletterle> Oh, I like that one.
[18:24:48] <pcwalton> also, that unsafety makes parallelism harder
[18:25:11] <pcwalton> for example, Chrome is adding stop-all-threads conservative GC to Chrome because they can't make memory management work
[18:25:13] <pcwalton> in C++
[18:25:20] <pcwalton> s/Chrome/Google/
[18:25:38] <eddyb> you mean in the future?
[18:25:39] <friggle> pcwalton: you mean the oilpan work?
[18:25:41] <pcwalton> yeah
[18:25:56] *** Joins: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP)
[18:26:04] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Quit: Sharp)
[18:26:07] <friggle> pcwalton: did you see https://docs.google.com/document/d/1y7_0ni0E_kxvrah-QtnreMlzCDKN3QP4BN1Aw7eSLfY/edit?pli=1 ?
[18:26:08] *** Quits: lkuper (lkuper@87D98E32.4046EB22.428F94DD.IP) (Quit: lkuper)
[18:26:08] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[18:26:09] <cmr> Searching for "chrome oilpan" is near futile.
[18:26:16] <eddyb> ahahaahaha
[18:26:17] <mletterle> hahah
[18:26:23] <pcwalton> friggle: yeah, that's where I got that from
[18:26:24] <eddyb> that almost seems intentional
[18:26:38] *** Joins: lkuper (lkuper@87D98E32.4046EB22.428F94DD.IP)
[18:26:52] <pcwalton> I am personally quite skeptical that conservative GC in C++ is a good idea
[18:26:53] * pcwalton shrugs
[18:27:36] *** Joins: Ferreus (ferreus@moz-439D3682.pools.arcor-ip.net)
[18:28:03] <lkuper> bstrie: I don't think erdos numbers work that way, sadly
[18:28:11] <eddyb> eeeeh, I could probably start contributing to servo. though I've never ended up working inside the hobby OS which I was developing (as part of a team), so I know I shouldn't get my hopes up
[18:28:20] <lkuper> bstrie: although if you want to author an academic paper with me, let me know
[18:29:42] *** Quits: vodik (simon@moz-9745F68B.net.uwaterloo.ca) (Quit: later gator)
[18:30:36] *** Parts: robitex (Mibbit@moz-FFC03272.libero.it) ()
[18:30:50] *** Joins: octurion (octurion@moz-4C1E443F.clients.kiwiirc.com)
[18:32:18] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[18:32:51] *** Joins: justinstoller (justinstol@EE389F81.B7963FC6.3E8C195A.IP)
[18:32:51] <Blei> sfackler: seems to compile :) thanks
[18:33:24] <cmr> lkuper: What is involved in writing a paper, anyway?
[18:33:29] * cmr is a clueless freshman
[18:33:31] *** Quits: CarpNet (ac@moz-FD24B77.sohonet.co.uk) (Quit: Leaving)
[18:33:46] <benh> it's mostl about coping with tex, i believe
[18:33:54] *** Quits: csherratt (csherratt@moz-CAF331EA.cable.teksavvy.com) (Quit: csherratt)
[18:33:56] * benh dropped out 
[18:34:09] <Blei> cat /dev/random > my_paper.tex && pdflatex my_paper.tex && pdflatex my_paper.tex
[18:34:13] <Blei> then send it in
[18:34:51] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[18:35:06] <eddyb> nah, there's a tool that gives you "peer"-reviewable papers
[18:35:28] <cmr> eddyb: but is there a tool that gives you peers?
[18:35:30] <eddyb> or you could always go for the classy chicken chicken chicken
[18:35:38] *** Joins: kelvin (Mibbit@moz-75E71346.bootp.virginia.edu)
[18:35:46] *** Joins: Shaladdle (shaladdle@moz-FDE833F3.wv.cc.cmu.edu)
[18:35:55] <eddyb> cmr: can the sonic screwdriver clone academics? *I don't know*
[18:36:28] *** Quits: moostik (Icedove@moz-698B575F.w86-212.abo.wanadoo.fr) (Ping timeout)
[18:36:29] *** Joins: jstevans1 (Instantbir@33E0A6ED.83BCE10.DDE5D3F6.IP)
[18:36:30] <eddyb> </ashens>
[18:36:37] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[18:36:38] *** Joins: pnkfelix (pnkfelix@1ED7AD9.5831E18D.54C3481B.IP)
[18:37:19] *** Quits: jstevans (Instantbir@49B6A035.4D74B5A0.DDE5D3F6.IP) (Ping timeout)
[18:37:42] *** Joins: jstevans (Instantbir@CDFBD715.B8CF995A.DDE5D3F6.IP)
[18:37:50] <kelvin> In a function, how do I indicate that one of the parameters is an owned pointer that will be mutable?
[18:38:05] <cmr> kelvin: All owned values are mutable!
[18:38:09] *** Quits: jstevans1 (Instantbir@33E0A6ED.83BCE10.DDE5D3F6.IP) (Ping timeout)
[18:38:14] <sfackler> fn foo(mut x: ~Foo)
[18:38:14] <cmr> However, the binding needs to be mutable too.
[18:38:17] *** Joins: huhlig-home (huhlig@moz-C8339267.hfc.comcastbusiness.net)
[18:38:19] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Ping timeout)
[18:38:23] <cmr> (ie, it's not part of the type)
[18:38:30] *** Quits: oberstet (quassel@moz-78A627DF.dynamic.mnet-online.de) (Client exited)
[18:38:33] <cmr> In short, what sfackler said.
[18:38:43] <kelvin> Oh, I was putting the mut in the wrong place
[18:38:49] *** Quits: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP) (Client exited)
[18:39:15] *** Quits: pnkfelix (pnkfelix@1ED7AD9.5831E18D.54C3481B.IP) (Ping timeout)
[18:39:16] <bstrie> lkuper: new startup idea... Authoring Academic Papers For Low Erdos Number As A Service
[18:39:20] *** Joins: notmatt (notmatt@51D49125.55B08B69.47C41102.IP)
[18:39:22] *** Quits: jstevans (Instantbir@CDFBD715.B8CF995A.DDE5D3F6.IP) (Ping timeout)
[18:39:29] *** Joins: pnkfelix (pnkfelix@1ED7AD9.5831E18D.54C3481B.IP)
[18:40:10] <eddyb> bstrie: AAPFRLENAAS - that is terrible, go back to the drawing board!
[18:40:11] *** Quits: huhlig-home (huhlig@moz-C8339267.hfc.comcastbusiness.net) (Ping timeout)
[18:40:21] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[18:40:24] *** Joins: moostik (Icedove@moz-698B575F.w86-212.abo.wanadoo.fr)
[18:40:25] <cmr> Yes, but it sorta sounds like Apple NAS, so it's good!
[18:40:48] *** Quits: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[18:40:52] <bstrie> benh: can confirm, authoring my BS thesis was one month of experimentation, six months of struggling with latex
[18:41:02] *** Joins: csherratt (csherratt@moz-CAF331EA.cable.teksavvy.com)
[18:41:06] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[18:41:07] <bstrie> well, latex and depression
[18:41:22] <bstrie> which would make a good name for a biography
[18:41:46] <ssbr_> Did you have latex experience before you wrote your thesis?
[18:41:50] *** Joins: huhlig-home (huhlig@moz-C8339267.hfc.comcastbusiness.net)
[18:41:51] <bstrie> not really
[18:42:04] <ssbr_> I've used latex for years of assignments / note taking now, so it's not really so dramatically troublesome. I think I'd be OK writing a thesis using it.
[18:42:11] *** Joins: jdm (jdm@FCCEA34F.7672369.D8E68FF6.IP)
[18:42:11] *** ChanServ sets mode: +o jdm
[18:42:50] <cmr> I have a template that I wrote a few years ago and I never touch it and thigns usually work out when I try to write content
[18:43:25] <ssbr_> yes, I've lost track of what comes from my template and what is actually latex. Apparently nobody uses \land for logical and, for example.
[18:43:39] *** Quits: huhlig-home (huhlig@moz-C8339267.hfc.comcastbusiness.net) (Ping timeout)
[18:44:06] <SiegeLord> Latex is the epitome of bad naming of functions(macros)
[18:44:39] <SiegeLord> \large \Large \LARGE
[18:44:55] *** Quits: octurion (octurion@moz-4C1E443F.clients.kiwiirc.com) (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
[18:44:56] *** Joins: huhlig-home (huhlig@moz-C8339267.hfc.comcastbusiness.net)
[18:45:08] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[18:45:08] *** ChanServ sets mode: +ao pcwalton pcwalton
[18:46:43] <eddyb> SiegeLord: latex... large... teehee
[18:46:58] <SiegeLord> XD
[18:47:12] <SiegeLord> And it's compile time is horrible
[18:47:17] <SiegeLord> *its
[18:47:23] <bstrie> i'ts
[18:49:09] <eddyb> it 'static
[18:50:36] *** Quits: jvshahid (jvshahid@BE83DFD.50866E69.CA2DF2C0.IP) (Ping timeout)
[18:51:18] <Blei> hmm, what's the best way to do the following: I have a chunk of memory (given to me by C) into which I store rust objects. how do i invoke their destructors when the chunk of memory gets freed?
[18:51:28] <Blei> (as in, how, syntactically)
[18:51:57] <bstrie> Blei: does foo.drop() work?
[18:52:08] <Blei> oh, that might be a good idea
[18:52:20] <bstrie> I'm still not sure if you can call drop manually like that...
[18:52:47] <cmr> no, you can't unfortunately.
[18:53:03] <cmr> Blei: transmute it to the proper type, call std::util::drop on it.
[18:53:26] <Blei> no, it doesn't work
[18:53:34] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[18:53:34] <cmr> no?
[18:53:41] <Blei> that was for bstrie
[18:53:44] <cmr> oh
[18:53:51] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[18:54:04] <Blei> cmr: i can't move out of a dereference of *
[18:54:38] *** Quits: heftig (heftig@moz-E8E2034C.inf.fh-bonn-rhein-sieg.de) (Ping timeout)
[18:54:55] *** Quits: zaphod_b (ford_p@moz-CCE57F2F.eblcom.ch) (Ping timeout)
[18:55:49] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[18:55:51] *** Quits: sk (sk@9E6B574B.EB2AA036.2CAF0D3B.IP) (Quit: Leaving)
[18:56:40] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[18:56:40] *** ChanServ sets mode: +ao pcwalton pcwalton
[18:56:50] *** Quits: Shaladdle (shaladdle@moz-FDE833F3.wv.cc.cmu.edu) (Ping timeout)
[18:57:21] <Blei> hrrm, and there doesn't seem to be anything in intrinsics that might help this time
[18:58:49] <Blei> hmm, i guess i could memcopy to a new variable
[18:58:52] <Blei> ugh, so ugly
[18:59:12] *** Quits: alan (alan@moz-FE02DD30.sat6.rackspace.com) (Ping timeout)
[18:59:15] *** Joins: fabiand (fabiand@moz-E5C33560.adsl.alicedsl.de)
[18:59:24] <pcwalton> acrichto: r? https://github.com/mozilla/rust/pull/10791
[19:00:06] *** Joins: alan (alan@32702EE8.939109B2.FB082A98.IP)
[19:00:54] *** Quits: moostik (Icedove@moz-698B575F.w86-212.abo.wanadoo.fr) (Ping timeout)
[19:01:15] *** Joins: heftig (heftig@moz-E8E2034C.inf.fh-bonn-rhein-sieg.de)
[19:02:48] <acrichto> pcwalton: you can't do Local::borrow(None::<Scheduler).get().method() right?
[19:02:52] <acrichto> b/c of rvalue lifetimes?
[19:02:56] <pcwalton> acrichto: it's a bug
[19:03:00] *** Joins: synackse (jordyd@7DAC4ACE.77F880E0.D9401097.IP)
[19:03:03] <pcwalton> I think nmatsakis will fix it
[19:03:15] <acrichto> also line 399 of librustuv/lib.rs
[19:03:24] <acrichto> shouldn't that be sched.get() ?
[19:03:32] *** Joins: maxiepoo_ (Max@moz-FFD7044A.nuwlan.northwestern.edu)
[19:03:32] *** Joins: jordyd (jordyd@7DAC4ACE.77F880E0.D9401097.IP)
[19:03:38] <pcwalton> oh yes, probably
[19:03:40] <pcwalton> fixing.
[19:03:44] *** Quits: jordyd (jordyd@7DAC4ACE.77F880E0.D9401097.IP) (Quit: Leaving)
[19:03:59] <acrichto> pcwalton: r=me if you make the fields of the Borrowed structures private
[19:04:04] *** Quits: synackse (jordyd@7DAC4ACE.77F880E0.D9401097.IP) (Quit: Leaving)
[19:04:11] *** Joins: jordyd (jordyd@7DAC4ACE.77F880E0.D9401097.IP)
[19:04:16] <acrichto> resetting them would make the runtime very sad
[19:04:20] <Blei> no amount of tranmuting helps. anyone? ;_;
[19:04:27] *** jordyd is now known as synackse
[19:04:31] <pcwalton> thanks
[19:04:35] <acrichto> pcwalton: I like this change!
[19:04:44] <pcwalton> net loss of LOC
[19:04:50] <pcwalton> except for the borrowed structures
[19:04:50] <acrichto> wheeee
[19:05:08] <pcwalton> but with all the cells it ends up being a net loss even with that
[19:05:21] <pcwalton> with all the cells that I get to remove, that is
[19:05:46] <bstrie> pcwalton: is all this yak-shaving actually producing improvements, or is it mostly a wash
[19:06:01] <pcwalton> bstrie: it's removing many lines of code and potentially micro-optimizing
[19:06:02] <pcwalton> so yes
[19:06:08] <bstrie> hooray :)
[19:06:46] *** Quits: synackse (jordyd@7DAC4ACE.77F880E0.D9401097.IP) (Quit: Leaving)
[19:06:49] <acrichto> pcwalton: about the raii for the with_cpm function, I'm trying to express the invariant that a codegen pass manager can only be used once, so would you be ok with a 'Codegen::new()' and then 'cg.exec(|cpm| { ... })' which is 'fn exec(self)' ?
[19:06:50] *** Quits: lkuper (lkuper@87D98E32.4046EB22.428F94DD.IP) (Quit: lkuper)
[19:06:53] *** Joins: zaphod_b (ford_p@moz-CCE57F2F.eblcom.ch)
[19:06:57] *** Joins: synackse (synackse__@7DAC4ACE.77F880E0.D9401097.IP)
[19:07:25] <pcwalton> hmm
[19:07:29] <pcwalton> I guess it's barely worth using RAII then
[19:07:59] <acrichto> I could certainly name it something better
[19:08:02] *** Joins: chridou (Mibbit@moz-D2C928A3.dip0.t-ipconnect.de)
[19:08:53] *** Quits: andre_ (andre@CA528A4A.45A4338E.8EE27E6.IP) (Quit: leaving)
[19:08:57] <Eridius> acrichto: what's going on with bors?
[19:08:58] *** Joins: lkuper (lkuper@87D98E32.4046EB22.428F94DD.IP)
[19:09:04] <Eridius> why is it throwing spurious broken pipe failures during tests?
[19:09:20] <acrichto> Eridius: I've seen it a lot, still no idea why it's happening
[19:09:45] *** Joins: liquidchen (Mibbit@moz-1B446009.hinet-ip.hinet.net)
[19:10:53] <Eridius> hrm, since &fn is now obsoleted, if I use a closure type and I want to pass a function, does Rust automatically wrap the function in a closure for me?
[19:11:18] <eddyb> yupp
[19:12:14] *** Quits: liquidchen (Mibbit@moz-1B446009.hinet-ip.hinet.net) (Quit: http://www.mibbit.com ajax IRC Client)
[19:12:38] *** Joins: skade (skade@moz-A586637D.pools.arcor-ip.net)
[19:13:53] *** Joins: Sharp (Sharp@1710C26.8381A41.8725677B.IP)
[19:15:08] *** Quits: csherratt (csherratt@moz-CAF331EA.cable.teksavvy.com) (Quit: csherratt)
[19:15:13] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[19:15:40] *** Joins: ktt3ja (Mibbit@C3321816.87CA334A.DDE5D3F6.IP)
[19:16:08] *** Joins: liquidchen (Mibbit@moz-1B446009.hinet-ip.hinet.net)
[19:16:09] <chridou> hello! the rustc told me to report a bug. it says: task <unnamed> failed at 'index out of bounds: the len is 0 but the index is 0', /home/christian/bin/rust/rust-0.8/src/librustc/middle/check_match.rs:246. how can i find out, whether it is already known?
[19:16:52] <bstrie> chridou: hm, rust 0.8 is rather old, can you try compiling master to see if it's still around?
[19:17:34] <chridou> yes. will do that. thank you!
[19:18:28] <eddyb> rusti: [][0]
[19:18:30] -rusti- pastebinned 10 lines of output: http://sprunge.us/QAUD
[19:18:56] <eddyb> rusti: let x: [int, ..0] = []; x[0]
[19:18:57] -rusti- task <unnamed> failed at 'index out of bounds: the len is 0 but the index is 0', <anon>:9
[19:18:57] -rusti- application terminated with error code 101
[19:19:07] *** Quits: markwash (mwashenber@moz-E830FEBB.hsd1.ca.comcast.net) (Quit: markwash)
[19:19:22] <eddyb> oh, inside the compiler, neeeevermind >_>
[19:20:25] * jdm should look up higher kinded types one of these days
[19:22:05] <chridou> so, does that mean it makes no sense to checkout master or report it? it occurs while pattern matching.
[19:22:25] *** Joins: moostik (Icedove@moz-698B575F.w86-212.abo.wanadoo.fr)
[19:22:43] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[19:23:36] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[19:23:36] *** ChanServ sets mode: +o tjc
[19:23:46] <FreeFull> rusti: 3[[1,2,3]]
[19:23:46] -rusti- <anon>:9:9: 9:18 error: cannot index a value of type `<VI0>`
[19:23:46] -rusti- <anon>:9          3[[1,2,3]]
[19:23:47] -rusti-                   ^~~~~~~~~
[19:23:47] -rusti- error: aborting due to previous error
[19:23:47] -rusti- application terminated with error code 101
[19:23:57] <FreeFull> rusti: [[1,2,3]]3
[19:23:57] -rusti- <anon>:9:18: 9:19 error: expected one of `; }` but found `3`
[19:23:57] -rusti- <anon>:9          [[1,2,3]]3
[19:23:57] -rusti-                            ^
[19:23:57] -rusti- application terminated with error code 101
[19:24:06] <FreeFull> Ok, doesn't behave like c
[19:24:07] <bstrie> chridou: check out master and try to compile it
[19:24:08] *** Quits: mye (mye@moz-690373B4.dip0.t-ipconnect.de) (Quit: mye)
[19:24:14] <FreeFull> rusti: [1,2,3][2]
[19:24:15] -rusti- 3
[19:24:21] <chridou> the error in the compiler seems to be here: /rust-0.8/src/librustc/rustc.rs:391
[19:24:24] <chridou> ok
[19:24:38] <bstrie> chridou: bugs in the compiler itself are definitely worth reporting :P
[19:24:52] <eddyb> FreeFull: lol, no pointer arithmetic in Rust
[19:25:08] <FreeFull> Except in unsafe blocks?
[19:25:17] <chridou> ok. i will checkout master. this will take some time.
[19:25:29] *** Quits: Sharp (Sharp@1710C26.8381A41.8725677B.IP) (Quit: Sharp)
[19:25:36] <eddyb> FreeFull: not even there
[19:26:43] <FreeFull> https://github.com/mozilla/rust/pull/8121 ??? 
[19:27:47] <kelvin> is there a way around the fact that managed vectors have no push method?
[19:28:13] *** Quits: lfox (lfox@moz-89EEE1BF.nyc.res.rr.com) (Quit: ZZZzzzâ€¦)
[19:28:49] *** Joins: mye (mye@moz-690373B4.dip0.t-ipconnect.de)
[19:29:26] <sfackler> kelvin: even @mut [T]?
[19:30:09] <kelvin> this code: let mut scene_triangles: @[~RayTriangle] = @[];
[19:30:14] *** Joins: jvshahid (jvshahid@BE83DFD.50866E69.CA2DF2C0.IP)
[19:30:17] <sfackler> @[T] is immutable
[19:30:34] <sfackler> @mut [T] is a different type than @[T]
[19:30:35] <kelvin> oh, does the mut infront not do anything?
[19:30:36] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Client exited)
[19:30:40] <FreeFull> > let foo : @mut [int] = @[]; foo.push(3); foo
[19:30:41] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[19:30:43] <sfackler> it means hyou can reassign the pointer
[19:30:52] <sfackler> *you
[19:30:57] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[19:31:17] <FreeFull> rusti: let foo : @mut [int] = @[]; foo.push(3); foo
[19:31:18] -rusti- pastebinned 8 lines of output: http://sprunge.us/HJOc
[19:31:32] <kelvin> still getting the error
[19:31:32] <kelvin>  496:35 error: type `@mut [~RayTriangle]` does not implement any method in scope named `push`
[19:31:44] <FreeFull> @mut [T] doesn't have .push it seems
[19:31:50] <Blei> @mut~[T]
[19:31:58] <Blei> so many sigils and keywords
[19:32:07] <sfackler> does it realy need to use @?
[19:32:10] <FreeFull> rusti: let foo : @mut ~[int] = @mut~[]; foo.push(3); foo
[19:32:11] -rusti- @mut ~[3]
[19:32:15] <FreeFull> Yay
[19:32:34] <sfackler> @ is going away in the future
[19:32:44] <FreeFull> It is
[19:32:44] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[19:32:52] *** Joins: Sharp (Sharp@1710C26.8381A41.8725677B.IP)
[19:32:59] <kelvin> will it be implicit?
[19:33:03] <bjz> steer away from @ if you can
[19:33:11] <FreeFull> It'll be replaced with something else
[19:33:14] <sfackler> no, it's moving out of the language into the libraries
[19:33:15] <celeron55> are there any examples about when it makes sense to use managed pointers in rust?
[19:33:18] <sfackler> Rc<T> and Gc<T>
[19:33:26] <pcwalton> I am working on the replacement for @mut as we speak
[19:33:27] <pcwalton> it'll be the new Cell
[19:33:45] <pcwalton> which will basically be the return of mut fields, but without the annoying borrow check errors
[19:33:48] <FreeFull> Rc is for reference counting?
[19:33:51] <sfackler> yep
[19:33:56] <bjz> celeron55: unfortunately it's difficult - you might be able to look at the tests fro Rc
[19:34:05] <bjz> celeron55
[19:34:05] <sfackler> (which is secretly what @ does anyways right now)
[19:34:18] <FreeFull> Yeah, no Gc right now
[19:34:18] <bjz> celeron55: 'difficult' as in - not many docs
[19:34:38] <bjz> celeron55: also not much language support for it, but that will improve
[19:34:59] <kelvin> well, right now I'm using the managed pointer so that I can refer to some immutable variables from a bunch of tasks that are spawning at the same time. I get the feeling though that this isn't really the best way to do that
[19:36:26] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[19:36:26] <kelvin> does anyone have any suggestions for a better way to do that?
[19:36:29] <sfackler> I don't think that @ can be sent across tasks, right?
[19:36:35] <bjz> kelvin: messaging or futures might help
[19:36:42] <sfackler> extra::arc::Arc works for immutable data shared across tasks
[19:36:45] <sfackler> or messaging
[19:37:09] <bjz> kelvin: try not to resort to shared stated
[19:37:20] <kelvin> Why should you need arc when the data can't change?
[19:37:43] <sfackler> you need to know when to destroy the data
[19:37:50] <eddyb> because non-atomic ref-counting can screw up
[19:37:51] <sfackler> Arc stands for atomic reference counting
[19:37:53] <bjz> kelvin: it needs to know when the data can be freed
[19:38:18] *** Joins: docbrown (docbrown@5CE9D448.F0B9EFB2.7F8758CE.IP)
[19:38:35] <bjz> kelvin: it can't determinitstically, because it's shared amongst tasks, so it needs to do some GC
[19:39:46] *** Quits: notmatt (notmatt@51D49125.55B08B69.47C41102.IP) (Client exited)
[19:39:55] <kelvin> so does it use arc to keep track of each task that is using the data, in case the main method exits before a task is finished?
[19:40:10] <sfackler> yep
[19:40:25] <sfackler> the data in an arc may also not be created on the main task
[19:41:01] <pcwalton> 400 members in #rust \o/
[19:41:03] <bjz> kelvin: it doesn't free the stored data until it is not referenced by anything.
[19:41:09] <bjz> pcwalton: \o/
[19:41:13] <kelvin> is there any way to assure the compiler that the task in which the data is created will not exit before all tasks dependent on that data exit?
[19:42:03] <sfackler> not that I know of. what's the advantage?
[19:42:15] <bstrie> pcwalton: we still need 52 more to beat #developers!
[19:42:24] <pcwalton> kelvin: not yet, but it's probably not the compiler's job, but more the library's job
[19:42:52] *** Quits: fabiand (fabiand@moz-E5C33560.adsl.alicedsl.de) (Quit: Verlassend)
[19:43:48] <kelvin> really just personal preference, arc feels awkward to use, especially when I need to modify the variables outside the task before handing them to the task that I just created
[19:44:18] <kelvin> *initialize not modify
[19:44:20] <bjz> kelvin: that is understandable - we still need language support for it
[19:44:22] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[19:44:35] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[19:44:35] *** ChanServ sets mode: +ao pcwalton pcwalton
[19:44:43] *** Joins: dcrewi (david@moz-AB8667CE.gyrae.net)
[19:44:45] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[19:46:12] <kelvin> bjz: so my understanding of managed pointers is that they will not free the memory until all references are freed. And it seems that arc does essentially the same thing, but provides a locking functionality on top of that. is that correct?
[19:46:39] <bjz> managed pointers are being removed - don't use them
[19:46:41] *** Joins: octurion (octurion@moz-4C1E443F.clients.kiwiirc.com)
[19:47:05] <bjz> they are being libified to things like Arc, Rc and Gc
[19:47:06] <sfackler> kelvin: you can't send a managed pointer to another task
[19:47:39] <kelvin> the compiler is letting me do it atm, that may be 0.8 though
[19:47:40] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[19:48:07] <kelvin> but I'll take your advice and remove the managed pointers 
[19:48:08] <bjz> kelvin: be sure to use 0.9-pre
[19:48:19] <bjz> 0.8 is ancient
[19:48:32] <bjz> :)
[19:48:37] *** Quits: pnkfelix (pnkfelix@1ED7AD9.5831E18D.54C3481B.IP) (Quit: Leaving.)
[19:49:06] *** Joins: lfox (lfox@moz-89EEE1BF.nyc.res.rr.com)
[19:49:13] <kelvin> I can't update at the moment because of our project deadline, but I'm definitely moving to 0.9-pre once the project has been turned in
[19:49:26] <bjz> oh ok
[19:49:41] <bstrie> kelvin: oh is this for the OS class?
[19:49:53] <kelvin> yeah, our team is writing a cpu ray-tracer
[19:50:03] <bjz> nice!
[19:50:12] *** Quits: bjustin (bjustin@moz-8FC28563.sierrabravo.net) (Ping timeout)
[19:50:45] <bstrie> haha
[19:50:48] <bstrie> december is the month of raytracers
[19:50:55] <bjz> ?
[19:50:59] <kelvin> we're trying to show the benefit of rust tasks by creating a faster ray-tracer than a similar c version
[19:51:24] <bstrie> bjz: back in 2011, before 0.1, a raytracer was the very first sizeable outside project that anyone ever submitted to the mailing list
[19:52:03] *** Joins: eholk (eholk@moz-BA312F07.crest.iu.edu)
[19:52:13] <benh> https://mail.mozilla.org/pipermail/rust-dev/2011-December/001070.html this?
[19:52:16] <bjz> kelvin: yeah I'm still new to concurrency - been learning a bit from CML
[19:53:01] <benh> was dec 2011 really before 0.1?
[19:53:09] *** Quits: maxiepoo_ (Max@moz-FFD7044A.nuwlan.northwestern.edu) (Quit: maxiepoo_)
[19:53:11] *** Quits: peterdn (chatzilla@moz-5EB9CC81.as13285.net) (Quit: ChatZilla 0.9.90.1-rdmsoft [XULRunner 22.0/20130619132145])
[19:53:12] <ktt3ja> bjz: CML?
[19:53:21] <bjz> ktt3ja: Concurrent ML
[19:53:37] <bjz> ktt3ja: http://www.amazon.com/Concurrent-Programming-ML-John-Reppy/dp/0521714729
[19:53:56] <bstrie> bjz: indeed, that's it
[19:54:03] *** Joins: mib_jzvkrm (Mibbit@DA229977.63E8C96.85938D85.IP)
[19:54:34] <FreeFull> I'd say that for concurrency, Erlang and Haskell are at the top
[19:54:54] <bstrie> bjz: check out that code for a blast from the past
[19:55:08] <bstrie> https://mail.mozilla.org/pipermail/rust-dev/attachments/20111209/0f9bd153/attachment-0005.obj
[19:55:20] <benh> "let {depth,count} = " :3
[19:55:34] <benh> who needs named structs and/or tuples
[19:55:44] <bstrie> benh: apparently we do, thanks to coherence :)
[19:56:36] <benh> hm, couldn't you get that with forbidding impls on anonymous structural records and requiring a newtype enum around the record?
[19:56:40] <bstrie> I think modern rust looks a lot better than ancient rust
[19:56:43] <bstrie> progress!
[19:56:46] *** Quits: Torwegia (tor@moz-8D4C28CD.lightspeed.renonv.sbcglobal.net) (Ping timeout)
[19:56:52] <bjz> FreeFull: it's more about that CML's concurrency primitives are much closer to rusts than Erlang's, so the examples are easier to transfer over
[19:57:07] <benh> bstrie: on the other hand, there's no sigils in that code :D
[19:57:18] <benh> #fmt, maybe
[19:57:22] <bstrie> benh: soon there won't be sigils in our code either! :O
[19:57:31] <bjz> bstrie: .obj too!
[19:57:35] <bstrie> the days of sigils are numbered
[19:57:37] *** Quits: Sorella (quildreen@D2D1E5DD.81EFC25A.A95FAE2B.IP) (Quit: Ex-Chat)
[19:57:37] <benh> bstrie: & is kinda a sigil
[19:57:51] <bstrie> bjz: I think .obj might just be becaus of pipermail...
[19:57:54] <bstrie> benh: sshhhhh
[19:58:15] *** Joins: Ms2ger (Ms2ger@B7B2FF50.C60A97A6.F9FB0584.IP)
[19:58:55] <jvns> when running tests, is there a way to get "make check" to not regenerate the pandoc documentation every time?
[19:58:55] *** Quits: Sharp (Sharp@1710C26.8381A41.8725677B.IP) (Client exited)
[19:59:08] <bstrie> jvns: uninstall pandoc? :)
[19:59:21] <bstrie> <-- not helpful
[19:59:53] <jvns> :)
[19:59:56] <bstrie> afaik our makefile says to itself, oh well you have pandoc installed! of *course* you want to build the docs
[20:00:13] <bstrie> actually maybe you need both pandoc and node
[20:00:14] <bstrie> not sure
[20:00:15] <o11c> yeah, I noticed rust's makefile was not well-behaved
[20:00:24] <benh> yeah i think you need node
[20:00:29] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[20:00:37] <benh> i'm kind of amazed how many programming languages are involved in generating our docs :)
[20:00:38] <o11c> it was especially annoying since it would generate half of the documentation, then fail
[20:00:38] *** Joins: Sharp (Sharp@1710C26.8381A41.8725677B.IP)
[20:00:52] <o11c> and when I tried to do it again, it regenerated all the stuff it already did
[20:01:36] * jvns tries removing the contents of mk/docs.mk
[20:01:43] *** Joins: bjustin (bjustin@moz-8FC28563.sierrabravo.net)
[20:02:32] *** Joins: peterdn (chatzilla@moz-5EB9CC81.as13285.net)
[20:03:12] <bstrie> jvns: where is that malloc implementation in your kernel defined?
[20:03:21] <bstrie> <-- too lazy to clone and grep
[20:03:30] <jvns> bstrie: in  'runtime.asm'
[20:03:43] <jvns> bstrie: https://github.com/jvns/rustboot/blob/master/runtime.asm
[20:03:59] *** Quits: lkuper (lkuper@87D98E32.4046EB22.428F94DD.IP) (Quit: lkuper)
[20:04:00] <bstrie> does rustboot really use zero.rs? I don't think that's actually necessary anymore...
[20:04:15] <jvns> yeah I also think it's not necessary
[20:05:37] <jvns> yeah, removing zero.rs doesn't change anything. removed.
[20:07:45] <bstrie> oh hahaha, reading this raytracer post from 2011, I had totally forgotten that locals used to be mutable by default
[20:07:55] <bjz> :O
[20:07:56] <bstrie> this takes me back
[20:08:00] <bjz> woah
[20:08:08] <bjz> that's crazy
[20:08:28] *** Joins: maxiepoo_ (Max@moz-FFD7044A.nuwlan.northwestern.edu)
[20:09:28] *** Joins: lkuper (lkuper@87D98E32.4046EB22.428F94DD.IP)
[20:09:31] <bjz> bstrie: so this was pre-0.1?
[20:09:35] <bstrie> yep
[20:09:46] <bstrie> also, we used to *require* the suffixes on all integer literals
[20:09:48] <bstrie> people hated it
[20:10:02] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[20:10:06] *** Joins: Shaladdle (shaladdle@610E8D26.191E59C5.689607DE.IP)
[20:10:07] <bstrie> I had forgotten how bad that used to be
[20:10:19] *** Quits: skade (skade@moz-A586637D.pools.arcor-ip.net) (Quit: Textual IRC Client: www.textualapp.com)
[20:10:34] <bjz> bstrie: http://www.reddit.com/r/rust/comments/1s3osp/blast_from_the_past_pre01_raytracer_rustdev_rust/
[20:10:42] <bjz> thought I'd share
[20:10:47] <bjz> :D
[20:10:49] <bstrie> haha
[20:10:55] <bstrie> I'll have to comment
[20:11:08] <tjc> bstrie: some people even argued against removing the required suffixes :-)
[20:11:21] *** Joins: TimAbraldes (quassel@125EF623.B2666F0E.66399531.IP)
[20:11:53] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[20:13:21] <bstrie> actually, I think it was lkuper who implemented the numeric literal inference
[20:13:34] *** Quits: Shaladdle (shaladdle@610E8D26.191E59C5.689607DE.IP) (Ping timeout)
[20:13:35] <tjc> Yes
[20:13:37] <tjc> she did
[20:13:49] <tjc> but before she did that, there were certain opinions that we should keep it as it was
[20:13:53] <bstrie> oh right, you two were both interns back then :P
[20:13:55] <tjc> I wasn't one of them :-)
[20:13:59] <tjc> No, this was her second internship
[20:14:00] <tjc> I think
[20:14:03] <tjc> I wasn't an intern :-)
[20:14:09] <bjz> bstrie: ooh `use std;`
[20:14:18] <bstrie> back when use was extern mod
[20:14:25] <bjz> bstrie: https://mail.mozilla.org/pipermail/rust-dev/attachments/20111209/0f9bd153/attachment-0008.obj
[20:14:39] <bstrie> crate files :P
[20:15:20] *** Quits: ktt3ja (Mibbit@C3321816.87CA334A.DDE5D3F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[20:15:43] <bjz> hah, I like this line: let specular = s*s*s*s*s*s*s*s*s*s*s*s*s*s*s*s*s*s*s*s*s*s*s*s*s*s*s*s*s*s*s*s*s*s*s*s*s*s*s*s*s*s*s*s*s*s*s*s*s*s*s*s*s*s*s*s*s;
[20:15:59] <bstrie> hahahahahaha
[20:16:01] <bstrie> I remember that!
[20:16:18] <bstrie> he couldn't figure out how to use the exponentiation function :P
[20:16:42] <myname> you could at least have make a binary tree
[20:16:47] *** Joins: Shaladdle (shaladdle@610E8D26.191E59C5.689607DE.IP)
[20:17:06] <myname> let specular = specular' * specular' where specular' = specular'' * specular'' ...
[20:17:14] *** Joins: jstevans (Instantbir@moz-4EDF0098.sta.embarqhsd.net)
[20:17:20] <bjz> I notice you used to use the ocaml convention of having a `t` per module: option::t<(hit_result, uint)>
[20:17:28] *** Joins: brylie (quassel@moz-E27796EB.hsd1.or.comcast.net)
[20:17:32] *** Quits: heftig (heftig@moz-E8E2034C.inf.fh-bonn-rhein-sieg.de) (Quit: Quitting)
[20:18:26] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[20:18:34] *** Joins: efnysien (efnysien@moz-50AD4325.res.cmu.edu)
[20:18:45] *** Quits: japaric (japaric@38C6A13.CBA91732.95AFB88D.IP) (Ping timeout)
[20:19:20] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Client exited)
[20:19:25] *** Joins: lenstr (lenstr@12A97875.9636F313.7A27613B.IP)
[20:19:41] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[20:19:56] *** Quits: peterdn (chatzilla@moz-5EB9CC81.as13285.net) (Ping timeout)
[20:20:04] * eddyb wonders who glehel is
[20:20:08] <Eridius> in case anyone is interested, I just defined a quick set of Lua 5.1 bindings: https://github.com/kballard/rust-lua
[20:20:24] <Eridius> right now it's all unsafe C FFI functions, but, assuming I actually stick with it, I'm planning on creating a safe(-ish) wrapper
[20:20:40] <bstrie> Eridius: did you use bindgen?
[20:20:46] * Eridius isn't quite sure how to handle safety, because e.g. passing an unacceptable index to a lua function is undefined, but the overhead of checking every index may not be ideal
[20:20:49] <Eridius> bstrie: no
[20:20:55] <Eridius> bstrie: too many #defines and crap in lua.h for me to consider that
[20:21:04] * Eridius is curious what bindgen would have produced
[20:21:11] <bstrie> Eridius: wonder no more!
[20:21:12] <bstrie> https://github.com/bstrie/luabind/
[20:21:17] <Eridius> lol
[20:21:21] <bstrie> every once in a while I use bindgen to regenerate lua bindgins
[20:21:24] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[20:21:26] <Eridius> bstrie: how does it work with all the macros?
[20:21:29] <bstrie> that repo's probably not been updated in a long time, though
[20:21:36] <bstrie> Eridius: well, it doesn't :P
[20:21:39] <Eridius> hah
[20:21:52] <bstrie> Eridius: my new plan was to expand the C macros with clang and then run bindgen on *those* files
[20:21:54] <ssbr_> Why doesn't the test runner synchronize test output?
[20:22:01] <bstrie> but I still haven't gotten around to it
[20:22:04] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[20:22:14] *** Quits: Savago (Savago@D8B9C081.E820043D.D4C04133.IP) (Ping timeout)
[20:22:15] <SiegeLord> I thought bindgen already expanded the macros
[20:22:17] <ssbr_> It's weird that one has to choose between fast test and readable output
[20:22:27] <bstrie> SiegeLord: I don't think it does... not sure
[20:22:31] <bstrie> it might
[20:22:31] <Eridius> bstrie: a bunch of the macros are for C code, not just e.g. references to other functions
[20:22:33] <bstrie> who knows
[20:22:34] <cmr> ssbr_: it just hasn't been implemented, afaik.
[20:22:40] <cmr> it's easy to do wrong, but hard to do well
[20:22:45] <SiegeLord> 'cause I'm routinely binding things defined as FUNC(ret, name, args)
[20:22:58] <cmr> (ie, what do you do when one is taking an obscenely long time?
[20:22:58] <bstrie> SiegeLord: https://github.com/bstrie/luabind/blob/master/test/luah_lua52.rs
[20:23:01] <bstrie> er
[20:23:02] <cmr> do you display intemediate output?)
[20:23:03] <bstrie> Eridius: https://github.com/bstrie/luabind/blob/master/test/luah_lua52.rs
[20:23:16] *** Quits: mib_jzvkrm (Mibbit@DA229977.63E8C96.85938D85.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[20:23:22] <bstrie> Eridius: if bindgen is expanding the macros, you'd see the defns in there
[20:23:28] <Eridius> heh, I skipped the debug interface. But I did everything else
[20:23:29] *** Quits: avsej (avsej@D9A610B8.4841F515.FB33447D.IP) (Quit: Ex-Chat)
[20:23:39] <eddyb> jvns: eeeh, reddit is down for me atm, so I'll just link you to this (my heap implementation for rustic, not merged in yet) https://github.com/pcmattman/rustic/pull/7
[20:23:40] <cmr> eddyb: illisius
[20:23:50] <bstrie> Eridius: we could actually do the debug interface now, now that rust can call varargs functions and that bindgen has a hacky solution for unions
[20:24:02] <eddyb> cmr: ah, thanks. took me a couple of seconds to realize what you were talking about
[20:24:10] <sbalmos> eddyb: Oh cute
[20:24:12] <cmr> sorry, backscroll :p
[20:24:26] <eddyb> cmr: not on IRC right now, though
[20:24:29] <bstrie> Eridius: the big thing preventing me from doing anything with lua bindings in rust is that I can't find any damn test cases!! and I don't know enough about Lua<->C to make my own
[20:24:43] <Eridius> bstrie: yeah, a set of existing test cases would be awesome :/
[20:24:46] <bstrie> Eridius: I only ever had three test cases, all in that test directory
[20:24:51] *** Quits: lenstr (lenstr@12A97875.9636F313.7A27613B.IP) (Ping timeout)
[20:24:53] <jvns> wait, there is a #rust-osdev channel? mind=blown =D
[20:24:54] <bstrie> cobbled together from the internet
[20:25:07] <Eridius> I haven't embedded Lua in C before either. But since std::io has been rewritten, I'm considering rewriting my IRC bot in Rust, and using Lua for the plugins
[20:25:18] *** Quits: efnysien (efnysien@moz-50AD4325.res.cmu.edu) (Quit: )
[20:25:26] * Eridius has an IRC bot in Go, but all the plugins are also written in Go, which is a bit cumbersome because no dynamic loading
[20:25:35] <jvns> eddyb, super cool, thanks!
[20:25:37] *** Quits: synackse (synackse__@7DAC4ACE.77F880E0.D9401097.IP) (Ping timeout)
[20:26:27] *** Joins: synackse (synackse__@7DAC4ACE.77F880E0.D9401097.IP)
[20:26:28] <bstrie> Eridius: yeah, obviously bindgen didn't expand those macros for me, as otherwise I wouldn't have commented out the functions in https://github.com/bstrie/luabind/blob/master/test/test1.c for their more elementary alternatives
[20:26:32] *** Quits: maxiepoo_ (Max@moz-FFD7044A.nuwlan.northwestern.edu) (Quit: maxiepoo_)
[20:26:49] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[20:27:05] <erickt> hey #rust! I'm going to be announcing the next rust bay area meetup on 12/17. Would anyone else like to present at it? I've got 2 short presentations at the moment
[20:27:28] <bstrie> erickt: fly in jensnockert with his rust-powered tesla coil :)
[20:27:45] <ssbr_> cmr: Ah.
[20:27:46] <erickt> there's a rust powered tesla coil?!
[20:28:00] <ssbr_> Well, clearly the answer is updateable intermediate display via curses
[20:28:01] <bstrie> erickt: well, its capacitors overloaded, so it's out of commission at the moment...
[20:28:08] <bstrie> erickt: but, that wasn't rust's fault :)
[20:28:10] <cmr> ssbr_: heh, clearly!
[20:28:23] <erickt> bstrie: aww. Now that needs to be presented
[20:28:24] <cmr> ssbr_: TAP output would be cool too. The test runner just needs to be more flexible.
[20:28:44] <bstrie> erickt: he was planning on using it at the rust skane meetup this week, not sure what he plans to do instead
[20:29:29] <ssbr_> cmr: That would be cool!
[20:29:32] <Eridius> bstrie: is lua_pcall() a macro in 5.2? It's a function in 5.1. But I don't see lua_pcallk(), so I guess that's new
[20:29:37] <erickt> bstrie: that's sucks! 
[20:29:42] <ssbr_> Also, wow, I didn't know TAP wasa  general thing. I thought it was just a name for a thing in my company <_<
[20:29:48] <ssbr_> you freaked me out for a second
[20:30:02] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[20:30:51] <octurion> Am I correctly benchmarking in this case? Because even with a no-op, I get 16 ns/iter.
[20:30:52] <octurion> http://kib2.free.fr/pastebin/view_paste.php?id=144
[20:31:02] <cmr> heh
[20:31:05] *** Joins: maxiepoo_ (Max@moz-FFD7044A.nuwlan.northwestern.edu)
[20:31:09] <cmr> no, TAP is a very real thing!
[20:31:17] <cmr> it seems fairly uncommon, which I think is a shame.
[20:31:31] <cmr> the perl community has a lot of really great things that just don't catch on because "ew perl"
[20:31:32] <erickt> octurion: are you using --opt-level=3?
[20:31:38] <octurion> Yes
[20:32:04] <bstrie> Eridius: the manual http://www.lua.org/manual/5.2/manual.html#lua_pcallk notes for each function whether it is defined as a macro
[20:32:12] <erickt> octurion: what version of rust are you using? I see some syntax that doesn't work in rust HEAD
[20:32:20] <bstrie> Eridius: or rather, if it's defined as a macro, it will say so
[20:32:31] <octurion> erickt: 0.8
[20:32:35] <bstrie> Eridius: see lua_pushcfunction, just below
[20:32:53] <Eridius> bstrie: I mentioned lua_pcall because your test case has it commented out and uses lua_pcallk instead, which made me wonder if lua_pcall in 5.2 is defined as lua_pcallk(L, nargs, nresults, errfunc, 0, 0)
[20:33:11] <Eridius> 5.1 doesn't have lua_pcallk()
[20:33:19] *** Joins: lenstr (lenstr@592A44AF.9636F313.7A27613B.IP)
[20:33:23] <bstrie> Eridius: actually, maybe it's not consistent in identifying which ones are macros. sadface
[20:33:40] <erickt> octurion: also, I don't think your benchmark fn is safe. I believe the BenchHarness doesn't run a consistent number of iterations
[20:33:42] <Eridius> bstrie: yeah I ported the headers manually instead of relying on the documentation ;)
[20:33:56] *** Joins: Savago (Savago@D8B9C081.E820043D.D4C04133.IP)
[20:34:29] <erickt> octurion: so you should at least be doing `do b.iter { let output = vec::with_capacity(1024); do input.iter().map ... }`
[20:34:45] *** Joins: japaric (japaric@6E6418A.935005AB.84437BC5.IP)
[20:34:48] <bstrie> erickt: wehre do I have lua_pcall commented out?
[20:35:17] <Eridius> bstrie: sorry, lua_call, not lua_pcall. I fail at typing
[20:35:38] <erickt> bstrie: I think you mean Eridius
[20:36:28] <bstrie> Eridius: right, sorry
[20:36:34] <octurion> erickt: Thanks :)
[20:36:40] <bstrie> :3
[20:36:54] *** Joins: mib_rkcfa9 (Mibbit@BD1B6EC9.E4F50C.2F0F0669.IP)
[20:37:04] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[20:37:11] <erickt> octurion: second, you are actually creating a new map with what you're doing. You should either be doing `let output = input.iter.map(|&(x,y)| dmultu(x,y))` or `let output = ...; for &(x,y) in input.iter() { output.push(dmultu(x,y)); }`
[20:37:17] <olsonjeffery> at this point, what's easier to embed: spidermonkey or luis?
[20:37:22] <olsonjeffery> lua*
[20:37:44] *** jorendorff is now known as jorendorff_away
[20:38:11] <erickt> octurion: oops, my first example was wrong. this would work: `let output: ~[Uint128] = input.iter.map(|&(x,y)| dmultu(x,y)).collect()`
[20:38:27] <olsonjeffery> i have more experience w/ JSAPI
[20:38:29] *** Quits: jstevans (Instantbir@moz-4EDF0098.sta.embarqhsd.net) (Ping timeout)
[20:38:40] *** Parts: mib_rkcfa9 (Mibbit@BD1B6EC9.E4F50C.2F0F0669.IP) ()
[20:38:48] *** Quits: Shaladdle (shaladdle@610E8D26.191E59C5.689607DE.IP) (Ping timeout)
[20:39:28] *** jorendorff_away is now known as jorendorff
[20:39:29] <ssbr_> Will I really regret it if I have a 3608256 line module?
[20:39:44] <cmr> ssbr_: ask eddyb
[20:39:45] <bstrie> ssbr_: is this a hypothetical question
[20:39:46] <cmr> :P
[20:39:51] <ssbr_> bstrie: no
[20:39:58] <olsonjeffery> code generation?
[20:40:00] <cmr> ssbr_: depends on what you're doing.
[20:40:01] <ssbr_> olsonjeffery: yes
[20:40:02] <bstrie> ssbr_: where the hell did you find that many lines of rust
[20:40:03] <bstrie> ah
[20:40:04] <cmr> Certain things are.... troublesome.
[20:40:05] <ssbr_> cmr: it's a test suite
[20:40:22] *** Joins: ktt3ja (Mibbit@FD3C3646.D41652FF.DDE5D3F6.IP)
[20:40:29] <olsonjeffery> ssbr_: compile it and find out!
[20:40:49] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[20:40:49] <cmr> ssbr_: I suggest turning swap off and setting a ulimit :)
[20:40:51] *** jorendorff is now known as jorendorff_away
[20:40:53] <bstrie> ssbr_: compile it and find out if the universe will ultimately contract into a big cruch or expand forever!
[20:40:53] <ssbr_> I modified firefox to record all uses of regexps, then ran the firefox test suite, and then exported the uses and firefox's results to a .rs test suite
[20:40:57] <cmr> hah
[20:40:59] <cmr> that's genius
[20:41:10] <ssbr_> I think I probably should just not do this
[20:41:35] <bstrie> surely firefox doesn't use regexes for like, browser engine code...
[20:41:36] <ssbr_> (instead, I can rewrite the relevant part of the test runner and just iterate over a multi-MB CSV file.)
[20:41:48] *** Joins: Kruppe (user@moz-4BE3939A.net.uwaterloo.ca)
[20:41:55] <ssbr_> bstrie: I dunno, some of these regexps I recorded are weird.
[20:42:13] <ssbr_> (e.g. lots of instances of '[object (\w+)' for some reason)
[20:43:07] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[20:43:08] <ssbr_> anyway, if this will result in absurd compile times, definitely it's better to not embed the tests in rust. So I won't do that. Thanks for the advice!
[20:43:21] <ssbr_> (besides, generating rust code is a PITA. What do you mean \f isn't an escape? >:(   )
[20:43:21] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Ping timeout)
[20:43:23] *** Quits: octurion (octurion@moz-4C1E443F.clients.kiwiirc.com) (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
[20:43:28] <bstrie> bjz: now I'm waiting with dread for someone to post that old mailing list thread to HN and for everyone to be like "lol this language looks terrible"
[20:43:40] <bjz> haaaa
[20:43:44] <bstrie> "I bet you could never write node.js in this language"
[20:43:49] <ssbr_> bstrie: what thread?
[20:43:55] *** Joins: octurion (octurion@moz-4C1E443F.clients.kiwiirc.com)
[20:43:57] <bstrie> ssbr_: https://mail.mozilla.org/pipermail/rust-dev/2011-December/001070.html
[20:44:06] <bjz> http://www.reddit.com/r/rust/comments/1s3osp/blast_from_the_past_pre01_raytracer_rustdev_rust/
[20:44:31] *** Quits: lenstr (lenstr@592A44AF.9636F313.7A27613B.IP) (Ping timeout)
[20:44:36] *** Joins: alonlevy (alon@moz-DCBA91C6.bb.netvision.net.il)
[20:45:01] <bstrie> Eridius: btw, from talking with lua IRC channels it appears as though most people use luajit rather than lua
[20:45:07] <bstrie> not that I'm an expert
[20:45:10] <tjc> why would somebody want to write node.js in this language? it's already been written
[20:45:15] <tjc> it seems like it would be more fun to do something new :-)
[20:45:36] <Eridius> bstrie: eh, this is just for a toy project of mine
[20:45:51] <ssbr_> bstrie: bjz: That's really cool! Thanks for the history :)
[20:45:57] <bstrie> Eridius: well also fortunately luajit is just a small superset of lua 5.1
[20:46:15] <bstrie> and completely incompatible with 5.2 :P
[20:46:19] <Eridius> hah
[20:46:30] <bstrie> apparently 5.2 is their equivalent of python3
[20:46:46] <Ms2ger> Or autoconf2.13+?
[20:47:10] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[20:47:12] <bjz> nmatsakis: thank you!!! https://github.com/mozilla/rust/issues/1273#issuecomment-3906520
[20:47:27] <bjz> yay for immutability by default
[20:49:03] <kmc> if I have a small program which causes rustc to throw an LLVM assertion, is there anything else I should include in the bug report?
[20:49:07] <bjz> can't believe that wasn't always there :)
[20:49:35] <erickt> kmc: can you get a gdb stack trace?
[20:49:55] <kmc> sure :)
[20:50:06] <nmatsakis> bjz: just reading old issues for fun?
[20:50:10] <bstrie> tjc: are you seriously trying to ascribe feats of logic and novelty to the typical HN commenter? :)
[20:50:20] <tjc> bstrie: you're right, what was I thinking? :-)
[20:50:37] <erickt> kmc: it's also possible we got an issue number for that bug already, can you also do a quick search to see if we already have one already?
[20:50:56] <bstrie> nmatsakis: we were reminiscing over https://mail.mozilla.org/pipermail/rust-dev/2011-December/001070.html
[20:51:08] <kelvin> huzzah! our ray-tracer has output!
[20:51:40] <Ms2ger> bstrie, maybe a novelty logic?
[20:51:42] *** Quits: flowsnake (flowsnake@moz-10902DAB.cable.virginm.net) (No route to host)
[20:51:45] <nmatsakis> bjz: funny I was recently contemplating a proposal to make all locals mutable again, but pcwalton shot me down
[20:51:51] <bstrie> haha
[20:51:55] <bjz> nmatsakis: WHAT
[20:51:55] * Ms2ger shoots nmatsakis down too
[20:51:59] <bjz> nmatsakis: WHUY
[20:52:16] <tjc> nmatsakis: it's not April Fools' Dayâ€¦ :-)
[20:52:20] *** Joins: flowsnake (flowsnake@moz-10902DAB.cable.virginm.net)
[20:52:27] <nmatsakis> because sometimes you need to mark things as mut even though you don't *mutate* them,
[20:52:33] * bjz looked at his calendar to be sure
[20:52:33] <nmatsakis> because you need an &mut pointer,
[20:52:36] <nmatsakis> to guarantee uniqueness.
[20:52:49] <nmatsakis> it's kind of a corner case
[20:52:53] <nmatsakis> it was bugging me
[20:53:01] <nmatsakis> but pcwalton felt it'd be throwing baby out with bathwater :)
[20:53:04] <nmatsakis> and clearly channel agrees
[20:53:08] <kmc> ah, yeah, I think it's https://github.com/mozilla/rust/issues/9382
[20:53:35] <bstrie> nmatsakis: aha. well, I still really like opting-in to mutability. it's very nice
[20:53:47] <bstrie> even if we do abuse it to mean uniqueness :)
[20:54:13] <bjz> nmatsakis: the ergonomic benefits of `let mut` far outweigh the disadvantages. Don't optimise for the corner cases.
[20:54:15] <nmatsakis> bstrie: yeah, it's caught a few bugs for me here and there... particularly when combined with the "unused mut" lint
[20:54:29] <nmatsakis> in the sense that I occasionally find loop couners I meant to incremeent but never did and so on
[20:54:46] * nmatsakis rebase rebase rebase
[20:54:52] <nmatsakis> thank the lord for M-x vc-resolve-conflicts.
[20:55:04] <bjz> :P
[20:55:11] *** Quits: brson (brson@981AA104.E81F12CD.76F66111.IP) (Ping timeout)
[20:55:36] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Client exited)
[20:55:57] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[20:56:22] * bjz makes a a correction: 'Don't optimise for the corner cases _at the expense of the common case_'
[20:56:26] *** Quits: synackse (synackse__@7DAC4ACE.77F880E0.D9401097.IP) (Ping timeout)
[20:56:56] * bstrie imagines bjz saying that in leonard nimoy's voice
[20:57:14] <benh> Isn't rust all about optimizing for the corner case of software that needs to be fast and not crash? ;)
[20:57:33] <tjc> that is such a minor corner case, why worry about *that*? ;-)
[20:57:38] <tjc> I mean, have you seen software?
[20:57:43] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[20:57:46] <bstrie> benh: if you think that the common case is software that crashes and is slow, well, okay, yes, that is the common case. so I guess we're optimists :)
[20:58:32] <nmatsakis> I dig the new closure syntax
[20:58:43] *** Joins: markwash (mwashenber@moz-60E5DD0C.staticcust.wsteleport.net)
[20:58:53] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[20:58:57] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[20:59:04] <bstrie> nmatsakis: for procs, you mean?
[20:59:23] <nmatsakis> no I mean writing `|A| -> R` instead of `&fn(A) -> R`
[20:59:27] <bstrie> ah yes
[20:59:29] <nmatsakis> feels so lightweight
[20:59:32] *** Quits: maxiepoo_ (Max@moz-FFD7044A.nuwlan.northwestern.edu) (Quit: maxiepoo_)
[20:59:34] <bstrie> closure *type* syntax
[20:59:51] <nmatsakis> yes
[20:59:52] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[20:59:53] *** ChanServ sets mode: +ao pcwalton pcwalton
[20:59:53] <bstrie> there was massive closure literal syntax bikeshedding last night, I thought that maybe it infected somebody with commit rights
[20:59:56] <bstrie> :)
[20:59:59] <nmatsakis> I saw that
[21:00:03] <nmatsakis> I've only partially read through it
[21:00:05] <FreeFull> bstrie: || is evil, clearly
[21:00:09] * nmatsakis has a backlog
[21:00:15] <benh> bstrie: mhm, what was suggested?
[21:00:24] *** Joins: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr)
[21:00:25] <FreeFull> I suggested â‚¬â‚¬
[21:00:26] <bstrie> benh: nothing that's any better than ||, trust me :)
[21:00:59] <bstrie> FreeFull: bah, so you'd discriminate against all us folks without european keyboards?!
[21:01:07] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Ping timeout)
[21:01:13] <FreeFull> Â¢Â¢ maybe?
[21:01:16] <bjz> bstrie: I first heard the optimisation thing from Stepanov, when he was talking about how much he gets annoyed by Scott Myers
[21:01:23] <FreeFull> Â¥Â¥?
[21:01:27] <bstrie> let's make sure to use the currency symbol from at least nine different cultures in various places in the syntax
[21:01:40] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[21:01:41] <bstrie> that way, we'll be able to enforce multiculturalism in the community
[21:01:42] <FreeFull> Definitely
[21:01:46] <benh> I still wish something like (args...) { } worked, alas, grammars :(
[21:01:51] <FreeFull> Â£Â£
[21:02:09] <bstrie> "hey, is anyone from europe around right now? I need someone to write me a closure..." "sure, I'll do it if you write out this macro for me"
[21:02:17] *** Joins: mikezaby (mikezaby@moz-4BF6308B.home.otenet.gr)
[21:02:19] *** Parts: mikezaby (mikezaby@moz-4BF6308B.home.otenet.gr) ()
[21:02:22] <bstrie> world peace: achieved
[21:02:33] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[21:02:33] *** ChanServ sets mode: +ao brson brson
[21:02:37] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[21:02:43] <FreeFull> And then you have to go to Japan for whatever Â¥Â¥ got used for
[21:03:02] <bjz> nmatsakis: closure: [|T|] -> U, proc: |T| -> U4
[21:03:03] <bstrie> bjz: I have no idea what optimization thing you mean
[21:03:31] <bstrie> every proc return type must end in "4"
[21:03:31] <bjz> bstrie: corner cases thing - you mentioned leonard nimoy
[21:03:35] <bjz> haha
[21:03:38] *** Quits: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[21:03:46] <bstrie> this is how we disambiguate the grammar
[21:04:01] <Eridius> ugh, the run-pass testsuite continues to use far too much CPU
[21:04:07] <bjz> nmatsakis: was just a silly idea - a closure has an environment
[21:04:18] <Eridius> holy cow I had a 1-minute load average of 215
[21:04:52] <FreeFull> Impressive
[21:05:00] <bstrie> bjz: procs also have an environment!
[21:05:09] <bstrie> they just... bring it with them :)
[21:05:10] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[21:05:10] <bjz> oh yeah... :P
[21:05:19] <Blei> what would make a type non-freeze? would ~Trait do that?
[21:05:44] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[21:05:54] <tiffany> well, the testsuite is a very good example of how to abuse load average counters
[21:05:58] <cmr> Blei: @mut, Cell, maybe a few others.
[21:06:03] <sfackler> maybe? you may have to manually specify ~Trait:Freeze
[21:06:05] <bjz> bstrie: ðŸ‘œ|T| -> U
[21:06:08] <cmr> RWArc etc
[21:06:11] <tiffany> you have 215 processes in the queue waiting to run on the cpu
[21:06:22] <Blei> oh, SharedChan
[21:06:23] <cmr> Ah, yes, sfackler is right about that one.
[21:06:25] <Blei> blerg
[21:06:26] <benh> just saw https://github.com/natefaubion/lambda-chop, re: closure syntax ;)
[21:06:29] <tiffany> the load average would be quite considerably less if it was just 1 process
[21:06:33] *** Quits: octurion (octurion@moz-4C1E443F.clients.kiwiirc.com) (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
[21:06:40] <bjz> bstrie: not sure if you can see the emoji :P
[21:06:40] <sfackler> the default kinds for ~Trait is just Send, right?
[21:07:06] <cmr> benh: hah, I love that interpretation of it: "stab operator"
[21:07:09] <cmr> sfackler: yeah
[21:07:33] <Blei> would stashing it in a proc() work?
[21:08:08] <sfackler> Blei: just change the type declaration in the struct from "~Trait" to "~Trait:Send+Freeze"
[21:08:20] <sfackler> or just ~Trait:Freeze if you don't need the struct to be Send
[21:08:45] <Blei> ok, let's try
[21:09:22] *** Quits: japaric (japaric@6E6418A.935005AB.84437BC5.IP) (Quit: WeeChat 0.4.2)
[21:09:53] <Blei> i suppose the following has the same effect: `trait Foobar: Freeze {...`?
[21:09:59] <Blei> if so, then that's not it
[21:10:11] <Blei> i'm guessing SharedChan is the problem
[21:10:20] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[21:10:36] *** Quits: flowsnake (flowsnake@moz-10902DAB.cable.virginm.net) (Quit: ZNC - http://znc.in)
[21:11:15] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[21:11:57] *** Joins: flowsnake (flowsnake@moz-10902DAB.cable.virginm.net)
[21:12:02] <bblum> sfackler: ~Trait means ~Trait:Send, yes
[21:12:31] <bblum> and yes, if you inherit from freeze in the trait declaration that it will infer it through the trait object
[21:12:41] <acrichto> pcwalton: were you ok with #10795 even without the raii conversion? (the relevant function should have a better name now)
[21:12:44] <bblum> but that also affects all possible instantiations of your trait instead of just the one object
[21:12:50] <pcwalton> acrichto: fine by me, r+
[21:12:55] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[21:12:56] <bblum> Blei: ^
[21:13:02] <acrichto> pcwalton: thanks
[21:14:23] <Blei> bblum: fun, i didn't know that this type syntax was possible
[21:14:29] <Blei> all kinds of weird errors now
[21:14:42] <bblum> yeah i added it this summer
[21:15:01] <Blei> and it compiles!
[21:15:19] *** Quits: ktt3ja (Mibbit@FD3C3646.D41652FF.DDE5D3F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[21:15:26] <Blei> just inheriting from Freeze didn't help
[21:15:28] <Blei> strange
[21:15:33] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[21:15:45] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[21:17:16] *** Quits: flowsnake (flowsnake@moz-10902DAB.cable.virginm.net) (Quit: ZNC - http://znc.in)
[21:17:18] *** sam113101 is now known as sam113101_afk
[21:17:25] <mmalecki> just had a friend ask me what to do with rust/src/etc/vim. maybe it would be better to separate it out of the rust repo and make it mozilla/rust-vim so that it can be easily installed with pathogen?
[21:17:43] <pcwalton> that's fine by me
[21:18:00] <Blei> bblum: why is that? in what way is ~Trait: Freeze + Send stronger than trait Trait: Freeze + Send { ?
[21:18:09] *** sam113101_afk is now known as sam113101
[21:18:23] <mmalecki> pcwalton: should I create an issue on rust repo?
[21:18:26] <sfackler> I usually just symlink the vim plugin folder in the rust source over to my vim plugins folder, but that requires you to have rustc checked out
[21:18:30] <pcwalton> mmalecki: sure
[21:18:31] <bblum> Blei: the latter is 'stronger' than the former, in that with the latter, you won't ever be able to have a non-freeze version of that trait object
[21:18:36] <pcwalton> but maybe a mailing list post is best.
[21:18:39] *** Joins: flowsnake (flowsnake@moz-10902DAB.cable.virginm.net)
[21:18:56] *** Quits: Ms2ger (Ms2ger@B7B2FF50.C60A97A6.F9FB0584.IP) (Quit: nn)
[21:18:57] *** Quits: Sharp (Sharp@1710C26.8381A41.8725677B.IP) (Quit: Sharp)
[21:19:17] <Blei> bblum: how would that be possible with `trait T: Freeze + Send {`?
[21:19:42] <bblum> Blei: what do you mean
[21:19:59] <Eridius> whee, 267 load average
[21:20:24] *** Joins: AvianFlu (AvianFlu@moz-723527FF.nycmny.fios.verizon.net)
[21:20:28] <Blei> bblum: if I have a trait defined as above, how can ~Trait be non-Send or non-Freeze?
[21:20:48] <o11c> mmalecki: yes, please do put the vim script in a separate repo
[21:20:52] <cmr> What in the 17 planes are you doing?
[21:20:52] *** Joins: jstevans (Instantbir@48E9E53D.94A87668.B7830B68.IP)
[21:20:54] <Eridius> Blei: it can't, which is why bblum said the `trait Trait: Freeze + Send` is "stronger"
[21:20:57] <bblum> Blei: not possible, though you could demote it by writing ~Trait:"
[21:21:02] <bblum> * "~Trait"
[21:21:03] <Eridius> cmr: running `make check-stage1-rpass`
[21:21:04] <bblum> er
[21:21:06] <bblum> * "~Trait:"
[21:21:07] <mmalecki> pcwalton: that's rust-dev?
[21:21:10] <Blei> Eridius: well, then rustc has a bug :D
[21:21:27] <Blei> because it worked with ~Trait: Send + Freeze, but not with the 'stronger' version
[21:21:55] <bblum> rustc has a bug or your understanding has a bug :P
[21:22:36] <bblum> it's because, somewhere else in the code, it's trying to put a non-Freeze value in an "as ~Trait" box, assuming that ~Trait means just ~Trait:Send
[21:22:38] *** Joins: SingingBoyo (brandon@DA28FB90.A5D0D593.4F048BDC.IP)
[21:23:04] <chridou> hello again, about an hour ago i posted a compiler bug. i have now downloaded and installen rustc from the master branch and now it just warns me about "enum struct variants" being experimental. So everything seems to be ok. Maybe it was the enum struct that let the 0.8 rustc crash.
[21:23:04] *** Quits: flowsnake (flowsnake@moz-10902DAB.cable.virginm.net) (Quit: ZNC - http://znc.in)
[21:23:10] <Blei> even when Trait inherits form Freeze+Send?
[21:23:33] <mmalecki> pcwalton: and should an issue go with it?
[21:24:27] *** Joins: flowsnake (flowsnake@moz-10902DAB.cable.virginm.net)
[21:24:29] *** Joins: Sharp (Sharp@1710C26.8381A41.8725677B.IP)
[21:24:38] *** Quits: SingingBoyo (brandon@DA28FB90.A5D0D593.4F048BDC.IP) (Ping timeout)
[21:24:38] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Connection reset by peer)
[21:24:41] *** Joins: japaric (japaric@6E6418A.935005AB.84437BC5.IP)
[21:25:15] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[21:25:27] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Quit: Leaving.)
[21:25:30] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[21:25:34] <pcwalton> if you want
[21:26:43] *** Quits: victorporof (victorporo@FB8E2A00.483E5FE1.9B1E38F4.IP) (Quit: victorporof)
[21:27:50] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Quit: Leaving.)
[21:27:51] <bblum> Blei: i don't understand that question
[21:27:52] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[21:27:53] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[21:28:04] <kimundi> I'm getting a linker error with make check on current master: https://gist.github.com/Kimundi/7795920
[21:28:37] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[21:28:48] <kimundi> Anyone know how to fix that? running configure again did not do the trick :P
[21:28:52] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Client exited)
[21:29:01] <Blei> if i have `trait Trait: Freeze + Send {`, is it possible to cast away Freeze/Send, s.t. ~Trait is non-Freeze or non-Send?
[21:29:13] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[21:30:31] *** Quits: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com) (Input/output error)
[21:30:54] *** Quits: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP) (Ping timeout)
[21:31:14] <strcat> Blei: there's no way to avoid meeting all of the requirements specified by trait inheritance
[21:31:26] *** Quits: dbaupp (Thunderbir@moz-EB2EFE6F.lns20.syd6.internode.on.net) (Ping timeout)
[21:32:13] <Blei> ok, then I'm back to claiming that rustc is buggy
[21:32:13] *** Joins: heftig (heftig@moz-C8EBC776.dip0.t-ipconnect.de)
[21:32:18] <bblum> Blei: when constructing such a value, no. once you already have such a value, you can 'demote' it.
[21:32:25] *** Quits: jstevans (Instantbir@48E9E53D.94A87668.B7830B68.IP) (Ping timeout)
[21:32:27] *** Joins: tcr (tcr@7C181A70.200CF5B8.9D2C3D3E.IP)
[21:32:27] <Blei> oh, how?
[21:32:37] <bblum> let x: ~Trait:Freeze+Send = ...;
[21:32:42] <bblum> let y: ~Trait: = x;
[21:32:55] <bblum> it's just normal subtyping
[21:33:22] <Blei> even when `trait Trait: Freeze + Send {`?
[21:33:38] <Blei> that seems weird
[21:33:44] <bblum> then ~Trait: will implicitly mean ~Trait:Freeze+Send anyway
[21:33:53] <Blei> heh, ok
[21:33:54] <bblum> oops no
[21:33:56] <bblum> false
[21:33:57] <olsonjeffery> is there any documentation on having borrowed pointers stored within structs?
[21:34:04] <olsonjeffery> doesn't seem to be anything in the Borrowed Pointer tut
[21:34:05] <bblum> then ~Trait (no colon) means ~Trait:Freeze+Send
[21:34:09] <cmr> olsonjeffery: /maybe/ in the borrowed pointer tutorial, but if not, no.
[21:34:11] <cmr> ok
[21:34:13] <cmr> then no
[21:34:13] <bblum> so
[21:34:15] <cmr> :)
[21:34:17] <bblum> yes, even when as you said
[21:34:20] <bblum> even though that is weird
[21:34:22] <bblum> it is logical
[21:34:25] *** Joins: geomyidae__ (uid214@moz-E77DEB21.irccloud.com)
[21:34:51] <olsonjeffery> i basically want struct Foo { stuff: ~[T], special: &T } where `special` is a reference to an element in `stuff`
[21:35:05] <Blei> depending on the interpretation of trait inheritance, i guess
[21:35:20] <Blei> if you understand it as "changes the default" then, yes, it's logical
[21:35:40] <Blei> *trait inheritance for Kinds
[21:35:43] <geomyidae__> Any chance of any Rust events/talks/etc in Seattle in the near future? Looks like  I missed a few opportunites in the last few months
[21:35:52] *** Quits: jlong (jlong@moz-6DFDE846.socal.res.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[21:35:56] *** Joins: lenstr (lenstr@38CC5AE6.9636F313.7A27613B.IP)
[21:36:01] <olsonjeffery> portland was the closest ive known of
[21:36:08] <olsonjeffery> when a bunch of the core members were up for OSDEV
[21:36:25] <geomyidae__> Yeah, I very nearly took off work. I think there were Go talks too.
[21:36:45] *** Joins: octurion (octurion@moz-4C1E443F.clients.kiwiirc.com)
[21:36:49] <olsonjeffery> there's a lot of go topics in the google user group, i guess
[21:36:54] <sfackler> olsonjeffery: I don't think that can be done unfortunately. there's no way to specify the lifetime of special
[21:37:08] <bblum> actually i don't remember whether it changes the defaults or it changes what gets inferred even if you have an empty bound list
[21:37:11] <bblum> but in any case
[21:37:12] <sfackler> in that case, you can always store an index
[21:37:17] <olsonjeffery> yeah.
[21:37:24] <olsonjeffery> or some other weak reference, i guess
[21:37:40] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[21:37:42] <olsonjeffery> make `stuff` a HashMap<uint, T> or something
[21:37:56] <olsonjeffery> or ~str
[21:38:02] <olsonjeffery> whatever. HashMaps for everyone!
[21:38:13] <sfackler> why would it change to a hashmap?
[21:38:36] <sfackler> it seems like { stuff: ~[T], special: &T } is isomorphic to { stuff: ~[T], special: uint }
[21:38:44] <sfackler> where the uint is the index of the element
[21:39:13] <olsonjeffery> geomyidae__: anyways. im in columbia tower right now, heh. live in the south end.
[21:39:16] <olsonjeffery> nice to know im not alone!
[21:39:32] *** Joins: avsej (avsej@D9A610B8.4841F515.FB33447D.IP)
[21:42:22] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[21:43:34] *** Joins: t25 (manu@moz-5D020DB4.otago.ac.nz)
[21:43:35] *** Quits: Savago (Savago@D8B9C081.E820043D.D4C04133.IP) (Quit: Savago)
[21:44:21] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Ping timeout)
[21:44:43] <mark_edward> hey, if i clone an @T, it still referes to the same underlying T, right?
[21:45:07] <sfackler> yep, deep_clone will clone the underlying T iirc
[21:45:44] <mark_edward> ok, thanks
[21:45:50] *** Joins: pcwalton (pcwalton@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[21:45:51] *** ChanServ sets mode: +ao pcwalton pcwalton
[21:47:09] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[21:47:14] *** Joins: Jesse_ (jruderman@moz-5973C6FA.oc.oc.cox.net)
[21:47:18] *** Quits: Jesse (jruderman@moz-5973C6FA.oc.oc.cox.net) (Connection reset by peer)
[21:49:32] *** Joins: ofeldt (ofeldt@moz-D6AAF9FA.dip0.t-ipconnect.de)
[21:49:57] <bblum> does deep_clone do anything smart with cyclic @Ts
[21:50:03] <mark_edward> rust's module structure is confusing, considering how modules can be single files, items in a file, or directories...
[21:50:28] *** Quits: ofeldt- (ofeldt@moz-52A6D56C.dip0.t-ipconnect.de) (Ping timeout)
[21:50:42] <strcat> bblum: it's not implemented on cyclic @T
[21:50:49] <strcat> it has a Freeze or Send bound, forget which
[21:50:49] <bblum> what does that mean
[21:50:56] <bblum> oh
[21:51:10] *** Quits: acrichto (acrichto@moz-69F2E428.ugrad.cs.cmu.edu) (Connection reset by peer)
[21:51:26] *** Joins: acrichto (acrichto@moz-69F2E428.ugrad.cs.cmu.edu)
[21:51:26] *** ChanServ sets mode: +o acrichto
[21:51:53] *** Joins: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net)
[21:52:28] * sw17ch waves
[21:52:36] <strcat> I guess you need something like an &mut HashSet<Gc<T>> to deal with that
[21:52:45] <strcat> so, more than the DeepClone signature can offer
[21:53:02] *** Joins: Shaladdle (shaladdle@moz-FDE833F3.wv.cc.cmu.edu)
[21:54:59] <bblum> strcat: well that would just be internal right
[21:55:04] <strcat> acrichto: dealt with those 2 issues, I just removed that part of the comment everywhere and made it a sentence in the original explanation
[21:55:17] <strcat> (re: tutorial thing - wrong channel! ;p)
[21:55:24] <bblum> it seems possible
[21:55:40] <strcat> bblum: you need to be able to call DeepClone on T though
[21:55:47] <strcat> and T may contain more @
[21:56:29] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[21:57:58] *** Joins: taotetek (taotetek@E90CF190.930C8FCA.20F09BA6.IP)
[21:58:25] <acrichto> strcat: r+
[21:58:38] <strcat> can always make it better later ;p
[21:58:40] <kelvin> sooo, there's lovecraft in the rust source?
[21:58:53] <strcat> going to need to cannibalize the rest of the tutorial
[21:59:08] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[21:59:30] * strcat thinks that will involve rewriting manual sections and linking to them from this
[22:03:22] *** Quits: lkuper (lkuper@87D98E32.4046EB22.428F94DD.IP) (Quit: lkuper)
[22:04:22] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Client exited)
[22:05:50] <bjz> kelvin: <3 <3 <3 brson 
[22:06:18] <bjz> kelvin: I *think* he is the lovecraft fan x)
[22:07:05] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[22:07:38] <pcwalton> acrichto: r? https://github.com/mozilla/rust/pull/10791
[22:07:40] <pcwalton> last commit
[22:09:10] <pcwalton> is anyone removing conditions from io?
[22:09:57] <cmr> acrichto had a branch
[22:10:12] *** Quits: jdm (jdm@FCCEA34F.7672369.D8E68FF6.IP) (Quit: Lost terminal)
[22:11:04] <mark_edward> dpes @mut T implement clone?
[22:11:05] *** Joins: lkuper (lkuper@87D98E32.4046EB22.428F94DD.IP)
[22:11:10] <cmr> mark_edward: yes.
[22:11:14] *** Quits: Kruppe (user@moz-4BE3939A.net.uwaterloo.ca) (Client exited)
[22:11:28] <mark_edward> what about where T is a trait?
[22:11:37] <cmr> not entirely sure.
[22:11:49] <mark_edward> seems not to, but im not sure
[22:11:56] <strcat> Gc<T> and Rc<T> always implement Clone
[22:12:07] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[22:12:35] <acrichto> pcwalton: talking with brson, I think we'd rather not change deschedule_running_task_and_then
[22:12:39] <strcat> mark_edward: @mut T is never @mut Trait, atm, since Trait isn't a type
[22:12:45] <acrichto> pcwalton: instead, could all of the Cell transfers just use Option/take_unwrap?
[22:12:47] <pcwalton> just use option dances?
[22:12:52] <pcwalton> ok
[22:12:55] <Blei> woot, timerfd integration into glib, using nice, safe rust interfaces! success!
[22:13:01] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[22:13:08] <acrichto> pcwalton: also yeah I had removed conditions from I/O, but we weren't really happy with the result
[22:13:16] <pcwalton> conditions are staying in the language?
[22:13:28] <acrichto> we still want them removed
[22:13:34] <acrichto> just need to figure uot a better solution
[22:13:48] <pcwalton> they're preventing de-Celling
[22:13:50] <pcwalton> well, I'll add a hack
[22:13:54] <acrichto> "just using result" may not be the best thing
[22:13:57] <Luqman> i thought we were going to move to dynamically scoped variables
[22:14:08] <pcwalton> I do want to do that
[22:14:11] *** Joins: maxiepoo_ (Max@moz-6F50ADE.hsd1.il.comcast.net)
[22:14:14] <pcwalton> but I also think we should just have do-notation
[22:14:23] <acrichto> I added a macro for the do-notation
[22:14:25] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Connection reset by peer)
[22:14:28] * strcat doesn't really see the issue with returning an error enum, and Option, or a Result with an error enum
[22:14:31] <acrichto> I didn't find it super-useful, but it was kinda nice in some locations
[22:14:34] <pcwalton> I don't either
[22:14:38] <strcat> + add #[warn_unused_result] to mark these functions for the moment
[22:14:46] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[22:14:48] <acrichto> fail-by-default is a very hard thing to give up
[22:14:58] <pcwalton> that's because of the lack of warn-unused-result
[22:14:59] <strcat> #[warn_unused_result] == fail by default
[22:15:00] <strcat> at compile-time
[22:15:01] <acrichto> plus this has serious repercussions like println -> Result and all fmt calls -> Result
[22:15:10] *** Joins: gandalf (zbraniecki@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[22:15:15] <acrichto> do you really want to check the result of all prints?
[22:15:25] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[22:15:29] *** Quits: chridou (Mibbit@moz-D2C928A3.dip0.t-ipconnect.de) (Quit: http://www.mibbit.com ajax IRC Client)
[22:15:33] <acrichto> do you really want to check the result of all calls to writeln! ?
[22:15:36] <pcwalton> well, println is kind of special in its ubiquity, but I do see your point
[22:15:56] <acrichto> warn_unused_result sounds like a good idea in theory, but it looked like it would just be amazingly annoying in practice
[22:16:02] <acrichto> a huge consumer of writeln! is rustdoc
[22:16:07] <pcwalton> I totally disagree re. warn_unused_result
[22:16:11] <acrichto> and special-handling all errors would be awful
[22:16:15] <pcwalton> unused results are a big problem in rust
[22:16:32] <pcwalton> I think if we don't want warn_unused_result we probably just want exceptions in the language
[22:16:35] <pcwalton> catchable exceptions
[22:16:39] <tjc> maybe I'm weird, but I think unused results should be an error
[22:16:46] <o11c> I actually agree
[22:16:48] <cmr> I... actually agree.
[22:16:50] *** Quits: kelvin (Mibbit@moz-75E71346.bootp.virginia.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[22:16:57] <o11c> just have an ignore() function for when you really don't care
[22:16:59] <strcat> tjc: I think it's too painful as a default
[22:17:04] <pcwalton> I don't see how our error handling story will work without either warn-unused-result or exceptions honestly
[22:17:06] <sfackler> something will need to be done with println! at the very least
[22:17:13] <tjc> strcat: I've found it's not bad in ML
[22:17:14] <strcat> there are linters for C forcing you to use (void) on unused results
[22:17:16] <strcat> it's a PITA
[22:17:16] <pcwalton> println can be just fail-by-default
[22:17:20] <pcwalton> that's C though
[22:17:24] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[22:17:24] <cmr> I *really really really* think we need an abstraction on top of Result/Option, though, that lets you ignore everything in this block, or if anything in this block doesn't Success/Some, fail.
[22:17:27] <pcwalton> C's APIs are built that way
[22:17:28] <cmr> For it to be usable.
[22:17:31] <tjc> if you find yourself frequently ignoring a result on purpose, maybe you need to redesign your API :-)
[22:17:32] <acrichto> that could be controlled via this fluid thing though (whether println/fmt apis fail)
[22:17:36] <pcwalton> cmr: acrichto wrote it
[22:17:40] <cmr> oh cool
[22:17:55] <strcat> tjc: we have a lot of methods like insert on maps returning a useful but often unneeded value
[22:17:57] <pcwalton> there is this issue in rust
[22:18:12] <pcwalton> strcat: I want two methods
[22:18:14] <pcwalton> insert is a bad API IMO
[22:18:16] <pcwalton> for this reason
[22:18:18] <tjc> strcat: I'd argue there should be a method that inserts without returning a value, if that's a thing people want to use
[22:18:28] <pcwalton> match x { A => foo.insert(whatever), B => println("Nope") }
[22:18:31] <pcwalton> that's an error!
[22:18:32] <tjc> and then you say which one you want, which is good because it's explicit
[22:18:35] <strcat> but then we're going to have API size explosions
[22:18:37] <pcwalton> because the type checker tried to unify the two
[22:18:38] <pcwalton> no we won't
[22:18:43] <pcwalton> that's how it's done in ML
[22:18:48] <pcwalton> and ML does not have an API size explosion as a result.
[22:18:58] <strcat> but ML isn't rust - we use a lot of method chaining and other ruby-isms
[22:19:13] <pcwalton> where?
[22:19:27] <strcat> lots of Option methods return a result too
[22:19:30] <pcwalton> anyway I think for FFI reasons we should have ignorable results but that should not be the default
[22:19:44] <cmr> iterators, sometimes chaining options together.
[22:19:51] <pcwalton> but you don't ignore the result
[22:19:54] <cmr> I think that's something like a monadic bind or some silliness?
[22:19:54] <strcat> with iterators you actually always use the return
[22:19:57] <cmr> this is true
[22:19:57] <pcwalton> method chaining is fine
[22:19:59] *** Quits: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net) (Quit: sw17ch)
[22:20:00] <cmr> yeah
[22:20:07] <bstrie> nmatsakis: a borrow checker success story spotted in the wild: https://news.ycombinator.com/item?id=6849550
[22:20:18] <mark_edward> what is the relationship NodeId and Ident have?
[22:20:25] <pcwalton> it's stuff like the task API where we use method chaining, but that also returns unit when you spawn the task
[22:20:29] <pcwalton> so I don't see the problem
[22:20:32] <o11c> so you need for functions to be able to opt-in to being ignorable
[22:20:40] <o11c> and also opt-in to be fail! on ignore
[22:20:47] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[22:20:48] <o11c> (if error, that is)
[22:21:01] *** Quits: abinader (abinader@D8B9C081.E820043D.D4C04133.IP) (Quit: Fui!)
[22:22:11] <pcwalton> anyway, I do feel pretty strongly that we either need two kinds of println, one that propagates errors and one that doesn't, or we have regular old catchable exceptions
[22:22:11] <cmr> moostik: NodeIds are fairly raw things, almost everything has a NodeId, Ident has a macro context and only applies to identifiers, and represents something in the interner.
[22:22:15] <pcwalton> I don't think that anything else will work
[22:22:26] <pcwalton> you'll be dropping Results all the time and causing errors
[22:22:32] <pcwalton> or you won't have the full generality
[22:22:45] *** Joins: jlong (jlong@moz-6DFDE846.socal.res.rr.com)
[22:22:53] <mark_edward> cmr, was that supposed to be addressed to me?
[22:22:56] <cmr> mark_edward: yes
[22:22:59] <cmr> moostik: sorry!
[22:23:08] <brendanc> c
[22:23:08] <cmr> o and a are so close to each other... :P
[22:23:19] *** Joins: nob_jr (charlie@moz-5943D005.nc.res.rr.com)
[22:23:25] <acrichto> pcwalton: in the case of fmt/println, I could imagine that there's a dynamic variable controlling what happens (Ignore, Fail, InvokeBareFn(f))
[22:23:34] <acrichto> and then all fmt functions continue to return unit
[22:23:37] <pcwalton> oh, because it has no result
[22:23:38] <pcwalton> clever
[22:23:40] <pcwalton> I like that
[22:23:53] <acrichto> we'd still have to add hooks though
[22:23:57] <acrichto> you can define your own 'fn fmt'
[22:24:05] <acrichto> if that returns unit, then if you do 'f.buf.write(foo)'
[22:24:10] *** Joins: jstevans (Instantbir@293731FB.A9DA0237.DDE5D3F6.IP)
[22:24:14] <acrichto> you need to tell the fmt module about that error
[22:24:16] <o11c> as I see it: printing to stdout or stderr you usually want to ignore errors
[22:24:17] <mark_edward> cmr, looking at the AST, modules seem to have no Ident, so how does one get a modules names?
[22:24:21] <pcwalton> right
[22:24:25] <o11c> printing to any other stream, you want to handle them always
[22:24:29] <acrichto> I suppose it's not too bad
[22:24:34] <acrichto> 99% of my usage of fmt.buf is through writeln
[22:24:57] <SiegeLord> What's so bad about ignoring errors again? An API should not become unsafe if you don't handle the errors...
[22:25:03] <o11c> println is only for stdout, right?
[22:25:09] <o11c> is there a short form for stderr?
[22:25:42] <cmr> mark_edward: it's a part of `struct item`
[22:25:47] <cmr> mark_edward: the ident lives there.
[22:25:54] <acrichto> o11c: not a short form, no, but you do have stderr().write(...)
[22:26:00] <mark_edward> cmr, ah i see
[22:26:13] <mark_edward> o11c, or writefln!(stderr(), ...)
[22:26:15] <mark_edward> i think
[22:26:17] <dwrensha> what about error!() ?
[22:26:32] <acrichto> dwrensha: that's a logging thing, and it's not always emitted (still have to turn on logging for the module)
[22:26:35] <mark_edward> dwrensha, that's for logging i think
[22:26:41] <acrichto> but yes, logging shows up on stderr by default
[22:28:26] *** Quits: Jackneill (Jackneill@moz-BCB5ED93.pool.digikabel.hu) (Input/output error)
[22:29:05] *** Joins: Skif_ (emschwar@moz-CA025D57.ip.mcleodusa.net)
[22:30:16] *** Quits: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net) (Ping timeout)
[22:30:25] <ChrisMorgan> In src/libstd/ascii.rs, is there a reason for ASCII_UPPER_MAP being &'static [u8] rather than [u8, ..256]? I would have thought the latter would be faster for lookup.
[22:30:52] *** Quits: Skif_ (emschwar@moz-CA025D57.ip.mcleodusa.net) (Connection reset by peer)
[22:31:57] *** Quits: maxiepoo_ (Max@moz-6F50ADE.hsd1.il.comcast.net) (Quit: maxiepoo_)
[22:32:16] *** jorendorff_away is now known as jorendorff
[22:32:58] *** pmoore is now known as pmoore|away
[22:33:50] <Blei> so weird, at a random time, "running join task" gets spammed to the console and my app freezes
[22:33:56] <Blei> it keeps happening
[22:34:09] <Blei> and the music keeps playing until the end of the song :D
[22:34:21] <FreeFull> That is weird
[22:34:26] <Blei> this will be so fun to debug
[22:34:48] <Blei> maybe my nice timerfd interface isn't so nice after all
[22:36:31] <FreeFull> I'd search for that string through the source code of what you're using
[22:36:39] <strcat> Blei: is this for a game event loop?
[22:37:08] *** Quits: mye (mye@moz-690373B4.dip0.t-ipconnect.de) (Quit: mye)
[22:37:11] <strcat> if that's what it is, I *strongly* suspect you don't want stuff like eventfd
[22:37:14] <Blei> FreeFull: I assume it's in rust's scheduler...
[22:37:28] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[22:37:28] <Blei> strcat: for an 8tracks client, actually. much less ambitious :)
[22:37:33] <FreeFull> Don't assume, grep!
[22:37:34] <Blei> why not?
[22:37:38] <FreeFull> Or ack/ag
[22:37:55] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Client exited)
[22:37:59] <Earnestly> Both of which are slower than gnu grep \o/
[22:38:00] <Blei> task/spawn.rs
[22:38:07] <Blei> git grep!
[22:38:11] <Blei> is even faster
[22:38:25] <Earnestly> I have no idea about it really, just that not much beats gnu grep
[22:38:30] *** Joins: jdm (jdm@CAB30FBD.8F96AEA7.2D179A7D.IP)
[22:38:30] *** ChanServ sets mode: +o jdm
[22:38:41] *** Joins: pnkfelix (pnkfelix@1ED7AD9.5831E18D.54C3481B.IP)
[22:38:56] <Earnestly> silver_surfer (ag) is much nicer than ack and is almost as fast as grep
[22:39:26] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[22:39:35] *** Quits: alonlevy (alon@moz-DCBA91C6.bb.netvision.net.il) (Ping timeout)
[22:39:40] <Blei> strcat: why not?
[22:40:03] <pnkfelix> Earnestly: silver_seacher ?
[22:40:11] <cmr> Earnestly: not for plaintext, not even close.
[22:40:16] <Earnestly> pnkfelix: Ah sorry, yes
[22:40:19] <strcat> Blei: well it's not what you're doing after all
[22:40:20] <Earnestly> cmr: What?
[22:40:25] <cmr> https://gist.github.com/cmr/df84305a1a0c4e68885e
[22:40:30] <Blei> true, but still, i'm interested
[22:40:32] <cmr> (first three were to warm it up)
[22:40:39] <Blei> if you're up for explaining it, that is
[22:40:47] <Earnestly> Oh yeah, that's because grep is pretty amazing
[22:40:57] <cmr> ... not sure if you're being sarcastic.
[22:41:11] <Earnestly> Hm
[22:41:26] <Leo`> i've got a strange linkage failure in librustuv when I try to upgrade
[22:41:34] <Leo`> has a similar issue already been reported ?
[22:41:53] <cmr> Even with a regex of f[oab] it's faster, .558s to 4.985s
[22:41:58] <Leo`> (it may as well be the fact that my local clone is really messy, so I'm wondering :p)
[22:42:26] <cmr> Earnestly: ag has soundly beat grep at everything I've thrown at it in the past.
[22:42:38] <cmr> It's sad Geof isn't really maintaining it anymore, my PRs just languished :(
[22:42:44] *** Quits: santiago (santiago@moz-8ADE82B4.socal.res.rr.com) (Quit: Computer has gone to sleep.)
[22:42:51] <pnkfelix> cmr: does `ag` have an --all option?  Are we really comparing apples-to-apples here?
[22:43:10] <Ralith> cmr: he mentioned he was going around doing some merges a few days ago
[22:43:14] *** Quits: alan (alan@32702EE8.939109B2.FB082A98.IP) (Ping timeout)
[22:43:28] <cmr> Ralith: yeah, but that was a single day-long sprint in months.
[22:43:33] *** Quits: Ferreus (ferreus@moz-439D3682.pools.arcor-ip.net) (Quit: WeeChat 0.4.2)
[22:43:33] <pcwalton> acrichto: r? https://github.com/mozilla/rust/pull/10791
[22:43:40] <cmr> pnkfelix: good point, let me fix that.
[22:44:00] <cmr> pnkfelix: same timings
[22:44:13] <cmr> (ag --unrestricted, ignores every source of ignores (.gitignore etc))
[22:44:18] <pnkfelix> cmr: interesting, okay
[22:44:42] *** Joins: alan (alan@moz-FE02DD30.sat6.rackspace.com)
[22:44:58] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[22:45:02] <Earnestly> cmr: Hm, not bad these days
[22:45:04] <cmr> People have this weird notion that GNU grep is some amazing thing. Maybe it used to be, but it isn't anymore. ag uses the some of the same algorithms, and was designed from day 1 to be fast.
[22:45:16] <cmr> (it didn't always achieve the goal, but it got better)
[22:45:24] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[22:45:31] <cmr> (and I mean "People" in general, not just you, I've seen it on HN too)
[22:45:37] <Earnestly> cmr: http://lists.freebsd.org/pipermail/freebsd-current/2010-August/019310.html
[22:45:45] <Earnestly> Probably because of that
[22:45:56] <mimcpher> It's fast compared to things that suck :P
[22:46:40] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[22:46:44] *** Quits: matthewhammer (Mibbit@moz-DB7727E0.wireless.umd.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[22:46:45] <mimcpher> I like `ack` but it's way too slow.  I ought to look at `ag` but that name conflicts with a tool I use internally @ work :-P
[22:46:51] <cmr> heh
[22:46:54] <cmr> alias it to ack :P
[22:46:54] *** Quits: Blei (philipp@moz-B2F9E4BD.cust.bluewin.ch) (Quit: gnight)
[22:46:58] <cmr> it's mostly compatible, optionwise.
[22:47:26] <mimcpher> or just rename my tool ;)
[22:47:27] <Earnestly> It's also mostly compared to the regex where tools like python/perl/awk, etc. are much slower
[22:47:30] *** Quits: ofeldt (ofeldt@moz-D6AAF9FA.dip0.t-ipconnect.de) (Ping timeout)
[22:47:52] <Earnestly> (python 2, perl 5, gawk iirc)
[22:47:58] *** Joins: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com)
[22:48:13] *** Quits: octurion (octurion@moz-4C1E443F.clients.kiwiirc.com) (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
[22:48:29] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[22:49:11] *** Joins: dbaupp (Thunderbir@A192CB9D.D5A1DCF.37681C44.IP)
[22:50:12] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[22:51:07] *** Joins: ofeldt (ofeldt@moz-D6AAF9FA.dip0.t-ipconnect.de)
[22:52:02] <cmr> http://rust-class.org/
[22:52:25] *** Quits: jvshahid (jvshahid@BE83DFD.50866E69.CA2DF2C0.IP) (Ping timeout)
[22:53:02] <ssbr_> I am bothered that there doesn't seem to be a lot of exploration in the space of regex search tools
[22:53:13] <cmr> ssbr_: they're boring!
[22:53:18] <ssbr_> ag is the best attempt at it, and the author hasn't looked at various alternative pattern matching algorithms
[22:53:21] *** Joins: jvshahid (jvshahid@BE83DFD.50866E69.CA2DF2C0.IP)
[22:53:27] <ssbr_> cmr: I disagree strongly!
[22:54:16] <ssbr_> like, ag uses boyer moore for non-regexp strings, but doesn't try to use a similar algorithm for regexps, even though such algorithms exist
[22:54:56] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[22:55:06] <eevee> pcre allegedly does clever things with anchoring static substrings or something
[22:55:09] <ssbr_> there's so much potential for improvements everywhere 
[22:55:11] <docbrown> Why should one use std::ptr::to_unsafe_ptr instead of simply `this as *T`?
[22:55:43] <ssbr_> eevee: I know RE2 has a thing for that that lets you use boyer-moore for string-string matches
[22:55:59] <ssbr_> I would assume it's used by google somewhere or it wouldn't be in RE2
[22:56:09] <cmr> docbrown: good question
[22:56:17] <cmr> docbrown: probably cruft, maybe even from typestate!
[22:56:24] <cmr> It calls it a region pointer, which is certainly obsolete.
[22:57:25] <ssbr_> Is it? I thought everything had multiple names these days, and "borrowed pointer" and "region pointer" and "reference" were all interchangeable
[22:57:37] <ssbr_> and "owned pointer" and "unique pointer" also.
[22:57:48] <docbrown> cmr: I thought maybe the use of generics made it special somehow, but I wasn't sure.
[22:57:56] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[22:58:09] <cmr> docbrown: nope
[22:58:18] *** Quits: jvshahid (jvshahid@BE83DFD.50866E69.CA2DF2C0.IP) (Ping timeout)
[22:58:22] *** Joins: jvshahid (jvshahid@BE83DFD.50866E69.CA2DF2C0.IP)
[22:58:24] <cmr> ssbr_: still trying to settle on a single vocab :)
[22:58:28] <cmr> region pointer is certainly out.
[23:02:01] <jdm> ooh, real time audio in rust
[23:02:07] <jdm> there are cool things in this list
[23:02:09] *** Quits: Shaladdle (shaladdle@moz-FDE833F3.wv.cc.cmu.edu) (Ping timeout)
[23:02:20] <Earnestly> cmr: Hum. http://sprunge.us/CPRA *shrug*
[23:02:27] <jdm> one of these links to an android kernel o.o
[23:03:10] <cmr> Earnestly: oh, was my habitual -i bad?
[23:03:16] <cmr> seems it was!
[23:03:16] <Earnestly> I guess
[23:03:20] *** Quits: jvshahid (jvshahid@BE83DFD.50866E69.CA2DF2C0.IP) (Ping timeout)
[23:03:41] <Earnestly> I'm not aware of another tool which does as much as gnu grep to be quick
[23:03:53] <cmr> yeah, gnu grep is rather complete
[23:04:10] *** Quits: devbug (quassel@2D4E172D.4C8B6099.9B57EA59.IP) (Ping timeout)
[23:04:20] <heftig> ack?
[23:04:27] <Earnestly> Although ag seems to do/use some caching better than grep
[23:04:41] <Earnestly> heftig: We're not really even considering ack
[23:04:51] *** Joins: mib_krsr6p (Mibbit@moz-AFF378E0.rivrw10.nsw.optusnet.com.au)
[23:04:52] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[23:05:01] <mib_krsr6p> hi
[23:05:07] *** Quits: jvns (bork@87D98E32.4046EB22.428F94DD.IP) (Ping timeout)
[23:05:16] <mib_krsr6p> is anyone else having issues building on osx?
[23:05:26] <mib_krsr6p> as in, building rust, from head?
[23:05:33] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[23:05:33] <Earnestly> cmr: I'm curious what -i is doing to cause such a difference though
[23:05:43] <cmr> Earnestly: yeah, seems really weird.
[23:05:58] <Earnestly> heh http://stackoverflow.com/questions/13819635/why-is-grep-ignore-case-50x-times-slower
[23:07:25] <mib_krsr6p> I'm getting "Undefined symbols for architecture x86_64:" and a giant stack trace
[23:07:32] *** Quits: nob_jr (charlie@moz-5943D005.nc.res.rr.com) (Quit: Lost terminal)
[23:07:52] <cmr> mib_krsr6p: try reconfiguring.
[23:08:09] <mib_krsr6p> as in running ./configure again?
[23:08:10] <heftig> Earnestly: the fun of unicode, and utf8
[23:08:12] <mib_krsr6p> I'm doing that
[23:08:37] <mib_krsr6p> I've been getting this for the past few days
[23:08:47] <mib_krsr6p> I should prob just file a bug...
[23:08:56] <cmr> yeah
[23:09:02] <Earnestly> heftig: But the bug report mentions using fgrep -i, but that is also slow
[23:09:08] *** Joins: jvns (bork@87D98E32.4046EB22.428F94DD.IP)
[23:09:09] <cmr> acrichto: is there stuff in the queue fixing OS X?
[23:09:26] <acrichto> fixing how so?
[23:09:39] <cmr> dunno, mib_krsr6p reports build brokenness.
[23:10:01] <heftig> Earnestly: that doesn't really improve things
[23:10:26] <acrichto> mib_krsr6p: where is make dying?
[23:10:27] <mib_krsr6p> I can put the output in a pastebin
[23:10:32] <acrichto> sure!
[23:10:50] <Earnestly> heftig: Indeed
[23:11:00] <mib_krsr6p> what commands do you want, uname, git show, ./configure && make ?
[23:11:35] <acrichto> mib_krsr6p: how about all
[23:12:12] <mib_krsr6p> do you mean "make all" ?
[23:12:23] <acrichto> oh no, just all that output
[23:12:33] *** Joins: mye (mye@moz-690373B4.dip0.t-ipconnect.de)
[23:12:59] <Earnestly> cmr: Well thanks actually.  I wasn't even aware of -i being slow (as I don't use it) until you mentioned it heh
[23:13:01] <dwrensha> "make check" is broken for me on OSX
[23:13:06] <mib_krsr6p> k, running it now
[23:13:35] <mib_krsr6p> FWIW it fails somewhere around compile_and_link of libsyntax
[23:13:48] <cmr> Earnestly: I always use -i, I didn't know it was fast without it!
[23:15:53] <Earnestly> heh, well learned something new anyway
[23:16:15] <mark_edward> I'd like to get each modules file location using a visitor: what am I doing wrong here? https://gist.github.com/MarkJr94/7797355#file-visittest-rs-L1
[23:16:36] *** Joins: jviereck (Adium@moz-E9ABC34A.dip0.t-ipconnect.de)
[23:17:02] *** Quits: AvianFlu (AvianFlu@moz-723527FF.nycmny.fios.verizon.net) (Ping timeout)
[23:17:11] <cmr> mark_edward: there's a span_to_str on the codemap, but what is that giving you? It looks about right.
[23:17:25] *** Quits: ianj (ianjneu@moz-7140CF01.ccs.neu.edu) (Quit: leaving)
[23:18:15] *** Quits: lkuper (lkuper@87D98E32.4046EB22.428F94DD.IP) (Quit: lkuper)
[23:18:37] *** Joins: peterdn (chatzilla@moz-5EB9CC81.as13285.net)
[23:18:52] *** Quits: lenstr (lenstr@38CC5AE6.9636F313.7A27613B.IP) (Ping timeout)
[23:19:00] *** Quits: jviereck (Adium@moz-E9ABC34A.dip0.t-ipconnect.de) (Quit: Leaving.)
[23:19:02] *** Joins: jviereck (Adium@moz-E7B9DAA2.ethz.ch)
[23:19:23] *** Quits: jvns (bork@87D98E32.4046EB22.428F94DD.IP) (Ping timeout)
[23:19:34] *** Quits: jdm (jdm@CAB30FBD.8F96AEA7.2D179A7D.IP) (Ping timeout)
[23:21:34] <mark_edward> cmr, using span_to_str i can see that it just seems to be giving me the location of the `mod <...>` declaration in the crate file, while i want the fiile from which that mod originates
[23:22:03] <cmr> mark_edward: hm
[23:22:04] <wycats_> strcat: I'm trying to compile an .so with only a single exported symbol
[23:22:11] <wycats_> I tried to use --version-script
[23:22:11] <yichoi> brson?
[23:22:14] *** Joins: jdm (jdm@CAB30FBD.8F96AEA7.2D179A7D.IP)
[23:22:14] *** ChanServ sets mode: +o jdm
[23:22:23] <wycats_> { global: Init_skylight; local: * };
[23:22:33] <wycats_> but I still see all the symbols when I do nm -g
[23:22:39] <wycats_> any ideas what I might be doing wrong?
[23:23:01] <brson> yichoi: hi!
[23:23:02] <strcat> wycats_: are they actually external symbols?
[23:23:09] <strcat> ah -g
[23:23:10] <strcat> nvm
[23:23:32] *** Quits: japaric (japaric@6E6418A.935005AB.84437BC5.IP) (Ping timeout)
[23:23:35] <mib_krsr6p> acrichto: I've put a dump of build output here http://pastebin.com/TqDL1U8c
[23:23:44] <mib_krsr6p> shall I file a bug for this?
[23:23:49] <wycats_> strcat: the linker accepts the --version-scrip[t
[23:23:49] <strcat> wycats_: if they're not fully public paths or used in inline functions rust isn't supposed to export them in the first place
[23:23:53] <cmr> mark_edward: you might need to look it up in the def_map
[23:23:59] <acrichto> mib_krsr6p: looks like you need to clean out llvm
[23:23:59] <wycats_> strcat: these are functions that are supposed to be exported
[23:24:02] <cmr> although, I imagine the parser needs to be doing it, so maybe not
[23:24:04] <cmr> mark_edward: not exactly sure.
[23:24:11] *** Quits: jviereck (Adium@moz-E7B9DAA2.ethz.ch) (Connection reset by peer)
[23:24:11] <wycats_> the rust .rlib contains them; they're consumed by my .c file
[23:24:13] <acrichto> mib_krsr6p: 'make clean-llvm'
[23:24:14] <mib_krsr6p> acrichto: how do I do that?
[23:24:18] <wycats_> but when I compile the .c file into an .so
[23:24:25] <wycats_> I only want Init_skylight to be exported
[23:24:34] <wycats_> but I can see all the symbols from the .rlib
[23:24:35] <wycats_> and many more
[23:25:07] *** Quits: jdm (jdm@CAB30FBD.8F96AEA7.2D179A7D.IP) (Connection reset by peer)
[23:25:14] *** Joins: jdm (jdm@CAB30FBD.8F96AEA7.2D179A7D.IP)
[23:25:14] *** ChanServ sets mode: +o jdm
[23:25:24] *** Joins: japaric (japaric@23BF63FB.2A33E3C8.A936879B.IP)
[23:26:07] *** Joins: jviereck (Adium@moz-E9ABC34A.dip0.t-ipconnect.de)
[23:27:49] *** Joins: jvns (bork@87D98E32.4046EB22.428F94DD.IP)
[23:29:22] <cmr> acrichto: gah, I can't build anymore either! https://gist.github.com/cmr/a8ebd5e1b1d2fa4dde9d
[23:29:53] <acrichto> cmr: you've got librustrt.so still installed
[23:29:57] <acrichto> that should have been cleaned out
[23:30:11] *** Joins: Krymise (Nietzsche@moz-CA789EF5.nwrknj.fios.verizon.net)
[23:30:12] <cmr> ah
[23:30:26] * cmr nukes build/
[23:30:51] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[23:31:22] <ChrisMorgan> cmr: `make clean` is probably a safer bet
[23:31:25] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[23:31:49] *** Joins: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP)
[23:32:24] *** Quits: Krymise (Nietzsche@moz-CA789EF5.nwrknj.fios.verizon.net) (Ping timeout)
[23:32:27] <dwrensha> acrichto: what about this error on "make check"? https://gist.github.com/dwrensha/57f2d8bbd6b472a95f89
[23:32:37] <cmr> ChrisMorgan: Why?
[23:32:46] <cmr> I mean, it's too late now, but I'm curious
[23:33:11] <acrichto> dwrensha: hm that's not good, what sha are you at?
[23:33:58] <dwrensha> 9b9cf9892b74dc376fe740ea56858042e9bd89de
[23:34:09] *** mimcpher is now known as mcpherrin
[23:34:09] <ChrisMorgan> cmr: actually, when you say build/, do you mean the target-named directory?
[23:34:16] <dwrensha> It's been like this since the weekend
[23:35:33] <cmr> ChrisMorgan: no. I `mkdir build; cd build; ../configure --enable-clang --enable-ccache --enable-debug; make`
[23:35:57] <ChrisMorgan> Oh, you're one of "those types". :P
[23:36:13] <ChrisMorgan> Yes, I guess that would do it!
[23:37:01] <cmr> I am!
[23:37:06] <cmr> I also install things to ~/.local
[23:37:39] * ChrisMorgan sets PREFIX to ~/opt/rust at present
[23:38:21] <ChrisMorgan> Largely I just recommend clean because it ensures that you've got rid of everything that could potentially cause trouble. Sure, it's a little blunter as an instrument (e.g. it'll remove compiled docs and the snapshot as well), but it should fix all non-llvm problems (for that, of course, you'll want clean-llvm).
[23:39:12] <pcwalton> 14 Cells left....
[23:39:49] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[23:39:50] *** Quits: TisButMe (Mibbit@moz-40463609.w80-9.abo.wanadoo.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[23:39:51] <pcwalton> 4 are trivially removable in compiletest
[23:40:11] <mark_edward> pcwalton, which part of the ast represents a module, and not a `mod blah;` declaration? 
[23:40:33] *** Quits: jviereck (Adium@moz-E9ABC34A.dip0.t-ipconnect.de) (Quit: Leaving.)
[23:41:17] <Luqman> cmr: also, nuking the whole dir might mean nuking various scripts you had lying around there :P 
[23:42:01] *** Joins: maxiepoo_ (Max@moz-6F50ADE.hsd1.il.comcast.net)
[23:42:04] <cmr> Luqman: nah, I'm pretty about leaving them in my zsh history rather than writing them to a file :P
[23:42:08] <pcwalton> mark_edward: I forgetâ€¦ Mod I think?
[23:42:10] <cmr> ctrl-r ftw!
[23:42:12] <pcwalton> but I don't know what it's called now.
[23:42:22] *** Joins: frogmella (Mibbit@730DAE49.BF91A228.DF793B8F.IP)
[23:42:28] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[23:43:37] <cmr> mark_edward: well, it's an item, but there's also mod_
[23:43:39] <cmr> or _mod
[23:43:41] <cmr> or something
[23:43:42] <cmr> ast is confusing
[23:43:43] *** Quits: mib_krsr6p (Mibbit@moz-AFF378E0.rivrw10.nsw.optusnet.com.au) (Quit: http://www.mibbit.com ajax IRC Client)
[23:43:44] <cmr> half renamed :p
[23:43:53] *** Quits: frogmella (Mibbit@730DAE49.BF91A228.DF793B8F.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[23:44:18] *** Quits: zslayton (Mibbit@81EB2473.5F4BC84E.66C78B76.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[23:44:56] <mark_edward> well mod_ doesn't seem to be it, it seems to refer to mod declarations...
[23:47:06] *** Quits: jvns (bork@87D98E32.4046EB22.428F94DD.IP) (Ping timeout)
[23:47:11] <kmc> looks like the linker failure issues on Linux are not totally fixed by #10777 :/
[23:47:31] *** Quits: maxiepoo_ (Max@moz-6F50ADE.hsd1.il.comcast.net) (Quit: maxiepoo_)
[23:47:41] *** Quits: refold (gman@moz-42D68426.a258.priv.bahnhof.se) (Quit: leaving)
[23:48:17] *** Quits: japaric (japaric@23BF63FB.2A33E3C8.A936879B.IP) (Ping timeout)
[23:48:21] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[23:49:09] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Ping timeout)
[23:49:14] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[23:50:02] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Ping timeout)
[23:50:19] *** Joins: japaric (japaric@FFB1354E.A75B951F.A936879B.IP)
[23:50:27] *** Quits: peterdn (chatzilla@moz-5EB9CC81.as13285.net) (Quit: ChatZilla 0.9.90.1-rdmsoft [XULRunner 22.0/20130619132145])
[23:50:32] *** Joins: clark (Mibbit@moz-C3945F64.dsl.bell.ca)
[23:50:57] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[23:52:07] <dbaupp> mark_edward: what's the difference?
[23:52:23] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Client exited)
[23:52:37] <acrichto> kmc: I suppose I should just ask you here, but what's the error message?
[23:53:51] <kmc> oh just the same as before, failure to resolve various symbols from libm or libdl
[23:54:11] *** Quits: Scriptor (anonymous@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[23:54:32] <mark_edward> dbaupp, i dunno, when i get the spans form the _mod, they are all just the spans of the declarations in the crate file
[23:54:44] <kmc> i'll get the error message again
[23:55:47] <kmc> i did:  rm -fr x86_64-unknown-linux-gnu; ./configure; make -j10
[23:56:06] *** Quits: pnkfelix (pnkfelix@1ED7AD9.5831E18D.54C3481B.IP) (Quit: Leaving.)
[23:56:08] <kmc> all on the current master which is ad58e2c
[23:56:16] <acrichto> kmc: I'm interested in the full error message
[23:56:16] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[23:56:25] <acrichto> I want to see what linker command we're actually running
[23:56:27] * ChrisMorgan just got to update http://stackoverflow.com/a/17689618/497043 (minimal TCP server) again. With Cell gone, it finally looks genuinely nice.
[23:56:41] <acrichto> kmc: also if this is on stage0 that's expected b/c we'd need a snapshot
[23:56:45] *** Joins: pnkfelix (pnkfelix@1ED7AD9.5831E18D.54C3481B.IP)
[23:56:49] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[23:59:07] *** Quits: liquidchen (Mibbit@moz-1B446009.hinet-ip.hinet.net) (Quit: http://www.mibbit.com ajax IRC Client)
[23:59:26] *** Joins: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP)
[23:59:36] <kmc> ah, okay, thanks
[23:59:44] <acrichto> sorry about this :(
[23:59:50] <kmc> no problem
