[00:00:00] *** Joins: whidgle (Mibbit@moz-3526975D.range109-153.btcentralplus.com)
[00:00:31] *** Joins: tikue_ (tkuehn@E004E0C5.B9B3942C.689607DE.IP)
[00:01:44] <olsonjeffery> hey could i get another r+ on this? it builds and tests pass now, heh. https://github.com/mozilla/rust/pull/9366
[00:01:58] <strcat> at least LLVM isn't as bad as mplayer, though
[00:02:04] *** Joins: nejucomo (Adium@moz-4781A3E8.hsd1.ca.comcast.net)
[00:02:08] <strcat> mplayer has something like 50-100 optional deps it will auto-detect
[00:02:14] *** Quits: whidgle (Mibbit@moz-3526975D.range109-153.btcentralplus.com) (Quit: http://www.mibbit.com ajax IRC Client)
[00:02:27] <strcat> so if you build it yourself outside of a chroot, it's going to break when you remove some random package
[00:02:30] <olsonjeffery> all i did was cleanup docs.. but shuffling the code caused a lint error because of unused includes (That moved into #[test] fns) 
[00:02:42] <brson> does anybody know where the markdown standardization effort lives? is there any progress?
[00:03:25] <brson> seems like that effort may have died
[00:05:05] <olsonjeffery> ty
[00:05:08] <olsonjeffery> brson: sundown
[00:05:11] <olsonjeffery> well
[00:05:17] <olsonjeffery> it sounds like its happening behind the scenes
[00:05:23] <olsonjeffery> as mentioned in the contributing.txt file
[00:05:28] <hoverbear> https://gist.github.com/Hoverbear/6655412#file-gistfile1-rs-L20 --> task <unnamed> failed at 'Couldn't parse port', sws.rs:22 How can I figure out what's wrong?
[00:05:31] <strcat> brson: sundown is widely used afaik, and they marked it as deprecated + frozen
[00:05:32] <olsonjeffery> maybe ping that repo owner.. he's ont he github people working on it..
[00:06:04] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[00:06:04] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 145d8235a to 145b3dfb0: 02http://git.io/N3iJvQ
[00:06:04] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[00:06:06] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[00:06:06] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/x16MKw
[00:06:06] <ghrust> 13rust/06auto 146ebb364 15Jeff Olson: std: cleanup file::io rustdoc_ng output
[00:06:06] <ghrust> 13rust/06auto 14c6e5b86 15Jeff Olson: std: add file::io::test module and ensure correct build
[00:06:06] <ghrust> 13rust/06auto 14635a381 15bors: auto merge of #9366 : olsonjeffery/rust/file_io_doc_cleanup, r=brson...
[00:06:08] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[00:06:08] *** Quits: heftig (heftig@moz-9876B34B.dip0.t-ipconnect.de) (Ping timeout)
[00:06:32] <olsonjeffery> i am completely stumped on where to begin with an intro-to-rust presentation
[00:06:51] <olsonjeffery> ive determined that the surface area of "minimum competence in rust" is just way too large, especially for a code camp talk format
[00:07:10] <olsonjeffery> so i guess im just going to show lots of code, but thats like the other extreme of the "just show slides". so yeah, figuring out what to do there.
[00:07:22] <olsonjeffery> maybe it'll just be "spend an hour poking around the standard library!"
[00:07:42] <hoverbear> olsonjeffery: Yeah, it's so big. :S
[00:07:43] <brson> olsonjeffery: have you seen dherman's slide deck from oscon? he just did a simple overview
[00:07:50] <olsonjeffery> brson: no i haven't
[00:08:12] <olsonjeffery> link?
[00:08:26] <brson> olsonjeffery: https://speakerdeck.com/dherman/rust
[00:08:29] <olsonjeffery> ty
[00:08:35] <brson> oh, that's strange loop not oscon
[00:08:43] <brson> he's got a newer deck
[00:08:47] * brson looking
[00:09:01] <olsonjeffery> this one? https://speakerdeck.com/dherman/rust
[00:09:03] *** Quits: maik (maik@moz-C09804C4.dip0.t-ipconnect.de) (Ping timeout)
[00:09:05] <olsonjeffery> no..
[00:09:09] <olsonjeffery> there's two rust decks..
[00:09:09] <brson> olsonjeffery: https://speakerdeck.com/dherman/rust-low-level-programming-without-the-segfaults
[00:09:17] <olsonjeffery> ty
[00:10:18] <brson> i'm going to email the sundown guy
[00:10:33] <hoverbear> brson: I like Marked quite a bit.
[00:10:57] <cmr> brson: is there a recording of dherman's talk anywhere?
[00:11:06] <jzelinskie> was about to ask that ^
[00:11:28] <brson> cmr: not that i've heard
[00:11:32] <cmr> mm. shame.
[00:12:35] <brson> guh. even on the snapshot bot I can't reproduce a rustllvm that links to tinfo
[00:12:57] <cmr> brson: I hit that issue today.
[00:13:28] <brson> oh wait i didn't build it right
[00:15:12] *** Joins: jstevans (Instantbir@moz-4571E922.wireless.umnet.umich.edu)
[00:16:28] <tiffany> .. std::select doesn't work on Ports?
[00:18:29] <brson> tiffany: it's a bit of a mess right now. The types in std::comm are atm wrappers around std::rt::comm, for which select does work
[00:18:46] <brson> so if you have to use select you can use the types in rt::comm (which are functionally identical)
[00:18:57] <tiffany> why are they separate?
[00:19:04] <brson> really std::rt::comm should be moved to std::comm, but last time i tried that refactor i hit resolve errors and gave up
[00:19:08] <brson> tiffany: historical reasons
[00:19:16] <brson> it's just an incomplete conversion
[00:19:21] <brson> from the runtime rewrite
[00:20:31] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Quit: Leaving)
[00:20:45] *** Quits: jstevans (Instantbir@moz-4571E922.wireless.umnet.umich.edu) (Ping timeout)
[00:22:56] <tiffany> oh
[00:23:04] <tiffany> select doesn't work on multiple port types
[00:23:18] <tiffany> so many problems
[00:23:51] <strcat> well ideally select will eventually work on timers and signals too
[00:24:03] <brson> ok, i reproduced the tinfo linkage
[00:24:09] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[00:24:10] *** Joins: jstevans (Instantbir@moz-4571E922.wireless.umnet.umich.edu)
[00:25:09] *** Quits: berga (berga@moz-ABA84A4F.a288.priv.bahnhof.se) (Quit: Leaving)
[00:25:11] *** Joins: berga (berga@moz-ABA84A4F.a288.priv.bahnhof.se)
[00:25:52] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Quit: Leaving)
[00:26:59] <brson> strcat: I think that's unlikely because it's very complex to create one abstraction that works on both ports and I/O. I'd be thrilled if we had either working reliably
[00:27:12] <brson> they can always be adapted to each other at the expense of a task
[00:27:35] *** Joins: eatkinson (eatkinson@moz-E57448EF.airbears2.berkeley.edu)
[00:27:44] <tiffany> well I mean
[00:27:47] <strcat> brson: ah so select is just for rust's communication primitives?
[00:27:58] <tiffany> I have a Port<T1> and Port<T2> and I need to watch both of them
[00:28:12] <brson> tiffany: fwiw I never use select (because it's so underbaked) and just use a SharedChan with a message enum with many variants. It's not great for abstraction, but it is reliable
[00:28:12] <tiffany> I should be able to start two more tasks to handle it, I guess
[00:28:15] <brson> servo doesn't use select
[00:28:57] <brson> strcat: yeah
[00:29:10] <tiffany> yeah, I think I'm going to do that, unless someone has a better idea
[00:29:17] <tiffany> two tasks and a SharedPort<Either<T1,T2>>
[00:29:29] <strcat> brson: so I guess what I want is a separate select abstraction for I/O, timers, signals, etc.
[00:29:35] <tikue_> tiffany: why not combine the message types into one
[00:29:46] <strcat> and just *ideally* working on rust's communication primitives too
[00:29:51] <tiffany> because I'm trying to implement generic frp
[00:31:56] <strcat> anyway I don't quite understand how libuv has signal support cross-platform since signalfd is linux-only
[00:32:07] <strcat> I wouldn't be surprised if it was not totally thread-safe elsewhere
[00:32:20] <cmr> tiffany: Either is going away.
[00:32:22] <strcat> as in, multiple libuv event loops + signals -> explosions
[00:32:25] *** Quits: msch (msch@moz-DA0E34D4.clients.your-server.de) (Quit: Coyote finally caught me)
[00:32:28] <tiffany> why's that?
[00:32:29] *** Quits: nkoep (nik@moz-CDB1E2E3.pool.mediaways.net) (Client exited)
[00:32:37] <cmr> because it's entirely undescriptive.
[00:32:42] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[00:32:43] <strcat> is likely going away* ;p
[00:32:44] <tiffany> I kind of guessed that
[00:34:25] *** Joins: msch (msch@moz-DA0E34D4.clients.your-server.de)
[00:34:30] <strcat> I think Either could be useful in the same way tuples are
[00:34:48] <strcat> but the current API is not great
[00:35:04] *** Parts: msch (msch@moz-DA0E34D4.clients.your-server.de) (Textual IRC Client: www.textualapp.com)
[00:35:15] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[00:35:33] <strcat> 20:35:06   chandlerc | strcat: also you probably want to disable libffi and zlib
[00:35:35] <strcat> brson: ^
[00:36:05] <strcat> although the snapshot bot probably doesn't have libffi headers
[00:37:19] *** Joins: anri (solancile@moz-E49E7C4B.hsd1.wa.comcast.net)
[00:38:41] <brson> strcat: opened https://github.com/mozilla/rust/issues/9397
[00:39:31] <strcat> anyway not a big deal since those aren't new
[00:42:00] <nejucomo> kimundi: I created what I believe are all 4 possible filesystem layouts for a crate with a single "a::b::x" item: https://github.com/nejucomo/rust-mod-file-example
[00:42:10] <tiffany> what happens if one SharedChan closes? does the Port close, or does it only close when they all close?
[00:42:28] <tikue_> tiffany: the latter
[00:42:28] <tiffany> I'm trying to figure out why this is closing before it should be
[00:42:42] <kimundi> nejucomo: Ah, your back. I've been extending the tutorial section a bit
[00:42:58] <nejucomo> Nice.
[00:43:24] <tikue_> rusti: let (port, chan) = std::comm::stream(); let chan = std::comm::SharedChan::new(chan); { let new_chan = chan.clone(); } chan.send(1u);
[00:43:29] -rusti- pastebinned 7 lines of output: http://sprunge.us/LfYg
[00:43:44] <nejucomo> I was just about to pull, run tests, and then edit the tutorial, but if you're already doing that, that's great!  I hope my feedback is useful for other readers and not specific to my own biases.
[00:44:03] <nejucomo> Is there typically this much rust activity on saturdays?
[00:45:09] <tiffany> the SharedPort with more than one end point isn't working right
[00:45:09] <kimundi> nejucomo: What do you think of these changes? https://github.com/Kimundi/rust/compare/mozilla:master...work1
[00:47:47] <tiffany> alright
[00:47:52] <tiffany> if I send twice, I get the result
[00:47:53] <tiffany> that's odd
[00:48:44] <tiffany> uh.. SharedPort does get multicasted, not round robin'd or something, right?
[00:49:25] <brson> tiffany: it's more like round robin. the messages are not copied
[00:49:42] <tiffany> how would I do multicast?
[00:49:56] <tiffany> do I need yet another task?
[00:50:02] <brson> probably
[00:51:06] <nejucomo> kimundi: They look pretty good so far.  There's one typo: "an module" here: https://github.com/Kimundi/rust/compare/mozilla:master...work1#L0R2488
[00:51:06] <tiffany> should just sending N times work?
[00:52:59] *** Joins: jesseray (Mibbit@moz-EE907FB2.dhcp.insightbb.com)
[00:53:12] <nejucomo> Ok, they all look good.  One change I'd suggest is to change "the other source file" to "the source file containing the `mod foo;` item" here: https://github.com/Kimundi/rust/compare/mozilla:master...work1#L0R2423
[00:53:19] *** Joins: RMF (RMF@43899495.D5A48DF4.11F731AB.IP)
[00:53:47] <nejucomo> biab.
[00:53:49] *** Quits: nejucomo (Adium@moz-4781A3E8.hsd1.ca.comcast.net) (Quit: Leaving.)
[00:53:50] <brson> tiffany: no, sending n times to a SharedPort is not guaranteed to distribute the messages to n different receivers
[00:55:19] <tiffany> SharedPort really doesn't sound very useful this way
[00:55:30] <kimundi> r? https://github.com/mozilla/rust/pull/9398
[00:55:47] <tiffany> why would I use a port where I'm not guaranteed to receive a message?
[00:55:48] *** Joins: lkuper_ (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[00:58:04] *** Joins: lbergstrom (Adium@D6B9EF06.FF448E4A.B459E86F.IP)
[00:58:15] <brson> i guess it could be useful for cases where you have n identical workers processing the same type of work. some task is guaranteed to receive the message
[00:59:01] *** Joins: dwrensha (chatzilla@moz-7D01AC63.pitbpa.east.verizon.net)
[00:59:35] *** Quits: berga (berga@moz-ABA84A4F.a288.priv.bahnhof.se) (Quit: Leaving)
[01:00:12] *** Joins: jeff_ (jeff@moz-E6A9E8C9.hsd1.or.comcast.net)
[01:00:18] <tiffany> I guess
[01:01:03] <brson> how do I make git stop telling me that rust-logo.ico is modified?
[01:01:44] <cmr> brson: commit it? add it to the .gitignore?
[01:02:49] <brson> r? https://github.com/mozilla/rust/pull/9399
[01:04:33] <brson> cmr: git thinks it's got some problem with carriage returns and `git checkout` won't even overwrite it
[01:04:41] <cmr> Oh
[01:04:47] <cmr> Yeah I've never solved that problem myself.
[01:05:32] <tiffany> hm
[01:05:32] <strcat> brson: it should be okay now that gitattributes is fixed again
[01:05:34] <tiffany> that's interesting
[01:05:39] <brson> strcat: it's ... not
[01:05:50] <strcat> brson: hrm
[01:05:57] <tiffany> the order the signals update isn't consistent because of how SharedPort works, but the result always seems to be computed
[01:06:04] <tiffany> does it make sure to balance fairly?
[01:06:17] <brson> strcat: i'm on master and git says this file is modified, and i can't convince git it's not modified
[01:07:25] <strcat> brson: our gitattributes has this
[01:07:27] <strcat> * text=auto eol=lf
[01:07:32] *** Joins: z0w0 (zack@64F0E14B.3C29B4A9.2CE63F58.IP)
[01:07:35] <strcat> the eol=lf was added to fix windows issues
[01:07:52] <strcat> git is supposed to auto-detect text vs. binary files and apply it only to text
[01:08:12] <strcat> for a while we were missing the =auto so it was doing it to everything
[01:09:15] <strcat> anyway brb later
[01:09:18] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.1)
[01:12:24] *** Quits: jeff_ (jeff@moz-E6A9E8C9.hsd1.or.comcast.net) (Quit: jeff_)
[01:13:58] *** Joins: heftig (heftig@moz-9876B34B.dip0.t-ipconnect.de)
[01:16:58] <dandy> if I make an executable with rust does it require MinGW to execute?
[01:17:48] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[01:26:00] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[01:26:00] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/x16MKw
[01:26:00] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[01:26:19] <tikue_> can anyone think of an example where you'd want a struct to implement two interfaces that both had a method with the same declaration?
[01:27:18] <dandy> maybe a file choose GUI dialog? "open" the dialog or "open" the file
[01:30:39] <eevee> generally anywhere where the method name is unambiguous given the name of the trait and you don't want to repeat it
[01:31:02] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[01:31:02] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/KLp1Ow
[01:31:02] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[01:31:03] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[01:31:03] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/ZCgzlg
[01:31:03] <ghrust> 13rust/06auto 14c767643 15Brian Anderson: std::rt: Try stealing from all schedulers...
[01:31:03] <ghrust> 13rust/06auto 1411f68f5 15bors: auto merge of #9353 : brson/rust/sched, r=alexcrichton,cmr...
[01:31:03] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[01:32:46] <samx> If I have a structured enum, e.g. "enum Foo { FooBar { blah : int } };", can I somehow have a match pattern bind to the structure, e.g. something like "match(foo) { &Foobar m => { m.blah } }" ?
[01:32:52] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[01:32:52] *** Joins: slack1256 (slack@moz-B239C631.baf.movistar.cl)
[01:33:32] <tikue_> so i've been thinking that it'd be nice to match on refutable patterns in function definitions.
[01:33:40] <tikue_> and i was thinking it could look like this:
[01:33:45] <tikue_> fn fac 0 => 1,
[01:33:55] <tikue_>     fac n => fac(n - 1) * n;
[01:34:16] <slack1256> it would have to be like this
[01:34:25] <slack1256> fn fac (0 : int) => 1,
[01:34:41] <slack1256>     fac (n : int) => fac(n - 1) *n;
[01:34:43] <dcrewi> samx: something like match foo { m @ &Foobar{_} => m.blah } maybe?
[01:34:48] <tikue_> yes, like that slack1256 
[01:34:57] <tikue_> but actually it'd have to be
[01:35:00] <slack1256> which isn't as nice since you don't have haskell-styles definitions
[01:35:09] <tikue_> fn fac (0 : int) -> int => 1,
[01:35:13] <slack1256> but the current model is well teste with ocaml and friends
[01:35:27] <tikue_>     fac (n : int) -> int => fac(n - 1) * n;
[01:36:07] *** Quits: heftig (heftig@moz-9876B34B.dip0.t-ipconnect.de) (Ping timeout)
[01:36:14] <tikue_> slack1256: i could also see there being leeway in the rule of having explicit types in functions for this case
[01:36:28] <tikue_> (in the case where it's explicit via pattern matching)
[01:36:37] <slack1256> also, remember that funcions on rust have parens enclosing, so with a function with 2 arguments isn't as nice
[01:36:54] <tikue_> ah, right
[01:37:04] *** Joins: heftig (heftig@moz-9876B34B.dip0.t-ipconnect.de)
[01:37:17] <tikue_> fn fac_tail(s, 0u) => s,
[01:37:33] <tikue_>     fac_tail(s, n) => fac_tail(s * n, n - 1)
[01:37:44] <samx> dcrewi: doesn't seem to do it, it still thinks m to be of the type Foo, so that it could be any of them enum cases
[01:38:21] <slack1256> if you look back, rust originally was written on ocaml (or ml?), a good part of their syntax is derived from them, specially their `match` keyword
[01:38:37] <cmr> the bootstrap compiler was written in ocaml
[01:38:38] <slack1256> fn fac_tail(s : int, 0u) => s,
[01:39:06] <slack1256>     fac_tails(s : int, n : int) => fac_tail(s * n, n-1);
[01:39:12] <kimundi> slack1256: He, except 'match' used to be called 'alt' :P7
[01:39:26] <tikue_> kimundi: what was it, the three-letter rule?
[01:39:27] <tikue_> :P
[01:39:36] <cmr> can't have been, since we had `alt check`
[01:39:42] <kimundi> ret, iface
[01:39:56] *** Quits: schnozzle (Mibbit@moz-5256162B.hsd1.ca.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[01:39:59] <slack1256> many repetitions of the types signatures in this style, that is why i don't like it :S
[01:40:13] <tikue_> slack1256: perhaps only the first line needs it
[01:40:32] <tikue_> fn fac_tail(s: int, 0u) => s,
[01:40:39] <slack1256> consistency is a good propety in syntax, at least for me 
[01:40:43] <tikue_>     fac_tail(s, n) => fac_tail(s * n, n - 1);
[01:40:59] <slack1256> wait, can we do this with macros?
[01:41:09] <tikue_> slack1256: ah, probably heh
[01:41:15] <slack1256> I mean write functions in this format and then translate it?
[01:41:20] <tikue_> slack1256: yeah you could
[01:41:27] <slack1256> Mmm
[01:41:29] <tikue_> could add it to libsyntax!
[01:41:53] <slack1256> I know nothing about macros! though
[01:41:57] <slack1256> I don't even know rust
[01:42:02] * slack1256 thinks why is even here
[01:42:11] <cmr> Hm, that's a bit disappointing.
[01:42:14] <engla> you can learn rust
[01:42:22] <cmr> I was writing code in /tmp and then rebooted.
[01:42:37] <tikue_> slack1256: you can learn rust!
[01:42:42] <myname> slack1256: i am here because of that exact reason
[01:43:00] <slack1256> I mean, when exactly can you say you "know" a language?
[01:43:14] <slack1256> you can know the syntax, but that isn't knowing the language.
[01:43:24] <cmr> I've never met any of the languages I use.
[01:43:28] <tikue_> slack1256: spend a summer writing rust 40 hours a week :P
[01:43:30] <myname> slack1256: i think if you make a greater commit on rustc, you could say this
[01:43:39] <tikue_> cmr: french has two words for know because of this ambiguity
[01:43:46] <kimundi> Hm, do we really need a macro for that?
[01:43:48] <kimundi> fn fac(a: int, b: int) -> int { match(a, b) { (0, 0) => 1, (1, 0) => 2, (n, _) = fac(n-1, 0) } }
[01:43:56] <tikue_> kimundi: yuck
[01:43:59] <cmr> I take it that this use of "know" is more along the lines of "understand"
[01:44:01] <tikue_> kimundi: two indentation levels :\
[01:44:14] <slack1256> tikue_: truly a battle tested languaged, somebody, somewhere had the same problems than me :-)
[01:44:23] <tikue_> kimundi: SML, Ocaml, they all have match-like syntax, and they also allow pattern matching on functions
[01:44:37] <cmr> Pattern matching on functions would be cool
[01:44:38] <myname> fun fact: malagasy has two kinds of "we"
[01:44:40] <tikue_> because it's just nice to have
[01:44:46] <tikue_> cmr: i'm gonna try to write the macro for it
[01:44:49] <cmr> But I wouldn't want it in the language if it can be a syntax extension.
[01:44:51] <kimundi> Maybe new syntax then :P  match fn fac(a: int, b: int) -> int { (0, 0) => 1, (1, 0) => 2, (n, _) = fac(n-1, 0) }
[01:44:51] <slack1256> pattern matching in functions?
[01:44:54] <tikue_> cmr: exactly
[01:45:01] <myname> "we" as in "me and you" and "we" as in "me and a group, but not you"
[01:45:02] <tikue_> kimundi: what about a macro, fn!
[01:45:15] <tikue_> myname: hahaha
[01:45:22] <tikue_> kimundi: match_fn!
[01:45:30] <myname> tikue_: i find that helpful
[01:45:43] * slack1256 likes realfun!
[01:45:43] *** Quits: six600110 (six600110@moz-2FA48202.neo.res.rr.com) (Connection timed out)
[01:45:49] <tikue_> slack1256++
[01:46:12] <jesseray> It would be nice to define function patterns, instead of functions themselves. Haskell lets us do that. I have found it to be very helpful.
[01:46:20] <engla>  myname that's useful!
[01:46:22] *** Joins: six600110 (six600110@moz-2FA48202.neo.res.rr.com)
[01:46:27] <kimundi> match_fn!( fn foo(int, int) -> int, (0,0) => 1, (1,0) => 2, (n, _) => foo(n-1,0) )
[01:46:35] <cmr> I've been using //! instead of /*!, and I have stopped hating it as much.
[01:46:44] <cmr> I still don't like reading it though :\
[01:46:49] <slack1256> this macros seems pretty powerful for DSLs
[01:47:02] <cmr> kimundi: nah
[01:47:04] <jesseray> https://github.com/raysohn/hcssmin/blob/master/hcssmin.hs
[01:47:16] <cmr> match_fn!(foo(int, int) -> int, ... );
[01:47:38] <jesseray> That Haskell code shows the use of function patterns. The code is SOOOO concise compared to my (incomplete) Rust translation.
[01:47:38] <tikue_> kimundi: i would do match_fn!(int, int, fn foo 0 => 1, fn foo n => etc...)
[01:47:48] <tikue_> kimundi: where the first arguments are the types of the args and the type of the return value
[01:47:50] <cmr> This would actually be a legitimate use of the special case in the parser for macro_rules
[01:47:52] <cmr> So you have
[01:47:55] *** Quits: dwrensha (chatzilla@moz-7D01AC63.pitbpa.east.verizon.net) (Ping timeout)
[01:47:55] *** Quits: Earnestly (earnest@moz-BE290A2B.dyn.plus.net) (Ping timeout)
[01:47:55] <cmr> macro_rules! name { .... }
[01:47:58] <cmr> We could have
[01:48:02] <cmr> match_fn! name { ... }
[01:48:05] <cmr> (Or parens)
[01:48:12] <jesseray> The usefulness of such function patterns comes mostly from the ':' list constructor. Without that, I have a hard time imagining any uses for it.
[01:48:24] <jesseray> If Rust had those two things together, I would be a very happy man =)
[01:48:38] <cmr> jesseray: we do have vector matching.
[01:48:40] <tikue_> jesseray: rust has that
[01:48:41] <tiffany> I've got lift and lift2 working now, with my own multicast ports
[01:48:43] <engla> what about all other things you might use with match?
[01:49:28] <kimundi> match_fn! foo ( 
[01:49:29] <kimundi>     (int, int) -> int, 
[01:49:29] <kimundi>         (0, 0) => 1,
[01:49:29] <kimundi>         (n, _) => foo(n-1,0) 
[01:49:29] <kimundi> )
[01:49:36] <tikue_> rusti: /* jesseray */ match [1, 2, 3] { [hd, ..tl] => tl, l => l, }
[01:49:39] -rusti- pastebinned 5 lines of output: http://sprunge.us/bHFI
[01:49:42] <jesseray> I know we have vector matching, but it just does not feel the same.
[01:49:51] <tikue_> jesseray: it is the same, only the syntax is different
[01:49:57] <jesseray> Rust's solution to vector pattern matching compared with https://github.com/raysohn/hcssmin/blob/master/hcssmin.hs... it looks junky.
[01:50:31] <jesseray> Sometimes, I wish there was an impure-Haskell. That would be heaven for me =P
[01:50:47] <tikue_> rusti: /* jesseray */ match [1, 2, 3] { [hd, ..tl] => hd, l => l[0], }
[01:51:07] <jesseray> tikue, you need to add more for the case of empty vectors =P
[01:51:21] <tikue_> jesseray: l would match empty vector
[01:51:36] <tikue_> and it'd fail if it were empty :P
[01:51:37] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[01:51:53] <jesseray> That makes it less than useful for recursive functions =P
[01:52:07] <tikue_> jesseray: you can match []
[01:52:08] <tikue_> for empty vec
[01:52:43] <slack1256> jesseray: just use unsafeIO everywhere and you are done
[01:52:47] <jesseray> http://mibpaste.com/k1WewH 
[01:52:55] <jesseray> I would like to see Rust's ten line version of that =P
[01:52:57] <slack1256> that is what i do
[01:53:08] <slack1256> and my computer doesn't cra
[01:53:11] *** Parts: slack1256 (slack@moz-B239C631.baf.movistar.cl) (Konversation terminated!)
[01:53:24] <cmr> heh
[01:53:25] *** Joins: slack1256 (slack@moz-B239C631.baf.movistar.cl)
[01:53:30] <cmr> slack1256: well played, sir.
[01:53:44] <slack1256> heh
[01:53:50] <myname> jesseray: what the hell
[01:53:59] <jesseray> ?
[01:54:19] <jesseray> Function patterns, like you see in the pastebinned code, are strange when you first encounter them.
[01:54:28] <jesseray> Once you have used them a few times, they become second-nature.
[01:54:40] <cmr> I agree
[01:54:42] <myname> i'm very familiar with function patterns
[01:55:02] <myname> it just took me a good while to actually read what you do there
[01:55:12] <tikue_> jesseray: this looks nice imo: 
[01:55:13] <slack1256> tikue_: are you doing the macro! for the functions right?, if you do upload it somewhere I can check it out 
[01:55:16] <tikue_> fn sum(l: &[int]) -> int {
[01:55:17] <tikue_>     match l {
[01:55:19] <tikue_>         [] => 0,
[01:55:20] <tikue_>         [hd, ..tl] => hd + sum(tl)
[01:55:21] <tikue_>     }
[01:55:22] <tikue_> }
[01:55:23] <tikue_> slack1256: i'm going to try yes
[01:55:27] <myname> s/0(px|em|pr)/0/g
[01:55:27] <tikue_> (not very good with macros :x
[01:55:37] <slack1256> me too, that is why I want to check it out
[01:55:47] <jesseray> Wait, the match arms do not need to match against the same number of elements?
[01:56:01] <myname> jesseray: okey, to be fair, your code also cleans 0emememememem
[01:56:08] <jesseray> lol
[01:56:28] <jesseray> myname: Rust does not have regexes.
[01:56:37] <myname> wooooooot
[01:56:48] <jesseray> ???
[01:56:49] <kimundi> not yet anyway
[01:57:03] <myname> someone has to do this
[01:57:10] <slack1256> rusti: 0 / 0
[01:58:37] <myname> no rusti :(
[01:58:48] <myname> 0.0 / 0.0 is supposed to be NaN
[01:58:49] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[01:58:55] <myname> and it is, last time i checked
[01:59:33] <slack1256> yes, it's NaN
[02:00:17] <slack1256> I wanted to make the typical joke NaNNaNNaNNaNNaNNaNNaNNaN Batman! with rusti
[02:00:57] <kimundi> jesseray: https://gist.github.com/Kimundi/6655992 :P
[02:01:13] <SiegeLord> It's not very funny if it doesn't come from a wtf-inducing code :P
[02:01:48] <slack1256> yeah.
[02:02:10] <engla> isn't it a bit strange to strip px repeatedly like that?
[02:02:21] <engla> as in 10pxpxpxpxpx -> 10
[02:02:37] <myname> it would make 10empty to 10y
[02:03:12] <jesseray> + is a list constructor operator? OMG, that simplifies things for me SO much.
[02:03:32] <myname> wait, you didn't know about +?
[02:03:48] <jesseray> I was fooling with input.iter().zip(input.iter().skip(1)) nonsense last night and I could have just written a recursive match
[02:04:04] <jesseray> No, I didn't know about +.
[02:04:22] <kimundi> jesseray: Well, it takes two &[T] and allocates a ~[T] that's the concatenation of them... 
[02:04:40] <myname> what the hell are you doing with that
[02:05:23] <jesseray> I was trying to loop through a string, getting several characters per loop
[02:05:47] <myname> so you made tuples?
[02:05:49] <kimundi> jesseray: use iterators :P
[02:05:51] <myname> lol :D
[02:06:00] <jesseray> I didn't know that I could skip all that by using match and +.
[02:06:05] <jesseray> (sigh)
[02:06:07] <myname> kimundi: can you do that with this?
[02:06:13] <engla> not sure if + is a good solution
[02:06:26] <jesseray> It's a good solution... because I understand it.
[02:06:50] <SiegeLord> What does 'p':'x' mean?
[02:06:50] <jesseray> Forget all that iter().zip().map().filter().inspect().collect::<blah>() nonsense.
[02:07:01] <jesseray> 'p':'x" == "px"
[02:07:11] <jesseray> As in, 20px wide and 20px tall.
[02:07:26] <myname> it makes "10empty" to 10y
[02:07:35] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[02:07:52] <engla> SiegeLord: 'p':'x':[] would be the list  ['p', 'x'] in haskell. in list constructor syntax
[02:08:04] <SiegeLord> I'm not talking about Haskell
[02:08:20] <jesseray> 'p' : 'x' : [] == ['p','x'] == "px"
[02:09:01] <myname> SiegeLord: but we are
[02:09:06] <myname> haskell is a great language
[02:09:09] <engla> in kimundi's code? probably a typo
[02:09:32] <jesseray> Ah, I didn't notice that bug in Kimundi's code.
[02:09:33] <SiegeLord> I see
[02:09:37] <jesseray> Those colons should be commas.
[02:09:38] <kimundi> let s = "abcdef"; for t in s.iter().zip(s.iter().skip(1)).zip(s.iter().skip(2)).map(|((a, b), c)| (a,b,c)) { match t { ('b', 'c', 'd') => ... }  }
[02:09:48] <kimundi> ah, yeah
[02:10:20] <kimundi> updated the gist :P
[02:10:33] <myname> kimundi: oh dear
[02:10:47] <myname> that's just horrible
[02:10:55] <kimundi> :P
[02:11:12] <nejucomo> Is there a convention in a multi-file crate for the name of the "root" source file?
[02:11:22] <jesseray> myname: it does not make 10empty be 10y. It would match only ":0" and " 0", not "10". In addition, it would not loop over the same character again, so there would not be any double-replacement.
[02:11:35] <kimundi> nejucomo: main.rs or lib.rs, depending on wether it'S a library of executable
[02:11:42] <myname> ah
[02:12:54] <nejucomo> kimundi: Thanks.
[02:12:57] <engla> jesseray: it looks like it will turn " 0pxpxpxpx" into " 0" though
[02:13:50] <myname> jesseray: why shuoldn't it loop over the same character again?
[02:14:21] <jesseray> Because there is no reason to...?
[02:14:32] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[02:14:42] <tikue_> jesseray: just so you know, recursion in rust is hard to tail-call optimize. it's hard to get a guarantee for it
[02:14:48] <myname> " 0empty" gets " 0pty" gets " 0y"
[02:15:05] <jesseray> engla, no. It would turn " 0pxpxpxpx" to " 0pxpxpx".
[02:15:21] <jesseray> It would not loop back over that bit of the string, so no further omissions would be made.
[02:15:36] <myname> why do you think so?
[02:15:38] <jesseray> " 0empty" --> " 0pty", no further omissions.
[02:15:56] <engla> jesseray: it's a recursive call
[02:16:03] <myname> the third line replaces " 0pxpx" with " 0px" and calls itself
[02:16:16] <myname> again replacing " 0px" with " 0"
[02:16:18] <nejucomo> tikue_: Do you mean it's difficult for the compiler to tail-call optimize, or it's easy to write code that appears to be a tail-call which is not?
[02:16:22] <jesseray> it recurses on a subvector that does not include the zero-unit that was modified by the previous call.
[02:16:25] <nejucomo> (-and does the compiler do TCO?)
[02:16:25] <tikue_> nejucomo: the second
[02:16:28] <tikue_> the latter*
[02:16:36] <jesseray> At least, that's how it works in Haskell.
[02:16:42] <tikue_> nejucomo: llvm does the TCO, not rustc
[02:16:43] <engla> jesseray: stripPostfix (' ':'0':xs)   it recurses on the string " 0" + xs
[02:16:43] <cmr> The compiler does sibling call optimization.
[02:16:45] <cmr> Not TCO
[02:16:48] <nejucomo> Ok.  Are there any blogs, cookbooks, or snippets on that topic?
[02:16:55] <tikue_> right, sorry, what cmr said
[02:17:00] <nejucomo> tikue_: Oh, nice.
[02:17:08] *** Quits: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca) (Quit: Leaving.)
[02:17:17] <tikue_> nejucomo: not what i'm aware of, but there was a link to llvm's page about it somewhere
[02:17:20] <cmr> But, it can't really do that if it has destructors to call.
[02:17:20] * nejucomo doesn't know what sibling call optimization is.
[02:17:38] <kimundi> jesseray: but... the way your code is written it includes the zero unit again?
[02:17:39] <cmr> nejucomo: it's similar to TCO, but more general. Rather than calling the same function, it's calling any function with an identical signature.
[02:17:46] <bytbox> Using named lifetimes for the first time, and I can't figure out why the commented version doesn't work. http://ix.io/8ck
[02:17:49] <bytbox> Why must self be mut?
[02:17:52] <myname> jesseray: you may want to change it to ... = ' ':'0':stripPostfix(xs)
[02:18:03] <tiffany> http://paste.strictfp.com/39260 this is an odd ICE
[02:18:04] <myname> that way it wouldn't replace more than once
[02:18:15] <cmr> bytbox: because you're taking a &mut into self.
[02:18:17] <jesseray> Oh wait, you're right.
[02:18:27] <strcat> nejucomo: LLVM has a tailcallelim pass
[02:18:29] <jesseray> myname, that's what I thought it said.
[02:18:31] <cmr> bytbox: you can't take a mutable reference into an immutable reference
[02:18:37] <strcat> the loose definition of what it does by default is sibling call optimization
[02:18:50] <strcat> but there are a long list of exceptions where it can do more complex TCO or where it can't do anything at all
[02:19:04] <strcat> it's not a guarantee rust provides as a language
[02:19:10] <bytbox> cmr: I thought that x being defined &mut meant that an immutable A could have a mutable x. No?
[02:19:12] <strcat> it's an LLVM optimization pass enabled when you have optimizations enabled
[02:19:41] <kimundi> So, is this rust-version of that pattern matching snippet correct? https://gist.github.com/Kimundi/6655992
[02:19:56] <SiegeLord> Does it compile? :P
[02:20:02] <kimundi> no idea:P
[02:20:04] <SiegeLord> (it doesn't btw)
[02:20:39] <tikue_> is there a way to use "=>" on the left side of a macro
[02:20:55] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[02:21:07] <bytbox> cmr: i.e., this compiles: http://ix.io/8co/
[02:21:11] *** Quits: chandler (foo@moz-F990611.mastenbrook.net) (Ping timeout)
[02:21:39] <cmr> bytbox:m
[02:21:41] <cmr> *hm
[02:22:11] <bytbox> cmr: it /doesn't/ compile if I make line 16 read "&A"
[02:22:35] <kimundi> SiegeLord: That one compiles: https://gist.github.com/Kimundi/6655992
[02:23:06] <cmr> bytbox: I'm not really sure, then
[02:23:36] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Client exited)
[02:24:00] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[02:24:15] <bytbox> cmr: this seems to talk about it: https://gist.github.com/indirect/5685835. "Restrictions for loans of mutable borrowed pointers"
[02:24:18] <bytbox> haven't deciphered it yet
[02:24:55] <cmr> Whoa who wrote that
[02:24:59] <cmr> indirect: Hi!
[02:25:40] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[02:27:14] *** Joins: curmet (Mibbit@moz-1C711596.hsd1.va.comcast.net)
[02:30:09] <bytbox> cmr: what, exactly, does it mean for an alias to be taken?
[02:30:30] <bytbox> cmr: a pointer to the same object?
[02:30:38] <bytbox> something within it?
[02:31:13] <cmr> bytbox: I don't know the precise definition.
[02:31:16] <cmr> strcat: do you?
[02:31:39] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[02:32:38] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Client exited)
[02:32:48] <strcat> cmr: in terms of borrow checking, or what?
[02:33:02] <strcat> the precise definition of 'alias' depends on what you're talking about
[02:33:06] <cmr> strcat: borrow checking, yeah.
[02:34:14] <ldunn> hrmph. How should I store a variable that is updated by an interrupt handler? (in this case, a number of ticks)
[02:34:30] <ldunn> At the moment I'm using a `static mut`, but that breaks after... 48 ticks, for some reason
[02:34:36] <strcat> cmr: it's impossible to have another writable handle to a value when you take an &mut borrow
[02:34:46] <strcat> the only readable handle that can exist is @mut
[02:34:52] <strcat> aliasing readable handle
[02:35:55] <strcat> ldunn: rust doesn't have volatile yet, you can't really
[02:36:24] <ldunn> I feared that might be the case - will volatile eventually be implemented, then?
[02:36:25] *** Quits: curmet (Mibbit@moz-1C711596.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[02:36:43] <strcat> ldunn: yes, as an attribute
[02:36:46] <ldunn> I don't need the ticks for anything in particular at the moment, so I can live with it
[02:36:49] <ldunn> alright, thanks
[02:36:59] <hoverbear> Having an issue with https://gist.github.com/Hoverbear/6655412#file-gistfile1-rs-L23 â€¦ sws.rs:23:17: 23:31 error: unresolved name `ip::SocketAddr`.
[02:37:17] <bytbox> last -force
[02:37:24] <bytbox> (disregard)
[02:37:40] *** Joins: chandler (foo@moz-F990611.mastenbrook.net)
[02:38:24] *** Joins: tefter (tefter@B5D119DC.B856A0A1.73804765.IP)
[02:40:28] *** Quits: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net) (Ping timeout)
[02:40:33] *** Quits: kimundi (kimundi@moz-1DFEA97A.dip0.t-ipconnect.de) (Ping timeout)
[02:43:30] *** Joins: zeuxcg (zeuxcg@moz-80D1F912.hsd1.ca.comcast.net)
[02:43:41] *** Joins: kimundi (kimundi@moz-532457B.dip0.t-ipconnect.de)
[02:45:15] <Luqman> cmr: \o/ i've cobbled together a workaround for windows
[02:45:27] <cmr> Luqman: How hacky is it?
[02:46:03] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[02:46:03] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/ZCgzlg
[02:46:03] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[02:46:26] <Luqman> cmr: uses GetProcAddress from libstd to find the crate_map symbol from the executable which is aliased to the actual symbol xD
[02:48:19] *** Joins: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca)
[02:48:24] *** kimundi is now known as zz_kimundi
[02:48:26] *** Joins: maik (maik@moz-C09804C4.dip0.t-ipconnect.de)
[02:48:54] <Luqman> cmr: https://github.com/luqmana/rust/commit/08bd4a2c4ca3568e428930ab0a29435dfcc7ea29
[02:49:13] <bytbox> cmr: enlightenment! And thanks strcat too for the help.
[02:50:04] <cmr> Luqman: yech
[02:50:25] <jesseray> kimundi: assert!(stripPostfix(" 0px") == ~" 0"); --- this throws errors. Strings are not vectors of chars? Weird.
[02:50:48] <cmr> jesseray: no, they're utf-8 encoded byte arrays.
[02:50:55] <Luqman> cmr: the alias thing was really annoying :( i expected it to work without that but was hit with linker errors
[02:50:57] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[02:50:57] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/8gGNbA
[02:50:57] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[02:50:58] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[02:50:58] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/Gw85Eg
[02:50:58] <ghrust> 13rust/06auto 14597e96b 15Brian Anderson: Pass --disable-terminfo to LLVM's configure script. Closes #9334...
[02:50:58] <ghrust> 13rust/06auto 14ee974d2 15bors: auto merge of #9399 : brson/rust/tinfo, r=thestinger...
[02:50:58] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[02:51:11] <Luqman> also, testing changes in a vm takes way too long
[02:51:39] <jesseray> (sigh). Why? If someone is working with UTF-8 strings, wouldn't they want to work with something other than bytes?
[02:52:08] <cmr> jesseray: we have various ways of accessing strings as non-bytes
[02:52:29] <cmr> All rust strings are utf-8
[02:53:14] <strcat> jesseray: if you want a vector of chars you can use ~[char]
[02:53:23] *** Quits: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca) (Ping timeout)
[02:53:32] <strcat> str exists to enforce the guarantee of being UTF-8
[02:53:45] <jesseray> ~[char] does not make that gaurantee?
[02:53:49] *** Joins: dwrensha (chatzilla@moz-7D01AC63.pitbpa.east.verizon.net)
[02:53:57] <cmr> A char is not variable width.
[02:53:58] <strcat> jesseray: it doesn't need to make a guarantee, UTF-8 is a byte encoding
[02:54:02] <cmr> ~[char] doesn't have an encoding.
[02:54:15] <strcat> ~[char] is always a valid vector of Unicode code points
[02:54:45] *** Joins: SteveMcQwark (Mibbit@moz-7CFCF343.cpe.net.cable.rogers.com)
[02:55:09] <strcat> jesseray: rust has a str type because a ~[u8] vector is not necessarily valid UTF-8
[02:55:19] *** zz_kimundi is now known as kimundi
[02:55:26] <strcat> all the string type does is enforce that guarantee on a byte vector
[02:55:29] <jesseray> so to use match on a string, I need to convert it to ~[char] and then back to string?
[02:55:36] <jesseray> That's just weird.
[02:55:37] <tiffany> if you're working with utf-8 there are functions to work on a character level
[02:55:46] <tiffany> you can't assert a character is 1 byte or things explode with unicode
[02:55:51] <strcat> jesseray: no, I didn't say that
[02:56:03] <tiffany> you don't need to convert between
[02:56:05] <nejucomo> What are the tradeoffs between ~str and ~[char]?  The former is smaller for most (?) cases, but how costly is index lookup?  The latter has a large fixed size and constant time lookups, right?  Are there other tradeoffs?
[02:56:11] <jesseray> strcat: https://gist.github.com/Kimundi/6655992
[02:56:20] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[02:56:21] <jesseray> assert!(stripPostfix(" 0px") == ~" 0");
[02:56:23] <jesseray> errors
[02:56:24] <cmr> nejucomo: string indexing is by byte, not character.
[02:56:29] <tiffany> I don't imagine the O(N) lookup matters much if you're iterating through the string anyway
[02:56:41] <strcat> nejucomo: indexing strings isn't very useful
[02:56:47] <tiffany> that too
[02:56:51] <strcat> code points don't correspond to visible glyphs
[02:56:57] <strcat> some are 0-width, some are double-width
[02:57:21] <strcat> you can add any number of combining characters after a graphical character, and they attach to it, for example
[02:57:31] <jesseray> I just want a function that people can write like blah("whatever"), then match against each glyph/codepoint/whatever-the-hell-you-call-these-things.
[02:57:48] <tikue_> ok guys, I couldn't get this macro to compile :) i'm not good enough at macros. but if any of you want to try to get match_fn! working, you could mess with it : https://gist.github.com/tikue/4f468c13f4f43c90ee95
[02:58:01] <jesseray> Kimundi's function doesn't work when passed a string.
[02:58:09] <jesseray> So I need to convert beforehand, right?
[02:58:47] *** Quits: paulproteus (quassel@rose.makesad.us) (Ping timeout)
[02:58:47] <Luqman> cmr: what do you think, too hacky?
[02:58:57] <kimundi> jesseray: Right, what I wrote is an translation of your code but completely unidiomatic and inconvenient to use :P
[02:59:07] <cmr> Luqman: No such thing as too hacky to get this feature in, IMO :P
[02:59:18] *** Joins: paulproteus (quassel@moz-E86A3B42.makesad.us)
[02:59:29] <jesseray> That's two times that you have pointed me toward inconvenient things that don't really help.
[02:59:58] <kimundi> Hm?
[03:00:37] <kimundi> Never claimed it would help you, just just said you'd like to see a rust version of the code, so I wrote one.
[03:00:43] <kimundi> you just*
[03:00:52] *** Quits: bytewise (bytewise@moz-4A801D04.unitymediagroup.de) (Quit: Leaving)
[03:01:57] <strcat> jesseray: haskell's built-in strings correspond to sequences of char in rust, not str
[03:02:08] <strcat> a str is what you get when you encode a sequence of char to bytes
[03:02:41] <strcat> ~str is essentially ~[u8] with the invariant of being valid UTF-8
[03:03:10] <nejucomo> Rust str is a bit like a haskell newtype Str = ByteString; whose interface preserves UTF-8 invariants.
[03:03:15] <kimundi> A haskell style string would be an linked list of chars
[03:03:55] <nejucomo> In fact, haskell has "Text" which is for that very purpose, I believe.
[03:04:03] <engla> that said, an iterator-using way to do this kind of filtering would be nic
[03:04:21] <kimundi> string pattern matching would also be nice
[03:04:37] <strcat> strings aren't really meant to be used that way
[03:04:43] <kimundi> match s { "foo", ..ss => ...}
[03:05:34] <tikue_> kimundi: i agree that it'd be nice but it'd be hard to get a workable syntax
[03:05:38] <tikue_> kimundi: i don't think that is readable ^
[03:05:39] <nejucomo> kimundi: +1
[03:06:01] <tikue_> i'd almost prefer match s { "foo, .." => â€¦ }
[03:06:04] *** Quits: eatkinson (eatkinson@moz-E57448EF.airbears2.berkeley.edu) (Quit: eatkinson)
[03:06:10] <nejucomo> Yikes.
[03:06:12] <strcat> both of which are going to be ambiguous
[03:06:31] <tikue_> strcat: right
[03:06:56] <engla> a rustic regexp module would be enough
[03:07:03] * nejucomo reads std:str api docs to see what suffix matching looks like.
[03:07:09] <tikue_> engla: agree
[03:07:37] <kimundi> strcat: Hm, which ambiguity would that syntax have?
[03:07:44] <kimundi> "foo", .. ss
[03:08:24] * kimundi wishes he knew the location of a up to date grammer for rusts pattern language
[03:08:39] * nejucomo brainstorms a nice regex library api without matching syntax changes: match extra::rgx("foo(.*)", s) { Match([ref m]) => â€¦ }
[03:08:46] * nejucomo looks up vector pattern matching...
[03:08:53] <nejucomo> vector matching is new since 0.4.
[03:09:04] <nejucomo> One of my first attempts at a library was to help with matching vectors.  ;-)
[03:09:32] *** Quits: SteveMcQwark (Mibbit@moz-7CFCF343.cpe.net.cable.rogers.com) (Quit: http://www.mibbit.com ajax IRC Client)
[03:10:15] <nejucomo> So does a vector matching patterns always look like [ /* stuff */ ] -regardless of the pointer type?
[03:10:43] <strcat> afaik it matches on slices only
[03:11:03] <strcat> ~[T] coerces to a slice
[03:11:45] <nejucomo> So maybe this is good enough to not require syntax changes: match extra::rgx::match("foo(\\d+) : \"([a-z]*)\"", mystring) { [ref a, ref b] => â€¦ }      // Thoughts?
[03:11:57] <nejucomo> (Raw strings would be nice though...)
[03:12:50] <SiegeLord> I wonder what milestone is the spec... well defined?
[03:13:20] <kimundi> nejucomo: If you return a ~[&str], then you don't even need the ref'S there
[03:13:42] <jesseray> I don't understand why Rust defaults to str when a user types "whatever", instead of [char], when [char] is what developers of APIs want to match against, not str.
[03:14:01] <kimundi> jesseray: You're understanding is faulty
[03:14:08] <jesseray> Haskell has the user-typed stuff be [char] and the pattern matching happens against [char], so it is consistent and pleasant to use.
[03:14:12] <cmr> I haven't really wanted to match against a string.
[03:14:38] *** Joins: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP)
[03:14:40] <nejucomo> jesseray: Except if you're writing software that deals with many or large amounts of text, in which case you should probably use Text.
[03:14:57] <nejucomo> I mean, it's a trade-off between abstraction, memory, and time.
[03:15:07] <kimundi> jesseray: utf8 is most memory efficient, and no one does pattern matching like in my code because it does incredible many useless allocations
[03:15:12] <strcat> and dealing with code points directly is likely incorrect
[03:15:23] <strcat> they do not correspond to something a user cares about
[03:15:44] <strcat> actual user-visible characters can be composed of N code points
[03:16:06] <kimundi> jesseray: That too, usually you have to decide wheter to handle the text as bytes, as codepoints or as grapheme clusters
[03:16:24] <nejucomo> So what's a good way to write what jesseray wants?  I see Str.ends_with(), so you could do a bunch of alternate testsâ€¦  Is there something "better" (that's not regexes)?
[03:16:27] *** Joins: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net)
[03:16:44] *** Joins: brendan (brendaneic@35E90EE3.B8B12C49.396B22AD.IP)
[03:16:54] <jesseray> I just want to work with them in Rust like I work with them in Haskell. No type conversions, no iter().zip().whatever(), etc. Just strings and pattern matching. I don't understand why this is so difficult!?!?
[03:17:12] *** Quits: jmgrosen (jmgrosen@moz-AB5DF7A0.sb.sd.cox.net) (Ping timeout)
[03:17:12] <cmr> jesseray: Rust isn't Haskell.
[03:17:14] <nejucomo> jesseray: If you want that, then unpack the ~str into a ~[char].
[03:17:17] <jesseray> Rust is to strings what Haskell is to IO.
[03:17:31] <strcat> jesseray: hardly
[03:17:41] <jesseray> unpack?
[03:18:27] <dandy> str uses a variable byte encoding, you have to "unpack" it into a char vector
[03:18:29] <strcat> rust strings are UTF-8 encoded byte arrays
[03:18:38] <jesseray> I know that.
[03:18:39] *** Joins: jmgrosen (jmgrosen@moz-AB5DF7A0.sb.sd.cox.net)
[03:18:40] <strcat> if you want arrays of code points, you can deal with those too
[03:18:40] <strcat> but code points are really not a very relevant unit...
[03:18:40] <strcat> matching against UTF-8 bytes isn't much different than matching against code points
[03:19:19] <nejucomo> I'm not sure about the api yet, but it looks like kimundi's example does the equivalent: https://gist.github.com/Kimundi/6655992
[03:19:54] <jesseray> So, I would need to do " 0empty".iter().to_owned_vec()).move_iter().collect::<~str>() ??? (sigh)
[03:20:32] <nejucomo> strcat: I'm not certain I buy that argument, because the inputs are "probably not weird".
[03:20:37] <kimundi> jesseray: or use/define a pair of .to_chars() .to_str() methods :P
[03:20:48] <strcat> nejucomo: what argument?
[03:20:53] <strcat> chars != glyphs
[03:20:59] *** Joins: SteveMcQwark (Mibbit@moz-7CFCF343.cpe.net.cable.rogers.com)
[03:21:12] <nejucomo> That dealing with utf8-encoded bytes is not "much different" than matching against code points.
[03:21:19] <strcat> nejucomo: what's the difference?
[03:21:28] <strcat> UTF-8 is designed so that byte equality == code point equality
[03:21:39] <strcat> neither of which is really a sensible form of string equality, but they're always equivalent
[03:21:42] <strcat> there's no exception
[03:21:57] <nejucomo> Sure, but if I want to pattern match on the snowman codepoint, it's nice to specify that codepoint, and not its utf8 encoding.
[03:22:01] <kimundi> We also have string normalization now
[03:22:41] <strcat> nejucomo: so it's higher-level, but still not on the level of actual user-visible characters
[03:22:52] *** Quits: maik (maik@moz-C09804C4.dip0.t-ipconnect.de) (Ping timeout)
[03:22:54] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[03:22:58] <nejucomo> Ok, so let's assume we are writing software that process a CSS file, and that we *ignore* normalization and multi-character glyphs.  In fact, we're assuming it's ascii...
[03:23:24] <strcat> so then you're not using str or char
[03:23:27] <nejucomo> -in that case, we want to work with char, not u8, simply so we can say things like == ['0', 'p', 't'] and not the u8 equivalent.
[03:23:31] *** Quits: brendan (brendaneic@35E90EE3.B8B12C49.396B22AD.IP) (Ping timeout)
[03:23:35] <strcat> nejucomo: no, if you're dealing with ascii you're not using char
[03:23:50] <strcat> when you read in input, it's [u8]
[03:24:02] <strcat> you're not going to run a UTF-8 decoder on it if you're assuming it's ascii
[03:24:46] <kimundi> strcat, nejucomo: The real solution here would be generic string and char literals for custom string and codepoint types :P
[03:24:48] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[03:25:04] <nejucomo> Whether or not it's ascii or utf8, I want to write code that deals, logically, with "0pt", not with encoding values.  (-even if that code is ignoring normalization, multi-char glyphs, etc...)
[03:25:32] <strcat> nejucomo: you're saying it's ascii, so neither str or char is useful
[03:25:44] <nejucomo> Heheâ€¦  ok, let's say it's utf8.
[03:25:50] *** Quits: slack1256 (slack@moz-B239C631.baf.movistar.cl) (Quit: Konversation terminated!)
[03:25:53] <jesseray> Not useful, yet Rust defaults to it for things people type inside quotation marks...
[03:26:19] <strcat> jesseray: he's saying he's dealing only with UTF-8
[03:26:28] <nejucomo> I want to search for and process the characters that correspond to "0pt", and I want to ignore normalization and multi-codepoint glyphs...
[03:26:50] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[03:26:50] <ghrust> 01[13rust01] 15luqmana 04force-pushed 06try from 1457297a3 to 14fe302e0: 02http://git.io/k471pw
[03:26:50] <ghrust> 13rust/06try 149621156 15Luqman Aden: librustc/libstd: No longer pass crate_map to start.
[03:26:50] <ghrust> 13rust/06try 14133200a 15Luqman Aden: libstd/librustc: Make the crate_map a weak symbol that libstd links against.
[03:26:50] <ghrust> 13rust/06try 14d3309eb 15Luqman Aden: tests: Remove crate_map from start.
[03:26:52] <kimundi> jesseray: The bigger argument here is that every text should always be stored and processed as utf8, and only encoded/decoded at input/output
[03:26:52] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[03:27:02] <strcat> nejucomo: ok, so you read in [u8]
[03:27:11] <SiegeLord> No more crate_map? That's pretty sweet
[03:27:14] <strcat> either you convert to &str/~str or ~[char]
[03:27:17] <kimundi> strcat: wait, what?
[03:27:25] *** Quits: SteveMcQwark (Mibbit@moz-7CFCF343.cpe.net.cable.rogers.com) (Quit: http://www.mibbit.com ajax IRC Client)
[03:27:30] <nejucomo> strcat: Yes, I'm with you here.
[03:27:36] <kimundi> ah, carry on, misread
[03:27:42] <jesseray> It would need to be ~[char] for pattern matching.
[03:28:01] <nejucomo> Sure, so let's decode it with utf8 into ~[char] so that we can do pattern matching...
[03:28:19] <nejucomo> -then let's write software that ignores normalization and multi-CP glyphs...
[03:28:38] <SiegeLord> Luqman: Does the rt::start still need a crate map?
[03:28:51] <Luqman> SiegeLord: nope
[03:28:55] <SiegeLord> Great
[03:29:02] <Luqman> well, you don't pass it one anymore
[03:29:02] <nejucomo> Now, I may be wrong, and especially wrong moreso over time, but it seems like for now, that will work just fine for processing CSS files...
[03:29:09] <SiegeLord> Right
[03:29:21] <Luqman> SiegeLord: it now does various "magic" to get to the cratemap
[03:29:26] <dandy> Well, what about this at least? https://github.com/mozilla/rust/search?q=to_chars&ref=cmdform
[03:29:30] <strcat> nejucomo: well sure, except CSS has weird non-Unicode case semantics, etc. ;p
[03:29:30] <Luqman> (in my branch that is)
[03:29:51] <nejucomo> strcat: -but will the software ever need to deal with those cases?
[03:30:05] <strcat> nejucomo: well CSS attributes are case-insensitive
[03:30:08] <nejucomo> Ah, I misread youâ€¦  *non-Unicode*...
[03:30:16] <jesseray> I just want to collapse whitespace, replace "0px" with "0", and stuff like that.
[03:30:18] <strcat> but case-insensitive in a special web way
[03:30:27] <jesseray> I'm not building servo's CSS rendering or anything =P
[03:30:32] <nejucomo> strcat: Sure, so we write some ~[char] based pattern matching thingy that converts case...
[03:30:51] <strcat> if you truly want to manipulate code points, you'll want [char], yes
[03:30:55] *** Quits: bogen (dwight@moz-E33E93D8.tx.res.rr.com) (Ping timeout)
[03:31:16] <nejucomo> I guess my argument is that only manipulating code points is "good enough for many cases".
[03:32:00] <nejucomo> Just wait, though, when someone sees this transcript three years from now when there are swaths of horrendous problems across the web due to that assumption...
[03:32:14] <strcat> nejucomo: well the web is behind even that...
[03:32:53] <strcat> if you do assuming there are no 0-width or double-width characters your software won't work for many languages
[03:32:57] <strcat> or unicode in general
[03:33:04] <nejucomo> Ok, so that's my argument, but I certainly would rather write "really good software" instead of "good enough for now with bad legacy implications, and not quite correct".
[03:33:11] <strcat> ofc that doesn't mean using char manipulation is always wrong
[03:33:46] <strcat> nejucomo: it's good enough for you, because you don't use those languages
[03:33:49] <nejucomo> Given that I'm not very aware of grapheme clusters and only vaguely of normalization, if I use std::str, will it somehow take care of either of those for me?
[03:34:00] <nejucomo> strcat: Right.  So I want to learn how to overcome that.
[03:34:09] <kimundi> jesseray: I guess the fastest approach would be to generate a list of &str and ~str, which either skip parts of the string or add new one, and then concatenate them to one new string in the end
[03:34:17] <strcat> nejucomo: text should be treated as a black box, most of the time
[03:34:26] <strcat> splitting, indexing, reversing a string - they are not very sensible things
[03:34:30] <strcat> some languages do not have spaces
[03:34:38] <strcat> some languages read right-to-left
[03:34:41] <bytbox> Here's another &mut puzzle. http://ix.io/8cr/. cannot borrow an `&mut` in a `&` pointer.
[03:34:49] <nejucomo> strcat: heheâ€¦  Ok, but let's say I need to write software that actually *examines* some text in order to behave conditionally on the contents...
[03:34:59] <bytbox> But the `&mut` is only temporary, on the way to the `&`. Any way to get a `&` here?
[03:35:06] <dandy> css does have whitespace regardless of the language
[03:35:08] <strcat> nejucomo: it doesn't sound like text then, it sounds more like a markup format
[03:35:27] <nejucomo> Hm.  I guess I mostly am thinking of software which is consuming some semi-formal or automated language.
[03:36:07] <jesseray> strcat: we are working with CSS, not Japanese.
[03:36:15] *** Quits: ercax (ercan@moz-7CFF3469.dyn.optonline.net) (Quit: WeeChat 0.4.1)
[03:37:01] *** Quits: six600110 (six600110@moz-2FA48202.neo.res.rr.com) (Connection timed out)
[03:37:20] <jesseray> so, read in a file as [u8], convert to ~[char], lowercase everything, then pattern match against the lowercase-only ~[char]?
[03:37:26] *** Joins: six600110 (six600110@moz-2FA48202.neo.res.rr.com)
[03:37:35] <dandy> nejucomo, jesseray: while CSS is mostly ascii I could definitely have some multi byte characters within it even if I am typing my class names in english. What about .fancy-class { content: "rÌ„Í¬Ì‡Í¦Ì“uÍ—Í—Ì…ÌsÌ”ÌˆÌÍ¯Ì„Ì“Í­Í‹tÍ£Í¯Í¦Ì‚ÌƒÌ†Ì“_ÌÍŒÌ‰ÌƒlÌ†aÍÌ¾Ì¿Ì‹ÌˆÌnÌ‰Í¬Í¥ÌÍªÌŠgÍ­Í›Ì¾_ÌcÍªÍ¬Í‘Í‚ÌˆoÍ­Í¨ÌŠÌ‹Ì“Í§mÌŒÌ¿ÌÌ¿Í¤Ì†ÍeÌ”Ì“Ì†Í­Í¨Ì¾Ìšs" }
[03:37:44] <dandy> https://gist.github.com/sw17ch/5768912
[03:37:46] <strcat> jesseray: case folding depends on locale, so you'll get different answers depending on the locale
[03:37:47] <cmr> lowercasing everything isn't valid, since there are string literals and unicode identifiers.
[03:38:02] <cmr> CSS has its own lowercasing algorithm.
[03:38:03] <jesseray> Ah, I forgot about the "content" part of CSS.
[03:38:20] <kimundi> jesseray: Except lowercasing an char is a locale-dependent operation that we currently don't support :P
[03:38:23] <cmr> Which happens to be identical to our to_ascii_lowercase
[03:38:34] <kimundi> whoops, strcat already said that
[03:39:55] <jesseray> would lowercasing only CSS property names ("BORDER" --> "border") and units ("PX" --> "px") present locale problems?
[03:40:14] <jesseray> I don't care about comments, as those would be stripped out anyway.
[03:40:15] <strcat> jesseray: yes
[03:40:28] <kimundi> strcat: how?
[03:40:35] <nejucomo> Ok, so the main realization I've had from this conversation is that when I'm processing unicode, the fact that I'm processing it *usually* means it is some kind of markup, and to be careful about distinguishing the regions which are markup, and the regions which are "human text".
[03:40:37] <strcat> in a turkish locale, "INTEGER".to_lower() is "Ä±nteger"
[03:40:41] <strcat> not "integer"
[03:40:56] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[03:40:56] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14ee974d2 to 1411f68f5: 02http://git.io/N3iJvQ
[03:40:56] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[03:40:58] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[03:40:58] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/_ByYwQ
[03:40:58] <ghrust> 13rust/06auto 14597e96b 15Brian Anderson: Pass --disable-terminfo to LLVM's configure script. Closes #9334...
[03:40:58] <ghrust> 13rust/06auto 14d72e332 15bors: auto merge of #9399 : brson/rust/tinfo, r=thestinger...
[03:40:58] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[03:41:02] <strcat> those are the semantics of 'char' - they are unicode code points, they will do unicode case folding
[03:41:17] <cmr> jesseray: strcat: no
[03:41:25] <cmr> css property names are regular css identifiers, which can be unicode.
[03:41:32] <strcat> cmr: not talking about css
[03:41:35] <strcat> talking about char and unicod
[03:41:46] <jesseray> CSS is the only thing we have been talking about...
[03:41:47] <kimundi> We currently have an extension method for strings that does exactly the case folding demanded by css: All ascii chars get mapped to upper/lower, the other left alone
[03:42:01] *** Quits: lbergstrom (Adium@D6B9EF06.FF448E4A.B459E86F.IP) (Quit: Leaving.)
[03:42:09] <kimundi> "FOÃ–".to_ascii_lower() == "foÃ–"
[03:42:13] <nejucomo> How about a (hopefully) simpler case: a JSON parser.  Does it take as input unicode, and then parse based on codepoints?
[03:43:16] <strcat> nejucomo: there would be no benefit of parsing after decoding to code points
[03:43:35] <strcat> it would just be slower
[03:43:48] <nejucomo> It would?
[03:43:52] <strcat> yes
[03:43:59] <cmr> decoding utf8 isn't free
[03:44:05] <nejucomo> When written in rust?
[03:44:12] <cmr> plus allocation of the new buffer
[03:44:16] <strcat> nejucomo: when written in $LANGUAGE, including rust
[03:44:24] *** Quits: tikue_ (tkuehn@E004E0C5.B9B3942C.689607DE.IP) (Quit: tikue_)
[03:44:32] <strcat> nejucomo: again, equality in UTF-8 byte encoding == equality in code points
[03:44:53] <strcat> JSON doesn't require normalization, unicode case folding, or anything like that to parse
[03:45:01] <strcat> or collation
[03:45:06] <nejucomo> So parsing u8 and then utf8 decoding on each string within a JSON input is more efficient than utf8 decoding the input, then parsing?
[03:45:17] <cmr> nejucomo: you don't need to decode the string
[03:45:19] <strcat> nejucomo: yes, decoding the input doesn't give you anything to make it more efficient
[03:45:58] * nejucomo ponders that.
[03:46:04] <strcat> nejucomo: decoding the input to [char] lets you index by char, which is not a normal thing to do
[03:46:06] *** Joins: SteveMcQwark (stevemcqwa@moz-7CFCF343.cpe.net.cable.rogers.com)
[03:46:13] *** Quits: dwrensha (chatzilla@moz-7D01AC63.pitbpa.east.verizon.net) (Ping timeout)
[03:46:27] <dandy> if you have {"whatver":"fancy unicode stuff that has " in its code points but is not a " glyph"} ?
[03:46:34] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[03:46:38] <jesseray> nejucomo, does this conversation feel like pulling teeth?
[03:46:47] <jesseray> I had to leave for a cigarette earlier. RAGEQUIT.
[03:46:48] <jesseray> lol
[03:47:15] * cmr hates text and strings
[03:47:16] <nejucomo> strcat: I guess I'm not considering what we decode to, so much as "is the parser input codepoints or bytes".
[03:47:22] *** Joins: Ferreus_ (daniel@moz-8EA798B8.dyn.telefonica.de)
[03:47:28] <strcat> nejucomo: input is [u8]
[03:47:30] <strcat> output is [u8]
[03:47:50] *** Quits: Ferreus (daniel@moz-8FF953D.dyn.telefonica.de) (Ping timeout)
[03:48:06] *** Joins: bogen (dwight@moz-E33E93D8.tx.res.rr.com)
[03:48:21] <nejucomo> So does the rustc parser convert source code into unicode prior to parsing, or does it operate on byte values?
[03:48:37] <strcat> nejucomo: bytes can be unicode
[03:48:52] <strcat> it operates on bytes
[03:49:45] <nejucomo> jesseray: This conversation does not seem like pulling teethâ€¦  it seems like my teeth are being pulled.  ;-)
[03:49:48] <dandy> strcat, when parsing json wouldn't you have to begin reading text as utf-8 after reaching an opening " ?
[03:49:49] *** Joins: Yurume_ (yurume@AC58A8CE.8A059B47.E313B915.IP)
[03:49:54] *** Quits: SteveMcQwark (stevemcqwa@moz-7CFCF343.cpe.net.cable.rogers.com) (Quit: Colloquy for iPad - http://colloquy.mobi)
[03:49:57] <jesseray> grammatical correction accepted.
[03:50:00] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[03:50:00] <jesseray> =P
[03:50:09] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[03:50:25] <nejucomo> Soâ€¦ umâ€¦ does the syntax expander operate on ASTs, or does it operate on bytes?
[03:50:30] <jesseray> Perhaps I will give up on writing a CSS minifier and instead do something simpler, like process Rust code... (sigh)
[03:50:31] <jesseray> lol
[03:50:32] <Eridius> nejucomo: token trees
[03:50:40] <strcat> dandy: you have to verify it is UTF-8 (cheaper than decoding) and convert escapes to what they represent
[03:50:46] *** Quits: lkuper_ (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper_)
[03:51:04] <nejucomo> Is the parser in libsyntax or librustc?
[03:51:10] <strcat> libsyntax is the parser
[03:51:10] <cmr> libsyntax
[03:51:19] <dandy> so just "step over and copy it" looking for the next ascii closing " ?
[03:51:19] *** Joins: SteveMcQwark (stevemcqwa@moz-7CFCF343.cpe.net.cable.rogers.com)
[03:51:25] <cmr> I'm pretty sure what you're thinking of is the lexer, though
[03:51:41] <strcat> dandy: a streaming json parser wouldn't copy anything
[03:52:06] <strcat> it would see a string, find the end, and make a &[u8] view into it
[03:52:07] <dandy> jesseray, enjoy :) https://gist.github.com/sw17ch/5768912
[03:52:15] <nejucomo> Right.  So the input to the lexer is ~[u8] and the output is tokens?  Do some of the tokens contain ~str?
[03:52:15] <strcat> a higher-level wrapper could copy out of it, into the preferred format
[03:52:16] <kimundi> jesseray: (just write the css minifier anyway)
[03:53:05] <cmr> nejucomo: it interns identifiers, which maps an id to a @str (not a ~str)
[03:53:09] <dandy> strcat, that find the end part is what I am talking about. is it impossible for an identifier to contain a value for 0x22?
[03:53:31] <dandy> I'm sure there is some crazy set of code points that has 0x22 unless it is somehow illegal?
[03:53:43] *** Quits: jmgrosen (jmgrosen@moz-AB5DF7A0.sb.sd.cox.net) (Ping timeout)
[03:53:56] <cmr> dandy: you can't search for the next " anyway, since you can have escaped quotes.
[03:54:14] <strcat> dandy: I think you're misunderstanding how UTF-8 works
[03:54:16] <dandy> cmr, true but do you see the point I am making?
[03:54:26] <strcat> dandy: you can search for a substring in UTF-8
[03:54:29] <strcat> it is never ambiguous
[03:54:32] <dandy> strcat, I would have to have understanding to misunderstand, so no
[03:54:36] <nejucomo> Well, I'll have to read this in more depth, but I gotta run.  It sure looks like StringReader.src is an @str, but maybe that's not the input, or maybe byte values are examined, or maybe that doesn't contain the result of utf8 decoding...
[03:54:57] *** Joins: jmgrosen (jmgrosen@moz-AB5DF7A0.sb.sd.cox.net)
[03:55:05] <strcat> dandy: if you have a haystack of any valid UTF-8 and a needle of any valid UTF-8, doing a byte comparison to find the position in the haystack is always equivalent to doing it at a code point level
[03:55:08] <kimundi> nejucomo: Also, the compiler is old and crufting, don'T look for good code there :P
[03:55:14] *** Joins: jstoja (julienbord@C5477ED6.490653D0.7B75DA8D.IP)
[03:55:26] <strcat> if you have two byte arrays you know are valid UTF-8, comparing their equality is always equivalent to comparing code point equality
[03:55:30] <strcat> that's how UTF-8 is designed
[03:55:44] <dandy> strcat, I thought we were talking about processing a JSON file that may contain UTF-8 but treating it as [u8]
[03:55:45] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: Leaving.)
[03:55:59] <dandy> I missed the part were we respected UTF-8 in that, sorry
[03:56:14] *** Quits: SteveMcQwark (stevemcqwa@moz-7CFCF343.cpe.net.cable.rogers.com) (Quit: Colloquy for iPad - http://colloquy.mobi)
[03:56:23] <strcat> dandy: [u8] can hold UTF-8, it's a byte encoding
[03:56:38] <dandy> yes but you can't understand it at an arbitraty point
[03:56:52] <dandy> you have to treat it as UTF-8 if it is UTF-8
[03:56:58] <strcat> a parser doesn't randomly index and try to understand, it scans forward
[03:57:04] <dandy> okay
[03:57:07] <dandy> so pretend you are a parser
[03:57:13] <dandy> you have reached an opening "
[03:57:18] <dandy> maybe there is \"
[03:57:23] *** Joins: SteveMcQwark (stevemcqwa@moz-7CFCF343.cpe.net.cable.rogers.com)
[03:57:27] <dandy> eventually you hope to reach a closing "
[03:57:36] <dandy> you are passing over a bunch of u8 values
[03:58:00] <strcat> 0x22 can't occur in the encoding of any code point but '"'
[03:58:04] <dandy> is it not possible for you to reach 0x22 (without a preceding \) that came from some UTF-8 stuff?
[03:58:06] <strcat> if that's what you're asking
[03:58:08] <dandy> yes
[03:58:14] <kimundi> dandy: I think it would work like that: lexer sees a byte value that corresponds to the opening ", lexer skips forward to an closing " byte value, lexer takes the bytes in between and generates an string token that is &[u8], and than can later be seen as utf8 if neccessary
[03:58:32] <strcat> dandy: UTF-8 allows for substring searches with equivalent semantics to at a code point level
[03:58:50] <strcat> by intent, it's unambiguous
[03:59:24] <alisdair> 0x22 is always " in utf8
[03:59:31] <alisdair> (or an encoding error)
[03:59:34] <dandy> because it is < 0x7f?
[03:59:36] <alisdair> yes
[03:59:40] <dandy> got it
[04:00:14] *** Quits: SteveMcQwark (stevemcqwa@moz-7CFCF343.cpe.net.cable.rogers.com) (Quit: Colloquy for iPad - http://colloquy.mobi)
[04:00:18] <strcat> dandy: it works for substrings with multi-byte code points encoded too
[04:00:32] <kimundi> dandy: even if it where more than one byte it would work
[04:00:35] <alisdair> all continuation bytes (bytes not in first position in a utf8 codepoint) are 128 or greater (and less than 256)
[04:02:49] <jesseray> dandy, that code was not funny! lol
[04:03:06] <jesseray> kimundi, that's what I'm going to do.
[04:03:08] <dandy> I think somebody said it compiles :(
[04:03:21] <Luqman> dandy: it did
[04:04:00] <jesseray> I think the minifier will have to be limited to my own locale, but that works for me =P
[04:05:58] <dandy> what kind of locale affected things do you need to do with a css minifier?
[04:06:26] <dandy> if it just casing for some reason maybe just make it something that can be toggled on/off
[04:06:35] *** Quits: canhtak (jeremy@moz-8E705AE1.wl.t.ulaval.ca) (Quit: canhtak)
[04:06:45] <strcat> dandy: it doesn't affect what you need to do
[04:07:18] <kimundi> jesseray: Just do input_string.to_ascii_lower() to map all ascii alphabetic chars to lowercase
[04:07:27] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.1)
[04:07:34] <kimundi> jesseray: And continue from there
[04:07:50] *** Joins: pcwalton (pcwalton@moz-481A040C.hsd1.ca.comcast.net)
[04:07:50] *** ChanServ sets mode: +ao pcwalton pcwalton
[04:08:14] *** Quits: jmgrosen (jmgrosen@moz-AB5DF7A0.sb.sd.cox.net) (Ping timeout)
[04:08:53] *** Joins: jmgrosen (jmgrosen@moz-AB5DF7A0.sb.sd.cox.net)
[04:09:37] *** Quits: pcwalton (pcwalton@moz-481A040C.hsd1.ca.comcast.net) (Ping timeout)
[04:09:55] <jesseray> kimundi: I can't. That could mess with code like div::hover div { content: "Hello"; }, by destroying "Hello".
[04:10:37] <kimundi> jesseray: Ah, right
[04:10:49] <jesseray> I'll just use longer and more complicated match expressions. No biggie.
[04:11:11] *** Joins: fork (Mibbit@8F41EA06.64D958A1.EAEB412A.IP)
[04:13:38] <Luqman> cmr: it passed on windows on try \o/
[04:14:14] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[04:15:31] <kimundi> jesseray: just curios... that css minfier, does it ever insert characters into the minfied css that wheren't there before?
[04:15:35] *** Joins: SteveMcQwark (stevemcqwa@moz-7CFCF343.cpe.net.cable.rogers.com)
[04:16:07] <jesseray> It omits, but never inserts.
[04:16:31] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Client exited)
[04:17:04] <kimundi> Oh nice, then I can use &str slices exclusivly... (Trying to write a more performant version that still allows the kind of pattern matching coding you did there)
[04:17:24] <nrc|afk> are there any docs anywhere for writing compiled syntax extensions?
[04:21:48] <cmr> nrc|afk: such things don't exist yet.
[04:22:27] *** Quits: jstoja (julienbord@C5477ED6.490653D0.7B75DA8D.IP) (Ping timeout)
[04:22:37] *** Quits: SteveMcQwark (stevemcqwa@moz-7CFCF343.cpe.net.cable.rogers.com) (Input/output error)
[04:22:46] *** Joins: SteveMcQwark (stevemcqwa@moz-7CFCF343.cpe.net.cable.rogers.com)
[04:23:11] <bytbox> there's no explicit "copy", right?
[04:23:26] <kimundi> bytbox: .clone()
[04:23:55] <bytbox> kimundi: hmm... thanks
[04:26:15] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[04:26:46] <nrc|afk> cmr: :-(
[04:27:41] *** Quits: fork (Mibbit@8F41EA06.64D958A1.EAEB412A.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[04:29:33] *** Joins: kendle (Mibbit@moz-5256162B.hsd1.ca.comcast.net)
[04:34:02] *** Joins: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net)
[04:37:11] *** Quits: jmgrosen (jmgrosen@moz-AB5DF7A0.sb.sd.cox.net) (Ping timeout)
[04:38:10] <tiffany> how do I make a C string?
[04:38:26] <cmr> .to_c_str() is one way to do it.
[04:41:43] *** Quits: six600110 (six600110@moz-2FA48202.neo.res.rr.com) (Connection timed out)
[04:42:01] *** Joins: six600110 (six600110@moz-2FA48202.neo.res.rr.com)
[04:42:13] <cmr> http://static.rust-lang.org/doc/master/ng/std/index.html
[04:42:23] <kendle> good way to clone a @ from a stack obj or &?
[04:42:25] <cmr> rustdoc_ng is now official.
[04:42:56] <ldunn> neat!
[04:43:07] <dandy> what is the "_ng" part of that name?
[04:43:25] <klutzy> \o/
[04:43:26] <cmr> next generation
[04:44:01] <Eridius> NeoGeo
[04:44:13] <dandy> the search results do not clear when you clear the search text box (chrome on win)
[04:44:14] <Eridius> it's an embedded version of the documentation for a really old device
[04:44:21] <cmr> dandy: known problem
[04:44:34] <cmr> Eridius: jeez, haven'
[04:44:39] <cmr> t heard that name in a while
[04:45:02] <klutzy> cmr: http://static.rust-lang.org/doc/master/ng/index.html redirects to extra. intended or wrong?
[04:45:24] <cmr> klutzy: temporary hack
[04:45:49] *** Quits: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net) (Client exited)
[04:51:32] *** Quits: dandy (Dandy@moz-84CC8377.hsd1.co.comcast.net) (Quit: Leaving)
[04:53:55] *** Joins: maik (maik@moz-C09804C4.dip0.t-ipconnect.de)
[04:57:02] <zeuxcg> oh wow
[04:57:07] <zeuxcg> that's so much better than the old doc
[04:57:38] *** Joins: drrb (drrb@4D561226.896EE5A.377B9828.IP)
[04:57:44] <cmr> There's a bunch of work that still needs doing, but that's all in the fine details.
[04:58:11] <tiffany> is there a way to create a vector from a zero-terminated * pointer?
[04:59:03] <cmr> tiffany: the only thing like that that I know of is std::vec::raw::from_buf
[04:59:05] <zeuxcg> cmr: this is generated from code, right? is there a way to generate this from a local rust version?
[04:59:08] <cmr> from_buf_raw, sorry.
[04:59:18] <Eridius> that requires counting the elements first
[04:59:18] <cmr> zeuxcg: It will generate automatically if you have pandoc installed.
[04:59:36] <zeuxcg> cmr: during 'make' w/out extra targets?
[04:59:49] <cmr> zeuxcg: yes, though the specific target is `make doc` I believe
[04:59:52] <zeuxcg> neat
[05:00:58] *** Quits: drrb (drrb@4D561226.896EE5A.377B9828.IP) (Ping timeout)
[05:03:54] <tiffany> ah, std::ptr::buf_len
[05:04:29] <cmr> tiffany: if you're working with c strings there's std::c_str
[05:04:35] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[05:04:51] <tiffany> I'm working with arrays of C strings
[05:05:48] *** Joins: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP)
[05:05:51] <cmr> ah
[05:06:01] *** Quits: maik (maik@moz-C09804C4.dip0.t-ipconnect.de) (Ping timeout)
[05:06:02] *** Joins: drrb (drrb@4D561226.896EE5A.377B9828.IP)
[05:07:37] <drrb> Does anyone know how i can start the rust runtime if I'm calling Rust code from C?
[05:07:48] <cmr> drrb: std::rt::start
[05:07:52] <cmr> ...or is it init
[05:08:53] <cmr> I think it's init
[05:09:14] <drrb> thanks! I'll check it out.
[05:09:26] <cmr> http://static.rust-lang.org/doc/master/ng/std/rt/fn.init.html
[05:11:17] *** Quits: drrb (drrb@4D561226.896EE5A.377B9828.IP) (Input/output error)
[05:11:57] <kendle> is there a good way to clone a @ from a stack obj or &?
[05:12:27] <cmr> kendle: @x.clone(), I think?
[05:12:32] <kimundi> jesseray: ping
[05:12:48] *** Quits: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net) (Quit: eatkinson)
[05:12:49] <olsonjeffery> cmr: the ng docs are slick. congrats.
[05:12:59] <olsonjeffery> Seldaek as well
[05:13:06] <Luqman> cmr: drrb no, you should use std::rt::start
[05:13:11] <Luqman> oh, they left
[05:13:30] <jesseray> here =)
[05:13:31] <cmr> Luqman: What does init do, exactly?
[05:14:54] <Luqman> setups args, env, and logging
[05:15:09] <Luqman> start calls init and cleansups
[05:15:17] <cmr> ahh
[05:15:38] <jesseray> kimundi: ping
[05:15:58] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[05:15:58] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/_ByYwQ
[05:15:58] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[05:15:59] *** Joins: GeneralMaximus (ankur@B180488D.BD412FCE.BE90E62C.IP)
[05:16:24] <kimundi> jesseray: I know this is probably not really what you want, but using macros you could write something that does string minification with pattern matching in a way that compiles to performant code: https://gist.github.com/Kimundi/6656921
[05:16:34] <Luqman> cmr: oh and the cratemap patch is all green on try :D
[05:16:44] <cmr> Luqman: is there a PR open?
[05:17:33] <Luqman> yea, but i want to wait and see what brson has to say
[05:17:37] <cmr> mmm
[05:18:43] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[05:18:43] <ghrust> 01[13rust01] 15thestinger merged 06auto into 06snap-stage3: 02http://git.io/NpYGjA
[05:18:43] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[05:18:45] <jesseray> I don't have a clue about how that works =P
[05:19:15] <kimundi> jesseray: The macro would work by giving it a number of prefix matches, end conditions and an 'else' case, and would expand to a function that generates a number of slices into the input string, whit an final concatenation at the end
[05:19:18] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:20:00] <strcat> cmr: libtinfo thing almost fixed...
[05:20:15] <strcat> just need to wait for the snapshots to build and land them
[05:20:29] <kimundi> " 0em".. => b(0, 2)    == "if prefix ' 0em' matches, keep substring from byte 0 to byte 2 and continue "
[05:20:30] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Connection reset by peer)
[05:20:37] <strcat> and then my scheduled rust build will finally succeed
[05:20:42] *** Joins: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP)
[05:20:55] <jesseray> I understand that part. Does the implemented iterator tie into the .to_owned_vec()?
[05:20:58] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[05:20:58] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/bJ1aqA
[05:20:58] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[05:20:59] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[05:20:59] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/z-KrHA
[05:20:59] <ghrust> 13rust/06auto 1472633a2 15Scott Lawrence: Remove 'copy' from syntax files, as it's no longer a keyword
[05:20:59] <ghrust> 13rust/06auto 14eabcb39 15bors: auto merge of #9401 : bytbox/rust/master, r=thestinger...
[05:20:59] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[05:22:26] <kimundi> jesseray: the to_owned_vec is just because there isn'T an Iterator adapter yet that would concatenate an stream of string slice into a new string. but there is a method for a vector of such slices, which is why I'm converting it to an vector
[05:23:16] <strcat> I don't think that would be an iterator adaptor
[05:23:25] <jesseray> Let me rephrase my question. I see the impl Iterator block, but I don't see anything outside of that block referring to it, so how does it get used/executed/whatever?
[05:23:40] <strcat> it'd be a std::str function/method
[05:24:00] <kimundi> jesseray: Also, the code is currently in an half-assed condition. The iterator should either be exposed externally, so that code can work work with the stream fo string fragments directly, or it should be implemnted as a simple loop inside strip() without the Iterator impl
[05:24:38] <strcat> jesseray: http://static.rust-lang.org/doc/master/ng/std/iter/trait.Iterator.html it's a trait with a bunch of default methods
[05:24:53] * strcat wasn't here for the actual code, but *thinks* that is what is being talked about :P
[05:25:01] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Ping timeout)
[05:25:10] <kimundi> jesseray: That part works because I'm implementing Iterator for the locallly defined struct Strip, and invoking that implementation through the to_owned_vec() call at the end
[05:25:13] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[05:25:13] <cmr> strcat: you're awful good at picking up on context without actual context :p
[05:25:49] <jesseray> Ah, so it's just what I thought, that .to_owned_vec() was calling it.
[05:25:52] <jesseray> That's pretty neat.
[05:26:46] <strcat> to_owned_vec is just self.collect() and then that uses FromIterator to build it from the iterator
[05:27:14] *** Joins: drake (Mibbit@D2C7AF00.E046E066.520CDC98.IP)
[05:27:26] * strcat would prefer to not have to_owned_vec and allow partial type hints like ::<~[_]> instead
[05:28:08] <cmr> that'd be really neat
[05:28:20] *** Joins: kertap (kertap@moz-E2C367E7.b-ras3.mvw.galway.eircom.net)
[05:28:25] <kimundi> strcat: he, that looks like a fish that someone with a square chin took an bite out
[05:28:54] <drake> Hi, is issue #8815 still open?
[05:29:11] <cmr> https://github.com/mozilla/rust/issues/8815
[05:29:14] <cmr> ... looks open to me
[05:29:35] <jesseray> when someone writes collect::<~str>(), does that mean collect() is generalized for more types than ~str, but that ~str is what we want to work with?
[05:30:03] <strcat> jesseray: yeah, collect returns a generic container so it sometimes needs an explicit type hint
[05:30:16] <strcat> you could also write 'let xs: ~str = xs.collect()' or something to make it infer later
[05:30:30] <strcat> jesseray: it uses the FromIterator trait (vectors, strings, hashmaps, etc. implement it)
[05:30:34] <jesseray> that looks more "my speed" =P
[05:34:08] <kimundi> jesseray: Hm, after I thought about it, implementing it like this with an Iterator that collects to a vecotr of slices and then concatenates them is actually already the fastest possible thing to do
[05:34:49] <kimundi> YOu don't need to use the Iterator itself, but I can't imagine a way to rewrite the algorithm in a way that would not need the vector inbetween
[05:36:12] <strcat> rusti: let mut xs = ~[1, 2, 3]; xs.extend(&mut range(4, 6)); xs
[05:36:16] <drake> cmr: well, i tested the latest build on my win pc and the ip4 tests succeed while the ip6 version either crashes or hangs. I took a look at the error code from uv and it was NETUNREACHABLE, so i tried writing a simple ip6 client/server in python and it too failed with network unreachable
[05:36:18] -rusti- timeout triggered!
[05:36:20] <strcat> rusti: let mut xs = ~[1, 2, 3]; xs.extend(&mut range(4, 6)); xs
[05:36:21] -rusti- ~[1, 2, 3, 4, 5]
[05:39:55] <kimundi> strcat: Would anything speak against implementing std::str::StrVector for Iterator<Str>?
[05:40:23] *** Quits: hoverbear (andrew@moz-86FCBF4B.gv.shawcable.net) (Quit: hoverbear)
[05:40:24] <kimundi> provides connect and concat()
[05:40:50] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[05:40:55] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: nejucomo)
[05:41:39] <strcat> in some cases it would be more efficient to have an intermediate vector
[05:41:54] <strcat> depends on the average size of the strings I guess
[05:42:03] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[05:45:27] <kimundi> yeah
[05:45:55] <kimundi> How about implementing it for both?
[05:48:19] *** Joins: drrb (drrb@4D561226.896EE5A.377B9828.IP)
[05:50:38] <drake> does any one have a mirror of this talk? https://air.mozilla.org/intern-presentations-reed/
[05:52:45] <drrb> cmr: Luqman: Are you guys still here?
[05:55:45] *** Joins: cdidd (cdidd@moz-7DB57209.broadband.corbina.ru)
[05:57:30] <Luqman> drrb: yes?
[05:59:03] <tiffany> rustpkg isn't working 
[05:59:09] <tiffany> it thinks this file is fresh when it is not
[05:59:09] *** Quits: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca) (Connection reset by peer)
[05:59:27] <jeaye> tiffany: `touch file`
[05:59:43] <tiffany> I've been editing the file though
[05:59:55] <drrb> Sorry I dropped out before. I'm attempting to use std::rt::start, but I have no idea what to pass as the arguments. Any idea how I create the crate_map?
[05:59:56] *** Joins: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net)
[06:00:00] <jeaye> ah, just making sure
[06:00:48] <jeaye> drrb: I don't think you do that yourself. See: https://github.com/bjz/glfw-rs/blob/master/src/examples/window/main.rs
[06:00:56] *** Quits: kendle (Mibbit@moz-5256162B.hsd1.ca.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[06:01:23] <tiffany> using touch works, but that's a pretty gross solution
[06:01:47] <tiffany> oh
[06:01:51] <tiffany> that's what it is
[06:01:56] <tiffany> it's not checking against the dependencies
[06:03:15] <drrb> Ok, so the compiler does something to automatically call methods annotated with #[start] at runtime?
[06:03:18] <tiffany> er, not dependencies, but files in it
[06:03:20] <tiffany> why doesn't it?
[06:03:44] <tiffany> it only checks to see that main.rs is free, instead of any other files in the crate
[06:03:47] <tiffany> fresh*
[06:04:00] <strcat> tiffany: it's a work in progress
[06:05:08] <Luqman> drrb: yes
[06:05:35] <tiffany> uh.. I think the docs might be wrong about GenericPath::filename
[06:05:46] <tiffany> it says it returns None if it's a directory, but it only returns None if the path is empty
[06:07:03] <drrb> Is that only when I compile to an executable, or does it work for libraries?
[06:08:07] <drrb> (the background is that I'm trying to call rust code from java, but it dies when I try to use IO: because the io library uses @ pointers, from what I can gather)
[06:10:44] <strcat> drrb: if you're using rust without the runtime you can't use parts of the stdlib
[06:10:47] *** Quits: drake (Mibbit@D2C7AF00.E046E066.520CDC98.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[06:10:48] <strcat> there is #[no_std] to opt-out completely
[06:12:59] <zeuxcg> how is the hash computed for rust libraries? Over the past week or so I did git pull && ./configure && make && make install twice, and both times make install gave me a warning that said there's already a librust...so present in usr/local/lib with a different hash - and I think it did not happen before
[06:13:40] <strcat> zeuxcg: if you don't use a package manager to install it, you have to clean up before reinstalling
[06:14:10] <zeuxcg> I think it worked several times without reinstalling before though
[06:14:13] <strcat> the hash is based on the metadata afaik - and the hashes of the deps
[06:14:24] <zeuxcg> i.e. building after pull and installing
[06:14:27] <strcat> it will change at least when the version is bumped
[06:14:27] <zeuxcg> maybe just got lucky
[06:16:01] <zeuxcg> metadata = version/author name/etc.?
[06:16:08] <strcat> yes
[06:16:31] <strcat> in theory it's supposed to change every time you pull
[06:16:34] <drrb> Thanks, I think that's what's happening to me. I would like to use the stdlib though: that's why I'm trying to start the runtime manually. Is that how people usually get call rust from c, etc, while still using std?
[06:16:52] <strcat> but atm the version is just xxx-pre instead of a proper git describe one, on trunk
[06:17:10] <zeuxcg> I see, thanks
[06:17:20] <strcat> drrb: you can still use the stdlib, just not parts of it
[06:17:48] <strcat> I don't think there's going to be a sane way to start the runtime from within the jvm at this point
[06:18:00] *** Parts: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) ()
[06:18:09] <drrb> sorry, I mean that I'd like to use IO, which seems to be one of those parts
[06:18:15] <drrb> Ok
[06:18:52] <strcat> you can do I/O, but not with std::rt::io because it uses the libuv-based scheduler
[06:19:10] <strcat> std::io is obsolete, and is one of the few things in the stdlib using @
[06:19:22] <drrb> ok
[06:19:43] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[06:19:52] <drrb> my eventual goal is to run rustc from java (i'm writing an IDE plugin for rust)
[06:20:49] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[06:22:24] <enix> hey
[06:22:35] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[06:24:30] <strcat> hi
[06:26:04] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[06:26:37] *** Parts: drrb (drrb@4D561226.896EE5A.377B9828.IP) ()
[06:28:42] <enix> am I wrong to be bummed that it looks like every line of code I wrote is going to be removed from Rust>
[06:28:43] <enix> ?
[06:30:08] <SiegeLord> Depends how much time you spent on it... and whether you're still using Rust ;)
[06:30:28] *** Quits: SteveMcQwark (stevemcqwa@moz-7CFCF343.cpe.net.cable.rogers.com) (Quit: SteveMcQwark)
[06:31:45] *** Quits: jesseray (Mibbit@moz-EE907FB2.dhcp.insightbb.com) (Quit: http://www.mibbit.com ajax IRC Client)
[06:32:52] <enix> maybe too mush
[06:33:56] *** Joins: maik (maik@moz-C09804C4.dip0.t-ipconnect.de)
[06:35:00] <enix> blah. I
[06:35:11] <enix> I'm just being whiney. Please ignore.
[06:35:42] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[06:36:04] *** Quits: maik (maik@moz-C09804C4.dip0.t-ipconnect.de) (Ping timeout)
[06:39:45] *** Joins: dbaupp (Thunderbir@moz-EAA09AEF.lns20.syd7.internode.on.net)
[06:40:16] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[06:43:27] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[06:44:03] *** Quits: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[06:44:37] *** Quits: elij (elij@E6C4342E.9D386EAF.AF7F4FE0.IP) (Ping timeout)
[06:47:14] *** Quits: brendanc (brendan@moz-CA4BEC19.cs.ubc.ca) (Ping timeout)
[06:47:21] *** Joins: brendanc (brendan@moz-CA4BEC19.cs.ubc.ca)
[06:47:28] <tiffany> I have caused a pretty ugly segfault it seems
[06:48:21] <tiffany> http://paste.strictfp.com/39261
[06:50:44] *** Joins: elij (elij@E6C4342E.9D386EAF.AF7F4FE0.IP)
[06:55:34] *** Joins: mib_nfbif9 (Mibbit@moz-872CCE35.ppp-bb.dion.ne.jp)
[06:56:16] *** Quits: mib_nfbif9 (Mibbit@moz-872CCE35.ppp-bb.dion.ne.jp) (Quit: http://www.mibbit.com ajax IRC Client)
[07:00:59] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[07:00:59] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/z-KrHA
[07:00:59] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[07:02:18] <tiffany> it segfaults after the exit of main()
[07:05:57] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[07:05:57] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/UJIPrQ
[07:05:57] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[07:05:57] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[07:05:58] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/3nAcvg
[07:05:58] <ghrust> 13rust/06auto 14d47ddda 15Alex Crichton: rustdoc: Out with the old, in with the new...
[07:05:58] <ghrust> 13rust/06auto 149781915 15bors: auto merge of #9402 : alexcrichton/rust/no-ng, r=thestinger...
[07:05:58] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[07:07:59] *** kimundi is now known as zz_kimundi
[07:08:13] *** Quits: zeuxcg (zeuxcg@moz-80D1F912.hsd1.ca.comcast.net) (Ping timeout)
[07:11:52] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[07:11:55] *** Joins: sebcrozet (sebcrozet@moz-C27D92D8.w193-252.abo.wanadoo.fr)
[07:12:22] *** Joins: Ms2ger (Ms2ger@moz-5E4B5E52.adsl-dyn.isp.belgacom.be)
[07:24:26] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[07:24:26] <ghrust> 01[13rust01] 15thestinger merged 06master into 06snap-stage3: 02http://git.io/z-KrHA
[07:24:26] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[07:25:19] *** Quits: Ms2ger (Ms2ger@moz-5E4B5E52.adsl-dyn.isp.belgacom.be) (Quit: bbl)
[07:25:57] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[07:25:57] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 149781915 to 14eabcb39: 02http://git.io/N3iJvQ
[07:25:57] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[07:25:58] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[07:25:58] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/mjTLqA
[07:25:58] <ghrust> 13rust/06auto 14695cb9f 15Brian Anderson: Update version numbers to 0.8
[07:25:58] <ghrust> 13rust/06auto 140716782 15bors: auto merge of #9395 : brson/rust/0.8, r=alexcrichton
[07:25:58] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[07:28:28] *** Joins: maik (maik@moz-C09804C4.dip0.t-ipconnect.de)
[07:30:50] *** Joins: donri (donri@moz-9BB61102.tbcn.telia.com)
[07:34:11] *** Quits: dbaupp (Thunderbir@moz-EAA09AEF.lns20.syd7.internode.on.net) (Input/output error)
[07:34:36] *** Joins: dbaupp (Thunderbir@moz-EAA09AEF.lns20.syd7.internode.on.net)
[07:35:40] *** Quits: dbaupp (Thunderbir@moz-EAA09AEF.lns20.syd7.internode.on.net) (Quit: dbaupp)
[07:36:20] *** Joins: dbaupp (Thunderbir@moz-EAA09AEF.lns20.syd7.internode.on.net)
[07:40:08] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[07:41:11] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[07:44:08] *** Joins: jviereck (Adium@moz-D03659.dip0.t-ipconnect.de)
[07:48:56] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[07:52:46] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[08:00:02] <SiegeLord> This line in the tutorial: "To ensure that stack closures never outlive the local variables to which they refer, stack closures are not first-class. That is, they can only be used in argument position; they cannot be stored in data structures or returned from functions."
[08:00:08] <SiegeLord> It doesn't apply to Rust today, right?
[08:02:21] <strcat> SiegeLord: that's not true anymore, but stack closures still aren't in the type system
[08:02:25] <strcat> they just coerce to &fn
[08:02:33] <Eridius> you definitely can't return one from a function though
[08:02:52] <SiegeLord> What's &fn then?
[08:03:01] <strcat> not a stack closure
[08:03:06] <strcat> it's a borrowed closure
[08:03:18] <strcat> stack closures don't exist in any form in the type system
[08:03:18] <SiegeLord> Huh, ok
[08:03:38] <strcat> a function, stack closure or closure closure will coerce to &fn
[08:03:41] *** Quits: tefter (tefter@B5D119DC.B856A0A1.73804765.IP) (Ping timeout)
[08:03:42] <strcat> or heap closure*
[08:03:50] * strcat is tired
[08:03:53] *** Joins: tefter (tefter@B5D119DC.B856A0A1.73804765.IP)
[08:04:24] *** Quits: victorporof (victorporo@D5C23157.DA9DCE7D.79933D60.IP) (Client exited)
[08:05:44] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[08:06:52] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[08:08:52] *** Quits: maik (maik@moz-C09804C4.dip0.t-ipconnect.de) (Ping timeout)
[08:09:57] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[08:13:07] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.1)
[08:14:49] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Client exited)
[08:15:16] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[08:16:56] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[08:20:07] *** Joins: maik (maik@moz-C09804C4.dip0.t-ipconnect.de)
[08:20:17] *** Quits: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net) (Quit: eatkinson)
[08:21:44] <dbaupp> rusti: fn foo() -> &fn() { || { print("no captures ") } } foo()()
[08:21:45] -rusti- no captures ()
[08:23:04] <SimonSapin> the docs URLs changed without a redirect :(
[08:23:36] <Eridius> woohoo, the current docs URLs on rust-lang.org are broken
[08:24:09] <SimonSapin> ah, that too
[08:24:10] *** Quits: jviereck (Adium@moz-D03659.dip0.t-ipconnect.de) (Quit: Leaving.)
[08:28:01] *** Joins: Monetarisths_Oikonomo (Hellenic_S@moz-6BF60717.dsl.dyn.forthnet.gr)
[08:29:34] *** Quits: Monetarisths_Oikonomo (Hellenic_S@moz-6BF60717.dsl.dyn.forthnet.gr) (Quit: )
[08:36:00] *** Joins: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net)
[08:38:12] *** Joins: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP)
[08:43:54] *** Quits: KindOne (KindOne@moz-C94C4780.dynamic.ip.windstream.net) (Ping timeout)
[08:49:24] <maik> is it possible to wrap c enums somehow? Afaik it is not possible atm
[08:50:49] <LRN> is there a way to quickly destructure a struct without using `match'?
[08:51:52] *** Joins: jviereck (Adium@moz-D03659.dip0.t-ipconnect.de)
[08:52:10] <LRN> right now i have to do: let (var1, var2, ...) = (struct.field1, struct.field2, ...);
[08:52:10] *** Joins: KindOne (KindOne@moz-C94C4780.dynamic.ip.windstream.net)
[08:53:24] <LRN> maik, there's a c-enum-like trait somewhere
[08:54:21] <dbaupp> LRN: Struct { field1, field2, field3 } works
[08:54:37] <LRN> dbaupp, that would create a struct, would it not?
[08:54:47] <dbaupp> rusti: struct Foo { x: int, y: uint } let a = Foo { x: 1, y: 2 }; let Foo { x, y } = a; (x, y)
[08:54:48] -rusti- (1, 2u)
[08:54:59] <dbaupp> LRN: as a pattern, no
[08:55:23] * LRN reads carefully
[08:55:26] <dbaupp> maik: yes, with cast::transmute it's possible to do it "correctly"
[08:56:19] <dbaupp> maik: http://www.reddit.com/r/rust/comments/1lpmrx/storing_structsenums_of_structs_more_compactly_in/cc1jbku (I believe rust-bindgen actually generates something like this, but I'm not sure)
[08:56:51] <dbaupp> LRN: in general, the pattern is `Struct { field_name: [ref|ref mut] bound_variable, ... }`
[08:57:10] <LRN> okay
[08:57:20] <dbaupp> and that binds the field `field_name` to `bound_variable`, optionally as a (mutable) reference
[08:57:50] <dbaupp> you can match on a subset of the fields too, by writing the ones of interest and ignoring the rest with `_`:
[08:57:51] *** Joins: victorporof (victorporo@D5C23157.DA9DCE7D.79933D60.IP)
[08:58:22] <dbaupp> rusti: struct Foo { x: int, y: uint, z: float } let a = Foo { x: 1, y: 2, z: 3.0 }; let Foo { x: ref x, y, _ } = a; (*x, y)
[08:58:23] -rusti- (1, 2u)
[08:58:52] <LRN> in your example above you said "let Foo {x, y} = a;". Coincidentally, the variables you bind these fields and the fields have the same name
[08:59:21] <LRN> if they are different, should it be: "let Foo {x: zool, y: froo} = a; (zool, froo)"?
[08:59:21] <maik> dbaupp, okay thanks, I'll have a look
[08:59:40] <dbaupp> LRN: yes
[08:59:48] <LRN> oh-kay
[09:00:10] <dbaupp> (I should've been more careful, but what I wrote is just a shortcut for `foo: foo`.)
[09:00:18] <LRN> uh-oh
[09:00:54] <dbaupp> as in, binding a field to a variable of the same name can be abbreviated.
[09:00:54] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[09:00:54] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/mjTLqA
[09:00:54] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[09:02:31] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[09:03:04] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[09:04:13] *** Quits: bogen (dwight@moz-E33E93D8.tx.res.rr.com) (Ping timeout)
[09:05:54] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[09:05:54] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/O70N3Q
[09:05:54] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[09:07:09] *** Joins: Earnestly (earnest@moz-BE290A2B.dyn.plus.net)
[09:07:41] *** Quits: maik (maik@moz-C09804C4.dip0.t-ipconnect.de) (Client exited)
[09:10:20] *** Joins: jstoja (julienbord@C5477ED6.490653D0.7B75DA8D.IP)
[09:13:47] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[09:17:03] *** Joins: mib_vk52zn (Mibbit@moz-6C393FDD.rev.numericable.fr)
[09:17:31] <mib_vk52zn> is there any difference between printf! and print! ? from my understanding it's just that printf! is getting replaced
[09:19:02] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[09:25:20] *** Joins: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP)
[09:26:43] <cyndis> they have a different syntax
[09:28:58] *** Quits: six600110 (six600110@moz-2FA48202.neo.res.rr.com) (Ping timeout)
[09:29:15] *** Joins: six600110 (six600110@moz-2FA48202.neo.res.rr.com)
[09:30:02] *** Quits: kertap (kertap@moz-E2C367E7.b-ras3.mvw.galway.eircom.net) (Quit: kertap)
[09:30:51] <mib_vk52zn> and that's it?
[09:31:04] <mib_vk52zn> one is supposed to replace the other or not?
[09:32:45] *** Joins: maik (maik@moz-C09804C4.dip0.t-ipconnect.de)
[09:34:20] *** Quits: mib_vk52zn (Mibbit@moz-6C393FDD.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[09:38:51] *** Quits: maik (maik@moz-C09804C4.dip0.t-ipconnect.de) (Ping timeout)
[09:43:19] *** Quits: six600110 (six600110@moz-2FA48202.neo.res.rr.com) (Connection reset by peer)
[09:43:24] *** Joins: six600110_ (six600110@moz-2FA48202.neo.res.rr.com)
[09:44:48] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[09:47:15] *** Quits: nrc|afk (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[09:48:29] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Connection reset by peer)
[09:49:32] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[09:52:20] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[09:55:54] *** Joins: dio (dio@moz-F9B9D320.retail.telecomitalia.it)
[09:56:08] *** Quits: naq (naq@D5C2D2DF.E4265FCD.E481B5B.IP) (Ping timeout)
[09:56:09] *** Quits: Ferreus_ (daniel@moz-8EA798B8.dyn.telefonica.de) (Ping timeout)
[09:56:57] *** Joins: mib_9lubq0 (Mibbit@E03BBD86.53BF7D6D.5EA9B12.IP)
[09:57:24] <mib_9lubq0> #Go
[09:57:31] *** Joins: Ferreus_ (daniel@moz-548B3C78.dyn.telefonica.de)
[09:58:01] *** Parts: mib_9lubq0 (Mibbit@E03BBD86.53BF7D6D.5EA9B12.IP) ()
[10:03:24] <LRN> #Rust
[10:04:08] *** Quits: jstoja (julienbord@C5477ED6.490653D0.7B75DA8D.IP) (Connection reset by peer)
[10:05:37] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[10:14:00] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Quit: work)
[10:15:39] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[10:16:05] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[10:16:55] *** Joins: jstoja (julienbord@E7538A25.A6CB92AB.21BDDF43.IP)
[10:19:36] *** Joins: nkoep (nik@moz-B746B47D.pool.mediaways.net)
[10:25:18] *** Joins: maik (maik@moz-C09804C4.dip0.t-ipconnect.de)
[10:25:25] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[10:26:26] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[10:30:23] <ldunn> http://i.imgur.com/eZBEcNH.jpg whee, what fun
[10:30:48] *** Quits: dio (dio@moz-F9B9D320.retail.telecomitalia.it) (Ping timeout)
[10:30:53] <jensnockert> ldunn: \o/
[10:31:35] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[10:31:47] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[10:31:48] *** Joins: Sindwiller (quassel@moz-743130B2.dynamic.hispeed.ch)
[10:31:51] <engla> nice
[10:31:59] *** Quits: jstoja (julienbord@E7538A25.A6CB92AB.21BDDF43.IP) (Ping timeout)
[10:33:36] <ldunn> :)
[10:33:48] <myname> ldunn: awesome
[10:34:22] <myname> ldunn: now you can build a roguelikeOS
[10:34:41] <ldunn> :P
[10:35:09] *** Joins: ferd (Mibbit@moz-20CEEF38.hsd1.ca.comcast.net)
[10:35:27] <ferd> how do I scanf a string from stdin in rust?
[10:35:53] <dbaupp> ferd: what do you want to scanf? (Rust doesn't support much yet.)
[10:36:36] <ferd> dbaupp: I'd like to read a string from the user
[10:36:52] <ferd> newline terminated, newline not included
[10:37:56] <engla> that's read_line() in the old IO
[10:38:49] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[10:39:14] <ferd> engla: great. thank you.
[10:40:19] <engla> ferd: http://static.rust-lang.org/doc/master/std/io.html#trait-readerutil
[10:40:33] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[10:40:50] <engla> std::io has some issues, it is being replaced sooner or later
[10:41:56] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[10:42:02] <ferd> cool. so am I guessing correctly that let = mynewstring = stdio().read_line(); should wait for user to input a string?
[10:42:16] <ferd> (minus that first = )
[10:43:43] * dbaupp hopes sooner
[10:43:51] <dbaupp> ferd: yep
[10:43:55] <ferd> :-) 
[10:43:57] <dbaupp> (well, stdin())
[10:44:13] *** Quits: sebcrozet (sebcrozet@moz-C27D92D8.w193-252.abo.wanadoo.fr) (Ping timeout)
[10:44:20] <dbaupp> I can't remember if it strips the newline or not; I think it does.
[10:44:41] <ferd> right. next I'm trying to figure out how to read_line from a pipe. I see fd_writer, but no fd_reader...
[10:46:12] <dbaupp> seems to be impossible! :(
[10:46:31] <ferd> oh noes
[10:47:06] <ferd> libc::read directly?
[10:48:32] <dbaupp> it should work, although it'll block the whole OS thread, not just the current task
[10:48:44] *** Joins: lkuper_ (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[10:49:30] *** Quits: lkuper_ (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper_)
[10:49:43] *** Quits: maik (maik@moz-C09804C4.dip0.t-ipconnect.de) (Ping timeout)
[10:49:44] <ferd> dbaupp: ok, I'll try that
[10:51:00] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[10:51:01] *** Joins: sebcrozet (sebcrozet@moz-6DA639AF.w80-13.abo.wanadoo.fr)
[10:55:35] <ferd> if I want to allocate a u8 buffer of 4096 bytes, and pass the address of that into read, how would do the let to get the buffer?
[10:56:11] <engla> let mut buffer = [0u8, ..4096];
[10:56:32] <ferd> engla: thx!
[10:57:23] <ferd> is &buffer a pointer to start of the buffer to pass to C, or do I need to request a special member like .ptr
[10:57:39] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[10:57:55] <engla> you need a method to get a raw pointer
[10:58:22] <ferd> right
[10:58:31] <dbaupp> buffer.unsafe_mut_ref(0) will get a *mut u8 to the first element (the 0)
[10:58:57] <ferd> dbaupp: great!
[10:59:00] <engla> rusti: let mut buffer = [0u8, ..4096]; do buffer.as_mut_buf |a, b| { println!("{} {}", a, b) } 
[10:59:00] -rusti- 0x7fcd04e200f8 4096
[10:59:01] -rusti- ()
[10:59:13] <dbaupp> or as_mut_buf
[10:59:57] <ferd> engla: what does the b do in |a, b|
[11:00:19] <engla> the parameters are data pointer and length
[11:00:42] <ferd> length, very good
[11:02:33] * dbaupp reckons engla could've used |ptr, len| as is convention ;P
[11:02:47] *** Quits: dew (Instantbir@moz-D2FA52B6.static.stls.mo.charter.com) (Ping timeout)
[11:03:00] <engla> yeah yeah 
[11:03:15] *** Joins: dew (Instantbir@moz-D2FA52B6.static.stls.mo.charter.com)
[11:04:14] <engla> there are lots of different methods to extract the *T / *mut T
[11:05:25] <engla> to_ptr(), to_mut_ptr(), as_mut_buf(), 
[11:05:45] *** Joins: ceninan (ceninan@moz-6BD43586.a370.priv.bahnhof.se)
[11:05:50] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[11:07:11] <engla> the closure version at least should guard you from modifying the vec while using the data pointer (unless you return it from the closure)
[11:07:51] <dbaupp> to_[mut_]ptr are in vec::raw, right?
[11:08:07] <engla> oh yeah
[11:08:15] <engla> but they are not unsafe
[11:08:40] <engla> unsafe_mut_ref  is unsafe since it skips the bounds check
[11:09:01] <dbaupp> is it?
[11:09:14] <dbaupp> oh, so it is
[11:11:24] *** Quits: jviereck (Adium@moz-D03659.dip0.t-ipconnect.de) (Quit: Leaving.)
[11:12:46] <dbaupp> engla: https://github.com/mozilla/rust/pull/9404 what a weird function
[11:12:56] <dbaupp> (did you really scan the whole git history for users of map_opt?)
[11:13:08] <engla> yes,  git log -Smap_opt
[11:13:18] <dbaupp> neat
[11:13:26] <engla> to find when it was added. It looks like it was added but never used
[11:13:47] *** Quits: Liothen (liothen@moz-788EBAD0.spkn.qwest.net) (Quit: Textual IRC Client: www.textualapp.com)
[11:13:53] *** Joins: kertap (kertap@moz-E2C367E7.b-ras3.mvw.galway.eircom.net)
[11:13:55] *** Joins: jviereck (Adium@moz-D03659.dip0.t-ipconnect.de)
[11:14:17] *** Joins: Ms2ger (Ms2ger@moz-5E4B5E52.adsl-dyn.isp.belgacom.be)
[11:14:50] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[11:15:39] *** Joins: miza (miza@moz-908EA8DE.home.otenet.gr)
[11:16:02] <engla> (I think it's weird too)
[11:17:02] *** Quits: jviereck (Adium@moz-D03659.dip0.t-ipconnect.de) (Quit: Leaving.)
[11:17:15] *** Joins: jviereck (Adium@moz-D03659.dip0.t-ipconnect.de)
[11:17:16] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[11:18:24] *** Quits: paulproteus (quassel@rose.makesad.us) (Ping timeout)
[11:19:39] *** Joins: paulproteus (quassel@moz-E86A3B42.makesad.us)
[11:22:02] *** Joins: Florob (Florob@moz-39532932.de)
[11:22:58] <bjz> dbaupp: I always thout it was odd too
[11:24:40] *** Joins: jstoja (julienbord@C5477ED6.490653D0.7B75DA8D.IP)
[11:26:55] <ferd> if I have a buffer from "let mut buffer = ~[0u8, ..4096]" and I want to memcpy from an str over to buffer, what would I do?
[11:26:58] *** Quits: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP) (Ping timeout)
[11:28:21] <dbaupp> a rust str?
[11:28:34] <ferd> yes
[11:29:17] <dbaupp> rusti: let mut buffer = ~[0u8, .. 30]; let s = "foobarbaz"; std::vec::bytes::copy_memory(buffer, s.as_bytes(), s.len()); buffer
[11:29:18] -rusti- pastebinned 1 lines of output: http://sprunge.us/PURV
[11:29:31] <dbaupp> rusti: let mut buffer = ~[0u8, .. 15]; let s = "foobarbaz"; std::vec::bytes::copy_memory(buffer, s.as_bytes(), s.len()); buffer
[11:29:32] -rusti- ~[102u8, 111u8, 111u8, 98u8, 97u8, 114u8, 98u8, 97u8, 122u8, 0u8, 0u8, 0u8, 0u8, 0u8, 0u8]
[11:29:47] <ferd> nice
[11:29:49] <ferd> thx!
[11:33:40] <Jesse> rusti: let mut buffer = ~[0u8, .. 15]; let s = "foobarbaz"; std::vec::bytes::copy_memory(buffer, s.as_bytes(), s.len() + 4); buffer
[11:33:41] -rusti- task <unnamed> failed at 'assertion failed: src.len() >= count', /build/rust-git/src/rust/src/libstd/vec.rs:2164
[11:33:41] -rusti- application terminated with error code 101
[11:34:00] <Jesse> rusti: let mut buffer = ~[0u8, .. 15]; let s = "foobarbaz"; std::vec::bytes::copy_memory(buffer, s.as_bytes(), s.len() + 1); buffer
[11:34:01] -rusti- task <unnamed> failed at 'assertion failed: src.len() >= count', /build/rust-git/src/rust/src/libstd/vec.rs:2164
[11:34:01] -rusti- application terminated with error code 101
[11:35:35] *** Joins: shmax (Mibbit@6722A59D.DD34936D.520CDC98.IP)
[11:38:53] *** Quits: kertap (kertap@moz-E2C367E7.b-ras3.mvw.galway.eircom.net) (Quit: kertap)
[11:40:03] <dbaupp> Jesse: safe as houses :P
[11:40:25] *** Joins: dwrensha (chatzilla@moz-7D01AC63.pitbpa.east.verizon.net)
[11:40:43] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.1)
[11:41:00] *** Joins: maik (maik@moz-C09804C4.dip0.t-ipconnect.de)
[11:41:31] *** Joins: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP)
[11:42:21] <Jesse> "Copies `count` bytes from `src` to `dst`. The source and destination may overlap."
[11:42:25] <Jesse> what happens if they overlap?
[11:43:11] *** Joins: Palmik (palmik@moz-11EA685D.pks.muni.cz)
[11:43:20] <ferd> the usual algorithm is copy so that info is not lost
[11:43:25] <dbaupp> it should still work (i.e. dst will end up with the data in src), but I don't think one can actually construct overlapping buffers without unsafe code.
[11:43:58] <ferd> you may have to copy from the end to the beginning to acheive that
[11:44:22] <Jesse> rusti: "â˜ƒ".len() ////
[11:44:23] -rusti- 3u
[11:44:23] *** Joins: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr)
[11:44:38] *** Quits: Sindwiller (quassel@moz-743130B2.dynamic.hispeed.ch) (Connection reset by peer)
[11:44:53] <adridu59> how do I initialize an array with a parametric length to 0? is there any other way than a for loop?
[11:45:27] <dbaupp> rusti: (~[0, .. 10], std::vec::from_elem(10, 0), std::vec::from_fn(10, |_| 0))
[11:45:28] -rusti- (~[0, 0, 0, 0, 0, 0, 0, 0, 0, 0], ~[0, 0, 0, 0, 0, 0, 0, 0, 0, 0], ~[0, 0, 0, 0, 0, 0, 0, 0, 0, 0])
[11:45:55] <dbaupp> rusti: std::iter::Repeat::new(0).take(10).to_owned_vec()
[11:45:56] -rusti- ~[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
[11:45:56] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[11:45:56] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/O70N3Q
[11:45:56] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[11:45:56] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[11:45:56] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/JZMpUg
[11:45:56] <ghrust> 13rust/06auto 14884c1e1 15Huon Wilson: std: move rand.rs to rand/mod.rs.
[11:45:56] <ghrust> 13rust/06auto 145305f8c 15Huon Wilson: std: merge rand::{Rng,RngUtil} with default methods....
[11:45:57] <ghrust> 13rust/06auto 14c9c5665 15Huon Wilson: Remove the C(++) ISAAC Rng from the old rt.
[11:45:59] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[11:46:02] <Jesse> |_|
[11:46:12] <dbaupp> adridu59: (you are interested in a ~[] vec, right?)
[11:46:46] <engla> rusti: range(0, 10).map(|_| 0).to_owned_vec()
[11:46:47] -rusti- ~[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
[11:46:52] <engla> hehe
[11:47:25] <adridu59> maybe? I'm not very familiar with arrays in Rust
[11:47:32] <adridu59> (*admittedly)
[11:47:34] <dbaupp> rusti: range(0, 10).zip(range(0, 10)).map(|(a,b)| a - b).to_owned_vec()
[11:47:35] -rusti- ~[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
[11:47:49] <adridu59> what's zip?
[11:47:49] <dbaupp> adridu59: code?
[11:48:43] <dbaupp> joins Iterator<A> and Iterator<B> into Iterator<(A,B)>, i.e. taking pairs of elements from each iterator
[11:48:44] <adridu59> I want to declare an array of ints, which will have its number of elements set by a parameter
[11:49:05] <Jesse> rusti: range(0, 10).zip(range(0, 10))
[11:49:07] -rusti- pastebinned 1 lines of output: http://sprunge.us/gWIg
[11:49:56] <dbaupp> adridu59: vec::from_elem is probably the one you want
[11:50:19] <adridu59> I think I'll just do it in Python, I just started learning it for school and need some practise, thank you
[11:50:31] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[11:50:31] <dbaupp> rusti: range(0, 10).zip(range(0, 10)).to_owned_vec()
[11:50:32] <Jesse> rusti: std::iter::Zip<std::iter::Range<int>,std::iter::Range<int>>{a: std::iter::Range<int>{state: 0, stop: 10, one: 1}, b: std::iter::Range<int>{state: 0, stop: 10, one: 1}}
[11:50:32] -rusti- ~[(0, 0), (1, 1), (2, 2), (3, 3), (4, 4), (5, 5), (6, 6), (7, 7), (8, 8), (9, 9)]
[11:50:32] -rusti- pastebinned 4 lines of output: http://sprunge.us/FeMD
[11:50:52] <adridu59> I mean, if I want to fully utilize Rust I must forray srsly into the tutorial :)
[11:51:04] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[11:51:06] <dbaupp> rusti: std::iter::Zip {a: std::iter::Range<int>{state: 0, stop: 10, one: 1}, b: std::iter::Range<int>{state: 0, stop: 10, one: 1}}
[11:51:06] -rusti- <anon>:7:55: 7:56 error: expected one of `; }` but found `:`
[11:51:06] -rusti- <anon>:7          std::iter::Zip {a: std::iter::Range<int>{state: 0, stop: 10, one: 1}, b: std::iter::Range<int>{state: 0, stop: 10, one: 1}}
[11:51:06] -rusti-                                                                 ^
[11:51:06] -rusti- application terminated with error code 101
[11:51:20] <dbaupp> rusti: std::iter::Zip {a: std::iter::Range::<int>{state: 0, stop: 10, one: 1}, b: std::iter::Range::<int>{state: 0, stop: 10, one: 1}}
[11:51:21] -rusti- pastebinned 26 lines of output: http://sprunge.us/adcE
[11:54:43] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[11:55:04] <engla> iterators will be an interesting part of ABI stability
[11:55:04] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[11:55:11] <engla> exposing so many by-value structs
[11:57:27] <Jesse> filed https://github.com/mozilla/rust/issues/9405
[11:57:39] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[11:58:05] <dbaupp> engla: in what way?
[11:58:22] <dbaupp> as in, changing the internals of those structs breaks the ABI?
[11:58:40] <engla> yes
[11:59:27] <dbaupp> I guess we just have to avoid changing them often. (which presumably isn't too hard: they're all simple enough that it's unlikely they'll need changing too often.)
[12:00:07] *** Quits: ceninan (ceninan@moz-6BD43586.a370.priv.bahnhof.se) (Ping timeout)
[12:01:23] *** Quits: ferd (Mibbit@moz-20CEEF38.hsd1.ca.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[12:02:42] <engla> ok I should file an issue about char iterator then
[12:02:51] *** Quits: jviereck (Adium@moz-D03659.dip0.t-ipconnect.de) (Quit: Leaving.)
[12:02:53] <engla> I want it to be optimized before 1.0
[12:02:55] <dbaupp> ah, right, yeah
[12:03:03] * dbaupp was only thinking of the adaptors
[12:03:35] <dbaupp> is 1.0 guaranteeing ABI stability as well as API stability?
[12:03:48] <engla> no idea
[12:04:55] *** Quits: jstoja (julienbord@C5477ED6.490653D0.7B75DA8D.IP) (Ping timeout)
[12:05:02] *** Quits: z0w0 (zack@64F0E14B.3C29B4A9.2CE63F58.IP) (Client exited)
[12:07:13] *** Quits: maik (maik@moz-C09804C4.dip0.t-ipconnect.de) (Ping timeout)
[12:12:49] <jensnockert> I hope not, ABI stability is a pain.
[12:13:10] <jensnockert> Just look at the ObjC runtime and some of the horrible hacks.
[12:13:15] <jensnockert> Or the Win32 API.
[12:13:55] <jensnockert> Also, link-time inlining.
[12:14:14] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[12:18:32] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[12:20:34] *** Joins: gareth0 (gareth0@moz-DF9F1966.dynamic.dsl.as9105.com)
[12:20:58] <gareth0> how does one sleep the current task for a given time period?
[12:25:27] *** Quits: tefter (tefter@B5D119DC.B856A0A1.73804765.IP) (Ping timeout)
[12:25:39] *** Joins: tefter (tefter@B5D119DC.B856A0A1.73804765.IP)
[12:25:43] <dbaupp> rusti: std::rt::io::timer::sleep(50 /* milliseconds */)
[12:25:44] -rusti- ()
[12:25:54] <engla> is implicit copy for a type that's #[no_freeze] like Cell<T>?
[12:26:03] <engla> is implicit copy *safe* ..
[12:27:46] *** Joins: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca)
[12:27:52] <dbaupp> I think so? becase Cell<T> is only implicitly copyable when T is
[12:28:03] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[12:29:16] <gareth0> ah, thanks dbaupp - looks like that is a recent addition
[12:29:23] <engla> but it's a form of read access while you might be mutating it
[12:30:17] <dbaupp> gareth0: yeah that specific function is, but it's actually just a wrapper around `std::rt::io::timer::Timer::new().unwrap().sleep`.
[12:30:37] <gareth0> yea
[12:30:39] <dbaupp> (which is also relatively recent, i.e. a month or two old)
[12:30:42] <gareth0> ah
[12:31:04] <dbaupp> engla: hm? it's not shared memory like Arc
[12:31:27] *** Joins: lkuper_ (lkuper@moz-FDEADE14.central.biz.rr.com)
[12:31:37] <dbaupp> engla: it gets transferred across tasks like plain T or ~T (doesn't it?)
[12:31:58] <dbaupp> (that is to say, there's no possibility of concurrent access)
[12:32:38] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[12:32:39] <engla> sure
[12:33:02] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[12:34:46] *** Joins: canhtak (jeremy@moz-8E705AE1.wl.t.ulaval.ca)
[12:38:29] *** Joins: jstoja (julienbord@C5477ED6.490653D0.7B75DA8D.IP)
[12:39:04] *** Quits: lkuper_ (lkuper@moz-FDEADE14.central.biz.rr.com) (Quit: lkuper_)
[12:39:22] *** Joins: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl)
[12:40:54] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[12:40:54] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 142f1cf33 to 140716782: 02http://git.io/N3iJvQ
[12:40:54] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[12:40:56] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[12:40:56] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/BfHgYw
[12:40:56] <ghrust> 13rust/06auto 14884c1e1 15Huon Wilson: std: move rand.rs to rand/mod.rs.
[12:40:56] <ghrust> 13rust/06auto 145305f8c 15Huon Wilson: std: merge rand::{Rng,RngUtil} with default methods....
[12:40:56] <ghrust> 13rust/06auto 14b662b08 15Huon Wilson: Remove the C(++) ISAAC Rng from the old rt....
[12:40:58] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[12:47:54] *** Joins: bogen (dwight@moz-E33E93D8.tx.res.rr.com)
[12:48:23] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[12:51:22] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Quit: Leaving...)
[12:51:35] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[12:52:03] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[12:52:34] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[12:54:29] *** Quits: Ms2ger (Ms2ger@moz-5E4B5E52.adsl-dyn.isp.belgacom.be) (Quit: bbl)
[12:54:29] *** Quits: jstoja (julienbord@C5477ED6.490653D0.7B75DA8D.IP) (Connection reset by peer)
[13:00:31] *** Quits: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin_)
[13:01:23] *** Joins: mib_yqnrdz (Mibbit@5AE2F96C.900590D8.9CA07080.IP)
[13:03:39] <SimonSapin> Iâ€™m about to give a lightning talk at PyCon UK about adding enumerated data types in Python, using Rust as an example of doing things right
[13:07:04] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Quit: Jesse)
[13:07:44] *** Quits: gareth0 (gareth0@moz-DF9F1966.dynamic.dsl.as9105.com) (Ping timeout)
[13:08:02] *** Quits: Ferreus_ (daniel@moz-548B3C78.dyn.telefonica.de) (Quit: WeeChat 0.4.1)
[13:08:08] *** Joins: Ferreus (daniel@moz-548B3C78.dyn.telefonica.de)
[13:10:30] *** Quits: mib_yqnrdz (Mibbit@5AE2F96C.900590D8.9CA07080.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[13:11:18] *** Quits: myname (myname@F6BC1CBC.2C5F047.A0197E77.IP) (Ping timeout)
[13:12:41] *** Joins: lenstr_ (lenstr@AF8EB999.6049B16A.85938D85.IP)
[13:12:54] *** Quits: jstevans (Instantbir@moz-4571E922.wireless.umnet.umich.edu) (Ping timeout)
[13:12:58] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[13:14:41] *** Joins: myname (myname@F6BC1CBC.2C5F047.A0197E77.IP)
[13:15:35] *** Quits: canhtak (jeremy@moz-8E705AE1.wl.t.ulaval.ca) (Connection reset by peer)
[13:15:43] *** Joins: aeqwa (aeqwa@moz-CCF51A06.dsl.tropolys.de)
[13:16:06] *** Joins: canhtak (jeremy@moz-8E705AE1.wl.t.ulaval.ca)
[13:19:50] *** Joins: slack1256 (slack@moz-B239C631.baf.movistar.cl)
[13:21:21] <olsonjeffery> SimonSapin: good luck
[13:22:09] *** flaper87|afk is now known as flaper87
[13:23:35] <flaper87> SimonSapin: Will you attend PyConIE as well? 
[13:23:40] <flaper87> olsonjeffery: ping
[13:24:56] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[13:25:00] <slack1256> do we have a rust-paste?
[13:25:35] <flaper87> slack1256: paste.mozilla.org
[13:25:45] <slack1256> yes!, thank you
[13:26:31] <slack1256> Mmm, doesn't exist
[13:26:43] *** Joins: lbergstrom (Adium@moz-6901A223.public.wayport.net)
[13:26:54] <klutzy> http://www.pastebin.mozilla.org/
[13:26:57] *** Joins: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl)
[13:26:59] <flaper87> slack1256: erm, pastebin
[13:27:00] *** Quits: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin_)
[13:27:02] <flaper87> sorry
[13:27:04] <flaper87> http://pastebin.mozilla.org/
[13:27:09] <flaper87> klutzy: +1 :)
[13:27:17] <slack1256> oh, ok, trhank also!
[13:27:29] <olsonjeffery> flaper87: pong
[13:27:42] *** Joins: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl)
[13:28:06] <flaper87> olsonjeffery: hey, so, it was a pretty busy week for me. I'll get to the timer thing now
[13:28:18] <flaper87> the polling patch didn't land for 0.8
[13:28:32] <slack1256> on http://pastebin.mozilla.org/3121001 , why should we use (**self) instead of (*self)
[13:28:39] <olsonjeffery> no biggy
[13:28:57] <flaper87> I thought we were going to let it land if the new one wasn't ready
[13:29:13] <engla> slack1256: self is a  &~T
[13:29:58] <slack1256> oh, so borrowing pointer is another pointer in the structure, I though it was the same pointer (~T) with changed semantics
[13:31:32] *** Joins: jstevans (Instantbir@moz-4571E922.wireless.umnet.umich.edu)
[13:36:27] *** Quits: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net) (Ping timeout)
[13:38:55] <dbaupp> slack1256: btw, gist.github.com offers rust syntax highlighting (fwiw)
[13:41:48] <slack1256> i really should try to learn git...
[13:42:27] <shmax> How do i build libuv with debug symbols on windows?
[13:42:33] <dbaupp> (Gist is just a normal old pastebin.)
[13:42:50] <dbaupp> shmax: does ./configure --enable-debug work?
[13:43:16] <slack1256> oh, great!
[13:43:21] <shmax> dbaupp: nope, not for libuv
[13:43:28] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[13:43:56] <olsonjeffery> flaper87: well if you want to, then I would say take your existing PR and rebase it against the current mozilla/master
[13:44:12] <dbaupp> shmax: possibly worth filing a bug (unless someone jumps in here with the correct answer...)
[13:44:23] *** zz_kimundi is now known as kimundi
[13:45:48] <flaper87> olsonjeffery: I'm working on the new implementation now, I'll update the old one anyway
[13:45:57] <olsonjeffery> sweet
[13:45:59] * flaper87 is studing how SelectInner / Select work in rust
[13:46:02] <flaper87> :D
[13:46:14] <flaper87> seems pretty straightforward
[13:46:24] <olsonjeffery> well if you can knock it out fast and get it ready for review by, say, early monday PST.. it might be able to make it in
[13:46:43] <flaper87> I just need to figure out how to integreate existing implementation with select inner
[13:46:50] <olsonjeffery> i think even just implementing select on timer would be a huge step forward
[13:48:03] <dbaupp> std::select would be fairly useless for timer though: one could only select between several different timers, not between, e.g., a timer and a port. :(
[13:48:05] <olsonjeffery> well both Select and SelectInner has to be impl'd on both file::io::Timer and file::uv::uvio::UvTimer .. because
[13:48:18] <olsonjeffery> because the former inherits from the latter.. the impl for Select is always just impl Select for Foo {}
[13:48:42] *** Joins: lbergstrom1 (Adium@moz-6901A223.public.wayport.net)
[13:49:00] *** Joins: lbergstrom2 (Adium@D6B9EF06.FF448E4A.B459E86F.IP)
[13:49:01] <olsonjeffery> but the impl of SelectInner is just going to defer to the ~RtioTimerObject (should be ~RtioTimer, but i digress) that the file::io::Timer holds as an inner field
[13:49:18] <flaper87> olsonjeffery: yup, I noticed that. Kinda implementing it along the lines of Port* implementations
[13:49:32] *** Quits: lbergstrom1 (Adium@moz-6901A223.public.wayport.net) (Connection reset by peer)
[13:49:34] <olsonjeffery> dbaupp: no.. you can select between anything that impls the Select trait
[13:49:38] <olsonjeffery> that's the point :P
[13:49:40] *** Quits: lbergstrom (Adium@moz-6901A223.public.wayport.net) (Connection reset by peer)
[13:49:51] <olsonjeffery> so you can select between a Port and a Timer and that's how we'd impl recv_timeout()
[13:50:26] <canhtak> hi, #[doc(hidden)] doesn't work with rustdoc_ng. It is impossible to hide something with rustdoc_ng?
[13:50:42] *** Quits: lbergstrom2 (Adium@D6B9EF06.FF448E4A.B459E86F.IP) (Ping timeout)
[13:50:42] <olsonjeffery> flaper87: you need to get comfy with how the uvio operations are handled.. 
[13:50:53] <olsonjeffery> SelectInner for port has some of it
[13:50:56] <dbaupp> olsonjeffery: how? the signature for std::select::select is <A: Select>(&[A]) -> uint, isn't it?
[13:51:08] <dbaupp> so all the selectees have to be the same type?
[13:51:19] <olsonjeffery> that's a good point
[13:51:21] <dbaupp> canhtak: at the moment, yes
[13:51:31] <canhtak> okay, thanks
[13:51:31] <olsonjeffery> dbaupp: i guess ill bring that up w/ brson on monday..
[13:51:32] <shmax> i'm working on #8811 (write_close_ip4), whom should i contact for more details?
[13:51:36] <olsonjeffery> see about making it a trait object
[13:51:41] <olsonjeffery> that'd enable what we want..
[13:52:08] <olsonjeffery> &[~A]
[13:52:20] <dbaupp> or &[&Select] ?
[13:52:21] <olsonjeffery> or even &[&A]
[13:52:23] <olsonjeffery> no
[13:52:33] <olsonjeffery> <A: Select>(&[&A])
[13:52:40] <dbaupp> that's not a trait object
[13:53:16] <olsonjeffery> really. i thought that worked to that effect.
[13:53:22] <dbaupp> that's still got the same problem of requiring the selectees to have the same type, it's just behind a reference.
[13:53:52] <olsonjeffery> whatever. the compiler will tell me things!
[13:54:12] <olsonjeffery> anyways.. i still haven't really had the chance to talk to brson about the state of select.. there're still open tickets saying that select doesn't exist in newrt
[13:54:17] <olsonjeffery> so it'd be nice to sync those two things up
[13:54:26] <engla> not sure what's the best over all.  <A: Select>(&[A]) could allow both, if   &Select implements Select
[13:54:37] <flaper87> olsonjeffery: UvTimer seems pretty simple to me, the watcher as well. It'll need some refactor in order to implement Select on top of it
[13:54:43] *** Quits: valenting (Thunderbir@C6866972.77435D89.FB866788.IP) (Quit: valenting)
[13:56:03] <shmax> i'm working on #8811 (write_close_ip4), whom should i contact for more details? the error appears to be in libuv...
[13:59:39] <dbaupp> shmax: klutzy is an experienced rust-on-windows person (other than that, no idea)
[14:00:09] <klutzy> I'm on debian now ;)
[14:00:27] <dbaupp> klutzy: noooooooo, we need your magic! :P
[14:00:49] <kimundi> dbaupp: I commented on my doc PR
[14:01:30] <SimonSapin> flaper87: yes, Iâ€™ll be at PyCon IE
[14:01:37] <shmax> dbaupp: thanks! klutzy: it seems that uv_write itself returns ECONNABORTED and never invokes the callback, is this the correct behaviour?
[14:02:33] <klutzy> shmax: wrong I think, but I have no idea of spots for now
[14:02:45] *** Quits: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[14:02:55] <dbaupp> kimundi: I saw, both of those explanations seem reasonable
[14:03:12] <klutzy> shmax: just a general note: libuv has two headers (libuv-unix.h and libuv-win.h) and they defines some structures differently
[14:03:49] <kimundi> dbaupp: I mean, all I could think of instead of .../ would be ???/ or <...>/ 
[14:03:51] <klutzy> shmax: and we may define struct only following unix. It breaks windows stuff
[14:03:55] <flaper87> SimonSapin: awesome, me too. Meet you there!
[14:04:07] <dbaupp> kimundi: `<...>/foo.rs` maybe? /me doesn't know
[14:04:17] <klutzy> shmax: e.g. https://github.com/mozilla/rust/commit/3924cb031f0cf476f0a1a85ee21598ec2e60d9fd
[14:04:39] <kimundi> dbaupp: Hm, I rejected it in my head, but it seems to look good written out
[14:05:44] *** Quits: GeneralMaximus (ankur@B180488D.BD412FCE.BE90E62C.IP) (Ping timeout)
[14:05:58] * klutzy reboots to windows
[14:06:11] <shmax> klutzy: yup, i was trying to fix #8815 and realized your commit already fixes all the funs in that issue...i think that issue can be closed now....but #8811 is not be fixed by the structure changes
[14:06:57] <klutzy> shmax: yep. I tried to kill most of #[ignore(cfg(windows))], but they blocked me
[14:08:17] <shmax> klutzy: ha...anyway great job :)
[14:08:29] *** Quits: victorporof (victorporo@D5C23157.DA9DCE7D.79933D60.IP) (Quit: victorporof)
[14:08:31] *** jorendorff_away is now known as jorendorff
[14:09:56] *** Joins: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net)
[14:09:58] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[14:10:49] *** Joins: GeneralMaximus (ankur@CE720DCC.457F5A6C.D5D59AD9.IP)
[14:11:05] <flaper87> could you guys give me a 2secs intro on how Select / SelectInner objects are used by Rust's scheduler? I mean, AFAIU, std::select::select is called with a vector of selectable objects on which it iterates waiting for one of them to be ready. As soon as one of those ports return, it'll return the result of the port with the lowest index
[14:11:37] <flaper87> is there something else I should know about how the scheduler interacts with selectable objs ?
[14:14:42] *** jorendorff is now known as jorendorff_away
[14:15:54] *** Joins: steveh (Mibbit@moz-1770FFAB.lightspeed.ltrkar.sbcglobal.net)
[14:15:55] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[14:15:55] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 144bc5919 to 140716782: 02http://git.io/N3iJvQ
[14:15:55] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[14:15:56] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[14:15:56] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/_G10lg
[14:15:56] <ghrust> 13rust/06auto 14884c1e1 15Huon Wilson: std: move rand.rs to rand/mod.rs.
[14:15:56] <ghrust> 13rust/06auto 14fb923c7 15Huon Wilson: std: merge rand::{Rng,RngUtil} with default methods....
[14:15:57] <ghrust> 13rust/06auto 140951313 15Huon Wilson: Remove the C(++) ISAAC Rng from the old rt....
[14:15:59] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[14:16:35] * dbaupp hopes that he's finally fixed all the little problems
[14:17:10] *** Quits: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net) (Ping timeout)
[14:17:47] <shmax> is this video taken down?  https://air.mozilla.org/intern-presentations-reed/
[14:18:07] <steveh> [Anybody] having trouble with using sum() and product() on iterators, e.g. I tried: range_inclusive(0, 5u8).map(|r| r + 1).sum();
[14:18:14] <steveh> Got error: type `std::iter::Map<,u8,u8,std::iter::RangeInclusive<u8>>` does not implement any method in scope named `sum`
[14:18:36] <engla> you need to import the extension trait I think
[14:19:08] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Ping timeout)
[14:19:10] <engla> it's not in the prelude so it's not imported by default
[14:19:25] <steveh> engla: Oh would that be MultiplicativeIterator?
[14:20:42] *** Joins: maik (maik@moz-C09804C4.dip0.t-ipconnect.de)
[14:20:53] <steveh> or that's for prod, can't remember the one for adding but I'll try it...
[14:21:32] <engla> I can't remember either
[14:21:56] <engla> use std::iter::AdditiveIterator;
[14:22:24] <engla> the problem is things like this:
[14:22:27] <engla> rusti: use std::iter::AdditiveIterator; let v = [1,2,3]; v.iter().sum()
[14:22:27] -rusti- <anon>:7:59: 8:5 error: failed to find an implementation of trait std::ops::Add<&int,&int> for &int
[14:22:27] -rusti- <anon>:7          use std::iter::AdditiveIterator; let v = [1,2,3]; v.iter().sum()
[14:22:28] -rusti- <anon>:8     };
[14:22:28] -rusti- application terminated with error code 101
[14:22:45] <steveh> engla: nevermind, yeah that worked. Thx
[14:24:39] *** Quits: steveh (Mibbit@moz-1770FFAB.lightspeed.ltrkar.sbcglobal.net) (Quit: http://www.mibbit.com ajax IRC Client)
[14:25:46] *** Quits: tefter (tefter@B5D119DC.B856A0A1.73804765.IP) (Client exited)
[14:26:29] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[14:26:54] <engla> there is .fold for general accumulations like that
[14:29:01] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[14:29:19] <kimundi> dbaupp: r? https://github.com/mozilla/rust/pull/9398
[14:29:23] *** Quits: maik (maik@moz-C09804C4.dip0.t-ipconnect.de) (Ping timeout)
[14:31:17] <doomlord_> rustdoc_ng  has been integrated into rust mainline ? so if i've installed the latest rust, 'rustdoc' = rustdoc_ng ?
[14:32:03] <doomlord_> or do i need to compile the source in rustdoc_ng
[14:32:57] <doomlord_> ok i can see its different 
[14:34:55] *** Joins: victorporof (victorporo@216488FF.DD044C58.9B1E38F4.IP)
[14:35:49] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[14:36:50] *** Joins: kertap (kertap@moz-E2C367E7.b-ras3.mvw.galway.eircom.net)
[14:37:48] *** Joins: TheDust (Stijn@moz-8C2076C2.upc-d.chello.nl)
[14:38:01] <cmr> doomlord_: yes it has.
[14:38:08] <cmr> the binary is rustdoc_ng
[14:38:15] <cmr> to run it, `rustdoc_ng html path/to/crate.rs`
[14:38:41] <doomlord_> just wondering if the JSON it spits out has enough info for generating a trait/module graph
[14:38:47] *** Quits: kertap (kertap@moz-E2C367E7.b-ras3.mvw.galway.eircom.net) (Quit: kertap)
[14:39:39] <cmr> Not really, since it doesn't look into function or method bodies, only at their declarations.
[14:41:19] *** Quits: flowsnake (flowsnake@moz-1918C33E.aztw.cable.virginmedia.com) (Connection reset by peer)
[14:42:17] <doomlord_> ok if i continue with 'rustfind' i can get a full call graph - initially what i had in mind was just a simple trait inheritance graph, but showing containing modules
[14:42:26] *** Joins: flowsnake (flowsnake@moz-1918C33E.aztw.cable.virginmedia.com)
[14:42:33] <cmr> ah, the json would have enough for an inheritance graph
[14:42:41] <cmr> also for functions that use the trait in a trait bound
[14:43:10] <doomlord_> http://www.haskell.org/wikiupload/d/df/Typeclassopedia-diagram.png  <<< something like that but also showing modules as graphviz  'clusters'
[14:43:47] <engla> that would be nice to see
[14:43:53] <doomlord_> so imagine having that as an overview and you can click to source/docs
[14:44:00] <engla> not sure if Rust has much interesting traits that inherit, except for the Num stuff
[14:44:03] *** Quits: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin_)
[14:45:18] <doomlord_> num , iterators .. an automated tool would keep it in sync
[14:46:08] *** Quits: bogen (dwight@moz-E33E93D8.tx.res.rr.com) (Ping timeout)
[14:54:14] *** Quits: cdidd (cdidd@moz-7DB57209.broadband.corbina.ru) (Ping timeout)
[14:55:03] *** Joins: valenting (Thunderbir@C6866972.77435D89.FB866788.IP)
[14:56:28] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[14:57:13] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[14:59:01] <cmr> kimundi: Why is it *always you* that breaks my code with renamings :P
[14:59:34] <cmr> the getopts changes are nice though, thank you.
[15:01:50] *** Joins: bogen (dwight@moz-8B4E7E75.dsl.rcsntx.swbell.net)
[15:02:19] *** Joins: cdidd (cdidd@moz-3A421781.broadband.corbina.ru)
[15:02:33] *** Quits: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net) (Ping timeout)
[15:04:56] <bogen> hmmm..... configure: error: unknown CPU type: armv7l
[15:05:08] <cmr> bogen: it's just arm iirc
[15:05:41] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[15:05:44] <bogen> yes, I'm trying to build rust from git on an arm linux install, and it fails with that
[15:05:52] <cmr> yes, arm, not armv71
[15:06:28] <bogen> ok, so I need to force the arch to arm rather than use the system supplied one?
[15:06:29] <kimundi> cmd: haha :)
[15:07:04] <cmr> bogen: yes
[15:08:09] * kimundi wonders how many people would be angry with him if the clone() -> copy() actually went through
[15:08:17] <cmr> at least that's just a simple sed
[15:09:11] * flaper87 thinks copy makes more sense, FWIW
[15:09:12] <kimundi> cmr: Mostly, but apparently we have a few 'fn clone()' definitions in the source that have nothing to do with the Clone trait
[15:09:17] <cmr> ah
[15:10:46] <engla> copy is shorter
[15:11:00] <engla> I really like strcat's change for Option
[15:11:42] <engla> so hopefully that goes through
[15:12:10] *** Joins: jstevans1 (Instantbir@moz-4571E922.wireless.umnet.umich.edu)
[15:12:39] *** Quits: dwrensha (chatzilla@moz-7D01AC63.pitbpa.east.verizon.net) (Ping timeout)
[15:12:55] *** Quits: jstevans (Instantbir@moz-4571E922.wireless.umnet.umich.edu) (Ping timeout)
[15:13:48] <kimundi> yeah, the option change is nice
[15:15:30] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[15:17:06] <flaper87> +1 for the option change
[15:17:14] *** Joins: maik (maik@moz-C09804C4.dip0.t-ipconnect.de)
[15:22:00] <StarLight> what option change?
[15:22:03] * StarLight is late to the party
[15:22:46] <engla> https://github.com/mozilla/rust/issues/9355
[15:22:47] *** Quits: jstevans1 (Instantbir@moz-4571E922.wireless.umnet.umich.edu) (Ping timeout)
[15:22:50] <engla> party responsibly
[15:23:04] <StarLight> thanks, i'll look into it
[15:23:09] *** Joins: hoverbear (andrew@moz-86FCBF4B.gv.shawcable.net)
[15:23:40] *** Quits: barosl (barosl@3DE683B6.E551553C.7544CABF.IP) (Ping timeout)
[15:23:54] *** Joins: barosl (barosl@3DE683B6.E551553C.7544CABF.IP)
[15:25:47] *** Joins: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net)
[15:26:38] <hoverbear> http://i.imgur.com/Sa4051z.jpg
[15:28:36] *** Joins: tefter (tefter@B5D119DC.B856A0A1.73804765.IP)
[15:30:57] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[15:30:57] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/_G10lg
[15:30:57] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[15:33:16] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[15:33:32] *** Quits: StarLight (StarLight@moz-9FE4F83C.dynamic.avangarddsl.ru) (Ping timeout)
[15:34:33] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[15:35:53] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[15:35:55] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[15:36:56] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Quit: WeeChat 0.4.1)
[15:37:03] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[15:37:57] *** Joins: StarLight (StarLight@moz-7B20A13C.dynamic.avangarddsl.ru)
[15:39:06] *** Quits: slack1256 (slack@moz-B239C631.baf.movistar.cl) (Ping timeout)
[15:39:23] *** Joins: gareth0 (gareth0@moz-DC2EC772.dynamic.dsl.as9105.com)
[15:41:19] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[15:42:22] *** Joins: slack1256 (slack@moz-98C93158.baf.movistar.cl)
[15:42:43] *** Joins: josedonizetti (josedonize@moz-CA73D699.cpe.teksavvy.com)
[15:44:07] *** Quits: slack1256 (slack@moz-98C93158.baf.movistar.cl) (Ping timeout)
[15:49:49] *** Quits: miza (miza@moz-908EA8DE.home.otenet.gr) (Input/output error)
[15:50:47] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.1)
[15:53:55] *** Joins: jstevans (Instantbir@moz-4571E922.wireless.umnet.umich.edu)
[15:54:12] *** Yurume_ is now known as Yurume
[15:56:12] *** Joins: saneyuki_ (saneyuki@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[15:59:16] *** Quits: saneyuki_ (saneyuki@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Quit: )
[15:59:18] *** Joins: saneyuki (Tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[16:01:22] *** Quits: maik (maik@moz-C09804C4.dip0.t-ipconnect.de) (Ping timeout)
[16:01:35] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: Leaving)
[16:03:22] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[16:06:03] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[16:10:07] <bogen> What is the type packing unpacking process called in rust? I'd seen it a few months ago, but forgot what it was called. Not dynamic typing, but more like a union where the flow of data types in must the same as the flow of data types out.
[16:10:27] *** Quits: jstevans (Instantbir@moz-4571E922.wireless.umnet.umich.edu) (Ping timeout)
[16:11:01] <kimundi> bogen: Uhm, do yu mean enums?
[16:11:06] <kimundi> you*
[16:12:12] <kimundi> enum Foo { A, B }; enum Bar { C(uint), D{ a: char, b: char } }; enum Baz<T, U> { E(T), F(T), G }
[16:12:45] <bogen> kimundi: yes, thanks, enums is what I was looking at before.
[16:12:45] <kimundi> enum Baz<T, U> { E(T), F(U), G } *
[16:13:25] *** Joins: sruggier (sruggier@7319AA3D.D4245AC4.971E19F6.IP)
[16:13:49] *** Joins: vodik (simon@moz-497C0D30.dsl.bell.ca)
[16:21:22] <sruggier> I've hit the generic destructor error: cannot implement a destructor on a structure with type parameters
[16:21:41] <sruggier> can someone link me to a page with more context on this, if there is one?
[16:24:08] <engla> sruggier: https://github.com/mozilla/rust/issues/6971
[16:24:12] <engla> it seems tricky
[16:26:33] <kimundi> sruggier: The problem with generic structs with construtors is that they can be instanziated with any type, and having an destructor on something that contains &T or @T etc is unsafe, as you can get an dangling pointer in case of cycles or unexpected order of destruction
[16:27:08] *** Quits: Amaranth (travis@moz-F81BB56A.cpe.cableone.net) (Ping timeout)
[16:27:33] <kimundi> If you make sure that the destructor does not access the generic type, you can override that restriction with an attribute to allow an destructor anyway.
[16:27:59] <sruggier> hmm..
[16:28:21] <sruggier> so I can't call a method on the generic type, I guess?
[16:28:42] <kimundi> Afaik no
[16:28:59] *** Joins: Amaranth (travis@moz-F81BB56A.cpe.cableone.net)
[16:29:06] <sruggier> what if I call a method on self, and that method accesses the generic type?
[16:29:14] *** Joins: jstevans (Instantbir@moz-4571E922.wireless.umnet.umich.edu)
[16:29:16] <kimundi> same situation
[16:29:43] <sruggier> I guess I'll avoid RAII in this case then, for now
[16:30:07] <sruggier> I can always add it later, and "execute around" is pretty clean in Rust using closures
[16:30:07] <kimundi> but maybe you can restrict the type parameter to types where this problem doesn't appear, then you could do that
[16:30:25] <kimundi> I'm jsut not sure if we have a useful trait bound that describes that
[16:30:44] <sruggier> types that aren't going to be cyclic? or types that aren't even borrowed pointers?
[16:30:59] <kimundi> yes
[16:31:02] <kimundi> :P
[16:31:11] <kimundi> the latter can be done with a trait bound of 'static
[16:31:19] <sruggier> I think that would work for me, but I wouldn't feel comfortable designing an API that claims to be safe, but isn't statically verifiable as safe
[16:31:25] <kimundi> allows only types with borrowed pointers to 'static memory
[16:32:09] <sruggier> out of curiosity, how would that affect owned pointers? not at all, I guess
[16:32:43] <kimundi> sruggier: Well, there are a lot of corner cases where something can'T be statically verified. That's why we have unsafe blocks, to tell the system "trust me, I know what I'm doing" :)
[16:32:53] <jensnockert> engla, zol: We should meet up for Ã˜rerust or something sometime?
[16:33:18] <sruggier> kimundi: yeah, but what I'm referring to is a "safe" API that, for some type parameters, is actually unsafe
[16:33:27] <kimundi> sruggier: owned pointers should have an deterministic destruction sequence where those issues don'T appear
[16:33:43] <kimundi> of course, only if they don'T contain something like @ themself or so
[16:33:44] <sruggier> I don't want to get into that if there's an obvious, not too onerous workaround.
[16:34:00] <kimundi> sure
[16:34:15] <kimundi> something that's unsafe for some type paramters is al
[16:34:21] <kimundi> alwqays a bad idea
[16:34:32] <engla> jensnockert: sure
[16:34:37] <sruggier> I meant how would the 'static bound affect owned pointers? from how you're describing this, it sounds like they would be admitted to a type parameter bounded by that (as well as managed boxes)
[16:34:38] <kimundi> should be either always safe or always unsafe
[16:35:03] <jensnockert> engla: Do you know if there are any other Rust programmers in the MalmÃ¶ / Lund / Copenhagen area?
[16:35:38] <kimundi> sruggier: A bound of T: 'static would reject the impl on any type that transitively contains an borrowed pointer with a shorter lifetime than 'static.
[16:35:38] <engla> I don't know
[16:35:53] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[16:36:02] <kimundi> rusti: "test"
[16:36:03] -rusti- "test"
[16:36:22] <kimundi> rusti: fn foo<T: 'static>(_: T){}; foo("hello");
[16:36:23] -rusti- ()
[16:36:28] <kimundi> rusti: fn foo<T: 'static>(_: T){}; foo(~"hello");
[16:36:29] -rusti- ()
[16:36:46] <engla> kimundi: but you have to restrict the constructor functions a trait bound on Drop should have no effect (?)
[16:37:12] <kimundi> rusti: fn foo<T: 'static>(_: T){}; let s = ~"hello"; let b: &str = s; foo(b);
[16:37:12] -rusti- <anon>:7:72: 7:75 error: instantiating a type parameter with an incompatible type `&str`, which does not fulfill `'static`
[16:37:12] -rusti- <anon>:7          fn foo<T: 'static>(_: T){}; let s = ~"hello"; let b: &str = s; foo(b);
[16:37:13] -rusti-                                                                                  ^~~
[16:37:13] -rusti- error: aborting due to previous error
[16:37:14] -rusti- application terminated with error code 101
[16:37:44] *** Quits: six600110_ (six600110@moz-2FA48202.neo.res.rr.com) (Connection timed out)
[16:38:05] *** Quits: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP) (Ping timeout)
[16:38:08] <kimundi> engla: Might be. I never written such a code, so I'm not sure how to actually write that
[16:38:15] *** Joins: six600110_ (six600110@moz-2FA48202.neo.res.rr.com)
[16:38:29] <bogen> I know I need to use match to pack and unpack the enum, but I can'
[16:39:04] <kimundi> I gues something like impl<T: 'static> MyType<T> { fn(&self) -> RAIIHandle<T> { ... } }
[16:39:12] <kimundi> bogen: Hm?
[16:39:18] <bogen> t figure out how to refer to the enum "class" : http://www.pastebin.ca/2456820
[16:39:35] <bogen> kimundi: sorry, hit enter too early...
[16:39:37] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[16:39:50] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[16:40:38] *** Joins: sruggier1 (sruggier@7319AA3D.D4245AC4.971E19F6.IP)
[16:40:45] <kimundi> bogen: Ah, enum variants are not scoped under their type
[16:41:00] <kimundi> 'a' => a (50),
[16:41:04] <kimundi> would be correct here
[16:41:18] *** Quits: sruggier (sruggier@7319AA3D.D4245AC4.971E19F6.IP) (Ping timeout)
[16:41:38] <kimundi> an enum variant sits right next to it's type in that regard
[16:41:45] *** Quits: sruggier1 (sruggier@7319AA3D.D4245AC4.971E19F6.IP) (Quit: Leaving.)
[16:41:46] <bogen> how would I put them in a "namespace"  (within the same module)
[16:41:48] *** Joins: sruggier (sruggier@7319AA3D.D4245AC4.971E19F6.IP)
[16:42:07] <kimundi> There was talk about adding an 'enum mod' which would scope them under the type, but we don't have that currently.
[16:42:58] *** Joins: dandy (Dandy@moz-84CC8377.hsd1.co.comcast.net)
[16:43:09] <kimundi> mod myvariant { pub enum myvariant { a(int), b(float), none } }; let x: myvariant::myvariant = myvariant::a(5);
[16:43:24] <dandy> any tips on resolving "can't find crate for `std`" ?
[16:43:53] <kimundi> dandy: Does the error say more?
[16:43:57] <dandy> I read the rustpkg docs but I don't see any .rust folders anywhere. It works when I run it from the stage2 folder after building it
[16:44:07] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[16:44:09] <dandy> it points at fn main(){
[16:44:40] <dandy> I moved my rust executable to somewhere more agreeable with me but now it cant find its crates
[16:45:08] <dandy> I also set the RUST_PATH env var to my rust repository
[16:45:30] <dandy> assuming it would pick up on the /src directory in there, but no luck with that either
[16:45:33] <kimundi> dandy: Hm, no idea where and how it looks up the libraries. You might need to compile it with the -L switch to point it at the libraries
[16:45:57] <dandy> okay, so point it to <stuff>/src/libstd?
[16:46:19] <kimundi> no, at where the compiled libraries are
[16:46:29] <dandy> no idea where that is
[16:47:25] <kimundi> what exactly are you trying to build anyway? If you've installed rust properly, rustpkg should have no problem with locating libstd
[16:47:27] <dandy> and std.dll is sitting right next door to rustc.exe
[16:47:43] <dandy> i buit rust, and I have a bunch of nice things in the stage2 folder
[16:47:46] <kimundi> ah. windows. No idea about that :P
[16:48:09] <dandy> I moved them to my program files, then I added that folder to my path
[16:48:33] <dandy> i can run rustc rust run, etc... but they complain about not knowing where crates are
[16:48:49] <dandy> if I run it from the stage2 folder it has no trouble... so there is something in there somewhere that I need
[16:48:49] <kimundi> dandy: They might not look into path for them
[16:48:56] *** Quits: ziad (ziad@moz-5003F925.members.linode.com) (Ping timeout)
[16:49:54] <kimundi> stage2 folder might work because windows falls back to looking in the cwd for libraries?
[16:50:04] <dandy> I
[16:50:09] <dandy> I can test that...
[16:50:36] *** Quits: rfw (rfw@moz-7D453A5B.rfw.name) (Ping timeout)
[16:50:37] *** Joins: jmgrosen (jmgrosen@moz-AB5DF7A0.sb.sd.cox.net)
[16:51:25] *** Quits: vodik (simon@moz-497C0D30.dsl.bell.ca) (Quit: work)
[16:51:25] <dandy> still did it
[16:51:32] <dandy> something special about that stage2 folder
[16:54:37] *** Joins: dwrensha (chatzilla@moz-7D01AC63.pitbpa.east.verizon.net)
[16:55:54] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[16:55:54] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/FEGd1A
[16:55:54] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[16:55:56] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[16:55:56] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/n53m9Q
[16:55:56] <ghrust> 13rust/06auto 147b24efd 15Alex Crichton: rustdoc: Out with the old, in with the new...
[16:55:56] <ghrust> 13rust/06auto 14f6e28d1 15bors: auto merge of #9402 : alexcrichton/rust/no-ng, r=thestinger...
[16:55:56] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[16:59:23] *** Joins: wonko (Mibbit@moz-5256162B.hsd1.ca.comcast.net)
[17:00:05] <dandy> oh crap, i think its a permissions issue :(
[17:00:26] <dandy> I'm probably the only person on earth that 1) runs windows and 2) does not run 24/7 on an admin account
[17:00:39] *** Quits: tefter (tefter@B5D119DC.B856A0A1.73804765.IP) (Ping timeout)
[17:00:51] *** Joins: tefter (tefter@B5D119DC.B856A0A1.73804765.IP)
[17:01:09] <olsonjeffery> yeah. pretty much.
[17:01:20] <olsonjeffery> step 1) run as admin, step 2) disable UAC
[17:01:23] <olsonjeffery> :(
[17:01:40] <dandy> well the reason I do that is so I can encounter problems like this before my users do
[17:01:52] <olsonjeffery> its more of a build-side issue, tbh
[17:02:21] <dandy> this time
[17:02:26] <olsonjeffery> THIS TIME
[17:02:42] <dandy> problem is that runnin as administrator does not seem to fix it
[17:03:01] <dandy> somehow by being in Program Files seems to piss it off
[17:03:46] <wonko> fair bet
[17:03:57] <wonko> check your acls, and don't write to program files?
[17:04:27] <dandy> where does the rust installer for windows put rust?
[17:04:30] <dandy> not in Program Files?
[17:04:52] <dandy> my acls are default as Win8 sets them
[17:05:17] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[17:05:54] <bogen> dandy: no, you are not the only person frustrated by that. just to get stuff done on a "secure" OS having to "step 1) run as admin, step 2) disable UAC" should not be the answer.... (though it usually is)
[17:06:41] *** Quits: canhtak (jeremy@moz-8E705AE1.wl.t.ulaval.ca) (Quit: canhtak)
[17:06:49] <wonko> it would be lovely if Rust could be included in the cygwin package repo
[17:07:14] *** Joins: jviereck (Adium@moz-D03659.dip0.t-ipconnect.de)
[17:07:19] <engla> erickt: hi! your example with Iterable for option is not consistent with the types, so I'm unsure what to say about it
[17:07:22] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[17:07:35] <dandy> it would be amazing if it just ran native
[17:07:53] <bogen> ok.... I can't find out how to do some basic stuff.... (maybing I'm looking wrong) iterating elements in a vector, and iterating characters in a string
[17:08:17] <kimundi> bogen: YOu'Re using git head?
[17:08:33] <dandy> bogen, I'm not convinced that running as admin makes a difference but I will try UAC next
[17:08:35] <kimundi> (Because that changed since 0.7)
[17:09:20] *** Quits: jmgrosen (jmgrosen@moz-AB5DF7A0.sb.sd.cox.net) (Ping timeout)
[17:09:21] *** Quits: barosl (barosl@3DE683B6.E551553C.7544CABF.IP) (Ping timeout)
[17:09:26] <bogen> yes. also, I used the args from main a few months ago, but that "seems" to have broken. I'm trying os::ars now, but tying to "use os" and "use os::args" results in unresolved imports.
[17:09:38] <bogen> (yes, I'm using git head)
[17:09:46] <Luqman> bogen: use std::os;
[17:09:47] <kimundi> bogen: okay
[17:09:59] <Luqman> bogen: impoorts need to be fully qualified
[17:10:08] *** Joins: jmgrosen (jmgrosen@moz-AB5DF7A0.sb.sd.cox.net)
[17:10:38] *** Quits: jmgrosen (jmgrosen@moz-AB5DF7A0.sb.sd.cox.net) (Quit: jmgrosen)
[17:10:41] *** Joins: jmgrosen (jmgrosen@moz-AB5DF7A0.sb.sd.cox.net)
[17:10:59] <bogen> Luqman: ok, got that fixed.
[17:11:00] <kimundi> what Luqman said. use paths are allways crate relative, and we no longer export modules in the prelude, so to import args() int o the local namespace you can do either "use std::os; ... os::args()" or "use std::os::args; .... args()"
[17:11:19] <kimundi> bogen: So, iterating
[17:11:21] *** Quits: shmax (Mibbit@6722A59D.DD34936D.520CDC98.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[17:11:45] <kimundi> bogen: We have fancy etxernal iterators now, that super optimize and compose
[17:11:56] <bogen> kimundi: ok
[17:12:20] <kimundi> rusti: let x = [1, 2, 3]; for e in x.iter() { printfln!(e); }
[17:12:21] -rusti- &1
[17:12:21] -rusti- &2
[17:12:21] -rusti- &3
[17:12:21] -rusti- ()
[17:12:28] *** Joins: barosl (barosl@3DE683B6.E551553C.7544CABF.IP)
[17:12:35] *** Joins: slack1256 (slack@moz-84917BD2.baf.movistar.cl)
[17:13:52] <kimundi> bogen: You request and iterator object from the thing you want to iterate over with a method (usually iter(), mut_iter() or move_iter()), and then use that in combination with the for syntax and/or iterator  adapters
[17:14:16] <kimundi> rusti: let x = [1, 2, 3]; x.iter().map(|e| *e).to_owned_vec()
[17:14:16] -rusti- ~[1, 2, 3]
[17:14:23] <kimundi> rusti: let x = [1, 2, 3]; x.iter().map(|e| *e + 100).to_owned_vec()
[17:14:24] -rusti- ~[101, 102, 103]
[17:14:42] <kimundi> rusti: let x = [1, 2, 3]; x.iter().map(|e| *e + 100).filter(|e| e % 2 == 0).to_owned_vec()
[17:14:42] -rusti- ~[102]
[17:15:18] <kimundi> rusti: let x = [1, 2, 3]; for e in x.iter().map(|e| *e + 100).filter(|e| e % 2 == 0) { println!("All even: {:s}", e); }
[17:15:19] -rusti- pastebinned 10 lines of output: http://sprunge.us/SJHe
[17:15:46] <kimundi> rusti: let x = [1, 2, 3, 4, 5]; for e in x.iter().map(|e| *e + 100).filter(|e| e % 2 == 0) { println!("Even: {:s}", e.to_str()); }
[17:15:47] -rusti- Even: 102
[17:15:47] -rusti- Even: 104
[17:15:48] -rusti- ()
[17:17:19] *** Joins: maik (maik@moz-C09804C4.dip0.t-ipconnect.de)
[17:18:35] <kimundi> bogen: The Iterator adapters are mostly default methods implemented on Iterator<T>: http://seld.be/rustdoc/master/std/iter/trait.Iterator.html
[17:18:58] <kimundi> (Also, see http://seld.be/rustdoc/master/std/iter/index.html for other iterator related things)
[17:19:03] <bogen> ok thanks. I'm makint some headway
[17:20:34] <dandy> WTF!
[17:20:39] <dandy> I figured it out, not a permissions issue
[17:20:43] <dandy> the folder MUST be named bin
[17:20:48] <kimundi> hehe
[17:21:04] <dandy> it does not matter where it is or what is around it but the folder containing rustc.exe must be named bin
[17:21:04] <bogen> kimundi: is there any way to cleanly skip the first element in the vector?
[17:21:32] <bogen> (without putting in some hack check for it on every pass)
[17:21:36] <dandy> C:\apple\orange\grape\rustc.exe: nope C:\apple\orange\bin\rustc.exe: yup
[17:21:40] <kimundi> bogen: .skip(1)
[17:21:52] <kimundi> rusti: let x = [1, 2, 3, 4, 5]; for e in x.iter().map(|e| *e + 100).filter(|e| e % 2 == 0).skip(1) { println!("Even: {:s}", e.to_str()); }
[17:21:53] -rusti- Even: 104
[17:21:53] -rusti- ()
[17:22:05] <dandy> I'm guessing that is ... not a bug though?
[17:22:19] <kimundi> dandy: No idea
[17:22:19] *** Quits: Amaranth (travis@moz-F81BB56A.cpe.cableone.net) (Ping timeout)
[17:24:37] <maik> when I am in my own module I have to write my "imports" like this ::std::ptr::sth can I use the "use" keyword to avoid adding the :: every time?
[17:25:03] <kimundi> maik right
[17:25:22] <kimundi> use std::ptr::sth; .... sth()
[17:25:50] <kimundi> maik: In fact, 'use' does what we call an import
[17:26:14] <kimundi> ::std::ptr::sth does not import anything, it just is an global path to the item
[17:26:39] <maik> kimundi, okay thanks then I have to do some refactoring
[17:30:56] *** Joins: shmax (Mibbit@C4BA6A3A.E7519FAC.520CDC98.IP)
[17:31:43] <shmax> Does anyone have a mirror of this talk? https://air.mozilla.org/intern-presentations-reed/ It doesn't play for me
[17:32:19] <engla> bogen: if not an iterator, a slice?
[17:35:30] <bogen> engla: yeah, a slice may work. let me chew on this iterator stuff for a while and get my head wrapped around it. I'm going through and trying kimundi's examples.
[17:36:04] <kimundi> rusti: let v = [1,2,3]; v.slice_from(1).to_owned()
[17:36:04] -rusti- ~[2, 3]
[17:36:17] *** Joins: SteveMcQwark (stevemcqwa@moz-7CFCF343.cpe.net.cable.rogers.com)
[17:36:23] *** Quits: lenstr_ (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[17:36:37] <kimundi> rusti: let v = [1,2,3]; printfln!(v.slice_from(1))
[17:36:37] -rusti- &[2, 3]
[17:36:37] -rusti- ()
[17:36:52] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[17:37:15] <maik> puh
[17:37:29] *** jorendorff_away is now known as jorendorff
[17:37:30] <maik> does anyone know how I would wrap this in rust? https://gist.github.com/MaikKlein/6662095
[17:37:53] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[17:37:55] <SiegeLord> maik: A whole bunch of extern "C" fn's
[17:38:16] <strcat> acrichto: I tried to snapshot twice, but it's deadlocking or something
[17:38:52] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[17:39:30] <acrichto> strcat: hmm, it appears the test that the scheduler doesn't starve is indeed starving
[17:39:38] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[17:39:40] <acrichto> brson added that recently
[17:39:57] <strcat> the test?
[17:40:01] <acrichto> yeah
[17:40:08] <acrichto> c767643f
[17:40:11] <strcat> it could be because valgrind serializes, I guess
[17:40:13] <maik> hm
[17:40:20] <strcat> but really need a snapshot so 0.8 can be done
[17:40:25] <strcat> maybe it makes sense to disable the test?
[17:40:35] <acrichto> we're in no worse a spot than we were before 
[17:40:56] <maik> I don't even know how to read " void * (ENET_CALLBACK * malloc) (size_t size);" 
[17:41:05] <acrichto> strcat: if you ignore it be sure to cc brson
[17:42:13] <wonko> maik: there's a rust bindings generator you can use that will write the rust extern code for you
[17:42:48] <maik> maybe sth like &fn(ENET_CALLBACK*)-> size_t)?
[17:42:50] <wonko> (#2124, https://github.com/crabtw/rust-bindgen)
[17:43:19] <maik> wonko, yeah I am using it right now. But it fails to convert the file, so I have to do it manually
[17:43:25] <SiegeLord> maik: It's extern "C" &fn(size_t) -> *c_void
[17:43:26] <wonko> ahh d'oh
[17:43:33] <wonko> what is enet_callback defined as?
[17:43:34] <SiegeLord> ENET_CALLBACK is likely nothing
[17:43:35] <engla> maik: no, you need to check the definition of ENET_CALLBACK too
[17:43:40] <wonko> stdcall / cdecl, or nothing?
[17:43:43] *** Quits: Tad (Tom@moz-C8B2B6F7.navalrp.co.uk) (Quit: Offline)
[17:43:54] *** Quits: dandy (Dandy@moz-84CC8377.hsd1.co.comcast.net) (Quit: Leaving)
[17:44:13] *** Quits: jstevans (Instantbir@moz-4571E922.wireless.umnet.umich.edu) (Quit: Instantbird 1.4 -- http://www.instantbird.com)
[17:45:15] *** Joins: Tad (Tom@moz-C8B2B6F7.navalrp.co.uk)
[17:46:34] *** Joins: HollyRain (HollyRain@moz-50A83091.dyn.user.ono.com)
[17:46:54] <SiegeLord> I'd pass the header through gcc -E first just to be sure, but I'm looking at it in the header, and it happens to be nothing on Unix and __cdecl on Windows
[17:47:27] <strcat> acrichto: ah I can do better than xfail
[17:48:36] <acrichto> strcat: how so?
[17:49:37] <strcat> acrichto: https://github.com/mozilla/rust/pull/9408
[17:49:54] <acrichto> strcat: can you put a FIXME there?
[17:50:02] <acrichto> with that r=me
[17:50:17] <acrichto> or rather don't close 9407
[17:50:30] <strcat> acrichto: well I don't know if it's fixable
[17:50:32] <acrichto> b/c this should be investigated at least
[17:50:37] <maik> okay I really should read a c primer 
[17:50:45] <strcat> acrichto: valgrind is single-threaded
[17:50:50] <strcat> it serializes
[17:50:55] <acrichto> but we're explicitly asking to run in multiple threads
[17:51:14] <acrichto> it's worth looking into at least
[17:51:16] <acrichto> to make sure
[17:51:25] <acrichto> I'm perfectly ok with the fix for now though
[17:51:51] *** Quits: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com) (Ping timeout)
[17:52:54] <strcat> acrichto: there
[17:53:28] <acrichto> r+
[17:54:30] <strcat> 5 days since the last successful auto-build for my repo ;[
[17:55:02] <acrichto> :(
[17:55:07] *** Quits: HollyRain (HollyRain@moz-50A83091.dyn.user.ono.com) (Quit: bye, bye)
[17:55:18] <acrichto> a snapshot would fix that though, right?
[17:55:37] *** Joins: SteveMcQwark_ (steven099@moz-7CFCF343.cpe.net.cable.rogers.com)
[17:57:40] *** Joins: lenstr_ (lenstr@AF8EB999.6049B16A.85938D85.IP)
[17:58:03] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[17:58:17] *** Quits: maik (maik@moz-C09804C4.dip0.t-ipconnect.de) (Ping timeout)
[17:58:38] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[17:59:00] *** Quits: SteveMcQwark (stevemcqwa@moz-7CFCF343.cpe.net.cable.rogers.com) (Quit: SteveMcQwark)
[17:59:00] *** SteveMcQwark_ is now known as SteveMcQwark
[17:59:36] *** Joins: canhtak (jeremy@moz-8E705AE1.wl.t.ulaval.ca)
[18:00:02] *** Quits: canhtak (jeremy@moz-8E705AE1.wl.t.ulaval.ca) (Quit: canhtak)
[18:00:11] *** Joins: canhtak (jeremy@moz-8E705AE1.wl.t.ulaval.ca)
[18:02:12] *** Joins: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com)
[18:02:15] <wonko> what does borrowck stand for?
[18:03:21] <jensnockert> Borrow Check
[18:03:28] <benh> borrow-checker, the thing that makes sure that your & pointers don't point to garbage
[18:03:38] <benh> and otherwise behave nicely
[18:04:31] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[18:04:31] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[18:05:21] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[18:06:06] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[18:06:06] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/n53m9Q
[18:06:06] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[18:06:14] *** Joins: Amaranth (travis@moz-F81BB56A.cpe.cableone.net)
[18:06:39] <bogen> kimundi and engla: thanks, I got it figured out in such a way that it does not confuse me any more. Both your input helped a lot.
[18:06:49] <bogen> (iterating vectors and strings)
[18:07:34] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[18:09:44] <wonko> benh, jensnockert thanks!
[18:09:53] *** Quits: sebcrozet (sebcrozet@moz-6DA639AF.w80-13.abo.wanadoo.fr) (Ping timeout)
[18:10:54] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[18:10:54] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/f1qRCw
[18:10:54] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[18:10:56] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[18:10:56] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/Hn6cCg
[18:10:56] <ghrust> 13rust/06auto 1411a8b3d 15Daniel Micay: disable scheduler starvation test on valgrind
[18:10:56] <ghrust> 13rust/06auto 14be5db48 15bors: auto merge of #9408 : thestinger/rust/valgrind, r=alexcrichton
[18:10:56] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[18:11:27] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[18:11:27] <ghrust> 01[13rust01] 15alexcrichton merged 06auto into 06snap-stage3: 02http://git.io/IDulYQ
[18:11:27] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[18:11:41] <acrichto> strcat: triggered a snapshot build
[18:11:56] *** Joins: aaron (aaron@moz-EF0BE0C8.hsd1.mn.comcast.net)
[18:17:23] <jensnockert> wonko: You're welcome!
[18:19:18] *** Joins: sebcrozet (sebcrozet@moz-87D51607.w80-13.abo.wanadoo.fr)
[18:21:30] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[18:22:58] *** Joins: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP)
[18:24:34] <aaron> Question for
[18:26:26] *** Joins: HollyRain (HollyRain@moz-50A83091.dyn.user.ono.com)
[18:26:39] <aaron> Question for anyone interested. I've set-up to_lower and to_upper methods for unicode strings and chars. It doesn't handle locale differences though (ie Turkish i does not map to I)... is this best-effort default the way we want to go?
[18:27:18] *** Quits: slack1256 (slack@moz-84917BD2.baf.movistar.cl) (Quit: Konversation terminated!)
[18:28:23] <HollyRain> how to get the function names done at running a command? I need to wrap those C funtions in Rust; I'm not sure if it can be done with lsof or it was tool for such task
[18:28:47] <HollyRain> s/it was tool/it was other tool
[18:29:47] *** Quits: six600110_ (six600110@moz-2FA48202.neo.res.rr.com) (Connection timed out)
[18:29:57] <kimundi> aaron: If you don't get answers right now, you can always just make an an PR and waiting for comments there. Or bring it to the mailing list.
[18:30:22] *** Joins: six600110_ (six600110@moz-2FA48202.neo.res.rr.com)
[18:30:35] <strcat> aaron: it should use a locale
[18:31:30] <aaron> kimundi: will do
[18:31:41] <HollyRain> it was strace
[18:31:54] <strcat> should probably take the locale as a parameter and then have a wrapper using the set locale
[18:33:30] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[18:33:41] <aaron> strcat: this does make the code much more complex, and require separate tables for every locale (or at least the ones that differ...)
[18:34:13] <strcat> is it well-defined without locale handling?
[18:34:19] <strcat> afaik it's not
[18:34:32] <strcat> unless you're assuming en_US, which we can't do
[18:34:34] <engla> isn't turkish the only locale that matters?
[18:34:38] <kimundi> unicode does define/recommend an default best-effort case folding afaik
[18:34:41] <strcat> engla: no
[18:35:06] <strcat> turkish is special only because it changes the case folding of ascii characters, and that's all people seem to care about...
[18:35:16] <engla> I thought it was the only locale that had a differing upper/lower mapping
[18:35:25] *** Joins: ChemicalHarm (Mibbit@moz-A9F37238.hsd1.md.comcast.net)
[18:35:28] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Client exited)
[18:35:47] <engla> strcat: most languages are served by the default case mapping, that comes down to the character, not the language
[18:37:00] <engla> http://www.unicode.org/Public/UNIDATA/CaseFolding.txt
[18:37:17] <aaron> strcat: kimundi is right, unicode defines a default
[18:37:25] <engla> turkic languages is the only exception
[18:37:30] <strcat> ah
[18:37:38] <strcat> as long as it's well-defined
[18:37:58] *** Quits: busylizzy (lisa@85228838.12D0DC84.211374C4.IP) (Ping timeout)
[18:38:12] <aaron> turkic does seem to be the only exception, do we want to add the complexity to support this one language?
[18:38:18] *** Joins: busylizzy (lisa@85228838.12D0DC84.211374C4.IP)
[18:38:38] *** Quits: six600110_ (six600110@moz-2FA48202.neo.res.rr.com) (Quit: Ex-Chat)
[18:39:16] <strcat> family of languages?
[18:39:35] <ChemicalHarm> Does anyone know if it's worth filing an issue about the ability to use Option with ~fns?  I know there's going to be a big overhaul of closures sometime in the near future...
[18:39:43] <aaron> true, my bad, family of languages
[18:39:45] <ChemicalHarm> rusti: let foo:Option<~fn()> = Some::<~fn()>(|| { });
[18:39:47] -rusti- <anon>:7:13: 7:16 warning: unused variable: `foo` [-W unused-variable (default)]
[18:39:47] -rusti- <anon>:7          let foo:Option<~fn()> = Some::<~fn()>(|| { });
[18:39:47] -rusti-                       ^~~
[18:39:47] -rusti- ()
[18:40:23] <ChemicalHarm> that works...but this doesn't:
[18:40:37] <ChemicalHarm> rusti: let foo: Option<~fn()> = Some(|| { });
[18:40:38] -rusti- pastebinned 5 lines of output: http://sprunge.us/PLCE
[18:41:15] <ChemicalHarm> the function inside Some is assumed to be a &fn instead of a ~fn and then it complains about a type mismatch
[18:41:22] <aaron> it looks like its "tr" and "az" that differ
[18:42:06] <ChemicalHarm> it's annoying if the function actually has a bunch of parameters and a return type--you have to restate the whole type of the function
[18:42:42] <kimundi> ChemicalHarm: type inference is not (yet) smart enough to cause an autoborrow in those cases.
[18:43:26] <kimundi> aaron: There shouldn't be any exceptions to any language, even if it's literally just one that complicates the situation
[18:43:54] <ChemicalHarm> kimundi: Thanks.. But if i'm not mistaken, it's not an autoborrow that I'm looking for--it's for it to infer that the || {} means a ~fn rather than a &fn.  Or does that constitute an autoborrow?
[18:44:19] <ChemicalHarm> In any case, my question is whether it's worth raising as an issue on github, or if the future closure reform will make it a moot point
[18:44:44] <kimundi> ChemicalHarm: Ah, right that'S not an borrow, thats infering the || ... syntax as an ~fn. That seems like an plain inference bug/limitation then
[18:45:10] <kimundi> ChemicalHarm: It's always worth raising issues on github. :)
[18:45:12] <engla> ChemicalHarm: putting the type with the Some::<> should be enough
[18:46:01] <aaron> kimundi: ok, so, should it do locale checking by default, or have a separate `to_lower_locale()` or something of that nature
[18:46:21] <ChemicalHarm> all righty then.  Yes, putting the type in makes it work, but that's really irritating if it's not just ~fn() but a bunch of parameters and a return type.  I'll put it on github.  Thanks.
[18:46:23] <kimundi> ChemicalHarm: What matters is that the bugs/limitations get documented. If it means that they get closed shortly afterwards because of language changes, then so be it.
[18:46:42] <ChemicalHarm> kimundi: gotcha.  Makes sense.
[18:46:59] *** Quits: sruggier (sruggier@7319AA3D.D4245AC4.971E19F6.IP) (Quit: Leaving.)
[18:47:06] <kimundi> aaron: Probably to_lower(Locale), with to_lower_default using the Default one
[18:47:56] <kimundi> aaron: In fact, you could just implement Default for Locale, and have the latter one be literally fn to_lower_default() { Default::<Locale>::Default() } :P
[18:48:17] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[18:48:42] <kimundi> err, fn to_lower_default(&self) { sefl.to_lower(Default::<Locale>::Default()) }
[18:48:54] <kimundi> bah, whatever
[18:49:24] *** Joins: ziad (ziad@moz-5003F925.members.linode.com)
[18:49:34] *** Joins: Kris (Kris@moz-2895EF2F.access.telenet.be)
[18:50:07] <kimundi> Anyway, make the supply locale one the shorter name, and the default one longer. People should be guided to the most correct one.
[18:50:32] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[18:50:35] <engla> but there is no locale support yet
[18:50:47] <kimundi> That would need to get added of course
[18:50:59] *** Joins: rfw (rfw@moz-7D453A5B.rfw.name)
[18:50:59] <aaron> kimundi: sounds good.
[18:51:32] <kimundi> Could just add an fn to_lower_default() one for now, with a fixme to add an fn to_lower with support for other locales than the default one.
[18:51:57] <kimundi> Though I think it's much more desirable to just directly add local support somehow :P
[18:53:07] <kimundi> Sigh... I'd have a few opinion now about how to best support that, but it would have the same issues as the encoding api...
[18:53:34] <aaron> kimundi: I mostly have the to_lower_default(), it's just a rename...
[18:54:00] <kimundi> aaron: Sure, just do that one for now. :)
[18:54:17] *** Joins: Houm (Houm@moz-25669AA8.fbx.proxad.net)
[18:54:53] <aaron> kimundi: local support seems like it could be a point of contention, and I'll leave it for a separate issue...
[18:55:55] <engla> the turkic case should be easy, it's just the dotted I
[18:56:29] *** Quits: TheDust (Stijn@moz-8C2076C2.upc-d.chello.nl) (Quit: Leaving)
[18:56:34] *** Joins: TheDust (Stijn@moz-8C2076C2.upc-d.chello.nl)
[18:59:24] *** Joins: Shaladdle (Shaladdle@moz-424BC304.hsd1.pa.comcast.net)
[18:59:40] *** Quits: HollyRain (HollyRain@moz-50A83091.dyn.user.ono.com) (Quit: bye, bye)
[18:59:41] *** Joins: lkuper_ (lkuper@moz-6901A223.public.wayport.net)
[19:01:12] <Kris> What's up?
[19:01:47] <aaron> engla: true there is only a couple of letters, but there is still the choice of which to use...
[19:02:14] *** Quits: Kris (Kris@moz-2895EF2F.access.telenet.be) (Quit:  HydraIRC -> http://www.hydrairc.com <- Like it?  Visit #hydrairc on EFNet)
[19:02:19] <engla> yes
[19:05:49] *** jorendorff is now known as jorendorff_away
[19:08:08] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Ping timeout)
[19:10:26] <kimundi> strcat: enumerate doesn't implement DoubleEndedIterator, right?
[19:10:56] <engla> kimundi: it does, for certain iterators that also implement ExactSize
[19:11:06] <engla> that's my intricate invention
[19:11:27] <kimundi> ah, so I can have an enumerated DoubleEndedIterator over an vector? yay!
[19:11:39] *** Quits: shmax (Mibbit@C4BA6A3A.E7519FAC.520CDC98.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[19:11:59] <engla> rusti: let v = [1,2,3];  v.iter().map(|&x| x).enumerate().invert().to_owned_vec()
[19:11:59] -rusti- ~[(2u, 3), (1u, 2), (0u, 1)]
[19:12:28] <engla> yes. I'm not sure what's the best API design there
[19:12:57] <engla> I mean once you involve .invert() you have to think about what does the indices in say .enumerate() or .rposition() or .position() mean
[19:13:39] <myname> what the fuck @ .map(|&x|x)?
[19:13:42] <engla> rusti: let v = [1,2,3];  v.iter().map(|&x| x).invert().enumerate().to_owned_vec()
[19:13:43] -rusti- ~[(0u, 3), (1u, 2), (2u, 1)]
[19:13:58] <engla> myname: it's the same as .map(|x| *x)
[19:14:08] <engla> so dereference each element of the VecIterator
[19:14:08] <myname> engla: which does?
[19:14:13] <myname> ah
[19:17:45] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[19:19:07] *** Joins: jensnock_ (jensnocker@moz-C5F27039.cust.bredband2.com)
[19:19:27] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Ping timeout)
[19:28:55] *** Joins: dandy (Dandy@moz-84CC8377.hsd1.co.comcast.net)
[19:29:07] *** Quits: saneyuki (Tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[19:35:47] *** Quits: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[19:36:17] *** Joins: ceninan (ceninan@moz-6BD43586.a370.priv.bahnhof.se)
[19:39:07] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.1)
[19:39:14] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[19:40:54] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[19:40:54] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/Hn6cCg
[19:40:54] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[19:42:52] *** Joins: Diamond (dick@moz-FEA87A60.ks.ks.cox.net)
[19:43:04] *** Joins: CurlyBrace (Mibbit@1CF724BC.80BB6BFD.DDE5D3F6.IP)
[19:43:40] <CurlyBrace> Hello!
[19:44:48] *** Joins: Curly-Brace (Mibbit@1CF724BC.80BB6BFD.DDE5D3F6.IP)
[19:44:52] <kimundi> hi!:)
[19:45:32] <CurlyBrace> This the Rust dev chat?
[19:45:39] *** Quits: Curly-Brace (Mibbit@1CF724BC.80BB6BFD.DDE5D3F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[19:45:42] *** Joins: maik (maik@moz-85739CD7.dip0.t-ipconnect.de)
[19:45:46] <kimundi> yes
[19:45:53] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[19:45:53] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/zuTygQ
[19:45:53] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[19:45:54] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[19:45:54] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/jWAxGg
[19:45:54] <ghrust> 13rust/06auto 142ab278f 15Birunthan Mohanathas: Reserve the `alignof`, `offsetof`, and `sizeof` keywords...
[19:45:54] <ghrust> 13rust/06auto 14cd2da7d 15bors: auto merge of #9389 : poiru/rust/issue-9333, r=alexcrichton...
[19:45:54] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[19:45:55] <CurlyBrace> Great, thanks for the info
[19:46:32] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[19:48:06] <engla> NG docs are live now! http://static.rust-lang.org/doc/master/std/index.html
[19:48:09] <engla> nice
[19:48:24] <CurlyBrace> NG=?
[19:48:39] <engla> the new rustdoc was called rustdoc_ng
[19:48:47] <CurlyBrace> ah, awesome
[19:48:56] <CurlyBrace> the lack of docs was making learning tricky
[19:48:58] <CurlyBrace> great to see more
[19:48:59] <kimundi> engla: woho!
[19:49:32] <engla> the docs are a bit better now. The actual text and examples can be so much better of course
[19:50:33] <maik> does anyone know a concise guide for C? So that I can learn the most important language constructs in a few hours? 
[19:50:37] <flaper87> acrichto: re llvm commit update, is it already fixed in master? Should I just revert that rebase? https://github.com/mozilla/rust/pull/9194
[19:51:56] *** Joins: orshem (orshem@F0A9EA9.588A166C.E3D28531.IP)
[19:52:38] *** Joins: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP)
[19:54:25] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[19:54:44] *** Quits: jviereck (Adium@moz-D03659.dip0.t-ipconnect.de) (Quit: Leaving.)
[19:54:48] *** Joins: waddlesplash2 (Mibbit@moz-247EEEFB.res-cmts.mtp2.ptd.net)
[19:55:26] *** chat is now known as Zuchto
[19:56:49] <Zuchto> How come branches in match expressions need to return nil?
[19:57:07] <cmr> Zuchto: they don't
[19:57:12] <cmr> they just all need to return the same type.
[19:57:31] <Zuchto> hmm, I must be missinterpreting something else then
[19:57:46] <engla> one of your branches is returning nil already then
[19:57:50] <waddlesplash2> Any channel admins around?
[19:58:53] <Zuchto> thanks for clarifying engla and cmr
[19:59:50] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:00:18] *** Parts: waddlesplash2 (Mibbit@moz-247EEEFB.res-cmts.mtp2.ptd.net) ()
[20:01:09] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:01:15] <strcat> acrichto: it failed again
[20:01:25] *** Joins: tdc (santegoeds@moz-ADD1F5DF.range86-135.btcentralplus.com)
[20:02:26] <Diamond> Is there a default cfg to query the arch at compile time?
[20:02:30] *** Joins: jez0990 (quassel@moz-3BA8545E.kimsufi.com)
[20:04:24] *** Joins: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net)
[20:04:55] *** Joins: bernard (Mibbit@moz-5AF9AA47.hsd1.va.comcast.net)
[20:05:43] *** Quits: TheDust (Stijn@moz-8C2076C2.upc-d.chello.nl) (Quit: Leaving)
[20:06:19] <Earnestly> (I wish /doc/ didnâ€™t use inconsolata)
[20:06:28] <Earnestly> (easily changed, so no worries)
[20:07:08] <bernard> So I'm trying to use the process_output method in std::run. However, I was wondering how do I get the output of the file? It says that it outputs it as a stdout, but how do I convert that to text essentially?
[20:09:05] <gareth0> use str::from_utf8 to turn the ~[u8] into a str, bernard 
[20:09:18] <gareth0> assuming you are using the latest master
[20:12:10] <bernard> I'm using 0.7 gareth0, is that the latest master?
[20:12:37] <kimundi> no
[20:12:45] <myname> not even close
[20:12:45] <kimundi> 0.7 is 3 months old
[20:13:04] <bernard> For my class we're supposed to use 0.7, so is there a way to do it in 0.7?
[20:13:33] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[20:13:33] <kimundi> Ah, you're one of the OS class, okay
[20:13:35] <myname> oh, i'm so jealous
[20:13:43] <myname> i'd love to have classes with rust
[20:14:44] <CurlyBrace> really?
[20:14:45] <bernard> Yeah kimundi, one of the many
[20:15:06] <CurlyBrace> I'd like to not have my intro to rust class on one of the hardest courses...
[20:15:32] <doomlord_> hehe i missread that. classes as in lessons. i was about to start an OOP rant.
[20:15:39] <doomlord_> (anti oop rant)
[20:15:40] <kimundi> haha
[20:15:42] <orshem> hello rusties -- how can i time a function from within rust?
[20:15:44] <myname> well okay, OS is one of our easy classes here
[20:15:45] <cmr> bernard: In 0.7 it's std::str::from_bytes
[20:16:25] *** Quits: aaron (aaron@moz-EF0BE0C8.hsd1.mn.comcast.net) (Ping timeout)
[20:19:20] <bernard> thanks cmt, I'll try it out
[20:22:56] *** Joins: mib_6iwb1h (Mibbit@D10393B7.A9DA0237.DDE5D3F6.IP)
[20:23:36] *** Quits: jensnock_ (jensnocker@moz-C5F27039.cust.bredband2.com) (Connection reset by peer)
[20:23:55] *** Quits: ceninan (ceninan@moz-6BD43586.a370.priv.bahnhof.se) (Ping timeout)
[20:25:19] *** Joins: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com)
[20:25:58] *** Quits: mib_6iwb1h (Mibbit@D10393B7.A9DA0237.DDE5D3F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[20:26:14] *** Joins: saneyuki (Tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[20:26:38] *** Joins: Student (chatzilla@D10393B7.A9DA0237.DDE5D3F6.IP)
[20:26:44] *** Joins: jensnock_ (jensnocker@moz-8BE55278.customer.t3.se)
[20:27:21] *** Quits: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com) (Ping timeout)
[20:27:59] <dwrensha> I'm having some trouble with lifetime parameters inside of type bounds.
[20:28:09] <dwrensha> Could someone please take a look at this: https://gist.github.com/dwrensha/ff26a9b373a01c0444ad ?
[20:28:52] *** Joins: tikue_ (tkuehn@moz-424BC304.hsd1.pa.comcast.net)
[20:28:57] <cmr> dwrensha: on line 16 you don't want to be using 'self
[20:29:14] <cmr> You want to have fn both<'a, T: HasVec<'a>>(...)
[20:29:23] *** Quits: tdc (santegoeds@moz-ADD1F5DF.range86-135.btcentralplus.com) (Ping timeout)
[20:29:32] *** Quits: lenstr_ (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[20:29:48] <dwrensha>     fn both<'a, T : HasVec<'a>>(&'a self, t : T) -> (&'a [u8], &'a [u8]) {
[20:29:51] <dwrensha> does not work
[20:29:54] <engla> that's unsupported yeah
[20:29:58] <dwrensha> error: Illegal lifetime 'a: only 'self is allowed as part of a type declaration
[20:30:13] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[20:30:42] <kimundi> engla: wait, what's unsupported there?
[20:30:44] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[20:31:14] * kimundi thinks that signature is valid
[20:31:31] <engla> T: HasVec<'r>  only supports 'self as region
[20:31:45] <engla> so it can not be the 'a parameter
[20:31:56] <kimundi> hu
[20:32:07] <dwrensha> but why does it say that self must be declared?
[20:32:13] <engla> I don't know this so well, but if I try anything funky with 'self I find ICEs everywhere
[20:32:21] <dwrensha> It seems to me that it *is* declared.
[20:32:26] <dwrensha> on line 13
[20:32:39] *** Joins: indirect_ (indirect@moz-49D42D15.c.ircrelay.com)
[20:33:14] <engla> put the T parameter on the impl clause instead
[20:33:27] <engla> not sure if that works but
[20:33:28] <dwrensha> I have a fix (I think) for issue 7331, but when I try to use it on something nontrivial, I run into the problem above.
[20:33:49] *** Quits: Student (chatzilla@D10393B7.A9DA0237.DDE5D3F6.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 21.0/20130511120803])
[20:34:44] <dwrensha> engla: ah, that compiles
[20:35:26] *** Joins: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net)
[20:36:18] *** Quits: victorporof (victorporo@216488FF.DD044C58.9B1E38F4.IP) (Quit: victorporof)
[20:36:41] *** Joins: devin909 (Mibbit@72C4A154.117F92C2.B7830B68.IP)
[20:37:04] *** Quits: indirect (indirect_m@moz-22FDA25B.hsd1.ca.comcast.net) (Quit: ZNC - http://znc.in)
[20:37:04] *** indirect_ is now known as indirect
[20:37:22] <myname> 7331 is kinda anti-leet
[20:37:56] <dwrensha> what does "anti-leet" mean?
[20:38:12] <Peng> teel
[20:40:07] *** Quits: bernard (Mibbit@moz-5AF9AA47.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[20:40:12] *** Joins: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl)
[20:41:14] *** Quits: orshem (orshem@F0A9EA9.588A166C.E3D28531.IP) (Quit: Leaving)
[20:41:44] *** Joins: jasdev (Mibbit@24D8B7DE.EEDD3B02.DDE5D3F6.IP)
[20:42:52] <jasdev> i'm trying to catch a ctrl + c event, any tips on how to approach this?
[20:43:31] *** Joins: bernard (Mibbit@moz-5AF9AA47.hsd1.va.comcast.net)
[20:43:40] *** Quits: maik (maik@moz-85739CD7.dip0.t-ipconnect.de) (Ping timeout)
[20:44:47] <cmr> jasdev: signal handling is an open problem.
[20:45:20] *** Joins: Guest (textual@moz-4C5426D6.hsd1.sc.comcast.net)
[20:46:03] <jasdev> cmr hmm any possible workarounds or modules I could look into?
[20:46:20] <jensnock_> jasdev: You could probably link in a teensy bit of C that handles the interrupt?
[20:46:42] <cmr> jasdev: You could try calling sigaction yourself.
[20:46:59] <cmr> jasdev: no one has tried it to my knowledge, and signal handlers do weird things to the stack.
[20:47:12] <cmr> libuv has a signal api but it's also of unknown quality, and has no bindings yet.
[20:47:53] <bjz> jasdev: yay, a project for you!
[20:47:56] <bjz> ^_^
[20:48:03] <jasdev> LOL
[20:48:06] <jasdev> GG
[20:48:21] <jasdev> we're trying to do this in our OS assignment
[20:48:31] <jasdev> has a few of us banging our heads on the wall
[20:48:57] * jensnock_ hugs jasdev.
[20:49:19] <cmr> Like I said, open problem.
[20:49:21] <bjz> sorry :(
[20:49:28] <cmr> If one of you figures it out, write a blog post, you'll be famous :P
[20:49:37] *** Joins: ferdinand (Mibbit@moz-4AB4B66F.range86-144.btcentralplus.com)
[20:50:00] <jensnock_> But you should be able to call sigaction yourself.
[20:50:11] <jasdev> gotcha, I'll give that a go
[20:50:16] <jasdev> thanks everyone!
[20:50:26] <jensnock_> Poke us if you have issues!
[20:50:57] *** Joins: wminor (wminor@moz-3CF7AB0B.org)
[20:50:58] <jensnock_> At some point, https://github.com/jensnockert/dueboot/blob/master/arduino.rs, worked for Arduino interrupts.
[20:51:19] *** Quits: ferdinand (Mibbit@moz-4AB4B66F.range86-144.btcentralplus.com) (Quit: http://www.mibbit.com ajax IRC Client)
[20:51:23] <CurlyBrace> I wish we were allowed to work on Arduinos for OS class...
[20:51:25] <jensnock_> You should be able to do essentially the same thing as attachInterrupt.
[20:51:41] *** Quits: Palmik (palmik@moz-11EA685D.pks.muni.cz) (Quit: Lost terminal)
[20:52:36] <jensnock_> CurlyBrace: You could write a nice Rust I/O system for Arduino and we would all love you *hugs*.
[20:54:27] <jensnock_> Or at least I would ;)
[20:54:37] <devin909> the function os::change_dir asks for a &Path parameter. I'm receiving my argument as string, so does anyone know how to convert to a path?
[20:54:47] <jasdev> so i'm still new to rust, are there nay tuts on how to call c code from rust?
[20:54:52] <jasdev> any*
[20:55:11] *** Quits: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net) (Quit: eatkinson)
[20:55:30] <strcat> yes there's an FFI tutorial
[20:55:33] <CurlyBrace> Actually, my prof might even be open to that as an alternative to his class
[20:56:27] <jasdev> also any word on why a lot of the docs are throwing Access Denied? http://static.rust-lang.org/doc/tutorial-ffi.html
[20:56:40] <strcat> because that's not where it's located anymore
[20:56:54] <strcat> it's linked from the tutorial with the others (tasks, conditions, iterators)
[20:57:04] <cmr> http://static.rust-lang.org/doc/master/tutorial-ffi.html
[20:57:19] <jasdev> ah alright gotcha
[20:57:30] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.1)
[20:59:25] <flaper87> strcat: cmr hey guys, based on this comment here? https://github.com/mozilla/rust/pull/9194#issuecomment-24487556 could any of you r+ that patch? I'm already working on the new implementation but I don't think it'll be ready for tomorrow 
[20:59:30] <Luqman> jensnock_: oh, btw you shouldn't need the s/arm-unknown-linux-gnueabihf/arm-none-eabi/ sed anymore since rustc will now use the actual target you give it
[20:59:35] <flaper87> acrichto: ping ?
[20:59:46] <jensnock_> Luqman: \o/
[20:59:58] <CurlyBrace> Any advice on how to make a vector of mutable ints?
[21:00:01] <jensnock_> Luqman: I'll try to fix that as soon as I have a working rustc.
[21:00:16] <Luqman> jensnock_: cool, let me know if it doesn't work
[21:00:33] * jensnock_ may or may not be implementing inline LLVM IR in the compiler.
[21:00:46] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[21:00:55] <jensnock_> It is the stupidest project I have ever worked on, and that says something :S
[21:00:58] <strcat> CurlyBrace: make a regular vector, mutability is inherited
[21:00:58] <cmr> flaper87: I'm perfectly ok with it, I'll leave the decision up to acrichto
[21:01:02] *** Joins: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net)
[21:01:19] <strcat> jensnock_: problem with LLVM IR is that it changes week to week ;p
[21:01:28] <CurlyBrace> Hmm, we thought that was the case, maybe we are misunderstanding the compiler's error
[21:01:33] <flaper87> cmr: kk, I just thought we could get it going before tomorrow. Not sure what acrichto's TZ is
[21:01:36] <CurlyBrace> (We being me and my partner, not me and you)
[21:01:38] <jensnock_> strcat: Intended for stdlib implementation, nothing else.
[21:01:47] <cmr> flaper87: PDT I think
[21:01:58] <jensnock_> strcat: Want to see how much of rustc I can move to std without breaking anything ;)
[21:02:06] <cmr> rusti: let mut xs = ~[1i, 2, 3]; xs[1] = 42; xs
[21:02:10] -rusti- ~[1, 42, 3]
[21:02:16] <flaper87> I ran tests locally and it all worked fine but, you know, anything could happen on merges
[21:02:19] <flaper87> cmr: cool, thanks
[21:02:22] <flaper87> it's sunday after all
[21:02:25] <flaper87> :)
[21:02:25] <Luqman> jensnock_: what did you need inline ir for?
[21:02:27] <strcat> CurlyBrace: it's inherited except for non-Freeze types
[21:02:29] <strcat> which are rare
[21:02:39] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[21:02:47] <CurlyBrace> 'cannot assign to immutable vec content'
[21:02:49] *** Quits: jasdev (Mibbit@24D8B7DE.EEDD3B02.DDE5D3F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[21:02:59] <jensnock_> Luqman: Essentially removing the hardwired implementations of the numeric traits.
[21:03:00] <bjz> jensnock_: neat!
[21:03:01] <strcat> CurlyBrace: so you're storing the vector in an immutable location
[21:03:11] <strcat> assuming it's a fixed-size one or ~[T]
[21:03:13] <bjz> jensnock_: operators!
[21:03:27] <bjz> -magic
[21:04:15] *** Quits: wonko (Mibbit@moz-5256162B.hsd1.ca.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[21:04:19] <CurlyBrace> Forgive me, still trying to understand what the locations are
[21:04:59] <strcat> if you have an immutable variable with a struct, the struct is immutable
[21:05:10] <strcat> along with the fields, along with an element in a vector in a field
[21:05:24] <strcat> and a field in that element, and so on
[21:05:48] <CurlyBrace> we are declaring a mutable vector withing the main of the program
[21:05:51] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[21:05:51] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/jWAxGg
[21:05:51] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[21:05:59] *** jorendorff_away is now known as jorendorff
[21:06:01] <strcat> CurlyBrace: the vector isn't mutable, the place you're storing it is
[21:06:26] <CurlyBrace> Given that we are 'just' declaring it in main, and not within a struct...
[21:06:26] *** Joins: victorporof (victorporo@216488FF.DD044C58.9B1E38F4.IP)
[21:06:43] <jensnock_> Luqman: --target arm-none-eabi gives "error: unknown operating system" on master.
[21:06:54] <strcat> CurlyBrace: and then you seem to be moving it into an immutable location
[21:07:13] <cmr> CurlyBrace: You need `let mut` like my original example.
[21:07:37] *** Joins: Ferio (Mibbit@moz-23CDE542.fullrate.dk)
[21:07:59] <jensnock_> Oh, waitâ€¦ that compiler isn't master, it is a few days old, if that makes any difference?
[21:08:01] <Luqman> jensnock_: oh, i had tried against arm-linux-noeabi.
[21:08:03] <strcat> rusti: let mut xs = ~[1, 2, 3]; xs.push(4); let ys = xs; /* ys is immutable */ ys
[21:08:03] -rusti- ~[1, 2, 3, 4]
[21:08:19] <Luqman> jensnock_: ok, so correction, you can't get rid of that sed, but you do need to change it
[21:08:22] <strcat> that moves it from a mutable location to an immutable one
[21:08:39] <strcat> I assume that's what's going on, but I haven't seen the code ;p
[21:09:01] <CurlyBrace> Forgive our delay, we are trying to process that
[21:09:08] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Ping timeout)
[21:09:15] <jensnock_> Luqman: Yes, I'll push a fix asap.
[21:09:36] <CurlyBrace> Let us get this on pastbin and get back to you, thanks so far...
[21:10:54] <CurlyBrace> http://pastebin.com/aEEwQmSy
[21:12:05] <strcat> CurlyBrace: @ vectors are always immutable
[21:12:24] <strcat> @mut ones are mutable but don't implement resizing in any form since it'd be impossible
[21:12:29] <strcat> you likely want ~[T]
[21:12:44] *** Joins: omicrondelta (dwhyte@DFA0622C.2732CD06.B7FCEB19.IP)
[21:12:44] <strcat> probably want to stay away from @/@mut for anything you do in the course
[21:12:53] *** Quits: victorporof (victorporo@216488FF.DD044C58.9B1E38F4.IP) (Ping timeout)
[21:13:14] <strcat> not really going to have a use case for them
[21:13:29] *** Quits: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net) (Quit: eatkinson)
[21:13:32] <CurlyBrace> Ah, that is very useful advice (longterm, I mean)
[21:13:42] <strcat> we are actually probably going to remove @ vectors
[21:13:54] <strcat> or at least move them to the stdlib
[21:14:21] <CurlyBrace> Well, that did it!
[21:14:25] <CurlyBrace> Thanks muchly!
[21:14:44] *** jorendorff is now known as jorendorff_away
[21:15:49] *** Quits: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net) (Input/output error)
[21:16:31] <jensnock_> Luqman: For some reason I cannot get it to work at all now :S
[21:18:24] *** flaper87 is now known as flaper87|afk
[21:18:34] *** Quits: jmgrosen (jmgrosen@moz-AB5DF7A0.sb.sd.cox.net) (Ping timeout)
[21:19:39] <CurlyBrace> Thanks again, I'm sure we will be back on later.
[21:19:47] *** Joins: jmgrosen (jmgrosen@moz-AB5DF7A0.sb.sd.cox.net)
[21:20:37] *** Quits: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP) (Quit: night)
[21:20:50] *** Quits: CurlyBrace (Mibbit@1CF724BC.80BB6BFD.DDE5D3F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[21:21:41] <Luqman> jensnock_: rustc is failing?
[21:21:46] <jensnock_> Luqman: Nope.
[21:21:59] <jensnock_> The IR seems about right.
[21:22:15] <jensnock_> But the board doesn't run the code.
[21:22:26] <jensnock_> (Or at least, doesn't do the right thing(tm))
[21:22:26] <strcat> it rebelled
[21:22:31] <jensnock_> ./o\
[21:22:47] <jensnock_> Anti-Rust Arduino Liberation Army has struck again /o\
[21:23:04] <strcat> no, you gave it rust and it became enlightened
[21:23:16] <kimundi> ARALA? Catchy.
[21:26:18] <jfbk> does vec have a way to replace an item and return the prev val?  best i've got is push,swap,pop, but that grows the vec
[21:26:22] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[21:27:25] *** Joins: nrc|afk (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[21:27:41] <dwrensha> I'm still getting stuck on lifetime errors. Could someone please take a look at https://gist.github.com/dwrensha/33bf0eb987b7c8bf63b8 ?
[21:28:55] *** Joins: purnam (Purnam@moz-DA0CD33.hsd1.va.comcast.net)
[21:29:45] <kimundi> jfbk: push swap pop seems the only way to do that right now. Doing it directly is currently not possible, as that would mean temporary leaving an hole in the vector. Though, I think in theory a method that uses unsafe code internally could be written that does exactly that.
[21:29:54] <kimundi> jfbk: No idea if that would be safe though
[21:30:29] <jensnock_> kimundi: The actual swap could be done with atomics.
[21:30:57] <jensnock_> Then it would be thread-safe.
[21:31:05] <kimundi> would we need atomics?
[21:31:06] <jensnock_> Not that it matters in Rust.
[21:31:18] <jensnock_> kimundi: Not unless you were doing unsafe things ;)
[21:31:30] *** Quits: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin_)
[21:31:34] * jensnock_ would never do unsafe things.
[21:31:36] <kimundi> you'd need &mut access to, which would already ensure singlethreaded access :P
[21:32:22] <jensnock_> Yes.
[21:32:49] * jensnock_ is stuck in a C mode for some reason.
[21:32:56] *** Joins: eatkinson (eatkinson@moz-C2126207.airbears2.berkeley.edu)
[21:33:10] *** Joins: skoizza (Mibbit@6E68978E.1CA5FEA3.DDE5D3F6.IP)
[21:33:18] <jensnock_> I need to learn to appreciate the "In Rust we Trust(tm)"-way of thinking.
[21:33:49] *** Quits: gareth0 (gareth0@moz-DC2EC772.dynamic.dsl.as9105.com) (Ping timeout)
[21:34:13] <cmr> yup
[21:34:14] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[21:34:43] *** Joins: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl)
[21:36:04] *** Joins: wikkit (Mibbit@moz-2B3D6C8D.eb.protectedgroup.com)
[21:36:10] *** Quits: wikkit (Mibbit@moz-2B3D6C8D.eb.protectedgroup.com) (User has been banned from Mozilla (no spamming here))
[21:36:33] *** Joins: Liothen (liothen@moz-788EBAD0.spkn.qwest.net)
[21:37:25] <strcat> acrichto: btw, click the rust icon in the libstd docs
[21:37:36] <strcat> it goes to the main index, which has libextra
[21:37:44] <strcat> :s
[21:38:21] <jensnock_> lol, I got inline LLVM IR workingish.
[21:38:28] <jensnock_> Stupidest, thing, ever.
[21:38:39] <jensnock_> Phuby on Phails, scoot over!
[21:38:45] *** Quits: heftig (heftig@moz-9876B34B.dip0.t-ipconnect.de) (Ping timeout)
[21:38:49] <jfbk> kimundi:  thanks.  i looked at swap, would something like this work?  https://gist.github.com/jfager/6664091
[21:38:56] <kimundi> strcat: nope, that redirects to extra
[21:39:22] <strcat> kimundi: that's what I'm saying
[21:39:24] <jfbk> (trying to test but building takes forever)
[21:40:13] *** Quits: skoizza (Mibbit@6E68978E.1CA5FEA3.DDE5D3F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[21:40:30] <strcat> jfbk: why not just use util::swap?
[21:40:36] <strcat> the unsafe code there seems unnecessary
[21:40:52] <kimundi> strcat: he wants to replace an value inplace
[21:41:01] <strcat> so, swap the new value in
[21:41:06] <kimundi> oh, wait
[21:41:10] *** Joins: heftig (heftig@moz-1CC2E990.dip0.t-ipconnect.de)
[21:41:10] <Eridius> I just filed an RFC issue for the raw string literal discussion: https://github.com/mozilla/rust/issues/9411
[21:41:15] <kimundi> util::swap, not vec.swap
[21:41:23] * kimundi facepalms
[21:41:35] <jfbk> strcat: b/c i didn't know it existed :)
[21:41:36] <engla> and there is util::replace too
[21:41:44] <kimundi> jfbk: My bad, there is a general operation for swaping an value out :P
[21:41:50] <strcat> jfbk: yeah, I want to put it in the prelude
[21:42:02] <Eridius> strcat: do it
[21:42:04] <strcat> it is absolutely vital when you're avoiding copies and managed pointers
[21:42:08] <strcat> Eridius: there's an RFC or something
[21:42:10] <strcat> about removing util
[21:42:24] <strcat> maybe I made it, don't remember ;p
[21:43:10] *** Quits: Guest (textual@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[21:45:16] <strcat> hurry up snapshot
[21:45:17] <strcat> >.<
[21:45:25] *** kimundi is now known as zz_kimundi
[21:45:48] *** Joins: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net)
[21:46:08] *** Quits: josedonizetti (josedonize@moz-CA73D699.cpe.teksavvy.com) (Quit: josedonizetti)
[21:46:47] <zol> jensnock_: Definitely, count me in
[21:46:54] <jensnock_> \o/
[21:47:28] <zol> jensnock_: Does it have a meetup page or similar? Never heard about it before
[21:47:35] <jfbk> strcat: util::replace was just what i needed, thanks
[21:47:39] <jensnock_> zol: I just made it up.
[21:48:34] <engla> :-)
[21:49:22] *** Quits: valenting (Thunderbir@C6866972.77435D89.FB866788.IP) (Ping timeout)
[21:49:31] * jensnock_ hits C++ with a stick.
[21:49:39] <jensnock_> Silly semi-colons :(
[21:50:12] *** Quits: tefter (tefter@B5D119DC.B856A0A1.73804765.IP) (Client exited)
[21:50:32] <jensnock_> zol, engla: But I can make a meetup page or similar.
[21:50:39] <zol> jensnock_: then I will gladly be part of this historic event!
[21:50:52] <jensnock_> Any good ideas for names?
[21:51:04] *** Quits: devin909 (Mibbit@72C4A154.117F92C2.B7830B68.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[21:51:55] <zol> jensnock_: If we had a bus for location we could call it rustibus.
[21:52:23] <zol> jensnock_: rustup ?
[21:52:44] <jensnock_> I think the location would either be somewhere at LU, or at FoocafÃ©.
[21:52:46] <cmr> jensnock_: Wait, inline IR?
[21:52:48] <cmr> Sweet!
[21:52:59] <jensnock_> cmr: *muhahahahahaha*
[21:53:03] <cmr> What's your useccase?
[21:53:06] <Eridius> what is this meetup you're talking about?
[21:53:20] <jensnock_> Eridius: A rust meetup in the Ã¶resund region.
[21:53:30] <jensnock_> Denmark / South of Sweden.
[21:53:42] <engla> that's a big region to claim
[21:53:45] <cmr> We should have weekly G+ hangouts where we bullshit for a while about our experiences or whatnot
[21:53:53] <Eridius> I want a meetup in San Francisco
[21:54:02] <cmr> or monthly
[21:54:03] <cmr> or something
[21:54:06] <jensnock_> engla: Works for Copenhagen.js.
[21:54:12] <Luqman> Eridius: i'd be down for that
[21:54:20] <engla> ok
[21:54:50] <jensnock_> The smaller your language, the larger you need to make the region ;)
[21:55:15] <jensnock_> A Java user group could probably be filled with just north east Lund.
[21:55:50] <zol> jensnock_: C++ a lecture room.. 
[21:55:57] *** Joins: josedonizetti (josedonize@moz-CA73D699.cpe.teksavvy.com)
[21:56:20] *** Quits: saneyuki (Tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[21:56:23] *** Quits: tikue_ (tkuehn@moz-424BC304.hsd1.pa.comcast.net) (Quit: tikue_)
[21:57:20] *** Quits: eatkinson (eatkinson@moz-C2126207.airbears2.berkeley.edu) (Ping timeout)
[21:58:19] *** Joins: tikue_ (tkuehn@moz-424BC304.hsd1.pa.comcast.net)
[21:58:41] <jensnock_> Rust SkÃ¥ne.
[21:58:47] <zol> engla: also located in the Ã¶resund region?
[21:58:55] <zol> jensnock_: perfect!
[21:59:04] <jensnock_> Eller SkÃ¥nerust?
[21:59:20] <jensnock_> Even if I don't like coffee.
[21:59:43] <engla> hehe
[21:59:46] <engla> zol: in lund
[22:00:01] <zol> engla: cool :)
[22:00:15] <dandy> did this move somewhere: http://static.rust-lang.org/doc/master/ng/std/index.html ?
[22:00:32] *** Quits: Ferio (Mibbit@moz-23CDE542.fullrate.dk) (Quit: http://www.mibbit.com ajax IRC Client)
[22:00:41] <Eridius> doc links on rust-lang.org are still broken :(
[22:01:00] <dandy> cmr put something up last night
[22:01:14] <engla> they were fine some hours ago
[22:01:18] <dandy> is there another way I can find out what functionas exist for iterators?
[22:01:26] <cmr> dandy: it works for me?
[22:01:31] <dandy> browser cache?
[22:01:40] <dandy> yup...
[22:01:43] <dandy> weir
[22:01:44] <cmr> http://static.rust-lang.org/doc/master/ng/std/iter/trait.Iterator.html
[22:01:58] <strcat> acrichto: why are some things still under the ng namespace?
[22:02:01] <strcat> hm
[22:02:15] <engla> must have moved to /ng/ just now
[22:02:16] <dandy> thats odd, because I was there last night, so if I did cache it should cache the working docs
[22:02:20] <strcat> tutorial/manual links are broken too
[22:02:23] <cmr> everything should be under ng, it was always under ng.
[22:02:30] <strcat> cmr: it wasn't
[22:02:38] <strcat> cmr: http://static.rust-lang.org/doc/master/extra/index.html that still isn't
[22:02:40] <bernard> Does anyone know if there's a way to pass commands to the main function of a file? I'm trying to do I/O input redirection, and I can read a file but I'm having trouble figuring out a way to pass it to a separate function
[22:02:44] <cmr> Then it must haved moved away from it while I was sleeping
[22:02:45] <cmr> Odd
[22:02:50] <strcat> cmr: yeah, acrichto moved it
[22:02:52] <strcat> afaik
[22:03:14] *** Quits: lkuper_ (lkuper@moz-6901A223.public.wayport.net) (Quit: lkuper_)
[22:03:18] <strcat> I really want this stupid snapshot to land so my repo starts working again
[22:03:32] *** Joins: waddlesplash (Mibbit@moz-247EEEFB.res-cmts.mtp2.ptd.net)
[22:04:02] *** Quits: jmgrosen (jmgrosen@moz-AB5DF7A0.sb.sd.cox.net) (Ping timeout)
[22:04:12] <jensnock_> cmr: I would also be up for some audiovisual bullshit once in a while.
[22:04:25] <waddlesplash> any channel admins around?
[22:05:22] *** Joins: bytewise (bytewise@moz-4A801D04.unitymediagroup.de)
[22:05:51] *** Quits: tikue_ (tkuehn@moz-424BC304.hsd1.pa.comcast.net) (Quit: tikue_)
[22:06:21] *** jensnock_ is now known as jensnockert
[22:06:25] <Eridius> waddlesplash: there are three ops in this room, you could try pinging them. I am rather curious as to why you need one though
[22:06:42] *** Joins: victorporof (victorporo@8CD8EBC4.60E0D239.9B1E38F4.IP)
[22:07:11] <waddlesplash> Eridius: I was wondering if they would like a GitHub issue bot
[22:07:43] <waddlesplash> Eridius: it would post links and titles of issues when you said #1 or #2 or...
[22:07:47] *** Quits: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[22:07:54] <Eridius> waddlesplash: maybe file a GitHub issue suggesting this/ ;)
[22:07:57] <Eridius> s,/,?,
[22:08:13] <waddlesplash> jack or kmc or nmatsakis: ping
[22:08:28] <waddlesplash> Eridius: not a bad idea. I may do just that.
[22:08:30] *** nrc|afk is now known as nrc
[22:08:39] *** Quits: donri (donri@moz-9BB61102.tbcn.telia.com) (Ping timeout)
[22:09:48] <hoverbear> https://gist.github.com/Hoverbear/6655412#file-gistfile1-rs-L23 --> sws.rs:23:17: 23:40 error: unresolved name `ip::SocketAddr::FromStr` .. Anyone have a hint?
[22:10:05] <cmr> hoverbear: that's not how you do it.
[22:10:08] <Jesse> waddlesplash: are you writing a bot?
[22:10:16] <cmr> It's FromStr::from_str
[22:10:17] <waddlesplash> Jesse: already have one
[22:10:34] <waddlesplash> Jesse: go to #pdfjs or #shumway and type #1 or #2 or...
[22:10:44] <cmr> hoverbear: just use the from_str free function.
[22:10:54] <waddlesplash> Jesse: channel admins can use /invite waterbot #<channel>
[22:11:13] <dandy> What would be a nice rust way to join the items within an Iterator<int> into a comma separated str?
[22:11:39] <hoverbear> cmr: And that I need to match as well?
[22:11:45] <strcat> dandy: well an easy way would be fold
[22:12:28] <dandy> but that would just be a bunch of "strcat" operations right?
[22:12:29] <Eridius> rusti: 3.to_str()
[22:12:31] -rusti- pastebinned 35 lines of output: http://sprunge.us/TDDF
[22:12:32] <hoverbear> cmr: https://gist.github.com/Hoverbear/6655412 This is what I get now. :(
[22:12:39] <Eridius> rusti: 3i.to_str()
[22:12:40] -rusti- ~"3"
[22:12:50] <strcat> Eridius: you'd want to use the formatting trait
[22:12:53] <strcat> so you can use a writer
[22:13:03] <Eridius> strcat: yeah, I'm just going for simple at the moment
[22:13:12] <strcat> then yeah, to_str + fold
[22:13:18] <Eridius> rusti: let xs = [1,2,3,4,5]; xs.iter().map(|x| x.to_str()).to_owned_vec().connect(",")
[22:13:18] <strcat> very slow and very simple ;p
[22:13:20] -rusti- pastebinned 35 lines of output: http://sprunge.us/LXMW
[22:13:29] <Eridius> rusti: let xs = [1i,2,3,4,5]; xs.iter().map(|x| x.to_str()).to_owned_vec().connect(",")
[22:13:30] -rusti- ~"1,2,3,4,5"
[22:13:34] <Eridius> there we go, slow and simple
[22:14:00] <Luqman> hoverbear: change it to: let options = Options { port: from_str(args[1]).expect("Couldn't parse port"), directory: args[2] };
[22:14:00] <engla> better than .sum() at least
[22:14:23] *** Quits: waddlesplash (Mibbit@moz-247EEEFB.res-cmts.mtp2.ptd.net) (Quit: http://www.mibbit.com ajax IRC Client)
[22:14:30] <strcat> acrichto: and once again the snapshot fails :\
[22:14:50] * strcat forces a rebuild
[22:15:40] <hoverbear> Luqman: Ok. The .expect catches exceptions?
[22:15:42] *** Joins: eatkinson (eatkinson@moz-E57448EF.airbears2.berkeley.edu)
[22:15:52] <dandy> is there a str writer or do I just use whatever works on [u8]?
[22:16:33] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Client exited)
[22:16:33] <Luqman> hoverbear: it'll give you the value if it's Some(..) otherwise it'll just call fail with the message you give it
[22:17:08] <hoverbear> Luqman: Awesome. Ok now I just need to fix it not actually parsing the port then.
[22:18:47] *** Joins: lbergstrom (Adium@D6B9EF06.FF448E4A.B459E86F.IP)
[22:18:56] *** Joins: cem2000 (Mibbit@moz-62DFCB1E.hsd1.va.comcast.net)
[22:19:39] <strcat> acrichto: the dont_starve test fails on bsd too
[22:19:49] <strcat> I think it just fails on a single core machine
[22:20:16] <strcat> I need to xfail those rustpkg tests or whatever they are too
[22:20:18] <strcat> ;[
[22:20:53] *** Quits: ChemicalHarm (Mibbit@moz-A9F37238.hsd1.md.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[22:21:16] *** Joins: ChemicalHarm (Mibbit@moz-8E8D3FD.hsd1.md.comcast.net)
[22:22:04] <Eridius> cmr, Seldaek: description of http://static.rust-lang.org/doc/master/std/rt/io/mem/index.html seems a bit redundant
[22:22:25] <cem2000> Hi, I was wondering if someone can help me open a file for writing using std::rt::io
[22:22:54] <cem2000> I can't seem to figure out how to use the open_writer() in the FileInfo trait
[22:24:08] *** Quits: aeqwa (aeqwa@moz-CCF51A06.dsl.tropolys.de) (Quit: Lost terminal)
[22:24:47] <luisbg> how can I convert an enum into a string so I can print the value and check my code?
[22:25:23] <Eridius> rusti: use std::rt::io; let mut buf = io::mem::MemWriter::new(); let xs = [1i,2,3,4,5]; for (i,x) in xs.iter().enumerate() { if i != 0 { write!(buf, ","); } write!(buf, "{}", *x); } std::str::from_utf8_owned(buf.inner())
[22:25:25] -rusti- pastebinned 19 lines of output: http://sprunge.us/gaAF
[22:25:37] <cmr> luisbg: format! supports the "{:?}" formatting thingy, which uses reflection to print out the value. It's for debugging.
[22:26:05] <luisbg> cmr, so it would be println(format!(enum)); ?
[22:26:08] <Eridius> rusti: use std::rt::io; let mut buf = io::mem::MemWriter::new(); let xs = [1i,2,3,4,5]; for (i,x) in xs.iter().enumerate() { if i != 0 { write!(&mut buf, ","); } write!(&mut buf, "{}", *x); } std::str::from_utf8_owned(buf.inner())
[22:26:08] -rusti- pastebinned 19 lines of output: http://sprunge.us/XTcT
[22:26:29] <Eridius> bah do I really have to cast the writer?
[22:26:32] <cmr> Eridius: Hm, that's weirdf.
[22:26:42] <Eridius> rusti: use std::rt::io; let mut buf = io::mem::MemWriter::new(); let xs = [1i,2,3,4,5]; for (i,x) in xs.iter().enumerate() { if i != 0 { write!(&mut buf as &mut io::Writer, ","); } write!(&mut buf as &mut io::Writer, "{}", *x); } std::str::from_utf8_owned(buf.inner())
[22:26:43] *** Joins: saneyuki (Tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[22:26:43] -rusti- pastebinned 5 lines of output: http://sprunge.us/bFTU
[22:26:48] <Eridius> boy that's awkward
[22:26:49] <cmr> Eridius: That comment isn't in the code.
[22:27:12] <Eridius> rusti: use std::rt::io; use std::rt::io::Decorator; let mut buf = io::mem::MemWriter::new(); let xs = [1i,2,3,4,5]; for (i,x) in xs.iter().enumerate() { if i != 0 { write!(&mut buf as &mut io::Writer, ","); } write!(&mut buf as &mut io::Writer, "{}", *x); } std::str::from_utf8_owned(buf.inner())
[22:27:13] -rusti- ~"1,2,3,4,5"
[22:27:17] <Eridius> dandy: ^
[22:27:20] <Eridius> a lot more code, but it avoids intermediate allocations
[22:27:26] <dandy> :(
[22:27:39] <Eridius> although the MemWriter doesn't know what its capacity will be initially, so it may have to reallocate anyway :/
[22:27:46] <strcat> cmr: https://github.com/mozilla/rust/pull/9412 r? 
[22:28:14] <dandy> Eridius, yeah but only if it was [&str] would it know
[22:28:38] <strcat> it wouldn't really know anyway, you'd have to walk over it and add them
[22:29:24] <dandy> i would hope its cheaper to sum the lengths in a first go around on an array over just allocating when you need more space
[22:29:36] <Eridius> strcat: yeah I know. But that's doable
[22:29:39] <cmr> strcat: can't you just have #[ignore(target_ot = "bsd")] ?
[22:29:42] <dandy> assuming the number is known
[22:29:44] <luisbg> cmr, ignore my previous question :) 
[22:29:47] <strcat> cmr: it's not because of bsd
[22:29:50] <strcat> it's because the builder has 1 core
[22:30:04] <strcat> afaik
[22:30:06] *** Quits: eatkinson (eatkinson@moz-E57448EF.airbears2.berkeley.edu) (Quit: eatkinson)
[22:30:24] <strcat> we shouldn't have a test enabled we know doesn't work without >1 core
[22:30:38] <strcat> it was broken on linux/mac too under vg
[22:30:45] *** Joins: aatch (James@moz-B437F499.pocketrent.com)
[22:30:53] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[22:30:53] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/5jXIpg
[22:30:53] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[22:30:54] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[22:30:54] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/QWYi1g
[22:30:54] <ghrust> 13rust/06auto 14bc34a34 15Daniel Micay: disable starvation test completely for now...
[22:30:54] <ghrust> 13rust/06auto 1433e913d 15bors: auto merge of #9412 : thestinger/rust/no_starve_xfail, r=cmr...
[22:30:54] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[22:30:56] <strcat> since vg serializes to essentially 1 core
[22:30:57] <dandy> I feel pretty crushed right now, I cant get .sum() to work
[22:31:19] <Eridius> dandy: show code?
[22:31:36] <Eridius> dandy: first thought is, did you remember to `use` iter::AdditiveIterator?
[22:31:36] <dandy> have to go to the store... will when I return
[22:31:41] <dandy> I did not
[22:31:42] *** Joins: tikue_ (tkuehn@6D6C18A9.E2CAEE6E.689607DE.IP)
[22:31:54] *** Quits: saneyuki (Tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[22:31:55] <strcat> cmr: really frustrated with this snapshot >.<
[22:32:05] <Eridius> you can't call .sum unless you bring AdditiveIterator into scope
[22:32:28] <dandy> right...
[22:32:36] <dandy> like extension methods in C#, how does it know where they are?
[22:32:48] <dandy> I thought it was on vec
[22:32:59] <Eridius> not just how does it find it, but also you wouldn't want someone else defining a trait to suddenly cause an ambiguous method call in your code
[22:33:13] <dandy> yeah, thnaks for the help, im off
[22:33:14] *** Quits: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin_)
[22:33:40] *** Quits: dwrensha (chatzilla@moz-7D01AC63.pitbpa.east.verizon.net) (Ping timeout)
[22:36:08] *** Joins: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP)
[22:42:21] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[22:44:38] *** Joins: c74d (c74d@moz-E2EAC718.oc.oc.cox.net)
[22:46:32] *** Quits: ChemicalHarm (Mibbit@moz-8E8D3FD.hsd1.md.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[22:46:33] *** Quits: bernard (Mibbit@moz-5AF9AA47.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[22:49:39] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[22:50:13] <jensnockert> Is there a simple way to get the argument names from a fn_decl?
[22:51:20] *** Quits: purnam (Purnam@moz-DA0CD33.hsd1.va.comcast.net) (Ping timeout)
[22:52:52] *** Joins: eatkinson (eatkinson@2B25414B.772DB3ED.90B17E8F.IP)
[22:54:18] *** Quits: lbergstrom (Adium@D6B9EF06.FF448E4A.B459E86F.IP) (Quit: Leaving.)
[22:56:03] <doomlord_> session.str_of(ident) .. if you can get the ident
[22:56:59] <luisbg> in github, I did a PR, got reviews and now need to PR a new version with the suggested changes
[22:57:12] <luisbg> do I commit and rebase those commits, and push?
[22:57:23] <cmr> luisbg: yes
[22:57:28] <dbaupp> jensnockert: in general function arguments don't have names, since they can be arbitrary patterns
[22:57:33] <cmr> and do `r? @original-reviewer`
[22:57:48] <jensnockert> dbaupp: Yes, but in my nefarious use case, they will always have names.
[22:57:56] <luisbg> cmr, does it show up as a new PR, or as a new patch in the same thread?
[22:58:19] <dbaupp> jensnockert: fn_decl.inputs is the list of args, which have a `pat` field that you can "destructure" into a single ident
[22:58:29] <dbaupp> luisbg: it gets added to the old PR
[22:59:12] <jensnockert> dbaupp: \o/
[22:59:35] *** Joins: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca)
[22:59:56] <dbaupp> jensnockert: libsyntax/ast.rs + grep are your best friends :P
[23:00:05] *** Quits: eatkinson (eatkinson@2B25414B.772DB3ED.90B17E8F.IP) (Quit: eatkinson)
[23:00:12] <jensnockert> Yeah, but the pprust file is a nested nightmare :(
[23:00:13] <doomlord_> is this due  rename FnDecl 
[23:00:35] <dbaupp> doomlord_: probably
[23:01:24] <Luqman> there seems to be a mix and some get updated to the new convention
[23:02:35] <dbaupp> yup, it's a progressive thing
[23:02:45] <jensnockert> At some point we should probably freeze the tree and force some intern to update all the files with correct indentation and right-cased names.
[23:02:48] * dbaupp pokes kimundi to just update the rest in one big go
[23:02:48] *** Joins: lkuper_ (lkuper@moz-6901A223.public.wayport.net)
[23:02:54] * jensnockert ebwillaughs.
[23:03:32] <dbaupp> jensnockert: but rust interns do useful work
[23:03:58] <jensnockert> Yes, but no one can do useful work while everything is being renamed, and the interns are ubereffective.
[23:04:01] <doomlord_> wasn't keen on snake_case but admitedly its handy having types stand out from locals/function names for searches
[23:04:20] <doomlord_> maybe you can use some typedefs to ease the renaming..
[23:04:22] <jensnockert> I mean, if I did it, it would take 6 weeks.
[23:04:28] <dbaupp> haha
[23:04:47] <doomlord_> just have a type alias for the old name
[23:04:57] <dbaupp> apparently kimundi wrote a script that parses the output of rustc to rename all the things in the appropriate places
[23:05:00] <Eridius> we just need to build a tool that can analyze Rust code and rename identifiers
[23:05:33] <doomlord_> the problem is doing that in sync with external code
[23:07:58] <doomlord_> how does the emacs rust ctags stuff work
[23:08:23] <strcat> doomlord_: ctags is just a hack
[23:08:34] <strcat> it's not accurate
[23:08:58] *** Quits: lkuper_ (lkuper@moz-6901A223.public.wayport.net) (Quit: lkuper_)
[23:09:10] <doomlord_> how do you invoke it
[23:12:21] <doomlord_> ok make TAGS.emacs, i see ctags itself takes a config file
[23:14:08] *** Joins: Guest_ (textual@moz-4C5426D6.hsd1.sc.comcast.net)
[23:14:47] *** Quits: sebcrozet (sebcrozet@moz-87D51607.w80-13.abo.wanadoo.fr) (Quit: Gone)
[23:17:39] *** Quits: nkoep (nik@moz-B746B47D.pool.mediaways.net) (Client exited)
[23:19:39] *** Joins: ofeldt- (ofeldt@moz-24067E5A.dip0.t-ipconnect.de)
[23:20:46] *** Quits: ofeldt (ofeldt@moz-585C498C.dip0.t-ipconnect.de) (Ping timeout)
[23:25:04] <kmc> what papers should I read to understand type checking for region pointers?
[23:25:25] <kmc> ideally, understand well enough to implement a toy language with the same foundations as Rust
[23:26:03] <cmr> kmc: ask pcwalton or nmatsakis, I'd guess
[23:26:05] <Eridius> rusti: true as uint
[23:26:05] -rusti- 1u
[23:26:09] <Eridius> ok good that still works
[23:26:16] <cmr> rusti: 3u as bool
[23:26:17] -rusti- <anon>:7:9: 7:19 error: cannot cast as `bool`, compare with zero instead
[23:26:17] -rusti- <anon>:7          3u as bool
[23:26:17] -rusti-                   ^~~~~~~~~~
[23:26:17] -rusti- error: aborting due to previous error
[23:26:17] -rusti- application terminated with error code 101
[23:26:42] <strcat> rusti: 5u8 as char
[23:26:43] -rusti- '\x05'
[23:26:45] <strcat> rusti: 5u16 as char
[23:26:45] -rusti- <anon>:7:9: 7:21 error: only `u8` can be cast as `char`, not `u16`
[23:26:46] -rusti- <anon>:7          5u16 as char
[23:26:46] -rusti-                   ^~~~~~~~~~~~
[23:26:46] -rusti- error: aborting due to previous error
[23:26:46] -rusti- application terminated with error code 101
[23:27:08] *** zz_kimundi is now known as kimundi
[23:27:45] <SiegeLord> rusti: &&1
[23:27:45] -rusti- <anon>:7:9: 7:11 error: unexpected token: `&&`
[23:27:46] -rusti- <anon>:7          &&1
[23:27:46] -rusti-                   ^~
[23:27:46] -rusti- application terminated with error code 101
[23:28:01] <cmr> rusti: 0x80u8 as char
[23:28:02] -rusti- '\x80'
[23:28:03] <dwrensha> kmc: There's a comment in librustc/middle/typeck/infer/region_inference/doc.rs suggesting this: http://research.microsoft.com/en-us/um/people/simonpj/papers/higher-rank/
[23:28:25] <Eridius> rusti: & &1
[23:28:26] -rusti- pastebinned 30 lines of output: http://sprunge.us/gZGG
[23:29:39] <kmc> hm it's not obvious to me how that relates to regions, though
[23:30:43] *** Joins: pachuco (Mibbit@moz-20CEEF38.hsd1.ca.comcast.net)
[23:30:53] <pachuco> what is the rust size_of function?  or what is it called now?
[23:31:04] <cmr> std::sys::size_of
[23:31:13] <pachuco> is that changing?
[23:31:34] <strcat> might move out of sys, not otherwise planned to change
[23:32:36] <pachuco> cool cool!
[23:33:04] *** Quits: cem2000 (Mibbit@moz-62DFCB1E.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[23:34:06] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Client exited)
[23:36:45] <bogen> How do I create an empty vector of a given type that I use to push to and pop from? (And index into it directly)
[23:36:57] *** Joins: Jesin (Jessin_@moz-C8BB4444.cc.lehigh.edu)
[23:36:57] <Eridius> bogen: just use `[]
[23:36:59] <Eridius> err ~[]
[23:37:03] <strcat> rusti: let mut xs = ~[]; xs.push(5); xs
[23:37:04] -rusti- ~[5]
[23:38:36] <kimundi> jensnockert, dbaupp: Yeah I have a crappy ruby script. Problem is it doesn't really ensure that any rename failout gets detected if you only go after the rustc errors.  I already once had an successful stage1 build that complained in an stage2 libstd about an illigal unsafe dereference  in this expression: @s as @ToStr. :P
[23:39:12] *** Quits: victorporof (victorporo@8CD8EBC4.60E0D239.9B1E38F4.IP) (Quit: victorporof)
[23:39:53] <kimundi> Would really like to have a tool that builds an module and call graph of a crate and maps them to source lines... 
[23:40:26] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[23:40:57] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[23:40:57] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/QWYi1g
[23:40:57] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[23:41:00] *** Quits: cairsds (Mibbit@moz-7A1BC54C.host.de.colt.net) (Quit: http://www.mibbit.com ajax IRC Client)
[23:41:35] <aatch> kimundi, that would be really nice to have. Especially since it's needed for incremental recompilation
[23:41:41] *** Quits: pachuco (Mibbit@moz-20CEEF38.hsd1.ca.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[23:41:58] <kimundi> And 'match' is an black hole for renamings... Rename an static or enum variant, and suddenly you a lot of unreachable patterns and new bindings :P
[23:42:24] <strcat> oh I forgot to start it again
[23:42:35] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[23:42:35] <ghrust> 01[13rust01] 15thestinger merged 06auto into 06snap-stage3: 02http://git.io/HCwiVQ
[23:42:35] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[23:43:29] <bogen> Eridius: thanks, that works.
[23:43:52] <kimundi> Need a few comments about naming here: https://github.com/mozilla/rust/pull/9392
[23:44:06] <kimundi> And a r+ here: https://github.com/mozilla/rust/pull/9398 
[23:44:19] <cstrahan> is anyone working on a rust code auto-completion daemon? if not, i'd like to take a stab at it, but i could really use a mentor.
[23:44:21] <doomlord_> kimundi, rustfind does spit out a list of definitoin links (line based), but it doesn't currently seperate out calls from any other references
[23:44:57] <strcat> cstrahan: I don't think librustc is going to be very usable for that atm, but I guess it's worth a try
[23:45:08] <kimundi> doomlord_: What do you mean with 'seperate out'?
[23:45:22] <doomlord_> its just all the possible definitoins you could jump to - not just calls
[23:45:35] <doomlord_> (eg any sort of symbol references)
[23:45:37] <kimundi> ah, right
[23:46:00] <kimundi> I want _all_ references to anything in any line of code, so xD
[23:46:09] <doomlord_> that it does do :)
[23:46:32] <cmr> cstrahan: it'd be fairly impossible to have completion over the code you're currently writing, atm.
[23:46:40] <kimundi> doomlord_: So you fixed the vistor stuff?
[23:47:02] <doomlord_> https://github.com/dobkeratops/rustfind/ <<< look at RFX format - it spits these out to provide jump-to-def between crates
[23:47:14] <doomlord_> kimundi, mark_edward fixed it 
[23:47:19] <kimundi> nice
[23:47:20] <cmr> (as in, the completion takes into account the half-finished code you've written)
[23:47:56] <cmr> cstrahan: but, I think a more limited completion daemon would be very feasible.\
[23:47:56] <cstrahan> cmr/strcat: yeah, from what i've gathered looking through librustc et al, i figured that'd be the case.
[23:48:27] <doomlord_> cstrahan, https://github.com/dobkeratops/rustfind <<<< ths project is intended to be work in the direction of autocomplete. As a stop-gap, it spits out HTML with clickable links, accurate,
[23:49:05] <kimundi> doomlord_: Does it also understand links to external crates?
[23:49:26] <doomlord_> kimundi, yes thats exactly why it spits out this file - it reads those back in to resolve links to other crates
[23:49:31] *** Joins: aaron (aaron@5D8AE3EF.EC8C25A6.72ECBEEF.IP)
[23:49:52] <kimundi> hm, sounds very promising :)
[23:50:03] <doomlord_> its possible additions (or somethign i've missed :) ) in crate metadata could render this file obselete, but at the same time its nice to have something really simple.
[23:50:27] <doomlord_> its formated in a deliberately simple way.. just lines describing each node. i used it for debugging aswell eg grep for node index..
[23:51:37] <doomlord_> cstrahan, there are some other people who've started IDE projects
[23:52:27] <cstrahan> doomlord_: interesting - i'll give that a look.
[23:52:52] *** Joins: lbergstrom (Adium@D6B9EF06.FF448E4A.B459E86F.IP)
[23:53:03] *** Joins: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[23:53:22] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[23:53:36] <doomlord_> kimundi, if you are curious , 'crosscratemap.rs' writes out/reads back in that file. but it is just 1line per node, starting with "node" to define nodes (source locatoin, index etc..) and "jdef <node_id> <definition's node_id>"
