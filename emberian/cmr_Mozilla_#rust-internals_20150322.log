[00:00:12] *** Quits: brson (brson@moz-cfhap5.mtv2.mozilla.com) (Quit: leaving)
[00:00:38] *** Joins: brson (brson@moz-fm2.eev.48.37.IP)
[00:00:38] *** ChanServ sets mode: +o brson
[00:03:35] <arrrrrrr1> how do I turn an OsString into a PathBuf?
[00:03:45] *** Quits: nodweber_ (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[00:03:56] *** Quits: dpc_ (dpc@moz-a8v.6sn.162.73.IP) (Ping timeout: 121 seconds)
[00:03:57] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[00:07:42] <reem> I think using AsPath
[00:07:59] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[00:08:04] <reem> hmmm, but you should be able to re-use the alloc
[00:08:19] <reem> PathBuf::new() should just work
[00:09:09] *** Joins: mr_trousers (Mibbit@moz-juv.9o3.252.72.IP)
[00:13:42] *** Joins: {-}grant ({0}grant@moz-fctpaa.mo.charter.com)
[00:16:19] <arrrrrrr1> I doubt tha
[00:16:53] <arrrrrrr1> t
[00:17:11] <reem> PathBuf::new takes anything AsOsStr, and OsString implements AsOsStr, so it should work
[00:18:20] <arrrrrrr1> for that to work, the optimizer would have to be excellent
[00:20:06] <reem> it works, but won't re-use the allocation
[00:23:23] *** Quits: mr_trousers (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[00:25:03] *** Joins: rovar (rovar@moz-m2j7h0.dyn.optonline.net)
[00:27:25] *** Quits: mjboa (mike@moz-qijlnb.dip0.t-ipconnect.de) (Quit: leaving)
[00:30:41] *** Quits: RossJH (textual@moz-8vn4o2.range86-165.btcentralplus.com) (Quit: My Mac has gone to sleep. ZZZzzz‚Ä¶)
[00:31:13] *** Joins: mib_wh3v33 (Mibbit@moz-juv.9o3.252.72.IP)
[00:31:28] *** Quits: brson (brson@moz-fm2.eev.48.37.IP) (Quit: leaving)
[00:31:54] *** Quits: mib_wh3v33 (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[00:38:43] <WindowsBunny> arrrrrrr1: There's an open issue to fix that
[00:39:00] <WindowsBunny> gh22751
[00:39:00] <[o__o]> There is no way to create a PathBuf from an OsString without copying: https://github.com/rust-lang/rust/issues/22751
[00:39:17] <WindowsBunny> aturon's generic conversion stuff will fix it
[00:40:08] *** Quits: nrc (nrc@moz-4bhi2i.xtra.co.nz) (Ping timeout: 121 seconds)
[00:40:27] *** Quits: ytain (ytain@moz-44k.q8p.140.24.IP) (Quit: Textual IRC Client: www.textualapp.com)
[00:47:36] *** Quits: {-}grant ({0}grant@moz-fctpaa.mo.charter.com) (Connection closed)
[00:48:44] *** Joins: {-}grant ({0}grant@moz-fctpaa.mo.charter.com)
[00:50:27] *** Quits: James (quassel@moz-d43h0f.range86-163.btcentralplus.com) (Ping timeout: 121 seconds)
[01:05:07] *** Quits: Rym (y@moz-cfe.mso.205.31.IP) (Ping timeout: 121 seconds)
[01:05:11] <arrrrrrr1> why would a function ever take a Fn and not a FnMut?
[01:06:54] *** Quits: munksgaard (munksgaard@moz-1i4.hq0.225.130.IP) (Ping timeout: 121 seconds)
[01:08:30] <Tobba> arrrrrrr1: Fn+Share is useful
[01:08:33] <Tobba> err
[01:08:35] <Tobba> Fn+Sync
[01:08:54] <arrrrrrr1> but isn't a FnMut+Sync just as useful?
[01:08:59] <Tobba> not at all
[01:09:15] <Tobba> Sync only guarantees safety for immutable references
[01:09:16] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz‚Ä¶)
[01:09:20] <Tobba> so FnMut+Sync is in fact completely useless
[01:09:26] <arrrrrrr1> ah, it doesn't cast to Fn but the FnMut casts to FnMut
[01:09:33] <arrrrrrr1> eh
[01:09:39] <arrrrrrr1> Fn casts to FnMut
[01:09:43] <arrrrrrr1> so to speak
[01:10:22] <Tobba> hm, Sync + traits that have no immutable methods should have a lint
[01:12:16] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[01:15:05] *** Joins: Rym (y@moz-cfe.mso.205.31.IP)
[01:41:53] *** Joins: killercup (killercup@moz-edmf2j.dip0.t-ipconnect.de)
[01:41:59] *** Quits: killercup (killercup@moz-edmf2j.dip0.t-ipconnect.de) (Quit: My Mac has gone to sleep. ZZZzzz‚Ä¶)
[01:44:21] *** Quits: imperio (Mibbit@moz-8otf3a.fbx.proxad.net) (Quit: http://www.mibbit.com ajax IRC Client)
[01:46:27] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[01:46:52] *** Joins: reem (reem@moz-3s1lie.coob.q2h1.0009.2601.IP)
[01:52:40] *** Joins: jmitchell (jmitchell@moz-o8p.pug.156.104.IP)
[01:54:39] *** Quits: jmitchell (jmitchell@moz-o8p.pug.156.104.IP) (Connection closed)
[01:54:57] *** Joins: jmitchell (jmitchell@moz-o8p.pug.156.104.IP)
[01:57:46] *** Joins: dr_bibble (Mibbit@moz-juv.9o3.252.72.IP)
[01:58:33] *** Quits: dr_bibble (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[02:02:54] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[02:04:49] *** Quits: {-}grant ({0}grant@moz-fctpaa.mo.charter.com) (Connection closed)
[02:09:11] *** Quits: Rym (y@moz-cfe.mso.205.31.IP) (Ping timeout: 121 seconds)
[02:09:24] *** Joins: {-}grant ({0}grant@moz-fctpaa.mo.charter.com)
[02:14:30] *** Joins: gsingh93 (gulshan@moz-3fu4am.mi.comcast.net)
[02:15:50] *** Joins: munksgaard (munksgaard@moz-1i4.hq0.225.130.IP)
[02:26:02] *** Quits: {-}grant ({0}grant@moz-fctpaa.mo.charter.com) (Connection closed)
[02:26:13] *** Joins: {-}grant ({0}grant@moz-fctpaa.mo.charter.com)
[02:34:32] *** Joins: summerlight_ (summerlight@moz-99k.2mj.130.121.IP)
[02:34:45] *** Quits: {-}grant ({0}grant@moz-fctpaa.mo.charter.com) (Ping timeout: 121 seconds)
[02:37:20] *** Joins: Rym (y@moz-cfe.mso.205.31.IP)
[02:42:28] *** Quits: gsingh93 (gulshan@moz-3fu4am.mi.comcast.net) (Ping timeout: 121 seconds)
[02:43:27] *** Joins: eibwen (eibwen@moz-avvkrb.dip0.t-ipconnect.de)
[02:45:38] *** Joins: nrc (nrc@moz-4bhi2i.xtra.co.nz)
[02:45:38] *** ChanServ sets mode: +o nrc
[02:53:13] <arrrrrrr1> does an anonymous mapping always map a multiple of a page size?
[02:53:24] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[02:56:05] <arrrrrrr1> the language in the manpage is not 100% clear but it looks that way
[02:56:57] *** Joins: gsingh93 (gulshan@moz-3fu4am.mi.comcast.net)
[02:58:43] *** Quits: munksgaard (munksgaard@moz-1i4.hq0.225.130.IP) (Ping timeout: 121 seconds)
[02:59:02] *** Joins: newbie (eibwen@moz-a8u4d3.dip0.t-ipconnect.de)
[02:59:58] *** Quits: marsel (user@moz-tjk.bk3.180.94.IP) (Ping timeout: 121 seconds)
[03:01:00] *** Quits: kmcguire_ (kmcguire@moz-pg1gb9.biz.rr.com) (Connection closed)
[03:01:17] *** Joins: kmcguire_ (kmcguire@moz-pg1gb9.biz.rr.com)
[03:01:57] *** Quits: eibwen (eibwen@moz-avvkrb.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[03:08:47] *** Joins: mystor (mystor@moz-kg20eb.cable.rogers.com)
[03:12:25] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Connection closed)
[03:15:05] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[03:20:58] <nrc> huon (or anyone else who might be interested): would you mind reading https://github.com/nrc/r4cppp/blob/master/graphs/README.md and giving me some feedback? It's a tutorial on graphs in Rust
[03:22:48] *** Quits: mystor (mystor@moz-kg20eb.cable.rogers.com) (Connection closed)
[03:23:05] *** Joins: mystor (mystor@moz-kg20eb.cable.rogers.com)
[03:26:45] <reem> nrc: I'm reading
[03:26:56] <nrc> thanks reem!
[03:27:19] <nrc> (I just a secod ago fixed a typo which made a one item list in the middle of a para where it shouldn't be)
[03:29:51] *** Quits: kimundi (kimundi@moz-d6fa5i.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[03:30:51] *** Quits: mystor (mystor@moz-kg20eb.cable.rogers.com) (Connection closed)
[03:31:07] *** Joins: kimundi (kimundi@moz-l9a7he.dip0.t-ipconnect.de)
[03:31:19] *** Joins: mystor (mystor@moz-kg20eb.cable.rogers.com)
[03:35:01] <nrc> reem: going afk for an hour or so, I'll read scrollback when I return
[03:35:06] *** nrc is now known as nrc|afk
[03:35:20] *** kimundi is now known as zz_kimundi
[03:35:29] *** Quits: mystor (mystor@moz-kg20eb.cable.rogers.com) (Ping timeout: 121 seconds)
[03:35:47] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[03:42:07] *** zz_kimundi is now known as kimundi
[03:42:17] *** Quits: Rym (y@moz-cfe.mso.205.31.IP) (Ping timeout: 121 seconds)
[03:45:55] *** Quits: adu (ajr@moz-bqtbbn.fios.verizon.net) (Client exited)
[03:46:55] <huon> nrc|afk: one can use TypedArena to make the borrowed pointer version work
[03:47:19] <huon> nrc|afk: (work for mutable graphs)
[03:48:34] <huon> nrc|afk: oh, I was commenting too early
[03:48:46] *** Joins: larhat1 (Adium@moz-9vj.vcf.204.37.IP)
[03:50:34] *** Quits: larhat (Adium@moz-kqv3ht.mfe0.h1q1.2168.2a02.IP) (Ping timeout: 121 seconds)
[03:50:38] <reem> ok
[03:50:49] <Yurume> https://github.com/lifthrasiir/rust/commit/42add1d
[03:51:18] <Yurume> flt2dec in the libcore and libcoretest! *hurray*
[03:51:31] <Yurume> (it is the first commit of the upcoming strconv PR.)
[03:52:30] <cmr> arrrrrrr1: yes, you can't create mappings that aren't a multiple of the page size (because that's how the MMU works)
[03:53:03] <reem> nrc|afk: sort of a PR thing but characterizing unsafe as more ergonomic is unfortunate
[03:58:01] <reem> nrc|afk: stepping away for a bit, will comment more later, it's pretty good so far :)
[04:01:32] *** Quits: newbie (eibwen@moz-a8u4d3.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[04:02:13] <huon> nrc|afk: woah, woah, woah
[04:02:14] <huon> let mut_root: &mut Node = mem::transmute(&*root);
[04:02:29] <huon> is pretty bad
[04:02:52] <huon> It'd be quite unfortunate to publish a "reference" blog post that's explicitly violating core language rules like that
[04:03:48] <huon> specifically, the memory of `T` in `&T` shouldn't be mutated, unless that patch of memory is contained directly in an `UnsafeCell`
[04:05:06] <huon> nrc|afk: similar concerns apply to the same transmute in the & version
[04:07:46] <huon> nrc|afk: hm, I guess it's safe in the context, but still... it seems quite unfortunate
[04:08:09] <huon> maybe make_unique could play a part for the Rc version?
[04:08:22] <huon> also, &RefCell<Node> should work for the arena based one?
[04:09:32] *** Joins: adu (ajr@moz-0foa9t.md.comcast.net)
[04:13:55] *** Quits: gsingh93 (gulshan@moz-3fu4am.mi.comcast.net) (Ping timeout: 121 seconds)
[04:15:21] <huon> nrc|afk: (I'm concerned, because it can be quite tempting to "solve" one's reference mutability problems with transmute)
[04:16:09] <XMPPwocky> maybe there should be a lint for that?
[04:17:41] *** Joins: avikpal (avikpal@moz-7qc.0pm.194.117.IP)
[04:19:14] *** Quits: adu (ajr@moz-0foa9t.md.comcast.net) (Client exited)
[04:20:10] *** Quits: avikpal (avikpal@moz-7qc.0pm.194.117.IP) (Connection closed)
[04:20:43] *** Joins: adu (ajr@moz-0foa9t.md.comcast.net)
[04:25:50] *** Quits: huseby (huseby@moz-m7l0au.d2vr.5em6.6400.2605.IP) (Ping timeout: 121 seconds)
[04:26:50] *** Quits: adu (ajr@moz-0foa9t.md.comcast.net) (Client exited)
[04:30:57] *** Joins: garming (garming@moz-pqd1u2.xtra.co.nz)
[04:33:11] <reem> for transmute from &T to &mut T? ya.
[04:34:46] *** Joins: eddyb_ (eddyb@moz-6k1.q07.26.188.IP)
[04:35:29] *** Quits: eddyb (eddyb@moz-6k1.q07.26.188.IP) (Quit: Bye)
[04:37:11] <XMPPwocky> can you check lang items in a lint?
[04:37:28] <XMPPwocky> and resolve imports?
[04:38:12] *** Joins: semarie (semarie@moz-c3u0pj.li)
[04:39:37] *** Quits: arrrrrrr1 (arrrrrrrrs@moz-3mq15u.dynamic.qsc.de) (Ping timeout: 121 seconds)
[04:40:14] <huon> all that info has already happened by the time lints run
[04:40:39] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz‚Ä¶)
[04:40:55] <XMPPwocky> neat
[04:41:03] <huon> (and lints have access to it
[04:41:05] <huon> )
[04:44:54] *** Quits: jmitchell (jmitchell@moz-o8p.pug.156.104.IP) (Ping timeout: 121 seconds)
[04:58:14] *** Joins: huseby (huseby@moz-m7l0au.d2vr.5em6.6400.2605.IP)
[04:58:19] *** Joins: bkearns (Adium@moz-1kbdt7.ca.comcast.net)
[05:00:01] *** Joins: laumann (thomas@moz-n9e72h.0.fullrate.dk)
[05:03:11] *** Joins: jmitchell (jmitchell@moz-o8p.pug.156.104.IP)
[05:05:04] *** Joins: joneshf-laptop (joneshf@moz-l4h.b5s.208.98.IP)
[05:05:04] *** Quits: joneshf-laptop_ (joneshf@moz-l4h.b5s.208.98.IP) (Connection closed)
[05:05:12] *** Joins: {-}grant ({0}grant@moz-fctpaa.mo.charter.com)
[05:09:45] *** Joins: gsingh93 (gulshan@moz-3fu4am.mi.comcast.net)
[05:10:14] *** Joins: Rym (y@moz-cfe.mso.205.31.IP)
[05:11:57] *** Quits: kmcguire_ (kmcguire@moz-pg1gb9.biz.rr.com) (Ping timeout: 121 seconds)
[05:14:38] *** Quits: Rym (y@moz-cfe.mso.205.31.IP) (Ping timeout: 121 seconds)
[05:15:49] <cmr> hm
[05:16:02] <cmr> how do I enable a logger for tests?
[05:17:51] *** Joins: theme (theme@moz-i3mhhb.asianet.co.th)
[05:26:15] *** nrc|afk is now known as nrc
[05:26:33] *** Quits: reem (reem@moz-3s1lie.coob.q2h1.0009.2601.IP) (Connection closed)
[05:26:50] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[05:27:29] <nrc> reem: thanks. I think using unsafe in this case *is* more ergonomic, although obviously more risky. Perhaps I should sell the safe version better...
[05:27:41] <nrc> huon: dammit I always forget I need UnsafeCell
[05:28:10] <nrc> (it is unfortunate that something so crucial is opt in and there is no hint from the compiler when you forget it. Seems like the mother of all footguns)
[05:29:09] <nrc> Hmm, I hadn't thought of using RefCell with the arena, but I guess it would
[05:29:43] <nrc> I miss transmute_mut or whatever it was called - seems safer than transmute in cases like this
[05:30:34] <nrc> I think cases like this (mutable initialisation then immutabiltiy with clearly scoped bounds) are the safest possible use of unsafe and these kinds of transmutes
[05:30:45] <nrc> it's fairly easy to reason about the invariants
[05:31:22] * nrc wonders what effect skipping the UnsafeCell would have
[05:34:13] <nrc> gah! of course UnsafeCell is a horror show, ergonomically
[05:46:05] *** Quits: laumann (thomas@moz-n9e72h.0.fullrate.dk) (Quit: leaving)
[05:46:32] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[05:46:35] <nrc> are there any decent docs on UnsafeCell? The lib docs don't actually explain what it does or why one should use it :-s
[05:48:07] *** Joins: laumann (thomas@moz-n9e72h.0.fullrate.dk)
[05:49:03] <theme> Just wondering one thing
[05:49:12] <theme> why does UnsafeCell::get() return *mut T?
[05:49:18] <theme> why doesn't it return &mut T
[05:49:43] <cmr> theme: the only reason UnsafeCell exists is to allow aliasing, and &mut is never allowed to alias.
[05:50:04] <theme> erm... ok
[05:50:27] <cmr> nrc: it doesn't really "do" anything except serve as the interior mutability marker to the rest of the compiler, and I think it also affects ... Sync?
[05:50:35] <cmr> One of those magic traits.
[05:50:37] <theme> It's not Sync
[05:50:54] <theme> And I don't quite understand too why into_inner() is unsafe
[05:51:14] <nrc> cmr: but I want to know what "serve as the interior mutability marker to the rest of the compiler" actually does
[05:52:00] <cmr> nrc: well, for one it supresses emiting alias info for &T arguments
[05:52:07] <cmr> noalias, that is.
[05:52:13] <nrc> theme: I think the idea is that any access to the interior of the UnsafeCell is unsafe, so its a way to force you to use unsafe blocks
[05:52:34] <theme> nrc, but get() is safe
[05:52:40] <cmr> theme: it moves the value, but there can still be outstanding pointers to the value.
[05:52:52] <nrc> theme: but it returns a *mut, so deref'ing is unsafe
[05:52:55] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[05:54:01] <nrc> cmr: it would be good to have docs documenting exactly what it does. If it only prevents noalias optimisations, then I can reason about where it is safe to use it (where there are no &mut refs, presumably)
[05:54:20] <cmr> nrc: that's the only thing I know for sure that it does, I'm not sure what else it does.
[05:54:38] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[06:02:30] *** Quits: jmitchell (jmitchell@moz-o8p.pug.156.104.IP) (Ping timeout: 121 seconds)
[06:04:14] <nrc> I wish there were a per-scope way (rather than per-type) to indicate that something may have aliases
[06:10:52] *** Joins: Rym (y@moz-cfe.mso.205.31.IP)
[06:14:30] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[06:15:24] *** Quits: Rym (y@moz-cfe.mso.205.31.IP) (Ping timeout: 121 seconds)
[06:16:59] <eddyb_> nrc: *unsafe_cell.get() creates a temporary mutable lvalue which is noalias, fwiw...
[06:17:38] <eddyb_> you can't mutate that and have &T to the interior, as well
[06:18:09] <eddyb_> nrc: it's pretty safe to say that you *have* to use UnsafeCell religiously
[06:20:31] <theme> eddyb_, is it valid to have &UnsafeCell<T> and mutate *unsafe_cell.get()?
[06:21:19] *** Quits: Anchovieshat (cloin@moz-4t5baq.pentaquine.com) (Connection closed)
[06:21:35] *** Joins: Anchovieshat (cloin@moz-4t5baq.pentaquine.com)
[06:22:40] <nrc> eddyb_: I would like to understand exactly when I need to use it and exactly why, because it is such a pain to use it. I would also like to have it better documented so other people can find out those answers - telling people they should do something "just because" (which is what the docs say atm, pretty much) is usually not very successful
[06:23:10] *** Quits: rprichard (rprichard@moz-s27r3p.en8f.d045.0009.2601.IP) (Ping timeout: 121 seconds)
[06:23:22] *** Joins: rprichard (rprichard@moz-ekp75j.en8f.d045.0009.2601.IP)
[06:24:15] *** Quits: theme (theme@moz-i3mhhb.asianet.co.th) (Quit: Leaving)
[06:26:01] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[06:26:30] *** Quits: sprang (sprang@moz-skdqur.hfc.comcastbusiness.net) (Ping timeout: 121 seconds)
[06:26:44] *** Quits: gsingh93 (gulshan@moz-3fu4am.mi.comcast.net) (Ping timeout: 121 seconds)
[06:27:08] *** Joins: quantheory (quantheory@moz-m50t2f.44nj.jtvf.0001.2601.IP)
[06:33:12] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[06:37:05] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[06:38:19] *** Quits: nrc (nrc@moz-4bhi2i.xtra.co.nz) (Connection closed)
[06:39:03] *** Joins: nrc (nrc@moz-4bhi2i.xtra.co.nz)
[06:39:04] *** ChanServ sets mode: +o nrc
[06:40:27] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz‚Ä¶)
[06:41:45] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[06:41:56] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[06:46:16] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[06:52:20] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[06:52:42] *** Joins: dinfuehr (dinfuehr@moz-jrmm4j.highway.telekom.at)
[06:52:45] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[06:56:58] <eddyb_> nrc: well, it's very hard to define this stuff because aliasing... works more like borrowing than anything else, really. and LLVM wasn't designed around borrowing
[06:57:26] <eddyb_> nrc: i.e. you can have multiple &mut T to the same T but only one of them can be used to store data
[06:57:38] <eddyb_> for zero-sized T, that means any pointer value is actually valid
[06:57:50] <eddyb_> (other than 0)
[06:58:47] <eddyb_> nrc: I guess a decent start would be a function which received multiple pointers to the same type. depending on the reference/pointer and pointee types, they follow different rules
[06:58:55] *** Joins: theme (theme@moz-i3mhhb.asianet.co.th)
[06:59:26] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[07:02:17] <eddyb_> nrc: if you have two &UnsafeCell<T> and you do *left.get() = *right.get(); without first making sure they are not the same UnsafeCell<T> in memory (which is what almost all C++ copy operators need to check), then that's UB
[07:02:38] <eddyb_> nrc: but let x = *right.get(); *left.get() = x; isn't
[07:03:28] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[07:03:43] <eddyb_> (which is what you end uo with left.set(right.get()) if you were using &Cell<T> instead)
[07:05:05] <eddyb_> nrc: fwiw I have never seen someone who doesn't get aliasing wrong sometimes. really, I need to put a big DISCLAIMER before any of these explanations
[07:05:20] <eddyb_> "I may not have a fracking clue of what I'm talking about"
[07:06:07] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[07:07:13] <eddyb_> nrc: we're also not passing all the information we could to LLVM (and LLVM itself can't handle *everything* we can deduce from types) so you may not get bad codegen for a lot of UB cases
[07:08:01] <eddyb_> nrc: one way to think about it is that &T makes T "protected" from mutation except for UnsafeCell regions
[07:08:29] <eddyb_> which then act like "unclaimed" memory behind *mut T
[07:08:48] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[07:09:14] <eddyb_> that... brings an interesting point
[07:09:27] <eddyb_> aliasing &mut UnsafeCell<T> might be safe, because there are 0 protected bytes
[07:09:46] <theme> eddyb_, no
[07:09:52] <eddyb_> but then again it might be saner to consider &mut UnsafeCell<T> the same as &mut T
[07:09:56] <theme> eddyb_, the `*mut T` is also a value
[07:10:00] <theme> not just the `T`
[07:10:10] <eddyb_> theme: what?
[07:10:16] <theme> that means that `*x = UnsafeCell::new(y)` might cause problems
[07:10:30] <eddyb_> what *mut T value/
[07:10:41] <eddyb_> UnsafeCell<T> is a T newtype
[07:11:04] <theme> eddyb_, ok... then substitute `*mut T` with `UnsafeCell<T>` itself
[07:11:18] <eddyb_> the .get() method returns &self cast to *mut T
[07:11:25] <eddyb_> or rather, &self.value
[07:11:26] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[07:11:38] *** Joins: Rym (y@moz-cfe.mso.205.31.IP)
[07:11:53] <theme> eddyb_, if x is `&mut UnsafeCell<T>` and x is aliased, `*x = UnsafeCell::new(y)` can cause weird things
[07:12:23] <eddyb_> yes, because of whole value mutation &mut needs to go through UnsafeCell
[07:12:44] <theme> eddyb_, that meants that `&mut UnsafeCell<T>` is not safe to alias
[07:12:53] <theme> s/meants/means
[07:12:59] <eddyb_> I said "might" and then corrected myself
[07:13:04] <eddyb_> it was just a random thought
[07:13:21] <theme> erm... ok
[07:13:27] <eddyb_> so, it's just &UnsafeCell<T> that acts like "an empty frame"
[07:13:52] <theme> Is UnsafeCell<UnsafeCell<T>> safe to alias?
[07:14:02] <theme> wait, that's stupid
[07:14:03] <nrc> is it correct to say that the only way UnsafeCell affects compilation is via llvm's alias analysis?
[07:14:25] <theme> Is UnsafeCell<&mut UnsafeCell<T>> safe to alias?
[07:14:36] <theme> meaning that they point to the same UnsafeCell<T>
[07:15:29] <eddyb_> nrc: no
[07:15:37] <nrc> and is there any way to influence that analysis in a more fine grained way?
[07:15:45] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[07:15:45] <nrc> eddyb_: how else does it affect compilation?
[07:15:46] <eddyb_> no again
[07:16:00] <eddyb_> nrc: static with UnsafeCell interior is .data instead of .rodata
[07:16:10] *** Quits: Rym (y@moz-cfe.mso.205.31.IP) (Ping timeout: 121 seconds)
[07:17:20] <eddyb_> nrc: and I've had a prototype of an optimization that used SSA "values" instead of creating allocas, and "UnsafeCell interior" was an important part in making it safe
[07:17:37] <eddyb_> then again, it could be driven entirely on the existence of borrows
[07:17:52] <eddyb_> (but I didn't have that at the time)
[07:17:55] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[07:18:40] <nrc> hmm
[07:19:42] <nrc> so it seems there is no way to have phased construction of a graph - even if the mutation only happens during initialisation you have to treat it like a mutable structure forever - with all the awful non-ergonomics that entails
[07:20:05] <eddyb_> why are you not using an arena and Cell?
[07:20:15] <eddyb_> or do you have vectors?
[07:20:46] <nrc> I am using arena, but I don't want to use Cell
[07:20:53] <eddyb_> nrc: Cell is 0 cost
[07:21:08] <nrc> it has ergonomic cost
[07:21:10] <eddyb_> nrc: it is *the best choice* if you can use it
[07:21:23] <nrc> and can only be used with Copy objects
[07:21:37] <nrc> I think you have to use RefCell in a graph
[07:21:44] <nrc> since the nodes won't be Copy (in general)
[07:21:45] <eddyb_> well, you said you don't want to use, that kinda implies you *can* use it
[07:21:54] <eddyb_> nrc: would nodes have a vector?
[07:21:58] <nrc> yep
[07:22:01] <nrc> of edges
[07:22:12] <nrc> (or a HashSet or something)
[07:22:15] <eddyb_> Cell<Vec<Rc<T>>> has definable semantics for any T, fwiw. but it's hard to do it on a case-by-case basis
[07:22:24] <eddyb_> (that's just an example)
[07:22:27] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[07:22:45] <nrc> Hmm, I was using Vec<Rc<RefCell>>
[07:22:56] <nrc> I didn't think about putting the Vec in a Cell
[07:23:01] <eddyb_> it won't work
[07:23:45] <eddyb_> it's not something that wouldn't be safe to use (in a similar manner to a dynamic array type in most GC-based scripting languages)
[07:23:58] <eddyb_> but we're not there yet :(
[07:24:23] <eddyb_> nrc: there's a predicate allowing the old Cell (which had an `with` method taking a closure) to work for arbitrary code, but it's not something we can encode right now
[07:24:49] <eddyb_> "this function cannot ever call itself"
[07:25:05] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[07:27:13] <eddyb_> nrc: struct Node<'a, T> { data: T, edges: RefCell<Vec<&'a Node<'a, T>>> } is probably what I'd use for now
[07:28:17] <eddyb_> nrc: you could replace the edges with an UnsafeCell-based instance of the "Cell<Vec<_>>" I wish we had
[07:29:00] <eddyb_> nrc: you just need to never expose &[_] or &mut [_] to the interior of the Vec (or &Vec/&mut Vec which can lead there)
[07:29:27] <eddyb_> nrc: len, index, push, pop, insert, etc. are safe to do
[07:29:45] <eddyb_> nrc: but the indexing has to copy out (like Cell's get method)
[07:30:30] <eddyb_> nrc: and then the node data itself can use Cell or RefCell as necessary
[07:31:12] <eddyb_> nrc: are the operations you need to be able to do on nodes limited after construction is finished?
[07:31:47] <eddyb_> because an "immutable" graph with struct Node<'a, T> { data: T, edges: [&'a Node<'a, T>] } would be pretty cool to see
[07:35:21] <XMPPwocky> i want that too for representing a BSP tree
[07:35:35] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[07:35:59] <XMPPwocky> it's totally immutable once the map is loaded, but it's actually a pretty complex structure in practice because the leaves have a bunch of data attached to them, and then that data references other things
[07:36:16] <XMPPwocky> there's like 3 or 4 levels of indirection. currently i store indexes into an array and just eat the cost of bounds checking
[07:38:19] *** Quits: summerlight_ (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[07:40:13] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[07:43:35] <nrc> A DST node, interesting
[07:44:43] <nrc> eddyb_: I don't understand all of that - were you meaning Cell<Vec<..>> or Vec<Rc<RefCell<...>> wouldn't work?
[07:49:48] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[07:51:20] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[07:55:22] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Ping timeout: 121 seconds)
[07:55:40] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[08:02:08] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[08:07:19] *** Quits: semarie (semarie@moz-c3u0pj.li) (Quit: WeeChat 1.1)
[08:08:19] *** Quits: dinfuehr (dinfuehr@moz-jrmm4j.highway.telekom.at) (Connection closed)
[08:10:05] <bstrie> bors is idle!
[08:10:44] <theme> again?
[08:11:05] <bstrie> quick, someone approve something!
[08:12:25] *** Joins: Rym (y@moz-cfe.mso.205.31.IP)
[08:16:57] *** Quits: Rym (y@moz-cfe.mso.205.31.IP) (Ping timeout: 121 seconds)
[08:17:21] *** Joins: Sindriava (textual@moz-ca79jq.broadband10.iol.cz)
[08:29:18] <eddyb_> nrc: Cell<Vec<...>> is not something you can use right now. I was suggesting you could implement the same semantics you may see in a GC language, using a wrapper for UnsafeCell<Vec<...>>, e.g. "CellVec", to remove the cost of the RefCell<Vec<...>>
[08:36:45] *** Joins: dinfuehr (dinfuehr@moz-jrmm4j.highway.telekom.at)
[08:41:05] *** Quits: eddyb_ (eddyb@moz-6k1.q07.26.188.IP) (Ping timeout: 121 seconds)
[08:41:21] *** Quits: Sindriava (textual@moz-ca79jq.broadband10.iol.cz) (Quit: My Mac has gone to sleep. ZZZzzz‚Ä¶)
[08:42:22] *** Quits: laumann (thomas@moz-n9e72h.0.fullrate.dk) (Quit: leaving)
[08:45:24] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Quit: It's a joke, it's all a joke.)
[08:46:07] <nrc> ah, Ok, I see what you mean
[08:50:18] <Manishearth> acrichto: buildbot still broken
[08:52:14] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[08:56:54] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[08:56:58] *** Quits: larhat1 (Adium@moz-9vj.vcf.204.37.IP) (Quit: Leaving.)
[08:57:23] *** Joins: reem (reem@moz-3s1lie.coob.q2h1.0009.2601.IP)
[08:57:48] *** Quits: nrc (nrc@moz-4bhi2i.xtra.co.nz) (Ping timeout: 121 seconds)
[09:00:12] *** Joins: semarie (semarie@moz-g00ato.abo.wanadoo.fr)
[09:04:54] *** Joins: munksgaard (munksgaard@moz-urnkl5.u.parknet.dk)
[09:09:46] *** Quits: dinfuehr (dinfuehr@moz-jrmm4j.highway.telekom.at) (Connection closed)
[09:13:11] *** Joins: Rym (y@moz-cfe.mso.205.31.IP)
[09:13:20] *** Quits: theme (theme@moz-i3mhhb.asianet.co.th) (Quit: Leaving)
[09:14:40] *** Joins: nrc (nrc@moz-4bhi2i.xtra.co.nz)
[09:14:40] *** ChanServ sets mode: +o nrc
[09:17:43] *** Quits: Rym (y@moz-cfe.mso.205.31.IP) (Ping timeout: 121 seconds)
[09:28:02] *** Quits: jxv (jxv___@moz-pi22qa.ca.charter.com) (Quit: Leaving)
[09:33:47] *** Joins: Sindriava (textual@moz-ca79jq.broadband10.iol.cz)
[09:37:55] *** Joins: dinfuehr (dinfuehr@moz-jrmm4j.highway.telekom.at)
[09:39:11] *** Quits: nrc (nrc@moz-4bhi2i.xtra.co.nz) (Ping timeout: 121 seconds)
[09:57:06] *** Quits: dinfuehr (dinfuehr@moz-jrmm4j.highway.telekom.at) (Connection closed)
[09:59:03] *** Joins: dinfuehr (dinfuehr@moz-jrmm4j.highway.telekom.at)
[10:00:08] *** Joins: RossJH (textual@moz-8vn4o2.range86-165.btcentralplus.com)
[10:03:32] *** Quits: garming (garming@moz-pqd1u2.xtra.co.nz) (Ping timeout: 121 seconds)
[10:07:00] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Client exited)
[10:13:59] *** Joins: Rym (y@moz-cfe.mso.205.31.IP)
[10:18:29] *** Quits: Rym (y@moz-cfe.mso.205.31.IP) (Ping timeout: 121 seconds)
[10:24:01] *** Quits: dinfuehr (dinfuehr@moz-jrmm4j.highway.telekom.at) (Connection closed)
[10:26:45] *** Quits: quantheory (quantheory@moz-m50t2f.44nj.jtvf.0001.2601.IP) (Quit: Leaving)
[10:37:35] *** Quits: munksgaard (munksgaard@moz-urnkl5.u.parknet.dk) (Ping timeout: 121 seconds)
[10:40:10] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[10:40:41] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[10:56:53] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Client exited)
[11:08:48] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[11:10:26] *** Quits: Sindriava (textual@moz-ca79jq.broadband10.iol.cz) (Quit: My Mac has gone to sleep. ZZZzzz‚Ä¶)
[11:14:43] *** Joins: Rym (y@moz-cfe.mso.205.31.IP)
[11:19:13] *** Quits: Rym (y@moz-cfe.mso.205.31.IP) (Ping timeout: 121 seconds)
[11:33:45] *** Joins: arrrrrrr1 (arrrrrrrrs@moz-3mq15u.dynamic.qsc.de)
[11:37:15] *** Quits: reem (reem@moz-3s1lie.coob.q2h1.0009.2601.IP) (Connection closed)
[11:37:29] *** Joins: reem_ (reem@moz-2icmmi.ca.comcast.net)
[11:38:46] *** Quits: arrrrrrr1 (arrrrrrrrs@moz-3mq15u.dynamic.qsc.de) (Ping timeout: 121 seconds)
[11:40:13] *** Joins: imperio (Mibbit@moz-8otf3a.fbx.proxad.net)
[11:50:46] *** Joins: dinfuehr (dinfuehr@moz-br4u93.highway.telekom.at)
[11:50:53] *** Joins: marsel (user@moz-tjk.bk3.180.94.IP)
[11:51:17] *** Joins: ytain (ytain@moz-44k.q8p.140.24.IP)
[12:10:55] <kimundi> Woha, gh23606
[12:10:55] <[o__o]> Implement associated constants: https://github.com/rust-lang/rust/pull/23606
[12:15:25] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[12:15:29] *** Joins: Rym (y@moz-cfe.mso.205.31.IP)
[12:19:06] *** Joins: larhat (Adium@moz-9vj.vcf.204.37.IP)
[12:19:59] *** Quits: Rym (y@moz-cfe.mso.205.31.IP) (Ping timeout: 121 seconds)
[12:25:24] *** Joins: summerlight_ (summerlight@moz-99k.2mj.130.121.IP)
[12:34:59] *** Joins: ptalbot (ptalbot@moz-j4gnuh.fbx.proxad.net)
[12:38:51] *** Joins: kmcguire (kmcguire@moz-c955nf.res.rr.com)
[12:59:45] *** Joins: mib_jtivvy (Mibbit@moz-b11uqs.dynamic.upc.nl)
[13:00:25] *** Quits: reem_ (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[13:00:47] *** Joins: reem (reem@moz-3s1lie.coob.q2h1.0009.2601.IP)
[13:01:43] *** Joins: O01eg (o01eg@moz-0t3g6d.cgbk.4n8f.2698.2a02.IP)
[13:09:41] *** Joins: newbie (eibwen@moz-a8u4d3.dip0.t-ipconnect.de)
[13:19:23] *** Joins: killercup (killercup@moz-edmf2j.dip0.t-ipconnect.de)
[13:48:15] *** Quits: dinfuehr (dinfuehr@moz-br4u93.highway.telekom.at) (Connection closed)
[13:58:53] *** Joins: garming (garming@moz-pqd1u2.xtra.co.nz)
[14:02:07] *** Joins: eddyb_ (eddyb@moz-6k1.q07.26.188.IP)
[14:02:37] *** Joins: reem_ (reem@moz-3s1lie.coob.q2h1.0009.2601.IP)
[14:02:43] *** Quits: reem (reem@moz-3s1lie.coob.q2h1.0009.2601.IP) (Connection closed)
[14:11:44] <imperio> how comes that str doesn't implement Index trait ?
[14:11:53] <imperio> that's not convenient at all
[14:13:17] <Mutabah> imperio: Because that may allow indexing inside a character
[14:13:20] *** Quits: darnuria (darnuria@moz-cagds5.kokakiwi.net) (Quit: WeeChat 1.2-dev)
[14:13:21] *** Joins: munksgaard (munksgaard@moz-urnkl5.u.parknet.dk)
[14:13:29] <Mutabah> Which is often not what you want
[14:13:34] <imperio> hum...
[14:13:43] <Mutabah> (instead, the various iterators are more likely to be useful)
[14:14:01] <imperio> Then what method should I use to get the second character for example ?
[14:14:24] <imperio> well, just my_str[1] is super nice
[14:14:31] <Mutabah> imperio: .char_at(1)
[14:14:34] <imperio> more seems too much...
[14:14:49] <imperio> Mutabah: yep it's marked as deprecated...
[14:16:30] <Mutabah> imperio: Marked as unstable for me
[14:16:44] *** Quits: summerlight_ (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[14:17:47] *** Joins: dinfuehr (dinfuehr@moz-br4u93.highway.telekom.at)
[14:18:09] <imperio> Mutabah: I think I should update my compiler...
[14:19:32] *** Quits: garming (garming@moz-pqd1u2.xtra.co.nz) (Ping timeout: 121 seconds)
[14:20:01] <imperio> Mutabah: ah yes you're right. Thx !
[14:21:27] *** Joins: zmack (zmack@moz-4b0.o8l.26.188.IP)
[14:21:51] <eddyb_> imperio: .chars().nth(2)
[14:21:57] *** Quits: dinfuehr (dinfuehr@moz-br4u93.highway.telekom.at) (Ping timeout: 121 seconds)
[14:22:16] <eddyb_> or 1
[14:22:33] <eddyb_> the real question is... why do *need* that?
[14:23:01] <eddyb_> there are languages out there who made bad practices easy
[14:23:52] <imperio> eddyb_: I don't see how string[1] is a bad practice
[14:24:45] *** Quits: mib_jtivvy (Mibbit@moz-b11uqs.dynamic.upc.nl) (Quit: http://www.mibbit.com ajax IRC Client)
[14:25:54] *** Quits: pauls (pauls@moz-e5p333.ccs.neu.edu) (Ping timeout: 121 seconds)
[14:26:26] <eddyb_> imperio: what are you doing that you think requires that operation?
[14:27:22] <eddyb_> if ES5 had introduced some sane and efficient form of iteration instead of adding string indexing, the world would be a better place now
[14:27:45] <scott> imperio: it's O(n) for UTF-8 strings and too often people forget that
[14:27:49] *** Joins: munksgaa1d (munksgaard@moz-478pev.u.parknet.dk)
[14:28:08] <scott> then you end up with loops like `for i in 0..len { foo(string[i]); }` which is O(n^2)
[14:28:17] <eddyb_> scott: and it's not even right
[14:28:19] <eddyb_> (or... wrong)
[14:28:53] <scott> eddyb_: are you referring to codepoints vs. chars vs. graphemes and all that mess?
[14:28:54] *** Quits: marsel (user@moz-tjk.bk3.180.94.IP) (Ping timeout: 121 seconds)
[14:29:01] <imperio> eddyb_: https://github.com/jeremyletang/rgtk/blob/master/gtk3-sys/build.rs#L46
[14:29:55] <eddyb_> wat
[14:30:18] <eddyb_> imperio: is that supposed to do s.starts_with("-I")?
[14:30:30] <eddyb_> because... that's more efficient than what you have there
[14:30:44] <eddyb_> (it's just memcmp, really)
[14:30:47] *** Quits: munksgaard (munksgaard@moz-urnkl5.u.parknet.dk) (Ping timeout: 121 seconds)
[14:31:04] <eddyb_> (in this case, reading two bytes and comparing them, no loop)
[14:31:26] <imperio> eddyb_: I'm not sure what he didn't want to do. I didn't write this code, I'm just removing warnings before moving on
[14:31:44] <imperio> hum, I wamted to say : "what he wanted to do
[14:32:08] <scott> also, I don't think collecting `res` is necessary there
[14:32:14] <eddyb_> yupp, just noticed that
[14:32:27] <eddyb_> PathBuf::new is also wasteful
[14:32:48] <eddyb_> (since .include takes a &Path)
[14:32:59] <scott> oh, indeed, those don't need to be owned
[14:33:14] <simukis> putting so much thought into a script which only outputs build flags is much more wasteful no matter how I look at it
[14:33:16] <imperio> Like I said, I didn't write this code, I have a very few knowledge about build.rs stuff
[14:33:51] <eddyb_> simukis: the thing is, the current code looks like it took a lot of work
[14:34:05] <simukis> eddyb_: you mean hackarounds
[14:34:23] <eddyb_> why would you write more code when less works?
[14:34:45] <eddyb_> maybe Rust being explicit about costly operations isn't enough
[14:34:52] *** Quits: zmack (zmack@moz-4b0.o8l.26.188.IP) (Connection closed)
[14:35:32] *** Joins: marsel (user@moz-tjk.bk3.180.94.IP)
[14:35:52] <simukis> its just that people come from C/C++/Python so the thought process goes: ‚Äúoh well, the second character is always I so I will go ahead and filter over 2nd char‚Äù
[14:36:09] <simukis> rather than ‚Äúthe string starts with -I, filter over that‚Äù
[14:36:27] <scott> my first thought would definitely be "starts with -I"
[14:36:34] <eddyb_> https://gist.github.com/eddyb/97ec97e31096b03391e1
[14:36:36] <eddyb_> no filter
[14:36:49] <imperio> simukis: no, actually I prefer the second way. But are you sure it's "-I" ?
[14:36:51] <eddyb_> why would you write the iterator chains when this works?
[14:37:17] <simukis> imperio: this is filtering over output of pkgconfig.
[14:37:30] <simukis> which outputs the flags for compilers.
[14:37:35] <imperio> simukis: I should really take a loot at that...
[14:38:03] <kimundi> I guess this is the difference between "There should be one way to do this" and "There should be many way to do this"
[14:38:23] <simukis> imperio: here you go: `$ pkg-config --cflags gtk+-3.0`
[14:38:34] <imperio> eddyb_: hum... Your code is lot more nice than the current one. Would you mind to make a PR with it ?
[14:38:44] *** Joins: arrrrrrr1 (arrrrrrrrs@moz-3mq15u.dynamic.qsc.de)
[14:38:45] <scott> the for+if way seems much more C/C++/Pythonic than filtering, to me
[14:38:46] <eddyb_> I wish we could do `if let "-I" ++ path = s { gcc_conf.include(rest.as_path()); }`
[14:39:06] <eddyb_> scott: filtering is great if you need the iterator
[14:39:17] <scott> pattern synonyms! or first class patterns! whatever features you need to define that
[14:39:30] <eddyb_> in this case, you don't, since you're iterating immediatelly over it
[14:39:38] <scott> eddyb_: yeah, there's definitely a place for both methods
[14:39:50] <kimundi> Is PAT+PAT free in the pattern language?
[14:39:54] *** Quits: untitaker (untitaker@moz-4qpf64.highway.telekom.at) (Ping timeout: 121 seconds)
[14:40:07] <eddyb_> kimundi: yes, binops aren't used (other than @)
[14:40:13] <kimundi> I see
[14:40:38] <eddyb_> [b'-', b'I', ..rest] could work for a &[u8]
[14:40:40] <eddyb_> hmm!
[14:40:51] <eddyb_> [..b"-I", ..rest]
[14:40:53] <kimundi> well, it would definitly be nice to match on `b"magic" + [a, b] => ...` 
[14:41:04] <eddyb_> [.."-I", ..rest]
[14:41:21] <eddyb_> this might work... one day :D
[14:41:28] <kimundi> eddyb_: We could remove that from an replace it with b"-I" + rest
[14:41:36] <kimundi> that form*
[14:41:52] <eddyb_> kimundi: eh, I'm not sure
[14:41:54] <kimundi> might be potentially cleaner with variadice generics and range patterns and such :P
[14:42:09] <eddyb_> Rust's syntax is really saturated if you include future features
[14:42:24] <scott> can be added backcompat, postponed, next! :p
[14:43:23] <eddyb_> if I make something optimized for brevity and usable for "executable specifications", I'll definitely need fancy pattern matching on sequences
[14:43:57] <eddyb_> I should try and sketch a parser, it might end up pretty nice
[14:44:10] <eddyb_> imperio: I don't mind if you use that in a PR
[14:44:21] <eddyb_> imperio: but I am not going to start cleaning up random code on the internet
[14:44:26] <eddyb_> imperio: mostly because it's addicting
[14:45:03] <imperio> eddyb_: I understand the feeling haha. I'd prefer you to make the PR. It's your code and I'd feel uneasy to use it just like that
[14:45:58] *** Joins: untitaker (untitaker@moz-ae93uo.highway.telekom.at)
[14:47:16] <eddyb_> imperio: you can mention me in the PR. if you're already working on it, then I don't see the point in me dropping what I'm working on to submit the PR
[14:47:28] <eddyb_> (sorry)
[14:47:56] <eddyb_> imperio: I will check one thing though, first
[14:48:02] <imperio> eddyb_: I'm not working on this part, the warning just annoyed me. But if you're ok with that then I'll do
[14:48:13] <imperio> eddyb_: ok ! please do
[14:48:22] <eddyb_> aaand doc search is broken
[14:48:32] <eddyb_> and by broken I mean it takes a full minute to load
[14:48:57] <eddyb_> imperio: http://doc.rust-lang.org/std/ffi/trait.AsOsStr.html I was hoping this was the case
[14:49:16] <eddyb_> imperio: so any UTF-8 string is a valid OsStr and also a valid Path
[14:49:33] <eddyb_> which means the PathBuf allocation is indeed unnecessary
[14:49:36] <imperio> that's interesting to know
[14:49:49] <eddyb_> (and my code isn't broken. at least, not because of the as_path call :P)
[14:50:01] <imperio> haha
[14:52:57] *** Joins: imperio2 (Mibbit@moz-8otf3a.fbx.proxad.net)
[14:54:15] *** Joins: jmitchell (jmitchell@moz-o8p.pug.156.104.IP)
[14:55:26] <imperio> eddyb_: it works just fine (not like anyone had any doubts but you have the confirmation :D)
[14:55:35] <eddyb_> :D
[15:01:19] <imperio> eddyb_: PR created, notification will come for you
[15:02:22] <eddyb_> I think I heard my phone :P
[15:02:49] <imperio> Nice ! Now let's see if there's rust issue I could fix...
[15:04:13] <imperio> gh23599
[15:04:13] <[o__o]> Cursor doesn't implement Debug: https://github.com/rust-lang/rust/issues/23599
[15:04:25] <imperio> I don't see why it would be needed here...
[15:09:32] <simukis> Debug is useful on any and every object
[15:10:34] <simukis> being able to print anything is always useful. As far as Cursor goes, it could print its internal buffer or its address as well as current index
[15:11:18] <imperio> simukis: then I'll do it
[15:12:03] <simukis> (actually I‚Äôm leaning more towards address of the buffer rather than whole buffer, since that would make Debug implementation useless in most of the cases
[15:12:20] <imperio> and very heavy
[15:13:57] *** Quits: reem_ (reem@moz-3s1lie.coob.q2h1.0009.2601.IP) (Connection closed)
[15:14:19] *** Joins: reem (reem@moz-3s1lie.coob.q2h1.0009.2601.IP)
[15:18:32] *** Quits: imperio2 (Mibbit@moz-8otf3a.fbx.proxad.net) (Quit: http://www.mibbit.com ajax IRC Client)
[15:19:16] <arrrrrrr1> acrichto: aturon: gh23607
[15:19:17] <[o__o]> Derive missing trait implementations for cursor: https://github.com/rust-lang/rust/pull/23607
[15:20:20] <simukis> arrrrrrr1: I‚Äôm not sure about Copy/Clone impls on that, since these require a copy/clone bound on T too
[15:20:22] <simukis> s/since/because/
[15:20:41] <arrrrrrr1> looks at the code generated by derive
[15:20:56] <arrrrrrr1> *look
[15:31:26] *** Joins: eddyb__ (eddyb@moz-dhp.t65.25.188.IP)
[15:32:29] *** eddyb__ is now known as eddyb
[15:34:17] *** Quits: eddyb_ (eddyb@moz-6k1.q07.26.188.IP) (Ping timeout: 121 seconds)
[15:38:15] *** Quits: jmitchell (jmitchell@moz-o8p.pug.156.104.IP) (Connection closed)
[15:38:22] *** Joins: jmitchell (jmitchell@moz-o8p.pug.156.104.IP)
[15:40:17] <imperio> erf... I hate when people make a PR on an issue you said you were working on without noticing anyone...
[15:40:18] *** Joins: mystor (mystor@moz-dvb.6fm.114.24.IP)
[15:42:14] *** Joins: dinfuehr (dinfuehr@moz-rmfk49.highway.telekom.at)
[15:55:17] *** Joins: scialex (scialex@moz-j5mi8i.cs.brown.edu)
[15:57:09] *** Joins: oakwhiz (oakwhiz@moz-entagd.vc.shawcable.net)
[15:57:47] <simukis> eddyb: have enough free time to push a branch to try?
[15:58:10] <eddyb> simukis: @bors try on a PR would be nicer :)
[15:58:19] <eddyb> but yeah, I just need the remote and the branch name
[15:59:10] <simukis> eddyb: https://github.com/nagisa/rust/tree/stack-handling-cleanup branch please üòä
[15:59:22] <eddyb> mkay
[15:59:31] * simukis never was a fan of WIP PRs
[15:59:37] <simukis> though probably should become one
[15:59:41] <imperio> eddyb: and can you take a look at gh23609 please ? (maybe I'm asking a bit too much, no ?)
[15:59:42] <[o__o]> Add Debug trait on Cursor: https://github.com/rust-lang/rust/pull/23609
[16:00:09] <simukis> imperio: its a weekend, be patient üòâ
[16:00:43] <imperio> simukis: I am. I just wanted an advice if possible. Otherwise I'll wait tomorrow
[16:01:38] <Yurume> imperio, one resolution is to tackle a problem which deserves work but nobody seems to care...
[16:02:38] <eddyb> git push -f upstream nagisa/stack-handling-cleanup:try
[16:02:39] <imperio> Yurume: Sorry but I'm not sure to understand what you say
[16:02:42] <eddyb> this better be correct
[16:03:06] <simukis> eddyb: yay!
[16:03:40] <Yurume> imperio, like floating point formatting algorithms I'm working on?
[16:04:00] <simukis> eddyb: thanks a lot
[16:04:04] <imperio> Yurume: I still don't get your point ><
[16:04:20] <Yurume> imperio, ah, that was meant to be a reply to: <imperio> erf... I hate when people make a PR on an issue you said you were working on without noticing anyone...
[16:04:58] <imperio> oh okay ! Now it makes sense !
[16:05:22] <simukis> Yurume: the pain of this approach is 20 days old PRs that you have to rebase twice a week
[16:05:53] <Yurume> ;_;
[16:05:57] <imperio> simukis: well, sometimes you have to rebase twice a day when you're working on a struct used everywhere
[16:06:07] <eddyb> imperio: I don't know what to say about that PR, s/cursor:/pos:/ might be good
[16:06:19] <eddyb> but then, since you bound T... why not add #[derive(Debug)]?
[16:07:06] <imperio> eddyb: thx for looking. And #[derive(Debug)] would have show the inner buffer no ?
[16:07:23] <eddyb> yes, not sure if you want that
[16:07:59] <imperio> that's what we were speaking a bit earlier if I remember well
[16:10:22] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[16:11:02] <imperio> eddyb: oh and btw, I merged your improvement on the rgtk build file. Thanks for that
[16:15:17] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[16:15:33] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[16:23:12] *** Quits: Kxepal (Miranda@moz-hu9lfu.pppoe.mtu-net.ru) (Ping timeout: 121 seconds)
[16:25:02] *** Joins: Kxepal (Miranda@moz-s2os05.pppoe.mtu-net.ru)
[16:26:46] *** Quits: scialex (scialex@moz-j5mi8i.cs.brown.edu) (Quit: Leaving)
[16:30:28] <simukis> dang, another failed rebase messed up yet another try build
[16:30:41] <simukis> complete waste of computing resources
[16:30:47] <simukis> -.-
[16:32:27] <arrrrrrr1> imperio: LGPL is problematic unless used in LGPL or GPL programs
[16:35:40] *** Joins: mib_obikp0 (Mibbit@moz-b11uqs.dynamic.upc.nl)
[16:37:28] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[16:44:26] <frewsxcv> apple and chrome don't seem to have issues with LGPL (see KHTML)
[16:47:17] <arrrrrrr1> they don't use rust either
[16:53:06] *** Quits: reem (reem@moz-3s1lie.coob.q2h1.0009.2601.IP) (Connection closed)
[16:53:30] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[16:54:35] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[16:55:39] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[16:56:46] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[16:57:07] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[16:58:06] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[16:58:27] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[17:03:21] *** Joins: sigma (sigma@moz-ohog4c.range86-135.btcentralplus.com)
[17:05:57] <simukis> eddyb: another push to try, please? (https://github.com/nagisa/rust/tree/stack-handling-cleanup)
[17:06:45] <eddyb> same branch?
[17:06:54] <simukis> force pushed
[17:09:01] <simukis> eddyb: thanks!
[17:09:19] *** Joins: laumann (thomas@moz-n9e72h.0.fullrate.dk)
[17:12:06] *** Quits: O01eg (o01eg@moz-0t3g6d.cgbk.4n8f.2698.2a02.IP) (Client exited)
[17:16:40] *** Quits: bkearns (Adium@moz-1kbdt7.ca.comcast.net) (Quit: Leaving.)
[17:21:35] *** Joins: O01eg (o01eg@moz-9qo7oc.ltb0.4n8f.2698.2a02.IP)
[17:22:50] *** Joins: violaceae (violaceae@moz-s3vd4e.u4is.n1v0.0007.2601.IP)
[17:24:32] *** Quits: dinfuehr (dinfuehr@moz-rmfk49.highway.telekom.at) (Connection closed)
[17:31:40] *** Joins: summerlight_ (summerlight@moz-99k.2mj.130.121.IP)
[17:33:38] *** Quits: violaceae (violaceae@moz-s3vd4e.u4is.n1v0.0007.2601.IP) (Quit: Leaving)
[17:35:42] *** Quits: summerlight_ (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[17:36:39] <simukis> steveklabnik: added the comma, though I don‚Äôt really share your sentiment
[17:36:57] <steveklabnik> simukis: oh?
[17:37:03] <steveklabnik> this, that, and the other <- 
[17:37:12] <steveklabnik> wonder if this is an american vs british english thing
[17:38:40] <simukis> might be
[17:40:52] *** Quits: isaacd (quassel@moz-4oj8is.east.verizon.net) (Ping timeout: 121 seconds)
[17:46:23] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[17:46:28] *** Joins: reem_ (reem@moz-2icmmi.ca.comcast.net)
[17:49:24] *** Quits: reem_ (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[17:50:02] <Manishearth> steveklabnik: comma and?
[17:50:13] <Manishearth> that's the oxford comma. Not a BrE vs AmE thing
[17:50:14] <XMPPwocky> Oxford comma?
[17:50:19] <XMPPwocky> yeah
[17:50:31] <steveklabnik> ahh yes
[17:50:58] <steveklabnik> duh
[17:51:00] <steveklabnik> haha
[17:51:35] <Manishearth> (I've spent time in environments where I have to use both BrE(ish) and AmE -- I don't like BrE but comma and is not specific to either)
[17:51:59] <Manishearth> steveklabnik: also, what's up with your comma-within-quotation marks>
[17:52:01] <Manishearth> * ?
[17:52:08] <steveklabnik> okay, so
[17:52:25] <steveklabnik> in a sentence where you end with a quote, "Steve and others say the period goes inside the quote."
[17:52:32] <steveklabnik> iirc, this _is_ a British/American thing
[17:53:03] <Manishearth> yes, that is
[17:53:06] <steveklabnik> though when using apostraphes for empahsis, you put it outside, 'like this'.
[17:53:16] <Manishearth> agreed
[17:53:40] <steveklabnik> i am not a prescriptivist
[17:53:44] <steveklabnik> but i do like convention
[17:54:05] <Manishearth> but this isn't what you do with commas
[17:54:06] <steveklabnik> http://instruct.westvalley.edu/lafave/DFW_present_tense.html <- is a ridiculously good article about all of this, but that's all i'll say since it's massively offtopic ;)
[17:54:08] <bluss> shouldn't the typesetter determine this for you
[17:54:15] <Manishearth> bluss: wait what
[17:54:23] <bluss> ordering of ‚Äù and . so
[17:54:24] <steveklabnik> Manishearth: it isn't? that's a bug then
[17:54:31] <steveklabnik> yeah and ideally we'd use nice quotes too
[17:55:05] <Manishearth> steveklabnik: wait no the internets is telling me otherwise
[17:55:06] <Manishearth> strange
[17:55:10] <imperio> arrrrrrr1: why did you speak abut licenses to me ?
[17:55:15] <Manishearth> I'd *never* seen that style till now
[17:55:18] * steveklabnik installs https://github.com/reedes/vim-textobj-quote
[17:56:40] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[17:57:01] <Manishearth> Okay, TIL, `'foo,'` is the norm in some places
[17:57:03] <Manishearth> huh
[17:57:30] *** Joins: Rym (y@moz-vsu.f6d.55.31.IP)
[17:58:08] <Manishearth> Oh, I see
[17:58:21] <Manishearth> steveklabnik: I think the comma-inside is only done for double quotes
[17:58:28] <Manishearth> but anyway, really a minor nit :P
[17:58:49] * XMPPwocky has seen it argued that "foo",  should be preferred even when it's not the author's preferred style, because for programming stuff it can get confusing otherwise. i.e. to delete a file, type "rm foo," or if it's read-only "rm -f foo."
[17:59:00] <XMPPwocky> vs "rm foo", or if it's read-only "rm -rf foo".
[17:59:22] <Manishearth> lol
[18:00:49] <steveklabnik> you have graves for that though
[18:01:02] <steveklabnik> type `rm foo`, or if it's read-only, `rm -f foo`.
[18:02:01] *** Joins: dpc_ (dpc@moz-a8v.6sn.162.73.IP)
[18:02:02] <XMPPwocky> sure
[18:02:20] <arrrrrrr1> imperio: LGPL is not a good license for rust code. you cannot use it without making your code also lgpl or gpl
[18:02:20] <Manishearth> I have started using graves/backticks much more often in regular discussions with non programmers
[18:02:23] <steveklabnik> woo sunday typography
[18:02:25] <Manishearth> it confuses them
[18:02:56] <Manishearth> Of course, the real way to quote things in ASCII is `like this'
[18:03:00] <Manishearth> ``and this"
[18:03:02] <XMPPwocky> GAH
[18:03:06] <Manishearth> :P
[18:03:12] <Manishearth> (latex ftw)
[18:03:31] <Manishearth> (I hate that particular bit of latex)
[18:03:53] <steveklabnik> heh
[18:04:33] <imperio> arrrrrrr1: oh ok. A repo in particular ?
[18:04:41] <Manishearth> but people on the internet do use that style of quoting. Not sure why. Could either be because it apparently looks better
[18:05:05] <Manishearth> or just latex-hands, similar to the double-space-after-period thing caused by typewriters
[18:05:49] <arrrrrrr1> imperio: rgtk
[18:06:20] <Manishearth> I tried parsing rgtk as an acronym
[18:06:29] <Manishearth> rooks good to kim or something :P
[18:06:40] * simukis gifts people some unicode, take it: ‚Äú ‚Äù ‚Äò ‚Äô and also the useful ‚Ä¶
[18:06:52] <Manishearth> (backed up and reparsed a couple of times until I realized I was being stupid)
[18:07:04] <Manishearth> wait I thought I fixed my terminal unicode :/
[18:07:05] <Manishearth> aww
[18:07:19] <Manishearth> √†¬§¬Æ
[18:07:25] <Manishearth> well that still works
[18:07:38] <bluss> the fancy quotes are matched pairs, feels much bettere
[18:07:51] <arrrrrrr1> simukis: pretty disgusting. I spent 5 minutes yesterday replacing those quotes in the MPL text which is only available as HTML with non-ascii characters.
[18:08:11] <Manishearth> hah
[18:08:20] <Manishearth> Happens to me a lot
[18:09:11] * arrrrrrr1 gifts people the MPL in 80 columns ascii: https://gist.github.com/anonymous/501cc7e602e1c944ba4f
[18:10:30] <bluss> that's beautiful. even if I prefer ‚Äú‚Äùs
[18:15:03] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[18:22:12] *** Quits: larhat (Adium@moz-9vj.vcf.204.37.IP) (Quit: Leaving.)
[18:23:27] *** Quits: Rym (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[18:24:04] <frewsxcv> arrrrrrr1: or if you want something on the other end of the spectrum https://github.com/frewsxcv/formatted-licenses/blob/master/licenses/mpl/license-mpl-v2.md
[18:25:18] <arrrrrrr1> https://raw.githubusercontent.com/frewsxcv/formatted-licenses/master/licenses/mpl/license-mpl-v2.md
[18:25:19] *** Joins: dinfuehr (dinfuehr@moz-rmfk49.highway.telekom.at)
[18:25:31] <arrrrrrr1> I'm sure people will be delighted opening that in their text editors
[18:25:59] <imperio> arrrrrrr1: I'm not the owner of thhis repo (and the owner isn't really here since a few weeks now...)
[18:28:14] <frewsxcv>  arrrrrrr1:    :set linebreak      :)
[18:28:54] *** Joins: gsingh93 (gulshan@moz-3fu4am.mi.comcast.net)
[18:29:14] *** Joins: violaceae (violaceae@moz-s3vd4e.u4is.n1v0.0007.2601.IP)
[18:29:25] *** Quits: dinfuehr (dinfuehr@moz-rmfk49.highway.telekom.at) (Ping timeout: 121 seconds)
[18:30:36] *** Joins: Rym (y@moz-vsu.f6d.55.31.IP)
[18:32:38] *** Joins: eerie (eerie@moz-nu5r7u.red.bezeqint.net)
[18:35:07] *** Quits: Rym (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[18:38:36] *** Quits: RossJH (textual@moz-8vn4o2.range86-165.btcentralplus.com) (Ping timeout: 121 seconds)
[18:41:40] <simukis> configure: unknown OS type: OpenBSD, wait what?
[18:44:34] *** Quits: mystor (mystor@moz-dvb.6fm.114.24.IP) (Connection closed)
[18:47:38] *** Quits: marsel (user@moz-tjk.bk3.180.94.IP) (Ping timeout: 121 seconds)
[18:49:01] <semarie> simukis: hum ? configure should work under openbsd (but building need some adjustments)
[18:49:42] *** Joins: bkearns (Adium@moz-1kbdt7.ca.comcast.net)
[18:49:53] <simukis> semarie: this is exactly what I got after installing plain openbsd, doing pkg_add git gmake and running configure in rust directory 
[18:52:10] <semarie> simukis: you will need gcc and g++ from ports too (4.8) + some patch to link to libestdc++ (instead of libstc++)
[18:52:28] <semarie> but it should be unrelated to your configure problem
[18:52:30] <simukis> semarie: is there anywhere some step by step instructions?
[18:52:38] *** Joins: brson (brson@moz-kq1.7vl.56.172.IP)
[18:52:38] *** ChanServ sets mode: +o brson
[18:53:12] <semarie> simukis: you could use the wip port https://github.com/jasperla/openbsd-wip/tree/master/lang/rustc
[18:53:41] <semarie> it will build the latest snapshot
[18:53:58] <simukis> I assume port is some kind of package maker build files, right?
[18:54:26] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz‚Ä¶)
[18:54:41] <semarie> yes. but if you ask, I think I should also explain how to build it :)
[18:55:09] <semarie> have you the ports source under /usr/ports ? (empty dir or not)
[18:56:28] <simukis> semarie: no such directory
[18:56:46] <semarie> (if not, see http://www.openbsd.org/faq/faq15.html#Ports, mainly "15.3.2. fetching the ports tree")
[18:57:11] *** Joins: dinfuehr (dinfuehr@moz-rmfk49.highway.telekom.at)
[18:59:00] <semarie> openbsd-wip is a working progress for ports not completly ready for inclusion in ports. so after having a working ports tree, you should clone openbsd-wip under /usr/ports
[18:59:49] <simukis> ok, makes sense
[19:01:40] <steveklabnik> https://github.com/rust-lang/rust/issues/23577 <- do we have something like this? I don't think so
[19:03:25] *** Joins: eerie_ (eerie@moz-nu5r7u.red.bezeqint.net)
[19:04:16] <cmr> steveklabnik: no, we don't have anything for it that will work with LTO.
[19:04:32] *** Quits: dpc_ (dpc@moz-a8v.6sn.162.73.IP) (Ping timeout: 121 seconds)
[19:05:42] *** Quits: eerie (eerie@moz-nu5r7u.red.bezeqint.net) (Ping timeout: 121 seconds)
[19:06:31] <steveklabnik> cmr: thanks.
[19:07:04] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[19:08:45] <simukis> semarie: thanks, will see how it goes
[19:09:17] <simukis> meanwhile freebsd is past llvm stage already
[19:18:34] *** Joins: marsel (user@moz-tjk.bk3.180.94.IP)
[19:20:25] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[19:21:14] *** Quits: dinfuehr (dinfuehr@moz-rmfk49.highway.telekom.at) (Connection closed)
[19:24:46] *** Joins: Rym (y@moz-vsu.f6d.55.31.IP)
[19:24:58] *** Joins: nrc (nrc@moz-4bhi2i.xtra.co.nz)
[19:24:58] *** ChanServ sets mode: +o nrc
[19:26:14] *** Joins: nodweber_ (nodweber@moz-knt.fgq.178.5.IP)
[19:29:17] *** Quits: Rym (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[19:29:19] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[19:32:57] *** Joins: eerie (eerie@moz-nu5r7u.red.bezeqint.net)
[19:35:27] *** Quits: eerie_ (eerie@moz-nu5r7u.red.bezeqint.net) (Ping timeout: 121 seconds)
[19:46:40] *** Joins: zmack (zmack@moz-4b0.o8l.26.188.IP)
[19:55:17] *** Joins: dinfuehr_ (dinfuehr@moz-rmfk49.highway.telekom.at)
[19:56:34] *** Joins: hoverbear (hoverbear@moz-csaicn.gv.shawcable.net)
[19:59:27] *** Quits: {-}grant ({0}grant@moz-fctpaa.mo.charter.com) (Connection closed)
[20:02:01] *** Joins: {-}grant ({0}grant@moz-fctpaa.mo.charter.com)
[20:02:51] *** Quits: eerie (eerie@moz-nu5r7u.red.bezeqint.net) (Connection closed)
[20:02:55] *** Joins: eerie (eerie@moz-nu5r7u.red.bezeqint.net)
[20:04:39] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Quit: It's a joke, it's all a joke.)
[20:09:12] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[20:11:27] *** Quits: sigma (sigma@moz-ohog4c.range86-135.btcentralplus.com) (Ping timeout: 121 seconds)
[20:13:31] *** Joins: mib_0uvav3 (Mibbit@moz-juv.9o3.252.72.IP)
[20:18:54] *** Joins: Rym (y@moz-vsu.f6d.55.31.IP)
[20:19:24] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[20:21:06] *** Joins: RossJH (textual@moz-7g64cv.range86-172.btcentralplus.com)
[20:23:15] *** Quits: violaceae (violaceae@moz-s3vd4e.u4is.n1v0.0007.2601.IP) (Ping timeout: 121 seconds)
[20:23:26] *** Quits: Rym (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[20:25:29] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[20:25:53] *** Joins: Rym (y@moz-vsu.f6d.55.31.IP)
[20:25:57] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[20:26:08] *** Quits: mib_obikp0 (Mibbit@moz-b11uqs.dynamic.upc.nl) (Quit: http://www.mibbit.com ajax IRC Client)
[20:26:46] *** Joins: w66745 (Mibbit@moz-b11uqs.dynamic.upc.nl)
[20:27:10] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[20:29:23] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz‚Ä¶)
[20:29:44] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[20:30:25] *** Quits: Rym (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[20:31:08] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[20:33:08] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[20:34:16] *** Quits: brson (brson@moz-kq1.7vl.56.172.IP) (Ping timeout: 121 seconds)
[20:37:58] *** Joins: Rym (y@moz-vsu.f6d.55.31.IP)
[20:38:07] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[20:38:51] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[20:41:23] <sfackler> acrichto: can you publish a new uuid?
[20:41:38] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[20:42:18] *** Quits: eerie (eerie@moz-nu5r7u.red.bezeqint.net) (Connection closed)
[20:43:02] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[20:48:34] *** Quits: mib_0uvav3 (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[20:53:09] *** Quits: gsingh93 (gulshan@moz-3fu4am.mi.comcast.net) (Ping timeout: 121 seconds)
[20:54:06] *** Quits: w66745 (Mibbit@moz-b11uqs.dynamic.upc.nl) (Quit: http://www.mibbit.com ajax IRC Client)
[20:57:47] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[21:02:21] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[21:03:17] *** Quits: semarie (semarie@moz-g00ato.abo.wanadoo.fr) (Ping timeout: 121 seconds)
[21:03:31] *** Quits: RossJH (textual@moz-7g64cv.range86-172.btcentralplus.com) (Quit: Textual IRC Client: www.textualapp.com)
[21:05:38] *** Quits: jmitchell (jmitchell@moz-o8p.pug.156.104.IP) (Ping timeout: 121 seconds)
[21:12:13] *** Quits: dinfuehr_ (dinfuehr@moz-rmfk49.highway.telekom.at) (Connection closed)
[21:13:33] *** Joins: reem (reem@moz-eios6j.coob.q2h1.0009.2601.IP)
[21:15:39] *** Quits: reem (reem@moz-eios6j.coob.q2h1.0009.2601.IP) (Connection closed)
[21:15:52] *** Joins: reem (reem@moz-eios6j.coob.q2h1.0009.2601.IP)
[21:17:59] *** Joins: reem_ (reem@moz-ojhkuk.coob.q2h1.0009.2601.IP)
[21:20:54] *** Quits: reem (reem@moz-eios6j.coob.q2h1.0009.2601.IP) (Ping timeout: 121 seconds)
[21:22:11] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz‚Ä¶)
[21:24:04] <steveklabnik> Gankro and or acrichto , either of you around?
[21:24:37] *** Joins: dinfuehr (dinfuehr@moz-rmfk49.highway.telekom.at)
[21:25:13] *** Joins: jmitchell (jmitchell@moz-o8p.pug.156.104.IP)
[21:26:53] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[21:29:13] *** Joins: bfops (uid58242@moz-e5u6m0.charlton.irccloud.com)
[21:33:16] *** Joins: violaceae (violaceae@moz-s3vd4e.u4is.n1v0.0007.2601.IP)
[21:34:02] *** Quits: Sylvestre (Sylvestre@moz-6ukrjj.ecranbleu.org) (Quit: Bye)
[21:38:29] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz‚Ä¶)
[21:40:08] <Gankro> steveklabnik: yes
[21:40:38] *** Quits: nodweber_ (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[21:40:59] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[21:41:20] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[21:41:47] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz‚Ä¶)
[21:43:10] <steveklabnik> Gankro: i'm trying to solve issues like https://github.com/rust-lang/rust/issues/22714
[21:43:43] <steveklabnik> i added 'Array' to PrimitiveType in librustdoc/clean, and added a doc annotation in libcore/array.rs, but it's still not building the page
[21:43:57] <Gankro> steveklabnik: Out of my knowledgebase, sorry :(
[21:44:00] <steveklabnik> no worries
[21:44:06] <steveklabnik> i know you did some rustdoc stuff before
[21:44:12] *** Joins: tjakubow (tom@moz-ag87jj.fios.verizon.net)
[21:44:27] *** Joins: Sylvestre (Sylvestre@moz-6ukrjj.ecranbleu.org)
[21:44:29] <nrc> cmr always answers all my rustdoc questions ^
[21:44:48] *** Quits: laumann (thomas@moz-n9e72h.0.fullrate.dk) (Quit: leaving)
[21:45:01] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[21:45:48] *** Quits: bjz (bjz@moz-puppgq.tpgi.com.au) (Quit: My Mac has gone to sleep. ZZZzzz‚Ä¶)
[21:45:53] <Gankro> tjakubow is my goto wizard for rustdoc ^
[21:46:01] <tjakubow> oh, hi :)
[21:46:05] <steveklabnik> heyyyy
[21:46:46] *** Quits: reem_ (reem@moz-ojhkuk.coob.q2h1.0009.2601.IP) (Connection closed)
[21:46:59] <cmr> steveklabnik: I have no idea how the builtin magic works, sorry :(
[21:47:04] <steveklabnik> cmr: thanks anyway <3
[21:47:06] <cmr> (I haven't touched rustdoc almost since I wrote it...)
[21:47:55] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Client exited)
[21:48:57] <steveklabnik> tjakubow: do you happen to know?
[21:49:09] * tjakubow checks botbot's logs
[21:49:22] <tjakubow> oh
[21:53:08] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[21:53:29] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[21:56:41] *** Joins: aepsil0n (eduard@moz-6491ha.mv2h.pepi.8071.2a02.IP)
[21:56:58] <kmc> is there a way in the stdlib to build an io::Read which produces the bytes of a Vec<u8>, k at a time?
[21:57:07] <kmc> or should I just implement that myself in the straightforward way
[21:57:16] <tjakubow> steveklabnik: do you have a branch on your fork w/ your attempt?
[21:58:13] *** Quits: killercup (killercup@moz-edmf2j.dip0.t-ipconnect.de) (Quit: My Mac has gone to sleep. ZZZzzz‚Ä¶)
[21:58:40] *** Quits: marsel (user@moz-tjk.bk3.180.94.IP) (Ping timeout: 121 seconds)
[21:59:06] <tjakubow> steveklabnik: more to the point, did you also add "array" to PrimitiveType::from_str ?
[21:59:28] <nrc> goddamit, gh14893 and gh15164 manage to file an issue about a bug and fix it without ever actually explaining what the bug in fact is :-p
[21:59:29] <[o__o]> librustc: Don't try to perform the magical: https://github.com/rust-lang/rust/pull/15164
[21:59:55] <nrc> that is an impressive achievement 
[21:59:59] <steveklabnik> tjakubow: https://github.com/steveklabnik/rust/commit/9d4611119a744881f1494d5c121201dbc7106109 <-
[22:00:13] <tjakubow> steveklabnik: thanks :)
[22:00:18] <steveklabnik> tjakubow: thank YOU
[22:00:26] <steveklabnik> there's like 6 of these bugs, gonna knock them all out :)
[22:00:35] <cmr> nrc: gh14893 seems fairly descriptive to me
[22:00:35] <[o__o]> &[T, ..N] casts to *T instead of *[T, ..N] in structs: https://github.com/rust-lang/rust/issues/14893
[22:01:13] *** Joins: killercup (killercup@moz-edmf2j.dip0.t-ipconnect.de)
[22:01:27] *** Quits: killercup (killercup@moz-edmf2j.dip0.t-ipconnect.de) (Quit: My Mac has gone to sleep. ZZZzzz‚Ä¶)
[22:01:27] <nrc> except that the following disussion hints at a deeper root cause, without saying what the real problem is
[22:01:33] <cmr> ah
[22:01:44] <nrc> and the example seems to require mut, but the title says nothing about mut
[22:02:11] <nrc> and its not even clear to me that a fully specified cast to *T is in fact wrong
[22:03:08] <nrc> perhaps the key part of the title is "instead of"
[22:03:22] <nrc> where the correct behaviour is "as well as"
[22:03:29] <nrc> still no idea about the mut
[22:04:48] <nrc> oh hmm, looks like the mut behaviour is at least somewhat intentional
[22:06:53] *** Quits: aepsil0n (eduard@moz-6491ha.mv2h.pepi.8071.2a02.IP) (Quit: Leaving.)
[22:11:26] *** Quits: dinfuehr (dinfuehr@moz-rmfk49.highway.telekom.at) (Connection closed)
[22:13:16] *** Joins: mib_jz4epx (Mibbit@moz-b11uqs.dynamic.upc.nl)
[22:13:29] <tjakubow> steveklabnik: not totally sure how the primitive stuff works myself. I have an errand to run, so I'll let rust build and see if I can figure it out when I get back
[22:13:59] <steveklabnik> tjakubow: cool <3. thanks for the assit. I tried to poke around but wasn't sure either
[22:15:00] *** Joins: jethrogb (jethrob@moz-p2iedd.scintilla.utwente.nl)
[22:19:49] *** Quits: violaceae (violaceae@moz-s3vd4e.u4is.n1v0.0007.2601.IP) (Quit: Leaving)
[22:21:42] *** Quits: zmack (zmack@moz-4b0.o8l.26.188.IP) (Connection closed)
[22:21:44] *** Joins: njn (chatzilla@moz-mv909v.iinet.net.au)
[22:23:15] *** nrc is now known as nrc|afk
[22:24:24] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[22:25:56] *** Quits: Rym (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[22:34:08] *** Quits: munksgaa1d (munksgaard@moz-478pev.u.parknet.dk) (Ping timeout: 121 seconds)
[22:40:07] *** Quits: ptalbot (ptalbot@moz-j4gnuh.fbx.proxad.net) (Ping timeout: 121 seconds)
[22:49:58] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[22:59:02] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[22:59:26] *** Joins: Rym (y@moz-vsu.f6d.55.31.IP)
[23:02:19] *** Quits: {-}grant ({0}grant@moz-fctpaa.mo.charter.com) (Connection closed)
[23:03:56] *** Quits: Rym (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
[23:11:52] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[23:12:16] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[23:14:47] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[23:17:52] *** Joins: {-}grant ({0}grant@moz-fctpaa.mo.charter.com)
[23:22:10] *** Joins: dinfuehr (dinfuehr@moz-rmfk49.highway.telekom.at)
[23:22:12] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Connection closed)
[23:25:07] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[23:26:14] *** Quits: dinfuehr (dinfuehr@moz-rmfk49.highway.telekom.at) (Ping timeout: 121 seconds)
[23:26:48] *** Quits: jethrogb (jethrob@moz-p2iedd.scintilla.utwente.nl) (Quit: Winners never quit.)
[23:27:03] *** Quits: Skyler (Skyler@moz-e93b35.sd.cox.net) (Client exited)
[23:28:41] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[23:32:50] *** Joins: jethrogb (jethrob@moz-p2iedd.scintilla.utwente.nl)
[23:32:54] *** Quits: jethrogb (jethrob@moz-p2iedd.scintilla.utwente.nl) (Quit: Winners never quit.)
[23:32:57] *** Joins: sprang (sprang@moz-skdqur.hfc.comcastbusiness.net)
[23:42:26] *** Quits: zxq9_ (ceverett@moz-qsm369.mesh.ad.jp) (Quit: Konversation terminated!)
[23:44:18] *** Quits: ytain (ytain@moz-44k.q8p.140.24.IP) (Quit: Textual IRC Client: www.textualapp.com)
[23:46:53] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[23:47:40] *** Quits: imperio (Mibbit@moz-8otf3a.fbx.proxad.net) (Quit: http://www.mibbit.com ajax IRC Client)
[23:50:58] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Ping timeout: 121 seconds)
[23:52:19] *** Joins: Johannes (Johannes@moz-4et8d7.ocn.ne.jp)
[23:53:39] *** Joins: Rym (y@moz-vsu.f6d.55.31.IP)
[23:54:21] *** Joins: summerlight_ (summerlight@moz-99k.2mj.130.121.IP)
[23:54:42] *** Quits: summerlight_ (summerlight@moz-99k.2mj.130.121.IP) (Quit: Ï†Ñ Ïù¥Îßå Í∞ëÎãàÎã§.)
[23:54:47] *** Joins: summerlight (summerlight@moz-99k.2mj.130.121.IP)
[23:55:04] *** Joins: arrrrrrrrr (arrrrrrrrs@moz-ps014g.dynamic.qsc.de)
[23:57:45] *** Quits: arrrrrrr1 (arrrrrrrrs@moz-3mq15u.dynamic.qsc.de) (Ping timeout: 121 seconds)
[23:59:53] *** Quits: Rym (y@moz-vsu.f6d.55.31.IP) (Ping timeout: 121 seconds)
