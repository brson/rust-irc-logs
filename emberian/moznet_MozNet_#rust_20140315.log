[00:00:24] <FreeFull> Will shumway handle things like 3D content and DRM though?
[00:00:30] <Earnestly> lol
[00:00:42] <Earnestly> At least not DRM
[00:00:45] <strcat> FreeFull: 3d content came after sane people stopped writing new projects in flash
[00:00:56] *** Quits: Sharp (Sharp@moz-3301C7AB.static-ip.telepacific.net) (Quit: Sharp)
[00:00:59] <strcat> you can just fudge the DRM but I know mozilla won't ;s
[00:01:03] *** Quits: IanCormac84 (User@DFBEE06D.2A8D8854.67DFF8B4.IP) (Ping timeout)
[00:01:12] <strcat> netflix works on linux via pipelight
[00:01:22] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[00:01:25] <strcat> and I seriously doubt that stubbed APIs in wine is their idea of DRM
[00:02:00] *** Joins: IanCormac84 (User@BA5C0764.64D641E5.67DFF8B4.IP)
[00:03:10] *** Quits: henrikhodne (henrikhodn@moz-71A05C56.cluenet.org) (Ping timeout)
[00:04:01] <strcat> there, rust-seccomp is readable now
[00:04:08] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Quit: Lost terminal)
[00:07:06] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[00:08:14] *** Joins: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca)
[00:08:50] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[00:08:53] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[00:09:32] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[00:10:37] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[00:10:37] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[00:11:02] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[00:11:02] <SiegeLord> Is there a trick to get at the video on air.mozilla?
[00:11:33] <erickt> SiegeLord: this video? https://air.mozilla.org/rust-meetup-march-2014/
[00:11:47] <SiegeLord> Well, all of them... but that's the one I'm going for atm
[00:11:57] <erickt> SiegeLord: https://air.mozilla.org/?tag=rust
[00:12:25] <SiegeLord> I'm looking for... perhaps a direct download?
[00:12:36] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Connection reset by peer)
[00:12:38] <erickt> that I don't know. sorry
[00:12:57] <SiegeLord> I think I tend to watch them in Opera
[00:12:57] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[00:13:09] <erickt> wow, we've already had 167 views of the meetup, and it was less than 24 hours ago!
[00:13:17] <SiegeLord> It just doesn't cooperate with my tinfoil setup at Firefox
[00:13:35] <erickt> woah, last meetup we had 1003 views! brson, we're famous!
[00:14:37] <SiegeLord> I wish brson would speak again... he's always so inspiring
[00:14:40] *** Quits: evanm (evanm@636AC086.5999CED5.71743E61.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:14:56] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[00:15:20] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[00:15:26] <erickt> I agree
[00:16:26] *** Quits: TimAbraldes (quassel@125EF623.B2666F0E.66399531.IP) (Input/output error)
[00:16:50] <Earnestly> Erm, and again, if you want the file for that march meet up video: https://d3fenhwk93s16g.cloudfront.net/2s5x6j/webm.webm
[00:16:52] <strcat> https://github.com/thestinger/rust-seccomp/commit/f6d3a2b675d6451e3285eeac87576cd7a5b3c5b3 when in doubt, auto-generate rust with python ;p
[00:16:56] <Earnestly> Such a pain
[00:17:05] * strcat was inspired by the horrors in the stdlib like that ;)
[00:17:06] * Earnestly curses vid.ly
[00:17:25] <strcat> heh
[00:17:28] <strcat> I totally screwed up example.rs
[00:17:31] * strcat sighs
[00:17:48] <strcat> luckily no one uses it so I can hide my mistake ;p
[00:18:09] <bstrie> strcat: maybe we need a `python!` syntax extension to generate that code at compile-time
[00:18:13] *** Quits: io2 (io2@moz-EE406A5.home.otenet.gr) (Quit: )
[00:18:26] *** Joins: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net)
[00:18:30] <strcat> https://github.com/thestinger/rust-seccomp/commit/269db3f0bcf7eaff757dde428f1ff0932fd9ab8f there, as if I got it right in the first place ;)
[00:20:00] * strcat wonders why syscall numbers would even differ between 32/64-bit...
[00:20:13] <strcat> you'd think they could have just omitted numbers in one arch when they didn't need that syscall
[00:21:27] <huon> strcat: that would be far too sensible
[00:21:29] *** Quits: funnel (hegel@DEB31F3E.28CFCE3E.FC69BED9.IP) (Client exited)
[00:21:48] *** Joins: funnel (hegel@DEB31F3E.28CFCE3E.FC69BED9.IP)
[00:22:01] <huon> bstrie: would have to take a string as input, or do some wild span hacks to preserve indentation :P
[00:22:25] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[00:22:44] *** Quits: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:22:54] *** Joins: mib_748itv (Mibbit@7E217F04.2C8DBE39.CC1A2609.IP)
[00:24:06] *** Joins: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca)
[00:25:01] <olsonjeffery> is there a way to return a slice that consists of two-or-more actual vectors of the same type?
[00:25:29] *** Joins: taharqa (Mibbit@moz-401462C1.fbx.proxad.net)
[00:25:46] <olsonjeffery> without doing the work to store the two-or-more-vectors in a new, contiguous location
[00:25:56] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:26:13] *** Quits: ChrisOei_ (ChrisOei@moz-53A9266A.blurb.com) (Ping timeout)
[00:26:25] *** Quits: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:26:27] *** Joins: cschneid (cschneid@moz-621ACC77.hlrn.qwest.net)
[00:26:43] <strcat> huon: https://github.com/thestinger/rust-seccomp/commit/6b6a1fc884a922fa13fb3610ab2412fba173b766 I also solved software
[00:27:08] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[00:27:17] <bstrie> strcat: solving software since 2014
[00:27:32] <strcat> exit(1) -> invalid system call
[00:28:57] *** Quits: mno2 (mno2@moz-3506EAC7.singnet.com.sg) (Quit: mno2)
[00:29:08] <huon> strcat: perfect
[00:29:08] *** Quits: askalski (akuda@2BA4E5A7.CC7751E8.6712E96B.IP) (Quit: Wychodzi)
[00:29:17] <huon> software can never stop now
[00:29:23] <strcat> huon: well it can stop
[00:29:28] <strcat> huon: I can make it not stop
[00:29:32] <strcat> forbid exit
[00:29:38] <huon> bstrie: I wonder how many new rustaceans we'll get with that article
[00:29:42] <strcat> and change ACT_TRAP to the one that gives an errno instead
[00:29:47] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Quit: Leaving...)
[00:29:53] <strcat> huon: it works! glibc just loops forever
[00:29:58] <strcat> if exit_group fails it tries again
[00:30:00] <strcat> ;)
[00:30:02] <huon> olsonjeffery: a slice is contiguous, so nope
[00:30:07] <huon> strcat: hahaha
[00:30:24] <strcat> huon: falling off main actually just calls exit_group too
[00:30:25] <olsonjeffery> huon: what about an iterator?
[00:30:29] <huon> olsonjeffery: theoretically we could have a rope-slice type
[00:30:33] <strcat> hm
[00:30:41] <huon> olsonjeffery: oh, yeah, .chain "concats" two iterators
[00:30:43] <strcat> I guess if you actually fell off the end you'd likely get SIGILL
[00:31:14] <strcat> huon: yeah glibc just does loop { exit(status) }
[00:31:17] <strcat> ;p
[00:31:20] <huon> heh
[00:31:27] <strcat> s/exit/exit_group/
[00:31:36] <strcat> exit is weird, it just ends the current thread
[00:31:40] <bstrie> huon: I wasn't really paying attention this morning, but I feel like we have 50 to 70 more subscribers than yesterday
[00:31:42] *** Quits: mib_748itv (Mibbit@7E217F04.2C8DBE39.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[00:31:50] <strcat> C exit is ofc exit_group
[00:31:56] <strcat> as is falling off main
[00:32:44] <huon> bstrie: yeah, I think I recall seeing 3131 yesterday
[00:33:09] *** Quits: canhtak (canhtak@moz-9F5D2CD3.wl.t.ulaval.ca) (Quit: canhtak)
[00:34:09] *** Joins: derek_c (derek@moz-127C9080.cit.cornell.edu)
[00:34:29] *** Quits: japaric (japaric@D71AE9C7.FD3D1332.95AFB88D.IP) (Ping timeout)
[00:35:41] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Client exited)
[00:36:04] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[00:36:37] *** Joins: japaric (japaric@CA371D8.A347E168.F4D5766F.IP)
[00:37:00] *** Quits: Rusky (russell@moz-173BA32C.slkc.qwest.net) (Quit: Leaving.)
[00:37:11] *** Joins: Rusky (russell@moz-173BA32C.slkc.qwest.net)
[00:37:46] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[00:38:15] *** Quits: thewonderidiot (mstewart@FAFE6CB6.8FBF3E66.60E22FEA.IP) (Quit: Leaving.)
[00:38:39] *** Quits: enos (jkingyens@moz-BACC7AE0.dsl.pltn13.sbcglobal.net) (Quit: enos)
[00:38:52] *** Quits: eibwen (kvirc@moz-AC96660A.dip0.t-ipconnect.de) (Ping timeout)
[00:38:52] *** Quits: valentin (Thunderbir@F28FDB21.B8068B2.FAF22AF7.IP) (Ping timeout)
[00:39:00] *** Joins: valentin (Thunderbir@F28FDB21.B8068B2.FAF22AF7.IP)
[00:39:10] <j3rky> are there plans to support parameterization of generics with compile time constants, so we can do things like Vector<T, 3>, perhaps in combination with static-if's like D has them?
[00:41:31] <erickt> j3rky: there has been some talk about parameterizing on an integer, but nothing has been decided yet. If it does come, it might not come until after 1.0
[00:41:33] <Yurumechan> there are plenty of related discussions, but no specific proposal is yet to appear.
[00:41:49] <SiegeLord> I don't think static if's would work in Rust (at least the same it does in D)
[00:41:54] <erickt> j3rky: I haven't heard anyone propose static ifs
[00:43:19] *** Joins: jensnock_ (jensnocker@moz-33279404.customers.ownit.se)
[00:43:20] <Yurumechan> IMO though, static ifs are bad for non-compilation uses of the source code (e.g. code completiton)
[00:43:41] <j3rky> ok, thanks for the replies
[00:43:54] <j3rky> what would be the idiomatic way in rust to handle such use cases? i guess macros?
[00:44:01] <Yurumechan> I do have the same concern with cfg attributes but that can be somewhat improved...
[00:44:12] <erickt> j3rky: we do optimizing away branches in `static X: bool = true; fn f() { if X { ... } else { ... } }` where the else branch will be removed when you compile with optimizations turned on
[00:44:34] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Input/output error)
[00:44:46] <Yurumechan> j3rky : depends on what are you doing?
[00:45:00] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[00:45:10] *** Quits: jensnock_ (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[00:45:10] <SiegeLord> static ifs wouldn't work because Rust generics have to compile no matter what the type parameter you pass to the generic
[00:45:19] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[00:45:21] *** Quits: derek_c (derek@moz-127C9080.cit.cornell.edu) (Ping timeout)
[00:45:33] <SiegeLord> So no static if(N > 3) static assert("No");
[00:45:42] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[00:45:50] *** Quits: tomh- (uid501@moz-E77DEB21.irccloud.com) (Quit: Connection closed for inactivity)
[00:46:06] <erickt> j3rky: we also support conditional compilation, where you can do `rustc --cfg enable_foo foo.rs`. that allows you to write `#[cfg(enable_foo)] fn foo() { ... do foo ... } #[cfg(not(enable_foo)) fn foo () { }`
[00:46:12] <strcat> meh
[00:46:21] <strcat> the libseccomp travis gets is too out-of-date ;\
[00:46:50] <Yurumechan> impl Foo for const 3 {} impl<const x:Foo> Bar<x> {}... aye I'm joking.
[00:46:50] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[00:47:04] <strcat> wow, way too out of date
[00:47:07] * strcat sighs
[00:47:12] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[00:49:32] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Client exited)
[00:49:53] *** Quits: alonlevy (alon@2CD54432.57968636.E9C721AF.IP) (Ping timeout)
[00:51:02] *** Quits: Matthias247 (Miranda@moz-678B5E4A.hsi2.kabel-badenwuerttemberg.de) (Connection reset by peer)
[00:51:12] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[00:51:44] *** Quits: gimpf (gimpf@moz-8B1B352C.adsl.highway.telekom.at) (Quit: Leaving.)
[00:53:36] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[00:53:46] *** Joins: canhtak (canhtak@moz-9F5D2CD3.wl.t.ulaval.ca)
[00:55:54] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[00:56:41] *** Joins: evanm (evanm@636AC086.5999CED5.71743E61.IP)
[00:57:44] *** Quits: valentin (Thunderbir@F28FDB21.B8068B2.FAF22AF7.IP) (Ping timeout)
[00:57:50] *** Joins: valentin (Thunderbir@F28FDB21.B8068B2.FAF22AF7.IP)
[00:59:25] *** Joins: dymk (dymk@C94BAFB1.AA444DA9.3FBA778E.IP)
[00:59:38] *** Quits: valentin (Thunderbir@F28FDB21.B8068B2.FAF22AF7.IP) (Ping timeout)
[01:00:27] *** Quits: evanm (evanm@636AC086.5999CED5.71743E61.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[01:00:30] <dymk> When parsing lists of expressions, such as inside of the expressions of bodies, is not having a semicolon after expressions that aren't the last one in the block a parsing, or semantic error? 
[01:00:45] <dymk> e.g. fn foo() { 1 + 2 bar() }
[01:00:58] <dymk> (which should be fn foo() { 1 + 2; bar() }
[01:01:05] *** Joins: valentin (Thunderbir@F28FDB21.B8068B2.FAF22AF7.IP)
[01:01:35] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[01:01:46] <c74d> dymk: No, it means that the value of that last expression will be the value of the whole block.
[01:01:51] <o11c> parsing
[01:01:57] <o11c> c74d: reread the question
[01:02:14] <o11c> because expr expr is not a valid parse
[01:02:32] <c74d> Oh, my apologies.
[01:02:49] <dymk> but `if expr {} if expr {}` is, and expr_if is an expr
[01:03:04] <dymk> so that's seen as `expr expr` but is still accepted
[01:03:25] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[01:03:53] <o11c> dymk: I don't think if is an expr
[01:04:02] <o11c> unless it is where an expr is expected to be
[01:04:42] <dymk> hm, it's called expr_if in the antlr file; let me recheck it
[01:04:43] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[01:04:51] <o11c> that is; 'fn foo() { if expr {} else {} }' does not use it as an expr
[01:04:52] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Input/output error)
[01:04:59] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[01:05:15] <o11c> also, 'fn bar() { let val = if expr {} else {} }' does use it as an expr
[01:05:54] <mrmonday> what happened to Chan::new()?
[01:06:02] <o11c> hm, but I just realized that it's ambiguous with the implicit return from a function ...
[01:06:11] *** Joins: Rym (y@E8D0A0B2.CB04ED3A.51C6DE68.IP)
[01:06:36] *** Quits: mihneadb (mihneadb@moz-6B31F5AA.static.ziggozakelijk.nl) (Quit: Computer gone to sleep - Zzzz...)
[01:06:51] <dymk> o11c, yeah I'm really not sure how the compiler is handing these
[01:06:53] *** Quits: onelson (owen@moz-DD666EC5.laika.com) (Quit: Leaving)
[01:07:00] <dymk> or how to represent it in ANTLR format
[01:07:38] <dymk> https://github.com/jbclements/rust-antlr/blob/master/Rust.g4 kinda sheds some light on it
[01:07:38] *** Joins: mib_eek1t3 (Mibbit@7E217F04.2C8DBE39.CC1A2609.IP)
[01:07:52] <mrmonday> ah, channel()
[01:08:54] *** Quits: Rym (y@E8D0A0B2.CB04ED3A.51C6DE68.IP) (Ping timeout)
[01:08:59] *** Joins: jmgrosen (user@moz-848F6087.sb.sd.cox.net)
[01:09:20] <strcat> huon: https://github.com/thestinger/rust-seccomp/blob/master/example.rs meh, a better example ;p
[01:09:30] <strcat> more paranoid rules
[01:09:38] <strcat> you want to write a different string to stdout? no way!
[01:09:38] *** Joins: derek_c (derek@moz-16A6DFBC.cit.cornell.edu)
[01:10:00] <strcat> anyway, on to something else 
[01:10:22] *** Quits: mib_eek1t3 (Mibbit@7E217F04.2C8DBE39.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[01:11:02] *** Quits: valentin (Thunderbir@F28FDB21.B8068B2.FAF22AF7.IP) (Ping timeout)
[01:11:04] <jmgrosen> regarding https://github.com/mozilla/rust/issues/4160#issuecomment-28909198, do we still want to have to return &'a [T]?
[01:11:12] *** Joins: valentin (Thunderbir@F28FDB21.B8068B2.FAF22AF7.IP)
[01:11:19] <jmgrosen> I remember there being a bit of protest and someone wanting a generic Result type instead
[01:11:32] <jmgrosen> but then that runs into lifetime issues
[01:12:16] *** Quits: Savago (Savago@moz-679D1D3C.hsd1.ca.comcast.net) (Quit: Savago)
[01:12:20] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[01:12:35] *** Joins: Rym (y@E8D0A0B2.CB04ED3A.51C6DE68.IP)
[01:13:21] *** Joins: ChrisOei_ (ChrisOei@moz-F629CBC.mycingular.net)
[01:14:03] <jmgrosen> I personally would want something like `trait Slice<'self, Idx, Result> { fn as_slice(&'self self) -> Result; }` so that you could do `impl<'self, T> Slice<'self, uint, &'self [T]> for Vec<T>`, but apparently lifetimes in traits have some major bugs at the moment
[01:16:17] *** Quits: funnel (hegel@DEB31F3E.28CFCE3E.FC69BED9.IP) (Client exited)
[01:16:35] *** Joins: funnel (hegel@DEB31F3E.28CFCE3E.FC69BED9.IP)
[01:16:41] <SiegeLord> They do seem more limited than the other kind, I'm not necessarily sure it's not intentional
[01:17:01] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[01:17:22] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[01:17:48] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[01:18:08] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[01:18:30] *** Quits: valentin (Thunderbir@F28FDB21.B8068B2.FAF22AF7.IP) (Ping timeout)
[01:18:38] *** Joins: tautologico (uid22285@moz-A42E5B7B.irccloud.com)
[01:19:03] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[01:19:19] <tautologico> rustc is dying with an ICE: task 'rustc' failed at 'vint too big' ...
[01:19:30] *** Joins: valentin (Thunderbir@F28FDB21.B8068B2.FAF22AF7.IP)
[01:20:33] <strcat> tautologico: are you trying to link against a lib you built with an old rustc version? sounds like it
[01:20:40] <strcat> there is zero ABI compatibility
[01:20:52] <strcat> new rustc version -> need to rebuild everything
[01:20:58] *** Joins: enos (jkingyens@moz-B0C1B161.hsd1.ca.comcast.net)
[01:21:50] *** Quits: ChrisOei_ (ChrisOei@moz-F629CBC.mycingular.net) (Client exited)
[01:21:54] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[01:23:08] <tautologico> no
[01:23:14] *** Joins: quux00 (uid24415@moz-E77DEB21.irccloud.com)
[01:23:51] <tautologico> compiling pure source
[01:23:55] *** Quits: matematikaadit (adit@9EE93488.3BEB2EDC.5C21B1A7.IP) (Quit: Leaving)
[01:24:00] <tautologico> rustc compiled a few hours ago
[01:24:17] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[01:25:07] <quux00> Hi - I'm having trouble with the select! macro.  I rebuilt rustc again today, but the problem is still there.
[01:25:12] <quux00> Here's the code: https://gist.github.com/quux00/9560018
[01:25:31] <quux00> It won't let me reference a Receiver that is inside a struct.
[01:27:14] *** Quits: jmgrosen (user@moz-848F6087.sb.sd.cox.net) (Ping timeout)
[01:28:36] *** Quits: brendan (brendaneic@moz-F75AEEB2.public.wayport.net) (Quit: brendan)
[01:29:55] *** Joins: brianm (brianm@moz-F76565E4.hsd1.ca.comcast.net)
[01:30:08] *** Joins: depp (depp@500BAFC1.53465674.3C05E6CB.IP)
[01:30:08] *** Joins: dylukes (dylukes@39950E01.54C9F615.3D603179.IP)
[01:30:27] *** Quits: Rym (y@E8D0A0B2.CB04ED3A.51C6DE68.IP) (Ping timeout)
[01:31:54] *** Joins: Rym (y@E8D0A0B2.CB04ED3A.51C6DE68.IP)
[01:32:05] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[01:32:09] *** Joins: brandonson (SingingBoy@610D90A5.EE9B234.1ECA502.IP)
[01:33:26] *** Quits: q66 (q66@moz-F33530F2.range109-145.btcentralplus.com) (Ping timeout)
[01:33:49] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Connection reset by peer)
[01:34:05] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[01:34:48] *** Quits: brandonson (SingingBoy@610D90A5.EE9B234.1ECA502.IP) (Quit: WeeChat 0.4.3-dev)
[01:35:05] *** Quits: dylukes (dylukes@39950E01.54C9F615.3D603179.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[01:35:06] *** Quits: taharqa (Mibbit@moz-401462C1.fbx.proxad.net) (Quit: http://www.mibbit.com ajax IRC Client)
[01:35:46] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[01:38:49] *** Joins: brehaut (andrew@6D85C12E.2F6BE07D.613E47D1.IP)
[01:39:13] *** Quits: klaus (koz@moz-4486E876.hsd1.wa.comcast.net) (Quit: klaus)
[01:39:16] *** Quits: valentin (Thunderbir@F28FDB21.B8068B2.FAF22AF7.IP) (Ping timeout)
[01:39:20] *** Joins: valentin (Thunderbir@F28FDB21.B8068B2.FAF22AF7.IP)
[01:40:08] *** Joins: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net)
[01:40:22] *** Quits: brson (brson@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: leaving)
[01:41:57] *** Quits: valentin (Thunderbir@F28FDB21.B8068B2.FAF22AF7.IP) (Input/output error)
[01:42:01] *** Joins: valentin (Thunderbir@F28FDB21.B8068B2.FAF22AF7.IP)
[01:42:50] *** Quits: alkino (alkino@moz-58B8E4B4.w92-151.abo.wanadoo.fr) (Ping timeout)
[01:44:14] <tautologico> the fail is at rust/src/libserialize/ebml.rs:130
[01:45:55] *** Quits: valentin (Thunderbir@F28FDB21.B8068B2.FAF22AF7.IP) (Ping timeout)
[01:46:38] *** Quits: mpiechotka (mpiechotka@moz-D9096804.dynamic.mnet-online.de) (Connection reset by peer)
[01:46:54] *** Joins: valentin (Thunderbir@F28FDB21.B8068B2.FAF22AF7.IP)
[01:47:05] *** Joins: dylukes (dylukes@39950E01.54C9F615.3D603179.IP)
[01:47:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[01:47:20] *** Quits: arturo (Thunderbir@moz-E83B14F0.superkabel.de) (Ping timeout)
[01:47:35] *** Joins: Savago (Savago@moz-679D1D3C.hsd1.ca.comcast.net)
[01:47:51] *** Quits: Savago (Savago@moz-679D1D3C.hsd1.ca.comcast.net) (Quit: Savago)
[01:48:36] *** Joins: mno2 (mno2@moz-3506EAC7.singnet.com.sg)
[01:49:13] *** Quits: philix (felipe@moz-49826C81.user.veloxzone.com.br) (Ping timeout)
[01:49:27] *** Joins: philix (felipe@moz-D4FC8261.user.veloxzone.com.br)
[01:49:30] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[01:49:51] *** Joins: q66 (q66@moz-48EC1059.range81-129.btcentralplus.com)
[01:50:28] <sfackler> tautologico: that's not an error that I'd expect to see. what are you compiling?
[01:50:55] <tautologico> I just cloned SciRust's repo and tried to compile it
[01:51:20] <tautologico> https://github.com/eholk/SciRust
[01:51:21] *** Joins: arturo (Thunderbir@moz-5606BC11.pool.mediaways.net)
[01:51:30] *** Joins: ChrisOei (ChrisOei@moz-30D80888.hsd1.ca.comcast.net)
[01:51:34] *** Quits: q66 (q66@moz-48EC1059.range81-129.btcentralplus.com) (Quit: Leaving)
[01:51:42] *** Quits: Rym (y@E8D0A0B2.CB04ED3A.51C6DE68.IP) (Ping timeout)
[01:51:59] *** Joins: Rym (y@E8D0A0B2.CB04ED3A.51C6DE68.IP)
[01:52:07] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[01:52:31] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[01:53:14] *** Joins: jmgrosen (user@moz-848F6087.sb.sd.cox.net)
[01:54:03] *** Joins: leowoe (Leo@moz-9517672.dip0.t-ipconnect.de)
[01:54:18] *** Quits: leowoe (Leo@moz-9517672.dip0.t-ipconnect.de) (Quit: Leaving.)
[01:54:53] <sfackler> i'm just running into compile errors due to rustc changes
[01:54:57] *** Quits: morganb (morgan_b_@moz-5EAC75A2.hfc.comcastbusiness.net) (Ping timeout)
[01:55:02] <sfackler> are you on master?
[01:56:00] <tautologico> yes
[01:56:27] *** Joins: brandonson (SingingBoy@610D90A5.EE9B234.1ECA502.IP)
[01:56:33] <tautologico> compiled it a few hours ago
[01:57:24] *** Joins: onelson (owen@18CF7301.95770028.5B6BFE7D.IP)
[01:58:03] *** Quits: arturo (Thunderbir@moz-5606BC11.pool.mediaways.net) (Ping timeout)
[01:58:10] <sfackler> :q
[01:58:12] <sfackler> oops
[01:58:30] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[01:59:23] <sfackler> you aren't running into issues like this?: src/SciRust/matrix/algorithms.rs:147:23: 147:34 error: cannot index a value of type `RHS`
[01:59:58] *** Quits: maxli1 (Adium@moz-B19F68ED.student.cs.uwaterloo.ca) (Quit: Leaving.)
[02:00:45] *** Quits: Rym (y@E8D0A0B2.CB04ED3A.51C6DE68.IP) (Ping timeout)
[02:01:00] <tautologico> no
[02:01:05] <tautologico> it just dies
[02:01:19] <tautologico> I'm trying to compile other stuff but so far can't reproduce 
[02:01:42] *** Joins: arturo (Thunderbir@moz-E83B14F0.superkabel.de)
[02:02:14] *** Joins: henrikhodne (henrikhodn@moz-71A05C56.cluenet.org)
[02:02:38] <sfackler> weird
[02:02:48] <sfackler> try compiling with RUST_LOG=std::rt::backtrace
[02:03:52] <tautologico> I did
[02:03:53] *** Joins: maxli (Adium@moz-B19F68ED.student.cs.uwaterloo.ca)
[02:04:02] <tautologico> prints a backtrace but I can't get much from it
[02:04:09] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[02:04:25] *** Quits: brianm (brianm@moz-F76565E4.hsd1.ca.comcast.net) (Quit: Leaving...)
[02:04:43] *** Quits: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP) (Quit: colinsurprenant)
[02:05:08] <dagle> What does the word box do in rust code? Can't find it in the manual.
[02:05:12] <tautologico> driver::driver::phase_3_run_analysis_passes seems to be the point where it goes south
[02:05:51] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[02:06:19] <sfackler> dagle: generic allocation thingy
[02:06:25] <sfackler> box foo is the same as ~foo
[02:06:33] <dagle> Ok.
[02:06:41] <sfackler> there's other stuff right now like box(RC) foo
[02:06:45] <sfackler> it's not really done yet
[02:07:04] <dagle> Some code broke because of variables called box etc.
[02:08:18] <brandonson> is there a good way to do something like the Observer pattern without ending up using Rc or similar?
[02:10:08] <sfackler> Rc seems like the most straightforward way to go
[02:10:28] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[02:10:34] <tautologico> what's libsync?
[02:10:39] <sfackler> you can even use weak pointers on the observed side if you don't want to worry about unregistering correctly :P
[02:11:01] <sfackler> tautologico: most of the synchronization primitives (Arc, Mutex, etc) were pulled out into it
[02:11:13] <huon> strcat: woah, you can filter on args to syscalls? the seccomp is powerful
[02:12:09] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[02:12:19] <sfackler> huon: I've been thinking that it's possible to make deriving work with phantom type params in the simple cases
[02:12:32] <sfackler> it could scan the types of all fields to see if the parameter is used or no
[02:12:33] <sfackler> t
[02:12:35] <brandonson> sfackler: there are weak ptrs now?  thats actually exactly what I need I think
[02:12:41] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[02:12:55] <sfackler> brandonson: yep, http://static.rust-lang.org/doc/master/std/rc/struct.Weak.html
[02:13:13] <sfackler> iirc you do my_rc_box.clone().downgrade()
[02:13:18] *** Joins: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net)
[02:14:01] <huon> sfackler: yes, that would work, for simple cases
[02:14:15] <brandonson> sfackler: great, thanks!
[02:14:25] <nstdloop> Just left my computer for 3 hours to build rust from source - took 39 minutes...
[02:14:27] <sfackler> it wouldn't work if you're passing the phantom parameter through to another type, but I don't think that's as common?
[02:14:35] <huon> but, e.g. struct Phantom1<T>; #[deriving(...)] struct Phantom2<T> { x: Phatom1<T> }
[02:14:36] <huon> yeah
[02:14:41] <huon> exactly
[02:14:56] <huon> I don't know... it seems like it's also duplicating the resolve rules a little bit
[02:15:17] <huon> (i.e. working out that a certain type path refers to a certain type parameter)
[02:15:24] <sfackler> yeah
[02:15:29] <huon> I wonder how it would work with hygiene
[02:15:59] <sfackler> it should be fine I think. Isn't it just checking the path of the field types to see if it matches the generic param's ident?
[02:16:01] <huon> e.g. macro_rules foo { ($t: ident) => struct Phantom<T> { x: $t } } foo!(T)
[02:16:18] <huon> I don't know... resolve does some peculiar stuff with idents
[02:16:29] <huon> (i.e. it has to call mtwt::resolve iirc)
[02:16:40] <sfackler> it may be more trouble than it's worth
[02:16:54] <huon> yeah
[02:17:18] <huon> I'm very nervous about duplicating name resolution stuff in an ad-hoc way
[02:18:06] <sfackler> If we go for full macro hygeine, there'll be way more infrastructure in place that may make this easier
[02:18:18] <nstdloop> Where is test in master? In 0.9 it's in extra::test.
[02:18:28] <sfackler> nstdloop: libtest
[02:18:30] <huon> nstdloop: the test crate
[02:19:00] <huon> (the answer to "where did this extra::foo module move to" is almost always "to the new `foo` crate")
[02:19:25] <nstdloop> Thanks. Good to know. Why was ~[] deprecated?
[02:19:30] <huon> sfackler: https://github.com/mozilla/rust/issues/7671 is the issue, btw
[02:19:37] <huon> nstdloop: https://github.com/mozilla/rust/issues/8981
[02:19:43] <sfackler> nstdloop: it needs to go away for the DST changes
[02:19:45] <huon> see the benchmarks
[02:19:49] <sfackler> and vec_ng is way faster
[02:19:53] <huon> (and also DST, I guess)
[02:21:13] <gregburd> Anyone know why this line: https://github.com/michaelwoerister/rs-persistent-datastructures/blob/master/hamt.rs#L56 results in this compiler message (0.10-pre)  hamt.rs:56:9: 56:13 error: attempt to bound type parameter with a nonexistent trait `Hash`
[02:21:48] <nstdloop> How do I use vec_ng?
[02:21:59] <sfackler> gregburd: you need to "use std::hash::Hash";
[02:22:11] <huon> same as normal vec, except `~[...]` is now `vec!(...)`
[02:22:13] <sfackler> nstdloop: it's a normal type in std::vec_ng
[02:22:15] <huon> and indexing is .get(...)
[02:22:18] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[02:22:20] <gregburd> ok, thanks
[02:22:20] <nstdloop> ~Vec::new() is the same as ~[], basically?
[02:22:22] *** Quits: mbx (mbebenita@moz-B45FE61C.hsd1.ca.comcast.net) (Quit: mbx)
[02:22:29] <huon> no, just Vec::new()
[02:22:29] <sfackler> Vec::new() is the same as ~[]
[02:22:31] <sfackler> no ~
[02:22:31] <huon> no ~
[02:22:36] <huon> hah
[02:22:39] <nstdloop> Ah.
[02:22:45] <sfackler> also Index *really* needs to be fixed now
[02:23:30] <huon> sfackler: https://github.com/mozilla/rust/issues/6515#issuecomment-37714069
[02:23:35] <nstdloop> Why doesn't this just replace the underlying implementation?
[02:24:11] <sfackler> once DST lands, ~[T] doesn't mean the same thing it does now
[02:24:15] <huon> nstdloop: because then ~[...] would be so much more wildly different from any other ~T
[02:24:22] <sfackler> it's a heap allocated, *fixed size* vector
[02:24:25] <huon> and then the DST changes will make it yet more different
[02:24:46] *** Quits: valentin (Thunderbir@F28FDB21.B8068B2.FAF22AF7.IP) (Ping timeout)
[02:24:54] <nstdloop> What are these DST changes?
[02:24:54] *** Joins: valentin (Thunderbir@F28FDB21.B8068B2.FAF22AF7.IP)
[02:25:09] <sfackler> dynamically sized types
[02:25:16] <sfackler> basically, [T] and str aren't types right now
[02:25:23] <sfackler> since they don't have a compile-time known size
[02:25:34] <sfackler> which means that you can't have a Rc<str>
[02:25:40] <nstdloop> Raw [T] doesn't?
[02:25:47] <sfackler> nope
[02:26:03] <nstdloop> I thought that [T] is the same as a C array with some methods attached.
[02:26:10] <nstdloop> Clearly though wrong.
[02:26:23] <sfackler> [T] is (IIRC) {len, ele1, ele2, ....}
[02:26:31] <huon> sfackler: under DST?
[02:26:46] <sfackler> currently, right?
[02:26:50] <nstdloop> sfackler: So basically a C array with len?
[02:27:04] <huon> well, &[T], is (*{e, e, e, ... }, len)
[02:27:04] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[02:27:16] <nstdloop> Weird
[02:27:19] <huon> and ~[T] is *(len, capacity, e, e, e, e, ...)
[02:27:21] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Client exited)
[02:27:22] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[02:27:27] <nstdloop> Weirder
[02:27:30] <huon> i.e. the first is a fat pointer, the second is a weird pointer
[02:27:52] <huon> under DST &[T] and ~[T] will both be (*{e, e, e, ...}, len)
[02:27:59] <nstdloop> Makes sense
[02:28:07] <huon> but ~[T] will have an owned pointer for the vector
[02:28:12] *** Joins: bmu (chatzilla@moz-A87574A6.hsd1.pa.comcast.net)
[02:28:22] <quux00> I'm having trouble with the select! macro. I rebuilt rustc again today, but the problem is still there.
[02:28:27] <quux00> Here's the code: https://gist.github.com/quux00/9560018
[02:28:36] <quux00> It won't let me reference a Receiver that is inside a struct.  That seems wrong.
[02:29:18] <sfackler> that is the reason, though
[02:29:26] <strcat> huon: yeah it lets you build a filter set
[02:29:31] *** Joins: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP)
[02:29:45] <strcat> just goes top down and then does the default action if nothing else hit
[02:30:01] <strcat> and there's even a JIT compiler in the kernel you can enable to make these fast ;p
[02:30:14] <strcat> net.core.bpf_jit_enable = 0
[02:30:20] <sfackler> D:
[02:30:24] <huon> ah, yes, security features using a JIT.. sounds secure :P
[02:30:31] <strcat> huon: well not by default ;)
[02:30:35] <strcat> and it's a really simple JIT
[02:31:21] <huon> quux00: you just have to write `let p = &a.p; ... `a = p.recv() => `
[02:33:06] *** Quits: jadbaires (jadrian@9A1DFBE1.4BF4CBDB.6119BA41.IP) (Ping timeout)
[02:33:07] <quux00> I tried something like that but couldn't get it to work.
[02:34:06] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[02:35:28] <strcat> huon: https://github.com/torvalds/linux/tree/master/arch/x86/net
[02:35:35] <strcat> although it's off by default everywhere
[02:36:04] <quux00> huon: I'm getting different errors now:  error: mismatched types: expected `&std::comm::Receiver<<generic #45>>` but found `&&std::comm::Receiver<~str>`
[02:36:21] <quux00> huon: I updated the gist: https://gist.github.com/quux00/9560018
[02:36:32] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[02:36:35] <huon> strcat: ah neat, seems simple enough, yeah
[02:36:50] <huon> quux00: oh... bleh :(
[02:36:57] *** Quits: hdevalence (quassel@moz-D125A39F.home3.cgocable.net) (Connection reset by peer)
[02:37:06] <huon> it would have to be `let p = a.p;`... but that will move p out of a
[02:37:12] *** Joins: hdevalence (quassel@moz-D125A39F.home3.cgocable.net)
[02:37:15] <huon> I don't think there's a proper solution for this
[02:37:20] <huon> can you file a bug?
[02:37:26] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[02:37:33] <quux00> huon: Yes, thanks.
[02:37:34] *** Joins: bleibig (bleibig@moz-B4D9C5AF.hsd1.ca.comcast.net)
[02:37:39] <huon> (something like "cannot use `select!` with port contained in a struct")
[02:37:47] *** Joins: Ralith (ralith@114DA04D.CD83ED0A.BCDF04A6.IP)
[02:37:51] <quux00> I'll do it now.
[02:37:51] <huon> you can work around it by writing the equivalent code manually
[02:38:26] <quux00> huon:  That will force me to understand the actual Select API, which is probably a good thing.
[02:38:47] *** Quits: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net) (Ping timeout)
[02:38:49] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[02:38:57] *** Quits: hdevalence (quassel@moz-D125A39F.home3.cgocable.net) (Ping timeout)
[02:39:51] *** Quits: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP) (Quit: colinsurprenant)
[02:40:16] <strcat> huon: oh and if you set it to 2 instead of 1 it prints out the program
[02:40:18] *** Joins: hdevalence (quassel@moz-D125A39F.home3.cgocable.net)
[02:40:22] <strcat> neat
[02:40:23] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[02:41:01] <huon> strcat: the jit setting? (prints the JIT'd or the raw program?)
[02:41:04] <strcat> yeah
[02:41:15] *** Joins: brendan (brendaneic@35E90EE3.B8B12C49.396B22AD.IP)
[02:41:29] <strcat> huon: sec
[02:41:30] * strcat tries
[02:42:01] <strcat> huon: yeah the compiled code
[02:43:09] *** Quits: dylukes (dylukes@39950E01.54C9F615.3D603179.IP) (Quit: Textual IRC Client: www.textualapp.com)
[02:44:06] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[02:45:33] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[02:45:54] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[02:46:01] <gregburd> another easy one for this crew: error: use of undeclared type name `BenchHarness`
[02:46:34] <sfackler> gregburd: "extern crate test; use test::BenchHarness;"
[02:46:50] <gregburd> see I knew it was easy :)
[02:46:52] <gregburd> thanks
[02:46:58] *** Quits: Earnestly (earnest@18162BE0.BA6AC103.30311652.IP) (Quit: WeeChat 0.4.4-dev)
[02:47:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[02:48:11] <gregburd> error: unresolved import: there is no `BenchHarness` in `test`
[02:48:12] <gregburd> doh
[02:49:28] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[02:49:55] <gregburd> self::test::BenchHarness
[02:51:09] *** Joins: tjc (tjc@moz-6EB4E533.dsl.tsoft.com)
[02:51:10] *** ChanServ sets mode: +o tjc
[02:52:09] *** Quits: jmgrosen (user@moz-848F6087.sb.sd.cox.net) (Ping timeout)
[02:52:16] *** Joins: erickt (etryzelaar@49C4075F.3AC15C18.2321E71E.IP)
[02:52:27] *** Quits: dymk (dymk@C94BAFB1.AA444DA9.3FBA778E.IP) (Quit: This computer has gone to sleep)
[02:52:36] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[02:53:05] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[02:54:49] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[02:56:05] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[02:56:34] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[02:57:37] *** Joins: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP)
[02:58:20] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Ping timeout)
[02:59:05] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[02:59:29] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[03:00:05] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[03:01:03] *** Quits: brendan (brendaneic@35E90EE3.B8B12C49.396B22AD.IP) (Quit: brendan)
[03:04:11] *** Quits: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net) (Input/output error)
[03:07:09] *** Joins: jadbaires (jadrian@moz-C9D30C2.dsl.telepac.pt)
[03:08:29] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[03:08:55] *** Joins: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net)
[03:09:00] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[03:09:46] *** Joins: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net)
[03:09:46] *** Quits: jadbaires (jadrian@moz-C9D30C2.dsl.telepac.pt) (Quit: Konversation terminated!)
[03:10:44] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[03:10:54] *** Quits: zz_kimundi (kimundi@moz-61CF2AFF.dip0.t-ipconnect.de) (Ping timeout)
[03:11:09] <nstdloop> the test crate uses ~[], is that supposed to happen? I get warnings whenever I use it.
[03:11:48] <nstdloop> Also is there a way to not get warnings for main being dead code whenever I compile with --test?
[03:12:05] <sfackler> you can tag it with #[allow(dead_code)]
[03:12:06] <strcat> #[cfg(not(test))] on main
[03:12:09] <sfackler> or that
[03:12:30] <huon> #[allow(deprecated_owned_vector)]; will silence the ~[] warnings too
[03:12:54] <nstdloop> huon: I presume that the test crate will eventually be updated but it just hasn't yet?
[03:13:00] <sfackler> yep
[03:13:02] <huon> yeah, exactly
[03:13:10] <strcat> huon: hm it seems that the JIT doesn't handle seccomp yet ;s
[03:13:14] <strcat> I see a patch for it on lkml though
[03:13:25] *** Joins: Curly-Brace (Mibbit@moz-21083258.hsd1.va.comcast.net)
[03:13:29] <Curly-Brace> hello
[03:13:33] <huon> I wrote that lint to help with removing ~[] from the main codebase, and to make sure that we don't regress once the use has been removed from a crate/module
[03:13:46] <Curly-Brace> can anyone help with a rust install?
[03:13:53] <strcat> huon: http://sprunge.us/XcYi
[03:13:56] <strcat> it is outputting them
[03:14:00] <strcat> but not when I run my program ;s
[03:14:06] <strcat> maybe these are from chromium
[03:14:13] <Curly-Brace> I downloaded the tar.gz on a 32bit ubuntu vm, but I'm running into an issue make-ing it
[03:14:14] * strcat confused
[03:14:28] <Curly-Brace> os for i686-unkown-linux-gnu
[03:14:41] *** Joins: zz_kimundi (kimundi@moz-4A4AB822.dip0.t-ipconnect.de)
[03:14:58] *** zz_kimundi is now known as kimundi
[03:15:07] <Curly-Brace> any ideas?
[03:15:18] <Curly-Brace> Googling turned up some results, but no good solutions
[03:16:00] <strcat> Curly-Brace: what problem?
[03:16:23] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[03:16:26] <Curly-Brace> make fails when I try to install rust
[03:16:33] <Curly-Brace> or, rather, it hangs
[03:17:14] <strcat> how long did you wait
[03:17:25] <Curly-Brace> 'compile_and_link: i686-unknown-linux-gnu/stage1/rustlib/i686-unknown-linux-gnu/lib/librustc.so
[03:17:45] <strcat> that will take 2 minutes or something
[03:17:53] <Curly-Brace> I've waited much longer than that
[03:18:01] <strcat> how much memory does the VM have?
[03:18:01] <sfackler> unless you don't have enough RAM, in which case you'll start swapping and it'll take forever
[03:18:08] <Curly-Brace> 2 GB
[03:18:15] <strcat> give it more
[03:18:23] <Curly-Brace> its a 32 bit VM, so I will have to max it out on 4
[03:18:25] <strcat> rust needs something like 1500MiB peak
[03:18:56] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[03:19:21] <strcat> huon: lol I think these might actually be from wireshark
[03:19:32] <strcat> some at least
[03:19:36] * strcat sighs
[03:19:42] <nstdloop> What's the type for vec_ng? Instead of ~[T] I write...
[03:19:50] <sfackler> Vec<T>
[03:19:52] <Curly-Brace> thanks for the info, srtcat
[03:19:55] <nstdloop> Convenient
[03:19:57] <Curly-Brace> strcat*
[03:22:36] <nstdloop> sfackler: And I use std::vec_ng;?
[03:22:44] <sfackler> use std::vec_ng::Vec;
[03:22:48] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[03:22:57] <nstdloop> and to get vec!?
[03:23:02] <strcat> nstdloop: no
[03:23:06] <strcat> vec! is already there
[03:23:23] <strcat> `use` is never *required*, it just brings a name into the current scope
[03:23:25] <strcat> as a shortcut
[03:23:51] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[03:23:51] <nstdloop> strcat: So I could just fully qualify everything everywhere and it would be fine.
[03:23:57] <strcat> yes
[03:24:08] <strcat> just annoying
[03:25:02] <WalrusPony> and verbose
[03:25:59] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[03:26:08] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[03:26:17] *** Quits: tcsc (tcsc@moz-5E71BAD9.hsd1.ma.comcast.net) (Quit: bye!)
[03:28:07] *** Quits: untitaker (untitaker@moz-E333EC7E.adsl.highway.telekom.at) (Ping timeout)
[03:29:51] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[03:30:19] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[03:30:51] <Curly-Brace> strcat: its still hung
[03:30:56] <Curly-Brace> after 10 minutes now with 4GB
[03:31:05] <nstdloop> What function would I use to apply a closure to a value inside an Option? map is giving me a weird type.
[03:31:30] *** Joins: klaus (koz@moz-4486E876.hsd1.wa.comcast.net)
[03:32:03] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[03:32:03] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Ping timeout)
[03:32:06] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[03:32:48] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[03:32:48] *** ChanServ sets mode: +ao pcwalton pcwalton
[03:33:27] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Ping timeout)
[03:33:35] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[03:33:43] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[03:33:51] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[03:33:52] <sfackler> nstdloop: what are you trying to do exactly? map or mutate are probably what you're looking for
[03:34:09] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[03:34:11] <nstdloop> sfackler: I wanted map, I was just doing something silly inside it that was giving me a weird type.
[03:34:13] <rdgawdzi> Is there a way to print out a one level deep stack trace with debug? I want to know who called this popular function.
[03:34:29] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[03:35:00] <nstdloop> Vec doesn't implement sort :(
[03:35:05] *** Quits: enos (jkingyens@moz-B0C1B161.hsd1.ca.comcast.net) (Quit: enos)
[03:35:34] *** Joins: untitaker (untitaker@moz-6DF8CD9D.adsl.highway.telekom.at)
[03:35:41] <sfackler> it does have sort_by, but someone should add sort
[03:36:11] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[03:36:23] *** Quits: maxli (Adium@moz-B19F68ED.student.cs.uwaterloo.ca) (Quit: Leaving.)
[03:36:53] <Curly-Brace> can anyone help me with my rust installation?
[03:37:14] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[03:37:30] <sfackler> Curly-Brace: it's probably just chugging along
[03:37:44] <nstdloop> Curly-Brace: It takes a while, especially if you are on a VM/using swap.
[03:38:07] *** Quits: jeaye (jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[03:38:21] <sfackler> Curly-Brace: also, if you're on Ubuntu, you can just use the precompiled packages: https://launchpad.net/~hansjorg/+archive/rust
[03:38:24] *** Joins: sankha93 (sankha93@7061CD01.D6BD0D91.22D41759.IP)
[03:39:14] <Curly-Brace> I think its hanging on one specific item
[03:39:21] *** Quits: claudiu (claudiu@moz-33191099.thefacebook.com) (Input/output error)
[03:40:26] <sfackler> librustc takes way longer than any other one of the libraries to build
[03:40:33] *** Joins: claudiu (claudiu@moz-33191099.thefacebook.com)
[03:40:42] <nstdloop> An interesting consequence of using mod instead of a crate is that it pulls in all the tests too. Is there a way around that?
[03:41:01] <sfackler> ?
[03:42:14] *** Quits: claudiu (claudiu@moz-33191099.thefacebook.com) (Ping timeout)
[03:42:48] <sfackler> nstdloop: what do you mean exactly?
[03:43:27] <nstdloop> sfackler: I have a file called common.rs, which implements some common functions and tests for them. When I then do mod common; in another file, when I compile that file with --test, it also pulls in all the tests from common.rs
[03:44:06] <sfackler> the test model builds tests for an entire crate
[03:44:24] <huon> nstdloop: vec.as_mut_slice().sort()
[03:44:52] <sfackler> you can limit which tests are run though
[03:44:52] <nstdloop> huon: Thank you.
[03:44:52] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[03:45:39] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[03:45:43] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[03:45:53] <nstdloop> sfackler: How? I've basically just marked everything with #[test]
[03:46:08] <strcat> huon: http://sprunge.us/EDbA definitely not mine
[03:46:15] <strcat> I guess the seccomp support for the JIT didn't land yet
[03:46:29] <strcat> ;[
[03:46:40] <Curly-Brace> sfackler: which os are those for - 32bit or 64 bit, those PPAs?
[03:47:05] <sfackler> there are 64 bit builds at least, not sure about 32 bit
[03:47:08] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[03:47:12] *** Quits: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP) (Quit: colinsurprenant)
[03:47:22] <Curly-Brace> oh
[03:47:24] <Curly-Brace> thanks anyway
[03:47:37] *** Quits: meyer (meyer@moz-A9CF56E4.hsd1.ca.comcast.net) (Quit: meyer)
[03:47:40] *** Joins: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP)
[03:47:40] *** Quits: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net) (Quit: Sharp)
[03:47:43] <sfackler> Curly-Brace: looke like they're also built for i386
[03:48:07] <sfackler> you can also get a nightly build from there, which is highly reccommended over .9
[03:48:24] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[03:49:17] *** Quits: derek_c (derek@moz-16A6DFBC.cit.cornell.edu) (Quit: Leaving)
[03:49:34] <Curly-Brace> I confess I'm having trouble understanding how to install them
[03:49:39] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[03:49:41] *** Joins: fournm (Aria@moz-ABB60BA0.austin.res.rr.com)
[03:50:53] <sfackler> Curly-Brace: sudo add-apt-repository ppa:hansjorg/rust && sudo apt-get update && sudo apt-get install rust-nightly
[03:51:42] <nstdloop> Switching from ~[] to Vec<> has dramatically increased the speed of my code. Good stuff.
[03:52:01] *** Quits: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP) (Quit: colinsurprenant)
[03:52:19] <strcat> nstdloop: 5-7x faster push if that's all you do ;p
[03:52:52] <sfackler> strcat: is that due to better realloc behavior or just a better representation or what?
[03:53:27] <strcat> sfackler: single overflow check (doesn't have a header to account for), better aliasing (data doesn't alias length), etc.
[03:53:38] *** Quits: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net) (Input/output error)
[03:53:44] <sfackler> cool
[03:54:08] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Client exited)
[03:54:22] <strcat> indexing might be insignificantly faster too ;P
[03:54:30] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[03:55:03] *** Joins: pepper_chico (pepper_chi@BE2968B5.6F4A2706.E4090502.IP)
[03:55:15] *** Joins: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP)
[03:55:17] <sfackler> Curly-Brace: out of curiosity, why are you running a 32 bit VM anyways?
[03:55:21] *** Joins: wilmoore (wilmoore@moz-4EF3CEBC.hsd1.co.comcast.net)
[03:55:23] <strcat> huon: these programs mark packets in weird ways ;s
[03:55:35] <strcat> funny looking at the little JIT compiled programs wireshark generates this way
[03:55:52] * strcat is entertained by weird things
[03:56:12] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[03:56:28] *** Joins: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net)
[03:56:53] <strcat> http://sprunge.us/gCXD yeah that's from wireshark
[03:57:05] <strcat> http://sprunge.us/MOSS another from wireshark
[03:57:06] *** Quits: valentin (Thunderbir@F28FDB21.B8068B2.FAF22AF7.IP) (Ping timeout)
[03:57:16] *** Joins: valentin (Thunderbir@F28FDB21.B8068B2.FAF22AF7.IP)
[03:57:27] *** Quits: pepper_chico (pepper_chi@BE2968B5.6F4A2706.E4090502.IP) (Quit: WeeChat 0.4.1)
[03:57:31] <strcat> http://sprunge.us/PRRh even more!
[03:57:33] * strcat shrugs
[03:57:34] *** Joins: pepper_chico (pepper_chi@BE2968B5.6F4A2706.E4090502.IP)
[03:57:50] *** jorendorff is now known as jorendorff_away
[04:00:16] *** Quits: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP) (Quit: colinsurprenant)
[04:01:15] *** Joins: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP)
[04:01:23] *** Quits: valentin (Thunderbir@F28FDB21.B8068B2.FAF22AF7.IP) (Ping timeout)
[04:01:31] *** Joins: valentin (Thunderbir@F28FDB21.B8068B2.FAF22AF7.IP)
[04:03:35] *** Quits: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP) (Quit: colinsurprenant)
[04:04:18] *** Quits: pepper_chico (pepper_chi@BE2968B5.6F4A2706.E4090502.IP) (Quit: WeeChat 0.4.1)
[04:04:29] *** Joins: pepper_chico (pepper_chi@BE2968B5.6F4A2706.E4090502.IP)
[04:04:40] *** Joins: dmillerw (Dylan@moz-56E63BDE.eugn.qwest.net)
[04:06:20] *** Quits: pepper_chico (pepper_chi@BE2968B5.6F4A2706.E4090502.IP) (Quit: WeeChat 0.4.1)
[04:06:53] *** Quits: cgaebel (clark@moz-F9D89110.nyc.res.rr.com) (Ping timeout)
[04:06:56] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[04:07:10] *** Joins: pepper_chico (pepper_chi@BE2968B5.6F4A2706.E4090502.IP)
[04:07:32] <huon> strcat: http://sprunge.us/MOSS doesn't seem like a very useful filter... ?
[04:07:53] *** Joins: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca)
[04:08:01] <strcat> huon: there are packet filters though, not seccomp ones
[04:08:07] <strcat> huon: dunno exactly what it's doing ;p
[04:08:36] <huon> strcat: yeah, even as a packet filter, it doesn't seem very useful :P
[04:08:56] <strcat> huon: *shrug* :)
[04:08:59] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[04:09:15] *** Joins: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP)
[04:10:07] *** Quits: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Quit: It is tiem!)
[04:11:25] *** Quits: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP) (Quit: colinsurprenant)
[04:11:45] *** Joins: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP)
[04:12:00] *** Joins: Florob (Florob@moz-39532932.de)
[04:12:23] *** Quits: kris (kris@moz-6D20263F.fullrate.dk) (Ping timeout)
[04:13:23] *** Joins: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca)
[04:15:32] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Quit: csherratt)
[04:17:16] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[04:17:25] *** Joins: fenster (Mibbit@7E217F04.2C8DBE39.CC1A2609.IP)
[04:17:38] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[04:19:22] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[04:21:14] *** Quits: fenster (Mibbit@7E217F04.2C8DBE39.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[04:21:31] *** Quits: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net) (Input/output error)
[04:22:59] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[04:24:25] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[04:24:36] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[04:24:36] *** ChanServ sets mode: +ao pcwalton pcwalton
[04:24:51] *** Parts: brehaut (andrew@6D85C12E.2F6BE07D.613E47D1.IP) ()
[04:29:01] *** Quits: sunfish (chatzilla@moz-42DA0C69.dsl.dynamic.sonic.net) (Ping timeout)
[04:32:34] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[04:32:54] *** Quits: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP) (Quit: colinsurprenant)
[04:33:04] *** Joins: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP)
[04:34:20] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[04:35:14] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[04:37:01] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[04:38:03] *** Quits: mindcat (mindcat@F32E3B11.297EFC2A.57E3C596.IP) (Ping timeout)
[04:38:20] *** Joins: mindcat (mindcat@F32E3B11.297EFC2A.57E3C596.IP)
[04:39:10] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[04:39:46] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Quit: Leaving...)
[04:41:33] *** Quits: tjc (tjc@moz-6EB4E533.dsl.tsoft.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[04:41:54] <Curly-Brace> hello?
[04:42:25] <sfackler> hi
[04:42:28] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[04:42:28] *** Quits: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP) (Quit: colinsurprenant)
[04:42:53] *** Joins: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP)
[04:43:08] <Curly-Brace> thanks for the help earlier,
[04:43:14] <Curly-Brace> but I don't think it installed right
[04:43:29] <Curly-Brace> if I have a file that contians:
[04:43:44] <Curly-Brace> fn main() { println("hello world"); }
[04:43:52] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[04:43:55] <tautologico> I think the ICE I'm getting is when linking against libsync
[04:44:00] *** Joins: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net)
[04:44:13] <Curly-Brace> when I try to compile it, it says error unresolved name 'println'
[04:44:14] <tautologico> well, loading the libsync crate actually, during compilation not linkning
[04:44:19] <sfackler> the println function isn't use'd by default. You can either use println!(..) instead or "use std::io::println;"
[04:44:25] *** Joins: luziiie (luziie@moz-CD18B14B.customer.cdi.no)
[04:44:28] <sfackler> or call it as std::io::println
[04:44:42] *** Quits: luziie (luziie@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[04:44:47] *** Joins: jmgrosen (user@moz-848F6087.sb.sd.cox.net)
[04:44:50] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[04:45:23] *** Quits: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net) (Input/output error)
[04:45:53] *** Quits: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP) (Quit: colinsurprenant)
[04:46:05] <tautologico> is libextra still around or was it deprecated already?
[04:46:33] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[04:46:50] <huon> many things have be removed from it
[04:47:09] <huon> And there's a PR that removes libextra entirely
[04:48:10] <Curly-Brace> oh, I thought I was going insane there for a minute
[04:48:11] <Curly-Brace> thanks
[04:48:13] <Curly-Brace> !
[04:48:18] <tautologico> where's random numbers now?
[04:48:37] <huon> rand
[04:48:39] <huon> librand
[04:49:43] <tautologico> oh right
[04:51:52] *** Quits: arturo (Thunderbir@moz-E83B14F0.superkabel.de) (Ping timeout)
[04:57:24] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[04:57:40] *** Joins: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP)
[04:57:58] *** Quits: canhtak (canhtak@moz-9F5D2CD3.wl.t.ulaval.ca) (Quit: canhtak)
[04:58:03] *** Joins: luz1 (luziie@moz-CD18B14B.customer.cdi.no)
[04:58:35] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[04:58:43] *** Quits: luziiie (luziie@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[04:58:43] *** Quits: valentin (Thunderbir@F28FDB21.B8068B2.FAF22AF7.IP) (Ping timeout)
[04:59:18] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[04:59:37] *** Quits: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP) (Quit: colinsurprenant)
[05:00:17] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[05:02:03] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[05:02:22] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[05:03:02] *** Quits: heftig (heftig@moz-E758CD18.dip0.t-ipconnect.de) (Ping timeout)
[05:05:50] *** Joins: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP)
[05:05:57] *** Joins: heftig (heftig@moz-F0695C26.dip0.t-ipconnect.de)
[05:06:09] *** Quits: jmgrosen (user@moz-848F6087.sb.sd.cox.net) (Ping timeout)
[05:08:44] *** Quits: rootnode (rootnode@moz-35BACBD2.pools.arcor-ip.net) (Connection reset by peer)
[05:08:45] *** Joins: mindcat_ (mindcat@F32E3B11.297EFC2A.57E3C596.IP)
[05:08:52] <mindcat_> rusti:
[05:08:55] <mindcat_> rusti: ""
[05:09:02] <mindcat_> :S
[05:09:12] *** Joins: sawrubh (uid6719@moz-5F4AA75A.irccloud.com)
[05:09:25] <mindcat_> where is my rusti :S
[05:09:50] <sfackler> strcat: ^
[05:10:35] *** Quits: hdevalence (quassel@moz-D125A39F.home3.cgocable.net) (Ping timeout)
[05:11:20] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[05:11:39] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:11:41] <strcat> rusti: 2
[05:11:46] -rusti- application terminated abnormally with signal 31 (Bad system call)
[05:11:49] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[05:11:56] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:12:07] <strcat> ah we still don't default to libnative
[05:12:25] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:12:25] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[05:12:35] <WalrusPony> strcat: How does 2 cause it to terminate abnormally???
[05:12:40] * WalrusPony is confused
[05:12:43] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[05:12:43] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:12:44] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[05:12:46] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:12:52] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:13:00] <strcat> WalrusPony: because I was messing with the syscall whitelist
[05:13:12] *** Quits: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP) (Quit: colinsurprenant)
[05:13:15] <strcat> but I based my changes on the perf trace of rustc
[05:13:27] <strcat> forgot that libnative isn't the default for the stuff it builds yet
[05:13:29] <strcat> just rustc
[05:15:50] *** Joins: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP)
[05:17:40] *** Quits: andrewd18 (andrew@moz-DAC9D29F.wi.res.rr.com) (Quit: Leaving.)
[05:18:30] *** Quits: Curly-Brace (Mibbit@moz-21083258.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[05:20:11] <masonl> Is there a pow / lshift / rshift impls for extra::bigint ? 
[05:20:20] <masonl> s/a//
[05:21:38] <WalrusPony> http://static.rust-lang.org/doc/master/num/bigint/struct.BigInt.html
[05:21:57] <WalrusPony> In master there is indeed shl and shr for bigint
[05:22:02] *** Quits: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP) (Quit: colinsurprenant)
[05:22:11] <masonl> Oh I see, they're shl & shr.
[05:22:16] <mindcat_> how can I do....
[05:22:21] <masonl> I still don't see pow.
[05:22:26] *** Joins: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP)
[05:22:30] * mindcat_ forgot his question
[05:22:51] <WalrusPony> mindcat_: I can do you if that would help you remember
[05:23:17] *** Joins: tjc (tjc@moz-6EB4E533.dsl.tsoft.com)
[05:23:18] *** ChanServ sets mode: +o tjc
[05:24:13] <mindcat_> oh
[05:24:20] <mindcat_> I remember it
[05:25:37] <mindcat_> how can I get the 2 string... and I "found" how to solve it
[05:26:18] <mindcat_> (([0-9]+).*?([0-9]+))
[05:26:31] <mindcat_> that is I want
[05:26:40] *** Joins: jmgrosen (user@moz-848F6087.sb.sd.cox.net)
[05:26:54] <mindcat_> but, It seem not possible in rust?
[05:27:53] <sfackler> there are some regex libraries
[05:29:15] <mindcat_> right, I want "1-10" numbers, but I don't care any delimiter
[05:29:44] *** Quits: jmgrosen (user@moz-848F6087.sb.sd.cox.net) (Ping timeout)
[05:32:10] * mindcat_ look sky, and say "show me the rust-python bind"
[05:32:34] *** Quits: pepper_chico (pepper_chi@BE2968B5.6F4A2706.E4090502.IP) (Quit: WeeChat 0.4.1)
[05:33:20] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[05:34:55] *** Quits: dmillerw (Dylan@moz-56E63BDE.eugn.qwest.net) (Quit: Leaving)
[05:35:04] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[05:36:00] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[05:36:04] <WalrusPony> mindcat_: I don't think rust has regex yet
[05:37:06] <mindcat_> WalrusPony: so how can I do that problem?
[05:37:14] <mindcat_> WalrusPony: :S
[05:37:41] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[05:37:41] <WalrusPony> mindcat_: You either run back to C++ and do your regex there, or you wait until Rust finishes their regex
[05:38:38] <WalrusPony> kimundi: Now I'm wondering, are rust libraries architecture/platform independent?
[05:39:47] <huon> or use one of the many bindings
[05:39:54] <huon> WalrusPony: compiled binaries are not
[05:40:10] <huon> (they're essentially the same as C libraries)
[05:40:24] <huon> in source form... they may or may not be
[05:40:36] <huon> (e.g. one can have conditionally compiled things based on the current platform)
[05:40:36] <WalrusPony> But If I create a rust library crate as an rlib file, is that compiled to binary too?
[05:40:51] <huon> rlib is platform dependent
[05:41:14] <huon> (it's basically just an object archive (i.e. .a) but with some Rust specific files in it)
[05:41:14] <WalrusPony> okay, so I should always rebuild everything for the platform I'm on
[05:41:39] <huon> yes
[05:42:32] <huon> hansjorg: there's two projects called 'master' at the top of rust-ci
[05:43:05] <huon> mindcat_: rust-ci.org/projects/#regex
[05:43:13] <huon> http://rust-ci.org/projects/#regex
[05:47:07] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[05:47:55] <mindcat_> huon: OH
[05:48:01] *** Quits: quux00 (uid24415@moz-E77DEB21.irccloud.com) (Quit: Connection closed for inactivity)
[05:49:31] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[05:49:55] *** Quits: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP) (Quit: colinsurprenant)
[05:51:01] *** Joins: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP)
[05:53:09] *** Joins: jackneill (jackneill@moz-F383006F.pool.digikabel.hu)
[05:53:43] <sinistersnare> so i just got an error message because i forgot to put the parens at the end of a method. the error message said i should write an anonymous function. Maybe it should check if that same name exists as a method, and thus recommends to put the '()' ?
[05:53:51] <sinistersnare> its just a wrong error message, so seems strange
[05:54:01] *** Joins: luziiie (luziie@moz-CD18B14B.customer.cdi.no)
[05:54:45] *** Quits: luz1 (luziie@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[05:55:32] <doctor> 57230 root            9  31   10  1647M  1506M kqread  5   2:26 100.00% rustc
[05:55:36] *** Joins: mib_fhkr9t (Mibbit@7E217F04.2C8DBE39.CC1A2609.IP)
[05:55:40] * doctor waits for rust to finish compiling
[05:56:21] <doctor> load: 1.77  cmd: rustc 57230 [running] 206.39r 196.53u 5.88s 100% 1841656k
[05:56:23] <doctor> :(
[05:56:52] *** Joins: derek_c (derek@moz-16A6DFBC.cit.cornell.edu)
[05:58:03] *** Joins: AmagicalFishy (bzlandfill@moz-C7F4C089.hsd1.ct.comcast.net)
[05:58:09] *** Joins: ahunt (ahunt@moz-6D6D79D6.cable.virginm.net)
[05:58:26] *** Quits: AmagicalFishy (bzlandfill@moz-C7F4C089.hsd1.ct.comcast.net) (Quit: CGI:IRC)
[05:58:54] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[06:00:40] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[06:01:09] *** Quits: IanCormac84 (User@BA5C0764.64D641E5.67DFF8B4.IP) (Ping timeout)
[06:01:20] <masonl> Does anyone have an example of .zero() usage? (Zero trait)
[06:01:34] *** Joins: IanCormac84 (User@C099304.64D641E5.67DFF8B4.IP)
[06:02:25] <sfackler> masonl: let f: int = Zero::zero();
[06:03:46] *** Quits: mib_fhkr9t (Mibbit@7E217F04.2C8DBE39.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[06:05:29] *** Quits: tjc (tjc@moz-6EB4E533.dsl.tsoft.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[06:05:41] <masonl> Oh I see.
[06:06:05] <masonl> I was attempting to call zero() on a biguint.
[06:06:15] <masonl> sfackler: Thanks.
[06:06:52] <ChrisMorgan> strcat: I'm actually finding myself preferring rusti as it was with Poly than with Show.
[06:09:29] *** Quits: IanCormac84 (User@C099304.64D641E5.67DFF8B4.IP) (Ping timeout)
[06:09:52] *** Quits: sellout (Adium@moz-EE794C0C.hlrn.qwest.net) (Ping timeout)
[06:09:59] <doctor> git2/c.rs:740:20: 740:23 error: obsolete syntax: obsolete argument mode
[06:10:00] <doctor> git2/c.rs:740 pub fn git_tag_id(++tag: *git_tag) -> *git_oid;
[06:10:04] <doctor> what is that supposed to be now?
[06:10:32] *** Joins: IanCormac84 (User@93A65D51.64D641E5.67DFF8B4.IP)
[06:11:27] <huon> doctor: woah, woha
[06:11:39] <huon> that's like a million ancient
[06:11:58] <huon> I think that one can become `git_tag_id(tag: *git_tag) -> *git_oid`
[06:12:09] <doctor> okay
[06:12:23] <doctor> huon: does rust-bindgen still exist?
[06:12:27] <huon> yes
[06:12:32] <huon> https://github.com/crabtw/rust-bindgen
[06:13:18] <doctor> bindgen.rs:4:7: 4:12 error: expected `{` or `mod` but found `crate`
[06:13:19] <doctor> bindgen.rs:4 extern crate collections;
[06:15:15] <doctor> huon: next "lets make good new again"
[06:15:21] <doctor> git2/commit.rs:6:0: 6:3 error: found `mod` in ident position
[06:15:21] <doctor> git2/commit.rs:6 use mod c;
[06:17:01] * ChrisMorgan has seen the syntax of argument modes but does not know what they were
[06:17:01] <huon> doctor: heh, how old is this code?
[06:17:20] <huon> doctor: oh, your local rustc is too old for bindgen if it's complaining about that
[06:17:45] <huon> ChrisMorgan: controlling whether params are passed by-value or by-reference, or what
[06:17:55] <huon> -ever
[06:17:56] <doctor> huon: the git code is about a year old
[06:18:04] <o11c> ++tag means ?
[06:18:11] <huon> by value
[06:18:18] <doctor> %rustc --version
[06:18:18] <doctor> 'rustc 0.8
[06:18:23] <huon> (and 'meant'; they're completely gone)
[06:18:32] <doctor> huon: what are we up to?
[06:18:37] <huon> doctor: the current release is 0.9
[06:18:46] <huon> and .10 mustn't be far away
[06:18:46] <doctor> so, not incredibly old
[06:18:51] <doctor> we just need to update the port
[06:18:57] <huon> well... in rust land that is pretty ancient :P
[06:18:58] <ChrisMorgan> doctor: ...
[06:19:07] <doctor> huon: hehe
[06:19:08] <doctor> ChrisMorgan: eh?
[06:19:15] <huon> (master - 1 week) is nearly beyond living memory :P
[06:19:21] <ChrisMorgan> doctor: if you think that a year is not incredibly old, Rust might not be for you just yet!
[06:19:22] <doctor> huon: :-p
[06:19:22] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[06:19:25] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[06:19:43] <doctor> ChrisMorgan: I thought 0.8 was more recent
[06:19:43] <huon> ChrisMorgan: the 0.8 is "not incredibly old"
[06:19:55] <ChrisMorgan> Modes were gone well before 0.8.
[06:19:59] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[06:20:02] <doctor> ChrisMorgan: right, I found this old code
[06:20:04] <huon> ChrisMorgan: the git code is from pre-0.8
[06:20:12] <doctor> ChrisMorgan: I started with rust in 0.6
[06:20:38] <huon> doctor: https://github.com/kimhyunkang/git2-rs might be more recent?
[06:20:46] * ChrisMorgan thought that it was the code that was being spoken of as not incredibly old
[06:20:50] <doctor> huon: perhaps
[06:20:50] <huon> it might even compile with 0.8?
[06:20:54] *** Quits: philix (felipe@moz-D4FC8261.user.veloxzone.com.br) (Ping timeout)
[06:20:58] <doctor> huon: I'll try updating the port
[06:21:57] *** Quits: mawuli (mawuli@moz-EF4254B1.com.gh) (Ping timeout)
[06:21:57] *** Quits: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca) (Quit: Leaving.)
[06:22:51] <bjz> doctor: the port?
[06:23:06] <doctor> bjz: kind of like srpm
[06:23:28] <doctor> bjz: binary packages are created from ports
[06:23:50] *** Quits: james4k (james@moz-9BB5AE72.consolidated.net) (Ping timeout)
[06:24:03] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[06:24:03] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[06:24:27] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[06:26:11] *** Joins: dranov (dranov@61A04536.8894C792.FCAAE698.IP)
[06:27:52] <sinistersnare> does anyone have any insight onto the comment i made a bit ago?
[06:28:42] *** Joins: jmgrosen (user@moz-848F6087.sb.sd.cox.net)
[06:28:45] <huon> sinistersnare: the error message is "correct"
[06:28:51] *** Quits: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net) (Quit: Taking a nap.)
[06:29:04] <huon> but yes, it could also suggest "maybe you are missing ()"
[06:29:05] <sinistersnare> i feel like it can be helpful though, even if it is correct
[06:29:08] <sinistersnare> yes
[06:29:25] <huon> the error message is handling the case like `foo.map(bar.method)`
[06:29:27] <sinistersnare> but thats just a little thing for stupid people like me :)
[06:29:41] <huon> (`foo.map(function)` works fine; it's just methods that don't)
[06:29:52] <huon> hence, one has to write `foo.map(|a| bar.method(a))`
[06:30:03] <huon> that's what the current error message is saying, at least.
[06:30:48] *** Quits: jmgrosen (user@moz-848F6087.sb.sd.cox.net) (Ping timeout)
[06:30:51] <sinistersnare> makes sense, its not much, people find () things easily, a good IDE (if a good rust one is ever made :P ) would probably catch it easily
[06:31:12] <huon> would you like to add this as to the compiler?
[06:31:23] <huon> *as a contribution
[06:31:42] <huon> it should be relatively easy; I'm happy to assist
[06:32:39] <sinistersnare> i would love to help out
[06:33:14] <huon> sinistersnare: awesome; do you have a fork of mozilla/rust?
[06:33:35] *** Joins: pczarn (pczarn@moz-69A55FA.izacom.pl)
[06:33:35] <huon> (and a local clone of that repository)
[06:33:37] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[06:33:47] *** Joins: brontron (Mibbit@moz-C8D86903.tc.ph.cox.net)
[06:34:10] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[06:34:21] <sinistersnare> i have a local clone, ill fork it on github now
[06:34:30] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Quit: csherratt)
[06:34:47] <Rusky> anybody know how I would go about cross-compiling the rust libraries using mingw on linux, so I can cross-compile a rust program?
[06:35:57] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[06:36:45] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[06:37:03] *** Joins: Anupkumar (uid16774@moz-A42E5B7B.irccloud.com)
[06:38:27] <huon> sinistersnare: once you've done that and have a reasonably recent copy of master checked out (e.g. anything with in the last few days is perfectly ok, it doesn't have to be the absolutely most recent code for a small change like this)... find the relevant portion of the code (e.g. grep for a portion of the error message `git grep "attempted to take value of method"`)
[06:38:35] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[06:39:08] *** Quits: Rusky (russell@moz-173BA32C.slkc.qwest.net) (Ping timeout)
[06:40:39] <sinistersnare> huon, ive found the section of code!
[06:40:46] *** Joins: ofeldt- (ofeldt@moz-46A3A5E9.dip0.t-ipconnect.de)
[06:40:47] <huon> sinistersnare: \o/
[06:41:03] *** Joins: luz1 (luziie@moz-CD18B14B.customer.cdi.no)
[06:41:14] <huon> (oh, also, don't forget to create a new branch for your changes)
[06:41:22] <sinistersnare> oh yeah, i should figure this out :p
[06:41:37] *** Quits: ofeldt (ofeldt@moz-1D0ABFF0.dip0.t-ipconnect.de) (Ping timeout)
[06:41:48] <huon> `git checkout -b method-error-message` would create and checkout a new branch called 'method-error-message'
[06:41:48] *** Quits: luziiie (luziie@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[06:42:00] <huon> (based on top of the current code you have checked out)
[06:42:50] <doctor> load: 5.31  cmd: rustc 4102 [running] 340.73r 325.37u 4.32s 100% 825552k
[06:43:01] * doctor loves when compiling takes forever
[06:43:18] <ChrisMorgan> 303
[06:44:11] <sinistersnare> huon, ok ive made the branch and gotten to the path on my terminal
[06:45:03] <sinistersnare> now what?
[06:45:11] <huon> sinistersnare: opened the file in your favourite rust-y editor?
[06:45:18] <huon> (and find the relevant line)
[06:45:36] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[06:45:41] <doctor>  Undefined symbol "sinh"
[06:45:47] <huon> sinistersnare: (I believe it's about 2320 of librustc/middle/typeck/mod.rs, right?)
[06:45:48] <doctor> when compiling rust 0.8
[06:45:50] <doctor> when compiling rust 0.9
[06:45:51] <sinistersnare> yup, subText
[06:45:55] <sinistersnare> yes it is
[06:46:05] <huon> anyway, I'm thinking that we might want output like: https://gist.github.com/huonw/8f0759a62a09168f3ca1
[06:46:06] <sinistersnare> 2320
[06:46:11] *** Quits: brandonson (SingingBoy@610D90A5.EE9B234.1ECA502.IP) (Ping timeout)
[06:46:16] <doctor> :(
[06:46:17] <huon> (the 'desired.txt' file)
[06:46:25] <huon> doctor: platform?
[06:46:34] *** Joins: tyoverby (Mibbit@1390DFB8.FBC7597F.11F8506F.IP)
[06:46:34] <doctor> huon: FreeBSD
[06:46:38] <doctor>  /home/eitan/svn/fbsd/more/ports/lang/rust/work/rust-0.9/x86_64-unknown-freebsd/stage1/bin/../lib/librustc-8b28e8d8-0.9.so: Undefined symbol "sinh"
[06:46:46] <huon> doctor: ah
[06:46:55] <doctor> 0.8 built no problem
[06:46:56] <sinistersnare> huon, should it output both?
[06:47:13] <huon> sinistersnare: it needs the 'error' line definitely
[06:47:15] <sinistersnare> also, i see a @ in mod.rs, isnt that frowned upon?
[06:47:22] <doctor> huon: how can I fix that?
[06:47:26] <huon> and if we just put the new message at the end of that line... it'll be *really* long
[06:47:28] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[06:47:30] <huon> doctor: no idea
[06:47:43] <doctor> I imagine there is a missing -lm line somewhere
[06:47:43] <sinistersnare> but ill ask about that later, ok, so yeah, the 2 of them are fine then?
[06:47:43] <huon> sinistersnare: hence, we can break it up, by using a 'note'
[06:47:50] <sinistersnare> ok, that makes sense
[06:47:50] <tyoverby> I'm trying to build rust from source, but I can't hardlink on my system.  Any way to fix this dependency?
[06:48:04] <doctor> huon: I know sinh exists in libm
[06:48:05] <huon> sinistersnare: yes, @ is frowned upon, but migrating the compiler away from it is a lot of effort
[06:48:12] <huon> doctor: yeah, that sounds reasonable
[06:48:34] <huon> sinistersnare: so anyway, the thing to do now is to work out how the error message is emitted in that format
[06:49:08] <doctor> mk/platform.mk:CFG_GCCISH_LINK_FLAGS_arm-linux-androideabi := -shared -fPIC -ldl -g -lm -lsupc++
[06:49:08] <doctor> mk/platform.mk.orig:CFG_GCCISH_LINK_FLAGS_arm-linux-androideabi := -shared -fPIC -ldl -g -lm -lsupc++
[06:49:12] <doctor> huon: ah, that is the bug
[06:49:23] <doctor> huon: rust, rather sillily, presumes that only linux needs -lm
[06:49:39] <sinistersnare> yes, can i have a 'fcx.type_note_message(...)' too?
[06:49:45] <sinistersnare> or something along those lines
[06:49:52] <huon> sinistersnare: I don't know if such an method exists
[06:49:53] <huon> but!
[06:49:55] <huon> http://static.rust-lang.org/doc/master/rustc/driver/session/struct.Session_.html#method.span_note does
[06:50:04] <huon> that's the underlying thing that type_error_message is calling
[06:50:11] <doctor> huon: what mailing list should I send these details to?
[06:50:11] <huon> (well, the span_error one)
[06:50:17] <huon> doctor: rust-dev
[06:50:30] <huon> doctor: https://mail.mozilla.org/listinfo/rust-dev
[06:50:31] <doctor> huon: whats the full mail? and does it accept un-subed mail?
[06:50:51] <huon> doctor: don't know about unsubed messages
[06:51:03] <huon> sinistersnare: so basically, "span" refers to the ^~~~~~ bit
[06:51:10] <doctor> huon: thanks!
[06:51:18] <huon> sinistersnare: i.e. a span is how the compiler associates an error message with a peiece of source code
[06:51:22] <huon> *piece
[06:51:34] <huon> anyway, to actually call that method, we need to find a Session object
[06:51:41] <huon> *find the Session object
[06:52:22] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[06:52:38] <sinistersnare> is that how the other error message works?
[06:52:47] <huon> sinistersnare: if you look at the first line of the check_field function (the one we're inside), you can see it's creating the `tcx` object
[06:53:19] <sinistersnare> yes, its taking the function context?
[06:53:27] <sinistersnare> and then taking a context of that?
[06:54:00] <huon> don't know what ccx is
[06:54:00] *** Quits: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net) (Quit: I'm sure it's perfectly safe)
[06:54:20] <huon> but yeah, it's extracting the "type context" for the current crate
[06:54:28] <huon> which includes a reference to the Session
[06:54:33] <huon> I think it's the sess field
[06:54:52] <sinistersnare> ccx seems to be the crate context
[06:54:58] <sinistersnare> http://static.rust-lang.org/doc/master/rustc/middle/typeck/check/struct.FnCtxt.html if im reading correctly 
[06:55:12] <huon> yeah, so to emit a note, you can write `tcx.sess.span_note(expr.span, "....")`
[06:55:14] <sinistersnare> so it takes the type from the crate from the function. sounds good?
[06:55:14] <doctor> huon: hahah
[06:55:18] <huon> ok, awesome
[06:55:23] <doctor> I just found a PR with an update to 0.9!
[06:55:32] <huon> sinistersnare: well, "type"
[06:55:41] <huon> it's not really the "type"
[06:55:50] <huon> it's kind of the global coordination context
[06:55:51] *** Joins: whitglint (uid15486@moz-31ABA2C0.irccloud.com)
[06:56:04] <huon> with lots of different bits and pieces of useful information
[06:56:20] <huon> (like the current Session, which includes the error diagnostics)
[06:56:23] *** Quits: whitglint (uid15486@moz-31ABA2C0.irccloud.com) (Quit: )
[06:56:30] <sinistersnare> cool, theres so many files to just dig through!
[06:56:40] *** Quits: erickt (etryzelaar@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[06:57:18] <huon> so anyway, if you but that `.span_note` invocation just after the .type_error_message, and adjust the messages, you should be able to build a compiler with the more descriptive errors
[06:57:22] <huon> s/but/put/
[06:58:41] *** Quits: oxum (anonymous@A91C38A3.81D533B5.520CDC98.IP) (Ping timeout)
[06:59:15] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[06:59:43] *** Joins: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net)
[06:59:57] <sinistersnare> huon, how does this look? https://gist.github.com/sinistersnare/2ad2ee2737c513e52959
[07:00:06] <sinistersnare> oh ill do the line break now
[07:00:55] <sinistersnare> i updated it with a line break
[07:00:58] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[07:01:08] <huon> the bit here https://gist.github.com/sinistersnare/2ad2ee2737c513e52959#file-addition-rs-L15 can go too
[07:01:17] <huon> but that looks pretty good
[07:01:29] <sinistersnare> oh yes, of course
[07:01:56] *** Joins: brson (brson@212685B3.5B8F260F.586E6F35.IP)
[07:01:56] *** ChanServ sets mode: +ao brson brson
[07:02:00] <sinistersnare> i also forgot a semicolon :)
[07:02:22] <sinistersnare> and how is that paren placing? should i have it after the string ends?
[07:02:27] <huon> I'd actually guess the semi is optional in this place
[07:02:34] <huon> https://gist.github.com/huonw/9418134f423ec64ce9e2 is how i'd format it
[07:02:53] <huon> (maybe with the `I` lining up with the `m`?)
[07:03:42] <sinistersnare> why is the smi optional? im not making an anonymous function with this, or is there another rule to the optional?
[07:04:06] <huon> the last expression of any block optionally has a semicolon
[07:04:06] *** Quits: ahunt (ahunt@moz-6D6D79D6.cable.virginm.net) (Ping timeout)
[07:04:18] <huon> if it does, the block has type ()
[07:04:18] *** Quits: tautologico (uid22285@moz-A42E5B7B.irccloud.com) (Quit: Connection closed for inactivity)
[07:04:37] <huon> if it doesn't, the block has a value (the value of the last expression)
[07:04:39] <sinistersnare> oh because im still in the Some(_) => { ... block?
[07:04:41] *** Quits: brson (brson@212685B3.5B8F260F.586E6F35.IP) (Ping timeout)
[07:04:53] <huon> e.g. let a = { 1; 2 }; // a == 2
[07:05:02] <huon> let a = { 1; 2; }; // a == ()
[07:05:06] <huon> sinistersnare: yeah
[07:05:26] <sinistersnare> great, so its not just functions, its block in general. learning!
[07:05:37] <huon> yeah, exactly
[07:06:23] <sinistersnare> ok, so i have the code done then.
[07:06:31] <doctor> huon: port updated; packages to be built on wednesday!
[07:06:32] <huon> awesome
[07:06:32] *** Joins: brson (brson@6A848D32.C1B840DD.76F66111.IP)
[07:06:32] *** ChanServ sets mode: +ao brson brson
[07:06:35] <sinistersnare> should i push it up to my repo then, and make a PR to rust?
[07:06:45] <sinistersnare> this is scary!
[07:06:45] <huon> build the compiler to check it's working as you expect
[07:06:57] <doctor> sinistersnare: make sure to add a test case for your change
[07:07:00] <huon> doctor: cool
[07:07:05] <huon> (I don't think this one can be tested)
[07:07:09] <sinistersnare> is there any way i can use my clone of mozilla/rust instead of recompiling llvm in this new fork?
[07:07:24] <sinistersnare> doctor, its just a little error message, doesnt need a test
[07:07:27] <doctor> huon: add an example file which would trigger the warning, and some expected output?
[07:07:34] *** Quits: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP) (Quit: colinsurprenant)
[07:07:36] <doctor> sinistersnare: bah! it should still have some
[07:07:40] <huon> sinistersnare: oh... you should be able to just set your clone of mozilla/rust to include your original fork
[07:07:41] *** Joins: oxum (anonymous@F48AC11F.9EDE08CF.C28326FD.IP)
[07:07:48] <huon> doctor: the test runner doesn't support detecting 'note' outputs
[07:07:59] <doctor> [ I like llvm's policy: no test, no commit ]
[07:08:01] <sinistersnare> git has always confused me :)
[07:08:02] <huon> so yes, if it was anything other than a note, definitely a test
[07:08:04] <doctor> huon: thats unfortunate 
[07:08:17] <huon> doctor: (that's essentially Rust's policy too)
[07:08:34] <sinistersnare> and that makes sense then
[07:08:46] <doctor> sinistersnare: git is confusing; we can help you
[07:08:47] <huon> sinistersnare: go to your clone of mozilla/rust
[07:09:20] <huon> I'd guess that `git remote -v` lists just `origin ...mozilla/rust...` twice?
[07:09:39] <sinistersnare> i actually have 2 clones on my filesystem :p
[07:09:53] <huon> well, go to your preferred clone :P
[07:10:02] <sinistersnare> is my preffered the already compiled one? sure!
[07:10:12] <huon> yup
[07:10:35] <sinistersnare> ok the file change is in my tree
[07:10:40] <sinistersnare> wait...
[07:10:41] <sinistersnare> ok
[07:10:46] <huon> then the plan is to make the mozilla/rust repo an "upstream" repo, and your github fork the origin
[07:11:14] <huon> assuming the `git remote -v` call gives the output I said above... ?
[07:12:57] *** Quits: tyoverby (Mibbit@1390DFB8.FBC7597F.11F8506F.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[07:13:15] *** Joins: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP)
[07:13:50] <sinistersnare> there is 2 of mozilla/rust (the origin is what that is) for fetch and push
[07:13:57] <sinistersnare> if that just made any sense
[07:14:01] <huon> ok, awesome
[07:14:02] <sinistersnare> origin	https://github.com/mozilla/rust.git (fetch)
[07:14:02] <sinistersnare> origin	https://github.com/mozilla/rust.git (push)
[07:14:05] <huon> then `git remote rename origin upstream` will rename the mozilla/rust repo to 'upstream' (could also call it 'mozilla', or, like, 'fred')
[07:14:32] <huon> (after you do that, the only change of the `git remote -v` output will be them being called 'upstream', rather than 'origin')
[07:14:34] <sinistersnare> ok 
[07:14:56] <sinistersnare> \o/ woohoo renaming worked!
[07:15:15] <huon> `git remote add origin git@github.com:sinistersnare/rust.git` will then add your fork as the new origin
[07:15:16] <huon> \o/
[07:15:43] <sinistersnare> is origin the default when doing 'git push' and the like?
[07:15:57] <huon> once you've done that, you should be able to create the branch again and copy the changes in (we'll just completely ignore the other checkouts)
[07:16:03] <sinistersnare> and now i have 4 lines! as expected
[07:16:11] <huon> sinistersnare: kinda... I don't really understand git that well
[07:16:22] <sinistersnare> yep, im in the branch and the fix is in it
[07:16:26] <huon> like, remotes always confuse me :(
[07:16:31] <huon> ok, so build it
[07:16:43] <sinistersnare> ok, so do a make && make install?
[07:16:46] <sinistersnare> or just make?
[07:16:49] <huon> just a make
[07:16:58] <huon> you could even just do a `make rustc-stage1`
[07:17:02] <huon> to save time
[07:17:12] <sinistersnare> ! I can't write on file `tutorial.log'. ???
[07:17:24] <huon> hm...
[07:17:31] <sinistersnare> i think its working now.....
[07:17:32] <huon> did you do a `sudo make` previously?
[07:17:38] <sinistersnare> i probably did
[07:18:00] <huon> `sudo make clean` should fix that (and don't use sudo for `make` again :P )
[07:18:08] <sinistersnare> ok!
[07:18:10] <huon> (only `make install` needs sudo)
[07:18:27] <sinistersnare> i think i did sudo make && sudo make install :p
[07:18:39] <huon> so, once that's going... you get to sit around for a little while as it builds
[07:18:46] <sinistersnare> permission denied still....
[07:18:58] <huon> did you do the sudo make clean?
[07:19:08] <sinistersnare> https://gist.github.com/sinistersnare/7464da499b331d07b1f1
[07:19:08] *** Quits: depp (depp@500BAFC1.53465674.3C05E6CB.IP) (Quit: Lost terminal)
[07:19:10] <sinistersnare> yes i did
[07:19:38] <huon> hm, `rm -rf x86_64-unknown-linux-gnu/rt`
[07:20:19] <huon> (and once it finishes building, then you'll have a compiler in `x86_64-unknown-linux-gnu/stage1/bin/rustc` which you can then run on an example file)
[07:20:57] <huon> and once it all works, you can add the relevant file, commit it, push it to your fork and open a pull request
[07:21:18] <sinistersnare> ok, still getting errors...but i should figure this out... idk 
[07:21:20] <sinistersnare> even after the rm
[07:21:39] <huon> bah
[07:21:41] <huon> :(
[07:21:54] <huon> `rm -rf x86_64-unknown-linux-gnu`
[07:22:00] <sinistersnare> yep
[07:22:20] <sinistersnare> hmm
[07:22:23] <sinistersnare> ok i think its working
[07:22:24] <sinistersnare> good
[07:22:29] <huon> \o/
[07:22:32] <sinistersnare> but now its compiling llvm
[07:22:46] <sinistersnare> :p ill send it tomorrow evening, its 3:30AM here :)
[07:23:02] <huon> cool, good night
[07:23:06] <huon> (sorry for keeping you up :P )
[07:23:32] *** Joins: luziiie (luziie@moz-CD18B14B.customer.cdi.no)
[07:23:38] <sinistersnare> its perfectly fine! learned a lot. i wanna learn librustc, becauase i want to be part of the effort to making a cool IDE
[07:23:46] <sinistersnare> if there is an effort for that :)
[07:24:03] <sinistersnare> i saw this and i got excited https://github.com/phildawes/racer
[07:24:19] *** Quits: luz1 (luziie@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[07:25:42] *** Joins: Curly-Brace (Mibbit@moz-21083258.hsd1.va.comcast.net)
[07:29:24] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[07:29:27] *** Quits: bmu (chatzilla@moz-A87574A6.hsd1.pa.comcast.net) (Ping timeout)
[07:29:31] *** Joins: jmgrosen (user@moz-848F6087.sb.sd.cox.net)
[07:31:38] *** Quits: jmgrosen (user@moz-848F6087.sb.sd.cox.net) (Ping timeout)
[07:31:45] *** Joins: summerlight_ (summerligh@327FC32B.2C956A45.501EFF44.IP)
[07:31:53] *** Quits: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP) (Quit: colinsurprenant)
[07:32:16] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[07:36:14] *** Joins: luz1 (luziie@moz-CD18B14B.customer.cdi.no)
[07:36:44] *** Quits: luziiie (luziie@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[07:37:30] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[07:38:43] *** Quits: WalrusPony (retep998@moz-DBA66FA0.bstnma.east.verizon.net) (Ping timeout)
[07:38:43] *** Joins: WalrusPony (retep998@moz-DBA66FA0.bstnma.east.verizon.net)
[07:39:18] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[07:39:39] *** Quits: noam (noam@F6B530A7.720527A7.416762B.IP) (Ping timeout)
[07:40:00] *** Joins: noam (noam@F6B530A7.720527A7.416762B.IP)
[07:41:02] *** Quits: dranov (dranov@61A04536.8894C792.FCAAE698.IP) (Ping timeout)
[07:44:18] *** Joins: daschl (Adium@moz-DC6DE6E2.vie.surfer.at)
[07:44:56] *** Joins: jmgrosen (user@moz-848F6087.sb.sd.cox.net)
[07:46:53] *** Quits: jmgrosen (user@moz-848F6087.sb.sd.cox.net) (Ping timeout)
[07:47:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[07:48:39] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[07:48:44] *** Joins: glaebhoerl (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[07:49:30] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[07:49:32] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[07:49:42] *** Joins: valentin (Thunderbir@42F84972.4DC28F20.FAF22AF7.IP)
[07:49:49] *** Joins: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP)
[07:50:58] *** Joins: glaebhoerl_ (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[07:50:58] *** Quits: glaebhoerl (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Connection reset by peer)
[07:52:50] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[07:59:36] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[08:00:28] *** Quits: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP) (Quit: colinsurprenant)
[08:00:43] *** Quits: noam (noam@F6B530A7.720527A7.416762B.IP) (Ping timeout)
[08:00:57] *** Joins: noam (noam@F6B530A7.720527A7.416762B.IP)
[08:01:17] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[08:01:22] *** Quits: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP) (Connection reset by peer)
[08:06:06] *** Joins: luziiie (luziie@moz-CD18B14B.customer.cdi.no)
[08:06:37] *** Joins: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net)
[08:06:43] *** Quits: luz1 (luziie@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[08:08:54] *** Quits: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net) (Quit: Sharp)
[08:10:10] *** Joins: enos (jkingyens@moz-B0C1B161.hsd1.ca.comcast.net)
[08:11:46] *** Joins: whitglint (uid15486@moz-31ABA2C0.irccloud.com)
[08:15:48] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[08:16:21] *** Parts: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) ()
[08:18:53] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[08:19:15] *** Joins: philix (felipe@moz-D4FC8261.user.veloxzone.com.br)
[08:21:19] *** Quits: philix (felipe@moz-D4FC8261.user.veloxzone.com.br) (Ping timeout)
[08:23:07] *** Quits: whitglint (uid15486@moz-31ABA2C0.irccloud.com) (Quit: )
[08:23:59] *** Quits: daschl (Adium@moz-DC6DE6E2.vie.surfer.at) (Quit: Leaving.)
[08:24:01] *** Quits: p1start (rewi@moz-A082F561.adsl.xtra.co.nz) (Ping timeout)
[08:27:44] *** Quits: valentin (Thunderbir@42F84972.4DC28F20.FAF22AF7.IP) (Ping timeout)
[08:29:23] *** Quits: summerlight_ (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[08:32:09] *** Joins: skade (skade@moz-A04BC22E.adsl.inetia.pl)
[08:34:29] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[08:36:36] *** Joins: nkoep (nik@moz-7F7BA1A9.pool.mediaways.net)
[08:37:25] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[08:38:14] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[08:38:20] *** Joins: alkino (alkino@moz-58B8E4B4.w92-151.abo.wanadoo.fr)
[08:39:08] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[08:39:30] *** Quits: Curly-Brace (Mibbit@moz-21083258.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[08:40:04] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[08:40:31] *** Joins: bjz_ (bjz@B398BE78.F804C29E.D35A31DF.IP)
[08:41:34] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[08:42:05] *** Quits: bjz_ (bjz@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[08:42:24] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[08:43:25] *** Quits: skade (skade@moz-A04BC22E.adsl.inetia.pl) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[08:44:07] *** Quits: vadimcn (chatzilla@moz-E841EA3A.hsd1.wa.comcast.net) (Ping timeout)
[08:45:31] *** Joins: q66 (q66@moz-E680C693.range109-154.btcentralplus.com)
[08:45:53] *** Joins: jmgrosen (user@moz-848F6087.sb.sd.cox.net)
[08:46:22] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[08:47:22] *** Quits: WalrusPony (retep998@moz-DBA66FA0.bstnma.east.verizon.net) (Ping timeout)
[08:47:35] *** Joins: WalrusPony (retep998@moz-DBA66FA0.bstnma.east.verizon.net)
[08:47:35] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[08:47:53] *** Quits: jmgrosen (user@moz-848F6087.sb.sd.cox.net) (Ping timeout)
[08:48:10] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[08:49:31] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[08:51:13] *** Quits: derek_c (derek@moz-16A6DFBC.cit.cornell.edu) (Quit: Leaving)
[08:51:17] *** Joins: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP)
[08:51:17] *** Quits: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP) (Quit: colinsurprenant)
[08:51:29] *** Joins: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP)
[08:51:34] *** Joins: eddyb (eddy@F8B50789.F33C1089.FB866788.IP)
[08:51:35] *** Quits: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP) (Quit: colinsurprenant)
[08:51:48] *** Joins: tyoverby (Mibbit@1390DFB8.FBC7597F.11F8506F.IP)
[08:52:03] *** Joins: mgottschlag (quassel@moz-C63864F9.cust.bluewin.ch)
[08:52:04] <tyoverby> Are there any official (or unofficial) builds of rust available?
[08:52:36] *** Joins: mihneadb (mihneadb@moz-6B31F5AA.static.ziggozakelijk.nl)
[08:52:53] *** Quits: glaebhoerl_ (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Quit: )
[08:54:22] *** Joins: daschl (Adium@moz-DC6DE6E2.vie.surfer.at)
[08:54:49] <mcpherrin> tyoverby: yeah, what OS do you want?
[08:55:08] <tyoverby> mcpherrin: Ubuntu64 please
[08:56:01] <mcpherrin> https://launchpad.net/~hansjorg/+archive/rust
[08:56:03] *** Quits: daschl (Adium@moz-DC6DE6E2.vie.surfer.at) (Ping timeout)
[08:57:23] <tyoverby> Awesome, thanks mcpherrin!
[09:00:00] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[09:00:54] *** Quits: tyoverby (Mibbit@1390DFB8.FBC7597F.11F8506F.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[09:01:36] *** Joins: gimpf (gimpf@moz-114FE07D.adsl.highway.telekom.at)
[09:01:43] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[09:03:11] *** Joins: twi (Adium@752B0356.FC95818.5EFB9497.IP)
[09:04:33] *** Joins: vadimcn (chatzilla@moz-E841EA3A.hsd1.wa.comcast.net)
[09:05:06] *** Joins: Matthias247 (Miranda@moz-678B5E4A.hsi2.kabel-badenwuerttemberg.de)
[09:05:34] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[09:06:42] *** Joins: angdev (angdev@3878EAEB.EA904847.413CBA8C.IP)
[09:07:22] *** Quits: eddyb (eddy@F8B50789.F33C1089.FB866788.IP) (Ping timeout)
[09:12:28] *** Quits: noam (noam@F6B530A7.720527A7.416762B.IP) (Ping timeout)
[09:12:36] *** Quits: angdev (angdev@3878EAEB.EA904847.413CBA8C.IP) (Ping timeout)
[09:12:51] *** Joins: noam (noam@F6B530A7.720527A7.416762B.IP)
[09:14:04] *** Joins: daschl (Adium@moz-DC6DE6E2.vie.surfer.at)
[09:15:01] *** Joins: tomh- (uid501@moz-E77DEB21.irccloud.com)
[09:16:30] *** Quits: enos (jkingyens@moz-B0C1B161.hsd1.ca.comcast.net) (Quit: enos)
[09:18:12] *** Joins: skade (skade@moz-127E304B.ii.uni.wroc.pl)
[09:18:53] *** Quits: daschl (Adium@moz-DC6DE6E2.vie.surfer.at) (Quit: Leaving.)
[09:19:20] *** Quits: pdewacht (repent@moz-A79C5CB3.be) (Ping timeout)
[09:19:20] *** Quits: skade (skade@moz-127E304B.ii.uni.wroc.pl) (Connection reset by peer)
[09:19:38] *** Joins: skade (skade@moz-127E304B.ii.uni.wroc.pl)
[09:20:45] *** Joins: glaebhoerl_ (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[09:20:46] *** Joins: io2 (io2@moz-EE406A5.home.otenet.gr)
[09:21:02] *** Joins: marianoguerra (marianogue@moz-184D29F5.dip0.t-ipconnect.de)
[09:21:50] *** Joins: alonlevy (alon@moz-944C9098.red.bezeqint.net)
[09:21:58] *** Quits: oxum (anonymous@F48AC11F.9EDE08CF.C28326FD.IP) (Ping timeout)
[09:22:45] *** Joins: eddyb (eddy@F8B50789.F33C1089.FB866788.IP)
[09:25:45] *** Joins: oxum (anonymous@2E07CA23.E5007E99.520CDC98.IP)
[09:27:32] *** Joins: Ms2ger (Ms2ger@moz-5180E188.adsl-dyn.isp.belgacom.be)
[09:30:20] *** Joins: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net)
[09:32:02] *** Quits: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net) (Quit: Sharp)
[09:32:16] *** Joins: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net)
[09:32:43] *** Joins: luz1 (luziie@moz-CD18B14B.customer.cdi.no)
[09:33:24] *** Quits: luziiie (luziie@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[09:33:35] *** Joins: bvssvni (Mibbit@moz-E289BB64.bb.online.no)
[09:34:22] *** Joins: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl)
[09:35:09] *** Quits: Anupkumar (uid16774@moz-A42E5B7B.irccloud.com) (Quit: Connection closed for inactivity)
[09:35:20] *** Quits: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net) (Quit: Sharp)
[09:35:35] *** Joins: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net)
[09:37:56] *** Quits: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net) (Quit: Sharp)
[09:38:10] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[09:38:11] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[09:38:13] *** Joins: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net)
[09:38:23] *** Quits: brson (brson@6A848D32.C1B840DD.76F66111.IP) (Ping timeout)
[09:38:59] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[09:39:14] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[09:39:53] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[09:39:54] *** Quits: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net) (Quit: Sharp)
[09:40:08] *** Joins: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net)
[09:40:36] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[09:40:44] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[09:40:52] *** Joins: adridu59 (Mibbit@moz-9BAC9171.rev.numericable.fr)
[09:40:54] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[09:41:06] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[09:41:11] <adridu59> huon: something is wrong with rustdoc output path on standalone md files
[09:42:54] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Ping timeout)
[09:45:51] *** Joins: mye (mye@moz-53EB4894.dip0.t-ipconnect.de)
[09:46:38] *** Joins: jmgrosen (user@moz-848F6087.sb.sd.cox.net)
[09:47:20] <adridu59> huon: nevermind, it just expects a doc/ folder by default
[09:48:36] <bvssvni> adridu59: I thought rustdoc created doc/ if it doesn't exists
[09:48:38] *** Quits: jmgrosen (user@moz-848F6087.sb.sd.cox.net) (Ping timeout)
[09:49:29] *** Joins: kp (kp@4F7252F2.CEBBE496.E48CFF63.IP)
[09:49:31] *** Joins: luziie (luziie@moz-CD18B14B.customer.cdi.no)
[09:50:15] *** Joins: nical (nico@87C1F78E.1DE10CA8.D8E68FF6.IP)
[09:50:16] *** Quits: luz1 (luziie@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[09:50:26] <adridu59> bvssvni: it does not in my case; but there is a bug (cc huon) that if I specify `-o test.html`, it will want to output to `test.html/test.html`
[09:50:51] *** Joins: autra (augustin@moz-BE76895F.fbx.proxad.net)
[09:51:08] <adridu59> also (huon) title shouldn't be mandatory, it should use e.g. the file name as a title if it wasn't specified
[09:51:17] <adridu59> works great besides
[09:53:32] *** Quits: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net) (Quit: Sharp)
[09:53:46] *** Joins: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net)
[09:55:45] *** Quits: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net) (Quit: Sharp)
[09:55:59] *** Joins: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net)
[09:56:14] *** Quits: eddyb (eddy@F8B50789.F33C1089.FB866788.IP) (Ping timeout)
[09:57:23] *** Quits: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net) (Quit: Sharp)
[09:57:37] *** Joins: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net)
[09:59:15] *** Quits: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net) (Quit: Sharp)
[09:59:30] *** Joins: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net)
[09:59:52] *** Joins: bourbaki (chatzilla@moz-B57DFEE.dip0.t-ipconnect.de)
[09:59:56] <bourbaki> Moinsen
[10:01:10] *** Quits: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net) (Quit: Sharp)
[10:01:24] *** Joins: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net)
[10:02:29] *** Joins: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch)
[10:02:52] *** Quits: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net) (Quit: Sharp)
[10:02:54] *** Joins: keret (Mibbit@7E217F04.2C8DBE39.CC1A2609.IP)
[10:03:06] *** Joins: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net)
[10:03:27] *** Quits: adridu59 (Mibbit@moz-9BAC9171.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[10:04:48] *** Joins: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP)
[10:04:54] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[10:05:19] *** Quits: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net) (Quit: Sharp)
[10:05:27] <kimundi> bourbaki: Tach
[10:05:33] *** Joins: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net)
[10:05:35] <bourbaki> :)
[10:06:34] *** Joins: mib_98r7iw (Mibbit@moz-82FE53D4.adsl.yaroslavl.ru)
[10:06:37] <bourbaki> It seems my endeavor to install vbox with ubuntu might be doomed.
[10:06:59] <bourbaki> My mobo does not seem to support vtx :( so i can just run it with 512 mb.
[10:07:17] *** Quits: mib_98r7iw (Mibbit@moz-82FE53D4.adsl.yaroslavl.ru) (Quit: http://www.mibbit.com ajax IRC Client)
[10:07:18] *** Quits: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net) (Quit: Sharp)
[10:07:32] *** Joins: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net)
[10:07:48] *** Quits: keret (Mibbit@7E217F04.2C8DBE39.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[10:09:05] *** Quits: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net) (Quit: Sharp)
[10:09:19] *** Joins: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net)
[10:10:04] *** Joins: doener (doener@moz-C68F600D.unity-media.net)
[10:10:33] *** Quits: noam (noam@F6B530A7.720527A7.416762B.IP) (Ping timeout)
[10:11:33] *** Quits: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net) (Quit: Sharp)
[10:11:47] *** Joins: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net)
[10:13:19] *** Joins: noam (noam@F6B530A7.720527A7.416762B.IP)
[10:13:19] *** Quits: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net) (Quit: Sharp)
[10:13:33] *** Joins: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net)
[10:14:34] *** Joins: kris (kris@moz-147EE6DF.diku.dk)
[10:15:52] *** Quits: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net) (Quit: Sharp)
[10:16:07] *** Joins: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net)
[10:17:35] *** Quits: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net) (Quit: Sharp)
[10:17:49] *** Joins: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net)
[10:18:05] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Ping timeout)
[10:18:21] *** Quits: cremes (cremes@moz-72B945E0.hsd1.il.comcast.net) (Ping timeout)
[10:18:33] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[10:18:42] *** Joins: cremes (cremes@moz-72B945E0.hsd1.il.comcast.net)
[10:19:23] *** Quits: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net) (Quit: Sharp)
[10:19:37] *** Joins: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net)
[10:20:06] *** Joins: philix (felipe@moz-AC67791E.user.veloxzone.com.br)
[10:21:22] *** Quits: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net) (Quit: Sharp)
[10:21:29] *** Quits: fyolnish (fyolnish@moz-49396AB9.dynamic.ppp.asahi-net.or.jp) (Client exited)
[10:21:35] *** Joins: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net)
[10:22:12] *** Quits: philix (felipe@moz-AC67791E.user.veloxzone.com.br) (Ping timeout)
[10:22:32] *** Quits: bourbaki (chatzilla@moz-B57DFEE.dip0.t-ipconnect.de) (Quit: ChatZilla 0.9.90.1 [Firefox 27.0.1/20140212131424])
[10:23:33] *** Quits: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net) (Quit: Sharp)
[10:23:47] *** Joins: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net)
[10:24:11] *** Quits: pczarn (pczarn@moz-69A55FA.izacom.pl) (Ping timeout)
[10:26:09] *** Quits: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net) (Quit: Sharp)
[10:26:18] *** Joins: pczarn (pczarn@moz-69A55FA.izacom.pl)
[10:28:16] *** Joins: bourbaki (chatzilla@moz-B57DFEE.dip0.t-ipconnect.de)
[10:28:55] *** Quits: luziie (luziie@moz-CD18B14B.customer.cdi.no) (Connection reset by peer)
[10:29:07] *** Joins: luziie (luziie@moz-CD18B14B.customer.cdi.no)
[10:30:33] <FreeFull> Anyone here used the set_colours method from rust-sdl?
[10:30:38] <FreeFull> set_colors*
[10:32:48] *** Joins: alkino_ (alkino@moz-61F150EC.w92-151.abo.wanadoo.fr)
[10:33:00] *** Quits: alkino (alkino@moz-58B8E4B4.w92-151.abo.wanadoo.fr) (Ping timeout)
[10:34:49] *** Joins: arturo (Thunderbir@moz-E83B14F0.superkabel.de)
[10:35:07] <FreeFull> I guess I should just wait until brson is on
[10:36:12] *** Joins: angdev (angdev@DBD059C0.31B4D11A.8470FC36.IP)
[10:37:42] *** Quits: skade (skade@moz-127E304B.ii.uni.wroc.pl) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[10:38:56] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[10:39:21] *** Joins: bharath (user@16FDBCE7.D8586012.BB410EC.IP)
[10:39:43] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[10:40:43] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[10:41:03] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[10:41:24] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[10:41:40] *** Joins: aochagavia (Mibbit@moz-C82E8769.static.ziggozakelijk.nl)
[10:42:19] <aochagavia> I am reading the code in libstd/option.rs and have a couple of questions
[10:42:31] <aochagavia> I see this: pub fn is_some(&self) -> bool
[10:42:40] <aochagavia> ans this:  pub fn unwrap(self) -> T
[10:42:46] <aochagavia> *and'
[10:43:02] <aochagavia> why is &self used in the first, and self in the second?
[10:43:32] *** Joins: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net)
[10:43:37] <FreeFull> I suppose &self is used in the first to avoid taking ownership
[10:43:45] <doener> aochagavia: because the value must to moved when you unwrap
[10:43:54] <doener> aochagavia: consider an Option<~int>
[10:43:55] <kimundi> aochagavia: The answer to that depends on wheter you are already a bit familiar with Rusts ownerships semantic 
[10:44:21] <doener> aochagavia: when you unwrap that, you get access to the contained ~int, so the original value must become inaccessible
[10:44:30] <aochagavia> ok, I understand. Thanks!
[10:44:59] <aochagavia> So that doesn't mean that the Option is copied, just moved?
[10:45:07] <kimundi> Option can be a seen as a one element container, that owns its content. something like unwrap transfers the content out of it, so it takes self in order to consume the Option itself if neccessary. map() takes self as well, in order to consume one Option<T> and retun another Option<U>
[10:45:32] <kimundi> aochagavia: Well... 
[10:45:46] <aochagavia> I mean, if I have a large struct wrapped in an Option
[10:45:51] <kimundi> aochagavia: A move is a shallow copy that invalidates the original
[10:46:09] *** Joins: oberstet (quassel@moz-C30886B8.dynamic.mnet-online.de)
[10:46:16] <doener> aochagavia: codegen-wise, it's currently copied (and the original is zeroed), but llvm might optimize that and Niko is working on removing those copies and the zeroing
[10:46:34] <kimundi> aochagavia: SOmething that doesn't move still does shallow copies, but doesn#'T invalidate the original
[10:46:36] <doener> *llvm might optimize that away
[10:46:49] <aochagavia> ok
[10:47:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[10:47:08] <aochagavia> so there is no performance penalty for avoiding using a pointer?
[10:47:10] *** Joins: jensnock_ (jensnocker@moz-33279404.customers.ownit.se)
[10:47:23] *** Joins: jmgrosen (user@moz-848F6087.sb.sd.cox.net)
[10:47:23] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[10:47:44] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[10:47:47] <kimundi> aochagavia: In general you fare better in Rust with not thinking about how big things become if stored by value, unless you have profiled it to be a problem
[10:47:55] <kimundi> aochagavia: not inherently, no
[10:48:00] <kimundi> aochagavia: more other way round
[10:48:20] <bvssvni> that is pretty cool
[10:48:25] <aochagavia> so I should only think in terms of ownership?
[10:48:32] <kimundi> yeah
[10:48:39] <aochagavia> and forget about pointers as a mean to better performance?
[10:48:39] <kimundi> if you want to own it, store it by value
[10:48:41] <doener> aochagavia: right. That code is not avoiding the pointer because it can, but because it must to get semantics right
[10:48:41] <FreeFull> Rust structures will be packed as tightly as possible unless you specify otherwise
[10:48:49] <kimundi> if not, store it by reference or mutable reference
[10:48:59] *** Quits: jensnock_ (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[10:49:02] <aochagavia> that is nice...
[10:49:26] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[10:49:26] *** Quits: jmgrosen (user@moz-848F6087.sb.sd.cox.net) (Ping timeout)
[10:49:35] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[10:49:47] <kimundi> aochagavia: the owned pointer ~T has almost the same semantic as a bare T, and exist only explicitly to cause heap/pointer indirection
[10:49:54] <kimundi> in case you need it
[10:50:02] <kimundi> but usually you don't
[10:51:01] <aochagavia> Does &mut self also take ownership?
[10:51:12] <utkarsh> What would be the cleanest way to convert `"abc"` to `(0xaa, 0xbb, 0xcc)`?
[10:52:02] <kimundi> aochagavia: No, references never take ownership
[10:52:09] <bvssvni> aochagavia: only temporary
[10:52:15] <kimundi> aochagavia: however, a &mut itself is a moving
[10:52:19] <kimundi> -type
[10:52:38] <aochagavia> moving type???
[10:52:44] <aochagavia> what is dat?
[10:52:55] *** Joins: skade (skade@moz-127E304B.ii.uni.wroc.pl)
[10:52:56] <kimundi> If you own a T, you can either have multible &T to it _or_ one single &mut T to it at the same time
[10:54:14] <bvssvni> aochagavia: 'moving' is referring to how the compiler thinks who has the right to write, I think
[10:54:18] <kimundi> aochagavia: Types that have a destructor or contain moving types are moving types
[10:54:44] <FreeFull> utkarsh: Why a tuple?
[10:55:02] <utkarsh> FreeFull, I have a struct Color(u8, u8, u8)
[10:55:15] <kimundi> aochagavia: Moving types invalidate the original location if you move them (assign/pass by value, shallow copy) them.
[10:55:16] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Client exited)
[10:55:18] <FreeFull> You want to convert strings to colours?
[10:55:26] <utkarsh> FreeFull, yes
[10:55:27] *** Quits: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net) (Ping timeout)
[10:55:34] <kimundi> aochagavia: For example ~T is always a moving type
[10:55:37] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[10:55:43] *** Joins: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net)
[10:56:12] <kimundi> let x = ~5; let y = x; // content of x moved into y, now the compiler will refuse access to x
[10:56:16] *** Joins: luziiie (luziie@moz-CD18B14B.customer.cdi.no)
[10:56:17] *** Quits: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net) (Quit: Sharp)
[10:56:46] <aochagavia> ok
[10:56:54] *** Quits: luziie (luziie@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[10:57:16] <aochagavia> I am trying to implement a method for Option but I get an error
[10:57:36] <aochagavia> test.rs:8:9: 8:18 error: found module name used as a type: impl __extensions__ ( id=35) test.rs:8 impl<T> Option<T> {
[10:58:11] <FreeFull> utkarsh: Do keep in mind that the strings will be UTF-8, but for any 3-byte long string,  unsafe { std::cast::transmute(string) }  will work
[10:58:54] <kimundi> aochagavia: could you post more of you code to a gist?
[10:59:05] <utkarsh> FreeFull, umm, what type will that return?
[10:59:13] <FreeFull> I would recommend something like [u8,..3] instead of strings though
[10:59:15] <bvssvni> utkarsh: if you read the components as separate &str and got a method Option<u8>, you can match (r, g, b) { (Some(r), Some(g), Some(b)) => ... }
[10:59:21] <FreeFull> utkarsh: Any type that has the same size
[10:59:49] <aochagavia> kimundi: https://gist.github.com/aochagavia/3c1bf624372ae1eeb7eb
[10:59:58] *** Quits: bourbaki (chatzilla@moz-B57DFEE.dip0.t-ipconnect.de) (Ping timeout)
[11:00:01] <aochagavia> kimundi: I am using Rust v0.9
[11:00:19] <huon> FreeFull: btw, rust-sdl isn't really brson's library
[11:00:42] <kimundi> aochagavia: Ah, well you are not allowed to just extend existing types like this
[11:00:45] <FreeFull> huon: Ah, his repo is the one that comes up on github
[11:00:49] <FreeFull> Whose is it?
[11:00:54] <kimundi> aochagavia: You need to define a trait, and implement it for Option
[11:01:04] <huon> FreeFull: I believe Yurumechan is the main maintainer atm
[11:01:06] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[11:01:22] <huon> FreeFull: (#rust-gamedev will know more about it)
[11:01:22] <aochagavia> kimundi: It is just to test if a modification of the function works, to make then a pull request
[11:01:23] <kimundi> aochagavia: The error message is bad, but 0.9 is old, so I have no idea if its better now
[11:01:25] *** Joins: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net)
[11:01:51] <huon> FreeFull: (as in, it's under brson's github account, but he's letting others work on it)
[11:01:53] <kimundi> aochagavia: ... shouldn't you be using master then?
[11:02:13] *** Quits: Matthias247 (Miranda@moz-678B5E4A.hsi2.kabel-badenwuerttemberg.de) (Connection reset by peer)
[11:02:27] <kimundi> aochagavia: I'm confused. Do you want to make a pull request against current Rusts Option type?
[11:02:52] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[11:02:53] *** Quits: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net) (Quit: Sharp)
[11:02:54] <aochagavia> kimundi: yes
[11:02:59] *** Quits: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net) (Ping timeout)
[11:03:05] <aochagavia> kimundi: I have the source of master
[11:03:15] *** Joins: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net)
[11:03:18] <FreeFull> huon: Alright, thanks
[11:03:29] <aochagavia> kimundi: if this works in test.rs then I am going to make the pull request
[11:04:52] <kimundi> aochagavia: Well, if you want to test it locally define your own Option type - you can't extend the libstd Option type like this without modifying it directly there. Why can'T you test it in Rusts source directly?
[11:05:24] <aochagavia> kimundi: if I do that, then it will take very long to compile
[11:05:34] <bvssvni> aochagavia: is this duplicate feature? http://static.rust-lang.org/doc/master/std/option/enum.Option.html#method.filtered
[11:05:55] <aochagavia> kimundi: no, it is a little refactoring
[11:06:05] <aochagavia> sorry, bvssvni
[11:06:22] <kimundi> aochagavia: even if you do "make check-stage1-std"? That does the minimun neccessary to test some library change in libstd
[11:06:36] <kimundi> only builds rustc once etc
[11:06:51] <aochagavia> kimundi: I didn't know that that was possible
[11:06:58] <huon> check-stage0-std will be even faster
[11:07:04] *** Quits: avsej (avsej@D9A610B8.4841F515.FB33447D.IP) (Ping timeout)
[11:07:06] <huon> (not guaranteed to work, though)
[11:07:08] <kimundi> right, but doesn'T always work
[11:07:17] <huon> also, stdtest is one of the slowest things to compile
[11:07:19] <kimundi> (the stage0 one)
[11:07:28] *** Joins: avsej (avsej@D9A610B8.4841F515.FB33447D.IP)
[11:07:36] <huon> possibly even worse than librustc
[11:08:50] <kimundi> aochagavia: Hm, I'm confused what you're refactoring there btw.
[11:09:09] <bvssvni> aochagavia: the source looks identical
[11:09:16] *** Joins: olivernn (olivernigh@moz-7CE0F8.access.mtnbusiness.co.za)
[11:09:20] <aochagavia> kimundi: it was just a test
[11:09:29] <bvssvni> ah
[11:09:32] <aochagavia> kimundi: I am now trying to change it without errors...
[11:09:36] <kimundi> AH, you want to add a test for it?
[11:09:47] <kimundi> okay, change how?
[11:10:03] *** Quits: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net) (Ping timeout)
[11:10:17] *** Joins: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net)
[11:10:31] <aochagavia> I want to do something like this, but it doesnt compile: https://gist.github.com/aochagavia/d3140db78279d1dd0a2f
[11:10:47] <huon> put `enum Option<T> { Some(T), None }` in your test file, and edit that
[11:10:57] <huon> it would have to be `opt @ Some(ref x)`
[11:11:04] <huon> but that probably doesn't work either
[11:11:22] <huon> due to moving `opt`, but capturing `x` by reference
[11:12:01] <bvssvni> perhaps a lifetime issue
[11:12:06] <huon> not really
[11:12:27] <huon> that code there doesn't compile because `x` is moved out of self, so `opt` would be invalid
[11:12:46] <huon> (i.e. the source is invalidated by taking `x` by value)
[11:13:32] <huon> if it were the opt & ref x variant, then one is trying to borrow from inside self (x) and also move out of it (opt), and if that were legal then the `x` pointer would be dangling
[11:13:43] <aochagavia> this one should work, but it doesn't: https://gist.github.com/aochagavia/d3140db78279d1dd0a2f
[11:14:37] <huon> it's the `x` borrow freezing self
[11:15:03] <huon> i.e. you can't move out of a value while there's an extant borrow
[11:15:07] <bvssvni> I was thinking if ref x ran out of scope at the => , it would return ownership to opt
[11:15:08] <huon> ... into it
[11:15:15] <kimundi> aochagavia: x is borrowed for the whole of "if f(x) => self,", not just for "if f(x)"
[11:15:18] <aochagavia> it should
[11:15:34] <aochagavia> I understand it, but it doesn't make sense to me
[11:15:43] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[11:15:43] <huon> then you don't understand it?
[11:15:57] <aochagavia> I mean, it should be different
[11:16:00] <huon> how?
[11:16:11] <aochagavia> Borrowed for a shorter lifetime
[11:16:11] <huon> normally one wants to use the captures in the arm's body
[11:16:24] <huon> that's far-and-away the most common case
[11:16:27] <aochagavia> Sorry, I have to go! Later I will try to fix it
[11:16:35] <aochagavia> (my function)
[11:16:37] *** Quits: aochagavia (Mibbit@moz-C82E8769.static.ziggozakelijk.nl) (Quit: http://www.mibbit.com ajax IRC Client)
[11:16:45] <huon> the current design is the best you'll do...
[11:17:25] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[11:17:32] *** Quits: fournm (Aria@moz-ABB60BA0.austin.res.rr.com) (Quit: Leaving)
[11:17:35] <kimundi> huon: To be fair, this _could_ be defined differently - but it would involve extending the scope of the borrow to either the arm content itself or not depending on what uses it, which seems like a more complicated rule
[11:17:54] <huon> kimundi: yeah
[11:17:54] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[11:17:55] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[11:18:01] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[11:18:02] <huon> I was going to say that, but then they left
[11:18:02] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[11:18:14] <bvssvni> :)
[11:19:15] <bvssvni> well using @ that way is confusing
[11:19:34] <huon> it could probably be `if self.as_ref().map_or(false, f) { self } else { None }`
[11:19:45] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[11:19:47] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[11:20:45] <bvssvni> match seems so powerful sometimes that ifs are underestimated
[11:21:25] <huon> I don't quite understand the problem with the straight match though
[11:21:56] <huon> if the concern is speed... the optimiser almost certainly optimises them to the same code (for everything but & and ~ pointers)
[11:22:00] <bvssvni> I think the motivation was to avoid wrapping the value in a new Option
[11:22:00] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[11:22:36] <huon> and if the concern is about non-opt speed... well the if statement will almost certainly be much slower than the match without optimisiations
[11:22:40] *** Joins: fyolnish (fyolnish@moz-49396AB9.dynamic.ppp.asahi-net.or.jp)
[11:23:03] <huon> (due to having the opaque function calls each with a match internally)
[11:23:19] <kimundi> maybe it was just the DRY desire of not having two None cases
[11:23:45] <huon> maybe
[11:24:23] *** Quits: fyolnish (fyolnish@moz-49396AB9.dynamic.ppp.asahi-net.or.jp) (Ping timeout)
[11:27:18] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[11:27:45] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[11:27:57] <bvssvni> the Rust subreddit is having a peak of new subscribers http://redditmetrics.com/r/rust
[11:29:27] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[11:30:03] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[11:30:15] *** Quits: bharath (user@16FDBCE7.D8586012.BB410EC.IP) (Client exited)
[11:30:26] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[11:31:31] <huon> bstrie: ^
[11:32:41] *** Quits: alexherbo2 (alexherbo2@moz-AB6EB255.ip-91-121-133.eu) (Quit: WeeChat 0.4.3)
[11:36:07] *** Joins: askalski (akuda@2BA4E5A7.CC7751E8.6712E96B.IP)
[11:36:36] *** Quits: skade (skade@moz-127E304B.ii.uni.wroc.pl) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[11:38:44] *** Quits: JanC_ (janc@moz-2AC80CF3.dsl.scarlet.be) (Ping timeout)
[11:39:41] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[11:41:20] *** Quits: luziiie (luziie@moz-CD18B14B.customer.cdi.no) (Connection reset by peer)
[11:41:24] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[11:41:32] *** Joins: luziiie (luziie@moz-CD18B14B.customer.cdi.no)
[11:45:39] *** Joins: mawuli (mawuli@moz-EF4254B1.com.gh)
[11:46:46] *** Quits: alonlevy (alon@moz-944C9098.red.bezeqint.net) (Ping timeout)
[11:46:52] *** Joins: canhtak (canhtak@moz-9F5D2CD3.wl.t.ulaval.ca)
[11:47:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[11:48:08] *** Joins: jmgrosen (user@moz-848F6087.sb.sd.cox.net)
[11:48:32] *** Quits: bvssvni (Mibbit@moz-E289BB64.bb.online.no) (Quit: http://www.mibbit.com ajax IRC Client)
[11:48:41] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[11:49:28] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[11:50:11] *** Quits: jmgrosen (user@moz-848F6087.sb.sd.cox.net) (Ping timeout)
[11:51:56] *** Joins: Blei (Philipp@moz-7AD1732E.dclient.hispeed.ch)
[11:53:20] *** Joins: JanC_ (janc@moz-503D5FC.dsl.scarlet.be)
[11:53:57] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Ping timeout)
[11:54:07] *** Quits: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net) (Ping timeout)
[11:54:26] *** Joins: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net)
[11:54:32] *** Quits: alkino_ (alkino@moz-61F150EC.w92-151.abo.wanadoo.fr) (Ping timeout)
[11:54:54] *** Joins: bollu_ (bollu@31CCE710.7065DDB9.6D6A344F.IP)
[11:55:01] <bollu_> doomlord_: ping
[11:55:58] *** Joins: mib_4h2whi (Mibbit@7E217F04.2C8DBE39.CC1A2609.IP)
[11:58:20] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[11:58:21] <doomlord_> hi
[12:00:02] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[12:01:16] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[12:01:17] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[12:01:38] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[12:02:07] *** Quits: mib_4h2whi (Mibbit@7E217F04.2C8DBE39.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[12:02:17] <TheHydroImpulse> Any way to manually copy a shorter lifetime to match another one? https://gist.github.com/TheHydroImpulse/085d797d045ce9bb9b53
[12:02:57] *** Quits: olivernn (olivernigh@moz-7CE0F8.access.mtnbusiness.co.za) (Ping timeout)
[12:03:22] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[12:03:32] <TheHydroImpulse> *copy a value with a shorter lifetime
[12:04:33] *** Quits: japaric (japaric@CA371D8.A347E168.F4D5766F.IP) (Ping timeout)
[12:05:49] *** Joins: japaric (japaric@E0CBD5D9.935005AB.84437BC5.IP)
[12:06:04] <bollu_> doomlord_: okay, so, carmack's technique has 2 advantages right? #1 -allow paralell processing of previous and next state. #2 - separate out "previous" and "next" state
[12:06:33] <huon> Does anyone know how to get ctags working with mozilla/rust? `make TAGS.emacs` emits "ctags: invalid option -- 'e'"
[12:06:37] <kimundi> TheHydroImpulse: That code is impossible
[12:06:49] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[12:07:14] <doomlord_> bollu - both its parallel processing of *the* state, and parallel update/render
[12:07:23] <kimundi> TheHydroImpulse: Returning something allocated inside a function to the outside is explcitly one of the bases cases that lifetimes prevent for safety reasons
[12:07:28] *** Joins: eddyb (eddy@F8B50789.F33C1089.FB866788.IP)
[12:07:40] <kimundi> In the sense that it is never correct
[12:07:40] <doomlord_> bollu his idea is you can use multiple cores to generate the next frame .. different cores can update different entities
[12:08:50] <TheHydroImpulse> kimundi Yeah, that's the issue. Is there an alternative (i.e., copying)? Or do just have to rethink the solution
[12:08:50] <TheHydroImpulse> ?
[12:08:58] <doener> huon: maybe that need exuberant-ctags?
[12:08:59] <kimundi> TheHydroImpulse: You can return a Something<'static>, but you can only store slices of compiletime constants in it
[12:09:11] <kimundi> TheHydroImpulse: If you build the string at runtime, you need to return a ~str
[12:09:16] <doener> huon: at least OSX comes with classic ctags AFAIK
[12:09:36] <kimundi> TheHydroImpulse: We also have a string wrapper that allows you to express "either borrowed of owned"
[12:09:37] <doomlord_> bollu the idea is that to update an individual entity, your dependancy is potentially all previous states' entities. So if the previous state is cached, each individual entity can be updated in parallel.  Of course, physics is more complex than that , because entities can potentially pile up and all interact. But generally the physics engine is another kettle of fish .. they parallelize by splitting into islands, doing individ
[12:09:37] <doomlord_> ual phases that dont interact in passes, ...
[12:09:47] <kimundi> TheHydroImpulse: Which might work here
[12:10:03] <TheHydroImpulse> kimundi ahh ok. Thanks for the pointers. Greatly appreciated. 
[12:10:05] <bollu_> doomlord_: yeah, I mean, there are a few problems with this approach
[12:10:26] <bollu_> doomlord_: first of all, if a new object is added into the provious state that info has to be "propogated" into the next state
[12:10:42] <kimundi> TheHydroImpulse: Try http://static.rust-lang.org/doc/master/std/str/enum.MaybeOwned.html
[12:10:54] <doomlord_> bollu related to components there's a school of thought that you just write it all simple, then pull out heavy components and treat on a case by case basis. Physics and Animation for example -animation - its very easy to paralleize skeleton evaluation for multiple characters.
[12:10:57] <bollu_> doomlord_: it feels like the easiest thing to do would be to memcpy the previous state onto the next and then mutate it
[12:11:07] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[12:11:11] <kimundi> TheHydroImpulse: But I'm not sure it works for this case - in either case you'd need a heap alocation
[12:11:17] <doomlord_> dont worry about copying, as the entity states are small  compared to graphics data
[12:11:23] <bollu_> doomlord_: hm, but physics is really hard to deal with that way. 
[12:11:27] <TheHydroImpulse> kimundi Gotcha. Thanks
[12:11:37] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[12:11:39] <bollu_> doomlord_: 'cause the solver will have to iterate again to fix collisions
[12:11:49] <huon> doener: I'm on debian
[12:11:51] *** Joins: alonlevy (alon@moz-61A0AD83.red.bezeqint.net)
[12:11:55] *** Joins: edwardw (Mibbit@ED48E813.BF27AFA4.B9C6B12A.IP)
[12:11:57] *** Joins: mpiechotka (mpiechotka@moz-966273FD.dynamic.mnet-online.de)
[12:12:12] <kimundi> bollu_: I've been also thinking about this. Seems like some COW data structure that updates each frame is the best approach
[12:12:16] <doomlord_> yes, you're best of having a seperate pass for physics, and think about it as its own problem. multiple passes (broad phase, narrow phase.. ..)
[12:12:58] <doomlord_> *collisiion detection* itself, rather than actual physics response, can go in parallel easily
[12:13:06] <bollu_> doomlord_: yeah, it's a bitch to deal with. I've written two different scene graphs before- one for physics and another one for the game
[12:13:34] <doomlord_> yeah rendering data might not be optimized for physics
[12:13:56] <bollu_> kimundi: what's COW?
[12:14:01] <kimundi> An idea I had - if you have a seperate update and render thread, with independent data structures, then the update thread could process the changes into an optimal, pruned format to pass to the render thread
[12:14:08] <kimundi> bollu_: copy on write
[12:14:17] *** Joins: tgkokk (tgkokk@moz-88CCC929.home.otenet.gr)
[12:14:17] <bollu_> kimundi: ah. haven't seen the acronym before
[12:14:28] <huon> doener: (how I do tell exuberant-ctags vs classic ctags? I have both etags and ctags, but they appear to be identical; and running the command manually with etags instead of ctags fails too)
[12:14:37] <doomlord_> yeah i've heard of that being done too
[12:14:38] <bollu_> kimundi: then the whole pruning would become a bottleneck I think.
[12:14:52] <bollu_> kimundi: but again, I'm no expert by far >_>
[12:14:53] <doener> huon: debian only has ex-ctags in its repos
[12:15:05] <kimundi> bollu_: Well, define bottleneck
[12:15:22] <doomlord_> bollu it would probably be ok - cpu's can blast through data consuming/producing quite fast ... its pointer chasing, decisions, arbitration between threads that slows them down
[12:15:32] <doener> huon: update-alternatives --query ctags
[12:15:35] <bollu_> doomlord_: but the interesting thing about this approach is the game logic part of it could theoretically been infinite frames ahead of rendering
[12:16:05] <doomlord_> the fact that the 'update' would produce the pruned data set would have done part of the work already.. sequentially reading it wouldn't be a problem
[12:16:28] <doomlord_> well to counter all that, you want low latency; so its better to do 'real' parallelizing if you can
[12:16:29] <huon> doener: oh, they're both coming from emacs24 (ctags.emacs24)
[12:16:32] <doomlord_> occulus rift :)
[12:16:36] <bollu_> doomlord_: I'm apprehensive about multi threading - 'cause I've made a *huge* mess of it before
[12:16:44] <huon> I appear to not have the ex-ctags package installed at all
[12:16:45] <doomlord_> thats why many of us are here :)
[12:16:48] <eddyb> I hear parallelizing?
[12:16:48] <huon> I'll do that then...
[12:16:48] *** Quits: mgottschlag (quassel@moz-C63864F9.cust.bluewin.ch) (Ping timeout)
[12:16:49] <bollu_> doomlord_: :D
[12:16:53] <huon> doener: thanks
[12:16:57] <doener> huon: np
[12:17:01] <kimundi> bollu_: A basic idea I had is to have a scengraph shared between update and render thread. the render thread just loops over a immutable snapshot of the graph, while the update thread slowly muattes using COW so that the render thread doesn'T need to wait or lock. then, when the update thread is done, it lochs the render thread for the shortest duration neccessary to update its render graph
[12:17:15] <doomlord_> a language with globals declared unsafe, a langauge with much more solid 'const correctness' - this will all help parallelizing
[12:17:33] <eddyb> btw, if the AST becomes owned (which I now figure is doable), we can do parallel passes on it
[12:17:48] <huon> eddyb: it doesn't need to be owned to do parallel passes
[12:17:53] <eddyb> like, there are only minor issues with parallel type checking
[12:17:58] <eddyb> huon: but it's so much easier
[12:17:59] <huon> fork-join works with good-old &
[12:18:15] <huon> not that much easier
[12:18:35] <edwardw> parallel passes? cool
[12:18:40] <bollu_> kimundi: hm, I'm not sure how easy that is to do. 
[12:18:44] <huon> anyway, "becoming owned" better be "being allocated into an arena" ;P
[12:18:54] <doomlord_> bollu - i've always seen multithreading being a mess aswell :) 
[12:19:20] <kimundi> bollu_: Rust at least gives you the tootls to do safe trial and error
[12:19:24] <doomlord_> it was hard work to take a traditional C++ program and parallelize it, when people have globals all over the place.
[12:19:41] <bollu_> doomlord_: I'd say the premise is pretty nice, but doing it right is realy hard.
[12:20:11] <bollu_> doomlord_: yeah, that almost never works. 'cause the entire architecture has to different for it to work in paralell
[12:20:26] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[12:20:46] <doomlord_> some systems lend themselves easily to it, others dont, and yeah, the entire architecture has to be different.
[12:20:59] *** Joins: philix (felipe@moz-9FAFA12F.user.veloxzone.com.br)
[12:21:07] <kimundi> I dream of writing a virtual reality game/simulation engine that uses tricks like that to get massive parallelity gains
[12:21:17] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[12:22:06] *** Joins: japaric1 (japaric@8D04830C.551A521E.212E9B57.IP)
[12:22:08] <bollu_> doomlord_: so, I'll have to "copy" the front buffer into the back buffer when flip() is called (yeah, I'm sticking with rendering terminology)
[12:22:08] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[12:22:29] *** Quits: japaric (japaric@E0CBD5D9.935005AB.84437BC5.IP) (Ping timeout)
[12:22:48] *** Joins: fyolnish (fyolnish@moz-49396AB9.dynamic.ppp.asahi-net.or.jp)
[12:22:56] *** Quits: philix (felipe@moz-9FAFA12F.user.veloxzone.com.br) (Ping timeout)
[12:22:57] <doomlord_> bollu do you have to  'copy' , or is it just front = calculate_next_frame (back)
[12:23:00] <bollu_> doomlord_: but that somewhat defeats the purpose of having two buffers - other than the fact that we have an immutable copy to paralellize and a mutable copy to also deal with in chunks
[12:23:09] <bollu_> doomlord_: yeah, that way
[12:23:10] <doomlord_> flip just switches pointer
[12:23:20] <bollu_> doomlord_: & in rust right?
[12:23:31] <bollu_> reference?
[12:23:33] <doomlord_> there both mutable but for large chunks of code you know one is immutable
[12:23:41] <kimundi> Like, having as a goal that the render thread always updates at maximum framerate. The update thread might slow down under load, leading to a lagging/stuttering world, but you still should experience zero latency in looking around in this slowly updating world
[12:23:47] *** Joins: richard|s (mindginati@moz-B245D190.dyn.cust.vf.net.nz)
[12:24:13] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[12:24:40] <bollu_> doomlord_: yeah, got that. kimundi: how is that possible? kimundi : you described it perfectly :)
[12:25:05] <bollu_> doomlord_: I'm trying it with a 2d setup first - this is hard enough without 3d geometry coming into play
[12:25:10] <doomlord_> if you can, you use the whole CPU to 'update' , then the whole cpu to 'render' - consoles allowed parallel rendering - generating the command lists in chunks and 'joining' effectively.
[12:25:42] <kimundi> bollu_: double buffering is indeed not applicable for gamestate like this. What I'm seeing as possible solution is to instead generate a as small as possible "delta" betweeen the new state and the old one, so that updating it becomes faster than a full memcopy
[12:25:44] <doomlord_> that way minimizes latency. Having said that, you can also have a 'render thread' gogin through the usual ringbuffer working just a little ahead of the gpu
[12:25:58] *** Joins: mib_jufmlk (Mibbit@A3C43B21.4F3C83C2.D3D614D0.IP)
[12:26:13] <doomlord_> i wouldn't worry about memcpy at all - compared to physics, animation.. its nothing
[12:26:22] *** Quits: fyolnish (fyolnish@moz-49396AB9.dynamic.ppp.asahi-net.or.jp) (Ping timeout)
[12:26:47] <kimundi> doomlord_: well, I include all that under "update"
[12:26:47] <bollu_> kimundi: then the creating the delta part will take longer than actually memcpying I think
[12:26:49] <doomlord_> its simple sequential acess; physics , ai etc.. involves traversing complex datastructures
[12:26:57] <bollu_> kimundi: it's just extra work for no benifit
[12:27:05] <kimundi> doomlord_: I admit that I have zero real expereince to know what I'm talking about though :)
[12:27:18] <doomlord_> ok fair enough, i guess you mean 'updating the changing segments' when you say delta, 
[12:27:22] <kimundi> bollu_: Not if you only create the delta to begin with
[12:27:24] <doomlord_> like having a large world with idle parts
[12:27:40] <arturo> kimundi, john carmack was talking about a similar approach in this talk: http://functionaltalks.org/2013/08/26/john-carmack-thoughts-on-haskell/
[12:27:52] <bollu_> arturo: that's where this started :)
[12:27:58] <arturo> :D
[12:28:03] <kimundi> bollu_: Like, have a treees tructure, and every node that changes gets threaded into a linked list. Then if you are done, you already have the delta of things that changed
[12:28:27] <bollu_> kimundi: the delta would be quite complex then would it not? 'cause insertion, removal and state change would all have to be logged
[12:28:47] <kimundi> yeah, I haven't really thought it through
[12:28:50] <doomlord_> pure functional mentality does suit a lot of game 'update', IMO. 
[12:29:08] <kimundi> As I said, I have no experience with actually writing a game :)
[12:29:11] <doomlord_> even though its was usually traditionally coded with heavy mutation
[12:29:18] <bollu_> kimundi: I haven't had much either
[12:29:47] <doomlord_> straight away, the whole of 'rendering' is indeed a pure function reading immutable state, outputing an image.
[12:30:03] <doomlord_> (& reading immutable graphics resources..)
[12:30:13] <arturo> i think the update thread just needs a different gl context to upload everything to the graphics card when it's done updating, then front/back is in the gpu
[12:30:17] <kimundi> bollu_: Hm, we could try to start working on this together. ;) Our knowledge and goals seem to align somewhat.
[12:30:57] <bollu_> kimundi: sure thing! I'd love to do it together if you're okay with it :)
[12:31:19] <bollu_> doomlord_: I've had problems with component systems breaking down before at some level of complexity
[12:31:53] <bollu_> doomlord_: like at some point, the Health component will /have/ to access the Physics component to detect if there's been a collision or not
[12:32:01] <doomlord_> is it '#macro_escape] or soemthing to allow other modules to use macros
[12:32:14] <bollu_> doomlord_: otherwise, you'd have to take it to another extreme where each object is in itself a sub messaging queue
[12:32:26] <bollu_> doomlord_: I don't like both approaches. any design ideas?
[12:32:54] <doomlord_> bollu there's a school of thought where you just write it simply, then put effort into heavy weight systems like animation, physics, pathfinding
[12:33:57] <bollu_> doomlord_: "it" being the components?
[12:34:00] <kimundi> doomlord_: macro_Exprt sounds right
[12:34:06] <doomlord_> you could just start with straight OO, then seperate out flat lists for the most common, datadriven entity types (for example are all projectiles similar enough to just be table-driven for their differences.)
[12:34:09] <kimundi> macro_export*
[12:34:21] <bollu_> doomlord_: ah, yes. that might work. 
[12:34:32] <kimundi> oh, modules - that is macro_escape, yeah
[12:34:47] <bollu_> doomlord_: okay, few more questions
[12:35:10] <bollu_> I've usually stored components as a map<key, ComponentType> componentList 
[12:35:19] <doomlord_> struct GameWorld {  projectiles:[]   players:[]  platforms:[] physics_objects:[] ... particles:[] /* particles are non-interacting with gameplay..*/ }  // all sorts of assumptions possible between different parts
[12:35:42] <bollu_> doomlord_: I prefer a map versus an array for O(1) access
[12:35:51] <bollu_> doomlord_: but I'm not sure how scalable it is
[12:36:14] <doomlord_> one way is that a master entity just has references to its components (be that an index or pointer.. whatever the rusty way would be)
[12:36:42] <doomlord_> .. and component type is a flat array
[12:36:49] <bollu_> doomlord_: yeah, that might work, but it adds another level of indirection right? 
[12:37:05] <bollu_> doomlord_: and in C++, if you want to notify that you don't own a component, you can just use nullptr
[12:37:16] <bollu_> doomlord_: you can't do that in Rust other than have Option<T> everywhere
[12:37:20] <doomlord_> yes ; but this works fine if most of your heavy processing is within the components. (eg, animatino, physics)
[12:37:31] <doomlord_> just updating health and so on is not something to worry about
[12:37:45] <bollu_> doomlord_: what about the second bit? if you don't *have* a component in an object, what do you do?
[12:37:51] <doomlord_> yeah it would have to be option
[12:37:59] <huon> bollu_: Option<&> or Option<~> is a nullable pointer
[12:38:02] <bollu_> doomlord_: yeah, thought so
[12:38:42] <doomlord_> another way of doing option (which we sometimes did for branchless code) is to simply have a dummy object you can point at when you dont care
[12:38:48] <bollu_> doomlord_: so the "objects" themselves would have to be in a map or something right?
[12:38:54] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[12:39:13] <doomlord_> under the 'master entity points to components' idea, it can all be flat arrays
[12:39:17] <bollu_> doomlord_: hm, that may work? but that requires you to have a base class does it not?
[12:39:23] *** Joins: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[12:39:33] <doomlord_> update the components, then the entities relate their own component interactions
[12:39:50] <bollu_> doomlord_: what? I didn't catch the last bit
[12:40:03] *** Joins: tkozik (textual@D6B5DD7E.D8252BC.9532F1CE.IP)
[12:40:05] <doomlord_> this can be done without inheritance because essentially the 'master entity with optional component ptrs' is multiple-inheritance 
[12:40:29] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[12:40:40] <bollu_> doomlord_: so, Entity { position: Option<Position>, physics: Option<Physics ... } correct?
[12:40:48] <doomlord_> the  idea is the 'compononent' contains data that can be updated in isolation without so much knowledge from its parent entity
[12:40:51] <bollu_> Position&
[12:40:59] <doomlord_> bollu yes like that
[12:41:02] <bollu_> doomlord_: yeah, so a component is just a bag of data
[12:41:07] <bollu_> doomlord_: or a set of pointers
[12:41:22] <bollu_> and the pointers point to array indeces in the "World" correct?
[12:41:24] <doomlord_> yes components do the heavy lifting, the entity ties it together
[12:41:38] <bollu_> doomlord_: okay, so I have used it correctly before ;)
[12:41:54] *** Joins: leeks (leeks@moz-362CDC0.fttp.sta.comporium.net)
[12:41:58] <tkozik> Hi! i wanted to tinker with Rust and built it from source. Now I want to install it in non-default location. Is there any environment flag for this in Rust build system?
[12:42:17] <huon> ./configure --prefix=...
[12:42:18] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[12:42:21] <bollu_> doomlord_: hm, okay. again, I'll get back to implementing a simple simulation with like two components and get back to you guys
[12:42:32] <bollu_> thanks for the help doomlord_ huon and kimundi !
[12:42:41] <huon> tkozik: (probably requires rebuilding it, maybe)
[12:43:22] <tkozik> huon: thanks
[12:43:24] *** Quits: Blei (Philipp@moz-7AD1732E.dclient.hispeed.ch) (Quit: Blei)
[12:43:52] <bollu_> how do I do a raw memcopy? 
[12:44:12] <huon> functions in std::mem or std::ptr
[12:44:17] <bollu_> thanks
[12:44:17] <huon> probably the latter
[12:44:56] <bollu_> oh - and rustlang is higher up in google search that rust game, which is awesome!
[12:46:52] <bollu_> huon: does rust have a sizeof() operator?
[12:47:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[12:47:16] <huon> in std::mem
[12:47:37] *** Quits: alonlevy (alon@moz-61A0AD83.red.bezeqint.net) (Ping timeout)
[12:47:42] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Client exited)
[12:47:43] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[12:47:55] *** Joins: jensnock_ (jensnocker@moz-33279404.customers.ownit.se)
[12:48:02] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Client exited)
[12:48:23] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[12:48:24] *** Joins: mib_kol0u4 (Mibbit@moz-EF665333.sta.tvknaszapraca.pl)
[12:48:32] *** Quits: luziiie (luziie@moz-CD18B14B.customer.cdi.no) (Connection reset by peer)
[12:48:44] *** Joins: luziiie (luziie@moz-CD18B14B.customer.cdi.no)
[12:48:56] *** Joins: jmgrosen (user@moz-848F6087.sb.sd.cox.net)
[12:49:16] *** Quits: kimundi (kimundi@moz-4A4AB822.dip0.t-ipconnect.de) (Ping timeout)
[12:49:28] *** Quits: mib_kol0u4 (Mibbit@moz-EF665333.sta.tvknaszapraca.pl) (Quit: http://www.mibbit.com ajax IRC Client)
[12:49:32] *** Joins: kimundi (kimundi@moz-4A4AB822.dip0.t-ipconnect.de)
[12:49:33] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[12:49:36] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[12:49:42] <edwardw> what will trigger std::rt::backtrace exactly?
[12:49:45] <bollu_> how do I do this?  struct Foo { A:T, b:&T} impl Foo { pub fn new() -> Foo { Foo{/* set a to a value and set b to &a. How?*/} }
[12:49:47] *** Quits: jensnock_ (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[12:50:02] <kimundi> bollu_: Not possible
[12:50:18] <kimundi> bollu_: You can't have references pointing into their own struct
[12:50:38] <bollu_> kimundi: ah. that's a bummer. 
[12:50:58] <kimundi> bollu_: you probably want shared ownership with Rc<T>
[12:51:05] *** Quits: jmgrosen (user@moz-848F6087.sb.sd.cox.net) (Ping timeout)
[12:51:19] <bollu_> kimundi: I'm trying to optimize double buffering by having a pointer to a member,
[12:51:43] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[12:51:53] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[12:52:13] <kimundi> bollu_: hm, how would that optimize?
[12:52:28] *** Joins: imim (imim@A3C43B21.4F3C83C2.D3D614D0.IP)
[12:52:35] <bollu_> kimundi: more like simplify code
[12:52:46] <bollu_> kimundi: swapping the buffers becomes a pointer switch
[12:53:27] *** Quits: imim (imim@A3C43B21.4F3C83C2.D3D614D0.IP) (Quit: r33lbigfish)
[12:53:41] <eddyb> /back
[12:53:45] <kimundi> bollu_: well, it wouldn't work like this
[12:53:49] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[12:53:52] <doomlord_> does rust have a macro for current function (i've seen file!, line! ,)
[12:54:08] <eddyb> huon: only if that arena has deallocation
[12:54:10] <kimundi> doomlord_: not really
[12:54:33] <doomlord_> file, line is ok, func is the icing on the cake
[12:54:42] <doomlord_> i realise there's closures and so on
[12:54:45] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[12:54:46] <eddyb> huon: because you need to recycle (thankfully, not as much as you'd need with not-in-place folding)
[12:55:11] <eddyb> huon: hmm, that makes me wonder if I should keep P<T> instead of @ -> ~
[12:55:23] <eddyb> using a TLS arena or somesuch
[12:55:39] <eddyb> huon: what you can't do with &T is parallel folding, btw
[12:56:03] <tiffany> what's the story behind rust's name?
[12:56:06] <kimundi> eddyb: Sounds like "use P"
[12:56:13] *** Quits: victorporof (victorporo@moz-FFB76956.cpe.net.cable.rogers.com) (Quit: victorporof)
[12:56:36] <eddyb> kimundi: I still feel stupid for not doing this back when I messed with ast_map
[12:56:47] <eddyb> since I actually have the correct semantics in it, now
[12:56:58] <eddyb> with roots in the map
[12:57:04] <bollu_> eddyb: what's a TLS?
[12:57:10] <eddyb> thread-local storage
[12:57:11] <kimundi> eddyb: Don't feel stupid, you have done more clever things than many other contributors :P
[12:57:15] <bollu_> eddyb: ah. 
[12:57:29] <kimundi> or task local storage
[12:57:34] <eddyb> no, that's TLD
[12:57:38] <kimundi> oh
[12:57:39] <bollu_> kimundi: never heard of that
[12:57:42] <kimundi> whats the D stand for
[12:57:47] <bollu_> ^^
[12:57:54] <eddyb> data. we use the different terms to distinguish between the two
[12:57:58] <kimundi> ah
[12:57:59] <eddyb> because the difference matters
[12:58:03] <kimundi> yeah
[12:58:11] *** Joins: Rym (y@4567580B.9869CFC3.51C6DE68.IP)
[12:58:12] *** Joins: imim (imim@A3C43B21.4F3C83C2.D3D614D0.IP)
[12:58:36] <eddyb> kimundi: I guess I can blame my late revelation about the last place (I thought) needed AST sharing
[12:58:49] <tiffany> is TLD the same thing as TLS when you're only using libnative?
[12:58:59] <eddyb> ooooh
[12:59:06] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[12:59:15] <eddyb> we can use TLS instead of TLD in rustc if we don't support running it with libgreen
[12:59:17] *** Quits: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl) (Ping timeout)
[12:59:35] <eddyb> which would make a thread-local arena much more feasible
[12:59:54] *** Quits: bollu_ (bollu@31CCE710.7065DDB9.6D6A344F.IP) (Ping timeout)
[12:59:56] *** Quits: bollu (bollu@31CCE710.7065DDB9.6D6A344F.IP) (Ping timeout)
[13:00:07] <eddyb> kimundi: I figured that sharing AST in macros is bad
[13:00:11] <kimundi> bollu_: With Rust, there can be many tasks scheduled over few threads. So thread local storage is important for isolating data races between native threads, while task local data is important for having global data for each individual task
[13:00:34] <eddyb> we can't see the effects because each folding pass de-duplicates the shared nodes
[13:00:57] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[13:01:01] <eddyb> without that information, the AST still looked shareable to me
[13:02:04] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[13:02:15] <eddyb> huon: I don't think we can use an arena *just yet*
[13:02:24] *** Joins: greedy (Mibbit@moz-D1A558EC.range86-183.btcentralplus.com)
[13:03:15] <eddyb> huon: or, hmm... I could just not implement DerefMut<T> for P<T> and use something different to get mutable access
[13:03:17] <huon> eddyb: why not?
[13:03:32] <eddyb> (since you're not really supposed to mutate the AST unless you're folding)
[13:03:44] <huon> (as in, why can't we use an arena?)
[13:03:45] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[13:03:59] <eddyb> huon: if you have DerefMut, it's going to get picked even for non-&mut self method calls
[13:04:12] <huon> where does derefmut come in?
[13:04:15] <eddyb> and you're going to get borrow failures
[13:04:20] *** Quits: leeks (leeks@moz-362CDC0.fttp.sta.comporium.net) (Client exited)
[13:04:28] <huon> (also, that sounds like a huge bug?)
[13:04:32] <eddyb> huon: P<T> that is a smart pointer and not just an alias for ~T
[13:04:51] *** Quits: io2 (io2@moz-EE406A5.home.otenet.gr) (Quit: )
[13:04:53] *** Joins: bollu (bollu@31CCE710.7065DDB9.6D6A344F.IP)
[13:05:06] *** Joins: bollu_ (bollu@31CCE710.7065DDB9.6D6A344F.IP)
[13:05:09] <huon> like a P<T> that comes from an arena ;P
[13:05:15] *** Joins: alonlevy (alon@moz-61A0AD83.red.bezeqint.net)
[13:05:32] <eddyb> huon: it's not a bug per say, it's method lookup not caring much for mutability (we don't have mutability as an inference variable and whatnot)
[13:05:32] <bollu_> doomlord_, kimundi : https://gist.github.com/bollu/b1e06a2722f68b4b3cac feedback?
[13:05:57] *** Quits: Rym (y@4567580B.9869CFC3.51C6DE68.IP) (Ping timeout)
[13:05:57] *** Joins: leeks (leeks@moz-362CDC0.fttp.sta.comporium.net)
[13:06:00] <eddyb> huon: there is an issue open and nmatsaki1 has concrete plans for fixing it, so Uniq<T> (maybe even with *x moving out) should work at one point
[13:06:11] <huon> eddyb: https://github.com/mozilla/rust/issues/7929#issuecomment-21291989 fwiw
[13:06:15] <ski> (s/per say/per se/ ?)
[13:06:23] <eddyb> right now, Deref + custom methods for mut/move is the best solution, AFAICT
[13:06:37] *** Joins: Rym (y@4567580B.9869CFC3.51C6DE68.IP)
[13:06:54] <kimundi> bollu_: Well that is invalid Rust code, sow hat feedback do you need? :)
[13:07:04] <doomlord_> lifetimes needed 
[13:07:28] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[13:07:31] <doomlord_> oh there are some, 
[13:07:41] <eddyb> huon: I don't want threading lifetimes through the entire AST :(
[13:07:42] <bollu_> kimundi: I meant the idea :) the top part compiles I beileve
[13:08:05] <huon> eddyb: having it owned with (some variation of) ~ will be slower
[13:08:29] <bollu_> kimundi: so the basic idea is fine?
[13:08:29] <huon> and you personally don't have to be threading lifetimes through the AST
[13:08:36] *** Quits: richard|s (mindginati@moz-B245D190.dyn.cust.vf.net.nz) (Ping timeout)
[13:08:43] <kimundi> bollu_: I get the idea, but you won't be able to implement it just with a pointer. :)
[13:08:45] <eddyb> huon: we'll have to compare a TLS arena with jemalloc, IMO
[13:08:45] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[13:09:05] <huon> eddyb: typed arenas for Exprs etc. will always be much faster
[13:09:15] <eddyb> right, I had an idea about that
[13:09:24] <huon> and why TLS?
[13:09:28] <bollu_> kimundi: as in?
[13:09:33] <huon> why not just a context object?
[13:09:35] *** Joins: bollu__ (bollu@31CCE710.7065DDB9.6D6A344F.IP)
[13:09:40] <huon> (also the lifetimes on TLS don't wrk yet)
[13:09:48] <eddyb> huon: because that requires lifetimes everywhere
[13:09:51] <kimundi> bollu_: if it where a double buffer with a: ~T and b: ~T, then you could store a unsafe *T pointer that points at one of both allocations and reuse that
[13:09:55] *** Joins: richard|s (mindginati@moz-45375516.dyn.cust.vf.net.nz)
[13:10:04] <huon> and surely putting things in TLS is like, the opposite of parallel :P
[13:10:12] <eddyb> huon: just as a test
[13:10:13] *** Joins: dranov (dranov@61A04536.8894C792.FCAAE698.IP)
[13:10:19] <eddyb> to compare arenas with ~
[13:10:41] *** Quits: imim (imim@A3C43B21.4F3C83C2.D3D614D0.IP) (Quit: leaving)
[13:10:52] <bollu_> kimundi: ah. but is that really required? 'cause I have to copy data at the end of every flip() to maintain synchrony. I'm not sure how having a pointer would help. 
[13:10:57] *** Joins: chridou (chatzilla@moz-6535DCD5.dip0.t-ipconnect.de)
[13:11:17] <huon> eddyb: http://huonw.github.io/isrustfastyet/buildbot/bench/test.html#benches=arena-tests-bench_pod,arena-tests-bench_pod_nonarena
[13:11:32] <eddyb> huon: TypedArena isn't going to GC, so it could *potentially* be worse, depending on how much garbage we create
[13:11:51] <eddyb> huon: o_O
[13:12:01] <eddyb> all teh benchmarks? wow
[13:12:06] <bollu_> exit
[13:12:09] <huon> (well, I guess it's not Pod, so the difference is smaler)
[13:12:10] *** Quits: bollu_ (bollu@31CCE710.7065DDB9.6D6A344F.IP) (Quit: leaving)
[13:12:10] *** Quits: bollu__ (bollu@31CCE710.7065DDB9.6D6A344F.IP) (Quit: leaving)
[13:12:18] <kimundi> bollu_: Sorry, I don't know if you want to write a double buffer or a "overwrite old immutable copy with new mutated copy" structure here because your struct and your code does not match
[13:12:20] <huon> eddyb: worse for memory useage?
[13:12:22] *** Joins: bollu_ (bollu@31CCE710.7065DDB9.6D6A344F.IP)
[13:12:25] <kimundi> bollu_: Sorry, I don't know if you want to write a double buffer or a "overwrite old immutable copy with new mutated copy" structure here because your struct and your code does not match
[13:12:27] <eddyb> huon: yupp
[13:12:37] <bollu_> kimundi: yeah, I do want to overwrite
[13:12:37] <huon> eddyb: we can just throw away entire arenas
[13:12:45] <bollu_> kimundi: to maintain the back and front in sync
[13:12:46] <huon> eddyb: for the old folds
[13:12:53] <eddyb> huon: except we want ownership so we can fold in place
[13:12:55] <huon> eddyb: so it would almost certainly be better
[13:13:01] <bollu_> kimundi: otherwise the whole compute delta comes into play
[13:13:02] <huon> eddyb: *you* want that ;P
[13:13:09] <eddyb> which is much more efficient than swapping arenas
[13:13:14] <huon> it's not 100% clear to me that the bother will be worth the effort
[13:13:26] <eddyb> it's my effort
[13:13:29] <huon> and that's not clear to me either
[13:13:40] <bollu_> kimundi: 'cause after calling flip(), back becomes the current front - which will be consumed by the renderer
[13:13:42] <eddyb> huon: cfg only removes nodes
[13:13:49] <eddyb> huon: look at its memory behavior *now*
[13:13:51] <bollu_> kimundi: and front will be free to be updated
[13:13:56] <bollu_> kimundi: so... thoughts?
[13:14:03] <kimundi> bollu_: Well in this case - I fixed your struct definition, your code is correct: https://gist.github.com/Kimundi/8aa40c648972b3b4770a
[13:14:20] <huon> eddyb: multiple staged arenas is so simple
[13:14:31] <huon> having intermixed arenas brings this GC problem
[13:14:31] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[13:14:32] *** Joins: imim (imim@A3C43B21.4F3C83C2.D3D614D0.IP)
[13:14:33] <eddyb> huon: our folds increase memory usage almost tenfold in massif
[13:14:36] <kimundi> bollu_: but... this won'T work in a multthreading scenario
[13:14:48] <bollu_> kimundi: why not?
[13:14:53] <huon> eddyb: yeah? throwing away old arenas would solve that
[13:14:55] <bollu_> I'm blocking after front() is updated.
[13:15:02] <kimundi> bollu_: references and lifetimes only work for a single function call stack
[13:15:12] <eddyb> huon: you'd still have the spike
[13:15:16] <huon> almost certainly better than in-place (due to the GC problem)
[13:15:16] <eddyb> memory isn't free
[13:15:22] <huon> eddyb: 2x spike
[13:15:31] <huon> for each fold
[13:15:35] <eddyb> with vrange, maybe it would be better
[13:15:35] <huon> not that large
[13:15:50] <bollu_> kimundi: ah, I see. 
[13:15:59] <kimundi> bollu_: you can not update front() and read back() at the same time like this - however, if I make a short modification...
[13:15:59] <huon> you could even just alternate between two sets of arenas as you fold
[13:16:04] <bollu_> kimundi: so, how would I have to write it in a multi-threaded context?
[13:16:09] <bollu_> kimundi: your code would work?
[13:16:22] <eddyb> huon: well... we can actually test at least two or three variations if I replace @T with P<T>
[13:16:34] <kimundi> bollu_: Lots of smartpointers with atomic reference counting and/or locking :P
[13:16:45] <bollu_> kimundi: that sounds painful :(
[13:16:50] <eddyb> huon: because then you just swap the P<T> implementation to change its behavior
[13:16:51] <bollu_> kimundi: but back is not mutable
[13:16:51] *** Quits: alonlevy (alon@moz-61A0AD83.red.bezeqint.net) (Ping timeout)
[13:17:13] <bollu_> kimundi: back() is simply an immutable reference
[13:17:27] <huon> eddyb: hell, you could have per-module arenas, and so you can incrementally throw them away as you go
[13:17:40] <huon> if you wish to flatten the spike as much as possible
[13:17:52] <huon> without having to dance around to do an in-place fold
[13:17:53] <eddyb> huon: and I think we can have fold_crate instruct P to change allocations to a new arena, and drop the old one afterwards
[13:18:09] <eddyb> in-place is easy with ownership, fwiw
[13:18:15] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[13:18:42] <kimundi> bollu_: The problem is that if you return a reference to back, it freezes whole self
[13:18:45] *** Quits: imim (imim@A3C43B21.4F3C83C2.D3D614D0.IP) (Quit: leaving)
[13:18:48] <kimundi> bollu_: However, you can do this: https://gist.github.com/Kimundi/8aa40c648972b3b4770a
[13:19:00] <eddyb> huon: I'm happy to provide a platform to test all these possibilities on
[13:19:08] <kimundi> return references to both at the same time
[13:19:18] <eddyb> huon: that's progress, right?
[13:19:38] <huon> eddyb: another downside to in-place is mutability is harder to reason about than just making a whole new AST
[13:19:42] <kimundi> if we get the SHare kind, you could then run the render thread in parallel to the update task
[13:19:44] <bollu_> kimundi: isn't that a hacky monad? :)
[13:19:52] <kimundi> bollu_: hu?
[13:20:00] <huon> (I know it looks like it's a new AST from the outside, but the internals still have to deal with mutability correctly)
[13:20:00] *** Joins: Matthias247 (Miranda@moz-678B5E4A.hsi2.kabel-badenwuerttemberg.de)
[13:20:07] <huon> eddyb: definitely progress
[13:20:16] <kimundi> bollu_: Its how rusts lifetime system works - I don'T see a monad there :P
[13:20:20] <huon> (just making things Rc would be progress too)
[13:20:26] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[13:20:34] <eddyb> huon: by so much less :P
[13:20:41] <bollu_> kimundi: my intuition of a monad is kind of weird - I visualize it as a near mathematical trick to avoid immutable naming
[13:20:46] <huon> eddyb: yeah, but it's less intrusive
[13:20:51] <huon> i.e. easier
[13:21:04] <huon> and so would be a helpful step along the way of removing @
[13:21:18] <bollu_> kimundi: anyway, 
[13:21:22] <eddyb> but then I still have to go and find all the unneeded Rc<RefCell<T>>
[13:21:29] <huon> RefCell?
[13:21:37] <huon> in the AST?
[13:21:46] <eddyb> ah, no, thought we were talking in general
[13:21:56] <eddyb> "making things Rc"
[13:22:02] <doomlord_> i liked the idea of keeping @ as a shortcut
[13:22:11] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[13:22:31] <eddyb> https://github.com/mozilla/rust/pull/12735 this removes who knows how many @ and RefCell's
[13:22:47] <eddyb> with just one added Rc (that might have been there to begin with)
[13:23:20] <eddyb> most of them where @mut originally because of a &self Visitor, I think
[13:23:37] <kimundi> bollu_: whoops, I only now rembered that there is a second file under that gist
[13:23:57] <huon> eddyb: can I r+ yet?
[13:24:02] <eddyb> nope
[13:24:15] <eddyb> still working on getting the last commit to compile
[13:24:17] <Ms2ger> Do it anyway :)
[13:24:19] <bollu_> kimundi: ?
[13:24:39] <eddyb> Ms2ger: in that case, I should push. so it doesn't pass bors
[13:24:54] <huon> eddyb: can that go in a separate PR?
[13:24:58] <huon> since bors is being lazy
[13:25:04] <huon> and I want less @ now
[13:25:10] <eddyb> haha
[13:25:12] * huon tantrum
[13:25:19] <huon> :P
[13:25:24] <eddyb> huon: okay, go ahead
[13:25:30] *** Joins: imim (imim@A3C43B21.4F3C83C2.D3D614D0.IP)
[13:25:34] *** Joins: fyolnish (fyolnish@moz-49396AB9.dynamic.ppp.asahi-net.or.jp)
[13:25:36] <eddyb> I can rebase --onto the rest
[13:25:40] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[13:26:46] <eddyb> huon: wait, no :(
[13:26:55] <eddyb> I fixed a few things and rebased
[13:27:04] <eddyb> can I push -f without the last commit?
[13:27:15] *** Quits: fyolnish (fyolnish@moz-49396AB9.dynamic.ppp.asahi-net.or.jp) (Ping timeout)
[13:27:16] *** Joins: philix (felipe@moz-9FAFA12F.user.veloxzone.com.br)
[13:28:13] *** Joins: luz1 (luziie@moz-CD18B14B.customer.cdi.no)
[13:28:43] <bollu_> kimundi: you're moving self into a new DoubleBuffer right?
[13:28:51] *** Quits: luziiie (luziie@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[13:28:56] <kimundi> bollu_: huh?
[13:28:59] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[13:29:14] <kimundi> let DoubleBuffer{ ref back, ref mut front} = *self; is pattern matching
[13:29:28] <huon> eddyb: `checkout -b new-branch-name; git reset --hard HEAD^; git push -f`
[13:29:35] <kimundi> I create a &mut T and a &T to different parts of self at the same time
[13:29:45] <huon> wait
[13:29:47] <huon> that's wrong
[13:29:49] <kimundi> because doing it serially would lead to borrow errors
[13:30:02] <huon> eddyb: `git branch new-branch-name; git reset ...`
[13:30:02] <eddyb> huon: git push --help
[13:30:10] <kimundi> because the first borrow would freeze self, which would not allow for the second borrow :)
[13:30:35] <huon> eddyb: oh, neat
[13:30:37] <kimundi> bollu_: I'm currently trying to rewrite the render loop into something that would work with references and the Share kind in the future
[13:31:33] <krdln> kimundi: For me it's not obvious when using * moves out, and when it only creates lvalue
[13:31:47] <eddyb> it never moves out
[13:31:54] <kimundi> bollu_: Btw, I created #rust-vr-engine if you feel like discussing in more detail. :)
[13:32:02] <kimundi> eddyb: Thats not true
[13:32:05] <eddyb> yes it is
[13:32:09] *** Joins: ahunt (ahunt@moz-6D6D79D6.cable.virginm.net)
[13:32:23] <eddyb> let x = *y; is just like let x = z; where *y and z are lvalues
[13:32:27] <kimundi> *(~~5u) returns you a ~uint, doesn't it?
[13:32:36] <kimundi> let x = *(~~5u) returns you a ~uint, doesn't it?
[13:32:45] <eddyb> x = ... is what moves it out
[13:32:48] <kimundi> right
[13:32:51] <eddyb> the dereference never dereferences
[13:33:01] <eddyb> which is crazy, but that's how it works
[13:33:25] <eddyb> </Neo>
[13:33:27] <kimundi> eddyb: But my point is, using * can lead to amove or can not lead to a move, depending on context where it is used
[13:33:32] <krdln> so it's safe to use * in any pattern matching?
[13:33:41] *** Quits: richard|s (mindginati@moz-45375516.dyn.cust.vf.net.nz) (Quit: brb)
[13:33:46] <eddyb> yeah, if you have ref inside and whatnot
[13:33:54] <kimundi> eddyb: Saying it never moves does lead to misunderstandings
[13:34:01] <eddyb> kimundi: it's no different than using a local
[13:34:11] <krdln> so it's like c++, * makes a copy only when context is rvalue?
[13:34:34] <eddyb> let x = *~~5; is the same as let y = ~5; let x = y;
[13:34:43] *** Joins: Florob (Florob@moz-39532932.de)
[13:34:44] <eddyb> krdln: * never does anything (unless overloaded)
[13:34:46] <kimundi> eddyb: I'm not saying that you are wrong, I'm saying that one can get the wrong idea from such a claim
[13:35:06] *** Quits: angdev (angdev@DBD059C0.31B4D11A.8470FC36.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[13:35:27] <eddyb> krdln: Rust doesn't have first-class lvalue references like C++ does
[13:35:30] *** Joins: tigrou3tac (fabien@moz-6E2397FF.fbx.proxad.net)
[13:35:37] <krdln> I think it's good to say that it never moves.
[13:35:52] <eddyb> krdln: but that's pretty much what *x results in
[13:35:57] <krdln> eddyb: Yes, I know. But the concept of lvalues is still there
[13:36:02] <huon> eddyb: "let x = *~~5; is the same as let y = ~5; let x = y;" isn't true
[13:36:13] <eddyb> huon: wrt moves
[13:36:13] <huon> the former has an extra allocation
[13:36:14] <kimundi> Many beginners, myself included for a long time, think that * is a operator that unwraps a pointer - which is wrong, but saying it never unwraps a pointer is wrong as well
[13:36:28] *** Joins: richard|s (mindginati@moz-45375516.dyn.cust.vf.net.nz)
[13:36:28] <eddyb> it changes the pointer's type
[13:36:30] *** Quits: edwardw (Mibbit@ED48E813.BF27AFA4.B9C6B12A.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[13:36:39] <eddyb> from a Rust pointer to a C++ lvalue reference
[13:36:52] <eddyb> does that make sense?
[13:37:06] <eddyb> the pointer is still a pointer, just pretending to not be a pointer
[13:37:34] <eddyb> though it's even more complicated than that
[13:37:35] <krdln> eddyb: Try to explain that to newcommers without c++ background
[13:37:46] <eddyb> a.b and a[i] also result in lvalues
[13:38:17] <eddyb> krdln: I really don't have anything other than "there is no spoon"
[13:38:32] <bollu_> kimundi: sorry, was AFK
[13:39:00] <eddyb> the lvalue semantics in rust are seemingly (much) less specified than in C++
[13:39:23] <eddyb> though they (try to) behave in similar manners
[13:39:43] <eddyb> (and they should be quite deterministic, once you understand their logic)
[13:39:58] <huon> why would they not be deterministic??
[13:39:59] <eddyb> krdln: oh and Rust has &rvalue as an expression
[13:40:16] <eddyb> huon: as in "you know what you expect from them, once you understand them"
[13:40:51] <eddyb> krdln: &*x and &{*x} do different things
[13:41:06] *** Quits: twi (Adium@752B0356.FC95818.5EFB9497.IP) (Quit: Leaving.)
[13:41:07] <eddyb> but &*x and &(*x) should be identical
[13:41:16] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[13:42:08] <krdln> eddyb: &{*x} moves, i guess, and &*x is just x (unless magic derefs)?
[13:42:18] <eddyb> yupp
[13:42:39] *** jorendorff_away is now known as jorendorff
[13:42:42] <eddyb> well, if x is a ~T, you get &T from it, but yeah
[13:42:56] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[13:42:59] <eddyb> krdln: with overloaded deref, *x is *x.deref()
[13:43:17] <eddyb> see how the * is still there? that has to confuse some people
[13:43:25] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Connection reset by peer)
[13:43:57] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[13:44:07] <eddyb> and that method call is specifically without autoderef otherwise it could become *x.deref().deref().deref().deref()
[13:44:51] *** Quits: japaric1 (japaric@8D04830C.551A521E.212E9B57.IP) (Ping timeout)
[13:45:21] <eddyb> git push -f origin b166e8cceef50245c47be09cf68c61a46f6b9a28:at-exodus-chapter-11
[13:45:30] <eddyb> huon: it worked :D:D (feel free to r+ now)
[13:46:11] *** Joins: japaric1 (japaric@7D69BC2C.9E5CF106.5C7588CA.IP)
[13:46:17] <krdln> Do you know maybe why Rust didn't adopted c++ explicit lvalues?
[13:46:58] *** Joins: edwardw (Mibbit@4112974A.B4358688.30F15291.IP)
[13:47:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[13:48:20] <kimundi> bollu_: Hm, I' thinking how to use your DoubleBuffer struct for a multithreading scenario, but its hard to reason about becasue itneeds features not yet in Rust
[13:48:37] <kimundi> it needs*
[13:49:28] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[13:49:41] *** Joins: jmgrosen (user@moz-848F6087.sb.sd.cox.net)
[13:50:21] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[13:50:50] *** Joins: victorporof (victorporo@moz-FFB76956.cpe.net.cable.rogers.com)
[13:51:30] *** Joins: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org)
[13:51:51] *** Quits: jmgrosen (user@moz-848F6087.sb.sd.cox.net) (Ping timeout)
[13:52:19] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[13:54:10] *** Quits: imim (imim@A3C43B21.4F3C83C2.D3D614D0.IP) (Quit: leaving)
[13:55:56] *** Quits: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch) (Ping timeout)
[13:56:08] *** jorendorff is now known as jorendorff_away
[13:58:00] *** Joins: hdevalence (quassel@moz-D125A39F.home3.cgocable.net)
[13:58:12] *** Quits: richard|s (mindginati@moz-45375516.dyn.cust.vf.net.nz) (Input/output error)
[13:59:11] *** Joins: imim_ (imim@A3C43B21.4F3C83C2.D3D614D0.IP)
[13:59:52] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[13:59:57] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[14:00:14] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[14:01:23] *** Joins: olivernn (olivernigh@moz-7CE0F8.access.mtnbusiness.co.za)
[14:01:38] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[14:02:42] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[14:03:27] *** Quits: olivernn (olivernigh@moz-7CE0F8.access.mtnbusiness.co.za) (Ping timeout)
[14:04:23] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[14:06:10] *** Joins: richard|s_ (mindginati@moz-45375516.dyn.cust.vf.net.nz)
[14:06:44] *** Joins: sellout (Adium@moz-F3B3B6C3.hlrn.qwest.net)
[14:07:34] *** Quits: edwardw (Mibbit@4112974A.B4358688.30F15291.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:09:55] *** Quits: imim_ (imim@A3C43B21.4F3C83C2.D3D614D0.IP) (Quit: Changing server)
[14:11:04] *** Parts: brihat (bdsatish@moz-5EC00491.dhcp.inet.fi) ()
[14:12:18] *** Joins: sunfish (chatzilla@moz-42DA0C69.dsl.dynamic.sonic.net)
[14:12:24] *** Joins: ganitsu (ganitsu@moz-7CE60945.dialup.adsl.anteldata.net.uy)
[14:12:52] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[14:12:53] *** Joins: imim (imim@A3C43B21.4F3C83C2.D3D614D0.IP)
[14:15:15] *** Quits: tkozik (textual@D6B5DD7E.D8252BC.9532F1CE.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[14:16:10] *** Joins: Earnestly (earnest@18162BE0.BA6AC103.30311652.IP)
[14:16:55] *** Joins: james4k (james@moz-9BB5AE72.consolidated.net)
[14:17:01] *** Joins: bourbaki (chatzilla@moz-B57DFEE.dip0.t-ipconnect.de)
[14:18:21] *** Joins: leowoe (Leo@moz-8EAE1559.dip0.t-ipconnect.de)
[14:20:44] *** Joins: Guest_ (textual@D6B5DD7E.D8252BC.9532F1CE.IP)
[14:20:55] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[14:21:16] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[14:22:47] *** Joins: fyolnish (fyolnish@moz-49396AB9.dynamic.ppp.asahi-net.or.jp)
[14:22:56] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[14:23:50] *** Joins: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net)
[14:23:51] <Yurume> FreeFull, yes, I'm now maintaining rust-sdl (I unfortunately don't have a full access to the OS X box, so I don't know about OS X status right now). what's your concern?
[14:24:34] *** Quits: fyolnish (fyolnish@moz-49396AB9.dynamic.ppp.asahi-net.or.jp) (Ping timeout)
[14:24:41] *** Parts: imim (imim@A3C43B21.4F3C83C2.D3D614D0.IP) ()
[14:25:16] <FreeFull> Yurume: I was wondering if set_colors could take a slice rather than an owned vector, in case you would want to use it with the same data multiple times. Not that it matters too much though
[14:25:26] *** Joins: Anupkumar (uid16774@moz-A42E5B7B.irccloud.com)
[14:26:03] *** Quits: alinab (alina@moz-94EAE39D.alinab.org) (Quit: leaving)
[14:26:12] *** Joins: imim (imim@A3C43B21.4F3C83C2.D3D614D0.IP)
[14:26:37] <Yurume> FreeFull, aha, I thought you meant it didn't work... if you have a PR feel free to file it.
[14:26:51] <Yurume> I do have to convert all ~[]s to Vec<> anyway soon, though.
[14:27:30] <FreeFull> I don't feel converting it to take a slice is that important, really
[14:28:02] <Yurume> yeah, but thank you for pointing it out! I'll look at it when I do the conversion.
[14:28:26] <FreeFull> It's probably good practice to take a slice unless you do need ownership
[14:28:52] <Yurume> yes, it doesn't really need the ownership
[14:30:11] <Yurume> heck, it is a bit worse, SDL_SetColors may return 0 even when it did set the palette (incorrectly)
[14:30:13] <bourbaki> Is there a nightly binary build for Debian of Rust?
[14:30:20] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[14:32:11] <Yurume> bourbaki, Debian wiki has a page about that: https://wiki.debian.org/Teams/RustPackaging --- though I don't know if there is an official package. Ubuntu PPA may work for Debian though...
[14:32:30] *** Quits: leowoe (Leo@moz-8EAE1559.dip0.t-ipconnect.de) (Ping timeout)
[14:33:25] *** Quits: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[14:33:35] *** Joins: angdev (angdev@16F167B.4C57D258.D8E8354F.IP)
[14:35:31] *** Quits: bollu_ (bollu@31CCE710.7065DDB9.6D6A344F.IP) (Ping timeout)
[14:35:42] *** Joins: alinab (alina@moz-94EAE39D.alinab.org)
[14:35:47] *** Joins: twi (Adium@752B0356.FC95818.5EFB9497.IP)
[14:36:02] *** Quits: bollu (bollu@31CCE710.7065DDB9.6D6A344F.IP) (Ping timeout)
[14:38:01] *** Joins: leowoe (Leo@moz-962CE889.dip0.t-ipconnect.de)
[14:38:50] *** Joins: Ferreus (ferreus@moz-6E215B81.lsn.wtnet.de)
[14:39:00] *** Quits: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net) (Ping timeout)
[14:39:45] *** Quits: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net) (Ping timeout)
[14:39:56] *** Joins: jmgrosen (user@1E16529.FD5C31A1.284344F5.IP)
[14:40:00] *** Joins: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net)
[14:41:19] *** Joins: meyer (meyer@moz-A9CF56E4.hsd1.ca.comcast.net)
[14:41:59] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[14:43:16] *** Quits: leowoe (Leo@moz-962CE889.dip0.t-ipconnect.de) (Ping timeout)
[14:43:41] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[14:44:23] *** Joins: leowoe (Leo@moz-962CE889.dip0.t-ipconnect.de)
[14:44:26] *** Joins: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca)
[14:45:12] *** Quits: Rym (y@4567580B.9869CFC3.51C6DE68.IP) (Ping timeout)
[14:45:27] *** Quits: tmh (e@180B7532.123B3C13.AA32EE5B.IP) (Ping timeout)
[14:45:58] *** Joins: hdevalence_ (quassel@moz-D125A39F.home3.cgocable.net)
[14:46:33] *** Joins: pepper_chico (pepper_chi@BE2968B5.6F4A2706.E4090502.IP)
[14:46:42] *** Joins: luziiie (luziie@moz-CD18B14B.customer.cdi.no)
[14:47:58] *** Quits: luz1 (luziie@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[14:48:44] *** Joins: jensnock_ (jensnocker@moz-33279404.customers.ownit.se)
[14:49:03] *** Joins: tmh (e@180B7532.123B3C13.AA32EE5B.IP)
[14:50:15] *** Quits: eddyb (eddy@F8B50789.F33C1089.FB866788.IP) (Ping timeout)
[14:50:29] *** Joins: skade (skade@DD375DFE.A1F06FC5.9532F1CE.IP)
[14:50:37] *** Quits: jensnock_ (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[14:51:16] <kimundi> doomlord_: Heh, once we get the ability to safely share references between tasks a simple parallel update/render loop becomes quite small and readable: https://gist.github.com/Kimundi/8aa40c648972b3b4770a
[14:52:01] *** Joins: skade_ (skade@moz-127E304B.ii.uni.wroc.pl)
[14:52:16] *** Quits: skade (skade@DD375DFE.A1F06FC5.9532F1CE.IP) (Ping timeout)
[14:52:54] <doomlord_> interesting, are there any mechanisms that can fudge it now like unsafe code or shared object primitives
[14:53:23] <doomlord_> would it work if you double buffered at the level of creating too vars and exchanged them between tasks
[14:53:29] *** Quits: imim (imim@A3C43B21.4F3C83C2.D3D614D0.IP) (Ping timeout)
[14:53:48] *** Quits: dlat (dlat@moz-6CE1A4.sickos.org) (Ping timeout)
[14:53:55] *** Quits: doctor (ARealName@moz-9CB48492.nycmny.fios.verizon.net) (Input/output error)
[14:54:31] *** Quits: gregburd (uid3997@moz-E77DEB21.irccloud.com) (Quit: Connection closed for inactivity)
[14:55:15] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[14:55:23] *** Quits: mib_jufmlk (Mibbit@A3C43B21.4F3C83C2.D3D614D0.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:57:06] *** Joins: imim (imim@A3C43B21.4F3C83C2.D3D614D0.IP)
[14:57:49] <krdln> Where is documentation about exporting macros?
[14:59:38] *** Quits: oxum (anonymous@2E07CA23.E5007E99.520CDC98.IP) (Quit: Bye..)
[15:00:05] *** Joins: oxum (anonymous@2E07CA23.E5007E99.520CDC98.IP)
[15:00:39] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[15:00:59] *** Quits: luziiie (luziie@moz-CD18B14B.customer.cdi.no) (Connection reset by peer)
[15:01:11] *** Joins: luziiie (luziie@moz-CD18B14B.customer.cdi.no)
[15:01:22] *** Joins: leeks_ (leeks@moz-362CDC0.fttp.sta.comporium.net)
[15:02:07] *** Quits: anasyrma (x@moz-DE175E38.caltech.edu) (Ping timeout)
[15:02:24] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[15:03:09] *** Joins: anasyrma (x@moz-DE175E38.caltech.edu)
[15:03:13] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[15:03:18] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Client exited)
[15:03:19] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[15:04:55] <kimundi> doomlord_: well, you can write it like this right now by making the reference sharing unsafe
[15:04:56] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[15:05:10] <kimundi> doomlord_: The Share kind PR would enable to write it safely I think
[15:07:00] *** Quits: kimundi (kimundi@moz-4A4AB822.dip0.t-ipconnect.de) (Ping timeout)
[15:07:50] *** Joins: bmu (chatzilla@moz-A87574A6.hsd1.pa.comcast.net)
[15:09:09] *** Joins: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl)
[15:09:39] *** Joins: kimundi (kimundi@moz-DDACA362.dip0.t-ipconnect.de)
[15:09:42] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[15:09:47] *** Joins: skade (skade@DD375DFE.A1F06FC5.9532F1CE.IP)
[15:10:19] *** Quits: mawuli (mawuli@moz-EF4254B1.com.gh) (Ping timeout)
[15:10:39] *** Quits: skade_ (skade@moz-127E304B.ii.uni.wroc.pl) (Ping timeout)
[15:13:38] <Yurume> krdln, for now see the original RFC: https://github.com/mozilla/rust/pull/11151 (ignore #[macro_registrar] part)
[15:14:41] *** kimundi is now known as zz_kimundi
[15:15:12] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[15:15:39] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[15:16:05] *** zz_kimundi is now known as kimundi
[15:16:36] *** Joins: zztr (Thunderbir@moz-CA50D606.dsl.static.sonic.net)
[15:16:36] <kimundi> doomlord_: could you explain what you meant with the last one?
[15:16:55] *** Joins: lpy (lpy@1834E2CB.F09091A8.1348A864.IP)
[15:19:23] *** Joins: erickt (etryzelaar@49C4075F.3AC15C18.2321E71E.IP)
[15:21:26] *** Joins: t (user@moz-FA1D1BF7.fbx.proxad.net)
[15:21:48] *** Quits: greedy (Mibbit@moz-D1A558EC.range86-183.btcentralplus.com) (Quit: http://www.mibbit.com ajax IRC Client)
[15:23:19] *** t is now known as theo
[15:23:32] *** theo is now known as tlaurent
[15:23:39] *** Joins: fyolnish (fyolnish@moz-49396AB9.dynamic.ppp.asahi-net.or.jp)
[15:23:44] *** tlaurent is now known as t
[15:24:08] <leeks_> whats the status with macros? I was going through the tutorial and got this error
[15:24:12] <leeks_> error: macro definitions are not stable enough for use and are subject to change
[15:24:29] *** Parts: imim (imim@A3C43B21.4F3C83C2.D3D614D0.IP) ()
[15:24:38] <kimundi> leeks_: well, that error also tells you how to disable itself
[15:24:42] *** Quits: bmu (chatzilla@moz-A87574A6.hsd1.pa.comcast.net) (Client exited)
[15:24:50] *** Joins: imim (imim@A3C43B21.4F3C83C2.D3D614D0.IP)
[15:25:15] *** t is now known as Theo
[15:25:20] <kimundi> leeks_: Certain language features of Rust need explicit enabling right now, because they might change _or_ are buggy. That way, we remain backwards compatible in the base language.
[15:25:23] <leeks_> kimundi: yeah, should i not worry about it?
[15:25:24] *** Quits: fyolnish (fyolnish@moz-49396AB9.dynamic.ppp.asahi-net.or.jp) (Ping timeout)
[15:25:56] *** Quits: Guest_ (textual@D6B5DD7E.D8252BC.9532F1CE.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[15:26:19] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[15:26:30] <kimundi> leeks_: well if you just want to toy around with the language, and don't mind if something about macros _might_ change in the future, you don't need to worry about it.
[15:33:32] *** Quits: imim (imim@A3C43B21.4F3C83C2.D3D614D0.IP) (Quit: leaving)
[15:34:17] *** flaper87|afk is now known as flaper87
[15:35:26] *** Quits: leowoe (Leo@moz-962CE889.dip0.t-ipconnect.de) (Quit: Leaving.)
[15:36:36] *** Joins: edwardw (edwardw@BB690835.D7DB55D8.50B134B9.IP)
[15:38:15] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[15:38:48] *** Quits: Theo (user@moz-FA1D1BF7.fbx.proxad.net) (Client exited)
[15:39:18] *** Quits: ChrisOei (ChrisOei@moz-30D80888.hsd1.ca.comcast.net) (Ping timeout)
[15:40:18] *** Quits: victorporof (victorporo@moz-FFB76956.cpe.net.cable.rogers.com) (Ping timeout)
[15:41:40] *** Quits: canhtak (canhtak@moz-9F5D2CD3.wl.t.ulaval.ca) (Quit: canhtak)
[15:42:06] *** Joins: ChrisOei (ChrisOei@moz-16B555C1.mycingular.net)
[15:42:49] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[15:43:34] *** Quits: bourbaki (chatzilla@moz-B57DFEE.dip0.t-ipconnect.de) (Ping timeout)
[15:44:38] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[15:47:09] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:47:41] *** Quits: askalski (akuda@2BA4E5A7.CC7751E8.6712E96B.IP) (Quit: Wychodzi)
[15:49:33] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[15:50:18] *** Quits: skade (skade@DD375DFE.A1F06FC5.9532F1CE.IP) (Ping timeout)
[15:52:26] *** Joins: vikstrous (v@moz-4634ED26.cpe.net.cable.rogers.com)
[15:52:32] *** Quits: vikstrous (v@moz-4634ED26.cpe.net.cable.rogers.com) (Max SendQ exceeded)
[15:53:00] *** Joins: vikstrous (v@moz-4634ED26.cpe.net.cable.rogers.com)
[15:53:07] *** Quits: vikstrous (v@moz-4634ED26.cpe.net.cable.rogers.com) (Input/output error)
[15:54:02] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[15:56:07] *** Quits: mihneadb (mihneadb@moz-6B31F5AA.static.ziggozakelijk.nl) (Ping timeout)
[15:58:04] *** Joins: mihneadb (mihneadb@moz-6B31F5AA.static.ziggozakelijk.nl)
[15:58:44] *** Quits: ChrisOei (ChrisOei@moz-16B555C1.mycingular.net) (Ping timeout)
[16:00:27] *** Quits: autra (augustin@moz-BE76895F.fbx.proxad.net) (Ping timeout)
[16:00:30] *** Quits: kris (kris@moz-147EE6DF.diku.dk) (Ping timeout)
[16:01:23] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[16:03:03] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Connection reset by peer)
[16:03:06] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[16:03:44] *** Joins: autra (augustin@moz-BE76895F.fbx.proxad.net)
[16:04:41] *** Quits: mno2 (mno2@moz-3506EAC7.singnet.com.sg) (Quit: mno2)
[16:04:49] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[16:04:54] *** Quits: autra (augustin@moz-BE76895F.fbx.proxad.net) (Quit: by!)
[16:05:02] *** Joins: skade (skade@moz-127E304B.ii.uni.wroc.pl)
[16:05:10] *** Quits: lpy (lpy@1834E2CB.F09091A8.1348A864.IP) (Client exited)
[16:13:33] *** Joins: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net)
[16:13:36] *** Joins: tiffnya (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[16:13:42] *** Quits: luziiie (luziie@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[16:13:54] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Ping timeout)
[16:13:57] *** Joins: telotortium (rmi1@moz-4B394DB7.hsd1.ca.comcast.net)
[16:14:27] *** Joins: luziie (luziie@moz-CD18B14B.customer.cdi.no)
[16:15:29] *** Joins: earlzlap (earlz@moz-483E1E31.neo.res.rr.com)
[16:16:51] <telotortium> So I have a question about the borrow checker.
[16:17:10] *** Joins: tcsc (tcsc@moz-5E71BAD9.hsd1.ma.comcast.net)
[16:17:13] *** Joins: Munchor (munchor@moz-8CFC84AD.yourvserver.net)
[16:17:28] <telotortium> See http://stackoverflow.com/a/22420163/207384 for the context
[16:18:36] *** Quits: erickt (etryzelaar@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[16:18:58] <kimundi> telotortium: what question do you have?
[16:19:23] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Connection reset by peer)
[16:19:43] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[16:19:45] <telotortium> Before some updates to rustc in the past few days, including the merge of the lint deprecating ~[T] in favor of vec_ng, the code in my answer compiled without any complaints.
[16:20:23] <telotortium> However, I tried replacing `~[T]` with vec_ng in my code (specifically, `~[&str] -> Vec<&str>`)
[16:20:49] *** Joins: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com)
[16:21:56] <telotortium> After converting to vec_ng, I get a borrowed value doesn't live long enough error pointing to the start of "lorem" in `str_vec.contains(&"lorem".as_slice())`.
[16:22:31] <kimundi> huh, strange
[16:23:05] <kimundi> doe contains & & "lorem" work?
[16:23:08] <telotortium> I can work around it by assigning `let slice = &"lorem".as_slice();`
[16:23:09] <kimundi> does*
[16:23:19] <telotortium> kimundi: Yes, & & "lorem" works
[16:24:15] *** Joins: Rusky (russell@moz-173BA32C.slkc.qwest.net)
[16:24:21] *** Joins: eddyb (eddy@F8B50789.F33C1089.FB866788.IP)
[16:24:32] *** Joins: alkino_ (alkino@moz-61F150EC.w92-151.abo.wanadoo.fr)
[16:24:34] *** Joins: fyolnish (fyolnish@moz-49396AB9.dynamic.ppp.asahi-net.or.jp)
[16:24:41] <telotortium> It seems like rustc thinks that the slice doesn't live long enough if you try to create it as a function argument.
[16:24:45] <kimundi> Strange - The change from ~[] to Vec<> should not have caused that
[16:25:51] <telotortium> I wasn't sure whether we were already tracking these kinds of borrow errors in a bug.
[16:25:55] *** glaebhoerl_ is now known as glaebhoerl
[16:25:55] *** Quits: Rusky (russell@moz-173BA32C.slkc.qwest.net) (Ping timeout)
[16:26:14] <glaebhoerl> huon | eddyb: ping?
[16:26:24] *** Quits: fyolnish (fyolnish@moz-49396AB9.dynamic.ppp.asahi-net.or.jp) (Ping timeout)
[16:26:32] <eddyb> pong
[16:26:47] *** Joins: canhtak (canhtak@moz-9F5D2CD3.wl.t.ulaval.ca)
[16:28:13] *** Joins: Rusky (russell@moz-173BA32C.slkc.qwest.net)
[16:28:17] <glaebhoerl> eddyb: so w.r.t. vec![], I basically just took the changes huon made in the earlier PR to allow spawn { }, and amended it to also accept []
[16:28:25] <eddyb> did it work?
[16:28:33] <glaebhoerl> but this doesn't appear to have been enough, I still get "expected open delimiter"
[16:28:38] <edwardw> telotortium: probably https://github.com/mozilla/rust/issues/12223
[16:28:39] <glaebhoerl> there's three places this could be coming from :)
[16:29:01] <glaebhoerl> do you happen to know which of parse_{matchers,bottom_expr,macro_use_or_failure} I should also modify?
[16:29:35] *** Joins: kris (kris@moz-6D20263F.fullrate.dk)
[16:29:46] <eddyb> glaebhoerl: the last one, I would think
[16:30:46] <glaebhoerl> eddyb: do we also want to be able to write macro_rules! vec [ ... ], or just vec! [ ... ]?
[16:31:07] <eddyb> glaebhoerl: for starters, just the latter
[16:31:11] <Tobba> is there any way to have a non-blocking Acceptor
[16:31:20] <Tobba> or will I have to do some spawn() crap
[16:31:22] <sp3d> re: above, &("lorem") also works
[16:31:36] *** Quits: jmgrosen (user@1E16529.FD5C31A1.284344F5.IP) (Ping timeout)
[16:31:49] *** Quits: Rusky (russell@moz-173BA32C.slkc.qwest.net) (Client exited)
[16:33:21] *** Joins: Rusky (russell@moz-173BA32C.slkc.qwest.net)
[16:33:46] <glaebhoerl> eddyb: do we have a policy either for or against aligning things nicely? e.g. to make the =>s in a match line up, etc.
[16:33:58] <eddyb> kinda
[16:34:01] *** Joins: erickt (etryzelaar@49C4075F.3AC15C18.2321E71E.IP)
[16:34:13] <glaebhoerl> kinda for or kinda against? :-)
[16:34:18] *** Quits: zztr (Thunderbir@moz-CA50D606.dsl.static.sonic.net) (Quit: zztr)
[16:34:27] <eddyb> glaebhoerl: for. just don't go overboard refactoring things out of scope ;)
[16:34:34] <glaebhoerl> ok, cool
[16:34:43] <Tobba> I guess I could just do some green-thread madness
[16:34:50] <Tobba> but the performance would be full apache
[16:34:55] <glaebhoerl> not going to, just if I'm rewriting something anyways, I want to make it look nice
[16:34:57] <eddyb> haha
[16:35:06] <eddyb> Tobba: what'ya cooking?
[16:35:16] <Tobba> trying to do non-blocking TCP
[16:35:25] <Tobba> I thought that was a thing but apparently not
[16:36:28] <Tobba> although, the blocking method IS easier
[16:36:36] <Tobba> but its probably a lot slower
[16:37:40] <kimundi> Tobba: Well the idea is for the blocking version to not be slow in general, or else there wouldn't be much reason to support it.
[16:37:44] *** Joins: jviereck (Adium@moz-DA799011.dclient.hispeed.ch)
[16:37:57] <Tobba> blocking always tends to be slower, but easier
[16:38:02] <Tobba> in my experience, anyways
[16:38:37] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[16:40:15] <Matthias247> Tobba: generally it's faster, because it takes less syscalls. However if you have a lot of connections it gets slower. And if you do it like rust and simulate blocking IO over nonblocking IO it's the slowest
[16:40:34] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[16:40:50] <Tobba> it takes less syscalls but you need some form of thread for each connection
[16:41:01] <Tobba> living proof that its a shit idea is basicaly apache, but yeah
[16:41:10] <eddyb> do you?
[16:41:17] <Matthias247> yes, it takes an extra thread
[16:41:17] <eddyb> can't you have a pool of workers?
[16:41:34] <eddyb> and scale that according to your needs?
[16:41:42] <Matthias247> it simply depends on your number of clients.
[16:41:47] <Tobba> as long as nobody is sending any data
[16:41:50] <Tobba> you need as many threads as clients
[16:41:52] <Tobba> which is kinda awful
[16:42:05] <eddyb> async on one thread would be a worker pool of just 1 thread
[16:42:14] <eddyb> then you can only scale up
[16:42:21] <Tobba> yeah but rust io isnt async
[16:42:24] <Tobba> theres no support for it at all
[16:42:36] <Matthias247> if you use green threads it's async under the hood
[16:42:49] <eddyb> Tobba: well... sockets are cloneable for a reason now
[16:43:00] <Tobba> oh, huh?
[16:43:13] <eddyb> have been for like a month
[16:43:17] *** Joins: ChrisOei (ChrisOei@moz-30D80888.hsd1.ca.comcast.net)
[16:43:35] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[16:43:36] <doomlord_> kimundi, r.e. last post -if you didn't create a single object holding a doublebuffer -could you manually create 2 vars front, back and exchange them between tasks/share where applicable
[16:43:45] <eddyb> Tobba: pretty sure we did that (or something else) to support splitting the receiver/sender ends and other such things
[16:43:46] <Tobba> doesnt really help too much heree
[16:43:50] <Tobba> except for split sender/reader
[16:43:54] <Tobba> yeah
[16:43:58] <Tobba> I guess its do-able then, but still ugh
[16:43:59] <Tobba> oh well
[16:44:02] <Matthias247> they are broken anyway
[16:44:05] <eddyb> Matthias247: :(
[16:44:06] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[16:44:14] <Tobba> obviously
[16:44:15] <doomlord_> (redner and update tasks need immutable 'back' , update task needs mutable front)
[16:44:19] *** Joins: valentin (Thunderbir@9A1975C1.39CE2EE.E400A05F.IP)
[16:44:20] <eddyb> can't we just... fix them?
[16:44:40] <Matthias247> I talked about that more than once...
[16:44:48] <kimundi> doomlord_: the pattern in that code snippet does not depend on them being grouped in a common struct - it should work for any pair of &T and &mut T
[16:45:18] <kimundi> doomlord_: However, I can't guarantee that the pattern actually works - I have written no code, and the neccessary Share kind doesn't exits yet :)
[16:45:18] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[16:45:35] *** Joins: Mathieu (cicak@7B7B7C8D.8F79F0B0.9900354A.IP)
[16:46:09] *** Quits: tiffnya (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Ping timeout)
[16:46:13] *** Quits: tgkokk (tgkokk@moz-88CCC929.home.otenet.gr) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[16:46:50] <Tobba> also, how would I declare a lifetime that lasts for the scope of a closure
[16:47:11] <eddyb> 'a |...| -> ...
[16:47:22] *** Quits: telotortium (rmi1@moz-4B394DB7.hsd1.ca.comcast.net) (Quit: telotortium)
[16:47:23] <Tobba> I tried
[16:47:24] <Tobba> on_connect: 'b |&'b ServerClient|,
[16:47:29] <Tobba> but it didnt approve too much of that
[16:47:36] <eddyb> how would that work?
[16:47:37] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[16:47:37] <doomlord_> is there a way to fudge it with some unsafe accessor functions
[16:47:53] <kimundi> doomlord_: define fudge. :)
[16:47:55] <eddyb> Tobba: i.e. how could you give the closure something that it borrowed?
[16:47:57] <Tobba> eddyb: trying to make it so the client is valid as long as its inside that call
[16:48:14] <eddyb> ah just make it anon
[16:48:16] <doomlord_> stuff the front/back pointers into global mutables and and wrap some unsafe code to reaquire those pointers at other points in the code
[16:48:25] <eddyb> Tobba: does &ServerClient work?
[16:48:31] <Tobba> of course not
[16:48:40] *** Joins: luziiie (luziie@moz-CD18B14B.customer.cdi.no)
[16:48:40] <Tobba> thats the first thing I tried
[16:48:47] <eddyb> Tobba: okay then, you need a HKToL closure
[16:48:48] <kimundi> doomlord_: you can just write it like this, but accepting any &T and &mut T - it would be unsafe if the T is not threadsafe through a &T, but the functionality is certainly writeable now
[16:48:50] <doomlord_> get_back()->&State { unsafe { g_back } } 
[16:49:11] <eddyb> Tobba: <'x> |&'x ServerClient|
[16:49:17] <kimundi> Whats missing is just the ability to generically define it with a safe interface
[16:49:20] <eddyb> Tobba: that's pretty much anonymous
[16:49:23] *** Quits: luziie (luziie@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[16:49:29] <eddyb> (yay type lambdas)
[16:49:29] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[16:49:30] *** Quits: Diamond (dick@moz-80556682.ks.ks.cox.net) (Ping timeout)
[16:49:30] *** Joins: jensnock_ (jensnocker@moz-33279404.customers.ownit.se)
[16:49:58] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Ping timeout)
[16:50:02] <kimundi> doomlord_: what would that get_back() do? Or rather, in what context would you call it?
[16:50:17] <eddyb> Tobba: note that the parser is somewhat broken
[16:50:17] <Tobba> eddyb: wait, the <'x> part where?
[16:50:31] <Tobba> on the struct doesnt make sense and it doesnt work if I just put it before the closure
[16:50:32] <eddyb> Tobba: try it before or after the lifetime of the closure itself
[16:50:49] *** Quits: erickt (etryzelaar@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[16:51:03] <Tobba> my bet was |&'x ServerClient|<'x>, but that didnt work
[16:51:10] <eddyb> before the closure
[16:51:15] <eddyb> it's a type lambda ;)
[16:51:18] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[16:51:20] *** Quits: jensnock_ (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[16:51:33] <Tobba> on_connect: <'x>|&'x ServerClient|, just complains about a missing lifetime specifier
[16:51:42] *** Joins: zztr (Thunderbir@moz-CA50D606.dsl.static.sonic.net)
[16:51:43] <eddyb> Tobba: you also need the lifetime of the closure
[16:51:54] <eddyb> try 'b <'x> and <'x> 'b
[16:52:03] *** Joins: steffenomak (steffenoma@moz-FB0A4BEB.student.uu.se)
[16:52:10] <Tobba> ah, yeah
[16:52:18] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Quit: 전 이만 갑니다.)
[16:54:09] *** Joins: Guest_ (textual@D6B5DD7E.D8252BC.9532F1CE.IP)
[16:54:19] *** Joins: cgaebel (clark@moz-F9D89110.nyc.res.rr.com)
[16:54:36] *** Joins: telotortium (rmi1@moz-4B394DB7.hsd1.ca.comcast.net)
[16:55:27] *** Quits: hdevalence (quassel@moz-D125A39F.home3.cgocable.net) (Client exited)
[16:55:48] *** Quits: Kxepal (Miranda@moz-6EBC5369.pppoe.mtu-net.ru) (Ping timeout)
[16:55:58] *** Quits: Guest_ (textual@D6B5DD7E.D8252BC.9532F1CE.IP) (Ping timeout)
[16:56:19] *** Quits: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net) (Ping timeout)
[16:56:39] <telotortium> edwardw: I don't know about https://github.com/mozilla/rust/issues/12223 - that bug seems like it's related to unsoundness, whereas the compiler reject my code.
[16:57:10] <edwardw> telotortium: ah I see
[16:58:11] *** Joins: Kxepal (Miranda@moz-253D3FA5.pppoe.mtu-net.ru)
[16:58:26] <telotortium> The issue is why the borrow of the result `.as_slice()` works with old vec but not with vec_ng
[16:58:38] <Tobba> eddyb: just gotta figure out how to pass this closure as an argument to this function now
[16:58:45] <Tobba> pub fn open(port: u16, on_connect: |&ServerClient|) -> Option<ServerSocket> {
[16:58:53] *** Joins: Diamond (dick@moz-80556682.ks.ks.cox.net)
[16:58:58] <Tobba> it might not like it because ServerSocket is gonna end up being cloned all over
[16:59:07] <Tobba> so I should probably make that an Rc
[16:59:27] *** Quits: angdev (angdev@16F167B.4C57D258.D8E8354F.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[16:59:45] *** Joins: andrewd18 (andrew@moz-DAC9D29F.wi.res.rr.com)
[17:00:33] *** Quits: Blub\1 (wry@620605B3.71150E1A.237AE2BA.IP) (Ping timeout)
[17:00:45] *** Joins: Blub\1 (wry@620605B3.71150E1A.237AE2BA.IP)
[17:01:43] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Input/output error)
[17:02:23] *** Quits: valentin (Thunderbir@9A1975C1.39CE2EE.E400A05F.IP) (Ping timeout)
[17:03:36] *** Joins: leowoe (Leo@moz-962CE889.dip0.t-ipconnect.de)
[17:03:47] *** Joins: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP)
[17:03:49] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[17:03:55] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[17:04:51] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[17:04:59] <Tobba> I need to...
[17:05:14] <Tobba> ugh, I need the closure somehow moved into the ServerSocket when its constructed
[17:05:33] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[17:05:51] *** Quits: Diamond (dick@moz-80556682.ks.ks.cox.net) (Ping timeout)
[17:07:59] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[17:08:20] *** Quits: mindcat_ (mindcat@F32E3B11.297EFC2A.57E3C596.IP) (Quit: Lost terminal)
[17:08:44] <Tobba> so I cant tack on a lifetime because it needs to be inferred when its moved but it *really* doesnt like that
[17:09:08] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[17:09:27] <eddyb> Tobba: what does your code look like?
[17:09:42] <Matthias247> Tobba: you wanna do callbacks with Rust? It's unfortunatly super-hard :(
[17:10:12] <Tobba> eddyb: http://pastebin.com/qmFm8qWL
[17:10:47] <Tobba> its also giving me this gem
[17:10:48] <Tobba> serversocket.rs:24:3: 26:7 note: ...so that types are compatible (expected `std::option::Option<std::rc::Rc<std::cell::RefCell<serversocket::ServerSocket<>>>>` but found `std::option::Option<std::rc::Rc<std::cell::RefCell<serversocket::ServerSocket<>>>>`)
[17:10:57] <eddyb> haha
[17:11:04] <Tobba> (they're the exact same, I checked)
[17:11:13] <eddyb> Tobba: you need to link the 'a
[17:11:18] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Connection reset by peer)
[17:11:28] <eddyb> it's a bug that we allow anon lifetimes in the return types
[17:11:29] <Tobba> ah yes
[17:11:44] <eddyb> pub fn open(port: u16, on_connect: 'a |&ServerClient|) -> Option<Rc<RefCell<ServerSocket<'a>>>> {
[17:12:03] <Tobba> yep that did it, thanks
[17:12:04] <eddyb> no need to be generic because the impl is already generic
[17:12:39] <eddyb> Tobba: you can check that it can't store the ServerClient outside the closure
[17:12:52] <eddyb> but I'm pretty sure it works
[17:14:03] *** Joins: Guest_ (textual@D6B5DD7E.D8252BC.9532F1CE.IP)
[17:14:34] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[17:16:08] <Tobba> now I just have to get it to move thte acceptor into that proc()
[17:16:21] <Tobba> which should work off the bat but it complains about mutability somehow (I made acceptor mutable)
[17:17:05] *** Joins: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net)
[17:17:22] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[17:17:22] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[17:18:37] <Tobba> ugh what
[17:18:43] <Tobba> it works if I just copy it to another variable
[17:18:49] <eddyb> hehe
[17:18:53] <eddyb> capture issues?
[17:19:01] <Tobba> let mut acceptor = _acceptor;
[17:19:04] <Tobba> match acceptor.accept() {
[17:19:05] <Tobba> works
[17:19:13] <Tobba> but match _acceptor.accept() { doesnt
[17:19:18] <eddyb> is _acceptor mutable?
[17:19:26] <eddyb> where is it from?
[17:19:36] <Tobba> mutable, its from outside the proc()
[17:19:39] <Tobba> its not used anywhere else
[17:19:41] <eddyb> you can't have that
[17:19:49] <eddyb> because that means it mutates the original stack location
[17:19:59] <Tobba> I was expecting it to move it
[17:20:01] <eddyb> it has to be mutable inside the proc
[17:20:07] <eddyb> not outside it
[17:20:09] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[17:20:16] <Tobba> yeah, I cant create it inside it
[17:20:19] <Tobba> so I have to copy it around, oh well
[17:20:25] <eddyb> Tobba: it's not obvious that a mutable capture is a move, basically
[17:21:17] <eddyb> (and if it's a move, it's not obvious that it becomes mutable inside the proc)
[17:21:37] <eddyb> let mut acceptor = acceptor; // is "thawing" and I kinda like the name reuse
[17:21:56] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[17:22:02] <Tobba> you can do that?
[17:22:10] <Tobba> neat
[17:22:17] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[17:22:56] <eddyb> Tobba: unlike other languages (looking at you, JS), the names in the RHS of a `let` statement refer to previous bindings not "current" ones
[17:23:15] <eddyb> it actually makes sense given that "current" bindings are uninitialized and Rust doesn't allow that
[17:23:17] *** Joins: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net)
[17:23:47] *** Joins: quux00 (uid24415@moz-E77DEB21.irccloud.com)
[17:24:54] *** Joins: Matrixiumn (zack@moz-1B22AAE2.net)
[17:24:55] *** Joins: valentin (Thunderbir@9A1975C1.39CE2EE.E400A05F.IP)
[17:25:01] *** Quits: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net) (Ping timeout)
[17:25:17] <Tobba> now to fix the problem that it stopped receiving connections properly
[17:25:27] *** Quits: Guest_ (textual@D6B5DD7E.D8252BC.9532F1CE.IP) (Ping timeout)
[17:25:28] *** Joins: fyolnish (fyolnish@moz-49396AB9.dynamic.ppp.asahi-net.or.jp)
[17:25:28] <Matrixiumn> Hello, what version number (should) Rust be production ready?
[17:25:39] <eddyb> 1.0
[17:25:50] <eddyb> but people are already using it in production
[17:26:07] <Tobba> <-
[17:26:37] *** Quits: valentin (Thunderbir@9A1975C1.39CE2EE.E400A05F.IP) (Ping timeout)
[17:26:44] <Matrixiumn> Okay. :(
[17:26:45] <Tobba> well there we go
[17:26:49] *** Joins: valentin (Thunderbir@9A1975C1.39CE2EE.E400A05F.IP)
[17:26:58] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[17:27:01] * Matrixiumn got excited when he thought it was 0.10
[17:27:15] *** Quits: fyolnish (fyolnish@moz-49396AB9.dynamic.ppp.asahi-net.or.jp) (Ping timeout)
[17:27:26] *** Quits: cgaebel (clark@moz-F9D89110.nyc.res.rr.com) (Ping timeout)
[17:27:27] <eddyb> Matrixiumn: the only issue is that you might have to update your code, let's say, every two weeks
[17:27:39] <eddyb> 1.0 ensures the language doesn't change
[17:27:43] <Matrixiumn> Yeah, I suppose. :P
[17:28:01] <Matrixiumn> I would ask for the ETA, but that probably doesn't exist. :P
[17:28:11] <eddyb> when it's ready
[17:28:19] <Matrixiumn> Heh :P
[17:28:21] <Matrixiumn> Okay, thanks. :)
[17:28:46] *** Quits: telotortium (rmi1@moz-4B394DB7.hsd1.ca.comcast.net) (Quit: telotortium)
[17:28:47] *** Quits: mr_pants (Mibbit@4176886A.394FC55A.2862F179.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[17:29:27] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[17:29:58] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Client exited)
[17:29:59] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[17:30:43] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Client exited)
[17:31:03] <NiccosSystem> How would I handle a VarInt from a network connection?
[17:31:05] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[17:31:26] *** Quits: Mathieu (cicak@7B7B7C8D.8F79F0B0.9900354A.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[17:32:26] *** Joins: cgaebel (clark@moz-F9D89110.nyc.res.rr.com)
[17:32:56] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[17:34:26] *** Joins: libergeekingkid (quassel@3A04804B.FC904FC6.E02377B3.IP)
[17:34:38] *** Joins: Guest_ (textual@D6B5DD7E.D8252BC.9532F1CE.IP)
[17:34:39] *** Joins: luziie (luziie@moz-CD18B14B.customer.cdi.no)
[17:35:25] *** Quits: luziiie (luziie@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[17:36:07] *** Quits: leeks (leeks@moz-362CDC0.fttp.sta.comporium.net) (Quit: Bye)
[17:36:10] *** Joins: leeks (leeks@moz-362CDC0.fttp.sta.comporium.net)
[17:36:24] *** Quits: leeks (leeks@moz-362CDC0.fttp.sta.comporium.net) (Quit: Bye)
[17:36:34] *** Quits: leowoe (Leo@moz-962CE889.dip0.t-ipconnect.de) (Quit: Leaving.)
[17:36:41] *** Joins: Blei (Philipp@moz-B2F9E4BD.cust.bluewin.ch)
[17:36:54] *** Joins: janra (Janus@1CDC5701.A48867D7.52E4E107.IP)
[17:36:58] *** Joins: jaras2 (Janus@1CDC5701.A48867D7.52E4E107.IP)
[17:37:05] *** Quits: jaras2 (Janus@1CDC5701.A48867D7.52E4E107.IP) (Client exited)
[17:37:31] *** Quits: valentin (Thunderbir@9A1975C1.39CE2EE.E400A05F.IP) (Ping timeout)
[17:38:21] *** Quits: cgaebel (clark@moz-F9D89110.nyc.res.rr.com) (Ping timeout)
[17:40:34] *** Quits: StarLight (StarLight@moz-A3237B0B.pppoe.avangarddsl.ru) (Ping timeout)
[17:42:54] *** Quits: skade (skade@moz-127E304B.ii.uni.wroc.pl) (No route to host)
[17:44:54] *** Joins: StarLight (StarLight@moz-2554AC97.dynamic.avangarddsl.ru)
[17:46:36] *** Joins: cgaebel (clark@moz-F9D89110.nyc.res.rr.com)
[17:47:19] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[17:49:22] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[17:51:14] <SiegeLord> Hmm... hopefully the ~[] won't get deprecated until all the sugar gets implemented
[17:51:38] *** Joins: Rufflewind (rf@moz-4556AD29.lightspeed.lnngmi.sbcglobal.net)
[17:51:43] <SiegeLord> Also I wish you could namespace macros
[17:51:53] <SiegeLord> I already had a vec! macro :'(
[17:51:54] *** Joins: erickt (etryzelaar@49C4075F.3AC15C18.2321E71E.IP)
[17:52:49] <SiegeLord> I wonder if it's possible to have a generic to/from() function
[17:52:53] <Yurume> SiegeLord, in fact, almost all occurrences of ~[] in the stdlib haven't been replaced, and any use of them triggers an warning
[17:53:01] <Yurume> e.g. std::os::args
[17:53:10] <SiegeLord> To convert between various pairs of types
[17:53:42] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[17:53:46] <SiegeLord> So you'd do: let a: Vec<_> = to([1, 2, 3])
[17:54:03] <eddyb> make "as" do that
[17:54:10] <SiegeLord> Or from()
[17:54:16] *** Quits: ChrisOei (ChrisOei@moz-30D80888.hsd1.ca.comcast.net) (Client exited)
[17:54:25] <eddyb> SiegeLord: there are issues with the current inference though
[17:54:52] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[17:54:53] *** Joins: telotortium (rmi1@moz-4B394DB7.hsd1.ca.comcast.net)
[17:54:56] <SiegeLord> vec! isn't too bad either, it's just the fact that it's not namespaced, heh
[17:55:10] <SiegeLord> Given that nothing stopped compiling, I think my macro overrides Rust's
[17:55:23] <SiegeLord> Or shadows, who knows how those things work
[17:55:33] <eddyb> SiegeLord: https://github.com/mozilla/rust/issues/12909#issuecomment-37723705
[17:55:36] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[17:56:11] <SiegeLord> Oh that's just sad
[17:56:30] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[17:56:47] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[17:57:29] <eddyb> SiegeLord: I don't know how HM mixes (in theory) with the HKT transform in type classes
[18:00:42] *** Joins: WalrusPony1 (retep998@moz-DBA66FA0.bstnma.east.verizon.net)
[18:01:03] *** Quits: WalrusPony (retep998@moz-DBA66FA0.bstnma.east.verizon.net) (Ping timeout)
[18:04:35] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[18:04:50] *** Quits: Ralith (ralith@114DA04D.CD83ED0A.BCDF04A6.IP) (Ping timeout)
[18:06:16] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[18:08:03] *** Quits: murph (murph@moz-A933BAE1.oracle.com) (Broken pipe)
[18:08:14] *** Joins: murph (murph@moz-A933BAE1.oracle.com)
[18:09:11] *** Quits: libergeekingkid (quassel@3A04804B.FC904FC6.E02377B3.IP) (Connection reset by peer)
[18:09:34] *** Joins: askalski (akuda@2BA4E5A7.CC7751E8.6712E96B.IP)
[18:09:57] *** Quits: patpat (patpat@moz-1599AAE4.as13285.net) (Quit: )
[18:09:58] *** Joins: evanm (evanm@moz-4D6F9A00.hsd1.ca.comcast.net)
[18:09:59] *** Joins: intuxicated (intuxicate@5BA9DB47.F2F0EDE4.DA0107E2.IP)
[18:11:14] *** Joins: brandonson (SingingBoy@610D90A5.EE9B234.1ECA502.IP)
[18:11:15] *** Joins: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net)
[18:11:16] *** Quits: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net) (Input/output error)
[18:11:22] *** Joins: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net)
[18:15:19] *** Joins: Diamond (dick@moz-80556682.ks.ks.cox.net)
[18:16:36] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[18:17:16] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[18:18:40] *** Quits: ganitsu (ganitsu@moz-7CE60945.dialup.adsl.anteldata.net.uy) (Quit: WeeChat 0.4.3)
[18:19:22] *** Joins: dymk (dymk@C94BAFB1.AA444DA9.3FBA778E.IP)
[18:20:32] *** Quits: dymk (dymk@C94BAFB1.AA444DA9.3FBA778E.IP) (Quit: Byebye!)
[18:21:37] *** Joins: mib_fg05pc (Mibbit@7E217F04.2C8DBE39.CC1A2609.IP)
[18:22:28] *** Joins: skade (skade@moz-A04BC22E.adsl.inetia.pl)
[18:24:14] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[18:24:23] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[18:26:24] *** Joins: fyolnish (fyolnish@moz-49396AB9.dynamic.ppp.asahi-net.or.jp)
[18:26:54] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[18:27:06] *** Quits: telotortium (rmi1@moz-4B394DB7.hsd1.ca.comcast.net) (Quit: telotortium)
[18:27:19] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Quit: Leaving...)
[18:28:07] *** Quits: fyolnish (fyolnish@moz-49396AB9.dynamic.ppp.asahi-net.or.jp) (Ping timeout)
[18:31:09] *** Quits: skade (skade@moz-A04BC22E.adsl.inetia.pl) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[18:31:20] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[18:31:28] *** Joins: bollu_ (bollu@31CCE710.7065DDB9.6D6A344F.IP)
[18:31:28] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[18:31:50] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[18:32:24] <Tobba> trying to copy Rc's inside of a proc
[18:32:27] <Tobba> I cant say this is going well
[18:32:52] <kimundi> Tobba: whats going wrong?
[18:32:57] <Tobba> well
[18:33:01] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[18:33:04] <Tobba> I dont think I can pass args with spawn() can I
[18:33:11] *** Quits: mib_fg05pc (Mibbit@7E217F04.2C8DBE39.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[18:33:12] <Tobba> Rc isnt Send
[18:33:21] <Tobba> so I cant copy it across the closure bounds
[18:33:28] <kimundi> right, can't send a Rc between tasks
[18:33:29] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[18:33:35] <eddyb> Tobba: you need an Arc
[18:33:38] <kimundi> Need Arc or RwArc for that
[18:33:43] <Tobba> ah, right
[18:33:43] <eddyb> Tobba: if the interior is mutable, RWArc
[18:33:51] <Tobba> yeah the interior is mutable
[18:33:59] <eddyb> oh and you can't put a stack closure in an Arc
[18:34:03] <Tobba> I'm using a RefCell though, doesnt that do the safety?
[18:34:09] <eddyb> RefCell isn't thread-safe
[18:34:12] <Tobba> oh
[18:34:14] <Tobba> I thought it was
[18:34:15] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[18:34:15] <sfackler> neither is Rc
[18:34:22] <sfackler> Arc stands for *atomically* reference counted
[18:34:23] <eddyb> Tobba: they are not atomic because cheap
[18:34:33] <Tobba> o
[18:34:41] <eddyb> also, RwLock (what RWARc uses) is not exactly an atomic RefCell
[18:34:42] <Tobba> yeah this is why I wanted to avoid a snakes nest of green tasks
[18:34:53] <eddyb> it blocks instead of failing
[18:35:20] <Tobba> uh, I cant find Arc inside the master docs at all
[18:35:26] <eddyb> libsync
[18:35:33] <Tobba> ah
[18:35:47] <sfackler> we really need a universal docs search
[18:37:18] <Tobba> at least with an Arc it hopefully wont look like this shit server.borrow().borrow_mut().get().clients.push(client.clone());
[18:37:43] <eddyb> that doesn't compiler on master though
[18:37:45] <sfackler> Tobba: you don't need to do that anymore
[18:37:51] <sfackler> autoderef's here!
[18:37:55] <eddyb> server.borrow_mut().clients.push(client.clone())
[18:37:56] <Tobba> I need to update
[18:37:58] <Tobba> excellent
[18:37:58] <sfackler> server.borrow_mut().clients_push()
[18:37:59] <sfackler> efb
[18:38:03] <eddyb> sfackler: s/don't need/can't/
[18:38:11] <eddyb> sfackler: borrow on Rc is already gone
[18:38:19] <eddyb> next snapshot we remove get on Ref and RefMut
[18:38:21] <sfackler> you *could* call deref manually if you wanted (maybe?) :P
[18:38:34] <eddyb> oh yeah that's what we do until the snapshot for Rc
[18:38:40] <eddyb> or &*x
[18:38:46] <bollu_> kimundi: ping
[18:38:54] <eddyb> (that's equivalent to calling deref yourself)
[18:38:57] <kimundi> bollu_: pong
[18:39:07] *** Joins: mib_jkryja (Mibbit@moz-B3033B78.dynamic.jazztel.es)
[18:39:28] <bollu_> kimundi: could you send the gist again? of the double buffer?
[18:39:29] *** Quits: mib_jkryja (Mibbit@moz-B3033B78.dynamic.jazztel.es) (Quit: http://www.mibbit.com ajax IRC Client)
[18:39:34] *** Quits: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net) (Input/output error)
[18:39:36] <kimundi> bollu_: https://gist.github.com/Kimundi/8aa40c648972b3b4770a
[18:40:00] *** Joins: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net)
[18:40:05] <bollu_> kimundi: thanks :)
[18:40:12] *** Joins: skade (skade@moz-A04BC22E.adsl.inetia.pl)
[18:40:16] *** Quits: askalski (akuda@2BA4E5A7.CC7751E8.6712E96B.IP) (Quit: Wychodzi)
[18:40:18] <kimundi> bollu_: Thats how I could imagine it working with references and the Share kind which still needs to land in master
[18:40:19] *** Quits: alkino_ (alkino@moz-61F150EC.w92-151.abo.wanadoo.fr) (Ping timeout)
[18:40:20] <mcpherrin> _5
[18:40:33] <bollu_> kimundi:  let DoubleBuffer{ ref back, ref mut front} = *self; <- the DoubleBuffer created is annonymous right?
[18:40:46] *** Joins: Rym (y@3138B97C.86D1DEDD.51C6DE68.IP)
[18:40:48] <kimundi> bollu_: That is pattern matching
[18:41:01] <eddyb> it's not creating, it's destructuring
[18:41:07] <eddyb> i.e. unpacking
[18:41:14] <kimundi> bollu_: that creates two local variables back and front
[18:41:29] <bollu_> kimundi, eddyb:ah, I see.
[18:41:33] <eddyb> that are references to self.back and self.front
[18:41:46] *** Quits: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net) (Ping timeout)
[18:41:47] <bollu_> eddyb: understood
[18:42:13] <kimundi> I create them that way because otherwise you could not create a immutable reference to one part of the struct, and a mutable one to another part of the struct
[18:42:27] <kimundi> need to create them at the same time
[18:42:37] <bollu_> kimundi: front.clone_from(back); <- why?
[18:42:43] <bollu_> front = back ?
[18:42:56] <kimundi> bollu_: Well, you need to clone it.
[18:42:57] <bollu_> won't be allowed cause it's been referenced elsewhere?
[18:43:38] <kimundi> bollu_: front = back.clone() is what is happening here, but with clone_from you can in theory make the clone more efficient
[18:43:49] <bollu_> kimundi: ah
[18:43:52] <kimundi> bollu_: Won't be allowed because it would move
[18:44:00] <bollu_> kimundi: hm, good to know
[18:44:16] <kimundi> it would move back out of the struct, which would invalidate the struct
[18:44:22] *** Joins: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP)
[18:44:30] <kimundi> move `back` out of the struct, that is
[18:44:50] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[18:44:54] *** Quits: evanm (evanm@moz-4D6F9A00.hsd1.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[18:45:09] <Tobba> is there anything specific you have to smack in an RWArc?
[18:45:15] <bollu_> kimundi: I think I get it.
[18:45:16] <Tobba> it says my struct doesnt satisfy Freeze
[18:45:35] <eddyb> what do you have in it?
[18:45:51] <Tobba> pretty simple struct
[18:45:58] <eddyb> the types matter
[18:46:21] <kimundi> specifically, whether the types are Freeze themself matter
[18:46:23] <Tobba> would it be a problem if it contained more Arc's
[18:46:25] *** Joins: Ralith (ralith@114DA04D.CD83ED0A.BCDF04A6.IP)
[18:46:59] <kimundi> It shouldn't, unless Arcs are weirder then I remember
[18:47:08] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[18:47:12] <Tobba> or to be more correct, if it contained more RWArcs
[18:47:12] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Input/output error)
[18:47:19] <eddyb> hmm
[18:47:24] <Tobba> the struct is just pub struct ServerSocket {
[18:47:24] <Tobba>  clients: ~[RWArc<ServerClient>] } right now
[18:47:24] <bollu_> Tobba: A gist or something would help I think?
[18:47:28] <eddyb> RWArc is Send and Share, but not Freeze
[18:47:35] <Tobba> well fuck
[18:47:37] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Quit: csherratt)
[18:47:49] <kimundi> eddyb: But Share hasn'T landed yet, right?
[18:47:56] <eddyb> Tobba: you'll have to wait for Share (flaper87 is working on that AFAIK)
[18:48:11] <eddyb> it's tricky stuff
[18:48:24] <flaper87> eddyb: right, it's actually done but I just found out I broke atomics :P
[18:48:33] <flaper87> so, once I fix that, it'll be ready to review / land
[18:48:37] <kimundi> Tobba: If it makes you glad, the whole kind system is apparently being overhauled. So RWArc not being Freeze doesn'T matter, because Freeze will cease to exists in its current form
[18:49:20] <kimundi> flaper87: Does "Share" allow for fork-and-join parallelism with references?
[18:49:32] <flaper87> kimundi: yeah
[18:49:34] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[18:49:41] <eddyb> even stack references, as long as you can have a hierarchy of tasks
[18:49:46] <o11c> flaper87: "broke atomics" - didn't know Rust was in the business of creating nuclear bombs
[18:50:00] <flaper87> Until opt-in kinds arrive, all types are considered Sharable unless you opt-out
[18:50:03] <Tobba> nuclear bomb running rust
[18:50:16] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[18:50:17] <kimundi> flaper87: Heh, sounds kinda unsafe ;)
[18:50:25] <flaper87> kimundi: it allows for fork-and-join, you just need to make sure the types are indeed sharable yourself :P
[18:50:30] <Tobba> actually
[18:50:31] <flaper87> kimundi: yeah, it is :D
[18:50:38] <Tobba> would rust running on a nuclear bomb satisfy rusts safety rules
[18:50:39] <flaper87> o11c: lol
[18:50:40] <Tobba> that seems a bit wonky
[18:50:44] <kimundi> SO, it basically just the trait for nw, without the guarantees
[18:50:55] *** Quits: MrByte (Dartakio@moz-81792842.chy-wy.client.bresnan.net) (Ping timeout)
[18:50:59] <Tobba> does a function that destroys the processor really count as safe?
[18:51:00] <o11c> hm, don't some language forbid use with nuclear materials? Java I think? Isn't that incompatible with the GPL, so it's impossible to write GPL code in those languages?
[18:52:01] <kimundi> o11c: Luckily we don't have any GPL restrictions
[18:52:03] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[18:52:06] <Tobba> good 'ol license trolling
[18:52:13] <kimundi> Well, I say lucky
[18:52:26] <kimundi> That also means we can'T use ICU :P
[18:52:32] <o11c> kimundi: I'm aware that not everybody chooses the GPL, but it's still important to be *compatible* with it
[18:52:42] <kimundi> ah, otherway round?
[18:52:46] *** Joins: MrByte (Dartakio@moz-81792842.chy-wy.client.bresnan.net)
[18:53:05] <Tobba> though I basicaly cant make this code work until this is fixed
[18:53:06] <Tobba> so ugh
[18:53:21] <Tobba> this is why you dont use rust for stuff that has to work (yet)
[18:53:23] *** Quits: mihneadb (mihneadb@moz-6B31F5AA.static.ziggozakelijk.nl) (Quit: Computer gone to sleep - Zzzz...)
[18:53:26] *** Quits: chridou (chatzilla@moz-6535DCD5.dip0.t-ipconnect.de) (Quit: ChatZilla 0.9.90.1 [Firefox 27.0.1/20140214013806])
[18:53:48] *** Joins: bourbaki (chatzilla@moz-15AE9852.dip0.t-ipconnect.de)
[18:54:05] <bourbaki> Greetings
[18:54:19] <eddyb> Tobba: at least it should just be a few days away
[18:54:23] <bourbaki> One thing that would be really cool was if you guys could add examples for errors and how to fix them
[18:54:25] *** Joins: evanm (evanm@moz-4D6F9A00.hsd1.ca.comcast.net)
[18:54:26] <Tobba> still
[18:54:30] *** Quits: Guest_ (textual@D6B5DD7E.D8252BC.9532F1CE.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[18:54:33] <Tobba> I was hoping to get this done today
[18:54:45] <Tobba> its just a layer to sit between some closed source really badly written stuff and the clients
[18:55:12] <mcpherrin> bourbaki: there was an idea to have each error messgae in the compiler link to a documentation page 
[18:55:28] <mcpherrin> with examples of how to cause and fix the error
[18:55:32] *** Joins: telotortium (rmi1@moz-4B394DB7.hsd1.ca.comcast.net)
[18:55:35] <bourbaki> That would be awesome.
[18:55:54] <mcpherrin> Actually maybe i will do that tomorrow at the docathon
[18:55:54] <bourbaki> I mean once you are familiar with the lingo and all its not necessary.
[18:56:11] <bourbaki> Cool :)
[18:56:13] *** Joins: sourab (jnu@B98CE8F3.60498BB1.A74A2098.IP)
[18:56:43] <bourbaki> Maybe you could help me decipher this error in the meantime though ') cannot move out of dereference of & pointer
[18:57:19] *** Quits: edwardw (edwardw@BB690835.D7DB55D8.50B134B9.IP) (Ping timeout)
[18:57:24] <eddyb> one of the simplest there is
[18:57:28] <eddyb> you just can't
[18:57:31] <o11c> bourbaki: it means you're passing something by-value, but you don't have a value
[18:57:41] <o11c> bourbaki: if .clone() exists, you may be able to call that
[18:57:44] <bourbaki> https://gist.github.com/b0urb4k1/9526793
[18:57:50] <eddyb> o11c: sheesh with the clones
[18:57:55] <bourbaki> Program and error
[18:58:02] <eddyb> you should either keep using references
[18:58:04] <eddyb> pass by value
[18:58:07] *** Joins: edwardw (edwardw@BB690835.D7DB55D8.50B134B9.IP)
[18:58:09] <eddyb> (or in worst case) .clone()
[18:58:14] <bourbaki> :)
[18:58:17] *** Quits: Mindless` (mindless@moz-9C38D3B4.net) (Ping timeout)
[18:58:18] *** Joins: Mindless` (mindless@moz-9C38D3B4.net)
[18:58:21] <bourbaki> I dont like clones
[18:58:22] <eddyb> bourbaki: capture by reference
[18:58:52] <eddyb> &Directory(_, ref mut list) => { list.push(*entry); Some(node) }
[18:59:12] *** Joins: io2 (io2@moz-EE406A5.home.otenet.gr)
[18:59:14] <o11c> bourbaki: pushing to a copy of the list is certainly wrong in this case though
[18:59:28] *** Quits: erickt (etryzelaar@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[18:59:53] <eddyb> bourbaki: Option is available everywhere btw
[19:00:00] <eddyb> so that line realy doesn't have to be that long
[19:00:04] <bourbaki> Ah so list in the pattern match is the problem
[19:00:16] <bourbaki> Yeah cool :)
[19:00:19] <eddyb> r for "region" is outdated, we use 'a nowadays
[19:00:23] *** Joins: Guest_ (textual@D6B5DD7E.D8252BC.9532F1CE.IP)
[19:00:30] <bourbaki> Is there a difference?
[19:00:37] <eddyb> just terminology
[19:00:40] <bourbaki> I thought it was just a name
[19:00:46] <eddyb> 'r makes your code look at least 5 months old
[19:00:51] <bourbaki> :)
[19:00:55] <eddyb> maybe two years, who knows
[19:00:59] <bourbaki> Heh
[19:01:07] <bourbaki> Its from the tutorial
[19:01:26] <bourbaki> Fixing it
[19:01:27] * eddyb prods someone who has time for that
[19:01:31] <bourbaki> Btw you guys really rock
[19:01:34] <brandonson> okay so ~[T] is Vec<T> now, what's &[T]? &Vec<T> doesn't quite seem right :o
[19:01:42] <eddyb> brandonson: &[T] remains
[19:01:57] <eddyb> brandonson: we're not removing [T] as a whole just ~[T] and ~str
[19:02:06] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[19:02:28] <eddyb> because DST changes their representation and semantics (unlike &[T] which should remain unchanged)
[19:02:29] <doomlord_> whats ~str becoming
[19:02:33] <eddyb> we don't know yet
[19:02:35] <eddyb> TBA
[19:02:40] *** Joins: mawuli (mawuli@moz-EF4254B1.com.gh)
[19:03:12] <Tobba> eddyb: any ideas for some horrible unsafe way to bypass this problem
[19:03:19] <Tobba> since I cant do async I cant really work around it
[19:03:27] *** Joins: asmyers (quassel@5FF1B8E9.963446D1.6DAF38F4.IP)
[19:03:30] <brandonson> eddyb: that seems slightly odd.  &T is the borred version of ~T, but &[T] is the borrowed version of ~[T]?
[19:03:38] <Tobba> or rather, I need it safe, but I just need this to work
[19:03:40] <eddyb> Tobba: do you need those inner RWArc's?
[19:03:47] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[19:03:52] <Tobba> hmm
[19:03:54] <eddyb> brandonson: that's not really accurate
[19:03:56] <brandonson> /borred/borrowed
[19:03:56] <Tobba> I think I can avoid them actually
[19:04:04] <eddyb> brandonson: &T is the borrowed version of T
[19:04:18] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[19:04:18] <Tobba> if I call on_connect before pushing it into the clients list
[19:04:20] <eddyb> brandonson: [T] isn't even a type yet, you can't substitute it for T above
[19:04:33] <Tobba> then I dont need to clone it and I can use an Rc
[19:05:06] *** Joins: erickt (etryzelaar@49C4075F.3AC15C18.2321E71E.IP)
[19:05:10] <doomlord_> when ~[T] stops being that.. will it still cooerce to a borrowed version naturally, does the mechanics of that change.. i gather ~[T] isn't really unique_ptr< .. whatever [..] represents> .. something happening under the hood
[19:05:16] <bourbaki> eddyb: That still wont run, i can not borrow immutable annonymous fields as mutable it says.
[19:05:18] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[19:05:25] <erickt> huon: a very late pong
[19:05:52] <Tobba> eddyb: sadly, I dont think Rc is Freeze either
[19:06:01] <doomlord_> ~[T] being borrowed .. ~[T] will be Vec<T> ? and &[T] will be &Vec<T> ? or a slice or what
[19:06:14] <bollu_>  mismatched types: expected `&&T` but found `&&mut T` (values differ in mutability)
[19:06:30] <bollu_> why is that a thing? can't it just... use a mutable value as an immutable value?
[19:06:36] <eddyb> Tobba: Rc is Freeze but not Send, AFAIK
[19:06:41] <eddyb> Tobba: use Arc, maybe?
[19:06:42] <kimundi> doomlord_: current ~[T] will disappear, and be replaced by new [T] combined with good old ~T to form a ~[T]. T and ~T -> &T will remain valid, so ~[T] -> &[T] will also work
[19:06:53] *** Joins: NiccosSystem` (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[19:06:57] *** Quits: NiccosSystem` (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Client exited)
[19:06:59] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[19:07:04] <Tobba> eddyb: Arc also needs send
[19:07:18] <eddyb> for its contents?
[19:07:21] <bollu_> kimundi: the type mismatch is in the CowDoubleBuffer
[19:07:22] <Tobba> yeah
[19:07:30] <brandonson> kimundi: where does Vec<T> fit in all of this?
[19:07:31] <eddyb> what arcane thing are you placing in it?
[19:07:31] *** Quits: jviereck (Adium@moz-DA799011.dclient.hispeed.ch) (Ping timeout)
[19:07:31] *** Quits: earlzlap (earlz@moz-483E1E31.neo.res.rr.com) (Ping timeout)
[19:07:37] <kimundi> bollu_: you can, but it won't automatically adjust the code in generics, so you might force that explicitly
[19:07:38] <Tobba> Rc's
[19:07:41] <Tobba> ugh I have an alternate idea
[19:07:43] <Tobba> this is going to suck
[19:07:49] <eddyb> brandonson: the DST ~[T] won't be growable
[19:07:56] <bollu_> kimundi: so how I do annotate that it's immutable?
[19:07:59] <eddyb> brandonson: at least not by default. Vec<T> is the growable vector
[19:08:23] <brandonson> Tobba: replace Rc's with Arc's?
[19:08:31] <Tobba> those are not Freeze
[19:08:34] <Tobba> thats how it was originally
[19:08:40] <Tobba> oh well I can do this instead
[19:08:43] <eddyb> Arc should be Freeze
[19:08:46] <eddyb> RWArc isn't Freeze
[19:08:47] <kimundi> brandonson: Vec<T> is the replacement for todays ~[T], in the sense that like todays ~[T] Vec<T> is a growable vector. Futures ~[T] will be a heap array, which we don't have an direct equivalent of today
[19:09:15] <kimundi> bollu_: Need more code examples :)
[19:09:17] *** Quits: leeks_ (leeks@moz-362CDC0.fttp.sta.comporium.net) (Ping timeout)
[19:09:29] *** Quits: evanm (evanm@moz-4D6F9A00.hsd1.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[19:09:30] <bollu_> kimundi: will do 
[19:09:36] <Tobba> eddyb: ah, right
[19:09:38] <Tobba> I can use Arc with RefCell
[19:09:44] <eddyb> no you can't
[19:09:50] <eddyb> are we back to this again :D?
[19:09:57] <Tobba> yes
[19:10:02] <Tobba> yes we are
[19:10:02] <eddyb> RefCell isn't Send nor Share because it's not atomic
[19:10:24] <Florob> Huh… did anyone else ever see a function call being optimized away, even though they passed the result into test::black_box?
[19:10:34] <Tobba> eddyb: wasent there an atomic version of it though
[19:10:40] *** Quits: erickt (etryzelaar@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[19:10:51] <eddyb> Florob: passing the result into the black box only affects the result
[19:10:53] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[19:11:10] <eddyb> Tobba: RWArc. but it's a RWLock not an atomic RefCell (it blocks instead of failing)
[19:11:37] <eddyb> Florob: you can pass a &mut &Trait in a black box to block devirtualization of the &Trait
[19:11:53] <Tobba> RWLock doesnt actually hold any data though
[19:11:55] <eddyb> Florob: probably the same with a function pointer
[19:12:09] <eddyb> Tobba: RWLock isn't Freeze anyways
[19:12:10] <brandonson> kimundi, eddyb: thanks, almost get it I think.  Last question, t the moment,what should I use for borrowed?
[19:12:23] <brandonson> at the moment, what should I use for borrowed vectors?
[19:12:32] <eddyb> Tobba: you basically can't have anything with magic mutability inside a RWArc
[19:12:35] <kimundi> &[T], that won'T change
[19:12:36] <Tobba> apparently owned pointers arent Freeze either
[19:12:40] <Tobba> fuckj
[19:12:48] <eddyb> nothing blocks Freeze
[19:12:56] <eddyb> err, non-Freeze
[19:13:08] <eddyb> Tobba: there's a reason we're changing this model
[19:13:11] <bollu_> kimundi: https://gist.github.com/bollu/424956ba7391a6a23eda
[19:13:21] <eddyb> Tobba: do you need that crazy shareability though?
[19:13:23] <brandonson> Tobba: trait objects aren't Freeze, is that what you're seeing?
[19:13:29] <eddyb> brandonson: nope
[19:13:31] <Tobba> eddyb: considering how awful the current networking is, definitely
[19:13:41] <Tobba> its tasks left and right to do anything sensible
[19:13:57] <eddyb> fwiw, async would block
[19:14:03] *** Quits: gimpf (gimpf@moz-114FE07D.adsl.highway.telekom.at) (Quit: Leaving.)
[19:14:08] <eddyb> so you'd still need tasks to do anything concurrently =))
[19:14:14] <Tobba> ~~~~~~~~
[19:14:20] <Tobba> how about a fucking try_receive method goddamn
[19:14:24] <Florob> eddyb, I'm not entirely sure what you're trying to say. According to the testing guide, part of the whole point of having black_box is having the optimizer not remove computations, by considering their result as used. Are you saying that is not the case?
[19:14:32] <Tobba> which is usually what we refer to when we say "sensible" anyways
[19:14:34] <eddyb> Tobba: there is such a thing on channels
[19:14:37] <cmr> Tobba: uv doesn't expose it.
[19:14:38] <kimundi> bollu_: What happens if you remove the & in that call? 
[19:14:43] <Tobba> ~~~~~~~~~~~~
[19:14:47] <Tobba> obviously
[19:14:47] *** Joins: luziiie (luziie@moz-CD18B14B.customer.cdi.no)
[19:15:09] <eddyb> Florob: is it removing the computation, or optimizing it?
[19:15:29] <eddyb> Florob: the smart thing to do is to make the computation non-deterministic
[19:15:31] <bollu_> kimundi: refresh
[19:15:36] <bollu_> still an error
[19:15:41] <bollu_> now complaining about &
[19:15:41] <Florob> eddyb, removing AFAICT from the assembly.
[19:15:41] <bollu_> &&*
[19:15:44] *** Quits: luziie (luziie@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[19:15:50] <Tobba> if you're unlucky enough its clever enough to optimize the whole thing to a constant
[19:15:53] *** Joins: erickt (etryzelaar@49C4075F.3AC15C18.2321E71E.IP)
[19:16:03] <kimundi> bollu_: Okay, starnge... let me check something for a moment
[19:16:08] <eddyb> Florob: by passing a &mut seed to the black box, LLVM assumes the seed can be changed
[19:16:09] <bollu_> kimundi: sure thin
[19:16:12] <bollu_> thing*
[19:16:17] <eddyb> Florob: and then you just need to use that "seed" in the computation
[19:16:27] <eddyb> Florob: it will optimize everything else
[19:16:39] <eddyb> Florob: what type is your result?
[19:16:54] *** Quits: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP) (Quit: colinsurprenant)
[19:17:11] <bollu_> in a trait, Self is type of self right?
[19:17:11] <Tobba> well ugh
[19:17:14] <Tobba> so much for sensibility
[19:17:31] <eddyb> bollu_: the type that implements the trait
[19:17:41] *** Quits: pczarn (pczarn@moz-69A55FA.izacom.pl) (Input/output error)
[19:17:42] <bollu_> eddyb: thanks
[19:17:56] <kimundi> bollu_: Ah, duh, I'm stupid
[19:18:04] <kimundi> bollu_: My bad
[19:18:17] <kimundi> bollu_: replace " let (front, back) = self.front_and_back();"
[19:18:27] <Tobba> maybe if I toss the array in an Arc
[19:18:43] <eddyb> you can't stop non-Freeze
[19:18:45] <kimundi> with "let DoubleBuffer { ref mut front, ref back } = *self;"
[19:18:59] <Tobba> what even defines Freeze
[19:19:01] *** Quits: canhtak (canhtak@moz-9F5D2CD3.wl.t.ulaval.ca) (Quit: canhtak)
[19:19:01] <bollu_> kimundi: ah :)
[19:19:06] <bourbaki> Is ref mut something just working in the latest compiler or so?
[19:19:09] <eddyb> Tobba: Freeze == &T is deeply immutable
[19:19:12] *** Joins: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP)
[19:19:16] <cmr> bourbaki: it's worked since before 0.5
[19:19:22] <bourbaki> Hm
[19:19:23] <Tobba> well shit
[19:19:26] <eddyb> Tobba: *anything* it reaches must not allow magic mutability bypass
[19:19:39] *** Quits: skade (skade@moz-A04BC22E.adsl.inetia.pl) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[19:20:16] <Tobba> though afaik vectors dont violate that?
[19:20:18] <kimundi> bollu_: I accidentally used front_and_back directly there because my brain short-circuited once it saw that there is one front and back with one &T and one &mut T - but for flip, it should be other way round, one &mut T and one &T
[19:20:26] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[19:20:41] <eddyb> Tobba: &Vec<T> is immutable
[19:20:48] <eddyb> Tobba: &mut Vec<T> is mutable and growable
[19:21:00] *** Quits: erickt (etryzelaar@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[19:21:17] <bstrie> huon: excellent
[19:21:22] <Tobba> hm
[19:21:25] <Tobba> well fuck
[19:21:54] <eddyb> why would you need to share the vector though
[19:22:04] <Tobba> its a part of the struct
[19:22:07] <eddyb> that sounds like you're making thread-safe cycles :P
[19:22:09] <kimundi> bollu_: and the error you got is because Clone is also generically implemented for &T, so once it couldn't mutate front directly, because it was a &T, it automaticall borrowed it to a &mut &T and wanted another &T to replace it with, instead of a T
[19:22:10] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[19:22:14] <eddyb> Tobba: share the rest of the struct
[19:22:20] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[19:22:23] <Tobba> the whole struct is now clients: ~[~ServerClient]
[19:22:26] *** Joins: Florob (Florob@moz-39532932.de)
[19:22:26] <Tobba> but that turns it non-freeze
[19:22:36] *** Quits: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP) (Quit: colinsurprenant)
[19:22:38] <eddyb> what does ServerClient have?
[19:22:52] <Tobba> a bunch of integers, an Option and a TcpStream
[19:22:52] <kimundi> err, "wanted another &T to clone from, instead of a &mut T", but whatever
[19:22:53] <cmr> vectors are freeze where the type they contain is Freeze
[19:22:54] *** Quits: twi (Adium@752B0356.FC95818.5EFB9497.IP) (Quit: Leaving.)
[19:22:56] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[19:22:58] <bollu_> kimundi: got it. what does &mut&T represent in the type system? :)
[19:23:02] <Tobba> I guess TcpStream isnt freeze
[19:23:12] <eddyb> bollu_: a mutable reference to an immutable reference to T
[19:23:16] <kimundi> bollu_: well, its just a mutable pointer to an immutable pointer
[19:23:29] <Florob> eddyb, It's an Option<u64>. But I'm not sure why randomizing the input would avoid optimizing away the calculation, if LLVM actually realizes the result is unused
[19:23:39] <bollu_> kimundi: ah. so & mut &mut T <- mutable pointer to a mutable pointer?
[19:23:44] <eddyb> Florob: no it doesn't
[19:23:51] <eddyb> Florob: LLVM knows the result is used
[19:24:00] <eddyb> Florob: but it can optimize away the computation
[19:24:19] <eddyb> Florob: if it always produces Some(5), it might as well not compute it every time ;)
[19:24:20] <kimundi> bollu_: yeah, though `&mut` is always one unit (not sure if that whitespace there was intentional)
[19:24:22] *** Joins: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net)
[19:24:29] <eddyb> Florob: and you end up with black_box(&Some(5))
[19:24:44] <bollu_> kimundi: yeah, it was. 
[19:24:52] <eddyb> Florob: and I wasn't suggesting to use an RNG
[19:24:59] *** Joins: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net)
[19:25:03] <bollu_> kimundi: hmm. you've explained this to me before - but why can't I use &mut front instead of ref mut front?
[19:25:21] *** Joins: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP)
[19:25:25] <Tobba> hm
[19:25:26] <eddyb> Florob: just pretend you're changing a dummy input (by giving a &mut reference to the dummy input, to black_box)
[19:25:28] <Tobba> so I cant put it in an Arc
[19:25:36] <Tobba> but due to the stupid-ass synchornousness
[19:25:39] <Tobba> I cant avoid an Arc
[19:25:48] <eddyb> Tobba: can't you just clone it and send it?
[19:25:56] <Tobba> clone what
[19:25:57] <eddyb> and keep it out of an Arc?
[19:26:00] <eddyb> the TcpStream
[19:26:02] *** Quits: telotortium (rmi1@moz-4B394DB7.hsd1.ca.comcast.net) (Quit: telotortium)
[19:26:08] <kimundi> bollu_: In what context? the latter is a pattern binding modifer, while the former can be either a expression prefix operator, or a combination of two different patterns. ;)
[19:26:16] <Tobba> the stream is a part of the client
[19:26:21] <Tobba> which is a part of the server
[19:26:24] <Tobba> which is in an Arc
[19:26:37] <bourbaki> How do i pass a &mut with a lifetime?
[19:26:37] <eddyb> so why do you need each client to access all clients?
[19:26:42] *** Joins: telotortium (rmi1@moz-4B394DB7.hsd1.ca.comcast.net)
[19:26:52] <eddyb> bourbaki: &'a mut
[19:26:53] <Tobba> thats not what I have
[19:26:54] <bollu_> kimundi: pattern matching! :D why can't it figure out the & during pattern matching?
[19:26:56] <Tobba> the server has a list of all clients
[19:27:02] <Tobba> and clients are non-freeze
[19:27:02] <eddyb> Tobba: don't share the server
[19:27:10] <Tobba> too bad, I cant
[19:27:14] <eddyb> Tobba: share a subset of the server that is Freeze
[19:27:17] *** Joins: fyolnish (fyolnish@moz-49396AB9.dynamic.ppp.asahi-net.or.jp)
[19:27:25] <eddyb> Tobba: since I doubt you need all the clients to know all the other clients
[19:27:32] <Tobba> because theres no goddamn async accepting
[19:27:45] <Tobba> to accept a client I need to put it in the non-freeze clients list
[19:27:46] <Tobba> from another task
[19:28:03] <eddyb> mkay...
[19:28:10] <kimundi> bollu_: In a pattern, things have the opposite meaning. A & in a expression adds one layer of reference, a & in a pattern removes a layer of expression
[19:28:11] <cmr> you need to be using RWArc or MutexArc, not just Arc, btw.
[19:28:19] <eddyb> cmr: doesn't work anyways
[19:28:21] <Tobba> did I ever mention synchornousness is fucking awful
[19:28:22] <cmr> to actually push to the list.
[19:28:27] <Tobba> goddamn
[19:28:28] <eddyb> cmr: because the list is not Freeze
[19:28:36] <eddyb> Tobba: is there more than one task that can push to that list?
[19:28:46] <eddyb> Tobba: is there more than one task that will ever need to know the list exists?
[19:28:50] <bollu_> kimundi: ah, yes. that makes so much sense. I'm an idiot.
[19:28:55] <Tobba> only one, but more than one will know that it exists
[19:28:58] *** Parts: sourab (jnu@B98CE8F3.60498BB1.A74A2098.IP) ()
[19:28:59] <Tobba> I see what you're going for
[19:29:07] <Tobba> however, I think each client might have to remove itself from the list
[19:29:09] *** Quits: fyolnish (fyolnish@moz-49396AB9.dynamic.ppp.asahi-net.or.jp) (Ping timeout)
[19:29:09] <eddyb> try to share a minimal subset
[19:29:11] <cmr> Tobba: anyway you can always just transmute a ~Foo into a *() and send that.
[19:29:20] <eddyb> cmr: sheesh
[19:29:21] <cmr> happy data races.
[19:29:26] <Tobba> exactly
[19:29:35] <eddyb> Tobba: you don't need the list to remove it from the list
[19:29:42] <kimundi> bollu_: "let ref mut x = foo();" Is in principle equivalent to "let x = &mut foo();", but "let &mut x = foo()" means "let & ( mut x ) = foo();", which matches away the outer reference, and then creates a mutable variable x where it tries to copy the content of the reference into.
[19:29:51] <Tobba> eddyb: hm?
[19:29:52] <eddyb> Tobba: just send a number or something back to the controller
[19:29:53] *** Joins: erickt (etryzelaar@49C4075F.3AC15C18.2321E71E.IP)
[19:29:56] <Tobba> though tbh a vector is kinda unsuited for this
[19:30:01] <eddyb> channels and ADTs
[19:30:16] <Tobba> ughhhhh
[19:30:20] <Tobba> a channel would work I guess
[19:30:24] <bollu_> kimundi: yeah, understood :) I can't believe I didn't /think/ of that. I'm taking that as a sign that I need some sleep >_>
[19:30:25] <Tobba> ... this is going to suck
[19:30:35] <eddyb> Tobba: you're thinking with actors!
[19:30:35] <bollu_> night everyone!
[19:30:40] <edwardw> kimundi: I also wonder why `ref` exists
[19:30:43] <kimundi> bollu_: heh, gn8
[19:30:48] *** Quits: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP) (Quit: colinsurprenant)
[19:30:51] <Florob> eddyb, Oh, I see. That does help, thank you. I shall stare at the over-optimized code again though. It didn't seem like it would produce any result, not even a constant one.
[19:30:54] <Tobba> on my todo list:
[19:30:59] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[19:31:01] <Tobba> write a sane rust I/O wrapper
[19:31:05] <Tobba> this is the most ridiclous shit I've seen all day
[19:31:11] <eddyb> short day
[19:31:14] *** bollu_ is now known as bollu|zZZ
[19:31:25] <kimundi> edwardw: Its needed to extract references out of bigger structures you only have references to.
[19:31:32] <eddyb> Florob: does it produce None always?
[19:31:33] <bourbaki> He hasnt seen my formating foo yet ;)
[19:31:37] <bourbaki> +t
[19:31:43] <eddyb> Florob: because that's totally optimizable
[19:31:48] <Tobba> I dont think I want to
[19:31:57] <Tobba> had I written this in C++ I would have been done hours ago, ugh
[19:32:00] <cmr> Tobba: there's no sane way really, anything is going to be slow and.
[19:32:00] <Tobba> oh well
[19:32:09] <Tobba> cmr: well this is just plain insane
[19:32:13] <cmr> *and not work well once IO is fixed
[19:32:22] <cmr> Tobba: yes, alpha.
[19:32:36] <edwardw> kimundi: ah makes sense, I can see it now
[19:32:39] <Tobba> I've been working on this for a while and I've yet to see a single sensible thing going on so far
[19:33:05] <edwardw> kimundi: so it is the opposite to & in LHS
[19:33:21] <kimundi> edwardw: say you have a "x = &(~uint, ~uint)". If you do "let &(a, b) = x;", then you basically tell the compiler to walk through the reference until it gets to the two ~uint s, and bind to them by value. But that would move out the reference, so its not allowed.
[19:33:25] <kimundi> edwardw: right
[19:33:26] <eddyb> edwardw: and you've been touching compiler code?
[19:33:34] <eddyb> edwardw: though that reminds me of myself =))
[19:33:37] <cmr> Tobba: if you had asked before, anyone could have told you that there is no good networking support.
[19:33:46] <edwardw> eddyb: which compiler code?
[19:33:50] <Tobba> p much
[19:33:58] <Florob> eddyb, No. It should produce Some(12 << 32 + 1024). Which also is totally optimizable I guess, but I would have expected to see it move two appropriate words around somewhere
[19:34:03] <Tobba> this Freeze crap is also horrifying but at least thats getting murdered
[19:34:14] <Tobba> oh god bitwise operators without parantheses
[19:34:20] <Tobba> *air raid siren*
[19:34:29] <eddyb> I have a precedence table somewhere
[19:34:32] <kimundi> eddyb: Heh, also don't me, just added partial type hints without knowing about type inference (well it bit me now)
[19:34:37] <Tobba> does rust have the same operator precedence as C++ actually?
[19:34:44] <kimundi> don't mind me*
[19:34:45] <eddyb> I think so
[19:34:46] <Tobba> the C++ precedence for almost all bitwise operators is completely nonsensical
[19:34:50] <eddyb> Tobba: oh that makes it very easy
[19:34:59] <eddyb> cout << 1 + 2; should work, right?
[19:35:00] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[19:35:08] *** Quits: erickt (etryzelaar@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[19:35:08] <o11c> for C at least + is tighter than <<
[19:35:10] <eddyb> or does it work? now I can't remember
[19:35:12] <cmr> http://static.rust-lang.org/doc/master/rust.html#operator-precedence
[19:35:22] <Tobba> p sure that does work in C++
[19:35:30] <Tobba> so in C++ that lne would result in 0, woo
[19:35:31] <eddyb> cmr: oh dear lord
[19:35:35] <o11c> rust is the same
[19:35:43] <eddyb> cmr: as is between multiplicative and additive?
[19:35:48] <o11c> Tobba: no, large shifts are undefined
[19:36:02] <Tobba> its basicaly 0 in every architecture
[19:36:13] <o11c> no
[19:36:16] <nstdloop> eddyb: I left my computer for three hours yesterday to build rust and it took 39 minutes :)
[19:36:21] *** Joins: listless (listless@moz-1599AAE4.as13285.net)
[19:36:32] <eddyb> Tobba: LLVM reserves the right to cra^W^W optimize way undefined stuff
[19:36:38] <o11c> Tobba: typically only the low bits are taken, so it's the same as 12 << 32
[19:36:49] <o11c> or 12 << 0 if you don't have 64-bit variables
[19:36:51] <kimundi> eddyb: Apparently the precedence of each operator got shuffled around depending on demand until no one felt strongly enough to change it anymore :P
[19:36:52] <eddyb> yeah that's what x86 does
[19:37:00] <edwardw> eddyb: to see how things are implemented is a good way for me to really know how to use them :P
[19:37:02] <Tobba> x86 does that?
[19:37:05] <Tobba> this explains a lot
[19:37:10] <Florob> Tobba, in C++ that line would result in undefined behaviour, because shift amounts > 64 are undefined. Luckily the non-IRC version of that code was a separate assignment.
[19:37:27] <Florob> (for a 64bit integer)
[19:37:46] <Tobba> I dont think we have the same precedence as C though, not exactly
[19:37:57] <Tobba> in C % is BELOW comparsions IIRC
[19:38:00] <Tobba> & *
[19:38:04] <Ms2ger> bollu|zZZ, here now
[19:38:07] *** Joins: tethra (tethra@moz-87614AA7.default.tethra.uk0.bigv.io)
[19:38:14] <doomlord_> i think i usually use a few more brackets in C bitwise operations
[19:38:21] <Tobba> yeah
[19:38:24] <Tobba> I use way more than necessary
[19:38:31] <Tobba> because I can never remember which ones were nonsensical
[19:38:36] <cmr> I usually bracket everything
[19:38:36] <o11c> I use as few as possible
[19:38:42] <cmr> I cbf to remember precedence rules.
[19:38:48] <o11c> because I don't mix bitwise and non-bitwise
[19:38:52] <eddyb> cmr +1
[19:39:01] <eddyb> you can't go wrong with LISP
[19:39:05] <o11c> and the precedence *within* bitwise makes sense, and the precedence within non-bitwise makes sense
[19:39:07] * eddyb ducks and runs
[19:39:22] <Tobba> ah yes
[19:39:26] <Tobba> == has precedence over &
[19:39:35] <eddyb> o11c: at least in Rust you have to compare to 0
[19:39:39] <Tobba> so a & b == c is a & (b == c)
[19:39:44] <Tobba> ~~~C~~~
[19:39:48] <eddyb> so you can't do a & b && a & c and mess it up
[19:40:03] <eddyb> that might give me nightmares
[19:40:12] <Tobba> rust isnt exactly the same as C
[19:40:19] <Tobba> we have & moved over all compartors, woo sanity
[19:40:24] <eddyb> dammit IRC this should've been done hours ago
[19:40:35] <Tobba> although ^ and | is below & in rust which is kinda nonsense but OH WELL
[19:40:48] <eddyb> wait so what does a | b & c do?
[19:40:53] <eddyb> (a | b) & c?
[19:40:56] <Tobba> opposite
[19:41:02] <eddyb> the opposite is sensical
[19:41:14] <eddyb> & is supposed to tighter
[19:41:19] <Tobba> I'd kinda expect former tbh
[19:41:24] <Tobba> I dont see any reason why & is special
[19:41:33] <eddyb> Tobba: + vs *
[19:41:43] <eddyb> logic & stuff
[19:42:00] <Tobba> doesnt really apply to bitwise though imo
[19:42:08] <bourbaki> What does moving out mean?
[19:42:27] <kimundi> For |, 0 is the neutral element. For &, 0b111111.... is the neutral element
[19:42:51] <bourbaki> I mean beside you and your significant other getting in a fight and you got to move out.
[19:42:57] <eddyb> bourbaki: lol
[19:43:02] <bourbaki> :)
[19:43:05] <eddyb> bourbaki: let x = y; can do one of two things
[19:43:14] <Tobba> kimundi: hm, fair point
[19:43:20] <eddyb> bourbaki: if y is Pod (like just a number or a pair of characters), it copies
[19:43:28] <Tobba> though then ^ should be equal with |
[19:43:38] <eddyb> bourbaki: if it is not Pod (like a vector) it moves from y, leaving y unusable
[19:43:55] <bourbaki> Ok
[19:43:59] <eddyb> bourbaki: now, you can't just move from anything, because moving out of something makes that something unusable for all intents and purposes
[19:44:02] <nstdloop> Is rust's Big Integer library any good?
[19:44:05] <eddyb> bourbaki: so you can't just move out of &T
[19:44:16] *** Quits: Rym (y@3138B97C.86D1DEDD.51C6DE68.IP) (Connection reset by peer)
[19:44:24] <bourbaki> Ah ok yeah i read that, ok thank you.
[19:44:29] *** Joins: Rym (y@3138B97C.86D1DEDD.51C6DE68.IP)
[19:44:36] <eddyb> again, use more references or pass by value
[19:44:38] <kimundi> nstdloop: No big integer library apart from GMP is any good. But apart from that, Rusts bigintegers are especially not any good.
[19:44:49] <eddyb> pnkfelix helped a bit
[19:44:54] <Tobba> ugh
[19:44:55] <bourbaki> eddyb: Everything has references now :)
[19:45:02] <Tobba> having to use channels for this is awful
[19:45:04] *** Joins: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net)
[19:45:09] <Tobba> I should just write an I/O wrapper that is async
[19:45:09] <nstdloop> kimundi: :( I want to implement the Miller-Rabin test for rosetta but it's not going to be great without big ints.
[19:45:15] <eddyb> Tobba: you're doing Erlang now
[19:45:25] <kimundi> nstdloop: Well, we _have_ them.
[19:45:25] *** Quits: Rym (y@3138B97C.86D1DEDD.51C6DE68.IP) (Connection reset by peer)
[19:45:31] <Tobba> to just wrap away how batshit insane using this is
[19:45:38] <eddyb> nstdloop: you can profile and improve them
[19:45:40] <kimundi> nstdloop: They just aren't especially optimzed or anything
[19:45:54] <eddyb> nstdloop: there's a few stupid things (algorithmically speaking) that can be fixed
[19:46:00] *** Joins: Rym (y@3138B97C.86D1DEDD.51C6DE68.IP)
[19:46:11] <eddyb> Tobba: should I feel bad for being amused by your pain?
[19:46:17] *** Quits: Guest_ (textual@D6B5DD7E.D8252BC.9532F1CE.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[19:46:33] *** Joins: chridou (chatzilla@moz-6535DCD5.dip0.t-ipconnect.de)
[19:46:33] <nstdloop> eddyb: Where can I find the source/library?
[19:46:36] <Tobba> coders hard at work
[19:46:47] <nstdloop> bigint, big, etc. don't give anything in the docs
[19:46:47] *** Quits: Rym (y@3138B97C.86D1DEDD.51C6DE68.IP) (Connection reset by peer)
[19:46:59] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[19:47:02] *** Joins: Rym (y@3138B97C.86D1DEDD.51C6DE68.IP)
[19:47:11] <eddyb> nstdloop: they're not in std
[19:47:25] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[19:47:31] <eddyb> Successfully rebased and updated refs/heads/at-exodus-chapter-11
[19:47:46] *** Joins: erickt (etryzelaar@49C4075F.3AC15C18.2321E71E.IP)
[19:47:47] <eddyb> git rebase -i HEAD~15 # this is too many commits for me
[19:47:50] <eddyb> what am I doing?
[19:48:04] <nstdloop> eddyb: I'm getting an AccessDenied XML error trying to access the extra docs for master
[19:48:13] <eddyb> there is no extra
[19:48:16] *** Quits: Ralith (ralith@114DA04D.CD83ED0A.BCDF04A6.IP) (Ping timeout)
[19:48:18] <edwardw> Oh, strcat has a gmp rust binding
[19:48:26] <eddyb> does he now?
[19:48:29] <eddyb> I didn't know about that
[19:48:31] <nstdloop> that link should probably go away then -.-
[19:48:31] <Florob> nstdloop, http://static.rust-lang.org/doc/master/std/num/index.html is where bignum is now
[19:48:39] <Ms2ger> gmp?
[19:48:43] * Ms2ger abandons ship
[19:48:44] <nstdloop> Florob: Thanks
[19:49:09] <edwardw> Ms2ger: the big int library
[19:49:13] <Ms2ger> Right
[19:49:20] <nstdloop> Florob: This is just the necessary traits. Where can I actually get a big int?
[19:49:23] <Ms2ger> Conversations about it never go well :)
[19:49:55] *** Joins: p1start (rewi@moz-A082F561.adsl.xtra.co.nz)
[19:51:18] *** Joins: eibwen (kvirc@moz-72527DDC.dip0.t-ipconnect.de)
[19:51:48] <Florob> nstdloop, excellent question… there is a num::bigint, which is apparently completely undocumented. num::bigint::BigInt::new(~[num::bigint::BigDigit]) should give you one. There is also BigUint
[19:52:01] <bourbaki> Is it possibel that i have a ring dependence here ? https://gist.github.com/b0urb4k1/9526793
[19:52:09] <kimundi> nstdloop, Florob: http://static.rust-lang.org/doc/master/num/index.html
[19:52:27] <bourbaki> I can not move node because it is borrowed due to the ref mut 
[19:52:34] <eddyb> bourbaki: yupp
[19:52:39] <eddyb> bourbaki: why do you want to return it?
[19:52:40] <nstdloop> Aha. Useful.
[19:52:48] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Quit: csherratt)
[19:52:51] <eddyb> bourbaki: I don't think that function does what you think/want
[19:52:55] <bourbaki> eddyb: I want to add that Node and return the thingy
[19:53:06] <eddyb> you're returning the same thing you go
[19:53:07] <Florob> kimundi, Which mostly tells me I'm to tired to completely parse URLs, because I thought I had linked to that m)
[19:53:11] <bourbaki> If the left node is a directory i want to add the node
[19:53:33] <bourbaki> eddyb: Yes i commented out the list.push cause it yields a further error
[19:53:35] <eddyb> bourbaki: you're modifying the original, do you realize that?
[19:53:41] <bourbaki> Yes
[19:53:52] <eddyb> do you want that?
[19:53:56] <bourbaki> Yes
[19:53:59] <kimundi> bourbaki: take entry by value,a nd seperate modifcation from retunring
[19:54:06] <eddyb> bourbaki: then why do you return it?
[19:54:10] <bourbaki> I implemented it so that everything gets copied, haskell style
[19:54:19] <kimundi> eddyb: He wants a function style
[19:54:21] <eddyb> you're modifying, not copying
[19:54:22] <bourbaki> eddyb: To chain things
[19:54:24] <kimundi> functional*
[19:54:27] <eddyb> bourbaki: you're not chaining
[19:54:33] <eddyb> modifying the original changes the original
[19:54:36] <eddyb> this is not persistent
[19:54:36] <bourbaki> Yes
[19:54:45] <doomlord_> have you got a link to discussion on ~[T] -> Vec<T> and the fate of ~str
[19:54:53] <bourbaki> I know but if i had another function i could use then chained
[19:54:53] <eddyb> doomlord_: the work week minutes
[19:55:13] <bourbaki> It is what i often do in C++ as well for parameter objects.
[19:55:25] <eddyb> bourbaki: you either chain or mutate
[19:55:32] <bourbaki> Ok
[19:55:33] *** Joins: sevandk (ksev@moz-71F7E457.cable.teksavvy.com)
[19:55:35] <eddyb> you mutate but look like you chain, from the caller side
[19:55:38] *** Quits: oberstet (quassel@moz-C30886B8.dynamic.mnet-online.de) (Client exited)
[19:55:41] *** Joins: alexherbo2 (alexherbo2@moz-8DAABD03.w90-35.abo.wanadoo.fr)
[19:55:56] <eddyb> also, you don't need ~ for most of that stuff
[19:55:58] <bourbaki> Well aside the bad style here, would this be possible?
[19:56:01] *** Quits: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl) (Connection reset by peer)
[19:56:07] <eddyb> you need to rewrite it
[19:56:22] <bourbaki> I can not make it work with enums?
[19:56:26] *** Joins: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl)
[19:56:27] <eddyb> you can
[19:56:48] <eddyb> let me try something
[19:56:54] <bourbaki> Ok
[19:57:13] <nstdloop> There should be a with() method for Vec<> that returns a new Vec with the value on the end (basically push but not in-place).
[19:57:30] <nstdloop> It'd be even better with sharing.
[19:57:44] <bourbaki> Sharing is caring :)
[19:58:05] <o11c> nstdloop: http://static.rust-lang.org/doc/master/std/vec_ng/fn.append_one.html
[19:58:16] <kimundi> nstdloop: Thats append_one, and I'll remove it :P
[19:58:19] *** Quits: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl) (Client exited)
[19:58:21] <nstdloop> Genius.
[19:58:34] <nstdloop> This is why searching by type would be nice.
[19:58:35] <bourbaki> I wonder why the return is not scoped outside of the ref mut
[19:58:36] <kimundi> bourbaki: heh, this might work: https://gist.github.com/Kimundi/9573000
[19:58:47] <kimundi> bourbaki: consistency
[19:59:00] <nstdloop> You could search for (Vec<T>, T) -> Vec<T> and get only a few functions.
[19:59:09] <kimundi> bourbaki: the ref mut is valid for the whole match arm, even if is not used
[19:59:10] *** Quits: sankha93 (sankha93@7061CD01.D6BD0D91.22D41759.IP) (Client exited)
[19:59:36] <kimundi> bourbaki: its like creating a local variable with a reference you're not using
[19:59:46] <bourbaki> Hm
[19:59:51] <eddyb> bourbaki: https://gist.github.com/eddyb/9573017
[20:00:03] *** Quits: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP) (Client exited)
[20:00:10] <meyer> nstdloop: Seconding that. Rust Hoogle would be really cool.
[20:00:42] <nstdloop> meyer: I put up an issue for this a couple days ago. I'd work on it but I don't really know anything :)
[20:00:57] *** Quits: Rym (y@3138B97C.86D1DEDD.51C6DE68.IP) (Connection reset by peer)
[20:01:05] <eddyb> nstdloop: rustdoc already has type info
[20:01:10] *** Joins: Rym (y@3138B97C.86D1DEDD.51C6DE68.IP)
[20:01:40] *** Quits: cceckman (cceckman@moz-135DFDD5.bootp.virginia.edu) (Client exited)
[20:01:40] <bourbaki> Ok so mixing fp style and oop-ish style is not a good idea in general in Rust?
[20:01:56] *** Quits: Rym (y@3138B97C.86D1DEDD.51C6DE68.IP) (Connection reset by peer)
[20:02:02] <bourbaki> At least the way i tried to do
[20:02:10] *** Joins: Rym (y@3138B97C.86D1DEDD.51C6DE68.IP)
[20:02:10] <doomlord_> i'm not sure you can say rust is either really
[20:02:13] <nstdloop> bourbaki: You've just got to be careful in which methods you use. You want to use the ones that don't mutate.
[20:02:54] <doomlord_> its definintely not pure OOP like java, and its' definitely not pure functional like haskell
[20:03:00] <nstdloop> bourbaki: Iterators are a great example of this. You can chain methods and not mutate the original (usually).
[20:03:02] <kimundi> nstdloop: Heh, do you know hwo append_one is implemented
[20:03:24] <bourbaki> nstdloop: Aye
[20:03:27] <nstdloop> kimundi: No idea. I just learned about it a minute ago.
[20:04:01] *** Quits: telotortium (rmi1@moz-4B394DB7.hsd1.ca.comcast.net) (Quit: telotortium)
[20:04:12] <kimundi> nstdloop: Its literally "fn append_one(v: Vec<T>, t: T) -> Vec<T> {let mut tmp = v; tmp.push(t); tmp}"
[20:04:15] *** Joins: telotortium (rmi1@moz-4B394DB7.hsd1.ca.comcast.net)
[20:04:32] *** Quits: alexherbo2 (alexherbo2@moz-8DAABD03.w90-35.abo.wanadoo.fr) (Ping timeout)
[20:04:33] <nstdloop> Does that end up doing sharing?
[20:04:42] <kimundi> define sharing
[20:04:58] <FreeFull> nstdloop: No
[20:05:04] *** Joins: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP)
[20:05:05] <nstdloop> Does it copy the vector I pass it?
[20:05:06] <FreeFull> It makes a new vector
[20:05:10] <kimundi> A Vec<T> is a singularly owned blob of memory.
[20:05:13] <nstdloop> :(
[20:05:29] <nstdloop> Is what I'm asking for even possible then?
[20:05:30] <kimundi> nstdloop, FreeFull: No, it reuses the vector it passes in
[20:05:38] <nstdloop> Oh. Yay.
[20:05:57] <FreeFull> kimundi: Ah, but you can't access the old vector then?
[20:05:59] <kimundi> nstdloop: Still, nothing that I'd call "sharing" going on
[20:06:09] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[20:06:20] <kimundi> FreeFull: No, its a moving type - you pass it in, and its gone
[20:06:34] *** Quits: listless (listless@moz-1599AAE4.as13285.net) (Quit: Leaving)
[20:06:45] *** Joins: listless (listless@moz-1599AAE4.as13285.net)
[20:06:47] *** Quits: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP) (Ping timeout)
[20:06:57] *** Quits: listless (listless@moz-1599AAE4.as13285.net) (Quit: Leaving)
[20:07:11] <kimundi> nstdloop: Are you trying to get multiple vectors sharing the saem substructures?
[20:07:40] <kimundi> The same subvectors?
[20:07:43] *** Joins: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP)
[20:07:53] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[20:08:02] *** Joins: luziie (luziie@moz-CD18B14B.customer.cdi.no)
[20:08:09] <nstdloop> kimundi: I want to be able to do let b = vec!(1, 2, 3); let c = b.with(4); b == vec!(1, 2, 3);
[20:08:18] <doomlord_> wa ssomething happening like Vec<T> will be a vector optimized for resizing but ~[T] might remain as a more static vector (in C++ before i  used stdlib , i always used to distinguish those cases, because permanently immutable assets were a common case , and it was possible to use shorter types for counts )
[20:08:22] *** Quits: luziiie (luziie@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[20:08:41] <kimundi> nstdloop: Yeah, append_one won't help you for that.
[20:08:59] <nstdloop> kimundi: Does there exist something for that?
[20:08:59] *** Quits: Rym (y@3138B97C.86D1DEDD.51C6DE68.IP) (Connection reset by peer)
[20:09:03] <kimundi> nstdloop: Need a persistent linked list for that (or similar)
[20:09:34] <nstdloop> So there's no way to do that with vecs?
[20:09:43] *** Joins: Rym (y@3138B97C.86D1DEDD.51C6DE68.IP)
[20:09:49] <eddyb> vectors are vectors
[20:09:51] <kimundi> nstdloop: If we don'T have one, you can certianly write one
[20:10:05] <eddyb> you can't have "persistent vectors"
[20:10:07] <nstdloop> I guess you can look to Haskell's Arrays to see that it doesn't work the way I want it to.
[20:10:12] <kimundi> enum List<T> { Cons(T, ~List), Empty }
[20:10:17] <eddyb> you can probably use persistent ropes
[20:10:24] <eddyb> but even then... meh
[20:10:33] *** Quits: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca) (Ping timeout)
[20:10:35] <FreeFull> kimundi: ~List wouldn't work
[20:10:37] <nstdloop> kimundi: And then you might as Haskell
[20:10:48] <FreeFull> You'd probably need to use Rc<List>
[20:10:57] *** Quits: hdevalence_ (quassel@moz-D125A39F.home3.cgocable.net) (Client exited)
[20:11:00] <FreeFull> Or something else
[20:11:01] <kimundi> Hm, how do you safely write a persistent data structure in a world with RefCell?
[20:11:15] <eddyb> a CowRc?
[20:11:16] <kimundi> FreeFull: Ah, right
[20:11:30] <eddyb> we have CowArc fwiw
[20:11:35] *** Quits: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org) (Ping timeout)
[20:11:41] <kimundi> enum List<T> { Cons(T, CowArc<List>), Empty } ?
[20:11:50] <eddyb> List<T> and Nil
[20:12:17] <kimundi> yeah yeah ;)
[20:12:17] *** Quits: Rym (y@3138B97C.86D1DEDD.51C6DE68.IP) (Connection reset by peer)
[20:12:17] <kimundi> enum List<T> { Cons(T, CowArc<List<T>>), Nil }
[20:12:25] <nstdloop> The tutorial just has a ~List
[20:12:40] <FreeFull> nstdloop: ~List wouldn't allow sharing
[20:12:50] <nstdloop> Ah
[20:12:51] *** Joins: Rym (y@3138B97C.86D1DEDD.51C6DE68.IP)
[20:12:58] <nstdloop> That makes sense
[20:13:27] <FreeFull> Of course, the problem with this is that anything mutable with modify all lists which share the elements
[20:13:27] *** Quits: Rym (y@3138B97C.86D1DEDD.51C6DE68.IP) (Connection reset by peer)
[20:13:39] <kimundi> Hm, does a CowGc make sense?
[20:13:43] <FreeFull> It's not proper laziness
[20:13:43] *** Joins: Rym (y@3138B97C.86D1DEDD.51C6DE68.IP)
[20:13:47] <eddyb> FreeFull: that's where Cow comes in
[20:13:54] <eddyb> or CoW I should say
[20:13:56] <FreeFull> Oh, copy on write
[20:13:59] *** Joins: jschuster (jschuster@moz-72EFA7.hsd1.ma.comcast.net)
[20:14:04] <FreeFull> Yeah, that'd work
[20:14:11] <eddyb> kimundi: maybe Gc<Cow<T>>?
[20:14:31] <kimundi> eddyb: I think it would be other way round
[20:14:39] <kimundi> Cow<Gc<T>>
[20:14:40] <eddyb> hmm
[20:14:49] <eddyb> and do some kind of folding thing?
[20:14:58] <kimundi> because its the smartpointer you are copying and reallocating, not its content only
[20:15:08] <eddyb> CoW works on Rc's because you have the refcount
[20:15:20] <eddyb> refcount == 1 => sole owner and can mutate freely
[20:16:01] <eddyb> with GC, everything you change has to duplicate nodes
[20:16:10] <eddyb> (you can never reuse when you modify)
[20:16:19] <eddyb> which is why you have a GC for, anyways
[20:16:27] <eddyb> s/why/what
[20:16:28] <Tobba> uhh
[20:16:33] <Tobba> I updated my rust
[20:16:41] <Tobba> but I still seem to be missing the entirety of std::comm
[20:16:46] <eddyb> libsync?
[20:16:54] <Tobba> docs says its in std
[20:16:57] <eddyb> hmm
[20:17:01] <Tobba> http://static.rust-lang.org/doc/master/std/comm/fn.channel.html
[20:17:13] <brandonson> I think this deprecated_owned_vector lint is slightly overagressive.  It's warning me at 'extern crate rsfml;' :o
[20:17:43] <eddyb> brandonson: rsfml probably needs to be updated
[20:17:46] <nstdloop> brandonson: It's probably because rsfml has an owned vector in it
[20:17:57] <eddyb> not sure why we're not just ripping it out completely
[20:18:00] *** Quits: luziie (luziie@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[20:18:09] *** Joins: luziie (luziie@moz-CD18B14B.customer.cdi.no)
[20:18:13] <nstdloop> eddyb: Well you don't just want to break EVERYTHING immediately.
[20:18:25] <eddyb> nstdloop: that's what we do though
[20:18:28] <brandonson> nstdloop, eddyb: of course you do
[20:18:31] <eddyb> for example, I removed borrow from Rc
[20:18:56] <eddyb> you don't need it, you shouldn't be using it
[20:19:01] <eddyb> http://static.rust-lang.org/doc/master/std/comm/index.html tx/rx is so cute :D:D
[20:19:02] *** Quits: nical (nico@87C1F78E.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[20:19:40] <Tobba> also wait, owned vectors are getting removed?
[20:19:43] <nstdloop> Where do I find the source for the test crate?
[20:20:06] <cmr> Tobba: from the language, yes. collections::Vec replaces them. more efficient, less compiler magic.
[20:20:11] <cmr> nstdloop: src/libtest
[20:20:19] *** Quits: telotortium (rmi1@moz-4B394DB7.hsd1.ca.comcast.net) (Quit: telotortium)
[20:20:21] <eddyb> cmr: not in vec_ng anymore? or just re-exported
[20:20:23] <bourbaki> Is there any chance to get a portable binary build of Rust for windows?
[20:20:24] <kimundi> Tobba: Heh, just seeing that RwArc is on its way out
[20:20:26] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[20:20:34] <cmr> eddyb: reexported
[20:20:44] <eddyb> kimundi: Arc<RWLock<T>>, right?
[20:20:46] <cmr> eddyb: the one in std is going to be marked #[deprecated]
[20:20:47] <Tobba> I'm moving to use channels instead
[20:20:48] <kimundi> yeah
[20:20:53] <eddyb> and Arc<Mutex<T>>
[20:20:57] <Tobba> though I cant seem to import them
[20:21:02] <brandonson> doesn't look like rsfml needs an update though, no warnings in the build at least
[20:21:12] <eddyb> Tobba: what exactly are you importing?
[20:21:20] <Tobba> use std::comm::{channel, Sender, Receiver};
[20:21:21] <Tobba> this just fails
[20:21:27] <Tobba> docs say they're there though
[20:21:39] <kimundi> eddyb: Huh, apparently CowArc dies too, beeing merged into Arc
[20:21:51] <cmr> Tobba: is your rustc out of date?
[20:21:57] <Tobba> I just updated it
[20:22:08] <Tobba> maybe its using an old libstd
[20:22:10] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[20:22:16] <bourbaki> Toodles guys
[20:22:20] <eddyb> it should not be able to do that now
[20:22:27] <eddyb> Tobba: rustc -v
[20:22:30] *** Quits: bourbaki (chatzilla@moz-15AE9852.dip0.t-ipconnect.de) (Quit: ChatZilla 0.9.90.1 [Firefox 27.0.1/20140212131424])
[20:22:42] <Tobba> its fresh
[20:22:48] <Tobba> but it might be finding the wrong libstd
[20:22:51] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[20:23:07] *** Joins: ganitsu (ganitsu@9FB9052B.7B0D0CBC.9D24D5E8.IP)
[20:23:43] *** Joins: willingc_ (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP)
[20:23:46] <nstdloop> eddyb: Do you think it would be a hard project to port test to not use owned vectors?
[20:23:55] *** Quits: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP) (Ping timeout)
[20:24:09] <eddyb> nstdloop: libtest?
[20:24:13] <nstdloop> yes
[20:24:16] <cmr> nstdloop: no, porting should be straightforward.
[20:24:42] <eddyb> if pcwalton isn't working on it (which I doubt, he's having fun burning through acid2), go ahead
[20:24:51] <eddyb> nstdloop: it's mostly a mechanical replace
[20:24:56] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Client exited)
[20:24:59] <eddyb> need to insert .as_slice() here and there
[20:25:17] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[20:25:23] <eddyb> cmr: did I tell you guys we still have code paths for @fn -> &fn?
[20:25:29] <nstdloop> I'll take a look then. It's pretty annoying to have to either have an unnecessary warning or #[allow(deprecated_owned_vectors] in every single file
[20:25:33] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[20:25:34] <Tobba> rustc isnt even on my path
[20:25:37] <Tobba> not a clue how its finding it
[20:25:42] *** Quits: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net) (Input/output error)
[20:26:09] *** Joins: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net)
[20:26:14] <cmr> nstdloop: it's not needed in every file.
[20:26:20] *** Joins: telotortium (rmi1@moz-4B394DB7.hsd1.ca.comcast.net)
[20:26:21] <cmr> just the crate root..
[20:26:33] *** Joins: mihneadb (mihneadb@moz-6B31F5AA.static.ziggozakelijk.nl)
[20:26:56] *** Quits: ahunt (ahunt@moz-6D6D79D6.cable.virginm.net) (Ping timeout)
[20:26:57] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[20:27:36] *** Quits: edwardw (edwardw@BB690835.D7DB55D8.50B134B9.IP) (Quit: Leaving...)
[20:27:54] *** Quits: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net) (Ping timeout)
[20:28:14] *** Joins: fyolnish (fyolnish@moz-49396AB9.dynamic.ppp.asahi-net.or.jp)
[20:29:03] *** Joins: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP)
[20:29:57] *** Quits: fyolnish (fyolnish@moz-49396AB9.dynamic.ppp.asahi-net.or.jp) (Ping timeout)
[20:31:07] *** Joins: canhtak (canhtak@moz-9F5D2CD3.wl.t.ulaval.ca)
[20:32:01] *** jorendorff_away is now known as jorendorff
[20:32:50] *** Quits: telotortium (rmi1@moz-4B394DB7.hsd1.ca.comcast.net) (Quit: telotortium)
[20:33:20] *** Joins: leeks_ (leeks@moz-362CDC0.fttp.sta.comporium.net)
[20:33:42] *** Quits: luziie (luziie@moz-CD18B14B.customer.cdi.no) (Connection reset by peer)
[20:33:55] *** Joins: luziie (luziie@moz-CD18B14B.customer.cdi.no)
[20:34:11] *** Joins: telotortium (rmi1@moz-4B394DB7.hsd1.ca.comcast.net)
[20:35:46] *** Quits: telotortium (rmi1@moz-4B394DB7.hsd1.ca.comcast.net) (Quit: telotortium)
[20:35:46] *** Quits: Rym (y@3138B97C.86D1DEDD.51C6DE68.IP) (Connection reset by peer)
[20:37:12] *** Joins: Rym (y@3138B97C.86D1DEDD.51C6DE68.IP)
[20:38:55] <brandonson> is there a way to convert *T to Vec<T>? basically what used to be vec::raw::from_buf_raw, but for the new Vec<T>.
[20:39:01] *** Joins: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net)
[20:39:04] <eddyb> brandonson: copy it over ;)
[20:39:17] <eddyb> and open a PR
[20:39:50] <brandonson> eddyb: somehow I thought that might be the answer
[20:40:31] <eddyb> kimundi: with this PR, I'll get past you and olsonjeffery in the number of lines removed
[20:40:47] <kimundi> eddyb: Wait, I was leading there?
[20:41:03] <kimundi> Ah yeah, I did a buch of gaint changes...
[20:41:32] *** Joins: telotortium (rmi1@moz-4B394DB7.hsd1.ca.comcast.net)
[20:41:50] *** Joins: jviereck (Adium@moz-DA799011.dclient.hispeed.ch)
[20:43:04] *** Quits: jackneill (jackneill@moz-F383006F.pool.digikabel.hu) (Input/output error)
[20:45:06] <brandonson> come to think of it, all of the vec::raw functions are missing for Vec<T>.
[20:46:32] *** Joins: tgkokk (tgkokk@moz-88CCC929.home.otenet.gr)
[20:47:06] <eddyb> warning: use of deprecated item: use `task_rng` or `StdRng::new`, #[warn(deprecated)] on by default
[20:47:08] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[20:47:10] <eddyb> wait, we can do that now?
[20:47:18] <eddyb> (deprecate with a message)
[20:47:23] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[20:47:37] <kimundi> brandonson: Well, if they are not needed in modern vectors no need to keep them alive
[20:48:15] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[20:48:39] <brandonson> kimundi: the biggest problem is that they make sense the way they are, but the lint shows up whenever you use them
[20:48:55] *** Quits: tigrou3tac (fabien@moz-6E2397FF.fbx.proxad.net) (Ping timeout)
[20:49:01] *** Quits: erickt (etryzelaar@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[20:49:18] <kimundi> brandonson: yeah, maybe
[20:49:32] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[20:50:11] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Ping timeout)
[20:50:21] <kimundi> brandonson: Once we have DST, it probably makes sense to look at the unsafe functions there are and refactor out the common ones
[20:50:41] *** Quits: willingc_ (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP) (Client exited)
[20:51:02] *** Quits: Rym (y@3138B97C.86D1DEDD.51C6DE68.IP) (Connection reset by peer)
[20:51:04] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[20:51:11] <cmr> eddyb: we've always had deprecate with a message, for as long as we've had deprecate :)
[20:51:23] <olsonjeffery> eddyb: congrats
[20:51:23] <eddyb> not sure what I wanted it for, now
[20:51:36] *** Joins: Rym (y@3138B97C.86D1DEDD.51C6DE68.IP)
[20:51:40] <eddyb> olsonjeffery: I still suck in every other aspect
[20:51:41] <olsonjeffery> wish i had more time to give to the project
[20:51:48] <eddyb> I'm just good at taking the trash out
[20:51:52] *** Joins: tigrou3tac (fabien@moz-6E2397FF.fbx.proxad.net)
[20:52:12] *** Quits: Rym (y@3138B97C.86D1DEDD.51C6DE68.IP) (Connection reset by peer)
[20:52:19] <cmr> eddyb: with and with_mut were replaced with autoderef right?
[20:52:25] *** Joins: Rym (y@3138B97C.86D1DEDD.51C6DE68.IP)
[20:52:33] <eddyb> I didn't touch those
[20:52:46] *** Joins: jeaye (jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[20:52:49] <cmr> they were on Ref
[20:52:50] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[20:52:57] <eddyb> cmr: we can't really remove .get() & friends until we get a snapshot
[20:53:08] <eddyb> I'd say remove .get() methods and deprecate the with stuff
[20:53:19] <eddyb> or remove all of it, idk
[20:54:22] <brandonson> So I'm using rust-sfml and it has to use the vec::raw unsafe fns internally, but none of the external API I can find takes or returns ~[T].  And yet, 'extern crate rsfml;' gets linted.
[20:54:28] <brandonson> This doesn't seem right :/
[20:55:11] <eddyb> brandonson: ~[T] gets inferred
[20:55:14] <eddyb> and thus, linted
[20:55:40] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[20:55:42] *** Quits: sellout (Adium@moz-F3B3B6C3.hlrn.qwest.net) (Ping timeout)
[20:55:53] <brandonson> eddyb: what bugs me is that none of the external API does anything with it, but I still get warnings, even though I'll never touch it.
[20:56:13] <brandonson> eddyb: and the files that do use it have #[allow(deprecated_owned_vector)]
[20:56:13] *** Quits: Rym (y@3138B97C.86D1DEDD.51C6DE68.IP) (Connection reset by peer)
[20:56:21] <eddyb> the lint can't/shouldn't care
[20:56:49] *** Joins: Rym (y@3138B97C.86D1DEDD.51C6DE68.IP)
[20:57:13] <eddyb> about de-Vec-ing, https://github.com/mozilla/rust/pull/12837
[20:57:24] <eddyb> err, I mean ~[T] => Vec<T>
[20:57:30] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[20:58:07] <meyer> I think I remember a blog post about it, but when I use self.foo inside a closure in a task I'm spawning from within a method of some struct, why doesn't it just try to clone foo, rather than all of self? It is easy to work around by first doing let foo = self.foo outside the closure, but it would be nice if I didn't need to.
[20:59:22] <eddyb> meyer: it can't know what it has to do
[20:59:39] <eddyb> what it sees is "self" not "self.foo"
[20:59:56] * eddyb feels like strcat when saying LLVM isn't smart
[21:00:35] <Tobba> llvm is one of those things that manages to pull off ridiclously good optimizations on one function
[21:00:38] <Tobba> and then completely flop on the next one
[21:00:48] *** Joins: bjustin (bjustin@moz-4B914826.hsd1.mn.comcast.net)
[21:00:52] <meyer> I guess that makes sense, and is consistent, but if I never actually have "self" in anything other than an rvalue (I think is the right term), couldn't it guess?
[21:01:16] *** Quits: pepper_chico (pepper_chi@BE2968B5.6F4A2706.E4090502.IP) (Quit: WeeChat 0.4.1)
[21:01:27] <Tobba> I still have no idea why it cant find channel in std::comm
[21:02:35] *** Quits: eddyb (eddy@F8B50789.F33C1089.FB866788.IP) (Ping timeout)
[21:03:49] <Tobba> is there any way to see where its finding std
[21:03:54] *** Joins: valentin (Thunderbir@9A1975C1.39CE2EE.E400A05F.IP)
[21:03:59] <Tobba> because right now rustc isnt even on my path and its finding it through pure magic
[21:04:26] *** Joins: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP)
[21:04:27] *** Quits: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net) (Quit: Sharp)
[21:04:40] *** Quits: telotortium (rmi1@moz-4B394DB7.hsd1.ca.comcast.net) (Quit: telotortium)
[21:04:48] *** Quits: tigrou3tac (fabien@moz-6E2397FF.fbx.proxad.net) (Ping timeout)
[21:06:07] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[21:06:15] *** Parts: zztr (Thunderbir@moz-CA50D606.dsl.static.sonic.net) ()
[21:06:15] *** Quits: Rym (y@3138B97C.86D1DEDD.51C6DE68.IP) (Connection reset by peer)
[21:06:27] *** Joins: telotortium (rmi1@moz-4B394DB7.hsd1.ca.comcast.net)
[21:06:29] *** Joins: Rym (y@3138B97C.86D1DEDD.51C6DE68.IP)
[21:06:53] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[21:08:05] *** Joins: sellout (Adium@moz-F3B3B6C3.hlrn.qwest.net)
[21:08:26] *** Quits: fhahn (fhahn@moz-7924DB5C.vie.surfer.at) (Ping timeout)
[21:08:38] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[21:09:40] <Tobba> yep Receiver isnt my libstd at all
[21:09:42] <Tobba> where the heck is it
[21:10:12] <Tobba> unless it was added less than 3 days ago
[21:10:18] <cmr> it was.
[21:10:22] <Tobba> well fuck
[21:10:27] <cmr> we asked if you had a new rustc
[21:10:32] <cmr> and for rustc -v
[21:10:35] <cmr> and you said "no no it's new"
[21:10:38] <cmr> :p
[21:10:44] <Tobba> well that IS pretty new
[21:10:48] <Tobba> though "nightly" my ass
[21:11:29] <brandonson> Tobba: unless you built it in the last hour, it's not new :p
[21:11:54] <Tobba> I thought channels were pretty old
[21:12:01] <cmr> they are.
[21:12:06] <cmr> they were just renamed to make more sense.
[21:12:10] <Tobba> ah
[21:12:12] <cmr> Chan/Port was renamed to Sender/Receiver
[21:12:16] <Tobba> what were they before since I cant really pull up the docs
[21:12:25] <cmr> and std::comm::Chan::new() to std::comm::channel()
[21:12:25] <Tobba> ah, what was the name of channel
[21:12:29] <Tobba> ah
[21:13:19] <brandonson> okay, so why does this vector lint complain at line 1 of my main source file?  I don't even use the old vectors anywhere...
[21:14:57] <brandonson> only with --cfg test, too
[21:15:36] <quux00> Has vector indexing using brackets (e.g., myvec[2]) been removed from the language?  I'm using the vec_ng::Vec and it seems to not be allowed.
[21:16:25] <sfackler> quux00: it hasn't been removed, it's just that ~[T] was built into the language and Vec is a library type. The Index trait needs to be overhauled before Vec can use it properly
[21:16:26] *** Joins: alexherbo2 (alexherbo2@moz-8DAABD03.w90-35.abo.wanadoo.fr)
[21:16:27] *** Joins: fhahn (fhahn@moz-7924DB5C.vie.surfer.at)
[21:16:29] <brandonson> quux00: vec_ng::Vec isn't quite the same as the old vectors.  you want myvec.get(2);
[21:17:04] <brandonson> quux00: or possibly myvec.get_mut(2), depending on what you're doing.
[21:17:09] <quux00> OK. If there are plans to add it back, then I'm less sad.  Thanks.
[21:17:33] <quux00> I have the .get() stuff working, but wanted to see if the bracket indexing was gone forever.
[21:17:36] <quux00> Thanks!
[21:17:37] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[21:19:02] <brandonson> does --cfg test add a main function or something that uses ~[T] still or something?
[21:19:08] <sfackler> quux00: the issue to follow is https://github.com/mozilla/rust/issues/6515
[21:19:09] <sfackler> brandonson: yeah
[21:19:23] *** Joins: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca)
[21:19:29] <Tobba> uhh
[21:19:41] <Tobba> Chan<TcpStream>::new() says it cant find Chan for some reason
[21:19:50] <cmr> yes
[21:19:51] <Tobba> Chan::new() sorta does though except that obviously fails because it cant infer the type
[21:19:56] <cmr> it's channel()
[21:20:03] <cmr> CHan doesn't exist
[21:20:05] <Tobba> well I cant update
[21:20:07] <cmr> oh
[21:20:10] *** Quits: Ms2ger (Ms2ger@moz-5180E188.adsl-dyn.isp.belgacom.be) (Ping timeout)
[21:20:22] <cmr> Chan::<TcpStream>::new()
[21:20:25] <Tobba> since I cant remember the dark ritual to make the LLVM part of the master build not explode
[21:20:27] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[21:20:27] <brandonson> sfackler: hmmm. where can I find this and fix the damn thing, the lint is getting annoying :o
[21:20:29] *** Joins: Ms2ger (Ms2ger@C7A08ADF.7928936B.187A1082.IP)
[21:20:43] <Tobba> you had to do something very specific with libstdc++ to make it not crash
[21:21:24] <sfackler> brandonson: It should be somewhere in librustc/front/test.rs
[21:22:06] <brandonson> sfackler: I'll take a look, thanks
[21:22:08] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[21:22:09] <sfackler> you can also add #[allow(deprecated_owned_vector)]; to your crate root to squash the warning
[21:23:17] *** Quits: Blei (Philipp@moz-B2F9E4BD.cust.bluewin.ch) (Quit: Blei)
[21:23:28] *** Quits: mihneadb (mihneadb@moz-6B31F5AA.static.ziggozakelijk.nl) (Quit: Computer gone to sleep - Zzzz...)
[21:24:10] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[21:24:55] *** Quits: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net) (Input/output error)
[21:25:21] *** Joins: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net)
[21:26:42] *** Joins: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net)
[21:27:03] *** Quits: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net) (Ping timeout)
[21:28:41] *** jorendorff is now known as jorendorff_away
[21:28:59] *** Quits: telotortium (rmi1@moz-4B394DB7.hsd1.ca.comcast.net) (Quit: telotortium)
[21:29:05] *** Joins: fyolnish (fyolnish@moz-49396AB9.dynamic.ppp.asahi-net.or.jp)
[21:30:50] *** Quits: fyolnish (fyolnish@moz-49396AB9.dynamic.ppp.asahi-net.or.jp) (Ping timeout)
[21:32:07] *** Quits: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP) (Ping timeout)
[21:32:55] *** Joins: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca)
[21:33:31] *** Joins: telotortium (rmi1@moz-4B394DB7.hsd1.ca.comcast.net)
[21:33:51] *** Joins: mib_r94o9f (Mibbit@moz-7AD9232F.rev.numericable.fr)
[21:34:12] *** Quits: Rym (y@3138B97C.86D1DEDD.51C6DE68.IP) (Connection reset by peer)
[21:34:24] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[21:34:38] *** Joins: Rym (y@3138B97C.86D1DEDD.51C6DE68.IP)
[21:35:13] *** Joins: Ralith (ralith@moz-67D4EB93.customer.broadstripe.net)
[21:35:40] *** Quits: jviereck (Adium@moz-DA799011.dclient.hispeed.ch) (Ping timeout)
[21:38:14] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[21:41:00] *** Quits: Munchor (munchor@moz-8CFC84AD.yourvserver.net) (Quit: ZNC - http://znc.in)
[21:44:33] *** Joins: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP)
[21:46:29] <Tobba> is there any way to create a ~[u8] with a specific length filled with 0's at runtime?
[21:46:35] <Tobba> or any way to do that with the replacement for owned vectors
[21:46:41] <meyer> from_elem, I think
[21:46:53] <cmr> Vec::from_eleme(0, len)
[21:47:03] <Tobba> yep, thats it
[21:47:05] *** Quits: mye (mye@moz-53EB4894.dip0.t-ipconnect.de) (Quit: mye)
[21:47:11] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[21:47:14] <Tobba> thanks
[21:47:34] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[21:47:43] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[21:47:59] *** Joins: patpat (patpat@moz-1599AAE4.as13285.net)
[21:48:21] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Ping timeout)
[21:49:38] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[21:49:58] *** Joins: listless (listless@moz-1599AAE4.as13285.net)
[21:50:14] <meyer> This isn't necessarily a serious proposal, but do you think it'd be useful to have @ as the indexing and slicing operator, so you might do "let (x, xs) = expr@(0, 1..)", or, if you had a Vec<u8> of triples of u8 for RGB colors, "let (r, g, b) = packed@(i, i+1, i+2)". So the @ operator would essentially take a tuple of either slice ranges or indexes, but "expr@(x, y, a..b)" would desugar to "
[21:50:17] <meyer> (expr@x, expr@y, expr@a..b)" (or "expr@(a..b)", depending on if the other is ambiguous, I guess).
[21:50:55] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Client exited)
[21:51:09] <cmr> it's already used for binding of names in match patterns.
[21:51:16] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[21:51:21] <o11c> meyer: the most common syntax for slices is container[start:end]
[21:51:25] *** Quits: leeks_ (leeks@moz-362CDC0.fttp.sta.comporium.net) (Connection reset by peer)
[21:51:30] <o11c> rust shouldn't invent a new one
[21:51:55] *** Quits: sawrubh (uid6719@moz-5F4AA75A.irccloud.com) (Quit: Connection closed for inactivity)
[21:52:19] *** Quits: Rym (y@3138B97C.86D1DEDD.51C6DE68.IP) (Ping timeout)
[21:52:25] <meyer> o11c: That's why I said it isn't really a serious proposal. I'd advocate copying python syntax, or using ".." instead of ":" like https://github.com/mozilla/rust/issues/4160#issuecomment-28909198 to be consistent with our other range-ish stuff
[21:53:02] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[21:53:12] <Tobba> is there any way to do from_elem but with higher capacity?
[21:53:15] <meyer> And cmr, yeah, I forgot about that.
[21:53:23] *** Joins: Rym (y@3138B97C.86D1DEDD.51C6DE68.IP)
[21:53:25] <Tobba> or should I just use with_capacity and then push the data on somehow
[21:53:40] <cmr> Tobba: the latter
[21:54:02] <cmr> let v = Vec::with_capacity(n); for i in range(0, len) { v.push(i) }
[21:54:09] <cmr> or, v.push(0)
[21:54:10] *** Quits: asmyers (quassel@5FF1B8E9.963446D1.6DAF38F4.IP) (Ping timeout)
[21:54:18] <cmr> that's all that with_elem does anyway.
[21:54:26] <Tobba> ohj
[21:54:30] <Tobba> I thought with_elem did something more clever
[21:56:07] *** Quits: burntsushi (burntsushi@moz-27A1B1D8.dhcp.oxfr.ma.charter.com) (Connection reset by peer)
[21:56:37] *** Joins: burntsushi (burntsushi@moz-27A1B1D8.dhcp.oxfr.ma.charter.com)
[21:59:14] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[21:59:22] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[22:00:03] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[22:00:36] *** Parts: meyer (meyer@moz-A9CF56E4.hsd1.ca.comcast.net) ()
[22:00:49] *** Joins: meyer (meyer@moz-A9CF56E4.hsd1.ca.comcast.net)
[22:01:05] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[22:01:05] *** Joins: leeks (leeks@moz-362CDC0.fttp.sta.comporium.net)
[22:05:00] *** Quits: chridou (chatzilla@moz-6535DCD5.dip0.t-ipconnect.de) (Quit: ChatZilla 0.9.90.1 [Firefox 27.0.1/20140214013806])
[22:06:18] *** Joins: pepper_chico (pepper_chi@BE2968B5.6F4A2706.E4090502.IP)
[22:07:41] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[22:08:21] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[22:08:45] *** Quits: telotortium (rmi1@moz-4B394DB7.hsd1.ca.comcast.net) (Quit: telotortium)
[22:09:21] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[22:10:24] *** Quits: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP) (Ping timeout)
[22:11:33] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[22:12:04] *** Joins: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP)
[22:13:27] *** Quits: listless (listless@moz-1599AAE4.as13285.net) (Quit: Leaving)
[22:13:47] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[22:15:53] *** Joins: luziiie (luziie@moz-CD18B14B.customer.cdi.no)
[22:16:11] *** Joins: Munchor (munchor@moz-8CFC84AD.yourvserver.net)
[22:16:12] *** Quits: nkoep (nik@moz-7F7BA1A9.pool.mediaways.net) (Quit: Leaving)
[22:16:46] *** Quits: luziie (luziie@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[22:17:17] <brandonson> is there a way to have an #[allow(...)] that only gets applied when compiling tests?
[22:17:34] <cmr> brandonson: no.
[22:17:40] <brandonson> (or a command line option for enabling/disabling lints)
[22:17:48] <cmr> ah, command line it's -A ...
[22:17:56] *** Quits: Ms2ger (Ms2ger@C7A08ADF.7928936B.187A1082.IP) (Ping timeout)
[22:17:58] *** Joins: bmu (chatzilla@moz-A87574A6.hsd1.pa.comcast.net)
[22:18:00] <brandonson> cmr: thanks
[22:18:17] <cmr> -W is #[warn], -A is #[allow], -D is #[deny] -F is #[forbid]
[22:18:28] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[22:18:50] *** Joins: luz1 (luziie@moz-CD18B14B.customer.cdi.no)
[22:18:52] <brandonson> cmr: what's the difference between deny and forbid?  they sound very similar.
[22:18:52] *** Joins: asmyers (quassel@DB6A517B.4C874661.F98C6DDA.IP)
[22:19:06] *** Joins: brson (brson@981AA104.E81F12CD.76F66111.IP)
[22:19:06] *** ChanServ sets mode: +ao brson brson
[22:19:33] <canhtak> cmr: hi, i saw your pull request for ears, and i think your changes are already on ears/master?
[22:19:41] *** Quits: luziiie (luziie@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[22:19:45] <cmr> brandonson: lints that are forbidden can't be turned back on with #[allow]
[22:20:18] <cmr> canhtak: oh, my bad, I forgot to pull before I built.
[22:21:21] <canhtak> cmr: i just have a question, where are the recommended directive for Rust project layout?
[22:21:32] <canhtak> for the moment i use the old rustpkg layout
[22:22:07] <cmr> canhtak: https://github.com/mozilla/rust/wiki/Docs-project-structure
[22:22:46] <canhtak> cmr: thanks!
[22:23:36] <sfackler> brandonson: the warning generated by tests is coming from the call to std::os::args() fyi
[22:24:43] <cmr> canhtak: do you want me to remove the first commit from the pull request?
[22:25:13] *** Quits: leeks (leeks@moz-362CDC0.fttp.sta.comporium.net) (Quit: Leaving)
[22:25:34] <cmr> canhtak: actually I think git is smart enough to just merge, and ignore the changes already present...
[22:25:53] <canhtak> cmr: yes if you can, as the changes are already present
[22:26:00] *** Joins: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net)
[22:26:01] *** Joins: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch)
[22:26:08] <canhtak> cmr: github tells me that he can't merge on the current state
[22:26:11] <cmr> ok
[22:26:14] <cmr> I will fix.
[22:27:50] *** Quits: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net) (Ping timeout)
[22:30:01] *** Joins: fyolnish (fyolnish@moz-49396AB9.dynamic.ppp.asahi-net.or.jp)
[22:31:44] <cmr> canhtak: updated
[22:31:44] *** Quits: fyolnish (fyolnish@moz-49396AB9.dynamic.ppp.asahi-net.or.jp) (Ping timeout)
[22:32:19] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[22:32:48] <canhtak> cmr: ok, thanks!
[22:36:08] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[22:36:28] *** Quits: silotis (quassel@moz-4B8C4631.oc.oc.cox.net) (Client exited)
[22:36:29] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[22:37:49] *** Joins: silotis (quassel@moz-4B8C4631.oc.oc.cox.net)
[22:38:17] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[22:40:39] *** Quits: dranov (dranov@61A04536.8894C792.FCAAE698.IP) (Ping timeout)
[22:43:05] *** Quits: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch) (Quit: Leaving.)
[22:43:32] *** Joins: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP)
[22:45:06] <Tobba> ah, crap
[22:45:23] <Tobba> well that was going according to the plan until the task that reads from the client sockets needed to access the client object
[22:47:01] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[22:49:31] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[22:50:32] *** Quits: not_gavin (gavin@E04DED12.5AA33DAB.2321E71E.IP) (Ping timeout)
[22:50:35] *** jorendorff_away is now known as jorendorff
[22:50:52] *** Quits: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP) (Client exited)
[22:51:07] *** Joins: not_gavin (gavin@E04DED12.5AA33DAB.2321E71E.IP)
[22:51:15] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Ping timeout)
[22:51:43] *** Joins: Guest_ (textual@D6B5DD7E.D8252BC.9532F1CE.IP)
[22:51:48] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[22:53:15] *** Joins: luziiie (luziie@moz-CD18B14B.customer.cdi.no)
[22:53:32] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[22:53:55] *** Quits: luz1 (luziie@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[22:54:11] *** Joins: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch)
[22:55:22] *** Quits: wilkie (wilkie@moz-A19F104D.pitbpa.fios.verizon.net) (Ping timeout)
[22:55:23] *** Joins: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP)
[22:55:33] *** Quits: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP) (Quit: colinsurprenant)
[22:56:27] <geomyidae> Hm, what's the state of rust-git from stringer?
[22:56:57] *** Quits: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch) (Ping timeout)
[22:57:09] *** Quits: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP) (Ping timeout)
[22:57:59] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Client exited)
[22:58:01] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[22:58:01] *** Quits: kris (kris@moz-6D20263F.fullrate.dk) (Ping timeout)
[22:58:13] *** Quits: alexherbo2 (alexherbo2@moz-8DAABD03.w90-35.abo.wanadoo.fr) (Quit: WeeChat 0.4.3-dev)
[22:58:58] *** Joins: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP)
[22:59:07] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Client exited)
[23:00:13] <sfackler> geomyidae: up to date as of yesterday
[23:00:37] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[23:04:03] *** Joins: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP)
[23:04:34] *** Quits: Rym (y@3138B97C.86D1DEDD.51C6DE68.IP) (Ping timeout)
[23:05:03] *** Quits: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net) (Input/output error)
[23:05:12] *** Quits: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP) (Quit: colinsurprenant)
[23:05:25] *** Joins: Rym (y@3138B97C.86D1DEDD.51C6DE68.IP)
[23:06:53] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[23:08:23] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[23:08:34] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[23:08:40] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[23:09:17] *** Quits: kvanb (kvanb@moz-373A87EB.lnse7.lon.bigpond.net.au) (Quit: kvanb)
[23:09:19] *** Quits: tgkokk (tgkokk@moz-88CCC929.home.otenet.gr) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[23:10:05] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[23:10:25] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[23:11:00] *** Joins: robhobbes (robert@moz-9B0672CB.hsd1.ut.comcast.net)
[23:13:06] <krdln> With DST, something like that would be possible? let v = ~[1,2,3]; &*v
[23:13:42] <sfackler> yes, though ~[T] will be less useful than it is now
[23:13:56] *** Quits: Guest_ (textual@D6B5DD7E.D8252BC.9532F1CE.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[23:15:14] <krdln> and when there is struct S { arr: [int]; }, would it be possible to write S{ arr: *v } ?
[23:15:46] <sfackler> not sure about that one
[23:16:18] <krdln> So it won't be possible, I wonder how dst structs could be initialized
[23:16:35] *** Joins: jaras (textual@CA59A5EC.5F4B69C0.52E4E107.IP)
[23:16:50] <krdln> s/it/if it/
[23:17:04] *** Joins: askalski (akuda@2BA4E5A7.CC7751E8.6712E96B.IP)
[23:17:40] *** Joins: telotortium (rmi1@moz-4B394DB7.hsd1.ca.comcast.net)
[23:18:18] *** Quits: pcdummy (pcdummy@moz-CF4CA865.page4me.ch) (Ping timeout)
[23:18:31] *** Quits: askalski (akuda@2BA4E5A7.CC7751E8.6712E96B.IP) (Quit: Wychodzi)
[23:19:24] <krdln> Without possibility to move owned vector into a dst struct, it won't be really usable...
[23:20:22] *** Joins: pcdummy (pcdummy@moz-CF4CA865.page4me.ch)
[23:20:32] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[23:20:47] *** Joins: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP)
[23:21:01] *** Joins: angdev (angdev@16F167B.4C57D258.D8E8354F.IP)
[23:21:14] <cmr> krdln: no, it won't be possible.
[23:21:22] <cmr> [int] is like [int, ..N]
[23:21:26] <cmr> where N is of unknown size
[23:21:40] *** Joins: luziie (luziie@moz-CD18B14B.customer.cdi.no)
[23:21:54] *** Quits: luziiie (luziie@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[23:22:16] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[23:22:30] <krdln> cmr: you mean &*~[1,2,3] won't be possible or struct initialization?
[23:22:37] *** Joins: matematikaadit (adit@352CCDDA.C60397B7.C9B8F0F7.IP)
[23:22:46] <cmr> krdln: the struct initialization
[23:22:47] <meyer> I'm assuming this is because the extra crate is finished being dissolved, but the "extra" link for master on the Rust homepage is now broken, which is kinda unprofessional-looking.
[23:23:22] <cmr> meyer: want to send a pull request to https://github.com/graydon/rust-www removing it?
[23:23:22] <krdln> cmr: So how to initialize such a struct?
[23:23:33] <cmr> krdln: S { arr: [1, 2, 3] }
[23:23:36] <meyer> cmr: kk
[23:23:52] *** Joins: evanm (evanm@moz-4D6F9A00.hsd1.ca.comcast.net)
[23:24:01] <mcpherrin> the rust homepage needs a bit of a revamp, I was going to rejigger documentation links tomorrow at docathon
[23:24:07] <krdln> cmr: but I want to initalize it by some owned vector generated unknown in compile time
[23:24:26] <mcpherrin> I think the "other docs" link should just be "Documentation"
[23:24:36] <cmr> krdln: oh I read that wrong.
[23:24:53] *** Quits: sevandk (ksev@moz-71F7E457.cable.teksavvy.com) (Ping timeout)
[23:24:55] <cmr> krdln: that might work indeed.
[23:25:00] *** Quits: jaras (textual@CA59A5EC.5F4B69C0.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[23:25:11] *** Joins: sevandk (ksev@moz-71F7E457.cable.teksavvy.com)
[23:25:49] <meyer> cmr: How about I move "Other docs" to where "extra" is for master, and just label it "other"
[23:26:18] *** Quits: bmu (chatzilla@moz-A87574A6.hsd1.pa.comcast.net) (Ping timeout)
[23:26:30] <FreeFull> After DST, would ~[T] be useful when you don't know the size of vector at compile time, but at runtime it is static for that execution?
[23:26:30] <krdln> cmr: So size of dynamically sized struct will be remembered not only in fat pointer, but in lvalue too, yes?
[23:26:49] *** Joins: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net)
[23:26:57] <cmr> FreeFull: the size is, yes.
[23:26:59] <mcpherrin> meyer: I don't think "other" should be "other at all, I think it should just be "Documentation"
[23:27:43] <meyer> mcpherrin: That makes sense, since it links the std docs, manual, and tutorial.
[23:28:03] <FreeFull> cmr: [T,..N] doesn't work because the N isn't known at compile time
[23:28:06] <mcpherrin> I don't know if we need a Manual or Std link on the homepage at all, really
[23:28:11] <mcpherrin> Tutorial / Documentation
[23:28:33] *** Quits: bjustin (bjustin@moz-4B914826.hsd1.mn.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[23:28:35] <mcpherrin> make whatever changes you're comfortable with though :)
[23:28:38] *** Quits: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net) (Ping timeout)
[23:28:50] <krdln> mcpherrin: I find std link on homepage useful.
[23:28:51] <cmr> FreeFull: yes but you cannot grow ~[T]
[23:28:53] <FreeFull> mcpherrin: It'd be nice to have a link to rust-ci somewhere
[23:29:00] <FreeFull> Maybe a "Community" page with links
[23:29:00] <cmr> FreeFull: you would need to reallocate it. This is what Vec<T> is.
[23:29:17] <FreeFull> cmr: No, once it is made it remains that size
[23:29:25] <FreeFull> For my use
[23:29:30] <cmr> yes.
[23:29:33] <FreeFull> Like a C array
[23:29:36] <mcpherrin> krdln: Right, but I want to rejigger the documentation page anyways :P
[23:29:52] <FreeFull> Ok
[23:29:52] <cmr> FreeFull: it is useful for your usecase.
[23:29:58] <FreeFull> Yay
[23:30:35] <cmr> although you probably want &[T], the only thing you get from ~[T] is the ability to move out of it.
[23:31:01] *** Joins: fyolnish (fyolnish@moz-49396AB9.dynamic.ppp.asahi-net.or.jp)
[23:31:27] <krdln> it would be really awesome to jump to other crates from documentation for one of them
[23:31:43] *** Quits: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP) (Quit: colinsurprenant)
[23:32:08] *** Quits: silotis (quassel@moz-4B8C4631.oc.oc.cox.net) (Client exited)
[23:32:10] <krdln> returning to documentation main page or altering url by hand is not pleasant
[23:32:16] *** Joins: kris (kris@moz-6D20263F.fullrate.dk)
[23:32:46] *** Quits: fyolnish (fyolnish@moz-49396AB9.dynamic.ppp.asahi-net.or.jp) (Ping timeout)
[23:33:15] *** Joins: silotis (quassel@moz-4B8C4631.oc.oc.cox.net)
[23:33:22] *** Joins: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP)
[23:33:36] <meyer> mcpherrin: If you are going to be making larger changes to the docs / homepage, I guess I'll just remove the extra link for master, and change "Other docs" to "Full docs" or "Documentation index"
[23:34:51] *** Quits: japaric1 (japaric@7D69BC2C.9E5CF106.5C7588CA.IP) (Ping timeout)
[23:35:16] <brson> does anybody have the doc sprint etherpad link?
[23:35:38] <krdln> meyer: renaming "other" is good idea imo, "other" reads like "don't click me, nothing interesting here"
[23:35:59] *** Joins: japaric1 (japaric@F2B464FF.B7BC9CB9.E5B504CC.IP)
[23:36:01] <brandonson> building tests for a library is just something like 'rustc -o bin/testlib --cfg test libsrc/lib.rs' right?
[23:36:19] <cmr> brandonson: rustc --test
[23:36:34] *** Quits: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[23:36:56] <brandonson> cmr: ah.  oddly enough --cfg test works for executables.
[23:37:06] <mcpherrin> My biggest peeve is that there's no cross-crate search
[23:38:07] <meyer> mcpherrin: I was complaining about that a few days ago. It is finals week right now, but if no one else has done it, I'll probably add that over the break
[23:38:15] *** Joins: luziiie (luziie@moz-CD18B14B.customer.cdi.no)
[23:38:30] <mcpherrin> meyer: great :)
[23:38:52] *** flaper87 is now known as flaper87|afk
[23:39:23] *** Quits: luziie (luziie@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[23:39:26] <meyer> Also, I really like how Go's docs link to the implementation. It'd be nice if there were links to line ranges on github.
[23:39:47] <cmr> ours link to the implementation too.
[23:39:49] <meyer> Useful for "what's the idiomatic way to X"
[23:40:04] <meyer> Oh, lol [src]
[23:40:32] <meyer> Alright, forget I said that.
[23:41:00] *** Joins: leonvv (leonvv@moz-7D83A5F1.ip.telfort.nl)
[23:41:49] <meyer> There aren't links on each function implementation for a struct, though, which is what I was looking for.
[23:41:53] *** Joins: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net)
[23:41:54] *** Quits: carter (carter@moz-58F59B3A.members.linode.com) (Quit: ZNC - http://znc.in)
[23:42:17] *** Joins: carter (carter@moz-58F59B3A.members.linode.com)
[23:42:49] <cmr> (method)
[23:42:56] <cmr> indeed, handling of traits is less then ideal.
[23:43:19] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[23:43:36] *** Quits: nstdloop (nstdloop@moz-27F8BE93.hsd1.ct.comcast.net) (Ping timeout)
[23:44:04] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[23:44:41] *** Joins: bjustin (bjustin@moz-4B914826.hsd1.mn.comcast.net)
[23:45:02] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[23:45:04] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[23:45:47] <leonvv> Why is: 
[23:46:13] <leonvv> '~str as *GLchar', not a scalar cast?
[23:46:27] <mcpherrin> 'cos ~strs aren't what you think
[23:46:49] <cmr> leonvv: ~str is only coercible to &str
[23:46:54] <mcpherrin> &str[0] as *GLcar maybe?
[23:47:12] <cmr> that works, though I'd use s.as_slice().as_ptr()
[23:47:39] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[23:47:46] <krdln> leonvv: if you want to interface with C, remember that rust strs don't end with null byte
[23:49:07] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[23:49:14] <leonvv> as_slice.as_ptr()' worked perfectly
[23:49:25] *** Joins: hdevalence (quassel@moz-D125A39F.home3.cgocable.net)
[23:49:38] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[23:50:11] <leonvv> krdln: I'm using gl-rs, and I think the null byte is added there, because it didn't segfault
[23:50:28] <cmr> leonvv: it isn't.
[23:50:36] *** Joins: kvanb (kvanb@moz-373A87EB.lnse7.lon.bigpond.net.au)
[23:50:47] <cmr> leonvv: you need to be using CString any time you hand gl a string and it doesn't also take a length,
[23:50:59] <cmr> see hgl-rs for examples of correct gl wrapping
[23:51:07] *** Joins: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP)
[23:51:57] <leonvv> cmr: thanks, will check it out
[23:52:25] *** jorendorff is now known as jorendorff_away
[23:52:26] *** Quits: angdev (angdev@16F167B.4C57D258.D8E8354F.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[23:52:54] *** Joins: dylukes (dylukes@moz-ED57011A.oakland.resnet.pitt.edu)
[23:56:06] *** Quits: mindcat (mindcat@F32E3B11.297EFC2A.57E3C596.IP) (Ping timeout)
[23:56:57] *** Joins: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca)
[23:56:58] *** Joins: claudiu (claudiu@81B10C62.5F4BC945.49B2C1AE.IP)
[23:57:12] *** Joins: mindcat (mindcat@F32E3B11.297EFC2A.57E3C596.IP)
[23:58:58] <meyer> cmr: Pull request sent, but it looks kinda ugly with the "master" line being shorter than the "0.9" one.
[23:59:10] <meyer> Broken link is probably worse.
[23:59:19] *** Quits: Ferreus (ferreus@moz-6E215B81.lsn.wtnet.de) (Quit: WeeChat 0.4.4-dev)
[23:59:44] *** Quits: dylukes (dylukes@moz-ED57011A.oakland.resnet.pitt.edu) (Ping timeout)
[23:59:49] *** jorendorff_away is now known as jorendorff
