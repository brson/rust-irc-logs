[00:00:03] *** Quits: dherman (dherman@moz-BBE3ABD.mv.mozilla.com) (Quit: dherman)
[00:00:13] *** Quits: fabrice (fabrice@moz-7B0110AD.mv.mozilla.com) (Max SendQ exceeded)
[00:00:22] *** Joins: fabrice (fabrice@moz-7B0110AD.mv.mozilla.com)
[00:00:26] *** Quits: jet (jet@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: jet)
[00:00:26] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[00:01:03] *** Joins: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP)
[00:01:48] *** Quits: dbaron (dbaron@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Ping timeout)
[00:03:39] <jack> recrack: you joining the meeting now?
[00:03:56] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[00:04:10] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[00:04:10] *** ChanServ sets mode: +o brson
[00:05:24] *** Joins: dherman (dherman@moz-BBE3ABD.mv.mozilla.com)
[00:05:24] *** ChanServ sets mode: +qo dherman dherman
[00:08:43] <kmc> ibnc: are you in the servo meeting on vidyo?
[00:10:11] <ibnc> kmc: yeah. I don't have a webcam (poor college kid), and my mick is buried in a box atm as I just moved :/ 
[00:11:48] <kmc> ah
[00:13:14] *** Joins: dbaron (dbaron@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[00:13:41] *** Joins: bholley (bholley@moz-BBE3ABD.mv.mozilla.com)
[00:14:09] *** Quits: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[00:14:30] *** Joins: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP)
[00:15:11] *** Quits: dherman (dherman@moz-BBE3ABD.mv.mozilla.com) (Quit: dherman)
[00:16:13] *** Quits: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[00:18:42] *** Quits: bholley (bholley@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[00:21:26] *** Joins: jet (jet@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[00:29:10] <kmc> translating Java constructs to Rust constructs 1:1 is not a pleasing experience
[00:29:21] <kmc> for example this code uses argument type function overloading :/
[00:29:29] <kmc> (which works for Gecko because C++ has it too)
[00:34:33] <jdm> yeah, my solution for the bindings is adding _s
[00:45:34] *** Quits: hoverbear (hoverbear@EBFA78B5.F19E5E7B.E74D50F2.IP) (Quit: Hibernating, be back soon.)
[00:48:00] *** Quits: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com) (Ping timeout)
[00:48:13] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[00:54:56] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[00:55:07] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[00:55:13] *** Quits: Jayflux (Jason@moz-BE138B74.as13285.net) (Quit: Leaving)
[00:55:54] *** Joins: hoverbear (hoverbear@EBFA78B5.F19E5E7B.E74D50F2.IP)
[00:56:18] *** Quits: hoverbear (hoverbear@EBFA78B5.F19E5E7B.E74D50F2.IP) (Quit: Hibernating, be back soon.)
[00:56:30] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[00:56:30] *** ChanServ sets mode: +o brson
[00:59:20] *** Quits: CaseyBecking (CaseyBecki@ED8170C4.82E507D6.C334098E.IP) (Ping timeout)
[00:59:45] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Connection reset by peer)
[00:59:46] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[00:59:55] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[00:59:56] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[01:01:12] <jack> foo() foo_() foo__() foo___()
[01:01:23] <jack> and the number of _ probably doesn't correlate with anything
[01:01:23] *** Parts: patrickkim (Mibbit@B4104EBB.3CC170B1.1E14B209.IP) ()
[01:01:25] *** Joins: patrickkim (Mibbit@B4104EBB.3CC170B1.1E14B209.IP)
[01:01:34] <jack> :)
[01:01:57] <jack> it would probably be better to do it the C -> ObjC binding way
[01:02:12] <jack> foo_char_char_int_object()
[01:02:34] *** Joins: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP)
[01:03:03] *** Quits: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[01:03:06] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[01:03:29] *** Joins: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP)
[01:05:14] *** Quits: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[01:13:16] *** Quits: jet (jet@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: jet)
[01:13:53] <kmc> http://livegrep.com/search/linux?q=\b_________[a-z]
[01:13:56] <kmc> typeof(*p) *_________p1 = (typeof(*p)*__force )ACCESS_ONCE(p);
[01:14:13] <cmr> wat
[01:19:06] <jdm> haha
[01:19:08] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[01:22:22] <strcat> kmc: http://codesearch.debian.net/ I like this ;p
[01:22:31] <strcat> indexed re2-style regexp <3
[01:22:41] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[01:23:00] <kmc> that's what livegrep is too
[01:23:12] <strcat> ah
[01:23:19] <strcat> but it's not more than linux, is it?
[01:23:21] <kmc> except it's so fast that you have the result by the time your finger leaves the last key
[01:23:34] <kmc> like, try typing in that "regex:" box
[01:23:41] <kmc> it has Linux and Android Open Source Project
[01:23:44] <kmc> but not all of Debian :/
[01:26:01] *** Joins: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com)
[01:41:30] *** Joins: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP)
[01:41:36] *** Quits: harth (heather@moz-C07D5168.p2p.sfo1.mozilla.com) (Client exited)
[01:43:10] *** Quits: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP) (Quit: Lost terminal)
[01:45:47] *** Joins: CaseyBecking (CaseyBecki@moz-29F30CC3.lsanca.fios.verizon.net)
[01:45:54] *** Joins: harth (heather@moz-C07D5168.p2p.sfo1.mozilla.com)
[01:46:12] *** Quits: harth (heather@moz-C07D5168.p2p.sfo1.mozilla.com) (Client exited)
[01:49:47] *** Quits: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[01:50:08] *** Joins: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP)
[01:51:57] *** Quits: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[01:53:31] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[01:54:19] <patrickkim> #nick ryanhc
[01:55:21] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[01:55:21] *** ChanServ sets mode: +o brson
[02:00:00] *** Joins: yichoi_ (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[02:00:48] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[02:03:56] *** Quits: yichoi_ (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[02:04:22] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[02:06:11] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[02:07:16] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[02:07:17] *** ChanServ sets mode: +o pcwalton
[02:08:44] *** Joins: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net)
[02:12:52] *** Joins: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP)
[02:12:52] <ghservo> [13servo] 15kmcallister opened issue #1361: Make style damage useful again 02http://git.io/LRHstQ
[02:12:52] *** Parts: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP) ()
[02:16:12] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[02:16:35] *** Joins: ghservo (ghservo@79968228.6A2AE50.F3114085.IP)
[02:16:35] <ghservo> [13servo] 15pcwalton opened pull request #1362: layout: Remove `DisplayBoxes` to save memory and as one step toward an (06master...06rm-display-boxes) 02http://git.io/-blPpw
[02:16:35] *** Parts: ghservo (ghservo@79968228.6A2AE50.F3114085.IP) ()
[02:16:36] *** Quits: fabrice (fabrice@moz-7B0110AD.mv.mozilla.com) (Quit: Leaving.)
[02:16:37] <pcwalton> larsberg: r? https://github.com/mozilla/servo/pull/1362
[02:17:39] <larsberg> pcwalton:  looking at it now
[02:18:21] *** Quits: dbaron (dbaron@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Ping timeout)
[02:18:24] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[02:18:36] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[02:18:43] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[02:22:55] <larsberg> pcwalton: Looks good. Do we have any tests for it? Or is hit testing something we don't have any automated tests for yet?
[02:23:08] <pcwalton> we might have tests, I'm not sure
[02:23:10] <pcwalton> seems hard to test
[02:23:16] <pcwalton> without special stuff like Gecko's simulateEvent()
[02:23:31] <cmr> xdotool?
[02:24:47] <larsberg> Yeah, I agree. Real interaction testing is a pain, even mocked. This looks like a good step forward I'll r+ in a sec.
[02:25:24] *** Quits: TimAbraldes (quassel@125EF623.B2666F0E.66399531.IP) (Input/output error)
[02:30:31] <larsberg> patrickkim: you need to use a forward slash "/" instead of "#" to change your hick
[02:30:46] <patrickkim> ok thank you
[02:31:08] <patrickkim> larsberg : ping
[02:31:19] <larsberg> patrickkim: pong
[02:31:33] <patrickkim> we start parr layout with ryanhc,pradeep90
[02:31:59] <patrickkim> ryanhc send pr 
[02:32:27] <patrickkim> pr content is ~[@box]->~[~box]
[02:33:30] *** Quits: miketaylr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net) (Quit: Leaving...)
[02:33:50] <larsberg> patrickkim: That sounds great! You can r? either to me or to pcwalton. If you want a review during your work day today, you might want to ask pcwalton, as I have to go soon (almost 9PM here and my wife is calling)
[02:34:00] *** Joins: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP)
[02:34:00] <ghservo> [13servo] 15ryanhc opened pull request #1363: removing @ from flowtree. (but cloning boxes when creating a display lis... (06master...06owned_layout)  02http://git.io/qVyM0A
[02:34:00] *** Parts: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP) ()
[02:34:04] <larsberg> Assuming pcwalton isn't about to go home, too :-)
[02:34:16] *** Joins: ghservo (ghservo@C8693FCB.6A2AE50.F3114085.IP)
[02:34:16] <ghservo> 01[13servo01] 15bors-servo pushed 0 new commits to 06auto: 02http://git.io/Gs-wDw
[02:34:16] *** Parts: ghservo (ghservo@C8693FCB.6A2AE50.F3114085.IP) ()
[02:34:21] *** Joins: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP)
[02:34:21] <ghservo> 01[13servo01] 15bors-servo pushed 3 new commits to 06auto: 02http://git.io/lXH8eQ
[02:34:21] <ghservo> 13servo/06auto 1464222f5 15Patrick Walton: layout: Remove `DisplayBoxes` to save memory and as one step toward an...
[02:34:22] <ghservo> 13servo/06auto 14594eb00 15Patrick Walton: layout: Remove the ability to put boxes in display list items.
[02:34:22] <ghservo> 13servo/06auto 14db923fe 15bors-servo: auto merge of #1362 : pcwalton/servo/rm-display-boxes, r=larsbergstrom...
[02:34:24] *** Parts: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP) ()
[02:35:45] <patrickkim> ok lars!
[02:35:48] <patrickkim> thank you
[02:36:02] <pcwalton> patrickkim: r+ assuming acid1 and all tests still pass
[02:38:17] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[02:41:44] <patrickkim> pcwalton : ping
[02:41:49] <pcwalton> patrickkim: pong
[02:42:50] <patrickkim> could you review my pr?
[02:42:54] <patrickkim> https://github.com/mozilla/servo/pull/1356
[02:43:22] <pcwalton> looking
[02:44:00] <patrickkim> my pr have to merge before #1363
[02:46:17] *** Joins: pradeep (pradeep@5AB4884B.FCC4549.14D5B978.IP)
[02:52:18] *** Joins: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP)
[02:52:18] <ghservo> 01[13servo01] 15bors-servo merged 06auto into 06master: 02http://git.io/lXH8eQ
[02:52:18] *** Parts: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP) ()
[02:52:22] *** Joins: ghservo (ghservo@F6EE6DE3.6A2AE50.F3114085.IP)
[02:52:22] <ghservo> [13servo] 15bors-servo closed pull request #1362: layout: Remove `DisplayBoxes` to save memory and as one step toward an (06master...06rm-display-boxes) 02http://git.io/-blPpw
[02:52:22] *** Parts: ghservo (ghservo@F6EE6DE3.6A2AE50.F3114085.IP) ()
[02:57:05] *** Joins: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP)
[02:57:05] <ghservo> 01[13servo01] 15bors-servo pushed 0 new commits to 06auto: 02http://git.io/WirJcA
[02:57:05] *** Parts: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP) ()
[02:59:04] <patrickkim> pcwalton : ping
[02:59:12] <pcwalton> patrickkim: pong
[02:59:54] <patrickkim> i fixed some code
[02:59:59] <patrickkim> let result = FT_Init_FreeType(&ctx);
[03:00:25] <pcwalton> ok, cool
[03:00:26] *** Joins: miketaylr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net)
[03:00:32] <pcwalton> can you check the docs as I suggested for FreeType
[03:00:40] <pcwalton> I seem to recall that FreeType is *not* thread safe in that way
[03:00:43] <pcwalton> is why I ask :\
[03:00:54] <patrickkim> ok i understand
[03:01:14] <patrickkim> but now, every fontcontext makes another freetype handle,
[03:01:32] <patrickkim> but i will check doc of freetype
[03:01:53] <patrickkim> if it is thread safe, it will be shared by fontcontexts
[03:02:17] <pcwalton> ok
[03:02:42] <patrickkim> merge ok?
[03:02:53] <patrickkim> i have to go lunch
[03:02:54] <patrickkim> :(
[03:06:23] *** Joins: ghservo (ghservo@C8693FCB.6A2AE50.F3114085.IP)
[03:06:23] <ghservo> [13servo] 15pcwalton opened issue #1364: Layout should not access the DOM after flow construction 02http://git.io/9YAuEg
[03:06:23] *** Parts: ghservo (ghservo@C8693FCB.6A2AE50.F3114085.IP) ()
[03:07:28] *** Quits: zz_kimundi (kimundi@moz-7496AA85.dip0.t-ipconnect.de) (Ping timeout)
[03:11:06] *** Joins: zz_kimundi (kimundi@moz-19623CE3.dip0.t-ipconnect.de)
[03:11:07] *** zz_kimundi is now known as kimundi
[03:11:20] <jack> pcwalton: freetype docs i looked at basically said it's all threadsafe
[03:11:24] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[03:11:26] <pcwalton> ok
[03:11:52] <strcat> jack: by thread-safe they could easily mean it doesn't use internal globals/statics though ;p
[03:11:57] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[03:12:08] <jack> "The library doesn't use any static writable data at all, making it an ideal choice on various embedded systems (e.g., it can be run from ROM directly). It is completely thread-safe too."
[03:12:11] <cmr> larsberg: when you send me TWiS, it'd make my life a teensy bit easier if you used # instead of * for heading.
[03:12:34] <strcat> jack: the C world doesn't have a uniform definition of thread-safe though
[03:12:35] <jack> cmr: org-mode forever!
[03:12:36] <cmr> larsberg: also, it's a toplevel section, so you don't need to add the extra layer (ie, it can be # This Week in Servo)
[03:13:08] <jack> strcat: this is true. i'm a little too busy to audit the code though.
[03:13:14] <jack> perhaps someone in #gfx knows?
[03:13:30] <strcat> jack: yeah, I just ran into huge problems with libgit2 claiming that ;]
[03:13:40] *** Joins: ghservo (ghservo@C8693FCB.6A2AE50.F3114085.IP)
[03:13:40] <ghservo> 01[13servo01] 15bors-servo pushed 0 new commits to 06auto: 02http://git.io/WirJcA
[03:13:40] *** Parts: ghservo (ghservo@C8693FCB.6A2AE50.F3114085.IP) ()
[03:13:41] * strcat is very wary about a C lib claiming to be thread-safe now
[03:13:49] *** Joins: ghservo (ghservo@79968228.6A2AE50.F3114085.IP)
[03:13:49] <ghservo> 01[13servo01] 15bors-servo pushed 6 new commits to 06auto: 02http://git.io/w_ke-Q
[03:13:49] <ghservo> 13servo/06auto 142865ab4 15patrick kim: remove @ from ScannedTextBox.run
[03:13:49] <ghservo> 13servo/06auto 145077c77 15patrick kim: make font/platform/gfx/font_context safe
[03:13:49] <ghservo> 13servo/06auto 14f187035 15patrick kim: remove @ in LayoutTask.FontContext
[03:13:50] <strcat> libgit2 means "thread-safe if you do synchronization yourself"
[03:13:51] *** Parts: ghservo (ghservo@79968228.6A2AE50.F3114085.IP) ()
[03:13:55] <cmr> ...lol
[03:14:10] <cmr> better than nothing I suppose
[03:14:20] <strcat> well some is actually internally synchronized
[03:14:22] <strcat> some isn't
[03:14:32] <strcat> if you don't entirely know how git works internally it's hard to know
[03:14:47] <strcat> what they really mean is that it's reentrant and they synchronize the cache
[03:15:03] <strcat> but I'm pretty sure if you make two commits unsynchronized, it can race
[03:15:15] * strcat shrugs
[03:15:21] <strcat> it's a pretty worthless thing for them to say :(
[03:15:27] *** Quits: ibnc (ibnc@moz-718F3037.client.mchsi.com) (Client exited)
[03:18:08] *** Joins: ibnc (ibnc@moz-718F3037.client.mchsi.com)
[03:26:29] *** Joins: ghservo (ghservo@1E8607E8.6A2AE50.F3114085.IP)
[03:26:29] <ghservo> [13servo] 15pcwalton opened pull request #1365: Minor layout refactoring (06master...06minor-layout-refactoring) 02http://git.io/IVQr8w
[03:26:29] *** Parts: ghservo (ghservo@1E8607E8.6A2AE50.F3114085.IP) ()
[03:26:31] <pcwalton> jack: r? https://github.com/mozilla/servo/pull/1365
[03:26:40] <pcwalton> just some refactoring because those monster functions were annoying me
[03:30:02] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Quit: pcwalton)
[03:31:32] *** Joins: ghservo (ghservo@1E8607E8.6A2AE50.F3114085.IP)
[03:31:32] <ghservo> 01[13servo01] 15bors-servo merged 06auto into 06master: 02http://git.io/w_ke-Q
[03:31:32] *** Parts: ghservo (ghservo@1E8607E8.6A2AE50.F3114085.IP) ()
[03:31:33] *** Joins: ghservo (ghservo@C8693FCB.6A2AE50.F3114085.IP)
[03:31:33] <ghservo> [13servo] 15bors-servo closed pull request #1356: Remove @ in LayoutTask.FontContext, ScannedTextBox.text_run (06master...06remove_@_in_LayoutTask.FontContext) 02http://git.io/BkKigw
[03:31:33] *** Parts: ghservo (ghservo@C8693FCB.6A2AE50.F3114085.IP) ()
[03:34:49] *** Quits: ahal (ahal@moz-7DE89BF0.cable.teksavvy.com) (Input/output error)
[03:35:49] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[03:35:50] *** ChanServ sets mode: +o pcwalton
[03:36:42] <pcwalton> jack: free type is NOT thread safe
[03:36:43] <pcwalton> http://lists.gnu.org/archive/html/freetype/2003-04/msg00054.html
[03:37:10] <pcwalton> can I back that out?
[03:40:18] *** Joins: ghservo (ghservo@1E8607E8.6A2AE50.F3114085.IP)
[03:40:18] <ghservo> 01[13servo01] 15bors-servo pushed 3 new commits to 06auto: 02http://git.io/PdCBDQ
[03:40:18] <ghservo> 13servo/06auto 147148a28 15Patrick Walton: layout: Refactor `try_append_to_line` to eliminate duplicate code.
[03:40:18] <ghservo> 13servo/06auto 142624b93 15Patrick Walton: layout: Refactor `InlineFlow::assign_height` to pull out horizontal...
[03:40:19] <ghservo> 13servo/06auto 147fd3dd9 15bors-servo: auto merge of #1365 : pcwalton/servo/minor-layout-refactoring, r=metajack...
[03:40:21] *** Parts: ghservo (ghservo@1E8607E8.6A2AE50.F3114085.IP) ()
[03:40:54] *** Joins: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP)
[03:40:54] <ghservo> 01[13servo01] 15pcwalton pushed 1 new commit to 06master: 02http://git.io/9HA2nA
[03:40:54] <ghservo> 13servo/06master 1430bbaa4 15Patrick Walton: Revert "auto merge of #1356 : ksh8281/servo/remove_@_in_LayoutTask.FontContext, r=pcwalton"...
[03:40:54] *** Parts: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP) ()
[03:41:15] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Quit: pcwalton)
[03:42:27] <jack> pcwalton: wtf?!? why would you even say it's threadsafe then?
[03:42:36] <jack> although that is a really old email
[03:43:09] <strcat> jack: they mean it's reentrant
[03:43:15] <strcat> or something like that
[03:43:19] *** Joins: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP)
[03:43:19] <ghservo> 01[13servo01] 15bors-servo pushed 3 new commits to 06auto: 02http://git.io/mum-zQ
[03:43:19] <ghservo> 13servo/06auto 147148a28 15Patrick Walton: layout: Refactor `try_append_to_line` to eliminate duplicate code.
[03:43:19] <ghservo> 13servo/06auto 142624b93 15Patrick Walton: layout: Refactor `InlineFlow::assign_height` to pull out horizontal...
[03:43:20] <ghservo> 13servo/06auto 146014bd3 15bors-servo: auto merge of #1365 : pcwalton/servo/minor-layout-refactoring, r=metajack...
[03:43:20] <strcat> that's what POSIX means by thread-safe too
[03:43:22] *** Parts: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP) ()
[03:44:00] <jack> pcwalton: is it enough to just make that FontContextHandle non-sendable?
[03:46:50] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Quit: Leaving.)
[03:47:39] *** Joins: CaseyBec_ (CaseyBecki@moz-29F30CC3.lsanca.fios.verizon.net)
[03:47:52] *** Quits: CaseyBecking (CaseyBecki@moz-29F30CC3.lsanca.fios.verizon.net) (Ping timeout)
[03:48:23] <larsberg> cmr: will do in the future! Sorry for the inconvenience and thanks for including the servo info
[04:04:18] *** Joins: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP)
[04:04:18] <ghservo> 01[13servo01] 15bors-servo merged 06auto into 06master: 02http://git.io/mum-zQ
[04:04:18] *** Parts: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP) ()
[04:04:19] *** Joins: ghservo (ghservo@F6EE6DE3.6A2AE50.F3114085.IP)
[04:04:19] <ghservo> [13servo] 15bors-servo closed pull request #1365: Minor layout refactoring (06master...06minor-layout-refactoring) 02http://git.io/IVQr8w
[04:04:19] *** Parts: ghservo (ghservo@F6EE6DE3.6A2AE50.F3114085.IP) ()
[04:17:53] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[04:21:33] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[04:21:33] *** ChanServ sets mode: +o jdm
[04:21:44] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[04:25:57] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[04:25:59] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[04:28:26] *** Joins: vodik_ (simon@moz-FD4ADBC6.cable.teksavvy.com)
[04:28:52] *** Quits: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[04:31:29] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[04:32:49] *** Joins: ghservo (ghservo@1E8607E8.6A2AE50.F3114085.IP)
[04:32:49] <ghservo> [13servo] 15jdm closed pull request #1303: Mozilla Canvas Rendering Context 2D. (06master...06master) 02http://git.io/MqFqXg
[04:32:49] *** Parts: ghservo (ghservo@1E8607E8.6A2AE50.F3114085.IP) ()
[04:51:06] *** patrickkim is now known as ryanhc
[04:51:07] *** Joins: fabrice (fabrice@moz-94F028C6.hsd1.ca.comcast.net)
[04:51:15] <ryanhc> pcwalton:ping
[04:51:19] <ryanhc> pcwalton : ping
[04:52:13] <ryanhc> larsberg : ping
[04:54:02] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[04:54:10] <ryanhc> :ping jack
[04:54:39] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[04:54:49] <ryanhc> :ping jack
[04:54:57] <jack> ryanhc: pong
[04:54:58] <ryanhc> ping : jack
[04:55:21] <ryanhc> cout
[04:55:38] <ryanhc> i sent a pr about removing @ earlier this morning
[04:55:54] <ryanhc> patrick r+ it, but he added his code, and my code broke
[04:56:04] <jack> ah. let me go look
[04:56:05] <ryanhc> i rebased my src on top of his, and now it works
[04:56:16] <ryanhc> could you have a look at it? thanks
[04:58:26] *** Quits: canhtak (canhtak@moz-A53E1151.wl.t.ulaval.ca) (Quit: canhtak)
[04:58:38] <jack> ryanhc: done
[04:58:58] <ryanhc> thanks jack
[05:01:10] *** Joins: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP)
[05:01:10] <ghservo> 01[13servo01] 15bors-servo pushed 0 new commits to 06auto: 02http://git.io/gXILvg
[05:01:10] *** Parts: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP) ()
[05:01:16] *** Joins: ghservo (ghservo@79968228.6A2AE50.F3114085.IP)
[05:01:16] <ghservo> 01[13servo01] 15bors-servo pushed 2 new commits to 06auto: 02http://git.io/aykUzA
[05:01:16] <ghservo> 13servo/06auto 14d26bf36 15Ryan Choi: removing @ from flowtree. (but cloning boxes when creating a display list)
[05:01:16] <ghservo> 13servo/06auto 14794ea62 15bors-servo: auto merge of #1363 : ryanhc/servo/owned_layout, r=metajack...
[05:01:16] *** Parts: ghservo (ghservo@79968228.6A2AE50.F3114085.IP) ()
[05:02:21] <eddyb> wouldn't Rc work better than cloning?
[05:03:58] *** Quits: ibnc (ibnc@moz-718F3037.client.mchsi.com) (Client exited)
[05:04:12] <dbaupp> eddyb: not sendable
[05:04:18] * dbaupp is guessing
[05:04:27] <eddyb> @ wasn't either
[05:04:54] <eddyb> if you really need it to be sendable, you want Arc/RWArc, but then the ref-counting cost is even higher
[05:04:58] <jack> one of the reasons to remove @ is to make things parallelizable, which implies sending to sub-tasks
[05:10:13] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[05:10:14] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[05:10:39] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Quit: )
[05:11:39] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[05:11:43] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Quit: yichoi)
[05:12:07] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[05:12:16] *** Parts: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) ()
[05:12:37] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[05:12:40] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Quit: yichoi)
[05:12:52] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[05:22:38] *** Joins: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP)
[05:22:38] <ghservo> [13servo] 15bors-servo closed pull request #1363: removing @ from flowtree. (but cloning boxes when creating a display lis... (06master...06owned_layout) 02http://git.io/qVyM0A
[05:22:38] *** Parts: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP) ()
[05:26:19] *** Joins: ibnc (ibnc@moz-718F3037.client.mchsi.com)
[05:28:01] *** Quits: ibnc (ibnc@moz-718F3037.client.mchsi.com) (Ping timeout)
[05:36:04] *** Quits: miketaylr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net) (Quit: Leaving...)
[05:47:31] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[05:47:31] *** ChanServ sets mode: +o pcwalton
[05:47:38] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[05:49:00] *** Joins: harth (heather@moz-C07D5168.p2p.sfo1.mozilla.com)
[05:52:55] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Quit: yichoi)
[05:53:16] *** Quits: dbaupp (Thunderbir@1D1B1F7A.D5A1DCF.37681C44.IP) (Ping timeout)
[05:55:34] *** Quits: CaseyBec_ (CaseyBecki@moz-29F30CC3.lsanca.fios.verizon.net) (Client exited)
[05:55:40] *** Joins: CaseyBecking (CaseyBecki@moz-29F30CC3.lsanca.fios.verizon.net)
[05:56:20] *** Quits: CaseyBecking (CaseyBecki@moz-29F30CC3.lsanca.fios.verizon.net) (Client exited)
[05:56:45] *** Joins: CaseyBecking (CaseyBecki@moz-29F30CC3.lsanca.fios.verizon.net)
[06:16:11] *** Joins: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP)
[06:16:11] <ghservo> 01[13servo01] 15bors-servo pushed 0 new commits to 06auto: 02http://git.io/33CreQ
[06:16:11] *** Parts: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP) ()
[06:16:15] *** Joins: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP)
[06:16:15] <ghservo> 01[13servo01] 15bors-servo pushed 2 new commits to 06auto: 02http://git.io/-UkSZg
[06:16:15] <ghservo> 13servo/06auto 142d3fa10 15Daniel Hedlund: Preserve port and user/pass info for path-based resources
[06:16:15] <ghservo> 13servo/06auto 144b3defb 15bors-servo: auto merge of #1353 : dhedlund/servo/resource_port_and_user, r=pcwalton...
[06:16:16] *** Parts: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP) ()
[06:16:18] *** Quits: bjz (bjz@moz-C1B1AF2A.lnse2.cha.bigpond.net.au) (Ping timeout)
[06:17:03] *** Joins: bjz (bjz@moz-C1B1AF2A.lnse2.cha.bigpond.net.au)
[06:17:16] *** Joins: miketaylr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net)
[06:19:03] *** Quits: miketaylr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net) (Connection reset by peer)
[06:19:05] *** Joins: miketaylrrrr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net)
[06:21:33] *** Quits: miketaylrrrr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net) (Ping timeout)
[06:31:05] *** Quits: deokjinkim (Mibbit@B4104EBB.3CC170B1.1E14B209.IP) (Ping timeout)
[06:41:15] *** Joins: ghservo (ghservo@79968228.6A2AE50.F3114085.IP)
[06:41:15] <ghservo> 01[13servo01] 15bors-servo merged 06auto into 06master: 02http://git.io/-UkSZg
[06:41:15] *** Parts: ghservo (ghservo@79968228.6A2AE50.F3114085.IP) ()
[06:41:18] *** Joins: ghservo (ghservo@1E8607E8.6A2AE50.F3114085.IP)
[06:41:18] <ghservo> [13servo] 15bors-servo closed pull request #1353: Preserve port and user/pass info for path-based resources (06master...06resource_port_and_user) 02http://git.io/H5dbDw
[06:41:18] *** Parts: ghservo (ghservo@1E8607E8.6A2AE50.F3114085.IP) ()
[06:50:04] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[06:51:49] *** Joins: dbaupp (Thunderbir@moz-EB2EFE6F.lns20.syd6.internode.on.net)
[06:53:27] *** Quits: bjz (bjz@moz-C1B1AF2A.lnse2.cha.bigpond.net.au) (Ping timeout)
[06:57:09] *** Joins: bjz (bjz@moz-C1B1AF2A.lnse2.cha.bigpond.net.au)
[06:58:57] *** Quits: bjz (bjz@moz-C1B1AF2A.lnse2.cha.bigpond.net.au) (Ping timeout)
[07:07:48] *** Quits: benh (ben@moz-4A0366D2.org) (Ping timeout)
[07:17:26] *** Quits: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net) (Quit: Hibernating, be back soon.)
[07:19:04] *** Joins: miketaylr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net)
[07:19:47] *** Quits: vodik_ (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[07:20:02] *** Joins: vodik_ (simon@moz-FD4ADBC6.cable.teksavvy.com)
[07:21:19] *** Quits: miketaylr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net) (Ping timeout)
[07:26:33] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Quit: yichoi)
[07:39:42] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[07:40:12] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Quit: yichoi)
[07:41:02] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[07:41:25] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Quit: yichoi)
[07:42:21] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[07:43:04] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Quit: yichoi)
[07:44:02] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[07:48:58] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[07:49:23] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[07:51:33] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Quit: yichoi)
[07:51:55] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[07:56:52] *** Joins: bjz (bjz@moz-C1B1AF2A.lnse2.cha.bigpond.net.au)
[07:57:55] *** Joins: victorporof (victorporo@C8C495F5.E3195F0D.9B1E38F4.IP)
[08:01:37] *** Quits: harth (heather@moz-C07D5168.p2p.sfo1.mozilla.com) (Client exited)
[08:02:23] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Quit: yichoi)
[08:03:22] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[08:03:44] *** Quits: bjz (bjz@moz-C1B1AF2A.lnse2.cha.bigpond.net.au) (Ping timeout)
[08:16:37] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[08:17:22] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Quit: yichoi)
[08:18:08] *** Joins: miketaylr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net)
[08:18:41] *** Quits: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com) (Ping timeout)
[08:20:22] *** Quits: miketaylr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net) (Ping timeout)
[08:21:58] *** Joins: benh (ben@moz-4A0366D2.org)
[08:24:17] *** Parts: benh (ben@moz-4A0366D2.org) ()
[08:24:55] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[08:27:19] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:27:40] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:29:52] *** Joins: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com)
[08:30:20] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:32:09] *** Joins: bjz (bjz@moz-C1B1AF2A.lnse2.cha.bigpond.net.au)
[08:43:17] *** Quits: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com) (Ping timeout)
[08:43:26] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:43:36] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[08:50:49] *** Joins: jaeman (Mibbit@B4104EBB.3CC170B1.1E14B209.IP)
[08:57:48] *** Quits: ryanhc (Mibbit@B4104EBB.3CC170B1.1E14B209.IP) (Ping timeout)
[09:18:08] *** Joins: miketaylr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net)
[09:20:24] *** Quits: miketaylr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net) (Ping timeout)
[09:32:41] *** Quits: yury (yury@moz-86474802.ok.ok.cox.net) (Ping timeout)
[09:32:45] *** Joins: yury (yury@moz-86474802.ok.ok.cox.net)
[09:37:00] <eddyb> I'm already seeing quirks with this
[09:37:46] <eddyb> like, tRNS after IDAT could make a PNG display differently in all libpng-using browsers and servo
[09:38:32] <dbaupp> eddyb: do you have an example?
[09:38:42] <eddyb> not right now, with my library :P
[09:44:25] *** Joins: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com)
[09:50:42] *** Quits: pradeep (pradeep@5AB4884B.FCC4549.14D5B978.IP) (Quit: leaving)
[10:05:13] *** kimundi is now known as zz_kimundi
[10:12:29] *** Quits: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com) (Ping timeout)
[10:14:55] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Quit: yichoi)
[10:18:08] *** Joins: miketaylr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net)
[10:20:33] *** Quits: miketaylr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net) (Ping timeout)
[10:26:09] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[10:26:27] <eddyb> this doesn't make it obvious how grayscale samples with less than 8 bits are to be checked http://www.w3.org/TR/PNG/#11tRNS
[10:26:57] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Quit: yichoi)
[10:27:02] <eddyb> I guess original, not decoded
[10:31:02] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Quit: Lost terminal)
[10:35:27] *** Joins: glazou (glazou@D8B9C081.E820043D.D4C04133.IP)
[10:35:51] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[10:48:14] <cmr> larsberg: it's not a big deal
[10:54:13] *** Joins: Ms2ger (Ms2ger@moz-664B2345.ugent.be)
[10:59:13] *** Joins: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com)
[11:13:45] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Quit: yichoi)
[11:14:55] <glazou> Ms2ger, ping
[11:15:26] <Ms2ger> ack
[11:15:27] <glazou> Ms2ger, how do you understand the "and" at the end of item 2 in http://dom.spec.whatwg.org/#dom-document-createelementns ?
[11:15:50] <glazou> a spec error ?-)
[11:16:04] <Ms2ger> Always possible
[11:16:05] * Ms2ger looks
[11:16:13] <Ms2ger> Heh
[11:17:05] <glazou> I think 2 and 3 and not written correctly
[11:17:49] <glazou> if not a name, then test if QName ; if not a QName throw namespace error and if not both throw invalidcharacter error
[11:18:08] *** Joins: miketaylr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net)
[11:18:28] <Ms2ger> It was "and terminate these steps."
[11:19:00] <glazou> right that's what my prose above does
[11:19:24] <glazou> in fact no
[11:20:32] *** Quits: miketaylr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net) (Ping timeout)
[11:21:26] *** zz_kimundi is now known as kimundi
[11:22:48] <Ms2ger> Okay, the 'and' is gone
[11:23:45] <glazou> thanks
[11:24:45] <Ms2ger> So what's the other issue? :)
[11:26:18] <glazou> no other issue :-)
[11:26:27] *** Quits: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com) (Ping timeout)
[11:26:48] <Ms2ger> Excellent :)
[11:27:02] <Ms2ger> Those XML productions make my head hurt
[11:30:12] <glazou> me too
[11:30:15] *** Quits: jaeman (Mibbit@B4104EBB.3CC170B1.1E14B209.IP) (Ping timeout)
[11:46:24] *** Quits: Ms2ger (Ms2ger@moz-664B2345.ugent.be) (Ping timeout)
[11:58:39] *** Joins: canhtak (canhtak@moz-1D882009.wl.t.ulaval.ca)
[12:01:41] *** Joins: jensnockert (jensnocker@moz-250D9518.wireless.lu.se)
[12:18:08] *** Joins: miketaylr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net)
[12:20:23] *** Quits: miketaylr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net) (Ping timeout)
[12:27:07] *** Joins: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com)
[12:31:16] <eddyb> impl Option<~Decoder> { pub fn update<'a>(&'a mut self, mut data: &[u8]) -> Result<Either<&'a Image, ~Image>, ~str> { ... } }
[12:31:22] <eddyb> not sure if I like that
[12:32:02] <eddyb> I was going for "error, partial image, or complete image, with the possibility of invalidating self"
[12:32:38] <dbaupp> eddyb: maybe worth `enum ImageState {Error(~str), Partial(...), Complete(...)}`?
[12:33:20] <eddyb> that would actually work, if I get the guts of that function to borrowck
[12:33:53] <eddyb> it's funny how hard mutability is in rust
[12:35:57] <eddyb> png.rs:210:13: 210:26 error: found module name used as a type: impl __extensions__ (id=4645)
[12:35:58] <eddyb> png.rs:210     palette: Option<~[u8]>,
[12:36:09] <eddyb> what just happened there?
[12:36:25] <dbaupp> that's weird
[12:37:03] <eddyb> I know what happened. impl Option<~Decoder> {
[12:38:21] <eddyb> haha, the new dead code pass. it's so broken here
[12:38:50] <dbaupp> really?
[12:39:24] <eddyb> well, no. it's just *too* smart. I didn't have my update function pub
[12:40:07] <dbaupp> as in, your code was wrong? :P
[12:40:42] <eddyb> wasn't wrong, it just wasn't fully reachable
[12:41:00] <eddyb> and it marked all my types as dead
[12:41:07] <dbaupp> hah
[12:42:31] <cmr> so, working as advertised? :p
[12:42:51] <eddyb> *better* than advertised
[12:42:56] <dbaupp> <3 cool lints
[12:43:02] <eddyb> #[link(name = "z")] // however, this doesn't pull -lz in
[12:43:09] <eddyb> (on an extern block)
[12:43:22] <eddyb> am I being stupid?
[12:43:22] <dbaupp> eddyb: do you want it static?
[12:43:27] <cmr> yes
[12:43:49] <eddyb> dbaupp: nope
[12:44:06] <cmr> #[link(name="z", kind="dylib")]
[12:44:17] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[12:44:33] <eddyb> error: unknown kind: `dylib` // :(
[12:44:52] <cmr> oh hm
[12:45:02] <cmr> I had that backwards
[12:45:11] <eddyb> I compiled master yesterday, IIRC
[12:45:29] <dbaupp> eddyb: are you compiling a binary or a library atm?
[12:45:36] <eddyb> --test
[12:45:47] <eddyb> so it should be producing a binary
[12:46:02] <dbaupp> but it's hitting linkage failures?
[12:46:14] <eddyb> png.rc:(.text+0x24d): undefined reference to `inflateInit'
[12:46:43] <eddyb> wait, there's a -lz
[12:46:46] <eddyb> o_O
[12:46:55] <dbaupp> do you have the right names?
[12:47:35] <dbaupp> hm seems that inflateInit is correct.
[12:47:36] <eddyb> I think I know what it is, cause that's the only one which errors. inflateInit2 is a similar function and inflateInit might be a macro
[12:48:02] <eddyb> #define inflateInit(strm) \
[12:48:03] <eddyb>         inflateInit_((strm), ZLIB_VERSION, (int)sizeof(z_stream))
[12:48:12] <eddyb> both init functions do that >_>
[12:49:16] <dbaupp> but there's also
[12:49:18] <eddyb> I hate how the manual has a portable function definition but they go ahead and make it a macro
[12:49:19] <dbaupp> ZEXTERN int ZEXPORT inflateInit OF((z_streamp strm));
[12:49:23] <dbaupp> etc.
[12:49:29] <eddyb> dbaupp: it's in a comment
[12:49:34] <dbaupp> oh, how tricky
[12:49:43] <dbaupp> how about `ZEXTERN int ZEXPORT inflateInit_ OF((z_streamp strm,` then
[12:50:04] <eddyb> yeah, looking for the correct parameters right now
[12:50:30] <eddyb> #define ZLIB_VERSION "1.2.8"
[12:50:35] <eddyb> bye bye portability
[12:50:50] <dbaupp> fwiw, it may be worth having a statically linked C wrapper that handles that for you?
[12:50:57] <dbaupp> i.e. two functions
[12:51:47] <eddyb> oooh, I can call zlibVersion and it should work for all versions using that same macro
[12:56:40] *** Quits: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com) (Ping timeout)
[12:56:54] <eddyb> test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured
[12:56:57] <eddyb> :D
[12:57:47] <eddyb> so why can't I impl Option<~Decoder> {?
[12:57:59] <eddyb> it creates a module, which breaks Option for everything else
[12:59:09] <eddyb> fully qualified name works
[12:59:58] <eddyb> error: cannot associate methods with a type outside the crate the type is defined in; define and implement a trait or new type instead
[13:05:46] *** Joins: Ms2ger (Ms2ger@moz-664B2345.ugent.be)
[13:18:07] *** Joins: miketaylr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net)
[13:20:35] *** Quits: miketaylr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net) (Ping timeout)
[13:21:50] *** kimundi is now known as zz_kimundi
[13:26:03] <eddyb> dbaupp: this is very frustrating
[13:27:12] <eddyb> the easy way to fix this is just use take() and have a temporarily invalid Option<~T> which I guess is fine by all means
[13:36:56] *** Quits: victorporof (victorporo@C8C495F5.E3195F0D.9B1E38F4.IP) (Quit: victorporof)
[13:42:30] *** bhearsum|afk is now known as bhearsum
[13:43:35] <eddyb> skipping unrecognized PNG chunk `iCCP`, skipping unrecognized PNG chunk `iTXt`
[13:46:25] *** Quits: canhtak (canhtak@moz-1D882009.wl.t.ulaval.ca) (Quit: canhtak)
[13:53:35] <eddyb> #define Z_VERSION_ERROR (-6) // but.... I fed it the version it wants
[13:54:58] *** Quits: jensnockert (jensnocker@moz-250D9518.wireless.lu.se) (Input/output error)
[13:55:30] *** Joins: jensnockert (jensnocker@moz-250D9518.wireless.lu.se)
[13:57:15] *** Quits: jensnockert (jensnocker@moz-250D9518.wireless.lu.se) (Ping timeout)
[13:58:06] *** Joins: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com)
[14:00:04] *** bhearsum is now known as bhearsum|buildduty
[14:01:36] <eddyb> ZLIB_VERSION=`1.2.8` and #define ZLIB_VERSION "1.2.8"
[14:01:52] <eddyb> so zlibVersion returns the right string
[14:01:53] *** zz_kimundi is now known as kimundi
[14:01:56] <eddyb> is my header broken?
[14:05:38] *** Joins: jensnockert (jensnocker@moz-250D9518.wireless.lu.se)
[14:08:16] *** Joins: ahal (ahal@moz-7DE89BF0.cable.teksavvy.com)
[14:18:07] *** Joins: miketaylr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net)
[14:18:47] *** Joins: ibnc (ibnc@moz-718F3037.client.mchsi.com)
[14:20:30] *** Quits: ibnc (ibnc@moz-718F3037.client.mchsi.com) (Ping timeout)
[14:20:34] *** Quits: miketaylr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net) (Ping timeout)
[14:26:29] *** Quits: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com) (Ping timeout)
[14:33:52] <eddyb> dbaupp: oh wow, I just realized I can get rid of the machinery I added, my State is copiable again >_>
[14:34:18] <eddyb> yay for useless work
[14:40:02] *** Joins: ibnc (ibnc@moz-718F3037.client.mchsi.com)
[14:50:43] *** kimundi is now known as zz_kimundi
[14:52:04] *** Joins: victorporof (victorporo@C8C495F5.E3195F0D.9B1E38F4.IP)
[14:52:16] *** zz_kimundi is now known as kimundi
[14:57:36] *** Quits: jensnockert (jensnocker@moz-250D9518.wireless.lu.se) (Input/output error)
[15:01:10] <eddyb> woo, it loads! I was supposed to have this working two days ago
[15:01:22] <Ms2ger> :D
[15:03:09] *** Quits: glazou (glazou@D8B9C081.E820043D.D4C04133.IP) (Ping timeout)
[15:03:55] *** Quits: ibnc (ibnc@moz-718F3037.client.mchsi.com) (Quit: )
[15:06:19] <eddyb> bench:         0 ns/iter (+/- 0) = 2074176000 MB/s
[15:06:42] <eddyb> ehhh that test image is too big
[15:07:40] *** Quits: CaseyBecking (CaseyBecki@moz-29F30CC3.lsanca.fios.verizon.net) (Client exited)
[15:07:46] *** Joins: CaseyBecking (CaseyBecki@moz-29F30CC3.lsanca.fios.verizon.net)
[15:18:08] *** Joins: miketaylr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net)
[15:20:31] *** Quits: miketaylr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net) (Ping timeout)
[15:21:10] *** Quits: CaseyBecking (CaseyBecki@moz-29F30CC3.lsanca.fios.verizon.net) (Client exited)
[15:24:59] *** kimundi is now known as zz_kimundi
[15:26:53] *** Joins: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com)
[15:29:26] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[15:29:57] *** ahal is now known as ahal|afk
[15:31:56] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[15:33:21] <eddyb> what on earth was that? swap hell? fork bomb?
[15:33:36] <eddyb> cmr: btw, I found out what was wrong with my implementation: --opt-level=0
[15:33:41] <eddyb> for a state machine, that is bad
[15:34:55] <eddyb> libpng: test test::bench_load ... bench:     22867 ns/iter (+/- 2764) = 17 MB/s
[15:35:04] <eddyb> me: test test::bench_load ... bench:     24991 ns/iter (+/- 1227) = 16 MB/s
[15:35:11] <cmr> and that's compared to libpng?
[15:35:30] <eddyb> I'm still doing some stupid things, I think
[15:36:27] <eddyb> I don't like how the benchmarks aren't reliable
[15:36:43] <cmr> fix the bench runner! it's only really reliable for a few hundred ns.
[15:37:23] <eddyb> and this is a tiny image, too
[15:37:31] <eddyb> it's probably measuring the performance of malloc
[15:38:00] *** Joins: froglegstew (Mibbit@moz-7CD2F96E.informatik.tu-muenchen.de)
[15:43:23] <eddyb> 400MB o_O
[15:43:50] <eddyb> cmr: why would it vary in the memory usage?
[15:45:00] <eddyb> aaaaaah I know why =))
[15:46:44] *** Joins: ghservo (ghservo@1E8607E8.6A2AE50.F3114085.IP)
[15:46:44] <ghservo> [13servo] 15larsbergstrom opened issue #1366: Acid2 requirements 02http://git.io/bR1Qow
[15:46:44] *** Parts: ghservo (ghservo@1E8607E8.6A2AE50.F3114085.IP) ()
[15:47:32] *** Joins: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP)
[15:47:32] <ghservo> [13servo] 15larsbergstrom closed issue #1279: Support for transparent PNG 02http://git.io/MXdJQw
[15:47:32] *** Parts: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP) ()
[15:49:48] <eddyb> about that, I'm not implementing K8 as an output ColorType because K* can have a tRNS chunk and then it should be outputted as KA8
[15:52:41] *** Joins: miketaylr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net)
[15:52:52] <eddyb> cmr: hah, I beat libpng: test test::bench_load ... bench:     21561 ns/iter (+/- 4722) = 18 MB/s
[15:53:42] <eddyb> my problem before was that I was never freeing the zlib data and it tends to pile up
[15:55:21] *** Joins: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net)
[15:56:16] *** Joins: CaseyBecking (CaseyBecki@ED8170C4.82E507D6.C334098E.IP)
[15:56:50] *** Quits: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com) (Ping timeout)
[15:57:56] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[16:06:59] *** Quits: froglegstew (Mibbit@moz-7CD2F96E.informatik.tu-muenchen.de) (Quit: http://www.mibbit.com ajax IRC Client)
[16:07:28] <dhedlund> Is there anyone on Linux who can successfully run "./servo -o about-mozilla.png ../src/test/html/about-mozilla.html" and have it result in a non-corrupt png file?
[16:07:51] <eddyb> hah, did I break something?
[16:08:34] <eddyb> i.e. is it caused by my PRs to rust-png?
[16:09:07] <Ms2ger> Not sure if it's corrupt, but it sure doesn't look like it should
[16:09:20] <dhedlund> eddyb: Is your PR in master?
[16:09:38] <eddyb> I have no idea, that's why I'm asking
[16:09:59] <dhedlund> corrupt as in it looks bad in an image viewer, not that it's an invalid png file
[16:10:04] <eddyb> the potentially breaking change is @@mut Writer -> &mut &mut Writer, but.... ah nvm
[16:10:07] *** Joins: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP)
[16:10:07] <ghservo> [13rust-cssparser] 15SimonSapin opened pull request #32: Remove Python-generated binary search and use match for color keywords (06master...06master) 02http://git.io/CT7c3g
[16:10:07] *** Parts: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP) ()
[16:11:56] *** Joins: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP)
[16:11:56] <ghservo> [13servo] 15larsbergstrom closed issue #237: Write an image decoding library 02http://git.io/WIKfZg
[16:11:56] *** Parts: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP) ()
[16:12:07] <dhedlund> I've been trying to get the ref tests to work but have two separate bugs I'm trying to work through; one is a race condition when the servo program shuts down too quickly (adding a sleep is a work around...still digging for root cause), and the other is the screwed up image data.
[16:12:52] *** Joins: ghservo (ghservo@F6EE6DE3.6A2AE50.F3114085.IP)
[16:12:52] <ghservo> 01[13rust-cssparser01] 15SimonSapin pushed 1 new commit to 06master: 02http://git.io/uZkFbg
[16:12:52] <ghservo> 13rust-cssparser/06master 1443ad856 15Simon Sapin: Remove a TODO line. (Done in #25 and #28.)
[16:12:52] *** Parts: ghservo (ghservo@F6EE6DE3.6A2AE50.F3114085.IP) ()
[16:13:37] *** Quits: Ms2ger (Ms2ger@moz-664B2345.ugent.be) (Quit: bbl)
[16:14:55] <eddyb> why was https://github.com/mozilla/servo/issues/237 closed?
[16:16:02] <eddyb> I guess there's another issue for a Rust PNG decoder, but #237 is nowhere near closing
[16:17:49] <jack> dhedlund: shuts down too quickly for what?
[16:17:54] <jack> for wait_for_pid to catch it?
[16:17:55] *** Joins: ghservo (ghservo@F6EE6DE3.6A2AE50.F3114085.IP)
[16:17:55] <ghservo> [13servo] 15pcwalton closed pull request #936: Pinch zoom (06master...06pinch-zoom) 02http://git.io/F4ldwQ
[16:17:55] *** Parts: ghservo (ghservo@F6EE6DE3.6A2AE50.F3114085.IP) ()
[16:18:21] <jack> eddyb: your PR is not in servo master yet.
[16:18:45] <eddyb> I figured it wasn't related
[16:21:41] *** Joins: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP)
[16:21:41] <ghservo> [13rust-cssparser] 15metajack closed pull request #32: Remove Python-generated binary search and use match for color keywords (06master...06master) 02http://git.io/CT7c3g
[16:21:41] *** Parts: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP) ()
[16:21:42] *** Joins: ghservo (ghservo@79968228.6A2AE50.F3114085.IP)
[16:21:42] <ghservo> 01[13rust-cssparser01] 15metajack pushed 3 new commits to 06master: 02http://git.io/UvwXoQ
[16:21:42] <ghservo> 13rust-cssparser/06master 1422a94c2 15Simon Sapin: Add some keyword color lookup benchmarks.
[16:21:42] <ghservo> 13rust-cssparser/06master 141d36062 15Simon Sapin: Remove Python-generated binary search and use match for color keywords.
[16:21:42] <ghservo> 13rust-cssparser/06master 14de4812d 15Jack Moffitt: Merge pull request #32 from SimonSapin/master...
[16:21:44] *** Parts: ghservo (ghservo@79968228.6A2AE50.F3114085.IP) ()
[16:23:44] *** Joins: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com)
[16:24:00] <eddyb> jack: I already beat libpng at decoding that tiny gray square outputted by test_store, but I'm having trouble testing anything bigger
[16:24:56] *** Joins: ibnc (ibnc@moz-718F3037.client.mchsi.com)
[16:25:02] <jack> eddyb: why's that?
[16:25:12] <jack> eddyb: also, awesome!
[16:25:17] <dhedlund> jack: With the ref tests specifically, it often segfaults on a memcpy operation in libpng.  Adding a one second sleep causes the issue to go away.  Other times an error will get thrown from the video driver.  Adding a sleep also fixes that.  Other times it'll just hang after a "corrupted double-linked list" message.
[16:25:18] <eddyb> extra::bench being stupid, mostly
[16:25:37] *** Joins: TimAbraldes (quassel@125EF623.B2666F0E.66399531.IP)
[16:25:41] <cmr> eddyb: use extra::time and write your own timing code around a benchmark.
[16:25:45] <jack> dhedlund: both of those sound like memory being freed too early.
[16:26:01] <jack> dhedlund: are you on linux by chance?
[16:26:03] <eddyb> cmr: I'll try to use the time command now
[16:26:07] <dhedlund> double-linked list error is extremely common and always happens when I close the servo window.  Putting in a sleep almost anywhere in the app causes it to reliably go away.  I was just in gdb starting to look at it.
[16:26:12] <cmr> time only does millisecond precision
[16:26:22] <dhedlund> jack: yes, linux
[16:26:23] *** ahal|afk is now known as ahal
[16:26:57] <dhedlund> running through valgrind slows the app down enough that it doesn't produce the error.
[16:27:06] <jack> dhedlund: try a few runs with valgrind. that might point you in the right direction if you're interested in tracking this down.
[16:27:09] <jack> oh
[16:27:50] <jack> if the PNG one is reliable you could impl Drop for whatever holds that memory and then put some debugging there to see when it's called
[16:28:04] <dhedlund> The double-linked list error was reported already, so it's not just me: https://github.com/mozilla/servo/issues/1097.  But yeah, I think the errors are symptoms of the same thing.  The bad png image issue I mentioned just before was a separate issue.
[16:28:07] <jack> and add some debug to the png callbacks to see if they are called after the free
[16:29:15] <eddyb> is there a png callback at all?
[16:29:16] <dhedlund> jack: valgrind itself slows the app down enough that I can't reproduce, even after 20 attempts.  I can reproduce easily in gdb though, where I can see if/what threads are doing, which is what I was just starting to look into.
[16:29:25] *** bhearsum|buildduty is now known as bhearsum|buildduty|food
[16:29:41] <eddyb> or do you mean the two used by store?
[16:30:56] <dhedlund> jack: the corrupt image is due getting data back from opengles that isn't in the format we expect.  I was just trying to work out if it was an ATI/Radeon specific issue, or the entire linux platform.
[16:31:36] <jack> i can check intel in a bit if you think that's helpful
[16:32:27] <dhedlund> jack: I already have a dump of the data that came back in the form of a debug statement, but I need to figure out how to convert it to a ppm format or something I can output without relying on an external image library (i.e. libpng).
[16:33:16] <dhedlund> If someone on os x could also verify the output image looks okay, that would also help: "./servo -o about-mozilla.png ../src/test/html/about-mozilla.html"
[16:34:42] <jack> dhedlund: it will take me a bit to build servo on both machine. will start that now.
[16:34:50] <eddyb> I will try to write a PNG encoder at some point, but it won't be too fancy
[16:34:57] *** Joins: bholley (bholley@moz-FCAF9AAB.hsd1.ca.comcast.net)
[16:35:28] <eddyb> that reminds me I am still relying on zlib. implementing inflate is just a problem of time. implementing deflate is much nastier :(
[16:35:49] <dhedlund> Thanks jack.  I'll let people know what I figure out on my end after a bit.
[16:36:09] <cmr> extra::flate uses an embedded miniz
[16:36:28] <eddyb> extra::flate is pretty dumb IIRC
[16:36:31] *** Joins: jet (jet@moz-79F891EE.hsd1.ca.comcast.net)
[16:36:36] <eddyb> OMG I'm almost twice as fast
[16:36:45] <eddyb> libpng: 46.85user 0.87system 0:47.75elapsed 99PU (0avgtext+0avgdata 10940maxresident)k
[16:36:53] <eddyb> me: 27.39user 0.84system 0:28.24elapsed 99PU (0avgtext+0avgdata 10704maxresident)k
[16:37:24] *** Quits: jet (jet@moz-79F891EE.hsd1.ca.comcast.net) (Quit: jet)
[16:37:28] *** Joins: jet (jet@moz-79F891EE.hsd1.ca.comcast.net)
[16:38:15] <eddyb> this is an unexpected turn of events :)
[16:38:34] <cmr> now, profile it and find out why!
[16:38:49] <cmr> then, send patch to libpng
[16:38:51] <cmr> :p
[16:39:07] <eddyb> eeeeh why, so you can keep using that unsafe library?
[16:39:19] <cmr> so all the other users of it can benefit?
[16:40:13] <eddyb> libpng and libxml or whatever it was are the source of many security bugs in browsers. not using them is a good start
[16:40:35] <eddyb> (there should be parens in there)
[16:41:07] <eddyb> cmr: TBH, it's probably rust-png using libpng wrong
[16:43:24] <eddyb> now I have to get servo working to make it use the streaming decoder (otherwise, what's the point? the speedup?) which means compiling an outdated Rust and boy oh boy I'm not looking forward to wasting more time while doing this
[16:43:51] <cmr> eddyb: just wait for the rustc upgrade
[16:44:02] <eddyb> ETA?
[16:44:40] *** Quits: fabrice (fabrice@moz-94F028C6.hsd1.ca.comcast.net) (Quit: Leaving.)
[16:44:51] *** Joins: fabrice (fabrice@moz-94F028C6.hsd1.ca.comcast.net)
[16:45:10] *** Quits: fabrice (fabrice@moz-94F028C6.hsd1.ca.comcast.net) (Input/output error)
[16:45:23] *** Joins: fabrice (fabrice@moz-94F028C6.hsd1.ca.comcast.net)
[16:45:41] <eddyb> I guess I can make a working PNG encoder in the meanwhile. and write a proper test for creating a deterministic pseudo-random pattern, storing it, loading it and comparing the data
[16:46:14] <cmr> all of the rngs take seeds.
[16:46:20] <eddyb> yay :D
[16:46:41] <eddyb> does anyone know if a non-alpha grayscale mode is desired?
[16:47:16] *** Quits: fabrice (fabrice@moz-94F028C6.hsd1.ca.comcast.net) (Ping timeout)
[16:48:24] <eddyb> because I can do it, but I have to do a dance to upgrade a K8 output to a KA8 if a tRNS chunk is present
[16:48:48] <eddyb> and then add more conditions to the scanline processing function. I should upload this somewhere
[16:49:12] <eddyb> cmr: callgrind is sooo slow. 40s => ?
[16:49:39] <cmr> 20x isn't usually unreasonable from callgrind
[16:49:42] <cmr> just use perf
[16:49:49] *** Quits: alex-abreu (alex@moz-4B4D75AD.rev.sfr.net) (Ping timeout)
[16:49:51] <eddyb> but... kcachegrind...
[16:50:23] <eddyb> (GUI for cachegrind)
[16:50:33] *** Joins: alex-abreu (alex@moz-4B4D75AD.rev.sfr.net)
[16:50:36] <cmr> I know what it is :p
[16:50:37] <eddyb> err, callgrind. the GUI tool is named confusingly
[16:50:58] <eddyb> what's valgrind even doing? stepping?
[16:51:03] <cmr> emulating
[16:51:10] <cmr> valgrind is an x86 emulator
[16:51:15] <cmr> (and other architectures)
[16:51:27] <cmr> (also, it is a cachegrind gui too)
[16:51:41] <eddyb> using x86 emulation features would work better, wouldn't?
[16:51:54] <eddyb> err, virtualization
[16:52:02] <eddyb> or debugging
[16:52:11] *** ahal is now known as ahal|lunch
[16:52:12] <cmr> no, because then it can't do the instrumentation it needs.
[16:52:44] <cmr> if you want something other than what it is, use perf, it uses the cpu's performance counters.
[16:53:39] <larsberg> eddyb: That's great on your work! 
[16:53:40] <larsberg> Only closed 237 because it basically said to move from stb-image to libpng, which ryanc did. We should definitely be doing something more Rusty like you are tackling. We have a lot of crusty old issues in the repo.
[16:54:08] <eddyb> but servo is still using stb-image for everything else, isn't it?
[16:55:47] <eddyb> perf annotate is cool. but it shows me a function and its disasm
[16:56:14] <eddyb> unless it's saying that most of the time is spent in vec::from_fn
[16:56:15] <cmr> if you have debuginfo it will show source info.
[16:56:26] <cmr> perf report is usually what I use.
[16:56:35] <cmr> that and flamegraphs.
[16:58:46] <jack> dhedlund: OSX: http://note.io/18knzuD
[17:01:04] <dhedlund> jack: that looks about the same as what I'm seeing under linux.  So, not platform specific.
[17:01:42] <eddyb> cmr: too soon: 1.33user 0.12system 0:01.46elapsed 99PU (0avgtext+0avgdata 10824maxresident)k
[17:01:47] <dhedlund> jack: I'll dig in more and see if I can fix it, and maybe deal with the "metadata being different" issue at the same time.
[17:02:30] <dhedlund> jack: would really like to get the ref tests passing.  btw, I updated the issue with the gdb output from the linked-list error:  https://github.com/mozilla/servo/issues/1097
[17:02:36] <eddyb> that is 100x (previous numbers were 1000x), so the libpng rust-png is 4x faster with --opt-level=3
[17:02:43] <eddyb> and twice as fast as me :(
[17:02:48] <jack> dhedlund: +1. we talked about it in yesterday's meeting. it's a high priority for us too.
[17:06:23] <eddyb> having a Rust inflate implementation would definitely help, because LLVM can do its job then
[17:06:25] *** Quits: vodik_ (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[17:07:18] *** Joins: vodik_ (simon@moz-FD4ADBC6.cable.teksavvy.com)
[17:09:32] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[17:11:27] *** Joins: fabrice (fabrice@B1A04851.559FC6D5.439315E1.IP)
[17:18:01] <SimonSapin> do we support 'position: absolute'?
[17:18:01] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[17:18:52] <jack> SimonSapin: not yet
[17:18:57] <jack> it's needed for acid2 i think
[17:19:14] <jack> dhedlund: i got the linked list failure on linux (Intel gfx) and also a similarly corrupted image.
[17:19:32] <SimonSapin> jack: yeah, I was reading about acid2
[17:20:02] *** zz_kimundi is now known as kimundi
[17:22:42] <larsberg> SimonSapin, jack: Yup https://github.com/mozilla/servo/issues/787
[17:23:02] <larsberg> SimonSapin: I'm working on expanding/cleaning an Acid2 tracking issue right now :-) https://github.com/mozilla/servo/issues/1366
[17:23:09] <SimonSapin> indeed, thanks larsberg :)
[17:24:29] *** Joins: ghservo (ghservo@79968228.6A2AE50.F3114085.IP)
[17:24:29] <ghservo> [13servo] 15SimonSapin closed issue #779: Support the `*` universal selector 02http://git.io/d46Dvw
[17:24:29] *** Parts: ghservo (ghservo@79968228.6A2AE50.F3114085.IP) ()
[17:24:36] *** Joins: Ms2ger (Ms2ger@moz-97D6582B.adsl-dyn.isp.belgacom.be)
[17:25:10] *** Joins: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP)
[17:25:10] <ghservo> [13servo] 15SimonSapin closed issue #780: Support multiple class selectors 02http://git.io/Q3k1MA
[17:25:10] *** Parts: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP) ()
[17:25:17] *** Joins: ghservo (ghservo@79968228.6A2AE50.F3114085.IP)
[17:25:17] <ghservo> [13servo] 15SimonSapin closed issue #786: Support attribute selectors 02http://git.io/d4CqDg
[17:25:17] *** Parts: ghservo (ghservo@79968228.6A2AE50.F3114085.IP) ()
[17:25:36] *** Joins: ghservo (ghservo@79968228.6A2AE50.F3114085.IP)
[17:25:36] <ghservo> [13servo] 15SimonSapin closed issue #793: Support `float: inherit` 02http://git.io/rPCa6A
[17:25:36] *** Parts: ghservo (ghservo@79968228.6A2AE50.F3114085.IP) ()
[17:30:01] *** bhearsum|buildduty|food is now known as bhearsum|buildduty
[17:31:25] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[17:32:39] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[17:33:01] <larsberg> SimonSapin: Thanks for scrubbing those! 
[17:34:03] <SimonSapin> Ms2ger or jgraham: when can Attr::value be None?
[17:34:29] <SimonSapin> sorry, Im reading this wrong. It cant
[17:35:40] <jgraham> SimonSapin: Good, good :)
[17:36:00] <eddyb> cmr: wow, perf mixing my source and disasm, that's neat
[17:36:22] *** ahal|lunch is now known as ahal
[17:37:08] <hoverbear> SimonSapin: You rock!
[17:37:27] <eddyb> but I don't like sampling, it tends to not work well for high-perf code
[17:37:32] <Ms2ger> SimonSapin, what made you think it could be?
[17:37:37] <SimonSapin> I was gonna comment on #1264, but fixing it is just as easy
[17:38:15] <SimonSapin> Ms2ger: I got confused and thought DOMString was defined as Option<~str> rather than ~str
[17:38:27] <Ms2ger> Not anymore :)
[17:39:06] <SimonSapin> oh, so I was not just making this up :)
[17:42:06] <jgraham> So why was it like that in the first place? Maybe I understood this once...
[17:42:33] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[17:42:33] *** ChanServ sets mode: +o jdm
[17:44:20] *** Quits: fabrice (fabrice@B1A04851.559FC6D5.439315E1.IP) (Quit: Leaving.)
[17:44:31] *** Joins: fabrice (fabrice@B1A04851.559FC6D5.439315E1.IP)
[17:44:45] *** Joins: canhtak (canhtak@moz-1D882009.wl.t.ulaval.ca)
[17:47:18] *** Quits: fabrice (fabrice@B1A04851.559FC6D5.439315E1.IP) (Ping timeout)
[17:47:39] *** Quits: victorporof (victorporo@C8C495F5.E3195F0D.9B1E38F4.IP) (Quit: victorporof)
[17:48:55] *** Joins: ghservo (ghservo@F6EE6DE3.6A2AE50.F3114085.IP)
[17:48:55] <ghservo> [13servo] 15SimonSapin opened issue #1367: Use &str rather than ~str (aka. DOMString) for parameters 02http://git.io/k39HiQ
[17:48:55] *** Parts: ghservo (ghservo@F6EE6DE3.6A2AE50.F3114085.IP) ()
[17:49:02] <eddyb> question: should I zero the pixels array before starting any decoding operation, or should I increase its length while decoding (with the correct capacity from the start)?
[17:49:46] <eddyb> the former allows easy partial rendering, but vec::from_elem is so slow :(
[17:50:00] <eddyb> it's not optimized to a memset
[17:52:44] <eddyb> for some reason rustc+llvm generate code which has a stack load and a stack store, and I think those two keep llvm from seeing it as a memset loop
[17:53:15] <cmr> eugh, it used to optimize to a memset
[17:53:20] <cmr> I don't want to have to fix it again :(
[17:54:01] <jack> eddyb: you should probably file a bug on rust
[17:54:06] <eddyb> it's just vec::from_elem(n, 0u8)
[17:54:10] *** Joins: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP)
[17:54:10] <ghservo> [13servo] 15SimonSapin opened pull request #1368: Fix #1264: support namespaced attribute selectors. (06master...06master) 02http://git.io/7eITBw
[17:54:10] *** Parts: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP) ()
[17:54:23] <eddyb> jack: ok, I will
[17:59:29] *** Joins: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP)
[17:59:29] <ghservo> 01[13servo01] 15bors-servo pushed 0 new commits to 06auto: 02http://git.io/l0fjWQ
[17:59:29] *** Parts: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP) ()
[17:59:30] *** Joins: ghservo (ghservo@79968228.6A2AE50.F3114085.IP)
[17:59:30] <ghservo> 01[13servo01] 15bors-servo pushed 2 new commits to 06auto: 02http://git.io/fqGX7w
[17:59:30] <ghservo> 13servo/06auto 14b290823 15Simon Sapin: Fix #1264: support namespaced attribute selectors.
[17:59:30] <ghservo> 13servo/06auto 14acb6d28 15bors-servo: auto merge of #1368 : SimonSapin/servo/master, r=metajack
[17:59:31] *** Parts: ghservo (ghservo@79968228.6A2AE50.F3114085.IP) ()
[17:59:59] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[18:00:00] *** ChanServ sets mode: +o brson
[18:02:43] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[18:02:47] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[18:02:47] *** ChanServ sets mode: +o brson
[18:10:09] *** Quits: jet (jet@moz-79F891EE.hsd1.ca.comcast.net) (Quit: jet)
[18:10:15] *** Joins: dherman (dherman@moz-BBE3ABD.mv.mozilla.com)
[18:10:15] *** ChanServ sets mode: +qo dherman dherman
[18:20:34] *** Joins: fabrice (fabrice@moz-94F028C6.hsd1.ca.comcast.net)
[18:25:43] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[18:25:44] *** ChanServ sets mode: +o pcwalton
[18:29:14] *** Joins: eholk (eholk@moz-BA312F07.crest.iu.edu)
[18:43:24] *** Quits: bholley (bholley@moz-FCAF9AAB.hsd1.ca.comcast.net) (Quit: bholley)
[18:43:40] *** Quits: canhtak (canhtak@moz-1D882009.wl.t.ulaval.ca) (Quit: canhtak)
[18:46:14] *** Joins: jet (jet@moz-79F891EE.hsd1.ca.comcast.net)
[18:48:29] *** Quits: jet (jet@moz-79F891EE.hsd1.ca.comcast.net) (Quit: jet)
[18:53:57] *** Joins: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP)
[18:53:57] <ghservo> [13servo] 15dhedlund opened pull request #1369: Move glfw::terminate() out of destructor, is hanging app under linux (06master...06issue_1097) 02http://git.io/T1G4mg
[18:53:57] *** Parts: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP) ()
[18:54:40] <dhedlund> jack: can you verify that my PR fixes the issue under your copy of linux?
[18:55:22] <jack> will do so in a bit. in meeting at the moment.
[18:56:51] <Ms2ger> SimonSapin, fwiw, there's vidyo packages on v.m.c too, like https://v.mozilla.com/upload/VidyoDesktopInstaller-sl564-TAG_VD_2_1_0_00335.rpm
[18:57:25] <jack> SimonSapin: with the vidyo link it gives you a link to download the client when you click it.
[18:57:30] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[18:57:43] *** Joins: maxiepoo (mnew@moz-6F50ADE.hsd1.il.comcast.net)
[18:58:34] <Ms2ger> The biweekly early Servo meeting and the biweekly ateam meeting are going to conflict, aren't they...
[18:59:17] <jack> ms2ger: we could potentially move it.
[19:01:33] <Ms2ger> I'll poke ateam first, they just became biweekly
[19:02:48] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[19:04:49] <jgraham> Ms2ger: That foils my plan to ask for the mozbase meeting to be in the same slot as the ateam meeting but on opposing weeks though
[19:04:58] <Ms2ger> mm
[19:05:02] <Ms2ger> Dammit, meetings
[19:05:37] <jgraham> Or, maybe it doesn't, depends on whether you go to the mozbase meetings and whether people would be happy to skip a week
[19:06:59] <Ms2ger> Well, I'd like to do mozbase too, yes
[19:13:49] *** Joins: canhtak (canhtak@moz-1D882009.wl.t.ulaval.ca)
[19:18:57] <pcwalton> SimonSapin: ping
[19:21:10] *** Joins: harth (heather@moz-C07D5168.p2p.sfo1.mozilla.com)
[19:21:48] <SimonSapin> pcwalton: pong
[19:22:14] <pcwalton> SimonSapin: so, I'd like to get rid of the nearest_ancestor_element() calls, which is slow and is also not good for moving GC.
[19:22:29] <SimonSapin> Ms2ger: dont you have to loging before getting the links?
[19:22:36] <pcwalton> to do that I'd like to start associating Boxes with ComputedValues directly
[19:23:04] <pcwalton> a couple of questions:
[19:23:50] <Ms2ger> SimonSapin, if you know the urls, you can get the file
[19:23:51] <pcwalton> (1) is it true that during layout the only *computed* style that a box needs to look at is the style of its associated nearest ancestor element?
[19:23:55] <pcwalton> for example, vertical-align
[19:23:58] <Ms2ger> But I think the urls are obscure
[19:24:25] <pcwalton> (2) should we perhaps ARC the computed style? How does Gecko does this? I seem to recall there is some magic sharing going on in nsStyleStruct
[19:24:27] <SimonSapin> pcwalton: I don~
[19:25:05] <pcwalton> I am wondering whether multiple boxes should share the same computed style so they don't have to keep going to the DOM node, which is not very safe
[19:25:18] <SimonSapin> pcwalton: I dont know how this code works, but per spec the styles for boxes "generated by" an element is the same as the styles of that element
[19:25:26] <pcwalton> okay
[19:25:27] <pcwalton> that's good.
[19:25:35] <pcwalton> and furthermore going to the DOM node is slow since it usually isn't the associated DOM node they have to go to but its nearest ancestor Element
[19:25:39] <pcwalton> and walking up the tree like that is slow
[19:25:59] <pcwalton> can we start sharing ComputedValues among Elements perhaps?
[19:26:08] <pcwalton> I seem to recall that Gecko does this.
[19:26:42] <SimonSapin> for anonymous boxes, its a set of styles resolved with no specified declaration and inheriting from some element
[19:26:45] <dhedlund> SimonSapin: one of the nearest_ancestor_element calls is removed in the PR #222 if that's eventually approved.
[19:26:49] <SimonSapin> which for inherited properties is the same
[19:31:03] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[19:31:03] *** ChanServ sets mode: +o brson
[19:31:53] <SimonSapin> pcwalton: Gecko shares some of the structs that their equivalent of ComputedValues is made of
[19:34:14] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[19:35:13] <kmc> cool, I heard back from hsivonen with some more useful info about the parser
[19:35:20] <kmc> will put some of it on the github ticket
[19:35:23] <Ms2ger> Nice
[19:35:47] <SimonSapin> pcwalton: maybe boxes should have style
[19:36:19] <SimonSapin> styles on elements only may not be enough for new features like http://dev.w3.org/csswg/css-overflow/
[19:38:38] *** Quits: dherman (dherman@moz-BBE3ABD.mv.mozilla.com) (Quit: dherman)
[19:39:42] *** Quits: CaseyBecking (CaseyBecki@ED8170C4.82E507D6.C334098E.IP) (Ping timeout)
[19:40:29] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[19:41:30] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Quit: pcwalton)
[19:43:02] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[19:43:03] *** ChanServ sets mode: +o pcwalton
[19:43:12] *** Quits: miketaylr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net) (Quit: Leaving...)
[19:43:35] *** Parts: canhtak (canhtak@moz-1D882009.wl.t.ulaval.ca) ()
[19:45:53] *** Joins: bellows (Mibbit@moz-A7CC045.dynamic.cablesurf.de)
[19:48:38] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[19:50:02] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Quit: pcwalton)
[19:51:50] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[19:51:51] *** ChanServ sets mode: +o brson
[20:04:48] *** Joins: victorporof (victorporo@C8C495F5.E3195F0D.9B1E38F4.IP)
[20:15:08] *** Joins: CaseyBecking (CaseyBecki@ED8170C4.82E507D6.C334098E.IP)
[20:22:31] *** Quits: victorporof (victorporo@C8C495F5.E3195F0D.9B1E38F4.IP) (Quit: victorporof)
[20:35:23] <eddyb> jack, jdm, cmr (and whoever else interested): pushed my partial progress https://github.com/eddyb/rust-png/commit/0bb2c101c9cf61c6a74db3b0efc4a1ed294eb836
[20:35:31] <jdm> woo :)
[20:35:45] <jdm> good stuff
[20:35:49] *** Joins: bholley (bholley@moz-A2189431.hsd1.ca.comcast.net)
[20:37:12] <eddyb> since it's late and I should sleep and I have to fix this regression before the numbers become relevant: https://github.com/mozilla/rust/issues/7136#issuecomment-30257859
[20:43:53] *** Joins: miketaylr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net)
[20:57:03] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[20:57:13] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[20:59:49] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[21:02:18] *** Joins: dbaron (dbaron@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[21:02:37] *** Quits: bholley (bholley@moz-A2189431.hsd1.ca.comcast.net) (Quit: bholley)
[21:03:14] <jack> dhedlund: looking into your patch now
[21:03:14] *** Quits: CaseyBecking (CaseyBecki@ED8170C4.82E507D6.C334098E.IP) (Ping timeout)
[21:07:41] <jack> dhedlund: why would runnign the destructor code earlier be better?
[21:09:13] <dhedlund> jack: I'm not sure; I've only programmed in rust for 3-4 days and am still feeling my way around how it works in a multi-task env.  I added more info to the bottom of the issue with what I've narrowed it down to, but I haven't gotten further than that yet.
[21:10:13] <jack> dhedlund: i think perhaps Application ref should be stored in window
[21:10:40] <jack> I'm guessing the destructor is getting run *even earlier* which means we are dropping application far too soon
[21:10:52] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[21:11:47] <jack> Probably Application::new should return Rc<Application> and Window should store that 
[21:11:57] <jack> that way application won't destruct until after the windows do
[21:12:40] <jack> I can confirm it fixes the crash. It's just not quite the right version of the fix.
[21:13:17] <jack> Can you make that change to use Rc<Application> and re-instate the destructor?
[21:15:33] <dhedlund> jack: sure, I can try that but not for a couple hours as I'm due for a break.  Thanks for a different idea.
[21:17:50] *** Joins: dherman (dherman@moz-BBE3ABD.mv.mozilla.com)
[21:17:50] *** ChanServ sets mode: +qo dherman dherman
[21:23:15] <Ms2ger> Ohai, thanks jack 
[21:24:01] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[21:24:01] *** ChanServ sets mode: +o pcwalton
[21:28:39] *** Quits: dbaupp (Thunderbir@moz-EB2EFE6F.lns20.syd6.internode.on.net) (Ping timeout)
[21:29:28] *** Joins: CaseyBecking (CaseyBecki@ED8170C4.82E507D6.C334098E.IP)
[21:32:15] *** Joins: Jayflux (Jason@moz-17160F9B.as13285.net)
[21:33:04] <larsberg> jack: whoops; I was concurrently banging on the issue in github. Tons more info for dhedlund, though! :-)
[21:33:47] <dhedlund> larsberg: if someone else who knows the code better wants to have a go before I try again, go ahead!
[21:34:13] <dhedlund> larsberg: I really just need the bug fixed so I can get ref test working under linux.
[21:34:33] <larsberg> dhedlund: No, you did the hard part! Tracking it down to the NativeSurfaces being held onto by the LayerBufferSet was the key. I think it's just figuring out the right shutdown protocol. 
[21:35:14] <dhedlund> larsberg: is this something that might not be an issue after switching gl backends?
[21:35:17] <larsberg> We've had lots of trouble with this in the past, too, like when we stored pointers to stuff into task-local-storage and emptied that in the wrong order. Hard to keep these invariants correct, especially since some of our platforms (OSX) are way more forgiving than others (Linux, and especially NVidia)
[21:35:24] <pcwalton> wikipedia is busted on servo
[21:35:26] <pcwalton> sigh
[21:35:51] <jack> pcwalton we need a sttaic version as a smoke test.
[21:35:56] <pcwalton> this is ridiculous
[21:36:32] <jack> larsberg, dhedlund: i think we just need hte union of all these suggestions :)
[21:36:57] <jack> larsberg, dhedlund: probably we need application to be changed as i suggested *and* the compositor should clear the layerbuffersets before it dies
[21:37:05] <larsberg> jack: +1
[21:37:33] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[21:38:15] <jack> pcwalton: do you know what in particular broke?
[21:38:23] <pcwalton> jack: all I see is a white screen.
[21:38:31] <pcwalton> but the flow tree seems to be constructed properly
[21:38:41] <jack> have you resized?
[21:39:15] <pcwalton> tried that
[21:39:17] <pcwalton> does it work for you?
[21:39:22] <jack> trying now
[21:40:32] <dhedlund> jack, larsberg: okay, well I'm happy to dive back into in a couple hours, but do feel free to jump in yourselves if interested.  thanks!
[21:40:44] *** Quits: alex-abreu (alex@moz-4B4D75AD.rev.sfr.net) (Ping timeout)
[21:41:20] <jack> i get blank page on Servo_(layout_engine) and i tried star on Firefox
[21:41:29] <pcwalton> yup
[21:41:31] <pcwalton> sigh
[21:41:32] <pcwalton> ok
[21:41:35] <pcwalton> I'll look into it after the interview.
[21:42:57] *** Quits: Ms2ger (Ms2ger@moz-97D6582B.adsl-dyn.isp.belgacom.be) (Quit: nn)
[21:44:17] <pcwalton> jack: unless you want to look into it
[21:44:57] <jack> I will poke around with it in a little while
[21:45:02] <jack> trying to knock a blog post out
[21:45:58] <pcwalton> ok
[21:49:14] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[21:59:11] *** Quits: CaseyBecking (CaseyBecki@ED8170C4.82E507D6.C334098E.IP) (Ping timeout)
[22:00:32] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[22:00:58] *** bhearsum|buildduty is now known as bhearsum|afk
[22:02:37] *** Joins: CaseyBecking (CaseyBecki@ED8170C4.82E507D6.C334098E.IP)
[22:03:57] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[22:06:53] <kmc> do we dispatch any events besides onload currently?
[22:07:20] <kmc> and do we have any entry points into JS besides the <script> tags themselves, onload, and timers?
[22:09:31] <jack> jdm: ^
[22:09:47] <jdm> kmc: no other events at the moment
[22:09:53] <jdm> and no
[22:11:03] <kmc> cool
[22:12:51] *** Quits: bellows (Mibbit@moz-A7CC045.dynamic.cablesurf.de) (Quit: http://www.mibbit.com ajax IRC Client)
[22:13:04] *** Joins: bholley (bholley@moz-A2189431.hsd1.ca.comcast.net)
[22:21:41] *** jdm is now known as jdm|away
[22:37:25] *** Joins: dbaupp (Thunderbir@1D1B1F7A.D5A1DCF.37681C44.IP)
[22:44:24] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[22:44:24] *** ChanServ sets mode: +o pcwalton
[22:45:57] *** Quits: bholley (bholley@moz-A2189431.hsd1.ca.comcast.net) (Ping timeout)
[22:50:51] *** Quits: ahal (ahal@moz-7DE89BF0.cable.teksavvy.com) (Quit: Leaving)
[22:59:14] *** Joins: bholley (bholley@moz-A2189431.hsd1.ca.comcast.net)
[23:01:05] *** Joins: deokjinkim (Mibbit@B4104EBB.3CC170B1.1E14B209.IP)
[23:04:48] *** Quits: CaseyBecking (CaseyBecki@ED8170C4.82E507D6.C334098E.IP) (Ping timeout)
[23:05:28] *** Quits: eholk (eholk@moz-BA312F07.crest.iu.edu) (Quit: eholk)
[23:07:46] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[23:07:58] *** Joins: CaseyBecking (CaseyBecki@ED8170C4.82E507D6.C334098E.IP)
[23:12:14] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[23:12:38] *** Quits: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com) (Ping timeout)
[23:13:47] *** Quits: dherman (dherman@moz-BBE3ABD.mv.mozilla.com) (Quit: dherman)
[23:17:48] *** Quits: vodik_ (simon@moz-FD4ADBC6.cable.teksavvy.com) (Quit: WeeChat 0.4.3-dev)
[23:18:01] *** Joins: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com)
[23:18:35] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[23:29:15] *** Joins: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com)
[23:29:55] *** Joins: jet (jet@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[23:30:14] *** Quits: deokjinkim (Mibbit@B4104EBB.3CC170B1.1E14B209.IP) (Ping timeout)
[23:30:30] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Quit: yichoi)
[23:30:51] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[23:32:55] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[23:33:54] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[23:35:56] <pcwalton> man, servo is really messed up on wikipedia
[23:35:59] <pcwalton> I haven't found the problem yt
[23:36:00] <pcwalton> yet
[23:36:55] *** Joins: deokjinkim (Mibbit@B4104EBB.3CC170B1.1E14B209.IP)
[23:40:39] <pcwalton> it thinks it's 6 px high
[23:40:41] <pcwalton> what the hell
[23:40:57] <jdm|away> heh
[23:41:08] <strcat> an encyclopedia for ants
[23:43:42] <pcwalton> I bet it's the float flow fix
[23:43:45] <pcwalton> refactor
[23:43:48] <pcwalton> that is now unrevertable
[23:44:43] <fabrice> reftests are needed!
[23:45:38] <pcwalton> until we have reftests working PLEASE check acid1 and wikipedia
[23:45:46] <pcwalton> this is a huge waste of time
[23:46:24] <jdm|away> pcwalton: want me to add a message to highfive whenever we modify layout?
[23:46:32] *** Quits: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com) (Quit: Leaving)
[23:49:25] <pcwalton> jdm|away: that would be really helpful
[23:52:42] <jdm|away> done
[23:57:47] <pcwalton> bisecting is little help :(
[23:58:07] <pcwalton> it's been busted for weeks and weeks
[23:59:35] <jack> remember that it was busted pre-korea and fixed during
[23:59:39] <jack> so maybe you went too far?
