[00:00:29] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[00:01:02] *** Joins: blank_name (blank_name@463DB555.53526368.6D228269.IP)
[00:04:11] *** Joins: dherman (dherman@F16146EB.9D3722BB.58DC3EE6.IP)
[00:04:11] *** ChanServ sets mode: +ao dherman dherman
[00:05:48] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[00:07:34] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[00:17:45] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[00:18:20] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[00:23:50] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[00:24:57] *** kimundi is now known as zz_kimundi
[00:33:50] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[00:42:10] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[00:42:57] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[00:52:49] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Input/output error)
[00:57:29] *** Quits: ecr (chatzilla@moz-10C88DA7.dyn.cs.washington.edu) (Ping timeout)
[01:01:29] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[01:02:17] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[01:03:38] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[01:03:43] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[01:06:44] *** Joins: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP)
[01:06:44] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/a8f6iA
[01:06:44] *** Parts: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP) ()
[01:11:41] *** Joins: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP)
[01:11:41] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/4HfTJw
[01:11:41] *** Parts: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP) ()
[01:11:41] *** Joins: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP)
[01:11:41] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/UUkEpg
[01:11:41] <ghrust> 13rust/06auto 1415adaf6 15Daniel Micay: mark the `map` method on Vec<T> as deprecated...
[01:11:41] <ghrust> 13rust/06auto 14dcb24f5 15bors: auto merge of #12697 : thestinger/rust/vec, r=huonw...
[01:11:42] *** Parts: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP) ()
[01:14:48] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Quit: Lost terminal)
[01:20:04] *** Quits: sunfish (chatzilla@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[01:24:28] <eddyb> nmatsakis: oh, we got a new name for Mut
[01:25:56] <eddyb> I'll go no, hopefully r+ during the (remainder of the) night here
[01:26:02] <eddyb> s/no/now
[01:27:46] *** Quits: eddyb (eddy@F8B50789.F33C1089.FB866788.IP) (Ping timeout)
[01:34:10] *** Joins: ecr (chatzilla@6C565B0A.A19A88BC.64990CF8.IP)
[01:35:28] *** Quits: eibwen (kvirc@moz-7F98B089.dip0.t-ipconnect.de) (Ping timeout)
[01:42:36] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[01:44:34] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[01:46:37] <nmatsakis> eddyb: sorry ;)
[01:50:21] *** Quits: huon (Thunderbir@moz-826BD85A.lns20.syd6.internode.on.net) (Ping timeout)
[01:50:28] *** Quits: ecr (chatzilla@6C565B0A.A19A88BC.64990CF8.IP) (Ping timeout)
[02:05:00] <strcat> https://github.com/mozilla/rust/pull/12700 r?
[02:10:40] *** Quits: nrc (nrc@F16146EB.9D3722BB.58DC3EE6.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 30.0a1/20140303030201])
[02:13:14] *** Quits: dherman (dherman@F16146EB.9D3722BB.58DC3EE6.IP) (Quit: dherman)
[02:13:48] *** Quits: pcwalton (pcwalton@F16146EB.9D3722BB.58DC3EE6.IP) (Quit: pcwalton)
[02:13:59] *** Quits: brson (brson@4A08E125.708C0A12.C7EEF3A2.IP) (Ping timeout)
[02:21:46] *** Joins: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP)
[02:21:46] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/UUkEpg
[02:21:46] *** Parts: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP) ()
[02:22:50] *** Quits: luz (lu.cy@moz-CD18B14B.customer.cdi.no) (Connection reset by peer)
[02:23:04] *** Joins: luz (lu.cy@moz-CD18B14B.customer.cdi.no)
[02:23:20] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[02:23:56] *** Joins: lpy (lpy@12172131.F09091A8.1348A864.IP)
[02:26:45] *** Joins: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP)
[02:26:45] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/BMqMLw
[02:26:45] *** Parts: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP) ()
[02:26:45] *** Joins: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP)
[02:26:45] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/rcyCZQ
[02:26:45] <ghrust> 13rust/06auto 144cdc6ce 15Alex Crichton: rustc: Don't deduplicate libraries linked to...
[02:26:45] <ghrust> 13rust/06auto 14f1955e0 15bors: auto merge of #12688 : alexcrichton/rust/fix-some-link-args, r=brson...
[02:26:46] *** Parts: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP) ()
[02:34:28] <strcat> acrichto: can only hope that the rust game never becomes very popular ;P
[02:34:56] <ChrisMorgan> The fame of all games is but fleeting.
[02:35:05] <strcat> rusti: version
[02:35:10] -rusti- "rustc 0.10-pre (fbe26af 2014-03-02 17:36:28 -0800)"
[02:35:26] <ChrisMorgan> Ooh! Up to date again (almost) â˜º
[02:35:34] <strcat> seems like it failed to build today
[02:37:16] <strcat> ah nvm
[02:37:20] <strcat> it just hasn't gotten a chance
[02:37:26] <strcat> really high load avg on the server ;[
[02:37:35] * strcat hates the load avg queue
[02:39:35] *** Quits: lpy (lpy@12172131.F09091A8.1348A864.IP) (Client exited)
[02:48:59] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[03:13:37] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[03:30:47] *** Quits: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net) (Quit: I'm sure it's perfectly safe)
[03:34:23] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[03:36:41] *** Joins: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP)
[03:36:41] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/rcyCZQ
[03:36:41] *** Parts: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP) ()
[03:41:38] *** Joins: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP)
[03:41:38] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/4D2b9A
[03:41:38] *** Parts: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP) ()
[03:41:39] *** Joins: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP)
[03:41:39] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/yCNM2w
[03:41:39] <ghrust> 13rust/06auto 144a891fe 15Nick Cameron: Expand nested items within a backtrace....
[03:41:39] <ghrust> 13rust/06auto 143cc761f 15bors: auto merge of #12671 : nick29581/rust/expand, r=sfackler...
[03:41:39] *** Parts: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP) ()
[03:43:16] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[03:44:52] *** Joins: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net)
[03:45:22] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[03:56:26] *** Quits: zz_kimundi (kimundi@moz-82D1D1B3.dip0.t-ipconnect.de) (Ping timeout)
[03:57:05] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[03:59:56] *** Joins: zz_kimundi (kimundi@moz-A54DBA56.dip0.t-ipconnect.de)
[03:59:58] *** zz_kimundi is now known as kimundi
[04:00:47] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[04:01:57] *** Joins: eddyb (eddy@F8B50789.F33C1089.FB866788.IP)
[04:23:12] *** Quits: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net) (Quit: Sharp)
[04:24:40] *** Joins: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net)
[04:30:54] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Connection reset by peer)
[04:31:04] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.3)
[04:31:58] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[04:47:06] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[04:51:43] *** Joins: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP)
[04:51:43] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/yCNM2w
[04:51:43] *** Parts: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP) ()
[04:52:09] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[04:56:57] *** Joins: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP)
[04:56:57] <ghrust> [13rust] 15bors pushed 3 new commits to 06auto: 02http://git.io/LWMk3g
[04:56:57] <ghrust> 13rust/06auto 14c754503 15Daniel Micay: stop re-exporting cmp::{min, max} in f64...
[04:56:57] <ghrust> 13rust/06auto 14e69c0ed 15Daniel Micay: consistently use LLVM floating point intrinsics
[04:56:57] <ghrust> 13rust/06auto 14637600d 15bors: auto merge of #12700 : thestinger/rust/float, r=cmr
[04:56:59] *** Parts: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP) ()
[04:59:25] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[05:00:57] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[05:07:29] *** Quits: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Ping timeout)
[05:13:11] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[05:18:11] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Ping timeout)
[05:40:36] *** Joins: lpy (lpy@52067FC0.F09091A8.1348A864.IP)
[05:44:24] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[05:46:11] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[06:01:55] *** Quits: canhtak (canhtak@moz-46C3B4C8.wl.t.ulaval.ca) (Quit: canhtak)
[06:04:58] *** Joins: dherman (dherman@F16146EB.9D3722BB.58DC3EE6.IP)
[06:04:58] *** ChanServ sets mode: +ao dherman dherman
[06:06:41] *** Joins: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP)
[06:06:42] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14637600d to 143cc761f: 02http://git.io/N3iJvQ
[06:06:42] *** Parts: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP) ()
[06:06:42] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[06:06:42] <ghrust> [13rust] 15bors pushed 6 new commits to 06auto: 02http://git.io/g82xnA
[06:06:42] <ghrust> 13rust/06auto 146d9bdf9 15Palmer Cox: Rename all variables that have uppercase characters in their names to use only lowercase characters
[06:06:42] <ghrust> 13rust/06auto 14935c912 15Palmer Cox: Add lint for variable names that contain uppercase characters
[06:06:43] <ghrust> 13rust/06auto 14a9798c2 15Palmer Cox: Rename struct fields with uppercase characters in their names to use lowercase
[06:06:45] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[06:12:28] *** Joins: huon (Thunderbir@moz-826BD85A.lns20.syd6.internode.on.net)
[06:12:28] *** ChanServ sets mode: +o huon
[06:24:10] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[06:33:11] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[06:35:22] *** Joins: edwardw (edwardw@E6E87FA7.354F6412.B9C6B12A.IP)
[06:35:29] *** Quits: lpy (lpy@52067FC0.F09091A8.1348A864.IP) (Ping timeout)
[06:39:50] *** Joins: brson (brson@F16146EB.9D3722BB.58DC3EE6.IP)
[06:39:50] *** ChanServ sets mode: +qo brson brson
[06:44:41] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[06:47:10] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[06:56:03] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[06:56:23] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[07:01:28] *** Joins: lpy (lpy@2932A109.56B853B.8C13C571.IP)
[07:01:36] <klutzy> mod a { extern { fn func(); } } mod b { extern { fn func(i: i8); } }
[07:01:42] <klutzy> this should be disallowed, right?
[07:01:53] <cmr> hm
[07:01:59] <cmr> I do not think so
[07:02:08] <cmr> I am not sure.
[07:04:38] *** Quits: brson (brson@F16146EB.9D3722BB.58DC3EE6.IP) (Ping timeout)
[07:05:39] *** Joins: brson (brson@F16146EB.9D3722BB.58DC3EE6.IP)
[07:05:39] *** ChanServ sets mode: +qo brson brson
[07:12:48] *** Quits: lpy (lpy@2932A109.56B853B.8C13C571.IP) (Ping timeout)
[07:13:16] <klutzy> at trans phase, the first one survives only
[07:13:44] <cmr> ok definitely should be a compile error.
[07:14:17] <klutzy> and it seems that llc refuses to compile duplicated declarations
[07:15:46] <brson> agree it should be an error
[07:15:53] <brson> istr a very old issue about this
[07:15:53] *** flaper87|afk is now known as flaper87
[07:16:34] <cmr> for some reason I thought it was valid to call a function in C with less arguments than it declared.
[07:16:40] <cmr> beause of how main is treated
[07:16:44] <cmr> but that's really a special case
[07:16:49] *** Joins: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP)
[07:16:49] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/g82xnA
[07:16:49] *** Parts: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP) ()
[07:16:53] *** Quits: dherman (dherman@F16146EB.9D3722BB.58DC3EE6.IP) (Quit: dherman)
[07:17:23] <brson> this one maybe https://github.com/mozilla/rust/issues/10883
[07:17:38] <brson> oh, no
[07:17:45] <brson> not that one
[07:19:31] <sfackler> cmr: main's a very special case
[07:19:34] <klutzy> I was fixing win32 c abi issue; `make check-stage2-rpass` passed but when I did check-fast llvm got angry
[07:19:40] <sfackler> (you can also omit the return for main)
[07:20:04] <klutzy> because some test used `extern fn printf()`, and some other one used `extern fn printf(some_arg)`
[07:20:40] <klutzy> and my patch triggered some funny behavior that llvm doesn't like
[07:20:44] <Yurume> klutzy: does it cause a linker problem?
[07:20:45] <Yurume> ah
[07:20:56] <cmr> sfackler: yeah.
[07:21:42] *** Joins: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP)
[07:21:42] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/Zu197A
[07:21:42] *** Parts: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP) ()
[07:21:44] *** Joins: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP)
[07:21:44] <ghrust> [13rust] 15bors pushed 4 new commits to 06auto: 02http://git.io/k8kxbA
[07:21:44] <ghrust> 13rust/06auto 143b125ff 15Eduard Burtescu: Add the DerefImm and DerefMut traits.
[07:21:44] <ghrust> 13rust/06auto 1452532d1 15Eduard Burtescu: Implement DerefImm for Rc and DerefImm/DerefMut for RefCell's Ref/RefMut.
[07:21:44] <ghrust> 13rust/06auto 14bcc5486 15Eduard Burtescu: Allow overloading explicit dereferences.
[07:21:46] *** Parts: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP) ()
[07:21:56] <cmr> woo! deref!
[07:22:45] <sfackler> :D
[07:27:12] <cmr> So now that Result doesn't require ToStr (or, in modern parlance, Show) in the Error type, it's impossible, afaict, to get nice error messages from unwraps.
[07:29:49] <brson> unwrap could require that the error type implement Show
[07:29:50] <sfackler> we could impl unwrap for E: Show and have an unwrap_bad or something impl'd for E
[07:29:58] <cmr> that'd be really nice.
[07:31:02] <cmr> I don't think we need an unwrap_bad for generic E, when you can use .ok().unwrap()
[07:31:16] <sfackler> that's true
[07:33:31] <Yurume> would it be better that Option<T> has some adaptor methods to convert to Result<T,()> or possibly Result<T,E>?
[07:40:42] <Eridius> Yurume: why would you want to convert Option to Result?
[07:40:53] <Eridius> especially since Result<T,()> is quite pointless
[07:41:38] <Yurume> mixing Option and Result is particularly annoying
[07:41:49] <Yurume> I guess Result<T,E> would work better, yes.
[07:42:58] <Yurume> i.e. fn into_result<E>(self, err: E) -> Result<T,E>; fn into_result_or<E>(self, err: || -> E) -> Result<T,E>; ?
[07:43:47] <Eridius> Yurume: what is the point of this? Complicating the API for something that could be trivially expressed with map_or() and map_or_else()
[07:44:18] <cmr> I can't say I've wanted to go in that direction myself...
[07:45:35] <Yurume> Eridius: maybe that's more of a problem that both Option and Result are used for error handling.
[07:46:01] <Eridius> Option<T> is used when the alternative is Result<T,()>, because Result<T,()> is rather useless
[07:47:04] <Yurume> Result<T,()> has a particular advantage with try!, though.
[07:57:43] <brson> try! could probably be written to work with either type
[08:01:59] <Yurume> trait Try<T,E> { pub fn try<'a>(&'a self) -> Result<T,E>; } or similar?
[08:03:20] <flaper87> Eridius: I ended up abandoning that PR, I'll hopefully pick that work up at some point, unless you want to take over :D
[08:03:26] <Yurume> possibly trait Try<T,E> { pub fn try(&Self) -> Result<T,E>; } for avoiding obscure error messages
[08:04:04] <Yurume> but in my opinion, Option<T> and Result<T,E> are similar enough that their differences are annoying.
[08:04:27] <Eridius> woohoo, rustc no longer ICE's on this code
[08:04:40] <Eridius> flaper87: yeah I saw. If I find free time I might take a crack at it, but we'll see
[08:04:56] <Eridius> I'm awfully busy with work right now, and I'm getting married in 2.5 weeks, so...
[08:05:07] <flaper87> Eridius: ooohh, congrats man!
[08:05:11] <Eridius> thanks :)
[08:05:22] <flaper87> Eridius: in that case, don't even look at that patch :)
[08:05:26] <Eridius> haha
[08:08:12] <ChrisMorgan> cmr/brson/sfackler: or alternatively we could implement function specialisation and thereby cause it to use a different unwrap() for <E: fmt::Show>.
[08:09:07] <Yurume> Eridius: oh, congratulations!
[08:09:15] <Eridius> :)
[08:13:08] <huon> Eridius: these people are soft. there's no excuses. We're expecting patches from you every day.
[08:13:19] <Eridius> haha
[08:13:21] <huon> (congrats :) )
[08:13:33] <Eridius> if it wasn't for work getting busy lately I'd be submitting patches ;)
[08:14:07] <Eridius> anyway, it's bed time. g'night
[08:15:56] <flaper87> huon: lol
[08:19:20] *** Joins: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[08:26:13] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[08:31:44] *** Joins: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP)
[08:31:44] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/k8kxbA
[08:31:44] *** Parts: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP) ()
[08:36:41] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[08:42:41] <eddyb> woo
[08:43:52] *** Quits: edwardw (edwardw@E6E87FA7.354F6412.B9C6B12A.IP) (Quit: Leaving...)
[08:47:10] *** Joins: Zr40 (zr40@EE4BB9F5.926C319A.BE2F4011.IP)
[08:49:19] <brson> nmatsakis: there's a thread on reddit about using the type system to handle utf8 better and istm that the 'String<UTF8>' design could enable some of the ideas mentioned there
[08:49:27] <brson> nmatsakis: http://www.reddit.com/r/rust/comments/1zlq21/should_rust_be_more_careful_with_unicode/
[08:49:59] <brson> specifically, putting charwise methods on String and bytewise on UTF8
[08:51:00] <brson> though we've always encouraged people to prefer byte math with strings, so maybe that would be backwards
[08:51:19] <brson> i wonder whether chars or bytes are used more often
[08:52:15] <eddyb> CRAP
[08:52:24] <eddyb> off by one HEAD~n
[08:55:16] <eddyb> good thing I force push often :P
[08:55:28] <eddyb> nmatsakis: r? https://github.com/mozilla/rust/pull/12610 may be missing tests or docs
[08:57:20] <eddyb> huon: haha you did the same thing as me https://github.com/mozilla/rust/issues/8506#issuecomment-32699134
[08:57:28] <eddyb> huon: like a month ago. I'm so silly
[09:00:19] *** Joins: eibwen (kvirc@moz-46F76C74.dip0.t-ipconnect.de)
[09:07:51] *** Quits: fhahn (fhahn@moz-7924DB5C.vie.surfer.at) (Ping timeout)
[09:12:26] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[09:12:47] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[09:14:29] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[09:16:02] *** Joins: fhahn (fhahn@moz-7924DB5C.vie.surfer.at)
[09:17:07] *** Joins: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru)
[09:17:12] *** Joins: sigma (sigma@moz-55097A0B.range86-163.btcentralplus.com)
[09:22:12] *** Quits: sigma (sigma@moz-55097A0B.range86-163.btcentralplus.com) (Client exited)
[09:38:10] *** Quits: hansjorg (hansjorg@moz-41C5CE61.redpill-linpro.com) (Ping timeout)
[09:45:24] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[09:47:46] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[09:55:20] *** Joins: ecr (chatzilla@E940BDD3.FBC7597F.11F8506F.IP)
[10:08:44] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[10:13:00] *** Joins: aepsil0n (eduard@moz-B5507714.hsi8.kabel-badenwuerttemberg.de)
[10:14:19] *** Joins: hansjorg (hansjorg@moz-41C5CE61.redpill-linpro.com)
[10:20:55] *** Joins: glaebhoerl (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[10:24:58] *** Quits: huon (Thunderbir@moz-826BD85A.lns20.syd6.internode.on.net) (Ping timeout)
[10:27:37] *** Joins: mawuli (mawuli@moz-A89BBCE.com.gh)
[10:29:19] *** Joins: huon (Thunderbir@moz-826BD85A.lns20.syd6.internode.on.net)
[10:29:19] *** ChanServ sets mode: +o huon
[10:31:23] *** Quits: brson (brson@F16146EB.9D3722BB.58DC3EE6.IP) (Quit: leaving)
[10:40:26] *** Quits: ecr (chatzilla@E940BDD3.FBC7597F.11F8506F.IP) (Ping timeout)
[10:51:45] *** Joins: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP)
[10:51:45] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/-PrQTw
[10:51:45] *** Parts: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP) ()
[10:51:48] *** Joins: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP)
[10:51:48] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/xOI2zQ
[10:51:48] <ghrust> 13rust/06auto 14c92cdad 15Simon Sapin: Str::slice_chars() is O(end), not O(end - begin)
[10:51:48] <ghrust> 13rust/06auto 14ea71a08 15bors: auto merge of #12708 : SimonSapin/rust/patch-6, r=huonw...
[10:51:48] *** Parts: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP) ()
[11:01:51] <eddyb> nmatsakis: hmm, which one looks better for the as_slice() operator? &*v or v[]?
[11:02:20] <eddyb> because choices!
[11:11:14] <eddyb> myth #11243 (no that's not an issue number don't look it up): Session needs a @ pointer - BUSTED!
[11:11:35] <eddyb> don't you love it when you can keep things on the stack?
[11:12:03] <huon> eddyb: rustpkg is not looking at target libraries
[11:12:27] <eddyb> hmm?
[11:12:33] * huon reminds eddyb to keep clean commits well separated
[11:12:41] <huon> eddyb: is #11243
[11:12:45] <eddyb> LOL
[11:13:20] <eddyb> I made that number up! I knew I should've used 13k as a prefix so it would be an issue from the future
[11:13:41] <eddyb> BanHammer 13k. don't ask why
[11:13:56] <huon> why?
[11:14:41] <eddyb> because WH30k. and we're close to 13k issues I think. not sure where BanHammer came from
[11:14:52] <eddyb> ooooh. I know
[11:15:02] <eddyb> bstrie: BugHammer 13k. write that down
[11:15:17] <eddyb> codename for 0.10. maybe
[11:15:37] * eddyb goes back to adding @
[11:18:14] <huon> *adding* @ :S
[11:19:01] <huon> (isn't it WH40k? :P )
[11:19:07] <eddyb> huon: /facepalm
[11:19:09] <kimundi> eddyb: I'm not nmatsakis, but imo with DST &*v is the only sane choice for creating a slice :P
[11:19:19] <eddyb> it's a sane choice
[11:19:23] <eddyb> it's not the only choice
[11:19:30] <kimundi> Because... It's the same
[11:19:47] <eddyb> huon: hah. so you didn't read my explanation in #rust?
[11:19:58] <eddyb> I'm doing a noop expansion of a type alias by hand
[11:20:09] <eddyb> just so I can see the @ I have to replace
[11:20:11] <huon> https://github.com/mozilla/rust/issues/4160 would mean s[:] makes a slice
[11:20:14] <huon> eddyb: no I didn't read it
[11:20:19] <huon> oh, I see
[11:20:31] <huon> ... why not just remove the type alias and see the errors?
[11:20:33] <eddyb> people have done &Session
[11:20:44] <eddyb> and that's &@Session_
[11:20:49] <eddyb> so no thanks
[11:21:01] <huon> eh?
[11:21:19] <kimundi> If we get a slice operator that allows leaving off both start and end to get a full slice, then thats different of course
[11:21:29] <huon> why does &<type alias> stop you from removing <type alias>?
[11:21:40] <huon> kimundi: ^ what I said :P
[11:21:44] <kimundi> But those two are kinda different things, no?
[11:21:51] <huon> (unless you're referring to that?)
[11:21:57] <huon> kimundi: that's the slice operator
[11:22:09] <huon> oh, I used the wrong syntax
[11:22:13] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[11:22:13] <huon> a[x..y]
[11:22:16] <huon> a[x..]
[11:22:21] <huon> a[..] // .as_slice()
[11:22:21] <eddyb> a[..]
[11:22:47] <eddyb> huon: no, it doesn't, just exemplifies why I don't want to do this in a non-exhaustive way
[11:23:31] <huon> eddyb: yeah, but removing the type alias (so that there's so no longer any mention of @ at all in the Session/Session_ types) would be automatically exhaustive
[11:24:00] <eddyb> uhm, thanks for both a helpful hint and making me feel dumb
[11:24:10] <kimundi> Ah, so the question which syntactic element to combine with the methods of a Slice impl? slice_from, slice_to, slice and as_Slice ?
[11:24:21] *** Joins: glaebhoerl_ (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[11:24:25] *** Quits: glaebhoerl (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Connection reset by peer)
[11:24:34] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[11:24:52] <eddyb> Index<Range, &'a [T]> for &'a [T] is better IMO
[11:24:59] <huon> eddyb: anytime :P
[11:25:15] <huon> eddyb: yup
[11:25:50] <huon> and we can have Index<&[uint], &[T]> for &[T], and it will be awesome
[11:26:18] <eddyb> because you can combine it with variadic ranges, for example, to get a square from a matrix
[11:26:31] <eddyb> or x1..x2 * y1..y2
[11:26:37] <eddyb> IDEA
[11:26:43] <eddyb> orphan impls are not exported
[11:27:14] <eddyb> crate-local impl Trait for Type where both Trait and Type are outside the current crate
[11:27:54] <eddyb> so you can have operator overloads for std stuff in your toy project
[11:28:10] <eddyb> range(x1, x2) * range(y1, y2) is still a cool thing to do
[11:28:19] <eddyb> creating a 2D BB
[11:28:23] <kimundi> eddyb: Yeah, that idea has been tossed around a bit by a few people
[11:28:35] <eddyb> kimundi: nothing is new, everything is recycled
[11:29:21] <eddyb> need to stop being so excited about ideas >_>
[11:29:44] <kimundi> nah, its fine
[11:32:12] <huon> ideas *are* exciting though
[11:33:34] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[11:34:48] <eddyb> I keep pressing # instead of @ >_>
[11:34:58] <eddyb> such is its demise, my keyboard knows it
[11:35:07] <eddyb> or rather, my fingers
[11:46:30] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[11:46:47] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[11:48:35] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[11:51:10] <eddyb> huon: oh dear
[11:51:21] <eddyb> we run two separate folders for std injection
[11:51:24] <eddyb> *two*
[11:51:37] <eddyb> that's two folders too many
[11:52:27] <huon> ones for std injection and ones for prelude injection, right?
[11:52:31] <eddyb> yupp
[11:52:32] <huon> also, you need at least one folder
[11:52:42] <huon> if it's going to just be an AST transformation
[11:52:43] <eddyb> only if you do it the hacky way we do it now
[11:52:49] <huon> yes
[11:53:03] <eddyb> resolve should be able to have extra "default" imports thrown to it
[11:53:18] <huon> sounds reasonable
[11:53:22] <huon> but harder to implement
[11:53:38] <eddyb> just find where it collects "use" items
[11:53:46] <huon> and I think we should simplify resolve w.r.t to globs before pushing at it significantly
[11:54:02] <eddyb> and make it start with a copy of the defaults instead of a clean container
[11:54:19] <eddyb> resolve isn't black magic, right?
[11:54:32] <huon> wrong!
[11:54:52] <huon> the old resolution schemes were super weird, apparently
[11:55:09] <huon> and resolve hasn't ever been completely purged of it's influence
[11:55:13] <huon> *its
[11:55:19] <eddyb> I wonder if this works let sess = &d::build_session(sopts, input_file_path);
[11:55:34] <eddyb> so I don't have to litter that entire function with &sess
[11:55:48] <huon> eddyb: let sess_ = ...; let sess = &sess_; if it doesn't
[11:55:55] <eddyb> yeah, I know
[11:55:56] <huon> (could also be `let ref sess = ...;`
[11:55:57] <huon> )
[11:56:04] <eddyb> but I remember seeing let foo = &bar(); somewhere
[11:56:18] *** Quits: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru) (Quit: Leaving...)
[11:56:39] <eddyb> rusti: use std::vec_ng::Vec; let x = &mut Vec::new(); x.push(0); x.clone()
[11:56:40] -rusti- std::vec_ng::Vec<int>{len: 1u, cap: 1u, ptr: (0x7f66d8000df0 as *mut ())}
[11:56:42] <huon> i guess it mgiht work
[11:56:45] <huon> seems so
[11:56:52] <huon> problem resolved
[11:56:54] <eddyb> that &mut thing is funky IMO
[11:57:05] <eddyb> I wonder what patterns you can do with it
[11:57:15] <eddyb> rusti: use std::vec_ng::Vec; let x = &mut &mut Vec::new(); x.push(0); (*x).clone()
[11:57:16] -rusti- std::vec_ng::Vec<int>{len: 1u, cap: 1u, ptr: (0x7f3014000df0 as *mut ())}
[11:57:41] <eddyb> rusti: use std::vec_ng::Vec; let x = [&mut Vec::new()]; x[0].push(0); x[0].clone()
[11:57:41] -rusti- std::vec_ng::Vec<int>{len: 1u, cap: 1u, ptr: (0x7fccb4000df0 as *mut ())}
[11:57:53] <eddyb> hang on... I thought this was exterior pointers only
[11:58:02] <eddyb> I should read that blog post again :))
[12:00:00] <eddyb> lol check_const::CheckCrateVisitor stores the session even though it also stores the tcx
[12:00:05] <eddyb> make up your mind, guy
[12:01:02] <huon> self.sess is shorter than self.tcx.sess?
[12:01:41] <eddyb> for three uses?
[12:01:50] <huon> 12 bytes
[12:01:56] <huon> important savings
[12:02:19] * huon ignores that the field declaration and initialisation will be far more than 12 bytes
[12:02:23] <eddyb> it uses more stack space passing the session around as an argument
[12:02:36] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[12:02:45] <eddyb> huon: lol, so it has the visitor, the session and the tcx as arguments to a functon
[12:02:58] <eddyb> the visitor includes both the tcx and the session
[12:03:04] <eddyb> and the tcx includes the session
[12:03:11] <eddyb> *function
[12:03:14] *** Quits: glaebhoerl_ (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Ping timeout)
[12:03:27] <eddyb> alias and refcount all the things
[12:03:47] <huon> haha
[12:06:41] *** Joins: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP)
[12:06:41] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/xOI2zQ
[12:06:41] *** Parts: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP) ()
[12:06:42] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[12:06:52] <eddyb> huon: remember the 3 uses?
[12:06:54] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[12:07:04] <eddyb> those are the arguments to that function that doesn't need them
[12:07:24] <eddyb> hang on, there's two more: check_expr(self, self.def_map, self.method_map, ex, env);
[12:07:34] *** Joins: glaebhoerl_ (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[12:18:10] <eddyb> huon: resolve was too easy. I'm suspicious now
[12:19:06] <huon> eddyb: to purge of @?
[12:19:14] <eddyb> just @Session_
[12:20:07] <huon> resolve being complicated doesn't mean the code is particularly horrible
[12:20:15] <eddyb> please tell me I just didn't add a second lifetime to Block
[12:20:18] <huon> jsut that it's doing very non-trivial things
[12:20:56] <eddyb> I hope I can get away with subliftimes
[12:21:50] <eddyb> CrateContext stores both sess and tcx. another one of these :/
[12:22:15] <eddyb> I wonder if we somehow manage to leak something huge with all these @ refcounts
[12:22:44] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[12:24:46] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[12:25:50] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[12:27:47] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[12:27:57] <eddyb> I... might have to make ty::ctxt own the session. rustdoc does something weird with it
[12:45:09] *** Joins: canhtak (canhtak@moz-46C3B4C8.wl.t.ulaval.ca)
[13:00:15] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[13:02:22] <eddyb> and now, a million "error: attempted to take value of method `sess` on type `@middle::trans::context::CrateContext`"
[13:12:31] *** Joins: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru)
[13:27:33] *** Joins: edwardw (edwardw@4112974A.B4358688.30F15291.IP)
[13:31:11] <nmatsakis> eddyb: &*v as a means of creating a slice just falls out of DST
[13:31:22] <eddyb> yeah I know but we have choices :D
[13:31:26] <eddyb> good morning btw :)
[13:31:46] <nmatsakis> we have choices? I mean, we can add another means.
[13:32:00] <nmatsakis> but we can't stop &*v from working :)
[13:32:25] <nmatsakis> I personally still like the idea of enabling [], [a..], [..b], and [a..b]
[13:32:57] <nmatsakis> but it needs a champion to write a concrete RFC and bring it forward
[13:33:35] <eddyb> am I trying to do enough things at once :P?
[13:36:55] * flaper87 likes the idea of enabling [], .... too
[13:37:30] <kimundi> Would this [] be just as shorter version of [..] ?
[13:37:37] <eddyb> oh dear what have I done (*cough* PHP6 *cough*)
[13:47:39] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[13:49:21] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[13:50:05] <bstrie> eddyb: in the grim darkness of the bug tracker, there is only ICE
[13:50:11] <bstrie> BUGHAMMER 13K
[13:50:38] <eddyb> turns out it's not 30K but 40K (oops) so 14K might work better
[13:50:41] <eddyb> bstrie: but I love it :D
[13:52:15] <bstrie> s/ICE/ICE and bikeshedding
[13:53:25] <kimundi> s/ICE and bikeshedding/bikeshedding and ICE
[14:00:29] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Ping timeout)
[14:09:01] <nmatsakis> eddyb: is PR #12610 rebased?
[14:09:09] <eddyb> yupp
[14:09:47] <nmatsakis> ok
[14:16:37] <eddyb> "error: cannot move out of dereference of `@`-pointer" aww
[14:17:04] <eddyb> I guess the first commit of this new PR won't compile
[14:24:26] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[14:26:20] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[14:30:15] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[14:32:06] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[14:33:37] *** Quits: glaebhoerl_ (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Quit: )
[14:35:03] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[14:37:56] <eddyb> wow, a total of one @ removed
[14:38:09] <eddyb> but it was a type alias, so that's why
[14:44:11] *** Quits: mawuli (mawuli@moz-A89BBCE.com.gh) (Ping timeout)
[14:45:52] <nmatsakis> eddyb: I'm reading the PR, but it's likely I won't finish till tomorrow.
[14:46:20] <eddyb> ohh :(
[14:46:29] <eddyb> it's... not even that big, I don't think
[14:48:53] <nmatsakis> well, we'll see, I'm still reading.
[14:49:06] <nmatsakis> short patches scare me the most ;)
[14:49:49] <eddyb> because they're made out of magic
[14:50:24] <eddyb> adding struct construction field shorthands, like Foo {a, b, c} was tiny
[14:50:33] <eddyb> since it was all in the parser
[14:52:49] <edwardw> r? https://github.com/mozilla/rust/pull/12711
[15:06:10] <nmatsakis> eddyb: why introduce 'a and 'b into the method code? why not just use 'a?
[15:06:44] <eddyb> where?
[15:06:56] <eddyb> I might not remember even with code in my face
[15:07:07] <eddyb> but there are lifetime issues that mean sometimes you have to use a few
[15:07:25] <eddyb> if you don't want them to all become the shortest lifetime
[15:07:45] <eddyb> s/issues/quirks
[15:08:16] *** Quits: canhtak (canhtak@moz-46C3B4C8.wl.t.ulaval.ca) (Quit: canhtak)
[15:14:46] *** Joins: lpy (lpy@12172131.F09091A8.1348A864.IP)
[15:17:50] <nmatsakis> I'll just trying compiling it
[15:17:56] <nmatsakis> I just don't see why they shouldn't be the shortest one
[15:18:25] <nmatsakis> eddyb: did you mention a build error?
[15:18:48] <eddyb> nmatsakis: you still haven't pointed out what exactly you're talking about :P
[15:18:54] <eddyb> I guess I should grep for <'a, 'b>
[15:18:58] <nmatsakis> not necessary
[15:19:04] <nmatsakis> I'm saying i'll investigate
[15:19:08] <nmatsakis> that's why I didn't get more specific
[15:19:15] <nmatsakis> but you mentioned something about a move out of @T?
[15:19:17] <nmatsakis> eddyb: ^
[15:19:28] <eddyb> not this PR
[15:19:30] <nmatsakis> oh ok
[15:19:32] <nmatsakis> cool
[15:20:07] <eddyb> nmatsakis: I think I should've just changed the function creating LookupContext
[15:20:43] <eddyb> to explicitly take two linked borrowed pointers
[15:21:29] <eddyb> nmatsakis: I think Some(reference) doesn't subtype reference
[15:22:25] <eddyb> nmatsakis: so if it's not already the same lifetime as supplied_tps, regionck will complain
[15:22:38] <eddyb> unlike the case where I didn't have that wrapped in Option/Some
[15:24:04] <nmatsakis> eddyb: oh, yeah, because of the variance inference stuff (ncr is working on that)
[15:24:24] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[15:26:19] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[15:28:10] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[15:28:33] <nmatsakis> eddyb: yeah, sorry, I just got too many side distractions this morning to really grok the PR. I'll try again tomorrow morning or maybe later today.
[15:29:21] <eddyb> this entire week is a distraction for me
[15:30:24] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Input/output error)
[15:30:45] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[15:37:23] *** Joins: dherman (dherman@F16146EB.9D3722BB.58DC3EE6.IP)
[15:37:23] *** ChanServ sets mode: +ao dherman dherman
[15:38:09] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[15:39:06] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[15:40:46] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Input/output error)
[15:44:16] *** Quits: edwardw (edwardw@4112974A.B4358688.30F15291.IP) (Quit: Leaving...)
[16:01:39] *** Quits: Zr40 (zr40@EE4BB9F5.926C319A.BE2F4011.IP) (Quit: leaving)
[16:03:37] <cmr> \o/ new harddrive just came.
[16:13:24] *** Joins: canhtak (canhtak@moz-E7F2DD45.dsl.bell.ca)
[16:23:49] *** Quits: doomlord_ (servitor@moz-99BE89EC.range86-184.btcentralplus.com) (Quit: Leaving)
[16:23:51] *** Quits: [o__o] (~o__o@604A2740.DB688352.F4ADE383.IP) (Input/output error)
[16:24:09] *** Joins: [o__o] (~o__o@604A2740.DB688352.F4ADE383.IP)
[16:25:00] *** Joins: mawuli (mawuli@moz-A89BBCE.com.gh)
[16:29:36] *** kimundi is now known as zz_kimundi
[16:36:11] *** Joins: doomlord_ (servitor@moz-99BE89EC.range86-184.btcentralplus.com)
[16:37:14] <eddyb> cmr: I just need to find a good excuse for filling it now
[16:38:11] *** Joins: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP)
[16:38:11] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/r3-N5g
[16:38:11] *** Parts: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP) ()
[16:38:15] *** Joins: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP)
[16:38:15] <ghrust> [13rust] 15bors pushed 3 new commits to 06auto: 02http://git.io/5gvMkQ
[16:38:15] <ghrust> 13rust/06auto 142760974 15Daniel Micay: add correct floating point `min` and `max` methods....
[16:38:15] <ghrust> 13rust/06auto 1428d4f80 15Daniel Micay: consistently use LLVM floating point intrinsics
[16:38:16] <ghrust> 13rust/06auto 14a7da925 15bors: auto merge of #12700 : thestinger/rust/float, r=cmr
[16:38:18] *** Parts: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP) ()
[16:43:24] *** Quits: rocode (rocode@moz-B9927398.clsp.qwest.net) (Quit: Leaving)
[16:48:21] *** Quits: Kxepal (Miranda@moz-510CB007.pppoe.mtu-net.ru) (Ping timeout)
[16:48:45] *** Joins: Kxepal (Miranda@moz-8A62DD41.pppoe.mtu-net.ru)
[16:52:24] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[16:53:54] *** Quits: lpy (lpy@12172131.F09091A8.1348A864.IP) (Client exited)
[16:59:00] *** zz_kimundi is now known as kimundi
[17:01:45] <eddyb> nmatsakis: lol, check_loop is tiny. why do we even have such a pass?
[17:01:59] <eddyb> surely we can do this during a more complicated pass...
[17:02:35] <eddyb> rusti: loop {(||{break;}) break;}
[17:02:36] -rusti- <anon>:10:28: 10:33 error: expected one of `;`, `}` but found `break`
[17:02:36] -rusti- <anon>:10         loop {(||{break;}) break;}
[17:02:36] -rusti-                                      ^~~~~
[17:02:36] -rusti- application terminated with error code 101
[17:02:42] <eddyb> rusti: loop {(||{break;}); break;}
[17:02:43] -rusti- <anon>:10:15: 10:27 error: cannot determine a type for this expression: unconstrained type
[17:02:43] -rusti- <anon>:10         loop {(||{break;}); break;}
[17:02:43] -rusti-                         ^~~~~~~~~~~~
[17:02:43] -rusti- error: aborting due to previous error
[17:02:43] -rusti- application terminated with error code 101
[17:02:51] <eddyb> rusti: loop {(||{break;})(); break;} 5
[17:02:51] -rusti- <anon>:10:15: 10:29 error: cannot determine a type for this expression: unconstrained type
[17:02:51] -rusti- <anon>:10         loop {(||{break;})(); break;} 5
[17:02:51] -rusti-                         ^~~~~~~~~~~~~~
[17:02:52] -rusti- error: aborting due to previous error
[17:02:53] -rusti- application terminated with error code 101
[17:02:55] <eddyb> bleah
[17:03:01] <eddyb> rusti: while false {(||{break;})(); break;} 5
[17:03:01] -rusti- <anon>:10:22: 10:36 error: cannot determine a type for this expression: unconstrained type
[17:03:02] -rusti- <anon>:10         while false {(||{break;})(); break;} 5
[17:03:02] -rusti-                                ^~~~~~~~~~~~~~
[17:03:02] -rusti- error: aborting due to previous error
[17:03:03] -rusti- application terminated with error code 101
[17:03:07] <eddyb> uhm...
[17:03:19] <eddyb> rusti: while false {(||->int{break;})();} 5
[17:03:19] -rusti- <anon>:10:31: 10:37 error: `break` inside of a closure
[17:03:20] -rusti- <anon>:10         while false {(||->int{break;})();} 5
[17:03:20] -rusti-                                         ^~~~~~
[17:03:20] -rusti- error: aborting due to previous error
[17:03:20] -rusti- application terminated with error code 101
[17:04:48] *** Quits: dherman (dherman@F16146EB.9D3722BB.58DC3EE6.IP) (Quit: dherman)
[17:14:01] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:15:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:15:44] *** Joins: pcwalton (pcwalton@F16146EB.9D3722BB.58DC3EE6.IP)
[17:15:44] *** ChanServ sets mode: +ao pcwalton pcwalton
[17:16:24] <eddyb> pcwalton, nmatsakis: sup?
[17:16:30] <pcwalton> hi
[17:17:11] <eddyb> larsberg really wants to see #12610 merged soon :P
[17:17:38] <pcwalton> niko is reviewing right now
[17:18:11] <eddyb> \o/ I guess there aren't nits to be talking about (other than that one lifetime thing)
[17:20:46] <cmr> http://www.cs.princeton.edu/~dpw/papers/lambdazap-icfp06.pdf
[17:24:50] <strcat> meh, the generic resolution bug is still around
[17:24:55] <strcat> need to rename min/max on iterators
[17:25:02] <eddyb> :(
[17:25:38] <eddyb> cmr: at a glance, looks like something you could do in a LLVM pass
[17:26:32] <eddyb> I guess it's typed as in "typed lambda calculus"
[17:26:50] <cmr> that's exactly what it says on the tin :P
[17:27:31] * flaper87 whatches eddyb stating the already stated in that paper :D
[17:27:42] <eddyb> it had to be a smart title
[17:27:50] <eddyb> to make me look like a fool
[17:28:47] <eddyb> flaper87: I'm tired, so I just skimmed it, saw hardware, fault tolerance, thought "a simple statically typed abstract language that's fault resilient, cool"
[17:29:07] <eddyb> didn't make the lambda and typed connection immediately
[17:29:15] <flaper87> eddyb: PLUS it's always fun to mess with you  :D
[17:29:54] <pcwalton> down to 41 type errors
[17:30:35] <eddyb> it's going to be a tight race
[17:30:44] <flaper87> pcwalton: w000t
[17:32:29] <strcat> pcwalton: do you think it's okay to make min/max/clamp default methods on Ord? I was wondering about how to handle floating point well
[17:32:41] <pcwalton> sounds good to me
[17:32:53] <strcat> pcwalton: either we need to make them use TotalOrd or give floats a way to override them with the correct implementation, and overriding would be a lot better (works with deriving)
[17:33:09] <strcat> it's annoying to reserve common names like min/max with a trait many things with implement though :(
[17:33:20] <strcat> guess it's not an enormous problem
[17:33:34] <strcat> can use max_element/min_element for a container extract-min/extract-max
[17:33:54] <strcat> already need to rename the iterator ones due to that name resolve issue...
[17:38:23] *** Quits: mawuli (mawuli@moz-A89BBCE.com.gh) (Ping timeout)
[17:41:07] *** Parts: aepsil0n (eduard@moz-B5507714.hsi8.kabel-badenwuerttemberg.de) ()
[17:42:45] *** Joins: pauls (pauls@moz-BFEF1F22.ccs.neu.edu)
[17:43:01] <pcwalton> down to 22
[17:43:44] <eddyb> nmatsakis: you can do it!
[17:43:58] <strcat> acrichto: rm'ed r+
[17:44:04] <strcat> does bors actually understand r- though?
[17:44:11] * strcat looks
[17:44:11] <acrichto> dunno
[17:44:17] *** Joins: brson (brson@F16146EB.9D3722BB.58DC3EE6.IP)
[17:44:17] *** ChanServ sets mode: +qo brson brson
[17:44:42] *** Quits: pcwalton (pcwalton@F16146EB.9D3722BB.58DC3EE6.IP) (Ping timeout)
[17:44:50] <strcat>     if not 'disapproval_tokens' in cfg:
[17:44:53] <strcat>         cfg['disapproval_tokens'] = ['r-']
[17:45:04] <strcat> hm
[17:45:22] <strcat>         if len(self.disapproval_list()) != 0:
[17:45:24] <strcat>             return STATE_BAD
[17:45:26] <strcat> yep it appears it does work
[17:45:38] <strcat> it also doesn't seem like it will accept a pull request if there's an r- at all
[17:45:41] <strcat> even if an r+ comes later
[17:45:48] <strcat> should test it..
[17:51:51] *** Joins: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP)
[17:51:52] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/5gvMkQ
[17:51:52] *** Parts: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP) ()
[17:56:45] *** Joins: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP)
[17:56:45] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/lcvtkw
[17:56:45] *** Parts: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP) ()
[18:01:35] *** Joins: pcwalton (pcwalton@F16146EB.9D3722BB.58DC3EE6.IP)
[18:01:35] *** ChanServ sets mode: +ao pcwalton pcwalton
[18:08:50] *** Quits: pcwalton (pcwalton@F16146EB.9D3722BB.58DC3EE6.IP) (Ping timeout)
[18:23:39] *** Joins: doener (doener@moz-C68F600D.unity-media.net)
[18:25:48] *** Joins: ecr (chatzilla@moz-6B73682D.dhcp4.washington.edu)
[18:39:30] *** Joins: edwardw (edwardw@4112974A.B4358688.30F15291.IP)
[18:43:39] *** Joins: mawuli (mawuli@moz-A89BBCE.com.gh)
[18:43:49] *** Quits: Kxepal (Miranda@moz-8A62DD41.pppoe.mtu-net.ru) (Quit: Kxepal)
[18:44:03] *** Joins: Kxepal (Miranda@moz-8A62DD41.pppoe.mtu-net.ru)
[18:44:40] *** Quits: canhtak (canhtak@moz-E7F2DD45.dsl.bell.ca) (Quit: canhtak)
[18:48:21] *** Joins: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP)
[18:54:47] *** Quits: Edwards (MeltdownMo@moz-B62E1D6B.members.linode.com) (Ping timeout)
[18:54:57] *** Quits: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP) (Ping timeout)
[18:55:41] *** Quits: nanotech (nanotech@moz-DD3580FD.members.linode.com) (Ping timeout)
[18:55:52] *** Quits: friggle (friggle@moz-A607EAFA.members.linode.com) (Ping timeout)
[18:55:55] *** Quits: xales (xales@moz-7DEA692E.forevernothing.com) (Ping timeout)
[18:56:04] *** Quits: bstrie (ben@moz-D5A1D0F5.members.linode.com) (Ping timeout)
[18:57:14] *** Quits: mawuli (mawuli@moz-A89BBCE.com.gh) (Ping timeout)
[18:57:25] *** Joins: nrc (nrc@F16146EB.9D3722BB.58DC3EE6.IP)
[18:57:32] *** Quits: carter (carter@moz-58F59B3A.members.linode.com) (Ping timeout)
[18:57:34] <eddyb> nmatsakis: the virtual call would be removed by something like glaebhoerl's HasPrefix
[18:57:45] <eddyb> nmatsakis: or fixed-layout "virtual" fields
[19:00:31] *** Joins: mawuli (mawuli@moz-A89BBCE.com.gh)
[19:01:03] *** Joins: pcwalton (pcwalton@F16146EB.9D3722BB.58DC3EE6.IP)
[19:01:03] *** ChanServ sets mode: +ao pcwalton pcwalton
[19:01:14] *** Joins: carter (carter@moz-58F59B3A.members.linode.com)
[19:01:21] *** Joins: nanotech (nanotech@moz-DD3580FD.members.linode.com)
[19:01:23] *** Joins: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP)
[19:01:30] *** Joins: Edwards (MeltdownMo@moz-B62E1D6B.members.linode.com)
[19:04:44] *** Joins: bstrie (ben@moz-D5A1D0F5.members.linode.com)
[19:05:14] *** Joins: friggle (friggle@moz-A607EAFA.members.linode.com)
[19:06:50] *** Joins: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP)
[19:06:50] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/tgYXeA
[19:06:50] *** Parts: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP) ()
[19:07:06] *** Quits: doener (doener@moz-C68F600D.unity-media.net) (Quit: leaving)
[19:07:26] *** Quits: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net) (Ping timeout)
[19:11:43] *** Joins: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP)
[19:11:43] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/ajtUKg
[19:11:43] *** Parts: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP) ()
[19:13:25] <ecr> nmatsakis: ping
[19:13:37] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[19:25:31] *** Joins: xales (xales@moz-7DEA692E.forevernothing.com)
[19:26:35] *** Joins: dherman (dherman@F16146EB.9D3722BB.58DC3EE6.IP)
[19:26:35] *** ChanServ sets mode: +ao dherman dherman
[19:28:51] *** Joins: geoffhill (geoffhill@moz-95FF7399.members.linode.com)
[19:33:00] *** Quits: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP) (Ping timeout)
[19:34:15] *** Joins: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP)
[19:35:09] *** Joins: canhtak (canhtak@moz-E7F2DD45.dsl.bell.ca)
[19:37:15] *** Joins: gwty (gwtypc@CFCDB47B.132F4848.B29E8538.IP)
[19:40:32] *** Joins: tca (sid17279@moz-A42E5B7B.irccloud.com)
[19:41:49] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[19:42:17] <nrc> how do I get from a Vec<T> to a ~[T]?
[19:42:29] <strcat> atm, you don't
[19:42:33] <strcat> just port all the code to Vec<T>
[19:42:42] <strcat> (well, pcwalton is doing that for rust itself)
[19:43:05] <pcwalton> nrc: .move_iter().collect()
[19:43:09] <nrc> I have code that is converted calling code which is not yet converted
[19:43:11] <pcwalton> yeah
[19:43:13] <pcwalton> that's what I've done
[19:43:15] <pcwalton> .move_iter().collect()
[19:43:20] <nrc> pcwalton: cool, thanks
[19:44:39] *** Quits: canhtak (canhtak@moz-E7F2DD45.dsl.bell.ca) (Quit: canhtak)
[19:46:58] *** Joins: canhtak (canhtak@moz-E7F2DD45.dsl.bell.ca)
[19:47:18] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[19:48:04] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[19:53:23] *** Quits: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP) (Ping timeout)
[20:02:15] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[20:03:46] *** Quits: ecr (chatzilla@moz-6B73682D.dhcp4.washington.edu) (Ping timeout)
[20:05:45] *** Joins: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP)
[20:11:09] *** Joins: ecr (chatzilla@moz-6B73682D.dhcp4.washington.edu)
[20:11:49] *** Quits: nrc (nrc@F16146EB.9D3722BB.58DC3EE6.IP) (Ping timeout)
[20:13:09] *** Joins: mib_g5kj65 (Mibbit@48C440B8.408DC8F6.7745FF14.IP)
[20:17:11] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[20:19:20] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[20:21:43] *** Joins: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP)
[20:21:43] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/Lhig9w
[20:21:43] *** Parts: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP) ()
[20:24:00] *** Quits: edwardw (edwardw@4112974A.B4358688.30F15291.IP) (Quit: Leaving...)
[20:25:07] *** Quits: mib_g5kj65 (Mibbit@48C440B8.408DC8F6.7745FF14.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[20:25:34] *** Joins: sunfish (chatzilla@moz-BBE3ABD.mv.mozilla.com)
[20:26:03] <aatch> eddyb, quick lifetime-related question, since I think you might know: is it just rvalue lifetimes that last for as long as they are needed, or all borrows?
[20:27:33] <eddyb> rusti: use std::vec_ng::Vec; let x = &mut &mut Vec::new(); x.push(0); (*x).clone()
[20:27:35] -rusti- std::vec_ng::Vec<int>{len: 1u, cap: 1u, ptr: (0x7f8424000df0 as *mut ())}
[20:27:46] <eddyb> aatch: ^^ that works. I'm not sure on the details, nmatsakis has a blog post on it
[20:28:21] <aatch> Ah, cool.
[20:28:32] <aatch> Just making sure I'm not lying on my presentation.
[20:32:17] <aatch> rusti: use std::vec_ng::Vec; let mut v = Vec::new(); let vp = &mut v; vp.push(0); v.push(1); v
[20:32:18] -rusti- pastebinned 19 lines of output: http://sprunge.us/RONE
[20:32:32] <eddyb> ROME: close enough
[20:32:34] <aatch> Ah, that's what I wanted to know.
[20:32:49] <eddyb> aatch: you're trying to return v
[20:33:17] <eddyb> that's one of the issues. the other issue is that you can't access v through the borrowed local
[20:33:26] <aatch> eddyb, nah, it's complaining about the `v.push(1)` because it borrows it the second time.
[20:33:45] <aatch> even though I don't use `vp` after it.
[20:33:57] <eddyb> we don't restrict borrows to the smallest scope
[20:34:04] <eddyb> that hasn't change with rvalue lifetimes
[20:34:08] <eddyb> *changes
[20:34:10] <eddyb> *changed even
[20:34:11] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[20:34:20] <aatch> eddyb, I know, I just wasn't sure if it *had* changed.
[20:34:34] <aatch> Or if it was just the rvalue stuff.
[20:34:53] <aatch> Since we could, in theory, restrict borrows to the minimum size.
[20:37:20] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[20:39:09] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[20:40:30] *** Quits: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru) (Quit: Leaving...)
[20:42:41] *** Joins: davidkrauser (dkrauser@moz-F53923FE.tunnelr.com)
[20:42:45] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[20:43:56] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[20:49:55] *** Parts: davidkrauser (dkrauser@moz-F53923FE.tunnelr.com) ()
[20:50:51] <eddyb> https://prs.paas.allizom.org/mozilla/rust
[20:51:06] <eddyb> sooo what does it tell me?
[20:51:26] <eddyb> just a more compact overview?
[20:51:51] *** Joins: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP)
[20:51:51] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/7jPEEw
[20:51:51] <ghrust> 13rust/06auto 1453f3442 15Dmitry Promsky: Disallowed patterns in extern fn declarations....
[20:51:51] <ghrust> 13rust/06auto 14ff22e47 15bors: auto merge of #12715 : dmski/rust/no-extern-fn-pat, r=alexcrichton...
[20:51:51] *** Parts: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP) ()
[20:51:57] <brson> i like that it tells you exactly how fresh every pr is
[20:52:14] <brson> and i like that our oldest is only 8 days
[20:54:41] <acrichto> brson: whoa where are you seeing that info?
[20:55:10] <eddyb> acrichto: my link https://prs.paas.allizom.org/mozilla/rust
[20:55:21] <brson> I don't see any of my prs on that list
[20:55:23] <acrichto> whoa
[20:55:25] <brson> maybe it doesn't show everything
[20:55:26] <eddyb> acrichto: jdm shared the mozilla/servo view in #servo
[20:55:35] *** Quits: geoffhill (geoffhill@moz-95FF7399.members.linode.com) (Quit: )
[20:55:48] <acrichto> is that all our PRs?
[20:56:08] <acrichto> it's just 30
[20:56:13] <acrichto> when we have 40+
[20:58:09] <jdm> source available at https://github.com/peterbe/github-pr-triage
[20:58:50] <acrichto> ugh travis is broken again
[20:59:05] <acrichto> as in we are no longer compatible with LLVM 3.3
[20:59:52] *** Joins: nrc (nrc@F16146EB.9D3722BB.58DC3EE6.IP)
[21:02:32] *** Joins: geoffhill (geoffhill@moz-95FF7399.members.linode.com)
[21:05:22] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[21:05:57] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[21:06:38] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[21:07:42] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[21:09:00] *** Joins: tikue (tkuehn@CB7FC854.FAD414BA.D74CC41D.IP)
[21:11:25] *** Quits: ecr (chatzilla@moz-6B73682D.dhcp4.washington.edu) (Ping timeout)
[21:14:42] *** Quits: tikue (tkuehn@CB7FC854.FAD414BA.D74CC41D.IP) (Quit: tikue)
[21:25:53] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[21:27:03] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[21:32:27] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[21:35:08] *** Joins: Sharp (Sharp@19388942.6B775EBE.DC877F3B.IP)
[21:35:27] <eddyb> acrichto: haha I found the embargo visitor
[21:35:30] <eddyb> <3
[21:35:39] <acrichto> lol
[21:36:59] <eddyb> I want an IDE :(
[21:37:11] <eddyb> action at a distance refactoring pls
[21:39:06] <huon> eddyb: `sed` ;P
[21:39:11] <ChrisMorgan> eddyb: do you want an IDE, or do you just want intelligent semantic refactoring?
[21:39:21] <eddyb> ChrisMorgan: the latter
[21:39:27] <ChrisMorgan> Me too.
[21:39:41] *** Quits: steveklabnik (steev@B1BA5385.27F34CF7.5670445F.IP) (Ping timeout)
[21:39:50] <eddyb> I have to touch (almost) every freaking librustc ever
[21:39:54] <eddyb> to remove two @
[21:40:01] <eddyb> librustc file, that is
[21:40:47] <ChrisMorgan> If you can identify recurring patterns, sed works tolerably well.
[21:41:11] <eddyb> it involves lifetimes
[21:42:42] <ChrisMorgan> But yes: a refactoring/&c. tool like gofix would be a delight to have.
[21:43:04] *** Joins: steveklabnik (steev@B1BA5385.27F34CF7.5670445F.IP)
[21:43:37] <strcat> pcwalton: meh, default methods for min/max don't really work ;)
[21:43:48] <pcwalton> why not?
[21:43:50] <strcat> #[deriving(Ord)] struct Foo(f64, f64); // wrong
[21:44:24] <pcwalton> http://en.cppreference.com/w/cpp/algorithm/min
[21:44:27] <pcwalton> same issue
[21:44:48] <pcwalton> #define MIN(x,y) ((x) < (y) ? (x) : (y)) /* same issue */
[21:45:00] <strcat> pcwalton: http://en.cppreference.com/w/cpp/concept/LessThanComparable
[21:45:01] <ChrisMorgan> Hmm. "warning: clang_darwin.mk: dropping arch 'i386' from lib 'eprintf' (clang does not support it)", &c. https://pastebin.mozilla.org/4482652 â€” are all these warnings expected? Can they be fixed?
[21:45:11] <strcat> pcwalton: it requires more than Ord does in rust
[21:45:27] <strcat> it's just not checked by the compiler
[21:45:28] <pcwalton> that's the same for Foo(f64,f64) no?
[21:45:38] <pcwalton> or are you referring to NaN?
[21:45:47] <strcat> pcwalton: I mean C++'s std::min forbids calling it with NaN
[21:45:55] <strcat> explicitly documented that way
[21:46:05] <strcat> well, you can interpret it two ways
[21:46:35] <strcat> it's undefined to call it with types not implementing the < strict weak ordering (floats don't) but as long as you don't pass a NaN, it's technically okay
[21:46:46] * strcat shrugs
[21:47:02] <pcwalton> it seems a shame to lose min() just because of tuples of NaNs
[21:47:16] <strcat> we'd still have min, it'd just require TotalOrd
[21:47:23] <strcat> pcwalton: the Float trait now provides min/max
[21:47:37] <pcwalton> I still wish we didn't have TotalEq/TotalOrd
[21:51:17] <strcat> pcwalton: I think with inheritance in place, it's better than the alternatives
[21:55:46] *** Quits: geoffhill (geoffhill@moz-95FF7399.members.linode.com) (Input/output error)
[22:01:40] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[22:01:44] *** Joins: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP)
[22:01:44] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/7jPEEw
[22:01:44] *** Parts: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP) ()
[22:05:58] *** Quits: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP) (Quit: Lost terminal)
[22:07:38] *** Quits: huon (Thunderbir@moz-826BD85A.lns20.syd6.internode.on.net) (Ping timeout)
[22:07:45] *** Joins: ecr (chatzilla@moz-E43ECA51.dhcp4.washington.edu)
[22:12:13] *** Quits: nrc (nrc@F16146EB.9D3722BB.58DC3EE6.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 30.0a1/20140304030204])
[22:15:25] *** flaper87 is now known as flaper87|afk
[22:15:40] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[22:16:55] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[22:17:07] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Connection reset by peer)
[22:17:16] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[22:24:46] <strcat> acrichto: https://github.com/mozilla/rust/pull/12718 added tests
[22:25:43] <strcat> rusti: use std::cmp::min; use std::f64::NAN; (min(NAN, 2.0), min(2.0, NAN))
[22:25:46] -rusti- (2f64, -NaNf64)
[22:27:09] <strcat> acrichto: er, I did the tests backwards.
[22:27:12] * strcat sighs
[22:28:20] *** Quits: canhtak (canhtak@moz-E7F2DD45.dsl.bell.ca) (Quit: canhtak)
[22:30:59] *** Joins: jdm (jdm@CAB30FBD.8F96AEA7.2D179A7D.IP)
[22:32:03] *** Joins: canhtak (canhtak@moz-E7F2DD45.dsl.bell.ca)
[22:36:03] *** Quits: dherman (dherman@F16146EB.9D3722BB.58DC3EE6.IP) (Quit: dherman)
[22:36:57] *** Quits: c74d (c74d@moz-E2EAC718.oc.oc.cox.net) (Ping timeout)
[22:50:03] <acrichto> strcat: r=me when tests are passing, thanks
[22:50:44] <strcat> NaN :(
[22:51:09] <strcat> some functions are supposed to treat it as required data (like sum) and bubble it up, but min/max are supposed to ignore it (it's just 'missing')
[22:54:22] <jensnockert> The problem is that some people want to ignore NaN, and some propagate it.
[22:54:27] <jensnockert> Same with sum tbh.
[22:59:12] <strcat> jensnockert: meh, seems fine to just follow IEEE754 and copy C99
[22:59:25] <jensnockert> I agree.
[22:59:52] <jensnockert> Still, I can't find two people who can agree what sign(x) should beâ€¦ :(
[23:00:02] <strcat> sign(x)?
[23:00:14] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[23:00:54] <jensnockert> strcat: Gives the sign of x.
[23:01:02] <jensnockert> But wtf is the sign?
[23:01:10] <strcat> damn it. I was wondering why it wasn't picking this up
[23:01:18] <strcat> github ordered the commits wrong
[23:04:49] <strcat> jensnockert: enum Sign { Positive, Negative, FileNotFound }, clearly
[23:05:01] <jensnockert> Sounds legit.
[23:05:13] <eddyb> hahaha
[23:05:19] <eddyb> that Bool
[23:05:42] <strcat> microsoft has a lot of bools where the false value evaluates to true and the true value evaluates to false
[23:05:51] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[23:05:59] <eddyb> I thought it was just one crazy osdev guy
[23:10:00] <strcat> jensnockert: it gets complicated with aggregates
[23:10:12] <strcat> jensnockert: (1.0, NaN) (2.0, NaN)
[23:10:14] <strcat> which is the max?
[23:10:22] <eddyb> second one, obv
[23:10:30] <eddyb> not that it's easy to implement or anything
[23:10:46] <jensnockert> strcat: Ordering of those should be undefined tbh.
[23:10:53] <jensnockert> Unless the user provides ordering.
[23:10:57] <strcat> eddyb: (NaN, 1.0), (NaN, NaN)
[23:10:57] <jensnockert> Like complex numbers.
[23:11:12] <eddyb> strcat: first one
[23:11:25] <strcat> eddyb: yeah, but how do you derive it? ;)
[23:11:39] <strcat> jensnockert: well now that we have max/min on Float, I think we should probably make the regular min/max require TotalOrd
[23:11:49] <strcat> perhaps we can teach the compiler to suggest the method for floats
[23:11:52] <eddyb> dark magic from the bottom of a black hole
[23:12:07] <eddyb> strcat: wait, no, I have the answer to everything!
[23:12:36] <eddyb> strcat: implement #[deriving] with an AI using transcedental computing
[23:12:45] *** Quits: ecr (chatzilla@moz-E43ECA51.dhcp4.washington.edu) (Quit: ChatZilla 0.9.90.1 [Firefox 28.0/20140227174348])
[23:12:52] <strcat> pcwalton: can you put Vec in the prelude? mostly to avoid people porting to vec_ng and then having to update to vec
[23:13:02] <pcwalton> I guess so
[23:13:17] <pcwalton> let's do it in a later PR
[23:13:28] <strcat> sounds good
[23:15:15] *** Joins: dherman (dherman@F16146EB.9D3722BB.58DC3EE6.IP)
[23:15:15] *** ChanServ sets mode: +ao dherman dherman
[23:27:20] *** Joins: c74d (c74d@moz-E2EAC718.oc.oc.cox.net)
[23:28:27] <eddyb> git grep -E ': [^&](\'a )?ty::ctxt\b' src/librustc | wc -l
[23:28:28] <eddyb> 0
[23:28:31] <eddyb> pcwalton: ^^ :D
[23:28:45] <pcwalton> cool
[23:28:59] <eddyb> now to try and make this compile. boy oh boy
[23:29:51] <eddyb> pcwalton: it probably won't show up on graphs, but these two removed @ will get rid of a ton of refcounting
[23:32:38] *** Quits: dherman (dherman@F16146EB.9D3722BB.58DC3EE6.IP) (Quit: dherman)
[23:35:29] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[23:37:32] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[23:38:46] *** Joins: dherman (dherman@F16146EB.9D3722BB.58DC3EE6.IP)
[23:38:46] *** ChanServ sets mode: +ao dherman dherman
[23:39:41] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Connection reset by peer)
[23:39:47] *** Joins: jensnock_ (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[23:41:32] <eddyb> tcx: ty::&ctxt // go home, &
[23:45:01] *** Joins: nrc (nrc@F16146EB.9D3722BB.58DC3EE6.IP)
[23:51:24] *** Quits: blank_name (blank_name@463DB555.53526368.6D228269.IP) (Ping timeout)
[23:53:31] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[23:54:48] *** Joins: blank_name (blank_name@463DB555.53526368.6D228269.IP)
