[00:00:05] <strcat> it would be nice if rustc checked the ret value of syscalls
[00:00:06] <pnkfelix> Eridius: what version of libuv do you have checked out?
[00:00:11] *** Joins: sp3d (a@moz-6F12212B.fidnet.com)
[00:00:14] <strcat> tikue_: shouldn't be get_mut
[00:00:15] <Eridius> pnkfelix: whatever's currently set in tip of master
[00:00:18] <strcat> those shouldn't exist.
[00:00:32] <strcat> there's a get method on the object find returns
[00:00:41] <tikue_> strcat: find_mut(foo).unwrap() is too much 
[00:00:41] <strcat> or unwrap, forget what it's called now
[00:00:47] <tikue_> it's so long
[00:00:51] *** Quits: mib_9uybip (mib_9uybip@95879FC5.102D9800.D35A31DF.IP) (Ping timeout)
[00:00:53] <pnkfelix> Eridius: would you mind humoring me and doing a `git log âˆ’1` in the src/libuv dir?
[00:01:13] <pnkfelix> Eridius: just because I dont trust our submodule sync infrastructure?
[00:01:17] <Eridius> ef2bcd134164adcaa072dcb56e62b737fdcb075e
[00:01:40] <pnkfelix> Eridius: thx, okay that matches mine.
[00:01:40] *** Quits: miza (Mibbit@moz-4DD51325.home.otenet.gr) (Quit: http://www.mibbit.com ajax IRC Client)
[00:01:41] <Eridius> pnkfelix: I ran submodule sync and submodule update manually instead of relying on the config script
[00:01:53] <strcat> meh it doesn't even work if all syscalls are allowed
[00:02:20] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[00:02:33] <tjc> Eridius: in re: your comment on #8203 -- do you have direct push access? if so, you can push to try and not have to wait for someone to r+
[00:02:34] <strcat> maybe it picked up an implicit dependency on something else
[00:02:34] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[00:02:53] <Eridius> tjc: no I have no access whatsoever
[00:03:14] <Eridius> tjc: but I'm optimistic that the Windows problem will go away because libuv is now responsible for actually spawning
[00:03:26] <tjc> Eridius: Ah ok. I'm not sure what the process is for giving someone push access now that graydon is temporarily on leave, but I'll find out
[00:03:48] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[00:04:40] <acrichto> pnkfelix Eridius https://github.com/mozilla/rust/pull/8832
[00:04:53] <Eridius> acrichto: is that the same patch from the gist?
[00:05:04] <acrichto> no, slightly different, achieves the same goal though
[00:05:07] <Eridius> ok
[00:05:11] <acrichto> they should both work
[00:05:28] <Eridius> I think the dependencies are broken; I appear to be compiling stage1 libstd now so the gist worked, but only after I did a complete `git clean -xfd` and re-configured
[00:05:36] <dwrensha> I need some help figuring out the new type parameter syntax
[00:05:43] <dwrensha> could someone take a look at https://gist.github.com/dwrensha/26be84865930ecdbe8d5 ?
[00:06:02] <pnkfelix> Eridius: Okay that would be consistent with some problems I was seeing earlier
[00:06:15] <Eridius> dwrensha: I think that's supposed to be Foo:<T>::foo() now, though I'm not certain if that's implemented
[00:06:31] <strcat> acrichto: did something change about how we handle stdin?
[00:06:39] <acrichto> strcat: no
[00:06:47] <Eridius> ok stopping this compile to try acrichto's patch
[00:06:48] <acrichto> unless you mean in reference to child processes
[00:07:01] <dwrensha> Eridius: that doesn't work
[00:07:05] <acrichto> strcat: although actually olsonjeffery would know better than I would
[00:07:10] <dwrensha> nor if the first colon is doubled
[00:07:24] <strcat> rusti: 1 + 1
[00:07:24] -rusti- /usr/local/bin/irc.sh: 16: exec: ./out: not found
[00:07:24] -rusti- application terminated with error code 127
[00:07:26] <Eridius> hrm, I thought you could add .mbox to a PR to get an mbox file. Is it some other extension?
[00:07:49] <engla> dwrensha: I heard pcwalton saying something about that syntax was deprecated in favor of  giving the type hint on the return value
[00:07:53] <acrichto> dwrensha: the new syntax isn't implemented just yet, because T is the "Self" type parameter you can't implement it yet
[00:08:03] <tiffany> is there a reason you can't put type parameters on generic types?
[00:08:10] *** Joins: sonwows (Mibbit@119793D2.F91BEA9E.301BE678.IP)
[00:08:16] <acrichto> tiffany: you should be able to, do you have an example?
[00:08:24] <strcat> rusti: 1 + 1
[00:08:25] -rusti- /usr/local/bin/irc.sh: 16: exec: ./out: not found
[00:08:25] -rusti- application terminated with error code 127
[00:08:27] <Eridius> engla: sadly dwrensha's Foo doesn't put the type in the return value, so the type hint won't work there
[00:08:30] <strcat> dammit rusti
[00:08:30] <dwrensha> what is a "type hint"?
[00:08:35] <tiffany> trait Monad<M,A,B> { fn bind(&fn(A)->M<B>, M<A>) -> M<B>;}
[00:08:38] <strcat> rusti: 1 + 1
[00:08:39] -rusti- 0
[00:08:39] -rusti- /usr/local/bin/irc.sh: 18: exec: ./out: not found
[00:08:39] -rusti- application terminated with error code 127
[00:08:48] <tjc> tiffany: that would require higher-rank polymorphism, which Rust doesn't have
[00:08:52] <strcat> why the hell would rustc exit with 0 but not output a binary
[00:08:53] <Eridius> ahh it's .patch
[00:08:54] <strcat> :|
[00:08:56] <ecr> tiffany: because no one has implemented higher kinded types yet
[00:09:17] <strcat> rusti: 1 + 1
[00:09:17] -rusti- out.o
[00:09:18] -rusti- 0
[00:09:18] -rusti- /usr/local/bin/irc.sh: 20: exec: ./out: not found
[00:09:18] -rusti- application terminated with error code 127
[00:09:20] <strcat> oh
[00:09:22] <strcat> weird
[00:09:23] <tiffany> is it difficult to implement?
[00:09:34] <tjc> tiffany: it's not straightforward, at least, and it interacts with other features
[00:09:38] <strcat> acrichto: so it makes out.o and... exits with 0
[00:09:39] <strcat> :\
[00:09:40] <Ralith> tiffany: also, you forgot 'pure'
[00:09:45] <dwrensha> So is there a way to implement what I want?
[00:09:54] <dwrensha> Or will my stuff be broken until a fix comes in?
[00:09:59] <acrichto> strcat: what are the flags you're passing?
[00:10:01] <tjc> Ralith: Rust hasn't had 'pure' in a few versions now 
[00:10:07] <strcat> rustc - -o out
[00:10:08] <Ralith> tjc: wrong kind of pure
[00:10:10] <strcat> with input piped to it
[00:10:17] <Eridius> dwrensha: I think your stuff will be broken for now, but you'd have to ask pcwalton
[00:10:24] <Ralith> pure :: forall (f :: * -> *) a. Applicative f => a -> f a
[00:10:29] <tjc> oh, I see
[00:10:39] <dwrensha> erg
[00:10:41] <tjc> coming from Haskell, usually we call that `return`, though obviously you couldn't call it that in Rust :-)
[00:10:55] <strcat> we could have 'pure' without how awful it was before
[00:10:58] <Ralith> coming from Haskell, we call that 'pure' whenever we can get away wit hit, because 'return' is a terrible name
[00:10:58] <acrichto> strcat: that's odd... probably open an issue 
[00:11:08] <tjc> Well, that's news to me :-)
[00:11:22] <Ralith> tmyk ^^
[00:11:29] <tiffany> wrap sounds like a better name
[00:11:32] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Quit: pcwalton)
[00:11:35] <Ralith> it isn't
[00:11:47] <ecr> tjc: I think part of the "finally make Applicative a superclass of Monad" patch is going to be making return just be equal to pure by default
[00:11:52] <strcat> acrichto: what about with process spawning?
[00:11:54] <strcat> hm
[00:12:24] <tjc> ecr: not sure what milestone that's on :-)
[00:12:27] <acrichto> strcat: well it changed in the sense that it was reimplemented on top of libuv, but it *should* still work
[00:12:28] <ecr> personally, I think 'inject' makes the most sense for pure/return as a name
[00:12:49] <ecr> tjc: Soon (TM)
[00:13:00] *** Joins: Scaevolus (none@moz-C0499EDF.hsd1.wa.comcast.net)
[00:13:03] *** Joins: Chef (Chef@moz-4C317041.dsl.teksavvy.com)
[00:13:43] <ecr> tjc: but really, http://www.haskell.org/haskellwiki/Functor-Applicative-Monad_Proposal
[00:13:56] <tjc> ecr: Oh, you mean in *Haskell*
[00:14:02] <tjc> I thought you were talking about Rust, and was scared :-)
[00:15:14] <ecr> if we ever get HKTs and we don't make Applicative a supertrait of Monad, then I'm going to have to slap some people...
[00:15:29] <strcat> acrichto: oh nice
[00:15:34] <strcat> libuv *is* using posix_spawn :D
[00:15:37] <strcat> that's why it doesn't work anymore
[00:15:40] <acrichto> wait what
[00:15:43] <strcat> also, we aren't checking a ret value somewhere.
[00:15:48] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[00:15:48] *** ChanServ sets mode: +o pcwalton
[00:15:58] <Eridius> strcat: you're blocking posix_spawn?
[00:16:00] <acrichto> git grep posix_spawn returns nothing in libuv
[00:16:07] <strcat> acrichto: look up vfork then
[00:16:16] <strcat> maybe they do it the old deprecated way
[00:16:17] <acrichto> strcat: no hits
[00:16:17] *** Quits: jclements (jclements@moz-62D9F423.wireless.calpoly.edu) (Quit: jclements)
[00:16:25] <strcat> acrichto: well they *are* making a vfork syscall
[00:16:27] <strcat> and it makes me happy
[00:16:29] <strcat> rusti: 2
[00:16:30] -rusti- /usr/local/bin/irc.sh: 16: exec: ./out: not found
[00:16:30] -rusti- application terminated with error code 127
[00:16:34] * strcat shrugs
[00:16:37] <strcat> need something else too
[00:16:52] <dwrensha> Looking at the git log, I think what I need is the Foo::<for T>::foo() syntax
[00:16:59] <dwrensha> which apparently does not exist yet
[00:17:07] <dbaupp> should we bump the priority of https://github.com/mozilla/rust/pull/8832 ?
[00:17:20] <Eridius> strcat: I see a fork() call in uv_spawn()
[00:17:31] * strcat shrugs
[00:17:39] <strcat> wow we use a 
[00:17:41] <strcat> err
[00:17:43] <strcat> rusti: 2
[00:17:45] <tjc> dbaupp: I bumped it
[00:17:49] -rusti- timeout triggered!
[00:17:54] *** Joins: acrichto_ (acrichto@moz-B63D64BD.res.cmu.edu)
[00:18:03] <strcat> we should probably start checking ret values
[00:18:10] * strcat wants a real error msg
[00:18:24] *** Quits: acrichto (acrichto@moz-17CABEB0.wv.cc.cmu.edu) (Ping timeout)
[00:18:37] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[00:18:41] <strcat> rusti: 2
[00:18:41] -rusti- playpen: non-existent syscall: _exit
[00:18:58] <strcat> silly strace giving invalid output
[00:19:01] <dbaupp> woah! the bors queue fits on one screen. how'd this happen? o_O
[00:19:14] <Eridius> strcat: yeah, don't see posix_spawn or vfork anywhere, just see fork/execvp
[00:19:18] <jmgrosen> so I have an struct with a ~[~Foo] member but want a method to return that member, but &'self [&'self Foo] -- is that possible?
[00:19:18] <tjc> dbaupp: you got a bigger screen?
[00:19:19] <tjc> ;-)
[00:19:29] <acrichto_> dbaupp: it's the smallest I've ever seen it since graydon closed incoming and deleted all pull requests :P
[00:19:31] <Eridius> jmgrosen: no, but you could return a ~[&'self Foo]
[00:19:33] <strcat> rusti: 2
[00:19:39] -rusti- timeout triggered!
[00:19:40] <jdm> what kind of macro token can take a type name with potential parameters?
[00:19:41] <strcat> oh come on
[00:19:45] <jdm> like a<foo>
[00:19:50] <jmgrosen> Eridius: why isn't it possible?
[00:19:52] <jdm> ident does not work
[00:20:01] <dbaupp> jdm: path, iirc
[00:20:04] <jmgrosen> Eridius: I wish I could just return a VecIterator :(
[00:20:21] <Eridius> jmgrosen: because a ~[&'self Foo] does not share a memory representation with a ~[~Foo] (at least, not for all Foo)
[00:20:24] <Eridius> so you can't just transmute it
[00:20:29] <dbaupp> rusti: macro_rules! foo ( ($p:path) => {} ) foo!(Foo<'a, A>)
[00:20:29] -rusti- <anon>:1:0: 1:0 error: unexpected token: `<eof>`
[00:20:30] -rusti- <anon>:1 extern mod extra;
[00:20:30] -rusti-          ^
[00:20:30] -rusti- application terminated with error code 101
[00:20:36] <Eridius> which means you need to build a new vector, which means you need to return it instead of returning a reference
[00:20:41] <dbaupp> rusti: macro_rules! foo ( ($p:path) => { {} } ) foo!(Foo<'a, A>)
[00:20:46] -rusti- timeout triggered!
[00:20:58] <Eridius> jmgrosen: why can't you return a VecIterator?
[00:21:08] <jmgrosen> Eridius: the compiler aborts :(
[00:21:24] <jmgrosen> with my specific use case, that is
[00:21:41] <engla> it does that if you say 'self at the wrong moment
[00:21:58] <jdm> dbaupp: thanks!
[00:22:04] <jmgrosen> engla: what do you mean?
[00:22:17] <Eridius> jmgrosen: :/
[00:22:21] <dbaupp> jmgrosen: `abort`s or `fail`s (i.e. a crash or an ICE)?
[00:22:27] <strcat> rusti: 2 + 2
[00:22:32] -rusti- timeout triggered!
[00:22:38] <jmgrosen> dbaupp: `abort`s, a llvm assertion fails
[00:22:51] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[00:22:53] <jmgrosen> https://gist.github.com/jmgrosen/40f9bae6674aad85cfd5
[00:25:39] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[00:25:39] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 147147e5e to 147971c46: 02http://git.io/N3iJvQ
[00:25:39] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[00:25:41] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[00:25:42] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/T7qJMQ
[00:25:42] <ghrust> 13rust/06auto 14f753550 15Alex Crichton: Fix compilation issues with libuv on OSX...
[00:25:42] <ghrust> 13rust/06auto 142fe2ed8 15bors: auto merge of #8832 : alexcrichton/rust/fix-libuv-build, r=pcwalton,catamorphism...
[00:25:42] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[00:26:40] *** Joins: mib_9uybip (mib_9uybip@FFC4F26.497EC1B8.5EFB9497.IP)
[00:27:27] *** Quits: jfbk (textual@moz-EEA9CFB3.nyc.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[00:27:56] <dbaupp> jmgrosen: cool!
[00:28:18] <jmgrosen> yay, compiler bugs :3
[00:28:25] <dbaupp> jmgrosen: does fn iter_things<'a>(&'a self) -> VecIterator<'a, &'self EmptyTrait> fix it?
[00:28:43] <tjc> brson: Reverting that change worked -- I filed https://github.com/mozilla/rust/issues/8833
[00:28:44] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Quit: pcwalton)
[00:28:51] <tjc> strcat, the above may also interest you ^
[00:29:11] <jmgrosen> dbaupp: nope
[00:29:19] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[00:29:19] *** ChanServ sets mode: +o pcwalton
[00:29:44] <dbaupp> jmgrosen: oh :( (in any case, I think not using 'self is the "correct" behaviour here)
[00:29:51] <strcat> tjc: strange, that implies we aren't outputting debug info correctly on OS X
[00:29:59] <tjc> strcat: Yeah, that's what brson said
[00:30:08] <strcat> gdb will fall back to frame pointers
[00:30:11] *** Quits: XyMa (user@4F5647EE.12FF1288.B4C97B2.IP) (Ping timeout)
[00:30:22] <tjc> so reverting your patch doesn't address the fundamental issue, I realize
[00:30:24] <Eridius> error: internal compiler error: encode_symbol: id not found 230917
[00:30:29] <jmgrosen> tjc: well that explains why i couldn't get debug traces yesterday >.<
[00:30:37] <tjc> jmgrosen: If you're on a Mac, then probably yes
[00:31:16] *** Joins: matt (Mibbit@moz-3AB1E206.nycmny.fios.verizon.net)
[00:31:23] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Quit: ChatZilla 0.9.90.1 [Firefox 23.0.1/20130814063812])
[00:31:29] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[00:31:42] <Eridius> hrm, 2 stack frames? That sounds awfully similar to lldb only getting 2 frames when I tried it a week or so ago
[00:31:56] <Eridius> err 2 weeks ago
[00:31:56] <strcat> yes because lldb doesn't fall back to obsolete debugging techniques.
[00:31:59] <Eridius> filed as https://github.com/mozilla/rust/issues/8543
[00:32:06] <olsonjeffery> In Soviet IRC, newlines escape YOU!
[00:32:08] <strcat> it expects proper call frame info
[00:32:12] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[00:32:15] <olsonjeffery> heh, a bit late, i know.
[00:32:33] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[00:32:34] * strcat shrugs
[00:32:45] <Eridius> anyone know what this is? error: internal compiler error: encode_symbol: id not found 230917. Looks similar to the old ICE's I'd get if I tried to compile a library that depends on another one that was compiled with an earlier version of rustc
[00:32:48] *** Joins: jfbk (textual@moz-EEA9CFB3.nyc.res.rr.com)
[00:32:49] <Eridius> but in this case I got it when I ran `make check`
[00:32:49] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[00:32:55] *** Quits: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net) (Quit: eholk)
[00:32:56] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[00:33:20] <Eridius> and now just getting it on `make`. sigh. All I did was modify libstd after doing a full make/make install
[00:33:35] * Eridius gives up and clean-builds. again.
[00:33:40] *** Quits: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: ChatZilla 0.9.90.1-rdmsoft [XULRunner 22.0/20130619132145])
[00:33:52] <strcat> uhhhhhh, how can ptrace not be permitted *as root*
[00:33:53] <Eridius> well hey, clean build didn't work either
[00:33:58] <strcat> great
[00:34:21] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[00:34:27] <strcat> root@thinktank i ~ # strace -p 14992
[00:34:29] <strcat> strace: attach: ptrace(PTRACE_ATTACH, ...): Operation not permitted
[00:34:31] <strcat> :s
[00:34:32] *** Quits: sonwows (Mibbit@119793D2.F91BEA9E.301BE678.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[00:34:51] *** Quits: lkuper (lkuper@moz-D862222C.dhcp-bl.indiana.edu) (Quit: Leaving)
[00:35:21] <Eridius> yeah ok, I can run `make` on master just fine, but I get this error with the snapshot compiler when trying to build with my relatively innocuous change. wtf
[00:35:35] <dbaupp> Eridius: post a diff somewhere?
[00:35:37] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[00:35:38] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 142fe2ed8 to 147971c46: 02http://git.io/N3iJvQ
[00:35:38] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[00:35:38] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[00:35:38] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/lU0S3w
[00:35:38] <ghrust> 13rust/06auto 14188a9dd 15Alex Crichton: Fix compilation issues with libuv on OSX...
[00:35:38] <ghrust> 13rust/06auto 1426e925a 15bors: auto merge of #8832 : alexcrichton/rust/fix-libuv-build, r=pcwalton...
[00:35:39] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[00:35:46] <tikue_> rusti: 1u
[00:35:51] -rusti- timeout triggered!
[00:35:54] <matt> @strcat on linux?
[00:35:58] <strcat> yes
[00:36:46] <Eridius> dbaupp: https://github.com/kballard/rust/commit/0cacec9727e2674f987ec8e3c3ca2a3703f8f70c
[00:38:21] <dbaupp> Eridius: https://github.com/kballard/rust/commit/0cacec9727e2674f987ec8e3c3ca2a3703f8f70c#L0R168 is an unfortunate consequence :(
[00:38:57] <Eridius> dbaupp: yeah unfortunately. This will be mitigated a bit once we get a type ascription operator
[00:39:06] <Eridius> because I could then just say `[] : &[&str]`
[00:39:08] <dbaupp> yup
[00:39:10] *** Quits: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net) (Quit: ozten)
[00:39:34] <jmgrosen> is that semi-planned?
[00:39:41] <Eridius> I know pcwalton has talked about it before
[00:39:47] <dbaupp> also, I wish StrSlice could just be default methods on Str :(
[00:40:28] <dbaupp> Eridius: I don't see anything obvious at all
[00:40:34] <brson> i'm a bit worried about the correctness of the scheduler and message passing. I keep seeing unexpected intermittent errors that I don't understand
[00:40:54] <Eridius> dbaupp: the only oddity I can think of is having a struct Foo<'self, Arg> and then referencing it as just Foo<Arg>, but I don't see why anything about that would have changed since the last snapshot
[00:41:04] *** Joins: Aszarsha_ (Aszarsha@moz-16BFBC53.rev.numericable.fr)
[00:41:22] <dbaupp> Eridius: maybe try leaving things out side of run.rs as ~str to see if that fixes it?
[00:41:29] <Eridius> also, damn, snapshot is apparently compiled without debug info
[00:41:45] <tikue_> brson: that's really scary
[00:41:46] <dbaupp> I don't think debug info works for rustc yet
[00:41:50] <tikue_> tell me it'll be alright!
[00:41:58] <Eridius> dbaupp: what, and have run.rs convert the &[Str] into a &[~str] for the time being?
[00:42:01] *** Parts: SingingBoyo (brandon@4DF3381A.51F4D838.4F048BDC.IP) (Leaving)
[00:42:22] *** Joins: SingingBoyo (brandon@4DF3381A.51F4D838.4F048BDC.IP)
[00:42:59] <Eridius> when are we going to snapshot again anyway? Maybe I should just wait for that
[00:43:12] <dbaupp> Eridius: oh, run.rs calls those ones.
[00:43:26] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[00:43:28] <Eridius> dbaupp: yeah, I only modified the rt things because run depends on it
[00:43:29] <dbaupp> Eridius: I meant convert as little as possible
[00:43:31] <tikue_> strcat: i have a treemap which has vectors as values, and this seems to be broken: tree_map.find_mut(&key).unwrap().push(foo)
[00:43:37] * dbaupp thought run.rs was the lowest level
[00:43:38] <tikue_> any idea why that isn't working?
[00:43:46] <Eridius> dbaupp: used to be. It was rewritten on top of libuv
[00:43:50] <dbaupp> tikue_: error message?
[00:43:53] <strcat> tikue_: broken in what way?
[00:43:58] <tikue_> dbaupp: no error 
[00:44:03] <tikue_> the vector is empty afterward
[00:44:52] <dbaupp> o_O
[00:45:23] <matt> i've written some hello world rust stuff and now i'd like to move on and write something a little more interesting. I want to do some stuff over the network, I'm having a hard time finding a place to start looking in the standard libraries, any pointers?
[00:46:05] <Eridius> matt: I believe network stuff is currently in std::rt::io::net, which is hidden from the documentation
[00:46:07] <jmgrosen> matt: https://github.com/mozilla/rust/blob/master/src/libstd/rt/io/net/tcp.rs#L413
[00:46:17] <Eridius> dbaupp: huh, if I revert the run.rs changes but leave all the rt/uv changes intact, it compiles
[00:46:33] <Eridius> matt: if you want to do HTTP stuff there's https://github.com/chris-morgan/rust-http
[00:46:43] <dbaupp> Eridius: weird
[00:46:43] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[00:46:45] <olsonjeffery> the nascent docs for rt::io::net is in the rustdoc_ng stuff iirc
[00:47:01] <olsonjeffery> matt: are you on the tip of mozilla/rust's master branch?
[00:47:12] <matt> olsonjeffery: yes
[00:47:14] <matt> Eridius: i want udp 
[00:47:27] <dbaupp> matt: http://seld.be/rustdoc/master/std/rt/io/net/index.html
[00:47:38] <dbaupp> http://seld.be/rustdoc/master/std/rt/io/net/udp/struct.UdpSocket.html
[00:47:49] <ecr> matt: std::rt::io::net has TCP and UDP implementations. there's some docs in std::rt::io::mod.rs that explains the current structure. WARNING! there ARE bugs. interfaces are likely to change in the future. good luck :)
[00:47:57] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[00:48:07] <ecr> oh, and if you happen to run across any bugs or have suggestions, please let us know
[00:48:13] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[00:48:15] <dbaupp> use std::rt::io::net::udp; let socket = udp::UdpSocket::bind(addr); ...
[00:48:25] <dbaupp> *let mut socket = ...
[00:48:29] *** Quits: bytewise (bytewise@moz-4A801D04.unitymediagroup.de) (Quit: Leaving)
[00:48:33] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[00:49:05] <matt> dbaupp,ecr, et al: thx, i'll see how it goes 
[00:49:41] <ecr> matt: you may actually be the first person to use the UDP stuff since I wrote it a month ago.
[00:49:43] <strcat> rusti: 2
[00:49:49] -rusti- timeout triggered!
[00:49:50] <strcat> rusti: 2
[00:49:55] -rusti- timeout triggered!
[00:50:07] *** Quits: heftig (heftig@moz-F7EAFED4.dip0.t-ipconnect.de) (Ping timeout)
[00:50:15] <dbaupp> strcat: I think the %? formatter for ints is broken ;P
[00:50:15] <strcat> whatever changed about process spawning made rusti not work anymore :s
[00:50:21] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[00:50:37] <strcat> dbaupp: no it gets stuck
[00:50:39] <strcat> in gcc
[00:50:45] * dbaupp was joking
[00:50:48] <strcat> heh
[00:51:01] <klutzy> maybe the equation is too hard to solve
[00:51:04] *** Quits: maik (maik___@moz-7EDF7261.dip0.t-ipconnect.de) (Ping timeout)
[00:51:06] <klutzy> :p
[00:51:10] <strcat> rusti: "foo"
[00:51:15] -rusti- timeout triggered!
[00:51:24] <klutzy> rusti: "timeout triggered!"
[00:51:29] -rusti- timeout triggered!
[00:51:31] <tikue_> i'll stop using rust if rusti doesn't work anymore
[00:51:32] <tikue_> :P
[00:52:07] <strcat> it works up until it spawns gcc
[00:52:39] <Eridius> grr, tweaking run.rs to using &[&str] instead of &[S] fixes the ICE
[00:52:44] <Eridius> but that defeats the whole purpose
[00:52:54] <tikue_> brson: those problems seem pretty nefarious. how will you go about confirming that everything is correct?
[00:53:09] <sfackler> ecr: is anyone working on dns lookups? i might take a go at it if not
[00:53:13] <strcat> very frustrating problem this is
[00:53:17] *** Quits: carllerche (carllerche@1E2EB9E3.186539A3.965084DF.IP) (Quit: carllerche)
[00:54:02] <Eridius> ok what the hell. dbaupp, merely reverting process_status() to using &[&str] fixes the error!
[00:54:21] <strcat> rusti: 2
[00:54:26] -rusti- timeout triggered!
[00:54:39] <ecr> sfackler: I was at one point, but then I went out of town for a few days. You'll want to look at the {get/free}addrinfo functions in libuv
[00:54:52] <brson> tikue_: i don't know yet :( i'll probably just think about it really hard
[00:55:01] <strcat> rusti: 2
[00:55:01] -rusti- /usr/local/bin/irc.sh: 16: exec: ./out: Permission denied
[00:55:01] -rusti- application terminated with error code 126
[00:55:14] <strcat> rusti: 2
[00:55:15] -rusti- /usr/local/bin/irc.sh: 16: exec: ./out: Permission denied
[00:55:15] -rusti- application terminated with error code 126
[00:55:23] <strcat> wat
[00:55:37] <jmgrosen> o_O
[00:55:41] <StarLight> rusti: "wtf"
[00:55:42] -rusti- /usr/local/bin/irc.sh: 16: exec: ./out: Permission denied
[00:55:42] -rusti- application terminated with error code 126
[00:55:45] <ecr> strcat: 2 is just not permissioned enough clearly
[00:55:56] <Eridius> maybe it's missing o+x or something?
[00:55:57] <ecr> better try 3
[00:55:57] <strcat> anyway I give up
[00:56:03] <tikue_> strcat: NO
[00:56:04] <tikue_> you can't
[00:56:05] <strcat> Eridius: no I just killed gcc
[00:56:11] <strcat> as soon as rustc spawned it
[00:56:18] <Eridius> heh
[00:56:20] <strcat> rustc doesn't check for an error properly so it has no idea
[00:56:34] <Eridius> ah
[00:58:33] <strcat> rusti: 2
[00:58:33] -rusti- playpen: non-existent syscall: arch_specific_syscall
[00:58:36] <strcat> heh
[00:58:47] <strcat> rusti: 2
[00:58:48] -rusti- playpen: non-existent syscall: llseek
[00:58:55] <strcat> rusti: 2
[00:58:55] -rusti- playpen: non-existent syscall: oldwait4
[00:59:00] <strcat> rusti: 2
[00:59:01] -rusti- playpen: non-existent syscall: syscalls
[00:59:09] <strcat> well that didn't work
[00:59:13] <strcat> rusti: 2
[00:59:13] -rusti- application terminated abnormally with signal 31 (Bad system call)
[00:59:54] *** Joins: mib_9uyb_ (mib_9uybip@FFC4F26.497EC1B8.5EFB9497.IP)
[00:59:54] *** Quits: mib_9uybip (mib_9uybip@FFC4F26.497EC1B8.5EFB9497.IP) (Connection reset by peer)
[01:00:05] <dbaupp> Eridius: weird!
[01:00:13] <strcat> rusti: 2
[01:00:18] -rusti- timeout triggered!
[01:01:08] *** Joins: XyMa (user@4F5647EE.12FF1288.B4C97B2.IP)
[01:01:50] <strcat> rusti: 2
[01:01:55] -rusti- timeout triggered!
[01:02:06] <strcat> on the positive side it's not a disallowed syscall
[01:02:27] <dbaupp> what else *could* it be?
[01:02:40] * strcat shrugs
[01:02:43] <dbaupp> aren't syscalls and filesystem the only things you're gating?
[01:02:48] <strcat> no
[01:02:54] <strcat> it uses namespaces
[01:02:54] <tikue_> strcat: i think treemap.mutate_values is brokekn
[01:02:59] <tikue_> unless i completely misunderstand how it works
[01:03:04] <strcat> tikue_: dunno, I didn't write it
[01:03:25] <tikue_> do tree_map.mutate_values |key, val| { printfln!((key, val)); true }; 
[01:03:28] *** Quits: ofeldt- (ofeldt@moz-5DD5789D.dip0.t-ipconnect.de) (Ping timeout)
[01:03:28] <tikue_> prints nothing
[01:04:15] <strcat> it has no tests
[01:04:21] <tikue_> ?
[01:04:34] <bjz> lbergstrom: https://github.com/bjz/glfw-rs/pull/29#issuecomment-23460478
[01:04:46] <strcat> should just rm it
[01:04:53] <strcat> I think it implements the old iteration protocol wrong
[01:04:58] <strcat>       None => return false
[01:05:11] <strcat> it says it was broken out of if a child is None
[01:05:15] <strcat> so then it stops
[01:05:30] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Ping timeout)
[01:05:47] <lbergstrom> bjz: thanks, on it :-)
[01:05:50] <tikue_> i just don't understand :\
[01:06:03] <strcat> rusti: 2
[01:06:03] <dbaupp> tikue_: summary: it
[01:06:07] <dbaupp> 's broked
[01:06:08] -rusti- timeout triggered!
[01:06:11] <tikue_> oh
[01:06:20] *** Quits: mib_9uyb_ (mib_9uybip@FFC4F26.497EC1B8.5EFB9497.IP) (Ping timeout)
[01:06:22] <tikue_> i see
[01:06:42] <tikue_> really needs a mut_iter() then :)
[01:06:45] <strcat> rusti: 2
[01:06:50] -rusti- timeout triggered!
[01:06:53] *** Joins: mib_9uybip (mib_9uybip@FFC4F26.497EC1B8.5EFB9497.IP)
[01:07:00] <dbaupp> tikue_: yeah
[01:07:09] * dbaupp nominates tikue_ to implement it
[01:07:10] <strcat> rusti: 2
[01:07:15] -rusti- timeout triggered!
[01:07:26] <strcat> not from namespaces
[01:07:26] <mihneadb> one does not simply compute the value of 2
[01:07:51] <strcat> rusti: 2
[01:07:56] -rusti- timeout triggered!
[01:07:57] <strcat> not from devices
[01:08:09] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[01:08:13] <Eridius> if I have a docstring for a function that's implemented separately for different cfgs, do I need to replicate the docstring for each one?
[01:08:19] <mihneadb> rusti: 1
[01:08:23] <dbaupp> Eridius: yes
[01:08:24] -rusti- timeout triggered!
[01:08:25] <Eridius> bah
[01:08:37] <strcat> can't explain why it doesn't work
[01:08:49] <dbaupp> Eridius: also, https://github.com/mozilla/rust/issues/8134; you're not using static's inside a fn anywhere are you?
[01:08:54] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Quit: Leaving)
[01:08:56] <Eridius> screw it, #[allow(missing_doc)], this is a stage0-only func. I assume the docs are generated from the latest stage?
[01:09:12] <Eridius> dbaupp: nope. I looked at the existing issues for this message and none seem to apply
[01:09:13] <dbaupp> Eridius: oh! *maybe* it's because internal static only fail with generic functions
[01:09:36] <dbaupp> so if there's one in some function that you're making generic then it'll suddenly start to fail
[01:09:38] <Eridius> I'm just giving up and cfg(stage0)'ing to accept &[&str]
[01:10:15] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[01:10:15] <dbaupp> hm, there doesn't seem to be a `static` in the whole file.
[01:10:17] <Eridius> dbaupp: this is the entirety of the func: https://gist.github.com/kballard/d7a42a33b17596066575
[01:10:50] <strcat> rusti: 2
[01:10:55] -rusti- timeout triggered!
[01:11:11] *** Joins: blaphmat (Mibbit@moz-1E63D6FD.eb.protectedgroup.com)
[01:11:18] *** Quits: blaphmat (Mibbit@moz-1E63D6FD.eb.protectedgroup.com) (User has been banned from Mozilla (no spamming here))
[01:11:37] <dbaupp> Eridius: :(
[01:11:45] <dbaupp> no idea
[01:11:59] <strcat> oh well no more rusti I guess :(
[01:12:13] <Eridius> strcat: quitter
[01:12:32] *** Joins: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net)
[01:12:49] <tikue_> strcat: just roll it back to a version of rust that is friendlier
[01:14:11] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[01:14:31] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: brb)
[01:14:39] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[01:14:41] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[01:15:25] *** Quits: tikue_ (tkuehn@moz-BE1EFE7F.wv.cc.cmu.edu) (Quit: tikue_)
[01:15:25] *** Joins: DAddYE_ (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[01:15:25] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Connection reset by peer)
[01:15:26] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[01:15:53] *** Joins: Jesin (Jessin_@moz-5E8F07BF.cc.lehigh.edu)
[01:16:01] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[01:16:04] <strcat> rusti: 2
[01:16:05] -rusti- 2
[01:16:07] <strcat> rolled back
[01:16:07] <Eridius> \o/
[01:16:10] <strcat> to yesterday's rust
[01:16:12] <strcat> not fixed
[01:16:44] <dbaupp> Eridius: oh, does it not ICE after stage0?
[01:17:05] *** Quits: DAddYE_ (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[01:17:07] <Eridius> dbaupp: don't think so. building stage2 libstd worked for me
[01:17:14] *** Quits: ecr (Thunderbir@moz-BBE3ABD.mv.mozilla.com) (Quit: ecr)
[01:17:14] <Eridius> well fuck. stage1 ICE'd anyway
[01:17:21] <dbaupp> :(
[01:17:24] <adridu59> is there a .charAt() equivalent in Rust?
[01:17:43] <dbaupp> adridu59: .char_at()
[01:17:50] <adridu59> :D
[01:17:52] *** Quits: XyMa (user@4F5647EE.12FF1288.B4C97B2.IP) (Ping timeout)
[01:17:55] <dbaupp> rusti: "Ã¶Ã¤Ã¥".char_at(2)
[01:17:55] -rusti- '\xe4'
[01:18:00] <dbaupp> rusti: "Ã¶Ã¤Ã¥".char_at(1)
[01:18:01] -rusti- task <unnamed> failed at 'assertion failed: (w != 0)', /build/rust-git/src/rust/src/libstd/str.rs:1981
[01:18:01] -rusti- application terminated with error code 101
[01:18:11] <dbaupp> what a bad error message! :O
[01:18:17] <adridu59> you just found a bug?
[01:18:24] <dbaupp> adridu59: note that it uses byte indexes, not char_indexes
[01:18:28] <dbaupp> *indices
[01:18:29] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[01:18:58] <dbaupp> adridu59: no; that should fail (because the 1th byte is in the middle of Ã¶), just the error message is very bad.
[01:19:19] <adridu59> you should open up an issue for it then ;)
[01:19:29] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[01:19:44] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[01:19:47] <adridu59> a standard ascii character will just take up one byte right?
[01:20:06] <engla> you can index by chars via the iterator on strings
[01:20:08] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[01:20:12] <dbaupp> adridu59: yes
[01:20:16] <adridu59> ok!
[01:20:19] <dbaupp> but as engla says, you should use the iterator
[01:20:26] <dbaupp> (if possible)
[01:21:09] *** Joins: XyMa (user@4F5647EE.12FF1288.B4C97B2.IP)
[01:21:24] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[01:21:59] <engla> there are hardly any methods at all that use "char indices" in str.rs, and that's good. If there would be methods of each byte and char index kind it would be confusing
[01:23:05] <engla> rusti: "Î±Î²Î»".slice_chars(1,2)
[01:23:06] -rusti- "\u03b2"
[01:23:43] *** Joins: sanxiyn (tinuviel@AE8B10D7.A92E374.57C4C441.IP)
[01:23:55] <dbaupp> there used to be a method that used byte index for the first arg and char length for the second
[01:23:58] <adridu59> let's say I want to extract the first two letters of a string then first two starting from the second char and so on... am I better off using a string iterator?
[01:24:04] <dbaupp> *that* was confusing
[01:25:01] <adridu59> my string is "abcde"
[01:25:17] <adridu59> I want to extract "a" and then "b"
[01:25:21] <dbaupp> rusti: let s = "abcde"; for (x,y) in s.iter().zip(s.iter().skip(1)) { println!("({} {}) ", x, y) }
[01:25:22] -rusti- (a b) 
[01:25:22] -rusti- (b c) 
[01:25:22] -rusti- (c d) 
[01:25:22] -rusti- (d e) 
[01:25:22] -rusti- ()
[01:25:27] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[01:25:28] <adridu59> then on the next iter "b" and "c"
[01:25:39] <adridu59> but individually
[01:26:04] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[01:26:36] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[01:27:26] <adridu59> dbaupp: is it possible with 5 letters without complex code?
[01:27:31] <dbaupp> adridu59: nope
[01:27:38] <dbaupp> (well, unlikely)
[01:27:51] <adridu59> then I'll stick to char_at() I guess
[01:28:00] <dbaupp> you could convert to ~[char] and use .window_iter(5)
[01:28:23] <etw> m
[01:28:26] <engla> rusti: let s = "abcde"; let mut it = s.iter(); it.next(); s.iter().zip(it).flat_map(|(a,b)| Some(a).move_iter().chain(Some(b).move_iter())).to_owned_vec()
[01:28:27] -rusti- ~['a', 'b', 'b', 'c', 'c', 'd', 'd', 'e']
[01:28:43] <adridu59> is there a command to start iterating at a given position?
[01:28:58] <dbaupp> adridu59: .slice_from() to get a shorter string
[01:29:12] *** Quits: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[01:29:50] <dbaupp> rusti: let s = "abcde"; let cs = s.iter().collect::<~[char]>(); for window in cs.window_iter(3) { print!("{} ", window) }
[01:29:52] -rusti- pastebinned 8 lines of output: http://ix.io/7EM
[01:29:59] * strcat doesn't understand what changed in rustc
[01:30:03] <dbaupp> rusti: let s = "abcde"; let cs = s.iter().collect::<~[char]>(); for window in cs.window_iter(3) { print!("{:?} ", window) }
[01:30:05] -rusti- &['a', 'b', 'c'] &['b', 'c', 'd'] &['c', 'd', 'e'] ()
[01:30:07] <strcat> must be the libuv update though
[01:31:05] *** Quits: sanxiyn (tinuviel@AE8B10D7.A92E374.57C4C441.IP) (Ping timeout)
[01:31:33] <adridu59> let s = 12345; let cs = s.iter().collect::<~[int]>(); for window in cs.window_iter(3) { print!("{:?} ", window) }
[01:31:40] <adridu59> rusti: let s = 12345; let cs = s.iter().collect::<~[int]>(); for window in cs.window_iter(3) { print!("{:?} ", window) }
[01:31:41] -rusti- <anon>:5:33: 5:42 error: type `<VI0>` does not implement any method in scope named `iter`
[01:31:41] -rusti- <anon>:5          let s = 12345; let cs = s.iter().collect::<~[int]>(); for window in cs.window_iter(3) { print!("{:?} ", window) }
[01:31:41] -rusti-                                           ^~~~~~~~~
[01:31:41] -rusti- error: aborting due to previous error
[01:31:42] -rusti- application terminated with error code 101
[01:31:47] <adridu59> right
[01:31:54] <dbaupp> rusti: let s = "12345"; let cs = s.iter().collect::<~[int]>(); for window in cs.window_iter(3) { print!("{:?} ", window) }
[01:32:02] -rusti- pastebinned 14 lines of output: http://ix.io/7EN
[01:32:11] <dbaupp> oh
[01:32:19] *** Joins: sanxiyn (tinuviel@AE8B10D7.A92E374.57C4C441.IP)
[01:32:31] <dbaupp> rusti: let s = [1,2,3,4,5]; for window in s.window_iter(3) { print!("{:?} ", window) }
[01:32:32] -rusti- &[1, 2, 3] &[2, 3, 4] &[3, 4, 5] ()
[01:32:50] <adridu59> let's say I have "12345" can I do 1*2*3*4*5 easily?
[01:33:03] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[01:33:03] *** ChanServ sets mode: +o tjc
[01:33:16] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: Places to go, people to annoy)
[01:33:34] <Eridius> adridu59: huh?
[01:33:38] *** Quits: mihneadb (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net) (Ping timeout)
[01:33:39] <Eridius> oh you mean multiply them all?
[01:33:51] *** Joins: mihneadb (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net)
[01:34:18] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[01:34:19] *** ChanServ sets mode: +o tjc
[01:34:25] <Eridius> rusti: "12345".iter().map(|x| (x - '0') as int).product()
[01:34:26] -rusti- <anon>:5:9: 6:5 error: type `std::iterator::Map<,char,int,std::str::CharIterator<>>` does not implement any method in scope named `product`
[01:34:26] -rusti- <anon>:5          "12345".iter().map(|x| (x - '0') as int).product()
[01:34:26] -rusti- <anon>:6     };
[01:34:26] -rusti- error: aborting due to previous error
[01:34:26] -rusti- application terminated with error code 101
[01:34:31] *** Joins: Ralith (ralith@114DA04D.CD83ED0A.BCDF04A6.IP)
[01:34:36] <Eridius> rusti: use std::iterator::MultiplicativeIterator; "12345".iter().map(|x| (x - '0') as int).product()
[01:34:37] -rusti- 120
[01:34:44] <engla> oh it's even predefined
[01:34:46] *** Joins: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net)
[01:34:50] <adridu59> Eridius: yes :)
[01:35:52] <adridu59> why the (x - '0') part?
[01:36:00] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[01:36:03] *** Quits: matt (Mibbit@moz-3AB1E206.nycmny.fios.verizon.net) (Quit: http://www.mibbit.com ajax IRC Client)
[01:36:19] <adridu59> rusti: use std::iterator::MultiplicativeIterator; "12345".iter().map(|x| x as int).product()
[01:36:20] -rusti- 344362200
[01:36:29] * strcat thinks max, min, sum, product should probably be removed though
[01:36:31] <dbaupp> rusti: (('0' -'0') as uint, ('2' -'0') as uint, ('9' -'0') as uint)
[01:36:32] *** Joins: z0w0 (corrz@C3BC732A.9254B1A4.F22F0031.IP)
[01:36:32] -rusti- (0, 2, 9)
[01:36:36] <strcat> since they don't work when you have refs
[01:36:43] <erickt> aatch: ping
[01:36:44] * strcat shrugs
[01:36:47] <strcat> fold(1, |a, b| a * b) isn't that bad
[01:36:49] <mcpherrin> adridu59: converting a character to a number by taking its offset from '0': since their numeric values in ascii are consecutive and increasing
[01:36:50] <dbaupp> rusti: ('0' as uint, '2' as uint, '9' as uint)
[01:36:50] <aatch> erickt, pong
[01:36:50] -rusti- (48, 50, 57)
[01:37:01] <adridu59> I see it now
[01:37:08] <erickt> aatch: hey there! I saw you asked for a reference to something last night, but I'm not sure what yet :)
[01:37:13] <adridu59> in C I used to do myChar - 48
[01:37:27] <erickt> aatch: regarding llvm-rs. My kaleidoscope port?
[01:37:28] <mcpherrin> adridu59: Right, the same thing.  You could use '0' in C too.
[01:37:33] <Eridius> adridu59: in C I'd have done `myChar - '0'` :P
[01:37:42] <dbaupp> rusti: '1' * '2' // yay rust
[01:37:43] -rusti- '\u0992'
[01:37:46] <adridu59> mcpherrin: yea it's better to do so I know
[01:37:56] <Eridius> oh what the hell. Getting the ICE in stage2 now! But I built this code with `make check-stage2-std` no problem!
[01:38:09] *** Quits: lbergstrom (Adium@moz-5D8E4B14.lightspeed.cicril.sbcglobal.net) (Quit: Leaving.)
[01:38:12] <adridu59> just never thinked about it :)
[01:38:13] <aatch> erickt, you mentioned kaledioscope, I was wondering if you had something I could look at, get an idea of what might need to change.
[01:38:33] <adridu59> what does ICE mean in this contect?
[01:38:36] <adridu59> context
[01:38:50] <dbaupp> internal compiler error
[01:38:50] <mcpherrin> Using - '0' works if you're on an EBCDIC machine too!  ;)
[01:39:32] <dbaupp> adridu59: I.e. a bug where someone's basically just called `fail!` without emitting a proper error message, or handling the case properly
[01:39:33] <erickt> aatch: not yet, I just have chapter 2 done, which doesn't incorporate anything from llvm yet
[01:39:42] <erickt> aatch: chapter 2 of http://llvm.org/docs/tutorial/index.html
[01:39:50] <aatch> erickt, ah, ok then.
[01:40:07] *** Joins: MauricioC (mauricioc@moz-2CFCD404.impa.br)
[01:40:35] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[01:40:35] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/lU0S3w
[01:40:35] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[01:40:41] <adridu59> I see
[01:41:36] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[01:42:16] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[01:42:19] *** Joins: maik (maik___@moz-7EDF7261.dip0.t-ipconnect.de)
[01:43:20] *** Joins: dew (Instantbir@moz-D2FA52B6.static.stls.mo.charter.com)
[01:43:23] <adridu59> how can I do if I want to iterate through "abcde" but just 3 times
[01:43:25] <adridu59> ?
[01:43:26] *** Quits: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP) (Quit: Lost terminal)
[01:43:35] <Eridius> what do you mean, just 3 times?
[01:43:42] *** Parts: sanxiyn (tinuviel@AE8B10D7.A92E374.57C4C441.IP) (Bye)
[01:43:52] <aatch> adridu59, so just "abc"?
[01:43:58] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[01:44:07] <adridu59> yea
[01:44:16] <Eridius> adridu59: either slice it first, or use .take(3) on the iterator
[01:44:25] <Eridius> rusti: "abcde".slice(0, 3).iter().to_owned_vec()
[01:44:26] -rusti- ~['a', 'b', 'c']
[01:44:32] <Eridius> rusti: "abcde".iter().take(3).to_owned_vec()
[01:44:32] -rusti- ~['a', 'b', 'c']
[01:44:55] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[01:45:36] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[01:45:36] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/z6Qbsw
[01:45:36] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[01:45:38] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[01:45:38] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/hw31og
[01:45:38] <ghrust> 13rust/06auto 14546e2ae 15Vadim Chugunov: Added libstd and libextra unit tests to check-fast target.
[01:45:38] <ghrust> 13rust/06auto 1499345d8 15Vadim Chugunov: Fixed MemoryMap on Windows.
[01:45:38] <ghrust> 13rust/06auto 146828428 15Vadim Chugunov: Disabled failing parts of abs_sub() and frexp() unit tests on Windows.
[01:45:40] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[01:46:12] *** Quits: dbaupp (Thunderbir@moz-EAA09AEF.lns20.syd7.internode.on.net) (Ping timeout)
[01:46:30] *** Quits: riley (riley@8BA43816.9AA11D69.65DDFA89.IP) (Client exited)
[01:46:52] <adridu59> rusti: "abcdefghijk".iter().take(3).to_owned_vec().map(|x| (x - '0') as int)
[01:46:53] -rusti- <anon>:5:62: 5:69 error: binary operation - cannot be applied to type `&char`
[01:46:53] -rusti- <anon>:5          "abcdefghijk".iter().take(3).to_owned_vec().map(|x| (x - '0') as int)
[01:46:53] -rusti-                                                                        ^~~~~~~
[01:46:53] -rusti- error: aborting due to previous error
[01:46:55] -rusti- application terminated with error code 101
[01:47:14] <adridu59> rusti: "abcdefghijk".slice_from(1)
[01:47:15] -rusti- "bcdefghijk"
[01:47:52] *** Quits: SingingBoyo (brandon@4DF3381A.51F4D838.4F048BDC.IP) (Input/output error)
[01:47:54] <adridu59> "abcdefghijk".iter().take(3).map(|x| (x - '0') as int)
[01:48:02] <adridu59> rusti: "abcdefghijk".iter().take(3).map(|x| (x - '0') as int)
[01:48:03] -rusti- {iter: {iter: {string: "abcdefghijk"}, n: 3}, f: }
[01:49:12] <adridu59> rusti: "abcdefghijk".iter().take(3).map(|x| (x - '0') as int).product
[01:49:17] -rusti- pastebinned 5 lines of output: http://ix.io/7EQ
[01:49:30] <adridu59> hmm
[01:49:46] <adridu59> rusti: "1234567890".iter().take(3).map(|x| (x - '0') as int).product
[01:49:48] -rusti- pastebinned 5 lines of output: http://ix.io/7ER
[01:50:11] <z0w0> rusti: "abcdefghijk".iter().take(3).to_owned_vec().map(|&x| (x - '0') as int)
[01:50:12] -rusti- ~[49, 50, 51]
[01:50:16] <adridu59>  "0123456789".iter().take(3).to_owned_vec().map(|x| (x - '0') as int)
[01:50:25] <adridu59> rusti: "0123456789".iter().take(3).to_owned_vec().map(|x| (x - '0') as int)
[01:50:26] -rusti- <anon>:5:61: 5:68 error: binary operation - cannot be applied to type `&char`
[01:50:26] -rusti- <anon>:5          "0123456789".iter().take(3).to_owned_vec().map(|x| (x - '0') as int)
[01:50:26] -rusti-                                                                       ^~~~~~~
[01:50:26] -rusti- error: aborting due to previous error
[01:50:27] -rusti- application terminated with error code 101
[01:50:29] <adridu59> ok
[01:50:32] <z0w0> the -  didn't work because it was a borrowed pointer, not the value
[01:50:33] <adridu59> thanks z0w0
[01:50:37] <Eridius> I didn't realize we still had map() on vectors
[01:50:45] <Eridius> adridu59: you typically want to map the iterator, not the vector
[01:51:34] <adridu59> rusti: "1234567890".iter().take(3).map(|&x| (x - '0') as int).to_owned_vec()
[01:51:35] -rusti- <anon>:5:42: 5:44 error: mismatched types: expected `char` but found an &-pointer pattern
[01:51:35] -rusti- <anon>:5          "1234567890".iter().take(3).map(|&x| (x - '0') as int).to_owned_vec()
[01:51:35] -rusti-                                                    ^~
[01:51:36] -rusti- error: aborting due to previous error
[01:51:36] -rusti- application terminated with error code 101
[01:51:41] <adridu59> rusti: "1234567890".iter().take(3).map(|x| (x - '0') as int).to_owned_vec()
[01:51:42] -rusti- ~[1, 2, 3]
[01:51:49] <adridu59> rusti: "1234567890".iter().take(3).map(|x| (x - '0') as int).to_owned_vec().product
[01:51:50] -rusti- <anon>:5:9: 5:85 error: attempted access of field `product` on type `~[int]`, but no field with that name was found
[01:51:50] -rusti- <anon>:5          "1234567890".iter().take(3).map(|x| (x - '0') as int).to_owned_vec().product
[01:51:50] -rusti-                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[01:51:50] -rusti- error: aborting due to previous error
[01:51:52] -rusti- application terminated with error code 101
[01:52:13] <adridu59> rusti: "1234567890".iter().take(3).map(|x| (x - '0') as int).product
[01:52:17] <Eridius> adridu59: map on a [char] vec gives you &char. map on a str's CharIterator gives you char. this is why map on the iterator takes |x| and map on the vec takes |&x|
[01:52:25] -rusti- pastebinned 5 lines of output: http://ix.io/7ER
[01:52:33] <Eridius> adridu59: to use .product() you need to `use std::iterator::MultiplicativeIterator`. it's not in the prelude
[01:52:37] *** Joins: recrack (ymin@5AB4884B.FCC4549.14D5B978.IP)
[01:52:55] <adridu59> thanks for the info!
[01:53:04] <engla> or write it with .fold()
[01:53:12] <Eridius> engla: sure, or that
[01:53:33] <adridu59> rusti: "1234567890".iter().take(3).map(|x| (x - '0') as int).product()
[01:53:35] -rusti- pastebinned 5 lines of output: http://ix.io/7ES
[01:53:50] <adridu59> rusti: use std::iterator::MultiplicativeIterator; "1234567890".iter().take(3).map(|x| (x - '0') as int).product()
[01:53:51] -rusti- 6
[01:54:08] <adridu59> rusti: use std::iterator::MultiplicativeIterator; 3 * "1234567890".iter().take(3).map(|x| (x - '0') as int).product()
[01:54:09] -rusti- 18
[01:54:29] <adridu59> rusti: "123".type()
[01:54:30] <Eridius> wow the run-pass tests run a lot of simultaneous rustc's
[01:54:30] -rusti- <anon>:5:9: 6:5 error: type `&'static str` does not implement any method in scope named `type`
[01:54:30] -rusti- <anon>:5          "123".type()
[01:54:30] -rusti- <anon>:6     };
[01:54:30] -rusti- error: aborting due to previous error
[01:54:30] -rusti- application terminated with error code 101
[01:54:39] <adridu59> rusti: "123".typeof()
[01:54:40] -rusti- <anon>:5:9: 6:5 error: type `&'static str` does not implement any method in scope named `typeof`
[01:54:40] -rusti- <anon>:5          "123".typeof()
[01:54:40] -rusti- <anon>:6     };
[01:54:40] -rusti- error: aborting due to previous error
[01:54:41] -rusti- application terminated with error code 101
[01:54:55] <Eridius> my 1-min load average was over 30, on an 8-core machine
[01:55:42] <adridu59> rusti: use std::iterator::MultiplicativeIterator; let mut tmp = 3; tmp = tmp * "1234567890".iter().take(3).map(|x| (x - '0') as int).product()
[01:55:47] -rusti- pastebinned 4 lines of output: http://ix.io/7ET
[01:56:01] <adridu59> rusti: use std::iterator::MultiplicativeIterator; let mut tmp = 3; tmp * "1234567890".iter().take(3).map(|x| (x - '0') as int).product()
[01:56:02] -rusti- <anon>:5:60: 5:63 warning: variable does not need to be mutable [-W unused-mut (default)]
[01:56:02] -rusti- <anon>:5          use std::iterator::MultiplicativeIterator; let mut tmp = 3; tmp * "1234567890".iter().take(3).map(|x| (x - '0') as int).product()
[01:56:03] -rusti-                                                                      ^~~
[01:56:03] -rusti- 18
[01:56:20] <adridu59> rusti: use std::iterator::MultiplicativeIterator; let tmp = 3; tmp * "1234567890".iter().take(3).map(|x| (x - '0') as int).product()
[01:56:21] -rusti- 18
[01:56:39] <adridu59> on my PC I get a "attempted to take value of method `product` on type `std::iterator::Map<,char,int,std::iterator::Take<std::str::CharIterator<>>>` (try writing an anonymous function)"
[01:56:59] <Eridius> adridu59: you probably forgot the () on .product
[01:57:11] <adridu59> riiight
[01:57:27] <adridu59> I should probably got o sleep, it's around 4AM here
[01:57:50] <Eridius> rusti: "1234567890".iter().take(30.map(|x| (x - '0') as int).fold(3, |a,b| a*b)
[01:57:50] -rusti- <anon>:6:4: 6:5 error: incorrect close delimiter: `}`
[01:57:50] -rusti- <anon>:6     };
[01:57:50] -rusti-              ^
[01:57:50] -rusti- application terminated with error code 101
[01:58:12] <Eridius> rusti: "1234567890".iter().take(3).map(|x| (x - '0') as int).fold(3, |a,b| a*b)
[01:58:12] -rusti- 18
[01:58:37] <Eridius> adridu59: .product() is the same as .fold(1, |a,b| a*b). If you want 3*product you can just use .fold(3, |a,b|a*b)
[01:59:09] *** Quits: mihneadb (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net) (Input/output error)
[01:59:42] <adridu59> you know what, I'm gonna cleanup an unused variable
[02:00:16] <adridu59> all those iterators and stuffs is pretty new to new, I've always done the basic programming things in C and such
[02:00:25] <adridu59> new to me*
[02:00:36] <Eridius> adridu59: once you grasp the functional approach (which is what these iterators are), you'll start thinking that way about everything ;)
[02:00:41] <Eridius> Haskell is great for making you think that way
[02:01:01] <Eridius> since in Haskell the humble list is also an external iterator (by virtue of being a singly-linked list coupled with lazy evaluation)
[02:01:14] *** Joins: cmr_ (Mibbit@1D1B0329.99816762.7923FEFE.IP)
[02:01:29] <cmr_> aatch: ping
[02:01:36] <aatch> cmr_, pong
[02:02:20] <cmr_> aatch: going to be working a bit with greasebench for the new new bencher collecting, so probably going to be PRs
[02:02:22] <cmr_> just a headsup
[02:02:34] *** Quits: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net) (Quit: jorendorff)
[02:02:39] <aatch> cmr_, awesome.
[02:02:39] <adridu59> Eridius: this must be my first forray into functional languages, but are they less efficient than typical C code? I mean they are higher-level abstractions
[02:02:47] <Eridius> adridu59: generally no
[02:02:50] <cmr_> adridu59: in Rust, not at all.
[02:02:59] <Eridius> adridu59: for example, external iterators in rust get inlined and removed by LLVM and turned into a nice tight loop
[02:03:04] <cmr_> (I wouldn't really categorize rust as functional, though)
[02:03:08] <Eridius> adridu59: Haskell also is great for optimizing
[02:03:28] <adridu59> I see
[02:03:34] <Eridius> cmr_: rust is not functional in general, but iterator adaptors is a rather functional approach
[02:04:07] <cmr_> adridu59: part of the benefit of working at the higher levels of abstraction is more leeway for optimization
[02:04:20] <Eridius> adridu59: heck, Haskell has something called deforestization, which is a really cool optimization. If you have a function that consumes a list and returns another list, and you call that from another function that consumes the resulting list, it can actually completely optimize away the intermediate list (and this works for multiple nested calls)
[02:04:35] <cmr_> GHC is pretty insane
[02:04:49] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Quit: pcwalton)
[02:05:19] <cmr_> strcat: ping
[02:05:29] <strcat> cmr_: pong
[02:05:45] *** brson sets mode: +mck jack
[02:05:50] <brson> woah
[02:06:12] <brson> what did I just do and how do I undo it?
[02:06:30] *** btipling is now known as minusm
[02:06:33] *** minusm is now known as btipling
[02:06:38] *** acrichto_ is now known as acrichto
[02:06:41] *** Quits: Guest (textual@34641662.FB4DE631.66C78B76.IP) (Ping timeout)
[02:06:44] *** Quits: RMF (RMF@A3A10308.EB26598F.8D19547B.IP) (Ping timeout)
[02:07:16] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[02:07:21] *** brson sets mode: -m 
[02:07:24] <Eridius> wee
[02:07:25] <aatch> brson, I have no idea, but it is amusing.
[02:07:27] <btipling> heh
[02:07:28] <cmr_> strcat: what's the story with rust dbus/cgroup/machined?
[02:07:30] <brson> sorry :)
[02:07:33] <btipling> so you might want -k
[02:07:36] <btipling> because you added a key
[02:07:40] <gandi> /mode #rust -k
[02:07:49] <Eridius> also did we have +c before?
[02:07:53] *** Quits: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net) (Quit: eatkinson)
[02:07:54] <strcat> I don't think so
[02:07:57] <gandi> nope
[02:08:01] *** brson sets mode: -k jack
[02:08:05] <Eridius>  /mode #rust -kc then
[02:08:09] <strcat> not sure what we had before
[02:08:11] <strcat> heh
[02:08:14] *** brson sets mode: -c 
[02:08:17] <gandi> and maybe -m
[02:08:18] <brson> what's +c?
[02:08:18] <Eridius> yay
[02:08:23] <strcat> brson: strips color codes
[02:08:29] <strcat> ofc I think these things vary by server
[02:08:38] <Eridius> I think +c is 1pretty standard
[02:08:40] <strcat> but +m is moderated (only voiced people can talk) and +c strips color codes
[02:08:45] <Eridius> well I guess black was a bad color to pick
[02:08:57] <strcat> there are some *really* silly help channels where they voice people one at a time
[02:09:04] <strcat> you wait in line
[02:09:29] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[02:09:36] <adridu59> foo = if bar > foo { bar } <-- is there a way to not repeat bar? I guess there's none
[02:09:56] <cmr_> adridu59: foo = max(foo, bar)
[02:10:03] <cmr_> from... std::num I think
[02:10:06] <cmr_> might not be in the prelude
[02:10:08] <strcat> std::cmp
[02:10:13] <cmr_> ah
[02:10:33] <aatch> strcat, so like somebody thought "How can we emulate the worst parts of real-life helpdesks?"
[02:10:50] <strcat> aatch: yep, I forget which channels do it but there are some on freenode
[02:10:55] *** Quits: cmr_ (Mibbit@1D1B0329.99816762.7923FEFE.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[02:10:56] <strcat> it's ridiculous
[02:11:26] *** brson sets mode: +o jack
[02:11:47] *** brson sets mode: +o kmc
[02:11:49] <Eridius> ok my process-new-args patch passes `make check` once again. Had to leave run::process_status() as taking &[~str] though >_< stupid ICE
[02:11:52] <Eridius> r? https://github.com/mozilla/rust/pull/8203
[02:12:13] <strcat> brson: btw I think you have to do it through ChanServ for it to be permanent
[02:12:16] <Eridius> brson: your mistaken /mode makes more sense now ;)
[02:12:23] *** Quits: XyMa (user@4F5647EE.12FF1288.B4C97B2.IP) (Ping timeout)
[02:12:35] *** Quits: threecreepio (jdp@moz-71E164C9.cust.bredbandsbolaget.se) (Quit: threecreepio)
[02:12:38] <brson> strcat: i've also done in through chanserv
[02:12:40] <strcat> ah
[02:12:47] <Eridius> assuming ChanServ here works like freenode, OPing via ChanServ still isn't permament, but if you set up your ACCESS list you can give them auto-OP or the power to OP themselves via ChanServ
[02:13:02] <strcat> yeah I meant that
[02:13:19] <brson> I've added several more people to the aop list, with the power to kickban jerks
[02:13:39] <jld> IIRC, "+oo brson kmc" is how to op multiple people in one command.
[02:14:03] <strcat> or just use /op in your client ;p
[02:14:08] <jld> In that it works like assorted old Unix tools (dump(8)/restore(8) come to mind).
[02:14:59] <adridu59> trying to pass ~str as function parameter... "error: mismatched types: expected `~str` but found `&'static str` (str storage differs: expected ~ but found &'static )"
[02:15:21] <Eridius> adridu59: if the function wants &'static str, then that means you have to pass a string literal
[02:16:51] <strcat> jld: I like the tools where you keep adding more -v to increase the debug level ;p
[02:16:52] *** Quits: fyolnish (fyolnish@moz-7FFDE6BE.uqwimax.jp) (Client exited)
[02:17:02] <Eridius> codesign -vvvv foo.ap
[02:17:04] <adridu59> Eridius: no I want to pass ~str to the function
[02:17:12] <Eridius> adridu59: what function is it?
[02:17:25] <Eridius> it's rather unusual for a function to declare that it needs &'static str, instead of just &str
[02:17:25] *** Joins: RMF (RMF@A3A10308.EB26598F.8D19547B.IP)
[02:17:33] <trevs> I have the following line 'let int_from_str = uint::from_str(arg)' but need to add error handling if the str cannot become int
[02:17:47] <Eridius> rusti: std::uint::from_str("234")
[02:17:48] -rusti- Some(234)
[02:17:53] <adridu59> custom one from my program, I want to be able to edit the string in the function so I need to pass ~str right?
[02:18:04] <Eridius> trevs: it returns Option. You can check if it succeeded or failed with the methods there (see the docs on std::option)
[02:18:32] <Eridius> adridu59: you either need to edit the function to take ~str, or let it take &str (not &'static str) and call .to_owned()
[02:18:46] <Eridius> adridu59: or you can optimize a bit, parameterize it with <S: Str>, take S instead, and call .into_owned() on it
[02:19:07] <Eridius> the reason for doing that is if the caller passes &str it will behave like you called .to_owned() (and copy the string), but if they pass ~str it will just use it directly with no copying
[02:19:20] *** Joins: tikue_ (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net)
[02:19:42] <adridu59> the function already takes ~str
[02:19:58] <adridu59> but before I had set &str and got no errors
[02:20:01] <Eridius> adridu59: oh my. I think I read your error backwards. You passed a string literal?
[02:20:09] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[02:20:14] *** Quits: maik (maik___@moz-7EDF7261.dip0.t-ipconnect.de) (Ping timeout)
[02:20:32] <adridu59> literal?
[02:20:43] <Eridius> adridu59: the error is telling you that you did not in fact pass a ~str
[02:20:46] <Eridius> adridu59: yes, like `"foo"`
[02:20:57] *** Joins: XyMa (user@4F5647EE.12FF1288.B4C97B2.IP)
[02:21:01] <Eridius> adridu59: if you type `"foo"` you get a &'static str. If you type `~"foo"` you get a ~str
[02:21:03] <adridu59> yes I understood the error just don't know how to do it right
[02:21:08] <Eridius> use ~"foo"
[02:21:13] <Eridius> rusti: ~"foo"
[02:21:13] -rusti- ~"foo"
[02:21:15] <adridu59> I see
[02:21:16] <Eridius> rusti: "foo"
[02:21:17] -rusti- "foo"
[02:21:28] <Eridius> rusti: fn foo(s: ~str) { printfln!(s) } foo("Test")
[02:21:29] -rusti- <anon>:5:46: 5:52 error: mismatched types: expected `~str` but found `&'static str` (str storage differs: expected ~ but found &'static )
[02:21:29] -rusti- <anon>:5          fn foo(s: ~str) { printfln!(s) } foo("Test")
[02:21:29] -rusti-                                                        ^~~~~~
[02:21:30] -rusti- error: aborting due to previous error
[02:21:30] -rusti- application terminated with error code 101
[02:21:32] <Eridius> rusti: fn foo(s: ~str) { printfln!(s) } foo(~"Test")
[02:21:33] -rusti- ~"Test"
[02:21:33] -rusti- ()
[02:21:54] <Eridius> see the foo("test")? That produced the error you listed
[02:22:58] *** Quits: MauricioC (mauricioc@moz-2CFCD404.impa.br) (Ping timeout)
[02:23:04] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Connection reset by peer)
[02:23:13] <adridu59> now once it my function I try to call .slice_from(1); a few times but it doesn't seem to work, that is why I wanted to change to ~str
[02:23:17] <adridu59> but it does not work
[02:23:39] *** Joins: MauricioC (mauricioc@moz-2CFCD404.impa.br)
[02:23:52] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[02:24:38] <Eridius> adridu59: .slice_from() doesn't mutate the string. It just returns a slice from 1 to the string's end
[02:24:52] <Eridius> adridu59: if you're just trying to slice the string, you can take &str no problem.
[02:26:37] <ChrisMorgan> Tut tut... cmr allowed comments to get out of date in the "for" conversion: `for v.each |item|` in std::util::unreachable doc
[02:27:18] <adridu59> can I do str = str.slice_from(1) then?
[02:28:09] *** Quits: RMF (RMF@A3A10308.EB26598F.8D19547B.IP) (Quit: Textual IRC Client: www.textualapp.com)
[02:28:17] <Eridius> adridu59: if you mark `str` as mutable, sure. Or you could say `let str = str.slice_from(1)`
[02:28:46] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[02:28:59] <tikue_> is rusti fixed?
[02:28:59] <adridu59> ok I have passed it as ~str in the function
[02:29:10] <Eridius> adridu59: if you're just slicing it, go ahead and take &str
[02:29:28] <adridu59> and clone it?
[02:29:30] <Eridius> adridu59: only use ~str if you're going to use one of the methods from http://static.rust-lang.org/doc/std/str.html#trait-ownedstr
[02:29:51] <Eridius> adridu59: what else are you doing besides slicing/
[02:30:08] <adridu59> nothing besides iterating
[02:30:13] <Eridius> then you don't need ~str
[02:30:35] <tikue_> rusti: let mut s = ~"owned"; s.push_str("!!"); s
[02:30:36] -rusti- ~"owned!!"
[02:30:38] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[02:30:38] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14384fbb9 to 1426e925a: 02http://git.io/N3iJvQ
[02:30:38] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[02:30:38] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[02:30:39] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/k4xogg
[02:30:39] <ghrust> 13rust/06auto 1414cdc26 15Corey Richardson: src/test/bench: restructure
[02:30:39] <ghrust> 13rust/06auto 148a07f57 15Corey Richardson: Teach compiletest to use multiple --src-base's
[02:30:39] <ghrust> 13rust/06auto 1443f851d 15Corey Richardson: Teach the makefile to use multiple src-base's
[02:30:41] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[02:30:49] <adridu59> but &str is immutable
[02:30:52] <ChrisMorgan> After hitting supposedly unreachable code in my code, I officially don't like std::util::unreachable, as it obscures the place of failure: ``task <unnamed> failed at 'internal error: entered unreachable code', /home/chris/vc/rust/src/libstd/util.rs:130`` is fairly useless with no backtrace.
[02:30:55] <Eridius> adridu59: and you're not mutating it
[02:31:08] <Eridius> ChrisMorgan: maybe it should be a macro?
[02:31:10] <ChrisMorgan> RFC: discard util::unreachable, replacing it with `unreachable!()` macro
[02:31:15] <adridu59> I want to slice it because it's in a loop
[02:31:21] <Eridius> adridu59: slicing is not a mutating operation
[02:31:22] <adridu59> so I need to store it
[02:31:33] <adridu59> I need to assign a slice
[02:31:44] <Eridius> adridu59: you can make the variable mutable without using ~str
[02:31:46] *** Joins: ofeldt (ofeldt@moz-DCA1E5D7.dip0.t-ipconnect.de)
[02:31:47] <tikue_> task failure should just give line number
[02:31:51] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[02:31:51] <adridu59> how then?
[02:31:55] *** Joins: klakplok (Mibbit@moz-3420FBF5.fbx.proxad.net)
[02:31:56] <adridu59> (besides copy)
[02:31:57] <Eridius> rusti: fn foo(mut s: &str) { s = s.slice_from(1); printfln!(s) } foo("test")
[02:31:57] -rusti- "est"
[02:31:58] -rusti- ()
[02:32:01] <Eridius> adridu59: ^
[02:32:03] *** Quits: Ralith (ralith@114DA04D.CD83ED0A.BCDF04A6.IP) (Ping timeout)
[02:32:03] <tikue_> rusti: fail!(":-(");
[02:32:08] -rusti- pastebinned 9 lines of output: http://ix.io/7EV
[02:32:19] <erickt> aatch: I'm not sure if you can link in all the llvm libraries like how you did it
[02:32:26] <tikue_> rusti: fail!(":-("); 0
[02:32:35] -rusti- pastebinned 12 lines of output: http://ix.io/7EW
[02:32:56] <tikue_> rusti: if true {fail!(":-(");} 0u
[02:32:56] -rusti- task <unnamed> failed at ':-(', <anon>:5
[02:32:56] -rusti- application terminated with error code 101
[02:33:10] *** Quits: sk (sk@60A96C0.50B2D8C.78DD174B.IP) (Quit: Leaving)
[02:33:28] <erickt> aatch: oh, and I see you updated to HEAD too.
[02:33:41] <tikue_> strcat: is rusti fixed or did you roll it back to an older rust
[02:33:46] <strcat> roll it back
[02:34:03] <adridu59> Eridius: I get "cannot assign to immutable argument", do I have to pass as &mut str?
[02:34:28] <adridu59> I cannot reproduce your behavior
[02:34:33] <erickt> aatch: why did you decide against updating remotes/origin/rewrite?
[02:34:42] <adridu59> ah nevermind I didn't see the mut
[02:34:56] *** Joins: mihneadb (mihneadb@moz-329F29A3.lightspeed.sntcca.sbcglobal.net)
[02:35:01] <adridu59> whohoo it seems to work now
[02:35:03] <Eridius> adridu59: you're conflating mutable variable with the ability to mutate the data
[02:35:20] *** Joins: Earnestea (earnest@moz-F387F877.dyn.plus.net)
[02:35:29] <bjz> jeaye: just a headsup: https://github.com/bjz/glfw-rs/commit/1745d541c1081122f7eb345610840b22c7ed10cb
[02:35:38] <bjz> jeaye: g2g, bbl
[02:36:03] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[02:36:18] *** Quits: Earnestly (earnest@B0BDF733.8FDE20A.5411983D.IP) (Ping timeout)
[02:36:48] *** Quits: azakai_ (alon@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[02:37:32] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[02:38:13] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[02:38:28] <adridu59> Eridius: "123".iter().take(3), the take(3) part does not seem to work
[02:38:42] <adridu59> rusti: "1234567".iter.take(5)
[02:38:45] -rusti- <anon>:5:9: 5:23 error: attempted to take value of method `iter` on type `&'static str` (try writing an anonymous function)
[02:38:45] -rusti- <anon>:5          "1234567".iter.take(5)
[02:38:45] -rusti-                   ^~~~~~~~~~~~~~
[02:38:45] -rusti- error: aborting due to previous error
[02:38:46] -rusti- application terminated with error code 101
[02:39:01] <adridu59> rusti: ~"1234567".iter.take(5)
[02:39:01] -rusti- <anon>:5:10: 5:24 error: attempted to take value of method `iter` on type `&'static str` (try writing an anonymous function)
[02:39:01] -rusti- <anon>:5          ~"1234567".iter.take(5)
[02:39:01] -rusti-                    ^~~~~~~~~~~~~~
[02:39:02] -rusti- error: aborting due to previous error
[02:39:02] -rusti- application terminated with error code 101
[02:39:16] <jmgrosen> : rusti: "1234567".iter().take(5)
[02:39:26] <jmgrosen> rusti: "1234567".iter.take(5)
[02:39:26] -rusti- <anon>:5:9: 5:23 error: attempted to take value of method `iter` on type `&'static str` (try writing an anonymous function)
[02:39:26] -rusti- <anon>:5          "1234567".iter.take(5)
[02:39:27] -rusti-                   ^~~~~~~~~~~~~~
[02:39:27] -rusti- error: aborting due to previous error
[02:39:27] -rusti- application terminated with error code 101
[02:39:36] <jmgrosen> rusti: "1234567".iter().take(5)
[02:39:38] -rusti- {iter: {string: "1234567"}, n: 5}
[02:39:58] <jmgrosen> : rusti: let foo: ~[&str] = "1234567".iter.take(5).collect(); foo
[02:40:11] <jmgrosen> rusti: let foo: ~[&str] = "1234567".iter.take(5).collect(); foo
[02:40:12] -rusti- <anon>:5:28: 5:42 error: attempted to take value of method `iter` on type `&'static str` (try writing an anonymous function)
[02:40:12] -rusti- <anon>:5          let foo: ~[&str] = "1234567".iter.take(5).collect(); foo
[02:40:12] -rusti-                                      ^~~~~~~~~~~~~~
[02:40:12] -rusti- error: aborting due to previous error
[02:40:12] -rusti- application terminated with error code 101
[02:40:21] <jmgrosen> rusti: let foo: ~[&str] = "1234567".iter().take(5).collect(); foo
[02:40:26] -rusti- pastebinned 8 lines of output: http://ix.io/7EX
[02:41:25] *** Quits: jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Quit: Don't tell them I was here...)
[02:42:38] *** Quits: bjz (brendanzab@AE0B7388.B8C2BBC3.F4A11E52.IP) (Quit: Leaving...)
[02:43:13] <Eridius> jmgrosen: str.iter() is char's.
[02:43:21] <Eridius> also, if you just want a vec back, .to_owned_vec() will let you skip the type annotation
[02:43:35] <jmgrosen> rusti: let foo = "1234567".iter().take(5).to_owned_vec(); foo
[02:43:36] -rusti- ~['1', '2', '3', '4', '5']
[02:43:39] <Eridius> .to_owned_vec() is just shorthand for .collect::<~[T]> (where T is the appropriate type based on the iterator)
[02:43:53] <adridu59> I would like to do the product
[02:44:16] <Eridius> adridu59: what was wrong with take? 
[02:44:55] <Eridius> rusti: "12345".iter().take(3)
[02:44:56] -rusti- {iter: {string: "12345"}, n: 3}
[02:44:56] <adridu59> Eridius: did not work in the sense that all the string was still passed
[02:45:03] <Eridius> rusti: "12345".iter().take(3).to_owned_vec()
[02:45:03] -rusti- ~['1', '2', '3']
[02:45:13] <Eridius> adridu59: what do you mean, still passed?
[02:45:49] <aatch> erickt, I'm not what I'm going to do with the rewrite branch yet,
[02:45:52] <Eridius> .take() just wraps the CharIterator with another one that limits the number of elements yielded. So the CharIterator still references the full string you gave it, but that shouldn't be a problem
[02:45:53] <adridu59> it was as if I didn't use take
[02:46:07] <Eridius> adridu59: can you demonstrate what you mean?
[02:46:15] <Eridius> rusti: "12345".iter().take(3).collect::<~str>()
[02:46:16] -rusti- ~"123"
[02:46:56] *** Quits: zz_kimundi (kimundi@moz-BC6B644B.dip0.t-ipconnect.de) (Ping timeout)
[02:47:19] <adridu59> I just used .take followed by .map
[02:47:34] *** Quits: tcr (tcr@D26BCFC9.C2203064.EDCE493E.IP) (Client exited)
[02:47:40] <Eridius> rusti: "12345".iter().take().map(|x| (x - '0') as int).to_owned_vec()
[02:47:41] -rusti- <anon>:5:9: 5:31 error: this function takes 1 parameter but 0 parameters were supplied
[02:47:41] -rusti- <anon>:5          "12345".iter().take().map(|x| (x - '0') as int).to_owned_vec()
[02:47:41] -rusti-                   ^~~~~~~~~~~~~~~~~~~~~~
[02:47:41] -rusti- error: aborting due to previous error
[02:47:42] -rusti- application terminated with error code 101
[02:47:46] <Eridius> rusti: "12345".iter().take(3).map(|x| (x - '0') as int).to_owned_vec()
[02:47:47] -rusti- ~[1, 2, 3]
[02:47:55] *** Joins: infynyxx_ (infynyxx@moz-E95B370B.nyc.res.rr.com)
[02:48:54] <adridu59> I did .map then .product
[02:49:01] *** Joins: heftig (heftig@moz-278A4FFC.dip0.t-ipconnect.de)
[02:49:22] <Eridius> rusti: use std::iterator::MultiplicativeIterator; "12345".iter().take(3).map(|x| (x - '0') as uint).product()
[02:49:23] -rusti- 6
[02:49:25] <Eridius> looks correct to me
[02:49:28] <Eridius> adridu59: can you demonstrate the problem?
[02:49:48] <adridu59> wait nwm, take() works
[02:49:59] *** Quits: gandi (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net) (Ping timeout)
[02:50:06] *** Joins: zz_kimundi (kimundi@moz-25720C1F.dip0.t-ipconnect.de)
[02:50:33] *** zz_kimundi is now known as kimundi
[02:51:54] *** Joins: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net)
[02:54:03] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[02:54:54] *** Joins: Ralith (ralith@114DA04D.CD83ED0A.BCDF04A6.IP)
[02:55:25] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[02:55:33] *** Quits: klakplok (Mibbit@moz-3420FBF5.fbx.proxad.net) (Quit: http://www.mibbit.com ajax IRC Client)
[02:56:44] *** Quits: infynyxx_ (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[02:58:37] *** Joins: ChemicalHarm (Mibbit@moz-A9F37238.hsd1.md.comcast.net)
[02:58:48] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[03:00:18] <adridu59> it was my string concatenation that was strong and made it include tabs and spaces, that's why I got funky behavior
[03:00:32] <adridu59> gnight everybody
[03:00:36] *** Quits: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[03:01:02] *** Quits: ChemicalHarm (Mibbit@moz-A9F37238.hsd1.md.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[03:02:31] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[03:03:43] *** Quits: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net) (Ping timeout)
[03:05:23] *** Quits: wilkie (wilkie@moz-CEF5E490.pitbpa.fios.verizon.net) (Ping timeout)
[03:06:05] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[03:07:31] *** Joins: enticeing (user@CB864A86.D932A275.5037098C.IP)
[03:07:44] <enticeing> Is rust-bindgen failing to build for everyone?
[03:08:19] <enticeing> or have their been changes in the past few days, that i need to rebuild rust
[03:09:31] <SiegeLord> Looks like there've been changes
[03:09:40] <SiegeLord> I built it fine a few days ago
[03:10:01] <enticeing> Could you try it now? There've been changes made to bindgen recently that may be the problem
[03:10:17] <SiegeLord> It is failing to build now, yes
[03:10:17] *** Quits: MauricioC (mauricioc@moz-2CFCD404.impa.br) (Quit: Lost terminal)
[03:10:25] <enticeing> Okay, thanks
[03:10:45] <enticeing> I just figured I should check here before i rebuild the whole thing
[03:10:59] *** Quits: Earnestea (earnest@moz-F387F877.dyn.plus.net) (Ping timeout)
[03:11:11] <SiegeLord> It doesn't rule out there being changes made after the changes in rust-bindgen that stop it from building ;)
[03:11:19] <SiegeLord> So it's still a matter of luck
[03:11:25] <enticeing> I suppose so
[03:13:09] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[03:13:10] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[03:13:16] <enticeing> Well, guess i'm rebuilding anyways
[03:14:40] *** Joins: int3__ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[03:14:41] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Connection reset by peer)
[03:16:49] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Ping timeout)
[03:17:53] <erickt> aatch: ping
[03:17:58] <aatch> erickt, pong
[03:18:04] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[03:18:07] <erickt> aatch: hey there :)
[03:19:01] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[03:19:16] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[03:19:19] <erickt> aatch: so I need to somehow express HashMap<~str,ValueRef> as done in http://llvm.org/docs/tutorial/OCamlLangImpl3.html
[03:19:38] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[03:19:56] <erickt> aatch: is there any way we can express this in llvm-rs
[03:20:39] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[03:20:39] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14800e75b to 1426e925a: 02http://git.io/N3iJvQ
[03:20:39] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[03:20:41] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[03:20:41] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/DE8cAg
[03:20:41] <ghrust> 13rust/06auto 144fd1e31 15Brian Anderson: rustc: Fix cstack lint for default methods. Closes #8753
[03:20:41] <ghrust> 13rust/06auto 148ca3ce5 15bors: auto merge of #8796 : brson/rust/cstack, r=catamorphism
[03:20:41] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[03:20:46] <erickt> aatch: beyond just extracting the ValueRef
[03:21:10] <aatch> erickt, right now, the most general version would be a Value<ty::Type> (ty::Type is a concrete type)
[03:21:22] <aatch> Converting to it is one of the "needs work" things
[03:22:17] <aatch> I would actually probably want a value trait object
[03:22:40] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[03:22:42] <aatch> and then a TypedValue trait that is parameterised.
[03:22:54] *** Joins: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[03:23:28] <erickt> aatch: but then we'd need a way to downcast from a generic value when calling add or something
[03:23:32] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[03:23:45] <aatch> erickt, yeah, I know...
[03:23:51] <erickt> hrm
[03:26:53] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[03:27:19] *** Quits: enix (enix@moz-3BC5FE84.hsd1.md.comcast.net) (Quit: Konversation terminated!)
[03:28:40] *** Quits: boredomist (user@moz-63CF9F31.res-cmts.sesp.ptd.net) (Ping timeout)
[03:29:02] *** Joins: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP)
[03:30:38] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[03:30:38] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 148ca3ce5 to 1426e925a: 02http://git.io/N3iJvQ
[03:30:38] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[03:30:40] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[03:30:40] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/dZDd7g
[03:30:40] <ghrust> 13rust/06auto 148557219 15Florian Hahn: Add tests for ref in closure parameter list, closes #5239
[03:30:40] <ghrust> 13rust/06auto 1489d0400 15bors: auto merge of #8800 : fhahn/rust/ticket_5239, r=alexcrichton...
[03:30:41] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[03:32:18] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[03:32:59] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Ping timeout)
[03:33:42] *** Quits: enticeing (user@CB864A86.D932A275.5037098C.IP) (Client exited)
[03:33:56] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[03:35:00] <etw> http://pastebin.com/kREWhkKD <- can anyone explain what "cannot borrow const anonymous field as mutable" in this context?
[03:36:56] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[03:37:44] *** Quits: Aszarsha_ (Aszarsha@moz-16BFBC53.rev.numericable.fr) (Ping timeout)
[03:38:06] <brson> acrichto: it does look like the std::run patch was an amazingly bad regression on windows. we need to figure that out
[03:38:42] <acrichto> brson: and it's also causing segfaults all over the place
[03:38:53] <acrichto> at least I suspect it is
[03:38:59] <acrichto> brson: https://github.com/mozilla/rust/issues/8836
[03:39:34] *** Quits: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[03:40:07] <brson> the segfaults could well be an underlying scheduler problem. this is the first time we're flexing rt::io
[03:40:36] *** Quits: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net) (Ping timeout)
[03:40:47] <acrichto> trying to reproduce locally inside of gdb
[03:41:14] <jfbk> build question:  i'm trying to change iter::Times to uint::Times and delete the iter module.  ignoring for now whether that's a good idea, when i try to compile, every module in libstd fails with unresolved imports for seemingly unrelated modules.  can anyone explain why that is?
[03:41:33] <jfbk> here's the branch: https://github.com/jfager/rust/tree/move-iter-times
[03:42:08] *** Joins: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net)
[03:42:09] <erickt> aatch: now that I think about it, I don't think we can protect about adding two values of different types
[03:42:51] *** Quits: int3__ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[03:43:11] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[03:43:13] <brson> jfbk: probably no one can explain exactly why, but it does happen a lot when refactoring std. the underlying problem is various bugs in name resolution. `use foo::*` is often the culprit, so if you can identify one of those that looks related to your change in some way and manually expand the stars, you *may* be able to get it to work
[03:43:27] <brson> really frustrating
[03:44:03] *** Joins: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net)
[03:44:59] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[03:45:06] <jfbk> ok, thanks
[03:45:42] <jfbk> alright, so unignoring whether getting rid of the iter module is a good idea:  is getting rid of the iter module a good idea?
[03:45:51] <fread2281> so is extra::term planned to be a full terminal library like curses?
[03:46:14] <strcat> jfbk: well I don't think we should have Times
[03:46:22] <strcat> I have a PR open to rm it, but there's not consensus
[03:47:50] *** Quits: Jesin (Jessin_@moz-5E8F07BF.cc.lehigh.edu) (Input/output error)
[03:48:03] *** Quits: Niessy (Mibbit@moz-E56CAA08.dsl.bell.ca) (Quit: http://www.mibbit.com ajax IRC Client)
[03:48:25] <jfbk> ok.  not trying to open any boxes bringing it up, my prob is i click on the iter doc when i want the iterator doc way too frequently
[03:48:55] *** Joins: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP)
[03:49:50] <brson> jfbk: yes, independently of other concerns, moving Times out of the iter module is a good idea
[03:50:39] <strcat> to num.rs I guess
[03:51:10] <brson> iter might be a more rusty (i.e. shorter) name for iterator too
[03:51:34] * strcat agrees
[03:51:42] <pepper_chico> strcat is expensive, first seek the end of str to the append, lame
[03:51:49] *** Joins: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net)
[03:51:58] * fread2281 likes Iterator because it is a big important thing
[03:52:06] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[03:52:06] *** ChanServ sets mode: +ao dherman dherman
[03:52:18] <strcat> well it would be iter::Iterator
[03:52:39] <fread2281> oh
[03:52:47] <fread2281> nevermind
[03:53:01] *** Quits: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net) (Ping timeout)
[03:53:42] *** Joins: jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[03:53:52] *** Joins: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net)
[03:54:13] *** Joins: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net)
[03:54:14] <jfbk> are explicit 'use prelude::*' imports necessary?
[03:54:20] <tikue_> no
[03:54:37] <tikue_> that's the point of the prelude :P
[03:54:38] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[03:54:46] <tikue_> (unless i'm profoundly mistaken about something)
[03:55:09] *** Joins: tcr_ (tcr@moz-1C4F4144.hsd1.ma.comcast.net)
[03:55:09] <jfbk> that's what i thought but they're pretty common in libstd
[03:55:11] <acrichto> brson: I wonder if it's healthy for the test suite to be spawning ~30 instances of rustc
[03:55:19] <acrichto> maintained
[03:55:26] *** Quits: chee (chee@moz-E5A0DD8.org) (Quit: i am quit)
[03:55:34] *** Quits: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net) (Ping timeout)
[03:55:36] <erickt> brson: do you happen to know if there's a #[linker] option that can use a c++ linker?
[03:55:38] <acrichto> jfbk: #[no_std] turns off prelude injection (and libstd must build with #[no_std])
[03:56:22] <Luqman> erickt: you can choose what "linker" to use with rustc --linker
[03:56:25] <jfbk> acrichto: ah, makes sense, thanks
[03:56:36] <erickt> Luqman: yeah, I'm aware of it :)
[03:56:56] <strcat> erickt: gcc/clang can compile C++
[03:56:59] <strcat> don't need g++/clang++
[03:57:07] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Client exited)
[03:57:11] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[03:57:13] <strcat> all they do is pass -lstdc++ -lm (or -lc++) and also treat .c as C++
[03:57:54] <Luqman> erickt: so you just want to be able to specify from within the source?
[03:58:14] <erickt> thanks strcat
[03:58:22] <erickt> Luqman: yeah, so I can just do "rustc mod.rs"
[03:58:57] <erickt> I wonder if it's portable to add -lstdc++
[03:59:16] <strcat> erickt: I think we already do ;p, for the runtime
[03:59:17] <Luqman> ah, well there isn't any linker attribute
[03:59:21] <strcat> it's not really portable
[03:59:51] <strcat> since LLVM is going to switch to C++11 (like LLD already did) and libstdc++ on OS X is frozen forever at an old version
[03:59:59] <brson> acrichto: not sure, but there's an issue to reduce the amount of tests we spawn simultaneously - we used to overcommit to compensate for bad scheduling
[04:00:05] <strcat> we don't have to worry about it for a while
[04:00:19] <brson> acrichto: now we just overcommit for no reason
[04:00:40] <acrichto> brson: it should also help expose problems so it's not that bad anyway
[04:00:48] *** Joins: chee (chee@moz-E5A0DD8.org)
[04:00:49] <strcat> well it makes it take longer
[04:00:52] <acrichto> still can't reproduce at all though
[04:00:55] <strcat> major memory bandwidth issues
[04:01:04] <acrichto> and just filesystem bandwidth
[04:01:23] *** Joins: ChemicalHarm (Mibbit@moz-A9F37238.hsd1.md.comcast.net)
[04:01:30] *** Quits: joshua_ (joshua@moz-45967CBE.emarhavil.com) (Ping timeout)
[04:01:40] *** Quits: ChemicalHarm (Mibbit@moz-A9F37238.hsd1.md.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[04:02:23] *** Joins: ross (ross@moz-8A84103E.br.br.cox.net)
[04:02:38] <brson> erickt: there isn't, but it sounds potentially reasonable. i do fear that we are going to paint ourselves into a corner though where rust semantics demand that we link with gcc/g++/cc, whatever c compiler
[04:02:51] <brson> rust's linkage story is a mess
[04:03:06] <erickt> brson: what are we doing for librustc regarding llvm?
[04:03:14] <strcat> no static linking, and rpath awfulness :(
[04:03:29] <brson> erickt: nothing special for llvm
[04:04:16] *** Joins: zeuxcg (zeuxcg@moz-80D1F912.hsd1.ca.comcast.net)
[04:05:00] *** Quits: recrack (ymin@5AB4884B.FCC4549.14D5B978.IP) (Quit: Lost terminal)
[04:05:03] <erickt> brson: we aren't using g++/clang++? I wonder why llvm-rs is complaining about not finding libstd-c++
[04:05:04] *** Joins: wilkie (wilkie@moz-CEF5E490.pitbpa.fios.verizon.net)
[04:05:19] *** Quits: KindOne (KindOne@moz-4BE1FBCE.dynamic.ip.windstream.net) (Ping timeout)
[04:06:26] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[04:07:03] <brson> erickt: is llvm-rs (which I haven't heard of!) linking to llvm statically?
[04:07:20] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[04:07:53] <erickt> nope, it's just doing things like -lLLVMCore. I'm checking now if there's a particular function thats causing problems
[04:08:13] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[04:08:19] *** Joins: dbaupp (Thunderbir@446B964E.D5A1DCF.37681C44.IP)
[04:08:57] *** Joins: KindOne (KindOne@moz-4BE1FBCE.dynamic.ip.windstream.net)
[04:09:53] <brson> LLVMCore is probably a static lib - it is in our build at least
[04:10:07] <brson> the llvm build produces a bunch of little static libraries
[04:10:14] <brson> that we link to librustllvm.so
[04:10:22] <brson> then rustc links to *that*
[04:10:44] <brson> probably tweaking the gcc command line to include the appropriate c++ flags will work
[04:11:07] *** Joins: steven_is_false (user@C5B76363.1FF1EBF8.1ECA502.IP)
[04:11:11] *** Quits: XyMa (user@4F5647EE.12FF1288.B4C97B2.IP) (Ping timeout)
[04:12:20] <tikue_> brson: what would it mean for rust semantics to demand linking with a c compiler
[04:12:40] <erickt>  brson: ah, you're right. I'm playing homebrew's llvm, which statically links llvm
[04:13:18] <brson> tikue_: i just mean that so many people will have hacked up #[link_args] and such that expect gcc that we can't get away from it
[04:13:39] <steven_is_false> Hi cmr . You install stuff to ~/.local right? That doesn't have any bad interaction with Rust right?
[04:13:50] <tikue_> oh ok
[04:14:19] <brson> erickt: are you making llvm-rs?
[04:14:28] <erickt> brson: aatch made it
[04:14:33] *** Quits: dbaupp (Thunderbir@446B964E.D5A1DCF.37681C44.IP) (Ping timeout)
[04:14:41] <erickt> brson: I'm porting the kaleidoscope to llvm-rs
[04:15:05] <tikue_> how do syscalls in rust work?
[04:15:18] <aatch> tikue_, can you elaborate?
[04:15:42] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[04:15:56] <tikue_> like 
[04:15:58] <tikue_> chmod etc.
[04:16:16] <aatch> tikue_, well right now they just the libc functions.
[04:16:23] <tikue_> oh ok
[04:16:28] <strcat> or they go through libuv
[04:16:29] <tikue_> are there any concrete plans for moving away from libc?
[04:16:38] <aatch> it is possible to use inline assembly to do syscalls.
[04:16:55] <strcat> we can't really move away from libc without rewritten jemalloc/libuv
[04:17:00] <strcat> rewriting*
[04:17:19] <strcat> not feasible in anything but the far long-term
[04:17:19] <tikue_> i'd be really curious to know how a malloc implementation in rust fares
[04:17:31] <aatch> tikue_, ask dbaupp
[04:17:47] <tikue_> aatch: did he do that?
[04:17:59] <aatch> tikue_, a very basic, buggy one, yeah.
[04:18:03] <brson> i'm sad that our llvm bindings are so awful that people are using out-of-tree ones
[04:18:13] <brson> we should have an llvm crate with good high-level bindings
[04:18:13] <tikue_> cool!
[04:18:21] <steven_is_false> Can libuv, and jemalloc be built with stripped down versions of libc?
[04:18:22] <aatch> brson, well that was kinda my aim.
[04:18:30] <steven_is_false> libc-minor?
[04:18:39] <brson> aatch: good :)
[04:18:44] <tikue_> in theory syscalls could have safe implementations right?
[04:18:55] <strcat> what do you mean safe?
[04:19:03] <strcat> the libc implementations are "safe"
[04:19:16] <aatch> brson, but at the time I started there were a bunch of bugs and limitations that made LLVM bindings difficult to do well.
[04:19:33] <aatch> It's still not easy because LLVM uses such a right heirarchy.
[04:19:37] <aatch> rich*
[04:19:49] <aatch> and it's difficult to replicate in rust.
[04:20:08] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[04:20:32] <aatch> tikue_, most syscalls are "safe", a few are not, but they mostly relate to process-level stuff anyway.
[04:20:34] <tikue_> strcat: right i mean not requiring unsafe fn
[04:20:35] <aatch> or memory
[04:20:56] <aatch> tikue_, well they have inline asm, so you do need at least an unsafe block.
[04:21:10] <tikue_> mmm
[04:21:12] <aatch> but unsafe basically just means that the compiler cannot ensure it's safe.
[04:21:18] <aatch> not that it is actually unsafe.
[04:21:20] *** Joins: garthk (garth@moz-B118B14A.static.internode.on.net)
[04:22:13] <tikue_> right
[04:22:25] <aatch> (example of an unsafe syscall: munmap. since you might have pointers into the region you need a wrapper that deals with it)
[04:23:04] <strcat>  or because it's undefined behaviour to just munmap random things
[04:24:05] <aatch> exactly. Most syscalls however, just return an error code.
[04:24:52] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[04:25:43] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[04:25:53] <brson> does sebcrozet hang out in #rust?
[04:26:18] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[04:26:29] <bjz> brson: sometimes
[04:26:46] <bjz> brson: he's an 'every-so-often' IRC-er
[04:26:52] <bjz> brson: why?
[04:27:03] <brson> because he's a badass
[04:27:12] <bjz> jeaye: fixed a mistake with the shared window stuff
[04:27:15] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[04:27:19] <bjz> brson: aye :P
[04:28:46] *** Quits: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net) (Quit: leaving)
[04:30:02] <bjz> should I be putting my examples in the /test/ folder?
[04:30:07] <bjz> for my lib
[04:30:25] <bjz> (ie. for rustpkg)
[04:30:29] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[04:32:27] *** Quits: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: My lid went down)
[04:32:48] <jeaye> ahh, strcat makes life so easy.
[04:33:09] <strcat> ? ;p
[04:33:15] * jeaye just switched from Slack 14.0 to Arch and installing Rust is now so convenient
[04:33:16] *** Joins: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net)
[04:33:19] *** Quits: tcr_ (tcr@moz-1C4F4144.hsd1.ma.comcast.net) (Connection reset by peer)
[04:33:21] <strcat> ah
[04:35:03] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[04:35:27] *** Joins: chozza (Mibbit@DDF2FC12.F553F9.14D5B978.IP)
[04:36:27] <tikue_> more convenient than git pull origin master && make?
[04:36:44] *** Quits: chee (chee@moz-E5A0DD8.org) (Quit: i am quit)
[04:36:52] <strcat> well I do nightly builds
[04:37:02] <strcat> + I have the stable release in the official repos
[04:37:06] <tikue_> oo
[04:37:07] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Quit: WeeChat 0.4.1)
[04:37:29] *** Quits: jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Quit: Don't tell them I was here...)
[04:40:39] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[04:40:39] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/dZDd7g
[04:40:39] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[04:41:43] <nsf> "It is being replaced by FromStr::<for int>::from_str, but this doesn't exist yet"
[04:41:49] <nsf> omg, why?
[04:42:29] <pepper_chico> anyone uses Vim here, with syntastic?
[04:42:48] <erickt> does anyone know if it's actually valid to declare a trait method that returns a &Foo without specifying a region?
[04:42:55] <aatch> erickt, nope.
[04:43:01] <Chef> pepper_chico, I do.
[04:43:14] <Chef> Any problems?
[04:43:24] <erickt> aatch: hrm, I wonder why it compiles. Maybe there's already a bug for it
[04:43:42] <aatch> erickt, what happens if you try to use it?
[04:44:05] <sfackler> nsf: omg why is it being replaced or why doesn't it exist yet?
[04:44:18] <brson> 'why is it so ugly?'
[04:44:34] <aatch> I have a feeling it won't let you return an &Foo from the function.
[04:44:34] <sfackler> or that :P
[04:45:10] <pepper_chico> Chef, man, anytime I compile a file (currently just samples with SingleCompile https://github.com/xuhdev/SingleCompile/pull/44), I get error signals because of compiler errors, then I correct the errors, compile again, success, but the signals of the previous errors don't go aways, does that happen to you?
[04:45:11] <erickt> aatch: errors on implementing
[04:45:22] <aatch> erickt, yeah, thought so.
[04:45:26] <nsf> sfackler: yes, why is it being replaced and why is it so ugly
[04:45:39] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[04:45:39] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/P9Q-2g
[04:45:39] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[04:45:41] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[04:45:41] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/13M8qw
[04:45:41] <ghrust> 13rust/06auto 14546e2ae 15Vadim Chugunov: Added libstd and libextra unit tests to check-fast target.
[04:45:41] <ghrust> 13rust/06auto 1499345d8 15Vadim Chugunov: Fixed MemoryMap on Windows.
[04:45:41] <ghrust> 13rust/06auto 146828428 15Vadim Chugunov: Disabled failing parts of abs_sub() and frexp() unit tests on Windows.
[04:45:43] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[04:46:07] <Chef> Interesting, I've never used SingleCompile
[04:46:09] *** Joins: XyMa (user@4F5647EE.12FF1288.B4C97B2.IP)
[04:46:10] <sfackler> nsf: it's being replaced because stacking all generic parameters at the end of a path is super weird and confusing
[04:46:35] <sfackler> I think the for foo syntax is to identify that that type parameter is the self type
[04:46:38] <aatch> and it exposes implementation details.
[04:46:52] <nsf> and it's ugly because otherwise it's ambiguous and no one come up with a better syntax
[04:46:59] <Chef> I'm not sure how I can be much of a help, sorry.
[04:46:59] <pepper_chico> Chef, I've open this at the Syntastic repo https://github.com/scrooloose/syntastic/issues/779
[04:47:06] <nsf> hm..
[04:47:27] <aatch> nsf, there have been several propositions, this was pretty much the best one...
[04:47:33] <pepper_chico> Chef, don't you get compiler error reports through syntastic?
[04:47:33] <nsf> I see
[04:47:50] <aatch> nsf, most of the time you don't need it anyway, since type inference will handle it.
[04:47:51] <Chef> Yes, but they go away
[04:47:56] <nsf> well, ok then
[04:47:56] <pepper_chico> =/
[04:48:03] <nsf> yeah, I hope so
[04:48:04] <pepper_chico> mine don't
[04:48:07] <aatch> so `let foo : int = FromStr::from_str("123");`
[04:48:12] <Chef> What version of vim are you using?
[04:48:12] <nsf> thanks for clarifying
[04:48:22] <pepper_chico> 7.4 custom compiled
[04:48:27] <Chef> Hmm, same as you.
[04:48:46] <tikue_> aatch: what is the syntax change supposed to handle?
[04:48:50] <tikue_> aatch: is there a writeup around it
[04:49:04] <pepper_chico> my syntastic is a submodule of the YouCompleteMe plugin actually, IIRC, let me see
[04:49:41] <pepper_chico> no, it's its own plugin appart
[04:49:44] <aatch> tikue_, there have been a few write-ups, I don't have any links on hand though.
[04:49:47] <Chef> I have syntastic and youcompleteme as separate bundles in my .vimrc
[04:49:49] <Chef> Hm..
[04:50:02] <pepper_chico> yeah, me too
[04:50:14] <sfackler> tikue_: basically, if you had somethign like trait Foo<A, B> { fn foo<C>() -> Self }
[04:50:27] <pepper_chico> these stick error signals just happen with rust
[04:50:41] <sfackler> er, s/trait/struct
[04:50:52] <pepper_chico> no problems with other languages
[04:51:11] <sfackler> before you'd call Foo::foo<A, B, C, SELF_TYPE>()
[04:51:16] <aatch> tikue_, but the major focus is that it isn't really obvious that the 'Self' type is a parameter.
[04:51:27] <Chef> Syntastic picks up my syntax errors, but they go away after correcting them
[04:51:40] <aatch> and in fact, it isn't really, it just happens to be implemented as such because it's convenient.
[04:51:41] <Chef> I don't compile files from vim
[04:51:49] <Chef> Is that the issue?
[04:52:11] <tikue_> hm
[04:52:33] <nsf> basically it does what in C++ would be: FromStr<int>::from_str("123")
[04:52:39] <nsf> as far as I understande
[04:52:45] <nsf> s/e//
[04:52:57] <aatch> nsf, more-or-less, yes.
[04:53:16] * strcat doesn't understand why `for` is required
[04:53:26] <nsf> easier to parse
[04:53:30] <aatch> Though it's actually (in rust) Foo::foo::<A, B, C>;
[04:53:46] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[04:53:56] <nsf> but on the other hand it shouldn't be ambiguous
[04:54:10] <pepper_chico> Chef, hmm, I'm not being that dynamical with Rust right now
[04:54:20] <pepper_chico> I compile, and then see the errors
[04:54:27] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[04:54:31] <pepper_chico> in vim itself
[04:54:31] *** Joins: dbaupp (Thunderbir@446B964E.D5A1DCF.37681C44.IP)
[04:54:33] <Chef> Do you have an example of the file and errors?
[04:54:37] <sfackler> i think the for syntax is there to make it clear that it's the type for Self, not the type for a normal type parameter
[04:54:51] <Chef> Syntastic performs a check after I type :w
[04:54:56] <strcat> sfackler: ah right
[04:55:24] <pepper_chico> Chef, it's just any sample I write with an error, and then corrects afterwards
[04:55:31] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[04:55:33] <Chef> Very odd..
[04:55:39] <pepper_chico> =/
[04:56:11] *** Quits: dbaupp (Thunderbir@446B964E.D5A1DCF.37681C44.IP) (Ping timeout)
[04:56:33] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[04:56:49] *** Joins: tcr_ (tcr@moz-B01A0668.mycingular.net)
[04:57:07] *** Quits: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net) (Ping timeout)
[04:58:46] *** Joins: jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[05:00:45] <tikue_> rusti: use std::rand; use std::rand::RngUtil; let v = rand::rng().shuffle([1, 2, 3, 4, 5, 6, 7, 8, 9, 0]); v.sorted()
[05:00:47] -rusti- <anon>:5:109: 6:5 error: type `~[int]` does not implement any method in scope named `sorted`
[05:00:48] -rusti- <anon>:5          use std::rand; use std::rand::RngUtil; let v = rand::rng().shuffle([1, 2, 3, 4, 5, 6, 7, 8, 9, 0]); v.sorted()
[05:00:48] -rusti- <anon>:6     };
[05:00:48] -rusti- error: aborting due to previous error
[05:00:48] -rusti- application terminated with error code 101
[05:00:57] <tikue_> rusti: use std::rand; use std::rand::RngUtil; let v = rand::rng().shuffle([1, 2, 3, 4, 5, 6, 7, 8, 9, 0]); v
[05:00:59] -rusti- ~[2, 5, 9, 8, 3, 7, 4, 1, 6, 0]
[05:01:14] <tikue_> rusti: use std::rand; use std::rand::RngUtil; rand::rng().shuffle([1, 2, 3, 4, 5, 6, 7, 8, 9, 0]).sort()
[05:01:15] -rusti- <anon>:5:48: 6:5 error: type `~[int]` does not implement any method in scope named `sort`
[05:01:15] -rusti- <anon>:5          use std::rand; use std::rand::RngUtil; rand::rng().shuffle([1, 2, 3, 4, 5, 6, 7, 8, 9, 0]).sort()
[05:01:15] -rusti- <anon>:6     };
[05:01:15] -rusti- error: aborting due to previous error
[05:01:16] -rusti- application terminated with error code 101
[05:01:33] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Client exited)
[05:01:36] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[05:03:33] *** Joins: sammykim (Mibbit@B4104EBB.3CC170B1.1E14B209.IP)
[05:03:37] *** Quits: tcr_ (tcr@moz-B01A0668.mycingular.net) (Connection reset by peer)
[05:04:13] <tikue_> there are a lot of sorts in extra::sort -- which one is the "default"
[05:04:24] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.1)
[05:04:29] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[05:04:29] <sammykim> Is there a shortcut key to switch taps in mibbit on web?
[05:04:35] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[05:04:41] *** Joins: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net)
[05:04:55] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[05:06:31] *** Quits: sgreenlay (sgreenlay@moz-E795FA5B.hsd1.wa.comcast.net) (Quit: Linkinus - http://linkinus.com)
[05:07:04] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[05:07:14] <brson> tikue_: yeah, that's kind of a tragedy. i'd go try tim_sort, unless it crashes
[05:07:29] <brson> tim_sort is supposed to be great, but i recall that implementation being pretty scary
[05:07:52] <brson> though now that i'm looking at it it doesn't look too bad
[05:07:57] <tikue_> brson: tim_sort is what i've been using in the profiler. it works fine, just i recently changed up the profiler a bit and now it uses a TreeMap, which currently doesn't implement mut_iter()
[05:08:18] <tikue_> so I was going to use something that returned a new vec
[05:08:31] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:08:44] <tikue_> but yeah i was just curious what the default was
[05:09:00] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:09:08] <brson> we really need to be more opinionated here. 4 sort routines is too much
[05:09:11] <tikue_> i feel like it'd be nice to have a simple sort() 
[05:09:13] <brson> 1 stable sort, 1 unstable sort is enough
[05:09:13] <tikue_> or sorted()
[05:09:29] <tikue_> maybe a method on a vector too?
[05:09:37] <tikue_> fn sort(&mut self)
[05:09:53] <tikue_> then a sorted() in extra::sort or something
[05:09:53] *** Quits: chozza (Mibbit@DDF2FC12.F553F9.14D5B978.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[05:10:15] <tikue_> sorted<T>(&[T]) -> ~[T]
[05:10:39] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Ping timeout)
[05:10:41] *** Parts: sammykim (Mibbit@B4104EBB.3CC170B1.1E14B209.IP) ()
[05:10:42] *** Quits: wilkie (wilkie@moz-CEF5E490.pitbpa.fios.verizon.net) (Connection reset by peer)
[05:10:47] *** Joins: sammykim (Mibbit@B4104EBB.3CC170B1.1E14B209.IP)
[05:11:07] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[05:11:19] <tikue_> or i guess it'd be
[05:11:39] *** Joins: recrack (ymin@5AB4884B.FCC4549.14D5B978.IP)
[05:11:59] <tikue_> oh wait
[05:12:24] <tikue_> rusti: use std::rand; use std::rand::RngUtil; rand::rng().shuffle([1, 2, 3, 4, 5, 6, 7, 8, 9, 0]).qsort()
[05:12:26] -rusti- <anon>:5:48: 6:5 error: type `~[int]` does not implement any method in scope named `qsort`
[05:12:27] -rusti- <anon>:5          use std::rand; use std::rand::RngUtil; rand::rng().shuffle([1, 2, 3, 4, 5, 6, 7, 8, 9, 0]).qsort()
[05:12:27] -rusti- <anon>:6     };
[05:12:27] -rusti- error: aborting due to previous error
[05:12:27] -rusti- application terminated with error code 101
[05:12:41] <tikue_> rusti: use std::rand; use std::rand::RngUtil; use extra::sort::Sort; rand::rng().shuffle([1, 2, 3, 4, 5, 6, 7, 8, 9, 0]).qsort()
[05:12:43] -rusti- ()
[05:13:04] <tikue_> rusti: use std::rand; use std::rand::RngUtil; use extra::sort::Sort; let mut v = rand::rng().shuffle([1, 2, 3, 4, 5, 6, 7, 8, 9, 0]); v.qsort(); v
[05:13:05] -rusti- ~[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
[05:13:18] <tikue_> imo rename qsort --> sort
[05:13:20] <pepper_chico> Chef, oh, I've discovered, through :w, I get the error reports, and no problem, the stick error sign keep when I use compilationâ€¦
[05:13:29] <Chef> I see.
[05:13:39] <pepper_chico> it's seems a kind of different sign
[05:13:44] <pepper_chico> for error compilation
[05:13:50] <Chef> I've installed SingleCompile with your patch
[05:13:52] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[05:13:58] <pepper_chico> then for syntastic
[05:14:18] <Chef> So if you disable syntastic..
[05:14:30] <pepper_chico> maybe it's not an syntatic issue
[05:14:44] <pepper_chico> let's see..
[05:16:21] <pepper_chico> I get error reports with Single Compile only
[05:16:40] <Chef> Heh, well there's the problem then
[05:16:43] <pepper_chico> and no problems for then to vanish after correction
[05:16:50] <pepper_chico> =)
[05:17:05] <pepper_chico> I think the problem is when the two are working
[05:17:17] *** Parts: steven_is_false (user@C5B76363.1FF1EBF8.1ECA502.IP) (ERC Version 5.3 (IRC client for Emacs))
[05:17:23] <pepper_chico> with just single compile
[05:17:36] <pepper_chico> when there's an error I get just one
[05:17:38] <pepper_chico> >
[05:17:46] <pepper_chico> in the offending line
[05:18:00] <pepper_chico> but when the two are enabled I get
[05:18:01] <pepper_chico> >>
[05:18:15] *** Joins: tcr_ (tcr@moz-B01A0668.mycingular.net)
[05:18:17] <pepper_chico> and that >> don't go away
[05:19:06] *** Quits: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net) (Ping timeout)
[05:19:13] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[05:20:13] <pepper_chico> I SingleCompile errors signs go away normally, but when just itself is enabled
[05:20:29] <pepper_chico> s/I SingleCompile/The SingleCompile/
[05:21:40] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[05:22:00] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[05:23:06] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[05:23:13] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Connection reset by peer)
[05:23:29] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[05:25:26] *** Quits: kasey (Kasey@moz-569EFDE8.dhcp.trlk.ca.charter.com) (Quit: Leaving.)
[05:25:34] *** Joins: kasey (Kasey@moz-569EFDE8.dhcp.trlk.ca.charter.com)
[05:26:10] *** Joins: chee (chee@moz-E5A0DD8.org)
[05:27:15] *** Quits: kasey (Kasey@moz-569EFDE8.dhcp.trlk.ca.charter.com) (Ping timeout)
[05:29:48] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[05:30:23] *** Quits: XyMa (user@4F5647EE.12FF1288.B4C97B2.IP) (Ping timeout)
[05:30:40] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[05:30:40] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14b69ab6b to 1489d0400: 02http://git.io/N3iJvQ
[05:30:40] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[05:30:41] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[05:30:42] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/E9WRAg
[05:30:42] <ghrust> 13rust/06auto 144fd1e31 15Brian Anderson: rustc: Fix cstack lint for default methods. Closes #8753
[05:30:42] <ghrust> 13rust/06auto 14e4e7f52 15bors: auto merge of #8796 : brson/rust/cstack, r=catamorphism
[05:30:42] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[05:31:43] *** Parts: Chef (Chef@moz-4C317041.dsl.teksavvy.com) (night)
[05:32:57] *** Quits: jfbk (textual@moz-EEA9CFB3.nyc.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[05:33:08] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[05:33:13] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[05:33:29] *** Joins: jfbk (textual@moz-EEA9CFB3.nyc.res.rr.com)
[05:35:18] <ChrisMorgan> RFC: should the Vim syntax file highlight *all* types/enum variants/whatnot from the prelude?
[05:35:23] *** Quits: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP) (Ping timeout)
[05:36:07] *** Joins: XyMa (user@4F5647EE.12FF1288.B4C97B2.IP)
[05:37:11] *** Joins: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP)
[05:39:37] *** Quits: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP) (Quit: Textual IRC Client: www.textualapp.com)
[05:39:41] <ChrisMorgan> At present it's a limited set, those which are probably among the most frequently used, but the extent of it is unclear.
[05:39:53] *** Joins: wilkie (wilkie@moz-CEF5E490.pitbpa.fios.verizon.net)
[05:40:08] <ChrisMorgan> I don't think "none" is the right answer; it's useful highlighting them. All? That's my current feeling.
[05:40:34] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[05:40:42] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[05:40:42] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14e4e7f52 to 1489d0400: 02http://git.io/N3iJvQ
[05:40:42] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[05:40:43] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[05:40:43] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/GqwsGg
[05:40:43] <ghrust> 13rust/06auto 14ec759b2 15Alex Crichton: Remove @io::Writer from sys/repr/reflect...
[05:40:43] <ghrust> 13rust/06auto 14d310237 15bors: auto merge of #8820 : alexcrichton/rust/no-io-writer, r=brson...
[05:40:44] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[05:41:53] *** Joins: steven_is_false (user@C5B76363.1FF1EBF8.1ECA502.IP)
[05:42:31] <steven_is_false> Hello. I have a trait with a static method. Did the syntax for using the trait's static method change? Foo::bar::<T>() doesn't work anymore.
[05:43:12] <nsf> steven_is_false: it's in the process of changing
[05:43:17] <steven_is_false> nsf: Cool.
[05:43:23] <nsf> it will be Foo::<for T>::bar()
[05:43:28] <nsf> but afaik it doesn't work yet
[05:43:35] *** Joins: kasey (Kasey@moz-569EFDE8.dhcp.trlk.ca.charter.com)
[05:43:44] <nsf> so you need to use a variable for now
[05:43:54] <steven_is_false> nsf: Isn't it premature to remove Foo::bar::<T>() right now?
[05:44:09] <steven_is_false> I guess I can use the hacky workaround for now though.
[05:44:13] <nsf> I wouldn't do that definitely :)
[05:44:57] <steven_is_false> Rust is going to be an awesome language. In 1.0.
[05:45:03] <nsf> maybe
[05:45:14] <tikue_> it's already awesome 
[05:45:27] <nsf> today people have broader demands
[05:45:38] <nsf> language is not enough, a really good standard library is a must
[05:45:44] <steven_is_false> It's heavily flawed but it'll be good eventually.
[05:46:05] *** Quits: themgt (themgt@moz-F6F0180D.baf.movistar.cl) (Ping timeout)
[05:46:08] <steven_is_false> That reminds me. I should really work on making the shared state concurrency mechanisms better.
[05:46:14] <SiegeLord> I'd say that it'll definitely get only better, but the closure overhaul is worrying
[05:46:14] <Eridius> steven_is_false: I think it was removed now because pcwalton prefers to get breaking changes in as early as possible, even if the replacement isn't ready yet
[05:46:37] <Eridius> also he wanted people to stop adding uses of the now-broken syntax, because each new use was one more thing he'd have to fix when his replacement was ready
[05:47:06] <Eridius> sadly, the workaround right now only works if the return type of the static method is derived from the trait impl type
[05:47:07] *** Joins: themgt (themgt@moz-FF89B771.baf.movistar.cl)
[05:47:11] <Eridius> (is there a name for the type a trait is impl'd on?)
[05:47:54] *** Joins: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP)
[05:48:05] <olsonjeffery> Self
[05:48:21] <olsonjeffery> fn eq(&self, Self other) -> bool;
[05:48:25] <tikue_> i wouldn't say rust is "heavily flawed"
[05:48:31] <olsonjeffery> &Self other, even
[05:48:34] <ChrisMorgan> Anyone have any comments on adding all things in the prelude to the Vim syntax file?
[05:48:56] *** Quits: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net) (Quit: eholk)
[05:48:57] <olsonjeffery> ChrisMorgan: use emacs? :P
[05:48:58] *** Quits: victorporof (victorporo@moz-BAE8D951.pck.nerim.net) (Quit: victorporof)
[05:49:11] <olsonjeffery> i kid, i kid. evil-mode user, here.
[05:49:19] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[05:50:10] <steven_is_false> I wonder if there could be some kind of source document that would autogenerate data for both the Emacs, and the Vim modes?
[05:50:39] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[05:50:39] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14d310237 to 1489d0400: 02http://git.io/N3iJvQ
[05:50:39] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[05:50:42] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[05:50:42] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/QZBTrA
[05:50:42] <ghrust> 13rust/06auto 143f791ac 15Huon Wilson: Make the unit-test framework check RUST_TEST_TASKS over RUST_THREADS....
[05:50:42] <ghrust> 13rust/06auto 14d52c688 15bors: auto merge of #8823 : huonw/rust/6233, r=brson...
[05:50:43] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[05:51:39] *** Quits: jfbk (textual@moz-EEA9CFB3.nyc.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[05:52:28] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[05:52:28] *** ChanServ sets mode: +ao brson brson
[05:53:37] *** Joins: victorporof (victorporo@moz-18BD542A.pck.nerim.net)
[05:55:35] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[05:57:19] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[05:57:50] *** Parts: steven_is_false (user@C5B76363.1FF1EBF8.1ECA502.IP) (ERC Version 5.3 (IRC client for Emacs))
[05:59:06] <ChrisMorgan> Why are std::{int, uint, i8, i16, i32, i64, u8, u16, u32, u64} not imported the prelude?
[05:59:20] <strcat> modules aren't imported there anymore
[05:59:23] <ChrisMorgan> (And f32, f64.)
[05:59:34] <ChrisMorgan> But why not?
[05:59:53] <strcat> because it was a persistent source of confusion
[05:59:54] <ChrisMorgan> (Oh, and char, str and bool.)
[06:00:04] *** Quits: valenting (Thunderbir@8758046C.84D5EFD5.FB866788.IP) (Ping timeout)
[06:00:04] <strcat> and there's not much that's going to actually be in those modules
[06:00:10] <ChrisMorgan> I would have thought it was more confusing *not* to have it?
[06:00:20] <strcat> why is it confusing?
[06:00:35] <ChrisMorgan> "Why is ``int::from_bytes`` not working? ``int`` works fine..."
[06:00:42] <strcat> from_bytes will be from a trait
[06:00:57] <ChrisMorgan> That is an example of a function in the int module.
[06:01:03] <strcat> a deprecated one ;p
[06:01:13] <ChrisMorgan> In that case, FromBytes::from_bytes is an inline call to int::from_bytes.
[06:01:30] <strcat> the duplicate free functions are obsolete
[06:01:37] <strcat> rust didn't used to have methods
[06:02:18] *** Quits: mihneadb (mihneadb@moz-329F29A3.lightspeed.sntcca.sbcglobal.net) (Input/output error)
[06:02:43] <olsonjeffery> strcat: interesting consequence would be the vtable abstraction cost once trait objects get into heavier use...
[06:02:52] *** Joins: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net)
[06:03:20] <strcat> olsonjeffery: I don't think trait objects will ever be heavily used
[06:03:21] *** Joins: joshua_ (joshua@moz-45967CBE.emarhavil.com)
[06:03:36] <strcat> there's no cost to having trait methods rather than functions
[06:03:46] <strcat> trait objects are totally optional
[06:03:46] <olsonjeffery> strcat: they're used heavily in newrt for indirection between types returned from the IoFactory and the underlying impl (now its just libuv, but others eventually)
[06:03:53] <olsonjeffery> trait objets will be the lynchpin so that
[06:05:09] <olsonjeffery> although right now there's a kludgey three-way hack between RtioFoo, UvFoo and its consumer in rt::io , because newrt preceeded *working* trait objets
[06:05:18] <olsonjeffery> but it was designed to, obviously, rely on them quite a bit
[06:05:21] *** Quits: XyMa (user@4F5647EE.12FF1288.B4C97B2.IP) (Ping timeout)
[06:05:49] *** Joins: XyMa (user@4F5647EE.12FF1288.B4C97B2.IP)
[06:05:51] <olsonjeffery> (as an aside, the file io work ive landed doesn't use the newtype hack that you see eg `pub struct RtioTcpStreamObject = UvTcpStream;`
[06:06:02] *** Quits: huseby (huseby@8F761026.B5EF4AF6.E96CA9D8.IP) (Quit: Leaving)
[06:06:28] <olsonjeffery> because i happened to do that work after ~Trait was working. the rest of the stuff in rtio/uvio needs to be ported to not use them as well
[06:06:52] *** Quits: tcr_ (tcr@moz-B01A0668.mycingular.net) (Connection reset by peer)
[06:06:59] <olsonjeffery> my bad
[06:07:06] <olsonjeffery> pub type FooObject = UvFoo;
[06:07:34] <olsonjeffery> pub type RtioFooObject = uvio::UvFoo;
[06:09:56] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[06:13:51] *** Quits: tikue_ (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net) (Quit: tikue_)
[06:14:10] <mark_edward> strcat: why don't you think trait objects will be used much?
[06:14:51] <mark_edward> games and game engines use a ton of similar vtable hijink
[06:15:46] *** Quits: chee (chee@moz-E5A0DD8.org) (Quit: i am quit)
[06:15:49] *** Quits: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP) (Ping timeout)
[06:17:12] <ChrisMorgan> Seems a bit weird that one is permitted with a local variable to shadow a function (e.g. "print") or enum (e.g. "Option"), but not an enum variant (e.g. "None").
[06:17:33] <ChrisMorgan> AND, one *is* able to shadow an enum variant with the variant ofa *new* enum.
[06:18:15] *** Joins: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP)
[06:19:23] *** Joins: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net)
[06:21:00] <Eridius> rusti: let int = 3; int
[06:21:01] -rusti- 3
[06:21:09] <Eridius> you can shadow Option because variables and types are in different namespaces
[06:21:41] <Eridius> rusti: let None = 3; None
[06:21:42] -rusti- <anon>:5:13: 5:17 error: declaration of `None` shadows an enum variant or unit-like struct in scope
[06:21:42] -rusti- <anon>:5          let None = 3; None
[06:21:42] -rusti-                       ^~~~
[06:21:42] -rusti- error: aborting due to previous error
[06:21:42] -rusti- application terminated with error code 101
[06:22:00] *** Quits: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP) (Ping timeout)
[06:24:20] <strcat> mark_edward: because I think in most cases you'll probably use enums
[06:24:34] <strcat> unless you want to make a library with something externally pluggable
[06:24:49] <strcat> haskell gets by without type class objects
[06:24:51] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[06:25:04] <mark_edward> haskell isn't aiming for the same space as rust
[06:25:33] *** Quits: XyMa (user@4F5647EE.12FF1288.B4C97B2.IP) (Ping timeout)
[06:25:35] <mark_edward> how would you support eve 15 say, monster types in an enum. having a trait object would be much easier
[06:26:20] <SiegeLord> A large number of people eschew any sorts of vtables for games...
[06:26:23] <strcat> except that you suddenly end up having to use @mut everywhere because by-value no longer works
[06:26:36] <strcat> trait object -> no by-value self, no Self
[06:27:53] *** Quits: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca) (Connection reset by peer)
[06:28:12] <mark_edward> what do you need @mut for? what's wrong with owned pointers and references. im no guru but in most C++ code 90%+ of *T could be replaced with std::unique_ptr<T>
[06:28:30] *** Joins: XyMa (user@4F5647EE.12FF1288.B4C97B2.IP)
[06:28:43] *** Joins: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP)
[06:28:59] <strcat> you're not going to get far with unique pointers + references and no copying
[06:29:04] <strcat> and no swapping (by-value)
[06:29:05] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[06:29:05] *** ChanServ sets mode: +o pnkfelix
[06:29:21] <jeaye> bjz: ping
[06:29:31] <bjz> jeaye: pong
[06:29:42] <mark_edward> strcat: wat is swapping by value?
[06:29:49] <jeaye> bjz: What did `extern mod gl (name = "gl_ptr");` do?
[06:29:55] <jeaye> The name attrib
[06:30:07] <strcat> mark_edward: all swapping is
[06:30:12] <bjz> jeaye: is that still in the instructions?
[06:30:13] <zeuxcg> SiegeLord: nah, almost everybody is using them for at least 5 years now
[06:30:25] <jeaye> bjz: Nope
[06:30:28] *** Quits: robarnold (rob@BD56354E.DB510C09.6E370BFC.IP) (Ping timeout)
[06:30:30] <bjz> jeaye: it aliases the import
[06:30:31] <mark_edward> rusti: let (a, b) = (1, 10); let (b, a) = (a, b)
[06:30:31] -rusti- <anon>:6:4: 6:5 error: expected `;` but found `}`
[06:30:32] -rusti- <anon>:6     };
[06:30:32] -rusti-              ^
[06:30:32] -rusti- application terminated with error code 101
[06:30:41] <zeuxcg> dynamic dispatch is useful if applied right
[06:30:47] <strcat> sure
[06:30:48] <zeuxcg> even in games :)
[06:30:50] <SiegeLord> zeuxcg: The fad I've been seeing is component based systems
[06:30:55] <jeaye> bjz: I'm trying to import it with a different name and I remembered seeing that in the history
[06:31:02] <nsf> vtables? hash tables! people write games in lua :D
[06:31:10] <mark_edward> rusti: let (a, b) = (1, 10); let (b, a) = (a, b); (a, b)
[06:31:10] <zeuxcg> SiegeLord: component-based systems are frequently full of vtable-based dynamic dispatch as well :)
[06:31:11] -rusti- (10, 1)
[06:31:17] <strcat> nsf: I'm not talking about performance
[06:31:28] <zeuxcg> SiegeLord: also not many games actually use them, and most that do use Unity
[06:31:29] <strcat> but rather the pain you're going to experience from using trait objects excessively
[06:31:31] <mark_edward> rusti: let (a, b) = (~1, ~10); let (b, a) = (a, b); (a, b)
[06:31:33] -rusti- (~10, ~1)
[06:31:35] *** Joins: SingingBoyo (brandon@4DF3381A.51F4D838.4F048BDC.IP)
[06:31:41] <mark_edward> looks like a swap to me
[06:31:46] <strcat> mark_edward: it's not a swap
[06:31:51] <strcat> you're just making new variable names
[06:32:03] <strcat> your b and a are shadowing the old a and b
[06:32:18] <bjz> jeaye: http://static.rust-lang.org/doc/tutorial.html#crates-and-the-module-system 17.9
[06:32:26] <strcat> you can't move out of a field like that, try it
[06:32:38] <bjz> jeaye: extern mod my_farm(name = "farm", vers = "2.5");
[06:32:40] <mark_edward> why would i want to?
[06:32:45] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[06:33:07] <SiegeLord> Let me check my implementation... I guess I do use a little bit of dynamic dispatch for my components
[06:33:16] <strcat> mark_edward: you're not actually swapping anything there
[06:33:25] <SiegeLord> But for all I know, the tools Rust provides might remove the need for them
[06:33:31] <strcat> try writing a data structure in rust - any sort of tree
[06:33:47] <strcat> swaps, copies or mutable managed pointers - pick one
[06:34:04] <strcat> there's no other way to write (safe) rust code once it gets even a bit complex
[06:34:42] <jeaye> bjz: Yeah, not what I'm looking for. :| I understand what you were doing with name though; thanks for the link
[06:34:52] <jeaye> I'm looking for the `use foo = bar;` of extern mods
[06:35:20] <strcat> with trait objects you give up the ability to use swaps and also the ability to clone (uses Self)
[06:35:40] <bjz> rusti: use foo = std; foo::num::sqrt(2.3)
[06:35:41] -rusti- 1.51657509
[06:35:46] <strcat> so you're going to be forced into @mut beyond trivial library cases
[06:35:48] <bjz> jeaye: ^?
[06:35:50] <nsf> strcat: what about extra::Rc?
[06:36:03] <jeaye> bjz: I already have a module in q3 called gl
[06:36:14] <strcat> nsf: well that's essentially the same thing with deterministic destruction
[06:36:20] <jeaye> bjz: So I want to being gl-rs in as something else.
[06:36:25] <mark_edward> strcat: show me what you mean by a swap in rust. im familiar in C++ from implementing move constructors, but Rust's semantics seem a lot different
[06:36:31] <strcat> nsf: mutability + shared ownership -> you give up all the static mutability guarantees of rust, and have dynamic failures
[06:36:36] <bjz> jeaye: can't you use that thing?
[06:36:45] <strcat> mark_edward: swapping the places of two things in memory
[06:36:55] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[06:37:02] <bjz> jeaye: extern mod gl_loader (name = "gl");
[06:37:14] <jeaye> bjz: Ah, I see what you mean now.
[06:37:21] * jeaye facepalms
[06:37:22] <strcat> mark_edward: if you have a non-copyable type in a field and you need to replace it with another, what do you do?
[06:37:37] <strcat> any time you have a tree, queue, vector, etc. that's all you're doing
[06:37:39] <strcat> swaps.
[06:37:47] <bjz> rusti: mod a { pub use b = std; } a::b::num::sqrt(2.3)
[06:37:48] -rusti- 1.51657509
[06:37:55] <bjz> jeaye: ^?
[06:38:03] <strcat> nsf: and also any performance advantages
[06:38:12] *** Parts: z0w0 (corrz@C3BC732A.9254B1A4.F22F0031.IP) ()
[06:38:15] <jeaye> bjz: extern mod gl_loader (name = "gl"); should work just fine
[06:38:18] <jeaye> Thanks again
[06:38:29] <bjz> jeaye: you can also do extern mods in sub modules
[06:38:44] <bjz> coolies :)
[06:38:49] <strcat> nsf: if it's immutable it's not that bad ;p
[06:39:14] <nsf> strcat: I don't know about others but I don't expect any kind of magic from rust
[06:39:33] <nsf> i.e. super safe, super fast, super easy
[06:39:45] <nsf> won't happen
[06:40:30] <strcat> you can usually just do things by-value (structs, enums, pre-made containers) + sparingly use borrowed pointers
[06:40:33] <nsf> the real question is how much all these safety nets get into your way of doing things
[06:40:51] *** Quits: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net) (Ping timeout)
[06:41:31] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[06:42:55] *** Quits: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP) (Ping timeout)
[06:42:55] <jeaye> bjz: 1300 errors :|
[06:42:57] <jeaye> hah
[06:43:09] <jeaye> Moving from rust-opengles to gl-rs
[06:43:10] <bjz> O_O
[06:43:29] <bjz> :P
[06:43:43] <bjz> are you using the es wrapper fns?
[06:44:23] <jeaye> nope
[06:44:40] <jeaye> Because I don't want to maintain those.
[06:44:50] <jeaye> I'll just port it to gl-rs once and for all.
[06:44:57] <jeaye> Then hopefully be done with it.
[06:46:41] <bjz> mmk
[06:47:09] <bjz> jeaye: you could always call your gl module gfx or something
[06:48:23] <jeaye> Yeah, I likely will.
[06:48:37] <jeaye> Gonna get this working first, then name changes will be easy
[06:49:01] *** Joins: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net)
[06:49:51] * bjz is glad to be of service
[06:51:14] *** Quits: XyMa (user@4F5647EE.12FF1288.B4C97B2.IP) (Ping timeout)
[06:53:11] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: sleep)
[06:53:52] <sfackler> does anyone have any idea why one of these doesn't compile but the other does? https://gist.github.com/sfackler/6dd824be7ff247a002b7
[06:55:22] *** Joins: dbaupp (Thunderbir@moz-EAA09AEF.lns20.syd7.internode.on.net)
[06:55:45] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[06:55:45] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14d52c688 to 1489d0400: 02http://git.io/N3iJvQ
[06:55:45] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[06:55:46] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[06:55:46] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/f-eW1Q
[06:55:46] <ghrust> 13rust/06auto 144fd1e31 15Brian Anderson: rustc: Fix cstack lint for default methods. Closes #8753
[06:55:46] <ghrust> 13rust/06auto 14a269d04 15bors: auto merge of #8796 : brson/rust/cstack, r=catamorphism
[06:55:47] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[06:56:32] *** Quits: igl (igl@moz-74010307.adsl.alicedsl.de) (Ping timeout)
[06:56:45] *** Joins: igl (igl@moz-74010307.adsl.alicedsl.de)
[06:57:42] *** Quits: victorporof (victorporo@moz-18BD542A.pck.nerim.net) (Quit: victorporof)
[06:57:43] <mark_edward> you know what'd be cool
[06:57:50] <mark_edward> type based type constraints
[06:58:17] <mark_edward> like impl<A, B, T: (A,B)> Foo for Bar {}
[06:58:36] <mark_edward> like impl<A, B, T: (A,B)> Foo<T> for Bar<T> {} i mean
[06:59:53] <dbaupp> mark_edward: Foo<(A,B)> for Bar<(A,B)> ?
[06:59:55] <jeaye> bjz: types should be `pub used` in gl-rs
[07:00:12] <jeaye> gl::GLint seems much better than gl::types::GLint
[07:00:41] <Eridius> mark_edward: what would be the benefit of that? You wouldn't know what you could actually _do_ with T
[07:00:46] <mark_edward> dbaupp: oops.... didn't think of that
[07:00:57] *** Quits: jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Quit: zzz)
[07:01:17] <acrichto> sfackler: if you change Cell to Option does that change anything?
[07:01:37] <mark_edward> Eridius: say i wanted to implement std::container::Map and std::container::Set using the same underlying struct
[07:01:50] <sfackler> acrichto: still errors
[07:01:57] <mark_edward> so i could implement Set using <T> and map using (A,B)
[07:01:59] <mark_edward> i guess
[07:02:02] <dbaupp> mark_edward: it's not entirely silly; Haskell has something similar for its contraints: you can write `a ~ Int => a` which is essentially the same as `Int`
[07:02:03] <mark_edward> i dunno
[07:02:41] <mark_edward> but then <T> ad <(A,B)> would overlap...
[07:02:55] *** Quits: garthk (garth@moz-B118B14A.static.internode.on.net) (Client exited)
[07:02:55] *** Quits: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net) (Client exited)
[07:03:15] <Eridius> implement Set as Map<Key,()>?
[07:03:15] <mark_edward> or would they? no i don't think so
[07:03:33] *** Joins: mihneadb (mihneadb@moz-329F29A3.lightspeed.sntcca.sbcglobal.net)
[07:03:42] <mark_edward> Eridius: or map as Set<(Key, Value)>!
[07:04:10] <acrichto> sfackler: if you take off <'a> and have &'self self it works
[07:04:11] <dbaupp> mark_edward: the stdlib uses Map<Key,()>
[07:04:16] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[07:04:17] <Eridius> mark_edward: except the key and value are treated differently
[07:04:25] <mark_edward> dbaupp: i know. 
[07:04:32] *** Joins: garthk (garth@moz-B118B14A.static.internode.on.net)
[07:04:34] <mark_edward> Eridius: what do you mean?
[07:04:48] <acrichto> sfackler: I don't know why though... it may be the special handling of the 'self lifetime, but that's just a guess
[07:04:58] <dbaupp> acrichto: I don't think it's specific to 'self
[07:05:03] <Eridius> mark_edward: if Map is Set<(Key, Value)>, then you're applying the set properties over the type (Key,Value), which means each pair (Key,Value) is unique instead of just each Key
[07:05:06] <sfackler> acrichto: thanks!
[07:05:10] *** Joins: squiddy (squiddy@moz-34DADDC7.adsl.alicedsl.de)
[07:05:11] <Eridius> and you're hashing and comparing each (Key,Value) pair instead of just each Key
[07:05:16] <Eridius> which is quite problematic
[07:05:24] <mark_edward> Eridius: oh right!  i didn't think of that
[07:05:35] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[07:05:38] <dbaupp> sfackler: it's essentially writing a function foo<'a, 'self>(&'a Foo<'self>) -> Bar<'a> {}, which doesn't work, because the 'a and 'self need to match
[07:05:50] <dbaupp> since Bar is { &'self Foo<'self> }
[07:05:59] <zol> http://hastebin.com/doqebicama.rust -- how do you implement a generic struct? I get an error when I try to run this code.
[07:06:04] *** Joins: victorporof (victorporo@DA4ABEAF.1DE10CA8.D8E68FF6.IP)
[07:06:09] <dbaupp> so putting 'self does work
[07:06:18] <dbaupp> I have no idea why it only breaks for one though :(
[07:06:31] <dbaupp> zol: impl<T> Goal<T> { ... }
[07:06:35] <sfackler> i'll file a bug i guess
[07:06:56] <dbaupp> zol: impl<T: Any + Traits + Here> Goal<T> { ... } also
[07:06:59] <acrichto> sfackler: cc nikomatsakis, he may know more about it
[07:07:23] <acrichto> dbaupp: yeah b/c &'a self should imply 'self == 'a I think
[07:07:37] <zol> dbaupp: Cool, thanks!
[07:07:52] <dbaupp> acrichto: I don't think so: 'self shouldn't have any special treatment
[07:08:07] <dbaupp> I do think that &'a Foo<'b> should imply 'a < 'b though
[07:08:15] <dbaupp> * <= 
[07:08:21] * dbaupp has run into that problem
[07:08:35] <acrichto> ah yes, thinking about it for a sec you're right
[07:08:41] <acrichto> in this case 'a <= 'self
[07:09:20] *** Quits: KindOne (KindOne@moz-4BE1FBCE.dynamic.ip.windstream.net) (Ping timeout)
[07:10:10] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[07:10:37] *** Quits: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net) (Quit: eatkinson)
[07:12:13] <dbaupp> $ RUST_THREADS=foo rustc
[07:12:13] <dbaupp> You've met with a terrible fate, haven't you?
[07:12:13] <dbaupp> fatal runtime error: runtime tls key not initialized
[07:12:13] <dbaupp> Aborted
[07:12:27] *** Joins: victorporof_ (victorporo@87C1F78E.1DE10CA8.D8E68FF6.IP)
[07:12:29] <ChrisMorgan> Ahh... haven't seen one of them for a while :-)
[07:12:49] *** flaper87|afk is now known as flaper87
[07:13:13] <dbaupp> I guess it's from the .unwrap() in std::rt::util::default_sched_threads, and fail!() not being supported that early.
[07:13:22] *** Joins: KindOne (KindOne@moz-F991F831.dynamic.ip.windstream.net)
[07:13:31] *** Quits: victorporof (victorporo@DA4ABEAF.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[07:13:31] <mark_edward> do we have stacks in rust?
[07:13:59] <mark_edward> (the data structure)
[07:14:06] <dbaupp> mark_edward: ~[] + .push & .pop
[07:14:08] <acrichto> mark_edward: vectors should suffice
[07:14:16] <zeuxcg> rusti: 128u8 + 128u8
[07:14:17] -rusti- 0
[07:14:19] <mark_edward> yeah that sounds good
[07:20:47] <dbaupp>     let ptr: *mut *mut c_void = &mut void_ptr;
[07:20:47] <dbaupp>     let ptr: *mut ~T = ptr as *mut ~T;
[07:20:47] <dbaupp>     let ptr: *mut T = &mut **ptr;
[07:20:47] <dbaupp>     return ptr;
[07:20:49] <dbaupp> o_O
[07:20:59] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[07:21:00] *** Quits: SingingBoyo (brandon@4DF3381A.51F4D838.4F048BDC.IP) (Input/output error)
[07:21:02] <ChrisMorgan> O_o
[07:22:21] <acrichto> dbaupp: that's terrifying
[07:25:10] <flaper87> man ...
[07:27:08] <ChrisMorgan> So, is the goal of that to turn a C void* into an *mut T? Or something else?
[07:27:16] <zol> http://hastebin.com/hikaxajeci.coffee -- Trying to make a constructor for a generic struct in a generic impl but I'm getting this error which is dumbfounding me. 
[07:28:31] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[07:28:33] <acrichto> zol: when constructing a struct you don't need type parameters, so it'd be "Goal {" instead of "Goal<T> {"
[07:29:24] <zol> acrichto: Oh, this feels like magic. 
[07:29:59] <dbaupp> I'm pretty sure &mut *(void_ptr as *T) would work
[07:30:03] <mark_edward> how would you swap values that can only be moved?
[07:30:19] <zol> acrichto: Thank you.
[07:30:31] <acrichto> mark_edward: util::swap
[07:30:41] <mark_edward> thanks!
[07:30:42] <acrichto> std::util::swap
[07:30:45] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[07:30:45] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14a269d04 to 1489d0400: 02http://git.io/N3iJvQ
[07:30:45] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[07:30:46] <dbaupp> rusti: let mut x = ~[1,2,3]; let mut y = ~[4,5,6]; std::util::swap(&mut x, &mut y); (x,y)
[07:30:46] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[07:30:46] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/OCsxWQ
[07:30:46] <ghrust> 13rust/06auto 14546e2ae 15Vadim Chugunov: Added libstd and libextra unit tests to check-fast target.
[07:30:46] <ghrust> 13rust/06auto 1499345d8 15Vadim Chugunov: Fixed MemoryMap on Windows.
[07:30:47] <ghrust> 13rust/06auto 146828428 15Vadim Chugunov: Disabled failing parts of abs_sub() and frexp() unit tests on Windows.
[07:30:47] -rusti- (~[4, 5, 6], ~[1, 2, 3])
[07:30:49] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[07:31:06] <ChrisMorgan> dbaupp: but that last line was "let ptr: *mut T"â€”*mut T, not &mut T?
[07:31:27] <dbaupp> ChrisMorgan: oh, even easier then!
[07:31:37] <dbaupp> void_ptr as *mut T
[07:31:46] <ChrisMorgan> Yeah. That's what I thought.
[07:32:08] * ChrisMorgan has no idea if/how FFI works with &
[07:32:33] <dbaupp> &T is (essentially) just *T with a non-null guarantee
[07:32:41] <acrichto> hmmm, we may not be able to leave address_insignificant on statics generated for format!
[07:32:52] <dbaupp> acrichto: :( why?
[07:32:54] *** Quits: recrack (ymin@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[07:33:07] <acrichto> fn foo<T>() { static a: int = 3; }
[07:33:17] <acrichto> the function's code isn't generated at compile-time, but the static is
[07:33:25] *** Joins: sebcrozet (sebcrozet@moz-2517AE39.w80-13.abo.wanadoo.fr)
[07:33:39] <acrichto> so if that's in a library, and the static gets merged with something else, then when you instantiate it and attempt to link against the static you find that it's no longer there
[07:33:48] <acrichto> and then linker errors start cropping up about missing statics
[07:34:07] <acrichto> I don't think that LLVM can merge statics and also point all names at the new static
[07:34:26] <dbaupp> ah
[07:34:26] <acrichto> I could also be using LLVM wrong though
[07:34:40] <acrichto> I could never figure out how to get it to merge without the `internal` linkage type which is equivalent to C's static
[07:34:48] <acrichto> so that's what could actually be causing linkage problems
[07:35:04] <dbaupp> pnkfelix: btw, I took your suggestion on https://github.com/mozilla/rust/pull/8819 and edited "fixes #5261" into the pr text so it'll be closed automatically
[07:35:11] <ChrisMorgan> dbaupp: don't you have to worry about who owns it, though?
[07:35:23] <dbaupp> ChrisMorgan: for FFI? not really
[07:35:34] <dbaupp> all bets are off as soon as you leave Rust
[07:35:39] <ChrisMorgan> The compiler is clever enough?
[07:35:50] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[07:35:54] * dbaupp doesn't really understand what the question is
[07:36:11] <ChrisMorgan> The matter of lifetimes.
[07:36:18] *** Joins: recrack (ymin@5AB4884B.FCC4549.14D5B978.IP)
[07:36:27] <ChrisMorgan> I mean, clever enough to pretend it's OK and permit it to be valid for any (or suitable?) lifetime.
[07:36:30] <dbaupp> as in `extern { fn foo(&int); }` ?
[07:36:39] <dbaupp> (vs *int)
[07:36:54] <acrichto> rusti: #[nolink] extern { fn foo(a: &int); }
[07:36:55] -rusti- ()
[07:37:10] <acrichto> rusti: #[nolink] extern { fn foo<'a>(a: &'a int) -> &'a uint; }
[07:37:10] -rusti- ()
[07:38:38] *** Quits: mihneadb (mihneadb@moz-329F29A3.lightspeed.sntcca.sbcglobal.net) (Ping timeout)
[07:38:58] <mark_edward> what types can you call .cmp() on?
[07:39:12] <dbaupp> mark_edward: TotalOrd ones
[07:39:48] *** Joins: mihneadb (mihneadb@moz-329F29A3.lightspeed.sntcca.sbcglobal.net)
[07:39:48] <mark_edward> what's the difference between Ord and Total Ord?
[07:40:00] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[07:40:46] <pnkfelix> dbaupp: Does it actually enable all the std and core tests?
[07:42:27] <dbaupp> pnkfelix: almost all yes
[07:42:58] <dbaupp> pnkfelix: there are a few ones that don't work, but they've all been filed and have FIXMEs
[07:43:31] <unfoldl> What am I doing wrong in this: https://gist.github.com/f9edeeb4b373627e251e
[07:43:31] <unfoldl> I'm getting "error: cannot infer an appropriate lifetime due to conflicting requirements"
[07:43:42] <unfoldl> *?
[07:44:01] *** Joins: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP)
[07:44:55] <acrichto> unfoldl: you're creating a stack closure which is only valid for the lifetime of the function that it's in (function char), and you're trying to return it, but the lifetime cannot outlive that of char
[07:45:17] <unfoldl> oh..
[07:45:50] <unfoldl> Is it possible to make it outlive the "char" function?
[07:46:11] <Eridius> unfoldl: use an owned closure? ~fn
[07:47:13] <dbaupp> unfoldl: you're utkarshkukreti on github?
[07:47:23] <unfoldl> Eridius: thanks!
[07:47:26] <unfoldl> dbaupp: yes
[07:47:57] <dbaupp> unfoldl: heh, cool. (I just closed the issue you filed: unfortunately it's very easy to trigger and so there are a lot of duplicates of it :) )
[07:48:20] <dbaupp> mark_edward: Ord doesn't guarantee that a < b || a >= b, TotalOrd does
[07:48:29] <dbaupp> (essentially)
[07:49:01] <unfoldl> dbaupp: sorry, I should have searched the error message before reporting
[07:49:03] <mark_edward> is that supposed to be an exclusive or?
[07:49:07] <zol> How do you make abstract functions..? 
[07:49:24] <unfoldl> dbaupp: and thanks for the explanation!
[07:49:31] *** Quits: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP) (Quit: Textual IRC Client: www.textualapp.com)
[07:49:31] <dbaupp> mark_edward: I guess? but a type with a < b && a >= b would be particularly badly behaved!
[07:49:38] *** Quits: mib_9uybip (mib_9uybip@FFC4F26.497EC1B8.5EFB9497.IP) (Client exited)
[07:49:43] <dbaupp> zol: a generic function?
[07:49:47] <unfoldl> time to try make a parser combinator :)
[07:50:17] <dbaupp> rusti: fn foo<T: Add>(x: T, y: T) { x + y + x } (foo(1i, 2), foo(1.5, 5.4))
[07:50:18] -rusti- <anon>:5:19: 5:22 error: wrong number of type arguments: expected 2 but found 0
[07:50:18] -rusti- <anon>:5          fn foo<T: Add>(x: T, y: T) { x + y + x } (foo(1i, 2), foo(1.5, 5.4))
[07:50:18] -rusti-                             ^~~
[07:50:18] -rusti- application terminated with error code 101
[07:50:31] <dbaupp> rusti: fn foo<T: Add<T,T>>(x: T, y: T) { x + y + x } (foo(1i, 2), foo(1.5, 5.4))
[07:50:32] -rusti- <anon>:5:43: 5:52 error: mismatched types: expected `()` but found `T` (expected () but found type parameter)
[07:50:32] -rusti- <anon>:5          fn foo<T: Add<T,T>>(x: T, y: T) { x + y + x } (foo(1i, 2), foo(1.5, 5.4))
[07:50:32] -rusti-                                                     ^~~~~~~~~
[07:50:32] -rusti- error: aborting due to previous error
[07:50:33] -rusti- application terminated with error code 101
[07:50:38] <dbaupp> rusti: fn foo<T: Add<T,T>>(x: T, y: T) -> T { x + y + x } (foo(1i, 2), foo(1.5, 5.4))
[07:50:40] -rusti- (4, 8.4)
[07:50:40] <zol> dbaupp: I'm trying to create the equivalent of: An abstract generic class, with some abstract functions (that base classes must implement).
[07:50:53] <dbaupp> zol: ah: you want a trait
[07:51:16] *** Joins: mib_9uybip (mib_9uybip@FFC4F26.497EC1B8.5EFB9497.IP)
[07:51:23] <dbaupp> (at least, that's as close as you'll get in Rust; there's not really a concept of inheritance like "real" OO languages have)
[07:51:41] <zol> dbaupp: So far I've made a generic struct, and implemented it. Do I want to add a trait and impl it for the generic struct? 
[07:52:07] <dbaupp> zol: it depends: are you going to have multiple different structs using that functionality?
[07:52:22] <dbaupp> if yes, trait; if no, plain impl.
[07:52:47] <zol> dbaupp: Aha, thanks. What's the difference between the two? 
[07:55:24] <dbaupp> zol: a trait can be thought of "behaviours many different types have", a plain impl is "behaviours that only this type has"
[07:56:46] *** Joins: doomlord (doomlod@moz-13E69BC8.range86-180.btcentralplus.com)
[07:57:45] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[07:58:31] <zol> dbaupp: Thanks!
[08:00:25] *** Joins: squiddy_ (squiddy@moz-A342B116.adsl.alicedsl.de)
[08:01:23] *** Quits: squiddy (squiddy@moz-34DADDC7.adsl.alicedsl.de) (Ping timeout)
[08:04:56] *** Quits: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net) (Ping timeout)
[08:06:10] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[08:07:02] <dbaupp> zol: as an example: many different types can be compared, so eq and lt (etc) are methods in traits; but .is_none only makes sense for Option, so it's a method in a plain impl
[08:12:57] *** Quits: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP) (Ping timeout)
[08:13:55] <dbaupp> :( mac bots are unhappy: one just bus error'd
[08:14:28] *** Joins: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP)
[08:15:15] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[08:15:45] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[08:15:46] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14efa11ac to 1489d0400: 02http://git.io/N3iJvQ
[08:15:46] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[08:15:48] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[08:15:48] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/CeoJ6w
[08:15:48] <ghrust> 13rust/06auto 1497f61e7 15Alex Crichton: Remove @io::Writer from sys/repr/reflect...
[08:15:48] <ghrust> 13rust/06auto 1463bd7a6 15bors: auto merge of #8820 : alexcrichton/rust/no-io-writer, r=brson...
[08:15:49] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[08:16:41] *** Joins: jaen (jaen@moz-5C0D1159.neoplus.adsl.tpnet.pl)
[08:18:25] *** Quits: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP) (Ping timeout)
[08:20:27] *** Joins: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP)
[08:20:43] *** Joins: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP)
[08:22:19] *** Joins: CarpNet (ac@moz-FD24B77.sohonet.co.uk)
[08:22:59] <zol> The convention when writing functions is to use lower case letters and words separated by underscores, right? 
[08:23:14] <heftig> snake_case, yes
[08:23:20] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[08:23:35] *** Joins: z0w0 (zack@moz-7E6DC3A.lnse2.woo.bigpond.net.au)
[08:24:16] <zol> heftig: Thank you.
[08:24:41] <mcpherrin> why is it called snake case?
[08:24:52] <mcpherrin> I've never heard the term but google agrees with you
[08:25:16] *** Joins: fabiand (fabiand@moz-B1FD9C2A.pools.arcor-ip.net)
[08:25:39] <zol> Are there exceptions in Rust? 
[08:26:03] <mcpherrin> not exactly in the c++/java sense
[08:26:16] <heftig> what case would there be for making a language case-insensitive?
[08:26:42] <mcpherrin> zol: the long answer is http://static.rust-lang.org/doc/tutorial-conditions.html
[08:27:01] <zol> mcpherrin: Much appreciated, thank you!
[08:27:28] <dbaupp> heftig: fortran?
[08:27:30] *** Quits: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP) (Ping timeout)
[08:27:36] <heftig> dbaupp: or pascal, I guess
[08:27:47] <dbaupp> sql too
[08:28:12] <heftig> windows and osx have case-insensitive filesystems, but their primary programming languages are case-sensitive
[08:32:36] *** Joins: davbo (dave@moz-3FFA637C.oucs.ox.ac.uk)
[08:37:01] *** Joins: sigma (sigma@moz-4748CD01.range31-54.btcentralplus.com)
[08:38:48] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[08:40:20] *** Joins: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP)
[08:42:59] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[08:44:22] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[08:44:48] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[08:44:55] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Ping timeout)
[08:48:48] *** Quits: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP) (Ping timeout)
[08:49:31] *** Joins: donri (dag@moz-9BB61102.tbcn.telia.com)
[08:49:56] *** Quits: mihneadb (mihneadb@moz-329F29A3.lightspeed.sntcca.sbcglobal.net) (Input/output error)
[08:51:59] *** Joins: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP)
[08:52:19] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[09:00:12] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[09:00:18] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[09:03:00] *** Quits: mib_9uybip (mib_9uybip@FFC4F26.497EC1B8.5EFB9497.IP) (Client exited)
[09:04:24] <myname> one guy once had problems witz the filesystem in windows
[09:04:46] <myname> he wrote something like file.move(lowercase(file))
[09:04:57] *** Quits: dwhyte (dwhyte@DFA0622C.2732CD06.B7FCEB19.IP) (Client exited)
[09:05:00] <myname> turns out, move is implemented as copy & remove
[09:05:10] <myname> so he deleted his file
[09:10:03] <heftig> should be implemented as rename, if possible
[09:10:31] *** Quits: rfw (rfw@moz-C65A114.rfw.name) (Quit: WeeChat 0.3.7)
[09:13:02] *** Joins: rfw (rfw@moz-C65A114.rfw.name)
[09:13:41] <myname> there is a rename which actually does what he intended to do
[09:15:21] <unfoldl> Am I over-complicating stuff in line 5 and 6 here? https://gist.github.com/80961fea845145881149#file-irc_q2-rs-L5-L6
[09:15:55] <klutzy> I sometimes write python script like open(fn, 'w').write(convert(open(fn, 'r'))) then realizes the problem after run
[09:15:56] *** Joins: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net)
[09:18:30] *** Quits: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net) (Client exited)
[09:20:46] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[09:20:46] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1463bd7a6 to 1489d0400: 02http://git.io/N3iJvQ
[09:20:46] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[09:20:47] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[09:20:48] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/6x56lA
[09:20:48] <ghrust> 13rust/06auto 143f791ac 15Huon Wilson: Make the unit-test framework check RUST_TEST_TASKS over RUST_THREADS....
[09:20:48] <ghrust> 13rust/06auto 1454af901 15bors: auto merge of #8823 : huonw/rust/6233, r=brson...
[09:20:48] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[09:24:23] *** Quits: kasey (Kasey@moz-569EFDE8.dhcp.trlk.ca.charter.com) (Quit: Leaving.)
[09:24:30] *** Joins: kasey (Kasey@moz-569EFDE8.dhcp.trlk.ca.charter.com)
[09:25:04] *** Joins: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net)
[09:26:10] *** Quits: kasey (Kasey@moz-569EFDE8.dhcp.trlk.ca.charter.com) (Ping timeout)
[09:26:16] <Yoric> Someone asked me whether there were plans to use Rust for GPGPU. Do we have something cooking on that topic?
[09:27:01] *** Quits: recrack (ymin@5AB4884B.FCC4549.14D5B978.IP) (Quit: Lost terminal)
[09:27:17] <sigma> someone did... something in that vein a while ago iirc
[09:27:42] <sigma> http://blog.theincredibleholk.org/blog/2012/12/05/compiling-rust-for-gpus/
[09:28:13] <Yoric> Ah, I even see a paper on the topic: http://hgpu.org/?p=9601
[09:29:22] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[09:32:07] *** Joins: Ms2ger (Ms2ger@moz-982ABA97.adsl-dyn.isp.belgacom.be)
[09:32:38] *** Joins: LRN (LRN@moz-50DF30B.nationalcablenetworks.ru)
[09:34:29] <LRN> How do i get a &[u8] from a ~[u8] that is stored in a ~Struct?
[09:34:43] <LRN> I've tried this - http://pastebin.com/mU0SnzAC , but it doesn't work, and i'm completely clueless
[09:35:35] <LRN> brb
[09:39:12] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[09:39:21] *** Joins: logicalparadox (logicalpar@863CE67F.4983D09A.921A050B.IP)
[09:41:55] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[09:42:16] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[09:42:22] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[09:45:37] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[09:46:38] <engla> LRN: the trait and the impl must have the same signature for  fn data, including the lifetime parameter <'r>
[09:46:47] *** Quits: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net) (Client exited)
[09:46:52] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[09:47:18] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[09:47:54] <LRN> engla, added 'r to the trait, now i get: error: mismatched types: expected `&'r [u8]` but found `~[u8]` ([] storage differs: expected &'r  but found ~)
[09:47:57] *** Joins: sk (sk@60A96C0.50B2D8C.78DD174B.IP)
[09:48:33] <engla> right, you can call .as_slice() directly . self.somevector.as_slice()
[09:48:58] <LRN> whe-e-e-e!
[09:51:03] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[09:51:37] *** Quits: logicalparadox (logicalpar@863CE67F.4983D09A.921A050B.IP) (Ping timeout)
[09:52:41] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Client exited)
[09:58:32] *** Quits: fabiand (fabiand@moz-B1FD9C2A.pools.arcor-ip.net) (Quit: Verlassend)
[10:01:42] *** Joins: jviereck (Adium@moz-418862B2.dip0.t-ipconnect.de)
[10:02:10] *** Quits: klapaucius (klapaucius@272B8F8B.5692770D.BB41F968.IP) (Quit: klapaucius)
[10:04:41] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[10:04:45] *** Joins: fyolnish_ (fyolnish@moz-BE2BAE5B.miinet.jp)
[10:05:31] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Ping timeout)
[10:06:25] *** Quits: fyolnish_ (fyolnish@moz-BE2BAE5B.miinet.jp) (Ping timeout)
[10:07:57] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[10:08:09] <dbaupp> o_O now linux is segfaulting too
[10:10:44] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[10:10:44] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1454af901 to 1489d0400: 02http://git.io/N3iJvQ
[10:10:44] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[10:10:46] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[10:10:47] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/fUIBHQ
[10:10:47] <ghrust> 13rust/06auto 1460e8480 15Anders Kaseorg: rust-mode: Default rust-indent-offset to 4, not default-tab-width...
[10:10:47] <ghrust> 13rust/06auto 14518bd07 15bors: auto merge of #8830 : andersk/rust/indent-4, r=catamorphism...
[10:10:47] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[10:13:50] *** Joins: sonwow (sonwow@5AB4884B.FCC4549.14D5B978.IP)
[10:16:36] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[10:17:06] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[10:18:14] *** Quits: jviereck (Adium@moz-418862B2.dip0.t-ipconnect.de) (Quit: Leaving.)
[10:18:30] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Client exited)
[10:18:59] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[10:19:20] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[10:19:58] *** Quits: quasisphere (btw@DC685DC2.94302614.1D0D91FF.IP) (Ping timeout)
[10:21:07] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[10:23:39] *** Joins: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net)
[10:23:52] *** Joins: jviereck (Adium@moz-418862B2.dip0.t-ipconnect.de)
[10:29:17] *** Quits: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP) (Ping timeout)
[10:31:46] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Ping timeout)
[10:32:35] <unfoldl> What could be causing the error "error: cannot capture variable of type `&Parser<'self,A>`, which does not fulfill `Send`, in a bounded closure" in line 12 (Sorry, these are kind of hard to Google.)
[10:32:38] <unfoldl> https://gist.github.com/utkarshkukreti/465dac17f0f9d3312494#file-irc_q2-rs-L12
[10:32:44] *** Quits: jviereck (Adium@moz-418862B2.dip0.t-ipconnect.de) (Quit: Leaving.)
[10:34:57] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[10:37:01] *** Joins: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP)
[10:39:53] <zol> When you derive a struct that has an implementation, will the derived struct share that implementation? 
[10:40:36] <doomlord> i dont think rust can derive, you embed instead
[10:41:32] *** Joins: logicalparadox (logicalpar@863CE67F.4983D09A.921A050B.IP)
[10:41:46] *** Joins: fabiand (fabiand@moz-27A7DF83.adsl.alicedsl.de)
[10:41:47] *** Quits: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP) (Ping timeout)
[10:43:21] *** Joins: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP)
[10:43:47] <dbaupp> unfoldl: firstly ~'self doesn't make sense: it should just be Parser<A>(~fn(..) -> ...)
[10:43:52] *** Quits: sonwow (sonwow@5AB4884B.FCC4549.14D5B978.IP) (Quit: leaving)
[10:44:30] <dbaupp> unfoldl: and you'll need other to either be ~Parser or Parser: the error message is tell you that you can't capture by reference in a ~fn
[10:44:55] <dbaupp> that is, anything you capture in the closure has to be Send-able, and &T isn't.
[10:45:03] <zol> doomlord: I know there is trait inheritance, but I'm not sure how it works with structs. I mean, if I need a base struct, and then need a trait that implements it, and then inherit from that trait twice, but in the second inherited version I'd like to add an array. 
[10:45:06] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[10:45:31] <zol> doomlord: Think I'm going about this the wrong way!
[10:46:01] <doomlord> i think if you make a new trait inheriting other traits, those still look for any impl's on a particular struct, if you're using that struct
[10:46:31] <doomlord> code using *traits* isn't concrete, its expecting something to be provided elsewhere
[10:46:41] <doomlord> (i think ^, i'm not 100% on the jargon myself..)
[10:47:14] <doomlord> the only difference to traditional OOP languages is you can decouple the implementations and 'gather' them in a trait, thats the way i think about it
[10:47:32] <zol> doomlord: Aha, thanks :)
[10:47:33] <doomlord> ^decouple and scatter the impls... the trait or trait instantiation ? gathers them
[10:47:39] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[10:48:45] *** Joins: mib_tm1uxc (Mibbit@moz-993E0FAA.v4.ngi.it)
[10:48:57] <doomlord> code using traits is either generics.. not real code until its instantiated (called with an actual type) .. or using trait objects, which are tables of function pointers
[10:49:16] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[10:50:04] <doomlord> compared to  inheritance in other languages, you might need to write a little boilerplate where you embedded one struct in another
[10:50:28] <doomlord> but it doesn't have any multiple-inheritance problems and everything goes through the same mechanism
[10:51:57] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[10:52:06] *** Joins: robertknight (robertknig@moz-53D8EF63.range81-151.btcentralplus.com)
[10:52:51] *** Quits: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net) (Client exited)
[10:53:13] *** Quits: logicalparadox (logicalpar@863CE67F.4983D09A.921A050B.IP) (Ping timeout)
[10:53:34] *** Joins: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net)
[10:55:57] *** Joins: vodik (simon@moz-457C9D39.dsl.bell.ca)
[10:57:24] *** Joins: five (five@moz-993E0FAA.v4.ngi.it)
[10:57:40] *** Quits: mib_tm1uxc (Mibbit@moz-993E0FAA.v4.ngi.it) (Quit: http://www.mibbit.com ajax IRC Client)
[10:58:37] *** Quits: sk (sk@60A96C0.50B2D8C.78DD174B.IP) (Ping timeout)
[11:03:05] <LRN> Is it possible to create an Arc from a borrowed pointer? From an owned pointer?
[11:03:59] <dbaupp> LRN: only owned: it has to satisfy Send
[11:04:10] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[11:04:22] <dbaupp> (well, you can create one from a &'static, since that is Send too, but no other & is.)
[11:04:31] <LRN> So if i Arc::new(myownedpointer), i will lose ownership?
[11:04:44] *** Joins: sk (sk@76BFB31C.71F9CB99.78DD174B.IP)
[11:04:45] *** Joins: jviereck (Adium@moz-418862B2.dip0.t-ipconnect.de)
[11:05:41] <dbaupp> yeah, Arc::new takes by value, so ~ gets moved into it
[11:05:55] <LRN> m-m-m-
[11:06:22] <LRN> Thing is, i'm trying to implement a library, and it spawns a task to work on a caller-provided [u8]
[11:06:46] <LRN> task needs a read-only access to that [u8], and caller may want to keep using [u8] (also read-only)
[11:07:11] <LRN> but i don't want to force caller to create an Arc - that would expose implementation details that caller shouldn't need to be bothered with
[11:08:25] *** Joins: Earnestea (earnest@moz-F387F877.dyn.plus.net)
[11:08:42] <LRN> Mm-m-m...maybe take away caller's data and return some object that would provide an interface to the Arc?
[11:09:21] <dbaupp> e.g. just return the Arc itself?
[11:09:53] <LRN> no, i'm already creating an object, might as well just access Arc through it
[11:11:14] *** Quits: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP) (Ping timeout)
[11:11:57] *** Quits: busylizzy (lisa@85228838.12D0DC84.211374C4.IP) (Ping timeout)
[11:12:24] *** Quits: jaen (jaen@moz-5C0D1159.neoplus.adsl.tpnet.pl) (Ping timeout)
[11:13:26] *** Joins: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP)
[11:14:43] *** Joins: bytewise (bytewise@moz-4A801D04.unitymediagroup.de)
[11:16:03] *** Quits: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP) (Ping timeout)
[11:17:15] *** Joins: busylizzy (lisa@85228838.12D0DC84.211374C4.IP)
[11:18:52] <kimundi> LRN: That sounds like the right approach
[11:20:20] *** Joins: Florob (Florob@moz-39532932.de)
[11:20:45] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[11:20:45] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/fUIBHQ
[11:20:45] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[11:22:41] *** Quits: sp3d (a@moz-6F12212B.fidnet.com) (Ping timeout)
[11:25:43] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[11:25:44] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/ZQPffg
[11:25:44] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[11:25:46] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[11:25:46] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/DSn32Q
[11:25:46] <ghrust> 13rust/06auto 144502b10 15Tim Chevalier: rustc: Change a stray error! statement to debug!
[11:25:46] <ghrust> 13rust/06auto 14017d6f2 15Tim Chevalier: std: Add a file-renaming function to std::os
[11:25:47] <ghrust> 13rust/06auto 14e0cec5a 15Tim Chevalier: rustpkg: Add a not_a_workspace condition
[11:25:49] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[11:27:30] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[11:28:28] *** Quits: busylizzy (lisa@85228838.12D0DC84.211374C4.IP) (Ping timeout)
[11:29:13] *** Joins: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net)
[11:29:31] *** Joins: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP)
[11:30:37] *** Joins: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com)
[11:30:43] *** Joins: busylizzy (lisa@85228838.12D0DC84.211374C4.IP)
[11:31:46] *** Joins: maxli (maxli@13F2CEC5.7672369.D8E68FF6.IP)
[11:31:58] *** Quits: maxli (maxli@13F2CEC5.7672369.D8E68FF6.IP) (Connection reset by peer)
[11:32:00] *** Joins: maxli1 (maxli@13F2CEC5.7672369.D8E68FF6.IP)
[11:32:36] *** Quits: maxli1 (maxli@13F2CEC5.7672369.D8E68FF6.IP) (Quit: Leaving.)
[11:32:41] *** Joins: maxli (maxli@13F2CEC5.7672369.D8E68FF6.IP)
[11:35:21] *** Quits: busylizzy (lisa@85228838.12D0DC84.211374C4.IP) (Ping timeout)
[11:35:43] *** Joins: busylizzy (lisa@85228838.12D0DC84.211374C4.IP)
[11:36:35] *** Quits: robertknight (robertknig@moz-53D8EF63.range81-151.btcentralplus.com) (Ping timeout)
[11:36:53] *** Quits: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net) (Client exited)
[11:41:44] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.1)
[11:41:51] *** Quits: busylizzy (lisa@85228838.12D0DC84.211374C4.IP) (Ping timeout)
[11:42:34] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[11:42:50] <darkf> hmm I get this error if I use macros and exprs, but not if I manually expand it http://pastebin.com/FaCMBxVx
[11:43:17] <darkf> on a side note macros kind of suck and I can't find a way to quote an operator
[11:44:10] <doomlord> havn't tried recently, have they got multi-element macros yet
[11:44:14] <dbaupp> doomlord: 
[11:44:16] <dbaupp> *no
[11:44:38] *** Quits: themgt (themgt@moz-FF89B771.baf.movistar.cl) (Ping timeout)
[11:45:02] *** Joins: sp3d (a@moz-6F12212B.fidnet.com)
[11:45:08] <dbaupp> darkf: it's because the same expression gets put in multiple places, so "both" instances of it get the same type (since they're the same expression); hence type error.
[11:45:11] <nsf> also no one notices indentation madness in rust code?
[11:45:13] <dbaupp> darkf: file a bug. :)
[11:45:19] <darkf> dbaupp: haha, thought so
[11:45:26] <dbaupp> nsf: the rightward drift?
[11:45:29] <nsf> yes
[11:45:34] * dbaupp battles it when he can
[11:45:53] <nsf> seems like rust code has more indent levels typically than any other language I've seen
[11:45:56] <dbaupp> matches are good at running of the edge of the editor unfortunately :(
[11:46:06] <darkf> I also ran into another bug while trying to hack this 
[11:46:13] <darkf> but I'm not sure what to file it as really
[11:46:23] *** Quits: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP) (Ping timeout)
[11:46:24] <darkf> http://pastebin.com/VBaHDYGe
[11:46:27] <doomlord> nsf, ever tried a lisp ... :)
[11:46:33] <nsf> :D
[11:47:19] <cmr> nsf: yeah, avoiding rightward drift is also a design goal.
[11:47:21] <dbaupp> darkf: heh, file that one as "ICE with name conflict in macro" or something
[11:47:28] <cmr> pcwalton in particular despises it.
[11:47:33] <nsf> cmr: good :)
[11:47:42] <dbaupp> cmr: I heard that you were planning on working on the bencher
[11:47:43] <darkf> alrighty
[11:47:45] * dbaupp is excited
[11:47:46] <cmr> dbaupp: I do!
[11:47:52] <dbaupp> cmr: can I help?
[11:48:08] <cmr> I am also going to try and get the builders running on my uni's open source lab mainframe
[11:48:17] <dbaupp> that's allowed?
[11:48:17] <cmr> (yes, literally an IBM mainframe: won in a competition)
[11:48:24] *** Quits: tupshin (quassel@moz-E7B03838.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com) (Ping timeout)
[11:48:26] <cmr> with permission yeah
[11:48:29] <doomlord> i was noticing lots of indenting with match stuff on options, solution seemed to be things like "unwrap_or_default.."
[11:48:31] <darkf> dbaupp: should I file a bug about adding an operator type to macros or is that stupid?
[11:48:32] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[11:48:34] <dbaupp> cmr: ah, cool.
[11:48:35] *** Joins: busylizzy (lisa@85228838.12D0DC84.211374C4.IP)
[11:48:37] <engla> you get more nested blocks with expression-based code
[11:48:43] *** Joins: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net)
[11:48:51] <dbaupp> darkf: it's not supit
[11:48:53] <dbaupp> *stupid
[11:48:58] <darkf> alright great
[11:48:59] <cmr> dbaupp: writing some sort of distributed job manager would be ideal.
[11:49:00] * dbaupp is stupid at typing
[11:49:12] <doomlord> nesting vs more named temporaries.. i think i prefer nesting
[11:49:16] <dbaupp> cmr: distributed == network distributed?
[11:49:23] <cmr> just a basic "ask for a commit, build commit, push results to NFS, tell broker you're done"
[11:49:25] <cmr> dbaupp: yeah
[11:49:27] <doomlord> i like expression based code
[11:49:36] <engla> same doomlord, in most cases
[11:50:13] <cmr> dbaupp: I tried writing one with celery but it didn't really work out :(
[11:50:14] <dbaupp> cmr: hm, not sure I'm prepared to commit to helping with something that complicated right now, maybe in a few days (got other things to finish up) :(
[11:50:20] <nsf> yes, expression based code is nice 
[11:50:21] <cmr> dbaupp: yeah np
[11:50:27] *** Joins: tupshin (quassel@moz-E7B03838.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com)
[11:50:27] <doomlord> nsf - you made 'godit' ?
[11:50:31] <nsf> yes
[11:50:39] <doomlord> and you suggest tabsize= 8 ? :)
[11:50:44] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[11:50:45] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14f90421d to 14518bd07: 02http://git.io/N3iJvQ
[11:50:45] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[11:50:45] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[11:50:45] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/MAUg7w
[11:50:45] <ghrust> 13rust/06auto 143f791ac 15Huon Wilson: Make the unit-test framework check RUST_TEST_TASKS over RUST_THREADS....
[11:50:45] <ghrust> 13rust/06auto 1433d6572 15bors: auto merge of #8823 : huonw/rust/6233, r=brson...
[11:50:46] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[11:50:51] <nsf> I don't suggest it, just using it
[11:50:51] <dbaupp> nsf: are we getting rudit sometime? :P
[11:51:11] <doomlord> for rust would you switch godit to tabsize=4
[11:51:17] <nsf> no :)
[11:51:36] <doomlord> just add a little flexibility to your religion :)
[11:51:42] <cmr> doomlord: fork it!
[11:51:43] <nsf> doomlord: if you use godit, you can do so though, tab size is defined as a const there
[11:51:51] <cmr> just like religion
[11:51:52] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[11:51:53] <nsf> so, it's a one liner
[11:52:16] <doomlord> i get the intent ok :) minimal settings :)
[11:52:25] *** Quits: jviereck (Adium@moz-418862B2.dip0.t-ipconnect.de) (Quit: Leaving.)
[11:52:26] <nsf> _no_ settings
[11:52:35] <doomlord> nonetheless i must proseletyze my religion, tabsize=4 :)
[11:52:37] <zol> One of the things I love the most with Rust so far is that it's so trivial to test something and store it! New file -> fn main() { /*the test/*} -> save -> rust run myfile.rs :)
[11:52:40] <nsf> that's why I'm against adding variable tabsize
[11:53:06] *** Joins: jviereck (Adium@moz-418862B2.dip0.t-ipconnect.de)
[11:53:12] <doomlord> fair enough, a source-based editor with no settings gui is a nice idea
[11:53:16] <cmr> zol: you can also query rusti here
[11:53:39] <doomlord> i suppose you can just have the 'settings' in one easy to manage sourcefile
[11:53:41] *** Quits: busylizzy (lisa@85228838.12D0DC84.211374C4.IP) (Ping timeout)
[11:53:57] *** Joins: busylizzy (lisa@85228838.12D0DC84.211374C4.IP)
[11:54:04] <nsf> doomlord: maybe, but at this point I don't care about it much
[11:54:13] <zol> cmr: Yes, but rusti doesn't have a history, right? 
[11:54:29] <nsf> I mean it works for me as is and I won't probably change it in near future in any way
[11:54:33] <cmr> zol: I suppose not.
[11:55:08] <zol> cmr: I have terrible memory/confidence, so I really enjoy having these tiny files around to verify that I am correct. :)
[11:55:27] *** Quits: vodik (simon@moz-457C9D39.dsl.bell.ca) (Ping timeout)
[11:55:31] <engla> zol: it's easy to use  rust test as well
[11:55:36] <zol> cmr: Makes it easy learning Rust's corner cases as well. 
[11:55:39] <zol> engla: Rust test? 
[11:55:45] *** Joins: quasisphere (btw@DC685DC2.94302614.1D0D91FF.IP)
[11:56:13] <LRN> extern mod extra; use extra::arc::Arc; <- inresolved import. What am i doing wrong?
[11:56:15] *** Joins: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net)
[11:56:22] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[11:56:31] <dbaupp> LRN: I guess you have the extern mod statement in a submodule of the crate?
[11:56:32] *** Joins: SingingBoyo (SingingBoy@4DF3381A.51F4D838.4F048BDC.IP)
[11:56:53] <dbaupp> zol: `rust test foo.rs` will run any `#[test]` fns in it
[11:56:56] <engla> zol: "rust test" instead of "rust run" will test all functions marked #[test] fn test_me() { assert!(this.is_that()) }
[11:57:23] <nsf> doomlord: plus the idea wasn't really about having settings in the source code, I've made the tab as a const, because I knew some people hates 8-sized tabs
[11:57:26] <zol> Oh, cool - thank you both
[11:57:27] <LRN> dbaupp, yes, i guess?
[11:57:36] *** Quits: busylizzy (lisa@85228838.12D0DC84.211374C4.IP) (Quit: No Ping reply in 180 seconds.)
[11:57:39] <LRN> it's in a src/lib.rs
[11:57:39] <nsf> s/hates/hate/
[11:58:09] <dbaupp> LRN: what's the file you run rustc on? (that's the top of the crate)
[11:58:27] <LRN> i don't run rustc, i run rustpkg
[11:58:43] <dbaupp> LRN: oh!
[11:58:53] <dbaupp> then lib should be the top of the crate
[11:58:54] *** Joins: threecreepio (jdp@moz-1A9F0A3C.cust.bredband2.com)
[11:59:00] <dbaupp> code?
[11:59:07] <kimundi> LRN: When the extern mod is in a submodule, it's not at the top level of tbhe crate hierachy
[11:59:24] <engla> nsf: is your religion well aligned with gofmt?
[11:59:36] <kimundi> if it'S not at the top level of the module hierachy, then 'use extra::' won'T find it there
[11:59:41] <engla> what kind of indentation does gofmt use?
[11:59:45] <LRN> dbaupp, code isn't public yet
[12:00:04] <nsf> engla: gofmt certainly affected it, gofmt uses tabs for indent and spaces for alignment
[12:00:07] <kimundi> mod foo { extern mod extra; use foo::extra::arc::Arc; }
[12:00:26] <nsf> engla: but even before Go my code writing style was similar to the one gofmt uses
[12:00:30] <LRN> engla, gofmt is horrible! It places '{' at the same line as the statement that precedes it 
[12:00:30] <kimundi> or mod foo { extern mod extra; use self::extra::arc::Arc; }
[12:01:12] *** AutomatedTester|AFK is now known as AutomatedTester
[12:01:14] <kimundi> LRN: What's bad about that? :P
[12:01:21] <heftig> LRN: i prefer that style
[12:01:22] <doomlord> i like that myself    
[12:01:30] <dbaupp> <3 egyptian bracketing
[12:01:38] <nsf> LRN: it's not a gofmt issue, it's a Go limitation, it uses a very simple algo for inserting semicolons
[12:01:51] <nsf> so, you can't even put { on a separate line
[12:01:51] * kimundi watches as a source formating war starts to ignite
[12:01:53] <engla> I prefer newline before { for the function body
[12:01:55] <doomlord> semicolon insertion  seems like a bad idea to me
[12:02:08] <LRN> kimundi, the One True God of Programming forbade us from placing '{' at the same line as the previous statement! It's a sin!
[12:02:25] * dbaupp scolds LRN for worshipping false gods
[12:02:28] <doomlord> either go with { ; ; ; } or significant whitespace all the way, not half and half
[12:02:39] <nsf> doomlord: works well in practice
[12:03:48] <sp3d> doomlord: a good compromise leaves everybody mad
[12:03:55] <sp3d> :P
[12:04:40] <LRN> kimundi, xtern mod extra; use self::extra::arc::Arc; <-- that worked
[12:04:56] <LRN> s/xtern/extern/
[12:05:17] <doomlord> admitedly i think i could tolerate semicolon insertion, it woudnt be a deciding factor for me
[12:06:32] <nsf> in rust it'll be problematic as semicolon in some places changes the semantics (e.g. returns expression result or not)
[12:06:33] <LRN> bickering about semicolon insertion in a language that is full of '&', '@', '~' and '<whatver: morestuff>' is...shallow
[12:06:41] <LRN> (and what nsf said)
[12:06:51] <nsf> yeah, I would rather remove colons from rust
[12:06:55] <nsf> in type defs
[12:07:01] <nsf> oh, var defs I mean
[12:07:04] <nsf> let x: int
[12:07:07] <nsf> I hate that :)
[12:07:39] <nsf> having a lot of C++ and python experience in past it's hard to read it
[12:07:42] <nsf> but maybe a matter of habit
[12:07:44] <dbaupp> just use type inference ;)
[12:07:47] <kimundi> LRN: Wheew, I feared there where bugs that prevents that. Now I know that the module docs I wrote are in fact correct xD.
[12:08:01] <nsf> dbaupp: but in some places it's necessary, struct defs, function args
[12:08:03] *** Quits: dsirenko (mitra@8E712A0.54C21BA0.9F317420.IP) (Ping timeout)
[12:08:07] <dbaupp> nsf: oh true
[12:08:28] *** Joins: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP)
[12:09:09] <nsf> although having that colon there saves a lot of syntax problems
[12:09:13] <doomlord> i like the colons - it helps me read the fact it isn't C++
[12:09:24] <nsf> I know that since I wrote a parser for a Go-like language
[12:09:31] <doomlord> its much easier for me to read rust than go because of the colons
[12:09:53] *** Joins: dsirenko (mitra@8E712A0.54C21BA0.9F317420.IP)
[12:09:55] <doomlord> its also easy to make a syntax highlighter colour the types in rust :)
[12:10:17] <nsf> as I said, perhaps it's just a matter of habit
[12:10:25] *** Quits: jviereck (Adium@moz-418862B2.dip0.t-ipconnect.de) (Quit: Leaving.)
[12:10:49] <doomlord> : introducing a type is much nicer than coming up with rules like .. "UpperCase for type names and nothing else" :)
[12:10:49] *** Quits: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net) (Client exited)
[12:11:27] <dbaupp> such a rule isn't that bad either
[12:11:39] * dbaupp tries to follow it in his Rust code anyway
[12:11:40] <nsf> doomlord: Go has no problems with lower-case types, ambiguity comes from other places
[12:11:56] <dbaupp> nsf: does go use a C-style declaration syntax?
[12:11:57] <doomlord> i know ambiguity from C++ :)
[12:12:12] <doomlord> a*b;  //what is that :)
[12:12:13] *** Joins: Guest (textual@34641662.FB4DE631.66C78B76.IP)
[12:12:15] <nsf> dbaupp: no, it's similar to rust actually, but with influence from C
[12:12:24] <nsf> var a, b, c int
[12:12:36] <nsf> var x func(int, int) func() bool
[12:12:50] <dbaupp> weird
[12:12:52] <nsf> second one is a function that takes two ints and returns a function that takes no args and returns a bool
[12:12:56] *** Quits: SingingBoyo (SingingBoy@4DF3381A.51F4D838.4F048BDC.IP) (Ping timeout)
[12:13:03] <doomlord> yeah rusts : -> help alot
[12:13:24] *** Quits: quasisphere (btw@DC685DC2.94302614.1D0D91FF.IP) (Ping timeout)
[12:13:28] <zol> http://hastebin.com/qadigabehe.rust -- I'm trying to override a struct impl through a trait implementation for that struct, is this possible? 
[12:14:00] <doomlord> i like the fact rust writes -> over scala using : for returntype aswell
[12:14:26] <zol> doomlord: +1
[12:14:28] <doomlord> inputs -> outputs
[12:14:38] <nsf> dbaupp: it's nice especially in funcs: func lerp(a, b, v float32) float32 { ... }
[12:14:48] <zol> doomlord: SML & OCaml family does the same, right? 
[12:14:57] <dbaupp> zol: that's not possible
[12:15:03] <doomlord> i thinkso, i have never used these
[12:15:03] <nsf> imho much more readable than: fn lerp(a: f32, b: 32, v: 32) -> f32 {}
[12:15:07] <nsf> oops
[12:15:16] <nsf> sorry for typos, but you get it
[12:15:40] <doomlord> yup i'm the exact opopsite. -> instantly shows you return value, and that would help more if you had functios returning functions
[12:15:40] <dbaupp> zol: I get the feeling you're trying to use C++/Java OO patterns in Rust... those ones don't really fit very well.
[12:15:53] <engla> zol: I think that's intentional. that way you can use base's toString when implementing toString in the trait for the same type
[12:16:05] <doomlord> part of the point of rust is to escape C++/java OO patterns :)
[12:16:29] *** Joins: jfbk (textual@moz-EEA9CFB3.nyc.res.rr.com)
[12:16:49] <dbaupp> nsf: ah, that is nicer, but the lack of separator between the variables and the type leaves me feeling all icky
[12:17:30] <doomlord> for me its just the fact without a seperator i'm conditioned to  expect type ident not ident type
[12:17:42] <dbaupp> same, I guess
[12:17:46] <zol> doomlord: dbaupp: Right! Basically, I am trying to implement the composite pattern to handle hierarchical goals for my AI. Guess I need to figure out how to handle this differently. :)
[12:18:14] *** Parts: z0w0 (zack@moz-7E6DC3A.lnse2.woo.bigpond.net.au) ()
[12:18:33] <LRN> how do i convert str to ~[u8]? "123".to_bytes() doesn't work (rust says that static str doesn't implement that method)
[12:18:36] <dbaupp> zol: I guess you haven't used Haskell much? :(
[12:18:50] <cmr> LRN: as_bytes().to_owned()
[12:18:50] <dbaupp> rusti: (~"123").into_bytes()
[12:18:51] -rusti- ~[49, 50, 51]
[12:19:02] <cmr> yeah it depends on what type you have
[12:19:05] <zol> dbaupp: No, but I'm reading SICP at the moment, and I do own LYAH(FTGG). 
[12:19:05] <dbaupp> rusti: ("123").as_bytes()
[12:19:05] <cmr> LRN: str isn't a type
[12:19:06] -rusti- &[49, 50, 51]
[12:19:19] <dbaupp> zol: oh! a hard-copy? neat
[12:19:27] *** Joins: busylizzy (lisa@85228838.12D0DC84.211374C4.IP)
[12:19:30] <zol> dbaupp: Yes :)
[12:19:43] <zol> dbaupp: Both books actually! And Land-of-Lisp.
[12:19:58] <dbaupp> zol: my question was because Rust's typesystem is pretty similar to Haskell's, so patterns in the latter probably fit reasonably in the former
[12:20:29] <dbaupp> but I guess you can go the other way: work out what works in Rust, and the do the same in Haskell if you get to use it sometime :)
[12:20:32] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[12:21:17] <zol> dbaupp: This makes me want to look at Haskell even more, especially after having seen John Carmack's QuakeCon2013 talk on Haskell/FP in game engines.
[12:21:29] <zol> dbaupp: Thanks!
[12:22:28] <dbaupp> Haskell is awesome :)
[12:22:45] * dbaupp wishes we had nice monads in Rust
[12:23:26] <zol> dbaupp: Someone mentioned that the composite pattern could be implemented with recursive algebraic types in Haskell; equiv. in Rust seems to be http://static.rust-lang.org/doc/rust.html#recursive-types
[12:23:56] *** Joins: quasisphere (btw@DC685DC2.94302614.1D0D91FF.IP)
[12:24:07] *** Quits: busylizzy (lisa@85228838.12D0DC84.211374C4.IP) (Quit: No Ping reply in 180 seconds.)
[12:24:38] * zol wanders off doing some research.
[12:27:43] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.1)
[12:27:50] *** Quits: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[12:31:12] <LRN> how do i build stuff with debug info using rustpkg?
[12:32:26] *** Quits: jfbk (textual@moz-EEA9CFB3.nyc.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[12:32:54] <dbaupp> LRN: you can't
[12:33:02] <LRN> oh-kay...
[12:33:17] <dbaupp> you'll have to run `rustc -Z debug-info -Z extra-debug-info ...` yourself
[12:33:44] <cmr> I thought -Z extra-debug-info implies debug-info?
[12:33:50] <LRN> isn't there a #[compiler(-Z debug-info)] or something like that?
[12:34:03] <dbaupp> the focus for rustpkg has been "flesh out the major functionality", and is just now getting to the point where the little papercuts can start being filled in
[12:34:22] <dbaupp> cmr: that would be eminently reasonable
[12:34:28] <dbaupp> LRN: nope
[12:34:55] *** Joins: tav (tav@moz-C302A43C.range86-149.btcentralplus.com)
[12:35:29] <engla> the new IO, is it going to have a whole text layer on top later? or will it implement simple text interfaces directly on Reader like the old io?
[12:35:34] <LRN> dbaupp, is there a way to make rustpkg spew the rustc invocations?
[12:35:43] <engla> just wondering where read_line() and line iterators will live
[12:35:50] <cmr> LRN: rustpkg doesn't invoke rustc
[12:35:52] <cmr> not like that
[12:35:55] <cmr> it uses it as a library.
[12:35:56] <LRN> oh
[12:37:05] <LRN> *sigh* back to makefiles...
[12:39:48] <dbaupp> engla: I guess it'll have a text layer at some point, since it'll need to handle encodings properly
[12:40:07] *** Quits: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net) (No route to host)
[12:40:14] <cmr> I'd imagine std wouldn't grow that functionality and it'd be in the extra conglomerate
[12:40:30] *** Joins: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net)
[12:40:38] <cmr> Internally I see the line for inclusion into std as "is it useful freestanding"
[12:40:41] *** Joins: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net)
[12:41:26] <engla> ah then most concrete parts of io are out anyway
[12:42:02] <cmr> yeah but at least the highlevel interfaces are modular
[12:42:11] *** Quits: eagen (eagen@8737942B.7A99C13A.B7961A98.IP) (Client exited)
[12:42:17] <cmr> this is part of the runtimeless/profile stuff I'm interested in
[12:42:40] *** Quits: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net) (Client exited)
[12:43:42] <dbaupp> <3 runtimeless
[12:45:02] <engla> a buffer-until iterator is almost all the way there for simple cases.. as in yield &[u8] split/terminated by any byte for example \n.
[12:46:27] *** Joins: eagen (eagen@8737942B.7A99C13A.B7961A98.IP)
[12:47:39] *** Joins: jaen (jaen@moz-AE67F87C.play-internet.pl)
[12:48:30] *** Joins: maik (maik___@moz-81035A5A.dip0.t-ipconnect.de)
[12:48:52] *** Joins: mib_1031xx (Mibbit@B4104EBB.3CC170B1.1E14B209.IP)
[12:49:31] *** Parts: mib_1031xx (Mibbit@B4104EBB.3CC170B1.1E14B209.IP) ()
[12:49:46] *** Quits: five (five@moz-993E0FAA.v4.ngi.it) (Ping timeout)
[12:49:50] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[12:51:02] *** Joins: mib_1031xx (Mibbit@B4104EBB.3CC170B1.1E14B209.IP)
[12:51:12] *** Parts: mib_1031xx (Mibbit@B4104EBB.3CC170B1.1E14B209.IP) ()
[12:51:30] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[12:52:19] <LRN> is it OK to implement next() on a struct directly (instead of providing an iter() method that returns a special iterator struct with next() implemented on it)?
[12:52:27] <LRN> (i'm trying to make stuff iterable)
[12:53:30] <engla> it's ok if the struct is an iterator by itself
[12:53:35] <engla> as in it keeps the iteration state
[12:53:56] *** Quits: jaen (jaen@moz-AE67F87C.play-internet.pl) (Quit: WeeChat 0.4.1)
[12:54:38] <LRN> well, it kind of does. It has a Port, and just does .recv() on it, and returns anything it gets
[12:54:53] <dbaupp> yes
[12:54:56] <dbaupp> that's fine
[12:55:07] <LRN> ok, then i must be segfaulting because i did something stupid
[12:55:13] <LRN> s/i must/it must/
[12:55:23] <dbaupp> (although you probably want try_recv: it'll return None if the channel is closed)
[12:55:37] *** Quits: quasisphere (btw@DC685DC2.94302614.1D0D91FF.IP) (Ping timeout)
[12:55:41] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[12:55:46] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[12:55:46] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/MAUg7w
[12:55:46] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[12:56:30] <dbaupp> finally! that only took 3 `@bors: retry`s :(
[12:59:05] *** Joins: jviereck (Adium@moz-418862B2.dip0.t-ipconnect.de)
[12:59:08] *** Joins: quasisphere (btw@DC685DC2.94302614.1D0D91FF.IP)
[13:00:32] *** Quits: jviereck (Adium@moz-418862B2.dip0.t-ipconnect.de) (Quit: Leaving.)
[13:00:47] *** Joins: Aszarsha_ (Aszarsha@moz-16BFBC53.rev.numericable.fr)
[13:00:49] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[13:00:49] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/pKY8fA
[13:00:49] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[13:00:53] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[13:00:54] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/rPqIdg
[13:00:54] <ghrust> 13rust/06auto 143801534 15Brian Anderson: Revert "auto merge of #8695 : thestinger/rust/build, r=pcwalton"...
[13:00:54] <ghrust> 13rust/06auto 142b035d9 15bors: auto merge of #8838 : brson/rust/rvfpelim, r=alexcrichton...
[13:00:54] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[13:03:47] *** Joins: five (five@moz-993E0FAA.v4.ngi.it)
[13:03:59] *** Joins: jfbk (textual@moz-EEA9CFB3.nyc.res.rr.com)
[13:09:18] *** Joins: gavinb (gavinb@moz-9EC182F0.lowrp3.vic.optusnet.com.au)
[13:09:20] *** Joins: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP)
[13:11:33] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[13:12:07] *** Quits: jfbk (textual@moz-EEA9CFB3.nyc.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[13:12:52] *** Joins: jfbk (textual@moz-EEA9CFB3.nyc.res.rr.com)
[13:15:00] *** Quits: darkf (darkf@moz-F9058B8A.net) (Ping timeout)
[13:15:12] <LRN> i have debug info now. How do i inspect local variables in gdb?
[13:15:28] <LRN> "info local" says that there are no local variables
[13:17:42] *** Joins: huseby (huseby@13F2CEC5.7672369.D8E68FF6.IP)
[13:17:48] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[13:19:10] *** Joins: five_ (five@moz-993E0FAA.v4.ngi.it)
[13:20:36] *** Joins: darkf (darkf@moz-F9058B8A.net)
[13:23:07] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[13:23:14] *** Quits: darkf (darkf@moz-F9058B8A.net) (Ping timeout)
[13:25:37] *** kimundi is now known as zz_kimundi
[13:26:17] <maik> why do we have no SharedPort in libstd?
[13:27:00] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Ping timeout)
[13:34:41] *** Joins: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP)
[13:34:41] *** ChanServ sets mode: +o jdm
[13:35:44] *** Joins: jviereck (Adium@moz-418862B2.dip0.t-ipconnect.de)
[13:36:41] *** Joins: darkf (darkf@moz-F9058B8A.net)
[13:37:00] *** Quits: cdidd (cdidd@moz-68914B9C.broadband.corbina.ru) (Ping timeout)
[13:38:08] *** Joins: cdidd (cdidd@moz-C902F0EF.broadband.corbina.ru)
[13:40:45] *** Quits: jviereck (Adium@moz-418862B2.dip0.t-ipconnect.de) (Ping timeout)
[13:40:51] *** Joins: jviereck (Adium@moz-20C01E21.dip0.t-ipconnect.de)
[13:44:05] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[13:46:53] *** Quits: ross (ross@moz-8A84103E.br.br.cox.net) (Quit: )
[13:47:36] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[13:49:55] *** Quits: gavinb (gavinb@moz-9EC182F0.lowrp3.vic.optusnet.com.au) (Quit: gavinb)
[13:51:36] *** Joins: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net)
[13:52:15] *** Quits: sp3d (a@moz-6F12212B.fidnet.com) (Ping timeout)
[13:52:29] *** Quits: jviereck (Adium@moz-20C01E21.dip0.t-ipconnect.de) (Quit: Leaving.)
[13:54:41] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[13:55:21] *** Joins: sp3d (a@moz-6F12212B.fidnet.com)
[13:58:51] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[13:59:35] *** Quits: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[14:01:44] *** Quits: Florob (Florob@moz-39532932.de) (Max SendQ exceeded)
[14:06:48] *** Quits: cdidd (cdidd@moz-C902F0EF.broadband.corbina.ru) (Ping timeout)
[14:07:19] *** Joins: cdidd (cdidd@moz-3134514.broadband.corbina.ru)
[14:07:37] <ChrisMorgan> I have 22 tests. 21 succeed. The 22nd guzzles a coreâ€”accidental infinite loop, I guess. Is there any convenient way to find out which it is, short of comparing lists manually?
[14:09:12] <engla> did you use RUST_THREADS=1 ?
[14:09:15] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[14:09:19] <engla> then you should see it easily
[14:10:48] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[14:10:48] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/rPqIdg
[14:10:48] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[14:11:56] <ChrisMorgan> Thanks. It was the very first test, run that way!
[14:12:25] *** Quits: maik (maik___@moz-81035A5A.dip0.t-ipconnect.de) (Connection reset by peer)
[14:13:44] <ChrisMorgan> I suppose I could also have tried running in GDB and using Ctrl+Z and get a bt for all threads
[14:13:50] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[14:13:53] *** Joins: maik (maik___@moz-81035A5A.dip0.t-ipconnect.de)
[14:14:03] <engla> well, telling which test is failing is one of the primary jobs for the test runner
[14:14:15] <engla> gdb shouldn't be needed 
[14:14:20] <ChrisMorgan> Problem is that it's *not* failing. It's just never going to finish.
[14:14:39] <engla> I think it still applies
[14:14:44] <ChrisMorgan> Timeout support could be handy occasionally.
[14:15:46] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[14:15:46] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/uIb2HA
[14:15:46] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[14:15:48] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[14:15:48] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/LqZvnw
[14:15:48] <ghrust> 13rust/06auto 14b86acd0 15Kevin Ballard: run: Process::new() should take &[Str] instead of &[~str] for args...
[14:15:48] <ghrust> 13rust/06auto 14c55cb15 15bors: auto merge of #8203 : kballard/rust/process-new-args, r=cmr...
[14:15:48] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[14:16:19] <ChrisMorgan> I don't see how the test runner would be able to say that when you get an infinite loop.
[14:16:34] *** Joins: feduser (feduser@650B4444.AAE9A62C.650F25DA.IP)
[14:17:28] <engla> the RUST_THREADS=1 case is fine, because you see which test is running
[14:19:25] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[14:21:13] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[14:22:52] * nsf typed a bunch of s32s again
[14:22:55] <nsf> :(
[14:22:56] *** Joins: lbergstrom (Adium@moz-5D8E4B14.lightspeed.cicril.sbcglobal.net)
[14:24:09] <nsf> keep thinking that u32 = "unsigned 32 bit", and as a result the opposite is "signed 32 bit", s32 :D
[14:24:09] *** Joins: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca)
[14:24:13] *** Quits: paulproteus (quassel@rose.makesad.us) (Ping timeout)
[14:25:44] *** Joins: paulproteus (quassel@moz-E86A3B42.makesad.us)
[14:26:36] *** Quits: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP) (Quit: bb2morrow)
[14:29:00] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Connection reset by peer)
[14:30:01] *** Joins: tetsuharu (Mibbit@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[14:32:02] <maik> hehe FRP is really nice to implement in Rust
[14:32:28] *** Joins: lmandel (lmandel@13F2CEC5.7672369.D8E68FF6.IP)
[14:33:03] *** Quits: five (five@moz-993E0FAA.v4.ngi.it) (Ping timeout)
[14:33:11] *** Joins: five (five@9500BE4B.C4AAC3ED.10BB00EE.IP)
[14:34:04] *** Joins: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net)
[14:34:52] *** Quits: five (five@9500BE4B.C4AAC3ED.10BB00EE.IP) (Connection reset by peer)
[14:34:58] <tetsuharu> i announce, japanese community will hold workshop event about rust on september 7th.
[14:35:00] <tetsuharu> https://dev.mozilla.jp/event/rust-samurai-20130907/
[14:35:14] *** Joins: kgriffs (Adium@32702EE8.939109B2.FB082A98.IP)
[14:36:00] <Yoric> That's cool.
[14:36:05] <Yoric> I wish we had a Rust event in France.
[14:36:17] <sam113101> IÂ wish IÂ knew Japanese
[14:36:24] <tetsuharu> interesting.
[14:37:35] *** Joins: mib_9uybip (mib_9uybip@moz-9B8221B3.rivrw1.nsw.optusnet.com.au)
[14:37:55] <tetsuharu> sam113101: sorry, this time would not  take a ustream :(
[14:38:41] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Connection reset by peer)
[14:38:47] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[14:39:15] *** Quits: mib_9uybip (mib_9uybip@moz-9B8221B3.rivrw1.nsw.optusnet.com.au) (Ping timeout)
[14:39:33] <tetsuharu> incidentally, this workshop's name "Rust Samurai" is inspired by JavaScript Ninja. Not inspired by movie ;)
[14:40:22] *** Quits: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net) (Quit: jorendorff)
[14:40:26] *** Joins: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net)
[14:43:36] *** Quits: threecreepio (jdp@moz-1A9F0A3C.cust.bredband2.com) (Quit: threecreepio)
[14:43:53] *** Joins: threecreepio (jdp@moz-1A9F0A3C.cust.bredband2.com)
[14:45:47] <Yoric> :)
[14:46:43] *** Joins: jviereck (Adium@moz-20C01E21.dip0.t-ipconnect.de)
[14:47:11] *** Quits: jviereck (Adium@moz-20C01E21.dip0.t-ipconnect.de) (Quit: Leaving.)
[14:47:21] *** Joins: matt (Mibbit@moz-6415EAF9.cm-4-3b.dynamic.ziggo.nl)
[14:47:56] *** Quits: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com) (Ping timeout)
[14:48:02] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[14:48:32] *** Joins: five (five@9500BE4B.C4AAC3ED.10BB00EE.IP)
[14:49:03] *** Quits: matt (Mibbit@moz-6415EAF9.cm-4-3b.dynamic.ziggo.nl) (Quit: http://www.mibbit.com ajax IRC Client)
[14:49:58] *** Joins: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com)
[14:51:03] *** Quits: five (five@9500BE4B.C4AAC3ED.10BB00EE.IP) (Connection reset by peer)
[14:52:06] *** Joins: jviereck (Adium@moz-20C01E21.dip0.t-ipconnect.de)
[14:52:11] *** Joins: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP)
[14:53:17] *** Quits: jviereck (Adium@moz-20C01E21.dip0.t-ipconnect.de) (Quit: Leaving.)
[14:53:32] *** Joins: jviereck (Adium@moz-20C01E21.dip0.t-ipconnect.de)
[14:54:55] <fread2281> so is extra::term planned to be a full terminal library like curses?
[14:57:50] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[14:59:32] *** Joins: plertrood (Mibbit@952675DF.17482ABA.BE04C429.IP)
[15:00:05] <LRN> Should i strive to use static method dispatch? How much does dynamic method dispatch cost? Are there any gotchas associated with dynamic dispatch?
[15:00:12] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Client exited)
[15:00:40] *** Quits: five_ (five@moz-993E0FAA.v4.ngi.it) (Ping timeout)
[15:00:54] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[15:00:55] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14c55cb15 to 142b035d9: 02http://git.io/N3iJvQ
[15:00:55] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[15:00:57] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[15:00:57] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/7wtilQ
[15:00:57] <ghrust> 13rust/06auto 146b3ac8f 15Kevin Ballard: Make the iterator protocol more explicit...
[15:00:57] <ghrust> 13rust/06auto 14752a6c4 15Kevin Ballard: Make Zip iterator short-circuit...
[15:00:57] <ghrust> 13rust/06auto 14f444cbb 15bors: auto merge of #8276 : kballard/rust/iterator-protocol, r=cmr...
[15:00:59] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[15:02:01] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[15:02:05] *** Joins: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com)
[15:02:14] <bstrie> tetsuharu: you should post this to the mailing list too
[15:05:14] <plertrood> Any  ideas what is going on with 'for'?
[15:05:26] <plertrood> If I do 'for i in range(1,10) {'
[15:05:53] <plertrood> it complains with 'expected { but found in'?
[15:06:56] <pnkfelix> plertrood: what version of rust are you using?
[15:07:51] *** Joins: eholk (eric@moz-F70D5031.hsd1.in.comcast.net)
[15:07:55] <plertrood> 0.7
[15:08:01] <plertrood> On Windows..
[15:08:23] <plertrood> Same problem on Mac.
[15:08:32] <olsonjeffery> has there ever been a concensus on whether std should have a regex implementation?
[15:08:58] <pnkfelix> plertrood: that's before the new Iterator protocol landed.
[15:09:17] <pnkfelix> plertrood: you should either bootstrap a more recent version, or use the documentation from the 0.7 release
[15:09:17] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[15:09:24] <pnkfelix> plertrood: i.e. http://static.rust-lang.org/doc/0.7/rust.html#for-expressions
[15:09:33] <bstrie> plertrood: 0.7 still has to do `for int::range(1, 10) |i| {`
[15:09:47] <bstrie> or something like that
[15:09:50] <bstrie> I've already forgotten :P
[15:10:28] <plertrood> Ah.. ok that explains things.
[15:11:12] <plertrood> Yes I see.. I didn't realise I was a version down.
[15:11:26] <bstrie> plertrood: not quite a version down, 0.8 isn't out yet
[15:11:33] <bstrie> the new for syntax is on trunk
[15:11:50] <bstrie> which is what we encourage people to use :)
[15:12:25] <bstrie> consider yourself encouraged!
[15:12:28] <benh> Why are there even numbered releases?
[15:12:31] <plertrood> Yes.. I took the lazy route of just downloading the packages.
[15:12:46] <benh> Does servo stick to releases?
[15:12:54] <bstrie> benh: I think servo updates to trunk every week or so
[15:13:25] <plertrood> Is it easy to build trunk on windows?
[15:13:33] <bstrie> plertrood: heavens no
[15:13:46] <bstrie> not that I've ever tried
[15:13:47] <benh> Clearly the releases are just so you get to post about rust on HN every few months
[15:13:49] <plertrood> :P
[15:13:53] <benh> I know you all enjoy that very much :)
[15:13:55] <bstrie> but it's just so pleasant to build on linux
[15:13:58] *** Joins: farnoy (farnoy@moz-8F659BF8.neoplus.adsl.tpnet.pl)
[15:14:11] <bstrie> benh: sssh
[15:14:14] *** Quits: threecreepio (jdp@moz-1A9F0A3C.cust.bredband2.com) (Quit: threecreepio)
[15:14:16] <bstrie> don't give away our secrets!
[15:14:46] <bstrie> actually the releases are so that graydon's bosses know that he isn't just putzing around playing candy crush on the company dime
[15:15:25] <plertrood> Yeah I was surprised when people complained about it being hard to install. It was real easy for me.
[15:18:01] <bstrie> plertrood: well that's nice to hear
[15:18:12] <bstrie> maybe things are getting better on windows!
[15:19:42] <plertrood> I just downloaded the 0.7 exe from the site..
[15:19:42] <plertrood> Didn't build anything.
[15:20:50] *** Joins: jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[15:20:57] *** Joins: threecreepio (jdp@moz-1A9F0A3C.cust.bredband2.com)
[15:21:22] *** Quits: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP) (Input/output error)
[15:22:24] *** Joins: zwol (zack@moz-B5C129C.ece.cmu.edu)
[15:22:43] <maik> http://www.reddit.com/r/rust/comments/1lc2cm/code_review_small_cross_task_event_system/
[15:22:52] <benh> my blind "git pull && make -j9 && sudo make install" builds still occasionally fail :(
[15:22:55] <maik> any ideas how I can improve my code?
[15:26:31] <farnoy> maik: have you seen Carmack's keynote at this year's quakecon?
[15:26:54] *** Quits: Ralith (ralith@114DA04D.CD83ED0A.BCDF04A6.IP) (Ping timeout)
[15:27:02] <maik> fabiand, yes
[15:27:11] <maik> uos
[15:27:17] <maik> farnoy, yes
[15:27:18] <farnoy> he said that they take immutable references to evaluate what monster should do what, and then schedule any changes for another system to handle
[15:27:24] <fabiand> maik, sure :)
[15:27:44] <farnoy> not sure if it applies, but it could solve the memory problem
[15:28:14] <maik> farnoy, the problem is I can't share references between tasks
[15:28:25] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[15:28:57] <maik> farnoy, I could use Arc's to do this but they have their own pitfall. Or I am just missing something really obvious :(
[15:32:08] <maik> farnoy, ah you gave me an idea thanks!
[15:34:00] *** Joins: erickt (etryzelaar@2571F7A1.50CA9683.D51AEBE4.IP)
[15:35:05] *** Quits: jviereck (Adium@moz-20C01E21.dip0.t-ipconnect.de) (Quit: Leaving.)
[15:35:27] *** Quits: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net) (Quit: jorendorff)
[15:36:41] *** Joins: fyolnish (fyolnish@moz-DBD18DC5.uqwimax.jp)
[15:41:47] *** Quits: fyolnish (fyolnish@moz-DBD18DC5.uqwimax.jp) (No route to host)
[15:42:33] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[15:42:48] *** Quits: plertrood (Mibbit@952675DF.17482ABA.BE04C429.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[15:43:20] <farnoy> maik, glad to help, I haven't realized you can't pass a borrowed pointer, but it makes sense
[15:45:46] *** Joins: boredomist (user@moz-63CF9F31.res-cmts.sesp.ptd.net)
[15:45:50] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[15:45:50] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14f444cbb to 142b035d9: 02http://git.io/N3iJvQ
[15:45:50] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[15:45:53] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[15:45:54] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/MH2OwQ
[15:45:54] <ghrust> 13rust/06auto 14fcce7e8 15Seo Sanghyeon: Remove --newrt option
[15:45:54] <ghrust> 13rust/06auto 1497b542b 15Seo Sanghyeon: Android: Pass the environment when running tests
[15:45:54] <ghrust> 13rust/06auto 1429add63 15bors: auto merge of #8839 : sanxiyn/rust/env, r=thestinger
[15:45:55] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[15:48:30] *** Quits: davbo (dave@moz-3FFA637C.oucs.ox.ac.uk) (Client exited)
[15:48:34] <maik> is a port freezable?
[15:49:11] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[15:49:11] *** ChanServ sets mode: +ao dherman dherman
[15:50:56] *** Joins: RMF (RMF@A3A10308.EB26598F.8D19547B.IP)
[15:51:45] *** Joins: jorendorff_ (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net)
[15:53:33] <nsf> oh, that's why I guess SDL2 randomly crashes my Xorg, I need to make sure it runs within the main thread
[15:54:53] *** Joins: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net)
[15:55:01] <zol> Is it possible to implement a graph with a recursive datatype? I mean, if I want to have a variable amount of nodes? 
[15:55:11] <LRN> It works!!!! http://pastebin.com/BX0s5684 \o/
[15:55:33] <LRN> (sorry, just feeling excited after my victory over Rust)
[15:57:18] *** Quits: eholk (eric@moz-F70D5031.hsd1.in.comcast.net) (Quit: Konversation terminated!)
[15:57:56] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[15:58:43] *** AutomatedTester is now known as AutomatedTester|AFK
[15:59:56] <nmatsakis> zol: graphs can be implemented with `@`, but my personal preference is to use newtype'd ints to represent the indices, and store all the data in a big array
[16:00:46] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[16:00:58] <jdm> LRN: nice!
[16:01:17] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[16:02:32] *** Joins: Chef (Chef@moz-4C317041.dsl.teksavvy.com)
[16:02:33] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.1)
[16:03:06] <Ms2ger> nmatsakis, with arbitrary arity?
[16:03:51] *** Quits: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP) (Quit: Textual IRC Client: www.textualapp.com)
[16:04:07] <nmatsakis> Ms2ger: sure -- there is an example on src/librustc/middle/graph.rs
[16:04:22] <Ms2ger> Interesting
[16:04:26] <nmatsakis> it works best if you don't need to GC the nodes
[16:04:33] <nmatsakis> which I ... pretty much never do
[16:04:41] <nmatsakis> that is, usually I am building up a big graph and then analyzing it
[16:04:57] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[16:04:59] <nmatsakis> and I guess even if you remove things form it,
[16:05:00] <nmatsakis> *from it,
[16:05:07] *** Quits: maik (maik___@moz-81035A5A.dip0.t-ipconnect.de) (Ping timeout)
[16:05:07] <nmatsakis> it'd be easy enough to know when the last edge is removed or whatever
[16:06:27] *** Joins: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net)
[16:07:06] *** Quits: threecreepio (jdp@moz-1A9F0A3C.cust.bredband2.com) (Quit: threecreepio)
[16:10:12] *** Joins: josedonizetti (josedonize@DF22210B.35D9DDB.8EF76F75.IP)
[16:12:15] *** Joins: fyolnish (fyolnish@moz-DBD18DC5.uqwimax.jp)
[16:12:58] *** Joins: robarnold (rob@BD56354E.DB510C09.6E370BFC.IP)
[16:14:47] <SimonSapin> libuv-in-rust seems to point to a commit that is not in the remote repo: http://pastebin.mozilla.org/2935224
[16:14:52] <SimonSapin> or did I do something wrong?
[16:15:37] <pnkfelix> SimonSapin: Its in my checkout of libuv
[16:15:47] <pnkfelix> SimonSapin: but I've experienced problems in the past
[16:16:13] <pnkfelix> SimonSapin: and often have just deleted the src/libuv/ directory and rerun configure (or maybe just rerunning make suffices, can't remember)
[16:16:16] <cmr> Alright, it seems bors is entirely toast.
[16:16:22] <SimonSapin> pnkfelix: I can get to it in githubâ€™s web UI too, but fetching doesnâ€™t get it
[16:16:53] <pnkfelix> SimonSapin: Oh wait.  Why does my remote say this...
[16:16:53] *** Joins: mihneadb (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net)
[16:16:58] <cmr> Everything is failing with segfaults on mac64.
[16:17:00] <pnkfelix> % git remote -v
[16:17:00] <pnkfelix> origin	https://github.com/alexcrichton/libuv.git (fetch)
[16:17:00] <pnkfelix> origin	https://github.com/alexcrichton/libuv.git (push)
[16:17:04] <pnkfelix> that's not good
[16:17:32] <SimonSapin> pnkfelix: https://github.com/mozilla/rust/blob/master/.gitmodules
[16:17:44] <SimonSapin> itâ€™s not?
[16:17:46] <pnkfelix> well
[16:18:07] <pnkfelix> I was assuming that we should be using the llvm.git and libuv.git forks that are under Mozilla's org in github
[16:18:18] <pnkfelix> dherman: ^
[16:18:23] <acrichto> I think that was the idea but we just hadn't gotten around to it yet
[16:18:32] <acrichto> they were previously pointing at brson's forks
[16:18:55] <pnkfelix> acrichto: true, before it pointed at brson
[16:19:01] <nmatsakis> pnkfelix: bah. I still haven't debugged that crash with visitor objets.
[16:19:23] <pnkfelix> nmatsakis: and I still haven't debugged that crash with writeback.rs   ;)
[16:19:25] *** Joins: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net)
[16:20:27] <SimonSapin> so, it rust master broken, or is it me?
[16:20:32] <SimonSapin> s/it/is/
[16:20:34] <cmr> SimonSapin: not just you.
[16:20:35] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[16:20:39] <pnkfelix> maybe it doesn't matter, as long as we can recover our state accordingly if acrichto deletes his repos
[16:20:51] <acrichto> don't worry, I won't do that any time soon :)
[16:21:19] <acrichto> SimonSapin: have you re-run configure?
[16:21:31] <jorendorff> i have a type system question
[16:21:50] <jorendorff> my function takes an argument p: ~fn (T) -> bool
[16:21:56] <SimonSapin> acrichto: what branch is ef2bcd13 supposed to be in?
[16:21:57] <jorendorff> when i call it,  p(x), that moves x. Why?
[16:21:57] <SimonSapin> in libuv
[16:21:59] <nmatsakis> rust master is broken?
[16:22:21] * nmatsakis reminds himself not to rebase for a while :)
[16:22:25] <SimonSapin> acrichto: Iâ€™m getting errors with git submodule update
[16:22:31] *** Quits: jorendorff_ (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net) (Quit: jorendorff_)
[16:22:32] <acrichto> SimonSapin: rust-2013-08-26-do-not-delete
[16:22:35] <cmr> nmatsakis: segfaults on mac on bors, so yeah.
[16:22:46] <jorendorff> "because it has type `T`, which is non-copyable" hmm
[16:22:59] <jorendorff> i don't really get it
[16:23:37] <SimonSapin> acrichto: I see it on github but for some reason "git fetch" does not fetch that branch...
[16:23:40] <cmr> jorendorff: it moves x because taking something by value is always a move (or a copy, depending on the type).
[16:23:43] <cmr> jorendorff: what rust version?
[16:23:51] <olsonjeffery> build that is computationally feasible, build that is fast, build that is safe. pick two.
[16:23:59] <jorendorff> cmr: "yesterday"
[16:24:04] <cmr> ok
[16:24:08] <jorendorff> i just did a git clone, configure, make
[16:24:11] <cmr> so that error is bad, since Copy is gone.
[16:25:32] <nmatsakis> jorendorff: the way to think of it is like this: when you pass an argument, we'll copy the value (just as in C). If this value contains ~ pointers, there can only be one owner, so the original copy is invalidated. Effectively, there is a move.
[16:25:37] <SimonSapin> acrichto, pnkfelix: got it, the submoduleâ€™s remote still points to https://github.com/brson/libuv.git
[16:25:44] *** flaper87 is now known as flaper87|afk
[16:25:55] <acrichto> SimonSapin: weird, I thought updating .gitmodules would have git pick that up
[16:26:02] <SimonSapin> not updating that seems to be a bug in git
[16:26:11] <pnkfelix> SimonSapin: I suspect we need to make our configure logic more robust here.  I have not been impressed by git's auto-handling of changes to .gitmodules
[16:26:13] <nmatsakis> jorendorff: it's basically the same as what would happen with auto_ptr<> or unique_ptr<> except that instead of NULLing out the original, we mark it as moved and check statically you don't use it again
[16:26:17] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[16:26:27] <jorendorff> nmatsakis: right, that part makes sense to me. Adding Clone fixed it.
[16:27:41] <jorendorff>             src = filter(src, |x| x % p != 0);
[16:27:53] <jorendorff> I'm getting "error: cannot determine a type for this expression: unconstrained type" for `filter`
[16:28:09] <SimonSapin> acrichto, pnkfelix: this is rust-in-servo, itself a submodule
[16:28:28] <acrichto> oh man submodules in submodules
[16:28:36] <pnkfelix> SimonSapin: â€¦ oh ....
[16:28:52] <SimonSapin> Ha! 'git submodule update --recursive' in the top-level repo (servo) worked
[16:29:04] <cmr> jorendorff: means there isn't enough information for type inference to infer the type.
[16:29:26] <jorendorff> cmr: ok, but ... i guess i need to break it into two lines then?
[16:29:29] <cmr> jorendorff: either add a type hint (let src: T; or somesuch) or use the type later.
[16:29:38] <nmatsakis> jorendorff: might help to send a bigger snippet
[16:29:47] *** Joins: cstrahan (cstrahan@moz-A0710861.c3-0.161-ubr1.lnh-161.md.cable.rcn.com)
[16:29:57] *** Quits: sk (sk@76BFB31C.71F9CB99.78DD174B.IP) (Quit: Leaving)
[16:30:28] <nmatsakis> jorendorff: typically there should be enough type info at that point, but of course it'll depend on precisely what you're doing
[16:30:45] *** Joins: vodik (simon@moz-457C9D39.dsl.bell.ca)
[16:31:09] <unfoldl> I'll try to make a reduced case if needed, but any quick ideas as to what could be wrong in "error: mismatched types: expected `std::option::Option<(A,uint)>` but found `std::option::Option<(A,uint)>` (expected type parameter but found type parameter)"? Both the types seem to be identical in the error message.
[16:31:16] *** Quits: huseby (huseby@13F2CEC5.7672369.D8E68FF6.IP) (Ping timeout)
[16:31:25] <SimonSapin> nmatsakis: rust master is not broken, I needed to run 'git submodule update --recursive' at the root of the submodule tree (servo)
[16:31:43] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[16:31:49] *** Quits: victorporof_ (victorporo@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: victorporof_)
[16:32:16] <nmatsakis> unfoldl: they sure do, could it be you've declared multiple type parameters named A?
[16:34:19] <dherman> pnkfelix: sorry, just got out of a meeting -- what's the question?
[16:34:57] <pnkfelix> dherman: About whether we should be worried if our forks of llvm.git and libuv.git are living somewhere outside of the mozilla org.
[16:35:02] <pnkfelix> dherman: but I decided not to worry about it.
[16:35:10] <dherman> ok
[16:35:29] <pnkfelix> dherman: (by "mozilla org", I mean "github's "Mozilla" organization.  As well as mozilla employee repo's , I guess)
[16:35:32] *** Joins: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP)
[16:35:50] *** Joins: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net)
[16:36:19] <dherman> pnkfelix: I don't know that I have any particular light to shed on the question, other than my general wish for us to (at some point) land our patches back upstream to llvm
[16:36:26] <pnkfelix> dherman: (I figured you might be the right person to tell me to calm down, if necessary.)
[16:36:37] <dherman> I'm not sure I understand the concern
[16:36:44] <dherman> is this a license concern? a fragmentation concern?
[16:36:52] <pnkfelix> dherman: Mainly that the person outside the org might delete their repo
[16:37:02] <pnkfelix> dherman: so its just a dependency issue.
[16:37:07] <unfoldl> nmatsakis: ah, I had impl<A> for Person<A> { fn hello<A> ... }. Problem was with the <A> on the fn. Thanks!
[16:37:18] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[16:37:38] *** Joins: eholk (eholk@moz-BA312F07.crest.iu.edu)
[16:37:50] <dherman> pnkfelix: I'm not too worried, unless we somehow think the particular repo is at risk of being deleted
[16:37:54] <pnkfelix> dherman: but if things came to that, we would most likely be able to reconstruct the necessary state and shift things over to the mozilla org.
[16:38:16] <pnkfelix> dherman: right.  acrichto already pointed out that he's not likely to be doing that anytime soon.
[16:39:00] <dherman> :)
[16:39:01] *** Parts: tetsuharu (Mibbit@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) ()
[16:39:01] <dherman> ok
[16:40:22] *** flaper87|afk is now known as flaper87
[16:40:32] <jorendorff> nmatsakis, cmr: it's toy code: https://gist.github.com/jorendorff/6380483
[16:41:10] *** Quits: LU324 (weechat@9AF4F288.83671C58.1B5D53D7.IP) (Ping timeout)
[16:42:01] *** Joins: LU324 (weechat@9AF4F288.83671C58.1B5D53D7.IP)
[16:42:08] <jorendorff> maybe it's <T: Clone, Send> that is incorrect
[16:42:13] <nmatsakis> ah,yes
[16:42:17] <nmatsakis> it should be T:Clone+Send
[16:42:20] <jorendorff> excellent
[16:42:29] <nmatsakis> T:Clone, Send declares a second type parameter named Send
[16:42:50] <nmatsakis> that makes sense because otherwise I felt like sufficient info ought to be avail
[16:43:04] <nmatsakis> we should have a warning for unused type parameters
[16:43:18] <nmatsakis> we do for type decls I think, or maybe even an error
[16:43:21] <pnkfelix> I was going to say a warning for type parameters that shadow trait names
[16:43:27] <pnkfelix> but I think I like unused type parameters better
[16:43:47] <cmr> Aren't unused type params used for phantom types or somesuch?
[16:44:03] <nmatsakis> it oughta' be a lint
[16:44:09] <cmr> yeah
[16:44:15] <nmatsakis> I don't think you'd ever use an unused type param in a fn decl though
[16:44:17] <nmatsakis> maybe in a typ edecl
[16:44:19] <nmatsakis> *type decl
[16:44:20] <cmr> I'd be ok with it being warn by default.
[16:44:37] <nmatsakis> but in a fn decl you'd typically have something like fn foo<PHANTOM>(t: Foo<PHANTOM>)
[16:44:46] *** Joins: riley (riley@8BA43816.9AA11D69.65DDFA89.IP)
[16:44:46] <cmr> right
[16:45:40] *** Quits: farnoy (farnoy@moz-8F659BF8.neoplus.adsl.tpnet.pl) (Client exited)
[16:46:13] <jorendorff> OK, now the error is:
[16:46:14] <jorendorff> reduce_type_infer.rs:9:22: 9:30 error: cannot move out of captured outer variable in a heap closure
[16:46:14] <jorendorff> reduce_type_infer.rs:9         let mut src = integers;
[16:46:19] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[16:47:42] <jorendorff> i need to think about the lifetimes more here i guess
[16:49:15] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Ping timeout)
[16:49:29] *** Quits: fabiand (fabiand@moz-27A7DF83.adsl.alicedsl.de) (Quit: Verlassend)
[16:50:07] *** flaper87 is now known as flaper87|afk
[16:50:50] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[16:50:50] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1429add63 to 142b035d9: 02http://git.io/N3iJvQ
[16:50:50] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[16:50:51] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[16:50:52] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/JEQmyw
[16:50:52] <ghrust> 13rust/06auto 143beb7ad 15Alex Crichton: Update libuv to rebase on top of joyent/master...
[16:50:52] <ghrust> 13rust/06auto 14d02496d 15Alex Crichton: Enable segmented stacks for llvm on mingw-64...
[16:50:52] <ghrust> 13rust/06auto 1458c3fa9 15bors: auto merge of #8840 : alexcrichton/rust/update-vendors, r=cmr...
[16:50:54] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[16:51:22] *** Joins: anders (anders@moz-329650BE.cust.bredbandsbolaget.se)
[16:52:57] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[16:53:41] <jorendorff> fatal runtime error: assertion failed: task.unwinder.unwinding
[16:54:43] <bblum> jorendorff: uh oh, that one's mine
[16:54:47] <bblum> can you get a stack trace
[16:54:48] *** Quits: zeuxcg (zeuxcg@moz-80D1F912.hsd1.ca.comcast.net) (Ping timeout)
[16:54:57] *** Quits: vodik (simon@moz-457C9D39.dsl.bell.ca) (Quit: work)
[16:55:00] <jorendorff> bblum: it's on shutdown; tell me what to do, i'm a rust n00b
[16:55:20] <bblum> run your program in GDB and when it gets a SIGABRT, type 'backtrace'
[16:56:00] <bblum> also show me whatever program you're running to uncover that
[16:56:06] <jorendorff> bblum: alas: https://gist.github.com/jorendorff/6380630
[16:56:23] <bblum> jorendorff: 'info threads'
[16:56:35] <bblum> oh, wait, forget that
[16:56:48] <bblum> hmm, that's pretty alas, can you compile without optimization maybe?
[16:57:06] <pnkfelix> wait, wasn't that fixed recently?
[16:57:10] <pnkfelix> what platform is this?
[16:57:16] <jorendorff> pnfelix: max
[16:57:18] <jorendorff> bblum: https://gist.github.com/jorendorff/6380650
[16:57:25] <jorendorff> bblum: oh
[16:57:45] <jorendorff> er, mac rather
[16:57:50] <jorendorff> sorry max 
[16:57:53] <pnkfelix> jorendorff: I think we only recently re-enabled emitting frame ptr in our compiled output, precisely to make mac stack traces bigger
[16:58:22] <bblum> can you paste the program that's tripping this?
[16:59:10] <pnkfelix> jorendorff: as in, this PR from 15 hours ago: https://github.com/mozilla/rust/pull/8838
[16:59:21] <jorendorff> pnkfelix: well then i should just pull and retry
[16:59:25] <jorendorff> bblum: on its way...
[16:59:42] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: Leaving.)
[17:00:23] <jorendorff> bblum: https://gist.github.com/jorendorff/6380686
[17:00:57] <jorendorff> i made no effort to minimize that. this spawns a long chain of tasks; when main returns, all the other tasks fail
[17:01:22] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[17:01:30] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[17:02:05] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[17:02:18] *** Joins: tjc (tjc@moz-6EB4E533.dsl.tsoft.com)
[17:02:18] *** ChanServ sets mode: +o tjc
[17:02:27] <tjc> are we triaging in Bridge?
[17:02:36] <tjc> nmatsakis ^
[17:03:02] <nmatsakis> tjc: I think so? I am joining now
[17:04:47] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[17:04:48] *** ChanServ sets mode: +ao brson brson
[17:05:35] <zol> nmatsakis: Hm.. Sounds like an interesting approach -- do you know of any existing project that uses it which I could investigate? 
[17:05:41] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[17:07:31] <nmatsakis> zol: rustc :)
[17:07:37] <nmatsakis> zol: checkout src/librustc/middle/graph.rs
[17:07:43] <nmatsakis> zol: er, *check out
[17:08:12] <zol> nmatsakis: Awesome! Thank you :)
[17:08:31] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[17:08:35] *** Joins: jclements (jclements@moz-CDAD933D.wireless.calpoly.edu)
[17:09:03] <SimonSapin> Whatâ€™s the preferred way to fix this when porting code to new rust? "error: invoking non-Rust fn in fn without #[fixed_stack_segment]"
[17:09:31] <SimonSapin> I remember something about a macro creating wrappers
[17:09:39] <cmr> SimonSapin: slap a #[fixed_stack_segment] on the wrapper.
[17:09:45] <cmr> yeah, there's the externfn! macro
[17:10:04] <cmr> takes a function declaration
[17:10:10] <SimonSapin> cmr: is it useful for std::libc::free?
[17:10:23] <cmr> SimonSapin: should be? I don't know all the details
[17:10:25] <cmr> nmatsakis: ^
[17:10:27] *** Quits: StarLight (StarLight@moz-14932895.pppoe.avangarddsl.ru) (Ping timeout)
[17:12:49] <nmatsakis> in general, I chose not to wrap the libc calls
[17:12:56] <nmatsakis> that is, I wanted the libc exports to be the actual C function,
[17:13:03] <nmatsakis> not a Rust wrapper around the C fn
[17:13:12] *** Joins: eholk_ (eholk@D661EF7.48D4C455.51B6877.IP)
[17:13:21] <SimonSapin> nmatsakis: should I use a wrapper when calling free() ?
[17:14:30] *** Joins: StarLight (StarLight@moz-7B293BE1.dynamic.avangarddsl.ru)
[17:16:26] *** Joins: huseby (huseby@13F2CEC5.7672369.D8E68FF6.IP)
[17:16:41] <SimonSapin> uh. " error: macros cannot expand to foreign items"
[17:17:39] <SimonSapin> oh, remove the enclosing extern {}
[17:18:51] *** Joins: Kruppe (user@moz-4DDA8AB8.uwaterloo.ca)
[17:19:03] *** Quits: eholk_ (eholk@D661EF7.48D4C455.51B6877.IP) (Ping timeout)
[17:20:15] *** Joins: eholk_ (eholk@17834F9A.203A7E5B.51B6877.IP)
[17:20:54] *** Joins: lkuper (lkuper@moz-D862222C.dhcp-bl.indiana.edu)
[17:21:32] *** Joins: threecreepio (jdp@moz-71E164C9.cust.bredbandsbolaget.se)
[17:24:01] <nmatsakis> SimonSapin: I guess that depends
[17:24:40] <nmatsakis> SimonSapin: the main reason to use a wrapper is convenience, but if you've got a rust fn that's just calling libc and doing a bit of other stuff, you can also just label it with fixed_stack_segment directly (that's what I tended to do in the libs)
[17:24:48] <SimonSapin> I added fixed_stack_segment to the calling function. Thatâ€™s more than needed, but itâ€™ll do for now
[17:25:06] <nmatsakis> particularly if you call multiple C fns or in a loop, it makes sense to do it in the caller
[17:25:50] *** Joins: ecr (Thunderbir@moz-BBE3ABD.mv.mozilla.com)
[17:26:40] *** Quits: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net) (Ping timeout)
[17:28:22] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[17:28:54] *** Joins: sk (sk@61A494B3.BA40E8A.AAC02D62.IP)
[17:29:27] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[17:29:45] *** zz_kimundi is now known as kimundi
[17:30:13] *** Joins: a_m0d (dschoof@moz-670D1285.commercial.cgocable.net)
[17:32:43] *** Quits: erickt (etryzelaar@2571F7A1.50CA9683.D51AEBE4.IP) (Ping timeout)
[17:33:13] *** Quits: huseby (huseby@13F2CEC5.7672369.D8E68FF6.IP) (Ping timeout)
[17:33:13] *** Quits: CarpNet (ac@moz-FD24B77.sohonet.co.uk) (Quit: Leaving)
[17:33:30] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[17:33:43] *** Joins: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net)
[17:35:19] *** Joins: echristo (echristo@DCF57675.D6CCE4AE.77834EAA.IP)
[17:36:16] <SimonSapin> Iâ€™m updating https://github.com/mozilla/servo/blob/master/src/components/util/tree.rs to now rust - whatâ€™s the syntax to call a static method (without self) in a default method of a generic trait?
[17:36:36] <SimonSapin> specifically, https://github.com/mozilla/servo/blob/master/src/components/util/tree.rs#L10
[17:37:01] <SimonSapin> "TreeNodeRef::<Node>::$fun($node)" gives "error: cannot determine a type for this bounded type parameter: unconstrained type"
[17:37:13] <SimonSapin> though a similar change worked in L34
[17:37:31] <SimonSapin> (in an impl instead of a default method)
[17:39:05] *** Joins: maik (maik___@moz-81035A5A.dip0.t-ipconnect.de)
[17:39:13] *** Quits: anders (anders@moz-329650BE.cust.bredbandsbolaget.se) (Quit: anders)
[17:39:21] <jdm> SimonSapin: you need Node<ScriptView>, don't you?
[17:39:34] <SimonSapin> jdm: no idea :)
[17:40:07] *** Quits: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net) (Ping timeout)
[17:40:11] <SimonSapin> Node seems to be a parameter in trait TreeNodeRef<Node>
[17:40:15] <jdm> oh
[17:42:02] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[17:42:02] *** ChanServ sets mode: +ao pcwalton pcwalton
[17:42:03] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Quit: .)
[17:44:26] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[17:45:08] <LRN> how to do flags in Rust?
[17:45:14] <cmr> LRN: Command line flags?
[17:45:20] <LRN> binwise flags
[17:45:24] <LRN> s/bin/bit/
[17:45:28] <cmr> same way you'd do it in C
[17:45:41] <jeaye> Standard bitwise operators, but complement is ! and not ~
[17:45:46] <cmr> rusti: static X: uint = 0x1; static Y: uint = 0x2; X | Y
[17:45:47] -rusti- 3
[17:45:47] <LRN> enum Foo { A, B, C}; let x: Foo = A | B; ?
[17:45:59] <cmr> LRN: enums aren't flags.
[17:46:13] <bstrie> well, they can have integer values
[17:46:24] *** Joins: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net)
[17:46:28] <bstrie> so you could probably use them like that
[17:46:48] <cmr> you need to assign the discriminants and cast them to uint
[17:46:59] <engla> the problem is you're likely to produce a value that doesn't exist in the enum
[17:47:02] <cmr> enum Foo { A = 1, B = 1 << 1, C = 1 << 2}
[17:47:13] <engla> A | B => something not Foo
[17:47:33] <cmr> Using statics is better than using enums, enums aren't really meant for this in Rust.
[17:47:42] <LRN> is there a more rust-y way of doing things that bit flags do in C?
[17:47:58] <bstrie> isn't there also a bitvector type lying around?
[17:48:00] <cmr> LRN: ~[Foo], EnumSet
[17:48:20] <SimonSapin> bstrie: yes, extra::bitv
[17:48:28] <cmr> none of the interfaces are really satisfactory.
[17:48:43] *** Joins: huseby (huseby@13F2CEC5.7672369.D8E68FF6.IP)
[17:48:45] <SimonSapin> so, calling static methods of the same trait from default methods, anyone?
[17:49:02] *** Quits: squiddy_ (squiddy@moz-A342B116.adsl.alicedsl.de) (Input/output error)
[17:49:10] <cmr> SimonSapin: Self::foo()?
[17:49:19] <ecr> SimonSapin: I was trying to do that the other day and it complained about some missing type variable
[17:49:19] <cmr> Also they're not static methods, they're associated functions.
[17:49:21] *** Joins: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP)
[17:49:32] <cmr> ecr: likely the implicit self
[17:49:33] <SimonSapin> ok, associated functions
[17:49:46] <benh> Haven't we been calling them static methods for the longest time
[17:50:00] <SimonSapin> cmr: "error: unresolved name `Self::set_parent_node`."
[17:50:10] <cmr> SimonSapin: alright, you'll probably just need to use the trait name then.
[17:50:16] <cmr> benh: maybe, but that's not what they are.
[17:50:29] <bstrie> benh: a long time ago we didn't also have "static" as a keyword
[17:50:29] <ecr> cmr: what's the difference in your mind?
[17:50:47] <SimonSapin> cmr: it previously was Trait::method::<Node,Self>(), but that doesnâ€™t build anymore
[17:51:09] <bstrie> in fact the term "static methods" came before we had global variables at all
[17:51:12] <cmr> SimonSapin: let x: Self = Trait::method::<Node>(), perhaps? There's some changes in that area, kinda transitory.
[17:51:26] <cmr> ecr: Associated methods are like any other associated item, the rest just aren't implemented yet.
[17:51:29] *** Quits: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net) (Quit: Textual IRC Client: www.textualapp.com)
[17:51:35] *** Joins: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net)
[17:51:37] *** Joins: azakai (alon@moz-BBE3ABD.mv.mozilla.com)
[17:51:39] <cmr> ecr: Static methods are a thing classes have in OOP languages.
[17:52:06] <SimonSapin> cmr: Iâ€™m trying to get Servo to get unrelated rust changes
[17:52:12] <SimonSapin> to upgrade* Servo
[17:52:21] <bstrie> I agree with cmr, if we expect to have associated types one day then "associated methods" makes more sense than "static methods"
[17:52:28] <cmr> They're neither methods (they take no self/they don't send any message to an object because it can't have state) nor more static than anything else.
[17:52:30] <benh> I have a hard time appreciating the difference in terminology between Type::func(...) in C++ and Type::func(...) in rust ;)
[17:52:45] <benh> though I suppose they call them static member function and not methods over there :/
[17:53:04] <cmr> benh: it can also be let x: Type::T = Type::func(...) in the future.
[17:53:20] <benh> C++ can do that too :D
[17:53:21] <bstrie> cmr: they're static in the java sense, or something
[17:53:29] *** Quits: maik (maik___@moz-81035A5A.dip0.t-ipconnect.de) (Ping timeout)
[17:53:59] <cmr> benh: it's the same concept, but the name "static method" is wrong in every sense of both words.
[17:54:03] <cmr> (in Rust)
[17:54:24] <ecr> well 'method' really just means a function associated with a type
[17:54:32] *** Joins: erickt (etryzelaar@2571F7A1.50CA9683.D51AEBE4.IP)
[17:54:40] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[17:56:13] *** Quits: RMF (RMF@A3A10308.EB26598F.8D19547B.IP) (Ping timeout)
[17:56:33] *** Quits: jez0990 (quassel@moz-3BA8545E.kimsufi.com) (Ping timeout)
[17:57:12] *** Quits: eholk_ (eholk@17834F9A.203A7E5B.51B6877.IP) (Quit: eholk_)
[17:58:09] *** Joins: jez0990 (quassel@moz-3BA8545E.kimsufi.com)
[18:00:00] *** Joins: RMF (RMF@moz-9A206CFB.dsl.telepac.pt)
[18:01:00] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[18:02:31] *** Quits: Siyo (Siyo@A89938F4.87DAA49F.F113998C.IP) (Ping timeout)
[18:02:47] *** Joins: pnkfelix1 (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[18:02:52] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[18:04:28] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[18:04:30] *** Quits: tjc (tjc@moz-6EB4E533.dsl.tsoft.com) (Quit: zzzzzzzzzz)
[18:05:35] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[18:05:35] *** ChanServ sets mode: +ao brson brson
[18:05:52] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[18:05:52] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/JEQmyw
[18:05:52] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[18:08:14] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[18:08:14] *** ChanServ sets mode: +ao pcwalton pcwalton
[18:10:25] <tikue> if you wanted to track the number of times a static method was called, how would you do that?
[18:10:33] <tikue> in rust ofc
[18:10:49] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[18:10:49] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/OKg-aA
[18:10:49] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[18:10:51] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[18:10:51] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/A-UU7A
[18:10:51] <ghrust> 13rust/06auto 14dc30005 15Jason Fager: Remove the iter module....
[18:10:51] <ghrust> 13rust/06auto 14a6835dd 15bors: auto merge of #8842 : jfager/rust/remove-iter-module, r=pnkfelix...
[18:10:51] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[18:10:55] <tikue> static mutable state with a lock?
[18:11:04] <bblum> tikue: try a static mut atomic and just xadd on it
[18:11:20] <tikue> bblum: where are atomics stored in the stdlib
[18:11:26] <bblum> unstable::atomics
[18:11:31] <tikue> ooh scary
[18:12:05] *** flaper87|afk is now known as flaper87
[18:12:10] <bblum> you probably actually want to use the atomic intrinsics that said library is built on top of, because you can't statically initialize an AtomicInt or whatever
[18:12:22] <bblum> see assert_once_ever!() in libstd/macros.rs for guidance
[18:12:41] <tikue> need ctfe
[18:12:43] <tikue> :O)
[18:12:56] <bblum> yeah it'll make a lot of things a bunch nicer when it arrives
[18:13:07] <tikue> what are the rules for CTFE?
[18:13:10] <tikue> in general?
[18:13:19] <bblum> i don't know
[18:13:35] <tikue> is it actually planned?
[18:13:39] *** Quits: pnkfelix1 (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: Leaving.)
[18:13:45] <bblum> yeah, might be a post-1.0 feature though
[18:13:57] <bstrie> bblum: I thought graydon was against full-blown ctfe
[18:14:10] <bblum> hmm well
[18:14:15] <bblum> i don't know :P
[18:14:20] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[18:14:24] <bstrie> something to do with making compilation decidable :P
[18:14:26] <ecr> I'm trying to call an associated function of a trait in a default method on the same trait with the syntax Trait::method(), but I'm getting complaints about "cannot determine a type for this bounded type parameter: unconstrained type"
[18:14:29] <ecr> suggestions?
[18:15:12] <bstrie> ecr: might very well be a bug
[18:15:13] <bblum> Trait::method::<Self>() ?
[18:15:14] <bstrie> but I'm not sure
[18:15:23] <bblum> or whatever
[18:16:17] <tikue> in D, you can just write ```const Foo foo = make_foo();```
[18:16:39] <tikue> it'd be so nice if you could do that in rust
[18:17:11] <tikue> ```static foo: Foo = make_foo();```
[18:17:14] <bstrie> tikue: our ctfe is not intended to be anywhere as ambitious, at least not for a few years
[18:17:31] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[18:17:32] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Input/output error)
[18:17:57] <tikue> bstrie: i'm assuming it'll have specific syntax for making something evaluate at compile time?
[18:18:25] <bstrie> tikue: we do have syntax for that, anything followed by an exclamation point :P
[18:18:51] <tikue> well that won't evaluate functions :)
[18:19:20] <bstrie> tikue: iirc robust ctfe is not a goal for rust. graydon wants to keep compilation decidable.
[18:19:20] <erickt> ecr / bblum: I heard that Trait::method::<Self>() may be removed in master to prep for Trait::<Self>::method(). I'm not sure if that new syntax works yet. Instead you could try `let foo: Self = Trait::method()`
[18:20:04] *** Joins: miza (Mibbit@moz-4DD51325.home.otenet.gr)
[18:20:14] <ecr> bblum, bstrie, erickt: Trait::method::<Self>() worked for me, but I'm not on top of master at the moment. What's this implicit Self about anyway?
[18:20:36] <bstrie> ecr: `Self` in a trait always refers to the type that that trait is implemented on
[18:20:50] <tikue> bstrie: what would be the difference between robust ctfe and rust ctfe? how do you keep it decidable?
[18:20:51] <miza> when rust will release the next version?
[18:20:57] <cmr> miza: a month or so
[18:21:03] <cmr> miza: we release every 3 months
[18:21:06] <miza> i try to build it from monster
[18:21:14] <miza> but i have problem with sketch
[18:21:32] <cmr> yes, rusti is frequently not-fully-working.
[18:21:34] <bstrie> tikue: once you allow loops or recursion at compile time, you're undecidable
[18:21:38] <miza> and after i builded  0.7
[18:21:47] <bstrie> well, recursion would just blow the stack
[18:22:05] <tikue> bstrie: ok, so presumably there'd be a subset of rust that will cooperate with CTFE?
[18:22:07] <cmr> bstrie: we already have recursion with macros.
[18:22:11] <miza> i have one more question
[18:22:18] <cmr> tikue: pcwalton had some concrete ideas for CTFE
[18:22:20] <bstrie> cmr: ssh, I'm glossing over those :P
[18:22:27] <cmr> try and beat them out of him ;)
[18:22:28] <ecr> bstrie: ah, ok. so it's basically the dictionary of functions in the trait and that's how it knows what implementation to pick
[18:22:33] <kimundi> isn't there some ctfe plan based on syntax extensions?
[18:22:33] <tikue> cmr: did he write a post or something for reference?
[18:22:40] <cmr> tikue: I don't think so, unfortunately/
[18:22:47] <tikue> kk
[18:22:48] <bstrie> tikue: we're not against "blessing" specific functions as being allowed in constant expressions. stuff like sizeof()
[18:23:17] <miza> when u request from a vector an index that not exist, is properly work to has error?
[18:23:25] <cmr> miza: yes.
[18:23:28] <tikue> bstrie: I think being able to construct objects at compile time is a worthy goal
[18:23:31] <cmr> rusti: let x = ~[1, 2, 3]; x[4]
[18:23:32] -rusti- task <unnamed> failed at 'index out of bounds: the len is 3 but the index is 4', <anon>:5
[18:23:32] -rusti- application terminated with error code 101
[18:23:40] <kimundi> miza: It will fail in a controlled way, yes
[18:24:01] <bstrie> tikue: perhaps the devs can be convinced, then :)
[18:24:08] <erickt> bstrie: what's ctfe stand for?
[18:24:12] <miza> why not return something like nil?
[18:24:14] <tikue> compile-time function evaluation
[18:24:16] <bstrie> erickt: compile-time function evaluation
[18:24:18] <SimonSapin> How do I represent null function pointers with https://github.com/mozilla/rust/pull/8666 ?
[18:24:22] <miza> is a way for something like this?
[18:24:27] <erickt> thanks :)
[18:24:33] <Ms2ger> SimonSapin, Option?
[18:24:41] <SimonSapin> ie. extern "C" fn
[18:24:49] <tikue> bstrie: something like a static hashmap, for instance, would be pretty cool
[18:24:51] <ecr> Option<extern "C" fn>
[18:24:58] <SimonSapin> Ms2ger: unsafe pointers
[18:25:04] <cmr> miza: You'd use a different datastructure, that's not a vector.
[18:25:04] <pcwalton> no please no subsets of rust
[18:25:04] <SimonSapin> to call C functions
[18:25:10] <bstrie> miza: you can write a function that tests an index against the length of the array, and returns nil if it's out of bounds
[18:25:13] <pcwalton> just use Scheme-style phasing
[18:25:18] <pcwalton> where you compile the "compile-time
[18:25:19] <pcwalton> "
[18:25:21] <pcwalton> part first
[18:25:26] <pcwalton> presumably using the JIT
[18:25:30] <pcwalton> and then can invoke that at runtime
[18:25:37] <cmr> miza: one that stores Option<T> and returns None for non-stored indicex
[18:25:40] <tikue> pcwalton: but what about decidability
[18:25:46] <pcwalton> decidability?
[18:25:51] <cmr> miza: so, basically, a hashmap does it best.
[18:26:02] <Ms2ger> Of the halting problem of compilation?
[18:26:07] <tikue> pcwalton: bstrie mentioned that graydon wants compilation to be decidable
[18:26:14] <bstrie> pcwalton: I've been saying that graydon was against ctfe because he wanted to keep compilation decidable. not sure if macros have already let that cat out of the bag
[18:26:17] <miza> cmr thanks you
[18:26:20] <pcwalton> I don't know what "decidable" means in this context
[18:26:25] <miza> i take a look for this
[18:26:28] *** Joins: busylizzy (lisa@85228838.12D0DC84.211374C4.IP)
[18:26:32] <tikue> pcwalton: that the compiler would always be able to finish compiling or error
[18:26:34] <bstrie> pcwalton: that you can't evaluate `loop {}` at compile time
[18:26:50] <pcwalton> we lost that a long time ago with syntax extensions
[18:26:52] <tikue> ah
[18:27:01] <cmr> (as I stated)
[18:27:04] <pcwalton> heck, we lost that with monomorphization
[18:27:06] <tikue> well in that case, onward with CTFE :P
[18:27:10] <bstrie> haha, really
[18:27:13] <cmr> pcwalton: monomorphization is undecidable?
[18:27:24] <pcwalton> cmr: you can make infinite towers of generic instantiation
[18:27:29] <cmr> fun!
[18:27:29] <pcwalton> for example
[18:27:49] <pcwalton> fn evil<T>(x: &T) { if 1 == 0 { evil(Some(x)) } }
[18:28:06] *** Quits: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net) (Quit: eatkinson)
[18:28:10] <pcwalton> this has a perfectly reasonable runtime semantics
[18:28:17] <cmr> rusti: fn evil<T>(x: &T) { if 1 == 0 { evil(Some(x)) } } evil(0u)
[18:28:17] <pcwalton> but it will cause the compiler to endlessly loop
[18:28:18] <pcwalton> \
[18:28:22] <erickt> haha
[18:28:23] -rusti- pastebinned 8 lines of output: http://ix.io/7FG
[18:28:35] <pcwalton> make it x: T
[18:28:38] <erickt> cmr: no monomorphization-bombing rusti
[18:28:41] <cmr> ah yes
[18:28:47] <cmr> erickt: pft, it's sandboxed.
[18:28:57] <erickt> I know :)
[18:29:02] <cmr> rusti: fn evil<T>(x: T) { if 1 == 0 { evil(Some(x)) } } evil(0u)
[18:29:03] -rusti- ()
[18:29:08] <bstrie> it's not bombing, we're stress testers :P
[18:29:14] <erickt> I really wanted just an excuse to say monomorphization-bombing
[18:29:17] <cmr> heh
[18:29:22] * LRN finally managed to get EnumSet to work - http://pastebin.com/hM065gBT
[18:29:44] <LRN> good thing there are tests for EnumSet, otherwise i never would have figured it out
[18:29:53] <bstrie> LRN: tests are our best documentation atm
[18:30:04] <cmr> that and #rust
[18:30:31] <LRN> from_uint() implementation is kind of lame
[18:30:47] <LRN> i couldn't use "FOO as uint" instead of 0x1, etc :(
[18:31:11] <cmr> rusti: enum Foo {A, B, C} [A as uint, B as uint, C as uint]
[18:31:12] -rusti- [0, 1, 2]
[18:31:30] <SimonSapin> Iâ€™m calling C functions that take a callback as a parameter. The parameterâ€™s type is a function pointer. With rust #8666, function pointers now have a rust type like 'extern "C" fn(â€¦)' instead of *u8. How do I pass a null pointer? (ie. no callback)
[18:31:35] *** Quits: miza (Mibbit@moz-4DD51325.home.otenet.gr) (Quit: http://www.mibbit.com ajax IRC Client)
[18:31:46] <LRN> cmr, but that does not work in match 
[18:31:53] <cmr> LRN: what doesn't?
[18:31:57] <SimonSapin> maybe '*extern "C" fn()' ?
[18:31:59] <Ralith> why was 'pure' removed, btw?
[18:32:16] <cmr> Ralith: largely unused, not useful.
[18:32:20] <sfackler> SimonSapin: Option<extern "C" fn()>
[18:32:23] <cmr> SimonSapin: extern "C" fn is already a pointer.
[18:32:25] <cmr> Use Option<...>
[18:32:31] *** Joins: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net)
[18:32:34] <cmr> It's optimized into single word, or should be.
[18:32:45] <tikue> rusti: enum Foo {A, B, C} match 0 { A@uint => "A", _ => ":(" }
[18:32:46] -rusti- <anon>:5:53: 5:54 error: unreachable pattern
[18:32:46] -rusti- <anon>:5          enum Foo {A, B, C} match 0 { A@uint => "A", _ => ":(" }
[18:32:46] -rusti-                                                               ^
[18:32:46] -rusti- error: aborting due to previous error
[18:32:47] -rusti- application terminated with error code 101
[18:32:49] <SimonSapin> cmr: will that do the right thing when calling a C function?
[18:32:55] <cmr> SimonSapin: it should...
[18:33:03] <SimonSapin> ehâ€¦
[18:33:13] <Ralith> cmr: why was it not useful?
[18:33:20] <tikue> rusti: enum Foo {A, B, C} match 0u { A@uint => "A", _ => ":(" }
[18:33:20] -rusti- <anon>:5:54: 5:55 error: unreachable pattern
[18:33:21] -rusti- <anon>:5          enum Foo {A, B, C} match 0u { A@uint => "A", _ => ":(" }
[18:33:21] -rusti-                                                                ^
[18:33:21] -rusti- error: aborting due to previous error
[18:33:21] -rusti- application terminated with error code 101
[18:33:26] <cmr> rusti: std::sys::size_of::<Option<extern "C" fn(x: uint)>>()
[18:33:26] -rusti- 8
[18:33:32] <cmr> SimonSapin: so yes, it will.
[18:33:33] <tikue> how do you cast in a match
[18:33:47] <cmr> tikue: you don't, unfortunately.
[18:33:59] <kimundi> Ralith: It did not express what other languages call 'pure' to begin with, was only ever introdoced for typestates, long gone, and infested everything
[18:34:00] <cmr> was removed after 0.6
[18:34:02] <SimonSapin> thatâ€™s suddenly a lot of refactoring, adding Some() everywhere
[18:34:07] <tikue> cmr: why?
[18:34:15] <cmr> SimonSapin: you could just transmute a 0
[18:34:27] <cmr> tikue: I don't remember, but whatever the reason it's very inconvenient.
[18:34:32] <pcwalton> SimonSapin: yeah, we actually discussed this yesterday
[18:34:37] <cmr> It would be 'A as uint'
[18:34:40] <pcwalton> I think it's fine to treat extern "C" fns as possibly-nullable
[18:34:43] <pcwalton> they're extern "C" anyway
[18:34:57] <LRN> cmr, enum foo {A, B, X}; fn bar (u: uint) -> foo { match u { A as uint => A, B as uint => B, _ => X } } // this does't work
[18:35:06] <tikue> rusti: enum Foo {A, B, C} match 0 { A as uint => "A", _ => ":(" }
[18:35:06] -rusti- <anon>:5:40: 5:42 error: expected `=>` but found `as`
[18:35:06] -rusti- <anon>:5          enum Foo {A, B, C} match 0 { A as uint => "A", _ => ":(" }
[18:35:06] -rusti-                                                  ^~
[18:35:06] -rusti- application terminated with error code 101
[18:35:17] <tikue> pcwalton: why was casting in match blocks removed?
[18:35:20] <cmr> LRN: yeah, it's unfortunate. See https://github.com/erickt/rust-zmq/blob/master/lib.rs#L109 as an example of what you need to do :(
[18:35:29] <SimonSapin> pcwalton: Iâ€™m porting rust-glfw as part of porting servo as part of getting your fix for #8707
[18:35:34] <kimundi> hm, instead of Some wrapping there could also be a .to_option() help method...
[18:35:42] <pcwalton> brson was hitting the same thing
[18:35:42] <LRN> cmr, that's exactly what i dod
[18:35:44] <pcwalton> he's porting servo as well
[18:35:46] <LRN> s/dod/did/
[18:35:56] <pcwalton> we discussed what to do and he decided to use Option
[18:36:00] <erickt> cmr / LRN: I'm hoping to land a syntax extension to auto-generate the enum-to-int-to-enum conversion impls
[18:36:00] <cmr> LRN: yes, but it's using the actual constants, not the enum values.
[18:36:05] <pcwalton> but I don't see anything morally wrong with transmuting a 0
[18:36:07] <cmr> erickt: awesome!
[18:36:24] *** Joins: miza (miza@moz-4DD51325.home.otenet.gr)
[18:36:26] <erickt> cmr / LRN: land *soon. Hopefully this weekend
[18:36:26] <pcwalton> because it's "writing C in Rust" in order to interface with C anyway, null pointers are part of C
[18:36:35] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[18:37:00] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[18:38:43] *** Joins: mschifer (Adium@moz-BBE3ABD.mv.mozilla.com)
[18:39:04] <SimonSapin> woot, replacing ptr::null() with calls to this seems to build: fn unsafe_null<T>() -> T { unsafe { cast::transmute(0) } }
[18:39:24] <pcwalton> it'd be nicer if that function were itself unsafe
[18:39:26] *** Quits: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: ChatZilla 0.9.90.1-rdmsoft [XULRunner 22.0/20130619132145])
[18:39:31] <pcwalton> because that breaks the type system of rust :)
[18:39:33] <tikue> jdm: in issue 5873, what do you mean "integral enum constant support in type signatures"? wouldn't the type signature just be uint or int or whatnot
[18:39:48] <SimonSapin> pcwalton: Iâ€™ll do that, and have unsafe{} on call sites
[18:39:52] <pcwalton> ok :)
[18:40:00] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[18:40:26] <jdm> tikue: it wasn't quite that easy; I forget why exactly.
[18:40:36] <tikue> ah ok
[18:41:18] *** Quits: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net) (Quit: eatkinson)
[18:41:58] <strcat> kimundi: if extern "C" fn is nullable, it can't be callable in safe code
[18:42:12] <strcat> and it is, right now
[18:42:15] <cmr> is calling extern "C" ever safe to call?
[18:42:19] <cmr> huh
[18:43:08] <kimundi> strcat: hm?
[18:43:37] *** Quits: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net) (Quit: Textual IRC Client: www.textualapp.com)
[18:43:41] *** Joins: valenting (Thunderbir@8758046C.84D5EFD5.FB866788.IP)
[18:44:30] <kimundi> strcat: Doesn't the nullable pointer optimisation imply that a extern "C" should never be null? And in any case a hypothetical to_option() could still return None in that case, so I'm not sure what you mean 
[18:44:48] *** Joins: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net)
[18:44:55] *** Quits: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net) (Quit: jorendorff)
[18:45:03] *** AutomatedTester|AFK is now known as AutomatedTester
[18:45:42] *** Joins: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net)
[18:46:44] *** Joins: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net)
[18:47:31] *** Quits: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP) (Quit: Textual IRC Client: www.textualapp.com)
[18:48:12] <jorendorff> brson: hey, got a sec?
[18:48:40] *** Quits: threecreepio (jdp@moz-71E164C9.cust.bredbandsbolaget.se) (Quit: threecreepio)
[18:50:58] *** Joins: Florob (Florob@moz-39532932.de)
[18:51:15] <jorendorff> separately, where can I find documentation for this kind of annotation:
[18:51:19] <jorendorff> #[deriving(Clone, Eq, Encodable, Decodable, IterBytes)]
[18:51:19] <jorendorff> pub enum binop { ... }
[18:51:21] *** Joins: threecreepio (jdp@moz-71E164C9.cust.bredbandsbolaget.se)
[18:51:44] <kmc> http://static.rust-lang.org/doc/rust.html#deriving
[18:51:49] *** Joins: dwhyte (dwhyte@DFA0622C.2732CD06.B7FCEB19.IP)
[18:52:13] <kmc> http://static.rust-lang.org/doc/rust.html#attributes for attributes generally
[18:52:50] <cmr> kmc is an op now!
[18:53:11] <cmr> jorendorff: the specific attributes aren't fully documented thougyh.
[18:53:29] <jorendorff> Thanks. enums aren't automatically Clone and Eq, when possible?
[18:53:34] <cmr> Nothing is.
[18:53:58] *** Quits: lmandel (lmandel@13F2CEC5.7672369.D8E68FF6.IP) (Quit: lmandel)
[18:54:22] <Eridius> is the auto-mac-64-opt builder ok? Both my PRs segfaulted on that builder, with no good reason (no unsafe code in either PR)
[18:54:31] <cmr> Eridius: no, it's not.
[18:54:42] *** Quits: lerc (quassel@B2E8CAD3.A8D14E52.788638A4.IP) (Ping timeout)
[18:54:45] <Eridius> bleh
[18:54:46] <pcwalton> looks like changing AST folding to use traits improves compilation speed a little bit
[18:54:47] <cmr> everything has been bouncing off of it.
[18:54:55] <kmc> some traits (Freeze, Send) are automatically implemented for suitable types, but Clone is not one of them
[18:55:12] <cmr> Freeze and Send are kinds and have no behavior, though.
[18:55:29] <jorendorff> i need to give the reference manual a thorough read
[18:55:40] <cmr> jorendorff: it's not always accurate or up-to-date unfortunately..
[18:55:46] <kmc> I object a little bit on principle to calling them "kinds" :)
[18:55:57] <pcwalton> "kind" is an obsolete term
[18:55:58] *** Quits: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net) (Ping timeout)
[18:55:58] <pcwalton> for them
[18:56:00] <jorendorff> cmr: so much the more reason to do it, it's a way i can contribute
[18:56:03] <cmr> I don't know anything about it but it's what they're documented as.
[18:56:05] <cmr> jorendorff: awesome!
[18:56:06] <kmc> it's still used in the manual though :<
[18:56:16] <pcwalton> yeah, feel free to submit patches to clean that up
[18:56:17] *** Joins: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net)
[18:56:18] <jorendorff> kmc: what should they be called?
[18:56:38] <pcwalton> built-in traits
[18:56:40] <pcwalton> special traits
[18:56:42] <pcwalton> something like that
[18:56:44] <kmc> yeah
[18:57:04] <Eridius> language traits?
[18:57:09] <pcwalton> macro expansion: 1.386 s -> 0.996 s
[18:57:12] <kmc> also it's weird that one of them is named 'static, which would be an illegal name otherwise
[18:57:14] <pcwalton> Eridius: I like that
[18:57:23] <pcwalton> kmc: it used to be named Durable
[18:57:25] <pcwalton> which is terrible
[18:57:41] <cmr> Mul and such are language traits too though?
[18:57:51] *** Quits: jclements (jclements@moz-CDAD933D.wireless.calpoly.edu) (Quit: jclements)
[18:57:57] <cmr> I mean basically anything that's a language item I could see that going for
[18:58:12] <strcat> they're never automatically implemented by the compiler
[18:58:13] <Eridius> cmr: well they're traits that implement language items..
[18:58:16] <kmc> so in which contexts do you need to refer to Freeze and Send and 'static as a set, but not include Mul or Clone
[18:58:16] <jorendorff> "Automatic Traits"
[18:58:24] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[18:58:25] *** Quits: eholk (eholk@moz-BA312F07.crest.iu.edu) (Quit: eholk)
[18:58:27] *** Joins: jclements (jclements@moz-CDAD933D.wireless.calpoly.edu)
[18:58:30] <cmr> Automatic Traits sounds good to me
[18:58:33] <Eridius> implicit traits
[18:58:40] <jorendorff> implicit sounds cooler!
[18:58:40] <cmr> implicit also good
[18:58:42] <strcat> kmc: Clone has no support in the compiler, it's not a lang item
[18:58:49] <jorendorff> system traits
[18:58:50] *** Quits: threecreepio (jdp@moz-71E164C9.cust.bredbandsbolaget.se) (Quit: threecreepio)
[18:58:55] <kmc> strcat: I know
[18:59:07] <cmr> kmc: Send and Freeze and 'static are properties of data, the other traits are behavior... right?
[18:59:24] *** Joins: steven_is_false (user@C5B76363.1FF1EBF8.1ECA502.IP)
[18:59:33] <tedh> i'm getting an error doing a fresh build of master:
[18:59:37] <kmc> I would ask "what's the difference between properties and behavior" but that's getting a little philosophical ;P
[18:59:39] <strcat> they're essentially still behaviour, Send lets you send something
[18:59:56] <tedh> compile: rustllvm/x86_64-apple-darwin/PassWrapper.o
[18:59:56] <tedh> /Users/ted/Developer/OpenSource/rust/src/rustllvm/PassWrapper.cpp:15:43: error: llvm/Support/CBindingWrapping.h: No such file or directory
[19:00:03] <cmr> tedh: re-run configure?
[19:00:34] <tedh> i did that, this was a fresh build dir
[19:01:02] <steven_is_false> Hello. I'm trying to debug bug https://github.com/mozilla/rust/issues/8647 , and I currently have a diff of the disassembly of the stripped, and unstripped versions of the library open in Emacs. Where should in particular?
[19:01:18] <cmr> steven_is_false: you asked me a question about ~/.local when I wasn't arund.
[19:01:25] <dcrewi> is there some way to search issues on github that I'm not aware of?
[19:01:34] <cmr> dcrewi: the bar up top is a search as well.
[19:01:37] <cmr> but it's not that great.
[19:01:40] <steven_is_false> cmr: Actually I figured the problem out now.
[19:01:46] <cmr> steven_is_false: ok, cool
[19:01:51] <steven_is_false> cmr: Thanks for kind though.
[19:01:51] <dcrewi> because it's kind of hard to determine whether a given issue has already been filed
[19:02:29] <steven_is_false> dcrewi: I think someone somewhere made a GitHub issue viewer.
[19:02:37] *** Quits: fyolnish (fyolnish@moz-DBD18DC5.uqwimax.jp) (Client exited)
[19:02:47] *** Joins: tjc (tjc@moz-43408A86.tmodns.net)
[19:02:47] *** ChanServ sets mode: +o tjc
[19:03:15] <cmr> http://githubissues.herokuapp.com/ ?
[19:03:18] <nsf> https://github.com/sebcrozet/nphysics/blob/master/examples/balls_vee3d.rs#L8-L36
[19:03:20] <nsf> omg
[19:03:23] <nsf> is this ok? :)
[19:03:46] <nsf> for a 150 lines file :(
[19:04:16] <sebcrozet> nsf: yeah, there a a lot of imports.
[19:04:40] <cmr> sebcrozet: could probably do with a prelude-sort-of-thing and use nfoo::prelude::*
[19:04:51] *** Quits: ecr (Thunderbir@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[19:05:17] *** Quits: tjc (tjc@moz-43408A86.tmodns.net) (Ping timeout)
[19:05:38] <sebcrozet> cmr: yes. But last time I tried the `use whatever::*` to re-export a module was broken.
[19:05:51] <cmr> sebcrozet: ah, unfortunate.
[19:05:55] *** Quits: riley (riley@8BA43816.9AA11D69.65DDFA89.IP) (Client exited)
[19:06:19] <nsf> sebcrozet: btw, thanks for that nphysics thing, I was looking for a heavy math code example in rust, it looks perfect
[19:06:26] <nsf> for an example :)
[19:06:38] *** Joins: tjc (tjc@moz-43408A86.tmodns.net)
[19:06:38] *** ChanServ sets mode: +o tjc
[19:07:23] <sebcrozet> nsf: youâ€™re welcome :)
[19:08:19] *** Quits: tjc (tjc@moz-43408A86.tmodns.net) (Ping timeout)
[19:08:47] <sebcrozet> nsf: once this module re-export thing is fixed in rustc, Iâ€™ll t fix this lot-of-import thing.
[19:09:30] <sebcrozet> nsf: atm, I think the only solution would be to merge some modules togetherâ€¦ but thatâ€™s uggly.
[19:09:38] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[19:10:08] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[19:10:44] <nsf> sure, sure
[19:12:00] <nsf> I'm relatively new to rust, only wrote a single module :) so I'm not really aware of module system quirks
[19:12:07] <cmr> it's mostly bugs, not quirks.
[19:12:23] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[19:12:40] <nsf> by quirks I meant bugs as well
[19:12:46] <cmr> ah
[19:13:16] *** Joins: tjc (tjc@moz-43408A86.tmodns.net)
[19:13:16] *** ChanServ sets mode: +o tjc
[19:15:26] *** dherman is now known as dherman-lunch
[19:16:04] *** Joins: five (five@FC8B9D7D.C4AAC3ED.10BB00EE.IP)
[19:16:09] <jmgrosen> sebcrozet: the kiss3d examples just bring up a black screen when I run them -- have you tested them on OS X?
[19:17:44] *** Quits: five (five@FC8B9D7D.C4AAC3ED.10BB00EE.IP) (Ping timeout)
[19:17:51] <sebcrozet> jmgrosen: I tested them on OS X one month agoâ€¦ so It might not work any more.
[19:18:53] *** Quits: Ms2ger (Ms2ger@moz-982ABA97.adsl-dyn.isp.belgacom.be) (Quit: nn)
[19:19:08] <steven_is_false> Hoorah! My guess is correct, ld --gc-sections is completely gcing the .note.rustc section, and the included <rust_metadata> symbol (which is a function?) Why would --gc-sections 
[19:19:47] <steven_is_false> * Why would --gc-sections be gcing the .note.rustc section?
[19:20:10] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[19:20:20] <strcat> it's working as expected
[19:20:28] <strcat> the note section isn't required by binaries
[19:20:46] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[19:20:47] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/A-UU7A
[19:20:47] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[19:20:55] <strcat> if you compile something against the non-gc'ed lib but link it with the gc'ed one, it would still work
[19:21:07] <strcat> not much else it would actually be able to gc
[19:21:25] <steven_is_false> strcat: Actually I get a substantial savings from --gc-sections.
[19:21:33] *** Joins: five (five@FC8B9D7D.C4AAC3ED.10BB00EE.IP)
[19:21:38] <sebcrozet> jmgrosen: Iâ€™ll see if I get a black screen too. I just have to reinstall OSX and rust on my mac :)
[19:21:39] <strcat> what other sections does it gc?
[19:21:41] <strcat> steven_is_false: 
[19:21:54] *** Quits: tjc (tjc@moz-43408A86.tmodns.net) (Quit: zzzzzzzzzz)
[19:21:55] *** Quits: gazoombo (uid6629@moz-E77DEB21.irccloud.com) (Ping timeout)
[19:21:57] *** Quits: geomyidae__ (uid214@moz-E77DEB21.irccloud.com) (Ping timeout)
[19:21:59] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Ping timeout)
[19:22:05] <strcat> would not be surprised if the savings were the lack of metadata
[19:22:31] <steven_is_false> strcat: In one crate in particular I have a lot of waste but that's a special case.
[19:22:55] *** Quits: miza (miza@moz-4DD51325.home.otenet.gr) (Input/output error)
[19:23:03] <steven_is_false> Give me five seconds while I grep the diffs.
[19:24:13] *** Quits: five (five@FC8B9D7D.C4AAC3ED.10BB00EE.IP) (Ping timeout)
[19:24:17] <steven_is_false> The one special case where I get a lot of savings is where I have a core_assets crate that only defines static data like the mesh for my 3D models.
[19:24:32] *** Joins: gazoombo (uid6629@moz-E77DEB21.irccloud.com)
[19:25:47] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[19:25:47] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/8DUprg
[19:25:47] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[19:25:51] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[19:25:51] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/qoO61w
[19:25:51] <ghrust> 13rust/06auto 14bb470a0 15Tim Chevalier: rustc: Change a stray error! statement to debug!
[19:25:51] <ghrust> 13rust/06auto 14b4e4f30 15Tim Chevalier: std: Add a file-renaming function to std::os
[19:25:52] <ghrust> 13rust/06auto 14dd3c290 15Tim Chevalier: rustpkg: Add a not_a_workspace condition
[19:25:54] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[19:26:06] *** Joins: geomyidae__ (uid214@moz-E77DEB21.irccloud.com)
[19:26:45] <steven_is_false> I dunno is 453323 bytes vs 74365 bytes very big in savings (this is my biggest win for my special case only data crate though?)
[19:27:30] <strcat> steven_is_false: I have a feeling it would just be because rustc outputs it all as metadata though
[19:27:58] <steven_is_false> strcat: Rust outputs static data as metadata?
[19:28:02] <cmr> metadata for libstd is 700k
[19:28:07] <strcat> steven_is_false: I think so
[19:28:15] <cmr> it does?
[19:28:32] <strcat> yes if you change the definitions of statics you need to recompile iirc
[19:28:40] *** Joins: anders (anders@moz-329650BE.cust.bredbandsbolaget.se)
[19:29:34] <steven_is_false> Well okay, I guess this is sort of fair. I just need to have some sort of --gc-sections as a pass later on after I link everything.
[19:32:07] *** Joins: five (five@FC8B9D7D.C4AAC3ED.10BB00EE.IP)
[19:32:11] *** Joins: tjc (tjc@moz-43408A86.tmodns.net)
[19:32:12] *** ChanServ sets mode: +o tjc
[19:34:09] *** Quits: five (five@FC8B9D7D.C4AAC3ED.10BB00EE.IP) (Connection reset by peer)
[19:35:15] <steven_is_false> ld -shared --gc-sections ungc/libfoo.so -o gc/libfoo.so wouldn't work right?
[19:35:37] <cmr> can strip do it?
[19:36:30] <steven_is_false> cmr: I don't think so which is odd.
[19:38:39] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.1)
[19:41:19] <brson> jorendorff: not right now. will ping later
[19:41:27] <jorendorff> no worries
[19:42:10] *** Joins: squiddy (squiddy@moz-A342B116.adsl.alicedsl.de)
[19:43:00] *** Quits: tjc (tjc@moz-43408A86.tmodns.net) (Quit: zzzzzzzzzz)
[19:45:09] *** Quits: feduser (feduser@650B4444.AAE9A62C.650F25DA.IP) (Ping timeout)
[19:50:57] *** Joins: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP)
[19:52:48] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.1)
[19:53:13] <zol> If I want a resizable list/array, what should I look for?
[19:53:25] <kimundi> just use a vector
[19:53:52] <kimundi> rusti: let mut v = ~[]; v.push("Hello"); v
[19:53:53] -rusti- ~["Hello"]
[19:54:17] <zol> kimundi: Many thank yous!
[19:54:26] <kimundi> :)
[19:54:46] *** Quits: huseby (huseby@13F2CEC5.7672369.D8E68FF6.IP) (Quit: Leaving)
[19:54:48] *** ozten is now known as ozten|lunch
[19:59:02] *** Joins: ecr (Thunderbir@moz-BBE3ABD.mv.mozilla.com)
[19:59:26] *** Quits: erickt (etryzelaar@2571F7A1.50CA9683.D51AEBE4.IP) (Ping timeout)
[19:59:29] <Earnestea> So will we see a "The Rust Programming Language" book anytime soon? :P
[19:59:37] *** Quits: steven_is_false (user@C5B76363.1FF1EBF8.1ECA502.IP) (Ping timeout)
[20:00:14] <mcpherrin> Earnestea: Books are too slow moving :P
[20:00:38] <kimundi> I'm still waiting for "C++ for Rust programmers"
[20:00:45] <Earnestea> Heh
[20:00:53] <mcpherrin> kimundi: heh, that would be amusing :P
[20:01:00] <Earnestea> mcpherrin: Upload it as md sources with a pandoc build script \o/
[20:01:15] <Earnestea> (I've been making silly little ebooks from your current docs)
[20:01:31] <mcpherrin> Print off a hard copy each release? ;P
[20:01:50] <Earnestea> No need to waste the ink and paper, until it's "done"
[20:02:40] *** Joins: _Y_ (Mibbit@moz-56678B1C.dynamic.isp.telekom.rs)
[20:02:46] <_Y_> Hi rusters
[20:02:56] <_Y_> anyone here?
[20:02:59] <kmc> hi
[20:03:09] <kimundi> yep
[20:03:13] *** Quits: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP) (Quit: Textual IRC Client: www.textualapp.com)
[20:03:14] <_Y_> :D
[20:03:15] <_Y_> I got a really newbie question 
[20:03:59] <kimundi> no problem, just ask :)
[20:04:09] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[20:04:29] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[20:04:35] <_Y_> got something like this : http://pastebin.com/Lsg2bJQH
[20:04:48] <_Y_> wanted to paste it here, but not really easy to view
[20:05:06] <_Y_> I got an Impl on a life time struct
[20:05:21] <_Y_> I got an Impl on a life time struct and it keeps yelling that it needs lifetimes
[20:05:49] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[20:05:49] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 149532fb8 to 14a6835dd: 02http://git.io/N3iJvQ
[20:05:49] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[20:05:50] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[20:05:51] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/JLFpDQ
[20:05:51] <ghrust> 13rust/06auto 144cf8671 15Ilyong Cho: mk: Fix libuv makefile generation on android
[20:05:51] <ghrust> 13rust/06auto 14698873e 15bors: auto merge of #8848 : ILyoan/rust/mk_libuv, r=cmr
[20:05:51] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[20:06:01] <kimundi> impl <'self> Foo<'self>
[20:06:14] <kimundi> IS what you need to write
[20:06:17] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[20:06:27] <_Y_> huh, but why?
[20:06:33] <kimundi> "Implement these methods generically for all lifetimes 'self"
[20:06:53] <kimundi> _Y_: It's a bit more obvious with normal type params
[20:07:41] <kimundi> impl <'self, T: Clone> Foo<'self, T> { // ... some functions that only work with a clonable T}
[20:07:58] <_Y_> aahh
[20:08:00] <_Y_> I see
[20:08:28] *** Joins: five (five@F2A741AD.60AE38FD.6D9B563.IP)
[20:08:33] <engla> I guess it's possible to write   impl Foo<'static> for methods that only are defined when the lifetime is 'static
[20:08:53] <kimundi> basically, the first <...> declare on what you implement, and all <...> after that just can refer to that
[20:09:06] <kimundi> doesn't even have to match
[20:09:24] <kimundi> impl <T: Clone> Foo<int> { ... }
[20:09:50] <kmc> yeah, impl<...> binds type variables and everything after can use them
[20:10:03] <engla> in the whole impl block
[20:10:09] <kmc> yep
[20:10:13] <_Y_> so I assume  int is cloneable?
[20:10:35] <_Y_> it matches the T constraint, right?
[20:10:57] <kimundi> No, that is just an example where you have a situation where those two <...> have no connection with each other
[20:11:32] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[20:11:37] <kimundi> "For all T that satisfy Clone, implement the specific type Foo<int>"
[20:11:54] *** Quits: mihneadb (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net) (Connection reset by peer)
[20:11:57] *** Joins: mihneadb_ (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net)
[20:12:08] <kimundi> In other words, T doesn't appear in the type your implementing ;)
[20:12:37] <kimundi> Can just use it as parameter on methods or associated functions
[20:12:52] *** Quits: maxli (maxli@13F2CEC5.7672369.D8E68FF6.IP) (Quit: Leaving.)
[20:13:05] <kmc> though it would be more common to bind a parameter on each individual method which needs it, I think
[20:13:17] <kimundi> impl <T: Clone> Foo<int> { fn magic(&self, v: T); }
[20:13:29] *** Joins: victorporof (victorporo@moz-18BD542A.pck.nerim.net)
[20:13:41] <kimundi> kmc: Probably, yeah
[20:13:42] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[20:13:50] <kmc> impl Foo<int> { fn magic<T: Clone>(&self, v: T); }
[20:14:10] <kimundi> yup, those two would be equivalent here, I think
[20:14:11] <kmc> I could see the readability advantage of binding the variables once, although I worry that there will be compiler bugs
[20:15:34] *** Quits: five (five@F2A741AD.60AE38FD.6D9B563.IP) (Connection reset by peer)
[20:15:58] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[20:17:04] *** Quits: dherman-lunch (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman-lunch)
[20:17:50] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[20:18:35] *** Joins: vadimcn (chatzilla@A2267643.76F9E272.DA40C4B3.IP)
[20:19:04] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[20:19:43] <_Y_> Hmm I still can't wrap my head around these blasted lifetimes
[20:20:19] *** Joins: riley (riley@8BA43816.9AA11D69.65DDFA89.IP)
[20:20:24] *** mihneadb_ is now known as mihneadb
[20:20:45] *** Quits: bytewise (bytewise@moz-4A801D04.unitymediagroup.de) (Quit: Leaving)
[20:20:59] *** Joins: maik (maik___@moz-81035A5A.dip0.t-ipconnect.de)
[20:21:49] <kimundi> _Y_ What do you have trouble with?
[20:22:35] *** Joins: bytewise (bytewise@moz-4A801D04.unitymediagroup.de)
[20:22:37] <_Y_> Initially I had this structure that had no & pointers, but now since I've added the lifetime pointers
[20:23:06] <_Y_> the more pointers I add the more pointers I need to convert to &pointers
[20:23:30] <_Y_> basically I'm stuck at this
[20:23:55] <_Y_> http://pastebin.com/CA3H6V6x
[20:24:48] *** Joins: eatkinson (eatkinson@moz-CA279DDD.airbears.berkeley.edu)
[20:24:50] *** Quits: eatkinson (eatkinson@moz-CA279DDD.airbears.berkeley.edu) (Quit: eatkinson)
[20:25:14] <kimundi> _Y_ Okay, two things
[20:26:08] *** Quits: azakai (alon@moz-BBE3ABD.mv.mozilla.com) (Quit: Ex-Chat)
[20:26:17] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[20:26:46] *** Quits: victorporof (victorporo@moz-18BD542A.pck.nerim.net) (Ping timeout)
[20:27:31] <kimundi> _Y_: Or rather, one thing. You have added a pointer in both Matrix and Source, and are trying to return a Matrix in copy()
[20:29:56] <kimundi> Problem is, in order to return a Matrix, you need to first create a Source ouside of copy() and pass a &ptr to it into copy() so that copy can store that pointer in a new Matrix
[20:30:15] <kimundi> what you probably want to do is:
[20:30:31] <tedh> just fyi: my previous problem was a submodule update gone wrong, fresh checkout fixed it
[20:30:38] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[20:30:50] *** Joins: carllerche (carllerche@1E2EB9E3.186539A3.965084DF.IP)
[20:30:54] <kimundi> remove the &'Self from Matrix
[20:31:01] <kimundi> err, &'self
[20:31:22] *** ozten|lunch is now known as ozten
[20:31:22] <kimundi> so just  pub struct Matrix<'self>{ source: Source<'self>}
[20:31:31] *** Joins: victorporof (victorporo@moz-18BD542A.pck.nerim.net)
[20:31:33] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[20:31:46] <kimundi> rether than storing a pointer to a Source in the Matrix, just store the Source itself in Matrix
[20:32:07] <kimundi> Source already containser pointers to things, no need for double indirection there :)
[20:33:20] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[20:35:24] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[20:36:18] *** Quits: maik (maik___@moz-81035A5A.dip0.t-ipconnect.de) (Ping timeout)
[20:38:03] *** Joins: Siyo (Siyo@A89938F4.87DAA49F.F113998C.IP)
[20:38:07] <doomlord> is the rust runtime statically linkable
[20:38:33] <doomlord> someone on #programming is asking if "you can run small self contained exes without a big shared runtime"
[20:38:38] *** Joins: Archer (Archer@moz-C36DFA25.bb.online.no)
[20:38:50] *** Quits: nmatsakis (nmatsakis@moz-DB4A9C19.scl3.mozilla.com) (Ping timeout)
[20:38:53] <kimundi> static linking in general doesn't work yet
[20:39:02] *** Joins: nmatsakis (nmatsakis@moz-DB4A9C19.scl3.mozilla.com)
[20:39:02] *** ChanServ sets mode: +ao nmatsakis nmatsakis
[20:39:34] <kimundi> it's planned, though. Seeing hopw the runtime is written in rust, I guess the answer is 'eventually' 
[20:39:55] <kimundi> Needs things like jmalloc and libuv though
[20:40:04] *** Quits: igl (igl@moz-74010307.adsl.alicedsl.de) (Ping timeout)
[20:41:19] *** Joins: igl (igl@moz-3D14EE9.adsl.alicedsl.de)
[20:44:01] <ecr> can Go do dynamic linking yet? I remember something about it only being able to statically link programs...
[20:45:36] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[20:46:52] <zalzane> is there a preferred version of gdb for debugging rust code?
[20:48:09] <olsonjeffery> zalzane: i use the system-installed version in ubuntu and it works fine..
[20:49:07] <olsonjeffery> 7.5.91 is what it says
[20:49:31] <zalzane> ah, looks like i need to update
[20:53:50] *** Quits: Kruppe (user@moz-4DDA8AB8.uwaterloo.ca) (Ping timeout)
[20:55:37] <olsonjeffery> here's a thinker: You have two traits, B & C, that both inherit from a common trait A ... is it possible to impl B & C for the same concrete type (since there would be a conflict when you go to impl the inerhited methods from A on both B & C) ?
[20:56:35] <olsonjeffery> can you do `impl B, C for Foo { ... }`
[20:56:36] <olsonjeffery> or somesuch?
[20:56:47] <kimundi> hm... You would imple A, B and C in it'S own impl block, so I think that would work?
[20:56:55] <kimundi> in theri own, even
[20:57:00] <kimundi> their*
[20:57:04] <pcwalton> olsonjeffery: what kimundi said
[20:57:26] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[20:57:26] *** ChanServ sets mode: +o pnkfelix
[20:57:36] <olsonjeffery> heh, ok. i was thinking there'd be an overlap/error in the impl names at compile time
[20:58:03] *** Quits: bytewise (bytewise@moz-4A801D04.unitymediagroup.de) (Quit: Leaving)
[20:58:06] <bblum> jorendorff, i ran your test case, and did not see the assertion failure
[20:58:23] <jorendorff> bblum: run it several times, it's non-deterministic, seems to happen about 15%
[20:58:31] *** Joins: erickt (etryzelaar@4530196F.50CA9683.D51AEBE4.IP)
[20:58:33] <bblum> jorendorff: i am running it a bunch in case it is nondeterministic, but i'm not getting it
[20:58:44] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[20:58:48] <jorendorff> ok, let me try again, i rebuilt rust earlier today
[20:59:14] <kmc> so with_c_str is back? as a convenience for to_c_str().with_ref?
[20:59:29] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[20:59:37] <bblum> jorendorff: this could just be the #8132 race in switch_running_tasks_and_then
[20:59:53] <bblum> jorendorff: any usage of linked failure has a very rare race that can cause basically anything to happen
[21:00:03] <bblum> brson doesn't like my ideas for fixing it, so it has gone unfixed
[21:00:22] <jorendorff> bblum: still happens here.
[21:00:37] <bblum> ok, you running on mac?
[21:00:52] <bblum> i am running on linux
[21:00:57] <jorendorff> i'm on mac
[21:01:52] <bblum> jorendorff: can you file a bug and tag it with B-reproduce?
[21:01:58] <bblum> i can't really help if there's no stack trace
[21:02:21] <jorendorff> bblum: filing, and i'm willing to help debug but i will need a little help
[21:02:52] *** Joins: maik (maik___@moz-81035A5A.dip0.t-ipconnect.de)
[21:03:02] *** Quits: inf-groupoid (user@580120F5.8ED93E28.1C8C8CE9.IP) (Quit: ERC Version 5.3 (IRC client for Emacs))
[21:03:06] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[21:03:14] <bblum> jorendorff: one idea would be to go into the runtime, find the function that contains this assertion, and, for every place that function is called from, insert a print statement just before it gets called
[21:03:19] <bblum> sort of an ad-hoc stack trace
[21:03:39] <jorendorff> bblum: oh, that reminds me, the reason i rebuilt was to try and get a better stack trace
[21:03:45] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Quit: WeeChat 0.4.1)
[21:03:47] <bblum> didja get one?
[21:04:01] <jorendorff> bblum: yes!
[21:04:06] <bblum> let's see it
[21:04:42] <jorendorff> bblum: https://gist.github.com/jorendorff/6383398
[21:05:16] <jorendorff> (I still have it in gdb here)
[21:05:46] *** Joins: five (five@B112EA23.C4AAC3ED.10BB00EE.IP)
[21:06:13] <bblum> ok, brb, i'll look at this in a bit
[21:06:53] *** Joins: bytewise (bytewise@moz-4A801D04.unitymediagroup.de)
[21:06:56] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[21:07:00] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:07:19] <jorendorff> filed as https://github.com/mozilla/rust/issues/8863 I don't think I have permissions to change labels in rust/issues
[21:07:51] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[21:07:56] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[21:07:57] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:09:10] <bblum> ok, it doesn't need B-reproduce since you got a stack trace anyway :P
[21:09:10] *** Quits: five (five@B112EA23.C4AAC3ED.10BB00EE.IP) (Connection reset by peer)
[21:12:54] *** Quits: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net) (Quit: msingle)
[21:15:34] *** Joins: tjc (tjc@moz-446DB75D.tmodns.net)
[21:15:34] *** ChanServ sets mode: +o tjc
[21:15:48] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[21:15:48] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/JLFpDQ
[21:15:48] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[21:16:08] *** Quits: tjc (tjc@moz-446DB75D.tmodns.net) (Quit: zzzzzzzzzz)
[21:16:53] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[21:17:00] *** Joins: tjc (tjc@moz-446DB75D.tmodns.net)
[21:17:00] *** ChanServ sets mode: +o tjc
[21:17:51] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[21:18:40] *** Quits: tjc (tjc@moz-446DB75D.tmodns.net) (Ping timeout)
[21:19:33] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:20:42] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[21:20:42] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/o9QUDQ
[21:20:42] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[21:20:44] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[21:20:44] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/HBpXbg
[21:20:44] <ghrust> 13rust/06auto 14ba101d2 15Michael Woerister: debuginfo: Support for variables captured in closures and closure type descriptions.
[21:20:44] <ghrust> 13rust/06auto 145e040e9 15Michael Woerister: debuginfo: Support for by-value arguments (still excluding some cases of self arguments)
[21:20:45] <ghrust> 13rust/06auto 141d916ac 15Michael Woerister: debuginfo: Added test cases for structs, tuples, enums, etc passed by value....
[21:20:47] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[21:20:59] <zalzane> 1337 issues on the issue tracker
[21:21:03] <zalzane> yolo
[21:21:22] <cmr> not the first time that's happened
[21:21:24] <cmr> so that's good
[21:21:27] <kimundi> *open issues
[21:21:36] <maik> zalzane, i am pretty sure they create fake issues to always keep it on 1337 :D
[21:21:44] <cmr> maik: unfortunately not.
[21:21:48] <zalzane> theres only like 130 public issues tho
[21:21:59] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[21:21:59] <cmr> "public issue"?
[21:21:59] *** ChanServ sets mode: +ao dherman dherman
[21:21:59] <maik> cmr, :(
[21:22:06] <zalzane> thats what i assume it to be
[21:22:14] *** Parts: zebr (zebr@moz-87CB2D2A.kent.ac.uk) ()
[21:22:14] <zalzane> if you look at the issue # on the home page it says 1337
[21:22:18] <zalzane> but from the issue page, its 131
[21:22:19] <zalzane> https://github.com/mozilla/rust/issues?milestone=16&state=open
[21:22:25] <zalzane> oh milestone
[21:22:26] <zalzane> my bad
[21:22:30] <cmr> that's because you have a filter
[21:22:31] <cmr> yeah
[21:22:38] *** Quits: mihneadb (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net) (Broken pipe)
[21:22:50] *** Joins: mihneadb (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net)
[21:23:42] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[21:23:48] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:24:42] *** Joins: huseby (huseby@8F761026.B5EF4AF6.E96CA9D8.IP)
[21:24:48] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[21:25:15] *** Quits: reyre (reyre@moz-9002CDDA.cpe.net.cable.rogers.com) (Client exited)
[21:26:26] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Input/output error)
[21:26:33] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[21:26:38] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Input/output error)
[21:26:45] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[21:29:03] *** Joins: reyre (reyre@moz-9002CDDA.cpe.net.cable.rogers.com)
[21:30:49] *** AutomatedTester is now known as AutomatedTester|AFK
[21:30:52] *** Joins: tjc (tjc@moz-7800E748.lightspeed.sntcca.sbcglobal.net)
[21:30:52] *** ChanServ sets mode: +o tjc
[21:31:17] *** Quits: robarnold (rob@BD56354E.DB510C09.6E370BFC.IP) (Ping timeout)
[21:31:43] *** Joins: kasey (Kasey@moz-569EFDE8.dhcp.trlk.ca.charter.com)
[21:32:07] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[21:33:46] *** AutomatedTester|AFK is now known as AutomatedTester
[21:33:50] <jmgrosen> sebcrozet: sorry I had to go earlier; any ideas about the shader errors?
[21:34:22] <pcwalton> brson: r? https://github.com/mozilla/rust/pull/8864
[21:34:55] *** Joins: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net)
[21:35:37] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[21:35:37] <ghrust> 01[13rust01] 15catamorphism 04force-pushed 06try from 14ebfe63c to 149a63889: 02http://git.io/k471pw
[21:35:37] <ghrust> 13rust/06try 14bb470a0 15Tim Chevalier: rustc: Change a stray error! statement to debug!
[21:35:37] <ghrust> 13rust/06try 14b4e4f30 15Tim Chevalier: std: Add a file-renaming function to std::os
[21:35:37] <ghrust> 13rust/06try 14dd3c290 15Tim Chevalier: rustpkg: Add a not_a_workspace condition
[21:35:39] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[21:35:45] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[21:35:45] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 149b0475c to 14698873e: 02http://git.io/N3iJvQ
[21:35:45] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[21:35:49] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[21:35:49] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/Nlt-Qg
[21:35:49] <ghrust> 13rust/06auto 14b656bfa 15blake2-ppc: std::str: Remove functions count_chars, count_bytes...
[21:35:49] <ghrust> 13rust/06auto 14508e368 15bors: auto merge of #8857 : blake2-ppc/rust/std-str-remove, r=thestinger...
[21:35:49] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[21:36:16] <brson> jorendorff: ping
[21:36:24] <jorendorff> brson: pong
[21:36:46] <brson> jorendorff: i have some time now if you still have something you want to discuss
[21:36:55] *** Joins: azakai (alon@moz-BBE3ABD.mv.mozilla.com)
[21:37:07] <jorendorff> Right, this is low importance
[21:37:43] <jorendorff> but I wrote https://gist.github.com/jorendorff/6380686
[21:37:58] <jorendorff> brson: and I'm wondering if there is a more efficient way without dropping down to unsafe code
[21:38:07] <brson> jorendorff: i did start a branch to try to address the bad scheduling issues you were hitting. hopefully have some fixes next week
[21:38:16] <jorendorff> :)
[21:38:28] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[21:38:29] <jorendorff> we talked briefly yesterday about streams with fixed-size buffers
[21:38:48] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[21:38:51] <jorendorff> you said it'd be easy to implement (which it was) and i said i'd give it a try (which i did)
[21:39:41] *** Quits: Axord (xord@moz-1B228827.lsanca.dsl-w.verizon.net) (Ping timeout)
[21:39:44] <sebcrozet> jmgrosen: Shader errors? You mean the black screen on OSX? Iâ€™ve just fixed it (still have to do some cleanup to push).
[21:40:10] <sebcrozet> jmgrosen: I did not use glfw correctly, it must be started on the main thread.
[21:40:29] <jmgrosen> sebcrozet: well, it sort of got past the black screen, but then crashes with some shader compilation errors
[21:40:36] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[21:41:19] <sebcrozet> jmgrosen: oh. weird. Do you have the error message? (which demo are you running?)
[21:42:06] <jmgrosen> sebcrozet: well, first, what version of GL should I hint to it? right now I'm hinting 3.2
[21:43:50] *** Joins: txdv (quassel@966F3542.3BA477DA.14C26596.IP)
[21:44:59] *** Quits: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net) (Client exited)
[21:45:25] <sebcrozet> jmgrosen: It needs glsl v. 1.20, which corresponds to OpenGL 2.1.
[21:46:06] <jmgrosen> sebcrozet: ok, then 3.2 should be fine; it gets past the first error if I change "#version 120" to "#version 150", though
[21:47:01] *** Quits: _Y_ (Mibbit@moz-56678B1C.dynamic.isp.telekom.rs) (Quit: http://www.mibbit.com ajax IRC Client)
[21:47:40] <maik> there is nothing bad with using Arc right?
[21:48:03] *** Quits: tjc (tjc@moz-7800E748.lightspeed.sntcca.sbcglobal.net) (Quit: zzzzzzzzzz)
[21:48:25] <zalzane> paul graham demands it
[21:48:31] <zalzane> how can you go wrong
[21:48:37] <cmr> maik: it requires atomics, but whether that's bad or not depends on how perf sensitive the code is.
[21:48:42] <cmr> zalzane: different arc 
[21:49:00] <cmr> maik: also the level of contention
[21:49:14] <brson> jorendorff: there are probably a few options, some of which can be expressed safely. instead of using other pipe types to transfer the data you could use a ring buffer protected by a lock, maybe a RWArc, which would be safe, then only use other pipes to wake either the sender or receiver when they are blocked
[21:49:34] <brson> jorendorff: a more thorough solution will do the blocking and unblocking by interacting with the scheduler as in core::comm::oneshot
[21:49:40] <sebcrozet> jmgrosen: I see. Are there still other errors after you change 120 to 150?
[21:49:52] <brson> that can probably also be done using safe code
[21:50:11] <jorendorff> brson: i'll look. locks are safe?
[21:50:19] <brson> jorendorff: yes
[21:50:33] <brson> jorendorff: 'safe' means memory safe though, not deadlock-free
[21:50:41] <brson> though RWArc I think actually can't cause deadlocks
[21:50:46] <jorendorff> ok
[21:50:54] <jmgrosen> sebcrozet: yeah, it complains about "attribute" and "varying", so I changed them to "in" and "out, respectively, but now it's complaining:
[21:50:59] <jmgrosen> Shader compilation failed: ERROR: 0:23: Call to undeclared function 'texture2D'
[21:51:01] *** Joins: lerc (quassel@B2E8CAD3.A8D14E52.788638A4.IP)
[21:51:02] <jmgrosen> ERROR: 0:24: Use of undeclared identifier 'gl_FragColor'
[21:51:07] <jmgrosen> ERROR: 0:24: Use of undeclared identifier 'tex_color'
[21:51:26] <brson> jorendorff: where unsafety is most likely to come in is when you want to share memory without a lock, and the way we usually do that is with UnsafeArc
[21:51:45] *** flaper87 is now known as flaper87|afk
[21:52:38] *** Quits: sigma (sigma@moz-4748CD01.range31-54.btcentralplus.com) (Ping timeout)
[21:52:48] <sebcrozet> jmgrosen: oh, yeah. Looks like I have to write a different shader for both version.
[21:52:58] *** Joins: gavinb (gavinb@637FE570.628B4573.E2B518AF.IP)
[21:53:04] <strcat> brson: btw I think that could be tagged with #[unsafe_no_drop_flag] to make it 1 word
[21:53:06] <strcat> lemme try
[21:53:14] <maik> cmr, I am confused why does it have to be atomic if it is only possible to read from an Arc?
[21:53:17] <strcat> already has a null check in Drop
[21:53:26] <jmgrosen> sebcrozet: I wonder why #version 120 doesn't work at all, though
[21:53:41] <cmr> maik: the reference counting.
[21:54:00] <ecr> Anyone have a better title for my intern presentation than "An IO System for Rust"?
[21:54:04] <cmr> Arc: Atomic reference counting
[21:54:29] <maik> cmr, so two tasks can't read from an Arc at the same time?
[21:54:34] <cmr> maik: yes they can
[21:54:35] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[21:54:37] <strcat> they can read from it
[21:54:39] <cmr> they just can't clobber the reference count.
[21:54:41] <strcat> the performance issue has to do with caches
[21:54:47] <sebcrozet> jmgrosen: I dont know. After a quick search, some people say that there is problems if your implementation "the OpenGL core specification, version 3.2 or greater. GLSL 1.20 shaders cannot be run on core 3.2 OpenGL implementations."
[21:54:55] <strcat> every single time you make a new reference to it, you write to it for the refcount
[21:55:01] <sebcrozet> * implementation uses
[21:55:03] <strcat> so it's a cache miss on anything in that cache line
[21:55:16] <strcat> it's not a great way to do parallelism, it's the lazy way out ;p
[21:55:22] <cmr> sebcrozet: ah yes, request a compatability profile
[21:55:25] <strcat> (it's fine for 90% of cases ofc.... just not your inner loops)
[21:56:11] *** Joins: tikue_ (tkuehn@97508B57.E6CB677E.689607DE.IP)
[21:57:06] <strcat> C++'s std::shared_ptr does atomic refcounting and it's a big performance issue, Rust has it much better due to the existence of Send/non-Send
[21:58:00] <strcat> heh yet another LLVM build
[21:58:03] * pcwalton didn't realize shared_ptr was atomic
[21:58:12] <pcwalton> that's awful
[21:58:14] <strcat> pcwalton: it's one of the big complaints about it, in boost you choose
[21:58:20] *** Quits: squiddy (squiddy@moz-A342B116.adsl.alicedsl.de) (Input/output error)
[21:58:20] <maik> strcat, ah okay I am using it for sharing information across tasks. For example I have 1000 tasks and every has some integer. Every task needs to keep track of every int from the other tasks. So the way I do it. I copy the integer in an arc and share that arc with all other tasks.  
[21:58:31] <kmc> there's basically always a cost to shared memory concurrency... if you don't have locks you have bus locking for atomics, and if you don't have atomic ops you still have to pass cache lines around
[21:58:37] <maik> well the int here can be arbitrary data
[21:58:46] *** Quits: kgriffs (Adium@32702EE8.939109B2.FB082A98.IP) (Quit: Leaving.)
[21:58:49] <cmr> pushing the synchronization further down the stack
[21:58:53] <kmc> yep
[21:58:54] <cmr> is how I think of it
[21:59:07] <strcat> kmc: well ideally you're just sending big work units via a pointer copy
[21:59:08] <kmc> "lockless" = "the lock is sufficiently hidden" ;)
[21:59:09] <sebcrozet> cmr: Iâ€™ll try that. Thanks.
[21:59:16] <pcwalton> kmc: well if the shared memory is immutable MESI cache coherence does a pretty good job no?
[21:59:25] <kmc> pcwalton: yeah, I meant mutable, sorry
[21:59:29] <pcwalton> ah, ok
[21:59:30] <strcat> pcwalton: problem is that Arcs mutate it
[21:59:36] <pcwalton> oh
[21:59:37] <pcwalton> heh
[21:59:39] <kmc> of course lockless algorithms can perform really well in practice, but they aren't truly lockless :)
[21:59:41] <strcat> due to the refcounts
[21:59:44] <pcwalton> well fork/join parallelism should work
[21:59:52] <strcat> yeah and you could pad the Arc
[22:00:07] <strcat> read-only array starting after an unused pad to fill the rest of a cacheline, something like that
[22:00:09] <pcwalton> also you should really only bump arc refcounts when you actually transfer the thing
[22:00:11] <strcat> if you really noticed a perf issue
[22:00:12] <pcwalton> you have to write .clone() in Rust
[22:00:16] <cmr> fork/join in rust would be really cool
[22:00:21] <pcwalton> we need it
[22:00:22] <pcwalton> for servo
[22:00:23] <jmgrosen> sebcrozet: okay, i got it mostly working, but now a black screen, which is probably the glfw main thread things -- i'll patch that manually and see if it works
[22:00:25] <pcwalton> we have ideas on how to do it
[22:00:31] <cmr> good, so that means it'll be coming soonish? ;)
[22:00:46] <cmr> fork/join using tasks is slow and really inelegant.
[22:01:10] <strcat> cmr: I don't think it would be that hard to implement fork-join as a simple layer on top of tasks allowing you to use &mut, etc.
[22:01:27] <strcat> need a new kind, and a bit of messing around with how TypeContents bubbles up from borrowed ptrs
[22:01:34] <strcat> should be like 10 lines of code
[22:01:54] <brson> ecr: maybe something about non-blockingness, though that term is a little fuzzy. 'scheduler-aware non-blocking i/o'
[22:02:23] <sebcrozet> jmgrosen: the answer to the glfw main thread thing is here: https://github.com/bjz/glfw-rs (on the README example)
[22:03:40] <jmgrosen> sebcrozet: yeah, that's what I was using; but now something seems to be really weird -- even though i'm using gl 2.1, the shaders seem to be acting up
[22:04:32] *** tikue_ is now known as tikue_me
[22:05:21] *** Quits: echristo (echristo@DCF57675.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[22:05:30] *** Joins: int3_ (int3_@moz-A2B259C8.public.wayport.net)
[22:05:47] <maik> rusti: std::sys::size:of<int>()
[22:05:47] -rusti- <anon>:5:23: 5:24 error: expected one of `; }` but found `:`
[22:05:47] -rusti- <anon>:5          std::sys::size:of<int>()
[22:05:47] -rusti-                                 ^
[22:05:48] -rusti- application terminated with error code 101
[22:05:55] <maik> rusti: std::sys::size_of<int>()
[22:05:55] -rusti- <anon>:5:27: 5:30 error: unresolved name `int`.
[22:05:56] -rusti- <anon>:5          std::sys::size_of<int>()
[22:05:56] -rusti-                                     ^~~
[22:05:56] -rusti- error: aborting due to previous error
[22:05:56] -rusti- application terminated with error code 101
[22:06:02] <maik> rusti: std::sys::size_of::<int>()
[22:06:04] *** Quits: josedonizetti (josedonize@DF22210B.35D9DDB.8EF76F75.IP) (Ping timeout)
[22:06:04] -rusti- 8
[22:06:11] <maik> rusti: std::sys::size_of::<&int>()
[22:06:12] -rusti- 8
[22:06:23] *** Quits: Diamond (dick@moz-C01E1CD1.ks.ks.cox.net) (Ping timeout)
[22:06:26] *** Quits: anders (anders@moz-329650BE.cust.bredbandsbolaget.se) (Quit: anders)
[22:06:34] <maik> rusti: std::sys::size_of::<&~str>()
[22:06:35] -rusti- 8
[22:06:41] <sebcrozet> jmgrosen: you mean, a shader compilation error again?
[22:07:02] <strcat> poor rusti 
[22:07:51] <brson> acrichto: I'm going to revert the std::run commit for now
[22:08:02] <acrichto> brson: ok
[22:08:13] <acrichto> makes me sad though :(
[22:08:42] *** Joins: tjc (tjc@moz-446DB75D.tmodns.net)
[22:08:42] *** ChanServ sets mode: +o tjc
[22:09:21] * strcat realizes we can just mark ~ return values noalias
[22:09:27] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Input/output error)
[22:09:30] <strcat> they are essentially a memory allocator
[22:09:34] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[22:09:35] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Input/output error)
[22:09:39] *** Quits: blarsen (Mibbit@CDEB6BFF.D3A46DCA.B1AF74A1.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:09:41] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[22:09:41] <maik> is it expensive to create a new arc? 
[22:09:52] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Input/output error)
[22:09:55] <strcat> not really any more expensive than ~, @ or Rc
[22:09:58] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[22:10:24] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[22:10:43] <strcat> what's more expensive than Rc is that copying or going out of scope does an atomic read+increment+write
[22:12:19] <jmgrosen> sebcrozet: well, it might be workingâ€¦ could you send me a screenshot of what `cube` is supposed to look like?
[22:12:59] <maik> hm now my arc solution doesn't seem that good anymore :(
[22:13:08] <mcpherrin> strcat: What distribution does playpen work on?  doesn't seem to compile on ubuntu quantal or debian squeeze
[22:13:20] <strcat> mcpherrin: do you have libseccomp2?
[22:13:41] <sebcrozet> jmgrosen: If you dont zoom out, the whole screen might be filled in red.
[22:13:47] <strcat> it should work basically anywhere, but on debian distributions you need to enable the memory cgroup on the kernel line
[22:13:57] <strcat> they patch it off for a reason unknown to me
[22:14:05] <maik> so that means I should only share data that doesn't change often right? atm every time the data changes I create a new arc and send to to all tasks.
[22:14:09] <mcpherrin> strcat: looks like I have seccomp 1.0.1-2
[22:14:17] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[22:14:23] <strcat> mcpherrin: need v2 + on debian distributions, cgroup_enable=memory
[22:14:28] <strcat> on the kernel line
[22:15:04] *** Quits: Earnestea (earnest@moz-F387F877.dyn.plus.net) (Ping timeout)
[22:15:19] <mcpherrin> Can I enable that without reboot?  I'm not taking this machine down to play around with it
[22:15:30] <strcat> mcpherrin: no
[22:15:41] <strcat> it could already be enabled, dunno
[22:15:43] <mcpherrin> Okay.  I guess it'll have to wait til later then
[22:15:44] <strcat> look in /sys/fs/cgroup/
[22:15:52] <strcat> if there's a memory dir, it's on
[22:16:09] <mcpherrin> empty dir, so no.
[22:16:10] *** Joins: Diamond (dick@moz-C01E1CD1.ks.ks.cox.net)
[22:16:56] <strcat> hmm, I don't think it should be empty
[22:17:27] <strcat> anyway they're about to completely overhaul the whole thing so.... I am not sure what's going to happen
[22:17:57] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Quit: Leaving.)
[22:18:02] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[22:18:23] <mcpherrin> strcat: yeah I've vaguely been aware of that.  But at least on this shared machine the kernel won't be upgraded for a while so no big worry from me :P
[22:18:41] <strcat> mcpherrin: well, back then cgroups didn't work at all
[22:18:46] <strcat> not secure, not robust ;p
[22:18:51] <strcat> they only got solid recently
[22:19:03] <strcat> although I don't really depend on cgroups much, just to limit memory + kill it
[22:19:30] <strcat> the person who actually got them working well decided that it's an unfixable mess
[22:19:55] <sebcrozet> jmgrosen: If you dont zoom out, you get this: http://imageshack.us/photo/my-images/822/6vfl.png/
[22:20:00] *** Quits: Diamond (dick@moz-C01E1CD1.ks.ks.cox.net) (Ping timeout)
[22:20:09] * strcat has the "new" way working already, just not merged
[22:20:11] *** Joins: echristo (echristo@DCF57675.D6CCE4AE.77834EAA.IP)
[22:20:13] *** Joins: Diamond (dick@moz-C01E1CD1.ks.ks.cox.net)
[22:20:28] <sebcrozet> jmgrosen: if you zoom out, you should get this: http://imageshack.us/photo/my-images/16/6c3q.png/
[22:20:28] <jmgrosen> sebcrozet: then my suspicions were correct -- it doesn't work quite correctly on the retina screen; it only takes up the bottom left corner
[22:20:44] *** Quits: echristo (echristo@DCF57675.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[22:20:50] <jmgrosen> sebcrozet: by "zoom out", do you just mean translate it in the code?
[22:20:54] <Aetherspawn_BNC> So, if I want to work with rust on windows, should I be using 0.7, or building my own from repo?
[22:21:11] <cmr> Aetherspawn_BNC: build master
[22:21:13] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[22:21:14] <Aetherspawn_BNC> last time I delved into rust, windows support was relatively bleeding edge
[22:21:16] <sebcrozet> jmgrosen: by "zoom out" I mean scroll. 
[22:21:17] <Aetherspawn_BNC> OK
[22:21:20] <cmr> windows has task failure and unwinding on master
[22:21:21] <gavinb> Well, that was fun - I just wrote 90% of a rational number lib before discovering it was already in libextra. Next time: grep harder.
[22:21:34] <cmr> gavinb: or: ask #rust
[22:21:35] <kimundi> haha
[22:21:42] <jmgrosen> sebcrozet: oh, wow, i hadn't realized you could do that!
[22:22:00] <gavinb> cmr: yeah, I was on the train and just got all excited with the idea
[22:22:13] <jmgrosen> sebcrozet: there's definitely something wrong on retina though
[22:22:17] <cmr> gavinb: don't toss it: if the code is cleaner or more performant, send a PR!
[22:22:20] <sebcrozet> jmgrosen: your reatina display bug reminds me of a bug a friend of mind had too (with its retina). He had to move or resize the window (I dont remember which). 
[22:22:29] <sebcrozet> * friend of mine
[22:22:31] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[22:22:43] <jmgrosen> sebcrozet: yeah, it doesn't work at all until I resize the window; after that, it only takes up 25% of the window
[22:23:25] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[22:23:29] <gavinb> cmr: I had a quick look; the macroised impls are a nice touch to have less code. I'll see if there's anything worth extracting.
[22:23:52] <gavinb> But hey, I found an ICE in the process, so it wasn't a waste of time!
[22:23:53] *** Quits: Diamond (dick@moz-C01E1CD1.ks.ks.cox.net) (Ping timeout)
[22:23:59] <sebcrozet> jmgrosen: okâ€¦ weird. Iâ€™ll see what I can do the next time I see him.
[22:24:04] *** Joins: echristo (echristo@DCF57675.D6CCE4AE.77834EAA.IP)
[22:24:08] *** Joins: Diamond (dick@moz-C01E1CD1.ks.ks.cox.net)
[22:24:48] <jmgrosen> sebcrozet: i'm not sure why the bug occurs in your code but not mine -- my previous attempt at 3d stuff worked just fine full-res
[22:25:16] <sebcrozet> jmgrosen: The fact it doesn't work at all until you resize the window is a silly bug, Iâ€™ll fix it.
[22:25:34] <maik> sebcrozet, I have the same bug
[22:25:58] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[22:26:11] *** AutomatedTester is now known as AutomatedTester|AFK
[22:26:35] <sebcrozet> maik: the resize bug or the "only 25% of the window is used" bug?
[22:27:22] <maik> sebcrozet, the resize bug 
[22:27:27] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[22:27:46] <sebcrozet> maik: ok. This one will be fixed soon.
[22:28:02] <maik> sebcrozet, okay nice :)
[22:28:50] *** Quits: Diamond (dick@moz-C01E1CD1.ks.ks.cox.net) (Ping timeout)
[22:28:55] <maik> sebcrozet, btw I saw that you are using .rc in nalgebra. It is deprecated.
[22:29:16] <maik> sebcrozet, every file should now end with .rs
[22:29:39] *** Quits: mihneadb (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net) (Input/output error)
[22:29:42] *** Joins: Diamond (dick@moz-C01E1CD1.ks.ks.cox.net)
[22:29:51] *** Joins: mihneadb (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net)
[22:30:04] *** Joins: mib_9uybip (mib_9uybip@moz-9B8221B3.rivrw1.nsw.optusnet.com.au)
[22:30:37] <sebcrozet> maik: I use .rc in every project! Iâ€™ll change that, thanks.
[22:30:48] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[22:30:48] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14508e368 to 14698873e: 02http://git.io/N3iJvQ
[22:30:48] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[22:30:51] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[22:30:52] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/THB3Cg
[22:30:52] <ghrust> 13rust/06auto 14aa51f49 15Patrick Walton: librustc: Change fold to use traits instead of `@fn`.
[22:30:52] <ghrust> 13rust/06auto 1482cbed0 15bors: auto merge of #8864 : pcwalton/rust/traitify-fold, r=brson...
[22:30:52] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[22:31:54] <jmgrosen> sebcrozet: ah, one other thing I'm not a fan of, but I realize is hard to get rid of, is the liberal use of GC -- it would be nice to get rid of most of it; I don't quite know how hard that would be, though
[22:31:57] *** Joins: mib_9uyb_ (mib_9uybip@730DAE49.BF91A228.DF793B8F.IP)
[22:32:00] *** Quits: noam (noam@F6B530A7.720527A7.416762B.IP) (Connection reset by peer)
[22:32:34] *** Quits: mib_9uybip (mib_9uybip@moz-9B8221B3.rivrw1.nsw.optusnet.com.au) (Ping timeout)
[22:32:35] *** Joins: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com)
[22:32:49] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[22:34:07] <gavinb> Is there some way of requiring a string literal as a macro argument?
[22:34:24] <gavinb> or should it just fail! ?
[22:35:07] *** Quits: Jontte (joonas@moz-8B229CD6.la) (Ping timeout)
[22:35:36] <gavinb> d'oh - BBL
[22:35:36] <SiegeLord> Maybe add a let _:&'static str = arg; ?
[22:35:48] <gavinb> SiegeLord: ah cool thx will try
[22:35:50] *** Quits: gavinb (gavinb@637FE570.628B4573.E2B518AF.IP) (Quit: gavinb)
[22:36:06] <pauls> gavinb: you can require an `:expr`... but I don't think that'll work in any case where a literal string is the only thing that'll parse.
[22:36:13] *** Quits: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net) (Input/output error)
[22:36:37] *** Quits: tjc (tjc@moz-446DB75D.tmodns.net) (Quit: zzzzzzzzzz)
[22:36:56] *** Quits: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net) (Ping timeout)
[22:37:05] <sebcrozet> jmgrosen: To be honest, I dont know if it would be hard. iirc I used GC everywhere because of some issues I had with the capture of Window inside of some closures (for set_loop_callback).
[22:37:45] <dcrewi> what' the procedure for revising a pull request due to feedback? push more commits to the branch or rebase and force-push over the old commit?
[22:38:11] <sebcrozet> jmgrosen: (I did not know about std::Cell, maybe this could help?)
[22:38:12] <dcrewi> and also that information should probably go in CONTRIBUTING.md
[22:38:26] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[22:39:07] *** Joins: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net)
[22:39:27] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[22:39:27] <sebcrozet> jmgrosen: And I think that `Object`s must be on an @-box since it is shared by the user code and the window (it keeps a list of all objects).
[22:39:28] *** Quits: Diamond (dick@moz-C01E1CD1.ks.ks.cox.net) (Ping timeout)
[22:39:52] <maik> sebcrozet, cell is solving the clojure capture problem
[22:39:53] *** Joins: Diamond (dick@moz-C01E1CD1.ks.ks.cox.net)
[22:40:21] <sebcrozet> jmgrosen: but I will try to git it more thought. I agree that all those @ are a bit uggly.
[22:40:38] <jmgrosen> sebcrozet: sounds good
[22:40:45] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[22:40:45] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1482cbed0 to 14698873e: 02http://git.io/N3iJvQ
[22:40:45] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[22:40:48] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[22:40:49] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/f4ij8A
[22:40:49] <ghrust> 13rust/06auto 14b86acd0 15Kevin Ballard: run: Process::new() should take &[Str] instead of &[~str] for args...
[22:40:49] <ghrust> 13rust/06auto 145d960f6 15bors: auto merge of #8203 : kballard/rust/process-new-args, r=cmr...
[22:40:49] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[22:41:41] <sebcrozet> maik: yeah, Iâ€™ll definitly try that.
[22:41:55] <sebcrozet> * definitely
[22:42:36] *** Quits: Diamond (dick@moz-C01E1CD1.ks.ks.cox.net) (Ping timeout)
[22:42:38] <sebcrozet> jmgrosen, maik: thanks for the feedbacks :)
[22:45:43] <tikue_me> sebcrozet: yes, cell is the current idiom for moving captured values out of closures
[22:45:48] <tikue_me> (no one likes it :P)
[22:45:52] *** Joins: Jontte (joonas@moz-8B229CD6.la)
[22:45:56] <maik> :D
[22:45:56] *** Joins: Diamond (dick@moz-C01E1CD1.ks.ks.cox.net)
[22:48:26] *** Quits: Diamond (dick@moz-C01E1CD1.ks.ks.cox.net) (Ping timeout)
[22:48:46] <maik> sebcrozet, btw how does nalgebra compare to lmath(cgmath)?
[22:49:34] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[22:51:31] *** Joins: Diamond (dick@moz-C01E1CD1.ks.ks.cox.net)
[22:51:38] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[22:51:51] *** Quits: Houm (Houm@moz-25669AA8.fbx.proxad.net) (Ping timeout)
[22:52:16] <sebcrozet> maik: It is very different from lmath. Traits are a lot more refined (almost one trait per operation).
[22:52:24] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[22:52:59] <sebcrozet> maik: It has more features when it comes to some obscure vector operation (like basis computation, cross-product related operations)
[22:53:29] <sebcrozet> maik: and it does not have quaternions (mainly because I dont use themâ€¦ thatâ€™s a shame)
[22:53:56] *** Quits: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[22:53:57] <maik> sebcrozet, really? what do you use instead?
[22:54:30] <sebcrozet> maik: However, I think cgmath is going to be pretty close to nalgebra. Iâ€™ve seen a lot of effort has been done for traits refinements.
[22:55:06] <sebcrozet> maik: I use plain rotation matrices. Using quaternion is not practical in generic (2d/3d) code.
[22:56:05] *** Quits: Diamond (dick@moz-C01E1CD1.ks.ks.cox.net) (Ping timeout)
[22:56:11] *** Quits: max (maxime@moz-478B7011.fr) (Ping timeout)
[22:56:30] *** Joins: Diamond (dick@moz-C01E1CD1.ks.ks.cox.net)
[22:57:41] <sebcrozet> maik: oh, and nalgebra has this "adaptor" thing that I like a lot; to ensure (at the type level) that a rotation matrix will always remain a rotation matrix.
[22:58:15] <sebcrozet> maik: and avoid all the homogeneous coordinates weirdness when it comes to compose rotation and translation.
[22:58:52] *** Quits: donri (dag@moz-9BB61102.tbcn.telia.com) (Client exited)
[22:59:33] <maik> sebcrozet, ah okay that is cool
[22:59:47] *** Joins: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net)
[22:59:56] <tikue_me> what's the proper way to write ```fn add<T: Num>(x: T, y: T)``` 
[23:00:06] <tikue_me> can you even do that?
[23:00:11] *** Quits: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net) (Max SendQ exceeded)
[23:00:33] <ecr> tikue_me: you mean like the add function in the Add trait?
[23:00:46] <tikue_me> where is that ecr
[23:00:52] <ecr> std::ops I think
[23:00:56] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[23:01:22] <tikue_me> i guess so
[23:01:22] <sebcrozet> maik: anyway, when cgmath will be mature enough, Iâ€™ll use the math lib (nalgebra or cgmath) people tend to use the most.
[23:01:29] <tikue_me> i just want to be able to add any two numerics
[23:01:31] *** Joins: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net)
[23:01:53] <sebcrozet> maik: I thinks it is pointless to have two math libs with the same purpose.
[23:02:09] <maik> sebcrozet, yeah that's why I asked :)
[23:02:17] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[23:02:44] <ecr> tikue_me: how do you mean?
[23:03:21] <tikue_me> ecr: like mixing ints with floats 
[23:03:41] <ecr> ah, hold on
[23:05:00] <maik> sebcrozet, how long did it take to write nphysics? Because I need to implement my own physics engine soon for an exam :(
[23:05:31] *** Joins: max (maxime@moz-478B7011.fr)
[23:06:27] <jgilbert> pcwalton, sad times: I see they're turning Rust-cave back into Holodeck!
[23:06:33] <pcwalton> yes
[23:06:38] <tikue_me> :((((
[23:06:42] <ecr> rusti: let x: f64 = NumCast::from(2i) + NumCast::from(3u16); x
[23:06:49] *** Quits: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: ChatZilla 0.9.90.1-rdmsoft [XULRunner 22.0/20130619132145])
[23:06:59] <tikue_me> ecr: ah thank you!
[23:07:19] <ecr> not entirely sure that will work, but you might give it a shot
[23:07:33] *** Quits: Diamond (dick@moz-C01E1CD1.ks.ks.cox.net) (Ping timeout)
[23:08:05] *** Joins: Diamond (dick@moz-C01E1CD1.ks.ks.cox.net)
[23:09:31] <sebcrozet> maik: learning rust + nphysics + ncollide + nalgebra + kiss3d took me approx 3.5 months.
[23:10:28] <sebcrozet> maik: I worked full-time on my projects during 1 month (otherwise I was at school)
[23:11:13] *** Quits: busylizzy (lisa@85228838.12D0DC84.211374C4.IP) (Ping timeout)
[23:11:17] <sebcrozet> maik: I think the work on the physics engine only took something like 2 months.
[23:12:10] *** Joins: Sorella (chris@9D963F5D.DF5D8AE7.54BCAB54.IP)
[23:12:26] <tikue_me> can you index into strings?
[23:12:30] *** Quits: Sorella (chris@9D963F5D.DF5D8AE7.54BCAB54.IP) (Quit: G'night everynyan~!)
[23:12:55] <kimundi> tikue_me: sure, you'll get a byte
[23:13:06] <kimundi> rusti: "abc"[1]
[23:13:19] <kimundi> rusti: ?
[23:13:20] <maik> sebcrozet, haha okay I hope that I haven't miscalculated the work. I need to be finished in 4 weeks
[23:13:22] *** Joins: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[23:13:29] <ecr> you can get iterators over the chars in the str.
[23:13:32] <tikue_me> rusti isn't here right now
[23:13:41] <tikue_me> ecr: but can you index into a single char?
[23:13:48] <tikue_me> i mean index into a string to get a single char
[23:13:54] <ecr> looking
[23:14:17] <ChrisMorgan> char_at(i)
[23:14:18] *** Quits: zwol (zack@moz-B5C129C.ece.cmu.edu) (Ping timeout)
[23:14:27] <tikue_me> ChrisMorgan: sorry, I meant syntactically index
[23:14:39] <ecr> oh. I don't think so
[23:14:42] <ChrisMorgan> Then the answer is no.
[23:14:47] <tikue_me> ok
[23:14:51] <kimundi> tikue_me:ah. Anyway, it works, the question is if it is what you want :) There are usual three different things you could want: getting a byte in the raw string data, getting a unicode codepoint, and getting a visible character in form of an graphemen cluster
[23:15:18] <tikue_me> kimundi: I just want a char :)
[23:15:23] <ChrisMorgan> ~str is basically a ~[u8].
[23:15:45] <kimundi> "foo"[i] gets you a u8, so you need "foo".char_at(i)
[23:16:22] <tikue_me> ok
[23:16:28] <sebcrozet> maik: I really think 4 weeks is short. It took me 2 months, and I already knew how physics engine work before I started (i.e. I wrote one in Haskell, C++, and AS3).
[23:16:39] *** Quits: Diamond (dick@moz-C01E1CD1.ks.ks.cox.net) (Ping timeout)
[23:16:46] <ecr> if we had a trait for indexing (do we?) you could make a newtype wrapper around strings which would just call that in the background. then you could index by char.
[23:17:11] <sebcrozet> maik: even if nphysics has the extra complexity of being generic wrt the dimension, 4 weeks is short if you want something really stable.
[23:17:15] *** Joins: Diamond (dick@moz-C01E1CD1.ks.ks.cox.net)
[23:17:20] <ecr> ah! we do have a Index trait!
[23:17:35] <ecr> tikue_me: do something like:
[23:17:56] <ecr> pub struct CharIndexedStr(~str);
[23:18:01] <engla> ecr: Index doesn't work right now
[23:18:02] <sebcrozet> maik: but, what kind of simulation your engine should handle?
[23:18:06] <ecr> aw
[23:18:08] <ecr> nvm
[23:18:48] <ChrisMorgan> Note also that indexing is meant to be a fast operation, ideally constant time. Indexing by char is O(n).
[23:19:59] <engla> s.iter().nth(i) indexes via the iterator. and it's clear it is O(N)
[23:21:18] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[23:22:03] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[23:23:13] <tikue_me> what's the difference between Ord and TotalOrd
[23:23:23] <ecr> Ord just implies partial ordering
[23:23:29] <tikue_me> what is partial ordering
[23:24:01] <kimundi> tikue_me: Total ordering means that either a < b, a == b or a> b holds
[23:24:01] <ChrisMorgan> NaN is a good example of the concept.
[23:24:10] <tikue_me> ah ok
[23:24:17] <ecr> there could be elements A and B where none of the following are true: A < B, A == B, A > B. in other words, A and B are unordered
[23:24:27] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[23:24:28] <ChrisMorgan> With floats, where does NaN fit in?
[23:24:32] <tikue_me> i think it should be Ord and PartialOrd
[23:24:34] <kimundi> tikue_me: Partial Ordering means that there might be values where all three return false
[23:24:36] <tikue_me> rather than Ord and TotalOrd
[23:24:39] *** Quits: Diamond (dick@moz-C01E1CD1.ks.ks.cox.net) (Ping timeout)
[23:24:50] <doy> ChrisMorgan: nowhere, that's the point
[23:24:57] <ChrisMorgan> Indeed.
[23:24:58] <ecr> ChrisMorgan: by spec, any comparison with NaN returns false
[23:25:16] <ecr> NaN == NaN ==> false  even
[23:25:23] <tikue_me> yes
[23:25:24] <ChrisMorgan> Hence its status as a partial ordering.
[23:25:39] <ecr> oh, I didn't realize that was rhetorical, sorry.
[23:26:15] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[23:27:14] *** Quits: maik (maik___@moz-81035A5A.dip0.t-ipconnect.de) (Ping timeout)
[23:27:20] <ChrisMorgan> Ah, the woes of text-based communication, lacking the nuances of speech. :-(
[23:27:34] <lkuper> Power sets are a good example of partially ordered sets: http://en.wikipedia.org/wiki/File:Hasse_diagram_of_powerset_of_3.svg
[23:27:49] *** Joins: maik (maik___@moz-81035A5A.dip0.t-ipconnect.de)
[23:27:51] *** Joins: Diamond (dick@moz-C01E1CD1.ks.ks.cox.net)
[23:27:51] <lkuper> For instance, the sets { x } and { y } don't have an ordering.
[23:29:17] <ecr> If I remember right, complex numbers have a partial ordering (2 + i < 2 + 2i), but not a total ordering that makes sense (2 + i ?? -3 - 4i).
[23:29:54] <tikue_me> i still think it should be Ord and PartialOrd rather than TotalOrd and Ord :O)
[23:30:16] <lkuper> ecr: well, you could mandate a total ordering, but whether it "makes sense" is another question
[23:30:16] <ecr> why?
[23:30:21] *** Quits: Diamond (dick@moz-C01E1CD1.ks.ks.cox.net) (Ping timeout)
[23:30:30] <lkuper> tikue: I dunno, when someone says "ordered set" I don't assume it's total
[23:30:48] *** Joins: Diamond (dick@moz-C01E1CD1.ks.ks.cox.net)
[23:30:52] <tikue_me> mmm maybe :\
[23:31:00] *** Joins: robarnold (rob@BD56354E.DB510C09.6E370BFC.IP)
[23:31:15] <lkuper> oops, s/tikue/tikue_me/
[23:31:26] *** Parts: Chef (Chef@moz-4C317041.dsl.teksavvy.com) ()
[23:31:32] <aatch> For sorting (which is the most common case) partial ordering is enough.
[23:31:32] <tikue_me> they're both me, just currently i only see tikue_me
[23:31:55] *** Quits: carllerche (carllerche@1E2EB9E3.186539A3.965084DF.IP) (Quit: carllerche)
[23:32:28] *** Quits: Diamond (dick@moz-C01E1CD1.ks.ks.cox.net) (Ping timeout)
[23:32:37] <ecr> lkuper: right, you can use lexicographic or something. I just double checked, C isn't an ordered field, which means you can't define an ordering that is compatible with + and *.
[23:33:51] <ecr> which was what 'makes sense' means I guess
[23:34:04] <lkuper> ecr: oh, hm.  I don't know from fields!
[23:34:23] *** Joins: Diamond (dick@moz-D7E07B36.ks.ks.cox.net)
[23:34:29] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[23:34:53] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[23:34:56] <ecr> lkuper: https://en.wikipedia.org/wiki/Complex_number#Field_structure
[23:35:02] <ecr> and https://en.wikipedia.org/wiki/Ordered_field
[23:35:12] *** Quits: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[23:35:44] *** Quits: maik (maik___@moz-81035A5A.dip0.t-ipconnect.de) (Ping timeout)
[23:35:51] *** Quits: erickt (etryzelaar@4530196F.50CA9683.D51AEBE4.IP) (Ping timeout)
[23:35:55] *** Joins: Earnestly (earnest@moz-F387F877.dyn.plus.net)
[23:36:04] <lkuper> (I learned about quaternions and octonions recently.  those things are weird.  multiplication stops being associative.  I can't even.)
[23:36:31] <aatch> From my understanding, partial ordering just means you can place all the elements of a set in an order that satisifies xn < xn+1 for all n, but it isn't the only possible ordering that holds the property
[23:36:32] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[23:36:34] <ecr> Ordered fields are basically just fields where you can do math on inequalities (2 < 3 ==> (2 + 1) < (3 + 1))
[23:37:08] <aatch> While total ordering has only one possible valid ordering.
[23:37:10] <ecr> aatch: almost. you have to use <=
[23:37:22] <aatch> ecr, right, that's what I meant.
[23:37:35] <ecr> but yeah that's the gist of it
[23:37:54] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[23:38:03] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[23:38:05] <aatch> Topological sorting is an example of sorting a partially-ordered set.
[23:38:06] <ecr> if you've ever used topological sorting then you're exploiting a partial order
[23:38:12] <aatch> heh
[23:38:12] <ecr> ...
[23:38:15] <ecr> jinx
[23:38:22] <lkuper> :)
[23:38:36] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[23:38:58] *** Joins: gavinb (gavinb@moz-CA19A0CF.vic.adsl.internode.on.net)
[23:39:47] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[23:39:58] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[23:40:00] *** Joins: Axord (xord@moz-1B228827.lsanca.dsl-w.verizon.net)
[23:40:16] <aatch> Wikipedia uses genealogical trees as an example.
[23:41:11] *** Joins: carllerche (carllerche@1E2EB9E3.186539A3.965084DF.IP)
[23:42:13] <lkuper> aatch: do you have a link to the genealogical tree thing?
[23:42:22] <engla> git commits are then our close example :)
[23:42:27] <lkuper> aatch: I'm really curious about that because one of the applications for my research (which is about exploting partial orders for parallelism) has to do with operations on genealogical trees
[23:42:38] *** Quits: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net) (Quit: ozten)
[23:42:41] <aatch> lkuper, I was just looking at http://en.wikipedia.org/wiki/Partially_ordered_set
[23:42:59] <lkuper> oh, I see
[23:44:14] <lkuper> I was thinking of phylogenetic trees.
[23:44:25] <aatch> lkuper, ah, thats different.
[23:44:46] *** Quits: mib_9uyb_ (mib_9uybip@730DAE49.BF91A228.DF793B8F.IP) (Client exited)
[23:45:06] <aatch> lkuper, that said, from what I know, all DAGs are partially ordered.
[23:45:20] *** Quits: mschifer (Adium@moz-BBE3ABD.mv.mozilla.com) (Quit: Leaving.)
[23:45:25] <ecr>  they are
[23:45:29] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[23:45:46] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[23:45:51] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[23:45:51] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/Z3EnMw
[23:45:51] <ghrust> 13rust/06auto 143c5a43e 15Brian Anderson: Revert "auto merge of #8645 : alexcrichton/rust/issue-6436-run-non-blocking, r=brson"...
[23:45:51] <ghrust> 13rust/06auto 145ef8cdb 15bors: auto merge of #8866 : brson/rust/rvstdrun, r=alexcrichton...
[23:45:52] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[23:46:12] <ecr> I think they're actually equivalent. partial ordering <=> representable as a DAG
[23:47:38] <aatch> ecr, looks like it. Also, you can reduce any partial ordering to a total ordering via linear extension. Topological sorting is actually a method of finding a linear extension of a partial ordering.
[23:47:46] <ecr> yep!
[23:49:53] <aatch> That's kinda cool, seems like it boils down to: do a topological sort, then define a total ordering that is that order. This kind of maths is interesting to me because it's the kind of maths that lets you just say "I'm defining this ordering as being the ordering that produces this"
[23:50:23] <aatch> without having to actually make any sort of general rules.
[23:50:51] *** Joins: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net)
[23:51:13] <sebcrozet> maik: anyway, feel free to ask me/mail me anything I you need help/advices for your physics engine exam.
[23:51:20] <kmc> unfortunately that doesn't give you a unique answer
[23:53:22] <ecr> aatch: the general idea is "I need a total order, but I only have a partial order. Since it doesn't matter what the total order actually is as long as it satisfies the partial order, I'll just pick the most convenient one."
[23:55:05] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[23:56:02] <aatch> ecr, which is convenient for stuff like grouping data in a set.
[23:56:03] <ecr> GAH! I'm back at this calling associated methods in default methods giving type parameter errors problem again
[23:56:28] <ecr> Trait::method::<Self>()  ==> too many type params: expected 0, found 1
[23:56:38] <pcwalton> just use Trait::method() ?
[23:56:44] <ecr> Trait::method() ==> cannot determine type for bounded type param: unconstrained
[23:56:49] <pcwalton> oh
[23:56:58] <pcwalton> you have to add a dummy parameter
[23:57:01] <pcwalton> this is the <for Self> thing
[23:57:07] <pcwalton> that I would like to bring up at the meeting sometime
[23:57:17] <pcwalton> unfortunately I am currently overloaded with backwards incompatible language features
[23:57:22] <ecr> a dummy parameter to what? the trait? the assoc function?
[23:57:24] <pcwalton> the function
[23:57:28] <pcwalton> that specifies "self"
[23:57:34] <pcwalton> so the compiler can infer it
[23:57:42] <sebcrozet> ecr: see the implementation of "bits" on std::f64 for an example.
[23:57:50] <sebcrozet> ecr: fn bits(_: Option<f64>) -> uint
[23:58:30] <sebcrozet> ecr: (the trait has the method: fn bits(unused_argument: Option<Self>) -> uint)
[23:59:16] <engla> oh that's new
[23:59:57] <ecr> oh, it has to be a dummy function parameter instead of a dummy type parameter?
