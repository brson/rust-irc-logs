[00:00:03] *** Quits: dherman (dherman@moz-BBE3ABD.mv.mozilla.com) (Quit: dherman)
[00:02:30] <dbaupp> acrichto: how feasible is it for the port-set design to include selection on IO, etc? (or have you not put much thought into that?)
[00:02:51] <acrichto> dbaupp: right now they're so incompatible that I don't think that it's going to be a thing
[00:03:03] <acrichto> mixing channels and I/O is a very tough thing to do while still maintaining super-efficient channels
[00:03:37] <dbaupp> :(
[00:03:56] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[00:04:10] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[00:04:10] *** ChanServ sets mode: +qo brson brson
[00:04:19] <acrichto> I think that we'll be able to live with selection over channels and selection over I/O streams
[00:04:22] <acrichto> but no mixing between the two
[00:04:35] <dbaupp> acrichto: would it be possible to have an struct InefficientIOSelectionPort(Port) that can be used to select on it along with IO, at the cost of speed?
[00:04:52] * dbaupp has no idea if such a design is at all feasible
[00:04:56] <acrichto> that would essentially just be a pipe
[00:04:57] <strcat> dbaupp: we could have inefficient channels based on pipes
[00:05:00] <acrichto> which we should totally make easy to create
[00:05:16] <acrichto> that's exactly how we expect to bridge I/O selection and channel selection
[00:05:21] <dbaupp> ah, cool
[00:05:29] *** Joins: dherman (dherman@moz-BBE3ABD.mv.mozilla.com)
[00:05:29] *** ChanServ sets mode: +ao dherman dherman
[00:05:51] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[00:06:01] <dbaupp> acrichto: that PR needs a rebase, btw.
[00:06:08] <acrichto> lol yeah that's gonna need a rebase for awhile
[00:06:15] <acrichto> gonna let brson finish reviewing it before I rebase it
[00:06:33] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[00:06:33] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/YgTXZw
[00:06:33] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[00:06:36] <dbaupp> you need a "<3 mega-PRs" tattoo or something.
[00:06:43] <acrichto> lol
[00:06:54] <acrichto> my next task is to remove rt::sched from libstd
[00:07:06] <acrichto> that's gonna be tough
[00:08:16] <acrichto> hm those linux-32 bots have been all over the place in how long tests are taking
[00:08:56] <dbaupp> has there been recent try/snapshot builds running on those bots?
[00:09:27] <acrichto> yeah I just ran one through
[00:09:29] <acrichto> which was probably it
[00:11:30] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[00:11:30] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/LIRn6Q
[00:11:30] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[00:11:34] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[00:11:34] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/T3KBIQ
[00:11:34] <ghrust> 13rust/06auto 1452b835c 15Alex Crichton: Store metadata separately in rlib files...
[00:11:34] <ghrust> 13rust/06auto 14fce4a17 15Alex Crichton: Implement LTO...
[00:11:34] <ghrust> 13rust/06auto 1429ca435 15bors: auto merge of #10812 : alexcrichton/rust/lto, r=pcwalton...
[00:11:36] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[00:15:11] *** Quits: dherman (dherman@moz-BBE3ABD.mv.mozilla.com) (Quit: dherman)
[00:48:13] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[00:55:07] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[00:56:30] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[00:56:30] *** ChanServ sets mode: +qo brson brson
[00:59:55] <ChrisMorgan> acrichto: starting completely from scratch, rust-http tests are working (it's not quite up to the bit that failed in Rust's tests, but it's reasonable for me to expect it to work)
[01:08:29] <acrichto> ChrisMorgan: yay! I wonder how you ended up getting a stale llvm...
[01:08:31] <jack> acrichto: where is the implementation for rust_get_test_int supposed to come from with anon-extern-mod-cross-crate-2?
[01:08:34] <acrichto> you wouldn't happen to have an old llvm installation?
[01:08:42] <acrichto> jack: the external crate that's linked in
[01:08:46] <acrichto> it's some aux-build thing I think
[01:08:50] <jack> it's just declared extern there
[01:08:53] <jack> there is no body
[01:08:59] <acrichto> it's actually defined in rustrt
[01:09:02] <jack> in anon-extern-mod-cross-crate-1.rs
[01:09:05] <acrichto> src/rt
[01:09:13] <jack> how do i make sure that is linked in?
[01:09:25] <acrichto> link(name = "rustrt") ?
[01:09:30] <acrichto> it's statically linked
[01:09:33] <acrichto> or rather it should be
[01:09:44] <ChrisMorgan> acrichto: I've got locally installed clang/libllvm/whatnot, but nothing out of the ordinary that I'm aware of. We certainly have managed some interesting breakages, and these linkage changes of yours have helped with them... but in the long term, it's all much better, so I'm happy :-)
[01:09:46] <jack> i thought link(name) set the current crate's link name?
[01:10:20] <acrichto> jack: I took over #[link(name = "...")] on extern blocks to indicate native libraries
[01:10:28] <acrichto> ChrisMorgan: good to hear! I'm glad that there are some real benefits from all of it :)
[01:11:06] <ChrisMorgan> There sure are.
[01:11:20] * ChrisMorgan is still wondering what effect LTO will have on rust-http performance
[01:11:35] <cmr> what libs are you actually using that can be LTOd?
[01:13:05] <ChrisMorgan> I have no idea whether it will get much benefit out of it. It's just straight Rust code, sitting on top of std::io::net::tcp.
[01:13:27] <cmr> I predict 0 perf gain :p
[01:14:08] <ChrisMorgan> No libuv + std::io wins?
[01:14:44] <acrichto> LTO won't be able to inline across the trait object boundary
[01:14:47] <cmr> Anything that it would be doing would already be inlined, and we build libuv with the system compiler.
[01:15:52] *** Quits: lkuper (lkuper@moz-D862222C.dhcp-bl.indiana.edu) (Ping timeout)
[01:16:26] <ChrisMorgan> acrichto: rust-http is not at present using trait objects for its Reader/Writer (should it be?); it's using generics.
[01:17:02] <cmr> std::io uses trait objects.
[01:17:06] <cmr> internally
[01:17:23] <jack> acrichto: ok, adding back in link(name) worked for rust_test_get_int but it still fails on some other symbol: https://gist.github.com/metajack/7884245
[01:18:08] <acrichto> ChrisMorgan: all std::io types are built on trait objects
[01:18:29] <acrichto> jack: something is getting messed up with the symbol name of the crate map
[01:18:39] <acrichto> I'd see if it's defined in the extern crate
[01:18:42] <acrichto> just to make sure
[01:18:57] <ChrisMorgan> I know that formatters and things like that use trait objects.
[01:19:32] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[01:33:16] <jack> acrichto: https://gist.github.com/metajack/7884245 they don't seem to match but i can't tell exactly because of the mangling
[01:34:07] <acrichto> jack: run the output of nm through c++filt
[01:34:10] <acrichto> to de-mangle
[01:34:57] <jack> versions are mismatched.
[01:35:00] <jack> that is odd
[01:35:12] <jack> one has 0.1 and one has 0.0.
[01:35:13] <acrichto> may be a stale version lying around
[01:35:18] <ChrisMorgan> brson: pcwalton isn't here just now, do you think he would be happy for me to remove `do` myself?
[01:35:38] <ChrisMorgan> (I guess we'd still reserve the keyword, just have it as obsolete syntax.)
[01:36:25] <acrichto> ChrisMorgan: talking to pcwalton, he says he thinks it's fine
[01:36:36] <ChrisMorgan> OK, I'll work on that now.
[01:37:11] <jack> acrichto: once it does filesearch, does it read the version out of the metadata or does it compute its own?
[01:37:57] <acrichto> jack: it reads it out of the metadata
[01:41:00] *** Quits: notmatt (notmatt@CC62CF7E.1E7FDFDB.A82DBDDB.IP) (Client exited)
[01:43:10] *** Quits: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP) (Quit: Lost terminal)
[01:43:45] <ChrisMorgan> In syntax::parse, I'm shifting Do from strict keywords to reserved keywords; should I be renumbering the Ident names? (It looks slightly scattered at present, with not entirely consistent ordering.)
[01:53:31] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[01:53:52] <pnkfelix> ChrisMorgan: I had thought that we rely on the ordering in some of the code, so I think renumbering is necessary.  But I also thought that the reliance on the ordering is contained to that module
[01:55:02] <pnkfelix> ChrisMorgan: e.g. see RESERVED_KEYWORD_START etc
[01:55:21] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[01:55:21] *** ChanServ sets mode: +qo brson brson
[01:55:39] <ChrisMorgan> pnkfelix: ah yes. Thanks.
[01:56:31] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[01:56:31] *** ChanServ sets mode: +o tjc
[01:58:26] <jack> acrichto: i found the issue. decoder::get_crate_vers was not using the new stuff. i'm not sure why i didn't catch this brefore.
[01:58:41] <acrichto> good to hear!
[01:58:47] <acrichto> well, good to hear that you found it
[01:59:23] <ChrisMorgan> dbaupp: you know, now that I'm trying to remove `do`, I've suddenly come to the conclusion that macros *can* actually be used in syntax::parse to fix this duplication.
[02:07:16] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[02:07:17] *** ChanServ sets mode: +ao pcwalton pcwalton
[02:10:03] <dbaupp> ChrisMorgan: \o/
[02:16:12] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[02:16:33] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[02:16:33] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/T3KBIQ
[02:16:33] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[02:18:24] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[02:18:36] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[02:18:43] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[02:21:35] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[02:21:35] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/hBCVJg
[02:21:35] <ghrust> 13rust/06auto 145ffb2e9 15Florian Hahn: Remove `extern mod foo (name="bar")` syntax, closes #9543
[02:21:35] <ghrust> 13rust/06auto 14569aa12 15bors: auto merge of #10696 : fhahn/rust/issue9543-remove-extern-mod-foo, r=brson...
[02:21:35] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[02:25:24] *** Quits: TimAbraldes (quassel@125EF623.B2666F0E.66399531.IP) (Input/output error)
[02:31:31] <jack> acrichto: all tests passing until bootstrap-from-c-with-uvio
[02:31:36] <jack> which is failingon -lboot
[02:32:03] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[02:32:22] * jack goes to update that test. i see it's building liblib-XXX-0.0.dylib
[02:35:03] <jack> acrichto: now c-static-dylib is complaining about linker arguments being usused
[02:35:08] <jack> though it succeeds otherwise
[02:36:28] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[02:36:32] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[02:36:32] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14569aa12 to 1429ca435: 02http://git.io/N3iJvQ
[02:36:32] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[02:36:33] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[02:36:33] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/Wk-iVw
[02:36:33] <ghrust> 13rust/06auto 1489e1fb3 15Adrien T√©tar: rustdoc: fix the search-bar layout...
[02:36:33] <ghrust> 13rust/06auto 147be8ae3 15Adrien T√©tar: doc: CSS changes + rm manual.inc
[02:36:34] <ghrust> 13rust/06auto 141ed38ae 15bors: auto merge of #10849 : adridu59/rust/patch-css, r=brson...
[02:36:36] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[02:38:21] *** Joins: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net)
[02:42:19] <jack> acrichto: removing the -L $(TMPDIR) from tools.mk seems to fix it.
[02:43:17] *** Quits: Sharp (Sharp@1710C26.8381A41.8725677B.IP) (Quit: Sharp)
[02:50:13] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[02:51:27] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[02:56:37] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[03:02:30] *** Quits: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net) (Ping timeout)
[03:06:09] <acrichto> jack: hm, that will not help because that's where all output goes and if you don't link against it the tests will fail
[03:06:31] <acrichto> jack: also just run with CC=gcc, I thought pnkfelix fixed that
[03:06:36] <jack> apparently it's not needed. it knows about that location somehow anyway
[03:06:51] <jack> maybe this is a 10.9 thing
[03:06:55] <acrichto> are you on osx?
[03:07:04] <acrichto> b/c I think OSX implicitly adds the current directory to the linker args
[03:07:10] <acrichto> although I don't think it's running in that directory...
[03:07:28] *** Quits: zz_kimundi (kimundi@moz-7496AA85.dip0.t-ipconnect.de) (Ping timeout)
[03:07:49] <jack> where do i get sundown? i'm missing that lib
[03:08:06] <cmr> jack: it's distributed in src/rt
[03:08:10] <cmr> should be built for you...
[03:10:48] <jack> cmr: https://gist.github.com/metajack/7885189
[03:11:06] *** Joins: zz_kimundi (kimundi@moz-19623CE3.dip0.t-ipconnect.de)
[03:11:07] *** zz_kimundi is now known as kimundi
[03:16:30] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[03:16:30] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 141ed38ae to 1429ca435: 02http://git.io/N3iJvQ
[03:16:30] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[03:16:32] <cmr> brson: now you're just being silly :P
[03:16:33] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[03:16:33] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/D5yFxg
[03:16:33] <ghrust> 13rust/06auto 141776c5c 15Alex Crichton: Check the privacy of implemented traits...
[03:16:33] <ghrust> 13rust/06auto 147e369a6 15bors: auto merge of #10862 : alexcrichton/rust/issue-10857, r=huonw...
[03:16:33] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[03:18:00] <jack> cmr: i can see that it has the right -L flag
[03:18:22] <jack> ah. it apparently forgot to build sundown.
[03:18:33] <jack> i guess there is a dependency missing for check-stage1
[03:18:48] <jack> cmr: is there a makefile target for sundown?
[03:18:56] <cmr> jack: no idea, ask acrichto
[03:19:12] <acrichto> make $target/rt/libsundown/libsundown.a
[03:20:08] <jack> there we go :)
[03:23:22] <jack> what is the $(X) for in SUNDOWN_LIB_$(X)?
[03:24:10] <sfackler> cmr: std::util::ignore is now std::prelude::drop, not std::util::drop
[03:24:22] <sfackler> I forgot to update the PR title :P
[03:25:16] <acrichto> jack: the target arch
[03:30:02] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Quit: pcwalton)
[03:30:32] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[03:30:32] *** ChanServ sets mode: +o tjc
[03:32:00] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[03:32:00] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 147e369a6 to 1429ca435: 02http://git.io/N3iJvQ
[03:32:00] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[03:32:04] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[03:32:04] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/_DkaWQ
[03:32:04] <ghrust> 13rust/06auto 1404d852a 15S Pradeep Kumar: Add defun motions for rust-mode....
[03:32:04] <ghrust> 13rust/06auto 14021c722 15bors: auto merge of #10873 : pradeep90/rust/rust-mode-changes, r=pcwalton...
[03:32:05] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[03:32:34] <jack> of course he leaves before i can ask questions :)
[03:33:08] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: Textual IRC Client: www.textualapp.com)
[03:35:49] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[03:35:50] *** ChanServ sets mode: +ao pcwalton pcwalton
[03:40:54] <brson> jack: he's back!
[03:41:15] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Quit: pcwalton)
[03:41:28] <jack> brson: too late. i figured it out :) maybe that's why he left -- prevent me being lazy
[03:44:38] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[03:46:57] <jack> acrichto: what should i do about the -L $(TMPDIR) thing? should i remove it or should i pretend i don't need to remove it?
[03:47:13] <acrichto> jack: have you rebased recently?
[03:47:31] <acrichto> other tests will fail if it is not passed (or at least on some platform they will fail)
[03:47:48] <jack> acrichto: i rebased a few hours ago. the other tests all pass without -L $(TMPDIR)
[03:48:02] <acrichto> I believe that they will fail on linux
[03:48:12] <acrichto> b/c we definitely link to libraries in that directory and otherwise the linker cannot find them
[03:48:16] <jack> so i guess i'll leave it and we'll just have some exotic tests be broken on 10.9
[03:48:47] <acrichto> you may need to reconfigure
[03:48:51] <acrichto> that should be fixed now
[03:48:56] <acrichto> or you can just run tests with CC=gcc
[03:49:14] <jack> i might not have reconfigured.
[03:50:19] <jack> OMG. already stale!
[03:52:03] *** Quits: b (b@moz-55CA322E.org) (Ping timeout)
[03:52:03] *** Joins: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net)
[03:53:42] <ChrisMorgan> dbaupp: argh! A spurious "local ambiguity" macro bug is preventing my syntax::parser macro from working :-( (It seriously thinks that at the closing brace of ``pub mod special_idents { $( $si_name:expr, $si_static:ident, $si_str:expr; )* }`` there is ambiguity between si_name and one other option!?)
[04:01:08] <dbaupp> ChrisMorgan: $( { $si_name; ...; } )* might work
[04:01:17] <dbaupp> (i.e. an extra layer or brackets)
[04:01:26] <ChrisMorgan> Eke. (sic.)
[04:01:44] * ChrisMorgan shudders when people speak of eeking out something
[04:04:15] <ChrisMorgan> My favourite usage of the word eke is from chapter 8 of Nonsense Novels, by Stephen Leacock, Soaked in Seaweed, or: Upset in the Ocean. "There I eked out a miserable existence, feeding on sand and gravel and dressing myself in cactus plants. Years passed. Eating sand and mud slowly undermined my robust constitution. I fell ill. I died. I buried myself. Would that others who write sea stories would do as much."
[04:04:48] *** Joins: b (b@moz-55CA322E.org)
[04:15:20] <jack> acrichto: so gcc on 10.9 *is* clang
[04:16:32] <aatch> jack, correct. This actually causes problems sometimes -.-
[04:16:42] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Ping timeout)
[04:16:47] <acrichto> jack: oh hm I must have tested that on some other version awhile ago
[04:16:57] <jack> acrichto: i think this is new in 10.9.
[04:17:03] <jack> 10.9 also removed gdb for example :)
[04:17:53] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[04:20:00] <ChrisMorgan> . . . why do developers still even *tolerate* Mac OS X?
[04:20:41] * strcat thinks it's a bigger issue that they're missing a lot of POSIX stuff ;p
[04:20:59] <strcat> doesn't really matter that the remaining GNU toolchain on it is ancient
[04:21:33] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[04:21:33] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14021c722 to 1429ca435: 02http://git.io/N3iJvQ
[04:21:33] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[04:21:33] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[04:21:36] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[04:21:36] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/jp-fLw
[04:21:36] <ghrust> 13rust/06auto 141776c5c 15Alex Crichton: Check the privacy of implemented traits...
[04:21:36] <ghrust> 13rust/06auto 1466d9ef8 15bors: auto merge of #10862 : alexcrichton/rust/issue-10857, r=huonw...
[04:21:37] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[04:21:44] <jack> strcat: wellt he isue here is that now `make check` won't work on 10.9
[04:21:44] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[04:21:56] <jack> so people should be aware
[04:29:18] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[04:31:29] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[04:36:32] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[04:36:32] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1466d9ef8 to 1429ca435: 02http://git.io/N3iJvQ
[04:36:32] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[04:40:42] <ChrisMorgan> bors needs to be taught that some PRs don't need any testing. (e.g. the currently approved https://github.com/mozilla/rust/pull/10882, a typo in untested docs and https://github.com/mozilla/rust/pull/10888, Vim syntax stuff.)
[04:48:29] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[04:48:29] *** ChanServ sets mode: +o tjc
[04:58:26] *** Quits: canhtak (canhtak@moz-A53E1151.wl.t.ulaval.ca) (Quit: canhtak)
[05:10:32] <sfackler> acrichto: for the io::util stuff you mentioned, do you envision the tee writer to be a special case of the duplication writer? and the duplication writer just forwards to a ~[~Writer]?
[05:10:57] <sfackler> although I guess that TeeWriter couldn't actually be a special case then
[05:11:02] <acrichto> hm, I hadn't really give nit too much thought
[05:11:44] <acrichto> I'm not sure how useful the array one would be though
[05:11:53] <acrichto> normally you want writes to go to one place or two places, but not N
[05:12:21] <sfackler> oh, I guess it can
[05:12:25] <sfackler> yeah
[05:12:56] <sfackler> tee actually supports writing to an arbitrary number of files, but I don't know if anyone actually does that
[05:13:21] <acrichto> oh wow I never knew that
[05:13:31] * ChrisMorgan thinks he has used it once
[05:16:30] <sfackler> I have BoundedReader, NullWriter and ZeroReader right now. anything else I should toss in before I make the pr?
[05:16:42] <sfackler> would Tee actually be useful?
[05:17:02] <acrichto> I've found it to be useful before
[05:17:02] <ChrisMorgan> Anyway, you can chain tee, so writing to more than one is unnecessary.
[05:17:47] <sfackler> so it'll just be Tee::new(writer1, writer2)
[05:18:16] <acrichto> sfackler: hm, go's tee interface is a little different
[05:18:30] <acrichto> http://golang.org/pkg/io/#TeeReader
[05:18:59] <acrichto> not saying we have to do that, but worth considering
[05:19:30] <acrichto> sfackler: it may be worth just implementing a tasteful selection of the utilities that they've got
[05:19:36] <acrichto> I imagine that we'll have similar needs
[05:19:39] <sfackler> there's also MutiWriter
[05:20:04] <acrichto> huh, I only see multi reader
[05:20:12] <acrichto> oh there it is
[05:20:20] <acrichto> that's weird
[05:20:26] <acrichto> similar to the tee command
[05:20:33] <acrichto> but not the tee reader...
[05:21:03] <acrichto> I suppose TeeReader is just a different interface in that it's a pull-kinda thing instead of a push-kinda thing
[05:21:33] <sfackler> yeah
[05:24:18] <sfackler> hmm, Go's API isn't particularly consistent. MultiWriter is similar to TeeReader, but completely unrelated to MultiReader
[05:24:55] <acrichto> I trust your taste
[05:47:31] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[05:47:31] *** ChanServ sets mode: +ao pcwalton pcwalton
[05:47:38] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[05:53:16] *** Quits: dbaupp (Thunderbir@1D1B1F7A.D5A1DCF.37681C44.IP) (Ping timeout)
[06:00:10] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[06:01:44] *** Quits: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net) (Ping timeout)
[06:02:42] <sfackler> acrichto: is https://github.com/mozilla/rust/pull/10833 on the agenda for tomorrow?
[06:09:08] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[06:12:52] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Quit: Sharp)
[06:13:13] <ChrisMorgan> r? https://github.com/mozilla/rust/pull/10891
[06:16:18] *** Quits: bjz (bjz@moz-C1B1AF2A.lnse2.cha.bigpond.net.au) (Ping timeout)
[06:17:02] *** Joins: bjz (bjz@moz-C1B1AF2A.lnse2.cha.bigpond.net.au)
[06:18:06] <acrichto> sfackler: yes
[06:41:33] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[06:41:33] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/MeZ7nQ
[06:41:33] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[06:41:56] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[06:46:37] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[06:46:37] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/wBNrFQ
[06:46:37] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[06:46:38] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[06:46:38] <ghrust> 01[13rust01] 15bors pushed 14 new commits to 06auto: 02http://git.io/HhHcpQ
[06:46:38] <ghrust> 13rust/06auto 144b4cdaf 15Patrick Walton: libextra: Another round of de-`Cell`-ing....
[06:46:38] <ghrust> 13rust/06auto 14f639ed2 15Patrick Walton: librustuv: RAII-ify `Local::borrow`, and remove some 12 Cells.
[06:46:38] <ghrust> 13rust/06auto 14d69eb0d 15Patrick Walton: libstd: Remove some cells involved in...
[06:46:40] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[06:46:46] <acrichto> go, bors, go!
[06:46:53] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[06:47:12] <olsonjeffery> what is replacing Cell? just different patterns?
[06:47:29] <olsonjeffery> or just less madness, i guess. more stack fns?
[06:47:55] <acrichto> the replacement is not using Cell
[06:48:01] <sfackler> most of the usage was moving stuff into tasks which proc handles
[06:48:03] <acrichto> if you really need to transfer ownership, you can use Option
[06:48:16] <sfackler> some of it was working around borrowck errors that don't exist anymore
[06:48:26] <sfackler> when you actually need dynamic mutability, there's RefCell
[06:48:40] <sfackler> and iirc pcwalton's going to add a new version of Cell for POD types
[06:49:17] <olsonjeffery> also, i pasted this in #rust-gamedev, but no one is active there :/ http://imgur.com/NkbG95b
[06:50:02] <sfackler> acrichto: do you have any opinions on LimitReader taking its Reader by value vs by reference?
[06:50:25] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[06:50:54] <sfackler> it seems like a difference of needing to call inner() to get the initial Reader back vs letting the LimitReader fall out of scope
[06:51:11] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[06:51:49] *** Joins: dbaupp (Thunderbir@moz-EB2EFE6F.lns20.syd6.internode.on.net)
[06:52:04] <acrichto> sfackler: reference
[06:53:27] *** Quits: bjz (bjz@moz-C1B1AF2A.lnse2.cha.bigpond.net.au) (Ping timeout)
[06:54:17] <sfackler> cool, r? https://github.com/mozilla/rust/pull/10895
[06:54:37] <sfackler> it's kind of a bummer that drop(foo) doesn't do what you want it to if foo is copyable
[06:57:09] *** Joins: bjz (bjz@moz-C1B1AF2A.lnse2.cha.bigpond.net.au)
[06:58:57] *** Quits: bjz (bjz@moz-C1B1AF2A.lnse2.cha.bigpond.net.au) (Ping timeout)
[07:07:48] *** Quits: benh (ben@moz-4A0366D2.org) (Ping timeout)
[07:09:23] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[07:21:42] <ChrisMorgan> dbaupp: r? https://github.com/mozilla/rust/pull/10891
[07:30:12] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[07:37:11] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[07:41:36] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[07:41:36] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1451cb82e to 14ad292ac: 02http://git.io/N3iJvQ
[07:41:36] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[07:41:40] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[07:41:40] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/Q-ZcBA
[07:41:40] <ghrust> 13rust/06auto 14b3e54d5 15Edward Z. Yang: Add some more commentary to FFI tutorial....
[07:41:40] <ghrust> 13rust/06auto 14012e88b 15bors: auto merge of #10822 : ezyang/rust/master, r=huonw...
[07:41:41] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[07:48:58] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[07:49:02] <sfackler> acrichto: if you have time for the "enum mod" proposal at the meeting tomorrow, one other thing to consider is to change "enum" to always introduce a new namespace. right now enum is unique in that it's the _only_ block-like item which doesn't introduce some layer of indirection to accessible things inside it
[07:49:20] <strcat> sfackler: extern {}
[07:49:40] <sfackler> sure
[07:49:45] <sfackler> but that doesn't even name the block
[07:49:47] <strcat> rusti: extern { #[link_name = "llvm.abort] fn abort() }
[07:49:47] -rusti- <anon>:11:16: 11:17 error: unknown start of token: ?
[07:49:48] -rusti- <anon>:11     println!("{:?}", r)
[07:49:48] -rusti-                           ^
[07:49:48] -rusti- application terminated with error code 101
[07:49:57] <strcat> rusti: extern { #[link_name = "llvm.abort"] fn abort() -> !; }
[07:49:58] -rusti- ()
[07:50:01] <strcat> sfackler: true
[07:50:20] <strcat> rusti: extern { #[link_name = "llvm.trap"] fn abort() -> !; } unsafe { abort() }
[07:50:21] -rusti- pastebinned 13 lines of output: http://sprunge.us/TBVe
[07:50:22] <sfackler> super common variants like Some and Err could still be exported
[07:50:38] <sfackler> and you could always manually directly "use" the variant if you wanted
[07:50:47] <sfackler> *could still be pub use'd in the prelude
[07:51:37] <acrichto> sfackler: yeah I wanna bring that up b/c I personally would like to see 'enum mod', although I kinda like the behavior that we have today as the default
[07:52:13] * strcat doesn't really want both
[07:52:16] <strcat> it's an odd choice
[07:52:31] <strcat> it's nicer for the language to force either one on you imo
[07:52:37] <strcat> otherwise there's no consistency at all
[07:52:39] <ChrisMorgan> Today in syntax::parse::token I saw the enum mod pattern visible in having the enum Keyword being the only item in a mod keywords.
[07:53:32] <sfackler> C++ introduced enum class, but they have to maintain backwards compatibility
[07:54:02] <ChrisMorgan> I know that I really want enum mod as the normal way things should be done.
[07:54:18] <ChrisMorgan> I also don't particularly see why the variants should need to be imported, truth to tell.
[07:54:34] <ChrisMorgan> But that's a more radical opinion and not part of the enum mod discussion.
[07:56:52] *** Joins: bjz (bjz@moz-C1B1AF2A.lnse2.cha.bigpond.net.au)
[08:03:44] *** Quits: bjz (bjz@moz-C1B1AF2A.lnse2.cha.bigpond.net.au) (Ping timeout)
[08:15:57] <dbaupp> acrichto: https://github.com/mozilla/rust/issues/10896
[08:21:57] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[08:21:58] *** Joins: benh (ben@moz-4A0366D2.org)
[08:27:19] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:27:40] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:30:16] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:32:08] *** Joins: bjz (bjz@moz-C1B1AF2A.lnse2.cha.bigpond.net.au)
[08:41:38] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[08:41:38] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/vjzncg
[08:41:38] <ghrust> 13rust/06auto 149522a08 15Alex Crichton: Check the privacy of implemented traits...
[08:41:38] <ghrust> 13rust/06auto 143c399f6 15bors: auto merge of #10862 : alexcrichton/rust/issue-10857, r=huonw...
[08:41:38] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[08:43:25] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:43:29] *** Quits: carter (carter@moz-F3C2A2D8.nycmny.fios.verizon.net) (Quit: My MacBook has gone to sleep. ZZZzzz‚Ä¶)
[08:43:36] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[08:50:37] *** flaper87|afk is now known as flaper87
[08:52:44] <acrichto> dbaupp: looks like the doc directory still had them in there from a long time ago, I just cleaned it out, so let's check it out after the next sync (they should be automatically deleted)
[08:56:22] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[09:17:40] <dbaupp> acrichto: awesome
[09:21:09] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[09:24:08] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: Textual IRC Client: www.textualapp.com)
[09:34:43] *** Quits: Kxepal (Miranda@moz-BEA1ED22.pppoe.mtu-net.ru) (Ping timeout)
[09:38:16] *** Joins: Kxepal (Miranda@moz-84D27387.pppoe.mtu-net.ru)
[10:05:13] *** kimundi is now known as zz_kimundi
[10:31:02] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Quit: Lost terminal)
[10:38:15] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[10:48:00] <cmr> sfackler: thanks ;P
[11:11:43] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[11:11:43] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/vjzncg
[11:11:43] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[11:16:38] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[11:16:38] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/DfkBow
[11:16:38] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[11:16:42] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[11:16:42] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/qAoEUQ
[11:16:42] <ghrust> 13rust/06auto 14b3e54d5 15Edward Z. Yang: Add some more commentary to FFI tutorial....
[11:16:42] <ghrust> 13rust/06auto 140d9c0c9 15bors: auto merge of #10822 : ezyang/rust/master, r=huonw...
[11:16:42] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[11:21:26] *** zz_kimundi is now known as kimundi
[11:28:03] <dbaupp> woah, apparently https://github.com/mozilla/rust/pull/10855 (using a single statically linked snapshot) halved the testing time on BSD; that seems screwy
[11:28:51] <friggle> not totally insane is the testing time is dominated by process launch
[11:28:53] <friggle> *if
[11:29:05] <dbaupp> on BSD?
[11:29:10] <cmr> the snapshot only builds stage1, doesn't touch the tests
[11:29:21] <dbaupp> and BSD is using the check-fast driver
[11:29:33] <dbaupp> (and as cmr says, the snapshot shouldn't affect the tests...)
[11:29:49] <friggle> ah, I see
[11:30:14] <dbaupp> well, http://buildbot.rust-lang.org/builders/auto-bsd-64-opt/builds/2634/steps/test/logs/stdio (fast) and http://buildbot.rust-lang.org/builders/auto-bsd-64-opt/builds/2633/steps/test/logs/stdio (slow) seem similar
[11:32:41] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Quit: Ï†Ñ Ïù¥Îßå Í∞ëÎãàÎã§.)
[11:32:45] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[11:47:31] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[11:48:36] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[11:53:48] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[11:54:28] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[11:58:39] *** Joins: canhtak (canhtak@moz-1D882009.wl.t.ulaval.ca)
[12:01:41] *** Joins: jensnockert (jensnocker@moz-250D9518.wireless.lu.se)
[12:02:20] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[12:04:28] *** Joins: sanxiyn (tinuviel@B4104EBB.3CC170B1.1E14B209.IP)
[12:14:14] <cmr> dbaupp: I just noticed that the bencher is broken
[12:14:24] <cmr> rustc build failure :\
[12:14:27] <dbaupp> cmr: oh
[12:14:52] <cmr>  ../src/librustc/lib.rs:115:12: 115:20 error: file not found for module `llvmdeps`
[12:14:54] <cmr>  ../src/librustc/lib.rs:115     pub mod llvmdeps;
[12:14:56] <cmr>                                         ^~~~~~~~
[12:14:58] <cmr>  task 'rustc' failed at 'explicit failure', /home/cmr/multibuild/build/a6310f6ad3434a03d5c257db5eae85b7b7522c29/src/libsyntax/diagnostic.rs:76
[12:15:00] <cmr>  task '<main>' failed at 'explicit failure', /home/cmr/multibuild/build/a6310f6ad3434a03d5c257db5eae85b7b7522c29/src/librustc/lib.rs:393
[12:15:03] <dbaupp> is the file there?
[12:15:22] <cmr> no
[12:15:32] <cmr> hm
[12:15:41] <cmr> "the dependencies to the LLVM are a dynamically generated rust file."
[12:16:26] <cmr> that's obnoxious :(
[12:16:37] <dbaupp> dynamically generated by the makefile, so a hand compile doesn't work? :(
[12:16:56] <cmr> eugh and it requires a full llvm rebuild
[12:17:04] <cmr> the bencher is about to get a lot slower
[12:17:16] <dbaupp> :/
[12:17:20] <sanxiyn> cmr: IIRC it is generated by src/etc/mklldeps.py
[12:17:38] <cmr> it is, but the make target depends on llvm
[12:17:40] <dbaupp> cmr: wait, a full LLVM rebuild on each run?
[12:17:54] <cmr> dbaupp: yeah
[12:17:56] <cmr> well
[12:18:00] <cmr> no
[12:18:17] <dbaupp> make up your mind :P
[12:18:22] <cmr> whenever there's an llvm upgrade, or I bench something across an llvm upgrade boundary
[12:18:25] <cmr> maybe this won't be so bad.
[12:19:06] <sanxiyn> cmr: Well it asks llvm-config to tell LLVM dependencies, so it should run after LLVM build
[12:19:47] <cmr> sanxiyn: I understand that, it just makes my benchmarking infrastructure even more hairy and slow.
[12:19:52] <sanxiyn> :(
[12:20:04] <sanxiyn> I think the main reason it was introduced is static build
[12:20:18] <sanxiyn> LLVM builds one libLLVM.so, but very many libLLVM*.a files
[12:21:24] <sanxiyn> cmr: Hopefully we can build with host LLVM soon...
[12:21:43] <sanxiyn> Until then, I think hardcoding for each LLVM upgrade is ok
[12:21:51] <sanxiyn> (Assuming we don't do upgrade too often)
[12:21:51] <cmr> Weird enough I actually had a dream last night about reviewing patches for upstreaming LLVM ...
[12:22:56] <ChrisMorgan> ‚Ä¶
[12:23:37] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[12:23:43] <ChrisMorgan> cmr: are you sure working on Rust for your break is the best thing for your health?
[12:23:50] <cmr> ChrisMorgan: :P
[12:24:00] <sanxiyn> cmr: You have health problems?
[12:24:19] <eddyb> rust is quite dirty :P
[12:24:29] <dbaupp> ChrisMorgan: the answer to that question is *clearly* yes
[12:24:42] <eddyb> may have tetanus
[12:24:53] <cmr> sanxiyn: ChrisMorgan is joking about me dreaming in code review
[12:25:19] <sanxiyn> Well I am (admittedly rarely) known to debug in dream, so...
[12:25:31] <ChrisMorgan> sanxiyn: you've got to start worrying when people dream about doing code review, debugging, &c.!
[12:26:01] <dbaupp> sanxiyn: did you fix the bugs?
[12:26:04] * ChrisMorgan will also admit to having the occasional code-related dream, sometimes surprisingly subtle
[12:26:15] <sanxiyn> dbaupp: Dream debugging sometimes worked!
[12:26:20] <dbaupp> \o/
[12:26:47] <ChrisMorgan> cmr: dream about rewriting the compiler. And take care to remember it all.
[12:27:04] <sanxiyn> http://www.dreamingincode.com/ -- report on a new medical condition
[12:28:39] <sanxiyn> Hm, I haven't looked at that book for some time, and re-reading tagline, am I weird thinking 4732 bugs for 3 years is pretty low count?
[12:28:47] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[12:29:46] <cmr> the fact that they made 4732 bugs *and* fixed them is the surprising part!
[12:30:15] <cmr> what is that book actually about?
[12:30:21] <cmr> I find the homepage to not be very illuminating
[12:30:30] <eddyb> http://chandlerproject.org/
[12:30:40] <dbaupp> well, https://github.com/mozilla/rust/pull/4150 was opened almost precisely 1 year ago
[12:30:42] <sanxiyn> cmr: You mean the particular software project?
[12:30:43] <eddyb> seems interesting
[12:30:57] <dbaupp> and we're currently up to 10900...
[12:31:46] <cmr> sanxiyn: is it just about the development of that software?
[12:31:58] <dbaupp> (and we only have 1473 open bugs, so we've fixed/closed at least 5000 in that time.)
[12:32:37] <sanxiyn> cmr: It is ostensibly about software development in general, using that case study
[12:32:49] <sanxiyn> Whether it succeeds is... I am not sure
[12:36:17] <sanxiyn> cmr: In the same genre, I found this to be a better book:
[12:36:18] <sanxiyn> http://www.amazon.com/Show-Stopper-Breakneck-Generation-Microsoft/dp/0029356717
[12:36:32] <sanxiyn> Show Stopper!: The Breakneck Race to Create Windows NT
[12:37:48] <sanxiyn> Windows NT is now 20 years old
[12:38:38] <cmr> mm, I do own that
[12:38:43] <cmr> haven't gotten around to reading it yet.
[12:38:46] <sanxiyn> Ah
[12:38:47] <cmr> uor, finishing it, rather
[12:39:25] <sanxiyn> cmr: One thing I noticed is that it seems we certainly advanced on software engineering. NT team continually struggles with build in the book
[12:39:28] <sanxiyn> Probably more so than today
[12:40:09] <sanxiyn> I also enjoyed the part dealing with creation of NTFS
[12:44:33] <sanxiyn> Where Wizards Stay Up Late is also pretty good
[12:44:45] <sanxiyn> (It's about early history of the Internet)
[12:50:54] <cmr> dbaupp: http://static.rust-lang.org/doc/master/ng/std/index.html seems to be gone now?
[12:51:05] <dbaupp> not for me
[12:51:10] <dbaupp> oh, caches
[12:51:16] <dbaupp> yup
[12:51:22] <cmr> yeah, s3 caches pretty intensely.
[12:51:49] <dbaupp> hah, race condition
[12:53:07] <dbaupp> cmr: fwiw, it wasn't a false positive
[12:53:26] <cmr> oh, it legitimately existed and then was removed?
[12:53:30] <dbaupp> yes
[12:53:32] <cmr> ok
[12:53:58] <dbaupp> acrichto removed the leftover folders on the bots I think
[12:54:02] <sanxiyn> I am thinking of a way to get all spans correct once and for ever
[12:54:12] <dbaupp> sanxiyn: yes please!
[12:54:57] <sanxiyn> Idea: Add -Z check-span mode, after parsing, visit all expressions, get span's lo and hi, get substring from lo to hi, and re-parse substring and compare
[12:55:05] <sanxiyn> Does that sound workable?
[12:55:13] <cmr> hm
[12:55:22] <cmr> that'd also catch multi-character bugx.
[12:55:24] <cmr> *bugs
[12:55:55] <dbaupp> cmr: i.e. the complete lack of correct handling of multi-byte characters? :P
[12:56:00] <cmr> it's not complete.
[12:56:05] <cmr> it *does* try :p
[12:56:13] <sanxiyn> I think it has some serious bugs
[12:56:18] <cmr> yes, it does.
[12:56:19] <sanxiyn> Haven't tracked it down yet
[12:57:35] <dbaupp> rusti:  (√∂√§√∂√•√∂√§, √∂√•√∂√§√∂√∂)
[12:57:37] -rusti- pastebinned 8 lines of output: http://sprunge.us/RRYD
[12:57:46] <dbaupp> ( https://github.com/mozilla/rust/issues/8706 )
[12:57:52] <cmr> lol
[12:58:11] <sanxiyn> dbaupp: Eh that's just diagnostics
[12:58:22] <dbaupp> sanxiyn: what other spans are there?
[12:58:39] <sanxiyn> I heard of downright parse failures with multibyte characters
[12:58:56] <dbaupp> oh
[12:58:59] <sanxiyn> (Apparently impossible to reproduce with a single file, multiple files needed)
[12:59:22] <sanxiyn> So I suspect there's bug somewhere in multiple files handling
[12:59:27] <cmr> http://static.rust-lang.org/doc/master/std/kinds/index.html
[12:59:33] <cmr> Did two of the kinds disappear when I wasn't looking?
[12:59:39] <dbaupp> cmr: maybe
[12:59:54] <dbaupp> cmr: well, http://static.rust-lang.org/doc/0.8/std/kinds/index.html
[13:00:08] <ChrisMorgan> cmr: when were you not looking?
[13:00:09] <cmr> ...huh
[13:00:14] <cmr> ChrisMorgan: apparently always
[13:00:49] <cmr> I feel like I remember there being 4 bounds, before sized was added.
[13:00:49] <ChrisMorgan> http://static.rust-lang.org/doc/0.7/std/kinds.html had Copy which was removed by 0.8.
[13:00:50] <dbaupp> cmr: http://static.rust-lang.org/doc/0.7/std/kinds.html
[13:01:02] <cmr> but according to git log, nope.
[13:01:27] <dbaupp> they kept changing names
[13:01:46] <cmr> Const, Copy, Owned, Durable.
[13:01:49] <cmr> is what they were
[13:01:50] <sanxiyn> Also compare:
[13:01:53] <sanxiyn> http://static.rust-lang.org/doc/0.6/core/kinds.html
[13:02:09] <dbaupp> Durable became 'static, right?
[13:02:14] <cmr> yeah
[13:02:50] <sanxiyn> cmr: I think Const became Freeze
[13:03:18] <sanxiyn> (and Owned Send)
[13:10:58] *** Joins: w3lcome (Mibbit@moz-33A75FFD.home.otenet.gr)
[13:19:31] <cmr> "error: could not find native static library `LLVMInstrumentation`, perhaps an -L flag is missing?"
[13:19:33] <cmr> :(
[13:19:44] <cmr> LLVM was built though
[13:20:23] <cmr> hm, needs more -L
[13:20:29] <cmr> more and more fragile...
[13:21:45] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[13:21:45] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/qAoEUQ
[13:21:45] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[13:21:50] *** kimundi is now known as zz_kimundi
[13:24:59] *** Joins: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net)
[13:26:36] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[13:26:36] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/k524NQ
[13:26:36] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[13:26:37] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[13:26:37] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/-iiC-A
[13:26:37] <ghrust> 13rust/06auto 146de5b7a 15Jan Niklas Hasse: Add missing .com
[13:26:37] <ghrust> 13rust/06auto 14487e58c 15bors: auto merge of #10882 : jhasse/rust/patch-1, r=metajack...
[13:26:38] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[13:45:59] <dbaupp> cmr: I'm getting the membench results
[13:46:25] *** Quits: canhtak (canhtak@moz-1D882009.wl.t.ulaval.ca) (Quit: canhtak)
[13:46:31] <cmr> yay
[13:46:50] <dbaupp> weird, the memory usage in linking is all strange
[13:47:36] <cmr> I imagine those are the various libLLVM*.a things
[13:48:06] <dbaupp> ah, probably
[13:48:46] <cmr> hm, maybe not.
[13:49:02] <cmr> there are 45 static lbis
[13:49:07] <cmr> well
[13:49:11] * cmr counts the humps
[13:49:25] <dbaupp> 45 sounds reasonable
[13:49:32] <cmr> 50 humps
[13:49:40] <dbaupp> libstd, etc?
[13:49:42] <cmr> so that, librustrt, and 4 others
[13:49:44] <cmr> yeah
[13:49:50] <cmr> something like that :p
[13:50:03] <dbaupp> looks sharp
[13:50:15] <cmr> I wonder if static linking is going to hurt compiletime if the linker needs to be working harder.
[13:50:33] <cmr> shouldn't matter to much once we switch to lld I suppose.
[13:50:42] <cmr> it's supposedly very efficient
[13:51:40] <cmr> I'm considering removing all managed pointers from the tutorial.
[13:52:07] <dbaupp> that'd be nice
[13:52:17] <dbaupp> but, aiui, strcat is basically rewriting the whole thing
[13:52:28] <cmr> well, I don't think he's going to rewrite all of it.
[13:52:35] <cmr> The intro up to his linked list part is basically fine;.
[13:52:43] <cmr> It's just introducing the syntax etc.
[13:52:58] <dbaupp> and after that is going to be rewritten to have case studies/examples?
[13:53:08] <cmr> yeah
[13:53:23] <cmr> it's the bits after that are rough
[13:53:42] <cmr> The tutorial isn't as bad as the pundits would lead you to believe.
[13:53:42] <dbaupp> the bits after the rest of the tutorial?
[13:53:55] <cmr> the bits after the new linked list section.
[13:54:53] <dbaupp> much of it looks like it will be ameniable to extending the linked list section (which I believe is strcat's plan)
[13:54:58] *** Quits: jensnockert (jensnocker@moz-250D9518.wireless.lu.se) (Input/output error)
[13:55:01] <cmr> yup
[13:55:30] *** Joins: jensnockert (jensnocker@moz-250D9518.wireless.lu.se)
[13:55:46] <dbaupp> in any case, bedtime
[13:55:57] <cmr> sleep well
[13:57:15] *** Quits: jensnockert (jensnocker@moz-250D9518.wireless.lu.se) (Ping timeout)
[14:01:53] *** zz_kimundi is now known as kimundi
[14:05:38] *** Joins: jensnockert (jensnocker@moz-250D9518.wireless.lu.se)
[14:09:07] <pnkfelix> hmm.  touching src/librustc/middle/typeck/infer/region_inference/mod.rs does not cause a rebuild ‚Ä¶ ?
[14:12:52] <sanxiyn> pnkfelix: Argh
[14:13:02] <sanxiyn> pnkfelix: In Makefile.in, COMPILER_INPUTS is defined as
[14:13:12] <sanxiyn> *.rs */*.rs */*/*.rs */*/*/*.rs
[14:13:17] <pnkfelix> sigh
[14:13:18] <cmr> oh jeez
[14:13:18] <sanxiyn> therefore missing */*/*/*/*.rs
[14:13:37] <sanxiyn> pnkfelix: Didn't we suffer this last time with */*/*/*.rs?
[14:13:39] <sanxiyn> Full me once...
[14:13:44] <sanxiyn> Fool
[14:14:02] <cmr> Surely there is some sort of "All *.rs, everywhere from here down", like `find` does?
[14:14:14] <sanxiyn> cmr: Yeah probably we were just lazy so far
[14:14:18] <pnkfelix> cmr: yeah I was just wondeing if gnu make has something for that
[14:14:30] <cmr> I remember looking for it and not finding it before...
[14:14:44] <ChrisMorgan> https://www.gnu.org/software/make/manual/html_node/Wildcard-Function.html doesn't suggest anything, nor did I find any way with rust-http.
[14:14:53] *** Quits: MOeltjenbruns (goofy@moz-D9C12442.hsd1.mn.comcast.net) (Connection reset by peer)
[14:15:18] <ChrisMorgan> https://lists.gnu.org/archive/html/help-gplusplus/2009-11/msg00013.html
[14:15:41] <ChrisMorgan> Sorry, not applicable.
[14:19:09] <ChrisMorgan> http://blog.jgc.org/2011/07/gnu-make-recursive-wildcard-function.html looks like it might do it.
[14:19:13] <pnkfelix> could this apply: http://stackoverflow.com/a/18258352/36585 ?
[14:19:50] <sanxiyn> pnkfelix: Yeah we added 4 stars glob in #8285
[14:20:16] <ChrisMorgan> pnkfelix: that's exactly the same as the thing in my link (a good sign)
[14:21:43] <pnkfelix> oh wait
[14:21:47] <pnkfelix> http://stackoverflow.com/questions/4036191/sources-from-subdirectories-in-makefile
[14:21:57] <pnkfelix> this claims that **/* works for recursive traversal
[14:22:11] <cmr> I feel like I've tried **/*.rs before, and it didn't do anything.
[14:22:13] * ChrisMorgan is fairly sure he tried that without success in rust-http
[14:22:14] <pnkfelix> (at least for Gnu Make 3.81.  At least for some pltforms...)
[14:22:25] <cmr> it's also what zsh uses
[14:22:50] <sanxiyn> Probably depending on the shell
[14:22:55] <pnkfelix> the people on SO also complain that it does not work.  so lets go with rwildcard instead.
[14:23:05] <pnkfelix> sanxiyn: (I had thought $(wildcard ‚Ä¶) doesn't use the shell ...
[14:23:14] <sanxiyn> Oh hm
[14:28:18] <sanxiyn> pnkfelix: As far as I can tell from reading make 3.81 source, wildcard is Make wrapper for glob(3)
[14:28:29] <sanxiyn> So **/* shouldn't work...
[14:28:35] <pnkfelix> sanxiyn: interesting
[14:28:50] <pnkfelix> well, SO has been wrong before
[14:29:13] <sanxiyn> (Look for func_wildcard function)
[14:29:49] <cmr> r? https://github.com/mozilla/rust/pull/10880
[14:30:19] <sanxiyn> Wow that's a lot
[14:30:25] <cmr> they're all tiny
[14:33:26] <sanxiyn> "Tuples in Rust behave exactly like structs, except that their fields do not have names."
[14:34:32] <cmr> Is it wrong?
[14:34:33] <sanxiyn> Ah no I was thinking of something different
[14:35:01] <sanxiyn> cmr: I thought for a moment it is wrong, but no, seems right
[14:35:09] <cmr> pl
[14:35:11] <cmr> *ok
[14:40:40] <cmr> pnkfelix: hm, nice catch.
[14:40:54] <cmr> I still feel like the old wording isn't very clear on when destructors are called.
[14:41:06] * ChrisMorgan agrees, neither is *quite* optimal
[14:41:50] <cmr> I might punt on that for a later PR. I think destructors deserve some more attention.
[14:41:59] <cmr> But maybe not, maybe that's fine and the manual just needs the specifics.
[14:43:51] *** Quits: sanxiyn (tinuviel@B4104EBB.3CC170B1.1E14B209.IP) (Quit: Leaving)
[14:50:43] *** kimundi is now known as zz_kimundi
[14:52:16] *** zz_kimundi is now known as kimundi
[14:57:36] *** Quits: jensnockert (jensnocker@moz-250D9518.wireless.lu.se) (Input/output error)
[15:02:49] *** Quits: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net) (Ping timeout)
[15:03:13] <jack> It's slightly wrong. Tuples can be dereferenced, but structs can't.
[15:03:27] <cmr> Wait what?
[15:03:40] <jack> oh sorry
[15:03:43] <jack> I'm thinking of enums.
[15:03:48] <cmr> Still: what?
[15:04:00] <cmr> Unary tuple structs can be dereferences.
[15:04:06] <jack> yes, that's what i meant.
[15:04:08] <cmr> But that's a hack more than anything, and on the chopping block iirc.
[15:04:15] <jack> Clearly I need more caffeiene
[15:04:59] <jack> I guess the only difference is that tuples have an anonymous type
[15:05:16] <jack> And structs have a real one.
[15:05:52] <jack> I suppose the right word for that is that tuples are structural types
[15:24:59] *** kimundi is now known as zz_kimundi
[15:29:26] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[15:31:56] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[15:36:38] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[15:36:38] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/-iiC-A
[15:36:38] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[15:39:15] *** Quits: ssbr (devin@moz-8EC4F450.lightspeed.sntcca.sbcglobal.net) (Ping timeout)
[15:41:37] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[15:41:37] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/ybqLtA
[15:41:37] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[15:41:39] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[15:41:39] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/kBa4ig
[15:41:39] <ghrust> 13rust/06auto 142d7b690 15Alex Crichton: Register new snapshots...
[15:41:39] <ghrust> 13rust/06auto 144ab6a08 15bors: auto merge of #10886 : alexcrichton/rust/snapshots, r=huonw...
[15:41:39] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[15:43:40] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Quit: Sharp)
[15:48:44] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[15:55:39] *** Joins: ssbr (devin@moz-8EC4F450.lightspeed.sntcca.sbcglobal.net)
[15:57:56] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[16:25:37] *** Joins: TimAbraldes (quassel@125EF623.B2666F0E.66399531.IP)
[16:40:02] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Quit: Sharp)
[16:41:48] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[16:42:51] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[16:55:31] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Quit: Sharp)
[16:56:02] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[17:00:30] *** flaper87 is now known as flaper87|afk
[17:03:44] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[17:04:34] <cmr> pnkfelix: ChrisMorgan: any other feedback on the tutorial PR? anything holding back an r+?
[17:04:50] <pnkfelix> cmr: no other feedback from me
[17:12:18] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[17:12:44] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[17:17:58] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[17:18:01] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[17:20:02] *** zz_kimundi is now known as kimundi
[17:34:33] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[17:38:23] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[17:40:07] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Quit: Sharp)
[17:42:33] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[17:44:45] *** Joins: canhtak (canhtak@moz-1D882009.wl.t.ulaval.ca)
[17:46:27] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[17:46:27] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/kBa4ig
[17:46:27] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[17:48:45] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[17:49:53] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[17:51:11] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Quit: Sharp)
[17:51:32] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[17:51:32] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/81YesQ
[17:51:32] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[17:51:33] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[17:51:33] <ghrust> 01[13rust01] 15bors pushed 14 new commits to 06auto: 02http://git.io/1opgAA
[17:51:33] <ghrust> 13rust/06auto 1421b1726 15Patrick Walton: libextra: Another round of de-`Cell`-ing....
[17:51:33] <ghrust> 13rust/06auto 142afa052 15Patrick Walton: librustuv: RAII-ify `Local::borrow`, and remove some 12 Cells.
[17:51:35] <ghrust> 13rust/06auto 145624921 15Patrick Walton: libstd: Remove some cells involved in...
[17:51:36] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[17:52:14] <cmr> whoa, nice job pcwalton
[17:56:07] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[17:59:59] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[18:00:00] *** ChanServ sets mode: +qo brson brson
[18:01:35] <eddyb> cmr: so this was supposed to be fixed https://github.com/mozilla/rust/issues/7136
[18:01:44] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Ping timeout)
[18:02:03] <cmr> yes
[18:02:25] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[18:02:34] <eddyb> https://github.com/mozilla/rust/pull/7466/files erm, just changing the set (or ordering) of passes?
[18:02:43] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[18:02:47] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[18:02:47] *** ChanServ sets mode: +qo brson brson
[18:02:48] <cmr> yes
[18:05:18] *** Joins: notmatt (notmatt@CC62CF7E.1E7FDFDB.A82DBDDB.IP)
[18:05:39] <eddyb> this might have screwed that up https://github.com/mozilla/rust/commit/73540551e5051c524b5533a5ab3eb991dda4eaac
[18:08:17] <cmr> acrichto: ping
[18:10:17] *** Joins: dherman (dherman@moz-BBE3ABD.mv.mozilla.com)
[18:10:17] *** ChanServ sets mode: +ao dherman dherman
[18:10:52] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[18:13:19] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[18:25:43] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[18:25:44] *** ChanServ sets mode: +ao pcwalton pcwalton
[18:27:20] <acrichto> cmr: pong, but in a meeting
[18:27:33] <cmr> acrichto: ok, ping me when you're out?
[18:27:38] <acrichto> will do
[18:27:51] <eddyb> at least it's not his (immediate) fault :P
[18:29:24] <cmr> ping was unrelated
[18:30:00] <eddyb> cmr: just increasing the suspense
[18:37:57] <cmr> acrichto: unping, actually.
[18:41:29] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[18:41:29] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 140b126bc to 144ab6a08: 02http://git.io/N3iJvQ
[18:41:29] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[18:41:31] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[18:41:31] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/xO4WRQ
[18:41:31] <ghrust> 13rust/06auto 1422f14fb 15Niko Matsakis: Issue #9629 -- permit freezing `&mut` found within an `&` pointer
[18:41:31] <ghrust> 13rust/06auto 149f7baed 15Niko Matsakis: Address nits for PR for #9629
[18:41:31] <ghrust> 13rust/06auto 141252947 15Niko Matsakis: Make main pub in test case (cc #9629)
[18:41:33] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[18:41:43] *** Joins: carter (carter@moz-F3C2A2D8.nycmny.fios.verizon.net)
[18:42:13] <eddyb> wait, is that the &&mut I hit yesterday in my rust-png PR?
[18:42:34] <cmr> no
[18:43:40] *** Quits: canhtak (canhtak@moz-1D882009.wl.t.ulaval.ca) (Quit: canhtak)
[18:47:24] *** Quits: carter (carter@moz-F3C2A2D8.nycmny.fios.verizon.net) (Quit: Textual IRC Client: www.textualapp.com)
[18:56:01] *** Joins: carter (carter@moz-3589B90B.c.ircrelay.com)
[18:57:30] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[19:02:48] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[19:13:49] *** Joins: canhtak (canhtak@moz-1D882009.wl.t.ulaval.ca)
[19:21:30] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[19:21:30] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14667952e to 144ab6a08: 02http://git.io/N3iJvQ
[19:21:30] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[19:24:11] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[19:31:03] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[19:31:03] *** ChanServ sets mode: +qo brson brson
[19:38:38] *** Quits: dherman (dherman@moz-BBE3ABD.mv.mozilla.com) (Quit: dherman)
[19:40:29] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[19:41:30] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Quit: pcwalton)
[19:43:02] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[19:43:03] *** ChanServ sets mode: +ao pcwalton pcwalton
[19:43:35] *** Parts: canhtak (canhtak@moz-1D882009.wl.t.ulaval.ca) ()
[19:48:38] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[19:50:02] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Quit: pcwalton)
[19:51:50] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[19:51:51] *** ChanServ sets mode: +qo brson brson
[20:01:14] <jack> brson: r? https://github.com/mozilla/rust/pull/10593
[20:06:25] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[20:06:25] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14babf368 to 144ab6a08: 02http://git.io/N3iJvQ
[20:06:25] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[20:06:26] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[20:06:26] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/iwxVUQ
[20:06:26] <ghrust> 13rust/06auto 141288678 15Steven Fackler: Allow ref and mut modifiers for short form field patterns...
[20:06:26] <ghrust> 13rust/06auto 14404cde7 15bors: auto merge of #10833 : sfackler/rust/mut-pat, r=brson...
[20:06:26] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[20:50:36] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Quit: Sharp)
[20:51:24] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[20:51:24] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14404cde7 to 144ab6a08: 02http://git.io/N3iJvQ
[20:51:24] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[20:51:25] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[20:51:25] <ghrust> 01[13rust01] 15bors pushed 22 new commits to 06auto: 02http://git.io/H7D7wA
[20:51:25] <ghrust> 13rust/06auto 148a8cccd 15Corey Richardson: Explain potentially confusing string example....
[20:51:25] <ghrust> 13rust/06auto 1461e8268 15Corey Richardson: Fix span.
[20:51:25] <ghrust> 13rust/06auto 148ae340a 15Corey Richardson: Note that Rust can be embedded.
[20:51:26] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[20:55:56] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[20:57:03] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[20:57:13] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[20:59:49] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[21:12:22] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[21:17:53] *** Joins: dherman (dherman@moz-BBE3ABD.mv.mozilla.com)
[21:17:53] *** ChanServ sets mode: +ao dherman dherman
[21:24:01] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[21:24:01] *** ChanServ sets mode: +ao pcwalton pcwalton
[21:28:39] *** Quits: dbaupp (Thunderbir@moz-EB2EFE6F.lns20.syd6.internode.on.net) (Ping timeout)
[21:34:52] *** Quits: notmatt (notmatt@CC62CF7E.1E7FDFDB.A82DBDDB.IP) (Client exited)
[21:39:18] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[21:42:32] *** flaper87|afk is now known as flaper87
[21:49:14] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[21:56:23] *** Joins: notmatt (notmatt@CC62CF7E.1E7FDFDB.A82DBDDB.IP)
[21:56:32] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[21:56:32] *** ChanServ sets mode: +o tjc
[22:00:24] <jack> why do we use crates as the unit of compilation? Is it just to support circular dpendencies?
[22:00:42] <bstrie> what are these references to "tvland" in the meeting notes?
[22:01:17] <tjc> jack: I think one of the old versions of the Rust manual talked about the reason for that
[22:01:19] <tjc> like, 2011-old
[22:01:33] <bstrie> you'd have to ask graydon :P
[22:01:40] <tjc> or you could ask Graydon, yeah
[22:01:46] <jack> bstrie: many of us remoties appear on the TV video conference system in the room
[22:01:50] <bstrie> ah ok
[22:02:02] <strcat> jack: I think crates make sense as a compilation unit, and we have static linking and LTO now
[22:02:43] <jack> I"m not trying to debate the issue, just trying to understand it more fully. I'm write a blog post about build issues and started talking about this and realized my knowledge was a little lacking here.
[22:03:10] <strcat> I think rustc should handle this for you
[22:03:25] <strcat> if you replace mod with extern mod, it should be able to find it as a source file
[22:04:14] <strcat> (and do incremental/parallel compilation)
[22:04:49] <jack> If it's just for circular dependencies, in what cases do we actually use those?
[22:05:02] <strcat> lots of sub-modules refer to stuff defined in the parent
[22:05:28] <tjc> It seems like if sub-modules referring to parent is the main reason for circular dependencies, we could strengthen the notion of dependency
[22:05:31] <jack> That exists in C too, and they manage with object files.
[22:05:33] <tjc> as in, not allow general circular dependencies
[22:05:37] <tjc> just parent <-> child ones
[22:05:42] <strcat> jack: and headers defining an ABI
[22:05:52] <tjc> Like, other than those, I can't remember seeing a good reason to use circular dependencies other than "it just happened that way"
[22:05:55] <tjc> but maybe I'm forgetting something
[22:05:57] <jack> So in order to avoid headers, we do crate at a time?
[22:06:10] <jack> We could avoid headers by packing metadata in the object files, no?
[22:06:28] <strcat> jack: rust doesn't have the rules C does for this stuff
[22:06:30] <sfackler> re-r anyone? was just missing a pub in the rpass test https://github.com/mozilla/rust/pull/10833
[22:06:38] <strcat> jack: in C you can pre-declare a type and define it later
[22:06:50] <strcat> pre-declare a function and define it later
[22:07:07] <strcat> C++ makes it very clear that templates in headers are part of the ABI, but you can export specific instantiations
[22:07:19] * strcat shrugs
[22:07:35] <strcat> you'd have a hard time making rust use a model like that at this point imo
[22:07:37] <SiegeLord> You don't need crates to avoid headers. Crates seem to simplify provide link safety mostly
[22:07:59] <jack> strcat: i'm not saying we should. i want to be able to provide the justification for why we aren't :)
[22:08:03] <SiegeLord> *-providing
[22:09:30] <strcat> jack: the crate-based trait rules are a problem
[22:09:34] <strcat> they would need to be module-based
[22:10:08] * strcat shrugs
[22:10:16] <jack> so the rule that says to impelment a trait for a type either the type or the trait must be crate-local?
[22:10:19] <jack> instead of module local?
[22:10:25] <jack> do we use that?
[22:10:30] <strcat> I just think you'll end up close to statically linked crates again if you try to get object files
[22:10:57] <strcat> jack: yes we do a lot of stuff like that
[22:11:22] <jack> Can you give an example where it's hard to do another way?
[22:13:29] <strcat> rust leaks a lot of ABI info, even between crates
[22:14:18] <strcat> like statics
[22:14:44] <strcat> the type-checking and everything else is going to have to be crate-level
[22:15:16] <jack> Why is that?
[22:21:41] *** jdm is now known as jdm|away
[22:24:33] <strcat> jack: so in C you can declare an API/ABI in a header, and then provide the definitions of the globals/functions in a file, turned into an object file
[22:24:46] <strcat> jack: a static in rust that's public always has the definition available
[22:24:58] <strcat> so if a static changes, everything always needs to be recompiled (even across crates!)
[22:27:08] <jack> Maybe I'm missing something, but that doesn't seem to be justification for crate based compilation unit. I mean, if a static causes other crates to get recompiled, what does it matter if it came from a crate or from a mod or from a file?
[22:28:02] <tjc> By the way, Rust had crates before it had statics.
[22:28:11] <tjc> It also had crates before we started compiling polymorphism by monomorphization
[22:28:42] <strcat> jack: my point is just that making modules into a compilation unit means rethinking most of the language
[22:28:45] <strcat> not just the implementation
[22:29:00] <strcat> C headers aren't all bad - they provide a programmer defined API/ABI
[22:29:12] <jack> Why does it mean rethinking the language?
[22:29:31] <strcat> because rust pays very little attention to stuff like ABI stability
[22:29:47] <strcat> and ABI stability is the most essential thing for incremental compilation and dynamic linking
[22:30:01] <strcat> you need a clearly defined, local ABI
[22:30:31] <strcat> for example rust has std::repr (format!("{:?}", x)) and it lets you walk any type
[22:30:46] <strcat> so if any type definition changes (including private ones), you need to recompile anything depending on it
[22:31:06] <strcat> there's a lot of stuff leaked through glue
[22:31:14] <strcat> not just visit glue (reflection)
[22:31:15] <jack> I get that part. I don't get how that is related to the crate or module or object file at all.
[22:31:22] <jack> It's true no matter what hte unit of compilation
[22:32:03] <strcat> so what's the difference between a crate and module beyond whether it's used as a compilation unit?
[22:32:38] <strcat> if you want to allow cyclic dependencies, I think you need to change how rust does types
[22:33:06] <strcat> at least the metadata needs to change to not export internal details
[22:33:34] * strcat shrugs
[22:37:25] *** Joins: dbaupp (Thunderbir@1D1B1F7A.D5A1DCF.37681C44.IP)
[22:44:24] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[22:44:24] *** ChanServ sets mode: +ao pcwalton pcwalton
[22:45:22] <dbaupp> does anyone have an opinion on removing these? or, know why/what they're for? https://github.com/mozilla/rust/pull/10891/files#diff-74b5ba63896c56c0964426955d2700d1R429
[22:45:25] <dbaupp> ChrisMorgan: ^
[22:46:02] <ChrisMorgan> dbaupp: I was intending to go through removing the obsolete ones (like `str`) later today.
[22:47:31] <dbaupp> ChrisMorgan: can it be part of that PR?
[22:48:20] <ChrisMorgan> Oh, it could be. I was just preferring complete separation of concerns.
[22:48:43] <dbaupp> both are clean up of that module
[22:49:23] <aatch> ChrisMorgan, same concern, different commits seems reasonable.
[22:49:46] <dbaupp> ChrisMorgan: squashing the rename would be good too :)
[22:49:54] <ChrisMorgan> (And also I only decided I wanted to do it after I'd finished the other.)
[22:50:22] <aatch> ChrisMorgan, almost as good as the "lets_do_this!" macro in lang_items
[22:50:46] <ChrisMorgan> I'll admit I didn't put much effort into the selection of the macro name in either case. :P
[22:50:55] <ChrisMorgan> Local to the module, name doesn't really matter‚Ä¶
[23:05:42] <ChrisMorgan> Wow. I just finally tried installing ag to use instead of ack. What of the claimed 3-5x performance increase? With a hot cache in src/ for `::underscore`, it cut 1.0 seconds (with --no-smart-case and searching only in lib*, to make it more closely comparable with ag) into 0.078. ack has just seriously fallen out of fashion.
[23:06:10] <dbaupp> ChrisMorgan: git grep is pretty good too :P
[23:06:23] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[23:06:23] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/H7D7wA
[23:06:23] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[23:06:48] <tjc> compared to Rust build times, I've never had a problem with ack's performance ;-)
[23:06:52] <ChrisMorgan> dbaupp: an external tool which can be used whatever the situation is more generally useful
[23:07:06] <dbaupp> ChrisMorgan: you mean you don't have *everything* in git? :P
[23:07:53] <ChrisMorgan> No, most things I have in hg.
[23:08:45] *** Quits: notmatt (notmatt@CC62CF7E.1E7FDFDB.A82DBDDB.IP) (Client exited)
[23:11:23] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[23:11:23] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/HF3iAw
[23:11:23] <ghrust> 13rust/06auto 1472ab57a 15Jack Moffitt: Make crate hash stable and externally computable....
[23:11:23] <ghrust> 13rust/06auto 14e41ac64 15Jack Moffitt: Add missing sundown dependency to rustdoc tests.
[23:11:23] <ghrust> 13rust/06auto 14f1c64a0 15bors: auto merge of #10593 : metajack/rust/pkgid-hash, r=brson...
[23:11:25] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[23:13:47] *** Quits: dherman (dherman@moz-BBE3ABD.mv.mozilla.com) (Quit: dherman)
[23:15:21] <ChrisMorgan> BTW, when I get to removing `do` (not as part of this PR!), should I shift it to the reserved keywords or should I leave it where it is and unconditionally trigger an obsolete syntax error with explanation?
[23:26:37] *** Quits: w3lcome (Mibbit@moz-33A75FFD.home.otenet.gr) (Ping timeout)
[23:28:50] *** flaper87 is now known as flaper87|afk
[23:32:00] *** Joins: veddan (viktor@moz-C79BC80B.csbnet.se)
[23:33:50] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[23:47:18] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[23:49:50] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Quit: Sharp)
[23:50:10] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[23:51:22] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[23:51:22] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14f1c64a0 to 145aad292: 02http://git.io/N3iJvQ
[23:51:22] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[23:51:23] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[23:51:23] <ghrust> 01[13rust01] 15bors pushed 14 new commits to 06auto: 02http://git.io/GwlDVg
[23:51:23] <ghrust> 13rust/06auto 14786dea2 15Patrick Walton: libextra: Another round of de-`Cell`-ing....
[23:51:23] <ghrust> 13rust/06auto 147cac9fe 15Patrick Walton: librustuv: RAII-ify `Local::borrow`, and remove some 12 Cells.
[23:51:24] <ghrust> 13rust/06auto 14ab3bec9 15Patrick Walton: libstd: Remove some cells involved in...
[23:51:26] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[23:52:05] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Quit: Sharp)
[23:52:32] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
[23:52:35] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Quit: Sharp)
[23:53:25] *** Joins: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net)
