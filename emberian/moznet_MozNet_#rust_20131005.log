[00:00:32] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[00:00:57] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[00:02:01] *** Joins: jordyd (jordyd@moz-AA85309.seg46.ucf.edu)
[00:02:41] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[00:05:41] *** Joins: Yeri (jasonjasmi@41C91A8A.CE609BA5.E39FBF79.IP)
[00:07:22] *** Joins: Jesin (Jessin_@CB0F8A26.1AFF763C.DAC4D86A.IP)
[00:08:58] *** Parts: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net) ()
[00:10:23] *** Quits: alon (alon@AED31E1.123B3D51.F9582E85.IP) (Ping timeout)
[00:14:23] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[00:14:25] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[00:17:01] *** Joins: valenting (Thunderbir@moz-2007C0F5.client.stsn.net)
[00:18:27] *** Quits: canhtak (jeremy@moz-7FADA491.wl.t.ulaval.ca) (Quit: canhtak)
[00:18:27] *** Quits: eholk (eric@moz-F70D5031.hsd1.in.comcast.net) (Quit: Konversation terminated!)
[00:24:47] *** Joins: alon (alon@74940F6A.FD9AA48F.F9582E85.IP)
[00:25:40] *** Joins: exobit (foo@moz-90D1B547.nycmny.fios.verizon.net)
[00:28:29] *** Quits: alon (alon@74940F6A.FD9AA48F.F9582E85.IP) (Ping timeout)
[00:30:57] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[00:31:28] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[00:33:15] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[00:35:51] *** Joins: Axord (xord@moz-1B228827.lsanca.dsl-w.verizon.net)
[00:36:45] *** Joins: tetsuharu (tetsuharu@79611EE9.A51CB73B.6FBF6D51.IP)
[00:37:41] *** Quits: tetsuharu (tetsuharu@79611EE9.A51CB73B.6FBF6D51.IP) (Client exited)
[00:37:43] *** Quits: Axord (xord@moz-1B228827.lsanca.dsl-w.verizon.net) (Ping timeout)
[00:38:08] <jmgrosen> there's nothing like Option.expect that returns a reference, is there?
[00:40:06] <cmr> jmgrosen: get_ref
[00:40:28] <jmgrosen> cmr: but that doesn't have an failure reason :/
[00:40:30] <cmr> although that doesn't take a message
[00:40:32] <cmr> yeeah
[00:40:33] <cmr> *yeah
[00:41:40] *** kimundi is now known as zz_kimundi
[00:42:34] *** Quits: Jesin (Jessin_@CB0F8A26.1AFF763C.DAC4D86A.IP) (Quit: Leaving)
[00:43:22] *** Quits: derboi_c (derboi_c@510621FB.DF3CA0D0.BA2F4534.IP) (Ping timeout)
[00:44:00] *** Joins: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net)
[00:48:02] <jmgrosen> ugh
[00:48:17] <jmgrosen> so I'm changing a struct from having a T to having an Option<T>
[00:49:00] <jmgrosen> but now there are a lot of places where it's complaining that it has to borrow itself as mutable twice -- I get that
[00:49:05] <jmgrosen> but what's the usual solution?
[00:49:18] <jmgrosen> do I really just have to move the value out, then put it back in after I'm done with it?
[00:49:58] *** Joins: Jesin (Jessin_@moz-6EF909D6.cc.lehigh.edu)
[00:52:27] *** Joins: Axord (xord@moz-1B228827.lsanca.dsl-w.verizon.net)
[00:53:43] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[00:53:51] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Input/output error)
[00:55:00] *** Joins: msingle (Thunderbir@B6E0B708.5117C5FE.465000F8.IP)
[00:55:20] <dandy> At first glance, what is wrong with this: #[inline(never)]
[00:55:21] <dandy> crap
[00:55:26] <dandy> pub fn normalize(&mut self) {self.div_assign(&self.mag());}
[00:55:32] *** Joins: jennylove (jenny1986@moz-9675A4DB.dsl.bell.ca)
[00:55:36] <jennylove> http://Fun4Days.com/sms/sms.php?share=178616
[00:55:37] *** Parts: jennylove (jenny1986@moz-9675A4DB.dsl.bell.ca) ()
[00:55:55] <dandy> link looks legit... (not)
[00:56:48] <dandy> error: cannot borrow `*self` as immutable because it is also borrowed as mutable
[00:56:57] <dandy> I don't understand the problem with that
[00:57:44] *** Joins: zheitny (nick@moz-B41B4B6D.neo.res.rr.com)
[00:58:17] *** Quits: zheitny (nick@moz-B41B4B6D.neo.res.rr.com) (Quit: Leaving)
[00:58:22] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[00:59:15] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[00:59:27] <dandy> I needed to make it this: pub fn normalize(&mut self) {let m = self.mag();self.div_assign(&m);}
[00:59:36] <dandy> can anybody explain to me why?
[00:59:44] <jmgrosen> dandy: funnily enough, that's the same problem I'm having :P it comes from the fact that since it's borrowed as mutable, it can be modified while it's trying to be read from immutably
[00:59:49] <dandy> note: fn div_assign(&mut self, rhs: &T) 
[01:00:12] <dandy> jmgrosen, I guess I can see that
[01:00:18] *** Quits: mark_edward (quassel@moz-DCB0B750.lightspeed.cicril.sbcglobal.net) (Client exited)
[01:01:59] <dandy> but the call to  self.mag() has to go into some temporary either way right?
[01:02:17] <dandy> and div_assign can't (I hope) be called before that happens
[01:02:26] <dandy> because what would it divide by?
[01:02:52] <dandy> am I wrong?
[01:06:51] *** Quits: nkoep (nik@moz-D359F3B0.vpn.rwth-aachen.de) (Client exited)
[01:14:29] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[01:15:27] <jordyd> I want to write a recursive method on "&mut self" but I keep getting "cannot borrow `*self` as mutable more than once at a time". Is it possible to do this?
[01:18:55] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[01:22:16] *** Joins: derboi_c (derboi_c@510621FB.DF3CA0D0.BA2F4534.IP)
[01:26:06] *** Quits: exobit (foo@moz-90D1B547.nycmny.fios.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[01:26:13] <SiegeLord> <-> and <- are no longer valid tokens in Rust, right?
[01:27:30] <cmr> They seem to be
[01:27:38] <cmr> Judging that stringify!() accepts them
[01:28:17] <SiegeLord> Well, I mean I see that they are lexed... but are they used for anything?
[01:28:32] <cmr> nope
[01:30:56] *** Joins: mib_qjzj13 (Mibbit@F0111870.721ED864.3BD9FE04.IP)
[01:32:48] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[01:32:58] *** Quits: simon (simon@moz-CBE4BB13.cable.teksavvy.com) (Ping timeout)
[01:38:38] *** Joins: victorporof (victorporo@35F65A40.E0F96B01.D111398B.IP)
[01:39:01] *** Joins: kingminoss (irodotitis@FF16198A.7B92367.9849A768.IP)
[01:39:01] *** Quits: kingminoss (irodotitis@FF16198A.7B92367.9849A768.IP) (Connection reset by peer)
[01:39:21] *** Joins: kingminoss (irodotitis@FF16198A.7B92367.9849A768.IP)
[01:39:49] <kingminoss> hi from greece
[01:40:46] *** Quits: victorporof (victorporo@35F65A40.E0F96B01.D111398B.IP) (Ping timeout)
[01:40:46] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[01:41:10] *** Quits: dew (Instantbir@moz-EEE6B2F8.dhcp.stls.mo.charter.com) (Ping timeout)
[01:42:00] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[01:43:26] *** Quits: kingminoss (irodotitis@FF16198A.7B92367.9849A768.IP) (Quit: )
[01:43:47] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[01:44:47] *** Joins: mib_w41ddx (Mibbit@58C5B437.279790E2.FD81FCD2.IP)
[01:44:56] <joelteon> bye
[01:46:27] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Client exited)
[01:52:21] *** Joins: aatch (aatch@moz-2BB0AC01.cable.telstraclear.net)
[01:53:26] *** Quits: mib_w41ddx (Mibbit@58C5B437.279790E2.FD81FCD2.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[01:57:40] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[01:59:23] *** Quits: jordyd (jordyd@moz-AA85309.seg46.ucf.edu) (Quit: Leaving)
[01:59:26] <cmr> sfackler: ping
[02:02:23] *** Quits: sk (sk@61A494B3.BA40E8A.AAC02D62.IP) (Ping timeout)
[02:05:34] *** Quits: sp3d (a@moz-41A29595.dhcp.stls.mo.charter.com) (Ping timeout)
[02:05:57] *** Joins: nrc (nrc@3496663E.C1499D0.396E4C6D.IP)
[02:06:50] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Ping timeout)
[02:07:15] *** Joins: sp3d (a@moz-41A29595.dhcp.stls.mo.charter.com)
[02:08:25] <sfackler> pong
[02:08:33] <sfackler> cmr: ^
[02:09:32] <cmr> sfackler: can I query about rust-postgres?
[02:10:14] *** Quits: riley (riley@8BA43816.9AA11D69.65DDFA89.IP) (Client exited)
[02:11:29] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[02:13:44] <sfackler> sure
[02:14:28] *** Quits: fran (fran@moz-E8276328.telecom.net.ar) (Ping timeout)
[02:15:23] *** Joins: fran (fran@moz-62F5413A.telecom.net.ar)
[02:17:09] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Quit: Leaving)
[02:21:01] <mib_qjzj13> when can rust have preemptive scheduling？
[02:22:30] <raisin> Q: is there a version of format!() to yields at static string at compile time?
[02:22:32] <jason_> when you use std::task::spawn_shed or std::rt::thread they should
[02:23:02] <jason_> mib_qjzj13: ^ those give you preemptive scheduling
[02:23:33] <mib_qjzj13> like erlang
[02:24:43] <raisin> another way to ask that is, is there a compile-time string concatenation function? 
[02:25:02] <cmr> raisin: no
[02:25:31] <raisin> cmr: would it be difficult to make one?
[02:26:20] <cmr> raisin: no idea! :)
[02:26:30] <raisin> :-)
[02:27:50] <jason_> hmm, TcpListener doesn't seem to be clonable. is there a way to have multiple tasks listening on the same socket?
[02:28:51] <sfackler> not directly. why not have one socket listen and spawn a new task for each connection?
[02:29:02] <sfackler> *one task listen
[02:30:45] <jason_> because that doesn't scale as well as multiple tasks accepting connections
[02:31:05] *** jorendorff_away is now known as jorendorff
[02:31:45] <cmr> jason_: it's not clonable because of how libuv interacts with the scheduler, I'd imagine.
[02:31:57] <cmr> jason_: but maybe it's just an arbitrary limitation on Rust's part, open an issue?
[02:32:08] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[02:33:23] *** Quits: mib_qjzj13 (Mibbit@F0111870.721ED864.3BD9FE04.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[02:33:32] <kmc> jason_: did you test how well it scales?
[02:33:50] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[02:34:14] <jason_> cmr: do you happen to know if rust uses multiple uv event loops, one for each thread, or a single thread handling all uv requests?
[02:35:57] <sfackler> I'm not at all convinced that the limiting factor on a server is the rate at which you can accept a connection
[02:35:58] <cmr> jason_: multiple event loops
[02:36:27] <jason_> kmc: i tried running apache bench against rust-http's server and it was only doing ~4k req/sec and saturating just a single core.
[02:37:09] <SiegeLord> What does the '\UXXXXXXXX' syntax mean?
[02:37:22] <cmr> SiegeLord: unicode codepoint
[02:37:33] <jmgrosen> jason_: it's not rust's fault, anyway -- it can handle hundred of thousands of tasks
[02:37:47] <SiegeLord> cmr: What is the difference between that and '\uXXXX'?
[02:37:48] <jmgrosen> not sure why rust-http is only using a single core, though
[02:38:00] *** Quits: zz_kimundi (kimundi@moz-C29F3EBA.dip0.t-ipconnect.de) (Ping timeout)
[02:38:10] <SiegeLord> I guess I don't get why there are 2...
[02:38:20] <jason_> jmgrosen: it uses a single task to accept connections, that was the only task saturating a core
[02:38:20] <cmr> SiegeLord: no idea
[02:38:35] <sp3d> there are codepoints for which four Xes isn't enough
[02:39:11] *** Joins: victorporof (victorporo@35F65A40.E0F96B01.D111398B.IP)
[02:39:18] <jmgrosen> jason_: oh, that makes sense; yeah, not sure how that's fixable under the current rules :/
[02:39:54] <jmgrosen> oh, is there an accepted line width limit for rust?
[02:40:04] <jmgrosen> keeping under 80 has proven hard
[02:40:31] <cmr> jmgrosen: 100 is what rustc uses
[02:40:37] <jmgrosen> ok
[02:41:15] *** Quits: victorporof (victorporo@35F65A40.E0F96B01.D111398B.IP) (Ping timeout)
[02:41:32] *** Joins: zz_kimundi (kimundi@moz-4F2ED33.dip0.t-ipconnect.de)
[02:41:58] *** zz_kimundi is now known as kimundi
[02:43:22] *** Joins: dew (Instantbir@moz-EEE6B2F8.dhcp.stls.mo.charter.com)
[02:44:57] *** Quits: msingle (Thunderbir@B6E0B708.5117C5FE.465000F8.IP) (Ping timeout)
[02:45:08] <jason_> it looks like libuv isn't the limiting factor https://github.com/joyent/libuv/blob/master/test/benchmark-multi-accept.c
[02:45:41] <jason_> so maybe something i can look into fixing
[02:46:00] <cmr> jason_: please do!
[02:48:10] <jmgrosen> hm, should my struct be called Websocket or WebSocket?
[02:48:55] <cmr> Websocket I think..
[02:49:00] <jason_> There are only two hard things in Computer Science: cache invalidation and naming things. -- Phil Karlton.
[02:49:34] <kmc> jason_: ah
[02:49:48] <kmc> "only two hard things in Computer Science: cache invalidation, naming things, and off by one errors"
[02:49:52] <cmr> And off by one errors. -- something I saw on c2
[02:50:12] <jason_> hehe
[02:50:36] <jmgrosen> well, the official name is WebSocket: http://tools.ietf.org/html/rfc6455
[02:50:54] *** Joins: H4199 (chatzilla@25653362.1DD2AC9D.49CEED6B.IP)
[02:51:27] <H4199> quick question: fn horner<T:Num>(cs:&[T],x:T)->T { cs.rev_iter().fold(0, |acc, &c| acc*x + c) } works with a particular type (like int) but fails when I substitute T. What have I done wrong here? I'll provide the error messages too if they are needed.
[02:52:50] <jmgrosen> do acc * x.clone()
[02:53:00] <jmgrosen> (and put Clone as a trait needed)
[02:53:01] <H4199> ah
[02:54:31] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Quit: ChatZilla 0.9.90.1 [Firefox 24.0/20130910160258])
[02:58:20] *** jorendorff is now known as jorendorff_away
[03:02:37] <jmgrosen> what's the best way to convert a uint to a MSB &[u8]?
[03:03:04] *** jorendorff_away is now known as jorendorff
[03:03:48] <sfackler> jmgrosen: you can use std::rt::io::mem::MemWriter and the std::rt::io::extensions::WriterByteConversions trait methods
[03:03:55] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[03:03:59] *** Quits: Amaranth (travis@moz-F81BB56A.cpe.cableone.net) (Ping timeout)
[03:04:17] *** Quits: raisin (Mibbit@moz-20CEEF38.hsd1.ca.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[03:04:29] <cmr> Also the ToBytes trait
[03:05:46] *** Joins: simon (simon@moz-CBE4BB13.cable.teksavvy.com)
[03:06:21] *** Joins: Amaranth (travis@moz-F81BB56A.cpe.cableone.net)
[03:07:28] <jmgrosen> cmr: thanks!
[03:09:01] *** Joins: z0w0 (zack@64F0E14B.3C29B4A9.2CE63F58.IP)
[03:10:43] *** Quits: nejucomo (Adium@moz-B62B9944.public.monkeybrains.net) (Quit: Leaving.)
[03:14:43] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[03:16:28] *** Quits: nrc (nrc@3496663E.C1499D0.396E4C6D.IP) (Ping timeout)
[03:20:07] <jmgrosen> is TcpStream ever going to be able to split into a TcpReader and a TcpWriter?
[03:20:29] <cmr> jmgrosen: Why would it?
[03:20:44] <jmgrosen> cmr: not sure, that's why I'm asking :P
[03:20:53] <jmgrosen> it would be quite handy, though
[03:20:58] <cmr> I mean, you can already create Reader/Writer trait objects out of them
[03:21:14] *** Joins: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk)
[03:22:27] *** Quits: simon (simon@moz-CBE4BB13.cable.teksavvy.com) (Ping timeout)
[03:23:16] *** Quits: tautologico (lymph@7A53DAF8.92451A23.6EB699AE.IP) (Quit: tautologico)
[03:23:47] *** Quits: JanC (janc@moz-14685694.dsl.scarlet.be) (Ping timeout)
[03:23:56] <silotis> the thing is for implementing asynchronous network protocols you really want to have the reader and writer in separate tasks so you can write while the read task is waiting for read data
[03:24:37] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[03:24:46] <cmr> makes sense.
[03:25:59] <benh> extern extern r"C" { fn f(); } 
[03:26:05] <benh> I'm almost getting there, y'all :(
[03:32:40] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[03:33:25] *** Quits: jstevans (Instantbir@moz-CC62D67B.bootp.virginia.edu) (Ping timeout)
[03:34:01] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[03:34:01] *** ChanServ sets mode: +ao dherman dherman
[03:34:59] *** Quits: yusukesuzuki (yusukesuzu@moz-FEE44B6.net220148245.t-com.ne.jp) (Ping timeout)
[03:35:15] *** Joins: yusukesuzuki (yusukesuzu@moz-FEE44B6.net220148245.t-com.ne.jp)
[03:35:37] <cmr> Eugh, rust-http runs requests in a separate task, no wonder TLS isn't wokring.
[03:37:08] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[03:38:17] *** Joins: JanC (janc@moz-B832ED3A.dsl.scarlet.be)
[03:39:42] *** Joins: victorporof (victorporo@35F65A40.E0F96B01.D111398B.IP)
[03:40:36] <H4199> jmgrosen: adding clone didn't fix the error I'm afraid.
[03:40:38] <H4199> I tried reexamining the documentation, but I am afraid the source of the error is not jumping out at me.
[03:40:39] <H4199> fn horner<T:Clone + Num>(cs:&[T],x:T) -> T { cs.rev_iter().fold(0, |acc, &c| acc * (x.clone()) + c)
[03:40:40] <H4199> There is a mismatch between its expectations at "cs" and "x" and "c".
[03:40:42] <H4199> For cs it is expecting an integral value but got a type parameter.
[03:40:43] <H4199> For "x" and "c" it is expecting a type parameter but got an integral variable.
[03:41:36] <cmr> H4199: Oh, you need to be using std::num::zero(), not a literal 0
[03:41:55] *** Quits: victorporof (victorporo@35F65A40.E0F96B01.D111398B.IP) (Ping timeout)
[03:42:33] <dandy> horner<T:Clone + Num + Zero>
[03:42:45] <dandy> .fold(Zero::zero(),    maybe
[03:42:57] <cmr> Num already implies Zero
[03:43:03] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[03:43:21] <dandy> is Num going to be changed or is that Primitive?
[03:43:29] <cmr> Primitive I think
[03:43:48] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[03:43:51] <dandy> you should really do Zero Mul and Add though instead of Num
[03:43:57] <H4199> I  tried invoking zero() earlier, but I couldn't get it to resolve within the fold
[03:44:51] <dandy> just for the fun of it try this: let z : T = Zero::zero(); cs.rev_iter().fold(z, |acc, &c| acc * (x.clone()) + c)
[03:45:06] <dandy> I have had some weird issues today similar to that
[03:45:59] <dandy> the reason why I would go with Add<T,T>+Mul<T,T>+Zero instead of Num is in case something has all those that is not a number, like a vector
[03:46:29] <dandy> may not make sense, but there is always something you didnt think of out there
[03:46:41] <nejucomo> jmgrosen: I don't think it's "the best way" but I've written a "bit fifo" abstraction which could that as: fifo.push(myuint); let bs: ~[u8] = fifo.pop();
[03:46:56] <nejucomo> https://github.com/nejucomo/rust-bitfifo
[03:47:12] <nejucomo> It's can't pop &T though.
[03:47:43] <jmgrosen> why not?
[03:47:54] <nejucomo> Also, it might not need to exist, because I don't know the std / extra well.
[03:48:01] <H4199> dandy: It just doesn't like Zero
[03:48:19] *** Joins: StarLight (StarLight@moz-BC57337C.dynamic.avangarddsl.ru)
[03:48:20] <nejucomo> jmgrosen: Because it moves the popped value to the caller.
[03:48:30] <nejucomo> It might be possible, but I'm new to rust.
[03:48:45] <jmgrosen> you should be able to return a &'self T
[03:48:46] <dandy> H4199, can you show more code or an isolated example?
[03:48:58] <nejucomo> jmgrosen: This is the pop signature: https://github.com/nejucomo/rust-bitfifo/blob/master/bitfifo.rs#L41
[03:49:14] <dandy> oh, i found the } up higher in the logs
[03:49:20] <H4199> sure, where do you guys like to paste?
[03:49:32] <dandy> I think I have enough to try it
[03:49:32] <cmr> gist has rust highlighting
[03:49:48] <cmr> nejucomo: tggpl is interesting.
[03:49:50] <nejucomo> I wrote it for a use case where I needed to feed bytes into a file then pop weird numbers of bits, like 3, or 97.
[03:50:24] <nejucomo> hehe…  Yeah.  I figured if I'm trying a new language, why not try a new license along with it.
[03:50:36] *** Quits: Yeri (jasonjasmi@41C91A8A.CE609BA5.E39FBF79.IP) (Quit: Yeri)
[03:50:50] <nejucomo> As I understand it it's sort of like MIT with a time limit then becomes like GPL.
[03:51:19] <jmgrosen> nejucomo: I think the ToBytes trait is what's best for me in my case :P
[03:51:33] <H4199> dandy: Well, there isn't much to the rest, so: fn main() {let a = h([-19,7,-4,6],3);println!("{:?}", a)}
[03:51:48] *** Quits: Earnestly (earnest@moz-BE290A2B.dyn.plus.net) (Ping timeout)
[03:51:57] <nejucomo> jmgrosen: Yeah.  bitfifo might be more convenient for some use cases, but maybe not.
[03:52:06] <nejucomo> bitv almost did what I needed, but not quite.
[03:52:45] <H4199> and then: fn h<T:Clone + Num>(cs:&[T],x:T) -> T { what you pasted in channel }
[03:53:41] <benh> "extern "C" {error: internal compiler error: unexpected failure" i swear I know what I'm doing
[03:55:05] <dandy> is 128 the answer?
[03:55:21] <H4199> yes
[03:55:41] <dandy> yeah, its mad about Zero...
[03:56:21] <dandy> fn horner<T:Num>(cs:&[T],x:T)->T {let z: T = Zero::zero();cs.rev_iter().fold(z, |acc, c| (acc*x) + (*c))}
[03:56:47] <dandy> I had to pull zero out
[03:56:55] <dandy> and pointer nonsense for 'c'
[03:57:16] <dandy> I think c is already borrowed
[03:58:14] <dandy> You can also get a bit better with the trait constraints: fn horner<T:Mul<T,T>+Add<T,T>+Zero>(cs:&[T],x:T)->T {let z: T = Zero::zero();cs.rev_iter().fold(z, |acc, c| (acc*x) + (*c))}
[04:00:53] <dandy> where is rusti?
[04:01:18] <cmr> On strcat's laptop, wherever that is atm :p
[04:01:23] <cmr> he has a fairly flaky connection
[04:01:29] <dandy> rusti: println("Here I am!");
[04:01:41] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[04:01:55] <dandy> is there a way to say "Zero::zero()" with an explicit type?
[04:02:05] <H4199> hmm, I agree about the traits, and I too find it strange that Num comes equipped with One and Zero, but I am still getting Zero as a nonexistent trait, do I need to declare something else?
[04:02:37] <cmr> dandy: not right now.
[04:02:39] <dandy> no, that should do it
[04:02:48] <cmr> H4199: it's std::num::Zero
[04:02:58] <dandy> Mul<T,T> allows you to multiply between T and T
[04:03:08] <dandy> oh sorry... use std::num::{Zero};
[04:03:25] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[04:03:29] <cmr> You don't need the braces if you're only importing one thing
[04:03:49] <dandy> but it sure is handy when you need to add one in later use std::num::{Zero,One};
[04:04:10] <cmr> yup
[04:04:23] <H4199> Victory! Thanks much dandy and cmr!
[04:07:02] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[04:07:26] *** Quits: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net) (Ping timeout)
[04:09:44] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Connection reset by peer)
[04:09:50] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[04:10:41] *** Quits: jj2baile (jon@moz-345B5EBA.csclub.uwaterloo.ca) (Ping timeout)
[04:10:43] *** Joins: jj2baile (jon@moz-345B5EBA.csclub.uwaterloo.ca)
[04:10:47] *** Quits: mcpherrin (mimcpher@moz-345B5EBA.csclub.uwaterloo.ca) (Ping timeout)
[04:11:19] *** Joins: mcpherrin (mimcpher@moz-345B5EBA.csclub.uwaterloo.ca)
[04:11:57] <nejucomo> cmr, dandy: "is there a way to say "Zero::zero()" with an explicit type?"  Doesn't this work: let z: TheTypeYouWant = Zero::zero();
[04:12:08] <dandy> yes but...
[04:12:13] <dandy> what if I don't want 'z'
[04:12:34] * nejucomo looks up Zero::zero...
[04:12:48] <cmr> dandy: it will be Zero::<for T>::zero() once pcwalton fixes it.
[04:12:55] <cmr> but at the moment you need the type inference.
[04:13:00] <dandy> yeah... that would be good
[04:14:03] <nejucomo> Oh, interesting.  I wrote a similar kind of method which was: fn get_some_value_for_type(Option(Self)) -> uint;
[04:14:12] <nejucomo> -which I copied from some other std example.
[04:14:20] <nejucomo> It's a workaround hack, and Zero doesn't have it.
[04:14:47] <nejucomo> dandy: You don't want any other runtime overhead?
[04:15:09] <dandy> hu?
[04:15:25] <nejucomo> Can you inline a function of the form: fn zero_of_my_type() -> mytype { Zero::zero() }
[04:15:29] <cmr> yes
[04:15:35] <dandy> there is a zero()
[04:15:40] <dandy> but still, what type?
[04:15:50] <sp3d> are we supposed to get "type ascriptions" for arbitrary expressions by 1.0?
[04:15:53] <dandy> the compiler (or something fancy pants contraption) can't seem to figure it out
[04:15:57] <cmr> nejucomo: std::num::zero::<mytype>()
[04:15:59] <nejucomo> You asked if there was a way to get Zero::zero() of a specific type.  There are several "work-around" ways.
[04:16:12] <dandy> cmr, I can do that?
[04:16:25] <nejucomo> cmr: Yeah, that.  ;-)  Thanks.
[04:16:34] <cmr> dandy: do what?
[04:16:45] <dandy> std::num::zero::<mytype>() works right now?
[04:16:48] <cmr> yes
[04:16:52] <nejucomo> sp3d: Do you mean declaring a type for any expression?  
[04:16:56] <sp3d> yeah
[04:16:57] <cmr> it's a explicit type parameter
[04:17:13] <cmr> it's only when saying which trait a type is implemented for that you can't express, we need <for T> for that
[04:17:13] <sp3d> e.g. (4 : uint) or such
[04:17:32] <cmr> sp3d: pcwalton wants it iirc
[04:17:38] <sp3d> I do too! :P
[04:17:44] <nejucomo> Me too.
[04:17:51] <dandy> oh man!
[04:18:09] <dandy> H4199, fn horner<T:Mul<T,T>+Add<T,T>+Zero>(cs:&[T],x:T)->T {cs.rev_iter().fold(zero::<T>(), |acc, c| (acc*x) + (*c))}
[04:18:15] <dandy> oh and use std::num::{Zero,zero};
[04:18:41] * nejucomo is puzzled at why Mul and Add have two params and looks them up.
[04:18:50] <dandy> result and rhs
[04:18:55] <dandy> or... rhs and result :)
[04:19:15] <nejucomo> Hrm.
[04:19:19] <dandy> because I can multiply a matrix by a vector and get a vector... or maybe a matrix, are you left handed or right handed?
[04:20:31] <dandy> I can add an impl Mul<Grape,Grapple> for Apple { ... }
[04:20:57] <cmr> heh
[04:21:11] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: brb)
[04:21:21] <dandy> or you could be boring and just add two ints and get an int as a result
[04:22:30] <H4199> dandy: Ah, lovely, will that trick work for similar declarations?
[04:22:43] <dandy> I think so
[04:23:07] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[04:23:13] <dandy> I tried that earlier as zero<T>() because I had no idea the :: was needed
[04:23:32] <dandy> I keep throwing my C# at rust and it doesen't like it
[04:24:25] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[04:25:08] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[04:26:22] <SiegeLord> Oh darn... adding raw string support for this scintilla lexer is going to be a doozy...
[04:28:18] *** Quits: fmtq (fmt@moz-5769BD38.static.tpgi.com.au) (Ping timeout)
[04:28:23] *** Joins: fmt (fmt@moz-5769BD38.static.tpgi.com.au)
[04:29:55] *** Quits: fyolnish (fyolnish@moz-531015CA.uqwimax.jp) (Client exited)
[04:30:37] *** Quits: fmt (fmt@moz-5769BD38.static.tpgi.com.au) (Ping timeout)
[04:30:50] *** Joins: fmt (fmt@moz-5769BD38.static.tpgi.com.au)
[04:34:02] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Connection reset by peer)
[04:35:56] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[04:37:27] *** Quits: Ferreus (ferreus@moz-5B6BD6A2.pools.arcor-ip.net) (Quit: WeeChat 0.4.1)
[04:37:38] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[04:39:54] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[04:40:11] *** Joins: victorporof (victorporo@35F65A40.E0F96B01.D111398B.IP)
[04:40:23] <benh> http://ix.io/8ls
[04:40:38] <benh> Any other places where string literals can be used that I'm missing?
[04:40:45] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[04:42:03] *** Joins: roboshark (Mibbit@moz-812F74B9.lightspeed.rlghnc.sbcglobal.net)
[04:42:20] *** Quits: victorporof (victorporo@35F65A40.E0F96B01.D111398B.IP) (Ping timeout)
[04:42:45] *** Quits: roboshark (Mibbit@moz-812F74B9.lightspeed.rlghnc.sbcglobal.net) (Quit: http://www.mibbit.com ajax IRC Client)
[04:43:27] <cmr> benh: let f = r###"foo"###;
[04:43:41] <nejucomo> Doesn't the println case cover all expressions?
[04:43:53] <nejucomo> (Also, what are the hashmarks?)
[04:43:55] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[04:43:57] *** Joins: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP)
[04:43:59] <cmr> probably
[04:44:05] <cmr> nejucomo: that's our new raw string syntax!
[04:44:37] <benh> It's almost usable :))
[04:44:53] <nejucomo> I can't tell if you're serious.
[04:45:00] <nejucomo> (I hope that doesn't sound insulting...)
[04:45:14] <benh> We're serious!
[04:45:29] <nejucomo> I mean, is it r, followed by any number of hash marks, followed by a double quote, then terminated by a double quote at the same number of hashmarks?
[04:45:34] <benh> yep
[04:45:39] <nejucomo> Can the number be 0?
[04:45:42] <benh> yes
[04:45:56] <nejucomo> Is the variable number in order to avoid any escape sequences inside the string?
[04:45:58] <benh> yes
[04:46:05] <nejucomo> Ok then.  It all makes sense.
[04:46:21] <benh> Outside of silly test cases there's probably no reason to ever use more than one or two hashes
[04:46:24] <dandy> is there a super easy epsilon equals assert?
[04:46:45] <nejucomo> benh: Just wait until I have snippets of rust code with raw strings as the contents of raw strings!
[04:46:46] <Eridius> assert_eq_equiv or somesuch. gimme a sec
[04:46:56] <nejucomo> (Inside html templates, of course...)
[04:46:56] <dandy> I can never find those in the rust src
[04:47:00] <Eridius> assert_approx_eq(given, expected, epsilon)
[04:47:06] <Eridius> make that assert_approx_eq!
[04:47:07] <dandy> thanks
[04:47:09] <nejucomo> dandy: It's because they are in libsyntax.
[04:47:16] <nejucomo> And for some reason, they're inside a string literal.
[04:47:26] <nejucomo> I'm not sure why they're there instead of std.
[04:47:26] <dandy> Eridius but will it work with tuples?
[04:47:37] <Eridius> dandy: it uses std::cmp::ApproxEq
[04:47:40] <Eridius> calling .approx_eq_eps()
[04:47:46] <Eridius> (or just .approx_eq() if you don't supply an epsilon)
[04:48:38] <dandy> type `(f64,f64)` does not implement any method in scope named `approx_eq_eps`
[04:49:17] <Eridius> I'd be rather surprised if it did
[04:49:21] <jeaye> (f64, f64) wouldn't but f64 will
[04:49:35] <Eridius> ApproxEq is only implemented for f32 and f64
[04:49:42] <nejucomo> dandy: Here's a link to a bunch of those standard macro definitions: https://github.com/mozilla/rust/blob/master/src/libsyntax/ext/expand.rs#L806
[04:49:45] <Eridius> dandy: you could always make a newtype and implement ApproxEq yourself if you want to
[04:50:10] <dandy> Yeah... maybe
[04:53:38] <dandy> impl ApproxEq<(f64,f64)> for (f64,f64) { ?
[04:54:20] *** Quits: Jesin (Jessin_@moz-6EF909D6.cc.lehigh.edu) (Ping timeout)
[04:54:44] <cmr> No, struct Foo(f64, f64); impl ApproxEq..... for Foo
[04:55:02] <dandy> so I have to name it?
[04:56:18] <aatch> nejucomo, they aren't in std because there is currently no way to export macros
[04:56:55] *** Joins: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net)
[04:57:06] <cmr> dandy: yes, since no crate owns tuples, and ApproxEq isn't from your own trait.
[04:57:09] <cmr> Needs to be anewtype
[04:57:21] <benh> Do things hidden by #[cfg] get parsed or just tokenized?
[04:57:50] <aatch> benh, parsed
[04:57:54] <benh> hm, parsed but not macro-expanded i guess
[04:58:08] <cmr> correct, macro expansion happens after cfg stripping.
[04:58:11] *** Joins: ross (ross@moz-5EA04060.br.br.cox.net)
[04:58:23] <cmr> (and then another round of cfg stripping for anything the macros might have expanded into)
[04:58:47] <benh> Hoped I could hide an asm! macro behind a nonsense cfg in a test so I can test how asm! pretty-prints without having to come up with reasonable assembly
[04:59:33] <aatch> benh, you don't need to come up with reasonable assembly
[05:00:16] <aatch> unless you actually plan to generate code with it in.
[05:00:42] <benh> ah, swell
[05:01:05] <aatch> rust doesn't do much with the asm! macro
[05:01:10] <jeaye> Is there a nice way to access arg[cv]?
[05:01:21] <aatch> jeaye, os::args()
[05:01:27] <jeaye> Thanks
[05:01:40] <aatch> jeaye, I think so anyway (it may have moved)
[05:01:43] <jeaye> Me was using main(argc: int, argv: **u8) -> int
[05:01:55] <cmr> yes, std::os::args
[05:01:56] *** Joins: fyolnish (fyolnish@moz-CDE50117.uqwimax.jp)
[05:01:57] <benh> os::args still requires utf-8, right?
[05:01:58] <jeaye> /me
[05:02:02] <cmr> benh: yes
[05:03:29] <Eridius> we need to fix that
[05:03:45] *** Quits: fyolnish (fyolnish@moz-CDE50117.uqwimax.jp) (Ping timeout)
[05:04:08] *** Quits: GeneralMaximus (ankur@97120CE1.5268F106.D2D1FAF0.IP) (Ping timeout)
[05:04:31] <cmr> yes
[05:04:47] <dandy> why does rust have return? any chance of its removal?
[05:04:55] <benh> early exit is nice
[05:05:22] <dandy> oh wow I didn't think of that at all
[05:05:56] <cmr> heh
[05:06:10] <cmr> that's the only reason it exists :p
[05:07:09] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[05:07:37] *** Joins: GeneralMaximus (ankur@D9E1A2F3.F036F587.BE90E62C.IP)
[05:12:13] *** Joins: Jesin (Jessin_@D04ED9AA.1AFF763C.DAC4D86A.IP)
[05:12:40] <jmgrosen> do Port and Chan fulfill Send?
[05:13:00] <dandy> so how do I destructure a tuple struct?
[05:13:20] <jmgrosen> dandy: match *self { … }
[05:13:27] <jmgrosen> wait
[05:13:29] <jmgrosen> no, sorry
[05:13:45] <jmgrosen> let (thing1, thing2, thing3) = *self;
[05:13:51] <engla> just let Foo(a, b) = ..; to destructure Foo
[05:14:01] <engla> *a value of type Foo
[05:14:15] <dandy> jmgrosen, I think I forgot the *
[05:14:24] <jmgrosen> ah
[05:14:49] *** Quits: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca) (Quit: Leaving)
[05:15:00] <engla> you can only dereference a tuple struct with a single field
[05:15:21] <dandy> no.. it still didn't like that
[05:15:52] <dandy> I got it! thanks
[05:21:19] <jmgrosen> okay, how should I facilitate select-ing on a Port and a TcpStream? I'm very confused as to how I should go about it
[05:21:40] <jmgrosen> I'm basically trying to recreate http://gary.beagledreams.com/page/go-websocket-chat.html
[05:25:20] *** Quits: Jesin (Jessin_@D04ED9AA.1AFF763C.DAC4D86A.IP) (Ping timeout)
[05:26:56] <dandy> anybody else have trouble getting sublime to insert spaces instead of tabs?
[05:27:52] <H4199> dandy: view > indentation > convert to X ?
[05:28:25] <dandy> yeah...
[05:28:37] <dandy> I was editing the config files
[05:28:41] <dandy> and nothing stuck
[05:32:22] *** Joins: fyolnish (fyolnish@moz-7A4B3F96.uqwimax.jp)
[05:34:12] *** Quits: fyolnish (fyolnish@moz-7A4B3F96.uqwimax.jp) (Ping timeout)
[05:34:15] <jmgrosen> can someone help me in replicating this? http://gary.beagledreams.com/page/go-websocket-chat.html I already have the websocket protocol stuff working, but I'm not sure how to model the tasks/ports/chans
[05:34:41] <H4199> dandy: If you want to change to work on subsequent .rs files you'll need to edit those configs, but I am not sure that it works recursively on your current files.
[05:34:59] <dandy> I just wipred the workspace file
[05:35:02] <dandy> wiped*
[05:35:18] <dandy> I manually set it within the settings JSON
[05:35:28] <dandy> sublime confuses me...
[05:35:31] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[05:35:38] <dandy> better than notepad though
[05:36:12] <dandy> either use a gui or config files, this 50/50 and "oh I just overwrote what you did" stuff is no good
[05:37:00] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[05:37:45] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[05:37:47] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[05:40:39] *** Joins: victorporof (victorporo@35F65A40.E0F96B01.D111398B.IP)
[05:41:24] *** Joins: Jesin (Jessin_@moz-6EF909D6.cc.lehigh.edu)
[05:42:47] *** Quits: victorporof (victorporo@35F65A40.E0F96B01.D111398B.IP) (Ping timeout)
[05:46:05] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[05:53:10] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[05:55:57] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[05:55:57] *** ChanServ sets mode: +ao dherman dherman
[05:56:53] *** Quits: yusukesuzuki (yusukesuzu@moz-FEE44B6.net220148245.t-com.ne.jp) (Ping timeout)
[05:57:09] *** Joins: yusukesuzuki (yusukesuzu@moz-FEE44B6.net220148245.t-com.ne.jp)
[05:58:26] *** Quits: valenting (Thunderbir@moz-2007C0F5.client.stsn.net) (Ping timeout)
[06:03:03] *** Joins: fyolnish (fyolnish@moz-632C14F.uqwimax.jp)
[06:04:50] *** Quits: fyolnish (fyolnish@moz-632C14F.uqwimax.jp) (Ping timeout)
[06:08:11] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[06:08:36] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[06:13:35] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[06:17:52] *** Joins: alon (alon@95137801.66334A3F.AB64B967.IP)
[06:19:13] *** jorendorff is now known as jorendorff_away
[06:20:24] *** Quits: alon (alon@95137801.66334A3F.AB64B967.IP) (Ping timeout)
[06:22:51] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[06:28:41] *** Quits: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) (Connection reset by peer)
[06:32:33] *** Joins: Ms2ger (Ms2ger@moz-AA7C460.adsl-static.isp.belgacom.be)
[06:33:57] *** Joins: fyolnish (fyolnish@moz-CC5196F.uqwimax.jp)
[06:35:43] *** Quits: fyolnish (fyolnish@moz-CC5196F.uqwimax.jp) (Ping timeout)
[06:38:48] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Connection reset by peer)
[06:40:47] *** Quits: qmx (qmx@moz-B6DBCD05.qmx.me) (Quit: ZNC - http://znc.in)
[06:41:09] *** Joins: victorporof (victorporo@35F65A40.E0F96B01.D111398B.IP)
[06:41:20] *** Joins: qmx (qmx@moz-B6DBCD05.qmx.me)
[06:41:44] *** Quits: Ms2ger (Ms2ger@moz-AA7C460.adsl-static.isp.belgacom.be) (Ping timeout)
[06:42:27] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[06:43:16] *** Quits: victorporof (victorporo@35F65A40.E0F96B01.D111398B.IP) (Ping timeout)
[06:45:40] *** Joins: alon (alon@54F0B17B.66334A3F.AB64B967.IP)
[06:48:04] *** Joins: valenting (Thunderbir@7AF98CCC.7F57627B.81A53753.IP)
[06:50:18] *** Quits: qj13 (qj13@moz-E5B911BE.red.bezeqint.net) (Quit: Leaving)
[06:53:46] *** Joins: mindcat (mindcat@1A0F629A.DC005319.857BDFA9.IP)
[06:55:09] <mindcat> what happen when I type
[06:55:18] <mindcat> rusti: loop{}
[06:55:29] *** Quits: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net) (Quit: eatkinson)
[06:56:03] <mindcat> its nothing? :P
[06:59:53] <ChrisMorgan> rusti is not in the room.
[07:00:19] *** Quits: valenting (Thunderbir@7AF98CCC.7F57627B.81A53753.IP) (Ping timeout)
[07:01:20] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[07:01:41] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[07:02:37] *** Quits: ross (ross@moz-5EA04060.br.br.cox.net) (Quit: )
[07:03:23] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[07:04:07] *** Joins: nrc (nrc@3496663E.C1499D0.396E4C6D.IP)
[07:04:51] *** Joins: fyolnish (fyolnish@moz-6E45A4C1.uqwimax.jp)
[07:06:30] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[07:06:35] *** Quits: fyolnish (fyolnish@moz-6E45A4C1.uqwimax.jp) (Ping timeout)
[07:06:54] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[07:11:43] <agrajag> Does anyone know if Rust has a way to avoid circular dependencies like using forward declarations in C++ (I'm assuming no, based on the lack of header files)?
[07:13:08] <alon> does the standard library handle wchar_t* strings? 
[07:13:48] <SiegeLord> agrajag: It doesn't need any in a theoretical sense... but in practice there are ways
[07:13:57] <Eridius> rusti: mod a { fn foo(b bool) { ::b::bar(b); } } mod b { fn bar(b bool) { if b { ::a::foo(false) } else { println("done") } } a::foo(true)
[07:14:03] <Eridius> dammit rusti's not here
[07:14:33] *** Joins: snerd (motk@moz-E535583C.nonstopcrunchy.net)
[07:17:12] <agrajag> SiegeLord: so would one way to avoid a circular dependency be to reorder the 'use' statements kind of like imports in python?
[07:18:07] <SiegeLord> I doubt that makes a difference... the technique I had in mind was to break the circle using an intermediate interface
[07:18:25] <SiegeLord> You generally don't have to do that, though
[07:19:30] <SiegeLord> I guess it'd be nice to know why you want to avoid circular dependencies to begin with
[07:19:43] <Eridius> sounds like an architectual issue
[07:22:48] <agrajag> SiegeLord: Oh yeah sorry.  So I have a point class which uses a vector in one of it's methods and I have a vector class which has a constructor which can accept 2 points.
[07:23:31] <agrajag> Eridius: Yeah probably, but I'm used to being able to use forward declarations in C++ and was wondering if there was something similar in Rust I didn't know about.
[07:23:37] <Eridius> agrajag: define either the vector method or the point method in the other module, using a trait
[07:24:41] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: Leaving.)
[07:25:27] <agrajag> Eridius: Okay, thanks!
[07:26:00] <SiegeLord> Maybe it's because it's 3:25 AM here... but forward declarations have very little to do with circular dependencies per se...
[07:26:29] <SiegeLord> You only have them in C++ because of the way it parses the source
[07:28:13] <SiegeLord> This is perfectly valid Rust code: http://pastebin.ca/2462493
[07:28:46] <SiegeLord> And it's valid because Rust parses the source differently
[07:31:51] *** Quits: nrc (nrc@3496663E.C1499D0.396E4C6D.IP) (Ping timeout)
[07:32:41] <agrajag> SiegeLord: Well in C++ I've used a forward declaration as a kind of place holder for the class so you don't have to actually do the include the header and thus you wouldn't get a circular dependency when linking.
[07:33:13] <agrajag> SiegeLord: As for your code I'm assuming it only works because you've declared both struct before either implementation.
[07:33:25] <SiegeLord> No, you can shuffle them in any order
[07:33:37] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[07:33:55] <SiegeLord> What you're referring to is just a C pre-processor issue of circular includes
[07:34:32] *** Quits: alon (alon@54F0B17B.66334A3F.AB64B967.IP) (Ping timeout)
[07:35:12] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[07:35:45] *** Joins: fyolnish (fyolnish@moz-27912B38.uqwimax.jp)
[07:36:15] <SiegeLord> I'm not sure of exactly how rustc does it, but conceptually you can think of it going through the file twice
[07:36:30] <SiegeLord> First time to get all the declarations, and second time to actually do semantic analysis
[07:36:39] <SiegeLord> While in C++ there is only one pass
[07:37:30] *** Quits: fyolnish (fyolnish@moz-27912B38.uqwimax.jp) (Ping timeout)
[07:37:52] <agrajag> Right okay, I didn't realize it was a 2 pass compilation.  So then this should work then? http://mibpaste.com/9JuLIT 
[07:38:25] *** Joins: alon (alon@54F0B17B.66334A3F.AB64B967.IP)
[07:38:30] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[07:38:30] *** ChanServ sets mode: +ao dherman dherman
[07:41:09] <SiegeLord> Yeah
[07:41:30] <SiegeLord> Modulo the privacy/resolution issues with that code
[07:41:39] *** Joins: victorporof (victorporo@35F65A40.E0F96B01.D111398B.IP)
[07:41:54] <SiegeLord> Need to make a few things 'pub' and alter the use statements to actually import the types
[07:42:48] *** Joins: Jesse (jruderman@79611EE9.A51CB73B.6FBF6D51.IP)
[07:42:50] <SiegeLord> Like so: http://pastebin.ca/2462494
[07:43:17] <SiegeLord> Well, I guess the mod's don't need to be public... but everything else is good
[07:43:47] *** Quits: victorporof (victorporo@35F65A40.E0F96B01.D111398B.IP) (Ping timeout)
[07:45:45] <agrajag> Alright, that makes a lot more sense now.  Thanks for all your help and staying up so late!
[07:47:27] <benh> $ echo 'fn f() {}' | rustc --pretty normal /dev/stdin
[07:47:27] <benh> fn f() { }
[07:47:37] <benh> boo for spaces inside empty braces
[07:47:59] *** Joins: drrb (drrb@moz-3D9E8B98.lnse4.cht.bigpond.net.au)
[07:48:57] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[07:54:33] *** Quits: H4199 (chatzilla@25653362.1DD2AC9D.49CEED6B.IP) (Ping timeout)
[07:59:08] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[08:01:51] *** Joins: pnkfelix (pnkfelix@7AF98CCC.7F57627B.81A53753.IP)
[08:02:05] *** Quits: GeneralMaximus (ankur@D9E1A2F3.F036F587.BE90E62C.IP) (Ping timeout)
[08:02:21] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[08:04:34] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[08:05:58] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[08:07:21] *** Quits: mindcat (mindcat@1A0F629A.DC005319.857BDFA9.IP) (Quit: Lost terminal)
[08:07:28] *** Joins: Uther (Instantbir@moz-834083A8.hfc.dyn.abo.bbox.fr)
[08:09:26] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[08:10:05] *** Joins: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP)
[08:11:57] *** Joins: GeneralMaximus (ankur@FBACA223.113CFA4F.274D17D6.IP)
[08:12:20] *** Quits: pnkfelix (pnkfelix@7AF98CCC.7F57627B.81A53753.IP) (Quit: Leaving.)
[08:19:42] <nsf> well, in C++ there is more than one pass :) the reason why forward declarations are there is because grammar is ambiguous and lexer needs to distinguish types from identifiers
[08:20:05] <nsf> in order to succeed with at least parsing it
[08:21:01] <dandy> anybody know what this means? error: cannot move out of dereference of & pointer
[08:21:31] *** Joins: brson (brson@72B1AFF8.AD1E507F.3688B332.IP)
[08:21:31] *** ChanServ sets mode: +ao brson brson
[08:21:47] <alon> how do I convert a *[u16] to a &[u16] ? as doesn't work, I get a "non-scalar cast" error
[08:22:12] <benh> Is *[u16] really a type?
[08:22:23] <alon> benh, oh, right
[08:22:35] <alon> I meant *u16
[08:22:47] <benh> There's probably an unsafe from_buf function somewhere in std::vec
[08:23:05] *** Joins: schubidu25 (schubidu25@moz-FAE37203.superkabel.de)
[08:23:25] <brson> vec::raw::buf_as_slice
[08:23:34] <benh> dandy: It means that since a & pointer is only a borrowed pointer, you don't own the pointee and aren't allowed to invalidate it by movin from it
[08:23:59] <benh> If you're not actually trying to move from it you might want to .clone() it explicitly or maybe just copy a pointer, I dunno
[08:24:12] <dandy> I do want to move
[08:24:54] <benh> If it's a &mut, maybe you can swap for a default value with std::util::swap or something?
[08:25:13] <dandy> it is mut
[08:25:49] <alon> benh, there is, thanks.
[08:25:50] <dandy> I just want it to overwire though
[08:26:02] <dandy> overwrite*
[08:26:22] <benh> Well, the borrow checker isn't going to let you invalidate a borrowed value :(
[08:27:11] <dandy> here is a better example: pub fn perp_cw(&self) -> Vector2<T>{Vector2{x:self.y,y:self.x.neg()}}
[08:27:17] <dandy> it does not like the x:self.y
[08:27:22] <dandy> same error
[08:27:29] <dandy> I have no idea what I am doing :(
[08:28:00] <benh> you could make it fn perp_cw(self) without a &
[08:28:09] <dandy> would that copy by value?
[08:28:16] <benh> then the object is moved into perp_cw, perp_cw owns it and is allowed to invalidate it
[08:28:26] <dandy> if I borrow self, why cant I read self.y?
[08:28:38] <dandy> this is an immutable example
[08:28:45] <dandy> produces the same error
[08:28:48] <benh> ok
[08:29:00] *** Quits: brson (brson@72B1AFF8.AD1E507F.3688B332.IP) (Ping timeout)
[08:29:02] <benh> What you're doing is moving it into the new Vector2
[08:29:14] <dandy> so I have to clone?
[08:29:16] <benh> yeah
[08:29:27] <benh> T isn't "obviously" int, so it's not implicitly copyable
[08:29:33] <benh> or float or w/e
[08:29:36] <dandy> right
[08:29:40] <benh> it's an opaque type parameter at that point
[08:30:10] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Quit: yichoi)
[08:30:14] <dandy> so I guess .neg() is pretty much a clone as well, of a different value
[08:30:19] <dandy> because its fine with that
[08:30:50] *** Parts: schubidu25 (schubidu25@moz-FAE37203.superkabel.de) (Leaving...)
[08:30:59] <benh> depends on how it is defined I guess
[08:31:16] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[08:31:20] <benh> it's probably cloning the value and returning a copy by-move that you're then moving into the new Vector2
[08:31:41] <dandy> fn neg(&self) -> Result; so it returns by value
[08:31:50] <dandy> I guess...
[08:32:20] <benh> yeah.
[08:33:21] <benh> It's gonna be implemented for the primitive numeric types, in the implementation there's not gonna be a type parameter and just directly an obviously implicitly copyable type, and you get a fresh copy of your integer or float that has been negated
[08:36:21] *** Quits: drrb (drrb@moz-3D9E8B98.lnse4.cht.bigpond.net.au) (Quit: drrb)
[08:37:13] *** Joins: pnkfelix (pnkfelix@7AF98CCC.7F57627B.81A53753.IP)
[08:37:52] *** Joins: fyolnish (fyolnish@moz-D78D69FA.uqwimax.jp)
[08:37:55] <benh> Silly github question: If I push -f to a branch that has been submitted via a pull request, does every who commented on the PR get an email about it?
[08:39:35] *** Quits: fyolnish (fyolnish@moz-D78D69FA.uqwimax.jp) (Ping timeout)
[08:42:15] <jason_> benh: at first i thought yes, then i couldn't remember getting one of those emails. so i'm going with i have no idea.
[08:45:25] *** Quits: LU324 (weechat@9AF4F288.83671C58.1B5D53D7.IP) (Input/output error)
[08:46:26] *** Joins: LU324 (weechat@9AF4F288.83671C58.1B5D53D7.IP)
[08:46:54] *** Joins: drrb (drrb@moz-3D9E8B98.lnse4.cht.bigpond.net.au)
[08:47:19] *** Quits: pnkfelix (pnkfelix@7AF98CCC.7F57627B.81A53753.IP) (Ping timeout)
[08:49:50] *** Joins: alk (alk@moz-32A9FF6A.fbxo.proxad.net)
[08:54:56] <benh> ok, then i don't have to feel quite as bad for my "push -f, notice typo, push -f" workflow
[08:55:17] *** Joins: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP)
[08:56:27] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Client exited)
[08:58:17] *** Quits: dandy (Dandy@moz-84CC8377.hsd1.co.comcast.net) (Quit: Leaving)
[09:00:00] *** Joins: mib_mm2w4b (Mibbit@6D4CB81C.807177EA.CE7B90F2.IP)
[09:00:17] *** Quits: mib_mm2w4b (Mibbit@6D4CB81C.807177EA.CE7B90F2.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[09:00:29] *** Quits: drrb (drrb@moz-3D9E8B98.lnse4.cht.bigpond.net.au) (Quit: drrb)
[09:01:01] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[09:03:52] *** Joins: schubidu25 (schubidu25@moz-FAE37203.superkabel.de)
[09:05:28] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[09:05:58] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Ping timeout)
[09:06:33] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[09:08:29] *** Joins: fyolnish (fyolnish@moz-CF9A28C2.uqwimax.jp)
[09:09:47] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[09:10:16] *** Quits: fyolnish (fyolnish@moz-CF9A28C2.uqwimax.jp) (Ping timeout)
[09:12:35] *** Joins: victorporof (victorporo@35F65A40.E0F96B01.D111398B.IP)
[09:14:40] *** Quits: victorporof (victorporo@35F65A40.E0F96B01.D111398B.IP) (Ping timeout)
[09:17:00] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[09:17:20] *** Quits: Jesse (jruderman@79611EE9.A51CB73B.6FBF6D51.IP) (Ping timeout)
[09:18:42] *** Quits: Ke (jkarlson@moz-785A3407.org.aalto.fi) (Ping timeout)
[09:27:24] *** Joins: maik (maik@moz-8782792E.dip0.t-ipconnect.de)
[09:31:21] *** Joins: nkoep (nik@moz-4E6B366A.pool.mediaways.net)
[09:39:09] *** Joins: fyolnish (fyolnish@moz-CCFEB43D.uqwimax.jp)
[09:40:58] *** Quits: fyolnish (fyolnish@moz-CCFEB43D.uqwimax.jp) (Ping timeout)
[09:43:24] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[09:43:32] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Input/output error)
[09:43:53] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[09:45:38] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[09:50:59] *** Joins: pnkfelix (pnkfelix@7AF98CCC.7F57627B.81A53753.IP)
[09:53:08] *** Quits: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP) (Quit: bbl)
[09:55:21] *** Quits: alk (alk@moz-32A9FF6A.fbxo.proxad.net) (Ping timeout)
[10:00:59] *** Joins: igas (igas@DAB32F37.84602E91.3126E16B.IP)
[10:01:02] *** Joins: Earnestly (earnest@moz-BE290A2B.dyn.plus.net)
[10:01:08] *** Quits: pnkfelix (pnkfelix@7AF98CCC.7F57627B.81A53753.IP) (Quit: Leaving.)
[10:03:34] *** Joins: Toussa (Mibbit@moz-3717830C.adsl.alicedsl.de)
[10:04:17] *** Joins: simon (simon@moz-CBE4BB13.cable.teksavvy.com)
[10:08:40] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[10:09:29] *** Joins: fyolnish (fyolnish@moz-C94B1B33.uqwimax.jp)
[10:09:59] *** Joins: Ms2ger (Ms2ger@7AF98CCC.7F57627B.81A53753.IP)
[10:11:17] *** Quits: fyolnish (fyolnish@moz-C94B1B33.uqwimax.jp) (Ping timeout)
[10:11:21] *** Quits: Ms2ger (Ms2ger@7AF98CCC.7F57627B.81A53753.IP) (Max SendQ exceeded)
[10:11:35] *** Quits: GeneralMaximus (ankur@FBACA223.113CFA4F.274D17D6.IP) (Ping timeout)
[10:12:07] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[10:12:59] *** Joins: Ms2ger (Ms2ger@7AF98CCC.7F57627B.81A53753.IP)
[10:13:04] *** Joins: victorporof (victorporo@35F65A40.E0F96B01.D111398B.IP)
[10:13:21] *** Joins: pnkfelix (pnkfelix@7AF98CCC.7F57627B.81A53753.IP)
[10:14:48] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[10:15:15] *** Quits: victorporof (victorporo@35F65A40.E0F96B01.D111398B.IP) (Ping timeout)
[10:15:21] *** Joins: GeneralMaximus (ankur@769DD1BB.E1A0A7E0.BE90E62C.IP)
[10:16:15] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[10:19:14] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[10:21:27] *** Quits: Ms2ger (Ms2ger@7AF98CCC.7F57627B.81A53753.IP) (Ping timeout)
[10:23:58] *** Quits: igas (igas@DAB32F37.84602E91.3126E16B.IP) (Quit: )
[10:24:09] *** Joins: igas (igas@DAB32F37.84602E91.3126E16B.IP)
[10:32:44] *** Joins: brson (brson@7AF98CCC.7F57627B.81A53753.IP)
[10:32:44] *** ChanServ sets mode: +ao brson brson
[10:37:14] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[10:37:42] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[10:38:02] *** Joins: donri (donri@moz-9BB61102.tbcn.telia.com)
[10:39:27] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Ping timeout)
[10:40:09] *** Joins: fyolnish (fyolnish@moz-7911B04A.uqwimax.jp)
[10:40:48] *** Quits: alon (alon@54F0B17B.66334A3F.AB64B967.IP) (Ping timeout)
[10:41:57] *** Quits: fyolnish (fyolnish@moz-7911B04A.uqwimax.jp) (Ping timeout)
[10:44:46] *** Quits: igas (igas@DAB32F37.84602E91.3126E16B.IP) (Quit: )
[10:45:17] *** Joins: Ms2ger (Ms2ger@7AF98CCC.7F57627B.81A53753.IP)
[10:46:11] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[10:47:02] *** Quits: Ms2ger (Ms2ger@7AF98CCC.7F57627B.81A53753.IP) (Max SendQ exceeded)
[10:49:31] *** Joins: fyolnish (fyolnish@moz-7911B04A.uqwimax.jp)
[10:49:48] *** Quits: fyolnish (fyolnish@moz-7911B04A.uqwimax.jp) (Client exited)
[10:49:49] *** Joins: fyolnish (fyolnish@moz-7911B04A.uqwimax.jp)
[10:57:18] *** Joins: alon (alon@54F0B17B.66334A3F.AB64B967.IP)
[10:58:20] *** Quits: simon (simon@moz-CBE4BB13.cable.teksavvy.com) (Quit: work)
[11:01:10] *** Joins: threecreepio (jdp@moz-9C11F46E.cust.bredbandsbolaget.se)
[11:02:23] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[11:02:49] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[11:04:38] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Ping timeout)
[11:04:38] *** Quits: nkoep (nik@moz-4E6B366A.pool.mediaways.net) (Ping timeout)
[11:09:19] *** Joins: Ms2ger (Ms2ger@7AF98CCC.7F57627B.81A53753.IP)
[11:11:09] *** Quits: brson (brson@7AF98CCC.7F57627B.81A53753.IP) (Ping timeout)
[11:11:29] <saati> is there a trait i can implement to be able to use the index operator?
[11:11:54] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[11:12:56] *** Joins: dew1 (Instantbir@moz-EEE6B2F8.dhcp.stls.mo.charter.com)
[11:13:34] *** Joins: victorporof (victorporo@35F65A40.E0F96B01.D111398B.IP)
[11:13:39] <myname> great question, i would guess it could be that iterator that allows access on elements by index, but i don't really know if that allows other stuff
[11:13:50] *** Quits: dew (Instantbir@moz-EEE6B2F8.dhcp.stls.mo.charter.com) (Ping timeout)
[11:15:25] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[11:15:46] *** Quits: victorporof (victorporo@35F65A40.E0F96B01.D111398B.IP) (Ping timeout)
[11:16:07] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[11:17:57] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[11:18:59] *** Joins: nkoep (nik@moz-3EC48374.vpn.rwth-aachen.de)
[11:22:39] <aatch> saati, there used to be, it might still exist. However, it is very limited.
[11:23:04] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[11:23:26] <myname> i.e.?
[11:24:21] <aatch> myname, well it's impossible to use it to implement something that works similarly to a built-in vector.
[11:24:51] <myname> in what way?
[11:25:46] <aatch> myname, well with a vector I can do something like `let a = &v[1]` and get a reference to the second element of `v`, even if the vector contains non-copyable types
[11:26:17] <myname> but you can get access to t[x]?
[11:26:32] <aatch> myname, yes, but that's it.
[11:27:34] <aatch> and for some types it won't work well anyway. Turns out that we actually need like 5 Index* traits to cover everything.
[11:28:32] <myname> you won't be able to pass it as ~[T] i guess
[11:28:56] <aatch> myname, well you wouldn't ever be able to do that.
[11:29:29] <aatch> It's more that I'm sure if vectors implement Index anyway.
[11:29:36] <aatch> not sure*
[11:29:44] <myname> that's kinda sad
[11:30:05] <aatch> so you can't even take a `T:Index` and pass a vector.
[11:30:41] <aatch> myname, turns out that indexing is complicated when you factor in memory safety.
[11:31:11] *** Joins: mikezaby (mikezaby@moz-908EA8DE.home.otenet.gr)
[11:33:24] *** Joins: dbaupp (Thunderbir@moz-5E75FF5.pa.nsw.optusnet.com.au)
[11:33:40] *** Joins: igas (igas@DAB32F37.84602E91.3126E16B.IP)
[11:35:40] *** Joins: nrc (nrc@3496663E.C1499D0.396E4C6D.IP)
[11:36:57] *** Quits: pnkfelix (pnkfelix@7AF98CCC.7F57627B.81A53753.IP) (Quit: Leaving.)
[11:36:58] *** Quits: dbaupp (Thunderbir@moz-5E75FF5.pa.nsw.optusnet.com.au) (Ping timeout)
[11:38:20] *** Joins: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP)
[11:41:35] *** Joins: dbaupp (Thunderbir@moz-5E75FF5.pa.nsw.optusnet.com.au)
[11:42:51] *** Joins: alk (alk@moz-32A9FF6A.fbxo.proxad.net)
[11:47:23] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[11:48:30] *** Quits: GeneralMaximus (ankur@769DD1BB.E1A0A7E0.BE90E62C.IP) (Ping timeout)
[11:48:58] <dbaupp> cmr: ping
[11:49:47] *** Quits: maik (maik@moz-8782792E.dip0.t-ipconnect.de) (Ping timeout)
[11:50:29] *** Joins: GeneralMaximus (ankur@769DD1BB.E1A0A7E0.BE90E62C.IP)
[11:52:13] *** Quits: GeneralMaximus (ankur@769DD1BB.E1A0A7E0.BE90E62C.IP) (Ping timeout)
[11:53:35] *** Quits: alon (alon@54F0B17B.66334A3F.AB64B967.IP) (Ping timeout)
[11:53:49] <dbaupp> cmr: I just pushed configurable auto-pulling to multibuilder; the `pull_from` field in the config: {name: "mozilla", branch: "master"} should replace the hardcoded behaviour. (I haven't really tested it extensively/at all, sorry.)
[11:53:59] *** Joins: msingle (Thunderbir@moz-1A29E89B.nrflva.fios.verizon.net)
[11:55:10] *** Joins: maik (maik@moz-A3335658.dip0.t-ipconnect.de)
[11:56:48] *** Quits: Ms2ger (Ms2ger@7AF98CCC.7F57627B.81A53753.IP) (Ping timeout)
[11:58:42] *** Quits: maik (maik@moz-A3335658.dip0.t-ipconnect.de) (Ping timeout)
[12:03:18] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[12:03:33] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[12:03:48] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[12:05:48] *** Joins: GeneralMaximus (ankur@57EB47FF.DADF8612.BE90E62C.IP)
[12:06:32] *** Quits: dbaupp (Thunderbir@moz-5E75FF5.pa.nsw.optusnet.com.au) (Ping timeout)
[12:10:17] *** Quits: nrc (nrc@3496663E.C1499D0.396E4C6D.IP) (Ping timeout)
[12:13:55] *** Joins: canhtak (jeremy@moz-13BC3BC0.wl.t.ulaval.ca)
[12:14:05] *** Joins: victorporof (victorporo@35F65A40.E0F96B01.D111398B.IP)
[12:14:51] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[12:15:22] *** Joins: Ms2ger (Ms2ger@7AF98CCC.7F57627B.81A53753.IP)
[12:15:58] *** jorendorff_away is now known as jorendorff
[12:16:24] *** Quits: victorporof (victorporo@35F65A40.E0F96B01.D111398B.IP) (Ping timeout)
[12:16:46] *** Quits: GeneralMaximus (ankur@57EB47FF.DADF8612.BE90E62C.IP) (Quit: Computer has gone to sleep.)
[12:16:56] *** Joins: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr)
[12:18:05] <adridu59> rusti: print!("Hello!")
[12:18:18] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[12:18:36] <adridu59> rust-buildbot: print!("Hello!")
[12:18:56] <adridu59> where's rusti?
[12:19:30] <myname> last time i checked he had a red striped shirt, blue jeans and glasses
[12:19:37] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[12:19:47] <kimundi> adridu59: strcats laptop is probably offline
[12:20:06] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[12:20:09] *** Joins: victorporof (victorporo@35F65A40.E0F96B01.D111398B.IP)
[12:20:10] <adridu59> oh I wasn't aware this was provided by strcat
[12:21:52] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Ping timeout)
[12:22:56] *** Joins: Jackneill (Jackneill@moz-1DE1965A.pool.digikabel.hu)
[12:24:00] *** Joins: jgraham (jgraham@moz-6C043AAD.webfaction.com)
[12:24:02] <Ms2ger> myname, Waldo is actually wearing a yellow Summit shirt right now
[12:24:16] <myname> :O
[12:24:20] <myname> why that
[12:25:45] *** Quits: Ms2ger (Ms2ger@7AF98CCC.7F57627B.81A53753.IP) (Ping timeout)
[12:26:10] *** Quits: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk) (Quit: Ex-Chat)
[12:28:51] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[12:28:57] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[12:29:30] *** Joins: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca)
[12:30:00] <Toussa> hi there
[12:30:14] *** Quits: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[12:32:25] <saati> type q = &fn(&int)->int; Illegal anonymous lifetime: anonymous lifetimes are not permitted here
[12:32:36] <saati> what do i need to do to make this work
[12:34:40] <Toussa> Sorry, i am too newbie to answer properly i think, but why would you use a borrowed_ptr on a function
[12:34:43] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[12:36:16] *** Joins: markwimberly69 (Mibbit@moz-87DAB6D4.mtaonline.net)
[12:36:51] *** Joins: rumpler (Mibbit@moz-87DAB6D4.mtaonline.net)
[12:37:00] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[12:37:50] <saati> ah ok it works if i make it owned, thanks
[12:38:36] <Toussa> saati: You're welcome ;) 
[12:38:39] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[12:44:35] <kimundi> saati: type q<'self> = &'self fn(&int)->int;
[12:46:58] <Toussa> A small newbie question, i don't really understand - 'self -, what the - ' - change when it is in front of self?
[12:48:31] <Luqman> Toussa: it's just the syntax for lifetimes
[12:51:06] <saati> how do i write an owned closure literal?
[12:51:21] <Toussa> Luqman: meaning that the pointed object got the same lifetime as self?
[12:52:22] <Luqman> yes, it just ties together their lifetimes
[12:52:55] <Toussa> Luqman: ah ok thanks a lot.
[12:54:54] *** Quits: timot (timot@moz-9EF21B1.cust.tele2.se) (Ping timeout)
[12:55:13] *** Joins: timot (timot@moz-9EF21B1.cust.tele2.se)
[12:57:10] *** Joins: Ms2ger (Ms2ger@7AF98CCC.7F57627B.81A53753.IP)
[13:00:35] *** Quits: markwimberly69 (Mibbit@moz-87DAB6D4.mtaonline.net) (Quit: http://www.mibbit.com ajax IRC Client)
[13:01:25] *** Quits: rumpler (Mibbit@moz-87DAB6D4.mtaonline.net) (Quit: http://www.mibbit.com ajax IRC Client)
[13:02:20] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[13:02:22] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[13:03:23] *** Joins: pnkfelix (pnkfelix@7AF98CCC.7F57627B.81A53753.IP)
[13:03:31] *** Quits: pnkfelix (pnkfelix@7AF98CCC.7F57627B.81A53753.IP) (Input/output error)
[13:04:18] *** Quits: mikezaby (mikezaby@moz-908EA8DE.home.otenet.gr) (Quit: Leaving.)
[13:04:45] *** jorendorff is now known as jorendorff_away
[13:06:27] *** Quits: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP) (Ping timeout)
[13:06:29] *** jorendorff_away is now known as jorendorff
[13:08:32] *** jorendorff is now known as jorendorff_away
[13:10:37] *** Joins: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP)
[13:13:26] *** Joins: GeneralMaximus (ankur@57EB47FF.DADF8612.BE90E62C.IP)
[13:14:08] *** Joins: novabyte (novabyte@898960B3.5067EE56.B0C1FFA1.IP)
[13:14:49] *** Joins: _Y_ (Mibbit@moz-EF16AE88.dynamic.isp.telekom.rs)
[13:16:12] <_Y_> hi guys, gotta quick question - Does Rust current master compiles on windows?
[13:16:21] <_Y_> jemalloc errors
[13:18:02] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[13:18:18] *** Joins: mib_u6pzll (Mibbit@moz-FCF1ABDB.icpnet.pl)
[13:19:25] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[13:19:53] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[13:20:19] *** Joins: markwimberly69 (Mibbit@moz-87DAB6D4.mtaonline.net)
[13:20:39] <Luqman> _Y_: the last build on the windows bot seems to have successed
[13:21:05] <_Y_> hmm, did you guys change the gcc?
[13:21:24] <_Y_> mine isn't 4.8
[13:21:33] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[13:21:37] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Ping timeout)
[13:22:58] *** Joins: lmandel (lmandel@7EA5F9ED.C1499D0.396E4C6D.IP)
[13:23:16] <Luqman> _Y_: the bot has 4.5.2
[13:23:41] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[13:24:58] <_Y_> same as mine
[13:26:11] <Luqman> what's the error?
[13:26:39] *** Quits: lmandel (lmandel@7EA5F9ED.C1499D0.396E4C6D.IP) (Quit: lmandel)
[13:26:47] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[13:27:02] <_Y_> I cleared the screen, but apparently it was Error 2, that's all I remember
[13:27:16] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[13:27:40] <_Y_> could it be that the directory was dirty from previous rust build
[13:28:05] <_Y_> I built the rust in git repository where it was located
[13:28:29] <Luqman> yea maybe try with a clean build dir
[13:28:33] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[13:28:43] <_Y_> or try on linux ;)
[13:28:56] <_Y_> how do you guys test if a change works on all supported platforms?
[13:29:01] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[13:29:19] <_Y_> you have VM of Mac/Win/Lin sitting on HD?
[13:29:44] <Luqman> _Y_: every change is built and tested on various configurations of windows, mac, bsd and linux before it gets merged in
[13:30:10] <_Y_> by bors?
[13:30:49] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Ping timeout)
[13:30:57] <Luqman> yep
[13:30:58] *** Joins: valenting (Thunderbir@7AF98CCC.7F57627B.81A53753.IP)
[13:31:44] <_Y_> so you fork a repo, then issue a pull request
[13:32:02] *** Joins: pnkfelix (pnkfelix@7AF98CCC.7F57627B.81A53753.IP)
[13:32:04] <_Y_> does bors test before or after it's approved?
[13:32:12] <Luqman> after
[13:32:39] *** Joins: lmandel (lmandel@7EA5F9ED.C1499D0.396E4C6D.IP)
[13:33:08] *** Quits: pnkfelix (pnkfelix@7AF98CCC.7F57627B.81A53753.IP) (Quit: Leaving.)
[13:36:12] *** Quits: lmandel (lmandel@7EA5F9ED.C1499D0.396E4C6D.IP) (Quit: lmandel)
[13:36:19] *** Joins: jstevans (Instantbir@moz-C458954F.bootp.virginia.edu)
[13:39:05] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[13:39:41] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[13:41:24] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[13:41:24] *** Joins: tetsuharu (tetsuharu@79611EE9.A51CB73B.6FBF6D51.IP)
[13:42:25] *** Quits: tetsuharu (tetsuharu@79611EE9.A51CB73B.6FBF6D51.IP) (Client exited)
[13:45:01] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.1)
[13:46:18] <myname> i like how the coding guidelines tell you not to name traits "-able" and the tutorial has an example trait called "Printable"
[13:47:18] <Jackneill> hey
[13:47:33] <Jackneill> i want to learn rust, wondering if 
[13:47:39] <Jackneill> http://static.rust-lang.org/doc/master/rust.html
[13:47:47] <Jackneill> http://static.rust-lang.org/doc/master/tutorial.html
[13:48:06] <Jackneill> these 2 contains everything i need to know or the latter is enough?
[13:50:46] <Toussa> Jackneill: i personnaly started with http://www.rustforrubyists.com/, even if im not a rubyist, and then fallowd with your link
[13:51:20] <Toussa> Jackneill: you should have everything you need i think
[13:52:12] *** jorendorff_away is now known as jorendorff
[13:52:24] <Jackneill> i see, any projects where i can make use of my new rust knowledge, i saw rust compiler, but a first semester university student with no compiler construction knowledge wouldnt be able to start with it
[13:54:15] <Toussa> Jackneill: Do your programming assignment in rust maybe, could be a good start, and then try to slowly improvise
[13:54:50] <Jackneill> programming assignment?
[13:54:52] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[13:54:52] <Toussa> I just started thurday, and the more i go through the tutorial, the more idea i have
[13:55:32] <Jackneill> you mean university "homework"?
[13:55:38] *** Quits: valenting (Thunderbir@7AF98CCC.7F57627B.81A53753.IP) (Ping timeout)
[13:55:40] <Toussa> yes
[13:56:30] <kimundi> Jackneill: You could just look into the standart libary for stuff to do for know. That what I'm doing for 6 months now, the compiler itself still scares me :)
[13:56:40] <kimundi> for now*
[13:56:46] <Jackneill> yeah, well theres no really programming homework in the first semester yet, also i wont learn anything new and useful in this half year for sure
[13:57:13] <Jackneill> i see
[13:57:30] <kimundi> Jackneill: Generaly the manual and the tutorial are good to give you a general feeling and overview of how the language works, but are hopelessly wrong if it comes to the details
[13:57:53] <kimundi> or, at least no one recently made sure that they are completly right
[13:57:59] <Toussa> kimundi: are some issues on github to see what is needed in the standard library? look pretty interesting
[13:58:07] <Jackneill> so the docs/tutorials are old?
[13:58:18] *** Joins: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net)
[13:58:41] <kimundi> Just start reading code, write small toy programs, maybe look at the issue tracker for small/easy/intersting bugs to fix, and then just keep asking here till stuff makes sense :)
[14:00:09] <Jackneill> i see
[14:00:11] <Jackneill> thanks.
[14:00:24] <Toussa> yep indeed, thanks a lot for those advices
[14:00:31] *** Quits: _Y_ (Mibbit@moz-EF16AE88.dynamic.isp.telekom.rs) (Quit: http://www.mibbit.com ajax IRC Client)
[14:00:55] <Jackneill> http://githubissues.herokuapp.com/#mozilla/rust its not loading for me, same for everyone?
[14:01:21] <kimundi> Jackneill: It's not just that they are old... Basically they get constantly retrofitted to still pass the unit tests for the code segments in it, and updated in places where someone feelt like it, but after a few years of continiuosl patchwork it's just an inconsistent mess in general. But, as I said still useful to get a feel in general for the language :)
[14:01:48] <kimundi> Jackneill: Try the direct link: https://github.com/mozilla/rust/issues?direction=desc&sort=updated&state=open
[14:02:06] *** Joins: brson (brson@7AF98CCC.7F57627B.81A53753.IP)
[14:02:07] *** ChanServ sets mode: +ao brson brson
[14:02:14] <kimundi> https://github.com/mozilla/rust/issues
[14:03:55] *** Joins: lmandel (lmandel@7EA5F9ED.C1499D0.396E4C6D.IP)
[14:05:50] *** Quits: brson (brson@7AF98CCC.7F57627B.81A53753.IP) (Ping timeout)
[14:07:01] *** Quits: lmandel (lmandel@7EA5F9ED.C1499D0.396E4C6D.IP) (Quit: lmandel)
[14:09:00] *** Joins: brson (brson@7AF98CCC.7F57627B.81A53753.IP)
[14:09:01] *** ChanServ sets mode: +ao brson brson
[14:09:35] *** Quits: markwimberly69 (Mibbit@moz-87DAB6D4.mtaonline.net) (Quit: http://www.mibbit.com ajax IRC Client)
[14:09:37] *** Quits: alk (alk@moz-32A9FF6A.fbxo.proxad.net) (Ping timeout)
[14:11:29] <Ms2ger> Someone remind me how I break on a task failure?
[14:13:02] <brson> Ms2ger: rust_begin_unwind
[14:13:40] <Ms2ger> Ta
[14:15:45] <Ms2ger> Hrm
[14:15:50] <Ms2ger>   if result.is_none() {
[14:15:50] <Ms2ger>     *vp = JSVAL_NULL;
[14:15:50] <Ms2ger>     return 1;
[14:15:50] <Ms2ger>   }
[14:15:50] <Ms2ger>   let mut result = result.unwrap();
[14:16:06] <Ms2ger> task <unnamed> failed at 'called `Option::unwrap()` on a `None` value'
[14:16:18] *** Joins: skade (skade@moz-79216CC4.dip0.t-ipconnect.de)
[14:17:44] <myname> interesting
[14:17:57] * Ms2ger is a little skeptical of his stack
[14:17:59] <brson> Ms2ger: are you sure that's the code that's triggering the failure? i don't expect Option to be that broken
[14:18:09] <Ms2ger> That's what gdb tells me :)
[14:19:00] <Ms2ger> p result
[14:19:00] <Ms2ger> $1 = {void ()} 0x7ffff6afe7f0 <define_property+4294945168>
[14:19:03] <Ms2ger> That doesn't help :)
[14:19:53] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[14:21:06] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[14:21:49] *** Joins: maik (maik@moz-A3335658.dip0.t-ipconnect.de)
[14:23:24] *** Quits: msingle (Thunderbir@moz-1A29E89B.nrflva.fios.verizon.net) (Ping timeout)
[14:23:37] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[14:24:39] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[14:25:27] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[14:25:54] *** Joins: msingle (Thunderbir@moz-1A29E89B.nrflva.fios.verizon.net)
[14:31:40] *** Quits: canhtak (jeremy@moz-13BC3BC0.wl.t.ulaval.ca) (Quit: canhtak)
[14:32:07] *** Quits: Jesin (Jessin_@moz-6EF909D6.cc.lehigh.edu) (Ping timeout)
[14:33:00] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[14:33:40] *** Joins: lmandel (lmandel@7EA5F9ED.C1499D0.396E4C6D.IP)
[14:35:23] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[14:36:53] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[14:37:08] *** Quits: lmandel (lmandel@7EA5F9ED.C1499D0.396E4C6D.IP) (Ping timeout)
[14:37:18] *** Quits: brson (brson@7AF98CCC.7F57627B.81A53753.IP) (Ping timeout)
[14:40:00] *** Quits: z0w0 (zack@64F0E14B.3C29B4A9.2CE63F58.IP) (Client exited)
[14:41:58] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[14:42:40] *** Joins: lmandel (lmandel@7EA5F9ED.C1499D0.396E4C6D.IP)
[14:45:29] <Ms2ger> Any way to break on rust code?
[14:46:01] <Ms2ger> (in gdb)
[14:46:09] *** Joins: tautologico (lymph@7A53DAF8.92451A23.6EB699AE.IP)
[14:48:56] *** Quits: lmandel (lmandel@7EA5F9ED.C1499D0.396E4C6D.IP) (Quit: lmandel)
[14:52:03] *** Joins: Jesin (Jessin_@moz-F641DC38.cc.lehigh.edu)
[14:52:03] *** Quits: nixprime (nixprime@moz-B5BC087D.hsd1.ca.comcast.net) (Ping timeout)
[14:53:58] *** Joins: obk (Mibbit@moz-E977B938.red.bezeqint.net)
[14:54:03] *** Joins: jonathanmarvens (jonathanma@moz-FEC55A79.hfc.comcastbusiness.net)
[14:57:49] <obk> Anyone knows why casting @mut T as @T is unsafe?
[14:58:24] <cmr> obk: because @T is always immutable.
[14:58:43] <obk> But there is such a thing as @mut T ... 
[14:58:53] *** Quits: maik (maik@moz-A3335658.dip0.t-ipconnect.de) (Ping timeout)
[14:58:54] <cmr> @mut T is an entirelydifferent type
[14:59:25] <cmr> Ms2ger: weird! might be debuginffo tweaking out on you. you *should* be able to break onrust code just like you'dbreak on c code though
[14:59:35] <obk> So I can't express "I have a @ pointer which is mutated somewhere else in the system, but I promise not to mutate it"?
[14:59:36] *** Joins: alk (alk@moz-32A9FF6A.fbxo.proxad.net)
[14:59:44] <cmr> No
[14:59:50] <cmr> That's what @const used to fulfill
[14:59:59] <cmr> but it was removed for lack of usecase.
[15:00:03] <kimundi> obk: well you can dynamically freeze it by borrowing a &T from it
[15:00:03] <Ms2ger> cmr, I did figure it out with prints :)
[15:00:03] *** Quits: Jesin (Jessin_@moz-F641DC38.cc.lehigh.edu) (Input/output error)
[15:00:29] <obk> kimundi: I know, but I want to store the @ pointer somewhere (just never mutate it through there)
[15:00:32] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[15:00:45] <kimundi> ah, yeah need to use @mut for that
[15:01:04] <obk> What would happen if I do a cast::transmute from @mut T to @T? "unsafe", sure, but would it work or just mess things up?
[15:01:12] <cmr> It should work
[15:01:18] <kimundi> it'S unsaef becuase if would mess things up
[15:01:34] <obk> I love it when there's a consensus :-)
[15:01:43] <kimundi> you can get undefined behavior that way
[15:01:46] <cmr> There also might be stuff in std::managed to help with that
[15:02:32] <obk> cmr: Doesn't seem managed has anything along these liness...
[15:02:42] <obk> kimundi: How would I get undefined behavior?
[15:02:45] <cmr> Ah well
[15:03:10] <cmr> obk: llvm is allowed to cache reads of a @T
[15:03:23] <cmr> but if you change it through the @mut somewhere, now it's invalid.
[15:03:36] <kimundi> code that uses @T assumes that the T never changes, and llvm might optimize it in that regard. If it actually DOES change, things can break down
[15:03:37] <obk> Ah, I see. Yes, that makes sense...
[15:04:23] <sp3d> you could maybe create a type which wraps an @mut T and only exposes read-contents/change-pointer operations?
[15:04:26] <kimundi> also, you can borrow a &T from a @T without any runtime checks, but for a @mut it has to insert runtime checks
[15:04:42] <sp3d> but idk why you need that over @T, yeah
[15:04:43] <obk> sp3d: I could... a lot of boilerplate though
[15:04:44] <sp3d> &T*
[15:05:54] <obk> Well, in my case, at the point I want a @T, the code "should" never mutate the original value. Hmmm.
[15:05:58] <kimundi> runtime checks that modify the @mut box itself, that is. In theory, cating between @ and @mut might simply become memory incompatible in the future (though @mut removal likely happens before that)
[15:06:28] <obk> Yes, I'm a bit wary of having to go over all my code when @ goes...
[15:06:36] <cmr> obk: Well, if you're initializing it once, can you construct it as a value and box it into a @T?
[15:06:59] <obk> cmr: Not really, I only use @ because I have non-linear cross-pointers...
[15:07:06] *** Joins: io2 (io2@moz-A6202C16.home.otenet.gr)
[15:07:10] <cmr> ah
[15:07:52] <obk> Now, if I could say "all the objects reached from some root object x have a lifetime of 'x and freely hold &'x pointers to each other... where "x" itself is send-able but any smaller piece isn't...
[15:08:00] <obk> Then I wouldn't need @ in the 1st place
[15:08:08] <obk> But this concept doesn't exist, alas.
[15:08:20] <cmr> heh
[15:08:22] <obk> Sort of arena but tied in with owned/borrowed pointers
[15:08:36] *** Joins: Ferreus (ferreus@moz-6DE70CF8.pools.arcor-ip.net)
[15:09:00] <obk> I keep wishing for this - my code has several such monsters, right now I cheat my way around it :-(
[15:09:16] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[15:09:37] <obk> In the case I don't care whether "x" is sendable, I just used @, but I thought I'd keep the mut/immut safety...
[15:10:13] <cmr> You should be able to write such a structure yourself, with some careful unsafe wrangling.
[15:10:28] <Luqman> cmr: i think T never changes for @T when T is Freeze, since T could contain an @mut
[15:10:51] <cmr> Luqman: ah, right
[15:11:00] *** Joins: pnkfelix (pnkfelix@7AF98CCC.7F57627B.81A53753.IP)
[15:11:01] <cmr> @ is so messy :(
[15:11:08] <obk> cmr: I tried, but I'm not sure how to impose the "safely borrow & pointers as long as their lifetime is less than x", especially when they are stored inside vectors etc.
[15:11:32] <obk> Perhaps it is doable by someone who knows the system better than I do, I'd dearly like to see it if so :-)
[15:12:35] <obk> Anyway. The 2nd place I use unsafe is a common pattern where I have a "self" container, I access a mutable piece of it, and then I want to access a mutable independent piece.
[15:12:48] <obk> Of course I can't safely borrow self as mutable more than once...
[15:13:12] <obk> But that's exactly what I need to do, so I just unsafe-ly do so :-(
[15:13:33] <obk> This is harder to blame on the static type system, it is doing its best.
[15:14:18] *** Quits: pnkfelix (pnkfelix@7AF98CCC.7F57627B.81A53753.IP) (Quit: Leaving.)
[15:14:20] <cmr> Well, no, the borrow checker does have its limitations.
[15:16:21] <obk> Right. But what I need is very hard for a static type checker. self.get_mut_foo(), self.get_mut_bar() - how is the poor type checker to know it is safe to do both at once?
[15:16:34] <cmr> disjoint borrows1
[15:16:36] <cmr> !
[15:16:41] <obk> Right!
[15:16:47] <obk> Is there such a thing?
[15:16:56] <cmr> Not right now :p
[15:17:05] <cmr> nmatsakis: Would such a thing be a possible extensions?
[15:17:09] <obk> My guess is that in general it would take some run-time checks to do it safely
[15:17:52] <kimundi> obk: Afaik it'S fine if you provide disjoint borrows, as long as they are tied to the saem lifetime
[15:17:58] <Toussa> I'm facing an error that i don't get =/
[15:17:59] <Toussa> type `extern "Rust" fn(~std::rt::uv::uvio::UvTcpListener) -> std::rt::io::net::tcp::TcpListener` does not implement any method in scope named `bind`
[15:18:23] <Toussa> here is what im doing
[15:18:23] <kimundi> fn borrow_parts(&'a mut self) -> (&'a mut Foo, &'a mut Bar)
[15:18:24] <Toussa> 	let tcp_listenner = TcpListener; 	let success = tcp_listenner.bind(socket_address);
[15:18:34] <obk> kimundi: Sure, but consider, say, vec.get_mut_element(i) and vec.get_mut_element(j) - it is safe if and only if i != j, which is run-time
[15:18:46] <Luqman> Toussa: you're trying to call bind on a function is seems based on the error message
[15:19:13] <obk> Tousss: sure, but this means you basically have a get_both_foo_and_bar in one function, right?
[15:19:13] <Toussa> i don't get why creating a TcpListener (which implement bind), i can't actually call it
[15:19:17] <cmr> Toussa: TcpListener is a constructor function., because it's a tuple struct.
[15:19:26] <cmr> You're not creating a TcpListener.
[15:19:43] <sp3d> obk: for an array you have runtime resolution of the parts of memory which must be disjoint--but with a struct the field names are resolved at compile time
[15:19:47] <kimundi> obk ah, vectors is exactly the situation where I was thinking of that is possible today: you can split a &mut[] into two &mut[] at a index position. In theory, that can be recusrivly be doen until you have a &mut for each element
[15:19:50] <sp3d> arrays already have split_mut or such afaik
[15:19:53] <Luqman> Toussa: you call bind like: let listener = TcpListener::bind(addr)
[15:20:10] *** Joins: lmandel (lmandel@7EA5F9ED.C1499D0.396E4C6D.IP)
[15:20:22] <obk> Ok, a map with get_mut_value(key) then - it is safe to call it twice if the key are different.
[15:20:50] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[15:20:55] <Toussa> Oh yeah, i havent seen in the doc that there were no &self
[15:20:58] <Toussa> thanks a lot
[15:21:00] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[15:21:09] <obk> And sure, one can implement get_mut_two_values(key1, key2) -> (value1, value2) but in general this approach requires combinatorical explosion of combinations
[15:21:29] <kimundi> obk: Well, in for truely general soultion you'd have to use dynamic borrow checking
[15:21:38] <obk> Exactly!
[15:21:49] <engla> obk: or the .mut_iter() of hashmap
[15:21:53] <obk> Which also doesn't exist, right?
[15:22:03] <engla> obk: with it you can get all the &mut pointers at the same time
[15:22:06] <obk> mut_iter() may be horribly inefficient for this
[15:22:20] <obk> dynamic borrow checking would be the right thing, if it existed
[15:22:23] <obk> (does it?)
[15:22:42] <kimundi> obk: dynamic borrow checking at this point is something that you have to implemnt manually. for @mut the compiler does it, for RcMut it's part of the library
[15:23:29] *** Quits: lmandel (lmandel@7EA5F9ED.C1499D0.396E4C6D.IP) (Quit: lmandel)
[15:23:53] <obk> Yes, the problem with RcMut is that it isn't send-able. If I have struct Foo { a_field: Container<T>, a_view: View_with_RcMut_into_container<T> }, I can't send the whole Foo
[15:24:07] <obk> Even though that should be safe (assuming no external pointers into the struct)
[15:24:18] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[15:24:24] <cmr> obk: RWArc is sendable
[15:24:25] <kimundi> basically, it amounts to a mutable field in the type somewhere that stores Unborrowed/orrowed/MutBorrowed, with access to it done with higher order functions or RAII handles that set/reset/check those flags
[15:24:35] <obk> RWArc is more expensive
[15:24:41] <cmr> Yes, that's the price of safety.
[15:24:55] <obk> But in this case, this price is unnecessary...
[15:24:58] <obk> In theory anyway.
[15:26:02] <obk> Anyway, for now, I just use an unsafe_mut!(self) macro in about 6 places... which I guess I can live with.
[15:27:43] <kimundi> The set of safety rules are ultimately just an approximation of the set of truly safe operations. Often, you'll need to implement a safe api for a more efficient unsafe implementations, or use generic abstractions that might be slower for the subset of operations you want to use them with, but that are safe in general
[15:27:49] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[15:30:50] <kimundi> You might get away with just "transmuting away" the mutability/immutability, but it might also break in mysterious way in the future, corrupt memory etc. It's much better in general to just build a safe abstraction over it. But ultimately its your code - if it works, it works ;)
[15:35:44] *** Joins: mikezaby (mikezaby@moz-908EA8DE.home.otenet.gr)
[15:36:09] <obk> kumundi: I'm now looking at it and seeing what I can do...
[15:36:18] *** Joins: lfox (larryfox@moz-B8648F0F.nycmny.fios.verizon.net)
[15:36:34] *** Joins: dandy (Dandy@moz-84CC8377.hsd1.co.comcast.net)
[15:36:37] <obk> Probably I'll just use @mut T everywhere to avoid issues for now
[15:36:59] <obk> And hope that Gc<T> and GcMut<T> would be nicer to me down the road :-D
[15:37:51] <kimundi> :) Though I think it will be Gc<T> and Gc<Mut<T>>
[15:38:29] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[15:39:35] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[15:39:36] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[15:40:04] <obk> We'll need to see if I'll be able to obtain a Gc<T> from a Gc<Mut<T>>, when it comes to that...
[15:40:12] <obk> We'll see.
[15:40:24] <kimundi> yeah
[15:40:55] *** Quits: GeneralMaximus (ankur@57EB47FF.DADF8612.BE90E62C.IP) (Ping timeout)
[15:41:06] <engla> I think Mut<T> will be similar to @mut T  today w.r.t the borrow checking
[15:41:23] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[15:41:36] <saati> can someone tell me what am i doing wrong http://sprunge.us/eSHY
[15:41:39] <obk> engla: this isn't exactly borrow...
[15:42:27] <cmr> saati: invalid syntax
[15:42:31] <cmr> T: Send+Clone
[15:42:37] <cmr> Well, not invalid.
[15:42:39] <obk> saati: You are cloning the Option<T>, so T must be clone-able, no?
[15:43:06] <obk> Ah, right. "Send, Clone" != "Send + Clone"
[15:43:07] <saati> ok thanks
[15:43:07] <cmr> But as it's standing, youhave two type variables, one constrained by send, the other named Clone and constrained by nothing
[15:43:31] <engla> obk: ok. In the Mut prototype you can turn Gc<Mut<T>> into T if you can unwrap Gc<T> to T
[15:43:39] <kimundi> saati: What cmr said, T: Send+Clone is a bound on Send and Clone for T, T: Send, Clone is a bound of Send on T and a type parameter Clone
[15:44:08] <kimundi> hm... sorry for repeating it :)
[15:44:47] <saati> kimundi: type parameter clone?
[15:45:02] *** Joins: GeneralMaximus (ankur@98617C67.9B33ED22.BE90E62C.IP)
[15:45:06] <kimundi> saati: Just a new type paramter like T is one
[15:45:14] <saati> ahhh
[15:45:42] <kimundi> fn foo<T: Clone>, fn foo<Clone: Clone> // same things
[15:45:59] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[15:47:26] *** Quits: skade (skade@moz-79216CC4.dip0.t-ipconnect.de) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[15:47:39] <obk> Hmmm. So in ~9K LOC (raw text lines, w/ comments etc.) I have ~5 unsafe lines and ~15 cases where I re-borrow "self" as mutable to access a 2nd independent piece.
[15:47:41] *** Joins: _Y_ (Mibbit@moz-EF16AE88.dynamic.isp.telekom.rs)
[15:47:45] <obk> I guess that's not too bad...
[15:47:59] <_Y_> so I've got an error compiling Rust on Windows
[15:48:14] *** Joins: [squiddy] (squiddy@moz-2262CE3E.dynamic.cablesurf.de)
[15:48:25] *** Quits: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com) (Quit: Leaving)
[15:48:26] <_Y_> any way to troubeshoot it?
[15:48:29] *** Joins: doomlord_ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[15:48:40] *** Joins: doomlord__ (servitor@moz-728E30A7.range109-151.btcentralplus.com)
[15:48:42] <saati> thanks, it compiles
[15:50:16] <_Y_> did anyone else had problems compiling rust from source?
[15:50:20] <_Y_> on Windows ofc
[15:50:50] <kimundi> A lot of people have that trouble regularly 
[15:51:01] <Ms2ger> So how do I make a field mutable?
[15:51:07] <cmr> Ms2ger: you can;t
[15:51:11] <Ms2ger> Hrm, wait
[15:51:19] <Ms2ger> This error isn't where I thought it was
[15:51:32] <_Y_> you can only make structs/enums mutable
[15:51:55] <obk> Unless it is a @T, in which case make it @mut T
[15:52:01] <kimundi> Ms2ger: Make the struct mutable, or embed an something like Mut<T> and give up on a Freeze bound, or hide the mutable part behind a *T
[15:52:05] <cmr> Mutability is inherited.
[15:52:21] <cmr> That's all that needs to be said :p
[15:52:36] <_Y_> so only traits are mutable oO?
[15:52:39] <obk> Except for @ and & members... Of course & members are a PITA :-)
[15:52:43] *** jorendorff is now known as jorendorff_away
[15:53:02] <kimundi> _Y_ traits being mutable isn'T even something that makes sense :P
[15:53:02] *** Joins: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl)
[15:53:33] <_Y_> only traits can be inherited, no? You can't inherit a function, struct or a tuple
[15:53:48] <kimundi> _Y_: Not that kind of inheritance
[15:53:56] <cmr> Mutability is inherited through through the ownership tree.
[15:54:02] <cmr> obk: fixed :p
[15:54:44] <kimundi> let mut a = ~~~~~~~~5u; // The mutability is inherited from the owner "local variable a" through all the the owning pointers
[15:54:53] <_Y_> so is there a known fix for jemalloc making compiling difficult
[15:55:07] <obk> cmr: Tricksy hobbit :-)
[15:55:47] <cmr> _Y_: difficult how?
[15:56:07] <kimundi> _Y_: No idea. Might be a recent problem, might be some kind of difficulty that's inherent in the way we build at the moment, I don't know. I switched to Linux because of Rust :P
[15:56:14] <_Y_> make[1]: *** [src/jemalloc.o] Error 1 make[1]: Leaving directory `/c/dev/lang/rust/i686-pc-mingw32/rt/stage0/jemalloc'  make: *** [i686-pc-mingw32/rt/stage0/jemalloc/lib/jemalloc.lib] Error 2
[15:56:31] <Luqman> _Y_: a clean build dir didn't help?
[15:56:35] <_Y_> no :(
[15:56:58] *** Joins: lmandel (lmandel@7EA5F9ED.C1499D0.396E4C6D.IP)
[15:57:01] <_Y_> Tricksy rust
[15:57:10] <kimundi> _Y_ Last I knew, building rust on windows involved something like "1. install current mingw 2. downgrade parts of mingw 3. copy some of the downgraded dlls into the rust install folder 4. upgrade mingw again"
[15:57:35] <Ms2ger> kimundi, cmr, I had a &mut self in the code I was looking at, but that wasn't the code that was erroring :)
[15:57:41] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[15:57:42] <kimundi> But I have no idea if thats correct/still accurate/the details
[15:57:47] <_Y_> ironically it all worked few weeks ago
[15:58:01] <doomlord__> yikes
[15:58:07] * Ms2ger heads off for dinner
[15:58:14] <_Y_> yeah, Windows sucks like that
[15:58:39] <kimundi> Hopefully we can just switch to the llvm stack soonish#
[15:59:11] *** Quits: alk (alk@moz-32A9FF6A.fbxo.proxad.net) (Ping timeout)
[15:59:18] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[16:01:02] *** Quits: lmandel (lmandel@7EA5F9ED.C1499D0.396E4C6D.IP) (Quit: lmandel)
[16:06:43] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[16:07:01] *** Quits: Ms2ger (Ms2ger@7AF98CCC.7F57627B.81A53753.IP) (Ping timeout)
[16:08:40] *** Joins: pcwalton (pcwalton@79611EE9.A51CB73B.6FBF6D51.IP)
[16:08:40] *** ChanServ sets mode: +ao pcwalton pcwalton
[16:10:18] *** Quits: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net) (Ping timeout)
[16:11:01] <obk> Speaking of tricks: How can one get a stack trace on a `fail` or other aborts?
[16:11:29] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[16:11:49] <kimundi> no proper build in way  possible atm apart from running it under gdb
[16:13:21] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[16:13:50] <obk> :-(
[16:14:12] <obk> Well, that's still better than nothing... (I'm looking at you, Haskell!)
[16:14:32] *** Joins: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net)
[16:14:51] <obk> (And I know it is possible in theory in Haskell when compiling for profiling and so on. getting it to actually work... that's something else)
[16:15:08] <dandy> so why no stack traces in rust?
[16:15:16] <dandy> because of the stack sizing stuff?
[16:16:16] <kimundi> dandy: Because the current runtime has been recently rewritten in rust, and it's not yet implemented again
[16:16:25] <dandy> oh good!
[16:18:54] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[16:23:04] *** Quits: pcwalton (pcwalton@79611EE9.A51CB73B.6FBF6D51.IP) (Ping timeout)
[16:27:22] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[16:28:14] <dandy> Could I get some peer review on this file: https://github.com/aarondandy/vertesaur-rust/blob/master/src/vertesaur/vector.rs
[16:28:22] <dandy> pretty please, my first module
[16:29:53] *** Joins: mjh563 (mjh563@moz-D891C5B8.cable.virginmedia.com)
[16:30:41] *** Joins: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk)
[16:31:34] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[16:32:31] *** Quits: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin_)
[16:32:42] <doomlord__> whats the acronym GIS
[16:32:44] *** Joins: tdc (santegoeds@moz-5892B7CA.range86-135.btcentralplus.com)
[16:32:48] * obk is throwing https://github.com/mozilla/rust/issues/9728 up in the air...
[16:32:58] <dandy> https://en.wikipedia.org/wiki/Geographic_information_system
[16:33:03] <obk> doomlort__: Geographical Information System?
[16:33:08] <doomlord__> ok
[16:33:20] <dandy> a career i am looking to leave!
[16:33:38] <doomlord__> hehe
[16:34:12] * obk used to work on these. Actually wrote the infrastructure for one... That was in the late 80s though, when I was much younger :-)
[16:34:47] <dandy> I have been working on mine for quite a while but I have a lot of issues with motivation
[16:35:12] <obk> Favorite quote from these days (to an MP at the entry to a military base!): I'm here for the GRASS user convention.
[16:35:19] <obk> That didn't end well ;-)
[16:35:31] <dandy> good lord
[16:35:37] <dandy> people still use that...
[16:35:47] <obk> I did say the late 80s!
[16:35:54] <obk> It is still in use?
[16:36:19] <obk> Come to think of it, some of my code from these days is still used, may god have mercy on the users...
[16:36:36] <dandy> Some people still need some specific things from it
[16:36:48] <dandy> or are just old
[16:36:49] <obk> It had the advantage of simplicity
[16:37:00] <obk> And given the HW then...
[16:37:15] <saati> what does "cannot move out of dereference of & pointer" mean?
[16:37:27] <dandy> satti, welcome to me at 3AM yesterdat
[16:37:32] <obk> Means the value tries to escape the lifetime of the borrowed pointer
[16:37:39] <dandy> it means you have to copy the data probably
[16:37:46] *** Quits: jonathanmarvens (jonathanma@moz-FEC55A79.hfc.comcastbusiness.net) (Input/output error)
[16:37:51] <obk> Calling clone would work, if that makes sense for you
[16:37:58] <obk> (Depends on the case of course)
[16:38:12] <dandy> someThing.x = otherThing.x.clone()
[16:38:15] *** Joins: jonathanmarvens (jonathanma@moz-FEC55A79.hfc.comcastbusiness.net)
[16:38:25] <dandy> obk, what else could be done except for clone?
[16:38:41] <obk> Hmmm. Playing lifetime Sudoku :-)
[16:38:55] <obk> Or using Rc, RcMut, Arc, RWArc, or even @...
[16:39:07] <obk> What I found help most is doing things the "Rust way"
[16:39:10] <dandy> obk, I have no idea...
[16:39:13] <obk> Which means, nesting scopes
[16:39:18] <obk> Lots of nesting scopes
[16:39:24] <dandy> How would you write line 257: https://github.com/aarondandy/vertesaur-rust/blob/master/src/vertesaur/vector.rs#L257
[16:40:01] <dandy> Arc is not mentioned in the tutorial, where can I read about that stuff?
[16:40:03] *** Quits: jonathanmarvens (jonathanma@moz-FEC55A79.hfc.comcastbusiness.net) (Ping timeout)
[16:41:50] <obk> dandy: Not sure, it seems you are really creating a 2nd vector so by definition you are cloning the values... So clone makes sense there
[16:41:56] <saati> how can i fix this http://sprunge.us/ieJL
[16:42:03] <obk> Look at the documentation of the extra::arc package
[16:43:51] *** Joins: Mowah (Mowah@moz-436C35C5.cust.bredbandsbolaget.se)
[16:45:25] <dandy> is there a way to cast between two identical structs without copying data?
[16:45:59] <dandy> struct A {a:T,b:T} struct B {a:T,b:T}
[16:46:22] <dandy> like if a fn needs a B but I have an A
[16:46:38] <obk> Safely, or with unsafe code?
[16:46:43] <engla> kimundi: have you considered putting the dynamic typing into an issue in github, so it can be tracked as a potential feature?
[16:46:45] <dandy> safely would be ideal
[16:47:00] <obk> I doubt that would be possible...
[16:47:24] <dandy> I woner if LLVM would figure it out
[16:47:43] <dandy> if it isnt used anymore and the data was moved over there, maybe just use the existing data?
[16:48:00] *** Joins: doener (doener@moz-4D6ABE63.unitymediagroup.de)
[16:48:16] <obk> That would mean casting the type from A to B - don't see that can be done safely...
[16:48:19] <doener> what's the replacement for printfln!()?
[16:48:33] <doomlord_> whats the situation where you want to cast between identical casts (coming from C.. i have done all sorts in the past.. :) )
[16:48:35] <engla> dandy: compile it and look at the output?
[16:48:52] <dandy> engla, takes sooo much time, was hoping this was already well understood
[16:49:30] <engla> is it already well understood why you have two identical structures instead of them being the same type? :)
[16:49:40] <dandy> well... it goes back to C#
[16:49:52] <dandy> I have Vector and Point as different types because they have different meaning
[16:49:55] <engla> ok.. a simple test shouldn't take that long to compile
[16:50:09] <doomlord_> ah i was about to ask, something that might have come from inheritance..
[16:50:20] <engla> oh you should represent your points as vectors
[16:50:24] <doomlord_> Point : Vector3
[16:50:30] <dandy> I have overloading in C# on constructors so when creating a segment it behavs different with two points than with a point and vector
[16:50:51] <doomlord_> can it be re-expressed as traits
[16:51:02] <doomlord_> a trait for a Point, a trait for a Vector3
[16:51:21] <dandy> if the only implementing types implement both whats the point
[16:51:42] <dandy> because a CoordinatePair would fill the role of either trait
[16:51:57] <doener> ah, it's println! again
[16:52:14] <doomlord_> i've not tried this myself yet.. differentiating point and vector
[16:52:17] <doomlord_> in rust
[16:52:48] <dandy> well its kind of pointless in rust because overloading does not seem to be a thing
[16:53:12] <doomlord_> i thikn you can do anything overloading can with traits, but it can sometimes be more boilerplate
[16:53:25] <doomlord_> you have to do something like "double-dispatch" to overload using multiple parameters
[16:53:32] <doomlord_> if i've understood correctly
[16:54:49] <doomlord_> point and vector traits might sound like overkill , but maybe the ability to store types like 2d coordinates with an implied z=0 and so on would have uses...or x,y,z in different precisions 
[16:55:54] <doomlord_> ability to wrap a d3d compressed normal (11:11:10 bits of x,y,z in a 32bit word) .. that sort of thing
[16:56:07] <dandy> maybe
[16:56:25] <dandy> I guess within inlining the trait would act as a pretty efficient bridge
[16:56:37] <doomlord_> i get the impression traits could express this sort of thing well, but it might be more boilerplate for the basic cases
[16:56:56] *** Joins: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl)
[16:57:05] <doomlord_> coming from C++ one expects efficient inlining , maybe we take it for granted
[16:57:59] <doomlord_> maybe you could think of point and vector as x,y,z with implicit w=1 or w=0
[16:58:15] <dandy> I don't like going into that territory
[16:58:31] <dandy> if its xyz its xyz
[16:59:03] <dandy> I would rather have a specific method to mul a vector3 by a matrix4
[16:59:07] <dandy> fn*
[16:59:18] <engla> dandy: generic code doesn't have any overhead
[16:59:22] <dandy> broken -> http://smallcultfollowing.com/babysteps/
[16:59:28] *** Quits: obk (Mibbit@moz-E977B938.red.bezeqint.net) (Quit: http://www.mibbit.com ajax IRC Client)
[16:59:37] <dandy> engla, whats that mean in this context?
[16:59:54] *** Quits: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net) (Ping timeout)
[16:59:57] <dandy> oh you mean like having a get_w()
[17:00:02] <dandy> thats a high level opinion of mine
[17:00:04] <engla> I didn't know if this was about performance > I guess within inlining the trait would act as a pretty efficient bridge
[17:00:31] <dandy> engla, oh that comment, yeah, performance is also important
[17:00:50] <dandy> inlining is not something I take for granted
[17:01:01] <dandy> I have to get VERY lucky to get inlining on the CRL
[17:01:03] <dandy> CLR*
[17:01:40] *** Joins: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net)
[17:02:01] <dandy> that would be like two or three callvirts for me so inlining is something I have to be reminded of
[17:02:42] <engla> trait method calls don't compile to virtual calls
[17:02:46] <engla> but to normal function calls
[17:02:52] <engla> unless you use a trait object
[17:02:55] <dandy> yeah, thats awesome
[17:03:28] *** Quits: mikezaby (mikezaby@moz-908EA8DE.home.otenet.gr) (Input/output error)
[17:03:40] <engla> so inlining is just a matter of the compiler's decision. and you can use #[inline] to up the priority
[17:03:58] <dandy> im not often smarter than the compiler
[17:04:46] <saati> this is strange, if i use comm::Chan/Port my code works, with ChanOne/PortOne it's cannot move out of dereference of & pointer
[17:05:09] <bjz_> dandy doomlord_: I do point and vector as different
[17:05:25] <engla> saati: the method signatures are different
[17:05:45] <engla> saati: the chanone is consumed when used!
[17:05:47] <dandy> bjz_, how do you bridge them? if ever?
[17:05:50] <Toussa> Hi guys, is it possible to tell me why this is not compiling http://mibpaste.com/oNT4Za 
[17:06:10] <bjz_> dandy: what do you mean?
[17:06:14] <saati> engla: thanks
[17:06:20] <dandy> sometimes (not often) I have a vector when I need a point
[17:06:20] <saati> now i understand what's going on
[17:06:35] <dandy> bjz, and without overloaded fns what is the point?
[17:06:42] <Toussa> I have a TcpListener, i call listen() on it, but tells me that the listener does have listen method implemented
[17:06:53] <bjz_> dandy: https://github.com/bjz/cgmath-rs/blob/master/src/cgmath/point.rs
[17:07:10] <dandy> I look at your code a lot actually!
[17:07:16] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[17:07:17] <doomlord_> can anyone confirm/deny - double dispach through traits can emulate overloading on the types of 2 parameters
[17:07:19] <bjz_> dandy: I could have an as_point fn
[17:07:22] <dandy> I'm more curious as to why you have a seperate point and vector
[17:07:49] <dandy> I have it in C# because of the overload resolution, but as I translate it over to rust I don't really see the need
[17:08:04] <bjz_> dandy: different semantic meaning
[17:08:20] <dandy> right but you can't really distinguish that by type
[17:08:23] <engla> bjz_: what is the semantic difference?
[17:08:28] <doomlord_> subtract a point from a point, get a vector .. etc
[17:08:42] <dandy> a vector shoots out of (0.,0) and a point is a dot relative to (0,0)
[17:09:37] <dandy> bjz_, struct Segment {}; impl Segment { fn new_from_vector(a:Point,b:Vector){} fn new(a:Point,b:Point){} }
[17:09:40] <bjz_> http://people.eecs.ku.edu/~miller/Courses/VectorGeometry/Spaces.html
[17:10:21] <dandy> I already had to specify the difference in the fn name
[17:10:44] <bjz_> dandy: isn't the first one a ray?
[17:10:53] <dandy> not for a segment
[17:11:03] <dandy> and for a line I would still have a constructor that takes a vector
[17:11:12] <jmgrosen> Toussa: what version of Rust are you on?
[17:11:13] <dandy> the infinite length is implied
[17:11:44] <dandy> my ray definition is a point and a direction vector too, just as a line is
[17:11:51] <Toussa> jmgrosen: im on v0.8
[17:12:17] <dandy> I guess having overloaded constructors is "bad" maybe
[17:12:22] <jmgrosen> Toussa: what's the error? (as I don't have a copy of 0.8 around)
[17:12:39] <dandy> and if you need to make a ray given two points, you have to subtract for the vector anyway, so just be explicit about it
[17:12:43] *** Quits: fyolnish (fyolnish@moz-7911B04A.uqwimax.jp) (Ping timeout)
[17:12:46] <Toussa> jmgrosen: 19:26 error: type `std::rt::io::net::tcp::TcpListener` does not implement any method in scope named `listen`
[17:12:52] <dandy> let r = Ray::new(a, b-a)
[17:13:06] *** Joins: fyolnish (fyolnish@moz-7911B04A.uqwimax.jp)
[17:13:16] <bjz_> dandy: yeah, it's a tricky problem
[17:13:26] <dandy> I think I will keep point seperate
[17:13:33] <dandy> I can use macros to make it less painful
[17:13:33] <doomlord_> i do start missing c++ overloading :)
[17:13:39] <jmgrosen> Toussa: you need `use std::rt::io::Listener;`
[17:13:44] <doomlord_> ray(point,point)  ... ray(point,vector)  ..
[17:13:45] <Toussa> a ok
[17:13:57] <kimundi> engla: I'm currently investigating whether I can outright use it to enable fail! ing with arbitrary data
[17:14:15] <Toussa> jmgrosen: a ok, because the name declaration of listen is in this mod right? 
[17:14:16] <dandy> doomlord_, but what I am rubber ducking about is that the ray(point,point) really is just doing ray(point,vector) after some subtraction
[17:14:29] <dandy> so just do the subtraction
[17:14:33] *** Quits: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin_)
[17:14:50] <jmgrosen> Toussa: it's because `listen` is a method on the trait `Listener`, which you hadn't put in the current scope yet
[17:15:02] <dandy> so is overloading a maybe in 2.0 thing or is overloading considered bad?
[17:15:14] <bjz_> dandy: you could have a: #[inline] fn as_vec<'a>(&'a self) -> &'a V {} method if you want to hack around the types
[17:15:19] <doomlord_> spoilt by c++ .. write out the  subtraction once in an overloaded constructor :)
[17:15:23] <Toussa> doomlord_: i read somewehre that by implementing traits Add, Sub etc in std::ops does the same as operator overloading
[17:15:44] <dandy> bjz_, I was going to test that and look at the ASM but I am too lazy, have you already figured that out for me? :)
[17:15:59] <Toussa> jmgrosen: ok indeed, thanks a lot
[17:16:36] <bjz_> dandy: well Rust uses type classes. type classes were first implemented in haskell (I think?) as a way of 'principled' function overloading
[17:16:48] *** Quits: lfox (larryfox@moz-B8648F0F.nycmny.fios.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[17:17:02] <jmgrosen> could someone help me implement something like http://gary.beagledreams.com/page/go-websocket-chat.html in rust? I have the actual websockets working, but I'm not sure how to model the ports/chans and such
[17:17:04] <dandy> bjz_, I think in the interest of safety I should stick with point and vector, because Ray::new(coord1,coord2) ... the user may have mistakenly used a vector when they needed a point
[17:17:18] <dandy> That is the number one reason in my opinion, because us humans are stupid
[17:17:18] <doomlord_> i gather haskell has 'multiple parameter typeclasses' aswell
[17:17:18] <bjz_> dandy: I don't know if that means the designers of rust are against free-for-all overloading, but that's the feeling I get
[17:17:22] <engla> kimundi: interesting. I guess it has to be Send ?
[17:17:39] <bjz_> dandy: yup
[17:17:58] <bjz_> dandy: I haven't tested the asm because I too am lazy :)
[17:18:06] <dandy> darn
[17:18:19] <bjz_> dandy: I should though
[17:18:27] <dandy> yes you should ;)
[17:18:45] <doomlord_> some say named functions are clearer than overloads.. but its hard to think of catchy meaningful names all the time
[17:19:04] <kimundi> engla: Hm... Good question, I'm not sure how well the dynamic typing thing works with trait bounds
[17:19:06] <dandy> doomlord_, stupid hooman brains
[17:19:17] <bjz_> doomlord_: makes generic code hard
[17:19:20] <doomlord_> Ray::new_through_points(a,b)    Ray::new_along_vec(a,b-a)
[17:19:26] <bjz_> doomlord_: without overloads
[17:19:44] <doomlord_> true , overloads are essential for generics, but what about this case - overloaded Ray::new
[17:19:45] <dandy> doomlord_, or I can do Ray::new(a,d) and Ray::new(a,b-a)
[17:19:46] <engla> kimundi: I tested ~Any: but it seems there are rustc bugs
[17:19:47] <kimundi> engla: Though... It would just be a ~Any:Send, so it might just work or not work depending on type
[17:19:55] <kimundi> engla: Where?
[17:20:27] <bjz_> dandy: has my code been of any use btw?
[17:20:45] <dandy> bjz_, A WHOLE BUTT TON
[17:20:51] <bjz_> hah
[17:21:18] <doomlord_> i'm probably quite lazy, i like the fact in C++ overloading saves work naming.. the type system does the lookup. but its a double edge sword
[17:21:37] <engla> kimundi: not sure, just finding crashes in the compiled program when using ~Any:  
[17:21:38] <dandy> bjz_, mainly for macro stuff
[17:21:47] <bjz_> dandy: be thankful I battled through all the ICEs with generics at the end of last year
[17:21:56] <kimundi> engla: Hm.
[17:22:01] <bjz_> :)
[17:22:20] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[17:22:20] <engla> kimundi: I don't have it saved, I just gave up on ~Any without bounds
[17:22:30] <dandy> I really want stupid macros or smart AST macros that can produce multiple items
[17:23:01] <kimundi> dandy: We really need a fix for the latter, yeah
[17:23:06] <bjz_> dandy: :( https://github.com/mozilla/rust/issues/4375
[17:23:22] <dandy> bjz_, Yeah, i just don't know enough to try to fix it
[17:23:52] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[17:24:14] <bjz_> me neither
[17:24:33] <doomlord_> interesting to see the use of Option in vector maths
[17:24:52] <dandy> ?
[17:25:18] <doomlord_> in bjzs' library, eg plane::from_points() ->Option<Plane>  .. if its degenerate, None
[17:25:26] <dandy> oh right
[17:25:33] <dandy> thats going to be awesome!
[17:25:42] <dandy> in my C# stuff I have a special invalid Vector/Point
[17:25:52] <dandy> and... its not good
[17:25:56] <bjz_> heh
[17:26:13] <bjz_> the good thing is that Option comes with lots of nice stuff
[17:26:20] <dandy> Double.NaN is not a solution, instead saying "Hey, no answer here" would be much better
[17:26:28] <bjz_> which can make your code more readble
[17:26:30] *** Parts: mjh563 (mjh563@moz-D891C5B8.cable.virginmedia.com) ()
[17:26:54] <doomlord_> i wonder if there's potential for rust to have optimizations for float Nans in None, just like it has null ptr None sometimes
[17:27:06] <kimundi> Yeah, stuff like "init().and_then(process).and_then(cleanup);"
[17:27:23] <bjz_> dunno, I don't think so doomlord_
[17:27:28] <kimundi> doomlord_: Definitvly
[17:27:34] <dandy> doomlord_, I don't think so, there is more than one NaN I think and that would be super confusing as NaN is a "value"
[17:27:40] <bjz_> yah
[17:28:01] <dandy> the null case is cool because null is not a valid value but I could set something to NaN
[17:28:02] <kimundi> Hm, I've heard NaN packing as a possibleity a few time befor though?
[17:28:08] <doomlord_> Result<Float,Error> then .. :)
[17:28:27] <dandy> that said, I should NOT set something to NaN and instead use option ... but I could
[17:28:39] <kimundi> Like, a Either<f64, u32> could be 64 bits because a f64 NaN has > 32 free bits
[17:28:40] <myname> technically, NaN is supposed to contain information
[17:28:48] *** Joins: jedisct1 (Mibbit@2069A2AA.9B80AA7B.3464FAC3.IP)
[17:28:55] <dandy> kimundi, if NaN is not a valid value that I can assign it is fine, but I think I can assign that value?
[17:28:57] <myname> you have 21 bits to fill with whatever you like
[17:29:21] <kimundi> dandy: There are literally billions different bitpattern that correspond to NaN
[17:29:42] <dandy> kimundi, are there any that can be reserved as not assignable?
[17:29:47] <kimundi> dandy: Only, like, three bits are relavant to convey all informations relevant
[17:29:55] *** jorendorff_away is now known as jorendorff
[17:30:14] <kimundi> dandy: SUre, there are enough to fitt whole other types like u32 in there if its a f64
[17:30:30] <dandy> okay, that could be cool for f64
[17:30:45] <dandy> is there a way to supply a None case for custom types like Vector2<f64> ?
[17:30:49] <myname> u16 if it's a f32
[17:31:06] *** Quits: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca) (Connection reset by peer)
[17:31:46] *** Quits: a__ (a__@moz-4CC03B10.nycmny.fios.verizon.net) (Ping timeout)
[17:31:57] <bjz_> dandy: Result?
[17:32:18] <bjz_> dandy: Result<Vector<T>, ~str>
[17:32:23] <dandy> if I can have an invalid Vector2<f64> the option for it could be the size of two f64s
[17:32:36] *** Quits: _Y_ (Mibbit@moz-EF16AE88.dynamic.isp.telekom.rs) (Ping timeout)
[17:32:42] <engla> dandy: if an Option<f64> special case is implemented. I don't know if it can be done
[17:32:43] <dandy> bjz_, what?
[17:32:56] <engla> dandy: Option<char> is proposed, because char only uses 21 bits
[17:32:56] <doomlord_> r.e. vector maths libraries: seems many people like to implement them, would there be sense in splitting the declarations of underlying structs from the modules implementing all the operations
[17:33:08] <dandy> doomlord_, Its a good starting point
[17:33:17] <doomlord_> .. then its less to refactor if you want 2 peoples code to interact
[17:33:37] <doomlord_> its easier to agree on Vec3<T> etc than it is to agree on every detail and convention of their use
[17:33:41] *** Joins: CarpNet (Alasdair@moz-EF831A5E.cable.virginmedia.com)
[17:33:53] <engla> doomlord_: that's a nice idea
[17:34:03] <dandy> yeah that would be great for interop
[17:34:06] <doomlord_> this very issue is why i've come to rust :)
[17:34:30] <saati> a heap closure is an owned closure right?
[17:34:42] *** Joins: ross (ross@moz-5EA04060.br.br.cox.net)
[17:34:54] <bjz_> saati: yah
[17:35:36] <doomlord_> imagine a module like "geomtypes" or whatever
[17:36:00] <dandy> doomlord_, I wonder if it would be better to share traits than structs though
[17:36:11] <dandy> wouldn't want to dictate implementation to people
[17:36:30] <dandy> like you were saying before with a trait for point and vector
[17:36:38] <doomlord_> maybe both then
[17:36:41] <dandy> I could use a d3d half type or something
[17:37:42] *** Quits: jedisct1 (Mibbit@2069A2AA.9B80AA7B.3464FAC3.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[17:37:44] <dandy> a struct for a point or vector is one thing, but defining the struct for a polygon for me... get off my property!
[17:38:00] *** Joins: rusti (rusti@7EA5F9ED.C1499D0.396E4C6D.IP)
[17:38:06] <doomlord_> there's a sliding scale of how easy these things are to agree on :)
[17:38:46] <dandy> also there are people out there who may not like Point and Vector being different, having that in a common library would be something to think about too
[17:39:10] <dandy> but if it is trait based they can make their non-hoomin proof CoordinatePair implement both traits
[17:39:45] <dandy> I think this belongs in #rust-gamedev
[17:40:34] <doomlord_> presumaly servo has coordinate use
[17:40:49] <dandy> yeah, would be awesome if the traits were shared
[17:40:58] <dandy> some structs even
[17:41:22] <doomlord_> one type i like is Extents<T> for AABB ... eg Extents<Vec2<int>> for rect region on screen, Extents<Vec3<f32>> for bouding cuboid
[17:41:50] <dandy> go to #rust-gamedev
[17:41:50] <doomlord_> struct Extents<T> { T: min, T: max }
[17:42:16] <doomlord_> didn't know it existed :)
[17:42:45] <kimundi> I think a lot of the pain goes away with knowing that you can get efficient, inlinable conversions from one type to the other if you need to
[17:42:47] *** Quits: doublec (doublec@moz-4DA4FA7C.cd.pn) (Ping timeout)
[17:43:03] <kimundi> vec_a.to_vec_b()
[17:43:21] <kimundi> No that nice, but at least just as efficient
[17:47:23] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[17:50:26] *** Quits: mib_u6pzll (Mibbit@moz-FCF1ABDB.icpnet.pl) (Quit: http://www.mibbit.com ajax IRC Client)
[17:50:47] *** Quits: threecreepio (jdp@moz-9C11F46E.cust.bredbandsbolaget.se) (Ping timeout)
[17:51:21] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[17:53:01] *** Quits: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net) (Ping timeout)
[17:54:21] *** Quits: igas (igas@DAB32F37.84602E91.3126E16B.IP) (Quit: )
[17:54:30] *** Joins: a__ (a__@moz-4CC03B10.nycmny.fios.verizon.net)
[17:58:03] <kimundi> How do I spawn a task and give it a specific name? And are there unit tests that test that somewhere?
[17:59:05] *** Joins: threecreepio (jdp@moz-9C11F46E.cust.bredbandsbolaget.se)
[17:59:51] <Eridius> kimundi: isn't it something like `let mut t = task::task(); t.name(~"great name bro"); do t.spawn { ... }
[17:59:54] <Eridius> `
[18:00:07] *** Joins: mikezaby (mikezaby@moz-908EA8DE.home.otenet.gr)
[18:02:48] *** Quits: SteveMcQwark (steven099@moz-7CFCF343.cpe.net.cable.rogers.com) (Input/output error)
[18:04:55] <kimundi> Eridius: Thanks! :)
[18:05:15] *** Quits: msingle (Thunderbir@moz-1A29E89B.nrflva.fios.verizon.net) (Ping timeout)
[18:11:03] <benh> How does syntax extension expansion interacts with spans in the ast?
[18:11:29] <benh> Do synthesized ast nodes have a reasonable span? Do the spans of ast nodes corresponding to actual source text change?
[18:13:49] <engla> benh: the spans for println! seem ok: http://sprunge.us/TREf 
[18:14:31] *** Joins: ceninan (ceninan@moz-6BD43586.a370.priv.bahnhof.se)
[18:14:55] <benh> That's consistent with them not being changed since the quoted line hasn't been expanded I guess
[18:15:01] <Eridius> benh: syntax extensions need to specify the span to use on synthesized ast nodes
[18:15:05] <Eridius> they typically take it from whatever they're expanding
[18:15:19] <benh> right, hm
[18:15:41] <Eridius> but in theory a node synthesized based on an argument could have the span of the entire syntax ext, if the author is being lazy
[18:15:47] *** Joins: doublec (doublec@moz-4DA4FA7C.cd.pn)
[18:16:00] <benh> Eridius: I'm thinking about trying to get around of storing in the ast whether a given string literal was a raw string literal by making the prettyprinter look it up in the source
[18:16:38] <benh> it looks like pre-macro-expansion pretty-printing already kinda does that and then goes and indexes a list of literals re-tokenized out of the source
[18:17:06] <Eridius> maybe post-macro-expansion pretty-printing should just always print regular strings, for now?
[18:17:24] <Eridius> honestly, trying to pretty-print something that's not just a reorganization of the source file's tokens doesn't seem very, well, pretty
[18:19:19] <benh> I don't have that strong an opinion really, looks like there's some differences of opinions ;)
[18:19:43] <benh> post-macro-expansion pretty-printing only seems really useful as a debugging thing, I guess
[18:20:51] <Eridius> yes, but as a debugging thing it doesn't really matter what the string literal is
[18:20:55] <benh> yeah
[18:21:22] <benh> hm, maybe that's why pretty-printed comments are so misplaced, they aren't in the ast so it's probably doing something weird...
[18:23:24] *** Quits: doublec (doublec@moz-4DA4FA7C.cd.pn) (Ping timeout)
[18:29:50] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[18:30:17] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[18:32:03] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Ping timeout)
[18:33:11] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[18:34:17] <Toussa> I have question that might sound dumb but u* is a primitive type right? i have this - unresolved name `u8` -
[18:34:28] <Toussa> u8*
[18:34:35] <cmr> Yes
[18:34:45] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[18:35:00] <Toussa> then why the compiler canot resolve u8 name
[18:35:10] <cmr> Show code
[18:35:12] <kimundi> Toussa: In what context are you reffering to u8 ?
[18:35:23] <Toussa> kimundi: let mut buffer = [u8, ..std::rt::io::DEFAULT_BUF_SIZE];
[18:35:32] <kimundi> ah
[18:35:37] <cmr> Toussa: You're trying to use a typename as a value in a fixed-length vector constructor.
[18:35:39] <kimundi> that is not a type, that's an expression
[18:35:52] <kimundi> It looks for a static or local variable named u8#
[18:36:07] <kimundi> let mut buffer = [0u8, ..std::rt::io::DEFAULT_BUF_SIZE];
[18:36:08] <Toussa> ah
[18:36:10] <Toussa> a ok
[18:36:16] <Toussa> thanks a lot
[18:36:21] <kimundi> let mut buffer: [u8, ..std::rt::io::DEFAULT_BUF_SIZE] = [0u8, ..std::rt::io::DEFAULT_BUF_SIZE];
[18:36:33] <Toussa> a lot of tricky stuff to figure out
[18:36:35] <Toussa> XD
[18:36:41] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[18:36:42] <Toussa> thanks for sharing
[18:36:42] <kimundi> yeah :p
[18:38:15] *** Joins: riley (riley@moz-E40BCEED.hsd1.ca.comcast.net)
[18:40:31] <jeaye> Are there any Rust regex libs yet?
[18:40:49] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: Leaving.)
[18:42:48] *** Joins: rumpler (Mibbit@moz-BF5FB1FF.klient.poruba.net)
[18:43:15] <kmc> i haven't seen any. bindings to http://code.google.com/p/re2/ would be cool
[18:43:22] <Eridius> jeaye: I think someone announced bindings to pcre recently
[18:43:30] *** Quits: rumpler (Mibbit@moz-BF5FB1FF.klient.poruba.net) (Quit: http://www.mibbit.com ajax IRC Client)
[18:43:36] <Eridius> https://github.com/cadencemarseille/rust-pcre
[18:43:58] <kmc> I worked on Haskell RE2 bindings long ago, which could be useful because it involved wrapping the C++ API in C https://github.com/kmcallister/haskell-re2
[18:44:24] <jeaye> Ah, thanks.
[18:44:43] <kmc> RE2 is really really fast; it's the regex engine that powered Google Code Search and more recently http://livegrep.com
[18:46:03] *** Joins: Ms2ger (Ms2ger@moz-AA7C460.adsl-static.isp.belgacom.be)
[18:46:17] <jeaye> After reading a char from an io::Reader, is there any way to "unread" it?
[18:46:19] <Eridius> kmc: is it as fast as PCRE? I thought the point of RE2 was to eliminate the possibility of pathological cases, at the cost of no backreferences and slower speed
[18:46:29] <kmc> Eridius: I'm not sure
[18:50:55] *** Quits: rusti (rusti@7EA5F9ED.C1499D0.396E4C6D.IP) (Ping timeout)
[18:52:19] *** Joins: rusti (rusti@7EA5F9ED.C1499D0.396E4C6D.IP)
[18:52:40] <jason_> i've got a mod that used to declare a struct and impl, which i'd like to replace with a typedef to a more generic type. i tried pub type Thing = Generic<Thingy>; but now code that does use mod::Thing; <-- this line works, but when they do Thing::new that fails
[18:52:43] *** Quits: Ms2ger (Ms2ger@moz-AA7C460.adsl-static.isp.belgacom.be) (Ping timeout)
[18:52:53] <jason_> (hope that made sense)
[18:53:23] <jason_> the failure is unresolved type Thing
[18:53:30] *** Quits: doener (doener@moz-4D6ABE63.unitymediagroup.de) (Quit: leaving)
[18:53:32] <jason_> 'unresolved name'
[18:54:11] <engla> Eridius: it seems to be close in performance in the comparisons I can find
[18:55:01] *** Joins: lmandel (lmandel@7EA5F9ED.C1499D0.396E4C6D.IP)
[18:56:42] <Toussa> If i want to have some kind of shared vector, where one task can mutate it, and another one just read it, in which way should i store this as ~[~T] in the mutate task, and a &[~T] in the readind task?
[18:57:12] <Toussa> or it is a bit odd logic there
[18:57:33] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[18:57:58] <Toussa> (PS: tell me if you need more concrete example)
[18:58:08] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: Leaving.)
[18:58:48] <mcpherrin> You cant share either of thise types between tasks
[18:59:09] <Toussa> i was sure of something like that =/
[18:59:12] <mcpherrin> Look at ARC if you want to share
[18:59:19] <jason_> i think this was my problem: https://github.com/mozilla/rust/issues/5635
[18:59:23] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[18:59:30] <Toussa> yeah but ARC is immutable data
[18:59:35] <jason_> type alias don't carry over to static functions :(
[18:59:54] <Toussa> and the problem is i store mutable struct(TcpStream) inside
[19:00:50] <Toussa> i try to do a IRC server, with one task per client, one task to handle incoming connection, and one task to dispatch to all client stream the messages
[19:01:10] *** Joins: Ms2ger (Ms2ger@moz-AA7C460.adsl-static.isp.belgacom.be)
[19:01:24] <Toussa> but i can't find a proper way of mixing everything together
[19:01:31] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[19:02:29] *** Quits: mikezaby (mikezaby@moz-908EA8DE.home.otenet.gr) (Input/output error)
[19:02:44] *** Joins: sw17ch (sw17ch@moz-4C51FB4A.tmodns.net)
[19:03:31] *** Quits: lmandel (lmandel@7EA5F9ED.C1499D0.396E4C6D.IP) (Quit: lmandel)
[19:03:49] *** Quits: nkoep (nik@moz-3EC48374.vpn.rwth-aachen.de) (Ping timeout)
[19:04:10] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Ping timeout)
[19:07:20] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[19:07:48] <kimundi> jason_: Yeah, type aliases are weird, because they are _only type_ aliases
[19:08:00] <kimundi> They don'T act a s a namespace to import/export from
[19:08:11] *** Quits: novabyte (novabyte@898960B3.5067EE56.B0C1FFA1.IP) (Quit: Leaving.)
[19:08:14] <benh> "only aliases within the type namespace" is maybe clearer
[19:08:31] <kimundi> (Which I think is very confusing)
[19:09:18] <kmc> Toussa: there's RWArc
[19:09:46] <kimundi> Imo 'use' and 'type' could be combined
[19:10:24] <engla> use can rename types, but type can specify type parameters
[19:10:26] <kmc> Toussa: but why do you need to share a TcpStream? can't the client task handle its own socket and communicate via Rust message passing?
[19:10:34] <kimundi> importing things into local scope, while optionally renaming them and/or setting/reshuffling type parameters
[19:11:15] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Ping timeout)
[19:11:25] *** Joins: msingle (Thunderbir@moz-1A29E89B.nrflva.fios.verizon.net)
[19:11:31] <kimundi> use MyResult<T> = Result<T, MyErr<T>>;
[19:12:01] <benh> like c++?
[19:12:13] <kimundi> No idea about C++ in that regard
[19:12:15] *** jorendorff is now known as jorendorff_away
[19:12:59] <Toussa> kmc: yep thats right, im thinking too complex. the part where im comfused, is where i have to dispatch the receiving message to all other client
[19:13:05] <jason_> kimundi: this makes refactoring a huge pain. i have to write wrapper classes just to alias a type :(
[19:13:06] <SiegeLord> rusti: '\"'
[19:13:24] *** Quits: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net) (Ping timeout)
[19:14:05] <kimundi> All I know is that we have a module system with a canonical module tree and two overlapping ways to create links between nodes
[19:14:06] *** Quits: rusti (rusti@7EA5F9ED.C1499D0.396E4C6D.IP) (Ping timeout)
[19:15:00] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[19:15:45] <kimundi> use MyVec = math::vec<f32>; let null: MyVec = Zero::zero(); // would solve a lot of pain right now
[19:17:42] *** Joins: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net)
[19:19:28] *** Quits: sw17ch (sw17ch@moz-4C51FB4A.tmodns.net) (Ping timeout)
[19:19:46] <jason_> kimundi: i guess i could define a trait as my "stub" instead of an actual impl, that might work
[19:19:56] *** Joins: sw17ch (sw17ch@moz-4C51FB4A.tmodns.net)
[19:19:57] <jason_> thats probably the "rusty" way
[19:20:26] <thewonderidiot> what's the current status of rustpkg? "rustpkg install" doesn't appear to do anything and I'm having trouble getting it to build something that uses a library
[19:21:53] *** Quits: sw17ch (sw17ch@moz-4C51FB4A.tmodns.net) (Ping timeout)
[19:23:12] *** Joins: nkoep (nik@moz-4E6B366A.pool.mediaways.net)
[19:25:49] *** Quits: fread2281 (zcarterc@moz-CB181B42.dia.static.qwest.net) (Ping timeout)
[19:26:28] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[19:28:41] <kmc> Haskell type aliases also allow you to reshuffle type parameters, at least in GHC
[19:29:27] <kmc> Toussa: probably you'd have some data structure within the dispatching task representing all the clients, with a Chan for each
[19:31:47] *** jorendorff_away is now known as jorendorff
[19:31:50] <Toussa> Yes, i think its the best Solution. like have a struct Client, with a TcpStream, a chan a a port
[19:32:03] *** Joins: eatkinson (eatkinson@35CAEE01.D3C94E1C.3FFBE50F.IP)
[19:32:42] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[19:32:56] *** Quits: victorporof (victorporo@35F65A40.E0F96B01.D111398B.IP) (Quit: victorporof)
[19:32:57] <Toussa> kmc: indeed thanks a lot, i start to have some idea, i don't know wht i havent thought about data structure
[19:35:06] <kmc> cool :)
[19:35:23] *** Quits: nkoep (nik@moz-4E6B366A.pool.mediaways.net) (Ping timeout)
[19:35:53] <kmc> the most used collections in Rust are vectors and HashMap / HashSet
[19:35:53] *** Joins: maik (maik@moz-A3335658.dip0.t-ipconnect.de)
[19:36:26] <Toussa> ok
[19:36:45] <Toussa> HashSet? is it a set... with Keys?
[19:36:56] <cmr> It's a HashMap<T, ()>
[19:37:02] <Toussa> a ok
[19:37:09] <cmr> you can test for containment and iterate over its values.
[19:37:19] <Toussa> ok
[19:37:42] <Toussa> like a normal set, but why Hash? is it related to its implemention?
[19:37:44] <engla> and set operations too
[19:38:08] <engla> Toussa: yes. and it requires the elements to be hashable
[19:38:26] *** Joins: sw17ch (sw17ch@moz-4C51FB4A.tmodns.net)
[19:38:28] <Boreeas> Is there an assign-compare-increment loop structure in rust, or do I need to use while?
[19:38:36] <Toussa> engla: A ok
[19:38:42] <kmc> Boreeas: typically we'd use iterators
[19:38:53] <Toussa> engla: thanks for the info
[19:38:56] <kmc> for i in range(0, 10) { ... }
[19:39:05] *** Quits: schubidu25 (schubidu25@moz-FAE37203.superkabel.de) (Client exited)
[19:39:08] <Boreeas> kmc: Thanks, that's what I was looking for
[19:39:44] *** Joins: fread2281 (zcarterc@moz-CB181B42.dia.static.qwest.net)
[19:40:48] *** Quits: sw17ch (sw17ch@moz-4C51FB4A.tmodns.net) (Quit: sw17ch)
[19:41:07] <engla> Toussa: the extra::treemap module has a TreeSet implementation, which is an ordered set and requires the elements to impl TotalOrd
[19:43:00] *** Joins: orshem (orshem@94E07E96.588A166C.E3D28531.IP)
[19:43:14] <Toussa> engla: ok looks like a lot of time on the documentation is needed :D
[19:44:24] *** Quits: Jackneill (Jackneill@moz-1DE1965A.pool.digikabel.hu) (Input/output error)
[19:45:19] *** Joins: sw17ch (sw17ch@moz-4C51FB4A.tmodns.net)
[19:48:26] <kmc> has anyone started implementing hash tries for Rust?
[19:50:06] <kmc> they have hashtable-like performance but they also support an efficient pure-functional update operation, meaning you get a new map rather than modifying in place
[19:50:51] *** Joins: nkoep (nik@moz-D259823E.vpn.rwth-aachen.de)
[19:50:54] <kmc> or you could say they are like hashtables that support a cheap snapshot operation, which is good for concurrency
[19:51:05] *** Joins: azita (Azita@moz-98E2DA09.client.stsn.net)
[19:51:09] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Client exited)
[19:51:17] <kmc> but we'd have to refcount the nodes or rely on the (currently nonexistent) garbage collector, which might kill performance
[19:52:48] <myname> what's the problem i
[19:52:55] <myname> wwith refcounting?
[19:53:53] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Ping timeout)
[19:54:19] <kmc> it makes the nodes bigger by one word, and if you want them to be shareable (which is a large part of the benefit, I think) then you have to use atomic instructions, which have a cost
[19:54:23] *** jorendorff is now known as jorendorff_away
[19:55:39] <cmr> also the overhead of refcounting itself.
[19:55:47] *** Joins: jordyd (jordyd@moz-B5D9F630.seg42.ucf.edu)
[19:55:47] <kmc> *and* it'll prevent sharing of those cache lines because you keep writing to them
[19:56:02] <cmr> (that overhead is mostly codesize)
[19:57:07] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[19:57:56] <thewonderidiot> ...so "rustpkg install github.com/steveklabnik/hello" works if I do it in a subdirectory of /tmp, but not if I do it in a subdirectory of /home
[19:58:35] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[19:59:36] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[20:00:10] <thewonderidiot> any ideas what might be going on there? It's all on one filesystem
[20:00:38] <cmr> thewonderidiot: remote package fetching is broken
[20:01:27] <thewonderidiot> ah, okay. Interesting mode of failure, hehe
[20:01:42] <cmr> It should spit out an error about cannot find package
[20:01:48] <thewonderidiot> it does
[20:02:00] <thewonderidiot> I was just intrigued by it actually succeeding when I tried to do it in /tmp
[20:02:10] *** Joins: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net)
[20:02:26] <cmr> whoa holy crap
[20:02:31] <cmr> why is this working in /tmp
[20:02:39] <thewonderidiot> hahaha, I have no idea
[20:02:44] <myname> hahaha
[20:02:48] <cmr> O_o
[20:02:49] *** Quits: msingle (Thunderbir@moz-1A29E89B.nrflva.fios.verizon.net) (Ping timeout)
[20:05:17] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[20:05:39] *** Quits: eatkinson (eatkinson@35CAEE01.D3C94E1C.3FFBE50F.IP) (Ping timeout)
[20:07:43] <jmgrosen> Toussa: did you get your multiple tasks with a TcpStream and such worked out? if so, I'd be /very/ interested to hear, as I'm working on something similar
[20:08:14] <maik> if I have installed a lib via rustpkg like "rustpkg install somegitlink" and a new version just came out, how do I update my local lib? do I do "rustpkg install somegitlink" again?
[20:10:10] *** jorendorff_away is now known as jorendorff
[20:10:31] *** Joins: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP)
[20:10:44] <cmr> maik: you install the new version, somegitlink#2.0
[20:11:50] <cmr> Version is part of the package id
[20:12:10] *** Joins: lmandel (lmandel@7EA5F9ED.C1499D0.396E4C6D.IP)
[20:12:24] *** Joins: rusti (rusti@7EA5F9ED.C1499D0.396E4C6D.IP)
[20:12:27] <SiegeLord> Hmm, I'm glad we ended up with a very restricted delimeter set for raw strings... makes writing a lexer rather easy in scintilla
[20:12:34] *** Joins: strcat (strcat@7EA5F9ED.C1499D0.396E4C6D.IP)
[20:13:57] <maik> cmr, okay let's say I have two libs installed mylib1.0 and mylib2.0. And now I do extern mod mylib. which lib does rustc take? the one with the higher version?
[20:14:40] <Toussa> jmgrosen: so far, no good result
[20:15:03] <jmgrosen> Toussa: but do you sort of have an overarching idea that should work? that's where my problem lies
[20:15:08] *** Joins: Camhasard (Camhasard@75588CDB.6EB6F6AE.8CB695CE.IP)
[20:15:09] <cmr> maik: you should really be doing `extern mod mylob = "github.com/foo/mylib#2.0";`
[20:15:10] <Camhasard> Nouveau Chatroulette québécois 100% gratuit instantanné! Camhasard.com
[20:15:12] <kimundi> maik: Afaik unless you specify the right version in the extern mod line, it will fail with "multible matching names"
[20:15:12] *** Parts: Camhasard (Camhasard@75588CDB.6EB6F6AE.8CB695CE.IP) ()
[20:15:54] *** Quits: azita (Azita@moz-98E2DA09.client.stsn.net) (Quit: azita)
[20:16:01] <maik> ah okay thanks
[20:16:17] *** Quits: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net) (Ping timeout)
[20:17:39] *** Quits: lmandel (lmandel@7EA5F9ED.C1499D0.396E4C6D.IP) (Quit: lmandel)
[20:18:20] <Toussa> jmgrosen: well, i though of having the TcpStream in the task, and using message passing to communicate with eash other
[20:18:52] <jmgrosen> Toussa: yeah, that's what I'm trying to do, but I can't try to receive on both the TcpStream and a port at the same time
[20:19:01] <jmgrosen> I need something like select
[20:19:23] *** Joins: eatkinson (eatkinson@35CAEE01.D3C94E1C.3FFBE50F.IP)
[20:20:23] *** Quits: maik (maik@moz-A3335658.dip0.t-ipconnect.de) (Ping timeout)
[20:20:33] *** Joins: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net)
[20:20:43] <jmgrosen> kmc: do you know how to get around that problem? ^
[20:21:06] <kmc> we do have Select but I don't think it can do this just yet
[20:21:43] <jmgrosen> yeah, it can only select on Ports
[20:21:51] <kmc> workaround is to spawn one task for each event source and have them write into a common Chan
[20:22:25] <Toussa> yep
[20:22:30] <Toussa> thats what i though
[20:22:33] <jmgrosen> the problem with that is then how do you send something to the task with the TcpStream so that it can stream.write?
[20:23:14] <Toussa> TcpStream write will send data to the server/client
[20:23:27] <jmgrosen> yes
[20:24:02] <Toussa> i was thinking of have a controller that takes care of receiving and dispatching messages to tasks
[20:24:15] <jmgrosen> the task responsible for reading from the TcpStream then also has to be responsible for listening on a Chan in order to send on the TcpStream, which seems impossible
[20:24:21] <Toussa> and the task is send the received info to the steam
[20:24:51] <Toussa> thats my problem right now
[20:25:12] <jmgrosen> kmc: the task responsible for reading from the TcpStream then also has to be responsible for listening on a Chan in order to send on the TcpStream, which seems impossible; any thoughts?
[20:25:18] <Toussa> i dunno how to choose either TcpStream.read() or chan.recv()
[20:25:32] <Toussa> or port.recv() i dont remenber
[20:26:11] <kmc> jmgrosen: oh, sounds like the problem is that TcpStream isn't split into a send and a receive end, then?
[20:26:17] <jmgrosen> kmc: exactly
[20:26:18] *** Joins: sinma (sinma@moz-6A11C47C.fbx.proxad.net)
[20:26:25] <kmc> can you clone it?
[20:26:29] <sinma> hi, is it possible to call Rust code from C?
[20:26:46] <Toussa> kmc: you cant clone TcpStream
[20:26:47] <kmc> sinma: yeah, declare your rust function with extern "C" fn foo(...)
[20:27:03] <sinma> kmc: some doc on this feature?
[20:27:09] <kmc> sinma: unless you're calling from C code that was in turn called from a Rust task, the set of Rust features you can use is reduced
[20:27:16] <kmc> because the runtime won't have been initialized
[20:27:32] <kmc> so no @-boxes, no tasks or task failures
[20:27:38] <kmc> it's not well-supported yet
[20:27:44] <sinma> kmc: ok
[20:27:49] <kmc> but the Rust runtime is written in Rust which proves it is possible to do things in this subset
[20:28:13] <Toussa> anyway, i have to leave guys, thanks a lot for your help
[20:28:19] <Toussa> bye
[20:28:21] <kmc> sinma: I don't know of a great resource for it :/
[20:28:25] <sinma> kmc: that too bad for tasks
[20:28:26] <kmc> http://brson.github.io/2013/03/10/embedding-rust-in-ruby/ may be useful
[20:28:33] <kmc> but it's also out of date
[20:28:35] *** Quits: Toussa (Mibbit@moz-3717830C.adsl.alicedsl.de) (Quit: http://www.mibbit.com ajax IRC Client)
[20:28:40] <kmc> best to try it, see what breaks, and ask here, I guess :/
[20:28:50] * kmc gotta -> afk
[20:31:05] *** Joins: erickt (Adium@79611EE9.A51CB73B.6FBF6D51.IP)
[20:31:49] <orshem> when running a test binary is there an option to print how long each test took?
[20:32:08] <sinma> orshem: you mean make benchmarks?
[20:32:18] *** Joins: msingle (Thunderbir@moz-1A29E89B.nrflva.fios.verizon.net)
[20:32:26] <jmgrosen> kmc: any ideas of how to handle the TcpStream reading/writing while recv-ing on a chan?
[20:32:38] <orshem> sinma, nope
[20:33:00] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[20:33:03] <orshem> just general timing
[20:34:14] *** Quits: fread2281 (zcarterc@moz-CB181B42.dia.static.qwest.net) (Ping timeout)
[20:34:29] *** Joins: fread2281 (zcarterc@moz-CB181B42.dia.static.qwest.net)
[20:34:41] *** Quits: erickt (Adium@79611EE9.A51CB73B.6FBF6D51.IP) (Ping timeout)
[20:34:41] <orshem> anyway with benchmark you've  this problem: https://github.com/mozilla/rust/issues/9532
[20:35:12] *** Quits: rusti (rusti@7EA5F9ED.C1499D0.396E4C6D.IP) (Ping timeout)
[20:35:49] <orshem> but mostly i just want to know if a test takes longer than a given time range so i'll refactor/change/delete it
[20:35:58] *** Joins: erickt (Adium@79611EE9.A51CB73B.6FBF6D51.IP)
[20:36:04] <myname> that bug is hilarious
[20:36:50] *** Quits: strcat (strcat@7EA5F9ED.C1499D0.396E4C6D.IP) (Ping timeout)
[20:36:53] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[20:37:15] <kmc> jmgrosen: not offhand; we really do need Select
[20:37:24] <jmgrosen> ok :(
[20:38:07] *** Quits: orshem (orshem@94E07E96.588A166C.E3D28531.IP) (Quit: Leaving)
[20:38:53] *** Quits: sw17ch (sw17ch@moz-4C51FB4A.tmodns.net) (Ping timeout)
[20:38:55] <myname> sounds like "1 ms should be enough for every computational task in rust!"
[20:39:14] <sfackler> am I using externfn! wrong or is it messed up? https://gist.github.com/sfackler/6ab0ea6da0eb69b0e001
[20:41:09] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[20:41:22] *** Joins: maik (maik@moz-A3335658.dip0.t-ipconnect.de)
[20:41:42] *** Joins: steveklabnik (steveklabn@90E4D93F.93EC364C.1C63AAF3.IP)
[20:43:25] <acrichto> sfackler: that appears to be a bug with the macro definition (looking at it in syntax/ext/expand.rs
[20:43:44] *** Quits: steveklabnik (steveklabn@90E4D93F.93EC364C.1C63AAF3.IP) (Ping timeout)
[20:44:05] <acrichto> or wait, maybe I'm just not understanding this...
[20:46:23] *** Quits: Ms2ger (Ms2ger@moz-AA7C460.adsl-static.isp.belgacom.be) (Ping timeout)
[20:47:59] *** Joins: Ms2ger (Ms2ger@moz-AA7C460.adsl-static.isp.belgacom.be)
[20:48:56] <jmgrosen> it seems we have one more hopeful: http://blog.grok.se/2013/10/on-comparing-languages-c-and-go/ (see the end of the article)
[20:49:57] *** Quits: Ms2ger (Ms2ger@moz-AA7C460.adsl-static.isp.belgacom.be) (Ping timeout)
[20:51:28] *** Joins: Ms2ger (Ms2ger@moz-AA7C460.adsl-static.isp.belgacom.be)
[20:52:40] *** Quits: erickt (Adium@79611EE9.A51CB73B.6FBF6D51.IP) (Ping timeout)
[20:53:10] *** Joins: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl)
[20:53:53] *** Joins: erickt (Adium@79611EE9.A51CB73B.6FBF6D51.IP)
[20:56:36] *** Quits: maik (maik@moz-A3335658.dip0.t-ipconnect.de) (Ping timeout)
[20:57:42] <myname> well, better don't make crap out of it ;)
[20:59:23] *** Quits: tdc (santegoeds@moz-5892B7CA.range86-135.btcentralplus.com) (Ping timeout)
[21:00:58] *** Joins: steveklabnik (steveklabn@90E4D93F.93EC364C.1C63AAF3.IP)
[21:01:02] *** Joins: stevekla1nik (steveklabn@90E4D93F.93EC364C.1C63AAF3.IP)
[21:01:48] *** Quits: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP) (Quit: nn)
[21:03:08] *** Joins: carter (carter@moz-F3C2A2D8.nycmny.fios.verizon.net)
[21:04:39] *** Quits: erickt (Adium@79611EE9.A51CB73B.6FBF6D51.IP) (Ping timeout)
[21:05:26] <c74d> What is the proper way to, in a method of an impl of a struct type with a field with type Option<Foo>, match on that field and extract the Foo (if present), if Foo is a struct type with an owned pointer field?
[21:05:40] <c74d> What I currently have is:
[21:05:47] <c74d> rusti: struct Foo { x: ~int }    impl Foo { fn f(&self) { println(fmt!("%?", self.x)); } }    struct Bar { y: Option<Foo> }    impl Bar { fn f(&self) { match self.y { Some(foo) => foo.f(), None => {} } } }    let bar = Bar { y: Some(Foo { x: ~5 }) }; bar.f();
[21:06:14] *** Joins: nejucomo (Adium@moz-A1B9243C.static-ip.telepacific.net)
[21:06:31] <c74d> …Which would say something to the effect of <http://sprunge.us/MgKT>, were rusti present.
[21:06:40] <engla> c74d: use  Some(ref foo)  in the match
[21:08:11] <c74d> engla: Thanks, that seems to have worked. Is there a name for that that I could search to learn what exactly it does?
[21:09:22] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[21:09:28] <Eridius> c74d: it binds foo by-reference instead of by-value
[21:09:32] <Eridius> so foo is a &Foo
[21:10:46] *** Joins: rusti (rusti@7EA5F9ED.C1499D0.396E4C6D.IP)
[21:11:39] <c74d> Eridius: Thanks; found it.
[21:12:35] *** Quits: rusti (rusti@7EA5F9ED.C1499D0.396E4C6D.IP) (Ping timeout)
[21:14:03] *** Quits: heftig (heftig@moz-513A60DF.dip0.t-ipconnect.de) (Ping timeout)
[21:15:45] *** Joins: maik (maik@moz-A3335658.dip0.t-ipconnect.de)
[21:15:49] *** Quits: Houm (Houm@moz-25669AA8.fbx.proxad.net) (Ping timeout)
[21:16:40] *** Joins: canhtak (jeremy@moz-13BC3BC0.wl.t.ulaval.ca)
[21:17:10] *** Joins: brson (brson@72B1AFF8.AD1E507F.3688B332.IP)
[21:17:10] *** ChanServ sets mode: +ao brson brson
[21:18:22] *** Joins: Houm (Houm@moz-25669AA8.fbx.proxad.net)
[21:19:55] *** Quits: [squiddy] (squiddy@moz-2262CE3E.dynamic.cablesurf.de) (Connection reset by peer)
[21:20:24] *** Joins: [squiddy] (squiddy@moz-2262CE3E.dynamic.cablesurf.de)
[21:22:15] *** Quits: eatkinson (eatkinson@35CAEE01.D3C94E1C.3FFBE50F.IP) (Quit: eatkinson)
[21:22:19] *** Quits: msingle (Thunderbir@moz-1A29E89B.nrflva.fios.verizon.net) (Ping timeout)
[21:22:23] *** Quits: fyolnish (fyolnish@moz-7911B04A.uqwimax.jp) (Client exited)
[21:22:27] *** Joins: rusti (rusti@7EA5F9ED.C1499D0.396E4C6D.IP)
[21:22:29] *** Joins: heftig (heftig@moz-F09EE265.dip0.t-ipconnect.de)
[21:23:11] *** Joins: fyolnish (fyolnish@moz-7911B04A.uqwimax.jp)
[21:24:53] *** Quits: fyolnish (fyolnish@moz-7911B04A.uqwimax.jp) (Ping timeout)
[21:24:54] *** Joins: tikue3 (tikue_star@moz-424BC304.hsd1.pa.comcast.net)
[21:25:18] *** Quits: tikue3 (tikue_star@moz-424BC304.hsd1.pa.comcast.net) (Client exited)
[21:25:35] *** Joins: tikue_ (tikue_star@moz-424BC304.hsd1.pa.comcast.net)
[21:27:12] *** Quits: rusti (rusti@7EA5F9ED.C1499D0.396E4C6D.IP) (Connection reset by peer)
[21:27:26] *** Quits: Amaranth (travis@moz-F81BB56A.cpe.cableone.net) (Quit: Linkinus - http://linkinus.com)
[21:27:48] *** Quits: maik (maik@moz-A3335658.dip0.t-ipconnect.de) (Ping timeout)
[21:30:50] *** Joins: huseby (huseby@79611EE9.A51CB73B.6FBF6D51.IP)
[21:30:53] *** Joins: skade (skade@moz-79216CC4.dip0.t-ipconnect.de)
[21:40:03] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[21:41:50] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[21:45:31] *** Quits: ceninan (ceninan@moz-6BD43586.a370.priv.bahnhof.se) (Ping timeout)
[21:46:52] *** Quits: steveklabnik (steveklabn@90E4D93F.93EC364C.1C63AAF3.IP) (Ping timeout)
[21:46:52] *** Quits: stevekla1nik (steveklabn@90E4D93F.93EC364C.1C63AAF3.IP) (Ping timeout)
[21:47:24] <thewonderidiot> ah. so I've been trying to figure out why "rustpkg install" wasn't working for rustsqlite
[21:47:32] *** Quits: [squiddy] (squiddy@moz-2262CE3E.dynamic.cablesurf.de) (Quit: Leaving)
[21:48:10] <thewonderidiot> it looks like it gets upset when repository name != library name (the rustsqlite repository, when built, produces libsqlite.so) and silently fails
[21:48:20] *** Quits: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP) (Ping timeout)
[21:49:11] *** Quits: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP) (Ping timeout)
[21:50:15] *** Quits: io2 (io2@moz-A6202C16.home.otenet.gr) (Quit: )
[21:56:37] *** Joins: maik (maik@moz-A3335658.dip0.t-ipconnect.de)
[22:01:09] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[22:01:09] *** Quits: six600110 (six600110@moz-3C5CCD60.neo.res.rr.com) (Quit: Ex-Chat)
[22:01:58] *** Quits: carter (carter@moz-F3C2A2D8.nycmny.fios.verizon.net) (Quit: Textual IRC Client: www.textualapp.com)
[22:03:33] *** Joins: Amaranth (travis@moz-F81BB56A.cpe.cableone.net)
[22:08:36] *** Quits: simao (simao@moz-1B4B74CC.pools.arcor-ip.net) (Quit: ZNC - http://znc.in)
[22:10:06] <SiegeLord> Which syntax file would have the most recent list of Rust's keywords?
[22:12:03] *** Quits: Ms2ger (Ms2ger@moz-AA7C460.adsl-static.isp.belgacom.be) (Quit: nn)
[22:13:43] *** Quits: sinma (sinma@moz-6A11C47C.fbx.proxad.net) (Quit: Konversation terminated!)
[22:14:25] *** Quits: maik (maik@moz-A3335658.dip0.t-ipconnect.de) (Ping timeout)
[22:15:44] *** Quits: huseby (huseby@79611EE9.A51CB73B.6FBF6D51.IP) (Ping timeout)
[22:19:40] *** Quits: nkoep (nik@moz-D259823E.vpn.rwth-aachen.de) (Ping timeout)
[22:20:32] *** Quits: brson (brson@72B1AFF8.AD1E507F.3688B332.IP) (Quit: leaving)
[22:25:11] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[22:25:21] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[22:25:23] <cmr> SiegeLord: none of them I don't think ;(
[22:25:34] <cmr> We have reserved keywords that don't even show up in the magical keyword list in the interner
[22:25:42] <cmr> so I have no idea where to even find the canonical list of keywords.
[22:28:38] *** Joins: steveklabnik (steveklabn@moz-5EF6C37C.socal.res.rr.com)
[22:28:52] *** Joins: fyolnish (fyolnish@moz-7911B04A.uqwimax.jp)
[22:29:20] *** Quits: donri (donri@moz-9BB61102.tbcn.telia.com) (Client exited)
[22:30:34] *** Quits: fyolnish (fyolnish@moz-7911B04A.uqwimax.jp) (Ping timeout)
[22:30:46] *** Quits: nejucomo (Adium@moz-A1B9243C.static-ip.telepacific.net) (Quit: Leaving.)
[22:31:16] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[22:32:51] <aatch> SiegeLord, there is one, sort of
[22:33:03] <aatch> SiegeLord, in one of the lexing-related files
[22:33:49] *** Joins: stevekla1nik (steveklabn@moz-5EF6C37C.socal.res.rr.com)
[22:33:53] <aatch> SiegeLord, https://github.com/mozilla/rust/blob/master/src/libsyntax/parse/token.rs#L412
[22:34:05] <aatch> Though it also has things that aren't strictly keywords
[22:40:02] *** Joins: nkoep (nik@moz-4E6B366A.pool.mediaways.net)
[22:40:44] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[22:44:07] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[22:44:56] *** Joins: maik (maik@moz-A3335658.dip0.t-ipconnect.de)
[22:46:45] *** Quits: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin_)
[22:46:53] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[22:48:56] *** jorendorff is now known as jorendorff_away
[22:49:25] *** Joins: valenting (Thunderbir@25C03D3D.AF7D1A45.3462D341.IP)
[22:50:12] *** Joins: H4199 (chatzilla@25653362.1DD2AC9D.49CEED6B.IP)
[22:51:41] *** Joins: lmandel (lmandel@7EA5F9ED.C1499D0.396E4C6D.IP)
[22:51:48] *** Quits: maik (maik@moz-A3335658.dip0.t-ipconnect.de) (Ping timeout)
[22:52:13] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[22:52:30] *** Quits: lmandel (lmandel@7EA5F9ED.C1499D0.396E4C6D.IP) (Quit: lmandel)
[22:53:15] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[22:53:58] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[22:55:04] *** Joins: ercxx__ (ercan@moz-7CFF3469.dyn.optonline.net)
[22:56:13] *** Quits: jordyd (jordyd@moz-B5D9F630.seg42.ucf.edu) (Quit: Leaving)
[22:56:42] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[22:57:20] *** Joins: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl)
[22:59:09] *** jorendorff_away is now known as jorendorff
[22:59:16] *** Joins: Skif (emschwar@moz-4C5BB5A8.beyondbb.com)
[22:59:32] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.1)
[23:01:54] *** Quits: Skif (emschwar@moz-4C5BB5A8.beyondbb.com) (Ping timeout)
[23:03:01] *** Quits: valenting (Thunderbir@25C03D3D.AF7D1A45.3462D341.IP) (Quit: valenting)
[23:03:05] *** Joins: valenting (Thunderbir@25C03D3D.AF7D1A45.3462D341.IP)
[23:04:00] *** Joins: lmandel (lmandel@7EA5F9ED.C1499D0.396E4C6D.IP)
[23:05:24] *** Joins: cadence (Mibbit@moz-87503EC4.sub-70-209-0.myvzw.com)
[23:06:37] *** Quits: lmandel (lmandel@7EA5F9ED.C1499D0.396E4C6D.IP) (Ping timeout)
[23:06:45] *** Joins: Jesin (Jessin_@moz-6EF909D6.cc.lehigh.edu)
[23:06:46] *** Joins: lfox (larryfox@moz-B8648F0F.nycmny.fios.verizon.net)
[23:06:55] <cadence> How do I insert into a TreeMap if a given key is not in the map?
[23:07:30] <cadence> I get the error: cannot borrow `map` as mutable more than once at a time
[23:09:29] *** Quits: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin_)
[23:09:50] *** Quits: threecreepio (jdp@moz-9C11F46E.cust.bredbandsbolaget.se) (Ping timeout)
[23:12:24] *** jorendorff is now known as jorendorff_away
[23:15:01] *** Quits: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net) (Ping timeout)
[23:15:33] *** jorendorff_away is now known as jorendorff
[23:16:25] <nejucomo> cadence: That error is because the borrow checker uses only bindings to make decisions, currently, so change f(x, g(x)) to let y = g(x); f(x, y)
[23:16:35] <nejucomo> Does that help?
[23:16:59] *** Quits: lfox (larryfox@moz-B8648F0F.nycmny.fios.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[23:18:07] *** Joins: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net)
[23:19:03] <cadence> nejucomo: I am trying:  match name_table.find_mut(&name) { None => { name_table.insert(name, ~[n]); }, Some(n_vec) => { n_vec.push(n); } }
[23:19:23] <cadence> This is like a multimap.
[23:19:40] <cadence> If there isn't a vector for a `name` in the table already, then I want to insert one.
[23:20:52] <cadence> I found that I can do `if name_table.contains_key(&name) { /*...*/ } else { /*...*/ }`, but I would like to avoid a double lookup when there is already a vector for a given name.
[23:21:04] <nejucomo> Try doing: let x = name_table.find_mut(&name); match x { … }
[23:21:15] *** Joins: ofeldt (ofeldt@moz-7770065C.dip0.t-ipconnect.de)
[23:21:50] <nejucomo> I'm just guessing here, but the key point is that the borrow checker mainly looks at bindings and can't decouple multiple borrows in the same expression, AFAIK.
[23:22:04] *** Quits: ofeldt- (ofeldt@moz-1B301206.dip0.t-ipconnect.de) (Ping timeout)
[23:22:12] <cadence> I tried that, but I get the same error.
[23:23:27] *** Joins: doublec (doublec@moz-4DA4FA7C.cd.pn)
[23:24:42] <cadence> Same error if I use `if x.is_none() { /*...*/ }`
[23:25:11] *** Joins: Ke (jkarlson@moz-785A3407.org.aalto.fi)
[23:28:00] <SiegeLord> cadence: Some other person was having a similar issue, I think... this was his solution: https://gist.github.com/brianheylin/6815289
[23:29:19] *** Quits: CarpNet (Alasdair@moz-EF831A5E.cable.virginmedia.com) (Quit: Leaving)
[23:29:36] *** Joins: fyolnish (fyolnish@moz-659B8088.uqwimax.jp)
[23:30:11] *** Joins: Yeri (jasonjasmi@41C91A8A.CE609BA5.E39FBF79.IP)
[23:30:53] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[23:31:24] *** Quits: fyolnish (fyolnish@moz-659B8088.uqwimax.jp) (Ping timeout)
[23:31:33] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[23:32:47] *** Joins: jgilbert (jgilbert@79611EE9.A51CB73B.6FBF6D51.IP)
[23:32:58] <cadence> I am seeing: borrowed value does not live long enough
[23:33:02] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[23:33:29] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[23:33:37] <cadence> (for `name_table`)
[23:34:48] *** Quits: skade (skade@moz-79216CC4.dip0.t-ipconnect.de) (Quit: Textual IRC Client: www.textualapp.com)
[23:35:17] *** Joins: lfox (larryfox@moz-B8648F0F.nycmny.fios.verizon.net)
[23:35:25] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Ping timeout)
[23:36:04] *** Joins: jgilbert_ (jgilbert@79611EE9.A51CB73B.6FBF6D51.IP)
[23:36:27] *** Quits: jgilbert (jgilbert@79611EE9.A51CB73B.6FBF6D51.IP) (Ping timeout)
[23:39:05] *** Joins: threecreepio (jdp@moz-9C11F46E.cust.bredbandsbolaget.se)
[23:39:08] *** Quits: threecreepio (jdp@moz-9C11F46E.cust.bredbandsbolaget.se) (Quit: threecreepio)
[23:43:43] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[23:44:43] *** Quits: fran (fran@moz-62F5413A.telecom.net.ar) (Ping timeout)
[23:45:20] *** Quits: Jesin (Jessin_@moz-6EF909D6.cc.lehigh.edu) (Quit: Leaving)
[23:45:28] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[23:48:30] *** Joins: sinma (sinma@moz-6A11C47C.fbx.proxad.net)
[23:48:47] <sinma> how can I do a fork bomb in Rust?
[23:49:49] <cmr> sinma: same way you'd do it in C
[23:49:53] <tiffany> rusti: fn foo() {task::spawn(&foo);} foo()
[23:49:56] -rusti- pastebinned 11 lines of output: http://sprunge.us/acFV
[23:50:09] <cmr> spawn actually takes a ~foo
[23:50:11] <cmr> ~fn
[23:50:13] <tiffany> rusti: use std::task; fn foo() {task::spawn(~foo);} foo()
[23:50:14] -rusti- <anon>:7:46: 7:50 error: mismatched types: expected `~fn:Send()` but found `~extern "Rust" fn()` (expected fn but found ~-ptr)
[23:50:15] -rusti- <anon>:7          use std::task; fn foo() {task::spawn(~foo);} foo()
[23:50:15] -rusti-                                                        ^~~~
[23:50:15] -rusti- error: aborting due to previous error
[23:50:15] -rusti- application terminated with error code 101
[23:50:32] <sinma> Can I use the main function?
[23:50:55] <sinma> fn main() { do spawn { main(); } } ?
[23:51:15] <tiffany> rusti: main()
[23:51:16] -rusti- application terminated abnormally with signal 11 (Segmentation fault)
[23:51:23] <sinma> Or better: fn main() { loop { do spawn { main(); } } } ?
[23:51:23] <tiffany> that's an odd one
[23:51:40] <sinma> hey, a segfault discovery
[23:51:50] <sinma> awesome
[23:52:05] <cmr> ran out of stack
[23:52:09] *** Quits: timot (timot@moz-9EF21B1.cust.tele2.se) (Ping timeout)
[23:52:12] <cmr> we currently have no stack protection.
[23:52:17] <tiffany> ah, right
[23:52:39] <tiffany> rusti: do std::task::spawn || { main(); }
[23:52:40] -rusti- more than 10000 lines of output, bailing out
[23:52:42] <sinma> cmr: loop { do spawn {} } isn’t sufficient I presume
[23:52:45] <tiffany> o_o
[23:53:08] <sinma> xD
[23:53:21] <sinma> ideally, it must be simple
[23:53:42] <cmr> I didn't get more than 10k lines, I just got a rt assertion.
[23:53:59] <sinma> is loop { do spawn {} } working?
[23:54:00] <tiffany> perhaps rusti-the-bot inserts a println(""); into main()
[23:54:04] *** Quits: steveklabnik (steveklabn@moz-5EF6C37C.socal.res.rr.com) (Ping timeout)
[23:54:14] *** Quits: stevekla1nik (steveklabn@moz-5EF6C37C.socal.res.rr.com) (Ping timeout)
[23:54:38] <sinma> cause it do nothing, so it’s not effective I think
[23:55:07] <tiffany> sinma: it infinitely spawns new tasks that immediately exit
[23:55:11] <tiffany> so not really a fork bomb
[23:55:18] <tiffany> or much more useful than just loop {}
[23:55:22] <cmr> tiffany: oh yeah, it does
[23:55:24] <tiffany> rusti: loop {}
[23:55:26] -rusti- pastebinned 13 lines of output: http://sprunge.us/aGiO
[23:55:28] <cmr> the retval of the expr
[23:55:38] <tiffany> there we are
[23:55:49] <tiffany> that println is why my previous one made 10k lines
[23:56:02] <tiffany> rusti: loop {}; 4
[23:56:03] -rusti- pastebinned 16 lines of output: http://sprunge.us/GNjR
[23:56:23] <cmr> rusti is back!
[23:56:27] <cmr> rusti: loop { break; } 5
[23:56:28] -rusti- 5
[23:56:43] <tiffany> I like how rust can typecheck against infinite loops
[23:57:17] <sinma> tiffany: Java does too, but it’s an error => really annoying when you want to test something
[23:57:38] <sinma> oops, not typecheck
[23:58:32] *** Joins: jdm (jdm@37A83DB4.49EECAFD.30BE9F17.IP)
[23:58:32] *** ChanServ sets mode: +o jdm
[23:58:45] <tiffany> "damnit typechecker! stop thwarting my infinite loops!"
[23:59:36] <sinma> loop { do spawn { continue; } }
[23:59:41] <sinma> That’s better?
[23:59:51] <sinma> Oh no
[23:59:56] *** Joins: fyolnish (fyolnish@moz-DE8E2E8.uqwimax.jp)
