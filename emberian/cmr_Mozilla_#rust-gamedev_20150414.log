[00:00:29] *** Kingsquee is now known as Kingsquee_lunch
[00:00:43] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[00:01:13] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[00:07:07] *** Joins: kmcguire (kmcguire@moz-uqq.d7l.207.68.IP)
[00:07:15] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Ping timeout: 121 seconds)
[00:10:32] *** Quits: sambotron (sambotron@moz-lgc.bdf.247.173.IP) (Connection closed)
[00:18:17] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[00:22:40] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[00:23:37] <kvark> the V is alive :)
[00:25:03] <bvssvni> kvark: the V?
[00:25:51] <kvark> yep, the V got released a few ours ago
[00:25:58] <kvark> *hours
[00:26:10] <kvark> it even broke steam for a moment
[00:26:12] <cmr> congrats!
[00:30:09] <Layl> the amount of jiggerypokery they had to do to get that running on xbox 360 and ps3 must have been pure magic
[00:31:13] *** Quits: indefini (chris@moz-qefu0l.ocn.ne.jp) (Ping timeout: 121 seconds)
[00:31:41] *** Quits: davebettin_ (davebettin@moz-p6f.lde.71.208.IP) (Quit: Leaving)
[00:31:50] *** Joins: davebettin (davebettin@moz-p6f.lde.71.208.IP)
[00:33:36] *** Joins: dougxxx (dougxxx@moz-0js00c.iinet.net.au)
[00:40:57] *** Joins: tree (Mibbit@moz-3s9drc.sb.shawcable.net)
[00:41:51] *** Quits: davebettin (davebettin@moz-p6f.lde.71.208.IP) (Ping timeout: 121 seconds)
[00:42:29] <tree> Hey i'm haiving a problem with piston i followed the getting started and i'm getting a could not creat gl context error 
[00:43:00] <Layl> do you have a graphics card and are drivers installed?
[00:43:37] <tree> Yup i use openGL with java and i can create stuff with that
[00:44:44] <Layl> I don't know if piston has any minimum opengl verison requirement
[00:44:57] <Layl> could someone who is more familiar with piston take a look?
[00:45:53] <tree> I'm using 3.2 in the code
[00:45:58] <kvark> tree: what do you get?
[00:46:37] <tree> thread '<main>' panicked at 'called `Result::unwrap()` on an `Err` value: "Could  not create GL context: \u{f018}("', C:/bot/slave/nightly-dist-rustc-win-32/buil d/src/libcore\result.rs:768 An unknown error occurred
[00:46:42] <kvark> does your video card support GL-3.2?
[00:47:12] <kvark> you can see that in `glxinfo` output if you are on *nix
[00:50:38] <tree> I think it does not support gl-3.2 i should have thought of that lol
[00:51:22] <tree> GeForce 9600M GT
[00:52:07] <kvark> tree: you could try running gfx_examples/cube or some glium examples to get started
[00:53:29] <kvark> actually, wiki says you should be supporting GL-3.3 http://en.wikipedia.org/wiki/GeForce_9_series
[00:53:56] <tree> I set it to 3.0 and opened and than crashed
[00:54:25] <tree> i followed the spinning cube tut on github
[00:54:38] <kvark> no output?
[00:54:50] <kvark> where is that tutorial?
[00:56:13] <tree> https://github.com/PistonDevelopers/Piston-Tutorials/tree/master/getting-started
[00:57:36] *** Quits: stjahns (stjahns@moz-mbofdn.uws.ualberta.ca) (Connection closed)
[00:57:53] <tree> It just says unkown error with 3.0
[00:58:18] <kvark> same as with 3.2?
[00:58:30] <tree> No
[00:58:46] <kvark> post it here then
[00:59:12] <tree> thread '<main>' panicked at 'called `Result::unwrap()` on an `Err` value: "Could  not create GL context: \u{f018}("', C:/bot/slave/nightly-dist-rustc-win-32/buil d/src/libcore\result.rs:768 An unknown error occurred
[00:59:15] <tree> that
[00:59:19] <tree> with 3.2
[01:00:16] <tree> I think it might just be this laptop
[01:00:36] <kvark> so what are you getting with 3.0? or even 2.1?
[01:01:37] <tree> a window pops up then a crash and it just says unknown erro with 3.0 and 2.1
[01:01:56] <tree> no panic just crashes
[01:02:39] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[01:03:38] <kvark> try running this example - https://github.com/gfx-rs/gfx_examples/tree/master/src/cube
[01:04:39] <kvark> oh, are you on rust-beta or the nightly?
[01:05:39] <tree> nightly
[01:05:54] <kvark> ok, good
[01:10:40] <tree> could not find gfx_macros
[01:12:20] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[01:12:27] <kvark> wait, who couldn't find it?
[01:12:47] <kvark> gfx_examples are green on travis: https://travis-ci.org/gfx-rs/gfx_examples
[01:15:34] <tree> I'm lost lol i think i'll wait till i get my computer back before trying to figure this out more thanks for you help tho
[01:15:46] *** Joins: stjahns (stjahns@moz-9oh245.ed.shawcable.net)
[01:15:53] <kvark> tree: how are you building it?
[01:16:02] <tree> cargo build
[01:16:10] <kvark> just do "git clone XXX; cd XXX; cargo build"
[01:17:48] <kvark> you can see Travis is doing the same
[01:18:50] *** Joins: indefini (indefini@moz-4p4v25.ucom.ne.jp)
[01:19:11] <tree> Lol really i'll just wait for my computer i was just playing with rust seeing if i could make something its no biggy
[01:20:31] <kvark> tree: sure. It's just not only for you. Basically, you reported a bug, and I'm trying to figure out what's wrong with our code.
[01:23:30] *** Joins: stjahns_ (stjahns@moz-9oh245.ed.shawcable.net)
[01:26:40] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Connection closed)
[01:27:07] *** Quits: stjahns (stjahns@moz-9oh245.ed.shawcable.net) (Connection closed)
[01:27:48] *** Joins: stjahns (stjahns@moz-9oh245.ed.shawcable.net)
[01:28:05] *** Joins: pcwalton (pcwalton@moz-q9lhp9.rgd2.9kg1.0101.2620.IP)
[01:28:49] *** Quits: Lilly (Lilly@moz-ca683g.bredband.comhem.se) (Quit: bajs)
[01:31:51] *** Quits: stjahns (stjahns@moz-9oh245.ed.shawcable.net) (Ping timeout: 121 seconds)
[01:36:06] <bvssvni> kvark: I’ve added Gfx and Gfx2d to piston_window https://github.com/PistonDevelopers/piston_window/blob/master/examples/hello_piston.rs
[01:37:53] *** Joins: mindtree (Mitch@moz-34tvqf.iprimus.net.au)
[01:38:42] <HeroesGrave> I've been working on a library that some people here might find interesting
[01:39:04] <HeroesGrave> It's a windowing/input library that can abstract over both the window backend and graphics library frontend
[01:40:25] <HeroesGrave> The only problem I have with it at the moment is that it doesn't play with references
[01:40:47] <HeroesGrave> any lifetimes and it explodes
[01:41:16] <kvark> sorry, gtg
[01:41:21] *** Quits: kvark (Mibbit@moz-p3c.rcb.221.216.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[01:42:03] *** Joins: davebettin (davebettin@moz-ip635p.or.comcast.net)
[01:44:00] *** Quits: Layl (Layl@moz-65hqmf.direct-adsl.nl) (Quit: Leaving)
[01:45:13] *** Quits: davebettin (davebettin@moz-ip635p.or.comcast.net) (Connection closed)
[01:46:46] *** Quits: dmac (dmac@moz-h4nvlf.ca.comcast.net) (Ping timeout: 121 seconds)
[01:51:00] *** Quits: tcurdt (tcurdt@moz-bvuuhd.dip0.t-ipconnect.de) (Quit: Textual IRC Client: www.textualapp.com)
[01:59:56] *** Joins: summerlight (summerlight@moz-99k.2mj.130.121.IP)
[02:04:00] *** Joins: Guest74 (textual@moz-lmfinb.fios.verizon.net)
[02:08:24] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Quit: It's a joke, it's all a joke.)
[02:09:07] *** Quits: brson (brson@moz-cfhap5.mtv2.mozilla.com) (Quit: leaving)
[02:09:57] *** Quits: indefini (indefini@moz-4p4v25.ucom.ne.jp) (Quit: WeeChat 1.1.1)
[02:11:05] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[02:11:40] *** bvssvni is now known as bvssvni_
[02:12:05] *** Joins: oakwhiz_ (oakwhiz@moz-26tbpb.vc.shawcable.net)
[02:15:19] *** Quits: oakwhiz__ (oakwhiz@moz-26tbpb.vc.shawcable.net) (Ping timeout: 121 seconds)
[02:21:30] *** Quits: pcwalton (pcwalton@moz-q9lhp9.rgd2.9kg1.0101.2620.IP) (Client exited)
[02:31:46] *** Joins: Feyn (Feyn@moz-ccq.3q3.115.42.IP)
[02:32:24] *** Quits: fungos (quassel@moz-p1o.6pj.156.69.IP) (Connection closed)
[02:38:38] *** Quits: zz_kimundi (kimundi@moz-cie3b9.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[02:40:13] *** Joins: zz_kimundi (kimundi@moz-j9v5l3.dip0.t-ipconnect.de)
[02:40:15] *** zz_kimundi is now known as kimundi
[02:43:21] *** Quits: Guest74 (textual@moz-lmfinb.fios.verizon.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[02:46:05] <tree> I quit!
[02:46:11] *** Quits: tree (Mibbit@moz-3s9drc.sb.shawcable.net) (Quit: http://www.mibbit.com ajax IRC Client)
[02:46:27] *** Joins: stjahns (stjahns@moz-9oh245.ed.shawcable.net)
[02:50:57] *** Quits: stjahns (stjahns@moz-9oh245.ed.shawcable.net) (Connection closed)
[02:53:08] *** Joins: brson (brson@moz-nr3.c9m.56.172.IP)
[02:54:37] *** Joins: dmac (dmac@moz-2ig65r.ca.comcast.net)
[03:00:06] *** Quits: pct (Mibbit@moz-tpjl46.co.comcast.net) (Ping timeout: 121 seconds)
[03:02:56] *** Joins: pct (Mibbit@moz-tpjl46.co.comcast.net)
[03:06:49] *** Quits: oakwhiz_ (oakwhiz@moz-26tbpb.vc.shawcable.net) (Ping timeout: 121 seconds)
[03:08:27] *** Joins: Guest74 (textual@moz-lmfinb.fios.verizon.net)
[03:08:30] *** Quits: Guest74 (textual@moz-lmfinb.fios.verizon.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[03:08:32] *** Joins: indefini (indefini@moz-4p4v25.ucom.ne.jp)
[03:13:29] *** Joins: oakwhiz (oakwhiz@moz-26tbpb.vc.shawcable.net)
[03:18:05] *** Joins: oakwhiz_ (oakwhiz@moz-26tbpb.vc.shawcable.net)
[03:21:35] *** Quits: oakwhiz (oakwhiz@moz-26tbpb.vc.shawcable.net) (Ping timeout: 121 seconds)
[03:22:59] *** Joins: oakwhiz__ (oakwhiz@moz-26tbpb.vc.shawcable.net)
[03:25:38] *** Joins: sambotron (sambotron@moz-nao11s.ca.comcast.net)
[03:26:20] *** Quits: oakwhiz_ (oakwhiz@moz-26tbpb.vc.shawcable.net) (Ping timeout: 121 seconds)
[03:28:42] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[03:32:03] *** Quits: kmcguire (kmcguire@moz-uqq.d7l.207.68.IP) (Ping timeout: 121 seconds)
[03:33:24] *** Quits: stjahns_ (stjahns@moz-9oh245.ed.shawcable.net) (Connection closed)
[03:34:30] *** Joins: oakwhiz (oakwhiz@moz-26tbpb.vc.shawcable.net)
[03:34:36] *** Quits: kalail (uid62296@moz-5ck9vu.charlton.irccloud.com) (Quit: Connection closed for inactivity)
[03:35:50] *** Quits: oakwhiz__ (oakwhiz@moz-26tbpb.vc.shawcable.net) (Ping timeout: 121 seconds)
[03:35:53] *** Joins: csherratt (colin@moz-kif5fa.ut.comcast.net)
[03:38:11] *** Quits: Wild_Cat (Max@moz-860o3v.cpe.pppoe.ca) (Ping timeout: 121 seconds)
[03:39:13] *** Joins: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net)
[03:39:16] *** Quits: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net) (Client exited)
[03:46:35] *** Quits: dmac (dmac@moz-2ig65r.ca.comcast.net) (Ping timeout: 121 seconds)
[03:57:53] *** Quits: orangeshark (erik@moz-1174fa.44tj.56ot.0306.2602.IP) (Quit: Leaving)
[04:01:39] *** Joins: Guest59 (textual@moz-nhnoci.internode.on.net)
[04:01:48] *** Guest59 is now known as Ichiru
[04:01:56] *** Kingsquee_lunch is now known as Kingsquee
[04:01:57] <Ichiru> Hello!
[04:02:09] <Kingsquee> hi Ichiru
[04:02:25] <Ichiru> Is there a way to print an std::ffi::CStr?
[04:02:49] <Ichiru> It doesn't implement the Display trait, so I can't use it in println("{}",my_CStr);
[04:03:37] <Ichiru> Ah, nevermind
[04:03:41] <Ichiru> I didn't read the docs correctly
[04:04:20] *** Joins: davebettin (davebettin@moz-go5glo.bhak.dqhm.0007.2601.IP)
[04:07:30] <Ichiru> ...and apparently you can't use the libc crate in beta
[04:07:49] <Amaranth> There is a libc crate on crates.io
[04:08:29] *** Quits: davebettin (davebettin@moz-go5glo.bhak.dqhm.0007.2601.IP) (Ping timeout: 121 seconds)
[04:08:45] *** Joins: dmac (dmac@moz-2ig65r.ca.comcast.net)
[04:09:43] <Ichiru> note: this feature may not be used in the beta release channel
[04:09:52] <Ichiru> I'm guessing I should install rust-nightly?
[04:10:13] <Amaranth> Ichiru: Could have sworn the libc on crates.io worked on beta
[04:10:59] <Ichiru> oh
[04:11:06] <Ichiru> so use the crates.io libc instead
[04:11:11] <Amaranth> Yeah
[04:11:21] <Amaranth> Just add it to your Cargo.toml and change your imports
[04:19:57] *** Joins: tree (Mibbit@moz-3s9drc.sb.shawcable.net)
[04:22:21] *** Quits: alexggordon (alexggordon@moz-4q0f8f.cable.rcn.com) (Ping timeout: 121 seconds)
[04:22:59] *** Quits: tree (Mibbit@moz-3s9drc.sb.shawcable.net) (Quit: http://www.mibbit.com ajax IRC Client)
[04:27:11] <Ichiru> how do I cast an enum to an integer?
[04:27:15] <Ichiru> Apparently it's a non-scalar cast
[04:29:07] <Ichiru> actually it's a bitflags
[04:29:11] <Ichiru> So really it should cast
[04:41:20] *** Joins: stjahns (stjahns@moz-9oh245.ed.shawcable.net)
[04:48:26] <FreeFull> I have no idea what the stable way is
[04:55:52] <meteredsection> let bitflags = MyBitflag::Value;
[04:55:57] <meteredsection> let raw_value = bitflags.bits();
[05:06:44] *** Quits: guycook (quassel@moz-fhmdlh.snap.net.nz) (Connection closed)
[05:07:21] <HeroesGrave> Ichiru: If you still haven't found the answer, you need to put #[repr(i32)] or whatever on the enum declaration
[05:07:31] <HeroesGrave> Then you can do `foo as i32`
[05:07:37] <Ichiru> The answer was that I wasn't even using the right function x)
[05:07:57] <Ichiru> Now if only this wasn't empty: https://doc.rust-lang.org/book/references-and-borrowing.html
[05:09:40] <meteredsection> Ichiru: specific questions about it?
[05:10:13] <Ichiru> I don't understand lifetimes in general
[05:10:23] <Ichiru> I've got my
[05:10:39] *** Quits: oakwhiz (oakwhiz@moz-26tbpb.vc.shawcable.net) (Connection closed)
[05:10:41] <Ichiru> let game = Game::new(&window);
[05:11:06] <Ichiru> And to get it to compile I need to add a bunch of <'a> to my Game struct + impl
[05:11:14] <Ichiru> But I don't quite understand what 'a is
[05:12:39] <meteredsection> (I'm wading into dangerous territory and my answers may be imprecise enough to mess you up, but I'll try)
[05:13:20] <meteredsection> 'a basically just gives a name to a compiler-derived lifetime so you can talk about it and propagate it it through types
[05:14:21] *** Quits: bdero (bran@moz-216hqv.oo5r.e4su.0006.2601.IP) (Ping timeout: 121 seconds)
[05:14:44] <Ichiru> So my
[05:14:51] <Ichiru> &'a window would be something like
[05:15:05] <Ichiru> &(lasts for whole of main()) window
[05:15:17] <meteredsection> that's how I think about it, yes
[05:15:45] <HeroesGrave> Here's an analogy: Person A borrows something from Person B
[05:16:04] <HeroesGrave> Person B needs it for some special event
[05:16:13] <HeroesGrave> Person A has to give it back before that event
[05:16:43] <HeroesGrave> So Person A's usage of the item must finish before Person B needs it again
[05:17:13] <HeroesGrave> It's not a perfect analogy of what goes on, but it may help
[05:17:45] <Ichiru> Would I need a lifetime name added on
[05:18:16] <Ichiru> If I create a struct in a method and pass it on?
[05:18:25] *** Joins: jaen (jaen@moz-ifmik2.copit.pl)
[05:18:28] <HeroesGrave> No
[05:18:33] <meteredsection> as a reference to another function? no
[05:18:34] <HeroesGrave> You're passing it by value
[05:19:02] <Ichiru> Hm I may have phrased that wrong
[05:19:08] <HeroesGrave> well, as you can see it depend on whether it's by value or by reference
[05:19:24] <Ichiru> I've got my FileManipulator struct
[05:19:32] <Ichiru> I call FileManipulator::new
[05:19:41] *** Quits: csherratt (colin@moz-kif5fa.ut.comcast.net) (Connection closed)
[05:19:50] <Ichiru> and in that method some sort of File Handle is created and assigned to the struct
[05:20:07] <Ichiru> Do I need to do any lifetime stuff for that?
[05:20:23] <HeroesGrave> if the struct owns the filehandle, no
[05:20:37] *** Quits: Gamecubic (cubic@moz-qfrl13.mc.videotron.ca) (Quit: Leaving)
[05:20:39] <meteredsection> one answer is: the compiler will always tell you if you need to do lifetime stuff
[05:20:45] <Ichiru> ok
[05:20:53] <HeroesGrave> Yeah. Most of the time it's automatically inferred
[05:20:58] *** Quits: niconii (nicole@moz-isj0f9.frgo.qwest.net) (Quit: leaving)
[05:21:28] <Ichiru> And if I have a resource like an OpenGL texture
[05:21:31] <Ichiru> I can just free that in Drop?
[05:21:36] <meteredsection> basically, every reference has a lifetime, and you can be expilcit about it, but the compiler will insert the <'a> for you in cases where it's unambiguous and clear
[05:22:16] <meteredsection> yeah, if you're wrapping some external resource referred to by handle (or something unsafe like ptrs) then you should free them in drop
[05:22:49] <meteredsection> (and make sure you don't give anyone else the handle)
[05:24:32] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[05:29:07] <Ichiru> Are there any gl-rs examples around?
[05:31:35] <HeroesGrave> gl-rs is practically raw opengl bindings
[05:31:58] <Amaranth> I think the only substantial examples of gl-rs usage are gfx-rs, glium, and piston's opengl_graphics
[05:32:11] <Ichiru> I understand OpenGL
[05:32:16] <Ichiru> I'm just not too sure how it translates to Rust
[05:32:40] <HeroesGrave> Everything in OpenGL is functions and handles
[05:32:55] <Amaranth> If you don't need the texture anymore after whatever you're talking about goes out of scope then yes, you can destroy it in your Drop impl
[05:32:56] <HeroesGrave> You can do the same things in Rust
[05:33:06] <HeroesGrave> Whether they're safe or not is the question
[05:33:30] <Ichiru> As in I don't get how they're bound
[05:33:47] <Ichiru> gl::GenTextures(1, magicPointerThingHere);
[05:34:27] <HeroesGrave> let mut i = 0; gl::GenTextures(1, &mut i); assert!(i != 0)
[05:35:19] <Ichiru> oh
[05:37:11] *** Quits: brson (brson@moz-nr3.c9m.56.172.IP) (Quit: leaving)
[05:37:30] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Connection closed)
[05:39:37] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[05:41:53] *** Quits: O01eg (o01eg@moz-jje.5l5.112.37.IP) (Client exited)
[05:42:45] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[05:45:51] *** Joins: sillesta (sillesta@moz-501od2.business.telia.com)
[05:46:22] *** Joins: p1start (p1start@moz-nftjhe.org)
[05:48:03] *** Quits: pct (Mibbit@moz-tpjl46.co.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[05:57:40] *** Joins: James (quassel@moz-olnmts.range86-163.btcentralplus.com)
[05:58:08] *** Joins: skitoo (Thunderbird@moz-urd0va.fbx.proxad.net)
[06:04:55] <Ichiru> Hm
[06:05:10] <Ichiru> My rust-sdl2 + gl-rs combination isn't loading a lot of function pointers
[06:06:21] *** Joins: SneakySnake (nya@moz-i9is4u.pool.telekom.hu)
[06:10:11] *** Quits: skitoo (Thunderbird@moz-urd0va.fbx.proxad.net) (Ping timeout: 121 seconds)
[06:16:03] *** Quits: stjahns (stjahns@moz-9oh245.ed.shawcable.net) (Connection closed)
[06:16:24] *** Joins: stjahns (stjahns@moz-9oh245.ed.shawcable.net)
[06:16:51] *** Joins: stjahns_ (stjahns@moz-9oh245.ed.shawcable.net)
[06:16:51] *** Quits: stjahns (stjahns@moz-9oh245.ed.shawcable.net) (Connection closed)
[06:23:20] <Ichiru> So
[06:23:33] <Ichiru> If I load the pointers using gl::load_with
[06:23:34] <Ichiru> It fails
[06:23:40] <Ichiru> But if I load the pointer manually
[06:23:44] <Ichiru> It doesn't
[06:25:03] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[06:27:57] <tomaka> You're on windows?
[06:29:17] <Ichiru> OSX
[06:29:43] <Ichiru> Using  gl::load_with(|s| unsafe { std::mem::transmute(sdl2::video::gl_get_proc_address(s)) });
[06:29:59] <Ichiru> If I try to call gl::glTexParameteri it crashes
[06:30:24] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Quit: It's a joke, it's all a joke.)
[06:30:34] <tomaka> it panics?
[06:30:51] <Ichiru> Yes
[06:31:04] <Ichiru> thread '<main>' panicked at 'gl function was not loaded'
[06:33:23] <tomaka> Hum
[06:33:45] <tomaka> Could you `println!("{}", s)` within the closure and see if the names are correct?
[06:34:00] <tomaka> more specifically, check that they have the "gl" prefix
[06:34:13] <tomaka> I remember that we changed this, and maybe a bug slipped in
[06:35:36] <Ichiru> Yup
[06:35:42] *** Quits: James (quassel@moz-olnmts.range86-163.btcentralplus.com) (Ping timeout: 121 seconds)
[06:37:18] <tomaka> could you try "gl::TexParameteri::load_with(...the closure...)" and see if it also panicks?
[06:38:52] *** Joins: eerie (eerie@moz-njefna.red.bezeqint.net)
[06:39:28] <Ichiru> Oh
[06:39:51] <Ichiru> It's trying to load glTextureParameteri
[06:39:55] <Ichiru> But the function is glTexParameteri
[06:40:49] *** Quits: mithsv (mithsv@moz-gahb71.dynamic.caiway.nl) (Quit: )
[06:41:00] <Ichiru> Long story short: I'm calling the wrong function again
[06:41:14] <Ichiru> And the function I was trying to call isn't implemented on OSX
[06:42:34] *** Joins: og_wolf (og_wolf@moz-vdk621.adsl.tpnet.pl)
[06:42:52] <Ichiru> now that I've solved the user-error (me), is there a recommended way to load textures in rust?
[06:43:08] *** Quits: eerie (eerie@moz-njefna.red.bezeqint.net) (Ping timeout: 121 seconds)
[06:43:35] *** Joins: Tobba|Laptop (Tobba@moz-1hh.7ki.21.217.IP)
[06:45:25] <meteredsection> PistonDevelopers/image?
[06:46:16] *** Quits: Ichiru (textual@moz-nhnoci.internode.on.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[06:47:35] *** Joins: eerie (eerie@moz-njefna.red.bezeqint.net)
[06:50:50] *** Joins: squiddy (squiddy@moz-md4.pm3.19.178.IP)
[06:59:08] *** Quits: og_wolf (og_wolf@moz-vdk621.adsl.tpnet.pl) (Connection closed)
[07:00:24] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Client exited)
[07:04:32] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[07:07:50] *** Quits: sambotron (sambotron@moz-nao11s.ca.comcast.net) (Connection closed)
[07:08:11] *** Joins: sambotron (sambotron@moz-nao11s.ca.comcast.net)
[07:08:16] *** Joins: Guest59 (textual@moz-nhnoci.internode.on.net)
[07:09:00] *** Joins: eerie_ (eerie@moz-njefna.red.bezeqint.net)
[07:09:51] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Client exited)
[07:10:48] *** Joins: hhhhhhhhhh (mike@moz-969kuj.cable.virginm.net)
[07:12:13] *** Quits: eerie (eerie@moz-njefna.red.bezeqint.net) (Ping timeout: 121 seconds)
[07:12:14] *** Quits: sambotron (sambotron@moz-nao11s.ca.comcast.net) (Ping timeout: 121 seconds)
[07:15:38] <Guest59> Apparently neither std::io::Path or std::old_io::Path exist
[07:16:16] *** Guest59 is now known as Ichiru
[07:17:54] <tomaka> std::path::Path?
[07:21:06] <Ichiru> oh
[07:21:28] <Ichiru> The image documentation is a bit.. wrong?
[07:22:34] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[07:22:58] <Ichiru> the following trait is implemented but not in scope, perhaps add a `use` for it: -> use `image::image::GenericImage`
[07:23:04] * Ichiru adds the use
[07:23:11] <Ichiru> unresolved import `image::image::GenericImage`.
[07:23:14] <Ichiru> ?!
[07:29:46] *** Quits: hhhhhhhhhh (mike@moz-969kuj.cable.virginm.net) (Quit: WeeChat 1.1.1)
[07:30:34] *** Quits: indefini (indefini@moz-4p4v25.ucom.ne.jp) (Ping timeout: 121 seconds)
[07:30:56] *** Quits: Ichiru (textual@moz-nhnoci.internode.on.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[07:31:12] *** Joins: Guest59 (textual@moz-nhnoci.internode.on.net)
[07:31:17] *** Guest59 is now known as Ichiru
[07:31:27] *** Quits: AngelOfSol (AngelOfSol@moz-t8f.c3h.21.129.IP) (Quit: Remember to close the door when you're done!)
[07:39:02] *** Joins: eerie (eerie@moz-njefna.red.bezeqint.net)
[07:39:51] <Ichiru> apparently image::image::GenericImage doesn't exist
[07:39:59] <Ichiru> but rust wants me to 'use' it so I can use the trait methods
[07:40:39] *** Quits: stjahns_ (stjahns@moz-9oh245.ed.shawcable.net) (Connection closed)
[07:41:01] *** Joins: stjahns (stjahns@moz-9oh245.ed.shawcable.net)
[07:41:20] *** Joins: mithsv (mithsv@moz-upf.6am.89.145.IP)
[07:42:12] *** Quits: eerie_ (eerie@moz-njefna.red.bezeqint.net) (Ping timeout: 121 seconds)
[07:42:15] *** Joins: bjz (bjz@moz-4l6.mjm.52.113.IP)
[07:45:03] *** Quits: stjahns (stjahns@moz-9oh245.ed.shawcable.net) (Ping timeout: 121 seconds)
[07:45:37] *** Quits: mithsv (mithsv@moz-upf.6am.89.145.IP) (Quit: )
[07:47:35] <tomaka> image::image::GenericImage *does* exist
[07:47:49] <tomaka> you're probably doing something wrong in your import
[07:47:57] *** Joins: mithsv (mithsv@moz-upf.6am.89.145.IP)
[07:48:02] <tomaka> random guess: try `use self::image::image::GenericImage;`
[07:48:47] *** Quits: Tobba|Laptop (Tobba@moz-1hh.7ki.21.217.IP) (Ping timeout: 121 seconds)
[07:52:24] *** Joins: jensnockert (jensnockert@moz-0rd3rj.siw.siwnet.net)
[07:54:14] *** Joins: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se)
[07:55:01] *** Quits: bjz (bjz@moz-4l6.mjm.52.113.IP) (Ping timeout: 121 seconds)
[07:56:10] *** Quits: Ichiru (textual@moz-nhnoci.internode.on.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[07:56:29] <HeroesGrave> It could be that GenericImage is re-exported and the actual location is private
[07:58:45] *** Joins: Guest59 (textual@moz-nhnoci.internode.on.net)
[07:59:42] *** Quits: Guest59 (textual@moz-nhnoci.internode.on.net) (Quit: Textual IRC Client: www.textualapp.com)
[08:00:04] *** Joins: Guest59 (textual@moz-nhnoci.internode.on.net)
[08:00:09] *** Guest59 is now known as Ichiru
[08:01:10] <Ichiru> tomaka: self worked
[08:01:13] <Ichiru> But why does it work
[08:01:32] <HeroesGrave> Your extern crate must not be in the crate root
[08:01:39] <tomaka> WHen you write "use path;" the `path` is absolute
[08:01:50] <Ichiru> oh
[08:01:51] <tomaka> so "use image::image::GenericImage" looks for "image" in the root
[08:01:58] <HeroesGrave> Isn't it relative to the crate root?
[08:02:03] <HeroesGrave> not the actual root
[08:02:06] <Ichiru> So I don't need to re-define extern crates?
[08:02:12] <tomaka> what's the actual root?
[08:02:15] <HeroesGrave> ::
[08:02:24] <HeroesGrave> ::crate::something
[08:02:25] <tomaka> :: is the crate root too
[08:02:43] <tomaka> rusti: struct Foo; let a = ::Foo;
[08:02:44] -playbot- <anon>:9:29: 9:34 error: unresolved name `Foo`
[08:02:44] -playbot- <anon>:9         struct Foo; let a = ::Foo;
[08:02:44] -playbot- output truncated; full output at: http://bit.ly/1IZbQ26
[08:02:47] <tomaka> hmmm
[08:02:56] <tomaka> duh, I'm in main()
[08:03:05] <tomaka> rustilite: struct Foo; fn main() { let a = ::Foo; }
[08:03:06] -playbot-mini- <anon>:1:29: 1:30 warning: unused variable: `a`, #[warn(unused_variables)] on by default
[08:03:06] -playbot-mini- <anon>:1 struct Foo; fn main() { let a = ::Foo; }
[08:03:06] -playbot-mini-                                      ^
[08:03:11] <tomaka> works ^
[08:03:31] <HeroesGrave> I thought when you start with :: you have to have the crate name as well
[08:03:40] <HeroesGrave> Maybe it's only in `use`s
[08:03:56] <tomaka> No I'm pretty sure taht you don't need the crate name
[08:04:11] <tomaka> the reason for "::std" is because there's an implicit "extern crate std;" in your root
[08:04:30] <HeroesGrave> ah
[08:04:33] <HeroesGrave> that makes more sense
[08:05:02] <Ichiru> Lesson for today: extern does not work like #include
[08:05:26] <HeroesGrave> include!() works like #include
[08:05:35] <HeroesGrave> Not that I'm recommending to use it
[08:06:08] <tomaka> include! is useful when you generate Rust code during the compilation
[08:06:48] <Ichiru> Hm
[08:06:56] <Ichiru> I guess I could use include! to include shaders
[08:07:11] <tomaka> No, use include_bytes! or include_str!
[08:08:05] <tomaka> rusti: include_str!("/etc/passwd")
[08:08:07] -playbot- output truncated; full output at: http://bit.ly/1yq38d2
[08:08:20] <tomaka> hum, it actually worked
[08:08:26] <Ichiru> x)
[08:08:55] *** Quits: eerie (eerie@moz-njefna.red.bezeqint.net) (Connection closed)
[08:08:56] <Ichiru> rusti: include_str!("/etc/resolve.conf")
[08:08:56] -playbot- <anon>:9:9: 10:6 error: couldn't read /etc/resolve.conf: No such file or directory (os error 2)
[08:08:57] -playbot- <anon>:9         include_str!("/etc/resolve.conf")
[08:08:57] -playbot- output truncated; full output at: http://bit.ly/1IZczAb
[08:09:04] *** Joins: eerie (eerie@moz-njefna.red.bezeqint.net)
[08:09:31] <Ichiru> rusti: include_str!("/etc/hostname")
[08:09:31] -playbot- <anon>:9:9: 10:6 error: couldn't read /etc/hostname: No such file or directory (os error 2)
[08:09:32] -playbot- <anon>:9         include_str!("/etc/hostname")
[08:09:32] -playbot- output truncated; full output at: http://bit.ly/1yq3dNX
[08:09:40] <Ichiru> Apparently I can't access any file x)
[08:10:50] <Ichiru> So with mod
[08:10:59] <Ichiru> I just put those statements in the crate root
[08:12:23] <HeroesGrave> What happens if I try to include_str!("/dev/zero") or something?
[08:12:30] <HeroesGrave> With rusti
[08:12:45] <Ichiru> rusti: include_str!("/dev/zero")
[08:12:46] -playbot- <anon>:9:9: 10:6 error: couldn't read /dev/zero: No such file or directory (os error 2)
[08:12:46] -playbot- <anon>:9         include_str!("/dev/zero")
[08:12:46] -playbot- output truncated; full output at: http://bit.ly/1IZd5y1
[08:13:08] <tomaka> rusti: include!("/dev/zero")
[08:13:08] -playbot- <anon>:9:9: 10:6 error: couldn't read "/dev/zero": No such file or directory (os error 2)
[08:13:09] -playbot- <anon>:9         include!("/dev/zero")
[08:13:09] -playbot- output truncated; full output at: http://bit.ly/1yq3ws9
[08:13:26] <tomaka> rusti: include!("/dev/null")
[08:13:26] <HeroesGrave> I don't know why I'm expecting someone to have left all these security holes
[08:13:27] -playbot- <anon>:9:9: 10:6 error: couldn't read "/dev/null": Operation not permitted (os error 1)
[08:13:27] -playbot- <anon>:9         include!("/dev/null")
[08:13:27] -playbot- output truncated; full output at: http://bit.ly/1IZd8do
[08:13:39] <HeroesGrave> anyway, bye
[08:13:39] <Ichiru> They included /etc/passwd
[08:13:47] *** Parts: HeroesGrave (HeroesGrave@moz-8i4jup.vf.net.nz) ("Bye")
[08:14:17] <Ichiru> hm
[08:15:19] <Ichiru> I need to figure out how to get a pointer to some pixels from the image
[08:15:59] <Ichiru> I might need to copy them out
[08:16:03] *** Joins: og_wolf (og_wolf@moz-obu4ds.devs.futuro.pl)
[08:19:43] *** Joins: Tobba|Laptop (Tobba@moz-1hh.7ki.21.217.IP)
[08:21:25] <tomaka> You're doing this for learning purposes?
[08:21:34] <tomaka> because there are already good opengl wrappers available
[08:22:58] <Ichiru> yup
[08:31:42] *** Joins: ineol (ineol@moz-pdkvmd.fbx.proxad.net)
[08:33:45] *** Joins: bjz (bjz@moz-pl4g2k.tpgi.com.au)
[08:39:55] *** Quits: bjz (bjz@moz-pl4g2k.tpgi.com.au) (Quit: My Mac has gone to sleep. ZZZzzz…)
[08:48:46] *** Quits: mindtree (Mitch@moz-34tvqf.iprimus.net.au) (Ping timeout: 121 seconds)
[08:49:08] *** Joins: kmcguire (kmcguire@moz-pg1gb9.biz.rr.com)
[08:52:34] *** Joins: stjahns (stjahns@moz-9oh245.ed.shawcable.net)
[08:52:38] *** Quits: dougxxx (dougxxx@moz-0js00c.iinet.net.au) (Connection closed)
[08:52:55] *** Joins: mindtree (Mitch@moz-3gf834.iprimus.net.au)
[08:53:04] *** Quits: eerie (eerie@moz-njefna.red.bezeqint.net) (Connection closed)
[08:53:14] *** Quits: og_wolf (og_wolf@moz-obu4ds.devs.futuro.pl) (Connection closed)
[08:53:25] *** Joins: eerie (eerie@moz-njefna.red.bezeqint.net)
[08:53:53] *** Joins: og_wolf (og_wolf@moz-obu4ds.devs.futuro.pl)
[08:54:54] *** Joins: sambotron (sambotron@moz-nao11s.ca.comcast.net)
[08:57:27] *** Quits: eerie (eerie@moz-njefna.red.bezeqint.net) (Ping timeout: 121 seconds)
[08:58:57] *** Quits: sambotron (sambotron@moz-nao11s.ca.comcast.net) (Ping timeout: 121 seconds)
[09:00:05] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[09:02:41] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Client exited)
[09:02:50] *** Quits: stjahns (stjahns@moz-9oh245.ed.shawcable.net) (Connection closed)
[09:03:11] *** Joins: stjahns (stjahns@moz-9oh245.ed.shawcable.net)
[09:05:05] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[09:07:13] *** Quits: stjahns (stjahns@moz-9oh245.ed.shawcable.net) (Ping timeout: 121 seconds)
[09:12:03] *** Quits: fmtq (fmtq@moz-d08itp.tpgi.com.au) (Ping timeout: 121 seconds)
[09:13:43] *** Joins: fmtq (fmtq@moz-d08itp.tpgi.com.au)
[09:20:37] *** Joins: stjahns (stjahns@moz-9oh245.ed.shawcable.net)
[09:22:28] *** Quits: Ichiru (textual@moz-nhnoci.internode.on.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[09:22:53] *** Joins: Guest59 (textual@moz-nhnoci.internode.on.net)
[09:23:20] *** Quits: SneakySnake (nya@moz-i9is4u.pool.telekom.hu) (Quit: Leaving)
[09:25:07] *** Joins: tokamach (tom@moz-b2a.e67.25.176.IP)
[09:27:49] *** Quits: Guest59 (textual@moz-nhnoci.internode.on.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[09:28:01] *** Joins: Guest59 (textual@moz-nhnoci.internode.on.net)
[09:30:41] *** Quits: stjahns (stjahns@moz-9oh245.ed.shawcable.net) (Connection closed)
[09:31:02] *** Joins: stjahns (stjahns@moz-9oh245.ed.shawcable.net)
[09:33:54] *** Joins: stjahns_ (stjahns@moz-9oh245.ed.shawcable.net)
[09:35:04] *** Quits: stjahns (stjahns@moz-9oh245.ed.shawcable.net) (Ping timeout: 121 seconds)
[09:39:22] *** Joins: eerie (eerie@moz-njefna.red.bezeqint.net)
[09:39:44] *** Joins: eddyb (Mibbit@moz-2o5.mv7.25.188.IP)
[09:41:24] <eddyb> well, this is fun, I've reduced my layout problem to a constraint collection phase and a linear system solve phase
[09:42:09] <eddyb> (but it has inequalities, so I need to learn linear programming and I'll probably end up using the simplex algorithm
[09:42:28] <eddyb> )
[09:43:36] *** Quits: eerie (eerie@moz-njefna.red.bezeqint.net) (Ping timeout: 121 seconds)
[09:44:03] *** Quits: stjahns_ (stjahns@moz-9oh245.ed.shawcable.net) (Connection closed)
[09:44:15] <eddyb> I've heard "simplex" used before in here, but I think it had to do with the polytope, not the algorithm
[09:44:24] *** Joins: stjahns (stjahns@moz-9oh245.ed.shawcable.net)
[09:46:40] <eddyb> I'm not sure I need to whole thing... or whether I even have an objective function
[09:47:26] *** Joins: OmniMancer (OmniMancer@moz-6m1jrb.xtra.co.nz)
[09:48:22] *** Joins: eerie (eerie@moz-njefna.red.bezeqint.net)
[09:48:22] <eddyb> (hahaha I think I do.... I can have directionality! so variables that should grow get positive coefficients and variables that should shrink get negative ones)
[09:48:27] *** Quits: stjahns (stjahns@moz-9oh245.ed.shawcable.net) (Ping timeout: 121 seconds)
[09:49:11] <eddyb> (I should prune things like a.x2 = b.x1 because they are going to be quite common)
[09:51:21] *** Quits: og_wolf (og_wolf@moz-obu4ds.devs.futuro.pl) (Connection closed)
[09:51:36] *** Joins: og_wolf_ (og_wolf@moz-obu4ds.devs.futuro.pl)
[09:51:39] <eddyb> (ohhhh and I can use the value of the coefficients to do relative widths/heights. e.g. with html5's flex boxes, you can have |a| b | c| by assigning "weights" of 1, 3, 1 to a, b, c)
[09:52:28] *** Joins: bjz (bjz@moz-pl4g2k.tpgi.com.au)
[09:53:14] *** Quits: og_wolf_ (og_wolf@moz-obu4ds.devs.futuro.pl) (Connection closed)
[09:53:14] *** Joins: og_wolf (og_wolf@moz-obu4ds.devs.futuro.pl)
[09:53:28] *** Joins: aepsil0n (eduard@moz-6491ha.mv2h.pepi.8071.2a02.IP)
[09:54:43] <eddyb> I'm probably reinventing things like http://aucklandlayout.sourceforge.net/
[09:55:03] *** Joins: summerlight_ (summerlight@moz-99k.2mj.130.121.IP)
[09:57:01] <eddyb> 300us seems ridiculously much even for back then http://aucklandlayout.sourceforge.net/examples/index.html
[09:57:16] <eddyb> that's what you get for using a GC language, I guess
[09:57:47] *** Quits: og_wolf (og_wolf@moz-obu4ds.devs.futuro.pl) (Connection closed)
[09:57:53] *** Quits: summerlight (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[09:57:58] *** Joins: og_wolf (og_wolf@moz-obu4ds.devs.futuro.pl)
[09:58:19] <Guest59> eddyb: I bet a lot of that time is Win32
[09:58:26] *** Guest59 is now known as Ichiru
[09:58:37] <OmniMancer> eddyb: yay haiku
[09:59:21] <OmniMancer> I wonder how the equivalent in Haiku performs
[10:00:43] <eddyb> Ichiru: why? it's pure computation
[10:00:58] <eddyb> maybe lp_solve is overkill (and has associated overhead)
[10:01:14] <Ichiru> So the timings don't include the time to set the properties on the buttons?
[10:01:15] <Ichiru> ok
[10:01:17] *** Joins: nical (nical@moz-543qtb.2500.1rfi.0450.2001.IP)
[10:02:37] <eddyb> "slack variables" oh!
[10:03:54] <tokamach> "/ignore -channels #chan1,#chan2,#chan3 * JOINS PARTS QUITS NICKS"
[10:03:58] <tokamach> for gods sake
[10:05:29] *** Quits: Kingsquee (kingsley@moz-qq7ns6.bchsia.telus.net) (Quit: Konversation terminated!)
[10:08:46] *** Quits: jensnockert (jensnockert@moz-0rd3rj.siw.siwnet.net) (Connection closed)
[10:15:24] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Client exited)
[10:16:24] *** Joins: tcurdt (tcurdt@moz-bvuuhd.dip0.t-ipconnect.de)
[10:20:37] *** Quits: mithsv (mithsv@moz-upf.6am.89.145.IP) (Quit: )
[10:23:06] <eddyb> I think simplex is problematic, if I understand how it works. it's going to pick up extremes
[10:23:15] *** Joins: sambotron (sambotron@moz-nao11s.ca.comcast.net)
[10:27:18] *** Quits: sambotron (sambotron@moz-nao11s.ca.comcast.net) (Ping timeout: 121 seconds)
[10:27:24] *** Joins: SneakySnake (nya@moz-i9is4u.pool.telekom.hu)
[10:31:04] <OmniMancer> eddyb: what is your intended use for rust by the way?
[10:31:24] <eddyb> OmniMancer: take over the world
[10:31:34] <WindowsBunny> My intended use for Rust is to burn the world
[10:31:35] <eddyb> GC languages suck. unsafe languages suck
[10:31:49] <WindowsBunny> so when eddyb takes over the world, there'll be nothing worth taking over
[10:31:54] *** Joins: buzugu (baptiste@moz-co8.8nl.207.91.IP)
[10:32:08] <eddyb> if you disagree with that you tried to push either of them far enough :P
[10:32:18] <eddyb> another thing that sucks is needless verbosity
[10:32:55] <WindowsBunny> Rust strikes a nice balance between verbosity and conciseness
[10:33:02] *** Joins: edlothiol (user@moz-chhfor.hsi02.unitymediagroup.de)
[10:33:35] <OmniMancer> I wonder what is needed to allow storing an Arena and things that are allocated from that arena in the same struct
[10:33:51] <eddyb> OmniMancer: that's not how it works
[10:35:45] <OmniMancer> eddyb: I know it doesn't work now, but what exactly stops this specific case from working? aside from the blanket borrow checker rule?
[10:36:45] *** Joins: mithsv (mithsv@moz-upf.6am.89.145.IP)
[10:36:54] <OmniMancer> the only thing I can think of is destruction order
[10:38:16] <eddyb> the problem is that you'd have to lock the field
[10:38:56] <eddyb> and require boxing the whole structure
[10:39:05] <eddyb> which... I have a solution for! :P
[10:39:12] *** Quits: fmtq (fmtq@moz-d08itp.tpgi.com.au) (Ping timeout: 121 seconds)
[10:39:22] <eddyb> (a theoretical one. that can't be implemented in Rust 1.x because I was too late)
[10:39:45] <eddyb> OmniMancer: the problem is that if you can borrow something inside the arena, you can borrow the arena
[10:40:35] <eddyb> OmniMancer: and then you have to disallow moving the structure after it's first borrowed (i.e. when you start using the arena)
[10:41:19] *** Joins: fmtq (fmtq@moz-d08itp.tpgi.com.au)
[10:41:30] <eddyb> OmniMancer: internals.rust-lang.org/t/potential-solution-for-types-that-shouldnt-be-moved-like-staticmutex/1663/
[10:41:33] <eddyb> oooops
[10:41:39] <eddyb> OmniMancer: http://internals.rust-lang.org/t/potential-solution-for-types-that-shouldnt-be-moved-like-staticmutex/1663/
[10:42:51] *** Joins: skitoo (Thunderbird@moz-urd0va.fbx.proxad.net)
[10:43:16] <eddyb> OmniMancer: that thread is dead (I never finished my dive into applicability to circular links) but the idea (and variations upon it) might still work
[10:44:18] *** Joins: filsmick (filsmick@moz-s1ht48.abo.wanadoo.fr)
[10:52:10] *** Quits: mindtree (Mitch@moz-3gf834.iprimus.net.au) (Ping timeout: 121 seconds)
[10:52:36] *** Quits: mithsv (mithsv@moz-upf.6am.89.145.IP) (Quit: )
[10:55:26] <OmniMancer> eddyb: the arena need not actually contain the memory it allocates from so moving it could be safe?
[10:56:00] <OmniMancer> as long as nothing holds a direct reference to the arena only has lifetimes associated with it
[10:56:32] *** Quits: dmac (dmac@moz-2ig65r.ca.comcast.net) (Connection closed)
[10:56:38] *** Joins: jensnockert (jensnockert@moz-0rd3rj.siw.siwnet.net)
[10:57:14] *** Joins: jensnock_ (jensnockert@moz-0rd3rj.siw.siwnet.net)
[10:57:14] *** Quits: jensnockert (jensnockert@moz-0rd3rj.siw.siwnet.net) (Connection closed)
[10:57:30] *** Joins: dmac (dmac@moz-2ig65r.ca.comcast.net)
[10:58:45] *** Quits: tcurdt (tcurdt@moz-bvuuhd.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[10:59:20] *** Joins: tcurdt (tcurdt@moz-ubt.ek0.162.178.IP)
[11:01:10] *** Quits: buzugu (baptiste@moz-co8.8nl.207.91.IP) (Client exited)
[11:01:11] *** Quits: jensnock_ (jensnockert@moz-0rd3rj.siw.siwnet.net) (Connection closed)
[11:01:12] *** Joins: jensnockert (jensnockert@moz-0rd3rj.siw.siwnet.net)
[11:01:36] *** Quits: dmac (dmac@moz-2ig65r.ca.comcast.net) (Ping timeout: 121 seconds)
[11:01:40] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[11:03:37] <OmniMancer> eddyb: I guess the type system can't express that the reference returned from an Arena allocation does not observe the address of the arena object, only it's internal storage
[11:04:14] <OmniMancer> though I'd probably be happy enough even if you had to box such structures
[11:05:16] <eddyb> OmniMancer: you'd have to champion the trait part of that change, maybe there's some hope before 1.0
[11:06:14] <eddyb> OmniMancer: otherwise adding it later would make the feature very constrained (and unworkable with any generics not aware of "Relocate")
[11:07:09] <OmniMancer> eddyb: is there any way in future that you could express that a reference returned from an &self that has the same lifetime as &self does not actually observe the vlaue of &self?
[11:07:28] <eddyb> so... struct Foo { 'a: arena: Arena, data: &'a Bar } and Foo would become !Relocate
[11:07:37] *** Quits: untitaker (untitaker@moz-4642s4.highway.telekom.at) (Ping timeout: 121 seconds)
[11:07:57] <eddyb> OmniMancer: but how do you express what can invalidate that reference?
[11:08:32] <OmniMancer> eddyb: AFAIK you only care that the reference does not outlive the lifetime in that case?
[11:09:32] <eddyb> that's not how borrowing works, you have to care about *everything* that could happen
[11:10:05] <eddyb> if your arena is not borrowed, then you can do anything you want with it
[11:10:39] <OmniMancer> indeed
[11:11:45] <eddyb> okay, so arena is borrowed with a different kind of borrow and then *some* moves of the arena are allowed
[11:12:00] *** Quits: og_wolf (og_wolf@moz-obu4ds.devs.futuro.pl) (Ping timeout: 121 seconds)
[11:12:09] <OmniMancer> I think one issue here is that as long as Arena only holds it's allocation out of itself you can arrange that it doesn't matter what happens to Arena as long is it is not dropped
[11:12:35] <eddyb> OmniMancer: you have to think evil, not good
[11:12:48] <OmniMancer> :(
[11:13:03] <eddyb> if you're not stretching the rules you won't find soundness issues
[11:13:41] *** Joins: untitaker (untitaker@moz-1ofpk1.highway.telekom.at)
[11:13:51] <OmniMancer> I guess one thing is that in pretty much no case will you just store the Arena and an allocation in the struct, what you actually want is a way to say that when this struct dies please kill the arena because nothing it allocated is needed anymore
[11:14:51] <eddyb> not sure why you can't just keep a reference to the arena, it's the simplest thing ever :P
[11:15:10] <OmniMancer> because then it has to be kept elsewhere :/
[11:15:28] *** Quits: tcurdt (tcurdt@moz-ubt.ek0.162.178.IP) (Ping timeout: 121 seconds)
[11:16:48] <eddyb> a very big problem is that you can't track moves of interiorly borrowed values across functions
[11:17:48] <eddyb> maybe you just disallow moves altogether
[11:17:57] <OmniMancer> hmmm
[11:18:01] <eddyb> so you can't move out of such an arena field
[11:18:10] <eddyb> but you can move the structure, because it's self-consistent
[11:18:44] <eddyb> *however*, if you keep a borrow outside, even if it's an interior borrow of the arena field, you're screwed
[11:18:54] *** Joins: tcurdt (tcurdt@moz-bvuuhd.dip0.t-ipconnect.de)
[11:19:01] <OmniMancer> indeed
[11:19:08] <OmniMancer> perhaps it is better not to have it
[11:19:47] <eddyb> can you do linked lists with the self-borrowing thing?
[11:20:31] <eddyb> (combined with the Relocate mechanism)
[11:20:57] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Client exited)
[11:21:15] *** Joins: bytewise (bytewise@moz-eh3idl.adsl.alicedsl.de)
[11:22:09] <eddyb> probably not. but maybe this would work http://stackoverflow.com/questions/28113504/structure-containing-fields-that-know-each-other
[11:23:15] *** Quits: filsmick (filsmick@moz-s1ht48.abo.wanadoo.fr) (Quit: )
[11:23:41] <eddyb> I think that actually requires interior borrows, now that I look at it
[11:24:06] <eddyb> hah!
[11:24:57] <eddyb> OmniMancer: struct ImmovableMarker { 'a: dummy: (), marker: PhantomData<&'a ()> }
[11:26:07] <eddyb> OmniMancer: that would end up being !Relocate (so you don't need an opt in/out mechanism, which means it can be baked into the compiler to observe a property of a type, like Sized is)
[11:26:13] <OmniMancer> that creates a thing that is always borrowed?
[11:26:42] <eddyb> actually, that might be a bad formulation
[11:27:05] <OmniMancer> Our friend, Cell<Option<&'a T>>
[11:27:06] *** Joins: filsmick (filsmick@moz-s1ht48.abo.wanadoo.fr)
[11:27:10] <eddyb> the intent is "a structure which can be moved until it's borrowed"
[11:27:14] <eddyb> OmniMancer: no, that's too restrictive
[11:27:19] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[11:27:35] <OmniMancer> ah indeed
[11:27:46] <OmniMancer> it can also be moved once it is no longer borrowed?
[11:27:47] *** Quits: tcurdt (tcurdt@moz-bvuuhd.dip0.t-ipconnect.de) (Quit: Computer has gone to sleep.)
[11:28:14] <eddyb> Box<T> needs to opt into Relocate, though, so you can't get rid of.... it. no, nevermind, it has a pointer inside :))
[11:28:25] <eddyb> OmniMancer: nope
[11:28:39] <eddyb> OmniMancer: Rust already has the semantics you're thinking of
[11:28:54] <eddyb> the point is that once you've borrowed it once you've "observed" its memory address
[11:29:14] <eddyb> and that cannot change (which is why I used "relocate" not "move" or "movable")
[11:29:24] <OmniMancer> ah
[11:29:42] <eddyb> I think we need to express interior borrows
[11:29:54] <OmniMancer> why does it matter that you have observed it again?
[11:30:16] <eddyb> OmniMancer: for mutexes, the address is a hash of sorts
[11:30:44] <eddyb> imagine the linux kernel having a HashMap<*Futex, FutexData>
[11:30:48] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[11:30:58] <OmniMancer> so pthreads don't like you moving the mutex after using it?
[11:31:05] <eddyb> nope
[11:31:19] <OmniMancer> for the Arena I guess you can't ever unborrow it
[11:31:49] <eddyb> you can just let the borrows go out of scope
[11:31:54] <OmniMancer> yea
[11:32:08] <eddyb> (you wouldn't deliberately make something using arena non-relocatable, the borrows themselves will cause that)
[11:32:22] <OmniMancer> though usually once that has happened you throw away the Arena because that is its point
[11:32:25] <eddyb> many C libraries also have similar semantics, due to the fact that they keep pointers around to the insides of a structure
[11:32:35] <OmniMancer> yep
[11:33:00] <eddyb> OmniMancer: actually, no, an arena with a clear method would be a very good way to have GC-like throughput with cheaper collection
[11:33:11] <eddyb> a CopyArena would be free to clear :)
[11:33:22] <eddyb> (and have no metadata overhead)
[11:33:41] <OmniMancer> eddyb: I guess
[11:34:12] <eddyb> I had an example in here, yesterday I think, reusing an arena in a loop to construct a virtual DOM or any kind of scenegraph
[11:34:52] <OmniMancer> I think Cap'n Proto uses Arena type allocation but there it's because it wants all the structures to actually have a specific layout in memory
[11:35:43] <eddyb> something based on mio could allow you to reuse buffer allocations to the point where the server is saturated and new connections won't allocate for I/O *at all*
[11:36:41] <OmniMancer> and I think it never uses address based pointers because the point is that you can just copy the entire thing out a socket and it works
[11:36:44] <eddyb> with zero-copy parsing you can do a lot on top of that with minimal or no allocations
[11:37:17] <eddyb> OmniMancer: so... where were we, interior borrows
[11:37:49] <eddyb> or rather, *indirect* borrows. would be interesting to encode that in Deref
[11:38:32] <OmniMancer> the fact that we borrow something inside the structure and only care that that thing follows the borrowing rules?
[11:38:34] <eddyb> would disallow newtype/inheritance abuse, but that doesn't seem like an amazing goal
[11:38:48] <eddyb> OmniMancer: don't say "we only care about ..."
[11:39:01] <eddyb> the fact that you borrow memory *behind* an indirection
[11:39:36] <OmniMancer> and because its behind an indirection you can afford more liberties to the thing holding the indirection
[11:40:19] <eddyb> yes, but before you attempt to define the new rules, you need to add a way to express such a borrow
[11:41:01] <eddyb> a simplistic way might be &'a T -> &'*a U
[11:41:36] *** Quits: filsmick (filsmick@moz-s1ht48.abo.wanadoo.fr) (Quit: )
[11:41:48] <eddyb> actually, you can totally do this on Deref, because &'a T -> &'*a U is strictly more permissive than &'a T -> &'a U
[11:42:28] <eddyb> so if you have T: Deref<Target=U>, you can only deal with &'a T -> &'a U
[11:42:47] <eddyb> oh
[11:43:06] <eddyb> I think #servo needs this
[11:44:40] <OmniMancer> eddyb: well that likely makes it easier to pitch to the core team
[11:46:33] *** Joins: mithsv (mithsv@moz-upf.6am.89.145.IP)
[11:46:35] *** Joins: mindtree (Mitch@moz-3gf834.iprimus.net.au)
[11:50:12] <eddyb> OmniMancer: nope, memory failed me
[11:51:04] <eddyb> but, yes, so... '*a is "just" a lifetime, and you can have &*unsafe_ptr end up with it, it's not particularly hard
[11:51:28] <eddyb> but what if you have a newtype of a reference, how would you create an indirect borrow there?
[11:52:08] *** Joins: alexggordon (alexggordon@moz-4q0f8f.cable.rcn.com)
[11:52:09] <eddyb> struct Foo<'x>(&'x X); and you can have &'a Foo<'x> -> &'a X or -> &'x X
[11:52:47] *** Joins: mithsv_ (mithsv@moz-upf.6am.89.145.IP)
[11:53:08] *** Quits: mithsv (mithsv@moz-upf.6am.89.145.IP) (Connection closed)
[11:53:10] <eddyb> self.0 would have lifetime 'a, and *self.0 would be a dereference of something with lifetime 'a
[11:53:20] <eddyb> borrowing it to '*a would be acceptable
[11:54:17] <eddyb> the semantics of 'a borrows don't change if '*a borrows are also present
[11:54:35] <eddyb> yeah, this seems sound
[11:55:13] *** Joins: Wild_Cat (Max@moz-860o3v.cpe.pppoe.ca)
[11:56:01] *** Quits: skitoo (Thunderbird@moz-urd0va.fbx.proxad.net) (Ping timeout: 121 seconds)
[11:56:28] <eddyb> (imagine Deref for &'b T was &'a &'b T -> &'*a T, but -> &'c T where 'c is between 'a and 'b is possible because reborrowing is built-in)
[11:57:17] <eddyb> OmniMancer: so far we have a new kind of borrow which can be used in unsafe code to handle some things (not sure if I have an usecase yet :P)
[11:57:37] <OmniMancer> can it be used in safe code though :P
[11:58:17] *** Joins: dmac (dmac@moz-2ig65r.ca.comcast.net)
[11:58:24] <eddyb> should a function be allowed to take '*a as a parameter? what would that imply?
[12:00:10] <eddyb> I don't think it's actually meaningful because you don't have the thing it's borrowing and using 'a implies it's already borrowed so '*a is functionally equivalent to 'a
[12:01:18] <eddyb> if you pass '*a to a function &'b T -> &'b U, you will get &'*a U out (the indirection is preserved)
[12:02:23] *** Quits: dmac (dmac@moz-2ig65r.ca.comcast.net) (Ping timeout: 121 seconds)
[12:02:31] *** Joins: buzugu (baptiste@moz-co8.8nl.207.91.IP)
[12:03:11] <eddyb> multiple levels of indirection ('***a etc.) don't seem to have immediate usefulness
[12:05:28] *** Joins: og_wolf (og_wolf@moz-obu4ds.devs.futuro.pl)
[12:06:36] <eddyb> OmniMancer: the only thing you could do is move it around the stack a bit, moving a value with a '*a borrow out of the function's scope (into an inner or outer one) wouldn't be allowed (because you can't track the borrows. unless they expire... in which case the value isn't borrowed anyways!)
[12:06:59] <eddyb> OmniMancer: so you need the self-referential borrows
[12:08:04] <eddyb> I wonder if you can view it as existential lifetimes
[12:09:28] <eddyb> OmniMancer: a big issue is that its type is... incomplete unless behind a reference
[12:09:37] *** Quits: alexggordon (alexggordon@moz-4q0f8f.cable.rcn.com) (Ping timeout: 121 seconds)
[12:10:27] <eddyb> OmniMancer: which, lol, is a solved problem
[12:10:49] <eddyb> OmniMancer: because you can make the type generic over the lifetime and use an alias
[12:11:18] <eddyb> type Foo<'a> = &'a FooS<'a>; // this pattern is actually used in a few places in the Rust compiler. and yes, arenas are employed there :D
[12:11:31] *** Joins: sambotron (sambotron@moz-nao11s.ca.comcast.net)
[12:12:17] <eddyb> OmniMancer: is your context structure supposed to be "owned", not "borrowed"?
[12:13:03] <eddyb> OmniMancer: and would direct field access be the main interaction mode, or would you go through methods?
[12:15:15] <eddyb> OmniMancer: is it acceptable to require field access to happen on &'a Foo or &'a mut Foo?
[12:15:29] <eddyb> OmniMancer: because then you can actually have 'self be meaningful :D
[12:15:31] <OmniMancer> I am not sure but I would expect methods most likely
[12:15:34] *** Quits: sambotron (sambotron@moz-nao11s.ca.comcast.net) (Ping timeout: 121 seconds)
[12:15:41] <eddyb> OmniMancer: methods with &self or &mut self?
[12:15:44] *** Quits: bjz (bjz@moz-pl4g2k.tpgi.com.au) (Quit: My Mac has gone to sleep. ZZZzzz…)
[12:15:46] *** Quits: jensnockert (jensnockert@moz-0rd3rj.siw.siwnet.net) (Connection closed)
[12:16:10] <OmniMancer> I don't actually have a specific thing for this but can see how it might be useful for certain patterns
[12:16:27] <eddyb> (so what would happen is that the structure would be existential when passed around and when you borrow it you can see the contents)
[12:16:46] <OmniMancer> perhaps for storing trees and such nicely, or allowing graphs more easily
[12:17:48] <eddyb> '*self looks so weird though :D
[12:18:12] <eddyb> if you always borrow the structure, 'self would actually work out nicely
[12:18:45] <eddyb> aaaand it would remove a certain pervasive lifetime somewhere in rustc_trans. except that lifetime would still be in the reference types so it doesn't do *that* much
[12:19:10] *** Quits: buzugu (baptiste@moz-co8.8nl.207.91.IP) (Ping timeout: 121 seconds)
[12:19:31] *** Joins: buzugu (baptiste@moz-h99.p85.165.37.IP)
[12:19:46] <OmniMancer> I assume something would want to own the structure, but I suspect use would involve borrowing a lot?
[12:20:02] *** Joins: twipeD (wipeD@moz-rqfk2t.dip0.t-ipconnect.de)
[12:22:04] *** Joins: jensnockert (jensnockert@moz-0rd3rj.siw.siwnet.net)
[12:22:56] *** Joins: jakerr (jakerr@moz-r0l.haj.125.74.IP)
[12:24:19] *** Quits: bytewise (bytewise@moz-eh3idl.adsl.alicedsl.de) (Quit: Leaving)
[12:26:42] <eddyb> OmniMancer: yeah, that would be supported
[12:26:54] <eddyb> OmniMancer: heck, put it in Rc :D
[12:28:03] <OmniMancer> :D
[12:28:38] <OmniMancer> Does this make graphs any easier? I guess the mutability problem is still there but the lifetime one isn't
[12:28:52] *** Quits: fmtq (fmtq@moz-d08itp.tpgi.com.au) (Ping timeout: 121 seconds)
[12:30:35] <eddyb> OmniMancer: with arenas, at least, it does
[12:30:36] *** Joins: fmtq (fmtq@moz-d08itp.tpgi.com.au)
[12:30:48] <eddyb> OmniMancer: oh and you can use reaps
[12:31:26] <eddyb> though that doesn't give you anything interesting for a doubly linked list
[12:32:22] <OmniMancer> I can't remember does an Arena let you allocate anything out of it?
[12:33:39] *** Quits: eerie (eerie@moz-njefna.red.bezeqint.net) (Connection closed)
[12:34:00] *** Joins: eerie (eerie@moz-njefna.red.bezeqint.net)
[12:34:08] <eddyb> OmniMancer: what do you mean?
[12:35:33] <OmniMancer> ah yes Arena lets you allocate anything but uses reflection to do it TypedArena is only one type but can statically do itI guess
[12:35:57] <eddyb> OmniMancer: a CopyArena would be really nice for a lot of usecases
[12:36:11] <eddyb> because sometimes you just need a bunch of numbers and references
[12:37:06] <OmniMancer> CopyAreana is an arena that can only allocate Copy types?
[12:37:14] <eddyb> yeah
[12:38:02] *** Quits: eerie (eerie@moz-njefna.red.bezeqint.net) (Ping timeout: 121 seconds)
[12:38:38] <OmniMancer> probably quite useful for some things, are & refs copy?
[12:38:45] <eddyb> yupp
[12:39:00] <eddyb> OmniMancer: it can trivially support slices, too
[12:39:03] <OmniMancer> so a type that contains only &refs and Copy things is also Copy?
[12:39:15] <eddyb> well, &T is just another Copy thing
[12:39:35] <eddyb> I am writing something storing &'a Cell<T> for variables - so you can assign them directly from the solver :D
[12:39:57] <eddyb> this would be a nightmare in C/C++ and impossible everywhere else
[12:40:19] <OmniMancer> hmmmm
[12:41:14] *** Joins: eerie (eerie@moz-njefna.red.bezeqint.net)
[12:42:09] <jakerr> Hi tomaka, do you mind if I ask a question about gl_generator?
[12:42:59] <jakerr> I'm trying to load gles functions on iOS while using SDL2Window is there any reason to think this should be possible after the SDL2Window is already created via the normal ::new
[12:43:48] <tomaka> jakerr: I don't really know SDL2
[12:44:02] <tomaka> and I don't really understand your question :o)
[12:44:11] <jakerr> Oh sorry 
[12:44:22] <eddyb> jakerr: loading functions should be possible at any time
[12:44:50] <jakerr> tomaka oh ok no worries, I can point to some code
[12:45:09] <tomaka> it's not necessarly possible at any time, but I don't know iOS either :o)
[12:45:33] <tomaka> I guess iOS uses EGL
[12:45:49] <eddyb> still, that's about the context, no?
[12:45:54] <jakerr> tomaka, that sounds familiar
[12:45:56] * eddyb should probably shut up
[12:46:41] <Ichiru> Loading functions with SDL2
[12:46:58] <Ichiru> Isn't that just an SDL_GL_GetProcAddress
[12:47:05] <jakerr> Here's what I've tried so far:
[12:47:08] <jakerr> https://github.com/jakerr/rustecspong/commit/eacf7c4cf4e0c18caf03c6d15dea4dc05fbca71f
[12:47:37] <tomaka> and what's the problem?
[12:47:41] <Ichiru> You need to create a GL context first I think?
[12:47:55] <jakerr> thread '<unnamed>' panicked at 'gl function was not loaded',
[12:48:12] <jakerr> When running in the iOS simulator
[12:48:47] <tomaka> Doesn't Sdl2Window create the context?
[12:48:55] *** Quits: summerlight_ (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[12:49:00] <jakerr> tomaka, I believe so
[12:49:27] *** Joins: stjahns (stjahns@moz-9oh245.ed.shawcable.net)
[12:49:50] <tomaka> maybe iOS creates an OpenGL ES 1 context
[12:49:58] <tomaka> (OpenGL ES 1 is shitty)
[12:50:27] <sillesta> you're trying to create a context with 'let opengl = shader_version::OpenGL::_2_0;', shouldn't it specify OpenGLES?
[12:50:30] <Ichiru> Print a glGetVersion
[12:50:41] <OmniMancer> night
[12:50:47] <sillesta> nn o/
[12:51:32] <jakerr> sillesta: thanks, sorry that's a bit of a red herring, in my custom override I've replaced those shaders with ios friendly ones as none exist yet.
[12:51:45] <jakerr> That code's not visible as it's a local cargo override
[12:51:49] *** Joins: tcurdt (tcurdt@moz-bvuuhd.dip0.t-ipconnect.de)
[12:52:18] *** Quits: twipeD (wipeD@moz-rqfk2t.dip0.t-ipconnect.de) (Quit: G'bye)
[12:52:41] <sillesta> jakerr: try the rust version of setting attributes for: 'SDL_GL_SetAttribute(SDL_GL_CONTEXT_PROFILE_MASK, SDL_GL_CONTEXT_PROFILE_ES);'
[12:52:42] <OmniMancer> tomorrow I will try to work on my path tracer thing
[12:52:46] <tomaka> If you want to debug, you could try to `println!("{:?}", s);` inside the closure with `load_with`
[12:52:58] <tomaka> and print the value returned by SDL too
[12:53:12] <tomaka> to see which functions return 0, and if some functions return non-zero
[12:53:37] <Ichiru> ^
[12:53:39] <jakerr> tomaka, sillesta thanks for the tips. I'll try both!
[12:53:57] <Ichiru> Also make sure you're calling a function that actually is implemented for your context
[12:54:33] <tomaka> Ichiru: should be good, as gles2 bindings are created: https://github.com/jakerr/rustecspong/blob/abc283addfc969c1c8a4a251a059268b9d8b6237/build.rs#L17
[12:54:45] <Ichiru> hm
[12:55:00] <Ichiru> perhaps I should customise my bindings to only OpenGL 3.2
[12:55:12] <tomaka> Ichiru: yeah, that prevents accidental mistakes
[12:55:59] * tomaka is afk
[12:56:07] *** Quits: OmniMancer (OmniMancer@moz-6m1jrb.xtra.co.nz) (Quit: Leaving.)
[12:56:30] *** Joins: bdero (bran@moz-mqs.7dh.189.18.IP)
[12:59:03] *** Joins: dmac (dmac@moz-2ig65r.ca.comcast.net)
[12:59:36] *** Quits: stjahns (stjahns@moz-9oh245.ed.shawcable.net) (Connection closed)
[12:59:52] *** Quits: Tobba|Laptop (Tobba@moz-1hh.7ki.21.217.IP) (Connection closed)
[12:59:54] *** Joins: Tobba|Craptop (Tobba@moz-1hh.7ki.21.217.IP)
[12:59:58] *** Joins: stjahns (stjahns@moz-9oh245.ed.shawcable.net)
[13:00:54] *** Quits: stjahns (stjahns@moz-9oh245.ed.shawcable.net) (Connection closed)
[13:01:08] *** Joins: stjahns (stjahns@moz-9oh245.ed.shawcable.net)
[13:03:09] *** Quits: dmac (dmac@moz-2ig65r.ca.comcast.net) (Ping timeout: 121 seconds)
[13:03:59] <Ichiru> Is there a command line option to tell cargo to build a static library instead of an executable?
[13:04:20] <Ichiru> like cargo build --library or something?
[13:04:31] <jakerr> I tried tomaka's debug suggestion it looks like all the functions return a pointer: https://gist.github.com/jakerr/22d5642654a06e6ad81f the line that actually fails is `let mut gl = Gl::new(opengl);`
[13:05:15] <jakerr> That actually makes sense, opengl is let `opengl = shader_version::OpenGL::_3_2;` and I've not done any hackery inside of opengl_graphics
[13:05:37] *** Quits: flowsnake (flowsnake@moz-imbr2b.cable.virginm.net) (Ping timeout: 121 seconds)
[13:06:44] *** Joins: mihneadb (mihneadb@moz-b5r.gbu.120.86.IP)
[13:07:10] *** Joins: flowsnake (flowsnake@moz-imbr2b.cable.virginm.net)
[13:08:01] *** Quits: Ichiru (textual@moz-nhnoci.internode.on.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[13:08:08] *** Joins: Ichiru (textual@moz-nhnoci.internode.on.net)
[13:14:37] <jakerr> sillesta, ichiru, tomaka, my guess is that I need to implement something like https://github.com/PistonDevelopers/opengl_graphics/blob/master/src/gl_back_end.rs for my generated `gles` library rather than the default `gl` library.
[13:15:28] *** Joins: indefini (chris@moz-qefu0l.ocn.ne.jp)
[13:17:18] *** Quits: mithsv_ (mithsv@moz-upf.6am.89.145.IP) (Quit: )
[13:17:49] *** Quits: Wild_Cat (Max@moz-860o3v.cpe.pppoe.ca) (Connection closed)
[13:18:15] *** Quits: Tobba|Craptop (Tobba@moz-1hh.7ki.21.217.IP) (Ping timeout: 121 seconds)
[13:21:11] *** Joins: summerlight_ (summerlight@moz-99k.2mj.130.121.IP)
[13:23:59] *** Joins: alexggordon (alexggordon@moz-b3e66j.hfc.comcastbusiness.net)
[13:24:30] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Client exited)
[13:24:46] *** Quits: jensnockert (jensnockert@moz-0rd3rj.siw.siwnet.net) (Connection closed)
[13:27:44] *** Joins: jensnockert (jensnockert@moz-0rd3rj.siw.siwnet.net)
[13:27:51] *** Quits: eerie (eerie@moz-njefna.red.bezeqint.net) (Connection closed)
[13:29:19] *** Quits: stjahns (stjahns@moz-9oh245.ed.shawcable.net) (Connection closed)
[13:29:26] *** Joins: Gamecubic (cubic@moz-qfrl13.mc.videotron.ca)
[13:29:41] *** Joins: stjahns (stjahns@moz-9oh245.ed.shawcable.net)
[13:32:50] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[13:33:44] *** Quits: stjahns (stjahns@moz-9oh245.ed.shawcable.net) (Ping timeout: 121 seconds)
[13:41:48] *** Joins: bjz (bjz@moz-puppgq.tpgi.com.au)
[13:44:55] *** Parts: tokamach (tom@moz-b2a.e67.25.176.IP) ()
[13:49:02] *** Joins: stjahns (stjahns@moz-9oh245.ed.shawcable.net)
[13:49:19] *** Quits: buzugu (baptiste@moz-h99.p85.165.37.IP) (Ping timeout: 121 seconds)
[13:51:46] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[13:52:19] *** Joins: eerie (eerie@moz-njefna.red.bezeqint.net)
[13:55:53] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Quit: leaving)
[13:56:13] *** Joins: buzugu (baptiste@moz-h99.p85.165.37.IP)
[13:56:48] *** Quits: jensnockert (jensnockert@moz-0rd3rj.siw.siwnet.net) (Connection closed)
[13:59:46] *** Joins: dmac (dmac@moz-2ig65r.ca.comcast.net)
[14:00:13] *** Joins: Guest74 (textual@moz-lmfinb.fios.verizon.net)
[14:03:51] *** Quits: dmac (dmac@moz-2ig65r.ca.comcast.net) (Ping timeout: 121 seconds)
[14:04:26] *** Joins: jensnockert (jensnockert@moz-0rd3rj.siw.siwnet.net)
[14:11:40] *** Quits: mihneadb (mihneadb@moz-b5r.gbu.120.86.IP) (Ping timeout: 121 seconds)
[14:13:34] *** Quits: [o__o] ([o__o]@moz-4s2t5k.compute-1.amazonaws.com) (Ping timeout: 121 seconds)
[14:14:22] *** Quits: Guest74 (textual@moz-lmfinb.fios.verizon.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[14:15:28] *** Joins: bytewise (bytewise@moz-cdorcp.eduroam.rwth-aachen.de)
[14:19:22] *** Quits: eerie (eerie@moz-njefna.red.bezeqint.net) (Connection closed)
[14:20:22] *** Joins: AngelOfSol (AngelOfSol@moz-dj58kc.rh.rit.edu)
[14:20:44] *** Quits: Feyn (Feyn@moz-ccq.3q3.115.42.IP) (Quit: Leaving)
[14:23:23] <eddyb> System { variables: [a.x1, a.y1, a.x2, a.y2, b.x1, b.y1, b.x2, b.y2, c.x1, c.y1, c.x2, c.y2], constraints: [1 * b.y1 + -1 * c.y1 ∈ [0, 0], 1 * b.y2 + -1 * c.y2 ∈ [0, 0], 1 * b.x2 + -1 * c.x1 ∈ [0, 0], 1 * a.x1 + -1 * b.x1 ∈ [0, 0], 1 * a.x2 + -1 * c.x2 ∈ [0, 0], 1 * a.y2 + -1 * b.y1 ∈ [0, 0], 1 * a.x1 ∈ [0, 0], 1 * a.y1 ∈ [0, 0], 1 * c.x2 ∈ [600, 600], 1 * c.
[14:23:28] <eddyb> aww it got cut off
[14:25:30] * WindowsBunny cuts off eddyb
[14:25:32] *** Quits: fmtq (fmtq@moz-d08itp.tpgi.com.au) (Ping timeout: 121 seconds)
[14:27:11] *** Joins: fmtq (fmtq@moz-d08itp.tpgi.com.au)
[14:27:36] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[14:28:15] *** Quits: jakerr (jakerr@moz-r0l.haj.125.74.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[14:28:24] <tomaka> oh jakerr's gone
[14:29:56] <eddyb> cmr: what do you know about linear inequations? any shortcuts I can take to solving a system where constraints have small numbers of terms?
[14:32:28] *** Joins: mithsv (mithsv@moz-gahb71.dynamic.caiway.nl)
[14:40:34] *** Joins: ytain (ytain@moz-bps1td.dsl.teksavvy.com)
[14:43:15] *** Joins: Rym (y@moz-g4dip9.range86-187.btcentralplus.com)
[14:44:23] *** Quits: ytain (ytain@moz-bps1td.dsl.teksavvy.com) (Quit: Textual IRC Client: www.textualapp.com)
[14:46:44] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Client exited)
[14:48:58] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[14:50:04] *** Joins: eerie (eerie@moz-njefna.red.bezeqint.net)
[14:55:15] *** Joins: saterus (saterus@moz-o0ug28.res.rr.com)
[14:56:09] *** Quits: eerie (eerie@moz-njefna.red.bezeqint.net) (Ping timeout: 121 seconds)
[14:59:06] *** Joins: Jackneill (Jackneill@moz-80hpdi.pool.digikabel.hu)
[15:00:31] *** Joins: dmac (dmac@moz-2ig65r.ca.comcast.net)
[15:03:04] *** Joins: Guest74 (textual@moz-il1.n6s.204.65.IP)
[15:04:25] *** Joins: ytain (ytain@moz-bps1td.dsl.teksavvy.com)
[15:04:31] *** Quits: og_wolf (og_wolf@moz-obu4ds.devs.futuro.pl) (Ping timeout: 121 seconds)
[15:04:37] *** Quits: dmac (dmac@moz-2ig65r.ca.comcast.net) (Ping timeout: 121 seconds)
[15:05:21] *** Joins: og_wolf (og_wolf@moz-obu4ds.devs.futuro.pl)
[15:16:04] *** Joins: kvark (Mibbit@moz-p3c.rcb.221.216.IP)
[15:18:42] *** Quits: tcurdt (tcurdt@moz-bvuuhd.dip0.t-ipconnect.de) (Quit: Textual IRC Client: www.textualapp.com)
[15:18:44] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Client exited)
[15:20:10] *** Quits: bytewise (bytewise@moz-cdorcp.eduroam.rwth-aachen.de) (Ping timeout: 121 seconds)
[15:20:21] *** Quits: squiddy (squiddy@moz-md4.pm3.19.178.IP) (A TLS packet with unexpected length was received.)
[15:23:28] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[15:30:04] *** Quits: og_wolf (og_wolf@moz-obu4ds.devs.futuro.pl) (Quit: )
[15:30:17] <eddyb> 1 * b.y1 + -1 * c.y1 = 0, 1 * b.y2 + -1 * c.y2 = 0, 1 * b.x2 + -1 * c.x1 = 0, 1 * a.x1 + -1 * b.x1 = 0, 1 * a.x2 + -1 * c.x2 = 0, 1 * a.y2 + -1 * b.y1 = 0, 1 * a.x1 = 0, 1 * a.y1 = 0, 1 * c.x2 = 600, 1 * c.y2 = 400
[15:30:34] <eddyb> looks a bit funky but it makes sense
[15:33:44] *** Joins: bytewise (bytewise@moz-cdorcp.eduroam.rwth-aachen.de)
[15:36:53] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[15:41:28] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[15:41:45] <sillesta> eddyb: generated?
[15:42:09] *** Joins: pct (Mibbit@moz-tpjl46.co.comcast.net)
[15:42:23] *** Quits: buzugu (baptiste@moz-h99.p85.165.37.IP) (Client exited)
[15:43:02] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Ping timeout: 121 seconds)
[15:45:16] *** Quits: bytewise (bytewise@moz-cdorcp.eduroam.rwth-aachen.de) (Quit: Quit)
[15:48:22] *** Quits: jensnockert (jensnockert@moz-0rd3rj.siw.siwnet.net) (Connection closed)
[15:51:20] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[15:58:17] *** Joins: O01eg (o01eg@moz-ataqn9.ma9r.4n8f.2698.2a02.IP)
[15:59:26] *** Joins: sambotron (sambotron@moz-nao11s.ca.comcast.net)
[16:01:15] *** Joins: dmac (dmac@moz-2ig65r.ca.comcast.net)
[16:03:18] *** Quits: Rym (y@moz-g4dip9.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[16:03:29] *** Quits: sambotron (sambotron@moz-nao11s.ca.comcast.net) (Ping timeout: 121 seconds)
[16:03:31] *** Quits: Guest74 (textual@moz-il1.n6s.204.65.IP) (Connection closed)
[16:03:56] *** Joins: Guest74 (textual@moz-il1.n6s.204.65.IP)
[16:06:48] *** Quits: dmac (dmac@moz-2ig65r.ca.comcast.net) (Ping timeout: 121 seconds)
[16:07:08] *** Joins: Rym (y@moz-g4dip9.range86-187.btcentralplus.com)
[16:09:17] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Client exited)
[16:13:50] <eddyb> System [a.x1(=0), a.y1(=0), a.x2(=0), a.y2, b.x1(=0), b.y1, b.x2, b.y2(=0), c.x1, c.y1, c.x2(=600), c.y2(=400)] { a.y2 - b.y1 = 0; b.y1 - c.y1 = 0; b.x2 - c.x1 = 0; }
[16:13:57] <eddyb> hah, my dumb reduction logic is working :D
[16:17:16] <silven> Hello, what's the approach if I want to use more modern OpenGL versions with Rust? I see gfx-rs only handles glsl 120 and 150
[16:17:49] *** Quits: saterus (saterus@moz-o0ug28.res.rr.com) (Connection closed)
[16:17:53] <kvark> silven: what exactly do you want to use? gfx-rs cube example just provides both 120 and 150 versions for broader compatibility
[16:17:59] *** Joins: saterus (saterus@moz-o0ug28.res.rr.com)
[16:18:27] <silven> I was thinking like glsl 400+
[16:18:40] <kvark> in general, if you are GL-veteran, then you have a choice of gfx, glium, or raw gl-rs
[16:18:42] <silven> I see the ShaderSource struct doesn't have fields for that
[16:19:03] <silven> okey, anywhere I can read a summary about them?
[16:19:25] <kvark> on the project pages on github - would be a good start point
[16:19:55] <kvark> you've already found gfx-rs, so here is glium - https://github.com/tomaka/glium
[16:20:31] <silven> okey, thank you, I'll check it out
[16:20:46] <kvark> tomaka posts nice updates from time to time on reddit, like this http://www.reddit.com/r/rust_gamedev/comments/304268/glium_project_update_march_edition/
[16:20:56] <Ichiru> gl-rs supports the most modern features iirc
[16:21:11] <Ichiru> Mostly just because it's a raw binding
[16:21:48] <silven> cool. And while we're on the subject, any new about Vulkan? Have people analysed the presentation and concluded if/how it would work together with piston and related libraries?
[16:21:54] <kvark> gfx-rs doesn't support fancy GL4 features yet, no one volunteered to implement them, and my HW is only 3.3
[16:22:12] <silven> Ichiru: well that's expected then :p
[16:22:17] <Ichiru> The fancy GL features aren't really cross-platform yet
[16:22:47] <Ichiru> OSX supports up to 4.1
[16:22:47] <kvark> silven: in general, Vulkan architecture is very similar to gfx-rs in terms of rendering. There are still questions about resource management, however.
[16:22:59] <Ichiru> Other ones depend on drivers
[16:23:17] <Ichiru> I don't think Mesa fully supports 4 yet ._.
[16:24:07] <silven> Ichiru: correct, Mesa lacks some core extensions afaik
[16:24:14] <kvark> silven: supporting Vulkan is our strategic goal, but we can't do much until 1) the real spec is out, and 2) we have time and HW to play with it
[16:24:29] <Ichiru> Then again on OSX you don't know what is supported
[16:24:41] <Ichiru> It exposes 4.1 for everything
[16:24:54] <Ichiru> But if it isn't supported by the hardware, everything goes to software rendering
[16:26:37] <silven> kvark: I see - well it would be awesome to play around with once more information is available - I was mainly concerned with if there was any "oh shit, this won't work at all for us"-moments when people wiht the know-how saw the presentation
[16:27:03] <Ichiru> does rust let you compile stuff based on platform?
[16:27:14] <WindowsBunny> kvark: I have OpenGL 4.4 so I could test it perhaps :D
[16:27:20] <tomaka> silven: you can already play with mantle, which is basically vulkan with another name
[16:27:33] <tomaka> you just need windows and an ati card
[16:27:37] <Ichiru> Or really.. does cargo?
[16:27:42] <kvark> silven: technically, only gfx-rs tries to be cross-API, so the only people worried would be our team. However, we've been designing the architecture ahead of time to be ready for this, and... so far so good
[16:28:04] <silven> kvark: Good to hear :)
[16:28:20] <kvark> WindowsBunny: it's not as much about testing as it is about new features. PR's welcome! ;)
[16:28:26] <silven> tomaka: I never realised Mantle was even publicly available?
[16:28:34] <eddyb> tomaka: btw, I think kvark mentioned gfx-rs uses Arc<Context> to manage resources... so that's close enough to glium?
[16:28:45] <tomaka> silven: https://github.com/jakerr/rustecspong/blob/abc283addfc969c1c8a4a251a059268b9d8b6237/build.rs#L17
[16:28:47] <tomaka> oops
[16:28:56] <tomaka> my ctrl+c didn't work
[16:28:56] <kvark> eddyb: no, we don't hold the context
[16:28:57] <tomaka> silven: https://github.com/tomaka/mantle-demo
[16:28:59] <Ichiru> I probably should've just learnt glium
[16:29:05] <eddyb> kvark: I must've read something wrong
[16:29:07] <Ichiru> Instead of trying to shove everything down gl-rs
[16:29:13] <eddyb> (sorry)
[16:29:16] <Ichiru> Especially for my first rust project >.>
[16:29:44] <tomaka> Ichiru: I agree with what you said :o)
[16:29:58] <kvark> eddyb: resources are reference counted, yes, but they don't hold the context. The factory that produced the resources just scans through them and deletes those that are not referenced by anything else but the factory.
[16:30:08] <Ichiru> I'm not even sure I have arrays all figured out
[16:30:23] <eddyb> kvark: so... GC?
[16:30:41] <kvark> eddyb: I guess so. You just explicitly tell it when to cleanup.
[16:30:43] <Ichiru> Sounds like a half-gc?
[16:31:00] <kvark> eddyb: gfx::Canvas does it for you after the frame swap
[16:31:04] <eddyb> kvark: oh, for some reason I thought it was running in the background. OH that's what factory.cleanup() is
[16:31:16] <tomaka> kvark: the problem is that this approach doesn't necessarly work if you do background work
[16:31:35] <kvark> tomaka: how is it?
[16:31:47] <tomaka> if you run a compute shader for example
[16:31:58] <tomaka> it's not tied to a frame swap
[16:32:01] <eddyb> (I was curious if glium could be used as the OpenGL backend for gfx-rs in the future)
[16:32:30] <Ichiru> Hm
[16:32:38] <kvark> tomaka: you are free to call it after your compute shader is executed. The Canvas is just a convenience thing for simple apps.
[16:32:41] <eddyb> (with no significant overhead from the abstractions)
[16:32:56] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Quit: It's a joke, it's all a joke.)
[16:32:59] <tomaka> kvark: but what if you run your compute shader continuously?
[16:33:19] <Ichiru> freetype-rs says it currently compiles against Rust master
[16:33:27] <Ichiru> So I wouldn't be able to compile it with rust beta?
[16:33:35] <tomaka> I don't have a precise example though
[16:33:36] <eddyb> Ichiru: maybe, maybe not
[16:34:04] <Ichiru> "The releases on http://www.rust-lang.org tend to not work."
[16:34:06] <Ichiru> bothe
[16:34:19] <kvark> tomaka: let us get compute shaders first, then we'll see what can be done
[16:34:20] <tomaka> Ichiru: that may be an old claim
[16:34:25] <eddyb> Ichiru: using only beta is probably not the best idea... but if you have multirust it's probably useful to test the semi-stable releases and see what happens
[16:34:40] <eddyb> multirust travis would be nice
[16:34:53] <tomaka> eddyb: you can already ask travis to test both beta and nightly
[16:35:04] <eddyb> do piston projects do that?
[16:35:04] <tomaka> eddyb: https://github.com/PistonDevelopers/image/blob/master/.travis.yml#L7-L9
[16:35:08] <tomaka> no
[16:35:09] <eddyb> oh
[16:35:16] <Ichiru> hm
[16:35:26] <eddyb> I'm guessing the answer is "just some"
[16:35:27] <tomaka> very few repos do that because people don't know about this, I did it for image
[16:35:28] <Ichiru> The multirust installer runs a shell script'
[16:35:36] <Ichiru> But I installed rust beta through my package manager
[16:35:56] <eddyb> Ichiru: what OS/package manager?
[16:36:06] <Ichiru> OSX/homebrew
[16:36:13] <eddyb> homebrew? that's odd
[16:36:26] <Ichiru> I just went brew install rust and it gave me 1.0.0-beta
[16:36:28] <eddyb> do they have their own builds? or do they simply package the releases?
[16:36:52] <Ichiru> They're like pkgbuilds
[16:37:02] <Ichiru> actually no
[16:37:04] <eddyb> well, yeah, but that's not what I asked
[16:37:05] <Ichiru> they package it themselves
[16:37:19] <Ichiru> with what I'm assuming is their own builds
[16:37:32] <eddyb> what you're assuming is what I'm asking about
[16:37:41] <Ichiru> Since it says it was built on april 4th x)
[16:38:00] <eddyb> ah, fiiiine
[16:38:08] <Ichiru> hm i'll uninstall the brew version and just do multirust
[16:38:10] *** Joins: niconii (nicole@moz-isj0f9.frgo.qwest.net)
[16:38:23] * eddyb doesn't like combinatorial explosion of choices :P
[16:38:57] <Ichiru> I could choose a different package manager if I wanted :P
[16:39:00] *** Quits: saterus (saterus@moz-o0ug28.res.rr.com) (Connection closed)
[16:39:03] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[16:39:49] <tomaka> kvark: what I think should be done for vulkan is that you create a fence each time you submit a command buffer
[16:40:10] <Ichiru> This is far too confusing from a C# background :P
[16:40:12] <tomaka> this fence is returned in a `Fence` object that holds smart pointers to the resources used by the command buffer
[16:40:19] <kvark> tomaka: perhaps we'll do exactly that. I don't expect too many command buffers per frame.
[16:40:45] <eddyb> how does one deal with linear systems :/?
[16:40:48] <tomaka> and Fence's destructor waits for the fence, or you can use it when submitting another command buffer behind the first one
[16:41:12] <Ichiru> Once rust hits stable, will the libraries migrate to that?
[16:41:14] <eddyb> I may have dug myself in a hole by having min/max
[16:41:15] <tomaka> submit_command_buffer(after: Option<Fence>, commands: &CommandsBuffer)
[16:41:23] <tomaka> in which case it doesn't wait
[16:41:43] <kvark> tomaka: nice concept, I'll need to copy it to an issue
[16:41:45] <Ichiru> eddyb: What sort of game is this?
[16:42:00] <eddyb> it's not a game, it's an attempt at layout constraints
[16:42:07] <Ichiru> oh
[16:42:15] <eddyb> I have propagation of window bounds :D
[16:42:27] *** Quits: Guest74 (textual@moz-il1.n6s.204.65.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[16:42:29] <Ichiru> what are you trying to achieve?
[16:42:33] <tomaka> kvark: I fact it would be `submit_command_buffer(after: Option<Fence>, commands: &CommandsBuffer) -> Fence`
[16:42:40] *** Joins: pcwalton (pcwalton@moz-nh2.o1i.216.216.IP)
[16:42:41] <eddyb> Ichiru: build a flexible UI
[16:42:48] <tomaka> kvark: and the smart pointers in the Fence that you pass as parameter are moved to the Fence that is returned
[16:43:00] <eddyb> (like HTML5 flexboxes, if you've seen those)
[16:43:00] <tomaka> kvark: at the end of the frame, you wait on the fence
[16:43:09] <tomaka> and it destroys the resources
[16:43:13] <Ichiru> My normal take on UI is
[16:43:21] <Ichiru> A long list of rectangles that do things
[16:43:25] <Ichiru> All manually positioned :P
[16:43:31] <tomaka> kvark: I could explain it a bit better
[16:43:32] <eddyb> "normal takes on UI" usually all suck
[16:43:41] <Ichiru> It sucks
[16:43:49] <kvark> tomaka: sorry, I'm not focused atm. Will copy it to an issue if you don't mind
[16:43:53] <eddyb> I have to write something that doesn't suck
[16:44:01] <eddyb> I do have 0 overhead HBox/VBox :D
[16:44:03] <Ichiru> and is usually even more sucky in c# gamedev
[16:44:06] <tomaka> kvark: in fact I should write a post-mortem of the issues I encountered in my small mantle library
[16:44:07] <Ichiru> Which sorta works out as
[16:44:16] <Ichiru> Get game out, code new one from scratch
[16:44:22] <Ichiru> None of this library nonsense
[16:44:31] <eddyb> there's just nothing inside other than the left/right or top/bottom elements
[16:44:59] <eddyb> each element returns its bounding box as 4 variables (in a linear system)
[16:45:03] *** Quits: Rym (y@moz-g4dip9.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[16:45:03] *** Quits: pcwalton (pcwalton@moz-nh2.o1i.216.216.IP) (Client exited)
[16:45:22] *** Joins: pcwalton (pcwalton@moz-nh2.o1i.216.216.IP)
[16:45:32] <eddyb> it propagates all the way up, registering constraints. the root assigns 0, 0, width, height to itself
[16:45:46] <Ichiru> nice
[16:46:07] <kvark> tomaka: thanks! That would be nice
[16:46:38] <Ichiru> uhm
[16:46:44] <kvark> did you guys see https://github.com/tedsta/reforge ?
[16:46:50] <kvark> I was a bit shocked
[16:46:58] <Ichiru> My nightly is (git commit # 2015-04-14) built on 2014-04-13 O.o
[16:47:17] <Ichiru> multiplayer ftl?
[16:47:22] <Ichiru> I've always wanted that
[16:47:47] <eddyb> that part works. but I'm not sure how to deal with slightly more complex constraints. I made HBox and VBox separate elements in half and now I get 2-variable equations
[16:47:56] <eddyb> which are solvable, but I'm not sure how to go about it
[16:48:37] <tomaka> hah that's what happens when someone actually writes a game instead of worrying about design
[16:49:04] <eddyb> [dependencies.quack] cool
[16:49:33] <Ichiru> hm
[16:49:38] <Ichiru> Can I have two cargo.toml files
[16:50:02] <kvark> I'm glad to see piston used there. Actually expected raw GL for some reason
[16:50:19] <Ichiru> what's wrong with raw GL? :P
[16:50:34] <eddyb> Ichiru: don't get tomaka started
[16:50:34] *** Joins: [o__o] ([o__o]@moz-4s2t5k.compute-1.amazonaws.com)
[16:50:45] <tomaka> hehe
[16:50:54] <tomaka> just look at any function in glium to see what's wrong with raw GL
[16:50:57] <eddyb> tomaka: you have a nice list somewhere, don't you?
[16:51:10] <tomaka> no
[16:51:11] <Ichiru> I like my pointer arithmetic unsafe
[16:51:18] <Ichiru> Just random offsets into memory, see what happens
[16:51:20] <Ichiru> Free? pff
[16:51:58] <Ichiru> ok
[16:52:04] <eddyb> tomaka: no "reasons why raw GL is terrible"? no "what glium actually solves"?
[16:52:08] <Ichiru> now to figure out how to get my objective-c stub working with rust
[16:52:26] <tomaka> I think this function partially illustrates what's wrong with GL: https://github.com/tomaka/glium/blob/master/src/image_format.rs#L473
[16:52:39] <tomaka> eddyb: I started writing a "Differences between GL and glium" but haven't finished
[16:52:51] <Ichiru> This looks overly complex
[16:53:05] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[16:54:21] <pct> you should make it so you can compile rust into Vulkan spir-v 
[16:54:39] <tomaka> pct: that's more easily said than done
[16:54:52] <pct> make it llvm do it for u
[16:55:05] <Ichiru> Compile spir-v into JavaScript
[16:55:18] <Ichiru> as well as rust
[16:55:24] <pct> good idea
[16:55:27] <Ichiru> JavaScript: The next systems language (tm)
[16:56:13] *** Joins: Guest44 (textual@moz-to0.eos.163.209.IP)
[16:56:25] <Ichiru> I might actually switch over to glium
[16:56:35] <Ichiru> No glGetError <3
[16:57:02] <Ichiru> ...can I combine it with SDL2?
[16:57:16] <tomaka> Yeah
[16:57:20] <tomaka> but it's unsafe
[16:57:31] <tomaka> "unsafe" means "if you screw up, it crashes"
[16:57:44] <tomaka> but it's fine if you don't screw up
[16:57:53] <Ichiru> hm
[16:57:57] *** Quits: SneakySnake (nya@moz-i9is4u.pool.telekom.hu) (Quit: Leaving)
[16:58:13] <tomaka> however I haven't added the possibility to remove glutin yet
[16:58:19] <tomaka> (on my todo list)
[16:58:25] <eddyb> Ichiru: do you need SDL2 for anything?
[16:58:51] <eddyb> tomaka: holy shit use some macros
[16:58:58] <Ichiru> It's more what I'm used to
[16:59:17] <tomaka> eddyb: yeah I know
[16:59:19] <Ichiru> But with an ugly obj-C hack I can get the top bar to display whatever menu I want
[16:59:38] <eddyb> Ichiru: can't you use glutin?
[16:59:56] <eddyb> I guess glutin needs to expose platform windowing context
[17:00:11] <eddyb> (there was that clipboard lib that needed it)
[17:00:21] <Ichiru> Well actually
[17:00:25] <Ichiru> It modifies shared state x)
[17:00:39] *** Quits: nical (nical@moz-543qtb.2500.1rfi.0450.2001.IP) (Client exited)
[17:00:44] *** Joins: eerie (eerie@moz-njefna.red.bezeqint.net)
[17:00:46] <Ichiru> tomoka: You are a brave man interfacing with Cocoa
[17:01:00] <tomaka> Ichuru: in fact I don't manage the os/x part of glutin
[17:01:06] <tomaka> as I don't have a mac
[17:01:19] <Ichiru> Ah
[17:01:23] <Ichiru> Well whoever wrote it is a brave man
[17:01:40] <tomaka> There have been 4/5 contributors for mac
[17:01:53] <Ichiru> Glutin looks like it might be easier
[17:01:54] <eddyb> almost one!
[17:01:58] <tomaka> haha
[17:02:01] *** Joins: Guest74 (textual@moz-il1.n6s.204.65.IP)
[17:02:04] <Ichiru> Than modifying compiled binaries to get SDL2 to work
[17:02:53] *** Joins: nical (nical@moz-543qtb.2500.1rfi.0450.2001.IP)
[17:04:28] <eddyb> tomaka: how hard would it be to allow disabling the WM frame?
[17:04:42] <eddyb> tomaka: I'm pretty sure I need separate windows for menus
[17:04:54] <tomaka> the WM frame?
[17:05:00] <eddyb> (and I'd like a splash screen, but that's really pretentious)
[17:05:05] <eddyb> tomaka: sorry, WM decorations
[17:05:08] <Ichiru> You want to disable window decorations?
[17:05:18] *** Quits: silven (quassel@moz-0roor3.priv.bahnhof.se) (Ping timeout: 121 seconds)
[17:05:20] <Ichiru> Windows it's just a Win32 call I think
[17:05:20] <tomaka> on windows it's easy
[17:05:21] *** Joins: silven (quassel@moz-0roor3.priv.bahnhof.se)
[17:05:33] <eddyb> tomaka: that's frightening
[17:05:42] <Ichiru> x11 i think you need to use wm hints
[17:05:46] <Ichiru> cocoa no idea :P
[17:05:58] <eddyb> also, hmm
[17:06:13] <tomaka> we could also add transparency while we're at it
[17:06:20] <eddyb> is there even a way to have pixels with alpha of 0 be transparent?
[17:06:22] <eddyb> hah
[17:06:53] <eddyb> tomaka: you can toggle alpha compositioning at the window level across all platforms?
[17:07:09] <Ichiru> Windows is composited for all windows I think
[17:07:27] <tomaka> I don't know if it can be toggled, it would maybe be a flag at creation
[17:07:43] <eddyb> right, I would be glad if it were possible at all :P
[17:08:06] <eddyb> (which I'm pretty sure it is, because chrome does it)
[17:08:25] <eddyb> now I'm wondering how chrome integrates with aero, but it's probably too painful
[17:08:45] <eddyb> oh and OSX has that global menu bar... fun
[17:08:51] <Ichiru> Global menu bar is easy
[17:09:09] <Ichiru> But you have to launch your application in a certain way
[17:09:18] *** Joins: hhhhhhhhhh (mike@moz-969kuj.cable.virginm.net)
[17:09:20] <Ichiru> Which only works with obj-c :(
[17:09:34] <eddyb> (technically... there's a menu bar thing for kde4 and I bet plasma5 will have it at some point. which means there's a dbus protocol for it)
[17:09:54] <Ichiru> Use unity's method :P
[17:10:04] <Ichiru> Go into GTK+ and rip out their menubars
[17:10:05] <eddyb> which unity?
[17:10:10] <Ichiru> Unity the DE
[17:10:13] <eddyb> ah
[17:10:24] <Ichiru> ie Ubuntu OSX
[17:10:29] <eddyb> it's either using dbus or something worse
[17:10:45] <Ichiru> Ubuntu patches the ui toolkits iirc
[17:10:54] <tomaka> in the comments in the msdn: "If you pass RGB(255, 0, 255) as the color key you won't be able to click on the window."
[17:11:03] <eddyb> ahahahahahahahahaha
[17:11:10] <Ichiru> x)
[17:11:11] <eddyb> tomaka: the immortal magenta
[17:11:26] <Ichiru> tomaka: Isn't win32 lovely?
[17:11:35] <Ichiru> aw yes
[17:11:39] <eddyb> WindowsBunny knows it better
[17:11:42] <Ichiru> All my dependencies I want work now I'm using nightly
[17:12:02] <Ichiru> Now to decide on versioning
[17:12:12] *** Joins: Rym (y@moz-g4dip9.range86-187.btcentralplus.com)
[17:12:15] <Ichiru> I think I'll increment the major version every time I change a line of code
[17:12:51] <WindowsBunny> tomaka: seriously?
[17:12:52] <eddyb>         (self.ptr as *const _) < (other.ptr as *const _)
[17:12:53] <WindowsBunny> xD
[17:12:54] <eddyb> this better work
[17:14:05] <tomaka> WindowsBunny: in the comments: https://msdn.microsoft.com/en-us/library/windows/desktop/ms633540%28v=vs.85%29.aspx
[17:16:19] <Ichiru> Why is the glium tutorial shader #version 110?
[17:16:27] *** Joins: saterus (saterus@moz-o0ug28.res.rr.com)
[17:16:40] *** Quits: Rym (y@moz-g4dip9.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[17:16:45] *** Joins: sambotron (sambotron@moz-lgc.bdf.247.173.IP)
[17:17:06] <tomaka> It's the lowest possible version, works everywhere except os/X
[17:17:12] <tomaka> oh..
[17:17:25] *** Quits: pcwalton (pcwalton@moz-nh2.o1i.216.216.IP) (Ping timeout: 121 seconds)
[17:17:42] <tomaka> There's a `program!` macro that chooses the right version of your shaders: https://github.com/tomaka/glium/blob/master/src/macros.rs#L100
[17:18:04] <Ichiru> oh, nice!
[17:18:27] <tomaka> aaaand I spotted a mistake https://github.com/tomaka/glium/blob/master/src/macros.rs#L147
[17:19:03] <Ichiru> Don't you need a _ => ?
[17:19:11] *** Joins: vire (vire@moz-f5qook.net.upcbroadband.cz)
[17:19:15] <tomaka> hmmm
[17:19:31] <tomaka> I didn't even think of this
[17:19:45] *** Joins: pcwalton (pcwalton@moz-nh2.o1i.216.216.IP)
[17:19:46] *** Quits: eerie (eerie@moz-njefna.red.bezeqint.net) (Connection closed)
[17:19:51] <tomaka> for the moment it just panicks if it doesn't find any suitable version
[17:20:18] <sillesta> any osx maintainers for glutin in here, tomaka?
[17:20:52] <tomaka> there's bjz, but he's probably not there
[17:21:06] <Ichiru> With OSX
[17:21:31] <Ichiru> If you specify a core context
[17:22:09] <Ichiru> You can use #version 140 up
[17:22:25] <Ichiru> Otherwise it limits you to OpenGL 2.1
[17:22:31] <sillesta> 150 and up
[17:22:36] <sillesta> 140 is 3.1
[17:22:45] <Ichiru> I know
[17:23:03] <Ichiru> I just used #version 140 shaders in a C project
[17:23:18] <Ichiru> then again I specified a 3.1 context
[17:23:28] <tomaka> The specs say that all GL versions >= 3.1 must support 140 IIRC
[17:23:40] *** Quits: summerlight_ (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[17:23:45] <Ichiru> It gave me a 4.1 context when I asked for 3.1 though
[17:23:47] <tomaka> 140 or more
[17:23:52] <sillesta> osx doesn't support 3.1
[17:24:11] *** Joins: eerie (eerie@moz-njefna.red.bezeqint.net)
[17:24:13] <Ichiru> What?
[17:24:18] <tomaka> Yeah OS/X only has "Legacy" (which is 2.1 I think), 3.2 or 4.1
[17:24:25] <Ichiru> eh
[17:24:31] <Ichiru> Well it supports #version 140 shaders
[17:25:11] <sillesta> maybe ask OneSadCookie ;)?
[17:25:33] <Ichiru> So tomoka, with that macro
[17:25:43] <tomaka> Yes Ichuru?
[17:25:44] *** Joins: dmac (dmac@moz-h4nvlf.ca.comcast.net)
[17:25:47] <Ichiru> Would I need to supply only 150 and 110 shaders?
[17:25:52] <tomaka> Yeah
[17:25:58] <Ichiru> Ok that's do-able
[17:26:04] <tomaka> and 100 ES if you want to support GLES2
[17:26:31] <Ichiru> GLES2.. on desktop?
[17:26:38] <Ichiru> Oh. Raspberry Pi!
[17:27:01] *** Joins: brson (brson@moz-cfhap5.mtv2.mozilla.com)
[17:27:08] <tomaka> Page 26 of https://www.opengl.org/registry/doc/glspec44.core.pdf: "The core profile of OpenGL 4.4 is also guaranteed to support all previous ver-
[17:27:08] <tomaka> sions of the OpenGL Shading Language back to version  1.40"
[17:27:35] <tomaka> Ichiru: glutin supports android, and more or less emscripten
[17:27:46] <Ichiru> oh
[17:28:12] <Ichiru> So I -can- make it javascript :P
[17:28:43] <tomaka> glium doesn't entirely support GLES2 though
[17:28:57] <tomaka> I have a lot of tests, most of them fail with ES2
[17:29:03] *** Quits: dmac (dmac@moz-h4nvlf.ca.comcast.net) (Connection closed)
[17:29:06] <tomaka> I have only recently started this
[17:29:11] <Ichiru> tbh I'm just doing accelerated 2D
[17:29:16] <tomaka> But the teapot example for example works with ES2
[17:29:18] *** Joins: dmac (dmac@moz-h4nvlf.ca.comcast.net)
[17:30:44] * tomaka afk
[17:31:44] *** Joins: jensnockert (jensnockert@moz-kqmfiv.cust.tele2.se)
[17:32:34] *** Joins: James (quassel@moz-olnmts.range86-163.btcentralplus.com)
[17:32:48] *** Quits: pcwalton (pcwalton@moz-nh2.o1i.216.216.IP) (Client exited)
[17:33:14] <WindowsBunny> I'm a little teapot
[17:33:17] <WindowsBunny> short and stout
[17:33:21] <WindowsBunny> here is my handle, here is my spout
[17:33:28] <WindowsBunny> when I get all steamed up, here me shout
[17:33:33] <WindowsBunny> Just tip me over and pour me out
[17:34:06] <Ichiru> bravo
[17:35:55] *** Quits: Guest44 (textual@moz-to0.eos.163.209.IP) (Ping timeout: 121 seconds)
[17:36:05] *** Quits: sambotron (sambotron@moz-lgc.bdf.247.173.IP) (Connection closed)
[17:36:13] *** Joins: sambotron (sambotron@moz-lgc.bdf.247.173.IP)
[17:37:18] <Ichiru> Yay, I got an accelerated magenta screen
[17:38:37] * WindowsBunny accelerates Ichiru
[17:39:08] <Ichiru> tomoka: "Note that the crates.io version won't compile on OS/X and Android because the required dependencies haven't been uploaded yet." - Need to change this since it compiles fine :P
[17:40:12] <Ichiru> ...I can't make a fixed size window?
[17:40:14] <Ichiru> That's cruel
[17:43:53] <Ichiru> I don't want users to be able to choose their own resolutions :P
[17:43:59] <Ichiru> 640x480 is the only valid gamedev resolution
[17:44:10] <sillesta> not 400x800?
[17:44:38] <Ichiru> mobile doesn't count as true gamedev :P
[17:46:17] <sillesta> tomaka: i swear i tried to add this line as well, just forgot about the other ~10 or so ;) https://github.com/tomaka/glutin/pull/378/files#diff-a1553ac6c30a9555b13c898e7c0f9377R80
[17:46:42] <rsaarelm> I do 640x360, you can scale that up pixel-perfect to TV resolutions.
[17:47:36] <eddyb> rsaarelm: NTSC?
[17:47:46] <rsaarelm> 720p and 1080p.
[17:48:03] <Ichiru> But my screen is 1400x900 :(
[17:48:25] <eddyb> oh, 360p, that makes sense
[17:48:51] <Ichiru> PAL > NTSC
[17:49:47] <eddyb> I am still not certain how composite video works
[17:50:26] <Ichiru> All I know is that I plug in the yellow plug and I get a fuzzy image :P
[17:51:19] <eddyb> but 8088mph seems more like http://www.michaelbach.de/ot/col-Benham/index.html to me, than anything else
[17:51:44] <eddyb> I actually wanted to say "interference patterns"
[17:52:08] *** Quits: eerie (eerie@moz-njefna.red.bezeqint.net) (Connection closed)
[17:53:12] <eddyb> oh boy it's compiling :D
[17:53:23] <Ichiru> what
[17:53:34] <Ichiru> The page says the colour is an optical illusion
[17:53:40] <Ichiru> But I took a screenshot and the blue dot is still there
[17:53:54] <eddyb> Ichiru: wtf
[17:54:04] <eddyb> a.x1(=0), a.y1(=0), a.x2(=0), a.y2(=0), b.x1(=0), b.y1(=200), b.x2, b.y2(=0), c.x1(=300), c.y1, c.x2(=600), c.y2(=400)
[17:54:07] *** Quits: lahwran (lahwran@lahwran.net) (Quit: ZNC - http://znc.in)
[17:54:11] <eddyb> hehehehe my shitty solver works
[17:54:44] <Ichiru> oh whoops
[17:54:48] <Ichiru> I was looking at the blue dot
[17:54:50] <Ichiru> Not the colours
[17:54:59] <eddyb>     a.y2(=0) + b.y1(=200) = 400
[17:55:08] <eddyb> apparently my system is broken :(
[17:55:45] *** Quits: jensnockert (jensnockert@moz-kqmfiv.cust.tele2.se) (Connection closed)
[17:56:03] <Ichiru> you're solving linear equations?
[17:56:09] <eddyb> Ichiru: yupp
[17:56:13] <tomaka> Ichiru: there's a with_dimensions method when building the window
[17:56:14] <eddyb> a very simple example
[17:56:35] <Ichiru> tomaka: I did that, but the window can be resized by the user
[17:56:38] <Ichiru> I don't want that :P
[17:56:41] <tomaka> ah
[17:56:47] *** Joins: avikpal (avikpal@moz-45o.mde.194.117.IP)
[17:56:56] <tiffany> the way the rotating wheel flickers is quite disconcerting to me, but I don't see any additional colours
[17:57:15] <eddyb> tiffany: you need to adjust it
[17:57:16] <tiffany> I did notice the flashing gradient around the sides, but it was obvious to me that was just a perception error
[17:57:21] <tiffany> eddyb: I cranked it from 200 to 500
[17:57:30] <eddyb> I got brown at some point
[17:57:47] <tiffany> if I close my eyes at the right time I can catch a glimpse of the wheel in its fullest, even when it is rotating at high speed
[17:57:51] <eddyb> tiffany: but really, this is a very subjective effect. it might as well not work for you
[17:57:59] <tiffany> at other times, the screen is mid-sync
[17:58:02] *** Joins: Rym (y@moz-g4dip9.range86-187.btcentralplus.com)
[17:58:06] <eddyb> hah, yeah, that's an issue
[17:58:13] <Ichiru> Might be a monitor thing
[17:58:17] <tiffany> optical illusions don't tend to work on me
[17:58:23] <tiffany> and when they do, it's really obvious what is going on
[17:58:40] * eddyb envies tiffany's eyes
[17:59:15] <Ichiru> tomoka: When I call display.draw() does that set glViewport?
[17:59:30] <eddyb> wait wtf
[17:59:31] <tomaka> Ichiru: I'm "tomaka" by the way :D
[17:59:40] <Ichiru> oh
[17:59:40] <Ichiru> oops
[17:59:41] <Ichiru> x)
[17:59:42] <tomaka> I called you "Ichuru" twice, you didn't notice
[17:59:53] <tomaka> anyway
[18:00:03] <Ichiru> Names are not my forté
[18:00:06] <tomaka> glViewport is called when you call draw(&vb, &ib, ...)
[18:00:16] <tomaka> so target.draw() or texture.draw()
[18:00:21] *** Joins: Lilly (Lilly@moz-ca683g.bredband.comhem.se)
[18:00:23] <sillesta> my eyes have been violated
[18:00:23] <Ichiru> oh ok
[18:00:43] <Ichiru> now to figure out how your vertex buffers work
[18:00:47] <tomaka> if you write "tomoka" I don't get pinged
[18:00:52] <tiffany> eddyb: for sufficiently high contrast animations I can often see individual frames and the LCD ghosting between states
[18:01:09] <eddyb> tiffany: even with vsync?
[18:01:16] <Ichiru> tomaka tomoka tomuka
[18:01:17] <tiffany> yeah
[18:01:22] <Ichiru> That way I'll get at least one of them right
[18:01:32] <tomaka> Ichuru Ichiru Uchuri
[18:01:43] <sillesta> isn't 'tomaka' a weapon?
[18:01:46] <sillesta> axe-thingy
[18:01:47] <tiffany> it's really obvious when playing a game like canabalt
[18:01:53] <tomaka> sillesta: a tomahawk?
[18:01:55] <tiffany> in fact, it makes the game much more difficult to play
[18:01:56] <sillesta> yes!
[18:02:14] <tiffany> I also see the refreshing of CRTs, so I can't use CRT monitors...
[18:02:15] <Ichiru> The hardest name is flibitijibibo imo
[18:02:24] <Ichiru> I keep on trying to look at his github stuff and I always get the name wrong
[18:02:32] *** Quits: Rym (y@moz-g4dip9.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[18:02:40] <Ichiru> tiffany: Fluorescent lights must kill you
[18:02:51] <tiffany> if I pay attention to them too much I can see them yeah
[18:02:58] <tiffany> especially when I have headaches, which makes the headache worse...
[18:03:27] <tiffany> for lights, the oscillation is at least a sine wave
[18:03:36] <tiffany> for CRT monitors it's more like a triangle wave
[18:04:23] <Ichiru> I forget what they look like
[18:04:29] <Ichiru> But I know what they sound like and that doesn't sound nice x)
[18:05:25] <eddyb> tiffany: what do you know about linear programming?
[18:05:33] <tiffany> it is quite bright on the current line being hsynced, and then it gets dimmer as the phosphorous does an inverse square brightness curve
[18:05:41] <tiffany> and then it's practically gone by the time the next vsync starts
[18:05:45] <ytain> tiffany you see that vsync refresh because of the LED pulsing effect (the LCD light). Get a monitor that is flicker free (using LED light that doesn't use PWR)
[18:06:02] <tiffany> oh god
[18:06:07] <tiffany> yeah no, I don't have a flickering LCD monitor
[18:06:09] <ytain> like LG 24MP55
[18:06:09] <tiffany> that would be awful
[18:06:31] <tiffany> I tried turning down the brightness on my LCD monitor once, but I extremely quickly discovered that it implements brightness scaling not by tuning the LED backlight, but by doing PWR
[18:06:38] *** Joins: Astrum|Lap (Astrum|Lap@moz-7enfbr.co.comcast.net)
[18:06:54] <tiffany> I'm afraid of using an oculus rift for this reason, it has PWR enabled by default because it reduces motion blur
[18:06:57] <tiffany> but I can see it...
[18:07:00] <ytain> right
[18:07:04] <Ichiru> So you put it on your face
[18:07:08] *** Quits: Astrum|Lap (Astrum|Lap@moz-7enfbr.co.comcast.net) (A TLS packet with unexpected length was received.)
[18:07:09] <Ichiru> And all you see is flickering
[18:07:58] <eddyb> System [a.x1(=0), a.y1(=0), a.x2(=600), a.y2(=200), b.x1(=0), b.y1(=200), b.x2(=300), b.y2(=400), c.x1(=300), c.y1(=200), c.x2(=600), c.y2(=400)] { }
[18:08:01] *** Joins: SneakySnake (nya@moz-i9is4u.pool.telekom.hu)
[18:08:01] <eddyb> \o/
[18:08:04] <tiffany> it is possible that doing that would be bad enough to cause me to have a seizure
[18:08:06] *** Joins: Astrum|Lap (Astrum|Lap@moz-7enfbr.co.comcast.net)
[18:08:12] <eddyb> now to render what I've just layouted
[18:08:27] <Ichiru> tomaka: I'm not quite sure how to get a blank VertexBuffer
[18:08:40] *** Quits: SneakySnake (nya@moz-i9is4u.pool.telekom.hu) (Quit: Leaving)
[18:08:41] <tiffany> so yeah eddyb, this ability is a blessing and a curse
[18:08:42] <Ichiru> Would I just take a vec and push how many blank vertices I need? x)
[18:08:47] <tiffany> I have a pretty nasty headache from that spinning wheel
[18:09:37] *** Joins: Gabriel_7 (Gabriel@moz-munkj7.mtgr.92aj.0e35.2a01.IP)
[18:10:02] <tomaka> Ichiru: for the moment yeah :-/
[18:10:10] <tomaka> Ichiru: I have to add an "empty" method
[18:10:31] <Ichiru> Can I upload a subset of vertices?
[18:10:41] <Ichiru> oh
[18:10:43] <Ichiru> I could use a slice :D
[18:11:23] <Ichiru> Except write takes a Vec -_-
[18:11:45] <tomaka> Yeah thats also a defect :x
[18:11:51] <tomaka> Both are very easy to fix though
[18:11:52] <Ichiru> Allocating a vec each frame sounds expensive :P
[18:12:24] <tomaka> The reason why it takes a Vec is because there used to be a background thread which executed commands in parallel
[18:12:35] <tomaka> now it's no longer the case, but if I change it to a slice I break backward-compatibility
[18:12:51] <Ichiru> Can I even write into an index buffer?
[18:13:12] <tomaka> No :x it's also easy to fix though
[18:13:27] <Ichiru> Well there goes my entire use-case :P
[18:13:33] <tomaka> Don't go away though :D I can fix all that in 15mn
[18:13:41] <Ichiru> And I need to implement a sleep of some sorts in my game loop
[18:13:43] <tomaka> the underlying internal "Buffer" struct implements all that
[18:13:58] <tomaka> all that's missing is the API
[18:14:07] *** Joins: canhtak (canhtak@moz-1a9fh1.luxdsl.pt.lu)
[18:14:08] <Ichiru> I learnt the other day that an infinite loop with just a glClear and a window swap makes a macbook rather hot
[18:14:30] <tomaka> there's std::thread::sleep_ms
[18:14:55] <XMPPwocky> there's also turning vsync on, which is easier :P
[18:15:12] <kvark> XMPPwocky: if only drivers were sleeping
[18:15:13] <bvssvni_> kvark: why do you think focusing Piston on Gfx is a mistake?
[18:15:19] *** bvssvni_ is now known as bvssvni
[18:15:34] <kvark> bvssvni_: obviously, because there is glium
[18:15:54] <bvssvni> kvark: well, what if there were one more API?
[18:15:57] <kvark> so you should be able to work with both (and potential more)
[18:16:00] <bvssvni> kvark: or two more APIs?
[18:16:05] *** Joins: eerie (eerie@moz-njefna.red.bezeqint.net)
[18:16:06] <Ichiru> gfx-rs is a lot of abstraction
[18:16:26] <kvark> bvssvni: leave that to the user? just make sure your libraries are abstract
[18:16:59] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[18:16:59] <bvssvni> kvark: you don’t need all libraries to be abstract
[18:17:09] <kvark> bvssvni: even better
[18:17:09] <Ichiru> factory x)
[18:17:11] <Ichiru> Reminds me of Java
[18:17:23] <kvark> Ichiru: scared?
[18:17:24] <mindtree> kvark: I think the point of that piston_window lib is to just pick one window/graphics combo and make a simple-to-get-started repo (not to be super generic or w/eva like all the other libs)
[18:17:34] <Ichiru> Or really, anything 'enterprise'
[18:17:39] <Ichiru> Which, kvark, is terrifying
[18:17:39] <FreeFull> BeanFactoryConstructorManager
[18:17:41] <kvark> mindtree: that kinda makes sense
[18:17:59] <bvssvni> mindtree: you are better at explaining it than me :)
[18:18:01] <kvark> Ichiru: sorry, I don't have these nightmare associations
[18:18:01] <Ichiru> OracleDatabaseConnectionManagerFactory
[18:18:16] <kvark> bvssvni: mindtree: thanks!
[18:18:28] <Ichiru> c# likes to mix gamedev and enterprise
[18:18:39] * mindtree falls asleep
[18:18:42] *** Quits: mindtree (Mitch@moz-3gf834.iprimus.net.au) (Quit: leaving)
[18:19:18] <Ichiru> XML is the only data storage format you'll ever need (tm)
[18:19:21] <bvssvni> kvark: I was thinking of using Canvas, but then I thought we might need the flexibility of keeping separate parts
[18:19:44] <kvark> Ichiru: I'm more fed up with "manager" concept as such. If there is something that is responsible for creating and updating the resources, I believe Factory is an appropriate name
[18:20:13] *** Joins: vosen (vosen@moz-mtm1g4.dynamic.chello.pl)
[18:20:13] <Ichiru> The last game thing I did was all "managers"
[18:20:18] <WindowsBunny> Ichiru: I ended up creating my own file format :D
[18:20:20] <Ichiru> ContentManager
[18:20:22] <Ichiru> BulletManager
[18:20:36] <WindowsBunny> Ichiru: Some crazy memory mapped thing
[18:20:55] <XMPPwocky> kvark: the issue is, a factory generally doesn't contain the things it manufactures inside itself
[18:20:59] <XMPPwocky> maybe "Warehouse" :P
[18:21:00] <Ichiru> WindowsBunny: That's the best way to go
[18:21:11] <WindowsBunny> Ichiru: It's really wonderfully fast
[18:21:24] *** Joins: lahwran (lahwran@lahwran.net)
[18:21:41] <kvark> XMPPwocky: gfx::Factory doesn't contain anything, the implementation can
[18:21:42] <WindowsBunny> Pretty much the entire cost is cache misses :D
[18:21:55] <Ichiru> I've yet to figure out how cache works
[18:22:10] <Ichiru> I wrote C like it was C#
[18:22:16] <Ichiru> And now I'm writing rust like it was C# :P
[18:22:21] <Ichiru> Everything is a struct with an impl attached!
[18:22:25] *** Joins: avikpal_ (avikpal@moz-4e2.dga.79.112.IP)
[18:22:39] <WindowsBunny> Unfortunately I didn't think about cache too much when writing the format
[18:22:52] *** Joins: bytewise (bytewise@moz-sk6v2k.eduroam.rwth-aachen.de)
[18:23:05] <FreeFull> Ichiru: Structs with impls aren't that uncommon anyway =P
[18:23:13] <Ichiru> How much do cache misses affect the performance of a program?
[18:23:23] <WindowsBunny> Ichiru: It depends on what you're doing
[18:23:41] *** Joins: avikpal__ (avikpal@moz-45o.mde.194.117.IP)
[18:23:52] <tomaka> can be negligible or can be 5 times slower
[18:23:54] <kvark> for memory intensive apps, like data compressors, cache efficiency is everything
[18:24:02] *** Quits: avikpal (avikpal@moz-45o.mde.194.117.IP) (Connection closed)
[18:24:16] <WindowsBunny> Or if you were doing the kind of benchmarks I was doing
[18:24:29] <WindowsBunny> recursing over all the data in the file, it was entirely cache
[18:24:49] <WindowsBunny> especially since I was following pointers jumping around to different locations....
[18:24:52] <FreeFull> Can be much worse than 5 times slower
[18:25:19] *** Joins: avikpal (avikpal@moz-b4l.os6.226.117.IP)
[18:25:23] <WindowsBunny> If you're doing memory mapped files, with a hard drive, a cache miss can take milliseconds :P
[18:25:24] <Ichiru> "I didn't optimise for cache use, and my program took 27 years to complete"
[18:25:55] <WindowsBunny> If your hard drive has a bad sector, it can take several seconds
[18:25:55] <Ichiru> Simple: Require all users have a PCI SSD
[18:26:07] <sillesta> "i tried to compile Qt with 128mb of ram"
[18:26:26] <Ichiru> x)
[18:26:44] *** Quits: avikpal_ (avikpal@moz-4e2.dga.79.112.IP) (Ping timeout: 121 seconds)
[18:27:09] <WindowsBunny> That said, using memory mapped files is nice, because if you run low on ram and the OS has to unload some of your loaded data, it can just silently drop it
[18:27:11] *** Quits: fmtq (fmtq@moz-d08itp.tpgi.com.au) (Ping timeout: 121 seconds)
[18:27:20] <WindowsBunny> whereas with non memory mapped data, it has to write it to disk first
[18:28:04] <Ichiru> high-memory applications sound hard
[18:28:38] *** Quits: avikpal__ (avikpal@moz-45o.mde.194.117.IP) (Ping timeout: 121 seconds)
[18:29:42] <eddyb> piston: where this is its own crate https://github.com/PistonDevelopers/viewport/blob/master/src/lib.rs
[18:29:52] *** Joins: fmtq (fmtq@moz-d08itp.tpgi.com.au)
[18:30:46] <Ichiru> Good way of getting incremental building :P
[18:32:44] <WindowsBunny> eddyb: And anyone who gets added to the piston org has their travis cluttered with all that bullshit
[18:33:10] <Ichiru> What's travis?
[18:33:37] <WindowsBunny> All I want to find is my crates that have failures D:
[18:33:38] <WindowsBunny> http://i.imgur.com/V57fMSu.png
[18:33:55] <WindowsBunny> but nooo, I gotta scroll through a bunch of piston things
[18:33:59] <Ichiru> Minecraft default settings:
[18:34:03] <Ichiru> Use VBOs - OFF
[18:34:05] <Ichiru> what
[18:34:57] <eddyb> bvssvni, kvark: the examples for gfx_graphics don't handle window resizes?
[18:35:14] <kvark> eddyb: possibly
[18:35:35] <Ichiru> WindowsBunny: That's terrifying
[18:36:07] <sillesta> Ichiru: minecraft relies on opengl 1.x
[18:36:20] <Ichiru> That'd explain the poor performance
[18:36:33] <sillesta> among other design choices, yeah
[18:36:40] <kvark> minecraft is just another live proof that graphics doesn't matter
[18:36:52] *** Joins: nerdopoly (Mibbit@moz-inc16q.range86-146.btcentralplus.com)
[18:36:57] <eddyb> kvark: oh, the make_fake_output call is too early (and doesn't use viewport info)
[18:37:26] <eddyb> kvark: updated viewport info, I meant
[18:37:27] <kvark> eddyb: is it? I see it being after the window is created
[18:37:36] <eddyb> yes, but it's never updated
[18:37:50] <Ichiru> Minecraft doesn't even start on Linux for me anymore
[18:38:05] <Ichiru> Idk what happened with the initial design
[18:38:07] <kvark> eddyb: right, that's a bug
[18:38:54] <kvark> https://github.com/PistonDevelopers/gfx_graphics/issues/206
[18:39:00] <tomaka> Ichiru: I opened https://github.com/tomaka/glium/pull/744 and https://github.com/tomaka/glium/pull/745
[18:39:26] <Ichiru> Nice
[18:39:35] <Ichiru> Now I can initialise a vbo from an array :D
[18:39:52] <Ichiru> Just need to have vbo::write let me do a partial upload and it'll be complete :P
[18:40:26] <tomaka> Ichiru: it's also possible with vb.slice(12, 5).write(...)
[18:40:33] <Ichiru> oh?
[18:40:36] <tomaka> vb.slice(12, 5).unwrap().write(...)
[18:40:45] <Ichiru> Well in that case that's good!
[18:40:52] <tomaka> note that the `5` is the length, I'm changing this in the next version to use the "start .. end" notation
[18:41:03] <tomaka> which is more idiomatic in rust
[18:41:21] *** Quits: bytewise (bytewise@moz-sk6v2k.eduroam.rwth-aachen.de) (Quit: Quit)
[18:41:26] <Ichiru> hm
[18:41:31] <Ichiru> Can I pass a slice to that?
[18:41:35] <Ichiru> Or do I need to pass a vec
[18:41:51] <tomaka> Ooops, it's a Vec
[18:41:55] <tomaka> >_>
[18:42:02] <Ichiru> x)
[18:42:15] <tomaka> note that allocating a Vec is not *that* expensive
[18:42:35] <Ichiru> True
[18:42:38] <tomaka> (in other words, I'm a bit lazy right now)
[18:44:24] *** Joins: Layl (Layl@moz-65hqmf.direct-adsl.nl)
[18:46:35] *** Joins: eerie_ (eerie@moz-njefna.red.bezeqint.net)
[18:46:41] <Ichiru> Gotta push the limits :P
[18:46:59] <WindowsBunny> Actually, thats a good question
[18:47:07] <WindowsBunny> how slow is allocating a Vec relative to a syscall
[18:47:25] <Ichiru> a syscall
[18:47:32] <Ichiru> Is a slice a syscall?
[18:48:23] <Layl> relative to a call that goes past the kernel boundary you mean?
[18:49:01] <tomaka> a syscall is *very* slow
[18:49:11] *** Quits: eerie (eerie@moz-njefna.red.bezeqint.net) (Ping timeout: 121 seconds)
[18:49:14] <tomaka> everything's faster than a syscall
[18:49:20] <Ichiru> Allocating a Vec could result in a syscall
[18:49:28] <Ichiru> No wait that's a page-fault
[18:49:51] <Layl> well it's when a new page of memory needs to be requested right?
[18:50:01] <tomaka> Afaik, you have a syscall to allocate big chunks of memory
[18:50:09] <Layl> I'm not familiar with the interesting malloc implementation that rust uses
[18:50:30] <tomaka> I don't know if you have a page fault the first time you access the memory that the kernel allocated
[18:50:33] <Layl> I doubt you should expect a kernel call every frame though
[18:50:36] <tomaka> of if the kernel handles that already
[18:50:52] <Layl> isn't a page fault when you try to access memory not in a page you own
[18:51:27] <Layl> oh my bad, I'm mistaken
[18:51:40] <eddyb> Layl: you'll have many syscalls every frame *for sure*
[18:52:12] *** Joins: Rym (y@moz-g4dip9.range86-187.btcentralplus.com)
[18:52:18] <eddyb> you can only remove all of them on the Mill
[18:52:19] <tomaka> a page fault is when you access some memory accessible to your program but not in RAM
[18:52:25] <Layl> right of course, sleep alone requires a kernel call
[18:52:32] <Layl> and some locking mechanisms as well right?
[18:52:42] <Ichiru> And sending data to the graphics card x)
[18:52:42] <eddyb> Layl: how about rendering :)?
[18:52:56] <Layl> rendering doesn't require a call into the kernel does it?
[18:53:00] <eddyb> lol
[18:53:14] <eddyb> how do you talk to the GPU?
[18:53:14] <Layl> I could be entirely mistaken, or we could have a mistake on semantics here
[18:53:18] <Layl> through the driver
[18:53:24] <eddyb> where is the driver?
[18:53:26] <Ichiru> The driver that's in the kernel
[18:53:35] <Layl> oh yep a mistake in semantics
[18:53:35] <tomaka> on windows it even goes through a validation layer because people were tired of bad drivers triggering BSODs
[18:53:37] *** Quits: James (quassel@moz-olnmts.range86-163.btcentralplus.com) (Ping timeout: 121 seconds)
[18:53:38] *** Joins: avikpal_ (avikpal@moz-45o.mde.194.117.IP)
[18:53:44] <Ichiru> wtf
[18:53:51] <Ichiru> My youtube video paused
[18:53:54] <Ichiru> Switched to the flash player
[18:53:56] <Ichiru> And then continued
[18:54:18] <eddyb> adaptative video decoding :P?
[18:54:20] <tomaka> it's not really people that were tired, but microsoft that was being blamed for video drivers crashing
[18:54:39] <Ichiru> Flash should die already
[18:54:54] <eddyb> Ichiru: but I haven't even started watching that show!
[18:54:54] *** Quits: avikpal (avikpal@moz-b4l.os6.226.117.IP) (Connection closed)
[18:55:02] <eddyb> I'm probably late a season or two on Arrow as well
[18:55:04] <Ichiru> Very funny
[18:55:29] *** Quits: eerie_ (eerie@moz-njefna.red.bezeqint.net) (Connection closed)
[18:56:42] *** Quits: Rym (y@moz-g4dip9.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[18:57:25] <eddyb> is cargo test not in release mode?
[18:57:32] <eddyb> because I want to build benchmarks...
[18:57:46] <eddyb> it's compiling everything again
[18:57:48] <tomaka> cargo bench is in release
[18:58:04] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[18:58:05] <eddyb> oh I ran that wrong
[18:58:34] <Ichiru> tomaka: Is the glium="*" dependency the same as using git?
[18:58:54] <tomaka> Ichiru: the crates.io is a bit behind
[18:59:16] <Ichiru> I might change the dependency to the git repo for now then
[18:59:17] <tomaka> Basically, everything in "UNRELEASED": https://github.com/tomaka/glium/blob/master/CHANGELOG.md
[19:00:32] <tomaka> I'll probably publish 0.2.4 after the PRs I linked above
[19:00:51] <eddyb> src/main.rs:106:7: 116:7 error: type `&mut test::Bencher` does not implement any method in scope named `loop`
[19:00:53] <eddyb> uhm
[19:01:01] <eddyb> why can I use keywords as method names?
[19:01:13] <bvssvni> kvark: how do you change gfx_device_gl::Output when width and height are private?
[19:01:20] <eddyb> someone report it as priority pls
[19:01:30] <Ichiru> tomaka: You need to add that stuff to IndexBuffer
[19:01:33] <Ichiru> :P
[19:01:39] <Ichiru> as well as maybe a write method please? x)
[19:01:43] <eddyb> playbot: true.let()
[19:01:44] -playbot- <anon>:9:14: 9:19 error: type `bool` does not implement any method in scope named `let`
[19:01:44] -playbot- <anon>:9         true.let()
[19:01:44] -playbot- output truncated; full output at: http://bit.ly/1FRlDH7
[19:02:03] <eddyb> that should not parse
[19:02:03] <tomaka> Ichiru: the problem is that the IndexBuffer has a design a bit shitty
[19:02:18] <tomaka> I'm not satisfied with it
[19:02:23] <tomaka> not the indexbuffer itself, but the index data
[19:02:34] <eddyb> bvssvni:             let frame = factory.make_fake_output(viewport.window_size[0] as u16, viewport.window_size[1] as u16);
[19:02:35] <Ichiru> Shouldn't it just be a buffer that accepts a u32/u16?
[19:02:40] <tomaka> you have to create a TrianglesList(Vec<T>) for example, which you turn into a IndexBuffer
[19:02:46] <Ichiru> O.o
[19:02:47] <eddyb> bvssvni: that's what I used
[19:02:55] <Ichiru> So I can't just use a Vec<u16>?
[19:02:55] <tomaka> Ichiru: that's for the creation
[19:02:59] <Ichiru> oh
[19:03:04] <bvssvni> eddyb: for updating the output? I just want to change the size
[19:03:21] <Ichiru> I could fore-go the index buffer for my stuff
[19:03:26] <eddyb> bvssvni: just replace it
[19:03:30] <bvssvni> eddyb: ok
[19:03:34] <eddyb> bvssvni: AFAIK it's cheap to make
[19:03:38] <Ichiru> But that increases memory usage a bit
[19:05:04] <tomaka> There's also a small problem with the IndexBuffer, it's that you lose infos about what is inside
[19:05:17] <tomaka> it's not IndexBuffer<u32> or IndexBuffer<u16> but just IndexBuffer
[19:05:23] <Ichiru> :/
[19:05:28] <tomaka> I need to rework that
[19:05:46] <eddyb> so...
[19:05:53] <tomaka> So I can't add "fn write(&self, data: &[...])" because I don't know what to write
[19:06:02] <tomaka> I don't know the data type to write I mean
[19:06:10] <eddyb> what lp_solve takes 300us on Pentium4 to do
[19:06:13] <eddyb> test layout ... bench:      2475 ns/iter (+/- 1464)
[19:06:32] <kvark> bvssvni: Output was a quick last-minute hack. I guess you can just create a new output when you need to change the size.
[19:06:35] <eddyb> takes 2.5us on an i7 with the stupidest linear solver ever
[19:06:36] <Ichiru> oh
[19:06:38] <eddyb> it even has bruteforce
[19:06:40] *** Quits: vire (vire@moz-f5qook.net.upcbroadband.cz) (Ping timeout: 121 seconds)
[19:06:44] <Ichiru> Re-work IndexBuffer
[19:06:46] <Ichiru> Up the major version :P
[19:06:52] <eddyb> and a lot of allocations
[19:07:01] <tomaka> Ichiru: I have a lot of things waiting to be done
[19:07:07] *** Quits: sambotron (sambotron@moz-lgc.bdf.247.173.IP) (Connection closed)
[19:07:10] <Ichiru> Eh
[19:07:15] <Ichiru> I think I'll live without the index buffer
[19:07:34] <Ichiru> It's 82kb more, and I only ever allocate it once
[19:07:49] <eddyb> time for a demo (gosh I hate that glyph cache)
[19:09:21] <kvark> eddyb: what's up with the glyph cache?
[19:09:29] <bvssvni> I wonder what happens when you use a git dependency in example that uses the library as dependency
[19:09:39] <eddyb> kvark: you can't put it anywhere
[19:09:48] <eddyb> because of the type signatures
[19:10:17] <Ichiru> Glyph cache?
[19:10:20] <eddyb> kvark: I'll hardcode the type of G: Graphics and the glyph cache... hidden in a structure somewhere
[19:10:45] <Ichiru> tomaka: Does implement_vertex! use impl [Vertex] or does it implement traits
[19:11:05] <kvark> eddyb: is it 'a that gives you problems, or the 'R' type?
[19:11:17] <tomaka> Ichiru: It implements the glium::vertex::Vertex trait 
[19:11:31] <Ichiru> Oh cool
[19:11:40] <Ichiru> That means I can add my Vertex::empty method
[19:15:45] *** Joins: dov (anonymous@moz-kscsui.red.bezeqint.net)
[19:16:39] <Ichiru> Hm
[19:16:44] <Ichiru> I may need to re-think this sprite batcher
[19:18:47] <Ichiru> I would pass an &texture::Texture2D if I wanted to pass a reference to a texture wouldn't I?
[19:19:00] <tomaka> Yeah
[19:20:00] <Ichiru> current_texture: Option<&Texture2D>, 
[19:20:04] <Ichiru> Since I can't have a null pointer -_-
[19:20:27] <eddyb> kvark: I need to avoid https://github.com/PistonDevelopers/graphics/blob/master/src/text.rs#L41-L49
[19:20:35] <Ichiru> oh. hm.
[19:20:51] <eddyb> Ichiru: Cell<Option<&T>> is not uncommon
[19:21:01] <eddyb> (but I'm not sure what you need)
[19:21:28] *** Joins: vire (vire@moz-f5qook.net.upcbroadband.cz)
[19:21:46] <Ichiru> I just need a reference to a texture in my struct
[19:21:55] <Ichiru> I'm not sure how that would fit into lifetime though
[19:23:11] *** Quits: vire (vire@moz-f5qook.net.upcbroadband.cz) (Connection closed)
[19:23:24] *** Joins: vire (vire@moz-f5qook.net.upcbroadband.cz)
[19:24:32] *** Quits: vire (vire@moz-f5qook.net.upcbroadband.cz) (Connection closed)
[19:25:25] *** Joins: vire (vire@moz-f5qook.net.upcbroadband.cz)
[19:25:51] *** Quits: kmcguire (kmcguire@moz-pg1gb9.biz.rr.com) (Connection closed)
[19:26:06] *** Joins: eerie (eerie@moz-njefna.red.bezeqint.net)
[19:26:07] *** Joins: kmcguire (kmcguire@moz-pg1gb9.biz.rr.com)
[19:26:09] *** Joins: skitoo (Thunderbird@moz-urd0va.fbx.proxad.net)
[19:27:13] *** Quits: vire (vire@moz-f5qook.net.upcbroadband.cz) (Connection closed)
[19:27:56] *** Joins: vire (vire@moz-f5qook.net.upcbroadband.cz)
[19:30:11] *** Quits: eerie (eerie@moz-njefna.red.bezeqint.net) (Ping timeout: 121 seconds)
[19:31:37] *** Quits: vire (vire@moz-f5qook.net.upcbroadband.cz) (Connection closed)
[19:32:04] *** Joins: eerie (eerie@moz-njefna.red.bezeqint.net)
[19:32:26] *** Joins: vire (vire@moz-f5qook.net.upcbroadband.cz)
[19:33:00] <meteredsection> often, to hold a reference in a struct, the struct needs a lifetime parameter
[19:33:17] <meteredsection> struct Foo<'a> { current_texture: Option<&'a Texture2D> }
[19:34:18] <meteredsection> impl<'a> Foo<'a> { fn new(t: &'a Texture2D) { Foo { current_texture: Some(t) } } }
[19:34:30] <bvssvni> kvark: I’m getting crazy resize in the gfx_graphics examples
[19:35:07] <bvssvni> kvark: I guess the viewport must be updated or something
[19:35:24] <Ichiru> macro undefined: 'implement_vertex!'
[19:35:25] <Ichiru> agh
[19:35:53] <meteredsection> did you use #[macro_use] when you import glium?
[19:35:53] *** Quits: vire (vire@moz-f5qook.net.upcbroadband.cz) (Connection closed)
[19:35:55] <bvssvni> kvark: wait, maybe I forgot `cargo update`
[19:35:57] <kvark> bvssvni: huh, interesting
[19:36:14] <Ichiru> oh
[19:36:16] <Ichiru> no i did not
[19:36:18] <Ichiru> what does that do
[19:36:26] *** Joins: vire (vire@moz-f5qook.net.upcbroadband.cz)
[19:36:32] <meteredsection> #[macro_use] extern crate glium;
[19:36:46] <meteredsection> it pulls in the exported macros from the crate
[19:36:51] <meteredsection> by default you don't get them
[19:37:37] <kvark> bvssvni: viewport seems to be fine - https://github.com/gfx-rs/gfx-rs/blob/master/src/render/mod.rs#L285
[19:39:10] <bvssvni> kvark: strange thing that image_test runs with piston_window on my pc, and there is the same bug in image_test and draw_state_test
[19:39:43] <Ichiru> ok so current_texture: Option<&Texture2d> is missing a lifetime specifier
[19:39:44] *** Quits: vire (vire@moz-f5qook.net.upcbroadband.cz) (Connection closed)
[19:40:07] <Ichiru> But I'm not sure how the lifetime would work
[19:40:12] *** Joins: vire (vire@moz-f5qook.net.upcbroadband.cz)
[19:40:18] <Ichiru> I have a begin() and end() method that makes the variable None
[19:40:24] *** Quits: vire (vire@moz-f5qook.net.upcbroadband.cz) (Connection closed)
[19:40:27] <tomaka> Ichiru: note that depending on your use case you shouldn't hesitate to use reference counting
[19:40:31] <eddyb> bvssvni: I have no issues
[19:40:49] <Ichiru> Reference counting?
[19:40:51] <eddyb>              let viewport = args.viewport();             let frame = factory.make_fake_output(viewport.window_size[0] as u16, viewport.window_size[1] as u16);             g2d.draw(&mut renderer, &frame, viewport, |c, g| {
[19:41:00] <eddyb> that's it, and it works
[19:41:00] <meteredsection> std::Rc
[19:41:07] *** Joins: vire (vire@moz-f5qook.net.upcbroadband.cz)
[19:41:28] <bvssvni> the user_input example in piston-examples runs fine, which uses opengl_graphics
[19:41:28] <meteredsection> imo it's worth avoiding, but not heroically
[19:41:35] <bvssvni> eddyb: do you use glutin?
[19:41:38] <Ichiru> I have no idea how that'd work
[19:41:45] <eddyb> I use gfx_graphics and glutin
[19:41:48] <meteredsection> so if you can't model something with compiler-enforced lifetimes, question your design
[19:41:57] <meteredsection> if you still can't do it, use Rc to handle lifetime
[19:42:01] <bvssvni> eddyb: btw, I think you should use draw_size instead of window_size
[19:42:10] <eddyb> bvssvni: I get the window size from args.viewport(). and yes, you are correct
[19:42:32] <tomaka> Ichiru: in rust you need to somehow link the pointer to where it belongs
[19:42:45] *** Quits: vire (vire@moz-f5qook.net.upcbroadband.cz) (Connection closed)
[19:42:48] <Ichiru> Hm
[19:42:54] <tomaka> you can't store a "Texture2d" somewhere and a "&Texture2d" in a totally unrelated place
[19:43:00] *** Joins: vire (vire@moz-f5qook.net.upcbroadband.cz)
[19:43:03] <Ichiru> Well in that case the pointer belongs to who-ever calls do_stuff
[19:43:05] *** Quits: alexggordon (alexggordon@moz-b3e66j.hfc.comcastbusiness.net) (Quit: Lost terminal)
[19:43:06] <meteredsection> Ichiru: is it not possible for the struct in question to just own the Texture2d?
[19:43:43] *** Quits: canhtak (canhtak@moz-1a9fh1.luxdsl.pt.lu) (Client exited)
[19:44:29] <Ichiru> Type annotations are <'a> right?
[19:44:36] <Ichiru> not type
[19:44:37] <Ichiru> lifetime
[19:45:10] <meteredsection> yes
[19:45:46] *** Quits: vire (vire@moz-f5qook.net.upcbroadband.cz) (Connection closed)
[19:45:59] *** Joins: vire (vire@moz-f5qook.net.upcbroadband.cz)
[19:46:00] <Ichiru> How do I add it to the struct
[19:46:14] *** Quits: brson (brson@moz-cfhap5.mtv2.mozilla.com) (Quit: leaving)
[19:46:17] <meteredsection> see my comment above
[19:46:18] *** Quits: vire (vire@moz-f5qook.net.upcbroadband.cz) (Connection closed)
[19:46:20] *** Joins: Rym (y@moz-g4dip9.range86-187.btcentralplus.com)
[19:46:23] *** Joins: brson (brson@moz-cfhap5.mtv2.mozilla.com)
[19:46:23] <Ichiru> wait got it
[19:46:35] <Ichiru> I forgot I needed impl<'a>
[19:47:22] *** Joins: vire (vire@moz-f5qook.net.upcbroadband.cz)
[19:47:30] *** Quits: vire (vire@moz-f5qook.net.upcbroadband.cz) (Connection closed)
[19:48:31] *** Joins: vire (vire@moz-f5qook.net.upcbroadband.cz)
[19:48:44] *** Quits: vire (vire@moz-f5qook.net.upcbroadband.cz) (Connection closed)
[19:49:18] <Ichiru> huh
[19:49:24] <Ichiru> Adding the type annotations made it work
[19:49:28] *** Joins: vire (vire@moz-f5qook.net.upcbroadband.cz)
[19:49:37] <Ichiru> I'm not entirely sure why but it does
[19:50:09] *** Quits: vire (vire@moz-f5qook.net.upcbroadband.cz) (Connection closed)
[19:50:33] *** Quits: bdero (bran@moz-mqs.7dh.189.18.IP) (Ping timeout: 121 seconds)
[19:50:50] *** Quits: Rym (y@moz-g4dip9.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[19:51:09] *** Joins: jhasse (jhasse@moz-fdkfjs.dip0.t-ipconnect.de)
[19:51:50] *** Joins: vire (vire@moz-f5qook.net.upcbroadband.cz)
[19:51:55] *** Quits: aepsil0n (eduard@moz-6491ha.mv2h.pepi.8071.2a02.IP) (Ping timeout: 121 seconds)
[19:53:11] *** Quits: nerdopoly (Mibbit@moz-inc16q.range86-146.btcentralplus.com) (Quit: http://www.mibbit.com ajax IRC Client)
[19:56:09] *** Joins: eerie_ (eerie@moz-njefna.red.bezeqint.net)
[19:56:09] *** Quits: vire (vire@moz-f5qook.net.upcbroadband.cz) (Connection closed)
[19:56:36] *** Joins: vire (vire@moz-f5qook.net.upcbroadband.cz)
[19:58:40] *** Quits: Jackneill (Jackneill@moz-80hpdi.pool.digikabel.hu) (Ping timeout: 121 seconds)
[19:59:39] *** Quits: eerie (eerie@moz-njefna.red.bezeqint.net) (Ping timeout: 121 seconds)
[20:01:19] <eddyb>                 fn name_of<T>(_: &T) -> &'static str { unsafe { std::intrinsics::type_name::<T>() } }                 println!("{}", name_of(&g));
[20:01:24] <eddyb> when let () = g; fails me
[20:01:43] *** Quits: vire (vire@moz-f5qook.net.upcbroadband.cz) (Connection closed)
[20:02:30] *** Joins: vire (vire@moz-f5qook.net.upcbroadband.cz)
[20:03:43] *** Joins: sambotron (sambotron@moz-lgc.bdf.247.173.IP)
[20:03:57] <eddyb> kvark: https://github.com/gfx-rs/gfx_device_gl/blob/master/src/lib.rs#L549-L551
[20:04:39] <Ichiru> What type is the display?
[20:04:40] <eddyb> kvark: why then is gfx_graphics::back_end::GfxGraphics<gfx_device_gl::Resources, gfx_device_gl::draw::CommandBuffer, _>?
[20:04:46] <Ichiru> In glutin
[20:05:01] <tomaka> The display?
[20:05:03] <eddyb> kvark: why not parametrize on the device type?
[20:05:13] <tomaka> There's glutin::Window
[20:05:21] <Ichiru> Oh yeah that's what I meant whoops
[20:05:31] *** Joins: aepsil0n (eduard@moz-pfjhmu.mullvad.net)
[20:05:47] *** Quits: vire (vire@moz-f5qook.net.upcbroadband.cz) (Connection closed)
[20:06:16] <Ichiru> the trait `glium::backend::Facade` is not implemented for the type `glutin::window::Window`
[20:06:23] <Ichiru> I think I'm using the empty function wrong?
[20:06:30] *** Joins: vire (vire@moz-f5qook.net.upcbroadband.cz)
[20:07:01] *** Joins: kazimuth (james@moz-qp3.484.111.18.IP)
[20:07:05] <tomaka> You're using .build() instead of build_glium() at initialization?
[20:07:21] *** Quits: kazimuth (james@moz-qp3.484.111.18.IP) (Connection closed)
[20:07:28] <Ichiru> Oh
[20:07:34] <Ichiru> I'm using the wrong type for the argument
[20:07:47] *** Joins: p1start (p1start@moz-nftjhe.org)
[20:07:50] <Ichiru> Apparently the type I need is - glium::backend::glutin_backend::GlutinFacade
[20:08:03] <tomaka> hmmm
[20:08:07] <tomaka> it's glium::Display also
[20:08:21] <tomaka> It would be better if the docs or the compiler told you "glium::Display" instead of this long type
[20:08:40] *** Joins: saml (saml@moz-0pt9vd.cst.lightpath.net)
[20:08:44] *** Joins: SneakySnake (nya@moz-i9is4u.pool.telekom.hu)
[20:08:59] <Ichiru> glium::Display fits a lot better
[20:09:57] *** Joins: canhtak (jeremy@moz-1a9fh1.luxdsl.pt.lu)
[20:10:13] <sillesta> should i do Err("Unimplemented") or unimplemented! on a partially implemented function?
[20:10:15] <Ichiru> Note to self: Sublime Text does not set the working directory properly at all
[20:10:26] <eddyb> sillesta: the latter is a panic
[20:10:41] <sillesta> Ichiru: you need to specify it in a project/workspace file
[20:11:05] <Ichiru> oh
[20:11:07] <sillesta> and then it needs to be opened with that file, or something (confusing)
[20:11:14] <Ichiru> I've stuffed up my event loop
[20:11:39] <Ichiru> I've got my 'gameLoop : loop
[20:11:51] <Ichiru> and in there I've got my for event in display.poll_events() with my match
[20:12:05] <Ichiru> and if the event is glutin::Event::Closed I have break 'gameLoop
[20:12:16] <Ichiru> but apparently that doesn't want to work
[20:12:48] *** Quits: vire (vire@moz-f5qook.net.upcbroadband.cz) (Connection closed)
[20:13:08] <Ichiru> Since the program keeps running after I close the window!
[20:13:32] *** Joins: vire (vire@moz-f5qook.net.upcbroadband.cz)
[20:13:36] <tomaka> Oh that's a known bug in glutin
[20:13:53] <sillesta> didn't recent PR fix that?
[20:14:00] <tomaka> yeah but it's not published yet
[20:14:03] *** Quits: Layl (Layl@moz-65hqmf.direct-adsl.nl) (Connection closed)
[20:14:14] *** Joins: Layl (Layl@moz-65hqmf.direct-adsl.nl)
[20:14:14] <Ichiru> Time to pull from git again
[20:14:22] <tomaka> Well, you can't
[20:14:28] <tomaka> since glium uses glutin from crates.io
[20:14:31] <eddyb> https://i.imgur.com/btbVGSw.png
[20:14:35] <tomaka> I'll just publish a new version of glutin
[20:14:59] <sillesta> i've got a pr cooking for glutin
[20:14:59] <Ichiru> Thanks :P
[20:15:05] <tomaka> Ichiru: https://github.com/tomaka/glutin/commit/d56e723677c1ef08608cec5f0ebac80c357ce39a
[20:15:10] <sillesta> (my first rust contribution!!)
[20:15:14] <sillesta> albeit quite useless
[20:15:20] <tomaka> I have an auto-publish system, should be published in ~5mn
[20:15:30] <Ichiru> Cool
[20:15:32] <eddyb> now to make a full-fledged UI out of it
[20:15:37] <Ichiru> Do I run a command to update
[20:15:41] <Ichiru> Or does it just work (tm)
[20:16:54] *** Joins: Kingsquee (kingsley@moz-qq7ns6.bchsia.telus.net)
[20:16:54] *** Quits: vire (vire@moz-f5qook.net.upcbroadband.cz) (Connection closed)
[20:17:31] *** Joins: vire (vire@moz-f5qook.net.upcbroadband.cz)
[20:17:35] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[20:18:37] <tomaka> You will need to "cargo update"
[20:19:33] <kvark> eddyb: it should be parametrized, of course. No one just got to do it since we became completely device-abstract, I suppose.
[20:20:56] <eddyb> kvark: it is parametrized, but not on a central type
[20:21:08] <kvark> eddyb: where is this code?
[20:21:14] <eddyb> which code?
[20:21:33] <kvark> GfxGraphics<gfx_device_gl::.....>
[20:21:37] <eddyb> (I don't want a million backend-dependent types, just precisely one. maybe two with the output)
[20:21:52] <eddyb> kvark: that's just the type that you get in gfx_graphics
[20:22:05] <eddyb> (I gave you the absolute paths)
[20:22:18] *** Quits: vire (vire@moz-f5qook.net.upcbroadband.cz) (Connection closed)
[20:22:23] <Ichiru> I might just allocate a vec each time I do something
[20:22:40] <eddyb> kvark: similarly, GlyphCache is parametrized by Resources, not Device
[20:22:43] <Ichiru> It's not like I'm doing a million sprites a second :D
[20:23:16] <kvark> eddyb: I see your question now
[20:23:33] *** Joins: vire (vire@moz-f5qook.net.upcbroadband.cz)
[20:24:22] <kvark> eddyb: we could probably have GfxGraphics<'a, Device, Output> instead
[20:24:43] <eddyb> kvark: that would be nice :)
[20:25:40] <eddyb> actually, you know what? I'll do `use gfx_device_gl as gfx_device;` in my crate root
[20:25:55] <eddyb> that way nothing mentions GL below that
[20:26:05] *** Quits: canhtak (jeremy@moz-1a9fh1.luxdsl.pt.lu) (Client exited)
[20:26:50] *** Quits: vire (vire@moz-f5qook.net.upcbroadband.cz) (Connection closed)
[20:27:11] <kvark> eddyb: you are only supposed to mention GL in 1-2 lines
[20:27:27] <eddyb> kvark: right, but I don't want to be generic over the device choice everywhere
[20:27:33] *** Joins: vire (vire@moz-f5qook.net.upcbroadband.cz)
[20:27:46] <kvark> eddyb: like https://github.com/gfx-rs/gfx_examples/blob/master/src/deferred/main.rs#L378
[20:28:16] <kvark> eddyb: ah, in that case... your `use` should be fine then
[20:29:36] *** Quits: matp (matp@moz-rvt9hl.matp.at) (Quit: Bye!)
[20:30:26] <eddyb> kvark: it will have to be extern crate gfx_device_gl as gfx_device;
[20:30:32] <eddyb> (use doesn't work yet... meh)
[20:34:14] *** Joins: canhtak (canhtak@moz-1a9fh1.luxdsl.pt.lu)
[20:37:28] *** Parts: nical (nical@moz-543qtb.2500.1rfi.0450.2001.IP) ("")
[20:39:10] <Ichiru> hm
[20:39:18] <Ichiru> compiling takes a long time
[20:39:44] <pct> how long
[20:39:58] <eddyb> oh wow :D
[20:40:04] <eddyb>     -a.y2 ∈ [-inf, 0]
[20:40:12] *** Joins: stjahns_ (stjahns@moz-9oh245.ed.shawcable.net)
[20:40:22] *** Quits: vire (vire@moz-f5qook.net.upcbroadband.cz) (Ping timeout: 121 seconds)
[20:40:27] <eddyb> that actually looks pretty nice (it had 2 terms to start with)
[20:40:31] *** Joins: Rym (y@moz-g4dip9.range86-187.btcentralplus.com)
[20:40:58] *** Quits: stjahns_ (stjahns@moz-9oh245.ed.shawcable.net) (Connection closed)
[20:41:26] <Ichiru> Probably should've timed it
[20:42:17] <sillesta> tomaka: is this good for opening a PR? https://github.com/fkaa/glutin/commit/6ee476dbf52ff26ba48280fd621287b86648da96
[20:42:43] <Ichiru> binary operation `!=` cannot be applied to type `&glium::texture::Texture2d`
[20:42:49] *** Quits: Lilly (Lilly@moz-ca683g.bredband.comhem.se) (Quit: bajs)
[20:42:52] <Ichiru> tomaka is there a field of a Texture2d I can compare?
[20:43:14] <tomaka> sillesta: sure
[20:43:26] <tomaka> Ichiru: no, that's not rust idiomatic
[20:43:41] <tomaka> you can cast your &Texture2d into *const Texture2d a compare the pointer
[20:43:46] <Ichiru> oh ok
[20:43:52] <tomaka> but if you write correct code, you shouldn't need to
[20:44:12] <tomaka> I mean "idiomatic" instead of "correct" 
[20:44:13] <Ichiru> ._.
[20:44:28] <Ichiru> I don't think a sprite batcher is rust idiomatic at all tbh
[20:44:38] <eddyb> why not?
[20:44:47] *** Quits: canhtak (canhtak@moz-1a9fh1.luxdsl.pt.lu) (Ping timeout: 121 seconds)
[20:44:55] <Ichiru> well at least the way i implement it
[20:45:00] *** Quits: Rym (y@moz-g4dip9.range86-187.btcentralplus.com) (Ping timeout: 121 seconds)
[20:45:12] <eddyb> I have a nice atlas somewhere - though I think that may end up comparing strings for texture paths
[20:47:28] <Ichiru> Yay it compiled
[20:47:50] <Ichiru> It doesn't do anything yet but I got the difficult parts compiled :P
[20:51:27] *** Joins: Guest44 (textual@moz-to0.eos.163.209.IP)
[20:52:08] *** Quits: skitoo (Thunderbird@moz-urd0va.fbx.proxad.net) (Ping timeout: 121 seconds)
[20:52:20] *** Quits: eerie_ (eerie@moz-njefna.red.bezeqint.net) (Connection closed)
[20:52:27] <Ichiru> Can you call methods on a pointer to a struct?
[20:52:38] <Ichiru> Or do you need to do some sort of de-reference
[20:53:02] <eddyb> (the deref operator is the same as in C)
[20:53:16] <eddyb> Ichiru: if it's a raw pointer, yes. otherwise, no
[20:56:04] *** Joins: Rym (y@moz-g4dip9.range86-187.btcentralplus.com)
[20:58:28] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[20:59:53] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[21:02:04] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[21:04:24] *** Quits: avikpal_ (avikpal@moz-45o.mde.194.117.IP) (Connection closed)
[21:09:39] <Ichiru> So cgmath doesn't have a method to construct an orthographic Matrix4
[21:10:17] <sillesta> tomaka: should i cc someone for osx? i may have put too much in the description..
[21:10:47] <kvark> https://github.com/bjz/cgmath-rs/blob/master/src/projection.rs#L58
[21:10:52] <kvark> Ichiru: ^
[21:11:14] <Ichiru> oh
[21:11:21] <Ichiru> Must've read the docs wrong
[21:14:16] <Ichiru> tomaka: Can I pass in a cgmath Matrix4<f32> for a mat4x4 uniform?
[21:21:27] *** bvssvni is now known as bvssvni_
[21:24:06] *** Quits: aepsil0n (eduard@moz-pfjhmu.mullvad.net) (Ping timeout: 121 seconds)
[21:25:16] <Ichiru> ugh
[21:25:22] <Ichiru> The lifetime thing is working against me
[21:25:43] <Ichiru> Apparently the frame has to live as long as the spritebatch
[21:25:51] <Ichiru> Even though I unset it from the spritebatch!
[21:26:24] <sillesta> shouldn't the spritebatch be older than frames?
[21:26:32] <Ichiru> It is
[21:26:50] <Ichiru> I guess I could make a spritebatch frame
[21:30:36] *** Joins: bdero (bran@moz-lbs.91h.47.73.IP)
[21:35:58] *** Joins: kalail (uid62296@moz-5ck9vu.charlton.irccloud.com)
[21:40:54] <eddyb> I wish there was a cargo debug which would be like cargo run but under rust-gdb or rust-lldb
[21:40:54] *** Quits: Rym (y@moz-g4dip9.range86-187.btcentralplus.com) (Connection closed)
[21:41:26] *** Joins: Rym (y@moz-g4dip9.range86-187.btcentralplus.com)
[21:41:46] <Ichiru> what on earth
[21:41:51] <Ichiru> Is a conflicting lifetime requirement
[21:41:54] *** Joins: aepsil0n (eduard@moz-q7qqfk.mullvad.net)
[21:42:28] <WindowsBunny> Ichiru: It's when Rust hates you
[21:42:53] <Ichiru> Well in that case Rust hates me twice
[21:42:56] <Ichiru> Since I have two
[21:43:17] <kvark> I think Rust describes the conflict quite clearly, more often then not
[21:43:42] <kvark> it's when you admit at failing to architect it properly and say "Sorry, Rust, I'm wrong, please help me"
[21:45:06] <Ichiru> ok i've nearly got it
[21:46:33] <Ichiru> How do I tell the compiler that a variable is out of scope
[21:46:36] <Ichiru> Can I use blocks for that?
[21:47:14] <Ichiru> yes i can!
[21:47:36] <eddyb> :D
[21:50:45] <Ichiru> http://pastie.org/private/dt9dievumtun3a5mmjemg
[21:51:09] <Ichiru> I could swap out frame2d.end(); for a Drop
[21:51:24] <Ichiru> and probably change spritebatch.begin to spritebatch.startframe
[21:51:49] *** Quits: jhasse (jhasse@moz-fdkfjs.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[21:52:28] <Ichiru> I have a lot of type specifiers though >.>
[21:53:52] *** Quits: dov (anonymous@moz-kscsui.red.bezeqint.net) (Client exited)
[22:01:36] <Guest44> Hey guys, so with Piston, I'm trying to make a simple 2D platformer. I have a struct Character which is the guy that the player controls. Should it get a gl object and have its own draw() function?
[22:01:46] <Guest44> or what's the intended, idiomatic design with this kind of a thing?
[22:03:41] <kvark> Guest44: since you are not doing any complex and abstract 3D graphics, having a draw() should be fine. Just make sure to  separate model from the view.
[22:04:13] <Guest44> kvark but then all my game 'entities' like objects, mobs, powerups, everything -- would have to take a gl object in its constructor... is this good?
[22:04:21] <Guest44> basically anything that can be rendered
[22:04:36] <kvark> this calls for an ECS ;)
[22:04:44] <Guest44> idk what ecs is :(
[22:04:46] <kvark> with a renderable component
[22:04:51] <kvark> entity-component system
[22:04:54] *** Joins: vosen_ (vosen@moz-mtm1g4.dynamic.chello.pl)
[22:06:11] *** Quits: vosen_ (vosen@moz-mtm1g4.dynamic.chello.pl) (Quit: Leaving)
[22:06:54] <Guest44> I'm confused after reading the wiki article :((
[22:07:16] <Ichiru> Have you used the Unity game engine before?
[22:07:20] <Guest44> no
[22:07:34] <Ichiru> Hm
[22:07:37] <Ichiru> Well from my understanding
[22:07:42] <Guest44> I guess I imagine that both my main char and a powerup would implement Renderable or something
[22:07:48] <Ichiru> Yup
[22:07:52] *** Quits: vosen (vosen@moz-mtm1g4.dynamic.chello.pl) (Ping timeout: 121 seconds)
[22:08:10] <Guest44> but like I said my concern is that to render themselves, they'd all have to have access to the global gl object
[22:08:12] <kvark> not so much impllement, as they'd have a renderable component
[22:08:31] <Guest44> and a bunch more stuff like window dimensions and stuff
[22:08:41] <kvark> and then you'd have a render system that walks through the entities and draws those who got the renderable components
[22:08:43] <Guest44> kvark fair enough
[22:08:55] <Guest44> kvark basically invokes draw() or render() on the
[22:08:56] <Guest44> them
[22:09:10] <Guest44> so but they all do store a pointer to the main GL object
[22:09:17] <kvark> idiomatic ECS means that components have no methods, btw
[22:09:18] <XMPPwocky> there's the
[22:09:31] <kvark> no need to store the pointer, no!!
[22:09:42] <XMPPwocky> idiomatic ECS also has entities as just unique identifiers
[22:10:00] <kvark> XMPPwocky: I doubt that
[22:10:10] <XMPPwocky> as I see the "ideal" ECS described
[22:10:16] <kvark> XMPPwocky: what about entities that are just sets of component ids?
[22:10:21] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[22:10:38] <XMPPwocky> the issue is that you probably want to have some way to back-link from a RenderableComponent, say, to the PositionComponent on the same entity
[22:10:54] <kvark> why?
[22:11:02] <Guest44> is this a pretty good description of what I wanna achieve? http://gameprogrammingpatterns.com/component.html
[22:11:18] <XMPPwocky> otherwise you end up doing a silly lookup
[22:11:57] <kvark> XMPPwocky: components are not meant to know about each other. And systems process one or more components at once, so they have the "link"
[22:13:06] <kvark> Guest44: conceptually, it's close, but this code seems to be using virtual methods (and destructors) on components
[22:13:20] <XMPPwocky> then you end up doing lookups for the components each system wants to process, or keeping a cache of that
[22:13:22] <kvark> which is anti-data-friendly way to process stuff
[22:13:26] <XMPPwocky> the latter case is the same as just having the link
[22:14:19] <Guest44> kvark OK I'm just failing to imagine how a class would render itself without having access to the global graphics object
[22:14:42] <XMPPwocky> Guest44: it doesn't render itself
[22:14:48] <XMPPwocky> and rust doesn't have classes
[22:14:54] <Guest44> XMPPwocky sorry a struct
[22:15:00] <XMPPwocky> components are passive, they are acted upon
[22:16:12] <kvark> XMPPwocky: in either way a system can cache the list of entities it needs to process
[22:16:20] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[22:16:37] <kvark> XMPPwocky: so you didn't quite show that an entity has to be an Id
[22:16:46] *** Joins: nerdopoly (Mibbit@moz-inc16q.range86-146.btcentralplus.com)
[22:17:34] <XMPPwocky> that's just the gist of what i've seen; an entity is just an id that links components together
[22:17:58] <Guest44> XMPPwocky but see   GraphicsComponent:: void update(Bjorn& bjorn, Graphics& graphics) 
[22:18:11] <sillesta> kvark: have you worked more on your ecs?
[22:18:14] <eddyb> Bj...orn?
[22:18:22] <sillesta> bear!
[22:18:29] <sillesta> or strousoup
[22:18:36] <kvark> sillesta: nope, the reddit post about parallel processing is pretty much where I am so far
[22:21:00] <kvark> Guest44: http://www.gamedev.net/page/resources/_/technical/game-programming/understanding-component-entity-systems-r3013
[22:21:25] *** Quits: hhhhhhhhhh (mike@moz-969kuj.cable.virginm.net) (Quit: WeeChat 1.1.1)
[22:21:54] *** Quits: Guest74 (textual@moz-il1.n6s.204.65.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[22:23:07] *** Quits: saml (saml@moz-0pt9vd.cst.lightpath.net) (Connection closed)
[22:23:30] <WindowsBunny> oh no
[22:23:38] <WindowsBunny> ULA is naming their new rocket Vulcan
[22:23:52] <WindowsBunny> So close to Vulkan, that new API
[22:24:59] <WindowsBunny> Did someone accidentally leave the volcano seeder of helmut of siena running?
[22:25:08] *** Quits: saterus (saterus@moz-o0ug28.res.rr.com) (Connection closed)
[22:25:29] *** Joins: saterus (saterus@moz-o0ug28.res.rr.com)
[22:25:32] *** Quits: nerdopoly (Mibbit@moz-inc16q.range86-146.btcentralplus.com) (Quit: http://www.mibbit.com ajax IRC Client)
[22:25:47] *** Joins: nerdopoly (Mibbit@moz-inc16q.range86-146.btcentralplus.com)
[22:26:23] <Guest44> kvark so a component candidate in my situation is "PowerupRenderer"?
[22:26:25] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[22:26:31] <Guest44> sorry for asking really dumb questions :(
[22:26:43] *** Quits: SneakySnake (nya@moz-i9is4u.pool.telekom.hu) (Connection closed)
[22:26:45] <Guest44> I'm just trying to make sure I get it right
[22:26:56] *** Quits: bjz (bjz@moz-puppgq.tpgi.com.au) (Quit: My Mac has gone to sleep. ZZZzzz…)
[22:27:24] <kvark> Guest44: first of all, sorry for hijacking your intent to just create something into the ECS land. It's a separate and large topic, where Rust users haven't reached perfection yet
[22:27:43] <Guest44> kvark no that's perfectly fine, I actually like the concept, I'm just trying to nail it in my head
[22:27:52] <Guest44> I'm actually really grateful
[22:27:55] * Guest44 bows
[22:28:21] <kvark> Guest44: with ECS, you'd just have a Rendered component of sort, and, let's say, a "Pickup" one. The powerup is going to be an entity that has 2 of these components (and maybe more)
[22:28:58] <kvark> as just an example. The components are meant to be very generic, and you achieve customization by mixing these within entities.
[22:29:04] <Guest44> so is component just a functor?
[22:29:12] <kvark> no, actually, it's just the data
[22:29:18] *** Quits: Astrum|Lap (Astrum|Lap@moz-7enfbr.co.comcast.net) (Client exited)
[22:29:20] <sillesta> i have some questions on ecs as well :) where should data be stored? say for example a few 2d characters, each with a few sprite animations, and individual state. where is all the instance data stored? per component?
[22:29:22] <kvark> all the logic is supposed to happen inside Systems
[22:29:34] *** Quits: saterus (saterus@moz-o0ug28.res.rr.com) (Ping timeout: 121 seconds)
[22:29:45] *** Joins: nerdopoly_ (Mibbit@moz-inc16q.range86-146.btcentralplus.com)
[22:30:09] <kvark> Guest44: an ECS generally has several systems, each running on a subset of components. One of the systems may be rendering the entities, for example
[22:30:49] *** Quits: nerdopoly (Mibbit@moz-inc16q.range86-146.btcentralplus.com) (Quit: http://www.mibbit.com ajax IRC Client)
[22:30:52] <kvark> sillesta: either within components (if there is not much re-usal), or within a common data block, or within a system that needs to access it
[22:31:03] *** Quits: nerdopoly_ (Mibbit@moz-inc16q.range86-146.btcentralplus.com) (Quit: http://www.mibbit.com ajax IRC Client)
[22:31:28] <Guest44> kvark here though http://gameprogrammingpatterns.com/component.html the components appear to contain the logic
[22:31:43] <sillesta> seems like ecs is a perfect fit for rust :)
[22:31:46] <kvark> Guest44: that's why I didn't like it ;)
[22:32:00] <Guest44> kvark fair enough, it just seemed to have better typography so seemed more credible :))
[22:32:02] <kvark> Guest44: in the link I gave you there was no logic, IIRC
[22:32:37] <kvark> sillesta: it is a tough challenge for us and the language. We need to find a good way to process entities in parallel, thus getting the best of Rust concurrency story
[22:32:57] *** kimundi is now known as zz_kimundi
[22:33:00] *** Quits: kmcguire (kmcguire@moz-pg1gb9.biz.rr.com) (Ping timeout: 121 seconds)
[22:33:10] <sillesta> followup question: how does cache locality work with multithreading?
[22:33:22] <kvark> Guest44: virtual functions on components will harm the cache efficiency, since there is a dispatch on every call
[22:33:53] <Guest44> OK I think I'm starting to understand what components are. They can even be just native types, why not.
[22:34:00] <kvark> right
[22:34:06] <eddyb> Cell is your friend :D
[22:34:13] <Guest44> this is awesome
[22:34:15] <kvark> my favorite type of componet is gfx::Batch ;)
[22:34:34] <sillesta> i've only gotten to 19. on Rustbyexample :(
[22:34:39] <sillesta> going so slow
[22:34:55] <kvark> sillesta: I don't know the answer to your cache question
[22:35:00] <Guest44> so an entity is nothing more than the components it has
[22:35:14] <kvark> right
[22:35:21] <Guest44> great
[22:35:31] <sillesta> superb
[22:35:51] <Guest44> so I say I'm thinking of an entity MainPlayer, and I think it has components position, speed, and animationsprites
[22:36:14] <kvark> sillesta: I think reading from local data good by multiple threads, but writing sucks, because CPU will need to serialize the access internally
[22:36:46] <kvark> Guest44: right, maybe even a Control component that links it to the input devices
[22:37:14] <Guest44> kvark would this be something that just represents the pressed controls?
[22:37:28] <sillesta> i see, i need to put this on my read-list :)
[22:37:51] <sillesta> suggestions in general are welcome!
[22:38:08] <kvark> Guest44: no, I mean something that tells how this entity is controlled. Say you have 2 players hot-seat, one with a keyboard (maybe even generic keys), and one with a mouse. They may have different sensitivity settings and such
[22:38:17] <kvark> that's my ECS for yasteroids: https://github.com/kvark/yasteroids/blob/master/src/world.rs#L79
[22:39:40] <Guest44> OK so why does an entity need an ID again?
[22:39:43] *** Quits: Kingsquee (kingsley@moz-qq7ns6.bchsia.telus.net) (Quit: Konversation terminated!)
[22:39:49] *** Quits: jaen (jaen@moz-ifmik2.copit.pl) (Quit: WeeChat 1.1.1)
[22:40:01] <kvark> Guest44: if you follow XMPPWocky logic, entity IS and ID
[22:40:09] <Guest44> that's what I'm thinking
[22:40:23] <eddyb> you know what? my very simple algorihtm is going to arbitrarily tile things in a BSP fashion. maybe that's not a terrible thing... then again, meh :P
[22:40:40] <kvark> Guest44: that ID is used to look up components in the component storages (might be arrays or hashmaps)
[22:41:02] <Guest44> well I have references to my entities though, right?
[22:41:16] <kvark> you can, yes
[22:41:24] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[22:42:19] <Ichiru> the trait `glium::uniforms::value::IntoUniformValue<'_>` is not implemented for the type `cgmath::matrix::Matrix4<f32>`
[22:42:32] <Ichiru> I'm gonna have to turn this into a weird array thing
[22:43:06] <kvark> Ichiru: weird, I see cgmath feature being enabled by default in glium
[22:43:12] <kvark> https://github.com/tomaka/glium/blob/master/Cargo.toml#L15
[22:44:00] <Ichiru> I'm pulling straight from git
[22:44:03] <Ichiru> So idk why it's doing that
[22:44:14] <kvark> look at the source, Luke!
[22:44:14] <Ichiru> oh
[22:44:20] <Ichiru> i have a different cgmath dependency
[22:44:36] <sillesta> there is a disturbance in the source!
[22:44:51] <kvark> may the source be with you!
[22:45:11] <sillesta> i haven't seen star wars for years..
[22:45:20] <sillesta> when is the new one coming out?
[22:45:29] <Ichiru> That fixed the uniform macro, changing the dependency
[22:45:34] <Ichiru> But now I have ANOTHER lifetime issue
[22:46:04] <kvark> you've got to love them lifetimes
[22:46:14] <WindowsBunny> sillesta: Not soon enough
[22:46:24] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[22:47:23] <eddyb> src/main.rs:1:1: 1:1 error: overflow evaluating the requirement `for<'a> &'a &'a &'a &'a &'a &'a &'a &'a &'a &'a &'a &'a &'a &'a &'a &'a &'a &'a &'a &'a &'a &'a &'a &'a &'a &'a &'a &'a &'a &'a &'a &'a &'a &'a &'a &'a &'a &'a &'a &'a &'a &'a &'a &'a &'a &'a &'a &'a &'a &'a &'a &'a &'a &'a &'a &'a &'a &'a &'a &'a &'a &'a &'a &'a &'a (T, ()) : core::marker::Size
[22:47:23] *** Quits: aepsil0n (eduard@moz-q7qqfk.mullvad.net) (Connection closed)
[22:47:26] <eddyb> rustc pls
[22:47:36] <Ichiru> Perhaps I could put an unsafe around it
[22:47:52] <kvark> Ichiru: join the dark side!
[22:47:56] *** Joins: Wild_Cat (Max@moz-860o3v.cpe.pppoe.ca)
[22:48:11] <sillesta> eddyb: what did you do to rustc?
[22:48:14] <Ichiru> Because I know that the texture is not going to be outlived by the glium state thing
[22:48:22] <eddyb> sillesta: it's being stoopid
[22:48:46] <eddyb> impl<T> Layout for HBox<T> where for<'a> HBox<&'a T>: Layout {
[22:49:03] <eddyb> wait, that's bad...
[22:49:20] <kvark> eddyb: silly questiion - why aren't you using Servo's layout components, if any?
[22:49:30] <eddyb> kvark: web layout is bad
[22:49:33] <Ichiru> I don't even know what the error means: http://pastie.org/private/brfcgfyemkacmbfpynkbg
[22:49:37] <Ichiru> Just that the lifetime is fucked
[22:49:58] <eddyb> kvark: IIRC it's "propagate widths going down, compute heights going up"
[22:50:21] <eddyb> kvark: this is much more flexible - in theory, anyways
[22:50:44] <kvark> :/ I'd be fine with web-style
[22:51:04] <sillesta> does rust allow unicode characters in variables etc.?
[22:51:09] <eddyb> I take it you've never tried to write an UI in HTML5?
[22:51:13] <eddyb> sillesta: feature-gated
[22:51:20] <kvark> eddyb: fortunately, no :P
[22:51:28] <eddyb> trust me, it's shit
[22:51:39] <eddyb> also, atom is very performant
[22:51:40] *** Quits: Layl (Layl@moz-65hqmf.direct-adsl.nl) (Connection closed)
[22:51:46] <eddyb> /s
[22:51:52] *** Joins: Layl (Layl@moz-65hqmf.direct-adsl.nl)
[22:52:11] <sillesta> i should go to sleep http://puu.sh/hecLJ/a5c54a30ad.png
[22:52:31] <Ichiru> AGH
[22:52:33] <eddyb> kvark: anyways, the whole layout stuff is tied to the DOM
[22:52:38] <Ichiru> wrapping the stuff in an unsafe block
[22:52:44] <Ichiru> Didn't make the lifetime error go away
[22:53:06] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[22:53:36] <kvark> eddyb: that's sad. If you are doing a more abstract one, I would surely look into using it (for a game) at some point
[22:54:03] <Ichiru> I had the lifetimes for textures all worked out
[22:54:34] <Ichiru> But now glium's uniform object wants to borrow the texture
[22:59:21] *** Quits: sambotron (sambotron@moz-lgc.bdf.247.173.IP) (Connection closed)
[23:00:37] <XMPPwocky> Ichiru: well, what i've always seen is just using uniforms! right at the point you draw
[23:00:47] <Ichiru> yup
[23:00:52] <Ichiru> that's what I'm doing
[23:00:55] <XMPPwocky> so you just do the borrows there
[23:01:18] <Ichiru> The struct that's drawing doesn't own the texture
[23:01:28] *** Joins: sambotron (sambotron@moz-lgc.bdf.247.173.IP)
[23:01:39] *** Quits: Guest44 (textual@moz-to0.eos.163.209.IP) (Ping timeout: 121 seconds)
[23:01:45] <XMPPwocky> well, then, just pass an &Texture in
[23:02:16] <Ichiru> I did!
[23:02:27] <XMPPwocky> did that work?
[23:02:34] <Ichiru> that gave me the lifetime error x)
[23:03:03] <XMPPwocky> that shouldn't happen, it should be fine
[23:03:48] *** Joins: jhasse (jhasse@moz-cmkbjv.ewe-ip-backbone.de)
[23:05:02] *** Joins: SerialVelocity (SerialVeloc@moz-ss4g7v.range86-152.btcentralplus.com)
[23:05:09] <jhasse> tomaka, Hi! I've just took a brief look at glium_text, looks quite nice :) What is the reason to directly wrap freetype in lib.rs and not add freetype-rs as a dependency?
[23:05:32] <XMPPwocky> glium_text? that sounds right up my alley
[23:06:55] *** Quits: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se) (Ping timeout: 121 seconds)
[23:07:53] <Ichiru> After expanding my .expect statement
[23:08:51] <Ichiru> I managed to get this lifetime error that's more descriptive http://pastie.org/private/qp2gooai8bfrc4nzht23nq
[23:09:13] *** Quits: eddyb (Mibbit@moz-2o5.mv7.25.188.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[23:09:52] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[23:10:40] <Ichiru> So apparently between calls
[23:11:00] <Ichiru> The owner could drop the thing referenced
[23:11:30] *** Joins: eddyb (Mibbit@moz-j5q.6n6.26.188.IP)
[23:11:46] <Ichiru> the question now is how do I fix that
[23:14:03] *** Quits: sambotron (sambotron@moz-lgc.bdf.247.173.IP) (Connection closed)
[23:15:30] <Ichiru> Like is there some sort of way to hold the reference until the struct is done with it
[23:16:33] *** Joins: OmniMancer (omnimancer@moz-m0r8gp.alliedtelesis.co.nz)
[23:18:25] <Ichiru> Ok, how would I reference count something?
[23:19:06] *** Joins: saml_ (saml@moz-rkfmct.res.rr.com)
[23:20:43] <kvark> Rc or Arc
[23:25:16] *** Quits: sillesta (sillesta@moz-501od2.business.telia.com) (Ping timeout: 121 seconds)
[23:26:07] *** Quits: jhasse (jhasse@moz-cmkbjv.ewe-ip-backbone.de) (Quit: Leaving)
[23:32:22] *** Quits: bojo (bojo@moz-uin660.ocn.ne.jp) (Ping timeout: 121 seconds)
[23:32:51] *** Joins: orangeshark (erik@moz-7okg16.44tj.56ot.0306.2602.IP)
[23:33:18] *** Quits: SerialVelocity (SerialVeloc@moz-ss4g7v.range86-152.btcentralplus.com) (Quit: Textual IRC Client: www.textualapp.com)
[23:33:38] *** Quits: edlothiol (user@moz-chhfor.hsi02.unitymediagroup.de) (Ping timeout: 121 seconds)
[23:33:48] *** Joins: kkimdev (kkimdev@moz-gu0ip8.59gh.vk5s.0000.2620.IP)
[23:34:46] *** Quits: Gabriel_7 (Gabriel@moz-munkj7.mtgr.92aj.0e35.2a01.IP) (Connection closed)
[23:36:16] *** Joins: matp (matp@moz-rvt9hl.matp.at)
[23:42:26] * eddyb is surprised how well his polymorphic madness works
[23:45:34] *** Quits: Ichiru (textual@moz-nhnoci.internode.on.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[23:47:08] <eddyb> if only we had VG: https://i.imgur.com/btcNQsV.png
[23:47:37] <eddyb> now I'm tempted to make it distribute those equally
[23:51:10] *** Joins: sambotron (sambotron@moz-lgc.bdf.247.173.IP)
[23:51:58] *** Quits: Wild_Cat (Max@moz-860o3v.cpe.pppoe.ca) (Ping timeout: 121 seconds)
[23:52:09] *** Joins: mermi (Mibbit@moz-8kj2h3.rev.vmobile.jp)
[23:52:41] *** Quits: mermi (Mibbit@moz-8kj2h3.rev.vmobile.jp) (Quit: http://www.mibbit.com ajax IRC Client)
[23:52:50] *** Quits: Layl (Layl@moz-65hqmf.direct-adsl.nl) (Quit: Leaving)
[23:53:43] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[23:54:10] *** Quits: stjahns (stjahns@moz-9oh245.ed.shawcable.net) (Connection closed)
[23:58:24] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[23:59:23] *** Joins: Wild_Cat (Max@moz-860o3v.cpe.pppoe.ca)
