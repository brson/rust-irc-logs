[00:00:11] *** Quits: munksgaard (munksgaard@moz-478pev.u.parknet.dk) (Ping timeout: 121 seconds)
[00:00:30] <insaneinside> I'm also open to suggestions on how to make that code less dynamic-ish.
[00:03:04] *** Quits: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua) (Ping timeout: 121 seconds)
[00:03:14] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[00:06:33] <insaneinside> ...which leads me to another question:  What are the semantics of `CoerceUnsized`, exactly, in terms of its interactions with `Drop`? Does a coerced value die, or does it "become" the new value?
[00:06:34] *** Quits: SilverKey (SilverKey@moz-liif3j.res.rr.com) (Quit: ZZZzzz…)
[00:07:15] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:07:40] *** kimundi is now known as zz_kimundi
[00:08:19] *** Joins: SilverKey (SilverKey@moz-liif3j.res.rr.com)
[00:09:32] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[00:11:14] <brson> what is this logic with available_monomorphizations and available_externally linkage doing? https://github.com/rust-lang/rust/blob/master/src/librustc_trans/trans/monomorphize.rs#L167
[00:11:59] <brson> available_monomorphizations and ccx.monomorphized seem to serve similar purposes https://github.com/rust-lang/rust/blob/master/src/librustc_trans/trans/monomorphize.rs#L65
[00:12:38] <brson> ah, i bet this has to do with parallel codegen
[00:13:06] *** Quits: imperio (Mibbit@moz-8otf3a.fbx.proxad.net) (Quit: http://www.mibbit.com ajax IRC Client)
[00:15:05] *** Joins: dinfuehr (dinfuehr@moz-jskej7.highway.telekom.at)
[00:19:13] *** Quits: dinfuehr (dinfuehr@moz-jskej7.highway.telekom.at) (Ping timeout: 121 seconds)
[00:22:17] *** Quits: SilverKey (SilverKey@moz-liif3j.res.rr.com) (Quit: Cheerio!)
[00:30:24] *** Joins: FallingAlways (FallingTime@moz-ruksei.cable.rogers.com)
[00:30:44] *** Joins: rkruppe_ (chatzilla@moz-3nj.rnu.131.95.IP)
[00:32:53] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[00:32:53] *** rkruppe_ is now known as rkruppe
[00:40:08] *** Quits: WindowsBunny (Peter@moz-prmara.east.verizon.net) (Ping timeout: 121 seconds)
[00:47:01] *** Quits: marsel (user@moz-jir.4tc.180.94.IP) (Ping timeout: 121 seconds)
[00:49:27] *** Quits: iitaku (textual@moz-u578hl.ocn.ne.jp) (Quit: My Mac has gone to sleep. ZZZzzz…)
[00:49:36] *** Joins: ryanhiebert (ryanhiebert@moz-nsd5kl.ks.cox.net)
[00:50:06] *** Joins: iitaku (textual@moz-u578hl.ocn.ne.jp)
[00:50:46] *** Joins: WindowsBunny (Peter@moz-prmara.east.verizon.net)
[00:53:30] *** Quits: ryanhiebert (ryanhiebert@moz-nsd5kl.ks.cox.net) (Connection closed)
[00:58:16] *** Joins: Sho (sho@moz-qkd.1o6.28.5.IP)
[00:59:54] *** Quits: iitaku (textual@moz-u578hl.ocn.ne.jp) (Quit: My Mac has gone to sleep. ZZZzzz…)
[01:00:22] *** Joins: iitaku (textual@moz-u578hl.ocn.ne.jp)
[01:01:19] *** Quits: chc4 (chc4@moz-mjph4c.ma.comcast.net) (Ping timeout: 121 seconds)
[01:05:58] *** Joins: lfairy (lfairy@moz-hve4m3.ihug.co.nz)
[01:09:56] *** Quits: brson (brson@moz-f0v.335.39.84.IP) (Quit: leaving)
[01:10:50] *** Quits: iitaku (textual@moz-u578hl.ocn.ne.jp) (Quit: My Mac has gone to sleep. ZZZzzz…)
[01:10:53] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[01:11:20] *** Joins: iitaku (textual@moz-u578hl.ocn.ne.jp)
[01:16:10] *** Joins: dinfuehr (dinfuehr@moz-jskej7.highway.telekom.at)
[01:20:13] *** Quits: dinfuehr (dinfuehr@moz-jskej7.highway.telekom.at) (Ping timeout: 121 seconds)
[01:21:13] *** Quits: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se) (Ping timeout: 121 seconds)
[01:21:47] *** Quits: iitaku (textual@moz-u578hl.ocn.ne.jp) (Quit: My Mac has gone to sleep. ZZZzzz…)
[01:22:18] *** Joins: iitaku (textual@moz-u578hl.ocn.ne.jp)
[01:22:48] *** Quits: eibwen (eibwen@moz-00qdng.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[01:24:45] *** Joins: Twisol (textual@moz-0033n4.res.rr.com)
[01:26:17] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[01:27:43] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[01:27:49] *** Quits: achanda (achanda@moz-qv7q4n.ca.comcast.net) (Connection closed)
[01:28:09] *** Joins: achanda (achanda@moz-qv7q4n.ca.comcast.net)
[01:28:34] *** Joins: chc4 (chc4@moz-mjph4c.ma.comcast.net)
[01:30:13] <eddyb> insaneinside: it becomes the new value
[01:30:42] <eddyb> insaneinside: imagine that Box<T> -> Box<Trait> is not special-cased, just an impl of CoerceUnsized
[01:31:01] <eddyb> so those are the semantics that you get
[01:32:11] *** Quits: achanda (achanda@moz-qv7q4n.ca.comcast.net) (Ping timeout: 121 seconds)
[01:32:16] *** Quits: iitaku (textual@moz-u578hl.ocn.ne.jp) (Quit: My Mac has gone to sleep. ZZZzzz…)
[01:32:46] *** Joins: iitaku (textual@moz-u578hl.ocn.ne.jp)
[01:32:50] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[01:33:28] <insaneinside> eddyb: cool, thanks.k  Relatedly -- any ideas on the 
[01:33:31] <insaneinside> erp
[01:33:50] <insaneinside> *on the issue that p1start and I have been discussing in #rust?
[01:34:58] <eddyb> insaneinside: which is?
[01:35:05] *** Joins: nham (nham@moz-755.bu3.214.98.IP)
[01:35:23] <insaneinside> Calling drop on trait objects
[01:35:29] <insaneinside> and how to do it properly
[01:35:44] <insaneinside> e.g. my use case is https://pastebin.mozilla.org/8833737
[01:36:31] <eddyb> why'd you have to copy my hack :P?
[01:36:33] *** Joins: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net)
[01:36:49] <insaneinside> eddyb: It's the sincerest form of flattery. :)
[01:37:00] <p1start> insaneinside: Huh, looks like it SIGTRAPs on non-trait-object types too
[01:37:11] <eddyb> insaneinside: test_with_drop fails?
[01:37:12] <insaneinside> p1start: in my case, yes.
[01:37:17] <insaneinside> eddyb: yep.
[01:37:18] <p1start> And in my case
[01:37:31] <insaneinside> And yet `test_simple_value` works fine.
[01:37:43] <insaneinside> (I wonder what drop_glue *that* one calls!)
[01:38:14] <eddyb> "Option<*mut u8>" this is a bit wasteful
[01:38:36] *** Quits: Twisol (textual@moz-0033n4.res.rr.com) (Ping timeout: 121 seconds)
[01:38:41] <eddyb> and why do you need to store the align?
[01:39:03] <insaneinside> ...for reuse?
[01:39:21] <eddyb> wait, where do you store the dynamic info for FlexBox?
[01:39:32] <insaneinside> FlexBox is reusable, and I'd assume that ... oh wait, the memory address itself has an alignment.
[01:39:40] <insaneinside> eddyb: what do you mean?
[01:39:44] <eddyb> OH
[01:39:52] <eddyb> FlexBox is a single-element arena
[01:39:58] <insaneinside> yep, basically
[01:40:34] <insaneinside> and the Ref type is the handle to whatever's inside -- a special-case auto_ptr.
[01:40:43] <eddyb>     pub fn store<'a,T>(&mut self, obj: T) -> Ref<'a,T> {
[01:40:45] <eddyb> this is wrong
[01:40:53] <eddyb> either remove 'a or put it in &mut self
[01:41:04] <eddyb> right now you can set it to Ref<'static, T>
[01:42:04] <insaneinside> Somewhat amusing, but likely disastrous.  Why didn't that (at minimum) get a lint warning?
[01:42:34] <eddyb>         unsafe { ((*self.tydesc).drop_glue)(data8); }
[01:43:00] <eddyb> why aren't you using drop_in_place? this is likely wrong if you're not grabbing tydesc correctly
[01:43:13] *** Quits: iitaku (textual@moz-u578hl.ocn.ne.jp) (Quit: My Mac has gone to sleep. ZZZzzz…)
[01:43:17] <insaneinside> eddyb: because it's *completely* undocumented, probably.
[01:43:44] *** Joins: iitaku (textual@moz-u578hl.ocn.ne.jp)
[01:44:01] <eddyb> it's an intrinsic. exposing it in mem is when it would be documented
[01:44:21] <eddyb> but your code should still work
[01:45:06] <eddyb>         let data = unsafe { transmute::<_,TraitObject>(&self.obj as &tydesc::AllTypes).data };
[01:45:13] <eddyb> wait, this shouldn't compile
[01:45:24] * insaneinside is good at finding bugs. :D
[01:45:28] <insaneinside> Why not?
[01:45:33] <eddyb> you can't cast nor coerce &T to &U unless T is Sized
[01:45:50] <eddyb> exceptions beeing &Trait+Send -> &Trait
[01:46:07] <eddyb> but if it's a type parameter, it's not supposed to work
[01:46:13] *** Joins: Twisol (textual@moz-0033n4.res.rr.com)
[01:47:23] <insaneinside> I'm not quite sure what you're talking about -- isn't this just a "standard" use of std::raw::TraitObject?
[01:48:01] <eddyb> insaneinside: you can't cast &[T] to &Trait
[01:48:21] <eddyb> but in your case you can create a Ref<[T]> and drop it
[01:48:25] <eddyb> so there is an issue
[01:49:56] <insaneinside> does `drop_in_place` work with trait objects?
[01:50:11] <insaneinside> (and... how?)
[01:50:25] <eddyb> insaneinside: that's the sole reason for its existence
[01:50:42] <eddyb> all trait objects contain a dtor, the size and the align
[01:51:04] <eddyb> there's size_of_val and friends to get access to that other data
[01:51:43] <eddyb> heh, the CoerceUnsized impl is useless
[01:51:48] <eddyb> because U is not ?Sized
[01:52:31] <insaneinside> eddyb: well, *I* think I'm doing pretty well for two months with Rust. :P
[01:52:35] <insaneinside> thanks, btw
[01:52:58] <eddyb> I am very confused
[01:52:59] <p1start> insaneinside: OK, I finally stopped the SIGTRAP
[01:53:11] <eddyb> it's not crashing when I turn it into a Ref<[i32]> and drop it
[01:53:17] <insaneinside> p1start: just using `drop_in_place` worked for me.
[01:53:17] <p1start> Turns out that I was dereferencing an uninitialised pointer
[01:53:31] <insaneinside> eddyb: does valgrind tell you anything?
[01:53:36] <eddyb> OH
[01:53:40] <eddyb> bwahahahahahaha
[01:53:42] <p1start> Half of my code was written a year ago when I was much less experienced, so I suppose I shouldn’t be surprised
[01:53:47] <eddyb> of course it doesn't work
[01:53:52] <eddyb>         let data = unsafe { transmute::<_,TraitObject>(&self.obj as &tydesc::AllTypes).data };
[01:53:54] <eddyb> &self.obj
[01:54:03] <eddyb> the type of that expression is &&mut T
[01:54:11] *** Quits: iitaku (textual@moz-u578hl.ocn.ne.jp) (Quit: My Mac has gone to sleep. ZZZzzz…)
[01:54:25] <eddyb> anyways, time to fix it
[01:54:41] <insaneinside> it's even worse when the language promises to tell you about your footguns. :)
[01:54:42] *** Joins: iitaku (textual@moz-u578hl.ocn.ne.jp)
[01:55:51] <eddyb> that's the thing, the code wouldn't have compiled without the extra &
[01:56:24] <insaneinside> hmmm... so *should* it have?
[01:58:04] <p1start> eddyb: Are you aware that Rc runs destructors for trait objects twice? http://is.gd/nEWOEZ
[01:58:28] <p1start> Or at least it seems to
[01:59:48] <bstrie> Gankro: question: someone wants to write a function that applies to all types that can be drained. it looks like Vec::drain is an inherent impl at the moment. are we waiting for HKT to get rid of inherent impls like this?
[02:01:11] <eddyb> insaneinside: https://gist.github.com/eddyb/de5084d7c643d5d37312
[02:01:24] <eddyb> insaneinside: I tried to get it small enough so I can share it on playpen, but I couldn't
[02:02:03] <insaneinside> eddyb: thanks lots!
[02:02:56] <bstrie> shep-home: are you shepmaster on SO?
[02:03:28] <insaneinside> eddyb: so what's the purpose of that sketchy-looking code in `arena`?
[02:04:53] <eddyb> insaneinside: dynamic typing
[02:04:58] <eddyb> insaneinside: which you don't have
[02:04:59] <bstrie> insaneinside: nsa backdoor
[02:05:06] *** Quits: iitaku (textual@moz-u578hl.ocn.ne.jp) (Quit: My Mac has gone to sleep. ZZZzzz…)
[02:05:15] <eddyb> bstrie: I don't even know whether something is actually using that type at all
[02:05:17] * insaneinside likes ("likes") bstrie's answer.
[02:05:30] <lfairy> p1start: does it crash with a double free if Bass wraps a Box instead?
[02:05:36] <eddyb> p1start: file a bug, seems like an actual issue
[02:05:37] *** Joins: iitaku (textual@moz-u578hl.ocn.ne.jp)
[02:06:03] <kmc> bstrie is pretty clearly an NSA agent
[02:06:04] <p1start> lfairy: It didn’t crash when I tried it with a Vec
[02:06:08] <p1start> But I bet it was invoking UB
[02:06:21] <bstrie> kmc: I work from within the system. I don't expect your sympathy
[02:06:22] <kmc> shows up really early and takes an uncommon interest in a language that has the potential to eliminate ~50% of security holes in commodity software...
[02:06:27] <insaneinside> kmc: so... you're saying he's misdirecting us?
[02:06:27] <kmc> :O
[02:06:52] <kmc> yes
[02:06:56] <bstrie> I am the Misdirector of the NSA
[02:06:58] <kmc> wheels within wheels
[02:07:02] <eddyb> bstrie: teehee
[02:07:14] <eddyb> and on that bombshell, ladies and gentlemen
[02:09:10] *** Quits: zz_kimundi (kimundi@moz-8joosr.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[02:09:10] <p1start> eddyb: https://github.com/rust-lang/rust/issues/25515
[02:09:22] *** Quits: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net) (Ping timeout: 121 seconds)
[02:10:06] <blaenk> why you gotta be poking holes in our rust p1start
[02:10:22] <blaenk> thought you were a team player
[02:10:48] <p1start> Hey, at least I’m not an NSA agent
[02:11:06] <blaenk> hey p1blart can you give me an opinion over here
[02:11:17] *** Quits: eddyb (eddyb@moz-egg.q07.26.188.IP) (Ping timeout: 121 seconds)
[02:11:19] <insaneinside> actually... is use-after-free a security vulnerability?
[02:11:37] *** Joins: zz_kimundi (kimundi@moz-sorbkk.dip0.t-ipconnect.de)
[02:11:38] *** zz_kimundi is now known as kimundi
[02:11:46] <blaenk> trying to help make an iron package stable, and I have this function https://gist.github.com/blaenk/4ca80f811f0fdb11d9c9 the match on line 25 should only occur if cfg(feature = "cache")
[02:12:10] *** Quits: genbattle (genbattle@moz-r09mao.xtra.co.nz) (Ping timeout: 121 seconds)
[02:12:23] <blaenk> I think the way is to wrap that in a function, and create one for cfg(not(feature = "cache"))
[02:12:23] <reem> blaenk: you can put a #[cfg] on the Some(path) branch
[02:12:27] <lfairy> insaneinside: yes...?
[02:12:31] <blaenk> oh you can do that? :D awesome
[02:12:47] <blaenk> and so I'd create one for cfg(not) and it'd just yield an error?
[02:12:48] <lfairy> insaneinside: since the memory is probably re-used somewhere else
[02:12:55] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[02:13:28] <p1start> blaenk: You might get problems with exhaustive patterns
[02:13:29] <blaenk> I remember there was an rfc about attributes on match arms but I never knew if it made it in
[02:13:30] <reem> blaenk: you’d have to return an Ok(response)
[02:13:36] <reem> blaenk: on the #[cfg(not)] branch
[02:13:59] <insaneinside> lfairy: just wondering if the proposed security disclosure policy has any bearing on that issue p1start just filed, that's all.
[02:14:01] <blaenk> ohhh I see, the try_cache will either yield the file or one from a cache
[02:14:22] <blaenk> I think I'll create a try_cache for not(cache) that just yields a response no matter what, bypassing cache
[02:14:27] <blaenk> then I can keep that match code in tact
[02:14:31] <blaenk> or what do you think
[02:14:40] *** Joins: kmcguire__ (kmcguire@moz-pg1gb9.biz.rr.com)
[02:15:05] <blaenk> it's ok you guys have given me some ideas
[02:15:10] <blaenk> I'll come up with something
[02:15:19] *** Quits: kmcguire_ (kmcguire@moz-pg1gb9.biz.rr.com) (Connection closed)
[02:15:31] <p1start> Nooo I missed the moment when rust-lang/rust got 11,111 stars :(
[02:15:35] <reem> blaenk: I’d rather not create a function called try_cache that doesn’t cache ;)
[02:15:39] <blaenk> I agree
[02:15:45] <p1start> Unstarred just to see it :P
[02:15:53] <insaneinside> p1start: cheater.
[02:16:00] <reem> p1start: I see it too :D
[02:16:04] *** Quits: iitaku (textual@moz-u578hl.ocn.ne.jp) (Quit: My Mac has gone to sleep. ZZZzzz…)
[02:16:34] *** Joins: iitaku (textual@moz-u578hl.ocn.ne.jp)
[02:16:43] *** Quits: iitaku (textual@moz-u578hl.ocn.ne.jp) (Connection closed)
[02:16:55] <lfairy> I'm tempted to screencap it and post it to /r/rust
[02:16:55] *** Joins: dinfuehr (dinfuehr@moz-jskej7.highway.telekom.at)
[02:17:02] <lfairy> delicious delicious karma
[02:17:11] <insaneinside> it's up to ...13 (or more) now
[02:17:35] *** Quits: Twisol (textual@moz-0033n4.res.rr.com) (Ping timeout: 121 seconds)
[02:18:55] <blaenk> good to see you back bro1start
[02:19:00] <blaenk> was hoping 1.0 would bring you back
[02:20:00] <bstrie> dammit, online github editor
[02:20:39] <blaenk> reem this is my first time feature gating things like this. is this the best way to do this? https://gist.github.com/blaenk/4cb44fac70dccbd5e2dd
[02:20:48] *** Quits: jmesmon (ydoc@moz-naocu2.einic.org) (Connection closed)
[02:20:54] <blaenk> and if so, then I guess I should copy the doc onto the second definition
[02:20:59] *** Quits: dinfuehr (dinfuehr@moz-jskej7.highway.telekom.at) (Ping timeout: 121 seconds)
[02:21:30] <reem> blaenk: yes and yes
[02:21:35] <blaenk> ok
[02:21:46] <blaenk> alright building on stableeee
[02:22:08] <blaenk> aw, depends on iron-test, which doesn't work on stable it seems
[02:22:08] <reem> nice
[02:22:17] <blaenk> at least, the tests don't work
[02:22:18] <Mutabah> Is there any special reason why there's no Default impl for [T: Default; N]?
[02:22:18] <reem> ya.. iron-test needs to be revamped anyway
[02:22:24] <reem> as part of a better testing/mocking solution for iron
[02:22:29] <blaenk> but will it block this change?
[02:22:32] <reem> no
[02:22:38] <blaenk> sweet, will send it for you to review then
[02:22:41] <reem> just run the tests with a nightly compiler
[02:22:43] <reem> to make sure they work
[02:22:46] <blaenk> yup will do
[02:22:51] <reem> (compile with a nightly compiler with the feature on/off)
[02:22:55] <blaenk> okok
[02:23:03] <reem> can you actually edit the .travis.yml to do that as well?
[02:23:10] <blaenk> yeah I'll do that
[02:23:39] <reem> blaenk: this and the .travis.yml from hyper might be useful https://github.com/hyperium/hyper/blob/master/.travis.sh
[02:23:52] <reem> (just to see how we handle similar cases there)
[02:23:55] <blaenk> ok
[02:26:34] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[02:28:21] <blaenk> reem: one dividing difference is that to get the metadata in stable, you have to use the free fn std::fs::metadata(&path) -> Result, since there's no PathExt for you to do path.metadata(). the annoying thing is that this introduces a result, so, I'm not sure what to do. should I unwrap? if not, I'll go through the instances with you to ask you if my handling of the Err is correct in a given context
[02:28:59] <reem> blaenk: can you give an example, I don’t understand exactly what the problem is
[02:29:03] <blaenk> sure will do
[02:29:07] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[02:29:26] <blaenk> reem: https://gist.github.com/blaenk/b61ccd577dd10977a487
[02:29:34] <blaenk> 17 is the old code, 18 is how you'd have to do it
[02:30:15] <blaenk> what I'm saying is if you don't want to unwrap, I'll run through you each instance to make sure my error handling of the Err case is correct. like in that example, what should I return if the metadata function returns Err?
[02:30:32] <blaenk> since the containing function yields a boolean. I imagine false?
[02:31:11] *** Quits: gsingh93_ (gulshan@moz-ln1ktu.st3l.iv8o.0004.2601.IP) (Ping timeout: 121 seconds)
[02:31:17] <reem> blaenk: what is the case where metadata returns an error?
[02:31:21] *** Joins: Twisol (textual@moz-0033n4.res.rr.com)
[02:31:25] <reem> the file does not exist?
[02:31:45] <blaenk> "This function will return an error if the user lacks the requisite permissions to perform a metadata call on the given path or if there is no entry in the filesystem at the provided path."
[02:31:54] *** Joins: annodomini (lambda@moz-qgii5v.ma.comcast.net)
[02:32:21] <reem> we should not unwrap in either case, since that would allow a client to consistently cause a panic by just sending a path we don’t have permission to access
[02:32:26] <blaenk> https://gist.github.com/blaenk/b61ccd577dd10977a487
[02:32:28] <reem> “no entry” => 404
[02:32:41] <blaenk> alright so on error, give a 404
[02:32:53] <blaenk> I'll get back to you on the other locations
[02:32:56] <reem> hmm, I wonder if we should give a different response on permissions errors
[02:33:33] <blaenk> 403 for perms, 404 for non existent?
[02:33:51] <blaenk> but reem the reason I ask is because
[02:33:56] <blaenk> look at that function, it returns a boolean
[02:34:16] <blaenk> so I'll change the return type to be able to possibly return an http response?
[02:34:30] <reem> it’s an internal function
[02:34:34] <blaenk> yes
[02:34:37] <reem> so feel free to refactor however you feel is most appropriate
[02:34:40] <blaenk> ok
[02:34:45] <reem> (use a custom enum, return a response, whatever)
[02:34:47] <blaenk> I might make it yield an enum, 
[02:34:48] <blaenk> yeah
[02:34:55] <blaenk> or not sure, will take a look
[02:35:09] *** Quits: Skyler (Skyler@moz-rv949t.sd.cox.net) (Client exited)
[02:35:27] <Eridius> My friend is trying to get rust to work on his Raspberry Pi (as opposed to cross-compiling). Apparently he managed to get rustc itself to work, but he said cargo won't build
[02:35:28] *** Joins: Skyler (Skyler@moz-rv949t.sd.cox.net)
[02:35:34] <Eridius> "it chokes on tar. u32 vs i32"
[02:36:01] <reem> wow, I am surprised he could build rustc on it
[02:36:14] <whipsch> :$
[02:36:19] <Eridius> so am I
[02:36:19] <whipsch> that must have taken a really long time
[02:36:24] <reem> if he has the more specific error tar could probably be changed to work
[02:36:27] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[02:36:28] <Eridius> err, I think he cross-compiled to build rustc
[02:36:32] <Eridius> he didn't build rustc on the Pi itself
[02:36:33] <whipsch> oh ok good
[02:36:35] <whipsch> haha
[02:36:37] <reem> ooh
[02:36:44] <Eridius> he asked about doing that, but I told him I didn't think it would work because of RAM requirements
[02:37:02] <reem> ya, rustc usually uses like 1-2 GB to bootstrap
[02:37:11] <blaenk> reem: so what I'm thinking of doing instead, since it's called `should_redirect`, I don't think it's a good idea to introduce all this handling about 404/403 responses. so I'm thinking that at the beginning of the handler I'll handle that, i.e. if it's non-existent then return those responses
[02:37:28] <blaenk> and otherwise get the metadata, which I'll then pass to `should_redirect` so it doesn't have to get it itself
[02:37:32] <reem> +1
[02:37:36] <blaenk> ok
[02:39:03] *** Quits: Twisol (textual@moz-0033n4.res.rr.com) (Ping timeout: 121 seconds)
[02:39:27] *** Joins: Twisol (textual@moz-0033n4.res.rr.com)
[02:39:46] *** Joins: marsel (user@moz-jir.4tc.180.94.IP)
[02:40:43] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[02:41:40] *** Joins: annodomini_ (lambda@moz-b8m.v53.167.208.IP)
[02:41:43] *** Quits: Twisol (textual@moz-0033n4.res.rr.com) (Quit: Textual IRC Client: www.textualapp.com)
[02:41:50] *** Joins: Twisol (textual@moz-0033n4.res.rr.com)
[02:42:08] *** Quits: annodomini (lambda@moz-qgii5v.ma.comcast.net) (Ping timeout: 121 seconds)
[02:42:08] *** annodomini_ is now known as annodomini
[02:49:02] *** Quits: Twisol (textual@moz-0033n4.res.rr.com) (Ping timeout: 121 seconds)
[02:49:23] *** Joins: Twisol (textual@moz-0033n4.res.rr.com)
[02:49:28] <blaenk> reem: https://gist.github.com/blaenk/264d9fb7ed808c3713d1 so I'm checking against 'file doesnt exist' and 'no permissions', supposedly the function will only ever return one of those two, but I of course still have to provide a catch-all. what should I do in that case?
[02:50:18] <blaenk> InternalServerError?
[02:50:26] <blaenk> http 500?
[02:50:50] <blaenk> I'll just roll with that for now
[02:52:46] <reem> 500 for unknown errors
[02:54:57] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[02:56:25] <blaenk> oh the way you return an error response is with IronError, ok. I was constructing a response manually with Response::with
[02:59:35] *** Parts: insaneinside (user@moz-dgv9mb.customer.broadstripe.net) ("thanks!")
[03:00:54] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[03:05:00] *** Joins: Johannes (Johannes@moz-4et8d7.ocn.ne.jp)
[03:08:14] *** Quits: Skyler (Skyler@moz-rv949t.sd.cox.net) (Connection closed)
[03:08:40] *** Quits: annodomini (lambda@moz-b8m.v53.167.208.IP) (Client exited)
[03:09:10] *** Quits: Johannes (Johannes@moz-4et8d7.ocn.ne.jp) (Ping timeout: 121 seconds)
[03:09:59] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[03:10:58] *** Joins: davebettin (davebettin@moz-acc.cl4.35.72.IP)
[03:12:31] <blaenk> shouldn't this only mark an fn as a #[test] if the 'cache' feature is enabled? #[cfg_attr(feature = "cache", test)]
[03:12:58] <Mutabah> blaenk: Is equality correct there?
[03:13:10] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[03:13:11] <blaenk> yeah I'm starting to think it can't be used there
[03:13:13] <Mutabah> blaenk: or is it 'feature(cache)'
[03:13:25] <blaenk> ah, will try. I thought that was for rust-level feature gates
[03:13:30] <blaenk> cause I'm talking about a cargo feature
[03:13:36] <blaenk> e.g. cfg(feature = "cache")
[03:13:52] *** Quits: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com) (Ping timeout: 121 seconds)
[03:13:54] * Mutabah is guessing
[03:14:28] <blaenk> yeah what I'm doing should work I think, but it's not
[03:14:36] <cmr> blaenk: that is correct.
[03:14:43] <cmr> ie, what you have should work.
[03:14:44] <blaenk> right? but cargo test keeps running it
[03:14:46] <cmr> What's going wrong?
[03:14:52] <cmr> ... is the cache feature enabled? :)
[03:14:52] <blaenk> I thought cargo test --features cache only would run it
[03:14:59] <blaenk> nope, cargo test shouldn't enable it right?
[03:15:03] <blaenk> I'd need to pass --features cache
[03:15:24] <cmr> Not necessarily, since it can be a default in the Cargo.toml.
[03:15:30] <blaenk> will check the manifest
[03:16:25] <blaenk> yeah I think I'm safe
[03:16:38] <blaenk> "With the exception of the default feature, all features are opt-in."
[03:16:42] <blaenk> and I don't have a default feature
[03:16:57] <blaenk> I just have [features]
[03:16:57] <blaenk>  cache = ["filetime"]
[03:16:58] *** Quits: Twisol (textual@moz-0033n4.res.rr.com) (Connection closed)
[03:17:21] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Connection closed)
[03:17:40] *** Joins: dinfuehr (dinfuehr@moz-jskej7.highway.telekom.at)
[03:17:48] *** Joins: Twisol (textual@moz-uuf.s3i.166.130.IP)
[03:17:48] <blaenk> I just want to define some tests for a particular feature
[03:19:18] <blaenk> reem: basically when I run cargo test --features cache, they all pass
[03:19:30] <blaenk> but running `cargo test` doesn't pass cause it tries to run the tests from tests/cache.rs
[03:19:48] <blaenk> so I figured i'd only mark them as tests if the cache feature is enabled, with: #[cfg_attr(feature = "cache", test)]
[03:19:50] <reem> Put them behind a cfg
[03:19:52] <blaenk> but it doesn't seem to be working
[03:19:57] <reem> Oh, ugh
[03:20:00] <reem> File a bug?
[03:20:14] <blaenk> ok
[03:20:16] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[03:20:23] <reem> (in cargo)
[03:20:27] <blaenk> someone said the other day that it cfg_attr probably doesn't work with syn exts, or something
[03:20:42] <blaenk> oh it's a cargo bug?
[03:21:32] <reem> I think it's just applying the wrong flags to rustc but I do not know
[03:21:43] *** Quits: dinfuehr (dinfuehr@moz-jskej7.highway.telekom.at) (Ping timeout: 121 seconds)
[03:21:45] <blaenk> will check with --verbose
[03:22:32] <blaenk> no yeah I think it's a limitation of cfg_attr
[03:22:36] <blaenk> but, idk
[03:22:45] <blaenk> cause it's not passing the feature to rustc
[03:23:32] <blaenk> anyways. tests pass when I put it with --features cache, and it builds fine
[03:23:35] <blaenk> will put up for review
[03:26:45] *** Quits: Twisol (textual@moz-uuf.s3i.166.130.IP) (Quit: )
[03:27:35] *** Joins: semarie (semarie@moz-b0t90g.tor-proxy.net.ua)
[03:29:02] <blaenk> what's up with travis, does it use stable now, no idea
[03:29:32] <reem> Not sure
[03:29:35] <kmc> i hope not lol
[03:29:43] <blaenk> yeah I don't think it does
[03:36:59] *** Joins: Twisol (Twisol@moz-0033n4.res.rr.com)
[03:39:52] *** Quits: Sho (sho@moz-qkd.1o6.28.5.IP) (Quit: Konversation terminated!)
[03:41:45] <blaenk> reem: filed it, take a look when you get a chance
[03:45:07] *** Quits: anders (andars@moz-bsldst.sntcca.sbcglobal.net) (Ping timeout: 121 seconds)
[03:45:56] *** Joins: Skyler (Skyler@moz-rv949t.sd.cox.net)
[03:47:29] *** Quits: davebettin (davebettin@moz-acc.cl4.35.72.IP) (Ping timeout: 121 seconds)
[03:47:40] *** Joins: ryanhiebert (ryanhiebert@moz-nsd5kl.ks.cox.net)
[03:55:57] *** Joins: anders (andars@moz-bsldst.sntcca.sbcglobal.net)
[03:57:22] *** Quits: erz (erz@moz-fiq1tl.broadband.corbina.ru) (Quit: My Mac has gone to sleep. ZZZzzz…)
[04:04:50] *** Quits: c74d (c74d3a4ebb6@moz-0ersgu.oc.cox.net) (Connection closed)
[04:06:42] *** Joins: c74d3 (c74d@moz-0nv2lm.mggc.hibn.4404.2002.IP)
[04:07:28] *** Parts: c74d3 (c74d@moz-0nv2lm.mggc.hibn.4404.2002.IP) ()
[04:09:11] *** Quits: ryanhiebert (ryanhiebert@moz-nsd5kl.ks.cox.net) (Connection closed)
[04:11:23] *** Quits: ytain (ytain@moz-504.hk6.248.206.IP) (Quit: Textual IRC Client: www.textualapp.com)
[04:13:34] *** Joins: c74d (c74d3a4ebb6@moz-0ersgu.oc.cox.net)
[04:14:01] *** Joins: ryanhiebert (ryanhiebert@moz-nsd5kl.ks.cox.net)
[04:16:48] <Gankro> bstrie: everything is inherent in collections. I guess you could hkt to victory in Rust 2.0
[04:18:20] *** Quits: ryanhiebert (ryanhiebert@moz-nsd5kl.ks.cox.net) (Ping timeout: 121 seconds)
[04:18:25] *** Joins: dinfuehr (dinfuehr@moz-jskej7.highway.telekom.at)
[04:19:02] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[04:19:40] *** cmr changes topic to '40 days to 1.1.0 | https://botbot.me/mozilla/rust-internals | https://buildbot.rust-lang.org/homu/queue/rust | see also #rustc and #rust-libs'
[04:19:52] <bstrie> Gankro: would it be a breaking change to move a method from an inherent impl to a trait impl?
[04:21:03] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[04:21:21] <cmr> bstrie: I believe so.
[04:21:27] <Gankro> bstrie yes and no. You can have the inherent impl call that trait for backcompat
[04:21:34] <cmr> yeah.
[04:21:55] <Gankro> But you can't deprecate then
[04:22:05] <cmr> Can't you?
[04:22:33] *** Quits: dinfuehr (dinfuehr@moz-jskej7.highway.telekom.at) (Ping timeout: 121 seconds)
[04:22:44] *** Quits: dcrewi (david@moz-3u3d5k.gyrae.net) (Ping timeout: 121 seconds)
[04:22:44] <Gankro> I guess if they use UFCS it will be fine
[04:22:59] <cmr> It'd be fine even if they don't?
[04:23:05] <cmr> Like, why would deprecating a method be bad.
[04:23:12] <bstrie> if all we care about is letting people do T: Drain, then having it just call the inherent impl is fine
[04:23:25] <bstrie> because your own code wouldn't need UFCS then
[04:23:39] *** Joins: summerlight__ (summerlight@moz-99k.2mj.130.121.IP)
[04:24:02] <Gankro> Well the inherent wins in a concrete context so youbwould getnlotd ofndeprecated alerts
[04:24:14] <cmr> So?
[04:24:32] *** Joins: ManishCloud (uid36524@moz-756cgc.ealing.irccloud.com)
[04:25:23] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[04:25:34] *** Quits: ManishCloud (uid36524@moz-756cgc.ealing.irccloud.com) (Quit: )
[04:25:38] <bstrie> that does seem problematic
[04:25:49] <Gankro> That would suck?
[04:25:50] <bstrie> you can't just train people to ignore warnings
[04:25:52] <cmr> It's not *breaking* though.
[04:25:59] <Gankro> cmr sure
[04:26:11] <bstrie> why would we need to deprecate it?
[04:26:15] <cmr> Saying "you can't" and "you shouldn't" are two important things when changing a library...
[04:27:31] <bstrie> if the whole point is just to have T: Drain work, then it doesn't matter which method the user is calling in the concrete context. one's just a wrapper for the other, encourage them to do what looks nicest
[04:28:11] <bstrie> Gankro: specifically the request was "Basically, what I want is this: an iterator that drains elements from a collection, but, if for whatever reason you stop draining elements, the remaining elements are left untouched."
[04:28:30] <Gankro> Drain doesn't do that
[04:28:48] <Gankro> It is equivalent to calling 'clear
[04:29:19] <Gankro> You can mem forget it but the behaviour is unspecified at best
[04:30:17] *** Joins: tamird (textual@moz-gg3hct.res.rr.com)
[04:30:28] <Gankro> Drain-range is sort of like that but you have to know where to stop before you start
[04:31:07] <bstrie> wait, do we have both drain and drain_range?
[04:31:27] <bstrie> are they both unstable? I thought that drain(..) was the ultimate dream
[04:31:30] <Gankro> bstrie only in my head
[04:31:49] <Gankro> drain(..) Is what we have today
[04:32:07] <bstrie> and that's taking a range, so what is this Drain-range you speak of?
[04:32:30] <Gankro> drain(!RangeFull)
[04:32:48] <bstrie> ah, so that's a different type entirely
[04:33:05] <Gankro> E.g. drain(a..)
[04:33:31] *** Joins: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net)
[04:33:32] <Gankro> Itnwas a seperate rfc to add the non-full case so I consider it a distinct api
[04:34:05] <bstrie> Gankro: is this going to be pretty enough to at last make me not gripe about the range syntax?
[04:34:24] <Gankro> I don't follow
[04:34:52] <Gankro> I have mixed feelings on overloading on range syntax
[04:34:56] <bstrie> Gankro: I have long been of the opinion that the range syntax is not pulling its weight, and nobody has ever convinced me otherwise
[04:35:10] <bstrie> not just overloading, having range syntax at all
[04:36:10] <bstrie> I feel like whenever I try to do something nice with it it fails mysteriously and people tell me to just use iterators with skip and take
[04:36:17] <Gankro> bstrie: I'm not a huge fan of it these days... It's a bit hostile to refactoring
[04:36:36] <bstrie> how so
[04:36:58] *** skeuomor1 is now known as skeuomorf
[04:37:39] <Gankro> a..b -> (a..b).adaptor() vs range(a, b).adaptor()
[04:38:13] <Gankro> You have to do more wranglinf when you want to do somerhing more complex
[04:38:26] <Gankro> Same problem with for loops taking intoiter
[04:38:48] <Gankro> &vec -> vec.iter().adaptor()
[04:38:52] <bstrie> not sure why we need to wrap the range syntax in parens
[04:39:13] <Gankro> bstrie: a and b may be expressions
[04:39:13] <blaenk> I think that's only when you're calling a method on it
[04:39:29] <blaenk> but otherwise you can do for x in a .. b {} I'm pretty sure
[04:39:45] <bstrie> I don't get why we need the parens when calling a method on it
[04:39:51] <bstrie> struggling to thing how that's ever ambiguous
[04:40:00] <p1start> bstrie: a..b.method() == a..(b.method())
[04:40:28] <bstrie> that's not ambiguity, that's just precedence. but maybe that's a good reason
[04:40:32] <p1start> E.g., `&array[..array.len()]`
[04:40:52] <p1start> Or more realistically, `&array[..array.len() - 1]`
[04:42:11] <Gankro> bstrie I wanna catch some zz's but I might write somethinf up later (only have a phone till monday tho)
[04:42:36] <bstrie> Gankro: wait are you in SF yet?
[04:42:42] <Gankro> Yep
[04:42:42] <Manishearth> bstrie: amazing talk btw
[04:42:56] <bstrie> Manishearth: ha, thanks. I could go on for hours about this topic
[04:43:08] <bstrie> and maybe I will someday, and just keep talking until the entire audience filters out
[04:43:20] <whipsch> came for the talk, stayed for the shirt
[04:43:35] <Manishearth> haha
[04:43:55] *** Quits: Diggsey (diggsey@moz-e3pv94.dsl.pipex.com) (Ping timeout: 121 seconds)
[04:44:02] <blaenk> what talk give me link ya
[04:44:32] <Manishearth> bstrie: https://air.mozilla.org/rust-release-party/
[04:44:41] <blaenk> yeah bstrie watch your talk
[04:44:42] <Manishearth> whoops, blaenk 
[04:45:06] * Manishearth complains that the alphabet has only 26 letters
[04:45:18] <Manishearth> you should have theoretically infinite letters, like we do
[04:45:27] <Manishearth> autocomplete would never be a problem
[04:45:34] * c74d wonders who “you” and “we” are.
[04:45:35] <Manishearth> blaenk: it's the last talk of the series
[04:45:40] <blaenk> thanks
[04:46:09] <Manishearth> c74d: you = English, we = Devanagri-using languages
[04:46:14] <c74d> ah
[04:46:24] <Manishearth> though technically the infiniteness of the letters depends on your definition of letters
[04:46:51] <Manishearth> (are ligatures letters? in the context of devanagri many treat them as such)
[04:48:10] <Manishearth> oh, btw
[04:48:10] <Manishearth> http://github.com/manishearth/rust-gc
[04:48:37] <Manishearth> not yet correct, not yet tested, not yet really squinted at, and has a bunch of unsafe blocks that shouldn't be there, but it's a start
[04:48:54] <Manishearth> Finally found someone who wanted to work on it with me :P
[04:48:55] <c74d> ooh
[04:49:04] <Manishearth> the basic design is here https://gist.github.com/mystor/fddda1141bfb30643289597
[04:49:15] <c74d> now who'll implement RC-Immix? :p
[04:49:35] <Manishearth> I haven't had a good look at the design yet, but it looks similar to the original design that I discussed yesterday, so I have high hopes for it :p
[04:50:01] <Manishearth> This is tracing, mark and sweep, *without* stack scanning or lints
[04:50:57] <Manishearth> I wish we could avoid the refcounting and replace it with stack-checking lints
[04:51:07] <Manishearth> but I don't know how to do that in a way that plays nicely with generics
[04:52:21] <Manishearth> We really want to avoid stack scanning
[04:52:41] <Manishearth> c74d: RC-Immix?
[04:56:04] <c74d> Manishearth: an advanced garbage collector, with supposed performance superiority, that I've never seen an implementation of.
[04:56:31] <bstrie> Manishearth: haven't looked yet, is it basically boehm for rust code?
[04:56:55] <bstrie> i.e. is it the only gc-like thing that could work without compiler support
[04:57:20] <bstrie> Manishearth: that gist link is dead
[04:57:41] <Manishearth>    https://gist.github.com/mystor/fddda1141bfb30643289597
[04:57:52] <bstrie> "OH NOES, 404."
[04:58:15] <Manishearth> bstrie: not sure
[04:58:20] <Manishearth> boehm does stack scanning, right?
[04:58:26] <Manishearth> We do everything by tracing
[04:58:48] <Manishearth> the problem with ours is that internal mutability of GCesque things is hard
[04:59:03] <Manishearth> though ... I guess OIBIT could be used here
[04:59:50] <bstrie> Manishearth: maybe your gist contains illegal numbers that github cannot show
[05:00:18] <Manishearth> https://gist.github.com/mystor/fa1141bfb30643289597
[05:00:19] <Manishearth> there
[05:00:37] <bstrie> that one works
[05:02:42] <bstrie> kmc: https://github.com/manishearth/rust-gc
[05:03:09] <blaenk> lol the subtitles on the rust party video
[05:03:14] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[05:03:14] <Manishearth> kmc: ******UNDER CONSTRUCTION NOT EVEN TESTED A BIT DOESNT WORK TOTALLY BROKEN*****
[05:03:20] <blaenk> they're those automatic subs and they're completely off, but you can't turn them off xD
[05:05:55] <Manishearth> (Also, performance is not a goal yet. We just want to have a working GC for rust, however slow it may be)
[05:09:48] *** Joins: ryanhiebert (ryanhiebert@moz-nsd5kl.ks.cox.net)
[05:15:32] *** Quits: anders (andars@moz-bsldst.sntcca.sbcglobal.net) (Ping timeout: 121 seconds)
[05:16:10] *** Joins: nyx (ydoc@moz-naocu2.einic.org)
[05:19:11] *** Joins: dinfuehr (dinfuehr@moz-jskej7.highway.telekom.at)
[05:19:16] <Mutabah> So, now that 1.0 is out, will the be motion on RFCs again?
[05:19:31] <Manishearth> hopefully
[05:19:44] <Manishearth> I want everyone to shut up about language features and fix diagnostics and docs first
[05:19:49] <Manishearth> :P
[05:19:52] <Manishearth> or library features
[05:19:57] <Manishearth> except the ones I want, of course
[05:20:20] <Mutabah> well... https://github.com/rust-lang/rfcs/pull/1119
[05:20:45] <Mutabah> Noone is assigned to the RFC itself
[05:20:50] <Manishearth> (I should start practicing what I preach, I haven't done diagnostics stuff in a while -- busy intern and too many side projects I get .. sidetracked on)
[05:21:01] <Manishearth> Mutabah: r- because I don't particularly need expect
[05:21:05] <Manishearth> r+ because I like you
[05:21:08] <Manishearth> :P
[05:21:14] <Manishearth> On a serious note, we should fix that
[05:21:43] * Manishearth looks at the libs team
[05:21:44] <cmr> Why was it removed from result in the first place?
[05:21:52] <cmr> Like, it was there not that long ago.
[05:22:00] <Mutabah> cmr: Was it? Huh
[05:22:55] <Manishearth> argh
[05:23:15] *** Quits: dinfuehr (dinfuehr@moz-jskej7.highway.telekom.at) (Ping timeout: 121 seconds)
[05:24:03] <Manishearth> @rust-lang/libs doesn't work for me
[05:24:36] <Luqman> Mutabah: yea, pretty sure it was
[05:25:30] <Luqman> yup, it was there in 0.8
[05:25:51] <Mutabah> Luqman: Recon you can find when it was removed?
[05:25:55] <cmr> it was more recent than that.
[05:26:00] * cmr is digging through a git log -S
[05:26:09] <Manishearth> how would you pickaxe that?
[05:26:18] <Manishearth> oh
[05:26:25] <cmr> 'fn expect' ?
[05:26:27] <Manishearth> fn expect(&self), -S should work
[05:26:39] <cmr> it took a message of some kind.
[05:26:45] <Manishearth> no I was expecting (hah!) it to choke on all the option expects
[05:26:48] <cmr> also it was self
[05:27:01] <Manishearth> but I forgot that pickaxe will look for changes
[05:27:06] <cmr> right.
[05:27:10] <Manishearth> or I forgot that option expects won't change much
[05:27:30] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[05:28:45] <cmr> wow, I guess it ... really wasn't that recently?
[05:28:56] <cmr> I feel like I used it like two months ago, and it did the right thing.
[05:30:47] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[05:37:18] *** Joins: Jesin (Jesin@moz-a3uhsd.fios.verizon.net)
[05:37:43] *** Joins: genbattle (genbattle@moz-r09mao.xtra.co.nz)
[05:38:33] <Manishearth> look at the hematite emscripten thing
[05:38:33] <Manishearth> look at it
[05:38:38] <Manishearth> do you not cry tears of joy
[05:39:48] <Manishearth> http://myth.aaronlindsay.com/test/
[05:39:48] *** Joins: achanda (achanda@moz-qv7q4n.ca.comcast.net)
[05:43:23] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[05:43:27] <bstrie> Yurume: are you lifthrasiir?
[05:43:35] <cmr> bstrie: yes.
[05:43:37] <c74d> bstrie: yes
[05:43:52] <cmr> http://rustaceans.org/search/yurume
[05:43:54] <cmr> ;)
[05:44:26] <Yurume> yeah.
[05:45:12] <bstrie> Yurume: I would definitely submit the zipped url thing to play.rlo. not sure who's in charge of it, ChrisMorgan touched it last
[05:45:27] <kmc> Manishearth: but will it eat my laundry
[05:45:54] *** Quits: ryanhiebert (ryanhiebert@moz-nsd5kl.ks.cox.net) (Ping timeout: 121 seconds)
[05:46:11] <Manishearth> hah!
[05:46:30] <Yurume> bstrie: I am surely up to submitting that PR, please let me allow some benchmark between zlib and lzma first then :)
[05:47:09] <c74d> Manishearth: that sounds impressive… if only I could load .js files over HTTP.
[05:47:52] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[05:48:27] <whipsch> bstrie: check out the pr i made a bit earlier re: playpen urls https://github.com/rust-lang/rust-playpen/pull/102
[05:48:35] <whipsch> somewhat related
[05:49:05] <bstrie> Yurume: consider ^ as well
[05:49:45] <Yurume> whipsch: woah, that sounds great
[05:50:43] <whipsch> the good news is i think it would be pretty lightweight to enable a 'connect with github' type thing so you can log your playpen usage
[05:50:44] <Manishearth> On showing the hematite thingy to a friend
[05:50:45] <Manishearth> > this is the javascriptiest i've felt in some time
[05:50:50] *** Quits: lfairy (lfairy@moz-hve4m3.ihug.co.nz) (Connection closed)
[05:50:58] <whipsch> oh it finally loaded for me
[05:51:00] <whipsch> awesome
[05:51:45] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[05:52:16] <whipsch> that runs quite a bit smoother than i thought it would
[05:52:38] <Manishearth> yeah
[05:55:35] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[05:55:49] *** Quits: WindowsBunny (Peter@moz-prmara.east.verizon.net) (Ping timeout: 121 seconds)
[05:56:09] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[05:56:36] *** Joins: WindowsBunny (Peter@moz-prmara.east.verizon.net)
[06:09:29] <bstrie> Gankro: are you still awake?
[06:09:52] <bstrie> Gankro: if so, you should go to sleep so that you can wake up at 8AM tomorrow so that you can watch ten thousand naked people run across san francisco
[06:10:00] <bstrie> (welcome to california)
[06:10:29] <Manishearth> is california even real?
[06:10:50] <Manishearth> I remember visiting it when I was a kid but I also remember a monster in my closet from then so...
[06:11:10] <Yurume> I guess that monster is more plausible than CA
[06:11:36] <Manishearth> true
[06:11:52] <bstrie> sorry, 70,000 naked people
[06:12:11] <Manishearth> I like good 'ol Massachusetts. Not weird at all.
[06:12:17] <Yurume> bstrie: what the hell do them do
[06:12:24] <bstrie> Yurume: http://zapposbaytobreakers.com/
[06:12:29] <Manishearth> bstrie: where did you find that many naked people
[06:12:42] <cmr> Manishearth: we're all naked under our clothes.
[06:12:45] <Manishearth> haha
[06:12:56] <bstrie> it's not technically about naked people running, but in practice there's a lot of naked people running
[06:13:07] <bstrie> it's just a goofy public seven-mile footrace
[06:13:08] <c74d> Manishearth: I live in California, it's real as far as I can tell.
[06:13:29] <Manishearth> jokes aside, 70,000 is a huge number for an event, anyway :)
[06:14:48] <Yurume> bstrie: aha, so meta
[06:15:11] <Yurume> the record for the most number of records set at the same event :)
[06:15:11] *** Quits: Twisol (Twisol@moz-0033n4.res.rr.com) (Ping timeout: 121 seconds)
[06:15:47] <bstrie> Yurume: which itself counts as a record when recording the quantity of records set
[06:15:50] <c74d> I'd forgotten that San Francisco allows public nudity, though.
[06:15:57] *** Joins: Twisol (Twisol@moz-0033n4.res.rr.com)
[06:16:02] <bstrie> I think it's more that it's hard to arrest that many running naked people
[06:16:07] <Eridius> bstrie: I'm doing Bay to Breakers tomorrow :)
[06:16:10] <bstrie> Eridius: oh nice
[06:16:11] <Eridius> but I'm planning on just walking
[06:16:15] <bstrie> nudity level?
[06:16:18] <Eridius> c74d: it doesn't allow it as much as it did before
[06:16:22] <Eridius> fully clothed
[06:16:38] <Eridius> if you really want to see public nudity, go to Folsom St. Fair
[06:17:08] *** Quits: bjz (bjz@moz-puppgq.tpgi.com.au) (Quit: My Mac has gone to sleep. ZZZzzz…)
[06:19:57] *** Joins: dinfuehr (dinfuehr@moz-jskej7.highway.telekom.at)
[06:22:29] <Manishearth> who's available for a riving::generic review?
[06:22:33] <Manishearth> *deriving
[06:22:42] <Manishearth> very small change
[06:24:00] *** Quits: dinfuehr (dinfuehr@moz-jskej7.highway.telekom.at) (Ping timeout: 121 seconds)
[06:24:01] <Manishearth> https://github.com/rust-lang/rust/pull/25524
[06:24:08] <Manishearth> (we need it for rust-gc_
[06:26:16] <cmr> Manishearth: r+
[06:26:30] <cmr> It feels so good to be writing Rust again.
[06:26:31] <Manishearth> thanks! :D
[06:26:41] <cmr> I had a dreadfully boring semester, full of coursework and studying.
[06:27:43] <Luqman> cmr: wanna swap? :D
[06:27:46] *** Joins: andreabedini (andreabedin@moz-fpvfar.iinet.net.au)
[06:28:09] <cmr> Luqman: tired of the waterloo treatment already? ;P
[06:28:54] <Luqman> cmr: well, more like just a busy term ahead of me
[06:29:56] *** Quits: Murarth (Murarth@moz-mpmr8r.phnx.qwest.net) (Quit: Mani Mani is always Mani Mani at Mani Mani with all Mani Mani Mani)
[06:30:03] <bstrie> where are "features" in cargo documented? I can't find anything on crates.io
[06:30:14] <cmr> bstrie: http://doc.crates.io/manifest.html#the-[features]-section
[06:30:20] *** Joins: Murarth (Murarth@moz-fsf.78t.166.46.IP)
[06:30:31] <bstrie> thanks
[06:30:34] <Manishearth> bstrie: http://doc.crates.io/manifest.html#the-[features]-section
[06:30:37] <Manishearth> yeah
[06:31:02] <whipsch> argh, my terminal's url parser doesnt match that completely
[06:31:27] <cmr> yeah it totally breaks my regex.
[06:31:29] <Manishearth> same here
[06:31:47] <whipsch> yeah i said parser but i meant regex =P
[06:31:57] <Yurume> autolink failure
[06:35:03] <bstrie> flaper87: saw your new twitter name and for a moment thought that it was a novelty account designed to retweet things reaching 1.0
[06:37:18] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Ping timeout: 121 seconds)
[06:43:04] *** Quits: ebfull (ebfull@moz-2hf06a.co.comcast.net) (Ping timeout: 121 seconds)
[06:44:22] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Client exited)
[06:48:41] *** Joins: ebfull (ebfull@moz-2hf06a.co.comcast.net)
[06:52:50] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[06:53:37] <c74d> That's not a failure of your regexes, it's an invalid URL; the square brackets ought to be percent-encoded.
[06:53:58] <cmr> Fascinating. Thanks firefox.
[06:56:54] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[07:02:49] <nrc> Can anyone help me with a shell scripting problem?
[07:02:54] <nrc> I have this in a script:
[07:02:58] <nrc> for f in *; do
[07:02:59] <nrc>     if [[ -d $f ]]; then
[07:03:01] <nrc>         echo "Processing $f"
[07:03:03] <nrc> ...
[07:03:13] <nrc> when I run this in a test scrpt it is fine
[07:03:26] <nrc> but when I run it as part of a larger script I get
[07:03:38] <nrc> ./process.sh: 15: ./process.sh: [[: not found
[07:03:59] <nrc> (process.sh is the name of the script and the if stmt is line 15)
[07:04:10] <Manishearth> nrc: bash vs sh?
[07:04:32] <Manishearth> there are  standard sh if conditions,and then bash-speicfic ones
[07:04:39] <nrc> oh
[07:04:52] <Manishearth> I think single-bracket is what you want
[07:04:53] <Manishearth> I forget
[07:05:03] <Manishearth> this requires the magic of Google
[07:05:03] <cmr> yeah just use single-brackets.
[07:05:16] * nrc tries
[07:05:41] <Manishearth> Mozilla should just write a cross-platform and sane scripting language
[07:05:52] <Manishearth> Rust 1.0 is old hat.
[07:05:58] <cmr> javascript?
[07:06:01] <Manishearth> +1
[07:06:05] <nrc> lol, sane
[07:06:08] <cmr> I'm not sure if that's the joke or not.
[07:06:11] <cmr> nrc: compared to bash?
[07:06:16] <nrc> fair
[07:06:29] <Manishearth> cmr: it occured to me while writing it, but it wasn't :p
[07:06:34] <nrc> Ok, single brackets work calling the script from the command line
[07:06:42] <nrc> I'll try in the mega script
[07:06:46] <Manishearth> if you think bash is saner than js, two words for you
[07:06:48] <Manishearth> esac.
[07:06:50] <Manishearth> and fi
[07:07:11] <Manishearth> (okay, those aren't really valid complaints, but somehow I fine esac very, very strange)
[07:07:12] <nrc> but, why would calling a script from inside another scipt change the interpreter?
[07:07:16] *** Joins: Johannes (Johannes@moz-4et8d7.ocn.ne.jp)
[07:07:21] <Manishearth> nrc: #!/bin/sh?
[07:07:27] <Manishearth> or something
[07:07:35] <nrc> I don't have any #! anywhere
[07:07:38] <Manishearth> hm
[07:07:41] <Manishearth> it's bash
[07:07:45] <nrc> perhaps I should?
[07:07:49] <Manishearth> yeah
[07:07:56] *** Quits: chc4 (chc4@moz-mjph4c.ma.comcast.net) (Quit: AHHHHH BEES)
[07:08:03] <Manishearth> you're runing it as an executable, right?
[07:08:22] <nrc> I assume so, I just type ./foo.sh at the command line
[07:08:31] <Manishearth> you need the shebang for it to use the right interpreter
[07:08:38] <nrc> then foo.sh has a 'call' to process.sh in it
[07:08:50] <nrc> ah
[07:09:02] <nrc> do I want bash or sh?
[07:09:08] <Manishearth>  bash
[07:09:10] <Manishearth> OR
[07:09:12] <Manishearth> fix the if
[07:09:34] <nrc> hmmm
[07:09:52] <Manishearth> bash is full of magical extensions
[07:09:53] <nrc> this would be a much easier decision if the script didn't take 2 hours to run on a server under brson's desk
[07:10:01] <Manishearth> haha
[07:10:13] <Manishearth> just fix the if and run that part with sh and see if it works
[07:10:19] <Manishearth> and then put bin/bash anyway
[07:10:26] <nrc> haha
[07:10:37] <Manishearth> why hasn't brson's desk melted yet, incidentally?
[07:10:54] <nrc> I expect it will, once this thing is running full time
[07:11:18] <nrc> the plan is that it will be constantly building and timing. He's going to get really annoyed by the fan noise (ssshhh!)
[07:11:19] *** Quits: Johannes (Johannes@moz-4et8d7.ocn.ne.jp) (Ping timeout: 121 seconds)
[07:11:25] <Manishearth> hah
[07:13:02] <nrc> I have ssh twice (once NZ to CA) to get to the server and there is a tonne of lag, it is so annoying trying to type :-(
[07:13:17] <Manishearth> nrc: have you considered that brson's desk is the source of the California drought?
[07:15:05] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[07:16:25] <nrc> it all makes sense now
[07:16:52] *** Quits: ebfull (ebfull@moz-2hf06a.co.comcast.net) (Ping timeout: 121 seconds)
[07:16:56] <nrc> OK, lets see if this works
[07:17:21] <nrc> thanks for the help Manishearth!
[07:17:26] <Manishearth> np
[07:17:38] <Manishearth> good luck affecting the microclimate
[07:18:34] <nrc> :-)
[07:18:57] *** Quits: bombless (_@moz-q0lpqv.0v2u.0v40.0da8.2001.IP) (Quit: Leaving)
[07:19:09] *** Quits: mdcox (mdcox@moz-40u.n44.243.162.IP) (Quit: leaving)
[07:19:58] <Manishearth> okay, enough procrastination, back to writing
[07:21:39] *** Quits: jbomo (dkd@moz-uol4mm.fios.verizon.net) (Ping timeout: 121 seconds)
[07:25:29] *** Joins: eibwen (eibwen@moz-0op185.dip0.t-ipconnect.de)
[07:28:21] *** Joins: ebfull (ebfull@moz-2hf06a.co.comcast.net)
[07:30:05] <bstrie> wycats: I'm sorry that I missed getting to meet you yesterday!
[07:31:13] *** Joins: munksgaard (munksgaard@moz-478pev.u.parknet.dk)
[07:37:03] *** Quits: Murarth (Murarth@moz-fsf.78t.166.46.IP) (Quit: I have come here to chew bubblegum and kick ass. And I'm all out of bubblegum.)
[07:37:23] *** Joins: Murarth (Murarth@moz-mpmr8r.phnx.qwest.net)
[07:38:56] *** Joins: nodweber_ (nodweber@moz-knt.fgq.178.5.IP)
[07:44:18] *** Quits: andreabedini (andreabedin@moz-fpvfar.iinet.net.au) (Quit: My Mac has gone to sleep. ZZZzzz…)
[07:53:16] *** Quits: Twisol (Twisol@moz-0033n4.res.rr.com) (Quit: )
[07:58:25] *** Quits: nodweber_ (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[08:01:13] *** Joins: andreabedini (andreabedin@moz-fpvfar.iinet.net.au)
[08:04:49] *** Joins: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de)
[08:05:34] <Manishearth> another day, another rollup :)
[08:05:52] <Manishearth> I love that the rollups are going through without cross-PR conflicts now :)
[08:07:03] *** Joins: hatman (Mibbit@moz-juv.9o3.252.72.IP)
[08:07:36] *** Quits: semarie (semarie@moz-b0t90g.tor-proxy.net.ua) (Quit: WeeChat 1.1)
[08:07:58] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Connection closed)
[08:08:05] *** Joins: munksgaa1d (munksgaard@moz-urnkl5.u.parknet.dk)
[08:10:26] *** Joins: summerlight (summerlight@moz-99k.2mj.130.121.IP)
[08:11:01] *** Quits: munksgaard (munksgaard@moz-478pev.u.parknet.dk) (Ping timeout: 121 seconds)
[08:11:20] *** Quits: tamird (textual@moz-gg3hct.res.rr.com) (Quit: My Mac has gone to sleep. ZZZzzz…)
[08:13:20] *** Quits: summerlight__ (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[08:20:16] *** Quits: hatman (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[08:20:41] *** Joins: filsmick (filsmick@moz-m2e3vv.abo.wanadoo.fr)
[08:31:39] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Ping timeout: 121 seconds)
[08:32:42] *** Joins: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se)
[08:35:36] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[08:35:52] *** Joins: eddyb (eddyb@moz-egg.q07.26.188.IP)
[08:37:23] *** Quits: nham (nham@moz-755.bu3.214.98.IP) (Quit: leaving)
[08:39:52] *** kimundi is now known as zz_kimundi
[08:44:15] *** Joins: killercup (killercup@moz-qj5qhi.dip0.t-ipconnect.de)
[08:52:44] *** Joins: dinfuehr (dominik@moz-bp2pnf.highway.telekom.at)
[08:52:55] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[08:55:56] *** Joins: nicknikolov (nicknikolov@moz-k08.qm9.214.90.IP)
[08:55:58] *** Quits: nicknikolov (nicknikolov@moz-k08.qm9.214.90.IP) (Connection closed)
[08:55:59] *** Joins: nicknikolov (nicknikolov@moz-k08.qm9.214.90.IP)
[09:00:46] *** Quits: munksgaa1d (munksgaard@moz-urnkl5.u.parknet.dk) (Quit: Lost terminal)
[09:06:51] *** Quits: kmcguire__ (kmcguire@moz-pg1gb9.biz.rr.com) (Connection closed)
[09:07:30] *** Joins: kmcguire__ (kmcguire@moz-pg1gb9.biz.rr.com)
[09:11:18] <Manishearth> urgh, the reddit thread on the diversity thing got shared on one of *those* subreddits
[09:12:11] <Manishearth> (a bot quite helpfully told me)
[09:12:39] <bstrie> Manishearth: what diversity thing?
[09:13:23] <doener> bstrie: http://www.reddit.com/r/rust/comments/3653tg/diversity_on_the_governance_teams/
[09:15:45] <bluss> graydon with a comment on -2
[09:15:55] <bluss> :(
[09:15:57] *** Quits: achanda (achanda@moz-qv7q4n.ca.comcast.net) (Connection closed)
[09:16:26] <Manishearth> yeah :(
[09:16:59] <Manishearth> I did not expect that from /r/rust. Sure, I don't expect blindly following the great Creator either, but he was saying sensible stuff too :P
[09:17:35] <bluss> that thread never got off the ground, just was downvoted enough to fall off
[09:18:09] <Manishearth> yeah
[09:18:14] <bluss> so it hasn't been exposed to that many
[09:19:27] *** Joins: ptalbot (ptalbot@moz-j4gnuh.fbx.proxad.net)
[09:25:11] <bstrie> Manishearth: my apologies, I've been so busy with everything that I completely neglected reading any of the reddit threads the past few days
[09:26:41] *** Joins: Twisol (Twisol@moz-0033n4.res.rr.com)
[09:26:56] *** Quits: Twisol (Twisol@moz-0033n4.res.rr.com) (Quit: )
[09:28:49] *** Quits: Kingsquee (kingsley@moz-3fm07c.bchsia.telus.net) (Quit: Konversation terminated!)
[09:29:52] <Manishearth> bstrie: eh, it's fine :)
[09:31:09] <bstrie> it super sucks because I've been *trying for so long* to figure out how to get more women involved, and nobody that I've asked seems to know what to do
[09:32:53] <bstrie> I don't know where to focus outreach efforts
[09:33:34] <Manishearth> yeah. My local efforts (not Rust, generally getting women involved in programming in my very-very-low-ratio-university) have met similar roadblocks
[09:34:41] <bluss> People expect a lot and compare to the tech industry but we have known from several surveys that open source projecs are way more undiverse than even the tech industry
[09:36:00] <Skyler> I'm afraid it's generally quite difficult for men to recruit women
[09:36:51] <Skyler> I wonder if there are women in the community already that would be interested in assuming team roles?
[09:37:07] <WindowsBunny> Just make sure that you're bringing in people for diversity who actually deserve to be in that position.
[09:37:12] <Skyler> (I'm a new spectator to this discussion, I'm sure my ideas are common)
[09:37:24] <bstrie> WindowsBunny: we're well aware of tokenism
[09:38:12] <bstrie> the problem is that the absence of prominent women makes attracting more women even more unlikely
[09:38:50] <Manishearth> bluss: open source projects often work on the basis of meritocracy ; and merit is subjective
[09:38:53] <bstrie> and we do have women in the community, but none in a prominent role
[09:39:00] *** Joins: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP)
[09:39:16] <Manishearth> whereas in actual tech tech people hiring do make an effort to not discriminate, even if they fall short
[09:39:31] <Manishearth> WindowsBunny: yeah, if you see Matt's original post we have said we want to avoid tokenism
[09:39:35] <nrc> bluss: I believe the Rust community is exceptional (among open source projects) in its conduct, I see no reason it shouldn't be expcetional in terms of diversity
[09:39:41] <Manishearth> (we want diversity in the mod team for a different reason)
[09:39:53] <Manishearth> (i.e. not tokenism)
[09:39:56] <nrc> (well, it probably is exceptional, but not in a good way)
[09:40:02] <Manishearth> heh
[09:40:07] *** Quits: kmcguire__ (kmcguire@moz-pg1gb9.biz.rr.com) (Connection closed)
[09:40:29] *** Joins: kmcguire__ (kmcguire@moz-pg1gb9.biz.rr.com)
[09:40:54] <bstrie> nrc: which is somewhat sad for me... for a long time my attitude was "make it a nice place and naturally women will feel comfortable", but that hasn't happened to any degree that I expected
[09:41:18] <nrc> it strikes me as a little ironic that our boss at Mozilla is a woman, but because we're so keen to distance Rust from Moz, she has no public in the project
[09:41:34] <nrc> * public part
[09:41:35] <Manishearth> I'm just annoyed that I didn't notice this sooner, I've noticed the problem with Mozilla; but I didn't notice it with the community
[09:41:52] <Manishearth> (perhaps because the community is a stretches-to-the-horizon thing that yo ucan't quite get an idea of)
[09:42:02] <bluss> nrc: I just think it's interesting that it's been made very clear that rust follows the same trend, where the perception was maybe it doesn't
[09:42:23] <Manishearth> nrc: Azita? or Mitchell?
[09:42:36] <WindowsBunny> Manishearth: I'm utterly unaware of diversity or the lack thereof in the community, because I only know what people are based on their avatars
[09:42:44] <bluss> nrc: good point, the corporate side should maybe take more responsibility here
[09:42:52] <WindowsBunny> and right now, based on avatars, the majority of the community is non-human
[09:43:05] <bstrie> WindowsBunny: trying to attract more humans is also on the docket
[09:43:07] <Manishearth> heh
[09:43:15] <nrc> bstrie: yeah, I think it takes effort in particular in that direction - kind of obvious in hindsight, but that's the way it goes
[09:43:19] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[09:43:22] <nrc> Manishearth: I was thinking of Azita
[09:43:22] <Manishearth> bluss: I'm not fond of the idea of making Mozilla responsible for Rust
[09:43:39] <Manishearth> Rust has been trying to distance itself from Mozilla. Not cut ties, of course, but make it clear that it's a separate project
[09:43:47] <bluss> Manishearth: well whoever is hiring rust developers for mozilla
[09:43:59] <nrc> bluss: I think anything Mozilla can do would cost money and Rust is likely to get less money from MOz in the future
[09:44:00] <Manishearth> If Rust goes back to mommy every time there's a problem, we clearly aren't independent
[09:44:06] <Manishearth> to put it in a overly harsh way
[09:44:10] <bstrie> notably, the mozilla side also wants this distance (i.e. dherman and the other moz research higher-ups)
[09:44:24] <Manishearth> yeah, I know, I was part of that discussion @ Portland
[09:44:32] <bluss> Manishearth: ok, but I thought mozilla paid a lot of the core team
[09:44:39] <Manishearth> bluss: yes
[09:44:46] <nrc> bluss: it does, but probably fewer in the future
[09:45:15] <bluss> then they have already missed the chance to create a more diverse team
[09:45:18] <Manishearth> bluss: Yehuda/Steve/Huon are not employees, but Yehuda is a former contractor (not sure of current status), Steve is a contractor, and huon will be an intern soon. I think
[09:45:19] <nrc> i.e., more volunteers on the core team and, probably, core team people will move on
[09:45:46] <bstrie> who is "skade" from discourse?
[09:45:52] <Manishearth> bluss: diversity does not stop at the core team
[09:45:56] <nrc> Rust Berlin guy
[09:46:02] <nrc> beyond that no idea
[09:46:06] <nrc> also skade on GH
[09:46:17] <bstrie> can you pm people on discourse?
[09:46:23] <bluss> Manishearth: I haven't said that
[09:46:49] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[09:46:55] <Manishearth> bstrie: @Argorak
[09:47:04] *** Quits: andreabedini (andreabedin@moz-fpvfar.iinet.net.au) (Quit: My Mac has gone to sleep. ZZZzzz…)
[09:47:05] <Manishearth> aka Florian Gilcher
[09:47:22] <Manishearth> bluss: ah, sorry
[09:47:38] <Manishearth> bstrie: yes
[09:54:01] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Ping timeout: 121 seconds)
[09:54:16] *** Quits: Siosm (quassel@moz-hkaoqt.fr) (Ping timeout: 121 seconds)
[09:54:23] *** Joins: casey (casey@moz-5gh.37l.160.167.IP)
[09:54:48] *** Quits: ptalbot (ptalbot@moz-j4gnuh.fbx.proxad.net) (Connection closed)
[09:55:30] *** Joins: ptalbot (ptalbot@moz-j4gnuh.fbx.proxad.net)
[09:56:40] *** Quits: nicknikolov (nicknikolov@moz-k08.qm9.214.90.IP) (Connection closed)
[10:00:49] <nrc> idea: so, currently the best way to get support from the community is via irc (eventually SO will be a great resource, but for now, not so much). I think #rust is great, but it can be intimidating to those not familiar with irc, which is a huge number of people, male and female, but I suspect expecting women more heavily due to the higher likelihood of no previous open source experience. I...
[10:00:50] <nrc> ...would like a way to offer guidance/mentorship to people interested in Rust but who don't like irc. However, making this offer personally on twitter or users. ertc. seems ineffective (since the target audience probably won't be present there) and frankly a little bit creepy
[10:01:06] <nrc> Do others think this is a good idea? And if so how can it be effectively be implemented?
[10:01:18] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[10:01:25] <nrc> s/expecting/impacting
[10:01:57] *** Joins: ryanhiebert (ryanhiebert@moz-nsd5kl.ks.cox.net)
[10:02:04] *** Quits: ryanhiebert (ryanhiebert@moz-nsd5kl.ks.cox.net) (Connection closed)
[10:02:11] *** Joins: dinfuehr_ (dinfuehr@moz-bp2pnf.highway.telekom.at)
[10:02:28] <Manishearth> nrc: IRC is NOT a newbie platform. It sucks as a newbie platform.
[10:02:47] <nrc> exactly, right, but it is our main newbie platform
[10:02:55] <Manishearth> ... which is a problem too
[10:03:39] <Manishearth> I think this is a good idea
[10:03:41] <bluss> I'm happy our irc channel is so friendly
[10:03:43] <Manishearth> I'd like to join
[10:04:01] <Manishearth> The culture of mentorship is one of the reasons I stick with Mozilla open source projects
[10:04:01] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[10:04:09] *** Joins: genbattle_ (genbattle@moz-r09mao.xtra.co.nz)
[10:04:15] *** Joins: andreabedini (andreabedin@moz-fpvfar.iinet.net.au)
[10:04:16] <Manishearth> and that culture exists in Rust/Servo too, so ...
[10:04:34] *** Quits: genbattle_ (genbattle@moz-r09mao.xtra.co.nz) (Quit: Leaving)
[10:04:56] <Manishearth> Most of my mentoring is done in private over facebook since in India people find that as the best communication channel (moving people to IRC is something I do once they've crossed other barriers)
[10:05:05] <Manishearth> but I have and can mentor online too
[10:05:09] <Manishearth> on IRC or email
[10:05:12] <Manishearth> frankly I prefer it
[10:06:14] *** Quits: genbattle (genbattle@moz-r09mao.xtra.co.nz) (Ping timeout: 121 seconds)
[10:06:20] *** Quits: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[10:06:48] <nrc> an official mentorship thing would probably be a good idea. I know it has worked well for other Moz teams
[10:07:25] <Manishearth> yes
[10:07:38] *** Joins: genbattle (genbattle@moz-r09mao.xtra.co.nz)
[10:07:48] <nrc> bluss: me too
[10:07:54] <Manishearth> nrc: what's the scope of this, do you think?
[10:07:56] <Manishearth> *should be
[10:08:13] <nrc> I have no idea - I've only been mulling the idea today
[10:08:22] <Manishearth> contributing to rustc? general open source projects? even jsut learning rust?
[10:08:25] <nrc> wanted to see if it was a good idea or dumb
[10:08:31] <Manishearth> No its a good idea
[10:08:43] <nrc> At least the middle one
[10:08:49] <Manishearth> yeah thats my thoughts too
[10:08:50] <nrc> rustc is too limited
[10:08:55] <Manishearth> for the last onagreede 
[10:09:03] <Manishearth> the last one could easily become too much to support
[10:09:19] <Manishearth> *agreed, rustc is too limited
[10:09:57] <nrc> yeah, I worry about the scalability
[10:10:05] <Manishearth> the middle one is pretty easy
[10:10:20] <Manishearth> Proposed modus operandi:
[10:10:24] <Manishearth> person picks mentor
[10:10:47] <Manishearth> person emails or whatevers mentor saying they are interested in getting involved and their interests are yada yada
[10:10:57] <Manishearth> mentor helps them choose something to work with
[10:11:05] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[10:11:18] <Manishearth> might bounce them off to a different mentor if that something is in that other person's domain
[10:11:39] <Manishearth> then the other mentor will keep an eye on it and provide additional guidance as needed
[10:11:42] <Manishearth> nrc: this sound good?
[10:11:59] *** Joins: druznek (druznek@moz-h1eme5.ip200.fastwebnet.it)
[10:12:04] <Manishearth> I'm very unsure of it. Perhaps we should let them choose projects themselves and only then ask for mentors
[10:12:07] <Manishearth> or something else
[10:12:17] <nrc> I think either way would work
[10:12:40] *** Joins: imperio (Mibbit@moz-8otf3a.fbx.proxad.net)
[10:12:43] <Manishearth> we could offer both too
[10:12:54] <nrc> right, that's what I was thinking
[10:13:16] <Manishearth> this would need some official publicity and all though. As in, an official page like teams.html and prominent links and stuff
[10:13:17] <nrc> (thinking of undergrad projects, both paths work wekk for pairing students with academics)
[10:13:23] <Manishearth> yeah
[10:13:25] <nrc> yeah for
[10:13:26] <nrc> sure
[10:13:32] <Manishearth> Servo does UG projects already
[10:13:41] <Manishearth> I think we landed two NCSU projects and one other project this year
[10:13:54] <Manishearth> cookie support was also a student project
[10:14:14] <nrc> I'd like to do something less formal/long term than that
[10:14:16] <Skyler> is the hypothesis here that women would be more likely to subscribe to a personal mentorship program than visit IRC?
[10:14:29] <Manishearth> But note that UG projects can be a drain on resources due to administrativia
[10:14:33] <Manishearth> Skyler: not exactly
[10:14:35] <Skyler> or has this discussion evolved into a broader topic
[10:14:43] <Manishearth> yeah, it's evolved to a broader topic
[10:14:44] <Manishearth> but
[10:14:48] <Manishearth> I will say this
[10:15:02] <nrc> s/women/many people who would not ordinarily be involved with the project, but hopefully having an impact on our community diversity in the long run
[10:15:16] <Manishearth> There is a case to be made for the point that less women are in open soruce because the industry expects more from them
[10:15:19] <Skyler> ah ok, so general outreach goodness then :)
[10:15:44] <Manishearth> Couple this with the fact that IRC is a horrible venue for newbies, and the overlap means that this will likely benefit women more
[10:16:04] <bluss> I'd like to help especially with teaching basic rust
[10:16:19] <Manishearth> sure
[10:16:54] <Manishearth> I wonder if teaching basic Rust can be more strongly redirected to the users forum
[10:17:34] <Manishearth> because like we said it's not scalable to teach it in the mentorship framework
[10:17:40] <Manishearth> one-on-one doesn't scale, but Q&A does
[10:17:40] <rkruppe> Is a forum the right venue for one-one-one dedicated teaching though?
[10:17:45] <Manishearth> no
[10:17:53] <Manishearth> a hybrid could work though
[10:18:02] <rkruppe> Well, yes, even if it's less ideal it's at least scaleable
[10:18:25] <Manishearth> If someone wants to understand a topic in depth (that's not covered by existing resources), perhaps they could ping people who have volunteered for this
[10:19:06] <Manishearth> I'm skeptical people will have the tiem for this though. One on one teaching is draining, and people have jobs/school/whatever
[10:19:10] <Manishearth> *time
[10:19:24] <Manishearth> Even I'm very enthusiastic to do one on one teaching, but I know that I won't be able to sustain it
[10:20:11] <Skyler> are there any interactive "learn rust" resources yet?
[10:20:19] <Manishearth> rustbyexample?
[10:20:57] <Skyler> ah right, forgot about the code editor
[10:21:13] <nrc> I hope that people would teach themselves from the book and other resources and mentors would answer the kind of questions that get asked in #rust, rather than mentors doing the bulk of teaching
[10:21:32] <nrc> that def. wouldn't scale
[10:21:46] <Skyler> that was my line of thought as well
[10:22:13] <Skyler> readily available mentors that could supplement the book/rustbyexample/etc
[10:22:24] <Manishearth> yes
[10:22:54] <Manishearth> But for example if someone wants to get familiar with the nitty gritties of writing compiler plugins, I'd be more than happy to mentor one on one
[10:23:05] *** Joins: James (quassel@moz-ph8o2f.range86-163.btcentralplus.com)
[10:23:20] <Manishearth> If osmeone is going to throw borrowck errors at me all day; I won't. But at the same time I would answer that q on Stack Overflow or discuss
[10:23:40] <rkruppe> Yes, mentor for the things that so few people do that there isn't much ready-made material
[10:23:55] <Manishearth> yeah
[10:24:22] <Manishearth> The problem with one on one mentorship for stuff liek this is that nobody else benefits
[10:24:30] <Manishearth> for niche things its fine
[10:24:46] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[10:24:53] <Manishearth> those things are likely to ocomplicated to explain in a blog post (easily) and the explanation needs to be tailored to the specific person
[10:26:15] <nrc> I think that is OK if it is just one way amongst many. If we only do mentorship and neglect tutorials etc., then it would be bad
[10:26:34] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[10:29:42] <Manishearth> nrc: as in?
[10:29:53] <Manishearth> and yes, we should not neglect tutorials and all
[10:30:10] <Manishearth> I'm planning on churning a stream of blog posts if I can get the time
[10:30:15] <Manishearth> too many distractions
[10:30:18] *** Joins: sigma (sigma@moz-llrbra.range86-135.btcentralplus.com)
[10:32:32] *** Joins: sigma1 (sigma@moz-llrbra.range86-135.btcentralplus.com)
[10:32:35] *** Quits: sigma (sigma@moz-llrbra.range86-135.btcentralplus.com) (Connection closed)
[10:33:04] <nrc> as in I don't feel bad about mentorship that nobody else benefits. Like its an argument for mentoring to be the primary way to educate people, but if it is one way among many, then I don't see too much harm
[10:33:43] <Manishearth> ah okay
[10:34:08] <Manishearth> that was just one extra argument against one-on-one mentorship for regular stuff
[10:34:22] <Manishearth> at least, *advertised* 1-on-1 mentorship for stuff like that
[10:34:30] <Manishearth> the main argument is that it's not going to scale
[10:35:16] <Manishearth> But if someone has an aversion to posting on a forum we should definitely help them internally
[10:35:34] <Manishearth> just separate the lazy people from that group. Because there are a *lot* of people who are too lazy to do this
[10:35:55] <Manishearth> and now that Rust is 1.0, we won't be just having people who are avery interested come in
[10:36:07] <Manishearth> we will have others who have been asked to learn it because of their job or school too
[10:36:24] <Manishearth> look at the questions on [rust] on Stack Overflow, and then look at those for [javascript]
[10:36:39] <Manishearth> we will become that, like it or not
[10:37:17] <Manishearth> There will be people too lazy to put some basic effort into figuring stuff out 
[10:37:24] <Manishearth> And they will overrun us
[10:37:31] *** Quits: sigma1 (sigma@moz-llrbra.range86-135.btcentralplus.com) (Connection closed)
[10:37:46] *** Joins: nicknikolov (nicknikolov@moz-k08.qm9.214.90.IP)
[10:37:52] <Manishearth> Which is why I'm averse to having an open invite for any and all Rusty questions; it's not going to last
[10:38:33] *** Joins: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de)
[10:38:36] <Manishearth> However, if someone has a question that isn't going to easily get answered online, or they don't want to ask online because of non-laziness reasons, we should definitely help
[10:38:40] *** Quits: andreabedini (andreabedin@moz-fpvfar.iinet.net.au) (Quit: My Mac has gone to sleep. ZZZzzz…)
[10:39:15] <rkruppe> Yeah, it's exhausting to spoon-feed everyone, especially if you've seen the same question a million times
[10:39:20] <Manishearth> exactly
[10:39:39] <Manishearth> However, for people tryign to get involved in Rust projects, that's a different matter
[10:44:08] *** Joins: Siosm (quassel@moz-7ucvlk.c3r2.lncg.41d0.2001.IP)
[10:46:10] *** Quits: Siosm (quassel@moz-7ucvlk.c3r2.lncg.41d0.2001.IP) (A TLS packet with unexpected length was received.)
[10:46:19] *** Joins: Siosm (quassel@moz-7ucvlk.c3r2.lncg.41d0.2001.IP)
[10:46:29] *** Quits: FallingAlways (FallingTime@moz-ruksei.cable.rogers.com) (Quit: Leaving)
[10:47:52] *** Quits: marsel (user@moz-jir.4tc.180.94.IP) (Ping timeout: 121 seconds)
[10:48:11] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[10:48:18] <rkruppe> We definitely need more people writing more (and even better) introductory material
[10:48:46] <rkruppe> Most of the time I see a blog post, my gut reaction is "why?? Steve already explained all that perfectly fine" but that's not how it works
[10:49:15] *** Joins: p1start (p1start@moz-nftjhe.org)
[10:51:14] <Manishearth> nrc: When you get time, could you come up with a more concrete proposal (cc me, core team, jdm, dherman, and anyone else who wants in) and circulate it?
[10:51:26] <Manishearth> rkruppe++
[10:51:43] <Manishearth> i'd do it but with my current todo list I doubt I'd ever get to it
[10:52:04] <rkruppe> And I don't even have a blog. May have to change that
[10:52:17] <Manishearth> hehe
[10:52:24] <Manishearth> use jekyll or octopress or something
[11:01:07] <nrc> Manishearth: shall do
[11:01:10] <Manishearth> thanks
[11:01:34] <Manishearth> mostly hammer something out internally, and then post it somewhere for feedback
[11:02:49] *** Joins: madmalik (uid13697@moz-lfin5p.brockwell.irccloud.com)
[11:09:01] *** Joins: Johannes (Johannes@moz-4et8d7.ocn.ne.jp)
[11:09:42] *** Quits: genbattle (genbattle@moz-r09mao.xtra.co.nz) (Ping timeout: 121 seconds)
[11:11:26] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[11:13:04] *** Quits: Johannes (Johannes@moz-4et8d7.ocn.ne.jp) (Ping timeout: 121 seconds)
[11:16:46] *** Joins: andreabedini (andreabedin@moz-fpvfar.iinet.net.au)
[11:26:04] *** Quits: Siosm (quassel@moz-7ucvlk.c3r2.lncg.41d0.2001.IP) (A TLS packet with unexpected length was received.)
[11:26:12] *** Joins: Siosm (quassel@moz-hkaoqt.fr)
[11:28:03] *** Quits: nrc (nrc@moz-9luh02.xtra.co.nz) (Ping timeout: 121 seconds)
[11:28:08] *** Joins: skeuomor1 (skeuomorf@moz-34i.sa8.32.197.IP)
[11:30:50] *** Quits: skeuomorf (skeuomorf@moz-vf8.q8a.32.197.IP) (Ping timeout: 121 seconds)
[11:30:59] <_Vi> "40 days to 1.1.0" -> Will all further releases be based on schedule, not "it's ready when it's ready"?
[11:31:30] <bluss> yes
[11:31:49] <bluss> see http://blog.rust-lang.org/2014/12/12/1.0-Timeline.html
[11:36:09] <_Vi> What will come after 1.9? 1.10 or 2.0? Will the major version number increased only for breaking changes or it will be "Firefox style"?
[11:36:40] <rkruppe> It's semantic versioning, 1.10+ is perfectly fine under that scheme
[11:36:52] <rkruppe> 2.0 will only come when backwards compatibility is broken
[11:37:19] <rkruppe> Where "backwards compatibility" is defined in https://github.com/rust-lang/rfcs/pull/1105
[11:45:45] *** Joins: larhat1 (Adium@moz-vlo5br.cable.virginm.net)
[11:49:54] *** Quits: andreabedini (andreabedin@moz-fpvfar.iinet.net.au) (Quit: My Mac has gone to sleep. ZZZzzz…)
[11:54:36] *** Quits: James (quassel@moz-ph8o2f.range86-163.btcentralplus.com) (Ping timeout: 121 seconds)
[12:03:23] *** Joins: bjz (bjz@moz-puppgq.tpgi.com.au)
[12:03:39] *** Joins: proc (proc@moz-2lgajd.dip0.t-ipconnect.de)
[12:05:23] *** Quits: casey (casey@moz-5gh.37l.160.167.IP) (Connection closed)
[12:05:59] *** Joins: casey (casey@moz-5gh.37l.160.167.IP)
[12:06:55] *** Quits: casey (casey@moz-5gh.37l.160.167.IP) (Connection closed)
[12:06:56] *** Joins: casey (casey@moz-5gh.37l.160.167.IP)
[12:07:19] *** Quits: casey (casey@moz-5gh.37l.160.167.IP) (Connection closed)
[12:07:41] *** Joins: casey (casey@moz-5gh.37l.160.167.IP)
[12:07:57] *** Joins: willem (willem@moz-facs2s.dynamic.upc.nl)
[12:09:06] *** Quits: druznek (druznek@moz-h1eme5.ip200.fastwebnet.it) (Ping timeout: 121 seconds)
[12:11:35] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[12:11:43] *** Quits: casey (casey@moz-5gh.37l.160.167.IP) (Ping timeout: 121 seconds)
[12:12:09] *** Joins: tamird (textual@moz-gg3hct.res.rr.com)
[12:15:08] *** Joins: Rym (y@moz-h2o.mso.205.31.IP)
[12:15:20] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[12:18:56] *** Joins: ryanhiebert (ryanhiebert@moz-nsd5kl.ks.cox.net)
[12:20:37] *** Joins: ytain (ytain@moz-07c3h9.dsl.teksavvy.com)
[12:21:16] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[12:27:09] *** Quits: larhat1 (Adium@moz-vlo5br.cable.virginm.net) (Ping timeout: 121 seconds)
[12:31:29] *** Quits: mceier (mceier@moz-fm89sb.dynamic.chello.pl) (Ping timeout: 121 seconds)
[12:34:39] *** Joins: mceier (mceier@moz-fm89sb.dynamic.chello.pl)
[12:35:52] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[12:36:43] *** Joins: ekidd (ekidd@moz-6t81cn.nh.comcast.net)
[12:39:55] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Ping timeout: 121 seconds)
[12:40:17] *** Joins: casey (casey@moz-hlk.37l.160.167.IP)
[12:44:20] *** Quits: casey (casey@moz-hlk.37l.160.167.IP) (Ping timeout: 121 seconds)
[12:46:53] *** Quits: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net) (Ping timeout: 121 seconds)
[12:55:05] *** Joins: Sho (sho@moz-osuubg.cust.telecolumbus.net)
[12:57:51] *** zz_kimundi is now known as kimundi
[13:01:34] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[13:03:30] *** Quits: filsmick (filsmick@moz-m2e3vv.abo.wanadoo.fr) (Quit: )
[13:03:45] <Manishearth> Got a blog post here, who wants to review?
[13:03:46] <Manishearth> https://github.com/Manishearth/manishearth.github.io/blob/source/source/_posts/2015-05-08-the-problem-with-shared-mutability.markdown
[13:04:03] <Manishearth> cc rkruppe bstrie
[13:08:55] *** Quits: mcpherrin (mcpherrin@moz-fl0kt2.ca.comcast.net) (Ping timeout: 121 seconds)
[13:14:52] *** Quits: Sho (sho@moz-osuubg.cust.telecolumbus.net) (Quit: Konversation terminated!)
[13:16:29] <bluss> Manishearth: [^1] says Str and Null, means Str and Int
[13:16:55] <Manishearth> thx
[13:17:51] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[13:17:59] <rkruppe> Manishearth: On the parenthetical on RefCell, I don't think "internal mutability" is an official term or really better than the official term(s)
[13:18:44] <rkruppe> I don't think the concept will make sense without knowing about inherited mutability (which people from other languages don't), so maybe leave it out or just say "it does more than that, but in this context ..."
[13:18:45] <Manishearth> rkruppe: I thought internal mutability was a haskel lterm?
[13:18:57] <bluss> UnsafeCell says "The core primitive for interior mutability in Rust."
[13:19:06] <rkruppe> Maybe it's a Haskell term, but it's not a Rust term and not a language-agnostic term
[13:19:22] <Manishearth> rkruppe: what bluss said
[13:19:29] <Manishearth> I've heard it called that all the time here
[13:19:40] <rkruppe> Okay, I've never heard it
[13:19:44] <rkruppe> Only interior
[13:19:52] <bluss> ok that's a mini change
[13:20:02] <Manishearth> rkruppe: oh yeah meant interior
[13:20:03] <bluss> from internal to interior
[13:20:16] <rkruppe> Anyway my main point is that the term, whatever it is, probably doesn't mean anything for a large chunk of the readership
[13:20:31] *** Joins: Sho (sho@moz-osuubg.cust.telecolumbus.net)
[13:20:44] <Manishearth> rkruppe: which is why the parenthetical continues :P
[13:21:23] <rkruppe> I don't think "here's this term which you won't understand, but don't worry it doesn't matter here" is good pedagogy
[13:21:43] <Manishearth> okay
[13:21:49] <Manishearth> got a better phrasing?
[13:22:34] <Manishearth> I should make it unparenthetical
[13:22:42] <Manishearth> explain what interior mutability is
[13:22:57] <Manishearth> and its behavior
[13:22:58] <rkruppe> I'd just say that it also does some more things but those don't matter here
[13:22:59] <Manishearth> how about htat?
[13:23:28] <rkruppe> You could try to explain it but as you say it's mostly irrelevant for the topic at hand, and properly explaining the whole thing takes quite some space
[13:25:23] <Manishearth> > It's a type providing interior mutability and behaves like a runtime version of the borrow checker.
[13:25:26] <Manishearth> Similar wrappers can be written in other languages.
[13:26:38] <Manishearth> rkruppe: sounds good?
[13:27:54] <rkruppe> Again, "interior mutability" probably doesn't mean anything to non-Rustaceans
[13:27:59] <Manishearth> sure
[13:28:05] <Manishearth> but this post is sort of aimed at everyone
[13:28:28] <rkruppe> I mean it may not be a problem, maybe it piques their interest, but personally I wouldn't include it
[13:28:47] <Manishearth> okay
[13:28:58] <Manishearth> I like to keep little hooks for people to read more about in
[13:29:54] <rkruppe> Oh and a typo shortly before "Wrapping Up": boudns checking -> bounds checking
[13:31:37] <Manishearth> I'm also thinking of adding this sentence at the end of the abstractions section
[13:31:40] <Manishearth> > In Rust, since this is statically checked, one doesn't worry much about these problems, and
[13:31:43] <Manishearth> robust APIs can be designed since knowing when something won't be mutated can help simplify
[13:31:46] <Manishearth> invariants.
[13:31:48] <Manishearth> but I'm not sure
[13:31:51] <Manishearth> whatsay?
[13:31:57] <bstrie> nmatsakis: I'm concerned that the fact that our structs are currently C-compatible in practice without #[repr(C)] is a disaster waiting to happen for when we want to exercise our right to reorder fields
[13:32:25] <Manishearth> bstrie: so we force-reorder? :P
[13:32:39] <Manishearth> bstrie: I believe there already is a lint when non-repr-C structs are used in ffi
[13:32:57] <rkruppe> Manishearth: Something like that, yeah. I like the "Rust isn't your nanny, but it empowers you to do more" angle in general
[13:33:07] <Manishearth> cool
[13:33:10] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[13:34:55] *** Joins: etw (john@moz-3h5sr6.fios.verizon.net)
[13:36:24] *** Quits: nicknikolov (nicknikolov@moz-k08.qm9.214.90.IP) (Connection closed)
[13:38:29] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[13:38:36] *** Joins: nicknikolov (nicknikolov@moz-k08.qm9.214.90.IP)
[13:43:40] *** Joins: larsberg (Adium@moz-kmvlue.cable.rcn.com)
[13:50:19] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[13:51:55] <Manishearth> rkruppe: http://manishearth.github.io/blog/2015/05/08/the-problem-with-shared-mutability/
[13:51:58] <Manishearth> thanks for your feedback
[13:53:41] <rkruppe> :+1:
[13:54:12] <Manishearth> <3
[13:56:06] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[13:57:29] *** Joins: filsmick (filsmick@moz-1g2vov.abo.wanadoo.fr)
[13:58:25] *** Joins: rkruppe_ (chatzilla@moz-3nj.rnu.131.95.IP)
[13:58:37] *** Quits: larsberg (Adium@moz-kmvlue.cable.rcn.com) (Quit: Leaving.)
[13:59:13] *** Joins: larsberg (sid89@moz-1a60qu.0j4i.jtu0.0101.2620.IP)
[13:59:38] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[13:59:51] *** rkruppe_ is now known as rkruppe
[14:01:36] *** Quits: filsmick (filsmick@moz-1g2vov.abo.wanadoo.fr) (Quit: )
[14:05:27] <Mutabah> Manishearth: Fixed the typo on 'bounds'? (boudns)
[14:05:31] <Manishearth> yes
[14:05:36] *** Quits: kmcguire__ (kmcguire@moz-pg1gb9.biz.rr.com) (Ping timeout: 121 seconds)
[14:05:39] <Manishearth> Mutabah: the post is up
[14:05:42] <Manishearth> https://news.ycombinator.com/item?id=9560021
[14:05:47] <Mutabah> *nod*
[14:05:51] <Manishearth> .deref(), sorry
[14:05:58] <Manishearth> yeah I linked it above
[14:07:14] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Connection closed)
[14:07:58] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[14:08:49] *** Joins: zmack (zmack@moz-u7v.9uv.25.188.IP)
[14:08:56] <Yurume> https://github.com/rust-lang/rust/issues/25535 I'm receiving a good feedback on the TRPL!
[14:09:51] <Manishearth> woo
[14:10:33] <Yurume> the truth is that, no one reads the book in the sequential order :)
[14:10:47] <Yurume> we need a good index and ToC to faciliate such patterns
[14:10:48] <Manishearth> heh
[14:11:16] *** Joins: erz (erz@moz-fiq1tl.broadband.corbina.ru)
[14:11:33] *** Quits: nicknikolov (nicknikolov@moz-k08.qm9.214.90.IP) (Connection closed)
[14:11:41] *** Joins: nicknikolov (nicknikolov@moz-k08.qm9.214.90.IP)
[14:11:46] <Yurume> the beginner in the question was very confused since there seems to be vectors (he/she had C++ background) and slices but not arrays
[14:13:13] <Yurume> actually, he/she almost got to the correct chapter, but didn't care to read all of them (yeah, we don't even have a *full* ToC, just a partial ToC two levels deep)
[14:23:08] *** Quits: nicknikolov (nicknikolov@moz-k08.qm9.214.90.IP) (Connection closed)
[14:23:32] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[14:24:16] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[14:24:26] *** Joins: nicknikolov (nicknikolov@moz-k08.qm9.214.90.IP)
[14:27:05] *** Quits: nicknikolov (nicknikolov@moz-k08.qm9.214.90.IP) (Connection closed)
[14:29:50] *** Joins: druznek (druznek@moz-h1eme5.ip200.fastwebnet.it)
[14:31:17] *** Joins: annodomini (lambda@moz-qgii5v.ma.comcast.net)
[14:35:26] *** Joins: Diggsey (diggsey@moz-gnv64q.dsl.pipex.com)
[14:35:54] *** Joins: kmcguire (kmcguire@moz-bbqf14.res.bhn.net)
[14:38:43] *** Quits: zmack (zmack@moz-u7v.9uv.25.188.IP) (Connection closed)
[14:39:58] *** Joins: mib_32rigm (Mibbit@moz-juv.9o3.252.72.IP)
[14:42:17] *** Joins: zmack (zmack@moz-u7v.9uv.25.188.IP)
[14:42:26] *** Joins: rkruppe_ (chatzilla@moz-3nj.rnu.131.95.IP)
[14:43:21] *** Quits: zmack (zmack@moz-u7v.9uv.25.188.IP) (Connection closed)
[14:43:38] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[14:43:50] *** rkruppe_ is now known as rkruppe
[14:52:01] *** Joins: nicknikolov (nicknikolov@moz-k08.qm9.214.90.IP)
[14:53:10] *** Quits: mib_32rigm (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:57:37] *** Joins: zmack (zmack@moz-u7v.9uv.25.188.IP)
[15:02:49] *** Quits: tamird (textual@moz-gg3hct.res.rr.com) (Quit: My Mac has gone to sleep. ZZZzzz…)
[15:06:43] *** Quits: druznek (druznek@moz-h1eme5.ip200.fastwebnet.it) (Ping timeout: 121 seconds)
[15:06:50] *** Quits: zmack (zmack@moz-u7v.9uv.25.188.IP) (Connection closed)
[15:07:50] *** kimundi is now known as zz_kimundi
[15:09:29] *** Joins: petercommand (peter@moz-geqcp0.com)
[15:09:54] *** Joins: druznek (druznek@moz-h1eme5.ip200.fastwebnet.it)
[15:12:02] *** Quits: willem (willem@moz-facs2s.dynamic.upc.nl) (Quit: leaving)
[15:22:29] *** Quits: madmalik (uid13697@moz-lfin5p.brockwell.irccloud.com) (Quit: Connection closed for inactivity)
[15:27:21] *** Joins: jbomo (dkd@moz-uol4mm.fios.verizon.net)
[15:27:23] <bluss> Manishearth: thanks for the comment on the rfc, but you don't seem to be aware that slicing a &str uses byte indices
[15:27:29] <bluss> so this operation is in fact O(1)
[15:27:41] *** Quits: jbomo (dkd@moz-uol4mm.fios.verizon.net) (Quit: )
[15:28:20] <bluss> Manishearth: now this is maybe not what you requested in the issue, but we need to do this for consistency, it's the path we have chosen for string slicing basically
[15:30:28] <bluss> playbot: print!("{}", &"αβγ"[0..2]);
[15:30:30] -playbot- α()
[15:30:31] <bluss> playbot: print!("{}", &"αβγ"[0..4]);
[15:30:33] -playbot- αβ()
[15:30:38] <bluss> see, slicing is by byte offsets
[15:31:03] <bluss> greek alphabet happens to be located somewhere in unicode where it encodes to two bytes per letter
[15:31:41] <Mutabah> print!("{}", &"αβγ"[0..3]);
[15:31:47] <Mutabah> playbot: print!("{}", &"αβγ"[0..3]);
[15:31:49] -playbot- output truncated; full output at: http://bit.ly/1LbE2QO
[15:31:50] <Mutabah> fun!
[15:32:05] <Mutabah> (just showing that it panicks if you slice into a char)
[15:32:14] <bluss> yeah
[15:34:20] *** Joins: aepsil0n (eduard@moz-ob9p8k.hsi8.kabel-badenwuerttemberg.de)
[15:34:57] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Connection closed)
[15:36:00] *** Quits: druznek (druznek@moz-h1eme5.ip200.fastwebnet.it) (Quit: Leaving)
[15:36:05] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[15:40:42] *** Quits: proc (proc@moz-2lgajd.dip0.t-ipconnect.de) (Quit: Gotta eat my pizza)
[15:59:03] *** Quits: Rym (y@moz-h2o.mso.205.31.IP) (Ping timeout: 121 seconds)
[16:06:14] *** Joins: Rym (y@moz-h2o.mso.205.31.IP)
[16:08:46] <bluss> our fundamental &str API is a mess. It's impossible to get the basic slicing etc to inline and compile to nice code
[16:10:12] <bluss> .as_bytes() and .slice_unchecked() don't inline.
[16:10:44] *** Quits: Rym (y@moz-h2o.mso.205.31.IP) (Ping timeout: 121 seconds)
[16:12:35] <rkruppe> isn't a #[inline] enough to fix that?
[16:14:36] *** Joins: Rym (y@moz-h2o.mso.205.31.IP)
[16:14:41] <bluss> probably, #[inline] in some places
[16:15:34] <bluss> it's just a mess since rust is much slower than it should. str::as_bytes is a no-op that's never optimized away
[16:24:25] <bstrie> acrichto: ping
[16:24:57] <bstrie> gankro n i r naked n lost in sf
[16:25:05] <bstrie> send hlp
[16:25:49] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[16:27:01] *** Quits: Rym (y@moz-h2o.mso.205.31.IP) (Quit: WeeChat 1.0)
[16:27:07] *** Joins: Rym (y@moz-h2o.mso.205.31.IP)
[16:28:41] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[16:28:43] *** Joins: davebettin (davebettin@moz-acc.cl4.35.72.IP)
[16:38:29] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[16:38:36] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[16:39:19] *** Joins: James (quassel@moz-ph8o2f.range86-163.btcentralplus.com)
[16:43:03] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[16:43:13] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Connection closed)
[16:48:49] *** bvssvni_ is now known as bvssvni
[16:48:55] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[16:49:06] *** Quits: aepsil0n (eduard@moz-ob9p8k.hsi8.kabel-badenwuerttemberg.de) (Connection closed)
[16:49:07] *** Joins: TheDan64 (Daniel@moz-6hceng.ma.charter.com)
[16:50:44] <bstrie> reem aturon acrichto: gankro's phone number is 613 983 3142, give him a call whenev
[16:55:12] *** Quits: skeuomor1 (skeuomorf@moz-34i.sa8.32.197.IP) (Ping timeout: 121 seconds)
[16:58:43] *** Joins: skeuomor1 (skeuomorf@moz-34i.sa8.32.197.IP)
[16:59:33] <comex> bluss: even with LTO?
[17:01:32] <Manishearth> bstrie: you do know that now I'm going to wake Gankro up at midnight with hashmap questions? :>
[17:06:37] *** Joins: nham (nham@moz-755.bu3.214.98.IP)
[17:08:32] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[17:11:05] *** Joins: Johannes (Johannes@moz-4et8d7.ocn.ne.jp)
[17:11:18] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Quit: It's a joke, it's all a joke.)
[17:14:40] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Ping timeout: 121 seconds)
[17:15:12] *** Quits: Johannes (Johannes@moz-4et8d7.ocn.ne.jp) (Ping timeout: 121 seconds)
[17:16:24] *** Quits: summerlight (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[17:19:07] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[17:19:33] *** Joins: jbomo (dkd@moz-uol4mm.fios.verizon.net)
[17:21:01] <bluss> comex: I'm sure lto will help
[17:23:49] *** Quits: nicknikolov (nicknikolov@moz-k08.qm9.214.90.IP) (Connection closed)
[17:24:07] <spastorino> hi, what's the difference between partially and collaterally moved?
[17:24:14] <comex> you can't use both lto auto-inlining and dynamic linking against the same library, right?  that would be nice
[17:24:20] <spastorino> from http://is.gd/4tXWuS and http://is.gd/lIxalb
[17:24:34] <spastorino> if I understand correct what partially and collaterally means
[17:24:54] <spastorino> I think both should be partially moved
[17:25:07] <spastorino> and
[17:25:13] <spastorino> this http://is.gd/RnqblX and http://is.gd/RaFYB8 would be both collaterally moved
[17:25:14] <spastorino> ?
[17:26:32] *** Joins: GBGamer (npm@moz-92sbjt.wa.comcast.net)
[17:27:13] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[17:28:23] *** Quits: Jesin (Jesin@moz-a3uhsd.fios.verizon.net) (Quit: Leaving)
[17:28:39] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[17:29:41] *** Joins: nicknikolov (nicknikolov@moz-k08.qm9.214.90.IP)
[17:36:10] *** Quits: rovar (rovar@moz-96effg.dyn.optonline.net) (Connection closed)
[17:36:20] *** zz_kimundi is now known as kimundi
[17:37:03] *** Joins: squiddy (squiddy@moz-364tqj.adsl.alicedsl.de)
[17:37:23] *** Quits: imperio (Mibbit@moz-8otf3a.fbx.proxad.net) (Quit: http://www.mibbit.com ajax IRC Client)
[17:39:36] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[17:40:06] *** Joins: Jesin (Jesin@moz-a3uhsd.fios.verizon.net)
[17:40:07] *** Joins: dcrewi (david@moz-3u3d5k.gyrae.net)
[17:41:27] *** Joins: achanda (achanda@moz-qv7q4n.ca.comcast.net)
[17:41:45] *** Joins: larhat (Adium@moz-vlo5br.cable.virginm.net)
[17:44:00] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[17:48:52] *** Joins: dinfueh__ (dinfuehr@moz-bp2pnf.highway.telekom.at)
[17:49:46] *** Quits: doener (doener@moz-929cn9.unity-media.net) (Quit: leaving)
[17:50:12] *** Quits: dinfueh__ (dinfuehr@moz-bp2pnf.highway.telekom.at) (Connection closed)
[17:50:24] *** Quits: dinfuehr_ (dinfuehr@moz-bp2pnf.highway.telekom.at) (Ping timeout: 121 seconds)
[17:53:02] *** Joins: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net)
[17:55:44] *** Joins: rovar (rovar@moz-96effg.dyn.optonline.net)
[17:58:34] *** Quits: davebettin (davebettin@moz-acc.cl4.35.72.IP) (Ping timeout: 121 seconds)
[17:58:54] <XMPPwocky> win 13
[18:01:34] *** Quits: untitaker (untitaker@moz-aongfp.highway.telekom.at) (Ping timeout: 121 seconds)
[18:02:04] *** Joins: Twisol (Twisol@moz-0033n4.res.rr.com)
[18:04:16] *** Joins: untitaker (untitaker@moz-7c01s2.highway.telekom.at)
[18:06:34] *** Quits: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[18:08:19] *** Quits: annodomini (lambda@moz-qgii5v.ma.comcast.net) (Client exited)
[18:09:28] <reem> bstrie: We had lunch yesterday :)
[18:13:37] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[18:14:37] *** Joins: Twisol_ (Twisol@moz-3ha6bu.jonathan.com)
[18:16:49] *** Quits: Twisol_ (Twisol@moz-3ha6bu.jonathan.com) (Quit: ZNC - http://znc.in)
[18:17:07] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[18:17:21] *** Quits: Twisol (Twisol@moz-0033n4.res.rr.com) (Quit: )
[18:17:31] *** Joins: Twisol (Twisol@moz-3ha6bu.jonathan.com)
[18:19:29] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[18:19:49] *** Joins: filsmick (filsmick@moz-15h0td.abo.wanadoo.fr)
[18:26:53] *** Quits: nicknikolov (nicknikolov@moz-k08.qm9.214.90.IP) (Connection closed)
[18:28:13] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[18:29:21] *** Joins: nicknikolov (nicknikolov@moz-k08.qm9.214.90.IP)
[18:30:38] <Gankro> Manishearth: bring it
[18:32:50] <Gankro> Anyone in SF feel free to text me so I have your number
[18:33:11] *** Quits: larhat (Adium@moz-vlo5br.cable.virginm.net) (Quit: Leaving.)
[18:33:55] <cmr> Gankro: I've texted you https://gist.github.com/cmr/422c4aea4ca6fa9729d6
[18:40:35] <c74d> Gankro: are you really naked and lost?
[18:40:41] *** Quits: det (chris@moz-9klsea.lv.cox.net) (Connection closed)
[18:41:01] <Gankro> cmr: ...............
[18:41:01] <c74d> If you can access IRC, surely you can access some kind of navigation service?
[18:41:18] <Gankro> c74d I'm at kmc's now
[18:41:29] <rovar> and hopefully not naked
[18:41:42] <XMPPwocky> https://xkcd.com/530/
[18:42:34] *** Joins: eddyb_ (eddyb@moz-ure.pug.25.188.IP)
[18:44:34] *** Quits: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua) (A TLS packet with unexpected length was received.)
[18:45:02] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[18:45:09] *** Quits: eddyb (eddyb@moz-egg.q07.26.188.IP) (Ping timeout: 121 seconds)
[18:55:28] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[18:58:15] *** eddyb_ is now known as eddyb
[18:59:35] *** Joins: willem (willem@moz-facs2s.dynamic.upc.nl)
[18:59:46] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[19:02:15] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[19:04:05] <GBGamer> damn, Gankro, you see to be having an... exciting... weekend...
[19:05:14] <Gankro> GBGamer: gotta make up for a month of sleeping
[19:06:36] *** Joins: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com)
[19:08:03] *** Quits: Rym (y@moz-h2o.mso.205.31.IP) (Ping timeout: 121 seconds)
[19:12:50] *** Joins: Rym (y@moz-h2o.mso.205.31.IP)
[19:16:04] *** Joins: aepsil0n (eduard@moz-6491ha.mv2h.pepi.8071.2a02.IP)
[19:17:20] *** Quits: Rym (y@moz-h2o.mso.205.31.IP) (Ping timeout: 121 seconds)
[19:23:34] *** Joins: tamird (textual@moz-gg3hct.res.rr.com)
[19:34:23] *** Joins: Rym (y@moz-h2o.mso.205.31.IP)
[19:35:45] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[19:41:28] *** Quits: achanda (achanda@moz-qv7q4n.ca.comcast.net) (Ping timeout: 121 seconds)
[19:44:50] *** Quits: Jesin (Jesin@moz-a3uhsd.fios.verizon.net) (Quit: Leaving)
[19:45:45] *** Joins: annodomini (lambda@moz-qgii5v.ma.comcast.net)
[19:46:49] *** Quits: squiddy (squiddy@moz-364tqj.adsl.alicedsl.de) (A TLS packet with unexpected length was received.)
[19:47:12] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[19:47:29] *** Joins: Jesin (Jesin@moz-a3uhsd.fios.verizon.net)
[19:50:14] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[19:51:52] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[19:52:13] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[19:56:26] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Ping timeout: 121 seconds)
[19:58:28] *** Joins: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de)
[20:03:27] *** Quits: aepsil0n (eduard@moz-6491ha.mv2h.pepi.8071.2a02.IP) (Connection closed)
[20:04:06] *** Quits: dinfuehr (dominik@moz-bp2pnf.highway.telekom.at) (Client exited)
[20:04:07] <Gankro> Are the subteams "active" now? Like should I be sheriffing or whatever?
[20:06:27] *** Joins: genbattle (genbattle@moz-4v0.gkd.16.182.IP)
[20:09:19] *** Joins: gen_battle (genbattle@moz-4v0.gkd.16.182.IP)
[20:09:37] *** Joins: genbattle_ (genbattle@moz-4v0.gkd.16.182.IP)
[20:10:26] *** Joins: p1start (p1start@moz-nftjhe.org)
[20:11:18] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[20:12:57] *** Quits: genbattle (genbattle@moz-4v0.gkd.16.182.IP) (Ping timeout: 121 seconds)
[20:13:23] *** Quits: gen_battle (genbattle@moz-4v0.gkd.16.182.IP) (Ping timeout: 121 seconds)
[20:13:40] *** Joins: insaneinside (user@moz-dgv9mb.customer.broadstripe.net)
[20:14:39] *** Joins: Tuba (Tobba@moz-o13d22.bredband.telia.com)
[20:15:16] *** Joins: larhat1 (Adium@moz-vlo5br.cable.virginm.net)
[20:15:33] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[20:16:41] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[20:20:54] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[20:21:25] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[20:24:21] *** Quits: jga (jga@moz-q52.t1q.244.77.IP) (Ping timeout: 121 seconds)
[20:27:35] <insaneinside> Found a case where a chained method call through a (concrete!) trait implementation with (different) trait-object(-ish) return provokes rustc to emit the (paraphrased) tautology "error: unsized type is unsized".
[20:28:02] <insaneinside> This doesn't happen without the chained call.  Gist: https://gist.github.com/insaneinside/ff8e91e73b6443a25adc
[20:29:19] <insaneinside> eddyb says (and this is a direct quote) "I have no bloody clue". :)
[20:30:14] <eddyb> insaneinside: wait, "different"?
[20:30:36] <insaneinside> eddyb: the trait object of the return value is not the trait being implemented.
[20:31:02] <eddyb> ah, that's fine
[20:31:03] <insaneinside> i.e., StoresIterator<T> != Iterator<Item=T>
[20:31:17] <eddyb> insaneinside: what if you use UFCS to call that method?
[20:31:47] <eddyb> <HasIterator<T> as StoresIterator<T>>::give_me_an_iterator(&self.holder, b)
[20:32:11] <insaneinside> Same thing.
[20:33:19] <insaneinside> I think I've run into something similar to this, but with lifetimes instead -- here's hoping it's not a deeper issue...
[20:33:45] <eddyb> insaneinside: so what if you copy the implementation of HasIterator into LikesIterators's impl?
[20:34:16] <carllerche> Why does rustdoc require md files to start w/ %?
[20:37:20] *** Joins: arielb1 (Ariel@moz-2trv48.red.bezeqint.net)
[20:37:32] *** Quits: insaneinside (user@moz-dgv9mb.customer.broadstripe.net) (Ping timeout: 121 seconds)
[20:38:01] *** Joins: insaneinside (user@moz-dgv9mb.customer.broadstripe.net)
[20:40:12] <insaneinside> not sure my message got through -- replacing the body of the method in question with `b.store(iter::Once::new(self.holder.value))` works as expected, of course.
[20:41:20] <eddyb> insaneinside: I wonder if it's triggering a coercion of sorts
[20:42:58] <insaneinside> well, we get Ref<iter::Once> -> Ref<Iterator> for the innermost chained call..  Are you saying it might be trying to  coerce the Ref<Iterator> to something else in the outer call?
[20:44:01] <insaneinside> eddyb: that is, on the return from the outer call?
[20:44:26] <eddyb> Ref<'x, Iterator> to Ref<'y, Iterator>
[20:44:28] *** Joins: dinfuehr (dinfuehr@moz-bp2pnf.highway.telekom.at)
[20:44:30] *** Quits: dinfuehr (dinfuehr@moz-bp2pnf.highway.telekom.at) (Connection closed)
[20:44:31] *** Joins: dinfuehr (dinfuehr@moz-bp2pnf.highway.telekom.at)
[20:44:36] <eddyb> and that might try to coerce Iterator to Iterator or something
[20:45:38] <insaneinside> wouldn't that require Iterator: Unsize<Iterator>?
[20:47:25] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[20:49:29] *** Joins: chc4 (chc4@moz-pdo0at.ma.comcast.net)
[20:50:10] <eddyb> insaneinside: which is true
[20:50:14] <eddyb> Trait: Unsize<Trait>
[20:50:21] *** Tuba is now known as Tobba
[20:50:33] <insaneinside> oh, duh.
[20:51:40] <eddyb> insaneinside: because of Trait+Send: Unsize<Trait>, for example
[20:52:10] <insaneinside> so if this is what's going on, how do we prevent it?
[20:52:55] *** Joins: summerlight (summerlight@moz-99k.2mj.130.121.IP)
[20:55:00] *** Joins: davebettin (davebettin@moz-acc.cl4.35.72.IP)
[20:55:35] <eddyb> maybe https://gist.github.com/insaneinside/ff8e91e73b6443a25adc#file-flex_box-rs-L86-L89 isn't just right
[20:56:07] <eddyb> insaneinside: or maybe it's a bug
[20:57:12] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[20:57:30] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[20:57:43] <insaneinside> eddyb: looks to me like that impl would disallow Ref<'x, Iterator> to Ref<'y, Iterator> -- correct?  So the only remaining coercion would have to be... a no-op?!
[20:57:51] *** Quits: summerlight (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[20:59:02] *** Quits: davebettin (davebettin@moz-acc.cl4.35.72.IP) (Ping timeout: 121 seconds)
[20:59:24] <eddyb> noop coercions are still applied, I believe
[20:59:44] <insaneinside> why?
[20:59:52] *** Joins: davebettin (davebettin@moz-acc.cl4.35.72.IP)
[21:00:12] <eddyb> insaneinside: hmm, you could try this theory by trying to force a coercion after obtaining Ref<Iterator<Item=T>> from the method that works
[21:00:19] <eddyb> (without being in a method)
[21:01:35] *** Joins: aepsil0n (eduard@moz-o3k00f.mullvad.net)
[21:02:03] <insaneinside> How does one force such a coercion?  Just specify the type of the stored value?  e.g. `let x: Ref<Iterator<Item=_>> = hi.store(&mut b);`?
[21:02:34] <eddyb> insaneinside: you should specify T, not _
[21:02:38] <insaneinside> kk
[21:02:57] <eddyb> insaneinside: but yeah, that's how you get Ref<Iterator<Item=T>> in the first place
[21:03:05] <eddyb> insaneinside: the real test is let y: Ref<Iterator<Item=T>> = x;
[21:04:27] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Client exited)
[21:04:51] <insaneinside> eddyb: acutally!  both the `let x: ...` *and* the `let y: ...` lines give us the same error.
[21:05:10] *** Quits: filsmick (filsmick@moz-15h0td.abo.wanadoo.fr) (Quit: )
[21:05:21] <insaneinside> Removing the type specification makes it go away.
[21:06:35] <eddyb> of course it does, because no coercion is performed
[21:06:57] <eddyb> so you're saying the first one is enough? but that's equivalent to one of your methods that is supposed to be working
[21:08:08] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[21:08:24] <insaneinside> but it's already performed the coercion from Ref<iter::Once> to Ref<Iterator>, so specifying stored type causes another coercion.
[21:08:38] <insaneinside> a-HA
[21:09:13] <insaneinside> `impl<'a,U: 'a + ?Sized, T: 'a + ?Sized + std::marker::Unsize<U>> CoerceUnsized<Ref<'a,U>> for Ref<'a,T> {}`
[21:09:34] <insaneinside> the `+ ?Sized` after `T: 'a` is new.
[21:09:54] <insaneinside> this is... unfortunately subtle.
[21:12:00] <eddyb> OH
[21:12:08] <eddyb> insaneinside: that's a bit crazy
[21:12:20] <eddyb> what are the official impls?
[21:12:31] <insaneinside> "official" impls?
[21:12:46] <eddyb> erm, builtin
[21:12:55] <insaneinside> for what?
[21:13:18] <eddyb> insaneinside: I thought you copied this https://github.com/rust-lang/rust/blob/master/src/libcore/ops.rs#L1225
[21:13:29] *** Quits: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[21:13:35] *** Joins: Johannes (Johannes@moz-4et8d7.ocn.ne.jp)
[21:13:40] <eddyb> didn't spot the missing ?Sized
[21:13:50] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[21:14:38] <insaneinside> Is this something that could be linted?  I'd volunteer to write it, but my excuse is that my workstation is too wimpy to compile Rust.
[21:14:48] *** Joins: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de)
[21:15:52] <eddyb> insaneinside: not really
[21:16:37] <eddyb> the proper solution would be to print the stack of obligations that led to Iterator<Item=T>: Sized
[21:16:53] <eddyb> which would lead you straight to the cause of the error
[21:17:04] <insaneinside> that's something that would help for a lot of errors
[21:17:38] *** Quits: Johannes (Johannes@moz-4et8d7.ocn.ne.jp) (Ping timeout: 121 seconds)
[21:19:44] *** Quits: aepsil0n (eduard@moz-o3k00f.mullvad.net) (Ping timeout: 121 seconds)
[21:21:00] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[21:22:38] *** Joins: imperio (Mibbit@moz-8otf3a.fbx.proxad.net)
[21:24:43] *** Quits: davebettin (davebettin@moz-acc.cl4.35.72.IP) (Ping timeout: 121 seconds)
[21:25:04] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[21:26:58] *** Quits: dinfuehr (dinfuehr@moz-bp2pnf.highway.telekom.at) (Connection closed)
[21:30:36] *** Joins: dinfuehr (dinfuehr@moz-bp2pnf.highway.telekom.at)
[21:35:21] *** Quits: eibwen (eibwen@moz-0op185.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[21:37:18] *** Joins: aepsil0n (eduard@moz-hc7vub.mullvad.net)
[21:37:29] <insaneinside> eddyb deserves a medal for his patience. ;)  Thanks!
[21:38:40] *** Parts: insaneinside (user@moz-dgv9mb.customer.broadstripe.net) ("bye!")
[21:42:52] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[21:47:47] *** Joins: Kingsquee (kingsley@moz-3fm07c.bchsia.telus.net)
[21:49:06] *** Quits: erz (erz@moz-fiq1tl.broadband.corbina.ru) (Quit: My Mac has gone to sleep. ZZZzzz…)
[21:50:23] *** Joins: nerdopoly (nerdopoly@moz-qnem8v.range217-42.btcentralplus.com)
[21:51:44] *** Quits: Kxepal (Miranda@moz-7groki.pppoe.mtu-net.ru) (Ping timeout: 121 seconds)
[21:52:24] *** bvssvni is now known as bvssvni_
[21:53:25] *** Joins: Kxepal (Miranda@moz-f8pk1e.pppoe.mtu-net.ru)
[21:53:37] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[21:55:17] *** Quits: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net) (Ping timeout: 121 seconds)
[21:55:22] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[21:55:25] *** Quits: nerdopoly (nerdopoly@moz-qnem8v.range217-42.btcentralplus.com) (Quit: leaving)
[21:55:50] *** Joins: nerdopoly (nerdopoly@moz-qnem8v.range217-42.btcentralplus.com)
[21:56:16] *** Quits: dinfuehr (dinfuehr@moz-bp2pnf.highway.telekom.at) (Connection closed)
[22:00:19] *** Joins: summerlight (summerlight@moz-99k.2mj.130.121.IP)
[22:03:17] *** Joins: filsmick (filsmick@moz-15h0td.abo.wanadoo.fr)
[22:04:04] *** Quits: killercup (killercup@moz-qj5qhi.dip0.t-ipconnect.de) (Quit: Bye)
[22:12:04] *** Joins: skeuomorf (skeuomorf@moz-8cl.144.32.197.IP)
[22:12:13] *** Quits: nerdopoly (nerdopoly@moz-qnem8v.range217-42.btcentralplus.com) (Quit: leaving)
[22:13:48] *** Quits: skeuomor1 (skeuomorf@moz-34i.sa8.32.197.IP) (Ping timeout: 121 seconds)
[22:14:14] *** Quits: nicknikolov (nicknikolov@moz-k08.qm9.214.90.IP) (Connection closed)
[22:25:08] *** Quits: summerlight (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[22:26:31] *** Quits: ptalbot (ptalbot@moz-j4gnuh.fbx.proxad.net) (Ping timeout: 121 seconds)
[22:41:55] <imperio> I have an issue to write the long explanation E0070: someone said it could be nice to make the difference between rvalue and lvalue, but from my point of view, lvalue has to be a mutable variable, and taht's pretty much all... Whatam I missing ?
[22:43:16] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[22:43:56] <imperio> ok, apparently I'm totally out of the subject XD
[22:44:24] <imperio> or not totally, erf
[22:44:38] <eddyb> imperio: lvalue has a defined location in memory
[22:45:02] <eddyb> imperio: all lvalues can be represented with pointers to memory
[22:45:10] <eddyb> imperio: while rvalues can live in registers
[22:45:48] <imperio> eddyb: I thought rvalues were just "temporary" variables, but it seems I'm quite wrong about that
[22:46:43] <imperio> I'm not sure however that I can be this precise when explaining what is rvalue and lvalue. rustc --explain can go to this can kind of details ?
[22:47:24] <eddyb> imperio: all rvalues are temporary, yes
[22:47:43] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Ping timeout: 121 seconds)
[22:47:48] <eddyb> and they can only be referred to once (they correspond to the result of an expression)
[22:47:57] <imperio> eddyb: okay, thanks to you now I know the reason
[22:48:06] <arielb1> lvalues are things that have a mem_categorization
[22:48:58] <imperio> arielb1: I prefer the eddyb's explanation ^^'
[22:49:22] <imperio> having a defined location in memory is a lot more easy to understand from my point of view
[22:49:23] <arielb1> imperio: big structs never live in registers
[22:49:33] *** Quits: bjz (bjz@moz-puppgq.tpgi.com.au) (Quit: My Mac has gone to sleep. ZZZzzz…)
[22:49:38] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[22:50:09] <arielb1> mem_categorization is just an inductive definition
[22:50:15] <arielb1> of lvalues
[22:50:16] <imperio> arielb1: yes, it seems normal, that's not what eddyb said (maybe did I ?)
[22:50:19] <eddyb> imperio: &foo converts foo to an lvalue before taking its address. which means saving the rvalue to memory if it's not there already
[22:50:58] <eddyb> imperio: and there are a few more constructs that do interesting things based on whether something is an lvalue or an rvalue
[22:51:40] <eddyb> moving wants an rvalue while taking an address and match want an lvalue
[22:51:55] <arielb1> eddyb: match by ref
[22:52:02] <arielb1> match by value does not care
[22:52:19] <eddyb> arielb1: it still converts to an lvalue
[22:52:20] <imperio> eddyb: erf, you making the line disappearring... 7 = i is incorrect because 7 is a rvalue, and 7 is stored in a register, right ?
[22:52:36] <eddyb> imperio: not because it *is* but because it *might* be
[22:52:50] <arielb1> registers are not really related here
[22:52:55] <arielb1> you can store locals in registers
[22:52:58] <arielb1> they are still lvalues
[22:53:23] <eddyb> arielb1: but that's an optimization that requires mutable borrows to not exist
[22:53:26] <imperio> eddyb: that's where I have trouble, the *might*
[22:53:34] *** Quits: filsmick (filsmick@moz-15h0td.abo.wanadoo.fr) (Connection closed)
[22:53:36] <imperio> arielb1: yes, sorry
[22:53:46] <rkruppe> Explaining language semantics with hardware stuff like registers makes me sad
[22:53:47] <eddyb> imperio: rvalues can live in memory, but it's not guaranteed, whereas it's guaranteed for lvalues
[22:53:49] <imperio> arielb1: I didn't explain my thought correctly
[22:53:54] <arielb1> eddyb: no no no
[22:53:57] *** Joins: filsmick (filsmick@moz-15h0td.abo.wanadoo.fr)
[22:54:01] <arielb1> lvalues are stored "somewhere abstract"
[22:54:07] <arielb1> can be a register or memory
[22:54:27] <arielb1> they are a storage location
[22:54:29] <eddyb> &x is defined for an lvalue x
[22:54:30] <arielb1> rvalues are not
[22:54:31] <imperio> rkruppe: how would you explain then ?
[22:54:42] <eddyb> and it produces a memory address
[22:54:53] *** kimundi is now known as zz_kimundi
[22:55:11] <eddyb> for rvalues, it first allocates a stack slot, which is an lvalue, then takes the address of that slot
[22:55:38] <rkruppe> imperio: I don't have a good enough grasp on the subtleties (in Rust) to say that
[22:55:58] <eddyb> arielb1: a local could be an rvalue and not an lvalue if it's deeply immutable, for example
[22:56:13] <arielb1> eddyb: how can a local be an rvalue?
[22:56:30] <eddyb> but that requires a bunch of conditions
[22:56:42] <eddyb> arielb1: if you don't treat it like an lvalue, it's free to be an rvalue
[22:56:47] <arielb1> actually it can be, functional-language style
[22:56:54] <arielb1> functional languages don't really have lvalues
[22:57:10] <eddyb> yeah, I actually implemented that as an optimization, like 3 times already now
[22:57:31] <eddyb> and that was before we had a nice way of tracking borrowed expressions so the optimization is never a regression
[22:57:51] <eddyb> let x = 0; might as well be an rvalue if it's never borrowed
[22:58:16] *** Quits: filsmick (filsmick@moz-15h0td.abo.wanadoo.fr) (Ping timeout: 121 seconds)
[22:59:05] <eddyb> and if it is borrowed, you might find the address to point to .rodata :P
[22:59:34] <arielb1> eddyb: can it point to .rodata?
[22:59:47] <eddyb> &0 definitely does
[23:00:01] <arielb1> eddyb: there 0 is an rvalue
[23:00:12] <eddyb> it shouldn't be terribly hard to do it for locals
[23:00:20] <arielb1> rusti: let x = 0; let y = 0; println!("{} {}", x as *const _, y as *const _)
[23:00:21] -playbot- <anon>:9:49: 9:62 error: the trait `core::fmt::Display` is not implemented for the type `*const _` [E0277]
[23:00:21] -playbot- <anon>:9         let x = 0; let y = 0; println!("{} {}", x as *const _, y as *const _)
[23:00:21] -playbot- output truncated; full output at: http://bit.ly/1FmBMp9
[23:00:23] <eddyb> it's just one more const feature
[23:00:27] <arielb1> rusti: let x = 0; let y = 0; println!("{:?} {:?}", x as *const _, y as *const _)
[23:00:28] -playbot- <anon>:9:53: 9:66 error: unable to infer enough type information about `_`; type annotations required [E0282]
[23:00:28] -playbot- <anon>:9         let x = 0; let y = 0; println!("{:?} {:?}", x as *const _, y as *const _)
[23:00:28] -playbot- output truncated; full output at: http://bit.ly/1Edj1zt
[23:00:31] <eddyb> arielb1: not implemented right now, don't bother :P
[23:00:32] <arielb1> rusti: let x = 0; let y = 0; println!("{:?} {:?}", x as *const u32, y as *const u32)
[23:00:34] -playbot- 0x0 0x0
[23:00:34] -playbot- ()
[23:00:40] <arielb1> oops
[23:00:45] <arielb1> rusti: let x = 0; let y = 0; println!("{:?} {:?}", &x as *const u32, &y as *const u32)
[23:00:47] -playbot- <anon>:9:53: 9:55 error: mismatched types:
[23:00:47] -playbot-  expected `*const u32`,
[23:00:47] -playbot- output truncated; full output at: http://bit.ly/1FmBMW9
[23:00:47] <eddyb> sorry for ambiguous wording
[23:00:59] <arielb1> rusti: let x = 0; let y = 0; println!("{:?} {:?}", &x as *const i32, &y as *const i32)
[23:01:01] -playbot- 0x7fff3a4da640 0x7fff3a4da638
[23:01:01] -playbot- ()
[23:01:12] <arielb1> TODO: make casts work properly with integer fallback
[23:01:48] <arielb1> eddyb: I think that is breakage
[23:01:50] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[23:02:04] <arielb1> I certainly expect different locals to have different addresses
[23:02:41] <eddyb> arielb1: even if they're immutable?
[23:02:51] <arielb1> immutable?
[23:02:58] <arielb1> what does it mean for a local to be immutable
[23:03:03] <eddyb> frozen
[23:03:11] <arielb1> not-ContainsUnsafe
[23:03:17] <arielb1> I don't expect it to matter
[23:03:46] <eddyb> I do, because there is no meaningful way to depend on the address
[23:04:00] <arielb1> eddyb: use them as magic tokens
[23:04:14] <arielb1> through that is more of a C trick than a Rust trick
[23:04:37] <eddyb> we use heap allocations like that, fwiw
[23:05:00] <arielb1> in Rust you don't pass *const () around like that
[23:05:19] <eddyb> e.g. Box<StaticMutex>
[23:05:22] <bluss> we have statics for magic tokens
[23:05:34] <eddyb> (futex uses the address as a magic token)
[23:05:42] <arielb1> eddyb: that is because of moving
[23:05:59] <eddyb> *theoretically* you could use a stack address for a futex
[23:06:08] <eddyb> but it's useless without an atomic
[23:06:21] <arielb1> eddyb: I am not talking futexes
[23:06:22] *** Joins: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net)
[23:06:34] <arielb1> I am talking about C APIs that take a void* and return it
[23:06:37] <arielb1> or some other void*
[23:06:46] <eddyb> like "user data"?
[23:06:50] <arielb1> yes
[23:06:52] *** Joins: ChrisMorgan (ChrisMorgan@moz-g6osuq.tpgi.com.au)
[23:07:13] <arielb1> but you want to specialize
[23:08:17] *** Quits: zxq9 (ceverett@moz-qsm369.mesh.ad.jp) (Quit: Konversation terminated!)
[23:08:37] <arielb1> I suppose you can use &mut x as *mut ()
[23:08:44] <imperio> hum okay, so I'll reduce rvalue to "result of an expression, immutable"
[23:08:50] <imperio> seems good to me ^^
[23:09:11] <arielb1> imperio: if f() returns a pointer then *f() is an lvalue
[23:09:14] *** Quits: larhat1 (Adium@moz-vlo5br.cable.virginm.net) (Quit: Leaving.)
[23:10:20] <imperio> crap
[23:10:46] <arielb1> an lvalue is something that has a location ~ an identity
[23:10:47] <imperio> I really can't find a definition quite easy to understand but complete
[23:11:09] <arielb1> you can't really have the "same" rvalue
[23:11:24] <imperio> so let's try : "lvalue is an entity which can be represented by a pointer" ?
[23:11:54] <imperio> but I guess "hello" can be represented by a pointer
[23:11:57] <imperio> so annoying
[23:12:15] <eddyb> "hello" has type &str
[23:12:17] <eddyb> :P
[23:12:30] *** Joins: skeuomor1 (skeuomorf@moz-ui7.3pi.32.197.IP)
[23:12:38] <eddyb> *"hello" is an immutable lvalue
[23:13:15] <arielb1> eddyb: string literals are a bit of a weird case
[23:13:22] <arielb1> they have both by-reference and by-value identity
[23:14:12] *** Joins: jga (jga@moz-q52.t1q.244.77.IP)
[23:14:23] <imperio> so, "rvalue is an immutable expression which cannot be represented by a pointer"
[23:14:32] <imperio> arielb1: did I forget something on this one ?
[23:14:42] <arielb1> imperio: of course an rvalue can be represented by a pointer
[23:14:54] *** Parts: jga (jga@moz-q52.t1q.244.77.IP) ("Leaving")
[23:14:59] *** Joins: jga (jga@moz-q52.t1q.244.77.IP)
[23:15:00] <arielb1> if you have a BigStruct then the compiler represents it as a pointer
[23:15:03] *** Quits: skeuomorf (skeuomorf@moz-8cl.144.32.197.IP) (Ping timeout: 121 seconds)
[23:15:09] <imperio> hum...
[23:15:14] <arielb1> I mean, foo() -> BigStruct; bar(foo())
[23:15:16] <eddyb> arielb1: all lvalues have by-ref and by-val identity, in a way...
[23:15:37] <eddyb> there's no nice way to describe any of this
[23:15:56] <eddyb> my own definitions are flexible and contextual :P
[23:16:04] <imperio> eddyb: well, rustc --explain E0070 kinda needs it, so it'd be nice if it were possible ^^
[23:16:24] <arielb1> I mean, 1+1 = 3 does not make sense
[23:16:33] *** Quits: jga (jga@moz-q52.t1q.244.77.IP) (Connection closed)
[23:16:40] <arielb1> not because of anything involving memory addresses
[23:17:02] <eddyb> kimundi struggled with it and then it clicked for him, some time ago. I would ask him about understanding {r,l}values :P
[23:17:13] <imperio> rusti: 1+1=3;
[23:17:14] -playbot- <anon>:9:9: 9:14 error: illegal left-hand side expression [E0070]
[23:17:15] -playbot- <anon>:9         1+1=3;
[23:17:15] -playbot- output truncated; full output at: http://bit.ly/1Edk0j1
[23:17:51] <nham> imperio: have you looked at the Reference? that does have an explanation of lvalues/rvalues you might be able to paraphrase. not sure if its up to date though
[23:17:57] *** Quits: Rusky (russell@moz-mp2nkm.slkc.qwest.net) (Quit: Leaving.)
[23:18:12] <imperio> nham: the Reference ? You mean the rustbook ?
[23:18:24] <nham> https://doc.rust-lang.org/reference.html#lvalues,-rvalues-and-temporaries
[23:18:25] <arielb1> lvalues are things that have identity
[23:18:28] <eddyb> nham: wait, outdated lvalue definition? that sounds unlikely
[23:18:45] <eddyb> arielb1: s/rvalue/ephemeral :P
[23:18:54] <imperio> nham: oh nice one ! Thanks !
[23:18:59] <arielb1> eddyb: ephemeral?
[23:19:10] *** Joins: Rusky (russell@moz-mp2nkm.slkc.qwest.net)
[23:19:13] <eddyb> nvm
[23:19:55] <eddyb> arielb1: "the same «object» can be referred to multiple times" is something that I consider a property of lvalues
[23:20:03] <arielb1> there is nothing ephemeral about 42
[23:20:20] <eddyb> though I didn't consider building a definition on top of that property
[23:20:54] <eddyb> arielb1: you know what's funny, though
[23:21:22] <eddyb> 42 is kind of an lvalue noawadays because it's technically *&42
[23:21:34] <arielb1> why?
[23:21:42] <eddyb> rvalue promotion
[23:21:53] <arielb1> what's rvalue promotion?
[23:21:59] <eddyb> putting constants in .rodata
[23:22:39] <arielb1> do we optimize `x = ComplicatedInitializer { .. }` into .rodata?
[23:22:45] <arielb1> + memcpy
[23:22:49] <eddyb> as long as it's constant, yes
[23:23:27] <imperio> rusti: 1=3;
[23:23:28] -playbot- <anon>:9:9: 9:12 error: illegal left-hand side expression [E0070]
[23:23:28] -playbot- <anon>:9         1=3;
[23:23:28] -playbot- output truncated; full output at: http://bit.ly/1FmCkeG
[23:23:34] *** Joins: njn_ (chatzilla@moz-e7amqe.iinet.net.au)
[23:23:38] <arielb1> imperio: did you get it?
[23:23:41] *** Joins: zmike_ (discomfitor@moz-oek0ra.ct.comcast.net)
[23:23:52] <eddyb> arielb1: more specifically, const FOO: &'static T = &ComplicatedInitializer { .. }; has to work for the promotion to kick in
[23:24:01] *** Joins: skeuomorf (skeuomorf@moz-fvk.ubs.32.197.IP)
[23:24:13] <eddyb> const fn barely needs any semantic support ;)
[23:24:17] <imperio> arielb1: I'm trying, but it's 1h in the morning for me and I'm getting tired ><
[23:24:27] *** Quits: skeuomor1 (skeuomorf@moz-ui7.3pi.32.197.IP) (Ping timeout: 121 seconds)
[23:24:28] <eddyb> (the only real addition would be const_eval support)
[23:24:33] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Client exited)
[23:24:36] <imperio> arielb1: but I'm reading, thanks for all the details (and thanks to you eddyb too of course !)
[23:24:43] <eddyb> but, like, every expression ever is qualified for constness
[23:24:56] *** Quits: willem (willem@moz-facs2s.dynamic.upc.nl) (Quit: leaving)
[23:25:37] <nham> imperio: you may want to do E0067 while youre at it. seems to be the same error as E0070, but for binary op assignments like +=
[23:25:42] *** Quits: arielb1 (Ariel@moz-2trv48.red.bezeqint.net) (Quit: Ex-Chat)
[23:25:52] <imperio> nham: I'll add myself for it then
[23:26:09] <imperio> nham: already done
[23:26:16] <imperio> I'll take a look at what he wrote
[23:26:49] <nham> imperio: oh weird, yeah. those seem like they should be nearly the same
[23:26:55] <imperio> nham: https://github.com/GuillaumeGomez/rust/blob/left-hand-error/src/librustc_typeck/diagnostics.rs#L141
[23:27:19] *** Joins: skeuomor1 (skeuomorf@moz-kmj.sa8.32.197.IP)
[23:29:57] *** Quits: skeuomorf (skeuomorf@moz-fvk.ubs.32.197.IP) (Ping timeout: 121 seconds)
[23:32:54] <imperio> nham: eddyb: arielb1: I quickly updated my error explanation, here's the reference to the PR: gh25552
[23:32:55] <[o__o]> Add error explanation for E0070: https://github.com/rust-lang/rust/pull/25552
[23:33:03] <imperio> thanks again for your help !
[23:34:26] *** Joins: jga (jga@moz-q52.t1q.244.77.IP)
[23:34:42] *** Joins: andreabedini (andreabedin@moz-2lt49q.unimelb.edu.au)
[23:38:06] *** Quits: imperio (Mibbit@moz-8otf3a.fbx.proxad.net) (Quit: http://www.mibbit.com ajax IRC Client)
[23:42:20] *** Quits: James (quassel@moz-ph8o2f.range86-163.btcentralplus.com) (Ping timeout: 121 seconds)
[23:47:36] *** Joins: davebettin (davebettin@moz-acc.cl4.35.72.IP)
[23:48:39] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[23:54:15] *** Joins: Johannes (Johannes@moz-4et8d7.ocn.ne.jp)
[23:54:22] *** Joins: filsmick (filsmick@moz-15h0td.abo.wanadoo.fr)
[23:55:44] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[23:55:55] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[23:58:34] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[23:58:41] <blaenk> can someone tell me what this means #![cfg_attr(test, feature(test, collections))]
[23:58:42] *** Quits: filsmick (filsmick@moz-15h0td.abo.wanadoo.fr) (Ping timeout: 121 seconds)
[23:59:23] <ChrisMorgan> blaenk: http://chrismorgan.info/blog/rust-cfg_attr.html
[23:59:29] <blaenk> I know what cfg_attr is thanks
[23:59:34] <blaenk> I mean what the effect of that statement is
[23:59:38] <blaenk> what does testing on 'test' mean
[23:59:42] <blaenk> and what does feature(test) mean
[23:59:56] <ChrisMorgan> cfg(test) occurs when rustc --test.
