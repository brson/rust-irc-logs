[00:03:16] <pcwalton> I've taken to leaving off semicolons wherever I can in Rust
[00:03:21] <pcwalton> probably 50% of them can go away
[00:03:22] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Quit: yichoi)
[00:05:01] *** Quits: Excureo (c@moz-DE8C33F1.static.yakm.wa.charter.com) (Input/output error)
[00:05:16] *** Joins: Excureo (c@moz-DE8C33F1.static.yakm.wa.charter.com)
[00:05:59] *** Quits: jorendorff (jorendorff@moz-29C824BB.sub-70-197-8.myvzw.com) (Quit: jorendorff)
[00:08:00] *** Quits: themgt (themgt@moz-248BBB96.dhcp.gnvl.sc.charter.com) (Quit: themgt)
[00:08:06] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[00:09:05] *** Quits: azita (Azita@2557E599.66715431.D25A875A.IP) (Quit: azita)
[00:09:30] *** Quits: noam (noam@F6B530A7.720527A7.416762B.IP) (Connection reset by peer)
[00:09:33] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Connection reset by peer)
[00:09:43] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[00:09:45] *** Joins: noam (noam@F6B530A7.720527A7.416762B.IP)
[00:10:41] *** Joins: ysuzuki (ysuzuki@moz-60FA9D06.net119083145.t-com.ne.jp)
[00:12:20] *** Joins: jorendorff (jorendorff@moz-4BE034AB.ptr.us.xo.net)
[00:14:52] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[00:15:00] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.0)
[00:15:08] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[00:15:34] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[00:20:56] <vermeille> I used the Windows installer, and when I try to use rustc, nothing happens. It sleeps few seconds, then returns
[00:21:09] *** Joins: jesse99 (jesse99@moz-F226420.hsd1.wa.comcast.net)
[00:21:16] <vermeille> When I "strace rustc", there is an exception noticed
[00:21:34] <vermeille> Any idea why ? I had no problem on my laptop, I have one on my desktop
[00:22:01] <ssbr> When that happened to me, it was because of an internal compiler error in rust.
[00:22:28] <ssbr> (But I never ran strace or anything, I used RUST_LOG=rustc=1,::rt::backtrace rustc.exe my_file.rs
[00:22:40] <ssbr> (in a msys sh terminal)
[00:23:03] <vermeille> Well, I don't even try to compile anything, just running "rustc" doesn't even shows the usage message
[00:23:41] <vermeille> Does it rely on gcc ?
[00:23:51] <vermeille> Actually my version is gcc 4.7.2
[00:24:02] <aatch> vermeille, yes, for the link stage
[00:24:20] *** Quits: jesse99 (jesse99@moz-F226420.hsd1.wa.comcast.net) (Client exited)
[00:24:38] <vermeille> Okay, should it fail before even showing usage message for this reason ?
[00:24:39] <dbaupp> vermeille: you probably need gcc < 4.6
[00:24:46] *** Quits: fread2281 (zcarterc@moz-CB181B42.dia.static.qwest.net) (Quit: WeeChat 0.4.0)
[00:24:55] *** Joins: fread2281 (zcarterc@moz-CB181B42.dia.static.qwest.net)
[00:24:59] <dbaupp> vermeille: https://github.com/mozilla/rust/wiki/Note-getting-started-developing-Rust#windows
[00:25:17] <vermeille> I read that
[00:25:46] <vermeille> But it's not clear for me if it's required to run or to compile rustc
[00:26:03] *** Quits: vosen (vosen@moz-266BA656.icpnet.pl) (Quit: Leaving)
[00:26:35] *** Quits: Boreeas (Boreeas@moz-F35C832D.boreeas.net) (Ping timeout)
[00:26:59] <vermeille> (And I can't understand why, but running this command doesn't change anything, gcc --version still says 4.7.2
[00:30:47] *** Joins: Boreeas (Boreeas@moz-F35C832D.boreeas.net)
[00:31:32] <vermeille> (I'm reainstalling MinGW, looks better)
[00:31:57] *** Joins: bbrittain (ben@moz-632384CB.dr02.roch.ny.frontiernet.net)
[00:32:00] <Luqman> vermeille: i'm pretty sur the gcc <4.6 only applies when compiling the compiler
[00:32:06] <Luqman> or just llvm actually
[00:32:32] <Luqman> for linking i don't think it should matter, but i haven't used rust extensively on windows
[00:32:58] <ssbr> bjz: https://github.com/bjz/glcore-rs/issues/6 !
[00:33:02] <ssbr> so I can't use glcore, then?
[00:33:09] <ssbr> (same problem)
[00:33:16] <vermeille> Okay, I don't know why, but reinstall solved it
[00:33:23] *** Quits: bbrittain (ben@moz-632384CB.dr02.roch.ny.frontiernet.net) (Client exited)
[00:33:27] *** Joins: bbrittain (ben@moz-632384CB.dr02.roch.ny.frontiernet.net)
[00:33:43] <bjz> ssbr: dangit :(
[00:33:57] <bjz> ssbr: no idea what's up with that
[00:34:05] <vermeille> Well, rustc isn't portable to MSVC ? 
[00:34:28] <bjz> ssbr: do you need the full openGL, or can you use OpenGL ES?
[00:34:30] *** Quits: bnicholson (bnicholson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[00:34:35] <brson> aatch: I am going to work on porting pipes this week
[00:34:36] *** Joins: ssn (ssn@moz-FB2CDEE1.lightspeed.snjsca.sbcglobal.net)
[00:34:55] <ssbr> bjz: I don't need the full OpenGL (but wanted it), and I don't have the first clue as to how to set up OpenGL ES. I tried looking into it, and it's very confusing.
[00:35:25] <ssbr> (I actually rather was looking forward to playing with geometry and compute shaders, but other than that...)
[00:35:26] <bjz> ssbr: there are opengl es bindings
[00:35:29] * ssbr shrugs
[00:35:40] <ssbr> bjz: Yeah, but getting an opengl ES environment looks uncomfortable
[00:36:10] <bjz> ssbr: how so?
[00:36:11] <ssbr> in that nobody seems to have clearly documented how to do it. All I know is that I apparently can't just use GLES and expect it to work.
[00:36:24] <bjz> ssbr: Jeaye uses it in q3 I think: https://github.com/Jeaye/q3
[00:36:29] <ssbr> bjz: people talk about using EGL for this, or setting up a GLES emulation environment in that
[00:36:37] <ssbr> bjz: I just want to use a library, I don't know any of that
[00:36:56] <Jeaye> The rust-opengles bindings are good.
[00:37:10] <ssbr> sure, but I still need to get a GLES context, right?
[00:37:14] <ssbr> and apparently that's difficult
[00:37:22] <ssbr> slash I can't figure out who to believe on how to do it
[00:37:24] <Jeaye> ssbr: You can get that from glfw.
[00:37:27] <ssbr> Jeaye: how?
[00:37:43] <ssbr> Isn't there a fork of glfw that's meant for GLES?
[00:37:52] <Jeaye> Follow the examples given with glfw-rs.
[00:38:07] *** Joins: Sodel_the_V (user@moz-853663E1.va.shawcable.net)
[00:38:36] <ssbr> Jeaye: I've seen them.
[00:38:44] <Jeaye> You can use q3's main.rs as an example of cross-platform compatible context creation; I have it working with the rust-opengles bindings.
[00:38:51] <ssbr> Jeaye: are you saying that I can use OpenGL ES exactly where I'd use OpenGL, with no extra problems?
[00:38:57] <ssbr> that is not what I read on the internets
[00:39:08] <Jeaye> Yes, I'm saying that.
[00:39:13] <jgilbert> ssbr, for some subset of the two, basically yes
[00:39:15] <ssbr> well you should've said that earlier :(
[00:39:21] <ssbr> I guess the internets is out of date
[00:39:25] <Jeaye> You should've asked earlier.
[00:39:36] <ssbr> Jeaye: I did!
[00:39:43] <ssbr> <ssbr> in that nobody seems to have clearly documented how to do it. All I know is that I apparently can't just use GLES and expect it to work.
[00:39:55] <Jeaye> Have you tried?
[00:40:03] <ssbr> Jeaye: no
[00:40:11] <ssbr> I've been trying to get OpenGL to work this time
[00:40:12] *** Joins: victorporof (victorporo@CA0EF1E0.A58E0E41.6A4F8DA2.IP)
[00:40:21] <jgilbert> the internet is also right*, since gles is not actually a subset of opengl
[00:40:38] <Jeaye> ssbr: Essentially, ES just limits the symbol set. As long as you follow that, you're safe.
[00:40:48] <ssbr> Wasn't there a revision of OpenGL 4.2 that has ES as a subset?
[00:40:49] <jgilbert> Jeaye, some symbols are different
[00:40:51] <ssbr> agfagafd
[00:40:55] <ssbr> of OpenGL 4*
[00:41:04] <ssbr> Jeaye: aren't some of the function signatures different?
[00:41:07] <ssbr> I thought they were
[00:41:23] <ssbr> I might be confused. I've been confused this whole time, so that would be nothing new.
[00:42:06] <Jeaye> Some things may take some tweaking. They're largely compatible though... and rust-opengles provides some handy wrapping.
[00:42:13] <Jeaye> Why not just try it?
[00:42:19] <ssbr> I will
[00:42:24] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[00:42:24] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14c1bf6a4 to 14ad5bfd6: 02http://git.io/N3iJvQ
[00:42:24] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[00:42:27] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[00:42:28] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/S0hd-w
[00:42:28] <ghrust> 13rust/06auto 14943b9d5 15Youngmin Yoo: Add vec.rs each2_mut function
[00:42:28] <ghrust> 13rust/06auto 141d1c502 15Youngmin Yoo: Add vec.rs each2_mut testsuite
[00:42:30] <ghrust> 13rust/06auto 147d81c80 15bors: auto merge of #6388 : recrack/rust/each2_mut, r=pcwalton...
[00:42:30] <ssbr> I'm more mad that I was misled
[00:42:31] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[00:42:37] <jgilbert> among others, glClearDepthf vs glClearDepth
[00:42:46] *** Joins: Jesin (Jessin_@moz-5654D37.washdc.fios.verizon.net)
[00:42:57] <Jeaye> jgilbert: That's not a big deal though. Again, just a bit of tweaking.
[00:43:37] <bjz> ssbr: it's all a learning experience. that's how you become an expert. :)
[00:43:57] <ssbr> I don't wanna learn!
[00:43:59] <jgilbert> bjz, no one needs to be an expert at creating opengl contexts
[00:44:05] <jgilbert> that's basically torture
[00:44:05] *** Quits: victorporof (victorporo@CA0EF1E0.A58E0E41.6A4F8DA2.IP) (Ping timeout)
[00:44:17] <bjz> ssbr: sorry my bindings weren't up to scratch. once we can call extern function pointers it will be better
[00:44:19] <ssbr> bjz: you should borrow the nice handy wrapper functions rust-opengles has around getProgramiv and such
[00:44:21] <pcwalton> there's a reason Servo is using GLUT ;)
[00:44:37] <pcwalton> (of course, not for the long term)
[00:44:42] <jgilbert> servo should use what we use in gecko
[00:44:46] <bjz> pcwalton: GLUT! ugh
[00:44:47] <jgilbert> but like, done better
[00:44:51] <jgilbert> I've wanted to fix it for a while
[00:44:58] <bjz> :P
[00:45:08] <pcwalton> jgilbert: it's actually embeddable, so it's kind of up to the host app to create the context
[00:45:17] <pcwalton> although we need to create offscreen ones so...
[00:46:03] <jgilbert> some day I'll go through a pull out our GL init stuff to library
[00:46:13] <pcwalton> that would be nice
[00:46:16] <pcwalton> write some rust bindings for it
[00:46:27] <pcwalton> rust-makemeaglcontextplease
[00:47:08] <ssbr> by the way, when _will_ rust be able to call extern function pointers?
[00:47:26] <pcwalton> it can be done pretty soon, fast-ffi basically does most of the work
[00:47:31] <bjz> jgilbert: I have it in the docks
[00:47:48] <bjz> jgilbert: I need extern function pointers though :(
[00:47:57] <bjz> pcwalton: any updates on that?
[00:48:04] <pcwalton> it's not on my list but I would take a patch
[00:48:10] <pcwalton> obviously servo is going to need it too
[00:48:14] <bjz> please please please
[00:48:17] <bjz> :)
[00:49:13] <bjz> pcwalton: https://github.com/bjz/glLoadGen
[00:49:37] <bjz> pcwalton: I wish it didn't use lua, but at least it works
[00:49:57] *** Joins: wuwei`lab (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[00:50:05] <bjz> nmatsakis: said he might be able to do it
[00:50:36] *** Joins: bnicholson (bnicholson@moz-E98974C1.hsd1.ca.comcast.net)
[00:51:02] * bjz and h3r3tic would shower anyone who fixes extern function pointers with confetti
[00:52:01] *** Quits: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net) (Quit: dherman)
[00:53:41] <nmatsakis> bjz: yeah, I started a branch on that, but I haven't had time to look at it much in last few days. I'll try to get to it though
[00:54:20] *** Joins: jesse99 (jesse99@moz-F226420.hsd1.wa.comcast.net)
[00:54:39] <pcwalton> lots of dynamic borrow errors in servo
[00:55:58] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[00:58:44] <pcwalton> nmatsakis: r? https://github.com/mozilla/rust/pull/6462
[00:59:06] <pcwalton> eventually we can make "use" work with generic type parameters but for now I found it more consistent to just disallow use from reaching into impls or traits
[00:59:13] <pcwalton> this broke basically nothing
[00:59:31] *** Quits: inolen (Adium@moz-9F4F17DF.tourcaster.com) (Quit: Leaving.)
[00:59:36] *** Quits: SiegeLord (siege@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[01:02:06] <bjz> pcwalton: ooooh
[01:02:13] <bjz> exciting!
[01:02:32] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[01:02:58] <pcwalton> I'm trying to get the backwards incompatible part out of the way as soon as possible
[01:02:58] <nmatsakis> pcwalton: I want to talk about fns, but I'm worn out tonight. Tomorrow?
[01:03:01] <pcwalton> sure
[01:06:06] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[01:06:06] *** ChanServ sets mode: +o dherman
[01:09:22] *** Quits: ssn (ssn@moz-FB2CDEE1.lightspeed.snjsca.sbcglobal.net) (Quit: Leaving)
[01:11:11] *** Joins: igl (igl@moz-FB7F39.adsl.alicedsl.de)
[01:12:12] *** Quits: igl1 (igl@moz-250CDF29.adsl.alicedsl.de) (Ping timeout)
[01:14:39] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[01:14:52] *** Quits: mitsuhiko (mitsuhiko-@moz-BC29B73E.srv.pocoo.org) (Ping timeout)
[01:15:25] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[01:15:35] *** Joins: mitsuhiko (mitsuhiko-@moz-BC29B73E.srv.pocoo.org)
[01:19:11] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Connection reset by peer)
[01:19:23] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[01:20:07] *** Joins: miseria (Mibbit@moz-F7773CA5.a1.protectedgroup.com)
[01:20:09] *** Joins: enix (enix@FAA903B0.6F2C2084.FBEE305F.IP)
[01:20:14] <miseria> "el pueblo no puede reclamar el valor de sus pertenencias, vivimos en un mundo corrupto y no sabemos lo que nos pertenece" bienvenidos: http://castroruben.com *temo_a_un_ser_sin_rival*
[01:20:15] *** Parts: miseria (Mibbit@moz-F7773CA5.a1.protectedgroup.com) ()
[01:20:55] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Ping timeout)
[01:20:56] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[01:24:15] *** Joins: dymk_ (dymk@44EEE21C.A6E21E6E.5E500FC7.IP)
[01:24:34] <Jeaye> >.>
[01:24:41] <bjz> <.<
[01:25:14] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (No route to host)
[01:25:20] *** Quits: dymk_ (dymk@44EEE21C.A6E21E6E.5E500FC7.IP) (Quit: Leaving)
[01:25:29] *** Quits: dymk (dymk@9BDB80AA.8F293D07.59A90BC7.IP) (Ping timeout)
[01:25:56] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[01:27:42] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[01:29:27] <ssbr> Mmmm, how should I be using include_bin!() ? It looks like it translates to a literal for a fixed-size array, but I don't know the size of this array in advance, so something like this would seem absurd: `static foo : [u8, .. 976] = include_bin!("foo.blob");` . What should I do instead?
[01:30:09] <brson> ssbr: I do believe that's how it works currently. the implementation was a quick hack
[01:30:10] *** Quits: Flibo (Flibo@moz-40397852.org.aalto.fi) (Ping timeout)
[01:30:20] *** Quits: benh (ben@moz-4A0366D2.org) (Ping timeout)
[01:30:25] <bjz> pcwalton: r? https://github.com/mozilla/rust/pull/6463
[01:30:35] <ssbr> brson: but isn't that useless? Or is there some cast I can do?
[01:30:44] <ssbr> or I guess I can use it for local variables
[01:31:07] <ssbr> I don't know how to convert a fixed size array to a vec, even then
[01:31:48] *** Joins: solancile (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net)
[01:32:20] <brson> ssbr: assign it to a static and then convert that to an owned vec with to_owned()
[01:32:31] *** Joins: Flibo (Flibo@moz-40397852.org.aalto.fi)
[01:32:54] <cmr> eevee: You said you were working on a terminal abstraction library (a la curses), yeah?
[01:33:17] <ssbr> brson: static won't work because I have to declare the type of a static
[01:33:24] <ssbr> but I can do that with a local variable
[01:33:27] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[01:33:27] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/S0hd-w
[01:33:27] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[01:33:37] *** Joins: benh (ben@moz-4A0366D2.org)
[01:33:53] *** Quits: HOLYCOWBATMAN (Mibbit@moz-AB722A1C.mc.videotron.ca) (Quit: http://www.mibbit.com ajax IRC Client)
[01:33:59] *** Joins: inolen (Adium@moz-FA2406D8.socal.res.rr.com)
[01:34:05] <dbaupp> bjz: is there a particular reason you're matching on infinity for asinh, but nothing else? :)
[01:34:30] <ssbr> Yup, that works. Thanks brson :)
[01:34:32] <steven_is_false> Hoorah! My fix made it into incoming https://github.com/mozilla/rust/commit/c1bf6a43815b3e2147328765f1a3c0ccf63ad575
[01:35:14] <bjz> dbaupp: it gives me the wrong answer for the infinities
[01:35:42] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[01:35:53] <dbaupp> bjz: oh, right... that's a pretty good reason
[01:36:06] <bjz> dbaupp: the others seem to work
[01:36:13] <bjz> dbaupp: :P
[01:36:24] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[01:36:24] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/gLaoZA
[01:36:24] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[01:36:25] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[01:36:25] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/ulFdZw
[01:36:25] <ghrust> 13rust/06auto 14973228a 15Brian Anderson: Upgrade libuv...
[01:36:25] <ghrust> 13rust/06auto 14c0547d6 15bors: auto merge of #6456 : brson/rust/libuv, r=brson...
[01:36:25] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[01:36:58] <bjz> dbaupp: http://www.wolframalpha.com/input/?i=asinh+infinity
[01:37:53] <cmr> brson: in 973228a what's up with ebml?
[01:37:56] <dbaupp> bjz: yeah, but (at least in python) log(x + sqrt(x^2 + 1)) gives inf for x = inf
[01:38:03] <steven_is_false> Okay, I have a tricky C++11 question. How does one have an rvalue reference for the this pointer?
[01:38:26] <Eridius> steven_is_false: why would you want one?
[01:38:36] <bjz> dbaupp: doesn't seem to in rust
[01:38:44] <steven_is_false> Eridius: I want the member function to consume it's owner.
[01:38:51] <dbaupp> bjz: oh :(
[01:38:56] <dbaupp> steven_is_false: http://stackoverflow.com/questions/15558664/assigning-this-pointer-to-rvalue-reference-to-a-pointer ?
[01:39:02] <bjz> dbaupp: not sure why
[01:39:11] <dbaupp> bjz: yeah, that's pretty strange
[01:39:25] <brson> cmr: It's a mystery to me
[01:39:41] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[01:39:41] <cmr> so weird
[01:39:43] <steven_is_false> Anyways, I found a workaround.
[01:39:46] <dbaupp> bjz: because inf*inf + 1 should be inf, sqrt inf should be inf, and log ( inf + inf) should be inf.
[01:41:00] <cmr> What's the convention for rust library names? foo-rs? rust-foo?
[01:42:36] <bjz> dbaupp: ooh
[01:42:40] *** Quits: Caseus (bacon@moz-9F046088.members.linode.com) (Quit: WeeChat 0.3.9.2)
[01:42:49] *** Joins: victorporof (victorporo@CA0EF1E0.A58E0E41.6A4F8DA2.IP)
[01:42:53] <bjz> dbaupp: it seems to happen for neg_infinity
[01:42:57] <bjz> not infinity
[01:42:58] <dbaupp> bjz: http://ix.io/5CP
[01:43:16] <bjz> it give NaN
[01:43:21] <dbaupp> yeah... I guess neg_infinity gives NaN?
[01:43:28] <dbaupp> oh, cool, I guessed right! :D
[01:43:28] *** Quits: jgilbert (jgilbert@2557E599.66715431.D25A875A.IP) (Ping timeout)
[01:43:38] <bjz> yah
[01:43:44] <bjz> why would it give nan?
[01:44:03] <bjz> oh
[01:44:11] <bjz> sqrt?
[01:44:18] <bjz> no
[01:44:24] <dbaupp> bjz: sqrt(neg_inf^2 + 1) = inf, and neg_inf + inf = NaN
[01:44:29] <bjz> -inf * -inf give inf?
[01:44:37] <dbaupp> bjz: yup
[01:44:47] <bjz> ahh
[01:44:56] <bjz> ok
[01:46:06] *** Quits: victorporof (victorporo@CA0EF1E0.A58E0E41.6A4F8DA2.IP) (Ping timeout)
[01:47:13] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[01:47:22] <cmr> Is kud1ing in IRC?
[01:49:43] *** Quits: EXetoC (ex@moz-C741B177.customer.t3.se) (Quit: WeeChat 0.4.0)
[01:50:33] *** Joins: Caseus (bacon@moz-9F046088.members.linode.com)
[01:52:30] <bjz> pcwalton: ammended that r? https://github.com/mozilla/rust/pull/6463
[01:52:40] <bjz> cheers dbaupp
[01:55:10] <steven_is_false> Now that we have ldexp will we be seeing a literal notation for that kind of thing soon?
[01:55:24] <steven_is_false> (Representing floats exactly)
[01:55:25] <bjz> steven_is_false: hopefully
[01:55:34] <steven_is_false> Cool.
[01:55:53] <bjz> steven_is_false: well, it was already there, just not a trait
[01:55:59] <dbaupp> bjz: np :D
[01:56:02] <steven_is_false> Oh.
[01:56:09] <bjz> steven_is_false: plus it returns a tuple
[01:56:20] <bjz> steven_is_false: wait
[01:56:32] <dbaupp> steven_is_false: in theory, the underlying number parser supports 0x1.2345p12, but the compiler doesn't use it
[01:56:36] <bjz> that's frexp
[01:59:08] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Quit: Leaving.)
[01:59:40] <bjz> dbaupp: will frexp help for float to rational conversions?
[01:59:56] <bjz> not sure how that works
[02:00:06] <bjz> another fellow was asking the other day
[02:00:14] <dbaupp> bjz: no idea either
[02:00:20] <dbaupp> I assume it will
[02:00:33] <dbaupp> hm, actually, yes
[02:00:49] *** Quits: Jesse (jruderman@2557E599.66715431.D25A875A.IP) (Quit: Jesse)
[02:02:02] *** Quits: katis (katis@40C8AF65.EFDC2270.EE6E63A5.IP) (Ping timeout)
[02:02:13] *** Joins: katis (katis@40C8AF65.EFDC2270.EE6E63A5.IP)
[02:02:30] *** Quits: busylizzy (lisa@85228838.12D0DC84.211374C4.IP) (Ping timeout)
[02:02:55] *** Joins: busylizzy (lisa@85228838.12D0DC84.211374C4.IP)
[02:04:50] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[02:06:16] <vermeille> let a = SomeObj; a.foo();
[02:06:36] <vermeille> can foo() modify a, while a isn't mutable ?
[02:07:00] <vermeille> ( fn foo(&self) -> T { ... } )
[02:07:09] <cmr> vermeille: nope
[02:07:20] <cmr> you can use &mut self, though
[02:07:22] <cmr> afaik
[02:07:36] <vermeille> Okay great.
[02:07:45] <cmr> (I'm probably more of a newb you are, I'm learning the language as I need its features)
[02:08:01] <vermeille> What about performance in a purely functional style ?
[02:08:22] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[02:08:35] <vermeille> (I'm discovering Rust for 2 days now, I think you're much more advanced than me :) )
[02:08:35] <cmr> vermeille: There's no TCO, so that's something to keep in mind.
[02:08:44] <vermeille> TCO ?
[02:08:48] <cmr> tail-call optimization
[02:09:16] <vermeille> Oh.
[02:09:28] <vermeille> Good to know.
[02:10:13] <vermeille> That's the only issue ?
[02:10:32] <cmr> there's no laziness. other than that, I don't know :)
[02:10:56] <vermeille> If I'm writing a game, I can have an Actor struct which holds 7 or 8 vectors
[02:11:18] <fread2281> I thought there was, but not guaranteed (so no infinitely recursive functions)
[02:11:21] <fread2281> (TCO)
[02:11:42] <vermeille> Writing in a pure functionnal style can imply copying the whole structure just for changing one field. Will the compiler detect and optimize such things ?
[02:11:43] *** Quits: Sodel_the_V (user@moz-853663E1.va.shawcable.net) (Input/output error)
[02:11:43] <cmr> I remember reading on the ML that it wasn't at all.
[02:11:58] <dbaupp> fread2281: yes, "sibling call optimisation" I think
[02:12:28] *** Joins: cstrahan (cstrahan@moz-F976BC85.hsd1.va.comcast.net)
[02:12:32] *** Quits: jorendorff (jorendorff@moz-4BE034AB.ptr.us.xo.net) (Quit: jorendorff)
[02:12:52] <vermeille> It's *really* cool to see Rust's performances considering it's only 0.6!
[02:13:10] <cmr> vermeille: it's regressing, don't worry :p
[02:13:19] <vermeille> Oh :(
[02:13:45] <dbaupp> fread2281 et al: http://www.reddit.com/r/rust/comments/1c353t/why_rust_will_probably_never_guarantee_tailcall/
[02:13:51] <fread2281> vermeille: because 0.7 is the feature push, so we can be more stable
[02:14:22] <vermeille> Where can I find infos about 0.7 ? (features, release date, etc)
[02:14:41] <cmr> vermeille: https://github.com/mozilla/rust/issues/milestones
[02:15:16] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Client exited)
[02:15:44] *** Joins: Thad (chatzilla@moz-C35F90AE.tx.res.rr.com)
[02:16:33] <Thad> brson: still can't build Rust with latest trunk against i686-pc-mingw32.  YES, this is a regression, where previously could build.
[02:16:50] <cmr> Thad: does the compile fail quickly?
[02:17:02] <Thad> RustWraper.o  Error
[02:17:20] <cmr> You could use "git bisect" to pinpoint the error.
[02:17:21] <Thad> Created an issue on it.
[02:18:16] <cmr> http://code-worrier.com/blog/git-bisect-basics/
[02:18:45] <cmr> vermeille: I wouldn't worry though; the performance regressions are mainly unoptimized new features.
[02:19:18] <vermeille> =D
[02:19:30] <vermeille> Rust can really be the C++ of the future <3
[02:19:43] <brson> Thad: did you see this comment https://github.com/mozilla/rust/issues/6382#issuecomment-17719775
[02:19:44] <cmr> pcwalton: speaking of, did the GC actually land or did you hold off on it?
[02:20:44] <Thad> brson: oh no.. ok.. so... -Werror ??
[02:21:32] <Thad> is that within "make" context ?  such as "make -Werror" ?  seems weird.
[02:23:11] <cmr> Thad: It's a compiler flag
[02:23:17] <brson> Thad: if you build with VERBOSE=1 you should see the command line for compiling RustWrapper.cpp. There's probably an argument there like -Werror. jdm is suggesting to remove that flag
[02:23:17] <cmr> Treats all warnings as errors.
[02:23:18] <fread2281> Thad: yes, but disable it. you may have to fin the makefile that if for that wile and remove -Werror
[02:23:45] <Thad> ah REMOVE  the -Werror ?
[02:23:46] * fread2281 english fail
[02:23:47] *** Quits: enix (enix@FAA903B0.6F2C2084.FBEE305F.IP) (Ping timeout)
[02:23:50] <fread2281> Thad: yep
[02:24:03] <Thad> gotchas... I'll look for it guys... thanks !
[02:24:24] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[02:24:24] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14c0547d6 to 147d81c80: 02http://git.io/N3iJvQ
[02:24:24] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[02:25:31] <fread2281> Thad: messy hack that may not work is make CFLAGS="-Wno-error"
[02:25:50] <fread2281> or rather CPPFLAGS
[02:26:35] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[02:26:54] <Thad> fread2281: didn't work.
[02:28:26] <vermeille> Is mozilla looking for interns ?
[02:32:06] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[02:33:05] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[02:33:06] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[02:33:35] <brson> vermeille: mozilla usually employs a lot of interns over the summer, but those interviews happen feb-march
[02:33:40] *** Quits: cstrahan (cstrahan@moz-F976BC85.hsd1.va.comcast.net) (Ping timeout)
[02:33:44] *** Joins: cstrahan (cstrahan@moz-F976BC85.hsd1.va.comcast.net)
[02:35:03] <vermeille> Well, I already have my internship at Facebook, but I'm thinking for next year
[02:37:49] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[02:37:49] <brson> yichoi: does RUST_LOG work on android?
[02:38:00] *** Joins: enix (enix@FAA903B0.6F2C2084.FBEE305F.IP)
[02:38:41] *** Quits: lmandel (lmandel@FE1F74.86ED00A7.971E19F6.IP) (Quit: lmandel)
[02:40:12] <yichoi> brson: I have not tested yet
[02:40:40] <Thad> fread2281: it's in platform.mk ..... CFG_GCCISH_CFLAGS_i686-pc-mingw32 := -Wall -Werror -g -march=i686
[02:41:12] *** Quits: brson (brson@2557E599.66715431.D25A875A.IP) (Quit: leaving)
[02:41:21] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[02:42:11] *** Quits: bent (chatzilla@moz-932324BF.hsd1.ca.comcast.net) (Quit: ChatZilla 0.9.90-rdmsoft [XULRunner 18.0.2/20130201065344])
[02:42:26] *** Quits: Flibo (Flibo@moz-40397852.org.aalto.fi) (Ping timeout)
[02:43:14] *** Quits: raze (raze@moz-4E6675AF.bredband.comhem.se) (Ping timeout)
[02:43:14] *** Quits: BitPuffin (quassel@moz-8370D1B9.bredband.comhem.se) (Ping timeout)
[02:43:18] *** Quits: rsaarelm (rsaarelm@moz-D1CB7158.dhcp.inet.fi) (Ping timeout)
[02:43:57] *** Joins: raze (raze@moz-4E6675AF.bredband.comhem.se)
[02:44:01] *** Joins: BitPuffin (quassel@moz-8370D1B9.bredband.comhem.se)
[02:44:34] *** Joins: victorporof (victorporo@CA0EF1E0.A58E0E41.6A4F8DA2.IP)
[02:45:53] *** Joins: Flibo (Flibo@moz-40397852.org.aalto.fi)
[02:46:23] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[02:46:43] *** Quits: victorporof (victorporo@CA0EF1E0.A58E0E41.6A4F8DA2.IP) (Ping timeout)
[02:48:25] *** Joins: lmandel (lmandel@FE1F74.86ED00A7.971E19F6.IP)
[02:48:42] *** Joins: rsaarelm (rsaarelm@moz-D1CB7158.dhcp.inet.fi)
[02:50:25] *** Quits: lmandel (lmandel@FE1F74.86ED00A7.971E19F6.IP) (Quit: lmandel)
[02:54:46] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[02:56:09] *** Joins: lmandel (lmandel@FE1F74.86ED00A7.971E19F6.IP)
[02:56:21] *** Quits: zz_kimundi (kimundi@moz-341A8002.dip0.t-ipconnect.de) (Ping timeout)
[02:57:23] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[02:57:23] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 148af9419 to 147d81c80: 02http://git.io/N3iJvQ
[02:57:23] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[02:57:24] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[02:57:24] <ghrust> 01[13rust01] 15bors pushed 7 new commits to 06auto: 02http://git.io/nLsFjA
[02:57:24] <ghrust> 13rust/06auto 149f7faeb 15Alex Crichton: rustpkg: Remove #[allow(vecs_implicitly_copyable)]
[02:57:24] <ghrust> 13rust/06auto 1485c5df8 15Alex Crichton: compiletest: Remove #[allow(vecs_implicitly_copyable)]
[02:57:24] <ghrust> 13rust/06auto 14db5b083 15Alex Crichton: syntax: Remove #[allow(vecs_implicitly_copyable)]
[02:57:27] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[02:59:27] <pcwalton> cmr: graydon is working on the GC
[02:59:32] <cmr> oh
[02:59:34] <cmr> whoops
[02:59:36] *** Joins: zz_kimundi (kimundi@moz-EAE9DA5A.dip0.t-ipconnect.de)
[03:00:02] *** zz_kimundi is now known as kimundi
[03:00:07] <pcwalton> nmatsakis: I had an interesting idea for fn/trait that I would like to discuss tomorrow
[03:00:21] <pcwalton> it's pretty exciting to me
[03:00:24] <pcwalton> if it works
[03:04:03] *** Quits: cstrahan (cstrahan@moz-F976BC85.hsd1.va.comcast.net) (Ping timeout)
[03:05:59] *** Joins: cstrahan (cstrahan@moz-F976BC85.hsd1.va.comcast.net)
[03:07:24] *** Quits: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net) (Ping timeout)
[03:07:49] *** Quits: cstrahan (cstrahan@moz-F976BC85.hsd1.va.comcast.net) (Ping timeout)
[03:09:21] <vermeille> .
[03:09:33] <vermeille> I have vector.rs and main.rs
[03:10:03] <vermeille> I just want, in main.rs, something like "import * from vector"
[03:10:11] <cmr> use vector::*;
[03:10:31] <cmr> You need a "mod vector;" first, though.
[03:11:37] <vermeille> Error: use and and extern mod must precede items
[03:11:47] <cmr> drop 'em at the top of the file
[03:11:55] <vermeille> There already are.
[03:12:16] <vermeille> line 1: mod vector; line 2: use vector::*;
[03:12:22] <dbaupp> vermeille: other way around
[03:12:30] <cmr> my bad :(
[03:12:32] <dbaupp> (strange, but that's how it is)
[03:12:42] <cmr> that is really strange, and very counterintuitive.
[03:12:55] <cmr> you'd expect to not be able to import from vector until you've declared that you're pulling it in.
[03:12:56] <vermeille> wtf
[03:13:01] <vermeille> It works, but wtf
[03:13:18] <dbaupp> cmr: it's to do with making name resolution more sensible (for the compiler)
[03:13:29] <cmr> Why is "mod foo;" treated differently than "extern mod foo;" ?
[03:14:08] <dbaupp> cmr: yup, but definitions aren't examined top-to-bottom in one pass like C
[03:14:12] <vermeille> thanks dbaupp :)
[03:14:14] <dbaupp> cmr: not exactly sure
[03:14:32] *** Joins: catpigger (catpig@moz-D807334F.dip0.t-ipconnect.de)
[03:14:46] <dbaupp> vermeille: np
[03:15:38] *** Quits: catpig (catpig@moz-6C02F391.dip0.t-ipconnect.de) (Ping timeout)
[03:15:57] <vermeille> After playing with Rust, I'll seriously consider contribuing :)
[03:16:22] <cmr> I couldn't not contribute... too many rough edges, but low-hanging edges.
[03:18:56] *** Quits: solancile (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net) (Ping timeout)
[03:19:02] *** Quits: BitPuffin (quassel@moz-8370D1B9.bredband.comhem.se) (Client exited)
[03:22:32] <aatch> cmr, same, then I got sucked into the more interesting sidelines
[03:23:03] <aatch> So I have implemented a parallel deque for use in the scheduler
[03:23:20] <cmr> lock-free?
[03:23:31] <aatch> cmr, and wait-free
[03:23:39] <cmr> (isn't that what lock-free means?)
[03:23:42] <cmr> <3
[03:23:43] <cmr> that's pretty great
[03:24:08] <aatch> cmr, nope. Lock-free means no locks, wait-free means that you don't wait.
[03:24:38] <aatch> Many lock-free algorithms aren't actually wait-free
[03:25:03] <aatch> since you often end up with busy loops while another thread does something
[03:25:17] <cmr> I was unaware that they were separate. I'm only nominally familiar with them.
[03:25:27] <aatch> cmr, it's a subtle difference
[03:25:33] <aatch> and it doesn't come up often
[03:26:21] <jld> e.g., compare-and-set loops are not wait-free, because there's no guarantee that one thread/CPU/whatever won't wind up always being beaten by another and never making progress.
[03:27:13] <aatch> jld, exactly. wait-free algorithms often allow threads to "help" each other if they can't immediately do the work they want to
[03:27:27] <aatch> but that understandably raises the complexity
[03:28:20] <jld> What's really "fun" are spinlocks that do backoff on how often they try to take the lock -- that way the CPU that's been waiting longest is the least likely to get the lock.
[03:28:30] <Diablo-D3> jld: yeah but
[03:28:43] <Diablo-D3> the better method is to not have locks at all
[03:28:51] <Diablo-D3> and use explicit ownership passing
[03:28:54] *** Quits: lmandel (lmandel@FE1F74.86ED00A7.971E19F6.IP) (Quit: lmandel)
[03:29:12] <jld> aatch: Yeah; sort of like incremental GC, I guess.
[03:29:13] <Diablo-D3> or, basically, erlang actors.
[03:29:13] <Thad> cmr: The build ended with /bin/rust.dll  ... there's no "BUILD COMPLETE" at the end ?
[03:29:31] <cmr> Thad: no, there is not.
[03:29:47] <aatch> Diablo-D3, that's not always the most efficient way though
[03:29:51] <Thad> cmr: That's shameful...hide under the covers.
[03:29:56] <Thad> :)
[03:30:04] <Diablo-D3> aatch: trying to manually do synchronization never works well
[03:30:10] <cmr> Thad: The build is done when make returns, without spitting out errors :p
[03:30:16] <Diablo-D3> computers are asynchronous by nature
[03:30:22] <Diablo-D3> you're better off playing to those strengths
[03:30:22] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[03:30:22] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 149f3b437 to 147d81c80: 02http://git.io/N3iJvQ
[03:30:22] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[03:30:24] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[03:30:24] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/2LEilQ
[03:30:24] <ghrust> 13rust/06auto 14d0da21d 15Brian Anderson: Upgrade libuv
[03:30:24] <ghrust> 13rust/06auto 1462640f5 15bors: auto merge of #6456 : brson/rust/libuv, r=brson...
[03:30:24] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[03:30:27] <Thad> cmr: I know your better than that... I just know you are.
[03:30:50] <cmr> I try to stay away from build systems, they get hairy, fast.
[03:30:52] <Thad> cmr: besides...it's really hard to even SEE the errors sometimes.
[03:30:56] * jld grumbles about make(1) implementations that don't clearly communicate failure -- like GNU
[03:31:12] <cmr> Thad: That is true.
[03:32:08] <Thad> hmm... so -Werror is not really needed for i686-pc-mingw32 ???
[03:32:45] <cmr> Thad: in general it's not strictly needed *ever*. it turns warnings into errors, so you can't ignore them (without turning of -Werror, that is)
[03:34:06] <jld> And it's kind of a bad idea unless you know in advance exactly which version of GCC (or compatible compiler) will be used.
[03:34:16] <Thad> cmr: is someone tasked with "fixing" the build warnings (turned into errors) ??
[03:34:33] <jld> Well, approximately which version, at least.
[03:34:38] *** Joins: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP)
[03:34:38] *** Quits: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP) (Z:lined (Open Proxy found on your host. Please visit www.blitzed.org/proxy?ip=115.68.131.49 for more information.))
[03:34:42] <Thad> jld: WHAT is a bad idea ?  can you be more specific ?
[03:34:49] <cmr> Thad: in this case it's really just a warning, from llvm, not something to be fixed, just notifying platform limitations
[03:34:56] <cmr> jld: context: https://github.com/mozilla/rust/issues/6382#issuecomment-17719775
[03:35:10] <jld> Thad: -Werror, because then different people get different sets of warnings-as-errors.
[03:35:28] <jld> Thing is, if you can use -Werror (or equivalent) usefully, it can be really useful.
[03:36:00] <Thad> cmr: so, ideally, the platform "i686-pc-mingw32" should have the appropriate settings, knowing it's limitations... correct ?  In an ideal world.
[03:36:01] *** Joins: solancile (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net)
[03:36:10] <cmr> Thad: In an ideal world, yeah
[03:36:47] <Thad> cmr: so I could hack on the platform.mk file and perhaps tweak it, so that it works better for Windows users... yes?
[03:37:32] <cmr> Thad: Maybe, I don't know. I'm not familiar with whatever it is that llvm is using to report warnings like that
[03:39:18] *** Joins: themgt (themgt@moz-248BBB96.dhcp.gnvl.sc.charter.com)
[03:41:33] *** Joins: inolen1 (Adium@moz-FA2406D8.socal.res.rr.com)
[03:41:42] *** Quits: inolen (Adium@moz-FA2406D8.socal.res.rr.com) (No route to host)
[03:41:59] *** Parts: inolen1 (Adium@moz-FA2406D8.socal.res.rr.com) ()
[03:44:02] <eevee> cmr: yeah
[03:44:04] <eevee> slowly
[03:44:09] <cmr> eevee: in rust?
[03:44:19] <eevee> yes
[03:44:22] <cmr> Is it on github yet? I'm very interested in it.
[03:44:29] <cmr> (for the purpose of star/watching)
[03:44:35] <eevee> https://github.com/eevee/amulet
[03:44:46] <cmr> thanks
[03:44:55] <Thad> cmr: so here's just 1 warning (turned into error) that seems trivial to fix, I would think... http://pastebin.mozilla.org/2402024
[03:45:10] *** Joins: victorporof (victorporo@CA0EF1E0.A58E0E41.6A4F8DA2.IP)
[03:45:31] <cmr> Thad: that's a different warning. -Werror only applies to C/C++ source, not rust. That unused import doesn't matter.
[03:45:55] *** Joins: Sodel_the_V (user@moz-853663E1.va.shawcable.net)
[03:45:59] *** Joins: tibberk (Mibbit@moz-B2B382E7.hsd1.fl.comcast.net)
[03:46:06] <Thad> cmr: so shouldn't someone suppress the "unused import" for .rs files ???
[03:46:58] <cmr> Thad: the warnings are useful to see. people (mostly tjc, it seems) go through every now and then and clean them up.
[03:47:26] *** Quits: victorporof (victorporo@CA0EF1E0.A58E0E41.6A4F8DA2.IP) (Ping timeout)
[03:47:44] <tibberk> quick syntax question
[03:47:47] <Thad> cmr: how would he clean that one up ??
[03:48:03] *** Quits: enix (enix@FAA903B0.6F2C2084.FBEE305F.IP) (Quit: Konversation terminated!)
[03:48:21] <cmr> Thad: by removing target_library_in_workspace from the import
[03:48:48] <Thad> cmr: how did it get there in the first place ?
[03:49:12] <Thad> these are not stupid questions I am asking...I hope.
[03:49:35] <dbaupp> tibberk: fire away
[03:49:37] <cmr> Thad: someone probably removed/refactored some code and it got removed
[03:49:47] <tibberk> does anyone know if it would be possible to replace the |foo| syntax with something like [foo] without complicating the parser
[03:50:02] <tibberk> the "as" thing, I call it, not sure of the name
[03:50:13] <Thad> cmr: and there's no auto cleanup facility, or a "good tool" to help clean that up ?
[03:50:24] <Thad> cmr: it's all Manual Labor and eyeballs ?  incredible.
[03:50:27] <cmr> Thad: not yet, iirc there's an issue open for one.
[03:50:32] <pcwalton> if you're talking about closure syntax, it would not be possible because of the conflict with [] for array indexing
[03:50:44] <dbaupp> tibberk: like `for uint::range(0, 10) [i] { ... }`?
[03:50:56] <tibberk> dbaupp, yeah that
[03:51:02] *** Quits: ysuzuki (ysuzuki@moz-60FA9D06.net119083145.t-com.ne.jp) (Client exited)
[03:51:21] <dbaupp> tibberk: what pcwalton said ^
[03:51:52] <tibberk> ah, right, that function could return an array couldn't it
[03:52:11] <tibberk> alright, sorry, brain fart moment
[03:52:55] * Jesse wonders how the current syntax avoids conflicting with bitwise or
[03:53:05] <pcwalton> Jesse: special "restricted productions" in the grammar
[03:53:13] <pcwalton> but in any case it wouldn't work for [] because of array literals
[03:53:36] <tibberk> yeah, true, [] has enough on its plate i 'spose
[03:53:46] *** Joins: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net)
[03:56:59] <Diablo-D3> http://highscalability.com/blog/2013/5/13/the-secret-to-10-million-concurrent-connections-the-kernel-i.html
[03:57:16] *** Joins: brson (brson@E9CDE21E.991753BB.CA4D1600.IP)
[03:57:16] *** ChanServ sets mode: +o brson
[03:58:07] <Thad> cmr: Thanks for those answers....very helpful... cleared up 2 errors by removing the unused imports.  Nite !
[03:59:17] *** Quits: aatch (aatch@moz-2BB0AC01.cable.telstraclear.net) (Client exited)
[03:59:21] <Thad> cmr: now that the build is actually working, I can't wait to test, build, and fix more errors.  Hopefully, my wiki changes for Windows users make things simple for Windows users.
[03:59:38] <Thad> nite all !
[03:59:49] *** Quits: Thad (chatzilla@moz-C35F90AE.tx.res.rr.com) (Quit: ChatZilla 0.9.90 [Firefox 21.0/20130506154904])
[04:00:05] *** Quits: catpigger (catpig@moz-D807334F.dip0.t-ipconnect.de) (Quit: Verlassend)
[04:00:21] <cmr> Can anyone reproduce a test failure in run-pass/intrinsic-atomics.rs? I get "rustc: /home/cmr/hacking/rust/src/llvm/include/llvm/IR/Instruction.h:437: void llvm::Instruction::setInstructionSubclassData(unsigned short): Assertion `(D & HasMetadataBit) == 0 && "Out of range value put into field"' failed."
[04:00:30] <cmr> this is on latest incoming
[04:00:31] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke. It's all a joke.)
[04:00:39] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[04:01:18] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[04:01:18] *** ChanServ sets mode: +o dherman
[04:02:11] <dbaupp> cmr: what platform?
[04:02:16] <cmr> linux x86_64
[04:02:19] *** Joins: doomlord (doomlod@moz-B4683AA6.range31-52.btcentralplus.com)
[04:02:25] <cmr> With --enable-clang
[04:03:28] *** Quits: dbaupp (Thunderbir@moz-856B3C14.lns20.syd6.internode.on.net) (Input/output error)
[04:03:38] <cmr> (clang 3.2)
[04:05:14] *** Joins: ysuzuki (ysuzuki@moz-3830D141.st.keio.ac.jp)
[04:11:46] *** Quits: bbrittain (ben@moz-632384CB.dr02.roch.ny.frontiernet.net) (Client exited)
[04:12:38] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[04:13:10] <fread2281> can I use the test system to do benchmarks?
[04:13:22] <cmr> fread2281: yup. #[bench] and rustc --bench
[04:13:25] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[04:19:00] *** Quits: solancile (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net) (Quit: Leaving)
[04:19:14] <fread2281> cmr: not 0.6 :S
[04:19:20] <cmr> oh
[04:20:15] *** Quits: themgt (themgt@moz-248BBB96.dhcp.gnvl.sc.charter.com) (Quit: themgt)
[04:22:17] *** Joins: pyrac (pyrac@moz-B95F505.w92-156.abo.wanadoo.fr)
[04:25:17] <fread2281> there should be something like each_split_consume for strings so it consumes it by spliting it into parts to give to your function
[04:26:40] *** Quits: heftig (heftig@moz-6266CC43.dip0.t-ipconnect.de) (Ping timeout)
[04:27:22] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[04:27:22] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/2LEilQ
[04:27:22] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[04:30:25] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[04:30:25] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/6kM-1g
[04:30:25] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[04:31:50] *** Quits: tibberk (Mibbit@moz-B2B382E7.hsd1.fl.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[04:33:22] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[04:33:22] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/6kM-1g
[04:33:22] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[04:33:44] *** Quits: pcwalton (pcwalton@43CB6079.66715431.D25A875A.IP) (Quit: pcwalton)
[04:33:50] *** Joins: heftig (heftig@moz-E2CF292F.dip0.t-ipconnect.de)
[04:39:14] *** Joins: jdm (jdm@DB05BBF2.BB1F48F2.971E19F6.IP)
[04:45:45] *** Joins: victorporof (victorporo@CA0EF1E0.A58E0E41.6A4F8DA2.IP)
[04:47:57] *** Quits: victorporof (victorporo@CA0EF1E0.A58E0E41.6A4F8DA2.IP) (Ping timeout)
[04:48:24] <cmr> r? https://github.com/mozilla/rust/pull/6465
[04:49:38] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[04:51:23] *** Quits: Jesin (Jessin_@moz-5654D37.washdc.fios.verizon.net) (Quit: Leaving)
[04:53:02] *** Joins: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP)
[04:56:41] *** Quits: brson (brson@E9CDE21E.991753BB.CA4D1600.IP) (Quit: leaving)
[04:58:36] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[05:00:39] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[05:05:02] *** Quits: sp3d (a@moz-17CB39F1.fidnet.com) (Ping timeout)
[05:07:44] *** Joins: cdidd (cdidd@moz-EEAFEDB9.broadband.corbina.ru)
[05:08:20] *** Quits: ziad (ziad@moz-5003F925.members.linode.com) (Ping timeout)
[05:08:33] *** Quits: Eridius (kevin@moz-533B0DB4.us) (Ping timeout)
[05:08:33] *** Quits: jclements_ (clements@moz-180CB07A.members.linode.com) (Ping timeout)
[05:08:33] *** Quits: yardena (yardena@moz-A95F12B1.members.linode.com) (Ping timeout)
[05:08:39] *** Quits: olsonjeffery (pf@moz-9E9CF15C.members.linode.com) (Ping timeout)
[05:08:50] *** Quits: BigEndian (hurp@moz-1B6DD81E.members.linode.com) (Ping timeout)
[05:08:50] *** Quits: jld (jld@moz-B94C75AD.xlerb.net) (Ping timeout)
[05:10:36] *** Joins: yardena (yardena@moz-A95F12B1.members.linode.com)
[05:11:08] *** Quits: fairfieldt (fairfieldt@moz-D8998E1C.xen.prgmr.com) (Ping timeout)
[05:11:08] *** Quits: btipling_ (btipling@moz-D51E0AEB.xen.prgmr.com) (Ping timeout)
[05:11:30] *** Joins: ziad (ziad@moz-5003F925.members.linode.com)
[05:12:04] *** Quits: fireglow (fireglow@moz-DC22A4B9.firc.de) (Ping timeout)
[05:12:20] *** Quits: samebchase (samuel@moz-7519FE69.net) (Ping timeout)
[05:12:58] *** Joins: fairfieldt (fairfieldt@moz-D8998E1C.xen.prgmr.com)
[05:13:20] *** Joins: btipling (btipling@moz-D51E0AEB.xen.prgmr.com)
[05:13:32] *** Joins: Eridius (kevin@moz-533B0DB4.us)
[05:14:16] *** Joins: jld (jld@moz-B94C75AD.xlerb.net)
[05:14:45] *** Joins: olsonjeffery (pf@moz-9E9CF15C.members.linode.com)
[05:14:52] *** Quits: ysuzuki (ysuzuki@moz-3830D141.st.keio.ac.jp) (Client exited)
[05:15:21] *** Joins: fireglow (fireglow@moz-DC22A4B9.firc.de)
[05:15:29] *** Joins: samebchase (samuel@moz-7519FE69.net)
[05:16:06] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Quit: ChatZilla 0.9.90 [Firefox 21.0/20130506154904])
[05:16:31] *** Quits: Benvie_ (brandon@5FD20F9A.53D07D95.EFF8B7BF.IP) (Ping timeout)
[05:16:59] *** Joins: Benvie (brandon@5FD20F9A.53D07D95.EFF8B7BF.IP)
[05:17:25] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[05:17:25] *** ChanServ sets mode: +o dherman
[05:19:35] *** Quits: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Ping timeout)
[05:19:41] *** Joins: ysuzuki (ysuzuki@moz-A563888C.ics.keio.ac.jp)
[05:22:22] *** Joins: solancile (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net)
[05:33:23] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[05:33:23] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/eUwnZQ
[05:33:23] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[05:34:10] *** Joins: chadz (chadz@moz-6EE80298.tukw.qwest.net)
[05:35:20] <chadz> alright, i'm a bit stumped with using iter::to_vec to simplify accumulating a ~[~str] from str::each_word
[05:35:32] <chadz> iter::to_vec(|acc| str::each_word(xs, acc))
[05:35:38] <chadz> doesn't seem to do the trick, as i'd expect
[05:41:57] <bjz> chadz: might need abit more info
[05:42:20] *** Joins: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[05:44:54] *** Joins: Arreth (jdhaliwal@32A9DB8F.A037492E.A6C56884.IP)
[05:44:54] *** Quits: Arreth (jdhaliwal@32A9DB8F.A037492E.A6C56884.IP) (Input/output error)
[05:46:24] *** Joins: victorporof (victorporo@CA0EF1E0.A58E0E41.6A4F8DA2.IP)
[05:48:26] *** Quits: victorporof (victorporo@CA0EF1E0.A58E0E41.6A4F8DA2.IP) (Ping timeout)
[05:49:23] *** Quits: IdolfHatler (idolf@moz-4103EACC.pwnies.dk) (Ping timeout)
[05:49:54] *** Joins: IdolfHatler (idolf@moz-4103EACC.pwnies.dk)
[05:50:20] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[05:51:05] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[05:54:21] *** Quits: pyrac (pyrac@moz-B95F505.w92-156.abo.wanadoo.fr) (Quit: pyrac)
[05:57:38] *** Joins: blaphmat (Mibbit@moz-62B62593.protectedgroup.com)
[05:57:46] <blaphmat> "no confies en la roca con la que puedes chocar, apartala del camino por los que vienen atras" bienvenidos: http://castroruben.com *temo_a_un_ser_sin_rival*
[05:57:47] *** Parts: blaphmat (Mibbit@moz-62B62593.protectedgroup.com) ()
[05:59:08] *** Quits: steven_is_false (quassel@moz-144077DE.bchsia.telus.net) (Connection reset by peer)
[06:00:26] *** Quits: ysuzuki (ysuzuki@moz-A563888C.ics.keio.ac.jp) (Ping timeout)
[06:02:13] *** Joins: victorporof (victorporo@CA0EF1E0.A58E0E41.6A4F8DA2.IP)
[06:05:26] *** Joins: ysuzuki (ysuzuki@moz-3830D141.st.keio.ac.jp)
[06:07:51] *** Parts: judder (maradukewa@DABDEEA3.F2C0D0AC.78E362FE.IP) ()
[06:09:14] *** Quits: ysuzuki (ysuzuki@moz-3830D141.st.keio.ac.jp) (Connection reset by peer)
[06:09:22] *** Joins: ysuzuki (ysuzuki@moz-3830D141.st.keio.ac.jp)
[06:18:28] *** Quits: devbug (quassel@moz-E1DE087C.bchsia.telus.net) (Client exited)
[06:22:12] *** Quits: spaceships (spaceships@moz-8323E7E6.msl-mt.client.bresnan.net) (Quit: leaving)
[06:22:20] *** Quits: noam (noam@F6B530A7.720527A7.416762B.IP) (Ping timeout)
[06:28:01] <chadz> bjz: test.rs:9:15: 9:46 error: mismatched types: expected `&<V2>` but found `&fn(&fn(+:&str) -> bool)` (expected &-ptr but found fn)
[06:28:32] <chadz> fn words(xs: &str) -> ~[~str] { iter::to_vec(|acc| str::each_word(xs, acc)) }
[06:33:15] *** Joins: pyrac (pyrac@19E86D0A.73C89388.AD05C589.IP)
[06:33:42] *** Joins: jviereck (Adium@moz-57512FAD.dynamic.hispeed.ch)
[06:39:26] *** Quits: igl (igl@moz-FB7F39.adsl.alicedsl.de) (Quit: Leaving.)
[06:40:26] *** Quits: ysuzuki (ysuzuki@moz-3830D141.st.keio.ac.jp) (Connection reset by peer)
[06:40:33] *** Joins: ysuzuki (ysuzuki@moz-3830D141.st.keio.ac.jp)
[06:45:42] *** Joins: ysuzuki_ (ysuzuki@moz-3830D141.st.keio.ac.jp)
[06:45:42] *** Quits: ysuzuki (ysuzuki@moz-3830D141.st.keio.ac.jp) (Connection reset by peer)
[06:47:30] *** Joins: brendan (brendaneic@35E90EE3.B8B12C49.396B22AD.IP)
[06:50:04] *** Joins: ysuzuki (ysuzuki@moz-3830D141.st.keio.ac.jp)
[06:50:05] *** Quits: ysuzuki_ (ysuzuki@moz-3830D141.st.keio.ac.jp) (Connection reset by peer)
[06:51:48] <bjz> chadz: sorry, I'm not sure
[06:52:05] <bjz> chadz: but that is much more helpful at least
[06:52:22] <bjz> chadz: maybe ask strcat when he gets on
[06:55:17] *** Quits: KindOne (KindOne@moz-2D30BEE8.dynamic.ip.windstream.net) (Ping timeout)
[06:58:31] *** Joins: KindOne (KindOne@moz-2D30BEE8.dynamic.ip.windstream.net)
[06:58:33] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[07:00:08] *** Quits: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Quit: Don't tell them I was here...)
[07:01:22] *** Joins: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[07:02:31] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[07:04:51] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[07:05:32] *** Joins: Axord (xord@moz-C3CCF156.lsanca.dsl-w.verizon.net)
[07:05:38] *** Joins: ysuzuki_ (ysuzuki@moz-F333A8C8.st.keio.ac.jp)
[07:06:37] *** Quits: blitter (blitter@moz-7C98731E.dyn.centurytel.net) (Ping timeout)
[07:06:52] *** Quits: ysuzuki (ysuzuki@moz-3830D141.st.keio.ac.jp) (Ping timeout)
[07:07:01] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[07:07:15] *** Quits: ysuzuki_ (ysuzuki@moz-F333A8C8.st.keio.ac.jp) (Client exited)
[07:07:55] *** Joins: ysuzuki (ysuzuki@moz-3830D141.st.keio.ac.jp)
[07:12:25] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[07:12:25] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/2VMWRQ
[07:12:25] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[07:12:26] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[07:12:26] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/6tspGA
[07:12:26] <ghrust> 13rust/06auto 1419553a8 15Alex Crichton: Get unit tests for rusti working...
[07:12:26] <ghrust> 13rust/06auto 14cdd97a4 15Alex Crichton: Fix `use` statements with rusti
[07:12:27] <ghrust> 13rust/06auto 147cbf81b 15Alex Crichton: Add regression tests for various other rusti issues
[07:12:29] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[07:16:30] *** Joins: bs (bs@moz-AA189A5A.unitymedia.biz)
[07:18:01] *** Quits: Sodel_the_V (user@moz-853663E1.va.shawcable.net) (Input/output error)
[07:18:14] *** Joins: ysuzuki_ (ysuzuki@moz-F333A8C8.st.keio.ac.jp)
[07:19:09] *** Quits: ysuzuki_ (ysuzuki@moz-F333A8C8.st.keio.ac.jp) (Connection reset by peer)
[07:19:17] *** Joins: ysuzuki_ (ysuzuki@moz-F333A8C8.st.keio.ac.jp)
[07:19:31] *** Quits: ysuzuki (ysuzuki@moz-3830D141.st.keio.ac.jp) (Ping timeout)
[07:19:39] *** Quits: victorporof (victorporo@CA0EF1E0.A58E0E41.6A4F8DA2.IP) (Quit: victorporof)
[07:22:15] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[07:31:52] *** Quits: ysuzuki_ (ysuzuki@moz-F333A8C8.st.keio.ac.jp) (Client exited)
[07:33:52] *** Joins: ysuzuki (ysuzuki@moz-3830D141.st.keio.ac.jp)
[07:35:35] *** Joins: berak (chatzilla@D957B8F.3A27401E.16E13E53.IP)
[07:36:26] *** Quits: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Quit: zzzZZZzzz)
[07:38:22] *** Quits: brendan (brendaneic@35E90EE3.B8B12C49.396B22AD.IP) (Ping timeout)
[07:44:40] *** Quits: Flibo (Flibo@moz-40397852.org.aalto.fi) (Ping timeout)
[07:45:36] *** Joins: brendan (brendaneic@35E90EE3.B8B12C49.396B22AD.IP)
[07:46:02] *** Joins: Flibo (Flibo@moz-40397852.org.aalto.fi)
[07:48:27] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[07:48:27] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1499e625c to 143aa1122: 02http://git.io/N3iJvQ
[07:48:27] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[07:48:29] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[07:48:29] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/BJXMEQ
[07:48:29] <ghrust> 13rust/06auto 1466e1e51 15Alex Crichton: Remove re-exports from libcore/core.rc...
[07:48:29] <ghrust> 13rust/06auto 145a2f65f 15bors: auto merge of #6441 : alexcrichton/rust/issue-5531, r=luqmana...
[07:48:30] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[07:48:45] *** Joins: ysuzuki_ (ysuzuki@moz-F333A8C8.st.keio.ac.jp)
[07:48:48] *** Quits: chadz (chadz@moz-6EE80298.tukw.qwest.net) (Ping timeout)
[07:49:47] *** Quits: ysuzuki (ysuzuki@moz-3830D141.st.keio.ac.jp) (Ping timeout)
[07:51:11] *** Quits: brendan (brendaneic@35E90EE3.B8B12C49.396B22AD.IP) (Quit: brendan)
[07:52:00] *** Joins: ysuzuki (ysuzuki@moz-F333A8C8.st.keio.ac.jp)
[07:52:09] *** Quits: ysuzuki_ (ysuzuki@moz-F333A8C8.st.keio.ac.jp) (No route to host)
[07:53:10] *** Joins: donri (dag@moz-9BB61102.tbcn.telia.com)
[07:54:15] *** Joins: otters (joel@moz-82AAB099.rs)
[07:58:02] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[07:59:00] *** Quits: ysuzuki (ysuzuki@moz-F333A8C8.st.keio.ac.jp) (Client exited)
[08:02:16] *** Quits: wuwei`lab (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Ping timeout)
[08:02:18] *** Joins: fabiand (fabiand@moz-25B9B296.adsl.alicedsl.de)
[08:07:13] *** Joins: mib_da4xdv (Mibbit@C481054C.E2A89447.7ECF310D.IP)
[08:07:22] *** Quits: mib_da4xdv (Mibbit@C481054C.E2A89447.7ECF310D.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[08:10:08] *** Joins: Libreofficer (jightuse@5ACC7636.C3AC81A2.906273CD.IP)
[08:10:45] *** Joins: brendan (brendaneic@35E90EE3.B8B12C49.396B22AD.IP)
[08:10:52] <Libreofficer> hi! Just pulled git repo, now cannot compile rust (RustWrapper.cpp)
[08:12:57] *** Quits: jviereck (Adium@moz-57512FAD.dynamic.hispeed.ch) (Ping timeout)
[08:16:08] *** Quits: Libreofficer (jightuse@5ACC7636.C3AC81A2.906273CD.IP) (Ping timeout)
[08:17:47] *** Joins: Libreofficer (jightuse@5ACC7636.C3AC81A2.906273CD.IP)
[08:27:50] *** Joins: CarpNet (ac@moz-FD24B77.sohonet.co.uk)
[08:29:29] *** Quits: otters (joel@moz-82AAB099.rs) (Client exited)
[08:30:01] *** Quits: jdm (jdm@DB05BBF2.BB1F48F2.971E19F6.IP) (Quit: Lost terminal)
[08:31:13] *** Joins: wuwei`lab (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[08:37:33] *** Quits: btipling (btipling@moz-D51E0AEB.xen.prgmr.com) (Ping timeout)
[08:39:52] *** Joins: btipling (btipling@moz-D51E0AEB.xen.prgmr.com)
[08:40:51] *** Joins: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP)
[08:42:27] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[08:42:27] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/BJXMEQ
[08:42:27] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[08:42:34] *** Quits: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP) (Ping timeout)
[08:45:21] *** Joins: snowmantw (snowmantw@moz-F5AE774A.dynamic.hinet.net)
[08:46:42] *** Quits: thou (thou@moz-1C1CA9F7.fasttrackcomm.net) (Input/output error)
[08:48:20] <bjz> strcat: ping
[08:49:06] <kimundi> rusti: 0x1fe as uint
[08:49:54] *** Joins: jviereck (Adium@moz-3EF13DC8.ethz.ch)
[08:52:02] <strcat> bjz: hi
[08:52:11] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:52:17] <strcat> Ralith: 0x1fe as uint
[08:52:19] <strcat> ugh
[08:52:22] <strcat> Ralith: sorry ;p
[08:52:28] <strcat> rusti: 0x1fe as uint
[08:52:30] <rusti> 510
[08:52:40] <bjz> strcat: r? https://github.com/mozilla/rust/pull/6463
[08:53:23] * Ralith tries to come up with a funny reply, fails on account of 2am
[08:53:24] *** Quits: jviereck (Adium@moz-3EF13DC8.ethz.ch) (Quit: Leaving.)
[08:55:10] <kimundi> rusti: 0x1fe as u8
[08:55:11] <rusti> 254
[08:55:30] *** Joins: hmax (hmax@moz-15514FA1.yandex.net)
[08:56:14] <bjz> strcat: cheers
[08:56:17] <kimundi> rusti: let v: u8 = 0x1fe; v
[08:56:18] <rusti> 254
[08:57:22] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[08:57:22] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/a6WB6A
[08:57:22] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[08:59:37] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[09:06:33] *** Joins: davbo (dave@moz-3FFA637C.oucs.ox.ac.uk)
[09:07:33] <kimundi> rusti: do iter::to_vec |push| { str::each_word("foo bar", push) }
[09:07:34] <rusti> ~["foo", "bar"]
[09:09:05] <kimundi> rusti: do iter::to_vec |push| { str::each_word("foo bar", |w| push(w.to_str())) }
[09:09:06] <rusti> ~[~"foo", ~"bar"]
[09:18:55] <kimundi> fread2281: split consume wouldn't work
[09:18:57] *** Joins: LittleQ (littleq@moz-A3C8F472.cs.nccu.edu.tw)
[09:19:41] *** Quits: LittleQ (littleq@moz-A3C8F472.cs.nccu.edu.tw) (Quit: leaving)
[09:19:49] <kimundi> no place for the additional capacity fields
[09:19:53] *** Joins: LittleQ (littleq@moz-A3C8F472.cs.nccu.edu.tw)
[09:19:58] *** Parts: LittleQ (littleq@moz-A3C8F472.cs.nccu.edu.tw) ()
[09:21:31] *** Quits: snowmantw (snowmantw@moz-F5AE774A.dynamic.hinet.net) (Quit: snowmantw)
[09:21:47] *** Joins: snowmantw (snowmantw@moz-F5AE774A.dynamic.hinet.net)
[09:21:56] *** Quits: snowmantw (snowmantw@moz-F5AE774A.dynamic.hinet.net) (Quit: snowmantw)
[09:22:20] *** Joins: LittleQ (littleq@moz-A3C8F472.cs.nccu.edu.tw)
[09:22:28] <LittleQ> test
[09:22:33] *** Joins: snowmantw (snowmantw@moz-F5AE774A.dynamic.hinet.net)
[09:22:37] <LittleQ> test
[09:22:42] <LittleQ> snowmantw: hi
[09:22:50] <snowmantw> LittleQ: hi
[09:22:54] <snowmantw> want to learn rust ?
[09:22:58] <LittleQ> ok
[09:23:12] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.0)
[09:24:01] *** Quits: LittleQ (littleq@moz-A3C8F472.cs.nccu.edu.tw) (Quit: leaving)
[09:29:06] *** Joins: victorporof (victorporo@10AA7997.880C8D58.79933D60.IP)
[09:30:58] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[09:31:57] *** Quits: solancile (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net) (Ping timeout)
[09:37:01] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[09:44:28] *** Quits: Libreofficer (jightuse@5ACC7636.C3AC81A2.906273CD.IP) (Quit: Leaving.)
[09:48:31] *** Quits: brendan (brendaneic@35E90EE3.B8B12C49.396B22AD.IP) (Quit: brendan)
[09:51:57] *** Joins: wilsonk-laptop (kvirc@moz-39EFBFC2.cg.shawcable.net)
[09:52:31] *** Quits: wilsonk|2 (kvirc@moz-39EFBFC2.cg.shawcable.net) (Ping timeout)
[09:57:25] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[09:57:26] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/NTrfDw
[09:57:26] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[09:58:21] *** Quits: berak (chatzilla@D957B8F.3A27401E.16E13E53.IP) (Client exited)
[09:58:57] *** Quits: hansjorg (hansjorg@moz-EECB5F79.static.cust.telenor.com) (Ping timeout)
[10:04:46] *** Joins: hansjorg (hansjorg@moz-EECB5F79.static.cust.telenor.com)
[10:07:02] *** Joins: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP)
[10:09:34] *** Quits: snowmantw (snowmantw@moz-F5AE774A.dynamic.hinet.net) (Client exited)
[10:25:02] *** Joins: vosen (vosen@moz-266BA656.icpnet.pl)
[10:26:23] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[10:30:55] *** Joins: sp3d (a@moz-17CB39F1.fidnet.com)
[10:32:41] *** Joins: jviereck (Adium@moz-6A703F30.ethz.ch)
[10:33:30] *** Quits: jviereck (Adium@moz-6A703F30.ethz.ch) (Quit: Leaving.)
[10:45:22] *** Joins: ysuzuki (ysuzuki@moz-A563888C.ics.keio.ac.jp)
[10:50:41] *** Joins: aatch (James@moz-2BB0AC01.cable.telstraclear.net)
[10:52:07] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[10:57:31] *** Joins: vmx (vmx@moz-10797E84.dip0.t-ipconnect.de)
[11:02:47] *** Joins: tav (tav@moz-A176BEE1.range86-156.btcentralplus.com)
[11:03:48] *** Joins: synapsos (Mibbit@640C6C8D.C434660A.DAB1EB3B.IP)
[11:05:44] *** Joins: afrey (Mibbit@AE48690.2C9B3718.5B998C92.IP)
[11:06:56] <afrey> Hello.
[11:07:24] <afrey> I'm trying to join a vec of strings, but fail on different str storage.
[11:08:16] *** Joins: webber46 (webber46@moz-AC14FDEA.se)
[11:08:32] <afrey> Using str::map(), I get back a ~[~str]. That doesn't go well with str::connect_slices(), which expects &[&str].
[11:10:00] <afrey> So, how do I properly use str::connect_slices(str::map( ... ), " ")?
[11:15:07] <aatch> afrey, if you are making a list of strings, then you can use str::connect in this case
[11:15:36] <aatch> rusti: str::connect(~[~"1", ~"2"], ",")
[11:15:37] <rusti> ~"1,2"
[11:16:54] <afrey> aatch: ah, wow, that was easy. Thanks.
[11:22:08] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[11:24:30] *** Joins: jviereck (Adium@moz-48892D4.ethz.ch)
[11:25:27] *** Joins: EXetoC (ex@moz-C741B177.customer.t3.se)
[11:26:15] *** Quits: jviereck (Adium@moz-48892D4.ethz.ch) (Quit: Leaving.)
[11:26:59] *** Joins: jviereck (Adium@moz-48892D4.ethz.ch)
[11:27:57] <afrey> Another simple question: is there a function that returns a vec of ints from 0 .. x-1, similar to range() in python?
[11:28:13] *** Joins: marijn (user@moz-823EB7FE.dip0.t-ipconnect.de)
[11:28:30] *** Quits: jviereck (Adium@moz-48892D4.ethz.ch) (Quit: Leaving.)
[11:39:43] *** Joins: Esmil (Mibbit@83B8238.6BE5A349.B330AC0A.IP)
[11:43:34] *** Joins: judder (maradukewa@DABDEEA3.F2C0D0AC.78E362FE.IP)
[11:44:03] <cmr> afrey: well, if you just want an iterator you can use uint::range
[11:46:41] <cyndis> if you really want a vector, the iterator can be turned into a vector with: iter::to_vec(|f| uint::range(0,10,f))
[11:47:11] *** Joins: kud1ing (Mibbit@moz-10A07EC6.pools.arcor-ip.net)
[11:47:58] <rsaarelm> rusti: vec::from_fn(8, |i| i)
[11:47:59] <rusti> ~[0, 1, 2, 3, 4, 5, 6, 7]
[11:48:16] <rsaarelm> Seems simple enough.
[11:48:20] <cyndis> i suppose that works too, in this case :)
[11:49:05] <kud1ing> aatch: what are your plans with rust-datetime?
[11:49:12] *** Quits: hmax (hmax@moz-15514FA1.yandex.net) (Connection timed out)
[11:49:25] *** Joins: hmax (hmax@moz-15514FA1.yandex.net)
[11:49:47] <kud1ing> aatch: something like this would be useful
[11:49:48] <cmr> kud1ing: Are you working on rustdoc at all?
[11:50:01] <kud1ing> cmr: rustdoc? no, why?
[11:50:19] <bs> https://github.com/mozilla/rust/pull/6357 -- r?
[11:50:21] <cmr> I saw your name on a few of the issues open about it
[11:50:31] *** bs is now known as doener
[11:50:56] <kud1ing> cmr: only trying to give (helpful) input
[11:51:34] <kud1ing> cmr: did i say something controverse?
[11:51:58] <cmr> kud1ing: no, I was just wondering if anyone was working on the issue or if I could just start working at it
[12:01:06] <cmr> Is there a better way to do https://github.com/cmr/terminfo-rs/blob/master/searcher.rs#L32 ? I feel like .to_owned() everywhere is wrong
[12:01:12] *** Quits: ysuzuki (ysuzuki@moz-A563888C.ics.keio.ac.jp) (Client exited)
[12:01:22] *** Joins: cmr_ (bzlandfill@86DBC01E.79C29BED.C209128E.IP)
[12:02:45] *** Joins: z0w0 (zack@moz-B13FD5D7.lns2.cha.bigpond.net.au)
[12:03:29] *** Quits: cmr_ (bzlandfill@86DBC01E.79C29BED.C209128E.IP) (Quit: CGI:IRC (EOF))
[12:04:00] <kimundi> cmr: what is the signature of push_many?
[12:04:30] <cmr> fn push_many(&self, &[~str]) -> Self
[12:04:46] <kimundi> then the to_owned is necessary, sadly
[12:05:03] <kimundi> but you can change &[...] to [...] at least
[12:05:35] <cmr> I had done that initially but it complained that it wanted a &[~str] but it got a [~str, ..2]
[12:06:05] <kimundi> ah, okay. 
[12:07:28] <kud1ing> cmr: thanks by the way for the resolve warning improvements
[12:07:52] <kud1ing> s/warning/error messages/
[12:08:05] <cmr> kud1ing: np. I think the most recent PR covers the last of them
[12:08:45] <kud1ing> improve usability quite a lot
[12:08:48] *** Joins: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com)
[12:10:56] *** Quits: kud1ing (Mibbit@moz-10A07EC6.pools.arcor-ip.net) (Quit: http://www.mibbit.com ajax IRC Client)
[12:14:36] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Ping timeout)
[12:15:49] *** Quits: aatch (James@moz-2BB0AC01.cable.telstraclear.net) (Quit: Leaving)
[12:16:36] <afrey> cmr, cyndis: thanks a lot, useful input!
[12:18:01] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[12:18:20] *** Joins: an0nymous (an0nymous@moz-A6B0CE4.tx.res.rr.com)
[12:18:56] *** Joins: jviereck (Adium@moz-D4794E0C.ethz.ch)
[12:20:48] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[12:25:05] *** Joins: dbaupp (Thunderbir@moz-856B3C14.lns20.syd6.internode.on.net)
[12:33:16] <bstrie> acrichto: do you think it's safe to approve your vecs_implicitly_copyable PR?
[12:33:26] <bstrie> I heard something about a race condition in the test suite...
[12:34:58] <bstrie> eh, let's give it a try
[12:36:03] <bstrie> oh dammit, I overlooked doener's pull request AGAIN ;_;
[12:36:11] <bstrie> I really want to get that landed
[12:36:26] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[12:36:26] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/OOh7sw
[12:36:26] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[12:36:27] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[12:36:27] <ghrust> 01[13rust01] 15bors pushed 7 new commits to 06auto: 02http://git.io/avjYsg
[12:36:27] <ghrust> 13rust/06auto 14692e632 15Alex Crichton: rustpkg: Remove #[allow(vecs_implicitly_copyable)]
[12:36:27] <ghrust> 13rust/06auto 145fbb642 15Alex Crichton: compiletest: Remove #[allow(vecs_implicitly_copyable)]
[12:36:28] <ghrust> 13rust/06auto 14c7c4cd0 15Alex Crichton: syntax: Remove #[allow(vecs_implicitly_copyable)]
[12:36:29] <bstrie> I really want to get both of these landed
[12:36:30] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[12:37:22] <doener> bstrie: I'll try to get it rebased asap after that PR finished
[12:37:28] *** Quits: jviereck (Adium@moz-D4794E0C.ethz.ch) (Quit: Leaving.)
[12:37:29] <bstrie> thanks for your patience
[12:37:51] <bstrie> I'm sad that these have bounced so many times
[12:38:13] <doener> bstrie: btw, any idea why the tests failed yesterday? Seems like pcwalton's PR failed for the same reason earlier, and I don't understand what happened
[12:38:29] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[12:38:35] <bstrie> I think they were saying something about an intermittent race condition in the test suite...
[12:38:47] <doener> ah
[12:38:47] <bstrie> so clearing any given pull is like playing the lottery
[12:39:11] <bstrie> in other words, hopeless :)
[12:42:46] *** Joins: berak (chatzilla@2F32033.5E545589.16E13E53.IP)
[12:44:43] *** Quits: wuwei`lab (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Input/output error)
[12:45:53] <nmatsakis> bstrie: which PR? 
[12:46:46] <bstrie> nmatsakis: doener's PR is here: https://github.com/mozilla/rust/pull/6357
[12:46:54] *** Quits: dbaupp (Thunderbir@moz-856B3C14.lns20.syd6.internode.on.net) (Quit: dbaupp)
[12:47:03] <bstrie> one of those big, touch-everything-and-collide-with-everyone commits :)
[12:47:19] <bstrie> but acrichto's is also one of those
[12:47:29] <bstrie> (the one currently running)
[12:47:31] <nmatsakis> bstrie: ah
[12:56:22] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[12:56:33] *** Joins: dbaupp (Thunderbir@moz-856B3C14.lns20.syd6.internode.on.net)
[13:01:31] *** Quits: marijn (user@moz-823EB7FE.dip0.t-ipconnect.de) (Ping timeout)
[13:02:13] *** Joins: marijn (user@moz-BC7A8ADD.dip0.t-ipconnect.de)
[13:02:20] *** Joins: jlembeck_ (jlembeck@moz-E5A16406.hsd1.wa.comcast.net)
[13:03:31] *** Quits: MX80 (MX80@moz-32BE33CD.dsl.g3telecom.net) (Ping timeout)
[13:03:40] *** Quits: jlembeck (jlembeck@moz-E5A16406.hsd1.wa.comcast.net) (Ping timeout)
[13:06:17] *** Joins: MX80 (MX80@moz-32BE33CD.dsl.g3telecom.net)
[13:10:41] *** Joins: leal (user@moz-76C139F2.public.wayport.net)
[13:11:22] <leal> morning
[13:13:21] <leal> Anyone know why I can't compile this line:
[13:13:24] <leal> use ascii::Ascii;
[13:14:19] <bstrie> hmm
[13:14:19] <cyndis> use core::ascii::Ascii;
[13:14:23] <bstrie> that's it
[13:14:35] <bstrie> gotta fully-qualify the name
[13:15:02] <EXetoC> not core::str::ascii::Ascii?
[13:15:09] <leal> use_ascii.rs:1:4: 1:23 error: unresolved name
[13:15:10] <leal> use_ascii.rs:1 use core::ascii::Ascii;
[13:15:10] <leal>  
[13:15:26] *** Joins: cmr_ (bzlandfill@86DBC01E.79C29BED.C209128E.IP)
[13:15:30] <EXetoC> libcore/str/ascii.rs
[13:15:45] <dbaupp> bjz: ping
[13:15:51] <bstrie> I'm seeing a top-level ascii module
[13:15:59] <leal> ascii::Ascii is in prelude.rs.  Should i even have to use a use decl?
[13:16:05] <bjz> dbaupp: bong
[13:16:15] <dbaupp> bjz: https://github.com/mozilla/rust/pull/6471 opinion?
[13:16:24] <dbaupp> (re Integer vs Num bound)
[13:16:41] <EXetoC> leal: you shouldn't have to then
[13:17:01] <bstrie> leal: "use core::ascii::Ascii;" works for me, what version of rust do you have?
[13:17:33] <bstrie> it's possible that ascii doesn't exist in 0.6
[13:17:41] <leal> 0.6
[13:18:01] <dbaupp> leal: yes, it was added after 0.6
[13:18:25] <bstrie> nmatsakis: is there a way for me to see which test caused bors to fail?
[13:18:35] <leal> ahh.. I have the dev tree, but i haven't built it in a long time
[13:18:39] <leal> thanks
[13:18:53] <bstrie> doener: the last PR bounced, so let's roll the dice and give yours a try I suppose...
[13:18:56] <dbaupp> bstrie: you can look at the log
[13:19:04] <bstrie> where's the log?
[13:19:13] <dbaupp> give me a sec
[13:19:28] <dbaupp> bstrie: the last one was http://buildbot.rust-lang.org/builders/auto-linux/builds/1242/steps/test/logs/stdio
[13:19:52] * doener fingers crossed
[13:20:03] <nmatsakis> bstrie: clicking through at th elog, yeah
[13:20:06] <dbaupp> the failure is at end of the steps & logfiles section of http://buildbot.rust-lang.org/builders/auto-linux/builds/1242
[13:20:08] <bstrie> ok, thanks
[13:20:15] *** Joins: ysuzuki (ysuzuki@moz-60FA9D06.net119083145.t-com.ne.jp)
[13:20:25] *** Joins: BitPuffin (quassel@moz-8370D1B9.bredband.comhem.se)
[13:20:34] <dbaupp> (that's what bors links to on failure/success, btw)
[13:20:49] *** Joins: cstrahan (cstrahan@moz-4C7E5789.hsd1.dc.comcast.net)
[13:20:57] *** Joins: maxli (maxli@F2D29657.F60B0462.67AC9B1.IP)
[13:21:04] <bjz> dbaupp: interesting
[13:21:07] *** Quits: maxli (maxli@F2D29657.F60B0462.67AC9B1.IP) (Connection reset by peer)
[13:21:08] *** Joins: maxli (maxli@F2D29657.F60B0462.67AC9B1.IP)
[13:22:14] <bstrie> dbaupp: ah, I see that now
[13:23:35] *** Quits: dbaupp (Thunderbir@moz-856B3C14.lns20.syd6.internode.on.net) (Quit: dbaupp)
[13:23:39] *** Joins: dbaupp (Thunderbir@moz-856B3C14.lns20.syd6.internode.on.net)
[13:24:38] *** Quits: leal (user@moz-76C139F2.public.wayport.net) (Ping timeout)
[13:25:26] <nmatsakis> bstrie: I'm curious to hear your thoughts on http://smallcultfollowing.com/babysteps/blog/2013/05/14/procedures/
[13:25:34] <nmatsakis> bstrie: you're my new "ick factor" barometer:)
[13:25:59] <nmatsakis> argh, I messed up the links again.
[13:27:26] *** Joins: akashj87 (akash@B72FDAD2.373F35FC.35E3DDC8.IP)
[13:27:42] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[13:27:42] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1478313b4 to 1484745b4: 02http://git.io/N3iJvQ
[13:27:42] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[13:27:44] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[13:27:45] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/LrMB-g
[13:27:45] <ghrust> 13rust/06auto 147b5340b 15Bjrn Steinbrink: Use static string with fail!() and remove fail!(fmt!())...
[13:27:45] <ghrust> 13rust/06auto 142edde95 15Marvin Lbel: Fix cosmetics for fail!() calls
[13:27:45] <ghrust> 13rust/06auto 14d97081e 15bors: auto merge of #6357 : dotdash/rust/fixfmt, r=bstrie...
[13:27:46] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[13:30:08] *** Quits: victorporof (victorporo@10AA7997.880C8D58.79933D60.IP) (Quit: victorporof)
[13:30:16] <marijn> nmatsakis: hey
[13:30:21] <marijn> nmatsakis: do I understand correctly that the whole codebase has been converted to the 'never hearing aliasable mutable' scheme now? does it work well in practice?
[13:30:33] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[13:30:52] <marijn> (i mean mostly the mutability-handling part)
[13:31:09] <nmatsakis> marijn: yes, it has, and it seems to work well for rustc anyhow
[13:31:45] <nmatsakis> marijn: I am not sure how complete the transition is for servo yet, that'd be an important data point
[13:32:19] <marijn> nmatsakis: that's good to hear
[13:32:52] <nmatsakis> marijn: yeah, it's been a long slog. But I'm happy with the general approach, it seems to open up a lot of power (i.e., returning pointers into hashtables, etc)
[13:33:21] <nmatsakis> marijn: there is this issue with closures that we are working out, hopefully this won't invalidate much code (I don't really expect it to)
[13:33:58] <marijn> nmatsakis: indeed. i spent a lot of energy trying to find a solution for the pointer-returning thing, but didn't hit on anything as elegant
[13:34:57] <nmatsakis> marijn: I'm glad you like it. I've sometimes wondered "what does marijn think of rust now?" :)
[13:35:38] <nmatsakis> marijn: I think there is still work to do in porting rustc to use the system to its maximum advantage
[13:35:46] <marijn> nmatsakis: i'm somewhat behind on how things work, but i read the list and your blog, so i have a general idea. i like where it's going
[13:35:48] <nmatsakis> marijn: as always, it's written in a blend of 75% old features, 25% new... :)
[13:36:11] <marijn> nmatsakis: (though things like the fn~ issue do make me shake my head and sympathise with the people who have to sort it out)
[13:36:25] <dbaupp> nmatsakis: I think you opened a PR to master
[13:36:30] <nmatsakis> dbaupp: argh, probably.
[13:36:54] <nmatsakis> marijn: yeah, I think that's not the right approach yet
[13:37:33] <fread2281> how can I compare tuples?
[13:37:53] <dbaupp> fread2281: what sort of comparison?
[13:38:07] <fread2281> dbaupp: equals
[13:38:25] <dbaupp> fread2281: tuple1 == tuple2 should work
[13:38:43] <marijn> nmatsakis: at some point there was talk about mutability being done with ML-like refs. was it you or pcwalton who suggested that? (or was it before your time altogether?) do you remeber why it was abandoned? (i think the current thing is right for Rust, but am debating refs vs what Rust used to do for my own lang)
[13:39:28] <fread2281> dbaupp: whops, I meant enums, how can I compare enums?
[13:39:30] <nmatsakis> marijn: yeah, we've gone back and forth on that. I think the discussion in question was probably before my time
[13:40:08] <dbaupp> fread2281: oh, one you defined yourself: e.g. enum Foo { Foo(int), Bar(~str) } ?
[13:40:11] <nmatsakis> marijn: I think refs work well if you want to push a mostly functional style; I really like how clojure uses them
[13:40:49] <nmatsakis> marijn: though interestingly our current system, in a way, allows for deeper freezing, since in ML anyhow a ref never stops being mutable
[13:40:54] <marijn> nmatsakis: i'm worried about A) syntactic noise from creating and dereferencing them, and B) compiling them efficiently
[13:40:57] <dbaupp> fread2281: you can use #[deriving(Eq)] enum Foo { ... }
[13:41:21] <marijn> nmatsakis: yes, having some sane way to express a frozen type is also a concern. Do you happen to know of any interesting literature in this space?
[13:41:30] <dbaupp> fread2281: or implement Eq for Foo by hand, if you want a non-trivial equality implementation
[13:42:44] <fread2281> dbaupp: ok, can I do greater than with that?
[13:43:10] <dbaupp> fread2281: the ordering traits come from the Ord trait
[13:43:19] *** Joins: akashj87_ (akash@EF327481.6A9BF87A.35E3DDC8.IP)
[13:43:26] <dbaupp> fread2281: and that can be derived too #[deriving(Eq,Ord)] enum Foo { ... }
[13:43:26] <bstrie> nmatsakis: reading now
[13:43:31] <bstrie> marijn: hello!
[13:43:37] <marijn> bstrie: hi!
[13:43:43] <bstrie> finally lured back to rust I see :)
[13:43:50] *** Quits: akashj87 (akash@B72FDAD2.373F35FC.35E3DDC8.IP) (Ping timeout)
[13:43:50] <nmatsakis> marijn: there is lots of work, naturally, that opens up similar capabilities, though with various trade-offs in explicitness of the types and so forth. I'd say ownership type systems, permission-based and fractional-permission-based type systems, typestate, all related somehow.
[13:44:00] <nmatsakis> marijn: I'm not sure if there's a "canonical" paper on the topic
[13:44:10] <nmatsakis> marijn: also this work on @ReadOnly annotations in Java
[13:44:16] <nmatsakis> marijn: and D's immutable annotations
[13:44:20] *** Joins: akashj87 (akash@E41482B.46EB02D4.35E3DDC8.IP)
[13:44:45] <dbaupp> fread2281: https://github.com/mozilla/rust/blob/incoming/doc/rust.md#deriving
[13:45:09] *** Quits: cstrahan (cstrahan@moz-4C7E5789.hsd1.dc.comcast.net) (Quit: leaving)
[13:45:11] *** Quits: akashj87_ (akash@EF327481.6A9BF87A.35E3DDC8.IP) (Ping timeout)
[13:45:11] <nmatsakis> marijn: to be honest I think Rust is kind of pushing new ground in this area, though not in a deep way---I mean I think similar ideas exist elsewhere, but I feel like they work out simpler in Rust 
[13:46:17] *** Quits: heftig (heftig@moz-E2CF292F.dip0.t-ipconnect.de) (Quit: Quitting)
[13:46:35] <nmatsakis> marijn: actually now that I think about it, the 'inherited mutability' stuff in Rust is very similar to the way clojure/ml approach the problem of pushing the mutablity out to the ref at the outermost level
[13:47:03] <nmatsakis> that seems to be a common theme
[13:47:36] *** Joins: akashj87_ (akash@CF9E2736.CC3AFE9E.35E3DDC8.IP)
[13:47:37] *** Joins: heftig (heftig@moz-E2CF292F.dip0.t-ipconnect.de)
[13:47:42] <marijn> nmatsakis: i should look into clojure then. it seems to me that it only works in rust because of value ownership. i don't see how to do it in a GC-heavy language (which is also what my own project looks like)
[13:47:55] *** Quits: akashj87 (akash@E41482B.46EB02D4.35E3DDC8.IP) (Ping timeout)
[13:48:46] <nmatsakis> marijn: the main trick with clojure is just using a ref to a persistent, immutable data structure
[13:49:11] *** Joins: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP)
[13:49:11] *** Quits: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP) (Z:lined (Open Proxy found on your host. Please visit www.blitzed.org/proxy?ip=115.68.131.49 for more information.))
[13:49:26] <nmatsakis> they don't freeze, except by convention
[13:49:47] <nmatsakis> (convention being: don't embed refs in your data structures)
[13:50:31] <nmatsakis> but if you think of @mut being kind of like a ref, it works out similarly in Rust, though Rust then lets you mutate in place vs constructing a whole new value
[13:50:55] <marijn> nmatsakis: i see. that might actually go a long way. one use case I think is important is building up a data structure in a crude, mutating way, then freezing it. (and doing that safely)
[13:51:16] <nmatsakis> marijn: right. so clojure doesn't permit that.
[13:51:48] <nmatsakis> marijn: the tricky part of this, I think, is defining what belongs to the data structure and what doesn't
[13:51:53] <nmatsakis> marijn: this is where ownership comes in
[13:52:17] <nmatsakis> marijn: because presumably you want that freeze to be very cheap and to affect all the allocated values at once
[13:52:18] <marijn> nmatsakis: yes. in a 'convenient' language where things are implicitly pointers, this makes the problem super-hairy
[13:52:31] <nmatsakis> marijn: precisely...
[13:52:41] <nmatsakis> marijn: so all the approaches I know of wind up with some sort of ownership.
[13:52:41] *** Quits: cmr_ (bzlandfill@86DBC01E.79C29BED.C209128E.IP) (Quit: CGI:IRC (EOF))
[13:54:00] <marijn> nmatsakis: maybe 'just copy the damn thing' is often a valid solution. though you'd still need a way on the type level to express frozen and mutable variants without repeating the whole type
[13:54:49] <nmatsakis> marijn: right, or else enforce dynamically (but then you make your writes expensive)
[13:55:11] <nmatsakis> (though not necessarily very expensive)
[13:55:36] <marijn> nmatsakis: i *will* have a concept of side-effect-free functions and blocks that will make it easy to prove that values don't escape in some circumstances
[13:55:38] * nmatsakis so grateful `rm -rf .*` doesn't follow `..`
[13:55:47] <bstrie> nmatsakis: if `spawn` took a proc instead of a closure, would you have to write `do spawn proc() { ... }` ?
[13:56:03] <nmatsakis> bstrie: yes, in fact I write that precise example somewhere :) (though I omitted the `()`)
[13:56:11] <bstrie> ah yes
[13:56:40] <nmatsakis> bstrie: conceivably we could allow you to omit the proc, but I'd kind of rather write it to keep the distinction between by-ref/copying clear
[13:56:41] <marijn> nmatsakis: i did that on my home dir last week. not everything was backed up. sometimes i don't like unix
[13:57:08] <nmatsakis> marijn: indeed.
[13:58:20] <nmatsakis> marijn: I've also thought about a system where you allocate a "memory region" (which is itself an object) explicitly, and then you can allocate other objects in that region. you could then freeze the *region*
[13:58:30] <nmatsakis> marijn: the idea here would not be to use the region to replace GC,
[13:58:38] <nmatsakis> marijn: just as a way to express ownership
[13:58:54] <nmatsakis> marijn: but usually when I toy with this idea, I wind up thinking...well, why not just allow an object, when created, to specify an owner object
[13:59:02] <nmatsakis> marijn: no need for the "regions" per se
[13:59:30] <nmatsakis> one problem is that you wind up having to pass in the "owner" for the thing you are creating...
[13:59:36] <nmatsakis> ...or use a dynamically scoped variable or something
[13:59:50] <nmatsakis> you wind up with DPS
[14:00:01] <marijn> nmatsakis: the type system also has to know about this, which seems to be where it gets really involved
[14:00:15] <nmatsakis> marijn: yeah I guess I was thinking more for a dynamically typed language
[14:00:29] *** Quits: dbaupp (Thunderbir@moz-856B3C14.lns20.syd6.internode.on.net) (Quit: dbaupp)
[14:00:45] <marijn> nmatsakis: and have writes check some meta-info on the values? eww
[14:01:06] <nmatsakis> marijn: yes, exactly, writes would check that the object is writeable...
[14:01:28] <nmatsakis> marijn: as for the type system aspect: I think that in practice, you either need to copy the thing or have uniqueness, because otherwise you wind up with the problem of aliases
[14:03:24] *** Quits: z0w0 (zack@moz-B13FD5D7.lns2.cha.bigpond.net.au) (Ping timeout)
[14:03:52] <marijn> nmatsakis: yep. proving that something is 'deeply unique' is hard
[14:04:36] *** Joins: lmandel (lmandel@F2D29657.F60B0462.67AC9B1.IP)
[14:04:40] <marijn> nmatsakis: though, for freezing, proving that the code that created it A) didn't have access to any mutable values, and B) didn't let anything but the value you're freezing escape seems to be sufficient
[14:05:48] *** Joins: dbaupp (Thunderbir@moz-856B3C14.lns20.syd6.internode.on.net)
[14:05:52] *** Quits: heftig (heftig@moz-E2CF292F.dip0.t-ipconnect.de) (Quit: Quitting)
[14:05:56] <nmatsakis> marijn: yes, actually that paper at SPLASH from last year used a similar trick
[14:06:33] <nmatsakis> marijn: http://dl.acm.org/citation.cfm?id=2384619
[14:07:11] <nmatsakis> marijn: worth a read ...
[14:08:03] *** Joins: heftig (heftig@moz-E2CF292F.dip0.t-ipconnect.de)
[14:08:03] <bstrie> nmatsakis: wrt `spawn` specifically, what if it always moved its closed-over values instead of copying them, and required an explicit clone outside the closure if you wanted to refer to that variable somewhere else?
[14:08:23] <nmatsakis> bstrie: that's basically what it does today
[14:08:31] <nmatsakis> bstrie: I guess I should have been more specific
[14:08:49] <nmatsakis> bstrie: let me go rewrite "for clarity"
[14:08:59] <bstrie> but before today I honestly had no idea that `let b = 1; do spawn { error!(b) } error!(b);` would work
[14:09:11] <bstrie> I expected it to give me a "can't refer to moved value" error
[14:10:05] *** Joins: Blub\w (wry@moz-8158920C.wireless.dyn.drei.com)
[14:10:05] <marijn> nmatsakis: thanks. looks good. any other halfway relevant links or author names are welcome -- if the papers stink, they'll probably still have useful references. i haven't been able to find much so far
[14:10:25] <bstrie> I'm thinking of how SharedChan works here, and how it forces you to clone it every time you want to send it to a new task
[14:10:27] <nmatsakis> bstrie: well, it only works for ints
[14:10:32] <bstrie> ah ok
[14:10:34] *** Joins: lkuper (lkuper@moz-D6AAFF3.cs.indiana.edu)
[14:10:39] <nmatsakis> bstrie: or rather, it only works for types that implicitly copyable
[14:10:44] *** Joins: cmr_ (bzlandfill@86DBC01E.79C29BED.C209128E.IP)
[14:11:11] <nmatsakis> bstrie: that is, types with no `~`, no dtors, etc
[14:11:28] *** Joins: jdm (jdm@DB05BBF2.BB1F48F2.971E19F6.IP)
[14:11:34] *** Joins: saml (sam@moz-14C16814.cst.lightpath.net)
[14:11:48] <nmatsakis> bstrie: basically I had planned to preserve the current semantics. it's pretty annoying if you have to "clone" an int :)
[14:11:50] <doener> :-(
[14:11:54] <bstrie> nmatsakis: also, in your one example, I'm confused as to why `each` would take a once fn... unless you only ever want to use it with vectors that have only one element. am I misunderstanding once?
[14:12:06] <nmatsakis> bstrie: note that this was each on Option
[14:12:12] <bstrie> ah ok
[14:12:22] <bstrie> right, so I'm just blind :)
[14:12:25] <nmatsakis> bstrie: the each on vectors did not take a `once` function
[14:12:31] <nmatsakis> no, it's subtle, I should add a note on that too :)
[14:13:19] *** Quits: cmr_ (bzlandfill@86DBC01E.79C29BED.C209128E.IP) (Quit: CGI:IRC (EOF))
[14:13:55] <bstrie> nmatsakis: so I'm torn in my opinion, because it seems like once again it feels like the "right" thing to do, and yet it penalizes common cases... a purity vs practicality thing
[14:13:58] *** Joins: spaceships (spaceships@moz-8323E7E6.msl-mt.client.bresnan.net)
[14:14:36] <nmatsakis> bstrie: what is penalized?
[14:14:48] <bstrie> `do spawn proc {}`, and presumably futures as well
[14:14:59] <nmatsakis> ok, that didn't seem like a penalty to me.
[14:15:07] <acrichto> bstrie: thanks for the r+ last night, I think I must have clobbered my own changes at some point because that already bounced on bors for the same reason... It should be ready to go again though :)
[14:15:22] <bstrie> I mean, clearly I didn't understand how spawn was operating either, so maybe it would be good to be explicit here :)
[14:15:28] *** Quits: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP) (Ping timeout)
[14:15:29] <marijn> great, research.microsoft.com is either down or throttling my ip
[14:16:11] <nmatsakis> bstrie: I imagine futures would like like `Future(proc expr)` vs `Future(|| expr)`
[14:16:27] <bstrie> nmatsakis: but the other penalties are 1) another keyword, 2) hatred from the anti-ruby community for having multiple closure types, 3) hatred from the ruby community for almost having enough closure types...
[14:17:18] <bstrie> and it still doesn't *really* cut down on the menagerie that is the full closure type syntax
[14:17:34] <bstrie> closures are hard :)
[14:17:42] <nmatsakis> yeah, they are a pain.
[14:17:54] *** Quits: akashj87_ (akash@CF9E2736.CC3AFE9E.35E3DDC8.IP) (Quit: Leaving)
[14:17:58] <nmatsakis> another thought I had was making `proc` implicitly "once" 
[14:18:00] <bstrie> another question: are generic types allowed in closure types?
[14:18:06] <nmatsakis> then the common cases are: fn(T) -> U
[14:18:10] <nmatsakis> and ~proc(T) -> U
[14:18:21] <nmatsakis> and if we made proc implicitly use ~, then the common cases are fn(T) -> U and proc(T) -> U
[14:18:24] <nmatsakis> which I think is pretty slim
[14:18:36] <bstrie> @once proc:`r Sized+Owned<T:Copy>(a: T)->T
[14:18:45] <nmatsakis> bstrie: no, you can't write something like that.
[14:18:49] <bstrie> ok :)
[14:19:04] <nmatsakis> bstrie: though you could have proc<'r>(a: &'a T) -> &'a uint
[14:19:05] <cmr> dear lord is that dense
[14:19:24] <nmatsakis> bstrie: just lifetime names though. but good point I forgot about those :)
[14:19:51] *** Joins: smvv (sander@moz-BAEA8EB2.dynamic.upc.nl)
[14:20:01] *** Quits: dbaupp (Thunderbir@moz-856B3C14.lns20.syd6.internode.on.net) (Ping timeout)
[14:20:26] * nmatsakis edits
[14:20:42] *** Joins: victorporof (victorporo@10AA7997.880C8D58.79933D60.IP)
[14:22:19] *** Joins: jviereck (Adium@moz-49E7455D.ethz.ch)
[14:23:49] <doener> hm, could I miss errors from "make check" if I run that with -j32? I'm wondering why I saw success here, but bors failed.
[14:24:51] <cmr> You shouldn't. It prints an error summary at the end.
[14:26:12] <smvv> hi. I've two questions about mutability in rust (see also: https://gist.github.com/smvv/5571416): 1) What is the best way to fix "assigning to immutable field", where the field ("out") is part of a struct ("Env"). 2) Why is "copy" needed to print "env.out"? (i'm not sure if this "fixes" the problem, but it makes the compiler silent)
[14:27:17] <cmr> smvv: for 1 you want &mut self
[14:27:28] <bstrie> nmatsakis: so currently a function that takes a `fn` can accept both closures and item-level functions, would a function that takes a `proc` rather than `fn` also be able to take item-level functions?
[14:27:37] *** Quits: jviereck (Adium@moz-49E7455D.ethz.ch) (Quit: Leaving.)
[14:28:11] <nmatsakis> bstrie: ah, that is a good question---there is no reason why we can't make it work, but I hadn't thought hard about it
[14:28:24] <bstrie> doener: here's the error log: http://buildbot.rust-lang.org/builders/auto-linux/builds/1243/steps/test/logs/stdio
[14:28:26] *** Quits: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP) (Ping timeout)
[14:29:06] <cmr> nmatsakis: the only thing in your posts I firmly understand and agree with is " In particular I think that the current collection of closure types is addressing too many distinct use cases and the result is confusing." ;)
[14:29:17] <nmatsakis> cmr: :)
[14:29:41] <smvv> cmr: that's what I did in the second file. However that requires to add "mut" to all borrowed pointer of "Env" as well. Because I get "error: illegal borrow: creating mutable alias to dereference of immutable @ pointer" without the "@mut Env"
[14:30:00] <nmatsakis> smvv: what version of the compiler are you using?
[14:30:05] <smvv> 0.6
[14:30:10] <nmatsakis> smvv: you will want to update to incoming.
[14:30:20] <nmatsakis> smvv: in particular you should not get this error.
[14:30:40] *** Quits: Blub\w (wry@moz-8158920C.wireless.dyn.drei.com) (Ping timeout)
[14:30:51] <smvv> ok, good to know. I'll try it with the new version
[14:31:25] <doener> bstrie: saw that, seems to be the same error I had on yesterday's first try. I just don't get how I managed to reintroduced that bug after running the test suite
[14:32:03] <bstrie> doener: what platform are you testing on locally?
[14:32:15] <doener> linux, debian sid
[14:32:18] <bstrie> hmm
[14:32:33] <bstrie> I'm going to pull your branch and poke at it myself
[14:32:37] *** Joins: rgrinberg (rgrinberg@AE999E95.52DE4C60.258AD6F5.IP)
[14:32:52] <doener> running the test suite again here
[14:33:10] <nmatsakis> bstrie: anyway, thanks for the feedback. :)
[14:33:24] *** Joins: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP)
[14:33:33] <doener> it it looks like it should fail, i just didn't do that here, twice
[14:33:35] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[14:34:37] <bstrie> doener: I noticed that I had to update a git submodule when pulling your branch, which seems weird
[14:34:42] <bstrie> maybe that's just on my end
[14:35:25] *** Joins: infynyxx (infynyxx@580CA641.B5A086DD.4E529FF6.IP)
[14:35:27] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[14:35:55] <doener> libuv? That's a commit from brson from 12h ago
[14:36:03] <doener> ok, failed here this time
[14:36:33] *** Joins: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP)
[14:36:46] <bstrie> nmatsakis: I'm still thinking about it, and I think it's better than postfix-sigils. but actually right now, if this is blocking the DST proposal, I think the best solution is the quick-and-dirty &mut fn for now, if only because that seems the least invasive change
[14:36:47] <doener> guess the summaries are independent and some long test suite pushed the error out of my scrollback
[14:38:13] <bstrie> nmatsakis: though I do think procs vs fns might be a net win in the end. I just think right now it's more important to get DST in
[14:38:55] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[14:39:17] *** Quits: infynyxx (infynyxx@580CA641.B5A086DD.4E529FF6.IP) (Client exited)
[14:39:31] *** Joins: Sodel_the_V (user@moz-853663E1.va.shawcable.net)
[14:39:46] <bstrie> doener: I'll compile as well and help in the bug hunting, I want to get *something* landed before pcwalton gets to the office :)
[14:40:14] <nmatsakis> bstrie: well, yeah, those are two distinct questions I guess
[14:40:17] <doener> bstrie: I fixed the ref/copy thing again
[14:40:19] *** Joins: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com)
[14:40:21] <nmatsakis> bstrie: we'll see what comes out of the meeting
[14:40:52] *** Quits: webber46 (webber46@moz-AC14FDEA.se) (Quit: webber46)
[14:40:53] <nmatsakis> bstrie: but I'm starting to feel pretty strongly that the current closure type must be split into multiple types, though not necessarily fn/proc precisely as I described them
[14:41:01] <bstrie> I agree
[14:41:15] <bstrie> I concur with the sentiment that it's just trying to do too much
[14:41:20] *** Quits: jlembeck_ (jlembeck@moz-E5A16406.hsd1.wa.comcast.net) (Client exited)
[14:41:40] *** Joins: jlembeck (jlembeck@moz-E5A16406.hsd1.wa.comcast.net)
[14:41:46] *** Quits: Esmil (Mibbit@83B8238.6BE5A349.B330AC0A.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:41:50] <friggle> it's unfortunate
[14:42:03] <friggle> it gives the impression of more complexity, even if that's not actually the case
[14:44:21] <bjz> nmatsakis: sorry if this is too hard to explain in this space, but what would the difference between fn and proc be?
[14:44:35] <bjz> I had a bit of trouble following the blog post
[14:45:01] <bstrie> bjz: procs copy their environment, closures reference their environment
[14:45:17] <nmatsakis> bjz: what bstrie said
[14:45:30] <bjz> what do we do now?
[14:45:35] <bstrie> infer what to do
[14:45:41] <nmatsakis> bjz: well, we have the same division now, but the tpyes are all called `fn`
[14:45:44] <nmatsakis> and yes, we infer
[14:45:48] <bjz> ahh
[14:45:50] <nmatsakis> so `@fn` and `~fn` are basically procs
[14:45:55] <nmatsakis> and `&fn` is basically what I called a closure
[14:46:02] <nmatsakis> except that an `@fn` can be borrowed to an `&fn`
[14:46:02] <bstrie> and &fn is also a proc sometimes
[14:46:05] *** Joins: Blub\w (wry@moz-81C24917.wireless.dyn.drei.com)
[14:46:05] <nmatsakis> so the division is sort of imprecise
[14:46:14] <bjz> when would I want to be using a proc?
[14:46:20] <nmatsakis> basically if you are spawning a task
[14:46:42] * nmatsakis toyed with the name `taskfn`
[14:46:43] <bjz> and usually a fn anywhere else?
[14:46:49] <bjz> I like proc
[14:47:03] <cmr> is there a name for the null pointer in libc:: somewhere?
[14:47:08] <nmatsakis> bjz: right, though I guess one other use case I hadn't thought about is the case of storing `@fn` callbacks
[14:47:18] <nmatsakis> bjz: which I recall you were doing at some pont or another
[14:47:25] <bjz> nmatsakis: I was!
[14:47:26] <nmatsakis> bjz: in that case you would want a proc as well
[14:47:37] <bjz> nmatsakis: that sort of makes sense
[14:47:42] <nmatsakis> bjz: (or perhaps another approach, i.e. with traits)
[14:47:53] <bjz> nmatsakis: from the little I know, I like fn/proc
[14:47:56] <cmr> oh, ptr::null()
[14:47:58] <bstrie> cmr: I'm sure there is
[14:48:02] <bstrie> ah, there it is :P
[14:48:14] <nmatsakis> bjz: ok, cool.
[14:48:17] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Client exited)
[14:48:28] <cmr> nmatsakis: I agree with bjz, but my opinion isn't very informed
[14:48:30] <bjz> nmatsakis: it seems simpler than moving around sigils confusingly
[14:48:39] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[14:48:52] <nmatsakis> yeah, I'm definitely anti-post-sigil
[14:49:05] <bstrie> I'm still a little sad at `do spawn proc {`, only because I'm really happy with do spawn :P
[14:49:11] <nmatsakis> even though I sort of proposed it yesterday :)
[14:49:24] <bstrie> maybe it's for the best
[14:49:33] <bjz> nmatsakis: ^?
[14:49:37] <nmatsakis> bstrie: so, we ... could allow you to to write "do spawn {", particularly in the case of no parameters
[14:49:51] <nmatsakis> I was just pushing for more explicit
[14:49:58] <bstrie> yeah
[14:50:10] <bjz> dang
[14:50:15] <bstrie> I'm really on the fence there... on the one hand prettiness, on the other hand explicitness
[14:50:18] <nmatsakis> I'd like it if the vertical bars always meant 'by ref closure' (i.e., `|| ...`)
[14:50:26] <nmatsakis> but in that case there are no vertical bars :)
[14:50:27] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[14:50:58] <nmatsakis> bjz: sorry, I didn't quite get what you were asking
[14:51:14] <bstrie> I'm reading up on procs/blocks/lambdas in ruby now to see if I can glean any inspiration
[14:51:37] <bjz> nmatsakis: I was asking you to confirm what bstrie was saying - sorry
[14:51:39] <bstrie> nmatsakis: maybe we could use a different argument delimeter for procs... instead of ||, we could use ? :)
[14:51:46] <bjz> ha
[14:51:55] <bjz> || ||
[14:52:14] * bjz kids
[14:52:34] <bjz> parser ambiguities ftw
[14:52:54] <bstrie> damn whoever decided to only put THREE matched delimiters on a standard qwerty keyboard :)
[14:53:07] <nmatsakis> you can hear them now: "who'd ever want more than 3?"
[14:53:46] <bstrie> well four, I guess, but then damn mathematicians for deciding to use matched delimeters as infix operators :P
[14:53:59] <nmatsakis> I want those little french quotes.
[14:54:12] <bstrie> yes, we'll have to standardize on azerty
[14:54:13] <nmatsakis> I could have typed them easily back when I was using a mac. On linux...who knows.
[14:54:33] <bjz> [| |] {| |} (| |) ?
[14:54:40] <bjz> :P
[14:54:53] <bstrie> bjz: that'll just make pcwalton's conceal file mandatory
[14:55:04] <bstrie> vim: the only text editor capable of reading rust code
[14:55:52] <bstrie> how about `\a, b\ { ... }`, that looks only marginally hideous
[14:57:13] *** Joins: jviereck (Adium@moz-DC3D0EEB.ethz.ch)
[14:57:18] *** Joins: infynyxx (infynyxx@580CA641.B5A086DD.4E529FF6.IP)
[14:58:21] *** Quits: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP) (Ping timeout)
[14:58:23] <friggle> a lambda: \(a,b) a+b
[14:58:42] *** Joins: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP)
[14:59:06] <bstrie> friggle: yes, that can be our third closure type :)
[14:59:17] <bstrie> procs, lambdas, and fns
[14:59:25] <bstrie> then rubyists will surely swoon
[14:59:42] <friggle> I think you need at least `function`, `fun` and `fn`, all with slightly different semantics
[15:00:57] *** Quits: infynyxx (infynyxx@580CA641.B5A086DD.4E529FF6.IP) (Client exited)
[15:01:58] <ssbr> it is OK for rust to not be ocaml :(
[15:03:14] *** Joins: infynyxx (infynyxx@580CA641.B5A086DD.4E529FF6.IP)
[15:05:06] <bstrie> doener: want me to try again?
[15:05:13] <bstrie> or are you still running make check yourself
[15:05:51] <doener> bstrie: still running, at rustctest now
[15:06:06] <doener> running with -j1 this time, just to make sure....
[15:06:30] <bstrie> haha, yeah
[15:06:38] <bstrie> I never run the test suite in parallel any more, it's too spooky
[15:06:39] *** Quits: infynyxx (infynyxx@580CA641.B5A086DD.4E529FF6.IP) (Client exited)
[15:07:07] <doener> it's just so sad to have 7 cores idling while waiting :-/
[15:07:21] <bstrie> yeah, I'd love to fix that
[15:08:06] <bstrie> in college my thesis advisor was a specialist in test suite optimization, and I can only imagine his attitude towards this :P
[15:08:37] <doener> all passed
[15:09:06] <bstrie> once more into the breach
[15:09:40] <doener> good thing the next ones I've been piling up won't be as large...
[15:10:10] <friggle> I'm actually liking the proc/fn proposal more and more
[15:10:43] <nmatsakis> does anyone know if sanxiyn is generally around? (I see he's not online atm)
[15:11:03] <bstrie> it's probably early morning in korea
[15:12:42] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[15:12:42] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14d97081e to 1484745b4: 02http://git.io/N3iJvQ
[15:12:42] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[15:12:45] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[15:12:45] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/b_jKEQ
[15:12:45] <ghrust> 13rust/06auto 14bdc182c 15Bjrn Steinbrink: Use static string with fail!() and remove fail!(fmt!())...
[15:12:45] <ghrust> 13rust/06auto 1404de8f8 15Marvin Lbel: Fix cosmetics for fail!() calls
[15:12:45] <ghrust> 13rust/06auto 1427c228f 15bors: auto merge of #6357 : dotdash/rust/fixfmt, r=bstrie...
[15:12:45] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[15:12:47] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[15:12:56] <bstrie> so many umlauts
[15:13:57] <bstrie>  /nick bstri  ->  bstri Erroneous Nickname: Illegal characters  ->  :(
[15:18:18] *** Joins: thatfreakingguy (Mibbit@moz-9DC26ABC.pool.mediaways.net)
[15:19:40] <thatfreakingguy> Is there a way to use unions from C code?
[15:19:48] *** Quits: lerc (quassel@121.75.155.67) (Ping timeout)
[15:19:53] <bstrie> thatfreakingguy: not at the moment, to my knowledge
[15:19:58] <jdm> thatfreakingguy: not in any automatic way right now
[15:20:03] <bstrie> neither unions nor varargs
[15:20:47] *** Joins: thatfreakingguy2 (Mibbit@moz-9B57E929.pool.mediaways.net)
[15:20:50] <jdm> you can create a struct containing the largest type and make sure it's got the same alignment, and I think that will work
[15:21:00] <jdm> and then do lots of unsafe casting
[15:21:12] <thatfreakingguy2> Oh boy
[15:21:15] <thatfreakingguy2> Thanks though
[15:24:43] *** Quits: thatfreakingguy (Mibbit@moz-9DC26ABC.pool.mediaways.net) (Quit: http://www.mibbit.com ajax IRC Client)
[15:27:43] *** Joins: gfan (bzlandfill@37E020AF.15F2CAE9.AE5E6562.IP)
[15:28:23] *** Joins: webber46 (webber46@moz-F6310FF0.lha.sgsnet.se)
[15:30:03] *** Quits: marijn (user@moz-BC7A8ADD.dip0.t-ipconnect.de) (Ping timeout)
[15:33:14] *** Quits: gfan (bzlandfill@37E020AF.15F2CAE9.AE5E6562.IP) (Quit: CGI:IRC (Ping timeout))
[15:33:16] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[15:33:21] <bstrie> nmatsakis: I guess ruby does the same thing, where they require an extra bit of syntax to get a lambda or a proc
[15:33:32] <bstrie> `lambda` or `Proc.new`
[15:34:09] <nmatsakis> bstrie: I don't know ruby well enough to compare...
[15:34:24] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[15:34:26] <bstrie> I'm reading http://www.robertsosinski.com/2008/12/21/understanding-ruby-blocks-procs-and-lambdas/
[15:34:29] <friggle> I don't think it's a good comparison to Ruby
[15:34:38] <bstrie> right, I'm not saying it's a good semantic analogy
[15:34:48] <bstrie> I'm just looking at syntax and what people might be accustomed to
[15:35:11] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[15:35:19] <nmatsakis> bstrie: ah, another argument in favor of procs that just occurred to me...we can allow `return` inside a proc to just return from the procedure
[15:35:28] *** Joins: gfan (bzlandfill@37E020AF.15F2CAE9.AE5E6562.IP)
[15:35:35] <nmatsakis> bstrie: without (hopefully) any confusion between returning from the enclosing fn item vs the inner lambda
[15:35:39] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[15:35:56] * nmatsakis shrugs
[15:35:59] <bstrie> hmm
[15:36:02] <nmatsakis> though how important that is I do no tknow
[15:36:04] <nmatsakis> *not know
[15:36:10] <nmatsakis> most non-trivial task bodies ought to be pulled into a fn anyhow
[15:36:21] *** Quits: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com) (Client exited)
[15:36:40] <bstrie> you mean a proc :P
[15:36:53] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[15:37:01] <nmatsakis> fn item
[15:37:19] <bstrie> then you can't close over anything
[15:37:24] <nmatsakis> well, you pass arguments.
[15:37:36] <nmatsakis> that is, I would say that most task spawns ought to be short
[15:37:41] <nmatsakis> and mostly consist of calling a big fn that does the real work
[15:37:50] <bstrie> hm, yeah
[15:38:07] <gfan>  Hi, what does <&'static [u8]> in self.align_to::<&'static [u8]>()? what does 'a or &'a mean? what does inner: *TyDesc mean? is * here meant to be a unsafe C-ptr?
[15:38:24] <nmatsakis> gfan: 'foo is a lifetime name
[15:38:26] <bstrie> I sometimes wonder whether `do spawn` really occurs much in practice... I think, personally, I'd almost always rather use a future
[15:38:37] <nmatsakis> gfan: in this case, 'static---the lifetime of things that are statically allocated at compile in the binary
[15:38:45] <nmatsakis> gfan: *T is an unsafe C pointer
[15:38:53] <nmatsakis> bstrie: yes, I wonder the same thing.
[15:39:05] <nmatsakis> bstrie: it seems like something that is more for tutorials than actual code :)
[15:39:16] <gfan> thanks nmasakis
[15:40:23] <bstrie> well, actually, you use futures via `use std::future::spawn; do spawn {`
[15:40:31] <bstrie> so it's sort of a moot point syntacticallty
[15:41:18] *** Joins: infynyxx (infynyxx@580CA641.B5A086DD.4E529FF6.IP)
[15:43:05] *** Quits: synapsos (Mibbit@640C6C8D.C434660A.DAB1EB3B.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[15:45:06] *** Quits: gfan (bzlandfill@37E020AF.15F2CAE9.AE5E6562.IP) (Quit: CGI:IRC (EOF))
[15:47:02] <nmatsakis> I'm not sure how I feel about "//!" comments.
[15:47:09] <nmatsakis> I think I prefer "/*! ... */"
[15:47:30] *** Quits: thatfreakingguy2 (Mibbit@moz-9B57E929.pool.mediaways.net) (Quit: http://www.mibbit.com ajax IRC Client)
[15:47:58] <bstrie> I prefer just /** ... */ and desperately want to get rid of the distinction between inner and outer doc comments :)
[15:47:59] *** Joins: tjc (tjc@A5087023.2354C43D.D8E68FF6.IP)
[15:47:59] *** ChanServ sets mode: +o tjc
[15:48:52] <erickt> nmatsakis: reading through your fn/proc proposal, so `|x, y| ` cannot be inferred to a proc? Did you say why that syntax couldn't be shared between fns and procs?
[15:50:06] <nmatsakis> erickt: I do not *want* to infer it to a proc
[15:50:08] <nmatsakis> erickt: it could be.
[15:50:16] <erickt> why not?
[15:50:24] <nmatsakis> erickt: I just think it's confusing the way it is --- at least I get confused
[15:50:45] <nmatsakis> erickt: praticularly in the compiler, where we still make legacy use of @fn
[15:50:53] <nmatsakis> erickt: I see error messages about copies and think "huh?"
[15:50:56] <heftig> nmatsakis: "procedure" sounds weird to me. makes me think of pascal procedures, which do not have a return type
[15:51:10] <nmatsakis> heftig: true, it carries some baggage.
[15:51:39] <nmatsakis> erickt: I guess in general I'd like to make the distinction between "shares environment" and "does not share" clear
[15:52:01] <bstrie> or ruby procs, which are... macros?? but the keyword can be bikeshedded later
[15:52:05] <nmatsakis> erickt: though this is not crucial.
[15:52:39] <heftig> bstrie: ruby procs are just closures
[15:52:44] <nmatsakis> erickt: maybe it's a moot point in a bright and shiny future in which people don't use @fn
[15:52:56] <erickt> :)
[15:53:19] <nmatsakis> erickt: since with tasks it's usually...fairly clear from context what's going on, though I think with futures that might be less true.
[15:53:20] <bstrie> heftig: "Procs in Ruby are drop in code snippets, not methods." ... 
[15:53:39] <heftig> bstrie: trust me, they're closures :p
[15:53:47] <nmatsakis> heftig: closures that can return values :)
[15:54:17] <bstrie> that return from their enclosing scope, rather
[15:54:50] <nmatsakis> I was referring more to the fact that procedures are not always unit as they are in pascall
[15:54:53] <nmatsakis> *pascal
[15:55:01] <heftig> bstrie: that's just a detail of how the keywords work
[15:55:04] <erickt> nmatsakis: how do procs differ from `once fn`s?
[15:55:22] <heftig> erickt: copy environment instead of stack reference
[15:55:42] <bstrie> nmatsakis: in the interest of reducing the amount of explanation required to differentiate closures and procs, I think I'd prefer it if the `return` keyword restriction in closures was also present in procs, even if that's strictly not necessary
[15:55:51] <erickt> but you can also move values in a `once fn`
[15:55:57] <erickt> heftig: ^
[15:56:16] <nmatsakis> erickt: yes, but you can also reference values without movin them
[15:56:29] <nmatsakis> erickt: and conceptually you are moving out of the enclosing stack frame, not the closure's environment
[15:56:53] <nmatsakis> erickt: whereas in a proc you cannot reference a value without copying it into the proc's environment
[15:57:19] <nmatsakis> bstrie: yeah, maybe that makes sense.
[15:57:21] <erickt> nmatsakis: what happens with ~T types? Are those copied or moved?
[15:57:49] <nmatsakis> erickt: same rules as any place else, meaning ~T is moved but POD types are copied
[15:58:00] <nmatsakis> erickt: i.e., int, (int, int), etc
[15:58:15] <nmatsakis> erickt: (those are the same rules that ~fn uses today, for example)
[15:58:46] <nmatsakis> erickt: changing to proc is more a matter of terminology than anything else: what we have today with `~fn` and `@fn` is basically exactly what `~proc` and `@proc` would be
[15:59:10] <heftig> and I read that @fn is uninteresting?
[15:59:15] <erickt> nmatsakis: how do you express a proc that cannot take a @T, as in with spawn?
[15:59:20] <nmatsakis> erickt: (in any case, I think pcwalton had some ideas he wanted to talk about too, so who knows, this is still just a sketch of a sol'n, not something we have all agreed to)
[15:59:30] <nmatsakis> heftig: I consider it uninteresting :)
[15:59:41] *** Joins: jclements (jclements@2557E599.66715431.D25A875A.IP)
[15:59:45] <bstrie> heftig: apparently there's a use where you might want to store a closure as a callback, or something
[16:00:04] <heftig> what would @fn let you do that ~fn won't?
[16:00:08] <nmatsakis> erickt: well, there is some question as to what the defaults ought to be. the fully explicit way would be `proc:Owned`, but I was thinking that `Owned` should probably be the default as well
[16:00:13] *** Joins: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[16:00:26] <nmatsakis> heftig: today an @fn can close over task-local data, and a `~fn` cannot
[16:00:39] <tjc> nmatsakis: are you in the CYA room yet?
[16:00:44] <tjc> we're trying new and exciting vidyo frontiers
[16:00:45] <nmatsakis> tjc: yes, but maybe the wrong one?
[16:00:54] <tjc> nmatsakis: heh, maybe we're in the wrong one
[16:01:07] <nmatsakis> tjc: I already forgot which one we want, but I thought it was "CYA" and not "MTV...CYA"
[16:01:14] <tjc> yeah I think you're right
[16:01:16] <nmatsakis> tjc: but nobody else is here, so maybe I am wrong :)
[16:01:34] <jclements> we're all late...
[16:01:39] <tjc> nmatsakis: no, I think you're right, we were in MTV-CYA and no one else was
[16:01:40] <jclements> joining now...
[16:01:42] <bstrie> re: vidyo: http://quotes.burntelectrons.org/6909
[16:02:02] <jclements> I think for now you want just plain old CYA, while the room is getting fixed.
[16:02:07] <kimundi> nmatsakis: While I agree that 'references env' and 'copies out of env' should probably be clearer, and that current closures can have to many modifiers tacked on, I also think that seperate syntax for them would be partially more confusing and make it seem more complex :(
[16:02:16] <jld> ++ that quote
[16:02:33] <tjc> bstrie: that's a good quote
[16:03:56] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[16:03:56] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/b_jKEQ
[16:03:56] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[16:04:13] *** Joins: azita (Azita@2557E599.66715431.D25A875A.IP)
[16:04:29] <erickt> nmatsakis: I'm also a little worried of people writing higher order functions that could work with procs/fns, but don't because how people write them. I'd hate for us to have to write two versions of the same function for two different function types. I don't fully understand the unsoundness issue with &fn so maybe once it'll make sense
[16:04:51] *** Quits: webber46 (webber46@moz-F6310FF0.lha.sgsnet.se) (Connection reset by peer)
[16:05:42] <bstrie> yeah, I share erickt's worry about generality
[16:05:43] <erickt> nmatsakis: Other than spawn, are there any other uses for these procs? If not, another option is to move spawn out of a library and into the language
[16:06:01] <bstrie> erickt: anything built on top of spawn
[16:06:03] <bstrie> like futures
[16:06:37] * erickt shakes his fist at futures
[16:06:54] <nmatsakis> erickt: I think you would ... just write for fn
[16:07:06] <nmatsakis> erickt: if you want to use it with a proc, then write "higherorder(|| my_proc())
[16:07:29] <tjc> is there an etherpad?
[16:07:45] <jclements> https://etherpad.mozilla.org/Meeting-weekly-2013-05-14
[16:07:55] <tjc> thx
[16:08:06] *** Joins: brson (brson@2557E599.66715431.D25A875A.IP)
[16:08:06] *** ChanServ sets mode: +o brson
[16:08:46] *** Joins: thou (thou@moz-1C1CA9F7.fasttrackcomm.net)
[16:09:36] *** Quits: infynyxx (infynyxx@580CA641.B5A086DD.4E529FF6.IP) (Client exited)
[16:10:16] *** Quits: echristo (echristo@60A74940.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[16:10:40] *** Quits: judder (maradukewa@DABDEEA3.F2C0D0AC.78E362FE.IP) (Ping timeout)
[16:12:38] <bjz> brson: I don't know if it'd be nice to worry pcwalton about the generic paths thing  I saw he posted a pull request earlier which clears a few obstacles towards it
[16:13:01] *** Joins: webber46 (webber46@moz-F6310FF0.lha.sgsnet.se)
[16:13:50] <bjz> brson: https://github.com/mozilla/rust/pull/6462
[16:15:07] <bstrie> doener: ...I think it got through!
[16:15:17] <doener> finally! :-)
[16:15:35] *** Quits: jviereck (Adium@moz-DC3D0EEB.ethz.ch) (Quit: Leaving.)
[16:15:38] <erickt> nmatsakis: and this is a very minor bikeshed, I always found `fn:Owned()` to be a weird syntax. Is there a reason why we can't do `fn<Owned>()`? Does that cause some ambiguities?
[16:15:39] *** Quits: smvv (sander@moz-BAEA8EB2.dynamic.upc.nl) (Quit: leaving)
[16:16:09] *** Quits: doener (bs@moz-AA189A5A.unitymedia.biz) (Quit: going home)
[16:23:04] *** Quits: rbancroft (rumble@moz-4E8E0D7F.cg.shawcable.net) (Quit: leaving)
[16:24:25] *** Joins: bent (chatzilla@moz-932324BF.hsd1.ca.comcast.net)
[16:24:35] *** Quits: Sodel_the_V (user@moz-853663E1.va.shawcable.net) (Quit: Eaten by a grue)
[16:24:56] *** Joins: thatfreakingguy (Mibbit@moz-9B57E929.pool.mediaways.net)
[16:25:34] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[16:26:01] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Computer has gone to sleep.)
[16:27:14] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[16:28:56] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[16:31:56] *** Joins: rbancroft (rumble@moz-4E8E0D7F.cg.shawcable.net)
[16:32:47] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[16:35:13] *** Quits: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net) (Client exited)
[16:35:24] *** Joins: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net)
[16:35:35] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[16:36:30] *** Joins: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com)
[16:36:51] *** Joins: echristo (echristo@4241698A.2E4FD3DD.225F4543.IP)
[16:37:56] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Computer has gone to sleep.)
[16:38:12] *** Quits: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com) (Ping timeout)
[16:39:04] *** Joins: tcsc (tcsc@moz-A838B260.dhcp.nwtn.ct.charter.com)
[16:39:34] *** Joins: doener (doener@moz-121949B3.unitymediagroup.de)
[16:39:44] *** Joins: jviereck (Adium@moz-DC3D0EEB.ethz.ch)
[16:40:20] <bstrie> acrichto: finally got that other conflicting PR through, if you hurry and update yours maybe we can get it in before that meeting is out...
[16:43:23] *** Quits: naq (naq@D5C2D2DF.E4265FCD.E481B5B.IP) (Ping timeout)
[16:43:46] *** Joins: naq (naq@D5C2D2DF.E4265FCD.E481B5B.IP)
[16:46:22] <ssbr> bjz: Bleh, what do I do if enabling the core profile makes GLFW fail to make a window? Does that mean I'm out of luck? (The usual glfw::window_hint:: stuff at the top makes Window::create fail)
[16:46:45] <ssbr> if I comment those out, I get a black screen, but who knows if that's because of that or other mistakes
[16:46:52] <ssbr> (I meant to draw a triangle)
[16:47:04] <bjz> could you gist some code?
[16:47:13] <bjz> also, what os are you using?
[16:48:04] *** Joins: infynyxx (infynyxx@580CA641.B5A086DD.4E529FF6.IP)
[16:49:09] <ssbr> bjz: give me a second to make something presentable
[16:49:10] <ssbr> and, Debian
[16:49:24] <bjz> yeah I know it's hard :)
[16:50:18] <bjz> also, what kind of graphics card do you have?
[16:50:24] *** Joins: akashj87 (akash@CF9E2736.CC3AFE9E.35E3DDC8.IP)
[16:50:31] <bjz> what opengl does it support?
[16:50:46] <bjz> (should I say, the drivers)
[16:52:00] *** Quits: pyrac (pyrac@19E86D0A.73C89388.AD05C589.IP) (Ping timeout)
[16:52:18] *** Joins: cmr_ (bzlandfill@86DBC01E.79C29BED.C209128E.IP)
[16:52:45] *** Quits: akashj87 (akash@CF9E2736.CC3AFE9E.35E3DDC8.IP) (Connection reset by peer)
[16:53:03] <ssbr> I never really messed with the drivers. All I know is that WebGL works in Firefox, and that hardware wise, it's Intel integrated GMA.
[16:53:51] *** Quits: cmr_ (bzlandfill@86DBC01E.79C29BED.C209128E.IP) (Quit: CGI:IRC (EOF))
[16:54:32] *** Joins: akashj87 (akash@CF9E2736.CC3AFE9E.35E3DDC8.IP)
[16:54:59] <bjz> you could try glewinfo
[16:55:23] *** Quits: akashj87 (akash@CF9E2736.CC3AFE9E.35E3DDC8.IP) (Connection reset by peer)
[16:55:40] *** Quits: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net) (Ping timeout)
[16:56:11] <ssbr> bjz: https://gist.github.com/ssbr/19add68c93404769f52a
[16:57:08] <ssbr> bjz: glewinfo says I have OpenGL 4
[16:57:41] <ssbr> updated with output: https://gist.github.com/ssbr/19add68c93404769f52a
[16:59:32] *** Quits: rgrinberg (rgrinberg@AE999E95.52DE4C60.258AD6F5.IP) (Ping timeout)
[17:02:16] *** Quits: infynyxx (infynyxx@580CA641.B5A086DD.4E529FF6.IP) (Client exited)
[17:04:10] *** Quits: tcsc (tcsc@moz-A838B260.dhcp.nwtn.ct.charter.com) (Quit: bye!)
[17:04:17] *** Joins: tcsc (tcsc@moz-A838B260.dhcp.nwtn.ct.charter.com)
[17:04:47] <bjz> ssbr: could you output window.get_context_version_major() and  window.get_context_version_minor()?
[17:05:01] <nmatsakis> graydon pcwalton et al: something I wanted to add, if the dynamically sized types stuff works out, I also think we should consider removing "auto-borrow" "and "auto-slice" from the set of coercions
[17:05:15] <nmatsakis> which goes along with making fn call syntax the "explicit syntax"
[17:06:16] <ssbr> bjz: 2.1
[17:06:34] *** Joins: rgrinberg (rgrinberg@AE999E95.52DE4C60.258AD6F5.IP)
[17:07:21] <bjz> nmatsakis: they aren't here atm :(
[17:07:41] <kimundi> nmatsakis: You mean fn foo(&str) { ... }; foo(~"foo"); wouldn't work anymore?
[17:07:41] <nmatsakis> indeed.
[17:07:53] *** Quits: webber46 (webber46@moz-F6310FF0.lha.sgsnet.se) (Quit: webber46)
[17:08:04] <bjz> ssbr: try un-commenting all but the last two hints
[17:08:07] <nmatsakis> kimundi: right, that's what I mean. You'd write `&*` to borrow (`&*~"foo", though of course just "foo" works :)
[17:08:30] <kimundi> hmm... seems incnvenient
[17:08:30] <ssbr> bjz: rust: task failed at 'error: Failed to open GLFW window', testsrc/oglbasic.rs:39
[17:08:32] <bjz> ssbr: and let me know what the version says
[17:08:35] <bjz> hmm
[17:08:45] *** Quits: brson (brson@2557E599.66715431.D25A875A.IP) (Client exited)
[17:08:55] <nmatsakis> kimundi: maybe, yeah.
[17:09:12] <bjz> ssbr: glfw::window_hint::context_version_major(3); glfw::window_hint::context_version_minor(2); ?
[17:09:25] <bjz> ssbr: they are the only two hints you have?
[17:09:45] <ssbr> bjz: those were the first two, not the last two. I can try those as well, one second
[17:09:59] <ssbr> Same result.
[17:10:08] <ssbr> (yes, those are the only hints)
[17:10:12] <ssbr> (that aren't commented)
[17:10:17] <bjz> hum
[17:10:33] *** Joins: blitter (blitter@moz-7C98731E.dyn.centurytel.net)
[17:10:47] *** Quits: Axord (xord@moz-C3CCF156.lsanca.dsl-w.verizon.net) (Quit: I'm sure it's perfectly safe)
[17:11:05] <bjz> try uncommenting glfw::window_hint::opengl_profile(glfw::OPENGL_CORE_PROFILE); ?
[17:11:09] <acrichto> bstrie: ah thanks, just got back and was about to say that I rebased it this morning
[17:11:25] <ssbr> bjz: so that this is the only hint, or so that I have those three hints?
[17:11:32] <Luqman> ssbr: i don't think the intel drivers for your card support opengl 3.2
[17:11:36] <bjz> ssbr: three hints
[17:11:39] <bstrie> acrichto: I thought that doener's pull would have invalidated yours, but it looks like that's not the case
[17:11:44] <bjz> Luqman: ahh
[17:11:45] <bstrie> so I just gave it the r+
[17:11:51] <acrichto> thanks!
[17:11:52] <ssbr> Luqman: well what is glewinfo saying, then?
[17:12:17] *** Joins: brson (chatzilla@2557E599.66715431.D25A875A.IP)
[17:12:22] <bjz> ssbr: yeah I don't think glewinfo is the right tool to be using
[17:12:27] <ssbr> okay.
[17:12:29] <Luqman> doesn't it say >OpenGL version 2.1
[17:12:31] <ssbr> no opengl for me ;____;
[17:12:34] *** Quits: Blub\w (wry@moz-81C24917.wireless.dyn.drei.com) (Ping timeout)
[17:12:34] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[17:12:34] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/JmsvzQ
[17:12:34] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[17:12:34] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[17:12:35] <ghrust> 01[13rust01] 15bors pushed 7 new commits to 06auto: 02http://git.io/FFDCPg
[17:12:35] <ghrust> 13rust/06auto 149f104d4 15Alex Crichton: rustpkg: Remove #[allow(vecs_implicitly_copyable)]
[17:12:35] <ghrust> 13rust/06auto 142951527 15Alex Crichton: compiletest: Remove #[allow(vecs_implicitly_copyable)]
[17:12:35] <ghrust> 13rust/06auto 1492d39fe 15Alex Crichton: syntax: Remove #[allow(vecs_implicitly_copyable)]
[17:12:37] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[17:12:48] * acrichto crosses fingers
[17:13:17] <ssbr> Luqman: oh, I missed that line
[17:13:44] <ssbr> I assumed because it was listing "[OK]" next to "GL_VERSION_4_0", that... bah
[17:14:17] <ssbr> How should I use OpenGL ES then, if not via GLFW?
[17:14:27] <ssbr> (and pretending it's GL 3.2)
[17:14:30] <bjz> hmm, there is a client_api hint
[17:14:59] <bjz> with glfw::OPENGL_ES_API
[17:15:08] <bjz> never used it though
[17:15:08] <kimundi> pauls, macros that define macros don't work currently, right? At least I get an ice
[17:15:36] *** Joins: steven_is_false (quassel@moz-144077DE.bchsia.telus.net)
[17:16:00] <bjz> ssbr: you could try having your only hint be: glfw::window_hint:: client_api(glfw::OPENGL_ES_API)
[17:16:01] <jclements> kimundi: if there isn't an issue open that looks close to your use case, you should submit one. There may be, though.
[17:16:10] <ssbr> bjz: that doesn't work either ;____;
[17:16:11] <cmr> RE: "Universal functional call syntax", did anyone take that up? Is there an issue open for it?
[17:16:15] <ssbr> (same problem)
[17:16:20] <bjz> ssbr: dang
[17:16:44] <ssbr> ugh
[17:16:48] <bjz> ssbr: I'm sure this is figuroutable, it's just a pain
[17:17:04] <ssbr> I'd switch to my windows machine, which surely supports everything necessary, but I can't build rust incoming on it (because 64 bit)
[17:17:11] <cmr> It's related to #6045, which I am working on here and there
[17:17:17] <Luqman> ssbr: seems like ironlake on linux support opengl 2.1 and opengl es 2.0
[17:17:27] <bjz> blahg
[17:18:19] <ssbr> Luqman: It definitely supports OGLES2 _somehow_, since WebGL works in Firefox
[17:18:22] <erickt> nmatsakis: why get rid of auto coercion?
[17:18:42] <ssbr> but maybe this is by hacks that cannot be replicated sanely
[17:18:47] *** Quits: bnicholson (bnicholson@moz-E98974C1.hsd1.ca.comcast.net) (Ping timeout)
[17:18:50] <nmatsakis> erickt: just because I think it's sometimes confusing and at odds with our general move towards explicitness
[17:19:06] <nmatsakis> erickt: if nothing else I want to limit it
[17:19:18] <nmatsakis> erickt: I am writing up a blog post with examples of confusing code 
[17:19:20] <nmatsakis> erickt: that results
[17:19:33] <nmatsakis> erickt: I tend to prefer that you don't have to know the type of the callee to know what it has access to,
[17:19:43] <nmatsakis> erickt: but with auto-borrowing (as implemented now) that is not true
[17:19:52] *** Quits: davbo (dave@moz-3FFA637C.oucs.ox.ac.uk) (Client exited)
[17:20:32] *** Joins: echristo_ (echristo@60A74940.D6CCE4AE.77834EAA.IP)
[17:20:50] *** Quits: echristo (echristo@4241698A.2E4FD3DD.225F4543.IP) (Ping timeout)
[17:20:51] *** echristo_ is now known as echristo
[17:20:56] <ssbr> eevee: btw, have you seen libtcod?
[17:21:03] <eevee> yeah
[17:21:18] <erickt> nmatsakis: ok :) It's just seeing &* all over the place would make me sad.
[17:21:18] <ssbr> eevee: have you considered using it instead of curses? <_<
[17:21:23] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[17:21:36] <nmatsakis> erickt: yeah an interesting question is how much it would be "all over the place"
[17:21:43] <cmr> I'm writing a terminfo parsing library, too.
[17:21:48] *** Joins: otters (joel@moz-82AAB099.rs)
[17:21:52] *** Quits: barosl (barosl@1E71221E.C81E10FB.7544CABF.IP) (Ping timeout)
[17:21:59] <nmatsakis> erickt: one thing I particularly dislike is that we will mutably auto-borrow---so it can be unclear when mutations will occur
[17:22:19] <ssbr> eevee: Also, how usable is Amulet? I'm like one day's flailing away from giving up on opengl for now, so I need to decide quickly what to do instead <_<
[17:22:33] <ssbr> (it's between using libtcod, or using amulet, I suppose)
[17:22:52] <eevee> ssbr: to answer both questions: not very since i'm basically writing my own curses-like as i go
[17:23:00] <nmatsakis> erickt: anyway it's someting I want to "consider"---not sure if it's a good idea
[17:23:21] <erickt> nmatsakis: I buy that. At least we aren't as bad a C where we have to mark a variable as mutable before it can be coerced into a &mut
[17:23:23] *** Quits: otters (joel@moz-82AAB099.rs) (Quit: bye)
[17:24:10] *** Joins: otters (joel@moz-82AAB099.rs)
[17:24:12] *** Joins: barosl (barosl@1E71221E.C81E10FB.7544CABF.IP)
[17:24:53] <erickt> nmatsakis: I bring this up because after being deep within self types for these past couple weeks, I was starting to think about how nice and consistent it'd be to auto-coerce all the arguments instead of just the self type
[17:25:10] <nmatsakis> erickt: :)
[17:25:21] <erickt> then that makes methods even less special
[17:25:29] <ssbr> eevee: well. don't forget about windows, okay? ;_;
[17:25:37] <nmatsakis> erickt: but it does give rise to hazards, patricularly around generic types.
[17:25:57] <erickt> tricky things those generic types
[17:26:31] <eevee> ssbr: i don't think i can possibly make this work usefully in the windows console; i'm intending from the start to rely on 256-color support
[17:26:53] <bstrie> you just need to open 8 different windows terminals and overlay them
[17:27:04] <ssbr> eevee: no no, this is what SDL is for
[17:27:05] <bstrie> octoterm
[17:27:23] <kimundi> he, with set ransparency... that might just work :D
[17:27:29] <rsaarelm> The Windows console is a pretty horrible thing.
[17:27:35] <ssbr> eevee: windows support means using SDL or OpenGL as a display backend, rather than curses or manual terminal commands
[17:27:46] <kimundi> jclements: This is the macro thing I tried: https://gist.github.com/Kimundi/b4ac13add9e458ac5b4f
[17:27:51] <cmr> ssbr: have you looked into pdcurses?
[17:28:15] <ssbr> oof, right, forgot about that
[17:28:22] <ssbr> OK, you can use curses and let pdcurses use SDL
[17:28:24] *** Quits: jclements (jclements@2557E599.66715431.D25A875A.IP) (Quit: jclements)
[17:28:27] <rsaarelm> I'm doing graphicky expermiment stuff with GLES2 and SDL libs now.
[17:28:43] <ssbr> but then you're using curses
[17:29:26] *** Joins: webber46 (webber46@moz-F6310FF0.lha.sgsnet.se)
[17:29:40] *** Quits: brson (chatzilla@2557E599.66715431.D25A875A.IP) (Ping timeout)
[17:30:41] <eevee> or you can just run it in mingw or cygwin or something
[17:30:50] *** Joins: brson (chatzilla@2557E599.66715431.D25A875A.IP)
[17:30:51] *** Joins: mschifer (Adium@2557E599.66715431.D25A875A.IP)
[17:30:56] <ssbr> cygwin, not mingw
[17:30:59] <rsaarelm> I guess ideally the Rust curses-alike would have swappable backends, and the Windows version could use a SDL-based backend that emulated a nicer terminal than the horrible stock Windows console.
[17:31:06] <ssbr> and then I can't use any windows APIs
[17:31:22] *** Quits: brson (chatzilla@2557E599.66715431.D25A875A.IP) (Client exited)
[17:31:49] <ssbr> (cygwin isn't real windows support :< )
[17:33:00] *** Quits: jviereck (Adium@moz-DC3D0EEB.ethz.ch) (Quit: Leaving.)
[17:33:16] *** Joins: jorendorff (jorendorff@moz-4BE034AB.ptr.us.xo.net)
[17:33:19] *** Joins: bnicholson (bnicholson@2557E599.66715431.D25A875A.IP)
[17:33:32] <rsaarelm> Most of the use for terminal mode apps is for unix-like systems that ssh into. Windows native console apps are rare and generally unwanted because of the crippled cmd.exe.
[17:34:14] <ssbr> AFAIK amulet is meant for roguelikes
[17:34:21] *** Joins: pnathan (pnathan@moz-764F5025.pools.spcsdns.net)
[17:34:23] *** Quits: echristo (echristo@60A74940.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[17:34:43] <eevee> it's intended to be general-purpose; i just happen to be building it for a roguelike
[17:34:46] *** Joins: brson (brson@2557E599.66715431.D25A875A.IP)
[17:34:46] *** ChanServ sets mode: +o brson
[17:35:15] *** Quits: ysuzuki (ysuzuki@moz-60FA9D06.net119083145.t-com.ne.jp) (Client exited)
[17:35:54] <rsaarelm> Yeah, you do want roguelikes as native apps on Windows.
[17:36:06] <rsaarelm> But probably using a SDL-based terminal like libtcod's instead of cmd.exe.
[17:36:46] <rsaarelm> For the colors, the font options, the more than 80 columns and whatnot.
[17:37:06] *** Joins: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com)
[17:38:52] *** Quits: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com) (Ping timeout)
[17:39:10] *** Quits: mcomella (mcomella@moz-B10FF54F.ri.ri.cox.net) (Connection reset by peer)
[17:39:52] *** Joins: pyrac (pyrac@moz-B95F505.w92-156.abo.wanadoo.fr)
[17:40:07] *** Joins: mcomella (mcomella@moz-B10FF54F.ri.ri.cox.net)
[17:40:12] *** Quits: LimeBurst (me@247D1419.D73964AC.27A8748.IP) (Quit: leaving)
[17:40:20] <eevee> i might just write a separate graphical backend someday
[17:40:29] <eevee> after i have, you know, a game
[17:41:24] *** Joins: eholk (eholk@B9D8E317.7713688D.25ABE9D1.IP)
[17:42:29] <rsaarelm> Yeah, no need to do it until you need it.
[17:42:32] *** Joins: echristo (echristo@D423593A.D6CCE4AE.77834EAA.IP)
[17:42:32] *** Joins: hussL (hussL@A2A1DFF0.239445A9.3F84F20A.IP)
[17:42:38] *** Joins: kud1ing (Mibbit@moz-10A07EC6.pools.arcor-ip.net)
[17:42:59] <rsaarelm> It's a pretty simple job for just the text character display.
[17:43:13] <rsaarelm> So it should be easy to add it in later.
[17:44:00] *** Quits: eholk (eholk@B9D8E317.7713688D.25ABE9D1.IP) (Quit: eholk)
[17:44:05] *** Joins: eholk (eholk@B9D8E317.7713688D.25ABE9D1.IP)
[17:44:16] <thatfreakingguy> How free are tuple structs (performance-wise)?
[17:44:30] *** Joins: inolen (Adium@moz-9F4F17DF.tourcaster.com)
[17:44:44] <cmr> Can anyone replicate a test failure in run-pass/intrinsic-atomics.rs? I'm on x64 linux using clang 3.2
[17:46:03] <kud1ing> rustsqlite uses '_notused', this does not seem to exist anymore
[17:47:53] *** Joins: LimeBurst (me@247D1419.D73964AC.27A8748.IP)
[17:48:16] <kud1ing> ah, that's a private enum
[17:48:26] *** Quits: steven_is_false (quassel@moz-144077DE.bchsia.telus.net) (Ping timeout)
[17:48:26] *** Quits: KindOne (KindOne@moz-2D30BEE8.dynamic.ip.windstream.net) (Ping timeout)
[17:48:30] <brson> https://github.com/mozilla/rust/wiki/Meeting-weekly-2013-05-14
[17:48:39] <cmr> Hm, I can't even *compile* run-pass/intrinsic-atomics.rs
[17:49:03] *** Joins: KindOne (KindOne@moz-2D30BEE8.dynamic.ip.windstream.net)
[17:49:17] *** kimundi is now known as zz_kimundi
[17:49:44] *** Quits: hussL (hussL@A2A1DFF0.239445A9.3F84F20A.IP) (Quit: Leaving)
[17:49:59] *** Quits: LimeBurst (me@247D1419.D73964AC.27A8748.IP) (Ping timeout)
[17:49:59] *** Quits: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP) (Ping timeout)
[17:50:40] *** Quits: jdm (jdm@DB05BBF2.BB1F48F2.971E19F6.IP) (Ping timeout)
[17:51:38] *** Joins: jdm (jdm@DB05BBF2.BB1F48F2.971E19F6.IP)
[17:51:39] *** Quits: vmx (vmx@moz-10797E84.dip0.t-ipconnect.de) (Quit: Leaving)
[17:52:30] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[17:52:39] <kud1ing> mod sqlite3 { pub extern { ... } }
[17:52:48] <kud1ing> does that make sense "pub extern"?
[17:52:53] *** Joins: LimeBurst (me@247D1419.D73964AC.27A8748.IP)
[17:53:02] <kud1ing> otherwise the funtions are not accesible anymore
[17:53:06] *** Joins: pcwalton (pcwalton@43CB6079.66715431.D25A875A.IP)
[17:53:06] *** ChanServ sets mode: +o pcwalton
[17:53:41] *** Quits: Luqman (laden@moz-345B5EBA.csclub.uwaterloo.ca) (Ping timeout)
[17:53:45] <kud1ing> "extern mod Foo" => "mod Foo { extern {" is giving me a hard time
[17:53:57] *** Quits: mcpherrin (mimcpher@moz-345B5EBA.csclub.uwaterloo.ca) (Ping timeout)
[17:54:03] <kud1ing> i get linker errors now
[17:54:12] <kud1ing> note: Undefined symbols for architecture x86_64:   "_sqlite3_bind_blob", referenced from:       _sqlite3_bind_blob__c_stack_shim in sqlite.o
[17:55:20] <TD-Linux> kud1ing, sounds like you're not linking in libsqlite3
[17:55:34] <pcwalton> you need #[link_name="sqlite3"] on the extern block
[17:55:59] *** Quits: LimeBurst (me@247D1419.D73964AC.27A8748.IP) (Ping timeout)
[17:56:13] <TD-Linux> actually why is that symbol prefixed with an underscore?
[17:56:28] <pcwalton> nmatsakis: I think we may need a Go-like 3-tuple representation for ~[T]: (ptr, fill, alloc)
[17:56:39] <cmr> TD-Linux: windows symbol convention for C
[17:56:39] <pcwalton> not a 2-tuple
[17:56:45] <doener> hrm, I can't seem to wrap my head around how to change token_tree to contain ~[~token_tree] instead of ~[token_tree]. 
[17:57:05] <pcwalton> or ... something
[17:57:07] <kud1ing> @pcwalton: "on" in the sense of "right before"?
[17:57:16] <pcwalton> yeah
[17:57:26] <pcwalton> or try #[link_args="-lsqlite3"]
[17:57:55] *** Joins: LimeBurst (me@247D1419.D73964AC.27A8748.IP)
[17:58:08] <kud1ing> @pcwalton: the last one worked, thanks
[17:58:15] <erickt> pcwalton: I thought ~[T] was already a 3-tuple
[17:58:20] <pcwalton> it's a 2-tuple
[17:58:33] *** Quits: yong (chatzilla@74DA0C97.4E87ADC2.263D9828.IP) (Ping timeout)
[17:59:22] *** Quits: CarpNet (ac@moz-FD24B77.sohonet.co.uk) (Quit: Leaving)
[18:00:03] *** Joins: jviereck (Adium@moz-340574DC.dclient.hispeed.ch)
[18:00:03] <pcwalton> err
[18:00:05] <pcwalton> it's a 1-tuple now :)
[18:00:13] *** Joins: infynyxx (infynyxx@580CA641.B5A086DD.4E529FF6.IP)
[18:00:14] <pcwalton> it's just a pointer and all that stuff is stored in a header, but we want to change that
[18:00:15] <erickt> pcwalton: ah, it's really (BoxHeaderRepr, (fill, alloc, data))
[18:00:18] <pcwalton> the problem is in order for push to work
[18:00:26] <pcwalton> in a dynamically sized types world
[18:00:28] <pcwalton> we need to change it
[18:00:40] *** Joins: yong (chatzilla@74DA0C97.4E87ADC2.263D9828.IP)
[18:00:41] <pcwalton> although maybe not
[18:01:25] *** Joins: jviereck1 (Adium@moz-57512FAD.dynamic.hispeed.ch)
[18:01:54] *** Quits: eholk (eholk@B9D8E317.7713688D.25ABE9D1.IP) (Ping timeout)
[18:02:29] <erickt> oh how odd! I wonder why a ~[T] has a ref counting box header
[18:02:40] *** Quits: jviereck (Adium@moz-340574DC.dclient.hispeed.ch) (Ping timeout)
[18:02:44] *** Quits: pnathan (pnathan@moz-764F5025.pools.spcsdns.net) (Ping timeout)
[18:02:45] *** Joins: eholk (eholk@moz-4B82F403.uconnect.utah.edu)
[18:02:51] <doomlord> is that just a detail awaiting compiler optimizaion
[18:03:04] *** Quits: brson (brson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[18:03:21] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Quit: Computer has gone to sleep.)
[18:03:29] *** Joins: brson (brson@2557E599.66715431.D25A875A.IP)
[18:03:29] *** ChanServ sets mode: +o brson
[18:03:30] *** Joins: jclements (jclements@2557E599.66715431.D25A875A.IP)
[18:03:33] <doomlord> oh scrolling up.. yes
[18:03:41] *** zz_kimundi is now known as kimundi
[18:04:00] *** Quits: kud1ing (Mibbit@moz-10A07EC6.pools.arcor-ip.net) (Quit: http://www.mibbit.com ajax IRC Client)
[18:04:37] *** Quits: LimeBurst (me@247D1419.D73964AC.27A8748.IP) (Quit: leaving)
[18:04:41] *** Quits: BitPuffin (quassel@moz-8370D1B9.bredband.comhem.se) (Ping timeout)
[18:04:46] *** Joins: pnathan (pnathan@moz-764F5025.pools.spcsdns.net)
[18:05:10] *** Joins: BitPuffin (quassel@moz-8370D1B9.bredband.comhem.se)
[18:07:41] <nmatsakis> pcwalton: why?
[18:07:57] <nmatsakis> pcwalton: oh I see. maybe.
[18:07:59] <pcwalton> nmatsakis: where were you planning on putting the alloc?
[18:07:59] *** Quits: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP) (Quit: Leaving)
[18:08:05] <nmatsakis> pcwalton: oh, in the box
[18:08:07] <pcwalton> I'm actually kind of fuzzy on where the invariants are
[18:08:19] <pcwalton> is that OK, to have an alloc there *only* if the box contains [u8]?
[18:08:23] <nmatsakis> pcwalton: that is ~[T] -> (ptr, len) but the ptr is a ptr to a box
[18:08:24] <pcwalton> err
[18:08:25] <pcwalton> [T]
[18:08:44] <nmatsakis> pcwalton: I don't follow but let's discuss after  conf call
[18:08:48] <pcwalton> yeah
[18:09:34] *** Quits: bnicholson (bnicholson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[18:09:48] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[18:09:48] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/FFDCPg
[18:09:48] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[18:10:26] *** Joins: bnicholson (bnicholson@2557E599.66715431.D25A875A.IP)
[18:10:54] *** Joins: LimeBurst (me@247D1419.D73964AC.27A8748.IP)
[18:11:49] *** Quits: infynyxx (infynyxx@580CA641.B5A086DD.4E529FF6.IP) (Client exited)
[18:12:39] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[18:12:39] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/Wgu0Qg
[18:12:39] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[18:13:08] *** Joins: beard-need-weed (c0@moz-4948B777.static.corbina.ru)
[18:13:22] <brson> incoming is super busted
[18:13:39] <brson> maybe not 'super' but 3 builders are red
[18:15:33] *** Quits: hmax (hmax@moz-15514FA1.yandex.net) (Quit: ????? ? ?? ??? (xchat 2.4.5 ??? ??????))
[18:17:04] *** Joins: infynyxx (infynyxx@580CA641.B5A086DD.4E529FF6.IP)
[18:17:47] *** Joins: steven_is_false (quassel@moz-144077DE.bchsia.telus.net)
[18:17:57] *** Quits: LimeBurst (me@247D1419.D73964AC.27A8748.IP) (Ping timeout)
[18:18:00] *** Joins: LimeBurst (me@247D1419.D73964AC.27A8748.IP)
[18:18:35] <thatfreakingguy> The type libc::c_int can change between platforms, right?
[18:19:33] <steven_is_false> thatfreakingguy: Isn't it different between 32, and 64 bit ones?
[18:19:54] <steven_is_false> thatfreakingguy: Most likely that would be the only thing worth worrying about.
[18:19:56] <ssbr> Ugh, does bindgen depend on a particular version of clang? It fails to build for me because of a bunch of "undefined reference to <...>" errors.
[18:20:03] <ssbr> steven_is_false: also windows
[18:20:17] <kimundi> libc::c_int is meant to be cs definition of an int
[18:20:36] *** Joins: kud1ing (Mibbit@moz-10A07EC6.pools.arcor-ip.net)
[18:20:36] <steven_is_false> ssbr: Right, Windows vs *nixes on this type of thing.
[18:20:37] <bstrie> acrichto: huzzah, it landed
[18:20:48] <ssbr> ack, clang 3.1
[18:20:49] <acrichto> yay!
[18:21:06] *** Quits: tjc (tjc@A5087023.2354C43D.D8E68FF6.IP) (Quit: zzzzzzzzzz)
[18:21:16] <acrichto> bstrie: would you mind r+ ing https://github.com/mozilla/rust/pull/6467 as well? Sadly it conflicted with the previous change
[18:21:44] <kud1ing> cmr: i think there is a loophole in the "unresolved" hint messages. if the stuff is imported like "use foo:*" there is no warning that the meant things are private
[18:21:50] <bstrie> looking
[18:21:52] <thatfreakingguy> I'm currently trying to create a binding; should I always convert c_int to Rust's int or just have c_int in the public interface?
[18:22:09] <steven_is_false> Relevant part of the manual http://static.rust-lang.org/doc/rust.html#machine-dependent-integer-types
[18:22:27] <cmr> kud1ing: So when "use foo::*" and trying to use, say, bar that is part of foo but private, it is just an "unresolved name"?
[18:22:52] <kud1ing> cmr: i think so, i've seen this case when porting rust-sqlite to the latest incoming
[18:22:52] <bstrie> acrichto: done
[18:22:57] <acrichto> bstrie: thanks!
[18:23:16] <cmr> kud1ing: Open an issue with an example and mention me in it (@cmr), I'll check it out later. I have to run right now.
[18:23:26] <kud1ing> cmr: cheers
[18:23:27] <nmatsakis> pcwalton: I think I see the problem you were pointing out now. you're saying that a ~T box doesn't need the alloc, good point. 
[18:23:36] <pcwalton> yeah
[18:24:09] <nmatsakis> pcwalton: ok, maybe it does need to be three words. that's unfortunate, though workable.
[18:24:27] <pcwalton> this is what Go did
[18:24:29] <nmatsakis> pcwalton: otoh, maybe it's ok for ~[T] to have an extra word too
[18:24:31] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[18:24:31] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/Wgu0Qg
[18:24:31] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[18:24:33] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[18:24:33] <ghrust> 01[13rust01] 15bors pushed 6 new commits to 06auto: 02https://github.com/mozilla/rust/compare/767e3ae86cba...06c46d514215
[18:24:33] <ghrust> 13rust/06auto 1454f2147 15Alex Crichton: Get unit tests for rusti working...
[18:24:33] <ghrust> 13rust/06auto 144a9d8ff 15Alex Crichton: Fix `use` statements with rusti
[18:24:34] <ghrust> 13rust/06auto 149af04f3 15Alex Crichton: Add regression tests for various other rusti issues
[18:24:36] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[18:24:50] <nmatsakis> pcwalton: ok, it's probably best to hvae the 3 words
[18:25:30] <kimundi> nmatsakis: So all ptrs to unsizet types are three words long?
[18:25:38] *** Quits: barosl (barosl@1E71221E.C81E10FB.7544CABF.IP) (Quit:  .)
[18:25:44] <kimundi> err, would be?
[18:26:47] <nmatsakis> kimundi: I guess so? we could probably keep objects as 2 words (though ~objects are 3 words right now)
[18:28:21] <pcwalton> that's what Go does
[18:28:24] <pcwalton> ptr, len, acp
[18:28:26] <pcwalton> ptr, len, cap
[18:28:30] <pcwalton> where cap == alloc
[18:28:36] <nmatsakis> right
[18:29:04] <pcwalton> it would also let you push onto slices, which is something that Go lets you do...
[18:29:22] <nmatsakis> pcwalton: that said, I think ... we could keep it in the header if we *wanted* to. After all, when we monomorphize, we'll know it's a ~[T] vs a ~T etc...
[18:29:31] <pcwalton> I was thinking that
[18:29:36] <pcwalton> there are custom smart pointers to consider
[18:29:41] <pcwalton> although I don't know if that's a problem
[18:29:46] <nmatsakis> it's kind of an engineering tradeoff I guess
[18:29:48] *** Quits: jclements (jclements@2557E599.66715431.D25A875A.IP) (Quit: jclements)
[18:29:57] <nmatsakis> probably it doens't matter at all either way
[18:30:08] *** Joins: Luqman (laden@moz-DCEF6040.csclub.uwaterloo.ca)
[18:30:16] <nmatsakis> oh, custom smart pointers...I don't know how that interacts, but it seems like
[18:30:16] *** Quits: Luqman (laden@moz-DCEF6040.csclub.uwaterloo.ca) (Quit: leaving)
[18:30:17] *** Quits: bent (chatzilla@moz-932324BF.hsd1.ca.comcast.net) (Quit: ChatZilla 0.9.90-rdmsoft [XULRunner 18.0.2/20130201065344])
[18:30:23] <nmatsakis> the more we keep the logic out of the pointee 
[18:30:26] <nmatsakis> the less there is to manage
[18:30:34] <nmatsakis> so in that case 3 words is prob better
[18:31:39] <erickt> pcwalton: what does it even mean to push onto a slice inside of a vector?
[18:32:13] <pcwalton> it just mutates the underlying vector... I guess
[18:32:17] <brson> I'm going to try to fix incoming. I'm not happy about it.
[18:32:21] <nmatsakis> pcwalton: regarding "proc" (or whatever we call it), it sounded like you and I were roughly on the same page
[18:32:32] <pcwalton> yes
[18:32:36] <nmatsakis> pcwalton: though I think it means that the exchange heap is still "builtin"
[18:32:42] <pcwalton> yes, that's fine with me
[18:32:42] *** Joins: bent (chatzilla@moz-932324BF.hsd1.ca.comcast.net)
[18:32:45] <nmatsakis> (which I think may be a good goal)
[18:33:28] *** Quits: infynyxx (infynyxx@580CA641.B5A086DD.4E529FF6.IP) (Client exited)
[18:33:54] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[18:34:09] <pcwalton> the only two primitives that a custom allocator will need are "new" and "new[]"
[18:34:15] <pcwalton> and "delete" and "delete[]"
[18:34:33] <nmatsakis> pcwalton: sounds familiar...
[18:34:34] <pcwalton> the similarity to C++ is interesting!
[18:34:37] <pcwalton> yes
[18:34:38] <doomlord> there was something tha frustrated me in C++
[18:34:39] <pcwalton> it feels right
[18:34:41] <kud1ing> @cmr: done, thanks
[18:34:49] <doomlord> they used to have new[count] delete[count]
[18:35:00] <doomlord> but changed it to just new and new[]
[18:35:09] <pcwalton> nmatsakis: @Trait/~Trait/&Trait handle themselves because those aren't *allocated*, they're just converted from an existing allocation
[18:35:14] <pcwalton> so you just need those two primitives
[18:35:25] <nmatsakis> pcwalton: right
[18:35:38] <doomlord> could they be unified such that new is new[1]
[18:35:42] *** Joins: jclements (jclements@2557E599.66715431.D25A875A.IP)
[18:35:56] *** Joins: dherman (dherman@2557E599.66715431.D25A875A.IP)
[18:35:56] *** ChanServ sets mode: +o dherman
[18:36:29] *** Quits: kud1ing (Mibbit@moz-10A07EC6.pools.arcor-ip.net) (Quit: http://www.mibbit.com ajax IRC Client)
[18:36:40] <doomlord> am i getting the detail right here: C++ , you have new[] but the allocator has to remember the size - yet the size i is usually stored in the collection aswell
[18:36:45] <pcwalton> doomlord: you could implement it that way
[18:37:04] <doomlord> i prefered the new[count] idea where the owner tracks the size
[18:37:35] *** Joins: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com)
[18:38:16] <nmatsakis> doomlord: I guess we'll be closer to that.
[18:38:17] <doomlord> thats it .. C++ lost the delete[count ] capability... but it still has delete(size_t) for single objects, not arrays
[18:39:04] <doomlord> having said taht, i wonder if any C++ vector implementations manually invoke destructors and go through delete(size_t) ..
[18:39:22] *** Quits: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com) (Ping timeout)
[18:39:29] <doener> hm, I want to add a contains_equiv() method for (at least) HashSet<T>. Should I add that to impl HashSet<T> or trait Set<T>? For the former, the implementation is trivial, for the latter, it seems that it might add unnecessary implementation overhead.
[18:39:44] <doener> Or maybe add an EquivSet trait?
[18:39:45] <doomlord> Collection::delete(collection->data,sizeof(T)*collection->count)
[18:40:12] <doomlord> owner-tracked size is better for alignment i think.
[18:40:45] <doomlord> if you have a 32bit count for size and 16byte aligned array data (simd-friendly) - if you put he size inthe buffer, you get alignment padding
[18:41:04] <doomlord> and sometimes you want coarser alignment padding for cache-lines
[18:41:33] *** Joins: Luqman (laden@moz-DCEF6040.csclub.uwaterloo.ca)
[18:42:10] *** Parts: beard-need-weed (c0@moz-4948B777.static.corbina.ru) (PONG :gravel.mozilla.org)
[18:43:08] *** Quits: webber46 (webber46@moz-F6310FF0.lha.sgsnet.se) (Quit: webber46)
[18:49:49] *** Quits: pcwalton (pcwalton@43CB6079.66715431.D25A875A.IP) (Quit: pcwalton)
[18:50:29] *** Joins: pcwalton (pcwalton@43CB6079.66715431.D25A875A.IP)
[18:50:29] *** ChanServ sets mode: +o pcwalton
[18:50:30] <jld> I think all of the kernel allocators I've seen pass the size (or equivalent) to the free operation.
[18:50:34] <jld> For what it's worth.
[18:51:35] <jld> ...okay, now I'm thinking of exceptions.
[18:52:29] *** Joins: brendan (brendaneic@2557E599.66715431.D25A875A.IP)
[18:52:43] <pascal> Is there an easy way to convert a ~[u8] to *u8?
[18:53:01] <kimundi> In what context would new, new[], delete and deletl[] crop up?
[18:53:06] <pcwalton> pascal: &x[0] assuming it has at least length 1
[18:53:59] <jld> There's also vec::as_buf (or whatever it's called).
[18:55:22] *** Joins: infynyxx (infynyxx@580CA641.B5A086DD.4E529FF6.IP)
[18:55:26] <pascal> pcwalton: perfect, thanks
[18:55:29] *** Joins: webber46 (webber46@moz-F6310FF0.lha.sgsnet.se)
[18:57:25] *** Parts: berak (chatzilla@2F32033.5E545589.16E13E53.IP) ()
[18:57:35] *** Joins: chadz (uid979@moz-D8B63698.irccloud.com)
[18:57:44] *** Joins: Sodel_the_V (user@moz-853663E1.va.shawcable.net)
[18:59:04] *** Quits: dherman (dherman@2557E599.66715431.D25A875A.IP) (Quit: dherman)
[18:59:40] *** Quits: ssbr (ssbr@A9D9D38C.B6F034AC.72A31D6.IP) (Ping timeout)
[19:02:10] *** Quits: Sodel_the_V (user@moz-853663E1.va.shawcable.net) (Input/output error)
[19:03:50] *** Joins: mcpherrin (mimcpher@moz-345B5EBA.csclub.uwaterloo.ca)
[19:04:14] *** Quits: echristo (echristo@D423593A.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[19:04:30] <azita> we have rust stickers in mountain view office for anyone who wants one
[19:05:46] *** Quits: infynyxx (infynyxx@580CA641.B5A086DD.4E529FF6.IP) (Client exited)
[19:05:50] *** Quits: dju (dju@9F8AFAC.F83511E0.C3FEB593.IP) (Quit: ZNC - http://znc.in)
[19:06:35] *** Joins: Sodel_the_V (user@moz-853663E1.va.shawcable.net)
[19:06:45] <mcpherrin> If only you'd said that last week, I'd have recruited Luqman to bring me one :(
[19:06:48] <jld> * TODO either find a reason to visit Mountain View or coerce someone to smuggle stickers to the SF MozSpace.
[19:07:26] <tristram> and then to paris
[19:07:26] *** Joins: echristo (echristo@D423593A.D6CCE4AE.77834EAA.IP)
[19:08:29] <Luqman> mcpherrin: o.o i didn't even know there were any :(
[19:08:44] <azita> I'll send some with mbx to SF today.  Paris maybe later this summer unless I find someone to bring them to you
[19:09:09] <jdm> azita: :o
[19:09:23] <mcpherrin> Luqman: exactly the problem.  I blame azita, not you :P
[19:10:53] * nmatsakis wants stickers =)
[19:11:19] <steven_is_false> Could one track lengths of arrays using lifetimes as a proxy?
[19:11:22] <azita> sorry.  they just arrived.  we'll get some to Paris
[19:12:05] <steven_is_false> For example, (Array 'r (Array 'r T), Size 'r) for a square matrix
[19:12:41] *** Joins: dju (dju@moz-83BD5EC.dmz.me)
[19:14:34] *** Quits: jorendorff (jorendorff@moz-4BE034AB.ptr.us.xo.net) (Quit: jorendorff)
[19:15:16] <steven_is_false> Also, one should be able to alias lifetimes like with types. For example, type 'x = 
[19:15:26] <steven_is_false> type 'x = 'static;
[19:16:24] <nmatsakis> pcwalton: btw, I'm poking a bit at removing extern fn wrappers and just relying on fastffi
[19:16:54] <pcwalton> nmatsakis: great!
[19:17:02] <nmatsakis> (in the background as I do PJS stuff today...)
[19:17:05] <pcwalton> I'm just working on de-*u8-ing extern fns
[19:17:24] <pcwalton> if I'm super productive I may be able to get through my entire board today, with the exception of "as @Trait" and mutable fields which still require snaps
[19:17:46] <pcwalton> 344
[19:17:47] <pcwalton> err
[19:17:54] <pcwalton> not *today*, *this week*
[19:18:28] *** Joins: dherman (dherman@2557E599.66715431.D25A875A.IP)
[19:18:28] *** ChanServ sets mode: +o dherman
[19:19:40] *** Joins: graydon (Adium@A5087023.2354C43D.D8E68FF6.IP)
[19:19:40] *** ChanServ sets mode: +qo graydon graydon
[19:19:46] *** Joins: infynyxx (infynyxx@580CA641.B5A086DD.4E529FF6.IP)
[19:20:41] <jdm> azita: where are the MV stickers?
[19:20:48] <jdm> I want davidb to claim a couple
[19:20:49] *** Joins: jorendorff (jorendorff@moz-4BE034AB.ptr.us.xo.net)
[19:21:41] <azita> on the shelf next to my desk.  2nd floor, next to Brendan's desk
[19:21:59] <jdm> thanks
[19:22:26] *** Joins: Blub\w (wry@moz-81C24917.wireless.dyn.drei.com)
[19:22:50] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[19:23:01] *** Joins: tjc (tjc@A5087023.2354C43D.D8E68FF6.IP)
[19:23:01] *** ChanServ sets mode: +o tjc
[19:24:37] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[19:24:37] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02https://github.com/mozilla/rust/compare/767e3ae86cba...06c46d514215
[19:24:37] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[19:25:13] *** Joins: mcpherri1 (mimcpher@moz-21D6B3DE.csclub.uwaterloo.ca)
[19:25:22] *** Quits: mcpherrin (mimcpher@moz-345B5EBA.csclub.uwaterloo.ca) (Quit: leaving)
[19:25:46] <steven_is_false> Is there a calloc function somewhere in the utilities? fn calloc <T : Zero> (uint) -> *T ?
[19:27:34] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[19:27:34] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/CE9WJw
[19:27:34] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[19:27:35] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[19:27:35] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/Yv2IFg
[19:27:35] <ghrust> 13rust/06auto 14133aabc 15Brian Anderson: Ignore two failing flatpipes tests
[19:27:35] <ghrust> 13rust/06auto 14d217174 15bors: auto merge of #6479 : brson/rust/flatpipes, r=brson
[19:27:36] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[19:27:53] <tjc> heh, who came up with "ICE to meet you"?
[19:28:05] *** Joins: Jesin (Jessin_@moz-5654D37.washdc.fios.verizon.net)
[19:28:36] *** Quits: pnathan (pnathan@moz-764F5025.pools.spcsdns.net) (Quit: Colloquy for iPhone - http://colloquy.mobi)
[19:29:52] <pcwalton> I'm to blame
[19:30:06] <tjc> well, it's awesome
[19:30:14] <pcwalton> well, really it's Batman
[19:30:21] <tjc> heh
[19:33:51] <jack> tjc: i posted this to reddit, but wanted to make sure you saw it: http://forums.thedailywtf.com/forums/t/27755.aspx
[19:33:55] <jack> seems quite relevant to rustpkg
[19:34:09] <tjc> jack: heh, looks interesting. reading it
[19:34:25] <jack> one potential solution to that issue is to check out the code as read-only
[19:34:39] <jack> so then at least you have to jump through an OS level hoop to do the wrong thing.
[19:34:44] <tjc> ahhhh yes
[19:34:47] <cmr> brson: thanks for the handful of r+'s
[19:34:47] <tjc> editing locally cached files
[19:34:56] <tjc> I didn't think of that, but it's so obvious that it could happen
[19:35:02] <tjc> so yeah, permissions would be the obvious fix
[19:35:07] <cantsin> is similar functionality planned for rustpkg?
[19:35:54] <tjc> when the person says "in practice it takes more work than that, because we have to ensure we get the same versions", I guess that points to something else -- it sounds like go's package management doesn't take branches/tags/revisions into account, just repo URLs?
[19:36:05] <jack> tjc: it might make sense for rustpkg to have some kind of lint command that will do a completely clean build to spot errors of this kind.
[19:36:11] <tjc> if so, I was already planning to do that for rustpkg have a way to specify a dependency on a particular tag
[19:36:20] <tjc> jack: yeah, that's a good idea too, I'll make issues for all of these things
[19:36:31] <jack> tjc: that's what i gathered from the article to, but i've not used go's packaging. i'll go look.
[19:36:58] <tjc> ugh, anyway, that's a sad story. hopefully we can learn from it :-)
[19:37:31] <tjc> (my reaction to this is sympathy with them and not "wtf"; I guess I've experienced some personal growth)
[19:37:49] <brendanc> mine is wtf
[19:38:01] <jack> tjc: as of a year ago, it seems versions weren't supported: https://groups.google.com/forum/?fromgroups=#!topic/golang-nuts/0avuiWURSQk
[19:38:03] <brendanc> seems like you really ought to keep your own copy of your dependencies
[19:38:04] <doy> specifying a dependency on anything other than a tag sounds like just asking for trouble in general
[19:38:06] *** Joins: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com)
[19:38:10] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[19:38:23] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[19:38:45] <cmr> yeah
[19:38:49] <cmr> semver ftw!
[19:39:27] <graydon> dependency on a specific tag and semver-compatible upward revisions of it.
[19:39:39] <graydon> that is, it should be relatively easy to specify "1.0" and get "1.1" but not "2.0"
[19:39:55] *** Quits: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com) (Ping timeout)
[19:40:46] <jack> graydon: i think some rebar packages do this with moving branches that are stable. like instead of v1.0 tag, it's a v1.x branch and maintains the semantics.
[19:40:53] <jack> of course, this pushes the work to the repo maintainer.
[19:41:07] <steven_is_false> Which trait is it for types without destructors? It's Copy right?
[19:41:22] *** Quits: infynyxx (infynyxx@580CA641.B5A086DD.4E529FF6.IP) (Client exited)
[19:42:04] <graydon> jack: mhm. I suspect stable tags and semver logic in the client is better there since some clients will want to upgrade "1.0" -> "1.1" and others will very firmly want "no, really, just 1.0, I'm dependent on a bug in that version"
[19:42:06] <jack> rust doesn't have this problem as badly i think. in go i think you'd have to specify the version in every import. but we can just do it per crate i think.
[19:42:30] <chadz> how does one convert an iter from str::each_word to a ~[~str]?  i tried:   iter::to_vec( |acc| str::each_word(xs,acc) )   to no avail last night
[19:42:34] <graydon> yeah, we split link-directive and module-arranging-directive
[19:43:13] <jack> chadz: in some cases you'll have to buidl up a mutable vector to stuff results in. there are still some warts as iterators go through design iteration :)
[19:43:30] <jack> graydon: turns out to have been a good choice i think.
[19:43:37] <chadz> yeah, that's the code i had that i tried to replace with to_vec ;(
[19:44:37] *** Quits: Blub\w (wry@moz-81C24917.wireless.dyn.drei.com) (Ping timeout)
[19:45:12] *** Joins: Blub\w (wry@moz-81C24917.wireless.dyn.drei.com)
[19:45:24] <graydon> jack: most languages do. they just do a shabby or incomplete job at defining the unit-of-linkage boundary (and linkage system, and versioning system). We're trying to pay a bit more attention to the boundary.
[19:46:02] <steven_is_false> We don't have an AssignIndex trait yet, and can't do a[ii] = x for user types yet right?
[19:46:11] <graydon> steven_is_false: I think that is correct
[19:46:13] <jack> graydon, tjc: i think this might come down to svn vs. git for go. code.google.com urls are svn repos, which expose the branch/tag as part of the path. but git does not.
[19:46:25] <jack> go uses code.google.com a lot more than github i think.
[19:46:29] <graydon> huh
[19:46:54] <graydon> I hadn't thought of that, but it's remarkable if so!
[19:46:56] <jack> so this just turned out to bite people in an alternative workflow. in any case, we can fix it up front.
[19:46:57] <steven_is_false> graydon: Well, then my reimplementation of dynamic arrays but without storing lengths can't work then I guess.
[19:47:14] <jack> but the end of that linked thread is from two days ago. so this is a still a current issue with Go it seems.
[19:47:25] *** Quits: TD-Linux (TD-Linux@E338EB99.2B4F0AE0.A0A36CCE.IP) (Ping timeout)
[19:47:42] <graydon> steven_is_false: I think we'd be happy to take a patch! it's on the list (somewhere, I hope)
[19:47:55] <brendanc> go is in hg, I don't think they have a lot of external pacakges in svn
[19:48:02] <steven_is_false> graydon: I'll see what I can do.
[19:48:39] <jack> brendanc: does hg on code.google.com expose branches and tags in the path?
[19:48:54] <tjc> jack: oh, that's interesting
[19:49:05] <brendanc> well, hg lets you put #branch at the end of a URL
[19:49:17] <graydon> that's where we were planning to put it in our pkgids :)
[19:50:37] <brendanc> not sure whether go get handles it though
[19:50:52] <brendanc> I think it uses the basename of the url as the package name
[19:51:29] <cmr> As long as rustpkg remains separate from the core language (which it should), I don't see the issues in the thread being all-too-relevant
[19:51:52] <brendanc> I guess you can use the "path" "import name" form to work around that
[19:52:14] <tjc> pcwalton: ping
[19:52:20] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[19:52:31] <steven_is_false> Doews anyone else think that the core::ops module should get a little bit of documentation?
[19:52:47] <tjc> steven_is_false: documentation patches are *always* welcome
[19:52:49] <graydon> cmr: it'll be closely-enough-integrated..
[19:53:12] <steven_is_false> tjc: Cool, I'll work on that after I work on the Index set stuff.
[19:53:18] <tjc> great!
[19:53:46] <brendanc> not sure why you'd specify anything but an exact version if you're fetching from a repo anyway. only reason for sloppy versioning is if you happen to have a local copy shared with other things?
[19:54:36] <graydon> brendanc: also if you want to get "fixes" that don't break your code, perhaps
[19:54:47] <graydon> assuming the upstream is using semver appropriately
[19:54:49] <jack> brendan: you want sloppy-ish versions because multiple pieces may depend on the same library.
[19:54:52] <cmr> I think a really good package manager to draw inspiration from is luarocks. It works very well, nice and distributed.
[19:55:04] <jack> if their versions don't match, you have to resolve this somehow.
[19:55:49] <graydon> mhm, especially if you pass a data structure from one into the other
[19:56:07] <graydon> cases like that, loading both copies into the same binary doesn't solve
[19:56:15] <brendanc> I guess. It makes me uncomfortable, I'd be more inclined to fix the things that depend on the lib.
[19:56:37] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[19:56:59] <brendanc> btw graydon, I bet it's safe to remove that c.who == 'bors' from buildbot, it looks like the db retry patch was the real fix
[19:57:22] <graydon> brendanc: indeed! thanks _so_ much for tracking it down
[19:57:42] <brendanc> np, glad to see it working. I started feeling a bit parental towards it :)
[19:57:46] <jack> brendanc: you can easily get into transitive hell that way, where your fork's only change to lots of libs is a version pointer.
[19:57:58] <brendanc> yes that's true
[19:58:01] *** Quits: webber46 (webber46@moz-F6310FF0.lha.sgsnet.se) (Quit: webber46)
[19:58:19] <jack> and this isn't a theoretical issue. it happens all the time in clojure and erlang land, even with the sloppy versions :)
[19:58:45] <jack> well, it happens less than i expect it would. but my point is that i think this happens in practice.
[19:59:23] <graydon> yeah. I think this is especially common in cases where there's a widely used lib. different people bind to it at different stages in its lifecycle. it's good at maintaining a stable backward-compatible API but keeps adding to it.
[19:59:49] <graydon> eg. when you bind to libc 2.13, you are probably ok with 2.14, 2.15, ...
[19:59:52] <brendanc> maybe you could override the dependency versions for your dependencies in the master repo
[20:00:15] <brendanc> saves a bunch of pointless forking, still gives you total control over what you're building against
[20:00:18] <jack> mochiweb in erlang land is a good example of this as it's used by nearly every web touching thing there. clojure.data.json is a good example for clojure. or any of the popular ex-contrib libs.
[20:01:04] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Computer has gone to sleep.)
[20:01:14] <jack> brendanc: leiningen uses maven's versioning, except that it's expect you used "1.0.0" type specifications as opposed to intervals. it has resolution rules that try to do the right thing re: sloppiness. but lein also lets you override for the cases where this automatic behavior fails.
[20:01:46] *** Quits: brendan (brendaneic@2557E599.66715431.D25A875A.IP) (Quit: brendan)
[20:01:53] <jack> here's an example: https://github.com/technomancy/leiningen/blob/master/sample.project.clj#L41
[20:02:08] <steven_is_false> What part of the source deals with translating parsed operations into code?
[20:03:00] <graydon> steven_is_false: you mean mapping []= to a trait.method() ?
[20:03:49] <steven_is_false> graydon: That's the goal but I'll probable need a bit of hacking to make it there. I'm more asking about the stuff that's probable already there like + to plus - to sub, etc..
[20:03:55] *** Joins: infynyxx (infynyxx@580CA641.B5A086DD.4E529FF6.IP)
[20:04:15] <brendanc> jack: that looks useful
[20:04:33] <nmatsakis> steven_is_false: those are handled in typeck and also in trans
[20:04:40] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[20:04:43] <steven_is_false> nmatsakis: Thank you1
[20:04:48] <nmatsakis> steven_is_false: it's...a bit hairy
[20:04:53] <nmatsakis> steven_is_false: let me know if you have questions
[20:04:59] <steven_is_false> Okay.
[20:05:08] <kaeso> I was talking with ben noordhuis recently and it looks like libuv is now gaining a proper soname: https://github.com/joyent/libuv/commit/3eb6eb3
[20:05:25] <nmatsakis> steven_is_false: but handling []= will be a bit trickier, I imagine.
[20:05:30] <Diablo-D3> why do people care about javascript?
[20:05:47] <kaeso> can we consider unbundling its source from rust in some time?
[20:06:04] <nmatsakis> steven_is_false: because an overloaded `+` has a nice convenient AST node, whereas `x[3] = ...`...less so.
[20:06:20] <steven_is_false> nmatsakis: a[ii] = x --> set_index (a, ii, x) doesn't seem like it should be too hairy.
[20:06:31] <cmr> Diablo-D3: because it's the only language supported on the largest platform pretty much ever?
[20:06:34] *** Quits: infynyxx (infynyxx@580CA641.B5A086DD.4E529FF6.IP) (Ping timeout)
[20:08:37] <nmatsakis> steven_is_false: nothing ever seems that way :)
[20:09:03] <nmatsakis> steven_is_false: but it should be ok. we'll hvea to attach the overload method info to the assign node I guess
[20:09:13] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[20:09:22] *** Joins: ssbr (ssbr@moz-6A5A684C.wireless.utoronto.ca)
[20:10:19] <Diablo-D3> cmr: but its a horrible slow language that is difficult to keep sane and has ambiguous syntax
[20:10:51] <cmr> Diablo-D3: oh, we're talking about c++?
[20:10:51] <tjc> Diablo-D3: please keep an eye on the "Conduct" section of "https://github.com/mozilla/rust/wiki/Note-development-policy", specifically points 3, 4, and 5
[20:10:52] <steven_is_false> nmatsakis: What should I grep for?
[20:10:53] <cmr> ;)
[20:12:07] <nmatsakis> steven_is_false: the type checking code in question is is src/librustc/middle/typeck/check/mod.rs, search for lookup_op_method
[20:12:08] <steven_is_false> Diablo-D3: To be fair, a lot of problems with ECMAScript are problems with old versions of ECMAScript.
[20:13:02] <steven_is_false> It's just that for compatibility everyone has to use really old APIs, and versions.
[20:13:13] <steven_is_false> nmatsakis: Thank you.
[20:13:22] <jack> Diablo-D3: it doens't matter how fast your code is, or how much better it is in any dimension, if it goes unused due to slightly-harder distribution/install
[20:14:53] <Diablo-D3> tjc: if rust gets mixed up with javascript, then I'm not sure of rust's viability as a language anymore, so that policy doesnt really mean much
[20:15:16] <Diablo-D3> jack: if your code is impossible to maintain, the same things apply.
[20:15:19] <afrey> Can I match to a mut variable? I.e.  Triangle(ref points) => ... gives me: ~[@mut Point], but I want to modify the points, so I need @mut[@mut Point]
[20:15:46] <nmatsakis> afrey: you can do `ref mut`, if that's what you mean
[20:15:49] <tjc> Diablo-D3: the Rust development policy isn't up for debate. you can follow it, or decline to participate; those are really your only options 
[20:15:52] <jack> Diablo-D3: users don't care about that. and users seem to be choosing to use webapps over other kinds.
[20:16:21] <jack> whether that continues forever, i don't know. but right now it's an easy short term economic decision to use javascript where possible.
[20:16:27] * steven_is_false Blows nose, and coughs up mucus.
[20:16:33] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[20:16:55] <steven_is_false> I think I'll save working on this stuff for a later date. I'm feeling kind of sick right now.
[20:17:02] <tjc> oof, feel better
[20:17:04] <Diablo-D3> jack: yeah, I hate that, it makes no sense
[20:17:22] *** Quits: steven_is_false (quassel@moz-144077DE.bchsia.telus.net) (Client exited)
[20:17:48] <graydon> also: this is not #is_javascript_awesome. I'm sure there's a channel for that!
[20:18:37] <brendanc> btw graydon, do you have any plans to release the code for bors? it seems super useful
[20:18:52] *** Quits: BitPuffin (quassel@moz-8370D1B9.bredband.comhem.se) (Ping timeout)
[20:19:00] <graydon> brendanc: I expect so. we're talking to releng presently about possibly taking over its care and feeding.
[20:19:07] <afrey> nmatsakis: hm.. that gives me ~mut ~[@mut Point]... still not *quite* what I wanted, but thanks for the hint. I'll try some more...
[20:19:21] <cmr> graydon: also: what'sthe current status of the GC? did it actually land for 32bit or did you hold it back?
[20:19:22] <nmatsakis> afrey: it would help if you told me more about the types involved
[20:19:25] <graydon> brendanc: it's very small. just a few pages. I'd be happy to let you have a look..
[20:19:43] <brendanc> graydon: that'd be great
[20:20:01] <graydon> cmr: blocked on 32bit-running-out-of-memory
[20:20:11] <graydon> cmr: I'm working on fixes to remedy that
[20:20:43] <afrey> nmatsakis: well, if I only knew this myself... didn't get my mind around the different rust pointers, yet.
[20:20:52] *** Joins: BitPuffin (quassel@moz-8370D1B9.bredband.comhem.se)
[20:20:58] <cmr> graydon: thanks :)
[20:21:05] <nmatsakis> afrey: I just mean the type definition for Triangle
[20:21:14] <nmatsakis> afrey: or rather for the enum where Triangle is defined?
[20:21:48] <nmatsakis> afrey: I guess what's confusing to me that is that, given an &mut ~[...] (as you would get from `ref mut`), you should be able to modify this array
[20:22:09] <nmatsakis> afrey: so a fragment of code that's giving you the error would help
[20:22:18] *** Joins: victorporof_ (victorporo@10AA7997.880C8D58.79933D60.IP)
[20:22:28] *** Quits: rgrinberg (rgrinberg@AE999E95.52DE4C60.258AD6F5.IP) (Ping timeout)
[20:22:57] <afrey> nmatsakis: I figured... in the enum, I have: Triangle(~[@mut Point]),
[20:23:36] *** Quits: victorporof (victorporo@10AA7997.880C8D58.79933D60.IP) (Ping timeout)
[20:24:09] * afrey thinks he uses mut way too often.
[20:24:46] <nmatsakis> afrey: are the points shared between many triangles?
[20:24:52] <nmatsakis> afrey: or are they just x, y pairs?
[20:25:22] <nmatsakis> afrey: if the latter, you *probably* want Triangle(~[Point]) (just embed the points directly within the array, rather than using an @mut pointer)
[20:25:25] <nmatsakis> but that's neither here nor there
[20:25:45] <nmatsakis> in any case, if you do something like "match shape { Triangle(ref mut points) => { ... } }"
[20:25:54] <nmatsakis> you should be able to do: "points.push()" and so forth
[20:26:07] <nmatsakis> (to e.g. add new points)
[20:26:15] *** Quits: BitPuffin (quassel@moz-8370D1B9.bredband.comhem.se) (Client exited)
[20:26:24] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[20:26:35] *** Joins: BitPuffin (quassel@moz-8370D1B9.bredband.comhem.se)
[20:26:40] <afrey> nmatsakis: Point isn't quite as simple, so I prefer a layer of indirection, there.
[20:27:05] *** Quits: lmandel (lmandel@F2D29657.F60B0462.67AC9B1.IP) (Quit: lmandel)
[20:27:15] *** Quits: jviereck1 (Adium@moz-57512FAD.dynamic.hispeed.ch) (Quit: Leaving.)
[20:27:27] <afrey> nmatsakis: thanks for now. I'll continue trying... learning Rust on the go.
[20:27:35] *** Quits: BitPuffin (quassel@moz-8370D1B9.bredband.comhem.se) (Client exited)
[20:27:54] <nmatsakis> afrey: ok. np. was just going to say that if you wanted an `@mut ~[~mut Point]`, you would have to change  the definition of Triangle to Triangle(@mut ~[@mut Point])
[20:28:24] <nmatsakis> afrey: match can take references to values, but it can't make new `@` pointers that were not there before
[20:29:16] *** Joins: BitPuffin (quassel@moz-8370D1B9.bredband.comhem.se)
[20:30:40] *** Joins: igl (igl@moz-FB7F39.adsl.alicedsl.de)
[20:30:59] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[20:30:59] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/Yv2IFg
[20:30:59] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[20:31:22] <graydon> sigh, the tone in that dailywtf thread is so difficult to take
[20:32:00] <jack> graydon: yes. it's misdirected anger. and i feel bad for the go guys to have to deal with it.
[20:32:47] <tjc> brson: did we make a decision about whether to keep the pipes compiler?
[20:33:25] <jack> tjc: is that differnet than the protocol compiler?
[20:33:30] <graydon> I don't think it's come back up for discussion recently
[20:33:31] <tjc> jack: nope, same thing
[20:33:56] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[20:33:56] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/TbdmgA
[20:33:56] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[20:34:04] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Textual IRC Client: www.textualapp.com)
[20:34:14] *** Quits: fabiand (fabiand@moz-25B9B296.adsl.alicedsl.de) (Quit: Verlassend)
[20:34:29] *** Quits: pyrac (pyrac@moz-B95F505.w92-156.abo.wanadoo.fr) (Quit: pyrac)
[20:34:55] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[20:35:05] *** Quits: dherman (dherman@2557E599.66715431.D25A875A.IP) (Quit: dherman)
[20:35:33] <jack> tjc: another issue i just thought of with that go package issue is that it totally breaks things like git bisect. you can never go back. this is partially true with dependencies on branches.
[20:35:53] *** Joins: rgrinberg (rgrinberg@AE999E95.52DE4C60.258AD6F5.IP)
[20:36:28] <tjc> jack: hmm, I'm not sure I understand why?
[20:36:38] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[20:36:59] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[20:36:59] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/TbdmgA
[20:36:59] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[20:37:02] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[20:37:02] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/_dlfgg
[20:37:02] <ghrust> 13rust/06auto 1474625e1 15Corey Richardson: Better error reporting with renaming imports
[20:37:02] <ghrust> 13rust/06auto 14043c2d9 15Corey Richardson: Add test for resolution errors
[20:37:03] <ghrust> 13rust/06auto 14e7bed6e 15Corey Richardson: Update test
[20:37:04] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[20:37:04] <jack> because the bheavior of yrou code might change with the newer version of the lib.
[20:37:15] <jack> so if you are looking for an old bug, it might be masked completely
[20:37:29] <tjc> Hmm
[20:37:39] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[20:37:40] <tjc> in that case, wouldn't the maintainer change the package IDs referred to in imports...
[20:37:49] <tjc> oh wait, I think I see the problem
[20:37:49] *** Quits: jorendorff (jorendorff@moz-4BE034AB.ptr.us.xo.net) (Ping timeout)
[20:37:59] <tjc> if you went back in time, you would be pulling in a previous version of a dependency
[20:38:09] <jack> tjc: imagine if servo had a github dependency on rust-azure. there are changes in servo that depend on changes in rust-azure.
[20:38:12] *** Joins: jorendorff (jorendorff@moz-4BE034AB.ptr.us.xo.net)
[20:38:14] <tjc> when the bug manifests itself with new code + new library; what you get by bisecting is old code + old library
[20:38:38] *** Joins: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com)
[20:38:42] <jack> without knowing the branch/tag/version poitner for rust-azure, going back in the servo repo doesn't work at all
[20:38:46] <tjc> jack: you're thinking of the case where a module just declares a github dependency on, say, rust-azure, without a version or a branch?
[20:38:46] <tjc> Right
[20:38:56] <tjc> at first I was assuming you were talking about a scenario where stuff did have a version attached
[20:39:00] <tjc> which makes it a little better
[20:39:14] <tjc> but makes it hard to run the old code against the new version of the external dependency
[20:39:21] <jack> yes. branch pointers still can have this issue, but at least you know you're doing someting iffy in that case :)
[20:39:25] <tjc> Yeah
[20:39:45] <seth> hmm, rust has "deriving"?
[20:39:53] <seth> didn't realize that
[20:39:58] <tjc> tbh I think there's always going to be a certain amount of difficulty the more dependencies you have (and when you're not depending on a stable version of them) we can try to make some things easier but we can't be perfect
[20:40:03] <tjc> seth: only for a few known traits, not in general
[20:40:24] *** Quits: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com) (Ping timeout)
[20:40:40] <seth> tjc: just Eq and Ord?
[20:40:52] <jack> seth: you can derving Clone too
[20:40:53] <tjc> seth: and Clone, though I'm not sure if that's implemented yet
[20:41:20] <nmatsakis> graydon: looking over minutes, did we decide to remove multiple vars in a single let?
[20:41:36] <nmatsakis> graydon: (which for the record would be ok with me)
[20:41:39] <tjc> nmatsakis: we didn't make a decision
[20:41:42] <nmatsakis> ok
[20:41:52] <jack> nmatsakis: you were gone, and we thougth you were dissenting. everyone else wanted to nuke them.
[20:42:14] <nmatsakis> ok. I just want let and static to be consistent, I don't much care which way we go :)
[20:42:41] <jack> you can have multi statics now? or you just wnat there to be multi statics if we have multi let?
[20:42:55] <nmatsakis> the latter
[20:43:00] *** Quits: jorendorff (jorendorff@moz-4BE034AB.ptr.us.xo.net) (Ping timeout)
[20:43:06] <nmatsakis> or at minimum I think it's...surprising otherwise.
[20:43:10] <nmatsakis> not a deal breaker or anything.
[20:43:15] <graydon> I agree it should be consistent
[20:43:34] *** Joins: jorendorff (jorendorff@moz-4BE034AB.ptr.us.xo.net)
[20:43:41] <graydon> I don't remember who was strongly in favour of it as a convenience feature
[20:44:19] <nmatsakis> I like that it makes the question of the distributive nature of `mut` a mut point (pun intended)
[20:45:04] <nmatsakis> in practice, the only time I really want multiple variables is to write "let mut i = 0, n = vec.len()", and I wind up using two lines there anyhow
[20:45:38] <nmatsakis> not that I write this all that often anyhow.
[20:46:10] <engla> is this enough for convenience, let (v1,v2,v3,v4) = (0,1,2,3);
[20:46:18] <engla> that would stay?
[20:46:42] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[20:48:43] *** Quits: tcsc (tcsc@moz-A838B260.dhcp.nwtn.ct.charter.com) (Quit: computer sleeping)
[20:49:44] *** Quits: Blub\w (wry@moz-81C24917.wireless.dyn.drei.com) (Quit: bb2m)
[20:51:02] <tjc> engla: that would stay
[20:51:37] <brson> tjc: no, about the pipes compiler, but i'm strongly considering reimplementing oneshot and stream by hand
[20:51:54] <tjc> brson: ok. I won't close bugs related to it for the time being
[20:52:54] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[20:53:03] *** Quits: jorendorff (jorendorff@moz-4BE034AB.ptr.us.xo.net) (Ping timeout)
[20:53:19] *** Joins: dherman (dherman@2557E599.66715431.D25A875A.IP)
[20:53:20] *** ChanServ sets mode: +o dherman
[20:55:20] <afrey> What is pure vs impure access?
[20:56:06] *** Quits: thou (thou@moz-1C1CA9F7.fasttrackcomm.net) (Input/output error)
[20:56:30] <nmatsakis> afrey: what error message are you referring to? (and what version of the compiler are you using?)
[20:56:38] <nmatsakis> afrey: I suspect you want to upgrade to incoming.
[20:56:48] <bjz> graydon: hoya
[20:57:50] <graydon> bjz: hello
[20:57:52] <graydon> what's up?
[20:58:25] <bjz> graydon: I was wondering what your thoughts about that cond! pull were: https://github.com/mozilla/rust/pull/6333
[20:58:32] <afrey> nmatsakis: hm.. okay, I'll try that git branch...
[20:58:41] <bjz> graydon: wait for updates to macros?
[20:59:08] <graydon> oh. it looks ok in that form. it'll be ... almost backward compatible if macros get suitably enhanced
[20:59:27] <bjz> graydon: without the pipes?
[20:59:34] <graydon> I guess?
[20:59:46] <graydon> yeah, sure
[20:59:58] <graydon> I mean, we need more modular macros really
[21:00:05] <bjz> coolies.
[21:00:15] <graydon> meanwhile I have no strong feelings about taking or leaving additions to the core set
[21:00:18] <graydon> maybe others do
[21:00:27] <graydon> (anyone object if I r+ this?)
[21:00:38] <nmatsakis> graydon: no.
[21:01:10] <graydon> bjz: oh, is the pull updated to use it?
[21:01:30] <bjz> graydon: I'll update it now, and run tests
[21:01:42] <bjz> graydon: sorry, it was a while ago
[21:02:03] *** Joins: pnathan (pnathan@moz-764F5025.pools.spcsdns.net)
[21:03:50] <graydon> np. sorry I've been so slow with review.
[21:05:18] *** Quits: azita (Azita@2557E599.66715431.D25A875A.IP) (Quit: azita)
[21:05:40] <bstrie> so rust stickers? I hear there are stickers. where can I get a sticker??
[21:06:25] <snadon> i want one too
[21:06:47] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[21:06:47] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1407a0875 to 14d217174: 02http://git.io/N3iJvQ
[21:06:47] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[21:07:37] *** Joins: jorendorff (jorendorff@moz-4BE034AB.ptr.us.xo.net)
[21:09:10] <tjc> first I've heard!
[21:09:38] <brson> bstrie: there are stickers! the sticker distribution model is tbd. I'll find out as soon as azita resurfaces
[21:10:07] <bstrie> if I can't get a sticker then I'll begin a war of rust merch escalation
[21:10:17] <tjc> cool, free publicity
[21:10:18] <tjc> ;-)
[21:10:21] <bstrie> yeah, I bet you really would like this airbrushed rust logo t-shirt
[21:10:25] <bstrie> but you can't have one
[21:11:00] * pauls better get finished carving the Rust logo into this mountainside soon.
[21:11:07] <bstrie> mount rustmore
[21:11:45] <tjc> coincidentally, that's my car's pet name
[21:11:51] <bstrie> haha
[21:11:54] <kimundi> xD
[21:12:40] <kimundi> pauls, is macros-defining macros something that's expected to work?
[21:12:49] <pauls> I was saying at lunch that "rackage" would make a good name for the either the Racket or the Rust package manager.
[21:12:50] * tjc whispers "no"
[21:12:58] <kimundi> I'm getting an ice here: https://gist.github.com/Kimundi/b4ac13add9e458ac5b4f
[21:13:02] <tjc> to both, actually
[21:13:13] <pauls> kimundi: yes, in the sense that it's intended to work, but no in the sense that it's untested.
[21:13:13] *** Quits: pnathan (pnathan@moz-764F5025.pools.spcsdns.net) (Quit: Colloquy for iPhone - http://colloquy.mobi)
[21:13:27] <bstrie> rackage sounds like scooby-doo's package manager
[21:16:15] <pauls> kimundi: what Rust version? It's possible that the ongoing improvements to make macro exports and hygiene work have broken M-D-M.
[21:16:32] <kimundi> pauls: incmoing 
[21:16:32] <jclements> kimundi: your use of one of the outer macro's matched patterns *as* one of the matching names in the inner (generated) macro highlights what could be a serious issue in Rust's system. Pauls, have you taken a look at kimundi's gist?
[21:16:36] <kimundi> 2 days ago
[21:17:32] <pauls> Oh, I didn't notice that.
[21:17:43] <pauls> We don't have a way to escape `$` yet.
[21:17:46] <jclements> kimundi:  oh I see (I think) that you didn't want the $ on the inner pattern to survive. I have serious doubts about this part of the rewriter.
[21:17:47] *** Joins: solancile (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net)
[21:18:13] *** Quits: cdidd (cdidd@moz-EEAFEDB9.broadband.corbina.ru) (Ping timeout)
[21:18:17] *** Quits: Ralith (ralith@moz-50F3C77.vc.shawcable.net) (Ping timeout)
[21:18:24] <jclements> BTW, it's this (part) of the macro system--the use of $ and !, for instance--that gave Matthew Flatt the most pause when I described it. He suspected that things would not end well.
[21:19:14] <pauls> If we let `$$` expand to `$`, then I think `$$e` would have a good chance of working.
[21:19:38] <kimundi> pauls, jclements well my idea in that gist was to define a macro that handles one specific identifier that's in turn defined by the outher macro definiton.
[21:19:45] <jclements> pauls: don't you suspect that there's some weird combination of macros generating macros that will break this?
[21:20:13] <jclements> kimundi: your use looks like it should probably work, yes. I think. Maybe. Except...
[21:20:23] <pauls> jclements: I'm optimistic, because there's not a lot of interaction between the levels.
[21:20:36] <pauls> `cfg!` should just expand to a block...
[21:20:36] <jclements> how does the rewriter decide whether a $foo is a pattern variable to be replaced or a new binding instance in the inner macro?
[21:20:58] <kimundi> It could of course just be a buildin procedural macro, but this feels like it should work in principle
[21:20:59] *** Joins: brendan (brendaneic@2557E599.66715431.D25A875A.IP)
[21:21:06] <pauls> ...then the expander traverses the block and says "Ooh, a macro definition!"
[21:21:17] <pauls> jclements: The latter would have to be escaped.
[21:21:39] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[21:21:46] <jclements> pauls: wait *which* one would have to be escaped? the new binding instance?
[21:22:06] <pauls> jclements: Yes, since it's for the inside macro
[21:22:33] <kimundi> Couldn't you just say 'leave all $foo not declared on the lefthandside of the macro arm alone' ?
[21:22:44] <jclements> yeah, but what about a macro that expands into a macro definition that's used inside of another macro definition? That first macro definition isn't going to know that it's expanding into a context where $ needs to be escaped....
[21:23:25] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[21:23:25] <pauls> kimundi: I think so; that's more or less what Scheme does. However, I think it suits Scheme-style pattern variables more than Rust-style explicit interpolation.
[21:23:29] <jclements> pauls: I think that ultimately the "special identifier" thing may collapse, and we may just have to secretly do all of the work that scheme does to distinguish identifiers.
[21:24:32] <jclements> in fact that's probably not even a bad thing....
[21:24:33] <kimundi> pauls: Well it would be explicit in the sense that it would complain if none of the macro def levels end up claiming the varible
[21:24:42] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[21:25:19] *** Quits: doener (doener@moz-121949B3.unitymediagroup.de) (Quit: leaving)
[21:25:34] <jclements> so, for instance, I think we may not need--or even want--the $s at the *uses* of the pattern-bound identifiers.
[21:25:58] <pauls> I can't keep track of everything, but I think that the complex situations are just situations where the user has to use multiple levels of escaping.
[21:25:58] <jclements>  because those would be distinguished by their existence in the identifier environment.
[21:26:27] <pauls> jclements: I think that sort of thing is too DWIMmy for Rust?
[21:26:37] *** Quits: rgrinberg (rgrinberg@AE999E95.52DE4C60.258AD6F5.IP) (Ping timeout)
[21:26:39] <jclements> I think I'm saying that we will/should *already* have enough information to distinguish uses of pattern variables without the $'s.
[21:26:48] <jclements> And in fact...
[21:27:17] <pauls> I agree that the information is there...
[21:27:18] <jclements> I'm not sure what should happen if a user uses an identifier that's associated with a pattern variable but doesn't use a $. 
[21:27:37] <jclements> I suppose...
[21:27:41] <pauls> jclements: it should be treated literally; it might be a reference to a normal identifier.
[21:27:51] <pauls> We don't shadow between the levels.
[21:27:52] <jclements>  in the context of the macro definition?
[21:28:08] <jclements> pauls: also: what's our story about things expanding into keywords?
[21:28:17] <jclements> it should probably just work, right?
[21:28:30] <pauls> jclements: Oh, I see. On the LHS of a definition, it's more or less a literal.
[21:28:33] <pauls> jclements: yes.
[21:28:48] <pauls> ("syntactic literal")
[21:29:02] <pauls> (i.e. `else` in `cond`)
[21:29:04] <jclements> I think there are going to be some "surprising" consequences of hygiene....
[21:29:15] <jclements> sorry, afk
[21:31:50] <cmr> Ugh, I fixed a test failure in the wrong branch
[21:31:52] <nmatsakis> I don't really follow this conversation, but $$x resembles Makefile subroutines and that makes me sad.
[21:32:56] *** Joins: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net)
[21:33:03] <cmr> Another r+ for https://github.com/mozilla/rust/pull/6465 please? :)
[21:33:10] <kimundi> nmatsakis: It's about nested macro definitions, and macro varible that cross the nesting levels
[21:33:39] <kimundi> nmatsakis: Like the $i in line 7 here: https://gist.github.com/Kimundi/b4ac13add9e458ac5b4f
[21:33:45] <pauls> nmatsakis: don't worry; it'll only be inflicted on the most egregious of macrologists.
[21:34:29] *** Joins: jgilbert (jgilbert@2557E599.66715431.D25A875A.IP)
[21:34:35] <pauls> (note to self: probably don't propose to make the number of `$`s be exponential with the number of layers of escaping)
[21:34:37] <tjc> coincidentally, the Egregious Macrologists is the name of my Magnetic Fields cover band
[21:34:51] <cmr> Could someone pull https://github.com/mozilla/rust/pull/6476 off of bors' queue? It conflicts with another PR I have open.
[21:34:51] <pauls> With such hits as
[21:35:03] <kimundi> pauls, he, yeah was just thinking that
[21:35:05] <pauls> "I Thought You Were My Binder"
[21:35:08] <bjz> graydon: ok, seems to work
[21:35:18] <tjc> pauls+++++++++++++++
[21:35:29] <jclements> :)
[21:35:42] <kimundi> pauls, I think $s are restricted enough that you'd just have to add one $ per layer?
[21:35:59] <jclements> kimundi: I don't think the $s are necessary at all....
[21:36:06] <pauls> kimundi: yeah, it'd be pretty easy to do that.
[21:36:12] <jclements> kimundi: well, sorry, I mean only at the binding sites.
[21:36:29] <kimundi> jclements: Maybe, but that's kinda orthogonal to the issue here I think?
[21:36:49] <kimundi> Or maybe I missunderstand
[21:37:38] <pauls> kimundi: if we did that, we'd not need escaping at all.
[21:38:17] *** Quits: brendan (brendaneic@2557E599.66715431.D25A875A.IP) (Quit: brendan)
[21:38:21] <jclements> pauls: while I've got you...
[21:38:26] *** Joins: thou (thou@moz-1C1CA9F7.fasttrackcomm.net)
[21:38:38] <kimundi> yeah, but wouldn't be 'a solution without $' be identical to 'a solution with just one $' ?
[21:39:08] *** Joins: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com)
[21:39:29] <jclements> pauls: it looks like you came close to passing an interner everywhere, but then decided to go ahead and stick it in TLS. Is that accurate?
[21:39:37] <pauls> kimundi: also possible, but I think that one of the other options would still be preferable.
[21:39:39] <kimundi> or are you talking about just partially removing $s? Not sure what you mean with bind/use side
[21:39:46] <pauls> jclements: hmmm. yes, IIRC.
[21:39:51] <jclements> if so would it be all right with you if I just used TLS everywhere?
[21:40:17] <pauls> I just cache it in a bunch of places because using TLS that often... worried me somehow?
[21:40:35] *** Quits: maxli (maxli@F2D29657.F60B0462.67AC9B1.IP) (Quit: Leaving.)
[21:40:45] <pauls> kimundi: bind=LHS (of the `=>`s in `macro_rules!`), use=RHS
[21:40:59] *** Quits: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com) (Ping timeout)
[21:41:16] <kimundi> ah, thought so :)
[21:41:19] <pauls> I guess I may have worried that TLS would be slow... but it's mostly just error messages
[21:41:36] <pcwalton> http://www.youtube.com/watch?v=SRH-Ywpz1_I
[21:41:38] <jclements> pauls: I know what you're saying, but I'm almost as nervous as passing it around everywhere, in a world with mutable stuff.
[21:41:42] <pauls> ...or that TLS would be verbose, but I'll let you be the judge of it.
[21:42:54] *** Quits: donri (dag@moz-9BB61102.tbcn.telia.com) (Quit: Leaving)
[21:43:33] <kimundi> pcwalton: lol :)
[21:43:38] <pauls> (oh, I guess a macro could solve that, if nothing else)
[21:43:58] <pcwalton> (for those wondering about the provenance of the quote in the topic)
[21:44:07] <pcwalton> although I don't actually see that quote in that montage
[21:44:17] <pcwalton> there were so many ice puns that they couldn't fit them into a youtube video I suppose
[21:45:08] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:45:32] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[21:46:23] <pauls> http://www.qwantz.com/index.php?comic=931
[21:46:28] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[21:46:42] <pauls> (hover over the comic after reading it)
[21:47:08] * Sodel_the_V laughs
[21:48:12] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[21:48:19] <kimundi> :D
[21:48:45] <pcwalton> graydon: ping
[21:48:53] <ssbr> is it possible to specifically tell rust to build a 32 bit binary?
[21:48:58] <graydon> pcwalton: pong
[21:48:59] <ssbr> (to tell rustc)
[21:49:01] *** Joins: catpig (catpig@moz-D807334F.dip0.t-ipconnect.de)
[21:49:09] <pcwalton> graydon: we need the GC in Servo... it creates cycles during layout and it's taking gigabytes of memory after many reflows
[21:49:10] <graydon> ssbr: --target=i686-unknown-linux-gnu
[21:49:14] <pcwalton> what's the status on it?
[21:49:20] <ssbr> graydon: aha, thank you
[21:49:23] <graydon> pcwalton: I'm trying. 32bit version uses >2gb memory, crashes.
[21:49:27] <pcwalton> okay
[21:49:29] <graydon> pcwalton: I'm trying to make it .. need less
[21:49:32] <pcwalton> no rush, just checking
[21:49:34] <graydon> it's my only work item presenly
[21:49:42] <ssbr> oho, but of course I would need to do this when building rust itself, too
[21:49:43] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Client exited)
[21:50:10] <graydon> ssbr: you need to configure a cross-compiler, yeah
[21:50:23] *** Joins: steven_is_false (quassel@moz-144077DE.bchsia.telus.net)
[21:50:25] *** Quits: steven_is_false (quassel@moz-144077DE.bchsia.telus.net) (Client exited)
[21:50:36] <graydon> ssbr: see the option --target-triples=...
[21:50:48] *** Joins: steven_is_false (quassel@moz-144077DE.bchsia.telus.net)
[21:50:50] *** Quits: steven_is_false (quassel@moz-144077DE.bchsia.telus.net) (Client exited)
[21:50:52] <graydon> you probably want x86_64-unknown-linux-gnu,i686-unknown-linux-gnu there (if you're on linux)
[21:50:56] *** Joins: steven_is_false (quassel@moz-144077DE.bchsia.telus.net)
[21:50:59] *** Quits: steven_is_false (quassel@moz-144077DE.bchsia.telus.net) (Client exited)
[21:51:11] *** Quits: victorporof_ (victorporo@10AA7997.880C8D58.79933D60.IP) (Quit: victorporof_)
[21:52:00] <ssbr> graydon: no, that's OK. I was hoping to work around a minor issue with this, but this will take more work than the actual thing
[21:52:19] *** Joins: Ralith (ralith@moz-729DC03E.wireless.sfu.ca)
[21:52:25] *** Quits: jgilbert (jgilbert@2557E599.66715431.D25A875A.IP) (Quit: Leaving)
[21:53:00] *** Quits: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net) (Quit: ["Textual IRC Client: www.textualapp.com"])
[21:53:30] *** Joins: brendan (brendaneic@2557E599.66715431.D25A875A.IP)
[21:54:23] *** Quits: Ralith (ralith@moz-729DC03E.wireless.sfu.ca) (Ping timeout)
[21:55:49] *** Joins: Ralith (ralith@moz-729DC03E.wireless.sfu.ca)
[21:57:51] *** Quits: dherman (dherman@2557E599.66715431.D25A875A.IP) (Quit: dherman)
[21:58:34] *** Quits: Ralith (ralith@moz-729DC03E.wireless.sfu.ca) (Ping timeout)
[21:58:47] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:58:57] *** Quits: brendan (brendaneic@2557E599.66715431.D25A875A.IP) (Quit: brendan)
[22:00:11] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[22:00:34] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[22:00:34] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/cRPdzQ
[22:00:34] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[22:00:49] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Textual IRC Client: www.textualapp.com)
[22:00:54] *** Joins: Ralith (ralith@moz-729DC03E.wireless.sfu.ca)
[22:01:56] *** Joins: brendan (brendaneic@2557E599.66715431.D25A875A.IP)
[22:03:43] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[22:03:43] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/K7-8Dw
[22:03:43] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[22:03:45] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[22:03:45] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/-tW7jg
[22:03:45] <ghrust> 13rust/06auto 1474625e1 15Corey Richardson: Better error reporting with renaming imports
[22:03:45] <ghrust> 13rust/06auto 14043c2d9 15Corey Richardson: Add test for resolution errors
[22:03:46] <ghrust> 13rust/06auto 14e7bed6e 15Corey Richardson: Update test
[22:03:47] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[22:03:59] *** Quits: Sodel_the_V (user@moz-853663E1.va.shawcable.net) (Quit: Eaten by a grue)
[22:04:30] <cmr> tjc: thanks
[22:04:51] <tjc> cmr: np
[22:05:31] *** Quits: brendan (brendaneic@2557E599.66715431.D25A875A.IP) (Quit: brendan)
[22:05:34] *** Joins: steven_is_false (quassel@moz-144077DE.bchsia.telus.net)
[22:06:35] <steven_is_false> Hey, does anyone here have experience with vector math? I have a matrix representing my camera, and I need to extract a vector from it that represents the direction my camera is facing.
[22:07:28] <cmr> steven_is_false: do you want the normal?
[22:08:06] <steven_is_false> cmr: If the camera was a quad representing the camera screen then yes.
[22:08:57] *** Quits: Ralith (ralith@moz-729DC03E.wireless.sfu.ca) (Ping timeout)
[22:09:29] <steven_is_false> cmr: I'm dumb. I just realized I just need to multiply a unit vector by the matrix.
[22:09:53] <steven_is_false> matrix * vec3 (1.0, 0.0, 0.0) (or which ever vector faces inward.
[22:11:05] <steven_is_false> cmr: At least I think that's the right answer.
[22:12:32] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[22:12:41] <cmr> I was just guessing based on my knowledge from 3d modeling + animation :)
[22:16:29] *** Joins: themgt (themgt@moz-F5F3FFDF.dhcp.gnvl.sc.charter.com)
[22:18:31] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[22:20:27] *** Quits: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net) (Client exited)
[22:20:33] *** Joins: dherman (dherman@2557E599.66715431.D25A875A.IP)
[22:20:33] *** ChanServ sets mode: +o dherman
[22:20:50] <Jeaye> steven_is_false: https://github.com/Jeaye/q3/blob/master/src/math/matrix.rs#L160
[22:21:16] <steven_is_false> Jeaye: Thanks!
[22:21:19] <Jeaye> Cheers.
[22:21:48] *** Joins: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net)
[22:21:56] <Jeaye> No multiplication needed. You should be able to extract it right from the matrix.
[22:22:10] <Jeaye> As shown there. Though you may need to normalize.
[22:23:51] *** Joins: azita (Azita@2557E599.66715431.D25A875A.IP)
[22:24:12] <steven_is_false> Jeaye: Doh, I forgot to normalize
[22:24:29] <Jeaye> :P
[22:26:03] *** Joins: HOLYCOWBATMAN (Mibbit@moz-AB722A1C.mc.videotron.ca)
[22:28:56] *** Quits: BitPuffin (quassel@moz-8370D1B9.bredband.comhem.se) (Client exited)
[22:30:38] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[22:30:38] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 142b87238 to 14043d022: 02http://git.io/N3iJvQ
[22:30:38] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[22:30:40] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[22:30:40] <ghrust> 01[13rust01] 15bors pushed 6 new commits to 06auto: 02http://git.io/GsYydQ
[22:30:40] <ghrust> 13rust/06auto 145ce0795 15gifnksm: libstd: impl Num for BigUint/BigInt
[22:30:40] <ghrust> 13rust/06auto 14e369546 15gifnksm: libstd: impl `Orderable` for `BigUint`/`BigInt`
[22:30:41] <ghrust> 13rust/06auto 1441eaa97 15gifnksm: libstd: `Rational` requires `Integer` as type bounds instead of `Num`
[22:30:43] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[22:30:47] *** Quits: jdm (jdm@DB05BBF2.BB1F48F2.971E19F6.IP) (Quit: Lost terminal)
[22:32:12] <steven_is_false> Ugh, I think I've got that working but now I've got to do some annoying inverse matrix tidying up.
[22:34:41] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[22:35:33] <seth> when can you leave out the parentheses around a closure argument?
[22:35:55] *** Quits: joone (joone@moz-8D1F45AD.jf.intel.com) (Ping timeout)
[22:35:55] <seth> is that a general feature or just for certain builtins?
[22:37:06] <steven_is_false> seth: I don't understand what you mean?
[22:37:16] *** Joins: miseria (Mibbit@moz-D26F0273.protectedgroup.com)
[22:37:23] <miseria> "no confies en la roca con la que puedes chocar, apartala del camino por los que vienen atras" bienvenidos: http://castroruben.com *temo_a_un_ser_sin_rival*
[22:37:24] *** Parts: miseria (Mibbit@moz-D26F0273.protectedgroup.com) ()
[22:37:25] <tjc> seth: Yeah, I'm not sure I know what you mean either -- can you paste an example of what you're trying to do?
[22:37:53] <tjc> heh, whenever I try to kickban a spammer, they're already kicked by the time I try to do it
[22:38:00] <tjc> I guess irc.mozilla.org has bots that do that, probably
[22:38:27] <seth> steven_is_false/tjc: ah, i guess it's only for do
[22:39:01] <tjc> seth: oh, you mean the syntactic sugar for do and for
[22:39:05] <tjc> yeah, those two are special cases
[22:39:39] *** Joins: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com)
[22:40:54] *** Joins: Ralith (ralith@moz-729DC03E.wireless.sfu.ca)
[22:41:25] *** Quits: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com) (Ping timeout)
[22:42:49] *** Quits: Ralith (ralith@moz-729DC03E.wireless.sfu.ca) (Ping timeout)
[22:43:13] *** Quits: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[22:43:33] *** Joins: Sodel_the_V (user@moz-853663E1.va.shawcable.net)
[22:44:48] *** Joins: Ralith (ralith@moz-729DC03E.wireless.sfu.ca)
[22:45:11] *** Quits: Sodel_the_V (user@moz-853663E1.va.shawcable.net) (Quit: Eaten by a grue)
[22:49:31] <cmr> ICE on tests: http://buildbot.rust-lang.org/builders/auto-linux/builds/1250/steps/test/logs/stdio
[22:49:36] <cmr> I don't think it's my fault
[22:53:24] *** Joins: joone (joone@2BD403F.16ABCAEA.68255BF8.IP)
[22:55:49] *** Joins: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net)
[22:56:42] *** Quits: solancile (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net) (Ping timeout)
[22:59:45] *** Quits: HOLYCOWBATMAN (Mibbit@moz-AB722A1C.mc.videotron.ca) (Quit: http://www.mibbit.com ajax IRC Client)
[23:01:58] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[23:02:11] *** Quits: Jesin (Jessin_@moz-5654D37.washdc.fios.verizon.net) (Quit: Leaving)
[23:04:46] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[23:05:05] *** Quits: saml (sam@moz-14C16814.cst.lightpath.net) (Quit: Leaving)
[23:05:20] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[23:05:59] *** Quits: Ralith (ralith@moz-729DC03E.wireless.sfu.ca) (Ping timeout)
[23:06:47] *** Joins: Ralith (ralith@moz-729DC03E.wireless.sfu.ca)
[23:07:47] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Client exited)
[23:08:17] *** Quits: steven_is_false (quassel@moz-144077DE.bchsia.telus.net) (Ping timeout)
[23:08:38] *** Joins: brendan (brendaneic@2557E599.66715431.D25A875A.IP)
[23:08:39] *** Quits: Ralith (ralith@moz-729DC03E.wireless.sfu.ca) (Ping timeout)
[23:09:36] *** Joins: Ralith (ralith@moz-729DC03E.wireless.sfu.ca)
[23:09:45] *** Joins: steven_is_false (quassel@moz-144077DE.bchsia.telus.net)
[23:13:09] *** Joins: Jesin (Jessin_@moz-5654D37.washdc.fios.verizon.net)
[23:13:24] <steven_is_false> I'm curious is there a fast (no-branching) way to do (x > 0.5) : 1.0 : 0.0 ?
[23:13:32] *** Quits: Ralith (ralith@moz-729DC03E.wireless.sfu.ca) (Ping timeout)
[23:13:55] *** Joins: solancile (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net)
[23:13:56] *** Quits: heftig (heftig@moz-E2CF292F.dip0.t-ipconnect.de) (Quit: Quitting)
[23:15:05] *** Joins: heftig (heftig@moz-E2CF292F.dip0.t-ipconnect.de)
[23:15:22] <cmr> steven_is_false: http://graphics.stanford.edu/~seander/bithacks.html is pretty much the authoritative reference afaik
[23:15:47] <cmr> I really doubt it though
[23:15:49] <steven_is_false> cmr: Oh right, thanks!
[23:16:03] *** Joins: Ralith (ralith@moz-729DC03E.wireless.sfu.ca)
[23:16:13] <steven_is_false> cmr: ! floor !
[23:16:37] <steven_is_false> cmr: floor (x - epsilon) or something like that.
[23:16:50] <thatfreakingguy> Are C-like Rust enums guaranteed to have the same size as C enums?
[23:16:51] <steven_is_false> floor (x + 0.5)
[23:17:17] <cmr> steven_is_false: make sure you benchmark that :)
[23:17:35] <engla> steven_is_false: isn't there conditional move without float? that way it could compile without branch anyway
[23:17:48] <steven_is_false> engla: Probable.
[23:18:03] *** Quits: Ralith (ralith@moz-729DC03E.wireless.sfu.ca) (Ping timeout)
[23:18:26] *** kimundi is now known as zz_kimundi
[23:18:37] <steven_is_false> thatfreakingguy: They're guaranteed to be ints, and so are c enums.
[23:19:01] <bstrie> steven_is_false: well it depends, in general the representation of rust enums is deliberately unspecified
[23:19:07] <bstrie> to allow for various optimizations
[23:19:27] <steven_is_false> bstrie: Okay.
[23:19:33] <bstrie> structs are the ones that are guaranteed to be the same as C
[23:20:31] <steven_is_false> thatfreakingguy: Aren't enums guaranteed to be treated the same as ints in C anyways?
[23:20:54] <steven_is_false> thatfreakingguy: You could just use foo (libc::c_int) instead foo (myenum)
[23:21:21] <engla> steven_is_false: C enums are not guaranteed to be ints (unfortunately)
[23:21:28] <thatfreakingguy> Yeah, converting my enum into c_int seems to work
[23:21:32] <steven_is_false> engla: Oh.
[23:21:32] <thatfreakingguy> Aw man
[23:21:41] <strcat> steven_is_false: no there are no guarantees about enums
[23:21:45] <strcat> and C enums aren't a defined size
[23:21:58] <strcat> there's no ABI for C enums
[23:22:12] <strcat> on x86 gcc often uses the same size as 'int' but not always
[23:22:24] <strcat> on ARM it *always* uses the smallest possible size to hold all the constants
[23:22:30] <strcat> by default at least
[23:22:33] <strcat> can use -fno-short-enums
[23:22:38] <strcat> err, maybe no -f
[23:23:15] <thatfreakingguy> So it's not generally possible to use C code that uses enums in Rust?
[23:23:30] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[23:23:31] <strcat> it's not generally possible to use C enums from other languages or across compilers
[23:23:35] <strcat> unless you make assumptions
[23:24:14] <thatfreakingguy> Alright, thanks. Time to make assumptions
[23:24:17] *** Quits: jorendorff (jorendorff@moz-4BE034AB.ptr.us.xo.net) (Quit: jorendorff)
[23:24:18] <strcat> if you only care about linux on x86 and the *default* compile options of gcc/clang/icc you can assume that they are sizeof(int) unless they have numbers above that ;p
[23:25:18] *** Joins: rgrinberg (rgrinberg@AE999E95.52DE4C60.258AD6F5.IP)
[23:26:05] <steven_is_false> Uggh. I get awful aliasing issues if I use the squary, and blocky cartesian coordinate system but spherical coordinates are really slow
[23:26:28] <cmr> steven_is_false: what are you working on?
[23:26:41] *** Parts: spaceships (spaceships@moz-8323E7E6.msl-mt.client.bresnan.net) ()
[23:26:44] <steven_is_false> cmr: I'm working on the glsl programs for my game engine.
[23:26:57] <cmr> ahh
[23:27:00] *** Quits: rgrinberg (rgrinberg@AE999E95.52DE4C60.258AD6F5.IP) (Ping timeout)
[23:27:12] <strcat> thatfreakingguy: http://ix.io/5DF it's really annoying :(
[23:27:28] <strcat> especially since gcc defaults to -fshort-enums on *some* platforms only
[23:27:33] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[23:27:33] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/GsYydQ
[23:27:33] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[23:27:47] <steven_is_false> cmr: For example for cel-shading I'm sampling my normals, and my pallete at low resolution but it only looks nice if sampled in spherical coordinates.
[23:27:53] <strcat> I guess the solution is to eventually have libclang support in rustpkg
[23:27:58] <strcat> and be able to get actual sizes of things
[23:28:04] <strcat> by asking the C compiler...
[23:28:07] *** Quits: thou (thou@moz-1C1CA9F7.fasttrackcomm.net) (Input/output error)
[23:29:03] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Ping timeout)
[23:30:02] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Connection reset by peer)
[23:30:07] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[23:30:33] *** Quits: brendan (brendaneic@2557E599.66715431.D25A875A.IP) (Quit: brendan)
[23:30:37] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[23:30:37] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/PxpFsA
[23:30:37] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[23:30:39] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[23:30:39] <ghrust> 01[13rust01] 15bors pushed 30 new commits to 06auto: 02http://git.io/YTnpnw
[23:30:39] <ghrust> 13rust/06auto 1434be071 15Brian Anderson: core::rt: Remove Close trait...
[23:30:39] <ghrust> 13rust/06auto 140b4d4ed 15Brian Anderson: core::rt: Fix a warning about unnecessary mutable variable
[23:30:40] <ghrust> 13rust/06auto 14b2fbd34 15Brian Anderson: core::rt: Begin implementing TcpStream...
[23:30:43] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[23:31:04] *** Quits: themgt (themgt@moz-F5F3FFDF.dhcp.gnvl.sc.charter.com) (Quit: themgt)
[23:31:14] <cmr> strcat: I didn't realize enums werent specified in the ABIs (though I should have noticed, I've read the sysv abi a few times). yucky!
[23:31:36] *** Quits: mschifer (Adium@2557E599.66715431.D25A875A.IP) (Quit: Leaving.)
[23:31:45] <strcat> yeah it's pretty awful. one of the motivations from C++11 having specified sizes for enums
[23:31:55] <strcat> that didn't make it into C11 though
[23:32:04] <steven_is_false> Actually, this is bizarre. Does that mean really portable APIs can't have enums in them?
[23:32:09] <strcat> steven_is_false: yep
[23:32:18] <strcat> need #define or static const
[23:32:30] <steven_is_false> strcat: So that explains GLenum and friends!
[23:32:36] <strcat> or use C++11 + extern "C" and 'enum class foo: uint8_t' ;p
[23:34:44] <steven_is_false> How many times does one need more than 256 constants in an enum anyways? The whole situation is bizarre.
[23:35:09] <strcat> steven_is_false: well that's why -fshort-enums exists
[23:35:24] <strcat> and why they defaulted to it on new archs (ARM)
[23:37:04] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Quit: Leaving.)
[23:39:14] <steven_is_false> strcat: C doesn't warn on converting an enum into an int though.
[23:39:27] <strcat> steven_is_false: well warnings are compiler specific
[23:39:29] <steven_is_false> strcat: So I guess one can just have an enum but have the function take an int or whatever.
[23:39:49] <strcat> there are only a few things mandated as warnings
[23:40:08] <steven_is_false> strcat: Fair enough.
[23:40:10] *** Joins: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com)
[23:41:59] *** Quits: samnardoni (samnardoni@moz-ECB14881.cable.virginmedia.com) (Ping timeout)
[23:44:19] <steven_is_false> One thing which makes me annoyed is that it looks better to sample at a non-integer number than an integer number. What does it even mean to have 3.43434 colors in the pallete?
[23:44:44] *** Joins: Ralith (ralith@moz-50F3C77.vc.shawcable.net)
[23:45:25] *** Joins: jgilbert (jgilbert@2557E599.66715431.D25A875A.IP)
[23:47:11] *** Joins: themgt (themgt@moz-F5F3FFDF.dhcp.gnvl.sc.charter.com)
[23:47:25] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[23:47:27] <steven_is_false> Doesn't the ABI spec depend on the platform? If some group wanted they could specify the ABI for enums on their patform.
[23:49:13] <cmr> steven_is_false: yup
[23:50:07] <thatfreakingguy> More fun with enums: Is there a pain-free way to convert an integer into an enum?
[23:50:23] <steven_is_false> thatfreakingguy: myint as Enum
[23:50:26] <strcat> thatfreakingguy: no
[23:50:29] <strcat> not safe
[23:50:37] <steven_is_false> strcat: Oh right.
[23:50:58] <steven_is_false> I just used transmute
[23:51:05] <cmr> rust code has a tendency to get really deeply indented
[23:51:08] <cmr> it seems
[23:51:37] <steven_is_false> However, supposedly LLVM would optimize match foo { CONSTANT => EnumValue, etc.. into something faster.
[23:51:50] <strcat> if you have 'enum Foo { A = 1, B = 2, C = 5 }' and you write unsafe { let x: Foo = cast::transmute(5) }, that's what C would call undef behaviour
[23:51:54] <strcat> err
[23:51:58] <steven_is_false> I don't know if that's actually true.
[23:51:59] <strcat> I mean cast::transmute(3) ;p
[23:53:52] *** Joins: jorendorff (jorendorff@moz-4BE034AB.ptr.us.xo.net)
[23:56:26] <steven_is_false> rusti: 1
[23:56:30] <rusti> 1
[23:56:34] <strcat> rusti: 1
[23:56:35] <rusti> 1
[23:56:44] <steven_is_false> rusti: 0__0
[23:56:45] <rusti> 0
[23:56:46] <cmr> rusti: println("rusti: 1")
[23:56:47] <rusti> rusti: 1
[23:56:50] <cmr> :p
[23:57:35] *** Quits: pepijndevos (pepijndevo@9EACEF43.E50A3180.BCE47D84.IP) (Ping timeout)
[23:58:03] *** Quits: echristo (echristo@D423593A.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[23:58:14] <steven_is_false> rusti: for uint::range (0, 4) |_| { println ("cmr: spam") }
[23:58:15] <rusti> cmr: spam
[23:58:15] <rusti> cmr: spam
[23:58:15] <rusti> cmr: spam
[23:58:15] <rusti> cmr: spam
[23:58:50] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[23:58:54] <steven_is_false> rusti: for uint::range (0, 4) |_| { println ("steven_is_false: ping") }
[23:58:55] <rusti> steven_is_false: ping
[23:58:55] <rusti> steven_is_false: ping
[23:58:55] <rusti> steven_is_false: ping
[23:58:55] <rusti> steven_is_false: ping
[23:59:31] <steven_is_false> rusti: sleep (4); println ("steven_is_false: time for a break")
[23:59:48] <strcat> rusti: 1
[23:59:49] <rusti> 1
[23:59:50] <strcat> hm
[23:59:52] <strcat> rusti: aa
[23:59:57] <steven_is_false> Oh wait, the VM dies after a while anyways.
[23:59:59] <strcat> oh I guess I broke error reporting again
