[00:03:05] *** Quits: mbx (textual@moz-2iv.90f.85.193.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[00:04:32] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Ping timeout: 121 seconds)
[00:07:03] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[00:07:03] *** ChanServ sets mode: +o pcwalton
[00:10:26] *** Quits: azakai (alon@moz-h8f91t.mh2d.1ibb.0101.2620.IP) (Quit: Ex-Chat)
[00:11:56] *** khuey|away is now known as khuey
[00:14:47] <brson> pnkfelix: i've narrowed the problem down to the openssl bindings failing to establish the connection
[00:16:24] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Connection closed)
[00:18:25] *** Quits: larsberg (Adium@moz-kmvlue.cable.rcn.com) (Quit: Leaving.)
[00:19:59] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[00:19:59] *** ChanServ sets mode: +o pcwalton
[00:21:54] *** terrence is now known as terrence-afk
[00:24:38] *** Quits: mccr8 (mccr8@moz-cfhap5.mtv2.mozilla.com) (Quit: quit)
[00:30:18] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Connection closed)
[00:32:20] *** Joins: pcwalton (pcwalton@moz-hgutgo.rgd2.9kg1.0101.2620.IP)
[00:32:20] *** ChanServ sets mode: +o pcwalton
[00:33:10] *** Joins: azakai|2 (alon@moz-l3ofdg.sntcca.sbcglobal.net)
[00:35:59] *** Quits: pcwalton (pcwalton@moz-hgutgo.rgd2.9kg1.0101.2620.IP) (Connection closed)
[00:36:14] *** Quits: brson (brson@moz-cfhap5.mtv2.mozilla.com) (Ping timeout: 121 seconds)
[00:36:46] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[00:36:46] *** ChanServ sets mode: +o pcwalton
[00:37:24] *** Joins: brson (brson@moz-qjbkeh.mtv2.mozilla.com)
[00:37:24] *** ChanServ sets mode: +o brson
[00:39:16] *** khuey is now known as khuey|away
[00:40:10] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Connection closed)
[00:46:52] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[00:46:52] *** ChanServ sets mode: +o pcwalton
[00:52:44] *** Quits: brson (brson@moz-qjbkeh.mtv2.mozilla.com) (Quit: leaving)
[00:53:22] *** Joins: brson (brson@moz-qjbkeh.mtv2.mozilla.com)
[00:53:22] *** ChanServ sets mode: +o brson
[00:58:06] *** Quits: till (till@moz-4oo6qi.adsl.alicedsl.de) (Ping timeout: 121 seconds)
[00:58:55] *** Joins: till (till@moz-5ctif6.dyn.telefonica.de)
[01:02:05] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Connection closed)
[01:03:40] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[01:03:40] *** ChanServ sets mode: +o pcwalton
[01:18:54] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Connection closed)
[01:19:43] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[01:19:43] *** ChanServ sets mode: +o pcwalton
[01:27:30] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Connection closed)
[01:29:06] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[01:29:06] *** ChanServ sets mode: +o pcwalton
[01:35:08] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Ping timeout: 121 seconds)
[01:55:24] *** Quits: roc (chatzilla@moz-8b3t8p.nn3i.kiip.e780.2400.IP) (Ping timeout: 121 seconds)
[01:59:56] *** Joins: roc (chatzilla@moz-8b3t8p.nn3i.kiip.e780.2400.IP)
[02:03:55] *** Joins: laleh (Adium@moz-5nn77u.glbd.rk59.e000.2605.IP)
[02:14:37] <brson> pnkfelix: you might try this command `openssl s_client -connect crater.rust-lang.org:443`
[02:14:45] <brson> pnkfelix: that fails for me on the mac machine where crater-cli doesn't work
[02:14:52] <brson> i'm thinking this could be a bug in the hyper ssl server
[02:16:48] *** Quits: laleh (Adium@moz-5nn77u.glbd.rk59.e000.2605.IP) (Quit: Leaving.)
[02:19:27] <brson> pnkfelix: fyi, this seems to be a problem with all our ssl
[02:19:36] <brson> this doesn't work either against the docs: openssl s_client -connect doc.rust-lang.org:443
[02:21:13] <brson> acrichto: fyi ^ - it seems that openssl on os x won't negotiate with our tls proxy
[02:21:39] <brson> sfackler says it's because the system openssl is old and doesn't support the modern protocols
[02:29:14] *** Quits: brson (brson@moz-qjbkeh.mtv2.mozilla.com) (Connection closed)
[02:42:19] *** Joins: ScottMichaud (ScottMichau@moz-i4mljt.cpe.pppoe.ca)
[02:54:55] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[02:54:55] *** ChanServ sets mode: +o pcwalton
[02:58:17] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Connection closed)
[03:02:20] *** Joins: pcwalton (pcwalton@moz-hgutgo.rgd2.9kg1.0101.2620.IP)
[03:02:20] *** ChanServ sets mode: +o pcwalton
[03:07:57] *** Quits: pcwalton (pcwalton@moz-hgutgo.rgd2.9kg1.0101.2620.IP) (Ping timeout: 121 seconds)
[03:16:34] *** Joins: jdm (jdm@moz-8ti795.dsl.teksavvy.com)
[03:17:33] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[03:17:33] *** ChanServ sets mode: +o pcwalton
[03:27:03] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Connection closed)
[03:28:38] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[03:28:38] *** ChanServ sets mode: +o pcwalton
[03:33:30] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Connection closed)
[03:35:03] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[03:35:03] *** ChanServ sets mode: +o pcwalton
[03:43:27] *** khuey|away is now known as khuey
[03:45:56] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Ping timeout: 121 seconds)
[05:11:57] *** Joins: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net)
[05:11:57] *** ChanServ sets mode: +o pcwalton
[05:29:03] *** Quits: till (till@moz-5ctif6.dyn.telefonica.de) (Ping timeout: 121 seconds)
[05:42:04] *** Joins: ddamjano (Instantbird@moz-d6m.su1.250.80.IP)
[06:31:05] *** Quits: jdm (jdm@moz-8ti795.dsl.teksavvy.com) (Connection closed)
[06:31:14] *** Joins: jdm (jdm@moz-8ti795.dsl.teksavvy.com)
[06:37:49] *** Quits: ddamjano (Instantbird@moz-d6m.su1.250.80.IP) (Ping timeout: 121 seconds)
[07:09:44] *** Joins: ddamjano (Instantbird@moz-t9l1pk.meeting.ietf.org)
[07:15:08] *** Quits: jdm (jdm@moz-8ti795.dsl.teksavvy.com) (Quit: )
[07:20:22] *** Quits: roc (chatzilla@moz-8b3t8p.nn3i.kiip.e780.2400.IP) (Ping timeout: 121 seconds)
[07:44:33] *** Joins: Dexter (Alessio@moz-moqdnh.retail.telecomitalia.it)
[07:46:10] *** Quits: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net) (Client exited)
[08:08:39] *** Joins: roc (chatzilla@moz-crh.81q.98.121.IP)
[08:32:08] *** Quits: ddamjano (Instantbird@moz-t9l1pk.meeting.ietf.org) (Ping timeout: 121 seconds)
[08:36:10] *** Joins: ddamjano (Instantbird@moz-t9l1pk.meeting.ietf.org)
[08:59:43] *** Quits: ddamjano (Instantbird@moz-t9l1pk.meeting.ietf.org) (Ping timeout: 121 seconds)
[09:11:29] *** khuey is now known as khuey|away
[09:35:35] *** Joins: mukilan (mukilan@moz-epa.uss.164.122.IP)
[10:01:51] *** Joins: mbx (textual@moz-2iv.90f.85.193.IP)
[10:03:58] *** Joins: bjz (bjz@moz-puppgq.tpgi.com.au)
[10:18:08] *** Joins: ScottMichaud_ (ScottMichau@moz-i4mljt.cpe.pppoe.ca)
[10:21:02] *** Quits: ScottMichaud (ScottMichau@moz-i4mljt.cpe.pppoe.ca) (Ping timeout: 121 seconds)
[11:06:40] *** Joins: ddamjano (Instantbird@moz-t9l1pk.meeting.ietf.org)
[11:59:09] *** Quits: bjz (bjz@moz-puppgq.tpgi.com.au) (Quit: My Mac has gone to sleep. ZZZzzz…)
[12:03:40] *** Quits: ddamjano (Instantbird@moz-t9l1pk.meeting.ietf.org) (Connection closed)
[12:05:48] *** Joins: ddamjano (Instantbird@moz-om1gl7.7k9o.94cl.067c.2001.IP)
[12:08:46] *** Joins: till (till@moz-5ctif6.dyn.telefonica.de)
[12:27:50] *** khuey|away is now known as khuey
[13:00:39] *** Quits: ddamjano (Instantbird@moz-om1gl7.7k9o.94cl.067c.2001.IP) (Ping timeout: 121 seconds)
[13:03:48] *** Joins: larsberg (Adium@moz-kmvlue.cable.rcn.com)
[13:03:48] *** ChanServ sets mode: +o larsberg
[13:06:59] *** Quits: larsberg (Adium@moz-kmvlue.cable.rcn.com) (Quit: Leaving.)
[13:07:06] *** Joins: larsberg (sid89@moz-1a60qu.0j4i.jtu0.0101.2620.IP)
[13:07:06] *** ChanServ sets mode: +o larsberg
[13:14:47] *** Quits: cimes (cimes@moz-sfmbhq.il.comcast.net) (Quit: Leaving)
[13:21:45] *** Joins: bjz (bjz@moz-puppgq.tpgi.com.au)
[13:25:12] *** Quits: khuey (khuey@moz-no0.93r.245.63.IP) (Ping timeout: 121 seconds)
[13:30:48] *** Joins: jdm (jdm@moz-4vu.06r.98.75.IP)
[13:34:58] *** Joins: ddamjano (Instantbird@moz-t9l1pk.meeting.ietf.org)
[13:41:13] *** Joins: cimes (cimes@moz-fqf.16c.135.128.IP)
[13:57:29] *** Joins: jweathersby (Adium@moz-a5gtah.ip.windstream.net)
[14:05:03] *** Quits: roc (chatzilla@moz-crh.81q.98.121.IP) (Ping timeout: 121 seconds)
[14:09:03] *** Joins: tadh (quassel@moz-pg51s5.CWRU.Edu)
[14:11:11] *** Joins: roc (chatzilla@moz-6qp.uk1.98.121.IP)
[14:14:18] *** Quits: ddamjano (Instantbird@moz-t9l1pk.meeting.ietf.org) (Connection closed)
[14:15:29] *** Joins: ddamjano (Instantbird@moz-tq7618.7k9o.94cl.067c.2001.IP)
[14:36:21] *** Quits: mbx (textual@moz-2iv.90f.85.193.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[14:43:09] *** Joins: mbx (textual@moz-2iv.90f.85.193.IP)
[14:44:11] *** Quits: mbx (textual@moz-2iv.90f.85.193.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[14:45:44] *** Quits: ddamjano (Instantbird@moz-tq7618.7k9o.94cl.067c.2001.IP) (Ping timeout: 121 seconds)
[14:46:58] *** terrence-afk is now known as terrence
[14:54:59] *** Joins: khuey (khuey@moz-no0.93r.245.63.IP)
[14:58:03] *** Joins: mchang (mchang@moz-d9isok.ca.comcast.net)
[15:03:53] *** Joins: ddamjano (Instantbird@moz-eiej0j.7k9o.94cl.067c.2001.IP)
[15:11:57] *** Quits: ddamjano (Instantbird@moz-eiej0j.7k9o.94cl.067c.2001.IP) (Ping timeout: 121 seconds)
[15:15:31] *** Joins: ddamjano (Instantbird@moz-b41kt7.7k9o.94cl.067c.2001.IP)
[15:19:33] *** Quits: ddamjano (Instantbird@moz-b41kt7.7k9o.94cl.067c.2001.IP) (Ping timeout: 121 seconds)
[15:28:39] *** terrence is now known as terrence-brb
[15:29:45] *** Joins: ddamjano (Instantbird@moz-t9l1pk.meeting.ietf.org)
[15:29:47] *** Quits: jdm (jdm@moz-4vu.06r.98.75.IP) (Quit: )
[15:32:28] *** Quits: mchang (mchang@moz-d9isok.ca.comcast.net) (Client exited)
[15:33:28] *** Joins: ehsan (ehsan@moz-i5m.05u.207.66.IP)
[15:45:08] *** Joins: numberMumbler (numberMumbl@moz-iossk5.hfc.comcastbusiness.net)
[15:46:29] *** Joins: reqshark (reqshark@moz-942p6h.static.wiline.com)
[15:47:09] *** terrence-brb is now known as terrence
[15:47:25] *** Joins: dragana (Instantbird@moz-b41kt7.7k9o.94cl.067c.2001.IP)
[15:47:54] *** Quits: ddamjano (Instantbird@moz-t9l1pk.meeting.ietf.org) (Ping timeout: 121 seconds)
[15:47:56] <nmatsakis> sunfish: I am wondering if it is possible to tell which functions were inlined into one another after LLVM is done optimizing; I'd like to know for tracking dependencies in incr. compilation
[15:52:19] *** Quits: tadh (quassel@moz-pg51s5.CWRU.Edu) (Connection closed)
[15:52:20] *** Joins: jdm (jdm@moz-i5m.05u.207.66.IP)
[15:58:02] *** Quits: ehsan (ehsan@moz-i5m.05u.207.66.IP) (Connection closed)
[15:59:07] *** Joins: ehsan (ehsan@moz-1qemoj.ckpj.s0pt.0450.2001.IP)
[16:01:51] *** Joins: laleh (Adium@moz-hgq383.reshsg.uci.edu)
[16:07:31] <sunfish> nmatsakis: the only thing I know of that does that is debug info, and it's not necessarily reliable
[16:08:34] <nmatsakis> sunfish: I was pointed at this https://github.com/rust-lang/llvm/blob/rust-llvm-2015-06-30/lib/Transforms/IPO/Inliner.cpp#L564
[16:08:40] <nmatsakis> which seems to be logging the *EVENT* I care about
[16:08:44] <nmatsakis> but not I guess in a useful way 
[16:10:18] *** Parts: numberMumbler (numberMumbl@moz-iossk5.hfc.comcastbusiness.net) ("Leaving")
[16:10:19] <sunfish> oh, interesting
[16:11:19] <nmatsakis> sunfish: I guess we'd have to upstream a patch to expose that though (or else run a modified llvm), which I don't want to do
[16:13:46] <sunfish> yeah, it looks like some APIs have a DiagnosticHandlerFunction callback, but not many yet
[16:16:37] <nmatsakis> sunfish: well, the fact that there exists a callback I could add to
[16:16:41] <nmatsakis> makes me more willing to consider a patch :0
[16:20:54] *** Quits: flaki (sid26072@moz-kltomo.highgate.irccloud.com) (Quit: )
[16:20:57] *** Joins: flaki (sid26072@moz-nnej31.tooting.irccloud.com)
[16:28:08] *** Quits: Dexter (Alessio@moz-moqdnh.retail.telecomitalia.it) (Quit: Leaving)
[16:40:29] *** Quits: disnet (sid21735@moz-fig26u.highgate.irccloud.com) (Quit: )
[16:40:32] *** Joins: disnet (sid21735@moz-bo49ot.tooting.irccloud.com)
[16:50:48] *** Joins: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net)
[16:50:48] *** ChanServ sets mode: +o pcwalton
[16:52:39] *** Quits: jack (sid19593@moz-fhlsm9.highgate.irccloud.com) (Quit: )
[16:52:43] *** Joins: jack (sid19593@moz-81tj3u.tooting.irccloud.com)
[16:52:43] *** ChanServ sets mode: +o jack
[17:04:47] *** Quits: dragana (Instantbird@moz-b41kt7.7k9o.94cl.067c.2001.IP) (Ping timeout: 121 seconds)
[17:04:49] <Manishearth> larsberg: btw, http://munksgaard.me/papers/laumann-munksgaard-larsen.pdf http://munksgaard.me/papers/munksgaard-laumann-thesis.pdf, but you've probably already read 
[17:04:52] <Manishearth> 'em
[17:05:52] *** jdm is now known as jdm|busy
[17:12:32] *** Joins: mchang (mchang@moz-u3dg2t.sfo1.mozilla.com)
[17:14:15] *** Quits: mchang (mchang@moz-u3dg2t.sfo1.mozilla.com) (Client exited)
[17:14:20] *** Joins: mchang (mchang@moz-u3dg2t.sfo1.mozilla.com)
[17:23:42] *** Quits: laleh (Adium@moz-hgq383.reshsg.uci.edu) (Quit: Leaving.)
[17:25:17] *** Quits: jandem (sid16255@moz-2gehe3.highgate.irccloud.com) (Quit: )
[17:25:21] *** Joins: jandem (sid16255@moz-n3dk9a.tooting.irccloud.com)
[17:27:19] *** Joins: brson (brson@moz-qjbkeh.mtv2.mozilla.com)
[17:27:20] *** ChanServ sets mode: +o brson
[17:28:02] *** Quits: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net) (Client exited)
[17:31:11] *** Joins: jweathersby1 (Adium@moz-rbdgv6.ip.windstream.net)
[17:32:53] *** Quits: jweathersby (Adium@moz-a5gtah.ip.windstream.net) (Ping timeout: 121 seconds)
[17:40:01] *** Joins: pcwalton (pcwalton@moz-nh2.o1i.216.216.IP)
[17:40:01] *** ChanServ sets mode: +o pcwalton
[17:56:21] *** Joins: mccr8 (mccr8@moz-cfhap5.mtv2.mozilla.com)
[17:56:54] *** Quits: pcwalton (pcwalton@moz-nh2.o1i.216.216.IP) (Client exited)
[17:57:06] *** jdm|busy is now known as jdm
[18:11:46] <larsberg> Manishearth: yup :)
[18:21:46] *** Quits: ehsan (ehsan@moz-1qemoj.ckpj.s0pt.0450.2001.IP) (A TLS packet with unexpected length was received.)
[18:42:37] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[18:42:37] *** ChanServ sets mode: +o pcwalton
[18:59:41] *** Joins: laleh (Adium@moz-h8636h.mobile.uci.edu)
[19:35:08] *** Quits: mukilan (mukilan@moz-epa.uss.164.122.IP) (Connection closed)
[19:44:25] *** Quits: derf (derf@moz-797sd4.fios.verizon.net) (*.net *.split)
[19:44:25] *** Quits: johns (johns@moz-ej5ip0.pointysoftware.net) (*.net *.split)
[19:44:25] *** Quits: cajbir (cajbir@moz-d744og.cd.pn) (*.net *.split)
[19:44:25] *** Quits: cimes (cimes@moz-fqf.16c.135.128.IP) (*.net *.split)
[19:44:25] *** Quits: jdm (jdm@moz-i5m.05u.207.66.IP) (*.net *.split)
[19:44:25] *** Quits: edunham (edunham@moz-meu.gm8.131.104.IP) (*.net *.split)
[19:44:25] *** Quits: brson (brson@moz-qjbkeh.mtv2.mozilla.com) (*.net *.split)
[19:44:25] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (*.net *.split)
[19:44:25] *** Quits: tdfischer (tdfischer@hackerbots.net) (*.net *.split)
[19:44:25] *** Quits: jschuster (schuster@moz-p3jtsp.ma.comcast.net) (*.net *.split)
[19:44:25] *** Quits: c74d (c74d3a4ebb6@moz-0ersgu.oc.cox.net) (*.net *.split)
[19:44:25] *** Quits: vstamour (vstamour@moz-6qv.21j.236.104.IP) (*.net *.split)
[19:44:37] *** Joins: brson (brson@moz-qjbkeh.mtv2.mozilla.com)
[19:44:37] *** Joins: cajbir (cajbir@moz-d744og.cd.pn)
[19:44:37] *** Joins: vstamour (vstamour@moz-6qv.21j.236.104.IP)
[19:44:37] *** Joins: cimes (cimes@moz-fqf.16c.135.128.IP)
[19:44:37] *** Joins: tdfischer (tdfischer@hackerbots.net)
[19:44:37] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[19:44:37] *** Joins: edunham (edunham@moz-meu.gm8.131.104.IP)
[19:44:37] *** Joins: derf (derf@moz-797sd4.fios.verizon.net)
[19:44:37] *** Joins: jdm (jdm@moz-i5m.05u.207.66.IP)
[19:44:37] *** Joins: jschuster (schuster@moz-p3jtsp.ma.comcast.net)
[19:44:37] *** Joins: c74d (c74d3a4ebb6@moz-0ersgu.oc.cox.net)
[19:44:37] *** Joins: johns (johns@moz-ej5ip0.pointysoftware.net)
[19:44:37] *** levin.mozilla.org sets mode: +oo brson pcwalton
[19:45:17] *** Joins: ehsan (ehsan@moz-i5m.05u.207.66.IP)
[19:56:50] *** Quits: ehsan (ehsan@moz-i5m.05u.207.66.IP) (A TLS packet with unexpected length was received.)
[19:58:01] <huon> nmatsakis: is the lang team meeting in a few minutes or is it in an hour?
[19:58:08] <nmatsakis> huon: few minutes
[19:58:14] <huon> ok
[20:00:55] *** Joins: ehsan (ehsan@moz-95smsf.ckpj.s0pt.0450.2001.IP)
[20:03:14] *** Quits: jweathersby1 (Adium@moz-rbdgv6.ip.windstream.net) (Quit: Leaving.)
[20:04:53] *** Joins: jweathersby (Adium@moz-rbdgv6.ip.windstream.net)
[20:08:01] *** Quits: ehsan (ehsan@moz-95smsf.ckpj.s0pt.0450.2001.IP) (A TLS packet with unexpected length was received.)
[20:15:54] *** Joins: ehsan (ehsan@moz-saqca8.ckpj.s0pt.0450.2001.IP)
[20:16:06] *** Quits: ehsan (ehsan@moz-saqca8.ckpj.s0pt.0450.2001.IP) (A TLS packet with unexpected length was received.)
[20:46:57] *** Joins: ehsan (ehsan@moz-6b4t11.fibre.fibrestream.ca)
[20:48:43] *** Quits: jdm (jdm@moz-i5m.05u.207.66.IP) (Connection closed)
[20:49:10] *** Joins: jdm (jdm@moz-jj2ff7.ckpj.s0pt.0450.2001.IP)
[20:52:12] *** Quits: jdm (jdm@moz-jj2ff7.ckpj.s0pt.0450.2001.IP) (Quit: )
[20:55:02] <nmatsakis> weird. egencia says my hotel is "not reserved -- reserve now to confirm availabiltiy"
[20:55:04] * nmatsakis confused
[20:58:30] * nmatsakis clicks reserve
[21:05:00] <nrc> it's a sign, move to the Nikko!
[21:21:20] *** Quits: cimes (cimes@moz-fqf.16c.135.128.IP) (Quit: Leaving)
[21:22:35] <huon> nmatsakis: nrc: pnkfelix: oh, one possible hiccup: `T` -> `Cell<T>` relies on the layouts being identical, which isn't strictly guaranteed
[21:22:47] <huon> (i.e. for &mut T -> &Cell<T>)
[21:23:49] <huon> additionally, pcwalton pointed out that Cell doesn't allow interior references, so theoretically the compiler could do ridiculous internal layout optimisations inside it (fixing things on .get/.set)
[21:37:41] *** Quits: ScottMichaud_ (ScottMichau@moz-i4mljt.cpe.pppoe.ca) (Connection closed)
[21:55:54] <pcwalton> acrichto: just FYI, because of the lack of per-crate optimizations in Cargo I'm about to land a change to servo's test harness that will significantly increase the probability of intermittent test failure
[21:56:07] <pcwalton> so I think per-crate optimization just jumped into very high priority for Servo
[21:56:30] <acrichto> pcwalton: cargo test --release is 100% reliable?
[21:56:53] <acrichto> pcwalton: also weren't you saying that these portions weren't perf sensitive?
[21:58:48] <pcwalton> well, WPT is hard-wired to test debug builds, and I don't think we want to change that
[21:58:55] <pcwalton> because debug shakes out integer overflows, etc
[21:59:24] <acrichto> right, but you're 100% positive it's this one crate
[21:59:44] <pcwalton> yes. verified with profiling
[21:59:49] <acrichto> what is so slow about this?
[22:00:02] <pcwalton> 80% of Servo time is now spent in tight loops that are trivial memcpys
[22:00:06] <pcwalton> but because of iterator stuff
[22:00:16] <nmatsakis> huon: well, that's true, but I think we're way overconservative about our layout guarantees personally. 
[22:00:19] <pcwalton> in debug builds they become tremendously slow
[22:00:27] <pcwalton> we need to run the loop idiom recognizer and a few rounds of inlining
[22:00:33] <acrichto> pcwalton: right but why did adding one crate all of a sudden make it *super* slow?
[22:00:34] <nmatsakis> huon: and I don't consider Cell to be "well known" to the compiler (UnsafeCell is...)
[22:00:43] <pcwalton> oh, because before I wasn't doing packet fragmentation
[22:00:48] <pcwalton> on Linux
[22:00:57] <pcwalton> but now I am, because that's necessary for correctness
[22:01:04] <pcwalton> I wrote packet fragmentation in Rust, not C
[22:01:09] <pcwalton> so it is full of iterators
[22:01:16] <pcwalton> and that is very slow without optimizations
[22:01:22] <acrichto> could use a memcpy?
[22:01:25] <pcwalton> (especially if you try to stick to stable)
[22:01:36] <acrichto> ptr::copy_nonoverlapping_bytes is stable
[22:01:38] <pcwalton> I think it is absurd to sacrifice safety because Cargo cannot pass the build flags I want.
[22:01:51] <acrichto> right well you want a solution right now
[22:01:55] <pcwalton> I do have a solution
[22:01:56] <acrichto> this won't land in cargo overnight
[22:02:03] <pcwalton> increasing our timeout by 3x
[22:02:07] <pcwalton> for the tests
[22:02:19] <pcwalton> but the thing is that'll lead to more intermittent failures because the tolerance gets higher
[22:02:31] <pcwalton> (experience in Gecko with this very problem has shown us this)
[22:02:59] <acrichto> right, but have you tried using ptr::copy_nonverlapping?
[22:03:02] <pcwalton> I really don't want to do workarounds
[22:03:06] <pcwalton> I might as well write in C
[22:03:10] <pcwalton> at least then I'll get fast build times
[22:03:35] <pcwalton> ptr::copy_nonoverlapping_memory has horrible ergonomics compared to C
[22:03:36] <pcwalton> and moreover
[22:03:38] <acrichto> pcwalton: it seems like you're a little frustrated right now, and I'm sorry about that, just trying to get a handle on this situation, I have basically 0 knowledge about what's going on here
[22:03:39] <pcwalton> that doesn't solve the problem
[22:03:42] <pcwalton> there are many iterators
[22:04:09] <huon> nmatsakis: yeah, I suppose we can just "guarantee" it for Cell, and have an opt-in MakeMeSmaller<T> that also disallows internal references
[22:04:12] <pcwalton> so I did actually try using ptr::copy_nonoverlapping_memory and it didn't solve the problem
[22:04:16] <pcwalton> there's a lot of iteration involved
[22:04:27] <pcwalton> I'd have to rewrite a lot of what is already really tricky packet fragmentation/reassembly code
[22:04:37] <pcwalton> to get faster at -O0
[22:04:43] <pcwalton> I don't think it makes sense to do that when I have a ton of stuff to land
[22:05:17] <pcwalton> I'd have to rewrite the whole algorithm since there's a lot of iteration
[22:05:20] <pcwalton> and if I'm rewriting
[22:05:24] <pcwalton> I might as well rewrite it in C
[22:05:37] <pcwalton> since that has better ergonomics than the "kinda fast at -O0" dialect of Rust
[22:05:52] <pcwalton> that's what I'm getting at
[22:06:59] <acrichto> pcwalton: drafting and implementing the ability to selectively optimize crates in a cargo graph will take some time, in the meantime is there a branch I can poke at for this? I'd love to see if there's possibly some small low-hanging fruit here and there which may help in the meantime
[22:07:17] <pcwalton> I'm not going to merge any changes that contort the code at -O0, sorry
[22:07:22] <pcwalton> the problem is in Cargo
[22:07:25] <pcwalton> and needs to be fixed in Cargo
[22:07:39] *** Quits: laleh (Adium@moz-h8636h.mobile.uci.edu) (Quit: Leaving.)
[22:07:40] <pcwalton> we have a temporary workaround
[22:08:09] <pcwalton> https://github.com/pcwalton/ipc-channel is the crate in question -- platform/linux/mod.rs
[22:08:51] <pcwalton> I don't need it overnight, mind you
[22:08:54] <acrichto> pcwalton: is there a benchmark for this I can also right?
[22:09:08] <pcwalton> yeah, just send messages back and forth across a Linux socket
[22:09:19] <pcwalton> look at the tests in test.rs
[22:09:30] <pcwalton> a Unix socket, rather, on Linux
[22:09:45] <pcwalton> I don't need the Cargo fix overnight, but I do think it's high priority
[22:10:04] <pcwalton> I know the Rust community demands long bureaucratic RFC processes
[22:10:06] <pcwalton> and that's fine
[22:10:15] <acrichto> pcwalton: this already requires nightly?
[22:10:18] <pcwalton> yeah
[22:10:19] <pcwalton> it does
[22:10:28] <pcwalton> I'm still not sacrificing safety :)
[22:11:50] <pcwalton> just to be clear, you're OK with adding this feature to cargo, right?
[22:11:55] <pcwalton> I understand it will take time due to RFCs
[22:12:39] <acrichto> pcwalton: I'm not sure yet
[22:12:44] <pcwalton> if you aren't, I'm forking cargo
[22:13:04] <acrichto> pcwalton: sorry but this is really unproductive, I need to feel out this space for myself to get a handle what's going on
[22:13:08] <acrichto> claims like that are not helpful
[22:13:35] <acrichto> yes this is a problem that needs to be solved, but I'm sure there's more than one solutin
[22:13:48] <pcwalton> sure, take your time
[22:14:22] <pcwalton> I'm just convinced that "writing the code to be fast at -O0" is not a solution that is going to work
[22:14:29] <pcwalton> Rust is just totally not designed that way
[22:14:52] <pcwalton> we would have to have designed the language completely differently if that were a goal
[22:16:13] <pcwalton> the library stabilization process pushed us further and further toward the use of iterators, which are fundamentally reliant on optimization to work well
[22:16:19] <pcwalton> iterators and combinators
[22:16:38] <pcwalton> that's totally fine, but we need to be honest about the fact that we fundamentally threw -O0 performance out the window when we did that
[22:17:55] <pcwalton> maybe we can regain some of that with a MIR, maybe not -- but either way, whether the optimizations are done on the MIR or not, we have to have a Cargo flag to turn on those optimizations
[22:19:03] *** Quits: roc (chatzilla@moz-6qp.uk1.98.121.IP) (Ping timeout: 121 seconds)
[22:22:11] *** Quits: ehsan (ehsan@moz-6b4t11.fibre.fibrestream.ca) (Quit: vanished into thin air...)
[22:25:42] <huon> nmatsakis: published https://crates.io/crates/alias
[22:28:16] *** Quits: mchang (mchang@moz-u3dg2t.sfo1.mozilla.com) (Client exited)
[22:32:02] *** Quits: reqshark (reqshark@moz-942p6h.static.wiline.com) (Quit: My Mac has gone to sleep. ZZZzzz…)
[22:32:24] *** Joins: reqshark (reqshark@moz-942p6h.static.wiline.com)
[22:32:51] *** Joins: ddamjano (Instantbird@moz-pjq.63s.228.194.IP)
[22:33:14] *** Quits: reqshark (reqshark@moz-942p6h.static.wiline.com) (Quit: My Mac has gone to sleep. ZZZzzz…)
[22:34:05] *** Joins: reqshark (reqshark@moz-942p6h.static.wiline.com)
[22:41:17] *** Joins: jdm (jdm@moz-ilbt2e.cable.teksavvy.com)
[22:41:49] *** Joins: mbx (textual@moz-2iv.90f.85.193.IP)
[22:48:28] *** Quits: ddamjano (Instantbird@moz-pjq.63s.228.194.IP) (Ping timeout: 121 seconds)
[22:50:30] *** Quits: bjz (bjz@moz-puppgq.tpgi.com.au) (Quit: My Mac has gone to sleep. ZZZzzz…)
[22:51:00] *** Quits: reqshark (reqshark@moz-942p6h.static.wiline.com) (Quit: be back later...)
[23:03:47] *** Quits: jweathersby (Adium@moz-rbdgv6.ip.windstream.net) (Quit: Leaving.)
[23:16:05] *** Quits: mbx (textual@moz-2iv.90f.85.193.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[23:17:09] *** Joins: mchang (mchang@moz-u3dg2t.sfo1.mozilla.com)
[23:17:19] *** Quits: mchang (mchang@moz-u3dg2t.sfo1.mozilla.com) (Client exited)
[23:17:24] *** Joins: mchang (mchang@moz-u3dg2t.sfo1.mozilla.com)
[23:17:33] *** Quits: mchang (mchang@moz-u3dg2t.sfo1.mozilla.com) (Client exited)
[23:18:39] *** Joins: roc (chatzilla@moz-8b3t8p.nn3i.kiip.e780.2400.IP)
[23:19:04] *** Joins: mchang (mchang@moz-u3dg2t.sfo1.mozilla.com)
[23:29:28] *** Joins: laleh (Adium@moz-hgq383.reshsg.uci.edu)
[23:58:23] *** Quits: dherman (sid7996@moz-u0jlif.ealing.irccloud.com) (Quit: )
[23:59:01] *** Joins: dherman (sid7996@moz-8ucipu.highgate.irccloud.com)
