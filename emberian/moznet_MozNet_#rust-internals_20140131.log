[00:00:14] <Eridius> I'm assuming, of course, that any error that would interrupt this is non-recoverable
[00:00:23] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[00:05:22] *** Joins: ecr (chatzilla@7C463196.5BB0586B.11F8506F.IP)
[00:10:10] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[00:10:50] <cmr> Eridius: acrichto: r? https://github.com/mozilla/rust/pull/11840
[00:10:54] <brson> would be good to know how useful read_bytes is in practice with that limitation, or whether people have to resort to `read`
[00:11:58] <brson> ecr: how's your proof going?
[00:12:15] * cmr is super interested in the proof
[00:12:52] <Eridius> brson: if we can encourage people to use .read() that might be a good thing ;) fewer allocations is better
[00:12:57] <ecr> brson, cmr: I'm catching up on what nmatsakis has already done (which is a partial operational semantics)
[00:13:38] <acrichto> cmr: if we're dealing with null() in clone(), we may as well deal with it in eq() as well
[00:13:53] <acrichto> cmr: also, could you add tests for the clone-on-null and eq-with-null cases?
[00:14:02] <cmr> acrichto: sure
[00:14:05] <Eridius> cmr: clone() looks good, eq() is wrong for two reasons
[00:14:15] <Eridius> one is null, the other is you're only limiting to the len of self, not to the len of other
[00:14:36] <cmr> oh it should be the min of them
[00:14:44] <Eridius> yeah, and make sure to test null on both
[00:14:45] <acrichto> Eridius: can you alter as_str() to also fail!() ?
[00:14:54] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[00:15:10] <Eridius> acrichto: is there any reason other than "all functions that don't test for null should fail if null"?
[00:15:15] *** jdm is now known as jdm|away
[00:15:18] *** Quits: jdm|away (jdm@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: Lost terminal)
[00:15:25] <Eridius> acrichto: actually, that's a good enough reason ;) ok
[00:17:37] <Eridius> cmr: btw, with acrichto's suggested change, my tweak to CString will technically be a breaking change (for your next TWiR)
[00:17:52] *** Quits: dherman (dherman@moz-21F91504.cfw-a-gci.corp.yahoo.com) (Quit: dherman)
[00:18:19] <acrichto> I don't really understand the use case of null in a c string
[00:18:25] <acrichto> I would expect the constructor to fail
[00:18:33] <acrichto> but it appears that we're explicitly allowing that use case
[00:18:41] <Eridius> acrichto: it's worth seeing if anyone actually relies on that
[00:18:46] <Eridius> maybe the constructor should indeed fail
[00:18:58] <Eridius> and use Option<CString> for FFI that needs nullable cstrings
[00:19:01] <ecr> brson cmr: oh and a couple of us are doing a borrow checker formalization for our proof assistant class project
[00:19:14] <cmr> it can't be Option<CString>, it's not just a pointer.
[00:19:20] <acrichto> Eridius: CString isn't FFI-compatible regardless because it's a two-word thing
[00:19:24] <acrichto> it's more than just a *c_char
[00:19:28] <Eridius> acrichto: I mean wrapper functions that return CString
[00:19:35] <cmr> .... but CString isn't used for ffi anyway
[00:19:36] <Eridius> (or take CString, but producing a null CString is unsafe so that's less likely)
[00:19:36] <cmr> not directly
[00:19:38] <ecr> brson cmr: a very simplified borrow checker
[00:19:38] <cmr> so it'd be fine.
[00:19:47] <cmr> ecr: awesome :)
[00:19:48] <Eridius> although I suppose CString is primarily for arguments, not return value
[00:19:56] <Eridius> which makes the null behavior even less useful
[00:20:23] <cmr> acrichto: I think snap3-win is broken
[00:20:28] <Eridius> acrichto: ok, updated
[00:20:30] <Eridius> https://github.com/mozilla/rust/pull/11942
[00:20:35] <acrichto> cmr: it passed?
[00:20:51] <acrichto> Eridius: minor typo FAIls
[00:20:53] <acrichto> FAils*
[00:21:13] <cmr> acrichto: no? according to the console, the most recent one failed... I don't know why it's green up top
[00:21:20] <acrichto> Eridius: r=me otherwise, thanks!
[00:21:21] <Eridius> acrichto: GAH
[00:21:28] <acrichto> cmr: oh I'm watching http://buildbot.rust-lang.org/waterfall?branch=snap-stage3&refresh=15
[00:21:33] <Eridius> vim doesn't have a spellchecker :( (well, not one that I know how to use anyway)
[00:21:34] <acrichto> http://buildbot.rust-lang.org/builders/snap3-win
[00:21:39] <Eridius> acrichto: and thanks
[00:21:40] <acrichto> cmr: I had to rebuild it
[00:21:47] <cmr> oh ok
[00:21:56] <cmr> does the console not reflect that or something?
[00:21:57] <acrichto> Eridius: yeah I really need a spell checker, I swear I'm the source of like 99% of the typo fixes we get lol
[00:22:00] <ecr> oh, speaking of the borrow checker. can anyone explain to me where &const borrows come from?
[00:22:04] <xales> Eridius: :set spell spelllang=en_US
[00:22:09] <cmr> ecr: closures, somewhere.
[00:22:11] <acrichto> cmr: dunno, I've found that the grid view lags behind a little bit
[00:22:15] <Eridius> xales: will that only check comments, though? That's the only place I want it
[00:22:17] <acrichto> ugh mac failed!
[00:22:21] <cmr> Eridius: and strings, maybe.
[00:22:24] <xales> Eridius: there's a way to get vim to only check comments, yeah
[00:22:26] <ecr> cmr: that's what I thought. thanks
[00:22:27] <Eridius> eh, maybe strings
[00:22:32] <cmr> There was a recent PR for spell clusters in vim
[00:22:34] <acrichto> ugh, rustpkg
[00:22:39] <acrichto> that should get removed already...
[00:22:48] <xales> Eridius: actually, assuming you have rust syntax installed, it should be on by default
[00:22:58] <acrichto> xales: does that only spellcheck comments?
[00:23:04] <acrichto> or does it also spellcheck code itself
[00:23:13] <acrichto> wait
[00:23:15] <acrichto> I can read
[00:23:17] <xales> acrichto: it's up to what's set in the syntax file for vim, but it /should/ only check comments
[00:23:24] * xales goes to look
[00:23:29] <cmr> it does strings and comments
[00:23:36] <acrichto> aww
[00:23:37] <Eridius> xales: hmm, looks like @Spell was added to the syntax since the last time I updated
[00:23:39] <acrichto> it doesn't like EOF
[00:23:43] <acrichto> or io
[00:23:44] <Eridius> I had syntax from Dec 10, 2013 installed
[00:25:12] <Eridius> bah, ok, `:set spell` works, but now it's highlighting things like CString
[00:25:19] <Eridius> that's annoying.
[00:26:15] <Eridius> I guess I can start building a word list
[00:27:27] <Eridius> ooh the rust syntax could have a spellfile containing all of the struct/trait names in rust. Although that would be annoying to maintain
[00:33:41] <ChrisMorgan> Eridius: maintain? Automate such things, just like TAGS.vi.
[00:34:25] <Eridius> ChrisMorgan: well, you'd have to run vim in order to :mkspell
[00:34:44] <ChrisMorgan> That's no problem.
[00:35:09] <Eridius> the rust bundle would also have to insert rust into the spellfile list. Possibly at the front, so words marked good are put into rust, but I don't know if that would be confusing
[00:36:28] <ChrisMorgan> Eridius: 'spellfile' can be a comma-separated list.
[00:36:33] <Eridius> yes
[00:36:51] <Eridius> I'm just saying the rust syntax would have to modify spellfile to insert rust at the front of the list
[00:37:16] <ChrisMorgan> Oh, that. Got it.
[00:37:44] * ChrisMorgan misunderstood what you had said
[00:38:39] <Eridius> I am slightly confused as to why vim compiles the .add file into some binary format though
[00:41:40] <Eridius> hrm, maybe this is wasted effort. I just turned on spell-checking on my .vimrc and pretty much every comment has multiple flagged words, including things like references to extensions
[00:41:49] <brson> ecr: cool! what are you writing the borrow checker formalization in? can it continue to be extended usefully after your class ends? how does that relate to niko's (redex?) model?
[00:43:02] <brson> where is niko's model?
[00:43:43] <ecr> brson: we're writing the borrow checker formalization in Coq. theoretically it can be extended later on to match the rustc borrow checker more accurately (we're just doing a proof of concept basically), but the extensibility of proofs is notoriously bad. either way it should be useful when I get to formalization the type system as a whole.
[00:43:57] <cmr> brson: https://github.com/nikomatsakis/rust-formal
[00:44:02] <cmr> wrong link
[00:44:03] <cmr> https://github.com/nikomatsakis/rust-redex
[00:44:04] <ChrisMorgan> Eridius: I think that spell checking is often worth it. But I don't have it turned on always.
[00:44:07] <cmr> damn clipboard
[00:44:31] <ecr> brson: I don't think niko's model has borrowing semantics incorporated yet. that'll probably be one of the first things i extend it with
[00:44:36] <Eridius> ChrisMorgan: what would be nice is if I could somehow spell-check only lines that I modified, since I have a git plugin that marks those lines ;)
[00:44:57] *** Quits: c-a (c-a@moz-57C82A9.a163.priv.bahnhof.se) (Quit: Ex-Chat)
[00:45:08] <Eridius> but I mean the spell-checker isn't even smart enough to do things like recognize URLs/emails in comments and skip those
[00:45:40] <ecr> brson: does that make sense?
[00:45:48] *** Joins: lpy (lpy@4F2FE573.2EDA7147.E99F7FDB.IP)
[00:45:55] <brson> ecr: yes, thanks
[00:47:34] <brson> i hope someday i can understand what this means: https://github.com/nikomatsakis/rust-redex/blob/master/rust.rkt
[00:47:46] <Eridius> cmr: for `CString.eq()` instead of using min you should just use libc::strcmp()
[00:47:50] *** Quits: lpy (lpy@4F2FE573.2EDA7147.E99F7FDB.IP) (Ping timeout)
[00:47:56] <ecr> brson: oh, another thing. getting a Coq borrow checker that matched what we *think* the rustc borrow checker *should* do and proving some soundness properties would also basically give us an oracle to check if rustc's borrow checker does the right thing
[00:48:11] <ChrisMorgan> Eridius: only spellchecking lines that match certain things is entirely feasible; you've just got to make it into a syntax region which includes @Spell while nothing else does.
[00:48:21] <cmr> brson: I tried and failed miserably.
[00:48:27] <cmr> and I spent like a whole afternoon
[00:48:37] <Eridius> ChrisMorgan: can you overlay syntax regions on arbitrary spans, or does it have to be a tree?
[00:48:42] <ChrisMorgan> Tree.
[00:48:58] <Eridius> bah, so you can't have another plugin mark up certain lines as a syntax region without mucking up the language syntax?
[00:48:59] <ChrisMorgan> Just like ye olde DOM(e?)
[00:48:59] <ecr> brson cmr: I know the feeling. I just spent the past week learning PLT redex. Luckily I already knew formal semantics, so I just had to learn the redex DSL.
[00:49:10] <larsberg> brson: http://redex.racket-lang.org/ ; could have azita pay for a copy of the book and I (or niko or one of a few others on #research) will go through some of it with you. will take aÂ few weeks, though :-)
[00:49:32] <Eridius> from a syntax-highlighting perspective that makes sense, but it's unfortunate when doing other things tied to syntax regions like spellchecking
[00:50:05] <ecr> larsberg: I was reading that book this past week. It's odd; almost like 3 books stapled together.
[00:50:27] <larsberg> ecr: you're closer to knowing how it was written than you might think :-)
[00:51:32] <ChrisMorgan> Eridius: it won't be foolproof (multiline strings or comments would throw it out a bit), but with the Rust syntax it'd be possible to just spell check certain lines without damaging the highlighting.
[00:51:35] <larsberg> ecr: or so Mike told me (Mike Rainey was a co-student with me and wrote one of the Case Study chapters)
[00:52:01] <ecr> larsberg: I'd believe it.
[00:54:53] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[00:54:54] *** ChanServ sets mode: +ao pcwalton pcwalton
[00:57:35] <Eridius> ChrisMorgan: sure, but the spellcheck region has to come from another plugin, not from the rust syntax. How do you even safely modify the syntax like that?
[01:00:25] <ChrisMorgan> Eridius: could be something along the lines of `exec "syn match rustSpellLine /\\(.*\n\\)\\{" . (line_number - 1) . "}\\zs.*/"` (sorry :P)
[01:01:04] <Eridius> oh you're suggesting a command that marks the given line as being spell-checked?
[01:01:29] <Eridius> my ideal was to hack up the git plugin that identifies changed lines to also automatically mark modified/added lines as being eligible for spell-checking. But doing that automatically won't work very well
[01:01:54] <cmr> Eridius: I think I forgott hat strcmp existed
[01:03:48] <ChrisMorgan> Eridius: that's just the first thing that comes to mind. It would perform awfully. You see, at first I'd been thinking you were dealing with something that would be easily filterable, like /^+/, but I guess it's using the side column stuff (whatever it's called).
[01:04:22] *** Joins: cgaebel (chatzilla@moz-92F543E4.nycmny.east.verizon.net)
[01:07:21] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[01:11:34] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[01:11:34] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/H2_FtQ
[01:11:34] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[01:11:58] <Eridius> ChrisMorgan: yeah, the plugin creates a column on the left to put the markers there
[01:12:03] <Eridius> editing the buffer itself would be rather problematic
[01:13:49] * ChrisMorgan forgets what that side column thingy is called
[01:14:04] <cmr> the git gutter?
[01:16:01] *** Joins: jdm (jdm@moz-C07D5168.p2p.sfo1.mozilla.com)
[01:16:14] <acrichto> brson: what do you want to do about the chan rewrite and mutex addition patches?
[01:16:30] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[01:16:30] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/Q2Q0nQ
[01:16:30] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[01:16:33] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[01:16:34] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/nhpeXg
[01:16:34] <ghrust> 13rust/06auto 14929390e 15Ben Noordhuis: Add libc::consts::os::posix01::PTHREAD_STACK_MIN...
[01:16:34] <ghrust> 13rust/06auto 143784c4d 15Ben Noordhuis: Retry on EINVAL from pthread_attr_setstacksize()...
[01:16:34] <ghrust> 13rust/06auto 1448c80d3 15Ben Noordhuis: Use __pthread_get_minstack() when available....
[01:16:36] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[01:16:51] <brson> acrichto: i want to review and land them. what do you want to do, and what should I look at first?
[01:17:03] <acrichto> brson: they should all be ready for a review
[01:17:38] <acrichto> brson: and no rust of course
[01:17:41] <brson> lol
[01:17:47] <acrichto> you have many things on your plate
[01:17:58] <acrichto> almost nothing is conflicting with those PRs
[01:18:12] <brson> aw :( i'll review right now!
[01:18:53] <acrichto> oh no they can sit for quite awhile
[01:18:55] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[01:18:57] <acrichto> that's a good thing
[01:19:02] <acrichto> there's no rebase conflicts
[01:19:06] <acrichto> or at least that's what I meant to say
[01:19:30] *** Quits: notmatt (notmatt@CC62CF7E.1E7FDFDB.A82DBDDB.IP) (Client exited)
[01:19:57] *** Joins: notmatt (notmatt@CC62CF7E.1E7FDFDB.A82DBDDB.IP)
[01:21:45] *** Quits: notmatt (notmatt@CC62CF7E.1E7FDFDB.A82DBDDB.IP) (Ping timeout)
[01:27:11] <acrichto> man the queue has been so full recently
[01:27:17] <acrichto> there's routinely like a 8 PR backlog
[01:27:18] <acrichto> that's awesome
[01:27:29] <brson> :-D
[01:27:48] <cmr> it means the cycle time is 8x too slow
[01:28:02] <cmr> not enough bors for all the awesome PRs ;)
[01:29:48] <brson> acrichto: in this mutex implementation are native mutexes faster when they aren't interoping with green mutexes?
[01:29:57] <brson> and vice-versa
[01:30:03] * brson still reading comments
[01:30:09] <acrichto> in theory yes
[01:30:21] <acrichto> I didn't actually benchmark those cases
[01:30:25] <acrichto> now that I think about it
[01:30:50] <brson> acrichto: oh I started trying to refactor std a bit yesterday, feeling optimistic
[01:31:02] <brson> so native mutexes are 25% slower than pthread?
[01:31:29] *** Quits: irving-cloud (uid24297@moz-31ABA2C0.irccloud.com) (Quit: Connection closed for inactivity)
[01:32:09] <acrichto> brson: yeah sadly, I think that the unlock() procedure is kinda slow
[01:32:18] <acrichto> there's a lot of logic in there other than "just unlock the mutex"
[01:32:33] <acrichto> and I have suspicions for why it's a little slower related to the design of the mutex
[01:32:55] <cgaebel> how does vec::with_capacity work? does it just malloc some memory?
[01:33:10] <brson> acrichto 25% is not awful. if somebody really needs the extra they can just use the raw native mutex type and certify they 'know what they're doing'
[01:33:35] <acrichto> cgaebel: indeed, it mallocs many uninitialized slots for elements
[01:33:47] <acrichto> cgaebel: the idea is to have push() never take the "slow path"
[01:33:50] <acrichto> brson: I agree
[01:33:58] <acrichto> brson: I also like the sound of a libstd refactor!
[01:34:04] <brson> i mean, 25% is not just not awful, but pretty good
[01:34:05] <cgaebel> so size = 0, capacity = cap?
[01:34:37] <acrichto> cgaebel: yeah
[01:35:03] <cgaebel> acrichto: ok. thanks.
[01:35:57] <cgaebel> acrichto: would it be preferable to use vec::from_fn(|_| 0u) or vec::from_elem(0u)?
[01:37:01] <acrichto> cgaebel: there's a benchmark lying around saying which one is better, but the intention is for those to be equivalent
[01:37:13] <cgaebel> ok.
[01:44:07] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[01:44:07] *** ChanServ sets mode: +ao pcwalton pcwalton
[01:45:46] <acrichto> oh man I was just reminded that we used to have LinearMap and HashMap
[01:45:48] <acrichto> good times
[01:46:32] *** Joins: lpy (lpy@4F2FE573.2EDA7147.E99F7FDB.IP)
[01:47:51] <aatch> cgaebel, in theory, they *should* be the same, however, the second one is definately faster if you don't turn optimization on.
[01:48:27] <cgaebel> aatch: thanks.
[01:48:41] *** Quits: lpy (lpy@4F2FE573.2EDA7147.E99F7FDB.IP) (Ping timeout)
[01:49:38] <cgaebel> I've got another performance question: If I have ~[Option<T>], and incidentally also have a same-sized vector is_valid: ~[bool], is there any safe way to drop the Option and just have an "unsafe" vector where some elements may be "undefined"?
[01:49:54] <cgaebel> where I enforce the invariant myself.
[01:51:23] <ChrisMorgan> cgaebel: and T is not a pointer type? So it's merely a matter of whether the value is meaningful or not?
[01:51:40] <cgaebel> Ideally, T could be any type.
[01:52:00] <aatch> cgaebel, there are some unsafe methods for manipulating vectors
[01:53:50] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[01:57:31] *** Joins: zimbabao (rajaram@CF13308B.F0C8214C.D2D1FAF0.IP)
[02:04:05] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[02:04:05] *** ChanServ sets mode: +ao dherman dherman
[02:07:19] *** Quits: canhtak (canhtak@moz-9E539298.wl.t.ulaval.ca) (Quit: canhtak)
[02:09:26] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[02:10:37] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[02:10:53] *** Quits: jdm (jdm@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: Lost terminal)
[02:11:32] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[02:11:32] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/tgs5ig
[02:11:32] <ghrust> 13rust/06auto 14506c71c 15Andrew Chin: Use an absolute path in test_process_output_fail_to_start...
[02:11:32] <ghrust> 13rust/06auto 14b7f673a 15bors: auto merge of #11784 : eminence/rust/fix_run_tests, r=alexcrichton...
[02:11:32] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[02:15:15] *** Joins: lpy (lpy@4F2FE573.2EDA7147.E99F7FDB.IP)
[02:17:50] *** Joins: canhtak (canhtak@moz-9E539298.wl.t.ulaval.ca)
[02:30:35] *** Quits: ecr (chatzilla@7C463196.5BB0586B.11F8506F.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 27.0/20140127194636])
[02:35:17] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[02:43:08] <brson> acrichto: i haven't been able yet to fully appreciate these patches but they look very artful. i r+d anyway though
[02:43:17] <brson> would be great to have more people eyeing this code
[02:43:29] <acrichto> brson: ok, I'm sure bors will weed out a bunch of it as well
[02:46:13] * ChrisMorgan rejoices to see direct IO error handling
[02:46:47] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[02:49:37] *** Joins: gwty (gwtypc@2B078AEB.E93560AD.27560D6E.IP)
[03:05:22] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[03:06:54] <acrichto> alright everyone, if everything merges the queue size will be less than 30
[03:07:07] <acrichto> bors might just *forget* to gate on tests
[03:07:59] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[03:09:17] <ChrisMorgan> bors could use optimism levels: at the most simple level, make it just a boolean flag, that if a developer is optimistic that a patch will land successfully, it can merge multiple optimistic patches at once.
[03:09:47] <Eridius> ChrisMorgan: that would be nice for typo fixes and the like
[03:14:07] <ChrisMorgan> You could get into moderately advanced statistics, if you wantedâ€”probability that a patch will land, and then let bors calculate potential time savings by merging multiple patches at once (win if they land; lose if they don't, and then it can take a guess at which broke it and try a smaller set of patches). Artificial intelligence! Machine learning! Fun!
[03:15:04] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[03:17:41] <ChrisMorgan> e.g. #11933 and #11934 get an immediate optimistic=1 prognosis as they only affect comments and non-executable documentation.
[03:19:37] <ChrisMorgan> "optimism=1" being "there is no way this can genuinely go wrong" which would also mean that you could merge it with a non-optimistic patch and impute no failure to this patch in case of failure, and so immediately put it back in the approved queue rather than the bad queue.
[03:20:54] <Eridius> and then we get one bad optimistic patch and spend the entire day trying to figure out why every single PR is failing
[03:22:01] <ChrisMorgan> Eridius: optimism=1 would only be given to ones which *cannot possibly* fail, provably so. Otherwise, perhaps, optimism=0.99.
[03:22:25] <Eridius> bug in the provability checker
[03:22:29] <ChrisMorgan> You would probably also cap it at two or three failures before flagging it as bad.
[03:22:31] <Eridius> who proves the prover?
[03:22:41] *** Quits: aatch (James@moz-B437F499.pocketrent.com) (Client exited)
[03:22:46] <ChrisMorgan> Quis custodiet ipsos custodes?
[03:23:34] <ChrisMorgan> Badge: "Spoke Latin in IRC."
[03:26:34] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[03:26:35] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/tgs5ig
[03:26:35] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[03:26:54] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[03:27:19] *** Quits: zz_kimundi (kimundi@moz-260B6EEA.dip0.t-ipconnect.de) (Ping timeout)
[03:30:39] *** Joins: zz_kimundi (kimundi@moz-2148C9CF.dip0.t-ipconnect.de)
[03:30:41] *** zz_kimundi is now known as kimundi
[03:31:47] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[03:31:47] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/V4pCwA
[03:31:47] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[03:31:49] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[03:31:49] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/WdekBw
[03:31:49] <ghrust> 13rust/06auto 140f1040d 15Alex Crichton: Shuffle around ownership in concurrent queues...
[03:31:49] <ghrust> 13rust/06auto 14e1f0068 15Alex Crichton: Rewrite channels yet again for upgradeability...
[03:31:50] <ghrust> 13rust/06auto 14c192530 15Alex Crichton: Re-implement select() for channels...
[03:31:52] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[03:41:23] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[03:41:34] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[03:41:34] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/wfGNRg
[03:41:34] <ghrust> 13rust/06auto 149b1865a 15Jason Fager: Add a limited prim type lookup for safer const expr evaluation
[03:41:34] <ghrust> 13rust/06auto 1447bb4a5 15bors: auto merge of #11832 : jfager/rust/r5900, r=alexcrichton...
[03:41:34] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[03:41:37] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[03:41:38] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14673e4b8 to 14b7f673a: 02http://git.io/N3iJvQ
[03:41:38] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[03:50:48] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[03:51:37] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[03:52:06] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[03:53:54] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[04:03:14] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[04:04:33] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[04:04:33] *** ChanServ sets mode: +ao dherman dherman
[04:06:58] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[04:07:27] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[04:08:03] <cgaebel> am I correct in believing that rust has no move constructors?
[04:08:31] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[04:09:09] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[04:22:33] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[04:24:32] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[04:24:32] *** ChanServ sets mode: +qo brson brson
[04:31:15] <cmr> cgaebel: correct.
[04:31:28] <cgaebel> cmr: thanks.
[04:31:51] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[04:31:51] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1447bb4a5 to 14b7f673a: 02http://git.io/N3iJvQ
[04:31:51] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[04:31:52] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[04:31:52] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/vevUbg
[04:31:52] <ghrust> 13rust/06auto 149b1865a 15Jason Fager: Add a limited prim type lookup for safer const expr evaluation
[04:31:52] <ghrust> 13rust/06auto 147936bfa 15bors: auto merge of #11832 : jfager/rust/r5900, r=alexcrichton...
[04:31:52] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[04:31:58] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[04:31:59] *** ChanServ sets mode: +ao dherman dherman
[04:41:44] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[04:43:01] <Eridius> now that we have pluggable syntax extensions, how hard would it be to add pluggable lints?
[04:43:06] <acrichto> brson: ping
[04:48:39] <brson> acrichto: pong
[04:49:05] <acrichto> brson: snapshots are blocked on rustpkg tests (https://github.com/mozilla/rust/issues/11852)
[04:49:14] <acrichto> I'm leaning towards removing it altogether
[04:49:18] <acrichto> the fix for that is non-trivial
[04:49:20] <acrichto> (looking into it)
[04:51:56] <brson> :( i need to read that thread
[04:52:02] <brson> i'm afraid
[04:52:35] <acrichto> maybe I could try reverting the patch that caused it
[04:53:04] <acrichto> nope
[04:53:44] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[04:54:50] <brson> acrichto: can we just disable the tests that are failing?
[04:55:09] <acrichto> brson: it's all of the :(
[04:55:20] <acrichto> rustpkg only works if you specify the exact version
[04:55:27] <acrichto> b/c it tries to guess the filename exactly
[04:55:39] <acrichto> and this is working on the bots currently b/c they're injecting std#0.10-pre
[04:55:48] <acrichto> but this doesn't work on the snapshot bots b/c they don't inject verisons
[04:58:52] *** Quits: zimbabao (rajaram@CF13308B.F0C8214C.D2D1FAF0.IP) (Ping timeout)
[05:03:28] <brson> i don't know what to do about rustpkg right now. i did not think through the ml post well enough before starting that thread
[05:04:16] <brson> i don't have a good excuse for throwing it away except that people are dissatisfied with it
[05:05:16] <acrichto> the other option is that I can go fix rustpkg for now
[05:09:47] <brson> or special case the makefiles to turn off rustpkg tests when snapshotting
[05:10:32] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[05:11:35] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[05:11:35] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 147936bfa to 14b7f673a: 02http://git.io/N3iJvQ
[05:11:35] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[05:11:36] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[05:11:37] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/wymcXg
[05:11:37] <ghrust> 13rust/06auto 149b1865a 15Jason Fager: Add a limited prim type lookup for safer const expr evaluation
[05:11:37] <ghrust> 13rust/06auto 1438bbe76 15bors: auto merge of #11832 : jfager/rust/r5900, r=alexcrichton...
[05:11:37] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[05:12:22] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[05:24:06] *** Quits: canhtak (canhtak@moz-9E539298.wl.t.ulaval.ca) (Ping timeout)
[05:28:47] *** Joins: canhtak (canhtak@moz-9E539298.wl.t.ulaval.ca)
[05:30:35] *** Quits: canhtak (canhtak@moz-9E539298.wl.t.ulaval.ca) (Ping timeout)
[05:32:29] *** Joins: canhtak (canhtak@moz-9E539298.wl.t.ulaval.ca)
[05:33:34] *** Quits: lpy (lpy@4F2FE573.2EDA7147.E99F7FDB.IP) (Client exited)
[05:43:20] *** Joins: jdm (jdm@moz-DB4A9C19.scl3.mozilla.com)
[05:47:25] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[05:47:25] *** ChanServ sets mode: +ao dherman dherman
[05:50:08] *** Quits: gwty (gwtypc@2B078AEB.E93560AD.27560D6E.IP) (Ping timeout)
[05:50:37] *** Joins: zimbabao (rajaram@47769425.AE842F9B.81C3DAA1.IP)
[05:56:07] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[05:56:38] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[05:59:57] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[06:00:53] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[06:00:53] *** ChanServ sets mode: +ao dherman dherman
[06:01:45] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[06:01:45] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/8Adnlg
[06:01:45] <ghrust> 13rust/06auto 1451b9000 15Alex Crichton: Fix the size of the _Unwind_Exception struct...
[06:01:45] <ghrust> 13rust/06auto 14037d024 15bors: auto merge of #11947 : alexcrichton/rust/osx-unwind, r=brson...
[06:01:45] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[06:04:13] *** Joins: lpy (lpy@4F2FE573.2EDA7147.E99F7FDB.IP)
[06:06:14] *** Quits: lpy (lpy@4F2FE573.2EDA7147.E99F7FDB.IP) (Ping timeout)
[06:17:18] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[06:29:45] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[06:31:59] *** Joins: eddyb (eddy@832D2DE5.66315F97.FB866788.IP)
[06:34:27] <eddyb> cmr: how's that snapshot coming?
[06:34:42] <acrichto> it's blocked on failing rustpkg tests
[06:34:59] <eddyb> oh, that's fun :(
[06:35:26] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[06:35:27] *** ChanServ sets mode: +ao dherman dherman
[06:56:30] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[06:56:30] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14037d024 to 14b7f673a: 02http://git.io/N3iJvQ
[06:56:30] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[06:56:32] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[06:56:32] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/_dHaaA
[06:56:32] <ghrust> 13rust/06auto 149b1865a 15Jason Fager: Add a limited prim type lookup for safer const expr evaluation
[06:56:32] <ghrust> 13rust/06auto 14078d3ca 15bors: auto merge of #11832 : jfager/rust/r5900, r=alexcrichton...
[06:56:32] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[06:57:38] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[07:04:55] *** Joins: lpy (lpy@4F2FE573.2EDA7147.E99F7FDB.IP)
[07:06:42] <eddyb> acrichto: hmpf, but my commit is the last one, no? and that passed just fine, no rustpkg failures :/
[07:07:00] *** Quits: lpy (lpy@4F2FE573.2EDA7147.E99F7FDB.IP) (Ping timeout)
[07:14:02] *** Quits: eddyb (eddy@832D2DE5.66315F97.FB866788.IP) (Ping timeout)
[07:14:57] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[07:17:30] *** Joins: eddyb (eddy@832D2DE5.66315F97.FB866788.IP)
[07:18:17] *** Quits: canhtak (canhtak@moz-9E539298.wl.t.ulaval.ca) (Quit: canhtak)
[07:20:43] <acrichto> eddyb: this failure is isolated to the snapshot bots specifically
[07:22:05] <eddyb> acrichto: and it's not just one of those things that happen when the build dir is dirty? well, the only bot-specific rustpkg failures I've seen were for those tests with fake git repos
[07:22:16] <acrichto> eddyb: yeah thit is specific to rustpkg itself
[07:22:31] <acrichto> https://botbot.me/mozilla/rust-internals/msg/10376339/
[07:23:14] <eddyb> rusti: range(10u16, 0).to_owned_vec()
[07:23:18] -rusti- ~[]
[07:23:22] <eddyb> huh?
[07:24:54] <eddyb> rusti: range(0, 10u16).rev().to_owned_vec()
[07:24:55] -rusti- ~[9u16, 8u16, 7u16, 6u16, 5u16, 4u16, 3u16, 2u16, 1u16, 0u16]
[07:32:10] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Quit: WeeChat 0.3.8)
[07:35:57] <eddyb> brson: I don't like this too much, but at least you're not completely against contextual keywords 
[07:35:58] <eddyb> https://github.com/mozilla/rust/issues/9880#issuecomment-33760317
[07:39:37] <brson> eddyb: keywords don't bother me much I think - there are a lot of words in the world, and we can claim some of them. just don't name any variables 'crate'.
[07:40:29] <eddyb> this would be cool: #[phase(syntax)] crate { #[macro_registrar] fn foo... }
[07:47:36] <acrichto> nothing is landing :(
[07:51:04] <Eridius> I want pluggable lints
[07:51:21] <Eridius> alongside user-defined attributes
[07:51:31] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[07:51:31] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/3_YBkw
[07:51:31] <ghrust> 13rust/06auto 1451b9000 15Alex Crichton: Fix the size of the _Unwind_Exception struct...
[07:51:31] <ghrust> 13rust/06auto 14f910a97 15bors: auto merge of #11947 : alexcrichton/rust/osx-unwind, r=brson...
[07:51:31] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[07:51:34] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[07:51:34] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14078d3ca to 14b7f673a: 02http://git.io/N3iJvQ
[07:51:34] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[07:52:07] <Eridius> because then I can (hopefully) write a lint that checks that a given function has no destructors for any stack values, which I could then use in rust-lua to make longjmp not matter
[07:52:22] <Eridius> although I'm not sure how to deal with someone passing the lua::State to another function and calling lua methods there..
[07:52:34] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[07:52:47] <Eridius> well, I suppose maybe the lint could even ensure that the lua::State isn't passed to any function that isn't itself marked with the attribute? I dunno
[07:53:12] <eddyb> https://github.com/mozilla/rust/issues/10382#issuecomment-33767365
[07:53:37] <eddyb> Eridius: you probably want an effect system
[07:53:57] <Eridius> maybe if I knew more about what that meant ;)
[07:54:09] * Eridius idles
[07:54:17] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[07:54:17] *** ChanServ sets mode: +qo brson brson
[07:56:50] *** Joins: dbaupp (Thunderbir@moz-68C83524.lns20.syd6.internode.on.net)
[07:58:51] *** Quits: luzie (lucy@moz-CD18B14B.customer.cdi.no) (Connection reset by peer)
[07:59:33] <dbaupp> eddyb: both of your suggestions on https://github.com/mozilla/rust/issues/10382#issuecomment-33767365 sound a lot like compiler magic :P
[08:00:23] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[08:00:23] *** ChanServ sets mode: +ao pcwalton pcwalton
[08:02:08] *** Joins: luziie (lucy@moz-CD18B14B.customer.cdi.no)
[08:03:05] <eddyb> dbaupp: how so?
[08:03:19] <dbaupp> eddyb: magical compiler optimisations
[08:03:22] <dbaupp> requiring purity and stuff
[08:03:24] <eddyb> dbaupp: they are general (optimization-inducing) features
[08:03:47] <dbaupp> eddyb: it's true that they're general, but they're still compiler magic :P
[08:03:52] <eddyb> compare that to Any-specific treatment and tydesc usage
[08:04:48] <eddyb> dbaupp: there, better?
[08:05:38] <dbaupp> eddyb: there, even better :)
[08:05:44] *** Joins: lpy (lpy@ADFC09F7.6E01A51A.65042015.IP)
[08:05:47] <eddyb> oh noes
[08:06:17] <eddyb> dbaupp: sneaky goblin >_>
[08:06:23] * dbaupp puts words into eddyb's mouth
[08:06:32] <eddyb> but it makes less sense now
[08:06:41] * dbaupp cares not for sense
[08:06:44] <dbaupp> :P
[08:06:54] <dbaupp> (feel free to amend/revert)
[08:07:06] * eddyb pushes
[08:07:45] *** Quits: lpy (lpy@ADFC09F7.6E01A51A.65042015.IP) (Ping timeout)
[08:08:31] <dbaupp> eddyb: does your decompiler thing handle ARM asm input? ... that'd be really nice right now
[08:08:53] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[08:09:11] <cmr> dbaupp: watcha workin on?
[08:09:51] <eddyb> dbaupp: it handles most of the basic ARM ISA (it goes from binary to IR directly)... if it's still functional, I can try my local version. the one on github fails to run unless you change the required traceur-compiler version, I think (sorry)
[08:10:23] <dbaupp> cmr: porting http://ieeexplore.ieee.org/xpl/articleDetails.jsp?arnumber=6557535 their code: https://github.com/anthonix/ffts/
[08:10:27] <dbaupp> it's *horrible*
[08:10:33] <cmr> in the south, eh?
[08:10:42] <dbaupp> it's not even indented correctly :'(
[08:11:00] <dbaupp> and, afaict, is calling ARM NEON instructions on every platform
[08:11:05] <cmr> "
[08:11:08] <cmr> If you like FFTS, please show your support by sending a postcard"
[08:11:10] <cmr> wut
[08:11:18] <dbaupp> eddyb: it's fine :) i'll manange...
[08:11:27] <cmr> wait surely it can't be using neon on every platform
[08:11:30] * dbaupp dinner
[08:11:31] <eddyb> it doesn't handle NEON at all
[08:11:32] <dbaupp> cmr: yes
[08:11:37] <dbaupp> that what makes no sense
[08:12:18] <eddyb> (my wiREd, that is)
[08:12:37] <eddyb> (and when I'll start working on it again, it's going to be r3 and written in Rust)
[08:13:11] <cmr> it claims to be fster than ipp, which would be *awesome*
[08:13:16] <cmr> dbaupp: best of luck!
[08:19:56] <eddyb> cmr: right now I need a command-line tool to perform inflation and I can't find one :/
[08:20:16] <cmr> eddyb: gunzip?
[08:20:18] <eddyb> gunzip wants the gz header specifically
[08:20:21] <cmr> ah
[08:20:25] <cmr> import zlib?
[08:20:27] <cmr> (in python)
[08:20:52] <eddyb> oh, right, silly me. I can use node.js for this
[08:21:02] <eddyb> cmr: thanks for... waking me up :P
[08:21:04] <cmr> or that, too.
[08:21:14] <cmr> eddyb: welcome to being a programmer, we can write our own tools ;p
[08:21:36] <eddyb> I just wanted to quickly check if I were doing something stupidly wrong
[08:23:56] <eddyb> require('zlib').inflate(require('fs').readFileSync('test/store.png').slice(41, 65), console.log.bind(console));
[08:25:24] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[08:27:51] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:28:03] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:33:25] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[08:34:15] <eddyb> cmr: I see memory usage fluctuate between 100MB and 200MB for rust-png, it's silly :/
[08:34:20] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[08:34:35] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[08:34:59] *** Joins: andrew-d_w (andrew-d_w@4CCE6E0C.339B431B.1E537B93.IP)
[08:35:01] *** Quits: andrew-d_w (andrew-d_w@4CCE6E0C.339B431B.1E537B93.IP) (Input/output error)
[08:35:27] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[08:43:12] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:44:00] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:51:17] *** Quits: luziie (lucy@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[08:52:38] *** Joins: luziie (lucy@moz-CD18B14B.customer.cdi.no)
[08:59:12] *** Joins: pnkfelix (pnkfelix@moz-B1D2E7D0.pck.nerim.net)
[09:00:41] <dbaupp> cmr: it's so fast because of magical hand-written SSE/NEON code
[09:00:48] <dbaupp> i'm not gonna get that fast :P
[09:01:50] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[09:01:50] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/3_YBkw
[09:01:50] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[09:04:28] *** Quits: pnkfelix (pnkfelix@moz-B1D2E7D0.pck.nerim.net) (Ping timeout)
[09:04:38] <eddyb> dbaupp: I thought there was autogeneration somewhere. is that hand-written code a building block?
[09:04:51] <dbaupp> eddyb: there's various parts
[09:04:59] <dbaupp> the hand written code is memcpy'd into the generated code
[09:05:10] <eddyb> I would rather see LLVM IR that compiles to that hand written code
[09:05:15] <dbaupp> i.e. they're the fixed/hyper-optimised parts of it
[09:05:16] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[09:05:35] <dbaupp> good luck convincing LLVM to emit exactly what's required :P
[09:05:36] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[09:06:05] <eddyb> dbaupp: inline assembly and carefully start moving things out into regular code, I guess
[09:06:27] *** Joins: lpy (lpy@ADFC09F7.6E01A51A.65042015.IP)
[09:06:31] <dbaupp> or just hand write it in ASM :P
[09:06:34] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[09:06:34] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/NHmyRw
[09:06:34] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[09:06:52] <dbaupp> (admittedly, I'd much prefer anything other than ASM atm. :/ )
[09:07:04] <eddyb> ASM isn't portable :P
[09:08:29] *** Quits: lpy (lpy@ADFC09F7.6E01A51A.65042015.IP) (Ping timeout)
[09:08:30] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Client exited)
[09:08:52] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[09:09:10] <dbaupp> yeah, but neither is extreme performance
[09:11:29] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[09:11:29] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/NHmyRw
[09:11:29] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[09:11:30] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[09:11:31] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/uo8hcg
[09:11:31] <ghrust> 13rust/06auto 14929390e 15Ben Noordhuis: Add libc::consts::os::posix01::PTHREAD_STACK_MIN...
[09:11:31] <ghrust> 13rust/06auto 143784c4d 15Ben Noordhuis: Retry on EINVAL from pthread_attr_setstacksize()...
[09:11:31] <ghrust> 13rust/06auto 1448c80d3 15Ben Noordhuis: Use __pthread_get_minstack() when available....
[09:11:32] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[09:33:04] *** Joins: rca (rcatolino@moz-3F45C50.adsl.proxad.net)
[09:35:14] *** flaper87|afk is now known as flaper87
[09:40:10] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[09:48:33] *** Joins: lpy (lpy@ADFC09F7.6E01A51A.65042015.IP)
[09:50:57] *** Joins: sigma (sigma@moz-B2E77065.range86-184.btcentralplus.com)
[09:59:32] *** Quits: sigma (sigma@moz-B2E77065.range86-184.btcentralplus.com) (Client exited)
[10:01:45] *** Joins: sigma (sigma@moz-B2E77065.range86-184.btcentralplus.com)
[10:04:27] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[10:05:58] *** Quits: luziie (lucy@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[10:06:31] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[10:06:31] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14a164292 to 14f910a97: 02http://git.io/N3iJvQ
[10:06:31] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[10:07:31] *** Joins: luziie (lucy@moz-CD18B14B.customer.cdi.no)
[10:15:34] *** Quits: sigma (sigma@moz-B2E77065.range86-184.btcentralplus.com) (Client exited)
[10:16:34] <dbaupp> bjz: ping
[10:17:11] <bjz> dbaupp: pong
[10:17:51] <dbaupp> bjz: could you squash the loop commit into the first commit on https://github.com/mozilla/rust/pull/11930 ?
[10:18:47] <bjz> ok
[10:19:02] <dbaupp> r=me after that
[10:19:09] <bjz> btw, I was getting a weird error from a biguint test
[10:19:27] <dbaupp> ah?
[10:19:33] <bjz> https://gist.github.com/bjz/909695aadf1b6a38aaaf
[10:19:48] <dbaupp> oh, I think I saw you said something in the backlog when I woke up this morning
[10:19:53] <bjz> https://gist.github.com/bjz/909695aadf1b6a38aaaf#file-o_o-L137
[10:20:09] <dbaupp> that's weird
[10:20:15] <dbaupp> is it reliably failing?
[10:20:24] <bjz> twice
[10:20:29] <bjz> I can try again
[10:20:40] <dbaupp> twice sounds like it's broken...
[10:21:01] <bjz> dunno where it popped up
[10:21:18] <bjz> biguints use vectors
[10:21:38] <dbaupp> wait
[10:21:42] <bjz> which use the next power of two thing for capacities?
[10:21:47] <dbaupp> that test's #[should_fail]
[10:21:56] <bjz> :[
[10:21:59] <dbaupp> so I think it's just a problem with the unwinding
[10:22:12] <dbaupp> that's not exactly encouraging though...
[10:22:16] <dbaupp> try again?
[10:23:24] <bjz> ok
[10:23:50] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Ping timeout)
[10:23:51] *** Quits: luziie (lucy@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[10:24:05] *** Joins: luziie (lucy@moz-CD18B14B.customer.cdi.no)
[10:24:38] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[10:26:13] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[10:29:00] *** Quits: eddyb (eddy@832D2DE5.66315F97.FB866788.IP) (Ping timeout)
[10:35:32] *** Joins: eddyb (eddy@832D2DE5.66315F97.FB866788.IP)
[10:36:32] <eddyb> dbussink: we have a serious issue
[10:36:38] <eddyb> err, dbaupp ^^
[10:36:55] <dbaupp> eddyb: ?
[10:37:05] * dbaupp is intrigued
[10:37:22] <eddyb> my *relatively tiny* macros double the RAM usage when I double them
[10:37:41] <dbaupp> macros doing what?
[10:37:42] <eddyb> from 200MB to 400MB
[10:37:48] <dbaupp> (and doubling macros??)
[10:37:55] <dbaupp> typo?
[10:38:20] <eddyb> erm. when I use them twice, memory usage during compilation is doubled
[10:38:24] <dbaupp> ah
[10:38:32] <dbaupp> and three times triples?
[10:39:02] <eddyb> probably. but for the small control flow code I have, I expected way less :/
[10:39:13] <dbaupp> what is the macro doing?
[10:40:21] *** Quits: luziie (lucy@moz-CD18B14B.customer.cdi.no) (Connection reset by peer)
[10:40:34] *** Joins: luziie (lucy@moz-CD18B14B.customer.cdi.no)
[10:41:03] <eddyb> dbaupp: I had an assert in there, still goes to ~500MB
[10:42:13] <dbaupp> eddyb: ... what is the macro doing?
[10:42:30] <eddyb> dbaupp: just some matching, if's, etc.
[10:43:04] <dbaupp> eddyb: can you post it?
[10:44:19] <eddyb> dbaupp: weird, it's not during expansion. I'm a little confused now. I previously had a few things that could trigger formatting in there, let me make sure what's happening first
[10:45:51] <eddyb> dbaupp: okay, so I was right that it would be too weird for this to be caused by AST, it seems to be analysis, instead
[10:46:35] <eddyb> 8 * 30 macro expansions btw
[10:48:03] <dbaupp> I thought you only had 2?
[10:48:09] * dbaupp is very confused
[10:48:18] <eddyb> I had 8 * 14 before
[10:48:45] <dbaupp> oh
[10:49:02] <eddyb> dbaupp: oh, I have so many expressions, typeck grows from under 100MB to 500MB and liveness (which I knew about) explodes to 1GB
[10:50:31] <dbaupp> eddyb: your favourite problem? :P
[10:50:50] <eddyb> I should just go ahead and kill liveness
[10:50:58] <eddyb> might use a trie for it, I guess
[10:50:58] <dbaupp> what's it doing?
[10:51:09] <eddyb> liveness only deals in warnings these days, IIRC
[10:51:30] <eddyb> unused lints and whatnot. it might even overlap with borrowck's similar checks
[10:53:49] <eddyb> haha, oops, I think I broke --pretty identified with my ast_map change. unless it was supposed to use -1 everywhere
[10:54:20] <dbaupp> yes
[10:54:26] <dbaupp> that's DUMMY_NODE_ID
[10:54:31] <dbaupp> --pretty expanded,identified
[10:54:36] <eddyb> oh, silly me
[10:54:37] <dbaupp> is the only thing that works no
[10:54:50] <dbaupp> w
[10:55:05] <eddyb> it does take a while
[10:55:06] <dbaupp> we should probably just remove --pretty identified, since it's completely meaningless
[10:55:19] *** Joins: sigma (sigma@moz-B2E77065.range86-184.btcentralplus.com)
[10:55:53] <eddyb> yay thousands of lines
[10:56:33] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[10:56:34] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14ca39f20 to 14f910a97: 02http://git.io/N3iJvQ
[10:56:34] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[10:56:37] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[10:56:37] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/UkOoJA
[10:56:37] <ghrust> 13rust/06auto 146e015b4 15JeremyLetang: Add test case for issue 7911
[10:56:37] <ghrust> 13rust/06auto 14c73e54d 15JeremyLetang: make main public.
[10:56:37] <ghrust> 13rust/06auto 1421e9028 15bors: auto merge of #11898 : JeremyLetang/rust/issue-7911, r=cmr...
[10:56:39] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[10:57:14] <eddyb> dbaupp: 190k lines
[10:57:25] <eddyb> 79346 nodes
[10:57:35] <dbaupp> hahaha
[10:57:40] <flaper87> o_0
[10:59:09] <eddyb> dbaupp: weird, out of those, only about a quarter are in my inflate impl
[10:59:59] <dbaupp> and the rest are stdlib?
[11:00:08] <eddyb> dbaupp: no, png.rs
[11:00:18] <eddyb> I'm guessing the inflate impl suffers from the "too many things in one function syndrome" - in local type inference, maybe?
[11:00:24] <dbaupp> oh ok
[11:00:34] <dbaupp> can you split it up feasibly?
[11:00:39] <bjz> dbaupp: same error :[
[11:00:53] <dbaupp> bjz: :(
[11:01:09] <dbaupp> bjz: I find it highly unlikely that any of those changes directly caused it
[11:01:24] <bjz> I'll try rebasing
[11:01:42] <dbaupp> hopefully that works... :(
[11:01:48] <eddyb> dbaupp: I can abuse generics over [u8, ..N] in a few places for CTFE-like benefits - but I used macros for control flow, mainly
[11:02:09] <eddyb> so I can return early from the enclosing function without returning bools and intermediary state in a million places
[11:02:53] <dbaupp> ah, so no breaking up :(
[11:03:06] <eddyb> dbaupp: oops - 175k lines are in inflate.rs, was using the wrong pretty mode
[11:03:15] <eddyb> so it is sheer code size
[11:03:24] <flaper87> eddyb: what are you working on?
[11:03:35] <eddyb> flaper87: rust-png
[11:03:42] <flaper87> oh ok! cool!
[11:03:44] <eddyb> 71499 nodes in just inflate.rs
[11:03:54] <eddyb> dbaupp: but I guess I will have to do it anyway
[11:05:50] <eddyb> dbaupp: removing one assert use results in 51038 nodes
[11:06:17] <dbaupp> woah, woah
[11:06:36] <dbaupp> what are you doing in that assert? assert!(/* 100 lines of Rust ...  */)? :P
[11:06:44] <eddyb> assert is big
[11:07:02] <eddyb> well, technically it's 240 asserts after expansion
[11:07:33] <flaper87> eddyb: yeah, I noticed that the other day. I was planing to take a look after I finish fixing libglob
[11:07:47] <dbaupp> eddyb: oh
[11:07:50] <dbaupp> 240
[11:08:07] <dbaupp> that sounds rather more sane to be generating 25000 nodes
[11:09:44] <eddyb> how do static asserts work?
[11:09:55] <cmr> eddyb: barely.
[11:10:05] <cmr> #[static_assert] must be applied to a static item
[11:10:08] <cmr> it must be of type bool
[11:10:20] <cmr> and it must evaluate to true
[11:10:24] <dbaupp> eddyb: do you strongly want the assert!()?
[11:10:36] <eddyb> I'm just thinking what to put there
[11:10:39] <dbaupp> you could replace it with a macro that expands to less
[11:10:54] <eddyb> abort would do, I guess
[11:11:15] <eddyb> there's still a lot of nodes :(
[11:11:34] <dbaupp> well... I was thinking just `#[inline(never)] fn fail() -> ! { fail!("rust-inflate assertion failed") }`
[11:11:50] <dbaupp> with a macro `simple_assert($b: expr) => if $b { fail() }`
[11:12:26] <eddyb> nah, the assert is not my problem, actually
[11:12:57] <dbaupp> oh?
[11:14:49] <eddyb> I can revert the previous expansion while retaining performance, I hope
[11:23:33] *** Quits: japaric (japaric@55D04ADF.DC1425E6.84437BC5.IP) (Ping timeout)
[11:24:09] <eddyb> dbaupp: down to 31143 nodes
[11:24:23] <dbaupp> ooh, nice
[11:24:25] <cmr> eddyb: what are you optimizing?
[11:24:52] <eddyb> cmr: sadly, nothing in the compiler
[11:25:03] <cmr> sure, but I'm sure it's interesting ;p
[11:25:14] <dbaupp> is there a way to filter pull requests out of the github issue list?
[11:26:02] <eddyb> cmr: I have an inflate implementation that works with fixed huffman trees
[11:26:19] <eddyb> cmr: and I abused macros a little too much in it
[11:26:22] <cmr> dbaupp: not that I've found before.
[11:27:39] <dbaupp> eddyb: macros are literally *impossible* to abuse! every program can be improved by using more macros
[11:27:42] * dbaupp <3 macros
[11:28:21] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[11:28:59] <flaper87> is it possible to use macros to just add new methods to an implementation? I tried the other day and it didn't work but I could've been doing it wrong.
[11:29:29] <cmr> flaper87: macros are a way of writing some code that transforms into different code.
[11:29:31] <dbaupp> you can't write impl ... { macro!() }
[11:29:31] <eddyb> flaper87: to an impl of a trait?
[11:29:39] <dbaupp> but you can put the impl inside the macro
[11:29:40] <cmr> they still need to obey the normal rules of rust code.
[11:29:46] <dbaupp> i.e. ahve the macro expand to the impl
[11:29:53] <eddyb> hmpf, can I define a macro in another macro?
[11:29:55] <flaper87> eddyb: yeah
[11:29:58] <dbaupp> eddyb: nope
[11:30:04] <eddyb> that explains the errors :(
[11:30:07] <dbaupp> eddyb: well, you can, but stuff breaks easily
[11:30:14] <dbaupp> i.e. you can't use any $... variables
[11:30:21] <dbaupp> because the other one tries to parse them
[11:30:24] <dbaupp> *outer
[11:30:25] <flaper87> To add more context: https://github.com/FlaPer87/rust-proton/blob/master/src/proton/messenger.rs#L10
[11:30:34] <flaper87> I'm pretty sure that can be written way better
[11:30:52] <flaper87> it now adds a new impl X {...} for each method
[11:31:02] <eddyb> if you have default methods and you.... accessors, yeah
[11:31:43] <flaper87> there are a bunch of getters / setters in this library that I don't want to write manually.
[11:32:29] <eddyb> flaper87: you could hoist the type so you only write it once
[11:33:07] <eddyb> flaper87: and if concat_idents were working, you could use it to simplify a lot of that nonsense
[11:33:21] <flaper87> eddyb: yeah! :/
[11:33:39] <flaper87> eddyb: re hoist the type, could you elaborate a bit more?
[11:34:17] <eddyb> it would end up looking like accessors! { for Message<'a> { address: str, subject: str, ... } }
[11:34:54] <flaper87> eddyb: gotcha!
[11:34:57] <flaper87> thnx
[11:38:21] <eddyb> dbaupp, cmr: can I use exponential expansion to create a static array?
[11:41:20] <dbaupp> eddyb: yes
[11:41:28] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Ping timeout)
[11:41:34] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[11:41:34] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1421e9028 to 14f910a97: 02http://git.io/N3iJvQ
[11:41:34] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[11:41:35] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[11:41:35] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/GAZAoQ
[11:41:35] <ghrust> 13rust/06auto 14e532e8d 15Daniel Micay: remove a layer of indirection from most intrinsics
[11:41:35] <ghrust> 13rust/06auto 144b80ca5 15bors: auto merge of #11917 : thestinger/rust/intrinsic, r=alexcrichton
[11:41:35] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[11:42:05] <eddyb> dbaupp: how? AFAIK you can't expand to a, b from a macro
[11:43:18] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[11:44:06] <dbaupp> eddyb: you expand to a, b into another macro expansion recursively
[11:44:15] <dbaupp> and then expand to the whole vector on the bottom layer
[11:44:28] <eddyb> how?
[11:44:30] <dbaupp> sec
[11:47:24] <dbaupp> gah
[11:47:28] <dbaupp> this silly ambiguity thing
[11:49:29] <dbaupp> eddyb: https://gist.github.com/huonw/4b94056f3d623f892f48
[11:50:34] <dbaupp> eddyb: i'm sure there's a better way to count than repeats of [<ident>] ... but I don't know it :(
[11:58:08] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Ping timeout)
[11:58:51] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[12:00:31] *** Quits: zimbabao (rajaram@47769425.AE842F9B.81C3DAA1.IP) (Ping timeout)
[12:01:17] *** Quits: rca (rcatolino@moz-3F45C50.adsl.proxad.net) (Ping timeout)
[12:02:38] *** Quits: jdm (jdm@moz-DB4A9C19.scl3.mozilla.com) (Quit: Lost terminal)
[12:05:57] *** Quits: blank_name (blank_name@6857152D.7C86004B.6D228269.IP) (Ping timeout)
[12:09:10] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[12:21:33] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[12:21:33] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 144b80ca5 to 14f910a97: 02http://git.io/N3iJvQ
[12:21:33] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[12:25:23] *** Joins: blank_name (blank_name@6857152D.7C86004B.6D228269.IP)
[12:26:17] *** Joins: rca (rcatolino@moz-3F45C50.adsl.proxad.net)
[12:33:57] *** kimundi is now known as zz_kimundi
[12:37:27] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[12:44:25] <cmr> fn in_triangle(...) -> true
[12:44:33] <cmr> a very optimistic type signature I wrote there
[12:44:49] <cmr> the scary thing, is that with datasort refinements, I think that'd be valid O_o
[12:44:52] *** Quits: sigma (sigma@moz-B2E77065.range86-184.btcentralplus.com) (Client exited)
[12:46:48] <dbaupp> cmr: not necessarily with that syntax
[12:47:09] <eddyb> cmr: what kind of refinements?
[12:47:10] <cmr> dbaupp: that'd comfort my sleep-deprived mind
[12:47:19] <cmr> eddyb: https://github.com/mozilla/rust/issues/1679
[12:47:29] *** Joins: sigma (sigma@moz-B2E77065.range86-184.btcentralplus.com)
[12:47:43] <cmr> eddyb: https://github.com/mozilla/rust/issues/1679
[12:47:53] <eddyb> twice?
[12:48:00] <cmr> erm
[12:48:03] <cmr> https://en.wikipedia.org/wiki/Refinement_type#Refinement_types
[12:48:05] <eddyb> rusti: type true = bool; fn in_triangle() -> true {false}
[12:48:07] <cmr> damn clipboard :(
[12:48:08] -rusti- pastebinned 8 lines of output: http://ix.io/ae8
[12:48:15] <dbaupp> eddyb: https://github.com/mozilla/rust/issues/1679
[12:48:40] <cmr> http://www.cs.cmu.edu/~rowan/sorts.html is interesting reading too.
[12:48:41] <dbaupp> eddyb: https://github.com/mozilla/rust/issues/1679
[12:49:53] <eddyb> let mut eddyb = eddyb;
[12:50:01] <eddyb> nope, still freezing in here :(
[12:51:20] <dbaupp> hahaha
[12:51:36] <cmr> heh
[12:51:38] <cmr> that's a great joke
[12:51:41] * cmr steals
[12:52:10] <dbaupp> cmr: eddyb gets a 'great joke' and mine get rated 0/5?!?
[12:52:18] <cmr> dbaupp: yours was terrible!
[12:52:21] <dbaupp> you're never getting a review from me again
[12:52:23] <cmr> and I can't remember what it was anymore
[12:52:31] <cmr> but if it's not related to an ICE pun, you can assume it's bad by default
[12:52:33] <eddyb> did dbaupp make a joke?
[12:52:39] <cmr> and freezing/thawing is basically an ICE pun
[12:52:42] <dbaupp> "All the good .times we had together"
[12:52:47] <dbaupp> post .times removal
[12:52:52] *** Quits: blank_name (blank_name@6857152D.7C86004B.6D228269.IP) (Ping timeout)
[12:52:54] <dbaupp> it was *hilarious*, trust me
[12:53:25] <eddyb> ICE as in Mr Freeze?
[12:53:26] <cmr> eddyb: ohhhhh
[12:53:29] <cmr> Yes!
[12:53:30] *** Joins: zimbabao (rajaram@A00D7A8D.32AF4EDF.D2D1FAF0.IP)
[12:53:36] <cmr> https://www.youtube.com/watch?v=SRH-Ywpz1_I
[12:53:41] <cmr> used to be in the topic of #rust
[12:53:51] <cmr> eddyb: so you should have removed `do`.
[12:54:12] <cmr> THat way I could say "but the hand that giveth also taketh, and eddyb also removed `do`."
[12:54:17] <cmr> re: default typarams
[12:54:23] <eddyb> ahh
[12:54:53] <cmr> I think I just invented a new development methodoly
[12:54:58] <cmr> Newletter-Quip Driven Development
[12:55:06] <eddyb> methodoly?
[12:55:08] <eddyb> newletter?
[12:55:11] <cmr> bah
[12:55:16] <cmr> brain is not working
[12:55:19] * cmr did not sleep last night
[12:55:36] <eddyb> I guess I shouldn't complain about my 7-9 hours of sleep
[12:55:48] <cmr> 7-9!? Luxury!
[12:55:57] <dbaupp> -2?
[12:56:12] * dbaupp const_eval
[12:56:30] * eddyb commits dbaupp as CTFE
[12:56:35] <cmr> https://gist.github.com/cmr/1f12c7cb5f989ff04b3a
[12:56:39] <cmr> so I just wrote that abomination
[12:56:42] <cmr> what math can make it nicer.
[12:56:56] <dbaupp> cmr: it won't compile
[12:57:02] <dbaupp> I can feeeeel it
[12:57:03] <cmr> I'm basically finding if a point is in the intersection of three planes
[12:57:12] <cmr> three half-planes, rather
[12:57:15] <cmr> ie, a triangle.
[12:57:16] <dbaupp> (mainly, your 3's are integers)
[12:57:26] <cmr> whoops
[12:57:33] <cmr> minor detail ;p
[12:57:37] <eddyb> you're.... not using num-rs?
[12:57:38] <dbaupp> cross products
[12:57:44] <eddyb> and that other stuff
[12:58:02] <cmr> num-rs is entirely tangential
[12:58:03] <dbaupp> cmr: http://www.blackpawn.com/texts/pointinpoly/
[12:58:05] <dbaupp> etc.
[12:58:13] <cmr> cgmath would be related
[12:58:17] <cmr> but that'd be cheating!
[12:58:21] <eddyb> the intersection of two planes is either a plane, a line, or nothing
[12:58:31] <dbaupp> (where etc. refers to 'google results for "point in triangle'")
[12:58:39] <dbaupp> eddyb: half planes in 2d
[12:59:08] <dbaupp> not planes in space
[12:59:11] <eddyb> wait, right, 2D. what's a plane in 2D?
[12:59:13] <dbaupp> (I assume)
[12:59:22] <dbaupp> eddyb: half plane == all points on one side of a line
[12:59:29] <dbaupp> (and none on the other)
[12:59:36] <eddyb> aah, that
[12:59:39] <cmr> oh hey that cross product trick is neato
[12:59:54] <dbaupp> <3 linear algebra
[12:59:57] <eddyb> cmr: pffft you confused me, I forgot it was about triangles >_>
[12:59:57] <cmr> eddyb: yes, basically 1/2 infinity ;P
[13:00:34] <eddyb> (that is, there is a triangle-specific solution, working with half-planes sounds overly confusing)
[13:01:05] <cmr> well yes.
[13:01:14] <cmr> my solution involved half-planes very explicitly
[13:01:30] <cmr> I solved the equations of the lines making up the sides and did some nonsense.
[13:01:35] <dbaupp> i.e. checking it was in all the halfplanes created by the edges of the triangle?
[13:01:39] <cmr> yeah
[13:01:45] <dbaupp> the cross product trick is so good
[13:01:48] <cmr> it is.
[13:02:31] *** Quits: sigma (sigma@moz-B2E77065.range86-184.btcentralplus.com) (Client exited)
[13:04:37] <cmr> so determining whether the start point is inside the triangle turns out to be the longest part of my sierpinski triangle approximatamatron.
[13:04:56] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Input/output error)
[13:04:57] <dbaupp> are you drawing it?
[13:05:01] <cmr> ok
[13:05:02] <dbaupp> (drawing it live)
[13:05:03] <eddyb> you're not using the random method?
[13:05:05] <cmr> so besides drawing it
[13:05:09] <cmr> eddyb: this is the random method
[13:05:14] <cmr> aka chaos game
[13:05:20] <cmr> but the start point needs to be inside the triangle
[13:05:42] <eddyb> the random method is really simple IIRC
[13:05:44] <dbaupp> cmr: I was actually asking if you were drawing to screen, not wondering if the drawing took longer
[13:05:47] <cmr> dbaupp: I'm not due to the constraints of the homework assignment.
[13:05:54] <cmr> I'm just drawing the final result
[13:05:57] <cmr> (with opengl)
[13:06:02] <dbaupp> yeah, that's what I mean
[13:06:03] <dbaupp> t
[13:06:04] <dbaupp> cool
[13:18:36] *** Joins: blank_name (blank_name@75624DB1.E6D3F868.537E532E.IP)
[13:24:46] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[13:28:32] <cmr> dbaupp: error: failed to find an implementation of trait std::rand::distributions::range::SampleRange for (<generic float #2>,<generic float #3>)
[13:28:34] <cmr> :(
[13:30:09] <cmr> (would have been so cool for that to work)
[13:30:49] <dbaupp> cmr: that would be cool
[13:31:02] <dbaupp> but not in std
[13:31:08] <cmr> wait why not?
[13:31:16] <cmr> std is the only place that *can* implement it for the tuples.
[13:31:17] * dbaupp wants librand
[13:31:21] <dbaupp> (or part of libnum)
[13:31:30] <cmr> ok, if it all left libstd yes.
[13:31:34] <dbaupp> nah, move the whole std::rand::distributions out of it
[13:31:35] <dbaupp> yea
[13:31:35] <dbaupp> h
[13:31:51] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[13:31:51] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/WGCBgQ
[13:31:51] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[13:31:58] <cmr> I really like how Rng turned out.
[13:32:03] <dbaupp> <3
[13:32:04] <cmr> it's very nice to use.
[13:32:30] <dbaupp> :) there's still some stuff that could be removed/adjusted, iirc
[13:36:34] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[13:36:35] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/7ryf4g
[13:36:35] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[13:36:35] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[13:36:35] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/lqK4ZQ
[13:36:35] <ghrust> 13rust/06auto 140d0205a 15Flavio Percoco: Add test case for issue #11681
[13:36:35] <ghrust> 13rust/06auto 14535e806 15bors: auto merge of #11929 : FlaPer87/rust/issue-11681, r=huonw...
[13:36:35] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[13:37:01] *** Quits: new_one (new_one@75DA6967.1BCA12AB.B3C0173E.IP) (Ping timeout)
[13:37:06] *** Joins: canhtak (canhtak@moz-9E539298.wl.t.ulaval.ca)
[13:42:10] *** Quits: Kxepal (Miranda@moz-59E1BFE6.pppoe.mtu-net.ru) (Quit: Kxepal)
[13:43:48] *** Joins: Kxepal (Miranda@moz-59E1BFE6.pppoe.mtu-net.ru)
[13:55:16] *** Joins: NiccosSystem` (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[13:55:25] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Connection reset by peer)
[14:09:23] *** Quits: zimbabao (rajaram@A00D7A8D.32AF4EDF.D2D1FAF0.IP) (Connection reset by peer)
[14:12:11] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[14:24:26] *** Quits: luziie (lucy@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[14:25:12] *** Joins: zimbabao (rajaram@FD91A22A.240F5E31.D2D1FAF0.IP)
[14:25:41] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[14:25:52] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[14:26:27] *** Joins: luz (lucy@moz-CD18B14B.customer.cdi.no)
[14:39:10] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[14:42:00] *** zz_kimundi is now known as kimundi
[14:45:53] *** Joins: doomlord__ (servitor@moz-841308DB.range86-160.btcentralplus.com)
[14:46:37] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[14:46:37] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/lqK4ZQ
[14:46:37] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[14:50:17] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[14:51:37] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[14:51:37] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/XptoxA
[14:51:37] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[14:51:39] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[14:51:40] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/lccOOQ
[14:51:40] <ghrust> 13rust/06auto 14464b2e2 15Ben Noordhuis: Add libc::consts::os::posix01::PTHREAD_STACK_MIN...
[14:51:40] <ghrust> 13rust/06auto 14b02b5cd 15Ben Noordhuis: Retry on EINVAL from pthread_attr_setstacksize()...
[14:51:40] <ghrust> 13rust/06auto 14431edac 15Ben Noordhuis: Use __pthread_get_minstack() when available....
[14:51:41] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[14:51:45] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[14:53:15] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[14:53:34] <strcat> acrichto: what OS is on the linux snapshot bot?
[14:54:52] <cmr> some ancient centos I think
[14:55:43] <strcat> ah nvm can use the minimum version from the binary
[14:55:45] *** Joins: japaric (japaric@BA37D376.D2FA42B.95AFB88D.IP)
[14:56:04] <eddyb> strcat: trying to fix them?
[14:56:09] <strcat> no
[14:58:12] <strcat> eddyb: https://github.com/mozilla/rust/pull/11952 just for this
[15:30:20] *** Joins: lkuper (lkuper@moz-D862222C.dhcp-bl.indiana.edu)
[15:33:32] *** Joins: erickt1 (Adium@8C9ECD8F.3A598286.F12515B4.IP)
[15:34:14] <mrmonday> how would I go about making libnative::io::retry() work with ssize_t as well as c_int? Is there a way to do that with generics or would I need another function for it?
[15:34:47] <eddyb> mrmonday: make ssize_t int instead of i32/i64
[15:35:02] <eddyb> mrmonday: wait, no, you're asking something different
[15:35:27] <eddyb> mrmonday: c_int can be smaller than int, while ssize_t is the same size as int (not sure if it's the same type)
[15:35:33] *** Joins: pnkfelix (pnkfelix@moz-B1D2E7D0.pck.nerim.net)
[15:36:13] <eddyb> mrmonday: I'm guessing you could have it generic with a trait bound and implement that trait for both types
[15:36:50] <eddyb> (though just doing that will fail on 32bit architectures, need to #[cfg(...)] one of them)
[15:37:29] <eddyb> (but if c_int is always i32 and ssize_t is always int, implementing both won't fail)
[15:39:13] <mrmonday> c_int is i32 on all platforms from what I can see, ssize_t is either i32 or i64
[15:40:09] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[15:40:41] <eddyb> mrmonday: yeah, it should be replaced with int
[15:41:30] <mrmonday> that breaks everything, I'd need to add casts everywhere
[15:42:11] <eddyb> why?
[15:42:33] <eddyb> ssize_t is intptr_t on all platforms that rust supports
[15:42:43] <eddyb> which is semantically identical to our "int"
[15:42:55] <eddyb> not just i32 on some platforms and i64 on others
[15:43:16] <eddyb> (we already fixed size_t not being uint, I think)
[15:45:22] <mrmonday> fn retry(f: || -> libc::c_int) -> libc::c_int {
[15:45:27] <mrmonday> is the current definition
[15:45:55] <mrmonday> changing the c_ints to int gives lots of errors like error: mismatched types: expected `int` but found `i32` (expected int but found i32)
[15:46:06] <eddyb> mrmonday: not c_int but ssize_t
[15:46:13] <mrmonday> which needs casts everywhere to sort
[15:46:26] <eddyb> c_int is always i32
[15:46:34] <eddyb> our int is pointer-sized
[15:46:39] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[15:46:39] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/oHdx5A
[15:46:39] <ghrust> 13rust/06auto 14bc8983a 15David Manescu: Handle attributes on cross-crate tuple-structs correctly...
[15:46:39] <ghrust> 13rust/06auto 14b9ca749 15bors: auto merge of #11932 : dmanescu/rust/11741-stability-cross-crate, r=alexcrichton...
[15:46:39] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[15:46:40] <mrmonday> I'm trying to support c_int and ssize_t in one go rather than copy/pasting the function
[15:47:04] <eddyb> mrmonday: c_int has to remain i32, I wasn't talking about *that* problem but another one
[15:47:14] *** flaper87 is now known as flaper87|afk
[15:47:49] <eddyb> fn retry<T: CErrorInt>(f: || -> T) -> T {...} impl CErrorInt for libc::c_int {...} impl CErrorInt for libc::ssize_t {...}
[15:48:09] <mrmonday> that's a bit messy, but I'll take it
[15:48:24] <eddyb> mrmonday: ^^ that is probably what you want. the issue with that is that ssize_t needs to be int, not i32/i64, otherwise the two implementations will conflict on 32bit arches
[15:48:34] <eddyb> that's why I told you to make ssize_t an int
[15:50:10] <mrmonday> oh I see
[15:51:07] <eddyb> mrmonday: you could also use a signed integer trait
[15:52:14] *** Joins: nielsle (nielsle@moz-C46DA772.boa.fiberby.dk)
[15:52:56] *** Quits: rca (rcatolino@moz-3F45C50.adsl.proxad.net) (Quit: Lost terminal)
[15:53:08] <mrmonday> I tried using Signed before, but that gives a weird error
[15:53:27] *** Quits: eddyb (eddy@832D2DE5.66315F97.FB866788.IP) (Ping timeout)
[15:56:13] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[15:56:13] *** ChanServ sets mode: +ao dherman dherman
[15:59:29] <mrmonday> ah, weird error because a literal is never a T
[15:59:35] <mrmonday> that's a bit annoying :<
[16:00:26] <mrmonday> don't seem to be able to cast to a T either
[16:00:27] <mrmonday> hmm
[16:00:53] <kimundi> mrmonday: what are you trying todo with the T? comparing it to a literal?
[16:01:09] <mrmonday> fn retry<T:Signed>(f: || -> T) -> T {
[16:01:19] <mrmonday> is the working definition of retry
[16:01:39] <mrmonday> as in, the one I'm working with, it doesn't actually work
[16:01:59] <mrmonday> it doesn't like match{}ing f() against -1
[16:02:13] <mrmonday> error: mismatched types: expected `T` but found `<generic integer #0>` (expected type parameter but found integral variable
[16:02:16] <kimundi> makes sense
[16:02:18] <mrmonday> is the specific error
[16:02:45] <mrmonday> not really sure how to get around it
[16:03:03] <kimundi> T can be any type that implements Signed after all
[16:04:10] *** Joins: lkuper_ (lkuper@D7FD9EF0.14CD977C.51B6877.IP)
[16:04:13] <kimundi> mrmonday: You either need to construct a value of T from a specific literal like -1 by something like the FromPrimitive trait, or you write that CErrorInt trait and give it a explcit is_error(&self)  -> bool method
[16:05:36] *** Quits: Kxepal (Miranda@moz-59E1BFE6.pppoe.mtu-net.ru) (Ping timeout)
[16:08:44] *** Joins: Kxepal (Miranda@moz-C703BD0A.pppoe.mtu-net.ru)
[16:11:53] *** Joins: eddyb (eddy@832D2DE5.66315F97.FB866788.IP)
[16:17:17] *** Quits: lpy (lpy@ADFC09F7.6E01A51A.65042015.IP) (Ping timeout)
[16:17:47] <mrmonday> got around it
[16:17:51] <mrmonday> it's fairly ugly, but it'll do
[16:18:31] *** Joins: lpy (lpy@ADFC09F7.6E01A51A.65042015.IP)
[16:18:49] *** Quits: NiccosSystem` (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Quit: Leaving)
[16:20:57] *** Quits: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp) (Client exited)
[16:21:18] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[16:23:01] *** Quits: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp) (Ping timeout)
[16:24:01] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[16:24:46] <kimundi> mrmonday: which way did you choose?
[16:32:52] <mrmonday> kimundi: https://gist.github.com/mrmonday/85cb0fadf74434c5eca3
[16:33:08] <mrmonday> couldn't get it working with match() so I got rid of that too
[16:33:29] *** Quits: Kxepal (Miranda@moz-C703BD0A.pppoe.mtu-net.ru) (Ping timeout)
[16:34:00] *** Quits: lpy (lpy@ADFC09F7.6E01A51A.65042015.IP) (Ping timeout)
[16:34:03] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[16:34:12] *** Quits: zimbabao (rajaram@FD91A22A.240F5E31.D2D1FAF0.IP) (Ping timeout)
[16:34:14] <eddyb> match()?
[16:34:20] <mrmonday> match{}
[16:34:24] <mrmonday> wrong brackets, sorry :3
[16:34:24] <kimundi> heh, alright :)
[16:35:01] *** Joins: lpy (lpy@ADFC09F7.6E01A51A.65042015.IP)
[16:36:40] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[16:36:40] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/XutgHw
[16:36:40] <ghrust> 13rust/06auto 14d81b120 15Brendan Zabarauskas: Make next_power_of_two generic for unsigned integers...
[16:36:40] <ghrust> 13rust/06auto 143f93830 15Brendan Zabarauskas: Remove some unused imports
[16:36:40] <ghrust> 13rust/06auto 14072c96f 15Brendan Zabarauskas: Remove free-standing div functions in std::uint
[16:36:42] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[16:37:43] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[16:37:43] *** ChanServ sets mode: +ao dherman dherman
[16:40:41] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[16:44:09] <mrmonday> so the last_error() function from libnative would be super-useful in my raw socket stuff for librustuv... is there somewhere I could move that function to which would be accessible from both and is a sensible place for it to be?
[16:45:49] <Yurume> https://github.com/mozilla/rust/issues/11950#issuecomment-33809617 should we document the "tier 2" platforms which are "supported" but not "tested"?
[16:45:58] *** bstrie_rules is now known as bstrie_whimsy
[16:46:33] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[16:46:34] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 148bf885f to 14535e806: 02http://git.io/N3iJvQ
[16:46:34] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[16:46:35] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[16:46:35] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/uRWeUg
[16:46:35] <ghrust> 13rust/06auto 146a941ec 15Keshav Kini: Fix inconsistency in tutorial.md...
[16:46:35] <ghrust> 13rust/06auto 14bec01ad 15bors: auto merge of #11933 : kini/rust/patch-1, r=alexcrichton...
[16:46:35] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[16:50:21] *** flaper87|afk is now known as flaper87
[16:51:24] *** Quits: lpy (lpy@ADFC09F7.6E01A51A.65042015.IP) (Client exited)
[16:59:24] *** Quits: erickt1 (Adium@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[17:00:11] *** flaper87 is now known as flaper87|afk
[17:03:38] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[17:03:39] *** ChanServ sets mode: +ao dherman dherman
[17:08:05] <acrichto> strcat: I think it's centos some super old version (linux snapshot bot)
[17:12:39] *** Quits: lkuper_ (lkuper@D7FD9EF0.14CD977C.51B6877.IP) (Quit: lkuper_)
[17:16:50] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[17:17:08] *** Joins: gwty (gwtypc@4F8A36D7.160E5D63.27560D6E.IP)
[17:18:01] *** Quits: doomlord__ (servitor@moz-841308DB.range86-160.btcentralplus.com) (Quit: Leaving)
[17:18:12] *** Joins: doener (doener@moz-C68F600D.unity-media.net)
[17:22:06] *** Joins: lpy (lpy@ADFC09F7.6E01A51A.65042015.IP)
[17:23:05] *** Joins: tupshin_ (quassel@moz-E7B03838.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com)
[17:24:24] *** Quits: lpy (lpy@ADFC09F7.6E01A51A.65042015.IP) (Ping timeout)
[17:26:38] *** Quits: tupshin_ (quassel@moz-E7B03838.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com) (Quit: http://quassel-irc.org - Chat comfortably. Anywhere.)
[17:26:41] *** Joins: tupshin_ (quassel@moz-E7B03838.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com)
[17:43:05] *** Quits: eddyb (eddy@832D2DE5.66315F97.FB866788.IP) (Ping timeout)
[17:47:15] *** Joins: eddyb (eddy@832D2DE5.66315F97.FB866788.IP)
[17:48:09] <acrichto> dbaupp: ping
[17:56:31] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[17:56:31] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/uRWeUg
[17:56:31] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[18:01:52] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[18:01:52] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/8V3ltQ
[18:01:52] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[18:06:04] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[18:06:24] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[18:17:55] *** Quits: gwty (gwtypc@4F8A36D7.160E5D63.27560D6E.IP) (Ping timeout)
[18:19:13] <acrichto> r? https://github.com/mozilla/rust/pull/11955
[18:19:19] <acrichto> wanna get this merged quickly if possible
[18:20:04] *** Quits: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net) (Connection reset by peer)
[18:20:08] *** Quits: canhtak (canhtak@moz-9E539298.wl.t.ulaval.ca) (Quit: canhtak)
[18:21:14] <acrichto> strcat: ^
[18:23:08] *** Joins: lpy (lpy@ADFC09F7.6E01A51A.65042015.IP)
[18:23:52] <cmr> acrichto: do you have evidence that it actually changes things?
[18:23:58] <acrichto> cmr: I do indeed
[18:24:09] <cmr> k
[18:24:10] <acrichto> everything segfaulted locally before it, it doesn't segfault after it
[18:24:22] <cmr> that's some good evidence ;p
[18:24:29] <acrichto> it's weird that it didn't break the bots instantly
[18:24:32] <cmr> any idea why?
[18:24:33] <cmr> yeah it is
[18:24:43] <acrichto> I'm guessing that libunwind sometimes needs it
[18:24:51] <acrichto> some backtraces I saw were in some function name with RBP in the name
[18:25:07] <acrichto> but that also doesn't totally make sense...
[18:25:13] *** Quits: lpy (lpy@ADFC09F7.6E01A51A.65042015.IP) (Ping timeout)
[18:25:14] *** Joins: gwty (gwtypc@BFFD2B64.D9A70983.27560D6E.IP)
[18:30:43] <nate> acrichto: did you mean to approve all of https://github.com/mozilla/rust/pull/11944 or just the one commit?
[18:30:58] <nate> (apologies if you did actually approve the whole thing, I'm a little unclear on how it actually works)
[18:31:19] <acrichto> nate: the whole thing, we write r+ on the last commit and the bors will come by and pick it up and try to merge it
[18:31:28] <acrichto> nate:  you can watch http://buildbot.rust-lang.org/bors/bors.html for a status
[18:31:40] <acrichto> yours is in the queue (we have a long queue!)
[18:31:41] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[18:31:50] <nate> ahh ok :)
[18:31:51] <nate> thanks!
[18:31:53] <acrichto> we've also had some rocky tests lately
[18:31:57] <acrichto> np, thank you for the patch!
[18:31:58] <nate> heh
[18:40:08] *** Joins: new_one (new_one@FFA6C699.940F5E39.B3C0173E.IP)
[18:58:30] <nate> Also should https://github.com/mozilla/rust/issues/5172 be closed now?
[19:06:11] <nate> does putting "Closes #5172" on a PR make that happen automatically or does it just have to be done manually?
[19:10:04] <cmr> nate: automatically
[19:10:41] *** Quits: cgaebel (chatzilla@moz-92F543E4.nycmny.east.verizon.net) (Ping timeout)
[19:16:39] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[19:16:39] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/morn7A
[19:16:39] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[19:18:19] <nate> cmr: ok, that's handy!
[19:18:50] <nate> and that goes in the PR description?
[19:19:17] <cmr> or any of the commits.
[19:21:34] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[19:21:34] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/G2Evrw
[19:21:34] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[19:21:35] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[19:21:35] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/6lIBGw
[19:21:35] <ghrust> 13rust/06auto 14e8e0cdd 15Alex Crichton: Disable fp elim on mac64...
[19:21:35] <ghrust> 13rust/06auto 14f478796 15bors: auto merge of #11955 : alexcrichton/rust/fix-unwinding-on-mac-64, r=cmr...
[19:21:35] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[19:22:41] <eddyb> I can see it failing on the mac64 bot(s) :P
[19:23:53] *** Joins: lpy (lpy@ADFC09F7.6E01A51A.65042015.IP)
[19:24:11] *** Joins: pauls (pauls@moz-BFEF1F22.ccs.neu.edu)
[19:25:57] *** Quits: lpy (lpy@ADFC09F7.6E01A51A.65042015.IP) (Ping timeout)
[19:33:23] *** Quits: luz (lucy@moz-CD18B14B.customer.cdi.no) (Quit: 04â†)
[19:33:24] *** Joins: luz (lucy@moz-CD18B14B.customer.cdi.no)
[19:37:02] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Ping timeout)
[19:43:10] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[19:43:10] *** ChanServ sets mode: +ao pcwalton pcwalton
[19:56:08] <strcat> acrichto: did you open an issue about it?
[19:56:30] <strcat> don't understand why it's an issue for rust but not other languages
[19:58:10] <acrichto> strcat: I did
[19:58:15] <acrichto> I don't understand either...
[19:58:26] <acrichto> it may just be how we're using libunwind
[19:58:33] <acrichto> we may need to configure it somewhere saying "by the way there's no frame pointers"
[19:58:35] <acrichto> unsure though...
[20:01:59] *** flaper87|afk is now known as flaper87
[20:04:35] <strcat> oh well
[20:11:03] *** flaper87 is now known as flaper87|afk
[20:21:15] *** Joins: TimAbraldes (quassel@125EF623.B2666F0E.66399531.IP)
[20:24:37] *** Joins: lpy (lpy@ADFC09F7.6E01A51A.65042015.IP)
[20:24:54] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[20:24:56] *** Quits: pnkfelix (pnkfelix@moz-B1D2E7D0.pck.nerim.net) (Ping timeout)
[20:26:48] *** Quits: lpy (lpy@ADFC09F7.6E01A51A.65042015.IP) (Ping timeout)
[20:28:06] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[20:30:01] *** Joins: blaze (blaze@moz-9B9AB2F0.dhcp.inet.fi)
[20:32:06] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[20:32:07] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/6lIBGw
[20:32:07] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[20:32:13] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[20:32:13] *** ChanServ sets mode: +qo brson brson
[20:34:09] <olsonjeffery> where is deriving implemented?
[20:34:14] <olsonjeffery> i have a huge explosion of this:
[20:34:17] <olsonjeffery> <quote expansion>:4:43: 4:80 error: unresolved import: could not find `serialize` in `extra`.
[20:34:19] <olsonjeffery> <quote expansion>:4                                           ::extra::serialize::Decodable::decode(_d)
[20:34:25] <olsonjeffery> because i moved Decodable et al out to another crate
[20:35:12] <strcat> libsyntax/ext
[20:36:34] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[20:36:34] <ghrust> 01[13rust01] 15bors pushed 6 new commits to 06auto: 02http://git.io/e583wg
[20:36:34] <ghrust> 13rust/06auto 142a1baa0 15Alex Crichton: Shuffle around ownership in concurrent queues...
[20:36:34] <ghrust> 13rust/06auto 14eadf930 15Alex Crichton: Rewrite channels yet again for upgradeability...
[20:36:34] <ghrust> 13rust/06auto 148e37c62 15Alex Crichton: Re-implement select() for channels...
[20:36:37] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[20:43:38] *** bstrie_whimsy is now known as bstrie_what
[20:45:12] *** flaper87|afk is now known as flaper87
[20:48:52] *** flaper87 is now known as flaper87|afk
[20:59:26] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[21:00:45] *** Joins: andrew-d_w (andrew-d_w@moz-13D24513.sta.estpak.ee)
[21:00:51] *** Quits: andrew-d_w (andrew-d_w@moz-13D24513.sta.estpak.ee) (Input/output error)
[21:01:26] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[21:02:40] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Connection reset by peer)
[21:05:49] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[21:06:31] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[21:06:31] *** ChanServ sets mode: +ao pcwalton pcwalton
[21:06:40] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[21:06:40] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 145de3cdc to 14f478796: 02http://git.io/N3iJvQ
[21:06:40] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[21:08:00] *** Joins: ecr (chatzilla@331111BA.5FFFD366.11F8506F.IP)
[21:09:25] *** Joins: lkuper_ (lkuper@FD2D3B26.A0D37E9B.51B6877.IP)
[21:11:06] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Quit: Leaving)
[21:13:28] <bstrie_what> brson: not sure if I'm interpreting "metaname value" correctly from these meeting notes, but +1 for removing #[foo="bar"] in favor of #[foo("bar")] (or however it'll look)
[21:13:57] <bstrie_what> brson: I'm hopeful that we can also finally simplify the menagerie of doc comments in the upcoming attripocalypse
[21:14:01] *** Quits: lkuper_ (lkuper@FD2D3B26.A0D37E9B.51B6877.IP) (Quit: lkuper_)
[21:14:39] <bstrie_what> +1 to removing the braces, +1 to replacing semicolons with #^
[21:16:25] *** Joins: jdm (jdm@89E728B9.C181C765.20F9FC3E.IP)
[21:16:31] <bstrie_what> and that spreadsheet! it makes me feel like 1.0 will actually be here one day. be still, my heart :)
[21:20:28] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[21:22:10] *** Joins: lkuper_ (lkuper@FD2D3B26.A0D37E9B.51B6877.IP)
[21:22:16] *** Quits: jdm (jdm@89E728B9.C181C765.20F9FC3E.IP) (Quit: Lost terminal)
[21:24:59] <Eridius> bstrie_what: I still think #[crate_id("foo")] looks weird
[21:25:09] <Eridius> although I suppose my objection is weakening over time
[21:25:22] *** Joins: lpy (lpy@ADFC09F7.6E01A51A.65042015.IP)
[21:25:24] <Eridius> #crate_id("foo') looks crazy though, as does #^crate_id("foo")
[21:25:34] <Eridius> also, I thought it was going to be #!crate_id("foo") to match doc comments?
[21:26:12] <nate> topic
[21:27:30] *** Quits: lpy (lpy@ADFC09F7.6E01A51A.65042015.IP) (Ping timeout)
[21:27:30] *** Quits: eddyb (eddy@832D2DE5.66315F97.FB866788.IP) (Ping timeout)
[21:30:25] <bstrie_what> Eridius: not sure what the final agreement was, but I'm excited for ANYTHING but the semicolons :P
[21:30:38] <Eridius> hah. I kind of like them
[21:30:44] * bstrie_what pummels Eridius 
[21:30:51] <Eridius> although #![crate_id="foo"] is acceptable to me
[21:31:13] <bstrie_what> the brackets don't SUPER bother me, but the code does look cleaner without them
[21:31:27] <Eridius> eh, if we keep them, we could re-use # as an actual operator for something else if we wanted to
[21:31:44] <Eridius> well... maybe. I'm not sure if there's a good operator that wouldn't be ambiguous
[21:31:48] <bstrie_what> Eridius: using # for attributes doesn't stop us from using # as an actual operator :P
[21:31:59] <Eridius> because I guess array literals as expressions mean it can't be a generic binary operator
[21:32:24] <bstrie_what> I proposed `let foo = (1,"hello"); foo#2` for all the people who want to be able to "index" into a tuple
[21:32:26] <Eridius> eh, I dunno. I just like brackets I guess
[21:32:57] <bstrie_what> brackets are valuable. if there were more species of brackets on the keyboard, it would be fine. as it is, let's reserve them for important contexts and not overload them too much
[21:33:20] <Eridius> #Â«crate_id="foo"Â»
[21:33:43] <Eridius> or heck, take a page from c++11 and use [[]]
[21:33:50] <Eridius> (note: that was a joke)
[21:36:44] <bstrie_what> rusti: {[({[()]})]}
[21:36:45] -rusti- [[()]]
[21:38:01] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[21:41:29] *** Joins: canhtak (canhtak@moz-9E539298.wl.t.ulaval.ca)
[22:09:58] <Eridius> acrichto: given the size of your no-io-error branch, I'm surprised you haven't bumped the priority. There's a lot of stuff in the queue ahead of it
[22:11:10] <acrichto> Eridius: I'll have some fun rebasing :)
[22:13:03] <Eridius> dammit acrichto! I go looking through all my notifications, and you've already r+'d all the PRs!
[22:13:18] <Eridius> bah. guess I should get back to my day job ;)
[22:13:54] *** Joins: Kxepal (Miranda@moz-951C3442.pppoe.mtu-net.ru)
[22:15:18] <acrichto> lol
[22:18:10] *** Quits: doener (doener@moz-C68F600D.unity-media.net) (Quit: leaving)
[22:19:44] *** Quits: Kxepal (Miranda@moz-951C3442.pppoe.mtu-net.ru) (Quit: Kxepal)
[22:19:59] *** Joins: Kxepal (Miranda@moz-951C3442.pppoe.mtu-net.ru)
[22:21:13] <acrichto> extern mod foo;
[22:21:27] <acrichto> should that match "foo/bar#foo:1.0" ?
[22:21:39] <acrichto> as in, if you don't specify a crate id, should that *only* look at the name of the crate?
[22:21:42] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[22:21:42] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/tbtZZQ
[22:21:42] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[22:26:07] *** Joins: lpy (lpy@ADFC09F7.6E01A51A.65042015.IP)
[22:26:32] *** Quits: lkuper_ (lkuper@FD2D3B26.A0D37E9B.51B6877.IP) (Quit: lkuper_)
[22:26:37] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[22:26:38] <ghrust> 01[13rust01] 15bors pushed 6 new commits to 06auto: 02http://git.io/MkBEbA
[22:26:38] <ghrust> 13rust/06auto 142a1baa0 15Alex Crichton: Shuffle around ownership in concurrent queues...
[22:26:38] <ghrust> 13rust/06auto 14eadf930 15Alex Crichton: Rewrite channels yet again for upgradeability...
[22:26:38] <ghrust> 13rust/06auto 148e37c62 15Alex Crichton: Re-implement select() for channels...
[22:26:40] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[22:27:24] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[22:28:12] <Eridius> acrichto: yes
[22:28:13] *** Quits: lpy (lpy@ADFC09F7.6E01A51A.65042015.IP) (Ping timeout)
[22:28:29] <Eridius> acrichto: `extern mod lua;` needs to match "github.com/kballard/rust-lua#lua:1.0"
[22:29:46] <acrichto> Eridius: does extern mod lua = "lua"; also match that?
[22:30:39] <Eridius> acrichto: Do you mean does it match that now, or should it match that? Although the answer to both is "I don't know"
[22:31:08] <acrichto> I would mean should it
[22:31:10] <Eridius> I'm pretty sure `extern mod lua = "github.com/kballard/rust-lua"` _should_ work (without even specifying the library filename)
[22:31:15] <acrichto> I'm slightly revamping the matching code, and hm...
[22:31:24] <Eridius> as well as `extern mod lua = "github.com/kballard/rust-lua#1.0"`
[22:31:36] <acrichto> it can't match that
[22:31:42] <acrichto> it thinks the name of the crate is rust-lua
[22:31:52] <Eridius> hmm
[22:32:12] <Eridius> it can't find the crate id for all visible crates?
[22:32:25] <acrichto> ?
[22:32:36] <Eridius> I suppose that might be too much to ask
[22:33:00] <acrichto> right now our crate id is basically: name/version dictate the filename, path disambiguates between different crates of the same name/version
[22:33:13] <acrichto> it's unclear whether we actually use it that way
[22:33:40] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[22:34:02] <Eridius> ideally, you could refer to a crate by either its filename (e.g. "lua") or by the package id part of the crate id (i.e. "github.com/kballard/rust-lua"). The latter would of course require that rustc be willing to search all rust crates in its load paths for crate IDs
[22:34:17] <Eridius> but that may be unreasonable
[22:35:10] <Eridius> I guess the practical behavior is that the = "foo" part is matched on either just the filename, or on the full crate ID (version being optional, but library filename is required if it doesn't match the default)
[22:35:51] <Eridius> so I guess `extern mod lua = "lua"` should work
[22:36:15] <Eridius> as well as `extern mod lua = "github.com/kballard/rust-lua#lua:`. Note the trailing colon. I think we need to support that because version needs to be optional in this context, even if library filename is provided
[22:36:28] <Eridius> but `extern mod lua = "github.com/kballard/rust-lua"` I guess is ok to not support
[22:36:58] <acrichto> hmm...
[22:37:33] <Eridius> naturally if the full crate id is provided, then it needs to validate that the whole crate id matches and not just the filename
[22:37:48] <Eridius> so `extern mod lua = "foo/bar#lua:"` would fail (unless there really is a legitimate liblua with that crate id)
[22:39:18] *** kimundi is now known as zz_kimundi
[22:48:37] <dbaupp> acrichto: pong
[22:49:00] <acrichto> dbaupp: oh I was curious why the fmt::Default => Show instead of fmt::Show
[22:49:20] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Input/output error)
[22:49:29] <dbaupp> acrichto: because `Show` is "obviously" formatting, while `Default` is rather generic
[22:49:39] <dbaupp> I can change it back?
[22:49:51] <acrichto> oh nah it's fine, I think the examples should still use fmt::
[22:50:01] <acrichto> b/c you'll need to import fmt::{Show, Formatter, Result};
[22:50:07] <acrichto> which is getting to be a bit much
[22:50:15] <dbaupp> fmt::Result?
[22:51:04] <acrichto> type Result = io::IoResult<()> = Result<(), IoError>
[22:51:13] <acrichto> it's necessary when moving away from conditions
[22:53:21] <dbaupp> Oh
[22:53:34] <dbaupp> i.e. you're adding it newly
[22:53:42] <dbaupp> ok
[22:53:42] <acrichto> ah yeah, sry
[22:53:49] <dbaupp> I'll move back to fmt::Show
[22:54:14] <acrichto> https://github.com/alexcrichton/rust/blob/no-io-error/src/librustdoc/html/escape.rs#L23
[22:54:50] <dbaupp> ah, cool
[22:59:03] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[23:03:02] *** Quits: canhtak (canhtak@moz-9E539298.wl.t.ulaval.ca) (Quit: canhtak)
[23:03:09] *** Joins: dherman (dherman@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[23:03:09] *** ChanServ sets mode: +ao dherman dherman
[23:10:23] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[23:11:32] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[23:11:32] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14fb0f63c to 145a61812: 02http://git.io/N3iJvQ
[23:11:32] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[23:11:35] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[23:11:35] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/eweWkQ
[23:11:35] <ghrust> 13rust/06auto 144004493 15Virgile Andreani: Unhide lines in rustdoc's doc -- Closes #11645
[23:11:35] <ghrust> 13rust/06auto 1483f0f6e 15bors: auto merge of #11810 : Armavica/rust/issue-11645, r=alexcrichton...
[23:11:35] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[23:15:00] *** Joins: zimbabao (rajaram@FD91A22A.240F5E31.D2D1FAF0.IP)
[23:15:37] *** Joins: cgaebel (clark@moz-92F543E4.nycmny.east.verizon.net)
[23:16:01] <dbaupp> acrichto: https://github.com/mozilla/rust/pull/11948 r?
[23:16:13] <dbaupp> (i'll squash if you think that's right)
[23:16:33] <acrichto> dbaupp: lgtm
[23:17:00] <acrichto> dbaupp: a snapshot may take awhile, so you may want to do some more stage0 work before that, but up to you
[23:17:38] <dbaupp> acrichto: ... it requires putting #[cfg]'s on literally all the formatting trait impls :(
[23:17:48] *** Joins: andrew-d_w (andrew-d_w@moz-1396EAD2.dyn.estpak.ee)
[23:18:01] <acrichto> ah, maybe not then
[23:18:05] <dbaupp> I can probably implement the actual #[deriving(Show)], but have it not work for now
[23:18:16] <acrichto> could it be a default method for now?
[23:18:22] <dbaupp> ah, maybe!
[23:18:24] <acrichto> default static method
[23:18:26] <dbaupp> good idea
[23:18:29] <cgaebel> how do I run all the tests in libstd?
[23:18:37] <acrichto> cgaebel: make check-stageN-std
[23:18:41] <cgaebel> thanks
[23:18:43] <acrichto> N = {0,1,2,3}
[23:18:57] <dbaupp> (1 or 2 are the most reliable)
[23:19:13] <dbaupp> well, 3 is probably reliable, but no-one other than the bots runs that :P
[23:19:13] <acrichto> dbaupp: you'll hit a conflict though, you can't have 'fn fmt(&self)' and 'fn fmt(foo: &T)'
[23:19:15] <cgaebel> dbaupp: what's wrong with stage3?
[23:19:30] <dbaupp> cgaebel: it will take a long time to build
[23:19:35] <cgaebel> oh. alright.
[23:19:52] <dbaupp> cgaebel: `make check-stage1-std NO_REBUILD=1 NO_BENCH=1` is nice
[23:20:04] <cgaebel> dbaupp: thanks for the tip!
[23:20:05] <dbaupp> (skip the NO_BENCH if you're touching benchmarks)
[23:20:12] *** Quits: andrew-d_w (andrew-d_w@moz-1396EAD2.dyn.estpak.ee) (Input/output error)
[23:20:24] <dbaupp> acrichto: I was going to call it .show, otherwise all the traits would have the .fmt method
[23:20:34] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[23:20:39] <dbaupp> acrichto: and .string and .lower_exp etc. etc.
[23:20:43] <acrichto> dbaupp: it'll be a different method per trait?
[23:20:47] <acrichto> that seems kinda weird...
[23:20:54] <acrichto> why not have them all be fmt?
[23:21:05] <acrichto> or rather why not have them all be the same name
[23:21:16] <dbaupp> hm...
[23:21:25] <dbaupp> I thought it would cause horrible conflics
[23:21:35] <dbaupp> but I guess no-one actaulyl calls those methods
[23:21:50] <dbaupp> (other than format!(), which will do it via UCFS anyway)
[23:21:54] <acrichto> yeah I figure it should only be the std::fmt code that actually calls the methods
[23:21:54] <dbaupp> so it's not a problem
[23:21:58] <acrichto> cool
[23:22:05] <cgaebel> By the way, I saw the google sheet of all the things needed to get to 1.0
[23:22:09] <cgaebel> and hashmap was needed
[23:22:12] <cgaebel> what needs to be done on that front?
[23:22:17] <cgaebel> just make it fast?
[23:22:22] <dbaupp> yeah
[23:22:29] <dbaupp> people are working on it at the moment
[23:22:34] <cgaebel> yeah that's me :P
[23:22:41] <cgaebel> (and possibly others)
[23:22:43] <dbaupp> oh cool
[23:23:02] <dbaupp> i was including erickt's std::hash work as well
[23:23:18] <cgaebel> oh yeah. that'll definitely help too.
[23:23:37] <cgaebel> no interface changes needed?
[23:23:42] <dbaupp> for HashMap?
[23:23:45] <cgaebel> yeah.
[23:23:48] <dbaupp> maybe
[23:23:53] <dbaupp> don't really know
[23:24:05] <strcat> cgaebel: doesn't need to be fast for 1.
[23:24:05] <dbaupp> also: there was some discussion on #rust a few hours ago
[23:24:06] <strcat> 1.0
[23:24:12] <strcat> the core API just needs to be stable
[23:24:15] *** Quits: ecr (chatzilla@331111BA.5FFFD366.11F8506F.IP) (Ping timeout)
[23:24:50] <dbaupp> people seem to think that using the CPU AES instructions for speed and falling back to siphash (when they don't exist)would be reasonable behaviour
[23:25:10] <cgaebel> mmm I'm not really looking at the hashing api right now. Just the hashtable.
[23:25:39] <cgaebel> doesn't AES have a bunch of state and not really appropriate for "small things"?
[23:26:16] <strcat> cgaebel: no it's a block cipher
[23:26:29] <strcat> 128-bit key, 128-bit input/output
[23:26:49] <cgaebel> oh. I thought it was bigger than that for some reason.
[23:26:50] <strcat> (you can use bigger keys but we wouldn't)
[23:26:53] *** Joins: lpy (lpy@ADFC09F7.6E01A51A.65042015.IP)
[23:26:53] <cgaebel> seems like a reasonable thing to do then.
[23:27:03] <strcat> we wouldn't actually use AES
[23:27:11] <cgaebel> why not?
[23:27:12] <strcat> just the AESENC instruction
[23:27:32] <strcat> you have to run it 10 times for AES-128
[23:27:35] <strcat> it's overkill for a hash
[23:28:32] <cgaebel> I thought we were (trying to) going for cryptographic security at one point
[23:28:39] <cgaebel> was that abandoned?
[23:28:56] *** Quits: lpy (lpy@ADFC09F7.6E01A51A.65042015.IP) (Ping timeout)
[23:29:07] <strcat> cgaebel: secure against DoS attacks doesn't require actual block encryption
[23:31:00] <cgaebel> I'm suspicious of running one round of AES. I've never heard of any cryptographic analysis done on it.
[23:31:07] <cgaebel> siphash might still just be better
[23:32:04] <strcat> not one round
[23:32:17] <strcat> cgaebel: SipHash is too slow
[23:32:31] <strcat> anyway it's just a denial of service
[23:32:34] <strcat> the goal is to make it harder
[23:32:38] <strcat> there are other ways to do a DoS
[23:32:47] <strcat> 3 rounds of AESENC is good enough
[23:33:20] <pcwalton>  80 files changed, 1551 insertions(+), 1061 deletions(-)
[23:33:24] <cgaebel> strcat: I don't know. I can just see someone finding out about this and going off to write their PhD thesis on breaking 3-round AES.
[23:33:33] <pcwalton> de-@str-ing is going
[23:33:37] <pcwalton> nearly there...
[23:33:59] <strcat> cgaebel: the alternative is not trying to have DoS security at all
[23:34:15] <cgaebel> strcat: fair enough.
[23:34:19] <strcat> I tested SipHash in C++
[23:34:28] <strcat> and from the paper
[23:34:39] <strcat> the results are basically the same (it's just a bit faster on my laptop than it was in their paper)
[23:34:50] <acrichto> pcwalton: \o/
[23:34:52] <strcat> 80-100 cycle startup, 2 cycles per byte
[23:35:22] <dbaupp> bjz: ping
[23:35:22] <strcat> other "good" keyed hashes (but not actually secure against a determined DoS) like murmurhash have a much cheaper startup and ~1 cycle per byte
[23:36:15] <cgaebel> I see. yeah that's not good enough except for relatively large objects. and those aren't likely to be used as keys in a hashtable.
[23:36:42] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Connection reset by peer)
[23:36:53] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Connection reset by peer)
[23:37:02] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Connection reset by peer)
[23:38:43] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[23:39:03] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[23:39:08] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[23:39:51] <strcat> cgaebel: yeah, SipHash is progress but... I don't think it is good enough for us :(
[23:39:58] *** Quits: cgaebel (clark@moz-92F543E4.nycmny.east.verizon.net) (Ping timeout)
[23:44:20] <pcwalton> I just talked to our crypto guy and he suggested emailing Adam Langley
[23:44:25] <pcwalton> about the AESENC stuff in Go
[23:44:47] *** Quits: zimbabao (rajaram@FD91A22A.240F5E31.D2D1FAF0.IP) (Ping timeout)
[23:45:27] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Input/output error)
[23:50:10] *** Joins: cgaebel (clark@moz-92F543E4.nycmny.east.verizon.net)
[23:51:41] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[23:52:06] <strcat> http://code.google.com/p/go/source/browse/src/pkg/runtime/asm_amd64.s#845
[23:52:12] <strcat> pcwalton: afaik they don't really see it as a crypto issue...
[23:52:34] <strcat> they used really sketchy hash before, this is both faster and 'more' safe
[23:52:51] <strcat> (and they still use the sketchy hash on non-recent-x86)
[23:52:53] <pcwalton> so Brian Smith thought it seemed strange to use AES because that's not what it's designed for
[23:53:02] <pcwalton> but if agl wrote it then it's probably sane
[23:53:08] <strcat> russ cox wrote it
[23:53:10] <pcwalton> the easiest thing is probably to email him
[23:53:24] <pcwalton> I would be shocked if agl were not involved somehow :)
[23:56:19] <strcat> we could also use SipHash 1-1 ...
[23:59:13] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[23:59:13] *** ChanServ sets mode: +qo brson brson
