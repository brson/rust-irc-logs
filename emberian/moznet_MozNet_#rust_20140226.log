[00:00:01] <Jemaclus> whilst YEA { ... }
[00:00:54] *** Quits: c-a (c-a@moz-DBDF8C81.cust.bluewin.ch) (Ping timeout)
[00:00:54] <Jemaclus> let mine name: ~str = ~"Jemaclus"; hark!("It is the east, and {} is the sun!", name);
[00:01:01] *** Joins: evanm (evanm@636AC086.5999CED5.71743E61.IP)
[00:01:08] *** Joins: ofeldt (ofeldt@moz-8C588031.dip0.t-ipconnect.de)
[00:01:11] <Jesse> unicode rust vs shakespeare rust
[00:01:15] <cgaebel> but seriously if I write this patch adding static T : bool = true; static F : bool = false; to prelude, what do you think are the odds of it getting accepted? :P
[00:01:28] <huon> cgaebel: I'd be against it
[00:01:35] <cgaebel> :(
[00:01:40] <huon> (sorry)
[00:01:45] <cgaebel> why?
[00:02:11] <SiegeLord> Maybe static ⊥ : bool = false;
[00:02:35] <SiegeLord> Oh, I bet that's not a valid identifier... stupid unicode
[00:03:29] *** Joins: brson (brson@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[00:03:29] *** ChanServ sets mode: +ao brson brson
[00:03:40] *** Quits: ofeldt (ofeldt@moz-8C588031.dip0.t-ipconnect.de) (Ping timeout)
[00:04:03] *** Joins: earth75 (Mibbit@moz-8E1AF463.fbx.proxad.net)
[00:04:07] <huon> cgaebel: having duplicate names for true/false seems like a bad idea, only going to cause confusion
[00:04:21] <earth75> hi
[00:04:22] <huon> (R isn't exactly the best model of language design...)
[00:04:33] *** Quits: alkino (alkino@moz-F4D3BCB1.w92-151.abo.wanadoo.fr) (Ping timeout)
[00:04:34] <cgaebel> has it caused confusion in R? This is the first I've heard of it..
[00:04:39] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[00:04:52] <earth75> i'm new here, i'm just back from the rust pasris meetup
[00:04:56] <Jemaclus> greetings, earth. we code in peace.
[00:05:01] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[00:05:21] <SiegeLord> Oh sweet... how did that go?
[00:05:22] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[00:05:24] <huon> cgaebel: I imagine it has at some point; but I could be wrong
[00:05:26] *** Joins: rustboy3000 (Mibbit@moz-1C68F6E0.hsd1.va.comcast.net)
[00:05:32] *** Joins: bmu (chatzilla@moz-A87574A6.hsd1.pa.comcast.net)
[00:05:40] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[00:05:40] *** ChanServ sets mode: +ao pcwalton pcwalton
[00:05:46] <earth75> it was awesome. Lots of chit chat and smart people. This community is appealing
[00:05:46] <huon> anyway, what's advantages does it bring? nicer alignment in matches on bools?
[00:05:59] <cgaebel> huon: symmetry.
[00:06:06] <cgaebel> I like symmetry.
[00:06:06] *** Quits: glaebhoerl (glaebhoerl@3391DE98.E9231B2.A0179ACD.IP) (Ping timeout)
[00:06:29] *** Joins: nif (nif@moz-84FF761D.oberlin.net)
[00:06:40] <brendanc> c
[00:06:41] <huon> cgaebel: we can tell ;P
[00:07:03] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[00:07:09] *** Joins: ofeldt (ofeldt@moz-8C588031.dip0.t-ipconnect.de)
[00:07:10] *** Quits: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP) (Ping timeout)
[00:07:19] <cgaebel> and it's only for hysterical raisins that we use true and false, which were poorly designed for the age of monospaced fonts.
[00:07:23] <earth75> can sb point me to the mailing list
[00:07:24] <earth75> ?
[00:08:03] <jroweboy> http://www.rust-lang.org/ has the mailing list on the front page top right corner
[00:08:04] <aatch> man I hate it when my raisins get hysterical
[00:08:08] <kimundi> cgaebel: the language identifiers are based around the english language, which implies centuries of historical baggage. Just give up any notion of trying to make it fit, its only going to be pain otherwise ;)
[00:08:29] <jroweboy> earth75: link for the lazy :) https://mail.mozilla.org/listinfo/rust-dev
[00:08:40] *** Quits: rustboy3000 (Mibbit@moz-1C68F6E0.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[00:08:47] <cgaebel> kimundi: yeah but we can do better!
[00:08:55] <cgaebel> harder, better, faster, stronger and all that
[00:09:16] <earth75> thx :)
[00:09:16] *** Quits: jmmk (jmmk@moz-3BDBD2C0.hfc.comcastbusiness.net) (Ping timeout)
[00:10:00] <kimundi> cgaebel: maybe, but there are a lot of things that could be done objectively better, but still never will be because thze cost of adjusting the world to the new format is to high. Se also: keyboard layouts
[00:10:12] <earth75> guys, watch out for the paris 42 school dudes, they are smarty pants
[00:10:19] *** Quits: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP) (Quit: colinsurprenant)
[00:10:36] *** Joins: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP)
[00:11:07] <cgaebel> eeeh I don't think it's that crazy of an adjustment
[00:11:12] <cgaebel> it's not like having #t and #f killed lisp
[00:11:29] <huon> we can't tell
[00:11:31] <huon> maybe it was :P
[00:11:34] <cmr> heh
[00:11:36] <cgaebel> #t
[00:12:14] <Jemaclus> speaking of keyboard layouts, this is a fun one: http://asetniop.com/
[00:12:35] <Jemaclus> if you do the tutorial, it really doesn't take long to get halfway proficient at it
[00:13:09] <cmr> it's going to mess with my vim brainwashing though.
[00:13:20] <huon> <3 editor muscle memory
[00:13:31] <cmr> "ipads and other tablet computers"
[00:13:34] <cmr> ok that's not a bad idea.
[00:13:45] *** Joins: nitivermagupta (nitivermag@moz-15FCB70D.hsd1.ca.comcast.net)
[00:14:08] *** Quits: nitivermagupta (nitivermag@moz-15FCB70D.hsd1.ca.comcast.net) (Quit: )
[00:14:15] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[00:14:23] <cgaebel> yeah it looks pretty cool
[00:14:26] *** Joins: Florob (Florob@moz-39532932.de)
[00:14:35] *** Joins: nitivermagupta (nitivermag@moz-15FCB70D.hsd1.ca.comcast.net)
[00:14:43] <Jemaclus> it's a fun way to kill 30 minutes :)
[00:14:45] *** Quits: nitivermagupta (nitivermag@moz-15FCB70D.hsd1.ca.comcast.net) (Quit: )
[00:14:46] <kimundi> cgaebel: Anyway, there is a more specific reason why we probably shouldn't change that in Rust at least. Rust tries to immitate C/C++ like languages a lot in certain areas, like using the keywords "struct" and "enum", and true/false also falls under this notion. That is, keeping them familiar for users of other languages is exactly the idea behind them
[00:15:12] *** Joins: kris (kris@moz-6D20263F.fullrate.dk)
[00:15:32] <cgaebel> kimundi: fair enough.
[00:15:34] <cgaebel> I tried :(
[00:15:35] <speckle> and it's part of the reason why Rust won't be a s-expr language...
[00:16:27] *** Quits: jroweboy (Mibbit@moz-C5D211BA.byu.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[00:16:36] <Florob> Say... is it intended behaviour that `let mut x = 3; let y = &mut x; drop(y); x = 4;` fails (x is assumed to still be borrowed in the last assignment)?
[00:16:48] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[00:16:54] <SiegeLord> Can I allow features from the command line?
[00:17:04] <cgaebel> eugh I can't do asetniop. I type too quickly and accidentally chord
[00:17:15] <Jemaclus> haha
[00:17:22] <cmr> SiegeLord: no :(
[00:17:24] <cgaebel>  /firstworldproblem
[00:17:47] *** Quits: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net) (Quit: sw17ch)
[00:17:57] *** Joins: mbx (mbebenita@moz-C07D5168.p2p.sfo1.mozilla.com)
[00:18:53] *** Joins: brendan (brendaneic@BBB21EE2.F6F8CE9D.1DA58BFC.IP)
[00:19:00] *** Quits: Matthias247 (Miranda@moz-BDD35EC0.hsi5.kabel-badenwuerttemberg.de) (Quit: Matthias247)
[00:19:15] *** Joins: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net)
[00:19:42] *** Quits: ofeldt (ofeldt@moz-8C588031.dip0.t-ipconnect.de) (Ping timeout)
[00:20:04] *** Quits: huon (Thunderbir@moz-826BD85A.lns20.syd6.internode.on.net) (Ping timeout)
[00:20:34] * ChrisMorgan is fed up with things that don't work on Firefox for Android
[00:20:59] *** Quits: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net) (Quit: sw17ch)
[00:21:09] <cgaebel> ChrisMorgan: maybe you should write a browser that works better then... say, in an innovative new programming language...
[00:21:37] *** Quits: claudiu (claudiu@moz-33191099.thefacebook.com) (Connection reset by peer)
[00:21:44] <ChrisMorgan> cgaebel: but it's normally *their* fault, not Mozilla's.
[00:21:47] *** Joins: claudiu (claudiu@moz-33191099.thefacebook.com)
[00:21:49] *** Joins: dougxxx (dougxxx@moz-2801788.perm.iinet.net.au)
[00:22:19] <ChrisMorgan> Fennec is a perfectly good browser. It just happens to be a web browser rather than a WebKit browser.
[00:22:44] <cmr> burn
[00:22:44] <cgaebel> well that's sad then
[00:23:10] *** Joins: ofeldt (ofeldt@moz-8C588031.dip0.t-ipconnect.de)
[00:23:41] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[00:24:34] *** Joins: epdtry (stuart@moz-C31FC981.hsd1.wa.comcast.net)
[00:24:41] *** Quits: earth75 (Mibbit@moz-8E1AF463.fbx.proxad.net) (Quit: http://www.mibbit.com ajax IRC Client)
[00:25:13] *** Quits: notmatt_ (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[00:25:31] *** Joins: hoverbear (hoverbear@moz-B4816CA9.wireless.uvic.ca)
[00:26:49] *** Joins: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net)
[00:28:08] *** Quits: reyre (reyre@moz-89E9865B.com) (Quit: ZNC - http://znc.in)
[00:29:07] *** Quits: exobit (foo@moz-90D1B547.nycmny.fios.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:30:14] <Jemaclus> tabs or spaces?
[00:30:16] <Jemaclus> :)
[00:31:14] <Florob> inb4: nano
[00:31:22] <mcpherrin> tabs are for tables
[00:31:50] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[00:32:35] <SiegeLord> Tabs are pretty sweet
[00:32:48] <o11c> spaces
[00:32:51] *** Quits: epdtry (stuart@moz-C31FC981.hsd1.wa.comcast.net) (Quit: WeeChat 0.4.2)
[00:33:01] <sw17ch> vertical tabs
[00:33:05] <o11c> the thing that really made me decide? because tabs break diff
[00:33:06] <sw17ch> i mean spaces
[00:33:29] <o11c> I can't *stand* when a diff shows the first indent as 7 and the rest as 8
[00:34:14] <Jarrett> maybe your diff program sucks
[00:34:31] <o11c> no, it's expected behavior
[00:34:46] <SiegeLord> I'm not sure I get what is described here
[00:34:52] <o11c> when you print '+\t' it goes over a *total* of 8 columns
[00:35:02] <o11c> the + eats into the indent
[00:35:06] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Ping timeout)
[00:35:09] <SiegeLord> Aha
[00:35:14] <Jemaclus> I prefer tabs, personally, because my editors can adjust how long I want that tab to be (4 spaces, 6 spaces, 8 spaces, 24 spaces), but if it's spaces, that's it. I don't get to customize it.
[00:35:32] *** Joins: epdtry (stuart@moz-C31FC981.hsd1.wa.comcast.net)
[00:35:50] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[00:36:19] <SiegeLord> I guess I see it...
[00:36:29] <o11c> "can adjust" is an argument against, for me
[00:36:30] <SiegeLord> It doesn't seem to bother me too much
[00:36:41] <Jemaclus> why?
[00:36:43] <o11c> I can stand editing 2 spaces, 4 spaces, 8 spaces
[00:36:48] <Jemaclus> maybe you like your tabs to be 8 spaces long, and I like mine to be 4 spaces long
[00:36:52] <Jemaclus> but if they're tabs, we're both seeing what we want
[00:36:53] <SiegeLord> As I've been coding tabs for years, and I've never noticed
[00:37:00] <Jemaclus> if they're spaces, we can't both see what we want
[00:37:14] <Florob> Jemaclus, So you never try to align code, with something on the previous line? I personally do tabs, but I regularly see ugly alignments, because someone assumed tabs at 4 spaces, while mine are at 8 etc.
[00:37:17] <o11c> I've been working with people who code using tabs on and off, and their indentation is *always* messed up
[00:37:29] <sp3d> aligning is for ascii diagrams, not code!
[00:37:33] <o11c> also: by definition TAB == 8 spaces
[00:37:45] <SiegeLord> What definition is that :P
[00:37:53] <o11c> setting TAB to anything other than 8 is a sin against the unix way
[00:38:02] <Jarrett> sigh
[00:38:11] <Jemaclus> my editor looks something like: http://cl.ly/image/3o2R2b1k2v0O
[00:38:12] <SiegeLord> Not growing a beard is a sin against the unix way!
[00:38:16] *** Quits: ofeldt (ofeldt@moz-8C588031.dip0.t-ipconnect.de) (Ping timeout)
[00:38:22] <Jarrett> vote to ban Jemaclus for bringing this up ;)
[00:38:24] <Jemaclus> right now my tabs are set at 4 spaces wide
[00:38:44] <Jemaclus> I can shift it to 8, and it looks like this: http://cl.ly/image/0F0D1g42361O
[00:38:45] <cmr> personally I'm a tabs-for-indentation spaces-for-alignment kinda guy
[00:38:50] <cmr> and if you don't agree with me you're wrong.
[00:39:00] <mcpherrin> cmr: you're broken
[00:39:02] *** Quits: snerd (motk@moz-D21A06DF.members.linode.com) (Ping timeout)
[00:39:03] <Jarrett> +1 cmr
[00:39:05] <sp3d> if you must align... sure
[00:39:07] <cmr> mcpherrin: you're wrong!
[00:39:11] *** Quits: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net) (Quit: sw17ch)
[00:39:15] <mcpherrin> I'll accept tabs
[00:39:19] <mcpherrin> but only if they're 1 column wide
[00:39:20] <cmr> sp3d: try writing match-heavy code without it
[00:39:22] <mcpherrin> 1 space indent ftw
[00:39:28] <cmr> turns into gibberish imo
[00:39:36] <cmr> all of you, heretics.
[00:39:38] <Jemaclus> but if you decide it's 8 spaces, but I decide it's 4 spaces, then I've got 4 spaces everywhere and you've got 8 spaces everywhere, and now the code looks like crap. :)
[00:39:39] <sp3d> how does alignment help?
[00:39:40] * cmr lights the channel on fire.
[00:39:43] <Jemaclus> hehe
[00:40:01] <cmr> seriously spaces won get over it.
[00:40:06] <Jemaclus> :(
[00:40:11] <mcpherrin> tabs are for tables
[00:40:14] <mcpherrin> TABS ARE FOR TABLES
[00:40:14] *** Joins: Krymise (Nietzsche@moz-CA789EF5.nwrknj.fios.verizon.net)
[00:40:16] <mcpherrin> do not belong in code
[00:40:29] <SiegeLord> The day rustc starts requiring tables is the day I fork Rust :P
[00:40:34] <SiegeLord> *requiring spaces
[00:40:44] <o11c> cmr: "spaces for indentation" isn't exactly feasible
[00:40:48] <o11c> er, spaces for alignment
[00:40:56] *** Joins: fournm (Aria@moz-ABB60BA0.austin.res.rr.com)
[00:40:58] <o11c> if you have tab for indentation
[00:41:02] <cmr> o11c: sure it is?
[00:41:04] <SiegeLord> And I think I will for sure fork rustfmt when it comes into existence
[00:41:04] <Jarrett> uh yeah it is
[00:41:11] <cmr> add a tab when you make an open brace.
[00:41:12] *** Quits: victorporof (victorporo@moz-FFB76956.cpe.net.cable.rogers.com) (Quit: victorporof)
[00:41:13] <Jarrett> he means alignment within the line o11c 
[00:41:14] <o11c> I haven't yet met an editor that will DTRT when I tab over
[00:41:15] <cmr> remove when close.
[00:41:31] <cmr> the line starts with tabs, and the rest is spaces.
[00:41:38] *** Joins: victorporof (victorporo@moz-FFB76956.cpe.net.cable.rogers.com)
[00:41:41] <o11c> that will do an 'indent tab' initially, and a 'space tab' later
[00:41:51] <cmr> if there's no open brace ending the preceeding line, it's the same indentation (Read: number of tabs) as the previous line.
[00:42:01] <cmr> your editors are dumb :)
[00:42:12] *** Joins: ofeldt (ofeldt@moz-8C588031.dip0.t-ipconnect.de)
[00:42:23] <o11c> blame my editors all you want - the fact is, people use editors taht don't support it
[00:42:25] *** Joins: snerd (motk@moz-D21A06DF.members.linode.com)
[00:42:26] <mcpherrin> If you need a fancy editor to write code, you're doing it wrong
[00:42:29] <cmr> I know
[00:42:37] <Jarrett> wait are you suggesting...... putting spaces AND tabs TOGETHER at the beginning of a line cmr?
[00:42:40] <cmr> this is why I, and everybody else, just use spaces.
[00:42:46] <mcpherrin> I like it when my editor starts a new line with the same number of spaces as the previous line
[00:42:49] <o11c> 'expand tab' works in every sensible editor
[00:42:53] <mcpherrin> other than that autoindent features are bogus
[00:43:03] <mindslight> i like to put 7 spaces then a tab for every level of indent
[00:43:04] <sp3d> my favorite is when codebases have had all 8-long sequences of spaces replaced with tab characters
[00:43:05] *** Quits: liszt (liszt@moz-A0A4C524.reverse.softlayer.com) (Ping timeout)
[00:43:09] * sp3d glares at GTK
[00:43:10] <mcpherrin> mindslight: haha
[00:43:15] <cmr> yeah that is the worst.
[00:43:15] *** Quits: freezerburnv (freezerbur@moz-E25EEE31.washdc.fios.verizon.net) (Quit: freezerburnv)
[00:43:17] <Jarrett> oh god, the gnu convention
[00:43:21] <Jemaclus> mindslight: you are evil
[00:43:22] <cmr> or when people don't even indent code.
[00:43:24] <cmr> and just do whatever.
[00:43:30] <SiegeLord> Geany copies the entire indentation from the previous line
[00:43:34] <Jemaclus> ok, I have a real question this time
[00:43:37] <sp3d> so does gtksourceview
[00:43:38] <SiegeLord> So it preserves the tabs first, spaces later
[00:43:54] <SiegeLord> Unfortunately, it converts all spaces to tabs if you dare to erase one of those spaces
[00:44:09] <Jemaclus> where's the helper method thingy that will let me write over the same line in the terminal over and over, instead of new lines? (i.e., write "foo", then erase the line and write over it with "bar".. no newline)
[00:44:30] <o11c> Jemaclus: well, you need to output a \r instead of a \n ...
[00:44:31] <cmr> Jemaclus: carraige return.
[00:44:44] <Jemaclus> hm
[00:44:47] <SiegeLord> Does that work portably?
[00:45:00] <mcpherrin> Carriage return? yeah
[00:45:01] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Ping timeout)
[00:45:03] <o11c> Jemaclus: also, be aware that if the new line is not as long as the old one, you will still see the end of the old text
[00:45:16] <SiegeLord> I tended to use the escape code for moving the cursor left a 100 times, heh
[00:45:27] <SiegeLord> Maybe I didn't even try carriage return
[00:45:32] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[00:45:32] *** ChanServ sets mode: +ao pcwalton pcwalton
[00:45:38] <mcpherrin> SiegeLord: \r is way more supported than hoping the vt100 move works
[00:45:50] <mcpherrin> Assuming you aren't using terminfo properly, because nobody does.
[00:45:50] <SiegeLord> I wonder what I was thinking back then
[00:45:54] <Jemaclus> right
[00:45:55] <Jemaclus> hmm
[00:46:01] <dougxxx> carriage return works pretty poorly in windoze terminals.
[00:46:03] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[00:46:08] <dougxxx> *windows. woops.
[00:46:25] <cmr> dougxxx: what doesn't?
[00:46:30] *** Joins: liszt (liszt@moz-A0A4C524.reverse.softlayer.com)
[00:46:31] <dougxxx> fair call~
[00:46:35] <Florob> Also Mac OS 9 (probably)
[00:46:55] <o11c> mcpherrin: I don't see the point of using terminfo for stuff that's in the ANSI standard
[00:47:09] <cmr> o11c: not all terminals are or need to be ANSI?
[00:47:40] *** Joins: q66 (q66@9C33633A.27945D6F.B1AA2106.IP)
[00:48:10] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[00:48:13] <mcpherrin> does cmd.exe have any reasonable control codes?
[00:48:18] <mcpherrin> Or are you just SOL there?
[00:48:25] <cmr> mcpherrin: different API
[00:48:31] <cmr> you call functions from win32 to get it to do things.
[00:48:33] <cmr> not print stuff.
[00:48:41] <mcpherrin> Okay, sure.
[00:48:55] *** Quits: ofeldt (ofeldt@moz-8C588031.dip0.t-ipconnect.de) (Ping timeout)
[00:48:59] <dougxxx> There's an ncurses port or something isn't there? PDCurses?
[00:49:14] <cmr> pdcurses is its own terminal.
[00:49:17] <dougxxx> ah
[00:49:34] <mcpherrin> I should probably read the ansi standard and stuff, instead of just throwing stuff at a terminal and seeing what works
[00:49:44] <cmr> (for the record, we have complete terminfo handling in libterm)
[00:49:48] *** Joins: kangz (kangz@moz-61F34019.kimsufi.com)
[00:49:55] *** Joins: Erik_ (Erik_S@moz-EFEC8E5D.hlrn.qwest.net)
[00:50:12] <kangz> hi, I thought I'd idle in the channel some more after the Rust Paris meetup
[00:50:20] *** Quits: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net) (Input/output error)
[00:50:22] <cmr> kangz: cool!
[00:50:32] <mcpherrin> did that happen today?
[00:50:43] <kangz> yeah, ended like 2 hours ago
[00:51:04] *** Quits: nif (nif@moz-84FF761D.oberlin.net) (Quit: Konversation terminated!)
[00:51:50] *** Quits: q66 (q66@9C33633A.27945D6F.B1AA2106.IP) (Ping timeout)
[00:52:43] *** Joins: ofeldt (ofeldt@moz-8C588031.dip0.t-ipconnect.de)
[00:54:32] *** Quits: judder (maradukewa@A4DC519F.6379DA33.78E362FE.IP) (Ping timeout)
[00:54:49] <mindslight> mcpherrin: if i weren't going to use a proper terminal library, i would just throw stuff at a terminal and see what works.. it's not like operating systems are advertised with a bullet point of ansi compatible terminal emulator
[00:55:44] *** Joins: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com)
[00:57:30] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[00:58:17] <nrc> if I have a fn f that returns ~[T] and I want to concatenate calling f over an array, is there a convenience function like foldl to do that in rust?
[00:58:30] <cmr> nrc: there's a fold on iterators...
[00:58:40] <nrc> oh perfect
[00:58:48] <cmr> ok.
[00:58:57] <cmr> didn't know if that's what you were looking for.
[00:59:00] *** Joins: ecl3ctic (ecl3ctic@578C64B6.F0F44EFA.76AE55C1.IP)
[00:59:14] <nrc> maybe, checking the docs
[00:59:50] <nrc> yeah, that'll work
[00:59:53] <nrc> thanks!
[01:00:47] *** Quits: Jemaclus (Jemaclus@4EEAB704.5843BA5A.D4E4C7A5.IP) (Client exited)
[01:00:53] <cgaebel> what's the difference between f32 and float32?
[01:01:08] *** Joins: Jemaclus (Jemaclus@4EEAB704.5843BA5A.D4E4C7A5.IP)
[01:01:16] <dougxxx> what's float32?
[01:01:21] <cmr> cgaebel: one exists.
[01:01:23] <cmr> one doesn't.
[01:01:48] <cgaebel> reading through meeting notes: The only ones that will are f32 and f64, which will do it for IEEE754 ops. For float32 & float64, equals will be implemented as bitwise equality. cmp will be defined as "cast floats to integer bitwise and do that comparison."
[01:02:00] *** Quits: Krymise (Nietzsche@moz-CA789EF5.nwrknj.fios.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[01:02:04] *** Joins: Krymise (Nietzsche@moz-CA789EF5.nwrknj.fios.verizon.net)
[01:02:10] <cmr> ah
[01:02:50] *** Quits: Jemaclus (Jemaclus@4EEAB704.5843BA5A.D4E4C7A5.IP) (Ping timeout)
[01:03:00] *** Joins: freezerburnv (freezerbur@moz-E25EEE31.washdc.fios.verizon.net)
[01:03:26] <cgaebel> also, who uses floating-point types as the keys in associative data structures!? that just sounds like pain..
[01:03:33] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[01:05:04] <mcpherrin> cgaebel: I've done it in graphics code before :p
[01:05:35] <cgaebel> were you expecting NaNs to be supported in the keys?
[01:05:46] *** Joins: gonkun (Mibbit@moz-1C68F6E0.hsd1.va.comcast.net)
[01:06:00] *** Quits: twi (Adium@BC1E56B6.55F3F843.839F6EC0.IP) (Quit: Leaving.)
[01:06:14] *** Joins: twi (Adium@BC1E56B6.55F3F843.839F6EC0.IP)
[01:06:33] <gonkun> when im working with ip adresses, is this whole string my ip adress: 127.0.0.1:5000 ? Or is it just 127.0.0.1. Is :5000 just the port?
[01:06:35] <mcpherrin> cgaebel: nope :P
[01:06:40] <gonkun> does the ip include the port?
[01:06:51] <mcpherrin> gonkun: 5000 is the port.  The IP does not include the port.
[01:06:53] <cmr> gonkun: ip does not include port.
[01:07:02] <cmr> literally
[01:07:04] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[01:07:04] <cmr> the protocol does not.
[01:07:20] <mcpherrin> Port is a layer 4 concern
[01:07:25] <cmr> that's a tcp/udp/etc thing.
[01:07:26] <cgaebel> mcpherrin: yeah that's about what I thought. butchering eq and ord stuff just to support non-surprising NaNs in keys of associative containers seems silly to me.
[01:07:29] <gonkun> ahh ok. so whatever precedes the colon is always the ip?
[01:07:40] <o11c> gonkun: 127.0.0.1:5000 is a socket address of type IPv4
[01:07:49] *** Quits: ofeldt (ofeldt@moz-8C588031.dip0.t-ipconnect.de) (Ping timeout)
[01:07:50] <o11c> but 127.0.0.1 is the entire IP address
[01:07:54] *** Quits: twi (Adium@BC1E56B6.55F3F843.839F6EC0.IP) (Ping timeout)
[01:07:56] <gonkun> thanks!
[01:08:07] <mcpherrin> gonkun: My temptation is to say "No" since IPv6 addresses use colons
[01:08:19] <o11c> you can (and should) also deal with socket addresses of type IPv6
[01:08:31] <o11c> there are also unix/local, netfilter, raw, ...
[01:08:44] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[01:08:51] <o11c> er, netlink
[01:08:56] <gonkun> is ipv6 ubiquitous yet?
[01:09:10] <o11c> gonkun: on end systems, yes
[01:09:11] <mcpherrin> gonkun: Not ubiquitous, but available.
[01:09:19] *** Quits: orospakr (orospakr@moz-4514BEF2.cpe.teksavvy.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[01:09:21] <gonkun> cool
[01:09:29] <o11c> some networks don't, but you can write using IPv6 APIs and it will work with IPv4 addresses
[01:09:42] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[01:09:44] <o11c> (though it is *possible* for a sysadmin to disable this)
[01:09:57] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[01:10:03] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[01:10:15] <o11c> see IPV6_V6ONLY in man ipv6(7)
[01:10:15] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[01:10:18] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[01:10:18] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[01:10:29] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[01:10:34] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[01:10:45] *** Joins: Jesse_ (jruderman@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[01:10:46] *** Quits: Jesse (jruderman@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Connection reset by peer)
[01:10:47] *** Joins: chenyang (user@moz-8AF6A02F.airbears2.berkeley.edu)
[01:10:54] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[01:10:57] *** Joins: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca)
[01:11:02] * mcpherrin writing IPv4 only features at work :(
[01:11:10] *** Joins: q66 (q66@9C33633A.27945D6F.B1AA2106.IP)
[01:11:45] *** Joins: ofeldt (ofeldt@moz-8C588031.dip0.t-ipconnect.de)
[01:11:55] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[01:12:11] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[01:12:35] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[01:12:54] <kmc> regarding my #[link(kind="static")] question, it appears to do what I expect in a more recent version of Rust
[01:13:10] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[01:13:10] *** ChanServ sets mode: +ao pcwalton pcwalton
[01:13:31] <jasom> mcpherrin: port is not a layer 4 concern, it is a transport layer concern.  The ISO layers don't map cleanly onto TCP/IP.
[01:13:44] <jasom> s/iso/osi
[01:14:18] *** Quits: tjc (tjc@moz-791C24B0.phlapa.east.verizon.net) (Ping timeout)
[01:14:35] <mrmonday> layer 4 is still transport, regardless of the model
[01:14:35] *** Joins: mib_ex499n (Mibbit@A449C3BE.EDD2401A.CC1A2609.IP)
[01:14:42] *** Joins: tjc (tjc@moz-791C24B0.phlapa.east.verizon.net)
[01:14:42] *** ChanServ sets mode: +o tjc
[01:14:44] <mrmonday> 5 upwards is the ambiguous bit
[01:15:11] *** Joins: twi (Adium@BC1E56B6.55F3F843.839F6EC0.IP)
[01:15:24] <mcpherrin> jasom: "everybody" uses Layer 4 to describe TCP/UDP/SCTP :)
[01:15:26] <jasom> mrmonday: parts of TCP are arguably layer 5
[01:16:03] *** Joins: reyre (reyre@moz-89E9865B.com)
[01:16:16] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[01:16:22] *** Quits: twi (Adium@BC1E56B6.55F3F843.839F6EC0.IP) (Quit: Leaving.)
[01:16:39] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[01:16:49] <mcpherrin> jasom: l4 is shorter to write than transport
[01:17:00] <mcpherrin> Layer4 too :P
[01:17:15] <kmc> i take that back, it's not fixed :/
[01:17:30] <mcpherrin> I ain't gonna start using longer variable names 'cause some OSI types are uppity about semantics
[01:17:34] *** Quits: Krymise (Nietzsche@moz-CA789EF5.nwrknj.fios.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[01:17:38] <mcpherrin> p.s. tcp sucks
[01:17:53] <mrmonday> all my raw socket stuff uses l4 to mean transport :p
[01:18:06] <hoverbear> Shoot... Who was it who posted https://gist.github.com/anonymous/9217762?
[01:18:11] <mrmonday> really hoping to get that into the standard library in the next week or so
[01:18:25] <mrmonday> so much work, so little time :<
[01:18:38] <cmr> hoverbear: flan3002
[01:18:40] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[01:18:44] <hoverbear> cmr: Thanks :)
[01:18:46] <cmr> hoverbear: well, flan(\d+)
[01:18:50] <cmr> some number like that
[01:18:51] <mcpherrin> How do people represent packets in rust?
[01:19:06] <hoverbear> cmr: :)
[01:19:22] <mrmonday> mcpherrin: what kind of packets?
[01:19:48] <hoverbear> cmr: It gets an error about "static" when compiling.
[01:19:49] *** Quits: meTaAU (admin@moz-A8EA7036.lns20.per1.internode.on.net) (Ping timeout)
[01:19:59] <cmr> hoverbear: yes that was the question they were asking
[01:20:04] <mrmonday> I'm using [u8] for l2 though 4 stuff
[01:20:05] <mcpherrin> mrmonday: Ethernet, IP, Udp, dot1q etc
[01:20:17] *** Joins: meTaAU (admin@moz-F0D0165C.lns20.per2.internode.on.net)
[01:20:18] <mcpherrin> mrmonday: What you'd need to implement a router
[01:20:47] <cmr> structs?
[01:20:57] *** Quits: bmu (chatzilla@moz-A87574A6.hsd1.pa.comcast.net) (Ping timeout)
[01:20:59] <mrmonday> mcpherrin: https://github.com/mozilla/rust/pull/11410 <= This is my incomplete raw socket stuff for Rust, hoping to get it done in the next week or so
[01:21:08] <mcpherrin> the doubly-linked approach the Linux kernel uses is kinda annoying
[01:21:26] *** Joins: Jemaclus (Jemaclus@4EEAB704.5843BA5A.D4E4C7A5.IP)
[01:21:38] <mcpherrin> mrmonday: oh nice.  Raw socket support will be useful for me
[01:21:39] <mrmonday> mcpherrin: It uses [u8] buffers with some shiny structs to write headers into it
[01:22:03] <mcpherrin> The annoying part about network structs is you want to prefix things a lot
[01:22:27] <mcpherrin> so say you have a ~[T] that contains an IP packet, how do you put an ethernet header on it?
[01:22:30] <hoverbear> cmr: I haven't encountered "static" yet in rust.
[01:22:31] <mrmonday> mcpherrin: take a look at the tests in std/io/net/raw.rs to see how it'll eventually work (roughly)
[01:22:49] <mcpherrin> EthernetFrame(data, ~IpPkt) would be annoying
[01:22:53] <mcpherrin> but copying sucks worse too
[01:23:04] <cmr> hoverbear: &'static? `static FOO: Type = constexpr;` ? :)
[01:24:18] <mcpherrin> Or you get an ethernet frame and you want to prefix a Vxlan header on...
[01:24:33] <mcpherrin> This isn't really a rust-specific issue, but blarg
[01:24:43] <mcpherrin> Worse in rust since doubly linked lists are annoying
[01:25:21] <hoverbear> cmr: Yeah, I've never used that in Rust :(
[01:25:31] <felixc> hmmm, so, nope -- still getting 244 failed tests with permission denied
[01:25:43] <felixc> and this is after fully deleting my rust repo, re-cloning, and building again
[01:25:52] <felixc> and not a "sudo" in sight
[01:26:01] <cmr> felixc: permission denied when doing what?
[01:26:15] <mrmonday> mcpherrin: https://github.com/mrmonday/rust/blob/raw-socket-support/src/libstd/io/net/raw.rs#L999 <= the basic idea is you pass a buffer, and an offset, then you get a nice zero-copy interface for setting/getting fields of a packet
[01:26:31] <mcpherrin> oh shit gotta caltrain for rust meetup
[01:26:34] <mcpherrin> will review on train :)
[01:26:37] <cmr> is that tonight
[01:26:37] <felixc> cmr: ah, sorry, was referring to an earlier problem -- I'm just running the full test suite (exact command "make check NO_BENCH=1")
[01:26:46] <felixc> and getting 244 failures
[01:26:48] <cmr> felixc: which tests are failing?
[01:27:05] <felixc> the vast majority of which seem to be with the message "couldn't run the test: permission denied"
[01:27:17] <felixc> seems like all kinds all over the place
[01:27:31] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[01:27:43] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[01:27:56] <felixc> ah but I only *just* realized they're all referencing the same file
[01:28:18] <felixc> rust/src/librustdoc/test.rs:131
[01:28:36] <nrc> if I want to apply a fn with no result to every element in an iterator, should I prefer map or advance or something else?
[01:28:36] <felixc> which, now that I look at it, is just where the error message is output from.
[01:28:39] <cmr> yup
[01:28:54] <hoverbear> cmr: I'm not sure I understand what the problem is with L345 though. He's saying "as ~Tween: static"
[01:29:09] <cmr> hoverbear: iirc 'static was needed in the type bounds.
[01:29:13] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[01:29:24] <felixc> ah, no, 131 is just the error message, but it's based on something a few lines above
[01:29:34] <felixc> but I'm completely new to this so I'm not sure what it's doing
[01:29:34] <hoverbear> cmr: I still don't understand that :(
[01:29:41] <cmr> hoverbear: neither do I
[01:29:49] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[01:29:56] <hoverbear> cmr: Ah, good, so I'm not completely useless.
[01:29:56] <cmr> syntactically, fn foo<T: A + 'static>(...) { ... }`
[01:30:10] <cmr> I'm not 100% on the semantics, though, or why it wants them.
[01:30:26] <felixc> so I take it this is not a well-known problem that's been encountered before?
[01:30:31] <cmr> felixc: nope.
[01:30:38] <felixc> I'm really not sure what would cause 244 different tests to fail with a permissions problem :(
[01:30:54] <felixc> it looks like something in the test runner, rather than the tests themselves
[01:30:59] <cmr> felixc: well if they're all from rustdoc, it's when rustdoc is trying to run tests from the documentation.
[01:31:02] <hoverbear> cmr: Oh ok. Is there someone I could ping for more indo on that?
[01:31:55] <felixc> cmr: yeah, looks like it...
[01:32:06] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[01:33:28] *** Joins: orospakr (orospakr@moz-A57EF4CD.cpe.net.cable.rogers.com)
[01:35:13] *** Quits: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net) (Quit: Leaving)
[01:38:17] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[01:38:43] *** Joins: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net)
[01:40:14] <Jemaclus> anyone here gonna be at the meetup?
[01:40:53] <hoverbear> Jemaclus: Mcpherrin will be
[01:41:03] <Jemaclus> cool.
[01:41:14] <adwhit> hoverbear: have issued pull request
[01:41:23] <hoverbear> adwhit: Yay!
[01:41:29] <Jemaclus> i'm not feeling super great. trying to decide whether to go or not.
[01:41:55] <cmr> go!
[01:41:58] <cmr> go for me :(
[01:42:21] <alan_andrade> I'll be there
[01:42:25] <cmr> I live 4.8Gm away.
[01:42:26] <adwhit> incidentally, I showed my solution to a friend and he created a version in ASM that is trending on HN right now: https://news.ycombinator.com/item?id=7301481
[01:42:30] <cmr> no
[01:42:32] <cmr> Mm
[01:42:34] <cmr> my bad.
[01:42:36] *** Joins: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net)
[01:43:00] *** Parts: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net) ()
[01:43:28] *** Quits: mib_ex499n (Mibbit@A449C3BE.EDD2401A.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[01:43:31] <Jemaclus> cool.
[01:43:36] <Jemaclus> i guess i'll show up and get a sticker
[01:43:46] <hoverbear> adwhit: I popped it into the readme too, thanks!
[01:44:20] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[01:44:59] *** Quits: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[01:45:00] <cmr> adwhit: you're in the hacker school? is lkuper still there?
[01:45:52] *** Quits: hoverbear (hoverbear@moz-B4816CA9.wireless.uvic.ca) (Quit: Taking a nap.)
[01:46:06] <adwhit> cmr: not yet, she's resident from 24th March apparently
[01:46:22] <cmr> cool
[01:46:27] <adwhit> cmr: hope to learn a lot from her
[01:46:34] <cmr> say hi to her if you meet her, she was one of the earliest people who worked on Rust
[01:47:40] <adwhit> will do!
[01:48:08] <felixc> cmr: aha! I think I may have figured it out. My /tmp is mounted noexec
[01:48:13] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[01:48:16] <cmr> felixc: ah that would do it!
[01:48:27] * cmr adds to the mental laundry list of "things that can break"
[01:48:29] *** kimundi is now known as zz_kimundi
[01:48:56] <felixc> so would this be considered just a broken setup on my part, or a minor bug in the test runner for not checking whether that will work
[01:49:07] <cmr> well
[01:49:12] *** Quits: reyre (reyre@moz-89E9865B.com) (Quit: ZNC - http://znc.in)
[01:49:13] <felixc> I don't think having noexec /tmp is such an uncommon setup...
[01:49:17] <cmr> noexec tmp is relatlvely common I would think
[01:49:18] <cmr> yeah
[01:49:29] *** Joins: Ralith (ralith@moz-67D4EB93.customer.broadstripe.net)
[01:49:35] <cmr> should probably be a bug in the test runner.
[01:49:39] <adwhit> zz_kimudi: now I think about it, I have a sudoku solution in rust too, I made it for project euler, maybe that could go in the repo too
[01:49:41] <cmr> (as in, you should file one :) )
[01:49:46] <felixc> will do!
[01:49:46] *** Joins: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca)
[01:49:49] *** Joins: jmmk (jmmk@moz-588F65EA.c3-0.smr-ubr1.sbo-smr.ma.cable.rcn.com)
[01:50:02] <jmmk> Why does make install put libs in /usr/local/lib and in /usr/local/lib/rustlib?
[01:50:02] <adwhit> zz_kimundi: ^
[01:50:04] <cmr> but you can export the TMPDIR env var, or should be able to, to use a different dir instead of /tmp to work around it.
[01:50:10] <felixc> thanks for the perspective on this :)
[01:50:19] <cmr> jmmk: because it's silly.
[01:50:20] <felixc> oh yeah that's a good idea, that unblocks me right away
[01:50:21] <gonkun> i cant find the HTTP_Request type in the docs anywhere.. any ideas?
[01:50:27] <cmr> gonkun: it doesn't exist?
[01:50:45] <cmr> not in the stdlib at least.
[01:50:53] <gonkun> ok, ill double check
[01:51:04] <gonkun> whoops nvm its a struct :p
[01:51:04] <cmr> jmmk: the idea is that all rust libraries go in $prefix/rustlib/$target
[01:51:09] <gonkun> in my code
[01:51:28] *** Quits: q66 (q66@9C33633A.27945D6F.B1AA2106.IP) (Ping timeout)
[01:51:39] <cmr> jmmk: which is not strictly correct, on most (all non-windows?) platforms.
[01:51:57] <cmr> jmmk: (and the libs the compiler uses go in $prefix/lib)
[01:52:56] *** Joins: jmmk_ (jmmk@moz-588F65EA.c3-0.smr-ubr1.sbo-smr.ma.cable.rcn.com)
[01:52:58] <csherratt> is there an equivalent of __function__ in rust?
[01:53:05] <cmr> csherratt: unfortunately not.
[01:53:18] <cmr> there was a PR adding such a thing, but it was poorly implemented and thus rejected.
[01:53:50] <csherratt> darn.
[01:54:06] <jmmk> cmr: so what's the solution to when the compiler finds 2 matches?
[01:54:21] <cmr> jmmk: /usr/local/lib isn't searched for Rust libraries.
[01:54:33] <cmr> and shouldn't be, because when there are two matches, there's an error.
[01:55:18] <jmmk> oh ok, I guess I was including usr/local/lib in my makefile because I had put a 3rd-party library in there
[01:56:09] *** Quits: Bewilderforce (Bewilderfo@moz-EA5D4D40.ed.shawcable.net) (Quit: Leaving)
[01:56:16] *** Joins: q66 (q66@2F16E09C.27945D6F.B1AA2106.IP)
[01:57:25] *** Quits: mawuli (mawuli@moz-36C70B7D.com.gh) (Ping timeout)
[01:57:41] *** Joins: mawuli (mawuli@moz-36C70B7D.com.gh)
[01:58:30] *** Quits: Blub\w (wry@620605B3.71150E1A.237AE2BA.IP) (Ping timeout)
[01:58:57] *** Quits: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[01:59:29] *** Quits: chenyang (user@moz-8AF6A02F.airbears2.berkeley.edu) (Ping timeout)
[02:00:12] *** Joins: kvanb (kvanb@moz-BFEE4085.lnse5.win.bigpond.net.au)
[02:01:32] *** Joins: p1start (rewi@moz-A082F561.adsl.xtra.co.nz)
[02:02:46] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[02:03:02] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[02:03:34] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[02:04:27] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[02:04:31] *** Joins: hacker_sam (hacker_sam@moz-8F2DB428.public.wayport.net)
[02:04:59] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[02:05:05] *** Quits: popinman322 (MagiSun@moz-DB516D62.twcny.res.rr.com) (Quit: Leaving.)
[02:05:25] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 30.0a1/20140224030203])
[02:06:25] <Jemaclus> heading to the meetup to see a guy about some stickers.
[02:06:44] *** Quits: Jemaclus (Jemaclus@4EEAB704.5843BA5A.D4E4C7A5.IP) (Quit: Leaving...)
[02:06:46] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[02:07:29] *** Quits: q66 (q66@2F16E09C.27945D6F.B1AA2106.IP) (Quit: Leaving)
[02:09:06] *** Joins: q66 (q66@2F16E09C.27945D6F.B1AA2106.IP)
[02:09:06] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[02:09:41] *** Quits: onelson (onelson@moz-DD666EC5.laika.com) (Quit: Leaving.)
[02:11:00] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[02:11:01] *** Joins: mauricioc (mauricioc@A6903506.BF40BC51.2F0EC0E9.IP)
[02:12:25] *** Quits: adwhit (Mibbit@87D98E32.4046EB22.428F94DD.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[02:12:26] <andor> when did rust become self-bootstrapping?
[02:12:35] <cmr> andor: 2012?
[02:12:41] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[02:12:41] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Quit: Leaving...)
[02:12:43] <cmr> somewhere around then.
[02:12:50] <cmr> (self-hosting, is the term)
[02:12:56] <andor> cmr: rough estimate on version number? if any
[02:13:01] *** Joins: Blub\w (wry@620605B3.71150E1A.237AE2BA.IP)
[02:13:03] <brson> andor: 2011
[02:13:06] <brson> april 2011
[02:13:09] *** Quits: freezerburnv (freezerbur@moz-E25EEE31.washdc.fios.verizon.net) (Quit: freezerburnv)
[02:13:09] <cmr> april!
[02:13:15] <cmr> I had the right season, wrong year.
[02:13:17] <cmr> was 2012 0.1?
[02:13:32] <brson> i think 0.1 was january 2012
[02:13:44] <andor> mhm, and uhh, how about the runtime? when did that fully become rust?
[02:13:56] <o11c> that was pretty recent ...
[02:13:57] <cmr> andor: last summer, for the most part.
[02:14:08] <cmr> the last c++ bits were yanked out relatively recently.
[02:14:18] <andor> again, any guess on version number? 0.6 or so?
[02:14:31] <cmr> 0.8 flipped on the new runtime by default iirc
[02:14:34] <cmr> maybe 0.7
[02:14:39] <andor> ah okay
[02:14:41] * cmr checks
[02:14:59] <cmr> brson surely knows better than I
[02:16:04] <kangz> first rustc was in ocaml right?
[02:17:11] <cmr> andor: had to have been 0.8, since 0.7 was in the midst of the new runtime
[02:17:33] <andor> cmr: okay, thanks for checking it
[02:18:58] <cmr> kangz: yep.
[02:19:18] <kangz> ty
[02:20:01] *** Joins: Krymise (Nietzsche@moz-CA789EF5.nwrknj.fios.verizon.net)
[02:23:02] *** Parts: jmmk_ (jmmk@moz-588F65EA.c3-0.smr-ubr1.sbo-smr.ma.cable.rcn.com) ()
[02:23:15] *** Quits: ricepuddin (graham@moz-7D68765A.cable.virginm.net) (Ping timeout)
[02:24:26] *** Joins: a_m0d (a_m0d@moz-B069EE89.acanac.net)
[02:25:51] *** Joins: nitivermagupta (nitivermag@moz-15FCB70D.hsd1.ca.comcast.net)
[02:27:10] *** Joins: erickt (Adium@moz-C07D5168.p2p.sfo1.mozilla.com)
[02:27:36] <ChrisMorgan> The new runtime became the default in July or August last year.
[02:27:40] *** Joins: jdsanders (Adium@moz-EB8DC389.hlrn.qwest.net)
[02:28:58] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[02:29:47] *** Joins: sellout (Adium@moz-2081FE17.hsd1.co.comcast.net)
[02:30:17] *** Quits: brson (brson@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Ping timeout)
[02:31:27] *** Quits: sellout (Adium@moz-2081FE17.hsd1.co.comcast.net) (Ping timeout)
[02:33:27] *** Quits: brendan (brendaneic@BBB21EE2.F6F8CE9D.1DA58BFC.IP) (Quit: brendan)
[02:33:45] *** Joins: bvssvni (Mibbit@moz-C4579D6F.bb.online.no)
[02:33:51] *** Quits: jmmk (jmmk@moz-588F65EA.c3-0.smr-ubr1.sbo-smr.ma.cable.rcn.com) (Ping timeout)
[02:34:21] *** Quits: erickt (Adium@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: Leaving.)
[02:35:22] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[02:35:22] *** ChanServ sets mode: +ao pcwalton pcwalton
[02:35:38] *** Joins: sellout (Adium@moz-2081FE17.hsd1.co.comcast.net)
[02:36:20] *** Quits: meTaAU (admin@moz-F0D0165C.lns20.per2.internode.on.net) (Ping timeout)
[02:39:05] *** Joins: jmmk (jmmk@moz-588F65EA.c3-0.smr-ubr1.sbo-smr.ma.cable.rcn.com)
[02:40:27] *** Joins: meTaAU (admin@moz-6D1B5975.lns20.per2.internode.on.net)
[02:41:35] *** Quits: dmac (Adium@moz-99EF2EE6.hfc.comcastbusiness.net) (Quit: Leaving.)
[02:42:16] *** Quits: meTaAU (admin@moz-6D1B5975.lns20.per2.internode.on.net) (Ping timeout)
[02:42:16] *** Joins: seanp33 (Adium@moz-B0398B82.hsd1.md.comcast.net)
[02:42:25] *** Parts: seanp33 (Adium@moz-B0398B82.hsd1.md.comcast.net) ()
[02:42:53] *** Quits: NiccosSystem (NiccosSyst@moz-ED196BB4.customer.lyse.net) (Quit: Leaving)
[02:45:24] *** Joins: roy (user@moz-C21D3E9A.hsd1.il.comcast.net)
[02:46:45] *** Joins: meTaAU (admin@moz-D0601EF5.lns20.per2.internode.on.net)
[02:46:52] <SiegeLord> acrichto: So what would you suggest I pass to my function that expects a stream and a size of that stream? I'm not sure how being able to unwrap types would help generic code
[02:46:55] *** Quits: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP) (Ping timeout)
[02:47:18] *** Quits: mbx (mbebenita@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: mbx)
[02:48:07] *** Joins: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP)
[02:48:16] *** Joins: NiccosSystem (NiccosSyst@moz-ED196BB4.customer.lyse.net)
[02:49:08] *** Joins: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com)
[02:49:11] *** Joins: frogzilla (Mibbit@14310444.B9CCEC14.CC1A2609.IP)
[02:49:38] *** Quits: Tuba (Tobba@moz-462B7F7F.ias.bredband.telia.com) (Ping timeout)
[02:50:08] *** Quits: frogzilla (Mibbit@14310444.B9CCEC14.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[02:50:38] *** Quits: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP) (Ping timeout)
[02:50:45] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Input/output error)
[02:51:09] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[02:51:17] *** Quits: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net) (Ping timeout)
[02:51:52] *** Joins: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP)
[02:52:50] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[02:53:39] *** Quits: meTaAU (admin@moz-D0601EF5.lns20.per2.internode.on.net) (Ping timeout)
[02:54:05] *** Joins: meTaAU (admin@moz-A269B690.lns20.per1.internode.on.net)
[02:54:21] *** Joins: huon (Thunderbir@B11C0778.D5A1DCF.37681C44.IP)
[02:56:30] *** Quits: mawuli (mawuli@moz-36C70B7D.com.gh) (Ping timeout)
[02:57:06] *** Joins: Guest (textual@16F167B.4C57D258.D8E8354F.IP)
[02:58:57] <huon> rusti: match None::<int> { None() => 1, Some(_) => 2 }
[02:58:58] -rusti- 1
[02:59:25] <cmr> curious.
[03:00:03] <bblum> rusti: match 2 as bool { false => 1, true => 2 }
[03:00:03] -rusti- <anon>:10:15: 10:24 error: cannot cast as `bool`, compare with zero instead
[03:00:03] -rusti- <anon>:10         match 2 as bool { false => 1, true => 2 }
[03:00:04] -rusti-                         ^~~~~~~~~
[03:00:04] -rusti- error: aborting due to previous error
[03:00:04] -rusti- application terminated with error code 101
[03:00:18] <huon> rusti: enum Foo { Bar(), Baz() }
[03:00:19] <bblum> i forget how that bug went but it looks like it was fixed
[03:00:23] <bblum> since that is a new error message
[03:00:24] -rusti- pastebinned 10 lines of output: http://ix.io/aKg
[03:00:56] <cmr> non-canonical bools?
[03:00:58] *** Quits: meTaAU (admin@moz-A269B690.lns20.per1.internode.on.net) (Ping timeout)
[03:01:08] <cmr> yeah we just don't allow casts to bool now.
[03:01:12] *** Joins: dranov (dranov@F36E785D.CD12E950.D602D2C5.IP)
[03:01:48] *** Quits: Guest (textual@16F167B.4C57D258.D8E8354F.IP) (Quit: Textual IRC Client: www.textualapp.com)
[03:01:50] *** Joins: angdev (angdev@16F167B.4C57D258.D8E8354F.IP)
[03:01:55] *** Joins: chenyang (user@moz-8AF6A02F.airbears2.berkeley.edu)
[03:02:13] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[03:02:20] *** Joins: meTaAU (admin@moz-89A0471A.lns20.per1.internode.on.net)
[03:02:21] <huon> fwiw, https://github.com/mozilla/rust/issues/12560
[03:03:13] <huon> oh, meetup's starting now?
[03:03:19] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[03:03:53] *** Quits: jdsanders (Adium@moz-EB8DC389.hlrn.qwest.net) (Quit: Leaving.)
[03:04:00] <cmr> one more hour I think
[03:04:11] <cmr> oh hey it's on amo
[03:04:17] *** Quits: p1start (rewi@moz-A082F561.adsl.xtra.co.nz) (Ping timeout)
[03:04:27] *** Quits: John-Galt (kris@125EF623.B2666F0E.66399531.IP) (Ping timeout)
[03:04:36] <cmr> just the empty stream.
[03:05:01] *** Joins: John-Galt (kris@125EF623.B2666F0E.66399531.IP)
[03:05:07] *** Quits: meTaAU (admin@moz-89A0471A.lns20.per1.internode.on.net) (Ping timeout)
[03:05:25] *** Quits: ziad (ziad@B20586FB.BDB3D91.6E370BFC.IP) (Quit: ziad)
[03:06:27] <huon> oh the " 6 minutes ago " on AMO lied to me! :'(
[03:07:03] *** Quits: zz_kimundi (kimundi@moz-75FC8F5B.dip0.t-ipconnect.de) (Ping timeout)
[03:07:24] *** Joins: meTaAU (admin@moz-69EF0319.lns20.per1.internode.on.net)
[03:10:03] *** Joins: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net)
[03:10:04] *** Joins: zz_kimundi (kimundi@moz-66E7D193.dip0.t-ipconnect.de)
[03:10:33] *** zz_kimundi is now known as kimundi
[03:10:41] *** Joins: jadbaires (jadrian@moz-76283E80.dsl.telepac.pt)
[03:11:40] *** Quits: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com) (Ping timeout)
[03:11:43] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[03:11:47] *** Quits: evanm (evanm@636AC086.5999CED5.71743E61.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[03:13:23] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[03:13:43] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Ping timeout)
[03:13:44] *** Joins: csherratt_ (csherratt@moz-7685819.cpe.teksavvy.com)
[03:15:09] *** Quits: a_m0d (a_m0d@moz-B069EE89.acanac.net) (Quit: Leaving.)
[03:18:33] *** Joins: erickt (Adium@moz-C07D5168.p2p.sfo1.mozilla.com)
[03:20:30] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[03:25:44] *** Quits: NiccosSystem (NiccosSyst@moz-ED196BB4.customer.lyse.net) (Quit: Leaving)
[03:26:29] *** Quits: echristo (echristo@C587E14D.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[03:26:59] *** Quits: maxli (maxli@moz-EE42E0E.student.cs.uwaterloo.ca) (Ping timeout)
[03:27:23] *** Joins: echristo (echristo@C587E14D.D6CCE4AE.77834EAA.IP)
[03:27:46] *** Joins: geoffhill (geoffhill@moz-95FF7399.members.linode.com)
[03:28:05] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[03:29:11] *** Quits: tjc (tjc@moz-791C24B0.phlapa.east.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[03:29:25] <erickt> steveklabnik: ping
[03:30:13] <dougxxx> hm, how do I actually use fs::walk_dir? The IoResult<Directories> seems confusing. How do I actually get a mutable iterator out of it?
[03:30:39] <cmr> dougxxx: IoResult<T> is a typedef for Result<T, IoError>
[03:30:45] <cmr> dougxxx: so you need to unwrap that first.
[03:30:53] <huon> dougxxx: let mut it = fs::walk_dir(...).unwrap(); to just ignore the errors
[03:30:56] <cmr> Then, Directories is actually the iterator you want to be iterating on.
[03:31:17] <huon> or, use it as an r-value directly: `for dir in fs::walk_dir(...).unwrap() { ... }`
[03:31:37] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[03:31:53] <huon> (by ignore errors I mean just fail the task if there's any error; without an attempt to handle it at all.)
[03:32:12] <dougxxx> let mut walker = fs::walk_dir(path).ok().unwrap(); ?
[03:32:34] *** Quits: jadbaires (jadrian@moz-76283E80.dsl.telepac.pt) (Quit: Konversation terminated!)
[03:32:40] *** Joins: jadbaires (jadrian@moz-76283E80.dsl.telepac.pt)
[03:32:44] <dougxxx> (yeah, or error check instead of just using .ok)
[03:33:14] <gonkun> expected `&~str` but found `&str` (expected &-ptr but found &str). can someone help plz?
[03:34:46] <Yurume> gonkun: any example?
[03:35:05] *** Quits: echristo (echristo@C587E14D.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[03:35:16] <Yurume> I suspect you are using HashMap, but I have to be sure about the problem to properly answer that.
[03:35:31] <Yurume> (for HashMap, the simple answer is: use .find_equiv() etc. instead of .find().)
[03:35:44] <gonkun> Yurume: I am using a hashmap!
[03:35:49] <Yurume> :)
[03:36:07] *** Quits: jadbaires (jadrian@moz-76283E80.dsl.telepac.pt) (Quit: Konversation terminated!)
[03:36:14] *** Joins: jadbaires (jadrian@moz-76283E80.dsl.telepac.pt)
[03:36:19] <gonkun> Yurume, im actually using get
[03:36:57] <huon> .find_equiv(& &"Foo").unwrap()
[03:37:02] <Yurume> gonkun: .get(k) is equivalent to .find(k).unwrap().
[03:37:07] <Yurume> so adapt accordingly.
[03:37:09] <gonkun> ahh i see
[03:37:12] <gonkun> thanks!
[03:37:39] <gonkun> Yurume: wait, did you mean .find_equiv(k).unwrap?
[03:37:43] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[03:37:43] <Yurume> right
[03:37:51] <gonkun> k!
[03:37:56] <Yurume> since there is no such thing like get_equiv(), unfortunately
[03:38:20] *** Joins: onelson (owen@18CF7301.95770028.5B6BFE7D.IP)
[03:38:27] *** Joins: ziad (ziad@moz-C0318336.hsd1.ca.comcast.net)
[03:38:27] <Yurume> see also: https://github.com/mozilla/rust/issues/12135
[03:38:37] <huon> gonkun: (for the direct equivalence, it's .get and .find.unwrap. .find_equiv is a variant of .find that's not precisely the same as .get)
[03:38:51] <Yurume> I really dislike the division between Eq and Equiv, but that's how it is implemented for now.
[03:39:01] <felixc> if I want to print a message with potentially a second part depending on a conditional, would something like this be remotely idiomatic: "a" + if true { "b" } else { "" }
[03:39:34] <cmr> felixc: remotely, yes.
[03:39:42] <felixc> haha, but only remotely?
[03:39:44] <huon> Equiv is basically "two values are equivalent implies they have the same hash"
[03:39:45] <cmr> only remotely!
[03:39:46] <felixc> is there a more common form?
[03:39:51] <cmr> not quite common.
[03:39:58] <cmr> but, our string formatter can handle this natively.
[03:40:01] <cmr> and with zero allocations.
[03:40:07] <felixc> ah! that sounds like what I want!
[03:40:09] <cmr> sec, pulling up docs.
[03:40:25] <huon> println!("a{}", if ... {"b"} else {""}) is better than the +, if you're printing it directly
[03:40:29] *** Quits: gmjosack (gary@F91A859E.75E3DBFA.7AB8439E.IP) (Ping timeout)
[03:40:34] <cmr> http://static.rust-lang.org/doc/master/std/fmt/index.html
[03:40:36] <huon> (and if you have multiple parts, using `format!` instead of + is better)
[03:40:40] <cmr> I believe select can handle this.
[03:40:43] <cmr> well, that works too.
[03:40:44] <felixc> I skimmed the formatter docs but couldn't find the word "conditional" anywhere
[03:41:05] <cmr> maybe it isn't.
[03:41:11] <felixc> I'll read through it in more detail
[03:41:13] <cmr> but the snippet huon gave certainly works just as well.
[03:41:16] <Yurume> huon: niko seems to imagine a hashtable with DST keys, I guess Equiv can go away if that's possible.
[03:41:19] <huon> rusti: format!("{, select, =1{one} other{more}}", 1)
[03:41:19] -rusti- <anon>:10:17: 10:50 error: invalid format string: cannot have an empty selector
[03:41:20] -rusti- <anon>:10         format!("{, select, =1{one} other{more}}", 1)
[03:41:20] -rusti-                           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[03:41:20] -rusti- error: aborting due to previous error
[03:41:20] -rusti- application terminated with error code 101
[03:41:27] <huon> rusti: format!("{0, select, =1{one} other{more}}", 1)
[03:41:27] -rusti- <anon>:10:17: 10:51 error: invalid format string: cannot have an empty selector
[03:41:27] -rusti- <anon>:10         format!("{0, select, =1{one} other{more}}", 1)
[03:41:27] -rusti-                           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[03:41:28] -rusti- error: aborting due to previous error
[03:41:29] -rusti- application terminated with error code 101
[03:41:38] <huon> rusti: format!("{0, select =1{one} other{more}}", 1)
[03:41:38] -rusti- <anon>:10:17: 10:50 error: invalid format string: expected `,` but found `=`
[03:41:38] -rusti- <anon>:10         format!("{0, select =1{one} other{more}}", 1)
[03:41:39] -rusti-                           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[03:41:39] -rusti- error: aborting due to previous error
[03:41:39] -rusti- application terminated with error code 101
[03:41:45] * huon doesn't understand
[03:41:51] <felixc> thanks cmr and huon; I'll look at both options and pick whichever looks nicer in context
[03:41:55] <huon> rusti: format!("{0, plural, =1{one} other{more}}", 1)
[03:41:57] -rusti- ~"one"
[03:42:01] * huon does understand
[03:42:29] <huon> rusti: format!("foo bar {0, plural, =1{one cat} other{# cats}} qux", 10)
[03:42:30] -rusti- ~"foo bar 10 cats qux"
[03:42:32] *** Joins: newbie (kvirc@moz-E97035B0.dip0.t-ipconnect.de)
[03:42:33] <huon> rusti: format!("foo bar {0, plural, =1{one cat} other{# cats}} qux", 1)
[03:42:34] -rusti- ~"foo bar one cat qux"
[03:42:51] <Yurume> rusti: format!("{0, plural, =1{# {singular}} other{# {plural}}}", 1, singular="whatever", plural="whatevers")
[03:42:53] -rusti- ~"1 whatever"
[03:43:06] <cmr> format! is truly wonderful.
[03:43:09] <cmr> <3 acrichto
[03:43:10] <felixc> wow, yeah
[03:43:33] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[03:43:37] <huon> Yurume: I don't quite understand how a DST table would work, since it stores them effectively as ~[K]
[03:43:42] <huon> *the keys
[03:43:52] <huon> and so they need a definite size for the vector to work
[03:43:55] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[03:44:11] *** Joins: mindcat (mindcat@F457AA3.BDFDA69D.857BDFA9.IP)
[03:44:59] *** Joins: alan_andrade (alan_andra@moz-C07D5168.p2p.sfo1.mozilla.com)
[03:45:46] <Yurume> huon: if I understand correctly, niko seems to suggest something like HashMapWithUnsizedKey<[u8], V>, where the key is stored as ~[u8] and searched as &[u8].
[03:45:57] <huon> Ah, I see
[03:46:13] *** Quits: jadbaires (jadrian@moz-76283E80.dsl.telepac.pt) (Quit: Konversation terminated!)
[03:46:20] *** Joins: jadbaires (jadrian@moz-76283E80.dsl.telepac.pt)
[03:46:52] <Yurume> I don't think it can be merged with the ordinary HashMap, since it would require the sized keys to be stored as ~-ptr (even when the key itself is ~ptr)
[03:47:21] <huon> impl<unsized T, K: Ptr<T, V>> HashMap<K, V> { fn find_unsized(&self, &T) { ... } }
[03:47:25] <huon> might work
[03:47:33] <mindcat> do we have rust-gettext library?
[03:47:48] <huon> (err, I meant Ptr<T>, V, not Ptr<T, V>)
[03:47:56] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[03:48:04] <Yurume> huon: no difference over the current find_equiv...
[03:48:18] <huon> Yurume: yes, there is
[03:48:34] <huon> it works with any unsized type without needing the Equiv trait impl'd
[03:48:39] <huon> (or even needing Equiv at all)
[03:48:43] *** Quits: Rusky (russell@moz-C0CD0CF0.slkc.qwest.net) (Quit: Leaving.)
[03:48:50] *** Joins: Rusky (russell@moz-C0CD0CF0.slkc.qwest.net)
[03:49:04] <huon> How long do the meet-up presentations go for? 90 minutes?
[03:49:11] <cmr> I think an hour.
[03:49:19] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[03:49:39] <Yurume> I always thought the sole purpose of Equiv trait is to avoid the redundant allocation on the lookup, isn't it? 
[03:49:49] <huon> basically, yes
[03:49:49] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[03:51:02] <huon> Basically, the above merges HashMap and HashMapWithUnsizedKey by adding some new methods, but allows storing the keys with any pointer type (e.g. Rc<...>).
[03:51:25] *** Joins: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net)
[03:51:37] <Yurume> having _equiv or _unsized methods means that we need all those variants for every method receiving a key, which tremendously breaks the orthogonality.
[03:52:00] <huon> Is having a whole new type better?
[03:52:17] <Yurume> if we cannot avoid having that, I guess so.
[03:52:24] <Yurume> s/having//
[03:52:36] <huon> We can avoid that, by using new methods :P
[03:52:41] <Yurume> awwww :p
[03:52:46] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[03:52:47] *** ChanServ sets mode: +ao dherman dherman
[03:53:28] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[03:53:42] *** Joins: tjc (tjc@moz-791C24B0.phlapa.east.verizon.net)
[03:53:42] *** ChanServ sets mode: +o tjc
[03:53:46] *** Quits: Earnestly (earnest@F86306B4.BBD8F39E.FEA8F6FD.IP) (Ping timeout)
[03:53:49] *** Joins: aurynj (Eon@583ABBE5.60FA2E28.B9E25744.IP)
[03:53:56] *** Quits: aurynj (Eon@583ABBE5.60FA2E28.B9E25744.IP) (Quit: Leaving)
[03:55:06] *** Joins: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca)
[03:55:08] <Yurume> huon: heh, it seems that MaybeOwned also implements Equiv. so find_unsized won't allow MaybeOwned in place of str anyway...
[03:56:20] *** Quits: jadbaires (jadrian@moz-76283E80.dsl.telepac.pt) (Quit: Konversation terminated!)
[03:56:26] *** Joins: jadbaires (jadrian@moz-76283E80.dsl.telepac.pt)
[03:56:26] <huon> MaybeOwned could be { *[u8], owned: true } + some transmutes
[03:56:29] *** Quits: tjc (tjc@moz-791C24B0.phlapa.east.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[03:56:37] <huon> or whatever makes it work with DST, I guess
[03:57:12] *** Joins: frogzilla (Mibbit@14310444.B9CCEC14.CC1A2609.IP)
[03:57:28] *** Parts: frogzilla (Mibbit@14310444.B9CCEC14.CC1A2609.IP) ()
[03:57:32] <huon> Ooooh, meetup stream's started
[03:57:43] <cmr> thanks for the headsup
[03:58:33] <huon> it's just general chatter atm though
[03:58:44] *** Joins: tjc (tjc@moz-791C24B0.phlapa.east.verizon.net)
[03:58:44] *** ChanServ sets mode: +o tjc
[03:59:11] <huon> and just as I said that a wild erickt appears
[03:59:55] <huon> https://air.mozilla.org/rust-meetup-february-2014/ is the stream, for those not able to attend
[04:00:17] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[04:00:17] *** ChanServ sets mode: +ao pcwalton pcwalton
[04:00:18] *** Quits: jmmk (jmmk@moz-588F65EA.c3-0.smr-ubr1.sbo-smr.ma.cable.rcn.com) (Ping timeout)
[04:01:53] *** erickt is now known as wild_erickt
[04:02:08] <wild_erickt> as always, msg me if you got any questions for the speaker
[04:02:11] *** Joins: sawrubh (uid6719@moz-5F4AA75A.irccloud.com)
[04:02:25] *** Quits: huon (Thunderbir@B11C0778.D5A1DCF.37681C44.IP) (Ping timeout)
[04:02:40] <alan_andrade> \o/ at the Rust meetup !   : )
[04:04:58] *** Joins: huon (Thunderbir@B11C0778.D5A1DCF.37681C44.IP)
[04:05:11] *** Quits: disjukr (disjukr@1B452A7A.D5FE504D.FC69BED9.IP) (Ping timeout)
[04:05:46] *** Quits: gonkun (Mibbit@moz-1C68F6E0.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[04:06:39] *** Joins: disjukr (disjukr@1B452A7A.D5FE504D.FC69BED9.IP)
[04:08:36] <cmr> wild_erickt: the lhs is 
[04:08:38] <cmr> thanks ;)
[04:08:48] <wild_erickt> :)
[04:09:31] *** Joins: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP)
[04:10:29] *** Quits: wild_erickt (Adium@moz-C07D5168.p2p.sfo1.mozilla.com) (Ping timeout)
[04:10:50] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[04:10:50] *** Quits: eholk (eholk@moz-BA312F07.crest.iu.edu) (Quit: eholk)
[04:11:55] *** Joins: erickt (Adium@moz-C07D5168.p2p.sfo1.mozilla.com)
[04:12:09] *** Quits: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net) (Quit: Sharp)
[04:12:29] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[04:14:08] *** Quits: Jesse_ (jruderman@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: Jesse_)
[04:14:10] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[04:14:15] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[04:15:08] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[04:16:11] *** Joins: zztr (Thunderbir@moz-CA50D606.dsl.static.sonic.net)
[04:16:25] *** Joins: p1start (rewi@moz-A082F561.adsl.xtra.co.nz)
[04:16:51] <iopq> I wanted to do fizzbuzz in Rust, but most solutions I've seen in languages like python are unsatisfying so I don't want to port those
[04:17:17] <iopq> of course the goal is to make a solution that is extensible where you can add "bazz" when divisible by 7, etc.
[04:17:31] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[04:17:47] <iopq> so far the only satisfying solution I've seen is: 
[04:17:47] <iopq> fizzbuzz i = fromMaybe (show i) $ mappend ["fizz" | i `rem` 3 == 0]
[04:17:47] <iopq>                                           ["buzz" | i `rem` 5 == 0]
[04:17:54] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[04:18:15] *** Quits: dranov (dranov@F36E785D.CD12E950.D602D2C5.IP) (Ping timeout)
[04:18:53] <iopq> how do I implement this in Rust?
[04:19:04] <erickt> iopq: that's not enterprisy enough. You really should draw inspiration from https://github.com/EnterpriseQualityCoding/FizzBuzzEnterpriseEdition :)
[04:19:27] <iopq> only when I'm getting paid $200K to browse hacker news at my job
[04:19:44] <erickt> but more seriously, I'm not too familiar with haskell, what's mappend do?
[04:20:07] <iopq> I'm not either, but it's "monoid append"
[04:20:32] <iopq> so what it does is it will either append fizz or buzz or both
[04:20:50] <iopq> and fromMaybe takes a default value and a value
[04:20:59] <iopq> so if you have either fizz or buzz or both you get those
[04:21:03] <iopq> otherwise you get the default value
[04:21:39] <iopq> fizzbuzz i = fromMaybe (show i) $ mappend ["fizz" | i `rem` 3 == 0]
[04:21:39] <iopq>                                                                       ["buzz" | i `rem` 5 == 0]
[04:21:39] <iopq>                                                                       ["bazz" | i `rem` 7 == 0]
[04:21:42] <iopq> this also works
[04:21:44] <o11c> in general, you can get an "elegant" solution by doing a 'sum' but with the 'bitwise or' operator
[04:21:59] <o11c> (not relying on haskell, which is just weird)
[04:22:13] <iopq> what is the bitwise or solution?
[04:22:41] *** Joins: dranov (dranov@F36E785D.CD12E950.D602D2C5.IP)
[04:22:56] *** Quits: victorporof (victorporo@moz-FFB76956.cpe.net.cable.rogers.com) (Quit: victorporof)
[04:23:37] <seanmonstar> iopq: if/elseif is no good?
[04:24:05] <iopq> ok, try writing the if/elseif version, but now you have to do it with bazz also if divisible by 7, qux if divisible by 11
[04:24:17] <iopq> in the haskell example you just add another line
[04:24:23] <o11c> roughly: calculate the bitwise or of all [ ( if mod 3 then print, "fizz", 1), ...]
[04:24:29] <o11c> then do a logical or to print the number
[04:25:03] <rntz> iopq: is your Haskell you using list comprehensions to generate Maybes? :(
[04:25:24] <iopq> yes, it's a String maybe
[04:25:52] <iopq> if I get Nothing it will (show i), but it also concatenates the strings if multiple conditions are true
[04:25:57] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[04:26:22] <cmr> that's very nice looking.
[04:26:32] <rntz> I understand how it works, I'm just annoyed at you for using list comprehensions to generate something that's not a list :P
[04:26:37] <erickt> iopq: so there might be some clever way to do this with iterators, but really the rusty way of doing this would be to just use a for loop
[04:26:49] <rntz> (that requires setting some flag or other, I assume)
[04:27:06] <Yurume> rntz: it is not a list, but it is a list monad :p
[04:27:11] <rntz> I mean, you *can* do a literal transcription of the haskell code
[04:27:17] <rntz> Yurume: uh, what.
[04:27:46] *** Quits: jadbaires (jadrian@moz-76283E80.dsl.telepac.pt) (Quit: Konversation terminated!)
[04:27:49] <rntz> define a monoid trait in rust, define mappend for it, define some equvalent of fromMaybe if rust doesn't already have it
[04:28:02] <rntz> the most difficult part to transcribe to rust would be the comprehension
[04:28:14] *** Quits: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Quit: It is tiem!)
[04:28:22] <rntz> not sure how close to the haskell you can get that.
[04:28:24] <Yurume> well, a list is a monad, but the code takes advantage of the monadic feature of lists
[04:28:26] <rntz> it's a silly exercise
[04:28:27] *** Joins: victorporof (victorporo@moz-FFB76956.cpe.net.cable.rogers.com)
[04:28:30] *** Quits: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca) (Input/output error)
[04:28:38] <rntz> Yurume: the code given does not involve lists in any way shape or form
[04:28:52] <rntz> other than using syntax that was originally designed to look like lists
[04:28:57] <rntz> unless I misunderstand it
[04:28:58] <Yurume> ah
[04:29:06] <Yurume> hmm
[04:29:09] *** Joins: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca)
[04:29:27] <rntz> the code given also does not typecheck in ghci, so I assume there is some flag or option that you have to set to get it to work.
[04:29:29] <Yurume> AFAIK the list comprehension in haskell expands to do notation with list monads, but I'm not sure
[04:29:36] <iopq> you need to do: {-# LANGUAGE MonadComprehensions #-}
[04:29:41] *** Quits: cgaebel (clark@moz-8E0C6BCA.nyc.res.rr.com) (Ping timeout)
[04:29:49] <Yurume> (as my Haskell experience is limited)
[04:30:06] *** Quits: chenyang (user@moz-8AF6A02F.airbears2.berkeley.edu) (Ping timeout)
[04:30:06] <rntz> Yurume: it is equivalent to that, yes. unless you do what iopq said, in which case the list comprehension expands to do-notation for an arbitrary MonadPlus, I think.
[04:30:16] <rntz> which is what lets this work, since Maybe is a MonadPlus
[04:30:39] <rntz> anyway, this is all rather beside the point.
[04:30:45] <Yurume> off-topic is fun!
[04:30:55] <tjc> rntz: https://ghc.haskell.org/trac/ghc/wiki/MonadComprehensions
[04:31:29] <iopq> well I guess the question is if all of this delicious magic is portable to Rust
[04:31:42] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[04:31:42] *** ChanServ sets mode: +ao pcwalton pcwalton
[04:31:57] <cmr> iopq: magic sure, but not necessarily the sugar that makes the magic go down :)
[04:32:11] *** Quits: dranov (dranov@F36E785D.CD12E950.D602D2C5.IP) (Ping timeout)
[04:32:12] <rntz> I don't remember whether rust has traits on higher-kinded types?
[04:32:26] <tjc> rntz: Rust doesn't have higher-kinded types
[04:32:56] <rntz> in "type Foo<X> = ...;", is Foo not of kind (type -> type)?
[04:32:56] <mcpherrin> what is a hkt
[04:33:04] <cmr> rntz: no
[04:33:08] <cmr> rntz: that's just a typedef.
[04:33:29] <rntz> what does that have to do with anything?
[04:33:35] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[04:33:38] <rntz> but "struct Foo<X> { ... }" if it makes any difference
[04:33:49] <o11c> okay, here's my (C++) flexible implementation of fizzbuzz https://gist.github.com/o11c/9223607
[04:33:50] <cmr> Foo doesn't have a kind, it's not actually a type, it's not a constructor.
[04:34:03] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[04:34:04] <tjc> rntz: Rust doesn't have polymorphic types. items in Rust have type parameters.
[04:34:09] <tjc> There's no way to express a forall type in Rust.
[04:34:22] <rntz> okay, so Rust doesn't let me talk about Foo independently, I always have to talk about Foo<blah> for some blah
[04:34:26] <iopq> o11c: thanks, but I can't into C++ at all
[04:34:26] <rntz> is that right?
[04:34:30] <cmr> yup
[04:34:44] *** Quits: huon (Thunderbir@B11C0778.D5A1DCF.37681C44.IP) (Ping timeout)
[04:34:46] <cmr> holy crap
[04:34:47] <rntz> I would still say that notionally Foo has kind (type -> type), but that's just so I can think about these things ;)
[04:35:08] <cmr> Kenton Varda showed up?
[04:35:09] *** Joins: huon (Thunderbir@B11C0778.D5A1DCF.37681C44.IP)
[04:35:12] <o11c> iopq: the concept applies to any language with lambdas and an accumulate function that works on arguements with different types
[04:35:35] <rntz> iopq: yeah, so, Rust can't deal with higher-kinded-types, so you can't really define a Monad or MonadPlus trait
[04:35:38] <cmr> rntz: in theory, sure. try convincing rustc of that though ;)
[04:35:40] <rntz> so some of the delicious magic would have to go
[04:36:53] <iopq> o11c: I don't know what accumulate, begin or end do
[04:37:33] <rntz> you could just define (fn guard<A>(bool, A) -> option<A>), though, which is what you're using the monad comprehension for here.
[04:37:43] <aatch> rtnz there is no way to express a type with a kind (* -> *) -> * or similar.
[04:37:52] <rntz> you'd need <A:Copy> or something, I don't rememeber how rust's copying system works
[04:37:58] <erickt> yay macros!
[04:38:50] <cmr> erickt: is there anyway to get the slides bigger or perhaps a link
[04:39:08] <cmr> like, a different framing for the stream.
[04:39:14] <cmr> sfackler: thanks <3
[04:39:46] <cmr> (if it's bothersome it's fine)
[04:40:09] <erickt> http://sfackler.github.io/syntax-ext-talk/#/
[04:40:13] <erickt> ^ slides
[04:40:16] <cmr> awesomesaucem
[04:40:19] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[04:41:00] <o11c> iopq: begin and end are C++ idioms for iterating. accumulate is a standard mathematical function
[04:41:02] *** Quits: jyyou (jyyou@moz-47B052FA.cs.nctu.edu.tw) (Ping timeout)
[04:41:07] *** Joins: jyyou (jyyou@moz-47B052FA.cs.nctu.edu.tw)
[04:41:18] <o11c> like Σ and Π, but with an arbitrary function
[04:41:18] *** Quits: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca) (Input/output error)
[04:41:41] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[04:41:50] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[04:41:55] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[04:43:49] *** Joins: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca)
[04:44:44] *** Quits: huon (Thunderbir@B11C0778.D5A1DCF.37681C44.IP) (Ping timeout)
[04:45:06] *** Joins: huon (Thunderbir@B11C0778.D5A1DCF.37681C44.IP)
[04:45:33] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Ping timeout)
[04:45:59] <huon> bleh, my internet keeps dropping out. could sfackler just pause when it does? :P
[04:46:11] <cmr> heh
[04:46:26] <ChrisMorgan> huon: be careful with those wishes or someone might take you up on them!
[04:46:41] <erickt> huon: just ping me when your internet goes down, I'll tell sfackler to stop
[04:46:56] <cmr> good answer!
[04:47:16] <huon> heh
[04:47:19] <ChrisMorgan> huon: got erickt's phone number?
[04:47:40] <iopq> SF is too far, do something in Mountain View :O
[04:47:47] <erickt> haha that's an expensive call
[04:48:02] *** Quits: Krymise (Nietzsche@moz-CA789EF5.nwrknj.fios.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[04:48:30] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[04:48:40] *** Quits: meTaAU (admin@moz-69EF0319.lns20.per1.internode.on.net) (Ping timeout)
[04:48:41] *** Quits: ecl3ctic (ecl3ctic@578C64B6.F0F44EFA.76AE55C1.IP) (Quit: Leaving)
[04:48:48] <erickt> iopq: are you in the bay area? mozilla has a space in mountain view, we could probably host something down there sometime
[04:48:55] <cmr> erickt: do you know if Jemaculus turned up? (He should have asked for stickers...)
[04:49:27] <erickt> cmr: not sure. I didn't hear anyone asking about stickers
[04:49:29] <cmr> ok
[04:50:02] <erickt> embiggen!
[04:50:12] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[04:50:32] <huon> https://github.com/sfackler/syntax-ext-talk/blob/gh-pages/simple-ext/lib.rs
[04:50:40] <erickt> huon++
[04:50:50] <erickt> aatch: ping
[04:50:58] <aatch> erickt, pong
[04:51:00] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[04:51:18] *** Joins: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net)
[04:51:22] <erickt> aatch: hey there! I was going to try to formally announce the next meetup. pick a topic? 
[04:51:49] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[04:51:57] <aatch> erickt, I was planning on talking about the region/borrowing system.
[04:52:13] <erickt> k
[04:52:16] <cmr> ooh ambitious
[04:53:36] <cmr> <3 soft failure
[04:55:09] <aatch> basically looking at it being half introduction to lifetimes/regions and half ranting about how it important it is for garbage collection-less memory safety.
[04:55:17] *** Joins: Jarrett_ (chatzilla@moz-465FA06E.dhcp.rvsd.ca.charter.com)
[04:55:35] *** Quits: Jarrett (chatzilla@moz-465FA06E.dhcp.rvsd.ca.charter.com) (NickServ (GHOST command used by Jarrett_))
[04:55:38] *** Jarrett_ is now known as Jarrett
[04:55:39] <cmr> aatch: some intuition on what it actually does (borrowck, that is) would be pretty nice too
[04:55:41] *** Quits: mauricioc (mauricioc@A6903506.BF40BC51.2F0EC0E9.IP) (Quit: leaving)
[04:55:56] <cmr> sure scopes lifetimes etc
[04:55:56] *** Quits: geomyidae_ (uid214@moz-E77DEB21.irccloud.com) (Quit: Connection closed for inactivity)
[04:56:01] <cmr> but that's very handwavey :p
[04:56:08] <iopq> erickt: yeah, south bay
[04:56:15] <huon> aatch: I'd like a full rant; red-faced and spittle flying everywhere
[04:56:26] <huon> all text in all caps
[04:56:28] <huon> etc.
[04:56:57] <aatch> huon, i don't think I can manage that.
[04:57:37] *** Joins: meTaAU (admin@moz-703A81B1.lns20.per1.internode.on.net)
[04:57:50] <huon> aatch: :'(
[04:57:57] <huon> I'll be forever disappointed
[04:58:20] <erickt> aatch: are you local or remote?
[04:58:24] <aatch> remote
[04:58:33] <aatch> I'm in NZ
[04:59:02] *** Joins: rusty_banger (andrewmorr@moz-DCEC0170.hsd1.co.comcast.net)
[04:59:09] <aatch> sweet, clang does have the warning I thought it did.
[04:59:11] <cmr> ⚠ Warning! ⚠
[04:59:24] <Yurume> Achtung! 
[04:59:25] *** Quits: meTaAU (admin@moz-703A81B1.lns20.per1.internode.on.net) (Ping timeout)
[04:59:31] <cmr> Die blinkenlights...
[04:59:57] <cmr> gasp, is http://blinkenlights.nl/ down??
[05:00:05] <tjc> wfm
[05:00:14] <cmr> sad for me :(
[05:00:34] <o11c> down for me
[05:00:49] <Yurume> down for me too
[05:00:52] *** Joins: heftig_ (heftig@moz-3EB488C6.dip0.t-ipconnect.de)
[05:01:02] *** Quits: heftig (heftig@moz-8D7EC5B9.dip0.t-ipconnect.de) (Ping timeout)
[05:01:07] <o11c> I'm in western USA ...
[05:01:08] <cmr> isup.me says it's up
[05:01:19] <tjc> perhaps you are using a firewall that blocks AWESOME
[05:01:29] <photex> hello folks, I'm interested in experimenting with serial port communication
[05:01:29] <cmr> apparently.
[05:01:32] <photex> will I have to dip into the libc module for this?
[05:01:35] <rusty_banger> Hi all. I'm trying to build an application that links against libgps targeting ARM processors. I've got it working on my x86_64 debian machine, but when I try to link against an ARM version of libgps.so that I built using a build root toolchain, it complains that it can't find symbols from librt.so, libm.so, etc. How can I get it to link against an ARM version of libgps?
[05:01:38] <cmr> photex: not necessarily!
[05:01:38] <huon> :( I have to go... looks like I'm watching the rest as a recording
[05:01:53] <photex> cmr that's encouraging!
[05:02:03] <cmr> photex: you only need to if you decide you need to call into libc itself.
[05:02:19] <cmr> I don't know if you need to or not.
[05:02:39] *** Joins: meTaAU (admin@moz-32B66530.lns20.per2.internode.on.net)
[05:02:44] <photex> I didn't see anything specifically related to serial communications or setting properties on the port
[05:02:54] <photex> so I assumed I'd have to use fnctl
[05:03:12] <cmr> ah, yeah, there's not any bindings for it
[05:03:18] <cmr> if that's what you need you'll have to use libc :(
[05:03:21] <photex> and then I'm not sure how libUV handles serial ports (if at all) so I'd still have to use read
[05:03:28] <cmr> you can use libnative
[05:03:31] <photex> libnative
[05:03:42] <photex> ok, I'll check the docs
[05:03:42] <cmr> see http://static.rust-lang.org/doc/master/guide-runtime.html
[05:03:51] <cmr> (crate docs: http://static.rust-lang.org/doc/master/native/index.html)
[05:04:01] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[05:04:21] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[05:05:31] <photex> thanks cmr I'll explore a bit 
[05:05:50] <cmr> sfackler: good presentation!
[05:06:44] *** Quits: heftig_ (heftig@moz-3EB488C6.dip0.t-ipconnect.de) (Ping timeout)
[05:07:18] <ChrisMorgan> rusty_banger: are you cross-compiling?
[05:07:38] <rusty_banger> Yup. From my x86_64 Debian machine to my armhf Raspbian machine.
[05:08:12] <rusty_banger> That's the source of the problem. I can compile for the host machine with no problem, and I can compile a trivial program for the target machine with no problem. It's just linking against the target libgps that I can't figure out.
[05:09:22] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[05:09:53] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[05:10:02] *** Quits: Peng (mnordhoff@moz-D5175E95.mattnordhoff.net) (Ping timeout)
[05:10:17] *** Joins: Peng (mnordhoff@moz-D5175E95.mattnordhoff.net)
[05:11:33] *** Joins: bmu (chatzilla@moz-A87574A6.hsd1.pa.comcast.net)
[05:11:53] <ChrisMorgan> Luqman: any hints for rusty_banger? I haven't tried linking native libs in but I suspect you may have a notion on the matter.
[05:12:17] <ChrisMorgan> rusty_banger: there's also the option of using an armhf build of rustc
[05:12:17] <cmr> should just be #[link(name="gps")] extern { }
[05:12:25] * cmr reads context
[05:12:35] <rusty_banger> cmr: that part is working i.e. the linker gets the libgps flag
[05:12:40] <rusty_banger> or sorry the -lgps flag
[05:12:56] <cmr> ah ok
[05:12:58] <cmr> yeah
[05:13:07] <ChrisMorgan> And -L/path/to/appropriate/directory?
[05:13:13] <rusty_banger> but if I include the -L flag it needs to find the version of the library I have,
[05:13:13] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[05:13:28] <rusty_banger> then the linker says that libgps.so can't find librt.so and libm.so and a few others that it needs
[05:13:36] <rusty_banger> then fails on missing symbols like strncmp etc.
[05:13:37] <rusty_banger> basic stuff
[05:13:40] <ChrisMorgan> Oh, yeah. Forgot that part of your message.
[05:13:59] <ChrisMorgan> I would have thought that -L was additive rather than replacing things.
[05:14:02] <rusty_banger> Let me boot up my Debian virtual machine that I'm developing on and make a gist with my rustc call and error messages
[05:14:09] <ChrisMorgan> Maybe in cross-compiling it doesn't work so well…
[05:14:38] <cmr> whoa test-shard
[05:14:40] <cmr> who even knew
[05:14:55] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[05:15:17] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Ping timeout)
[05:16:51] *** Quits: nitivermagupta (nitivermag@moz-15FCB70D.hsd1.ca.comcast.net) (Client exited)
[05:17:39] *** Quits: jyyou (jyyou@moz-47B052FA.cs.nctu.edu.tw) (Ping timeout)
[05:17:50] *** Joins: heftig_ (heftig@moz-3EB488C6.dip0.t-ipconnect.de)
[05:20:08] <rusty_banger> https://gist.github.com/anonymous/9223932
[05:20:11] *** Joins: nitivermagupta (nitivermag@moz-15FCB70D.hsd1.ca.comcast.net)
[05:20:44] <rusty_banger> I've actually copied libgps.so into my rust libs dir
[05:21:29] <rusty_banger> \/usr/local/lib/rustlib/arm-unknown-linux-gnueabihf/lib
[05:21:31] *** Joins: jyyou (jyyou@moz-47B052FA.cs.nctu.edu.tw)
[05:21:42] *** Joins: meTaAU_ (admin@moz-36B51573.lns20.per1.internode.on.net)
[05:21:43] <cmr> rusty_banger: is libgps a rust crate?
[05:21:44] *** Quits: meTaAU (admin@moz-32B66530.lns20.per2.internode.on.net) (Ping timeout)
[05:21:48] <rusty_banger> negative
[05:21:56] <cmr> ok thought so, just checking
[05:22:05] <rusty_banger> just a .so that my build root attempts created
[05:22:11] *** Joins: chenyang (user@moz-DD9AF39A.airbears2.berkeley.edu)
[05:22:23] <rusty_banger> I do have a gps.rs file that provides the FFI
[05:22:30] <rusty_banger> that works on my x86_64 install
[05:22:53] *** Quits: alan_andrade (alan_andra@moz-C07D5168.p2p.sfo1.mozilla.com) (Input/output error)
[05:22:56] <rusty_banger> https://github.com/morrowa/tahoe-pi/blob/master/gps.rs
[05:23:09] <rusty_banger> (you can see the rest of the project there too, it's really simple right now)
[05:23:17] <cmr> oh I think this might be the "linker arguments are reordered because they're stored in a hashset"
[05:23:36] <cmr> rusty_banger: but try adding an -lc ...
[05:23:51] <cmr> are those functions actually defined seomwhere by the platform?
[05:24:12] <rusty_banger> cmr: the gps_open gps_read gps_close? Yeah they're in libgps.so/gps.h
[05:24:29] <rusty_banger> I don't know anything about -lc
[05:24:30] *** Quits: heftig_ (heftig@moz-3EB488C6.dip0.t-ipconnect.de) (Ping timeout)
[05:24:31] <erickt> signing off! thanks for watching
[05:24:39] *** Quits: erickt (Adium@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: Leaving.)
[05:25:22] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[05:25:26] <cmr> rusty_banger: no I mean strlcpy etc
[05:25:33] <cmr> rusty_banger: the symbols the linker says it can't find
[05:25:41] <cmr> -lc links to the C stdlib
[05:26:32] <rusty_banger> ok so I would pass --link-args -lc to rustic?
[05:26:38] <cmr> yeah that's one way.
[05:26:40] <rusty_banger> rustc that is, 
[05:27:02] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[05:27:23] *** Joins: alan_andrade (alan_andra@moz-C07D5168.p2p.sfo1.mozilla.com)
[05:27:56] <bvssvni> is there an include_file macro in Rust?
[05:28:27] <rusty_banger> cmr: same error
[05:28:52] <rusty_banger> says it can't find litrt.so.0, libm.so.0, libc.so.0 that libgps.so needs
[05:29:19] <rusty_banger> could the problem be that a different toolchain built my libgps.so than the rustc toolchain I'm using?
[05:29:51] <cmr> bvssvni: include!() to pull it in as rust source, include_str!() as a string.
[05:29:58] <cmr> and include_bin!() for byte array.
[05:30:03] <cmr> rusty_banger: could be.
[05:30:29] <rusty_banger> how would I build libgps with my rustc toolchain? Or is there a way I can link on the target machine?
[05:30:51] *** Joins: heftig_ (heftig@moz-3EB488C6.dip0.t-ipconnect.de)
[05:30:55] <bvssvni> cmr: thanks!
[05:31:18] <cmr> not really sure. Luqman would likely know more.
[05:32:05] *** Joins: lpy (lpy@665181D6.D58093C6.8C13C571.IP)
[05:32:13] <bvssvni> cmr: and string and byte array as well! that is awesome
[05:32:25] <rusty_banger> well, it's late here, so I'm giving up for the day, but I'll give it another shot tomorrow. thanks for the help!
[05:32:26] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Quit: Leaving...)
[05:33:04] <canhtak> hi rust dev's ! the pr #12562 add struct inheritance, so i have a question, if the struct s2 inherit of the struct s1, does s2 share the methods implemented for s1, or s2 share only the fiels of the struct s1?
[05:33:13] <cmr> whaaat
[05:33:22] *** Quits: rusty_banger (andrewmorr@moz-DCEC0170.hsd1.co.comcast.net) (Quit: rusty_banger)
[05:33:27] <cmr> whoaaaaa
[05:33:33] <cmr> nrc: you are insanely awesome.
[05:33:43] <cmr> nrc: I truly wasn't expecting that anywhere near 1.0
[05:34:04] <Jarrett> ?
[05:34:06] <cmr> canhtak: only fields, for now.
[05:34:11] <cmr> Jarrett: https://github.com/mozilla/rust/pull/12562
[05:34:11] *** Joins: aravindavk (aravinda@moz-BD0CADEE.redhat.com)
[05:34:15] *** Joins: earlzlap (earlz@5B1FE501.78CAA20E.2F043D47.IP)
[05:34:26] <cmr> canhtak: http://smallcultfollowing.com/babysteps/blog/2013/10/24/single-inheritance/ is the (more detailed) design
[05:34:27] <canhtak> ok. maybe methods later ?
[05:34:27] <Jarrett> wow 8V
[05:34:41] <canhtak> cmr: okay thanks
[05:34:41] *** Quits: thesnowdog (doug@4CFC6F56.8E46834.6F17036B.IP) (Ping timeout)
[05:35:12] *** Quits: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca) (Input/output error)
[05:35:27] *** Joins: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca)
[05:37:34] * huon hopes we consider https://github.com/mozilla/rust/issues/9912#issuecomment-36073562 before making a final decision about inheritance
[05:38:20] <MP2E> the great pyramid of rust! :P
[05:38:24] <MP2E> @pull request
[05:40:34] <ChrisMorgan> Now we get to the absolutely fundamental question which will doubtless divide the community in twain, never to speak to one another again: `struct X : Y` or `struct X: Y`?
[05:41:06] <cmr> huon: oh good I love counterproposals.
[05:41:10] <MP2E> the great whitespace wars begin
[05:41:14] <cmr> ChrisMorgan: we already settled on it with trait inheritannce
[05:41:21] <cmr> trait Foo: A + B { .. }
[05:41:46] <nrc> cmr: yeah only fields, and no subtyping
[05:41:59] <cmr> nrc: still awesome.
[05:42:02] <nrc> cmr: thanks *blushes*
[05:42:08] <cmr> subtyping isn't needed, we have transmute ;p
[05:42:14] <ChrisMorgan> http://smallcultfollowing.com/babysteps/blog/2013/10/24/single-inheritance/ used " : ", as it appears nrc has, despite ": " being what I understood to be the preferred choice.
[05:42:33] <cmr> nmatsakis: heretic! unbeliever!
[05:42:57] <nrc> ChrisMorgan: hmm, is there a difference? The whitespace?
[05:43:01] <ChrisMorgan> nrc: yes
[05:43:02] <cmr> precisely.
[05:43:33] <nrc> why does it matter?
[05:43:40] <cmr> that's the point
[05:43:48] <ChrisMorgan> nrc: WHY DOES IT MATTER!?
[05:45:16] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[05:46:07] *** Joins: sankha93 (sankha93@71F19D4F.49C43973.1C37C358.IP)
[05:46:56] *** Quits: meTaAU_ (admin@moz-36B51573.lns20.per1.internode.on.net) (Ping timeout)
[05:47:23] *** Joins: meTaAU (admin@moz-E64252B7.lns20.per2.internode.on.net)
[05:47:47] *** Quits: geoffhill (geoffhill@moz-95FF7399.members.linode.com) (Quit: )
[05:47:59] <bvssvni> if it does not matter, then remove the whitespace then :P
[05:48:09] <MP2E> remove all the whitespace!
[05:48:31] <cmr> eugh that was a prevailing style around 0.5 at least in some code I read.
[05:48:34] <cmr> it was awful
[05:48:44] <cmr> fn foo<T:Bar, ...>
[05:48:44] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[05:48:50] <cmr> and of course modes.
[05:49:01] <bvssvni> what??
[05:49:03] <MP2E> heh ugh
[05:49:19] <bvssvni> there should be ": "
[05:49:19] *** Quits: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca) (Input/output error)
[05:49:25] <cmr> yes there should be! :)
[05:49:41] <nrc> I guess I subconsciously settled on ": " for typing and " : " for inheritance
[05:49:53] <nrc> and a bucket of hate for struct initialisers
[05:50:04] <cmr> heh
[05:50:14] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[05:50:21] <ChrisMorgan> Well, I put a comment on the appropriate part of the pretty printer in the PR.
[05:50:25] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[05:50:54] *** Joins: diverse (diverse@moz-ED94B8D.oc.oc.cox.net)
[05:51:11] <ChrisMorgan> nrc: why the bucket of hate for struct initialisers?
[05:51:37] <cmr> clearly it should be field :value
[05:51:41] <cmr> as that's the only remaining choice.
[05:51:44] *** Joins: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca)
[05:51:48] *** Quits: Erik_ (Erik_S@moz-EFEC8E5D.hlrn.qwest.net) (Ping timeout)
[05:51:56] *** Quits: dougxxx (dougxxx@moz-2801788.perm.iinet.net.au) (Client exited)
[05:52:11] *** Joins: james4k (james@moz-9BB5AE72.consolidated.net)
[05:52:31] *** Joins: dougxxx (dougxxx@moz-2801788.perm.iinet.net.au)
[05:53:22] <nrc> ChrisMorgan: what is wrong with `=`?  It looks like something to do with types when it isn't, grinds my gears for some reason
[05:53:35] <nrc> s/it/`:`
[05:53:42] <ChrisMorgan> Ah. Now I understand what you're getting at.
[05:53:45] <cmr> nrc: it isn't symetric with struct declaration
[05:54:01] <cmr> there's a principle that declaration and use should be (near) identical.
[05:54:07] *** Quits: huon (Thunderbir@B11C0778.D5A1DCF.37681C44.IP) (Quit: huon)
[05:54:18] *** Quits: meTaAU (admin@moz-E64252B7.lns20.per2.internode.on.net) (Ping timeout)
[05:54:20] *** Joins: huon (Thunderbir@B11C0778.D5A1DCF.37681C44.IP)
[05:54:35] <nrc> nor is the current syntax `name : type` and `name : expr` - you're not replacing the type with the expr
[05:54:48] <bjz> struct Foo { value: T } is fine. but Foo { value = x } is kinda neat
[05:55:07] <cmr> nrc: sure it is, they look the same, regardless of what they're doing.
[05:55:17] <ChrisMorgan> nrc: *aren't* you just replacing the ty with the expr?
[05:55:21] <bjz> (for initialization that is)
[05:55:35] <nrc> cmr: exactly! if things _are_ different, they should look different
[05:55:58] <cmr> nrc: so what do we do for patterns, where most things mean their inverse?
[05:56:00] <nrc> ChrisMorgan: no, types are purely compile-time, values are purely runtime
[05:56:06] <bjz> nrc: like `=` for updating mutable values. instead of something like `<-`
[05:56:25] <nrc> cmr: `=` too
[05:56:26] * ChrisMorgan had presumed syntax was all that was under question
[05:56:44] <cmr> nrc: no I don't mean that, I mean `match foo { Struct(a, b) => { ... } }`
[05:56:49] <cmr> it looks like construction but it isn't
[05:56:57] <ChrisMorgan> bjz: a <- b == a < (-b)
[05:57:02] <nrc> ChrisMorgan: yes, but they are the syntax of two different things - one is the struct type, one is a struct value
[05:57:15] <nrc> bjz: I don't understand
[05:57:40] <nrc> cmr: I don't understand, either :-p
[05:57:44] *** Quits: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca) (Ping timeout)
[05:58:26] *** Quits: dougxxx (dougxxx@moz-2801788.perm.iinet.net.au) (Client exited)
[05:58:43] *** Joins: dougxxx (dougxxx@moz-2801788.perm.iinet.net.au)
[05:58:44] *** Joins: meTaAU (admin@moz-B18E551A.lns20.per1.internode.on.net)
[05:58:55] <bjz> nrc: you use `=` in a let binding. but you can also use `=` for in-place updating of a mutable variable
[05:58:58] *** Joins: benjamin_____ (benjamin@moz-15335B53.dip0.t-ipconnect.de)
[05:59:25] <cmr> let (a, b) = (6, 7); let x = Struct(a, b); let Struct(a, b) = x;
[05:59:40] <cmr> nrc: we have two different uses of `Struct(a, b)`, meaning entirely different things!
[06:00:10] <bvssvni> when it's on the left side of '=' it means the inverse
[06:00:13] *** Joins: maxli (maxli@moz-EE42E0E.student.cs.uwaterloo.ca)
[06:00:31] <cmr> well when it's a pattern
[06:00:38] <cmr> it's also fn args, match arms
[06:00:41] *** Joins: edwardw (edwardw@BB690835.D7DB55D8.50B134B9.IP)
[06:00:45] <cmr> but that's my point
[06:00:48] <bvssvni> just like *x = 3
[06:00:48] <cmr> it's a *good* symmetry.
[06:00:58] <bjz> cmr: yeah
[06:00:59] <nrc> cmr, bjz: I don't see the connection with : vs = for struct  initialisers/patterns, sorry
[06:01:15] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[06:01:18] * nrc might be being dense
[06:01:34] *** Quits: meTaAU (admin@moz-B18E551A.lns20.per1.internode.on.net) (Ping timeout)
[06:01:41] *** Quits: tjc (tjc@moz-791C24B0.phlapa.east.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[06:01:45] <cmr> struct Foo { name: Type }
[06:01:49] <cmr> let x = Foo { name: value }
[06:01:56] * bjz thinks that it might be better for people to formalise their ideas coherently in writing
[06:02:04] <cmr> let Foo { name: newname } = x;
[06:02:30] <cmr> same syntactic "form", 3 different times, 3 different meanings.
[06:02:42] <cmr> one type declaration, one construction, one destructuring
[06:03:27] <nrc> so, my 'proposal' is in the cases where the rhs is a type, use `:`, where the rhs is an expression (including expression variables) use `=`
[06:03:46] *** Joins: meTaAU (admin@moz-61C1AA33.lns20.per2.internode.on.net)
[06:04:02] <nrc> construction and destruction should be symetric, types are different
[06:04:11] <cmr> perhaps, perhaps.
[06:04:24] *** Joins: tjc (tjc@moz-791C24B0.phlapa.east.verizon.net)
[06:04:24] *** ChanServ sets mode: +o tjc
[06:04:25] * cmr thinks the shed is a fine color as it is
[06:04:33] *** Joins: whitglint (uid15486@moz-31ABA2C0.irccloud.com)
[06:04:56] <MP2E> THE SHED IS BROKEN BECAUSE IT IS RED FIX IT TO BE BLUE
[06:04:57] <bvssvni> nrc: that makes sense
[06:05:12] *** Joins: frogzilla (Mibbit@14310444.B9CCEC14.CC1A2609.IP)
[06:05:17] <nrc> this is purely hypothetical, I doubt I will be able to persuade anybody that a far-reaching syntax change for the sake of aesthetics is going to fly at this stage
[06:05:42] <MP2E> well it's not 1.0 yet, can't hurt to suggest
[06:06:05] <nrc> not without a working rust-fix at any rate
[06:06:20] * nrc might do, might do, ....
[06:06:28] <cmr> need a working pretty printer first
[06:06:31] <cmr> have fun with *that*
[06:06:36] *** Quits: meTaAU (admin@moz-61C1AA33.lns20.per2.internode.on.net) (Ping timeout)
[06:06:45] <nrc> yeah, quite :-(
[06:06:56] <ChrisMorgan> nrc: yeah, can you fix up the problems with the pretty printer next?
[06:07:00] <cmr> heh
[06:07:02] <ChrisMorgan> Pretty please?
[06:07:10] *** Quits: tjc (tjc@moz-791C24B0.phlapa.east.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[06:07:17] * nrc suspects it is not a 1.0 priority
[06:07:23] <cmr> can you rewrite metadata while you've got the shears out :P
[06:07:31] <nrc> sadly, since I think it would be fun to work on
[06:07:34] * ChrisMorgan had a notion that it was actually considered important for 1.0
[06:07:41] <nrc> the pretty printer?
[06:07:48] <nrc> or rust-fix
[06:07:49] <cmr> rust-fix for 1.0 would be nice.
[06:08:03] <bvssvni> what is rust-fix?
[06:08:05] * cmr -> bed
[06:08:05] <ChrisMorgan> The pretty printer. But that was probably just wishful thinking causing incorrect memory recall…
[06:08:06] *** Joins: simon_m (Mibbit@moz-23BE1D62.range217-44.btcentralplus.com)
[06:08:29] <cmr> bvssvni: hypothetical tool to help fix broken code when libraries or syntax changes.
[06:08:31] <ChrisMorgan> bvssvni: an equivalent to tools like gofix for Go, rope for Python.
[06:08:45] *** Quits: WebeWizard (WebeWizard@moz-7CCD1DAE.ks.ks.cox.net) (Connection reset by peer)
[06:08:50] <MP2E> ooh nice
[06:08:56] <dougxxx> rope for python? O_o
[06:09:00] <ChrisMorgan> cmr: you forgot the ability to assist in *making* such refactorings in the first place.
[06:09:12] <ChrisMorgan> dougxxx: http://rope.sourceforge.net/
[06:09:21] <dougxxx> I know what it is, its just nothing like gofix is it?
[06:09:25] <dougxxx> It's a refacotring library
[06:09:30] <ChrisMorgan> Yeah. Just like gofix.
[06:09:42] <MP2E> gofix refactors code
[06:09:51] <dougxxx> oh? I thought it just fixed bugs.
[06:09:55] <ChrisMorgan> You might *think* gofix is just for language changes, but refactoring code is actually the only really important thing it does.
[06:10:04] <ChrisMorgan> The two are one and the same, really.
[06:10:18] <dougxxx> not really. rope is an external api for refactoring code
[06:10:19] <ChrisMorgan> Just one at the token level and one at the AST level.
[06:10:20] <dougxxx> eg for code editors
[06:10:32] <dougxxx> gofix just fixes stuff; althopugh it refactors internally
[06:10:51] <dougxxx> (but I'm all for a refactoring rust lbirary, that would be awesome sauce)
[06:10:58] <dougxxx> *library
[06:11:18] <ChrisMorgan> Rope only operates at the AST level, as it were. gofix operates mainly at the AST level but can also do things at the token level.
[06:12:03] <ChrisMorgan> The concepts and principles that they are operating upon are the same.
[06:12:51] <dougxxx> refactoring > fixing things, but in principle I see the point your making., true enough.
[06:12:56] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[06:13:22] <ChrisMorgan> dougxxx: "fixing things" is just language-level refactoring ☺
[06:13:22] *** Quits: frogzilla (Mibbit@14310444.B9CCEC14.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[06:13:56] <dougxxx> true, but if it exposes an application level api instead of just a command line one, that's really useful.
[06:14:53] *** Quits: chenyang (user@moz-DD9AF39A.airbears2.berkeley.edu) (Ping timeout)
[06:15:23] *** Quits: aravindavk (aravinda@moz-BD0CADEE.redhat.com) (Ping timeout)
[06:15:41] *** Joins: tjc (tjc@moz-791C24B0.phlapa.east.verizon.net)
[06:15:41] *** ChanServ sets mode: +o tjc
[06:16:21] *** Quits: bvssvni (Mibbit@moz-C4579D6F.bb.online.no) (Quit: http://www.mibbit.com ajax IRC Client)
[06:16:22] *** Joins: meTaAU (admin@moz-57E7BF79.lns20.per2.internode.on.net)
[06:16:39] *** Joins: bvssvni (Mibbit@moz-C4579D6F.bb.online.no)
[06:16:58] *** Quits: simon_m (Mibbit@moz-23BE1D62.range217-44.btcentralplus.com) (Quit: http://www.mibbit.com ajax IRC Client)
[06:21:28] *** Quits: orospakr (orospakr@moz-A57EF4CD.cpe.net.cable.rogers.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[06:23:13] <ChrisMorgan> Can someone please remove A-pretty from https://github.com/mozilla/rust/issues/9217?
[06:23:20] <ChrisMorgan> (No idea why it's labelled thus.)
[06:24:02] *** Quits: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP) (Quit: colinsurprenant)
[06:24:46] <huon> done
[06:24:59] <ChrisMorgan> Thanks.
[06:25:01] *** Quits: jeaye (jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[06:25:03] *** Joins: ndrei (avo@5958B30C.7CEC4B5E.866E0A25.IP)
[06:25:04] *** Quits: q66 (q66@2F16E09C.27945D6F.B1AA2106.IP) (Quit: Leaving)
[06:25:18] *** Quits: meTaAU (admin@moz-57E7BF79.lns20.per2.internode.on.net) (Ping timeout)
[06:25:20] *** Joins: meTaAU_ (admin@moz-2FC748E8.lns20.per2.internode.on.net)
[06:26:03] *** Joins: Valloric (Valloric@moz-288722BA.hsd1.ca.comcast.net)
[06:26:09] *** Quits: zmthy (zmthy@moz-C2881CC3.ecs.vuw.ac.nz) (Quit: leaving)
[06:26:11] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[06:26:54] <Valloric> anyone willing to answer a question about visibility?
[06:27:07] *** Quits: alan_andrade (alan_andra@moz-C07D5168.p2p.sfo1.mozilla.com) (Input/output error)
[06:27:17] <nrc> Valloric: sure, if I can
[06:27:27] <Valloric> ok, so let's say I have module Foo
[06:27:31] <Valloric> and I want to test it
[06:27:41] <Valloric> I know I can create module Test
[06:27:48] <Valloric> and put it directly in module Foo
[06:27:53] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[06:27:59] <Valloric> and the tests will see the private names of Foo
[06:28:02] <Valloric> BUT
[06:28:10] *** Quits: meTaAU_ (admin@moz-2FC748E8.lns20.per2.internode.on.net) (Ping timeout)
[06:28:18] <Valloric> I don't want to put my tests in the same file as the code, I want them in a separate file
[06:28:25] <Valloric> but I still want to see the privates of Foo
[06:28:28] <Valloric> how do I do this?
[06:28:48] <bvssvni> Valloric: use the include macro?
[06:28:49] <nrc> you can do that, just name the module in the Foo file
[06:29:02] <Valloric> there's an include macro?
[06:29:04] <nrc> and create a file tests.rs
[06:29:29] <Valloric> nrc: please continue
[06:29:30] <bvssvni> Valloric: it is in prelude (just use include!("file.rs"))
[06:29:59] <Valloric> bvssvni: thanks, I'll keep that in mind, but I'd rather avoid transcluding code
[06:30:04] <nrc> i.e., in Foo.rs `... mod tests;' and then put the tests in tests.rs
[06:30:13] <nrc> I imagine that is what include! does
[06:30:17] *** Joins: meTaAU (admin@moz-3596502A.lns20.per1.internode.on.net)
[06:30:23] <huon> submodules can see the private details of their parent modules
[06:30:37] <huon> (include just includes it straight inline, without creating a new module, aiui)
[06:30:40] <Valloric> so if I just have "mod tests;" in foo.rs
[06:30:48] <Valloric> and then tests.rs has the test code
[06:30:54] <huon> yes
[06:30:57] <Valloric> tests.rs code can see privates in foo.rs?
[06:31:01] <huon> yes
[06:31:20] <Valloric> isn't it a bit weird to have a lone "mod tests;" in the foo.rs file?
[06:31:27] <huon> not really?
[06:31:29] <Valloric> looks like dead code
[06:31:39] <huon> `#[cfg(test)] mod tests;` maybe?
[06:31:52] <Valloric> that makes more sense
[06:32:00] <nrc> Valloric: that is the standard way to declare a submodule
[06:32:01] *** Joins: orospakr (orospakr@moz-4514BEF2.cpe.teksavvy.com)
[06:32:13] <nrc> ah, yes, I forgot about the cfg thing
[06:32:51] <Valloric> ok, I'll try this out; thanks everyone!
[06:33:56] *** Joins: avsej_ (avsej@D9A610B8.4841F515.FB33447D.IP)
[06:34:17] *** Joins: mib_s12pf4 (Mibbit@moz-C71FE5D.hsd1.ca.comcast.net)
[06:34:26] *** Quits: tjc (tjc@moz-791C24B0.phlapa.east.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[06:36:10] *** Quits: lpy (lpy@665181D6.D58093C6.8C13C571.IP) (Client exited)
[06:37:12] *** Quits: meTaAU (admin@moz-3596502A.lns20.per1.internode.on.net) (Ping timeout)
[06:37:20] *** Quits: mib_s12pf4 (Mibbit@moz-C71FE5D.hsd1.ca.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[06:37:41] *** Joins: meTaAU (admin@moz-4768FEFF.lns20.per1.internode.on.net)
[06:38:07] *** Joins: pradeep (pradeep@5AB4884B.FCC4549.14D5B978.IP)
[06:39:35] *** Joins: dmillerw (Dylan@moz-C3AA498B.eugn.qwest.net)
[06:39:37] *** Joins: Ferreus (ferreus@moz-12866AD5.dip0.t-ipconnect.de)
[06:40:04] *** Quits: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net) (Quit: Taking a nap.)
[06:45:03] *** Quits: avsej (avsej@D9A610B8.4841F515.FB33447D.IP) (Quit: Ex-Chat)
[06:45:15] *** Joins: chenyang (user@moz-83728A1C.hsd1.ca.comcast.net)
[06:46:15] *** Quits: cceckman (cceckman@92D36DB2.17A0D1EC.B7830B68.IP) (Ping timeout)
[06:47:15] *** Joins: erickt (Adium@moz-C07D5168.p2p.sfo1.mozilla.com)
[06:47:18] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[06:47:32] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[06:48:07] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[06:48:08] *** Joins: alan_andrade (alan_andra@9BAE160D.B329E60.1B55CB72.IP)
[06:48:21] *** Quits: fournm (Aria@moz-ABB60BA0.austin.res.rr.com) (Quit: Leaving)
[06:48:31] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[06:48:43] *** Joins: aravindavk (aravinda@moz-BD0CADEE.redhat.com)
[06:48:44] *** flaper87|afk is now known as flaper87
[06:49:06] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[06:49:48] *** Quits: alan_andrade (alan_andra@9BAE160D.B329E60.1B55CB72.IP) (Ping timeout)
[06:50:37] *** Quits: zztr (Thunderbir@moz-CA50D606.dsl.static.sonic.net) (Quit: zztr)
[06:50:49] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[06:51:05] *** Quits: earlzlap (earlz@5B1FE501.78CAA20E.2F043D47.IP) (Ping timeout)
[06:51:34] * ChrisMorgan is trying feeding *.rs from the rust repo through rustc --pretty normal
[06:51:37] *** Joins: alan_andrade (alan_andra@9BAE160D.B329E60.1B55CB72.IP)
[06:51:52] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[06:51:56] *** Quits: heftig_ (heftig@moz-3EB488C6.dip0.t-ipconnect.de) (Quit: Quitting)
[06:52:41] *** Joins: mbx (mbebenita@moz-B45FE61C.hsd1.ca.comcast.net)
[06:52:46] *** Joins: glaebhoerl (glaebhoerl@moz-3590251D.kabelnet.hu)
[06:52:50] *** Joins: brendan (brendaneic@BBB21EE2.F6F8CE9D.1DA58BFC.IP)
[06:52:51] <ChrisMorgan> Hmm. Rust seems to allow a regular function argument named `self`? I didn't think it did. Certainly --pretty normal doesn't.
[06:52:56] <huon> ChrisMorgan: previously you'd end up with several hundred spaces before the last line (I think that's been fixed)
[06:53:04] <ChrisMorgan> huon: yeah, that was fixed ages ago
[06:53:18] *** Quits: alan_andrade (alan_andra@9BAE160D.B329E60.1B55CB72.IP) (Ping timeout)
[06:53:22] *** Quits: sankha93 (sankha93@71F19D4F.49C43973.1C37C358.IP) (Client exited)
[06:53:56] <huon> coolcool
[06:53:58] <ChrisMorgan> I guess src/librustc/middle/typeck/infer/test.rs is dead code, never actually used.
[06:54:15] <huon> never `mod`'d?
[06:54:23] <ChrisMorgan> For it has two `self` arguments (lines 104, 117) and a syntax error on line 182.
[06:54:26] <ChrisMorgan> Yeah.
[06:54:29] <huon> haha
[06:54:43] *** Joins: alan_andrade (alan_andra@9BAE160D.B329E60.1B55CB72.IP)
[06:54:46] *** Quits: voxpopuli (fanservice@D91450A9.CF1EC41D.689607DE.IP) (Ping timeout)
[06:55:00] <ChrisMorgan> That's another type of dead code check that we need.
[06:55:41] *** Quits: alan_andrade (alan_andra@9BAE160D.B329E60.1B55CB72.IP) (Input/output error)
[06:55:58] *** Joins: marc_ (uid5324@moz-31ABA2C0.irccloud.com)
[06:56:30] <ChrisMorgan> Should I remove it or just report an issue?
[06:57:46] <huon> report an issue and cc nikomatsakis (or submit a PR with the same cc)
[07:00:20] *** Quits: erickt (Adium@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: Leaving.)
[07:02:20] *** Joins: erickt (Adium@moz-C07D5168.p2p.sfo1.mozilla.com)
[07:03:51] *** Quits: dmillerw (Dylan@moz-C3AA498B.eugn.qwest.net) (Quit: Leaving)
[07:03:53] *** Quits: erickt (Adium@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: Leaving.)
[07:04:56] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[07:05:46] *** Quits: orospakr (orospakr@moz-4514BEF2.cpe.teksavvy.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[07:06:05] *** Joins: eddyb (eddy@moz-41DB10DA.residential.rdsnet.ro)
[07:07:25] <ChrisMorgan> There, https://github.com/mozilla/rust/issues/12564 (the particular instance) and https://github.com/mozilla/rust/issues/12565 (adding a lint)
[07:07:31] *** Joins: _Y_ (chatzilla@moz-3D976F70.dynamic.isp.telekom.rs)
[07:08:11] <ChrisMorgan> Good, that gets my --pretty normal spree past that one and onto an ICE at src/librustc/middle/typeck/variance.rs.
[07:08:42] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[07:08:53] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[07:08:58] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[07:10:28] <ChrisMorgan> Ok(task 'rustc' failed at 'assertion failed: !curr_line.contains_char('\n')', /home/chris/vc/rust/src/libsyntax/parse/comments.rs:274)
[07:10:51] *** Quits: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) (Connection reset by peer)
[07:11:06] *** Joins: gmjosack (gary@moz-CB7AA3B8.hsd1.ca.comcast.net)
[07:11:22] <Valloric> ~"foo".bytes() produces an iterator yielding bytes, but is there a way to get an iterator producing (byte, byte_index) tuples? (without me zipping two iterators by hand?)
[07:11:35] <Valloric> basically, something like Python's enumerate() func
[07:11:35] <ChrisMorgan> Valloric: .enumerate() is (index, T)
[07:11:44] <Valloric> of course there is...
[07:11:58] <Valloric> why can't I find it then...
[07:12:13] *** Quits: aravindavk (aravinda@moz-BD0CADEE.redhat.com) (Ping timeout)
[07:12:13] *** Joins: ofeldt- (ofeldt@moz-7B293231.dip0.t-ipconnect.de)
[07:12:16] <huon> it's a method on the Iterator trait
[07:12:27] <gmjosack> http://static.rust-lang.org/doc/master/std/iter/trait.Iterator.html#method.enumerate
[07:12:27] <huon> http://static.rust-lang.org/doc/master/std/iter/trait.Iterator.html#method.enumerate
[07:13:04] *** Joins: dwrensha (chatzilla@moz-445F8B42.hsd1.ca.comcast.net)
[07:13:11] *** Quits: ofeldt (ofeldt@moz-8C588031.dip0.t-ipconnect.de) (Ping timeout)
[07:13:24] <Valloric> found it
[07:13:45] <Valloric> Rust is really an awesome language, but the API docs are freaking difficult to navigate
[07:14:14] <huon> there's search, btw
[07:14:21] <ChrisMorgan> Which normally works.
[07:14:24] *** Joins: lpy (lpy@665181D6.D58093C6.8C13C571.IP)
[07:14:26] <huon> (at the top of the page)
[07:14:30] <huon> and sometimes doesn't
[07:14:33] * ChrisMorgan just had to say that
[07:14:37] <Valloric> sure, but knowing how to go from name "foo" to name "bar" is not always trivial
[07:15:03] <Valloric> for instance, looking at StrSlice
[07:15:09] <Valloric> there's no len() method
[07:15:22] <huon> yeah, and even harder is going from action <x> to name "bar" :)
[07:15:25] <Valloric> but I saw a snippet of someone calling len() on ~str
[07:15:27] <ChrisMorgan> Just remember: StrSlice is *not* &str. It's a trait that &str implements.
[07:15:31] <Valloric> I know
[07:15:33] <Valloric> but that's my point
[07:15:43] <Valloric> good luck finding all the stuff you can get from ~str
[07:15:49] <ChrisMorgan> It is a problem that the built-in types don't have a good reference of what they implement.
[07:15:57] <Valloric> _exactly_
[07:16:27] <Valloric> Rust also sorely lacks a "standard use-cases doc"
[07:16:27] <huon> fwiw, this is a known bug
[07:16:31] <Valloric> like what Dart has
[07:16:35] <huon> http://static.rust-lang.org/doc/master/complement-cheatsheet.html
[07:17:08] <gmjosack> i've found the docs to be better than expected considering how rapidly things change
[07:17:17] <gmjosack> once i find them :)
[07:17:26] <Valloric> thanks huon
[07:17:30] <Valloric> never saw that page
[07:17:37] <Valloric> needs to be more fleshed out though
[07:17:57] <Valloric> this is what I'm talking about: https://www.dartlang.org/dart-by-example/
[07:18:29] <ChrisMorgan> Ah HAH! The pretty printer can't cope with a block comment with more than two asterisks and nothing more on the line :-)
[07:18:31] <Valloric> it's the second thing under the "Docs" menu on the Dart page, the first being "Tutorials"
[07:18:31] *** Joins: aravindavk (aravinda@moz-BD0CADEE.redhat.com)
[07:18:35] * ChrisMorgan will report that after tea
[07:18:43] *** Quits: ndrei (avo@5958B30C.7CEC4B5E.866E0A25.IP) (Ping timeout)
[07:18:53] *** Joins: Jesse (jruderman@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[07:19:05] <edwardw> IIRC, brson said he'll hire someone to revamp docs?
[07:19:20] *** Joins: brson (brson@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[07:19:20] *** ChanServ sets mode: +ao brson brson
[07:19:28] <Valloric> anyway, off to use enumerate; thanks everyone!
[07:19:32] <edwardw> so here he comes
[07:19:34] *** Quits: nitivermagupta (nitivermag@moz-15FCB70D.hsd1.ca.comcast.net) (Client exited)
[07:19:44] <huon> edwardw: magic powers
[07:19:54] <edwardw> huon: indeed
[07:19:54] *** Joins: nitivermagupta (nitivermag@moz-15FCB70D.hsd1.ca.comcast.net)
[07:21:35] *** Quits: nitivermagupta (nitivermag@moz-15FCB70D.hsd1.ca.comcast.net) (Ping timeout)
[07:21:40] <edwardw> I must screenshot it :)
[07:22:35] *** Quits: angdev (angdev@16F167B.4C57D258.D8E8354F.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[07:23:22] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[07:23:32] *** Joins: newbie82 (kvirc@moz-98A4B5CB.dip0.t-ipconnect.de)
[07:23:43] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[07:24:06] *** Quits: newbie (kvirc@moz-E97035B0.dip0.t-ipconnect.de) (Ping timeout)
[07:25:07] *** Joins: ndrei (avo@5958B30C.7CEC4B5E.866E0A25.IP)
[07:25:09] *** Quits: lpy (lpy@665181D6.D58093C6.8C13C571.IP) (Ping timeout)
[07:25:59] *** Quits: aravindavk (aravinda@moz-BD0CADEE.redhat.com) (Ping timeout)
[07:26:05] <eddyb>  (e) { print(e.toString()); // I forgot how cute Dart closures look
[07:26:40] <eddyb> it's basically our closure syntax, with () instead of || - hmm, not sure which I like more now
[07:27:01] <pradeep> Hi. I'm trying to write an iterator over Option<~[T]>. I'm trying to store the vec iterator in a struct OptIterator and then implement Iterator for that struct.
[07:27:13] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[07:27:32] <eddyb> pradeep: hmm, why?
[07:27:32] <pradeep> However, I keep getting errors like "borrowed value does not live long enough".
[07:27:47] <eddyb> that is, why are you writing your own iterator?
[07:27:49] *** Joins: fabiand (fabiand@moz-F6C11C35.adsl.alicedsl.de)
[07:28:07] <pradeep> eddyb: there are a couple of cases in Servo where we have Option<~[T]>
[07:28:14] <eddyb> .iter().flat_map(|v| v.iter())
[07:28:18] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[07:28:47] *** Joins: matp (matp@moz-16FE1E05.matp.at)
[07:28:53] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[07:28:57] *** Joins: lpy (lpy@665181D6.D58093C6.8C13C571.IP)
[07:29:19] *** Quits: bmu (chatzilla@moz-A87574A6.hsd1.pa.comcast.net) (Ping timeout)
[07:29:37] <eddyb> pradeep: anyways, is there any semantic difference between None and Some(~[])?
[07:29:47] <eddyb> if it's just an optimization, you can use Vec<T> instead
[07:29:57] <pradeep> no
[07:30:07] <pradeep> it's just for convenience
[07:30:09] <eddyb> (which doesn't allocate when it's empty) - oh, wait, servo is behind, it will have to wait
[07:30:21] <pradeep> yeah... there's a FIXME there :)
[07:30:51] <eddyb> just try that flat_map trick above
[07:30:59] <pradeep> yeah! it works! :)
[07:31:06] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[07:31:24] <eddyb> don't spend time building bridges you're going to burn :P
[07:32:27] <Valloric> what's the Rust version of typedef?
[07:32:37] <eddyb> type X = FooBar;
[07:32:41] <Valloric> ty
[07:32:54] <eddyb> or rather, type Foo = Bar;
[07:32:56] *** Quits: brendan (brendaneic@BBB21EE2.F6F8CE9D.1DA58BFC.IP) (Quit: brendan)
[07:33:26] <Valloric> it might be a good idea to have the string "typedef" occur somewhere in the Rust manual near this "type" thing
[07:33:55] <eddyb> well, it's a type alias
[07:34:05] <eddyb> weaker than a C/C++ typedef
[07:34:13] <Valloric> sure, but ctrl-f "type" yields a ton of things
[07:34:16] <Valloric> :)
[07:34:23] <eddyb> hehe, true
[07:34:25] <pradeep> eddyb: thanks... I had no idea about flat_map
[07:34:31] *** Joins: ecl3ctic (ecl3ctic@578C64B6.F0F44EFA.76AE55C1.IP)
[07:34:56] *** Joins: thesnowdog (doug@8BC5A90F.CDB23781.6F17036B.IP)
[07:35:00] <eddyb> Valloric: did you take a look at the Rust mini-guide for C++ programmers?
[07:35:18] <eddyb> I think anyone can edit that wiki page, so if something is missing, feel free to add it :)
[07:35:22] *** Quits: Jesse (jruderman@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: Jesse)
[07:36:34] <Valloric> eddyb: I think I have; I'll keep it in mind for possible future edits
[07:36:48] *** Quits: huon (Thunderbir@B11C0778.D5A1DCF.37681C44.IP) (Ping timeout)
[07:36:51] *** Quits: brson (brson@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Ping timeout)
[07:40:38] *** Joins: huon (Thunderbir@B11C0778.D5A1DCF.37681C44.IP)
[07:41:34] <Valloric> so when enumerate() returns an iterator yielding (uint, T)... what exactly is this "pair"? a Tuple2?
[07:41:52] <eddyb> a (T, U)
[07:41:59] <Valloric> and that is?
[07:41:59] <eddyb> rust has first-class tuples <3
[07:42:10] <Valloric> so what is std::tuple::Tuple2?
[07:42:19] <eddyb> a trait with methods for (T, U) tuples
[07:42:25] <Valloric> ah
[07:42:44] <Valloric> so reaching my actual question, I can get the first value with .val0()
[07:42:51] <Valloric> (other than matching of course)
[07:43:07] <eddyb> yeah, but matching is much simpler
[07:43:20] <eddyb> for (i, x) in foo.iter().enumerate() {...}
[07:43:53] <Valloric> ah, but my func is taking such an enumerated iterator
[07:44:12] <Valloric> and wants to iter.map(|&x| x.val0())...
[07:44:26] <eddyb> |(i, x)|
[07:44:39] <Valloric> freaking hell, that's brilliant
[07:45:14] <Valloric> yeah, and then I can use |(i, _)| i
[07:45:27] <Valloric> thanks eddy!
[07:45:44] *** Quits: claudiu (claudiu@moz-33191099.thefacebook.com) (Input/output error)
[07:46:00] *** Quits: huon (Thunderbir@B11C0778.D5A1DCF.37681C44.IP) (Ping timeout)
[07:46:04] *** Joins: claudiu (claudiu@moz-33191099.thefacebook.com)
[07:46:10] *** Joins: huon (Thunderbir@B11C0778.D5A1DCF.37681C44.IP)
[07:46:14] *** Quits: ndrei (avo@5958B30C.7CEC4B5E.866E0A25.IP) (Ping timeout)
[07:46:59] *** Quits: Jarrett (chatzilla@moz-465FA06E.dhcp.rvsd.ca.charter.com) (Ping timeout)
[07:47:11] *** Joins: ndrei (avo@5958B30C.7CEC4B5E.866E0A25.IP)
[07:47:41] *** Quits: maxli (maxli@moz-EE42E0E.student.cs.uwaterloo.ca) (Ping timeout)
[07:47:45] *** Quits: claudiu (claudiu@moz-33191099.thefacebook.com) (Ping timeout)
[07:47:52] *** Joins: victorporof_ (victorporo@moz-FFB76956.cpe.net.cable.rogers.com)
[07:47:53] *** Quits: kris (kris@moz-6D20263F.fullrate.dk) (Ping timeout)
[07:48:02] *** Joins: brendan (brendaneic@BBB21EE2.F6F8CE9D.1DA58BFC.IP)
[07:48:03] *** Quits: victorporof (victorporo@moz-FFB76956.cpe.net.cable.rogers.com) (Ping timeout)
[07:48:41] *** Quits: Valloric (Valloric@moz-288722BA.hsd1.ca.comcast.net) (Quit: Valloric)
[07:49:30] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[07:49:32] *** Joins: daschl (Adium@moz-DC6DE6E2.vie.surfer.at)
[07:49:56] *** Joins: kris (kris@moz-E5D06D.dk.customer.tdc.net)
[07:49:58] *** Joins: aravindavk (aravinda@moz-BD0CADEE.redhat.com)
[07:50:23] *** Joins: marianoguerra (marianogue@moz-F51F5323.dip0.t-ipconnect.de)
[07:51:10] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[07:53:16] *** Quits: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[07:54:16] *** Joins: Ms2ger (Ms2ger@B30DC609.F9DEE48B.187A1082.IP)
[07:54:18] *** Quits: lpy (lpy@665181D6.D58093C6.8C13C571.IP) (Client exited)
[07:54:20] *** Quits: Lovot (root@moz-64ED673A.knology.net) (Quit: Lost terminal)
[07:55:45] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[07:56:31] *** Quits: brendan (brendaneic@BBB21EE2.F6F8CE9D.1DA58BFC.IP) (Quit: brendan)
[07:56:49] *** Quits: dwrensha (chatzilla@moz-445F8B42.hsd1.ca.comcast.net) (Ping timeout)
[07:57:34] *** Joins: nitivermagupta (nitivermag@moz-15FCB70D.hsd1.ca.comcast.net)
[07:57:47] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[07:57:47] *** ChanServ sets mode: +ao pcwalton pcwalton
[07:58:46] *** Joins: dwrensha (chatzilla@moz-445F8B42.hsd1.ca.comcast.net)
[07:58:57] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[08:01:55] *** Quits: csherratt_ (csherratt@moz-7685819.cpe.teksavvy.com) (Quit: csherratt_)
[08:02:14] *** Joins: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca)
[08:03:10] *** Quits: patpat (patpat@moz-1599AAE4.as13285.net) (Ping timeout)
[08:03:29] *** Quits: fabiand (fabiand@moz-F6C11C35.adsl.alicedsl.de) (Quit: Verlassend)
[08:03:33] *** Joins: fabiand (fabiand@moz-F6C11C35.adsl.alicedsl.de)
[08:03:57] *** Quits: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca) (Ping timeout)
[08:04:31] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[08:04:56] *** Quits: canhtak (canhtak@moz-8C86DA1D.wl.t.ulaval.ca) (Quit: canhtak)
[08:04:59] *** Joins: kngl (Adium@40AE2BF6.ABCDAFD6.7C797F8E.IP)
[08:05:22] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[08:05:25] *** Joins: popinman322 (MagiSun@moz-DB516D62.twcny.res.rr.com)
[08:05:36] *** Quits: popinman322 (MagiSun@moz-DB516D62.twcny.res.rr.com) (Quit: Leaving.)
[08:05:49] <pradeep> eddyb: I'm trying to return the iterator from a function (e.g., child_iter()) so that we can use `for x in self.child_iter()`... that's when I get the borrowed value does not live long enough error. Any suggestions?
[08:06:02] *** Quits: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net) (Quit: Sharp)
[08:06:23] <eddyb> pradeep: what's the code?
[08:06:51] <Eridius> pradeep: if the iterator has a reference, it has a lifetime. You need to tie the lifetime of the returned value to your parameter (presumably self)
[08:07:42] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[08:07:59] *** Quits: edwardw (edwardw@BB690835.D7DB55D8.50B134B9.IP) (Quit: Leaving...)
[08:08:05] *** Quits: cdidd (cdidd@moz-515E016F.broadband.corbina.ru) (Input/output error)
[08:08:46] *** Quits: urbanserj (urbanserj@3E28BD5F.398BF19F.86BD9C9E.IP) (Ping timeout)
[08:09:26] <pradeep> eddyb: `descendants: Option<~[Option<~Flow>]>`. I want a descendant_iter that will iterate over Flows that are Some()
[08:09:54] <eddyb> pradeep: so what's your function that returns the iterator?
[08:10:13] *** Quits: kngl (Adium@40AE2BF6.ABCDAFD6.7C797F8E.IP) (Quit: Leaving.)
[08:10:31] <eddyb> having a reference to descendants with a lifetime of 'a should be enough to allow you to construct the entire iterator
[08:11:02] <pradeep> eddyb: I'm not able to write the return type of the function. I tried using an anonymous function for testing but that gave the error.
[08:11:08] <huon> .iter().flat_map(|v| v.iter().filter_map(|opt_f| opt_f.as_ref().map(|f| &**f)))
[08:11:15] * huon wonders if he got that right
[08:11:24] <pradeep> omg! 
[08:11:26] *** Joins: cdidd (cdidd@moz-B33117CA.broadband.corbina.ru)
[08:11:27] <eddyb> huon: hah, that's what I was thinking :D
[08:11:43] <eddyb> pradeep: it's just flat_map and filter_map
[08:11:50] <pradeep> .iter().flat_map(|v| v.iter().flat_map(|y| y.iter()))
[08:11:53] <pradeep> should work
[08:12:01] <eddyb> that's more complicated
[08:12:03] <huon> oh, yeah
[08:12:14] <pradeep> flat_map rocks! But I don't know how to write the type of this
[08:12:20] <eddyb> pradeep: look at the docs :P
[08:12:38] <huon> FlatMap<..., FlatMap<...>>
[08:12:50] <huon> or just trigger a compiler error to get it to tell you want the exact type is
[08:12:57] <pradeep> I get something huge like x: std::iter::FlatMap<,&std::option::Option<int>,std::vec::VecIterator<,std::option::Option<int>>,std::option::OptionIterator<&int>>{iter: std::vec::VecIterator<,std::option::Option<int>>{ptr: (0x7fb6c8000e10 a\
[08:12:58] *** Quits: kris (kris@moz-E5D06D.dk.customer.tdc.net) (Ping timeout)
[08:12:59] *** Joins: kris (kris@moz-147EE6DF.diku.dk)
[08:13:01] <pradeep> s *()), end: (0x7fb6c8000e50 as *()), lifetime: None}, f: fn(&std::option::Option<int>) -> std::option::OptionIterator<&int>, frontiter: None, backiter: None}
[08:13:07] <huon> heh
[08:13:07] <eddyb> lol no
[08:13:25] <pradeep> when I tried to print the value. How to cast it as an &Iterator? That's where I had the borrowed value errors
[08:13:35] <eddyb> you don't cast it to &Iterator
[08:14:04] <eddyb> rusti: let x = Some(~[Some(0)]); let () = x.iter().flat_map(|v| v.iter().flat_map(|y| y.iter()));
[08:14:07] -rusti- pastebinned 5 lines of output: http://ix.io/aKy
[08:14:24] *** Joins: brendan (brendaneic@BBB21EE2.F6F8CE9D.1DA58BFC.IP)
[08:14:26] *** Quits: nitivermagupta (nitivermag@moz-15FCB70D.hsd1.ca.comcast.net) (Client exited)
[08:14:38] <eddyb> rusti: let x = Some(~[Some(0u)]); let () = x.iter().flat_map(|v| v.iter().flat_map(|y| y.iter()));
[08:14:39] *** Quits: brendan (brendaneic@BBB21EE2.F6F8CE9D.1DA58BFC.IP) (Quit: brendan)
[08:14:40] -rusti- pastebinned 5 lines of output: http://ix.io/aKz
[08:16:27] <eddyb> pradeep: FlatMap<'static,&'a ~[Option<uint>],option::Item<&'a ~[Option<T>]>,FlatMap<'static,&'a Option<uint>,vec::Items<'a,Option<T>>,option::Item<&'a T>>>
[08:16:38] <eddyb> 'static is the lifetime for those closures
[08:16:59] <eddyb> 'a is the lifetime of the original reference to descendants
[08:17:49] <eddyb> pradeep: filter_map instead of flat_map would replace the last option::Item<&'a T> with &'a T
[08:18:15] <pradeep> thanks... so should I use this whole type as the return type or is there way to write it more cleanly?
[08:18:27] <eddyb> there isn't a nicer way
[08:18:46] <eddyb> there have been proposal for anonymour return types, bound by contracts
[08:18:48] <pradeep> isn't the interface to it an Iterator, so shouldn't there be some way to look at the value only in terms of an Iterator
[08:19:04] <eddyb> like => Iterator<&'a T>
[08:19:12] <eddyb> *proposals *anonymous
[08:19:33] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[08:19:36] <eddyb> in this case, you can spell out the entire return type
[08:19:47] <eddyb> if you have an anonymous type, you couldn't
[08:20:21] *** Joins: dmac1 (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[08:20:21] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Connection reset by peer)
[08:20:34] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Quit: csherratt)
[08:20:37] <pradeep> eddyb: ok, thanks for your help... I was trying to clean up some repetitive code. This may not be worth it, though :P
[08:20:55] *** Joins: mawuli (mawuli@moz-C2456CD.com.gh)
[08:21:45] *** Joins: ricepuddin (graham@moz-7D68765A.cable.virginm.net)
[08:22:16] <huon> pradeep: you can use `type DescendentIter<'a> = ....;` so you don't have to write it out multiple times
[08:24:50] *** Joins: lunaryorn (lunaryorn@moz-2DE1BD3D.dynamic.mnet-online.de)
[08:24:58] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[08:25:36] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:25:36] *** Joins: arielb1 (Mibbit@moz-5172D3AC.cs.tau.ac.il)
[08:27:36] *** Joins: frza (frza@EA5BFF77.2B9073C9.204B78AE.IP)
[08:27:42] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[08:28:10] *** Joins: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net)
[08:29:25] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[08:31:22] *** Joins: Zr40 (zr40@EE4BB9F5.926C319A.BE2F4011.IP)
[08:32:27] *** Joins: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com)
[08:33:48] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[08:34:04] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[08:34:04] *** ChanServ sets mode: +ao pcwalton pcwalton
[08:34:29] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[08:35:14] *** Quits: fhahn (fhahn@moz-7924DB5C.vie.surfer.at) (Ping timeout)
[08:38:19] *** Joins: vgeddes (vincent.ge@moz-D8D4FE4D.dsl.mweb.co.za)
[08:38:53] *** Joins: alkino (alkino@moz-F4D3BCB1.w92-151.abo.wanadoo.fr)
[08:39:44] *** Quits: lunaryorn (lunaryorn@moz-2DE1BD3D.dynamic.mnet-online.de) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[08:40:14] *** Quits: dwrensha (chatzilla@moz-445F8B42.hsd1.ca.comcast.net) (Ping timeout)
[08:41:43] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[08:41:45] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:41:49] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Quit: Computer has gone to sleep.)
[08:41:53] *** Quits: sawrubh (uid6719@moz-5F4AA75A.irccloud.com) (Quit: Connection closed for inactivity)
[08:42:13] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[08:42:31] *** pmoore|away is now known as pmoore
[08:42:50] *** Joins: urbanserj (urbanserj@3E28BD5F.398BF19F.86BD9C9E.IP)
[08:43:05] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[08:43:53] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[08:44:37] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[08:45:10] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[08:46:46] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[08:46:51] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Ping timeout)
[08:51:38] *** Quits: dpanth3r (dinofelis@228444B8.6B06001A.BB6F225C.IP) (Ping timeout)
[08:52:38] *** Joins: yati (yati@256C4EF.71019FF.CA052C06.IP)
[08:53:22] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[08:54:06] <yati> Hi. Does matching on an objects member make it immutable in the body of the match? e.g., match somehashmap.find_mut(&somekey) { ... => { /* somehashmap.insert(...) is not allowed here? */ }, _ => {} }
[08:54:50] *** Quits: hacker_sam (hacker_sam@moz-8F2DB428.public.wayport.net) (Client exited)
[08:55:06] <Ms2ger> That would mean two mutable borrows of somehashmap at the same time, no?
[08:55:10] *** Joins: hacker_sam (hacker_sam@moz-8F2DB428.public.wayport.net)
[08:55:28] <Ms2ger> I don't think that'll work
[08:55:40] *** Joins: arturo (Thunderbir@moz-E83B14F0.superkabel.de)
[08:55:58] <Ms2ger> Especially since it looks like find_mut returns a pointer into the hashtable
[08:56:06] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[08:56:08] *** Quits: huon (Thunderbir@B11C0778.D5A1DCF.37681C44.IP) (Connection reset by peer)
[08:56:10] <Ms2ger> And insert could invalidate the pointer
[08:56:57] <eddyb> it would be nice if it would let you use the HashMap if you don't touch the pointer you got from it earlier
[08:57:14] <eddyb> there is an issue about lexical borrowing scopes, that may have something to do with this
[08:58:12] <arielb1> Can you get mutable access to more then 1 member of a hashmap?
[08:58:15] <arielb1> at the same time?
[08:58:27] <eddyb> that wouldn't be safe
[08:58:40] <arielb1> (distinct elements)
[08:58:47] <eddyb> unless you can somehow restrict it to distinct - yeah
[08:58:50] *** Joins: huon (Thunderbir@B11C0778.D5A1DCF.37681C44.IP)
[08:59:23] <eddyb> you would need to have a method on HashMap to expose this functionality... it would be hard :/
[08:59:33] <arielb1> hard because?
[08:59:49] <eddyb> what do you do if the user provides identical keys?
[08:59:56] <arielb1> return None
[09:00:00] <yati> hmm. I guess it does make sense now, but as huon said yesterday, the error message it throws does not really help - I mean I for one had to really squint and figure out that matching on the hashmap could be a reason I'm not allowed to insert in it within the match.
[09:00:19] <eddyb> yati: match x {...} keeps x alive for the entirety of the match statement
[09:00:28] <Ms2ger> Usually :)
[09:00:41] <eddyb> Ms2ger: post-rvalue
[09:00:43] <Ms2ger> I don't think that one soundness error is fixed yet
[09:00:49] <huon> yati: people (well, person) are working on improving the error messages relating to lifetimes right now
[09:00:55] <arielb1> Say fn(&'a mut self, k: &[&K]) -> Option([&'a mut V])
[09:01:07] <huon> (although I'm not 100% sure if they'll get to those kind of borrowing ones.)
[09:01:08] <yati> huon, :)
[09:01:23] <eddyb> arielb1: except you can't construct an array like that :P
[09:01:43] <huon> (it's a project they've got this semester for university)
[09:01:51] <eddyb> Option<~[&'a mut V]> would work, though I'm not sure I like the allocation
[09:01:56] *** Quits: FreeFull (freefull@moz-1883929A.as13285.net) (Quit: )
[09:02:16] <arielb1> that's waiting on DST
[09:02:28] <eddyb> Option doesn't have indirection
[09:02:46] <eddyb> Option<unsized T> is unsized itself
[09:02:54] <arielb1> that needs to be fn<n: int>(&'a mut self, k: &[&K, ..n]) -> Option([&'a mut V, ..n])
[09:02:59] <eddyb> and you can't return an unsized value from a function
[09:02:59] *** pmoore is now known as pmoore|away
[09:03:03] <eddyb> arielb1: yeah
[09:03:09] <yati> Or as eddyb said, if the compiler could allow such borrows as long as we've not invalidated any pointer within the hashmap before that
[09:03:20] <eddyb> I was just going to say, using variadic tuples and/or fixed-len vectors would be great for this, but we have neither :(
[09:03:38] <arielb1> that needs DST+Integer parameters
[09:03:45] <eddyb> well, we have fixed-len vectors (arrays, I should say) but you can't be generic over their lenght
[09:03:48] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[09:03:49] <eddyb> arielb1: doesn't need DST
[09:03:51] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[09:03:54] <arielb1> i need to go
[09:03:54] <yati> eddyb, variadic tuples?
[09:03:56] <arielb1> bye
[09:03:57] *** Quits: arielb1 (Mibbit@moz-5172D3AC.cs.tau.ac.il) (Quit: http://www.mibbit.com ajax IRC Client)
[09:04:01] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[09:04:02] <eddyb> DST is for things like Rc<[T]>
[09:04:12] <pradeep> huon: thanks for that. That seems much cleaner!
[09:04:24] <eddyb> yati: yupp, you can restrict them to have only one type, repeated N times
[09:04:49] <eddyb> so with variadic generics, you can implement Vec::new(a, b, c) and HashMap((a, x), (b, y), (c, z))
[09:06:51] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[09:07:04] *** Quits: p1start (rewi@moz-A082F561.adsl.xtra.co.nz) (Ping timeout)
[09:07:05] *** Joins: fhahn (fhahn@moz-7924DB5C.vie.surfer.at)
[09:07:37] <yati> Okay, in the match problem with the borrow, what if there was a function hmap.find_mut_clone(...) or something that clones the matched values and binds to them instead of locking the whole hashmap?
[09:07:58] <eddyb> why mut?
[09:08:10] <eddyb> if it's a clone, it's returned by value, not by reference
[09:08:16] <yati> Hmm
[09:08:18] <yati> right
[09:08:27] <eddyb> and I think we already have something like that
[09:08:40] <eddyb> it really depends what you're storing in the HashMap
[09:09:16] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Quit: Leaving...)
[09:09:17] *** Quits: huon (Thunderbir@B11C0778.D5A1DCF.37681C44.IP) (Ping timeout)
[09:09:48] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[09:10:12] <yati> It wont work for my case anyway - I need references. http://pastebin.com/N7s5t6F5
[09:10:16] *** Quits: mbx (mbebenita@moz-B45FE61C.hsd1.ca.comcast.net) (Ping timeout)
[09:10:44] *** Joins: cceckman (cceckman@moz-135DFDD5.bootp.virginia.edu)
[09:11:04] <yati> You know this matching and recursing is so neat that I feel bad Rust does not have TCO :\
[09:11:21] <eddyb> LLVM does TCO
[09:11:44] <eddyb> if you have cases that don't optimize, it might as well be a bug ;)
[09:11:51] <yati> eddyb, but there's no language level guarantee like, say, scheme or haskell, right?
[09:12:10] <eddyb> Scheme and Haskell need TCO to function
[09:12:27] <eddyb> Rust doesn't, however, it does need a whole load of other optimizations
[09:12:37] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[09:12:57] <eddyb> we can't guarantee most of those optimizations, but having them work is important
[09:13:27] <yati> yeah. right. If I remember correctly, Scala allows you to decorate a function recursive and it will TCO it for you.
[09:13:36] *** Quits: alkino (alkino@moz-F4D3BCB1.w92-151.abo.wanadoo.fr) (Ping timeout)
[09:13:56] <eddyb> so if LLVM doesn't TCO your recursive function, even when it seems like it could, it might be a bug we can fix
[09:13:56] *** Joins: patpat (patpat@96F7484C.A0E34C8E.98F3E2B5.IP)
[09:13:58] <MP2E> yati : https://mail.mozilla.org/pipermail/rust-dev/2013-April/003557.html
[09:14:05] <MP2E> there was a full discussion on TCO already
[09:14:08] <MP2E> that's a great summary right there
[09:14:18] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[09:14:30] <yati> MP2E, Oh thanks :)
[09:14:57] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[09:15:15] *** Quits: sunfish (chatzilla@moz-42DA0C69.dsl.dynamic.sonic.net) (Ping timeout)
[09:15:47] *** Quits: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net) (Quit: killerswan)
[09:16:01] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[09:16:26] *** Joins: arielb1 (Mibbit@moz-5172D3AC.cs.tau.ac.il)
[09:16:28] <bjz> was there a NonSendable token somewhere?
[09:16:30] <yati> Ah so there it is, with a heavy heart :D
[09:16:43] *** Quits: robn (robn@moz-76B0302C.static.internode.on.net) (Quit: Coyote finally caught me)
[09:16:53] *** Joins: robn (robn@moz-76B0302C.static.internode.on.net)
[09:16:59] *** Joins: nical (nico@87C1F78E.1DE10CA8.D8E68FF6.IP)
[09:17:00] *** Quits: arturo (Thunderbir@moz-E83B14F0.superkabel.de) (Ping timeout)
[09:17:22] <bjz> also, was there an attribute for that too?
[09:17:33] *** Joins: fyolnish (fyolnish@moz-F3DC6160.whatbox.ca)
[09:18:29] *** Quits: ulrik (ulrikdamm@moz-E38D4E51.fullrate.dk) (Ping timeout)
[09:20:07] *** Joins: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net)
[09:20:45] *** Joins: jviereck (Adium@moz-2A42986C.ethz.ch)
[09:20:54] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[09:21:48] *** Quits: onelson (owen@18CF7301.95770028.5B6BFE7D.IP) (Ping timeout)
[09:22:31] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[09:22:41] <eddyb> bjz: std::marker
[09:23:04] *** Quits: victorporof_ (victorporo@moz-FFB76956.cpe.net.cable.rogers.com) (Quit: victorporof_)
[09:23:16] <Yurume> std::*kinds*::marker?
[09:23:23] <bjz> eddyb: I can't see it :(
[09:23:38] <Yurume> http://static.rust-lang.org/doc/master/std/kinds/marker/index.html
[09:23:40] <bjz> ohhh!
[09:23:45] <bjz> cheers Yurume 
[09:24:08] *** Quits: Ms2ger (Ms2ger@B30DC609.F9DEE48B.187A1082.IP) (Quit: bbl)
[09:24:47] <eddyb> Yurume: was it moved?
[09:26:31] <Yurume> I don't know whether there were std::marker and it moved to std::kinds or it was std::kinds::marker from the beginning
[09:27:21] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[09:27:51] *** pmoore|away is now known as pmoore
[09:28:07] *** Joins: arturo (Thunderbir@moz-E83B14F0.superkabel.de)
[09:28:14] *** Quits: frza (frza@EA5BFF77.2B9073C9.204B78AE.IP) (Quit: frza)
[09:28:26] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[09:28:32] *** Joins: mbx (mbebenita@moz-B45FE61C.hsd1.ca.comcast.net)
[09:28:44] <mindcat> so I am interesting, what is the rust module, "intrinsics".
[09:29:26] *** Quits: arturo (Thunderbir@moz-E83B14F0.superkabel.de) (Quit: arturo)
[09:29:36] <yati> eddyb, huon, if you please look at the code I just pasted, http://pastebin.com/2prScyLE, The Trie::add() could not be tail recursive, as in lines 32..34, I first have a recursive call and then an insert, the reason being that c needs to be moved out when inserting in the hashmap. Can that be done better?
[09:29:37] <mindcat> I want implement "varint" type
[09:30:06] *** Joins: arturo (Thunderbir@moz-E83B14F0.superkabel.de)
[09:30:24] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[09:30:44] <eddyb> yati: you do realize that using a HashMap in a Trie defeats the purpose of the Trie altogether?
[09:30:55] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[09:30:55] <mindcat> rusti: struct a { data : ~[]}; let b = 1u8; a + b
[09:30:56] -rusti- <anon>:10:29: 10:30 error: expected type, found token RBRACKET
[09:30:56] -rusti- <anon>:10         struct a { data : ~[]}; let b = 1u8; a + b
[09:30:56] -rusti-                                       ^
[09:30:56] -rusti- application terminated with error code 101
[09:31:13] <mindcat> rusti: struct a { data : 2ub}; let b = 1u8; a + b
[09:31:13] -rusti- <anon>:10:27: 10:29 error: expected type, found token LIT_UINT(2u64, TyU)
[09:31:14] -rusti- <anon>:10         struct a { data : 2ub}; let b = 1u8; a + b
[09:31:14] -rusti-                                     ^~
[09:31:14] -rusti- application terminated with error code 101
[09:31:15] <eddyb> yati: though, if it's char-based and you use a cheap Hash, it might work... eeh
[09:31:19] <mindcat> rusti: struct a { data : 2u8}; let b = 1u8; a + b
[09:31:19] -rusti- <anon>:10:27: 10:30 error: expected type, found token LIT_UINT(2u64, TyU8)
[09:31:19] -rusti- <anon>:10         struct a { data : 2u8}; let b = 1u8; a + b
[09:31:20] -rusti-                                     ^~~
[09:31:20] -rusti- application terminated with error code 101
[09:31:20] *** concrete.mozilla.org sets mode: +M 
[09:31:27] <mindcat> oh
[09:31:32] *** Quits: arturo (Thunderbir@moz-E83B14F0.superkabel.de) (Quit: arturo)
[09:32:15] *** Quits: jviereck (Adium@moz-2A42986C.ethz.ch) (Quit: Leaving.)
[09:32:37] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[09:32:37] <eddyb> yati: slice_from doesn't slice by chars
[09:32:55] <eddyb> yati: I think you want a method that gives you the char and its length in bytes
[09:33:38] <eddyb> yati: you need a method that inserts and gives you a mutable reference
[09:33:59] *** Joins: arturo (Thunderbir@moz-E83B14F0.superkabel.de)
[09:33:59] <eddyb> on HashMap, that is
[09:34:16] <eddyb> doing a lookup after an insert is obviously costlier
[09:35:20] <yati> right
[09:35:27] <yati> I need that kind of a method
[09:36:19] *** concrete.mozilla.org sets mode: -M 
[09:36:20] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[09:36:56] *** Quits: diverse (diverse@moz-ED94B8D.oc.oc.cox.net) (Ping timeout)
[09:37:04] *** Joins: sawrubh (uid6719@moz-5F4AA75A.irccloud.com)
[09:37:12] <eddyb> yati: http://static.rust-lang.org/doc/master/collections/hashmap/struct.HashMap.html
[09:37:20] <eddyb> I see three methods returning &mut V
[09:37:51] <eddyb> find_or_insert_with fits you best, I think
[09:38:49] <eddyb> self.children.find_or_insert_with(start, |_| ~Trie::new()).add(string.slice_from(1));
[09:38:53] <eddyb> yati: ^^
[09:39:38] <arielb1> are there issues for integer type parameters and dynamic/erased type parameters?
[09:39:43] <yati> eddyb, yeah that sounds perfect.
[09:39:56] <eddyb> dynamic feels quite impossible in Rust
[09:40:04] <arielb1> dynamic = not monomorphised
[09:40:08] <eddyb> for integer type params... dunno, search around
[09:40:14] *** Quits: dougxxx (dougxxx@moz-2801788.perm.iinet.net.au) (Client exited)
[09:40:20] <eddyb> arielb1: like trait objects?
[09:40:26] <arielb1> but multiple dispatch
[09:40:42] <arielb1> multiple condition
[09:40:45] *** Joins: dougxxx (dougxxx@moz-2801788.perm.iinet.net.au)
[09:40:55] <arielb1> like fn<dynamic T>(&T a, &T b)
[09:41:00] <arielb1> or self
[09:41:05] <arielb1> like fn<dynamic T>(&T a) -> ~T
[09:41:29] <Yurume> multiple dispatch according to the actual type (rather than the trait type), you meant?
[09:41:30] <eddyb> why would you need something like that, in the first place?
[09:41:37] <arielb1> to implement fn<dynamic T>(&T a) -> ~T
[09:41:43] <eddyb> Yurume: sounds impossible
[09:41:53] <eddyb> arielb1: why can't you use monomorphization?
[09:42:23] <arielb1> or fn multiply_matrices<n: Integral, m: Integral, k: Integral>(&Matrix<n,k>, &Matrix<k,m>) -> Matrix<n,k>
[09:42:33] <Yurume> eddyb: it would be possible if vtable has additional informations
[09:42:42] <eddyb> arielb1: that's orthogonal
[09:42:57] <arielb1> without monomorphising multiply_matrices for each type
[09:42:59] <eddyb> integers in generics would still be monomorphized
[09:43:06] <arielb1> for each dimension
[09:43:06] <eddyb> arielb1: then it's useless
[09:43:09] <arielb1> triple
[09:43:23] <eddyb> you either monomorphize
[09:43:29] <eddyb> or you use ~[~[~[T]]]
[09:44:09] <eddyb> (or a flattened matrix with dynamic dimensions, I guess)
[09:44:18] <Yurume> uh, how on the earth is related to the multiple dispatch anyway?
[09:44:24] <eddyb> no idea
[09:44:24] <Yurume> I seem not to follow the discussion
[09:44:36] <eddyb> there isn't a flow
[09:44:42] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[09:44:52] <eddyb> arielb1: Rust will most likely not have a dependent type system
[09:44:56] <arielb1> I meant the dual of multiple dispatch
[09:45:00] <Yurume> arielb1: first, integer type params are orthogonal to multiple dispatch.
[09:45:12] *** Quits: mawuli (mawuli@moz-C2456CD.com.gh) (Client exited)
[09:45:22] *** Joins: jviereck (Adium@moz-5F2A758D.ethz.ch)
[09:45:41] <eddyb> arielb1: any kind of dynamic dispatch means 0 optimizations
[09:45:49] <Yurume> structs/traits with integer type params can be monomorphized or not, at your choice (as much like struct/traits with normal type parameters)
[09:46:00] *** Joins: nitivermagupta (nitivermag@moz-15FCB70D.hsd1.ca.comcast.net)
[09:46:15] <eddyb> we have trait objects. you're not supposed to use them unless monomorphization is impossible in your usecase
[09:46:48] <eddyb> Yurume: non-monomorphized Vec<T, N> smells of dependent type systems
[09:47:30] <Yurume> eddyb: as long as you cannot define fn foo(x: Vec<T,N>) -> Vec<T,N+1> {} or sorta, it is not a dependent type system
[09:47:41] *** Quits: nitivermagupta (nitivermag@moz-15FCB70D.hsd1.ca.comcast.net) (Ping timeout)
[09:47:58] <arielb1> Note that Vec<T,N> -> Vec<T,N+1> can be implemented right now, but inefficiently
[09:48:22] <Yurume> how so? Zero and Succ?
[09:48:23] <arielb1> Using the classic trait Succ<T>: Succ<Succ<T>>
[09:48:30] <eddyb> Yurume: if you can't do that, then it's quite useless
[09:48:34] <eddyb> arielb1: well, no
[09:48:40] <eddyb> that definition won't work
[09:48:46] <arielb1> why?
[09:48:57] <eddyb> because it's recursive
[09:48:57] <Yurume> you cannot prohibit some type params from containing other types than Zero and Succ
[09:49:11] <eddyb> and infinitely so
[09:49:13] <arielb1> you need T: Num for that
[09:49:16] <arielb1> and export it privately
[09:49:22] <eddyb> rusti: trait Succ<T>: Succ<Succ<T>> {}
[09:49:23] -rusti- task 'rustc' has overflowed its stack
[09:49:23] -rusti- Illegal instruction
[09:49:23] -rusti- application terminated with error code 132
[09:49:27] <eddyb> teeheee
[09:49:47] <eddyb> arielb1: what's inefficient about it?
[09:49:54] <Yurume> arielb1: with the same reasoning you can implement Scala's case classes without using enums
[09:49:58] <arielb1> that the Succs aren't passed as actual integers
[09:50:05] <arielb1> but as pointers to integers
[09:50:05] <Yurume> but you actually can't
[09:50:05] <eddyb> the difference is that you can't erase the types
[09:50:21] <eddyb> so you can't pass them as anything
[09:50:38] <eddyb> I, for one, do not want a dependent type system in Rust
[09:50:51] <arielb1> If you use impl Num for Succ<T>
[09:50:58] <eddyb> it's ridiculously complex for such a small gain
[09:51:02] <arielb1> and have Num::get_number
[09:51:31] <eddyb> and we are very slow in accepting features *we need* like variadic generics
[09:51:44] <Yurume> eddyb: I think we will eventually have an integer type param, but only for the fixed size vector and related memory-tight machinaries (fixed-size matrices etc.)
[09:51:55] <eddyb> Yurume: and only with monomorphization
[09:52:00] <Yurume> yeah
[09:52:07] *** Joins: diverse (diverse@moz-ED94B8D.oc.oc.cox.net)
[09:52:26] *** Joins: io2 (io2@moz-EE406A5.home.otenet.gr)
[09:52:38] <arielb1> actually trait Zero: Succ<Zero>, Numeric, trait Succ<T: Numeric>
[09:52:40] *** Quits: io2 (io2@moz-EE406A5.home.otenet.gr) (Quit: )
[09:52:54] <eddyb> Zero: Succ<Zero> seems absurd
[09:53:03] <eddyb> 0 = 1
[09:53:12] <eddyb> it's also recursive
[09:53:20] <eddyb> and uses a trait as a type
[09:53:34] <arielb1> No more then T: Comparable<T>
[09:53:43] <arielb1> which we want
[09:53:54] <eddyb> that looks like a bound
[09:54:01] <eddyb> which is different from trait inheritance
[09:54:16] *** Quits: mbx (mbebenita@moz-B45FE61C.hsd1.ca.comcast.net) (Quit: mbx)
[09:54:27] <arielb1> trait Ident: Comparable<Ident>, say
[09:54:40] <eddyb> not valid today
[09:54:44] *** Quits: thesnowdog (doug@8BC5A90F.CDB23781.6F17036B.IP) (Connection reset by peer)
[09:54:51] <eddyb> only with DST and it probably doesn't mean what you think it does
[09:55:12] <arielb1> what's the problem with it?
[09:55:27] <eddyb> Trait used as a type is an unsized trait object
[09:55:38] <Yurume> arielb1: you are confusing F-bounded polymorphism from traits.
[09:56:07] <eddyb> so type Ref<'a, unsized T> = &'a T; can be used like Ref<Trait> to give you &Trait
[09:56:09] <Yurume> (F-bounded polymorphism is a PL jargon for Java-like type parameter implementation, essentially.)
[09:56:24] <eddyb> Yurume: and Java doesn't have generics
[09:56:29] <eddyb> so it means nil
[09:56:34] <eddyb> yay?
[09:57:05] <Yurume> eddyb: uh, what?
[09:57:14] <eddyb> Java only has Object
[09:57:25] *** Joins: ulrik (ulrikdamm@E000D799.6AFCF91.500EA053.IP)
[09:57:34] <eddyb> which is like Gc<Any> in Rust
[09:57:49] <eddyb> well, maybe a bit like Gc<Many>
[09:57:54] <Yurume> Java language prior to the type erasure has generics
[09:58:09] <eddyb> you can't call them that
[09:58:21] <arielb1> would Zero: Succ<&Zero> be better?
[09:58:21] <Yurume> in some senses, yeah
[09:58:32] <eddyb> arielb1: nope
[09:58:39] <eddyb> first, Zero isn't a trait, it's a type
[09:58:42] <Yurume> but Java's so-called generics is much closer than that of C++
[09:58:50] <Yurume> closer to the actual meaning*
[09:58:59] <eddyb> struct Zero; impl Num for Zero {fn get_num() -> uint {0}}
[09:59:14] <arielb1> I wrote too much java
[09:59:43] <arielb1> I need to remember Trait == Interface, Class == Struct
[09:59:48] *** Joins: thesnowdog (doug@8BC5A90F.CDB23781.6F17036B.IP)
[09:59:58] <eddyb> and even that is still different
[10:00:10] <eddyb> struct Succ<T>; impl<T: Num> Num for Succ<T> {fn get_num() -> uint {Num::<for T>::get_num() + 1}}
[10:00:32] <arielb1> you need Zero: Succ<Zero> for covariance
[10:00:42] <eddyb> that : is highly ambiguous
[10:00:55] <eddyb> and now you can have Succ<Succ<Succ<Succ<Zero>>> which gives you 4 and it's a zero-sized type
[10:01:04] <eddyb> arielb1: and it always says 0 = 1
[10:01:10] <eddyb> pretty sure that's not covariance
[10:01:14] <arielb1> 0 -> 1 -> 2 -> 3 -> 4
[10:01:16] <arielb1> not 1 -> 0
[10:01:49] *** Joins: skade (skade@moz-884B3E4B.web.vodafone.de)
[10:01:54] <eddyb> nope
[10:02:25] <arielb1> Well Succ needs to be covariant
[10:02:34] <eddyb> why does it need to be anything?
[10:03:01] <arielb1> Because we want Zero :> Succ<Zero> :> Succ<Succ<Zero>> :> Succ<Succ<Succ<Zero>>>
[10:03:07] *** Joins: huon (Thunderbir@moz-826BD85A.lns20.syd6.internode.on.net)
[10:03:29] <eddyb> arielb1: how would you use that property?
[10:03:31] <arielb1> So that you can implement struct Index<T: Num>
[10:03:51] *** Joins: [squiddy] (squiddy@moz-7B493F09.dip0.t-ipconnect.de)
[10:04:03] *** Joins: doomlord_ (servitor@moz-99BE89EC.range86-184.btcentralplus.com)
[10:04:05] *** Joins: alexherbo2 (alexherbo2@moz-D3542441.w83-199.abo.wanadoo.fr)
[10:04:10] <eddyb> I'm almost certain you're wrong
[10:04:37] <arielb1> struct Index<covariant N: Num> { u32; }; struct Arrayt<T, non-variant L: Num>;
[10:04:52] <arielb1> or contravariant L: Num
[10:05:00] <eddyb> 1 is Succ<T> with T = Zero
[10:05:19] <eddyb> 3 is Succ<T> with T = Succ<Succ<Zero>>
[10:05:23] <arielb1> and fn index<T, N>(Array<T,N> a, N num)
[10:05:29] <eddyb> 0 is not Succ<T>, but rather Zero
[10:05:47] <eddyb> your definitions are all over the place
[10:06:12] <arielb1> Index should represent  a number smaller then the type param
[10:06:35] <eddyb> wait, so you want Succ<T> to match anything larger than T?
[10:06:43] <eddyb> instead of T + 1?
[10:07:12] <arielb1> Succ<Zero>: Zero would be fine actually
[10:07:18] <arielb1> if we make Index contravariant
[10:07:37] <eddyb> I think you think we have inheritance
[10:07:44] <eddyb> (we don't have structural inheritance)
[10:08:19] <arielb1> Succ<covariant T: Numeric>: Zero to force the variance to start somewhere
[10:08:29] <arielb1> I want Index<Three> to be convertible to Index<Four>
[10:08:34] <arielb1> for all Three < Four
[10:08:53] <eddyb> that would only work with trait objects
[10:09:04] <eddyb> so Three and Four would have to be traits
[10:09:48] <eddyb> and Three would have to inherit from Four
[10:10:00] *** Quits: alexherbo2 (alexherbo2@moz-D3542441.w83-199.abo.wanadoo.fr) (Ping timeout)
[10:10:14] <eddyb> which means Succ<T> inherits from Succ<Succ<T>> which is what you've described earlier and it's impossible
[10:10:31] <eddyb> it means Zero inherits all values from 0 to uint::MAX
[10:10:33] <mindcat> rusti: do 3.times {print("1 ")}
[10:10:34] -rusti- <anon>:10:21: 10:26 error: unresolved name `print`.
[10:10:34] -rusti- <anon>:10         do 3.times {print("1 ")}
[10:10:34] -rusti-                               ^~~~~
[10:10:34] -rusti- error: aborting due to previous error
[10:10:34] -rusti- application terminated with error code 101
[10:10:44] <eddyb> mindcat: do was recently removed
[10:10:52] <eddyb> stop touching it :P
[10:10:53] <mindcat> eddyb: oh
[10:11:00] <arielb1> no
[10:11:04] <arielb1> theres Succ<T> : T
[10:11:09] <arielb1> and Index is contravariant
[10:11:13] <eddyb> arielb1: inheritance only works with traits
[10:11:19] <mindcat> rusti: 3.times(||{println("1")})
[10:11:19] -rusti- <anon>:10:20: 10:27 error: unresolved name `println`.
[10:11:20] -rusti- <anon>:10         3.times(||{println("1")})
[10:11:20] -rusti-                              ^~~~~~~
[10:11:20] -rusti- error: aborting due to previous error
[10:11:20] -rusti- application terminated with error code 101
[10:11:31] <eddyb> and we've removed the free functions from the prelude
[10:11:49] <eddyb> arielb1: so any attempt to model anything using structural inheritance will fail
[10:11:57] <arielb1> free functions?
[10:12:04] <mindcat> hey, where is my print(ln)? functions?
[10:12:05] <eddyb> print and println
[10:12:09] <eddyb> mindcat: use the macros
[10:12:24] <mindcat> rusti: do 3.times {print!("1 ")}
[10:12:25] -rusti- <anon>:10:14: 10:34 error: last argument in `do` call has non-procedure type: ||
[10:12:25] -rusti- <anon>:10         do 3.times {print!("1 ")}
[10:12:25] -rusti-                        ^~~~~~~~~~~~~~~~~~~~
[10:12:25] -rusti- error: aborting due to previous error
[10:12:25] -rusti- application terminated with error code 101
[10:12:38] <mindcat> rusti: 3.times(||{print!("1 ")})
[10:12:40] -rusti- 1 1 1 ()
[10:12:46] <mindcat> alright
[10:12:48] <arielb1> Well then what's the problem with trait Succ<T>: T
[10:12:59] <eddyb> arielb1: T has to be a trait
[10:13:13] <eddyb> trait Succ<trait T>: T {}
[10:13:21] <eddyb> but what does it mean, then?
[10:13:34] <eddyb> (generics over traits aren't in the language btw)
[10:13:35] <arielb1> trait Succ<trait T: Numeric>: Numeric, T {}; trait Zero : Numeric
[10:13:40] <arielb1> {}
[10:13:48] <eddyb> okay, that's more like it
[10:13:58] <arielb1> with Succ covariant over T
[10:13:59] *** Quits: dmac1 (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Quit: Leaving.)
[10:14:21] <eddyb> so Succ<Succ<Zero>> inherits Succ<Zero> which inherits Zero
[10:14:23] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[10:14:26] <arielb1> sure
[10:14:47] <eddyb> so instead of having just generic nesting, you also have inheritance
[10:15:04] *** Quits: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP) (Connection reset by peer)
[10:15:14] <eddyb> so you could use a Succ<Zero> as Zero
[10:15:29] <eddyb> I guess it works for indexing
[10:16:28] <eddyb> and you could use it behind a trait object
[10:16:45] <arielb1> actually that's not as inefficient as I thought it was
[10:17:01] <eddyb> it really depends how many optimizations we want to put into cases like this
[10:17:03] <arielb1> if you can avoid passing the Succ vtable (with erased)
[10:17:19] <eddyb> but as I've said, Rust is most likely never going to get a dependent type system
[10:17:27] <arielb1> Well the matrix multiplication code is written externally
[10:17:29] <arielb1> not in Rust
[10:17:37] <arielb1> it is written in assembly using SIMD
[10:17:44] <arielb1> and you just need to type it properly
[10:17:54] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[10:17:58] *** Joins: frza (frza@EA5BFF77.2B9073C9.204B78AE.IP)
[10:18:00] <eddyb> can't LLVM vectorize matrix multiplication?
[10:18:19] *** Quits: aasmith (aasmith@moz-51A27BE9.hsd1.wa.comcast.net) (Ping timeout)
[10:18:25] *** Quits: morganb (morgan_b_@moz-5EAC75A2.hfc.comcastbusiness.net) (Ping timeout)
[10:18:47] *** Joins: redShadow (redShadow@9BDAF02B.D15F9219.1CCF65D9.IP)
[10:18:48] *** Joins: Ms2ger (Ms2ger@moz-9E90A9B3.ugent.be)
[10:19:01] <arielb1> Well the problem is that this scheme isn't compatible with Rust fixed-length vectors
[10:19:15] <arielb1> But it works for TI
[10:19:22] <arielb1> so adding it should only change codegen
[10:19:26] *** Quits: ndrei (avo@5958B30C.7CEC4B5E.866E0A25.IP) (Ping timeout)
[10:19:30] <arielb1> and not touch the type system
[10:19:47] <eddyb> if it's not monomorphized, there's no benefit other than theoretical soundness
[10:19:52] *** Joins: lucian (lucian@303F9692.4304AE1E.CE5E78F6.IP)
[10:20:03] <arielb1> For the type-checker, [T, ..N] would be just Vec<T,N.
[10:20:07] <arielb1> Vec<T,N>
[10:20:32] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[10:20:41] <arielb1> Of course codegen would optimize properly
[10:20:44] *** Quits: lucian (lucian@303F9692.4304AE1E.CE5E78F6.IP) (Connection reset by peer)
[10:20:55] <eddyb> DST already specifies erasure of [T, ..N] to [T]
[10:20:59] *** Joins: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP)
[10:21:19] <arielb1> but DST can't type multiply_matrices
[10:21:29] <eddyb> you would write code using slices if you don't know the length at compile time
[10:21:53] <eddyb> or generic over the N (when that becomes possible) if you know N at compile time
[10:22:14] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[10:23:50] *** Joins: lunaryorn (lunaryorn@moz-2DE1BD3D.dynamic.mnet-online.de)
[10:23:57] <arielb1> Actually what I really want are arrays of indices
[10:24:12] <arielb1> into another array
[10:24:38] <eddyb> reminds me of fortran's fancy multi-dimensional arrays
[10:24:57] <arielb1> So you can have fn<N>([int, ..N], [Index<N>, ..N])
[10:25:22] <arielb1> and index into the first array without checking
[10:25:24] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[10:25:45] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[10:25:47] <eddyb> arielb1: so you want something like [[[T, ..X], ..Y], ..Z], but erased?
[10:25:57] <arielb1> no
[10:26:04] <arielb1> I want arrays of indices into another array
[10:26:09] *** Joins: alexherbo2 (alexherbo2@moz-F4D73D7E.w83-199.abo.wanadoo.fr)
[10:26:09] <eddyb> it is true that DST doesn't allow more than one erased value
[10:26:23] *** Joins: alinab (alina@moz-94EAE39D.alinab.org)
[10:26:37] <eddyb> arielb1: is that N known at compile-time?
[10:26:41] <arielb1> no
[10:26:48] <eddyb> then something will have to make the check anyways
[10:27:04] <eddyb> like, how do you construct an Index<N> from an arbitrary value?
[10:27:08] <arielb1> You can't
[10:27:17] <arielb1> you have fn(int) -> Option<Index<N>>
[10:27:19] <arielb1> that checks
[10:27:24] <eddyb> LOL
[10:27:25] <arielb1> fn index::from_int
[10:27:37] *** Quits: Ms2ger (Ms2ger@moz-9E90A9B3.ugent.be) (Ping timeout)
[10:27:52] <eddyb> and how is that better than the current situation?
[10:27:54] <arielb1> also probably fn Index::checked_add(Index, Index) -> Option<Index>
[10:28:02] <arielb1> also probably fn Index::checked_add<N>(Index, Index) -> Option<Index<N>>
[10:28:08] <arielb1> the latter fn doesn't need to check
[10:28:15] *** Joins: Ms2ger (Ms2ger@moz-CD126EF7.ugent.be)
[10:28:18] <arielb1> only the fn that creates the array
[10:28:55] <eddyb> you do realize that something like an iterator over &[T] will never do bound checks, right?
[10:29:13] *** Joins: ndrei (avo@5958B30C.7CEC4B5E.866E0A25.IP)
[10:29:13] <arielb1> but that's not random access
[10:29:15] <Yurume> wow, the discussion went wild...
[10:29:24] <eddyb> arielb1: random access is not safe
[10:29:28] <Yurume> just to make things obvious, arielb1, what really do you want?
[10:29:49] <eddyb> Yurume: arielb1 wants optimizations that you can easily get without touching the type system :P
[10:29:50] <mindcat> rusti: fn lol() {while true { task {lol()}};lol()
[10:29:53] -rusti- pastebinned 7 lines of output: http://ix.io/au1
[10:30:06] <Yurume> eddyb: could we just settle with the syntax extension? :S
[10:30:15] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[10:30:17] <eddyb> there's no need to touch the language at all
[10:30:24] <mindcat> rusti: fn lol() {while true { task {lol()}}};lol()
[10:30:24] -rusti- <anon>:10:37: 10:38 error: expected one of `;`, `}` but found `{`
[10:30:25] -rusti- <anon>:10         fn lol() {while true { task {lol()}}};lol()
[10:30:25] -rusti-                                               ^
[10:30:25] -rusti- application terminated with error code 101
[10:30:27] <arielb1> why isn't random access safe
[10:30:44] <eddyb> because you have random indices?
[10:30:44] <arielb1> ?
[10:31:00] <arielb1> and they can be out of range?
[10:31:23] <eddyb> let me put it this way: if you can create a safe index type
[10:31:41] <kimundi> if you know the indices to be in range, you can use the unsafe get() and set() methods that eschew bound checking.
[10:31:47] <eddyb> you also can do if i < v.len() {v[i] + v[i] + v[i]} without doing bound checks
[10:31:55] <eddyb> kimundi: you don't need those in this case
[10:32:01] <arielb1> if i < v.len() is a bound check
[10:32:03] <eddyb> yes
[10:32:11] <eddyb> but you can do as many accesses with i as you want
[10:32:16] <eddyb> without individual bound checks
[10:32:32] <eddyb> having this in the type system is a ridiculous workaround for a general optimization
[10:32:33] <arielb1> can you do a bound check over an array?
[10:32:44] <arielb1> check that ALL elements of an array are bounded
[10:32:49] <arielb1> ?
[10:32:55] <mindcat> rusti: fn lol() {while true { spawn(lol) } }; lol()
[10:32:57] -rusti- <anon>:10:19: 10:44 warning: denote infinite loops with loop { ... }, #[warn(while_true)] on by default
[10:32:57] -rusti- <anon>:10         fn lol() {while true { spawn(lol) } }; lol()
[10:32:57] -rusti-                             ^~~~~~~~~~~~~~~~~~~~~~~~~
[10:32:57] -rusti- application terminated abnormally with signal 9 (Killed)
[10:32:57] <arielb1> and have the compiler recognize it
[10:32:59] <arielb1> ?
[10:33:03] <eddyb> why would you have an array of indices in the first place?
[10:33:04] <kimundi> sure, .iter().all(|x| < arr.len())
[10:33:24] <kimundi> err, .iter().all(|&x| x < arr.len())
[10:33:38] <arielb1> does the optimizer recognize it
[10:33:49] <eddyb> what kimundi said, doubt it
[10:34:06] <eddyb> why would you have an array of indices into another array, though?
[10:34:21] <mindcat> rusti: fn lol() { spawn(wow) };fn wow() {5.times(||{spawn(lol)})};lol()
[10:34:23] -rusti- ()
[10:34:23] -rusti- application terminated abnormally with signal 9 (Killed)
[10:34:47] <arielb1> a permutation
[10:35:03] * mindcat just did a fail try
[10:36:09] <Yurume> :(){:|:&};:?
[10:36:17] *** Joins: ghaering (Instantbir@4DECFBA5.E64A0519.C0DAB1E3.IP)
[10:36:32] <eddyb> arielb1: you can pair a &'a [T] with a &[uint], check it once, then forward all accesses through the non-bounds-checking unsafe_get()
[10:36:52] <arielb1> I don't want to use unsafe
[10:37:25] <eddyb> indexing a vector with one of those erased magic handles would also be implemented unsafely
[10:37:32] <redbrain> is there a reference on the rust ABI? I am trying to make gcc-rust to call into the rust compiled libstd untill i get more of the compiler working for allocating pointers etc
[10:37:48] <eddyb> redbrain: you most likely want to use a C interface to Rust code
[10:38:00] <eddyb> ah, wait, gcc-rust?
[10:38:08] <Yurume> wait, what?
[10:38:14] <redbrain> yeah i am working on a front-end to gcc for rust
[10:38:16] <Yurume> oh
[10:38:18] <mindcat> lol?
[10:38:24] <eddyb> redbrain: IMHO that's a waste of time
[10:38:35] <eddyb> I wouldn't do such a thing even if I was paid
[10:38:36] <Yurume> that sounds like awful lot of work,
[10:38:38] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 30.0a1/20140225030201])
[10:38:50] <eddyb> writing a Rust compiler in C is harder than in Rust
[10:39:03] <redbrain> i already have a fair amount of it working :S
[10:39:20] <eddyb> and you're unlikely to get everything rustc has in a reasonable amount of time
[10:39:27] <Yurume> eddyb: replacing the backend is easier than re-creating everything
[10:39:38] <eddyb> much easier
[10:39:42] <Yurume> I doubt the current rustc is capable of multiple backends though
[10:39:45] <eddyb> and you can clean up trans at the same time
[10:39:45] <Yurume> (practically)
[10:39:56] <redbrain> tbh i see gccrs as who gccgo is to go
[10:40:07] <redbrain> it would provide loads more platform support
[10:40:28] <redbrain> esp in embeded
[10:40:44] <eddyb> making LLVM work on embedded is far more practical
[10:41:33] <redbrain> i am a gcc guy and want to make this so meh i reckon its very doable
[10:41:37] <eddyb> and making rustc::middle::trans use a different backend is also more practical than rewriting the frontend
[10:41:46] <redbrain> in my spare time i've got so much working already 
[10:42:03] <Yurume> redbrain: uh... is your project https://github.com/redbrain/gccrs ?
[10:42:15] <redbrain> Yurume: yes
[10:42:40] <eddyb> redbrain: just my 2 cents, but the Rust community will always consider a Rust compiler written in C inferior to one written in Rust
[10:42:40] <Yurume> are you recreating the frontend? the recent commits seem to suggest that...
[10:42:50] *** Quits: skade (skade@moz-884B3E4B.web.vodafone.de) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[10:42:56] <mindcat> rusti: ~(31u8)
[10:42:57] -rusti- ~31u8
[10:43:16] <redbrain> Yurume: yes because i was using flex and bison as the parser which was a pain still using flex and now my own c parser
[10:43:18] <Yurume> eddyb: not to mention all the middle-"end"s
[10:43:30] <redbrain> Yurume: i dont need a middle-end or back-end
[10:43:39] <redbrain> Yurume: GCC does __all__ this form e
[10:43:48] <redbrain> Yurume: once i parse Rust most of the work is done.
[10:43:52] <Yurume> no!
[10:43:57] <Yurume> absolutely no
[10:43:59] <eddyb> the middle-end in rustc is a front-end
[10:44:19] <mindcat> rusti: let x = 0b10011001;x
[10:44:21] -rusti- 153
[10:44:24] <eddyb> it does high-level semantics
[10:44:34] <Yurume> redbrain: rustc implements the front-end, which is (strangly) divided with three pieces (front-middle-back), and LLVM does the rest .
[10:44:50] <mindcat> my question is how get `x = 0b01100110`?
[10:44:53] <eddyb> only rustc::middle::trans and rustc::back deal with LLVM, ABI, etc.
[10:44:57] <mindcat> a operator
[10:44:58] <redbrain> Yurume: i guess you could argue that with this also because i do alot of data flow to infer types etc
[10:45:11] <Yurume> Rust has considerable amount of semantics, so it has very large semantic analysis passes
[10:45:43] <kimundi> Also, borrowcheck
[10:45:46] <Yurume> if you flawlessly implemented all of them, I'll be really astonished, but practically that would be nearly impossible.
[10:45:48] <mindcat> did rust has such operator to do that?
[10:45:56] <eddyb> mindcat: to do what?
[10:46:04] <mindcat> rusti: let x = 0b10011001;x
[10:46:05] -rusti- 153
[10:46:08] <Yurume> mindcat: 0b10011001 is just an integer literal.
[10:46:10] *** Quits: Ms2ger (Ms2ger@moz-CD126EF7.ugent.be) (Ping timeout)
[10:46:12] <Yurume> much like 0x123
[10:46:12] <mindcat> get `x = 0b01100110`
[10:46:43] <Yurume> rusti: 0b101010 == 0x2e
[10:46:44] -rusti- false
[10:46:46] <mindcat> right, reverse
[10:46:50] <Yurume> rusti: 0b101010 == 0x2a // oops
[10:46:51] -rusti- true
[10:46:52] <mindcat> reverse bits
[10:46:55] <redbrain> Personally i believe there are alot of benifits to implementing rust as a GCC Front-end
[10:46:56] <Yurume> ah
[10:47:18] <redbrain> take for instance pure functions in rust
[10:47:22] <redbrain> if i make a GCC fndecl
[10:47:25] <eddyb> redbrain: including semantic non-compliance!
[10:47:27] <Yurume> mindcat: afaik there is no method for that, you should create your own function
[10:47:34] <mindcat> ohhh
[10:47:36] <redbrain> i do DECL_PURE (fndecl) = 1
[10:47:38] <redbrain> magic
[10:47:48] <Yurume> mindcat: it is not very hard, there are lots of known ways to do that
[10:48:13] <mindcat> Yurume: however, I don't know how to do that.
[10:48:15] <eddyb> I used a LUT in my inflate implementation
[10:48:18] *** Quits: ndrei (avo@5958B30C.7CEC4B5E.866E0A25.IP) (Ping timeout)
[10:48:28] <eddyb> manually written, though, and I found a few bugs in it :P
[10:48:48] <eddyb> mindcat: https://gist.github.com/eddyb/e9548473916209c982fa#file-inflate-rs-L15-L98
[10:48:58] <kimundi> redbrain: uhm, Rust doesn't have pure functions (anymore) ;)
[10:49:09] <eddyb> redbrain: that seems low-level
[10:49:17] <mindcat> eddyb: woow
[10:49:17] <eddyb> we can also stick attributes on LLVM functions
[10:49:20] *** Joins: Earnestly (earnest@F86306B4.BBD8F39E.FEA8F6FD.IP)
[10:49:35] *** Quits: roy (user@moz-C21D3E9A.hsd1.il.comcast.net) (Ping timeout)
[10:49:41] <Yurume> rusti: fn swap_u8(x: u8) -> u8 { let x = ((x << 1) & 0b10101010) | ((x >> 1) & 0b01010101); let x = ((x << 2) & 0b11001100) | ((x >> 2) & 0b00110011); let x = ((x << 4) & 0b11110000) | ((x >> 4) & 0b00001111); x } swap_u8(0b00101010) == 0b01010100
[10:49:41] *** Joins: ndrei (avo@5958B30C.7CEC4B5E.866E0A25.IP)
[10:49:42] -rusti- true
[10:49:59] <Yurume> mindcat: this is how you can swap bits in O(log n) time.
[10:50:10] <redbrain> i dont know why i have to defend my self this much :S ah well thanks anywyas
[10:50:14] <eddyb> my version is O(1)
[10:50:27] <eddyb> redbrain: bah, you get stronger every time!
[10:50:27] <Yurume> eddyb: awww lookup table :p
[10:51:15] <mindcat> Yurume: I want reverse bits, not swap :(
[10:51:33] <Yurume> mindcat: it is reversing each bits, not bytes
[10:51:44] <Yurume> don't mind about the naming :p
[10:51:47] *** Joins: credence (wdobbins@782D6E95.A1550BA3.4B164862.IP)
[10:51:51] <eddyb> redbrain: you could just rewrite the entirety of GCC in Rust
[10:52:13] <eddyb> feels saner to me than writing more C code
[10:52:16] <eddyb> in 2014
[10:52:17] <mindcat> then should be `swap_u8(0b00101010) == 0b11010101`
[10:52:28] <Yurume> uh, wait?
[10:52:31] <Yurume> negating?
[10:52:39] <eddyb> LOL
[10:52:40] <Yurume> mindcat: that would be simply... !0b00101010.
[10:52:57] <mindcat> Yurume: ok...
[10:52:59] <Yurume> (yes, Rust already uses ~ so it is left with !.)
[10:53:08] * Yurume personally thinks that should've been ^
[10:53:12] <mindcat> rusti: !0b10101100
[10:53:13] -rusti- -173
[10:53:26] *** Quits: fyolnish (fyolnish@moz-F3DC6160.whatbox.ca) (Client exited)
[10:53:31] <Yurume> rusti: !0b10101100u8 == 0b01010011u8
[10:53:32] <kimundi> rusti: !0b00101010 == 0b11010101
[10:53:34] -rusti- true
[10:53:34] -rusti- false
[10:53:39] <Yurume> kimundi: u8 is required
[10:53:57] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[10:54:01] <mindcat> Yurume: ok, thanks, that is I want :D
[10:54:05] *** Joins: mihneadb (mihneadb@moz-9897BD47.static.ziggozakelijk.nl)
[10:54:28] <eddyb> redbrain: for the ABI, we have the return value pointer (if not immediate) as the first function argument, then there's the environment point for closures, and regular arguments (non-immediate values are passed by reference)
[10:54:42] <mindcat> Yurume: please excuse my english :D
[10:54:52] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Quit: Leaving.)
[10:54:57] <eddyb> redbrain: I'm not sure exactly how it maps to C calling conventions, we just throw those types at LLVM
[10:55:12] <Yurume> mindcat: don't mind, my English is much worse :p
[10:55:26] <mindcat> Yurume: XD
[10:55:34] <huon> eddyb: please be a little bit polite to people working on Rust; there are definitely big advantages to having a Rust compiler with GCC
[10:55:43] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[10:55:49] <Yurume> eddyb: oh, it was the first time I've ever seen your inflate program...
[10:56:07] <huon> (it might be a little premature to have an alternate compiler, but it shouldn't be so strongly discouraged.)
[10:56:12] <Yurume> did it get merged to Servo?
[10:56:18] <eddyb> Yurume: not yet
[10:56:28] <eddyb> waiting for the servo update to rust master
[10:56:32] <eddyb> so I can play with servo code
[10:56:35] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[10:57:12] <huon> redbrain: fwiw, I think gccrs is a very neat project; and I apologise that you were attacked when you asked a question in good faith. :)
[10:57:14] <redbrain> huon: thanks i really appreciate that mostly right now it lets me learn the language and is a base for a gcc implementation at least gcc is so under-rated vs llvm these days is my motivation more than anything i want to show it off
[10:57:31] <eddyb> huon: well, it's only my personal oppinion, maybe I should be more explicit about that
[10:57:35] *** Quits: ndrei (avo@5958B30C.7CEC4B5E.866E0A25.IP) (Ping timeout)
[10:57:51] *** Joins: ndrei (avo@5958B30C.7CEC4B5E.866E0A25.IP)
[10:58:06] <redbrain> just work is letting me work on it in work time as we dont have much on at the moment which is nice
[10:58:19] <huon> redbrain: oh, cool!
[10:58:30] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[10:58:45] <Yurume> redbrain: yeah, I didn't mean to discourage from the alternative implementation, I was solely talking about its difficulty.
[10:59:13] <redbrain> Yurume: yeah i understand that, thanks.
[10:59:26] * pnkfelix reads back history
[10:59:38] <Yurume> s/from/you from/
[10:59:39] <huon> eddyb: you don't need to be so rude about it, specifically "IMHO that's a waste of time, I wouldn't do such a thing even if I was paid" is very mean.
[10:59:49] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[10:59:50] * eddyb grumpy_eddyb
[10:59:52] <eddyb> err
[10:59:55] *** eddyb is now known as grumpy_eddyb
[11:00:10] <grumpy_eddyb> >:(
[11:00:17] <pnkfelix> redbrain: interesting.  Did you consider trying to use rust's FFI bindings to link to GCC's C source, and reject that option?
[11:00:18] <huon> if you'd skipped those words I wouldn't've said anything. :)
[11:00:42] *** Joins: Ms2ger (Ms2ger@moz-85E2FD70.ugent.be)
[11:01:24] <grumpy_eddyb> huon: I should stop hanging in public channels
[11:01:36] <redbrain> pnkfelix: i could technically do that with david malcoms work with gcc-jit and just do it AOT but there is alot of work there and its not the way full compilers are done gcc offers alot of support GENERIC and GIMPLE are difficult to use are very powerful
[11:01:41] <redbrain> gccgo was written in 2 weeks
[11:01:42] <grumpy_eddyb> #minecraft banned me once or twice for *alleged* homophobia
[11:01:50] <MP2E> hahaha
[11:01:57] <huon> one way to handle the front-end semantics for now would be running the "real" rustc with --no-trans to check for correctness, and then gccrs can assume the code is correct and just needs to do codegen
[11:02:01] <huon> redbrain: ^
[11:02:10] <pnkfelix> redbrain: fair enough.  I am not familiar enough with GCC's internals to know how feasible the suggestion would have been.
[11:02:21] <grumpy_eddyb> redbrain: well, Go has way less semantics to care about...
[11:02:29] <Yurume> I do think we'll eventually need some subset of the whole Rust language (i.e. core Rust? crust?) to avoid the full bootstrapping of rustc from alternative implementations
[11:02:36] <grumpy_eddyb> huon: rustc itself needs data from analysis passes to actually do codegen
[11:02:49] <grumpy_eddyb> so I'm not sure how an alternate front-end can skip some of those
[11:03:02] <redbrain> i'd love to see someday gccrs bootstraping rust would be amazing but probably 4 years down the road lol
[11:03:14] <huon> grumpy_eddyb: yes, but it can skip the borrowck and all that complicated stuff
[11:03:33] <grumpy_eddyb> I guess if you don't care for pre-optimizations you don't need to know about moves
[11:03:55] *** Quits: patpat (patpat@96F7484C.A0E34C8E.98F3E2B5.IP) (Ping timeout)
[11:04:11] *** Quits: kris (kris@moz-147EE6DF.diku.dk) (Ping timeout)
[11:05:23] *** Joins: kris (kris@moz-147EE6DF.diku.dk)
[11:09:05] *** Quits: diverse (diverse@moz-ED94B8D.oc.oc.cox.net) (Quit: WeeChat 0.4.2)
[11:09:11] <grumpy_eddyb> redbrain: well, you seem to know what you've gotten yourself into - sorry for the initial reaction, just felt compelled to not let you waste your time on one of the hardest paths towards integrating GCC and a Rust front-end
[11:09:17] *** grumpy_eddyb is now known as eddyb
[11:09:46] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Quit: Leaving.)
[11:09:59] <redbrain> eddyb: yeah i understand thanks
[11:10:11] *** Quits: lunaryorn (lunaryorn@moz-2DE1BD3D.dynamic.mnet-online.de) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[11:10:58] *** Joins: sproing (Mibbit@14310444.B9CCEC14.CC1A2609.IP)
[11:10:59] <Yurume> learning Rust the hardest way?
[11:11:32] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[11:12:17] <eddyb> glaebhoerl: I think I like your proposal :)
[11:12:52] *** Ms2ger is now known as Ms2ger|class
[11:13:08] *** Quits: MP2E (cray@moz-EB1E242D.lv.lv.cox.net) (Quit: night!)
[11:13:10] *** Joins: andre_ (andre@CA528A4A.45A4338E.8EE27E6.IP)
[11:14:19] <eddyb> bah, it's been hours without any progress
[11:14:20] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[11:14:45] <eddyb> this is what I get for blabbering on IRC
[11:15:04] *** Quits: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net) (Input/output error)
[11:15:16] <Yurume> I actually don't understand why HasPrefix and Coercible has to be distinct
[11:15:16] <glaebhoerl> eddyb: yay! :)
[11:15:40] <glaebhoerl> I'm happy that apparently it was comprehensible at all
[11:15:53] <eddyb> I can't claim I fully understood it :P
[11:16:04] <Yurume> if T: HasPrefix<U> implies &T: Coercible<&U>, should Coercible just be implemented in terms of HasPrefix?
[11:16:15] <Yurume> (or did you intend that?)
[11:16:19] <Yurume> shouldn't*
[11:16:21] <eddyb> but I got the general idea, and there's a few things in there which I've thought about before
[11:16:29] <kimundi> glaebhoerl: what proposal?
[11:16:36] <eddyb> glaebhoerl: about the tuple of a repeating type, I know how to implement that without specific syntax
[11:16:36] <glaebhoerl> Yurume: struct XY { x: int, y: int }; struct XYZ { xy: XY, z: int }
[11:16:36] <Yurume> kimundi: https://github.com/mozilla/rust/issues/9912#issuecomment-36073562
[11:16:57] <glaebhoerl> Yurume: now you can convert &XYZ to &XY
[11:17:10] <glaebhoerl> and you can convert &[&XYZ] to &[&XY]
[11:17:17] <glaebhoerl> but you can't convert &[XYZ] to &[XY]
[11:17:18] <Yurume> ah!
[11:17:25] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[11:17:59] <glaebhoerl> eddyb: what specific syntax do you mean?
[11:18:05] <Yurume> that makes sense, I actually couldn't easily comprehend the pointer-like context, so I should've missed that.
[11:18:20] *** Quits: Ferreus (ferreus@moz-12866AD5.dip0.t-ipconnect.de) (Ping timeout)
[11:18:40] <eddyb> glaebhoerl: if you can integrate with a not-just-reinterpret coercion like DST erasure and casting &Trait to &BaseTrait, that would be great
[11:18:41] <glaebhoerl> eddyb:  I'm not sure if that case is very important (how often would you want to convert between (T, T) and [T, ..2]?), but it's nice to have it for completeness
[11:18:57] <eddyb> trait Repeat<T> {} impl<Head, ..Tail: Repeat<T>> Repeat<T> for (Head, ..Tail) {} impl<T> Repeat<T> for ()
[11:19:01] <eddyb> {}
[11:19:11] <eddyb> glaebhoerl: it makes Vec::new(a, b, c) possible :D
[11:19:25] <eddyb> and also HashMap::new((a, x), (b, y), (c, z)) etc.
[11:19:41] *** Quits: jviereck (Adium@moz-5F2A758D.ethz.ch) (Quit: Leaving.)
[11:20:23] <eddyb> we can get close to what D supports through special syntax (static if's etc.)
[11:20:30] *** Quits: dougxxx (dougxxx@moz-2801788.perm.iinet.net.au) (Client exited)
[11:20:34] <eddyb> but only with library code (using variadic generics)
[11:20:43] *** Joins: morganb (morgan_b_@moz-5EAC75A2.hfc.comcastbusiness.net)
[11:20:43] <eddyb> s/only with/with only/
[11:20:52] *** Joins: dougxxx (dougxxx@moz-2801788.perm.iinet.net.au)
[11:21:17] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[11:23:48] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[11:24:19] <glaebhoerl> eddyb: hm i think i get that Repeat<T> would be impled exactly for tuples of any size which contain only Ts... but what would you do with it?
[11:24:24] <huon> glaebhoerl: "two numeric types of the same size" means i32 and u32, not f32, right?
[11:24:31] <eddyb> glaebhoerl: cast it to a &[T]
[11:24:35] <glaebhoerl> huon: i dunno, whichever you prefer :)
[11:24:42] <glaebhoerl> intentionally left that unspecified
[11:26:44] *** Quits: ecl3ctic (ecl3ctic@578C64B6.F0F44EFA.76AE55C1.IP) (Client exited)
[11:26:50] <glaebhoerl> I was thinking it might also be nice to have &T -> &[u8, ..sizeof!(T)], provided T: Pod and everything in it is (recursively) visible to you (i.e. not priv)
[11:26:59] <glaebhoerl> but even with those restrictions, I'm not sure if that's OK in general.
[11:27:23] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[11:27:27] *** Joins: aasmith (aasmith@moz-51A27BE9.hsd1.wa.comcast.net)
[11:27:34] <eddyb> if it's not &mut, it could be fine
[11:27:36] *** Quits: benjamin_____ (benjamin@moz-15335B53.dip0.t-ipconnect.de) (Ping timeout)
[11:27:40] <glaebhoerl> (this would be analogous to every T* in C being convertible to char* without violating strict aliasing rules)
[11:27:46] <pnkfelix> glaebhoerl: I think some things are better left as unsafe { transmute(..) }
[11:27:56] <glaebhoerl> yeah, quite possibly
[11:28:26] *** Quits: [squiddy] (squiddy@moz-7B493F09.dip0.t-ipconnect.de) (Quit: Leaving)
[11:28:29] *** Joins: nkoep (nik@moz-42197EEB.pool.mediaways.net)
[11:28:44] *** Joins: lunaryorn (lunaryorn@moz-2DE1BD3D.dynamic.mnet-online.de)
[11:29:00] *** Joins: fyolnish (fyolnish@5E7C820E.3B5C4E68.8646540C.IP)
[11:29:47] *** Quits: pdewacht (repent@moz-A79C5CB3.be) (Ping timeout)
[11:30:41] *** Quits: fyolnish (fyolnish@5E7C820E.3B5C4E68.8646540C.IP) (Ping timeout)
[11:31:01] *** Joins: mib_l4aoxe (Mibbit@moz-30CAEFF0.sun802.vic.optusnet.com.au)
[11:31:19] *** Quits: ghaering (Instantbir@4DECFBA5.E64A0519.C0DAB1E3.IP) (Client exited)
[11:32:02] *** Quits: leslie (Adium@802083C6.67DB9176.67D29DD9.IP) (Quit: Leaving.)
[11:32:07] *** Joins: leslie (Adium@802083C6.67DB9176.67D29DD9.IP)
[11:32:12] <glaebhoerl> huon: btw (you've probably been asked this, but not by me), what's the origin/meaning of "dbaupp"?
[11:33:10] *** Joins: pdewacht (repent@moz-A79C5CB3.be)
[11:33:19] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[11:34:27] *** Quits: frza (frza@EA5BFF77.2B9073C9.204B78AE.IP) (Quit: frza)
[11:35:15] *** Joins: Ferreus (ferreus@moz-4A16C4D4.dip0.t-ipconnect.de)
[11:36:03] *** Joins: ghaering (Instantbir@4DECFBA5.E64A0519.C0DAB1E3.IP)
[11:36:29] *** Quits: mib_l4aoxe (Mibbit@moz-30CAEFF0.sun802.vic.optusnet.com.au) (Quit: http://www.mibbit.com ajax IRC Client)
[11:37:40] <huon> glaebhoerl: can't remember... chose it for something (a game, I guess) with a lot of local context I've now lost. :)
[11:38:08] <Yurume> is it an anagram or an acronym?
[11:38:23] *** Quits: hacker_sam (hacker_sam@moz-8F2DB428.public.wayport.net) (Client exited)
[11:38:24] *** Joins: hacker_sam (hacker_sam@moz-8F2DB428.public.wayport.net)
[11:38:24] <glaebhoerl> heh. 'illissius' was originally for an M:tG forum tenish years ago
[11:38:25] <pnkfelix> huon: I'm surprised you didn't grab the dbapp username on github
[11:39:10] <pnkfelix> huon: but then I guess not everyone is as obsessive as I am about trying to snag "their" name
[11:39:31] <eddyb> eddyb is so shorts, bots usually take it first :(
[11:39:34] <eddyb> *short
[11:40:09] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[11:40:12] <huon> pnkfelix: I had it originally
[11:40:21] <huon> but changed it to huonw
[11:40:27] <Yurume> I use dozens of nicknames for various purposes
[11:40:42] <Yurume> that's why my IRC nick (at moznet) and Reddit nick differs
[11:40:48] <huon> (e.g. https://github.com/mozilla/rust/issues/5090#issuecomment-15679484 )
[11:41:09] <Yurume> since it's shorter?
[11:41:48] <huon> Yurume: I guess 'au' is australia, not sure of rest.
[11:42:04] <pnkfelix> huon: I suppose having your real name incorporated into your nick can help carry over your reputation into real life.
[11:42:11] <Ms2ger|class> pnkfelix, meh :)
[11:42:15] <pnkfelix> (for better or for worse)
[11:42:28] <huon> something like that
[11:43:28] *** Joins: nimish (quassel@6CD90D4F.B586C2A4.5F29FBA5.IP)
[11:44:22] *** Quits: ndrei (avo@5958B30C.7CEC4B5E.866E0A25.IP) (Ping timeout)
[11:44:57] <huon> eddyb: you need to run through the internet registering eddyb on everything, just in case they take off bigtime :P
[11:45:58] *** Quits: mindcat (mindcat@F457AA3.BDFDA69D.857BDFA9.IP) (Ping timeout)
[11:46:53] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[11:46:57] <glaebhoerl> Yurume: who are you on reddit?
[11:47:02] *** Joins: mindcat (mindcat@F457AA3.BDFDA69D.857BDFA9.IP)
[11:47:11] *** Quits: arielb1 (Mibbit@moz-5172D3AC.cs.tau.ac.il) (Quit: http://www.mibbit.com ajax IRC Client)
[11:47:27] <Yurume> glaebhoerl: lifthrasiir.
[11:47:43] *** Quits: Ms2ger|class (Ms2ger@moz-85E2FD70.ugent.be) (Ping timeout)
[11:47:47] <glaebhoerl> ah ok :)
[11:48:03] *** Joins: ndrei (avo@5958B30C.7CEC4B5E.866E0A25.IP)
[11:48:24] <Yurume> (which is also my Github handle)
[11:48:42] *** Joins: sk (sk@61A494B3.BA40E8A.AAC02D62.IP)
[11:48:53] *** Quits: mindcat (mindcat@F457AA3.BDFDA69D.857BDFA9.IP) (Ping timeout)
[11:51:19] *** Quits: dougxxx (dougxxx@moz-2801788.perm.iinet.net.au) (Client exited)
[11:51:47] *** Joins: dougxxx (dougxxx@moz-2801788.perm.iinet.net.au)
[11:52:31] *** Joins: dpanth3r (dinofelis@228444B8.6B06001A.BB6F225C.IP)
[11:57:06] *** Joins: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net)
[11:58:21] *** Joins: seanp33 (Adium@moz-B0398B82.hsd1.md.comcast.net)
[11:58:37] *** Joins: mye (mye@moz-1929E5E2.dip0.t-ipconnect.de)
[11:59:06] *** Joins: fyolnish (fyolnish@5E7C820E.3B5C4E68.8646540C.IP)
[11:59:15] *** Quits: seanp33 (Adium@moz-B0398B82.hsd1.md.comcast.net) (Quit: Leaving.)
[11:59:30] *** Quits: hacker_sam (hacker_sam@moz-8F2DB428.public.wayport.net) (Client exited)
[12:00:49] *** Quits: fyolnish (fyolnish@5E7C820E.3B5C4E68.8646540C.IP) (Ping timeout)
[12:04:36] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Quit: Leaving.)
[12:05:01] *** Quits: lunaryorn (lunaryorn@moz-2DE1BD3D.dynamic.mnet-online.de) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[12:08:32] *** Joins: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[12:08:39] *** Joins: Ms2ger|class (Ms2ger@moz-6F449C8.ugent.be)
[12:10:10] *** Quits: ndrei (avo@5958B30C.7CEC4B5E.866E0A25.IP) (Ping timeout)
[12:10:18] *** Quits: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net) (Ping timeout)
[12:13:19] *** Joins: mindcat (mindcat@D1D811CE.67E5BEA2.57E3C596.IP)
[12:13:46] *** Ms2ger|class is now known as Ms2ger|lunch
[12:16:19] <mindcat> rusti: u32 == uint
[12:16:26] -rusti- pastebinned 8 lines of output: http://ix.io/aKH
[12:16:39] <eddyb> types are not first-class values in Rust >_>
[12:17:02] <mindcat> so u32 is uint?
[12:17:10] <mindcat> I mean type
[12:17:17] *** Quits: mihneadb (mihneadb@moz-9897BD47.static.ziggozakelijk.nl) (Quit: Bye)
[12:17:17] *** pmoore is now known as pmoore|away
[12:17:20] <huon> no
[12:17:22] <eddyb> rusti: use std::unstable::intrinsics::TypeId; TypeId::of::<u32>() == TypeId::of::<uint>()
[12:17:23] <kimundi> mindcat: uint is pointer sized, u32 is 32 bit
[12:17:24] -rusti- false
[12:17:26] *** Joins: dwrensha (chatzilla@moz-445F8B42.hsd1.ca.comcast.net)
[12:17:34] <mindcat> ok...
[12:17:34] <huon> u8, u16, u32, u64, uint are all different types
[12:17:50] <huon> even if uint and u32/u64 have the same size occasionally
[12:18:10] <kimundi> mindcat: on x86 uint has the same size as u32, on x64 uint has the same size as u64
[12:18:17] <mindcat> rusti: 0bffffffffffffffffuint
[12:18:17] -rusti- <anon>:10:9: 10:12 error: expected `f32` or `f64` suffix
[12:18:17] -rusti- <anon>:10         0bffffffffffffffffuint
[12:18:17] -rusti-                   ^~~
[12:18:17] -rusti- application terminated with error code 101
[12:18:21] <huon> rusti: let (u32, uint) = (1,2); u32 == uint
[12:18:23] -rusti- false
[12:18:29] <eddyb> the suffix is u
[12:18:34] <mindcat> rusti: 0bffffffffffffffffu
[12:18:35] -rusti- <anon>:10:9: 10:12 error: expected `f32` or `f64` suffix
[12:18:35] -rusti- <anon>:10         0bffffffffffffffffu
[12:18:35] -rusti-                   ^~~
[12:18:35] -rusti- application terminated with error code 101
[12:18:36] <huon> and 0b is a binary literaly
[12:18:39] <huon> *literal
[12:18:44] <eddyb> huon: namespaces <3
[12:18:46] <huon> 0x for hx
[12:18:47] <huon> hex
[12:18:51] <mindcat> rusti: 0xffffffffffffffffu
[12:18:53] -rusti- 18446744073709551615u
[12:19:04] <mindcat> rusti: 0xffffffffffffffffffffffffffffffffu
[12:19:05] -rusti- <anon>:10:9: 10:44 error: int literal is too large
[12:19:05] -rusti- <anon>:10         0xffffffffffffffffffffffffffffffffu
[12:19:05] -rusti-                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[12:19:05] -rusti- application terminated with error code 101
[12:19:16] *** Quits: kris (kris@moz-147EE6DF.diku.dk) (Ping timeout)
[12:19:22] <mindcat> toooooooooooo large
[12:19:42] *** Joins: kris (kris@moz-147EE6DF.diku.dk)
[12:19:45] <eddyb> there's like > 100 bits in there
[12:20:17] <Yurume> rusti: 0b1111111111111111111111111111111111111111111111111111111111111111u64
[12:20:19] -rusti- 18446744073709551615u64
[12:20:28] <Yurume> rusti: 0b1111111111111111111111111111111111111111111111111111111111111111i64
[12:20:29] -rusti- -1i64
[12:20:47] <mindcat> so we does have.... "BigInt"?
[12:21:21] <huon> mindcat: http://static.rust-lang.org/doc/master/num/bigint/index.html
[12:22:05] <mindcat> oh, I just forgot it
[12:22:08] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[12:23:24] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[12:24:34] <mindcat> ls 
[12:25:01] <huon> . ..
[12:25:27] <eddyb> \o_o/
[12:25:54] *** Joins: mihneadb (mihneadb@moz-9897BD47.static.ziggozakelijk.nl)
[12:26:19] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[12:26:41] <Yurume> [o__o]
[12:27:04] *** Joins: frza (frza@EA5BFF77.2B9073C9.204B78AE.IP)
[12:27:08] *** Joins: lunaryorn (lunaryorn@moz-2DE1BD3D.dynamic.mnet-online.de)
[12:27:35] *** Quits: mihneadb (mihneadb@moz-9897BD47.static.ziggozakelijk.nl) (Quit: Computer gone to sleep - Zzzz...)
[12:28:51] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[12:29:07] *** Joins: ndrei (avo@5958B30C.7CEC4B5E.866E0A25.IP)
[12:29:27] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[12:29:54] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[12:30:18] <huon> rusti: trait Foo {} impl Foo {} // no `mod` here, but...
[12:30:21] -rusti- pastebinned 8 lines of output: http://ix.io/aKJ
[12:32:24] <eddyb> huon: impl *is* a mod
[12:32:58] <eddyb> we could make it so it only becomes a mod if it static methods
[12:33:15] <eddyb> it would solve a nastier problem
[12:33:29] <eddyb> where a type resolves to a module declared by an impl
[12:33:38] <mindcat> https://gist.github.com/mindcat/9228721
[12:33:38] *** Quits: noam_ (noam@F6B530A7.720527A7.416762B.IP) (Ping timeout)
[12:33:57] <mindcat> how can I call varint::new function?
[12:34:10] <eddyb> rusti: struct Foo; impl Option<Foo> {fn check(self) {self.unwrap();}} Some(Foo).check()
[12:34:11] -rusti- <anon>:10:26: 10:37 error: found module name used as a type: impl main::__extensions__ (id=21)
[12:34:11] -rusti- <anon>:10         struct Foo; impl Option<Foo> {fn check(self) {self.unwrap();}} Some(Foo).check()
[12:34:11] -rusti-                                    ^~~~~~~~~~~
[12:34:11] -rusti- application terminated with error code 101
[12:34:21] <mindcat> I just forgot how to call it
[12:34:40] <eddyb> huon: meh, rusti predates my changes
[12:34:49] <eddyb> mindcat: remove &mut self
[12:34:51] *** Quits: alonlevy (alon@moz-944C9098.red.bezeqint.net) (Ping timeout)
[12:35:06] <eddyb> also, don't name your types lowercase >_>
[12:35:14] <eddyb> (please)
[12:35:23] <huon> eddyb: I know an impl is a mod, just the error message is super confusing
[12:35:33] *** Quits: ulrik (ulrikdamm@E000D799.6AFCF91.500EA053.IP) (Client exited)
[12:35:37] <mindcat> eddyb: oh
[12:35:39] <huon> (for a beginner/someone how doesn't know the compiler internals))
[12:35:44] <mindcat> eddyb: right
[12:35:51] <eddyb> s/compiler internals/language semantics
[12:35:53] *** Joins: ulrik (ulrikdamm@E000D799.6AFCF91.500EA053.IP)
[12:36:04] <eddyb> huon: if that is confusing, look at the error for anon impls on types
[12:36:04] <huon> eddyb: an impl isn't a mod as part of the language
[12:36:21] <huon> eddyb: e.g. you cannot import directly form them
[12:36:24] <huon> *from
[12:36:26] *** Joins: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP)
[12:36:29] <pnkfelix> I have been pondering that IntialCap naming convention for our types
[12:36:53] <Yurume> non_camel_case_types lint?
[12:36:56] <pnkfelix> could there be any value in making implicitly-copyable types all lower-case
[12:37:01] <Yurume> s/non_//
[12:37:05] <eddyb> huon: I consider that a limitation of the current implementation
[12:37:09] <pnkfelix> ?
[12:37:15] <eddyb> pnkfelix: not really
[12:37:22] <pnkfelix> (sorry, that question mark was meant to be on my "could there be ...")
[12:37:49] <pnkfelix> eddyb: I guess my initial impetus was for consistency with `int`, `u8`, etc.
[12:38:02] <eddyb> you have things like syntax::codemap::Span which is implicitly copyable (though not sure if Pod)
[12:38:06] <huon> pnkfelix: Option<int> is Pod, but Option<~str> isn't... (I guess generic types would be InitialCaps in that scheme)
[12:38:17] <eddyb> I would certainly not want that to become span
[12:38:20] *** Quits: aravindavk (aravinda@moz-BD0CADEE.redhat.com) (Ping timeout)
[12:38:44] <huon> pnkfelix: I think I would prefer changing int etc. Int, U8, etc. than changing other types to match their lower case.
[12:39:06] <Leo`> pub use doesn't exist anymore ?
[12:39:11] <Leo`> or doesn't work anymore ? ><
[12:39:17] <pnkfelix> mmm.  `u8` seems more readable to me than `U8`
[12:39:35] <kangz> also it helps make the difference between primitive types and others
[12:39:38] <pnkfelix> Leo`: I'm not aware of it going away
[12:39:40] <glaebhoerl> I also like the lowercase for built-in types
[12:39:42] <kimundi> Leo`: pub use should still exist and work - but wildcard * imports are disabled per default now
[12:39:44] <huon> (in most cases, one doesn't care about Pod-ness, and so putting that first-and-foremost in the types name, making it hard to guess from speech, etc.)
[12:39:49] <Leo`> mmhhh
[12:39:57] <Leo`> weird then
[12:40:07] <Leo`> i've got a pub use, and a module cannot access to the reexported type
[12:40:08] *** Quits: lunaryorn (lunaryorn@moz-2DE1BD3D.dynamic.mnet-online.de) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[12:40:18] <kimundi> Leo`: Maybe privacy issues?
[12:40:23] <pnkfelix> huon: My thinking was that for new-comers to the language, they are going to be able to freely copy some types, but they'll get move errors for others
[12:40:26] <glaebhoerl> but if we had all types uppercase we could make it a *rule* in the syntax, and then we could say that anything in a type context that starts with a lowercase is a lifetime, and lose the ' sigil on lifetimes
[12:40:27] <Darnuria> Hello, Hey I have a question from a friend in computer science lab, there is any plan for making Rust evangelism in scientific labs? My friend is interrested by Rust for his capacity in concurential CPU bound code
[12:40:29] <huon> (as a bit of a strawman) e.g. why wouldn't Send the property that we attach to lowercase? or Freeze?
[12:40:45] <Leo`> kimundi: if the pub use is pub, it should be enough, no ?
[12:40:47] <pnkfelix> huon: And that the initial-capital denoting something that moves-on-assignment might help them with that initial hurdle.
[12:40:49] *** Quits: Ms2ger|lunch (Ms2ger@moz-6F449C8.ugent.be) (Ping timeout)
[12:40:50] <huon> glaebhoerl: or go haskell-style and use lowercase for generics
[12:41:02] <glaebhoerl> or that
[12:41:20] <huon> pnkfelix: I feel like the "magical" inconsistency of sometimes being upper and some being lower would be worse
[12:41:33] <glaebhoerl> (cuts down on the <T, U> in definitions which is nice)
[12:41:37] <huon> but as you say, it would possibly help with the moving-ownership hurdle
[12:41:44] <eddyb> glaebhoerl: that's not necessarily a good thing
[12:41:47] <pnkfelix> huon: Yeah your example of Option<int> hurts this argument 
[12:42:13] <huon> pnkfelix: that said, Pod types don't move, but copying them around can be arbitrarily expensive
[12:42:16] <kimundi> Leo`: Well, it depends on wether everything between that pub and the place you try to access it is also pub
[12:42:21] <huon> (e.g. [int, .. 1_000_000_000] is Pod.)
[12:42:28] <kangz> plus if it was linted, newcomers wouldn't understand the compilation error if they use the wrong convention for a new type
[12:42:48] <glaebhoerl> eddyb: it makes the order of type arguments implicit which makes it non-obvious what order you should write foo::<T, U>() in... what else?
[12:42:57] <huon> so moving Pod types around by value indiscriminately is incorrect.
[12:42:58] <eddyb> glaebhoerl: trait bounds
[12:43:09] <Leo`> kimundi: it should be, since the place where I try to access it is "under" the place where the pub use is put
[12:43:16] <pnkfelix> huon: or at least inefficient
[12:43:18] <glaebhoerl> eddyb: example? :)
[12:43:31] <Leo`> kimundi: but the path between the pub use and the place where the type is actually defined doesn't have to be fully pub, right ?
[12:43:44] <eddyb> glaebhoerl: fn foo<T: Add<T, T> + Mul<T, T>>
[12:43:53] <kimundi> Leo`: Hmm not sure
[12:43:53] <huon> pnkfelix: well, incorrect for efficient code, yeah (which is what I meant, but was phrased rather poorly)
[12:44:02] <glaebhoerl> hm
[12:44:11] <pnkfelix> huon: but I see that as a scenario that arises any language that passes-by-value.
[12:44:14] *** Joins: exobit (foo@moz-90D1B547.nycmny.fios.verizon.net)
[12:44:21] <huon> eddyb: `(Add t t t, Mul t t t) => ...`
[12:44:25] *** Joins: fyolnish (fyolnish@5E7C820E.3B5C4E68.8646540C.IP)
[12:44:27] <eddyb> wat
[12:44:33] <huon> is what haskell would do
[12:44:38] <eddyb> Self is special and I like it
[12:44:40] <pnkfelix> huon: (ignoring the fact that so many languages use reference semantics and thus don't run into it)
[12:44:54] <glaebhoerl> yeah seems implicit type vars would involve moving more thoroughly to haskell-style syntax
[12:45:01] <glaebhoerl> so that doesn't sound as appealing
[12:45:05] <eddyb> good
[12:45:07] <huon> pnkfelix: (I'm not sure we should ignore that fact in this discussion)
[12:45:28] *** Joins: ganitsu (ganitsu@moz-F0E8DAC7.dialup.adsl.anteldata.net.uy)
[12:45:38] *** Joins: judder (maradukewa@A4DC519F.6379DA33.78E362FE.IP)
[12:45:52] <pnkfelix> Well, it was an idea that I was just musing about.  Sounds like it wouldn't get much uptake.
[12:45:58] *** Parts: judder (maradukewa@A4DC519F.6379DA33.78E362FE.IP) ()
[12:46:01] *** Quits: fyolnish (fyolnish@5E7C820E.3B5C4E68.8646540C.IP) (Connection reset by peer)
[12:46:06] *** Joins: fyolnish (fyolnish@5E7C820E.3B5C4E68.8646540C.IP)
[12:46:09] <glaebhoerl> losing the ' on lifetimes might be worthwhile though, it looks hella weird coming from a C background to see 'x and it not be terminated by another ' and not be a char literal
[12:46:37] <eddyb> there's a certain appeal to 'foo
[12:46:42] <SiegeLord> And &a b looks like a syntax error :P
[12:46:44] <huon> pnkfelix: specifically, all pass-by-value languages I can think of have a concept of ownership, although Rust is the mainstream-est one I can think of with it explicit
[12:46:45] <Yurume> 'foo: loop { ... break 'foo; }
[12:46:49] *** Quits: exobit (foo@moz-90D1B547.nycmny.fios.verizon.net) (Ping timeout)
[12:46:50] <glaebhoerl> (otoh it makes it more obvious that "things that look like 'foo are lifetimes", so it's a tradeoff)
[12:47:02] <glaebhoerl> SiegeLord: it would always be &a B, types could not be lowercase
[12:47:14] <SiegeLord> b need not be a type
[12:47:17] <SiegeLord> It could be a variable
[12:47:17] <huon> (that is C and C++ need to be careful about who owns what when passing things around)
[12:47:22] <eddyb> let x = 'foo: {{{ &'foo 0 }}}; x
[12:47:28] <eddyb> ^^ we want that
[12:47:34] <Yurume> eddyb: does it work today.. oh.
[12:47:36] <glaebhoerl> SiegeLord: ok, concrete types *and type variables* would need to be uppercase, in case it wasn't clear
[12:47:47] *** Quits: fyolnish (fyolnish@5E7C820E.3B5C4E68.8646540C.IP) (Ping timeout)
[12:47:50] <glaebhoerl> if you write foo<a> then a is a lifetime, foo<A> then A is a type
[12:47:50] <SiegeLord> Not a type variable, see eddyb's example
[12:48:10] <SiegeLord> A variable variable
[12:48:21] <eddyb> lifetimes live in their own scope
[12:48:26] <eddyb> s/scope/namespace
[12:48:27] *** Joins: jcmoyer_ (jc@moz-40035C19.sta.embarqhsd.net)
[12:48:27] *** Quits: dwrensha (chatzilla@moz-445F8B42.hsd1.ca.comcast.net) (Ping timeout)
[12:48:40] <glaebhoerl> SiegeLord: ok, eddyb has a good point, but &a b would still not be valid syntax :) 'foo corresponds to a, not b
[12:49:01] *** Quits: jcmoyer (jc@moz-40035C19.sta.embarqhsd.net) (Ping timeout)
[12:49:32] <SiegeLord> let b = 0; &'a b is valid syntax today, I don't see what you mean
[12:49:47] <glaebhoerl> oh at the term level. sorry
[12:49:55] <pnkfelix> huon: so ... your point is ... that ownership still matters even for implicitly copyable things?  I don't know if I was arguing against that.
[12:50:11] <glaebhoerl> All along I was thinking we're talking about types
[12:50:23] <glaebhoerl> yeah, good point
[12:50:37] <glaebhoerl> don't have any idea what you could do about that atm
[12:51:06] *** Quits: yati (yati@256C4EF.71019FF.CA052C06.IP) (Quit: Leaving)
[12:51:31] <huon> pnkfelix: in C/C++
[12:51:52] *** Joins: Ms2ger|lunch (Ms2ger@moz-6F449C8.ugent.be)
[12:51:53] <huon> bleh, I had a point somewhere
[12:51:58] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[12:52:00] <eddyb> .
[12:52:02] <huon> but I lost it :(
[12:52:10] * huon needs to sleep
[12:52:47] <pzol> huon https://github.com/mozilla/rust/pull/12561/commits done!
[12:52:50] *** Joins: Krymise (Nietzsche@moz-CA789EF5.nwrknj.fios.verizon.net)
[12:53:56] *** Ms2ger|lunch is now known as Ms2ger
[12:54:14] <glaebhoerl> ...I was wanting to joke `which sleep`, but forgot what the `which` command was called, and so I stumbled into the fact that `whereis` and `whatis` exist
[12:54:16] <glaebhoerl> and are useful
[12:54:42] <Ms2ger> What do they do?
[12:54:53] <glaebhoerl> $ whatis cat
[12:54:54] <glaebhoerl> cat (1)              - concatenate files and print on the standard output
[12:54:56] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[12:55:01] <glaebhoerl> $ whereis cat
[12:55:02] <glaebhoerl> cat: /bin/cat /usr/share/man/man1/cat.1.gz
[12:55:07] *** Quits: matp (matp@moz-16FE1E05.matp.at) (Ping timeout)
[12:55:12] <Ms2ger> Neat
[12:56:30] <SiegeLord> How about this... what if Seek had a method to report the size of the Reader/Writer
[12:56:43] <eddyb> by seeking to the end?
[12:56:54] <eddyb> and back to the previous position?
[12:56:55] <SiegeLord> For a default implementation, perhaps
[12:57:27] <SiegeLord> Is it defined to seek past the end of a file?
[12:57:40] <mindcat> rusti: 1 == 0b0
[12:57:41] -rusti- false
[12:57:52] <eddyb> I would only trust seeking to 0 bytes from the end
[12:58:17] <SiegeLord> Otherwise you could do a quick binary search
[12:58:43] <eddyb> wat?
[12:58:52] <nimish> hi #rust, is there a write-up on rust's type system for people familiar with type theory?
[12:58:54] <huon> pzol: looks good. Although the "remove dead code" commit message would be nicer as "std::unicode: remove unused category tables"
[12:58:56] <SiegeLord> Well, seek to uint.max, then to uint.max / 2 etc
[12:59:05] <eddyb> SiegeLord: I thought you were talking about seek_to_end, tell, seek back to the previous position
[12:59:23] * eddyb points nimish to nmatsakis
[12:59:28] <Leo`> why have conditions been removed ?
[12:59:31] <SiegeLord> Well yeah, but seek_to_end could be slow, no?
[12:59:34] <Ms2ger> nimish, "static, nominal, linear, algebraic, locally inferred"
[12:59:36] *** Joins: fyolnish (fyolnish@5E7C820E.3B5C4E68.8646540C.IP)
[12:59:38] <eddyb> SiegeLord: huh, why?
[12:59:39] <Ms2ger> nimish, do you need anything more? ;)
[12:59:48] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[12:59:54] *** pmoore|away is now known as pmoore
[12:59:55] <Ms2ger> Leo`, they turned out not to be as nice to work with as hoped
[12:59:57] <eddyb> SiegeLord: it's telling the kernel to go to the end of the file
[12:59:58] <pzol> huon true! 
[12:59:59] <SiegeLord> Aha, nvm
[13:00:01] <eddyb> I can't see how that could be slow
[13:00:04] <SiegeLord> I forgot seek had a second argument
[13:00:12] <kimundi> Ms2ger: You forgot structural I think :P
[13:00:13] <ChrisMorgan> nimish: there has been at least one paper on the topic, which nmatsakis collaborated or at least advised on.
[13:00:14] <nimish> Ms2ger: cool, i had heard there were some dependent features but were dropped
[13:00:16] <huon> nimish: there's http://static.rust-lang.org/doc/master/rustc/middle/borrowck/doc/index.html about the borrow checker
[13:00:21] <SiegeLord> So it's flawless, no?
[13:00:23] <huon> and http://static.rust-lang.org/doc/master/rustc/middle/typeck/infer/doc/index.html about the type inference
[13:00:31] <Ms2ger> kimundi, I copied from rust-lang.org :)
[13:00:39] <kimundi> haha
[13:00:46] <huon> nimish: and imagine there might be some other documentation scattered below http://static.rust-lang.org/doc/master/rustc/middle/typeck/index.html , maybe
[13:00:59] *** Quits: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Ping timeout)
[13:01:00] <SiegeLord> And you can fstat or something for a file, or for the memreaders if you wanted
[13:01:14] <SiegeLord> Not really necessary for the memreaders
[13:01:15] <nimish> thanks all
[13:01:16] <huon> nimish: ("ck" == "checker" in the rustc internals)
[13:01:26] *** Quits: fyolnish (fyolnish@5E7C820E.3B5C4E68.8646540C.IP) (Ping timeout)
[13:01:31] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[13:01:46] *** Joins: benjamin_____ (benjamin@moz-15335B53.dip0.t-ipconnect.de)
[13:02:01] <SiegeLord> If you implement Seek, are you always allowed to seek like a crazy person like that?
[13:02:19] <SiegeLord> I guess it'll fail if it's not
[13:03:27] *** jorendorff_away is now known as jorendorff
[13:05:00] <pzol> huon changed the commit msg 
[13:05:52] <SiegeLord> Oh damn... https://www.securecoding.cert.org/confluence/display/seccode/FIO19-C.+Do+not+use+fseek%28%29+and+ftell%28%29+to+compute+the+size+of+a+regular+file
[13:06:25] *** Joins: asmyers (quassel@ABB8FFBC.A07F7734.FAA4474F.IP)
[13:08:07] <mindcat> rusti: for i in [1,2,3]; print!("{} ",i)
[13:08:08] -rusti- <anon>:10:25: 10:26 error: expected `{` but found `;`
[13:08:08] -rusti- <anon>:10         for i in [1,2,3]; print!("{} ",i)
[13:08:08] -rusti-                                   ^
[13:08:08] -rusti- application terminated with error code 101
[13:08:16] <mindcat> rusti: for i in [1,2,3]{ print!("{} ",i)}
[13:08:18] -rusti- pastebinned 11 lines of output: http://ix.io/aKM
[13:08:26] *** Joins: doener (bs@moz-AA189A5A.unitymedia.biz)
[13:08:43] <mindcat> rusti: for i in [1,2,3].iter() { print!("{} ",i)}
[13:08:47] -rusti- pastebinned 8 lines of output: http://ix.io/aKN
[13:08:56] <eddyb> Yurume: found an issue for flan3002 https://github.com/mozilla/rust/issues/11971
[13:08:57] *** Joins: mihneadb (mihneadb@moz-9897BD47.static.ziggozakelijk.nl)
[13:09:06] <mindcat> rusti: for i in [1,2,3].iter() { print!("{:?} ",i)}
[13:09:07] <huon> pzol: that's nicer, yeah.  I think it would be worth emphasising that it's doing the simple case folding. I.e. replace "Multi char ..." with "The case-folding performed is the simple mapping: it only maps a codepoint to its equivalent if it is also a single codepoint"
[13:09:08] -rusti- &1 &2 &3 ()
[13:09:10] <huon> or something like that
[13:09:13] <eddyb> ~Trait:'a looks cool
[13:09:16] *** Quits: mihneadb (mihneadb@moz-9897BD47.static.ziggozakelijk.nl) (Client exited)
[13:09:36] * huon -> bed
[13:09:40] <mindcat> why not `{}`, `{:?}`?
[13:09:44] <pzol> huon ok thanks! I'll update the docs
[13:10:27] *** Joins: alonlevy (alon@moz-61A0AD83.red.bezeqint.net)
[13:10:32] <mindcat> and "dbaupp" is gone?
[13:10:42] <mindcat> I mean a person
[13:11:26] <huon> mindcat: I changed names
[13:11:47] <mindcat> huon: so why I see a new guy in here
[13:11:52] <mindcat> huon: XD
[13:12:22] *** Quits: Diamond (dick@moz-80556682.ks.ks.cox.net) (Ping timeout)
[13:12:29] * mindcat hugs huon 
[13:12:29] <pzol> Should I be worried about this:  cannot initialize a parameter of type 'llvm::Pass *' with an rvalue of  https://travis-ci.org/mozilla/rust/builds/19650009#L551 ??
[13:12:38] *** Joins: pczarn (Mibbit@moz-69A55FA.izacom.pl)
[13:13:28] <eddyb> hehe
[13:13:36] <eddyb> LLVM broke again?
[13:13:41] <eddyb> pzol: travis uses nightly LLVM
[13:13:53] <pzol> eddyb it worked like 5mins ago.... 
[13:14:04] <eddyb> https://xkcd.com/1335/
[13:14:31] <eddyb> pzol: it's morning in US :P
[13:14:40] <pzol> eddyb right ;)
[13:15:47] *** Quits: kvanb (kvanb@moz-BFEE4085.lnse5.win.bigpond.net.au) (Quit: kvanb)
[13:16:03] *** Joins: canhtak (canhtak@moz-251024EB.wl.t.ulaval.ca)
[13:16:14] <Yurumechan> eddyb : explicit lifetime bounds will certainly help.
[13:18:17] *** Joins: Anupkumar (uid16774@moz-A42E5B7B.irccloud.com)
[13:18:53] *** Joins: angdev (angdev@16F167B.4C57D258.D8E8354F.IP)
[13:19:34] *** Joins: heftig (heftig@moz-D746319F.unitymedia.biz)
[13:20:55] <kimundi> btw, I started seeing those travis notices on official Rust PRs - what is going on there?
[13:21:44] *** Quits: ndrei (avo@5958B30C.7CEC4B5E.866E0A25.IP) (Ping timeout)
[13:22:00] <geal> acrichto: thank you for your help on the unix sockets PR. Here is what I wanted to write with that in the end https://github.com/Geal/rust-syslog :)
[13:22:06] <ChrisMorgan> kimundi: Travis does a quick check of things. Bors doesn't care about its results at all, but it's handy for quick verification.
[13:22:26] <pnkfelix> ChrisMorgan: How many of the notices have been false failures?
[13:23:11] <ChrisMorgan> No idea. I've only looked at a few (probably five or six) since then, and have seen two spurious failures and one genuine failure.
[13:23:15] <pnkfelix> ChrisMorgan: I haven't looked into it too heavily, I just noticed a lot of warnings from Travis and couldn't figure out whether they were really worrisome or not.
[13:24:34] <kimundi> ChrisMorgan: So, every new PR gets a quick build from travis to comfirm it builds at all, in addition to the bors machinery?
[13:24:37] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[13:24:41] <ChrisMorgan> Yes.
[13:24:45] <kimundi> I see
[13:25:33] *** Quits: james4k (james@moz-9BB5AE72.consolidated.net) (Ping timeout)
[13:25:36] *** Joins: victorporof (victorporo@moz-FFB76956.cpe.net.cable.rogers.com)
[13:26:09] *** Joins: ndrei (avo@5958B30C.7CEC4B5E.866E0A25.IP)
[13:26:16] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[13:27:21] <ChrisMorgan> Hmm… I see why src/test/run-pass/super-fast-paren-parsing.rs is ignore-pretty. All those parentheses make for stack overflow :-/
[13:28:00] <ChrisMorgan> Really? Is 255 levels of parentheses so bad for a pretty printer?
[13:28:06] *** Quits: ulrik (ulrikdamm@E000D799.6AFCF91.500EA053.IP) (Client exited)
[13:28:07] *** Joins: ulrik (ulrikdamm@E000D799.6AFCF91.500EA053.IP)
[13:28:21] <eddyb> ChrisMorgan: for a bad pretty printer, yeah
[13:28:38] <eddyb> and we tend to abuse the stack
[13:28:38] <ChrisMorgan> Precisely ☹
[13:28:56] *** Quits: urbanserj (urbanserj@3E28BD5F.398BF19F.86BD9C9E.IP) (Ping timeout)
[13:29:08] *** Joins: alkino (alkino@A63A62C8.6897AE13.4B164862.IP)
[13:29:11] * ChrisMorgan wonders just how much waste there must be going on there to overflow a 2MB stack in 255 easy steps of recursion.
[13:29:53] *** Joins: ramitos (ramitos@moz-5AC0C94E.netvisao.pt)
[13:30:19] *** Joins: NiccosSystem (NiccosSyst@moz-ED196BB4.customer.lyse.net)
[13:30:29] *** Quits: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net) (Connection reset by peer)
[13:30:44] * ChrisMorgan continues to hone his pretty-print-everything-file-by-file ignore rules… having fixed the pretty printer ICEing on `/***` (PR coming tomorrow once I write a test for it), no new compile failures have come up yet…
[13:31:33] *** Joins: edwardw (Mibbit@24D7341C.32602B75.B9C6B12A.IP)
[13:31:37] <ChrisMorgan> Yay! It all works ☺
[13:32:22] <ChrisMorgan> Skipped all ignore-(fast|test|pretty) tests and src/test/run-make/crate-data-smoke/crate.rs (it *shouldn't* have tried to resolve that `extern crate error;`, but it *did*).
[13:32:41] *** Joins: Diamond (dick@moz-80556682.ks.ks.cox.net)
[13:32:43] *** Joins: urbanserj (urbanserj@3E28BD5F.398BF19F.86BD9C9E.IP)
[13:35:26] <Darnuria> pnkfelix: Sorry for double email, thunderbird have some difficulty today L)
[13:35:40] <Darnuria> pnkfelix: For the slides? What the plan? :D
[13:35:53] <Darnuria> what is the plan*.
[13:36:38] *** Joins: mib_ke4hub (Mibbit@moz-A61AFCEA.broadband.tenet.odessa.ua)
[13:36:44] *** Quits: mib_ke4hub (Mibbit@moz-A61AFCEA.broadband.tenet.odessa.ua) (Quit: mib_ke4hub)
[13:36:50] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[13:38:27] <mindcat> how do search the doc?
[13:38:39] <mindcat> I mean rust doc
[13:38:45] <mindcat> rust module docs
[13:39:00] <pnkfelix> Darnuria: I don't have the machine that I used to make the slides with me right now
[13:39:05] <SiegeLord> There's a search field on the top
[13:39:09] <pnkfelix> Darnuria: but I can/will put them up on github as well
[13:39:20] <pnkfelix> Darnuria: having a unified place for them would be good too
[13:39:24] <Darnuria> pnkfelix: No problem I ask for the future :)
[13:39:34] *** Quits: ramitos (ramitos@moz-5AC0C94E.netvisao.pt) (Quit: Textual IRC Client: www.textualapp.com)
[13:39:40] <pnkfelix> Darnuria: so if you want to make a unified place for us to put these things, that is fine with me
[13:39:46] <mindcat> SiegeLord: that does not work for me
[13:40:01] <ChrisMorgan> Hmm. Initial analysis suggests only 157/2013 files pretty printed have no diff: 7.8%.
[13:40:03] <SiegeLord> Did you enable javascript?
[13:40:07] <mindcat> SiegeLord: yes
[13:40:20] <Darnuria> I plan to make a github-organisation like "rust meetup paris" and maybe putting everything we do on it. Like Hacks, Demo, Slides etc
[13:40:29] <pnkfelix> Darnuria: yes that sounds good to me.
[13:40:31] <Darnuria> pnkfelix: That's Ok?
[13:40:32] <SiegeLord> Dunno then... works for me. Maybe it's still buggy... it's written in javascript, not Rust
[13:40:38] <Darnuria> pnkfelix: Nice. :)
[13:40:40] <SiegeLord> What can you expect, you know?
[13:40:42] <pnkfelix> Darnuria: then I'd be able to throw my little circles demos there
[13:40:53] <mindcat> file:///usr/share/doc/rust/std/i32/index.html?search=l
[13:41:02] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[13:41:13] <ChrisMorgan> Well, bed time now. Back to seeing if it's possible to fix the pretty printer somewhat tomorrow. ☺
[13:41:35] *** Quits: edwardw (Mibbit@24D7341C.32602B75.B9C6B12A.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[13:41:49] <ChrisMorgan> (Hmm. It changes a short, nicely laid out struct with one field per line to `pub struct ExpectedError { line: uint, kind: ~str, msg: ~str }`. I disagree with it there.)
[13:42:08] <SiegeLord> mindcat: How old's your master?
[13:42:11] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[13:42:23] *** Quits: alonlevy (alon@moz-61A0AD83.red.bezeqint.net) (Ping timeout)
[13:42:27] <SiegeLord> Or you know what I mean... when did you last build it?
[13:42:36] <Darnuria> pnkfelix: Yep ! We will need an email adress for the "organisation github truc stuff" Maybe having a multiple redirection with @mozsomething is possible?
[13:42:37] <mindcat> rustc 0.10-pre (edf351e 2014-02-22 22:01:54 -0800)
[13:42:50] <SiegeLord> Somebody snuck in some Rust code in there and it understandably broke a few days ago
[13:42:55] <Darnuria> pnkfelix: Or @rustParisThing?
[13:43:12] <Darnuria> pnkfelix: That not urgent though
[13:43:17] *** Joins: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net)
[13:43:20] <pnkfelix> Darnuria: I do not know off-hand.  I know one can ask for email aliases on Bugzilla; that is how I got pnkfelix@mozilla
[13:43:42] <pnkfelix> Darnuria: so maybe that would be the way to go, for the long term
[13:43:55] *** Joins: edwardw (edwardw@BB690835.D7DB55D8.50B134B9.IP)
[13:44:30] <ChrisMorgan> … oh. The pretty printer expands `mod x;` to `mod x { … all the things … }`? ☹. Very ☹ indeed.
[13:44:44] <Darnuria> pnkfelix: Yep thats definitively not urgent.
[13:45:03] <pnkfelix> Darnuria: yes.  It seems to me like you can change the email for the organization later anyway
[13:45:06] *** Quits: frza (frza@EA5BFF77.2B9073C9.204B78AE.IP) (Quit: frza)
[13:45:34] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[13:45:58] <pnkfelix> Darnuria: so maybe make an organization for ParisRustMeetup and then make you me and Nical organizers for the organization?
[13:46:16] <pnkfelix> Darnuria: I mean "Owners", not "organizers"
[13:46:26] *** Quits: trobertson (quassel@moz-A4AC319.sd.sd.cox.net) (Ping timeout)
[13:46:51] <Darnuria> pnkfelix: Thats already done no?
[13:47:25] *** Joins: trobertson (quassel@moz-A4AC319.sd.sd.cox.net)
[13:47:41] <mindcat> Uncaught SyntaxError: Unexpected identifier 
[13:47:43] <pnkfelix> Darnuria: Is there an organization on github already?
[13:47:47] <mindcat> main.js:585
[13:48:02] *** Quits: daschl (Adium@moz-DC6DE6E2.vie.surfer.at) (Quit: Leaving.)
[13:48:17] <SiegeLord> Hmm... I think Process input is broken, or I don't understand something
[13:48:28] *** Joins: io2 (io2@moz-EE406A5.home.otenet.gr)
[13:48:29] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[13:48:33] <Darnuria> pnkfelix: So far yes. I made it 5min before you ask me. XD
[13:48:40] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[13:48:43] <mindcat> I just see my chromium, console output that error
[13:48:47] <Darnuria> https://github.com/orgs/Rust-Meetup-Paris/teams/owners
[13:49:02] <SiegeLord> mindcat: I did say somebody broke it a few days ago... Feb 22nd is a few days ago. Upgrade your Rust
[13:49:14] *** Quits: alexherbo2 (alexherbo2@moz-F4D73D7E.w83-199.abo.wanadoo.fr) (Quit: WeeChat 0.4.3-dev)
[13:49:24] <mindcat> SiegeLord: ok...
[13:49:26] <Darnuria> I will push my slides and a fairly "simple" index for the gh-pages
[13:49:28] <pnkfelix> Darnuria: greast
[13:50:46] *** Quits: doener (bs@moz-AA189A5A.unitymedia.biz) (Ping timeout)
[13:50:47] <Seldaek> Darnuria, pnkfelix: organizing a meetup in paris? that's nice, bit far from home still but better than SFO
[13:50:48] *** Joins: aurynj (Eon@583ABBE5.60FA2E28.B9E25744.IP)
[13:51:01] <SiegeLord> Oh wait... maybe Process no longer waits on drop()
[13:51:13] <Leo`> the removal of the * syntax for unary tuples is sad
[13:51:23] <Leo`> it's causing me tons of refactoring :|
[13:51:31] <Darnuria> Seldaek: We make one yesterday
[13:52:04] <lpy> How could I determine if the string is empty?
[13:52:10] <Seldaek> Darnuria: oh well, did you record it by any chance?
[13:52:17] <Darnuria> ~40 peoples, something like 15persons who "really" want to do it again and contribute
[13:52:48] <Seldaek> nice
[13:52:58] <Darnuria> Seldaek: I theory yes we will put the talks on Airmozilla but... When I can't say nothing... Like debian "when it's done"
[13:53:20] *** Quits: Aszarsha (Aszarsha@moz-DB5E705F.rev.numericable.fr) (Ping timeout)
[13:53:20] <Seldaek> I've been meaning to do one here (zurich) but no time and frankly I don't think I'd attract that big a crowd yet
[13:53:37] *** Joins: fyolnish (fyolnish@5E7C820E.3B5C4E68.8646540C.IP)
[13:53:47] *** Joins: patpat (patpat@moz-1599AAE4.as13285.net)
[13:53:50] *** Joins: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net)
[13:54:06] *** Joins: doener (bs@moz-AA189A5A.unitymedia.biz)
[13:54:41] <kimundi> rusti: "".is_empty() // <- lpy 
[13:54:43] -rusti- true
[13:54:51] <Seldaek> Darnuria: either way it's cool to see the rust love spreading a bit in europe, it's been too US centric so far
[13:54:55] <lpy> kimundi: thank you
[13:55:21] *** Quits: fyolnish (fyolnish@5E7C820E.3B5C4E68.8646540C.IP) (Ping timeout)
[13:55:34] <Darnuria> Felix gaved a very nice introduction talk to Rust, Nical has made who for C++ expressing his experiencie in rust as C++ programmer and I make one on Contribution to rust for newbies like me.
[13:56:01] <maggick> felixc: nice presentation yesterday evening
[13:56:15] *** Joins: lunaryorn (lunaryorn@moz-2DE1BD3D.dynamic.mnet-online.de)
[13:56:31] <Darnuria> maggick: s/felixc/pnkfelix  ? :)
[13:56:34] <pnkfelix> look at that, there are two felix's in the room
[13:56:43] <maggick> pnkfelix: 
[13:56:45] <Darnuria> Funny thing.
[13:56:47] <maggick> yep
[13:56:57] <pnkfelix> it doesn't happen all that often
[13:57:13] <maggick> sorry felixc (2 free hl)
[13:57:19] <pnkfelix> maggick: Thanks.  I was worried about boring people but it sounds like I might have gone too fast for some
[13:57:32] <maggick> so pnkfelix : nice presentation yesterday evening
[13:58:04] <maggick> what I regret was not te be able to code a little bit (but i left early)
[13:58:51] <pnkfelix> maggick: I suspect future meetups will be a little smaller and we'll be able to maybe break up into small working groups
[13:59:01] <maggick> no your presentation was usefull now I want to read the doc to understand and code in rust
[13:59:16] <maggick> I hope so
[13:59:23] *** Joins: fyolnish (fyolnish@5E7C820E.3B5C4E68.8646540C.IP)
[13:59:58] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Ping timeout)
[14:00:05] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[14:00:30] <Darnuria> yep less talk more hack!
[14:00:40] <SiegeLord> Did Default get removed from the prelude?
[14:01:03] *** Quits: fyolnish (fyolnish@5E7C820E.3B5C4E68.8646540C.IP) (Ping timeout)
[14:01:47] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[14:03:19] <kimundi> SiegeLord: which one? fmt::Default is now fmt::Show
[14:03:28] <SiegeLord> default::Default
[14:03:34] <kimundi> ah, no idea
[14:04:29] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[14:04:37] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Quit: Leaving.)
[14:04:41] <SiegeLord> Ah, bjz'd
[14:04:53] <SiegeLord> First he breaks num::Zero and now default::Default :P
[14:04:58] <SiegeLord> I'll just make my own darn trait
[14:06:07] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[14:06:07] *** ChanServ sets mode: +o jdm
[14:06:25] *** Joins: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com)
[14:06:38] *** Joins: dschatzberg (dschatzber@moz-668DB0D9.bu.edu)
[14:07:08] *** Quits: canhtak (canhtak@moz-251024EB.wl.t.ulaval.ca) (Quit: canhtak)
[14:07:52] *** Quits: lunaryorn (lunaryorn@moz-2DE1BD3D.dynamic.mnet-online.de) (Quit: Textual IRC Client: www.textualapp.com)
[14:08:19] *** Joins: sbalmos (quassel@CA5677B6.576D0C1.ED2EFC1B.IP)
[14:10:27] *** Joins: jackneill (jackneill@moz-5A5F7142.pool.digikabel.hu)
[14:10:38] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[14:10:51] *** Joins: dave1629 (dave@5F1E5A18.C8A19C38.DDE5D3F6.IP)
[14:11:14] <bjz> SiegeLord: I didn't change fmt::Defaut :)
[14:11:16] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[14:11:25] *** Quits: victorporof (victorporo@moz-FFB76956.cpe.net.cable.rogers.com) (Quit: victorporof)
[14:11:26] <SiegeLord> You removed it from the prelude, which makes it pointless to use now
[14:11:31] *** Quits: dave1629 (dave@5F1E5A18.C8A19C38.DDE5D3F6.IP) (Quit: dave1629)
[14:11:36] <bjz> whya?
[14:11:52] *** Quits: pzol (pzol@86821BC.DEB41A6D.AADC76B.IP) (Ping timeout)
[14:12:07] <SiegeLord> Not only is it 16 characters to invoke, but I also now have to 'use' it everywhere
[14:12:14] *** Joins: pzol (pzol@86821BC.DEB41A6D.AADC76B.IP)
[14:13:25] <SiegeLord> *18 characters
[14:13:32] <bjz> feel free to open an issue
[14:13:47] <bjz> I think Default should be discussed anyway
[14:14:02] <SiegeLord> Simpler to make my own trait... it'll be shorter and I can legitimately pub use it
[14:14:08] <SiegeLord> Flag::zero()
[14:14:20] <bjz> and yes, that is probably more desciptive
[14:14:57] *** Joins: frza (frza@EA5BFF77.2B9073C9.204B78AE.IP)
[14:14:57] <bjz> for your domain
[14:16:30] <Darnuria> There is a Rust logo in SVG?
[14:17:03] <bjz> yep
[14:17:10] <bjz> in etc I think
[14:17:19] <Darnuria> Oh nice.
[14:17:32] *** Joins: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net)
[14:17:35] *** Joins: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org)
[14:17:55] <pnkfelix> Darnuria: https://github.com/mozilla/rust/issues/11562
[14:19:37] <Darnuria> pnkfelix: I made a logo sugestion for rust yesterday. You can found it on the computer of the video controller.
[14:19:57] <Darnuria> I stick it on an "apple" on a post'it. ;)
[14:20:27] <Darnuria> And there is the full name on it XD
[14:20:56] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[14:21:45] <SiegeLord> What are non-trait methods good for, when trait methods exist?
[14:22:03] *** Joins: paldepind (simon@8C529550.87451125.F2979BBF.IP)
[14:22:33] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[14:22:58] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[14:26:15] *** Joins: dranov (dranov@5F9B6AD9.82C4B75C.FB866788.IP)
[14:26:21] <SiegeLord> Hmm... and extern fn()'s are now implicitly extern "C" I take it. I guess that's consistent
[14:27:06] *** Quits: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[14:30:04] *** Quits: sellout (Adium@moz-2081FE17.hsd1.co.comcast.net) (Quit: Leaving.)
[14:31:41] <lessless> hey, folks, the date when rust api will be stabilized is on the horizon already? 
[14:31:43] *** Joins: fyolnish (fyolnish@5E7C820E.3B5C4E68.8646540C.IP)
[14:31:48] *** Joins: jmmk (jmmk@moz-588F65EA.c3-0.smr-ubr1.sbo-smr.ma.cable.rcn.com)
[14:32:05] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[14:32:11] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[14:33:24] *** Quits: fyolnish (fyolnish@5E7C820E.3B5C4E68.8646540C.IP) (Ping timeout)
[14:33:50] *** Joins: fyolnish (fyolnish@moz-F3DC6160.whatbox.ca)
[14:35:06] *** Quits: Krymise (Nietzsche@moz-CA789EF5.nwrknj.fios.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[14:35:35] *** Quits: jmmk (jmmk@moz-588F65EA.c3-0.smr-ubr1.sbo-smr.ma.cable.rcn.com) (Ping timeout)
[14:36:55] <bjz> lessless: probably at 1.0 I'd assume
[14:37:10] <bjz> lessless: but it's a gradual process
[14:37:51] <eddyb> people expect miracles
[14:37:57] <eddyb> (and my wand is broken)
[14:38:38] *** Joins: victorporof (victorporo@13F2CEC5.7672369.D8E68FF6.IP)
[14:39:23] *** Joins: FreeFull (freefull@moz-3EB096D2.as13285.net)
[14:40:21] *** Parts: alkino (alkino@A63A62C8.6897AE13.4B164862.IP) (WeeChat 0.4.3)
[14:40:45] <eddyb> https://en.wikipedia.org/wiki/Monad_%28philosophy%29 oh dear
[14:41:28] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[14:42:31] *** Joins: herrwolfe45 (user@CACBD77F.4EBBBE62.C082B7DC.IP)
[14:42:40] <SiegeLord> Is there a nice way to fail with the string stored in Result<T, ~str>?
[14:42:55] *** Quits: glaebhoerl (glaebhoerl@moz-3590251D.kabelnet.hu) (Ping timeout)
[14:43:08] <eddyb> attempts to add such functionality to std were rejected, I think
[14:43:08] <Ms2ger> Err(x) => fail!({}, x)
[14:43:10] <Ms2ger> ?
[14:43:18] <eddyb> fail!(x) even
[14:43:37] *** Quits: paldepind (simon@8C529550.87451125.F2979BBF.IP) (Quit: paldepind)
[14:44:05] *** Quits: ulrik (ulrikdamm@E000D799.6AFCF91.500EA053.IP) (Client exited)
[14:44:20] <SiegeLord> That's a bummer
[14:44:27] *** Joins: ulrik (ulrikdamm@E000D799.6AFCF91.500EA053.IP)
[14:44:53] *** Joins: sankha93 (sankha93@7061CD01.D6BD0D91.22D41759.IP)
[14:44:58] <mindcat> https://gist.github.com/mindcat/9230626
[14:45:11] <SiegeLord> It'd imagine it being res.unwrap_handle(|e| fail!(e))
[14:45:15] <mindcat> it looks fine, but why compile fail?
[14:45:26] <mindcat> tell me "!!! (resolving module in lexical scope) module wasn't actually a module!"
[14:45:59] *** Joins: matp (matp@moz-16FE1E05.matp.at)
[14:46:27] <eddyb> magic
[14:46:39] <bstrie> mindcat: which line?
[14:46:46] <bstrie> <-- doesn't have a compiler on-hand atm
[14:46:52] *** Quits: ulrik (ulrikdamm@E000D799.6AFCF91.500EA053.IP) (Client exited)
[14:46:52] *** Joins: ulrik (ulrikdamm@E000D799.6AFCF91.500EA053.IP)
[14:47:07] <mindcat> http://paste.ubuntu.com/7000062/
[14:47:07] *** Quits: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net) (Quit: I'm sure it's perfectly safe)
[14:47:10] <mindcat> this is error
[14:47:16] <eddyb> fn new<u8>(num: u8) -> varint { // this is wrong
[14:47:24] *** Joins: benjamin_ (benjamin@moz-5FBEA1FB.dip0.t-ipconnect.de)
[14:47:32] *** Joins: jviereck (Adium@moz-E8EB1928.ethz.ch)
[14:47:57] *** Quits: benjamin_____ (benjamin@moz-15335B53.dip0.t-ipconnect.de) (Ping timeout)
[14:48:11] <mindcat> eddyb: I just forgot it..
[14:48:18] <eddyb> mindcat: you have to use tr_varint::new
[14:48:23] <eddyb> but that thing is a mess
[14:48:34] <eddyb> you don't need multiple implementations
[14:48:52] <eddyb> you just need a Bitwise bound on T
[14:48:54] *** Joins: glaebhoerl (glaebhoerl@moz-3590251D.kabelnet.hu)
[14:48:55] <SiegeLord> Looks like this was an attempt: https://github.com/mozilla/rust/pull/12163
[14:49:04] <SiegeLord> It wasn't rejected outright, but the submitter ragequit
[14:49:09] <eddyb> lol
[14:49:30] <eddyb> mindcat: OMG ALL THE ;;;;;;
[14:49:36] * eddyb goes mad
[14:49:43] <mindcat> eddyb: oh...
[14:49:48] <eddyb> impl VarInt {fn new<T: Bitwise + Pod>(x: T) -> VarInt {...}}
[14:49:52] <mindcat> rusti: ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
[14:49:55] -rusti- pastebinned 7 lines of output: http://ix.io/a6T
[14:50:25] <mindcat> eddyb: ok...
[14:50:34] <eddyb> you will have to use FromPrimitive, also
[14:50:43] *** Joins: jmmk (jmmk@moz-588F65EA.c3-0.smr-ubr1.sbo-smr.ma.cable.rcn.com)
[14:50:50] <eddyb> to create the constants - wait, no, you don't need to
[14:51:00] <mindcat> but I want unsigned int for that
[14:51:03] <eddyb> so Bitwise + Pod should be enough
[14:51:14] <eddyb> I guess Unsigned includes Bitwise?
[14:51:20] <mindcat> eddyb: http://stackoverflow.com/questions/19758270/read-varint-from-linux-sockets
[14:51:20] <eddyb> I can't remember the trait hierarchy
[14:51:32] <mindcat> eddyb: I am doing implement that
[14:51:44] *** Joins: reyre (reyre@moz-89E9865B.com)
[14:51:45] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: rcirc on GNU Emacs 24.3.1)
[14:52:31] <eddyb> mindcat: <T: Unsigned + Bitwise + Pod> should be enough
[14:52:37] *** Quits: jmmk (jmmk@moz-588F65EA.c3-0.smr-ubr1.sbo-smr.ma.cable.rcn.com) (Ping timeout)
[14:52:39] <mindcat> eddyb: Oh
[14:52:47] <doomlord_> if you have a generit struct Foo<T>{}  , an impl with a constructor function,    impl<T> Foo<T> { fn new()->Foo<T>{}},   then a type Foo1 = Foo<SomethingConcrete> ... is it possible to call the constructor like this   Foo1::new() ... it doesn't seem to work for me, but if i use the original struct name passing typeparams it does
[14:53:04] <mindcat> eddyb: so something "Unsigned", where that from?
[14:53:09] *** Joins: bjustin (bjustin@moz-8FC28563.sierrabravo.net)
[14:53:12] <eddyb> doomlord_: with type aliases, no
[14:53:18] <eddyb> doomlord_: consider using default type params
[14:53:31] <doomlord_> ah does tust have those now?
[14:53:38] <eddyb> yupp, behind a feature gate
[14:53:49] <eddyb> the core devs are almost giving in to enabling it by default
[14:53:50] <doomlord_> wow! 
[14:53:56] <eddyb> since Hash uses it extensively <3
[14:54:06] <eddyb> (thanks, erickt)
[14:54:17] <eddyb> mindcat: search the docs (std::num)
[14:54:23] <doomlord_> one more thing to appease C++ heads :)
[14:54:28] <mindcat> eddyb: ok
[14:54:48] *** Quits: jviereck (Adium@moz-E8EB1928.ethz.ch) (Quit: Leaving.)
[14:54:49] *** Joins: jviereck (Adium@moz-E8EB1928.ethz.ch)
[14:54:57] *** Quits: benjamin_ (benjamin@moz-5FBEA1FB.dip0.t-ipconnect.de) (Ping timeout)
[14:56:03] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[14:56:23] *** Joins: daschl (Adium@moz-DC6DE6E2.vie.surfer.at)
[14:56:36] <doomlord_> can you make a 'newtype' (?)   struct Vec3f(Vec3<f32>)  .. single element tuple struct... or have those changed
[14:56:38] *** Joins: nszceta (hax@moz-E458A7C0.pharm.pitt.edu)
[14:56:57] <doomlord_> (you're right the default type param is more useful for me but i'd still be curious to know otherwise)
[14:57:29] <eddyb> you can, but you can't do *x on it
[14:57:56] *** Joins: lpy (lpy@12172131.F09091A8.1348A864.IP)
[14:58:15] *** Joins: dougxxx_ (anonymous@moz-21B0BD70.dyn.iinet.net.au)
[14:59:43] *** Quits: dougxxx_ (anonymous@moz-21B0BD70.dyn.iinet.net.au) (Quit: dougxxx_)
[15:00:34] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[15:01:50] <doomlord_> defaults clean up a hell of a lot elsewhere for me
[15:02:15] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[15:04:20] *** Quits: frza (frza@EA5BFF77.2B9073C9.204B78AE.IP) (Quit: frza)
[15:04:51] *** Quits: daschl (Adium@moz-DC6DE6E2.vie.surfer.at) (Quit: Leaving.)
[15:05:06] *** Joins: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP)
[15:06:42] *** Joins: jmmk (jmmk@moz-588F65EA.c3-0.smr-ubr1.sbo-smr.ma.cable.rcn.com)
[15:07:08] *** lpy is now known as lpy|codeforces
[15:07:44] *** Quits: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[15:09:40] *** Quits: ndrei (avo@5958B30C.7CEC4B5E.866E0A25.IP) (Ping timeout)
[15:11:06] *** Joins: ndrei (avo@5958B30C.7CEC4B5E.866E0A25.IP)
[15:11:46] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[15:11:53] *** Joins: dougxxx_ (dougxxx@moz-21B0BD70.dyn.iinet.net.au)
[15:12:43] *** Quits: jmmk (jmmk@moz-588F65EA.c3-0.smr-ubr1.sbo-smr.ma.cable.rcn.com) (Ping timeout)
[15:13:23] *** Quits: vgeddes (vincent.ge@moz-D8D4FE4D.dsl.mweb.co.za) (Quit: ERC Version 5.3 (IRC client for Emacs))
[15:14:42] *** Joins: sellout (Adium@990A0A80.F4CAF5DC.C5F4E277.IP)
[15:15:33] *** Quits: Rusky (russell@moz-C0CD0CF0.slkc.qwest.net) (Quit: Leaving.)
[15:15:57] *** Quits: ndrei (avo@5958B30C.7CEC4B5E.866E0A25.IP) (Ping timeout)
[15:16:00] *** Joins: Rusky (russell@moz-C0CD0CF0.slkc.qwest.net)
[15:16:16] *** Joins: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP)
[15:16:33] *** Quits: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com) (Ping timeout)
[15:17:22] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Quit: Lost terminal)
[15:17:29] *** Quits: jviereck (Adium@moz-E8EB1928.ethz.ch) (Quit: Leaving.)
[15:17:36] *** Joins: lbonn (lbonn@moz-FBFAA8BC.rev.sfr.net)
[15:18:03] *** Joins: dukeleto (dukeleto@moz-3E7A0A89.ptld.qwest.net)
[15:18:11] *** dougxxx is now known as IRCMonkey36703
[15:18:16] *** Joins: ndrei (avo@5958B30C.7CEC4B5E.866E0A25.IP)
[15:18:34] *** Quits: Ms2ger (Ms2ger@moz-6F449C8.ugent.be) (Ping timeout)
[15:19:09] *** dougxxx_ is now known as dougxxx
[15:19:58] *** Joins: frza (frza@EA5BFF77.2B9073C9.204B78AE.IP)
[15:22:55] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Ping timeout)
[15:23:06] *** Quits: ulrik (ulrikdamm@E000D799.6AFCF91.500EA053.IP) (Client exited)
[15:23:28] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[15:23:34] *** Joins: ulrik (ulrikdamm@E000D799.6AFCF91.500EA053.IP)
[15:25:16] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[15:26:09] *** Joins: wilma (Mibbit@DDDAC05D.56191BDD.5C36AA02.IP)
[15:26:12] *** Quits: ndrei (avo@5958B30C.7CEC4B5E.866E0A25.IP) (Ping timeout)
[15:27:55] *** Parts: wilma (Mibbit@DDDAC05D.56191BDD.5C36AA02.IP) ()
[15:28:39] *** Joins: sunfish (chatzilla@moz-42DA0C69.dsl.dynamic.sonic.net)
[15:30:46] *** Quits: dukeleto (dukeleto@moz-3E7A0A89.ptld.qwest.net) (Ping timeout)
[15:30:52] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[15:30:57] *** Joins: ndrei (avo@5958B30C.7CEC4B5E.866E0A25.IP)
[15:31:02] *** Joins: Kynes (Kynes@moz-3DC6C6E7.mit.edu)
[15:31:03] *** Joins: sankha93_ (uid12218@moz-31ABA2C0.irccloud.com)
[15:31:20] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[15:31:22] *** Quits: dougxxx (dougxxx@moz-21B0BD70.dyn.iinet.net.au) (Quit: )
[15:31:36] *** sankha93_ is now known as sankha93|bot
[15:32:04] *** Joins: jdsanders (Adium@moz-EB8DC389.hlrn.qwest.net)
[15:32:11] *** Quits: ricepuddin (graham@moz-7D68765A.cable.virginm.net) (Ping timeout)
[15:32:19] *** Parts: jdsanders (Adium@moz-EB8DC389.hlrn.qwest.net) ()
[15:32:36] *** Quits: aurynj (Eon@583ABBE5.60FA2E28.B9E25744.IP) (Quit: Leaving)
[15:32:52] *** Joins: lawrence (lawrence@moz-289204AF.wireless.utoronto.ca)
[15:33:24] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[15:34:34] *** Joins: jviereck (Adium@moz-E8EB1928.ethz.ch)
[15:34:39] *** Quits: ndrei (avo@5958B30C.7CEC4B5E.866E0A25.IP) (Ping timeout)
[15:34:54] *** Joins: daschl (Adium@moz-DC6DE6E2.vie.surfer.at)
[15:36:30] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Quit: Leaving...)
[15:37:01] *** Quits: kris (kris@moz-147EE6DF.diku.dk) (Ping timeout)
[15:37:29] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[15:37:34] *** Joins: kris (kris@moz-147EE6DF.diku.dk)
[15:38:56] *** Quits: kris (kris@moz-147EE6DF.diku.dk) (Connection reset by peer)
[15:39:35] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[15:39:37] *** Quits: Kxepal (Miranda@moz-BAA7EE.pppoe.mtu-net.ru) (Ping timeout)
[15:40:30] *** Quits: reyre (reyre@moz-89E9865B.com) (Quit: ZNC - http://znc.in)
[15:41:44] *** Joins: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net)
[15:43:34] *** Quits: daschl (Adium@moz-DC6DE6E2.vie.surfer.at) (Quit: Leaving.)
[15:43:47] *** Joins: jmmk (jmmk@moz-3BDBD2C0.hfc.comcastbusiness.net)
[15:43:50] *** Quits: fyolnish (fyolnish@moz-F3DC6160.whatbox.ca) (Client exited)
[15:43:52] <Darnuria> the rust logo was made by hand?
[15:44:11] *** Joins: fyolnish (fyolnish@5E7C820E.3B5C4E68.8646540C.IP)
[15:44:35] *** Joins: orospakr (orospakr@moz-4514BEF2.cpe.teksavvy.com)
[15:45:58] *** Quits: fyolnish (fyolnish@5E7C820E.3B5C4E68.8646540C.IP) (Ping timeout)
[15:46:19] *** Joins: voxpopuli (fanservice@D91450A9.CF1EC41D.689607DE.IP)
[15:47:31] <nical> Darnuria: not sure what you mean, it was designed by seam martell
[15:47:33] <nical> sean*
[15:47:35] *** Joins: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[15:47:43] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[15:47:53] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[15:48:40] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[15:49:12] <edwardw> I just love that logo
[15:49:15] <nical> Darnuria: along with a lot of mozilla related logos: http://blog.seanmartell.com/brands/
[15:49:45] *** Joins: adwhit (Mibbit@87D98E32.4046EB22.428F94DD.IP)
[15:49:49] <pczarn> will default_type_param_usage be enabled by default as well?
[15:50:04] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[15:50:08] *** Joins: reyre (reyre@moz-72FEF1DB.dsl.bell.ca)
[15:52:02] *** Quits: jviereck (Adium@moz-E8EB1928.ethz.ch) (Quit: Leaving.)
[15:53:22] <SiegeLord> Hah, interesting unused Rust logo: http://blog.seanmartell.com/wp-content/uploads/2012/03/logo_0039_40.png
[15:54:06] <adwhit> hi, got a(nother) question: I have a struct Cpu which contains 3 other structs. I've been happily passing it around using &mut self and &mut Cpu and it was working fine. Then I added a fourth member "buf: ~str" and now it the compiler is throwing loads of errors (without me even using buf)
[15:54:19] <adwhit> the error is "cannot move out of dereference of &mut pointer"
[15:54:27] <adwhit> so have I been doing my code all wrong?
[15:54:44] *** Joins: Aszarsha (Aszarsha@moz-DB5E705F.rev.numericable.fr)
[15:54:56] *** Quits: Ferreus (ferreus@moz-4A16C4D4.dip0.t-ipconnect.de) (Ping timeout)
[15:55:03] *** Joins: ndrei (avo@5958B30C.7CEC4B5E.866E0A25.IP)
[15:55:26] *** Quits: chenyang (user@moz-83728A1C.hsd1.ca.comcast.net) (Ping timeout)
[15:55:55] *** Joins: eneas (Thunderbir@moz-AF151E0C.red-83-43-28.dynamicip.rima-tde.net)
[15:56:58] *** Joins: toqueteos (Mibbit@moz-B9CC0C90.red-88-10-31.dynamicip.rima-tde.net)
[15:57:03] <Darnuria> nical: I ask because it's too regular for me XD
[15:57:15] *** Quits: Aszarsha (Aszarsha@moz-DB5E705F.rev.numericable.fr) (Ping timeout)
[15:58:30] <adwhit> hmm guess it's a mystery
[15:58:47] <toqueteos> hello there guys! has anyone reported the double header issue for subpackages in rustdoc? 
[15:59:25] *** Quits: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net) (Input/output error)
[15:59:32] <toqueteos> sorry, submodules
[16:00:30] *** Quits: lawrence (lawrence@moz-289204AF.wireless.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[16:00:40] *** Quits: edwardw (edwardw@BB690835.D7DB55D8.50B134B9.IP) (Quit: Leaving...)
[16:00:50] <toqueteos> example of that: http://i.imgur.com/afpT6cb.png
[16:00:59] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[16:01:56] *** Quits: ndrei (avo@5958B30C.7CEC4B5E.866E0A25.IP) (Ping timeout)
[16:02:43] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[16:02:44] <cmr> toqueteos: yeah, there's a bug open for it somewhere
[16:03:13] <toqueteos> oh here it is https://github.com/mozilla/rust/issues/12386
[16:03:15] *** Quits: Zr40 (zr40@EE4BB9F5.926C319A.BE2F4011.IP) (Quit: leaving)
[16:03:15] *** Joins: Jarrett (chatzilla@moz-465FA06E.dhcp.rvsd.ca.charter.com)
[16:03:20] <toqueteos> title is a little bit misleading..
[16:03:20] <cmr> adwhit: so what you are experiencing is that Cpu was Pod before, and now it is no longer Pod
[16:03:29] *** Joins: fyolnish (fyolnish@5E7C820E.3B5C4E68.8646540C.IP)
[16:04:23] <cmr> adwhit: Pod means "plain old data", and that it has no destructors etc.
[16:04:41] <mindcat> ;Q
[16:04:46] *** Quits: mindcat (mindcat@D1D811CE.67E5BEA2.57E3C596.IP) (Quit: leaving)
[16:05:07] <cmr> adwhit: so your code before wasn't *incorrect*, but now that it's no longer Pod (~str has a destructor because it's malloc'd memory that needs to get freed), your previously correct code is now incorrect because it would be causing double frees etc.
[16:05:09] *** Quits: fyolnish (fyolnish@5E7C820E.3B5C4E68.8646540C.IP) (Ping timeout)
[16:05:33] *** Joins: fyolnish (fyolnish@moz-F3DC6160.whatbox.ca)
[16:05:56] *** Joins: lawrence (lawrence@moz-C186E1F7.wireless.utoronto.ca)
[16:06:00] <adwhit> cmr: OK thanks
[16:06:14] <lessless> bjz, I mean in terms of time :) 
[16:06:59] <adwhit> cmr: I just want a buffer to put error messages etc that I flush after each cycle
[16:07:14] <adwhit> cmr: is there a better way to do it?
[16:07:29] <cmr> adwhit: no, that's fine. it just means the rest of your code needs to be more careful about what it does with a Cpu.
[16:07:57] <cmr> I'm willing to be you had bugs where you were accidentally mutating a *copy* of Cpu...
[16:08:38] <adwhit> cmr: that's what I suspected I might have been doing, it's difficult to tell
[16:09:00] <adwhit> the cpr.ram is mutating correctly though
[16:09:10] <adwhit> cpu.ram*
[16:10:13] <adwhit> so here is a typical line that is now raising an error: fn JGE(cpu : &Cpu) -> bool  { if cpu.getflag(NEGF) == cpu.getflag(OVERF) { true } else {false} }
[16:10:27] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[16:10:27] *** Joins: AvianFlu (AvianFlu@moz-723527FF.nycmny.fios.verizon.net)
[16:11:00] <adwhit> 427:58 error: cannot move out of dereference of & pointer
[16:11:17] <sp3d> how is getflag declared? it should take "&self" rather than "self"
[16:11:37] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[16:11:54] <sp3d> the latter transfers ownership into the method, moving out of the variable you call the method on
[16:11:56] *** Quits: victorporof (victorporo@13F2CEC5.7672369.D8E68FF6.IP) (Quit: victorporof)
[16:13:38] <adwhit> cmr: fixed! amazing how you can figure it out so easily ^_^
[16:13:41] *** Joins: victorporof (victorporo@13F2CEC5.7672369.D8E68FF6.IP)
[16:14:27] <adwhit> cmr: I realise I still have a huge amount to learn especially re: memory layout
[16:14:59] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[16:15:49] *** Quits: ghaering (Instantbir@4DECFBA5.E64A0519.C0DAB1E3.IP) (Ping timeout)
[16:17:31] *** Joins: kris (kris@moz-6D20263F.fullrate.dk)
[16:19:23] *** Joins: dwrensha (chatzilla@moz-445F8B42.hsd1.ca.comcast.net)
[16:20:51] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Quit: Leaving.)
[16:22:58] *** Quits: voxpopuli (fanservice@D91450A9.CF1EC41D.689607DE.IP) (Ping timeout)
[16:23:49] *** Quits: Diamond (dick@moz-80556682.ks.ks.cox.net) (Quit: Leaving.)
[16:24:30] *** Joins: edwardw (edwardw@4112974A.B4358688.30F15291.IP)
[16:24:56] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[16:26:57] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[16:27:16] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (No route to host)
[16:29:03] *** Joins: skade (skade@FD6D9E76.8BA743A6.6B74C29D.IP)
[16:31:15] *** Joins: voxpopuli (fanservice@D91450A9.CF1EC41D.689607DE.IP)
[16:31:22] *** Joins: zztr (Thunderbir@moz-CA50D606.dsl.static.sonic.net)
[16:31:53] *** Quits: lawrence (lawrence@moz-C186E1F7.wireless.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[16:31:56] *** Joins: ndrei (avo@5958B30C.7CEC4B5E.866E0A25.IP)
[16:33:28] *** Quits: orospakr (orospakr@moz-4514BEF2.cpe.teksavvy.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[16:33:31] *** Joins: flan3002 (till@moz-E0853D96.superkabel.de)
[16:33:52] *** Quits: murph1 (murph@moz-A933BAE1.oracle.com) (Ping timeout)
[16:33:59] *** Quits: heftig (heftig@moz-D746319F.unitymedia.biz) (Quit: Quitting)
[16:34:25] *** Joins: lawrence (lawrence@moz-C186E1F7.wireless.utoronto.ca)
[16:34:40] *** Quits: angdev (angdev@16F167B.4C57D258.D8E8354F.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[16:34:41] *** Joins: brendan (brendaneic@EA6E3FBE.E0E08D99.591570DB.IP)
[16:35:04] *** Quits: lawrence (lawrence@moz-C186E1F7.wireless.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[16:35:29] *** Joins: jviereck (Adium@moz-E8EB1928.ethz.ch)
[16:35:47] *** Quits: ndrei (avo@5958B30C.7CEC4B5E.866E0A25.IP) (Ping timeout)
[16:37:03] *** Quits: frza (frza@EA5BFF77.2B9073C9.204B78AE.IP) (Quit: frza)
[16:37:35] <jensnockert> I wish I knew why my gobject signal gets one less parameter than it should according to the docs :(
[16:38:07] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[16:38:27] *** Joins: ndrei (avo@5958B30C.7CEC4B5E.866E0A25.IP)
[16:38:51] <cmr> Principle One For a Happy and Productive Developer: Docs Lie.
[16:39:22] <adwhit> does anyone know what kind of type inference rust uses? linear?
[16:39:38] <cmr> adwhit: Hindley-Milner
[16:39:47] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Ping timeout)
[16:39:54] <cmr> same stuff ML uses.
[16:40:03] <adwhit> cmr: thanks, i thought so but couldn't find a reference
[16:40:43] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[16:40:56] <cmr> (but we don't infer types globally, only locally, ie, in function bodies, but not in function signatures)
[16:41:03] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[16:42:44] *** Joins: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net)
[16:43:48] <edwardw> for an enum, can I detect how many enumerations it defines?
[16:43:49] *** Quits: brendan (brendaneic@EA6E3FBE.E0E08D99.591570DB.IP) (Ping timeout)
[16:44:08] <cmr> edwardw: there's no good way to do it.
[16:44:29] <cmr> for simple C-like enums, you can add a dummy variant at the end and take its value.
[16:44:42] <cmr> but that's not very good, because it adds a variant..
[16:44:55] <FreeFull> I think a trait for that sort of stuff would be best
[16:44:59] <FreeFull> With a way to derive it
[16:45:16] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[16:45:47] <edwardw> hmm, I may just use 0,1,2
[16:46:06] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[16:46:07] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[16:46:13] *** Quits: ulrik (ulrikdamm@E000D799.6AFCF91.500EA053.IP) (Client exited)
[16:46:14] *** Joins: ulrik (ulrikdamm@E000D799.6AFCF91.500EA053.IP)
[16:46:37] <cmr> FreeFull: I was thinking an instrinsic, count_variants
[16:46:52] <edwardw> cmr: one more thing, I can type cast enum to be an int, can't I?
[16:46:59] <FreeFull> cmr: The trait would let you have other things too though
[16:47:06] <FreeFull> Like an enumeration of all possibilities
[16:47:12] *** Joins: frza (frza@EA5BFF77.2B9073C9.204B78AE.IP)
[16:47:16] *** Quits: sproing (Mibbit@14310444.B9CCEC14.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[16:47:17] <FreeFull> Of course, it wouldn't work for anything other than simple enums
[16:47:29] <cmr> edwardw: for C-like enums, yes.
[16:47:37] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[16:47:43] <edwardw> rusti: enum E { E1, E2, E3 }; E1 as uint
[16:47:44] -rusti- 0u
[16:48:12] *** Joins: brendan (brendaneic@EA6E3FBE.E0E08D99.591570DB.IP)
[16:48:53] <jensnockert> cmr: Maybe I should check if the docs are wrong…
[16:49:23] <pczarn> rusti: #[repr(u8)] enum E { E1, E2 }; E1 as u8
[16:49:25] -rusti- 0u8
[16:49:39] *** Quits: jviereck (Adium@moz-E8EB1928.ethz.ch) (Quit: Leaving.)
[16:51:17] <pczarn> rusti: size_of::<u8>()
[16:51:18] -rusti- <anon>:10:9: 10:22 error: unresolved name `size_of`.
[16:51:18] -rusti- <anon>:10         size_of::<u8>()
[16:51:18] -rusti-                   ^~~~~~~~~~~~~
[16:51:18] -rusti- error: aborting due to previous error
[16:51:19] -rusti- application terminated with error code 101
[16:51:42] <silven> rusti: mem:size_of::<u8>()
[16:51:43] -rusti- <anon>:10:12: 10:13 error: expected one of `;`, `}` but found `:`
[16:51:43] -rusti- <anon>:10         mem:size_of::<u8>()
[16:51:44] -rusti-                      ^
[16:51:44] -rusti- application terminated with error code 101
[16:51:54] <silven> rusti: mem::size_of::<u8>()
[16:51:57] *** Quits: brendan (brendaneic@EA6E3FBE.E0E08D99.591570DB.IP) (Ping timeout)
[16:51:58] -rusti- pastebinned 11 lines of output: http://ix.io/a7r
[16:52:16] *** Quits: rcxdude (rcxdude@moz-394D851.nat.csx.cam.ac.uk) (Input/output error)
[16:52:31] <pczarn> rusti: use std; std::mem::size_of::<u8>()
[16:52:32] -rusti- 1u
[16:52:34] *** Quits: pradeep (pradeep@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[16:52:40] <kimundi> rusti: ::std::mem::size_of::<u8>()
[16:52:41] -rusti- 1u
[16:53:07] <cmr> rusti: std::mem::size_of::<int>()
[16:53:08] -rusti- 8u
[16:53:41] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[16:53:44] *** Joins: murph1 (murph@moz-19DE15A7.oracle.com)
[16:54:44] <pczarn> rusti: #[repr(u8)] enum A { A1 = 1 }; #[repr(u8)] enum B { B1 = 2 }; enum Multi { Foo(A), Bar(B) }; std::mem::size_of::<Foo(A1)>()
[16:54:45] -rusti- <anon>:10:125: 10:126 error: expected `,` but found `(`
[16:54:45] -rusti- <anon>:10         #[repr(u8)] enum A { A1 = 1 }; #[repr(u8)] enum B { B1 = 2 }; enum Multi { Foo(A), Bar(B) }; std::mem::size_of::<Foo(A1)>()
[16:54:45] -rusti-                                                                                                                                       ^
[16:54:45] -rusti- application terminated with error code 101
[16:54:51] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[16:55:17] *** Joins: Kxepal (Miranda@moz-E614A377.pppoe.mtu-net.ru)
[16:55:26] <pczarn> rusti: #[repr(u8)] enum A { A1 = 1 }; #[repr(u8)] enum B { B1 = 2 }; enum Multi { Foo(A), Bar(B) }; std::mem::size_of::<Multi>()
[16:55:29] -rusti- pastebinned 8 lines of output: http://ix.io/aL2
[16:56:06] <jensnockert> cmr: No, the docs are correct :( /o\
[16:56:14] <cmr> nooooo
[16:56:28] *** Joins: jeaye (jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[16:57:09] *** Quits: fyolnish (fyolnish@moz-F3DC6160.whatbox.ca) (Ping timeout)
[16:57:31] <jensnockert> The wonky part is that the first 3 arguments are fine, then it ignores the 4th, and then it provides the fifth…
[16:57:34] <jensnockert> Oh wait.
[16:57:42] <jensnockert> There must be something wrong with struct packing.
[16:58:06] *** Quits: frza (frza@EA5BFF77.2B9073C9.204B78AE.IP) (Ping timeout)
[16:58:14] <jensnockert> Maybe the second struct is packed in such a way that it takes another register in some silly way…
[16:58:28] *** Joins: fyolnish (fyolnish@5E7C820E.3B5C4E68.8646540C.IP)
[16:59:30] <jensnockert> Yes, that is how it is.
[17:00:03] <jensnockert> Now I just need to figure out why this struct { *libc::c_void } is packed as two registers…
[17:00:08] *** Quits: fyolnish (fyolnish@5E7C820E.3B5C4E68.8646540C.IP) (Ping timeout)
[17:00:14] <bstrie> how do I get a NaN out of rust?
[17:00:33] *** Joins: fyolnish (fyolnish@moz-F3DC6160.whatbox.ca)
[17:00:43] <bstrie> specifically I'm curious what happens when you try to cast NaN to an integer
[17:01:12] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[17:01:18] *** Joins: tjc (tjc@moz-791C24B0.phlapa.east.verizon.net)
[17:01:18] *** ChanServ sets mode: +o tjc
[17:01:22] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[17:01:27] <flan3002> bstrie: You mean std::f64::NAN?
[17:01:28] <o11c> rusti: (0.0 / 0.0) as int
[17:01:29] -rusti- 0
[17:01:40] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[17:01:55] <flan3002> rusti: std::f64::NAN as int
[17:01:57] -rusti- 0
[17:01:58] *** Quits: doener (bs@moz-AA189A5A.unitymedia.biz) (Quit: leaving)
[17:02:01] <felixc> maggick, pnkfelix: haha, *usually* it would be such a safe assumption to think that if you see a "felix" around it's the one you mean... not the most common name :)
[17:02:09] *** Joins: ricepuddin (graham@moz-5A2243EB.wlan.ic.ac.uk)
[17:02:29] <bstrie> rusti: 0.0 / 0.0
[17:02:31] -rusti- NaNf64
[17:02:34] <bstrie> oh weird
[17:02:37] *** Quits: ndrei (avo@5958B30C.7CEC4B5E.866E0A25.IP) (Ping timeout)
[17:02:42] <bstrie> I totally expected that to fail with divide-by-zero
[17:02:44] *** Joins: ndrei (avo@5958B30C.7CEC4B5E.866E0A25.IP)
[17:02:50] <bstrie> rusti: 1.0 / 0.0
[17:02:51] -rusti- inff64
[17:02:52] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[17:02:59] <bstrie> rusti: 1 / 0
[17:02:59] <flan3002> rusti: -1.0 / 0.0
[17:03:01] -rusti- task '<main>' failed at 'attempted to divide by zero', <anon>:10
[17:03:01] -rusti- application terminated with error code 101
[17:03:01] -rusti- -inff64
[17:03:08] <bstrie> well, ok
[17:03:17] *** Joins: jviereck (Adium@moz-E8EB1928.ethz.ch)
[17:03:18] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[17:03:25] <o11c> float division by zero has always been well-defined ...
[17:03:45] <bstrie> o11c: integer division by zero has also always been well-defined, I just expected the two to be defined to the same thing :)
[17:03:56] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:04:56] <strcat> in LLVM/C, int division by zero is undefined behavior
[17:05:37] <ulrik> Does anybody know why I can't do "let v: ~[~SomeTrait] = ~[~1, ~2, ~3];" even if I have implemented SomeTrait for int?
[17:05:56] <eddyb> ulrik: vector literals have incomplete inference
[17:06:03] <eddyb> that is to say, they have no real inference
[17:06:07] <pnkfelix> ulrik: try replacing each `~1` with `~1 as ~SomeTrait`
[17:06:10] <o11c> bstrie: no, what strcat said
[17:06:27] <strcat> rust doesn't expose int division directly atm
[17:06:34] <strcat> no way to do division without the branch to fail!()
[17:06:40] <eddyb> well, fail_
[17:06:44] <eddyb> (the lang item)
[17:06:57] <eddyb> it's only used for integer division and some other thing
[17:07:05] *** Joins: onelson (onelson@moz-DD666EC5.laika.com)
[17:07:23] <strcat> rust is still exposing a fair bit of UB
[17:07:28] <eddyb> so if we changed it to fail_div0, you could implement that lang item as a call to llvm.unreachable
[17:07:33] <strcat> overlong shifts, overflow during float <-> int casts
[17:07:40] <eddyb> and then it wouldn't check for 0 at all
[17:07:42] <strcat> eddyb: not correct to do that though
[17:07:47] <strcat> should just be an intrinsic
[17:07:55] <eddyb> strcat: only in a kernel
[17:07:58] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[17:08:05] <strcat> it's always incorrect to do it
[17:08:07] <strcat> LLVM considers it UB
[17:08:08] <eddyb> but the failures should be separate IMO
[17:08:13] <ulrik> pnkfelix: That worked, thanks
[17:08:15] <eddyb> strcat: ah, right
[17:08:31] *** Quits: fyolnish (fyolnish@moz-F3DC6160.whatbox.ca) (Client exited)
[17:08:37] *** Joins: hoverbear (hoverbear@726D908C.44E18222.E74D50F2.IP)
[17:08:57] *** Joins: fyolnish (fyolnish@5E7C820E.3B5C4E68.8646540C.IP)
[17:08:58] <ulrik> Another question, can I have the vector be of a type that implements two traits? Like, I want elements to both implement SomeTrait and Clone.
[17:09:13] <eddyb> does anything other than division by 0 and matching against an uninhabited value (which is a silly thing IMO) use fail_?
[17:09:27] <flan3002> Is there any image library yet? I just want to set some pixels to some color and write it to a file. I could of course just quickly write to PPM, but well...
[17:09:30] <eddyb> ulrik: you can have a trait that inherits both SomeTrait and Clone
[17:09:39] <eddyb> ulrik: but Clone is useless in that scenario
[17:09:48] <eddyb> because you can't call .clone() on a trait object
[17:10:04] <eddyb> flan3002: there's rust-png
[17:10:19] <eddyb> which will be pure Rust at some point
[17:10:38] *** Quits: fyolnish (fyolnish@5E7C820E.3B5C4E68.8646540C.IP) (Ping timeout)
[17:10:43] <ulrik> Why not? Isn't clone defined in the Clone trait?
[17:10:52] <eddyb> it's defined to return Self
[17:11:00] <eddyb> i.e. the type that implements the trait
[17:11:03] *** Joins: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:11:09] *** Quits: credence (wdobbins@782D6E95.A1550BA3.4B164862.IP) (Quit: leaving)
[17:11:22] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[17:11:26] <eddyb> .clone() on ~Clone could return any type, so it's not allowed to call it
[17:11:35] <flan3002> eddyb: Let's see if I can get it to compile, thanks.
[17:11:49] *** Joins: dradtke (dradtke@moz-77578067.hfc.comcastbusiness.net)
[17:12:03] <ulrik> I see... So how would I make a vector of SomeTraits that is clonable?
[17:12:04] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Quit: csherratt)
[17:12:35] <eddyb> ulrik: you implement Clone for ~SomeTrait to call a method on SomeTrait that takes &self and outputs ~SomeTrait
[17:12:40] *** Quits: ndrei (avo@5958B30C.7CEC4B5E.866E0A25.IP) (Ping timeout)
[17:12:41] <dradtke> Quick question; with current 0.10-pre, why do I have to "use collections::hashmap::HashMap" if HashMap is re-exported? If I don't include the use statement then I get an unresolved name error.
[17:12:43] <hoverbear> flan3002: Hey!
[17:12:57] <hoverbear> flan3002: http://www.reddit.com/r/rust/comments/1yy57k/unsolved_question_from_irc/
[17:13:05] <eddyb> I found an issue btw
[17:13:10] *** Joins: ndrei (avo@5958B30C.7CEC4B5E.866E0A25.IP)
[17:13:14] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[17:13:21] <eddyb> flan3002: https://github.com/mozilla/rust/issues/11971
[17:13:24] <flan3002> hoverbear: Hey... As you see I already commented on that thread. Thank you for posting it!
[17:13:50] <eddyb> flan3002: you might be able to do ~Trait:'arbitrary_lifetime soon :D
[17:14:16] <flan3002> Well, currently I don't need it. It compiles fine and I'm happy. :P
[17:14:32] <eddyb> I hope you don't put &T in ~Trait
[17:14:44] <eddyb> because it's a bug that you (sometimes) can and it is going to explode
[17:14:53] *** Quits: tjc (tjc@moz-791C24B0.phlapa.east.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[17:15:25] <eddyb> (since you're keeping references to the stack, even after that stack region gets popped)
[17:16:15] <flan3002> Well, I guess that is possible currently, but I hope it's worth it. I also allow the safer Cell<T> possibility though.
[17:16:18] *** Joins: tjc (tjc@moz-791C24B0.phlapa.east.verizon.net)
[17:16:18] *** ChanServ sets mode: +o tjc
[17:16:30] <Darnuria> pnkfelix: Hey http://rust-meetup-paris.github.io/Talks will be up in 10min
[17:17:07] <ulrik> eddyb: like "impl Clone for ~SomeTrait { fn clone(&self) -> ~SomeTrait { /* return a clone */ } }"? And it so, how would the implementation be?
[17:17:19] <pnkfelix> Darnuria: okay.  I wont be able to add my Talk until later tonight.
[17:17:28] <Darnuria> pnkfelix: No problem :)
[17:17:40] <eddyb> ulrik: yupp, and inside, self.clone_to_some_trait()
[17:18:00] <eddyb> ulrik: trait SomeTrait { fn clone_to_some_trait(&self) -> ~SomeTrait; }
[17:18:01] *** Joins: TimAbraldes (quassel@125EF623.B2666F0E.66399531.IP)
[17:18:03] <Darnuria> pnkfelix: for something made with "Methode Larrache" we're very "professional"
[17:18:05] <flan3002> eddyb: Well, libpng does not compile...
[17:18:18] <eddyb> flan3002: bah, I thought it was updated to latest master :/
[17:18:41] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[17:18:44] <eddyb> ulrik: that is, clone_to_some_trait is a virtual method on the trait object, so you can call it from ~SomeTrait or &SomeTrait
[17:18:53] <flan3002> eddyb: `extern mod` is obsolete, use `extern crate` instead...
[17:19:12] *** Joins: chenyang (user@moz-1047CAB3.airbears2.berkeley.edu)
[17:19:13] <flan3002> Well then... PPM!
[17:19:33] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[17:19:52] <ulrik> eddyb: And then I should just implement clone_to_some_trait for each thing that implements SomeTrait?
[17:19:52] *** Joins: agarie (agarie@9183E199.ECEBC62.85FEC2CD.IP)
[17:20:07] *** Quits: tjc (tjc@moz-791C24B0.phlapa.east.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[17:20:40] *** Quits: murph1 (murph@moz-19DE15A7.oracle.com) (Ping timeout)
[17:20:42] <Darnuria> pnkfelix: And please. Dont say anything to my "design" I am terrible with web-technology...
[17:20:44] <eddyb> ulrik: yeah
[17:20:49] <Darnuria> :D
[17:21:01] <eddyb> ulrik: I tried to do it automatically, for someone else, but bugs in type checking prevent it from working :/
[17:21:09] <eddyb> ulrik: you get infinite recursion and other nasty things
[17:21:23] <eddyb> flan3002: ahh
[17:21:34] <eddyb> flan3002: you can check if there's a PR to fix that, if not, change it yourself
[17:21:37] <eddyb> should be trivial
[17:22:46] *** Quits: gmjosack (gary@moz-CB7AA3B8.hsd1.ca.comcast.net) (Ping timeout)
[17:23:09] *** Quits: toqueteos (Mibbit@moz-B9CC0C90.red-88-10-31.dynamicip.rima-tde.net) (Quit: http://www.mibbit.com ajax IRC Client)
[17:23:09] *** pmoore is now known as pmoore|away
[17:23:15] <ulrik> eddyb: It works! Thank you so much!
[17:23:18] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:23:38] *** Quits: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[17:24:21] *** Joins: mawuli (mawuli@moz-A89BBCE.com.gh)
[17:24:22] *** Quits: chenyang (user@moz-1047CAB3.airbears2.berkeley.edu) (Ping timeout)
[17:24:27] <flan3002> eddyb: Well, there are a couple more. I've not worked with multiple crates much.
[17:24:29] *** Joins: noam (noam@F6B530A7.720527A7.416762B.IP)
[17:24:42] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[17:24:42] *** ChanServ sets mode: +ao pcwalton pcwalton
[17:24:53] *** Joins: chenyang (user@moz-1047CAB3.airbears2.berkeley.edu)
[17:27:01] *** Joins: Matthias247 (Miranda@moz-BDD35EC0.hsi5.kabel-badenwuerttemberg.de)
[17:27:13] *** Quits: Matthias247 (Miranda@moz-BDD35EC0.hsi5.kabel-badenwuerttemberg.de) (Quit: Matthias247)
[17:27:25] *** Joins: maxli (maxli@moz-EE42E0E.student.cs.uwaterloo.ca)
[17:28:03] *** Quits: chenyang (user@moz-1047CAB3.airbears2.berkeley.edu) (Ping timeout)
[17:28:09] *** Joins: mgottschlag (quassel@moz-D356AE98.cust.bluewin.ch)
[17:28:18] *** Joins: Matthias247 (Miranda@moz-BDD35EC0.hsi5.kabel-badenwuerttemberg.de)
[17:28:50] *** Joins: evanm (evanm@636AC086.5999CED5.71743E61.IP)
[17:29:59] *** Quits: ganitsu (ganitsu@moz-F0E8DAC7.dialup.adsl.anteldata.net.uy) (Quit: WeeChat 0.4.1)
[17:30:49] <pczarn> rusti: #[repr(u8)] enum A{A1=1, A2=2} #[repr(u8)] enum B{B1=3, B2=4} enum Multi{Foo(A), Bar(B)}; std::mem::size_of::<Multi>()
[17:30:50] -rusti- 2u
[17:31:17] *** Quits: reyre (reyre@moz-72FEF1DB.dsl.bell.ca) (Connection reset by peer)
[17:31:41] *** Joins: reyre (reyre@moz-72FEF1DB.dsl.bell.ca)
[17:32:07] <Yurume> pczarn, enums by default try to use the smallest integer type for its discriminator.
[17:32:34] <eddyb> Yurume: I think I know what pczarn was trying
[17:32:48] <pczarn> to have one-byte multivariant
[17:32:53] <Yurume> ah
[17:33:01] <eddyb> there is no u8 value that can be both A and B at the same time
[17:33:09] <eddyb> pczarn: we want those kinds of optimizations
[17:33:32] <eddyb> like Option<Enum> using the next discriminator available in Enum
[17:33:41] <pczarn> right
[17:33:42] <strcat> I think we should fix the current language before adding more of those complex adt optimizations
[17:34:02] <strcat> the non-nullable ptr one is *still* broken in a few ways
[17:34:15] <eddyb> pczarn: if you feel brave enough, you can venture to rustc::middle::trans::adt
[17:34:15] *** Joins: doener (doener@moz-C68F600D.unity-media.net)
[17:34:27] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[17:34:37] *** Quits: redShadow (redShadow@9BDAF02B.D15F9219.1CCF65D9.IP) (Quit: Leaving)
[17:34:39] <eddyb> strcat: other than not having a NonZero<*T>?
[17:34:40] <Yurume> eddyb, I really don't like this thing: http://ix.io/aL7 (in this time, merging MaybeOwned with the custom enum)
[17:35:40] <eddyb> Yurume: you want automatic flattening?
[17:36:06] <eddyb> we could experiment with attribute-triggered optimizations
[17:36:08] <Yurume> maybe
[17:36:19] <Yurume> for now I'll have to live with that though
[17:36:28] <eddyb> as long as we can put both the restriction and the optimization in one place
[17:36:41] <eddyb> otherwise it's going to end up in more clusterfuck
[17:36:59] <Yurume> customizable enum representation... nevermind.
[17:37:15] <eddyb> I had an awesome idea, btw
[17:37:22] *** Quits: glaebhoerl (glaebhoerl@moz-3590251D.kabelnet.hu) (Ping timeout)
[17:37:48] *** Quits: StarLight (StarLight@moz-C36A59A.dynamic.avangarddsl.ru) (Ping timeout)
[17:38:07] *** Quits: dwrensha (chatzilla@moz-445F8B42.hsd1.ca.comcast.net) (Client exited)
[17:38:22] <eddyb> enum SmallVec<T> {Zero = 0, One(T) = 1, More(*T) = 2..uint::MAX}
[17:38:34] <eddyb> explicit discriminants (proposed a few months ago) + ranges
[17:38:43] *** Quits: lpy|codeforces (lpy@12172131.F09091A8.1348A864.IP) (Client exited)
[17:38:56] <Yurume> *T to ensure that accessing the discriminant is unsafe?
[17:39:08] <edwardw> is there a way to sync enum E{ E1, E2} <-> ~[T, ..2] , enum E{ E1, E2, E3} <-> ~[T, ..3] other than manual?
[17:39:19] <Yurume> hmm, no, sorry
[17:39:26] <eddyb> Yurume: you would have to transmute and whatnot to get the discriminant, but the enum would be defined for all possible lengths
[17:39:30] <edwardw> I basically want t use enum as a index
[17:39:37] <edwardw> an index*
[17:39:43] <eddyb> *T there is just the pointer in a (DST) ~[T]
[17:39:56] <eddyb> edwardw: lang_items does something interesting with a macro
[17:39:56] <edwardw> I guess so
[17:40:20] <Yurume> eddyb, uh, wait, how one can access the discriminant then?
[17:40:20] <edwardw> eddyb: let me check
[17:40:28] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[17:40:28] <eddyb> Yurume: transmuting
[17:40:36] <Yurume> :)
[17:40:49] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[17:41:03] <eddyb> Yurume: you can't do it today
[17:41:12] <eddyb> well, you can make it a struct
[17:41:34] <eddyb> but with an enum, there's range asserts, and you just can't match at all without asking for UB
[17:41:52] *** Joins: murph1 (murph@moz-F07B75BF.oracle.com)
[17:41:54] <eddyb> anyways, if size_of::<T>() == size_of::<*T>(), then it has the same size as a DST ~[T]
[17:42:02] <eddyb> while being able to hold one element inline
[17:42:12] *** Joins: StarLight (StarLight@moz-7F6246F9.dynamic.avangarddsl.ru)
[17:42:18] <eddyb> which is the usecase for SmallVector in libsyntax
[17:42:29] *** Joins: mudpit (Mibbit@14310444.B9CCEC14.CC1A2609.IP)
[17:42:31] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[17:43:14] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:43:25] *** Quits: jviereck (Adium@moz-E8EB1928.ethz.ch) (Quit: Leaving.)
[17:43:27] *** Quits: ndrei (avo@5958B30C.7CEC4B5E.866E0A25.IP) (Ping timeout)
[17:43:36] *** Joins: Jemaclus (Jemaclus@4EEAB704.5843BA5A.D4E4C7A5.IP)
[17:43:50] *** Joins: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net)
[17:45:23] <pczarn> inline asm extension is feature gated, is its syntax likely to change?
[17:46:04] <eddyb> if it's going to be changed, it will be only improved
[17:46:19] <eddyb> simple use cases shouldn't be affected, not even in the long term
[17:46:24] <edwardw> eddyb: one new trick a day is not bad :) that's exactly what I want
[17:46:39] <pczarn> what kind of change/simple use case
[17:46:57] <Jemaclus> sfackler: good talk last night. enjoyed it. learned a lot about how macros work. :)
[17:47:24] <eddyb> simple usecase: asm!("foo $1, $2" : "=r"(x) : "r"(y)) 
[17:47:46] <eddyb> though I'm not sure that's even the right syntax, I rarely need inline asm (that is, while osdev'ing)
[17:48:08] <pczarn> it resembles that of clang
[17:48:18] <eddyb> it's supposed to be compatible with GCC
[17:48:32] <eddyb> but doesn't have all the small things
[17:48:56] <pczarn> and doesn't sanitize some parameters
[17:48:57] <eddyb> clang does translation from the GCC style to what LLVM uses internally
[17:49:06] <eddyb> pczarn: I tried to make that sane
[17:49:25] <eddyb> for example, an output parameter can write to an uninitialized immutable local, to initialize it
[17:50:05] <Yurume> eddyb, it is *not* compatible to GCC, which uses "foo %1, %2" in place of "foo $1, $2" for placeholders
[17:50:15] <eddyb> Yurume: I don't even know which one we support :P
[17:50:17] <Yurume> :p
[17:50:24] <pczarn> how about "foo {:r}, {:r}"
[17:50:31] <eddyb> oh, wow
[17:50:43] <eddyb> pczarn: inspired by our format syntax, no?
[17:50:49] <pczarn> exactly
[17:50:58] <Yurume> that actually sounds better
[17:51:09] <eddyb> not bad (we also support numeric/named indexing, in format strings)
[17:51:10] <Yurume> I really hate "movq %1, %%eax;" etc :p
[17:51:24] <SiegeLord> I'm confused by https://github.com/mozilla/rust/pull/12526 ... how will we bind C code?
[17:51:24] <Yurume> (yes, it acts like printf)
[17:51:44] <Yurume> SiegeLord, extern crate libc;
[17:52:03] <pczarn> also, I get a warning that a value is never read, even though it's an input parameter
[17:52:06] <SiegeLord> Oh, I see
[17:52:32] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[17:52:37] <Yurume> /usr/share/texlive/texmf-dist/web2c/mktexnam: Could not map source abbreviation  for ecrm1000.
[17:52:40] <cmr> eugh it needs another rebase.
[17:52:41] <Yurume> ...wait what?
[17:52:44] <cmr> this is miserable
[17:52:44] *** Joins: ndrei (avo@5958B30C.7CEC4B5E.866E0A25.IP)
[17:52:48] *** Quits: mudpit (Mibbit@14310444.B9CCEC14.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[17:52:53] <cmr> eddyb: is this how you feel all the time? :P
[17:52:57] *** Joins: lkuper (lkuper@moz-AD4C50F5.dhcp-bl.indiana.edu)
[17:53:00] <eddyb> >:D<
[17:53:00] *** Joins: canhtak (canhtak@moz-251024EB.wl.t.ulaval.ca)
[17:53:02] * Yurume was running make check before sending PR
[17:53:07] <cmr> even the core -> std, std -> extra change didn't need this much rebasing!
[17:53:42] <eddyb> pczarn: it's possible someone changed the checking code since then, and didn't update inline asm properly
[17:53:45] <eddyb> but I wrote tests!
[17:54:07] *** Joins: chenyang (user@moz-83728A1C.hsd1.ca.comcast.net)
[17:54:15] <pczarn> I don't know how to use checking code
[17:54:19] <eddyb> I guess warnings wouldn't be visible
[17:54:32] <eddyb> pczarn: I mean, whatever part of rustc::middle that checks that specific thing
[17:54:40] <eddyb> we have liveness and dataflow
[17:54:49] <eddyb> (and cfg, and I can't remember which is which)
[17:55:10] <eddyb> I know liveness is terrible and we should move all that functionality (which is just warnings) into borrowck
[17:55:33] *** Quits: ndrei (avo@5958B30C.7CEC4B5E.866E0A25.IP) (Ping timeout)
[17:56:20] *** Joins: Kruppe (user@moz-253119B0.esg.uwaterloo.ca)
[17:56:22] <pczarn> liveness checks that, AFAIK
[17:56:36] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[17:56:55] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[17:58:01] *** Quits: Jemaclus (Jemaclus@4EEAB704.5843BA5A.D4E4C7A5.IP) (Quit: Leaving...)
[17:59:14] *** Quits: Ralith (ralith@moz-67D4EB93.customer.broadstripe.net) (Ping timeout)
[17:59:47] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:59:59] *** Joins: nitivermagupta (nitivermag@moz-15FCB70D.hsd1.ca.comcast.net)
[18:01:10] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[18:01:29] *** Joins: jviereck (Adium@moz-B8899D53.dclient.hispeed.ch)
[18:01:32] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[18:03:14] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[18:04:02] *** Quits: Rusky (russell@moz-C0CD0CF0.slkc.qwest.net) (Ping timeout)
[18:05:23] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[18:07:21] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[18:08:22] <pzol> are the labels used in the issue tracker described somewhere?
[18:09:00] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[18:09:20] *** Joins: alexherbo2 (alexherbo2@moz-F4D73D7E.w83-199.abo.wanadoo.fr)
[18:09:31] <hoverbear> flan3002: Did you get it solved?
[18:09:41] *** Joins: glaebhoerl (glaebhoerl@moz-3AF9327D.kabelnet.hu)
[18:10:16] <Yurume> pzol, https://github.com/mozilla/rust/wiki/Note-tag-label-names-and-definitions
[18:10:56] <flan3002> hoverbear: Yeah, liftthrasiir mentioned T must be 'static, not the container 'Single'. Now adding more features and refactoring. 
[18:11:13] <hoverbear> flan3002: Cool! :) I'd love to see what you end up with!
[18:11:20] <pzol> Yurume thanks ;) E-needtest (missing) means literaly a unit test is missing, right?
[18:11:35] <Yurume> awww, I still have make check running for half an hour.
[18:11:42] *** Joins: gmjosack (gary@F91A859E.75E3DBFA.7AB8439E.IP)
[18:11:59] <cmr> pzol: correct.
[18:12:00] <Yurume> pzol, guess so, but seems undocumented? (in fact I don't know that wiki page is current or not)
[18:12:08] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[18:12:10] *** Quits: glaebhoerl (glaebhoerl@moz-3AF9327D.kabelnet.hu) (Quit: )
[18:12:15] <pzol> ok ;)
[18:12:25] * cmr added it, didn't know page existed
[18:12:31] *** Joins: AvianFlu_ (AvianFlu@moz-723527FF.nycmny.fios.verizon.net)
[18:12:49] <cmr> pzol: usually adding a test can close an E-needstest
[18:13:01] <pzol> ok
[18:13:06] * Yurume wants to eliminate outdated Windows build information about Rust 0.8 or older
[18:13:24] *** Quits: marianoguerra (marianogue@moz-F51F5323.dip0.t-ipconnect.de) (Ping timeout)
[18:13:44] *** Quits: AvianFlu (AvianFlu@moz-723527FF.nycmny.fios.verizon.net) (Ping timeout)
[18:14:00] *** Joins: ndrei (avo@5958B30C.7CEC4B5E.866E0A25.IP)
[18:14:37] *** Quits: hoverbear (hoverbear@726D908C.44E18222.E74D50F2.IP) (Ping timeout)
[18:15:06] *** Quits: mawuli (mawuli@moz-A89BBCE.com.gh) (Ping timeout)
[18:15:13] *** Joins: Rusky (russell@moz-173BA32C.slkc.qwest.net)
[18:15:19] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[18:15:47] *** Parts: mkirk (mkirk@moz-469DDC26.socal.res.rr.com) ()
[18:16:31] *** Quits: Rusky (russell@moz-173BA32C.slkc.qwest.net) (Quit: Leaving.)
[18:16:32] *** Joins: Rusky (russell@moz-173BA32C.slkc.qwest.net)
[18:17:57] *** Joins: Savago (Savago@D8B9C081.E820043D.D4C04133.IP)
[18:18:15] *** Quits: Rusky (russell@moz-173BA32C.slkc.qwest.net) (Quit: Leaving.)
[18:18:19] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[18:18:20] *** Joins: Rusky (russell@moz-173BA32C.slkc.qwest.net)
[18:18:34] *** Joins: olivernn (olivernigh@moz-7CE0F8.access.mtnbusiness.co.za)
[18:18:46] *** Joins: Ms2ger (Ms2ger@B7B2FF50.C60A97A6.F9FB0584.IP)
[18:18:50] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[18:18:55] <pzol> Yurume can I have your opinion reg https://github.com/mozilla/rust/issues/9363
[18:19:11] *** Parts: herrwolfe45 (user@CACBD77F.4EBBBE62.C082B7DC.IP) (ERC Version 5.3 (IRC client for Emacs))
[18:19:38] <Yurume> pzol, did you mean &'static [char]? (otherwise you cannot define such function)
[18:20:09] <pzol> Yurume yeah... the important thing is that the result is a vec
[18:21:03] *** Quits: Kruppe (user@moz-253119B0.esg.uwaterloo.ca) (Client exited)
[18:21:11] <Yurume> yes, and in general, to_{lower,upper} should return a sequence of chars as well.
[18:21:29] *** Joins: mawuli (mawuli@moz-A89BBCE.com.gh)
[18:21:44] *** Quits: ziad (ziad@moz-C0318336.hsd1.ca.comcast.net) (Quit: ziad)
[18:21:51] <pzol> Yurume true, but impractical ;)
[18:22:48] *** Quits: chenyang (user@moz-83728A1C.hsd1.ca.comcast.net) (Ping timeout)
[18:22:54] <Yurume> I really don't know if char (as opposed to str) needs to_{upper,lower} methods
[18:23:12] *** Joins: fyolnish (fyolnish@5E7C820E.3B5C4E68.8646540C.IP)
[18:23:18] <pzol> Yurume that is a valid point! are you aware of a language where it is done that way? 
[18:23:37] <pzol> I mean where char.to_upper() would return a sequence?
[18:24:21] <Yurume> I don't know any precedents
[18:24:37] *** Quits: fyolnish (fyolnish@5E7C820E.3B5C4E68.8646540C.IP) (Connection reset by peer)
[18:24:52] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Quit: csherratt)
[18:24:56] *** Joins: fyolnish (fyolnish@5E7C820E.3B5C4E68.8646540C.IP)
[18:25:00] *** Quits: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net) (Ping timeout)
[18:25:36] <Yurume> but as long as we opt to use Unicode (i.e. no to_{upper,lower}_ascii) the user would need to understand that the case mapping/folding can expand the string
[18:25:38] *** Joins: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net)
[18:26:09] *** Joins: p1start (rewi@moz-A082F561.adsl.xtra.co.nz)
[18:26:37] *** Quits: fyolnish (fyolnish@5E7C820E.3B5C4E68.8646540C.IP) (Ping timeout)
[18:26:41] <pzol> see here https://github.com/mozilla/rust/issues/9084 StrSlice's to_lower_chars() would return an iterator over the converted codepoints
[18:28:05] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[18:28:29] <Yurume> that makes sense. (is .to_lower() defined as .to_lower_chars().collect::<~str>()?)
[18:29:03] <pzol> Yurume https://gist.github.com/9235382
[18:29:13] *** Joins: hoverbear (hoverbear@726D908C.44E18222.E74D50F2.IP)
[18:29:58] <pzol> Yurume do you think there should be a to_lower() besides the to_lower_chars()?
[18:30:12] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Ping timeout)
[18:30:30] <Yurume> I have no particular preference there
[18:30:45] *** Parts: dradtke (dradtke@moz-77578067.hfc.comcastbusiness.net) ()
[18:31:35] <pzol> I am waiting for this PR to get accepted... then the next step would be the to_lower_chars()
[18:31:35] <Yurume> but the naming is a bit strange here, `to_lower_chars` would return an iterator and still has a `to` prefix?
[18:31:43] <Yurume> have*
[18:31:46] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[18:32:10] <pzol> Yurume right... my bad... in the gist they are lower_chars upper_chars
[18:32:11] <Yurume> so I guessed (incorrectly) there is a parallel between `to_lower_chars` and `to_lower`
[18:32:15] <Yurume> aha
[18:32:29] *** Quits: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net) (Quit: sw17ch)
[18:32:55] <pzol> what bugs me is the naming to_uppercase and to_lowercase in char... but I made it consistent with is_uppercase and is_lowercase
[18:33:03] *** Quits: Kynes (Kynes@moz-3DC6C6E7.mit.edu) (Quit: Leaving)
[18:33:20] *** Joins: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net)
[18:33:32] *** Joins: dmac (Adium@moz-99EF2EE6.hfc.comcastbusiness.net)
[18:33:36] <pzol> the PR is https://github.com/mozilla/rust/pull/12561
[18:33:53] *** Quits: mawuli (mawuli@moz-A89BBCE.com.gh) (Ping timeout)
[18:34:10] *** Joins: mawuli (mawuli@moz-A89BBCE.com.gh)
[18:34:27] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[18:34:32] <bvssvni> make_the_char_a_little_smaller_please
[18:35:20] *** Joins: Kruppe (user@moz-253119B0.esg.uwaterloo.ca)
[18:35:22] *** Quits: p1start (rewi@moz-A082F561.adsl.xtra.co.nz) (Ping timeout)
[18:35:24] <pzol> bvssvni lol
[18:35:59] *** Quits: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net) (Quit: Leaving)
[18:36:29] <eddyb> pzol: uppercase => upper, lowercase => lower, that's the only way to make it shorter that I see
[18:37:43] <bvssvni> C# uses ToUpper() and ToLower()
[18:38:02] <eddyb> to_lower() feels rusty enough IMO
[18:38:09] <pzol> eddyb there is some mess actually: std::char::Char::is_lowercase  BUT std::ascii::AsciiStr::to_lower  AND std::ascii::Ascii::to_lower AND std::libc::funcs::c95::ctype::islower
[18:38:16] *** Joins: ziad (ziad@B20586FB.BDB3D91.6E370BFC.IP)
[18:38:20] <eddyb> you can ignore the C one
[18:38:26] <eddyb> it has to use the C name for it
[18:38:43] *** Joins: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net)
[18:38:44] <eddyb> pzol: could replace is_lowercase with is_lower, in another PR/commit
[18:38:47] <sfackler> TO and to!
[18:38:49] *** Quits: NiccosSystem (NiccosSyst@moz-ED196BB4.customer.lyse.net) (Quit: Leaving)
[18:38:50] <eddyb> (but also ask someone else)
[18:38:55] *** Joins: mbx (mbebenita@moz-C07D5168.p2p.sfo1.mozilla.com)
[18:39:05] <pzol> eddyb would love to... it's a breaking change, though... 
[18:39:11] <Yurume> https://github.com/mozilla/rust/pull/12572 okay, I've done with that...
[18:39:23] <eddyb> pzol: it only matters if it's marked as stable :P
[18:39:28] <eddyb> we don't have any stable API AFAIK
[18:39:30] <Yurume> I learned I should not run make check without any arguments in the hard way.
[18:39:31] <sfackler> pzol: most changes are breaking at this point
[18:39:35] <flan3002> Yurume: Yay!
[18:40:11] <eddyb> Yurume: durable has its meaning
[18:40:14] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Ping timeout)
[18:40:25] <eddyb> Yurume: check_lifetime or something like that sounds better
[18:40:44] <eddyb> it only checks 'static atm because of a bug/missing feature
[18:40:45] <pzol> eddyb sfackler  good, is_lower, is_upper, to_lower and to_upper it is then :)
[18:40:51] <Yurume> eddyb, wasn't that Durable is renamed to 'static?
[18:40:52] <Yurume> hmm
[18:41:01] <eddyb> I don't think so
[18:41:10] <eddyb> (though I don't know that part of history)
[18:41:32] <eddyb> Yurume: check_static_bound or check_lifetime feel better to me
[18:41:38] *** Joins: Ferreus (ferreus@moz-E0A43021.lsn.wtnet.de)
[18:41:49] <eddyb> though, it's just middle, idk
[18:41:50] *** Quits: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[18:42:30] *** Quits: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net) (Quit: sw17ch)
[18:43:04] *** Joins: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP)
[18:43:04] *** ChanServ sets mode: +o jdm
[18:43:05] *** Quits: ulrik (ulrikdamm@E000D799.6AFCF91.500EA053.IP) (Client exited)
[18:43:31] <kimundi> afaik 'static used to be Durable
[18:43:42] <Yurume> eddyb, there was actually a parallel between check_send (checks for Send) and check_durable (checks for 'static), so I guessed check_static is just fine
[18:44:02] <eddyb> okay then
[18:45:14] *** Quits: jviereck (Adium@moz-B8899D53.dclient.hispeed.ch) (Quit: Leaving.)
[18:46:36] *** Joins: jvoorhis (jvoorhis@moz-A90B9700.ptld.qwest.net)
[18:46:45] <eddyb> pczarn: aah, you're this person https://github.com/thestinger/rust-core/issues/31
[18:47:09] *** Joins: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net)
[18:47:17] <eddyb> pczarn: I watch rust-core so I've read that discussion, sorry I didn't notice it was you, I think I wanted to tell you something a couple days ago
[18:47:21] <eddyb> ofc I can't remember it now :/
[18:47:22] *** Quits: Ms2ger (Ms2ger@B7B2FF50.C60A97A6.F9FB0584.IP) (Ping timeout)
[18:48:11] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[18:48:18] *** Joins: Jemaclus (Jemaclus@4EEAB704.5843BA5A.D4E4C7A5.IP)
[18:49:14] *** Quits: lbonn (lbonn@moz-FBFAA8BC.rev.sfr.net) (Quit: leaving)
[18:50:49] *** Joins: kvark (Mibbit@9A8A5739.49975FB2.AE2D72A6.IP)
[18:51:45] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Input/output error)
[18:51:59] *** Quits: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP) (Ping timeout)
[18:52:15] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[18:52:23] *** Quits: _Y_ (chatzilla@moz-3D976F70.dynamic.isp.telekom.rs) (Quit: ChatZilla 0.9.90.1 [Firefox 27.0.1/20140212131424])
[18:52:51] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[18:52:59] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[18:53:41] *** Joins: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net)
[18:53:43] *** Joins: echristo (echristo@C587E14D.D6CCE4AE.77834EAA.IP)
[18:53:52] *** Joins: MP2E (cray@moz-EB1E242D.lv.lv.cox.net)
[18:53:56] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[18:54:27] <kvark> cmr: would you consider mentioning kvark/dark in the TWiR? it has reached the point of correct pack/unpack of self executable, and also features linear time suffix array construction.
[18:55:03] <cmr> kvark: absolutely! can you send me an email so I don't forget?
[18:55:13] <kvark> will do that tonight, thanks!
[18:55:31] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[18:56:05] *** Quits: alexherbo2 (alexherbo2@moz-F4D73D7E.w83-199.abo.wanadoo.fr) (Ping timeout)
[18:57:27] *** Quits: olivernn (olivernigh@moz-7CE0F8.access.mtnbusiness.co.za) (Ping timeout)
[18:57:37] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[18:59:11] <eddyb> acrichto: bah, https://github.com/alexcrichton/rust-compress/blob/master/flate.rs
[18:59:25] <eddyb> acrichto: I actually spent time writing my own inflate impl :(
[18:59:34] *** Joins: eholk (eholk@moz-BA312F07.crest.iu.edu)
[18:59:39] <acrichto> I dunno if I'd count that one, it's super slow
[18:59:43] <acrichto> I need to improve it...
[18:59:50] <eddyb> oh, mine is on part with zlib
[19:00:01] *** Joins: untwisted (untwisted@moz-60D579DC.hsd1.ca.comcast.net)
[19:00:03] <eddyb> (even faster because I didn't implement checksumning)
[19:00:17] *** Quits: sunfish (chatzilla@moz-42DA0C69.dsl.dynamic.sonic.net) (Ping timeout)
[19:01:17] <eddyb> acrichto: I was looking at rust-zlib when rust-compress has much more stuff :/
[19:01:34] <eddyb> acrichto: here's my implementation, sadly it's not as beautifully commented as yours https://gist.github.com/eddyb/e9548473916209c982fa
[19:01:50] *** Joins: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[19:01:52] <kvark> eddyb: but rust-compress only does de-flate. Do you have the in-flate implementation?
[19:01:55] <acrichto> oh man that's a lot of code
[19:02:05] <eddyb> kvark: isn't it the other way around?
[19:02:09] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[19:02:14] <eddyb> inflate is the decompression
[19:02:20] <eddyb> deflate is the compression
[19:02:20] <kvark> ah
[19:02:21] <kvark> sorry
[19:02:35] <kvark> anyway, rust-compress only decompresses the flat, right?
[19:02:41] <eddyb> (think balloon, not de/in-flate)
[19:02:57] <eddyb> kvark: yeah, that's also what I implemented
[19:03:02] <eddyb> acrichto: mine is a state machine
[19:03:04] <kvark> ah, ok
[19:03:08] *** Joins: judder (maradukewa@A4DC519F.6379DA33.78E362FE.IP)
[19:03:23] <eddyb> I feel that sync streams don't fit well with network transports
[19:03:33] *** Quits: mye (mye@moz-1929E5E2.dip0.t-ipconnect.de) (Quit: mye)
[19:04:04] <kvark> btw, can we compile without assertions?
[19:04:16] <eddyb> there was a PR about that, I think huon's
[19:04:22] *** Quits: nimish (quassel@6CD90D4F.B586C2A4.5F29FBA5.IP) (Ping timeout)
[19:04:31] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[19:04:31] *** ChanServ sets mode: +ao pcwalton pcwalton
[19:05:10] <kvark> what about array index checks? can we disable them at once with a compile flag?
[19:05:19] <eddyb> acrichto: however, I think you can adapt this to work with sync streams as well https://gist.github.com/eddyb/e9548473916209c982fa#file-inflate-rs-L837-L852
[19:05:26] <eddyb> kvark: nope, you don't really want that
[19:05:38] <kvark> eddyb: well, care to convince me?
[19:05:52] <eddyb> you want to elide bound checks only for pieces of code where you can prove you keep in bounds
[19:06:07] <eddyb> no forward iterator does bound checks, for example
[19:06:21] *** Quits: fabiand (fabiand@moz-F6C11C35.adsl.alicedsl.de) (Quit: Verlassend)
[19:06:43] <strcat> kvark: you can choose to use an unsafe API without the bounds checks
[19:06:46] <kvark> With index access [] you either do it correctly, or you fail. So once I'm sure I'm doing it correctly, I don't want to pay the check overhead
[19:07:05] <kvark> strcat: yes, but the code is gonna be messy
[19:07:07] <strcat> kvark: so use an unsafe API with checks only enabled with --cfg foo
[19:07:12] <strcat> kvark: well, that's how rust is
[19:07:29] <strcat> we are never going to have a way to turn off the bounds checks in []
[19:07:55] <kvark> but how is that different from regular assertions?
[19:07:58] <strcat> it would be counter to the argument behind rust's memory model
[19:08:00] *** Quits: redbrain (uid24282@moz-E77DEB21.irccloud.com) (Quit: Connection closed for inactivity)
[19:08:00] <eddyb> my PNG decoder tries to be a bit smart, but I still have to use unsafe_get(i) because I can't easily force LLVM to drop the bound checks
[19:08:12] <strcat> kvark: rust views memory safety bugs as different than other bugs
[19:08:19] *** Quits: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net) (Quit: Sharp)
[19:08:25] <strcat> kvark: that's a big part of rust's design
[19:08:28] <kvark> strcat: uh, ok
[19:08:47] * kvark wishes rustc --extra-speed main.rs
[19:09:04] <strcat> kvark: -Z lto and set the target-cpu ;P
[19:09:08] <eddyb> acrichto: this explains the slowness https://github.com/alexcrichton/rust-compress/blob/master/flate.rs#L128-L138
[19:09:17] <strcat> kvark: rust's design is to force you to isolate unsafe code to small bits of the codebase
[19:09:21] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[19:09:24] <strcat> so you consider each one and prove that it can't happen
[19:09:37] <eddyb> acrichto: it's a pity that it's such a nice code with no serious optimization :P
[19:09:42] <acrichto> eddyb: yeah, it's also probably https://github.com/alexcrichton/rust-compress/blob/master/flate.rs#L238-L248 (I haven't put any effort into optimization)
[19:09:49] <strcat> in any real codebase, you're going to have lots of indexing that was never audited like that
[19:09:56] <eddyb> my focus was mainly optimization
[19:10:00] <strcat> s/real/large/
[19:10:02] <eddyb> I didn't want to be slower than zlib
[19:10:22] <eddyb> turns out I don't have to monomorphize a million functions and use them in a runtime-constructed jump table
[19:10:39] <eddyb> acrichto: I also do that
[19:10:44] <strcat> jump tables via function ptrs aren't really jump tables
[19:10:49] <strcat> they're inefficient ;p
[19:10:57] <eddyb> acrichto: well, mine is optimized to only check once for cnt <= 8
[19:11:07] <eddyb> (not a loop)
[19:11:20] <strcat> can't do real jump tables without inline asm in C or rust
[19:11:31] *** Joins: mye (mye@moz-1929E5E2.dip0.t-ipconnect.de)
[19:11:31] <strcat> need something like the gcc computed goto extension for that power
[19:11:32] *** Joins: ulrik (ulrikdamm@moz-E38D4E51.fullrate.dk)
[19:11:33] *** Joins: alexherbo2 (alexherbo2@moz-31600A7E.w90-35.abo.wanadoo.fr)
[19:11:39] *** Quits: ulrik (ulrikdamm@moz-E38D4E51.fullrate.dk) (Connection reset by peer)
[19:11:44] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Ping timeout)
[19:11:54] *** Joins: ulrik (ulrikdamm@moz-E38D4E51.fullrate.dk)
[19:12:00] <eddyb> strcat: my problem was that I couldn't just monomorphize all the functions I would need
[19:12:18] <eddyb> there are 286 codes or so
[19:12:42] <eddyb> that I map to 256 LUT entries (the lowest 8 bits)
[19:12:59] <eddyb> so I would need at least 2^16 monomorphizations
[19:13:07] <eddyb> each of them would pull all the further decoding in
[19:14:02] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[19:14:12] *** nical is now known as nical|away
[19:14:17] <kvark> strcat: I'll probably end up with 2 inline functions for array access (one with checking and one without), that are switched in compile time using --cfg
[19:15:04] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[19:15:28] *** Joins: Rubennn (Rubennn@moz-529E706D.gewooniets.nl)
[19:16:40] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[19:17:23] *** Joins: olivernn (olivernigh@moz-7CE0F8.access.mtnbusiness.co.za)
[19:19:06] *** Joins: fyolnish (fyolnish@5E7C820E.3B5C4E68.8646540C.IP)
[19:19:10] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[19:19:15] *** Quits: ulrik (ulrikdamm@moz-E38D4E51.fullrate.dk) (Client exited)
[19:20:23] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[19:20:48] *** Quits: fyolnish (fyolnish@5E7C820E.3B5C4E68.8646540C.IP) (Ping timeout)
[19:20:54] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[19:22:14] *** Joins: Sharp (Sharp@19388942.6B775EBE.DC877F3B.IP)
[19:23:21] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[19:24:03] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[19:24:09] *** Quits: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net) (Quit: sw17ch)
[19:24:45] *** Quits: ndrei (avo@5958B30C.7CEC4B5E.866E0A25.IP) (Ping timeout)
[19:24:54] *** Joins: fyolnish (fyolnish@5E7C820E.3B5C4E68.8646540C.IP)
[19:25:27] <bstrie> I just used recursion in the context of my job!
[19:25:29] *** Joins: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net)
[19:25:31] <bstrie> that happens like, once a year
[19:25:54] *** Quits: reyre (reyre@moz-72FEF1DB.dsl.bell.ca) (Connection reset by peer)
[19:26:19] *** Joins: ndrei (avo@5958B30C.7CEC4B5E.866E0A25.IP)
[19:26:25] *** Joins: reyre (reyre@moz-72FEF1DB.dsl.bell.ca)
[19:26:37] *** Quits: fyolnish (fyolnish@5E7C820E.3B5C4E68.8646540C.IP) (Ping timeout)
[19:27:30] *** Quits: reyre (reyre@moz-72FEF1DB.dsl.bell.ca) (Connection reset by peer)
[19:27:31] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[19:27:38] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[19:27:51] *** Joins: reyre (reyre@moz-72FEF1DB.dsl.bell.ca)
[19:27:57] *** Joins: RustProof (Mibbit@moz-BA15A5BB.sfr.lns.abo.bbox.fr)
[19:28:33] *** Joins: guacamole (Mibbit@moz-23BE1D62.range217-44.btcentralplus.com)
[19:28:47] *** Joins: roy (user@moz-C21D3E9A.hsd1.il.comcast.net)
[19:29:13] <guacamole> Hello, I am having trouble understanding the ownership of strings reader from std::io
[19:29:45] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[19:30:25] <RustProof> what do you mean ?
[19:30:55] *** Quits: evanm (evanm@636AC086.5999CED5.71743E61.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[19:31:35] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[19:31:48] *** Quits: reyre (reyre@moz-72FEF1DB.dsl.bell.ca) (Connection reset by peer)
[19:31:55] <guacamole> I'm using the example code from http://static.rust-lang.org/doc/master/std/io/index.html
[19:32:05] *** Joins: reyre (reyre@moz-72FEF1DB.dsl.bell.ca)
[19:32:12] <guacamole> Specifically iterating over lines in a file
[19:32:39] <guacamole> I seem to be ending up with borrowed strings, but I was expecting to get owned strings
[19:33:26] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[19:33:27] <kvark> .to_owned() will give you the owned copy of the borrowed string
[19:33:32] *** Quits: reyre (reyre@moz-72FEF1DB.dsl.bell.ca) (Connection reset by peer)
[19:33:46] *** Quits: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[19:33:56] *** Joins: reyre (reyre@moz-72FEF1DB.dsl.bell.ca)
[19:34:14] <sfackler> guacamole: the lines iterator should be returning a ~str
[19:35:11] *** Quits: AvianFlu_ (AvianFlu@moz-723527FF.nycmny.fios.verizon.net) (Quit: Leaving...)
[19:35:27] <eddyb> abinader: I see you've hit a rooting error :P
[19:35:31] *** Quits: reyre (reyre@moz-72FEF1DB.dsl.bell.ca) (Connection reset by peer)
[19:35:37] <guacamole> That's what I thought, sfackler, but after applying line.trim() I get a &str (which is throughing an error)
[19:35:41] <eddyb> acrichto: that wouldn't exist if the list was using ~ or Rc instead of @
[19:35:49] *** Joins: reyre (reyre@moz-72FEF1DB.dsl.bell.ca)
[19:35:56] <sfackler> guacamole: trim returns a slice into the original string
[19:35:58] <guacamole> *throwing
[19:36:21] <guacamole> Oh, of course, thank you
[19:36:45] *** Joins: VikingZ (VikingZ@31D00E6A.8E7F3E00.CC73C50D.IP)
[19:36:59] <VikingZ> evening lads
[19:37:12] <RustProof> is 'libstd/unstable/dynamic_lib' usable ?
[19:37:23] <sfackler> we should really have a chomp() method that acts like trim_right() but modifies the underlying string
[19:37:35] <sfackler> RustProof: yep. it's super unsafe though, so be careful
[19:37:41] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[19:37:48] *** Joins: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca)
[19:37:53] *** Joins: AvianFlu (AvianFlu@moz-723527FF.nycmny.fios.verizon.net)
[19:37:54] <RustProof> i have a segfault :(
[19:38:02] *** Joins: Florob (Florob@moz-39532932.de)
[19:38:14] <abinader> eddyb: yeah :D thus why I needed to store a ref of both head and tail on Items...
[19:38:27] *** Quits: reyre (reyre@moz-72FEF1DB.dsl.bell.ca) (Connection reset by peer)
[19:38:39] <sfackler> RustProof: are you trying to use symbols from the library after allowing the DynamicLibrary object to drop out of scope?
[19:38:50] *** Joins: reyre (reyre@moz-72FEF1DB.dsl.bell.ca)
[19:38:53] *** Joins: frza (frza@moz-EB59A14E.fullrate.dk)
[19:38:58] <eddyb> abinader: List is sparkly clean now (apart from still using @), your work is very nice - though I wonder if anything uses List at all :/
[19:38:58] <abinader> if I got it right, it happens because &-ptr cannot receive an @-ptr
[19:39:02] <RustProof> it is failing on open()
[19:39:11] *** Joins: marianoguerra (marianogue@moz-1A3239B2.dip0.t-ipconnect.de)
[19:39:15] <eddyb> abinader: @T is non-owning and it copies
[19:39:22] <sfackler> is it *segfaulting* or *failing*?
[19:39:23] <eddyb> it's like trying to borrow a cloned Rc
[19:39:29] <RustProof> segfault
[19:39:36] <abinader> eddyb: there's at least one reference for it in libarena, and it's also used internally in librustc
[19:39:46] *** Joins: sunfish (chatzilla@moz-BBE3ABD.mv.mozilla.com)
[19:39:54] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[19:40:07] <eddyb> abinader: librustc abuses vectors like crazy
[19:40:08] <abinader> but tbh, working on this gave me a lot of insights on Rust internals :-)
[19:40:29] *** Quits: nitivermagupta (nitivermag@moz-15FCB70D.hsd1.ca.comcast.net) (Client exited)
[19:41:00] *** Joins: nitivermagupta (nitivermag@moz-15FCB70D.hsd1.ca.comcast.net)
[19:42:05] <RustProof> DynamicLibrary::open(...) calling dlopen() and then a lot of *dl* things until open_verify() and segfault
[19:42:40] *** Quits: nitivermagupta (nitivermag@moz-15FCB70D.hsd1.ca.comcast.net) (Ping timeout)
[19:43:13] *** Quits: pczarn (Mibbit@moz-69A55FA.izacom.pl) (Quit: http://www.mibbit.com ajax IRC Client)
[19:44:17] *** Joins: awidegreen (awidegreen@454C85BB.7B7767E.3688B332.IP)
[19:44:30] <sfackler> if it's crashing inside of libc I don't know what's going on
[19:45:07] *** Quits: reyre (reyre@moz-72FEF1DB.dsl.bell.ca) (Connection reset by peer)
[19:45:14] *** Joins: reyre (reyre@moz-72FEF1DB.dsl.bell.ca)
[19:46:00] *** Quits: awidegreen (awidegreen@454C85BB.7B7767E.3688B332.IP) (Ping timeout)
[19:47:40] *** Quits: olivernn (olivernigh@moz-7CE0F8.access.mtnbusiness.co.za) (Ping timeout)
[19:48:16] *** Quits: dranov (dranov@5F9B6AD9.82C4B75C.FB866788.IP) (Ping timeout)
[19:49:29] *** Joins: awidegreen (awidegreen@8543F1FD.A03A67DC.4329AE1A.IP)
[19:50:03] *** Joins: tupshin (quassel@moz-E7B03838.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com)
[19:51:42] *** Quits: RustProof (Mibbit@moz-BA15A5BB.sfr.lns.abo.bbox.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[19:51:54] *** Quits: reyre (reyre@moz-72FEF1DB.dsl.bell.ca) (Connection reset by peer)
[19:51:54] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[19:52:12] *** Joins: reyre (reyre@moz-72FEF1DB.dsl.bell.ca)
[19:52:12] *** Joins: jviereck (Adium@moz-B8899D53.dclient.hispeed.ch)
[19:52:17] *** Quits: ski (ski@moz-E5796727.student.chalmers.se) (Quit: Lost terminal)
[19:54:10] *** Quits: reyre (reyre@moz-72FEF1DB.dsl.bell.ca) (Connection reset by peer)
[19:54:38] *** Joins: reyre (reyre@moz-72FEF1DB.dsl.bell.ca)
[19:55:00] *** Joins: c-a (c-a@moz-DBDF8C81.cust.bluewin.ch)
[19:55:13] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[19:55:59] *** Quits: reyre (reyre@moz-72FEF1DB.dsl.bell.ca) (Connection reset by peer)
[19:56:34] *** Joins: reyre (reyre@moz-72FEF1DB.dsl.bell.ca)
[19:57:13] *** Quits: edwardw (edwardw@4112974A.B4358688.30F15291.IP) (Quit: Leaving...)
[19:57:29] *** Quits: Ferreus (ferreus@moz-E0A43021.lsn.wtnet.de) (Ping timeout)
[19:57:38] *** Joins: edwardw (Mibbit@4112974A.B4358688.30F15291.IP)
[19:58:03] *** Quits: jj2baile (jon@moz-345B5EBA.csclub.uwaterloo.ca) (Ping timeout)
[19:58:16] *** Joins: vgeddes (vincent.ge@moz-D8D4FE4D.dsl.mweb.co.za)
[19:58:33] *** Quits: maxli (maxli@moz-EE42E0E.student.cs.uwaterloo.ca) (Ping timeout)
[19:58:43] *** Joins: Ferreus (ferreus@moz-F639E160.lsn.wtnet.de)
[19:58:54] *** Quits: sellout (Adium@990A0A80.F4CAF5DC.C5F4E277.IP) (Quit: Leaving.)
[19:59:30] *** Joins: Ms2ger (Ms2ger@B7B2FF50.C60A97A6.F9FB0584.IP)
[20:00:01] *** Quits: Luqman (laden@moz-AB7945E9.csclub.uwaterloo.ca) (Ping timeout)
[20:00:34] *** Quits: reyre (reyre@moz-72FEF1DB.dsl.bell.ca) (Connection reset by peer)
[20:00:49] *** Joins: reyre (reyre@moz-72FEF1DB.dsl.bell.ca)
[20:00:58] *** Joins: maxli (maxli@moz-EE42E0E.student.cs.uwaterloo.ca)
[20:01:15] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[20:01:25] *** Joins: jj2baile (jon@moz-345B5EBA.csclub.uwaterloo.ca)
[20:02:45] *** Quits: sankha93|bot (uid12218@moz-31ABA2C0.irccloud.com) (Quit: Connection closed for inactivity)
[20:03:20] *** Quits: doener (doener@moz-C68F600D.unity-media.net) (Quit: leaving)
[20:03:26] *** Joins: Luqman (laden@moz-AB7945E9.csclub.uwaterloo.ca)
[20:03:28] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[20:03:30] *** Quits: reyre (reyre@moz-72FEF1DB.dsl.bell.ca) (Connection reset by peer)
[20:03:38] *** Quits: eneas (Thunderbir@moz-AF151E0C.red-83-43-28.dynamicip.rima-tde.net) (Quit: eneas)
[20:03:52] *** Joins: reyre (reyre@moz-72FEF1DB.dsl.bell.ca)
[20:05:31] *** Quits: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Quit: It is tiem!)
[20:05:32] *** Joins: Sorella_ (quildreen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[20:06:04] *** Quits: reyre (reyre@moz-72FEF1DB.dsl.bell.ca) (Connection reset by peer)
[20:06:32] *** Joins: reyre (reyre@moz-72FEF1DB.dsl.bell.ca)
[20:07:34] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[20:07:54] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[20:08:00] *** Quits: alinab (alina@moz-94EAE39D.alinab.org) (Quit: leaving)
[20:08:41] <guacamole> Please could anyone look at my code and let me know how I could improve it: https://github.com/simon-morris/rust-rosetta/blob/master/anagrams.rs
[20:10:00] *** Joins: edorian (Mibbit@moz-A37325D.dynamic.qsc.de)
[20:11:10] *** Quits: ndrei (avo@5958B30C.7CEC4B5E.866E0A25.IP) (Quit: leaving)
[20:11:37] *** Joins: tjc (tjc@moz-C767A933.bad.hfc.comcastbusiness.net)
[20:11:38] *** ChanServ sets mode: +o tjc
[20:11:47] <Eridius> guacamole: first thing that leaps out at me is sort_string() has no need to take a ~str, it should take &str
[20:12:17] *** Quits: arturo (Thunderbir@moz-E83B14F0.superkabel.de) (Ping timeout)
[20:12:19] <photex> cmr: you around?
[20:12:28] <photex> I have a quick question about your comment on github
[20:12:33] <Eridius> guacamole: also, why are you trying to sort utf-16 codepoints?
[20:12:35] <cmr> photex: yes
[20:12:51] <photex> If I replace the impl, then how can we have the formatting?
[20:12:51] <guacamole> I couldn't find the right way to sort chars
[20:12:52] <Eridius> guacamole: not only will that not work as expected, but it will also break if you have surrogate pairs in your stream, because you'll be sorting each half independently
[20:13:02] <photex> for example ParseEvents 
[20:13:03] <Eridius> guacamole: you can use .chars().to_owned_vec() to get a ~[char]
[20:13:21] *** Quits: kvark (Mibbit@9A8A5739.49975FB2.AE2D72A6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[20:13:23] <cmr> photex: just that one impl, not all of them.
[20:13:28] <cmr> the errorlevel
[20:13:42] <photex> oh, that's a comment on a line
[20:13:44] <cmr> yes
[20:13:53] * photex doesn't really like the github PR ui
[20:13:59] <photex> I just get an email with a comment
[20:14:01] <photex> no context
[20:14:03] <photex> :/
[20:14:56] <bvssvni> guacamole: maybe use a fold to compute max_length?
[20:15:18] <Eridius> guacamole: it's also worth noting that comparing characters is not going to use any sort of locale-aware comparison. I fully expect it just compares the codepoint value
[20:15:48] <flan3002> Okay, what do I have to do to reference stuff from a file in the same directory?
[20:16:37] <cmr> flan3002: ./foo ?
[20:16:41] *** Joins: dherman (dherman@moz-BBE3ABD.mv.mozilla.com)
[20:16:42] *** ChanServ sets mode: +ao dherman dherman
[20:16:45] <guacamole> Eridius: I assume that's fine for this usage, since all I really want is a unique string for each anagram. (Although I guess the right way would be to convert the strings to lower case, and check for any non-A-Za-z characters
[20:17:08] *** Joins: arturo (Thunderbir@moz-4F69776.superkabel.de)
[20:17:08] <flan3002> cmr: From a rust file of course, like use ?
[20:17:28] <cmr> flan3002: you mean modules? http://static.rust-lang.org/doc/master/tutorial.html#crates-and-the-module-system
[20:17:41] <flan3002> Yeah, forgot the name...
[20:17:55] <cmr> guacamole: you should just be using .chars(), instead of converting it to utf-16...
[20:18:02] *** Quits: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP) (Ping timeout)
[20:18:42] *** Joins: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net)
[20:18:49] *** Quits: arturo (Thunderbir@moz-4F69776.superkabel.de) (Ping timeout)
[20:18:56] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[20:19:00] *** Joins: fyolnish (fyolnish@5E7C820E.3B5C4E68.8646540C.IP)
[20:19:03] *** Joins: themgt (themgt@moz-83F07CDA.cm.vtr.net)
[20:19:07] <bvssvni> guacamole: you can replace the for loop that computes max_length with a fold to write it in one line
[20:19:18] <bvssvni> guacamole: http://static.rust-lang.org/doc/master/std/iter/trait.Iterator.html#method.fold
[20:19:40] *** Joins: arturo (Thunderbir@moz-E83B14F0.superkabel.de)
[20:19:47] <guacamole> bvssvni: done, didn't realise Rust had folds, very glad to find them :)
[20:20:21] <bvssvni> guacamole: those methods are really handy sometimes :)
[20:20:24] <pzol> Can't figure out this lifetime issue https://gist.github.com/9237664 again...
[20:20:41] *** Quits: fyolnish (fyolnish@5E7C820E.3B5C4E68.8646540C.IP) (Ping timeout)
[20:20:47] <photex> ok pushed it up. Thanks for clarifying cmr
[20:20:51] *** Joins: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP)
[20:21:18] *** Quits: frza (frza@moz-EB59A14E.fullrate.dk) (Quit: frza)
[20:21:53] *** Quits: andre_ (andre@CA528A4A.45A4338E.8EE27E6.IP) (Quit: leaving)
[20:21:55] <pzol> Eridius guacamole  it will work if you use ascii only
[20:21:56] *** Joins: glaebhoerl (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[20:22:30] <bvssvni> pzol: why are you returning  &'a [Cluster<'a>] and not ~[Cluster<'a>]?
[20:23:02] *** Quits: dherman (dherman@moz-BBE3ABD.mv.mozilla.com) (Quit: dherman)
[20:23:07] *** Joins: blaphmat (Mibbit@moz-8CFC632C.lv.lv.cox.net)
[20:23:30] *** Joins: fyolnish (fyolnish@5E7C820E.3B5C4E68.8646540C.IP)
[20:23:44] <pzol> bvssvni good question... thanks ;) guess it's time to go to bed :D
[20:23:56] <Eridius> guacamole: hmm, anagrams. If you know the dataset is ascii only, you can skip chars entirely, just use .as_bytes() and produce a sorted ~[u8] as your key
[20:24:01] <bvssvni> pzol: lol
[20:24:15] <Eridius> actually, that should work for non-ascii too
[20:24:24] <Eridius> the only thing it won't handle is decomposed vs composed, but .chars() won't handle that either
[20:24:24] *** Quits: bjustin (bjustin@moz-8FC28563.sierrabravo.net) (Connection reset by peer)
[20:24:51] *** Joins: heftig (heftig@moz-3EB488C6.dip0.t-ipconnect.de)
[20:24:58] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[20:25:13] *** Quits: fyolnish (fyolnish@5E7C820E.3B5C4E68.8646540C.IP) (Ping timeout)
[20:25:20] *** Joins: mattyhall (Mibbit@moz-248CDDC0.skybroadband.com)
[20:25:23] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[20:25:23] *** ChanServ sets mode: +ao brson brson
[20:25:29] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[20:25:34] <pzol> Eridius guacamole  I'd go for chars(), you have no other way atm... ideally you should use grapheme clusters which are not implemented, yet
[20:25:35] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[20:25:52] *** Quits: Anupkumar (uid16774@moz-A42E5B7B.irccloud.com) (Quit: Connection closed for inactivity)
[20:25:57] <Eridius> pzol: if you can canonicalize the string first, then sorting the bytes will be sufficient for anagrams
[20:26:09] <guacamole> Ok, made some changes
[20:26:09] <blaphmat> will rust support scala like monands?
[20:26:20] <strcat> blaphmat: in the stdlib? unlikely
[20:26:23] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[20:26:27] *** Quits: Jemaclus (Jemaclus@4EEAB704.5843BA5A.D4E4C7A5.IP) (Client exited)
[20:26:56] <strcat> but maybe the language will evolve to the point where you can do functors/monads well with traits
[20:27:08] <pzol> Eridius yes, you can normalize them, http://static.rust-lang.org/doc/master/std/str/trait.StrSlice.html#tymethod.nfd_chars 
[20:27:11] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[20:27:14] *** Joins: evanm (evanm@636AC086.5999CED5.71743E61.IP)
[20:27:19] *** Joins: NiccosSystem (NiccosSyst@moz-ED196BB4.customer.lyse.net)
[20:27:44] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[20:28:09] *** Parts: edwardw (Mibbit@4112974A.B4358688.30F15291.IP) ()
[20:28:39] *** Joins: ulrik (ulrikdamm@moz-E38D4E51.fullrate.dk)
[20:28:42] *** Joins: frza (frza@moz-EB59A14E.fullrate.dk)
[20:29:13] <pzol> unicode is funny - I copy क्षि and when I paste it it becomes two charactes
[20:29:31] *** Quits: bvssvni (Mibbit@moz-C4579D6F.bb.online.no) (Quit: http://www.mibbit.com ajax IRC Client)
[20:29:49] <blaphmat> i guess it would be interesting trying to figure out what it means to map over an owned pointer vs a managed pointer..
[20:30:04] <eddyb> managed pointers => drain
[20:30:12] <strcat> blaphmat: managed ptrs are deprecated
[20:30:14] <eddyb> hopefully in about a week or so
[20:30:28] *** Joins: sellout (Adium@moz-D50C2457.hfc.comcastbusiness.net)
[20:30:39] <strcat> blaphmat: I don't think there's a big impact on generic APIs from this stuff
[20:30:41] <eddyb> I am like a couple days away from making @T replaceable everywhere
[20:30:46] <strcat> Iterator is a good example
[20:31:01] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[20:31:06] <mattyhall> Hi. If I have a vector and I want to call a function which changes state on each element; how would I go about doing that? (simplified example: https://gist.github.com/mattyhall/9237865)
[20:31:07] *** Quits: LRN (LRN@moz-50DF30B.nationalcablenetworks.ru) (Connection reset by peer)
[20:31:08] <eddyb> pzol: well, Konversation handles क्षि as a single character
[20:31:18] <eddyb> pzol: and it has UTF-16 issues, but this works fine
[20:31:28] <strcat> mattyhall: mut_iter
[20:31:38] <strcat> iter gives &T
[20:31:52] <pzol> eddyb it works for me in safari, console, vim etc but not in sublime  :(
[20:32:06] <eddyb> blame sublime then
[20:32:15] <mattyhall> strcat:  Cheers. I no longer seem to be able to read docs properly!
[20:32:28] <pzol> yeah... and the beauty of unicode... 
[20:32:29] *** Quits: jackneill (jackneill@moz-5A5F7142.pool.digikabel.hu) (Ping timeout)
[20:32:54] *** Joins: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP)
[20:33:23] <pzol> that's somewhat baffling, when you work on implementing unicode stuff only to find, that some of your tools don't handle it (:
[20:33:50] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[20:34:01] *** Joins: mihneadb (mihneadb@moz-9897BD47.static.ziggozakelijk.nl)
[20:34:05] *** Joins: LRN (LRN@moz-50DF30B.nationalcablenetworks.ru)
[20:34:21] *** Quits: untwisted (untwisted@moz-60D579DC.hsd1.ca.comcast.net) (Ping timeout)
[20:35:25] <pzol> cool... you paste क्षि and then have to backspace 4 times to delete it :D
[20:35:26] *** Joins: Diamond (dick@moz-80556682.ks.ks.cox.net)
[20:35:39] <Eridius> guacamole: here is what I'd recommend for anagrams: https://gist.github.com/kballard/9237968
[20:35:45] <Eridius> note, I haven't tried compiling this, because I don't have unixdict.txt
[20:36:06] <cmr> that doesn't prevent you from compiling.
[20:36:36] <Eridius> cmr: I syntax-checked
[20:37:04] *** Joins: cschneid (cschneid@moz-CA025D57.ip.mcleodusa.net)
[20:37:25] <cschneid> Is there a good post about the Rust type system vs. the Haskell type system? I'm familiar with haskell and would like a compare/contrast. 
[20:37:26] *** Quits: rootnode (rootnode@moz-435951C5.pools.arcor-ip.net) (Ping timeout)
[20:37:38] <blaphmat> Will traits support he idea of covariant/contravarient type parameters?
[20:38:06] <cmr> blaphmat: already do, http://static.rust-lang.org/doc/master/std/kinds/marker/index.html
[20:38:13] <cmr> blaphmat: it's normally inferred, can specify with markers.
[20:38:17] <Eridius> cmr: dammit, you navigate the docs faster than I do
[20:38:32] <cmr> Eridius: are you using a mouse? :>
[20:38:50] *** Joins: Jemaclus (Jemaclus@4EEAB704.5843BA5A.D4E4C7A5.IP)
[20:39:31] *** Quits: canhtak (canhtak@moz-251024EB.wl.t.ulaval.ca) (Ping timeout)
[20:39:58] <Eridius> cmr: did you just search for the damn marker name?
[20:40:08] <cmr> well, marker.
[20:40:15] <cmr> already knew where it ways :p
[20:40:20] <cmr> but yes search
[20:40:22] <Eridius> pfft
[20:43:14] <blaphmat> very interesting -- id love to know if anyone was working on a library to add monandic types to rust
[20:43:23] <Eridius> monadic types require higher-kinded types
[20:43:24] <Eridius> which we don't have
[20:43:34] <cmr> blaphmat: we have some monads, but not a monad type.
[20:43:51] *** Joins: dherman (dherman@moz-BBE3ABD.mv.mozilla.com)
[20:43:51] *** ChanServ sets mode: +ao dherman dherman
[20:44:53] *** Quits: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net) (Ping timeout)
[20:45:32] <flan3002> Eridius: Is there an ETA for their addition?
[20:45:32] *** Quits: glaebhoerl (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Connection reset by peer)
[20:45:37] *** Joins: glaebhoerl (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[20:45:37] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[20:46:04] *** Quits: alexherbo2 (alexherbo2@moz-31600A7E.w90-35.abo.wanadoo.fr) (Ping timeout)
[20:46:05] <flan3002> Like, if it is a goal for 1.0, 2.0 or else.
[20:46:10] <strcat> flan3002: it's not planned, and wouldn't necessarily be accepted
[20:46:30] <aatch> strcat, eh, nmatsakis has said it will probably happen.
[20:47:01] <aatch> it's not specifically planned, but theres no real reason to not support HKT
[20:47:05] <guacamole> Thanks for all the help with the anagrams stuff guys, especially bvssvni pointing out folds!
[20:47:26] <aatch> definitely not a high priority though, post-1.0
[20:47:43] <Eridius> HKT would be really nice. Definitely not 1.0 material
[20:47:50] <strcat> aatch: if it's not orthogonal to the other features + complicates the type system / implementation a lot, then those are reasons to not do it
[20:48:06] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[20:48:19] *** Quits: mattyhall (Mibbit@moz-248CDDC0.skybroadband.com) (Quit: http://www.mibbit.com ajax IRC Client)
[20:48:23] <strcat> there are plenty of features that would be nice to have like CTFE, user-defined literals, user-defined operators, infix call syntax, [...] but they all make the language/implementation more complex
[20:48:40] *** Joins: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net)
[20:48:44] <strcat> they have to pull their weight
[20:49:14] * flan3002 google CTFE...
[20:49:24] <Eridius> compile-time function evaluation
[20:49:46] *** Quits: hoverbear (hoverbear@726D908C.44E18222.E74D50F2.IP) (Quit: Taking a nap.)
[20:49:46] <flan3002> Yeah, that's what she (Google) said...
[20:51:56] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[20:52:19] *** Quits: mgottschlag (quassel@moz-D356AE98.cust.bluewin.ch) (Ping timeout)
[20:53:28] *** Joins: Capt_Redbeard (Capt_Redbe@moz-4998C3D0.ok.ok.cox.net)
[20:54:55] *** Quits: Capt_Redbeard (Capt_Redbe@moz-4998C3D0.ok.ok.cox.net) (Client exited)
[20:55:04] *** Joins: Capt_Redbeard (Capt_Redbe@moz-4998C3D0.ok.ok.cox.net)
[20:55:18] *** Quits: jviereck (Adium@moz-B8899D53.dclient.hispeed.ch) (Quit: Leaving.)
[20:55:20] *** Joins: jviereck (Adium@moz-C50F0369.ethz.ch)
[20:55:40] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[20:55:58] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[20:55:59] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[20:56:00] *** Joins: canhtak (canhtak@moz-251024EB.wl.t.ulaval.ca)
[20:56:39] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[20:57:39] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[20:59:18] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[20:59:20] *** Quits: LRN (LRN@moz-50DF30B.nationalcablenetworks.ru) (Ping timeout)
[21:01:16] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[21:01:16] *** ChanServ sets mode: +ao brson brson
[21:01:19] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[21:01:30] *** Quits: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net) (Quit: Leaving)
[21:01:57] *** Joins: alexherbo2 (alexherbo2@moz-2BD2D18C.w90-3.abo.wanadoo.fr)
[21:04:17] *** Quits: Ms2ger (Ms2ger@B7B2FF50.C60A97A6.F9FB0584.IP) (Quit: nn)
[21:04:18] *** Quits: jviereck (Adium@moz-C50F0369.ethz.ch) (Quit: Leaving.)
[21:04:44] *** Joins: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:05:03] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[21:07:58] <flan3002> Hm, "extern crate tween;". tween.rs is in the same directory...
[21:08:21] <flan3002> But it does not work. "can't find crate for `tween`"
[21:08:56] <bjz> flan3002: you need to link to a compiled version of tween
[21:09:09] <bjz> that's what `extern crate` does
[21:09:22] <flan3002> Well, then that's wrong. :P
[21:09:23] <bjz> otherwise just do `mod tween`
[21:09:41] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[21:10:10] <flan3002> Well, then "`use` and `extern crate` declarations must precede items".
[21:10:32] <flan3002> I got "use tween::ease" in the next line.
[21:10:36] *** Quits: asmyers (quassel@ABB8FFBC.A07F7734.FAA4474F.IP) (Ping timeout)
[21:10:51] <bjz> yeah, it's a little weird
[21:10:51] *** Joins: espindola (espindola@moz-F0FBD3B4.dsl.teksavvy.com)
[21:11:02] *** Quits: espindola (espindola@moz-F0FBD3B4.dsl.teksavvy.com) (Input/output error)
[21:11:03] *** Joins: espindola (espindola@moz-F0FBD3B4.dsl.teksavvy.com)
[21:11:06] <bjz> `use tween::ease; mod tween;`
[21:11:12] <flan3002> What?
[21:11:33] <flan3002> Why that?
[21:12:16] <bjz> it's like you went: `use tween::ease; mod tween { pub fn ease() {} } in the same file
[21:12:27] *** Quits: whitglint (uid15486@moz-31ABA2C0.irccloud.com) (Quit: Connection closed for inactivity)
[21:12:50] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[21:12:53] <flan3002> Still weird.
[21:13:03] <bjz> `mod tween;` puts all the code from tween.rs in a module at the `mod tween;` place
[21:13:18] <bjz> I find it a tad odd too - but i dunno
[21:13:29] <flan3002> Okay, learned that. :D
[21:13:31] <flan3002> Thanks!
[21:13:38] <bjz> I think they want to prevent shadowing of items
[21:14:16] <aatch> it follows the shadowing rules, yes.
[21:14:46] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[21:14:48] <flan3002> Bye all!
[21:14:49] *** Quits: abinader (sid21713@moz-A42E5B7B.irccloud.com) (Quit: )
[21:15:00] *** Quits: NiccosSystem (NiccosSyst@moz-ED196BB4.customer.lyse.net) (Ping timeout)
[21:15:57] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[21:15:57] *** ChanServ sets mode: +ao pcwalton pcwalton
[21:16:29] *** Quits: flan3002 (till@moz-E0853D96.superkabel.de) (Ping timeout)
[21:17:38] *** Joins: fyolnish (fyolnish@5E7C820E.3B5C4E68.8646540C.IP)
[21:17:52] *** Joins: LRN (LRN@moz-EA80C63C.nationalcablenetworks.ru)
[21:19:19] *** Quits: fyolnish (fyolnish@5E7C820E.3B5C4E68.8646540C.IP) (Ping timeout)
[21:20:58] *** Quits: vgeddes (vincent.ge@moz-D8D4FE4D.dsl.mweb.co.za) (Ping timeout)
[21:21:40] *** Quits: guacamole (Mibbit@moz-23BE1D62.range217-44.btcentralplus.com) (Quit: http://www.mibbit.com ajax IRC Client)
[21:23:24] *** Joins: fyolnish (fyolnish@5E7C820E.3B5C4E68.8646540C.IP)
[21:23:55] *** Quits: ricepuddin (graham@moz-5A2243EB.wlan.ic.ac.uk) (Ping timeout)
[21:24:32] *** Quits: dschatzberg (dschatzber@moz-668DB0D9.bu.edu) (Quit: Leaving)
[21:25:06] *** Quits: fyolnish (fyolnish@5E7C820E.3B5C4E68.8646540C.IP) (Ping timeout)
[21:25:39] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[21:27:12] *** Joins: claudiu (claudiu@moz-33191099.thefacebook.com)
[21:27:53] *** Quits: awidegreen (awidegreen@8543F1FD.A03A67DC.4329AE1A.IP) (Ping timeout)
[21:28:53] *** Quits: claudiu (claudiu@moz-33191099.thefacebook.com) (Ping timeout)
[21:30:48] *** Joins: popinman322 (MagiSun@moz-DB516D62.twcny.res.rr.com)
[21:31:22] *** Quits: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP) (Quit: Leaving...)
[21:31:27] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[21:32:17] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[21:33:01] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:33:19] *** Quits: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[21:33:48] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[21:34:36] *** Joins: claudiu (claudiu@moz-33191099.thefacebook.com)
[21:35:11] *** Joins: agarie_ (agarie@9183E199.ECEBC62.85FEC2CD.IP)
[21:36:11] *** Quits: agarie (agarie@9183E199.ECEBC62.85FEC2CD.IP) (Ping timeout)
[21:36:53] *** Quits: agarie_ (agarie@9183E199.ECEBC62.85FEC2CD.IP) (Ping timeout)
[21:36:55] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[21:38:24] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[21:38:37] *** Quits: glaebhoerl (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Connection reset by peer)
[21:38:40] *** Joins: glaebhoerl_ (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[21:39:31] *** Quits: sk (sk@61A494B3.BA40E8A.AAC02D62.IP) (Ping timeout)
[21:39:43] *** Quits: Kruppe (user@moz-253119B0.esg.uwaterloo.ca) (Client exited)
[21:39:54] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[21:41:27] *** Quits: arturo (Thunderbir@moz-E83B14F0.superkabel.de) (Ping timeout)
[21:42:18] *** Joins: Kruppe (user@moz-253119B0.esg.uwaterloo.ca)
[21:42:19] *** Joins: sk (sk@61A494B3.BA40E8A.AAC02D62.IP)
[21:45:16] *** Joins: arturo (Thunderbir@moz-4F69776.superkabel.de)
[21:46:08] *** Quits: blaphmat (Mibbit@moz-8CFC632C.lv.lv.cox.net) (Quit: http://www.mibbit.com ajax IRC Client)
[21:46:45] *** Quits: Ferreus (ferreus@moz-F639E160.lsn.wtnet.de) (Quit: WeeChat 0.4.3-dev)
[21:46:56] *** Quits: arturo (Thunderbir@moz-4F69776.superkabel.de) (Ping timeout)
[21:47:13] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[21:47:48] *** Joins: arturo (Thunderbir@moz-E83B14F0.superkabel.de)
[21:48:27] *** Joins: [squiddy] (squiddy@moz-767EF079.dynamic.cablesurf.de)
[21:48:57] *** Quits: [squiddy] (squiddy@moz-767EF079.dynamic.cablesurf.de) (Quit: Leaving)
[21:51:53] *** Quits: sawrubh (uid6719@moz-5F4AA75A.irccloud.com) (Quit: Connection closed for inactivity)
[21:55:55] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[21:56:46] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[21:58:04] *** Quits: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP) (Ping timeout)
[21:58:28] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[21:59:48] *** Quits: Kruppe (user@moz-253119B0.esg.uwaterloo.ca) (Ping timeout)
[22:00:19] *** Quits: edorian (Mibbit@moz-A37325D.dynamic.qsc.de) (Quit: http://www.mibbit.com ajax IRC Client)
[22:02:01] *** Joins: chenyang (user@moz-451CCEAC.airbears2.berkeley.edu)
[22:05:54] *** Quits: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP) (Quit: Lost terminal)
[22:06:36] *** Quits: ulrik (ulrikdamm@moz-E38D4E51.fullrate.dk) (Quit: )
[22:07:14] *** Joins: arrrrrrrrr (arrrrrrrrr@moz-ED80CA0A.dynamic.qsc.de)
[22:07:41] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[22:08:06] *** Joins: jviereck (Adium@moz-B8899D53.dclient.hispeed.ch)
[22:08:16] *** Joins: rustguest (Mibbit@34E32AFD.DFC22EFB.DDE5D3F6.IP)
[22:08:27] <arrrrrrrrr> how would you translate this to rust:
[22:08:29] *** Joins: adridu59 (Mibbit@moz-CB54E913.rev.numericable.fr)
[22:08:34] <rustguest>  capture of moved value: blah, how to fix this?
[22:08:37] <arrrrrrrrr> https://gist.github.com/anonymous/01bdc89cc083e278bdff
[22:09:07] *** Quits: zztr (Thunderbir@moz-CA50D606.dsl.static.sonic.net) (Ping timeout)
[22:09:31] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[22:09:35] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[22:10:40] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[22:10:42] *** Joins: NiccosSystem (NiccosSyst@moz-ED196BB4.customer.lyse.net)
[22:11:50] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[22:11:53] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[22:12:19] <adridu59> arrrrrrrrr: what's puts?
[22:13:20] *** Joins: zztr (Thunderbir@moz-CA50D606.dsl.static.sonic.net)
[22:13:29] *** Joins: doomlord__ (servitor@moz-99BE89EC.range86-184.btcentralplus.com)
[22:13:31] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[22:13:40] *** Quits: doomlord__ (servitor@moz-99BE89EC.range86-184.btcentralplus.com) (Client exited)
[22:13:48] <sfackler> adridu59: print a string to stdout
[22:13:58] <rustguest> How do you handle these types of errors: 
[22:13:58] <rustguest> error: use of moved value:
[22:14:06] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[22:14:27] *** Quits: dherman (dherman@moz-BBE3ABD.mv.mozilla.com) (Quit: dherman)
[22:14:30] <mcpherrin> rustguest: It depends on why you've moved the value.  Do you have a code snippet? Maybe put it in a gist
[22:14:51] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[22:15:49] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Ping timeout)
[22:16:01] <adridu59> arrrrrrrrrrr: rough sketch http://mibpaste.com/D30HmK 
[22:16:01] <rustguest> mcpherrin: sure one sec
[22:16:26] <arrrrrrrrr> adridu59: Invalid link!
[22:16:28] *** Joins: pudgetta (Mibbit@B1688E8B.B9AD8132.DBBCD276.IP)
[22:17:19] <rustguest> mcpherrin: let mut stream1 = stream; let mut stream2 = stream; 
[22:17:19] <adridu59> arrrrrrrrr: http://paste2.org/d0EP37XU
[22:17:39] *** Joins: fyolnish (fyolnish@5E7C820E.3B5C4E68.8646540C.IP)
[22:17:45] *** Quits: sbalmos (quassel@CA5677B6.576D0C1.ED2EFC1B.IP) (Client exited)
[22:17:47] <adridu59> arrrrrrrrr: but I didn't get the point of the puts() instruction
[22:17:49] <mcpherrin> rustguest: you probably want to let mut stream1 = stream.clone();
[22:17:52] <rustguest> i just want to access to a variable more than once, maybe even a copy, but i cant call clone() on it
[22:17:55] <pudgetta> Wondering if it's possible to make a Rust library I can call with the JNI on Android, is there any project on github that's working towards that?
[22:18:01] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[22:18:09] <rustguest> mcpherrin:  failed to find an implementation of trait std::clone::Clone for std::io::net::tcp::TcpStream
[22:18:12] <mcpherrin> pudgetta: I think people have done this
[22:18:20] <mcpherrin> rustguest: Your Rust is too old :)
[22:18:22] <arrrrrrrrr> adridu59: Unfortunately not. range evaluates num only once
[22:18:39] <rustguest> mcpherrin: :(
[22:18:39] <mcpherrin> rustguest: Clone for TcpStream was implemented fairly recently.  Three weeks ago maybe.
[22:18:52] <mcpherrin> Are you using 0.9?
[22:18:55] <rustguest> yes
[22:18:59] <rustguest> is there a workaround?
[22:19:07] <mcpherrin> Not a really good one :/
[22:19:09] <rustguest> i cant update. the server runs on .9
[22:19:20] <mcpherrin> 0.9 and tcpstream was a pain :S
[22:19:20] *** Quits: fyolnish (fyolnish@5E7C820E.3B5C4E68.8646540C.IP) (Ping timeout)
[22:19:33] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[22:19:44] *** Joins: kvanb (kvanb@moz-BFEE4085.lnse5.win.bigpond.net.au)
[22:19:52] *** Quits: jyasskin_w (jyasskin@DAF66858.C60FE7DC.4065847B.IP) (Ping timeout)
[22:20:02] *** Quits: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net) (Ping timeout)
[22:20:12] <rustguest> mcpherrin: thanks anyways
[22:20:13] *** Quits: mye (mye@moz-1929E5E2.dip0.t-ipconnect.de) (Quit: mye)
[22:20:19] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[22:20:32] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[22:22:26] <adridu59> arrrrrrrrr: yea. you don't want range
[22:22:57] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[22:23:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[22:23:08] <pudgetta> mcpherrin: Nice know of any projects of the top of your head?
[22:23:19] <arrrrrrrrr> adridu59: So what's the right way to do it?
[22:23:26] *** Joins: fyolnish (fyolnish@5E7C820E.3B5C4E68.8646540C.IP)
[22:23:27] <pudgetta> meant "off" not "of"
[22:23:34] <pudgetta> sorry
[22:23:49] <adridu59> arrrrrrrrr: I do not know, I'm not used to non-fixed for loops
[22:23:52] *** Quits: AvianFlu (AvianFlu@moz-723527FF.nycmny.fios.verizon.net) (Quit: Leaving...)
[22:24:02] <mcpherrin> pudgetta: nope, sorry, just know I've heard people talk about it
[22:24:34] <pudgetta> mcpherrin: Thanks, I'll look around on github.
[22:24:49] *** Joins: hoverbear (hoverbear@moz-88074483.wireless.uvic.ca)
[22:25:06] *** Joins: reedlepee (Mibbit@14310444.B9CCEC14.CC1A2609.IP)
[22:25:12] *** Quits: fyolnish (fyolnish@5E7C820E.3B5C4E68.8646540C.IP) (Ping timeout)
[22:25:20] *** Quits: pudgetta (Mibbit@B1688E8B.B9AD8132.DBBCD276.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:26:09] <adridu59> arrrrrrrrr: could it be implemented with a while? the C for loop seems like a hack to me
[22:26:34] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[22:26:53] *** Joins: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP)
[22:27:21] *** Quits: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org) (Ping timeout)
[22:27:54] *** Quits: tjc (tjc@moz-C767A933.bad.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[22:28:20] *** Quits: colinsurprenant (colin@2AADC632.55903650.5DADCDAE.IP) (Quit: colinsurprenant)
[22:28:40] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[22:28:42] *** Quits: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP) (Ping timeout)
[22:29:00] *** Quits: frza (frza@moz-EB59A14E.fullrate.dk) (Quit: frza)
[22:30:21] <arrrrrrrrr> adridu59: anything but for is a hack here
[22:30:28] <arrrrrrrrr> I don't see an elegant way to do this in rust
[22:31:43] *** Quits: reedlepee (Mibbit@14310444.B9CCEC14.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:32:53] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[22:33:39] <adridu59> I don't use that kind of thing so you will have to ask someone smarter than me :)
[22:33:46] *** Quits: adridu59 (Mibbit@moz-CB54E913.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[22:34:53] *** Joins: jyasskin_w (jyasskin@5CA6DC39.C60FE7DC.4065847B.IP)
[22:36:26] *** Joins: johnmurray (jmurray@moz-E20CDB9D.dynamic.ip.windstream.net)
[22:36:29] *** Quits: johnmurray (jmurray@moz-E20CDB9D.dynamic.ip.windstream.net) (Quit: johnmurray)
[22:36:42] <eddyb> arrrrrrrrr: does it factorize a number?
[22:36:48] *** Joins: zmthy (zmthy@moz-C2881CC3.ecs.vuw.ac.nz)
[22:36:56] <arrrrrrrrr> sure but I'm not talking about factorization in general
[22:37:06] <arrrrrrrrr> I'm interested in this particular code
[22:37:23] *** Quits: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net) (Quit: sw17ch)
[22:37:50] *** Quits: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[22:37:52] <eddyb> arrrrrrrrr: the for condition can be num > 1
[22:38:07] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Ping timeout)
[22:38:27] *** Joins: jmgrosen_ (jmgrosen@moz-848F6087.sb.sd.cox.net)
[22:38:41] <arrrrrrrrr> eddyb: that doesn't change much, i think
[22:39:22] <eddyb> let mut i = 2; while num > 1 { while num % i == 0 { print!("{} ", i); num /= i; } i += 1;}
[22:39:38] *** Quits: leslie (Adium@802083C6.67DB9176.67D29DD9.IP) (Ping timeout)
[22:39:43] <rustguest> if i send an struct via channel and receive via port, can i resend that same struct after it has been received?
[22:39:45] *** Joins: jdm (jdm@CAB30FBD.8F96AEA7.2D179A7D.IP)
[22:39:45] *** ChanServ sets mode: +o jdm
[22:39:45] *** Joins: leslie (Adium@802083C6.67DB9176.67D29DD9.IP)
[22:40:01] <rustguest> via the same port and channel?
[22:40:18] *** Quits: victorporof (victorporo@13F2CEC5.7672369.D8E68FF6.IP) (Quit: victorporof)
[22:40:36] <eddyb> arrrrrrrrr: it moves i out of the condition
[22:40:39] *** Quits: sankha93 (sankha93@7061CD01.D6BD0D91.22D41759.IP) (Client exited)
[22:40:45] <eddyb> so you can use count for i
[22:40:54] <arrrrrrrrr> eddyb: I used a for loop because a while loop is less clear
[22:41:41] <rustguest> chan.send(x); let mut y = port.recv(); let mut z = port.recv();
[22:41:44] <rustguest> is that allowed?
[22:42:06] <eddyb> for i in count(2, 1) { if num <= 1 { break; } while num % i == 0 { print!("{} ", i); num /= i; }}
[22:42:20] *** Joins: ricepuddin (graham@moz-7D68765A.cable.virginm.net)
[22:42:30] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[22:43:33] *** Parts: judder (maradukewa@A4DC519F.6379DA33.78E362FE.IP) ()
[22:43:36] *** Quits: glaebhoerl_ (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Quit: )
[22:43:44] <arrrrrrrrr> eddyb: that's better but still not as good as the original version
[22:44:45] <rustguest> eddyb: im on .9. in master, they have support for clone() for tcpstreams. Is there a workaround for clone(), im still running .9
[22:44:57] <cmr> rustguest: no, there is no workaround.
[22:45:45] <cmr> rustguest: yes, if the struct is Pod.
[22:45:58] <cmr> although I don't think Pod existed in 0.9
[22:46:03] <cmr> (as an explicit trait, that is)
[22:46:33] <rustguest> cmr: well, i made a mistake when i said struct, i meant to say tcpstream...
[22:46:39] <rustguest> :(
[22:46:42] <cmr> rustguest: TcpStream is not Pod.
[22:46:47] <cmr> there's seriously no workaround
[22:46:57] <rustguest> shiiii...
[22:47:02] <cmr> at least not a good one.
[22:47:19] <cmr> you could do std::ptr::read_ptr on a pointer to one
[22:47:23] <cmr> but they always need to both be alive.
[22:47:31] <cmr> because when one gets destroyed the socket will be closed.
[22:47:39] <bjz> cmr: there was Copy, but it wasn't exactly the same
[22:47:43] <cmr> bjz: not in 0.9
[22:47:50] <cmr> copy is long gone
[22:47:52] <bjz> oh yea
[22:47:53] <eddyb> rustguest: can't you upgrade to master?
[22:47:55] *** Joins: tjc (tjc@moz-791C24B0.phlapa.east.verizon.net)
[22:47:55] *** ChanServ sets mode: +o tjc
[22:48:02] <bjz> cmr: what was that, 0.7?
[22:48:10] <bjz> cmr: my versions blur
[22:48:10] <cmr> rustguest: and if they're on the same thread they're going to be blocking...
[22:48:14] <cmr> bjz: I think so yeah.
[22:48:23] <rustguest> cmr: k. eddyb: no not yet.
[22:48:31] <eddyb> :(
[22:48:42] *** Quits: lahwran (lahwran@lahwran.net) (Ping timeout)
[22:49:19] <eddyb> rusti: let mut num = 48; count(2, 1).take_while(|_| num > 1).flat_map(|i| count(i, 0).take_while(|_|, if num % i == 0 {num /= i; true} else {false})).to_owned_vec()
[22:49:24] -rusti- pastebinned 4 lines of output: http://ix.io/aLD
[22:49:38] <eddyb> rusti: let mut num = 48; count(2, 1).take_while(|_| num > 1).flat_map(|i| count(i, 0).take_while(|_| if num % i == 0 {num /= i; true} else {false})).to_owned_vec()
[22:49:42] -rusti- pastebinned 8 lines of output: http://ix.io/aLE
[22:49:59] <eddyb> rusti: use std::iter::count; let mut num = 48; count(2, 1).take_while(|_| num > 1).flat_map(|i| count(i, 0).take_while(|_| if num % i == 0 {num /= i; true} else {false})).to_owned_vec()
[22:50:02] -rusti- pastebinned 17 lines of output: http://ix.io/aLF
[22:50:15] <eddyb> doubling errors every time!
[22:51:00] *** Joins: glaebhoerl_ (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[22:51:04] <eddyb> shouldn't the inner closure have the same lifetime as the outer block?
[22:52:25] *** Quits: MrByte (Dartakio@moz-81792842.chy-wy.client.bresnan.net) (Ping timeout)
[22:52:38] <eddyb> rusti: use std::iter::count; let mut num = 48; count(2, 1).take_while(|_| num > 1).flat_map(|i| {let mut j = 0; while num % i == 0 {num /= i; j += 1;} count(i, 0).take(j)}).to_owned_vec()
[22:52:40] *** Joins: lahwran (lahwran@lahwran.net)
[22:52:41] -rusti- ~[2, 2, 2, 2, 3]
[22:52:58] <eddyb> arrrrrrrrr: ^^ I've made it worse!
[22:53:03] *** Joins: MrByte (Dartakio@moz-81792842.chy-wy.client.bresnan.net)
[22:53:30] *** Joins: AvianFlu (AvianFlu@moz-723527FF.nycmny.fios.verizon.net)
[22:54:22] <arrrrrrrrr> eddyb: Well done, but I still think that a C style for loop would be nice :)
[22:54:28] *** Joins: AvianFlu_ (AvianFlu@moz-723527FF.nycmny.fios.verizon.net)
[22:54:34] <eddyb> I don't think we have everything we need to actually make it pretty
[22:54:53] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[22:54:53] *** ChanServ sets mode: +ao brson brson
[22:55:08] <eddyb> as in, we shouldn't need closures for this
[22:55:11] *** Quits: AvianFlu (AvianFlu@moz-723527FF.nycmny.fios.verizon.net) (Ping timeout)
[22:55:11] *** Quits: Capt_Redbeard (Capt_Redbe@moz-4998C3D0.ok.ok.cox.net) (Quit: Textual IRC Client: www.textualapp.com)
[22:55:26] *** Joins: Rusky1 (russell@moz-173BA32C.slkc.qwest.net)
[22:55:26] *** Quits: Rusky (russell@moz-173BA32C.slkc.qwest.net) (Connection reset by peer)
[22:55:43] <eddyb> scan is cool, but you can't do much with it
[22:56:28] *** Joins: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net)
[22:56:33] <eddyb> arrrrrrrrr: a sieve with a prime iterator would be helpful IMO
[22:57:06] *** Quits: Rusky1 (russell@moz-173BA32C.slkc.qwest.net) (Ping timeout)
[22:57:09] *** Quits: AvianFlu_ (AvianFlu@moz-723527FF.nycmny.fios.verizon.net) (Quit: Leaving...)
[22:57:16] *** Quits: eholk (eholk@moz-BA312F07.crest.iu.edu) (Quit: eholk)
[22:57:29] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[22:57:39] *** Joins: AvianFlu (AvianFlu@moz-723527FF.nycmny.fios.verizon.net)
[22:57:47] *** Quits: AvianFlu (AvianFlu@moz-723527FF.nycmny.fios.verizon.net) (Quit: Leaving...)
[22:58:13] *** Quits: marianoguerra (marianogue@moz-1A3239B2.dip0.t-ipconnect.de) (Ping timeout)
[22:58:18] *** Quits: eddyb (eddy@moz-41DB10DA.residential.rdsnet.ro) (Ping timeout)
[22:58:23] <adwhit> How do you implement Show on an enum? I assumed you use "match self" but it doesn't seem to work?
[22:58:45] <Eridius> adwhit: self is &self, so match *self
[22:58:59] <Eridius> if your enum variants contain other values, you may need to match them with `ref` to avoid moving
[22:59:10] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[22:59:12] *** Quits: mawuli (mawuli@moz-A89BBCE.com.gh) (Connection reset by peer)
[23:00:10] *** Quits: chenyang (user@moz-451CCEAC.airbears2.berkeley.edu) (Ping timeout)
[23:00:46] <adwhit> Eridius: OK, they do
[23:01:07] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[23:01:41] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[23:01:43] <adwhit> i was doing a match to return a string s, then calling write!(f.buf, s) - but it errors saying "format argument must be a string literal"
[23:02:34] <Eridius> adwhit: yes, you'd need something like write!(f.buf, "{}", s)
[23:02:51] *** Joins: agarie (agarie@66BA9D2D.647CFD0A.946930A0.IP)
[23:03:27] *** Joins: victorporof (victorporo@moz-FFB76956.cpe.net.cable.rogers.com)
[23:03:42] <Eridius> rusti: use std::fmt; enum Foo { A, B(int), C(~str) } impl fmt::Show for Foo { fn fmt(&self, f: &mut fmt::Formatter) -> fmt::Result { match *self { A => f.pad("A"), B(x) => write!(f.buf, "B({})", x), C(ref s) => write!(f.buf, "C({})", *s) } } println!("A: {}, B: {}, C: {}", A, B(42), C(~"test"));
[23:03:45] -rusti- pastebinned 7 lines of output: http://ix.io/au1
[23:03:46] *** Joins: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca)
[23:04:10] <Eridius> rusti: use std::fmt; enum Foo { A, B(int), C(~str) } impl fmt::Show for Foo { fn fmt(&self, f: &mut fmt::Formatter) -> fmt::Result { match *self { A => f.pad("A"), B(x) => write!(f.buf, "B({})", x), C(ref s) => write!(f.buf, "C({})", *s) } } } println!("A: {}, B: {}, C: {}", A, B(42), C(~"test"));
[23:04:12] -rusti- pastebinned 8 lines of output: http://ix.io/aLG
[23:04:20] *** Joins: piterparker (piterparke@moz-B4D16F34.skybroadband.com)
[23:04:36] *** Quits: sellout (Adium@moz-D50C2457.hfc.comcastbusiness.net) (Quit: Leaving.)
[23:04:37] <Eridius> o_O it can't find fmt?
[23:04:51] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[23:05:23] <sfackler> rusti is a bit old. It's probably still called Default
[23:05:46] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[23:05:57] <piterparker> Hello there. I started to play with rust, pointers especially. Is there a way to change function argument value not by returning new value (just like reference in c++)?
[23:06:17] <piterparker> I have no idea how to make it works.
[23:06:26] <strcat> piterparker: rust only has regular types/values
[23:06:29] <strcat> you can use an &mut T
[23:06:35] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[23:06:48] <strcat> but a mutable reference is rust is a plain old first class value
[23:06:51] <strcat> in rust*
[23:07:13] <piterparker> strcat: like: fn change(mut x : &int)
[23:07:18] <piterparker> or other syntax
[23:07:19] <kmc> no, x: &mut int
[23:07:28] <strcat> no need for the variable to be mutable unless you want to make it point at something else
[23:07:35] <strcat> rusti: fn foo(x: &mut int) { *x = 5; }
[23:07:37] -rusti- pastebinned 10 lines of output: http://ix.io/adr
[23:07:41] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[23:07:44] <kmc> "mut x : &int" means that the function is allowed to reassign the reference variable x itself, but not to write to the thing it refers to
[23:07:52] <kmc> in C++ you can't do the former at all
[23:08:01] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[23:08:08] <kmc> but in Rust references are first-class types (albeit with some auto-ref and auto-deref sugar)
[23:08:50] <kmc> when I first learned Rust I thought it was so weird that the sugar for (*x).y is x.y rather than x->y but now i hardly think about it
[23:10:27] <strcat> C++ refs are really weird ;s
[23:10:56] <sp3d> ^
[23:11:01] <strcat> boost::optional has a special case for them to make optional refs work... I never understood the point
[23:12:15] <rustguest> what does the error mean: cannot move out of dereference of & pointer
[23:12:16] <rustguest> ?
[23:12:17] <adwhit> have the linking rules changed in the last few days? I just grabbed the latest rust-nightly and it has broken ncurses-rs
[23:12:30] <rustguest> nvm
[23:12:32] <rustguest> fixed :p
[23:12:47] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[23:13:40] <adwhit> suddenly the build throws loads of undefined references
[23:14:16] *** Quits: c-a (c-a@moz-DBDF8C81.cust.bluewin.ch) (Ping timeout)
[23:16:06] <kmc> rustguest: you can't move out of a reference because you are just borrowing a reference to that value; you don't own it
[23:16:28] <kmc> strcat: boost also has templates just for wrapping references to make them less weird
[23:16:48] *** Quits: TimAbraldes (quassel@125EF623.B2666F0E.66399531.IP) (Input/output error)
[23:17:13] <kmc> boost has everything, from "this is essential, why isn't it in the stdlib" to "what, no, why"
[23:17:35] *** Joins: fyolnish (fyolnish@5E7C820E.3B5C4E68.8646540C.IP)
[23:18:25] <strcat> kmc: boost is basically the stdlib :P, after they added so much boost stuff directly to C++11 but left out essential parts
[23:18:33] *** Quits: arrrrrrrrr (arrrrrrrrr@moz-ED80CA0A.dynamic.qsc.de) (Quit: arrrrrrrrr)
[23:18:34] <strcat> they added regexp but without unicode support, etc.
[23:19:03] <mcpherrin> is it not regexps over bytes?
[23:19:13] *** Quits: glaebhoerl_ (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Quit: )
[23:19:16] *** Quits: fyolnish (fyolnish@5E7C820E.3B5C4E68.8646540C.IP) (Ping timeout)
[23:19:19] <mcpherrin> seems like you could make that work over whatever encoding you want
[23:19:30] <kmc> it's gross though ;P
[23:19:42] <mcpherrin> C++ is gross though, so it's okay
[23:19:42] <strcat> mcpherrin: they don't have unicode \w+, etc.
[23:19:55] <mcpherrin> strcat: oh, I suppose if you want those, that is a pain
[23:19:58] <strcat> boost does, and they added it verbatim otherwise
[23:20:18] <strcat> they left out a lot of features like that, it's just too hard to standardize it all
[23:20:28] <strcat> since then you can never change it again
[23:20:29] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[23:20:59] <mcpherrin> I'm glad I never have to deal with unicode at work :P
[23:21:09] <mcpherrin> programming is hard :-)
[23:21:17] <iopq> o11c: your C++ fizzbuzz has a bug in it, the output is not correct
[23:22:53] <iopq> no wait I was confused by starting from 0, never mind
[23:23:28] *** Joins: fyolnish (fyolnish@5E7C820E.3B5C4E68.8646540C.IP)
[23:23:36] <rustguest> given a path, is it possible to get the size of a file?
[23:23:41] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[23:23:43] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[23:24:08] *** Joins: a_m0d (a_m0d@moz-B069EE89.acanac.net)
[23:24:10] *** Joins: mauricioc (mauricioc@moz-3A63F597.impa.br)
[23:24:14] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[23:24:53] *** Quits: drbawb (drbawb@moz-444F91EA.wi.res.rr.com) (Ping timeout)
[23:25:04] *** Quits: marc_ (uid5324@moz-31ABA2C0.irccloud.com) (Quit: Connection closed for inactivity)
[23:25:10] *** Quits: fyolnish (fyolnish@5E7C820E.3B5C4E68.8646540C.IP) (Ping timeout)
[23:26:14] <kmc> rustguest: on UNIX you can use std::libc::stat
[23:26:18] <kmc> I don't know if we have a portable function for it
[23:26:30] <kmc> or a nicer wrapper
[23:26:31] <mcpherrin> rustguest: pub fn stat(path: &Path) -> FileStat, which has size
[23:26:36] <rustguest> k thanks
[23:26:36] *** Quits: lkuper (lkuper@moz-AD4C50F5.dhcp-bl.indiana.edu) (Ping timeout)
[23:26:39] <kmc> ok
[23:26:44] <mcpherrin> that is std::io::fs::stat
[23:27:42] *** Joins: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP)
[23:28:14] <o11c> iopq: ah, it's usually (0. 100] not [0, 100) in the problem, isn't it ...
[23:29:09] <iopq> yeah that's why I thought the output was strange
[23:29:28] <iopq> still don't understand C++ lol
[23:29:30] *** Quits: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP) (Ping timeout)
[23:31:40] <iopq> I don't understand what the constants 0 and 1 are for
[23:32:00] *** Quits: JanC_ (janc@moz-828D3CC6.dsl.scarlet.be) (Ping timeout)
[23:32:27] *** Quits: cschneid (cschneid@moz-CA025D57.ip.mcleodusa.net) (Client exited)
[23:33:03] <o11c> iopq: fixed
[23:33:29] <o11c> iopq: where's the constant 1 ?
[23:33:38] *** Joins: seanp33 (Adium@moz-B0398B82.hsd1.md.comcast.net)
[23:33:39] <o11c> iopq: 0 is the initial value that is passed into accumulate
[23:33:42] <iopq> std::cout << p.str, 1
[23:33:51] <o11c> ah, to make the expression truish
[23:33:57] <iopq> i % p.mod ? 0
[23:34:16] <o11c> to make the expression falsish
[23:34:21] *** Quits: nszceta (hax@moz-E458A7C0.pharm.pitt.edu) (Input/output error)
[23:34:28] <o11c> (ah, the *other* 0 you meant ...)
[23:35:09] <o11c> in, say, python, it is *almost* equivalent to any(i % m for m in [3, 5, 7, 11])
[23:35:15] <o11c> except that any short-circuits
[23:35:31] <o11c> and fizzbuzz requires that we *don't* short-circuit
[23:36:46] *** Quits: io2 (io2@moz-EE406A5.home.otenet.gr) (Quit: )
[23:37:22] * kmc . o O ( http://www.adampetersen.se/articles/fizzbuzz.htm )
[23:38:03] <mcpherrin> The problem with fizzbuzz is that it's too common, I think.  Gotta come up with your own equivalent
[23:38:04] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[23:38:04] *** ChanServ sets mode: +ao brson brson
[23:38:49] <mcpherrin> but metaprogramming, I lik eit.
[23:39:29] <mcpherrin> kmc: you should implement fizzbuzz in Rust error messages ;)
[23:39:48] <iopq> compilation is premature optimization
[23:39:50] <o11c> mcpherrin: it's not intended screening serious people. It's for the totally oblivious ones
[23:39:54] *** Quits: jmgrosen_ (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen_)
[23:39:55] *** Quits: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[23:40:01] *** Joins: guitsaru (uid26318@moz-31ABA2C0.irccloud.com)
[23:40:30] <mcpherrin> o11c: but oblivious people can memorize a fizzbuzz implementation, right?  Or you're saying that's too much to expect of a bad candidate?
[23:40:55] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[23:42:04] <o11c> mcpherrin: possibly *some* might be able to memorize it, but not *all*, and that's the point
[23:42:14] <nrc> I've never seen the point of fizzbuzz as a screening question - I don't care if someone is incompetent or barely competent, I care if they are great or not. So ask a hard question, straight off and skip the fizzbuzz ones
[23:42:19] <tjc> I don't think an oblivious person could memorize it *and* answer questions about it
[23:42:42] <iopq> I hate interview coding, it takes me 15 minutes to just get in the zone
[23:42:43] <o11c> nrc: right, but that means you're asking hard questions to a LOT of idiots
[23:43:00] <o11c> I have an interview in a week, I'm not nervous at all
[23:43:13] <iopq> and then they're like "oh it took you like half an hour for this, that's too slow"
[23:43:20] *** Joins: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net)
[23:43:24] <o11c> (ask me again 6 days from now)
[23:43:33] <mcpherrin> o11c: I had a friend once get FizzBuzz as a *take-home assignment*
[23:43:39] <nrc> o11c: but that doesn't seem any worse than asking an easy question to lots of idiots
[23:43:41] *** Quits: k4nar (quassel@moz-EE8DAF45.ip-91-121-75.eu) (Connection reset by peer)
[23:44:02] <mcpherrin> o11c: which I guess makes sense if it's just a preliminary filter
[23:44:32] <nrc> I guess if it is a filter that HR can do rather than an engineer, it is worthwhile
[23:44:53] <iopq> and then they won't understand what o11c wrote
[23:45:15] <iopq> "hmm this doesn't look like if else probably doesn't work"
[23:45:18] <huon> mcpherrin: did they pass? :P
[23:46:00] *** Joins: ryeguy (ryeguy@9C569A0.5D1143CD.E8644521.IP)
[23:46:07] *** Joins: Krymise (Nietzsche@moz-CA789EF5.nwrknj.fios.verizon.net)
[23:46:46] <iopq> also, HR shouldn't make any hiring decisions
[23:46:47] *** Joins: JanC_ (janc@moz-E665F87F.dsl.scarlet.be)
[23:46:47] *** Joins: bmu (chatzilla@moz-A87574A6.hsd1.pa.comcast.net)
[23:47:45] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Input/output error)
[23:47:49] <mcpherrin> huon: you know, I don't actually know.
[23:47:57] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[23:48:09] <o11c> iopq: that ... suddenly makes me understand everything about the industry
[23:48:57] <mcpherrin> I really want a Tshirt with code to reverse a linked list on it.
[23:49:01] <mcpherrin> To wear to interviews.
[23:49:35] <adwhit> ok could I ask for help please - here: https://gist.github.com/adwhit/9241292
[23:49:49] *** Quits: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net) (Ping timeout)
[23:50:13] *** nrc is now known as nrc|afk
[23:50:25] <adwhit> why does that snippet fail when I pass (0,0)?
[23:50:25] *** Joins: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net)
[23:50:43] <iopq> mcpherrin so the T-shirt would say reverse' xs = last xs : reverse' (init xs)
[23:50:54] *** Quits: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net) (Quit: Leaving)
[23:51:08] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[23:51:31] <huon> adwhit: i.e. it takes the last branch?
[23:52:27] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Input/output error)
[23:52:37] <adwhit> yeah, don't understand why it falls through (0..15,0b00)
[23:52:43] *** Joins: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net)
[23:52:51] *** Joins: alonlevy (alon@2CD54432.57968636.E9C721AF.IP)
[23:53:10] <adwhit> huon: (ps thanks for the code review on HN, it was you right?)
[23:53:22] <kimundi> wait, integer ranges nested in other patterns work?
[23:53:45] <mcpherrin> iopq: I was thinking in C :-)
[23:53:51] <huon> adwhit: yep :)
[23:53:58] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[23:53:59] <mcpherrin> iopq: Also won't that be n^2 ew
[23:54:05] <huon> kimundi: it looks like they might not
[23:54:09] <kimundi> rusti: match (0u, 0u) {(0..15,0) => true, _=> false}
[23:54:11] -rusti- true
[23:54:22] <kimundi> rusti: match (0, 0) {(0..15,0) => true, _=> false}
[23:54:23] -rusti- true
[23:54:30] <kimundi> rusti: match (16, 0) {(0..15,0) => true, _=> false}
[23:54:32] <iopq> yes, it's n^2
[23:54:32] <huon> adwhit: can you just delete some of the other arms to see if they're interfering
[23:54:32] -rusti- false
[23:54:37] *** Joins: lawrence (lawrence@26136266.60379805.59660190.IP)
[23:54:44] <huon> (don't care which ones, just try something
[23:55:02] *** Quits: skade (skade@FD6D9E76.8BA743A6.6B74C29D.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[23:55:03] <huon> )
[23:55:18] *** Joins: ktt3ja (ktt3ja@moz-85E2770C.hsd1.va.comcast.net)
[23:55:32] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[23:56:48] <adwhit> huon: no so easy, let me try
[23:57:04] *** Joins: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP)
[23:57:38] *** Quits: Armavica (virgile@moz-AD428ED7.ens.fr) (Quit: leaving)
[23:58:14] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[23:59:55] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
