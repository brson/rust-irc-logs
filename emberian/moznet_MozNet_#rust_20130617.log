[00:01:22] <brson> Thiez: I have to go right now, but I left a comment there. As far as I know the handling of stacks that made threadring OOM has not been fixed.
[00:01:41] *** Quits: brson (brson@2557E599.66715431.D25A875A.IP) (Client exited)
[00:02:48] *** Joins: KindOne (KindOne@moz-76C32FAF.dynamic.ip.windstream.net)
[00:03:39] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Client exited)
[00:04:59] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Quit: Leaving.)
[00:08:07] <Thiez> gah, brson was right :(
[00:10:37] <bjz> Jeaye: hmm, interesting
[00:13:46] *** Quits: koomi (koomi@moz-9AE5526E.pools.arcor-ip.net) (Ping timeout)
[00:16:51] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[00:16:59] <steven_is_false1> With the new changes I'm getting a crash http://pastebin.mozilla.org/2533043
[00:17:58] <steven_is_false1> The code I'm failing to compile is at my gitorious repo.
[00:19:22] *** Quits: ysuzuki (ysuzuki@moz-285468F7.net219126120.t-com.ne.jp) (Client exited)
[00:20:05] <Aetherspawn_BNC> can something be done with the llvm expect instrinsic
[00:21:29] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[00:23:01] <cmr> Aetherspawn_BNC: where do you see it being used?
[00:23:45] <Aetherspawn_BNC> well, consider usage of error!
[00:24:15] <Aetherspawn_BNC> it can be expected that errors are as a result of an error, and therefore it may be beneficial to mark codepaths that throw errors as uncommon so the optimizer can make the branches run through transparently
[00:24:29] <cmr> that isn't what llvm.expect does
[00:24:47] <cmr> or actually maybe it is and these docs are bad
[00:25:18] <cmr> http://llvm.org/docs/LangRef.html#llvm-expect-intrinsic seems to indicate it's not about branches, but the source (http://llvm.org/docs/doxygen/html/LowerExpectIntrinsic_8cpp_source.html) does
[00:25:39] *** Quits: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com) (Input/output error)
[00:25:48] <aatch> Aetherspawn_BNC, expect isn't particularly useful. Even GCC says that it should only be used rarely.
[00:25:56] *** Quits: jrfeenst (jrfeenst@moz-F912484F.cpe.norwoodlight.com) (Quit: jrfeenst)
[00:26:01] <aatch> 99.9% of the time it doesn't do anything.
[00:26:11] <Aetherspawn_BNC> indeed, sorry.
[00:26:24] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Textual IRC Client: www.textualapp.com)
[00:26:46] <aatch> There is a limit to how much you can optimize a branch without invalidating the code.
[00:27:39] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[00:28:53] <aatch> steven_is_false1, hmm, interesting.
[00:29:54] <aatch> what's the output when you compile with RUST_LOG=rustc::middle::trans::callee ?
[00:30:44] *** Joins: jrfeenst (jrfeenst@moz-F912484F.cpe.norwoodlight.com)
[00:30:59] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[00:31:03] <steven_is_false1> aatch: That's a lot.
[00:31:08] *** Quits: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP) (Ping timeout)
[00:31:20] <cmr> Aetherspawn_BNC: I can't even see where the branch weights are actually used during codegen, I may just not be familiar enough with the code to know what to grep for
[00:31:20] <steven_is_false1> Five seconds
[00:31:22] <aatch> steven_is_false1, really? damnit
[00:32:05] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[00:33:29] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[00:35:37] <steven_is_false1> aatch: What information is being logged by that?
[00:35:53] <aatch> Just general debugging output for that module.
[00:36:09] <aatch> Hopefully it will give some insight into what's going on.
[00:36:13] <steven_is_false1> Okay
[00:36:37] <steven_is_false1> Okay: http://pastebin.mozilla.org/2533095
[00:36:50] <Aetherspawn_BNC> cmr: I'm pretty sure llvm moves common branches to the start of the module since processors nowadays assume a backwards jump is more likely and their branch prediction works like that
[00:37:11] <aatch> Aetherspawn_BNC, but it does that already.
[00:38:11] *** Quits: mleise (marco@moz-3468AB5B.pools.arcor-ip.net) (Ping timeout)
[00:38:17] *** Joins: ysuzuki (ysuzuki@moz-3830D141.st.keio.ac.jp)
[00:39:28] *** Quits: ysuzuki (ysuzuki@moz-3830D141.st.keio.ac.jp) (Connection reset by peer)
[00:40:07] <mark_edward> how would you make trait inheritance work like in this example?
[00:40:08] <mark_edward> https://github.com/mozilla/rust/issues/2616#issuecomment-10044333
[00:40:23] <Aetherspawn_BNC> aatch: how does it decide on weighting?
[00:42:14] *** Quits: Pengoo (Jackson@moz-30109EF1.vf.shawcable.net) (Input/output error)
[00:43:28] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[00:45:16] <mark_edward> can anyone help me :-(
[00:45:46] <Aetherspawn_BNC> Dont ask to ask, just ask
[00:45:53] *** Joins: Pengoo (Jackson@moz-30109EF1.vf.shawcable.net)
[00:46:15] <aatch> mark_edward, that's old syntax, what build of rust are you on?
[00:46:24] <mark_edward> built it today
[00:46:29] <mark_edward> what's the new syntax?
[00:46:42] *** Parts: steven_is_false1 (steven@moz-144077DE.bchsia.telus.net) ()
[00:46:56] <aatch> impl Trait for Concrete { ... }
[00:47:25] <mark_edward> but how would you do the composition/inheritance stuff?
[00:47:34] *** Joins: vk (chatzilla@F92596F.2DEF7520.EF7679FA.IP)
[00:47:45] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Quit: Leaving.)
[00:47:47] <mark_edward> and they have a use of self that relies on self having the functions of the composed-with trait
[00:47:54] <aatch> mark_edward, what do /you/ have?
[00:48:06] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[00:48:16] <aatch> That issue is pretty old, so I don't know what problem you're having.
[00:48:20] <mark_edward> actually i want the exact equivalent of that
[00:48:56] <mark_edward> http://pastebin.com/q26cRaPv
[00:49:10] <mark_edward> i have this and it says `self not allowed in this context`
[00:49:19] <mark_edward> in the Movable trait
[00:49:53] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Ping timeout)
[00:50:05] <aatch> mark_edward, translate is a static method there.
[00:50:23] <aatch> so you need a self parameter in translate
[00:50:54] <aatch> fn translate(&mut self, dx: int, dy: int)
[00:51:07] <aatch> same with all the other methods there, you need to have an explicit self.
[00:51:09] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[00:51:09] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1486f4b05 to 14a4cc34f: 02http://git.io/N3iJvQ
[00:51:09] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[00:51:15] *** Joins: ghrust (ghrust@C621748.6A2AE50.F3114085.IP)
[00:51:15] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/y_ea0w
[00:51:15] <ghrust> 13rust/06auto 145de67f9 15Steven Stewart-Gallus: Cleaned up driver.rs
[00:51:15] <ghrust> 13rust/06auto 14f22580d 15Steven Stewart-Gallus: Fix up mingw32 case
[00:51:15] <ghrust> 13rust/06auto 143495737 15bors: auto merge of #7157 : sstewartgallus/rust/master, r=brson...
[00:51:17] *** Parts: ghrust (ghrust@C621748.6A2AE50.F3114085.IP) ()
[00:51:26] <aatch> Hence why I said that issue is old and the syntax is obsolete.
[00:51:46] <aatch> you just /happened/ to write something that still parses.
[00:51:55] <mark_edward> oh ok
[00:52:19] <mark_edward> #[deriving(ToStr,Eq)]
[00:52:19] <mark_edward> pub enum Attack {
[00:52:19] <mark_edward>     Main,
[00:52:19] <mark_edward>     Power
[00:52:19] <mark_edward> }
[00:52:19] <mark_edward> pub trait Positioned {
[00:52:21] <mark_edward>     fn X()-> int;
[00:52:23] <mark_edward>     fn Y()-> int;
[00:52:25] <mark_edward>     fn SetX(&mut self, int);
[00:52:28] <mark_edward>     fn SetY(&mut self, int);
[00:52:30] <mark_edward> }
[00:52:32] <mark_edward> pub trait Movable: Positioned {
[00:52:34] <mark_edward>     fn translate(&mut self, dx: int, dy: int) {
[00:52:36] <mark_edward>         self.SetX(self.X() + dx);
[00:52:39] <mark_edward>         self.SetY(self.Y() + dy);
[00:52:41] <mark_edward>     }
[00:52:43] <mark_edward> }
[00:52:45] <mark_edward> oops sorry!
[00:52:47] <mark_edward> http://pastebin.com/jV4B7KHt
[00:53:07] <mark_edward> but now it's saying `type &mut Self does not implement any method in scope named "Y"/"X"`
[00:53:10] <aatch> mark_edward, you need explicit self on X() and Y()
[00:53:36] *** Quits: Boreeas (Boreeas@moz-F35C832D.boreeas.net) (Ping timeout)
[00:53:42] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[00:53:54] *** Joins: sam113101 (sam113101@moz-83612DFD.us-west-2.compute.amazonaws.com)
[00:54:11] <mark_edward> `self.SetX(self.X(self) + dx);`?
[00:54:38] <aatch> mark_edward, no, in the declaration
[00:54:45] *** Quits: alexrp (zor@moz-180BED6.rfw.name) (Ping timeout)
[00:54:45] <aatch> methods have explicit self.
[00:54:47] <aatch> always.
[00:54:53] <mark_edward> oh got you!
[00:54:58] <aatch> so you want X(&self) -> int
[00:55:13] *** Quits: benh (ben@moz-4A0366D2.org) (Ping timeout)
[00:55:26] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[00:55:33] <mark_edward> oh okay
[00:55:41] <mark_edward> uhh... new error 
[00:55:44] <mark_edward> "error: internal compiler error: Loan path LpVar(356) maps to None, not local"
[00:56:22] <Aetherspawn_BNC> What actually depends on mingw for windows
[00:56:54] <Aetherspawn_BNC> It'd be nice if ms compiler could be used so we can break out of msys and get proper 64 bit builds. mingw-64 is broken every other day.
[00:57:33] <Aetherspawn_BNC> In fact, if there are no msys exe dependencies and its just a matter of making it build I'll take up the project myself.
[00:57:34] *** Joins: ysuzuki (ysuzuki@moz-3830D141.st.keio.ac.jp)
[00:58:06] *** Joins: alexrp (zor@moz-180BED6.rfw.name)
[00:58:34] *** Joins: benh (ben@moz-4A0366D2.org)
[00:58:39] <Luqman> mark_edward: the default methods stuff still needs some work
[00:58:56] <mark_edward> ok cool, i'll just avoid that then
[00:59:20] *** Joins: Boreeas (Boreeas@moz-F35C832D.boreeas.net)
[01:00:19] <Luqman> mark_edward: so this works https://gist.github.com/luqmana/5794062
[01:00:35] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[01:01:05] <erickt> kimundi: pong
[01:01:15] <mark_edward> Luqman: thanks!
[01:02:01] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[01:02:13] *** Quits: alexrp (zor@moz-180BED6.rfw.name) (Ping timeout)
[01:02:21] *** Quits: ysuzuki (ysuzuki@moz-3830D141.st.keio.ac.jp) (Connection reset by peer)
[01:02:27] *** Joins: ysuzuki (ysuzuki@moz-3830D141.st.keio.ac.jp)
[01:03:01] *** Joins: dbaupp (Thunderbir@moz-73E90475.lns20.syd6.internode.on.net)
[01:03:36] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[01:04:46] *** Quits: sam (sam@moz-ADDDDFB1.mc.videotron.ca) (Quit: WeeChat 0.4.0)
[01:05:06] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[01:05:30] *** Joins: alexrp (zor@moz-180BED6.rfw.name)
[01:07:41] <bjz> Jeaye: I'm currently asking on #glfw about those link args
[01:07:43] *** Joins: brson (brson@2557E599.66715431.D25A875A.IP)
[01:07:43] *** ChanServ sets mode: +o brson
[01:08:28] <bjz> Jeaye: did you have a chance to look at those callbacks?
[01:09:56] <sam113101> test
[01:11:01] <mark_edward> rusti: for [1,2,3].each |&n| { println(n.to_str()) }
[01:11:03] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/cZSG
[01:11:39] <mark_edward> rusti: for [1,2,3].each |&n: &int| { println(n.to_str()) }
[01:11:40] -rusti- 1
[01:11:41] -rusti- 2
[01:11:41] -rusti- 3
[01:11:41] -rusti- ()
[01:14:33] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[01:15:31] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[01:16:37] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[01:19:28] *** Joins: MaikKlein (maik@moz-85462C98.dip0.t-ipconnect.de)
[01:20:08] *** Joins: mreedell (mreedell@moz-9950CA28.hsd1.pa.comcast.net)
[01:20:55] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[01:21:56] <mcstar> strcat: so you are strcat here :)
[01:21:57] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[01:23:10] <strcat> mcstar: \o
[01:23:20] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Quit: Leaving.)
[01:26:33] <MaikKlein> omg I need to visit portland asap "Rust: A Friendly Introduction (+ free pizza and beer)"
[01:26:55] *** Quits: sam113101 (sam113101@moz-83612DFD.us-west-2.compute.amazonaws.com) (Quit: ZNC - http://znc.in)
[01:27:06] <aatch> MaikKlein, Free Beer!
[01:27:25] *** Joins: sam113101 (sam113101@moz-83612DFD.us-west-2.compute.amazonaws.com)
[01:28:17] <bjz> nmatsakis: what is preventing us from being able to parameterise over constants? will it be something that can be added in the future?
[01:28:27] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Ping timeout)
[01:28:37] <bjz> ie. in parameter lists
[01:28:49] <bjz> it would be super helpful
[01:29:22] <MaikKlein> rust + pizza + beer, what else could I possibly want :D
[01:31:03] <nmatsakis> bjz: e.g., struct SmallVector<size:int, T> { v: [T, ..size] }?
[01:31:09] <bjz> like, trait Dimensional<T,N:uint> { pub fn map<U,UD: Dimensional<U,N>(&self, f: fn(&T) -> U) -> [U,..N]; }
[01:31:19] *** Quits: mcstar (mcstar@moz-D7A16997.monradsl.monornet.hu) (Ping timeout)
[01:31:36] <bjz> yeah
[01:31:38] <nmatsakis> sure. I don't suppose there is anything *preventing* that
[01:31:46] <nmatsakis> except that we've never thought about it 
[01:31:53] <nmatsakis> by which I mean,
[01:32:00] <nmatsakis> haven't tried to figure out what's preventing it
[01:32:06] * dbaupp thinks that would make fixed sized vectors act more sensibly
[01:32:07] <bjz> it's something I've definitely been running up against
[01:32:14] <nmatsakis> not that it never occurred to us as a possibly nice thing to do
[01:32:28] <nmatsakis> I think there is some general fear of entering C++ "Turing Complete" land
[01:32:32] <nmatsakis> I think we're probably already there, though,
[01:32:34] <bjz> of course, you have the whole '<' issue for boolean constexprs
[01:32:58] <nmatsakis> or at least it's hard to say if trait matching will terminate (or it will be once we do it properly)
[01:33:09] <bjz> but you could make it so you have to put those in parens (..) ?
[01:33:20] <bjz> nmatsakis: yeah
[01:33:36] <nmatsakis> not to mention monomorphization expansion
[01:33:55] <nmatsakis> truth is, I am not bothered by this at all. Just check the recursion depth and bailout. Seems fine.
[01:35:04] <bjz> nmatsakis: it would greatly add to the expressiveness of parametric polymorphism, but the concerns are valid
[01:35:08] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[01:35:19] <dbaupp> fwiw, at least being able to parameterise the n in [T, .. n] would make things less surprising, e.g. https://github.com/mozilla/rust/issues/6883
[01:35:47] <nmatsakis> bjz: anyway, I think it'd be a nice feature, but I doubt it will arrive super quickly. I know pcwalton has mentioned some ideas about using "integer constant types", I don't really see the point yet myself, seems like if we're going to support parameterizing over a constant we might as well just do that.
[01:35:53] <nmatsakis> but maybe I'm missing something.
[01:36:09] <bjz> nmatsakis: I was actually wondering about associated items, whether I could abuse them into performing compile time computation x)
[01:36:12] <nmatsakis> as I said, I haven't thought about it too hard yet because I think there are still more pressing problems
[01:36:27] <bjz> nmatsakis: yeah, as always
[01:37:09] <bjz> nmatsakis: for now I'm having to use macros. But it definitely limits the expressiveness of traits
[01:38:14] <MaikKlein> btw are macros intended to be used extensively?
[01:38:16] <bjz> nmatsakis: ie. you can't use macrofied type impls generically
[01:38:22] *** Quits: ysuzuki (ysuzuki@moz-3830D141.st.keio.ac.jp) (Client exited)
[01:38:52] <strcat> MaikKlein: not as a form of poor man's "generics"
[01:39:08] <bjz> strcat: which is what I'm using them for atm :P
[01:39:10] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[01:39:10] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/y_ea0w
[01:39:10] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[01:40:26] <aatch> macros are intended for repetitive code that can't be easily done using functions.
[01:40:38] <MaikKlein> for example?
[01:41:08] <brson> nmatsakis: both Isolate and Share bounds seem to require an unsafe mechanism to opt-in (to make shared types like Arc work), unlike all other kinds. True?
[01:41:13] <MaikKlein> okay probably the fmt!
[01:41:51] <bjz> rusti: trait A { pub print(&self); } impl A for [uint,..2] { fn print(&self) { println(fmt!("%?", *self)) } } impl A for [uint,..4] { fn print(&self) { println(fmt!("%?", *self)) } } [1u, 2u, 3u, 4u].print()
[01:41:53] -rusti- line longer than 150 columns, pastebinned: http://sprunge.us/VOEj
[01:41:59] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[01:42:09] *** Joins: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP)
[01:42:09] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/a-2AGg
[01:42:09] *** Parts: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP) ()
[01:42:13] <aatch> MaikKlein, here: https://github.com/Aatch/rust/blob/803d541929a334be444a9b1676d341130e8bf3e5/src/librustc/middle/trans/base.rs#L2509
[01:42:23] <nmatsakis> brson: false?
[01:42:48] <nmatsakis> brson: I think Arc would be considered safe because the compiler doesn't know any better,
[01:42:50] <bjz> rusti: trait A { pub print(&self); } impl A for [uint,..2] { pub fn print(&self) { println(fmt!("%?", *self)); } } impl A for [uint,..4] { pub fn print(&self) { println(fmt!("%?", *self)); } } [1u, 2u, 3u, 4u].print()
[01:42:52] -rusti- line longer than 150 columns, pastebinned: http://sprunge.us/DWhe
[01:42:58] <dbaupp> rusti: trait A { fn print(&self); } impl A for [uint,..2] { fn print(&self) { println(fmt!("%?", *self)) } } impl A for [uint,..4] { fn print(&self) { println(fmt!("%?", *self)) } } [1u, 2u, 3u, 4u].print()
[01:42:58] <nmatsakis> brson: but types like cell etc that are marked "mutable" would be opted out by compiler,
[01:42:59] -rusti- [1, 2, 3, 4]
[01:42:59] -rusti- ()
[01:43:15] <nmatsakis> brson: though tbh I wonder if it'd be better to just reintroduce mut fields than to keep that semi-kludgy scheme.
[01:43:19] *** Quits: SingingBoyo (brandon@moz-EAC7E73D.bchsia.telus.net) (Ping timeout)
[01:43:56] <nmatsakis> brson: but anyhow Arc would just look like "struct Arc<T> { priv rc: int, priv value: T }", no?
[01:43:57] *** Joins: SingingBoyo (brandon@moz-EAC7E73D.bchsia.telus.net)
[01:44:10] <bjz> rusti: trait A { fn print(&self); } impl<T> A for [T,..2] { fn print(&self) { println(fmt!("%?", *self)) } } impl<T> A for [T,..4] { fn print(&self) { println(fmt!("%?", *self)) } } [1u, 2u, 3u, 4u].print()
[01:44:11] -rusti- [1, 2, 3, 4]
[01:44:11] -rusti- ()
[01:44:27] <brson> nmatsakis: no, it's more like an unsafe pointer to that
[01:44:36] <brson> but I guess unsafe pointers are assumed to be shareable
[01:44:49] <nmatsakis> brson: right, right. but yes, what you said.
[01:45:00] *** Joins: ysuzuki (ysuzuki@moz-A563888C.ics.keio.ac.jp)
[01:45:21] <MaikKlein> bjz, why did you use macros so often? Because there is no "real" default method yet?
[01:45:59] <bjz> MaikKlein: no default methods, no parameterisation over constants
[01:46:03] <bjz> :(
[01:46:03] *** Quits: mreedell (mreedell@moz-9950CA28.hsd1.pa.comcast.net) (Quit: Textual IRC Client: http://www.textualapp.com/)
[01:46:12] <MaikKlein> :(
[01:46:19] <bjz> I think I butchered it
[01:46:23] <bjz> :(
[01:46:41] <bjz> it's all ugly
[01:46:47] *** Quits: Pengoo (Jackson@moz-30109EF1.vf.shawcable.net) (Quit: KVIrc 4.1.3 Equilibrium http://www.kvirc.net/)
[01:46:48] <bjz> more succinct, but ugly
[01:47:31] <bjz> nmatsakis: one issue I'm having with the operator overloding is the proliferation of RHS trait constraints, whenever you want to use the operators
[01:47:49] <nmatsakis> bjz: those should be completely unnecessary.
[01:48:05] <nmatsakis> bjz: it's just that nobody has gotten around to implementing the trait matching algorithm properly...
[01:48:14] <nmatsakis> bjz: every time I see that blog post of mine cited as an example, I cringe inside :)
[01:48:38] <nmatsakis> bjz: I'm hoping that sully will tackle this during his internship :
[01:48:40] <nmatsakis> :)
[01:48:44] <bjz> nmatsakis: yeah, I don't want to burden users with a RHS trait when they want to make there own generic functions
[01:48:51] <bjz> (using my types)
[01:49:26] *** Joins: steven_is_false1 (steven@moz-144077DE.bchsia.telus.net)
[01:49:57] <bjz> nmatsakis: the other issue is that the user can only take advantage of the RHSs that the lib developer impemented
[01:50:21] <bjz> so they couldn't use a BigInt, for example, if the lib author didn't implement it
[01:50:29] <mark_edward> I'm getting `error: unreachable pattern` when pattern matching on a simple enum, with only 2 variants
[01:50:41] <brson> nmatsakis: so several non-sharable types will opt out of Share and Isolate by virtue of being #[non_send] or #[non_freeze] (#[mutable]). are there any cases where we will explicitly need #[non_share] or #[non_isolate]+
[01:50:44] <mark_edward> the enum value is generated using std::rand::random
[01:50:46] <brson> ?
[01:51:03] <MaikKlein> btw I read now though 40% of rustc and I always saw those "weird" function names like "decl_cdecl_fn". As a reader I never have a clue what the name means. Don't you think it would be better to write them in full length? 
[01:51:25] <aatch> MaikKlein, trans is very old
[01:51:36] <aatch> I'm currently on a mission to modernize it.
[01:51:45] <nmatsakis> brson: well, being non-send or non-freeze doesn't necessarily imply non-share or non-isolate, I guess.
[01:52:01] <MaikKlein> aatch, oh okay
[01:52:11] <bjz> nmatsakis: the other issue is type specialisation. Like, I might implement lerp genrically for T:Real, but I might want to specialise it for T:Float, to take advantage of mul_add (which is faster)
[01:52:19] <MaikKlein> just out of curiosity ty.rs should mean type right?
[01:52:33] <aatch> MaikKlein, correct, but type is a keyword
[01:52:45] *** Joins: tjc (tjc@moz-744AF7EC.tmodns.net)
[01:52:45] *** ChanServ sets mode: +o tjc
[01:52:50] <aatch> so `mod type` is a parse error.
[01:52:54] <nmatsakis> brson: so for example Rc is Freeze but not Share,
[01:53:01] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[01:53:14] <nmatsakis> brson: or maybe not? I don't really know that Freeze has much purpose tbh
[01:53:16] <bjz> nmatsakis: sorry for all the comments, just letting you know the issues I'm having (you probably know them already though)
[01:54:05] <dbaupp> mark_edward: code?
[01:54:26] <mark_edward> http://pastebin.com/5Rn4adZe
[01:54:54] <brson> master is still crashing for me
[01:55:14] <nmatsakis> bjz: well, it's interesting. These are all things we've kind of assumed out of scope,
[01:55:18] <nmatsakis> bjz: but as so often happens,
[01:55:22] <dbaupp> mark_edward: the error is the match on line 48?
[01:55:30] <bjz> nmatsakis: should I maybe write these things down?
[01:55:44] <mark_edward> dbaupp: yEah
[01:55:52] <nmatsakis> bjz: reality sometimes places demands. That is, type specialization for example is tricky to specify and leads to annoying ambiguities,
[01:55:56] <dbaupp> mark_edward: also, what's common.rs look like?
[01:56:00] <nmatsakis> bjz: but then it *is* useful too sometimes :)
[01:56:02] <bjz> nmatsakis: the issue is that as strcat has noted, not many people are using traits as much as they could
[01:56:19] <nmatsakis> brson: what crash do you see?
[01:56:21] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[01:56:29] <mark_edward> dbaupp:  http://pastebin.com/mTjuTxn6
[01:56:29] <bjz> nmatsakis: I worry it's due to some of these expressiveness issues
[01:56:41] <nmatsakis> bjz: certainly writing down a list of the features you'd like and links to the code that would benefit is helpful;
[01:56:44] <Aetherspawn_BNC> MaikKlein: how do you propose "declare cdecl function" be any more readable?
[01:56:53] <bjz> nmatsakis: it's easier just to go the OO route and impl directly on a type
[01:56:57] <Aetherspawn_BNC> without_being_very_long
[01:57:22] <bjz> nmatsakis: which is what I have shifted to doing, due to the limitations I've faced
[01:57:22] <brson> nmatsakis: running check-stage1-std kills canaries
[01:57:31] *** sam113101 is now known as sam113101_afk
[01:57:41] <dbaupp> mark_edward: does the error still happen if you set 'at' to be a fixed thing (i.e. not use random?)
[01:57:52] <brson> nmatsakis: or double frees... some error in memory_region
[01:57:59] *** sam113101_afk is now known as sam113101
[01:58:08] <nmatsakis> brson: hmm ok. I haven't seen that yet.
[01:58:53] <dpc> main.rs:1 extern mod sdl;
[01:59:00] <dpc> any help with this? :/
[01:59:22] <bjz> nmatsakis: and yeah, type specialisation is tricky. no idea how you'd work that out, or if it'd be even possible
[01:59:47] <nmatsakis> bjz: gotta go, bedtime, but this is interesting,
[01:59:52] <bjz> ok
[02:00:28] <MaikKlein> Aetherspawn_BNC, this was maybe not the best example I guess
[02:01:42] <mark_edward> dbaupp: i can't figure out how to.
[02:01:52] <mark_edward> here is the repo, just updated https://github.com/MarkJr94/rust_adventure
[02:02:01] <mark_edward> i can't get access to the enum variants
[02:02:14] <mark_edward> the relevant file is monster/skeleton.rs
[02:02:14] <dbaupp> mark_edward: let at = common::Main;
[02:02:18] <dbaupp> mark_edward: oh, right!
[02:02:38] <dbaupp> mark_edward: the problem is Main and Attack are not in scope, so Main gets treated as a variable name
[02:03:04] <dbaupp> mark_edward: i.e. at gets bound to Main, and the first arm always executes
[02:03:13] *** sam113101 is now known as sam113101_afk
[02:03:49] *** sam113101_afk is now known as sam113101
[02:03:54] <mark_edward> so what do i need to do?
[02:04:11] <dbaupp> err, Main and Power
[02:04:19] <dbaupp> either import them from common
[02:04:28] <dbaupp> or use them qualified
[02:04:47] <mark_edward> but `mod super::common` gives me this error:
[02:04:48] <mark_edward> 1:11 error: expected `{` but found `::`
[02:05:13] <MaikKlein> dbaupp, are you sure? how can Main be in common but Attack is not in common. I am confused
[02:05:33] <MaikKlein> I mean he wrote let a : Attack
[02:05:56] <MaikKlein> shouldn't it then be let a : common::Attack ?
[02:06:20] <dbaupp> mark_edward: you shouldn't need a new mod, just `use common;` (or `use super::common;` if that doesn't work)
[02:06:46] <dbaupp> mark_edward: you can also just add the variants to the use, e.g. `use common::{Attack, Main, Power};`
[02:06:54] <MaikKlein> mark_edward, what was the compile error?
[02:07:05] <lkuper> mark_edward: the `mod` keyword is for when you're creating a new module.  `use` is for importing.
[02:07:10] <dbaupp> MaikKlein: there is `use common::Attack;` but not for Main or Power
[02:07:28] <MaikKlein> dbaupp, ah okay didn't see that
[02:08:26] *** sam113101 is now known as sam113101_afk
[02:08:32] <mark_edward> okay, `use common::{Move,Position,Attack,Main,Power};`
[02:08:37] <mark_edward> seems to have fixed things
[02:09:18] *** sam113101_afk is now known as sam113101
[02:09:39] <mark_edward> so confusing!
[02:09:50] *** Quits: KindOne (KindOne@moz-76C32FAF.dynamic.ip.windstream.net) (Ping timeout)
[02:10:42] *** Joins: kimundi_ (kimundi@moz-77CE41FF.dip0.t-ipconnect.de)
[02:10:57] *** Quits: kimundi (kimundi@moz-24378D0F.dip0.t-ipconnect.de) (Ping timeout)
[02:10:58] *** kimundi_ is now known as kimundi
[02:11:06] *** Quits: Boreeas (Boreeas@moz-F35C832D.boreeas.net) (Ping timeout)
[02:11:32] *** Quits: tjc (tjc@moz-744AF7EC.tmodns.net) (Quit: zzzzzzzzzz)
[02:12:17] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[02:12:32] *** Quits: vosen (vosen@moz-266BA656.icpnet.pl) (Quit: Leaving)
[02:14:43] *** Joins: KindOne (KindOne@moz-C27055C1.dynamic.ip.windstream.net)
[02:14:53] *** Joins: Boreeas (Boreeas@moz-F35C832D.boreeas.net)
[02:15:26] <Aetherspawn_BNC> cmr: how are the benchmarks looking?
[02:16:53] *** Joins: dew (Instantbir@moz-66796D51.dhcp.stls.mo.charter.com)
[02:17:02] *** Joins: KindTwo (KindOne@moz-92F56E88.dynamic.ip.windstream.net)
[02:17:31] *** Quits: KindOne (KindOne@moz-C27055C1.dynamic.ip.windstream.net) (Ping timeout)
[02:17:33] <aatch> Wow, the new docs look amazing. (I know I'm late to this, but still)
[02:17:43] *** KindTwo is now known as KindOne
[02:17:49] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[02:17:51] *** Quits: dbaupp (Thunderbir@moz-73E90475.lns20.syd6.internode.on.net) (Ping timeout)
[02:19:28] *** Quits: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net) (Connection reset by peer)
[02:20:25] <MaikKlein> aatch, wow they really look very clean
[02:20:40] <aatch> MaikKlein, I know.
[02:20:42] *** Joins: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net)
[02:21:08] *** Joins: dbaupp (Thunderbir@moz-73E90475.lns20.syd6.internode.on.net)
[02:21:58] <MaikKlein> there is no default .css in rustdoc right?
[02:23:42] *** Quits: KindOne (KindOne@moz-92F56E88.dynamic.ip.windstream.net) (Ping timeout)
[02:23:51] *** Joins: steveklabnik (steveklabn@1527A0E8.C194AA38.4EA770CF.IP)
[02:24:21] <steveklabnik> hey all! i'm getting a weird error, 'multiple matching crates for std' any ideas? seems like it wants to find one from my local path and one from github?
[02:24:22] *** Joins: doomlord1 (walter@moz-6651F8D4.range86-145.btcentralplus.com)
[02:24:46] <Aetherspawn_BNC> is it possible to make an unsafe function pointer to external code and then call it
[02:24:54] *** Quits: alexrp (zor@moz-180BED6.rfw.name) (Ping timeout)
[02:24:55] <Aetherspawn_BNC> (a mutable one)
[02:25:03] <aatch> Aetherspawn_BNC, yes
[02:25:15] *** Quits: ldlework (ldlework@6AEB83D1.B92A0FC.176AC772.IP) (Ping timeout)
[02:25:18] <dbaupp> steveklabnik: it probably lists two libstd-... in the same directory, differing only by the hash?
[02:25:20] <aatch> One sec
[02:25:23] *** Joins: Nisstyre (wes@moz-FD86289.netflash.net)
[02:25:24] <Aetherspawn_BNC> what documentations should I read?
[02:25:26] <Aetherspawn_BNC> oh ok
[02:25:30] <steveklabnik> dbaupp: uuid is the same
[02:25:43] <aatch> steveklabnik, but is the hash in the name?
[02:25:46] <dbaupp> steveklabnik: I mean the hash in the fil name?
[02:25:51] <dbaupp> *file
[02:26:09] <steveklabnik> only one has a file name
[02:26:09] *** Quits: jhark (jhark@moz-B9920504.jhark.net) (Ping timeout)
[02:26:11] <aatch> Aetherspawn_BNC, have a look in std::unsable::dynamic_lib
[02:26:18] <steveklabnik> one has a path the other doesnt
[02:26:41] <steveklabnik> ugh, starting initial descent, i may just drop off at some point
[02:27:01] <aatch> Aetherspawn_BNC, oh, wait actually that doesn't do what I thought it did.
[02:27:05] <dbaupp> steveklabnik: can you gist/pastebin the error?
[02:27:06] *** Joins: ldlework (ldlework@6AEB83D1.B92A0FC.176AC772.IP)
[02:27:09] *** Quits: Fliboo (Flibo@moz-40397852.org.aalto.fi) (Ping timeout)
[02:27:10] <MaikKlein> i have a question about http://static.rust-lang.org/doc/extra/arc.html , tasks are only able to read from "share_number" right?
[02:27:18] *** Quits: doomlord1 (walter@moz-6651F8D4.range86-145.btcentralplus.com) (Ping timeout)
[02:27:21] <steveklabnik> dbaupp: https://gist.github.com/steveklabnik/5794291
[02:27:33] <dpc> main.rs:1 extern mod sdl;
[02:27:35] <steveklabnik> oh wait, there is two paths
[02:27:38] <steveklabnik> sigh, yay scrolling
[02:27:41] <steveklabnik> hashes are different
[02:27:45] <dpc> main.rs:1:0: 1:0 error: can't find crate for `std`
[02:28:05] <dpc> I can't compile my program on the latest rust compiler and I don't know why.
[02:28:06] <steveklabnik> even before i had the use there it threw it
[02:28:08] <dbaupp> steveklabnik: yeah, if you go into that directory and delete the oldest copies, it should be fine
[02:28:13] <steveklabnik> dbaupp: word
[02:28:21] *** Joins: KindOne (KindOne@moz-FF44CB75.dynamic.ip.windstream.net)
[02:28:22] <steveklabnik> <3
[02:28:23] <mark_edward> i have  a trait that is dependent on the ToStr trait, but when i have managed pointers to objects with that trait type, i can't call obj.to_str()
[02:28:25] *** Quits: jpf (jan@moz-A8C26A15.org) (Ping timeout)
[02:28:26] <steveklabnik> any idea how this happened?
[02:28:28] <dbaupp> steveklabnik: (or just delete all of them, and re-`make install`)
[02:28:38] <steveklabnik> i mean, i compiled the compilers a few times
[02:28:44] <steveklabnik> so i guess it's just an older install
[02:28:49] <steveklabnik> but sorta sucks that this is the error at the moment
[02:28:52] * steveklabnik shrugs
[02:28:57] <steveklabnik> more things to fix!
[02:29:01] *** Joins: alexrp (zor@moz-180BED6.rfw.name)
[02:29:10] <dbaupp> mark_edward: (*foo).to_str()
[02:29:16] *** Quits: katis (katis@40C8AF65.EFDC2270.EE6E63A5.IP) (Ping timeout)
[02:29:37] <MaikKlein> dbaupp, is this a bug?
[02:29:48] <mark_edward> error: type @monster::Monster cannot be dereferenced
[02:29:52] <dbaupp> MaikKlein: which?
[02:29:52] <mark_edward> dbaupp: error: type @monster::Monster cannot be dereferenced
[02:30:01] <dbaupp> mark_edward: oh, right, it's a trait object
[02:30:04] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Ping timeout)
[02:30:18] <dbaupp> mark_edward: not sure.
[02:30:22] <MaikKlein> dbaupp, I thought  (*foo).to_str() should be the same as  foo.to_str()
[02:30:25] *** Joins: Flibo (Flibo@moz-40397852.org.aalto.fi)
[02:30:30] *** Quits: steveklabnik (steveklabn@1527A0E8.C194AA38.4EA770CF.IP) (Quit: landing)
[02:30:32] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[02:30:37] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[02:30:44] <dbaupp> MaikKlein: in theory... but auto-deref is unreliable sometimes
[02:31:15] <Aetherspawn_BNC> aatch: yeah, I don't see anything to do it.
[02:31:16] <mark_edward> why doesn't the managed pointer have the ToStr  trait if the type it's managiing implements it?
[02:31:22] *** Quits: KindOne (KindOne@moz-FF44CB75.dynamic.ip.windstream.net) (Ping timeout)
[02:31:27] <aatch> Aetherspawn_BNC, I made a bad assumption sorry.
[02:31:37] *** Joins: jpf (jan@moz-A8C26A15.org)
[02:31:47] <aatch> dbaupp, you did some work with external function pointers, right?
[02:31:57] <dbaupp> aatch: only the dymanic lib stuff
[02:32:04] <dbaupp> *dynamic
[02:32:20] <aatch> dbaupp, yeah, but you could still get extern fn pointers and call them right?
[02:32:26] <dbaupp> mark_edward: I think it should/does but the trait object is making it act strangely
[02:32:33] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[02:33:02] <dbaupp> aatch: yeah, essentially transmuting the void* that dlsym returns
[02:33:10] *** Quits: dpc (Mibbit@moz-86B6569C.hfc.comcastbusiness.net) (Quit: http://www.mibbit.com ajax IRC Client)
[02:33:11] <mark_edward> ok :-(
[02:33:49] <aatch> so just cast::transmute::<*c_void,&extern fn() -> ()>(ptr) ? (For example)
[02:34:22] <dbaupp> well, yeah, but with unstable::dynamic_lib, using `dl.symbol::<&extern "Rust" fn()>("name")`
[02:34:27] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[02:34:31] <dbaupp> (it does the transmute internally)
[02:35:00] <aatch> dbaupp, ahh, so it does
[02:35:05] <aatch> Aetherspawn_BNC, ^^
[02:35:17] <dbaupp> (I guess the `"Rust"` is unnecessary when loading from a Rust library)
[02:35:32] <aatch> dbaupp, it is, otherwise it defaults to C
[02:35:40] <Aetherspawn_BNC> Okay, so where ptr is the function ptr
[02:35:50] <dbaupp> aatch: oh, ok... I though it was the other way around
[02:35:52] <Aetherspawn_BNC> I can put my ffi eligible type in the transmute generic cast thing?
[02:36:09] <aatch> dbaupp, it's why you don't need it in extern { } blocks
[02:36:22] <dbaupp> aatch: ah, right, makes sense.
[02:36:28] *** Quits: MaikKlein (maik@moz-85462C98.dip0.t-ipconnect.de) (Ping timeout)
[02:36:35] <aatch> since you can have extern "C" { } or extern "Rust" { }
[02:39:49] *** Joins: doomlord (doomlod@moz-6651F8D4.range86-145.btcentralplus.com)
[02:45:13] *** Quits: Sorella (queen@B12A78F5.BA14766C.95C8B7C6.IP) (Quit: (quit))
[02:45:17] *** Quits: steven_is_false1 (steven@moz-144077DE.bchsia.telus.net) (Ping timeout)
[02:45:44] *** Quits: goffrie (goffrie@moz-E04A2B1C.dsl.ncf.ca) (Ping timeout)
[02:45:48] <Aetherspawn_BNC> aatch: sorry for tagging you, but docs are scarce. Can rust compile dll's which can be called by other languages?
[02:45:53] *** Joins: steven_is_false (steven@moz-144077DE.bchsia.telus.net)
[02:46:29] <aatch> Aetherspawn_BNC, in theory. you can use extern fn foo(a: int) -> int { ... }.
[02:46:39] <aatch> (obviously whatever signature you want)
[02:46:58] <aatch> How well it works... I don't know.
[02:47:04] <Aetherspawn_BNC> lol
[02:47:17] <Aetherspawn_BNC> I wonder if it'll chuck a tantrum if I try and export DllMain 
[02:50:22] <enix> Is it possible to borrow a ~int as a &const int, if the value i'm trying to borrow is in a struct i'm accessing via a &mut self? Specifically, this is what i'm looking at: https://gist.github.com/DaGenix/5794340
[02:54:11] *** Quits: jrfeenst (jrfeenst@moz-F912484F.cpe.norwoodlight.com) (Quit: jrfeenst)
[02:55:25] *** Quits: brson (brson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[02:59:40] *** Quits: ysuzuki (ysuzuki@moz-A563888C.ics.keio.ac.jp) (Client exited)
[03:05:13] <Aetherspawn_BNC> indeed rustc --lib produces a valid dll, thanks for the help :)
[03:06:10] <aatch> Aetherspawn_BNC, Oh, btw, if you didn't already figure it out, you'll need the #[no_mangle] attribute to be able to easily call them.
[03:07:04] <Aetherspawn_BNC> ah, thanks. You saved me opening IDA and going wth :P
[03:07:23] <dbaupp> enix: probably not
[03:09:07] *** Joins: ysuzuki (ysuzuki@moz-A563888C.ics.keio.ac.jp)
[03:12:15] <Jeaye> bjz: Haven't, sorry. I'm focusing on a nasty voxelization bug that just surfaced. :|
[03:12:27] <Jeaye> I will take a look at it when I can though.
[03:17:56] <Aetherspawn_BNC> aatch: it doesn't come up as being exported in IDA
[03:18:12] *** Joins: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP)
[03:18:12] <aatch> Aetherspawn_BNC, hmm, marked it as pub?
[03:18:12] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 144f7cdcc to 143495737: 02http://git.io/N3iJvQ
[03:18:12] *** Parts: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP) ()
[03:18:16] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[03:18:16] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/FdHwHQ
[03:18:16] <ghrust> 13rust/06auto 1464ccc60 15Sander Mathijs van Veen: Remove h[123] border and increase their padding to better readability
[03:18:16] <ghrust> 13rust/06auto 1498bd683 15bors: auto merge of #7184 : smvv/rust/doc_css, r=brson...
[03:18:16] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[03:18:25] <Aetherspawn_BNC> Oh, no, thanks for reminding me
[03:18:45] <bjz> Jeaye: sure thing
[03:18:57] <aatch> Otherwise, I'm guessing you need the equivalent to DllExport (or whatever, not a windows dev) which I don't think we have atm.
[03:19:08] <bjz> Jeaye: with the link args, I'd like to have something that's generic to linux platforms
[03:19:25] <bjz> Jeaye: haven't managed to get hold of dreda yet
[03:19:47] <Aetherspawn_BNC> still nope :( http://puu.sh/3hugb/cc7d4d90b5.png bugger
[03:19:47] <Jeaye> What I provided will work for all Linux platforms.
[03:19:58] <bjz> Jeaye: yeah?
[03:19:58] <Jeaye> But it will not work on Mac or Windows.
[03:20:04] <Aetherspawn_BNC> I guess I'll have to hunt down and as a windows dev
[03:20:06] <bjz> Jeaye: sure
[03:20:13] <bjz> Jeaye: ofc ;)
[03:20:45] <Jeaye> bjz: Yes, X11, Xrandr, Xi, etc are all going to be available to a Linux systems building an OpenGL app.
[03:21:09] *** Quits: vk (chatzilla@F92596F.2DEF7520.EF7679FA.IP) (Quit: ChatZilla 0.9.90 [Firefox 22.0/20130612084701])
[03:21:31] <bjz> Jeaye: wht about Xxf86vm?
[03:21:41] <bjz> *what
[03:23:41] <Jeaye> bjz: Looks to be part of X11 core.
[03:23:59] <bjz> Jeaye: what does it provide?
[03:24:34] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.1)
[03:24:39] <bjz> just want to know what I'm linking with ;)
[03:25:24] <bjz> X11 is the windowing system ofc
[03:26:38] *** Quits: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net) (Ping timeout)
[03:27:34] <Jeaye> Well, the graphics server; it doesn't provide much for windowing. :P
[03:27:47] <Jeaye> Looking into what it provides... one sec.
[03:29:03] <aatch> Hah! X11 provides bloat
[03:29:23] <aatch> nowadays it does jack shit.
[03:30:13] <dbaupp> aatch: bloat is an important part of any programs
[03:30:17] <Jeaye> bjz: Extension library for the XFree86-VidMode X extension
[03:30:56] <Jeaye> That's not an easy lib to get a description on. Fucking X11.
[03:32:37] <aatch> dbaupp, can X11 read mail yet?
[03:32:40] <Jeaye> Nothing on the web, whatis, apropos, etc. Had to search my filesystem for references to it and found /usr/doc/libXxf86vm-1.1.2/README which says what I pasted above.
[03:32:56] <Jeaye> bjz: In short, it's part of X11.
[03:33:01] <dbaupp> aatch: heh
[03:33:08] <Jeaye> I stand by what I said about my linker flags being generic.
[03:34:11] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Ping timeout)
[03:34:25] <bjz> Jeaye: awesome
[03:34:31] <bjz> Jeaye: thanks
[03:34:34] <Jeaye> Cheers.
[03:34:38] <steven_is_false>  Rust is really immature as a language. What languages would the people here recommend as substitutes in the meanwhile?
[03:34:47] <Jeaye> C++
[03:34:56] *** Quits: ysuzuki (ysuzuki@moz-A563888C.ics.keio.ac.jp) (Client exited)
[03:35:42] <steven_is_false> Jeaye: Unfortunately, C++ doesn't have a proper module system.
[03:35:45] <SiegeLord> Yep, C++ is the only choice
[03:35:48] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Computer has gone to sleep.)
[03:36:33] *** Quits: anri (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net) (Quit: anri)
[03:37:49] <sp3d> or C or Haskell, depending on which bits of Rust most interest you
[03:38:03] <steven_is_false> As well, C++ does not support existential quantification.
[03:38:12] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[03:38:33] <steven_is_false> sp3d: Haskell always uses the garbage collector, and there is no way to use it for hard real time behaviour.
[03:38:51] <sp3d> true
[03:39:05] <sp3d> but presumably not everyone interested in Rust needs hard realtime?
[03:39:12] <sp3d> sorry if I'm missing some context here
[03:39:25] <steven_is_false> sp3d: Oh definitely, It's just for my personal uses that I want to experiment with it.
[03:40:04] <SiegeLord> If there was a perfect replacement for Rust today, then Rust wouldn't be in development (modulo NIH syndrome)
[03:40:23] <steven_is_false> SiegeLord: true
[03:41:29] <steven_is_false> I wonder if one could hack an effect system onto Scala so that no allocations are done in the main loop?
[03:49:56] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[04:00:55] *** Quits: steven_is_false (steven@moz-144077DE.bchsia.telus.net) (Ping timeout)
[04:00:57] *** Joins: shachaf (shachaf@moz-F37E0395.members.linode.com)
[04:06:09] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[04:06:09] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/FdHwHQ
[04:06:09] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[04:06:57] *** Joins: ysuzuki (ysuzuki@moz-A563888C.ics.keio.ac.jp)
[04:09:09] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[04:09:09] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/DPt31Q
[04:09:09] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[04:09:10] *** Joins: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP)
[04:09:10] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/gbFwzA
[04:09:10] <ghrust> 13rust/06auto 14c997918 15Brian Anderson: Revert "stop using an absolute rpath"...
[04:09:10] <ghrust> 13rust/06auto 1413b6ae6 15bors: auto merge of #7192 : brson/rust/rpath, r=thestinger...
[04:09:12] *** Parts: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP) ()
[04:14:09] <aatch> Why would anybody want bitwise operations on floats?
[04:15:45] <sp3d> fiddly things like extracting exponent and mantissa? it seems like you'd be about as safe transmuting them to ints and then working
[04:16:29] <aatch> sp3d, exactly. For context I just closed an issue which asked if we were going to have bitwise operations on floats
[04:16:58] <aatch> There aren't even any sensibly semantics for some of them.
[04:17:06] <sp3d> my guess is it's a "Put down the chocolate-covered banana, step away from the european currency systems, and tell us the actual problem that you are trying to solve." situation
[04:18:00] <aatch> like what does `1.42 << 2` produce? (Hint, it's either trivial or different for single and double precision)
[04:18:33] <sp3d> "1.42*4, but faster" :P
[04:19:28] <aatch> Floating point semantics are hard enough without piling useless bitwise semantics on top.
[04:21:02] *** Joins: Sodel_the_V (user@moz-853663E1.va.shawcable.net)
[04:23:26] *** Joins: steven_is_false (steven@moz-144077DE.bchsia.telus.net)
[04:24:02] *** Joins: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP)
[04:24:13] <steven_is_false> Why should I use Rust instead of Scala?
[04:24:37] *** Joins: jhark (jhark@moz-B9920504.jhark.net)
[04:25:06] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[04:25:29] <dbaupp> steven_is_false: because rust is super-great (it's been voted on, https://github.com/mozilla/rust/wiki/Meeting-weekly-2013-05-21)
[04:25:59] <steven_is_false> dbaupp: Well, if it's been voted on by democratic poll...
[04:26:03] <strcat> kimundi: you around?
[04:26:10] <dbaupp> steven_is_false: more seriously, you probably shouldn't, if you actually want to make a robust/production system.
[04:26:23] <steven_is_false> dbaupp: Definitely.
[04:26:38] <steven_is_false> dbaupp: I've been experiencing lots of annoying issues.
[04:26:52] <steven_is_false> dbaupp: Besides the GC hasn't landed yet.
[04:27:38] <dbaupp> yeah, still highly experimental
[04:27:44] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[04:29:24] *** Joins: katis (katis@40C8AF65.EFDC2270.EE6E63A5.IP)
[04:29:56] <steven_is_false> Can someone explain this recent commit https://github.com/mozilla/rust/pull/7186 to me? I don't get what a cleanup block is.
[04:34:20] <aatch> steven_is_false, basically, we need some way of freeing memory and running destructors, no matter what.
[04:34:53] <steven_is_false> aatch: Okay
[04:35:34] <aatch> so allocation functions use a special LLVM instruction called `invoke`, which allows you to specify stuff like a landing pad for when the stack is unwinding, or even when it just returns.
[04:36:10] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[04:36:23] <aatch> to do that we need a BasicBlock that cleans up the object.
[04:36:30] <steven_is_false> aatch: Fair enough
[04:37:57] <aatch> what was happening was that we were getting lots of of these cleanup blocks, but often they wouldn't be conditional, for example temporary cleanups (`foo(~1)` when foo is fn(&int) would do this)
[04:38:43] <steven_is_false> Can't a lot of those be optimized out in the first place though?
[04:38:43] <aatch> unfortunately this meant we'd end up with lots and lots of this blocks, artificially inflating the size of the CFG for the function.
[04:38:53] <aatch> which makes it harder for LLVM to optimize out
[04:39:03] <steven_is_false> aatch: okay
[04:40:46] <aatch> so now we try to grow the current landing pad, if appropriate, before inserting a new block.
[04:41:16] <steven_is_false> So clang probable does a similar thing right?
[04:41:28] <aatch> steven_is_false, probably
[04:41:58] <aatch> My understanding of that code is shaky at best though, so I may have gotten some details wrong.
[04:42:04] <steven_is_false> aatch: Fair enough
[04:42:16] <aatch> you'd be best to ask doener when he comes on, since it's his PR
[04:42:31] <steven_is_false> aatch: okay
[04:44:30] *** Joins: brson (brson@5F06B402.AD1E507F.3688B332.IP)
[04:44:30] *** ChanServ sets mode: +o brson
[04:59:37] <steven_is_false> Why should I use Java 2 over Rust?
[05:04:43] *** Parts: steven_is_false (steven@moz-144077DE.bchsia.telus.net) ()
[05:05:41] *** Quits: SingingBoyo (brandon@moz-EAC7E73D.bchsia.telus.net) (Ping timeout)
[05:06:15] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[05:06:59] *** Joins: alisdair (textual@moz-EBE9F394.bchsia.telus.net)
[05:07:33] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[05:11:38] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[05:14:34] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[05:16:01] *** Joins: SimonSapin (simon@moz-73287A57.zone9.bethere.co.uk)
[05:16:06] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[05:17:49] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[05:17:54] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: WeeChat 0.4.1)
[05:20:40] *** Quits: SimonSapin (simon@moz-73287A57.zone9.bethere.co.uk) (Ping timeout)
[05:21:20] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[05:23:58] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[05:29:43] *** Quits: Sodel_the_V (user@moz-853663E1.va.shawcable.net) (Ping timeout)
[05:32:24] *** Joins: Sodel_the_V (user@moz-853663E1.va.shawcable.net)
[05:32:41] *** Quits: Sodel_the_V (user@moz-853663E1.va.shawcable.net) (Quit: Eaten by a grue)
[05:32:59] *** Joins: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com)
[05:38:43] *** Joins: hello (Mibbit@moz-AC8ACB2.hfc.comcastbusiness.net)
[05:38:57] *** Quits: hello (Mibbit@moz-AC8ACB2.hfc.comcastbusiness.net) (Quit: http://www.mibbit.com ajax IRC Client)
[05:39:18] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Ping timeout)
[05:39:55] *** Joins: noam_ (noam@F6B530A7.720527A7.416762B.IP)
[05:40:42] *** Quits: noam (noam@F6B530A7.720527A7.416762B.IP) (Ping timeout)
[05:45:28] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[05:50:26] *** Quits: alisdair (textual@moz-EBE9F394.bchsia.telus.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz)
[05:51:12] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[05:52:46] *** Quits: skchrko_ (sk@61A494B3.BA40E8A.AAC02D62.IP) (Connection reset by peer)
[05:55:31] *** Quits: devbug (quassel@moz-E1DE087C.bchsia.telus.net) (Ping timeout)
[06:00:40] *** Joins: alisdair (textual@moz-EBE9F394.bchsia.telus.net)
[06:01:23] *** Joins: sankha93 (Instantbir@A6061E30.BC703A9E.8B6C1D65.IP)
[06:02:23] *** Joins: idkfa (idkfa@moz-141F54A4.krasinfo.ru)
[06:08:38] *** Joins: sonwow (sonwow@5AB4884B.FCC4549.14D5B978.IP)
[06:10:50] *** Joins: tjc (tjc@moz-ACD0E477.hsd1.or.comcast.net)
[06:10:50] *** ChanServ sets mode: +o tjc
[06:11:22] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[06:11:54] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[06:12:37] *** Quits: tjc (tjc@moz-ACD0E477.hsd1.or.comcast.net) (Ping timeout)
[06:13:12] *** Joins: robert (robertknig@moz-C34822AC.range86-166.btcentralplus.com)
[06:13:54] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[06:15:13] *** Quits: brson (brson@5F06B402.AD1E507F.3688B332.IP) (Quit: leaving)
[06:15:49] *** Joins: tjc (tjc@moz-ACD0E477.hsd1.or.comcast.net)
[06:15:49] *** ChanServ sets mode: +o tjc
[06:20:55] *** wuwei|offline is now known as wuwei
[06:25:25] *** Quits: Jesin (Jessin_@moz-3AD6F09F.res.lehigh.edu) (Quit: Leaving)
[06:31:51] *** Quits: fzzzy (Donovan@moz-40919DA0.us-west-2.compute.amazonaws.com) (Ping timeout)
[06:32:36] *** Quits: cscottnet (cscott@moz-2577C94A.net) (Ping timeout)
[06:32:44] *** Quits: sonwow (sonwow@5AB4884B.FCC4549.14D5B978.IP) (Quit: leaving)
[06:34:46] *** Quits: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[06:35:31] *** Quits: blitter (blitter@moz-FB45689C.dyn.centurytel.net) (Ping timeout)
[06:36:38] *** Joins: fzzzy (Donovan@moz-40919DA0.us-west-2.compute.amazonaws.com)
[06:39:53] *** Quits: tjc (tjc@moz-ACD0E477.hsd1.or.comcast.net) (Quit: zzzzzzzzzz)
[06:41:12] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[06:41:52] *** Quits: robert (robertknig@moz-C34822AC.range86-166.btcentralplus.com) (Ping timeout)
[06:42:45] *** Joins: victorporof (victorporo@70DEDDA.9004F55.9B1E38F4.IP)
[06:45:30] <Aetherspawn_BNC> so let mejust confirm
[06:45:38] <Aetherspawn_BNC> that there is no "dllexport" magic?
[06:45:55] <aatch> Aetherspawn_BNC, as far as I am aware, no.
[06:46:09] <aatch> Though it could be added via an attribute
[06:46:09] <Aetherspawn_BNC> I might raise an issue about it then
[06:46:14] <aatch> Aetherspawn_BNC, please do.
[06:47:25] <Aetherspawn_BNC> Are you sure extern fn is how you export
[06:48:00] <aatch> Aetherspawn_BNC, no
[06:48:09] *** Joins: tjc (tjc@moz-ACD0E477.hsd1.or.comcast.net)
[06:48:09] *** ChanServ sets mode: +o tjc
[06:49:16] *** Joins: SimonSapin (simon@88F51059.F3BBB17D.144F44FA.IP)
[06:49:26] *** Quits: tjc (tjc@moz-ACD0E477.hsd1.or.comcast.net) (Quit: zzzzzzzzzz)
[06:49:45] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz)
[06:50:00] <dbaupp> aatch: fwiw, it looks like it's "just" calling `llvm::SetLinkage(llfn, llvm::DLLExport)`
[06:50:09] <aatch> dbaupp, yep
[06:50:35] <Aetherspawn_BNC> I guess I'll raise an issue about it
[06:50:40] <aatch> Probably do it somewhere on the same path it adds inline
[06:50:41] <Aetherspawn_BNC> if it's wrong, then it can just be closed
[06:51:10] <aatch> Or maybe where it currently sets the linkage
[06:52:18] <aatch> It's an easy fix anyway.
[06:52:38] <aatch> Aetherspawn_BNC, it's only wrong if there isn't already a way to do DLLExport.
[06:52:59] <dbaupp> seems like it'd be sensible to support #[linkage(weak)] #[linkage(dllexport)] etc, since it's basically no more work than just doing DLLExport
[06:53:28] <aatch> dbaupp, yeah, probably use similar code to what #[inline] does.
[06:53:50] <dbaupp> aatch: yup, just looking at that part of trans now :)
[06:54:33] <Aetherspawn_BNC> there we go https://github.com/mozilla/rust/issues/7196
[06:55:57] <aatch> dbaupp, so there's only two places it sets the inline, at least in base
[06:56:05] <aatch> one for free fns, one for methods.
[06:56:23] <Aetherspawn_BNC> I liked export better than extern
[06:56:25] <Aetherspawn_BNC> why did they change it
[06:56:37] <Aetherspawn_BNC> extern is just confusing because it means something else in C/C++
[06:56:50] <aatch> Aetherspawn_BNC, actually it doesn't
[06:57:34] <aatch> it's just that if you don't use it, you get a rust calling convention function.
[06:57:43] <aatch> instead of a C calling convention.
[06:58:00] <dbaupp> aatch: yeah. although, linkage is slightly different to inlining since it can apply to any symbol. (I think?)
[06:58:09] <aatch> dbaupp, true
[06:58:17] <Aetherspawn_BNC> surely --lib works on linux already
[06:58:19] <strcat> extern "C" { /* this is a C++ feature for nesting C decls */ }
[06:58:23] <aatch> so probably at the end of trans_item.
[06:58:37] <Aetherspawn_BNC> or so, the documentation says its possible to build shared libs
[06:58:41] <aatch> I'm not sure how windows Dlls work.
[06:58:50] <dbaupp> aatch: yeah `set_linkage_if_appr(i.attr, llitem)` or whatever
[06:59:01] <strcat> extern {} means the same thing as non-static (or explicitly extern) declarations in C
[06:59:13] <strcat> export was replaced with pub/priv
[06:59:20] *** Quits: alisdair (textual@moz-EBE9F394.bchsia.telus.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz)
[06:59:21] <dbaupp> Aetherspawn_BNC: it's possibly (in fact, necessary) to build Rust shared libs that Rust code calls on all platforms
[06:59:33] <dbaupp> (it's how the compiler & std libraries work)
[06:59:58] <aatch> but it's possible that it only works via mingw though
[07:00:23] <Aetherspawn_BNC> Im building direct from windows shell using rustc in path
[07:00:32] <dbaupp> Aetherspawn_BNC: I'm not sure if calling into a Rust shared library from (e.g.) C works reliably on any platform
[07:00:32] <Aetherspawn_BNC> but Im not getting errors to suggest failure of anything
[07:01:11] <aatch> Aetherspawn_BNC, so that program, IDA(?) what do you see when you throw librustc-<hash>.dll at it?
[07:01:45] <Aetherspawn_BNC> I'll check
[07:01:50] *** Joins: tjc (tjc@moz-ACD0E477.hsd1.or.comcast.net)
[07:01:50] *** ChanServ sets mode: +o tjc
[07:02:44] <dbaupp> aatch: has your 2nd trans refactor landed?
[07:02:54] <Aetherspawn_BNC> everything seems to export perfectly
[07:02:55] <Aetherspawn_BNC> http://puu.sh/3hACH/68974539e5.png
[07:03:27] <kimundi> strcat: ping?
[07:03:43] *** Joins: fabiand (fabiand@moz-A4F8C258.adsl.alicedsl.de)
[07:03:47] <aatch> dbaupp, not yet, graydon didn't like me getting rid of the count-llvm-insn stuff
[07:04:00] <aatch> so I put it back and am wait for a re-review
[07:04:29] <aatch> I have a commit that re-writes it to be task-local, but I'll leave it for the moment.
[07:04:32] <dbaupp> aatch: yeah, saw that... wasn't sure if that'd been fixed & r+'d yet
[07:05:01] <Aetherspawn_BNC> so, pub extern fn foo ( ... ) { 1 }
[07:05:11] <Aetherspawn_BNC> maybe it needs a namespace or something
[07:05:18] <dbaupp> doesn't this move to having a lot of things task local inhibit the ability for rustc to be parallelised?
[07:05:41] <aatch> dbaupp, this is just stats, so it could just be collected at the end.
[07:05:49] <aatch> and the crate context isn't thread-safe anyway.
[07:06:14] <dbaupp> I see
[07:08:53] *** Quits: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Quit: Don't tell them I was here...)
[07:09:04] <aatch> Aetherspawn_BNC, thats odd, if I do the same thing, I get it exported here (on linux admittedly)
[07:09:23] <aatch> it seems that dllexport is only needed for corresponding dllimport
[07:10:14] <aatch> Aetherspawn_BNC, I have a single file with #[no_mangle] pub extern fn foo() {}
[07:11:33] <dbaupp> aatch: https://github.com/mozilla/rust/pull/7198 r?
[07:12:01] <Aetherspawn_BNC> I'll try single file
[07:12:06] <Aetherspawn_BNC> maybe its an issue with crates
[07:12:39] <Aetherspawn_BNC> It is indeed an issue with  crates @aatch 
[07:12:44] <Aetherspawn_BNC> single file works perfectly
[07:13:09] <aatch> Aetherspawn_BNC, have you got the modules set up properly?
[07:13:10] <dbaupp> Aetherspawn_BNC: that seems surprising. what happens if you wrap the function in a mod in one file?
[07:13:43] <Aetherspawn_BNC> aatch: see the issue
[07:13:47] <Aetherspawn_BNC> I put the code there
[07:13:49] * Aetherspawn_BNC https://github.com/mozilla/rust/issues/7196
[07:14:19] <dbaupp> Aetherspawn_BNC: what about with 'pub mod test'?
[07:14:22] <aatch> Aetherspawn_BNC, it needs to be pub mod test.
[07:14:29] <aatch> so its a public module
[07:14:36] <Aetherspawn_BNC> aww man
[07:15:41] <Aetherspawn_BNC> yeah, works
[07:15:59] <aatch> Aetherspawn_BNC, don't worry, the actual issue itself is valid, we probably should have a way to set dllimport+dllexport on functions
[07:16:24] <Aetherspawn_BNC> I closed the issue, reopen if you think its valid :P
[07:16:32] <Aetherspawn_BNC> I think im just an idiot
[07:16:33] <Aetherspawn_BNC> tbh
[07:16:37] *** Quits: tjc (tjc@moz-ACD0E477.hsd1.or.comcast.net) (Quit: zzzzzzzzzz)
[07:16:55] <aatch> From what I read on the LLVM docs, you need dllexport if another dll wants to use dllimport
[07:17:03] <dbaupp> Aetherspawn_BNC: can you actually load/call the symbols from the dll though?
[07:17:18] *** Quits: sankha93 (Instantbir@A6061E30.BC703A9E.8B6C1D65.IP) (Ping timeout)
[07:17:23] <aatch> though I don't know enough about windows dlls to know what that signifies.
[07:17:33] <Aetherspawn_BNC> dbaupp: aatch: http://puu.sh/3hAVO/44c18283ac.png
[07:17:45] <Aetherspawn_BNC> they're the correct calling convention and everything
[07:18:01] <Aetherspawn_BNC> some rust runtime noise, but it's okay
[07:18:12] <dbaupp> seems... unlikely that that runtime stuff will work, though.
[07:18:16] *** Joins: ghrust (ghrust@AD60B2E3.6A2AE50.F3114085.IP)
[07:18:16] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/ZLgZ0w
[07:18:16] <ghrust> 13rust/06auto 14f1d971a 15Huon Wilson: std: add Zero impls for &[] and &str.
[07:18:16] <ghrust> 13rust/06auto 1490b999a 15bors: auto merge of #7198 : huonw/rust/slice-zeros, r=Aatch
[07:18:17] *** Parts: ghrust (ghrust@AD60B2E3.6A2AE50.F3114085.IP) ()
[07:18:50] <Aetherspawn_BNC> rustrt is listed as a dependancy
[07:19:04] <Aetherspawn_BNC> if its in the same directory it would work, but it'd be nice if there was a way to static link the runtime
[07:19:34] <Aetherspawn_BNC> Oh, it also pulls in core-<hugehash>
[07:19:54] <dbaupp> there might be rustrt initialisation stuff necessary too.
[07:19:58] * dbaupp doesn't know
[07:19:58] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[07:21:19] <aatch> Aetherspawn_BNC, oh, that stuff there is so you can call rust code from inside that function.
[07:21:21] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[07:21:37] <aatch> Rust uses segmented stacks, so we need to have that __morestack call
[07:21:44] <aatch> to grow the stack if needed.
[07:21:50] <aatch> Anyway, gotta go.
[07:21:53] <aatch> Laterz
[07:22:12] <Aetherspawn_BNC> bye
[07:22:14] <Aetherspawn_BNC> thanks for the help
[07:22:23] <dbaupp> have you seen http://brson.github.io/2013/03/10/embedding-rust-in-ruby/ and/or https://bitbucket.org/devin.jeanpierre/pyrite?
[07:23:14] <dbaupp> (they might be useful as references if you do meet other problems. But I've got no idea if they work on windows :( )
[07:23:27] <Aetherspawn_BNC> windows doesn't have centralized libraries
[07:23:41] <Aetherspawn_BNC> so my feeling is that rustrt and core won't work
[07:23:50] <Aetherspawn_BNC> unless its basically in the rust running directory
[07:24:06] <Aetherspawn_BNC> err, compiler directory where rustrt.dll and such are
[07:25:47] *** Joins: devbug (quassel@moz-E1DE087C.bchsia.telus.net)
[07:28:20] <dbaupp> can you write a short program that just loads and calls e.g. `pub extern fn foo() {}`?
[07:30:34] <Aetherspawn_BNC> yes
[07:30:39] <Aetherspawn_BNC> currently doing it now, but mingw is playing up
[07:33:40] <Aetherspawn_BNC> dbaupp: http://hpaste.org/90039
[07:33:46] <Aetherspawn_BNC> http://puu.sh/3hBhi/3a0b7f23a1.png
[07:33:49] <Aetherspawn_BNC> I removed rust from path
[07:33:57] <mark_edward> are there any plans to fix the problem with owned pointers to traits?
[07:34:00] <Aetherspawn_BNC> it works fine when rust is in path (it can find the depends)
[07:34:15] <dbaupp> mark_edward: presumably
[07:34:17] <Aetherspawn_BNC> ideally though, I cant tell everyone who wants to run xxx thing to install rust
[07:34:35] <dbaupp> Aetherspawn_BNC: yeah, I think it's a known problem (static linking)
[07:35:09] <dbaupp> Aetherspawn_BNC: would it work if you bundle rustrt*.dll and libcore*.dll etc with the exe?
[07:35:19] <mark_edward> cuz it's kind of a hassle, and the managed pointers have issues with traits themselves
[07:35:52] <dbaupp> mark_edward: yeah... there are whole pile of trait-object bugs
[07:35:52] <Aetherspawn_BNC> dbaupp: yes
[07:36:08] <dbaupp> Aetherspawn_BNC: i think that's the only solution right now
[07:36:13] <Aetherspawn_BNC> if its in path, or in the same directory, it works.
[07:36:57] <idkfa> it's pretty common to bundle runtime dlls with the binary on the windows
[07:37:06] <idkfa> i guess
[07:37:25] <Aetherspawn_BNC> if its a common runtime like msvcrt yes
[07:37:57] <Aetherspawn_BNC> but you wouldn't expect like haskell or pypy and such to require a shared runtime :P it'd be nice if the option was there
[07:38:06] <idkfa> afair you have to do the same with ipython
[07:38:12] <idkfa> ironpython*
[07:38:40] <dbaupp> Aetherspawn_BNC: (well, python requires a python interpreter)
[07:40:00] *** Joins: sankha93 (Instantbir@A6061E30.BC703A9E.8B6C1D65.IP)
[07:40:21] <Aetherspawn_BNC> I guess when linux gets static runtime linking windows will get it too
[07:40:23] <Aetherspawn_BNC> can't wait :P
[07:40:29] <dbaupp> Aetherspawn_BNC: https://github.com/mozilla/rust/issues/552
[07:40:33] *** Joins: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP)
[07:40:46] <dbaupp> heh, that bug is really old
[07:41:15] <dbaupp> (in fact, it is the 5th oldest one still open.)
[07:41:39] <Aetherspawn_BNC> should I make an issue and xreference it
[07:41:52] <Aetherspawn_BNC> just for the requirement that windows dll's need runtime dll's :P
[07:42:01] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Ping timeout)
[07:42:06] <Aetherspawn_BNC> actually, let me test exe's
[07:42:08] <Aetherspawn_BNC> they should need them too
[07:42:47] *** Joins: doener (bs@moz-AA189A5A.unitymedia.biz)
[07:44:12] <dbaupp> doener: rustc is the fastest it's been for weeks. nice work!
[07:45:19] <Aetherspawn_BNC> oh god
[07:45:55] <Aetherspawn_BNC> k I deleted my path gotta restart.
[07:46:36] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[07:49:12] <mark_edward> dbaupp: can you help me figure something out with traits?
[07:50:52] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.1)
[07:51:32] *** Joins: gp (Mibbit@D40629A2.AB1F3DE2.176BD6E7.IP)
[07:51:37] *** Quits: ysuzuki (ysuzuki@moz-A563888C.ics.keio.ac.jp) (Client exited)
[07:52:08] <gp> hello!
[07:52:25] <gp> i am trying to learn rust, and have a question
[07:53:11] <gp> why do we need a named lifetime here: https://github.com/mozilla/rust/blob/master/src/libstd/hashmap.rs#L312 ?
[07:53:52] <gp> each_key (https://github.com/mozilla/rust/blob/master/src/libstd/hashmap.rs#L324) does not have a named lifetime 
[07:54:04] *** Parts: hoelzro (hoelzro@moz-937642A5.ro) ()
[07:54:09] <gp> but each_value (https://github.com/mozilla/rust/blob/master/src/libstd/hashmap.rs#L329) does
[07:54:17] <gp> can anybody please explain this?
[07:55:16] <dbaupp> mark_edward: I can try
[07:55:50] <mark_edward> so here is the link to the github repo for my code: https://github.com/MarkJr94/rust_adventure
[07:56:14] <dbaupp> gp: possibly just an omission
[07:56:23] <mark_edward> i'm getting this error from some code in adventure.rc: `error: type `~monster::Monster` does not implement any method in scope named `translate``
[07:56:33] <mark_edward> but if you look in monster/monster.rs
[07:56:46] *** Joins: hansjorg (hansjorg@moz-EECB5F79.static.cust.telenor.com)
[07:56:51] <mark_edward> the Monster trait is defined like so:
[07:56:54] <mark_edward> `pub trait Monster: Move + Position + ToStr {`
[07:57:02] *** Joins: ysuzuki (ysuzuki@moz-A563888C.ics.keio.ac.jp)
[07:57:15] *** Joins: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com)
[07:57:15] <mark_edward> (Move and Position traits are defined in common.rs)
[07:57:45] <gp> dbaupp: do you mean that there is no need for named lifetimes there? (this is my understanding)
[07:58:04] <mark_edward> so why can't I call translate with an object of type ~Monster, when translate is part of the Move trait, and Monster is as defined above?
[07:58:05] <dbaupp> mark_edward: I don't think trait inheritance works properly :/
[07:58:21] <doener> dbaupp: thanks! Next stop is https://github.com/mozilla/rust/issues/4402 -- seems to be an issue in the typechecker, messing up the self_ty 
[07:58:22] <dbaupp> gp: no, I mean that key should also have a named lifetime
[07:58:25] <mark_edward> oh :-(
[07:58:41] <dbaupp> gp: the named lifetimes are essentially just for flexibility
[07:59:02] <dbaupp> mark_edward: yeah :( some bugs are *really* annoying.
[07:59:34] <mark_edward> i wish i could work on it... this is something that really should be fixed isn't it?
[07:59:45] <dbaupp> yes
[07:59:53] <mark_edward> the thing i don't understand is, that it seems to work in some places
[08:00:31] <mark_edward> like in libstd/num/num.rs the Num trait is defined as Num: Add + Sub + Mul .... etc
[08:00:39] <dbaupp> possibly an interaction between trait objects and inheritance
[08:00:40] <mark_edward> and all that stuff seems to work
[08:01:05] <dbaupp> https://github.com/mozilla/rust/issues/4100
[08:01:20] <dbaupp> doener: good luck!
[08:01:56] <gp> dbaupp: so named lifetime gives us more flexibility in what closure we can use as an argument?
[08:02:30] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[08:04:14] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[08:04:16] <dbaupp> gp: as in, that closure can do more things, yes
[08:04:55] <dbaupp> gp, for example, without the named lifetime, you can't do `let mut key_vals = ~[]; hashmap.each(|k, v| key_vals.push((k, v)))`
[08:05:55] <dbaupp> gp: since Rust only knows that `k` is guaranteed to live as long as each call of the closure, it doesn't necessarily live for longer
[08:06:12] <gp> dbaupp, thanks a lot
[08:06:15] *** Joins: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP)
[08:06:16] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/ZLgZ0w
[08:06:16] *** Parts: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP) ()
[08:06:20] <dbaupp> gp: but with the named lifetime, it can know that k lives as long as the hashmap and so that code is fine
[08:06:21] *** Joins: wilsonk-laptop (kvirc@moz-39EFBFC2.cg.shawcable.net)
[08:07:07] *** Quits: wilsonk|2 (kvirc@moz-39EFBFC2.cg.shawcable.net) (Ping timeout)
[08:07:55] *** Joins: berak (chatzilla@6321DBA0.3A27401E.16E13E53.IP)
[08:11:00] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[08:12:01] <Aetherspawn_BNC> dbaupp: executables also require rustrt and core to be in the path or same directory.
[08:12:36] *** Joins: Palmik (palmik@moz-5CA3F354.pks.muni.cz)
[08:15:24] <dbaupp> Aetherspawn_BNC: they do run, though?
[08:15:33] *** Quits: gp (Mibbit@D40629A2.AB1F3DE2.176BD6E7.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[08:16:00] <Aetherspawn_BNC> the executables themselves?
[08:16:10] <dbaupp> yeah
[08:16:14] <Aetherspawn_BNC> yeah they run
[08:16:20] <Aetherspawn_BNC> I'd be worried if rust didnt work at all on windows :P
[08:16:33] <dbaupp> Aetherspawn_BNC: oh, are these rust executables?
[08:16:43] <dbaupp> (not C executables calling into Rust?)
[08:16:57] <Aetherspawn_BNC> okay, here's what is going on;
[08:17:11] <Aetherspawn_BNC> all rust exe's and dll's require rustrt.dll and core-hash.dll to run or load
[08:18:00] <Aetherspawn_BNC> the C exe loading the rust library runs up until the loadlibrary for the rust dll and then windows spawns an error that either of the dependencies is missing on a system with no rust runtime in path
[08:18:27] <Aetherspawn_BNC> the C exe loading the rust library and calling the function doing nothing on a system with the rust runtime present in either path or the same working directory works with no troubles.
[08:18:49] <Aetherspawn_BNC> I haven't tried more complex functions, but IDA tells me rust produces valid exported __cdecl code
[08:19:09] <Aetherspawn_BNC> and __morestack and other runtime stuff seems to work so I can't imagine what wouldn't.
[08:19:45] <Aetherspawn_BNC> tl;dr windows needs the runtime in the same directory as whatever is compiled with rust
[08:20:18] <Aetherspawn_BNC> its 2 dll files, but they're quite small and on windows we don't like to have dll's depending on dll's where possible. thoughts?
[08:21:35] *** Quits: zxcdw (r-a@moz-C7C5467B.cust.bredband2.com) (Ping timeout)
[08:21:58] <Aetherspawn_BNC> dbaupp: imo the static linking should be fasttracked, because without it upgrading the rust runtime could break every rust compiled binary on the whole system :) wouldn't want that.
[08:24:09] <kimundi> r? https://github.com/mozilla/rust/pull/7199
[08:25:02] <dbaupp> Aetherspawn_BNC: ok, that summary sounds like calling Rust actually works better than I thought :)
[08:25:16] <Aetherspawn_BNC> I have yet to test more advanced rust, like something that prints to the console
[08:25:20] <dbaupp> Aetherspawn_BNC: that said, I had literally no idea what was possible/what wasn't
[08:25:26] <Aetherspawn_BNC> can you provide me with some IO stuff I can call?
[08:25:53] <Aetherspawn_BNC> infact, I'll go rip some from the tutorial
[08:26:34] <dbaupp> Aetherspawn_BNC: but, yeah, static linking'd be nice... but getting rustc to (e.g.) generate correct code is probably a higher priority
[08:27:26] *** Joins: CarpNet (ac@moz-FD24B77.sohonet.co.uk)
[08:30:30] <Aetherspawn_BNC> dbaupp: whats the ffi type for int?
[08:31:28] <dbaupp> Aetherspawn_BNC: std::libc::c_int
[08:36:32] *** Joins: EXetoC (ex@moz-C741B177.customer.t3.se)
[08:36:58] *** Parts: berak (chatzilla@6321DBA0.3A27401E.16E13E53.IP) ()
[08:42:57] *** Quits: devbug (quassel@moz-E1DE087C.bchsia.telus.net) (Client exited)
[08:46:48] <Aetherspawn_BNC> dbaupp: it's printing stuff to stderr but I didn't see it before because I didn't have anything attached to stderr 
[08:47:12] <Aetherspawn_BNC> dbaupp: http://hpaste.org/90046
[08:47:49] <Aetherspawn_BNC> looks like the runtime needs booting.
[08:49:19] <dbaupp> Aetherspawn_BNC: yeah, especially because io (incorrectly) uses @
[08:49:31] <dbaupp> (and @ requires the runtime)
[08:50:35] <Aetherspawn_BNC> using print("Hello from Rust\n") probably made all the difference, then
[08:51:23] <dbaupp> yeah, probably
[08:52:09] <dbaupp> using (e.g.) `libc::puts` might work if you do want to print stuff.
[08:54:31] *** Joins: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP)
[08:56:46] *** Joins: vmx (vmx@moz-4DAC4FDF.dip0.t-ipconnect.de)
[08:59:54] *** Joins: Perk (Flooding@moz-F2E11D2.res-cmts.sth3.ptd.net)
[08:59:59] <Perk> http://www.sendspace.com/file/7ce7pr
[09:00:01] <Perk> http://www.sendspace.com/file/7ce7pr
[09:04:25] *** Quits: cr (anonymous@moz-6AFA0729.dip0.t-ipconnect.de) (Ping timeout)
[09:05:31] *** Quits: Perk (Flooding@moz-F2E11D2.res-cmts.sth3.ptd.net) (Quit: )
[09:08:13] <cmr> Aetherspawn_BNC: https://gist.github.com/cmr/5792998 is where I'm at right now
[09:11:46] *** Joins: davbo (dave@moz-3FFA637C.oucs.ox.ac.uk)
[09:13:04] *** Joins: z0w0 (zack@FDF4EF6A.2CA5CD8.5F93A189.IP)
[09:14:22] *** Quits: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com) (Input/output error)
[09:15:25] <dbaupp> cmr: can you use cgroups for time as well?
[09:15:41] <cmr> dbaupp: not afaik... why would that make sense, though?
[09:15:42] *** Joins: mcstar (mcstar@moz-D7A16997.monradsl.monornet.hu)
[09:19:53] <cmr> dbaupp: so I could get execution time directly from the kernel instead of timing it myself, you mean?
[09:19:57] <cmr> that would be hugely useful
[09:21:27] <cmr> I don't know of anything like that. strcat might
[09:21:38] <cmr> I've learned all the cool APIs from him ;)
[09:29:46] *** Joins: orshem (orshem@3545E24A.588A166C.E3D28531.IP)
[09:33:04] *** Parts: z0w0 (zack@FDF4EF6A.2CA5CD8.5F93A189.IP) ()
[09:35:46] *** Joins: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[09:35:47] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[09:38:24] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[09:38:27] *** Joins: jdm (jdm@moz-801E009D.vlan502.asr1.cdg2.gblx.net)
[09:47:14] *** Joins: pnkfelix|rcirc (pnkfelix@moz-43495417.fbx.proxad.net)
[09:47:53] *** Quits: sankha93 (Instantbir@A6061E30.BC703A9E.8B6C1D65.IP) (Ping timeout)
[09:50:36] *** Joins: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP)
[09:54:55] *** Quits: jdm (jdm@moz-801E009D.vlan502.asr1.cdg2.gblx.net) (Ping timeout)
[09:55:17] *** Joins: sankha93 (Instantbir@9C09B5F2.75FB07DC.8B6C1D65.IP)
[09:55:22] *** Quits: mcstar (mcstar@moz-D7A16997.monradsl.monornet.hu) (Quit: mcstar)
[09:55:47] *** Joins: jdm (jdm@moz-801E009D.vlan502.asr1.cdg2.gblx.net)
[09:56:40] *** Quits: sankha93 (Instantbir@9C09B5F2.75FB07DC.8B6C1D65.IP) (Connection reset by peer)
[09:57:49] *** Joins: sankha93 (Instantbir@9C09B5F2.75FB07DC.8B6C1D65.IP)
[09:58:03] *** Joins: koomi (koomi@moz-73D7CCF0.pools.arcor-ip.net)
[09:58:29] *** Quits: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP) (Quit: bbl)
[10:04:00] *** Quits: sk (sk@61A494B3.BA40E8A.AAC02D62.IP) (Input/output error)
[10:07:19] *** Quits: heftig_ (heftig@moz-423FF5CE.dip0.t-ipconnect.de) (Ping timeout)
[10:09:15] *** Joins: heftig_ (heftig@moz-22E2F36E.dip0.t-ipconnect.de)
[10:10:05] *** Joins: tav (tav@moz-5ED3AF3C.range86-152.btcentralplus.com)
[10:11:04] *** Joins: mleise (marco@moz-3468AB5B.pools.arcor-ip.net)
[10:16:52] *** Joins: mw (mw@moz-3EE5124.adsl.highway.telekom.at)
[10:23:18] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[10:24:16] <dbaupp> cmr: yeah, something like that
[10:25:30] <cmr> I really miss rust, while writing this. Having a real compiler is so nice :)
[10:25:40] <dbaupp> something like https://github.com/BrightcoveOS/Diamond/pull/244?
[10:26:46] <cmr> https://www.kernel.org/doc/Documentation/cgroups/cpuacct.txt
[10:26:48] <cmr> Nice
[10:27:02] <cmr> dbaupp: yes, I'll definitely use that instead :)
[10:28:02] <dbaupp> measuring wall-time might be useful too, if/when rustc starts being parallel
[10:28:30] <cmr> well, cgroups account for all the children a process makes
[10:28:58] <cmr> So I *think* walltime shouldn't be needed?
[10:30:02] <dbaupp> well, I'm thinking that if rustc runs on several threads, then the cpu time might go up even though the realtime (which the user sees) goes down
[10:30:12] <cmr> ah, yes
[10:30:16] <cmr> you are right
[10:31:04] <dbaupp> cmr: that plumbum library looks amazing
[10:31:09] <cmr> dbaupp: it really is
[10:41:45] *** Quits: jdm (jdm@moz-801E009D.vlan502.asr1.cdg2.gblx.net) (Ping timeout)
[10:41:50] *** Joins: sk (sk@44FB31D1.A56C954C.78DD174B.IP)
[10:41:52] *** Joins: jdm (jdm@moz-801E009D.vlan502.asr1.cdg2.gblx.net)
[10:42:34] <cmr> this is working far better than I could have hoped.
[10:43:07] <cmr> 0.081794ms between measures of memory.stat
[10:44:19] *** Joins: true_droid (Adium@moz-123FD9B8.beck.volia.net)
[10:44:21] <orshem> rusti: fn main() {; println("test"); }
[10:44:23] -rusti- ()
[10:44:36] <orshem> is this a bug? ^
[10:44:51] <cmr> rusti: fn main() {; println("test"); } main()
[10:44:52] -rusti- test
[10:44:52] -rusti- ()
[10:44:54] <cmr> nope
[10:45:06] <dbaupp> rusti: 1;;;2
[10:45:07] <cmr> rusti doesn't drop the output into its own crate
[10:45:07] -rusti- 2
[10:45:10] <orshem> no i mean the semicolon after the first brace
[10:45:17] <orshem> should't compile
[10:45:21] <cmr> orshem: why shouldn't it?
[10:45:22] <dbaupp> orshem: a single ; is a valid statement
[10:45:28] <dbaupp> cmr: nice :D
[10:45:44] <dbaupp> cmr: (the monitoring)
[10:45:49] <orshem> oh right, i'
[10:45:56] <orshem> m still in Go mode
[10:45:57] <orshem> sorry
[10:46:00] <cmr> heh :)
[10:46:04] <orshem> i'm also learning Go
[10:50:13] *** Parts: mw (mw@moz-3EE5124.adsl.highway.telekom.at) ()
[10:50:29] *** Quits: pnkfelix|rcirc (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: rcirc on GNU Emacs 24.2.1)
[10:51:41] <cmr> dbaupp: https://gist.github.com/cmr/5792998 90% complete
[10:51:57] <Aetherspawn_BNC> do I need to compile the stdlib or something
[10:52:10] <Aetherspawn_BNC> I dont seem to have libc
[10:52:17] <cmr> /libc/ !?
[10:52:21] <Aetherspawn_BNC> yes
[10:52:30] <cmr> are you usre?
[10:52:34] <cmr> *sure
[10:52:43] <cmr> What OS are you using?
[10:52:45] <Aetherspawn_BNC> I think so. I didn't have the ffi stuff either
[10:52:48] <Aetherspawn_BNC> windows
[10:52:50] <Aetherspawn_BNC> http://puu.sh/3hFEn/a389c1171c.png
[10:52:59] <cmr> oh that libc
[10:53:05] <cmr> use std::libc;
[10:53:30] <Aetherspawn_BNC> Don't have that either.
[10:53:41] <dbaupp> maybe 'use core::libc'
[10:53:44] <cmr> and you're using master? weird
[10:53:50] <dbaupp> (are you using 0.6?)
[10:53:54] <cmr> what does rustc --version say?
[10:53:54] <Aetherspawn_BNC> Im using 0.6 off web
[10:53:57] <cmr> oh
[10:53:57] <Aetherspawn_BNC> err installer
[10:54:00] <cmr> so 0.6
[10:54:06] <cmr> you need to use core instead of std
[10:54:11] <cmr> 0.6 is before the great renaming
[10:54:37] <Aetherspawn_BNC> What was puts before the great renaming
[10:54:38] <Aetherspawn_BNC> still puts? :S
[10:54:41] <cmr> yes
[10:54:42] <dbaupp> core/std got renamed to std/extra, and it makes it very confusing :/
[10:54:44] <Aetherspawn_BNC> Maybe I should build master
[10:54:45] <cmr> it was just core/std that got renamed
[10:55:45] <Aetherspawn_BNC> is puts supposed to be in core::libc, because its an unresolved name
[10:55:55] <Aetherspawn_BNC> maybe I should look at the 0.6 docs :P sorry
[10:56:03] <cmr> I don't know what libc is like on windows.
[10:56:05] <dbaupp> Aetherspawn_BNC: it should be
[10:56:35] <Aetherspawn_BNC> oh god
[10:56:38] <dbaupp> Aetherspawn_BNC: http://static.rust-lang.org/doc/0.6/core/libc_funcs_c95_stdio___foreign_mod__.html
[10:56:44] <Aetherspawn_BNC> libc::funs::operating_system::...
[10:57:02] <kimundi> Aetherspawn_BNC: In general running master is recommended if you can do it. (Building on windows is non-trivial afaik). rusts releases are purely time-based, they offer no improvements to the git trunk.
[10:57:04] <cmr> libc reexports most things depending on your platform so you don't have to use the full path
[10:57:07] *** Joins: nano (nano@moz-972880B.superkabel.de)
[10:59:16] <Aetherspawn_BNC> Nah can't get this to work. I'll just build master after exams.
[10:59:33] <cmr> dbaupp: https://gist.github.com/cmr/3c5e4559e7441b79c860 is that acceptable? any more data you want from the build of the benchmark?
[10:59:42] <cmr> or, would be useful
[11:01:01] <dbaupp> cmr: 'elapsed' is wall/real-time, right?
[11:01:02] <cmr> the memory_stats is [time_from_start, usage_in_bytes]
[11:01:05] <cmr> dbaupp: yes
[11:01:11] <cmr> in seconds
[11:01:18] <dbaupp> cool. looks amazing
[11:01:54] <dbaupp> (one could imagine being able to click on a build, and plot a memory profile annotated with the times that each pass started. or something.)
[11:02:31] <cmr> the passes are ordered, just not after I run it through the pretty printer.
[11:02:44] <cmr> I should probably use a nested list instead of a hash
[11:02:50] <dbaupp> it'd probably better to be [[str, float]]
[11:02:52] <dbaupp> yeah
[11:03:11] <dbaupp> (also, the times should be floats ;P )
[11:03:58] <Aetherspawn_BNC> /src/libstd/libc.rs looks like a nightmare
[11:04:12] <Aetherspawn_BNC> the individual types of every systems sdk all in one place
[11:05:33] *** Joins: Masklinn (textual@1FA00B4C.FD34E2A6.38F33A39.IP)
[11:05:37] <Aetherspawn_BNC> If you don't mind me asking, why was the decision made to have the header file change what it exports based on the operating system
[11:05:50] <Aetherspawn_BNC> wouldn't this create confusion? One person imports it and gets different functions to another person.
[11:06:15] <Aetherspawn_BNC> (wouldn't it be more logical to have std::win32 or std::bsd or something like that for all this specific stuff?)
[11:06:40] <cmr> dbaupp: I was thinking about going through the memory_stats list and merging adjacent memory usages into the first timestamp with that usage. y/n?
[11:07:10] <Masklinn> is there a rust-tutor channel of some sort for dumb beginner questions?
[11:07:19] <cmr> Masklinn: you're in it :)
[11:07:19] <dbaupp> cmr: that could be done by the consumer, I guess
[11:07:52] <cmr> dbaupp: that's what I was thinking too. expose all possible data, let the user deal with it
[11:08:09] <dbaupp> Aetherspawn_BNC: well, in theory libc basically exports the same thing on each platform (i.e. it's the stuff that's in C standards.)
[11:08:22] <Masklinn> cmr: well then how do you preallocate a mutable vector to fill later? There's a way to create a sized vector with N, but that requires a constant N not some sort of parameter
[11:08:40] <dbaupp> Masklinn: do you want it filled with 0's ?
[11:09:07] <Masklinn> dbaupp: I don't really care as I'm going to overwrite everything, but 0'd work yes
[11:09:10] <dbaupp> Aetherspawn_BNC: (it does vary slightly, but not a lot.)
[11:09:12] <cmr> Masklinn: vec::with_capacity
[11:09:22] <dbaupp> Masklinn: vec::from_elem(n, 0)
[11:09:53] <Masklinn> cmr: wouldn't with_capacity do the same as create-then-reserve()?
[11:10:09] <dbaupp> Masklinn: yes, the length is still 0
[11:10:11] <cmr> Masklinn: exactly, yes.
[11:10:20] <cmr> but it won't do any other allocations
[11:10:44] <cmr> I suppose from_elem is what you want
[11:11:04] <Masklinn> dbaupp, cmr: ok, I was looking for from_elem(n, 0) to start with since it's a literal translation, after that works I'll look into making it look less horrible
[11:11:21] <Masklinn> thanks to you both, from_elem is probably what I'm looking for indeed
[11:11:31] <dbaupp> cmr: from my perspective receiving redundant data is fine, so if it makes the script simpler that's good.
[11:15:25] <cmr> dbaupp: it looks like I should be setting the RUST_BENCH environment variable for the stuff in src/test/bench?
[11:16:04] * dbaupp doesn't know
[11:16:16] <cmr> we need someone who knows what they're doing ;p
[11:16:22] *** Joins: MaikKlein (maik@moz-85462C98.dip0.t-ipconnect.de)
[11:17:17] <dbaupp> cmr: yeah, looks like it. IIRC RUST_BENCH is a "difficult parameter"
[11:17:45] <dbaupp> (i.e. RUST_BENCH existing => run them as benchmarks, rather than just rpass tests.)
[11:22:10] *** Quits: MaikKlein (maik@moz-85462C98.dip0.t-ipconnect.de) (Ping timeout)
[11:24:00] <cmr> https://gist.github.com/cmr/3c5e4559e7441b79c860 it works, yayyy
[11:24:51] <cmr> Now to make it less terribly written...
[11:28:01] <dbaupp> cmr: you could/should have the commit hash in there too ;)
[11:28:06] <cmr> oh whoops
[11:28:11] <cmr> I parsed it but forgot to include it
[11:28:16] <cmr> thanks :)
[11:28:21] <dbaupp> also, the crate name
[11:28:39] <dbaupp> (and possibly the whole command line invocation)
[11:31:00] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[11:32:35] *** Joins: MaikKlein (maik@moz-85462C98.dip0.t-ipconnect.de)
[11:33:31] <dbaupp> cmr: also, it'd be really neat if you could only run on merge commits and parse the pull request number they come from
[11:34:15] <dbaupp> cmr: (or something, not sure how you're planning to have this running.)
[11:34:46] *** wuwei is now known as wuwei|lab|afk
[11:35:11] <cmr> dbaupp: I am going to run it manually for the time being, to get a feel for the requirements
[11:36:37] *** Joins: donri (dag@moz-9BB61102.tbcn.telia.com)
[11:41:24] *** Joins: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net)
[11:41:40] *** Parts: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net) ()
[11:41:53] <dbaupp> cmr: ok, that's reasonable
[11:42:22] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[11:42:42] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[11:43:17] <Aetherspawn_BNC> most of winapi missing a design choice or something I can submit a pull request for?
[11:44:10] <dbaupp> Aetherspawn_BNC: presumably the latter
[11:44:24] <Aetherspawn_BNC> excellent
[11:44:29] <Aetherspawn_BNC> I've finally found something to hack
[11:44:39] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[11:45:39] *** Joins: pseudoku (quassel@14705EE2.877E045A.520CDC98.IP)
[11:45:47] *** Quits: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk) (Connection reset by peer)
[11:46:25] *** Joins: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk)
[11:46:58] *** Joins: dualhbridge (dad@moz-9FEE6D3B.maine.res.rr.com)
[11:49:28] *** Quits: pseudoku (quassel@14705EE2.877E045A.520CDC98.IP) (Ping timeout)
[11:50:24] *** Joins: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com)
[11:50:27] *** Joins: novabyte (Instantbir@moz-3E0F9699.cable.virginmedia.com)
[11:50:53] *** Joins: pseudoku (quassel@884DCFB1.ECC58135.520CDC98.IP)
[11:51:33] *** Joins: kyle2000 (kyle2000@6EDB4D7A.341FCD98.3031298E.IP)
[11:51:43] *** Quits: kyle2000 (kyle2000@6EDB4D7A.341FCD98.3031298E.IP) (Quit: Leaving)
[11:53:06] *** Quits: pseudoku (quassel@884DCFB1.ECC58135.520CDC98.IP) (Ping timeout)
[11:53:28] *** Quits: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP) (Ping timeout)
[11:54:53] <cmr> Aetherspawn_BNC: getting the code in std::unstable::dynamic_lib working on windows would be nice too
[11:54:59] <cmr> Also a msvc build
[11:55:05] *** Joins: pseudoku (quassel@C360F3F2.EBED1319.520CDC98.IP)
[11:55:10] <cmr> And getting the full test suite working on windows
[11:55:51] <cmr> And figuring out how to get process creation less terribly horribly slow
[11:56:02] <cmr> (windows needs lots of love)
[11:57:09] <Aetherspawn_BNC> cmr: I know a lot about winapi but I don't know much about rust itself. I can't help out with those yet, sorry :(
[11:57:21] <cmr> Aetherspawn_BNC: yet ;)
[11:58:12] <Aetherspawn_BNC> :)
[12:01:42] *** Quits: sankha93 (Instantbir@9C09B5F2.75FB07DC.8B6C1D65.IP) (Quit: Instantbird 1.4 -- http://www.instantbird.com)
[12:02:34] *** Parts: dualhbridge (dad@moz-9FEE6D3B.maine.res.rr.com) ()
[12:12:38] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[12:12:39] *** Quits: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[12:14:24] *** Joins: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP)
[12:15:55] *** Quits: pseudoku (quassel@C360F3F2.EBED1319.520CDC98.IP) (concrete.mozilla.org gravel.mozilla.org)
[12:15:55] *** Quits: novabyte (Instantbir@moz-3E0F9699.cable.virginmedia.com) (concrete.mozilla.org gravel.mozilla.org)
[12:15:55] *** Quits: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com) (concrete.mozilla.org gravel.mozilla.org)
[12:15:55] *** Quits: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk) (concrete.mozilla.org gravel.mozilla.org)
[12:15:55] *** Quits: donri (dag@moz-9BB61102.tbcn.telia.com) (concrete.mozilla.org gravel.mozilla.org)
[12:15:55] *** Quits: MaikKlein (maik@moz-85462C98.dip0.t-ipconnect.de) (concrete.mozilla.org gravel.mozilla.org)
[12:15:55] *** Quits: Masklinn (textual@1FA00B4C.FD34E2A6.38F33A39.IP) (concrete.mozilla.org gravel.mozilla.org)
[12:15:55] *** Quits: nano (nano@moz-972880B.superkabel.de) (concrete.mozilla.org gravel.mozilla.org)
[12:15:55] *** Quits: true_droid (Adium@moz-123FD9B8.beck.volia.net) (concrete.mozilla.org gravel.mozilla.org)
[12:15:55] *** Quits: jdm (jdm@moz-801E009D.vlan502.asr1.cdg2.gblx.net) (concrete.mozilla.org gravel.mozilla.org)
[12:15:55] *** Quits: sk (sk@44FB31D1.A56C954C.78DD174B.IP) (concrete.mozilla.org gravel.mozilla.org)
[12:15:55] *** Quits: mleise (marco@moz-3468AB5B.pools.arcor-ip.net) (concrete.mozilla.org gravel.mozilla.org)
[12:15:55] *** Quits: tav (tav@moz-5ED3AF3C.range86-152.btcentralplus.com) (concrete.mozilla.org gravel.mozilla.org)
[12:15:55] *** Quits: heftig_ (heftig@moz-22E2F36E.dip0.t-ipconnect.de) (concrete.mozilla.org gravel.mozilla.org)
[12:15:55] *** Quits: koomi (koomi@moz-73D7CCF0.pools.arcor-ip.net) (concrete.mozilla.org gravel.mozilla.org)
[12:15:55] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (concrete.mozilla.org gravel.mozilla.org)
[12:15:55] *** Quits: orshem (orshem@3545E24A.588A166C.E3D28531.IP) (concrete.mozilla.org gravel.mozilla.org)
[12:15:55] *** Quits: davbo (dave@moz-3FFA637C.oucs.ox.ac.uk) (concrete.mozilla.org gravel.mozilla.org)
[12:15:55] *** Quits: vmx (vmx@moz-4DAC4FDF.dip0.t-ipconnect.de) (concrete.mozilla.org gravel.mozilla.org)
[12:15:55] *** Quits: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP) (concrete.mozilla.org gravel.mozilla.org)
[12:15:55] *** Quits: EXetoC (ex@moz-C741B177.customer.t3.se) (concrete.mozilla.org gravel.mozilla.org)
[12:15:55] *** Quits: CarpNet (ac@moz-FD24B77.sohonet.co.uk) (concrete.mozilla.org gravel.mozilla.org)
[12:15:55] *** Quits: Palmik (palmik@moz-5CA3F354.pks.muni.cz) (concrete.mozilla.org gravel.mozilla.org)
[12:15:55] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (concrete.mozilla.org gravel.mozilla.org)
[12:15:55] *** Quits: ysuzuki (ysuzuki@moz-A563888C.ics.keio.ac.jp) (concrete.mozilla.org gravel.mozilla.org)
[12:15:55] *** Quits: hansjorg (hansjorg@moz-EECB5F79.static.cust.telenor.com) (concrete.mozilla.org gravel.mozilla.org)
[12:15:55] *** Quits: doener (bs@moz-AA189A5A.unitymedia.biz) (concrete.mozilla.org gravel.mozilla.org)
[12:15:55] *** Quits: fabiand (fabiand@moz-A4F8C258.adsl.alicedsl.de) (concrete.mozilla.org gravel.mozilla.org)
[12:15:55] *** Quits: SimonSapin (simon@88F51059.F3BBB17D.144F44FA.IP) (concrete.mozilla.org gravel.mozilla.org)
[12:15:55] *** Quits: victorporof (victorporo@70DEDDA.9004F55.9B1E38F4.IP) (concrete.mozilla.org gravel.mozilla.org)
[12:15:55] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (concrete.mozilla.org gravel.mozilla.org)
[12:15:55] *** Quits: idkfa (idkfa@moz-141F54A4.krasinfo.ru) (concrete.mozilla.org gravel.mozilla.org)
[12:15:55] *** Quits: noam_ (noam@F6B530A7.720527A7.416762B.IP) (concrete.mozilla.org gravel.mozilla.org)
[12:15:55] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (concrete.mozilla.org gravel.mozilla.org)
[12:15:55] *** Quits: katis (katis@40C8AF65.EFDC2270.EE6E63A5.IP) (concrete.mozilla.org gravel.mozilla.org)
[12:15:55] *** Quits: jhark (jhark@moz-B9920504.jhark.net) (concrete.mozilla.org gravel.mozilla.org)
[12:15:55] *** Quits: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP) (concrete.mozilla.org gravel.mozilla.org)
[12:15:55] *** Quits: doomlord (doomlod@moz-6651F8D4.range86-145.btcentralplus.com) (concrete.mozilla.org gravel.mozilla.org)
[12:15:55] *** Quits: jpf (jan@moz-A8C26A15.org) (concrete.mozilla.org gravel.mozilla.org)
[12:15:55] *** Quits: Flibo (Flibo@moz-40397852.org.aalto.fi) (concrete.mozilla.org gravel.mozilla.org)
[12:15:55] *** Quits: alexrp (zor@moz-180BED6.rfw.name) (concrete.mozilla.org gravel.mozilla.org)
[12:15:55] *** Quits: dbaupp (Thunderbir@moz-73E90475.lns20.syd6.internode.on.net) (concrete.mozilla.org gravel.mozilla.org)
[12:15:55] *** Quits: Boreeas (Boreeas@moz-F35C832D.boreeas.net) (concrete.mozilla.org gravel.mozilla.org)
[12:15:55] *** Quits: kimundi (kimundi@moz-77CE41FF.dip0.t-ipconnect.de) (concrete.mozilla.org gravel.mozilla.org)
[12:15:55] *** Quits: benh (ben@moz-4A0366D2.org) (concrete.mozilla.org gravel.mozilla.org)
[12:15:55] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: aatch (aatch@moz-B437F499.pocketrent.com) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: mitsuhiko (mitsuhiko-@moz-BC29B73E.srv.pocoo.org) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: paulproteus (quassel@rose.makesad.us) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: smvv (smvv@moz-A397289C.xlshosting.net) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: Aetherspawn_BNC (uid6924@moz-A588D045.irccloud.com) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: tef (tef@moz-67B68E00.printf.net) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: LimeBurst (me@247D1419.D73964AC.27A8748.IP) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: ruediger (quassel@moz-C9B8D8D0.org) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: _1126 (1126@moz-83D60E55.lileth.net) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: barosl (barosl@E287D94F.C81E10FB.7544CABF.IP) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: txdv (quassel@966F3542.3BA477DA.14C26596.IP) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: cdidd (cdidd@F902C8A9.F0A566B.62D8163C.IP) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: RMF (RMF@7CB4432F.59969257.8D19547B.IP) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: wuwei|lab|afk (wuwei@1A513F49.818D7924.FAA9ED67.IP) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: robn (robn@moz-76B0302C.static.internode.on.net) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: redline6561 (redline656@moz-714529BD.members.linode.com) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: noct (quassel@moz-BAA6B280.com) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: xenocons (otk@moz-C675529E.members.linode.com) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: mixi (mixi@moz-DBD8904A.org) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: jessicah (jessicah@moz-B8A3AE25.massey.ac.nz) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: doomlord__ (servitor@moz-6651F8D4.range86-145.btcentralplus.com) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: doomlord_ (walter@moz-6651F8D4.range86-145.btcentralplus.com) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: rfw (rfw@moz-C65A114.rfw.name) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: yong (chatzilla@74DA0C97.4E87ADC2.263D9828.IP) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: dolphinling (andrew@moz-80A1E448.uvm.edu) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: Kroisse (Kroisse@7CF4064D.E3B51CAE.ECA1BB11.IP) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: kini (kini@moz-92AA953A.members.linode.com) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: ski (md9slj@moz-4BB5E0FF.studat.chalmers.se) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: zheng_li (zheng_li@moz-D6711E9E.xenplanet.org) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: pascal (pascal@moz-3A678551.pascalj.de) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: ion (ion@heh.fi) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: jyyou (jyyou@moz-47B052FA.cs.nctu.edu.tw) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: wuehlmaus (wuehlmaus@moz-BBCFACA0.de) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: IdolfHatler (idolf@moz-4103EACC.pwnies.dk) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: gmcabrita (uid4474@moz-D8B63698.irccloud.com) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: sawrubh (uid6719@moz-D8B63698.irccloud.com) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: doy (doy@moz-5FE28A32.akrasiac.org) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: SeanTAllen_ (uid4855@moz-D8B63698.irccloud.com) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: jihyun (uid7128@moz-D8B63698.irccloud.com) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: gazoombo (uid6629@moz-D8B63698.irccloud.com) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: wycats_ (uid79@moz-C944F5EC.irccloud.com) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: geomyidae__ (uid214@moz-C944F5EC.irccloud.com) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: decoder (quassel@moz-D7023D7D.own-hero.net) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: molnarg (darkelf@moz-A80E711.clients.your-server.de) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: DasIch (dasich@moz-5EDA591.de) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: cyndis (cyndis@moz-FA10A1CD.fi) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: keruspe (keruspe@moz-F2539FEC.imagination-land.org) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: tristram (tristram@moz-C498CC41.eu) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: dju (dju@moz-83BD5EC.dmz.me) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: reyre (rick@B2D8AB09.33EE9F8A.1139E686.IP) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: andor (andor@518ECB3F.6B32A7A2.A2798B07.IP) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: jez0990 (quassel@moz-3BA8545E.kimsufi.com) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: kaeso (kaeso@moz-F21FF626.unstable.it) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: Seldaek (seld@moz-5DEA7688.ch) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: wilfred (uid159@moz-C944F5EC.irccloud.com) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: toshok (toshok@moz-67C55A1F.com) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: sfackler (sfackler@moz-316FE70F.compute-1.amazonaws.com) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: Thiez (thiez@moz-BF669398.student.utwente.nl) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: prudhvi (prudhvi@moz-154A460A.supr.io) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: flowsnake (flowsnake@moz-1918C33E.aztw.cable.virginmedia.com) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: krig (krig@A2A7CF2C.5AB9C4E2.B1C414DA.IP) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: pcdummy (quassel@moz-CF4CA865.page4me.ch) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: h3r3tic (heretic@moz-8BC3B3DB.se) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: jakubw (ubuntu@moz-D137E450.eu-west-1.compute.amazonaws.com) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: chee (chee@moz-E5A0DD8.org) (concrete.mozilla.org gravel.mozilla.org)
[12:15:56] *** Quits: Luqman (laden@moz-DCEF6040.csclub.uwaterloo.ca) (concrete.mozilla.org gravel.mozilla.org)
[12:15:57] *** Joins: jpf (jan@moz-A8C26A15.org)
[12:15:57] *** Joins: doener (bs@moz-AA189A5A.unitymedia.biz)
[12:15:57] *** Joins: jdm (jdm@moz-801E009D.vlan502.asr1.cdg2.gblx.net)
[12:15:57] *** Joins: smvv (smvv@moz-A397289C.xlshosting.net)
[12:15:58] *** Joins: pcdummy (quassel@moz-CF4CA865.page4me.ch)
[12:15:58] *** Joins: kini (kini@moz-92AA953A.members.linode.com)
[12:15:58] *** Joins: DasIch (dasich@moz-5EDA591.de)
[12:15:58] *** Joins: ski (md9slj@moz-4BB5E0FF.studat.chalmers.se)
[12:15:58] *** concrete.mozilla.org sets mode: +R 
[12:15:58] *** Joins: zheng_li (zheng_li@moz-D6711E9E.xenplanet.org)
[12:16:01] *** Joins: decoder (quassel@moz-D7023D7D.own-hero.net)
[12:16:05] *** Joins: dju (dju@moz-83BD5EC.dmz.me)
[12:16:10] *** Joins: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk)
[12:16:10] *** Joins: MaikKlein (maik@moz-85462C98.dip0.t-ipconnect.de)
[12:16:10] *** Joins: vmx (vmx@moz-4DAC4FDF.dip0.t-ipconnect.de)
[12:16:11] *** Joins: sk (sk@44FB31D1.A56C954C.78DD174B.IP)
[12:16:11] *** Joins: aatch (aatch@moz-B437F499.pocketrent.com)
[12:16:14] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[12:16:16] *** Joins: fabiand (fabiand@moz-A4F8C258.adsl.alicedsl.de)
[12:16:20] *** Quits: fabiand (fabiand@moz-A4F8C258.adsl.alicedsl.de) (concrete2.mozilla.org gravel.mozilla.org)
[12:16:20] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (concrete2.mozilla.org gravel.mozilla.org)
[12:16:35] *** Joins: heftig (heftig@moz-22E2F36E.dip0.t-ipconnect.de)
[12:16:37] *** Joins: ion (ion@heh.fi)
[12:16:50] *** Joins: doy (doy@moz-5FE28A32.akrasiac.org)
[12:16:51] *** Joins: fabiand (fabiand@moz-A4F8C258.adsl.alicedsl.de)
[12:16:51] *** Joins: reyre (rick@B2D8AB09.33EE9F8A.1139E686.IP)
[12:16:53] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[12:18:31] *** Joins: gmcabrita (uid4474@moz-D8B63698.irccloud.com)
[12:18:36] *** Quits: reyre (rick@B2D8AB09.33EE9F8A.1139E686.IP) (concrete2.mozilla.org gravel.mozilla.org)
[12:18:36] *** Quits: fabiand (fabiand@moz-A4F8C258.adsl.alicedsl.de) (concrete2.mozilla.org gravel.mozilla.org)
[12:18:36] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (concrete2.mozilla.org gravel.mozilla.org)
[12:18:36] *** Quits: doy (doy@moz-5FE28A32.akrasiac.org) (concrete2.mozilla.org gravel.mozilla.org)
[12:18:43] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[12:18:43] *** Joins: reyre (rick@B2D8AB09.33EE9F8A.1139E686.IP)
[12:18:43] *** Joins: fabiand (fabiand@moz-A4F8C258.adsl.alicedsl.de)
[12:18:43] *** Joins: doy (doy@moz-5FE28A32.akrasiac.org)
[12:20:53] *** concrete.mozilla.org sets mode: -R 
[12:20:55] *** Joins: chee (chee@moz-E5A0DD8.org)
[12:20:56] *** Joins: EXetoC (ex@moz-C741B177.customer.t3.se)
[12:20:56] *** Joins: kimundi (kimundi@moz-77CE41FF.dip0.t-ipconnect.de)
[12:20:57] *** Joins: wuehlmaus (wuehlmaus@moz-BBCFACA0.de)
[12:20:57] *** Joins: Thiez (thiez@moz-BF669398.student.utwente.nl)
[12:20:57] *** Joins: dolphinling (andrew@moz-80A1E448.uvm.edu)
[12:20:57] *** Joins: Flibo (Flibo@moz-40397852.org.aalto.fi)
[12:20:58] *** Joins: Boreeas (Boreeas@moz-F35C832D.boreeas.net)
[12:20:58] *** Joins: alexrp (zor@moz-180BED6.rfw.name)
[12:20:58] *** gravel.mozilla.org sets mode: +R 
[12:21:03] *** Joins: Luqman (laden@moz-DCEF6040.csclub.uwaterloo.ca)
[12:21:33] *** Joins: robn (robn@moz-76B0302C.static.internode.on.net)
[12:25:56] *** gravel.mozilla.org sets mode: -R 
[12:26:11] *** Joins: mitsuhiko (mitsuhiko-@moz-BC29B73E.srv.pocoo.org)
[12:26:15] *** Joins: nano (nano@moz-972880B.superkabel.de)
[12:26:15] *** Joins: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr)
[12:29:24] *** Joins: cyndis (cyndis@moz-FA10A1CD.fi)
[12:30:03] *** Joins: wycats_ (uid79@moz-C944F5EC.irccloud.com)
[12:31:14] *** Joins: kaeso (kaeso@moz-F21FF626.unstable.it)
[12:32:16] *** Joins: pseudoku (quassel@4E1FF344.7D855C24.520CDC98.IP)
[12:32:23] *** Joins: davbo (dave@moz-3FFA637C.oucs.ox.ac.uk)
[12:32:29] *** Parts: davbo (dave@moz-3FFA637C.oucs.ox.ac.uk) (Leaving)
[12:32:51] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[12:33:09] <nano> who put that stupid +r on this channel?
[12:33:17] <nano> I liked to read along
[12:33:22] <nano> and now I have to register to do that
[12:34:28] *** Joins: maxli (maxli@F2D29657.F60B0462.67AC9B1.IP)
[12:34:40] *** Quits: pseudoku (quassel@4E1FF344.7D855C24.520CDC98.IP) (Connection reset by peer)
[12:34:57] <jdm> nano: I think it was a global thing by the irc server during the big netsplit burst
[12:34:58] *** Quits: jfbk (user@moz-EEA9CFB3.nyc.res.rr.com) (Ping timeout)
[12:35:04] *** Joins: Aetherspawn_BNC (uid6924@moz-A588D045.irccloud.com)
[12:35:05] <nano> oic sry then
[12:35:15] <Aetherspawn_BNC> "You need a registered nick" what
[12:39:28] *** Joins: pyrac (pyrac@moz-C6037E0A.ghst.net)
[12:39:51] *** Joins: JesseH (JesseH@moz-2E766C3E.mc.at.cox.net)
[12:39:55] *** Quits: JesseH (JesseH@moz-2E766C3E.mc.at.cox.net) (Quit: JesseH)
[12:40:07] *** Joins: gazoombo (uid6629@moz-D8B63698.irccloud.com)
[12:40:07] <bstrie> Aetherspawn_BNC: netsplit thing
[12:41:18] <mark_edward> bstrie: how could I help a specific area of Rust development?
[12:41:35] <bstrie> mark_edward: do you have any interests?
[12:42:04] *** Joins: pseudoku (quassel@86B88810.5A45064.520CDC98.IP)
[12:42:07] <mark_edward> like, I'm not a Rust guru, but I found out the other day that a lot of stuff with Trait inheritance is broken
[12:42:22] <mark_edward> and that seems to be a major language feature, and one that's pretty usefull
[12:42:27] <mark_edward> so I'd like to work on it
[12:42:42] *** Quits: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP) (Ping timeout)
[12:42:56] <Aetherspawn_BNC> mark_edward: you could always write documentation or improve existing docs
[12:43:05] <Aetherspawn_BNC> I'm finding the lack of documentation really hard..
[12:43:14] *** Quits: doener (bs@moz-AA189A5A.unitymedia.biz) (Ping timeout)
[12:43:33] <Aetherspawn_BNC> You only have to be good at english to write docs :P
[12:43:53] <mark_edward> true. I will look into that
[12:44:24] *** Joins: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP)
[12:44:25] <bstrie> mark_edward: well there's this list: https://github.com/mozilla/rust/issues?labels=E-easy for all issues marked as "easy". there's also https://github.com/mozilla/rust/issues?labels=A-traits for issues related to traits
[12:44:58] *** Joins: samnardoni (Mibbit@F889EF52.38924046.A86B7D63.IP)
[12:45:09] *** Joins: geomyidae__ (uid214@moz-C944F5EC.irccloud.com)
[12:45:10] <mark_edward> thanks for the pointers
[12:45:14] <cmr> You'll notice they're mutually exclusive ;)
[12:45:25] <mark_edward> yeah, i saw :/
[12:45:41] <mark_edward> seeya
[12:45:43] *** mark_edward is now known as mark_edward|away
[12:45:48] *** Quits: pseudoku (quassel@86B88810.5A45064.520CDC98.IP) (Ping timeout)
[12:46:18] *** Quits: mark_edward|away (quassel@moz-4B552CB8.dynamic.utc.edu) (Client exited)
[12:47:37] *** Joins: doener (bs@moz-ABF3CB03.fixip.bitel.net)
[12:49:18] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[12:49:41] *** Joins: cr (anonymous@moz-C4FDC.dip0.t-ipconnect.de)
[12:49:42] <kimundi> Aetherspawn_BNC: The problem is that some of things can't be properly documented atm becazse rustdoc has a lot of bugs/problems itself
[12:49:58] *** Joins: toshok (toshok@moz-67C55A1F.com)
[12:50:33] <cmr> rustdoc is next on my list of things to do
[12:50:35] <kimundi> For example it's not yet possible to document macros in rust code
[12:51:25] *** Quits: cr (anonymous@moz-C4FDC.dip0.t-ipconnect.de) (sand.mozilla.org gravel.mozilla.org)
[12:51:25] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (sand.mozilla.org gravel.mozilla.org)
[12:51:25] *** Quits: doener (bs@moz-ABF3CB03.fixip.bitel.net) (sand.mozilla.org gravel.mozilla.org)
[12:51:25] *** Quits: geomyidae__ (uid214@moz-C944F5EC.irccloud.com) (sand.mozilla.org gravel.mozilla.org)
[12:51:25] *** Quits: samnardoni (Mibbit@F889EF52.38924046.A86B7D63.IP) (sand.mozilla.org gravel.mozilla.org)
[12:51:25] *** Quits: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP) (sand.mozilla.org gravel.mozilla.org)
[12:51:25] *** Quits: gazoombo (uid6629@moz-D8B63698.irccloud.com) (sand.mozilla.org gravel.mozilla.org)
[12:51:25] *** Quits: pyrac (pyrac@moz-C6037E0A.ghst.net) (sand.mozilla.org gravel.mozilla.org)
[12:51:25] *** Quits: wycats_ (uid79@moz-C944F5EC.irccloud.com) (sand.mozilla.org gravel.mozilla.org)
[12:51:25] *** Quits: alexrp (zor@moz-180BED6.rfw.name) (sand.mozilla.org gravel.mozilla.org)
[12:51:25] *** Quits: Flibo (Flibo@moz-40397852.org.aalto.fi) (sand.mozilla.org gravel.mozilla.org)
[12:51:25] *** Quits: Thiez (thiez@moz-BF669398.student.utwente.nl) (sand.mozilla.org gravel.mozilla.org)
[12:51:25] *** Quits: wuehlmaus (wuehlmaus@moz-BBCFACA0.de) (sand.mozilla.org gravel.mozilla.org)
[12:51:25] *** Quits: EXetoC (ex@moz-C741B177.customer.t3.se) (sand.mozilla.org gravel.mozilla.org)
[12:51:25] *** Quits: Aetherspawn_BNC (uid6924@moz-A588D045.irccloud.com) (sand.mozilla.org gravel.mozilla.org)
[12:51:25] *** Quits: toshok (toshok@moz-67C55A1F.com) (sand.mozilla.org gravel.mozilla.org)
[12:51:25] *** Quits: Boreeas (Boreeas@moz-F35C832D.boreeas.net) (sand.mozilla.org gravel.mozilla.org)
[12:51:25] *** Quits: reyre (rick@B2D8AB09.33EE9F8A.1139E686.IP) (sand.mozilla.org gravel.mozilla.org)
[12:51:25] *** Quits: fabiand (fabiand@moz-A4F8C258.adsl.alicedsl.de) (sand.mozilla.org gravel.mozilla.org)
[12:51:25] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (sand.mozilla.org gravel.mozilla.org)
[12:51:25] *** Quits: doy (doy@moz-5FE28A32.akrasiac.org) (sand.mozilla.org gravel.mozilla.org)
[12:51:25] *** Joins: noct (quassel@moz-BAA6B280.com)
[12:51:26] *** Joins: toshok (toshok@moz-67C55A1F.com)
[12:51:26] *** Joins: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net)
[12:51:27] *** Joins: paulproteus (quassel@moz-E86A3B42.makesad.us)
[12:51:35] *** Joins: doy (doy@moz-5FE28A32.akrasiac.org)
[12:51:36] *** Joins: fabiand (fabiand@moz-A4F8C258.adsl.alicedsl.de)
[12:51:41] *** Joins: reyre (rick@B2D8AB09.33EE9F8A.1139E686.IP)
[12:52:01] *** Joins: Kroisse (Kroisse@7CF4064D.E3B51CAE.ECA1BB11.IP)
[12:54:12] *** Joins: donri (dag@moz-9BB61102.tbcn.telia.com)
[12:54:29] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[12:54:31] *** Joins: Aetherspawn (Aetherspaw@moz-8811D9F0.static.tpgi.com.au)
[12:54:43] <Aetherspawn> mother of netsplits and z-lines
[12:54:54] <Aetherspawn> it banned by bnc
[12:54:57] *** Joins: pyrac (pyrac@moz-C6037E0A.ghst.net)
[12:55:20] *** Joins: Aetherspawn_BNC (uid6924@moz-A588D045.irccloud.com)
[12:55:47] *** Joins: snearch (snearch@moz-896B448A.pool.mediaways.net)
[12:56:26] *** Joins: alexrp (zor@moz-180BED6.rfw.name)
[12:56:27] *** Joins: Thiez (thiez@moz-BF669398.student.utwente.nl)
[12:56:28] *** Joins: EXetoC (ex@moz-C741B177.customer.t3.se)
[12:56:33] *** Joins: wuehlmaus (wuehlmaus@moz-BBCFACA0.de)
[12:56:38] *** Joins: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP)
[12:57:24] *** Joins: dbaupp (Thunderbir@moz-73E90475.lns20.syd6.internode.on.net)
[12:57:29] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[12:57:37] *** Joins: doener (bs@moz-AA189A5A.unitymedia.biz)
[12:57:42] *** Joins: pnkfelix|rcirc (pnkfelix@moz-43495417.fbx.proxad.net)
[12:57:59] *** Joins: Boreeas (Boreeas@moz-F35C832D.boreeas.net)
[12:58:39] *** Joins: cr (anonymous@moz-C4FDC.dip0.t-ipconnect.de)
[12:58:39] *** Joins: judder (maradukewa@D90735BE.FBAA5D2F.78E362FE.IP)
[12:59:25] *** Joins: SimonSapin (simon@88F51059.F3BBB17D.144F44FA.IP)
[12:59:55] <dbaupp> kimundi: that's not a problem with rustdoc, just the representation of macros in the AST
[13:00:15] <dbaupp> (specifically, they basically aren't represented in it at all.)
[13:00:28] *** Quits: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP) (Ping timeout)
[13:00:35] <kimundi> true, but rustdoc would need to support it if the ast is fixed, so it's kinda both
[13:00:51] *** Joins: victorporof (victorporo@70DEDDA.9004F55.9B1E38F4.IP)
[13:00:54] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[13:01:07] *** Joins: pseudoku (quassel@2FA65F4E.1F20C5D9.520CDC98.IP)
[13:01:21] <kimundi> Would it make sense to have a dummy 'macro expanded here' AST node?
[13:01:28] *** Joins: Flibo (Flibo@moz-40397852.org.aalto.fi)
[13:01:45] <Aetherspawn_BNC> (can't everything macros do be expressed easier with templates?)
[13:01:46] <dbaupp> not sure... it'd certainly make sense to have a `macro_rules!` item node.
[13:01:57] *** Joins: eagen (eagen@8737942B.7A99C13A.B7961A98.IP)
[13:02:10] <dbaupp> Aetherspawn_BNC: C++ templates?
[13:02:21] <Aetherspawn_BNC> rust generics
[13:02:29] <dbaupp> no
[13:02:37] *** Quits: pseudoku (quassel@2FA65F4E.1F20C5D9.520CDC98.IP) (No route to host)
[13:02:46] <dbaupp> http://www.reddit.com/r/rust/comments/1gag3t/list_comprehensions_in_rust_iterator/
[13:03:22] <dbaupp> macros allow for "arbitrary" syntax manipulation
[13:03:32] <kimundi> rusti: fmt!("%? %s %d", "typechecks", "typechecks", "compile fail") // <- Not expressible with generics
[13:03:32] -rusti- <anon>:11:0: 11:1 error: file ended with unbalanced delimiters
[13:03:32] -rusti- <anon>:11 }
[13:03:32] -rusti-           ^
[13:03:33] -rusti- application terminated with error code 101
[13:03:44] <kimundi> rusti: fmt!("%? %s %d", "typechecks", "typechecks", "compile fail")
[13:03:46] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/DjKB
[13:05:09] <Aetherspawn_BNC> Thats cool
[13:05:27] *** Joins: pseudoku (quassel@2F28F008.FC85E14A.520CDC98.IP)
[13:05:28] *** Joins: wycats_ (uid79@moz-C944F5EC.irccloud.com)
[13:05:29] <kimundi> Aetherspawn_BNC: The problem is that they _just_ allow for arbitrary syntax manipulation, to the point that after they are expanded they don't really exist anymore for rustc, wich makes it hard to attach documentation to it, or have importable/exportable macros etc
[13:06:00] <kimundi> (okay that explanaition is kinda completly wrong but whatever)
[13:06:22] <Aetherspawn_BNC> (understood the point)
[13:06:39] <pnkfelix|rcirc> Aetherspawn_BNC: maybe better example: you cannot do syntax transformations that depend on e.g. outcomes of type inference.
[13:07:42] *** Quits: pseudoku (quassel@2F28F008.FC85E14A.520CDC98.IP) (Ping timeout)
[13:08:25] *** Quits: wycats_ (uid79@moz-C944F5EC.irccloud.com) (concrete2.mozilla.org gravel.mozilla.org)
[13:08:25] *** Quits: eagen (eagen@8737942B.7A99C13A.B7961A98.IP) (concrete2.mozilla.org gravel.mozilla.org)
[13:08:25] *** Quits: Flibo (Flibo@moz-40397852.org.aalto.fi) (concrete2.mozilla.org gravel.mozilla.org)
[13:08:25] *** Quits: victorporof (victorporo@70DEDDA.9004F55.9B1E38F4.IP) (concrete2.mozilla.org gravel.mozilla.org)
[13:08:25] *** Quits: SimonSapin (simon@88F51059.F3BBB17D.144F44FA.IP) (concrete2.mozilla.org gravel.mozilla.org)
[13:08:25] *** Quits: judder (maradukewa@D90735BE.FBAA5D2F.78E362FE.IP) (concrete2.mozilla.org gravel.mozilla.org)
[13:08:25] *** Quits: pnkfelix|rcirc (pnkfelix@moz-43495417.fbx.proxad.net) (concrete2.mozilla.org gravel.mozilla.org)
[13:08:25] *** Quits: Boreeas (Boreeas@moz-F35C832D.boreeas.net) (concrete2.mozilla.org gravel.mozilla.org)
[13:08:25] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (concrete2.mozilla.org gravel.mozilla.org)
[13:08:35] *** Joins: eagen (eagen@8737942B.7A99C13A.B7961A98.IP)
[13:08:39] <dbaupp> pnkfelix|rcirc: my github feed says you "@bors: retry"'d something, but bors doesn't seem to have picked it up
[13:09:12] *** Quits: dbaupp (Thunderbir@moz-73E90475.lns20.syd6.internode.on.net) (Quit: dbaupp)
[13:10:15] *** Joins: judder (maradukewa@D90735BE.FBAA5D2F.78E362FE.IP)
[13:10:56] *** Joins: wycats_ (uid79@moz-C944F5EC.irccloud.com)
[13:11:02] *** Joins: SimonSapin (simon@88F51059.F3BBB17D.144F44FA.IP)
[13:11:48] *** Joins: samnardoni (Mibbit@F889EF52.38924046.A86B7D63.IP)
[13:13:26] *** Joins: Flibo (Flibo@moz-40397852.org.aalto.fi)
[13:13:41] *** Joins: dbaupp (Thunderbir@moz-73E90475.lns20.syd6.internode.on.net)
[13:17:18] <MaikKlein> opengl related: sepcular doesn't make too much sense in geraud shading right? 
[13:18:53] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[13:19:07] *** Joins: Sodel_the_V (user@moz-853663E1.va.shawcable.net)
[13:19:41] *** Joins: pseudoku (quassel@33DFDD25.44AA51CF.520CDC98.IP)
[13:19:49] *** Joins: sw17ch (sw17ch@moz-39D8564F.wndsny.tds.net)
[13:19:52] *** Joins: zxcdw (r-a@31A5D8CB.B543C4DE.3933CC16.IP)
[13:20:31] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Textual IRC Client: www.textualapp.com)
[13:20:32] *** Joins: gazoombo (uid6629@moz-D8B63698.irccloud.com)
[13:20:45] *** Joins: saml (sam@moz-14C16814.cst.lightpath.net)
[13:21:56] *** Quits: pseudoku (quassel@33DFDD25.44AA51CF.520CDC98.IP) (Ping timeout)
[13:23:54] *** Joins: pseudoku (quassel@4DC0B6C0.A6304B3.520CDC98.IP)
[13:24:05] *** Joins: anri (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net)
[13:25:14] *** Quits: sk (sk@44FB31D1.A56C954C.78DD174B.IP) (Ping timeout)
[13:25:33] *** Joins: geomyidae__ (uid214@moz-C944F5EC.irccloud.com)
[13:26:33] <samnardoni> how could I call a windows API from rust? (e.g. FindWindow())
[13:26:46] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[13:27:42] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[13:27:53] <dbaupp> samnardoni: for the moment, you have to load the function yourself via an extern {} block
[13:27:59] <dbaupp> samnardoni: e.g. https://github.com/mozilla/rust/blob/master/src/libstd/unstable/dynamic_lib.rs#L192
[13:28:14] <dbaupp> (I'm not actually sure that code works, so you may need to modify...)
[13:28:31] *** Joins: Boreeas (Boreeas@moz-F35C832D.boreeas.net)
[13:28:49] *** Joins: Blei (philipp@moz-96D25F7A.cust.bluewin.ch)
[13:29:04] *** Joins: sk (sk@44FB31D1.A56C954C.78DD174B.IP)
[13:30:42] *** Joins: rfw (rfw@moz-C65A114.rfw.name)
[13:31:50] *** Quits: pyrac (pyrac@moz-C6037E0A.ghst.net) (Quit: pyrac)
[13:32:00] <kimundi> r? https://github.com/mozilla/rust/pull/7199
[13:34:47] <samnardoni> dbaupp: sweet, thanks :)
[13:36:24] *** Quits: Nisstyre (wes@moz-FD86289.netflash.net) (Quit: Leaving)
[13:36:30] <dbaupp> samnardoni: np (if you happen to feel like testing/fixing that dynamic_lib code, that'd be nice :) heh)
[13:36:56] *** Quits: pseudoku (quassel@4DC0B6C0.A6304B3.520CDC98.IP) (Connection reset by peer)
[13:36:58] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[13:37:16] <cmr> when I tested it it wouldn't link
[13:37:25] <cmr> I thought it was disabled, did someone else already fix it?
[13:37:41] <dbaupp> cmr: it is disabled, isn't it?
[13:38:06] *** Quits: MaikKlein (maik@moz-85462C98.dip0.t-ipconnect.de) (Client exited)
[13:38:24] <dbaupp> cmr: yeah, it's cfg'd out on windows in unstable/mod.rs
[13:38:25] <cmr> oh it's not included in mod.rs
[13:38:28] <cmr> yeah
[13:38:56] <dbaupp> samnardoni, cmr: actually, scratch that https://github.com/mozilla/rust/pull/7131
[13:38:56] <Blei> (also, i fixed it somewhat, but that didn't get pulled yet)
[13:39:13] <dbaupp> Blei: "somewhat"?
[13:39:17] <Blei> at least it links now, and can retrieve function pointers in external dlls
[13:39:39] <Blei> calling those function pointers doesn't work, but i suspect that's because of unrelated bugs
[13:40:14] <Luqman> cmr: the reason it might not have linked is because LoadLibrary is actually a macro for either LoadLibraryW (Unicode) or LoadLibraryA (ANSI)
[13:40:26] <Blei> exactly
[13:40:48] <Blei> also, filenames have to be utf16
[13:41:10] <dbaupp> Blei: also, why is using Path "fixed"? it seems silly (& annoying) to require an allocation in such a low level function
[13:41:11] <Aetherspawn_BNC> lol wonderful
[13:41:16] *** Joins: pseudoku (quassel@BF041DAF.95F86AD9.520CDC98.IP)
[13:41:35] <Aetherspawn_BNC> I suck at git so hard. Anyway, adios.
[13:42:04] <Blei> dbaupp: it already used a path before, but i had to convert the string to utf16, for this i needed access to the original path string
[13:42:20] <Blei> and graydon objected to that, and wanted me to pass the path itself instead
[13:42:33] <dbaupp> oh :(
[13:42:40] *** Joins: victorporof (victorporo@70DEDDA.9004F55.9B1E38F4.IP)
[13:43:12] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Ping timeout)
[13:43:30] <cmr> There should be a function in path for getting a raw buffer. on windows the buffer would be utf-16, elsewhere it would be just bytes.
[13:43:45] <cmr> (which would be used instead of to_str() in that function)
[13:44:09] *** Quits: pseudoku (quassel@BF041DAF.95F86AD9.520CDC98.IP) (Ping timeout)
[13:44:35] <dbaupp> cmr: file a bug (and/or implement it? ;) )
[13:45:01] <cmr> so the idea isn't crazy? :)
[13:45:13] *** Joins: pnkfelix|rcirc (pnkfelix@moz-43495417.fbx.proxad.net)
[13:45:31] <dbaupp> it seems very reasonable, given it neatly papers over platform differences
[13:46:00] *** Joins: pseudoku (quassel@35246F0C.BADE7F43.520CDC98.IP)
[13:46:10] <pnkfelix|rcirc> dbaupp: Yeah I am not clear on "which" commit I am supposed to do @bors retry.
[13:46:39] <dbaupp> pnkfelix|rcirc: I've go no idea either
[13:46:44] <dbaupp> *got
[13:46:51] <pnkfelix|rcirc> dbaupp: I was trying to do it on commit where bors was logging its own failure, but maybe I am supposed to do it on the commit in your repo where the original R+ was placed.
[13:47:26] <dbaupp> (it's not my pr) yeah, I guess that's the other thing to try
[13:47:46] <cmr> dbaupp: https://github.com/mozilla/rust/issues/7201 did I misword/forget anything?
[13:47:47] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[13:48:28] <dbaupp> cmr: s/would/could/
[13:48:43] <cmr> so close! thanks :)
[13:49:27] *** Joins: jedestep (jedestep@34641662.FB4DE631.66C78B76.IP)
[13:49:47] <dbaupp> cmr: since the internal representation of Path is ~[~str] of the components, so it could possibly not allocate if it had 0/1 components, but in any other case it has to.
[13:50:12] *** Quits: pseudoku (quassel@35246F0C.BADE7F43.520CDC98.IP) (Ping timeout)
[13:50:12] <Luqman> pnkfelix|rcirc: yep, @bors: retry goes on the same commit with the r+
[13:50:14] *** Joins: jesseray (Mibbit@moz-4F8B8190.dynamic.ip.windstream.net)
[13:50:53] <pnkfelix> Luqman: yeah I guess I will try that then.
[13:51:03] <cmr> dbaupp: aw, darn :(
[13:51:29] <dbaupp> cmr: yeah
[13:52:24] <dbaupp> just thinking about it, using ~str is possibly incorrect... are file paths always utf8 encoded?
[13:52:44] <cmr> no, especially not on windows, and definitely not on unix
[13:52:55] <cmr> as long as it's going to be a data structure of components it should be a... trie? rope?
[13:53:24] *** Joins: jyyou (jyyou@moz-47B052FA.cs.nctu.edu.tw)
[13:53:29] * dbaupp shrugs
[13:53:54] *** Joins: pseudoku (quassel@89E8D6CE.F976102B.520CDC98.IP)
[13:54:15] *** Joins: hansjorg (hansjorg@moz-EECB5F79.static.cust.telenor.com)
[13:54:25] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[13:54:25] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/ydUV3w
[13:54:25] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[13:54:28] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[13:54:28] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/ZLfvGg
[13:54:28] <ghrust> 13rust/06auto 1493156ab 15Brian Anderson: std::rt: Reduce the delay on a timer test. Slow
[13:54:28] <ghrust> 13rust/06auto 146fbd538 15bors: auto merge of #7195 : brson/rust/timertest, r=bstrie
[13:54:28] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[13:54:40] <dbaupp> cmr: file another bug?
[13:55:00] <jedestep> is master build able right now?
[13:55:27] <cmr> jedestep: should be
[13:55:29] <pnkfelix> dbaupp: I cannot find the thread that I had put the @bors: retry on; can you send me a link to the page?
[13:55:34] <dbaupp> jedestep: on some platforms, yes. on others, if you're lucky. (and possibly no, on others)
[13:55:51] <dbaupp> pnkfelix: no idea sorry... not my pull request :(
[13:56:04] <pnkfelix> dbaupp: oh I thought it was, sorry
[13:56:21] <dbaupp> pnkfelix: found it anyway https://github.com/mozilla/rust/pull/7174 ;)
[13:57:08] <dbaupp> pnkfelix: (bors links to the original commit in one of its comments)
[13:57:34] <pnkfelix> dbaupp: thx
[13:59:28] *** Joins: Jesin (Jessin_@moz-3AD6F09F.res.lehigh.edu)
[13:59:34] <jesseray> I learned last night that pattern matching works with ranges of unicode characters. For example: '\u0000'..'\u001f' | '\u007f'..'\u009f' will match all unicode control characters. Now I am curious: can pattern matching work with more than one character at a time?
[13:59:49] <bstrie> what do you mean?
[14:00:44] <jesseray> In Haskell, one can write code like collapseSpace (' ':' ':xs) = collapseSpace (' ':xs). Can similar code be written in Rust?
[14:01:07] *** Quits: pseudoku (quassel@89E8D6CE.F976102B.520CDC98.IP) (Ping timeout)
[14:01:23] <bstrie> you'll have to ask someone familiar with haskell :)
[14:01:30] *** kimundi is now known as zz_kimundi
[14:01:35] *** Quits: sw17ch (sw17ch@moz-39D8564F.wndsny.tds.net) (Quit: sw17ch)
[14:01:40] <bstrie> I'm still not sure what you mean by "more than one character at a time"
[14:01:56] <dbaupp> rusti: match ('a', 'b') { ('a' .. 'z', 'a' .. 'z') => true,  _ => false }
[14:01:58] -rusti- true
[14:02:04] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Ping timeout)
[14:02:11] <bstrie> ah I see
[14:02:30] <bstrie> yes, hereabouts we just match on a tuple :)
[14:02:33] *** Joins: sw17ch (sw17ch@moz-39D8564F.wndsny.tds.net)
[14:02:38] <jesseray> That makes sense.
[14:02:54] <jesseray> Haskell is a bit more direct, so Rust left me confused =P
[14:03:20] <jesseray> I am learning Rust, so I thought it would be fun to rewrite https://github.com/raysohn/hcssmin/blob/master/hcssmin.hs
[14:03:21] <erickt> rusti: match ~['a', 'b', 'c'] { ['a', 'b', ..x] => x }
[14:03:22] -rusti- <anon>:9:15: 9:62 error: non-exhaustive patterns: vectors of length 0 not covered
[14:03:23] -rusti- <anon>:9     let r = {  match ~['a', 'b', 'c'] { ['a', 'b', ..x] => x } };
[14:03:23] -rusti-                         ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[14:03:23] -rusti- error: aborting due to previous error
[14:03:23] -rusti- application terminated with error code 101
[14:03:29] <dbaupp> jesseray: "direct"?
[14:03:48] <bstrie> erickt: there's a bug to match on fixed-length vectors
[14:04:03] <bstrie> rather, to make that sort of pattern irrefutable on fixed-length vectors
[14:04:13] <erickt> rusti: match ~['a', 'b', 'c'] { ['a', 'b', ..x] => x, _ => fail!() }
[14:04:15] <dbaupp> bstrie: that rustc complaint is valid, the ~[] isn't fixed-length
[14:04:15] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/fgDL
[14:04:15] <jesseray> In Haskell, pattern matching does not depend on having a fixed length tuple. You can be rather imaginative in the way you use it. See the code I linked to, for example.
[14:04:18] <erickt> bstrie: really?t that's sad
[14:04:45] <dbaupp> jesseray: yeah, you can use vectors like erickt is demonstrating
[14:04:51] <dbaupp>  /attempting to
[14:04:55] <erickt> hehe
[14:04:57] *** Joins: pseudoku (quassel@9E57AB92.D4752544.520CDC98.IP)
[14:05:07] *** Joins: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com)
[14:05:18] <bstrie> erickt: we're lucky to have vector-matching at all, it just came out of the blue from a drive-by committer one day
[14:05:34] <erickt> yeah it was a great commit
[14:05:46] *** Joins: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com)
[14:06:45] *** Quits: pseudoku (quassel@9E57AB92.D4752544.520CDC98.IP) (Ping timeout)
[14:06:58] <dbaupp> rusti: match ~['{', ' ', 'x'] { ['{', ' ', .. rest] => ~['{'] + rest, ['(', ' ', .. rest] => ~['('] + rest, other => other }
[14:06:59] -rusti- ~['{', 'x']
[14:07:14] <jesseray> I tried learning Haskell, but it proved to be too much for me to wrap my mind around. Pattern matching was about the only thing I actually wanted from it. Rust matches my desires much better =)
[14:07:19] <dbaupp> rusti: match ~['{', 'y', 'x'] { ['{', ' ', .. rest] => ~['{'] + rest, ['(', ' ', .. rest] => ~['('] + rest, other => other }
[14:07:20] -rusti- ~['{', 'y', 'x']
[14:08:13] *** Joins: mib_x9edzl (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP)
[14:09:11] <cmr> It would be really nice to have patterns within patterns
[14:09:37] *** Joins: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP)
[14:09:43] <cmr> eg, [c@('{'|'('), ' ', ..rest] => ~[c] + rest
[14:09:44] <sw17ch> jesseray: i might have missed some context, but the pattern matching in the code you linked to isn't matching on tuples (I'm very familiar with Haskell -- learning Rust)
[14:09:51] <cmr> not sure its even possible though
[14:09:51] *** Quits: snearch (snearch@moz-896B448A.pool.mediaways.net) (Quit: Verlassend)
[14:10:42] <sw17ch> jesseray: matching on tuples much always match on all cells in the tuple -- some cells can be ignored, but a match on a (x,y) won't work in any way on a match for (x,y,z). Furthermore, there's not a generic way to match on only the first cell for an n-dimensional tuple.
[14:10:46] <dbaupp> rusti: (match ~['a', 'b'] { ['a' .. 'z', .. _] => true, _ => false }, match ~['a', 'b'] { ['a' | 'z', .. _] => true, _ => false })
[14:10:47] -rusti- line longer than 150 columns, pastebinned: http://sprunge.us/GMQA
[14:10:47] <jesseray> sw17ch, that was what I was pointing out. You can have one line of pattern matching match against 3 characters, the next line 4 chars, the next line 2, etc. It does not depend on fixed-length tuples. Haskell has very flexible pattern matching.
[14:10:49] *** Joins: pseudoku (quassel@15375325.3A10D6A6.520CDC98.IP)
[14:11:09] <sw17ch> jesseray: but that's matching on *lists* -- it's an important distinction in Haskell.
[14:11:13] <dbaupp> rusti: match ~['a', 'b'] { ['a' .. 'z', .. _] => true, _ => false }
[14:11:15] -rusti- true
[14:11:23] <dbaupp> cmr: it seems to be partially possible
[14:11:34] <jesseray> sw17ch, when I mentioned tuples, I was referring to some Rust code that was posted here.
[14:11:35] <dbaupp> cmr: but not *totally* possible :(
[14:11:44] <jesseray> The fixed length tuple solution did not match my use-case.
[14:11:46] <sw17ch> jesseray: that's likely the context i was missing
[14:11:49] *** Quits: arink (arink@moz-39BF9408.hsd1.or.comcast.net) (Ping timeout)
[14:11:52] <jesseray> The vector solution seems good.
[14:12:40] <jesseray> match ~['a', 'b', 'c'] { ['a', 'b', ..x] => x, _ => fail!() }
[14:12:53] <jesseray> Would that match ~['a','b','c','d','e']?
[14:13:14] <dbaupp> jesseray: just a warning, vectors and (linked-)lists have very different performance characteristics for this task
[14:13:17] <dbaupp> and yes
[14:13:38] <dbaupp> x would be a slice to `&['c', 'd', 'e']`
[14:14:12] <cmr> rusti: match ~['a', 'b', 'c', 'd', 'e'] {['a', 'b', ..x] => x, _ => fail!() }
[14:14:13] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/JEQI
[14:14:28] <cmr> rusti: match ~['a', 'b', 'c', 'd', 'e'] {['a', 'b', ..x] => println(fmt!("%?", x)), _ => fail!() }
[14:14:29] <jesseray> That's exactly what I wanted.
[14:14:29] -rusti- &['c', 'd', 'e']
[14:14:29] -rusti- ()
[14:14:44] <jesseray> A recursive space-collapsing function should be fairly straight-forward using the vector approach.
[14:15:05] *** Quits: pseudoku (quassel@15375325.3A10D6A6.520CDC98.IP) (Ping timeout)
[14:15:06] <bstrie> jesseray: re: matching against four characters then three characters then two characters, what about `match (1, 2, 3, 4) { (1, 2, 3, 4) => ..., (1, 2, _, _) => ..., (1, 2, 3, _) => ... }` ?
[14:15:11] <jesseray> Then agian, maybe I should just loop... since this isn't Haskell =P
[14:15:38] <cmr> jesseray: yeah, we don't have a sufficiently smart compiler ;)
[14:15:46] <sw17ch> cmr: yet*
[14:15:55] <cmr> yet indeed. it already does a pretty good job
[14:16:02] <sw17ch> :)
[14:16:12] <jesseray> Haskell was sufficiently smart to make me feel stupid and ineffective.
[14:16:23] <sw17ch> jesseray: nah, it's just incredibly different
[14:16:24] <jesseray> I couldn't accomplish anything with that damn language, despite my love for its pattern matching =P
[14:16:26] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[14:16:59] <sw17ch> jesseray: it just takes time and practice. half the world uses chopsticks to eat and i can't do anything but gain slivers with them -- doesn't mean it's a bad method for eating. :)
[14:17:11] <jedestep> jesseray: what were you unable to accomplish? I feel like Haskell is pretty reasonable to use after the initial learning curve
[14:17:25] <Aetherspawn> Yeah I couldnt get anything done in haskell
[14:17:29] <jesseray> after the initial learning curve... that's an accomplishment in itself.
[14:17:33] <Aetherspawn> Transformers are unintuiative
[14:17:35] <jedestep> that is true.
[14:17:39] <dbaupp> jedestep: the *steep* learning curve ;P
[14:17:41] <Aetherspawn> in the huge types they create
[14:18:15] *** zz_kimundi is now known as kimundi
[14:18:25] <jedestep> I'm always interested to hear where people get stuck learning Haskell though
[14:18:34] <jedestep> seems like a different point for everyone
[14:18:35] <dbaupp> Aetherspawn: you don't need transformers to get stuff done?
[14:18:58] <jedestep> yeah I rarely/never use monad transformers (but I would probably have better code if I did)
[14:18:58] <Aetherspawn> I use these kinds of langauges to write servers for high performance stuff written in C
[14:19:06] <jedestep> :S
[14:19:30] <Aetherspawn> so I use transformers for immutable state, state, conduit, IO, resource/guaranteed deallocation etc
[14:19:41] <dbaupp> ah, right
[14:19:42] <Aetherspawn> sometimes its like 5 deep and lifting because actual labourous lifting
[14:19:46] <cmr> I look at it every now and then and for me it is the foreign vocabulary. I'm not a mathematician and don't have any formal education yet, so learning the concepts is like learning how to walk.
[14:20:14] <dbaupp> cmr: keep hitting your head against the wall... eventually it breaks :)
[14:20:21] <dbaupp> (the wall... not your head :S )
[14:20:24] <cmr> heh
[14:20:31] <jedestep> cmr: a lot of the vocabulary that people use is just for chest inflating. usually when people talk about category theory usually you can ignore it
[14:20:34] <jesseray> My biggest problem, I think, is that I could not figure out the right way to separate IO and non-IO. I would add something, then the type of almost everything had to change to something IO (), then the information was tainted so I couldn't send it to other places, and...
[14:20:35] <jesseray> (sigh)
[14:21:00] <Aetherspawn> Also the llvm implementation in ghc sucks compared to rust
[14:21:00] <jesseray> I like the idea of immutability, but I think programming languages should let you start with mutability and then widdle it down.
[14:21:10] <Aetherspawn> they shouldn't have bothered with the ncg
[14:21:11] <jesseray> Trying to be immutable from the very beginning seemed impossible.
[14:21:16] <jedestep> jesseray: if you can't figure out a way to compartmentalize things (if your code is complicated enough) just hit unsafePerformIO
[14:21:21] <dbaupp> Aetherspawn: really?? Rust's one isn't that great yet...
[14:21:30] <sw17ch> Aetherspawn: it's also about 1 year old and has really only had one person working on it. :)
[14:21:33] <Aetherspawn> Haskell has the problem where everyone hates on llvm for its compile times
[14:21:44] <Aetherspawn> so llvm bitrotted :P
[14:21:45] <sw17ch> (as far as i know)
[14:21:52] <Aetherspawn> and yeah, I know its new ;P
[14:21:57] <jedestep> speaking of compile times, building master is taking eternity :(
[14:22:08] <cmr> jedestep: how much ram do you have?
[14:22:25] *** Joins: pseudoku (quassel@44A610.354534F.C28326FD.IP)
[14:22:26] <jedestep> cmr: 4GB
[14:22:28] <sw17ch> jesseray: in regards to IO mixing -- learning how Haskell uses and enforces IO is one of the largest lessons I learned. it influences how I program on a day-to-day basis now.
[14:22:32] <dbaupp> jesseray: everything-immutable requires thinking entirely differently... it's really hard to start with :(
[14:22:45] <Aetherspawn> its awesome how something like a game doesn't need any IO
[14:22:47] <Aetherspawn> except in the graphics engine
[14:22:52] <sw17ch> dbaupp: i'll argue that it's a worthwhile endeavor though
[14:22:52] <dbaupp> jesseray: but once you get used to, it's pretty awesome.
[14:22:58] <dbaupp> sw17ch: same
[14:23:01] <sw17ch> :)
[14:23:11] <Aetherspawn> (or keyboard input, obviously, but thats a thin layer over the top)
[14:23:22] <sw17ch> i write C for embedded micro controllers. I really wish I had enforceable referential transparency most days.
[14:23:26] *** Quits: pseudoku (quassel@44A610.354534F.C28326FD.IP) (Connection reset by peer)
[14:23:28] <dbaupp> jedestep: how long is an "eternity"?
[14:23:34] <cmr> jedestep: the rust build peaks at I think 2.5GB of RAM. you should be fine as long as you have that much free for rust to use. otherwise it should be ~20 minutes
[14:23:58] <jedestep> dbaupp: it's been going for around 20 or 25 minutes
[14:24:01] <cmr> also if you have to build llvm that's another ~20-30 min
[14:24:14] <bstrie> llvm only needs to be built once, thankfully...
[14:24:14] <dbaupp> jedestep: what's it up to?
[14:24:32] <jedestep> dbaupp: compile and link librusti.dylib
[14:24:37] <samnardoni> any have an idea how to call EnumWindows from rust? one of the parameters is a callback function...
[14:24:38] <cmr> oh you're almost done
[14:24:40] <jedestep> and it finished
[14:24:41] <jedestep> lol
[14:24:52] <jedestep> now the question
[14:24:56] <dbaupp> sw17ch: yeah, I'm hoping rust gets an effect system that can help enforce safety like that
[14:24:57] *** Joins: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net)
[14:25:01] <jedestep> how broken is my code as a result of new build
[14:25:14] <dbaupp> jedestep: answer: very (probably)
[14:25:22] <Aetherspawn> I added in some missing iso c99 types from libc for ffi but I dont know how to build yet so I don't know if it works. If it doesn't, chuck it in the bin. If it does, someone can put it in for me, providing someone actually sees value in full stdint support http://pastie.org/8052043 adios guys
[14:25:30] <bstrie> samnardoni: can you ignore the callback function and just pass it a null pointer instead? that's what I do with my lua C interface :P
[14:25:40] <cmr> What sort of diff format is that :S
[14:25:46] <jedestep> dbaupp: my code compiled and every test passed. witchcraft??
[14:25:53] <dbaupp> jedestep: clearly
[14:26:04] <dbaupp> jedestep: (how old was the previous version you had?)
[14:26:11] <sw17ch> dbaupp: that would make me feel much more at home in the language. regions of code with proof that they don't impact the outside world.
[14:26:12] <Aetherspawn> well, its git for windows but It doesn't have an export format sorry
[14:26:20] <samnardoni> bstrie: the call would be pretty pointless without the callback
[14:26:21] <cmr> Aetherspawn: 'git diff' :)
[14:26:27] <sw17ch> dbaupp: unless i'm missing something, there's currently no way to guarantee a function has no external effect in Rust, right?
[14:26:36] <jedestep> dbaupp: wait this is not updated, it is still on June 7
[14:26:40] <jedestep> :(
[14:26:46] <dbaupp> sw17ch: yeah, there's a proposal... sec
[14:26:54] <cmr> https://github.com/mozilla/rust/wiki/Proposal-for-effects
[14:27:10] <cmr> sw17ch: if you have feedback bblum wants it
[14:27:11] <bstrie> bah, referential transparency is overrated :P
[14:27:42] <jedestep> there we go, now it's broken :D
[14:27:48] <dbaupp> jedestep: :D
[14:27:56] *** Joins: pseudoku (quassel@64AA69A5.2F3DE8A.520CDC98.IP)
[14:28:11] * sw17ch covers his ears, shouts LALALALALA
[14:28:18] <Aetherspawn> cmr, how do I use that?
[14:28:21] <Aetherspawn> does it need arguments
[14:28:43] <samnardoni> I guess I need to convert rust function to *libc::void?
[14:28:48] <cmr> Aetherspawn: it shouldn't
[14:29:10] <dbaupp> Aetherspawn: no, but you can give it the file path if you want the diff for a specific file without any other changes you may've done
[14:29:52] <dbaupp> samnardoni: yeah, you probably need `extern fn foo() { ... }  ...  EnumWindow(..., std::cast::transmute(foo))`
[14:30:10] <cmr> extern 'C' fn..., isn't it?
[14:30:25] <dbaupp> cmr: that's the default, but yeah `extern "C" fn ...`
[14:30:33] <cmr> oh
[14:30:33] <cmr> I thought "Rust" was the default
[14:31:01] <dbaupp> cmr: I thought the same, but it's the same as an extern {} block (which is "C")
[14:31:18] <dbaupp> (at least, according to aatch, but he's pretty reliable :) )
[14:31:56] <Aetherspawn> cmr, is this any better http://pastie.org/8052061
[14:32:02] <sw17ch> cmr: "mutation outside of one's own stack frame" <-- that's what i want to guarantee
[14:32:11] <samnardoni> dbaupp: thanks again. worked, kind of. works for first callback, but program crashes after that for some reason
[14:32:36] *** Quits: pseudoku (quassel@64AA69A5.2F3DE8A.520CDC98.IP) (Ping timeout)
[14:32:44] <cmr> Aetherspawn: wayyyy better
[14:32:51] <Aetherspawn> OK then
[14:32:59] <Aetherspawn> thats my useless contribution hahaa
[14:33:05] <Aetherspawn> night for real for the 3rd time.
[14:33:20] <dbaupp> samnardoni: oh... no idea. does gdb and/or valgrind work on windows?
[14:33:25] <jedestep> so I can now get illegal move errors by using managed pointers?
[14:33:28] <cmr> valgrind doesn't
[14:33:44] <cmr> gdb does but no debug-info on windows
[14:33:48] <cmr> (or anywhere for that matter)
[14:33:52] *** Joins: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net)
[14:34:00] <dbaupp> jedestep: you now need an explicit copy for `: Copy` type parameters
[14:34:03] *** Quits: Aetherspawn (Aetherspaw@moz-8811D9F0.static.tpgi.com.au) (Quit: Leaving)
[14:34:27] <dbaupp> cmr: does it give a backtrace?
[14:34:32] <jedestep> dbaupp: I have an explicit copy on both of my parameters, even trying to copy them throws a move error
[14:34:40] <dbaupp> jedestep: oh... code?
[14:34:47] <cmr> dbaupp: yes
[14:35:50] <jedestep> imll<K: Hash + Eq + Copy, V: Copy> OrderedMap<K,V> {  pub fn insert(&mut self, k: K, v: V) -> bool { let success = self.map.insert(k,v); if success { self.order += [(@k, @v)]; } success }
[14:35:55] <jedestep> impl*
[14:36:12] <sw17ch> cmr, dbaupp: in regards to that proposal -- i'm not yet familiar with what the #[] syntax refers to
[14:36:26] <sw17ch> i've seen similar things in C#, but don't honestly know the name of that annotation
[14:36:30] <sw17ch> (unless it's annotation)
[14:36:39] <dbaupp> sw17ch: they're called attributes in Rust
[14:36:42] <jesseray> #[test]? attribute
[14:36:50] <sw17ch> okay cool
[14:36:53] *** Quits: judder (maradukewa@D90735BE.FBAA5D2F.78E362FE.IP) (Ping timeout)
[14:36:57] <jesseray> (yay, I knew something, lol)
[14:37:11] *** Joins: _1126 (1126@moz-83D60E55.lileth.net)
[14:37:26] <dbaupp> sw17ch: essentially arbitrary data that can eb attached to any items that get consumed at some point in the compile process
[14:37:30] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[14:37:32] <cmr> sw17ch: they're basically just extra information that the compiler can do whatever with
[14:37:45] <sw17ch> neat. good for hooking in static guarantees then.
[14:37:48] <cmr> eventually will be able to have compiler plugins that handle them
[14:37:55] <jesseray> Yep. The #[test] attribute lets you write unit tests that the compiler is able to run for you =)
[14:37:55] <dbaupp> sw17ch: (or not, there's no check that they're actually used for any particular stage)
[14:38:13] <sw17ch> Is that something rustc can generate an error for?
[14:38:15] <sw17ch> erm
[14:38:17] <sw17ch> warning even?
[14:38:21] <dbaupp> jedestep: is the complaint about the `self.order += ` line?
[14:38:27] <cmr> it could, if there was a unified way to handle attributes
[14:38:29] <cmr> there isn't right now
[14:38:36] <dbaupp> sw17ch: yeah, there's infrastructure for lints like that
[14:38:41] <dbaupp> sw17ch: it's not implemented yet
[14:38:44] <jedestep> dbaupp: yes. use of moved value at self.order += ...
[14:38:55] <jedestep> k and v are both moved
[14:39:08] <dbaupp> cmr: it could be done by a consumer marking the attribute as used when it uses it
[14:39:22] <dbaupp> jedestep: you probably need `self.map.insert(copy k, copy v)`
[14:39:27] <jesseray> I mispoke. The compiler does not run the tests for you. Rather, it lets you use a compiler flag to compile a binary with the tests included and which runs the tests when executed. Sorry for any misunderstandings.
[14:39:45] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[14:39:52] <dbaupp> jedestep: also += is bad for anything other than primitive numerics, you should use `self.order.push((k, v))`
[14:39:55] <jesseray> http://www.rustforrubyists.com/book/book.html#testing
[14:40:14] <dbaupp> jesseray: yup, there's also #[bench] for "unit benchmarks"
[14:40:19] <jedestep> dbaupp: that worked, thanks for the help. feels bad having to copy potentially large stuff though
[14:40:41] <dbaupp> jedestep: yeah, well, it was doing it implicitly before... at least it's obvious now :)
[14:40:43] <jesseray> Ooh, I didn't know about #[bench]. Do you have a link for more info?
[14:40:47] <jedestep> lol
[14:40:59] <dbaupp> jesseray: https://github.com/mozilla/rust/wiki/Doc-unit-testing#benchmarking
[14:41:42] <jedestep> wow it was implicitly copying in a lot of places
[14:42:23] *** Joins: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP)
[14:42:23] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/ZLfvGg
[14:42:23] *** Parts: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP) ()
[14:42:58] <jesseray> That link was very helpful. Rust even figures out how many times to run the benchmark to get reliable results. Cool! =)
[14:43:56] <cmr> It's still not ideal though. graydon wants to be more like http://www.serpentine.com/blog/2009/09/29/criterion-a-new-benchmarking-library-for-haskell/
[14:44:09] <jedestep> is there any replacement for str::to_chars?
[14:44:40] <dbaupp> jedestep: foo.iter().collect::<~[char]>()
[14:44:47] <sw17ch> I was wondering if that would be modeled after criterion
[14:44:53] <jedestep> dbaupp: whoa cool
[14:45:18] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[14:45:18] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/lhYyTw
[14:45:18] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[14:45:21] *** Joins: ghrust (ghrust@C621748.6A2AE50.F3114085.IP)
[14:45:21] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/lqattg
[14:45:21] <ghrust> 13rust/06auto 146a6ffb4 15SiegeLord: Do not strip leading whitespace when parsing doc comments....
[14:45:21] <ghrust> 13rust/06auto 145f0e494 15bors: auto merge of #7174 : SiegeLord/rust/remove_trim, r=brson...
[14:45:21] *** Parts: ghrust (ghrust@C621748.6A2AE50.F3114085.IP) ()
[14:45:57] <jesseray> Ah, I remember playing with Criterion. I hope Graydon succeeds in making #[bench] that way.
[14:46:05] <jesseray> Or someone else... I'm not picky.
[14:47:17] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[14:47:47] <jesseray> dbaupp: what does foo.iter().collect::<~[char]>() do? Get all the function/method names?
[14:48:31] *** Joins: koomi (koomi@moz-73D7CCF0.pools.arcor-ip.net)
[14:48:35] <jesseray> Er.. that guess sounded much less intelligent once I hit the enter key. I hate when that happens =P
[14:49:14] <dbaupp> jesseray: (foo is a string) .iter() returns an iterator over the characters of the string, and .collect is a generic function implemented on all iterators that turns the iterator into a concrete collection of what it iterators over
[14:49:18] <dbaupp> *iterates over
[14:49:38] <jedestep> jesseray: the generic argument <~[char]> says represent the collected values as a ~[char]
[14:50:00] <dbaupp> i.e. "foo" -> Iterator that yields 'f' 'o' 'o' successively -> ~['f', 'o', 'o']
[14:50:05] <jesseray> Ah, sting to char vector. That's neat.
[14:50:19] <jedestep> yeah the new iterator implementations do cool stuf
[14:50:22] <jedestep> stuff*
[14:50:47] <dbaupp> jedestep: depending what you're doing with it, you can possibly avoid the vec allocation using the iterator adaptors in std::iterator
[14:51:51] <jedestep> dbaupp: possibly, but for the moment a lot of my functions are expecting ~[T] arguments. i wrote a bunch of data stream manipulation functions (since i'm making some parsers) so all that would have to change
[14:52:15] <dbaupp> jedestep: changes for another day, perhaps? :)
[14:52:20] <jedestep> one day
[14:52:27] <jedestep> also, to_bytes is gone too, isn't it
[14:52:38] <dbaupp> yeah, .bytes_iter()
[14:52:38] <cmr> no
[14:52:44] <cmr> hm?
[14:52:50] <cmr> Oh for str?
[14:52:52] <jedestep> oh phew so i can just find/replace that
[14:52:56] <dbaupp> cmr: there's one in std::to_bytes::ToBytes
[14:53:05] *** Quits: samnardoni (Mibbit@F889EF52.38924046.A86B7D63.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:53:15] <dbaupp> jedestep: sort of. it's a iterator over u8's not a ~[u8]
[14:53:44] <dbaupp> (so you need .collect::<~[u8]>() for a true replacement)
[14:53:50] <jedestep> ok so i could do the same thing
[14:53:53] <jedestep> yeah
[14:56:38] <dbaupp> anyways, bed time.
[14:57:17] <jesseray> Goodnight =)
[14:57:21] <jedestep> goodnight
[14:58:01] *** Joins: jorendorff (jorendorff@moz-1747FB68.hsd1.tn.comcast.net)
[14:58:20] *** Quits: dbaupp (Thunderbir@moz-73E90475.lns20.syd6.internode.on.net) (Ping timeout)
[15:00:14] *** Joins: jdm_ (jdm@moz-801E009D.vlan502.asr1.cdg2.gblx.net)
[15:00:40] *** Quits: jdm (jdm@moz-801E009D.vlan502.asr1.cdg2.gblx.net) (Input/output error)
[15:01:04] <sw17ch> Is the 'pure' keyword a real thing in Rust, or am I only seeing it referenced as a concept?
[15:01:15] <bstrie> sw17ch: obsolete concept
[15:01:30] <bstrie> it didn't really provide purity anyway
[15:01:31] <sw17ch> Was it dropped in favor of something else?
[15:01:34] <sw17ch> Ah.
[15:01:52] <sw17ch> Really, I just want a way to mark functions as 'observationally pure'.
[15:01:55] <bstrie> sw17ch: it had some very strange rules that were never really nailed down. one day there might be an effects system instead
[15:02:12] <sw17ch> bstrie: i saw it referenced in this: https://github.com/mozilla/rust/wiki/Proposal-for-effects
[15:02:17] <sw17ch> Which i'm liking a lot.
[15:02:19] <bstrie> but to make a long story short, it was dropped in favor of "shipping 1.0 this year"
[15:02:30] <sw17ch> bstrie: an appropriate reason
[15:02:54] <kimundi> bstrie: I commented on my PR
[15:04:01] <bstrie> kimundi: gah, I didn't even see that function below... I was looking at the function above, not realizing they were on different types
[15:04:29] <kimundi> he, yeah that module is a mess of trait impls on everything :P
[15:05:56] <bstrie> kimundi: did anyone ever come to a consensus regarding whether "into_foo()" should always be noncopying and "to_foo()" should always be copying, or something?
[15:06:17] <bstrie> I wasn't really following along, maybe you weren't even a part of that...
[15:06:20] *** Joins: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP)
[15:06:47] <kimundi> bstrie: No idea, I just decided on a whim that _consume was way to long for a set of functions that you usually chain at least a few times.
[15:07:19] *** Joins: cscottnet (cscott@moz-2577C94A.net)
[15:08:04] <bstrie> rusti "consume".len() == "nocheck".len()
[15:08:17] <bstrie> :P
[15:08:42] <kimundi> I mean the ascii module is probably going to get their most use as something like 'let v: ~[u8] = foo(); let x = v.into_ascii().to_lower().into_str();' ... So keep int short seems like a good idea
[15:08:57] <bstrie> yes, I agree
[15:09:04] <jedestep> take the C approach to function naming: "cnsm" instead of "consume"
[15:09:07] <bstrie> one underscore at most is tolerable
[15:09:09] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[15:09:37] <bstrie> jedestep: no, it would be something even worse like "cnsume"
[15:10:00] <jedestep> nochck
[15:10:45] <kimundi> "x=v.ntsc().tlwer().ntstr();" ;)
[15:10:54] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Ping timeout)
[15:11:05] <bstrie> v.ntsc().to_pal()
[15:11:06] <jedestep> good readable code right there
[15:11:12] <kimundi> lol
[15:11:55] *** Joins: judder (maradukewa@D90735BE.FBAA5D2F.78E362FE.IP)
[15:12:34] *** Joins: Ben (Ben@moz-9E05E9C9.hfc.comcastbusiness.net)
[15:12:39] *** Parts: Ben (Ben@moz-9E05E9C9.hfc.comcastbusiness.net) ()
[15:15:06] <bstrie> kimundi: I confess that I've never learned what "iterbytes" is supposed to do
[15:15:48] <jedestep> bstrie: it seems like it's a strange external iterator
[15:15:54] <kimundi> bstrie: Neither did I, but seeing how `Ascii` is binarycompatible to `u8` I just copied what did happen there
[15:16:21] <kimundi> implementing it just means you can call .to_bytes(endianess) on it
[15:16:51] <bstrie> honestly I'm also not sure how cast::transmute works :P
[15:17:32] <kimundi> bstrie: That's easy: Type A comes in, type B comes out
[15:17:49] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[15:17:52] <jedestep> magic
[15:17:54] <bstrie> it's all magic to me
[15:18:05] <kimundi> If size of type A != size of type B then the compiler complains because that cast is not going to work
[15:19:14] <bstrie> how does the compiler know the size
[15:20:29] <jedestep> the compiler should have to compute the size of any type at some point
[15:21:11] <kimundi> right, the compiler knows that a u8 is always 8 bit, a &u8 is ptr size etc
[15:21:13] *** Quits: mib_x9edzl (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[15:21:22] *** Joins: froglegstew (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP)
[15:21:50] <kimundi> The whole dynamic sized types issue/proposal is about the issue if you _can't_ determine the size at compiletime
[15:22:18] <kimundi> A [u8] is n * 8bit, where n is not known at compiletime
[15:22:55] <heftig> hence it can't be allocated
[15:23:05] <bstrie> kimundi: ok, I just figured that the whole issue was about knowing whether or not a type *had* a size at compiletime, rather than actually knowing what the size was
[15:23:26] <bstrie> I'm bad at compilers
[15:23:40] <bstrie> bits are a mystery
[15:23:41] <kimundi> heftig: It can still be allocated, just not simply by knowing its type, wich makes it trickier
[15:24:11] <nmatsakis> errors that only crop up in stage2 are so much fun.
[15:24:20] *** Joins: tjc (tjc@moz-ACD0E477.hsd1.or.comcast.net)
[15:24:20] *** ChanServ sets mode: +o tjc
[15:24:26] <bstrie> nmatsakis: I disagree, those are the least fun errors
[15:24:46] <nmatsakis> bstrie: sarcasm, dear bstrie.
[15:24:46] <froglegstew> hm, relatedly, if I have an array of bytes that's actually the byte-representation of a struct of, say, int64s, how can I read out the bytes into the int64s?
[15:24:48] <nmatsakis> ;)
[15:25:12] <kimundi> nmatsakis: More fun that spending a day with random testfailure on make check? (I still don't know what went wrong yesterday...)
[15:25:14] <nmatsakis> bstrie: you mean you don't love waiting for the entire compiler to build twice before you can see the output from your debug log :)
[15:25:19] <bstrie> nmatsakis: double reverse sarcasm! my insincerities are innumerable
[15:25:38] <erickt> kimundi: ping
[15:25:47] <bstrie> nmatsakis: solution: make stage1 the new snapshot, then you only have to wait to stage1!
[15:26:16] <nmatsakis> bstrie: hmm, not a bad idea tbh.
[15:26:23] <nmatsakis> bstrie: I was thinking of more complicated sol'ns
[15:26:29] <kimundi> erickt: Pong. I'm not sure anymore what I wanted from you. Was it about the str bytes PR?
[15:26:40] <bstrie> we need a new snapshot, if such a thing is possible in mortal time
[15:26:51] <erickt> kimundi: I dunno, that is what I wanted to ask you :)
[15:27:32] <kimundi> erickt: Yeah it was just about Str from bytes API cleanup, attempt 2
[15:27:36] <erickt> kimundi: you mentioned on my pull request that from_bytes_slice can access invalid memory
[15:27:38] <bstrie> kimundi: oh I gave your whatsit an letter and a sigil
[15:27:45] <bstrie> r and + to be specific
[15:27:57] *** Quits: Sodel_the_V (user@moz-853663E1.va.shawcable.net) (Quit: Eaten by a grue)
[15:28:37] <erickt> kimundi: which is true and could potentially cause a problem, chiefly in str::as_c_str
[15:28:40] <kimundi> bstrie: yay, I love random letters and sigils \o/
[15:29:13] <kimundi> erickt: Yeah, as_c_str is the reason why a &str has a hidden last byte
[15:29:15] <erickt> kimundi: which as far as I know is the only thing (in rust proper) that dereferences the byte after the end of a string
[15:29:22] *** Joins: KindOne (KindOne@moz-DBCDCEA8.dynamic.ip.windstream.net)
[15:29:36] <kimundi> to make sure the point-after-the-slice points at actual valid memory
[15:29:47] <kimundi> yeah
[15:30:21] <erickt> kimundi: so the choice is who we force a copy on if we want to treat a slice of a [u8] as a str
[15:30:33] <kimundi> It's cumbersome, but I'm still of the opinion that it's a good idea in principle safety-wise. It only gets hairy at str <-> [u8] conversion boundaries
[15:30:39] *** Quits: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com) (Input/output error)
[15:30:54] <froglegstew> related to the type size issue, in C we can just read out consecutive elements of byte arrays into other types; can we do something like that here?
[15:31:00] <erickt> we could always do a copy for from_c_str, and never for from_bytes_slice, or get rid of from_bytes_slice and only allow from_bytes_slice_with_null
[15:31:15] <froglegstew> like, if we have a byte array that was originally a struct of i64s, can we pull out the i64s directly from the byte arrays?
[15:32:13] *** Quits: tjc (tjc@moz-ACD0E477.hsd1.or.comcast.net) (Quit: zzzzzzzzzz)
[15:32:21] <kimundi> erickt: right, the options are "every &str has a hidden last byte that bites you in the ass for conversions to/from [u8], but as_c_str only has to copy sometimes" vs "&str points at the same memory as &[u8], but as_c_str allways has to copy"
[15:32:56] <kimundi> erickt: option three: all vectors get null terminated
[15:34:32] <kimundi> Though, thinking of it again... seeing how valid utf8 can contain interior nulls, the whole as_c_str null termination system might fall anyway
[15:34:45] <engla> isn't the goal to have str and vec slices to be copy-free
[15:34:54] <erickt> froglegstew: the serializers are the proper way to do that sort of thing
[15:35:14] <froglegstew> erickt hm, thanks, I'll check those out!
[15:35:26] <erickt> froglegstew: what's hard here is we're trying to do something without a copy
[15:35:28] <kimundi> engla: yes, but for passing a pointer to c you might have to do a copy to make sure the memory is null terminated
[15:35:36] <engla> right
[15:35:55] <froglegstew> erickt yes; I wouldn't mind a copy if it were necessary though
[15:36:11] <froglegstew> (is there an easier way to do it that requires copying?)
[15:36:16] <erickt> kimundi: since this function is part of our interface with C, I'm not sure if we can count on every *u8 having a trailing null. 
[15:36:40] *** Joins: ghrust (ghrust@CFE85B59.6A2AE50.F3114085.IP)
[15:36:40] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/lqattg
[15:36:40] *** Parts: ghrust (ghrust@CFE85B59.6A2AE50.F3114085.IP) ()
[15:36:52] <Blei> can't you just transmute a pointer?
[15:37:01] <kimundi> engla: Becauses currently ~str are always null terminated, and &str includes a hidden last byte, as_c_str can just check that byte on an arbitrary str slice, and if it is null knows that buffer is null terminated. if it isn't is has to make a copy
[15:37:18] <erickt> Blei: Ultimately that's what we're doing.
[15:37:40] <froglegstew> but trying to do it in a safe way
[15:37:40] <kimundi> Blei: The problem is that the one who gets the ptr expects it to be null terminated.
[15:38:04] <Blei> kimundi: sorry, that was about froglegstew's problem
[15:38:10] <kimundi> ah, okay :)
[15:38:18] <froglegstew> right, well, they're pretty related
[15:38:24] <Blei> true :)
[15:38:34] <erickt> Blei: the problem is if we do `let x = ~[1,2,3]; let y = BAD_VALUE; let s: ~str = cast::transmute(x); str::as_c_str(s, |ptr| call_c_function(ptr))`
[15:39:07] *** Quits: sw17ch (sw17ch@moz-39D8564F.wndsny.tds.net) (Quit: sw17ch)
[15:39:30] *** Joins: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP)
[15:39:30] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/6EEZuw
[15:39:30] *** Parts: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP) ()
[15:39:32] *** Joins: ghrust (ghrust@CFE85B59.6A2AE50.F3114085.IP)
[15:39:32] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/obIaWg
[15:39:32] <ghrust> 13rust/06auto 14c9e7bb7 15Marvin Lbel: Improved std::ascii...
[15:39:32] <ghrust> 13rust/06auto 1417eec62 15bors: auto merge of #7199 : Kimundi/rust/master, r=bstrie...
[15:39:32] *** Parts: ghrust (ghrust@CFE85B59.6A2AE50.F3114085.IP) ()
[15:39:34] *** Quits: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP) (Ping timeout)
[15:40:06] <Blei> erickt: yes, sorry, my comment was about froglegstew's problem
[15:40:13] <engla> kimundi: it's smart
[15:40:16] <froglegstew> well, they're actually totally related
[15:40:17] <froglegstew> Blei
[15:40:21] *** Joins: sw17ch (sw17ch@moz-39D8564F.wndsny.tds.net)
[15:40:33] <froglegstew> since my question is whether we can do the transmutation/type conversion safely
[15:40:35] <kimundi> urg, my laptop batterie is dieing faster and faster these days...
[15:40:39] <Blei> froglegstew: not entirely, i'm assuming you know the size of your buffer?
[15:40:41] * kimundi switches to smartphone
[15:40:43] *** Joins: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP)
[15:40:47] <froglegstew> oh, *I* do
[15:40:56] <Blei> in that case it's easy-ish
[15:41:04] <froglegstew> but Rust may not
[15:41:06] <erickt> Blei: Assume BAD_VALUE is some special thing that may or may not have a NULL as it's first character. Maybe it's a task structure or something. When as_c_str gets called, it sees the ptr ends with a NULL, so `as_c_str` will not copy the bytes. But then because BAD_VALUE is some internal structure, rust decides to toggle the first byte to 1, which allows `some_c_function` to read past the end of the string
[15:41:11] <froglegstew> and Rust may yell at me if I try
[15:41:54] <erickt> kimundi: ^ I think that's potentially good justification to make `as_c_str` always copy, or at least require a `~str`
[15:41:56] *** Joins: sfackler (sfackler@moz-316FE70F.compute-1.amazonaws.com)
[15:42:13] *** Joins: ysuzuki (ysuzuki@moz-285468F7.net219126120.t-com.ne.jp)
[15:42:16] <froglegstew> Blei does that make sense to you? (I could also be making things up :P)
[15:43:17] <erickt> kimundi: I think I'll file an issue about this
[15:44:13] <Blei> froglegstew: hmm, depends on your definition of safety. i guess the safest conversion would be a manual parsing of the bytes, but that seems inefficient and annoying
[15:45:33] <froglegstew> well, there are definitely cases that really can't be protected against ("unsafe"?)
[15:45:45] <froglegstew> but one that probably could be is if I started with a bit-packed struct
[15:45:50] <froglegstew> then tried to read bytes out
[15:46:18] <froglegstew> or maybe I have a struct that doesn't end on a byte boundary
[15:46:20] <froglegstew> read bytes out
[15:46:25] <froglegstew> and manage to touch someone else's memory
[15:46:47] <froglegstew> those should both be able to be protected against
[15:47:09] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[15:47:27] <froglegstew> erickt: hrm, sorry, I'm having some trouble finding documentation for serializers... or should is the source the canonical documentation?
[15:47:58] <erickt> froglegstew: unfortunately I never really wrote docs for it
[15:48:51] <froglegstew> ok, thanks for the answer!
[15:48:59] <erickt> froglegstew: the source is the best for now.
[15:48:59] *** Joins: Azdle (Azdle@moz-B334B496.hfc.comcastbusiness.net)
[15:49:37] <bstrie> froglegstew: if you ever happen to understand the code, please write actual documentation for it!
[15:49:42] *** Joins: azita (Azita@2557E599.66715431.D25A875A.IP)
[15:49:49] <froglegstew> erickt: cool thanks, I'll check it out
[15:49:52] <froglegstew> bstrie: lol
[15:50:05] <froglegstew> "ever happen to understand"? sounds promising
[15:51:20] <froglegstew> also whatever happened to str::to_bytes??
[15:51:48] <erickt> froglegstew: use str::as_bytes
[15:51:49] <bstrie> does "asdf".to_bytes() work?
[15:52:02] <bstrie> we really need to figure out these naming conventions
[15:52:13] <froglegstew> nope
[15:52:24] <bstrie> "asdf".to_as_into_bytes()
[15:52:26] <erickt> bstrie: I have a RFC to standardize
[15:52:39] *** Joins: mib_17xxbe (Mibbit@7A798A5D.E9BDBC4C.7379C4AC.IP)
[15:52:40] <bstrie> that would be swell
[15:52:48] <erickt> bstrie: https://github.com/mozilla/rust/issues/7087
[15:52:59] <erickt> bstrie: no one commented :)
[15:53:23] <erickt> back in a couple minutes
[15:54:15] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[15:54:47] *** Quits: doener (bs@moz-AA189A5A.unitymedia.biz) (Quit: leaving)
[15:55:02] *** Joins: eagen_ (eagen@8737942B.7A99C13A.B7961A98.IP)
[15:55:06] *** Quits: eagen_ (eagen@8737942B.7A99C13A.B7961A98.IP) (Quit: eagen_)
[15:55:27] *** Joins: vosen (vosen@moz-266BA656.icpnet.pl)
[15:57:29] <froglegstew> anyone know the current way to convert a str to a byte array?
[15:57:47] <froglegstew> used to be std::str::to_bytes(s)...
[15:58:04] <cmr> rusti: "foo".iter().collect::<~[u8]>()
[15:58:06] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/Ggbe
[15:58:25] <cmr> rusti: "foo".to_bytes()
[15:58:26] -rusti- <anon>:9:15: 9:33 error: type `&'static str` does not implement any method in scope named `to_bytes`
[15:58:26] -rusti- <anon>:9     let r = {  "foo".to_bytes() };
[15:58:26] -rusti-                         ^~~~~~~~~~~~~~~~~~
[15:58:26] -rusti- error: aborting due to previous error
[15:58:26] -rusti- application terminated with error code 101
[15:58:26] *** Quits: diegoyam (quassel@FF9B1514.A4EC3D18.3A1EC144.IP) (Connection reset by peer)
[15:58:38] <cmr> rusti: use std::to_bytes::ToBytes; "foo".to_bytes()
[15:58:39] -rusti- <anon>:9:43: 9:61 error: this function takes 1 parameter but 0 parameters were supplied
[15:58:39] -rusti- <anon>:9     let r = {  use std::to_bytes::ToBytes; "foo".to_bytes() };
[15:58:39] -rusti-                                                     ^~~~~~~~~~~~~~~~~~
[15:58:39] -rusti- error: aborting due to previous error
[15:58:39] -rusti- application terminated with error code 101
[15:58:43] <cmr> rusti: use std::to_bytes::ToBytes; "foo".to_bytes(true)
[15:58:44] -rusti- ~[102, 111, 111]
[15:58:58] <froglegstew> oh haha, boolean flag
[15:58:59] <cmr> froglegstew: there's also converting it to ascii and then bytes
[15:59:01] <froglegstew> thanks so much!
[15:59:03] <engla> rusti: "foo".byte_iter().collect::<~[u8]>()
[15:59:04] -rusti- <anon>:9:15: 9:33 error: type `&'static str` does not implement any method in scope named `byte_iter`
[15:59:04] -rusti- <anon>:9     let r = {  "foo".byte_iter().collect::<~[u8]>() };
[15:59:04] -rusti-                         ^~~~~~~~~~~~~~~~~~
[15:59:04] -rusti- error: aborting due to previous error
[15:59:04] -rusti- application terminated with error code 101
[15:59:06] <cmr> (the flag is for endianness)
[15:59:12] <engla> hm not called byte_iter?
[15:59:15] <froglegstew> makes sense, thanks!
[15:59:17] *** Joins: infynyxx_ (infynyxx@moz-E95B370B.nyc.res.rr.com)
[15:59:20] <cmr> iter_bytes maybe?
[15:59:27] <engla> bytes_iter() I think
[15:59:37] <cmr> Where are dbaupp and strcat when you need them :p
[15:59:44] <engla> it's bytes_iter()
[15:59:48] <cmr> rusti: "foo".bytes_iter().colelct::<~[u8]>()
[15:59:49] -rusti- <anon>:9:15: 9:54 error: type `std::str::StrBytesIterator/&` does not implement any method in scope named `colelct`
[15:59:50] -rusti- <anon>:9     let r = {  "foo".bytes_iter().colelct::<~[u8]>() };
[15:59:50] -rusti-                         ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[15:59:50] -rusti- error: aborting due to previous error
[15:59:50] -rusti- application terminated with error code 101
[15:59:55] <cmr> rusti: "foo".bytes_iter().collect::<~[u8]>()
[15:59:56] -rusti- ~[102, 111, 111]
[15:59:59] <cmr> yay
[16:00:07] <cmr> froglegstew: If you can use the iterator you can avoid doing copies
[16:00:19] <froglegstew> awesome, thanks
[16:00:29] *** Quits: mib_17xxbe (Mibbit@7A798A5D.E9BDBC4C.7379C4AC.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[16:00:54] *** Quits: jdm_ (jdm@moz-801E009D.vlan502.asr1.cdg2.gblx.net) (Quit: Lost terminal)
[16:00:59] *** Quits: infynyxx_ (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[16:01:36] <engla> rusti: "foo".as_bytes()
[16:01:37] -rusti- &[102, 111, 111]
[16:01:43] <engla> these methods have changed around
[16:01:54] <froglegstew> oh man, choices, choices
[16:01:59] *** Joins: MaikKlein (maik@moz-ECF25244.dip0.t-ipconnect.de)
[16:02:00] <froglegstew> but the iterator way is the most rustic...?
[16:02:07] <froglegstew> or...?
[16:02:30] <cmr> Iterators are handy and flexible. as_bytes is probably the most efficient
[16:03:02] <froglegstew> ok, thanks
[16:03:09] <froglegstew> and it (or its functionality) is stable?
[16:03:18] <cmr> Nope :)
[16:03:23] <cmr> nothing is stable right now, it seems
[16:03:24] <froglegstew> like, there'll always be *something* with the efficiency of
[16:03:25] <froglegstew> oh
[16:03:35] <cmr> still a lot of cleanup and refactoring
[16:03:43] <froglegstew> well, I just mean, will there always be *something* with the efficiency of as_bytes lying around?
[16:03:43] <cmr> as_bytes is probably around to stay though
[16:03:45] <cmr> yeah
[16:03:46] <froglegstew> even if by another name?
[16:03:50] <froglegstew> awesome
[16:03:51] <froglegstew> thanks!!
[16:04:08] *** Quits: sp3d (a@moz-49806493.dhcp.stls.mo.charter.com) (Ping timeout)
[16:05:59] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[16:08:07] *** kimundi is now known as zz_kimundi
[16:09:23] *** Joins: bent (chatzilla@moz-932324BF.hsd1.ca.comcast.net)
[16:10:23] *** Quits: vcl (chatzilla@741D4FEA.76F9E272.DA40C4B3.IP) (Ping timeout)
[16:10:48] *** Joins: sp3d (a@moz-49806493.dhcp.stls.mo.charter.com)
[16:10:50] *** Joins: tjc (tjc@moz-5864AB44.hsd1.or.comcast.net)
[16:10:50] *** ChanServ sets mode: +o tjc
[16:11:33] *** Quits: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP) (Ping timeout)
[16:12:57] *** Joins: diegoyam (quassel@FF9B1514.A4EC3D18.3A1EC144.IP)
[16:15:34] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Quit: Computer has gone to sleep.)
[16:16:26] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[16:16:40] *** Quits: sk (sk@44FB31D1.A56C954C.78DD174B.IP) (Quit: Leaving)
[16:16:43] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Quit: Computer has gone to sleep.)
[16:18:09] *** Joins: eholk (eholk@moz-5D9C91FC.uconnect.utah.edu)
[16:21:19] *** Joins: vcl (chatzilla@741D4FEA.76F9E272.DA40C4B3.IP)
[16:22:14] *** Joins: doener (doener@moz-121949B3.unitymediagroup.de)
[16:24:07] *** Quits: Blei (philipp@moz-96D25F7A.cust.bluewin.ch) (Quit: WeeChat 0.4.1)
[16:24:20] *** Joins: mleise1 (marco@moz-3468AB5B.pools.arcor-ip.net)
[16:24:44] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[16:25:33] *** Quits: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP) (Ping timeout)
[16:27:40] *** Joins: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP)
[16:27:40] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/obIaWg
[16:27:40] *** Parts: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP) ()
[16:27:52] <froglegstew> erickt: just to check, the serialization is happening by basically converting to string?
[16:29:29] *** zz_kimundi is now known as kimundi
[16:29:57] <froglegstew> oops nvm that was dumb
[16:30:16] <froglegstew> I was reading json.rs and thought it was serialize.rs
[16:30:47] *** Quits: koomi (koomi@moz-73D7CCF0.pools.arcor-ip.net) (Quit: WeeChat 0.4.1)
[16:32:18] *** Quits: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net) (Input/output error)
[16:32:26] *** Joins: xp_ishka (chatzilla@moz-13D7A.kuzbass.net)
[16:33:37] *** Parts: xp_ishka (chatzilla@moz-13D7A.kuzbass.net) ()
[16:34:49] *** Joins: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP)
[16:34:49] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[16:34:58] *** Joins: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net)
[16:42:19] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Ping timeout)
[16:43:16] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[16:46:39] *** Joins: alisdair (textual@moz-EBE9F394.bchsia.telus.net)
[16:47:08] *** Joins: pcwalton (pcwalton@43CB6079.66715431.D25A875A.IP)
[16:47:08] *** ChanServ sets mode: +o pcwalton
[16:53:16] *** Joins: vk (chatzilla@3E9D68F2.B1163E0C.2A6693DD.IP)
[16:53:50] *** Joins: koomi (koomi@moz-B2B8B6D1.superkabel.de)
[16:54:35] *** Joins: charmander (Mibbit@moz-DD50C3CA.cust.bluewin.ch)
[16:54:54] <charmander> Hi
[16:55:01] *** Quits: vmx (vmx@moz-4DAC4FDF.dip0.t-ipconnect.de) (Quit: Leaving)
[16:55:33] *** Joins: carllerche (carllerche@moz-BF6CB667.hsd1.ca.comcast.net)
[16:56:06] <charmander> hi
[16:57:15] <kimundi> hI
[16:57:25] *** Joins: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP)
[16:57:25] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/GUC_xg
[16:57:25] *** Parts: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP) ()
[16:57:28] <charmander> woaahh
[16:57:30] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[16:57:30] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/EPclCg
[16:57:30] <ghrust> 13rust/06auto 14e6ebd15 15Graydon Hoare: rustc: map node ids through a table that ensures bitset indexes in dataflow are dense
[16:57:30] <ghrust> 13rust/06auto 14ae27dbb 15bors: auto merge of #7202 : pcwalton/rust/resolve-speed, r=pcwalton...
[16:57:30] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[16:57:35] <charmander> someone is alive
[16:57:47] *** Joins: sk (sk@61A494B3.BA40E8A.AAC02D62.IP)
[16:57:59] <charmander> how is going on?
[16:58:29] <bstrie> charmander: not much, how is going on with you?
[16:58:43] *** Quits: ysuzuki (ysuzuki@moz-285468F7.net219126120.t-com.ne.jp) (Client exited)
[16:58:51] <charmander> I am just stucking
[16:58:56] <bstrie> at what?
[16:59:10] *** Joins: graydon (Adium@moz-20B06F71.ptr.terago.net)
[16:59:10] *** ChanServ sets mode: +qo graydon graydon
[16:59:32] <charmander> I have just little experience on Java, so the whole manual for Rust to complicated for me ;-)
[16:59:53] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[17:00:12] <bstrie> charmander: a long time ago it was complicated for me too, I had to read the manual ten times :)
[17:00:16] <cmr> charmander: the rust manual isn't a good way to learn rust, it's mostly for reference. look at the tutorials and rust for rubyists
[17:00:52] <jedestep> it is still too complicated for me sometimes :x
[17:02:26] *** Quits: azita (Azita@2557E599.66715431.D25A875A.IP) (Quit: azita)
[17:02:56] <kimundi> charmander: ANd you can always ask questions here of course
[17:03:07] *** Quits: pcwalton (pcwalton@43CB6079.66715431.D25A875A.IP) (Quit: pcwalton)
[17:03:20] *** Quits: SimonSapin (simon@88F51059.F3BBB17D.144F44FA.IP) (Quit: Leaving.)
[17:03:51] *** Joins: echristo (echristo@D423593A.D6CCE4AE.77834EAA.IP)
[17:04:12] *** Joins: azita (Azita@2557E599.66715431.D25A875A.IP)
[17:04:34] <charmander> I like the site rustforrubyists 
[17:04:39] *** Joins: ysuzuki (ysuzuki@moz-285468F7.net219126120.t-com.ne.jp)
[17:05:19] <bstrie> charmander: steveklabnik wrote that site, he is in this channel sometimes
[17:05:39] <cmr> (also I am an editor)
[17:05:39] *** Joins: eschweic (Adium@2557E599.66715431.D25A875A.IP)
[17:05:45] <charmander> I just realized that I added to much (System.out.println) instead println
[17:05:53] <EXetoC> oh no
[17:06:25] <charmander> I mixed up with java , lol
[17:06:33] <bstrie> charmander: if it helps, you can write /* System.out. */ println() for the same effect :)
[17:06:55] *** Joins: pcwalton (pcwalton@2557E599.66715431.D25A875A.IP)
[17:06:55] *** ChanServ sets mode: +o pcwalton
[17:07:31] <charmander> :D
[17:07:37] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:08:08] *** Quits: MaikKlein (maik@moz-ECF25244.dip0.t-ipconnect.de) (Ping timeout)
[17:08:23] <bstrie> charmander: do you know PHP as well? System.out.print is perfectly valid PHP: http://www.jansch.nl/2007/03/09/systemoutprint-in-php/
[17:08:43] *** Joins: brson (brson@2557E599.66715431.D25A875A.IP)
[17:08:43] *** ChanServ sets mode: +o brson
[17:08:52] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Ping timeout)
[17:08:57] *** Joins: MaikKlein (maik@moz-ECF25244.dip0.t-ipconnect.de)
[17:09:00] <charmander> I love PHP
[17:09:35] *** Joins: SimonSapin (simon@88F51059.F3BBB17D.144F44FA.IP)
[17:09:46] <bstrie> charmander: rust is very different from java and PHP, it could take a long time to understand
[17:09:56] <bstrie> charmander: what interests you about rust?
[17:10:16] <charmander> oh no, ehm
[17:11:27] *** Quits: froglegstew (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[17:11:43] *** Joins: froglegstew (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP)
[17:11:54] <charmander> I ve heard it from Mozilla Guys(I love Firefox and co)
[17:12:17] *** Quits: gazoombo (uid6629@moz-D8B63698.irccloud.com) (Quit: Connection closed for inactivity)
[17:13:00] *** Joins: ecr (ereed@2557E599.66715431.D25A875A.IP)
[17:13:13] <charmander> In the moment I focuse on Android apps(again Java)
[17:13:50] <bstrie> ah
[17:14:01] *** Joins: dcoates (dcoates@moz-BE33DA21.fw1.sfo1.mozilla.net)
[17:15:54] <charmander> But I heard Rust should also work on Android
[17:15:55] *** Quits: ysuzuki (ysuzuki@moz-285468F7.net219126120.t-com.ne.jp) (Client exited)
[17:16:20] <bstrie> charmander: people are working on that, but I don't know what their progress is
[17:23:31] *** Joins: mschifer (Adium@2557E599.66715431.D25A875A.IP)
[17:24:20] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[17:24:26] <charmander> byebyee
[17:24:28] *** Quits: paulproteus (quassel@rose.makesad.us) (Ping timeout)
[17:24:30] <bstrie> bye
[17:25:06] *** Quits: charmander (Mibbit@moz-DD50C3CA.cust.bluewin.ch) (Quit: http://www.mibbit.com ajax IRC Client)
[17:25:16] *** Joins: paulproteus (quassel@moz-E86A3B42.makesad.us)
[17:25:56] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[17:30:31] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[17:32:25] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Ping timeout)
[17:34:08] *** Quits: MaikKlein (maik@moz-ECF25244.dip0.t-ipconnect.de) (Ping timeout)
[17:34:15] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[17:34:36] *** Joins: mark_edward (quassel@moz-4A5B1251.wisolt4.epbfi.com)
[17:34:49] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Ping timeout)
[17:37:00] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[17:37:01] *** Joins: seth (seth@2C6EF6E2.16E0C35D.DD3002AF.IP)
[17:38:32] *** Quits: alisdair (textual@moz-EBE9F394.bchsia.telus.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz)
[17:40:11] *** Quits: SimonSapin (simon@88F51059.F3BBB17D.144F44FA.IP) (Ping timeout)
[17:40:33] *** Quits: seth (seth@2C6EF6E2.16E0C35D.DD3002AF.IP) (Ping timeout)
[17:41:33] *** Joins: dylukes (dylukes@moz-B5418F79.hsd1.pa.comcast.net)
[17:42:35] *** Joins: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP)
[17:42:35] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14ae27dbb to 1417eec62: 02http://git.io/N3iJvQ
[17:42:35] *** Parts: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP) ()
[17:42:36] *** Joins: ghrust (ghrust@C621748.6A2AE50.F3114085.IP)
[17:42:36] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/GgSCuQ
[17:42:36] <ghrust> 13rust/06auto 146914ff9 15Graydon Hoare: rustc: map node ids through a table that ensures bitset indexes in dataflow are dense
[17:42:36] <ghrust> 13rust/06auto 149a5bdd7 15bors: auto merge of #7202 : pcwalton/rust/resolve-speed, r=pcwalton...
[17:42:36] *** Parts: ghrust (ghrust@C621748.6A2AE50.F3114085.IP) ()
[17:43:21] *** Quits: mark_edward (quassel@moz-4A5B1251.wisolt4.epbfi.com) (Ping timeout)
[17:44:27] *** Joins: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[17:46:52] <sully> sigh
[17:46:54] <sully> merge failures.
[17:48:03] <sully> /home/sully/src/rust2/src/libextra/std.rc:38:0: 38:48 error: multiple matching crates for `std`
[17:48:06] <sully> /home/sully/src/rust2/src/libextra/std.rc:38 extern mod core(name = "std", vers = "0.7-pre");
[17:48:10] <sully> ugh.
[17:48:11] <bblum> make clean
[17:48:29] <sully> yeah, I knwo
[17:50:18] *** Joins: mark_edward (quassel@moz-4A5B1251.wisolt4.epbfi.com)
[17:50:52] <cmr> seems like the west coast has woken up now? :)
[17:51:25] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[17:52:52] * tjc woke up 3 hours ago
[17:52:52] <tjc> =P
[17:53:13] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[17:53:55] *** Quits: ecr (ereed@2557E599.66715431.D25A875A.IP) (Quit: Leaving.)
[17:54:35] *** Quits: froglegstew (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[17:55:19] *** Joins: seth (seth@2C6EF6E2.16E0C35D.DD3002AF.IP)
[17:55:21] *** Joins: blitter (blitter@moz-FB45689C.dyn.centurytel.net)
[17:55:37] <tjc> Hey, question for the peanut gallery
[17:55:52] <tjc> I'm thinking about how to answer the question "how are Rust generics better than C++ templates?" if it comes up during my talk
[17:55:53] *** Joins: SimonSapin (simon@88F51059.F3BBB17D.144F44FA.IP)
[17:56:02] <tjc> what would people say to that? one answer is traits, but I'd rather answer that before getting into traits
[17:56:21] <kimundi> They typecheck without instanciation?
[17:56:29] <bstrie> tjc: because they don't conflate parametricity with metaprogramming?
[17:56:39] <tjc> bstrie: I'm hoping to avoid the word "parametricity"
[17:56:43] <tjc> kimundi: that's a good point
[17:56:46] <bstrie> I'm not even sure that's a word
[17:56:54] <tjc> bstrie: I'm trying to assume very little knowledge in this talk
[17:56:56] <tjc> it's certainly a word
[17:56:58] <tjc> it's just a nerd word :-)
[17:57:09] *** Joins: Jesse (jruderman@2557E599.66715431.D25A875A.IP)
[17:57:27] <kimundi> less controlled code insertion, more controlled being part of the typesystem
[17:57:40] *** Joins: froglegstew (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP)
[17:57:46] *** Quits: SimonSapin (simon@88F51059.F3BBB17D.144F44FA.IP) (Ping timeout)
[17:57:57] <tjc> I'm uncertain about what extent to which C++'s type system knows about templates
[17:58:02] <tjc> given my lack of C++ knowledge
[17:58:18] <bstrie> tjc: how about "because they aren't turing complete"
[17:58:25] <kimundi> he, neither do I know :P
[17:58:30] <bstrie> nor I
[17:58:33] *** Joins: ecr (ereed@2557E599.66715431.D25A875A.IP)
[17:58:34] *** Quits: mark_edward (quassel@moz-4A5B1251.wisolt4.epbfi.com) (Ping timeout)
[17:58:43] <tjc> bstrie: Heh, well, that's another reasonable thing to say
[17:59:03] <tjc> "you can't implement factorial in the Rust type system"
[17:59:09] <tjc> (Of course, now someone will take that as a challenge and do it)
[17:59:51] *** Quits: heftig (heftig@moz-22E2F36E.dip0.t-ipconnect.de) (Quit: Quitting)
[18:00:48] *** Joins: tikue (tkuehn@2557E599.66715431.D25A875A.IP)
[18:00:56] <bstrie> tjc: perhaps express that it's a mistake to compare rust generics with C++ templates
[18:01:01] <engla> tjc: c++ classes implemented templates must compile together  with the code using it
[18:01:02] <kimundi> he, new github interface
[18:01:12] *** Joins: heftig (heftig@moz-22E2F36E.dip0.t-ipconnect.de)
[18:01:15] <bstrie> if they're familiar with templates then they've heard the word "metaprogramming" before, so point them to macros instead
[18:01:17] <tjc> engla: also a good point
[18:03:26] <SiegeLord> That's also true in Rust, though, to a certain degree
[18:03:29] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[18:03:39] *** Joins: MaikKlein (maik@moz-ECF25244.dip0.t-ipconnect.de)
[18:03:56] *** Quits: heftig (heftig@moz-22E2F36E.dip0.t-ipconnect.de) (Quit: Quitting)
[18:05:12] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Ping timeout)
[18:05:15] *** Joins: heftig (heftig@moz-22E2F36E.dip0.t-ipconnect.de)
[18:05:45] <tjc> SiegeLord: You mean the restrictions on where impls can live?
[18:06:03] *** Quits: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP) (Ping timeout)
[18:08:20] <SiegeLord> I guess I'm not sure... both C++ and Rust have monomorphization, so you often need to compile new instances of templated code alongside the calling code
[18:08:24] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[18:08:32] <SiegeLord> And in practice, you can manually instantiate templates in C++
[18:08:37] <cmr> But in rust you don't need to typecheck that code
[18:08:51] <cmr> which is nice
[18:09:01] <cmr> compiler is already slow enough :p
[18:09:08] <SiegeLord> Yes, absolutely... but I wouldn't say you don't have to recompile Rust generics
[18:09:19] <SiegeLord> You skip a few steps, but not all of them
[18:09:21] <tjc> Well
[18:09:22] <cmr> right
[18:09:25] <tjc> recompile, but not re-typecheck
[18:09:29] <tjc> so at least things don't fail unexpectedly
[18:09:37] <tjc> I'll have to think a little more about this, though
[18:09:45] <cmr> tjc: Cross-library generics without header files!
[18:09:48] <tjc> I want to hide details that don't matter for an intro tutorial, but I want to be honest too :-)
[18:09:53] <tjc> cmr: "no header files", right good point
[18:10:22] <tjc> ok, thanks for the answers, all! lunchtime
[18:11:10] *** Quits: tjc (tjc@moz-5864AB44.hsd1.or.comcast.net) (Quit: Places to go, people to annoy)
[18:12:38] <SiegeLord> Huh, Rust wasn't monomorphizing things as recently as a year ago
[18:12:43] <SiegeLord> Wonder what it did back then
[18:13:04] <bstrie> SiegeLord: iirc monomorphization was implemented by marijn in march of last year
[18:13:15] <bstrie> maybe even february
[18:13:41] *** Joins: benh (ben@moz-4A0366D2.org)
[18:13:52] <bstrie> SiegeLord: before that I think it was using vtables
[18:14:00] *** Quits: MaikKlein (maik@moz-ECF25244.dip0.t-ipconnect.de) (Ping timeout)
[18:14:09] <SiegeLord> I see
[18:16:47] <pcwalton> it used vtables and dynamic size computations at runtime
[18:17:40] *** Joins: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP)
[18:17:46] *** Quits: ecr (ereed@2557E599.66715431.D25A875A.IP) (Quit: Leaving.)
[18:19:26] *** Joins: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP)
[18:19:48] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[18:21:34] <bblum> ping someone who knows the visitor coe
[18:21:35] <bblum> *code
[18:21:43] <bblum> like, the visitor code itself, not just how to use it
[18:23:48] *** Joins: berak (chatzilla@6C6BB9B2.5291F4C0.16E13E53.IP)
[18:23:58] *** Parts: berak (chatzilla@6C6BB9B2.5291F4C0.16E13E53.IP) ()
[18:25:07] *** Quits: mleise1 (marco@moz-3468AB5B.pools.arcor-ip.net) (Quit: Leaving.)
[18:25:29] <acrichto> bblum: pnkfelix was working on that recently I believe
[18:25:44] <bblum> pnkfelix: ping
[18:26:06] *** Quits: dylukes (dylukes@moz-B5418F79.hsd1.pa.comcast.net) (Quit: ["Textual IRC Client: www.textualapp.com"])
[18:26:43] <bjz> bstrie: macros aren't a good replacement for templates. It's a shame to abuse them to hack generic code.
[18:26:48] *** Joins: mleise (marco@moz-3468AB5B.pools.arcor-ip.net)
[18:27:43] *** Quits: eevee (eevee@moz-A643AA65.evrt.wa.frontiernet.net) (Quit: leaving)
[18:27:48] <bstrie> bjz: that's my question, are templates used more for metaprogramming or more for generics?
[18:28:07] <bjz> bstrie: they do allow for a ton of awesomeness, but I wouldn't use it to convince a C++ programmer
[18:28:17] <cmr> in code written by mortals I've only seen generics
[18:28:34] <SiegeLord> I was always under the impression that template metaprogramming was an accidental discovery in C++
[18:28:43] <bstrie> then I dispute the assertion that we can't use the word "parametricity" :P
[18:29:26] <bjz> bstrie: insert 'parametric polymorphism' where most people say 'generics' :)
[18:29:41] <cmr> bluh
[18:30:20] <bjz> bstrie: I've been abusing them for generic programming this last week or so and it's been.... difficult
[18:30:40] *** Joins: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP)
[18:30:40] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/GgSCuQ
[18:30:40] *** Parts: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP) ()
[18:30:57] <pcwalton> yay, another perf improvement
[18:31:06] <pcwalton> ~4x borrow check perf improvement for me
[18:31:06] <cmr> that took 40 minutes to land, that seems off
[18:31:18] <cmr> maybe not though
[18:31:52] <bjz> bstrie: they are part of the puzzle when it comes to zero-cost abstractions, but they have no knowledge of the type system, as I understand it. only tokenisation.
[18:31:55] *** Joins: dylukes (dylukes@moz-B5418F79.hsd1.pa.comcast.net)
[18:32:22] *** Quits: seth (seth@2C6EF6E2.16E0C35D.DD3002AF.IP) (Input/output error)
[18:32:35] *** Joins: ecr (ereed@2557E599.66715431.D25A875A.IP)
[18:33:24] *** Joins: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP)
[18:33:24] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/i6LLDQ
[18:33:24] *** Parts: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP) ()
[18:33:28] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[18:33:29] <ghrust> 01[13rust01] 15bors pushed 7 new commits to 06auto: 02http://git.io/SP9gkA
[18:33:29] <ghrust> 13rust/06auto 14154270f 15Niko Matsakis: Defer reasoning about region relationships until after regionck....
[18:33:29] <ghrust> 13rust/06auto 14c8ba429 15Niko Matsakis: Correct handling of if/match, and make explicit computation of...
[18:33:29] <ghrust> 13rust/06auto 140d477eb 15Niko Matsakis: move docs into doc.rs
[18:33:30] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[18:34:16] *** Joins: seth (seth@2C6EF6E2.16E0C35D.DD3002AF.IP)
[18:34:38] *** Quits: froglegstew (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[18:34:44] <bjz> bstrie: macros are closer to the C preprocessor than templates
[18:35:14] <SiegeLord> Macros don't operate on tokens though
[18:35:20] <SiegeLord> They operate on AST nodes
[18:35:43] <pauls> SiegeLord: they do, they're just better about it than CPP
[18:35:56] <cmr> rusti: stringify!(SELECT * FROM table WHERE foo = "baz")
[18:35:57] -rusti- "SELECT * FROM table WHERE foo = \"baz\""
[18:36:22] <pauls> Or, I guess it's sort of both; their input is tokens, their output is AST nodes.
[18:36:36] <SiegeLord> Is an expression a token?
[18:37:06] <SiegeLord> I think you're stretching the concept of a token a bit too far
[18:37:29] * bjz defers to pauls
[18:37:46] <cmr> syntax extensions receive tokens, I don't know how the macro dsl works
[18:37:58] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[18:37:59] <pauls> SiegeLord: they have access to the parser; they can ask the parser to parse the next expression.
[18:38:00] <cmr> the only macro I've written myself ICE'd ;)
[18:38:01] <bjz> SiegeLord: I guess my point was they don't deal on the type level
[18:39:00] <pauls> bjz, SiegeLord: yes; they operate before typechecking, and cannot perform typechecking (or inference, etc.) on their own.
[18:40:25] <SiegeLord> So what does saying $x:ty imply?
[18:40:43] <SiegeLord> That $x will be used as a type in the macro, or that only types will be accepted as input?
[18:40:55] <bjz> expect a 'ty' token?
[18:41:01] *** Quits: seth (seth@2C6EF6E2.16E0C35D.DD3002AF.IP) (Ping timeout)
[18:41:32] <bjz> not token isn't the right word
[18:41:33] <pauls> SiegeLord: that $x has to be a sequence of tokens that looks like a type. Just like `:expr` demands that something looks like an expression.
[18:41:47] <bjz> ^yep :)
[18:41:50] <SiegeLord> How is it different than $x:ident
[18:42:31] <cmr> Foo<Bar> is not an ident
[18:42:53] <SiegeLord> Is int an ident?
[18:42:57] <bjz> yes
[18:42:58] <SiegeLord> Or a type?
[18:43:03] *** Quits: jedestep (jedestep@34641662.FB4DE631.66C78B76.IP) (Quit: jedestep)
[18:43:09] <bjz> it's both
[18:43:18] <bjz> it doesn't care what it means
[18:43:25] <bjz> only that it parses
[18:44:02] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[18:44:36] *** Quits: eschweic (Adium@2557E599.66715431.D25A875A.IP) (Quit: Leaving.)
[18:45:45] <bjz> SiegeLord: all the checks and stuff happen after the macro expands
[18:46:03] <SiegeLord> I still wouldn't call an expression a token
[18:46:08] *** Quits: brson (brson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[18:46:11] <cmr> it isn't
[18:46:30] <bjz> SiegeLord: when a man points at the moon don't look at his finger
[18:46:37] <bjz> SiegeLord: :)
[18:46:40] <SiegeLord> What
[18:46:43] *** Joins: seth (seth@2C6EF6E2.16E0C35D.DD3002AF.IP)
[18:46:47] <cmr> yeah that went over my head too...
[18:47:29] <Earnestly> Kung Foo
[18:47:57] <bjz> SiegeLord: basically you're nit-picking. :)
[18:48:27] <bjz> SiegeLord: and yes there is no dispute that a token != an expression
[18:48:30] <SiegeLord> I never said anything about typechecking
[18:48:54] *** Quits: KindOne (KindOne@moz-DBCDCEA8.dynamic.ip.windstream.net) (Ping timeout)
[18:48:56] <SiegeLord> It's just factually wrong to say that their input is mere tokens
[18:49:10] <SiegeLord> That's all I meant
[18:49:18] <cmr> the input is tokens. the :ident and such is how it *matches* against the tokens it receives
[18:49:49] <bjz> SiegeLord: have you written a parser before?
[18:50:07] <SiegeLord> Yes
[18:50:20] <bjz> SiegeLord: it's like 'expect_expr' or whatever
[18:50:49] <bjz> if it reaches something it's not expecting, it complains
[18:51:03] <SiegeLord> That to me is fundamentally different than expect TOKEN_SEMICOLON
[18:51:16] <cmr> (rather, it tries another arm of the macro)
[18:51:22] <bjz> nobody was saying that :)
[18:52:04] <bjz> (I might have sounded like it, but I was maybe a little sloppy with my wording)
[18:52:42] <cmr> SiegeLord: macros (pauls correct me if I'm wrong) are just a fancy DSL implemented as a syntax extension that makes handling sequences of tokens easier and safe(r)
[18:52:43] *** Joins: bananana (Mibbit@moz-EBEA08D4.dynamic.ip.windstream.net)
[18:52:49] *** Quits: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP) (Ping timeout)
[18:52:50] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[18:53:09] <SiegeLord> I've no problem about "sequences of tokens" :P
[18:53:29] <kimundi> (hehe, bjz's finger/moon comment made me remember this: http://www.youtube.com/watch?v=0EygqL--RW4)
[18:53:38] *** Joins: brson (brson@2557E599.66715431.D25A875A.IP)
[18:53:38] *** ChanServ sets mode: +o brson
[18:54:44] <bjz> kimundi: Yeah, I think it's a Chinese proverb. One I must remember myself from time-to-time :)
[18:54:55] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[18:55:26] *** Joins: KindOne (KindOne@moz-DBCDCEA8.dynamic.ip.windstream.net)
[18:55:39] <bjz> kimundi: probably a few variations on it to, as with most sayings :)
[18:55:50] *** Quits: seth (seth@2C6EF6E2.16E0C35D.DD3002AF.IP) (Input/output error)
[18:56:36] <bstrie> "when a man points at the moon, don't look at the moon"  /nonconformism
[18:56:57] *** Joins: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP)
[18:57:22] <bjz> bstrie: look the other way :D
[18:57:23] <Yoric> bstrie: "when the wise man points at the moon, the skeptic keeps an eye on the man, just in case"
[18:57:27] *** Quits: gmcabrita (uid4474@moz-D8B63698.irccloud.com) (Ping timeout)
[18:57:52] <bjz> Yoric: yes, that is even better
[18:57:58] *** Quits: geomyidae__ (uid214@moz-C944F5EC.irccloud.com) (Ping timeout)
[18:58:05] *** Joins: seth (seth@2C6EF6E2.16E0C35D.DD3002AF.IP)
[18:58:19] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[18:58:23] *** Quits: DasIch (dasich@moz-5EDA591.de) (Ping timeout)
[18:58:23] *** Quits: wycats_ (uid79@moz-C944F5EC.irccloud.com) (Ping timeout)
[18:58:26] <bananana> "hey look, the moon!" *steals your wallet*
[18:58:27] <SiegeLord> I sort of get the point behind IteratorUtil, but can somebody tell me why its needed?
[18:58:38] <SiegeLord> (as opposed to impl Iterator)
[18:58:38] *** Quits: pcdummy (quassel@moz-CF4CA865.page4me.ch) (Ping timeout)
[18:59:11] *** Quits: Aetherspawn_BNC (uid6924@moz-A588D045.irccloud.com) (Ping timeout)
[18:59:12] *** Joins: eschweic (Adium@2557E599.66715431.D25A875A.IP)
[18:59:13] <kimundi> SiegeLord: Not working default methods
[18:59:17] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[18:59:46] <SiegeLord> But what does that allow you to do that can't be done with impl Iterator?
[18:59:49] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Ping timeout)
[18:59:50] <kimundi> SiegeLord: if those adapters where on Iterator, every other iterator would need to implement them all.
[18:59:53] *** Joins: pcdummy (quassel@moz-CF4CA865.page4me.ch)
[18:59:55] *** Joins: jedestep (jedestep@34641662.FB4DE631.66C78B76.IP)
[19:00:12] <engla> SiegeLord: today you can implement Iterator<A> with just one method, next
[19:00:42] <pcwalton> slight improvement on http://huonw.github.io/isrustfastyet/
[19:00:54] <kimundi> SiegeLord: default methods mean you just need to implement them once, at the trait declatation, though you can overwrite them at each Iterator imple for more opimized versions
[19:00:56] <bjz> SiegeLord: they don't want to burden the folks impling Iterator with defining all those other methods
[19:01:03] <SiegeLord> Oh, it's a brainfart... Iterator is not a struct
[19:01:10] <SiegeLord> No such thing as impl Iterator :P
[19:01:25] <cmr> well it could be impl<T> Iterator for T { ... }
[19:01:28] *** Quits: seth (seth@2C6EF6E2.16E0C35D.DD3002AF.IP) (Ping timeout)
[19:01:58] <kimundi> cmr: That would make every type an iterator :P
[19:02:15] <cmr> oh...
[19:02:16] *** Joins: DasIch (dasich@moz-5EDA591.de)
[19:02:20] <cmr> heh
[19:02:30] <bjz> cmr: that is the issue with 'Trait for T'
[19:02:41] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[19:02:54] <bjz> it basically kills off any chance of you specialising anything
[19:03:10] <bjz> 'use with care'
[19:04:12] *** Joins: mixi (mixi@moz-DBD8904A.org)
[19:04:14] *** Joins: froglegstew (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP)
[19:04:53] *** Joins: seth (seth@2C6EF6E2.16E0C35D.DD3002AF.IP)
[19:05:00] *** Quits: ecr (ereed@2557E599.66715431.D25A875A.IP) (Quit: Leaving.)
[19:06:32] <jedestep> is anyone familiar with using travis-ci with rust
[19:06:44] <cmr> jedestep: someone was working on it iirc
[19:06:49] <bjz> rusti: trait A { fn a(&self); } impl<T> A for T { fn a(&self) { println("hi") } } impl A for int { fn a(&self) { println("howdy") } } 5i.a()
[19:06:50] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/eOCA
[19:07:17] <bjz> cmr: there ^
[19:07:18] <jedestep> cmr: not currently functioning?
[19:07:27] <cmr> jedestep: where are you going to get a compiler?
[19:07:46] <jedestep> hmm I see the point
[19:07:59] *** Joins: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[19:08:04] <cmr> you can apt-get one, but there are no up-to-date debs
[19:08:22] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[19:08:24] <jedestep> right, code build from master would not necessarily compile anyway
[19:08:49] <bstrie> hm, github's new interface doesn't look too bad. feels wider
[19:08:55] <bstrie> other than that it's mostly the same
[19:08:57] <cmr> bstrie: lucky
[19:09:16] <bblum> check it the hell out everyone
[19:09:17] * cmr wants the new hotness
[19:09:31] <bblum> i made the vimrc file hilight the module path in "use module;" in addition to "use module::foo"
[19:09:35] <bblum> i will push this fix soon
[19:09:37] <bstrie> cmr: they've just announced that anyone who doesn't get an invite by 6:00 GMT today will be forced to use the *other* new interface, which perfectly mimics sourceforge
[19:09:44] <bblum> but better alert the presses now
[19:10:00] <SiegeLord> Hmm... the ' in lifetimes really wrecks most rust highlighters
[19:10:00] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[19:10:23] <bblum> not the vim one
[19:10:28] <bstrie> bblum: call me when "unsafe" blocks are once again highlighted in the FIXME color scheme
[19:10:31] <kimundi> nor the kate one
[19:10:31] <cmr> SiegeLord: only the old broken ones
[19:10:33] <SiegeLord> Someone who knows haskell should patch pandoc :P
[19:10:54] <bblum> bstrie: you can do that yourself, but i disagree with that
[19:10:56] <cmr> bstrie: what other new interface?
[19:11:25] *** Joins: Blei (philipp@moz-96D25F7A.cust.bluewin.ch)
[19:12:03] <cmr> also /who uses GMT/!?
[19:12:09] <cmr> surely you jest :p
[19:12:11] <bstrie> cmr: it looks like this: http://web.archive.org/web/20000229231427/http://sourceforge.net/
[19:12:17] <cmr> heh
[19:12:27] <SiegeLord> bblum: Where is the vim one located?
[19:12:40] <bblum> SiegeLord: src/etc/vim/
[19:12:43] <SiegeLord> Thanks
[19:12:45] <cmr> oh, I thought by "which perfectly mimics sourceforge" you meant their new UI rollout
[19:12:54] <bstrie> no, I mean the UI itself
[19:13:13] <bstrie> which, in retrospect, has an uncanny resemblance to the PHP language home page
[19:13:30] <SiegeLord> I wonder if I should get scintilla to support rust... or wait for somebody else to do it
[19:14:28] *** Joins: brendan (brendaneic@moz-BE33DA21.fw1.sfo1.mozilla.net)
[19:14:32] *** Quits: seth (seth@2C6EF6E2.16E0C35D.DD3002AF.IP) (Ping timeout)
[19:14:51] *** Joins: seth (seth@2C6EF6E2.16E0C35D.DD3002AF.IP)
[19:16:40] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[19:17:09] *** Quits: zxcdw (r-a@31A5D8CB.B543C4DE.3933CC16.IP) (Ping timeout)
[19:18:31] *** Quits: seth (seth@2C6EF6E2.16E0C35D.DD3002AF.IP) (Ping timeout)
[19:19:23] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Ping timeout)
[19:19:24] *** Joins: ecr (ereed@2557E599.66715431.D25A875A.IP)
[19:21:33] <bblum> graydon: ping
[19:22:15] <graydon> bblum: pong
[19:22:22] <bblum> you wrote the visitor code, right?
[19:22:42] <graydon> the type visitor? yeah
[19:22:54] <graydon> and the AST visitor, ages ago. maybe. or like the first version of it.
[19:22:59] <graydon> I think someone's rewritten it a couple times since
[19:23:01] <graydon> which one?
[19:23:11] <bblum> oh, what's the type visitor for
[19:23:21] <cmr> reflection, no?
[19:23:31] <cmr> or is that yet another visitor
[19:23:45] *** Joins: gazoombo (uid6629@moz-C944F5EC.irccloud.com)
[19:24:05] <graydon> type visitor == reflection, yes
[19:24:20] <bblum> graydon: ok, so, in order to have builtin bounds on traits, i'm adding a @OptVec<TyParamBound> field to ast::ty_path
[19:24:42] <bblum> and going through libsyntax and trying to figure out all the places it needs to be hooked in, or where i can just say opt_vec::Empty and stop worrying about it
[19:24:55] <graydon> ok
[19:25:03] <graydon> so you're interested in the AST visitor?
[19:25:24] <bblum> i think both?
[19:25:40] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[19:25:56] <bblum> would you be willing to take a look at a diff and tell me if i'm doing things right
[19:26:28] <graydon> sure
[19:28:19] *** Quits: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP) (Ping timeout)
[19:28:47] *** Joins: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP)
[19:30:26] <froglegstew> rusti: size_of(int)
[19:30:27] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/PfGh
[19:30:33] <froglegstew> rusti: size_of<int>()
[19:30:34] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/WVLF
[19:30:42] <cmr> rusti: std::sys::size_of::<int>()
[19:30:43] -rusti- 8
[19:30:51] <froglegstew> aah thanks cmr!
[19:30:56] <cmr> np
[19:30:59] <froglegstew> *facepalm* that was dumb
[19:31:16] <froglegstew> :P
[19:31:17] <cmr> I still regularly write incorrect size_of code :)
[19:31:22] *** Quits: jorendorff (jorendorff@moz-1747FB68.hsd1.tn.comcast.net) (Quit: jorendorff)
[19:31:28] <froglegstew> thanks :)
[19:31:32] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[19:31:38] <bblum> graydon: https://github.com/bblum/rust/commit/bbff9032
[19:31:51] <bblum> graydon: the ones marked with "TODO" are the ones i'm least sure of
[19:34:12] *** Joins: jorendorff (jorendorff@moz-1747FB68.hsd1.tn.comcast.net)
[19:34:48] *** Joins: alisdair (textual@moz-EBE9F394.bchsia.telus.net)
[19:35:14] *** Quits: KindOne (KindOne@moz-DBCDCEA8.dynamic.ip.windstream.net) (Ping timeout)
[19:35:58] <graydon> bblum: define "builtin bounds on traits"
[19:36:23] <bblum> so you can be like, "~TraitName:Copy", and be able to copy it
[19:36:30] <bblum> or ~TraitName:Const, so you can put it in an ARC
[19:36:42] <graydon> and this is to be in any context where you can name anything?
[19:36:45] <graydon> or just traits?
[19:36:50] <graydon> ty_path is used pretty extensively
[19:36:54] *** Quits: alisdair (textual@moz-EBE9F394.bchsia.telus.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz)
[19:37:23] <bblum> notionally, this is to be where you can name a trait in type position (as an existential box)
[19:37:33] *** Quits: brendan (brendaneic@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: brendan)
[19:37:41] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Ping timeout)
[19:37:50] <bblum> but my thought was that at parse-time you can't distinguish a named trait from any other named type
[19:38:02] <bblum> and it sure was better than putting it inside ast::Path
[19:38:02] <graydon> that's true. it's a question of how to represent I guess.
[19:38:38] <graydon> ty_bound(@ty,[TyParamBound]) would also work
[19:38:43] <graydon> but might not be much different in practice
[19:38:56] <graydon> so assuming you go down the path you're on here
[19:39:08] <graydon> the change in ast_util needs to pass the bound to vfn()
[19:39:13] <graydon> *bounds
[19:39:43] <bblum> if i add a ty_bound variant i figure i'd need to modify just as much by adding code for the new variant
[19:39:45] <bstrie> rust contributor map updated http://seleniac.org/map/ lots of new little dots
[19:39:52] <bstrie> poor indutny, all alone in the middle of siberia
[19:39:55] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[19:40:29] <graydon> bblum: yeah. and also the change in ext/build.rs looks ok
[19:40:36] <bblum> bstrie: lots of people in the middle of the south atlantic
[19:40:49] <graydon> likewise deriving
[19:41:01] <bstrie> bblum: those are the people who respect their privacy too much to register a location on github :)
[19:41:27] <bblum> i figured
[19:41:31] <graydon> and deriving
[19:42:19] *** Joins: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP)
[19:42:19] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 146210f61 to 149a5bdd7: 02http://git.io/N3iJvQ
[19:42:19] *** Parts: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP) ()
[19:42:21] <graydon> in libsyntax/visit.rs, yes, visit the ty param bounds on fn types too I guess
[19:42:22] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[19:42:22] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/8jeVcw
[19:42:22] <ghrust> 13rust/06auto 14fd09e40 15Brian Anderson: Revert "stop using an absolute rpath"...
[19:42:22] <ghrust> 13rust/06auto 14644774c 15bors: auto merge of #7192 : brson/rust/rpath, r=thestinger...
[19:42:22] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[19:42:54] <bblum> graydon: i guess, for the things i marked with todo, can you explain why i got it right? >_>
[19:43:16] <graydon> because Empty means "no bound"
[19:43:17] <graydon> ?
[19:43:20] <bblum> well right
[19:43:27] <graydon> so that's "working how it works today"
[19:43:30] <graydon> minimal change
[19:43:36] <graydon> I'm not sure I understand what you're asking
[19:43:41] <graydon> what bound would you put in instead?
[19:43:43] <bblum> well, but the question is "might this code need to thread the bounds through it later"
[19:43:56] <bblum> the alternative would be to take bounds as an argument
[19:43:57] <graydon> in the ext stuff, not likely
[19:43:58] *** Joins: KindOne (KindOne@moz-DBCDCEA8.dynamic.ip.windstream.net)
[19:44:11] <graydon> that is building synthetic code via syntax extensions
[19:44:41] <graydon> and for the visitor itself, you are threading it through properly, except in the first case
[19:44:46] <graydon> where you need to pass it to vfn()
[19:44:49] <bblum> like i did with... ty_path in ExtCtxt
[19:45:22] <bblum> (added an argument)
[19:45:41] *** Joins: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com)
[19:45:57] *** Joins: brendan (brendaneic@moz-BE33DA21.fw1.sfo1.mozilla.net)
[19:46:03] <graydon> I .. guess
[19:46:14] <graydon> I don't know. I don't know whether it's just overengineering, if nobody uses it presently
[19:46:19] <graydon> they can add an arg when they use it
[19:46:28] *** Joins: mark_edward (quassel@moz-4A5B1251.wisolt4.epbfi.com)
[19:46:29] <bblum> nod, ok
[19:46:32] *** Quits: KindOne (KindOne@moz-DBCDCEA8.dynamic.ip.windstream.net) (Ping timeout)
[19:46:57] <graydon> depends on the case I guess. I would expect the visitor interface to gain an arg, but things like special-use builder functions in syntax extensions that don't use such things to not bother yet.
[19:47:41] <bstrie> "Learning Rust is kind of a humbling experience. You thought you knew how to manage your memory, yet the Rust compiler insists you are doing it wrong. To add insult to the injury, the Rust compiler is right."
[19:47:53] <bblum> hm, the ast_util change appears to be in the "id visitor"
[19:48:06] <cmr> bstrie: heh. source?
[19:48:17] <bblum> which i think means i shouldn't pass the bounds to vfn()
[19:48:28] <bblum> because they'll get visited by the visit::visit_ty call
[19:48:31] <graydon> oh, ok
[19:50:26] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[19:50:26] <bblum> graydon: in visit.rs, why did the old code for ty_path call visit_path() instead of (v.visit_path)()?
[19:50:29] <bblum> seems like a bug
[19:50:44] <graydon> I don't know
[19:50:49] <graydon> it might be
[19:51:02] *** Quits: eschweic (Adium@2557E599.66715431.D25A875A.IP) (Quit: Leaving.)
[19:51:09] <bblum> it's that way all over the file o_O
[19:51:19] <bstrie> cmr: #programming on freenode
[19:51:37] <cmr> ah, freenode, that network I no longer have in my client's autoconnect...
[19:52:28] *** Quits: carllerche (carllerche@moz-BF6CB667.hsd1.ca.comcast.net) (Quit: carllerche)
[19:52:56] <graydon> bblum: give me a second
[19:53:35] <kimundi> rusti: botsnack
[19:53:35] -rusti- "nom nom"
[19:53:44] *** Quits: dylukes (dylukes@moz-B5418F79.hsd1.pa.comcast.net) (Quit: ["Textual IRC Client: www.textualapp.com"])
[19:54:00] <bblum> oh, it's because the visitor vtable doesn't have a field for visit_path
[19:54:03] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Ping timeout)
[19:54:07] <cmr> Anyone know what timezone strcat is in/around?
[19:54:08] <bblum> neither does it for visit_ty_param_bounds
[19:54:10] <bblum> odd.
[19:54:44] <bblum> ...should it?
[19:55:10] <graydon> sec. on phone
[19:55:14] <bblum> take your time
[19:55:19] *** Joins: seth (seth@2557E599.66715431.D25A875A.IP)
[19:57:10] <brson> cmr: strcat is eastern time
[19:57:44] <cmr> brson: thanks!
[19:58:43] <graydon> bblum: because there's no v.visit_path
[19:58:49] *** Joins: eschweic (Adium@2557E599.66715431.D25A875A.IP)
[19:59:10] <bblum> graydon: yeah, i just realized that above; is there any reason for there not to be?
[19:59:21] <graydon> never seems to have been a need
[19:59:32] <graydon> the visitor interface is driven by "places client code wants to stop to have a look"
[19:59:39] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[19:59:40] <bblum> right
[19:59:45] <graydon> it's just there to factor out a tree-crawl from every other pass
[19:59:50] <bblum> right, yes
[20:00:01] *** Quits: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[20:00:32] <bblum> it seems like a hazard though to have some missing fields because when someone decides they want the field the compiler won't make them change "visit_path()" to "(v.visit_path)()" in the rest of the file
[20:00:50] <bblum> i suppose that's what code review is for
[20:01:01] <graydon> we don't visit lots of AST nodes
[20:01:04] <cmr> wait, you mean reviews are more than someone commenting r+?
[20:01:36] <bblum> c.c
[20:01:36] <graydon> cmr: sometimes. some of us are worse reviewers than others.
[20:01:51] <cmr> ;)
[20:01:53] <graydon> bblum: there are no node-specific visit callbacks on most of the AST node types
[20:02:23] <graydon> bblum: we could, but it'd make the interface gigantic. we assume you can pattern-match out the 1- or 2- levels of detail you want, as a client.
[20:02:32] <bblum> nod
[20:03:12] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[20:03:13] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Connection reset by peer)
[20:03:52] *** Quits: brendan (brendaneic@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: brendan)
[20:04:28] *** Joins: zootm (calum@moz-DCC1F9C3.sgyl.cable.virginmedia.com)
[20:04:30] <bblum> hmmm... i remember i needed to do something in astconv, but don't remember what
[20:04:38] *** Quits: jorendorff (jorendorff@moz-1747FB68.hsd1.tn.comcast.net) (Quit: jorendorff)
[20:04:51] *** Joins: dualhbridge (dad@moz-2D049E6A.sub-70-192-3.myvzw.com)
[20:05:36] <zootm> is this a bad place for dumb language questions?
[20:05:43] <cmr> nope, perfect place
[20:05:52] <zootm> splendid
[20:06:06] <zootm> so forgive me since I'm new to this; but
[20:06:37] *** Quits: fabiand (fabiand@moz-A4F8C258.adsl.alicedsl.de) (Quit: Verlassend)
[20:06:47] <zootm> I have a struct, I have made an owned box for it, and I'm referring to that in a do spawn {} block; my understanding was this would pass ownership to that block/thread
[20:07:03] <zootm> but the compiler reckons "value has non-owned type"
[20:07:16] <cmr> zootm: can you paste your code and also the output of rustc --version?
[20:07:21] <zootm> I thick-headedly believed that ~ would make it owned
[20:07:27] <zootm> sure, no problem
[20:07:33] <bblum> ~ only makes it owned if the stuff inside the ~ is also owned
[20:08:17] *** Joins: brendan (brendaneic@moz-BE33DA21.fw1.sfo1.mozilla.net)
[20:09:16] <zootm> http://pastebin.com/DV0Z0TsF <- error's in the spawn at the bottom; apologies for awful code
[20:09:25] *** Quits: victorporof (victorporo@70DEDDA.9004F55.9B1E38F4.IP) (Quit: victorporof)
[20:09:25] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:09:42] <zootm> bblum, I did try making all of the objects inside ~ as well, but I'm wondering if there's something in those (framework) objects I'm missing
[20:09:52] <cmr> the code actually isn't bad
[20:09:55] <zootm> actually it's possible I've only tried them one at a time. Hmm.
[20:10:17] <zootm> cmr, I assume it's bad because I'm new ;)
[20:10:22] *** Joins: SimonSapin (simon@88F51059.F3BBB17D.144F44FA.IP)
[20:11:11] <zootm> I think I've pasted a non-compiling (for other reasons) version; not sure that the chan declaration in IrcConnection should have a ~ on it
[20:11:26] <zootm> i.e. you may need to squint
[20:11:35] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[20:11:50] *** Joins: robert (robertknig@moz-C34822AC.range86-166.btcentralplus.com)
[20:12:49] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Input/output error)
[20:13:47] <graydon> aatch: ping
[20:14:47] <strcat> yay, rust got smaller again
[20:15:15] <strcat> it's back down to what it was ~0.4
[20:16:37] <cmr> for those playing at home code which exhibits zootm's problem on incoming is https://gist.github.com/cmr/5799934
[20:16:51] <cmr> erm, master
[20:16:59] <cmr> that habit is probably going to die slowly...
[20:17:09] <graydon> anyone have a preference for whether I prioritize aatch's 2nd trans refactoring or the big debuginfo landing?
[20:17:15] <graydon> they are probably going to conflict
[20:17:18] <engla> zootm: yup the tcp buf object is not sendable
[20:17:24] <graydon> brson nmatsakis pcwalton anyone else?
[20:17:39] <strcat> rusti: 5
[20:17:40] -rusti- 5
[20:17:45] <pcwalton> graydon: slight vote for trans refactoring
[20:17:50] <cmr> I think aatch should probably be the one who decides that... personally I lean towards trans
[20:18:02] <graydon> jdm?
[20:18:22] <zootm> engla: that makes some sense; should I be connecting within the spawn block then? I'd like to return an error if the connection wasn't successful
[20:19:01] <zootm> engla: actually, do you know if a TcpSocket is sendable?
[20:19:05] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[20:19:06] <strcat> one day rusti is going to learn that my test is always '5', and start pretending to work when he's broken
[20:19:21] <pcwalton> yeah, dotdash' change over the weekend made rust hugely more usable for me
[20:19:32] <pcwalton> that + the borrow check fix
[20:19:38] <pcwalton> it doesn't swap nearly as much anymore
[20:19:38] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[20:19:52] <engla> zootm: I don't know these modules, I just checked and saw it contained a @ box
[20:19:52] <cmr> strcat: would you mind looking through https://gist.github.com/cmr/5792998 for anything stupid? ignore the spaghetti code, I'm refactoring it, but retaining the same semantics (except cgroup names, and removing the cgroup when I'm done with it)
[20:19:56] <strcat> needs a snapshot ;)
[20:20:07] <pcwalton> yeah, everything is still currently broken according to brson
[20:20:09] <cmr> strcat: in particular it was suggested that I also use cpuacct
[20:20:11] <pcwalton> we can't snapshot for a while
[20:20:20] <zootm> engla, aha, thanks anyway :)
[20:20:33] <strcat> cmr: btw I recommend using rustbench/parent_pid
[20:20:38] <strcat> like playpen does now
[20:20:55] <pcwalton> I'm going to data mine typecheck performance a bit
[20:20:57] <strcat> otherwise they'll conflict (although it would be silly to run more than one, but you might have one SIGSTOP'ed)
[20:21:10] <cmr> well I append a random number to the crate name
[20:21:15] <pcwalton> and continue to push on my reachable rewrite...
[20:21:47] <strcat> cmr: I guess that's fine, I like parent_pid though because it's guaranteed to be unique (in the pid namespace) and corresponds to something real
[20:22:01] <cmr> yeah
[20:22:22] <zootm> anyone following along with my strife,  TcpSocket is not sendable either so no dice. I guess I'll need to do something more complicated to send back errors
[20:22:28] <strcat> cmr: looks fine though
[20:22:33] <cmr> strcat: cool, thanks :)
[20:22:36] <strcat> cmr: cpuacct can tell you stuff like total system/user time
[20:22:46] <strcat> blkio can give you I/O stats, if you care about that
[20:22:57] <cmr> strcat: right. dbaupp thought it would be useful for if/when we have threaded rustc/benchmarks
[20:23:03] *** Joins: MaikKlein (maik@moz-ECF25244.dip0.t-ipconnect.de)
[20:23:23] *** Joins: carllerche (carllerche@moz-BF6CB667.hsd1.ca.comcast.net)
[20:23:42] <MaikKlein> lol there is a game called rust http://playrust.com/ and it is not written in rust. :/
[20:24:11] <bstrie> not yet
[20:24:25] * strcat is going to try to kill off old_iter and 'each' today
[20:25:20] *** Joins: tjc (tjc@D83289CC.8F6D08CD.3F96B88A.IP)
[20:25:20] *** ChanServ sets mode: +o tjc
[20:26:33] *** Joins: steven_is_false (user@D9159E98.E222BF43.348C8185.IP)
[20:26:37] <cmr> tjc: will your talk today be recorded? I don't remember the answer...
[20:26:54] <MaikKlein> I hope that it will be , would be so great
[20:27:00] <cmr> Even someone with an iphone would be fine ;)
[20:27:02] <tjc> cmr: I don't know, but the actual conference talk will be, and will probably be better thanks to all the great feedback I know I'll get tonight :-)
[20:27:06] * cmr impatient
[20:27:27] <tjc> if someone there has equipment and wants to record it, that's fine w/ me, but I don't know if there are any plans
[20:27:36] <cmr> ok, thanks :)
[20:28:05] <nmatsakis> graydon: pong
[20:28:07] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[20:28:43] <graydon> nmatsakis: I was just going to nudge you for review on sully's https://github.com/mozilla/rust/pull/7203 since it is _so cool_
[20:28:50] <MaikKlein> where will I find the talk material?
[20:28:55] <graydon> (and I don't understand whether it's correct)
[20:29:01] *** Joins: eevee (eevee@moz-A643AA65.evrt.wa.frontiernet.net)
[20:29:04] <nmatsakis> graydon: ok :) I'll take a look asap.
[20:29:05] *** Joins: KindOne (KindOne@moz-DBCDCEA8.dynamic.ip.windstream.net)
[20:29:05] <tjc> MaikKlein: I'll post a link to my slides on my blog when they're done (i.e. after Weds morning :-)
[20:29:08] <graydon> (what else is new?)
[20:29:14] <seth> when trying to pattern match on a field i'm getting an error "cannot move out of field", but i can't figure out what syntax will _avoid_ that
[20:29:17] <bblum> nmatsakis: got some time today?
[20:29:17] <MaikKlein> tjc, thanks, I can't wait :)
[20:29:26] <tjc> heh
[20:29:36] <tjc> I can't wait either (I like giving talks; preparing them, not so much...)
[20:29:38] <strcat> seth: ref and ref mut
[20:29:47] <seth> strcat: thanks!
[20:29:49] * seth goes to look them up
[20:29:56] <MaikKlein> :)
[20:30:04] <strcat> rusti: let x = Some(~5); match x { Some(~ ref x) => x, None => fail!() }
[20:30:05] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/KHMD
[20:30:15] <strcat> rusti: let x = Some(~5); fmt!("%?", match x { Some(~ ref x) => x, None => fail!() })
[20:30:15] -rusti- ~"&5"
[20:30:34] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[20:30:34] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/8jeVcw
[20:30:34] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[20:31:26] <seth> related question: what determines whether the default for a type is to copy or move?
[20:31:40] <seth> is it just that only reference types default to copy?
[20:31:45] *** Joins: cscr (Mibbit@moz-9D6D66FB.servers.jiffybox.net)
[20:32:10] <strcat> seth: if it has a destructor, it moves by default
[20:32:20] <strcat> @ is the only exception that that might change
[20:32:24] *** Joins: bytbox (s@moz-2E27684C.student.umd.edu)
[20:32:31] <strcat> but @ doesn't own the object anyway
[20:32:40] <strcat> so *it* doesn't really have a destructor, the box does
[20:32:52] <seth> strcat: having a destructor is the same as having an implementation of Drop, right?
[20:33:02] <strcat> not entirely
[20:33:19] <strcat> having an implementation of Drop or containing a type with a destructor
[20:33:24] <strcat> including ~ and ~[]
[20:33:38] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[20:33:38] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/DGiyjg
[20:33:38] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[20:33:40] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[20:33:40] <ghrust> 01[13rust01] 15bors pushed 10 new commits to 06auto: 02http://git.io/2PhgGw
[20:33:40] <ghrust> 13rust/06auto 142396caa 15James Miller: Methodize TypeNames
[20:33:40] <ghrust> 13rust/06auto 14c5ba8f4 15James Miller: Change calls for TypeName stuff to methods
[20:33:40] <ghrust> 13rust/06auto 1468f166e 15James Miller: Make log_fn_time a method
[20:33:40] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[20:34:13] <seth> strcat: thanks, that makes sense
[20:34:44] <cmr> zootm: I think there's some magic you can do with core::Cell or something like that but I don't know the details
[20:35:05] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[20:35:31] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[20:35:33] <zootm> cmr: awesome, I'll have a look at that. For now I'm just factoring it so it can send an "erk, failed to connect" message to the recipient, and just connect asynchronously
[20:35:53] *** Quits: dualhbridge (dad@moz-2D049E6A.sub-70-192-3.myvzw.com) (Ping timeout)
[20:39:51] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[20:41:39] *** Quits: nano (nano@moz-972880B.superkabel.de) (Connection reset by peer)
[20:41:40] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Ping timeout)
[20:42:09] *** Quits: vk (chatzilla@3E9D68F2.B1163E0C.2A6693DD.IP) (Ping timeout)
[20:43:08] *** Joins: vk (chatzilla@3E9D68F2.B1163E0C.2A6693DD.IP)
[20:44:15] *** Quits: Blei (philipp@moz-96D25F7A.cust.bluewin.ch) (Quit: WeeChat 0.4.1)
[20:44:47] *** Quits: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP) (Ping timeout)
[20:46:03] <seth> i wish there was some equivalent of option::map that behaved like option::chain in that you could return an option from your block instead of a raw value
[20:46:25] <seth> or at least an option::join that would flatten two levels of optionality
[20:47:39] <engla> but that should be just  .chain(identity)
[20:47:41] <strcat> seth: like iterating over the contained values in 2 or more options?
[20:48:15] <seth> engla: hah, yeah, that's true!
[20:48:33] <strcat> rusti: let x = Some(5); let y = None; let z = Some(2); for x.iter().chain(y.iter()).chain(z.iter()).advance |x| { println(x.to_str()) }
[20:48:33] <kimundi> strcat: pong
[20:48:35] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/AVKT
[20:48:56] <seth> strcat: i was thinking more of Option<Option<T>> situations
[20:49:01] <strcat> ah
[20:49:40] <strcat> kimundi: I just left a big comment about what I wanted to talk about on the smart pointer proposal gist
[20:49:47] *** Joins: jensnock_ (jensnocker@moz-C5F27039.cust.bredband2.com)
[20:50:00] * strcat was tired so hopefully it isn't incoherent ;p
[20:50:03] *** Quits: jensnock_ (jensnocker@moz-C5F27039.cust.bredband2.com) (Connection reset by peer)
[20:50:10] *** Quits: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com) (Ping timeout)
[20:50:31] *** Quits: vk (chatzilla@3E9D68F2.B1163E0C.2A6693DD.IP) (Ping timeout)
[20:50:51] <strcat> aatch: http://www.phoronix.com/scan.php?page=news_item&px=MTM5MDg relevant
[20:50:58] *** Joins: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com)
[20:51:16] *** Quits: pcwalton (pcwalton@2557E599.66715431.D25A875A.IP) (Quit: pcwalton)
[20:51:55] *** Joins: pcwalton (pcwalton@2557E599.66715431.D25A875A.IP)
[20:51:55] *** ChanServ sets mode: +o pcwalton
[20:52:26] <bstrie> strcat: are we passing enough info to llvm to be able to use the vectorizer effectively?
[20:52:37] <strcat> sure
[20:52:46] <strcat> it can't kick in very often but it does work well
[20:53:09] <strcat> it's just the loop vectorizer
[20:53:22] <bstrie> wait, they turn it on for -Os ? I always figured vectorizing would increase your code size
[20:53:23] <strcat> the non-loop one isn't enabled by default in clang yet, so we shouldn't
[20:54:07] <strcat> bstrie: why?
[20:54:22] <strcat> it's just transforming the loop body into SIMD instructions
[20:54:22] <seth> engla: actually it's not .chain(id), because if you have the type Option<Option<T>>, then you need a function with type T -> Option<T> for chain
[20:54:38] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[20:54:47] <zootm> if anyone could tl;dr what "moving out of captured outer variable in a heap closure" I would highly appreciate it
[20:54:52] <bstrie> strcat: obviously I hadn't thought it through very well
[20:55:08] <zootm> or even point to any extremely long and boring docs. at the moment I'm struggling to understand it
[20:55:16] *** Joins: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP)
[20:55:35] <strcat> zootm: you're trying to move a variable from outside the closure into the closure and that's not allowed, that's all
[20:55:54] <strcat> think about what happens when you run the closure for the 2nd time - it won't have the value again
[20:55:55] *** Quits: SimonSapin (simon@88F51059.F3BBB17D.144F44FA.IP) (Ping timeout)
[20:56:14] <strcat> it can only move it from outside once
[20:56:32] *** Joins: gmcabrita (uid4474@moz-D8B63698.irccloud.com)
[20:56:35] <strcat> right now Cell is used as a workaround
[20:56:41] <strcat> when you know the closure only runs once
[20:56:56] <strcat> if it doesn't only run once, the design needs to be changed to not need to move stuff into it
[20:57:01] *** Joins: geomyidae__ (uid214@moz-C944F5EC.irccloud.com)
[20:57:27] <strcat> (Cell turns a 2nd run into a failure, because a value won't be contained anymore)
[20:57:59] <zootm> strcat: right; I thought I was doing what was suggested in docs, though (it's a do spawn{} block capturing a Chan<whatever>). I can see how it can't tell that spawn won't call the closure multiple times. my example looks so similar to the tutorial
[20:58:12] <zootm> ...that it's a little confusing that that works and mine doesn't, though
[20:58:23] <strcat> does the tutorial example actually work?
[20:58:26] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[20:58:29] <zootm> strcat, I'll bang it in a Cell for the time being, thanks
[20:58:41] <steven_is_false> Should I be able to move out out of a captured outer variable in a once heap closure?
[20:58:42] <zootm> strcat, I have not tried the example; maybe that's my problem :D
[20:59:01] <strcat> steven_is_false: yes, if we had them
[20:59:27] <steven_is_false> strcat: We have the syntax but we haven't actually done anything with it?
[20:59:33] <strcat> right
[20:59:39] <steven_is_false> strcat: Thank you.
[20:59:53] <strcat> goodbye eachi
[20:59:58] <zootm> strcat, should I be treating the tutorials more as aspirational than necessarily correct?
[21:00:10] <bstrie> is eachi dead?
[21:00:14] <strcat> bstrie: it will be
[21:00:20] <strcat> killing it off right now
[21:00:22] <strcat> and each
[21:00:27] <bstrie> I'll be sure to do a little jig when it lands
[21:00:27] <strcat> and each_consume, soon
[21:00:32] <kimundi> strcat: Just read your comment. I might be using the name 'allocator' in a horrible wrong way, but what I gathered in this channel is that custom smartpointer is something you might generally want in rust, depending on your needs.
[21:00:46] <bstrie> strcat: it seems premature to kill of each until the new for sugar lands
[21:00:48] <strcat> kimundi: an allocator isn't a smart pointer
[21:00:55] *** Quits: gmcabrita (uid4474@moz-D8B63698.irccloud.com) (Quit: )
[21:01:04] <kimundi> "I might be using the name 'allocator' in a horrible wrong way"
[21:01:18] <strcat> an allocator is a replacement for jemalloc, the existing ~ and Rc/RcMut could take an allocator parameter
[21:01:42] <strcat> there's no need for someone to ever make another generic reference counting smart pointer
[21:01:53] *** Joins: Aetherspawn_BNC (uid6924@moz-A588D045.irccloud.com)
[21:01:54] <strcat> they might want one with weak pointers, but that's a much different design
[21:02:15] <strcat> lots of third party libraries use reference counting, but that's just handled by plain old destructors - hard to really call those a "smart pointer"
[21:02:48] <strcat> the possible smart pointers are unique, refcounting, refcounting with a weak pointer and gc
[21:03:00] <strcat> and mutable variants of the 3 shared pointer types
[21:03:13] *** Quits: mark_edward (quassel@moz-4A5B1251.wisolt4.epbfi.com) (Ping timeout)
[21:03:42] <strcat> an allocator would just be a parameter to containers like vector, treemap, etc. and also the smart pointers
[21:03:48] *** Joins: ghrust (ghrust@AD60B2E3.6A2AE50.F3114085.IP)
[21:03:48] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 147d9344b to 14644774c: 02http://git.io/N3iJvQ
[21:03:48] *** Parts: ghrust (ghrust@AD60B2E3.6A2AE50.F3114085.IP) ()
[21:03:50] *** Joins: ghrust (ghrust@E7A4CCE2.6A2AE50.F3114085.IP)
[21:03:50] <ghrust> 01[13rust01] 15bors pushed 12 new commits to 06auto: 02http://git.io/mnVvBA
[21:03:50] <ghrust> 13rust/06auto 14868f9a8 15Vadim Chugunov: Use DIBuilder in debuginfo
[21:03:50] <ghrust> 13rust/06auto 146cc3189 15Vadim Chugunov: Made the while DebugContext mutable, not just created_* hashes...
[21:03:50] <ghrust> 13rust/06auto 141079e41 15Vadim Chugunov: Move "return" basic block after all other function blocks.
[21:03:52] *** Parts: ghrust (ghrust@E7A4CCE2.6A2AE50.F3114085.IP) ()
[21:03:58] <cmr> aatch: looks like you lose :p
[21:03:59] <strcat> and I don't really think allocators (like C++ has) turned out to be a useful thing to have
[21:04:27] <zootm> thanks to all who've helped me, this has been handy
[21:05:12] <strcat> kimundi: an allocator essentially needs the basic malloc/free interface
[21:05:23] <strcat> allocate a block of n size, deallocate a block
[21:05:29] <strcat> possibly supporting reallocation
[21:05:48] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[21:05:48] <strcat> and the huge problem being that if you have a generic interface like that, it can no longer be very specialized
[21:06:04] *** Joins: pyrac (pyrac@moz-42726773.w83-200.abo.wanadoo.fr)
[21:06:10] <pcwalton> yeah, I kind of felt the same way about C++ allocator parameters
[21:06:28] <froglegstew> hrm, would there happen to be a way to set the fields of a struct to *non* int values? (e.g. i32?)
[21:06:30] <pcwalton> it's hard to write code that is truly generic over *allocation strategies* the same way it is to write code that is generic over *types*
[21:06:36] <strcat> you might want an allocator for objects of a constant size that never frees memory, etc.
[21:06:44] <cmr> Looking through the STL at the allocator stuff always made me go "WTF?"
[21:06:52] <kimundi> strcat: Sorry, I'm tebnding to throw aroun terminology without being completly sure if I'm doing it right. I think I have to rename Allocator->SmartpointerFactory and Allocation->Smartpointer in my proposal to be correct for what I meant them to be.
[21:07:55] <strcat> cmr: well, std::vector can't even use realloc ;p
[21:08:02] <strcat> the C++ stdlib has a lot of issues
[21:09:15] <strcat> rust objects aren't allowed to depend on their address
[21:09:18] <strcat> C++ objects are
[21:09:34] *** Joins: snearch (snearch@moz-896B448A.pool.mediaways.net)
[21:09:45] <kimundi> Anyway that part of my proposal is just written there to have more than just 'I propose this syntax, you figure out the semantic'... that is it's just an example to what kind of trait constructs the syntax might desugar to.
[21:09:51] <strcat> kimundi: ah, I see what you mean - I thought you were talking about something else
[21:09:59] <strcat> allocator in my mind means what it does in C++
[21:10:11] <pcwalton> I think kimundi's proposal is basically what we want
[21:10:21] <pcwalton> the only question is "whither @"
[21:10:29] <strcat> I don't think we should have dynamic borrowing as sugar though.
[21:10:36] <pcwalton> yes, I would like to eliminate dynamic borrowing
[21:11:00] <strcat> if we don't have dynamic borrowing as part of the traits they can be simpler
[21:11:09] <strcat> because the borrow ones can just return &'r T and &'r mut T
[21:11:23] <kimundi> Yeah, I meant more a... 'logical' allocator. one that you tell 'prepare this amuont of memory and I write a type of the right size into it. Then give me somekind of handle so that I can clean it up later'
[21:11:29] <strcat> instead of a closure that has to invisibly wrap a block of code
[21:11:45] <strcat> for one thing using closures for that would be really slow
[21:12:46] <strcat> { let x = @5; let r = &*x; let i = 5; }
[21:12:57] <strcat> err, with @mut
[21:13:02] <strcat> let i = 5 would be the body of a closure, which is strange
[21:13:13] <strcat> for generic ones at least
[21:13:47] <strcat> unless there was just a magical destructor called at the end of the block for a non-existent object to remove the freeze
[21:14:13] <strcat> but you need the previous freeze state, to restore it
[21:14:30] <sully> hm; does anybody know how well supertraits work?
[21:14:55] <strcat> https://github.com/mozilla/rust/blob/master/src/libextra/rc.rs#L192
[21:15:16] <strcat> the whole dynamic freeze thing is incredibly slow and prone to failure
[21:15:23] <strcat> better to just pass RcMut or @mut by-value everywhere
[21:16:08] <pcwalton> sully: they mostly work unless you're trying to inherit from Copy/Owned/Freeze
[21:16:16] <strcat> so... each & borrow is
[21:16:18] <sully> ok
[21:18:40] <kimundi> strcat, pcwalton: Well, I see pro/contra arguments both for keeping @ and removing it. Keeping it means more symmetry with ~ and &. Removing it means even more simple syntax, but more assymmetry between buildin ones and library ones.
[21:19:29] <strcat> I think we'll have to replace ~ anyway
[21:19:42] <pcwalton> hmm really?
[21:19:44] <strcat> with a library type, and then switch ~ to sugar for the library type
[21:19:50] <strcat> pcwalton: way too much depends on the header :(
[21:19:53] <steven_is_false> strcat: I like that.
[21:19:57] <strcat> it's part of our closure representation
[21:19:59] <pcwalton> oh, I figured... we'd just fix that
[21:20:03] *** Joins: lkuper (lkuper@3F3D6782.FFCF2A3B.51B6877.IP)
[21:20:33] <steven_is_false> strcat: But what about vectors (~[]) is it possible to do that with those too?
[21:20:34] <strcat> pcwalton: well it seems like it would be easier to just add a pointer trait + make it a library type and just make ~ sugar
[21:21:23] <strcat> it can just desugar to Unique<T> and Unique::new(5) + the pointer trait can deal with borrows/deref
[21:21:28] *** Quits: Jesin (Jessin_@moz-3AD6F09F.res.lehigh.edu) (Ping timeout)
[21:21:40] <strcat> and then you can pass Unique as a type parameter
[21:22:18] <steven_is_false> strcat: How would that interact with traits?
[21:22:30] <lkuper> One of the Hacker School students is reading the Rust tutorial and got confused about the phrase "aggregate data" in http://static.rust-lang.org/doc/tutorial.html#boxes . by that do we mean things like structs, records, tuples, etc.?
[21:22:41] <strcat> fn foo<P: Pointer>(x: Pointer<int>) { } or something
[21:22:47] <strcat> err
[21:22:48] <tjc> lkuper: compound data
[21:22:49] <strcat> P<int>
[21:22:51] <tjc> that has components
[21:23:06] *** Quits: maxli (maxli@F2D29657.F60B0462.67AC9B1.IP) (Quit: Leaving.)
[21:25:08] <lkuper> tjc: ok, yeah, that's what I thought.  I don't totally understand their confusion; it may be a non-native-speaker issue.
[21:25:36] *** Quits: MaikKlein (maik@moz-ECF25244.dip0.t-ipconnect.de) (Ping timeout)
[21:25:37] <tjc> lkuper: might just be an unfamiliar word. I'm not sure there's a better/more standard synonym -- if there is, feel free to submit a doc pull request :-)
[21:26:05] <strcat> tjc: I think compound data would be a better term
[21:26:17] *** Quits: steven_is_false (user@D9159E98.E222BF43.348C8185.IP) (Ping timeout)
[21:26:20] <lkuper> yeah, I like "compound data" better too.
[21:26:31] *** Joins: enticeing (user@1983AA36.E4834407.EAAB5301.IP)
[21:26:34] <strcat> aggregate data *doesn't* really make sense 
[21:26:53] <strcat> if you already know what a struct is, you can make that stretch
[21:27:00] <enticeing> just making sure i don't have any compile problems: we have to declare `extern mod extra;` now, right?
[21:27:08] <tjc> enticeing: Yes
[21:27:12] <enticeing> okay, thanks
[21:27:35] *** Joins: dylukes (dylukes@B07688F2.F727F25D.E8393EEB.IP)
[21:27:42] <strcat> or 'composite' data
[21:28:01] <strcat> that actually turns up a wikipedia page ;p
[21:28:05] <strcat> https://en.wikipedia.org/wiki/Composite_data_type
[21:28:13] *** Quits: Azdle (Azdle@moz-B334B496.hfc.comcastbusiness.net) (Ping timeout)
[21:28:18] <strcat> 'aggregate data' just finds you stuff about aggregating test results
[21:28:40] <lkuper> "non-scalar"
[21:28:57] <lkuper> (don't use that.)
[21:29:23] *** Quits: froglegstew (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[21:29:32] <tjc> Yeah, "non-" things aren't good
[21:29:34] <strcat> "structs and tuples are composite data, composed of several other objects" <- something like that
[21:29:39] *** Quits: sw17ch (sw17ch@moz-39D8564F.wndsny.tds.net) (Quit: sw17ch)
[21:29:45] *** Joins: froglegstew (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP)
[21:29:52] *** Joins: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net)
[21:29:57] <strcat> composed of other objects*
[21:30:15] <strcat> we have silly 1-tuples and single field structs after all ;p
[21:30:32] <tjc> we also have empty structs :=D
[21:30:36] <tjc> I think, anyway
[21:30:41] <strcat> yeah, we do
[21:31:07] <strcat> they're the tuple-struct version of ()
[21:31:13] <tjc> yeah
[21:31:18] <strcat> I guess we could consider () a tuple?
[21:31:29] <tjc> We could, but in the implementation we don't
[21:31:38] <tjc> () is kind of special
[21:31:47] <strcat> well the implementation doesn't matter :), it only has to make sense to users
[21:32:30] *** Joins: wycats_ (uid79@moz-C944F5EC.irccloud.com)
[21:32:48] *** Quits: pyrac (pyrac@moz-42726773.w83-200.abo.wanadoo.fr) (Quit: pyrac)
[21:33:10] <strcat> heh, 5 compile-fail tests failed
[21:33:17] *** Quits: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net) (Input/output error)
[21:33:20] <Luqman> rusti: struct Foo; sys::size_of::<Foo>()
[21:33:22] <strcat> oh nvm just the stupid stack canary clobbering :|
[21:33:26] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/TULd
[21:33:36] <Luqman> rusti: struct Foo; std::sys::size_of::<Foo>()
[21:33:38] -rusti- 0
[21:34:05] <strcat> rusti: let x = (); let y = &x; y as *() as uint
[21:34:07] <kimundi> strcat, pcwalton: In theory we could just move ~ and @ to the library, make sure all hooks are in place for them to work as before, and then later as an ergonomic decision reintroduce @P T as sugar, and ~T as sugar for @Uniq T :P
[21:34:08] -rusti- 139748706675224
[21:34:19] <strcat> rusti: let x = (); let y = &x; y as *() as uint
[21:34:20] -rusti- 140316988729880
[21:34:22] <strcat> rusti: let x = (); let y = &x; y as *() as uint
[21:34:25] -rusti- 139913836423704
[21:34:50] <strcat> kimundi: I don't really like the @ sugar though
[21:35:04] <strcat> smart pointers aren't different than other types with destructors
[21:35:20] <strcat> it'd be a really arbitrary choice
[21:35:43] <strcat> there are smart pointers without a type parameter, or with multiple type parameters
[21:36:01] <strcat> or multiple construction parameters
[21:36:15] <strcat> like an extern fn to use as a destructor (unique_ptr in C++)
[21:36:41] <kimundi> strcat: Their usage pattern is different though. There are only a handfull of them, and they are responsible for managing memory.
[21:36:56] <strcat> there are more than a handful of non-generic ones
[21:37:01] <strcat> or less generic ones
[21:37:21] <strcat> gobject in rust would be done with reference counting smart pointers
[21:37:23] *** Quits: brson (brson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[21:37:39] <kimundi> strcat: That's what I wanted to ask you, what do you think is missing in regard to more parameters etc
[21:38:49] *** Quits: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP) (Ping timeout)
[21:38:54] <strcat> well I don't think anything is missing if we just use Pointer<T, BucketSize, Align> or whatever
[21:39:39] <kimundi> My proposal is based on my knowledge on the matter, with isn't really all that extensive, so I don't really know wich usafe patterns my proposal doesn't apply to. :P
[21:39:56] <kimundi> usage*
[21:40:42] <strcat> intrusive data structures are a lot like smart pointers
[21:40:54] <pnkfelix|rcirc> bblum: pong
[21:41:06] <kimundi> define intrusive data structures please
[21:41:39] <strcat> data structures where the objects contained in them are the nodes of the data structure
[21:41:41] <bblum> pnkfelix|rcirc: no need; got my question answered
[21:43:01] <pcwalton> sully: http://huonw.github.io/isrustfastyet/
[21:43:12] <kimundi> strcat: Hm, I'm not sure how that is similar to a smartpointer.
[21:43:32] <strcat> smart pointers are containers with exactly 1 element
[21:43:35] *** Joins: brson (brson@2557E599.66715431.D25A875A.IP)
[21:43:36] *** ChanServ sets mode: +o brson
[21:43:57] <kimundi> Eh, I wouldn't define it like that
[21:44:10] *** Joins: true_droid (Adium@moz-123FD9B8.beck.volia.net)
[21:44:10] *** Quits: true_droid (Adium@moz-123FD9B8.beck.volia.net) (Quit: true_droid)
[21:44:22] <kimundi> container implies it could be empty, no?
[21:44:27] <strcat> no
[21:44:32] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Input/output error)
[21:44:42] <strcat> containers can be a specific size
[21:45:25] <strcat> [int, ..1]
[21:45:45] *** Quits: tjc (tjc@D83289CC.8F6D08CD.3F96B88A.IP) (Ping timeout)
[21:46:03] <kimundi> right but that is just the data, without memory managemnt semantic attached
[21:46:35] <strcat> other data structures come with memory management semantics
[21:46:39] <strcat> intrusive trees or lists
[21:46:49] <strcat> the nodes don't have to be on the stack
[21:46:55] <kimundi> I don't see a smartpointer as containing the memory, I see it as having control over the place it is (somewhere on the heap)
[21:47:15] <strcat> it doesn't control the place where it is though, if they were generic over multiple allocators
[21:47:21] <kimundi> sure, but those _use_ smartpointer internally then.
[21:47:34] <strcat> all they control is the lifetime of the object they contain
[21:47:44] <strcat> kimundi: no, allocators are lower level than smart pointers
[21:47:57] <strcat> smart pointers are a thin shim over an allocator
[21:48:17] <strcat> providing something like destruction at end of scope, or refcount-- at end of scope and destruction at a refcount of 0
[21:48:49] <strcat> ~ or Rc could happily allocate on different heaps or a pool on the stack
[21:49:21] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[21:49:24] <kimundi> Sorry, I kinda have trouble following what your saying. Also I don't find a good example of a intrusive data structure on the web, still trying to wrap my head around it...
[21:49:35] <strcat> they don't care where the allocator (currently just jemalloc) gives them memory from
[21:50:29] *** Quits: dylukes (dylukes@B07688F2.F727F25D.E8393EEB.IP) (Quit: ["Textual IRC Client: www.textualapp.com"])
[21:50:30] <kimundi> right, I know. It's about where and when tham memory can get freed again, and how many places have acces to it
[21:51:13] *** Joins: tjc (tjc@D83289CC.8F6D08CD.3F96B88A.IP)
[21:51:13] *** ChanServ sets mode: +o tjc
[21:51:19] <strcat> and how it gets freed, if they were more like traditional smart pointers
[21:51:23] <pnkfelix> strcat: I hadn't heard that terminology ("intrustive data structure") before now, but I'm not deep in the c++ community.  Would you say that the answer here: http://stackoverflow.com/questions/5004162/what-does-it-mean-for-a-data-structure-to-be-intrusive accurately matches what you are saying?
[21:51:42] <strcat> pnkfelix: pretty much
[21:51:54] <kimundi> Thait's what I understand a smartpointer to be: A handle to a memory allocation kith specific cleanup and access semantic. The allocator itself can/will be the same across different ones.
[21:51:58] <strcat> pnkfelix: the linux kernel pretty much exclusively uses intrusive data structures, the rbtree/list implementations there are a good place to look
[21:52:22] <strcat> pnkfelix: if an object wants to be in a specific tree/list, it adds the fields needed to participate in them
[21:52:27] <pnkfelix> strcat: so a record structure that has a next field intended to be used in some paritcular linked list, that sounds pretty intrustive to me.
[21:52:56] <strcat> pnkfelix: yeah, as long as you can allocate the object anywhere you feel like rather than the container deciding
[21:53:06] *** Joins: sw17ch (sw17ch@moz-675AFBCF.hsd1.mi.comcast.net)
[21:53:46] <strcat> can still be automated
[21:54:08] <pnkfelix> strcat: hmm.  Interesting.  (I can imagine data-structure with a hybrid approach, where both the element representation *and* the container's allocator conspiring in some way.  Certainly some GC's could be pictured that way.)
[21:55:06] *** Quits: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net) (Ping timeout)
[21:55:18] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[21:55:26] <strcat> pnkfelix: so for example a certain creature in an rpg could be an object, and any lists/maps referring to it would be added intrusively as fields
[21:55:27] <kimundi> strcat: Still I don't see how such a structure can be considered a smartpointer as a whole. Isn't it simply about the element being managed by some smartpointer, and having acces to other elements that are stored the same way?
[21:55:34] <strcat> when it's destroyed, it can unlink itself from the data structure
[21:55:57] <strcat> structures*
[21:56:09] <strcat> pnkfelix: http://www.boost.org/doc/libs/1_53_0/doc/html/intrusive/auto_unlink_hooks.html
[21:56:36] <strcat> kimundi: well "smart pointer" isn't really very well defined
[21:56:44] <Amanieu> (please don't copy the boost intrusive API for rust)
[21:56:58] <strcat> I don't really consider @ and @mut to be smart pointers (at least once a gc handles them)
[21:57:19] *** Joins: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP)
[21:57:19] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/mnVvBA
[21:57:19] *** Parts: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP) ()
[21:57:35] <kimundi> strcat: I think we need to agree on a definition then :P
[21:58:15] <kimundi> Or an alternative term that describes what @, @mut, ~, Rc, Arc have in common
[21:58:21] <strcat> a generic adaptor that wraps another type with specific lifetime semantics, using destructors
[21:58:52] <strcat> @/@mut won't be "smart" pointers once a gc manages them
[21:59:05] <strcat> they won't be calling a destructor to implement the semantics at the end of a scope
[21:59:09] <strcat> the gc will be dealing with it
[21:59:19] <kimundi> right, smart is the wrong name for the handle itself
[21:59:29] <strcat> but the handle itself is the *pointer*
[21:59:44] <strcat> if the handle doesn't implement the lifetime semantics, it's not a smart pointer
[22:00:13] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[22:00:13] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/3fE91Q
[22:00:13] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[22:00:17] *** Joins: ghrust (ghrust@E7A4CCE2.6A2AE50.F3114085.IP)
[22:00:17] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/HzRHNw
[22:00:17] <ghrust> 13rust/06auto 14c7013ba 15Philipp Brueschweiler: std::dynamic_lib: start fixing windows implementation...
[22:00:18] <ghrust> 13rust/06auto 144c90b98 15bors: auto merge of #7131 : Blei/rust/windows-dynamic-lib, r=graydon...
[22:00:18] *** Parts: ghrust (ghrust@E7A4CCE2.6A2AE50.F3114085.IP) ()
[22:00:20] *** Quits: tjc (tjc@D83289CC.8F6D08CD.3F96B88A.IP) (Quit: Places to go, people to annoy)
[22:00:49] *** Joins: Jesin (Jessin_@moz-157A63DD.cc.lehigh.edu)
[22:01:38] <kimundi> "AllocPointer"? a ptr-like type that wraps an memory allocation with special lifetime semantics.
[22:02:08] <strcat> so anything with a destructor?
[22:02:25] <kimundi> wich might include 'being dumb, letting the hard work be done from someone else', like for @
[22:02:44] <kimundi> strcat: Well not really
[22:02:45] <strcat> @mut and RcMut won't be very pointer-like if we remove sugared dynamic borrowing
[22:03:11] <graydon> strcat: @ still has to participate in the borrowing regime. and rooting when you reach through it.
[22:03:17] <graydon> it has to be a little smart
[22:03:40] <strcat> graydon: yeah, but not really in the sense than the term was made for
[22:03:50] <strcat> 'smart pointer' is supposed to contrast it with gc
[22:04:58] <strcat> and our smart pointers aren't very much like the traditional C++ ones
[22:05:06] <graydon> yeah
[22:05:11] <strcat> because they're only for malloc
[22:05:27] <kimundi> strcat: a type with detructor handles memory deallocation in a custom way, that's imo something different than having a generic type with the sole purpose to hadle deallocation for any type the same way
[22:05:27] <strcat> can't do make_unique(open_thing(), destroy_thing) in rust
[22:05:47] <strcat> make_unique(get_db_handle(), commit_and_close)
[22:06:26] <strcat> kimundi: smart pointers are about the lifetime though, not how it gets destroyed
[22:06:32] <strcat> and they don't necessarily involve allocations at all
[22:06:50] <kimundi> Not?
[22:07:09] *** Quits: saml (sam@moz-14C16814.cst.lightpath.net) (Quit: Leaving)
[22:07:12] <strcat> std::unique_ptr in C++ takes an optional second parameter with the destructor
[22:07:28] <strcat> it only *defaults* to new/delete or new[]/delete[]
[22:07:32] *** Joins: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP)
[22:07:36] <kimundi> Well I have no idea about how c++ does stuff :P
[22:08:09] <strcat> it's a "smart" pointer because it captures a pointer and bestows a certain set of lifetime semantics on it
[22:09:02] *** Quits: dan_johnsin (dan_johnsi@6902762D.11B071D.FB9A45AF.IP) (Client exited)
[22:10:04] <kimundi> I'm looking for a name for a family of types that encapsulate "here is data of type T with size N, please do a malloc for it, and return me a handle with specific semantics to when free get's called"
[22:10:34] *** Quits: mleise (marco@moz-3468AB5B.pools.arcor-ip.net) (Quit: Leaving.)
[22:10:48] <bblum> the spell-checker is not very good when your typo was to make a token appear in the wrong syntactic class
[22:10:59] <kimundi> Which I think is how rusts <insert correct term here>-ptrs are supposed to work
[22:11:59] <strcat> ~ is just malloc/free
[22:12:07] <strcat> in the same way that a File object is fopen/fclose
[22:12:15] <strcat> it's not a special class of thing
[22:12:26] <strcat> it's not really a smart pointer, in the C++ sense of the term
[22:12:46] <kimundi> It's a wrapper type around malloc/free, just like Gc. Thge difference is where and how free get's called
[22:12:52] <strcat> it's just a type with a destructor, and it contains 1 element of a generic type
[22:13:03] <strcat> kimundi: ~ acts like *any* simple type with a destructor though
[22:13:29] *** Quits: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP) (Ping timeout)
[22:13:36] <strcat> the only difference between ~ and File is malloc vs fopen and free vs fclose, the lifetime semantics are the same
[22:13:56] <kimundi> But not every thing with an destructor encapsulate memory to be freed
[22:14:50] <kimundi> strcat: I'm not arguing that. Things can work out  to be the same and still belong to different concepts
[22:15:28] <strcat> but they really aren't different concepts, they're both unique_ptr in C++
[22:15:47] <kimundi> I'm not talking about c++
[22:16:09] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[22:16:17] <strcat> so they're both just types with destructors then
[22:16:36] *** Joins: steven_is_false (user@moz-144077DE.bchsia.telus.net)
[22:16:41] <strcat> you could have UniqueFile and RcFile
[22:16:46] <strcat> just like you can have Unique and Rc
[22:16:49] <strcat> for memory
[22:16:54] <kimundi> yes. That doesn't mean they aren't also different under other viewpoints
[22:17:17] <aatch> graydon, my PR's test failure was because error messages don't match up. I can fix it pretty easily, but I have also a commit that moves count-llvm-insns stuff into task-local storage.
[22:17:23] <strcat> glib regexp are reference counted for example
[22:17:35] <aatch> Is it ok if I push that at the same time?
[22:18:00] <graydon> aatch: ok. I'll r+ both if you like.
[22:18:05] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[22:18:37] <kimundi> strcat: Hmm... now that example is something I can work with. But still there is a conceptual difference
[22:18:56] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Textual IRC Client: www.textualapp.com)
[22:19:08] <kimundi> And that difference being "one calls malloc/free"
[22:19:24] <strcat> ~[] calls malloc/free
[22:19:31] <kimundi> yeas, exactly
[22:19:38] *** Quits: jesseray (Mibbit@moz-4F8B8190.dynamic.ip.windstream.net) (Quit: http://www.mibbit.com ajax IRC Client)
[22:19:38] <aatch> graydon, cool, thanks.
[22:20:05] <strcat> you'd need a special type to handle allocations made by glib/gtk
[22:20:07] <strcat> to call g_free
[22:20:12] *** Quits: brendan (brendaneic@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: brendan)
[22:20:42] *** Joins: wilsonk|2 (kvirc@moz-39EFBFC2.cg.shawcable.net)
[22:20:56] <kimundi> strcat: Thats an ffi wrapper for a foreign memory allocation system then.
[22:21:02] <strcat> like ~
[22:21:20] *** Quits: wilsonk-laptop (kvirc@moz-39EFBFC2.cg.shawcable.net) (Ping timeout)
[22:21:23] <strcat> it's malloc with a destructor, nothing more/less
[22:21:45] <kimundi> yes, that's my point.
[22:22:15] <strcat> so it's a heap memory object
[22:22:30] <strcat> we don't call File a pointer, even if it's implemented as one (if we use FILE and not fds)
[22:23:54] <kimundi> Honestly I'm not sure what exactly it is we're discussing anymore :( I'm just looking for a term that describes what Rc, @, ~, etc have in common so that I can actually talk about this common set of semantics, and if non applyable can be foun invent one.
[22:24:33] <kimundi> "GenericHandleToHeapMemory" might fit the bill
[22:24:45] <strcat> memory allocations
[22:25:05] <kimundi> (a GHMH? :P)
[22:26:02] <strcat> we don't have to bother with the term 'heap' at all
[22:26:10] <kimundi> strcat: ... This all started with you having a problem with me misusing the name 'allocation' to mean 'handle to allocation'
[22:26:44] <strcat> it didn't, one of the things I brought up is that ~ and @ aren't allocators
[22:27:42] <kimundi> arg, whatever. I'm not the kind of person that can keep track of who said what in this kinds of discussions
[22:27:47] *** Quits: a__ (a__@moz-250D9B4.nycmny.fios.verizon.net) (Ping timeout)
[22:28:23] <kimundi> strcat: So calling @, Rc, Arc, ~ 'memory allocation' is okay?
[22:29:06] *** Joins: Tad (Tom@moz-2036EE54.kimsufi.com)
[22:29:09] <strcat> calling ~ a memory allocation makes sense
[22:29:49] <strcat> it *is* the memory allocation, it's just an object representing one
[22:30:11] <kimundi> but not for the others, or...?
[22:30:40] *** Joins: dylukes (dylukes@A9AE6FDC.14D06B7B.E8393EEB.IP)
[22:30:42] *** Quits: lkuper (lkuper@3F3D6782.FFCF2A3B.51B6877.IP) (Ping timeout)
[22:31:23] <strcat> well you can't really say the others actually are allocations
[22:31:36] <kimundi> than it's not the correct term yet
[22:31:39] <strcat> they refer to one
[22:31:46] <kimundi> just like ~ do
[22:31:55] <strcat> ~ doesn't really refer to one
[22:31:57] <strcat> it is the allocation
[22:32:19] <strcat> just like a File object is a file
[22:32:22] <kimundi> sure it does. It can ALSO been seen as being one directly, but that's besides the point
[22:32:35] <strcat> it's not
[22:32:43] <strcat> you could call ~ MemoryAllocation
[22:32:47] <strcat> it would make sense to do that
[22:32:55] <strcat> it wouldn't make sense to do that with Rc/RcMut/@/@mut
[22:33:10] <kimundi> it is if the point was to find a term that also describes the semantic of @, Rc, Arc, ...
[22:33:20] <strcat> why do you need a term to describe those?
[22:33:36] <kimundi> Because my proposal is based on that concept
[22:33:54] <strcat> ~, @ and Rc can implement an immutable Pointer trait
[22:34:01] <strcat> ~ can implement MutablePointer
[22:34:04] <strcat> for overloading the sugar
[22:34:41] *** Quits: robert (robertknig@moz-C34822AC.range86-166.btcentralplus.com) (Ping timeout)
[22:35:12] <kimundi> You made your point that I'm not using the rigth terms, and not taking certain things in account, so I need to define the concet I'm talking about, or else this just results in frustration, mainly on my side :P
[22:35:18] <strcat> Arcs and library mutable shared pointers need closures to do locking/unlocking and freezing/unfreezing
[22:35:21] <kimundi> concept*
[22:35:32] <strcat> and I don't think that should have sugar with */&/&mut
[22:35:41] <strcat> it'd be really strange
[22:35:58] *** Joins: a__ (a__@moz-250D9B4.nycmny.fios.verizon.net)
[22:36:02] <steven_is_false> I shouldn't be using copy anymore right?
[22:36:18] <pcwalton> it'll be removed
[22:36:24] <steven_is_false> I should use clone instead?
[22:36:29] <jedestep> impl Encoder for FooEncoder{ fn emit_nil(&mut self) { self.buf.push_all(self.key()); } }  gives me the error "cannot borrow self as mutable more than once". any ideas on how I can work around this?
[22:36:30] <pcwalton> if you can hyeah
[22:36:33] <kimundi> Hm, I'm seeing the different borroswing modi as opt-in extensions to the core concept of an 'memory handle'
[22:36:37] <steven_is_false> thanks
[22:37:22] <kimundi> that is, tham all sharing the same core trait doesn't mean they all support the same borrowing operations
[22:37:27] <strcat> kimundi: I think being able to borrow the contents as &T or &mut T are the shared concept
[22:37:35] <SiegeLord> I'm freaking out over here... we'll still have the nice ~ sigil even if ~ becomes a library type?
[22:37:59] *** Quits: a__ (a__@moz-250D9B4.nycmny.fios.verizon.net) (Ping timeout)
[22:38:09] <pcwalton> I think we will keep ~
[22:38:32] *** Quits: dylukes (dylukes@A9AE6FDC.14D06B7B.E8393EEB.IP) (Quit: ["Textual IRC Client: www.textualapp.com"])
[22:38:57] <strcat> s/are/is/
[22:40:02] <strcat> graydon: is it enough to call local_malloc to get a chunk of memory that @/@mut can safety be put into?
[22:40:14] *** Joins: a__ (a__@moz-250D9B4.nycmny.fios.verizon.net)
[22:40:35] <froglegstew> jedestep what happens if you take away the mut in the argument to emit_nil?
[22:41:24] <graydon> strcat: yes, why? I mean, as opposed to what?
[22:41:42] <strcat> graydon: I mean as opposed to allocations coming from ~/@/~[]/@[]
[22:41:49] <jedestep> froglegstew: emit_nil is a function in extra::serialize::Encoder, I can't change its signature. If I remove the mut in the argument to key(), I get "cannot borrow mutable self variable as immutable"
[22:42:07] <froglegstew> oh hm
[22:42:09] <strcat> just wondering if local_malloc is enough for alternate vectors or smart pointers when the contained type is managed
[22:42:11] *** Joins: tjc (tjc@moz-A8DE5A1A.hfc.comcastbusiness.net)
[22:42:24] <kimundi> strcat: Hm, then I think this is one of our differences here :P. I'm viewing the common concept more from similarity in how they are constructed, what they contain, and that they clean up behind them. What kind of borrowing operations are legal on them are part of the differences beteen them.
[22:42:51] <graydon> strcat: the way you're posing the question is too vague / general for me to know how to answer. I can look at code if you're sketching code, or a specific proposal about the type you're writing...
[22:43:07] <graydon> strcat: @ memory comes from local_alloc, if that's what you want to know
[22:43:13] <graydon> er, local_malloc
[22:43:25] <froglegstew> actually what does "cannot borrow self as mutable more than once" actually mean?
[22:43:49] <strcat> graydon: well, specifically, https://github.com/mozilla/rust/blob/master/src/libextra/rc.rs <- is it enough to add an 'is_managed' intrinsic and then use local_malloc when T is managed?
[22:43:54] <froglegstew> anyone?
[22:44:13] <kimundi> froglegstew: IT means what it says. If you have a &mut T, than that has to be the only way to modify the T it points at
[22:44:18] <strcat> graydon: atm I know it's not right, because it always uses malloc/free
[22:44:34] <froglegstew> thanks kimundi!
[22:44:51] <froglegstew> but... jedestep it seems like you need to modify it in both emit_nil and key?
[22:45:05] <froglegstew> so how to get around that...
[22:45:26] <graydon> strcat: local_malloc is the heap we're going to be managing with gc.
[22:45:39] *** Joins: lkuper (lkuper@moz-D862222C.dhcp-bl.indiana.edu)
[22:45:47] <aatch> froglegstew, the problem isn't the borrowing per-se, it's the fact that you probably have overlapping lifetimes.
[22:45:52] <kimundi> froglegstew: If possible, you can reborrow you one &mut reference.
[22:46:01] <strcat> graydon: well what I want to know if there's any extra work that needs to be done to safety put @ in it
[22:46:09] <strcat> beyond using the local heap allocator
[22:46:12] <jedestep> can't reborrow the &mut reference
[22:46:15] <graydon> strcat: to put @ inside an rc?
[22:46:17] <strcat> graydon: yes
[22:46:24] <jedestep> "cannot borrow self variable as mutable more than once"
[22:46:31] <jedestep> for variables other than self you can reborrow
[22:46:31] <strcat> graydon: it has a constructor for T: Const and @T with T: Const is Const
[22:46:32] <froglegstew> yeah, I'm not actually sure, not my question originally aatch and kimundi
[22:46:35] <froglegstew> jedestep?
[22:46:43] <strcat> graydon: so it can happen right now, but it's not handling it in a special way
[22:47:00] <graydon> strcat: well, we have no rooting API presently, so .. if you do that it will break gc.
[22:47:06] <graydon> gc won't be able to find the @ you're holding
[22:47:09] <graydon> will assume it's unreferenced
[22:47:11] <graydon> collect it
[22:47:34] <graydon> I guess you're going to want a rooting API :(
[22:47:41] <strcat> graydon: would it find it if it was contained in a local_malloc allocation though?
[22:47:46] <graydon> no
[22:47:55] <graydon> @ points to local_malloc 
[22:48:02] <graydon> being-in-local_malloc is not the same as rooted
[22:48:04] *** Quits: a__ (a__@moz-250D9B4.nycmny.fios.verizon.net) (Ping timeout)
[22:48:07] <graydon> if it were, nothing would ever be collected
[22:48:09] <jedestep> froglegstew: only way i've gotten around this in the past is by not using traits lol
[22:48:09] <strcat> ah
[22:48:10] <graydon> every @ would be a root
[22:48:18] <graydon> the stack and TLS are roots
[22:48:19] <strcat> graydon: well, I guess I need a trait for unmanaged things :(
[22:48:21] *** Quits: steven_is_false (user@moz-144077DE.bchsia.telus.net) (Client exited)
[22:48:22] <froglegstew> jedestep oh hm
[22:48:27] <froglegstew> but I'm guessing you want to keep traits
[22:48:28] <strcat> I don't want to forbid recursive Rc
[22:48:29] <froglegstew> if possible
[22:48:34] *** Quits: yosemite (sam@moz-8CEAB1B0.dasbistro.com) (Quit: upgrades)
[22:48:42] *** Joins: steven_is_false (user@moz-144077DE.bchsia.telus.net)
[22:48:45] <jedestep> yeah, if i was ditching traits i could just delete the code i spent the afternoon writing and go home :)
[22:48:52] <froglegstew> oh so kimundi apparently self is an exception to reborrowing?
[22:48:55] <graydon> unmanaged things == Send, no?
[22:49:03] <graydon> (formerly: Owned)
[22:49:07] <strcat> graydon: no, because Rc isn't Send/Owned
[22:49:10] <strcat> but it's not managed
[22:49:12] <kimundi> froglegstew: It shouldn't be, no
[22:49:16] <froglegstew> and aatch sounds like the lifetimes *are* overlapping... insofar as they're both self??
[22:49:31] <strcat> graydon: I have a constructor for T: Send but also one for T: Const, to allow making recursive Rc structures
[22:49:38] <strcat> so I guess it needs T: Const + NonManaged
[22:49:49] <graydon> well, you're the one going and breaking our normal memory model, don't blame me! :)
[22:49:55] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Quit: ChatZilla 0.9.90 [Firefox 22.0/20130612084701])
[22:49:56] <froglegstew> kimundi that's weird...
[22:50:04] <aatch> froglegstew, do you have code I can see?
[22:50:08] <graydon> strcat: will this permit cycles?
[22:50:18] <graydon> (don't we already have some rc library somewhere?)
[22:50:19] <strcat> graydon: nope, because Const means it respects inherited mutability or is immutable
[22:50:21] <strcat> and Rc is immutable
[22:50:31] <strcat> graydon: yeah, I'm talking about extra::rc (I made it ;p)
[22:50:42] <jedestep> fn borrowing(&mut self) { self.mutable_thing(); (&mut self).other_thing(); self.mutable_thing2(); } will throw a compiler error
[22:50:48] <graydon> strcat: right, yeah
[22:50:53] <graydon> strcat: so what are you changing in it?
[22:50:57] <froglegstew> aatch yeah sorry it wasn't actually my question originally, just sounded intriguing
[22:51:05] <strcat> graydon: well, it's wrong right now - because it has a T: Const constructor
[22:51:11] <froglegstew> it was jedestep's, he posted some stuff right above that might help?
[22:51:34] <graydon> strcat: why's that wrong?
[22:51:34] <kimundi> froglegstew: lifetime a: [   lifetime b: [   ...     ]     ] <- overlapping, lifetime a: [   ...    ] lifetime b: [   ...     ]  <- non overlaping
[22:51:43] *** Joins: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP)
[22:51:47] <kimundi> Not sure if that diagram helps...
[22:51:47] <jedestep> fn no_traits_borrowing(mut b: &mut Foo) { mutable_thing(b); other_thing(&mut b); mutable_thing2(b); } works fine 
[22:51:47] <strcat> graydon: because @T for T: Const is Const
[22:51:52] <strcat> graydon: so it allows putting @ inside it
[22:51:54] <graydon> oh
[22:52:02] <graydon> so you want to fix it by prohibiting @ as well
[22:52:04] <strcat> yeah
[22:52:12] *** Quits: koomi (koomi@moz-B2B8B6D1.superkabel.de) (Quit: WeeChat 0.4.1)
[22:52:37] <froglegstew> kimundi I don't know, from the sound of it the problem lies with the fact they're all selfs. jedestep?
[22:52:59] <graydon> I still think that's Send. even if you don't think rc should itself be Send (which, I agree, it shouldn't)
[22:53:02] <jedestep> froglegstew: in my experience at least, the fact that it is self is what causes the issue
[22:53:11] <graydon> I think Send == NonManaged
[22:53:14] <strcat> graydon: it's important to be able to make a recursive Rc structure though
[22:53:30] <strcat> persistent lists or binary trees without gc
[22:53:54] <graydon> ok
[22:54:09] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[22:54:09] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/HzRHNw
[22:54:09] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[22:54:53] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[22:54:55] <kimundi> Anyway, good night. Maybe tommorow I have something strcat can agree with :P
[22:55:08] <strcat> graydon: if you do something like xs.push(@5), how does it currently tell the gc about the root in the vector?
[22:55:18] <graydon> strcat: I wonder if this is more a question of allocator polymorphism. hm.
[22:55:40] <graydon> strcat: that vector is considered "managed-unique"
[22:55:45] <jedestep> froglegstew kimundi https://gist.github.com/jedestep/5801236
[22:55:51] <graydon> and allocated in the local heap
[22:55:57] *** Joins: devbug (quassel@moz-E1DE087C.bchsia.telus.net)
[22:56:00] <graydon> even if it's a ~[]
[22:56:39] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[22:56:50] <strcat> graydon: well... to me that makes it seem like using local_malloc in Rc if T is managed is enough, so I don't really get it ;p
[22:57:09] *** Joins: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP)
[22:57:09] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/JwXuyg
[22:57:09] *** Parts: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP) ()
[22:57:10] <jedestep> question is, how can the bottom one be made to compile?
[22:57:46] <strcat> graydon: does the gc actually have to know about the managed ~ and ~[] allocations beyond just "they use local_malloc"?
[22:58:15] *** Quits: Jesin (Jessin_@moz-157A63DD.cc.lehigh.edu) (Ping timeout)
[22:58:16] <strcat> I guess they get added as roots?
[22:58:37] <graydon> strcat: their managed-uniqueness infects all the way to their owner
[22:58:47] <bblum> why did this work the first time but dodesn't work now o_O
[22:58:50] <graydon> which will be either TLS or the stack
[22:58:52] <bblum> it is the same thing :<
[22:58:52] <graydon> thus a root
[22:59:12] <strcat> graydon: okay that makes sense
[22:59:22] <graydon> we don't have an explicit rooting API presently
[22:59:31] <graydon> the GC keeps track of every allocation in local_malloc
[22:59:40] <froglegstew> yeah I don't know, sorry
[22:59:41] <graydon> and roots everything pointed-to by stack or TLS
[22:59:44] <froglegstew> maybe this is a problem with self
[22:59:45] <graydon> conservatively
[22:59:55] <froglegstew> and self pointers
[23:00:09] <graydon> but it only traces-through things it rooted (which are a subset of local_malloc heap)
[23:00:17] <strcat> graydon: so I could be sneaky and shove the Rc alloc into TLS if T is managed
[23:00:25] <strcat> as a workaround
[23:00:26] <graydon> you could do that, yes.
[23:00:47] <jedestep> i'll try to get a minimal test case and if something seems wrong i'll open an issue
[23:00:48] <jedestep> but for now
[23:01:06] <jedestep> i will go back to no traits
[23:01:09] <graydon> you could also just ask for a rooting API. it shouldn't be impossible. I was kinda hoping we wouldn't have one but I guess ...
[23:01:09] *** Quits: sw17ch (sw17ch@moz-675AFBCF.hsd1.mi.comcast.net) (Quit: sw17ch)
[23:01:18] *** Quits: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[23:01:23] <froglegstew> jedestep sounds good
[23:01:28] <strcat> graydon: well, or I could just make NonManaged - I don't think @ inside Rc is an important use case
[23:01:38] <strcat> but @ in a custom vector might be important
[23:01:40] <graydon> it'll come up
[23:01:48] <strcat> a small vector type for example
[23:02:01] <graydon> if we're going down this road and letting people make up their own memory-owning regimes
[23:02:26] <strcat> although.... the small vector could just be a union { ~[T], SmallVec }
[23:03:01] <bblum> oops, i am just dumb
[23:04:47] *** Quits: doener (doener@moz-121949B3.unitymediagroup.de) (Ping timeout)
[23:05:33] <acrichto> brson: r? https://github.com/mozilla/rust/pull/7113
[23:06:26] *** Quits: tikue (tkuehn@2557E599.66715431.D25A875A.IP) (Quit: tikue)
[23:08:13] *** Quits: vosen (vosen@moz-266BA656.icpnet.pl) (Quit: Leaving)
[23:08:27] <graydon> oh god
[23:08:30] <graydon> tell me it's not that
[23:08:33] <graydon> oh no
[23:08:37] * graydon smacks head
[23:08:50] <graydon> you know when you are looking for a bug, the longer you look the dumber it is
[23:09:07] <strcat> graydon: I also wonder how we'd represent an object that *has* to be used from the same thread
[23:09:22] <aatch> graydon, law of programming.
[23:09:42] <strcat> when you're dealing with rendering, how would you enforce that it be done with PlatformThread?
[23:09:55] <graydon> strcat: if you figure out a cool way, let brson know!
[23:09:59] *** Joins: tikue (tkuehn@2557E599.66715431.D25A875A.IP)
[23:10:04] <graydon> I believe he's been struggling with that problem for a while
[23:10:22] <graydon> aatch: yeah. so today's Genius GC Bug was self.gc() rather than gc()
[23:10:33] <graydon> hint: never, ever name a static and non-static method the same thing.
[23:10:52] <aatch> graydon, I try to avoid that.
[23:11:02] * graydon hums the "one of these functions actually dumps registers before running the collector, and one does not" song
[23:11:26] <aatch> "One of these things is not like the other, one of these things doesn't work"
[23:11:30] <strcat> huh
[23:11:45] <strcat> so... apparently that cron job runs at 6pm EST now
[23:11:48] <strcat> it used to run at 10pm
[23:11:52] <graydon> which one?
[23:11:59] <strcat> the one I use to do a daily rust build
[23:12:07] <strcat> maybe someone changed the time zone on the server...
[23:12:17] *** Joins: yosemite (sam@moz-8CEAB1B0.dasbistro.com)
[23:13:06] *** Quits: jedestep (jedestep@34641662.FB4DE631.66C78B76.IP) (Quit: jedestep)
[23:13:41] <strcat> or cron just hates me
[23:13:43] <strcat> % fcrondyn   
[23:13:45] <strcat> fcrondyn> zsh: segmentation fault  fcrondyn
[23:14:04] * strcat will just not worry about it
[23:14:15] *** Quits: donri (dag@moz-9BB61102.tbcn.telia.com) (Client exited)
[23:14:17] *** Parts: eschweic (Adium@2557E599.66715431.D25A875A.IP) ()
[23:14:18] <aatch> Ok, so lifetime parameters get printed properly now! So you get `Foo<'a>` instead of `Foo/&'a `
[23:14:36] <benh> :D
[23:14:43] <strcat> now if only I never had to see <V22> again ;p
[23:14:48] <strcat> rusti: 5.clone()
[23:14:50] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/PjiP
[23:15:11] <benh> not much better
[23:15:12] <strcat> heh and __extensions__ is awful too. we should really say the actual trait
[23:15:31] <strcat> I can never figure out where things come from in profiles
[23:16:13] <strcat> huh. what happens when you have two traits with the same method name, and only one in scope.... ?
[23:16:23] <strcat> it seems like we'd currently mangle both to the same name
[23:16:30] <strcat> same method name + same signature
[23:16:35] * strcat tries
[23:16:40] *** Quits: froglegstew (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[23:17:08] <aatch> Hmm, unfortunately it now produces odd messages when using type params too.
[23:17:18] <aatch> not always though.
[23:18:22] <strcat> rusti: 5.foo()
[23:18:23] -rusti- <anon>:9:15: 9:24 error: type `<VI0>` does not implement any method in scope named `foo`
[23:18:23] -rusti- <anon>:9     let r = {  5.foo() };
[23:18:23] -rusti-                         ^~~~~~~~~
[23:18:23] -rusti- error: aborting due to previous error
[23:18:23] -rusti- application terminated with error code 101
[23:18:26] *** Joins: a__ (a__@moz-250D9B4.nycmny.fios.verizon.net)
[23:20:37] <graydon> the debuginfo change just lost all the perf from the weekend, and more.
[23:20:57] <aatch> graydon, really?
[23:21:03] <graydon> looks like.
[23:21:03] <aatch> Do you know why?
[23:21:07] <graydon> nope.
[23:21:16] <aatch> Any ideas?
[23:21:21] <strcat> 00000000004009f0 T _ZN3bar14__extensions__9meth_29086method17_15bec6257b8bff783_00E
[23:21:23] <strcat> 0000000000400a60 T _ZN3baz14__extensions__9meth_29146method17_15bec6257b8bff783_00E
[23:21:24] <graydon> http://huonw.github.io/isrustfastyet/ is a blunt hammer
[23:21:25] <strcat> well
[23:21:27] <strcat> modules saved it
[23:22:06] <strcat> meh I guess it isn't an issue
[23:22:15] *** Quits: tjc (tjc@moz-A8DE5A1A.hfc.comcastbusiness.net) (Quit: zzzzzzzzzz)
[23:22:28] <strcat> meth_${whatever_this_magical_number_is} saves it
[23:22:32] <graydon> we really need the regression-latch on bors working
[23:24:06] <strcat> at least I have a fairly good idea of why my attempt at removing headers from exchange allocs failed last time ;p
[23:24:13] <strcat> need to teach ~fn to use something else
[23:24:50] *** Joins: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net)
[23:25:09] *** Joins: vosen (vosen@moz-266BA656.icpnet.pl)
[23:26:33] *** Joins: a_make (a__@moz-250D9B4.nycmny.fios.verizon.net)
[23:26:36] *** Joins: koomi (koomi@moz-73D7CCF0.pools.arcor-ip.net)
[23:27:29] *** Joins: skchrko_ (sk@61A494B3.BA40E8A.AAC02D62.IP)
[23:27:59] *** Quits: a__ (a__@moz-250D9B4.nycmny.fios.verizon.net) (Ping timeout)
[23:29:15] *** Quits: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP) (Ping timeout)
[23:30:20] *** Joins: tjc (tjc@moz-A1C344A0.war.clearwire-wmx.net)
[23:30:20] *** ChanServ sets mode: +o tjc
[23:31:11] *** Quits: pnkfelix|rcirc (pnkfelix@moz-43495417.fbx.proxad.net) (Ping timeout)
[23:31:20] *** Quits: a_make (a__@moz-250D9B4.nycmny.fios.verizon.net) (Ping timeout)
[23:31:33] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Ping timeout)
[23:34:43] *** Joins: pnkfelix|rcirc (pnkfelix@moz-43495417.fbx.proxad.net)
[23:35:12] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[23:35:14] *** Joins: penna (angelo@moz-918A5E12.superkabel.de)
[23:35:35] *** Parts: penna (angelo@moz-918A5E12.superkabel.de) ()
[23:36:27] *** Quits: tjc (tjc@moz-A1C344A0.war.clearwire-wmx.net) (Connection reset by peer)
[23:37:04] *** Joins: LimeBurst (me@247D1419.D73964AC.27A8748.IP)
[23:38:10] *** Joins: Jesin (Jessin_@moz-48B48C95.eecs.lehigh.edu)
[23:40:19] <strcat> heh vec is such a mess
[23:40:36] <strcat> I removed ExtendedIter for ~[T] and exposed a bunch of method conflicts
[23:40:46] <strcat> position is impl'ed twice for &[T]
[23:40:57] <strcat> both redundant now...
[23:41:12] *** Joins: tjc (tjc@moz-A1C344A0.war.clearwire-wmx.net)
[23:41:12] *** ChanServ sets mode: +o tjc
[23:41:56] *** Quits: snearch (snearch@moz-896B448A.pool.mediaways.net) (Quit: Verlassend)
[23:42:32] <strcat> rusti: let xs = [1, 2, 3]; let ys = [4, 5, 6]; xs.iter().chain_(ys.iter()).find_(|x| *x > 3)
[23:42:32] -rusti- <anon>:9:98: 9:99 error: mismatched types: expected `&int` but found `<VI6>` (expected &-ptr but found integral variable)
[23:42:32] -rusti- <anon>:9     let r = {  let xs = [1, 2, 3]; let ys = [4, 5, 6]; xs.iter().chain_(ys.iter()).find_(|x| *x > 3) };
[23:42:32] -rusti-                                                                                                            ^
[23:42:33] -rusti- error: aborting due to previous error
[23:42:34] -rusti- application terminated with error code 101
[23:42:40] <strcat> rusti: let xs = [1, 2, 3]; let ys = [4, 5, 6]; xs.iter().chain_(ys.iter()).find_(|&x| *x > 3)
[23:42:41] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/cNMA
[23:42:50] <aatch> Woo, type parameters don't get printed as `'[a-z]` anymore
[23:43:02] <strcat> rusti: let xs = [1, 2, 3]; let ys = [4, 5, 6]; fmt!("%?", xs.iter().chain_(ys.iter()).find_(|&x| *x > 3))
[23:43:03] -rusti- ~"Some(&4)"
[23:43:33] *** Joins: dbaupp (Thunderbir@moz-73E90475.lns20.syd6.internode.on.net)
[23:43:56] *** Joins: Aetherspawn (Aetherspaw@moz-8811D9F0.static.tpgi.com.au)
[23:44:40] <Aetherspawn> morning cmr
[23:45:24] *** Joins: a_make (a__@moz-250D9B4.nycmny.fios.verizon.net)
[23:47:17] <graydon> brson: shall I turn on all-targets mode on auto?
[23:47:29] <graydon> I am thinking we're just going to keep digging this hole until we stop it :(
[23:47:34] <graydon> (tempted to turn on V as well)
[23:47:47] <graydon> pcwalton nmatsakis tjc your input also appreciated
[23:48:02] <pcwalton> all targets is fine by me
[23:48:05] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[23:48:05] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/2-bMwQ
[23:48:05] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[23:48:09] *** Quits: a_make (a__@moz-250D9B4.nycmny.fios.verizon.net) (Ping timeout)
[23:48:25] <brson> graydon: yes please
[23:48:28] <graydon> ok
[23:48:30] <aatch> Ok, so now an error that printed type params, prints Foo<T,U,V> instead of Foo<'a,'b,'c>.
[23:48:33] <graydon> bors is off for a few minutes
[23:48:35] <brson> graydon: is master green yet?
[23:48:36] <pcwalton> sweet
[23:48:48] <graydon> no, not even close
[23:48:51] <pcwalton> aatch++
[23:48:52] <brson> no, master is not green, so this will stop all pulls from landing
[23:48:52] <tjc> graydon: this means requiring 32-bit tests to pass too for bors?
[23:48:55] <graydon> but we should stop landing junk on it
[23:49:06] <engla> aatch: nice
[23:49:07] <nmatsakis> graydon: since I currently run using 32-bit, I am all in favor :)
[23:49:17] <strcat> graydon: master is still red though
[23:49:19] <graydon> brson: yeah, I .. guess it will :(
[23:49:23] <graydon> I don't know what else to do
[23:49:25] <brson> this will force us to fix!
[23:49:33] <graydon> it seems like we have 3-4 _separate_ blockers
[23:49:37] <graydon> or mo re
[23:49:43] <graydon> I don't even know how many are hiding
[23:49:52] <brson> they'll have to be pushed manually
[23:50:07] <graydon> assuming you don't want bors to try-and-fail on all of them, yeah
[23:50:19] <graydon> I don't know, I guess we can keep playing catchup
[23:50:25] <graydon> anyone have strong feelings either way?
[23:50:32] <graydon> we've been trying to "play catchup" for weeks
[23:50:35] <graydon> unsuccessfully
[23:50:46] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[23:50:57] <aatch> pcwalton, mostly because i fixed up the pp code for lifetime params, so you'd get Foo<'a,'a,'b> if you had a lifetime named 'a.
[23:51:08] <brson> I'm in favor of stopping everything until master is fixed
[23:51:25] <pcwalton> yes, close the tree
[23:51:28] <graydon> ok. I'm pretty much ok with that too, given how it's blocking snaps, and will block 0.7, and .. just about everything else
[23:51:55] * strcat doesn't understand why the build breaks at -O0 too...
[23:52:14] *** Joins: a_make (a__@moz-250D9B4.nycmny.fios.verizon.net)
[23:52:35] <graydon> oh yeah. there's the opt/no-opt difference too. hm.
[23:52:53] <graydon> incidentally is it possible to configure _just_ linux32 on a linux64 host?
[23:52:57] <strcat> it *looks* like jemalloc breaks at -O0, but it's not jemalloc's fault
[23:53:05] <brson> graydon: yes, with --build-triple
[23:53:33] <strcat> graydon: well, there are bugs with just multi-host too
[23:53:41] <strcat> multi-host depends on absolute rpaths ;p
[23:53:47] <brson> i think that fix landed
[23:54:07] <strcat> brson: well I still need to figure out *why*, so we can fix that and remove the absolute rpaths
[23:54:14] <graydon> what I mean is: is all-targets mode sufficient, and/or should I try adding a "just linux32" platform that builds as though it's a 32bit linux?
[23:54:15] <brson> sure
[23:54:47] <graydon> (someone want to point out in the topic that the tree's closed? this client can't edit it)
[23:55:01] <brson> graydon: I think we need both ultimately, but we see more bugs building with multiple hosts than the i686-only build
[23:55:37] <brson> i think i'd prefer gating bors on x86_64 only and i686 only, and doing a simple smoke test build (without testing) in the cross scenario
[23:55:57] <graydon> ok. opt and no-opt as well?
[23:55:59] <aatch> it should at least build in all configurations.
[23:56:00] <brson> well, gate bors on all three, but minimize the build time of the cross build by not running tests
[23:56:09] <graydon> we have the hardware, this is a pure parallelization angle
[23:56:17] <graydon> if they're separate configs
[23:56:36] *** Quits: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net) (Quit: jorendorff)
[23:56:45] <brson> yeah, a no-opt build is important but those bugs seem fairly rare to me
[23:56:52] <brson> opt is def. more important
[23:58:04] *** Quits: a_make (a__@moz-250D9B4.nycmny.fios.verizon.net) (Ping timeout)
[23:58:42] *** Joins: mark_edward (quassel@moz-65479535.dynamic.utc.edu)
[23:58:51] *** brson changes topic to 'http://www.rust-lang.org| Tree is CLOSED for maintenance | logs at https://botbot.me/mozilla/rust/ and http://irclog.gr/#browse/irc.mozilla.org/rust'
[23:59:05] *** Joins: eschweic (Adium@2557E599.66715431.D25A875A.IP)
[23:59:32] *** Joins: brendan (brendaneic@2557E599.66715431.D25A875A.IP)
[23:59:35] <Jeaye> Poor tree
