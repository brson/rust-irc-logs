[00:00:08] <huon> hahaha
[00:00:22] * huon is suspicious of this strcat character
[00:00:29] <huon> aatch: \o/
[00:00:48] <eddyb> aatch: so it worked :D?
[00:01:01] <aatch> eddyb, this is special-casing ExprAssign
[00:01:12] <eddyb> thought so :)
[00:01:32] *** Quits: brson (brson@moz-62518563.mtv2.mozilla.com) (Ping timeout)
[00:01:33] <eddyb> strcat: ^^ you seeing this shuffle magic? :D
[00:02:00] <aatch> and then that has a further special case for that specific case (shuffle on LHS and RHS)
[00:02:42] <eddyb> I wonder if we could cause LLVM to vectorize small arrays/structs of integers/floats - like a Vec3 {x: f64, y: f64, z: f64}
[00:03:07] <bjz> huon: are the changes ok?
[00:03:23] <strcat> aatch: ;0
[00:03:23] <huon> bjz: yeah, they seem fine
[00:03:51] <bjz> huon: awesome
[00:03:52] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[00:05:05] <aatch> I haven't implemented the check on the LHS for repeated components, so the current behaviour is that if you have something like `v.xx = u.yz` it's equivalent to `v.x = v.z`
[00:05:55] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[00:05:56] <eddyb> *sigh* outdated pretty comment: (&|~|@) ['r] [unsafe] [once] fn [:Bounds] <'lt> (S) -> T
[00:06:35] <eddyb> rusti: let _x: unsafe fn();
[00:06:38] -rusti- ()
[00:06:47] <eddyb> oh, I didn't realize that worked
[00:07:17] <aatch> btw, my branch for what I have so far is here: https://github.com/Aatch/rust/tree/simd-support if anybody is interested
[00:07:27] <strcat> aatch: looks awesome ;)
[00:07:33] <aatch> I have to go do housework and have lunch now
[00:07:34] <aatch> bbl
[00:07:36] <eddyb> "This branch is 1646 commits ahead and 0 commits behind master" teh future
[00:07:46] <strcat> yay stupid github workflow ;s
[00:08:00] *** kimundi is now known as zz_kimundi
[00:08:01] * strcat updates his clone's master so it actually knows which branches are merged :|
[00:08:08] <bjz> eddyb: do you think the bitflags thing is fine now I fixed the title?
[00:08:09] <strcat> + deleted all the other branches/tags ;p
[00:08:20] <eddyb> I think I'm using update-ref to fix it
[00:08:26] <eddyb> bjz: hmm?
[00:08:41] <bjz> eddyb: was it you who bugged me about that?
[00:09:33] <eddyb> yeah, missing t
[00:09:55] <bjz> eddyb: did you look at the PR?
[00:09:56] <eddyb> was "biflags". you said you fixed it like half an hour ago :)
[00:10:03] <bjz> yep :)
[00:10:27] * bjz is proud of how simple the macro is
[00:11:33] <eddyb> bjz: I think rustc::middle::ty might actually make use of it
[00:11:38] <bjz> like, 70 lines to implement type-safe bitflags
[00:11:50] <eddyb> TypeContents is a custom version of almost exact that
[00:11:57] <bjz> :)
[00:12:05] <bjz> I will use it in glfw
[00:12:23] <bjz> -rs
[00:12:53] <bjz> I think I saw something similar in servo too
[00:16:57] *** Joins: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP)
[00:16:57] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/M3QurQ
[00:16:57] *** Parts: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP) ()
[00:17:38] <eddyb> oh wow, I wanted to press F8 to build and I hit something else and it goes to the next error in the log
[00:18:05] <eddyb> I obviously have been misusing a powerful IDE as a multi-file text editor
[00:18:24] <strcat> even vim has jump-to-next-error out of the box ;p
[00:19:43] *** Quits: canhtak (canhtak@moz-805AE185.wl.t.ulaval.ca) (Quit: canhtak)
[00:21:52] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[00:21:52] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/wJBg-g
[00:21:52] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[00:21:52] *** Joins: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP)
[00:21:53] <ghrust> [13rust] 15bors pushed 3 new commits to 06auto: 02http://git.io/AS7IbQ
[00:21:53] <ghrust> 13rust/06auto 1475d7d52 15Eduard Burtescu: Implement vtable support for autoderef....
[00:21:53] <ghrust> 13rust/06auto 14087ec2a 15Eduard Burtescu: Implement cross-crate support for autoderef....
[00:21:53] <ghrust> 13rust/06auto 1494e4e91 15bors: auto merge of #13087 : eddyb/rust/fix-autoderef, r=cmr...
[00:21:55] *** Parts: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP) ()
[00:22:28] *** Quits: cgaebel (clark@moz-F9D89110.nyc.res.rr.com) (No route to host)
[00:22:51] *** Quits: japaric (japaric@208B24D4.A23A5F6C.E5B504CC.IP) (Ping timeout)
[00:23:47] *** Joins: zimbabao (rajaram@4D42D14A.690944A8.BE4CF869.IP)
[00:23:52] *** Joins: japaric (japaric@4E9B7B9.E321A207.5C7588CA.IP)
[00:25:36] <strcat> rusti: version
[00:25:38] -rusti- rustc 0.10-pre (0e6f90e 2014-03-22 11:06:46 -0700)
[00:26:07] <strcat> rusti: version
[00:26:08] -rusti- /usr/local/bin/irc.sh: 13: /usr/local/bin/irc.sh: expac: not found
[00:26:32] <strcat> rusti: version
[00:26:33] -rusti- 0.9.2055.g0e6f90e-1
[00:27:03] <strcat> hm
[00:27:23] <strcat> git actually uses 0.9-2055-g0e6f90e so that's a bit annoying
[00:27:49] <eddyb> same build?
[00:28:00] <strcat> hm? 
[00:28:10] <eddyb> oh, yeah, hash is identical, just an extra g
[00:28:24] <strcat> eddyb: yes it's the 'git describe' version with - turned into .
[00:28:30] <strcat> it's what my nightly pkg uses
[00:28:43] <strcat> always-incrementing version
[00:28:46] <strcat> without a hack like a date
[00:29:04] <strcat> https://github.com/thestinger/packages/blob/master/rust-git/PKGBUILD#L19
[00:29:17] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[00:29:30] <eddyb> strcat: 2055 is the number of commits?
[00:29:42] <strcat> since 0.9, yup
[00:29:44] <sfackler> git describe does what, the most recent tag followed by the number of commits since then?
[00:29:55] <strcat> last_tag-commits_since-id
[00:29:59] <eddyb> okay, that makes sense
[00:30:21] *** Joins: canhtak (canhtak@moz-805AE185.wl.t.ulaval.ca)
[00:30:36] <strcat> and if it's directly on a tag, it shortens that to just 'tag'
[00:30:39] <strcat> unless you ask it not to
[00:30:43] <eddyb> why do we have parse::classify and parse::obsolete? these files smell of cruft :(
[00:31:28] <eddyb> and they use helper traits :/
[00:31:46] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[00:32:37] <huon> eddyb: parse::obsolete isn't cruft
[00:32:48] <huon> it's a really good way of giving errors about old syntax
[00:32:54] <eddyb> right, sorry, others are
[00:33:10] <eddyb> though obsolete can be wrong/confusing nowadays
[00:33:21] <eddyb> maybe 1.0 should just remove the older ones
[00:33:37] <eddyb> rusti: let _x: &'static fn();
[00:33:38] -rusti- pastebinned 6 lines of output: http://sprunge.us/aUXY
[00:33:53] <eddyb> huon: kimundi hit this earlier today ^^
[00:33:56] <huon> eddyb: yes, they do get cleaned out occasionally
[00:34:36] <aatch> at one point it prevented you from naming a struct field `new`
[00:34:41] <huon> rusti: let _: &'static (fn());
[00:34:41] -rusti- ()
[00:34:50] <eddyb> hah!
[00:36:33] <bjz> eddyb huon: updated with some more documentation: https://github.com/mozilla/rust/pull/13072
[00:37:41] <eddyb> that macro makes me think "house in a box"
[00:37:51] <bjz> ?
[00:38:00] <bjz> house in a box?
[00:38:12] <bjz> o_o
[00:38:18] <eddyb> there's probably a name for the same thing that actually makes sense
[00:39:12] *** Joins: cgaebel (clark@moz-F9D89110.nyc.res.rr.com)
[00:39:21] <bjz> you don't think it makes sense?
[00:39:29] <eddyb> bjz: oh I love it :)
[00:39:36] <bjz> oh
[00:39:38] <bjz> :P
[00:39:44] * bjz is so confused
[00:40:39] <aatch> Hmm, maybe I shouldn't have tried to be clever and just trusted the typechecker to catch this condition.
[00:41:07] <aatch> Given that I got it wrong...
[00:41:54] <bjz> eddyb: so you think there is a name that is better than "house in a box"?....
[00:42:32] <eddyb> bjz: well, I'm thinking "house in a box" but the thing I'm thinking of probably has a different name than that
[00:42:56] <eddyb> idk, imagine like a rubik's cube growing into a house
[00:43:42] <cgaebel> I believe that right now any heap  allocation will not be suitably aligned if one needs alignment greater than what malloc gives. I haven't looked at stack yet. Does this sound like a reasonable statement?
[00:44:03] <bjz> eddyb: whyyyy does it remind you of that
[00:44:05] <bjz> o_o
[00:44:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[00:44:24] <eddyb> cgaebel: stack will be handled by LLVM
[00:44:36] <cgaebel> eddyb: that's kinda what I was figuring
[00:44:41] <eddyb> cgaebel: but do we have anything that can need more than 8 bytes of alignment?
[00:44:48] <cgaebel> simd
[00:44:57] <eddyb> oh, right. aatch ^^
[00:45:12] <eddyb> bjz: because it grows into an entirely new collection!
[00:45:43] <cgaebel> I believe we should be using `posix_memalign` instead of malloc, but idk the Windows analog for that.
[00:45:46] <bjz> eddyb: how on earth does that relate to "a rubik's cube growing into a house" o_o
[00:45:54] <eddyb> bjz: the visuals
[00:45:57] <bjz> eddyb: I like your imagination though
[00:46:08] <bjz> ^_^
[00:46:14] <eddyb> crap, it's almost 3am. that explains the imagination
[00:46:19] <bjz> heh
[00:46:30] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[00:46:34] <bjz> do youy see little people wandering around the room?
[00:46:34] <eddyb> I just want to know my PR passes
[00:46:41] <flaper87> eddyb: aren't you UTC+1 (it's 2 am in the UTC+1 side of the world)
[00:46:51] <eddyb> bjz: if I squint my eyes...
[00:46:58] <eddyb> actually, just green stars
[00:47:11] <eddyb> flaper87: +2
[00:47:18] <bjz> eddyb: dancing unicorns and little clouds?
[00:47:29] <eddyb> Romania is kinda more to the east ;)
[00:48:09] <flaper87> eddyb: man, dunno why I thought you guys were in UTC+1 (facepalm)
[00:48:28] * flaper87 has been there :)
[00:48:34] <eddyb> geography is hard
[00:48:48] * eddyb knows because he almost failed it a few times
[00:49:05] <eddyb> flaper87: whereabouts?
[00:49:14] <eddyb> (if that's a valid question contraction)
[00:50:19] <flaper87> eddyb: Bucharest, unfortunately didn't get to know it that much, I was there for work
[00:50:57] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[00:51:55] <huon> sfackler: sounds like we need some docs https://github.com/mozilla/rust/pull/13072/files#r10865065 ;)
[00:52:00] * huon nag nag nag
[00:52:21] <sfackler> yeah yeah yeah...
[00:52:37] <sfackler> I probably should have done this at the doc sprint last week
[00:52:53] <huon> oh, yeah
[00:53:14] <huon> even just a paragraph explaining #[macro_export] and #[phase(syntax)] in the amcros guide would be useful
[00:53:20] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[00:53:22] <huon> to be able to link to people
[00:53:38] <huon> even if it's not a full explanation of syntax extensions etc.
[00:54:18] <sfackler> fiiiiiiiiiine :P
[00:55:00] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[00:55:02] *** Joins: TheHydroImpulse_ (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[01:00:28] *** Joins: andrew-d_w (andrew-d_w@moz-17320F4E.hsd1.ca.comcast.net)
[01:03:20] <bjz> sfackler: ok, make checking, then I'll rebase
[01:04:19] * bjz still thinks the whole macro namespace bussiness is weird
[01:04:41] <bjz> shame it'd be hard to fix
[01:04:44] *** Quits: andrew-d_w (andrew-d_w@moz-17320F4E.hsd1.ca.comcast.net) (Input/output error)
[01:05:19] <bjz> doesn't clojure have namespaced macros? dunno how they do it...
[01:10:10] <strcat> cgaebel: posix_memalign doesn't provide a realloc equivalent
[01:10:56] <cgaebel> strcat: I know. but you can just call realloc in practice
[01:11:06] <cgaebel> it's an "undocumented feature" of glibc
[01:11:17] <cmr> we really can't be dependant on glibc
[01:11:46] <cgaebel> cmr: I'm not sure if there's a good way to do aligned realloc..
[01:11:50] <eddyb> oh dear I'll be breaking quote macros
[01:12:06] <strcat> cgaebel: if we used jemalloc then we could pass the align parameter
[01:12:34] <cgaebel> strcat: tying ourselves to a specific malloc implementation may or may not be okay
[01:12:44] <cgaebel> there's kinda tradeoffs in both direction
[01:12:45] <cmr> how did the posix committee make posix_memalign but not a realloc :\
[01:12:58] <aatch> cmr, *committee*
[01:13:03] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[01:13:03] <cgaebel> lol
[01:13:05] <aatch> all you need to know about POSIX
[01:13:08] <cgaebel> likely an oversignt
[01:13:10] <cgaebel> *oversight
[01:13:12] <cmr> yeah but even so :(
[01:13:21] <eddyb> undersight
[01:13:42] <strcat> cmr: how did they make a hash map implementation where you're only allowed one per program, so it's not thread safe + can't be resized
[01:13:55] <cmr> strcat: what's this?
[01:13:59] <strcat> cmr: man hsearch
[01:14:03] <eddyb> lol?
[01:14:04] <strcat> posix hash tables
[01:14:09] <cgaebel> lol
[01:14:11] <strcat> you've never heard of them because they're useless
[01:14:18] <aatch> I wish strcat was joking...
[01:14:19] <cgaebel> that's amazing
[01:14:21] <strcat>        The three functions hcreate(), hsearch(), and hdestroy() allow the caller to create and manage a hash search table containing
[01:14:23] <strcat>        entries consisting of a key (a string) and associated data.  Using these functions, only one hash table  can  be  used  at  a
[01:14:25] <strcat>        time.
[01:14:27] <cgaebel> k guys brb rewriting hashmap
[01:14:37] <cmr> this is hilarious
[01:14:46] <cmr> I have never seen something this useless
[01:14:51] <strcat> cmr: there's also tsearch for unbalanced binary search trees
[01:14:54] <aatch> One only 1 per program, clearly it should be one per system.
[01:14:55] <cgaebel> and it has like, a proper, well-written man page too
[01:14:59] <eddyb> strcat: though there are _r versions
[01:15:02] <strcat> aatch: well, want something better?
[01:15:03] <aatch> Stored in shared memory
[01:15:03] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[01:15:29] <strcat> aatch: man gethostid
[01:15:35] <strcat>        gethostid()  and  sethostid() respectively get or set a unique 32-bit identifier for the current machine.  The 32-bit identi‚Äê
[01:15:38] <strcat>        fier is intended to be unique among all UNIX systems in existence.  This normally resembles  the  Internet  address  for  the
[01:15:39] <strcat>        local machine, as returned by gethostbyname(3), and thus usually never needs to be set.
[01:15:41] <strcat> 32-bit integer
[01:15:44] <cmr> lol
[01:15:45] <strcat> unique across all UNIX systems in existence
[01:15:47] <strcat> yeah.
[01:15:53] <cgaebel> oh dear lord
[01:15:57] <cmr> maybe in 1983
[01:16:02] <strcat> I'm pretty sure it's the same integer across all arch linux systems because it looks for the ip address and finds localhost first
[01:16:18] <cgaebel> well, there's only like, 3 people that use arch, so that's ok ;)
[01:16:23] <aatch> "the future...? What is that?" - quote from POSIX committee member
[01:16:36] <eddyb> cmr: obligatory https://rms.sexy/
[01:17:15] <cgaebel> eddyb: https://www.youtube.com/watch?v=I25UeVXrEHQ
[01:17:21] <cmr> eddyb: he's coming to a college near mine in a few weeks.
[01:17:25] <aatch> strcat, my hostid: a8c00400
[01:17:33] <strcat> aatch: mine too
[01:17:39] <eddyb> cmr: boy oh boy
[01:17:49] <strcat> quick, everyone run `hostid`
[01:17:51] <strcat> ;p
[01:18:05] <cgaebel> 007f0101
[01:18:07] <eddyb> 007f0200
[01:18:09] <cmr> 007f0100
[01:18:15] <aatch> strcat, so that's two Arch systems with the same hostid, so you're probably right.
[01:18:15] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[01:18:21] <cmr> it's a8c0be00
[01:18:24] <cmr> on my laptop
[01:18:28] <strcat> cmr: are both arch?
[01:18:32] <flaper87> a8c00719
[01:18:41] <cgaebel> c7c6117a
[01:18:41] <cmr> strcat: yup
[01:18:45] <strcat> strange
[01:18:46] <cgaebel> my arch digitalocean is c7c6117a
[01:19:00] <cmr> 7e60f576
[01:19:04] <cmr> on another box
[01:19:19] <cgaebel> so.. based on our samples we can conclude that all hostids are unique
[01:19:22] <strcat> cmr: different /etc/hosts ?
[01:19:22] <cmr> and bb6ae634
[01:19:22] <eddyb> cgaebel: that... what... huh.... :/
[01:19:31] <cgaebel>  /posix
[01:19:35] <huon> 007f0101
[01:19:39] * huon is cgaebel 
[01:19:45] <cgaebel> uh oh
[01:19:46] <cgaebel> hacker
[01:19:49] <strcat> afaik it just hashes the ip address it finds first
[01:19:51] <eddyb> cgaebel: the video, I mean
[01:19:52] <aatch> And I am strcat...?
[01:19:55] <cmr> strcat: the first and second ones are the same.
[01:19:59] <cgaebel> eddyb: yeah.
[01:20:10] <strcat> cmr: *shrug* ;p
[01:20:13] <cmr> (unchanged)
[01:20:17] <cmr> but yes
[01:20:17] <huon> oh, and another computer I have is cgaebel too
[01:20:29] <strcat> cmr: maybe it cares about the local ip
[01:20:32] <cgaebel> huon: I'm calling the NSA on you
[01:20:54] <huon> cgaebel: they already know :P
[01:21:03] <cgaebel> oh yeah ofc
[01:22:09] <huon> do we have anyway to do unchecked integer division in unsafe code, btw?
[01:22:17] *** Joins: brson (brson@moz-24157589.mtv2.mozilla.com)
[01:22:17] *** ChanServ sets mode: +qo brson brson
[01:22:26] <huon> well, I guess one could import the LLVM intrinsic directly
[01:22:38] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.3)
[01:22:40] *** Quits: eibwen (kvirc@moz-6D827A33.dip0.t-ipconnect.de) (Ping timeout)
[01:22:46] <eddyb> aaaaany second now
[01:22:53] <eddyb> acrichto: incoming ;)
[01:23:16] <eddyb> cmr, huon: I'm counting on you to bug the relevant peoples to get a new snapshot
[01:23:29] <flaper87> https://twitter.com/flaper87/status/447543986383618048
[01:23:30] <eddyb> brson: I guess, if you're around, mind taking care of that?
[01:23:41] <huon> eddyb: I can take one :P
[01:24:03] <eddyb> take one what? I know it's funny, I just don't know how to parse it
[01:24:10] <huon> eddyb: even you can take one
[01:24:26] <huon> well, actually, if you get someone to push to snap-stage3
[01:24:38] <huon> take a snapshot
[01:24:50] <aatch> I can also make a snapshot
[01:24:51] * flaper87 would like to take the next snapshot
[01:24:57] <eddyb> aaah. okay. sure, just don't step on any toes :P
[01:24:58] <flaper87> never done it before
[01:25:10] <eddyb> flaper87: you already took a snapshot of the IRC log
[01:25:16] <flaper87> eddyb: LOL
[01:25:24] <eddyb> almost bash.org worthy
[01:25:44] *** Quits: zimbabao (rajaram@4D42D14A.690944A8.BE4CF869.IP) (Ping timeout)
[01:25:45] <cgaebel> I'm not sure if jemalloc is a good fit for the exchange heap
[01:25:46] <huon> flaper87: can you push to mozilla/rust?
[01:25:52] <flaper87> huon: yup
[01:25:56] <huon> cgaebel: why?
[01:26:06] <eddyb> cgaebel: it makes the compiler use less RAM :P
[01:26:18] <cgaebel> huon: it uses thread-local caches on allocation, and on free() it returns it back to that thread-local cache
[01:26:23] <huon> [also, I would say that "exchange heap" is not the correct thing to say; maybe "the ~ allocator"]
[01:26:26] <cgaebel> it's great for _normal_ allocation
[01:26:31] <cgaebel> but not _exchange_ allocation
[01:26:36] <huon> since "exchange heap" doesn't really mean anything
[01:26:37] <cgaebel> when the whole point is to get data across cores
[01:26:41] <cgaebel> it should though!
[01:26:45] <huon> other than "~" pointers
[01:26:58] <cgaebel> maybe we can use it only if the pointers can actually be sent?
[01:27:05] <cgaebel> (in the context they're used)
[01:27:09] <cgaebel> might be a little bit intractable
[01:27:12] <huon> not just sent
[01:27:13] <eddyb> cgaebel: jemalloc works with sending things across threads
[01:27:15] <huon> shared
[01:27:16] <cgaebel> (or time for a new class of pointers!)
[01:27:22] <cgaebel> eddyb: I know it does, it's just suboptimal
[01:27:24] <eddyb> cgaebel: so your point is invalid
[01:27:28] <eddyb> oh, it is?
[01:27:35] <eddyb> I thought you meant it will blow up
[01:27:54] <huon> e.g. sharing a &mut ~ShareButNotSend with a fork-join library allows for it to be swapped out, and hence deallocated in a different therad
[01:28:02] <cgaebel> sorry yeah I'm just saying it's suboptimal for actually sending things across cores
[01:28:06] <huon> (well, I guess that needs Isolate, not just Share)
[01:28:08] <brson> taking care of what?
[01:28:13] <huon> brson: snapshot
[01:28:37] <eddyb> brson: acrichto ran into issues fixed by https://github.com/mozilla/rust/pull/13087
[01:28:56] <cgaebel> huon: I just wish there was more distinction between "this data stays on this thread" and "this data can be sent willy nilly wherever"
[01:29:06] <cgaebel> it would lead to an "interesting" rust allocator that would be very unique
[01:29:09] <eddyb> cgaebel: you can have task-local owned pointers
[01:29:19] <cgaebel> really? what's the syntax for that?
[01:29:30] <eddyb> well, not with complete ~T semantics *just yet*
[01:29:58] <cgaebel> I think it's a huge opportunity for wins in allocator design
[01:29:59] <huon> ~Rc is a task local owned pointers
[01:30:07] <cgaebel> too much overhead
[01:30:13] <cmr> cgaebel: OS thread or any thread?
[01:30:20] <cmr> because libgreen will migrate tasks across threads.
[01:30:32] <cgaebel> cmr: I assume OS thread and pretend libgreen doesn't exist for the things I use rust for
[01:30:36] <huon> and the Uniq type here http://static.rust-lang.org/doc/master/guide-unsafe.html#making-the-unsafe-safe%28r%29 can have ` NoSend` field
[01:30:44] <cgaebel> but we can just say "task-local"
[01:30:47] <eddyb> ^^ yeah that's what I meant
[01:30:59] <huon> cgaebel: I just mean that was an example of a type that is task local and also an ~ pointer
[01:31:04] <cgaebel> huon: oh ok
[01:31:13] <cgaebel> my point is, we can do something like tcmalloc
[01:31:19] <cgaebel> but without locks on the thread-local caches
[01:31:22] <eddyb> huon: ~NoSend is the proper example, actually
[01:31:28] <cmr> TaskUniq<T> would be really easy to implement. Yay Rust \o/
[01:31:42] <cgaebel> Ideally it should be just as short to write as an owned pointer
[01:31:44] <eddyb> huon: it's also a noop to allocate :P
[01:31:51] <cgaebel> it should be the "recommended default pointer type"
[01:31:59] *** Joins: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP)
[01:31:59] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/AS7IbQ
[01:31:59] *** Parts: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP) ()
[01:32:00] <huon> it would hvae to be unusable with fork-join too
[01:32:01] <eddyb> cgaebel: locks? aren't all the cool things these days lock-free?
[01:32:03] <cmr> cgaebel: I don't think so.
[01:32:13] <huon> i.e. not Send, or Isolate
[01:32:26] <cgaebel> eddyb: lock-free is expensive in its own ways. it's better to just not synchronize if it's not needed
[01:32:28] <cmr> If it's the "recommended default" then you won't be able to send most things :(
[01:32:29] <cgaebel> cmr: why not?
[01:32:32] <cgaebel> whoa time travel
[01:32:40] <cmr> I was already writing the explanation :P
[01:32:45] <cgaebel> most things shouldn't be sent willy nilly!
[01:32:51] <huon> why not?
[01:32:56] <cgaebel> very few things actually cross task boundaries
[01:33:00] <cmr> but forbidding sending? no, bad idea.
[01:33:04] <cgaebel> hmm
[01:33:10] <bjz> huon sfackler: updated: https://github.com/mozilla/rust/pull/13072
[01:33:16] <cgaebel> but performance wins...! :(
[01:33:18] <huon> [With opt-in default bounds we will get fewer things being Send]
[01:33:22] <cmr> I don't want types from J Random Library being unsendable just because they use an allocation.
[01:33:27] <eddyb> cgaebel: thread-local global allocator is silly
[01:33:32] <cmr> and the non-sendable one is the "default"
[01:33:39] <eddyb> you can just as well use an arena
[01:33:44] <huon> cgaebel: do you have any numbers for the perf benefit of an entirely thread local allocator?
[01:33:46] <cgaebel> arenas don't free
[01:34:01] <cgaebel> huon: lolno. but it would mean we could remove all locking from it.
[01:34:05] <eddyb> you can have a specialized temporary allocator that frees
[01:34:16] <cgaebel> eddyb: we have this magick!?
[01:34:31] <cgaebel> I don't know of any malloc that allows you to instantiate a local version of it..
[01:34:36] <eddyb> lol?
[01:34:51] <eddyb> there is no reason you can't make an arena free
[01:35:00] <eddyb> other than "it's going to be slightly less efficient"
[01:35:05] <cgaebel> not without rewriting malloc you can't
[01:35:07] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Quit: Computer has gone to sleep.)
[01:35:14] <cgaebel> unless you're just proposing rewriting malloc
[01:35:17] <huon> the allocator design people are thinking off would allow us to have an allocator express "i'm entirely task-local"
[01:35:30] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[01:35:32] <eddyb> cgaebel: have you used arenas in Rust?
[01:35:35] <huon> and so everything supporting allocators would automatically be able to express that
[01:35:42] <cgaebel> eddyb: You can't free arbitrary things efficiently
[01:35:51] <huon> e.g. entirely task local vectors, trees, hashmaps, etc. etc.
[01:35:58] <cgaebel> eddyb: like, that's the whole point of malloc
[01:36:05] <eddyb> cgaebel: you get a &'a T where 'a is the lifetime of the arena
[01:36:06] <huon> (and ~ if/when we work out how to make it allocator-y)
[01:36:14] <cmr> nmatsakis: is there an RFC for OIBIT yet?
[01:36:15] <eddyb> cgaebel: you can do the same with any arbitrary allocator
[01:36:24] <eddyb> cmr: what is OIBIT?
[01:36:38] * cmr sighs
[01:36:41] <cgaebel> eddyb: when is that memory freed?
[01:36:41] <cmr> opt in built in traits
[01:36:56] <eddyb> cgaebel: depends what kind of handle you have
[01:37:00] <cgaebel> huon: yeah that's my hope
[01:37:04] *** Joins: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP)
[01:37:04] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/27XzGg
[01:37:04] *** Parts: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP) ()
[01:37:14] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[01:37:16] <eddyb> cgaebel: if you want unique, when you drop the handle, it can get freed
[01:37:28] <flaper87> cmr: there's no RFC yet
[01:37:34] <cmr> darn
[01:37:43] * cmr wanted to go -1 it and write an inflammatory essay
[01:38:03] <eddyb> hehe why?
[01:38:18] <cmr> because I don't think they're a good idea? :P
[01:38:21] <cgaebel> eddyb: I'm looking at libarena right now, and there's not even any 'dealloc' function
[01:38:31] <eddyb> cgaebel: because those are arenas
[01:38:34] <cgaebel> exactly!
[01:38:51] <cgaebel> I don't want the task-local heap to be an arena, I want it to be an honest-to-goodness malloc
[01:38:54] <eddyb> I'm just telling you it's easy to write something similar that works like a heap
[01:38:56] <flaper87> cmr: why not? 
[01:38:58] <cgaebel> but with better performance since it won't need any locking
[01:39:11] <huon> cmr: make rustdoc show Send or not, and it will help
[01:39:26] <cmr> huon: after TheHydroImpulse_'s redesign lands
[01:39:28] <cmr> I will do so.
[01:39:40] <eddyb> cgaebel: type-specific heaps can be very efficient
[01:39:51] <huon> cmr: (and, if you're feeling spry, make the compiler error messages about "doesn't satisfy Send" show the part of the struct that isn't Send)
[01:39:53] <eddyb> though size classes work pretty well in general
[01:40:01] <cgaebel> eddyb: also not what I want. I just want the default malloc to be truly "faster-than-c"
[01:40:09] <cgaebel> which can happen, if this optimization is taken for "most code"
[01:40:11] <eddyb> "default"?
[01:40:24] <eddyb> you can't make ~ non-Send, that would be silly
[01:40:27] <cmr> flaper87: because I think they're too heavy of a fix. It makes it harder / less-obvious to write good libraries that are maximally flexible.
[01:40:35] <cgaebel> eddyb: only if people send a whole lot of things
[01:40:38] <cmr> I think we *should* have a way of marking "this type must be Send/whatever"
[01:40:48] <cgaebel> eddyb: most C++ (which rust is trying to replace) doesn't send that many things across threads..
[01:40:52] <huon> eddyb, cgaebel: we can get this nearly automatically out of making things support allocators
[01:41:00] <cmr> But requiring them to satisfy the built-in traits?
[01:41:04] <cmr> I don't think it's a good idea.
[01:41:08] <cgaebel> huon: true that, but allocators are hard
[01:41:12] <cmr> huon: gladly. I've wanted this for a while :P
[01:41:12] <cgaebel> huon: are they slated for 1.0?
[01:41:16] <huon> cgaebel: yes
[01:41:23] <huon> (at least, I think so)
[01:41:26] <eddyb> cgaebel: you need a different type for a different allocator. ~T will always be sendable
[01:41:32] <cgaebel> wonderful
[01:41:33] <huon> they were discussed for half a day at the work week
[01:41:48] <cgaebel> then I'd petition a new pointer type
[01:41:53] *** Joins: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP)
[01:41:53] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/qXh4UA
[01:41:53] <ghrust> 13rust/06auto 146fe6e3d 15Daniel Micay: make std::managed private...
[01:41:53] <ghrust> 13rust/06auto 14748ed38 15bors: auto merge of #13089 : thestinger/rust/managed, r=Aatch...
[01:41:54] *** Parts: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP) ()
[01:41:59] <cgaebel> kinda like ~, but not Sendable
[01:42:04] <huon> cgaebel: a new pointer type??
[01:42:09] <cgaebel> I know, I'm crazy.
[01:42:12] <huon> no
[01:42:16] <cgaebel> we're out of symbols
[01:42:18] <huon> my point is you don't need a new type
[01:42:29] <huon> if it supports allocators, you make the allocator nonsendable
[01:42:31] <cgaebel> No one will use it if ~ is easier to type
[01:42:37] <huon> ~ may go
[01:42:39] <cmr> people will use it if they need to.
[01:42:40] <huon> maybe no
[01:42:40] <huon> t
[01:42:58] <cgaebel> cmr: it's only a win if most code is thread-local heap
[01:43:04] <cmr> I don't think that's true
[01:43:07] <cgaebel> if the vast majority of allocation happens on the global heap, then there's no real point
[01:43:09] <cmr> since most code isn't going to be allocating.
[01:43:10] <cgaebel> just use an arena
[01:43:16] <cgaebel> lolk
[01:43:19] <cmr> and library code that is would be using allocators.
[01:43:41] <eddyb> we need strcat here
[01:43:41] *** Quits: TheHydroImpulse_ (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[01:43:52] <cgaebel> ok if ~ works with allocators
[01:43:53] <eddyb> but I'm pretty sure lock-free performs better than locked
[01:43:56] <cgaebel> then I guess this all makes sense
[01:44:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[01:44:07] <cmr> eddyb: not usually.
[01:44:09] <eddyb> cgaebel: ~<A>T was my thought on that
[01:44:10] <cgaebel> eddyb: I'm not proposing either of those. I'm proposing a synchronization-free heap
[01:44:23] <cmr> I just want ~ gone
[01:44:27] <cmr> Owning<T>
[01:44:29] <huon> eddyb: or just Uniq<T, A>
[01:44:34] <cgaebel> eddyb: yeah I think something like that. We really just need to iterate on it a bunch
[01:44:36] <cmr> Uniq is an ok name.
[01:44:41] <cgaebel> +1 for ~ going away
[01:44:42] <huon> with Uniq<T, ThreadLocal>
[01:44:53] <cgaebel> Meh, shorter. Uq
[01:44:56] <huon> or Uniq<T, CHeap>
[01:45:01] <eddyb> hahaha
[01:45:06] <eddyb> huon: CHeap
[01:45:06] <cgaebel> should be just as easy (if not easier) to type than Rc
[01:45:08] <sfackler> Meh, shorter. ~ :P
[01:45:12] <cmr> cgaebel: complemented by its best friend, Ug
[01:45:21] <cgaebel> Ug?
[01:45:24] <huon> sfackler: "meh, I don't use ~ much"
[01:45:28] <cmr> (joke)
[01:45:33] <huon> s/don't/shouldn't/ :P
[01:45:34] <cgaebel> uh oh couldn't tell
[01:45:54] <huon> U<T>
[01:46:02] <cgaebel> naw U is a good typename after T runs out
[01:46:03] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[01:46:21] <huon> a unicode U
[01:46:22] <huon> \o/
[01:46:29] <cgaebel> +infinity
[01:46:35] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[01:46:41] <cmr> √ú
[01:46:48] <cgaebel> ooh better
[01:46:55] <cgaebel> all unique pointers just have an umlat over their name
[01:46:57] <cgaebel> somewhere
[01:47:08] <cgaebel> bam, even less characters
[01:47:11] <cmr> so metal
[01:47:24] <cgaebel> more umlats, more indirection
[01:47:28] <aatch> ‚Äã<T>
[01:47:41] <cmr> or we could do one better
[01:47:45] <cmr> get rid of values altogether
[01:47:46] <aatch> zero-width space
[01:47:47] <cmr> T
[01:47:50] <huon> TÃà
[01:47:58] <eddyb> and I thought I was crazy with my P<T>
[01:48:05] <brson> eddyb: ok, i can start a snapshot
[01:48:16] <eddyb> brson: thank you, time to sleep now :)
[01:48:31] <eddyb> the rest of you, pls behave while I'm gone
[01:48:39] *** Joins: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP)
[01:48:39] <ghrust> [13rust] 15brson merged 06master into 06snap-stage3: 02http://git.io/u1csLw
[01:48:39] *** Parts: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP) ()
[01:48:58] <flaper87> brson: if you don't mind walking me through the process, I'd like to do it. I've never done it and I'm curious :D
[01:49:07] <flaper87> or I could simply read the docs on the wiki
[01:49:09] <flaper87> :D
[01:49:25] <cmr> flaper87: it's pretty boring actually!
[01:49:37] <cmr> merge master into snap-stage3
[01:49:41] <aatch> lots of fixing errors from stage stuff
[01:49:41] <brson> flaper87: ok, you can do it
[01:49:52] <cmr> and then watch the buildbots
[01:50:03] <cmr> http://buildbot.rust-lang.org/console?branch=snap-stage3&refresh=15
[01:50:11] <cmr> the util-snap3 builders
[01:50:13] <flaper87> cmr: I thought so, just want to make sure I do it at least once :P
[01:50:53] <brson> i really need to restart buildbot at some point tonight
[01:51:09] <flaper87> brson: I can do it tomorrow after the restart
[01:51:11] <cmr> actually https://github.com/mozilla/rust/wiki/Note-compiler-snapshots is up to date
[01:51:43] <flaper87> cmr: cool, I'll follow it
[01:51:54] <cmr> flaper87: after the steps on that page are done you open a pull request which fixes all the staging stuff and updates src/snapshots.txt
[01:52:02] <brson> flaper87: the snaps are building now. it will take a few hours
[01:53:38] <flaper87> cmr: cool, thanks for the info
[01:53:48] <bjz> it's so weird that travis fails randomly, then you restart and it works
[01:54:14] <flaper87> brson: kk, thanks
[01:54:26] <flaper87> cool, the snapshot will have the `Freeze` removal work
[01:54:35] <flaper87> :D :D :D
[01:55:56] *** Joins: zimbabao (rajaram@4D42D14A.690944A8.BE4CF869.IP)
[01:55:57] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[01:58:27] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[02:01:22] *** Quits: zimbabao (rajaram@4D42D14A.690944A8.BE4CF869.IP) (Ping timeout)
[02:01:33] *** Quits: eddyb (eddy@F8B50789.F33C1089.FB866788.IP) (Ping timeout)
[02:11:56] *** Joins: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP)
[02:11:56] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/OAM1sQ
[02:11:56] <ghrust> 13rust/06auto 141ae9204 15Daniel Micay: use TotalEq for HashMap...
[02:11:57] <ghrust> 13rust/06auto 140041ac7 15bors: auto merge of #13088 : thestinger/rust/hashmap, r=cmr...
[02:11:57] *** Parts: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP) ()
[02:12:10] *** flaper87 is now known as flaper87|afk
[02:12:24] <brson> ok restarting buildbot
[02:14:29] *** Joins: brson_ (brson@moz-62518563.mtv2.mozilla.com)
[02:14:37] *** Quits: brson (brson@moz-24157589.mtv2.mozilla.com) (Ping timeout)
[02:17:01] <aatch> ok, so now shuffle assignment *actually* works
[02:17:11] *** Quits: brson_ (brson@moz-62518563.mtv2.mozilla.com) (Ping timeout)
[02:18:09] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[02:19:16] *** Joins: brson (brson@moz-62518563.mtv2.mozilla.com)
[02:19:16] *** ChanServ sets mode: +qo brson brson
[02:19:18] *** Joins: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP)
[02:19:18] <ghrust> [13rust] 15brson 04force-pushed 06dist-snap from 14c12cc8d to 14589d60f: 02http://git.io/0Tp-4A
[02:19:18] <ghrust> 13rust/06dist-snap 14d09460c 15Brian Anderson: mk: Stop building OS X .pkg as part of 'make dist'...
[02:19:18] <ghrust> 13rust/06dist-snap 14f2b58e0 15Brian Anderson: mk: Reorder definitions in dist.mk...
[02:19:18] <ghrust> 13rust/06dist-snap 1425ecf21 15Brian Anderson: mk: Cleanup
[02:19:20] *** Parts: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP) ()
[02:19:32] <huon> aatch: better than not working \o/
[02:19:53] <aatch> I lied, there's one last case not working
[02:20:03] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[02:20:06] <aatch> well, one last case I know of that doesn't work
[02:20:16] <aatch> and probably many, many more that also don't work
[02:30:52] <aatch> stupid shufflevector needing to have the first two operands be the same type.
[02:44:20] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[02:46:37] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[02:51:23] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Ping timeout)
[02:52:04] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[03:00:57] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[03:03:21] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[03:05:31] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[03:11:58] *** Joins: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP)
[03:11:58] <ghrust> [13rust] 15bors 04force-pushed 06auto from 140041ac7 to 1494e4e91: 02http://git.io/N3iJvQ
[03:11:58] *** Parts: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP) ()
[03:11:59] *** Joins: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP)
[03:11:59] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/zQ-5Mw
[03:11:59] <ghrust> 13rust/06auto 1431d5ffc 15Daniel Micay: make std::managed private...
[03:11:59] <ghrust> 13rust/06auto 143d9fdf7 15bors: auto merge of #13089 : thestinger/rust/managed, r=Aatch...
[03:11:59] *** Parts: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP) ()
[03:21:10] *** Quits: brson (brson@moz-62518563.mtv2.mozilla.com) (Ping timeout)
[03:23:15] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[03:24:29] *** Joins: lpy (lpy@1834E2CB.F09091A8.1348A864.IP)
[03:27:12] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[03:31:11] *** Quits: lpy (lpy@1834E2CB.F09091A8.1348A864.IP) (Client exited)
[03:37:48] *** Quits: cgaebel (clark@moz-F9D89110.nyc.res.rr.com) (Client exited)
[03:42:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[03:45:43] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[03:52:02] *** Quits: zz_kimundi (kimundi@moz-5822FC56.dip0.t-ipconnect.de) (Ping timeout)
[03:56:07] *** Joins: zz_kimundi (kimundi@moz-2E6F4AE4.dip0.t-ipconnect.de)
[03:56:08] *** zz_kimundi is now known as kimundi
[04:11:59] *** Joins: zv (zv@moz-955F83E9.hsd1.ca.comcast.net)
[04:21:59] *** Joins: lpy (lpy@8B40CDAC.F09091A8.1348A864.IP)
[04:22:39] <aatch> Woo, clean rebase :D
[04:27:39] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[04:29:58] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[04:33:21] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[04:37:36] *** Quits: japaric (japaric@4E9B7B9.E321A207.5C7588CA.IP) (Quit: WeeChat 0.4.3)
[04:39:18] *** Joins: japaric (japaric@4E9B7B9.E321A207.5C7588CA.IP)
[04:44:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[04:46:33] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[04:49:19] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[04:51:44] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[04:52:48] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[05:00:54] *** Quits: japaric (japaric@4E9B7B9.E321A207.5C7588CA.IP) (Ping timeout)
[05:02:26] *** Joins: japaric (japaric@F7BC3ABB.DC1425E6.84437BC5.IP)
[05:05:00] <sfackler> man there's a lot of unnecessary allocation in the parser
[05:05:31] <cmr> sfackler: you don't say ;p
[05:06:15] <sfackler> I'm getting rid of vec::append and literally all of the uses here should really be a.iter().chain(b.iter())
[05:06:24] <sfackler> but right now it's cloning all over the place
[05:06:34] <cmr> shame they didn't exist when libsyntax was written
[05:06:46] <sfackler> yep
[05:06:54] <cmr> I bet it was nice and efficient when everything was gc'd and linked lists :P
[05:06:54] <sfackler> legacy cooooooode
[05:07:15] <sfackler> everything used to used linked lists?!
[05:07:16] <huon> sfackler: vec::append has its uses
[05:07:24] <cmr> sfackler: I hope so!
[05:07:34] * cmr does not know
[05:07:43] <huon> and it's not *that* bad (although iterator chaining is better)
[05:07:54] <huon> ooooh
[05:07:58] <sfackler> I mean, it's just { a.push(b); a }
[05:08:00] * huon just thought of something cool
[05:08:10] <huon> write datastructures generic over Deref<T>
[05:08:33] <huon> so, e.g. Rc and Gc etc. all work
[05:08:41] * huon wonders if that's at all feasible...
[05:08:49] <cmr> hmm
[05:09:14] <sfackler> work wrt what?
[05:10:02] <huon> Like enum List<T, Ptr: Deref> { Nil, Cons(T, Ptr<T>) }
[05:10:09] <huon> erm
[05:10:11] <huon> that's all wrong
[05:10:25] <cmr> on many ways, yes.
[05:10:39] <cmr> *in
[05:10:40] <huon> enum List<T, Ptr: Deref<List<T, Ptr>>> { Nil, Cons(T, Ptr) }
[05:10:42] <cmr> feh
[05:10:58] <huon> (where I'm using bounds in the type to avoid having to write something longer)
[05:11:21] <cmr> uhhh
[05:11:25] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[05:11:32] <cmr> hm
[05:11:44] <huon> wait, you can't write that type easily
[05:11:54] <huon> e.g. Rc<List<T, Rc<???>>>
[05:12:02] <huon> so you'd need wrappers for each pointer type
[05:12:02] <cmr> yeah
[05:12:04] *** Joins: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP)
[05:12:04] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/zQ-5Mw
[05:12:04] *** Parts: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP) ()
[05:12:21] <huon> aka, this really needs HKT to be at all sane
[05:13:28] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[05:16:54] *** Joins: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP)
[05:16:54] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/NxXUsg
[05:16:54] *** Parts: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP) ()
[05:16:56] *** Joins: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP)
[05:16:57] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/6RKXww
[05:16:57] <ghrust> 13rust/06auto 14e310ae9 15Piotr Czarnecki: rustc: Change the filename of compressed bitcode...
[05:16:57] <ghrust> 13rust/06auto 14c6e4f8f 15bors: auto merge of #13074 : pczarn/rust/build-rlib, r=alexcrichton...
[05:16:57] *** Parts: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP) ()
[05:27:56] *** Quits: canhtak (canhtak@moz-805AE185.wl.t.ulaval.ca) (Quit: canhtak)
[05:30:03] *** Joins: edwardw (Mibbit@13A2FE5.E4C8743.30C05AB6.IP)
[05:30:29] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[05:32:55] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[05:33:08] *** Quits: bytbox (s@moz-E1E7FAC3.washdc.fios.verizon.net) (Client exited)
[05:33:19] *** Joins: bytbox (s@moz-E1E7FAC3.washdc.fios.verizon.net)
[05:35:09] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[05:44:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[05:46:25] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[05:46:56] *** Joins: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP)
[05:46:56] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/BMp1uQ
[05:46:56] <ghrust> 13rust/06auto 144a4b6d9 15Daniel Micay: use TotalEq for HashMap...
[05:46:56] <ghrust> 13rust/06auto 14fd1b889 15bors: auto merge of #13088 : thestinger/rust/hashmap, r=cmr...
[05:46:57] *** Parts: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP) ()
[05:47:01] *** Joins: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP)
[05:47:01] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14c6e4f8f to 143d9fdf7: 02http://git.io/N3iJvQ
[05:47:01] *** Parts: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP) ()
[05:47:20] *** Quits: edwardw (Mibbit@13A2FE5.E4C8743.30C05AB6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[05:52:57] *** Joins: edwardw (edwardw@C5A98CE5.177282A3.FAED9FFC.IP)
[05:54:19] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[05:56:44] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[05:56:56] *** Joins: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP)
[05:56:56] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14fd1b889 to 143d9fdf7: 02http://git.io/N3iJvQ
[05:56:56] *** Parts: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP) ()
[06:07:27] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[06:16:28] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[06:18:32] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[06:38:02] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[06:40:05] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[06:44:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[06:46:28] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[06:47:03] *** Joins: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP)
[06:47:03] <ghrust> [13rust] 15bors 04force-pushed 06auto from 1490063ab to 143d9fdf7: 02http://git.io/N3iJvQ
[06:47:03] *** Parts: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP) ()
[06:59:20] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[07:01:15] *** Quits: edwardw (edwardw@C5A98CE5.177282A3.FAED9FFC.IP) (Quit: Leaving...)
[07:01:48] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[07:19:19] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[07:21:28] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[07:22:25] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[07:23:12] *** Quits: gwty (gwtypc@3CAC4C72.A9D442CE.49FF672.IP) (Ping timeout)
[07:23:37] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[07:24:29] *** Joins: gwty (gwtypc@3CAC4C72.A9D442CE.49FF672.IP)
[07:30:14] *** Quits: gwty (gwtypc@3CAC4C72.A9D442CE.49FF672.IP) (Ping timeout)
[07:39:57] *** Joins: aurynj (Eon@6FE096E1.6EA7AEE4.364694FC.IP)
[07:41:54] *** Joins: edwardw (edwardw@C5A98CE5.177282A3.FAED9FFC.IP)
[07:43:20] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[07:45:35] *** Quits: aurynj (Eon@6FE096E1.6EA7AEE4.364694FC.IP) (Ping timeout)
[07:45:49] *** Joins: aurynj (Eon@53E88241.65896F99.364694FC.IP)
[07:46:56] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[07:59:42] *** Joins: eibwen (kvirc@moz-BBC2056C.dip0.t-ipconnect.de)
[08:01:54] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[08:04:12] *** Quits: edwardw (edwardw@C5A98CE5.177282A3.FAED9FFC.IP) (Quit: Leaving...)
[08:09:33] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[08:09:51] *** Joins: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se)
[08:09:54] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[08:11:44] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[08:17:55] *** Joins: gwty (gwtypc@3CAC4C72.A9D442CE.49FF672.IP)
[08:21:24] *** Joins: eddyb (eddy@F8B50789.F33C1089.FB866788.IP)
[08:25:58] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[08:28:18] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[08:36:33] <eddyb> flaper87|afk: I guess we're waiting for you to register the new snapshots :)?
[08:38:38] <huon> "strcat: destroyer of RFCs"
[08:39:08] <huon> strcat: (i'm going to look at/do the deriving stuff tonight, i.e. in a few hours.)
[08:39:25] <strcat> I just felt like closing some bugs
[08:39:28] <strcat> closed many of the ones I opened
[08:39:34] <strcat> lots are obsolete or just too old to be relevant
[08:39:42] <strcat> as in they'd have to be written up as new proposals
[08:39:48] <huon> yup, definitely agree
[08:39:50] <aatch> strcat, glad I'm not the only one that does that.
[08:40:11] <aatch> I must admit, it was fun telling pcwalton off for leaving PRs open for months
[08:40:14] <strcat> I stopped doing bug triage ;s, I just go and close a bunch of bugs in some category
[08:40:31] <strcat> triage doesn't let me concentrate on something ;p
[08:40:57] <cmr> sure it does! ones that haven't been updated in N months :P
[08:41:22] <aatch> I hardly ever triage. I get the email while doing something else then forget about it until the next triage email...
[08:41:47] <strcat> cmr: meh, I'd rather go look at the oldest pages
[08:41:53] <strcat> rather than writing Triage bump 10 times
[08:42:05] <cmr> yeah
[08:44:44] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[08:46:35] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[08:46:58] *** Joins: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP)
[08:46:58] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/x_2WlQ
[08:46:58] *** Parts: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP) ()
[08:48:30] <aatch> Would it be bad to just mass-close a bunch of B-RFC issues with "submit an RFC to rust-lang/rfcs"?
[08:49:19] <eddyb> the death of VG as we know it :(
[08:49:44] <strcat> aatch: I don't think we should close them all
[08:49:58] <strcat> aatch: some are really simple
[08:50:09] <aatch> strcat, not all, but there are a bunch that are explicitly feature requests that require discussion
[08:50:19] <aatch> like this one: https://github.com/mozilla/rust/issues/9663
[08:50:28] <aatch> seems pretty RFC-ish
[08:51:56] *** Joins: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP)
[08:51:56] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/rV436w
[08:51:57] *** Parts: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP) ()
[08:51:57] *** Joins: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP)
[08:51:57] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/qNiVeQ
[08:51:57] <ghrust> 13rust/06auto 14fd79f42 15Daniel Micay: iter: remove `to_owned_vec`...
[08:51:57] <ghrust> 13rust/06auto 1481a3cc3 15bors: auto merge of #13090 : thestinger/rust/iter, r=Aatch...
[08:51:57] *** Parts: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP) ()
[08:52:16] <strcat> huon: TotalEq! :P
[08:52:29] <strcat> I'm still trying to figure out how to rename them sanely ;s
[08:52:38] <eddyb> TotalEek
[08:52:48] <strcat> well those ones would be done later
[08:52:58] <strcat> first step is adding PartialEq/PartialOrd deriving
[08:53:05] <strcat> snapshot, rename them
[08:53:13] <strcat> but the next step should be done carefully
[08:53:36] <strcat> need to decide how we want them deriving (does deriving Ord also derive PartialOrd, etc.)
[08:53:49] <strcat> really hard to change otherwise
[08:57:26] <eddyb> pnkfelix: see my comment https://github.com/mozilla/rust/issues/12857#issuecomment-37502721 as such, I don't find it surprising that it only works with a trait method
[08:58:44] <eddyb> pnkfelix: you could have a generic method using the trait, and doing something invalid (that's only invalid iff the implementer contains a borrowed lifetime or some such)
[08:59:01] <pnkfelix> eddyb: the implementer contains the borrowed lifetime
[08:59:12] <eddyb> pnkfelix: s/method/function/ and then now you have a function which is erroneous only for certain instantiations
[08:59:36] <pnkfelix> eddyb: i understood your comment in the context of the original example
[08:59:49] <pnkfelix> eddyb: but I thought that the revised example illustrates a legitimate bug
[09:00:05] <eddyb> it's a bug, but... a much more complicated one
[09:00:39] <eddyb> pnkfelix: I've helped kimundi fix a similar issue by manually sending a ContravariantLifetime marker with the correct lifetime, to the trait method
[09:00:59] <pnkfelix> eddyb: I personally don't think an explicit marker should be necessary in the second example.
[09:01:39] <eddyb> hmm, that argument should be enough
[09:01:52] <eddyb> FromSlice::<'a>::new(self.buf.as_slice())
[09:02:03] <eddyb> does the explicit lifetime do anything there?
[09:03:20] <eddyb> pnkfelix: okay, so there probably isn't a relation to what I saw yesterday
[09:03:38] <eddyb> pnkfelix: *but* the second trait also doesn't have a lifetime in the return type
[09:03:48] <pnkfelix> it has Self
[09:03:54] <pnkfelix> I've been thinking that is probably related
[09:03:58] <eddyb> so what happens in a generic context?
[09:04:11] <pnkfelix> in that the way that we do the substitution (in my revision) of Hide<'a> for Self
[09:04:29] <eddyb> the substitution can happen too late
[09:04:31] <pnkfelix> it might not be properly plugging in the right 'a.  Not sure yet.
[09:05:29] <eddyb> fn foo<'a, T: FromSlice<'a>>() -> T {FromSlice::new([1, 2, 3])}
[09:05:44] <eddyb> there's two sides you can pick. well, 3
[09:06:20] <eddyb> 1. never compiles. may break a few things
[09:06:51] <eddyb> 2. always compiles. and you somehow deny implementing the trait on something that actually contains the lifetime
[09:07:29] *** pnkfelix is now known as pnkfelix|away
[09:07:40] <eddyb> 3. require annotating the generic bounds allowing or disallowing the type to contain lifetimes
[09:07:53] <eddyb> (occurrences of lifetime 'a, I should say)
[09:08:15] <eddyb> pnkfelix|away: then again, I have like 0 idea of what I'm talking about, I just hope you get *somewhere* with this :)
[09:09:18] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[09:10:26] *** flaper87|afk is now known as flaper87
[09:13:43] * flaper87 says \o/
[09:13:46] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[09:13:49] <flaper87> eddyb: yeah, will do that now
[09:13:55] *** pnkfelix|away is now known as pnkfelix
[09:15:15] <flaper87> eddyb: assuming snap3 jobs finished :D
[09:15:27] <eddyb> yupp, over an hour (or two) ago
[09:15:39] <flaper87> eddyb: cool, lemme do it then
[09:15:59] <eddyb> I think I know how it's done, I just hope you don't run into any issues after you register the snapshot locally
[09:16:08] <eddyb> like a million compile failures that you need to fix
[09:19:43] <pnkfelix> eddyb: I don't think any of those three covers this option: 4. if the implementing type contains the lifetime (impl<'b> FromSlice<'b> for Foo<'b>), then that is reflected in the occurrence of 'b in Foo<'b>, and so when you substitute T['a := 'actual], where 'actual is the actual lifetime, then you should get Foo<'actual> as the T, and reason about that.
[09:20:12] <eddyb> pnkfelix: but what happens in generic contexts?
[09:21:49] <pnkfelix> eddyb: what kind of generic context?  A call to your `fn foo<'a, T: FromSlice<'a>>() -> T` ?
[09:22:57] <eddyb> not a call, but the function itself
[09:23:17] <eddyb> how do you type check it without substituting an actual type in?
[09:23:41] <pnkfelix> eddyb: ah, like what rules are imposed on T when we type-check foo ?
[09:24:33] <eddyb> yeah
[09:24:34] <flaper87> eddyb: make check running
[09:24:35] <pnkfelix> eddyb: or rather, what rules are imposed on values of type T when we type-check foo
[09:24:54] <eddyb> pnkfelix: if you solve that, you should solve the original issue as well
[09:27:50] <flaper87> eddyb: and I just hit the first set of errors
[09:28:31] <eddyb> pnkfelix: the 0 knowledge thing still applies :P
[09:28:36] <eddyb> flaper87: how many?
[09:29:23] <flaper87> eddyb: 66 but it's likely a matter of removing #[cfg(stage0)] code :)
[09:29:32] <eddyb> yupp
[09:31:05] <huon> strcat: sorry, what?
[09:31:07] <huon> :P
[09:31:33] <huon> strcat: you want me to remove the equals method, right?
[09:31:51] <strcat> huon: yes, but it still has to check that each field implements TotalEq
[09:32:03] <huon> How bad would it be if I were to have a default method `fn use_total_eq(&self) {}`?
[09:32:07] <strcat> so it needs to declare a function local to the method it declares (should be inline(always)) with the assertion
[09:32:14] <pnkfelix> eddyb: true, these pieces are all interconnected
[09:32:23] <strcat> huon: bad ;p, that's not much different than the current situation
[09:32:31] <huon> strcat: noone would have to know about it
[09:32:39] <huon> could be #[doc(hidden)]
[09:32:50] <strcat> huon: we could also expose a free function to do it
[09:32:54] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Input/output error)
[09:32:55] <strcat> it only has to call a function on each field
[09:33:04] <strcat> fn foo<T: TotalEq>(x: &T) {}
[09:33:05] <huon> strcat: method is easier for deriving
[09:33:06] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[09:33:13] <strcat> huon: meh ;)
[09:33:15] <strcat> it's ugly
[09:33:17] <huon> but, yeah, a free function is how I would do it without the method
[09:35:31] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[09:35:32] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[09:35:48] *** Parts: kimundi (kimundi@moz-2E6F4AE4.dip0.t-ipconnect.de) (leaving)
[09:36:03] *** Joins: kimundi (kimundi@moz-2E6F4AE4.dip0.t-ipconnect.de)
[09:41:57] *** Joins: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP)
[09:41:57] <ghrust> [13rust] 15bors 04force-pushed 06auto from 1481a3cc3 to 142ddb605: 02http://git.io/N3iJvQ
[09:41:57] *** Parts: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP) ()
[09:44:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[09:46:30] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[09:50:22] <eddyb> flaper87: I hope you'll get us a snapshot before I get back
[09:52:40] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[09:53:36] <flaper87> eddyb: check running 
[09:54:06] <eddyb> sweeet
[09:55:00] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[10:04:43] *** Quits: Axord (xord@moz-BC8E2FBC.static.rvsd.ca.charter.com) (Ping timeout)
[10:09:28] *** Quits: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se) (Quit: mediocrity)
[10:14:49] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[10:16:43] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[10:23:48] <huon> strcat: bleh, anything other than a method is fighting tooth and nail against the current structure of #[deriving]. :(
[10:24:02] <strcat> huon: yeah that's why I gave up and started bugging you
[10:24:04] <strcat> ;)
[10:24:06] <strcat> ;(
[10:25:07] <huon> anyway, I'll just do a method and make it #[doc(hidden)] 
[10:25:48] <huon> someone (possibly me) can refactor #[deriving] to make non-trait-methods saner
[10:39:15] <flaper87> huon: https://github.com/mozilla/rust/pull/13099 (I'd wait for travis just to double check)
[10:39:36] <flaper87> well, buildbot will check this too anyway
[10:44:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[10:46:27] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[10:49:32] *** Joins: Axord (xord@moz-BC8E2FBC.static.rvsd.ca.charter.com)
[10:57:04] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[10:57:04] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/g4dXDg
[10:57:04] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[10:57:41] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[10:58:00] <huon> strcat: I wonder how many people will complain about to_owned_vec (finally) disappearing
[11:00:00] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[11:01:59] *** Joins: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP)
[11:01:59] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/CfWZCw
[11:01:59] *** Parts: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP) ()
[11:02:00] *** Joins: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP)
[11:02:00] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/n4tLBw
[11:02:00] <ghrust> 13rust/06auto 1456cf09c 15Steven Fackler: Some cleanup in std::io::buffered...
[11:02:00] <ghrust> 13rust/06auto 1406be5f7 15bors: auto merge of #13092 : sfackler/rust/buffer-vec, r=thestinger...
[11:02:01] *** Parts: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP) ()
[11:14:59] *** Joins: lpy_ (lpy@E44EE2C4.F09091A8.1348A864.IP)
[11:15:22] *** Quits: lpy (lpy@8B40CDAC.F09091A8.1348A864.IP) (Ping timeout)
[11:15:44] *** Quits: lpy_ (lpy@E44EE2C4.F09091A8.1348A864.IP) (Client exited)
[11:16:16] *** Joins: lpy (lpy@8B40CDAC.F09091A8.1348A864.IP)
[11:19:47] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[11:20:13] *** Quits: gwty (gwtypc@3CAC4C72.A9D442CE.49FF672.IP) (Ping timeout)
[11:21:50] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[11:30:59] *** Joins: gimpf (gimpf@moz-F83BFCD0.adsl.highway.telekom.at)
[11:34:59] *** Joins: gwty (gwtypc@3CAC4C72.A9D442CE.49FF672.IP)
[11:35:31] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[11:44:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[11:46:26] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[11:47:24] *** Joins: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se)
[11:51:19] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[11:52:05] *** Quits: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se) (Quit: mediocrity)
[11:53:27] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[11:59:40] *** Joins: eddyb_r (Mibbit@D159D603.97C485DB.D608C900.IP)
[11:59:46] <eddyb_r> hi
[12:00:07] *** Quits: eddyb_r (Mibbit@D159D603.97C485DB.D608C900.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[12:03:20] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[12:05:10] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[12:05:38] <huon> threadsafe eddyb?
[12:08:48] *** Joins: eddyb_r (Mibbit@D159D603.97C485DB.D608C900.IP)
[12:08:55] <eddyb_r> ok, here
[12:09:52] *** Joins: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se)
[12:11:01] <huon> 23:05:38 - huon: threadsafe eddyb?
[12:11:17] <eddyb_r> hehe
[12:11:28] <eddyb_r> if only I had SSH up at home
[12:11:36] <eddyb_r> well, it may be up, let's try something
[12:17:26] <huon> strcat: https://github.com/mozilla/rust/pull/13102
[12:19:13] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Ping timeout)
[12:19:41] <eddyb_r> huon: can we have private items show up in docs?
[12:20:11] <eddyb_r> I make implementation details of certain parts of rustc private, to kill dead code, among other things
[12:20:39] <eddyb_r> but documentation is still nice, even if they only work in one context
[12:21:11] <eddyb_r> or maybe we should have clean public APIs for all the stages and just do dead code detection better in that librustc context
[12:21:26] <kimundi> A optional "show private items and docs" checkbox would be cool.
[12:22:29] <eddyb_r> wouldn't mind that
[12:22:38] <eddyb_r> learn how the internals work *if you want to*
[12:22:40] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.3)
[12:22:47] *** Joins: zimbabao (rajaram@817E69AE.26907A.D2D1FAF0.IP)
[12:23:17] <eddyb_r> kimundi: I'm tempted by working on an IDE of sorts again
[12:24:15] <huon> eddyb_r: I think there's a flag to rustdoc to show private items
[12:24:33] <eddyb_r> cool
[12:24:36] <huon> (or at least, a flag that lets you avoid running the pass that removes them)
[12:24:59] <eddyb_r> hehe implementation details
[12:25:33] *** Joins: doener (doener@moz-C68F600D.unity-media.net)
[12:26:36] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[12:27:54] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[12:33:35] *** Quits: eddyb_r (Mibbit@D159D603.97C485DB.D608C900.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[12:43:24] <kimundi> I can't actually resolve a path in a syntax extension, right? So at most I can check that it has the right name, like "Iterator", correct?
[12:48:31] <huon> yes
[12:50:02] <kimundi> Hm, but even that would be incorrect for renamed imports. Well I can just check that the shape is right (only one type parameter)
[13:00:44] *** Quits: sunfish (chatzilla@moz-42DA0C69.dsl.dynamic.sonic.net) (Ping timeout)
[13:02:02] *** Joins: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP)
[13:02:02] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/n4tLBw
[13:02:02] *** Parts: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP) ()
[13:02:05] <doener> oops, perf report for compiling librustc takes 5.9G on disk
[13:02:53] <eddyb> at least it's on disk
[13:03:30] <eddyb> good news is that I'm likely to work in an environment with DIMMs literally stacked on shelves
[13:06:56] *** Joins: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP)
[13:06:56] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/qQ10tg
[13:06:56] <ghrust> 13rust/06auto 14f62bdfc 15Ryan Scheel (Havvy): Change types T,U to R (recv), S (sender) in libsync/comm.rs
[13:06:56] <ghrust> 13rust/06auto 141cd0a5e 15bors: auto merge of #13093 : Havvy/rust/master, r=sfackler...
[13:06:56] *** Parts: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP) ()
[13:06:57] *** Joins: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP)
[13:06:57] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/pHFdHg
[13:06:57] *** Parts: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP) ()
[13:07:40] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[13:09:20] <kimundi> hm, how do I get a syntax::ext::deriving::ty::Ty from a syntax::ast::Ty ?
[13:09:37] <eddyb> that's a silly thing IIRL
[13:09:39] <doener> eddyb: looking at the results also takes ~6G RSS
[13:09:41] <eddyb> kimundi: look at the functions
[13:09:52] <eddyb> doener: well, mmap is your friend
[13:10:02] <kimundi> eddyb: That advice is not very helpful :)
[13:10:04] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[13:10:15] <eddyb> kimundi: as in, functions that deal with the types you want
[13:10:32] <eddyb> I am borderline complaining we don't have a hoogle equivalent
[13:10:48] <doener> eddyb: Luckily I have enough memory in this box
[13:10:58] <kimundi> That is hard to do if I nether know which types I want nor where the functions are defined... :(
[13:11:24] <eddyb> kimundi: well, you said ast::ty and deriving::ty::Ty
[13:11:34] <eddyb> look in ext/deriving/ty.rs
[13:11:44] <eddyb> that's how *I* do it anyways
[13:12:20] <kimundi> eddyb: Ah, I'm getting thrown of by both not having their impl block next to it
[13:12:34] <kimundi> My grep foo is still weak, too
[13:12:35] <eddyb> impl.*Ty
[13:12:44] <eddyb> maybe with \bTy\b
[13:13:03] *** Joins: edwardw (Mibbit@CEDA2251.A25DFE4.D39A8B3F.IP)
[13:13:24] <kimundi> okay, I see a method for turning a ty::Ty into a P<ast::Ty>, now I only need to find the opposite operation...
[13:16:46] <flaper87> eddyb: btw, https://github.com/mozilla/rust/pull/13099
[13:16:54] <eddyb> I think I saw it
[13:17:03] <huon> kimundi: there isn't one
[13:17:13] <huon> bleh, std::comm::Select is so fragile :(
[13:17:17] <kimundi> huon: Okay, anyway for me to write one?
[13:17:20] * huon can't get it to work for this
[13:17:56] <huon> kimundi: I don't think that's a good idea. the deriving::ty::Ty is designed purely for the specific case of specifying types for deriving
[13:18:15] <huon> i.e. Self, bool, and generics, basically.
[13:19:44] <kimundi> huon: Right, thats what I'm trying to do. I'm creating a TraitRef to use for the attribute, for which I need to build the path of the trait I'm implementing, for which I need to reuse a typeparamter of the impl block the attribute is defined on.
[13:20:27] <kimundi> #[attr] impl<A> Foo<A> for X => expand to impl<A> Baz<A> for X
[13:20:39] <kimundi> with the generic <A> reused
[13:21:42] <kimundi> reused/recreated etc. Needs to be the same anyway.
[13:27:17] <huon> kimundi: I don't think the deriving infrastructure will be appropriate for that
[13:27:28] <huon> just Clone the generic out of the old `impl` block
[13:27:32] *** Quits: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se) (Quit: mediocrity)
[13:28:00] <huon> and similarly clone X
[13:28:09] <huon> and you can even clone the <A> part of the traitref
[13:28:16] <huon> just changing the path
[13:28:40] <huon> (if they're @'d, you won't even need to clone.)
[13:29:14] * huon -> bed
[13:29:39] *** Quits: edwardw (Mibbit@CEDA2251.A25DFE4.D39A8B3F.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[13:30:01] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[13:30:04] <kimundi> huon: Ah, I see my error. I thought I need a TraitDef, but I can just start creating @ast::Item from scratch, right?
[13:31:47] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[13:36:22] <eddyb> kimundi: do you want the generic deriving magic?
[13:38:00] <kimundi> eddyb: No, its a seperate attribute
[13:38:15] <kimundi> not a regular deriving thing
[13:38:22] <eddyb> so the generated code doesn't follow deriving patterns?
[13:38:28] <kimundi> Though it also expands to a trait impl for a type
[13:38:30] <kimundi> yeah
[13:38:48] *** Quits: gwty (gwtypc@3CAC4C72.A9D442CE.49FF672.IP) (Ping timeout)
[13:40:20] <kimundi> #[iterable] impl Iterator<X> for Y => impl Iterable<X, Y> for Y impl Iterator<X> for Y 
[13:40:43] <eddyb> ah okay
[13:41:34] <doener> cmr: ping
[13:41:57] *** Joins: edwardw (edwardw@861842BE.B4F65FC7.A0A36CCE.IP)
[13:44:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[13:46:28] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[13:50:12] *** Joins: canhtak (canhtak@moz-1300C4D7.wl.t.ulaval.ca)
[13:51:00] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[13:52:02] *** Quits: victorporof (victorporo@moz-FFB76956.cpe.net.cable.rogers.com) (Quit: victorporof)
[13:53:24] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[13:55:34] <kimundi> If for a syntax extension I create a new ast::Item that needs a NodeId, do I use ast::DUMMY_NODE_ID? (Read something about those getting renumbered afterwards)
[13:55:41] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[13:56:04] *** Quits: aurynj (Eon@53E88241.65896F99.364694FC.IP) (Quit: Leaving)
[13:57:02] *** Quits: edwardw (edwardw@861842BE.B4F65FC7.A0A36CCE.IP) (Quit: Leaving...)
[13:59:51] *** Joins: edwardw (edwardw@4299445D.BF90DB87.492F1EB9.IP)
[14:07:36] <flaper87> mmh, dynamic load of crates seems broken, but I'm likely doing something wrong
[14:08:46] <flaper87> :( http://pastebin.mozilla.org/4659970
[14:09:46] <kimundi> flaper87: What are you loading?
[14:10:38] <flaper87> kimundi: http://pastebin.mozilla.org/4659973
[14:10:49] <flaper87> it's a lib I'm working on
[14:11:24] <kimundi> might need to be a extern "C" fn?
[14:13:08] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[14:15:05] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[14:16:59] *** Joins: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP)
[14:16:59] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/qQ10tg
[14:16:59] *** Parts: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP) ()
[14:20:58] <flaper87> kimundi: mmh, not sure, TBH. Let me check how syntax extensions do this, IIRC, crates are loaded using `DynamicLibrary`
[14:21:58] *** Joins: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP)
[14:21:58] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/I1xCdA
[14:21:58] *** Parts: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP) ()
[14:21:59] *** Joins: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP)
[14:21:59] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/UT8wxA
[14:21:59] <ghrust> 13rust/06auto 14576e36e 15Flavio Percoco: Register new snapshots
[14:21:59] <ghrust> 13rust/06auto 14cafb7ed 15bors: auto merge of #13099 : FlaPer87/rust/master, r=huonw
[14:22:00] *** Parts: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP) ()
[14:22:39] <eddyb> kimundi: it's always dummies
[14:22:54] <eddyb> kimundi: they get numbered right before resolve, AFAIK
[14:23:05] <eddyb> or after the last AST fold, basically
[14:23:19] <eddyb> flaper87: sweeet (snapshot)
[14:23:29] <flaper87> eddyb: :D
[14:24:34] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[14:26:37] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[14:39:50] *** Quits: edwardw (edwardw@4299445D.BF90DB87.492F1EB9.IP) (Quit: Leaving...)
[14:44:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[14:46:06] <flaper87> kimundi: so, with #[no_std] it seems to work
[14:46:28] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[14:47:30] <eddyb> kimundi, flaper87: the original backtrace seems to be a missing library
[14:47:54] <eddyb> flaper87: are you loading something dynamically linked to libstd into a binary that's statically linked against libstd?
[14:48:19] <flaper87> eddyb: both dynamically linked to libstd
[14:48:25] <eddyb> oh, hmm
[14:48:34] <flaper87> oh, mmh, wait! You may be right
[14:53:43] <flaper87> eddyb: indeed you were right
[14:53:46] * flaper87 feels dumb now
[14:53:52] <flaper87> but I'm used to feeling that way
[14:53:54] <flaper87> :D
[14:54:06] <eddyb> flaper87: just lucky guess
[14:54:17] <flaper87> eddyb: good one, though! Thanks :)
[14:55:58] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[14:58:25] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[15:00:01] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[15:00:06] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[15:01:55] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[15:05:28] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[15:14:22] *** Joins: lpy_ (lpy@E44EE2C4.F09091A8.1348A864.IP)
[15:15:23] *** Quits: lpy (lpy@8B40CDAC.F09091A8.1348A864.IP) (Ping timeout)
[15:16:16] *** Quits: lpy_ (lpy@E44EE2C4.F09091A8.1348A864.IP) (Ping timeout)
[15:16:19] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[15:18:08] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:20:04] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[15:28:32] *** Joins: aurynj (Eon@C498BDEC.C264657C.C6282BC4.IP)
[15:32:02] *** Joins: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP)
[15:32:02] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/UT8wxA
[15:32:02] *** Parts: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP) ()
[15:36:53] *** Joins: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP)
[15:36:53] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/Q-vRxQ
[15:36:53] <ghrust> 13rust/06auto 14f6db0ef 15Huon Wilson: std: remove the `equals` method from `TotalEq`....
[15:36:53] <ghrust> 13rust/06auto 14903e838 15bors: auto merge of #13102 : huonw/rust/totaleq-deriving, r=thestinger...
[15:36:53] *** Parts: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP) ()
[15:36:54] *** Joins: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP)
[15:36:54] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/GJO-nQ
[15:36:54] *** Parts: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP) ()
[15:38:04] <eddyb> did we get a snapshot?
[15:38:29] *** Quits: canhtak (canhtak@moz-1300C4D7.wl.t.ulaval.ca) (Quit: canhtak)
[15:39:42] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:39:46] <eddyb> oh we did :D
[15:41:41] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[15:42:09] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Input/output error)
[15:42:43] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[15:43:36] *** Joins: edwardw (edwardw@D286B842.1B2F6624.7F41E82D.IP)
[15:44:28] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Ping timeout)
[15:44:31] *** Quits: dcrewi (david@moz-AB8667CE.gyrae.net) (Ping timeout)
[15:44:44] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:46:13] *** Joins: vfetwnuncszu (david@moz-AB8667CE.gyrae.net)
[15:46:28] *** vfetwnuncszu is now known as dcrewi
[15:46:33] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[15:51:22] *** Quits: zimbabao (rajaram@817E69AE.26907A.D2D1FAF0.IP) (Ping timeout)
[15:51:46] *** Joins: lpy (lpy@1834E2CB.F09091A8.1348A864.IP)
[15:58:43] <flaper87> w000t, snapshot! :D
[16:00:56] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[16:03:24] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[16:16:49] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[16:18:11] *** Joins: canhtak (canhtak@moz-1300C4D7.wl.t.ulaval.ca)
[16:19:18] *** Joins: victorporof (victorporo@moz-FFB76956.cpe.net.cable.rogers.com)
[16:22:25] *** Quits: lpy (lpy@1834E2CB.F09091A8.1348A864.IP) (Ping timeout)
[16:23:11] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[16:25:03] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[16:30:50] *** Joins: lpy (lpy@1834E2CB.F09091A8.1348A864.IP)
[16:46:11] *** Quits: japaric (japaric@F7BC3ABB.DC1425E6.84437BC5.IP) (Ping timeout)
[16:46:49] *** Joins: japaric (japaric@D2861789.743D7231.BFC118EE.IP)
[16:53:21] *** Quits: lpy (lpy@1834E2CB.F09091A8.1348A864.IP) (Client exited)
[16:56:37] *** Joins: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se)
[16:56:47] *** Quits: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se) (Client exited)
[16:56:53] *** Quits: Kxepal (Miranda@moz-D0E0B353.pppoe.mtu-net.ru) (Ping timeout)
[16:57:03] *** Quits: blank_name (blank_name@2C5A9B5B.E6D3F868.537E532E.IP) (Ping timeout)
[17:01:12] *** Joins: Kxepal (Miranda@moz-CC5238CC.pppoe.mtu-net.ru)
[17:04:04] *** Quits: sigma (sigma@moz-55097A0B.range86-163.btcentralplus.com) (Ping timeout)
[17:05:53] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:08:16] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:16:56] *** Joins: sigma (sigma@moz-15A267A9.range109-152.btcentralplus.com)
[17:18:47] *** Joins: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se)
[17:26:58] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[17:28:10] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:30:01] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:32:37] <cmr> doener: pong
[17:35:59] <doener> cmr: wanted to ask about the state of #13001 because I needed the same thing for my attempt to get bool back to i1. Implemented it myself in the meantime though
[17:36:23] <cmr> doener: ah I've been travelling past day
[17:36:31] <eddyb> oh, this wasn't merged yet
[17:36:34] <eddyb> nmatsakis: r? https://github.com/mozilla/rust/pull/13004
[17:36:48] <eddyb> or rather, ... r=nmatsakis since I fixed the nits
[17:36:54] *** Joins: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP)
[17:36:54] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/Q-vRxQ
[17:36:54] *** Parts: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP) ()
[17:37:00] <eddyb> and I don't think there was anything else to review
[17:37:21] <doener> cmr: https://gist.github.com/dotdash/163790858bc88d5c66ac FWIW
[17:37:48] <eddyb> (I wish diff commits were the only way to make comments. and that you could view only certain commits in the diff. since now nmatsakis' nits are lost :/)
[17:38:17] <cmr> eddyb: you could start using phabricator for review :)
[17:38:35] <eddyb> are we moving to that? can I just point people at my PRs?
[17:38:44] <cmr> no, but I'm experimenting with it.
[17:38:56] <cmr> you can ask people to use it.
[17:39:07] <eddyb> http://phabricator.octayn.net/project/view/1/ ah ha!
[17:39:15] <eddyb> I couldn't find that last time I fiddled with it
[17:39:20] <cmr> It didn't exist :P
[17:39:28] <cmr> I hadn't finished setting things up
[17:39:57] <cmr> unfortunately until I figure out how to do more fine-grained permissions I'm only giving reviewers membership to that project
[17:40:01] <eddyb> "Audit Required¬∑H2 Verify unsafe code Triggered Audit" hah that's cool
[17:40:04] <cmr> since once you are a member you can basically do anything
[17:40:08] <cmr> :\
[17:40:53] <eddyb> cmr: http://phabricator.octayn.net/project/members/1/
[17:41:02] <eddyb> pretty sure I just added myself
[17:41:05] <cmr> wat
[17:41:07] <eddyb> and I can remove people
[17:41:10] <cmr> dear lord
[17:41:16] <eddyb> cmr: I pressed "join project"
[17:41:21] <cmr> lol
[17:41:40] <cmr> ahhhh there are settings on it!
[17:41:44] <eddyb> and before that, all I had to do was authenticate with github
[17:41:47] <cmr> Visible To
[17:41:48] <cmr>     All Users 
[17:41:50] <cmr> Editable By
[17:41:52] <cmr>     All Users 
[17:41:54] <cmr> Joinable By
[17:41:56] <cmr>     All Users
[17:41:57] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[17:41:57] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/KtDe9g
[17:41:57] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[17:41:57] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[17:41:57] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/ZJfZvA
[17:41:57] <ghrust> 13rust/06auto 14f0f5072 15Piotr Czarnecki: rustc: Change the filename of compressed bitcode...
[17:41:57] <ghrust> 13rust/06auto 14e5bce54 15bors: auto merge of #13074 : pczarn/rust/build-rlib, r=alexcrichton...
[17:41:58] <cmr> oops
[17:41:58] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[17:42:00] <cmr> that pasted poorly
[17:42:02] <eddyb> cmr: gj
[17:42:40] <cmr> eddyb: can you "Edit Members" and remove huon?
[17:43:02] <eddyb> "You do not have permission to edit this object."
[17:43:09] <cmr> ok, cool.
[17:43:48] <eddyb> cmr: can I import my PR?
[17:43:55] <eddyb> lazy mode
[17:44:03] <cmr> eddyb: yes, but you need to install the command-line tool.
[17:44:04] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:44:09] <cmr> it's called arcanist
[17:44:18] <eddyb> right, I was hoping I wouldn't have to
[17:44:29] <eddyb> cmr: oh wow the line comments are awesome :D
[17:45:14] <eddyb> cmr: looks strictly superior to rietveld, I like it already :)
[17:45:25] <cmr> yeah I'm really pleased so far.
[17:45:35] <eddyb> and of course it has nicer UI. I wish it had Rust highlighting in diffs, but that's minor
[17:45:37] <cmr> I have it set to trigger audits of all unsafe code and any update of a submodule
[17:45:40] <cmr> hm
[17:45:46] <cmr> I set the syntax highlighting to pygments
[17:45:50] <cmr> and should have enabled rust...
[17:46:25] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:46:27] *** Joins: blank_name (blank_name@74F8D612.6AA59BE4.31328D85.IP)
[17:46:44] <eddyb> http://phabricator.octayn.net/diffusion/R/browse/master/src/librustc/lib.rs nada
[17:46:56] <eddyb> why is it rR?
[17:47:12] <cmr> the first r is just a prefix for every repository
[17:47:18] <cmr> upper-case R is the "call sign"
[17:47:30] <eddyb> awesome
[17:48:03] <eddyb> has a DSL feel to it, but once you learn enough quirks, it's much better than Github or other dedicated solutions I've seen
[17:48:20] <eddyb> cmr: does it look suitable for RFCs?
[17:48:21] <cmr> I'm incredibly happy with it so far
[17:48:27] <cmr> eddyb: I don't think so.
[17:48:30] <cmr> At least not its code review tool.
[17:48:37] <cmr> I haven't looked at some of the other applications yet.
[17:48:49] <cmr> it comes with a lot of stuff, and I don't have any of the beta applications installed.
[17:49:08] <cmr> eddyb: http://phabricator.octayn.net/P1 has syntax highlighting!
[17:49:10] <eddyb> http://phabricator.octayn.net/diviner/ rustdoc pls
[17:49:12] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:50:08] <eddyb> http://phabricator.octayn.net/feed/ why is this not named "Pheed"?
[17:50:30] <eddyb> cmr: OMG a queriable feed
[17:50:35] <cmr> yup
[17:50:38] <cmr> everything is queriable.
[17:50:56] <cmr> and (almost?) every event can have a herald rule applied to it
[17:51:04] <cmr> to trigger actions.
[17:51:18] <eddyb> but this, this is why I don't watch repos on github, because you don't have control over what you see
[17:51:33] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:56:54] *** Quits: doener (doener@moz-C68F600D.unity-media.net) (Quit: leaving)
[17:57:04] <cmr> eddyb: I'm not sure diviner is useful for us, even if we can generate output for it with rustdoc. it seems extremely prose-oriented
[17:57:09] <cmr> rather than rustdoc which is api-oriented.
[17:57:22] <cmr> and I'd rather use sphinx for prose!
[17:58:32] <eddyb> oh ok
[18:00:01] <cmr> eddyb: oh it looks like you *can* create a diff in lazy mode: http://phabricator.octayn.net/differential/diff/create/
[18:00:04] <cmr> go for it :)
[18:01:51] <eddyb> but that's not lazy :S
[18:01:58] <cmr> git diff | xsel -ib
[18:02:00] <cmr> then ctrl-v :P
[18:02:16] <flaper87> can I haz join permissions? :D
[18:02:18] <eddyb> oh that's clip
[18:02:24] <eddyb> flaper87: you lost the window, sorry
[18:02:30] <flaper87> nooooooooooooooooooo
[18:02:31] <flaper87> :(
[18:02:37] <cmr> I can add you
[18:02:43] <flaper87> cmr: w000t, pls :)
[18:02:44] <eddyb> cmr: I have a clip scrip that does the right magic thing so it actually works
[18:03:02] <eddyb> xclip -selection clipboard $*
[18:03:14] <eddyb> because xclip never worked for me until I figured that out
[18:03:35] <cmr> I just use xsel
[18:03:50] <eddyb> anyways, fixing TotalEq rebases
[18:03:59] <eddyb> I *so* wish git diffs would be smarter
[18:04:07] <cmr> flaper87: you should be able to join it now.
[18:04:20] <flaper87> cmr: awesome, joined!
[18:04:22] <flaper87> thanks
[18:04:25] <eddyb> like, someone added TotalEq in places, I added Clone
[18:04:36] <eddyb> just merge the two lines if I want you to :(
[18:05:12] <eddyb> cmr: of course, I stop to complain at the last rebase conflict
[18:05:47] <flaper87> brb
[18:06:43] <eddyb> /home/eddy/bin/arc: line 21: /home/eddy/bin/../scripts/arcanist.php: No such file or directory
[18:06:55] <eddyb> if only people would use readlink *sigh*
[18:07:35] <eddyb> cmr: huh, my script doesn't work anymore
[18:07:49] <eddyb> nevermind I'm using git diff wrong
[18:11:25] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[18:13:19] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[18:23:06] <cmr> bah logging can't be enabled per-function
[18:23:42] *** Quits: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se) (Quit: mediocrity)
[18:26:33] <eddyb> cmr: I knew how to change log-level from expr kind to intrinsic, I just didn't do it because I found something else to do
[18:26:51] <eddyb> in a way, I like how the module map is gone
[18:27:01] <eddyb> on the other hand, it was efficient
[18:27:20] <eddyb> maybe we should have expansion create all those log-level statics?
[18:27:35] <eddyb> well, you still need to "register" them somehow
[18:28:17] <eddyb> cmr: hmm, maybe not. we can dlopen self and query for symbols, right?
[18:28:38] <cmr> if it's a dynamic unstripped library.
[18:28:47] <cmr> slash executable
[18:28:56] <eddyb> should we require that for RUST_LOG?
[18:29:06] <cmr> I hope not.
[18:29:16] <eddyb> string search is pretty slow...
[18:29:26] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[18:29:40] <eddyb> possibly O(N*M) for even just one directive
[18:30:13] <eddyb> cmr: maybe some kind of hash thing... but that doesn't really work, does it
[18:30:18] <cmr> hm?
[18:30:23] <cmr> linkers already use a hashmap
[18:30:40] <eddyb> I mean, precomputed hash constants instead of full strings
[18:31:03] <eddyb> (with something like the current liblog implementation)
[18:43:51] *** Quits: victorporof (victorporo@moz-FFB76956.cpe.net.cable.rogers.com) (Quit: victorporof)
[18:44:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[18:46:33] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[18:54:13] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[18:54:14] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[18:55:57] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[18:56:25] <flaper87> cmr: any tips / tricks about phabricator ?
[18:56:35] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[18:56:42] <cmr> flaper87: install the arcanist tool, then you can upload diffs with `arc diff` for review.
[18:56:47] <cmr> one sec, I'll get the full instructions.
[18:56:58] *** Joins: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP)
[18:56:59] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14e5bce54 to 14903e838: 02http://git.io/N3iJvQ
[18:56:59] *** Parts: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP) ()
[18:57:33] <cmr> https://gist.github.com/cmr/6c6b9fc858ab6f3f4062
[18:57:50] <flaper87> cmr: awesome, thanks!
[18:59:06] <cmr> you can also create a .arcconfig such as https://gist.github.com/cmr/6c6b9fc858ab6f3f4062#file-arcconfig somewhere
[18:59:17] <cmr> If phabricator becomes widely used it could be committed directly to the repo.
[19:00:10] <cmr> otherwise, see https://secure.phabricator.com/book/phabricator/article/arcanist_new_project/ and https://secure.phabricator.com/book/phabricator/article/arcanist/
[19:00:27] * flaper87 clicks on both links
[19:00:33] <flaper87> I'll add the arcconfig too
[19:00:44] <cmr> (that obviates the need for the --conduit-uri btw)
[19:00:51] <cmr> I should get https rolling.
[19:00:54] <flaper87> first time using phabricator. What's your workflow for working with it?
[19:01:09] <cmr> I've never used it before either :)
[19:01:21] <flaper87> lol, ok, we'll figure it out :D
[19:01:52] <cmr> you can do `arc diff` to create the equivalent of a pull request.
[19:02:06] <cmr> you can request a specific reviewer(s), or just enter "Rust" for all contributors
[19:03:05] <eddyb> OWNERS.md pls
[19:03:21] <cmr> there's also an audit trigger set up for all changes to unsafe code
[19:03:36] <cmr> don't do the audit if you reviewed or authored the change :)
[19:04:14] <eddyb> I can already see "typeck, borrowck, trans: nmatsakis"
[19:04:41] <eddyb> hope you don't need to touch any of those when he's busy :P
[19:07:38] <cmr> flaper87: I'm going to go sleep, but if you find something cool or broken I'll investigate after I write TWiR (after I wake up)
[19:08:14] <flaper87> cmr: sounds good, I'll play with it and let you know if something bad happens :D
[19:08:22] <flaper87> or good :P
[19:08:55] <eddyb> cmr: sleeping now? that's weird, you sometimes go to sleep when I wake up, not when I go to sleep
[19:09:14] <cmr> eddyb: yeah my sleep schedule is pretty chaotic sometimes.
[19:09:14] <eddyb> (timezones confuse me)
[19:09:22] <cmr> I discovered that netflix has pokemon last night
[19:09:26] <cmr> and it was my last night at home...
[19:09:27] <eddyb> hahaha
[19:09:45] <eddyb> I tend to pick up entire series
[19:09:57] <cmr> oh I also finished S3 of the walking dead
[19:10:01] <cmr> but that's #rust-offtopic chatter
[19:10:04] <cmr> g'night :p
[19:10:15] <eddyb> and I watch them like I read books
[19:10:31] <eddyb> from pilot to cancellation. which is so sad
[19:10:45] * eddyb checks whether House is actually cancelled
[19:15:21] *** Joins: jensnockert (jensnocker@moz-EF95FD94.astro.lu.se)
[19:16:19] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[19:17:06] *** Quits: jensnockert (jensnocker@moz-EF95FD94.astro.lu.se) (Ping timeout)
[19:18:19] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[19:20:12] *** Joins: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru)
[19:20:17] *** Quits: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru) (Quit: Leaving...)
[19:44:04] *** Joins: aatch_ (James@moz-B437F499.pocketrent.com)
[19:44:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[19:44:23] *** Quits: aatch (aatch@moz-2BB0AC01.cable.telstraclear.net) (NickServ (GHOST command used by aatch_))
[19:44:28] *** aatch_ is now known as aatch
[19:44:40] *** Joins: aatch_ (aatch@moz-2BB0AC01.cable.telstraclear.net)
[19:46:28] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[19:47:24] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[19:49:22] *** Quits: blank_name (blank_name@74F8D612.6AA59BE4.31328D85.IP) (Ping timeout)
[19:52:26] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[19:53:01] *** Quits: edwardw (edwardw@D286B842.1B2F6624.7F41E82D.IP) (Quit: Leaving...)
[19:55:27] *** Joins: blank_name (blank_name@AD525492.9285D4F9.93A5C78C.IP)
[19:56:13] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[19:59:13] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[20:01:35] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[20:08:09] *** Joins: bvssvni (Mibbit@moz-A47B6F8E.bb.online.no)
[20:09:00] *** Joins: herrwolfe45 (uid26657@moz-E77DEB21.irccloud.com)
[20:10:07] <herrwolfe45> hi - i'm working on a small patch for librustc/lib.rs. Do I need to run `make check` each time I want to test my changes, or is there a quicker alternative?
[20:14:54] *** Joins: lkuper (lkuper@moz-143692FE.dyn.optonline.net)
[20:21:19] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[20:23:09] *** Quits: rook (rook@moz-97AF7010.hsd1.mn.comcast.net) (Quit: rook)
[20:23:19] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[20:27:20] *** Quits: huon (Thunderbir@moz-826BD85A.lns20.syd6.internode.on.net) (Ping timeout)
[20:31:31] <kimundi> herrwolfe45: make check-stage1-rustc or so could speed it up
[20:33:47] <herrwolfe45> thanks kimundi
[20:35:18] <herrwolfe45> that helped dramatically!
[20:42:47] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[20:46:00] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[20:48:41] *** Quits: lkuper (lkuper@moz-143692FE.dyn.optonline.net) (Quit: lkuper)
[20:56:59] *** Joins: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP)
[20:56:59] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/n-7MoA
[20:56:59] *** Parts: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP) ()
[21:01:56] *** Joins: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP)
[21:01:56] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/RB12-w
[21:01:56] *** Parts: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP) ()
[21:01:56] *** Joins: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP)
[21:01:56] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/hxpHCA
[21:01:56] <ghrust> 13rust/06auto 14f0f5072 15Piotr Czarnecki: rustc: Change the filename of compressed bitcode...
[21:01:56] <ghrust> 13rust/06auto 14841f31e 15bors: auto merge of #13074 : pczarn/rust/build-rlib, r=alexcrichton...
[21:01:57] *** Parts: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP) ()
[21:05:35] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[21:14:04] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Quit: Leaving...)
[21:20:53] *** Joins: ktt3ja (ktt3ja@moz-8D2A07E1.hsd1.va.comcast.net)
[21:25:07] *** Joins: lkuper (lkuper@moz-61339218.dyn.optonline.net)
[21:25:51] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[21:27:13] * kimundi is almost done writing out a trait definition ast by hand, gets the feeling he should have looked more carefully for helper functions
[21:28:11] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[21:33:16] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[21:44:43] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[21:46:36] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[21:55:21] *** Quits: aurynj (Eon@C498BDEC.C264657C.C6282BC4.IP) (Ping timeout)
[22:00:19] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[22:00:44] *** Joins: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se)
[22:01:24] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[22:03:43] <nrc> Sigh. Metadata.
[22:04:39] <eddyb> nrc: EBML loves you
[22:05:50] <nrc> the feeling is not reciprocated
[22:05:53] <aatch> eddyb, I'm not sure if EBML knows what love is.
[22:06:39] <eddyb> aatch: it's a tag!
[22:07:33] <nrc> actually, its not so much the metadata that is driving me nuts, it is how we generate it - it is like this weird hybrid of ast info and typed info that means we violate all our nice divisions between phases in the compiler
[22:09:12] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[22:11:34] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[22:11:57] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[22:11:57] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/hxpHCA
[22:11:57] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[22:16:07] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[22:16:50] *** Joins: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP)
[22:16:50] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/rkfI-w
[22:16:50] <ghrust> 13rust/06auto 14e46e933 15Alex Crichton: serialize: Read/emit tuples with {read,emit}_tuple...
[22:16:50] <ghrust> 13rust/06auto 141599ac9 15bors: auto merge of #13095 : alexcrichton/rust/serialize-tuple, r=huonw...
[22:16:50] *** Parts: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP) ()
[22:20:18] <flaper87> cmr: phabricator seems quite powerful. I submitted a diff of a PR I've pending on GH and added you as reviewer. Just playing around with it
[22:20:43] <flaper87> and I gotta admit, I love side-by-side diffs :D
[22:20:49] <kimundi> Hm, trying to build a `Ident` - what is a `SyntaxContext`, and where do I get one from?
[22:20:58] <flaper87> I guess I'm just used to them 
[22:27:59] *** Quits: [o__o] (~o__o@604A2740.DB688352.F4ADE383.IP) (Input/output error)
[22:28:16] *** Joins: [o__o] (~o__o@604A2740.DB688352.F4ADE383.IP)
[22:31:29] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[22:33:14] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[22:44:04] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[22:44:26] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[22:45:40] <kimundi> eddyb: If I build a ast::Method with an explicit self, do I need to add the self to the FnDecl as first argument?
[22:45:53] <eddyb> kimundi: look for code around
[22:46:00] <eddyb> kimundi: I think it's Arg::new_self or something like that
[22:46:14] <eddyb> (and the answer is yes)
[22:46:30] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[22:46:36] <kimundi> thanks :)
[22:46:44] <eddyb> kimundi: ExplicitSelf exists only for two reasons
[22:46:55] <eddyb> 1 is non-UFCS method lookup
[22:47:05] <eddyb> and 2 is the lack of Self in impls
[22:48:02] <eddyb> I think we can just remove it if you fix the latter
[22:48:28] <eddyb> that will mean fn foo(pattern: &Self) is a non-static method
[22:48:54] <eddyb> but only if you use Self and not the implementer type (in impls) :P
[22:52:31] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[22:54:08] <kimundi> eddyb: Okay, this self thing was the last hurdle - my first item decorator macro works! \o/
[22:54:31] <eddyb> now if only libstd could use a syntax extension :P
[22:54:48] <eddyb> (I can do that for you, just need a dynamically linked snapshot)
[22:54:51] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[22:56:24] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Quit: Leaving)
[22:58:58] <kimundi> eddyb: what do you mean?
[22:59:17] <eddyb> kimundi: stage0 libstd can't use a syntax extension right now
[22:59:28] <kimundi> any syntax extension?
[22:59:28] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[22:59:30] <eddyb> kimundi: because that syntax extension would have to be linked against snapshot libs
[22:59:36] <seanmonstar> finally \o/ https://github.com/mozilla/rust/pull/13107
[23:02:04] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[23:14:37] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[23:16:33] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[23:17:14] <bvssvni> if I do a push directly from a local repository, will this end up as a pull request?
[23:17:49] <kimundi> bvssvni: push top what?
[23:17:54] <kimundi> to waht*
[23:17:59] <kimundi> ... what*
[23:18:22] * kimundi sometimes wonders why he even bothers...
[23:18:24] <bvssvni> kimundi: librustc, fixed a lint
[23:18:39] <kimundi> bvssvni: No, I mean what is your remote repo?
[23:19:00] <bvssvni> kimundi: the remote is /mozilla/rust
[23:19:42] <kimundi> do you have official push access to that?
[23:19:52] <bvssvni> kimundi: no
[23:21:03] <sfackler> no
[23:21:12] <kimundi> Then I guess what happens is that you are not allowed to push. If you where, you'd push to the repo directly, which is also not desired. The correct workflow is to fork mozilla/rust on github, clone it, modify it locally, push it to the own fork, and then open a pr from that against the main repo manually
[23:21:48] *** flaper87 is now known as flaper87|afk
[23:22:24] <kimundi> Afaik pushing somewhere never opens a pull request, as pull requests are a github abstraction, not a git thing?
[23:25:06] <eddyb> yeah
[23:26:25] <bvssvni> I tried changing origin to my github repo, but it won't push it, probably too old
[23:26:42] <eddyb> force push
[23:26:56] *** Joins: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP)
[23:26:56] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/rkfI-w
[23:26:56] *** Parts: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP) ()
[23:31:53] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Ping timeout)
[23:31:54] *** Joins: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP)
[23:31:54] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/crzG9w
[23:31:54] <ghrust> 13rust/06auto 148feb2dd 15Steven Stewart-Gallus: This commit cleans up a few test warnings
[23:31:54] <ghrust> 13rust/06auto 142c7f3b8 15bors: auto merge of #13096 : sstewartgallus/rust/cleanup-test-warnings, r=huonw
[23:31:55] *** Parts: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP) ()
[23:31:56] *** Joins: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP)
[23:31:56] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/ZL_ioQ
[23:31:56] *** Parts: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP) ()
[23:32:23] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[23:36:07] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[23:37:32] <eddyb> nmatsakis: rebased https://github.com/mozilla/rust/pull/13004
[23:37:35] <bvssvni> I added /mozilla/rust as remote upstream, should I pull the latest commits?
[23:38:06] <eddyb> git pull --rebase upstream master
[23:38:11] *** Joins: aurynj (Eon@C498BDEC.C264657C.C6282BC4.IP)
[23:38:16] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[23:38:58] *** Quits: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se) (Quit: mediocrity)
[23:39:38] <bvssvni> NO, I forced push to wrong repo :(
[23:39:50] <bvssvni> haha
[23:40:04] *** Joins: brson (brson@moz-62518563.mtv2.mozilla.com)
[23:40:05] *** ChanServ sets mode: +qo brson brson
[23:40:11] <eddyb> how wrong?
[23:40:21] <bvssvni> suddenly rust-empty got a lot more source
[23:40:30] <bvssvni> :D
[23:40:42] <eddyb> why rust-empty?
[23:40:50] <eddyb> of all things
[23:40:58] <bvssvni> eddyb: it's hilarious
[23:41:08] <eddyb> unless it was autocomplete
[23:41:27] <eddyb> you can't just add "-empty" by mistake
[23:41:51] <bvssvni> I copied the url from wrong tab
[23:42:22] <bvssvni> https://github.com/bvssvni/rust-empty/
[23:42:25] <eddyb> force push your local rust-empty
[23:43:53] <bvssvni> phew
[23:44:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[23:45:35] <bvssvni> eddyb: Thank You
[23:45:41] <eddyb> np
[23:46:32] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[23:52:09] *** Quits: canhtak (canhtak@moz-1300C4D7.wl.t.ulaval.ca) (Quit: canhtak)
[23:57:34] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[23:59:21] *** Quits: brson (brson@moz-62518563.mtv2.mozilla.com) (Client exited)
