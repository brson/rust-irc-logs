[00:08:59] *** Joins: evanfarrar (evanfarrar@moz-lftg5l.east.verizon.net)
[00:11:21] *** Quits: ^BR (br@moz-egk.dm6.194.78.IP) (Client exited)
[00:14:54] *** Quits: adu (ajr@moz-m9p.pdt.243.69.IP) (Client exited)
[00:17:41] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[00:18:35] *** Quits: scialex (scialex@moz-j5mi8i.cs.brown.edu) (Quit: Leaving)
[00:20:23] *** Quits: jdm (jdm@moz-4vu.06r.98.75.IP) (Quit: )
[00:21:07] *** Quits: japaric (japaric@moz-hpu.6fl.64.181.IP) (Ping timeout: 121 seconds)
[00:22:09] *** Quits: eibwen (eibwen@moz-i37.e5n.231.217.IP) (Ping timeout: 121 seconds)
[00:22:21] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Ping timeout: 121 seconds)
[00:23:28] <nrc|afk> thanks Gankro 
[00:24:13] *** Quits: larsberg (sid16141@moz-fnneme.uxbridge.irccloud.com) (Quit: )
[00:24:24] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[00:25:03] <nrc|afk> seems to be fixed now
[00:25:10] <nrc|afk> but I don't know what was wrong
[00:25:38] <nrc|afk> oh hey, good error handling - if you try to get a bad date, the server just crashes
[00:25:42] <nrc|afk> well done me
[00:26:08] <nrc|afk> no one do that pls k thx
[00:27:10] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[00:28:40] *** Quits: steveklabnik (root@moz-fft.uo8.55.45.IP) (Quit: Lost terminal)
[00:30:49] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[00:33:37] *** Joins: steveklabnik (root@moz-fft.uo8.55.45.IP)
[00:33:37] *** ChanServ sets mode: +o steveklabnik
[00:33:59] <nrc|afk> Ok, seems to be properly fixed now
[00:34:29] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[00:35:03] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[00:35:29] *** Quits: Kxepal (Miranda@moz-2lokhb.pppoe.mtu-net.ru) (Ping timeout: 121 seconds)
[00:37:50] *** Joins: Kxepal (Miranda@moz-2lokhb.pppoe.mtu-net.ru)
[00:38:35] *** Joins: blaenk_ (blaenkdenum@moz-em283u.res.rr.com)
[00:39:22] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Ping timeout: 121 seconds)
[00:40:00] <Gankro> nrc|afk: is you server written in Rust?
[00:40:47] *** Quits: blaenk_ (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[00:42:14] <Gankro> match response { "yes" => "rookie mistake; should've used a more mature language", "no" => "Wouldn't've happened in a more modern language" }
[00:44:03] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[00:44:23] <huon> Gankro: "no exhaustive pattern matches"
[00:44:26] <huon> *non
[00:47:17] *** Joins: blaenk_ (blaenkdenum@moz-em283u.res.rr.com)
[00:47:27] *** Quits: alfred (rndm@moz-fg3.o0i.131.104.IP) (Quit: WeeChat 0.4.2)
[00:48:09] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Ping timeout: 121 seconds)
[00:48:34] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[00:49:12] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[00:49:29] <nrc|afk> Gankro: no, node.js
[00:52:36] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[00:52:36] *** ChanServ sets mode: +o pcwalton
[00:55:48] *** Quits: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua) (Ping timeout: 121 seconds)
[00:55:54] *** Quits: blaenk_ (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[00:55:58] <doener> brson: thanks for the comment on gh23322, I was too fixed on doing things the same way as they're done in LLVM for malloc and friends
[00:55:59] <[o__o]> Set appropriate function/argument attributes on jemalloc functions: https://github.com/rust-lang/rust/pull/23322
[00:57:04] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[00:58:45] *** Quits: Rym_ (y@moz-232.ad4.144.109.IP) (Ping timeout: 121 seconds)
[01:01:00] <Gankro> huon: I dunno any other strings
[01:01:24] *** sunfish is now known as sunfish-away
[01:01:31] <Gankro> Is the compiler that bad? Can't igure out that I covered all the strings?
[01:02:42] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[01:04:10] *** Quits: cdidd (cdidd@moz-oc0lj3.broadband.corbina.ru) (Ping timeout: 121 seconds)
[01:04:16] *** Joins: Rym_ (y@moz-232.ad4.144.109.IP)
[01:06:26] <bstrie> Gankro: try `#define "yes" true`
[01:11:38] *** kimundi is now known as zz_kimundi
[01:16:47] *** Quits: sinclair (chatzilla@moz-o36q4q.xnet.co.nz) (Quit: ChatZilla 0.9.91.1 [Firefox 36.0.1/20150305021524])
[01:18:14] *** Quits: Rym_ (y@moz-232.ad4.144.109.IP) (Ping timeout: 121 seconds)
[01:19:19] *** Joins: Rym_ (y@moz-232.ad4.144.109.IP)
[01:20:22] <pnkfelix> finally wrote it: http://internals.rust-lang.org/t/attention-hacker-filling-drop/1715
[01:22:27] <cmr> pnkfelix: may I recommend using 0xBE as the constant? it's pretty common for "uninitialized memory" (for example, with asan)
[01:22:55] <pnkfelix> cmr: sure; put it as a comment on the internals thread though
[01:22:59] * pnkfelix ti-ti
[01:23:06] <cmr> np
[01:23:07] <pnkfelix> (as in "tired")
[01:23:27] <reem> What will unsafe_no_drop_flags struct do in the meantime?
[01:23:36] <reem> Vec, Arc, Rc, etc.
[01:23:40] <pnkfelix> reem: samething it does now
[01:23:51] *** Quits: Rym_ (y@moz-232.ad4.144.109.IP) (Ping timeout: 121 seconds)
[01:23:57] <pnkfelix> reem: well, not exactly
[01:23:59] <acrichto> pnkfelix: gah :(
[01:24:17] <pnkfelix> reem: it will get filled with the same byte that everything else gets filled with.  The post talks about this
[01:24:58] <pnkfelix> reem: I'd rather force such structures to have to accommodate this than risk dependence on zeroing from clients using such structures
[01:25:02] <reem> pnkfelix: But the fill value looks like a normal address
[01:25:02] <cmr> I wonder if it's reasonable for rustc to emit valgrind requests.
[01:25:13] <cmr> for example, MAKE_MEM_UNDEFINED after a drop...
[01:25:17] <pnkfelix> reem: the post talks about this too
[01:25:21] <reem> pnkfelix: I see it now
[01:25:40] <pnkfelix> reem: well, at least you're making me happy I took the time to write it out
[01:25:58] <reem> pnkfelix: It probably wouldn't be too bad to just add drop flags back to those structs
[01:26:24] <pnkfelix> reem: I was also considering this.  In the form of "just remove `unsafe_no_drop_flag` support entirely
[01:26:38] <pnkfelix> reem: but probably better to let each library decide on its own
[01:26:51] <reem> Once we have stack flags the utility of unsafe_no_drop_flag drops significantly
[01:27:23] <reem> whatever you replace the stack flag with will probably be less efficient than just using the system
[01:27:37] <pnkfelix> reem: yeah, i certainly question whether we would even keep the attribute at that point
[01:27:50] <pnkfelix> reem: other than for hack value (i.e. demoing destructors running multiple times)
[01:28:06] <reem> Eventually I think it's something we want to support
[01:28:13] <reem> but it's not critical
[01:28:45] *** Quits: ytain (ytain@moz-lt66g9.dsl.teksavvy.com) (Quit: Textual IRC Client: www.textualapp.com)
[01:29:00] *** Joins: bfops (uid58242@moz-e5u6m0.charlton.irccloud.com)
[01:29:19] * pnkfelix heads off to bed
[01:31:31] *** nrc|afk is now known as nrc
[01:31:38] *** Quits: Zoxc (Zoxc@moz-g6sljr.bb.online.no) (Ping timeout: 121 seconds)
[01:31:44] *** Quits: pnkfelix (pnkfelix@moz-eljppb.fbx.proxad.net) (Quit: rcirc on GNU Emacs 24.3.92.1)
[01:32:13] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[01:35:50] *** Joins: blaenk_ (blaenkdenum@moz-em283u.res.rr.com)
[01:37:09] *** Joins: Zoxc (Zoxc@moz-g6sljr.bb.online.no)
[01:37:15] *** Joins: bicranial (Bicranial@moz-f0tabo.internode.on.net)
[01:38:39] <cgaebel> reem: I want unsafe_no_drop_flag even if there's stack flags.
[01:38:55] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Ping timeout: 121 seconds)
[01:38:59] <reem> ooh say more, sounds interesting
[01:39:00] <cgaebel> it's pointless to use more register space when I can just (for example) check if a pointer that's already there is null
[01:39:07] <cgaebel> which is the case with most things with drop impls
[01:39:11] <cgaebel> Vec
[01:39:12] <cgaebel> etc
[01:39:28] <reem> but there's no zeroing
[01:39:42] <cmr> the drop impl can set it to null
[01:39:46] <cgaebel> ^ 
[01:39:55] <cmr> this is what c++ does, it works "fine"
[01:40:03] <cgaebel> it works fine
[01:40:19] <cgaebel> any time I've needed a custom drop, it's been to deal with a raw pointer
[01:40:22] <cgaebel> and it just looks like vec
[01:40:31] <reem> I'm under the impression that no zeroing means drop could run on two copies of the same Vec
[01:40:43] <reem> the first Vec sets its own ptr to null, but the second doesn't know anything about this
[01:40:48] <reem> bam, double-free]
[01:40:48] <cgaebel> that's why it's #[_unsafe_ no_drop_flag] ;)
[01:41:04] <cmr> I don't have that impression
[01:41:15] <cmr> The compiler won't drop old copies of a moved value
[01:41:16] <reem> cmr: with unsafe_no_drop_flag only
[01:41:21] <cgaebel> drop changes should not make Vec drop slower than it is today
[01:44:48] *** Joins: Rym_ (y@moz-232.ad4.144.109.IP)
[01:46:41] *** Quits: James (quassel@moz-t5os7p.range86-163.btcentralplus.com) (Ping timeout: 121 seconds)
[01:49:20] *** Quits: Rym_ (y@moz-232.ad4.144.109.IP) (Ping timeout: 121 seconds)
[01:53:55] *** Quits: brson (brson@moz-cfhap5.mtv2.mozilla.com) (Quit: leaving)
[01:54:07] *** Joins: bjz (bjz@moz-puppgq.tpgi.com.au)
[01:54:25] *** Quits: Kroisse (Kroisse@moz-t75tk5.krois.se) (Quit: Good bye :))
[01:58:06] *** Quits: swgillespie (swgillespie@moz-upj.3un.220.167.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[01:58:51] *** Joins: xorcon (Mibbit@moz-juv.9o3.252.72.IP)
[02:00:59] <reem> arrrrrrr1: Just wanted to let you know I read your response but don't have time to respond now. I think you raise some important points about the extensibility and stabilization of APIs like this and I want to explore further.
[02:01:47] <aturon> reem: https://github.com/rust-lang/rfcs/pull/757 may also be of interest
[02:02:17] <aturon> (but i believe the approach being proposed by Gankro in that RFC is also extensible by introducing new traits)
[02:03:58] <reem> aturon: I'm actually growing a little concerned about what stability means for std::io, and more generally for any library that's primarily ffi based.
[02:04:11] <aturon> reem: how so?
[02:04:22] *** Joins: insaneinside (user@moz-dgv9mb.customer.broadstripe.net)
[02:04:52] <reem> aturon: Basically it's a matter of abstraction leakage - it looks more and more like you actually *want* the abstractions you build to be leaky.
[02:04:59] <reem> e.g. AsRawFd
[02:05:13] <aturon> hm, i'm not following yet
[02:05:44] <reem> std::io provides some subset of the io functionality available
[02:06:01] <aturon> yes, that's definitely true
[02:06:03] <reem> as a user, I would like to, in several cases, introduce new functionality into it
[02:06:20] <insaneinside> would this be the proper place to ask for guidance in tracking down a particular ICE?
[02:06:33] <aturon> insaneinside: it would indeed!
[02:06:34] <cmr> insaneinside: Sure!
[02:06:54] *** Joins: adu (ajr@moz-0foa9t.md.comcast.net)
[02:07:15] <aturon> reem: right, so things like As/FromRawFd can definitely help with extending the functionality outside of std
[02:07:20] <reem> Right
[02:07:22] <aturon> reem: but i'm not seeing the problem yet?
[02:07:50] <aturon> (it is also true that this makes the abstraction "leaky", for sure)
[02:08:10] <aturon> (in particular, it forces std::io to be a relatively thin layer over the system IO facilities, but that was desirable for other reasons)
[02:08:12] <reem> Not all APIs have an AsRawFd
[02:08:20] <reem> that's the concern
[02:08:27] <arrrrrrr1> std::io is not an API for a systems language. the python std::io API is more "system" than that.
[02:08:30] <aturon> hm, can you give an example?
[02:08:46] <reem> aturon: So a lot of the discussion on https://github.com/rust-lang/rfcs/pull/969
[02:09:13] <reem> has been about how the seek api in particular can't be extended with non-standard options
[02:09:16] <reem> just a random case
[02:09:28] <aturon> reem: ok, so if you take that example, you can use AsRawFd on the underlying file an call any seek operation you like, for example
[02:09:40] <aturon> generally all you need are the handles to get access to the direct system APIs
[02:09:55] <reem> Agreed.
[02:10:04] <reem> The thing is that AsRawFd is a sledgehammer
[02:10:06] <aturon> but also, with either multiple methods or an extensible enum, it's possible to grow the set of cross-platform seek operations over time
[02:10:13] <aturon> (within std, i mean)
[02:10:33] <reem> within std anything is possible
[02:10:35] *** Joins: Nekit1234007 (nekit@moz-vfr.64q.51.84.IP)
[02:10:52] <reem> I need to think about this more
[02:11:03] <aturon> hm, so AsRawFd basically gives you exactly the same ingredients that std is working from
[02:11:15] <insaneinside> So I've got this "internal compiler error: Encountered error `Unimplemented` selecting `Binder(<some iterator-related trait of mine>)`" that seems to happen when a subtrait-object is instantiated.
[02:11:46] <insaneinside> This doesn't happen during the initial crate compile, apparently because I don't perform such an instantiation there.
[02:11:48] <insaneinside> RUST_BACKTRACE tells me it's somewhere inside obligation-resolution (`trans::common::fulfill_obligation`) in librustc/middle/traits/select.rs.  
[02:12:14] <insaneinside> Where do I go from here?
[02:12:31] <reem> aturon: Separately, this seems like a pretty big concern (not sure if that has been brought up before): https://github.com/rust-lang/rfcs/pull/969#issuecomment-78746275
[02:12:36] *** Quits: xorcon (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[02:13:45] <aturon> reem: so, i disagree with a few aspects of that comment
[02:13:51] <reem> I figured :P
[02:13:53] <arrrrrrr1> reem: oh yeah, I've brought it up in IRC before while talking about OpenOptionExt. it's known
[02:13:53] <aturon> :)
[02:14:02] <aturon> it's not really connected to extension traits per se
[02:14:24] <aturon> the issue is basically what kind of APIs to offer which we claim as "cross platform"
[02:14:31] <aturon> right now, std::io is being pretty conservative about this
[02:14:40] <arrrrrrr1> SEEK_DATA is not even "platform"
[02:14:45] <arrrrrrr1> neither is SEEK_HOLE
[02:14:53] <arrrrrrr1> SEEK_DATA and SEEK_HOLE only work on certain file systems
[02:14:54] <aturon> reem: for example, there are a number of places in fs where the Windows and Posix models differ quite a bit
[02:15:02] <arrrrrrr1> e.g. on ext4 but not on fat
[02:15:05] <reem> Right
[02:15:08] *** Joins: japaric (japaric@moz-hpu.6fl.64.181.IP)
[02:15:16] <aturon> reem: and a lot of libraries basically just ignore the inputs on Windows
[02:15:27] <reem> Ya, I'm aware of the general concerns
[02:15:37] <aturon> right, so in terms of the comment you were asking about,
[02:16:00] <aturon> basically, that is the consequence of not having or providing a cross-platform API: that is what platform-specific programming looks like
[02:16:10] <aturon> in particular, that's what much of the implementation of std has to look like
[02:16:20] *** Joins: avikpal (avikpal@moz-nn8.cvs.194.117.IP)
[02:16:40] <aturon> now, in general, the plan is to grow the cross-platform APIs at the std level over time,
[02:16:42] <reem> This is more of an ergonomics bug against the #[cfg] system for dealing with this
[02:16:59] <aturon> hm, maybe so, but it's hard to see how to do much better
[02:17:21] <reem> Allowing attributes on blocks might help
[02:17:26] <reem> also conditional branches
[02:17:41] <reem> i.e. if/else branches should be #[cfg]able like match branches
[02:17:42] <aturon> arrrrrrr1: right, so cases like that may be appropriate to provide at the cross-platform level, which is why extensibility is also important
[02:17:50] <insaneinside> maybe i need to try a different question:  What does "Unimplemented" mean in the trait-selection code?
[02:18:10] <reem> insaneinside: I don't know the answer, but you might want to try #rustc?
[02:18:33] <aturon> insaneinside: basically the compiler experts needed to answer the question may not be around at the moment
[02:18:38] <insaneinside> :(
[02:18:38] <aturon> :)
[02:18:44] <insaneinside> heh, okay
[02:18:48] *** Quits: blaenk_ (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[02:19:08] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[02:19:15] <aturon> reem: ok, yes, those improvements do sound good
[02:19:30] *** Quits: jxs (joaoxsouls@moz-odlbq5.fcsh.unl.pt) (Ping timeout: 121 seconds)
[02:19:38] <aturon> reem: but i think that's largely a separate concern from the question of what to claim "cross platform"
[02:20:04] <reem> aturon: Agreed
[02:20:08] <arrrrrrr1> aturon: how to do better: #ifdef did it before
[02:20:32] <aturon> arrrrrrr1: hm, i think most people consider #[cfg] to be a step over that
[02:20:35] <reem> arrrrrrr1: #[cfg] on if/else branches would let you do better than #ifdef
[02:20:38] <arrrrrrr1> not that C macros are great in general. but in this case they are obviously better than the Rust version
[02:21:01] <arrrrrrr1> aturon: having to create functions to express something you can do in a oneliner is better?
[02:21:05] *** Joins: Stebalien (Stebalien@moz-i00.hrk.38.73.IP)
[02:21:24] <arrrrrrr1> aturon: the C code would literally look like the code with if cfg! but with the ifs replaced by #ifdef
[02:21:27] <arrrrrrr1> that's obviously better
[02:21:38] <aturon> sure
[02:21:42] *** Joins: jxs (joaoxsouls@moz-odlbq5.fcsh.unl.pt)
[02:21:43] <aturon> i meant in other respects, though
[02:21:56] <arrrrrrr1> yes, in Rust macros are better in general
[02:21:56] <aturon> e.g. the fact that the code is still parsed and otherwise passes through the compiler
[02:21:58] <arrrrrrr1> but not in this case
[02:22:03] <aturon> basically #ifdef is a pretty blunt instrument
[02:22:13] <aturon> ok, so basically you're making the same point as reem?
[02:22:54] <aturon> i think there have been various proposals to allow attributes at finer-grained levels
[02:22:54] <aturon> possibly accepted RFCs, even
[02:23:03] <aturon> not sure what the status is tbh
[02:23:03] <huon> there is an accepted RFC for it
[02:23:22] <huon> AFAIK, no-one has even started implementing it
[02:23:48] <arrrrrrr1> there was RFC for attributes on struct fields iirc
[02:23:58] <arrrrrrr1> probably also on blocks?
[02:24:07] <huon> there was an RFC for attributes on essentially essentially everything
[02:24:09] * huon wrote it
[02:24:37] *** Quits: Ericson2314 (user@moz-j5mi8i.cs.brown.edu) (Connection closed)
[02:24:45] <aturon> huon: :D
[02:25:07] *** Joins: brson (brson@moz-acp.7vl.56.172.IP)
[02:25:07] *** ChanServ sets mode: +o brson
[02:28:16] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[02:29:21] *** Quits: japaric (japaric@moz-hpu.6fl.64.181.IP) (Ping timeout: 121 seconds)
[02:29:23] *** insaneinside is now known as insaneinside-afk
[02:31:14] *** Joins: Kroisse (Kroisse@moz-t75tk5.krois.se)
[02:35:29] <arrrrrrr1> huon: you can use a method from an extension trait with the same name but a different signature?
[02:36:47] <arrrrrrr1> https://gist.github.com/anonymous/9e1f87cf83b91841f0a3
[02:36:48] <arrrrrrr1> nope
[02:36:50] <huon> arrrrrrr1: I don't know what you mean
[02:37:04] <huon> the per-platform extension traits are only defined on specific platforms
[02:37:14] <arrrrrrr1> huon: didn't you mean that the method in the extension trait could have the same name but a different siganture from the inherent metod?
[02:37:18] <huon> #[cfg(unix)] pub use sys::ext as unix;
[02:37:23] <huon> #[cfg(windows)] pub use sys::ext as windows;
[02:37:43] <arrrrrrr1> because you called it "seek"
[02:37:44] <huon> I didn't mean that
[02:37:54] <arrrrrrr1> which already exists on File
[02:37:58] <huon> that wasn't an extension trait
[02:38:07] <arrrrrrr1> oh, I see what you meant
[02:38:09] <arrrrrrr1> ok
[02:38:20] <arrrrrrr1> huon: yes, a trait would already be better
[02:39:01] *** Joins: Rym_ (y@moz-232.ad4.144.109.IP)
[02:43:31] *** Quits: Rym_ (y@moz-232.ad4.144.109.IP) (Ping timeout: 121 seconds)
[02:44:23] *** Quits: jxs (joaoxsouls@moz-odlbq5.fcsh.unl.pt) (Ping timeout: 121 seconds)
[02:46:17] *** Joins: japaric (japaric@moz-hpu.6fl.64.181.IP)
[02:47:44] *** Joins: jxs (joaoxsouls@moz-odlbq5.fcsh.unl.pt)
[02:52:29] *** Joins: p1start (p1start@moz-nftjhe.org)
[02:53:25] *** Quits: p1start (p1start@moz-nftjhe.org) (Quit: leaving)
[02:53:28] *** Quits: avikpal (avikpal@moz-nn8.cvs.194.117.IP) (Connection closed)
[02:53:54] *** Joins: dpc__ (dpc@moz-a8v.6sn.162.73.IP)
[03:03:35] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[03:10:33] *** Quits: bicranial (Bicranial@moz-f0tabo.internode.on.net) (Quit: Leaving)
[03:14:27] *** Quits: jxs (joaoxsouls@moz-odlbq5.fcsh.unl.pt) (Ping timeout: 121 seconds)
[03:15:46] *** Joins: jxs (joaoxsouls@moz-odlbq5.fcsh.unl.pt)
[03:18:28] *** Quits: Jesin (Jesin@moz-q46lj1.fios.verizon.net) (Quit: Leaving)
[03:20:37] *** insaneinside-afk is now known as insaneinside
[03:21:18] *** Joins: Jesin (Jesin@moz-q46lj1.fios.verizon.net)
[03:26:51] *** Quits: jxs (joaoxsouls@moz-odlbq5.fcsh.unl.pt) (Ping timeout: 121 seconds)
[03:28:04] *** Joins: summerlight_ (summerlight@moz-99k.2mj.130.121.IP)
[03:29:17] *** Joins: jxs (joaoxsouls@moz-odlbq5.fcsh.unl.pt)
[03:33:08] *** Joins: Rym_ (y@moz-232.ad4.144.109.IP)
[03:37:40] *** Quits: Rym_ (y@moz-232.ad4.144.109.IP) (Ping timeout: 121 seconds)
[03:39:21] *** Quits: zz_kimundi (kimundi@moz-ere.cfn.188.87.IP) (Ping timeout: 121 seconds)
[03:39:52] *** Quits: jxs (joaoxsouls@moz-odlbq5.fcsh.unl.pt) (Ping timeout: 121 seconds)
[03:41:52] *** Joins: zz_kimundi (kimundi@moz-0cj.3hq.188.87.IP)
[03:41:58] *** zz_kimundi is now known as kimundi
[03:42:42] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Quit: It's a joke, it's all a joke.)
[03:42:48] *** Joins: jxs (joaoxsouls@moz-odlbq5.fcsh.unl.pt)
[03:51:21] *** Quits: Stebalien (Stebalien@moz-i00.hrk.38.73.IP) (Quit: leaving)
[03:51:43] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[03:57:25] *** Quits: jxs (joaoxsouls@moz-odlbq5.fcsh.unl.pt) (Ping timeout: 121 seconds)
[04:00:08] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[04:00:19] *** Joins: jxs (joaoxsouls@moz-odlbq5.fcsh.unl.pt)
[04:04:22] *** Quits: jxs (joaoxsouls@moz-odlbq5.fcsh.unl.pt) (Ping timeout: 121 seconds)
[04:04:49] *** Joins: jxs (joaoxsouls@moz-odlbq5.fcsh.unl.pt)
[04:11:00] *** Quits: mystor (mystor@moz-ldavpp.home3.cgocable.net) (Connection closed)
[04:11:18] *** Joins: mystor (mystor@moz-ldavpp.home3.cgocable.net)
[04:12:34] *** Parts: insaneinside (user@moz-dgv9mb.customer.broadstripe.net) ("bye")
[04:14:50] *** Quits: enaqx (enaqx@moz-asgdqm.infomir.com.ua) (Ping timeout: 121 seconds)
[04:19:56] *** Quits: jxs (joaoxsouls@moz-odlbq5.fcsh.unl.pt) (Ping timeout: 121 seconds)
[04:23:20] *** Joins: jxs (joaoxsouls@moz-odlbq5.fcsh.unl.pt)
[04:24:21] *** Joins: laumann (thomas@moz-n9e72h.0.fullrate.dk)
[04:25:32] *** Quits: brson (brson@moz-acp.7vl.56.172.IP) (Quit: leaving)
[04:27:20] *** Joins: Rym_ (y@moz-232.ad4.144.109.IP)
[04:27:34] *** Joins: semarie (semarie@moz-pampba.piraten-nds.de)
[04:30:25] *** Joins: enaqx (enaqx@moz-asgdqm.infomir.com.ua)
[04:31:49] *** Quits: Rym_ (y@moz-232.ad4.144.109.IP) (Ping timeout: 121 seconds)
[04:34:35] *** Quits: arrrrrrr1 (arrrrrrrrs@moz-q3f546.dynamic.qsc.de) (Ping timeout: 121 seconds)
[04:38:37] *** Joins: ^BR (br@moz-egk.dm6.194.78.IP)
[04:40:30] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[04:41:04] *** Quits: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP) (Ping timeout: 121 seconds)
[04:41:16] *** Joins: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP)
[04:41:50] *** Quits: _zxq9_ (ceverett@moz-qsm369.mesh.ad.jp) (Quit: Konversation terminated!)
[04:46:03] *** Quits: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP) (Ping timeout: 121 seconds)
[04:51:16] *** Joins: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP)
[04:51:21] *** Quits: Nekit1234007 (nekit@moz-vfr.64q.51.84.IP) (A TLS packet with unexpected length was received.)
[04:57:18] *** Quits: evanfarrar (evanfarrar@moz-lftg5l.east.verizon.net) (Connection closed)
[05:00:58] *** Quits: mystor (mystor@moz-ldavpp.home3.cgocable.net) (Connection closed)
[05:06:14] *** Quits: adu (ajr@moz-0foa9t.md.comcast.net) (Client exited)
[05:06:22] *** Joins: lfairy (lfairy@moz-4bn6d3.vf.net.nz)
[05:12:25] *** Joins: c74d (c74d3a4ebb6@moz-0ersgu.oc.cox.net)
[05:15:25] <eddyb> playbot: "§".as_bytes()
[05:15:26] -playbot- [194, 167]
[05:17:25] <eddyb> playbot: "§".as_bytes() == [128|64|2, 128|32|7]
[05:17:26] -playbot- true
[05:18:08] <eddyb> playbot: "§".as_bytes() == b"\xc2\xa7"
[05:18:10] -playbot- true
[05:19:36] <eddyb> huon, cmr, japaric: ^^ so we can have a syntax extension that desugars string literals to byte literals and then wrap that stuff in a struct str([u8]);
[05:20:09] <eddyb> &str(*b"foo") should work some time in the future
[05:20:50] *** Joins: Johannes (Johannes@moz-4et8d7.ocn.ne.jp)
[05:21:27] *** Joins: Rym_ (y@moz-232.ad4.144.109.IP)
[05:21:36] <eddyb> it would be trickier in patterns, but, hmm. it should be straight-forward if b"foo" is made [u8; 3]
[05:22:03] *** Quits: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP) (Ping timeout: 121 seconds)
[05:22:19] <eddyb> it wouldn't be safe unless we got a public unsafe field... or some kind of hygiene
[05:24:12] *** Joins: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP)
[05:24:51] *** Quits: laumann (thomas@moz-n9e72h.0.fullrate.dk) (Ping timeout: 121 seconds)
[05:26:01] *** Quits: Rym_ (y@moz-232.ad4.144.109.IP) (Ping timeout: 121 seconds)
[05:28:02] *** Quits: O01eg (o01eg@moz-8t10nc.ojtg.3egh.2698.2a02.IP) (Client exited)
[05:32:26] <cmr> carter: ping
[05:38:38] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Connection closed)
[05:38:49] <cmr> carter: unping, thanks!
[05:40:59] *** Joins: munksgaard (munksgaard@moz-478pev.u.parknet.dk)
[05:45:31] *** Quits: hoverbear (hoverbear@moz-csaicn.gv.shawcable.net) (Quit: Time to hibernate.... ZzZz...)
[05:46:14] *** Quits: njn (chatzilla@moz-02nu63.iinet.net.au) (Quit: ChatZilla 0.9.91.1 [Firefox 39.0a1/20150309142159])
[05:50:42] *** Joins: quantheory (quantheory@moz-m50t2f.44nj.jtvf.0001.2601.IP)
[05:52:58] *** Quits: japaric (japaric@moz-hpu.6fl.64.181.IP) (Quit: WeeChat 1.1.1)
[05:53:13] *** Joins: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net)
[05:53:13] *** ChanServ sets mode: +o pcwalton
[05:55:25] *** Quits: calc0000 (calc0000@moz-5tn399.mqd9.h8am.0980.2605.IP) (Ping timeout: 121 seconds)
[05:56:40] *** Joins: calc0000 (calc0000@moz-nk1cop.mqd9.h8am.0980.2605.IP)
[05:57:55] *** Quits: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net) (Client exited)
[05:58:07] *** Joins: rprichard (rprichard@moz-9jq176.en8f.d045.0009.2601.IP)
[06:01:44] *** Joins: mystor (mystor@moz-ldavpp.home3.cgocable.net)
[06:06:03] *** Quits: mystor (mystor@moz-ldavpp.home3.cgocable.net) (Ping timeout: 121 seconds)
[06:07:42] *** Joins: evanfarrar (evanfarrar@moz-lftg5l.east.verizon.net)
[06:10:46] *** Quits: munksgaard (munksgaard@moz-478pev.u.parknet.dk) (Ping timeout: 121 seconds)
[06:11:52] *** Quits: evanfarrar (evanfarrar@moz-lftg5l.east.verizon.net) (Ping timeout: 121 seconds)
[06:15:32] *** Quits: gsingh93 (gulshan@moz-3fu4am.mi.comcast.net) (Ping timeout: 121 seconds)
[06:15:38] *** Joins: Rym_ (y@moz-232.ad4.144.109.IP)
[06:17:57] <eddyb> quantheory: you should join #rustc
[06:20:10] *** Quits: Rym_ (y@moz-232.ad4.144.109.IP) (Ping timeout: 121 seconds)
[06:51:36] *** Quits: bleibig (bleibig@moz-btk.gm4.170.73.IP) (Connection closed)
[06:52:15] *** Joins: bleibig (bleibig@moz-btk.gm4.170.73.IP)
[06:55:54] *** Joins: killercup (killercup@moz-lar.9pk.10.91.IP)
[06:59:24] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[07:00:46] *** Joins: minzh (minzh@moz-u8rq5v.citrix.com)
[07:01:55] *** Quits: killercup (killercup@moz-lar.9pk.10.91.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[07:02:49] <erickt> acrichto / aturon: either of you still up? I may have found at least one thing slowing down serde: https://gist.github.com/erickt/5d8a01533b5ed0e0e18e
[07:03:06] <erickt> haven't really dived into it yet
[07:03:48] <erickt> BufWriter1 is essentially the `&mut [u8]` writer in std::io. With this ugly unsafe code it's almost twice as fast
[07:05:01] *** Joins: eddyb_ (eddyb@moz-mmq.pug.25.188.IP)
[07:06:56] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[07:08:01] *** Quits: c0170 (c0170@moz-4stj9o.cable.virginm.net) (Ping timeout: 121 seconds)
[07:08:51] *** Joins: eddyb__ (eddyb@moz-d42.j1b.166.109.IP)
[07:09:06] *** Quits: eddyb (eddyb@moz-mmq.pug.25.188.IP) (Ping timeout: 121 seconds)
[07:09:50] *** Joins: Rym_ (y@moz-232.ad4.144.109.IP)
[07:10:10] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[07:10:13] *** Joins: mw (mw@moz-f1s7jp.vie.surfer.at)
[07:11:07] *** Quits: eddyb_ (eddyb@moz-mmq.pug.25.188.IP) (Ping timeout: 121 seconds)
[07:13:48] *** Joins: zmack (zmack@moz-b26i0b.home.aster.pl)
[07:14:15] *** Quits: freebroccolo (sid51271@moz-ealde0.ealing.irccloud.com) (*.net *.split)
[07:14:15] *** Quits: jroesch (sid26078@moz-o13a59.charlton.irccloud.com) (*.net *.split)
[07:14:15] *** Quits: rprichard (rprichard@moz-9jq176.en8f.d045.0009.2601.IP) (*.net *.split)
[07:14:15] *** Quits: zwarich (sid63988@moz-402giv.ealing.irccloud.com) (*.net *.split)
[07:14:15] *** Quits: crail (sid24674@moz-s17jb5.charlton.irccloud.com) (*.net *.split)
[07:14:15] *** Quits: carllerche (sid50851@moz-8i75uq.brockwell.irccloud.com) (*.net *.split)
[07:14:15] *** Quits: tekacs (sid17636@moz-43fj8g.uxbridge.irccloud.com) (*.net *.split)
[07:14:15] *** Quits: ggherdov_ (sid11402@moz-u71qnt.charlton.irccloud.com) (*.net *.split)
[07:14:15] *** Quits: amanone (amanone@moz-eh1rje.sk83.bjud.7e00.2a01.IP) (*.net *.split)
[07:14:15] *** Quits: vadimcn (uid46608@moz-o7asbu.uxbridge.irccloud.com) (*.net *.split)
[07:14:15] *** Quits: bgamari (bgamari@moz-uvr07v.q402.fm1a.0470.2001.IP) (*.net *.split)
[07:14:15] *** Quits: aturon (sid36348@moz-n3h4qj.brockwell.irccloud.com) (*.net *.split)
[07:14:15] *** Quits: Fenhl (sid30770@moz-oh0hem.charlton.irccloud.com) (*.net *.split)
[07:14:15] *** Quits: balpert_ (sid15886@moz-eceqqb.uxbridge.irccloud.com) (*.net *.split)
[07:14:15] *** Quits: jack (sid19593@moz-d7cue0.uxbridge.irccloud.com) (*.net *.split)
[07:14:15] *** Quits: yuriks (quassel@moz-hnlou0.yuriks.net) (*.net *.split)
[07:14:15] *** Quits: martin_ (martin@moz-bmp33l.u0v6.gff7.1608.2001.IP) (*.net *.split)
[07:14:15] *** Quits: dherman (sid7996@moz-u0jlif.ealing.irccloud.com) (*.net *.split)
[07:14:15] *** Quits: richo (richo@moz-slrmp8.fs1g.619c.a880.2604.IP) (*.net *.split)
[07:14:15] *** Quits: huon (huon@moz-hj272o.8rnv.rggd.6180.2400.IP) (*.net *.split)
[07:14:15] *** Quits: scott (uid25790@moz-e5ok1n.brockwell.irccloud.com) (*.net *.split)
[07:14:15] *** Quits: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP) (*.net *.split)
[07:14:15] *** Quits: Awerush (Awerush@moz-15s7c4.udtd.gaqb.04f8.2a01.IP) (*.net *.split)
[07:14:15] *** Quits: jvns (sid26231@moz-p7mvuh.brockwell.irccloud.com) (*.net *.split)
[07:14:15] *** Quits: mno2 (sid33176@moz-nd1l6h.brockwell.irccloud.com) (*.net *.split)
[07:14:15] *** Quits: spastorino (sid27384@moz-i6sgse.brockwell.irccloud.com) (*.net *.split)
[07:14:15] *** Quits: goffrie (uid69670@moz-1c9019.brockwell.irccloud.com) (*.net *.split)
[07:14:15] *** Quits: Siosm (quassel@moz-hkaoqt.fr) (*.net *.split)
[07:14:15] *** Quits: sp3d (sp3d@moz-ik970v.enn1.s22b.000d.2601.IP) (*.net *.split)
[07:14:15] *** Quits: bfops (uid58242@moz-e5u6m0.charlton.irccloud.com) (*.net *.split)
[07:14:15] *** Quits: dbussink (dbussink@moz-hsd6q3.bussink.me) (*.net *.split)
[07:14:15] *** Quits: calc0000 (calc0000@moz-nk1cop.mqd9.h8am.0980.2605.IP) (*.net *.split)
[07:14:15] *** Quits: jyyou (jyyou@moz-nhbjfr.bo6r.4bjo.8900.2400.IP) (*.net *.split)
[07:14:15] *** Quits: quantheory (quantheory@moz-m50t2f.44nj.jtvf.0001.2601.IP) (*.net *.split)
[07:14:15] *** Quits: cha0s (chaos@moz-ebt9bj.q7tv.7c32.b0c0.2a03.IP) (*.net *.split)
[07:14:15] *** Quits: wycats (sid79@moz-b4lrm3.brockwell.irccloud.com) (*.net *.split)
[07:14:15] *** Quits: huhlig (sid17687@moz-0p5b0p.uxbridge.irccloud.com) (*.net *.split)
[07:14:15] *** Quits: Gankro (uid71432@moz-sc2bd6.charlton.irccloud.com) (*.net *.split)
[07:14:15] *** Quits: gus (quassel@moz-s29c4j.1136.t8sg.1801.2401.IP) (*.net *.split)
[07:14:15] *** Quits: jld (jld@moz-onnk26.xlerb.net) (*.net *.split)
[07:14:15] *** Quits: seanmonstar (seanmonstar@moz-jd3i0j.fkdv.ulf6.3c01.2600.IP) (*.net *.split)
[07:14:15] *** Quits: Levans (levans@moz-usvfnf.safaradeg.net) (*.net *.split)
[07:14:15] *** Quits: stask (sid61294@moz-0bjq4h.ealing.irccloud.com) (*.net *.split)
[07:14:15] *** Quits: tca (sid17279@moz-rjco49.uxbridge.irccloud.com) (*.net *.split)
[07:14:15] *** Quits: jethrogb (jethrob@moz-p2iedd.scintilla.utwente.nl) (*.net *.split)
[07:14:15] *** Quits: lkuper (sid44041@moz-7edef8.ealing.irccloud.com) (*.net *.split)
[07:14:15] *** Quits: zrl (sid22717@moz-0oej6h.brockwell.irccloud.com) (*.net *.split)
[07:14:21] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Connection closed)
[07:14:23] *** Quits: gavin (gavin@irc.mozilla.org) (A TLS packet with unexpected length was received.)
[07:14:31] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[07:14:39] *** Joins: Awerush (Awerush@moz-15s7c4.udtd.gaqb.04f8.2a01.IP)
[07:14:39] *** Joins: jvns (sid26231@moz-p7mvuh.brockwell.irccloud.com)
[07:14:39] *** Joins: tekacs (sid17636@moz-43fj8g.uxbridge.irccloud.com)
[07:14:39] *** Joins: jethrogb (jethrob@moz-p2iedd.scintilla.utwente.nl)
[07:14:39] *** Joins: lkuper (sid44041@moz-7edef8.ealing.irccloud.com)
[07:14:39] *** Joins: spastorino (sid27384@moz-i6sgse.brockwell.irccloud.com)
[07:14:39] *** Joins: ggherdov_ (sid11402@moz-u71qnt.charlton.irccloud.com)
[07:14:39] *** Joins: Levans (levans@moz-usvfnf.safaradeg.net)
[07:14:39] *** Joins: jroesch (sid26078@moz-o13a59.charlton.irccloud.com)
[07:14:39] *** Joins: wycats (sid79@moz-b4lrm3.brockwell.irccloud.com)
[07:14:39] *** Joins: bfops (uid58242@moz-e5u6m0.charlton.irccloud.com)
[07:14:39] *** Joins: Siosm (quassel@moz-hkaoqt.fr)
[07:14:39] *** Joins: carllerche (sid50851@moz-8i75uq.brockwell.irccloud.com)
[07:14:39] *** Joins: rprichard (rprichard@moz-9jq176.en8f.d045.0009.2601.IP)
[07:14:39] *** Joins: huon (huon@moz-hj272o.8rnv.rggd.6180.2400.IP)
[07:14:39] *** Joins: huhlig (sid17687@moz-0p5b0p.uxbridge.irccloud.com)
[07:14:39] *** Joins: calc0000 (calc0000@moz-nk1cop.mqd9.h8am.0980.2605.IP)
[07:14:39] *** Joins: Fenhl (sid30770@moz-oh0hem.charlton.irccloud.com)
[07:14:39] *** Joins: scott (uid25790@moz-e5ok1n.brockwell.irccloud.com)
[07:14:39] *** Joins: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP)
[07:14:39] *** Joins: richo (richo@moz-slrmp8.fs1g.619c.a880.2604.IP)
[07:14:39] *** Joins: aturon (sid36348@moz-n3h4qj.brockwell.irccloud.com)
[07:14:39] *** Joins: dherman (sid7996@moz-u0jlif.ealing.irccloud.com)
[07:14:39] *** Joins: Gankro (uid71432@moz-sc2bd6.charlton.irccloud.com)
[07:14:39] *** Joins: mno2 (sid33176@moz-nd1l6h.brockwell.irccloud.com)
[07:14:39] *** Joins: zwarich (sid63988@moz-402giv.ealing.irccloud.com)
[07:14:39] *** Joins: tca (sid17279@moz-rjco49.uxbridge.irccloud.com)
[07:14:39] *** Joins: stask (sid61294@moz-0bjq4h.ealing.irccloud.com)
[07:14:39] *** Joins: crail (sid24674@moz-s17jb5.charlton.irccloud.com)
[07:14:39] *** Joins: balpert_ (sid15886@moz-eceqqb.uxbridge.irccloud.com)
[07:14:39] *** Joins: bgamari (bgamari@moz-uvr07v.q402.fm1a.0470.2001.IP)
[07:14:39] *** Joins: goffrie (uid69670@moz-1c9019.brockwell.irccloud.com)
[07:14:39] *** Joins: zrl (sid22717@moz-0oej6h.brockwell.irccloud.com)
[07:14:39] *** Joins: martin_ (martin@moz-bmp33l.u0v6.gff7.1608.2001.IP)
[07:14:39] *** Joins: freebroccolo (sid51271@moz-ealde0.ealing.irccloud.com)
[07:14:39] *** Joins: cha0s (chaos@moz-ebt9bj.q7tv.7c32.b0c0.2a03.IP)
[07:14:39] *** Joins: jack (sid19593@moz-d7cue0.uxbridge.irccloud.com)
[07:14:39] *** Joins: dbussink (dbussink@moz-hsd6q3.bussink.me)
[07:14:39] *** Joins: yuriks (quassel@moz-hnlou0.yuriks.net)
[07:14:39] *** bruford.mozilla.org sets mode: +ooo wycats huon aturon
[07:14:39] *** Joins: gus (quassel@moz-s29c4j.1136.t8sg.1801.2401.IP)
[07:14:39] *** Joins: quantheory (quantheory@moz-m50t2f.44nj.jtvf.0001.2601.IP)
[07:14:39] *** Joins: jyyou (jyyou@moz-nhbjfr.bo6r.4bjo.8900.2400.IP)
[07:14:39] *** Joins: jld (jld@moz-onnk26.xlerb.net)
[07:14:39] *** Joins: amanone (amanone@moz-eh1rje.sk83.bjud.7e00.2a01.IP)
[07:14:39] *** Joins: sp3d (sp3d@moz-ik970v.enn1.s22b.000d.2601.IP)
[07:14:39] *** Joins: vadimcn (uid46608@moz-o7asbu.uxbridge.irccloud.com)
[07:14:39] *** Joins: seanmonstar (seanmonstar@moz-jd3i0j.fkdv.ulf6.3c01.2600.IP)
[07:14:53] *** Joins: gavin (gavin@moz-no0.93r.245.63.IP)
[07:14:57] *** Quits: nmatsakis (nmatsakis@moz-dkjr1g.scl3.mozilla.com) (A TLS packet with unexpected length was received.)
[07:14:59] *** Joins: nmatsakis (nmatsakis@moz-no0.93r.245.63.IP)
[07:14:59] *** ChanServ sets mode: +o nmatsakis
[07:15:30] *** Quits: Rym_ (y@moz-232.ad4.144.109.IP) (Ping timeout: 121 seconds)
[07:16:43] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Client exited)
[07:19:18] *** Joins: dudel (dud@moz-55rvi2.dclient.hispeed.ch)
[07:20:03] *** Quits: quantheory (quantheory@moz-m50t2f.44nj.jtvf.0001.2601.IP) (Quit: Leaving)
[07:20:50] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[07:20:52] *** Joins: c0170 (c0170@moz-bb29a4.cambridge.arm.com)
[07:21:13] *** eddyb__ is now known as eddyb
[07:23:50] *** Quits: untitaker (untitaker@moz-n9v0fd.highway.telekom.at) (Ping timeout: 121 seconds)
[07:24:47] <eddyb> huon: not sure how relevant to your example this is, but a lint could catch passing certain values to functions taking T: Copy
[07:25:37] * eddyb wants so bad to get closure cloning. too bad it involves making Clone special
[07:26:11] <huon> true
[07:28:50] *** Quits: bfops (uid58242@moz-e5u6m0.charlton.irccloud.com) (Quit: Connection closed for inactivity)
[07:30:48] *** Joins: untitaker (untitaker@moz-vtb95m.highway.telekom.at)
[07:33:01] <acrichto> erickt: do you have the full source for that benchmark?
[07:33:26] <erickt> hehe acrichto sure! let me push it up...
[07:33:33] <acrichto> erickt: I can't reproduce your results: https://gist.github.com/alexcrichton/892847c937c49e2a3914
[07:35:13] <erickt> acrichto: https://github.com/erickt/rust-serde/tree/bench
[07:35:38] <erickt> acrichto: just run with `cargo bench -- bench_serializer_my_buf_writer`
[07:36:05] <erickt> acrichto: I wouldn't be terribly surprised if this is just a microbenchmark artifact
[07:37:38] <erickt> acrichto: btw the code I checked is slightly different from the gist. i was trying to see if I could get rid of the unsafe blocks
[07:38:21] *** Quits: lfairy (lfairy@moz-4bn6d3.vf.net.nz) (Ping timeout: 121 seconds)
[07:38:54] <acrichto> erickt: ok I can repro here, but it's not nearly as drastic as the gist
[07:39:30] <erickt> oh? for me it's pretty consistent 250 vs 350+
[07:39:43] <erickt> pesky llvm
[07:39:50] <acrichto> https://gist.github.com/alexcrichton/5bba0a7d29faa8d979ed
[07:40:25] <erickt> oh yeah I guess that's what I'm seeing
[07:41:00] <erickt> oh, I think my first run happened ot be 220 vs 370, which made it even more dramatic for me
[07:43:13] *** Joins: mystor (mystor@moz-ldavpp.home3.cgocable.net)
[07:43:21] *** Quits: zmack (zmack@moz-b26i0b.home.aster.pl) (Connection closed)
[07:44:02] <erickt> acrichto: got rid of the unsafety with https://gist.github.com/erickt/251ed288f80063109610
[07:44:12] *** Joins: laumann (thomas@moz-n9e72h.0.fullrate.dk)
[07:45:50] <acrichto> hm
[07:46:07] *** Quits: dpc__ (dpc@moz-a8v.6sn.162.73.IP) (Ping timeout: 121 seconds)
[07:46:44] <erickt> not sure why it's faster
[07:47:31] *** Quits: mystor (mystor@moz-ldavpp.home3.cgocable.net) (Ping timeout: 121 seconds)
[07:50:09] <erickt> acrichto: I just did https://gist.github.com/erickt/49323877265bbc86c891 and the speed fell dramatically
[07:50:21] <erickt> from 370 down to 220
[07:52:26] <acrichto> erickt: hm I may try to investigate later
[07:52:35] <acrichto> this seems like something that's not too hard to fix
[07:52:43] <erickt> yeah me too, it's bedtime
[07:52:50] <erickt> I figured it was something like this
[07:53:17] <erickt> maybe pcwalton or zwarich might know
[07:53:55] <erickt> thanks for looking! gnight!
[07:55:52] <eddyb> the swift post is a good read. minor misconceptions, but nothing abrassive
[07:58:30] *** Quits: ChrisMorgan (ChrisMorgan@moz-g6osuq.tpgi.com.au) (Ping timeout: 121 seconds)
[07:59:20] *** Joins: ChrisMorgan (ChrisMorgan@moz-g6osuq.tpgi.com.au)
[08:00:10] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[08:04:02] *** Joins: dinfuehr (dinfuehr@moz-nlvoeb.tuwien.ac.at)
[08:04:38] *** Joins: dinfuehr_ (dinfuehr@moz-nlvoeb.tuwien.ac.at)
[08:04:38] *** Quits: dinfuehr (dinfuehr@moz-nlvoeb.tuwien.ac.at) (Connection closed)
[08:05:47] *** Joins: Rym_ (y@moz-232.ad4.144.109.IP)
[08:08:42] *** Quits: dinfuehr_ (dinfuehr@moz-nlvoeb.tuwien.ac.at) (Ping timeout: 121 seconds)
[08:10:18] *** Quits: Rym_ (y@moz-232.ad4.144.109.IP) (Ping timeout: 121 seconds)
[08:11:24] *** Joins: zmack (zmack@moz-b26i0b.home.aster.pl)
[08:12:24] *** Joins: munksgaard (munksgaard@moz-3v9.hq0.225.130.IP)
[08:12:32] *** Joins: Tobba|Laptop (Tobba@moz-1hh.7ki.21.217.IP)
[08:20:00] *** Joins: killercup (killercup@moz-5c9.efa.139.87.IP)
[08:20:20] *** Quits: summerlight_ (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[08:20:36] *** Joins: cdidd (cdidd@moz-vl96ro.broadband.corbina.ru)
[08:28:54] *** Quits: bjz (bjz@moz-puppgq.tpgi.com.au) (Quit: My Mac has gone to sleep. ZZZzzz…)
[08:33:30] *** Joins: imperio (Mibbit@moz-psdrik.rev.sfr.net)
[08:35:11] *** Joins: dinfuehr (dinfuehr@moz-nlvoeb.tuwien.ac.at)
[08:35:55] *** Quits: jxs (joaoxsouls@moz-odlbq5.fcsh.unl.pt) (Ping timeout: 121 seconds)
[08:38:14] *** Joins: jxs (joaoxsouls@moz-odlbq5.fcsh.unl.pt)
[08:38:20] *** Joins: eddyb_ (eddyb@moz-d42.j1b.166.109.IP)
[08:38:58] *** Joins: bjz (bjz@moz-puppgq.tpgi.com.au)
[08:48:49] *** Quits: jxs (joaoxsouls@moz-odlbq5.fcsh.unl.pt) (Ping timeout: 121 seconds)
[08:50:15] *** Joins: jxs (joaoxsouls@moz-odlbq5.fcsh.unl.pt)
[08:58:51] *** Quits: laumann (thomas@moz-n9e72h.0.fullrate.dk) (Ping timeout: 121 seconds)
[08:59:57] *** Joins: Rym_ (y@moz-232.ad4.144.109.IP)
[09:00:44] *** Joins: Nekit1234007 (nekit@moz-vfr.64q.51.84.IP)
[09:01:20] *** Quits: jxs (joaoxsouls@moz-odlbq5.fcsh.unl.pt) (Ping timeout: 121 seconds)
[09:02:47] *** Joins: jxs (joaoxsouls@moz-odlbq5.fcsh.unl.pt)
[09:04:27] *** Quits: Rym_ (y@moz-232.ad4.144.109.IP) (Ping timeout: 121 seconds)
[09:11:51] *** Quits: jxs (joaoxsouls@moz-odlbq5.fcsh.unl.pt) (Ping timeout: 121 seconds)
[09:13:48] *** Joins: jxs (joaoxsouls@moz-odlbq5.fcsh.unl.pt)
[09:18:30] *** Quits: Gankro (uid71432@moz-sc2bd6.charlton.irccloud.com) (Quit: Connection closed for inactivity)
[09:23:05] *** Joins: eibwen (eibwen@moz-r39.1tm.231.217.IP)
[09:24:54] *** Joins: laumann (thomas@moz-fso.hq0.225.130.IP)
[09:26:24] *** Quits: jxs (joaoxsouls@moz-odlbq5.fcsh.unl.pt) (Ping timeout: 121 seconds)
[09:27:23] *** Quits: eddyb (eddyb@moz-d42.j1b.166.109.IP) (Connection closed)
[09:27:49] *** Joins: jxs (joaoxsouls@moz-odlbq5.fcsh.unl.pt)
[09:28:06] *** Quits: killercup (killercup@moz-5c9.efa.139.87.IP) (Quit: Bye)
[09:28:34] *** Joins: killercup (killercup@moz-5c9.efa.139.87.IP)
[09:36:46] *** Quits: nrc (nrc@moz-4bhi2i.xtra.co.nz) (Ping timeout: 121 seconds)
[09:36:53] *** Quits: jxs (joaoxsouls@moz-odlbq5.fcsh.unl.pt) (Ping timeout: 121 seconds)
[09:38:50] *** Joins: jxs (joaoxsouls@moz-odlbq5.fcsh.unl.pt)
[09:40:55] *** Quits: minzh (minzh@moz-u8rq5v.citrix.com) (A TLS packet with unexpected length was received.)
[09:46:19] *** Joins: minzh (minzh@moz-u8rq5v.citrix.com)
[09:49:10] *** Quits: vadimcn (uid46608@moz-o7asbu.uxbridge.irccloud.com) (Quit: Connection closed for inactivity)
[09:50:22] *** Quits: minzh (minzh@moz-u8rq5v.citrix.com) (Ping timeout: 121 seconds)
[09:53:09] *** Joins: ptalbot (ptalbot@moz-g2mokk.ircam.fr)
[09:54:07] *** Joins: Rym_ (y@moz-232.ad4.144.109.IP)
[09:58:37] *** Quits: Rym_ (y@moz-232.ad4.144.109.IP) (Ping timeout: 121 seconds)
[10:01:32] *** Parts: mw (mw@moz-f1s7jp.vie.surfer.at) ("")
[10:02:33] *** Joins: larhat (Adium@moz-8v4.af0.232.213.IP)
[10:08:13] *** Quits: enaqx (enaqx@moz-asgdqm.infomir.com.ua) (Ping timeout: 121 seconds)
[10:08:33] *** Joins: arrrrrrr1 (arrrrrrrrs@moz-q3f546.dynamic.qsc.de)
[10:09:24] *** Joins: minzh (minzh@moz-u8rq5v.citrix.com)
[10:12:06] *** Quits: jxs (joaoxsouls@moz-odlbq5.fcsh.unl.pt) (Ping timeout: 121 seconds)
[10:13:23] *** Joins: jxs (joaoxsouls@moz-odlbq5.fcsh.unl.pt)
[10:16:34] *** Joins: eerie (eerie@moz-nbbdu3.red.bezeqint.net)
[10:17:32] *** Quits: arrrrrrr1 (arrrrrrrrs@moz-q3f546.dynamic.qsc.de) (Ping timeout: 121 seconds)
[10:19:25] *** Quits: dinfuehr (dinfuehr@moz-nlvoeb.tuwien.ac.at) (Connection closed)
[10:19:45] *** Joins: dinfuehr (dinfuehr@moz-nlvoeb.tuwien.ac.at)
[10:21:09] *** Joins: enaqx (enaqx@moz-asgdqm.infomir.com.ua)
[10:23:47] *** Quits: dinfuehr (dinfuehr@moz-nlvoeb.tuwien.ac.at) (Ping timeout: 121 seconds)
[10:24:44] *** Quits: minzh (minzh@moz-u8rq5v.citrix.com) (A TLS packet with unexpected length was received.)
[10:28:52] *** Quits: Tobba|Laptop (Tobba@moz-1hh.7ki.21.217.IP) (Ping timeout: 121 seconds)
[10:33:51] *** Quits: eerie (eerie@moz-nbbdu3.red.bezeqint.net) (Connection closed)
[10:36:34] *** Quits: jxs (joaoxsouls@moz-odlbq5.fcsh.unl.pt) (Ping timeout: 121 seconds)
[10:37:11] *** Joins: summerlight_ (summerlight@moz-99k.2mj.130.121.IP)
[10:39:25] *** Joins: jxs (joaoxsouls@moz-odlbq5.fcsh.unl.pt)
[10:40:22] *** Joins: ytain (ytain@moz-a0pap1.dsl.teksavvy.com)
[10:44:16] *** Quits: ptalbot (ptalbot@moz-g2mokk.ircam.fr) (Ping timeout: 121 seconds)
[10:44:23] *** Joins: Tobba|Laptop (Tobba@moz-1hh.7ki.21.217.IP)
[10:48:19] *** Joins: Rym_ (y@moz-232.ad4.144.109.IP)
[10:49:56] *** Quits: ^BR (br@moz-egk.dm6.194.78.IP) (Client exited)
[10:50:40] *** Quits: TheHydroImpulse (TheHydroImp@moz-4vd.6hg.148.68.IP) (Client exited)
[10:51:24] *** Quits: ChrisMorgan (ChrisMorgan@moz-g6osuq.tpgi.com.au) (Ping timeout: 121 seconds)
[10:52:49] *** Quits: Rym_ (y@moz-232.ad4.144.109.IP) (Ping timeout: 121 seconds)
[10:53:11] *** Joins: ChrisMorgan (ChrisMorgan@moz-g6osuq.tpgi.com.au)
[10:57:11] *** Quits: Tobba|Laptop (Tobba@moz-1hh.7ki.21.217.IP) (Ping timeout: 121 seconds)
[10:57:34] *** Quits: jxs (joaoxsouls@moz-odlbq5.fcsh.unl.pt) (Ping timeout: 121 seconds)
[10:58:38] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[11:00:26] *** Joins: jxs (joaoxsouls@moz-odlbq5.fcsh.unl.pt)
[11:01:55] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[11:02:27] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[11:06:29] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Ping timeout: 121 seconds)
[11:13:46] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[11:13:53] *** Joins: kmcguire (kmcguire@moz-pg1gb9.biz.rr.com)
[11:14:43] *** Joins: Tobba|Laptop (Tobba@moz-1hh.7ki.21.217.IP)
[11:15:58] *** Joins: eerie (eerie@moz-nbbdu3.red.bezeqint.net)
[11:17:49] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Ping timeout: 121 seconds)
[11:19:47] *** Joins: dinfuehr (dinfuehr@moz-nlvoeb.tuwien.ac.at)
[11:22:59] *** Quits: eddyb_ (eddyb@moz-d42.j1b.166.109.IP) (Ping timeout: 121 seconds)
[11:23:11] *** Quits: dinfuehr (dinfuehr@moz-nlvoeb.tuwien.ac.at) (Quit: )
[11:26:52] *** Joins: dinfuehr (dinfuehr@moz-nlvoeb.tuwien.ac.at)
[11:31:00] *** Quits: eerie (eerie@moz-nbbdu3.red.bezeqint.net) (Connection closed)
[11:42:26] *** Joins: Rym_ (y@moz-232.ad4.144.109.IP)
[11:46:58] *** Quits: Rym_ (y@moz-232.ad4.144.109.IP) (Ping timeout: 121 seconds)
[11:48:34] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[11:53:52] *** Joins: mib_ukx7nv (Mibbit@moz-juv.9o3.252.72.IP)
[12:11:26] *** Quits: mib_ukx7nv (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[12:13:12] *** Joins: Guest63 (textual@moz-qfs.570.70.83.IP)
[12:14:37] *** Quits: Tobba|Laptop (Tobba@moz-1hh.7ki.21.217.IP) (Ping timeout: 121 seconds)
[12:14:51] *** Joins: mystor (mystor@moz-ldavpp.home3.cgocable.net)
[12:19:07] *** Quits: mystor (mystor@moz-ldavpp.home3.cgocable.net) (Ping timeout: 121 seconds)
[12:24:12] *** Joins: Gankro (uid71432@moz-8qssdp.irccloud.com)
[12:34:23] *** Joins: eddyb_ (eddyb@moz-mmq.pug.25.188.IP)
[12:36:38] *** Joins: Rym_ (y@moz-232.ad4.144.109.IP)
[12:38:28] *** Quits: ctennis (ctennis@moz-vcpg3c.in.comcast.net) (Quit: Leaving...)
[12:41:07] *** Quits: Rym_ (y@moz-232.ad4.144.109.IP) (Ping timeout: 121 seconds)
[12:43:10] *** Joins: jdm (jdm@moz-d6lm22.dsl.bell.ca)
[12:48:00] *** Joins: ctennis (ctennis@moz-su6.e72.137.99.IP)
[12:48:04] *** Quits: bjz (bjz@moz-puppgq.tpgi.com.au) (Quit: Textual IRC Client: www.textualapp.com)
[12:49:06] *** Joins: bjz (bjz@moz-puppgq.tpgi.com.au)
[12:49:22] *** Quits: dinfuehr (dinfuehr@moz-nlvoeb.tuwien.ac.at) (Connection closed)
[12:56:51] *** Joins: jculpon (peri@moz-nlc4ha.ca.comcast.net)
[13:00:19] <SimonSapin> Any idea how to work around "error: constant evaluation error: can't cast this type [E0080]" in code that used to work in older compilers? https://github.com/rust-lang/rust/issues/23304
[13:03:33] <eddyb_> SimonSapin: note: that code was most likely wrong
[13:03:43] <eddyb_> wait, that issue?
[13:04:18] <eddyb_> SimonSapin: I think that's caused by overflow (but the appropriate error is not shown)
[13:04:26] <SimonSapin> more context: https://github.com/servo/rust-mozjs/blob/master/src/jsval.rs
[13:04:43] <eddyb_> shouldn't that use bitflags?
[13:04:56] <SimonSapin> maybe?
[13:05:14] <eddyb_> yeah, this is not what Rust enums are for https://github.com/servo/rust-mozjs/blob/master/src/jsval.rs#L40-L49
[13:05:22] <SimonSapin> I mean, variants are never or’ed together
[13:06:11] <SimonSapin> I tried remplacing all this with `const` values, but ValueTag is also used as a type
[13:06:33] <eddyb_> bitflags! also gives you a type
[13:06:42] <eddyb_> (which is a newtype of the chosen integer type)
[13:08:12] <SimonSapin> I’ll try that, thanks
[13:12:16] *** Joins: arrrrrrr1 (arrrrrrrrs@moz-q3f546.dynamic.qsc.de)
[13:12:31] <arrrrrrr1> simukis: why did you use ptr::write in your code yesterday?
[13:12:51] <simukis> arrrrrrr1: honestly I don’t remember anything about it anymore
[13:13:11] <simukis> which one do you refer to, exactly? 
[13:13:47] <arrrrrrr1> https://gist.github.com/nagisa/eb64b7fc00f5da64c8ba
[13:14:52] <simukis> arrrrrrr1: uhm, no idea. I believe this is a case of “meh, anything works”.
[13:18:43] *** Joins: eerie (eerie@moz-8pql07.red.bezeqint.net)
[13:24:52] <eddyb_> why does github not let me search my own private gists?
[13:25:00] <eddyb_> or even list them in a compact format I can Ctrl+F in
[13:25:14] <arrrrrrr1> just github things
[13:25:32] *** Quits: jculpon (peri@moz-nlc4ha.ca.comcast.net) (Quit: coffee time)
[13:25:58] <eddyb_> when did I make 259 secret gists?!
[13:26:08] <eddyb_> that explains why there's so many pages q_q
[13:30:47] *** Joins: Rym_ (y@moz-232.ad4.144.109.IP)
[13:35:19] *** Quits: Rym_ (y@moz-232.ad4.144.109.IP) (Ping timeout: 121 seconds)
[13:35:41] *** Joins: mystor_ (mystor@moz-vpa.r78.15.130.IP)
[13:40:09] *** Joins: xilec (Mibbit@moz-g6k.oht.161.46.IP)
[13:41:05] <SimonSapin> Is it appropriate to use MarkerTrait for a trait that’s not really a marker but has associated functions?
[13:41:25] <kimundi> SimonSapin: I think so, yes
[13:41:48] <kimundi> SimonSapin: Afaik the name "MarkerTrait" is kinda badly choosen in that regard :P
[13:42:06] <SimonSapin> I see
[13:42:36] <aturon> nmatsakis: ^
[13:43:46] <arrrrrrr1> yo, target-cpu=native works in the latest nightly
[13:44:05] <arrrrrrr1> now we've gotta tell the benchmarks game guy to use that
[13:48:34] *** Joins: japaric (japaric@moz-hpu.6fl.64.181.IP)
[14:11:42] *** Joins: ^BR (br@moz-egk.dm6.194.78.IP)
[14:20:37] *** Quits: mystor_ (mystor@moz-vpa.r78.15.130.IP) (Connection closed)
[14:24:24] *** Quits: barosl (barosl@moz-7vg.qma.67.220.IP) (Connection closed)
[14:24:57] *** Joins: Rym_ (y@moz-232.ad4.144.109.IP)
[14:26:10] *** Joins: barosl (barosl@moz-7vg.qma.67.220.IP)
[14:28:07] <SimonSapin> I’m doing silly thing like this https://github.com/servo/servo/commit/90563f57a088a119f5bddde5a5fdfe67cbb39738 to make RefCell::borrow pass the borrow-checker. Is this a bug?
[14:28:33] <SimonSapin> these changes look very much like they should be no-ops
[14:29:13] <SimonSapin> and the error message says that the lifetime is not long enough: must be at least [...] and is [...] with both spans exactly the same
[14:29:27] *** Quits: Rym_ (y@moz-232.ad4.144.109.IP) (Ping timeout: 121 seconds)
[14:35:45] *** Quits: enaqx (enaqx@moz-asgdqm.infomir.com.ua) (Ping timeout: 121 seconds)
[14:36:04] *** Quits: Guest63 (textual@moz-qfs.570.70.83.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[14:36:14] *** Quits: imperio (Mibbit@moz-psdrik.rev.sfr.net) (Quit: http://www.mibbit.com ajax IRC Client)
[14:36:39] *** Joins: enaqx (enaqx@moz-asgdqm.infomir.com.ua)
[14:37:04] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[14:38:54] <kimundi> playbot: "foo".split("o").rev().collect::<Vec<_>>()
[14:38:55] -playbot- <anon>:14:32: 14:51 error: type `core::iter::Rev<core::str::Split<'_, &str>>` does not implement any method in scope named `collect`
[14:38:55] -playbot- <anon>:14         "foo".split("o").rev().collect::<Vec<_>>()
[14:38:55] -playbot- output truncated; full output at: http://bit.ly/1GzGA8y
[14:39:03] *** Joins: Guest63 (textual@moz-qfs.570.70.83.IP)
[14:40:46] *** Joins: sinclair (chatzilla@moz-o36q4q.xnet.co.nz)
[14:41:00] *** Joins: eddyb__ (eddyb@moz-q10.6n6.26.188.IP)
[14:41:47] *** Quits: [o__o] ([o__o]@moz-4s2t5k.compute-1.amazonaws.com) (Ping timeout: 121 seconds)
[14:43:54] *** Quits: eddyb_ (eddyb@moz-mmq.pug.25.188.IP) (Ping timeout: 121 seconds)
[14:46:42] *** Quits: japaric (japaric@moz-hpu.6fl.64.181.IP) (Ping timeout: 121 seconds)
[14:47:16] *** Quits: enaqx (enaqx@moz-asgdqm.infomir.com.ua) (Ping timeout: 121 seconds)
[14:48:06] *** Quits: eerie (eerie@moz-8pql07.red.bezeqint.net) (Connection closed)
[14:48:50] <frewsxcv> playbot: "foo".split("o").collect::<Vec<_>>()
[14:48:52] -playbot- ["f", "", ""]
[14:49:46] <frewsxcv> playbot: "foo".split("").collect::<Vec<_>>()
[14:49:48] -playbot- ["", "f", "o", "o", ""]
[14:50:16] <arrrrrrr1> rusti: "".split("")
[14:50:17] -playbot- output truncated; full output at: http://bit.ly/1FiFM9W
[14:50:23] <arrrrrrr1> rusti: "".split("");
[14:50:25] -playbot- ()
[14:50:27] *** Joins: arielb1 (Ariel@moz-qfu7pm.red.bezeqint.net)
[14:50:42] *** Joins: larsberg (sid16141@moz-fnneme.uxbridge.irccloud.com)
[14:50:59] <globin> playbot: "foo".split("o").clone().rev().collect::<Vec<_>>()
[14:51:00] -playbot- <anon>:14:26: 14:33 error: type `core::str::Split<'_, &str>` does not implement any method in scope named `clone`
[14:51:01] -playbot- <anon>:14         "foo".split("o").clone().rev().collect::<Vec<_>>()
[14:51:01] -playbot- output truncated; full output at: http://bit.ly/1GzJieb
[14:51:05] *** eddyb__ is now known as eddyb
[14:54:33] *** Joins: [o__o] ([o__o]@moz-4s2t5k.compute-1.amazonaws.com)
[15:02:12] *** Joins: enaqx (enaqx@moz-asgdqm.infomir.com.ua)
[15:06:37] *** Joins: japaric (japaric@moz-hpu.6fl.64.181.IP)
[15:08:30] *** Quits: Gankro (uid71432@moz-8qssdp.irccloud.com) (Quit: Connection closed for inactivity)
[15:09:38] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[15:09:58] <arrrrrrr1> what's the best web-framework written in rust?
[15:10:13] <arrrrrrr1> or webserver whatever
[15:10:31] <ytain> iron
[15:12:41] <arrrrrrr1> >let chain = Chain::new(|&: _: &mut Request| {
[15:12:45] <arrrrrrr1> time to update your docs
[15:15:34] <barosl> arrrrrrr1, There's also #iron if you're interested
[15:15:50] <arrrrrrr1> I do like the ways the examples look
[15:16:25] <barosl> reem's also constantly rewriting everything, so...
[15:16:33] <barosl> It may look drastically different months later
[15:19:07] *** Joins: Rym_ (y@moz-232.ad4.144.109.IP)
[15:20:38] *** Manishearth is now known as spaghetti
[15:21:48] *** spaghetti is now known as Manishearth
[15:21:52] <arrrrrrr1> WindowsBunny: ping
[15:22:01] <WindowsBunny> arrrrrrr1: Pong
[15:22:11] <arrrrrrr1> WindowsBunny: rustdoc JS fix has landed
[15:22:16] <arrrrrrr1> in the latest nightly
[15:22:16] <WindowsBunny> arrrrrrr1: I know :D
[15:22:20] <arrrrrrr1> link?
[15:22:23] <WindowsBunny> I'm gonna have to update my docs
[15:22:31] <WindowsBunny> docs updating
[15:22:44] *** Joins: sternmull (kringel@moz-hmm04a.dip0.t-ipconnect.de)
[15:22:59] <WindowsBunny> arrrrrrr1: Now all we need is rustdoc to not consume a ridiculous amount of memory
[15:23:09] <arrrrrrr1> people really have to stop using the terrible default css and js
[15:23:12] <arrrrrrr1> it's unbearable
[15:23:33] <arrrrrrr1> I'm not sure how eddyb does it. apparently his browser is always so small that he can never see the sidebar
[15:23:39] *** Quits: Rym_ (y@moz-232.ad4.144.109.IP) (Ping timeout: 121 seconds)
[15:24:10] *** Joins: ptalbot (ptalbot@moz-g2mokk.ircam.fr)
[15:24:11] <arrrrrrr1> I'm looking at http://ironframework.io/doc/iron/index.html right now and I just can't see the other crate links
[15:27:22] <arrrrrrr1> http://ironframework.io/doc/hyper/server/struct.Listening.html
[15:27:27] <arrrrrrr1> thanks, rustdoc
[15:27:50] <kimundi> eddyb: Btw, I meant to ask you whether you had seen the "make function pointers and function items behave different" RFC thread thats active for the last one or two weeks
[15:28:28] <WindowsBunny> arrrrrrr1: https://retep998.github.io/doc/winapi/winerror/index.html
[15:28:30] <WindowsBunny> It's great!
[15:29:10] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Client exited)
[15:29:30] <WindowsBunny> Now if only I didn't need to have a separate html page for each of those constants
[15:30:34] *** Joins: nwin (textual@moz-he7c2m.pools.vodafone-ip.de)
[15:30:39] <arrrrrrr1> ha, the limiting code is now the one that hides the sidebar
[15:31:01] <arrrrrrr1> resizing is instant when you don't go between sidebar hidden <-> visible
[15:31:07] <arrrrrrr1> but if you do it lags for a second
[15:31:13] <arrrrrrr1> or 2
[15:31:23] <arrrrrrr1> time to submit another PR
[15:31:28] <WindowsBunny> still better than being frozen for a minute :D
[15:31:42] *** Joins: Kxepal832 (Miranda@moz-7jeadc.pppoe.mtu-net.ru)
[15:31:57] *** Quits: Kxepal (Miranda@moz-2lokhb.pppoe.mtu-net.ru) (Ping timeout: 121 seconds)
[15:32:02] <arrrrrrr1> https://retep998.github.io/doc/winapi/index.html
[15:32:09] <arrrrrrr1> look at all those non-truncated descriptions
[15:32:11] <arrrrrrr1> beautiful
[15:32:47] *** Quits: Guest63 (textual@moz-qfs.570.70.83.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[15:32:47] <nwin> Hi I’m trying to find out why rustc is so slow on my project. Is it normal that rustc spends a lot of time in trans_closure? Does trans_closure translate normal functions as well?
[15:33:11] <arrrrrrr1> nwin: we're all trying to find out why rustc is so slow on our projects ;)
[15:33:39] <nwin> arrrrrrr1: yes but did your build time also increase by an factor of 3 in the last month?
[15:33:41] <arrrrrrr1> 30 seconds for 3000 lines in debug mode is not exceptional
[15:33:53] <arrrrrrr1> nwin: dunno
[15:34:03] <nwin> I’m not at 1:30…
[15:34:44] <nwin> -not+now
[15:34:54] <arrrrrrr1> how large?
[15:35:04] <nwin> 12k
[15:35:12] *** Joins: mystor_ (mystor@moz-vpa.r78.15.130.IP)
[15:35:16] *** Quits: c0170 (c0170@moz-bb29a4.cambridge.arm.com) (Ping timeout: 121 seconds)
[15:35:18] <nwin> it’s just this factor of 3 which puzzles me
[15:36:30] <arrrrrrr1> wow, compile times have actually gone down significantly to 17 seconds for me
[15:36:55] *** Joins: edwardw (edwardw@moz-a01.vab.16.199.IP)
[15:37:12] <nwin> 30s was annoying, 1:30 is close being unacceptable…
[15:37:26] <nwin> and I thing it is really rustc which is slow and not llvm…
[15:38:04] <nwin> think…argh I’m really bad with letters lately…
[15:38:32] <arrrrrrr1> WindowsBunny: now we have to fix this: http://a.pomf.se/xzmhth.png
[15:38:34] <WindowsBunny> nwin: Don't worry, I spend nearly half a minute waiting for coherence checking :P
[15:38:44] <WindowsBunny> arrrrrrr1: lol
[15:38:51] <WindowsBunny> arrrrrrr1: also when links in libstd link to libcore
[15:39:06] <arrrrrrr1> well, cross linking is a rustdoc problem not a frontend problem
[15:39:17] <arrrrrrr1> so to speak
[15:40:28] *** sunfish-away is now known as sunfish
[15:44:19] <arrrrrrr1> I think a good first step is to submit a PR that removes the custom fonts
[15:46:42] *** Quits: mystor_ (mystor@moz-vpa.r78.15.130.IP) (Connection closed)
[15:48:00] *** Joins: c0170 (c0170@moz-4stj9o.cable.virginm.net)
[15:52:20] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Client exited)
[15:52:37] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[15:52:53] <simukis> WindowsBunny: err, tables is not the element for listing 6k rows. (re your long list of constants)
[15:53:11] <arrrrrrr1> rustdoc output isn't webscale
[15:53:16] <simukis> totally
[15:53:37] <arrrrrrr1> doesn't scale to small screens
[15:53:37] <WindowsBunny> simukis: my winapi crate has broken so many things already
[15:53:41] <arrrrrrr1> doesn't scale to large output
[15:53:49] <WindowsBunny> simukis: I think that's a sign I might be doing things right
[15:53:55] <simukis> lol
[15:54:38] <WindowsBunny> Are there any statistics on how many crates each person has on crates.io?
[15:55:10] <WindowsBunny> whoa, there was a _huge_ download spike for my winapi crate yesterday
[15:55:46] <simukis> WindowsBunny: most crates had one
[15:55:57] <WindowsBunny> simukis: Was it a ddos? a stress test?
[15:55:58] <simukis> most most downloaded crates had one*
[15:56:10] <simukis> I believe brson ran his integration builds?
[15:56:16] <WindowsBunny> xD
[15:56:28] *** Joins: mystor (mystor@moz-vpa.r78.15.130.IP)
[15:56:41] *** Joins: sigma (sigma@moz-ohog4c.range86-135.btcentralplus.com)
[15:56:57] <WindowsBunny> How am I supposed to trust download counts when this sort of stuff happens?
[15:56:59] <simukis> even mine crate that nobody cares about (https://crates.io/crates/rdrand) has a spike!
[15:57:18] <WindowsBunny> wat
[15:57:41] *** Joins: tjakubow (tom@moz-ag87jj.fios.verizon.net)
[15:57:50] <WindowsBunny> that seems really weird
[15:58:02] <simukis> brson built all the crates
[15:58:06] <simukis> literally all of them
[15:58:09] <WindowsBunny> :|
[15:58:17] <simukis> 1.9k simultaneous builds
[15:58:37] <simukis> and as far as I know these will run periodically
[15:58:41] <WindowsBunny> welp
[15:58:57] <simukis> in order to see whether we regress and break things with the compiler
[15:59:01] *** Quits: edwardw (edwardw@moz-a01.vab.16.199.IP) (Quit: Leaving...)
[15:59:03] <WindowsBunny> simukis: So basically if I want to increase my download count I just have to make everyone depend on me?
[15:59:04] <simukis> s/with/in/
[15:59:32] <simukis> WindowsBunny: that strategy would work regardless of whether integration builds are a thing or not, I think.
[15:59:59] <simukis> easier way to bump your download counts would be to simply download your own crate many times yourself.
[16:00:04] <WindowsBunny> xD
[16:00:18] <WindowsBunny> That's fraud though
[16:00:49] <simukis> why? the statistic says “download count”.
[16:00:59] <simukis> s/says/is/
[16:01:02] *** Joins: Astrum|Lap (Astrum|Lap@moz-7enfbr.co.comcast.net)
[16:02:18] *** Joins: vadimcn (uid46608@moz-o7asbu.uxbridge.irccloud.com)
[16:07:01] *** Joins: hoverbear (hoverbear@moz-1opgd3.wireless.uvic.ca)
[16:08:13] *** Joins: eerie (eerie@moz-nbbdu3.red.bezeqint.net)
[16:08:20] *** Joins: blaenk_ (blaenkdenum@moz-em283u.res.rr.com)
[16:08:57] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Ping timeout: 121 seconds)
[16:10:23] <arrrrrrr1> simukis: are you using some weird unicode in your github name?
[16:10:34] <arrrrrrr1> nope, nothing like that
[16:10:38] <arrrrrrr1> just github being slow
[16:10:38] <simukis> no I am not
[16:12:10] *** Quits: blaenk_ (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[16:12:59] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[16:13:18] *** Joins: Rym_ (y@moz-232.ad4.144.109.IP)
[16:13:49] <simukis> arrrrrrr1: what precisely do you mean by captured?
[16:14:11] <arrrrrrr1> like libtest captures output
[16:15:34] <simukis> well, since there’s only one global instance of Stdout that `stdout/err/in()` returns, I don’t see any issues with reopening them to whatever.
[16:16:12] <simukis> and as far as redirection goes, you wouldn’t be able to capture the output of println! to arbitrary outputs either, would you?
[16:17:08] *** Quits: zmack (zmack@moz-b26i0b.home.aster.pl) (Connection closed)
[16:17:48] *** Quits: Rym_ (y@moz-232.ad4.144.109.IP) (Ping timeout: 121 seconds)
[16:18:21] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[16:18:51] *** Joins: blaenk_ (blaenkdenum@moz-em283u.res.rr.com)
[16:18:58] <arrrrrrr1> println! to arbitrary output? what does that mean? you cannot choose the output with println
[16:19:50] <simukis> we are discussing indroduction of redirection for println and panic macros when we revisit the topic again
[16:20:13] <arrrrrrr1> that doesn't solve the problem as long as libraries write to stdout() and stderr()
[16:20:20] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Ping timeout: 121 seconds)
[16:23:04] <simukis> I think we’re discussing two different things still. I built a thread to illustrate what we’re talking about https://gist.github.com/nagisa/1d55e703d80e5b417e51
[16:24:22] <arrrrrrr1> then let me make it clear what I'm discussing: println! has to write to stdout() and stdout() and stderr() have to be thread-redirectable. child threads have to inherit the threads stdout and err
[16:25:53] <simukis> Ok, I see it now.
[16:26:01] <arrrrrrr1> I also posted an example in the RFC
[16:27:45] *** Joins: Rym_ (y@moz-232.ad4.144.109.IP)
[16:29:03] *** Joins: Guest63 (textual@moz-qfs.570.70.83.IP)
[16:29:20] *** Quits: killercup (killercup@moz-5c9.efa.139.87.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[16:29:29] *** Joins: blaenk__ (blaenkdenum@moz-em283u.res.rr.com)
[16:29:51] *** Joins: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se)
[16:32:52] *** Quits: hoverbear (hoverbear@moz-1opgd3.wireless.uvic.ca) (Quit: Time to hibernate.... ZzZz...)
[16:32:57] *** Quits: blaenk_ (blaenkdenum@moz-em283u.res.rr.com) (Ping timeout: 121 seconds)
[16:33:00] *** Quits: sigma (sigma@moz-ohog4c.range86-135.btcentralplus.com) (Ping timeout: 121 seconds)
[16:33:42] *** Quits: Rym_ (y@moz-232.ad4.144.109.IP) (Ping timeout: 121 seconds)
[16:33:59] *** Quits: ptalbot (ptalbot@moz-g2mokk.ircam.fr) (Ping timeout: 121 seconds)
[16:37:00] *** Quits: munksgaard (munksgaard@moz-3v9.hq0.225.130.IP) (Ping timeout: 121 seconds)
[16:37:10] <kimundi> ping @ anyone who knows about trait resolution (or rather, the code that for something like foo.bar() checks wether foo has the method bar())
[16:38:15] <kimundi> actually, this is #rustc stuff
[16:38:28] *** Joins: eerie_ (eerie@moz-nbbdu3.red.bezeqint.net)
[16:41:23] *** Quits: eerie (eerie@moz-nbbdu3.red.bezeqint.net) (Ping timeout: 121 seconds)
[16:41:31] *** Joins: Gankro (uid71432@moz-sc2bd6.charlton.irccloud.com)
[16:41:33] *** Joins: Rym_ (y@moz-232.ad4.144.109.IP)
[16:42:53] <Gankro> cgaebel: I think you've gotten confused with part of my proposal. `int` as proposed is not what is not `isize`
[16:43:02] <Gankro> *what is now
[16:43:07] <cgaebel> Gankro: wow you're right
[16:43:17] * cgaebel smacks head
[16:44:07] * cgaebel shame deletes post
[16:45:03] *** Joins: mystor_ (mystor@moz-vpa.r78.15.130.IP)
[16:45:21] *** Quits: mystor (mystor@moz-vpa.r78.15.130.IP) (Connection closed)
[16:45:58] *** mystor_ is now known as mystor
[16:46:30] *** Joins: brson (brson@moz-cfhap5.mtv2.mozilla.com)
[16:46:30] *** ChanServ sets mode: +o brson
[16:46:31] *** Quits: Guest63 (textual@moz-qfs.570.70.83.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[16:46:34] *** Joins: Guest63 (textual@moz-qfs.570.70.83.IP)
[16:46:51] *** Joins: pcwalton (pcwalton@moz-u92.384.6.71.IP)
[16:46:52] *** ChanServ sets mode: +o pcwalton
[16:47:52] *** Joins: sigma (sigma@moz-a5u.m43.48.37.IP)
[16:50:50] *** Joins: O01eg (o01eg@moz-7n6.3tq.165.5.IP)
[16:54:03] *** Joins: edwardw (edwardw@moz-vvv.4aq.34.174.IP)
[16:57:56] *** Joins: bfops (uid58242@moz-e5u6m0.charlton.irccloud.com)
[17:02:31] *** Quits: Rym_ (y@moz-232.ad4.144.109.IP) (Ping timeout: 121 seconds)
[17:03:24] *** Quits: Jesin (Jesin@moz-q46lj1.fios.verizon.net) (Quit: Leaving)
[17:05:18] *** Quits: nwin (textual@moz-he7c2m.pools.vodafone-ip.de) (Quit: Textual IRC Client: www.textualapp.com)
[17:05:59] *** Joins: Jesin (Jesin@moz-q46lj1.fios.verizon.net)
[17:06:24] *** Quits: Jesin (Jesin@moz-q46lj1.fios.verizon.net) (Quit: Leaving)
[17:06:33] *** Joins: edwardw_ (edwardw@moz-kpn.qvl.235.64.IP)
[17:08:01] *** Joins: Sindriava (textual@moz-vae.377.103.88.IP)
[17:10:00] *** Quits: edwardw (edwardw@moz-vvv.4aq.34.174.IP) (Ping timeout: 121 seconds)
[17:11:42] <arrrrrrr1> aturon: don't worry. I'm already writing the RFC
[17:11:50] <aturon> arrrrrrr1: great, thanks
[17:13:31] *** Joins: Jesin (Jesin@moz-q46lj1.fios.verizon.net)
[17:14:14] <cgaebel> Gankro: how does iuk ("int unknown") instead of i32 sound?
[17:14:22] <cgaebel> pronounced "i-yuck"
[17:14:40] <WindowsBunny> Gankro: What's this proposal I hear of?
[17:14:41] <cgaebel> oh wait that's a little faux pas for floats
[17:14:56] <cgaebel> lol
[17:15:10] <aturon> haha
[17:15:18] <Manishearth> cgaebel: yuck
[17:15:28] <Manishearth> pahaha
[17:15:32] <Gankro> WindowsBunny: http://internals.rust-lang.org/t/better-support-incremental-development-through-semantic-aliases/1717
[17:15:52] <Gankro> cgaebel: lmao
[17:16:21] *** Quits: mystor (mystor@moz-vpa.r78.15.130.IP) (Connection closed)
[17:16:53] <WindowsBunny> Gankro: neat
[17:16:54] <Gankro> new RFC: alias various swears to different types. let x: fuck = 0; let y: uggghhh = 2.0;
[17:18:07] <WindowsBunny> Gankro: I'd rather have int be used for generic integer constants
[17:18:08] <cgaebel> "uki" and "ukf" work
[17:18:21] <cgaebel> uky still sounds like yucky
[17:18:31] <cgaebel> and ukf is weird enough that people will look at you funny if you use it in production code
[17:18:51] <cgaebel> and although it doesn't start with an `i` or `f`, maybe people will understand why we did that ;)
[17:19:22] <WindowsBunny> fuk for floating unknown?
[17:19:27] <Gankro> cgaebel: it's not super... clear. If I see `int` it's obvious that it's some kind of integer
[17:19:30] <WindowsBunny> let x: fuk = 5.0;
[17:20:09] <cgaebel> Gankro: well it'd be a stdlib type. Hopefully people will realize what it is once it ends up in stdlib.
[17:20:37] <cgaebel> it only takes one "what's that" before someone learns :/
[17:20:52] <Manishearth> 22:48 < Manishearth> jdm: yes it does
[17:20:56] <Manishearth> whoops
[17:21:01] <cgaebel> and I really want it to look "out of place", although I do sympathize with not wanting to type a lot while prototyping
[17:21:05] <Gankro> cgaebel: Yeeeaaah...
[17:21:35] <cgaebel> I don't want the standard rust advice to be "you know that `int` type you know and love in C? Yeah don't use that in production code."
[17:21:54] <Gankro> Definitely sympathize with that
[17:22:12] *** Joins: munksgaard (munksgaard@moz-1f0.hq0.225.130.IP)
[17:22:12] <Gankro> Although I think that's also general advice for more modern C/C++ practices :)
[17:22:18] <cgaebel> meh not necessarily
[17:22:30] <cgaebel> the llvm codebase is basically all typed as `unsigned`
[17:22:31] <cgaebel> :P
[17:22:33] *** Joins: mystor (mystor@moz-vpa.r78.15.130.IP)
[17:22:56] <Gankro> cgaebel: Academic code put into production? Sounds like a nightmare codebase.
[17:25:10] *** japaric is now known as japaric|afk
[17:25:55] *** Joins: zmack (zmack@moz-b26i0b.home.aster.pl)
[17:27:31] *** jdm is now known as jdm|away
[17:27:33] *** Quits: summerlight_ (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[17:28:25] *** Quits: pcwalton (pcwalton@moz-u92.384.6.71.IP) (Connection closed)
[17:28:33] *** Joins: pcwalton (pcwalton@moz-u92.384.6.71.IP)
[17:28:34] *** ChanServ sets mode: +o pcwalton
[17:29:53] *** Joins: hoverbear (hoverbear@moz-1opgd3.wireless.uvic.ca)
[17:31:18] *** Quits: laumann (thomas@moz-fso.hq0.225.130.IP) (Ping timeout: 121 seconds)
[17:32:37] *** Quits: pcwalton (pcwalton@moz-u92.384.6.71.IP) (Ping timeout: 121 seconds)
[17:32:50] <Gankro> cgaebel: Any thoughts on the rest of the proposal (int stuff is only 1/3)
[17:33:56] <cgaebel> honestly I'd prefer people to explicitly match on options and panic on none themself, and `unwrap` of today turns into the `todo` of tomorrow, with the stub assertations warning and everything.
[17:34:18] <cgaebel> unwrap is waaay overused because it's so easy to use
[17:34:51] <cgaebel> I think the _todo part can just be a convention instead of a compiler-enforced rule
[17:34:55] <cgaebel> people should just do that, it's a good suggestion
[17:35:07] <carllerche> cgaebel: +1
[17:35:44] <carllerche> though it is helpful for examples and quick hacking
[17:36:14] *** Quits: mystor (mystor@moz-vpa.r78.15.130.IP) (Connection closed)
[17:36:15] <carllerche> and tests
[17:36:22] <cgaebel> what I've found works well is wrapping examples in a function that returns Result<(), ()>, and then just unwrapping the result of calling that function
[17:36:25] <cgaebel> and yeah it's great for tests
[17:36:29] <cgaebel> maybe allow it in tests
[17:36:33] <cgaebel> just outright
[17:36:34] *** Joins: mystor (mystor@moz-vpa.r78.15.130.IP)
[17:36:52] <cgaebel> my little Result<(), ()> trick adds like, 5 lines of code to examples though
[17:36:55] <cgaebel> and might be a little heavyweight
[17:37:03] <cgaebel> but it sets a "good example" in the example ;)
[17:37:22] *** Joins: Rym_ (y@moz-232.ad4.144.109.IP)
[17:38:24] *** Joins: killercup (killercup@moz-edmf2j.dip0.t-ipconnect.de)
[17:38:38] <simukis> acrichto: since thread on pthread got lost
[17:39:44] <simukis> yes, I believe it would not be too hard to note the beginning of stack because we both control the entrypoint and the whole process.
[17:40:32] <acrichto> simukis: how do we know the size of the main stack though?
[17:41:21] <simukis> for linux at least a thread_info struct is on the bottom of the stack
[17:41:53] *** Quits: Rym_ (y@moz-232.ad4.144.109.IP) (Ping timeout: 121 seconds)
[17:41:55] <acrichto> makes sense
[17:42:07] <acrichto> that issue about a not-mounted proc is pretty worrying to me
[17:42:12] <acrichto> I have no idea how much we're implicitly relying on it
[17:42:12] <WindowsBunny> cgaebel: I'd love it if tests could return Result
[17:42:32] *** Quits: mystor (mystor@moz-vpa.r78.15.130.IP) (Ping timeout: 121 seconds)
[17:42:41] *** Quits: japaric|afk (japaric@moz-hpu.6fl.64.181.IP) (Ping timeout: 121 seconds)
[17:43:04] <Gankro> cgaebel: I've seen a fair amount of places where `unwrap` is warranted. Usually where some kind of invariant guarantees that x and y are co-available.
[17:43:09] <simukis> acrichto: easy way to check would be run an empty binary under strace and see what syscalls are made
[17:43:18] *** Joins: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net)
[17:43:19] *** ChanServ sets mode: +o pcwalton
[17:43:29] <cgaebel> Gankro: me too. But it's easily replaced with a match and a panic
[17:43:35] <cgaebel> and imo is more explicit that "yes, I want failure here."
[17:43:45] <Gankro> cgaebel: Seems needlessly verbose
[17:44:23] <cgaebel> one persons needlessly verbose is another person's "one should stop and think when reading this code"
[17:45:02] <Gankro> Although I've definitely done match (x, y) { (Some, Some) => { stuff }, (None, None) => { nop }, _ => unreachable!() }
[17:45:20] <simukis> readlink("/etc/je_malloc.conf", 0x7fffdccba080, 4096) oh lol
[17:45:21] <acrichto> simukis: right, good point
[17:45:21] *** Joins: xiongmao86 (xiongmao86@moz-81o.bge.23.116.IP)
[17:45:24] *** Quits: xiongmao86 (xiongmao86@moz-81o.bge.23.116.IP) (Quit: Leaving)
[17:45:46] <simukis> acrichto: in addition to proc, we also rely on sysfs being mounted too
[17:45:53] <WindowsBunny> simukis: jemalloc actually tries to read a config file? :|
[17:46:01] <simukis> WindowsBunny: yeah
[17:46:19] * WindowsBunny cries
[17:46:21] <acrichto> simukis: hm, where's that coming from?
[17:46:27] <cgaebel> I'm of the mind that one should rarely be unwrapping options (and panicing in general, actually)
[17:46:41] <cgaebel> when people do it, they're usually wrong about doing it
[17:46:54] <cgaebel> so I don't think making people type "panic!" is a bad thing
[17:46:55] <WindowsBunny> cgaebel: I only unwrap and panic in tests and examples
[17:47:00] <simukis> acrichto: before reading /proc/self/maps we also read /sys/devices/system/cpu/online
[17:47:03] <cgaebel> because it'll make them stop and think about if a panic is needed.
[17:47:09] <simukis> I suppose for some form of cpu_count inside the codebase
[17:47:15] <acrichto> simukis: yeah but what's causing that?
[17:47:15] <cgaebel> WindowsBunny: me too, and I've started doing it less in examples.
[17:47:24] <cgaebel> WindowsBunny: since it sets a bad "example" ;)
[17:47:27] <WindowsBunny> cgaebel: True
[17:47:32] <simukis> acrichto: lemme see
[17:48:48] <cgaebel> heh what about a 128-bit number for `ukf` and `uki`?
[17:48:54] <cgaebel> punish people's performance for not thinking about size :PP
[17:49:42] <Gankro> cgaebel: I wouldn't be particularly opposed
[17:49:43] <WindowsBunny> cgaebel: And then we get even more posts on reddit about rust is slower than _
[17:50:01] <cgaebel> yeah I'm not actually going to advocate that
[17:50:04] <cgaebel> it's just needlessly mean
[17:50:18] <cgaebel> as long as it's not easier to type than u64.. we should be good
[17:50:32] <Gankro> WindowsBunny: In my proposal it would lead to the compilr vomiting tons of warnings
[17:51:05] <WindowsBunny> Gankro: Okay, so we get tons of posts on reddit about how rust is useless because it spams you with warnings :P
[17:51:13] <simukis> acrichto: https://gist.github.com/nagisa/22c6c32359660bada704. Well, since it is coming from malloc, I believe we can trust them to handle non-sysfs case fine.
[17:51:26] <WindowsBunny> Gankro: I'd only support your proposal if you first landed a change to merge similar warnings
[17:51:46] <Gankro> WindowsBunny: What similar warnings?
[17:52:06] <acrichto> simukis: hm, looks like more jemalloc stuf fyeah
[17:52:16] <brson> steveklabnik: there are probably some good lessons in 'a swift guide to rust'. i really liked the examples of fighting the borrowchecker
[17:52:31] <brson> we should run a contest for stories of fighting the borrow checker and turn it into a book
[17:52:51] <WindowsBunny> Gankro: Like suppose I do a hundred things using some unstable feature, and I get a hundred warnings, those hundred warnings should coalesce into one big  warning with a quick list of the hundred points where it occurs
[17:53:03] <Gankro> ohh
[17:53:05] <Gankro> Ok
[17:53:17] <acrichto> Manishearth: btw the rollup doesn't have many important things and I'd like to land I/O stabilization ASAP so we may not want to force the rollup to the top right now
[17:53:35] <WindowsBunny> Gankro: You get that implemented and I'll support whatever warning spam you want to implement :D
[17:53:50] <Gankro> WindowsBunny: In all honesty I expect most would just allow(stub_*) in dev; but you'd only know to do that after the compiler wagged its finger at you
[17:54:42] <Gankro> And then we enter meta lints of allow(allow_stub_in_release)
[17:54:56] <WindowsBunny> Gankro: If I want to fix all those warnings, I have to scroll through all that massive warning output
[17:55:08] <brson> bstrie: have you been able to use the sf community space?
[17:55:35] <WindowsBunny> Gankro: sometimes I have a hard time seeing errors inside that warning spam
[17:55:39] *** jdm|away is now known as jdm
[17:55:49] <Gankro> WindowsBunny: Definitely. Do you know of any compilers that coalesce like that?
[17:56:05] <WindowsBunny> Gankro: Not yet
[17:58:36] <Manishearth> acrichto: no problem, feel free to force
[17:58:48] <acrichto> Manishearth: oh nah it's fine, just for future bounces :)
[17:58:59] <Manishearth> WindowsBunny: can you run stdtest locally?
[17:59:11] <Manishearth> for the rollup, I mean
[18:00:45] <brson> acrichto: does rustdoc source doc tests from upstream crate metadata in the case of macros? I was seeing a situation where std doctests were testing the write! macro from core
[18:01:12] <brson> i think i've sorted out the inability to write crate macros in doc tests
[18:01:19] <acrichto> brson: hm, I suspect that the method of inlining macros may cause docs to be duplicated
[18:01:25] <acrichto> in which case we may test twice yeah
[18:01:36] *** Joins: avikpal (avikpal@moz-nn8.cvs.194.117.IP)
[18:01:45] <WindowsBunny> Manishearth: maybe
[18:01:52] *** Quits: eerie_ (eerie@moz-nbbdu3.red.bezeqint.net) (Connection closed)
[18:02:53] *** Joins: avikpal_ (avikpal@moz-nn8.cvs.194.117.IP)
[18:03:05] *** Quits: avikpal (avikpal@moz-nn8.cvs.194.117.IP) (Connection closed)
[18:04:33] <Manishearth> WindowsBunny: thx
[18:05:26] *** Joins: summerlight_ (summerlight@moz-99k.2mj.130.121.IP)
[18:06:29] <simukis> acrichto: err, actually inspecting thread_info is not viable
[18:06:48] <steveklabnik> brson: yeah, i really liked reading it a lot
[18:07:02] *** Quits: jevin (jevin@moz-sra.ovp.12.72.IP) (Quit: Textual IRC Client: www.textualapp.com)
[18:07:41] *** Quits: larhat (Adium@moz-8v4.af0.232.213.IP) (Quit: Leaving.)
[18:07:50] <acrichto> simukis: :(
[18:08:11] <simukis> it is an implementation detail and likely is specific to kernel version
[18:09:41] *** Quits: summerlight_ (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[18:14:21] *** Quits: munksgaard (munksgaard@moz-1f0.hq0.225.130.IP) (Ping timeout: 121 seconds)
[18:15:13] <simukis> aturon: it is bad when software runs too fast for some 😃
[18:15:29] <simukis> I even heard of people adding for loops to slow the software down 😃
[18:16:44] <aturon> simukis: hahaha, so the argument then becomes: we should panic in case this would make your code run faster than you wanted? :)
[18:17:32] *** Joins: munksgaard (munksgaard@moz-1f0.hq0.225.130.IP)
[18:17:36] *** Joins: eerie (eerie@moz-nbbdu3.red.bezeqint.net)
[18:17:48] <acrichto> I think we should set the system clock backwards by the specified duration
[18:17:55] <acrichto> if it's a negative duration
[18:17:58] <aturon> acrichto: perfect!
[18:18:05] <acrichto> and re-spec the function as "wait until the system clock matches now() + duration"
[18:18:08] <aturon> lol
[18:18:55] <WindowsBunny> Are we discussing Sleep?
[18:19:02] *** Quits: hoverbear (hoverbear@moz-1opgd3.wireless.uvic.ca) (Quit: Time to hibernate.... ZzZz...)
[18:19:12] <simukis> anyway, I’m more concerned about how outlier handling mismatches
[18:19:40] <simukis> actually, we probably should just do double loop in chunks of 10⁹ nanos
[18:20:42] <acrichto> simukis: hm I haven't given this much thought yet, where are you getting the number 10^9 from?
[18:20:53] <simukis> acrichto: man page for nanosleep
[18:21:00] <acrichto> WindowsBunny: yeah, and actually a question for you, so right now it's using just plain old Sleep on windows, but that has the resolution in milliseconds
[18:21:13] <acrichto> WindowsBunny: simukis pointed out a separate API where you create a timer object and can have a higher resolution
[18:21:21] <simukis> EINVAL The rqtp argument specified a nanosecond value less than zero or greater than or equal to 1000 million.
[18:21:32] <acrichto> WindowsBunny: so I'm curious, is that a super cheap operation? e.g. is that roughly equivalent to just calling Sleep?
[18:21:36] <acrichto> (I fear the answer is no)
[18:21:49] *** Joins: jevin (jevin@moz-sra.ovp.12.72.IP)
[18:22:03] <acrichto> simukis: yeah I was tripped up by that as well, but note that it's just the annosecond field of rqtp
[18:22:07] <acrichto> simukis: not the tv_sec field
[18:22:15] <acrichto> e.g. you can indeed use nanosleep to sleep for more than 1s
[18:22:37] <WindowsBunny> acrichto: I don't see why we wouldn't just call Sleep
[18:22:39] <acrichto> simukis: I interpret that as saying that tv_nsec may not specify more nanoseconds than are in a second
[18:22:43] <eddyb> hmm
[18:22:49] <simukis> oh!
[18:22:51] <simukis> makes sense.
[18:22:58] <eddyb> when did we switch back to desugaring DocComment? http://is.gd/d5VYnp
[18:23:11] <acrichto> simukis: I spent 30 minutes googling around before realizing that mistake as well :P
[18:23:14] <acrichto> WindowsBunny: ok!
[18:23:15] <eddyb> it does make it very nice to work with doc comments in macros :D
[18:23:20] <WindowsBunny> acrichto: Actually
[18:23:23] <WindowsBunny> we could abuse NtDelayExecution
[18:23:39] <acrichto> isn't using the Nt* apis a big nono?
[18:23:46] <acrichto> I forget what those are intended for...
[18:24:13] <WindowsBunny> acrichto: Well, they don't have the heavy guarantees of stability of win32
[18:24:36] <WindowsBunny> but  NtDelayExecution is a very simple API and provides 100ns resolution
[18:24:53] <acrichto> WindowsBunny: yeah that's what I thought, we could perhaps move to that API if necessary but it probably shouldn't be the first Nt* api we call
[18:25:05] <acrichto> thankfully it's just an implementation detail!
[18:25:39] <simukis> the thing is that windows will sleep at least 16ms anyway
[18:25:45] <simukis> at least to my knowledge
[18:25:47] <WindowsBunny> Actually
[18:25:52] <WindowsBunny> I wonder how precise I can sleep with NtDelayExecution
[18:25:53] <simukis> unless you provide it a different timer
[18:25:57] <WindowsBunny> I'm gonna run some tests :D
[18:28:39] *** Joins: Sindriav_ (textual@moz-vae.377.103.88.IP)
[18:28:40] *** Quits: Sindriava (textual@moz-vae.377.103.88.IP) (Connection closed)
[18:28:55] *** Quits: Guest63 (textual@moz-qfs.570.70.83.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[18:29:13] *** Quits: ytain (ytain@moz-a0pap1.dsl.teksavvy.com) (Quit: Textual IRC Client: www.textualapp.com)
[18:29:28] *** Quits: eerie (eerie@moz-nbbdu3.red.bezeqint.net) (Connection closed)
[18:29:48] *** Joins: ytain (ytain@moz-a0pap1.dsl.teksavvy.com)
[18:31:32] *** Joins: Rym_ (y@moz-232.ad4.144.109.IP)
[18:35:29] * WindowsBunny adds his first ntdll function to ntdll-sys
[18:36:04] *** Quits: Rym_ (y@moz-232.ad4.144.109.IP) (Ping timeout: 121 seconds)
[18:36:27] <arrrrrrr1> aturon: acrichto: https://github.com/rust-lang/rfcs/pull/973
[18:37:27] <brson> nmatsakis: when do you think we might ininiate a 'final call' for rfc's. this is a simple idea that i like and can start including in twir this weekend. do you have a list of rfc's you consider to be in 'final call'?
[18:39:25] <aturon> arrrrrrr1: thanks!
[18:41:00] <Zoxc> WindowsBunny: Why ntdll? =P
[18:41:20] <WindowsBunny> Zoxc: Do you know of a function that wraps NtDelayExecution?
[18:41:55] <Zoxc> The question is, why do you need to use the unsupported function NtDelayExecution? :)
[18:42:11] <WindowsBunny> Zoxc: Because it provides sleep resolution higher than 1ms!
[18:42:13] <WindowsBunny> theoretically
[18:42:21] <WindowsBunny> or rather, smaller than 1ms
[18:43:29] <Zoxc> So much for power efficiency =P
[18:43:57] <WindowsBunny> Zoxc: The actual precision you get is entirely implementation dependent, but at least we can say we tried
[18:44:23] <Zoxc> You shouldn't try at the ntdll level =P
[18:45:52] <WindowsBunny> Zoxc: That's why I'm looking for an alternative in win32
[18:46:11] <arrrrrrr1> who decided to use discourse for internals?
[18:46:12] *** Quits: semarie (semarie@moz-pampba.piraten-nds.de) (A TLS packet with unexpected length was received.)
[18:46:22] *** Quits: Sindriav_ (textual@moz-vae.377.103.88.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[18:46:29] <Zoxc> WindowsBunny: By writing a ntdll interface? =P
[18:46:32] <arrrrrrr1> Where is the right place to complain about that? Should I just open a thread in internals?
[18:46:48] <WindowsBunny> Zoxc: Well what's wrong with calling functions directly from ntdll?
[18:46:55] <WindowsBunny> arrrrrrr1: yeah
[18:47:40] <Zoxc> WindowsBunny: They not being stable, supported or documented? =P
[18:49:17] *** Joins: semarie (semarie@moz-eugg57.redstation.co.uk)
[18:54:54] <arrrrrrr1> simukis: are you going to write an RFC for better error handling for chars, lines, etc?
[18:56:43] <WindowsBunny> Zoxc: Oh hey, this actually works
[18:56:47] <WindowsBunny> I get fucking precise sleeps
[18:57:10] <Zoxc> But the devil owns your soul now!
[18:57:11] <simukis> arrrrrrr1: nope, too lazy.
[18:57:23] <arrrrrrr1> simukis: mate, I can't write all these RFCs
[18:57:52] <arrrrrrr1> WindowsBunny: meanwhile std::thread::sleep only has ms precision
[18:58:05] <WindowsBunny> Zoxc: And by that I mean half a millisecond :D
[18:58:11] <WindowsBunny> Which.... isn't much
[18:58:12] <arrrrrrr1> "half a millisecond"
[18:58:14] <arrrrrrr1> lol
[18:58:19] <WindowsBunny> Okay, fuck this
[18:58:22] <Zoxc> No sleep for the CPUs
[18:58:23] <WindowsBunny> acrichto: Just use Sleep
[18:58:27] <arrrrrrr1> I was expecting nanosecond precision here
[18:58:28] *** Joins: avikpal (avikpal@moz-dbc.p8t.194.117.IP)
[18:58:52] <acrichto> WindowsBunny: alright then!
[18:59:02] <WindowsBunny> acrichto: And in my testing Sleep is about 1ms precise anyway
[18:59:12] <Zoxc> WindowsBunny: Busy loop with performance counters =P
[18:59:16] *** Quits: semarie (semarie@moz-eugg57.redstation.co.uk) (A TLS packet with unexpected length was received.)
[18:59:21] <WindowsBunny> Zoxc: Yeah :P
[18:59:22] <arrrrrrr1> well, maybe the stdlib can't have more precise sleep than 1ms because that's not cross-platform
[18:59:29] *** Joins: semarie (semarie@moz-kvs6fc.torservers.net)
[18:59:43] <WindowsBunny> acrichto: Also, please use SleepEx and set alertable to true
[18:59:51] *** Quits: avikpal_ (avikpal@moz-nn8.cvs.194.117.IP) (Ping timeout: 121 seconds)
[18:59:55] *** Joins: eerie (eerie@moz-nbbdu3.red.bezeqint.net)
[18:59:58] <simukis> WindowsBunny: nope, we ignore signals for unix
[18:59:58] <acrichto> WindowsBunny: how come?
[19:00:06] <WindowsBunny> acrichto: That way APCs can fire while the thread is sleeping
[19:00:08] <simukis> we’ll ignore alerts for windows too
[19:00:28] <acrichto> WindowsBunny: APCs?
[19:00:34] *** Joins: nrc|afk (nrc|afk@moz-4bhi2i.xtra.co.nz)
[19:00:36] <WindowsBunny> acrichto: Where an APC is an asynchronous callback that can be queued by the user or due to async IO
[19:00:55] <simukis> WindowsBunny: what happens to the sleep when APC fires?
[19:01:31] <WindowsBunny> simukis: Um, hmmm
[19:01:57] <simukis> ah of course
[19:02:08] <simukis> it terminates prematurely returning some value
[19:02:09] <WindowsBunny> simukis: I never tested that case :P
[19:02:41] <acrichto> that seems... odd?
[19:02:42] <simukis> which means it would be functionally inconsistent with the unix’s sleep which ignores the signals
[19:03:11] <simukis> acrichto: https://msdn.microsoft.com/en-us/library/windows/desktop/ms686307(v=vs.85).aspx read Return value section
[19:03:32] <simukis> or actually just the first paragraph on that page is enough
[19:04:14] <Zoxc> If you want to Sleep, you usually don't need APCs
[19:04:22] *** Joins: sigma1 (sigma@moz-ohog4c.range86-135.btcentralplus.com)
[19:04:26] <acrichto> I know very little about this form of I/O in windows
[19:04:40] <acrichto> as in what's the purpose of this alertable parameter?
[19:04:50] <acrichto> is this an indication that some other I/O function should be called to get the result?
[19:04:53] <WindowsBunny> Really it's just that I don't want people to have to replace all their sleep calls with alertable sleeps when they start using async io on windows
[19:05:06] <WindowsBunny> acrichto: It means that async callbacks can fire while you're sleeping
[19:05:15] <acrichto> what does that even mean?
[19:05:16] <Zoxc> There should be no sleep calls with async IO =P
[19:05:17] <WindowsBunny> If you never did any async io, there would be no callbacks to fire
[19:05:23] <simukis> Zoxc: lol
[19:05:31] <acrichto> WindowsBunny: what does it mean for a callback to fire?
[19:05:40] <acrichto> WindowsBunny: does the kernel take over my thread on some separate stack to call some function?
[19:05:54] <WindowsBunny> acrichto: It just uses the top of your stack
[19:06:06] <WindowsBunny> acrichto: and it takes over your thread to execute your callback
[19:06:07] <simukis> and of course cancels the sleep before that
[19:06:26] <acrichto> how can it cancel a sleep
[19:06:27] <acrichto> and run a callback
[19:06:29] <simukis> basically an equivalent of unix’s signal handler.
[19:06:30] <acrichto> on the same thread?
[19:06:31] <WindowsBunny> Hold on, lemme actually test
[19:06:42] <acrichto> so it runs the callback, *then* cancels the sleep?
[19:06:48] <Zoxc> acrichto: Yes
[19:06:48] <WindowsBunny> acrichto: yeah
[19:06:49] *** Quits: sigma (sigma@moz-a5u.m43.48.37.IP) (Ping timeout: 121 seconds)
[19:06:49] <WindowsBunny> probably
[19:06:54] <simukis> I believe the sleep is calcelled and then callback is ran
[19:07:14] <simukis> and then execution is returned to the after-the-sleep.
[19:07:51] <WindowsBunny> Just tested, and if there is an APC it stops sleeping
[19:08:03] <WindowsBunny> it takes care of any APCs, and then resumes execution post-sleep
[19:09:15] <simukis> WindowsBunny: does the sleep, perhaps return the time it still had to sleep?
[19:09:36] <WindowsBunny> The return value is WAIT_IO_COMPLETION
[19:09:44] <simukis> this is for i/o completion event
[19:09:54] <simukis> s/event/callback
[19:10:52] <simukis> either way, we’d have to make unix sleep to not ignore signals either if we do this, acrichto
[19:10:53] <WindowsBunny> You can play around with APCs and alertable sleep using wio if you want
[19:11:00] <WindowsBunny> wio::apc::queue_apc_current
[19:11:16] *** Joins: srh (User@moz-gk35n7.hfc.comcastbusiness.net)
[19:12:03] <simukis> WindowsBunny: no, I don’t. I only have a window VM that’s on my university server, which has eye-popping disk limits that aren’t even enough to get a binary copy of LLVM into it
[19:12:10] <WindowsBunny> xD
[19:12:24] <WindowsBunny> That's horrifying
[19:12:31] <simukis> I should really make them give more of that space
[19:14:28] *** Joins: japaric|afk (japaric@moz-hpu.6fl.64.181.IP)
[19:14:57] *** Quits: ytain (ytain@moz-a0pap1.dsl.teksavvy.com) (Quit: Textual IRC Client: www.textualapp.com)
[19:16:16] <WindowsBunny> Meh, I'm fine with just having Sleep in libstd
[19:16:26] <WindowsBunny> while people doing async io should specifically use an alertable sleep
[19:16:33] <WindowsBunny> We just need to sufficiently warn them about it
[19:16:34] *** Joins: ytain (ytain@moz-a0pap1.dsl.teksavvy.com)
[19:16:47] *** Quits: munksgaard (munksgaard@moz-1f0.hq0.225.130.IP) (Ping timeout: 121 seconds)
[19:17:58] *** Quits: zmack (zmack@moz-b26i0b.home.aster.pl) (Connection closed)
[19:18:46] <simukis> so that message about unix behaviour could be generailsed to “This sleep function will suspend the thread for full duration regardless of any signals (on UNIX) or alerts (on Windows) that the process receives” or something like that.
[19:18:49] <arrrrrrr1> rusti: let str = "test";
[19:18:51] -playbot- ()
[19:18:52] <arrrrrrr1> wat
[19:18:57] <arrrrrrr1> rusti: let u8 = 1;
[19:18:58] -playbot- ()
[19:19:17] <simukis> there’s value-space and type-space
[19:19:19] <arrrrrrr1> I'm not sure if I agree with that.
[19:19:34] <arrrrrrr1> that doesn't make for nice highlighting
[19:19:36] <WindowsBunny> simukis: Not regardless, but that signal callbacks and APCs won't even fire during the sleep
[19:20:19] <simukis> which is what you’d expect from the thread sleeping for the full duration, no?
[19:20:27] <WindowsBunny> No?
[19:20:44] <WindowsBunny> Because you could have a sleep where that stuff can fire, but it'll still sleep for the full duration
[19:21:21] <simukis> oh well, interestingly unix behaviour currently does indeed execute signal handlers mid-sleep
[19:21:39] <WindowsBunny> Well then
[19:21:53] <WindowsBunny> simukis: Do they terminate the sleep early?
[19:22:01] <WindowsBunny> or does it keep sleeping post handler?
[19:22:18] <simukis> nope, that’s handled specifically by us by looping until we sleep the full duration
[19:22:29] <simukis> so yeah, sleeps post handler.
[19:22:47] <simukis> could be implemented for windows as well, if it did return the time left to sleep on alert.
[19:24:05] <WindowsBunny> We'd have to use a clock to find out how long we slept
[19:24:07] <WindowsBunny> and sleep the rest
[19:25:42] *** Joins: Rym_ (y@moz-232.ad4.144.109.IP)
[19:25:57] *** Quits: edwardw_ (edwardw@moz-kpn.qvl.235.64.IP) (Quit: Leaving...)
[19:26:08] <simukis> (or check whether there’s altAPIs that return the time left to sleep)
[19:27:01] *** Joins: Guest63 (textual@moz-56c.qli.61.176.IP)
[19:27:22] <Zoxc> Is the src button on the docs broken?
[19:27:53] <simukis> yes.
[19:28:03] <simukis> there’s an issue on github too
[19:28:08] *** Quits: japaric|afk (japaric@moz-hpu.6fl.64.181.IP) (Connection closed)
[19:28:58] *** Joins: japaric|afk (japaric@moz-pud.upl.232.190.IP)
[19:30:10] *** Joins: eerie_ (eerie@moz-nbbdu3.red.bezeqint.net)
[19:32:19] *** Quits: Rym_ (y@moz-232.ad4.144.109.IP) (Ping timeout: 121 seconds)
[19:33:00] *** Quits: eerie (eerie@moz-nbbdu3.red.bezeqint.net) (Ping timeout: 121 seconds)
[19:37:52] <arrrrrrr1> why does `lines` take `self` by value?
[19:38:40] <arrrrrrr1> the same is true for `bytes`
[19:39:07] *** Joins: laumann (thomas@moz-n9e72h.0.fullrate.dk)
[19:39:09] <eddyb> arrrrrrr1: on what, &str?
[19:39:18] <arrrrrrr1> eddyb: no, BufReadExt
[19:39:21] <arrrrrrr1> and ReadExt
[19:39:31] <eddyb> arrrrrrr1: yeah, that's normal
[19:39:37] <arrrrrrr1> why not &mut self?
[19:39:44] <eddyb> because you can add the &mut yourself
[19:39:50] <bluss> arrrrrrr1: you can do that too with .by_ref()
[19:39:54] <arrrrrrr1> eddyb: ah, right. that makes sense
[19:39:57] <eddyb> bluss: not that you need to
[19:40:07] <arrrrrrr1> (&mut r).lines()
[19:40:08] <eddyb> actually, by_ref might be gone
[19:40:13] <bluss> maybe don't need that in modern Rust
[19:40:19] <bluss> aha
[19:40:23] <arrrrrrr1> not sure if that would work
[19:40:36] <eddyb> arrrrrrr1: it's more flexible that way, since you can return an adaptor that wraps a File, for example
[19:40:51] <arrrrrrr1> eddyb: yo
[19:41:09] <arrrrrrr1> eddyb: didn't realize that Read and friends were implemented for &mut Read
[19:41:13] <bluss> .by_ref is actually still present
[19:41:24] <bluss> but without wrapper structs now
[19:47:38] *** Quits: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP) (Quit: Leaving)
[19:50:19] <simukis> aturon: I remember complaining once about struct being unstable but trait impl for that struct being stable. Remind me, why do you do that?
[19:52:25] <arrrrrrr1> simukis: aturon: acrichto: https://github.com/rust-lang/rfcs/pull/974
[19:53:18] <simukis> aturon also there’s impl Iterator for StepBy<A, RangeFrom<A>> and StepBy<A, ::ops::Range<A>>, but not StepBy<A, RangeTo<A>>…?
[19:53:43] <arrrrrrr1> simukis: you cannot store the current position in a RangeTo
[19:54:06] <arrrrrrr1> simukis: same reason you cannot iter over (..N), (N..)
[19:54:11] <arrrrrrr1> well, maybe (N..) would work
[19:54:45] <simukis> but, but, vec[(..10).step_by(2)] would be so awesome!
[19:54:52] <arrrrrrr1> sucks, eh?
[19:54:57] <arrrrrrr1> just write (0..10)
[19:55:46] *** Joins: munksgaard (munksgaard@moz-urnkl5.u.parknet.dk)
[19:56:08] <simukis> oh, I’m, as always, just showing how melted down my control station is 😃
[19:59:56] *** Joins: Sindriava (textual@moz-vae.377.103.88.IP)
[20:00:18] *** Joins: eerie (eerie@moz-nbbdu3.red.bezeqint.net)
[20:01:42] *** Quits: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net) (Client exited)
[20:02:17] *** Joins: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net)
[20:02:17] *** ChanServ sets mode: +o pcwalton
[20:03:16] *** Quits: eerie_ (eerie@moz-nbbdu3.red.bezeqint.net) (Ping timeout: 121 seconds)
[20:05:41] *** Quits: Guest63 (textual@moz-56c.qli.61.176.IP) (Connection closed)
[20:05:53] *** Joins: Guest63 (textual@moz-56c.qli.61.176.IP)
[20:06:22] <arrrrrrr1> >I am sorry to report, one of the big annoyances of Rust is dealing with these long impenetrable novels the compiler writes us about what is wrong with our code. Where do we even start?
[20:06:24] <arrrrrrr1> hear hear
[20:07:01] *** Joins: hoverbear (hoverbear@moz-a97.b2m.54.96.IP)
[20:07:07] *** Joins: srh_ (User@moz-gk35n7.hfc.comcastbusiness.net)
[20:07:09] <arrrrrrr1> there are two big problems with rust error handling:
[20:07:15] <arrrrrrr1> s/handling/output/
[20:07:29] <arrrrrrr1> 1. You cannot tell the compiler only to output 2 instead of 2000 error messages
[20:07:44] <arrrrrrr1> 2. You cannot tell the compiler to please not write 15 lines per error message
[20:08:19] *** Quits: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net) (Ping timeout: 121 seconds)
[20:08:30] *** Quits: Gankro (uid71432@moz-sc2bd6.charlton.irccloud.com) (Quit: Connection closed for inactivity)
[20:10:51] *** Quits: srh (User@moz-gk35n7.hfc.comcastbusiness.net) (Ping timeout: 121 seconds)
[20:11:00] <arrrrrrr1> simukis: you don't really have to move out of self.errout
[20:11:19] <arrrrrrr1> Some(ref mut errout) = self.errout
[20:11:22] <simukis> we also have an issue of outputing multiple errors for the same one.
[20:12:07] <simukis> arrrrrrr1: IMO this has some subtle differences
[20:12:24] <arrrrrrr1> simukis: sure, I think mine is better
[20:12:42] *** Quits: japaric|afk (japaric@moz-pud.upl.232.190.IP) (Ping timeout: 121 seconds)
[20:13:06] <simukis> my version will only report the first error, while your’s would update error multiple times. The thing is that AFAIK calling next after it has returned None is unspecified
[20:13:20] <arrrrrrr1> "unspecified" sounds scary
[20:13:34] <arrrrrrr1> simukis: that's what I was thinking about too and I think it should report the last error
[20:13:51] <simukis> as in iterator can behave as it pleases. It might not keep returning None, for example
[20:13:55] <simukis> like in this case.
[20:14:07] <arrrrrrr1> might not be so bad
[20:14:29] *** Joins: evanfarrar (evanfarrar@moz-56vd31.res.rr.com)
[20:16:36] *** Quits: evanfarrar (evanfarrar@moz-56vd31.res.rr.com) (Connection closed)
[20:17:28] *** Joins: kmcguire_ (kmcguire@moz-pg1gb9.biz.rr.com)
[20:19:26] *** Joins: evanfarrar (evanfarrar@moz-56vd31.res.rr.com)
[20:19:27] <arrrrrrr1> simukis: how about this: https://gist.github.com/anonymous/32c08bfdff021aaf0b30
[20:20:26] *** Quits: evanfarrar (evanfarrar@moz-56vd31.res.rr.com) (Connection closed)
[20:20:31] <simukis> oh, that’s an interesting one.
[20:20:36] *** Quits: kmcguire (kmcguire@moz-pg1gb9.biz.rr.com) (Ping timeout: 121 seconds)
[20:20:40] <simukis> especially the impl for Vec
[20:22:03] *** Joins: eerie_ (eerie@moz-vea0ul.red.bezeqint.net)
[20:22:39] *** Joins: Rym_ (y@moz-232.ad4.144.109.IP)
[20:23:25] *** Quits: eerie (eerie@moz-nbbdu3.red.bezeqint.net) (Ping timeout: 121 seconds)
[20:24:37] <simukis> arrrrrrr1: in the always-reporting-the-error case, error could be set back to `None` on EOF to signify there was no error for extra points
[20:24:51] <arrrrrrr1> maybe
[20:25:23] <simukis> loop { /* for loop */ if error.is_none() { break; } }
[20:25:37] <arrrrrrr1> can I have trait bounds on associated types?
[20:27:09] *** Quits: Rym_ (y@moz-232.ad4.144.109.IP) (Ping timeout: 121 seconds)
[20:28:39] *** Quits: Sindriava (textual@moz-vae.377.103.88.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[20:28:56] <simukis> screw the rollup, conflicts again -.-
[20:29:01] * simukis goes to do the rebasing
[20:33:21] *** Quits: Guest63 (textual@moz-56c.qli.61.176.IP) (Connection closed)
[20:34:17] *** Joins: Guest63 (textual@moz-56c.qli.61.176.IP)
[20:34:46] <brson> steveklabnik: i'm starting to add #![feature] to doctests. Should I a) make them visible and home people see them and remove them when they become stable, b) hide them and potentially leave them there after they are no longer needed?
[20:34:51] <brson> *hope
[20:35:01] *** Quits: eerie_ (eerie@moz-vea0ul.red.bezeqint.net) (Connection closed)
[20:36:07] <steveklabnik> brson: i think b, but i'm not sure
[20:36:14] <steveklabnik> maybe a is better
[20:36:41] <brson> k i'll do b
[20:39:47] *** Joins: Guest63_ (textual@moz-56c.qli.61.176.IP)
[20:39:59] *** Quits: Guest63 (textual@moz-56c.qli.61.176.IP) (Connection closed)
[20:42:34] *** Joins: Sindriava (textual@moz-vae.377.103.88.IP)
[20:45:02] *** Quits: semarie (semarie@moz-kvs6fc.torservers.net) (A TLS packet with unexpected length was received.)
[20:46:44] *** Quits: hoverbear (hoverbear@moz-a97.b2m.54.96.IP) (Quit: Time to hibernate.... ZzZz...)
[20:47:39] <arrrrrrr1> http://is.gd/cb3S9t
[20:47:44] <simukis> did somebody break rust output? (http://i.imgur.com/ZjfYCLk.png)
[20:47:47] <arrrrrrr1> why do these impls conflict?
[20:47:51] <simukis> s/rust/rustdoc/
[20:48:03] <arrrrrrr1> simukis: fite me in real life
[20:48:23] <arrrrrrr1> simukis: that is obviously not intended
[20:48:24] *** Quits: sigma1 (sigma@moz-ohog4c.range86-135.btcentralplus.com) (Ping timeout: 121 seconds)
[20:48:34] <arrrrrrr1> simukis: why doesn't it just show the first line?
[20:48:42] *** Joins: hoverbear (hoverbear@moz-ctf.3ep.54.96.IP)
[20:48:42] <arrrrrrr1> why are there ...?
[20:48:43] <simukis> arrrrrrr1: I don’t think its your changes that made this happen
[20:48:44] <arrrrrrr1> wat
[20:48:47] <arrrrrrr1> this makes no sense
[20:48:58] <arrrrrrr1> after my change there should be no ...
[20:49:10] <arrrrrrr1> simukis: what's your rustdoc version?
[20:49:20] <simukis> this is not mine, found at http://www.reddit.com/r/rust/comments/2yxjbp/rfc_google_rust_client_apis/
[20:49:28] <simukis> lets see what github has
[20:49:53] *** Quits: ctennis (ctennis@moz-su6.e72.137.99.IP) (Quit: Leaving...)
[20:51:51] *** Quits: srh_ (User@moz-gk35n7.hfc.comcastbusiness.net) (Quit: Leaving)
[20:51:53] <simukis> hmm, it’s not like his docstring is wrong either
[20:52:03] <arrrrrrr1> those docs look auto generated
[20:52:06] <simukis> https://github.com/Byron/google-apis-rs/blob/master/gen/youtube3/src/lib.rs#L5011-5021
[20:52:19] *** Joins: eerie (eerie@moz-vea0ul.red.bezeqint.net)
[20:52:21] <simukis> they are.
[20:53:03] <WindowsBunny> arrrrrrr1: did your change uncover a bug in rustdoc? :P
[20:53:06] <arrrrrrr1> simukis: spaces after the ///
[20:53:18] <arrrrrrr1> http://a.pomf.se/vgirmb.png
[20:53:50] <simukis> shouldn’t make any difference, this is markdown
[20:54:06] <arrrrrrr1> you're overestimating rustdoc
[20:54:17] <simukis> eh…
[20:54:26] <simukis> oh well…
[20:55:01] <simukis> doing the DOM parsing before that even exists
[20:55:21] *** Quits: Guest63_ (textual@moz-56c.qli.61.176.IP) (Connection closed)
[20:57:54] *** Joins: sigma (sigma@moz-ohog4c.range86-135.btcentralplus.com)
[20:59:03] *** Joins: Guest63 (textual@moz-56c.qli.61.176.IP)
[20:59:23] *** Quits: avikpal (avikpal@moz-dbc.p8t.194.117.IP) (Connection closed)
[20:59:34] *** Joins: ctennis (ctennis@moz-vcpg3c.in.comcast.net)
[21:00:40] *** Joins: avikpal (avikpal@moz-dbc.p8t.194.117.IP)
[21:02:50] *** jdm is now known as jdm|busy
[21:04:31] *** Joins: summerlight_ (summerlight@moz-99k.2mj.130.121.IP)
[21:04:49] *** Joins: japaric (japaric@moz-pud.upl.232.190.IP)
[21:04:51] *** Quits: avikpal (avikpal@moz-dbc.p8t.194.117.IP) (Ping timeout: 121 seconds)
[21:07:05] *** Quits: blaenk__ (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[21:07:40] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[21:09:23] *** Joins: Rym_ (y@moz-232.ad4.144.109.IP)
[21:09:27] *** Joins: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net)
[21:09:27] *** ChanServ sets mode: +o pcwalton
[21:10:50] *** Quits: summerlight_ (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[21:10:57] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[21:11:29] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[21:12:07] *** Joins: gsingh93 (gulshan@moz-3fu4am.mi.comcast.net)
[21:14:06] *** Quits: laumann (thomas@moz-n9e72h.0.fullrate.dk) (Ping timeout: 121 seconds)
[21:15:10] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[21:15:15] *** Quits: Jesin (Jesin@moz-q46lj1.fios.verizon.net) (Quit: Leaving)
[21:15:49] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[21:17:10] <arrrrrrr1> there was a texteditor written in rust. what was its name?
[21:17:20] <doener> iota
[21:18:56] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[21:20:42] *** Joins: evanfarrar (evanfarrar@moz-56vd31.res.rr.com)
[21:20:53] <doener> arrrrrrr1: though I think I one saw another one, but I can't remember its name, nor find it anywhere
[21:21:27] <arrrrrrr1> a rust editor should make it so that when you compile it shows the errors as comments next to the lines that caused the error
[21:21:46] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[21:21:48] <arrrrrrr1> https://gist.github.com/mahkoh/ba61ab8cec64724d2b84
[21:21:51] <arrrrrrr1> like this but with colors
[21:22:31] *** Joins: eerie_ (eerie@moz-vea0ul.red.bezeqint.net)
[21:24:51] *** Quits: evanfarrar (evanfarrar@moz-56vd31.res.rr.com) (Ping timeout: 121 seconds)
[21:25:22] *** Quits: eerie (eerie@moz-vea0ul.red.bezeqint.net) (Ping timeout: 121 seconds)
[21:25:58] <arrrrrrr1> trying to compile the output of xxd with rustc gives you lots of funny errors
[21:26:01] *** Joins: summerlight_ (summerlight@moz-99k.2mj.130.121.IP)
[21:26:08] *** Joins: frogmella (Mibbit@moz-juv.9o3.252.72.IP)
[21:27:45] <arrrrrrr1> why can't you call a fn(self) on a Box<Trait>?
[21:29:12] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[21:30:45] *** Joins: Guest63_ (textual@moz-56c.qli.61.176.IP)
[21:30:50] *** Quits: Guest63 (textual@moz-56c.qli.61.176.IP) (Connection closed)
[21:30:55] <doener> arrrrrrr1: I think it's because for the actual method call, you need to pass the value in the box as self, and you don't know its type and thus its size
[21:31:44] *** Quits: frogmella (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[21:32:00] <arrrrrrr1> doener: I see that the order is somewhat the wrong way, but since fn(self) is part of the impl, you could just store the size in the vtable
[21:32:33] <arrrrrrr1> or the fn(self) could pull the thing in itself, via a hidden pointer
[21:32:49] <arrrrrrr1> so that it's actually fn(*mut self) { let self = *self ... }
[21:32:50] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[21:33:14] <arrrrrrr1> but it's a bit of a hack to make this just for trait impls
[21:33:16] *** Joins: evanfarrar (evanfarrar@moz-56vd31.res.rr.com)
[21:33:32] <doener> fn(self) used to be like that, had a noticeable perf impact IIRC
[21:33:47] <arrrrrrr1> well, &own would solve this problem
[21:35:51] *** Quits: summerlight_ (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[21:36:07] *** Quits: sternmull (kringel@moz-hmm04a.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[21:36:28] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[21:37:26] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[21:43:19] *** Quits: Guest63_ (textual@moz-56c.qli.61.176.IP) (Connection closed)
[21:48:10] *** Joins: Guest63 (textual@moz-56c.qli.61.176.IP)
[21:51:47] *** Quits: Guest63 (textual@moz-56c.qli.61.176.IP) (Connection closed)
[21:52:11] *** Quits: eerie_ (eerie@moz-vea0ul.red.bezeqint.net) (Connection closed)
[21:52:28] *** Joins: eerie (eerie@moz-vea0ul.red.bezeqint.net)
[21:53:15] *** Quits: evanfarrar (evanfarrar@moz-56vd31.res.rr.com) (Connection closed)
[21:53:20] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[21:56:58] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[21:57:19] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[21:57:44] *** Quits: eerie (eerie@moz-vea0ul.red.bezeqint.net) (Connection closed)
[21:59:51] *** Joins: reem_ (reem@moz-o59qsl.coob.q2h1.0009.2601.IP)
[21:59:56] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[22:00:56] *** Joins: Guest63 (textual@moz-56c.qli.61.176.IP)
[22:04:29] *** Joins: hoverbea_ (hoverbear@moz-a97.b2m.54.96.IP)
[22:05:25] *** Joins: adu (ajr@moz-0foa9t.md.comcast.net)
[22:06:52] <simukis> oh damn. I was so dumb by trying to remember what kind of special prefixes and suffixes to rustdoc I need to build rustdoc-stage1, when I could just specify a path where I want it to appear…
[22:07:32] *** Quits: hoverbear (hoverbear@moz-ctf.3ep.54.96.IP) (Ping timeout: 121 seconds)
[22:09:19] <arrrrrrr1> gh23348
[22:09:20] <[o__o]> Incorrect trait impls conflict error: https://github.com/rust-lang/rust/issues/23348
[22:09:36] <arrrrrrr1> is it possible that rustc doesn't understand that all types can only have a finite number of &mut in them?
[22:13:15] *** Quits: kmcguire_ (kmcguire@moz-pg1gb9.biz.rr.com) (Connection closed)
[22:15:17] *** Quits: bjz (bjz@moz-puppgq.tpgi.com.au) (Quit: Textual IRC Client: www.textualapp.com)
[22:18:09] *** reem_ is now known as reem
[22:18:23] *** Joins: bjz (bjz@moz-puppgq.tpgi.com.au)
[22:19:41] <simukis> what’s the reverse operation for `StrExt::lines`?
[22:21:36] <bluss> .collect() to String doesn't do it exactly unfortunately, but it's close
[22:21:55] <simukis> and we don’t have an equivalent of intersperse either
[22:22:18] <simukis> (or intercalate)
[22:22:21] <bluss> itertools has both intersperse and a string joiner called .join()
[22:22:34] <bluss> libstd just has .concat() on slices I think still
[22:22:36] <simukis> bluss: I can’t pull dependency on it into rustc
[22:23:09] <simukis> oh, this works
[22:23:16] *** Quits: gsingh93 (gulshan@moz-3fu4am.mi.comcast.net) (Quit: WeeChat 1.1.1)
[22:23:19] <bluss> right. It's a simple loop or fold really though
[22:23:21] *** Joins: gsingh93 (gulshan@moz-3fu4am.mi.comcast.net)
[22:23:57] <simukis> http://doc.rust-lang.org/std/slice/trait.SliceConcatExt.html#tymethod.connect basically does what I want
[22:23:57] <arrrrrrr1> there is no lines inverse because lines is lossy
[22:24:40] <simukis> arrrrrrr1: is it? lines_any is lossy, lines doesn’t appear to be
[22:25:32] *** Quits: munksgaard (munksgaard@moz-urnkl5.u.parknet.dk) (Ping timeout: 121 seconds)
[22:25:47] <arrrrrrr1> rusti: ("a".lines().collect::<Vec<_>>(), "a\n".lines().collect::<Vec<_>>())
[22:25:49] -playbot- (["a"], ["a"])
[22:26:16] <simukis> ah, this.
[22:27:10] *** Quits: tjakubow (tom@moz-ag87jj.fios.verizon.net) (Quit: WeeChat 1.1.1)
[22:27:37] <arrrrrrr1> there is a strange conflict between iterators and slices
[22:28:55] *** Quits: Astrum|Lap (Astrum|Lap@moz-7enfbr.co.comcast.net) (Client exited)
[22:29:20] * simukis likes in how lists, iterators and flow control is one and the same thing in haskell
[22:29:35] <arrrrrrr1> what's a list?
[22:29:55] <reem> in haskell it's a singly-linked cons list
[22:30:09] <arrrrrrr1> wow, linked lists. evil stuff
[22:30:14] <reem> but they're lazy
[22:30:27] <simukis> and get optimised out very well… most of the time
[22:30:59] <reem> you also usually end up using them to model control flow and recursion/iteration rather than to store data for access
[22:31:46] <arrrrrrr1> anyway, in rust you have slices and iterators and there is a bit of a conflict when designing an interface
[22:32:24] *** Quits: Rym_ (y@moz-232.ad4.144.109.IP) (Ping timeout: 121 seconds)
[22:32:59] <scott> lists in haskell are often used like some kind of stream. you can be halfway through consuming the list and the beginning of the list is being garbage collected already and the rest of the list hasn't even been created yet
[22:33:21] <simukis> scott: that’s what iterator basically is.
[22:33:30] <scott> right
[22:36:45] <arrrrrrr1> for example, push_all is deprecated in favor of extend
[22:37:06] <arrrrrrr1> push_all takes a slice and extend takes an iterator
[22:37:45] <freebroccolo> arrrrrrr1: why are linked lists evil? what about when you need O(1) append?
[22:37:47] <arrrrrrr1> and from a pure point of view it's clear that extend is more versatile than push_all
[22:37:53] <arrrrrrr1> freebroccolo: then you use a vector
[22:38:04] <freebroccolo> vector doesnt' have O(1) append
[22:38:13] <arrrrrrr1> but you really want the additional structure in extend
[22:38:14] <simukis> freebrocolo: you mean prepend.
[22:38:29] <arrrrrrr1> freebroccolo: then you use a ringbuffer
[22:38:36] <freebroccolo> no, I mean append
[22:38:36] <simukis> dang, missed some characters off his name.
[22:38:44] <arrrrrrr1> so we invent all of those new traits
[22:38:48] <arrrrrrr1> ExactSizeIterator
[22:38:48] <freebroccolo> ringbuffer doesn't have that either
[22:38:52] <arrrrrrr1> RandomAccessIterator
[22:38:58] <arrrrrrr1> freebroccolo: we're talking accumulated
[22:39:15] <arrrrrrr1> and in the end you have bounds that can only be satisfied by an iterator created from a slice
[22:39:38] <arrrrrrr1> which brings us back to: was it reasonable to deprecate push_all in the first place
[22:39:57] *** Joins: swgillespie (swgillespie@moz-upj.3un.220.167.IP)
[22:40:16] <arrrrrrr1> and there are other places, e.g, env::args that now return an iterator
[22:40:22] <arrrrrrr1> but the iterator was created from a vector
[22:40:28] <arrrrrrr1> so you're strictly losing structure
[22:40:37] <WindowsBunny> freebroccolo: amortized O(1) you mean
[22:40:42] <arrrrrrr1> kind of like casting a &T to a &Trait
[22:40:50] <arrrrrrr1> WindowsBunny: amortized, not accumulated, yes
[22:41:01] <arrrrrrr1> that's what I meant
[22:41:46] <scott> if all you are doing is appending to the end, vec is way better than linked lists
[22:41:58] <scott> linked lists are almost always not the right answer
[22:42:03] <scott> but they have their uses
[22:42:10] *** Quits: adu (ajr@moz-0foa9t.md.comcast.net) (Client exited)
[22:42:23] <arrrrrrr1> according to our lord and master stroustrup it's never the answer
[22:42:39] *** Joins: Rym_ (y@moz-232.ad4.144.109.IP)
[22:42:42] <arrrrrrr1> one use case I see is unbounded buffers with multithreaded access
[22:42:54] <freebroccolo> appending to vector or ringbuffer is O(n), it even says that in the documentation
[22:43:12] <arrrrrrr1> [citation needed]
[22:43:12] <scott> appending to vector is amortized O(1)
[22:43:21] <scott> and I think the same for RingBuffer
[22:43:37] <reem> amortized doesn't always cut it
[22:43:50] <freebroccolo> I don't see how unless you are doing everything with iterators or lazily
[22:44:04] *** Quits: sigma (sigma@moz-ohog4c.range86-135.btcentralplus.com) (Connection closed)
[22:44:18] <scott> it's not the same as plain O(1), but it acts like O(1) averaged over many calls
[22:44:28] <scott> because the storage is expanded exponentially
[22:44:39] <scott> so the number of copies needed decreases as it grows
[22:44:50] <reem> scott: but each copy also gets more expensive
[22:45:02] <scott> yes, more expensive and less often
[22:45:06] <freebroccolo> yeah, if you change your algorithms maybe… the point is it's a different structure with different complexity characteristics. Just think it's weird people say "never use it" when it's clearly the right answer for some cases
[22:45:36] <arrrrrrr1> https://www.youtube.com/watch?v=YQs6IC-vgmo
[22:45:37] <arrrrrrr1> enjoy
[22:45:37] <scott> freebroccolo: people say that because a lot of people choose it when they think vector would be slow, but it turns out to be faster than list once again
[22:46:12] <scott> (or something else like deque, etc, but vec can cover a lot of use cases)
[22:46:15] <freebroccolo> sure… you should always bench anyway
[22:46:19] <scott> indeed
[22:51:11] <freebroccolo> arrrrrrr1: sounds like he's talking a lot about insertion/deletion which is not what I would consider to be a strong case for using lists
[22:51:30] <arrrrrrr1> so you want a stack?
[22:51:54] <freebroccolo> for that case, maybe, or a different tree-like structure
[22:52:02] <eddyb> playbot: [println!("foo"); 0]
[22:52:03] -playbot- foo
[22:52:04] -playbot- []
[22:52:11] <eddyb> how... does that work?
[22:52:20] <arrrrrrr1> eddyb: println! returns ()?
[22:52:27] <arrrrrrr1> wait
[22:52:28] *** Quits: brson (brson@moz-cfhap5.mtv2.mozilla.com) (Ping timeout: 121 seconds)
[22:52:32] <eddyb> arrrrrrr1: no, the implementation is wrong
[22:52:36] <scott> you have () and copy it zero times I guess?
[22:52:44] <arrrrrrr1> rusti: [1; 0]
[22:52:46] -playbot- []
[22:52:50] <arrrrrrr1> interesting
[22:52:53] <eddyb> doener: I'm guessing dest == Ignore for [T; 0]?
[22:52:57] <arrrrrrr1> rusti: ["test".to_string(), 0]
[22:52:58] -playbot- <anon>:14:30: 14:31 error: mismatched types:
[22:52:58] -playbot-  expected `collections::string::String`,
[22:52:58] -playbot- output truncated; full output at: http://bit.ly/1BCyZpX
[22:53:03] <arrrrrrr1> rusti: ["test".to_string(); 0]
[22:53:05] -playbot- []
[22:53:26] <eddyb> arrrrrrr1: it's not evaluating the inner expression at all in a specific case
[22:53:33] <eddyb> but I don't think it's reachable
[22:53:49] <arrrrrrr1> rusti: [panic!(); 0]
[22:53:50] -playbot- thread '<main>' panicked at 'explicit panic', <anon>:14
[22:53:51] -playbot- playpen: application terminated with error code 101
[22:54:07] <scott> playbot: ["test".to_string(); 5]
[22:54:08] -playbot- <anon>:14:9: 14:32 error: the trait `core::marker::Copy` is not implemented for the type `collections::string::String` [E0277]
[22:54:08] -playbot- <anon>:14         ["test".to_string(); 5]
[22:54:08] -playbot- output truncated; full output at: http://bit.ly/1xlmhXA
[22:54:19] <scott> weird how the expr gets evaluated but doesn't require Copy for the 0 case
[22:55:30] <eddyb> scott: it should not require it for 1, either
[22:55:36] <eddyb> playbot: ["foo".to_string(); 1]
[22:55:38] -playbot- ["foo"]
[22:55:48] <scott> true, I guess
[22:55:50] <scott> interesting
[22:56:39] <arrrrrrr1> rusti: [panic!(); panic!()]
[22:56:40] -playbot- <anon>:14:20: 14:29 error: expected constant integer for repeat count, found non-constant expression [E0307]
[22:56:40] -playbot- <anon>:14         [panic!(); panic!()]
[22:56:40] -playbot- output truncated; full output at: http://bit.ly/1BCzrEI
[22:56:52] <arrrrrrr1> rusti: [loop { }; 0]
[22:56:57] <doener> rusti: [panic!(); 0]; fdslkf
[22:56:57] -playbot- playpen: timeout triggered!
[22:56:58] -playbot- <anon>:14:24: 14:30 error: unresolved name `fdslkf`
[22:56:58] -playbot- <anon>:14         [panic!(); 0]; fdslkf
[22:56:58] -playbot- output truncated; full output at: http://bit.ly/1xlmFoX
[22:58:51] <doener> interesting, just [panic!(); 0] panics, but let x = [panic!(); 0]; doesn't
[22:59:05] <freebroccolo> are there plans to extend the SIMD support in std at some point? or is that going in a different crate?
[22:59:29] <arrrrrrr1> can't even write it in a different crate
[22:59:47] <aturon> freebroccolo: not sure about the crate -- it would probably start life outside of std but gradually migrate in -- but i know huon is going to be spending the summer working on SIMD related things
[23:00:03] <doener> oh, maybe because it's only evaluated for the side-effects when it's not assigned
[23:00:07] <freebroccolo> hmm, nice
[23:00:25] *** Quits: Defaultti (Defaultti@moz-bmdn13.kapsi.fi) (Quit: Quitting.)
[23:00:32] <freebroccolo> aside from the ICE with debug it seems fairly usable but I miss comparison operators
[23:00:35] <eddyb> doener: aha!
[23:00:39] <eddyb> doener: thanks, you found the bug
[23:00:46] *** Quits: hoverbea_ (hoverbear@moz-a97.b2m.54.96.IP) (Quit: Time to hibernate.... ZzZz...)
[23:00:58] <eddyb> doener: the SaveIn case for [x; 0] is broken in trans::tvec
[23:03:32] <eddyb> doener: tvec::write_content, that is
[23:03:45] <doener> eddyb: yeah, was looking that up myself :-)
[23:04:01] <doener> eddyb: was still trying to figure out if I consider the Ignore or the SaveIn case to be broken
[23:04:22] *** Joins: Defaultti (Defaultti@moz-bmdn13.kapsi.fi)
[23:04:43] <doener> eddyb: but since it only evaluates the expression once in any case, I think you're right that SaveIn is broken
[23:06:04] <eddyb> doener: [expr; n] should be equivalent to let x = expr; [x; n]
[23:08:27] *** Quits: Guest63 (textual@moz-56c.qli.61.176.IP) (Connection closed)
[23:08:36] <doener> yeah
[23:10:38] *** Joins: Guest63 (textual@moz-56c.qli.61.176.IP)
[23:12:04] *** Quits: Guest63 (textual@moz-56c.qli.61.176.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[23:13:17] *** Joins: mib_s6w738 (Mibbit@moz-juv.9o3.252.72.IP)
[23:13:53] *** Quits: Sindriava (textual@moz-vae.377.103.88.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[23:14:25] *** Quits: mib_s6w738 (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[23:15:22] *** Joins: Guest63 (textual@moz-56c.qli.61.176.IP)
[23:16:50] <rprichard> rusti: { let x = [panic!(); 2]; }
[23:16:51] -playbot- PHINode should have one entry for each predecessor of its parent basic block!
[23:16:51] -playbot-   %8 = phi i64 [ 0, %entry-block ], [ %9, %expr_repeat ]
[23:16:51] -playbot- output truncated; full output at: http://bit.ly/1BCC4X7
[23:17:29] <arrrrrrr1> LLVM ERROR: Broken function found, compilation aborted!
[23:17:34] <arrrrrrr1> haven't seen that one before
[23:19:07] *** Quits: Guest63 (textual@moz-56c.qli.61.176.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[23:19:35] *** Quits: killercup (killercup@moz-edmf2j.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[23:31:36] <simukis> acrichto: updated the print/ln
[23:31:49] <arrrrrrr1> aturon: what was the plan for making Vec::extend fast? you're not going to add an ExectSizeIterator bound to it so I don't see how it's going to work.
[23:32:36] *** Joins: hoverbear (hoverbear@moz-a97.b2m.54.96.IP)
[23:33:20] *** Quits: c0170 (c0170@moz-4stj9o.cable.virginm.net) (Ping timeout: 121 seconds)
[23:36:07] <simukis> I’ll replace the uses of old_io set_stdout tomorrow.
[23:36:18] <acrichto> simukis: sweet, looks good to me! that's the last thing on my mind
[23:36:24] <acrichto> I think the only real user of that is the test harness
[23:38:36] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[23:42:32] *** Joins: evanfarrar (evanfarrar@moz-56vd31.res.rr.com)
[23:43:03] <bstrie> brson: they told me that the community space was closed (???) so I have been availing myself of the actual mozilla offices upstairs
[23:43:06] <doener> eddyb: are you fixing that bug?
[23:43:34] <eddyb> doener: not really
[23:43:46] <eddyb> test result: FAILED. 1953 passed; 19 failed; 36 ignored; 0 measured
[23:44:18] <eddyb> apparently I broke Box<Trait>. or something
[23:44:42] *** Quits: evanfarrar (evanfarrar@moz-56vd31.res.rr.com) (Connection closed)
[23:46:04] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Connection closed)
[23:46:58] <arrrrrrr1> what's an example of a type that's not Clone?
[23:48:17] <bstrie> arrrrrrr1: file handles?
[23:48:40] <arrrrrrr1> thanks
[23:49:08] <arrrrrrr1> there isn't even a try_clone method for some reason
[23:49:20] <eddyb> &mut T
[23:49:25] <arrrrrrr1> very true
[23:51:00] *** Quits: Yurume (Yurume@moz-0t8.piq.68.115.IP) (Ping timeout: 121 seconds)
[23:51:12] *** Joins: chc4 (chc4@moz-ppqj3k.ma.comcast.net)
[23:51:15] *** Quits: klutzy (not@moz-0t8.piq.68.115.IP) (Ping timeout: 121 seconds)
[23:53:27] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[23:53:27] *** Joins: arrrrrrrrr (arrrrrrrrs@moz-bvsth6.dynamic.qsc.de)
[23:55:16] *** Quits: hoverbear (hoverbear@moz-a97.b2m.54.96.IP) (Quit: Time to hibernate.... ZzZz...)
[23:56:15] *** Quits: arrrrrrr1 (arrrrrrrrs@moz-q3f546.dynamic.qsc.de) (Ping timeout: 121 seconds)
[23:59:28] *** Joins: tjakubow (tom@moz-783qe0.res.rr.com)
