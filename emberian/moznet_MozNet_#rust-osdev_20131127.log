[00:01:34] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Ping timeout)
[00:20:21] *** Joins: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca)
[00:55:44] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[00:57:29] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Ping timeout)
[00:58:31] *** kimundi is now known as zz_kimundi
[01:33:22] *** Quits: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca) (Quit: canhtak)
[01:39:41] *** Joins: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca)
[03:08:27] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[03:09:31] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[03:23:43] *** Quits: zz_kimundi (kimundi@moz-28813223.dip0.t-ipconnect.de) (Ping timeout)
[03:27:30] *** Joins: zz_kimundi (kimundi@moz-BF21A096.dip0.t-ipconnect.de)
[03:27:31] *** zz_kimundi is now known as kimundi
[03:57:14] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[03:59:01] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Ping timeout)
[04:16:13] *** Joins: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP)
[04:17:54] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[04:36:46] *** Joins: brson (brson@moz-C7C20043.sd.sd.cox.net)
[04:57:45] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[04:59:33] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Ping timeout)
[05:50:35] *** Quits: dbaupp (Thunderbir@A56F6AEF.D5A1DCF.37681C44.IP) (Ping timeout)
[05:58:17] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[06:00:11] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Ping timeout)
[06:25:40] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[06:47:26] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[06:58:47] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[07:00:39] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Ping timeout)
[07:02:13] *** Joins: dbaupp (Thunderbir@moz-3BE4086E.lns20.syd6.internode.on.net)
[07:04:41] *** Quits: dbaupp (Thunderbir@moz-3BE4086E.lns20.syd6.internode.on.net) (Input/output error)
[07:05:05] *** Joins: dbaupp (Thunderbir@moz-3BE4086E.lns20.syd6.internode.on.net)
[07:12:52] *** Quits: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca) (Quit: canhtak)
[07:14:05] *** Joins: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca)
[07:32:58] *** Quits: brson (brson@moz-C7C20043.sd.sd.cox.net) (Quit: leaving)
[07:45:17] *** Quits: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP) (Ping timeout)
[07:49:12] *** Joins: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP)
[07:54:50] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[08:19:55] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: sleep)
[08:41:16] *** Quits: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca) (Quit: canhtak)
[08:45:22] *** Quits: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP) (Ping timeout)
[08:51:45] *** Joins: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP)
[08:59:17] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[09:03:01] *** Joins: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca)
[09:16:30] *** Quits: bjz (bjz@moz-6AF19015.lnse4.cha.bigpond.net.au) (Ping timeout)
[09:22:34] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[09:44:50] *** Joins: bjz (bjz@moz-6AF19015.lnse4.cha.bigpond.net.au)
[09:46:19] *** Quits: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca) (Quit: canhtak)
[09:48:14] *** Quits: bjz (bjz@moz-6AF19015.lnse4.cha.bigpond.net.au) (Ping timeout)
[10:07:20] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[10:35:39] *** kimundi is now known as zz_kimundi
[10:45:57] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[10:47:11] *** Joins: bjz (bjz@moz-6AF19015.lnse4.cha.bigpond.net.au)
[10:49:09] *** Quits: bjz (bjz@moz-6AF19015.lnse4.cha.bigpond.net.au) (Ping timeout)
[10:59:26] *** Quits: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP) (Ping timeout)
[11:02:27] *** Joins: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP)
[11:16:54] *** zz_kimundi is now known as kimundi
[11:19:14] *** Joins: bjz (bjz@moz-6AF19015.lnse4.cha.bigpond.net.au)
[11:30:43] *** kimundi is now known as zz_kimundi
[11:31:43] *** zz_kimundi is now known as kimundi
[12:01:34] *** Quits: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP) (Ping timeout)
[12:04:12] *** Joins: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP)
[12:49:02] *** Joins: jmbto (jmbto@moz-FE174E29.fbx.proxad.net)
[13:04:52] *** Quits: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP) (Ping timeout)
[13:07:47] *** Joins: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP)
[13:13:13] *** Quits: whitglint (uid15486@moz-31ABA2C0.irccloud.com) (Input/output error)
[13:15:17] *** Joins: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca)
[13:46:08] *** Joins: whitglint (uid15486@moz-31ABA2C0.irccloud.com)
[13:47:42] *** Quits: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca) (Quit: canhtak)
[14:00:40] *** Joins: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca)
[14:08:41] *** Quits: bjz (bjz@moz-6AF19015.lnse4.cha.bigpond.net.au) (Ping timeout)
[14:12:53] *** Joins: bjz (bjz@moz-DD4A2A91.lnse2.cha.bigpond.net.au)
[14:18:28] *** Quits: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca) (Quit: canhtak)
[14:20:38] *** Joins: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca)
[14:22:00] *** Joins: sbalmos (quassel@CA5677B6.576D0C1.ED2EFC1B.IP)
[14:48:52] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[15:31:52] *** Quits: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca) (Quit: canhtak)
[15:31:57] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[15:51:37] *** Joins: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca)
[16:28:43] *** kimundi is now known as zz_kimundi
[16:40:08] *** zz_kimundi is now known as kimundi
[17:24:40] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[17:32:26] *** Joins: devbug (quassel@2D4E172D.4C8B6099.9B57EA59.IP)
[18:26:51] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[18:43:07] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[18:44:17] *** Quits: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP) (Ping timeout)
[18:46:14] *** Joins: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP)
[18:50:31] *** Quits: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca) (Quit: canhtak)
[18:58:43] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[18:59:10] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Max SendQ exceeded)
[19:00:51] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[19:02:56] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[19:03:31] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Ping timeout)
[19:10:12] *** Quits: jmbto (jmbto@moz-FE174E29.fbx.proxad.net) (Quit: Leaving)
[19:18:17] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[19:20:33] <eddyb> strcat: don't tell me that your pthread stuff is behind the same libc flag >_>
[19:20:42] <strcat> it is
[19:20:49] <strcat> why not?
[19:21:05] <strcat> -Wl,--as-needed and dead code elimination should take care of not including it if you don't use it
[19:21:23] <strcat> (I realize that means using clang -flto atm because rust's reachability stuff doesn't work)
[19:26:12] <eddyb> clang-3.3: error: unable to execute command: Segmentation fault
[19:26:14] <eddyb> oh wtf
[19:28:16] <eddyb> 2.      Running pass 'Global Variable Optimizer' on module 'build/obj/src/main.o.bc'.
[19:28:30] <eddyb> strcat: ain't this lovely?
[19:28:32] <strcat> lol
[19:28:36] <strcat> eddyb: use bugpoint
[19:28:51] <strcat> eddyb: I wouldn't be surprised if clang was just too out-of-date though
[19:28:54] <eddyb> my clang is old
[19:29:05] <eddyb> I mean, latest stable, pffft
[19:31:11] <sbalmos> I think I'm resigned to just writing up high-level concept stuff on an OS. Starting to write a Rust kernel is futile at the moment given all the syntax-level changes being discussed. Most over my head. :/
[19:31:34] <eddyb> updated: clang version 3.3 (branches/release_33 183898)
[19:32:59] <eddyb> strcat: how do I use bugpoint?
[19:33:11] <strcat> bugpoint foo.bc
[19:33:17] <strcat> bugpoint -some_buggy_pass foo.bc
[19:33:21] <strcat> it narrows down a test case
[19:33:34] <strcat> then just check to see if it's really minimal and make sure it reproduces the bug and you have an LLVM bug to open
[19:33:36] <strcat> but...
[19:33:41] <eddyb> Initializing execution environment: Found lli: /usr/bin/lli
[19:33:42] <eddyb> Sorry, I can't automatically select a safe interpreter!
[19:33:56] <strcat> wat
[19:39:45] <eddyb> strcat: bugpoint works with -O3
[19:40:00] <strcat> eddyb: 'works' as in narrowed down a test case? ;p
[19:41:22] <eddyb> core::fail::abort::h65a80f38847688baE::v0.0 is one of them
[19:41:53] <eddyb> well, the only one. opt bugpoint-reduced-function.bc -tbaa
[19:43:37] <eddyb> maybe tail call void @llvm.trap() #0?
[19:44:00] <strcat> that aborts the process via something like an invalid instruction
[19:44:03] <eddyb> what's tbaa, even?
[19:44:09] <strcat> type-based alias analysis
[19:44:15] <strcat> rust doesn't output the nodes for it
[19:44:18] <strcat> so it does nothing
[19:45:05] <eddyb> opt: bugpoint-reduced-function.ll:96:125: error: invalid use of function-only attribute
[19:45:07] <eddyb> declare void @"_ZN4core6thread14Drop$LockGuard4drop20h307f59033a82777u4aq4v0.0E"({ i32, %tydesc*, i8*, i8*, i8 }* nocapture readonly) unnamed_addr #4
[19:45:11] <eddyb> weird
[19:45:22] <strcat> yes your clang is too old
[19:45:29] <strcat> they added readonly/readnone for parameters since 3.3
[19:45:35] <strcat> LLVM IR/bytecode isn't stable
[19:45:52] <strcat> you're just lucky that with the bytecode it doesn't have to parse anything
[19:46:20] <eddyb> strcat: wait a second, rustc uses newer LLVM?
[19:46:23] <eddyb> pffffft
[19:46:25] <strcat> yes
[19:46:37] <strcat> LLVM doesn't do supported stable releases
[19:46:44] <strcat> they branch a version
[19:46:48] <strcat> stabilize it a bit
[19:46:51] <strcat> then tag the release
[19:46:55] <strcat> and then no more patches
[19:46:55] <eddyb> but... where do I get *newer*? I am not willing to come up with llvm-git for OpenSUSE
[19:47:11] <strcat> rust's build dir?
[19:47:31] <strcat> rust/llvm/x86_64-unknown-linux-gnu/Release+Asserts/bin
[19:47:43] <eddyb> I was using clang as a proxy. thanks, I'll try to see what I can do with that
[19:49:22] <eddyb> llc: Unknown command line argument '-target'
[19:50:02] <strcat> ;D
[19:50:13] <strcat> eddyb: yeah and clang's optimization passes are better
[19:50:15] <strcat> than opt/llc
[19:50:17] <strcat> so yeah..
[19:50:49] <eddyb> /usr/bin/ld:build/obj/src/main.o: file format not recognized; treating as linker script
[19:50:50] <eddyb> LOL
[19:50:55] <eddyb> this is like a circus
[19:53:28] <eddyb> strcat: llc is producing assembly :(
[19:53:49] <strcat> yeah you have to link it yourself
[19:53:52] <strcat> lol
[19:54:03] <strcat> eddyb: so
[19:54:06] <strcat> the LLVM toolchain
[19:54:10] <strcat> you get bytecode per file
[19:54:11] <eddyb> you mean assemble *and* link?
[19:54:14] <strcat> you llvm-link them together
[19:54:22] <strcat> eddyb: it's supposed to output an object file?
[19:54:26] <strcat> are you passing -S ?
[19:54:28] <eddyb> nope
[19:55:20] <cmr> llc spits out asm
[19:55:30] <eddyb> :(
[19:55:37] <eddyb> so, uhm, what does clang do?
[19:55:39] <cmr> -filetype=obj doesn't
[19:55:50] <eddyb> (can I use clang with another llc?)
[19:56:01] <cmr> no, it uses LLVM as a library
[19:56:14] <eddyb> cmr: thanks :D
[19:56:42] <eddyb> for the filetype, it works. now to strip it of pthread stuff
[19:58:21] <eddyb> strcat: rustc + llc + ld. no idea how to get rid of those imports though
[19:58:41] <strcat> eddyb: run the internalize pass?
[19:59:01] <strcat> rust shouldn't be making that stuff public
[19:59:36] <eddyb> nothing obvious in the help
[20:00:25] <eddyb> unless I also need to run "opt"
[20:02:33] <strcat> opt -internalize foo.bc
[20:02:35] <strcat> ?
[20:02:38] * strcat doesn't know
[20:02:52] <eddyb> -o foo.bc, too
[20:02:56] <eddyb> but it... doesn't do anything
[20:04:57] <eddyb> strcat: fuck me
[20:05:08] <eddyb> I just passed -O3 to the rustc opt and it crashed
[20:09:41] <eddyb> and I can't make bugpoint use the rustc opt
[20:10:56] <strcat> use the rustc bugpoint
[20:10:58] <strcat> ;p
[20:12:43] <eddyb> doesn't do anything differently
[20:13:31] <eddyb> and I can't find flags to make it use a different executable
[20:14:38] <eddyb> I feel a tad frustrated for wasting time in rustc
[20:15:02] <eddyb> well, more like libsyntax
[20:16:14] *** Joins: pnkfelix1 (pnkfelix@moz-43495417.fbx.proxad.net)
[20:16:47] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Ping timeout)
[20:16:59] *** pnkfelix1 is now known as pnkfelix
[20:25:27] <eddyb> strcat: silly me, I forgot someone makes clang SVN snapshots
[20:30:08] <eddyb> clang-3.5: error: clang frontend command failed due to signal (use -v to see invocation)
[20:30:32] <eddyb> 11 clang-3.5       0x0000000000e339a7 llvm::legacy::PassManagerImpl::run(llvm::Module&) + 631
[20:30:43] <eddyb> although it might be linked against an old llvm *I have no fucking clue*
[20:34:42] <eddyb> strcat: it would be easier to just add cfg(pthreads) to those modules
[20:35:49] *** Joins: canhtak (canhtak@moz-6F820ACE.wl.t.ulaval.ca)
[20:39:51] *** Quits: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP) (Ping timeout)
[20:56:04] <sbalmos> hrm, oddly just occured to me. Use arenas as per-user session isolation?
[21:04:37] *** Joins: pnkfelix1 (pnkfelix@moz-43495417.fbx.proxad.net)
[21:05:54] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Ping timeout)
[21:26:30] *** Quits: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net) (Connection reset by peer)
[21:29:50] *** Joins: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net)
[21:31:08] *** Joins: tabraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net)
[21:31:13] *** Quits: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net) (Input/output error)
[21:31:17] *** Quits: tabraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net) (Input/output error)
[21:31:23] *** Joins: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net)
[21:32:45] *** Quits: pnkfelix1 (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[21:43:35] *** Quits: dbaupp (Thunderbir@moz-3BE4086E.lns20.syd6.internode.on.net) (Ping timeout)
[21:45:10] *** Joins: tabraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net)
[21:45:46] *** Quits: tabraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net) (Input/output error)
[22:03:52] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[22:05:38] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Ping timeout)
[22:06:44] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[22:08:30] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Ping timeout)
[22:10:23] *** Quits: whitglint (uid15486@moz-31ABA2C0.irccloud.com) (Quit: Connection closed for inactivity)
[22:11:21] *** Joins: jmbto (jmbto@moz-FE174E29.fbx.proxad.net)
[22:27:14] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[22:38:59] *** Quits: jmbto (jmbto@moz-FE174E29.fbx.proxad.net) (Quit: Leaving)
[22:40:23] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[22:52:01] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[22:52:16] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[23:04:06] *** Joins: dbaupp (Thunderbir@898216D2.D5A1DCF.37681C44.IP)
[23:12:13] *** Quits: dbaupp (Thunderbir@898216D2.D5A1DCF.37681C44.IP) (Ping timeout)
[23:13:44] *** Quits: devbug (quassel@2D4E172D.4C8B6099.9B57EA59.IP) (Ping timeout)
[23:46:27] *** Joins: dbaupp (Thunderbir@898216D2.D5A1DCF.37681C44.IP)
