[00:09:14] <jack> larsberg: might be interesting for you http://mirror.linux.org.au/linux.conf.au/2014/Thursday/96-Zero-Copy_CompositingResearch_to_Reality_-_Keith_Packard.mp4
[00:12:41] <brson> nice link
[00:13:14] <jack> there's also a GLX history talk
[00:13:29] <jack> http://mirror.linux.org.au/linux.conf.au/2014/Friday/114-Rewriting_GLX_To_Rewrite_X_-_Adam_Jackson.mp4
[00:13:32] <larsberg> nice, I'm going to have to check those out!
[00:13:46] <jack> all the rest of the videos are here: http://mirror.linux.org.au/linux.conf.au/2014/
[00:15:21] <cmr> ugh this mirror is slow
[00:17:52] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[00:19:37] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[00:24:43] *** Joins: luser0 (chatzilla@4EE45A9.85C33881.859058FB.IP)
[00:26:07] *** Parts: luser0 (chatzilla@4EE45A9.85C33881.859058FB.IP) ()
[00:31:23] <larsberg> pcwalton is definitely going to want to watch the zero-copy compositing video
[00:54:21] *** Joins: bholley (bholley@moz-FCAF9AAB.hsd1.ca.comcast.net)
[00:57:57] *** Quits: eatkinson (eatkinson@moz-C52156BC.dsl.bell.ca) (Quit: eatkinson)
[01:02:09] *** Joins: harth (heather@moz-42412102.hsd1.ca.comcast.net)
[01:14:32] *** Joins: dbaupp (Thunderbir@1D1B1F7A.D5A1DCF.37681C44.IP)
[01:18:09] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[01:19:59] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[01:27:11] *** Quits: Jayflux (Jason@moz-C6443785.as13285.net) (Quit: Leaving)
[01:31:20] *** Quits: bholley (bholley@moz-FCAF9AAB.hsd1.ca.comcast.net) (Quit: bholley)
[01:34:37] *** Joins: bholley (bholley@moz-FCAF9AAB.hsd1.ca.comcast.net)
[01:35:43] *** Joins: ghservo (ghservo@1E8607E8.6A2AE50.F3114085.IP)
[01:35:43] <ghservo> [13servo] 15recrack opened pull request #1478: Update UA stylesheets for lists (06master...06useragentcss) 02http://git.io/2gvoZA
[01:35:43] *** Parts: ghservo (ghservo@1E8607E8.6A2AE50.F3114085.IP) ()
[01:42:14] *** Quits: tikue (tkuehn@moz-879E86A9.hsd1.ca.comcast.net) (Ping timeout)
[01:50:00] *** Joins: tikue (tkuehn@moz-879E86A9.hsd1.ca.comcast.net)
[01:58:02] <jack> testing with removal of #[crate_type="rlib"]
[02:04:43] *** Joins: miketaylr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net)
[02:09:35] *** Joins: dbaron (dbaron@moz-A9D01D68.dsl.dynamic.sonic.net)
[02:14:51] <jack> that appears to work.
[02:15:05] <jack> will try to check servo when this finishes and then adjust the bugzilla bug priority
[02:16:25] <dbaupp> jack: btw, is the bug this one: https://github.com/mozilla/rust/issues/11162 ? (based on the error message you said above)
[02:17:13] <jack> i don't see an assert. is there a way to check whether i have the wrong llvm?
[02:17:20] <jack> will it show up in configure output?
[02:17:42] <dbaupp> clang --version, maybe
[02:17:47] <jack> i don't think we've ever installed an external llvm
[02:17:51] * dbaupp doesn't have OSX
[02:18:09] <jack> clang say 3.0svn
[02:18:36] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[02:20:20] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[02:20:57] *** Quits: harth (heather@moz-42412102.hsd1.ca.comcast.net) (Client exited)
[02:35:26] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[02:35:42] *** Joins: brson (brson@981AA104.E81F12CD.76F66111.IP)
[02:35:42] *** ChanServ sets mode: +o brson
[02:41:06] *** Joins: sammykim (sammy.kim@5AB4884B.FCC4549.14D5B978.IP)
[02:45:13] *** Joins: ghservo (ghservo@C8693FCB.6A2AE50.F3114085.IP)
[02:45:13] <ghservo> 01[13rust01] 15metajack pushed 1 new commit to 06servo-20140108: 02http://git.io/hCJG2g
[02:45:13] <ghservo> 13rust/06servo-20140108 14d3b3c66 15Jack Moffitt: Disable rlibs to work around build infrastructure issues.
[02:45:13] *** Parts: ghservo (ghservo@C8693FCB.6A2AE50.F3114085.IP) ()
[02:45:24] *** Quits: bholley (bholley@moz-FCAF9AAB.hsd1.ca.comcast.net) (Quit: bholley)
[02:49:23] *** Joins: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP)
[02:49:23] <ghservo> 01[13servo01] 15bors-servo pushed 2 new commits to 06auto: 02http://git.io/Ng82jQ
[02:49:23] <ghservo> 13servo/06auto 14a7ef1cd 15Jack Moffitt: Upgrade to latest Rust.
[02:49:23] <ghservo> 13servo/06auto 148c33953 15bors-servo: auto merge of #1473 : metajack/servo/rustup-20131219, r=jdm
[02:49:23] *** Parts: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP) ()
[02:52:01] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[02:52:01] *** ChanServ sets mode: +o jdm
[02:52:15] <jdm> fun times in the land of servo it seems
[02:55:03] <sammykim> jdm: I am working on hover for CSS pseudo class . But I dont' know where I need to catch for mouse event. From Window mouse event happens, Does script task get the event or render task get the event? Actually, I am reading this ref "https://github.com/mozilla/servo/wiki/Transription--Layout-and-ACID2#pseudo-class" too.
[02:55:39] <sammykim> kmc says "uses display list for hit testing". Can I do it as kmc says?
[02:56:10] <jdm> hmm
[02:56:50] <jdm> gecko uses real dom events and has methods that handle them that set hover styles
[02:57:05] <jdm> we should do that too, eventually
[02:58:04] <jdm> hmm hmm
[02:58:44] <sammykim> I see. that's why patrick told about only other without dom events can covers acid2 or not..
[03:01:01] <sammykim> Does dom events mean javscript things right.? As I understood, we eventually also need to set hover style with javscript. But we don't know it's needed to pass ACID2 or not. Is that right?
[03:01:32] <jdm> the real question is whether it's worth doing hover styles the "wrong" way right now
[03:02:13] <jdm> however, I don't know how much work is required to do it the right way at this moment
[03:02:36] <jdm> we don't have any code that handles events in the script task right now
[03:02:51] <sammykim> Do you mean wrong way is to use display list or some other ways without real dome events?
[03:02:58] <jdm> the wrong way is to us ethe display list
[03:03:05] <jdm> because that's not what we want to do in the end
[03:03:17] <sammykim> Thanks! jdm.
[03:03:29] <jdm> my suggestion is to avoid the hover style for now
[03:03:43] <jdm> it's not a big part of acid2, and I think we should do the events the correct way from the beginning
[03:04:00] <sammykim> I will have a lunch and be back. Thanks for answering!
[03:04:03] <jdm> but I think we need to do a bit more infrastructure work to allow that first
[03:16:22] *** Joins: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP)
[03:16:22] <ghservo> 01[13servo01] 15bors-servo 04force-pushed 06auto from 148c33953 to 14e8b0eae: 02http://git.io/c8GovQ
[03:16:22] *** Parts: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP) ()
[03:17:42] *** Joins: eholk (eholk@moz-58C5EE6F.wavecable.com)
[03:18:24] *** Quits: kimundi (kimundi@moz-6726BDB1.dip0.t-ipconnect.de) (Ping timeout)
[03:18:55] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[03:20:47] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[03:21:58] *** Joins: kimundi (kimundi@moz-B9792FFA.dip0.t-ipconnect.de)
[03:25:58] *** Quits: victorporof (victorporo@416E2802.271BFD43.9B1E38F4.IP) (Quit: victorporof)
[03:26:12] *** kimundi is now known as zz_kimundi
[03:27:32] *** Quits: miketaylr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net) (Quit: Leaving...)
[03:30:34] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Quit: Lost terminal)
[03:32:33] *** Quits: eholk (eholk@moz-58C5EE6F.wavecable.com) (Quit: eholk)
[03:33:02] *** zz_kimundi is now known as kimundi
[03:34:26] *** Joins: eatkinson (eatkinson@moz-C52156BC.dsl.bell.ca)
[03:35:24] *** Quits: sammykim (sammy.kim@5AB4884B.FCC4549.14D5B978.IP) (Quit: Lost terminal)
[03:50:09] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[03:50:22] *** Joins: miketaylr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net)
[03:51:37] *** Quits: brson (brson@981AA104.E81F12CD.76F66111.IP) (Quit: Lost terminal)
[03:52:15] *** Joins: brson (brson@981AA104.E81F12CD.76F66111.IP)
[03:52:15] *** ChanServ sets mode: +o brson
[03:54:37] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[03:54:37] *** ChanServ sets mode: +qo dherman dherman
[03:55:20] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[03:57:13] <jack> oh man. here it comes...
[04:01:06] *** Quits: brson (brson@981AA104.E81F12CD.76F66111.IP) (Ping timeout)
[04:01:18] *** Joins: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP)
[04:01:19] <ghservo> 01[13servo01] 15bors-servo merged 06auto into 06master: 02http://git.io/XgCvlw
[04:01:19] *** Parts: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP) ()
[04:01:21] *** Joins: ghservo (ghservo@C8693FCB.6A2AE50.F3114085.IP)
[04:01:21] <ghservo> [13servo] 15bors-servo closed pull request #1473: Upgrade to latest Rust. (06master...06rustup-20131219) 02http://git.io/hnQGJw
[04:01:21] *** Parts: ghservo (ghservo@C8693FCB.6A2AE50.F3114085.IP) ()
[04:01:30] *** Joins: sammykim (sammy.kim@5AB4884B.FCC4549.14D5B978.IP)
[04:03:51] <jack> bjz: you have looked at lbepoxy?
[04:07:42] *** kimundi is now known as zz_kimundi
[04:19:23] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[04:21:13] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[04:31:38] <larsberg> Wow! Did the change to rlibs do it?
[04:35:24] <larsberg> Congrats on landing it :)
[04:36:09] <jack> yeah
[04:37:09] *** Quits: tikue (tkuehn@moz-879E86A9.hsd1.ca.comcast.net) (Quit: tikue)
[05:19:49] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[05:21:34] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[05:27:51] *** Quits: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net) (Connection reset by peer)
[05:29:13] *** Joins: Debloper (debloper@moz-88FF8AE8.redhat.com)
[05:30:20] *** Joins: tikue (tkuehn@moz-879E86A9.hsd1.ca.comcast.net)
[05:32:24] *** Joins: khodzha (khodzha@D40BD4BD.3E410295.CA6E2165.IP)
[05:32:56] *** Quits: lurk_ (chatzilla@moz-F088D030.hsd1.in.comcast.net) (Ping timeout)
[05:45:09] *** Quits: miketaylr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net) (Quit: Linkinus - http://linkinus.com)
[05:54:11] *** Quits: eatkinson (eatkinson@moz-C52156BC.dsl.bell.ca) (Quit: eatkinson)
[06:02:44] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[06:18:51] *** Quits: jaeman (Mibbit@B4104EBB.3CC170B1.1E14B209.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[06:19:30] *** Quits: dbaron (dbaron@moz-A9D01D68.dsl.dynamic.sonic.net) (Ping timeout)
[06:19:40] *** Joins: kanru (kanru@moz-99690620.hinet-ip.hinet.net)
[06:20:07] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[06:21:29] *** Joins: harth_ (heather@moz-42412102.hsd1.ca.comcast.net)
[06:21:52] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[06:23:25] *** Quits: harth_ (heather@moz-42412102.hsd1.ca.comcast.net) (Ping timeout)
[06:26:26] *** Quits: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net) (Quit: Taking a nap.)
[06:27:24] *** Joins: lurk_ (chatzilla@moz-F088D030.hsd1.in.comcast.net)
[06:34:36] *** Quits: tikue (tkuehn@moz-879E86A9.hsd1.ca.comcast.net) (Quit: tikue)
[06:36:32] *** Joins: dbaron (dbaron@moz-A9D01D68.dsl.dynamic.sonic.net)
[06:42:40] *** Joins: bholley (bholley@moz-FCAF9AAB.hsd1.ca.comcast.net)
[06:45:28] *** Quits: dbaron (dbaron@moz-A9D01D68.dsl.dynamic.sonic.net) (Ping timeout)
[06:56:43] *** Joins: dbaron (dbaron@moz-A9D01D68.dsl.dynamic.sonic.net)
[07:07:57] *** Quits: canhtak (canhtak@moz-DB18D73D.wl.t.ulaval.ca) (Quit: canhtak)
[07:12:19] *** Quits: dbaupp (Thunderbir@1D1B1F7A.D5A1DCF.37681C44.IP) (Ping timeout)
[07:20:25] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[07:22:10] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[07:24:01] *** Joins: eddyb (eddy@EDE07015.D51DAF03.FB866788.IP)
[07:34:41] *** Joins: ahal (ahal@moz-63C6276F.dynamic.hinet.net)
[07:35:56] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[07:40:04] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[07:40:26] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[07:41:03] *** Quits: maxli (maxli@moz-EE42E0E.student.cs.uwaterloo.ca) (Quit: Leaving.)
[07:42:09] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[07:43:05] *** Quits: bholley (bholley@moz-FCAF9AAB.hsd1.ca.comcast.net) (Quit: bholley)
[07:43:36] *** Joins: victorporof (victorporo@416E2802.271BFD43.9B1E38F4.IP)
[07:45:56] *** Quits: victorporof (victorporo@416E2802.271BFD43.9B1E38F4.IP) (Quit: victorporof)
[07:56:41] *** Joins: maxli (maxli@moz-EE42E0E.student.cs.uwaterloo.ca)
[07:58:25] *** Quits: maxli (maxli@moz-EE42E0E.student.cs.uwaterloo.ca) (Ping timeout)
[08:12:57] *** Joins: dbaupp (Thunderbir@moz-6002BAEA.lns20.syd6.internode.on.net)
[08:14:41] *** Joins: harth (heather@moz-42412102.hsd1.ca.comcast.net)
[08:16:36] *** Quits: harth (heather@moz-42412102.hsd1.ca.comcast.net) (Ping timeout)
[08:34:33] *** Quits: robn (robn@moz-76B0302C.static.internode.on.net) (Quit: Coyote finally caught me)
[08:35:09] *** Joins: robn (robn@moz-76B0302C.static.internode.on.net)
[08:39:21] *** Quits: dbaron (dbaron@moz-A9D01D68.dsl.dynamic.sonic.net) (Ping timeout)
[08:40:51] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[08:42:33] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[08:58:40] *** Quits: ahal (ahal@moz-63C6276F.dynamic.hinet.net) (Ping timeout)
[09:13:13] *** Joins: jackneill (jackneill@moz-985E4FF7.pool.digikabel.hu)
[09:21:39] *** Joins: Kostic (marko@moz-6E10EF7B.mbb.telenor.rs)
[09:30:27] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[09:32:28] *** Quits: sammykim (sammy.kim@5AB4884B.FCC4549.14D5B978.IP) (Quit: Lost terminal)
[09:38:38] *** Quits: lurk_ (chatzilla@moz-F088D030.hsd1.in.comcast.net) (Ping timeout)
[09:40:51] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[09:41:01] *** Quits: qlkzy (qlkzy@moz-A97B5CE9.members.linode.com) (Quit: ZNC - http://znc.sourceforge.net)
[09:41:23] *** Joins: qlkzy (qlkzy@moz-A97B5CE9.members.linode.com)
[09:42:33] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[09:59:43] *** Quits: qlkzy (qlkzy@moz-A97B5CE9.members.linode.com) (Quit: ZNC - http://znc.sourceforge.net)
[10:01:18] *** Joins: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP)
[10:01:18] <ghservo> 01[13servo01] 15bors-servo pushed 0 new commits to 06auto: 02http://git.io/WSN3cg
[10:01:18] *** Parts: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP) ()
[10:01:19] *** Joins: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP)
[10:01:19] <ghservo> 01[13servo01] 15bors-servo pushed 2 new commits to 06auto: 02http://git.io/vFmIVQ
[10:01:19] <ghservo> 13servo/06auto 140d8ee06 15Youngmin Yoo: Update UA stylesheets for lists
[10:01:19] <ghservo> 13servo/06auto 140489292 15bors-servo: auto merge of #1478 : recrack/servo/useragentcss, r=SimonSapin...
[10:01:19] *** Parts: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP) ()
[10:10:48] *** Joins: qlkzy (qlkzy@moz-A97B5CE9.members.linode.com)
[10:16:16] *** Joins: victorporof (victorporo@48342A5A.33FD6404.79933D60.IP)
[10:25:18] *** Joins: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP)
[10:25:18] <ghservo> 01[13servo01] 15bors-servo merged 06auto into 06master: 02http://git.io/vFmIVQ
[10:25:18] *** Parts: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP) ()
[10:25:19] *** Joins: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP)
[10:25:19] <ghservo> [13servo] 15bors-servo closed pull request #1478: Update UA stylesheets for lists (06master...06useragentcss) 02http://git.io/2gvoZA
[10:25:19] *** Parts: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP) ()
[10:30:51] *** Quits: Kostic (marko@moz-6E10EF7B.mbb.telenor.rs) (Ping timeout)
[10:31:38] *** Joins: Kostic (marko@moz-6E10EF7B.mbb.telenor.rs)
[10:41:03] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[10:42:00] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Connection reset by peer)
[10:42:21] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[10:44:08] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[10:48:23] *** Quits: gavin (gavin@moz-DB4A9C19.scl3.mozilla.com) (Ping timeout)
[10:51:10] *** Quits: jackneill (jackneill@moz-985E4FF7.pool.digikabel.hu) (Quit: WeeChat 0.4.1)
[10:52:47] *** Joins: gavin (gavin@moz-DB4A9C19.scl3.mozilla.com)
[10:59:58] *** Joins: jackneill (jackneill@moz-985E4FF7.pool.digikabel.hu)
[11:04:30] *** zz_kimundi is now known as kimundi
[11:15:18] *** Quits: Kostic (marko@moz-6E10EF7B.mbb.telenor.rs) (Ping timeout)
[11:21:44] *** Joins: marcosc_ (marcosc@moz-B9805BF7.dsl.telepac.pt)
[11:31:54] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[11:39:20] *** Joins: ghservo (ghservo@C8693FCB.6A2AE50.F3114085.IP)
[11:39:20] <ghservo> [13servo] 15jgraham opened issue #1479: Run web-platform-tests in servo 02http://git.io/fHhhMg
[11:39:20] *** Parts: ghservo (ghservo@C8693FCB.6A2AE50.F3114085.IP) ()
[11:41:34] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[11:43:16] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[12:03:44] *** Quits: Debloper (debloper@moz-88FF8AE8.redhat.com) (Quit: Leaving.)
[12:04:33] <SimonSapin> jgraham: is your wpt harness available?
[12:05:58] <jgraham> SimonSapin: Well I just checked it in to mozill-ash, so yes
[12:06:15] <jgraham> http://hg.mozilla.org/projects/ash
[12:06:30] <jgraham> Under /testing/web-platform-tests
[12:09:19] <SimonSapin> jgraham: whatâ€™s mozilla-ash?
[12:09:39] <SimonSapin> I mean how is it different from central?
[12:11:54] <jgraham> It's a staging repo for developing new test harnesses
[12:12:34] <jgraham> See https://wiki.mozilla.org/ReleaseEngineering/DisposableProjectBranches
[12:16:34] *** Quits: deokjinkim (Mibbit@B4104EBB.3CC170B1.1E14B209.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[12:17:01] *** Joins: Kostic (marko@C4D4CB5C.58A2DD99.2168A69F.IP)
[12:23:31] *** Quits: marcosc_ (marcosc@moz-B9805BF7.dsl.telepac.pt) (Input/output error)
[12:37:32] *** kimundi is now known as zz_kimundi
[12:41:55] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[12:43:46] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[13:03:45] *** Joins: lurk_ (chatzilla@moz-F088D030.hsd1.in.comcast.net)
[13:16:34] *** Joins: Ms2ger (Ms2ger@AA55AE55.592AEF45.F15B0BB3.IP)
[13:19:42] *** zz_kimundi is now known as kimundi
[13:28:53] <Ms2ger> So did the upgrade stick?
[13:42:26] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[13:44:19] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[13:46:26] <SimonSapin> Ms2ger: looks like it
[13:47:04] <SimonSapin> itâ€™s in master, and builds on my machine
[13:47:53] <Ms2ger> \o/
[13:48:32] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[13:48:32] *** ChanServ sets mode: +o jdm
[13:49:22] <jgraham> jdm: !
[13:49:32] <jgraham> Just the person to answer a question
[13:49:33] <jdm> yo
[13:49:49] <jgraham> Specifically a question with "let jdm decide" in it
[13:50:05] <jdm> ha
[13:50:37] <jgraham> https://critic.hoppipolla.co.uk/showcomment?chain=1167
[13:50:51] <jgraham> WWJ(DM)D?
[13:51:14] <Ms2ger> WWBBD, though?
[13:51:28] <jdm> oh, right
[13:56:04] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[13:59:48] *** bhearsum is now known as bhearsum|buildduty
[14:07:01] *** Quits: jackneill (jackneill@moz-985E4FF7.pool.digikabel.hu) (Quit: WeeChat 0.4.1)
[14:07:18] *** Joins: jackneill (jackneill@moz-985E4FF7.pool.digikabel.hu)
[14:15:39] *** Quits: jackneill (jackneill@moz-985E4FF7.pool.digikabel.hu) (Quit: WeeChat 0.4.1)
[14:15:59] *** Quits: lurk_ (chatzilla@moz-F088D030.hsd1.in.comcast.net) (Ping timeout)
[14:16:10] *** Joins: jackneill (jackneill@moz-985E4FF7.pool.digikabel.hu)
[14:17:02] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[14:18:04] *** Quits: jackneill (jackneill@moz-985E4FF7.pool.digikabel.hu) (Quit: WeeChat 0.4.1)
[14:18:51] *** Joins: jackneill (jackneill@moz-985E4FF7.pool.digikabel.hu)
[14:20:39] <tetsuharu> jdm: rebase done
[14:20:53] <tetsuharu> about: https://github.com/mozilla/servo/pull/1448
[14:23:59] <jdm> jgraham: what do we do about tests that use nonstandard methods like gc() to test certain behaviours of servo dom bindings?
[14:24:03] <Ms2ger> Land it!
[14:25:13] *** Joins: ghservo (ghservo@C8693FCB.6A2AE50.F3114085.IP)
[14:25:13] <ghservo> 01[13servo01] 15bors-servo pushed 0 new commits to 06auto: 02http://git.io/hYxK_g
[14:25:13] *** Parts: ghservo (ghservo@C8693FCB.6A2AE50.F3114085.IP) ()
[14:25:15] *** Joins: ghservo (ghservo@C8693FCB.6A2AE50.F3114085.IP)
[14:25:16] <ghservo> 01[13servo01] 15bors-servo pushed 6 new commits to 06auto: 02http://git.io/ppPYgw
[14:25:16] <ghservo> 13servo/06auto 14617a95f 15Tetsuharu OHZEKI: Remove needless code....
[14:25:16] <ghservo> 13servo/06auto 148dc5fe0 15Tetsuharu OHZEKI: Split up the utility function to make internal attribute's namespace.
[14:25:16] <ghservo> 13servo/06auto 14fd0dadb 15Tetsuharu OHZEKI: Enable only remove operation for Document::update_idmap().
[14:25:18] *** Parts: ghservo (ghservo@C8693FCB.6A2AE50.F3114085.IP) ()
[14:25:20] <jgraham> jdm: Don't run mochitest?
[14:25:43] <jgraham> jdm: Assuming you are talking about the web-platform-tests, they don't have that kind of test by definition
[14:26:16] <jdm> jgraham: right. so we keep our content harness and use them for non-standard stuff I guess.
[14:26:19] *** Joins: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca)
[14:27:00] <jgraham> Right, so if you want that kind of stuff it is probably possible to make a seperate repo that will also work with the wpt runner
[14:28:13] <jdm> jgraham: does the harness require repos or something?
[14:28:13] <jgraham> I haven't paid that problem much attention, but I think it is something that I will need to solve anyway.
[14:28:30] <jgraham> No, I guess it can just be a seperate directory
[14:28:38] <jgraham> I am just used to talking about test repos
[14:28:55] <Ms2ger> Otoh, that makes it much easier to stick tests in there :/
[14:29:04] <jgraham> Although the main point is that it wouldn't be in the w-p-t repo
[14:29:35] <Ms2ger> Maybe we should expose a no-op gc() by default, and let vendors make it do something in threport.js
[14:30:06] <jgraham> Ms2ger: Maybe? I can see lots of ways this could go wrong though
[14:30:35] <Ms2ger> Careful review? :)
[14:30:47] <jgraham> I mean if we want gc() someone else will want mousemove() and someone else will want [...]
[14:31:03] <Ms2ger> Yes
[14:31:09] <jgraham> Ms2ger: There's only a first time for everything that happens at least once
[14:31:12] * Ms2ger wants mousemove already
[14:31:46] <jgraham> Oh, does gecko have that?
[14:32:00] <jgraham> It was supposed to be a presto example :)
[14:32:42] <jgraham> Anyway, I understand the concern that people would put tests in the wrong place
[14:33:06] <jgraham> I could posit careful review as the answer to that as well, but I can't see it working
[14:33:21] <jgraham> (maybe more for servo than gecko?)
[14:34:52] <Ms2ger> Maybe
[14:38:05] <jgraham> Would be interesting if there was a way to determine which tests used non-standard objects, but I don't think there is really
[14:39:26] <Ms2ger> Only expose the function when you have a <meta content=please-gimme-gc>?
[14:41:29] <jgraham> Well that gices you it on a per-file level
[14:41:32] <jgraham> *gives
[14:41:40] <Ms2ger> Oh, right
[14:42:35] <Ms2ger>  rename src/components/main/layout/{box.rs => box_.rs} (92%)
[14:42:36] <Ms2ger> :/
[14:42:52] <jdm> yep
[14:42:56] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[14:43:34] * Ms2ger looks at the backlog of test reviews, sighs
[14:44:41] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[14:49:10] *** Joins: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP)
[14:49:10] <ghservo> 01[13servo01] 15bors-servo merged 06auto into 06master: 02http://git.io/ppPYgw
[14:49:10] *** Parts: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP) ()
[14:49:14] *** Joins: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP)
[14:49:15] <ghservo> [13servo] 15bors-servo closed pull request #1448: Implement Element.removeAttribute()/removeAttributeNS() (06master...06attr) 02http://git.io/J0FoGA
[14:49:15] *** Parts: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP) ()
[14:52:36] <Ms2ger> jdm, neat trick
[14:59:34] *** Joins: marcosc (marcosc@moz-B9805BF7.dsl.telepac.pt)
[15:01:52] *** Quits: marcosc (marcosc@moz-B9805BF7.dsl.telepac.pt) (Quit: Leaving...)
[15:01:56] *** Joins: marcosc (marcosc@moz-B9805BF7.dsl.telepac.pt)
[15:26:47] *** Joins: miketaylr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net)
[15:32:56] *** kimundi is now known as zz_kimundi
[15:40:11] <zmike> jdm: working on rebasing my task naming pr...hopefully done soonish
[15:40:27] <jdm> zmike: thanks!
[15:40:50] <zmike> my bad getting the other commit in there, still getting used to working with github and prs...
[15:41:21] <zmike> so if I understand from the rebase process, spawn_with is no longer around?
[15:43:45] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[15:44:06] <jdm> I believe that is the case
[15:45:28] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[15:47:12] *** Joins: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net)
[15:47:19] *** Quits: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net) (Quit: hoverbear)
[15:47:54] *** Quits: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com) (Ping timeout)
[15:52:14] <Ms2ger> real	59m57.316s
[15:52:14] <Ms2ger> user	112m36.438s
[15:52:14] <Ms2ger> sys	3m7.820s
[15:52:20] <Ms2ger> And lots of warnings!
[15:54:37] <jdm> jgraham: remind me, should I be reviewing the rest of the PR for innerHTML?
[15:54:47] <Ms2ger> What's left?
[15:54:49] *** Joins: gandalf (zbraniecki@moz-912D7A86.hsd1.ca.comcast.net)
[15:55:00] * jdm hasn't actually looked at it at all
[15:56:20] <Ms2ger> Can we make unused imports fatal?
[15:56:24] <Ms2ger> $ git checkout -b unused-imports
[15:56:25] <Ms2ger> fatal: A branch named 'unused-imports' already exists.
[15:57:43] <jgraham> jdm: Well you or Ms2ger or someone should
[15:59:10] *** Quits: khodzha (khodzha@D40BD4BD.3E410295.CA6E2165.IP) (Ping timeout)
[15:59:23] <jdm> I forget if rust can forbid that
[15:59:37] <jdm> ah, -D
[16:00:37] <jack> Ms2ger: what are you timing?
[16:00:40] *** Joins: ghservo (ghservo@1E8607E8.6A2AE50.F3114085.IP)
[16:00:40] <ghservo> [13servo] 15jdm opened issue #1480: Forbid ununsed imports 02http://git.io/LIlpmw
[16:00:40] *** Parts: ghservo (ghservo@1E8607E8.6A2AE50.F3114085.IP) ()
[16:01:00] <Ms2ger> ununsed, eh
[16:01:08] <jdm> hush you
[16:01:12] <Ms2ger> jack, rebuilding Servo after the upgrade
[16:01:15] * jdm -> office
[16:01:29] <jack> i thought that i had gotten them all
[16:01:38] <jack> well, except for the stuff in rust-http
[16:01:38] <Ms2ger> jdm, innerHTML looks good to me, dunno if you still want to look?
[16:01:52] <jdm> Ms2ger: I think I'll glance through it today
[16:01:59] <jdm> or after the fact
[16:02:05] <Ms2ger> Also src/support/sharegl/sharegl/platform/linux.rs
[16:02:07] <jdm> feel free to land it
[16:02:16] <Ms2ger> jgraham, ^
[16:02:30] <jack> i think pcwalton said we could remove sharegl.
[16:02:35] *** Joins: eholk (eholk@3A717AE8.2A034839.284344F5.IP)
[16:02:45] <Ms2ger> jgraham, it's not just good, it's good enough!
[16:04:17] <Ms2ger> Note to self: commit
[16:04:20] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Quit: Lost terminal)
[16:04:28] <jgraham> Ms2ger: OK, I will rebase it
[16:04:41] *** Joins: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP)
[16:04:41] <ghservo> [13servo] 15Ms2ger opened pull request #1481: Remove unused imports. (06master...06unused-imports-2) 02http://git.io/iS5iAw
[16:04:41] *** Parts: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP) ()
[16:04:48] <Ms2ger> And then I get to review the rebase? ;)
[16:05:47] <jgraham> Maybe?
[16:06:22] <abinader> Ms2ger: thanks, those imports were leftovers from the GetHead() impl on HTMLDocument
[16:06:34] <Ms2ger> Yeah, I realized :)
[16:11:03] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[16:12:15] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[16:15:40] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[16:15:40] *** ChanServ sets mode: +qo dherman dherman
[16:16:30] *** Joins: khodzha (khodzha@56E1B165.FF90EB8A.4595224C.IP)
[16:17:04] *** Quits: eholk (eholk@3A717AE8.2A034839.284344F5.IP) (Quit: eholk)
[16:17:38] <jgraham> Ms2ger: I don't think it's that hard to review :)
[16:19:10] *** Joins: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com)
[16:19:13] *** Joins: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP)
[16:19:13] <ghservo> 01[13servo01] 15bors-servo pushed 0 new commits to 06auto: 02http://git.io/26hPTw
[16:19:13] *** Parts: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP) ()
[16:19:15] *** Joins: ghservo (ghservo@F6EE6DE3.6A2AE50.F3114085.IP)
[16:19:15] <ghservo> 01[13servo01] 15bors-servo pushed 2 new commits to 06auto: 02http://git.io/rQbcZg
[16:19:15] <ghservo> 13servo/06auto 14b15e6df 15Ms2ger: Remove unused imports.
[16:19:15] <ghservo> 13servo/06auto 1499f24fb 15bors-servo: auto merge of #1481 : Ms2ger/servo/unused-imports-2, r=metajack
[16:19:15] *** Parts: ghservo (ghservo@F6EE6DE3.6A2AE50.F3114085.IP) ()
[16:19:49] <Ms2ger> jgraham, you're misunderestimating the UX challenge :)
[16:20:46] <jgraham> Ms2ger: It's a one line change to Bindings.conf! (and I might have accidentially deleted a newline)
[16:21:55] *** Joins: CaseyBecking (CaseyBecki@ED8170C4.82E507D6.C334098E.IP)
[16:26:35] <jgraham> Ms2ger, jdm: Pushed a squashed version
[16:28:22] *** Quits: khodzha (khodzha@56E1B165.FF90EB8A.4595224C.IP) (Ping timeout)
[16:31:43] *** Joins: jet (jet@moz-79F891EE.hsd1.ca.comcast.net)
[16:37:18] *** Joins: sedman_ (sedman@E4D2F0A.47298EC7.57E8EAD3.IP)
[16:40:11] *** Joins: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP)
[16:40:11] <ghservo> 01[13servo01] 15bors-servo merged 06auto into 06master: 02http://git.io/rQbcZg
[16:40:11] *** Parts: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP) ()
[16:40:13] *** Joins: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP)
[16:40:13] <ghservo> [13servo] 15bors-servo closed pull request #1481: Remove unused imports. (06master...06unused-imports-2) 02http://git.io/iS5iAw
[16:40:13] *** Parts: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP) ()
[16:42:44] <eddyb> should I finish my PNG decoder?
[16:43:04] <eddyb> or should I continue digging dirt in rustc?
[16:43:26] <jack> nss developers aren't super responsive: https://bugzilla.mozilla.org/show_bug.cgi?id=911240
[16:44:04] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[16:45:46] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[16:47:06] *** Joins: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP)
[16:47:06] <ghservo> [13servo] 15brunoabinader opened issue #1482: Implement Document::doctype 02http://git.io/xUAe4Q
[16:47:06] *** Parts: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP) ()
[16:48:42] *** Joins: hoverbear (hoverbear@EBFA78B5.F19E5E7B.E74D50F2.IP)
[16:48:43] *** Joins: khodzha (khodzha@D40BD4BD.3E410295.CA6E2165.IP)
[16:49:15] *** Joins: jdm (jdm@FCCEA34F.7672369.D8E68FF6.IP)
[16:49:15] *** ChanServ sets mode: +o jdm
[16:49:28] *** Quits: hoverbear (hoverbear@EBFA78B5.F19E5E7B.E74D50F2.IP) (Quit: Taking a nap.)
[16:49:52] <Ms2ger> eddyb, PNG
[16:50:46] *** Joins: ghservo (ghservo@1E8607E8.6A2AE50.F3114085.IP)
[16:50:46] <ghservo> [13servo] 15brunoabinader opened pull request #1483: Implement Document::doctype (06master...06document-doctype) 02http://git.io/2Al2Dg
[16:50:46] *** Parts: ghservo (ghservo@1E8607E8.6A2AE50.F3114085.IP) ()
[16:51:03] <Ms2ger> jack, could have been NSPR...
[16:51:20] <abinader> Ms2ger: r? https://github.com/mozilla/servo/pull/1483 :-)
[16:51:24] *** Quits: jdm (jdm@FCCEA34F.7672369.D8E68FF6.IP) (Ping timeout)
[16:51:49] <eddyb> Ms2ger: just one more rustc compile... it gets addicting fast - you've seen the libsyntax renaming PR, haven't you?
[16:52:04] *** Joins: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP)
[16:52:04] *** ChanServ sets mode: +o jdm
[16:52:16] <Ms2ger> eddyb, don't think so... I don't look at rust often
[16:53:16] <jdm> jack: ftr, you usually need to flag someone for review or needinfo if you want a response from NSPR/NSS folk
[16:53:17] <eddyb> Ms2ger: the 4.3k changed lines one
[16:53:37] <jack> jdm: how in the world would i know who to add? :)
[16:53:45] <Ms2ger> :briansmith
[16:53:51] <jdm> jack: there's a suggested reviewers field
[16:53:56] <jdm> also the modules page
[16:54:04] *** Joins: hoverbear (hoverbear@EBFA78B5.F19E5E7B.E74D50F2.IP)
[16:54:14] <jdm> https://wiki.mozilla.org/Modules/Core#security
[16:54:49] <jdm> granted, the suggested reviewers probably didn't exist when you submitted that patch
[16:54:56] <jack> i don't see a suggested reviewers field
[16:55:13] <Ms2ger> Set review to ?
[16:55:23] <Ms2ger> Then you get them
[16:55:37] <jdm> bsmith has 26 reviews in queue :o
[16:56:07] <jack> i don't see a review field either.
[16:56:30] <jdm> jack: click Details
[16:56:59] <jack> on the patch itself?
[16:57:17] *** Quits: hoverbear (hoverbear@EBFA78B5.F19E5E7B.E74D50F2.IP) (Quit: Taking a nap.)
[16:57:21] <Ms2ger> abinader, can you try closing and reopening your pr?
[16:57:35] <abinader> Ms2ger: sure
[16:57:45] <jack> jdm: found it. so should i just pick one at random or use ms2ger's suggest?
[16:57:50] <jdm> go with bsmith
[16:58:09] *** Joins: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP)
[16:58:09] <ghservo> [13servo] 15brunoabinader closed pull request #1483: Implement Document::doctype (06master...06document-doctype) 02http://git.io/2Al2Dg
[16:58:09] *** Parts: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP) ()
[16:58:12] *** Joins: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP)
[16:58:12] <ghservo> [13servo] 15brunoabinader reopened pull request #1483: Implement Document::doctype (06master...06document-doctype) 02http://git.io/2Al2Dg
[16:58:12] *** Parts: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP) ()
[16:58:36] <jgraham> jdm: r? https://github.com/mozilla/servo/pull/1450 Ms2ger approved it on critic
[16:58:46] <abinader> done, and thanks for the review jdm :-)
[16:58:49] *** Joins: hoverbear (hoverbear@EBFA78B5.F19E5E7B.E74D50F2.IP)
[16:59:00] <jdm> Ms2ger: do you want r+ powers?
[16:59:06] <jdm> it seems silly for you not to have them
[17:00:03] <Ms2ger> jdm, I guess I'm doing all the reviews anyway :)
[17:00:19] *** Joins: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP)
[17:00:19] <ghservo> [13rust-freetype] 15metajack closed pull request #8: Ported to Rust master (pre-0.9) (06master...06master) 02http://git.io/HO7s_w
[17:00:19] *** Parts: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP) ()
[17:00:25] <Ms2ger> jdm, also, I'm pretty sure you're wrong :)
[17:00:54] <jdm> Ms2ger: you claim that it is sensible for you to be a reviewer without merge powers?
[17:00:54] <Ms2ger> jgraham, https://github.com/mozilla/servo/pull/1483 seems to be stuck
[17:01:09] *** Joins: bholley (bholley@moz-FCAF9AAB.hsd1.ca.comcast.net)
[17:01:16] *** Joins: ghservo (ghservo@F6EE6DE3.6A2AE50.F3114085.IP)
[17:01:16] <ghservo> 01[13servo01] 15bors-servo pushed 2 new commits to 06auto: 02http://git.io/Qe7O-A
[17:01:16] <ghservo> 13servo/06auto 146baf127 15James Graham: Implement innerHTML getter for HTML documents...
[17:01:16] <ghservo> 13servo/06auto 14b1ea69f 15bors-servo: auto merge of #1450 : jgraham/servo/innerHTML, r=jdm...
[17:01:16] *** Parts: ghservo (ghservo@F6EE6DE3.6A2AE50.F3114085.IP) ()
[17:01:31] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[17:01:37] <Ms2ger> jdm, avoiding reviews is why I'm trying not to get r+ power in Gecko... I already lost here, so sure, I guess :)
[17:01:42] <jdm> heh
[17:02:31] <jack> ms2ger: you lost here?
[17:02:51] <Ms2ger> abinader, I've got a fun and actually quite common test case for you
[17:02:54] <Ms2ger> <!-- Put IE6 in quirks mode -->
[17:02:54] <Ms2ger> <!DOCTYPE html>
[17:03:08] <jdm> heh
[17:03:24] <abinader> Ms2ger: comment before doctype, i see
[17:04:25] <jgraham> Ms2ger: That review seemed to have an object that wasn't in critic's repo. I just triggered a re-fetch, so hopefully a close and reopen will work now
[17:04:46] <Ms2ger> Weird
[17:05:28] <Ms2ger> abinader, so try once more? :)
[17:05:37] <abinader> Ms2ger: ack!
[17:05:52] *** Joins: ghservo (ghservo@F6EE6DE3.6A2AE50.F3114085.IP)
[17:05:52] <ghservo> [13servo] 15brunoabinader closed pull request #1483: Implement Document::doctype (06master...06document-doctype) 02http://git.io/2Al2Dg
[17:05:52] *** Parts: ghservo (ghservo@F6EE6DE3.6A2AE50.F3114085.IP) ()
[17:05:57] *** Joins: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP)
[17:05:57] <ghservo> [13servo] 15brunoabinader reopened pull request #1483: Implement Document::doctype (06master...06document-doctype) 02http://git.io/2Al2Dg
[17:05:57] *** Parts: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP) ()
[17:06:14] <Ms2ger> Yep
[17:06:30] <abinader> ok now critic sent me an email
[17:07:22] <Ms2ger> And some more now, I think :)
[17:07:32] <abinader> yeah :)
[17:08:16] *** Quits: bholley (bholley@moz-FCAF9AAB.hsd1.ca.comcast.net) (Quit: bholley)
[17:08:27] <abinader> just in case: are comments the only types allowed before doctype? is this documented somewhere?
[17:08:32] *** Quits: jet (jet@moz-79F891EE.hsd1.ca.comcast.net) (Quit: jet)
[17:09:02] <jgraham> abinader: "allowed" isn't the right way to think about it
[17:09:58] *** zz_kimundi is now known as kimundi
[17:10:10] <jack> jgraham: tell me more about this test harness stuff. I want to discuss it in today's meeting.
[17:10:25] <jack> Now that the upgrade has landed, I want to get our testing story in shape.
[17:10:30] <jgraham> abinader: There are two places one would look: 1) the dom spec to see what happens when you appendChild a doctype somewhere else and 2) the parser spec to see what happens when you get a doctype token somewhere other than the start of the document
[17:11:26] <Ms2ger> abinader, and the other thing is looking at what the dom spec says about Document.doctype :)
[17:11:43] <abinader> Ms2ger: I couldn't easily find it on dom spec
[17:11:48] *** Quits: sedman_ (sedman@E4D2F0A.47298EC7.57E8EAD3.IP) (Ping timeout)
[17:11:53] <jgraham> jack: Not sure what you want to know. It is a runner for the W3C web-platform-tests. I am working for it primarily for gecko, but making it work in servo (by restarting servo for each test) was straightforward
[17:11:54] <abinader> but I'll double check
[17:12:07] <jgraham> It is python based like the rest of the gecko testing infrastructure
[17:12:16] <Ms2ger> http://dom.spec.whatwg.org/#dom-document-doctype
[17:12:26] <jack> jgraham: how do we replace check-content with this?
[17:12:31] <jack> is there some way to whitelist tests?
[17:12:41] <Ms2ger> jack, you list expected failures
[17:13:12] <jgraham> Yes, so it has the ability to write out all the tests that failed for a given run
[17:13:24] <jgraham> and use that as the basis for a list of expected failures
[17:13:32] <jgraham> Or you could maintain that list entirely by hand
[17:13:50] <jgraham> As you implement more things you remove more tests from your list of expected failures
[17:14:07] <jdm> jack: we would be rewriting the content tests into the new format as well
[17:14:13] <jdm> and presumably submitting the ones that made sense upstream
[17:14:30] <jack> do any of them make sense upstream? :)
[17:14:48] <Ms2ger> Most of them, yes
[17:14:56] <Ms2ger> The ones abinader is writing, say
[17:14:58] <jgraham> It depends. If they are testing part of the web standard, yes
[17:15:13] <jdm> the ones tetsuharu has been writing too
[17:15:14] <jack> oh. i guess i assumed tests for all the stuff we tested already existed.
[17:15:18] <Ms2ger> Except in so far as these tests already exist upstream
[17:15:20] <jack> is that not the case?
[17:15:24] <Ms2ger> Sometimes
[17:15:35] <SimonSapin> jgraham: does it also warn on "unexpected success"?
[17:15:47] <Ms2ger> I don't see a test for document.doctype
[17:16:07] <jgraham> SimonSapin: It does whatever you want :)
[17:16:32] <jack> how is this going to affect coordination of testing and patches?
[17:16:33] <jgraham> It will log the expected result and the actual result when they differ irrespective of what they are
[17:16:53] <jack> is the idea that we include upstream as a submodule? or do we just copy the whoel thing and upstream our changes as we go?
[17:17:31] <jgraham> In gecko I am copying the whole thing
[17:18:01] <jgraham> For servo where it isn't necessary to worry about multiple vcses and so on a submodule might make more sense
[17:18:21] <Ms2ger> Otoh, submodules suck :)
[17:18:23] <jdm> one thing we could do is have a separate dir for new tests and servo-only tests
[17:18:37] <jdm> and every week comb through the new tests added and open up PRs upstream for them
[17:18:54] <jdm> when they get merged, remove them locally and update the submodule
[17:19:18] <jgraham> jdm: Sounds sensible
[17:19:40] <jgraham> It's also notable that if people review the tests for servo, we are allowed to carry the r+ forward upstream
[17:20:07] <jack> jgraham: what is the upstream url?
[17:20:23] <jgraham> https://github.com/w3c/web-platform-tests are the tests
[17:21:16] <jgraham> The runner is currently in http://hg.mozilla.org/projects/ash/file/tip/testing/web-platform-tests/
[17:21:52] <jack> is that runner going to get upstreamed?
[17:22:18] <larsberg> interestingly, lldb works *much* better against this rust+servo build on OSX. I can set breakpoints on rust_fail, and where gdb falls over due to the later SIGILL, lldb seems to stop the process pretty nicely
[17:22:39] <jgraham> jack: Not to the W3C repo; it is Mozilla-specific
[17:23:15] <jack> ok. so the runner would be only in servo
[17:24:28] <Ms2ger> And Gecko
[17:24:36] <Ms2ger> So you can get the ateam to maintain it ;)
[17:26:22] <Ms2ger> Oh, there's a servo meeting coming up?
[17:27:01] <jdm> 34 minutes
[17:27:18] <jack> agenda bashing: https://etherpad.mozilla.org/Servo-meeting-weekly
[17:27:54] <Ms2ger> Not in a vidyo room I can join, I guess
[17:28:07] <Ms2ger> Oh, hmm, a link
[17:28:08] * Ms2ger tries
[17:28:54] <Ms2ger> Oh, that might work. Nice.
[17:29:28] <jack> ms2ger: it should work. i can send another if that one i sent you before doesn't work.
[17:29:34] * jdm rebases the JSManaged changes
[17:29:35] <jack> jgraham: will you join us? :)
[17:31:22] *** Joins: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca)
[17:32:03] <jgraham> jack: Yeah, I can if you like
[17:32:29] <Ms2ger> Woo, I'm in a team
[17:33:39] * Ms2ger wonders what David Flanagan does nowadays
[17:39:12] *** Joins: tikue (tkuehn@268C2DFE.FAD414BA.D74CC41D.IP)
[17:42:54] *** Joins: bholley (bholley@moz-BBE3ABD.mv.mozilla.com)
[17:44:37] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[17:45:03] *** Quits: tikue (tkuehn@268C2DFE.FAD414BA.D74CC41D.IP) (Quit: tikue)
[17:46:21] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[17:50:36] *** Quits: kanru (kanru@moz-99690620.hinet-ip.hinet.net) (Ping timeout)
[17:52:13] *** Quits: pauls (pauls@moz-7140CF01.ccs.neu.edu) (Ping timeout)
[17:54:56] *** Joins: valenting (Thunderbir@moz-BD1A2D46.residential.rdsnet.ro)
[17:58:16] <Ms2ger> jdm, nowish?
[17:58:23] <jdm> Ms2ger: yep
[18:00:16] <Ms2ger> Hmm, I don't see anybody
[18:00:26] <Ms2ger> Now I do
[18:00:31] <Ms2ger> Hi jack
[18:00:39] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[18:00:39] *** ChanServ sets mode: +o pcwalton
[18:00:44] <jdm> that is no jack
[18:00:47] <jdm> that is a pcwalton
[18:00:50] <Ms2ger> That's a larsberg 
[18:00:52] <jdm> what
[18:00:59] <jdm> jack: what room are we actually in?
[18:01:04] <Ms2ger> Servo
[18:01:04] <larsberg> jdm:vidyo
[18:01:04] <jack> Servo
[18:01:11] <jdm> we should change zimbra in that case
[18:01:13] <larsberg> lol :-)
[18:01:21] <larsberg> Ms2ger: no video camera?
[18:01:22] <Ms2ger> The invite had it right for me
[18:01:29] <pcwalton> oh
[18:01:43] <Ms2ger> Now that's a jdm
[18:01:46] <pcwalton> sorry! joining.
[18:01:49] <jack> jdm: "Please join the Servo vidyo room. The CYA room is for the MTV attendees. "
[18:02:08] <jdm> jack: you expect me to read things?
[18:02:09] <jdm> please
[18:02:09] <Ms2ger> So that's pcwalton 
[18:02:11] <jdm> I'm a busy man
[18:02:32] <Ms2ger> Is that a Firefox robot behind you?
[18:02:40] <jdm> the only one
[18:02:58] *** Quits: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca) (Ping timeout)
[18:03:10] *** Joins: azakai (alon@moz-BBE3ABD.mv.mozilla.com)
[18:03:26] <Ms2ger> What was that about ransom notes?
[18:03:52] <jdm> Ms2ger: we were discussing you using a voice changer
[18:03:58] <Ms2ger> Ah
[18:04:01] *** Joins: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca)
[18:04:10] * Ms2ger ponders tts
[18:04:50] <Ms2ger> Hi dherman 
[18:04:59] <dherman> hi hi
[18:05:07] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[18:05:21] <Ms2ger> jgraham?
[18:05:48] <larsberg> SimonSapin: meeting time :-)
[18:05:58] <Ms2ger> Have faith, folks
[18:06:01] <jack> kmc: ping
[18:06:22] <Ms2ger> See, I got a text-to-speech engine
[18:06:34] <jack> agenda bashing: https://etherpad.mozilla.org/Servo-meeting-weekly
[18:07:05] <SimonSapin> we didnâ€™t manage to type the roomâ€™s name on the big screenâ€™s Vidyo system
[18:08:09] * Ms2ger wonders why jgraham and SimonSapin are looking in opposite directions
[18:08:22] *** Joins: pauls (pauls@moz-7140CF01.ccs.neu.edu)
[18:08:43] <Ms2ger> Hi, pcwalton's cat
[18:09:20] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[18:09:30] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[18:09:30] *** ChanServ sets mode: +o brson
[18:09:41] <brson> did the servo meeting not happen?
[18:09:58] <dherman> brson: it's happening right now
[18:10:01] <dherman> in the Servo vidyo room
[18:10:08] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[18:10:49] <Ms2ger> Hi brson(?)
[18:11:00] <jack> Ms2ger: correct :)
[18:11:11] <brson> Ms2ger: hi
[18:11:34] <dherman> Ms2ger is the panopticon
[18:11:58] <Ms2ger> No big ones
[18:13:43] <zmike> jdm: okay, done finally
[18:16:19] <jdm> zmike: :)
[18:16:48] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[18:16:58] <zmike> had some weird build errors so I had to wipe the tree and rebuild completely again
[18:17:04] <zmike> full rust rebuild = :(
[18:17:08] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[18:17:22] <zmike> kmc: ping?
[18:17:48] <zmike> I have been targeting a lot of your build issues, we should chat sometime about this to make sure I'm resolving them as you intend
[18:18:15] *** Joins: dbaron (dbaron@moz-A9D01D68.dsl.dynamic.sonic.net)
[18:18:50] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[18:20:02] <Ms2ger> Not much TLS, afaicr
[18:21:37] <jdm> yeah, I don't know how much there is in our 1.5 year old copy and modern
[18:21:53] <Ms2ger> Mmm
[18:22:07] <Ms2ger> What's up with JS::Rooted in rust?
[18:23:39] <jdm> we have this rooted_obj type in rust-mozjs, but I'm not sure how equivalent they are
[18:24:19] <Ms2ger> Well, we'd been talking about an implementation that required rust changes
[18:24:57] <jdm> oh, I think pcwalton came up with a root! macro that could be equivalently safe
[18:25:14] <Ms2ger> That would be interesting
[18:26:16] <Ms2ger> Do we have someone who does community engagement?
[18:27:38] <jdm> we being servo or rust?
[18:27:50] <jdm> I suspect the answer is no regardless
[18:27:53] <Ms2ger> The people on the call :)
[18:28:18] <Ms2ger> I say we use the Mozilla din
[18:28:19] <Ms2ger> o
[18:28:35] <jdm> but with a twist
[18:28:37] <jdm> parallel dinos
[18:29:18] <Ms2ger> As long as that's Linux
[18:29:56] <Ms2ger> Sounds like me
[18:30:50] <Ms2ger> Yes please
[18:33:29] <Ms2ger> Bye jdm?
[18:33:52] <jdm> friggin' vidyo
[18:34:12] <Ms2ger> Forms?
[18:35:47] <Ms2ger> Perfectly?
[18:35:50] <Ms2ger> Probably a lot
[18:38:00] * Ms2ger tries loading acid2
[18:38:06] <Ms2ger> Segmentation fault (core dumped)
[18:38:16] <jdm> good, good
[18:38:23] <Ms2ger> Acid3 is horrible though
[18:40:13] * Ms2ger tries gdb
[18:40:38] <Ms2ger> Something under dom..attr..Attr::glue_free
[18:41:03] <jdm> please file with the backtrace
[18:41:05] <jdm> that doesn't sound good
[18:41:26] <larsberg> pre-upgrade, acid2 was a goofy-looking square with blobs everywhere 
[18:42:24] * Ms2ger blames jack
[18:42:54] *** Quits: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca) (Quit: canhtak)
[18:44:55] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[18:46:43] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[18:46:56] <Ms2ger> task '<unnamed>' failed at 'borrowed',
[18:46:57] <Ms2ger> Progress!
[18:47:10] <larsberg> hrmph, my backtrace (linux) shows several threads in css selector matching
[18:48:01] <SimonSapin> Good news! Acid2 is not affected by *{table-layout:fixed!important}, meaning we can pass Acid2 without implementing the annoying parts of tables
[18:48:17] <Ms2ger> task '<unnamed>' failed at 'borrowed',
[18:48:31] <Ms2ger> Er
[18:48:33] <Ms2ger> task 'task '<unnamed><unnamed>' failed at 'borrowed'
[18:48:43] <jdm> I want zmike's PR so bad
[18:48:58] <kmc> sorry I missed the meeting; still not feeling well :/
[18:49:01] <zmike> :D
[18:49:20] <Ms2ger> Okay, now it runs
[18:49:29] <Ms2ger> Now it doesn't
[18:49:34] <Ms2ger> Yay determinism
[18:50:11] <zmike> jdm: if there are any other "high demand" tasks, feel free to recommend some to me
[18:50:43] <Ms2ger> jdm, pssh, say JSManaged
[18:51:05] <zmike> disclaimer: I am still not very good at rust, I just have a lot of time on my hands
[18:51:15] <jgraham> SimonSapin: There are non-annoying parts of tables?
[18:52:24] <Ms2ger> !mybox.type_desc.is_null() at servo/src/compiler/rust/src/libstd/rt/local_heap.rs
[18:52:37] <SimonSapin> jgraham: comparatively less annoying, maybe?
[18:53:18] <SimonSapin> the parts that do not include automatic table width layout, which is not specified
[18:54:14] <larsberg> ACID2 today: http://imgur.com/vawD0c5 :-)
[18:54:24] <jdm> that's beautiful
[18:54:26] <jdm> like a mondrian
[18:54:31] <jack> i like it.
[18:54:43] <jack> SHIP IT
[18:54:58] <larsberg> "ACID2: a post-modern interpretation of yesterday's benchmarks"
[18:55:11] <jdm> servo is a postmodern parallel browser
[18:56:10] <Ms2ger> Now we make our greeter say "Please check if acid1 still looks right and upload a screenshot of acid2"
[18:56:42] <jack> larsberg: it didn't crash on you? is it just crashing on linux but not os x?
[18:56:59] <Ms2ger> It doesn't crash reliably
[18:57:10] <larsberg> jack: yeah, it's only 50/50
[18:57:15] *** Joins: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca)
[18:57:25] <Ms2ger> It cycles though rendering, task failure and segfaults
[18:57:53] <larsberg> my new favorite error:
[18:57:54] <larsberg> task 'task 'task '<unnamed><unnamed><unnamed>' failed at '' failed at '' failed at 'borrowedborrowedborrowed', ', ', /Users/larsberg/servo/src/components/script/dom/element.rs/Users/larsberg/servo/src/components/script/dom/element.rs/Users/larsberg/servo/src/components/script/dom/element.rs:::159159153
[18:58:20] <larsberg> "what happens when failure goes parallel!"
[18:58:24] <SimonSapin> !
[18:58:45] <Ms2ger> "I know, he said, I'll use threads"
[18:58:47] <SimonSapin> I got a Lovecraft quote before a crash when running Acid2 https://pastebin.mozilla.org/4005293
[18:59:07] <Ms2ger> NNNooowww hhheee hhhaaasss ttthhhrrreee ppprrrooobbbllleeemmmsss
[18:59:26] *** Quits: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca) (Quit: Leaving.)
[18:59:27] <larsberg> ms2ger: love it :-)
[18:59:29] *** Joins: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP)
[18:59:30] <ghservo> 01[13servo01] 15bors-servo 04force-pushed 06auto from 14b1ea69f to 1499f24fb: 02http://git.io/c8GovQ
[18:59:30] *** Parts: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP) ()
[18:59:32] * jdm imagines the rust runtime scurrying away into a dark cave muttering "borrowedborrowedborrowed"
[18:59:33] *** Joins: ghservo (ghservo@C8693FCB.6A2AE50.F3114085.IP)
[18:59:33] <ghservo> 01[13servo01] 15bors-servo pushed 2 new commits to 06auto: 02http://git.io/HnrqtA
[18:59:33] <ghservo> 13servo/06auto 14193b6d2 15zmike: add names for all servo spawned tasks...
[18:59:33] <ghservo> 13servo/06auto 14a65e4b0 15bors-servo: auto merge of #1457 : zmike/servo/master, r=jdm...
[18:59:34] *** Parts: ghservo (ghservo@C8693FCB.6A2AE50.F3114085.IP) ()
[18:59:47] <Ms2ger> My precioussss borrowsssessss
[19:01:01] <jack> oh no
[19:01:02] <Ms2ger> So, yeah, calling get_attribute from multiple threads?
[19:01:06] <jack> now i'm getting that llvm assert :(
[19:01:07] <SimonSapin> Hum. https://github.com/mozilla/rust/blob/b97ace2f6b361f10541586e69371f4924ce967c6/src/libgreen/macros.rs#L83
[19:01:17] <jack> Assertion failed: ((i >= FTy->getNumParams() || FTy->getParamType(i) == Args[i]->getType()) && "Calling a function with a bad signature!"), function init, file /Users/jack/src/servo/src/compiler/rust/src/llvm/lib/IR/Instructions.cpp, line 281.
[19:02:39] <Ms2ger> SimonSapin, hadn't seen that before?
[19:02:41] *** Joins: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca)
[19:02:44] <SimonSapin> nop
[19:02:59] *** Quits: marcosc (marcosc@moz-B9805BF7.dsl.telepac.pt) (Input/output error)
[19:05:58] *** Quits: CaseyBecking (CaseyBecki@ED8170C4.82E507D6.C334098E.IP) (Client exited)
[19:06:28] *** Joins: CaseyBecking (CaseyBecki@ED8170C4.82E507D6.C334098E.IP)
[19:06:55] <Ms2ger> Thread 5 (Thread 0x7ffff1614700 (LWP 18452)):
[19:06:55] <Ms2ger> #9  0x00007ffff5f4b330 in script::dom::element::Element::get_attr (self=0x7fffec4270c0, namespace=..., name=...)
[19:06:55] <Ms2ger> Thread 3 (Thread 0x7ffff1816700 (LWP 18450)):
[19:06:55] <Ms2ger> #12 0x00007ffff5f4b2d3 in script::dom::element::Element::get_attr (self=0x7fffec4270c0, namespace=..., name=...)
[19:07:37] <jdm> yeah, that's lovely
[19:08:00] <jdm> are both of those layout-related or is one script?
[19:08:06] *** Quits: CaseyBecking (CaseyBecki@ED8170C4.82E507D6.C334098E.IP) (Client exited)
[19:08:11] *** Joins: CaseyBecking (CaseyBecki@ED8170C4.82E507D6.C334098E.IP)
[19:08:58] <Ms2ger> Both through servo::layout::wrapper::TElement$LayoutElement::get_attr
[19:09:08] <jack> larsberg: sems like a reftest is hanigng too
[19:09:11] <Ms2ger> One from selector_matching::SelectorMap::get_all_matching_rules::anon::expr_fn::RdawaD
[19:09:21] <Ms2ger> The other from selector_matching::matches_simple_selector::anon::expr_fn::aKai
[19:10:00] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[19:10:21] *** Joins: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP)
[19:10:21] <ghservo> [13servo] 15metajack opened pull request #1484: Enable checks for reftest exit status. (06master...06check-reftest-status) 02http://git.io/QZSSIA
[19:10:21] *** Parts: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP) ()
[19:10:49] <jdm> what a mess
[19:11:27] *** Joins: tetsuhar_ (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[19:11:43] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[19:12:52] <larsberg> jack: I see the reftest hang too
[19:13:03] <larsberg> I'll look into that while I work on fixing the broken test
[19:13:10] *** Quits: tetsuhar_ (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[19:13:15] <larsberg> 2 tests
[19:13:32] <Ms2ger> Shall we turn parallel selector matching off again?
[19:13:34] <Ms2ger> SimonSapin?
[19:14:30] *** Joins: elan-workweek (elancaster@moz-7B0110AD.mv.mozilla.com)
[19:14:40] <SimonSapin> no opinion
[19:16:46] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[19:16:49] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[19:16:50] *** ChanServ sets mode: +o brson
[19:17:28] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[19:20:23] *** Joins: Jayflux (Jason@moz-1AFE3969.as13285.net)
[19:24:05] *** Quits: Kostic (marko@C4D4CB5C.58A2DD99.2168A69F.IP) (Quit: Kostic)
[19:31:02] <jdm> rustc rebuild is my cue to go grab lunch
[19:31:04] *** jdm is now known as jdm|f00ding
[19:31:36] <SimonSapin> I wrote about tables https://github.com/mozilla/servo/issues/795#issuecomment-32202305
[19:34:18] *** Joins: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP)
[19:34:18] <ghservo> 01[13servo01] 15bors-servo 04force-pushed 06auto from 14a65e4b0 to 1499f24fb: 02http://git.io/c8GovQ
[19:34:18] *** Parts: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP) ()
[19:34:20] *** Joins: ghservo (ghservo@F6EE6DE3.6A2AE50.F3114085.IP)
[19:34:20] <ghservo> 01[13servo01] 15bors-servo pushed 2 new commits to 06auto: 02http://git.io/9X8TLQ
[19:34:20] <ghservo> 13servo/06auto 1437b867b 15Jack Moffitt: Enable checks for reftest exit status.
[19:34:20] <ghservo> 13servo/06auto 140555e67 15bors-servo: auto merge of #1484 : metajack/servo/check-reftest-status, r=larsbergstrom...
[19:34:20] *** Parts: ghservo (ghservo@F6EE6DE3.6A2AE50.F3114085.IP) ()
[19:36:15] *** Joins: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[19:37:41] <abinader> Ms2ger: I've updated the issue in https://critic.hoppipolla.co.uk/r/547 :-)
[19:38:18] <abinader> Ms2ger: both Firefox & WebKit/Blink just walk across the child elements until they find a child which is a doctype
[19:40:27] <Ms2ger> Indeed they do
[19:45:05] <Ms2ger> abinader, want to squash so I can try my fancy new r+ powers?
[19:45:16] <abinader> Ms2ger: right away! :-)
[19:45:30] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[19:46:13] *** Quits: victorporof (victorporo@48342A5A.33FD6404.79933D60.IP) (Quit: victorporof)
[19:47:14] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[19:49:24] <abinader> Ms2ger: done: https://github.com/mozilla/servo/pull/1483
[19:50:21] * Ms2ger tries
[19:51:19] * abinader crosses fingers :D
[19:51:55] *** Joins: ghservo (ghservo@F6EE6DE3.6A2AE50.F3114085.IP)
[19:51:55] <ghservo> [13rust-layers] 15larsbergstrom closed pull request #40: Always use the same display connection (06RGBA_fixups...06RGBA_fixups) 02http://git.io/UmIINw
[19:51:55] *** Parts: ghservo (ghservo@F6EE6DE3.6A2AE50.F3114085.IP) ()
[19:52:11] *** Joins: TimAbraldes (quassel@125EF623.B2666F0E.66399531.IP)
[19:53:24] *** Quits: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: brendan)
[19:54:37] *** jdm|f00ding is now known as jdm
[19:55:02] *** Joins: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP)
[19:55:02] <ghservo> 01[13servo01] 15bors-servo merged 06auto into 06master: 02http://git.io/9X8TLQ
[19:55:02] *** Parts: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP) ()
[19:55:04] *** Joins: ghservo (ghservo@1E8607E8.6A2AE50.F3114085.IP)
[19:55:04] <ghservo> [13servo] 15bors-servo closed pull request #1484: Enable checks for reftest exit status. (06master...06check-reftest-status) 02http://git.io/QZSSIA
[19:55:04] *** Parts: ghservo (ghservo@1E8607E8.6A2AE50.F3114085.IP) ()
[19:56:23] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[19:56:40] * Ms2ger pokes bors
[19:57:32] *** Quits: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca) (Quit: canhtak)
[19:59:41] <Ms2ger> jdm, halp
[19:59:47] * jdm checks its status
[20:00:13] *** Joins: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[20:03:02] *** Quits: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: brendan)
[20:05:50] <abinader> what's the proper way of importing IDL files?
[20:06:09] <abinader> I want to import http://mxr.mozilla.org/mozilla-central/source/dom/interfaces/core/nsIDOMDOMImplementation.idl to Servo
[20:06:22] <jdm> I don't really understand what bors is doing
[20:06:32] <jdm> it finds two viable PRs, including the doctype one
[20:06:39] <jdm> it seems to examine one and find it wanting
[20:06:45] <jdm> then it starts a new run, or something?
[20:06:48] <Ms2ger> abinader, just use the one from the spec
[20:06:49] <abinader> I'm doing it manually but maybe there's an automated way
[20:07:19] <jdm> abinader: you would want WebIDL ones, not IDL
[20:07:36] <jdm> http://mxr.mozilla.org/mozilla-central/source/dom/webidl/DOMImplementation.webidl
[20:08:03] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[20:08:06] <abinader> jdm: yep, sent the wrong link, sorry
[20:08:26] <abinader> ok, so just add it as a new file to repo
[20:08:34] *** Joins: ghservo (ghservo@1E8607E8.6A2AE50.F3114085.IP)
[20:08:34] <ghservo> [13servo] 15jdm closed pull request #835: Only force reset submodules with configure upon request (closes #522) (06master...06522configureNuke) 02http://git.io/cAZmQg
[20:08:34] *** Parts: ghservo (ghservo@1E8607E8.6A2AE50.F3114085.IP) ()
[20:08:45] <abinader> and set the triggers to generate code
[20:09:56] * jdm really wants to import the code from gecko that avoids the need for empty additions to Bindings.conf
[20:10:14] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[20:11:28] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[20:11:28] *** ChanServ sets mode: +o brson
[20:11:30] *** Joins: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP)
[20:11:30] <ghservo> 01[13servo01] 15bors-servo pushed 0 new commits to 06auto: 02http://git.io/Gi03gw
[20:11:30] *** Parts: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP) ()
[20:11:37] *** Joins: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP)
[20:11:37] <ghservo> 01[13servo01] 15bors-servo pushed 2 new commits to 06auto: 02http://git.io/YpJGXg
[20:11:37] <ghservo> 13servo/06auto 14193b6d2 15zmike: add names for all servo spawned tasks...
[20:11:37] <ghservo> 13servo/06auto 14563d6ef 15bors-servo: auto merge of #1457 : zmike/servo/master, r=jdm...
[20:11:38] *** Parts: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP) ()
[20:11:47] <Ms2ger> It does something!
[20:11:57] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[20:13:21] *** Joins: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca)
[20:13:28] <jgraham> Hmm, so after all that time building I get a servo that dies without running my test
[20:13:55] *** Quits: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca) (Quit: canhtak)
[20:14:02] <jdm> jack: do you know if bors reloads the cfg every time it starts a new poll?
[20:14:08] <jdm> ...
[20:14:13] <jdm> oh, my addition to the cfg is missing
[20:14:15] <jdm> wat
[20:14:46] <jack> No idea. Its a cron job so I would assume so
[20:14:56] *** Quits: CaseyBecking (CaseyBecki@ED8170C4.82E507D6.C334098E.IP) (Client exited)
[20:15:26] *** Joins: CaseyBecking (CaseyBecki@ED8170C4.82E507D6.C334098E.IP)
[20:17:09] *** Quits: CaseyBecking (CaseyBecki@ED8170C4.82E507D6.C334098E.IP) (Ping timeout)
[20:17:15] *** Joins: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca)
[20:19:31] <jdm> Ms2ger: all right, it seems to be working now
[20:19:34] <jdm> http://servo-buildbot.pub.build.mozilla.org/bors/bors.html
[20:21:00] <Ms2ger> jgraham, can you squash innerhtml?
[20:23:20] <jack> JDM: were you adding ms2ger?
[20:23:53] <jdm> jack: yes
[20:24:20] <jack> Don't we need to do that via releng?
[20:24:41] <jdm> jack: how come? it's in the cfg file on the root buildbot machine.
[20:25:15] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[20:25:35] <jack> I assume that the next puppet run will overwrite it
[20:25:48] <jdm> oh
[20:25:57] <jdm> that would explain why his name disappeared before
[20:26:06] * jdm files a bug
[20:26:26] *** Joins: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[20:35:40] *** Quits: hoverbear (hoverbear@EBFA78B5.F19E5E7B.E74D50F2.IP) (Quit: Taking a nap.)
[20:37:38] *** Joins: ghservo (ghservo@1E8607E8.6A2AE50.F3114085.IP)
[20:37:38] <ghservo> 01[13servo01] 15bors-servo merged 06auto into 06master: 02http://git.io/YpJGXg
[20:37:38] *** Parts: ghservo (ghservo@1E8607E8.6A2AE50.F3114085.IP) ()
[20:37:40] *** Joins: ghservo (ghservo@79968228.6A2AE50.F3114085.IP)
[20:37:40] <ghservo> [13servo] 15bors-servo closed pull request #1457: add names for all servo spawned tasks (06master...06master) 02http://git.io/ryKgcQ
[20:37:40] *** Parts: ghservo (ghservo@79968228.6A2AE50.F3114085.IP) ()
[20:39:19] *** Quits: elan-workweek (elancaster@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[20:41:10] *** Joins: harth (heather@moz-42412102.hsd1.ca.comcast.net)
[20:42:56] *** Joins: elan-workweek (elancaster@moz-7B0110AD.mv.mozilla.com)
[20:43:04] *** Quits: harth (heather@moz-42412102.hsd1.ca.comcast.net) (Ping timeout)
[20:45:22] *** Quits: gandalf (zbraniecki@moz-912D7A86.hsd1.ca.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[20:46:02] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[20:47:45] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[20:48:03] *** Joins: ghservo (ghservo@C8693FCB.6A2AE50.F3114085.IP)
[20:48:03] <ghservo> [13rust-layers] 15larsbergstrom opened pull request #44: Add support for NVidia cards. (06master...06RGBA_fixups2) 02http://git.io/kw_mMg
[20:48:03] *** Parts: ghservo (ghservo@C8693FCB.6A2AE50.F3114085.IP) ()
[20:48:49] *** Quits: eddyb (eddy@EDE07015.D51DAF03.FB866788.IP) (Ping timeout)
[20:49:33] *** Joins: eddyb (eddy@EDE07015.D51DAF03.FB866788.IP)
[20:50:58] *** Joins: jet (jet@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[20:51:24] <bstrie> does anyone remember what the proportion of safe/unsafe code was in servo?
[20:51:31] <bstrie> I know pcwalton measured this at some point
[20:52:03] *** Joins: hoverbear (hoverbear@EBFA78B5.F19E5E7B.E74D50F2.IP)
[20:52:05] *** Joins: CaseyBecking (CaseyBecki@ED8170C4.82E507D6.C334098E.IP)
[20:53:21] *** Joins: pcwalton (pcwalton@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[20:53:21] *** ChanServ sets mode: +o pcwalton
[20:53:27] <Ms2ger> Speak of the devil
[20:53:49] <bstrie> pcwalton: was curious if you remember the proportion of safe/unsafe code in servo, from the last time that you measured
[20:54:10] <bstrie> we need a `rustc --fun-facts` tool to measure this sort of thing :)
[20:54:35] <pcwalton> between 0% and 1%
[20:54:43] <pcwalton> last I checked
[20:54:46] *** Quits: CaseyBecking (CaseyBecki@ED8170C4.82E507D6.C334098E.IP) (Ping timeout)
[20:54:47] *** Joins: lurk_ (chatzilla@moz-F088D030.hsd1.in.comcast.net)
[20:54:58] <pcwalton> jack: gonna rebase my PRs now.
[20:55:37] <larsberg> bstrie: you kind of have to do it manually because otherwise the auto-generated DOM bindings will throw you off. and ignore the huge native libraries and their rust wrappers (which are mainly unsafe code or constants) we link in :-)
[20:55:44] <larsberg> we are down to 37 non-DOM transmutes, though!
[20:55:48] <Ms2ger> pcwalton, 0-1% safe?
[20:55:58] <pcwalton> 99%-100% safe :)
[20:56:00] <larsberg> I keep meaning to do a "transmute audit"
[20:56:56] <bstrie> you need a jar at the mozilla office, where every time that you code a transmute you have to put a quarter in the jar
[20:57:21] <Ms2ger> Wfm
[20:57:25] <jack> put bitcoins in it.
[20:57:45] * Ms2ger wonders if he has any quarters lying around
[20:57:51] <bstrie> we could whip up our own custom currency, "rustcoin"
[20:58:03] <larsberg> bstrie: AKA "stickers"
[20:58:05] <bstrie> hand it out to contributors
[20:58:06] <bstrie> haha
[20:58:13] <bstrie> I was just gonna say, make them redeemable for stickers :P
[20:58:16] <bstrie> or t-shirts!
[20:58:26] <bstrie> or, if you amass enough, a date with pcwalton
[20:58:57] <pcwalton> rust has officially gotten weird :)
[20:59:09] <Ms2ger> So if I put in enough quarters, I don't have to go on a date with pcwalton?
[20:59:13] <bstrie> pcwalton: I blame myself
[20:59:16] * Ms2ger throws all his quarters at bstrie 
[20:59:38] <bstrie> every channel that I enter immediately ceases all productivity
[20:59:41] <larsberg> I think if we just start regularly auditing the transmutes, we'll eventually remove them all in an effort to avoid talking about the same code over and over again.
[21:00:25] *** Joins: ghservo (ghservo@C8693FCB.6A2AE50.F3114085.IP)
[21:00:25] <ghservo> [13rust-opengles] 15metajack closed pull request #62: Add some constants and functions. (06master...06RGBA_fixups) 02http://git.io/UFhN5Q
[21:00:25] *** Parts: ghservo (ghservo@C8693FCB.6A2AE50.F3114085.IP) ()
[21:00:28] *** Joins: ghservo (ghservo@F6EE6DE3.6A2AE50.F3114085.IP)
[21:00:28] <ghservo> 01[13rust-opengles01] 15metajack pushed 2 new commits to 06master: 02http://git.io/5ePdtA
[21:00:28] <ghservo> 13rust-opengles/06master 14f323af0 15Lars Bergstrom: Add some constants and functions, along with comments about on what versions to use them.
[21:00:28] <ghservo> 13rust-opengles/06master 142fb3caf 15Jack Moffitt: Merge pull request #62 from larsbergstrom/RGBA_fixups...
[21:00:28] *** Parts: ghservo (ghservo@F6EE6DE3.6A2AE50.F3114085.IP) ()
[21:00:39] <larsberg> jack: thanks :-)
[21:01:17] <jdm> the trick is to create a function in one of our submodules that just wraps transmute
[21:01:23] <jdm> and call it something like reinterpret
[21:01:27] <jdm> and nobody will notice it from then on
[21:01:48] <larsberg> aha, that's why the monthly audit re-examines *all* the calls :-)
[21:02:23] <jdm> boo
[21:02:23] <larsberg> (I learned this one in a previous life, where they did with security bugs when removing e.g. the strcmp-alikes for strncmp before they started enforcing the "never" policy)
[21:04:24] <larsberg> pcwalton: jack found http://mirror.linux.org.au/linux.conf.au/2014/Thursday/96-Zero-Copy_CompositingResearch_to_Reality_-_Keith_Packard.mp4 , which is relevant to some stuff you were hacking on and we've been chatting about recently...
[21:04:53] <jack> there is one about 2D acceleration too, but that one isn't so great.
[21:05:08] <jack> it's mostly talking about them replacing all the hardware specific 2D code with GL shaders.
[21:05:19] <jack> haven't watched the GLX history one yet.
[21:05:22] <pcwalton> larsberg: oh cool
[21:05:42] *** Joins: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP)
[21:05:42] <ghservo> 01[13servo01] 15bors-servo pushed 0 new commits to 06auto: 02http://git.io/6dWgPQ
[21:05:42] *** Parts: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP) ()
[21:05:44] *** Joins: ghservo (ghservo@C8693FCB.6A2AE50.F3114085.IP)
[21:05:44] <ghservo> 01[13servo01] 15bors-servo pushed 2 new commits to 06auto: 02http://git.io/sqxfZw
[21:05:44] <ghservo> 13servo/06auto 14742ad9c 15Bruno de Oliveira Abinader: Implement Document::doctype...
[21:05:44] <ghservo> 13servo/06auto 1450b66f3 15bors-servo: auto merge of #1483 : brunoabinader/servo/document-doctype, r=jdm...
[21:05:44] *** Parts: ghservo (ghservo@C8693FCB.6A2AE50.F3114085.IP) ()
[21:06:10] <jack> but i liked the compositing talk. i should go search for more keith packard talks :)
[21:06:38] <pcwalton> let's get keith packard to give a talk
[21:06:42] <pcwalton> here
[21:06:48] <jack> hell yes
[21:06:55] <pcwalton> do you know him?
[21:07:02] <jack> no.
[21:07:07] <pcwalton> ah, ok
[21:07:10] <pcwalton> thought you might due to xiph
[21:07:33] <jack> monty or gmaxwell might know him.
[21:07:46] *** Joins: Kostic (marko@moz-8FD15682.mbb.telenor.rs)
[21:09:28] *** Quits: jackneill (jackneill@moz-985E4FF7.pool.digikabel.hu) (Ping timeout)
[21:09:48] *** Quits: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: brendan)
[21:10:14] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[21:11:29] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[21:11:52] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[21:11:56] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[21:12:03] *** Joins: ghservo (ghservo@F6EE6DE3.6A2AE50.F3114085.IP)
[21:12:03] <ghservo> 01[13rust-layers01] 15metajack pushed 2 new commits to 06master: 02http://git.io/kXebLA
[21:12:03] <ghservo> 13rust-layers/06master 140c07a53 15Lars Bergstrom: Add support for NVidia cards.
[21:12:03] <ghservo> 13rust-layers/06master 14a6cdac5 15Jack Moffitt: Merge pull request #44 from larsbergstrom/RGBA_fixups2...
[21:12:04] *** Parts: ghservo (ghservo@F6EE6DE3.6A2AE50.F3114085.IP) ()
[21:12:25] <brson> nmatsakis: not sure if you saw but i have a pr that adds stable diagnostic codes to rustc https://github.com/mozilla/rust/pull/11460
[21:12:40] <brson> i'd appreciate your thoughts on it
[21:12:47] <brson> er, wrong channel, sry
[21:13:01] <brson> i reorganized all my channel windows over the weekend, so the fingers are leading me astry today
[21:13:04] <brson> *astray
[21:13:14] *** Joins: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP)
[21:13:15] <ghservo> [13rust-azure] 15metajack closed pull request #64: Always use the same display connection (06master...06RGBA_fixups) 02http://git.io/Wh4ZUA
[21:13:15] *** Parts: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP) ()
[21:13:41] *** Joins: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP)
[21:13:41] <ghservo> [13servo] 15brunoabinader opened issue #1485: Implement DOMImplementation features 02http://git.io/3-UoUg
[21:13:41] *** Parts: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP) ()
[21:15:26] *** Joins: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP)
[21:15:26] <ghservo> [13servo] 15brunoabinader opened issue #1486: Add DOMImplementation skeleton 02http://git.io/z9D8Vg
[21:15:26] *** Parts: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP) ()
[21:16:53] <jack> larsberg: you probably want do a servo PR for your layers/azure/opengles changes as well
[21:17:14] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[21:17:14] *** ChanServ sets mode: +qo dherman dherman
[21:18:46] <larsberg> jack: will do! I forgot I could do the submodule changes as soon as I pushed the commits up to the submodules. did I mention I find submodules confusing? :-)
[21:18:48] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[21:25:46] *** Quits: Jayflux (Jason@moz-1AFE3969.as13285.net) (Connection reset by peer)
[21:26:19] *** Joins: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP)
[21:26:19] <ghservo> 01[13servo01] 15bors-servo merged 06auto into 06master: 02http://git.io/sqxfZw
[21:26:19] *** Parts: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP) ()
[21:26:19] *** Joins: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP)
[21:26:19] <ghservo> [13servo] 15bors-servo closed pull request #1483: Implement Document::doctype (06master...06document-doctype) 02http://git.io/2Al2Dg
[21:26:19] *** Parts: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP) ()
[21:26:29] *** Joins: ghservo (ghservo@F6EE6DE3.6A2AE50.F3114085.IP)
[21:26:29] <ghservo> [13servo] 15larsbergstrom opened pull request #1487: NVidia submodule updates (06master...06NVIDIA_fixes) 02http://git.io/ioCyDg
[21:26:29] *** Parts: ghservo (ghservo@F6EE6DE3.6A2AE50.F3114085.IP) ()
[21:26:46] *** Joins: Jayflux (Jason@moz-1AFE3969.as13285.net)
[21:28:51] *** Quits: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca) (Quit: canhtak)
[21:30:07] <jack> jgraham: i see you fixed up the innerHTML commit. do you squash now or how does it work?
[21:30:22] <jack> am i supposed to go accept the change in critic first?
[21:30:53] *** Joins: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP)
[21:30:53] <ghservo> [13servo] 15brunoabinader opened pull request #1488: Add DOMImplementation skeleton (06master...06document-implementation) 02http://git.io/wN6keg
[21:30:53] *** Parts: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP) ()
[21:31:47] *** Joins: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP)
[21:31:47] <ghservo> 01[13servo01] 15bors-servo pushed 0 new commits to 06auto: 02http://git.io/0SqbCg
[21:31:47] *** Parts: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP) ()
[21:31:50] *** Joins: ghservo (ghservo@F6EE6DE3.6A2AE50.F3114085.IP)
[21:31:50] <ghservo> 01[13servo01] 15bors-servo pushed 2 new commits to 06auto: 02http://git.io/2KU0mQ
[21:31:50] <ghservo> 13servo/06auto 14fe06018 15Lars Bergstrom: NVidia submodule updates
[21:31:50] <ghservo> 13servo/06auto 143cf4f39 15bors-servo: auto merge of #1487 : larsbergstrom/servo/NVIDIA_fixes, r=metajack...
[21:31:50] *** Parts: ghservo (ghservo@F6EE6DE3.6A2AE50.F3114085.IP) ()
[21:34:54] *** Joins: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[21:36:31] <jdm> I have not had a successful check-content run yet :(
[21:36:35] <jdm> neither master nor jsmanaged
[21:36:42] *** Quits: eddyb (eddy@EDE07015.D51DAF03.FB866788.IP) (Ping timeout)
[21:36:49] *** Joins: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca)
[21:36:50] <jdm> it always hangs or segfaults in the element getattribute stuff from the layout thread
[21:37:07] <jack> have you treid the commit that landed the rust upgrade?
[21:37:19] <jack> maybe it regressed and our linux builder didn't catch it?
[21:38:47] <Ms2ger> jdm, did you try serializing selector matching?
[21:38:51] *** Quits: Jayflux (Jason@moz-1AFE3969.as13285.net) (Connection reset by peer)
[21:38:57] <Ms2ger> jack, do we run contenttests on linux?
[21:39:04] <jack> Ms2ger: we do not.
[21:39:09] <jack> but i did run them i was pretty sure.
[21:39:25] <jack> after all, that's where i did my debugging.
[21:39:36] *** Joins: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP)
[21:39:36] <ghservo> [13servo] 15brunoabinader opened issue #1489: Implement DOMImplementation::createDocumentType 02http://git.io/73IIlg
[21:39:36] *** Parts: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP) ()
[21:39:40] <jdm> Ms2ger: the hangs are a much more prominant problem for me, actually
[21:39:45] <jdm> I only see the segfault occasionally
[21:39:54] *** Quits: doomlord_ (servitor@moz-CA917A47.range86-184.btcentralplus.com) (Ping timeout)
[21:39:58] <jack> maybe it's the same as the check-ref hang?
[21:40:02] <jdm> jack: it is.
[21:40:10] <jdm> sitting in the compositor
[21:40:24] <jack> do you know where?
[21:40:37] <jack> larsberg: did you get very far looking into those yet?
[21:40:43] *** Joins: Jayflux (Jason@moz-1AFE3969.as13285.net)
[21:40:45] <jdm> #4  0x000000000044e846 in comm::Port::recv_opt::h927eb5d5e27c0872oaam::v0.0 () at /home/jdm/sdb/servo/src/components/main/compositing/compositor_task.rs:58
[21:40:48] <jdm> #5  0x00000000004d67ac in create () at /home/jdm/sdb/servo/src/components/main/compositing/compositor_task.rs:211
[21:40:50] *** Joins: ibnc (ibnc@moz-718F3037.client.mchsi.com)
[21:40:56] *** Joins: khodzha1 (khodzha@9BB3C301.EF9FA30D.CA6E2165.IP)
[21:41:05] <jdm> the profiler is sitting in its usual loop as well
[21:41:12] <jdm> I think that's expected though
[21:41:18] *** Quits: khodzha (khodzha@D40BD4BD.3E410295.CA6E2165.IP) (Ping timeout)
[21:41:40] <larsberg> jack: just about to. I showed my ineptitude at git rebasing and submodules spending an hour instead of the 15 minutes it should have taken to revive those nvidia fixes :-(
[21:41:51] <jdm> jack: no difference when I'm on the upgrade rev
[21:42:02] <jdm> this is problematic for testing my changes :)
[21:42:10] <jack> that's not a recv_opt
[21:42:29] <jack> oh your line numbers are slightly different.
[21:42:41] <jack> did you chnge it from recv to recv_opt
[21:42:43] <jdm> jack: also recv is just a wrapper around recv_opt
[21:42:46] <jack> ah
[21:42:50] <jdm> so it's inline
[21:42:50] <jdm> +d
[21:43:05] <jack> so compositor didn't get Exit. who is supposed to send it?
[21:44:05] <larsberg> two ways. script can tell compositor to exit (via window.close)
[21:44:15] <jdm> which is what's happening in this case
[21:44:17] <larsberg> or constellation can tell compositor to exit (usual via windowing system message)
[21:44:32] <jack> so script died?
[21:44:57] <jack> oh
[21:45:03] <jack> there is no exit message from script
[21:45:11] <jdm> no, I don't think that's it
[21:45:26] <jdm> it's sitting waiting for the compositors acknowledgement
[21:45:35] <jack> no, it calls close.
[21:45:43] <jdm> right, and that's a synchronous operation
[21:45:47] <jdm> that the compositor acknowledges
[21:46:18] <jack> can you check what hte compositor is doing?
[21:46:22] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[21:46:23] <jack> i assume that's thread 1
[21:46:53] <jack> i wonder if it gets exit twice.
[21:46:55] <larsberg> the only thing that I can think is that the compositor already exited for some reason, because it will stop processing messages if that happens. can we call close twice by accident?
[21:46:57] <jack> what file are you testing jdm?
[21:47:01] <jdm> jack: thread 1 is the bit I pasted
[21:47:12] <jdm> jack: there are hangs in just about every test, but the set changes every time
[21:47:33] <jdm> jack: the only other thread showing anything besides libuv scheduling is the profiler thread
[21:47:38] <jack> add some debugging ot handle_message and the Exit handler in there.
[21:47:44] <jack> see if it's getting Exit twice
[21:48:05] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[21:48:14] <jdm> actually the backtrace doesn't make sense
[21:48:17] <jdm> the previous frame is this:
[21:48:19] <jdm>         constellation_chan.send(ExitMsg(exit_chan));
[21:48:24] <jdm> from the create() method
[21:48:31] <jdm> so that is the compositor thread
[21:48:51] <jdm> I guess script did shut down
[21:48:56] <jdm> and the contestellation is gone
[21:49:21] * jack tries to reproduce.
[21:49:26] <Ms2ger> Mmm, contestellation
[21:49:38] <larsberg> yeah, I think the compositor task is waiting in a port.recv on the constellation on mine as well here
[21:49:53] <jdm> jdm      19239  0.0  0.1 736156 16824 pts/1    Sl+  16:41   0:00 ./servo -z -f file:///home/jdm/sdb/servo/src/test/html/content/test_documentElement.html
[21:49:56] <jdm> jdm      19450  0.0  0.1 736152 17436 pts/1    Sl+  16:41   0:00 ./servo -z -f file:///home/jdm/sdb/servo/src/test/html/content/test_global.html
[21:49:59] <jdm> jdm      19542  0.0  0.1 738204 17044 pts/1    Sl+  16:41   0:00 ./servo -z -f file:///home/jdm/sdb/servo/src/test/html/content/test_parentnodes.html
[21:50:02] <jdm> jdm      19560  0.0  0.1 736156 17768 pts/1    Sl+  16:41   0:00 ./servo -z -f file:///home/jdm/sdb/servo/src/test/html/content/test_prototypes.html
[21:50:05] <jdm> these are all tests that hang for me
[21:50:27] <jdm> but not when I run it alone :/
[21:51:33] <jack> just jittering the timing enough to trigger it i guess
[21:51:59] <jdm> and when I turn on RUST_LOG=script,servo it completes without incident
[21:52:01] *** Quits: dbaupp (Thunderbir@moz-6002BAEA.lns20.syd6.internode.on.net) (Ping timeout)
[21:52:59] <jack> i wonder if this is the async sync chan death problem.
[21:53:00] *** Joins: ghservo (ghservo@1E8607E8.6A2AE50.F3114085.IP)
[21:53:00] <ghservo> 01[13servo01] 15bors-servo merged 06auto into 06master: 02http://git.io/2KU0mQ
[21:53:00] *** Parts: ghservo (ghservo@1E8607E8.6A2AE50.F3114085.IP) ()
[21:53:01] *** Joins: ghservo (ghservo@79968228.6A2AE50.F3114085.IP)
[21:53:01] <ghservo> [13servo] 15bors-servo closed issue #1185: NVIDIA Linux drivers don't support GLX_BIND_TO_TEXTURE_RGBA_EXT 02http://git.io/6NfDFw
[21:53:01] *** Parts: ghservo (ghservo@79968228.6A2AE50.F3114085.IP) ()
[21:53:02] *** Joins: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP)
[21:53:02] <ghservo> [13servo] 15bors-servo closed pull request #1487: NVidia submodule updates (06master...06NVIDIA_fixes) 02http://git.io/ioCyDg
[21:53:02] *** Parts: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP) ()
[21:53:36] <jack> jdm: do you get any failure output?
[21:53:48] <jdm> jack: no error messages
[21:53:55] <jdm> no, lies
[21:54:00] <jdm> there are various task '<unnamed>' failed at 'sending on a closed channel', /home/jdm/sdb/servo/src/compiler/rust/src/libstd/comm/mod.rs:635
[21:54:01] *** Quits: Kostic (marko@moz-8FD15682.mbb.telenor.rs) (Quit: Kostic)
[21:54:04] <jack> man check-content is so fast.
[21:54:17] * jdm rebases to grab zmike's PR
[21:54:27] <jack> i finally got a hang.
[21:54:54] <jack> task 'RenderTask' failed at 'sending on a closed channel', /Users/jack/src/servo/src/compiler/rust/src/libstd/comm/mod.rs:635
[21:54:54] *** Quits: dhedlund (dhedlund@moz-D5D07BE4.ptld.qwest.net) (Quit: ChatZilla 0.9.90.1 [Firefox 26.0/20131212154635])
[21:55:26] <jack> this is sounding more like that deadlock thing i found more and more
[21:57:16] <jack> i'm getting hangs without task failure too though
[21:57:19] *** Quits: jet (jet@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Ping timeout)
[21:57:41] <jack> or at least the task failure doesn't print out
[21:58:38] *** bhearsum|buildduty is now known as bhearsum|afk
[21:58:47] <jdm> zmike: <3
[21:58:52] <jdm> task 'Constellation' failed at 'sending on a closed channel', /home/jdm/sdb/servo/src/compiler/rust/src/libstd/comm/mod.rs:635
[21:58:55] <jdm> task 'RenderTask' failed at 'sending on a closed channelALERT: TEST-PASS | [object HTMLParagraphElement] == [object HTMLParagraphElement]: 
[21:58:58] <zmike> :D
[21:59:05] <jdm> that makes such a difference
[21:59:16] *** Quits: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: brendan)
[21:59:18] <jack> zmike++ :)
[22:00:04] <jack> now to figure out which send.
[22:00:56] *** Joins: jet (jet@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[22:01:52] <larsberg> jdm: I should warn you that running with RUST_TEST_TASKS=1 usually makes the content tests pass :-)
[22:02:24] <jdm> yeah, I saw that :(
[22:03:13] <larsberg> and you get nifty green text, to boot!
[22:03:33] <Ms2ger> Green text?
[22:03:47] <Ms2ger> Could you spare three fiddy, perhaps?
[22:05:23] * larsberg examines ms2ger for resemblance to the lochness monster...
[22:07:34] <Ms2ger> Oh, never mind me
[22:07:40] * Ms2ger goes back into his loch
[22:08:29] *** Joins: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[22:09:11] <pcwalton> jack: ok to land my two PRs now?
[22:11:38] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[22:14:41] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[22:14:41] *** ChanServ sets mode: +qo dherman dherman
[22:15:48] <larsberg> pcwalton: you should be able to go ahead - we're r+'ing stuff at will now
[22:15:52] <pcwalton> ok
[22:15:55] <larsberg> I'm still fine with 1310
[22:16:29] <Ms2ger> Is larsbors back?
[22:16:36] *** Quits: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: brendan)
[22:16:49] <larsberg> nope, *real* bors is here now!
[22:18:56] *** Joins: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP)
[22:18:56] <ghservo> [13servo] 15larsbergstrom closed issue #668: Crash in FcPatternDestroy fontconfig 02http://git.io/FcE7HQ
[22:18:56] *** Parts: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP) ()
[22:24:04] <jack> pcwalton: did they get reviewed already?
[22:24:10] <jack> the tree is wide open, so fire away
[22:24:38] <pcwalton> jack: they got reviewed I believe.
[22:24:44] <pcwalton> definitely refactor did.
[22:24:47] <pcwalton> maybe the other needs another look
[22:25:08] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[22:25:12] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[22:25:12] *** ChanServ sets mode: +qo dherman dherman
[22:26:51] *** Quits: valenting (Thunderbir@moz-BD1A2D46.residential.rdsnet.ro) (Ping timeout)
[22:30:48] *** Quits: Ms2ger (Ms2ger@AA55AE55.592AEF45.F15B0BB3.IP) (Quit: nn)
[22:42:17] *** Joins: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[22:43:06] *** Joins: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP)
[22:43:06] <ghservo> 01[13servo01] 15bors-servo pushed 3 new commits to 06auto: 02http://git.io/iJXQvQ
[22:43:06] <ghservo> 13servo/06auto 1481769b4 15Patrick Walton: layout: GC unused flow types
[22:43:06] <ghservo> 13servo/06auto 14ff213b6 15Patrick Walton: layout: Rename `FlowData` to `BaseFlow` to match other types
[22:43:07] <ghservo> 13servo/06auto 14fc76107 15bors-servo: auto merge of #1310 : pcwalton/servo/refactor, r=pcwalton...
[22:43:09] *** Parts: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP) ()
[22:47:12] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[22:47:34] <larsberg> jack, jdm: this seems to be the sequence of rust_log events from ::servo when we get a freeze - https://gist.github.com/larsbergstrom/8409622
[22:48:14] <larsberg> (I did 'while true ; do RUST_LOG=servo ./servo <args> ; done' and eventually it froze with some output without the parallel output of check-content)
[22:48:56] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[22:49:05] <jdm> heh
[22:49:07] <jack> larsberg: i used that trick before too :)
[22:49:34] <jack> layout is supposed to shut down the renderer right?
[22:51:06] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[22:51:19] <larsberg> yes, in exit_now, it sends a message to the renderer to shut down and waits for confirmation
[22:51:43] <jack> what message did renderer try to send?
[22:51:59] <jack> oh. it's trying to talk to constellation?
[22:52:07] <jack> constellation needs to wait for layout to exit
[22:54:18] <jdm> what a tangled web of tasks we weave
[22:54:32] <larsberg> yeah, this has become a bit of a nightmare, particularly with the two shutdown paths
[22:55:17] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[22:55:48] <larsberg> I'm sort of worried that we'll fix up all of the crashes due to late port sends and then end up with edge cases where we deadlock
[22:56:18] <jdm> right
[23:01:21] *** Quits: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: brendan)
[23:03:10] *** Quits: jet (jet@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: jet)
[23:03:40] *** Joins: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[23:05:17] *** Joins: dbaupp (Thunderbir@DF3B07E7.D5A1DCF.37681C44.IP)
[23:05:38] *** Quits: bholley (bholley@moz-BBE3ABD.mv.mozilla.com) (Quit: bholley)
[23:06:03] *** Joins: bholley (bholley@moz-BBE3ABD.mv.mozilla.com)
[23:06:32] <pcwalton> jdm: updated https://github.com/mozilla/servo/pull/1309 per comments, r?
[23:07:23] *** Joins: ghservo (ghservo@1E8607E8.6A2AE50.F3114085.IP)
[23:07:23] <ghservo> 01[13servo01] 15bors-servo merged 06auto into 06master: 02http://git.io/iJXQvQ
[23:07:23] *** Parts: ghservo (ghservo@1E8607E8.6A2AE50.F3114085.IP) ()
[23:07:25] *** Joins: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP)
[23:07:25] <ghservo> [13servo] 15bors-servo closed pull request #1310: Refactor (06master...06refactor) 02http://git.io/Z4v5Tg
[23:07:25] *** Parts: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP) ()
[23:07:44] *** Joins: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net)
[23:07:44] <jdm> pcwalton: sorry, I got distracted partway through
[23:08:41] *** Joins: deokjinkim (Mibbit@B4104EBB.3CC170B1.1E14B209.IP)
[23:10:23] *** Quits: bholley (bholley@moz-BBE3ABD.mv.mozilla.com) (Quit: bholley)
[23:10:56] *** Joins: bholley (bholley@moz-BBE3ABD.mv.mozilla.com)
[23:11:00] *** Quits: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca) (Quit: canhtak)
[23:11:23] *** Joins: valenting (Thunderbir@moz-BD1A2D46.residential.rdsnet.ro)
[23:11:55] *** Joins: jet (jet@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[23:12:39] <pcwalton> no worries!
[23:14:26] *** Quits: bholley (bholley@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[23:15:30] *** Joins: canhtak (canhtak@moz-4B5B3414.wl.t.ulaval.ca)
[23:16:02] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[23:17:20] *** Joins: bholley (bholley@moz-BBE3ABD.mv.mozilla.com)
[23:18:54] <jack> how does hte compositor shut down stuff?
[23:18:59] <jack> maybe the trick is to unify those paths?
[23:19:28] <jack> ie, instead of script tearing things down, script can just trigger constellation
[23:19:35] <pcwalton> jdm: updated again
[23:19:50] <jack> then we only need compositr -> constellation exit and constellation -> compositor notification
[23:19:52] <jdm> pcwalton: you found a solution to the destructor problem?>
[23:19:59] <jack> and compositor can just shut down when all constellations are gone
[23:20:03] <pcwalton> oh, destructor problem?
[23:20:06] <pcwalton> maybe I updated too fast
[23:20:10] <pcwalton> I may have missed a comment
[23:20:15] * pcwalton checks email
[23:20:28] <jdm> isn't github lovely?
[23:20:36] <jdm> there's something to be said for critic
[23:20:54] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[23:21:02] <pcwalton> hmmmm
[23:21:13] *** Quits: valenting (Thunderbir@moz-BD1A2D46.residential.rdsnet.ro) (Ping timeout)
[23:21:50] <pcwalton> is there a way to tell whether the script task is shutting down?
[23:22:36] <jdm> not from the node destructor
[23:22:58] <jdm> the quick fix for reaping was storing the layout channel inside every node instead of going to the window to grab it
[23:23:14] <pcwalton> eww
[23:23:26] <pcwalton> maybe we should TLS that?
[23:24:27] <pcwalton> actually, that seems bad
[23:24:36] <pcwalton> because there could be multiple JS Contexts in a single Rust task
[23:24:37] <pcwalton> hmm hmm
[23:24:56] <jdm> right
[23:25:11] *** Quits: bholley (bholley@moz-BBE3ABD.mv.mozilla.com) (Quit: bholley)
[23:25:22] <jdm> we need to hash out some other solutions for this
[23:25:29] <jdm> at the time we wanted to land the rust upgrade
[23:25:53] *** Joins: bholley (bholley@moz-BBE3ABD.mv.mozilla.com)
[23:26:43] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[23:26:46] <pcwalton> where do we destroy all the nodes?
[23:27:03] <pcwalton> we could set a TLS boolean saying "everything is shutting down now"
[23:27:38] <jack> we can't TLS it. i tried that.
[23:27:46] <pcwalton> why not?
[23:27:51] <jdm> nodes from other contexts
[23:27:52] *** Quits: bholley (bholley@moz-BBE3ABD.mv.mozilla.com) (Quit: bholley)
[23:27:52] *** kimundi is now known as zz_kimundi
[23:27:56] <jack> you can TLS during destruction, but not otherwise
[23:28:00] <jack> because you don't know when JS GC runs.
[23:28:49] <jack> the problem is that JS GC runs dtors in arbitrary order.
[23:29:01] *** Joins: bholley (bholley@moz-BBE3ABD.mv.mozilla.com)
[23:29:04] <pcwalton> right, so the window might get nuked
[23:29:14] <jack> so window and element get finalized in the same sweep but if iwndow goes first, you now have no way to talk to layout.
[23:29:43] <jack> and since it seems to sweep in order of  allocation, it knocks out window the very first thing in all our test pages
[23:30:26] <pcwalton> so there's no way to go from JSObject -> JSContext?
[23:30:32] <jack> storing layout chan in the JS context doesnt' work either, because a single context might have multiple layouts.
[23:30:56] <jack> we can get a pointer to JSRuntime in the finalizer
[23:30:58] <jack> but not on the rust side.
[23:31:07] <pcwalton> oh, how come we can't on the rust side?
[23:31:27] <jack> how is Drop going to get passed arbitrary info?
[23:31:39] <jack> we'd have to do it in a special cleanup method or something.
[23:31:48] <pcwalton> yeah, maybe that's the right sol'n
[23:32:31] <jdm> it's possible to attach finalizer hooks to arbitrary dom types
[23:32:37] <jdm> such that they'll be called from the JS finalizer
[23:32:46] <jack> or we could have scritp own the memory and keep a free list
[23:33:05] <jack> script_chan we can TLS i think.
[23:33:30] <pcwalton> well, we need the pointer hash removal to happen immediately
[23:33:42] <jack> stuff layout chan into layout data isn't so bad except that it makes the casting stuff a lot grosser
[23:33:43] <pcwalton> because that needs to happen on the JS Object
[23:33:49] <pcwalton> well, it wastes memory
[23:34:20] <pcwalton> jdm: can you point me to the method to do that?
[23:34:29] <jdm> pcwalton: do what?
[23:34:35] <jdm> oh, the finalizer hook?
[23:34:38] <pcwalton> attach a finalizer to a Node
[23:34:49] <jdm> note that I don't think you can go from JSRuntime -> JSContext
[23:35:03] <jack> certainly not during destruction
[23:35:04] <jdm> runtime's have a 1:many relationship
[23:35:05] <pcwalton> can I hang something off the JSRuntime?
[23:35:16] <jdm> pcwalton: yes, there's a private field I think
[23:35:26] <jack> you can as long as we aren't already doing it. i believe i checked and we weren't.
[23:35:34] <jack> SetRuntimePrivate is probably the function
[23:35:36] <jdm> JS_SetRuntimePrivate
[23:36:00] *** Quits: bholley (bholley@moz-BBE3ABD.mv.mozilla.com) (Quit: bholley)
[23:36:23] <jdm> pcwalton: you want the customFinalize field in Bindings.conf
[23:36:25] <jdm> and then the result won't compile
[23:36:28] <jdm> http://mxr.mozilla.org/servo/source/src/components/script/dom/bindings/codegen/CodegenRust.py#4475
[23:36:29] <pcwalton> wait, hmm, this still seems like a security problem.
[23:36:34] <jdm> you'll need to change that bit
[23:36:43] <pcwalton> can I not get the JSContext that any JSObject lives in?
[23:36:52] <pcwalton> during destruction of that JSObject
[23:36:57] *** Quits: hoverbear (hoverbear@EBFA78B5.F19E5E7B.E74D50F2.IP) (Quit: Taking a nap.)
[23:37:00] <jdm> pcwalton: correct, that is impossible
[23:37:03] <pcwalton> :(
[23:37:07] <jdm> there's a thread on js-internals about that problem at this moment
[23:37:08] <jack> i looked this up and they specifically removed the ability to touch JSContext during finalize
[23:37:10] <pcwalton> but the JS engine must know...
[23:37:12] <pcwalton> odd
[23:37:15] <jack> they now pass JSFreeOp
[23:37:19] <jack> which contains JSRuntime *
[23:37:24] <jdm> pcwalton: there isn't actually a strong relationship between contexts and objects
[23:37:34] <jdm> there's one between compartments and objects
[23:37:49] <pcwalton> oh right, context != compartment
[23:37:57] <jack> getting the compartment fails during finalize.
[23:38:01] <pcwalton> >:(
[23:38:08] <jack> sorry
[23:38:10] <jack> that's not true.
[23:38:28] <jack> it's GetGlobalForObjectCrossCompartment that was failing.
[23:38:47] <pcwalton> if I can get the compartment for an object, and then stuff the pointer hash in the compartment, that should be fine.
[23:39:03] <jack> the pointer hash of what?
[23:39:07] *** Quits: elan-workweek (elancaster@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[23:39:12] <pcwalton> it's a list of all the valid DOM nodes
[23:39:21] <jack> in every layout task?
[23:39:31] <pcwalton> in every compartment, yeah
[23:39:37] <pcwalton> here's the threat model I'm worried about
[23:39:44] <jack> in the same-origin case there will be multiple layout tasks for a compartment.
[23:40:01] <pcwalton> that's same origin though, so not a security concern
[23:41:15] <pcwalton> what I'm worried about is: the page removes a DOM node, it hits a bug in incremental reflow where the flow/box for that node is mistakenly reused and not freed, so now the opaque node in layout is dangling. the user clicks on that box, and then a message is sent to script and we have a use-after-free vuln
[23:41:57] <pcwalton> how I wanted to solve this was for each origin to keep a list of all the valid pointers (I've measured the perf of this and it isn't bad if you use bit compression)
[23:42:08] <pcwalton> and verify that each node coming back from layout is in this set
[23:42:12] <pcwalton> and fail otherwise
[23:43:08] <jack> but layout frees the nodes, no JS.
[23:43:26] <jdm> js::GetObjectCompartment exists
[23:43:32] <jack> i suppose they aren't linked
[23:43:37] <jack> the box and the opaquenode layoutdata
[23:43:48] <jack> we could change it to Rc and fix that though.
[23:45:04] <pcwalton> jack: JS frees the JS wrappers
[23:45:10] <pcwalton> and the JS wrappers are what the click event is going to get dispatched to.
[23:45:16] <pcwalton> so it'll be a use-after-free
[23:45:39] <pcwalton> jdm: cool, I'll try to rewrite using that
[23:45:56] <pcwalton> I'm determined to get all my PRs in to not leave them hanging :)
[23:45:57] <jdm> pcwalton: you'll need to add it to jsglue.cpp, ftr
[23:45:58] <jack> script can't see inside layoutdata other than if it is None or Some (and the layout_chan)
[23:46:00] <pcwalton> ok
[23:46:05] <jack> so if it's freed, JS won't ever see it.
[23:46:15] <pcwalton> jack: it's not the layout data I'm concerned about
[23:46:23] <pcwalton> I'm concerned about firing the on click event handler
[23:46:25] <pcwalton> to a freed object
[23:46:32] *** Parts: simlay (name@moz-490DE04A.amandrai.net) ()
[23:46:32] <pcwalton> that's all JS stuff
[23:46:56] <pcwalton> I wouldn't be surprised if an attacker can do bad things by firing an event handler on a GC'd object
[23:47:08] <jack> you're goign to stuff the address of ever DOM node in the compartment?
[23:47:10] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[23:47:13] <pcwalton> yeah
[23:47:28] <pcwalton> if you compress the pointers it shouldn't be bad
[23:47:33] <pcwalton> you only need 1 bit
[23:47:34] <jack> that seems very expensive.
[23:47:47] <pcwalton> it's 1 bit extra per DOM node
[23:47:48] <jack> how so?
[23:47:54] <pcwalton> all you need is a set
[23:48:12] <pcwalton> most DOM nodes are going to be allocated near each other and probably 8 byte aligned
[23:48:25] <pcwalton> so you can just have a hash table which is like
[23:48:29] <pcwalton> upper bits of address -> bit set
[23:48:44] <pcwalton> each bit is 0 if there is no valid node there and 1 if there is
[23:48:54] <pcwalton> this is what the boehm GC does for every allocation
[23:49:00] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[23:49:12] <pcwalton> it would be nicer if we could just ask spidermonkey if a particular address is valid
[23:51:00] <jack> 8-byte aligned is the top 61 bits?
[23:51:12] <jack> minus the 16 or 2 dozen that arne't actually used
[23:51:20] *** Quits: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP) (Quit: Lost terminal)
[23:51:23] <pcwalton> jack: hold on, terrence says there may be an API for this already.
[23:51:24] <jack> that's still 2^36 or something
[23:51:29] <pcwalton> so that would make my entire PR irrelevant. ;)
[23:51:50] * jack is missing some part of this scheme :)
[23:52:33] <pcwalton> jack: it's just stored in a hash table
[23:52:40] <pcwalton> the top 55 bits are the keys in the hash
[23:52:50] <pcwalton> we drop the last 3 bits because those are irrelevant on 8 byte alignment
[23:52:52] <pcwalton> so it's like
[23:53:28] <pcwalton> 55 bit : hash table key -> 6 bit : 64-bit (2^6) bitfield -> 3 bits dropped
[23:56:01] *** Joins: bholley (bholley@moz-BBE3ABD.mv.mozilla.com)
[23:59:13] <jack> i am not seeing how you go from 55 to 6 bits.
[23:59:15] *** Joins: elan-workweek (elancaster@moz-7B0110AD.mv.mozilla.com)
[23:59:25] <pcwalton> I mean that the key in the map is 55 bits long
[23:59:28] <pcwalton> the values are 64 bits long
