[00:00:36] *** Quits: mawuli (mawuli@moz-36C70B7D.com.gh) (Ping timeout)
[00:02:12] *** Joins: mawuli (mawuli@moz-36C70B7D.com.gh)
[00:02:51] *** Quits: eibwen (kvirc@moz-E066B98A.dip0.t-ipconnect.de) (Ping timeout)
[00:04:25] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Input/output error)
[00:06:27] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.3)
[00:13:05] <cmr> rusti: mod foo { type int = u8: } std::mem::size_of::<foo::int>()
[00:13:06] -rusti- <anon>:10:34: 10:35 error: expected `;` but found `}`
[00:13:06] -rusti- <anon>:10         mod foo { type int = u8: } std::mem::size_of::<foo::int>()
[00:13:06] -rusti-                                            ^
[00:13:06] -rusti- application terminated with error code 101
[00:13:14] <cmr> rusti: mod foo { type int = u8; } std::mem::size_of::<foo::int>()
[00:13:15] -rusti- <anon>:10:56: 10:64 error: type `int` is private
[00:13:16] -rusti- <anon>:10         mod foo { type int = u8; } std::mem::size_of::<foo::int>()
[00:13:16] -rusti-                                                                  ^~~~~~~~
[00:13:16] -rusti- error: aborting due to previous error
[00:13:16] -rusti- application terminated with error code 101
[00:13:21] <cmr> rusti: mod foo { pub type int = u8; } std::mem::size_of::<foo::int>()
[00:13:23] -rusti- 1u
[00:13:27] <cmr> ok cool
[00:17:03] <cmr> rusti: type int = u8; std::mem::size_of::<int>()
[00:17:04] -rusti- 8u
[00:17:10] <cmr> acrichto: ^
[00:17:16] <cmr> acrichto: this is why it can't be c::int
[00:22:35] <cmr> brson: "
[00:22:37] <cmr> It would be nice if std somebody does not depend on libc (or maybe just ctypes).
[00:22:40] <cmr> oops copy-paste
[00:22:44] <cmr> brson: but what does that mean?
[00:23:07] *** kimundi is now known as zz_kimundi
[00:23:54] <cmr> mm
[00:24:01] <brson> cmr: std doesn't necessarily need a dependency on the libc crate
[00:24:08] <cmr> no, it doesn't.
[00:24:16] <brson> would be better if our stack didn't have an implicit C dependency
[00:24:25] <brson> if you want C you can pull it in
[00:27:25] <cmr> I just tried to "git ../"
[00:27:31] * cmr needs to go eat
[00:27:43] * cmr does so
[00:27:53] <cmr> I'm going to try fixing the resolve bug regardless of what we decide re libc
[00:28:05] <cmr> but I think it's an awful idea to name them int etc.
[00:31:07] *** flaper87 is now known as flaper87|afk
[00:31:24] <brson> agree, having multiple 'int's as a recipe for sadness
[00:32:43] <brson> i wonder if we could even make the primitive types keywords now
[00:32:52] <brson> we don't get much mileage these days out of our 'int' module, et.c
[00:37:26] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[00:40:11] *** Quits: mawuli (mawuli@moz-36C70B7D.com.gh) (Ping timeout)
[00:40:21] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[00:40:42] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[00:42:18] *** Joins: whitglint (uid15486@moz-31ABA2C0.irccloud.com)
[00:43:22] <darnuria|afk> there is some plan for libcollection/dlist.rs?
[00:43:29] <darnuria|afk> I will make some doc on it.
[00:43:34] *** darnuria|afk is now known as darnuria
[00:48:51] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[00:48:51] *** ChanServ sets mode: +ao pcwalton pcwalton
[00:49:45] *** Quits: sunfish (chatzilla@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[00:58:09] <brson> darnuria: there's no particular plan for dlist but thanks for writing docs
[00:58:48] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[01:07:06] *** Joins: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP)
[01:07:06] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/BBFsaQ
[01:07:06] *** Parts: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP) ()
[01:07:27] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[01:12:03] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[01:12:03] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/wOvkeQ
[01:12:03] <ghrust> 13rust/06auto 1487c8b35 15Alex Crichton: test: Clean out the test suite a bit...
[01:12:03] <ghrust> 13rust/06auto 1494ea080 15bors: auto merge of #12457 : alexcrichton/rust/fix-some-tests, r=brson...
[01:12:03] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[01:12:09] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[01:12:36] <cmr> brson: do we even want the primitive types usable as identifiers?
[01:13:11] <cmr> rusti: int::<'a>
[01:13:11] -rusti- <anon>:10:9: 10:18 error: unresolved name `int`.
[01:13:11] -rusti- <anon>:10         int::<'a>
[01:13:12] -rusti-                   ^~~~~~~~~
[01:13:12] -rusti- error: aborting due to previous error
[01:13:12] -rusti- application terminated with error code 101
[01:13:17] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[01:13:21] <cmr> rusti: let x: int<'a> = 42;
[01:13:22] -rusti- <anon>:10:16: 10:23 error: lifetime parameters are not allowed on this type
[01:13:22] -rusti- <anon>:10         let x: int<'a> = 42;
[01:13:22] -rusti-                          ^~~~~~~
[01:13:22] -rusti- error: aborting due to previous error
[01:13:23] -rusti- application terminated with error code 101
[01:13:31] <cmr> hey the span is even right, for the most part.
[01:14:28] <brson> cmr: *i* don't
[01:15:03] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[01:15:03] *** ChanServ sets mode: +ao pcwalton pcwalton
[01:15:35] <cmr> I hate that you can't open an issue from an issue search..
[01:17:01] <cmr> brson: the biggest problem is std::str
[01:17:12] <cmr> that's an incredibly useful name..
[01:18:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[01:19:32] <brson> cmr: ah yeah it is
[01:19:47] <brson> str *may* go away with DST
[01:20:01] <cmr> wouldn't DST make it *more* prominent, not less?
[01:20:10] <cmr> oh right the type itself
[01:20:24] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[01:20:30] <cmr> for now we could just reserve the machine types.
[01:20:32] <cmr> u8 etc
[01:20:57] <brson> i don't feel great about reserving only some of the primitive types
[01:20:57] <cmr> hm the manual doesn't considered str etc to be primitive
[01:21:20] <cmr> what a curious definition of "primitive", but it makes sense.
[01:21:25] <cmr> str *is* a compound type.
[01:23:10] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Ping timeout)
[01:28:52] *** nrc|afk is now known as nrc
[01:30:21] <darnuria> brson: Thanks for reply :) sorry I did not send my message to the right chan
[01:30:38] <aatch> cmr, str isn't primitive, it *is* built ing
[01:30:41] <aatch> in*
[01:30:54] <cmr> yes
[01:31:13] <aatch> just clarifying
[01:31:27] <cmr> 'preciated
[01:37:49] *** Joins: sunfish (chatzilla@moz-42DA0C69.dsl.dynamic.sonic.net)
[01:42:53] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[01:46:03] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[01:48:01] <brson> oh no, I tried to delete my comment from https://github.com/mozilla/rust/pull/12494 and it deleted *everybody's*
[01:48:13] <brson> oh wait, nvm
[01:50:32] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[01:52:00] *** Joins: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP)
[01:52:00] <ghrust> [13rust] 15bors 04force-pushed 06auto from 1494ea080 to 14994b48c: 02http://git.io/N3iJvQ
[01:52:00] *** Parts: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP) ()
[01:52:01] *** Joins: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP)
[01:52:01] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/O43StA
[01:52:01] <ghrust> 13rust/06auto 14abde5ed 15Huon Wilson: mk: restore check-notidy....
[01:52:01] <ghrust> 13rust/06auto 144bc7672 15bors: auto merge of #12465 : huonw/rust/notidy, r=brson...
[01:52:02] *** Parts: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP) ()
[02:01:50] <nrc> In resolve.rs we resolve stuff in ast order. If I need to check something ahead of time and it has not been resolved, can I just resolve it or will that break all kinds of stuff? (obvs I'd hae to ensure I odn't resolve something twice and take care to avoid cycles)
[02:03:16] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[02:04:09] <cmr> pcwalton: ^
[02:04:30] <pcwalton> what do you need to check? and during which phase?
[02:04:36] <pcwalton> there is the imports phase
[02:04:40] <pcwalton> and there is the name resolution phase
[02:04:55] <pcwalton> in general going to resolve things out of order during name resolution should be OKâ€¦ in some cases
[02:05:07] <pcwalton> e.g. not resolving a name that could refer to a local after a "let"
[02:05:52] <nrc> I'm only interested in structs
[02:05:58] <pcwalton> should be OK then.
[02:06:01] <pcwalton> if it's post-import
[02:06:32] <nrc> yeah, its the resolve_crate phase, which I assume is name resolution
[02:07:46] <nrc> I guess we will ahve to do this with traits too in the future to check for cycles in the inheritance graph
[02:07:56] <nrc> *have
[02:09:52] <acrichto>  failed at 'mmap for stack of size 2097152 failed: Invalid address, or not enough available memory', /home/rustbuild/src/rust-buildbot/slave/auto-linux-32-opt/build/src/libgreen/stack.rs:46
[02:09:55] <acrichto> that does not sound good
[02:10:30] *** Joins: lpy (lpy@665181D6.D58093C6.8C13C571.IP)
[02:11:21] <cmr> acrichto: from huon's PR?
[02:11:40] <acrichto> nah from my test PR
[02:11:45] <cmr> ah
[02:11:47] <acrichto> I should see what the test does
[02:12:11] *** Quits: lpy (lpy@665181D6.D58093C6.8C13C571.IP) (Client exited)
[02:14:11] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[02:14:29] <cmr> bjz: ping
[02:14:43] <bjz> cmr: ohai
[02:15:08] <cmr> bjz: do we actually care about BITS and BYTES at this point? looking at removing / consolidating std::int etc.
[02:15:38] <bjz> cmr: they are useful in constexprs :(
[02:15:47] <bjz> we have no associated items
[02:15:53] <cmr> this is true.
[02:16:03] <bjz> or if we had them, the ability to access them
[02:16:03] <cmr> constexprs overall aren't very useful though.
[02:16:14] <bjz> they are in some instances
[02:16:16] <cmr> and sizeof is reserved.
[02:16:29] <SiegeLord> sizeof could be an associated item
[02:16:35] <bjz> SiegeLord: yeah
[02:16:40] <bjz> on T
[02:16:46] <cmr> eugh adding magic fields?
[02:16:48] <cmr> no thanks.
[02:16:58] *** darnuria is now known as darnuria|zZz
[02:17:24] *** Joins: aurynj (Eon@583ABBE5.60FA2E28.B9E25744.IP)
[02:17:27] <SiegeLord> It wouldn't be magic, it'd be an associated item of the Sized trait XD
[02:17:37] <SiegeLord> I guess that's still somewhat magic
[02:19:41] *** Quits: tjc (tjc@moz-791C24B0.phlapa.east.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[02:22:19] *** Quits: aurynj (Eon@583ABBE5.60FA2E28.B9E25744.IP) (Client exited)
[02:22:36] *** Joins: aurynj (Eon@583ABBE5.60FA2E28.B9E25744.IP)
[02:27:38] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[02:31:52] <nrc> can I access the ast map from the Resolver?
[02:32:25] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[02:37:55] <brson> nrc: it looks like resolve doesn't get the ast_map
[02:38:06] <brson> but it does exist by the time resolve runs so you can pass it in
[02:38:56] <nrc> thanks brson!
[02:38:59] <brson> nrc: driver/driver.rs
[02:39:25] *** Joins: canhtak (canhtak@moz-8C86DA1D.wl.t.ulaval.ca)
[02:43:36] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[02:50:46] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[02:53:05] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[03:02:48] *** Quits: aurynj (Eon@583ABBE5.60FA2E28.B9E25744.IP) (Ping timeout)
[03:05:57] <brson> acrichto: r? https://github.com/mozilla/rust/pull/12430
[03:06:55] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[03:07:01] *** Joins: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP)
[03:07:01] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/O43StA
[03:07:01] *** Parts: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP) ()
[03:07:26] *** jld is now known as jld|laundromat
[03:08:17] *** Quits: zz_kimundi (kimundi@moz-D90B8D7C.dip0.t-ipconnect.de) (Ping timeout)
[03:11:01] <bjz> cmr: been talking to carter about checked math
[03:11:43] *** Joins: zz_kimundi (kimundi@moz-75FC8F5B.dip0.t-ipconnect.de)
[03:11:44] *** zz_kimundi is now known as kimundi
[03:11:58] *** Joins: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP)
[03:11:58] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/xqPpFA
[03:11:58] *** Parts: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP) ()
[03:11:59] *** Joins: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP)
[03:11:59] <ghrust> [13rust] 15bors pushed 3 new commits to 06auto: 02http://git.io/9xqq1g
[03:11:59] <ghrust> 13rust/06auto 14b2bb2f5 15Brian Anderson: Remove check-fast. Closes #4193, #8844, #6330, #7416
[03:11:59] <ghrust> 13rust/06auto 1410b0f16 15Brian Anderson: test: Ignore compile-fail/issue-5806.rs...
[03:11:59] <ghrust> 13rust/06auto 14097574a 15bors: auto merge of #12304 : brson/rust/check-fast, r=alexcrichton
[03:12:01] *** Parts: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP) ()
[03:12:16] <bjz> how about check math being the default? but then have `struct Unchecked<T>(T);` with the operators defined on it for the various types
[03:13:08] <bjz> as in, the operators would implement the unchecked versions
[03:13:25] <bjz> just an idea
[03:16:02] <cmr> I'd be surprised to see a new idea on this subject
[03:16:51] <cmr> I think the status quo is mostly fine...
[03:17:16] <cmr> because it's performant, it's what people expect, and even though it will cause the occasional bug, it follows the principle of least surprise.
[03:17:40] *** Quits: doomlord_ (servitor@moz-99BE89EC.range86-184.btcentralplus.com) (Quit: Leaving)
[03:17:42] <cmr> now a Checked<T> would be particularly useful I think
[03:17:43] <bjz> doesn't rust strive for safe as default though?
[03:17:52] <cmr> the argument is that arithmetic can never be unsafe.
[03:17:57] <bjz> yeah
[03:18:16] <bjz> I'll do a mockup for both
[03:18:35] <cmr> there are some papers that checked arith can impose less than a 10% perf penalty on certain benchmarks.
[03:18:43] <ChrisMorgan> But checked arithmetic requires Option<T> all over the place, which is utterly untenable.
[03:18:53] <cmr> ChrisMorgan: no, it can require failure.
[03:18:53] <bjz> ChrisMorgan: fail?
[03:19:01] <ChrisMorgan> Sorry, yes.
[03:19:02] <cmr> that is what I would envision Checked<T> being.
[03:19:15] <ChrisMorgan> I was assuming the current Checked* traits' behaviour.
[03:19:17] <cmr> you *want* failure if bounds are exceeded, if you're using Checked<T>
[03:19:26] <cmr> No, this would be supplementary to .checked_add etc
[03:19:57] * ChrisMorgan is not at all against a default of fail-on-overflow
[03:20:04] <cmr> But a key tenet of rust is that "safety does not need to come at a price"
[03:20:14] <cmr> And that "We care about the last 10% of performance"
[03:20:22] <cmr> we can't do that with checked-by-default.
[03:20:36] <carter> cmr: it should be UnChecked<T> 
[03:20:39] <carter> with checke default
[03:20:47] <carter> (on phone, will chime in more soon )
[03:21:09] <cmr> I have to go tutor someone in ~10 minutes so I'm not here for too long
[03:21:39] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[03:22:01] *** Quits: canhtak (canhtak@moz-8C86DA1D.wl.t.ulaval.ca) (Quit: canhtak)
[03:22:25] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[03:22:27] <cmr> I just feel like, at the bottom of the stack, where you have your library functions doing math with arguments they are given, things are just going to take either a float (probably f64), and int, or a uint.
[03:22:35] <cmr> instead of Integer<T>
[03:22:44] <cmr> or rather just Integer
[03:22:46] <cmr> etc.
[03:23:03] <cmr> this is probably wrong, but I feel like our syntax almost punishes being generic.
[03:23:28] <cmr> which is what I think the root problem is
[03:23:34] <cmr> people don't use generics because they're painful
[03:23:42] <cmr> whereas imagine if you could say `fn foo(x: Integer) { ... }`
[03:23:43] <bjz> impl Add/Mul/etc for Option?
[03:23:52] <cmr> rather than `fn foo<T: Integer>(x: T) { ... }`
[03:23:53] <bjz> dunno
[03:23:56] <bjz> :/
[03:24:18] <cmr> Because it is slightly more inconvenient, I feel like generics are going to be reached for less.
[03:24:24] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[03:24:24] *** ChanServ sets mode: +ao dherman dherman
[03:24:37] <cmr> Checked arith etc aren't really a problem.
[03:24:42] <cmr> The problem is things hard-coding use of int etc.
[03:24:52] <bjz> yeah
[03:25:01] <cmr> Because once they do that, we're *stuck* with this inflexible type.
[03:25:06] <bjz> interested in what carter has to say
[03:25:14] <cmr> that's just my thoughts on it
[03:25:18] <bjz> once he is off the phone
[03:25:19] <ChrisMorgan> cmr: I want less painful generics like that.
[03:25:24] * cmr bbs
[03:25:38] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[03:25:43] <bjz> ChrisMorgan: how would that happen?
[03:25:52] <cmr> I think it's pretty easy to do.
[03:25:59] <cmr> Instead of listing your type parameters you just use them
[03:26:10] <cmr> We already disallow unboxed traits, so it'd be fully back-compat.
[03:26:12] <ChrisMorgan> bjz: let's say for example that you hijack @ for it once it's released. Then you use `x: &@Integer`.
[03:26:20] * cmr vomits slightly
[03:26:38] <ChrisMorgan> I'd use <, but that's going to cause trouble.
[03:26:46] <cmr> yeah
[03:26:49] <cmr> not enough punctuation!
[03:26:56] <ChrisMorgan> Unicode!
[03:26:59] * ChrisMorgan stops before beginning
[03:26:59] <bjz> basically I think what carter was saying is that we aren't leveraging our newtypes nearly enough. I dunno what I think, but he might have a point.
[03:27:14] * ChrisMorgan would actually prefer newtypes dead
[03:27:23] <bjz> why?
[03:27:28] * ChrisMorgan believes they add no value to the language whatsoever, now.
[03:27:36] <carter> ???
[03:27:39] <bjz> ????
[03:27:41] <carter> pray elaborate
[03:27:44] <bjz> o_o
[03:27:52] <carter> (on phone, but pray elaborate ChrisMorgan )
[03:28:29] <ChrisMorgan> `struct X(Y);`, `struct X { y: Y }`. The difference is that you can access the contained value in the latter easily. Or you can make it priv if you prefer.
[03:28:56] <carter> ChrisMorgan: the main value of newtype is you can do alterantive versions of traits
[03:29:17] <carter> at least in this current iteration of types in urst
[03:29:18] <bjz> struct Foo(T); is basically sugar for enum Foo { Foo(T) }
[03:29:21] <ChrisMorgan> But newtype structs add absolutely nothing in terms of real functionality.
[03:29:38] <carter> ChrisMorgan: alternative trait defns
[03:29:53] <ChrisMorgan> carter: huh?
[03:29:53] <bjz> struct X { y: Y } is sugar for enum X { X { y: Y } }
[03:30:11] <bjz> makes sense from a symmetry point of view
[03:30:19] <ChrisMorgan> carter: a regular struct with one field is just the same.
[03:30:40] <ChrisMorgan> Except it's easier to use because you don't need to do pattern matching.
[03:30:52] <ChrisMorgan> And you can make it *genuinely* private if you so desire.
[03:31:09] *** Joins: canhtak (canhtak@moz-8C86DA1D.wl.t.ulaval.ca)
[03:33:05] <bjz> ChrisMorgan: why don't we do enum Option<T> { Some { value: T }, None }?
[03:33:43] <ChrisMorgan> bjz: I have indulged in the thought exercise of removing tuple variants before. :-)
[03:33:44] <carter> ChrisMorgan: ok
[03:33:53] <carter> so theres more than one way to write newtype in rust :)
[03:34:08] <carter> same in the haskell context
[03:34:09] <carter> either wya
[03:34:10] <ChrisMorgan> bjz: with enums, tuple variants are easier; with structs, structs are easier.
[03:34:16] <carter> both are semantailly newtypes
[03:34:42] <ChrisMorgan> Hang on, then what *is* a newtype?
[03:34:47] <bjz> ChrisMorgan: as I say, structs are semantically the same as single variant enums
[03:34:48] <carter> so newtype style Struct is just a struct Foo<T> {unFoo : T} ;
[03:35:09] <ChrisMorgan> What they've been being labelled in Rust are tuple-structs as newtype structs and standard structs as not newtype structs.
[03:35:13] <carter> ChrisMorgan: new type is just saying "give this otehr type a new name"
[03:35:22] <carter> has no runtime cost
[03:35:35] *** Joins: Guest_ (textual@16F167B.4C57D258.D8E8354F.IP)
[03:35:37] <ChrisMorgan> OK, so it was just a terminology failure.
[03:35:37] <carter> just gets treated as a different type for Generics and type checking
[03:35:41] <carter> yes
[03:35:41] <carter> :)
[03:35:57] <carter> yay
[03:36:21] <carter> when i say "newtype" think "wrapper / rename that has zero runtime cost, and only has one constructor / field"
[03:36:46] <bjz> carter: all of our types are unboxed though in rust
[03:36:49] <carter> sure
[03:36:56] <bjz> carter: so it is less of an issue
[03:36:58] <ChrisMorgan> bjz: I've indulged in the thought exercise of having just enums with struct variants before and removing the other three forms
[03:37:24] <carter> bjz: so you get them for free from single constructor single field data types in rust
[03:37:32] <carter> in haskell not so much
[03:37:40] <carter> anyways, subjec tot that
[03:38:13] <carter> do we agree that the  "NewType" idiom, lets you have Unchecked<T> versions of the various Int/UInt types and their ops?
[03:38:44] * ChrisMorgan waits until we have more influence from the traditional OO side and people start calling it the adapter pattern
[03:38:53] <carter> :)
[03:38:54] <ChrisMorgan> (Not that it is precisely that that is being discussed.)
[03:38:58] <bjz> ChrisMorgan: well, it kind of is
[03:39:02] <carter> ChrisMorgan: you're not answering my question
[03:39:03] <carter> :)
[03:39:19] <carter> explicit unchecking int/uint things
[03:39:24] <carter> should be explicit
[03:39:25] * ChrisMorgan is good at dodging questions ;-)
[03:39:42] <carter> thats not helpful
[03:39:44] <carter> or productive
[03:39:48] <carter> why are you dodging it
[03:39:54] <bjz> carter: I think it would be good to do a mockup impl
[03:39:57] <carter> that is helpfusure
[03:39:58] <carter> *sure
[03:40:06] <bjz> carter: using struct I8(i8);
[03:40:10] <carter> ?
[03:40:13] <bjz> (yay newtypes)
[03:40:32] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[03:40:33] *** Joins: tjc (tjc@moz-791C24B0.phlapa.east.verizon.net)
[03:40:34] *** ChanServ sets mode: +o tjc
[03:40:39] <bjz> well, we can't impl add on i8 twice
[03:40:43] <carter> yes
[03:40:44] <bjz> there would be a conflict
[03:40:51] <carter> bjz: hence 
[03:41:10] <bjz> :)
[03:41:16] <carter> the struct Uncheck<T> {rep: T}
[03:41:18] <carter> or whatever
[03:41:28] <carter> right?
[03:41:34] <carter> bjz: lets whack it out right now
[03:41:39] <ChrisMorgan> carter: I believe that the concept is sound.
[03:41:42] <carter> ok
[03:41:51] <carter> but?
[03:41:59] <carter> someone has to do the work?
[03:42:04] <bjz> yeah, Unchecked will wrap those I8 etc, in my dummy impl
[03:42:10] <carter> yes
[03:42:27] <bjz> I will also do a version with a Checked adaptor type (yay) for the converse
[03:42:38] <carter> and then the trait IMPL stuff will give the nice syntax to the raw_uncheck_foo
[03:42:56] <carter> which semantics does normal Int etc have currently?
[03:43:05] <bjz> unchecked
[03:43:10] <ChrisMorgan> You'll only be able to get API-compatible forms, though; so fail-on-overflow and wrap-on-overflow are OK, but not an Option<T>-based None-on-overflow interface.
[03:43:11] <bjz> it wraps
[03:43:26] <bjz> ChrisMorgan: yeah
[03:43:42] <carter> thats fine
[03:43:52] <carter> i want bad math to fail loudly
[03:43:58] <bjz> ChrisMorgan: we already fail on divide by zero
[03:44:02] <carter> good
[03:44:29] <carter> what about the rust version of (minBound :: Int) `quot` (-1) ?
[03:44:30] <carter> that should fial
[03:44:34] <carter> *fail
[03:45:12] <bjz> rusti: std::int::MIN % -1
[03:45:13] -rusti- <anon>:10:9: 10:22 error: unresolved name `std::int::MIN`.
[03:45:13] -rusti- <anon>:10         std::int::MIN % -1
[03:45:13] -rusti-                   ^~~~~~~~~~~~~
[03:45:14] -rusti- error: aborting due to previous error
[03:45:14] -rusti- application terminated with error code 101
[03:45:16] <ChrisMorgan> rusti: 1.0 / 0.0
[03:45:17] -rusti- inff64
[03:45:18] <bjz> :/
[03:45:59] <bjz> rusti: Bounded::min_value(None::int) % -1
[03:46:01] -rusti- pastebinned 20 lines of output: http://ix.io/aIM
[03:46:13] <bjz> woops
[03:46:18] <bjz> rusti: Bounded::min_value(None::<int>) % -1
[03:46:21] -rusti- pastebinned 11 lines of output: http://ix.io/aIN
[03:46:30] <ChrisMorgan> rusti: version  // bjz: see, that's what happens when it's a month out of date
[03:46:31] -rusti- "rustc 0.10-pre (4cd555d 2014-01-24 03:28:15 -0500)"
[03:46:40] <bjz> maybe it is not re-exported
[03:46:59] <bjz> rusti: std::num:::Bounded::min_value(None::<int>) % -1
[03:47:01] -rusti- <anon>:10:19: 10:20 error: expected ident, found `:`
[03:47:01] -rusti- <anon>:10         std::num:::Bounded::min_value(None::<int>) % -1
[03:47:01] -rusti-                             ^
[03:47:01] -rusti- application terminated with error code 101
[03:47:06] <ChrisMorgan> rusti: std::int::min_value
[03:47:07] -rusti- -9223372036854775808
[03:47:10] <bjz> ohhh
[03:47:18] <bjz> rusti: std::int::min_value % -1
[03:47:20] -rusti- 0
[03:47:23] <bjz> hah
[03:47:48] <bjz> rusti: std::int::min_value.checked_div(&-1)
[03:47:49] -rusti- <anon>:10:9: 11:6 error: type `int` does not implement any method in scope named `checked_div`
[03:47:49] -rusti- <anon>:10         std::int::min_value.checked_div(&-1)
[03:47:49] -rusti- <anon>:11     };
[03:47:49] -rusti- error: aborting due to previous error
[03:47:50] -rusti- application terminated with error code 101
[03:47:53] <bjz> :/
[03:48:34] <carter> bjz: did you just fine a bug?
[03:48:39] <carter> std::int::min_value % -1
[03:48:41] <carter> ?
[03:48:56] <bjz> rusti: use std::num::CheckedDiv; std::int::min_value.checked_div(&-1)
[03:48:58] -rusti- None
[03:49:18] <bjz> lol, CheckedDiv is the only checked trait not re-exported
[03:49:42] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[03:49:50] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[03:50:51] <bjz> carter: cheers btw
[03:51:05] <bjz> carter: getting me to look at the problem in a different way
[03:51:11] <carter> oh?
[03:51:15] <carter> which way?
[03:51:23] <erickt> acrichto: do you know if there was any decision about enabling the default typaram feature by default?
[03:51:48] <bjz> carter: using newtypes
[03:52:13] <carter> yeah
[03:52:20] <carter> i'm sometimes meh about newtypes 
[03:52:32] <carter> but honestly sometimes its the only sane way to do "both"
[03:53:14] <bjz> carter: I think the biggest assymetry in our types is the current lack of records :(
[03:53:20] <carter> oh
[03:53:23] <carter> thats a tricky one
[03:53:26] <carter> wait
[03:53:30] <carter> structs kinda have that
[03:53:46] <bjz> I know they had issues, but it is a weird thing, having tuples but not records
[03:54:00] <bjz> when we have tuple structs and record structs
[03:56:09] <ChrisMorgan> "records"?
[03:56:26] <acrichto> erickt: I am unaware of one if it happened
[03:56:44] <erickt> k
[03:57:26] *** Quits: tjc (tjc@moz-791C24B0.phlapa.east.verizon.net) (Quit: Textual IRC Client: www.textualapp.com)
[03:57:29] <cmr> carter: bjz: sure it's easily possible, but I don't think it address the problem.
[03:58:30] <carter> cmr: whats problem?
[03:58:45] <cmr> carter: the painfulness of generics
[03:58:49] <carter> which?
[03:58:54] <carter> records or nums?
[03:58:58] <cmr> neither
[03:59:00] <carter> and which generics?
[03:59:06] <cmr> I was talking about it before I left...
[03:59:08] <carter> whos generics are we talking about?
[03:59:14] <cmr> in general.
[03:59:26] <cmr> having UnChecked and Checked is useless when some code is hard-wired to a specific numeric type.
[03:59:32] <carter> nope
[03:59:38] <carter> i don't understand that sentence
[03:59:54] <carter> thats exactly what generics do
[03:59:58] <cmr> yes
[04:00:07] <cmr> but because generics are painful to use in Rust, people don't use them when they should.
[04:00:16] <carter> then they need to get improved
[04:00:33] <carter> i don't have bandwidth right now to help hack on it
[04:00:51] <carter> but i'm happy to at least be someone to ping to help think things through
[04:00:55] <cmr> `fn foo(x: int)`
[04:00:57] <cmr> make that generic
[04:01:05] <cmr> `fn foo<T: Integer>(x: T)`
[04:01:19] <carter> ok
[04:01:22] <carter> lemme zoom out
[04:01:25] <cmr> it's painful to write
[04:01:30] <carter> cmr: hangon
[04:01:53] <carter> end users don't care about generics in their applications as much as library authors do
[04:01:59] <carter> However
[04:02:04] <carter> when engineering a library
[04:02:10] <carter> generics are an amazing tool
[04:02:17] <cmr> Yes I agree.
[04:02:21] <carter> that also reduces your error surface area
[04:02:30] <cmr> But all it takes is a single function in a single library to make life painful.
[04:02:33] <bjz> <3 generics
[04:02:37] <carter> yes
[04:02:38] <cmr> I love generics.
[04:02:40] <carter> hence
[04:02:47] <cmr> I think there are ergnomic problems that prevent them from reaching their peak.
[04:02:51] <carter> make generics sane for library authors
[04:02:55] <carter> to produce
[04:03:01] <carter> and low pain for end users to consuem
[04:03:16] <carter> theres some subtlties to that which may be tricky with current rust
[04:03:20] <carter> because of lifetimes and such though
[04:03:52] <bjz> as a library author I would rather battle the murky ugliness of generics if it meant that the end user could use their concrete types nicely
[04:04:19] <bjz> ugliness in terms or ugly syntax
[04:04:24] <bjz> :P
[04:04:25] <carter> ok
[04:04:30] <cmr> So the central thing I'm working from here is "people write code carelessly"
[04:04:33] <carter> so basically good local type inference
[04:04:36] <carter> cmr: yes
[04:04:46] <cmr> Following from that, we get "doing the right thing should be the easiest thing"
[04:04:49] <carter> yes
[04:04:59] <bjz> carter: out local type inference is pretty good. not perfect though
[04:05:03] <carter> yes
[04:05:04] <carter> agreed
[04:05:10] <bjz> there is weirdness in places
[04:05:12] <carter> yes
[04:05:20] <carter> 'cause of resource logic in types
[04:05:27] <bjz> assymetries that you would expect to infer right
[04:05:28] <bjz> yeah
[04:06:24] <bjz> yay, checked thingy: https://gist.github.com/bjz/9202512
[04:06:34] <bjz> :P
[04:07:04] *** Joins: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP)
[04:07:04] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/N2Kf6g
[04:07:04] <ghrust> 13rust/06auto 14b0a495f 15OGINO Masanori: Exclude build metadata from equality checking....
[04:07:04] <ghrust> 13rust/06auto 14043c972 15bors: auto merge of #12454 : omasanori/rust/semver-eq, r=alexcrichton...
[04:07:05] *** Parts: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP) ()
[04:07:29] <carter> bjz: you fast
[04:07:41] <bjz> eh, not really
[04:07:44] <carter> :)
[04:07:46] <carter> ok
[04:07:47] <carter> g2g
[04:07:49] <carter> happy hacking
[04:07:57] <bjz> o/
[04:07:59] <bjz> ty!
[04:14:27] <bjz> https://gist.github.com/bjz/9202512
[04:14:52] <bjz> the unchecked implementation is ugly because it of the current defaults
[04:15:14] <bjz> but shows an idea
[04:17:03] * bjz kinda likes the checked thingy
[04:19:27] <bjz> `(Checked(2) + Checked(3)).unwrap()` is kinda nicer than `2.checked_add(&3).unwrap()` imo
[04:19:49] <bjz> but it might be a personal preference
[04:23:35] *** jld|laundromat is now known as jld
[04:28:48] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[04:29:07] <bjz> ChrisMorgan: a deref trait would also make things nicer
[04:29:22] <bjz> which is coming, ofc
[04:36:38] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[04:43:10] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[04:45:32] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[04:45:46] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[04:46:37] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Quit: Textual IRC Client: www.textualapp.com)
[04:46:50] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[04:47:38] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Ping timeout)
[04:55:40] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[05:02:09] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Quit: Lost terminal)
[05:10:58] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[05:11:12] <acrichto> st
[05:11:14] <acrichto> whoops
[05:11:21] <acrichto> quick, someone give me a git status
[05:12:09] <sfackler> On branch master
[05:12:09] <sfackler> Your branch is up-to-date with 'origin/master'.
[05:12:09] <sfackler> nothing to commit, working directory clean
[05:12:17] <sfackler> hth
[05:13:04] <acrichto> \o/
[05:14:06] <Eridius> ## master..origin/master
[05:19:44] * ChrisMorgan was going to say `On branch rewrite-the-compiler-and-do-everything-properly-and-fix-all-the-bugs`
[05:20:18] <sfackler> man, I really wished the ast used struct variants
[05:20:54] <sfackler> what's the third field? who knows! ExprIf(@Expr, P<Block>, Option<@Expr>)
[05:21:04] <sfackler> time to go digging in the parser
[05:21:19] <ChrisMorgan> sfackler: shouldn't be hard for you to fix.
[05:21:31] <acrichto> sfackler: else?
[05:21:44] <sfackler> oh, I guess that'd make sense
[05:21:52] <acrichto> dunno why it's not a block though
[05:21:56] <acrichto> when the if is a block
[05:22:06] <acrichto> or what I assume to be the if is a block
[05:22:07] *** Joins: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP)
[05:22:07] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/N2Kf6g
[05:22:07] *** Parts: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP) ()
[05:23:17] <sfackler> acrichto: it's probably the whole else if/else chain
[05:23:31] <acrichto> aaaaah that would make sense
[05:23:45] <sfackler> it's still kind of bonkers though
[05:23:55] <sfackler> since there's no ExprElseIf
[05:24:05] <sfackler> though I guess ExprIf would actually work just fine there
[05:25:14] *** Quits: esummers_ (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[05:25:19] <aatch> if you think of if/else as if <block> else <expr>, then `else if` is just where `expr` happens to be if.
[05:26:11] <sfackler> yeah
[05:26:21] <ChrisMorgan> The difference being that unlike languages like C where that actually *is* how it's implemented (I presume, anyway), we require a block after `else`.
[05:26:54] <aatch> ChrisMorgan, yeah, well in C 'if' is a statement
[05:27:00] *** Joins: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP)
[05:27:01] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/nAfhiw
[05:27:01] *** Parts: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP) ()
[05:27:01] *** Joins: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP)
[05:27:01] <ghrust> [13rust] 15bors pushed 18 new commits to 06auto: 02http://git.io/1DBP7w
[05:27:01] <ghrust> 13rust/06auto 144052912 15Alex Crichton: rustc: Don't error on the rlib symlinks...
[05:27:01] <ghrust> 13rust/06auto 1408a42bd 15Alex Crichton: Use lines_any() when parsing output form "ar"...
[05:27:02] <ghrust> 13rust/06auto 14f753079 15Florian Hahn: Remove some obsolete ignored tests...
[05:27:04] *** Parts: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP) ()
[05:27:16] <aatch> and the grammar is if (<condition>) <statement> [else <statement>]
[05:27:16] <acrichto> will it land?!
[05:27:19] <acrichto> will it blend?!
[05:27:44] * ChrisMorgan is glad we require `if $expr $block` rather than `if $expr $expr` or `if ($expr) $expr`
[05:28:19] <sfackler> goto fail; goto fail;
[05:28:27] <acrichto> lol
[05:28:37] <acrichto> ok so all C compilers know that dead code was afterwards
[05:28:42] <acrichto> they could have at least warned about dead code
[05:29:02] <sfackler> fun fact: -Wunreachable-code isn't part of -Wall *or* -Wextra!
[05:29:11] <sfackler> it is part of -Weverything though
[05:29:18] <acrichto> ...
[05:29:28] <acrichto> -Wall-but-not-everything
[05:29:38] <aatch> what about -Wpedantic?
[05:29:40] <acrichto> -Wmost-things
[05:29:49] <sfackler> there is some flag for -Weverything-im-serious-you-stupid-compiler
[05:29:57] <sfackler> but it's apparently hard to work with since some of the warnings are a bit silly
[05:29:58] <acrichto> is it just that?
[05:30:10] <acrichto> some of the cast warnings are super annoying
[05:30:15] <acrichto> somewhat useful, but kinda annoying
[05:30:16] <Eridius> sfackler: -Weverything, no?
[05:30:23] <sfackler> maybe it's that
[05:30:24] <Eridius> but yeah, that's wholly impractical
[05:31:08] <sfackler> dead code is actually a compiler error in Java for some reason
[05:31:31] <acrichto> I'm kinda happy that we have the concept of warnings
[05:31:34] <acrichto> as opposed to just errors
[05:31:51] <Yurume> in some languages (I think those include Lua) dead code is a syntactic error
[05:31:54] <sfackler> yeah
[05:32:00] <acrichto> interesting
[05:35:13] <Eridius> acrichto: agreed. It annoys me that Go refuses to have warnings
[05:35:26] <Eridius> need to temporarily disable a variable's usage? Oops, gotta go comment out its initialization too!
[05:36:06] <Yurume> I actually want the lint passes to check the conditionally disabled items as well
[05:36:14] <Yurume> not sure if it's possible
[05:36:30] *** Joins: esummers_ (esummers@moz-3B015C90.wi.res.rr.com)
[05:36:42] <Yurume> or feasible*
[05:37:32] <aatch> Yurume, the issue I know of is that config stripping is done before macro expansion.
[05:38:45] <Yurume> aatch: is #[cfg] a syntax extension?
[05:38:47] <sfackler> I think the dead code pass relies on resolve's analysis, so it'd be pretty hard to get it to run on cfg-stripped parts of the code
[05:39:01] <sfackler> Yurume: there's a special pass for #[cfg]
[05:39:07] <Yurume> hmm
[05:39:18] <aatch> It's actually run twice, technically
[05:39:26] <Eridius> why twice?
[05:39:36] <aatch> since macro expansion can add items that might need to be removed
[05:39:38] <sfackler> Eridius: before and after macro expansion
[05:40:05] <Yurume> idealistically speaking, #[cfg]-disabled parts should be in the metadata no matter if it's used or not (it *is* disabled in the codegen), but as I mentioned I don't know it's feasible
[05:40:26] <aatch> Yurume, nope, it's stripped from the AST completely
[05:40:40] <aatch> doesn't exist after that pass
[05:40:41] <Yurume> "idealistically" :)
[05:43:12] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[05:45:06] *** Quits: canhtak (canhtak@moz-8C86DA1D.wl.t.ulaval.ca) (Quit: canhtak)
[05:45:32] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[05:51:04] *** Joins: canhtak (canhtak@moz-8C86DA1D.wl.t.ulaval.ca)
[05:55:49] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[05:57:01] *** Joins: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP)
[05:57:01] <ghrust> [13rust] 15bors pushed 19 new commits to 06auto: 02http://git.io/FTcubw
[05:57:01] <ghrust> 13rust/06auto 148922fa0 15Alex Crichton: rustc: Don't error on the rlib symlinks...
[05:57:01] <ghrust> 13rust/06auto 1453b9484 15Alex Crichton: Use lines_any() when parsing output form "ar"...
[05:57:01] <ghrust> 13rust/06auto 143ca0167 15Florian Hahn: Remove some obsolete ignored tests...
[05:57:03] *** Parts: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP) ()
[05:57:04] *** Joins: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP)
[05:57:04] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14a0cc23a to 14043c972: 02http://git.io/N3iJvQ
[05:57:04] *** Parts: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP) ()
[06:17:04] *** Joins: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP)
[06:17:04] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14b8fee4b to 14043c972: 02http://git.io/N3iJvQ
[06:17:04] *** Parts: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP) ()
[06:17:08] *** Joins: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP)
[06:17:08] <ghrust> [13rust] 15bors pushed 19 new commits to 06auto: 02http://git.io/BDhxTg
[06:17:08] <ghrust> 13rust/06auto 148922fa0 15Alex Crichton: rustc: Don't error on the rlib symlinks...
[06:17:08] <ghrust> 13rust/06auto 1453b9484 15Alex Crichton: Use lines_any() when parsing output form "ar"...
[06:17:09] <ghrust> 13rust/06auto 143ca0167 15Florian Hahn: Remove some obsolete ignored tests...
[06:17:11] *** Parts: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP) ()
[06:19:46] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[06:25:51] *** Joins: glaebhoerl_ (glaebhoerl@moz-3590251D.kabelnet.hu)
[06:28:37] *** Joins: huon (Thunderbir@9E0D83DA.D5A1DCF.37681C44.IP)
[06:28:56] *** Quits: huon (Thunderbir@9E0D83DA.D5A1DCF.37681C44.IP) (Quit: huon)
[06:29:23] *** Joins: huon (Thunderbir@9E0D83DA.D5A1DCF.37681C44.IP)
[06:30:11] <nrc> who understands collect.rs?
[06:31:52] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[06:37:03] *** Quits: esummers_ (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[06:44:34] <nrc> nm, figuring it out
[06:45:49] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[06:51:17] *** Joins: edwardw (edwardw@E6E87FA7.354F6412.B9C6B12A.IP)
[06:52:17] *** Quits: canhtak (canhtak@moz-8C86DA1D.wl.t.ulaval.ca) (Quit: canhtak)
[06:54:39] *** Quits: Kxepal (Miranda@moz-406769B7.pppoe.mtu-net.ru) (Quit: Kxepal)
[06:54:54] *** Joins: Kxepal (Miranda@moz-406769B7.pppoe.mtu-net.ru)
[07:00:51] *** Quits: Kxepal (Miranda@moz-406769B7.pppoe.mtu-net.ru) (Quit: Kxepal)
[07:01:04] *** Joins: Kxepal (Miranda@moz-406769B7.pppoe.mtu-net.ru)
[07:07:43] *** Quits: huon (Thunderbir@9E0D83DA.D5A1DCF.37681C44.IP) (Ping timeout)
[07:10:38] *** Joins: huon (Thunderbir@9E0D83DA.D5A1DCF.37681C44.IP)
[07:15:19] <cmr> huon: ping ping ping ping
[07:17:54] *** Quits: Guest_ (textual@16F167B.4C57D258.D8E8354F.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[07:18:31] <huon> cmr: (pong)*
[07:18:41] <cmr> huon: update IRSY! all the rebenches are done!
[07:19:22] <huon> cmr: oh, I forgot to do that yesterday too
[07:19:25] <cmr> I know.
[07:19:30] <huon> I'll, err, do it when I get home :P
[07:19:31] <cmr> but I forgive you
[07:19:49] <huon> (remind me in an hour or so, if I'm connected and you're awake)
[07:20:20] <cmr> k
[07:20:49] <nrc> can I get make-check to rerun a test without touching a source file and thus requiring stuff be re-compiled?
[07:20:57] <nrc> s/-/
[07:20:57] <cmr> nrc: I don't think so :(
[07:21:02] <nrc> curses
[07:21:13] <huon> nrc: what kind of test?
[07:21:22] <acrichto> nrc: rm tmp/*.ok; make check-...
[07:21:24] <nrc> huon: compile-fail
[07:21:33] <huon> nrc: can just touch that file
[07:21:37] <huon> iirc
[07:21:46] <huon> (i.e. the actual test)
[07:21:49] <nrc> huon: that doesn't seem to work
[07:21:58] <acrichto> is it an auxiliary file?
[07:22:03] <acrichto> I don't think the makefile looks at those...
[07:22:53] <nrc> acrichto's solution works though
[07:22:56] <nrc> :-)
[07:23:01] <nrc> thanks all
[07:23:18] *** Joins: eibwen (kvirc@moz-E97035B0.dip0.t-ipconnect.de)
[07:28:03] *** Joins: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP)
[07:28:03] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/BDhxTg
[07:28:03] *** Parts: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP) ()
[07:30:38] *** Joins: esummers_ (esummers@moz-3B015C90.wi.res.rr.com)
[07:31:45] *** Joins: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP)
[07:31:45] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/ovMFCw
[07:31:46] *** Parts: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP) ()
[07:35:17] <huon> acrichto closes approximately 4000 issues in one fell swoop
[07:35:27] <acrichto> wheeeeeee
[07:35:34] <acrichto> although it's not me, it's all the awesome contributors!
[07:35:39] <acrichto> I'm just a shepherd
[07:42:43] <nrc> Urgh, "For example:" in the rust reference
[07:43:05] * nrc prepares to beat people with his Oxford style manual
[07:43:43] * nrc reluctantly follows convention
[07:43:47] *** Joins: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net)
[07:43:56] *** Quits: esummers_ (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[07:44:00] <nrc> (don't even get me started on American spellings....)
[07:44:04] <cmr> I don't think it was written with any style in mind, though I could be wrong about that.
[07:45:16] <nrc> I'm a total pedant when it comes to writing style, best just to ignore me :-p
[07:46:19] <cmr> good to know!
[07:46:21] * cmr ignores nrc
[07:46:38] *** Joins: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP)
[07:46:38] <ghrust> [13rust] 15bors 04force-pushed 06auto from 1467b50d4 to 144243cad: 02http://git.io/N3iJvQ
[07:46:38] *** Parts: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP) ()
[07:49:03] <cmr> huon: I'm glad you came to the same conclusion with #12495 that I did :P
[07:50:13] <huon> cmr: didn't finish the sentence :P
[07:50:31] <cmr> same conclusion still!
[07:50:42] <huon> Does interrupting a single build interrupt the rest?
[07:50:44] <cmr> I have a feeling native might be entirely broken on windows
[07:50:58] <cmr> at least file i/o
[07:51:10] <cmr> acrichto: do you know if we've been runing native tests on windows?
[07:51:37] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[07:51:37] <ghrust> [13rust] 15bors 04force-pushed 06auto from 148e8324f to 144243cad: 02http://git.io/N3iJvQ
[07:51:37] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[07:54:40] *** flaper87|afk is now known as flaper87
[08:01:44] *** Joins: eddyb (eddy@moz-41DB10DA.residential.rdsnet.ro)
[08:03:48] *** Quits: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Client exited)
[08:04:28] <cmr> I'm writing my first parser for a programming language, as a state machine that takes in one token at a time (ie, `fn feed(&mut self, t: Token)`) and it's really miserable!
[08:04:52] <cmr> but, it's far, far better than it would be in C or C++
[08:05:03] <eddyb> you wish we had generators?
[08:05:03] <cmr> yay rust \o/
[08:05:10] <cmr> eddyb: benches finished.
[08:05:15] <eddyb> mmm
[08:05:19] <cmr> I'm kicking huon in 15 minutes.
[08:05:26] <cmr> generators would help a lot.
[08:05:38] <eddyb> my travis build failed in a silly way:  [run-fail] run-fail/explicit-fail.rs
[08:05:42] <huon> cmr: I haven't even left yet :S
[08:05:52] <huon> so it'll be at least an hour from *now* :P
[08:05:57] <cmr> euggh
[08:06:03] <cmr> I'll definately be sleeping then
[08:06:08] <cmr> eddyb: kick huon for me!
[08:06:18] <huon> such bullies
[08:06:21] <huon> much pain
[08:06:52] <eddyb> cmr: let's be fair
[08:07:04] <eddyb> huon: you have to sleep on the graph http://huonw.github.io/isrustfastyet/mem/
[08:07:17] <eddyb> I don't think you like spikes on your bed :P
[08:07:43] <cmr> by the way the recent jump is concerning and I'm not sure it's a fluke but we'll see.
[08:07:51] <cmr> (bencher is also running normally now)
[08:08:42] <eddyb> this smaller jump makes some sense http://huonw.github.io/isrustfastyet/mem/#879e8aa
[08:08:58] <eddyb> because it adds a bunch of code into the mix
[08:09:11] <cmr> AST dumping? shouldn't have...
[08:09:14] <huon> cmr: that kinda doesn't look like a fluke :S
[08:09:24] <cmr> huon: nope not at all
[08:09:37] <eddyb> cmr: Encodable<JsonEncoder> for the entire AST
[08:09:57] <cmr> eddyb: ah yes.
[08:10:00] <cmr> wow that's sad
[08:10:03] <eddyb> my point is that this doesn't make sense http://huonw.github.io/isrustfastyet/mem/#74f3e04
[08:10:09] <huon> cmr: but it's a silly PR for there to be a big jump :'(
[08:10:09] <eddyb> and it's much larger
[08:10:22] <huon> anyway
[08:10:26] * huon goes home
[08:10:31] *** Quits: huon (Thunderbir@9E0D83DA.D5A1DCF.37681C44.IP) (Quit: huon)
[08:11:05] <eddyb> cmr: there's no missing PRs on the graph there
[08:11:12] <cmr> it didn't even change rustc
[08:11:14] <cmr> at all
[08:11:28] <acrichto> cmr: we should be testing windows as part of stdtest
[08:12:16] <eddyb> cmr: this reminds me of my thoughts about hashing the rustc binary and ensuring that changes that shouldn't affect it don't affect it
[08:12:54] <cmr> eddyb: does it actually work out like that though?
[08:13:18] <eddyb> though... those doc comments in libjson could affect rustc if libjson got pulled in
[08:13:30] <eddyb> (but only from a non-deterministic perspective)
[08:14:29] <cmr> anyway sleeptime for me.
[08:14:39] <cmr> I hope the graph becomes less noisy
[08:14:41] <cmr> will be sad if it doesn't.
[08:14:47] <eddyb> I guess I woke up late
[08:14:55] <cmr> no I'm going to bed way too late
[08:15:06] <cmr> by like 3-4 hours :) (it's 3am)
[08:15:22] <eddyb> not sure how you're still alive
[08:15:44] <eddyb> I need to sleep at least 8h, preferably 10
[08:18:51] <eddyb> doener: gotta love giving information to LLVM :D https://github.com/mozilla/rust/pull/12494
[08:27:29] *** Quits: edwardw (edwardw@E6E87FA7.354F6412.B9C6B12A.IP) (Ping timeout)
[08:27:50] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[08:32:39] <eddyb> hmpf, trait Add<Rhs, Ret> could be Add<Rhs = Self, Ret = Self>
[08:32:57] <eddyb> I've rarely seen it implemented (if ever) on distinct types
[08:33:23] <eddyb> and I'm only complaining because I just wrote impl Add<SmallVec<AutoDeref>, SmallVec<AutoDeref>> for SmallVec<AutoDeref>
[08:33:36] <nrc> where do [run-pass] doc-rust tests live?
[08:34:04] <eddyb> doc tests are code fragments from docs, AFAIK
[08:34:19] <eddyb> rust could be rust.md (the reference manual)
[08:34:52] <nrc> oh, so it is just trying to compile and run an example from the ref manual, probably
[08:35:55] <nrc> can I put feature gates in code examples in rust.md?
[08:36:13] <eddyb> I think so
[08:36:34] <eddyb> I've seen extra lines being prefixed with #
[08:36:46] <eddyb> though if the feature is gated, you might as well make it visible
[08:36:54] <eddyb> nrc: what is this about?
[08:37:27] <nrc> an example in the manual for struct inheritance
[08:37:40] <eddyb> inheritance, huh?
[08:37:57] <eddyb> are you adding struct inheritance, by any chance?
[08:38:18] <nrc> hmm, that didn't seem to work
[08:38:20] <nrc> yes
[08:38:26] <eddyb> noooo :((((
[08:38:38] <nrc> well, that is why it is feature gated :-)
[08:38:58] <eddyb> single structural inheritance mutates the language into a corner, while providing one optimization that can be achieved by other means
[08:39:28] <eddyb> nrc: it just means I should've written down a complete proposal for fields in traits with optional fixed layout :(
[08:40:21] <nrc> I guess you still have time - it probably won't get un-gated for a while
[08:40:22] <eddyb> (fixed layout for "virtual" field access is what servo actually wants, struct inheritance is not the only way to get that)
[08:41:32] <nrc> as implemented, there is nothing like virtual field access - it is almost just sugar for copy and pasting some fields
[08:41:38] *** Joins: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP)
[08:41:38] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14dd355f2 to 144243cad: 02http://git.io/N3iJvQ
[08:41:38] *** Parts: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP) ()
[08:41:39] *** Joins: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP)
[08:41:39] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/IsDZ_A
[08:41:39] <ghrust> 13rust/06auto 144f129ad 15Alex Crichton: Add a method of manually specifying the crate map...
[08:41:39] <ghrust> 13rust/06auto 147188680 15bors: auto merge of #12408 : alexcrichton/rust/manual-crate-map, r=brson...
[08:41:39] *** Parts: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP) ()
[08:41:40] <nrc> it is not what Servo want yet
[08:41:56] <eddyb> nrc: one of us is going to end up having done busywork :P
[08:42:11] <nrc> I think they want traits to be able to inherit from structs, which I haven't done yet
[08:42:16] <eddyb> yeah
[08:42:21] *** Joins: esummers_ (esummers@moz-3B015C90.wi.res.rr.com)
[08:42:22] <nrc> and don't intend to do very soon
[08:42:39] <eddyb> (but only one of us is getting paid for potential said busywork)
[08:42:54] * eddyb gets back to his derefs
[08:42:57] <nrc> eddyb: so if you have an alternate proposal, I would propose it now, it doesn't need an implementation
[08:43:07] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[08:43:45] <eddyb> I actually tried to search for a solid proposal of "fields in traits" to expand on, can't remember what I found
[08:44:30] * eddyb wishes he could overload +=
[08:44:37] <nrc> eddyb: http://smallcultfollowing.com/babysteps/blog/2013/10/24/single-inheritance/
[08:44:45] <eddyb> yeah, I've read that one
[08:44:51] *** Quits: esummers_ (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[08:44:56] <nrc> via #9912
[08:45:07] <nrc> that seems to be as much of a proposal as there is atm
[08:45:27] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[08:45:37] <nrc> which is one reason I've only been looking at strcut inheritance not the traits inherit from structs bit
[08:45:39] <eddyb> well, I know people have been throwing around "fields in traits" for years now
[08:48:14] * eddyb cries a bit seeing structs being referred to as "classes" in code docs
[08:49:50] <eddyb> hmpf, why can you do foo.bar::<A, B, C>?
[08:50:23] <eddyb> what would field access do with type hints?
[08:51:09] <eddyb> ah, it resolves to a method
[08:51:30] <eddyb> (and we could totally implement it as creating a closure, but right now it's just an error)
[08:52:37] *** darnuria|zZz is now known as darnuria
[09:09:09] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[09:09:44] <flaper87> nrc: you working on 9912? cooool!
[09:18:48] <nrc> well, I'm working on the easy part of it, maybe also the cool part
[09:19:42] *** Quits: sunfish (chatzilla@moz-42DA0C69.dsl.dynamic.sonic.net) (Ping timeout)
[09:21:42] *** Joins: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP)
[09:21:42] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/0BKz4A
[09:21:42] <ghrust> 13rust/06auto 14952de6f 15Alex Crichton: test: Clean out the test suite a bit...
[09:21:42] <ghrust> 13rust/06auto 1412dcb8e 15bors: auto merge of #12457 : alexcrichton/rust/fix-some-tests, r=brson...
[09:21:43] *** Parts: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP) ()
[09:21:46] *** Joins: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP)
[09:21:46] <ghrust> [13rust] 15bors 04force-pushed 06auto from 147188680 to 144243cad: 02http://git.io/N3iJvQ
[09:21:46] *** Parts: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP) ()
[09:24:41] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[09:33:04] <eddyb> bah, where's huon?
[09:33:25] <eddyb> I hope not sleeping because I want my graph
[09:43:52] *** Joins: esummers_ (esummers@moz-3B015C90.wi.res.rr.com)
[09:45:31] *** Quits: esummers_ (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[09:47:59] *** Quits: zw01 (zev@3C32E5CD.21A2D65F.BCF77D2A.IP) (Ping timeout)
[09:51:33] *** Joins: zw01 (zev@3C32E5CD.21A2D65F.BCF77D2A.IP)
[10:16:41] *** Joins: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP)
[10:16:41] <ghrust> [13rust] 15bors 04force-pushed 06auto from 1412dcb8e to 144243cad: 02http://git.io/N3iJvQ
[10:16:41] *** Parts: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP) ()
[10:20:37] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[10:33:38] <doener> how can I get the IR without running any passes?
[10:33:50] <eddyb> --save-temps
[10:33:56] <eddyb> you get a .no-opt.bc file
[10:34:03] <doener> that's even without always-inline?
[10:34:10] <eddyb> yeah, right after trans
[10:34:23] <doener> great, thanks
[10:34:51] <doener> -C save-temps :-p
[10:35:01] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 30.0a1/20140223030204])
[10:35:06] * eddyb takes note of the change
[10:43:08] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[10:44:55] *** Joins: esummers_ (esummers@moz-3B015C90.wi.res.rr.com)
[10:45:27] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[10:47:26] *** Quits: esummers_ (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[10:51:54] *** Joins: mawuli (mawuli@moz-36C70B7D.com.gh)
[10:53:36] *** Quits: mawuli (mawuli@moz-36C70B7D.com.gh) (Ping timeout)
[11:00:48] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[11:02:55] *** Joins: huon (Thunderbir@moz-826BD85A.lns20.syd6.internode.on.net)
[11:03:49] *** Quits: kimundi (kimundi@moz-75FC8F5B.dip0.t-ipconnect.de) (Ping timeout)
[11:03:55] *** Quits: eibwen (kvirc@moz-E97035B0.dip0.t-ipconnect.de) (Ping timeout)
[11:04:00] *** Quits: glaebhoerl_ (glaebhoerl@moz-3590251D.kabelnet.hu) (Ping timeout)
[11:04:45] *** Joins: glaebhoerl_ (glaebhoerl@moz-3590251D.kabelnet.hu)
[11:07:25] *** Joins: kimundi (kimundi@moz-75FC8F5B.dip0.t-ipconnect.de)
[11:10:29] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[11:23:48] *** Joins: gimpf (gimpf@moz-40C28D4F.adsl.highway.telekom.at)
[11:26:39] *** Joins: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP)
[11:26:39] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/hnkXAQ
[11:26:39] *** Parts: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP) ()
[11:30:16] <eddyb> huon: sorry I didn't see you join :/
[11:30:19] <eddyb> how's the graph?
[11:30:31] <huon> eddyb: doing it now
[11:30:51] <huon> thought it'll take a while for the bot to process it all once i get it running again
[11:30:57] <huon> *though
[11:31:42] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[11:31:43] <ghrust> [13rust] 15bors pushed 5 new commits to 06auto: 02http://git.io/fbMXxg
[11:31:43] <ghrust> 13rust/06auto 14f12ff19 15Erick Tryzelaar: std: minor whitespace cleanup
[11:31:43] <ghrust> 13rust/06auto 14848cbb4 15Erick Tryzelaar: replace manual Hash impls with `#[deriving(Hash)]`
[11:31:43] <ghrust> 13rust/06auto 14922eb47 15Erick Tryzelaar: test: Use `#[deriving(Hash)]` in a couple tests
[11:31:45] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[11:38:50] *** Joins: aurynj (Eon@583ABBE5.60FA2E28.B9E25744.IP)
[11:40:49] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[11:43:32] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[11:45:31] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[11:46:07] *** Joins: esummers_ (esummers@moz-3B015C90.wi.res.rr.com)
[11:46:42] <huon> eddyb: ok it's running now... will take a while
[11:47:47] *** Quits: esummers_ (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[11:51:37] <huon> $ ps -a | grep '[c]url' | wc -l
[11:51:37] <huon> 539
[11:51:45] * huon apologises to cmr's server
[11:52:21] <huon> (it also explains why SSH to that computer is lagging a lot...)
[11:52:35] <ChrisMorgan> :-/
[12:09:49] *** Quits: Edwards (MeltdownMo@moz-B62E1D6B.members.linode.com) (Ping timeout)
[12:10:26] <huon> eddyb: https://github.com/huonw/isrustfastyet/commit/8f128b64f5512212a079e7b871d1cd4d3297d18c
[12:10:46] <huon> theoretically the graph will be updated
[12:11:00] <eddyb> :D:D:D:D
[12:11:05] * eddyb hugs huon
[12:11:20] <huon> cmr: done
[12:11:21] <eddyb> huon: you can sleep on a smooth graph tonight :)
[12:11:23] <huon> :D
[12:12:33] *** Joins: doomlord_ (servitor@moz-99BE89EC.range86-184.btcentralplus.com)
[12:12:36] <eddyb> huon: this is quite visible: http://huonw.github.io/isrustfastyet/mem/#7d79cc7,6d55211
[12:13:17] <eddyb> cmr, huon: lolwut http://huonw.github.io/isrustfastyet/mem/#7613b15,4e8dbab
[12:13:53] *** Joins: Edwards (MeltdownMo@moz-B62E1D6B.members.linode.com)
[12:14:18] <huon> eddyb: manual pushes to master
[12:14:25] <huon> have very similar commit dates
[12:23:44] <eddyb> \o/ method lookup doesn't require anything other than a type and a name now
[12:24:06] <eddyb> (well, and a span, but those are cheap :P)
[12:29:15] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[12:31:45] *** Joins: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP)
[12:31:45] <ghrust> [13rust] 15bors 04force-pushed 06auto from 1411f68ac to 1427cc309: 02http://git.io/N3iJvQ
[12:31:45] *** Parts: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP) ()
[12:31:47] *** Joins: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP)
[12:31:47] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/9gcIQw
[12:31:47] <ghrust> 13rust/06auto 1407ca45d 15Corey Richardson: Move simd out of unstable...
[12:31:47] <ghrust> 13rust/06auto 1472af3e0 15bors: auto merge of #12524 : cmr/rust/doc-simd, r=alexcrichton...
[12:31:48] *** Parts: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP) ()
[12:33:35] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[12:37:14] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[12:37:33] *** Joins: canhtak (canhtak@moz-A3E80069.wl.t.ulaval.ca)
[12:40:15] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[12:46:52] *** Joins: esummers_ (esummers@moz-3B015C90.wi.res.rr.com)
[12:48:56] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[12:49:45] *** Quits: esummers_ (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[12:56:25] *** Joins: cmr (moznet@moz-EC676DFE.members.linode.com)
[13:04:06] <eddyb>  // I am a horrible monster and I pray for death.
[13:04:21] * eddyb is sweeping bones of fallen heroes in typeck
[13:04:54] * flaper87 wonders what eddyb is doing
[13:05:14] <huon> flaper87: sweeping bones of fallen heroes in typeck
[13:05:20] <huon> :P
[13:05:29] <eddyb> flaper87: auto-overloaded-deref :D
[13:06:49] <flaper87> huon: hahaha
[13:07:17] <flaper87> eddyb: oh boy! :D
[13:07:32] <huon> eddyb: with &mut etc. working?
[13:07:42] <eddyb> huon: you wish
[13:07:51] <eddyb> this is complicated as it is with just DerefImm
[13:10:12] <huon> eddyb: how is path_to_str meant to work?
[13:10:18] <huon> it's just returning () for me?
[13:10:29] <huon> (ast_map path_to_str)
[13:10:37] <cmr> huon: it's ok my server can take it ;p
[13:10:48] <eddyb> cmr: awake already?
[13:10:54] <cmr> huon: eddyb: *wow* that is a drastic change
[13:11:00] <cmr> yes.
[13:11:05] <eddyb> huon: isn't it returning ~str?
[13:11:22] <huon> eddyb: yeah, ~"()"
[13:11:29] <eddyb> ohh
[13:11:30] * flaper87 still have to finish the static rules patch
[13:11:42] <eddyb> huon: is that an impl () {}?
[13:11:46] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[13:12:03] <eddyb> nothing else should return "()"
[13:12:19] <eddyb> huon: you can collect the iterator and print it - not sure where you are, though
[13:12:43] <huon> eddyb: no, it's not
[13:12:57] <huon> I've got the path_id out of a TyPath
[13:13:06] <eddyb> erm
[13:13:09] <huon> and am passing that into .path_to_str directly
[13:13:21] <eddyb> pretty sure TyPath has nothing to do with the ast_map
[13:13:50] <huon> oh, right
[13:13:54] * huon should be using the def id
[13:13:56] * huon is dumb
[13:14:06] <eddyb> ast::Path has an ID
[13:14:26] <eddyb> but it's going into ast_map
[13:14:29] <eddyb> *not going
[13:14:37] <eddyb> so you can't find anything about it in there
[13:14:48] <huon> yeah
[13:15:10] <eddyb> at least there's no more ast_map::Path to completely confuse you :P
[13:15:22] <eddyb> huon: what are you doing, btw?
[13:15:27] <huon> I need to find what the path is actually pointing at and then it should work fine (and I'm already fetching the def id, so I'm already doing the necessary work)
[13:15:40] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[13:15:46] <huon> lint for https://github.com/mozilla/rust/issues/10573
[13:17:04] * eddyb looks at the commits in https://github.com/mozilla/rust/pull/12348#issuecomment-36004998
[13:17:18] <eddyb> someone will use that as a positive example, I'm thinking
[13:19:09] <huon> eddyb: the hashmap patch got to 60+ commits at one point
[13:19:20] *** Joins: darnuria (darnuria@moz-AB6EB255.ip-91-121-133.eu)
[13:19:21] <eddyb> ahh I didn't see that
[13:19:35] <huon> but they were all designed for squashing anyway
[13:19:48] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[13:19:49] <huon> that PR is a good example for you to follow, eddyb :P
[13:20:13] <flaper87> huon: haha, I was about to say that 
[13:20:18] * flaper87 hides from eddyb
[13:25:18] *** Joins: edwardw (edwardw@E6E87FA7.354F6412.B9C6B12A.IP)
[13:25:29] <huon> ah
[13:25:45] <huon> how silly: libsync exports two different things called Condvar at the top level
[13:25:56] <huon> (which clearly doesn't work. :( )
[13:26:21] <eddyb> the magic of use
[13:26:37] *** Joins: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP)
[13:26:37] <ghrust> [13rust] 15bors 04force-pushed 06auto from 1472af3e0 to 1427cc309: 02http://git.io/N3iJvQ
[13:26:37] *** Parts: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP) ()
[13:26:39] *** Joins: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP)
[13:26:39] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/07TTYQ
[13:26:39] <ghrust> 13rust/06auto 143e531ed 15Eduard Burtescu: Gate default type parameter overrides....
[13:26:39] <ghrust> 13rust/06auto 14d222f03 15bors: auto merge of #12525 : eddyb/rust/gate-default-type-param-usage, r=alexcrichton...
[13:26:39] *** Parts: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP) ()
[13:26:52] <eddyb> /o/
[13:29:31] *** darnuria is now known as Darnuria
[13:29:33] *** Quits: canhtak (canhtak@moz-A3E80069.wl.t.ulaval.ca) (Quit: canhtak)
[13:33:15] *** Parts: Darnuria (darnuria@moz-AB6EB255.ip-91-121-133.eu) (WeeChat 0.3.8)
[13:36:56] <eddyb> rusti: type Foo = &Foo;
[13:36:56] -rusti- pastebinned 7 lines of output: http://ix.io/aJn
[13:37:21] <huon> rusti: type Foo<'a> = &'a Foo<'a>;
[13:37:22] -rusti- <anon>:10:24: 10:35 error: illegal recursive type; insert an enum or struct in the cycle, if this is desired
[13:37:22] -rusti- <anon>:10         type Foo<'a> = &'a Foo<'a>;
[13:37:22] -rusti-                                  ^~~~~~~~~~~
[13:37:22] -rusti- application terminated with error code 101
[13:37:46] <eddyb> rusti: fn foo() {let x: Foo; ****x;} type Foo<'a> = &'a Foo<'a>;
[13:37:46] -rusti- <anon>:10:54: 10:65 error: illegal recursive type; insert an enum or struct in the cycle, if this is desired
[13:37:46] -rusti- <anon>:10         fn foo() {let x: Foo; ****x;} type Foo<'a> = &'a Foo<'a>;
[13:37:46] -rusti-                                                                ^~~~~~~~~~~
[13:37:46] -rusti- application terminated with error code 101
[13:38:00] <eddyb> so I'm pretty sure the recursive error is quite early
[13:38:57] <eddyb> huon: I'm trying to remove some odd checks complicating deref logic
[13:39:06] <eddyb> enum t = @t; is obviously gone
[13:39:23] <huon> their removal better not break memory safety ;)
[13:39:36] <eddyb> no, this is recursion sanity
[13:40:26] <eddyb> hmpf, it has inference mixed in...
[13:42:15] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[13:42:16] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Client exited)
[13:42:19] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[13:42:31] <eddyb> "type inference failed because I could not find a type that's both of the form {} and of the form {} - such a type would have to be infinitely large."
[13:42:38] <eddyb> has anyone ever seen that error?
[13:43:07] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[13:44:16] <cmr> nope
[13:44:36] <eddyb> rusti: let mut x; loop {x = ~x;}
[13:44:39] -rusti- pastebinned 8 lines of output: http://ix.io/aaw
[13:44:57] *** Quits: gimpf (gimpf@moz-40C28D4F.adsl.highway.telekom.at) (Quit: Leaving.)
[13:44:58] <eddyb> rusti: let mut x; while {true} {x = ~x;}
[13:44:58] -rusti- <anon>:10:13: 10:18 error: cannot determine a type for this local variable: cyclic type of infinite size
[13:44:58] -rusti- <anon>:10         let mut x; while {true} {x = ~x;}
[13:44:58] -rusti-                       ^~~~~
[13:44:59] -rusti- error: aborting due to previous error
[13:44:59] -rusti- application terminated with error code 101
[13:45:16] <eddyb> interesting
[13:45:25] <eddyb> rusti: let mut x; while {true} {x = ~x; ***x}
[13:45:26] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[13:45:28] -rusti- pastebinned 8 lines of output: http://ix.io/aJo
[13:45:46] <eddyb> rusti: let mut x; while {true} {x = ~x; x.foo;}
[13:45:46] -rusti- <anon>:10:42: 10:47 error: type inference failed because I could not find a type
[13:45:46] -rusti-  that's both of the form <generic #3> and of the form @<generic #3> - such a type would have to be infinitely large.
[13:45:46] -rusti- <anon>:10         let mut x; while {true} {x = ~x; x.foo;}
[13:45:46] -rusti-                                                    ^~~~~
[13:45:46] -rusti- application terminated with error code 101
[13:45:50] <eddyb> BAM
[13:46:13] <eddyb> now, method lookup doesn't do that check
[13:46:15] <eddyb> rusti: let mut x; while {true} {x = ~x; x.foo();}
[13:46:20] -rusti- timeout triggered!
[13:46:23] <eddyb> HAH
[13:46:23] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[13:47:04] <eddyb> huon: turns out that check is useful ;)
[13:47:10] <eddyb> rusti: let mut x; while {true} {x = &x; x.foo;}
[13:47:10] -rusti- <anon>:10:42: 10:47 error: type inference failed because I could not find a type
[13:47:10] -rusti-  that's both of the form <generic #3> and of the form @<generic #3> - such a type would have to be infinitely large.
[13:47:11] -rusti- <anon>:10         let mut x; while {true} {x = &x; x.foo;}
[13:47:11] -rusti-                                                    ^~~~~
[13:47:11] -rusti- application terminated with error code 101
[13:47:24] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[13:47:29] <eddyb> okay, it seems to work fine (apart from the message being odd)
[13:47:45] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Connection reset by peer)
[13:48:10] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[13:50:03] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[13:56:00] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[14:19:17] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[14:33:10] *** Joins: cmr (moznet@moz-EC676DFE.members.linode.com)
[14:40:04] *** Joins: cmr (moznet@moz-EC676DFE.members.linode.com)
[14:40:26] *** flaper87 is now known as flaper87|afk
[14:40:46] *** Joins: sunfish (chatzilla@moz-42DA0C69.dsl.dynamic.sonic.net)
[14:41:01] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Ping timeout)
[14:41:39] *** Joins: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP)
[14:41:39] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/h8eeMw
[14:41:39] *** Parts: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP) ()
[14:46:28] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[14:48:21] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[14:51:54] <eddyb> None::<()>
[14:51:58] <eddyb> oh dear what am I doing?
[14:54:43] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[14:55:04] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[14:56:47] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[15:09:37] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[15:09:39] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[15:12:18] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[15:12:24] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[15:30:30] <eddyb> strcat: I've had to remove Rc's borrow method. is that ok with you?
[15:30:38] <strcat> eddyb: and replace it with what?
[15:30:42] <eddyb> deref
[15:30:54] <strcat> why would a method returning & be called deref?
[15:31:08] <eddyb> x.deref() will be &*x
[15:31:08] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[15:31:22] <strcat> eddyb: doesn't seem like it should be called deref then
[15:31:36] <eddyb> nobody will call it directly
[15:32:01] <strcat> should still have the right name
[15:32:04] <eddyb> every method on Rc would interfere with calling methods on the autoderef'd type
[15:32:15] <eddyb> so .borrow() will be ambiguous on Rc<RefCell<T>>
[15:32:40] <eddyb> (if we keep it on Rc)
[15:35:03] <eddyb> strcat: I almost feel like not putting Deref in the prelude
[15:36:04] <eddyb> if you don't need to use methods from smart pointers, they shouldn't be able to interfere with the methods on the type they point to
[15:36:27] *** Joins: tjc (tjc@moz-791C24B0.phlapa.east.verizon.net)
[15:36:27] *** ChanServ sets mode: +o tjc
[15:36:40] <eddyb> but that's just my opinion, feel free to put this on the discussion agenda (acrichto?)
[15:38:38] *** Quits: Kxepal (Miranda@moz-406769B7.pppoe.mtu-net.ru) (Ping timeout)
[15:42:46] *** Joins: Kxepal (Miranda@moz-BAA7EE.pppoe.mtu-net.ru)
[15:43:11] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:45:27] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[15:46:28] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[15:48:20] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[15:49:02] *** Joins: lpy (lpy@12172131.F09091A8.1348A864.IP)
[15:51:39] *** Joins: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP)
[15:51:39] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/VMzVcA
[15:51:39] *** Parts: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP) ()
[15:52:19] * eddyb pokes nmatsakis about https://github.com/mozilla/rust/pull/12493
[15:53:46] <nmatsakis> eddyb: on my list for this week, I'll try to bump it up to today
[15:56:36] *** Joins: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP)
[15:56:36] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/oMw-KA
[15:56:36] *** Parts: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP) ()
[16:02:40] <eddyb> "error: found module name used as a type: impl middle::ty::SmallVector<AutoDeref>::SmallVector<AutoDeref>"
[16:02:57] <eddyb> ahhh how I hate this impl nonsense :(
[16:05:10] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[16:10:37] <erickt> r? https://github.com/mozilla/rust/pull/12544 <- adds HashMaps with generic hashers support
[16:10:46] <erickt> (yay!)
[16:13:18] <erickt> and now I must run to work :)
[16:13:25] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[16:23:31] <pnkfelix> huon: I think I've worked out my latest BDW issue: One of the libuv pthread_create calls is not getting re-routed to GC_pthread_create.
[16:23:46] <pnkfelix> huon: (though its bizarre because most of those calls *do* get re-routed properly)
[16:24:18] <pnkfelix> huon: Manually changing libuv directly to call GC_pthread_create at least makes the deadlock seem to go away.
[16:24:23] * eddyb squints at write_guard::root_and_write_guard
[16:24:37] <eddyb> do we still need to "root" things?
[16:25:04] <eddyb> src/librustc/middle/borrowck/gather_loans/lifetime.rs:        root_map.get().insert(rm_key, root_info);
[16:25:15] <eddyb> *okay*
[16:25:24] <cmr> doener: re nocapture, I looked into it some more and LLVM has an IPO pass that should be promoting args to nocapture. do you know if we're not running that, or if we should be?
[16:25:40] <cmr> doener: lib/Transforms/IPO/FunctionAttrs.cpp, around line 522
[16:26:02] <eddyb> we run that, but LLVM can't do complete escape analysis, I don't think
[16:26:09] <cmr> it will.
[16:26:09] <pnkfelix> huon: ... or, maybe not.  Sigh.
[16:26:13] <cmr> it should be.
[16:26:15] <cmr> afaict.
[16:26:25] <eddyb> we can guarantee things LLVM can't
[16:26:34] <eddyb> doener should know more
[16:28:55] *** Joins: canhtak (canhtak@moz-8C86DA1D.wl.t.ulaval.ca)
[16:32:13] <doener> cmr: we have functions where llvm can't prove that the pointer won't be captured
[16:32:46] <doener> cmr: e.g. the println!() thing uses callbacks, llvm can't prove that no callback will capture the pointer
[16:32:56] <cmr> ah ok
[16:33:00] <cmr> that does make sense.
[16:34:23] <eddyb> hmm, do we insert in the method_map for only expr.id, or also for callee_id?
[16:34:26] <cmr> I really love how the libcall crap is part of core LLVM :|
[16:35:37] <doener> cmr: I also think that it won't be able to do that for functions in other crates (without LTO), since we emit the "declare" statement for the function and that's all that llvm has. Adding the nocapture to the declaration should be useful
[16:36:07] <cmr> doener: yup, agree.
[16:39:32] <eddyb> nmatsakis: should I move the method_map entries to callee_id?
[16:40:20] <eddyb> nmatsakis: I can't use the Expr ID for auto deref calls, so I have to use the fresh callee_id. feels inconsistent to use the Expr ID for some things and callee_id for other things
[16:41:20] <nmatsakis> eddyb: seems like it should be keyed not by an id
[16:41:27] <nmatsakis> eddyb: but rather the pair of an id + deref count
[16:41:32] <nmatsakis> eddyb: that's what we do in other situations
[16:42:19] <eddyb> you mean that nasty root map :P?
[16:42:57] <nmatsakis> eddyb: yes, I consider that sol'n much cleaner than adding ids
[16:43:09] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[16:43:12] <nmatsakis> I am opposed to adding ids that do not have a 1-to-1 correspondence with the AST under any circumstance
[16:43:13] <eddyb> well, it makes dealing with astencode easier
[16:43:31] <nmatsakis> particularly since I want to make ids indexes into an array
[16:43:33] <eddyb> (I was just thinking of using range trees theres)
[16:43:39] <eddyb> *there
[16:43:57] <nmatsakis> use the index+deref-count please :)
[16:44:18] <eddyb> so should I remove callee_id's from method_map/vtable_map?
[16:44:23] <nmatsakis> eddyb: ps, if you hate the root map, check out #11586 which aims to remove it :)
[16:44:49] <nmatsakis> eddyb: iirc, the reason to use callee-ids was not that map,
[16:45:05] <nmatsakis> but rather to associate the type of the fn with something
[16:45:14] <nmatsakis> it may be that this is obsolete now
[16:45:29] <nmatsakis> i.e., the type of the expr was the return result, but the type of the callee-id was the method type being called
[16:45:32] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[16:45:33] <eddyb> I know, we don't actually insert callee_id's entries, but there's code doing things with them
[16:45:33] <nmatsakis> I think that was the idea
[16:45:55] <nmatsakis> are you saying there is code doing lookups for keys that can never be present?
[16:45:57] <eddyb> (writeback copies from one method_map to another)
[16:46:07] <nmatsakis> right,
[16:46:14] <nmatsakis> resolving types in the process and so on (don't change that either please :)
[16:46:15] <eddyb> writeback::visit_expr
[16:46:28] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[16:46:31] <eddyb> well, it does extra queries
[16:46:34] <nmatsakis> the reason for it to be that way is that, someday, I aim to refactor ty::t into "types used during inference" and "types used after infernece"
[16:46:41] <nmatsakis> you can feel free to remove useless queries :)
[16:46:52] <nmatsakis> I just want to keep the "things with inference types are confined to fcx" invariant
[16:46:56] <nmatsakis> my old patch bitrotted
[16:46:58] <nmatsakis> but someday maybe we'll revisit
[16:47:11] <eddyb> ah, sure
[16:48:20] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[16:50:27] <eddyb> so (ExprId, 0) becomes the method call for the expression itself, and (ExprId, n) is the method call for the nth dereference
[16:51:06] <eddyb> well, I have to deal with root_map in trans anyway, so this scheme should be fine
[16:52:00] <eddyb> nmatsakis: what about the callee_id type and substs? what should I do with that for method calls to deref from overloaded autoderef?
[16:52:51] <nmatsakis> eddyb: you might want to do #11586 as a pre-step; it would remove the root map
[16:53:02] <nmatsakis> eddyb: ps I'd really prefer if you landed a patch that just does explicit overloading
[16:53:09] <nmatsakis> eddyb: and then later added a patch for the implicit overloading
[16:53:14] <nmatsakis> it'll be easier to follow, I suspect
[16:53:17] <eddyb> it's a bit too late :(
[16:53:42] <nmatsakis> almost always better to have 2 PRs then 1...
[16:53:59] *** Joins: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net)
[16:53:59] *** ChanServ sets mode: +ao dherman dherman
[16:54:01] <pnkfelix> nmatsakis: don't forget to send me the links for Early/Late bound lifetimes
[16:54:18] <eddyb> nmatsakis: I've changed I've added for explicit deref, so they work for autoderef as well
[16:54:22] <nmatsakis> eddyb: regarding the substs,
[16:54:49] <nmatsakis> pnkfelix: so the branch is https://github.com/nikomatsakis/rust/tree/issue-5121-fns-with-early-lifetime-params
[16:54:58] <nmatsakis> pnkfelix: but I have to make a "most recently building" revision
[16:56:09] <pnkfelix> nmatsakis: does the current head of that branch build, and you want to push results of rebasing?  Or is that the current head fails-to-build and you need to go through the history to find a point where it did build?
[16:56:15] <nmatsakis> pnkfelix: it does not build due to rebasing
[16:56:21] <nmatsakis> pnkfelix: and the history doesn't contain a ref that does
[16:56:25] <nmatsakis> pnkfelix: due to rebasing
[16:56:33] <nmatsakis> pnkfelix: that's what I didn't get around to fixing for you yet :)
[16:56:52] <nmatsakis> eddyb: so, regarding callee-id and substs, I'm wondering if we can separate out into multiple tables.
[16:56:53] <pnkfelix> nmatsaki: oh, I see, you don't keep links to prior heads when you rebase
[16:56:56] <pnkfelix> nmatsakis: ^
[16:57:02] <nmatsakis> pnkfelix: nah but of course it's in the reflog...
[16:57:05] <pnkfelix> nmatsakis: well, if you're lucky, your reflog
[16:57:07] <pnkfelix> nmatsakis: yeah
[16:57:14] <nmatsakis> reflog lasts for 90 days or something
[16:57:27] <nmatsakis> admittedly in this case I've let the rebase sit for a few weeks :)
[16:57:34] <eddyb> nmatsakis: a separate ctxt field for callee types/substs?
[16:57:54] <nmatsakis> eddyb: i'm not a big fan of how we stuff all kinds of things into one table, I'd rather see separate tables for categories of types and so on.
[16:57:57] <eddyb> I wonder if an origin would be enough to get a type easily
[16:58:04] <nmatsakis> but yes I was going to suggest that
[16:58:10] <nmatsakis> that maybe we can move all that information into the method_map
[16:58:17] <eddyb> derp
[16:58:18] <nmatsakis> maybe it's all even already present in the origin,
[16:58:32] <nmatsakis> eddyb: let me just point out that this is a classic case where you should stop, make a new branch, do this refactoring, then rebase
[16:58:41] <nmatsakis> :)
[16:58:48] <nmatsakis> don't want to beat a dead horse but...
[16:58:58] <eddyb> my LookupResult already has origin, type, and substs
[16:59:03] <nmatsakis> (...then you can expect all tests to pass)
[16:59:19] <eddyb> perfect structure to put in the method_map
[16:59:22] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[16:59:22] *** ChanServ sets mode: +qo brson brson
[17:00:00] <eddyb> nmatsakis: I should cherry-pick my changes
[17:01:02] <nmatsakis> eddyb: cool, I think if we can get all data relating to method calls into its own map(s), keyed by nodeid+deref-count, that'll be nice
[17:01:04] <eddyb> well, here goes nothing
[17:03:14] *** Quits: lpy (lpy@12172131.F09091A8.1348A864.IP) (Client exited)
[17:06:41] *** Joins: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP)
[17:06:41] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/s4G5WQ
[17:06:41] *** Parts: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP) ()
[17:06:51] <eddyb> nmatsakis: I think I'll end up reverting the removal of method_map_entry :(
[17:06:57] <eddyb> which I've done previously
[17:07:50] <nmatsakis> eddyb: so as to add more info there?
[17:07:55] <eddyb> yupp
[17:08:08] <nmatsakis> so it goes...
[17:10:31] <nmatsakis> pnkfelix: augh I have some uncommited changes in that 5121 branch too
[17:10:42] <nmatsakis> pnkfelix: one sec I'm going to push those + make a new branch that (I think) builds
[17:11:40] *** Joins: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP)
[17:11:40] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/9KSNjw
[17:11:40] *** Parts: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP) ()
[17:11:40] *** Joins: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP)
[17:11:41] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/0BueeA
[17:11:41] <ghrust> 13rust/06auto 142003a5e 15Kevin Ballard: Add link to libtest in doc index
[17:11:41] <ghrust> 13rust/06auto 143276090 15bors: auto merge of #12537 : kballard/rust/add-test-to-doc-index, r=alexcrichton
[17:11:41] *** Parts: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP) ()
[17:19:20] *** Quits: canhtak (canhtak@moz-8C86DA1D.wl.t.ulaval.ca) (Quit: canhtak)
[17:23:09] *** Joins: canhtak (canhtak@moz-8C86DA1D.wl.t.ulaval.ca)
[17:24:33] *** Quits: glaebhoerl_ (glaebhoerl@moz-3590251D.kabelnet.hu) (Ping timeout)
[17:27:27] <eddyb> nmatsakis: thanks for the r+, but I need another one (rebased and pushed) https://github.com/mozilla/rust/pull/12493
[17:29:20] <eddyb> acrichto: travis is screwing up again :/
[17:29:28] <acrichto> yup
[17:29:56] *** Parts: kimundi (kimundi@moz-75FC8F5B.dip0.t-ipconnect.de) (leaving)
[17:30:02] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:30:59] <nmatsakis> eddyb: ok, I gave another, travis looks upset but I'm assuming I can ignore that based on your other comment
[17:31:31] <acrichto> looks like llvm updated something that broke us
[17:31:46] <eddyb> nmatsakis: thanks again :D
[17:38:25] <acrichto> eddyb: https://github.com/mozilla/rust/pull/12548 <- travis fix
[17:38:55] <eddyb> ahh, travis is using upstream LLVM?
[17:39:19] <acrichto> yeah
[17:39:24] <acrichto> their nightly apt repos
[17:39:35] <acrichto> which now has the benefit of letting us know when we're out of date
[17:39:41] <eddyb> hehe
[17:39:47] <acrichto> so now we don't update LLVM 3 months down the road and are baffled by all the changes
[17:40:11] <eddyb> instead, some poor new contributor will get a LLVM failure in travis :P
[17:40:34] <acrichto> yeah :(
[17:40:37] *** Quits: tjc (tjc@moz-791C24B0.phlapa.east.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[17:42:06] *** Joins: tjc (tjc@moz-791C24B0.phlapa.east.verizon.net)
[17:42:06] *** ChanServ sets mode: +o tjc
[17:42:30] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:43:23] <eddyb> and here starts the fun: functions that can take either a callee_id or an Expr ID
[17:46:27] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[17:47:05] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[17:47:29] <eddyb> ohh, "state changed" in git gui stages everything
[17:47:31] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[17:48:23] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[17:56:26] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[18:14:15] <erickt> brson: did you make a decision on if default type parameters should be enabled by default yesterday?
[18:14:39] <eddyb> isn't it today?
[18:15:39] <erickt> i suppose it depends on which timezone you live in :)
[18:15:59] <eddyb> no, I mean... AFAIK the meeting is at this hour
[18:16:06] <eddyb> or in an hour
[18:16:20] <erickt> eddyb: I thought it was about now, but there's no activity in https://etherpad.mozilla.org/Rust-meeting-weekly
[18:16:34] <acrichto> ah the meeting is later today
[18:16:37] <acrichto> it's at 2pm est
[18:16:40] <acrichto> pst*
[18:16:52] <eddyb> erickt: there, no need to get me confused :P
[18:17:28] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[18:18:52] *** Quits: tjc (tjc@moz-791C24B0.phlapa.east.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[18:19:54] *** Joins: tjc (tjc@moz-791C24B0.phlapa.east.verizon.net)
[18:19:54] *** ChanServ sets mode: +o tjc
[18:21:44] *** Joins: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP)
[18:21:44] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/0BueeA
[18:21:44] *** Parts: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP) ()
[18:24:03] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Connection reset by peer)
[18:24:15] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[18:25:15] *** Joins: glaebhoerl_ (glaebhoerl@3391DE98.E9231B2.A0179ACD.IP)
[18:25:59] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[18:26:39] *** Joins: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP)
[18:26:39] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/XPrjXw
[18:26:39] <ghrust> 13rust/06auto 141b3b273 15Alex Crichton: Add a method of manually specifying the crate map...
[18:26:39] <ghrust> 13rust/06auto 14fd83b2b 15bors: auto merge of #12408 : alexcrichton/rust/manual-crate-map, r=brson...
[18:26:39] *** Parts: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP) ()
[18:26:40] *** Joins: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP)
[18:26:40] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/6SOa8Q
[18:26:40] *** Parts: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP) ()
[18:28:02] <erickt> acrichto: I replied to you in https://github.com/mozilla/rust/pull/12544
[18:28:48] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[18:30:20] <eddyb> erickt: alternatively to cloning nmatsakis a couple times, you could clone me a few hundred times
[18:30:21] <acrichto> let nmatsakis = nmatsakis.clone();
[18:30:25] <eddyb> parallelism \o/
[18:30:43] <acrichto> spawn(proc() { do_work(eddyb); })
[18:30:52] <eddyb> (I am probably less resource intensive but also less efficient)
[18:30:58] <erickt> heck, lets just clone everybody
[18:31:10] <acrichto> rust.clone()
[18:31:17] <erickt> lol
[18:31:27] <eddyb> well, we don't need to do it for acrichto *cough* shifts *cough*
[18:32:15] <acrichto> erickt: I agree about the default type parameter concerns, but this is a concern for *all* crates, not just the stdlib ones
[18:32:22] <acrichto> I think that for now we may want to focus on sip hashing
[18:32:28] <acrichto> b/c of the use of default type parameters
[18:32:41] <acrichto> right now special use cases are hashing things like NodeId structures
[18:32:54] <acrichto> which doesn't need a generic hashing impl of Url and things like that
[18:33:28] <erickt> no, but I did want to allow xxHash to be used
[18:34:39] <acrichto> I think we need to go all in one way or another
[18:34:46] <acrichto> having our foot in both doors is kinda painful
[18:34:51] <erickt> I agree
[18:35:07] <Eridius> hrm, rustlang.org redicts to www.rust-lang.org for me, but someone else is getting "rustlang.org is a parked domain" courtesy of EasyDNS
[18:35:25] <Eridius> actually, I get that parked domain page in chrome too
[18:35:39] <acrichto> erickt: I figure that because default type parameters are gated, if we're using them we're moving mostly in the direction of siphas
[18:35:41] <acrichto> siphash*
[18:35:47] <erickt> acrichto: really, this is just a good forcing function for us to decide if we want default typarams
[18:35:48] <Eridius> brson: ^
[18:35:49] <acrichto> just for now though, not once default type parameters are on by default
[18:35:56] <acrichto> that is also very true
[18:36:04] <Eridius> I like default type parameters
[18:36:10] <acrichto> brson was looking for allocators as the first use case, but I think this may be our first real use case
[18:36:15] <Eridius> although I do see the desire to prototype allocators before declaring them stable
[18:36:44] <Eridius> personally, I'm already using it in rust-irclib as the payload data type (my irc connection also takes an arbitrary payload it makes available to the callback)
[18:36:45] <bstrie> Eridius: did the change just happen? maybe it has yet to propogate
[18:36:46] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[18:36:52] <Eridius> bstrie: I would be surprised
[18:37:26] <erickt> we could leave things pretty much where they are now. allow for generic hashmaps, but you need to manually implement a generic Hash
[18:37:36] <erickt> and wait and see how default typarams play with allocators
[18:38:32] <acrichto> erickt: let's get brson to weigh in
[18:38:40] <strcat> allocators were already implemented so it's known what they are going to look like externally
[18:38:49] <strcat> but the actual allocation methods can be fiddled with endlessly
[18:39:42] <strcat> taking the old size in free/realloc, returning the real allocated size, have a zero_alloc function in addition to alloc, etc.
[18:39:51] <strcat> and zero_realloc
[18:40:17] <Eridius> hmm ok, Chrome and Safari are talking to different IPs
[18:40:22] <Eridius> rustlang.org has two, it should probably just have one
[18:41:26] *** Quits: tjc (tjc@moz-791C24B0.phlapa.east.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[18:41:43] *** Joins: tjc (tjc@moz-791C24B0.phlapa.east.verizon.net)
[18:41:43] *** ChanServ sets mode: +o tjc
[18:46:27] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[18:47:05] <Eridius> brson: I've filed https://github.com/graydon/rust-www/issues/21 about the DNS
[18:47:24] <Eridius> hmm, GitHub will auto-hyperlink a www.foo.org URL but not a foo.org URL. Interesting
[18:47:45] *** Quits: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net) (Ping timeout)
[18:47:45] *** Joins: kimundi (kimundi@moz-75FC8F5B.dip0.t-ipconnect.de)
[18:48:20] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[18:48:29] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[18:49:16] <cmr> acrichto: is there a way to opt libc out of tests?
[18:49:26] <cmr> acrichto: in the makefiles
[18:49:34] <cmr> acrichto: it's complaining (rightly) that there is no #[start]
[18:49:35] <acrichto> cmr: not currently
[18:49:45] <cmr> well, lang_item="start"
[18:50:02] <acrichto> cfg(test)?
[18:50:10] <cmr> I was hoping not to.
[18:50:43] <eddyb> std does nasty things to make the tests work
[18:52:46] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[18:54:48] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[18:55:21] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[18:56:12] <eddyb> no callee_id left in trans \o/
[18:56:29] <eddyb> (refactoring is exhausting and I shouldn't complain)
[18:56:43] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[18:58:20] *** Joins: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net)
[18:58:20] *** ChanServ sets mode: +ao dherman dherman
[18:58:43] *** Quits: tjc (tjc@moz-791C24B0.phlapa.east.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[18:58:46] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[18:59:58] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[19:00:34] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[19:00:59] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[19:00:59] *** ChanServ sets mode: +qo brson brson
[19:03:03] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[19:08:43] *** Joins: tjc (tjc@moz-791C24B0.phlapa.east.verizon.net)
[19:08:44] *** ChanServ sets mode: +o tjc
[19:08:56] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[19:08:56] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[19:09:45] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[19:10:26] *** Quits: tjc (tjc@moz-791C24B0.phlapa.east.verizon.net) (Ping timeout)
[19:11:32] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[19:12:31] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[19:12:59] *** Joins: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[19:15:14] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[19:16:58] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[19:17:58] <eddyb> nmatsakis: why are we borrow_mut so many hashmaps to look something up in them???
[19:18:05] <eddyb> *borrow_mut-ing
[19:18:08] *** kimundi is now known as zz_kimundi
[19:18:26] * eddyb checks the docs in case he's wrong
[19:18:50] <eddyb> nope, find takes &self
[19:19:01] * eddyb throws a @mut at pcwalton
[19:19:25] <cmr> hey be careful with those, they're dangerous.
[19:20:15] <eddyb> at least with autoderef through RefCell itself it would choose the path of least resistance
[19:20:31] <eddyb> instead of, you know, borrowing HashMap's mutably to call find
[19:20:41] <nmatsakis> eddyb: precisely just because poor pcwalton was editing so many things at once
[19:20:54] <nmatsakis> probably with a perl script
[19:21:04] <cmr> hopefully with some sort of script.
[19:21:13] <eddyb> rust-script
[19:21:17] <eddyb> .rss
[19:22:24] <eddyb> nmatsakis: I'm also taking the liberty of combining the borrow/borrow_mut local and its uses (now that we can have everything in one statement)
[19:22:39] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[19:22:39] *** ChanServ sets mode: +ao pcwalton pcwalton
[19:22:41] <nmatsakis> eddyb: yes that is rather nicer
[19:23:07] * Eridius reads niko's email
[19:23:13] <Eridius> huh, I had no idea that the original value was still readable
[19:23:33] * cmr didn't either
[19:23:58] * eddyb has no idea what everyone is looking at. oh, wait, could be the ML
[19:24:31] <nmatsakis> Eridius: yeah, it's a bad idea. Back when we had &const borrows it kind of made more sense.
[19:24:59] <nmatsakis> well way back when the goal was to accept as much seq code as possible
[19:25:03] <nmatsakis> that is no longer a goal for me :)
[19:25:17] <cmr> seq code?
[19:25:20] <nmatsakis> sequential
[19:25:21] <cmr> ah
[19:25:33] <nmatsakis> I guess what I mean is
[19:25:42] <Eridius> nmatsakis: &mut still does annoy me with great regularity, but I always assumed &mut made the original value wholly inaccessible. I wonder if I've violated this assumption anywhere?
[19:25:57] <eddyb> nmatsakis: I like it because it means stronger guarantees to LLVM
[19:26:06] <nmatsakis> Eridius: for most intents and purposes it does mean that anyway...
[19:26:27] <nmatsakis> Eridius: I think to make &mut less annoying the best fix is to implement #6393
[19:26:46] <nmatsakis> it's not really const borrows or reading borrowed values (in my experience) that are imp't
[19:27:15] <Eridius> nmatsakis: yes, fixing #6393 would be a huge help
[19:27:30] <Eridius> but e.g. doing things like splitting a mutable vector into two mutable subslices requires unsafe code
[19:27:41] <nmatsakis> well, there is a helper for it
[19:27:48] <nmatsakis> or there used to be
[19:27:59] <Eridius> and e.g. there's no way to copy overlapping memory today without using unsafe code to lie about aliasing (which, I assume, will bite you in the ass once rust starts giving more aliasing information to LLVM)
[19:28:14] <Eridius> rather, no way to create overlapping slices and copy them
[19:28:22] <Eridius> you have to instead implement it yourself using indexes
[19:28:28] <eddyb> nmatsakis: I think that if you can read the original value, it means you can have a load aliasing with a live &mut T
[19:28:32] <nmatsakis> so splitting mutable vectors I feel like is...basically solved
[19:28:50] <strcat> can split on an index and iterate over chunks in various ways
[19:28:50] <nmatsakis> i.e., add a few helpers (if splitting in half isn't enough) and you're good to go
[19:28:53] <eddyb> which is a nono with TBAA
[19:28:54] <Eridius> nmatsakis: sure, but it still requires unsafe code at some level
[19:29:02] <nmatsakis> eddyb: yes I know
[19:29:10] <nmatsakis> eddyb: I guess I should amend the RFC to mention that
[19:29:20] <nmatsakis> Eridius: doesn't everything...
[19:29:21] <eddyb> just checking my assumptions :)
[19:29:33] <strcat> the rules needed for data parallelism are the same as the rules needed for good TBAA afaik
[19:30:16] <nmatsakis> http://smallcultfollowing.com/babysteps/blog/2013/06/11/on-the-connection-between-memory-management-and-data-race-freedom/
[19:30:28] <nmatsakis> I agree ;)
[19:30:42] <nmatsakis> (not that I explicitly mention TBAA optimizations, but I think it follows)
[19:30:44] <strcat> LLVM even lets us mark ptrs as immutable in the tbaa metadata
[19:31:09] <strcat> in addition to saying they don't alias other ptrs
[19:31:11] <nmatsakis> Eridius: re: unsafe, I draw a line around functions like split, that are trivial to verify manually and which restore all assumptions when they finish
[19:31:12] <Eridius> nmatsakis: re: &mut being annoying, recently I tried adding a payload field to a struct of mine, with a type parameter to define it, and my struct never touched the field, it was just for clients to use. But of course that turned out be a no-go because clients couldn't mutably borrow that field and then call methods on my struct
[19:31:29] <Eridius> but I don't know any way to solve that one, so I just work around it
[19:31:49] <nmatsakis> Eridius: you hvae to define a warpper struct {User, You} and define methods on You
[19:31:55] <nmatsakis> but yeah not all patterns translate.
[19:32:51] <Eridius> yeah, I ended up just passing the payload as a separate parameter to my callback
[19:32:56] <Eridius> since I could store the data on the stack
[19:33:53] *** zz_kimundi is now known as kimundi
[19:36:41] *** Joins: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP)
[19:36:41] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/XPrjXw
[19:36:41] *** Parts: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP) ()
[19:39:25] *** Joins: glaebhoer1 (glaebhoerl@3391DE98.E9231B2.A0179ACD.IP)
[19:39:27] *** Quits: glaebhoerl_ (glaebhoerl@3391DE98.E9231B2.A0179ACD.IP) (Connection reset by peer)
[19:41:37] *** Joins: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP)
[19:41:38] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/TwwzqA
[19:41:38] *** Parts: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP) ()
[19:43:25] *** Joins: nrc|afk (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[19:45:50] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[20:01:49] *** nrc|afk is now known as nrc
[20:07:57] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[20:08:26] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[20:09:40] *** Quits: aurynj (Eon@583ABBE5.60FA2E28.B9E25744.IP) (Ping timeout)
[20:21:20] <eddyb> the type checking for ExprCall seems... wrong
[20:22:17] <eddyb> nmatsakis: it writes the type of the function to expr.id (which is the entire call expression, so it should be the output type)
[20:22:50] *** Joins: ninechars (glaebhoerl@3391DE98.E9231B2.A0179ACD.IP)
[20:22:51] *** Quits: glaebhoer1 (glaebhoerl@3391DE98.E9231B2.A0179ACD.IP) (Quit: )
[20:22:59] <eddyb> and it gets overwritten afterwards
[20:27:47] <eddyb> also, checking the return type of the callee - that should be the same as the type of the method call expr, no?
[20:31:33] <eddyb> nmatsakis: I'm torn. should I put substs in the method_map or leave them in node_type_substs? I don't think I need them for auto-deref
[20:32:17] <eddyb> though, what happens if the DerefImm impl is generic?
[20:32:39] <eddyb> is that where tps are needed?
[20:34:53] *** Quits: edwardw (edwardw@E6E87FA7.354F6412.B9C6B12A.IP) (Ping timeout)
[20:35:05] <nmatsakis> eddyb: why don't we need them for auto-deref?
[20:35:22] <nmatsakis> the trait is generic too...
[20:35:30] <eddyb> riiight, of course
[20:35:50] <eddyb> I'll have to live with the complications it causes
[20:37:01] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[20:38:09] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[20:38:59] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[20:39:05] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[20:48:01] *** Quits: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net) (Quit: dherman)
[20:52:25] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[20:54:44] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[20:56:33] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[20:56:33] *** ChanServ sets mode: +ao dherman dherman
[20:56:42] *** Joins: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP)
[20:56:42] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/wrGiCg
[20:56:42] *** Parts: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP) ()
[21:00:50] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Quit: Textual IRC Client: www.textualapp.com)
[21:01:44] *** Joins: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP)
[21:01:44] <ghrust> [13rust] 15bors pushed 5 new commits to 06auto: 02http://git.io/31I7EA
[21:01:44] <ghrust> 13rust/06auto 14818203e 15Eduard Burtescu: typeck: Remove old diagnostic that refers to `do`.
[21:01:44] <ghrust> 13rust/06auto 14d096eef 15Eduard Burtescu: Use only the appropriate trait when looking up operator overloads.
[21:01:45] <ghrust> 13rust/06auto 149d55326 15Eduard Burtescu: resolve: Remove all the operator overloads from trait_map.
[21:01:47] *** Parts: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP) ()
[21:02:08] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Quit: Textual IRC Client: www.textualapp.com)
[21:02:21] *** Quits: ninechars (glaebhoerl@3391DE98.E9231B2.A0179ACD.IP) (Quit: )
[21:02:26] *** Quits: whitglint (uid15486@moz-31ABA2C0.irccloud.com) (Quit: Connection closed for inactivity)
[21:02:33] *** Joins: ninechars (glaebhoerl@3391DE98.E9231B2.A0179ACD.IP)
[21:09:14] *** Joins: bytbox (s@moz-E1E7FAC3.washdc.fios.verizon.net)
[21:10:11] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[21:11:11] <acrichto> r? https://github.com/mozilla/rust/pull/12548
[21:11:14] <acrichto> ^- travis fixes
[21:11:20] <eddyb> so someone left _foo arguments in functions
[21:11:41] <eddyb> and I spend time thinking how to adjust those to work with my changes
[21:11:49] <eddyb> to find out they're ignored...
[21:33:34] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Client exited)
[21:33:51] *** Joins: tjc (tjc@moz-791C24B0.phlapa.east.verizon.net)
[21:33:51] *** ChanServ sets mode: +o tjc
[21:34:54] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[21:35:28] *** Joins: mawuli (mawuli@moz-36C70B7D.com.gh)
[21:37:26] *** flaper87|afk is now known as flaper87
[21:40:24] <flaper87> acrichto: fwiw LGTM
[21:42:01] <huon> acrichto: how do you comile LLVM? :P
[21:42:52] <huon> acrichto: just in general, are regular LLVM updates something we want to avoid? (To avoid forcing everyone to rebuild it too often?)
[21:43:36] <acrichto> huon: I don't like building llvm either, but I do like the idea of tracking upstream pretty closely while we can
[21:43:41] <acrichto> I don't think breaking changes like this are very common
[21:43:47] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[21:44:04] <huon> I guess we can run with it for a while and see if it happens too often
[21:44:14] <acrichto> we really just need llvm snapshots
[21:44:31] <acrichto> or we should freeze to an llvm version more regularly
[21:44:53] <huon> https://github.com/mozilla/rust/issues/5402 seems to be closed, fwiw
[21:45:25] <acrichto> ah, same thing to me
[21:45:29] <acrichto> some sort of binary something
[21:45:41] <acrichto> *everyone* rebuilding LLVM is annoying
[21:45:47] <acrichto> developers just building LLVM is "deal with it"
[21:46:09] <huon> heh
[21:46:19] * flaper87 agrees
[21:46:24] <Eridius> building LLVM is a kind of crappy introduction to the language
[21:46:37] * flaper87 agrees again
[21:46:44] <huon> at least they know we have a high-powered optimiser...
[21:46:47] <Eridius> especially if you're building with something like Homebrew, because then you can't reuse previous build products and must rebuild from scratch every time
[21:47:29] <flaper87> how different is our llvm version from trunk?
[21:47:42] <flaper87> I know some patches have been merged upstream
[21:47:54] <acrichto> I'm working on merging the ARM patches
[21:47:55] <huon> flaper87: https://github.com/rust-lang/llvm/tree/rust-llvm-2014-02-25 is the branch
[21:47:58] <acrichto> and then we're quite close to trunk
[21:48:07] <acrichto> no-split-stack is about it after the ARM patches
[21:48:17] <acrichto> (MIPS is under the bus at this point)
[21:48:18] <huon> acrichto: have you got a response to your patch?
[21:48:44] <acrichto> I did indeed
[21:49:00] <acrichto> http://lists.cs.uiuc.edu/pipermail/llvm-commits/Week-of-Mon-20140224/206096.html
[21:49:03] <flaper87> huon: yeah, I was just being lazy :P
[21:49:43] <flaper87> acrichto: that sounds good. It looks like we're not that far from it
[21:49:59] <huon> acrichto: awesome \o/
[21:52:21] *** Joins: notmatt_ (notmatt@moz-9FB2565E.vc.shawcable.net)
[21:56:06] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[21:57:11] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[21:57:12] *** ChanServ sets mode: +ao pcwalton pcwalton
[21:58:26] *** Joins: brson (brson@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[21:58:27] *** ChanServ sets mode: +qo brson brson
[21:58:47] <eddyb> meeting is this much later today? hmm
[22:00:01] <eddyb> nmatsakis: well, here goes another day without much progress. and I'll have to revert a change made towards autoderef (in light of the most recent method_map development)
[22:01:03] <eddyb> (I made AdjAutoDerefAutoRef use a SmallVector<AutoDeref> for derefs, but that is no longer required if we key the method_map by deref #)
[22:04:22] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[22:04:51] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Quit: Textual IRC Client: www.textualapp.com)
[22:05:17] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[22:05:26] <eddyb> gogo mac bot
[22:05:31] <nmatsakis> eddyb: sounds like progress to me 
[22:05:33] <nmatsakis> (iteration)
[22:06:03] <eddyb> well, yeah. it feels good to know I don't need a vector
[22:06:22] <eddyb> (but I remember how it was before and that I've refactored it for nothing)
[22:06:44] <eddyb> I was going to go to sleep, but watching the pad is fun
[22:07:54] <nmatsakis> horray for erickt
[22:08:05] <erickt> thanks brson!
[22:09:56] <eddyb> erickt: gj, I'm glad we can finally dream to replace SipHash in rustc :D
[22:10:20] <eddyb> (well, I was dreaming before, but I didn't know how much work there had to be done)
[22:11:38] *** Joins: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP)
[22:11:38] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/31I7EA
[22:11:38] *** Parts: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP) ()
[22:11:44] <eddyb> huon: are you attending the meeting?
[22:11:57] <erickt> eddyb: :) all that's left now is getting default typarams turned on permanently
[22:12:27] <eddyb> at least the overloads just landed :D
[22:12:50] <eddyb> (the improvements I've made, that is)
[22:13:23] <erickt> eddyb: I think brson saying he wants to hold off on that until allocators-with-default-typarams is just him trying to trick us into implementing it :)
[22:13:45] <eddyb> erickt: no kidding
[22:14:19] <nrc> huon: can you hear us now?
[22:14:21] <eddyb> he asked me before, but I have so many other things I can/should do, allocators seem like a time sink
[22:15:28] <erickt> brson the puppeteer. we see the strings, brson!
[22:16:00] <eddyb> pcwalton: with disconnected equals/cmp and operator overloads, we can make the overloads generic (so they can do other things, like construct an AST - which I actually need in one place)
[22:16:38] *** Joins: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP)
[22:16:38] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/3V6-dg
[22:16:38] <ghrust> 13rust/06auto 14cdee0f8 15Alex Crichton: std: Tweak stack overflow printing for robustness...
[22:16:38] <ghrust> 13rust/06auto 144fb2811 15bors: auto merge of #12505 : alexcrichton/rust/fix-stack-overflow, r=brson...
[22:16:38] *** Parts: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP) ()
[22:16:39] *** Joins: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP)
[22:16:39] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/9DzXXQ
[22:16:39] *** Parts: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP) ()
[22:17:55] *** Quits: doener (doener@moz-C68F600D.unity-media.net) (Quit: leaving)
[22:25:47] <eddyb> flaper87, erickt: I don't think they're converging towards a consensus :/
[22:31:01] <flaper87> eddyb: hehe, there are tons of notes on that topic
[22:31:31] <eddyb> it's just going and going
[22:32:37] * eddyb hopes to get eq/ord operator overloads that don't return bool
[22:32:45] <eddyb> because syntax sugar
[22:32:47] *** Joins: geoffhill (geoffhill@moz-95FF7399.members.linode.com)
[22:33:40] <strcat> eddyb: not going to happen with the way it's going
[22:33:46] *** Quits: geoffhill (geoffhill@moz-95FF7399.members.linode.com) (Quit: )
[22:34:03] <eddyb> strcat: I almost feel like hijacking the pad :P
[22:34:15] <strcat> the pad?
[22:34:17] <flaper87> eddyb: don't :P
[22:34:18] *** Joins: geoffhill (geoffhill@moz-95FF7399.members.linode.com)
[22:34:24] <flaper87> strcat: https://etherpad.mozilla.org/Rust-meeting-weekly
[22:38:44] <eddyb> strcat: is it getting worse?
[22:39:25] <strcat> eddyb: well I think it would be worse if the guarantee was only partial
[22:39:32] <strcat> max/min/clamp aren't even correct on floats
[22:39:58] <strcat> our sort requires a total ordering
[22:40:07] <eddyb> nmatsakis: resist!
[22:40:14] <strcat> you can do a sort without requiring that but I think it would have to be less efficient on sequences
[22:40:27] <strcat> and where do you put the unordered elements? start? end? how do you find them?
[22:40:36] <strcat> you have to be very careful about writing it
[22:40:44] <eddyb> nmatsakis: for all the sweet syntax sugar :D
[22:42:15] <strcat> I just want to improve the current situation anyway
[22:42:48] <eddyb> I knew they wouldn't reach a decision
[22:42:53] <strcat> I don't really think the PR I made about it needs an RFC since it leaves it as-is
[22:44:34] <eddyb> acrichto: #[weak] static SOMETHING: Option<type>;
[22:45:56] <strcat> I thought weak symbols just meant you could override an existing symbol?
[22:46:51] <eddyb> brson: could allow any nullable pointer
[22:47:00] <eddyb> like Result<T, ()>
[22:52:22] <eddyb> Tx/Rx <3
[22:52:44] <eddyb> SyncTx/SyncRx - still nice
[22:53:08] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[22:54:14] <eddyb> 4 letters? you can have two!
[22:54:58] * eddyb throws a transceiver at acrichto
[22:55:27] *** Quits: tjc (tjc@moz-791C24B0.phlapa.east.verizon.net) (Ping timeout)
[22:56:34] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[22:56:36] *** Joins: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP)
[22:56:36] <ghrust> [13rust] 15bors 04force-pushed 06auto from 144fb2811 to 14c24946e: 02http://git.io/N3iJvQ
[22:56:36] *** Parts: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP) ()
[22:56:51] *** Joins: tjc (tjc@moz-791C24B0.phlapa.east.verizon.net)
[22:56:52] *** ChanServ sets mode: +o tjc
[22:57:18] <eddyb> for the sake of bstrie, someone mention Tx/Rx - oh wait, it's over :(
[22:58:26] *** Quits: geoffhill (geoffhill@moz-95FF7399.members.linode.com) (Input/output error)
[23:01:57] *** Quits: tjc (tjc@moz-791C24B0.phlapa.east.verizon.net) (Connection reset by peer)
[23:02:06] *** Joins: tjc (tjc@moz-791C24B0.phlapa.east.verizon.net)
[23:02:06] *** ChanServ sets mode: +o tjc
[23:06:43] <cmr> eddyb: tx/rx was mentioned.
[23:06:52] <eddyb> but only for local
[23:07:14] <eddyb> Tx/Rx look really nice and you can't mix them up
[23:08:18] <huon> Oh, I forgot to say: how often does one need to write `let x: (Port<T>, Chan<T>) = channel();` surely `let x = channel::<T>()` is nicer (less repetition, etc)?
[23:09:02] <eddyb> let (tx, rx) = channel::<T>(); does look ok
[23:09:21] <huon> acrichto: ^
[23:09:51] <acrichto> indeed
[23:09:54] <acrichto> Sender<T> Receiver<T>
[23:09:56] <acrichto> eew
[23:10:08] <huon> yeah, but the point is you don't need to write that with a `::<T>` on channel
[23:10:20] <cmr> or ever, really
[23:10:22] <acrichto> I like the constructor form channel()
[23:10:27] <cmr> I don't think I ever look at the types except in the docs.
[23:10:40] <eddyb> I think having channel as a free function helps with the type hint
[23:10:43] <huon> writing `(p,c): (Port<T>, Chan<T>)` now is already "eew" to me
[23:10:45] <acrichto> SenderWriter ReeiverReader
[23:10:50] <acrichto> comm_adapters.rs
[23:10:52] <eddyb> Reaver
[23:11:06] <acrichto> WorkFromTask(&'a Prep<'a>, Receiver<(Exec, T)>),
[23:11:21] <acrichto> fn oneshot(&mut self, msecs: u64) -> Receiver<()> {
[23:11:22] <eddyb> cmr: that's true
[23:11:26] <huon> global type inference \o/
[23:11:27] <huon> :P
[23:11:29] <acrichto> priv outgoing: Sender<Result<~RtioPipe, IoError>>,
[23:11:32] <cmr> yeah
[23:11:46] <acrichto> just some examples from the sed renaming
[23:11:49] <huon> acrichto: true enough
[23:11:54] <cmr> Tx/Rx is the most understandable good-looking ones I think...
[23:12:00] <huon> bleh, naming :(
[23:12:21] <eddyb> DuplexStream => TxRx
[23:12:27] <huon> why can't we just number our types in std T0 ... Tn? no need for english.
[23:12:44] <eddyb> Trex
[23:14:34] <cmr> huon: no, you mean T0 ... Tx :P
[23:14:44] <eddyb> Ty
[23:14:58] <eddyb> (taken by syntax::ast)
[23:15:08] <huon> cmr: x isn't necessarily a natural number, while n *clearly* is :P
[23:15:34] <eddyb> T<static n: uint>
[23:15:46] <eddyb> not it's not only *clearly* but also *rightfully* so :)
[23:15:52] <eddyb> s/not/now
[23:16:20] <cmr> that's not the naturals, that's the first 2^small_number naturals.
[23:16:24] <huon> so all types in std are just different monomorphisations T<0>, T<1>, ... of a single parent type
[23:16:26] <cmr> plus 0!
[23:16:27] <huon> I like it!
[23:16:33] <eddyb> can you tell it's 1am? replace(bed, self)
[23:16:35] <huon> cmr: naturals include 0 :P
[23:16:48] <cmr> says you!
[23:17:11] <huon> says everyone who's sensible!
[23:17:14] <eddyb> welp, replace gives me back the sheets
[23:17:29] <eddyb> needs moar Option dance
[23:17:30] * huon no-true mathematician fallacy
[23:19:24] *** Quits: doomlord_ (servitor@moz-99BE89EC.range86-184.btcentralplus.com) (Quit: Leaving)
[23:19:43] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Quit: Lost terminal)
[23:23:41] <acrichto> huon: btw it looks like native I/O is super broken on windows in terms of binary files I think
[23:23:48] <acrichto> I'm just gonna rewrite all of it to use actual windows apis
[23:23:52] <huon> acrichto: gah :(
[23:23:59] <huon> that would explain why those PRs don't work at all
[23:24:02] <acrichto> I got it worked by fixing readlink()
[23:24:06] <acrichto> but then all metadata was corrupted
[23:24:13] <acrichto> and I think it's b/c we're not opening files with O_BINARY
[23:24:23] <acrichto> which apparently is a windows thing
[23:24:37] <sunfish> oh, binary
[23:24:39] <cmr> ah it's probably doing newline conversion for us.
[23:24:44] <acrichto> they should be entirely separate implementations anyway
[23:25:03] <acrichto> hoping that their libc compat does the right thing sounds scary
[23:26:02] <acrichto> Receiver<Sender<Sender<int>>>
[23:26:04] <acrichto> what is this madness
[23:26:47] <eddyb> you can receive senders through which you can send senders for ints
[23:26:56] <eddyb> wat
[23:27:13] <eddyb> Rx<Tx<Tx<int>>> doesn't make it simpler to comprehend
[23:28:50] <huon> acrichto: where do we have 3 layers of channels?
[23:29:07] <acrichto> src/test/bench/task-perf-one-million.rs
[23:29:20] <acrichto> yeah that is a lost cause
[23:29:24] <acrichto> no naming will help that
[23:29:27] <cmr> nope
[23:29:56] <cmr> I found myself puzzling just over the nested chan/ports in sync, and that's just two layers usually :P
[23:30:00] <cmr> (the typedef doesn't help)
[23:30:09] *** Quits: eddyb (eddy@moz-41DB10DA.residential.rdsnet.ro) (Ping timeout)
[23:32:06] *** Joins: cgaebel (clark@moz-8E0C6BCA.nyc.res.rr.com)
[23:34:21] *** Quits: sunfish (chatzilla@moz-42DA0C69.dsl.dynamic.sonic.net) (Client exited)
[23:35:24] *** Joins: sunfish (chatzilla@moz-42DA0C69.dsl.dynamic.sonic.net)
[23:36:13] <acrichto> brson: removing part of the split-stack header appears to still work on android
[23:36:17] <acrichto> so it must be using the coprocessor
[23:45:18] *** Joins: glaebhoerl (glaebhoerl@3391DE98.E9231B2.A0179ACD.IP)
[23:45:18] *** Quits: ninechars (glaebhoerl@3391DE98.E9231B2.A0179ACD.IP) (Connection reset by peer)
[23:46:10] <brson> acrichto: ok
[23:47:01] *** Joins: CATHRYN285 (CATHRYN285@moz-2CF83664.pools.arcor-ip.net)
[23:47:03] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.3)
[23:48:53] <CATHRYN285> associate with   Battaglie Strategiche   http://ow.ly/tZz0c
[23:49:03] *** Quits: CATHRYN285 (CATHRYN285@moz-2CF83664.pools.arcor-ip.net) (Client exited)
[23:51:35] *** Joins: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP)
[23:51:35] <ghrust> [13rust] 15bors 04force-pushed 06auto from 141dbd433 to 14c24946e: 02http://git.io/N3iJvQ
[23:51:35] *** Parts: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP) ()
[23:51:36] *** Joins: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP)
[23:51:36] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/6Wwsow
[23:51:36] <ghrust> 13rust/06auto 14f39928b 15Alex Crichton: std: Tweak stack overflow printing for robustness...
[23:51:36] <ghrust> 13rust/06auto 149c10883 15bors: auto merge of #12505 : alexcrichton/rust/fix-stack-overflow, r=brson...
[23:51:36] *** Parts: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP) ()
[23:54:31] *** aatch is now known as aatci
[23:54:52] *** Quits: brson (brson@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Ping timeout)
[23:56:50] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[23:57:06] *** aatci is now known as aatch
[23:58:54] *** flaper87 is now known as flaper87|afk
[23:59:06] *** Joins: Jesse (jruderman@moz-DFAA4E15.p2p.sfo1.mozilla.com)
