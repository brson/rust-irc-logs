[00:00:27] *** Quits: txdv (quassel@966F3542.3BA477DA.14C26596.IP) (Ping timeout)
[00:01:07] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[00:01:07] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/r_NKMg
[00:01:07] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[00:02:19] <ryeguy> where can i find searchable api docs? i have seen them before but i lost the link
[00:02:51] <olsonjeffery> ryeguy: there's a link on rust-lang.org
[00:03:06] <SiegeLord> How do you convert a newtype back to the type it's wrapping? Pattern matching?
[00:03:16] <Earnestly> ryeguy: http://seld.be/rustdoc/master/index.html ?
[00:03:28] <strcat> SiegeLord: *x, or probably pattern matching too
[00:03:30] *** Quits: lbergstrom (Adium@moz-5D8E4B14.lightspeed.cicril.sbcglobal.net) (Quit: Leaving.)
[00:03:32] <ryeguy> thanks Earnestly, that was it
[00:03:44] <SiegeLord> strcat: Why does * work?
[00:04:12] <aatch> SiegeLord, because it's special-cased for newtype structs.
[00:04:24] <SiegeLord> Huh, that's interesting
[00:04:30] <SiegeLord> I think I like it
[00:04:38] <aatch> SiegeLord, specifically because it's so handy.
[00:05:19] <aatch> especially when you're working with newtype-ed ints and the like and pattern matching is just too verbose.
[00:05:51] <aatch> rusti: struct Foo(int); let f = Foo(1); let Foo(a) = f; a
[00:05:53] -rusti- 1
[00:05:58] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[00:05:58] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/2Qmqpw
[00:05:58] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[00:05:59] <aatch> rusti: struct Foo(int); let f = Foo(1); let Foo(a) = f; a + 1
[00:06:01] -rusti- 2
[00:06:02] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[00:06:02] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/rwGTAQ
[00:06:02] <ghrust> 13rust/06auto 1487d9d37 15Corey Richardson: Add a Default trait.
[00:06:02] <ghrust> 13rust/06auto 146eb924d 15Corey Richardson: Fix deriving-zero test
[00:06:02] <ghrust> 13rust/06auto 14a8221bd 15bors: auto merge of #8438 : cmr/rust/default, r=thestinger
[00:06:02] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[00:06:11] <aatch> rusti: struct Foo(int); let f = Foo(1); *f + 1
[00:06:12] -rusti- 2
[00:06:52] <aatch> (or more likely)
[00:06:57] <aatch> rusti: struct Foo(int); let f = Foo(1); Foo(*f + 1)
[00:06:59] -rusti- {__field__: 2}
[00:07:46] *** Joins: txdv (quassel@966F3542.3BA477DA.14C26596.IP)
[00:08:28] *** Quits: toqueteos (Mibbit@moz-16CBFEDC.dynamic.jazztel.es) (Quit: http://www.mibbit.com ajax IRC Client)
[00:10:34] <lkuper> bjz: heh, thanks.  I am amused at the evolution of your reaction to it
[00:10:47] <bjz> lkuper: ^^
[00:11:03] <bjz> lkuper: hehe, glad to provide some entertainment
[00:11:24] <bjz> lkuper: I will be sure to jump to conclusions on your next post
[00:11:56] <lkuper> imagine if I wrote about actually controversial topics
[00:13:10] <tikue> what is send_deferred
[00:13:42] <tikue> is it a synchronized send?
[00:14:03] <ecr> tikue: on what? std::comm stuff?
[00:14:13] <tikue> ecr: yeah on chan
[00:14:16] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[00:14:45] <tikue> rusti: let (port, chan) = ::std::comm::stream(); chan.send_deferred(0u); println("here");
[00:14:49] -rusti- pastebinned 8 lines of output: http://ix.io/7Bo
[00:15:19] <ecr> tikue: normal send immediately reschedules to a blocked receiver. send_deferred does not and continues with the sending task.
[00:15:29] *** Joins: Jesin (Jessin_@moz-67BAD9B.cc.lehigh.edu)
[00:15:35] <tikue> ah ok thanks
[00:15:42] <tikue> so there is no synchronized send/recv right?
[00:15:57] <tikue> might be useful to have synchronized_chan or something
[00:16:13] <ecr> well there's no way to force the sender to wait for the receiver
[00:16:20] <tikue> sure there is
[00:16:40] <ecr> but send/recv is synchronous
[00:16:42] <tikue> a duplex stream that only reveals the chan on one side
[00:16:44] <tikue> and port on one side
[00:16:51] <bjz> sully: can you pattern match on arguments in defaut methods?
[00:16:54] <tikue> and then synchronizes the sends and recvs
[00:16:56] *** Quits: KindOne (KindOne@moz-6794B877.dynamic.ip.windstream.net) (Ping timeout)
[00:16:58] <sully> sigh, no
[00:16:58] <tikue> by waiting for an ack
[00:17:01] <sully> there is a bug on this
[00:17:01] <ecr> oh right. i'm working at a lower level than that usually
[00:17:03] <sully> it is silly
[00:17:06] <sully> just parser stuff
[00:17:15] <tikue> ecr: right
[00:17:24] <ecr> how do you want it to be more synchronized than it already is?
[00:17:45] <tikue> ecr: one use case is if you have a task that iterates over, say, count(2, 1)
[00:17:52] <tikue> ecr: and it continually sends numbers to some port
[00:17:55] <tikue> but you don't want to flood the port
[00:18:09] <bjz> rusti: trait Foo { fn foo((x, y): (int, int)) -> int { x + y } }
[00:18:09] -rusti- <anon>:5:34: 5:35 error: expected `,` but found `:`
[00:18:09] -rusti- <anon>:5          trait Foo { fn foo((x, y): (int, int)) -> int { x + y } }
[00:18:09] -rusti-                                            ^
[00:18:09] -rusti- application terminated with error code 101
[00:18:14] <bjz> sully: ^
[00:18:34] <sully> yeah
[00:18:48] <bjz> sully: should I make an issue?
[00:18:52] <ecr> tikue: I guess you could make a RateLimitedChan
[00:19:17] <sully> bjz: no, it's already opened
[00:19:22] <ecr> you can build it on top of what we have already
[00:19:26] <bjz> sully: ok, cool
[00:19:29] <kimundi> r? https://github.com/mozilla/rust/pull/8777
[00:19:43] <tikue> rusti: use std::iterator::count; let (port, chan) = ::std::comm::stream(); do spawn { for i in count(0u, 1) { chan.send(i); } } port.recv()
[00:19:45] -rusti- application terminated abnormally with signal 11 (Segmentation fault)
[00:20:08] *** Quits: bytewise (bytewise@moz-4A801D04.unitymediagroup.de) (Quit: Leaving)
[00:20:23] <ecr> have the receiver send a token to the sender when it takes something out of the channel and don't put more than X in the channel at a time
[00:20:30] <brson> why did that segfault?!
[00:20:32] <engla> tikue: you'll need to rate-limit that :)
[00:20:54] <tikue> engla: yeah heh, but rust should do better than segfault :P
[00:20:55] <strcat> brson: count is an infinite iterator, probably a stack overflow?
[00:20:57] *** Joins: KindOne (KindOne@moz-115D0997.dynamic.ip.windstream.net)
[00:20:59] *** kimundi is now known as zz_kimundi
[00:21:00] * strcat shrugs
[00:21:01] <ion> Now that i can cross-compile code for Arm, can i cross-compile the Rust compiler for Arm? :-)
[00:21:02] <engla> (as in, create a channel that blocks when the buffer is too large)
[00:21:21] *** Quits: Sphax (sphax@moz-B9948B84.w80-9.abo.wanadoo.fr) (Quit: Quitte)
[00:21:29] *** Quits: jclements (jclements@moz-62D9F423.wireless.calpoly.edu) (Quit: jclements)
[00:21:36] *** Quits: tikue (tkuehn@B8DA8A71.21C37D63.689607DE.IP) (Quit: tikue)
[00:21:39] *** Quits: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[00:21:41] <brson> https://mana.mozilla.org/wiki/download/attachments/33098383/MMV%20Survey%20Results%20Presentation%20130327.pdf?version=8&modificationDate=1364574852399&api=v2
[00:21:44] <brson> derp
[00:21:50] <brson> rusti: use std::iterator::count; let (port, chan) = ::std::comm::stream(); do spawn { for i in count(0u, 1) { chan.send(i); } } port.recv()
[00:21:56] -rusti- timeout triggered!
[00:21:57] *** Quits: mihneadb (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net) (Connection reset by peer)
[00:22:01] <ecr> interesting
[00:22:05] <strcat> rusti: use std::iterator::count; let (port, chan) = ::std::comm::stream(); do spawn { for i in count(0u, 1) { chan.send(i); } } port.recv()
[00:22:11] -rusti- timeout triggered!
[00:22:11] *** Joins: mihneadb (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net)
[00:22:14] <strcat> rusti: use std::iterator::count; let (port, chan) = ::std::comm::stream(); do spawn { for i in count(0u, 1) { chan.send(i); } } port.recv()
[00:22:19] -rusti- timeout triggered!
[00:22:25] * strcat shrugs
[00:22:33] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[00:22:37] <brson> strcat: is rusti single-threaded?
[00:22:45] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[00:22:47] <strcat> brson: no
[00:22:48] <aatch> rusti: use std::iterator::count; let (port, chan) = ::std::comm::stream(); do spawn { for i in count(0u, 1) { chan.send(i); } } (port.recv(), port.recv())
[00:22:53] -rusti- timeout triggered!
[00:22:57] <brson> oh, it's ilooping of course. the timeout is what I'd expect
[00:23:08] <brson> was thinking that send would fail after the port closes, but that's not true
[00:24:25] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[00:25:39] *** Joins: ryanc (ryanc@5AB4884B.FCC4549.14D5B978.IP)
[00:25:49] *** Parts: ryanc (ryanc@5AB4884B.FCC4549.14D5B978.IP) ()
[00:25:53] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[00:26:53] <h3r3tic> I can't seem to be able to guess it. would anyone know how I add an object file to a rust crate? I tried adding the link flags to the crate, and an empty module with it, but even then, the object file doesn't actually end up in the crate, it just passes the linker option when building the final executable
[00:26:54] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[00:29:03] *** Joins: richard|s (mindginati@moz-C1729134.dsl.clear.net.nz)
[00:29:13] *** Quits: cowboyd (cowboyd@3C276A48.925F2E55.49CEED6B.IP) (Client exited)
[00:29:34] <enix> I tracked a minor performance regression down to one of two commits. decreases throughput on my bench from 84MB/s to 80MB/s. I don't have a small test case (2k lines or so). Is it worth opening an issue up for it?
[00:29:44] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Quit: Leaving)
[00:30:36] <brson> enix: yes please
[00:31:18] <enix> ok, will do
[00:32:21] <h3r3tic> bjz: maybe you would know? :P
[00:32:37] <bjz> no :(
[00:32:56] <h3r3tic> bah, kay
[00:32:59] <bjz> did you try -L ?
[00:33:12] <bjz> rustc -L ... <file>
[00:33:20] <ecr> with the `for x in iter` syntax, can I make the binding mutable? `for mut x in iter` complains about mut being in ident position. am I just stuck with adding a `let mut x = x` line?
[00:33:23] <h3r3tic> I thought that adds a library search path
[00:34:12] <bjz> pcwalton: adding object files to a crate? is there a way?
[00:34:22] <pcwalton> bjz: object files?
[00:34:32] <pcwalton> like linking .o files into your dylib?
[00:34:35] <bjz> h3r3tic: object files?
[00:34:44] <pcwalton> maybe with #[link_args] ?
[00:34:49] <bjz> pcwalton: h3r3tic is asking
[00:35:00] <pcwalton> ecr: it's on the list of features we want to add
[00:35:32] <ecr> pcwalton: is it going to be a full blown pattern binding eventually? I can't really see why it shouldn't be
[00:35:41] <pcwalton> it is a full blown pattern binding
[00:35:46] <bjz> h3r3tic: btw you can do #[link_args]; at the top level module and it will apply it to the parent
[00:35:47] <pcwalton> the problem is that "mut" is not in the pattern language
[00:36:08] <ecr> ah
[00:36:09] <h3r3tic> pcwalton, bjz: yeah, adding an object file to the dylib ( dll in this case ) because it's an extern dependency of the code. I don't want to be passing the obj to every binary which also uses the crate
[00:36:22] <pcwalton> oh, I'm not sure, I think #[link_args] does this
[00:36:25] <pcwalton> brson might know
[00:36:35] <pcwalton> that is I think link_args actually passes the arg to every binary
[00:36:37] <pcwalton> so it won't work
[00:36:41] <pcwalton> I think we need a new feature for that
[00:36:42] <bjz> ecr: I think there is a mut_iter
[00:36:43] <h3r3tic> I put the link_args at the top of the module, and it seemed to have no effect
[00:36:58] <pcwalton> I think link_args has to go on extern { ... } blocks
[00:37:01] <h3r3tic> currently it's a `#[nolink] #[link_args="gl_wrapper.o"] extern { }`
[00:37:04] <pcwalton> #[link_args="whatever"] extern { }
[00:37:13] <h3r3tic> but that doesn't cause the obj to be included in the dylib
[00:37:21] <pcwalton> hm
[00:37:22] <h3r3tic> oh no wait
[00:37:34] <bjz> rusti: let mut v = [1, 2, 3]; for x in v.mut_iter() { x += 1 } v
[00:37:35] -rusti- <anon>:5:56: 5:62 error: binary operation + cannot be applied to type `&mut <VI2>`
[00:37:35] -rusti- <anon>:5          let mut v = [1, 2, 3]; for x in v.mut_iter() { x += 1 } v
[00:37:36] -rusti-                                                                  ^~~~~~
[00:37:36] -rusti- error: aborting due to previous error
[00:37:36] -rusti- application terminated with error code 101
[00:37:36] <h3r3tic> the issue is that then linking against that dylib makes the linker complain about this file being missing
[00:37:42] <bjz> rusti: let mut v = [1, 2, 3]; for x in v.mut_iter() { *x += 1 } v
[00:37:43] -rusti- [2, 3, 4]
[00:37:48] <bjz> ecr: ^
[00:37:48] <h3r3tic> the symbols might actually end up there, but it tries to link to it again
[00:37:53] <h3r3tic> when building the exe using the crate
[00:38:41] *** Quits: graydon (Adium@A5087023.2354C43D.D8E68FF6.IP) (Quit: Leaving.)
[00:38:56] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[00:39:00] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[00:40:07] <ecr> bjz: don't seem to be a trait for that though. oh well, I'm just using `ref mut x` for now
[00:40:11] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[00:40:23] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[00:40:27] <strcat> ecr: mut doesn't work in patterns yet alone
[00:40:31] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[00:40:52] <ecr> strcat: so i keep learning and forgetting
[00:41:03] <strcat> :)
[00:41:32] <jmgrosen> why can't I have a method return a VecIterator<&'self Foo>?
[00:41:48] <ecr> I'm turning incoming TCP connections into an Iterator
[00:42:01] *** Quits: sebcrozet (sebcrozet@moz-A855F6C0.w82-127.abo.wanadoo.fr) (Ping timeout)
[00:42:02] <ecr> it's pretty slick IMHO
[00:42:19] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[00:42:42] <strcat> jmgrosen: it's not how VecIterator takes params
[00:42:52] <strcat> it takes a lifetime param + value type
[00:43:08] <jmgrosen> strcat: ah, oops :P
[00:43:21] <jmgrosen> forgot to actually look at the docs >.<
[00:43:40] <strcat> rusti: let xs = [1, 2, 3]; let _it = xs.iter();
[00:43:41] -rusti- ()
[00:44:07] * strcat can't actually write the type there so...
[00:46:10] *** Joins: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net)
[00:47:43] <engla> jmgrosen: you can return a veciterator if you have a fitting lifetime to give it (for example the iterator is a func parameter)
[00:48:14] <jmgrosen> engla, yeah, i sort of got it working
[00:48:20] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[00:48:34] <engla> for example the vector is a func parameter, was what I wanted to say..
[00:49:53] *** Quits: heftig (heftig@moz-23C21D3E.dip0.t-ipconnect.de) (Ping timeout)
[00:50:54] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: Places to go, people to annoy)
[00:50:54] <jmgrosen> wow, rustc just aborted o_O
[00:51:10] <strcat> it does that on out-of-memory
[00:51:17] <strcat> or when LLVM asserts
[00:51:24] <jmgrosen> yeah, it was an llvm assert
[00:51:41] <jmgrosen> Assertion failed: ((i >= FTy->getNumParams() || FTy->getParamType(i) == Args[i]->getType()) && "Calling a function with a bad signature!"), function init, file /private/tmp/rust-zvgv/src/llvm/lib/IR/Instructions.cpp, line 281.
[00:52:09] <mitsuhiko> bjz: btw, why static variables for the shader types?
[00:52:12] <mitsuhiko> instead of an enum
[00:52:40] <bjz> mitsuhiko: because C-style enums leave... a lot to be desired
[00:52:53] <mitsuhiko> bjz: i meant instead of rust style enums
[00:52:59] *** Joins: heftig (heftig@moz-5B981C62.dip0.t-ipconnect.de)
[00:53:07] *** Joins: eschweic (Adium@moz-EAEE843B.syrcny.east.verizon.net)
[00:53:13] <bjz> mitsuhiko: because then you have to do a match
[00:53:24] <mitsuhiko> right. is that a problem?
[00:53:31] <bjz> mitsuhiko: hmm
[00:53:34] <bjz> maybe not
[00:53:45] <mitsuhiko> at least on the paper that should be really fast
[00:53:51] <bjz> yeah
[00:53:52] <mitsuhiko> did not look how it's implemented though
[00:53:56] <jmgrosen> would the compiler optimize it out? ideally, but I wonder if it actually would
[00:54:02] <bjz> dbaupp: deamonstrated it was a jump table
[00:54:09] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[00:55:47] *** Joins: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP)
[00:56:11] <bjz> mitsuhiko: ok, I might change it
[00:56:23] <bjz> mitsuhiko: are you adapting my shader thing
[00:56:27] <bjz> ?
[00:56:30] <mitsuhiko> bjz: i was playing with it, yes
[00:56:33] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[00:56:42] <mitsuhiko> https://raw.github.com/mitsuhiko/rust-game/master/game/shader.rs / https://raw.github.com/mitsuhiko/rust-game/master/game/program.rs
[00:56:45] <bjz> neat
[00:56:52] <mitsuhiko> really just toying around with it
[00:57:04] <mitsuhiko> the nice thing about the enums is that you get to_str
[00:57:31] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[00:58:21] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Quit: Leaving.)
[00:58:58] <bjz> yeah
[00:59:00] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Ping timeout)
[00:59:02] <bjz> the linker is nice
[00:59:14] <bjz> better than what I have
[00:59:25] <h3r3tic> bjz, pcwalton: what does work for me is passing --link-args to rustc when building the crate. then when the crate is included in an executable, the linker flags aren't passed in again.
[00:59:44] <mitsuhiko> bjz: the main reason i changed it was because i did not want to write Program<Linked> all the time
[00:59:46] <h3r3tic> but when they're inside an extern mod in the crate, they 'spill out'
[00:59:48] <mitsuhiko> pretty shitty reason :(
[00:59:52] <h3r3tic> anyway, I'm sorted for now :)
[00:59:56] <bjz> mitsuhiko: yeah :(
[01:00:12] <mitsuhiko> but besides the drop they don't share much anyways, so it's not a big deal
[01:01:07] <acrichto> olsonjeffery: I opened a pull request to fix the mingw build issues on libuv and tonight I'll tidy up my branch and push
[01:01:11] <acrichto> (hopefully it'll work!)
[01:01:18] *** Quits: inf-groupoid (user@580120F5.8ED93E28.1C8C8CE9.IP) (Quit: ERC Version 5.3 (IRC client for Emacs))
[01:01:22] <brson> acrichto: sweet!
[01:02:23] *** Quits: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net) (Quit: jorendorff)
[01:02:45] <olsonjeffery> niiiiiiice
[01:02:57] <olsonjeffery> and i was just slogging through libuv work, heh.
[01:03:57] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[01:04:19] <olsonjeffery> i should say, stat() work.
[01:07:51] *** Quits: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: ChatZilla 0.9.90.1-rdmsoft [XULRunner 22.0/20130619132145])
[01:08:11] <mitsuhiko> bjz: kinda wish there was some syntax support for assigning integer values to enums
[01:08:56] <ecr> brson: I just finished splitting out listen() from accept() and turned accepting incoming connections into an iterator. It's pretty slick, but we're going to need to change the Listener trait and probably add an Acceptor trait (I'll overhaul all that anyway if I get around to making IO iterator based).
[01:09:14] <mitsuhiko> it's ridiculously annoying getting a number back from opengl and having to do the reverse lookup by hand to figure out what it means
[01:09:29] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[01:11:16] <jmgrosen> mitsuhiko: i've seen the pattern a lot, and just saw it in your code -- why does ShaderError::new return a ~ShaderError instead of a ShaderError?
[01:11:45] <brson> ecr: ok
[01:12:14] <jmgrosen> mitsuhiko: and pub struct ShaderError(~str); might make more sense in this case than a normal struct
[01:13:22] <ecr> brson: anyways, I should be able to make the IO tests multithreaded now. That should be finished tomorrow.
[01:13:24] *** Quits: mitsuhiko (mitsuhiko-@moz-BC29B73E.srv.pocoo.org) (Ping timeout)
[01:13:29] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[01:14:06] *** Joins: recrack (ymin@5AB4884B.FCC4549.14D5B978.IP)
[01:15:07] *** Joins: mitsuhiko (mitsuhiko-@moz-BC29B73E.srv.pocoo.org)
[01:15:12] <mitsuhiko> hmm. odd
[01:15:25] <mitsuhiko> wanted to say, that i'm not a fan of struct(T) at all
[01:15:39] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[01:16:01] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[01:16:02] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/rwGTAQ
[01:16:02] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[01:18:25] <ecr> mitsuhiko: you mean newtype structs?
[01:18:35] <ecr> like struct NewType(int); ?
[01:18:37] <mitsuhiko> yeah
[01:18:45] <ecr> oh, they are SUPER useful
[01:19:03] <mitsuhiko> what do they give me?
[01:19:13] <mitsuhiko> so far the only thing i have seen are terrible error messages :D
[01:19:43] <ecr> they give you the ability to differentiate things in the type system that would otherwise be the same AND with no or little overhead (theoretically none at all, but depends on the implementation)
[01:19:55] <ecr> for example
[01:20:59] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[01:21:00] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/PElioQ
[01:21:00] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[01:21:00] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[01:21:00] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/IEL6Dg
[01:21:00] <ghrust> 13rust/06auto 14c921331 15Florian Hahn: Add script and tests for using keywords as identifiers
[01:21:00] <ghrust> 13rust/06auto 14af99b8d 15bors: auto merge of #8739 : fhahn/rust/ticket_2275, r=brson...
[01:21:00] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[01:21:01] <ecr> Seconds(int) and Cats(int) are different types. if you try to use Cats where Seconds are expected, then you'll get a compile time error. If you didn't have newtypes then you would have a logic error, but it wouldn't cause a type error ever (not even runtime)
[01:21:15] <ecr> more concretely
[01:21:31] <ecr> it's very useful for giving multiple implementations of a trait for the same type
[01:21:39] *** Quits: tcr (tcr@D26BCFC9.C2203064.EDCE493E.IP) (Client exited)
[01:22:02] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[01:22:04] *** Joins: msingle (Thunderbir@moz-20675462.nrflva.fios.verizon.net)
[01:22:13] <ecr> does that make sense?
[01:22:15] <mitsuhiko> ecr: yeah, i get that
[01:22:27] <mitsuhiko> but i am not differenciating a type
[01:22:31] <mitsuhiko> i'm making my own one
[01:22:43] <mitsuhiko> i don't think just because a struct has a single field to begin with it should become a newtype one
[01:22:47] *** Joins: eatkinson (eatkinson@moz-DACC1A92.dsl.bell.ca)
[01:23:04] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[01:23:24] <ecr> well you can make a single field struct that's not a newtype struct if you name the field
[01:23:35] <ecr> struct { field: int }
[01:23:52] <ecr> which will prevent you from using the * sugar for newtypes
[01:24:16] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[01:25:00] <klutzy> uh, github is down again
[01:25:00] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[01:25:33] <mitsuhiko> well, with that i will go
[01:25:47] <mitsuhiko> ecr: i'm not a huge fan of Result only wrapping over a ~str
[01:26:00] <mitsuhiko> primarily because of my bad experiences with stringly typed exceptions in python
[01:26:07] <mitsuhiko> people start parsing the error messages to extract info they want
[01:26:17] <mitsuhiko> thus my custom error structs
[01:26:29] <mitsuhiko> onto which i want to add things that you can differenciate errors better
[01:26:46] <mitsuhiko> alright, good night :)
[01:26:50] <ecr> g'night
[01:27:34] <ecr> you should be able to just use Either and have the left side (traditionally the error side) be your error enum
[01:27:45] <ecr> assuming we actually have Either in std
[01:27:50] <strcat> we do, but it likely sucks
[01:27:58] <ecr> Result is just a very common version of Either with the left side as ~str
[01:28:20] <strcat> ecr: Result doesn't force a type on either side
[01:28:22] <strcat> it's the same as Either
[01:28:32] <strcat> well, it forces a ToStr impl
[01:28:39] <strcat> but that's almost anything
[01:28:51] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Quit: pcwalton)
[01:29:13] *** Quits: pauls (pauls@moz-BFEF1F22.ccs.neu.edu) (Ping timeout)
[01:29:30] *** Quits: dolphinling (andrew@moz-80A1E448.uvm.edu) (Ping timeout)
[01:29:30] <ecr> strcat: derp. I should have remembered that since it's IoError in my face all day.
[01:29:57] <strcat> ideally, types would define a nice enum + a ToStr impl with the error messages
[01:30:04] *** Quits: azakai (alon@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[01:30:05] <ecr> Either looks pretty similar to Result as far as what's implemented.
[01:30:06] <strcat> s/types/functions/
[01:30:11] <ecr> ideally.
[01:30:16] *** abacus is now known as [a]bacus
[01:30:45] <ecr> anyways, I'm heading home for the day
[01:31:00] *** Quits: ecr (Thunderbir@moz-BBE3ABD.mv.mozilla.com) (Quit: ecr)
[01:32:04] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[01:32:27] *** Joins: dolphinling (andrew@moz-80A1E448.uvm.edu)
[01:32:28] *** Joins: pauls (pauls@moz-BFEF1F22.ccs.neu.edu)
[01:35:22] *** Joins: ross (ross@moz-8A84103E.br.br.cox.net)
[01:37:49] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[01:38:06] *** Joins: steven_is_false (user@C5B76363.1FF1EBF8.1ECA502.IP)
[01:38:21] *** Quits: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[01:38:37] *** Quits: echristo (echristo@DCF57675.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[01:39:26] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[01:39:42] <steven_is_false> Hi. I know a lot of you guys are very interested in concurrency, and I was wondering if you had any criticims/(ideas of how this could be implemented in Rust:) http://gitorious.org/helioblastocyst/helioblastocyst/source/1d9a2acf04b0aa7c34d325e0bc13482075862610:src/name/sstewartgallus/helioblastocyst/gamelib/Actor.java and an example of it's usage http://pastebin.mozilla.org/2921347
[01:39:43] *** Quits: sigma (sigma@moz-24A9AEB4.range109-145.btcentralplus.com) (Ping timeout)
[01:42:28] *** Quits: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[01:44:53] *** Parts: steven_is_false (user@C5B76363.1FF1EBF8.1ECA502.IP) (ERC Version 5.3 (IRC client for Emacs))
[01:46:38] *** Joins: inf-groupoid (user@580120F5.8ED93E28.1C8C8CE9.IP)
[01:47:05] *** Quits: eschweic (Adium@moz-EAEE843B.syrcny.east.verizon.net) (Quit: Leaving.)
[01:49:16] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[01:50:25] *** Joins: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net)
[01:50:32] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[01:52:03] *** Joins: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP)
[02:02:41] *** Quits: msingle (Thunderbir@moz-20675462.nrflva.fios.verizon.net) (Quit: msingle)
[02:02:45] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[02:02:55] *** Quits: _1126 (1126@moz-83D60E55.lileth.net) (Ping timeout)
[02:04:41] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[02:05:31] *** Joins: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP)
[02:08:09] *** Joins: _1126 (1126@moz-83D60E55.lileth.net)
[02:11:10] *** Quits: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net) (Quit: ozten)
[02:13:39] *** Quits: riley (riley@8BA43816.9AA11D69.65DDFA89.IP) (Client exited)
[02:16:09] *** Joins: Ralith (ralith@114DA04D.CD83ED0A.BCDF04A6.IP)
[02:16:31] <strcat> rusti: @mut [1, 2]
[02:16:32] -rusti- @mut [1, 2]
[02:16:38] <strcat> rusti: let x = @mut [1, 2]; x.clone()
[02:16:39] -rusti- &[1, 2]
[02:16:44] <strcat> wat
[02:16:46] *** Joins: choi (choi@EFB49084.2553AF4E.6FE028F4.IP)
[02:16:52] <strcat> rusti: let x = @[1, 2]; x.clone()
[02:16:52] -rusti- @[1, 2]
[02:18:16] <Eridius> strcat: I guess Clone isn't implemented on @mut T?
[02:18:31] <Eridius> at_vec only implements it for @[T]
[02:18:40] <strcat> yep
[02:18:42] <strcat> and no deep clone
[02:18:47] <strcat> but that's annoying to do
[02:18:51] <strcat> since you can't resize @[]
[02:19:16] *** Quits: mihneadb (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net) (Input/output error)
[02:22:47] *** Quits: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP) (Quit: Textual IRC Client: www.textualapp.com)
[02:23:56] *** Quits: choi (choi@EFB49084.2553AF4E.6FE028F4.IP) (Ping timeout)
[02:24:13] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[02:24:19] *** Joins: maik (maik___@moz-1318C3AE.dip0.t-ipconnect.de)
[02:25:29] *** Joins: lenary (uid5084@moz-31ABA2C0.irccloud.com)
[02:25:42] <ryeguy> is there any way to do conditional compilation in some sort of debug mode? e.g. have assertions only in a debug build
[02:26:24] <Eridius> ryeguy: go look at how debug!() is defined
[02:27:10] <Eridius> https://github.com/mozilla/rust/blob/master/src/libsyntax/ext/expand.rs#L761
[02:27:42] <Eridius> basically it uses the cfg!() macro to only do work if the debug config value is set
[02:28:06] *** Joins: choi (choi@EFB49084.2553AF4E.6FE028F4.IP)
[02:29:20] <ryeguy> thanks. I was always wondering where these macros were defined
[02:29:25] *** Quits: RMF (RMF@moz-3ADFD14C.dsl.telepac.pt) (Ping timeout)
[02:29:42] <Eridius> yeah, they're injected at the top of each crate, since atm there's no way to export a macro
[02:30:01] <Eridius> once macros become exportable, I assume those will end up being defined in libstd and used in the prelude
[02:30:19] *** Joins: RMF (RMF@moz-3ADFD14C.dsl.telepac.pt)
[02:30:50] *** Quits: eatkinson (eatkinson@moz-DACC1A92.dsl.bell.ca) (Quit: eatkinson)
[02:31:02] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[02:31:02] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/IEL6Dg
[02:31:02] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[02:32:00] *** Joins: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net)
[02:33:41] *** Quits: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net) (Ping timeout)
[02:34:38] *** Joins: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net)
[02:35:59] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[02:35:59] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/rC29Pw
[02:35:59] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[02:36:00] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[02:36:00] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/OMvU0Q
[02:36:00] <ghrust> 13rust/06auto 1479b921b 15Alex Crichton: Upgrade libuv to the current master + our patches...
[02:36:00] <ghrust> 13rust/06auto 1424f9ed3 15Alex Crichton: Implement process bindings to libuv...
[02:36:01] <ghrust> 13rust/06auto 14389b816 15Alex Crichton: Fix the libuv build system...
[02:36:03] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[02:36:27] *** Joins: m_kato (m_kato@moz-C286AD9A.bitcat.net)
[02:39:00] *** Joins: eatkinson (eatkinson@moz-DACC1A92.dsl.bell.ca)
[02:40:01] *** Joins: mihneadb (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net)
[02:40:10] *** Joins: zeuxcg (zeuxcg@moz-80D1F912.hsd1.ca.comcast.net)
[02:40:27] <acrichto> strcat: ping
[02:43:30] *** Parts: lenary (uid5084@moz-31ABA2C0.irccloud.com) ()
[02:43:46] *** Joins: sruggier (sruggier@moz-F1ED47A9.cpe.teksavvy.com)
[02:44:35] <sruggier> Can anyone take a stab at clarifying issue 5518 to me?
[02:44:35] <sruggier> https://github.com/mozilla/rust/issues/5518
[02:44:56] *** Quits: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net) (Client exited)
[02:45:34] <sruggier> absent the bug, would the offending program compile successfully, or result in a compile error?
[02:45:36] <aatch> sruggier, what do you need clarifing?
[02:45:50] <aatch> sruggier, it would still be an error
[02:45:59] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[02:45:59] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 147393c4f to 14af99b8d: 02http://git.io/N3iJvQ
[02:45:59] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[02:46:00] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[02:46:00] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/jnw45A
[02:46:00] <ghrust> 13rust/06auto 1479b921b 15Alex Crichton: Upgrade libuv to the current master + our patches...
[02:46:00] <ghrust> 13rust/06auto 1424f9ed3 15Alex Crichton: Implement process bindings to libuv...
[02:46:00] <ghrust> 13rust/06auto 14389b816 15Alex Crichton: Fix the libuv build system...
[02:46:02] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[02:47:44] <aatch> There is no way for the compiler to work out what the 'self lifetime should be in that situation. Associated functions (aka, static methods) are little more than just regular functions in a module with the same name as the trait.
[02:47:44] <sruggier> ok, I suspected that from the comments on the issue, but I'm kind of stumped as to what the problem is
[02:48:04] <sruggier> ah, thanks
[02:48:54] <maik> bjz, cgmath seems to be much nicer to read
[02:49:12] <aatch> basically, it's the same as if you wrote `fn foo<'a>() -> &'a int`, there is no way for the compiler to infer the concrete lifetime of `'a` under normal circumstances.
[02:50:02] <aatch> Though in the case above, it's complicated by the fact that it's in a trait, so it's not caught by the other machinery that would catch this.
[02:50:32] <sruggier> ok, that makes sense
[02:51:18] <sruggier> that implies that one can't declare static functions on a trait with a self lifetime, though
[02:51:46] <aatch> sruggier, you can, just not returning a type that contains a lifetime other than static.
[02:52:02] <aatch> sruggier, oh, that's what you said.
[02:52:03] <sruggier> sorry, yes, this is true, and I was about to correct myself
[02:52:18] *** Quits: maik (maik___@moz-1318C3AE.dip0.t-ipconnect.de) (Ping timeout)
[02:52:21] <sruggier> no, you understood me correctly
[02:52:36] <aatch> sruggier, my comprehension is failing today...
[02:52:47] <sruggier> but my rustc is still ICEing in that situation, even though it sounds like it shouldn't be
[02:53:48] <aatch> sruggier, so even returning some value type?
[02:53:53] <aatch> and no args?
[02:53:54] <sruggier> even void
[02:54:10] <sruggier> haven't tried returning a value type yet, though, to be fair
[02:54:15] *** Joins: maik (maik___@moz-1318C3AE.dip0.t-ipconnect.de)
[02:54:28] <sruggier> but it seems to me that a function that doesn't mention the lifetime shouldn't get bitten
[02:54:49] *** Quits: zz_kimundi (kimundi@moz-D6FCFCB5.dip0.t-ipconnect.de) (Ping timeout)
[02:55:13] <aatch> sruggier, I just tested this: `trait A<'self, T> { fn f() -> T; }` and it seems to work.
[02:55:58] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[02:55:59] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1478fb1be to 14af99b8d: 02http://git.io/N3iJvQ
[02:55:59] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[02:55:59] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[02:56:00] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/eInnuA
[02:56:00] <ghrust> 13rust/06auto 14521fb04 15Felix S. Klock II: compilation error regexp specific to rustc....
[02:56:00] <ghrust> 13rust/06auto 14fe7092d 15Felix S. Klock II: revisions to emacs compilation regexp, more readable and robust.
[02:56:00] <ghrust> 13rust/06auto 149d8897b 15Felix S. Klock II: extend file regexp to match files with embedded spaces.
[02:56:02] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[02:56:44] <sruggier> me too, but now try adding a function to that trait like so:
[02:56:44] <sruggier>     fn g(&mut self) -> &'self mut T;
[02:57:35] <Eridius> sruggier: presumably you want fn g(&'self mut self) -> &'self mut T
[02:57:47] *** Joins: zz_kimundi (kimundi@moz-78505BAE.dip0.t-ipconnect.de)
[02:57:59] <sruggier> yeah, I guess I would want that
[02:58:17] *** zz_kimundi is now known as kimundi
[02:58:20] <aatch> Eridius, doesn't work either and wouldn't be what you want anyway.
[02:58:24] <Eridius> no?
[02:58:33] <sruggier> ok, why wouldn't that be it?
[02:58:45] <aatch> Eridius, it would borrow self, mutably, for the lifetime of self
[02:58:54] <aatch> so you wouldn't be able to use it after that.
[02:59:19] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[02:59:29] <sruggier> actually, it would be better for me to ask if self lifetimes are documented anywhere? I'm playing it by ear so far
[03:00:06] <sruggier> aatch: if you have either one of those two functions, the program compiles, whereas with both, an ICE occurs
[03:00:17] <aatch> sruggier, yeah, I'm not sure why that happens...
[03:00:23] *** Joins: Axord (xord@moz-1B228827.lsanca.dsl-w.verizon.net)
[03:00:31] <sruggier> I guess it's a separate issue from 5518 then
[03:00:41] <aatch> sruggier, it's probably related.
[03:01:42] <sruggier> what's the convention in situations like this, then? comment on the existing issue?
[03:01:50] <aatch> sruggier, go for it.
[03:02:33] *** Joins: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net)
[03:04:05] *** Quits: Kruppe (user@moz-EE1E894A.home3.cgocable.net) (Ping timeout)
[03:04:10] <Eridius> rusti: bytes!()
[03:04:19] -rusti- failed to pastebin 6 lines of output
[03:05:09] <Eridius> huh, bytes!() works if you constrain its return type, but not otherwise
[03:05:25] <Eridius> I guess it's equivalent to &[] if you don't give it any args?
[03:05:49] <zeuxcg> is there any way to get qualified access for enums? (i.e. enum Format { Ok } -- use it as Format::Ok)
[03:06:20] <ChrisMorgan> Bytes turns a result into &[] (c.f. rustc --pretty expanded)
[03:07:36] <Eridius> neat, didn't know about --pretty expanded
[03:07:36] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[03:07:48] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[03:08:25] *** Quits: noam_ (noam@F6B530A7.720527A7.416762B.IP) (Ping timeout)
[03:08:37] <ChrisMorgan> It's can be handy when a macro isn't doing what you expect. Like the case of #[deriving(...)] deriving things twice inside a macro.
[03:08:39] *** Quits: maik (maik___@moz-1318C3AE.dip0.t-ipconnect.de) (Ping timeout)
[03:08:47] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[03:09:13] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[03:11:21] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[03:11:22] *** ChanServ sets mode: +o brson
[03:13:18] <lkuper> Eridius: just read backscroll from hours ago.  regarding your question about cycles in default methods, there is in fact a cycle in Haskell's Eq default methods (as I was just talking about with someone else on twitter).
[03:13:44] <lkuper> Eridius: Haskell just assumes that you'll implement one or the other of == or !=, and if you don't, it'll loop.
[03:14:00] <Eridius> lkuper: right, I thought Haskell cycled there. I think it also cycles in Monad, and some other spots
[03:14:14] <Eridius> lkuper: but I thought that it also told you if you didn't implement at least one of the cycling methods
[03:14:34] <lkuper> I think tjc is correct that that's not possible in general
[03:14:55] <lkuper> you could imagine special-casing it for certain popular ones, but...
[03:15:10] <strcat> rusti: 2
[03:15:10] -rusti- 2
[03:15:14] <Eridius> no, not in general (since traits can be mutually-referential, and you could also call out to external functions parameterized by your trait). But the simple case of directly calling other methods in your own trait, that could be caught
[03:15:19] <Eridius> i.e. Eq could be caught
[03:16:10] <sfackler> If I have a struct like extra::url::Url, is there any way to move a bunch of stuff out of it at once? I can't do it peicemeal since rustc complains about moving out of a partially moved value
[03:16:18] <lkuper> hm, I dunno.  it sounds to me kind of like the problem of Coq knowing when a recursive definition is decreasing.
[03:16:23] <Eridius> sfackler: use a let binding?
[03:16:33] <Eridius> sfackler: let Url{ foo: a, bar: b } = myUrl
[03:16:48] <sfackler> ah, sweet, I didn't know it could destructure structs as well
[03:16:56] <Eridius> a let-binding is an irrefutable pattern match
[03:18:15] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[03:19:31] <sruggier> Btw, I left my comment on issue 5518. Can anyone else confirm whether or not the given program is valid?
[03:20:29] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[03:20:43] <ChrisMorgan> Am I right that there is no method on ~str to insert a char or str anywhere but at the end of the string?
[03:22:17] *** Joins: obk (Mibbit@991D7890.9C346C7F.FAA4474F.IP)
[03:23:17] <Eridius> ChrisMorgan: I believe you are correct. Sounds like something that should be added though
[03:23:22] <Eridius> (as well as inserting a &str anywhere)
[03:23:32] <Eridius> also, removing a char/str from any point in the string
[03:24:28] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Ping timeout)
[03:24:45] <sfackler> seems like something a rope would be better suited for
[03:24:51] <aatch> ChrisMorgan, unshift_char
[03:25:22] <ChrisMorgan> aatch: I need in the middle.
[03:25:39] <Eridius> sfackler: if you're going to be routinely making lots of modifications, sure. But sometimes you just need to make a single change
[03:25:44] <aatch> ChrisMorgan, ah, in that case, no, I don't believe so.
[03:25:45] <ChrisMorgan> Sure, it can be done fairly easily, but it's not elegant.
[03:26:21] *** Quits: KindOne (KindOne@moz-115D0997.dynamic.ip.windstream.net) (Ping timeout)
[03:26:29] <ChrisMorgan> Matter of fact, this is because my automatic LWS collapsing is coming back to bite me in HTTP-date's asctime, with parts like "Sun Aug  6".
[03:26:41] <obk> Can someone explain what "cannot borrow const dereference of & pointer as immutable" means? It happens when I try to burrow an immutable & of a `&'self const Foo` field of a struct. That should be safe, no?
[03:26:49] <ChrisMorgan> So my quick hacky fix is to insert the second space back in. Not nice.
[03:27:02] <aatch> obk, nope, because const doesn't freeze
[03:27:03] <Eridius> &const still exists? I thought that had been removed by now
[03:27:25] <obk> Ah, my bad.
[03:27:25] <Eridius> ChrisMorgan: why do you bother with whitespace-collapsing to begin with? The spec says "may", not "must"
[03:27:47] <obk> So what is the way for a struct to contain a reference to something that will stay immutable even if the struct is mutable?
[03:27:59] <Eridius> obk: &foo is immutable
[03:28:10] <Eridius> the 'const' in '&const foo' does not mean what you think it means
[03:28:31] <ChrisMorgan> Eridius: processing is faster if you can collapse it; you only need to keep track of one extra byte. Without it, you must keep track of up to three bytes.
[03:28:47] <Eridius> ChrisMorgan: processing of what?
[03:28:51] <obk> struct Foo { bar: &Bar } - if I have a mutable Foo, then I would be able to mutate Bar as well, right? I want to prevent that.
[03:29:00] <ChrisMorgan> Eridius: header lines
[03:29:10] <Eridius> obk: no, you could mutate the slot 'bar', by putting a new &Bar in it, but you could not mutate the Bar that's being pointed-to
[03:29:26] <obk> Ah, I see.
[03:29:56] <Eridius> obk: & and @ are the two "barriers" of mutability. Mutability is inherited through structs and fields, but stops when it hits either of those two
[03:30:08] <Eridius> similarly, &mut and @mut allow you to mutate the value, even if the slot that holds the pointer is immutable
[03:30:19] *** Joins: KindOne (KindOne@moz-115D0997.dynamic.ip.windstream.net)
[03:30:51] <aatch> obk, &mut is complete mutablity, &const is "I can't change it, but it might change anyway" and & is complete immutability, while you have one you can be sure the contents will never change.
[03:31:24] <obk> I'm not sure I get "&const" then
[03:31:30] <Eridius> obk: that's why &const is going away
[03:31:32] <Eridius> it's a weird concept
[03:31:33] <aatch> obk, it's not that useful.
[03:31:46] <aatch> most people actually just need one or the other.
[03:31:47] <obk> It means someone else might change it? Sounds dangerous.
[03:31:55] <aatch> obk, exactly.
[03:32:02] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[03:32:05] <Eridius> although it did allow for copying overlapping memory within a slice, which is basically the only use I ever had for it, and even there the relevant methods have been de-const-ified so you can't actually use it for that anymore
[03:32:26] <Eridius> the reason being you needed a &mut destination and a &const source. Now it's a & source, which means you can't overlap it with the &mut destination
[03:32:28] <obk> Is there a way to say "I own this pointer, but if I am mutable, it still should stay immutable"? Sort of `~imm Foo`?
[03:32:48] <aatch> obk, well if you own it, it doesn't matter.
[03:32:50] <Eridius> obk: use Cell?
[03:33:05] <Eridius> well, that won't keep a pointer, it will keep a value
[03:33:06] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[03:33:19] <Eridius> obk: and yeah, if you're using ~ instead of &, then mutability is inherited
[03:33:43] <obk> aatch: not really. If I have a &mut self, then trying to burrow the (immutable) field in different places will fail because the compiler can't tell whether any sub-function with &mut self doesn't change it.
[03:33:48] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[03:34:20] <obk> If the compiler knew the field is immutable, I could freely borrow it across mutating methods/function calls.
[03:35:01] <aatch> obk, except you still couldn't, since if the struct as a whole is mutable, you can just replace the entire contents.
[03:35:39] <obk> Well, the idea is that you wouldn't be able to change this specific field - I guess this is too hard to specify.
[03:35:56] <obk> Or to enforce, anyway.
[03:39:03] <sfackler> Eridius: how can I destructure out of a struct into mutable variables? I can't seem to get it to work. let Foo { mut foo: my_foo } = thing, let Foo { foo: mut my_foo } = thing, and let mut Foo { foo: my_foo } = thing all don't work
[03:39:31] <Eridius> sfackler: known issue (or at least, (mut a, mut b) is a known issue, but presumably it's the same thing). Just use immutable, then re-bind into mutable after
[03:39:43] <Eridius> `let Foo { foo: my_foo } = thing; let mut my_foo = my_foo`
[03:39:48] <sfackler> thanks
[03:40:03] <Eridius> incidentally, if the variable you want to bind is named the same as the field, you can omit the variable name, e.g. `let Foo { foo } = thing`
[03:40:30] <Eridius> and I believe you can also use _ as a placeholder for "the rest of the fields" if you don't want everything, as in `let Foo { foo, _ } = thing`
[03:43:09] *** Quits: huseby (huseby@8F761026.B5EF4AF6.E96CA9D8.IP) (Quit: Leaving)
[03:44:11] *** Quits: Jesin (Jessin_@moz-67BAD9B.cc.lehigh.edu) (Input/output error)
[03:46:25] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[03:47:38] <Eridius> anyone here know about windows paths?
[03:48:55] * ChrisMorgan does
[03:49:23] <Eridius> I'm re-writing the path module and I want to make sure I get windows path support correct
[03:50:04] <Eridius> issue #7225 says that Path should be implemented using [u8], as Linux doesn't require that paths be in any particular encoding, only that they don't contain NUL. Does this issue affect Windows, or do Windows paths have to be made up of legitimate codepoints?
[03:50:07] * ChrisMorgan has had to deal with Windows paths and handling all the complex cases correctly quite extensively for things like the PortableApps.com Launcher
[03:50:57] <ChrisMorgan> I don't know what NTFS does for that, but internally it's UTF-16LE.
[03:51:48] <Eridius> if I have a UNC path of the form \\server\share\path, and I append \.., do I get \\server\share or would that be represented as \\server\share\?
[03:51:57] <Eridius> and if I add ..\.. instead, what do I get?
[03:52:44] <ChrisMorgan> \\server\share (Windows' convention does not include trailing slashes; support in command line applications for trailing backslashes is mildly patchy) is a root. ..\ should not go past it.
[03:53:02] <Eridius> ok good, that's helpful
[03:53:30] <Eridius> what about C:\foo? If I add .. do I get C: (since you said no trailing backslashes) or is it C:\ anyway? And I assume another .. doesn't go past it?
[03:53:41] <ChrisMorgan> That's the exception; at the root it is C:\.
[03:53:43] <Eridius> and consequently, that the only way to go to a different drive is to use an absolute path?
[03:53:49] <ChrisMorgan> Yes.
[03:53:59] <Eridius> is \\server\share\foo considered an absolute path?
[03:54:07] <ChrisMorgan> Yes.
[03:54:28] <Eridius> can / always be substituded for \ in paths? (with the slight variation that in a UNC path, the first two slashes must be the same variant, according to the current path module)?
[03:55:31] <Eridius> whoa, `C:` is a valid path that means "the path to the current dir, except on drive C`? That's wacky
[03:55:34] <ChrisMorgan> Support for / in command-line programs is patchy. \ is the standard thing to use. Not sure whether the actual API calls accept / or not.
[03:55:46] <Eridius> that's ok I can normalize / to \, I just need to know how to parse it
[03:55:51] <ChrisMorgan> C: actually had special meaning from the days of DOS, where a working directory was maintained for each drive, and without a leading backslash  C:x means "working directory in C: plus x"
[03:56:03] <ChrisMorgan> That's why C:\ while nothing else gets a trailing slash.
[03:56:17] <Eridius> oh I see, that makes more sense than how I interpreted what I'm reading right now
[03:56:23] <zeuxcg> Non-UNC APIs generally support /, it's usually a command-line parsing issue.
[03:56:32] <Eridius> is there any utility in being able to parse a path of the form `C:foo.txt` or is it ok to reject that?
[03:56:35] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Ping timeout)
[03:57:00] <ChrisMorgan> I do not know.
[03:57:12] <Eridius> what is the meaning of `\foo.txt`?
[03:57:26] <ChrisMorgan> From the root of the current drive.
[03:57:35] <Eridius> hrm, so that's absolute-ish. Ugh.
[03:57:44] <ChrisMorgan> "drive" including in its definition a UNC share root.
[03:58:06] <ChrisMorgan> Thus, roots are of the form C: or \\server\share.
[03:58:15] <Eridius> I guess I'll consider `\foo.txt` to be non-absolute
[03:59:13] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[03:59:45] *** Joins: erickt2 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[03:59:45] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Connection reset by peer)
[04:00:00] *** Quits: recrack (ymin@5AB4884B.FCC4549.14D5B978.IP) (Quit: Lost terminal)
[04:00:01] <Eridius> ChrisMorgan: thanks, this was very helpful. I wish I knew whether Windows allowed non-unicode-representable paths, but I guess it's safer to just apply the same rule that linux has
[04:00:18] <ChrisMorgan> Enjoy URLsâ€”they're a little worse. There you get four degrees of absoluteness: foo and ../foo; /foo; //example.com/; http://example.com/.
[04:00:20] *** Quits: erickt2 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[04:00:52] <Eridius> I don't think I've ever actually seen a //foo url in the wild (although every now and then someone discovers that it's a good way to avoid the mixed-content ssl warnings and posts something to that effect)
[04:00:58] *** Quits: obk (Mibbit@991D7890.9C346C7F.FAA4474F.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[04:01:05] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[04:01:05] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/eInnuA
[04:01:05] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[04:01:43] <klutzy> wikipedia uses // for transparent https/http support
[04:01:45] <sp3d> I saw one just today
[04:01:45] <ChrisMorgan> The drive-level working directory is interesting thing. e.g. when you start cmd as admin and are in C:\Windows\system32 and type `cd D:\backups\Documents and settings\ben\Downloads`, it *stays on C:*, only changing the working directory for D:. Then when, not noticing that, you do `del /s *`...
[04:02:02] <Eridius> oh wow
[04:02:03] *** Quits: mihneadb (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net) (Input/output error)
[04:02:16] <sp3d> cd /d is the worst
[04:02:37] * ChrisMorgan has since then aliased cd to cd /d, which *does* change the drive in such cases
[04:02:37] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[04:02:40] <Eridius> slash-as-flag-prefix looks so bizarre in my mind
[04:02:54] <klutzy> windows' native cd behavior is tricky
[04:03:45] <klutzy> many cross-platform applications fail due to the behavior
[04:03:47] <strcat> klutzy: also works for spdy ofc ;P
[04:03:57] <ChrisMorgan> Notable in cmd is that UNC paths aren't supported as the working directory; you must map it to a drive letter; pushd can do that, taking the last available letter and freeing it on quit or popd.
[04:04:00] <strcat> which is being standardized as http 2.0
[04:04:17] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[04:05:15] <Eridius> wat the heck? \\?\D:\very_long_path
[04:05:20] *** Joins: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net)
[04:05:21] <ChrisMorgan> Eridius: http://msdn.microsoft.com/en-us/library/windows/desktop/aa365247%28v=vs.85%29.aspx
[04:05:25] <ChrisMorgan> I was just about to point that out to you.
[04:05:33] <Eridius> yeah that's the page I have open
[04:05:58] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[04:05:58] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/dSIvhQ
[04:05:58] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[04:05:58] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[04:05:58] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/5bnWZQ
[04:05:58] <ghrust> 13rust/06auto 1479b921b 15Alex Crichton: Upgrade libuv to the current master + our patches...
[04:05:58] <ghrust> 13rust/06auto 1424f9ed3 15Alex Crichton: Implement process bindings to libuv...
[04:05:59] <ghrust> 13rust/06auto 14389b816 15Alex Crichton: Fix the libuv build system...
[04:06:01] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[04:06:03] <ChrisMorgan> Regular paths are limited to a length of 253-255 bytes. \\?\ lets you get 32KB.
[04:06:09] <Eridius> is \\?\D:\foo something that I'll need to be able to parse, or is that purely something that I'd need to be able to generate in order to hand off to winapi funcs?
[04:06:14] <ChrisMorgan> Yes.
[04:06:35] <ChrisMorgan> Someone may give it as a path, you need to be able to pass it along.
[04:06:51] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[04:06:51] *** ChanServ sets mode: +o dherman
[04:07:03] <klutzy> I saw it first at 7-zip code
[04:07:08] <Eridius> this says MAX_PATH is 260. If I have a 255-char "regular" path and someone pushes a 10-char component onto it, should I immediately shift the internal representation over to this \\?\... format?
[04:07:10] <klutzy> it first tries to open file with CreateFileA, then if it failed it tries to open with CreateFileW with \\?\ prefix
[04:07:39] <ChrisMorgan> Eridius: to be robust, never try passing a short-form path over 253 bytes.
[04:07:53] <Eridius> one of the design goals of this new API is that it holds the path in its canonical representation internally, and provides an .as_vec() that gives you the &[u8] slice to it without allocation
[04:07:58] <Eridius> 253? why?
[04:08:13] *** Joins: tcr_ (tcr@moz-DCCBF6BF.mycingular.net)
[04:08:38] <ChrisMorgan> There are a few functions that had slight bugs which prevented them from dealing with 255 or sometimes 254 bytes correctly. Can't remember the details.
[04:08:42] *** Quits: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net) (Ping timeout)
[04:08:44] *** Quits: eatkinson (eatkinson@moz-DACC1A92.dsl.bell.ca) (Quit: eatkinson)
[04:08:51] <Eridius> I see. good to know
[04:09:24] <mark_edward> is there an iterator thingy i could use to sort of generate a list, say by doing `|=`  to some initial state?
[04:09:47] <strcat> unfoldr?
[04:10:39] <ChrisMorgan> I have another anecdote to tell, this time about the 256 character path length. In year 7 or 8 I wanted to find out how deep I could go in my H: drive. I found the limit. The next day the IT administrator found me. The backup program couldn't cope with itâ€”you see, to *it*, it was D:\data\students\chrism\a\a\a\a\a...
[04:11:13] <mark_edward> strcat: also is std::iterator::*; imported by default?
[04:11:17] <strcat> no
[04:11:30] <mark_edward> ok thanks
[04:11:33] *** Joins: mib_mb1yai (Mibbit@moz-D5703459.fbx.proxad.net)
[04:11:53] *** Quits: mib_mb1yai (Mibbit@moz-D5703459.fbx.proxad.net) (Quit: http://www.mibbit.com ajax IRC Client)
[04:12:33] <Eridius> hrm, <>:"|?* are all reserved chars that can't occur in paths?
[04:12:54] <ChrisMorgan> Yes.
[04:13:02] <Eridius> erg. Should I enforce that here?
[04:13:21] <Eridius> i.e. should I prevent the creation of a WindowsPath that contains any of those anywhere?
[04:13:27] <ChrisMorgan> Probably.
[04:13:39] <strcat> how exactly does windows use UDF then?
[04:13:42] <Eridius> erg, ok. Windows path implementation is going to be more complicated than POSIX
[04:13:47] <strcat> http://en.wikipedia.org/wiki/Universal_Disk_Format
[04:13:51] <sp3d> at least some of the restrictions Windows puts on filenames are only in the "frontend" IIRC
[04:13:59] <sp3d> as far as allowed characters go
[04:13:59] <strcat> isn't it at least per filesystem?
[04:14:05] * strcat shrugs
[04:14:08] <Eridius> although this page actually does indicae that I can restrict allowed values to unicode characters
[04:14:25] <sp3d> ucs-2 internally?
[04:14:31] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[04:14:47] <Eridius> actually upon reading the first sentence of this section, I get the feeling that this is supposed to be "anything that obeys these rules will work on all windows filesystems everywhere"
[04:15:06] <Eridius> which suggests it should be a restriction on creation of files. But processing existing files? It doesn't guarantee that the filesystem won't be more lax
[04:15:43] <Eridius> or to put it another way, Microsoft wants these rules followed, but I don't know if I can assume that there's no way ever to get a filename that breaks the rules
[04:15:56] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[04:15:56] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 149252d23 to 14c0aadfd: 02http://git.io/N3iJvQ
[04:15:56] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[04:15:59] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[04:15:59] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/MraMCA
[04:15:59] <ghrust> 13rust/06auto 1479b921b 15Alex Crichton: Upgrade libuv to the current master + our patches...
[04:15:59] <ghrust> 13rust/06auto 1424f9ed3 15Alex Crichton: Implement process bindings to libuv...
[04:15:59] <ghrust> 13rust/06auto 14389b816 15Alex Crichton: Fix the libuv build system...
[04:16:01] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[04:16:05] <Eridius> to that end, I guess I'll stick with only restricting NUL
[04:16:55] *** Quits: sp3d (a@moz-6F12212B.fidnet.com) (Ping timeout)
[04:17:30] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[04:17:49] *** Quits: tcr_ (tcr@moz-DCCBF6BF.mycingular.net) (Client exited)
[04:20:08] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[04:20:26] <doy> i've tried using an ext2 filesystem driver for windows, and if there's a file on the drive that contains one of those invalid characters, you just can't interact with it at all
[04:20:34] <doy> every file operation of any sort just fails with an error
[04:20:37] <doy> it's pretty frustrating
[04:20:47] <doy> not sure how much of that is just the driver being dumb though
[04:21:36] *** Joins: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net)
[04:21:37] <mark_edward> strcat: i don't understand how to use Unfoldr. how do i get to the state?
[04:22:03] <Eridius> mark_edward: the state is passed to the closure
[04:22:35] *** Joins: noam (noam@F6B530A7.720527A7.416762B.IP)
[04:22:37] <mark_edward> right but what i want to do is iteratively build up the state and get bakc the finished result
[04:23:36] <Eridius> mark_edward: not quite sure what you mean. What does "iteratively build up the state" mean?
[04:23:59] <mark_edward> i want to get a vector of vectors of random bytes
[04:24:23] <mark_edward> i want to repeatedly call rng.gen_bytes(), and add each result vector to the main vector
[04:24:43] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[04:25:09] <Eridius> and are you going to use this vector of vectors while it's still being built?
[04:25:19] <Eridius> or are you just going to build it, then use it once it's finished?
[04:25:31] <mark_edward> the latter
[04:25:35] <Eridius> use a for loop
[04:25:46] <mark_edward> a for loop on what?
[04:25:55] <Eridius> on whatever you're using to control how many vectors you're adding?
[04:25:57] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[04:25:57] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/pOd1Hg
[04:25:57] <ghrust> 13rust/06auto 147354055 15Alex Crichton: Rewrite pass management with LLVM...
[04:25:57] <ghrust> 13rust/06auto 1435f975b 15bors: auto merge of #8700 : alexcrichton/rust/better-llvm, r=thestinger...
[04:25:58] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[04:26:08] *** Joins: Jesin (Jessin_@moz-67BAD9B.cc.lehigh.edu)
[04:26:11] <Eridius> if you want 10 sub-vectors, `for _ in range(0, 10) { v.push(rng.gen_bytes()) }`
[04:26:25] <mark_edward> Eridius: i see
[04:27:08] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[04:27:56] <Eridius> fwiw, the state field of the Unfoldr struct is public, so if you did want an Unfoldr-based approach you could just pull it out when you're done, but I don't think that makes sense here (what would you be yielding on each call to .next()?)
[04:28:46] *** Joins: eatkinson (eatkinson@moz-DACC1A92.dsl.bell.ca)
[04:30:15] *** Joins: sp3d (a@moz-6F12212B.fidnet.com)
[04:33:09] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[04:33:30] <mark_edward> i see
[04:33:55] <mark_edward> strcat: for the benchmarking thing, i remeber there being someway to indicate bytes per iter, to help demonstrate throughput
[04:34:33] *** Quits: mixi (mixi@moz-DBD8904A.org) (Ping timeout)
[04:34:49] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[04:34:52] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[04:36:21] <Eridius> hrm, I think that WindowsPath will need some sort of .to_pwchar() function for actual interaction with the windows APIs
[04:36:51] <Eridius> however, the current path module doesn't provide that, so I'm inclined to leave that to someone who can actually test windows APIs
[04:37:52] <Eridius> I'm also reconsidering whether I should restrict WindowsPaths to valid chars as defined by that doc, instead of allowing everything but NUL
[04:38:05] <strcat> mark_edward: bh.bytes = foo
[04:38:16] <mark_edward> ah thanks
[04:39:08] <sruggier> any reason why mark_edward can't just use vec::from_fn?
[04:39:42] <mark_edward> sruggier: that's exactly it! darn i forgot about that...
[04:42:28] <sruggier> sorry, I'm so new here that I was scared to suggest it, for fear of having overlooked something obvious :)
[04:42:58] <olsonjeffery> acrichto: nice! two PRs from you in a row.
[04:43:08] <acrichto> none of them merged though :(
[04:43:10] <acrichto> so many failures
[04:43:15] <olsonjeffery> I Want To Believe
[04:43:32] <acrichto> I think the llvm pass management one will actually land this time
[04:43:39] *** Quits: ryeguy (ryeguy@moz-3CE3DF43.lightspeed.livnmi.sbcglobal.net) (Quit: )
[04:44:44] <olsonjeffery> the libuv submodule gets updated with 8645, right?
[04:45:06] <olsonjeffery> curious if you just applied your PR to joyent/libuv atop a local repo
[04:45:28] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[04:45:29] <olsonjeffery> i just want to use the newer libuv api for stat calls, heh
[04:45:41] <acrichto> yes
[04:45:55] <acrichto> it's not exactly libuv, but it's libuv + a makefile tweak + a patch for a libuv issue
[04:46:01] <mark_edward> My keccak impl is a 370 cycles/byte if my math is correct
[04:46:27] <mark_edward> but the reference page gives 4.8 and 6.9 :\
[04:47:58] <mark_edward> need optimizing and parallelizing...
[04:49:55] <Eridius> wat. \\?\D:\foo\..\. is a perfectly valid normalized path
[04:50:04] <Eridius> apparently \\?\ turns off the processing of .. and .
[04:50:56] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[04:51:22] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[04:53:31] <mark_edward> is there any SIMD available yet?
[04:54:27] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[04:54:35] *** Quits: sammykim (Mibbit@B4104EBB.3CC170B1.1E14B209.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[04:54:55] *** Joins: sammykim (Mibbit@B4104EBB.3CC170B1.1E14B209.IP)
[04:55:02] *** Parts: sammykim (Mibbit@B4104EBB.3CC170B1.1E14B209.IP) ()
[04:55:22] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[04:55:34] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[04:57:19] *** Quits: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca) (Connection reset by peer)
[04:57:35] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Ping timeout)
[04:58:15] *** Joins: unfoldl (quassel@A7FA33CE.2EBBCC1F.9510F13D.IP)
[05:03:31] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[05:03:35] <unfoldl> What would be the best way to do something like https://github.com/mruby/mruby/blob/master/src/opcode.h#L13-L23 in Rust? Basically, read/write the specific bit ranges like 0..8, 9..17, 18..23, 24..31 of a 32 bit integer?
[05:03:54] <olsonjeffery> huh.
[05:04:03] <olsonjeffery> so &foo will coerce to *foo automagically
[05:04:08] <olsonjeffery> but not &mut foo
[05:04:52] <olsonjeffery> is there a reason for this, or is an oversight? &mut seems to be a better way to say "i expect this pointer im passing to a C function to probably cause side effects in the foo value i allocated here on the stack...
[05:04:57] <olsonjeffery> "
[05:05:11] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[05:05:46] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[05:06:09] <Eridius> oldmanstan: probably an oversight? Although I know there's been talk of removing *mut entirely
[05:07:06] <strcat> unfoldl: you can do it the same way
[05:07:45] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[05:11:17] *** Parts: sruggier (sruggier@moz-F1ED47A9.cpe.teksavvy.com) ()
[05:12:20] *** Joins: mihneadb (mihneadb@moz-329F29A3.lightspeed.sntcca.sbcglobal.net)
[05:17:18] *** Quits: choi (choi@EFB49084.2553AF4E.6FE028F4.IP) (Ping timeout)
[05:23:00] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Connection reset by peer)
[05:23:18] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[05:23:29] *** Quits: Earnestly (earnest@B0BDF733.8FDE20A.5411983D.IP) (Ping timeout)
[05:26:06] *** Quits: Jesin (Jessin_@moz-67BAD9B.cc.lehigh.edu) (Ping timeout)
[05:28:00] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[05:28:21] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[05:29:14] *** Joins: victorporof (victorporo@moz-BAE8D951.pck.nerim.net)
[05:30:09] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[05:30:12] *** Joins: Jesin (Jessin_@moz-67BAD9B.cc.lehigh.edu)
[05:31:18] <sfackler> is there any way to check if the task is currently failing e.g. in a drop impl?
[05:31:32] <strcat> finally, the new LLVM pass stuff landed
[05:33:12] <olsonjeffery> \o/
[05:33:38] *** Quits: Jesin (Jessin_@moz-67BAD9B.cc.lehigh.edu) (Ping timeout)
[05:34:17] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[05:34:20] <sfackler> ah, nvm
[05:34:38] *** Joins: riley (riley@moz-E40BCEED.hsd1.ca.comcast.net)
[05:35:54] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[05:35:54] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/pOd1Hg
[05:35:54] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[05:35:57] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[05:36:17] *** Joins: Jesin (Jessin_@moz-67BAD9B.cc.lehigh.edu)
[05:36:45] * olsonjeffery keeps fingers crossed for #8645
[05:37:00] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[05:40:52] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[05:40:53] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/xZ5BNA
[05:40:53] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[05:40:54] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[05:40:54] <ghrust> 01[13rust01] 15bors pushed 6 new commits to 06auto: 02http://git.io/6ej7Ow
[05:40:54] <ghrust> 13rust/06auto 1479b921b 15Alex Crichton: Upgrade libuv to the current master + our patches...
[05:40:54] <ghrust> 13rust/06auto 1424f9ed3 15Alex Crichton: Implement process bindings to libuv...
[05:40:55] <ghrust> 13rust/06auto 14389b816 15Alex Crichton: Fix the libuv build system...
[05:40:57] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[05:43:06] <mark_edward> is anyone here good at optimizing Rust code...
[05:45:55] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[05:45:55] *** ChanServ sets mode: +o dherman
[05:46:26] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Ping timeout)
[05:48:04] *** Quits: richard|s (mindginati@moz-C1729134.dsl.clear.net.nz) (Quit: brb)
[05:49:55] *** Quits: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net) (Client exited)
[05:50:44] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[05:50:53] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[05:50:53] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14fde27b6 to 1435f975b: 02http://git.io/N3iJvQ
[05:50:53] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[05:50:55] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[05:50:55] <ghrust> 01[13rust01] 15bors pushed 6 new commits to 06auto: 02http://git.io/h2WhOw
[05:50:55] <ghrust> 13rust/06auto 1479b921b 15Alex Crichton: Upgrade libuv to the current master + our patches...
[05:50:55] <ghrust> 13rust/06auto 1424f9ed3 15Alex Crichton: Implement process bindings to libuv...
[05:50:55] <ghrust> 13rust/06auto 14389b816 15Alex Crichton: Fix the libuv build system...
[05:50:57] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[05:54:09] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[05:59:22] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[06:05:01] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[06:05:11] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[06:05:20] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[06:05:55] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[06:05:55] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14c02971f to 1435f975b: 02http://git.io/N3iJvQ
[06:05:55] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[06:05:57] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[06:05:58] <ghrust> 01[13rust01] 15bors pushed 6 new commits to 06auto: 02http://git.io/sWCm8Q
[06:05:58] <ghrust> 13rust/06auto 1479b921b 15Alex Crichton: Upgrade libuv to the current master + our patches...
[06:05:58] <ghrust> 13rust/06auto 1424f9ed3 15Alex Crichton: Implement process bindings to libuv...
[06:05:58] <ghrust> 13rust/06auto 14389b816 15Alex Crichton: Fix the libuv build system...
[06:06:00] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[06:06:51] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[06:09:22] *** Joins: mixi (mixi@moz-DBD8904A.org)
[06:11:49] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Ping timeout)
[06:13:56] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[06:14:11] *** Joins: tikue (tkuehn@moz-424BC304.hsd1.pa.comcast.net)
[06:14:48] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[06:14:57] *** Parts: Sonarpulse (user@moz-A783576F.dsl.pltn13.pacbell.net) (ERC Version 5.3 (IRC client for Emacs))
[06:15:02] *** Joins: Sonarpulse (user@moz-A783576F.dsl.pltn13.pacbell.net)
[06:16:34] <Sonarpulse> I am thinking of rewriting a C++ OpenGL game in rust
[06:16:44] <bjz> yep?
[06:16:48] <Sonarpulse> the game is currently compiled with autotools
[06:17:09] <bjz> Sonarpulse: I have an opengl function loader, or there is also opengl es bindings
[06:17:14] <Sonarpulse> great
[06:17:24] <bjz> which would you need?
[06:17:34] <bjz> gl-rs
[06:17:34] <Sonarpulse> right now I am thinking build system
[06:17:42] <bjz> oh ok
[06:17:49] <Sonarpulse> I am hoping the game is currently more C than C++
[06:17:50] <bjz> there is rustpkg
[06:17:54] <Sonarpulse> I saw that
[06:18:06] <bjz> but there isn't much documentation yet
[06:18:11] <Sonarpulse> but not sure on what is the most ideomatic way to build both C and rust together
[06:18:20] <bjz> me neither
[06:18:25] <Sonarpulse> ok
[06:18:29] <Sonarpulse> my hope is that the game doesn't use too many fancy C++ stuff
[06:18:30] <bjz> dbaupp: know much about rustpckg?
[06:18:38] <Sonarpulse> mainly C
[06:18:46] <Sonarpulse> so I can convert file by file
[06:18:48] <bjz> Sonarpulse: most of us use makefiles in the interim
[06:18:52] <Sonarpulse> and then make more ideomatic rust
[06:18:53] <Sonarpulse> ok
[06:19:20] <olsonjeffery> acrichto: C:\bot\slave\auto-win-32-nopt-c\build\src\libstd\run.rs:16:4: 16:8 error: unused import [-D unused-imports (default)]
[06:19:23] <olsonjeffery> C:\bot\slave\auto-win-32-nopt-c\build\src\libstd\run.rs:16 use libc;
[06:19:25] <olsonjeffery> groan.
[06:19:28] <acrichto> yeah :(
[06:19:35] <acrichto> 14th time's the charm!
[06:19:40] <Sonarpulse> As should seem fairly obvious I haven't actually used rust before ;)
[06:19:42] * acrichto not actually counting
[06:20:01] *** Quits: eskatrem (user@moz-D2023B8B.dyn.user.ono.com) (Client exited)
[06:20:04] <olsonjeffery> well, im gonna crash. here's to hoping for good news in the morning. night.
[06:20:05] <Sonarpulse> but done enough haskell and C, and read the docs, so I feel good
[06:20:07] <Sonarpulse> there
[06:20:11] <bjz> Sonarpulse: https://github.com/bjz/sax-rs/blob/master/src/ffi.rs#L136
[06:20:26] <bjz> http://static.rust-lang.org/doc/tutorial-ffi.html
[06:20:53] <bjz> Sonarpulse: yeah, if you have done both of those then that's a perfect background :)
[06:21:07] <Sonarpulse> great!
[06:21:17] *** Quits: eatkinson (eatkinson@moz-DACC1A92.dsl.bell.ca) (Quit: eatkinson)
[06:22:39] <bjz> Sonarpulse: it will never be as elegant as haskell, or as good at function composition as haskell
[06:22:48] <bjz> just to warn you
[06:23:14] <bjz> but I think the benefiets outweigh all that
[06:24:02] <Sonarpulse> My dream would be really good and automatic FFI between GHC and RustC
[06:24:31] <Sonarpulse> I saw PCWalton's blog post about moving GC into a library for Rust
[06:26:06] <bjz> mm
[06:26:21] <bjz> that would be cool
[06:27:03] <bjz> I think it's better to think of Rust as a comprehensive DSL for high performance, concurrent systems programming
[06:27:31] <bjz> if that makes sense
[06:28:08] <Sonarpulse> Sure
[06:28:40] <Sonarpulse> I just like making GC not because I hate GC, but because then rust can completely replace C/C++
[06:29:04] <Sonarpulse> in scope
[06:29:20] <Sonarpulse> (I release actually rewriting everything is not feasable anytime soon)
[06:30:16] <Sonarpulse> It also would seperate its "domain" from haskell's a bit, with works well with my FFI vision
[06:30:40] <bjz> mm
[06:31:57] <bjz> Sonarpulse: GC certainly has its place, it really does help making composition simpler. But it's important to still be able to program safely without it
[06:33:48] <bjz> Sonarpulse: so you plan to use rust for high performance stuff below haskell?
[06:34:08] <Sonarpulse> Well for this project, I think I would go rust only, at least initially
[06:34:45] <bjz> yep
[06:34:50] <Sonarpulse> long term, yes, as you say rust + haskell.
[06:34:56] <bjz> mm, nice
[06:35:09] <Sonarpulse> GHC has an experimental per-thread GC
[06:35:19] <elij> ss
[06:35:22] <bjz> Sonarpulse: https://github.com/bjz/glfw-rs
[06:35:34] <bjz> Sonarpulse: https://github.com/bjz/gl-rs
[06:35:36] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[06:35:37] <elij> ssh
[06:35:49] <bjz> elij: wrong window ;)
[06:35:55] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[06:35:55] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 142018b14 to 1435f975b: 02http://git.io/N3iJvQ
[06:35:55] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[06:35:56] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[06:35:56] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/-LRORQ
[06:35:56] <ghrust> 13rust/06auto 14a903f74 15Vadim Chugunov: Since we assume that GDB output is UTF-8, make sure it is so on all platforms....
[06:35:56] <ghrust> 13rust/06auto 147f79b52 15Vadim Chugunov: Un-disabled debug info tests on Windows.
[06:35:57] <ghrust> 13rust/06auto 14604ab94 15bors: auto merge of #8757 : vadimcn/rust/debug-info-tests, r=brson...
[06:35:59] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[06:36:59] <Sonarpulse> If rust did have GC as an optional library, it would be interesting to have both the rust and haskell using the same GC
[06:37:12] <Sonarpulse> Thanks for the openGL bindings!
[06:37:14] <elij> ssh
[06:37:16] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[06:37:36] <Sonarpulse> the game is https://github.com/yvt/openspades , btw
[06:37:37] <bjz> Sonarpulse: if you only need ES, I would reccomend using those
[06:37:53] <bjz> Sonarpulse: sorry, the direct es bindings
[06:38:14] <bjz> Sonarpulse: gl-rs needs to be slimmed down to 4.3 core by default
[06:38:25] <Sonarpulse> truth is, I know very little about game dev or openGL
[06:38:26] <bjz> Sonarpulse: but that is planned
[06:38:31] <bjz> heh
[06:38:36] <Sonarpulse> but I have often learned things by porting things
[06:38:40] <bjz> only one way to learn
[06:38:42] <bjz> yeah
[06:39:02] <bjz> Sonarpulse: that's how I'm learning linear algebra
[06:39:12] <bjz> https://github.com/bjz/cgmath-rs
[06:39:13] <bjz> :P
[06:39:34] <bjz> well, not porting
[06:39:42] <bjz> writing from scratch
[06:39:44] <Sonarpulse> Nice! I fine typeclass and abstract algebra work well nicely
[06:39:49] <bjz> yeah
[06:39:54] <bjz> better than templates
[06:40:23] <zeuxcg> bjz: yeah, a config for the set of needed APIs would be much appreciated in gl-rs
[06:40:48] <bjz> zeuxcg: I think h3r3tic said he might be able to help
[06:40:49] <Sonarpulse> Normally people talk of math helping them learn CS, but Haskell definitely helped me grapple the basics of abstrac algebra
[06:41:06] <bjz> zeuxcg: but if you feel you can, go ahead
[06:41:32] <bjz> zeuxcg: tbh I'm bringing my focus back to maths
[06:41:52] <bjz> zeuxcg: and finally actually *using* opengl after all this time
[06:42:06] <bjz> I'd appreaciate some help with refining gl-rs
[06:42:16] *** Quits: tikue (tkuehn@moz-424BC304.hsd1.pa.comcast.net) (Quit: tikue)
[06:42:28] <zeuxcg> bjz: yeah, I'm currently focused on getting something interesting on screen, so don't want to spend time on this right now...
[06:42:37] <bjz> yeah, no worries
[06:42:42] <bjz> at least it works
[06:42:50] <bjz> will get around to it eventually
[06:43:02] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[06:43:12] <bjz> zeuxcg: the new redesign seems to be working really well
[06:43:18] <bjz> of the maths lib
[06:43:36] <bjz> maik says it seems to be easier to read
[06:44:33] *** Quits: valenting (Thunderbir@8758046C.84D5EFD5.FB866788.IP) (Connection reset by peer)
[06:44:34] *** Joins: valenting1 (Thunderbir@8758046C.84D5EFD5.FB866788.IP)
[06:52:15] *** Quits: jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Quit: zzz)
[06:55:33] *** Quits: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net) (Quit: jorendorff)
[06:58:06] <zeuxcg> huh
[06:58:13] *** Quits: ross (ross@moz-8A84103E.br.br.cox.net) (Quit: )
[06:58:17] <zeuxcg> (null() + 8): *GLvoid => null()
[06:58:31] <zeuxcg> obvious in retrospect, but confusing
[06:58:42] <zeuxcg> as in, how did it even compile :-D
[06:59:58] <bjz> ?
[07:00:20] <bjz> you can do pointer arithmetic
[07:00:43] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[07:00:44] <bjz> not sure what you mean by that statement though
[07:00:49] *** Joins: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP)
[07:01:23] <zeuxcg> yeah, but you should not be able to do pointer arithmetic with void type
[07:01:37] *** Joins: recrack (ymin@5AB4884B.FCC4549.14D5B978.IP)
[07:01:48] <zeuxcg> I needed a pointer with the value 8 instead of 0.
[07:02:18] <zeuxcg> used transmute() instead, not sure if it's a good idea though
[07:02:42] <Blub\w> what kind of pointer?
[07:03:48] <strcat> btw I think those Add/Sub methods on * will go away
[07:03:55] <strcat> because they don't work with the fast pointer arith
[07:04:04] <strcat> they only work with non-inbounds GEP, which is silly
[07:04:26] <zeuxcg> rusti: use std; let x: *std::libc::types::common::c95::c_void = std::ptr::null(); printf!("%?", x + 8);
[07:04:28] -rusti- (0x0 as *())()
[07:04:38] <zeuxcg> so yeah, that was confusing.
[07:04:59] <zeuxcg> the pointer type was implicit in my code since I passed null() + 8 to the function that received *void.
[07:06:09] <Blub\w> try unsafe { 0u as *std::.....::c_void }
[07:06:12] <Blub\w> err 8u
[07:08:27] <zeuxcg> yeah, that's probably better than transmute since transmute says that size is to be the same
[07:08:43] *** Quits: valenting1 (Thunderbir@8758046C.84D5EFD5.FB866788.IP) (Ping timeout)
[07:08:43] <zeuxcg> should I file a bug that says that my code above should not compile?
[07:08:49] <Blub\w> oh, the unsafe{} might be unnecessary even
[07:08:50] *** Quits: riley (riley@moz-E40BCEED.hsd1.ca.comcast.net) (Client exited)
[07:11:48] <nsf> pub fn null<T>() -> *T { 0 as *T }
[07:11:56] <nsf> that's how ptr::null() looks like
[07:12:02] <nsf> so I guess you can just do 8 as *T
[07:14:12] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[07:15:30] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[07:17:10] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[07:18:29] *** flaper87|afk is now known as flaper87
[07:19:48] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[07:21:04] *** Joins: sebcrozet (sebcrozet@moz-2517AE39.w80-13.abo.wanadoo.fr)
[07:21:14] *** Joins: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net)
[07:21:45] *** Joins: doomlord (doomlod@moz-13E69BC8.range86-180.btcentralplus.com)
[07:22:00] <Eridius> zeuxcg: the code you pasted should certainly compile. The problem is void is a zero-sized type, and pointer math works on multiples of the type size
[07:22:06] <Eridius> so you tried to add 8*0
[07:22:24] <Eridius> rusti: let x: *int = std:ptr::null(); x+1
[07:22:25] -rusti- <anon>:5:26: 5:27 error: expected `;` but found `:`
[07:22:25] -rusti- <anon>:5          let x: *int = std:ptr::null(); x+1
[07:22:25] -rusti-                                    ^
[07:22:25] -rusti- application terminated with error code 101
[07:22:29] <Eridius> rusti: let x: *int = std::ptr::null(); x+1
[07:22:30] -rusti- (0x8 as *())
[07:22:42] <Eridius> rusti: let x: *i32 = std::ptr::null(); x+1
[07:22:43] -rusti- (0x4 as *())
[07:24:01] <zeuxcg> Eridius: I understand why the result is zero
[07:24:12] <zeuxcg> Eridius: what I don't understand is why it should compile.
[07:24:39] <zeuxcg> Eridius: or rather it might be more convenient in the compiler to not have it as a special case, but is it ever a good idea to allow that?
[07:24:51] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[07:24:53] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[07:28:37] *** Joins: ofeldt (ofeldt@moz-D77116F7.dip0.t-ipconnect.de)
[07:29:43] *** Quits: ofeldt- (ofeldt@moz-2353770A.dip0.t-ipconnect.de) (Ping timeout)
[07:29:43] *** Joins: squiddy (squiddy@moz-E783773E.adsl.alicedsl.de)
[07:30:57] *** Joins: Ms2ger (Ms2ger@moz-549ABB0C.adsl-dyn.isp.belgacom.be)
[07:34:26] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[07:34:45] *** Quits: victorporof (victorporo@moz-BAE8D951.pck.nerim.net) (Quit: victorporof)
[07:34:47] <Ms2ger> Offered without comment: https://twitter.com/Steve_Yegge/status/372156022913122304
[07:35:56] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[07:37:36] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[07:38:10] <Eridius> zeuxcg: why wouldn't it compile?
[07:38:19] <Eridius> zeuxcg: it falls out of the general definition for Add on *T
[07:38:29] <Eridius> I'm not sure how you could even prevent it from compiling
[07:38:58] <zeuxcg> as a random example, it does not compile in C++ - for a good reason.
[07:40:58] <Eridius> C++ doesn't implement pointer addition in the library, it implements it in the compiler
[07:41:04] <Eridius> but it's implemented in Rust in std::ptr
[07:44:02] *** Joins: jviereck (Adium@moz-1EC7271F.dip0.t-ipconnect.de)
[07:45:14] <heftig> Eridius: shouldn't it print (0x4 as *i32)?
[07:45:26] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[07:45:53] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[07:45:53] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/-LRORQ
[07:45:53] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[07:47:36] <Eridius> heftig: which one?
[07:47:44] <heftig> rusti: let x: *i32 = std::ptr::null(); x+1
[07:47:45] -rusti- (0x4 as *())
[07:48:01] <Eridius> and lo, it does
[07:48:11] <Eridius> oh I see
[07:48:16] *** Quits: kimundi (kimundi@moz-78505BAE.dip0.t-ipconnect.de) (Ping timeout)
[07:48:17] <Eridius> you meant the *()
[07:48:21] <heftig> yes.
[07:48:21] <Eridius> that's just an artifact of fmt!()
[07:48:28] <Eridius> it prints all *T pointers as *()
[07:48:51] <heftig> doesn't seem correct, though
[07:49:02] <Eridius> well any *T pointer can be cast to any other *T pointer
[07:49:19] <heftig> yeah, but as you demonstrated earlier, they don't behave the same
[07:49:29] <Eridius> right, but the type itself is correct. it's just fmt!() that's lacking
[07:49:48] <Eridius> rusti: let x: *i32 = std::ptr::null(); format!("{}", x+1)
[07:49:49] -rusti- ~"0x4"
[07:49:50] <Eridius> heh
[07:50:10] <nsf> rusti: let x: *i32 = std::ptr::null(); format!("{:?}", x+1)
[07:50:11] -rusti- ~"(0x4 as *())"
[07:50:16] <nsf> ouch
[07:50:29] <nsf> :D
[07:50:34] <strcat> it's kind of odd how that's implemented
[07:50:37] <Eridius> does the ? modifier just trigger the same code fmt!() uses, or is it a reimplementation?
[07:50:42] <strcat> in that... I don't think it's fixable
[07:50:52] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[07:50:52] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/WWfS1g
[07:50:52] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[07:50:53] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[07:50:53] <ghrust> 01[13rust01] 15bors pushed 6 new commits to 06auto: 02http://git.io/mRfBTw
[07:50:53] <ghrust> 13rust/06auto 1479b921b 15Alex Crichton: Upgrade libuv to the current master + our patches...
[07:50:53] <ghrust> 13rust/06auto 1424f9ed3 15Alex Crichton: Implement process bindings to libuv...
[07:50:54] <ghrust> 13rust/06auto 14389b816 15Alex Crichton: Fix the libuv build system...
[07:50:55] <strcat> without redoing repr
[07:50:56] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[07:51:25] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.1)
[07:51:27] *** Joins: leonvv (leonvv@moz-7D83A5F1.ip.telfort.nl)
[07:53:03] <Eridius> rusti: std::sys::log_str(std::ptr::null() as *i32)
[07:53:05] -rusti- <anon>:5:27: 5:51 error: mismatched types: expected `&<V4>` but found `*i32` (expected &-ptr but found *-ptr)
[07:53:05] -rusti- <anon>:5          std::sys::log_str(std::ptr::null() as *i32)
[07:53:06] -rusti-                                     ^~~~~~~~~~~~~~~~~~~~~~~~
[07:53:06] -rusti- error: aborting due to previous error
[07:53:06] -rusti- application terminated with error code 101
[07:53:23] <Eridius> rusti: let x: *i32 = std::ptr::null(); std::sys::log_str(&x)
[07:53:24] -rusti- ~"(0x0 as *())"
[07:53:25] *** Quits: mihneadb (mihneadb@moz-329F29A3.lightspeed.sntcca.sbcglobal.net) (Input/output error)
[07:54:47] *** Joins: zz_kimundi (kimundi@moz-C66626B7.dip0.t-ipconnect.de)
[07:54:56] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.1)
[07:54:58] <Eridius> rusti: std::unstable::intrinsics::get_tydesc::<int>()
[07:54:59] -rusti- <anon>:5:9: 6:5 error: call to unsafe function requires unsafe function or block
[07:54:59] -rusti- <anon>:5          std::unstable::intrinsics::get_tydesc::<int>()
[07:54:59] -rusti- <anon>:6     };
[07:54:59] -rusti- error: aborting due to previous error
[07:54:59] -rusti- application terminated with error code 101
[07:55:04] <Eridius> rusti: unsafe { std::unstable::intrinsics::get_tydesc::<int>() }
[07:55:05] -rusti- (0x60b020 as *())
[07:55:16] *** zz_kimundi is now known as kimundi
[07:58:09] *** Joins: victorporof (victorporo@DA4ABEAF.1DE10CA8.D8E68FF6.IP)
[07:59:56] *** Joins: squiddy_ (squiddy@moz-13793045.adsl.alicedsl.de)
[08:00:53] *** Quits: squiddy (squiddy@moz-E783773E.adsl.alicedsl.de) (Ping timeout)
[08:02:06] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Ping timeout)
[08:03:39] *** Quits: barosl (barosl@3DE683B6.E551553C.7544CABF.IP) (Ping timeout)
[08:04:23] *** Joins: barosl (barosl@3DE683B6.E551553C.7544CABF.IP)
[08:05:02] <dbaupp> bjz: I know a little (as in, I have a working rustpkg program)
[08:06:13] *** Quits: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net) (Client exited)
[08:07:05] *** Quits: Jesin (Jessin_@moz-67BAD9B.cc.lehigh.edu) (Quit: Leaving)
[08:07:09] *** Joins: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net)
[08:11:03] *** Quits: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net) (Client exited)
[08:14:29] *** Joins: Palmik (palmik@moz-CC484FDD.tmcz.cz)
[08:21:06] *** Joins: CarpNet (ac@moz-FD24B77.sohonet.co.uk)
[08:22:22] *** Quits: KindOne (KindOne@moz-115D0997.dynamic.ip.windstream.net) (Ping timeout)
[08:26:20] *** Joins: KindOne (KindOne@moz-ED3F94B.dynamic.ip.windstream.net)
[08:28:31] *** Joins: gavinb (gavinb@E456AACA.6E0C717F.1AE6826D.IP)
[08:32:46] <gavinb> When trying to parse some code and accumulate the generated results, I'm getting "error: cannot move out of captured outer variable" http://pastebin.com/V6ztmt5d
[08:33:32] *** Quits: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[08:34:17] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[08:34:22] <gavinb> All it's trying to do is accumulate some data inside the closure. I can't see why this would be an error. Googling the message showed some discussion about for loops and capturing, but that doesn't seem relevant here as this is an iterator with a closure.
[08:35:36] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[08:36:17] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[08:37:57] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[08:38:57] *** Joins: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP)
[08:40:06] <dbaupp> gavinb: what's the error message?
[08:40:25] <dbaupp> *where's the error message?
[08:40:58] <dbaupp> gavinb: I ave a feeling that using bytecode.push(emit_opcode(opcode)) rather than vec::append will be (1) cleaner, and (2) not cause the error.
[08:41:00] <gavinb> dbaupp: on the usage of 'bytecode' as the first param of vec::append
[08:43:06] <gavinb> dbaupp hm, well the error went away when using 'push'...
[08:45:09] *** Joins: donri (dag@moz-9BB61102.tbcn.telia.com)
[08:45:56] <gavinb> The description for vdc::append says it returns the vector for use again, so why can't it 'move' out of the loop?
[08:49:35] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[08:50:59] <gavinb> actually, I lied about push - it stopped complaining about it temporarily due to some println!() weirdness, but I realise I actually need append because it is another list I need to add.
[08:51:42] <gavinb> But now println!() is giving compiler errors complaining about "error: argument never used" on arguments that _are_ used.
[08:52:19] <gavinb> This code was working before; I just updated the compiler to master today...
[08:54:29] <acrichto> gavinb: oh do you have an example? I added that recently and perhaps didn't test it well enough
[08:54:56] <gavinb> acrichto: sure, hang on a tick
[08:55:00] <acrichto> gavinb: also println!() uses format!() syntax, not fmt!() syntax
[08:55:36] <acrichto> rusti: println!("hello")
[08:55:37] -rusti- hello
[08:55:37] -rusti- ()
[08:55:38] <gavinb> acrichto: I've discovered that %? doesn't seem to work any more, but %s should, yes?
[08:55:58] <acrichto> rusti: println!("{} {0:s} {0:?}", "test")
[08:55:58] -rusti- <anon>:5:36: 5:42 error: argument redeclared with type `?` when it was previously `s`
[08:55:58] -rusti- <anon>:5          println!("{} {0:s} {0:?}", "test")
[08:55:58] -rusti-                                              ^~~~~~
[08:55:59] -rusti- error: aborting due to previous error
[08:55:59] -rusti- application terminated with error code 101
[08:56:10] <acrichto> rusti: println!("{} {0:s} {:?}", "test", "test")
[08:56:11] -rusti- test test "test"
[08:56:11] -rusti- ()
[08:56:49] <acrichto> gavinb: check out the comment at the top of libstd/fmt/mod.rs for an overview of the syntax
[08:56:50] <gavinb> acrichto: in some file I/O code:     if source_reader_result.is_err() {        println!("%s", source_reader_result.unwrap_err());
[08:57:00] <acrichto> change %s to {}
[08:57:13] <acrichto> or just remove them altogether
[08:57:14] <gavinb> acrichto: oh, it's _that_ different! :)
[08:57:32] <acrichto> yeah it changed a fair bit
[08:57:51] *** Joins: fabiand (fabiand@moz-9C5CEC31.adsl.alicedsl.de)
[08:58:32] <acrichto> argh I think the windows bots are wedged
[08:58:50] <gavinb> acrichto: that will teach me not to RTFC...
[08:58:53] <acrichto> nooooo I was hoping it would finally land this time
[08:59:08] <acrichto> gavinb: yeah I don't understand why it's not in the docs yet
[08:59:17] <acrichto> http://static.rust-lang.org/doc/std/fmt.html
[08:59:19] <acrichto> it should be right htere
[08:59:21] <acrichto> but it's not :(
[08:59:35] <gavinb> yeah that's where I was searching
[08:59:47] <acrichto> you shouldn't have to read the code
[08:59:52] <acrichto> at least not for something like this
[09:01:15] *** Quits: gavinb (gavinb@E456AACA.6E0C717F.1AE6826D.IP) (Ping timeout)
[09:01:20] *** Joins: davbo (dave@moz-3FFA637C.oucs.ox.ac.uk)
[09:05:23] <engla> acrichto: fmt module is using  /**!   for its doc comment. not sure if that's correct?
[09:05:51] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[09:05:52] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1457275cf to 14604ab94: 02http://git.io/N3iJvQ
[09:05:52] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[09:05:53] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[09:05:53] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/_tjaig
[09:05:54] <ghrust> 13rust/06auto 14ad385ba 15Daniel Micay: vec: implement `DeepClone`
[09:05:54] <ghrust> 13rust/06auto 14a6c7db3 15Daniel Micay: repr: print integer/float suffixes
[09:05:54] <ghrust> 13rust/06auto 147767556 15Daniel Micay: repr: include mutability qualifier in visit_ptr
[09:05:55] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[09:07:59] *** Quits: jviereck (Adium@moz-1EC7271F.dip0.t-ipconnect.de) (Ping timeout)
[09:12:39] *** Joins: jviereck (Adium@moz-1EC7271F.dip0.t-ipconnect.de)
[09:12:55] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[09:13:51] *** Quits: ktos (ktos@moz-D3D6BE18.swidnica.mm.pl) (Ping timeout)
[09:14:32] *** Joins: ktos (ktos@moz-D3D6BE18.swidnica.mm.pl)
[09:15:53] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[09:18:10] *** flaper87 is now known as flaper87|afk
[09:18:59] *** Quits: m_kato (m_kato@moz-C286AD9A.bitcat.net) (Quit: Leaving...)
[09:19:35] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[09:19:54] *** Joins: jaen (jaen@FB01674D.56B727FE.4B52F012.IP)
[09:20:57] <dbaupp> gavin: you don't need append: `x.push(y)` is the same as `x = append(x, y)` except the former doesn't move out, but the latter does
[09:21:31] <bjz> h3r3tic: beep
[09:22:31] <engla> vec::append is for concatenation
[09:22:47] <engla> pub fn append<T:Clone>(lhs: ~[T], rhs: &[T]) -> ~[T]
[09:23:13] <dbaupp> oh does vec append take a vec?
[09:23:29] <engla> yes
[09:23:30] <dbaupp> .push_all then
[09:23:52] <dbaupp> gavinb: ^
[09:23:57] <dbaupp> oh, oops.
[09:24:05] <dbaupp> gavin: (sorry)
[09:30:54] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[09:30:54] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1443a186e to 14604ab94: 02http://git.io/N3iJvQ
[09:30:54] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[09:30:57] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[09:30:57] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/yLn3aQ
[09:30:57] <ghrust> 13rust/06auto 14a6de055 15Daniel Micay: option: rm implementation of Add...
[09:30:57] <ghrust> 13rust/06auto 1406ee02a 15bors: auto merge of #8772 : thestinger/rust/option, r=anasazi...
[09:30:57] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[09:32:46] <leonvv> What is the meaning of "#[deriving(Clone)]" ?
[09:33:10] *** Joins: gavinb (gavinb@moz-9EC182F0.lowrp3.vic.optusnet.com.au)
[09:33:18] *** flaper87|afk is now known as flaper87
[09:33:26] <dbaupp> leonvv: it creats an automatic impl of the Clone trait for the type it's attached too
[09:33:28] <bjz> leonvv: it derives the clone trait
[09:33:39] <bjz> so you don't need to write it out
[09:33:40] <dbaupp> gavinb: I made a mistake: you want .push_all rather than .push
[09:33:47] <gavinb> acrichto: I found out about this via "This Week in Rust" (as I suspect many will) so perhaps a link to the docs from there would help? I got the impression it was not much more than a rename.
[09:33:52] <bjz> like #[deriving(Eq)]
[09:33:53] <leonvv> Why isn't this default? Why do you need to add that line?
[09:34:08] <engla> deriving(Clone) doesn't work in 100% of cases, but for most types it's exactly right
[09:34:09] <bjz> because you might not want some things to be clonable
[09:34:18] <gavinb> dbaupp: ah! thanks, dude! :)
[09:34:57] <bjz> leonvv: Say I had a shader handle for opengl
[09:35:14] <fabiand> hey
[09:35:28] <fabiand> I just wanted to ask if someone knows what the state is of building rust with an external llvm?
[09:35:44] <bjz> leonvv: I wouldn't want you to be able to clone it, because then it would be deletd twice when it was destroyed
[09:36:08] <bjz> fabiand: not sure
[09:36:27] <bjz> fabiand: but you only really need to update it once in a blue moon
[09:36:28] <dbaupp> fabiand: almost certainly doesn't work: Rust has custom patches
[09:36:37] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[09:36:38] <leonvv> bjz: that makes sense, thanks all
[09:36:51] <fabiand> dbaupp, well - what I've heard that - at least on x86_64 - all patches are upstreamed ...
[09:37:02] <dbaupp> fabiand: I don't think so?
[09:37:03] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[09:37:22] <fabiand> bjz, I'm looking at it from a packager perspective ;) and e.g. the fedora policy requires packages to not-bundle other libs ..
[09:37:36] <bjz> yeah :(
[09:38:09] <fabiand> dbaupp, I was referring to https://github.com/mozilla/rust/issues/4259
[09:38:17] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[09:38:17] * fabiand just notes that it was updated in the meantime
[09:39:14] <dbaupp> well, running git log in rust/src/llvm says the last few patches are all rust specific, so I guess they're not upstream
[09:39:46] <dbaupp> and we're currently pointing at acrichto's fork of llvm
[09:44:07] *** Quits: ktos (ktos@moz-D3D6BE18.swidnica.mm.pl) (Ping timeout)
[09:45:10] *** Joins: ktos (ktos@moz-D3D6BE18.swidnica.mm.pl)
[09:49:11] <sebcrozet> Hi, this is a parser bug right: https://gist.github.com/sebcrozet/6351626 ?
[09:49:36] <dbaupp> sebcrozet: maybe maybe not
[09:49:54] <dbaupp> I'm not sure if we've decided on how lenient we are with ,'s and ;'s
[09:49:56] <dbaupp> rusti: ;;;;;;;;;;;
[09:49:57] -rusti- ()
[09:50:18] <sebcrozet> dbaupp: ah.
[09:50:30] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[09:51:11] <sebcrozet> dbaupp: but, if you replace `&self` by e.g. `whatever: &uint`, there is a parse error.
[09:51:18] <dbaupp> ah!
[09:51:20] <dbaupp> weird
[09:51:27] <dbaupp> file it :)
[09:51:31] <sebcrozet> dbaupp: yep
[09:51:32] <tiffany> uh.. what does this mean?
[09:51:33] <tiffany> note: frsi.o: In function `main::_97f17d49ef732b::_0$x2e0':
[09:51:33] <tiffany> frsi.rc:(.text+0x1b5): undefined reference to `parse::parse::_996868e3c3d19ff1::_0$x2e0'
[09:51:50] <dbaupp> tiffany: you might need to recompile the parse crate
[09:51:58] <tiffany> I tried that and it didn't work
[09:52:00] <dbaupp> oh :(
[09:52:08] <dbaupp> and the frsi crate
[09:52:12] <tiffany> well
[09:52:24] <tiffany> first off, there isn't a parse crate, it's an rs file part of the frscript crate
[09:52:49] <dbaupp> oh, so it's included with `mod` in frsi.rc
[09:52:52] <dbaupp> ?
[09:53:15] <dbaupp> Ah; is it `fn parse` or `pub fn parse`? (it should be `pub`)
[09:53:17] <tiffany> no, frsi.rs does an extern mod frscript; use frscript::parse::*;, and frscript has a mod parse;
[09:53:25] <tiffany> and mod parse contains an fn parse()
[09:53:30] <tiffany> oh
[09:53:52] <dbaupp> it'll also need to be `pub mod parse`
[09:54:07] <tiffany> there, that worked
[09:54:15] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[09:54:26] *** kimundi is now known as zz_kimundi
[09:54:41] <tiffany> I wonder if I'll ever stop being surprised at my rust code usually working as soon as I resolve compile errors
[09:54:51] <dbaupp> try haskell some time :P
[09:54:57] *** Joins: toqueteos (Mibbit@moz-16CBFEDC.dynamic.jazztel.es)
[09:55:19] <tiffany> I've read a portion of learn you a haskell but I haven't actually written anything
[09:56:03] <dbaupp> Rust's traits will "prepare" you for haskell's typeclasses.
[09:56:49] <dbaupp> (i.e. they're essentially identical)
[09:56:56] <tiffany> yeah, I love typeclasses
[09:57:25] <dbaupp> you sound like you've read more than just a portion :)
[09:58:05] <tiffany> I've gotten to the chapter on functors, applicative functors, and monoids
[10:00:07] *** Quits: jviereck (Adium@moz-1EC7271F.dip0.t-ipconnect.de) (Quit: Leaving.)
[10:00:31] <dbaupp> just getting into the good stuff
[10:00:53] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[10:00:53] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1406ee02a to 14604ab94: 02http://git.io/N3iJvQ
[10:00:53] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[10:00:56] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[10:00:56] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/jHxvOA
[10:00:56] <ghrust> 13rust/06auto 14f3d017c 15Tim Chevalier: rustpkg: Implement --version command-line option...
[10:00:56] <ghrust> 13rust/06auto 14947513c 15bors: auto merge of #8773 : catamorphism/rust/rustpkg-version-flag, r=anasazi...
[10:00:56] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[10:00:58] * dbaupp wishes we could do them in Rust
[10:01:01] <leonvv> What is the right way to iterate over a string? 'iter()' dosen't seem to work, or am I missing some trait?
[10:01:03] <dbaupp> *do them properly
[10:01:07] <dbaupp> leonvv: it should
[10:01:30] <dbaupp> rusti: for c in "foo bar".iter() { printf!("%? ", c) }
[10:01:31] -rusti- 'f' 'o' 'o' ' ' 'b' 'a' 'r' ()
[10:01:51] *** Quits: klapaucius (klapaucius@272B8F8B.5692770D.BB41F968.IP) (Quit: klapaucius)
[10:04:30] <leonvv> dbaupp: In that case I'm the problem :)
[10:06:35] *** Joins: Earnestly (earnest@B0BDF733.8FDE20A.5411983D.IP)
[10:06:39] <dbaupp> leonvv: what's the code/error message?
[10:07:29] <leonvv> dbaupp: "type `&mut ~str` does not implement any method in scope named `next`" And then it prints out my "for in" loop...
[10:07:35] <leonvv> Owh wiat
[10:07:38] <leonvv> wait * 
[10:07:58] <leonvv> I saw the to_str() as .iter() -.-
[10:08:08] <leonvv> Thanks for your help anyway
[10:10:56] <toqueteos> is there any way to check if a value impls a trait?
[10:11:07] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[10:11:33] *** Quits: leonvv (leonvv@moz-7D83A5F1.ip.telfort.nl) (Client exited)
[10:12:53] <dbaupp> toqueteos: at compile-time or at runtime?
[10:13:07] <toqueteos> compile time if possible
[10:13:37] <dbaupp> rusti: trait Foo {} fn test_foo<T: Foo>(_: T) {} test_foo(1u)
[10:13:38] -rusti- <anon>:5:51: 5:59 error: failed to find an implementation of trait main::Foo for uint
[10:13:38] -rusti- <anon>:5          trait Foo {} fn test_foo<T: Foo>(_: T) {} test_foo(1u)
[10:13:38] -rusti-                                                             ^~~~~~~~
[10:13:38] -rusti- application terminated with error code 101
[10:13:46] <dbaupp> rusti: trait Foo {} fn test_foo<T: Foo>(_: T) {} impl Foo for uint {} test_foo(1u)
[10:13:47] -rusti- ()
[10:14:01] <dbaupp> toqueteos: is that what you mean?
[10:14:57] <toqueteos> dbaupp: nice, thanks! so obvious i didn't think of it like that
[10:16:05] *** Joins: Florob (Florob@moz-39532932.de)
[10:16:12] <toqueteos> rusti: trait Foo {} fn test_foo<T: Foo>() {} impl Foo for uint {} test_foo()
[10:16:12] -rusti- <anon>:5:68: 5:76 error: cannot determine a type for this bounded type parameter: unconstrained type
[10:16:12] -rusti- <anon>:5          trait Foo {} fn test_foo<T: Foo>() {} impl Foo for uint {} test_foo()
[10:16:13] -rusti-                                                                              ^~~~~~~~
[10:16:13] -rusti- application terminated with error code 101
[10:16:16] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[10:16:23] <toqueteos> it needs the type as argument, ok
[10:16:48] <dbaupp> usti: trait Foo {} fn test_foo<T: Foo>() {} impl Foo for uint {} test_foo::<uint>()
[10:16:52] <dbaupp> rusti: trait Foo {} fn test_foo<T: Foo>() {} impl Foo for uint {} test_foo::<uint>()
[10:16:53] -rusti- ()
[10:17:00] <dbaupp> rusti: trait Foo {} fn test_foo<T: Foo>() {} impl Foo for uint {} test_foo::<float>()
[10:17:01] -rusti- <anon>:5:68: 5:85 error: failed to find an implementation of trait main::Foo for float
[10:17:01] -rusti- <anon>:5          trait Foo {} fn test_foo<T: Foo>() {} impl Foo for uint {} test_foo::<float>()
[10:17:01] -rusti-                                                                              ^~~~~~~~~~~~~~~~~
[10:17:02] -rusti- application terminated with error code 101
[10:18:58] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Input/output error)
[10:19:01] <toqueteos> meh, it doesn't work for what i'm trying
[10:19:03] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[10:23:37] *** Quits: gavinb (gavinb@moz-9EC182F0.lowrp3.vic.optusnet.com.au) (Quit: gavinb)
[10:24:04] *** Joins: RpJ (RpJ@moz-D5DFAA52.red-81-43-101.staticip.rima-tde.net)
[10:27:55] <toqueteos> dbaupp: something like this https://gist.github.com/toqueteos/7f190bd3d01957e16195 (not valid rust code)
[10:29:51] <tiffany> how do you match an enum which contains a ~[]?
[10:30:09] <tiffany> it says I can't move out of dereference of & pointer
[10:30:44] <dbaupp> tiffany: use ref: Variant(ref v)
[10:30:56] <dbaupp> toqueteos: not possible
[10:31:07] <toqueteos> dbaupp: :( ok
[10:31:13] <toqueteos> thanks mate
[10:32:08] <dbaupp> toqueteos: Rust uses parametric polymorphism, so the functionality of every type has to be known; one can't just test for extra things (not like go)
[10:33:05] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[10:33:13] <toqueteos> so i'd have to make WriteString work with T? or make two fn's one for Writer and another for StringWriter?
[10:34:06] *** Joins: orshem (orshem@C5E06B1E.A5B6B765.E3D28531.IP)
[10:34:57] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Quit: Leaving.)
[10:36:56] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[10:37:28] <mitsuhiko> toqueteos: just don't have a function :)
[10:37:35] <mitsuhiko> just put a write_string function on the trait
[10:38:08] <toqueteos> mitsuhiko: on Writer you say?
[10:38:13] <mitsuhiko> toqueteos: yeah
[10:38:23] <mitsuhiko> trait CanWriteStrings { fn write_string() â€¦ }
[10:38:35] *** Quits: RpJ (RpJ@moz-D5DFAA52.red-81-43-101.staticip.rima-tde.net) (Quit: leaving)
[10:38:36] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[10:39:37] <dbaupp> Or, `trait Writer { fn write(&mut self, &[u8]); fn write_str(&mut self, s: &str) { self.write(s.as_bytes()) }`; i.e. use a default method which can be overriden if there's a more efficient implementation.
[10:40:16] <toqueteos> mmm... seems like my golang std in rust isn't going anywhere
[10:40:28] <toqueteos> at least not until I learn more about rust
[10:41:05] <orshem> managed pointers are really slow...
[10:41:28] <dbaupp> toqueteos: the type systems are pretty different (aiui, rust's is much more rigourous/safer), so it'll always be putting a square block into a round hole
[10:42:18] <orshem> i changed one array from using managed pointers tree to using indexes, won 3 seconds on the simple test
[10:42:27] <orshem> and the large test no longer segfault
[10:42:39] <orshem> "(
[10:42:40] <orshem> :(
[10:42:57] <toqueteos> dbaupp: of course, i'm just toying with the language, i thought porting some go things would be a good start, seems i was plain wrong
[10:43:11] <dbaupp> toqueteos: porting things from haskell might be easier :)
[10:43:31] <dbaupp> (although, not much easier: lack of higher kinded types will defeat that quickly.)
[10:43:46] <toqueteos> no haskell background :(
[10:44:42] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[10:44:45] <Ms2ger> Maybe C? :)
[10:45:47] <toqueteos> i'm coming from python/go/java world
[10:45:48] <orshem> Ms2ger: c++ :)
[10:46:38] <Ms2ger> None of these is particularly close to rust, I think
[10:46:58] <toqueteos> yep, that's the problem
[10:47:20] <dbaupp> well, if you can't port something easily, try writing something from scratch. :)
[10:47:23] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[10:47:27] <orshem> Ms2ger, i think rust is closer to c++
[10:48:28] <Ms2ger> orshem, fair
[10:48:37] <Ms2ger> Though no templates and stuff
[10:48:39] <toqueteos> thanks for your time guys dbaupp, mitsuhiko, orshem and Ms2ger
[10:48:44] <Ms2ger> Np
[10:48:58] <Ms2ger> Feel free to ask us anything :)
[10:49:11] <Ms2ger> (Preferably rust-related)
[10:49:51] *** zz_kimundi is now known as kimundi
[10:50:16] <mitsuhiko> orshem, toqueteos: i think rust is pretty close to python when it comes to api design
[10:50:21] <mitsuhiko> obviously not as far as types go
[10:50:26] <mitsuhiko> but the concepts are all the same
[10:50:51] <orshem> Ms2ger, how long it take a bicycle to rust in the sun?
[10:50:51] <Ms2ger> Now if only rust had had significant whitespace :)
[10:51:36] <Ms2ger> orshem, longer than you should leave your bicycle outside anyway
[10:51:38] <orshem> mitsuhiko, i'm not a rust expert but i'll have to disagree. i love python there should be preferable one way to do things
[10:51:41] <toqueteos> yay, at least rust has function overloading yay for that
[10:52:03] <orshem> and the rust way is: here's this way or that or this
[10:52:18] <orshem> Ms2ger, :). it's rust related
[10:52:33] <bjz> toqueteos: bstrie comes from a python background
[10:52:43] <Ms2ger> orshem, :)
[10:52:48] <toqueteos> https://gist.github.com/toqueteos/7f190bd3d01957e16195
[10:52:48] *** Joins: fyolnish (fyolnish@moz-B2073F52.uqwimax.jp)
[10:53:00] <toqueteos> bjz: who is bstrie?
[10:53:02] <bjz> toqueteos: it's actually pretty common here
[10:53:29] <bjz> toqueteos: I think it's because it's systems programming, but it's safe
[10:53:45] <bjz> which makes it a little more accessable
[10:54:03] <bjz> just prepare for the compiler complaining at you a lot
[10:54:07] <bjz> :P
[10:54:13] <dbaupp> <3 compiler complaints
[10:54:17] <bjz> :)
[10:54:21] <dbaupp> bjz: you were asking about rustpkg before?
[10:54:25] <bjz> like automated unit tests
[10:54:28] <Ms2ger> Do you already have better error messages than gcc? :)
[10:54:39] <Ms2ger> s/already/at least/
[10:54:41] <bjz> that you don't have to write yourself
[10:54:47] <dbaupp> Ms2ger: occasionally
[10:54:55] <Ms2ger> (Yeah, the letters are so close together)
[10:54:56] <bjz> dbaupp: yeah
[10:55:11] <bjz> dbaupp: should probably set cgmath up with it
[10:56:22] <dbaupp> bjz: there's http://static.rust-lang.org/doc/rustpkg.html btw
[10:57:03] <dbaupp> but basically you'd ahve a workspace dir, with `src/cgmath/<cgmath's sources>'
[10:57:14] <mitsuhiko> orshem: there is more to python than the one way to do things
[10:58:39] <orshem> mitsuhiko, you're right of course. but that's one of the things that most endears python to me
[10:58:47] <orshem> also the reason i love java
[10:58:52] <orshem> heresy, i know
[10:59:01] <orshem> i love simple languages
[10:59:10] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[10:59:24] <orshem>  the programs usually gets complicated on their own, they don't need help 
[10:59:34] <bjz> dbaupp: are there any examples?
[11:00:03] <dbaupp> bjz: not really; but it's seriously as easy as just having that directory structure
[11:00:19] <dbaupp> bjz: oh, and calling the top level file lib.rs (for a lib) or main.rs for a binary
[11:01:01] <dbaupp> bjz: (you run `rustpkg build cgmath` from the workspace dir, or `rustpkg build` inside $workspace/src/cgmath (iirc))
[11:01:30] <zol> Do generic structs exist? 
[11:01:58] <bjz> struct Foo<T> { x: T }
[11:02:17] <dbaupp> rusti: struct Foo<T> { x: T }  (Foo { x: 1i }, Foo { x: ~"foo" })
[11:02:18] -rusti- ({x: 1}, {x: ~"foo"})
[11:02:35] <zol> Oh. Thank you.
[11:03:05] <zol> Couldn't find any generic structs in the tutorial.
[11:03:25] <zol> Ok, now I just did, sorry - my bad.
[11:05:49] <dbaupp> bjz: I believe the design is to allow for multiple pkgs at one, so you might have `$workspace/src/{cgmath,gl-rs,colour-rs}` etc
[11:06:28] <bjz> dbaupp: wha, is it normal for it to spit out a lot of debug stuff?
[11:06:37] <dbaupp> bjz: um; no?
[11:06:47] <dbaupp> bjz: what sorta debug stuff?
[11:06:59] <bjz> just a sec
[11:08:03] <bjz> dbaupp: https://gist.github.com/bjz/1f61458a78b87ccfb8d4
[11:09:01] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[11:10:54] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[11:10:54] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/jHxvOA
[11:10:54] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[11:13:59] <bjz> dbaupp: any ideas?
[11:14:47] <dbaupp> bjz: weird
[11:14:54] * dbaupp tries his local rustpkg
[11:15:33] <dbaupp> bjz: I see it too
[11:15:53] *** Quits: KindOne (KindOne@moz-ED3F94B.dynamic.ip.windstream.net) (Ping timeout)
[11:15:54] <bjz> dbaupp: I updated cgmath
[11:15:55] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[11:15:55] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/gnJT8g
[11:15:55] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[11:15:58] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[11:15:58] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/007fTA
[11:15:58] <ghrust> 13rust/06auto 147406c2d 15Brian Anderson: Fix valgrind suppression on mac...
[11:15:58] <ghrust> 13rust/06auto 14d9b0d4b 15bors: auto merge of #8779 : brson/rust/macsupp, r=thestinger...
[11:15:58] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[11:16:14] <bjz> dbaupp: to the rustpkg structure
[11:17:11] <dbaupp> bjz: cool; does it work? (other than the debug stuff)
[11:17:20] <bjz> seems to
[11:17:24] <dbaupp> awesome
[11:17:34] <bjz> shame bout the weirdness
[11:17:47] <dbaupp> also, if you want to build with opts you'll need to run rustc by hand. :(
[11:17:57] <dbaupp> (yes; it's a bug)
[11:18:30] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[11:19:46] *** Joins: KindOne (KindOne@moz-B852A1EB.dynamic.ip.windstream.net)
[11:21:58] *** Quits: Sonarpulse (user@moz-A783576F.dsl.pltn13.pacbell.net) (Ping timeout)
[11:23:02] *** Quits: ktos (ktos@moz-D3D6BE18.swidnica.mm.pl) (Ping timeout)
[11:24:00] *** Joins: ktos (ktos@moz-D3D6BE18.swidnica.mm.pl)
[11:27:05] *** Joins: sigma (sigma@51C589B3.EF2694B5.DFAC6AA7.IP)
[11:28:17] *** Joins: jviereck (Adium@moz-1EC7271F.dip0.t-ipconnect.de)
[11:28:48] *** kimundi is now known as zz_kimundi
[11:31:13] *** Quits: dwhyte (dwhyte@1922756A.EDC594B0.7BF4A4B0.IP) (Client exited)
[11:33:48] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[11:37:04] *** Joins: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net)
[11:37:16] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[11:38:57] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[11:43:42] *** Joins: lbergstrom (Adium@moz-5D8E4B14.lightspeed.cicril.sbcglobal.net)
[11:43:58] *** Quits: recrack (ymin@5AB4884B.FCC4549.14D5B978.IP) (Quit: Lost terminal)
[11:44:07] *** zz_kimundi is now known as kimundi
[11:49:35] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[11:53:01] *** Joins: anders (anders@moz-329650BE.cust.bredbandsbolaget.se)
[11:53:36] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[11:54:34] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[11:54:50] *** Joins: BitPuffin (quassel@moz-8370D1B9.bredband.comhem.se)
[11:56:49] *** Quits: anders (anders@moz-329650BE.cust.bredbandsbolaget.se) (Quit: anders)
[12:00:27] *** Quits: paulproteus (quassel@rose.makesad.us) (Ping timeout)
[12:00:55] *** Joins: jfbk (textual@moz-EEA9CFB3.nyc.res.rr.com)
[12:01:06] *** Joins: maxli (maxli@13F2CEC5.7672369.D8E68FF6.IP)
[12:01:26] *** Joins: paulproteus (quassel@moz-E86A3B42.makesad.us)
[12:01:41] *** Joins: diverse (Mibbit@moz-601F0275.static.mtpk.ca.charter.com)
[12:02:06] <engla> acrichto: does your llvm change require llvm rebuild?
[12:04:44] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[12:04:59] *** Quits: BitPuffin (quassel@moz-8370D1B9.bredband.comhem.se) (Ping timeout)
[12:05:13] <jfbk> is it possible to iterate over an enum?
[12:05:28] <jfbk> (without making an intermediate vec)
[12:05:31] <engla> no
[12:05:44] *** Quits: toqueteos (Mibbit@moz-16CBFEDC.dynamic.jazztel.es) (Quit: http://www.mibbit.com ajax IRC Client)
[12:05:50] <diverse> I need some help with this. I would like to be able to create the length of the stack when I call the new method to create the stack object. Any ideas? http://pastebin.com/MDhCrhSn
[12:06:22] <engla> jfbk: with something like extra::enum_set maybe
[12:06:47] <dbaupp> diverse: what's the error message?
[12:07:00] <dbaupp> diverse: although, you definitely need to change [T] to ~[T]
[12:07:49] <engla> diverse: it's not possible to write code generic over size `N` fixed size vectors
[12:08:14] <diverse> damn, well that answers it.
[12:08:33] <engla> so needs to be dynamic size, so  ~[T]
[12:08:42] <diverse> I have no choice then
[12:09:22] <orshem> engla, do you know if it is planned to support generic [t] over n? 
[12:09:23] <bstrie> engla: you can write code to be generic over slice, though
[12:10:37] <dbaupp> orshem: yes
[12:10:41] <jfbk> engla: thanks. small enum so will prob just use the vector
[12:11:35] <dbaupp> orshem: I guess I shouldn't be so definite, but some core-devs have had a positive reaction to it; and without it [T, .. n] will be pathetically useless.
[12:12:31] <orshem> dbaupp, thanks :) that's great to hear
[12:13:26] <orshem> also does anybody know if the latest speed regression have been fixed? because i just updated to master and i see very slight speedup
[12:13:51] <dbaupp> which speed regression?
[12:14:13] <Ms2ger> The llvm one?
[12:14:18] <diverse> dbaupp: the thing where the updated llvm
[12:14:25] <diverse> *they updated
[12:14:33] <engla> part of it orshem 
[12:14:35] <orshem> yes the llvm one
[12:15:02] <dbaupp> Thiez: I imagine filing a bug about that scheduler performance issue would be ok.
[12:15:48] <orshem> i suppose it can only get better then :)
[12:16:33] <dbaupp> orshem: oh, yes, master also includes a recent update to use all the same optimisation passes that clang uses for C/C++, so that might be it
[12:17:11] <bstrie> dbaupp: I thought we did that months ago
[12:17:17] <bstrie> s/we/strcat
[12:17:28] <dbaupp> bstrie: aatch did some work on it
[12:18:05] <dbaupp> but this is doing it properly, i.e. using LLVM's builtin "uses the default passes" mode. (AFAICT)
[12:18:13] <bstrie> ok
[12:18:20] <bstrie> what did the new llvm update entail?
[12:18:21] <dbaupp> https://github.com/mozilla/rust/pull/8700
[12:18:35] <bstrie> we were on 3.3 before, right? so are we on trunk now?
[12:18:45] <dbaupp> (before we had just a list of passes added one by one)
[12:18:48] <dbaupp> and yeah, HEAD
[12:19:09] <dbaupp> well, HEAD of a week or more ago
[12:19:34] *** Joins: eagen (eagen@8737942B.7A99C13A.B7961A98.IP)
[12:25:54] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[12:25:54] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/007fTA
[12:25:54] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[12:26:27] <jfbk> now that default methods work, does that mean the Foo & FooUtil pattern is deprecated?
[12:27:03] <jfbk> i.e. in rand can RngUtil just become default methods on Rng?
[12:27:32] <cmr> jfbk: yes
[12:27:50] *** Joins: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net)
[12:29:55] <jfbk> cmr: cool, thanks. if nobody gets to it first i'll try to make that my first pull request tonight
[12:30:15] <dbaupp> jfbk: could I discourage you from doing that to Rng?
[12:30:19] * dbaupp is working on it
[12:30:22] <jfbk> sure
[12:30:32] <dbaupp> (sorry)
[12:30:35] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[12:30:36] <jfbk> no worries
[12:30:56] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[12:30:56] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/rnyiFQ
[12:30:56] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[12:30:59] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[12:30:59] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/pJ6CBQ
[12:30:59] <ghrust> 13rust/06auto 14063d9ca 15Brian Anderson: std: Make vec::from_elem failure-safe
[12:30:59] <ghrust> 13rust/06auto 14932d7b9 15bors: auto merge of #8780 : brson/rust/from_elem, r=thestinger
[12:30:59] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[12:31:05] <diverse> dbaupp: could you help me with this error? http://pastebin.com/xc4hasVE
[12:31:30] <dbaupp> jfbk: std::hash::HashUtil could become default method(s) on Hash though :)
[12:32:07] <jfbk> alright, i'll do that one then :)
[12:32:23] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[12:36:45] <diverse> dbaupp: I only added the ~ to the vectors
[12:37:36] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[12:39:16] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[12:39:20] <pnkfelix> nmatsakis: fyi, here's what's blocking me from landing a <V:VIsitor> port of writeback.rs : https://github.com/mozilla/rust/issues/8791
[12:39:21] <dbaupp> diverse: ah, you'll need `-> Stack<T>`
[12:40:26] <diverse> dbaupp: Ah thats why, thank you.
[12:41:08] <diverse> note to self: stay consistent
[12:49:45] *** Joins: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net)
[12:49:59] <nmatsakis> pnkfelix: huh! that's...confusing
[12:50:11] <pnkfelix> nmatsakis: you're telling me!
[12:50:54] <pnkfelix> nmatsakis: this isn't a weird masked stack overflow or anything, right?
[12:51:16] <pnkfelix> nmatsakis: (maybe I should try actually looking at the rt/uv code)
[12:51:27] <nmatsakis> pnkfelix: pnkfelix not that I'm aware of
[12:55:06] *** Joins: maik (maik___@moz-64456714.dip0.t-ipconnect.de)
[12:56:09] *** Joins: dew (Instantbir@moz-D2FA52B6.static.stls.mo.charter.com)
[12:56:33] *** Quits: dew1 (Instantbir@moz-D2FA52B6.static.stls.mo.charter.com) (Ping timeout)
[12:57:28] *** Joins: bytewise (bytewise@moz-4A801D04.unitymediagroup.de)
[12:58:03] *** Quits: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net) (Quit: jorendorff)
[13:08:44] *** Joins: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net)
[13:10:30] *** Quits: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net) (Ping timeout)
[13:10:45] *** Quits: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net) (Client exited)
[13:11:09] *** Quits: diverse (Mibbit@moz-601F0275.static.mtpk.ca.charter.com) (Quit: http://www.mibbit.com ajax IRC Client)
[13:13:17] *** Quits: igl (igl@moz-DB9488CD.adsl.alicedsl.de) (Ping timeout)
[13:13:46] *** Joins: igl (igl@moz-78FFF371.adsl.alicedsl.de)
[13:15:37] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[13:17:09] *** Joins: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net)
[13:17:45] *** Joins: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP)
[13:19:12] <cmr> erickt: ping
[13:19:30] *** Quits: jviereck (Adium@moz-1EC7271F.dip0.t-ipconnect.de) (Quit: Leaving.)
[13:22:16] *** Joins: jviereck (Adium@moz-1EC7271F.dip0.t-ipconnect.de)
[13:24:41] *** Quits: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr) (Ping timeout)
[13:24:49] <maik> can I build my examples with rustpkg?
[13:25:06] <cmr> maik: maybe?
[13:27:06] *** kimundi is now known as zz_kimundi
[13:28:29] *** Joins: Kruppe (user@moz-EE1E894A.home3.cgocable.net)
[13:29:11] *** Joins: huseby (huseby@13F2CEC5.7672369.D8E68FF6.IP)
[13:32:32] *** Quits: maik (maik___@moz-64456714.dip0.t-ipconnect.de) (Ping timeout)
[13:33:54] *** Joins: maik (maik___@moz-64456714.dip0.t-ipconnect.de)
[13:35:19] <bjz> maik: hgurro!
[13:36:17] <maik> bjz, what :) ?
[13:36:34] <bjz> hurro
[13:36:37] <bjz> hullo
[13:36:40] <bjz> hello
[13:36:44] <bjz> herro
[13:36:54] <maik> okay :D
[13:37:00] <bjz> :]
[13:37:27] <bjz> maik: got cg math working with rustpkg
[13:37:54] <maik> bjz, I have already seen that :p
[13:37:56] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[13:38:02] <bjz> haw
[13:38:23] <maik> bjz, currently using rustpgk too but I am trying to figure out how I can build my examples
[13:38:35] <bjz> mm
[13:38:49] <ChrisMorgan> What size is uint? Defined or platform specific?
[13:38:51] <bjz> you could just have an examples subfolder
[13:39:05] <cmr> ChrisMorgan: pointer-sized.
[13:39:06] <bjz> then have an src workspace
[13:39:09] <cmr> platform specific
[13:39:15] *** Joins: cowboyd (cowboyd@1D8844A7.1B729417.CEE440B6.IP)
[13:39:36] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[13:39:44] <bjz> examples/src/{e1/main.rs, e2/main.rs,...}
[13:40:00] <bjz> cd examples
[13:40:06] <maik> ah
[13:40:11] <bjz> rustpkg build e1
[13:40:12] *** Quits: tcr (tcr@moz-1C4F4144.hsd1.ma.comcast.net) (Client exited)
[13:40:17] <maik> yeah that could work
[13:40:24] <bjz> maybe
[13:40:38] *** Quits: jviereck (Adium@moz-1EC7271F.dip0.t-ipconnect.de) (Ping timeout)
[13:40:53] *** Joins: jviereck (Adium@moz-918782F3.dip0.t-ipconnect.de)
[13:40:57] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[13:40:57] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/pJ6CBQ
[13:40:57] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[13:41:32] <maik> I would also like to know how pkg.rs works
[13:41:37] *** Joins: AutomatedTester (David@moz-DB4A9C19.scl3.mozilla.com)
[13:42:25] <bjz> maik: check out librustpkg/testsuite
[13:43:49] *** Joins: lmandel (lmandel@13F2CEC5.7672369.D8E68FF6.IP)
[13:45:52] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[13:45:52] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/VQopHQ
[13:45:52] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[13:45:55] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[13:45:55] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/eV2wuw
[13:45:55] <ghrust> 13rust/06auto 148f17ac9 15Marvin LÃ¶bel: Rewrote module tutorial
[13:45:55] <ghrust> 13rust/06auto 144fa09e0 15bors: auto merge of #8777 : Kimundi/rust/doc_stuff, r=cmr
[13:45:55] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[13:46:19] *** Joins: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr)
[13:46:31] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[13:46:55] *** Joins: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca)
[13:47:29] *** Quits: orshem (orshem@C5E06B1E.A5B6B765.E3D28531.IP) (Quit: Leaving)
[13:48:15] *** Quits: lmandel (lmandel@13F2CEC5.7672369.D8E68FF6.IP) (Quit: lmandel)
[13:48:28] *** Quits: KindOne (KindOne@moz-B852A1EB.dynamic.ip.windstream.net) (Ping timeout)
[13:50:16] *** Joins: lmandel (lmandel@13F2CEC5.7672369.D8E68FF6.IP)
[13:50:54] *** Joins: jorendorff (jorendorff@moz-1747FB68.hsd1.tn.comcast.net)
[13:50:58] *** Quits: lerc (quassel@B2E8CAD3.A8D14E52.788638A4.IP) (Ping timeout)
[13:51:13] *** Joins: pcwalton (pcwalton@moz-481A040C.hsd1.ca.comcast.net)
[13:51:13] *** ChanServ sets mode: +o pcwalton
[13:51:41] *** Quits: pcwalton (pcwalton@moz-481A040C.hsd1.ca.comcast.net) (Quit: .)
[13:52:24] *** Joins: Florob (Florob@moz-39532932.de)
[13:52:59] <Florob> Is there a way to specify the number of threads the rt may start?
[13:53:22] <maik> bjz, does "install" work for you?
[13:54:41] *** Joins: KindTwo (KindOne@moz-95ECC057.dynamic.ip.windstream.net)
[13:55:41] *** KindTwo is now known as KindOne
[13:56:35] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[13:57:19] *** Quits: Kruppe (user@moz-EE1E894A.home3.cgocable.net) (Client exited)
[13:59:01] <ChrisMorgan> Florob: it used to be RUST_THREADS, I believe that's true of the new RT also. Try it.
[13:59:25] *** Quits: KindOne (KindOne@moz-95ECC057.dynamic.ip.windstream.net) (Ping timeout)
[13:59:35] <Florob> ChrisMorgan, It is. Found it just after I had given up and asked, as one always does.
[14:00:57] <maik> I think I stay with make for now
[14:03:27] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[14:03:47] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[14:03:55] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[14:04:11] *** Joins: KindOne (KindOne@moz-92F6A2C3.dynamic.ip.windstream.net)
[14:04:15] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[14:04:33] <ldlework> "Closed #2794."
[14:04:36] <ldlework> congrats
[14:06:03] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[14:08:33] *** Joins: itdaniher (it@moz-4FED92E6.bstnma.east.verizon.net)
[14:09:38] <itdaniher> Trying to write Rust to unpack a C struct serialized over USB. The C struct includes an array of structs. How do I do this in Rust? Code @ http://itdaniher.com/p?bdma.
[14:10:29] <itdaniher> data: IN_sample[10] (where IN_sample) is a struct, is giving a syntax error
[14:11:27] *** Quits: eagen (eagen@8737942B.7A99C13A.B7961A98.IP) (Client exited)
[14:11:41] <itdaniher> I can do this explicitly with data0: IN_sample, data1: IN_sample... but that gets verbose
[14:12:44] *** Quits: jviereck (Adium@moz-918782F3.dip0.t-ipconnect.de) (Quit: Leaving.)
[14:13:48] <itdaniher> Could potentially define another type aliasing a statically sized vector of packed structs to IN_sample_buffer, but then I have to jump through a few additional hoops
[14:14:07] <dbaupp> itdaniher: [IN_sample, .. 10]
[14:14:24] <itdaniher> #thatwaseasy
[14:14:27] <itdaniher> thanks dbaupp
[14:14:33] *** Joins: jviereck (Adium@moz-918782F3.dip0.t-ipconnect.de)
[14:15:02] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[14:17:02] *** zz_kimundi is now known as kimundi
[14:19:09] <ldlework> What branch do I use if I would like to test the latest default methods stuff?
[14:21:03] <dbaupp> ldlework: master
[14:21:19] *** Quits: jviereck (Adium@moz-918782F3.dip0.t-ipconnect.de) (Quit: Leaving.)
[14:24:27] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[14:24:51] <maik> http://www.reddit.com/r/rust/comments/1l6nft/beginner_question_illegal_anonymous_lifetime/ do you think the syntax will change from "println((w.f)(10).to_str())" to "println(w.f(10).to_str())" at some point?
[14:26:03] <engla> no
[14:29:05] *** Quits: maik (maik___@moz-64456714.dip0.t-ipconnect.de) (Connection reset by peer)
[14:35:50] *** Joins: Kruppe (user@moz-EE1E894A.home3.cgocable.net)
[14:36:52] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[14:38:16] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[14:38:58] *** Joins: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com)
[14:39:56] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[14:42:26] <ldlework> heh I see rust still compiles llvm
[14:43:28] <olsonjeffery> rust still depends on changes to llvm that haven't been merged to upstream, so yes.
[14:44:44] * olsonjeffery coffee
[14:45:25] *** Joins: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net)
[14:49:00] *** Joins: choi (choi@EFB49084.2553AF4E.6FE028F4.IP)
[14:50:12] *** Joins: maik (maik___@moz-64456714.dip0.t-ipconnect.de)
[14:50:36] *** Quits: jaen (jaen@FB01674D.56B727FE.4B52F012.IP) (Ping timeout)
[14:50:42] <maik> how do we call it when we create a new struct Some::new(); do we call it object?
[14:50:44] <bstrie> has anyone yet invoked wadler's law in that thread about doc comment syntax
[14:50:48] *** Quits: squiddy_ (squiddy@moz-13793045.adsl.alicedsl.de) (Input/output error)
[14:53:35] <ChrisMorgan> bstrie: not in that particular thread. You could try it.
[14:53:35] <Seldaek> bstrie: haha, no, but it's very fitting
[14:53:56] *** Joins: tcr (tcr@D26BCFC9.C2203064.EDCE493E.IP)
[14:54:03] <bstrie> I really want to, but it's really not constructive
[14:54:34] <ChrisMorgan> That's the problem with possessing self-restraint. You don't get to say things you want to.
[14:54:55] <bstrie> believe it or not, there are many times when I'm about to post a comment to The Internet and instead I just delete it and move on
[14:55:01] <bstrie> teenage-me would be proud
[14:55:08] <ChrisMorgan> I do that frequently also.
[14:55:52] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[14:55:52] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/eV2wuw
[14:55:52] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[14:56:24] *** Quits: Ralith (ralith@114DA04D.CD83ED0A.BCDF04A6.IP) (Ping timeout)
[14:56:35] <Seldaek> bstrie: it's the first step indeed, one day you just retire to the mountains and stop talking because you finally realize it's all a waste. True enlightenment
[14:56:36] <bstrie> I'm imagining a firefox addon now... every time you post a comment to any site, half the time it randomly deletes it and closes the tab
[14:57:04] <bstrie> you can customize the deletion percentage too, too make it easier once you reach the retire-to-mountains phase
[14:58:01] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[14:58:18] <Seldaek> it's not a bad idea, but I'd guess it would need anti-troll and anti-someone-is-wrong-on-the-internet heuristics rather than a percentage
[14:58:34] <Seldaek> otherwise you'd quickly turn out paranoid 
[14:59:13] <bstrie> maybe just a pop-up box any time that you click on a "submit" button, asking if what you're about to do really contributes to the betterment of mankind
[14:59:21] <Seldaek> hah
[14:59:49] <Seldaek> it'd sure solve a lot of twitter & fb scalability issues :p
[15:00:06] <bstrie> we'll call it "true enlightenment"
[15:00:07] *** Joins: bent (chatzilla@moz-932324BF.hsd1.ca.comcast.net)
[15:00:24] <bstrie> and a corresponding twitter account with no info and no tweets
[15:00:29] <bstrie> mind == blown
[15:00:31] <Seldaek> haha
[15:00:53] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[15:00:53] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/np4Huw
[15:00:53] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[15:00:54] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[15:00:54] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/3mD3SA
[15:00:54] <ghrust> 13rust/06auto 141f13eab 15Felix S. Klock II: fix typo in rust-mode.el
[15:00:54] <ghrust> 13rust/06auto 140baa927 15bors: auto merge of #8789 : pnkfelix/rust/fsk-fix-typo-in-rust-mode.el, r=pnkfelix...
[15:00:55] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[15:01:23] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Ping timeout)
[15:01:25] <Seldaek> bord pushed 0 new commits.. well thanks for that gh bot
[15:02:48] *** AutomatedTester is now known as AutomatedTester|AFK
[15:02:50] <bstrie> I think that's cause it resets HEAD to the last good commit regardless of whether the last tested commit passed or failed
[15:04:23] *** Quits: tcr (tcr@D26BCFC9.C2203064.EDCE493E.IP) (Client exited)
[15:04:53] *** Quits: choi (choi@EFB49084.2553AF4E.6FE028F4.IP) (Input/output error)
[15:05:36] *** Quits: itdaniher (it@moz-4FED92E6.bstnma.east.verizon.net) (Quit: leaving)
[15:06:01] <Seldaek> bstrie: oh I'm not saying bors shouldn't do it, but the irc bot could keep this non-information to itself :)
[15:06:25] <Seldaek> it was just kinda fitting after this enlightenment discussion
[15:06:54] <bstrie> github.com/trueenlightenment/rust
[15:06:55] <bstrie> zero commits
[15:07:09] <bstrie> how blown is that mind right now
[15:07:23] <bstrie> (pretty blown is my guess)
[15:07:45] <Seldaek> bstrie: watch that! https://github.com/Enlightenment
[15:07:56] <Seldaek> 2.5years of mountainy bliss and counting
[15:08:06] <bstrie> hahahahahahha
[15:08:21] <bstrie> follow'd
[15:08:45] <Seldaek> no don't break the pattern of zeros :p
[15:09:44] <Seldaek> but ok, I might as well follow it too, it's very fitting that this would be the only account I follow.. 
[15:10:21] *** Quits: Houm (Houm@moz-25669AA8.fbx.proxad.net) (Ping timeout)
[15:11:12] *** AutomatedTester|AFK is now known as AutomatedTester
[15:11:25] <bstrie> how does an automatedtester go afk
[15:11:44] <bstrie> maybe it was automatically testing the ability of its irc client to change its username
[15:11:48] <AutomatedTester> by typing /nick AutomatedTester|AFK
[15:11:54] <AutomatedTester> well, znc does it for me
[15:12:03] <bstrie> AutomatedTester: you have shown me true enlightenment
[15:12:19] <AutomatedTester> bstrie: thats why I am here
[15:12:21] <bstrie> such an illuminating morning this has been
[15:12:44] <Seldaek> at least you still have a day ahead of you
[15:12:53] *** Joins: tcr (tcr@D26BCFC9.C2203064.EDCE493E.IP)
[15:13:01] <Seldaek> it's 5pm here, and this discussion is about the most interesting thing that happened so far today
[15:13:05] <bstrie> haha
[15:13:11] <AutomatedTester> bstrie: An oak tree doesnt produce acorns until its 50+ years old
[15:13:19] <AutomatedTester> now you have two new facts
[15:13:34] <bstrie> AutomatedTester: these are some heavy koans
[15:13:43] <bstrie> I'll need time to process this
[15:13:58] <AutomatedTester> its ok, I understand
[15:14:35] * ChrisMorgan tests his HTTP server's support of "Transfer-Encoding: chunked"
[15:14:36] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[15:14:52] <Seldaek> AutomatedTester: if you Understood you would be in the mountains not talking to anyone!
[15:15:26] <AutomatedTester> Seldaek: its ok, I was being patronising...
[15:15:32] <bstrie> ChrisMorgan: while you're writing a new http server, there's something that I've noticed. every other server in the world seems to spell the "Referrer" header as "Referer". consider this your chance to correct this mistake :)
[15:16:03] <Seldaek> AutomatedTester: eh sorry read the backlog to grasp my idiotic comment, no offense meant :p
[15:16:21] <AutomatedTester> :D
[15:16:23] <ChrisMorgan> bstrie: too late; though I have considered it, I believe it would be inadvisable to represent it as referrer internally; people expect referer, alas.
[15:17:00] <bstrie> ChrisMorgan: perhaps an option in the server configuration, "spellcheck: true"
[15:17:30] <ChrisMorgan> bstrie: in vain you plead. Sorry.
[15:17:37] <bstrie> I will fork your project
[15:17:44] <ChrisMorgan> Great!
[15:18:01] <Seldaek> bstrie: this is part of the RFC, it is to be mis-spelled forever. http://tools.ietf.org/html/rfc2616#section-14.36
[15:18:07] <bstrie> and set up a bot to send you a single PR for this change, every day, for the rest of your life
[15:18:18] <bstrie> Seldaek: yes yes, it still amuses me
[15:18:23] <ChrisMorgan> I say this because as soon as you implement that you'll realise there are other things you want, and so you'll be hooked into work on rust-http :-)
[15:18:31] <Seldaek> bstrie: oh it is a fun fact of the internets for sure
[15:19:01] <Seldaek> ChrisMorgan: I don't know if you want him rethinking all header names :p
[15:19:36] <ChrisMorgan> Seldaek: he'll grow out of that :P
[15:20:01] <bstrie> while we're on the topic, do we really need headers at all? that's what we have querystrings for, folks
[15:20:04] <Seldaek> Password too long (needs to be less than 31 characters)
[15:20:09] <bstrie> here comes the PR to remove http headers
[15:20:37] <Seldaek> now I get it when people restrict passwords to 8 to 12 chars, they meant well. but 31?
[15:20:55] <ChrisMorgan> bstrie: make sure it still compiles and the tests pass.
[15:21:02] <bstrie> Seldaek: test to see if it's 31 chars or if it's actually 31 unicode codepoints
[15:21:14] <Seldaek> bstrie: yeah let's remove headers, so we can outperform nginx more easily :p
[15:21:20] <ChrisMorgan> bstrie: also, I suggest you take that up with IETF and see if you can convince them for HTTP/2.0.
[15:21:40] <Seldaek> they did more horrible things in http 2.0 than removing headers :p
[15:21:49] <ChrisMorgan> It's quite easy to design a server which can respond to requests more rapidly than nginx.
[15:21:53] <bstrie> "hey IETF I hear you have some kinda header compression malarkey lined up, let me propose a radical alternative..."
[15:22:15] <bstrie> ChrisMorgan: and implement it too, right? :)
[15:22:23] <ChrisMorgan> Sure.
[15:22:32] <Seldaek> bstrie: well I can't test, because apparently I already have an account :P
[15:22:34] <bstrie> ChrisMorgan: looking forward to the inevitable dominance of rustgnix
[15:22:53] <ChrisMorgan> bstrie: I said *respond to requests*. I didn't say *how* it would respond.
[15:22:57] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[15:23:53] <ChrisMorgan> One way: accept connections and immediately send "HTTP/1.1 503 Service Unavailable\r\n\r\n" and close the connection.
[15:24:00] <bstrie> brilliant
[15:24:02] <bstrie> do that.
[15:24:30] <bstrie> this is how rust scales to 100 billion connections
[15:24:59] <bstrie> why stop there though
[15:25:01] <bstrie> 100 trillion
[15:25:18] <ChrisMorgan> Actually, for top performance I'd be writing such a thing in C at present. (Sorry.)
[15:25:31] <bstrie> ChrisMorgan: good luck with that memory safety!
[15:25:54] <ChrisMorgan> On a trivial server like this? Not enormously difficult.
[15:26:26] <bstrie> even a minute of downtime due to a segfault will cost you 60 quadrillion pageviews
[15:26:31] <bstrie> is it worth it?!?
[15:28:02] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[15:29:54] <ChrisMorgan> Hang on, I think I'll do this in hardware.
[15:30:43] <bstrie> new x64 instruction, "503 service unavailable"
[15:31:08] <bstrie> cements intel's dominance on server hardware
[15:31:17] <bstrie> actually I don't even know if intel is dominant on servers
[15:31:23] <bstrie> maybe low-power servers are in big demand
[15:31:33] <ChrisMorgan> I don't think they are yet.
[15:31:54] <Seldaek> can't you just do it with special fiber hardware? just beam a 503 in the tube on all frequencies
[15:32:06] <bstrie> hahaha
[15:32:11] <Seldaek> who needs TCP/IP and all that overhead
[15:32:17] <bstrie> we need to form a working group for this
[15:32:19] <ChrisMorgan> Seldaek: clients.
[15:32:49] * bstrie wonders if the ACM has a SIGFAULT conference yet
[15:32:57] <Seldaek> ChrisMorgan: this is research territory, no need for clients, who would need a 503 anyway? Their client might as well optimize by returning 503 immediately 
[15:33:02] <Seldaek> then we save on the cabling ;)
[15:33:19] <bstrie> brilliant
[15:33:21] <bstrie> fork firefox instead
[15:33:27] <bstrie> wins every pagespeed benchmark
[15:33:32] *** Joins: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net)
[15:33:54] <Seldaek> yeah, if everyone would just fork firefox and add their content in, we could speed up the internet, and make it available offline
[15:33:55] <bstrie> prefetching? don't make me lol. how about predetermination.
[15:34:04] <Seldaek> just a mega switch statement with every url 
[15:34:28] <ChrisMorgan> Let's hold this another 217 or so days, eh?
[15:34:36] <Seldaek> :p
[15:35:00] *** Quits: Kruppe (user@moz-EE1E894A.home3.cgocable.net) (Ping timeout)
[15:37:52] *** Joins: sao (Mibbit@moz-3D556E4B.amazon.com)
[15:38:45] *** Quits: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca) (Connection reset by peer)
[15:39:02] <sao> quick question...does anyone know why raw pointers are required inside iterator blocks to reference the iterator variable? 
[15:39:56] <bstrie> sao: that sounds gross, can you give me an example of what you mean?
[15:41:09] <bstrie> sao: this works for me: https://gist.github.com/bstrie/6355250
[15:41:46] <sao> from kibwen's blog:
[15:41:47] <sao> https://gist.github.com/master-and-commander/6355253#file-rust-iterator
[15:42:15] <Thiez> that is not a raw pointer
[15:42:29] <bstrie> sao: ah, the * there is just a pointer dereference. same as in C
[15:42:32] <bstrie> it's not unsafe
[15:43:04] <bstrie> sao: also, I know kibwen quite well, and I can assure you that he doesn't have a blog :P
[15:43:35] <sao> okay, kibwen posted a blog on the rust subreddit
[15:43:43] <bstrie> sao: that's lkuper's blog
[15:44:05] <bstrie> she's one of the rust interns
[15:44:14] <sao> oh, okay thanks
[15:44:23] <zeuxcg> I'm tryint to read a struct from the file
[15:44:28] <zeuxcg> Is this the best way?
[15:44:33] <zeuxcg>                     let buffer = reader.read_bytes(size_of::<DDSHeader>());
[15:44:33] <zeuxcg>                     *(vec::raw::to_ptr(buffer) as *DDSHeader)
[15:44:52] <bstrie> zeuxcg: there's literally no best practices wrt IO yet, because we're completely rewriting the library
[15:44:55] <bstrie> sorry :(
[15:44:59] <zeuxcg> mkay :)
[15:45:02] <zeuxcg> whatever works then
[15:45:05] <bstrie> indeed
[15:45:27] <bstrie> just stick a big ol comment on top saying //THIS IS TERRIBLE BUT WHATEVER I GUESS and come back later once we have our new io lib
[15:45:33] <bstrie> which should be... worlds better
[15:45:46] <Blub\w> inhabitable worlds?
[15:45:48] <bstrie> we've got a lot of folks working on it right now
[15:45:51] <sao> bstrie: in the gist I posted, is the "vec_elem" a stack variable?
[15:45:51] <bstrie> Blub\w: we sure hope so
[15:45:57] <bstrie> sao: yes
[15:46:16] <bstrie> sao: actually, wait
[15:46:29] <bstrie> sao: did you read further on in that blog post, where it explains how the new syntax looks?
[15:46:36] <bstrie> the new iterator syntax
[15:46:59] <sao> I'm aware of the internal-
[15:47:04] <sao> internal->external
[15:47:46] <sao> but they both had the * dereference, and I was confused as I thought that was only used in unsafe code
[15:48:56] <bstrie> sao: yes, we use the * character both as general pointer pointer-dereference and as the type of unsafe pointers. not ideal, but we do it because it's familiar to C programmers
[15:49:58] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[15:50:04] <Thiez> perhaps we should use ^ for unsafe pointers
[15:50:18] <Thiez> then our unsafe pointer-pointers will look so happy
[15:50:19] <Thiez> ^^ptr
[15:50:23] <sao> I like the idea of differentiating them
[15:50:42] <bstrie> Thiez: are you aware that we had that exact discussion years ago? :P
[15:51:39] <bstrie> sao: with the new external iterators, here's exactly what the code expands into: https://gist.github.com/bstrie/6355355
[15:51:45] <Axord> Clearly some ideas are timeless
[15:51:53] <bstrie> sao: as you can see there, the `i` is a pointer to a stack-allocated value
[15:52:06] <Thiez> bstrie: I am now
[15:52:33] <bstrie> sao: if you're using a version of rust that has our new external iterators, you can do "rustc --pretty expanded foo.rs" to see this for yourself
[15:53:11] <sao> awesome...I was about to ask about that! :)
[15:53:16] <Seldaek> bstrie: what's the expanded? post-macro/transformations stuff?
[15:53:34] <bstrie> sao: it's actually just an implementation detail that you can see this stuff at the moment, external iterators are sort of a parser hack right now :P
[15:53:38] <pauls> Seldaek: yes.
[15:54:02] <bstrie> Seldaek: --pretty invokes the pretty-printer, and expanded is one of its arguments
[15:54:11] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[15:54:20] <bstrie> Seldaek: you can also do stuff like "--pretty typed" to insert all the inferred types on variables
[15:54:37] *** Quits: sebcrozet (sebcrozet@moz-2517AE39.w80-13.abo.wanadoo.fr) (Ping timeout)
[15:54:41] <Seldaek> bstrie: yeah I was asking about what expanded means not how to getopts() :p
[15:55:03] <Seldaek> but I'll just try it for myself, sounds interesting
[15:55:15] *** Joins: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP)
[15:55:23] <bstrie> Seldaek: it's invaluable for debugging macros
[15:55:54] <sao> I think it is about time to start using the launchpad nightly builds...I always feel a few steps behind when I have questions 
[15:56:42] <Seldaek> sao: yeah I think you have like a couple weeks after every release where you can still make sense of things here, and then you have to use snapshots or build yourself :)
[15:56:42] <sao> one last question:
[15:56:43] *** Joins: jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[15:57:10] <sao> I hate to be all business-y but is there an ETA or timeline for the new IO lib?
[15:57:14] *** Joins: sebcrozet (sebcrozet@moz-F96421F3.w80-13.abo.wanadoo.fr)
[15:57:43] <bstrie> sao: not yet, still very much in flux. maybe a few months still? no promisess
[15:57:45] *** Joins: lkuper_ (lkuper@moz-D862222C.dhcp-bl.indiana.edu)
[15:58:05] <Seldaek> bstrie: huh ok so yes one clearly sees there how for x in y {} just expands to a loop {}, pretty cool
[15:58:18] <Seldaek> or pretty expanded rather
[15:58:41] <bstrie> rustc --pretty cool 8).rs
[15:59:04] *** Quits: sebcrozet (sebcrozet@moz-F96421F3.w80-13.abo.wanadoo.fr) (Ping timeout)
[15:59:14] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[15:59:14] *** ChanServ sets mode: +o brson
[15:59:14] <Seldaek> I think cool should be an alias for expanded definitely
[15:59:39] <Seldaek> anyway, work calls
[15:59:56] <pauls> `--pretty cool` ought to emit encouraging comments on particularly good lines of code.
[16:00:01] <sao> bstrie: are there going to be major syntax changes with the new IO lib? I guess I should be writing my code in a haskell-y all-IO-in-one-place style. 
[16:00:02] <pauls> `//Awesome!`
[16:00:13] *** Quits: zeuxcg (zeuxcg@moz-80D1F912.hsd1.ca.comcast.net) (Ping timeout)
[16:00:17] <pauls> `/* That's how we do it! */`
[16:00:32] <pauls> `/// This function is sweeeet.`
[16:00:53] *** Joins: sebcrozet (sebcrozet@moz-F96421F3.w80-13.abo.wanadoo.fr)
[16:00:55] <myname> i don't think that's what a compiler is for, but i like the idea
[16:00:59] <Seldaek> pauls: it's a nice touch that it would use every possible comment style so as to not offend anyone's sensitivities
[16:01:09] *** lkuper_ is now known as lkuper
[16:02:27] *** Joins: pnkfelix1 (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[16:02:32] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[16:02:43] *** Quits: sebcrozet (sebcrozet@moz-F96421F3.w80-13.abo.wanadoo.fr) (Ping timeout)
[16:02:56] *** AutomatedTester is now known as AutomatedTester|AFK
[16:04:12] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[16:05:57] *** Joins: dherman (dherman@moz-BBE3ABD.mv.mozilla.com)
[16:05:57] *** ChanServ sets mode: +o dherman
[16:06:40] <Aszarsha> Hi everybody :-) I requested a mailing-list subscription around 20h ago and it still hasn't been accepted. Is it normal ?
[16:06:40] <flaper87> bblum: ping
[16:07:04] *** Joins: ecr (Thunderbir@moz-BBE3ABD.mv.mozilla.com)
[16:07:13] *** Quits: ecr (Thunderbir@moz-BBE3ABD.mv.mozilla.com) (Quit: ecr)
[16:07:48] *** Joins: Florob (Florob@moz-39532932.de)
[16:08:41] *** Joins: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[16:08:48] *** Quits: jfbk (textual@moz-EEA9CFB3.nyc.res.rr.com) (Ping timeout)
[16:08:55] *** Joins: ecr (Thunderbir@moz-BBE3ABD.mv.mozilla.com)
[16:09:15] <kimundi> Aszarsha: I think it is normal
[16:09:49] <SiegeLord> It took a day or so for mine to be accepted
[16:09:54] <bstrie> Aszarsha: the devs are the ones who approve those, and they only check them every so often. ask brson when he's on in a few hours
[16:10:20] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[16:10:21] *** ChanServ sets mode: +o tjc
[16:10:21] *** Quits: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[16:10:52] <Aszarsha> kimundi, bstrie: ok, thank you
[16:11:07] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[16:11:07] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/3mD3SA
[16:11:07] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[16:11:11] <Aszarsha> SiegeLord: thank you too :)
[16:11:31] *** Quits: bent (chatzilla@moz-932324BF.hsd1.ca.comcast.net) (Quit: ChatZilla 0.9.90.1-rdmsoft [XULRunner 22.0/20130619132145])
[16:12:51] *** Joins: jfbk (textual@moz-EEA9CFB3.nyc.res.rr.com)
[16:14:40] *** Quits: sao (Mibbit@moz-3D556E4B.amazon.com) (Quit: http://www.mibbit.com ajax IRC Client)
[16:16:25] *** Joins: sebcrozet (sebcrozet@moz-A855F6C0.w82-127.abo.wanadoo.fr)
[16:16:57] <Aszarsha> It there anything I can do to speed-up a make run ? It looks like -jN does not work when compiling stageM (when rustc is launched to bootstrap ?).
[16:17:04] *** Quits: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr) (Ping timeout)
[16:17:28] <bstrie> Aszarsha: indeed, rust itself doesn't build in parallel. -jN only helps with llvm (but it helps a hell of a lot)
[16:18:43] <Aszarsha> bstrie: yes it helps... the first time. and I already have a local copy of llvm, it's a bummer rust does not uses upstream
[16:18:49] *** Joins: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr)
[16:18:59] <bstrie> Aszarsha: help us upstream our llvm patches then :)
[16:19:07] *** Joins: pcwalton (pcwalton@moz-FA69872D.dsl.snfc21.pacbell.net)
[16:19:07] *** ChanServ sets mode: +o pcwalton
[16:19:40] <pcwalton> anyone have the etherpad?
[16:19:44] <pcwalton> brson: ^
[16:19:44] <Aszarsha> bstrie: might as well do that, but let me become familiar with the language before... :)
[16:19:57] <kmc> pcwalton: https://etherpad.mozilla.org/Meeting-weekly-2013-08-27
[16:19:59] <pcwalton> I'm in a starbucks
[16:20:37] <bstrie> Aszarsha: pshaw, llvm is in C++, so you can help us without knowing rust :)
[16:22:00] <cmr> Is graydon ill?
[16:28:05] *** Quits: tcr (tcr@D26BCFC9.C2203064.EDCE493E.IP) (Client exited)
[16:28:05] <ecr> cmr: he's on vacation I think
[16:28:22] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[16:28:22] <Aszarsha> bstrie: yes, I know llvm is in c++ :p how hackers on the rust codebase manage their code-compile-test cycle with > 20min compiles ? on my config, "make && make" does the compilation steps two times one after the other and does not seem to check for changed files
[16:29:31] <ldlework> Can we get an animated cartoon explaining rust pointer ownership for idiots like me?
[16:29:36] <ldlework> :)
[16:30:00] *** Quits: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr) (Ping timeout)
[16:30:29] *** Joins: Houm (Houm@moz-25669AA8.fbx.proxad.net)
[16:30:30] *** Joins: jclements (jclements@moz-62D9F423.wireless.calpoly.edu)
[16:31:18] <cmr> ldlework: http://cmr.github.io/blog/2013/08/13/rust-by-concept/ is a preliminary document hoping to explain it well
[16:31:19] <tjc> ldlework: if someone in the community is an artist and wants to volunteer their help illustrating it, then sure! :-)
[16:31:25] <cmr> not quite animated cartoon though :p
[16:31:37] <ldlework> hehe
[16:31:40] <cmr> Aszarsha: we just suffer.
[16:32:01] <cmr> Aszarsha: it does only recompile if it needs to, though
[16:32:07] <cmr> it's the bootstrapping that hurts the most.
[16:33:28] <Aszarsha> I have plenty of "Warning: removing previous 'libXXX-*.so' libraries: [...]" and they seem to be recompiled thereafter. Is that normal ?
[16:33:45] <cmr> Aszarsha: yes, if any file changed.
[16:34:02] <Aszarsha> it does it every time i launch make.
[16:34:09] <Aszarsha> make && make does it
[16:34:13] <quasisphere> Hey again. :P I don't quite get lifetimes. I'm writing an IRC bot as a toy project, and have trouble compiling the code at http://pastebin.com/2tnUWda2 Any ideas?
[16:34:21] <cmr> weird
[16:34:23] <cmr> WFM
[16:35:01] <olsonjeffery> lifetimes is going to be our Third Law, heh.
[16:35:29] <quasisphere> :)
[16:35:42] <bblum> flaper87: pong
[16:35:43] *** Joins: mihneadb (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net)
[16:35:58] <tjc> lifetimes: Rust :: monads : Haskell
[16:36:17] <quasisphere> I got monads already :P
[16:36:27] <ecr> lifetimes are just burritos...
[16:36:56] <flaper87> bblum: hey, how are you doing?
[16:37:00] <acrichto> olsonjeffery: do you have quick access to a windows machine?
[16:37:10] <bblum> flaper87: not bad, what's up?
[16:37:29] *** Quits: cowboyd (cowboyd@1D8844A7.1B729417.CEE440B6.IP) (Client exited)
[16:37:29] <flaper87> bblum: just wanted to let you know I rebased the issue
[16:37:46] <flaper87> s/issue/PR/
[16:37:52] <bblum> ok yeah
[16:37:54] <bblum> i'll take a look
[16:38:49] *** Joins: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr)
[16:38:53] *** Joins: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net)
[16:39:36] <flaper87> bblum: thanks a lot
[16:39:37] *** Joins: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP)
[16:40:20] *** Quits: victorporof (victorporo@DA4ABEAF.1DE10CA8.D8E68FF6.IP) (Quit: victorporof)
[16:41:45] *** Joins: echristo (echristo@DCF57675.D6CCE4AE.77834EAA.IP)
[16:42:03] *** Quits: fabiand (fabiand@moz-9C5CEC31.adsl.alicedsl.de) (Quit: Verlassend)
[16:42:23] *** Joins: tcr (tcr@D26BCFC9.C2203064.EDCE493E.IP)
[16:42:49] <olsonjeffery> acrichto: yes
[16:42:55] <olsonjeffery> although i don't have llvm built
[16:43:02] <olsonjeffery> i have a fresh checkout
[16:43:11] <olsonjeffery> im already tracking your repo as well, heh
[16:43:15] <acrichto> olsonjeffery: oh nvmd, the uv process request wedged on windows and it'll take me awhile to debug it
[16:43:32] <olsonjeffery> ah.
[16:43:55] <olsonjeffery> what's the test name?
[16:44:04] <acrichto> bootstrapping
[16:44:11] <acrichto> which is confusing to me
[16:44:19] <acrichto> it couldn't compile stage1 libstd
[16:44:20] <olsonjeffery> shouldn't happen until stage1
[16:44:29] <olsonjeffery> yeah, curious
[16:44:35] <olsonjeffery> well ill get a build going
[16:44:38] <acrichto> we do use std::run to run the linker I believe
[16:44:57] <olsonjeffery> and it'll be ready by early next week!
[16:45:00] <acrichto> but it's not stressful, it's just in one event loop (I think)
[16:45:03] <acrichto> :)
[16:45:16] <olsonjeffery> the windows build is brutal
[16:45:25] <olsonjeffery> it takes my vm like 5 minutes just to run ./configure. don't know what it is.
[16:45:26] *** Quits: davbo (dave@moz-3FFA637C.oucs.ox.ac.uk) (Client exited)
[16:45:42] <Florob> What would people expect to happen if one accidentally allocated a [[0, ..1024], ..768] on the stack?
[16:45:48] <olsonjeffery> not a horrible vm, either.. two-cores on a sandy bridge i5 and 6gigs of ram
[16:45:59] *** Joins: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net)
[16:45:59] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[16:45:59] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/UDHhVA
[16:45:59] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[16:46:00] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[16:46:00] <ghrust> 01[13rust01] 15bors pushed 6 new commits to 06auto: 02http://git.io/qomrBw
[16:46:00] <ghrust> 13rust/06auto 14cd92d2c 15Flaper Fesp: Make rekillable consistent with unkillable...
[16:46:00] <ghrust> 13rust/06auto 14c4093b4 15Flaper Fesp: Testing rekillable fails when called from outside an unkillable block
[16:46:00] <ghrust> 13rust/06auto 145fc4045 15Flaper Fesp: Don't make the runtime exit on illegal calls
[16:46:02] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[16:48:09] *** Quits: maik (maik___@moz-64456714.dip0.t-ipconnect.de) (Client exited)
[16:48:32] <SiegeLord> So, should I be using extern "C" or externfn! ?
[16:48:34] <kmc> olsonjeffery: does it use Cygwin? Cygwin can be really slow at stuff like fork()
[16:48:44] <kmc> so I'm not surprised that a big shell script is terribly slow on Cygwin
[16:49:12] *** Quits: Axord (xord@moz-1B228827.lsanca.dsl-w.verizon.net) (Quit: I'm sure it's perfectly safe)
[16:50:04] <ecr> SiegeLord: You should use externfn! when making a binding. It inserts some attributes that handle some stack management for you.
[16:50:56] <SiegeLord> Any inefficiencies involved with that?
[16:52:01] *** Quits: CarpNet (ac@moz-FD24B77.sohonet.co.uk) (Quit: Leaving)
[16:52:27] <ecr> It's a little subtle. You should talk to nmatsakis for details.
[16:53:00] *** Joins: riley (riley@8BA43816.9AA11D69.65DDFA89.IP)
[16:53:12] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[16:55:13] *** Quits: sebcrozet (sebcrozet@moz-A855F6C0.w82-127.abo.wanadoo.fr) (Ping timeout)
[16:59:09] <nmatsakis> SiegeLord: externfn! makes a Rust wrapper around the C function that does a stack switch; whether that is more or less efficient depends on how often you're calling the function, whether you are using big stacks (as is currently the default) and a few other factors...
[16:59:40] <SiegeLord> I mean, relative to making my own wrapper
[17:00:17] <SiegeLord> Unless I group calls to C functions, it shouldn't matter right?
[17:00:22] *** Joins: azakai (alon@moz-BBE3ABD.mv.mozilla.com)
[17:00:39] *** Joins: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net)
[17:00:41] <SiegeLord> That is, my wrapper calls N C functions, and this wrapper is the one annotated
[17:02:46] *** Quits: pcwalton (pcwalton@moz-FA69872D.dsl.snfc21.pacbell.net) (Quit: pcwalton)
[17:02:58] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[17:03:15] <ldlework> Does 'box' mean 'pointer with semantics' ?
[17:03:21] <ldlework> IE, it means 'pointer'
[17:03:35] *** Joins: maik (maik___@moz-64456714.dip0.t-ipconnect.de)
[17:03:54] <ecr> I interpret 'box' to just mean a boxed type, i.e. allocated on the heap.
[17:03:58] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[17:04:07] <ecr> as opposed to a stack allocated value
[17:04:11] *** Quits: pnkfelix1 (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: Leaving.)
[17:04:13] <SiegeLord> I think of it as a region on the heap
[17:04:36] <ldlework> So its more to do with lifetime?
[17:05:00] <maik> I made a small tutorial about lifetimes http://maikklein.github.io/2013/08/27/lifetimes-explained/ could someone read it?
[17:05:10] <maik> and tell me if I made some mistakes?
[17:05:19] <ecr> No, it's just about where the memory is allocated. Both ~ and @ are boxes and are allocated on the heap.
[17:05:56] <ecr> Lifetimes are mostly about ensuring & is always valid. & doesn't necessarily point to a box since it could be a pointer to something on the stack.
[17:06:02] <SiegeLord> I don't think you can explain lifetimes without pictures, heh
[17:06:30] <ldlework> Mozilla people should solicit their bosses for an animation budget
[17:06:33] <ldlework> XD
[17:07:19] <ecr> We'll hire Pixar
[17:07:25] <ecr> :P
[17:08:03] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[17:09:29] *** Joins: smj (Mibbit@moz-E56CAA08.dsl.bell.ca)
[17:09:32] *** Quits: StarLight (StarLight@moz-62469A19.dynamic.avangarddsl.ru) (Ping timeout)
[17:10:27] *** Joins: mschifer (Adium@moz-BBE3ABD.mv.mozilla.com)
[17:10:56] *** Joins: Kruppe (user@moz-EE1E894A.home3.cgocable.net)
[17:12:49] *** Quits: ktos (ktos@moz-D3D6BE18.swidnica.mm.pl) (Ping timeout)
[17:13:11] *** Joins: ktos (ktos@moz-D3D6BE18.swidnica.mm.pl)
[17:13:51] *** Joins: StarLight (StarLight@moz-3BE5D1FE.dynamic.avangarddsl.ru)
[17:14:12] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[17:14:12] *** ChanServ sets mode: +o brson
[17:15:42] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[17:17:07] *** Quits: txdv (quassel@966F3542.3BA477DA.14C26596.IP) (Ping timeout)
[17:17:35] *** Joins: txdv (quassel@966F3542.3BA477DA.14C26596.IP)
[17:18:47] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[17:19:23] *** Quits: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP) (Ping timeout)
[17:19:25] *** Joins: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP)
[17:19:46] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[17:19:47] *** ChanServ sets mode: +o brson
[17:20:53] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[17:20:53] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1435c68ff to 140baa927: 02http://git.io/N3iJvQ
[17:20:53] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[17:20:54] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[17:20:55] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/gz5Jug
[17:20:55] <ghrust> 13rust/06auto 149a63be1 15Daniel Micay: option: rm implementation of Add...
[17:20:55] <ghrust> 13rust/06auto 147841b77 15bors: auto merge of #8772 : thestinger/rust/option, r=anasazi...
[17:20:55] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[17:21:27] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[17:22:19] *** Quits: txdv (quassel@966F3542.3BA477DA.14C26596.IP) (Ping timeout)
[17:22:20] *** Joins: txdv (quassel@966F3542.3BA477DA.14C26596.IP)
[17:24:15] *** Joins: valenting (Thunderbir@8758046C.84D5EFD5.FB866788.IP)
[17:24:40] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[17:24:40] *** ChanServ sets mode: +o brson
[17:25:17] *** Joins: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com)
[17:25:33] *** Quits: barosl (barosl@3DE683B6.E551553C.7544CABF.IP) (Ping timeout)
[17:25:55] *** Joins: barosl (barosl@3DE683B6.E551553C.7544CABF.IP)
[17:25:59] *** Quits: tcr (tcr@D26BCFC9.C2203064.EDCE493E.IP) (Client exited)
[17:32:28] *** Joins: MauricioC (mauricioc@moz-2CFCD404.impa.br)
[17:33:09] <strcat> dbaupp: you know you can put 'Closes #xxxx' in the commit msg and github will close it for you right? (when it lands)
[17:33:37] <strcat> except it never succeeds in closing more than one :s
[17:35:09] *** Joins: tcr (tcr@D26BCFC9.C2203064.EDCE493E.IP)
[17:36:50] *** Quits: ktos (ktos@moz-D3D6BE18.swidnica.mm.pl) (Ping timeout)
[17:37:24] *** Joins: ktos (ktos@moz-D3D6BE18.swidnica.mm.pl)
[17:37:47] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[17:39:05] *** Quits: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com) (Input/output error)
[17:40:45] *** Joins: themgt (themgt@moz-FEBF730B.cm.vtr.net)
[17:44:14] *** Quits: valenting (Thunderbir@8758046C.84D5EFD5.FB866788.IP) (Ping timeout)
[17:45:06] *** Joins: fabiand (fabiand@moz-9C5CEC31.adsl.alicedsl.de)
[17:46:35] *** Joins: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com)
[17:46:55] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[17:47:24] *** Quits: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com) (Input/output error)
[17:47:45] *** Joins: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com)
[17:48:38] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[17:50:52] *** Joins: cowboyd (cowboyd@moz-1BD02A1E.sw.biz.rr.com)
[17:51:01] *** Quits: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com) (Input/output error)
[17:51:50] *** Joins: Aszarsha_ (Aszarsha@moz-16BFBC53.rev.numericable.fr)
[17:51:55] *** Joins: valenting (Thunderbir@8758046C.84D5EFD5.FB866788.IP)
[17:52:22] *** Quits: fabiand (fabiand@moz-9C5CEC31.adsl.alicedsl.de) (Quit: Verlassend)
[17:52:23] <Aszarsha_> I get some compile errors: src/rustllvm/PassWrapper.cpp:82:13: error: â€˜class llvm::TargetOptionsâ€™ has no member named â€˜FixedStackSegmentSizeâ€™      Options.FixedStackSegmentSize = 2 * 1024 * 1024; // XXX: This is too big.
[17:52:25] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[17:52:45] <Aszarsha_> sorry for the unwanted paste
[17:53:13] <acrichto> Aszarsha_: that looks like llvm is out of date
[17:53:27] <Aszarsha_> acrichto: git pull && ./configure && make
[17:53:34] *** Quits: valenting (Thunderbir@8758046C.84D5EFD5.FB866788.IP) (Ping timeout)
[17:53:46] <ecr> you may need to force LLVM to rebuild
[17:53:54] <ecr> make clean && make
[17:54:16] <Aszarsha_> ecr: trying right now
[17:54:17] <ecr> then get lunch while it takes approx 2 eternities
[17:54:37] <Aszarsha_> i'm used to work with llvm :)
[17:54:49] <acrichto> Aszarsha_: I normally blow everything awawy with `git clean -fdX`
[17:54:56] <acrichto> although that's a little dangerous...
[17:56:08] <Aszarsha_> acrichto, ecr: nop, make clean && make: same thing :/
[17:56:22] <ecr> hm
[17:56:27] *** Quits: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP) (Ping timeout)
[17:56:27] <Aszarsha_> (actually, make clean && make -j12 :-))
[17:56:29] <acrichto> yeah make clean doesn't clean llvm
[17:56:38] <acrichto> rm -rf ./llvm
[17:56:42] <acrichto> then reconfigure
[17:56:45] <acrichto> or make clean-llvm
[17:56:53] <acrichto> I don't completely trust that though
[17:56:56] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[17:57:50] *** Quits: tcr (tcr@D26BCFC9.C2203064.EDCE493E.IP) (Client exited)
[18:00:08] *** Joins: eatkinson (eatkinson@moz-DACC1A92.dsl.bell.ca)
[18:00:19] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[18:01:47] *** Joins: tikue (tkuehn@moz-424BC304.hsd1.pa.comcast.net)
[18:01:50] <strcat> my touchpad driver got ridiculous bad since the last update
[18:02:10] <strcat> under high CPU load, it gives up and decides that I'm not allowed to move the cursor anymore - just scroll
[18:02:14] <strcat> have to disable/enable :s
[18:02:49] <strcat> (also, running run-pass/compile-fail/run-fail with make -j4 in multiple builds is somewhat of a bad idea)
[18:04:12] <flaper87> bblum: tests failed, but I ran them locally and they passed all
[18:05:51] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[18:07:24] *** Joins: valenting (Thunderbir@moz-F42CB1FE.residential.rdsnet.ro)
[18:07:37] <flaper87> bblum: mmh, nevermind, I think I found something
[18:07:58] *** Joins: sk (sk@60A96C0.50B2D8C.78DD174B.IP)
[18:09:41] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[18:10:57] <flaper87> bblum: trailing space, just pushed a "fix" for that
[18:11:01] *** kimundi is now known as zz_kimundi
[18:11:21] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[18:13:20] <tikue> i have a question about channels
[18:13:49] <tikue> is the only proper way to close a channel to either a) send an exit msg, or b) have the port use try_recv and exit on None
[18:13:54] <tikue> close a stream*
[18:14:12] *** zz_kimundi is now known as kimundi
[18:14:37] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[18:15:30] *** Quits: eatkinson (eatkinson@moz-DACC1A92.dsl.bell.ca) (Quit: eatkinson)
[18:16:01] *** Quits: pcdummy (pcdummy@moz-CF4CA865.page4me.ch) (Ping timeout)
[18:16:34] *** Joins: sebcrozet (sebcrozet@moz-2517AE39.w80-13.abo.wanadoo.fr)
[18:16:43] <Aszarsha> maik: I don't know if everything is accurate (just started using Rust), but it sure is pretty clear ! :)
[18:17:19] *** Joins: pcdummy (pcdummy@moz-CF4CA865.page4me.ch)
[18:17:50] *** Joins: Jesin (Jessin_@moz-48B48C95.eecs.lehigh.edu)
[18:18:06] <tikue> is there a way to silently fail if a port is closed when you call .recv()
[18:18:20] <tikue> i just want to end the task when recv() fails
[18:18:27] <tikue> rather than using try_recv and matching every time
[18:18:45] *** Quits: maik (maik___@moz-64456714.dip0.t-ipconnect.de) (Ping timeout)
[18:19:26] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[18:19:56] *** sam113101 is now known as sam113101_afk
[18:20:05] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Client exited)
[18:21:05] *** sam113101_afk is now known as sam113101
[18:21:55] *** Joins: zeuxcg (zeuxcg@1828591B.F9F834F5.C943C01E.IP)
[18:22:15] *** Quits: barosl (barosl@3DE683B6.E551553C.7544CABF.IP) (Ping timeout)
[18:22:23] *** Quits: valenting (Thunderbir@moz-F42CB1FE.residential.rdsnet.ro) (Ping timeout)
[18:23:19] *** Joins: barosl (barosl@3DE683B6.E551553C.7544CABF.IP)
[18:25:39] *** Quits: zeuxcg (zeuxcg@1828591B.F9F834F5.C943C01E.IP) (Ping timeout)
[18:26:47] *** Joins: tcr (tcr@D26BCFC9.C2203064.EDCE493E.IP)
[18:27:12] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[18:27:13] *** Quits: dherman (dherman@moz-BBE3ABD.mv.mozilla.com) (Quit: dherman)
[18:28:31] *** Quits: ktos (ktos@moz-D3D6BE18.swidnica.mm.pl) (Ping timeout)
[18:29:47] *** Joins: ktos (ktos@moz-D3D6BE18.swidnica.mm.pl)
[18:30:54] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[18:30:54] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/gz5Jug
[18:30:54] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[18:31:05] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[18:31:05] *** ChanServ sets mode: +o pcwalton
[18:31:18] *** Quits: Kroisse (Kroisse@7CF4064D.E3B51CAE.ECA1BB11.IP) (Ping timeout)
[18:31:53] *** Quits: klutzy (th@BA61F396.8E859986.ECA1BB11.IP) (Ping timeout)
[18:31:53] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[18:32:00] *** Joins: jviereck (Adium@moz-918782F3.dip0.t-ipconnect.de)
[18:32:37] <brson> tikue: recv() will fail if the sender closes
[18:32:58] <tikue> brson: is there way to spawn a task that silently fails
[18:33:03] <brson> tikue: spawn_unlinked
[18:33:05] <tikue> thx
[18:33:12] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[18:33:12] <brson> if that function exists
[18:33:12] <tikue> is that in the prelude
[18:33:15] <brson> no
[18:33:17] <tikue> ah ok
[18:33:27] *** Joins: Kroisse (Kroisse@7CF4064D.E3B51CAE.ECA1BB11.IP)
[18:33:28] <brson> grep for unlinked though in std::task
[18:33:39] <brson> it may require using a task builder
[18:33:48] *** Quits: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[18:34:00] <tikue> ok
[18:34:01] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[18:34:02] <tikue> thank you
[18:34:20] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Connection reset by peer)
[18:35:53] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[18:35:53] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/FZJmYQ
[18:35:53] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[18:35:57] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[18:35:57] <ghrust> 01[13rust01] 15bors pushed 7 new commits to 06auto: 02http://git.io/xaK8Rg
[18:35:57] <ghrust> 13rust/06auto 14cd92d2c 15Flaper Fesp: Make rekillable consistent with unkillable...
[18:35:57] <ghrust> 13rust/06auto 14c4093b4 15Flaper Fesp: Testing rekillable fails when called from outside an unkillable block
[18:35:58] <ghrust> 13rust/06auto 145fc4045 15Flaper Fesp: Don't make the runtime exit on illegal calls
[18:36:00] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[18:36:32] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[18:37:38] <tikue> i don't understand fully the rules governing "cannot move out of captured outer variable in a heap closure"
[18:37:50] *** mihneadb is now known as mihneadb|lunch
[18:37:55] <Aszarsha_> Freshly compiled rust: $ rust --version rust 0.8-pre (0baa927 2013-08-27 08:00:51 -0700) host: x86_64-unknown-linux-gnu pthread_mutex_lock(&_mutex) failed in /home/thume/Work/rust-src/src/rt/sync/lock_and_signal.cpp at line 79, result = 22 (Invalid argument). Is that a known bug ?
[18:38:01] <tikue> something like ``` let (port, chan) = stream(); do spawn { chan.send("test"); } port.recv()``` works just fine
[18:38:03] *** Joins: klutzy (th@BA61F396.8E859986.ECA1BB11.IP)
[18:38:07] <tikue> why doesn't it trigger that error
[18:40:20] *** Quits: tcr (tcr@D26BCFC9.C2203064.EDCE493E.IP) (Client exited)
[18:40:47] *** Joins: valenting (Thunderbir@moz-F42CB1FE.residential.rdsnet.ro)
[18:41:12] <tikue> ah it's because i didn't move it once it was in there
[18:41:39] <tikue> you can't do ```let foo = Foo; do spawn { move_var(foo); }```
[18:42:06] <sfackler> tikue: rustc isn't sure that the closure isn't going to run more than once.
[18:42:36] *** Quits: mihneadb|lunch (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net) (Connection reset by peer)
[18:42:40] *** Joins: mihneadb_ (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net)
[18:42:49] *** Joins: pwalton (pcwalton@moz-BBE3ABD.mv.mozilla.com)
[18:43:10] *** Joins: eatkinson (eatkinson@moz-DACC1A92.dsl.bell.ca)
[18:43:27] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[18:43:27] *** pwalton is now known as pcwalton
[18:43:39] <sfackler> tikue: https://github.com/mozilla/rust/wiki/Doc-under-construction-FAQ
[18:44:18] *** Quits: themgt (themgt@moz-FEBF730B.cm.vtr.net) (Ping timeout)
[18:44:57] <tikue> ahhh right, onceness
[18:46:07] <tikue> brson: spawn_unlinked still prints the failure though. is there a way to mute the printout
[18:47:52] *** Joins: maik (maik___@moz-64456714.dip0.t-ipconnect.de)
[18:50:29] <maik> Aszarsha, thanks
[18:52:14] <brson> tikue: logging::console_off() will turn off logging completely but that's the best you can do at the moment
[18:52:21] <tikue> ok thanks brson 
[18:52:42] <brson> i wish that failure logging were handled differently, but i don't have a clear idea how
[18:53:12] <tikue> hm, option doesn't have a method that is essentially unwrap_or_default but with the default being a closure, is there?
[18:53:27] <tikue> brson: you mean instead of just printing to stdout?
[18:54:13] *** kimundi is now known as zz_kimundi
[18:54:46] <brson> tikue: yeah. sometimes you want to see what failed and sometimes you don't, but it's not clear whether we can be smarter about it by default. like, you definitely want to know wtf happened if main fails, but if you recover from task failure internally, then whatever, everything worked out
[18:55:04] <tikue> yeah, true
[18:55:28] <brson> maybe unlinked tasks don't want to change the failure log level to info as a start
[18:55:31] <brson> *do
[18:56:13] *** Quits: KindOne (KindOne@moz-92F6A2C3.dynamic.ip.windstream.net) (Ping timeout)
[18:56:42] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[18:57:02] <brson> strcat: how do i measure memory usage?
[18:57:07] <brson> peak memory usage
[18:57:11] <strcat> brson: cgroups, ideally
[18:57:16] <strcat> no other way to really measure
[18:57:27] <brson> is there a command I can use?
[18:57:42] <strcat> brson: I can tell you how to do it, it's not really as simple as 1 command
[18:57:42] <brson> trying to bisect this regression
[18:58:02] <strcat> brson: does /sys/fs/cgroup/memory/ exist?
[18:58:07] <brson> can jemalloc do it? perf?
[18:58:32] <strcat> brson: jemalloc has profiling, yeah, but you won't get total mem usage
[18:58:33] <brson> cgroup/memory does not exist
[18:58:37] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[18:58:37] <strcat> since the linker matters, etc.
[18:58:44] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[18:58:44] *** ChanServ sets mode: +o tjc
[18:58:56] *** Joins: dherman (dherman@moz-BBE3ABD.mv.mozilla.com)
[18:58:57] *** ChanServ sets mode: +o dherman
[19:00:06] *** Joins: KindOne (KindOne@moz-CF41ACCB.dynamic.ip.windstream.net)
[19:00:07] <strcat> brson: which OS is it? ubuntu?
[19:00:13] <brson> ubuntu
[19:00:40] *** Quits: tikue (tkuehn@moz-424BC304.hsd1.pa.comcast.net) (Quit: tikue)
[19:01:53] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Ping timeout)
[19:02:26] <strcat> brson: ah you need to boot with cgroup_enable=memory
[19:02:31] *** Quits: jviereck (Adium@moz-918782F3.dip0.t-ipconnect.de) (Quit: Leaving.)
[19:02:41] *** Joins: tikue (tkuehn@moz-424BC304.hsd1.pa.comcast.net)
[19:02:56] <strcat> on the kernel line
[19:03:42] * strcat isn't sure why they do that
[19:03:50] <strcat> on non-debian distros it's just there
[19:04:03] <brson> :'(
[19:05:55] <SiegeLord> rusti: '\0'
[19:06:10] <strcat> brson: basically all you need to do is 'mkdir /sys/fs/cgroup/memory/foobar' and then 'echo 0 > /sys/fs/cgroup/memory/foobar/cgroup.procs' within a process, and it will track the whole tree of processes spawned from there
[19:06:26] <strcat> and then when it's over, read /sys/fs/cgroup/memory/foobar/memory.max_usage_in_bytes
[19:06:42] <SiegeLord> That gives me unknown character escape: 48
[19:06:45] <SiegeLord> Is that normal?
[19:07:11] <tikue> why does do spawn require braces?
[19:07:17] <strcat> brson: the graphing on isrustfastyet just polls memory.usage_in_bytes
[19:07:22] <tikue> couldn't it just as well take any expression
[19:07:29] *** Joins: jviereck (Adium@moz-918782F3.dip0.t-ipconnect.de)
[19:08:01] *** Joins: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP)
[19:08:06] *** Quits: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP) (Quit: alisdair)
[19:08:08] *** Joins: lerc (quassel@B2E8CAD3.A8D14E52.788638A4.IP)
[19:08:10] <cmr> tikue: then it wouldn't like any of the other control flow things
[19:08:23] <cmr> also would need parens to disambig the first expr from the second
[19:08:34] <tikue> what do you mean first expr from the second
[19:08:37] <tikue> what's the second
[19:08:41] <cmr> do expr1 expr2
[19:08:47] <tikue> ohhh
[19:09:02] <Florob> IMHO that is already way to much syntactic sugar for spawn(||| {code}); Making an expression a closure implicitly seems very wrong to me.
[19:09:17] <strcat> brson: also, creating the dir + echo have to be done as root but then it can setuid to a non-root user (if you care)
[19:09:23] <cmr> Florob: it doesn't need to be a closure, it just needs to evaluate to one.
[19:09:24] <tikue> Florob: go does it as well
[19:09:31] <SiegeLord> How would I convert this to rust: http://pastebin.ca/2439116
[19:09:42] <SiegeLord> Doing #[cfg(os != "windows")] didn't work
[19:09:43] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[19:09:46] *** Quits: tikue (tkuehn@moz-424BC304.hsd1.pa.comcast.net) (Quit: tikue)
[19:10:04] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[19:10:09] <cmr> SiegeLord: #[cfg(not(os = "windows"))]
[19:10:13] <cmr> I think it might be win32 though
[19:10:39] <strcat> cmr: are you going to start running the irfy mem benching again?
[19:10:50] <cmr> strcat: hoping to bring it back up wednesday.
[19:10:59] <Florob> cmr, I was under the impression that the intent was: Â«do spawn computation()Â» and not Â«do spawn make_me_a_closureÂ». Or did I miss your point?
[19:11:16] <cmr> Florob: you missed the point
[19:11:26] <cmr> Florob: compution() is valid right now, as long as it returns a closure.
[19:11:29] <cmr> ...aiui
[19:11:51] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[19:12:37] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[19:12:52] *** Quits: Kruppe (user@moz-EE1E894A.home3.cgocable.net) (Ping timeout)
[19:12:52] <brson> SiegeLord: #[cfg(not(windows)] or #[cfg(not(target_os = "win32"))]
[19:13:25] <SiegeLord> I like that
[19:13:27] <Florob> cmr, yes, I got that. But the suggestion was to automatically create a closure invoking computation() instead, wasn't it? And that seems wrong to me.
[19:13:34] <SiegeLord> So should I submit a bug about '\0' ?
[19:13:35] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[19:13:38] <SiegeLord> Let me check if it exists first...
[19:15:22] *** Joins: eugals (Miranda@B708E85C.ADC52FD7.CF1D7DD0.IP)
[19:15:32] *** Quits: azakai (alon@moz-BBE3ABD.mv.mozilla.com) (Quit: Ex-Chat)
[19:16:03] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Quit: Jesse)
[19:17:09] <nsf> just learned from Go guys that they are thinking about changing split stacks thing into contiguous stacks thing
[19:17:16] *** Quits: cdidd (cdidd@moz-569E8B65.broadband.corbina.ru) (Ping timeout)
[19:17:16] *** Joins: azakai (alon@moz-BBE3ABD.mv.mozilla.com)
[19:17:21] <nsf> stack out-of-space condition is detected the same way
[19:17:32] <brson> nsf: what does 'contiguous stacks' mean?
[19:17:37] <nsf> but instead of allocating a chunk and changing a stack pointer
[19:17:52] <nsf> they allocate a larger chunk and move the contents of the current chunk + fixing the pointers
[19:18:02] <strcat> rust can't do that
[19:18:11] *** Parts: eugals (Miranda@B708E85C.ADC52FD7.CF1D7DD0.IP) (I'm a happy Miranda IM user! Get it here: http://miranda-im.org)
[19:18:12] <strcat> and Go can't do it if they want C bindings to work
[19:18:21] <brson> it would be challenging
[19:18:23] *** Joins: cdidd (cdidd@moz-65A6B6CA.broadband.corbina.ru)
[19:18:28] <nsf> what's nice about it, on function return there will be no need to go through stack chunk bounds
[19:18:31] <SiegeLord> Wait, I'm confused.... \0 doesn't work in strings either, I definitely remember seeing it used...
[19:18:45] <cmr> SiegeLord: \x00
[19:18:56] <nsf> that is if stack runs out of space in a tight loop - not a problem
[19:19:16] <SiegeLord> Hmm... I guess that works...
[19:19:24] <SiegeLord> Kind of long, but ok
[19:20:09] <nsf> strcat: well, what's wrong with C bindings? you can't really have a pointer onto the stack in Go if it escapes anyway
[19:20:28] <nsf> C bindings won't notice the difference
[19:20:34] <brson> nsf: i'm surprised they're doing that. i'll be interested to see if it works out
[19:20:51] <nsf> yeah, me too
[19:21:01] <pcwalton> they're going to try it with precise GC
[19:21:08] <pcwalton> we can't do it though because not every pointer is traced
[19:21:24] <pcwalton> we can't rewire references (borrowed pointers) that way
[19:21:43] *** Joins: achin (achin@moz-193F7FAD.ri.ri.cox.net)
[19:22:04] <nsf> but in rust you can control inlining somewhat, it helps avoiding problems with split stacks in tight loops
[19:22:04] <strcat> nsf: well, it seems like there are a lot of C libs where you have to pass a buffer to it and it holds onto it for a while
[19:22:23] <nsf> and in rust I guess you can allocate a large enough chunk in a problematic area explicitly?
[19:22:34] <nsf> or is it just for C functions?
[19:22:41] *** Joins: victorporof (victorporo@moz-18BD542A.pck.nerim.net)
[19:22:48] <strcat> you could put #[fixed_stack_size] on main before
[19:22:50] <brson> nsf: yes, you can explicitly ask for more stack in problem areas
[19:22:52] *** Joins: orshem (orshem@C5E06B1E.A5B6B765.E3D28531.IP)
[19:23:08] <strcat> atm we don't actually have segmented stacks (or stack overflow protection at all) due to the transition
[19:23:14] <nsf> strcat: Go compiler will move things to heap from the stack automatically if it sees pointer escapes
[19:23:31] *** Quits: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net) (Quit: leaving)
[19:23:32] <nsf> that actually creates some problems when writing bindings
[19:23:45] <cmr> nsf: that'd be really against rust's ethos
[19:23:53] <nsf> like creating global temporaries or storing them in a context structure
[19:23:56] <nsf> in order to avoid heap allocs
[19:24:13] <cmr> hiding an allocation
[19:24:25] <strcat> how do you deal with something like fuse or expat where they want you to pass them a buffer or context object and they hold onto it?
[19:24:27] <nsf> cmr: yeah, I understand and by no means I suggest it's good
[19:24:33] <nsf> it's good for a GCed language :)
[19:24:39] <strcat> fuse I guess is simple since you can only have 1
[19:24:49] <strcat> but that's not always true
[19:24:58] *** Joins: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP)
[19:25:00] <strcat> ICU has a lot of those
[19:25:05] * strcat shrugs
[19:25:11] <nsf> strcat: store it in the global var
[19:25:13] <achin> hello! following up on tjc's email about rustpkg -- i am wondering if there are docs that describe at a higher level what rustpkg is suppsoed to *do*?  
[19:25:22] <tjc> achin: Yes, there are --
[19:25:26] <strcat> nsf: so you can't have parallel access to a C library?
[19:25:32] <tjc> achin: https://github.com/mozilla/rust/blob/master/doc/rustpkg.md
[19:25:41] <nsf> strcat: protect the global var with mutex :)
[19:25:46] <tjc> certainly still incomplete
[19:26:11] *** Joins: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP)
[19:26:30] <nsf> strcat: at least to my knowledge, that's what bindings do
[19:26:32] <achin> tjc: thanks, though i already found it.  it describes how certain features are supposed to work, but i feel like i'm still missing something
[19:26:33] <nsf> I did that as well
[19:27:04] <achin> it sounds like `rustpkg` is a replacement for `rust` (among other things).  is that true?
[19:27:05] <nsf> strcat: https://github.com/nsf/gogobject/blob/master/gobject-2.0/gobject.go.in#L38-L70
[19:27:09] <tjc> achin: the other thing that might be useful to know is that the aspects of the design that have to do with workspaces and searching paths are strongly based on the Go package manager
[19:27:30] <nsf> strcat: as an example, but it's gtk, hence I don't need a mutex as the gtk assumes a global mutex anyway if you use it from multiple threads
[19:27:58] <strcat> I don't think it'd be awful to just do the same thing as vectors and make you reserve some amount of stack
[19:28:01] <strcat> when you spawn
[19:28:07] <achin> tjc: ok, that's helpful.  let me read up on that
[19:28:10] <Lovot> How would I convert a float to ~str?
[19:28:13] <strcat> or just get the default
[19:28:22] <cmr> Lovot: .to_str()
[19:28:26] *** Quits: zootm (calum@moz-DCC1F9C3.sgyl.cable.virginmedia.com) (Client exited)
[19:28:50] <tjc> achin: speciflcally, http://golang.org/cmd/go/
[19:28:56] <strcat> spawn_reserve(0) -> smallest possible stack, spawn_reserve(1024 * 1024 * 8) -> 8MiB segment
[19:29:11] *** Quits: victorporof (victorporo@moz-18BD542A.pck.nerim.net) (Ping timeout)
[19:29:11] <tjc> achin: it's not necessarily meant to be a replacement for `rust`. Probably once `rust` itself is in better shape, it will invoke rustpkg for building and installing packages
[19:29:21] <strcat> and ideally you would know the average usage or a soft upper bound, and never have allocations of segments at all.
[19:29:31] <strcat> you could just say 64K, and they'd still be pretty tiny
[19:29:40] <pcwalton> strcat++
[19:29:43] <nsf> strcat: yeah, would be nice to have that (if it's not in rust already)
[19:31:19] <pcwalton> ok, tests finally passing for my compiler speed improvement branch
[19:31:23] <pcwalton> now time to rebase it :)
[19:31:30] <achin> once a package is built/installed with rustpkg, how is it expected that an end-user find and run the stuff in $WS/bin/ ?
[19:31:44] <strcat> GNU pth just makes you pick the size (although they don't protect against overflow with growth)
[19:32:48] <tjc> achin: you can put any directory in the RUST_PATH -- so for example, if you wanted stuff to install into /usr/local, you would put it first in the RUST_PATH
[19:32:55] <tjc> of course then you would have to install as root
[19:33:29] <nsf> in Go we simply suggest adding $GOPATH/bin to $PATH
[19:33:42] <nsf> well, and it depends on what end-user means
[19:33:51] <nsf> end users prefer their distro packages mostly :)
[19:34:05] <nsf> or if end-user is a rust programmer
[19:34:09] *** Quits: sk (sk@60A96C0.50B2D8C.78DD174B.IP) (Quit: Leaving)
[19:34:11] <Lovot> cmr: I think I'm using it wrong: a.to_str(b); where a is the float and b is the target is not accepted by the compiler, a.to_str(); does not convert a to a string, but there are no errors
[19:34:15] *** Quits: maik (maik___@moz-64456714.dip0.t-ipconnect.de) (Ping timeout)
[19:34:15] <nsf> then adding stuff to $PATH sounds like a good idea
[19:34:35] <cmr> Lovot: "target"? What does a.to_str() if not convert it to a string?
[19:34:43] <tjc> nsf: that's also an option, it's up to the user
[19:35:03] <SiegeLord> I'm a smidgen confused... rustc isn't recognizing std::cast::transform if it's in a function that's inside a module, but recognizes it fine if it's in a function outside it
[19:35:12] <cmr> fn main() { let f = 123.0f; println(f.to_str()); }
[19:35:31] <achin> tjc: in that case, `rustpkg install` would create something like /usr/local/bin/x86-64-apple-darwin/bar ?  
[19:35:50] <tjc> achin: at this very moment it would be /usr/local/bin/bar, but eventually, yes
[19:36:06] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[19:36:27] <nsf> tjc: you have no idea how much misunderstanding users have with that workspace feature :)
[19:36:35] <achin> ok, so $PATH would need a small modification to include the host-tripple
[19:36:40] <tjc> nsf: you mean in Go?
[19:36:52] <nsf> yes, judging by experience with Go users
[19:37:00] <tjc> say moreâ€¦ where do they get confused?
[19:37:10] <tjc> I'd like to know so we can avoid those mistakes :-)
[19:37:14] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[19:37:23] <nsf> all sorts of things, some people decide to define GOPATH per project
[19:37:32] <nsf> there are even scripts on github which do that
[19:37:43] <tjc> that should be something that works, in theory
[19:37:47] <tjc> what kinds of problems does it cause?
[19:38:14] <nsf> and it brings all sort of problems, something doesn't find something, something becomes a different version of something
[19:38:19] <achin> when you say "some people" does that mean end-users? or project managers?
[19:38:19] <nsf> a mess in other words
[19:38:53] <Lovot> cmr: I figured it out, thanks for the help.
[19:38:54] *** flaper87 is now known as flaper87|afk
[19:38:57] <nsf> tjc: I don't see a way to avoid this, because it seems like a very simple thing
[19:39:02] <nsf> yet people often get it worng
[19:39:04] <nsf> wrong*
[19:39:18] <nsf> achin: Go developers mostly
[19:39:25] <tjc> nsf: do you think people should just be discouraged from setting different GOPATHs / RUST_PATHs for different projects?
[19:39:34] <nsf> yes
[19:39:52] <tjc> noted
[19:40:18] *** flaper87|afk is now known as flaper87
[19:40:29] <nsf> well, also perhaps it depends on community
[19:40:30] <pcwalton> just another reminder to avoid writing Local::take::<Scheduler> if you can
[19:40:31] <achin> does gopm have a way to install libraries/packages into a wholey unique location?  like python's virtualenvs?
[19:40:35] <pcwalton> I have dozens of these that bitrotted my change
[19:40:38] *** Joins: tcr (tcr@D26BCFC9.C2203064.EDCE493E.IP)
[19:40:56] <tjc> achin: what do you mean by "wholely unique"?
[19:41:09] *** Quits: wilkie (wilkie@moz-A435EAAD.pitbpa.fios.verizon.net) (Ping timeout)
[19:41:14] <SiegeLord> If I do use super::*; it works though
[19:41:19] <cmr> achin: it doesn't have any concept that *isn't* like virtualenv.
[19:41:23] <tjc> ah, ok, I see
[19:41:27] <tjc> yeah, I think cmr is right
[19:41:39] <tjc> depending on how you set your RUST_PATH, anyway
[19:41:43] <cmr> right
[19:41:46] <tjc> but the default behavior sounds like virtualenvs
[19:41:53] <SiegeLord> It sounds like a prelude thing... is prelude per-crate or per mod or per file?
[19:41:56] <tjc> (which I only just read about, so...)
[19:42:19] *** Quits: tcr (tcr@D26BCFC9.C2203064.EDCE493E.IP) (Ping timeout)
[19:42:24] <achin> ok.  so if i want my project to use a new location X (which contains some libraries i need)... do i need to change RUST_PATH?  or how does rust find libraries for linking?
[19:42:46] <achin> s/rust/rustc/
[19:42:53] <tjc> achin: when you say use a new location X, do you just mean search for libraries in X? or also put build output for your project in X?
[19:42:58] <cmr> achin: you only need to change RUST_PATH if you already have it set.
[19:43:06] <cmr> achin: by default rustpkg puts things in the cwd
[19:43:11] <cmr> cwd/.rust, specifically
[19:43:53] <achin> ok.  so i might mkdir projectFoo, and within projectFoo, use "rustpkg install" to install the dependencies for projectFoo and they would be installed to projectFOo/.rust/
[19:44:03] <tjc> right
[19:44:17] <achin> got it. so yeah, that does like "virtualenv by default".  cool
[19:44:37] <Earnestly> cmr: Is RUST_PATH and others documented anywhere?
[19:44:49] *** Quits: jviereck (Adium@moz-918782F3.dip0.t-ipconnect.de) (Quit: Leaving.)
[19:44:54] <tjc> Earnestly: Yes, in https://github.com/mozilla/rust/blob/master/doc/rustpkg.md
[19:45:19] <Earnestly> Ah sorry, I found it, thanks
[19:45:30] <tjc> no prob!
[19:45:53] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[19:45:53] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/xaK8Rg
[19:45:53] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[19:48:23] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Quit: ChatZilla 0.9.90.1 [Firefox 24.0/20130826142034])
[19:48:27] *** Joins: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca)
[19:49:24] *** Joins: jviereck (Adium@moz-918782F3.dip0.t-ipconnect.de)
[19:49:31] *** Quits: jviereck (Adium@moz-918782F3.dip0.t-ipconnect.de) (Client exited)
[19:49:57] <tjc> I'm off to lunch, be back in an hour or so
[19:50:54] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[19:50:54] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/QOeDlg
[19:50:54] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[19:50:55] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[19:50:56] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/_mNMoA
[19:50:56] <ghrust> 13rust/06auto 1420567a0 15Daniel Micay: vec: implement `DeepClone`
[19:50:56] <ghrust> 13rust/06auto 149f3cf3a 15Daniel Micay: repr: print integer/float suffixes
[19:50:56] <ghrust> 13rust/06auto 143b05a18 15Daniel Micay: repr: include mutability qualifier in visit_ptr
[19:50:57] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[19:51:16] *** Joins: tcr (tcr@D26BCFC9.C2203064.EDCE493E.IP)
[19:52:45] *** Quits: doomlord (doomlod@moz-13E69BC8.range86-180.btcentralplus.com) (Quit: Leaving)
[19:54:28] *** Quits: valenting (Thunderbir@moz-F42CB1FE.residential.rdsnet.ro) (Connection reset by peer)
[19:54:29] *** Joins: valenting1 (Thunderbir@moz-F42CB1FE.residential.rdsnet.ro)
[19:55:33] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[19:56:34] <quasisphere> so if I have fn foo(x : &str, y : &str) {Â let dummy = [x,y]; ... }, then the compiler complains about lifetime mismatch between x and y. how could I fix this?
[19:56:58] *** Quits: valenting1 (Thunderbir@moz-F42CB1FE.residential.rdsnet.ro) (Ping timeout)
[19:57:09] *** Joins: jviereck (Adium@moz-918782F3.dip0.t-ipconnect.de)
[19:57:16] <kmc> you could try  fn foo<'t>(x : &'t str, y : &'t str) {Â let dummy = [x,y]; ... }
[19:58:22] *** Joins: mihneadb|lunch (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net)
[19:58:32] *** Quits: jviereck (Adium@moz-918782F3.dip0.t-ipconnect.de) (Quit: Leaving.)
[19:58:35] *** Quits: mihneadb_ (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net) (Ping timeout)
[19:58:59] <quasisphere> kmc: thanks. can you explain what that really means?
[19:59:15] *** Joins: tikue (quassel@moz-FEADCD38.hsd1.pa.comcast.net)
[19:59:40] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[19:59:49] <kmc> every borrowed pointer has an associated lifetime, which is part of its type
[19:59:50] <nsf> quasisphere: http://maikklein.github.io/2013/08/27/lifetimes-explained/
[20:00:05] <kmc> when you write just &str, the lifetime is inferred, but you can also name them with variables like 't
[20:00:07] <nsf> appeared on reddit recently
[20:00:10] <nsf> explains lifetimes
[20:00:11] <kmc> cool
[20:00:23] <quasisphere> nsf: thanks! :)
[20:00:40] *** Joins: jviereck (Adium@moz-918782F3.dip0.t-ipconnect.de)
[20:00:58] <kmc> the lifetime variable is like a type parameter which is why it becomes foo<'t>
[20:01:22] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[20:01:31] <kmc> I don't know what happens if the caller provides borrowed pointers with different lifetimes; whether 't is automatically instantiated at their intersection
[20:01:41] <kmc> I think that's the case and I think this is the one place where Rust has subtyping, but I'm not sure
[20:01:50] *** [a]bacus is now known as abacus
[20:02:17] <quasisphere> right
[20:02:23] <jdm> arrrrrrrrrrgh
[20:02:26] <jdm> circular imports
[20:02:28] <jdm> how you grate on me
[20:02:31] <nsf> the article has some weird moments though
[20:02:50] <nsf> "In other words ref_foo and ref_foo_2 are currently pointing to foo and Rust doesnâ€™t let us modify foo while foo has pointers pointing on it."
[20:02:52] <nsf> like that one
[20:03:18] <quasisphere> but I still kinda don't see the problem here: when I give some borrowed pointers to foo, there shouldn't be a chance of their lifetimes ending before foo exits, should there?
[20:03:23] <nsf> doesn't sound right to me, even though I'm new to rust
[20:03:45] <nsf> but the real source of confusion are compiler error messages :)
[20:03:53] <nsf> they are sometimes cryptic
[20:04:54] <nsf> oh, no, it's actually truth there it seems
[20:04:58] *** mihneadb|lunch is now known as mihneadb
[20:05:13] *** Joins: darse (darse@8157DC29.EB5E19B8.A3673D3.IP)
[20:05:22] *** Parts: darse (darse@8157DC29.EB5E19B8.A3673D3.IP) ()
[20:08:06] <nsf> so, then something new to learn for me and sorry for confusion on my side
[20:08:08] <nsf> :D
[20:08:59] <kmc> yeah when you borrow an object, it is frozen as immutable
[20:09:20] *** Joins: doomlord (doomlod@moz-13E69BC8.range86-180.btcentralplus.com)
[20:09:26] <kmc> otherwise you might see inconsistent states over time through the borrowed pointer
[20:09:35] <kmc> this is the C++ iterator invalidation problem basically
[20:10:04] *** Joins: eskatrem (user@moz-600D73A9.dyn.user.ono.com)
[20:10:11] <kmc> mostly the freezing is done at compile time but @mut boxes have a dynamic freeze flag that is part of the box header, and so mutating @mut boxes can fail at runtime
[20:10:19] *** Joins: valenting (Thunderbir@8758046C.84D5EFD5.FB866788.IP)
[20:10:19] <kmc> which is part of why people don't like @ and @mut boxes ;P
[20:10:21] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[20:10:25] <nsf> :)
[20:10:31] <nsf> interesting, indeed
[20:10:40] <eskatrem> hey, I am having problems to compile rust-sdl: mismatched types: expected `*u8` but found `extern "C" extern fn(*std::libc::types::common::c95::c_void, *mut u8, i32)` (expected *-ptr but found extern fn)
[20:10:40] <eskatrem> src/audio.rs:111 
[20:10:57] <nsf> didn't know that & is something more than just a pointer with limited use cases
[20:11:07] <eskatrem> with rust 0.8 from the 26th of august
[20:11:44] <kmc> eskatrem: yeah the type of extern "C" fn just changed from *u8 to extern "C" fn :)
[20:12:01] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[20:13:16] <eskatrem> kmc: "just changed"?
[20:13:33] <kmc> a recent change to the compiler
[20:13:38] *** Joins: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com)
[20:13:48] <kmc> so rust-sdl is probably out of date
[20:13:55] <eskatrem> hmm
[20:14:14] *** Joins: carllerche (carllerche@moz-BF6CB667.hsd1.ca.comcast.net)
[20:14:17] <kmc> but you can still do Â«f as *u8Â» so it should be easy to fix
[20:14:43] <eskatrem> crap, yesterday I was told here to get the latest rustc to support externfn!, and now rust-sdl is out of date :/
[20:14:51] <kmc> yeah :/
[20:15:05] <kmc> that's life with rust
[20:15:53] <kmc> you can probably patch rust-sdl and submit that upstream
[20:15:56] <eskatrem> I am pretty noob at rust, I just wanted to compile rustyhex to play with the code, I didn't expect to have to deal with all of that
[20:16:05] <eskatrem> I'll try :/
[20:16:30] <eskatrem> well, on the upside, I get to play with some lower level code
[20:16:58] <kmc> let me know if you have trouble with the modifications and I can probably help
[20:17:57] <eskatrem> kmc that's kind of you..
[20:19:15] <kmc> :)
[20:20:24] <eskatrem> kmc I dont get what's going on actually, the falty line is a callback that should be of typr u8, right?
[20:20:43] <eskatrem> but u8 is not some kind of int (maybe I am saying something dumb here)?
[20:20:49] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[20:20:49] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1483bda11 to 14c822d10: 02http://git.io/N3iJvQ
[20:20:49] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[20:20:50] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[20:20:50] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/KvtsAQ
[20:20:50] <ghrust> 13rust/06auto 1471448d7 15Huon Wilson: Rename UnsafeAtomicRcBox to UnsafeArc. Fixes #7674.
[20:20:50] <ghrust> 13rust/06auto 14a795755 15Huon Wilson: std: use ArcData rather than c_void in UnsafeArc....
[20:20:51] <ghrust> 13rust/06auto 143ab0561 15bors: auto merge of #8790 : huonw/rust/unsafearc, r=thestinger...
[20:20:53] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[20:20:55] <kmc> u8 is an unsigned 8-bit integer
[20:21:05] <kmc> *u8 is a pointer to that, but it's being used similar to char* in C
[20:21:11] <kmc> as an untyped pointer basically
[20:21:30] <eskatrem> and callback is a function, so how could you cast callback to u8?
[20:22:01] *** Quits: jviereck (Adium@moz-918782F3.dip0.t-ipconnect.de) (Quit: Leaving.)
[20:22:02] <kmc> you can write "callback: native_callback as *u8"
[20:22:06] <kmc> i think
[20:22:09] <kmc> it worked in my small test anyway
[20:22:38] *** Joins: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com)
[20:22:46] <eskatrem> I got other errors now...
[20:23:14] <eskatrem> some cryptic stuff starting with "error: linking with `cc` failed with code 1"
[20:23:18] <kmc> alternately you could change the definition of struct SDL_AudioSpec from Â«callback: *u8Â» to Â«callback: extern "C" fn(*c_void, *mut u8, c_int)Â»
[20:23:26] <kmc> eskatrem: can you pastebin the full error output?
[20:24:14] <eskatrem> kmc: yep: http://pastebin.com/7EqycpVV
[20:24:41] *** Quits: tcr (tcr@D26BCFC9.C2203064.EDCE493E.IP) (Client exited)
[20:24:53] <kmc> do you have libsdl-image and libsdl-mixer installed on your system
[20:24:58] <kmc> (or whatever names your package manager gives them)
[20:25:06] <kmc> you might need the -dev / -devel packages as well
[20:25:13] *** Joins: tcr (tcr@D26BCFC9.C2203064.EDCE493E.IP)
[20:26:39] <SiegeLord> Hmm... circular imports, bane of my existence
[20:26:49] <eskatrem> I just installed libsdl1.2-dev
[20:27:06] <olsonjeffery> so.
[20:27:07] <eskatrem> ok, I'll try to add -devel as well
[20:27:11] <olsonjeffery> im about to have to migrate back to OSX.
[20:27:22] <kmc> image and mixer are often separate packages
[20:27:23] <olsonjeffery> gonna pave my machine and do a clean install, upgrade to mountain lio4n
[20:28:04] <eskatrem> kmc: are you working for mozilla by any chance?
[20:28:12] <olsonjeffery> not looking forward it to
[20:28:14] <kmc> yes :)
[20:28:14] <olsonjeffery> to it
[20:28:24] <eskatrem> lucky you man
[20:28:39] *** Quits: joone (joone@E10A1781.2160464A.A34EC3BB.IP) (Ping timeout)
[20:29:13] *** Joins: joone (joone@E10A1781.2160464A.A34EC3BB.IP)
[20:29:45] <eskatrem> hmm maybe it's libsdl1.2-dbg instead of -devel
[20:29:57] <kmc> what distro / package manager?
[20:29:57] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[20:30:14] <achin> fancy seeing you in here, kmc 
[20:30:29] <eskatrem> debian/apt-get
[20:30:34] <strcat> olsonjeffery: why? ;p
[20:30:39] <kmc> if you can search packages by names of files they contain, look for libSDL_image.so and libSDL_mixer.so
[20:30:57] <kmc> ah then try libsdl-image1.2-dev and  libsdl-mixer1.2-dev
[20:31:03] <kmc> per packages.debian.org
[20:31:16] <kmc> hi achin :)
[20:33:02] <strcat> well, that's annoying
[20:33:17] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[20:33:18] <strcat> I forgot to `git stash pop` before doing an amend in a rebase
[20:33:27] <strcat> so ofc it failed on bors because the thing I fixed wasn't actually there...
[20:33:46] <SiegeLord> How can I get this to work without 'use': https://gist.github.com/SiegeLord/6358787
[20:33:55] * strcat wishes rebase let you leave the tree dirty
[20:33:59] <achin> integration testing \o/
[20:34:22] *** Quits: maxli (maxli@13F2CEC5.7672369.D8E68FF6.IP) (Quit: Leaving.)
[20:34:46] *** Joins: jviereck (Adium@moz-918782F3.dip0.t-ipconnect.de)
[20:35:05] * achin is super jealous of bors and your code integration robots
[20:35:38] <strcat> he actually caught up with the queue
[20:35:47] <strcat> it's nice not having 50 PRs open...
[20:35:57] <strcat> I guess that's from valgrind being off
[20:36:02] <kmc> SiegeLord: I'm not sure you can; why do you need to?
[20:36:11] <strcat> we really need asan
[20:36:11] <SiegeLord> kmc: Circular imports
[20:36:21] <kmc> circular imports are fine within a crate, aren't they?
[20:36:26] <SiegeLord> No
[20:36:28] *** Joins: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP)
[20:36:29] *** Quits: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP) (Z:lined (Open Proxy found on your host. Please visit www.blitzed.org/proxy?ip=115.68.131.49 for more information.))
[20:36:31] <achin> asan?
[20:36:32] <kmc> :/
[20:37:07] *** Quits: pauls (pauls@moz-BFEF1F22.ccs.neu.edu) (Ping timeout)
[20:37:26] <strcat> achin: address sanitizer - we have valgrind buildbots to catch runtime bugs (or obvious compiler ones) but it's too slow
[20:37:32] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[20:37:33] <strcat> so they're off atm
[20:37:48] <strcat> stretches out 1 hour to land a PR to 3 hours
[20:38:14] *** Joins: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net)
[20:38:52] <achin> ah.  can you have an seperate set of valgrind robots?  do something like test every 10 commits, and if a new problem is detected, bisect down to the offending commit?
[20:39:17] <strcat> yeah, we could potentially do that
[20:39:22] *** Joins: squiddy (squiddy@moz-13793045.adsl.alicedsl.de)
[20:39:24] <strcat> but it would be easier to just have them always on
[20:39:29] <achin> you won't be able to test commits before they land in master, but you can at least catch them at some point.  
[20:40:38] <eskatrem> kmc: YES! I managed to build it!
[20:40:53] <kmc> nice!
[20:42:06] <eskatrem> kmc: well, I compiled it, but I am now having trouble to compile the demo
[20:42:19] <eskatrem> demo/demo.rc:1:0: 1:15 error: can't find crate for `sdl`
[20:42:19] <eskatrem> demo/demo.rc:1 extern mod sdl;
[20:43:57] *** Joins: lpapp (lpapp@moz-A78F3300.cable.virginmedia.com)
[20:44:41] <jdm> help me think this through
[20:45:22] <jdm> I have dom/mod.rs, dom/element.rs, and dom/bindings/codegen/InterfaceTypes.rs
[20:45:24] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[20:45:42] <jdm> dom/bindings/codegen/InterfaceTypes.rs contains |pub use dom::element::Element;|
[20:45:54] <jdm> dom/element.rs contains |use dom::types::*;|
[20:46:30] *** Quits: wting (wting@moz-250C027.csres.utexas.edu) (Ping timeout)
[20:46:36] <jdm> dom/mod.rs contains |pub mod types { pub use super::bindings::codegen::InterfaceTypes::*; } pub mod bindings { pub mod codegen { pub mod InterfaceTypes; } }
[20:46:46] <jdm> does this constitute a cycle?
[20:47:00] <achin> are the valgrind bots running the full suite of rust compiler tests? (when they're turned on)
[20:47:06] <strcat> achin: yes
[20:47:40] <achin> so the runtimes will likely only increase (assuming that you only add tests, and never remove tests)
[20:48:26] <jack> jdm: sounds like it.
[20:49:15] <strcat> achin: well, the bots were still using valgrind 3.7 since they're ubuntu lts installs
[20:49:20] <lbergstrom> is there anything I need to do to keep a channel alive if I squirrel it away in a *c_void data member in some C code via ffi?
[20:49:22] <strcat> so 3.8 would be a speed-up
[20:49:25] <lbergstrom> I'm getting an unwrap failure attempting to send on it in an extern callback function I've registered that access that data member, which makes me guess that it's been zero'd out internally.
[20:49:32] <strcat> as would making the rust compiler not so slow ;p
[20:49:37] <jdm> lbergstrom: call cast::forget
[20:50:06] <strcat> or just transmute it
[20:50:11] <strcat> transmute will move it
[20:50:25] *** Quits: sigma (sigma@51C589B3.EF2694B5.DFAC6AA7.IP) (Ping timeout)
[20:50:34] <lbergstrom> hrm, transmute was what I'm using: "fi::glfwSetWindowUserPointer(ptr, cast::transmute(&chan)); "
[20:50:45] <strcat> but you're transmuting a reference to it
[20:50:51] <strcat> a reference isn't owning
[20:51:15] <achin> strcat: yeah, being less slow is a good way to be more fast :)
[20:51:17] <lbergstrom> whoops, tyvm.
[20:51:35] <strcat> I'm not sure how a chan is represented
[20:52:06] <eskatrem> hey, I just compiled rust-sdl, but I cant get the corresponding demo to compile because it's telling me that he doesn't recognize 'extern mod sdl', so do I need to puth something in my $PATH so rustc will know about rust-sdl?
[20:52:18] <strcat> a ChanOne is a ptr + a boolean
[20:52:48] <strcat> so when it goes out of scope, you're going to lose them because they're on the stack
[20:53:13] <strcat> you can stop the destructor from being called but you can't change that
[20:53:18] <sfackler> eskatrem: you may have to add a -L"path" to tell rustc where libsdl-whatever.so is
[20:53:28] <strcat> I think you would have to box it inside ~
[20:53:32] <strcat> and transmute ~ to the ptr
[20:53:41] <strcat> and then make sure to have it destroyed at some point
[20:54:11] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[20:54:12] *** ChanServ sets mode: +o tjc
[20:54:15] <eskatrem> sfackler: to compile the demo, I run: rustc -L$PWD/src demo/demo.rc
[20:54:21] *** Quits: jviereck (Adium@moz-918782F3.dip0.t-ipconnect.de) (Quit: Leaving.)
[20:54:28] <lbergstrom> strcat: thanks - that explains what I've been seeing. Cleanup is much easier than keeping things alive :-)
[20:54:32] <kmc> that sounds right to me too
[20:54:35] <eskatrem> do I need to replace $PWD by the actual path of rust-sdl?
[20:54:44] <kmc> re putting it inside a ~ box
[20:55:08] <sfackler> does libsdl-asdf.so end up inside of the src directory? you may just want -L$PWD
[20:55:29] <eskatrem> oh shit, $PWD is just the repertory where rust-sdl is
[20:56:15] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[20:56:55] <eskatrem> sfackler: nope, I dont have libsdl-asdf.so inside the src directory
[20:57:29] <sfackler> track down where it ends up and set the -L argument to that
[20:57:58] <eskatrem> sfackler: I end up having this library inside /rust-sdl: libsdl-95460b1b072257-0.3.0.so 
[20:58:14] <sfackler> that's what you want
[20:58:17] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[20:58:26] <sfackler> so rustc -L. demo/demo.rc should work
[20:59:17] <eskatrem> sfackler: and that's fine!
[20:59:35] *** Quits: igl (igl@moz-78FFF371.adsl.alicedsl.de) (Ping timeout)
[20:59:38] <eskatrem> ran  rustc -L$PWD demo/demo.rc instead of what you said, but it's basically the same
[20:59:40] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[20:59:48] *** Joins: igl (igl@moz-A15582E8.adsl.alicedsl.de)
[21:00:03] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[21:01:15] <eskatrem> guys, do you want me to commit a change of the README.md file?
[21:01:57] <eskatrem> the instruction "rustc -L$PWD/src demo/demo.rc" needs (at least for me) to be replaced by "rustc -L$PWD demo/demo.rc"
[21:02:02] *** Quits: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk) (Ping timeout)
[21:02:06] *** Quits: MauricioC (mauricioc@moz-2CFCD404.impa.br) (Ping timeout)
[21:03:18] <brson> cmr: what's the status of integrating rustdoc_ng?
[21:03:18] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Quit: WeeChat 0.4.1)
[21:03:32] <lbergstrom> strcat, kmc: thanks guys - putting the channel inside a ~ box fixed the lifetime issue
[21:03:56] <strcat> brson: http://seld.be/rustdoc/master/std/index.html
[21:03:58] <strcat> oh
[21:04:00] <strcat> integrating it
[21:04:01] *** Quits: pepper_chico (pepper_chi@EF476D4E.D3DE4871.E4090502.IP) (Quit: Textual IRC Client: www.textualapp.com)
[21:04:03] <sfackler> eskatrem: sure
[21:04:04] <strcat> nvm :)
[21:04:44] <eskatrem> sfackler: ok, I'm going to do that, kmc asked me to commit a change somewhere else (changed that *he* suggested)
[21:05:14] <ecr> brson: on the auditing IO code issue, do you have a good example of code that does handle things correctly? i'd like to get an idea of what's involved.
[21:05:49] *** Quits: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net) (Ping timeout)
[21:05:53] <kmc> lbergstrom: cool.  when you want to free it you can just do { let _foo: ~ChanOnce<Foo> = transmute(whatever) } and then let that fall out of scope
[21:06:33] <kmc> as in https://github.com/mozilla/servo/blob/master/src/components/script/dom/bindings/text.rs#L24
[21:09:15] *** Quits: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net) (Input/output error)
[21:10:57] <brson> ecr: no, there is none, but there are two issues that i'm concerned with: linked failure, which you've resolved for now; and other unexpected failures. a lot of these I/O routines allow async callbacks to take pointers into task stacks, and if the task fails while that callback is still active, what happens? is this something we need to be defensive about and try to recover from? are these types of unexpected failures in I/O code hard errors that warr
[21:12:25] *** Joins: alisdair (textual@DB1AE4B.191304CB.C579BC3E.IP)
[21:13:19] <ecr> brson: alright, thanks
[21:14:08] *** Joins: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk)
[21:14:30] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[21:15:04] <cmr> brson: PR open, struggling with build system.
[21:15:19] <cmr> once it's in the tree, we can start generating JSON as part of the build process.
[21:15:31] <cmr> a frontend hasn't been added yet.
[21:15:48] *** Quits: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca) (Connection reset by peer)
[21:16:13] *** Joins: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca)
[21:17:14] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[21:17:30] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[21:18:03] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[21:18:05] <olsonjeffery> strcat: ive kind of run my current partition setup into the ground (can't do in-place resize of my osx partitions anymore) by various scheming and side-by-side distro installs
[21:18:23] <olsonjeffery> also work related stuff (we have an ipad app that i need to be able to build/run on my machine for demos)
[21:18:38] <olsonjeffery> i responsibility i had largely skirted for the better part of the two years.
[21:19:53] <olsonjeffery> also: is master back in decent shape?
[21:19:56] *** Quits: lmandel (lmandel@13F2CEC5.7672369.D8E68FF6.IP) (Quit: lmandel)
[21:20:20] <olsonjeffery> id like to rebase/push my current branch before scuttling the SS Loonix
[21:21:31] <olsonjeffery> cmr: is this for searchable docs?
[21:21:38] <cmr> olsonjeffery: docs in general
[21:21:48] <cmr> rustdoc_ng doesn't do any documentation generation, just extraction and massaging.
[21:22:07] <olsonjeffery> will that searchable doc frontend eventually become hosted as the official docs?
[21:22:21] <cmr> yes
[21:23:22] <olsonjeffery> is it in-tree, yet?
[21:23:47] <cmr> no
[21:24:01] <cmr> that's the integration brson asked about
[21:25:45] *** Quits: orshem (orshem@C5E06B1E.A5B6B765.E3D28531.IP) (Quit: Leaving)
[21:26:27] *** Joins: richard|s (mindginati@moz-9C555AF3.spmconsultants.co.nz)
[21:26:31] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[21:27:08] <erickt> cmr: pong
[21:27:43] <cmr> erickt: was going to ask about the ragel stuff.
[21:28:10] <erickt> cmr: sure, ask away
[21:28:26] <cmr> erickt: just wanted to know if it was up-to-date/working/well-supported
[21:28:43] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[21:29:10] <cmr> I need to write a parser and ragel seems to be the best tool
[21:29:24] <erickt> cmr: I last rebased it a couple weeks ago, so while it may not work with Rust HEAD, it shouldn't be that hard to update
[21:29:34] <cmr> erickt: ok
[21:29:42] <cmr> If I hit any problems I'll try and send a PR
[21:29:49] *** Quits: squiddy (squiddy@moz-13793045.adsl.alicedsl.de) (Quit: Leaving)
[21:30:12] <erickt> cmr: one warning though, ragel isn't really a parser generator, it's more like regex on steroids
[21:30:41] <cmr> erickt: right, it'd be the lexer
[21:30:45] <fread2281> so I'm trying to update rust-term and I'm getting error: use of undeclared type name `c_int` even though use std::libc::c_int; is at the top of the file
[21:30:55] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[21:30:55] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/KvtsAQ
[21:30:55] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[21:30:57] <erickt> cmr: gotcha. It'd work well for that
[21:31:03] <nsf> for small things lua + lpeg works really good
[21:31:13] <cmr> which is (imo) the hard part
[21:31:13] <nsf> and unlike ragel it can generate recursive parsers
[21:31:23] <erickt> cmr: it's also possible jclements may have added rust support for antlr
[21:31:32] <erickt> if you need a full parser
[21:32:02] <cmr> the thing I'm parsing is fairly simple, I just don't really know what I'm doing
[21:32:09] <erickt> nsf / cmr: ragel can do recursive state machines. It provides hooks to push/pop things onto a stack
[21:32:18] <jclements> cmr: I wouldn't consider the rust/antlr combo usable right now. antlr 4 is ... well, I found it intolerably slow for my grammar.
[21:32:34] <nsf> erickt: didn't know that
[21:32:41] <erickt> jclements: I meant a plugin to antler that would generate a rust parser
[21:33:02] <erickt> jclements: or did you only write a parser of rust code in antler?
[21:33:12] <jclements> erickt: correct. that's all.
[21:33:35] *** zz_kimundi is now known as kimundi
[21:34:28] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[21:34:29] <erickt> nsf / cmr: if you want to check out a simple-ish recursive ragel state machine, you can check out mongrel2's http1.1 parser here: https://github.com/zedshaw/mongrel2/blob/master/src/http11/http11_parser.rl
[21:34:34] *** Quits: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP) (Quit: night)
[21:34:56] <olsonjeffery> man. you guys are killing me with this #8674 stuff in uvio.
[21:34:57] *** Quits: Palmik (palmik@moz-CC484FDD.tmcz.cz) (Quit: Lost terminal)
[21:35:26] *** Joins: jviereck (Adium@moz-918782F3.dip0.t-ipconnect.de)
[21:35:26] <ecr> olsonjeffery: what's the problem?
[21:35:51] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[21:35:51] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/4cDoGQ
[21:35:51] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[21:35:51] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[21:35:51] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/B0tsDw
[21:35:51] <ghrust> 13rust/06auto 1420567a0 15Daniel Micay: vec: implement `DeepClone`
[21:35:51] <ghrust> 13rust/06auto 14c2bc59e 15Daniel Micay: repr: print integer/float suffixes
[21:35:51] <ghrust> 13rust/06auto 14ac4f0df 15Daniel Micay: repr: include mutability qualifier in visit_ptr
[21:35:53] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[21:36:32] *** Joins: robertknight (robertknig@moz-7B7C8CED.range86-149.btcentralplus.com)
[21:37:17] <erickt> cmr: regarding the stability and maintanance of ragel, I've been deep inside rust for a bit, so I'm not using it on a day to day basis, but I do try to make sure it, and all my other projects, keep working with rust head
[21:37:19] <olsonjeffery> ecr: im working in uvio
[21:37:45] <olsonjeffery> adding those wrapping `do task::unkillable {}` blocks is a big monkey wrench in my rebase
[21:37:53] <olsonjeffery> no worries, im getting through it
[21:37:58] *** Joins: boredomist (user@moz-63CF9F31.res-cmts.sesp.ptd.net)
[21:37:58] <ecr> oh yeah, it's a pain
[21:38:06] <olsonjeffery> as they say in the world of DVCS: s/he who lands first, wins.
[21:38:42] *** Joins: maik (maik___@moz-64456714.dip0.t-ipconnect.de)
[21:38:47] <ecr> I'm trying to centralize it as much as possible by writing some variants of home_for_io (one that consumes the handle and one that consumes the scheduler)
[21:39:08] <ecr> I'm not sure if that's made it into master yet though
[21:40:45] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:42:57] <kmc> I can't have phantom lifetime parameters? :<
[21:43:28] <tjc> Phantom Lifetime Parameter sounds like the title of a horror film aimed at type theorists
[21:44:04] <kmc> :D
[21:44:17] *** Joins: sigma (sigma@moz-24A9AEB4.range109-145.btcentralplus.com)
[21:44:56] *** Quits: dherman (dherman@moz-BBE3ABD.mv.mozilla.com) (Quit: dherman)
[21:45:09] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.1)
[21:47:09] <ecr> *sigh*. I have a static method on a trait that I'm trying to use in a default method on the same trait and the compiler complains that there's an unconstrained type on the method call even though it doesn't have any type parameters
[21:47:31] <jack> or an episode of ghost hunters at CMU or <insert nerdy PL school here>
[21:47:42] *** Quits: sigma (sigma@moz-24A9AEB4.range109-145.btcentralplus.com) (Ping timeout)
[21:47:49] *** Joins: msingle (Thunderbir@moz-20675462.nrflva.fios.verizon.net)
[21:48:16] <Lovot> If I create an array like this: a
[21:48:48] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[21:48:51] <ecr> trait Foo { fn f() {}  fn g(&self) { f(); } }
[21:48:54] <Lovot> a=~[], how would I append values to that array
[21:48:56] <ecr> oops
[21:48:58] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[21:49:06] <ecr> rusti: trait Foo { fn f() {} fn g(&self) { f(); } }
[21:49:31] <ecr> Lovot: well first off, you're going to need 'a' to me mutable
[21:49:38] <ecr> *be
[21:50:07] <sfackler> rusti: let mut a = ~[]; a.push("foo"); a
[21:50:22] <ecr> ^ what they said
[21:50:35] <Lovot> Thanks
[21:50:35] <ecr> except apparently rusti is down
[21:50:41] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[21:50:54] <eskatrem> magic!
[21:51:54] <Lovot> Grr, rust made it so I can't declare a bunch of mutable variables on a single line
[21:52:35] <tjc> Lovot: Yes, because that syntax was confusing -- did it mean "make the first variable mutable and the rest immutable", or "make all immutable"?
[21:52:42] *** Joins: fzzy (jahman@moz-D9D36111.cs.helsinki.fi)
[21:52:50] <tjc> er, "make all mutable", I mean, and it was the latter, but we thought it might confuse people
[21:52:51] *** Quits: cowboyd (cowboyd@moz-1BD02A1E.sw.biz.rr.com) (Client exited)
[21:52:54] <SiegeLord> Hmm... I'm getting undefined reference errors to every single function and method in my library crate
[21:53:21] <Lovot> I assumed it was make all mutable, and that was why I tried it
[21:53:39] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[21:53:47] <fread2281> what was as_c_str replaced with?
[21:54:00] *** Quits: Ms2ger (Ms2ger@moz-549ABB0C.adsl-dyn.isp.belgacom.be) (Quit: nn)
[21:54:45] <fzzy> does rust have no methods?
[21:54:46] <ecr> fread2281: std::c_str::{to_c_str, with_c_str}
[21:54:50] *** Joins: Jakub (jakub@moz-391AE95C.neoplus.adsl.tpnet.pl)
[21:55:19] *** Quits: robertknight (robertknig@moz-7B7C8CED.range86-149.btcentralplus.com) (Ping timeout)
[21:55:30] <ecr> fzzy: we have methods all over the place! see: http://static.rust-lang.org/doc/tutorial.html#methods
[21:55:40] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[21:56:55] *** Quits: dbaupp (Thunderbir@moz-EAA09AEF.lns20.syd7.internode.on.net) (Ping timeout)
[21:57:03] <SiegeLord> And indeed, they are missing from the .so
[21:57:05] <SiegeLord> Wtf o_O
[21:57:18] *** Joins: Sonarpulse (user@moz-A783576F.dsl.pltn13.pacbell.net)
[21:57:36] <ecr> SiegeLord: indeed
[21:58:55] *** Quits: lpapp (lpapp@moz-A78F3300.cable.virginmedia.com) (Ping timeout)
[21:59:00] <olsonjeffery> huh. built on the first go.
[21:59:05] * olsonjeffery pats back for a merge well down.
[21:59:16] <olsonjeffery> but do the tests pass?!?!
[21:59:17] <olsonjeffery> ???
[21:59:40] <fzzy> can you define a destructor like in c++?
[21:59:59] <fzzy> no?
[22:00:01] <strcat> yes
[22:00:03] <olsonjeffery> fzzy: impl the Drop trait
[22:00:30] <olsonjeffery> also: ltns
[22:00:33] <strcat> rust relies heavily on destructors and move semantics
[22:00:42] <eskatrem> ok, another dumb question: what does this mean:
[22:00:51] <eskatrem> ui.rs:253:41: 253:42 error: expected item after attributes
[22:00:52] <eskatrem> ui.rs:253                     #[fixed_stack_segment] [-D cstack (default)]
[22:01:06] <olsonjeffery> eskatrem: semicolon after the attrib
[22:01:11] <olsonjeffery> before your first statement
[22:01:21] *** Joins: Tad (Tom@moz-2036EE54.kimsufi.com)
[22:01:22] <olsonjeffery> it's missing. hence the complaint
[22:01:25] <olsonjeffery> when you place that within a block
[22:01:30] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[22:01:32] <olsonjeffery> has to have a trailing semicolon
[22:01:49] <SiegeLord> Oh... I pub use'd but didn't pub mod
[22:01:59] <eskatrem> yes, but the line mentionned is: usleep(1000);
[22:02:07] *** Quits: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com) (Input/output error)
[22:02:07] <eskatrem> unsafe {
[22:02:17] <olsonjeffery> eskatrem: pastebin the code, please
[22:02:23] *** Joins: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com)
[22:02:50] <eskatrem> http://pastebin.com/LGPib1w8
[22:02:52] <engla> semicolon on attributes are confusing.  with semicolon => applies to previous item. without semicolon => applies to next item
[22:03:03] <eskatrem> olsonjeffery: sorry, it's just one line
[22:03:16] <olsonjeffery> yeah.. need a little more :)
[22:03:19] *** Quits: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP) (Quit: Lost terminal)
[22:03:52] <eskatrem> https://github.com/dpc/rustyhex/blob/master/ui.rs, line 253 
[22:04:15] <eskatrem> do I need to put a semi colon after unsafe?
[22:04:34] <olsonjeffery> oh, heh. no..
[22:04:45] <olsonjeffery> that usleep(0) call is into a c function, correct?
[22:04:54] <eskatrem> I think so
[22:04:59] <olsonjeffery> so the complaint is because a #[fixed_stack_segment] attribute is missing
[22:05:43] <eskatrem> so I need to add #[fixed_stack_segment] right before usleep(1000) ? (I tried that one but it was not working either)
[22:06:23] <olsonjeffery> the "easy" answer is to put ` #[fixed_stack_segment]; #[inline(never)]; ` at the top of the *function*
[22:06:30] <olsonjeffery> around ln 258
[22:06:39] <olsonjeffery> the "hard" answer is It's Complicated
[22:06:58] <eskatrem> I'll try that. I didnt pt #[inline(never)] beofre
[22:07:09] <olsonjeffery> note the trailing semi's ..
[22:08:06] *** Parts: Jakub (jakub@moz-391AE95C.neoplus.adsl.tpnet.pl) ()
[22:08:08] <Lovot> How would I print the contents of an array?
[22:08:13] *** Quits: eatkinson (eatkinson@moz-DACC1A92.dsl.bell.ca) (Quit: eatkinson)
[22:08:33] <eskatrem> error: expected item after attributes #[fixed_stack_segment]; and #[inline(never)];
[22:10:16] *** Quits: tcr (tcr@D26BCFC9.C2203064.EDCE493E.IP) (Client exited)
[22:10:20] <ecr>  Lovot: Well if the elements implement ToStr, then you can convert an array to a string with the .to_str() method. You can print a string with the println! macro (assuming that's in master now).
[22:11:03] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[22:11:07] <ecr> so something like `println!(~[1, 2, 3].to_str())' should output something like "~[1, 2, 3]"
[22:11:59] *** Joins: tcr (tcr@D26BCFC9.C2203064.EDCE493E.IP)
[22:12:01] <Lovot> ecr: thanks, I probably should have thought of that after using .to_str() on floats
[22:12:35] <ecr> hm... apparently println! expects a string literal. but yeah, to_str should work on vectors
[22:12:41] <eskatrem> olsonjeffery: I managed to compile (and run it). Just put the following: '#[fixed_stack_segment]
[22:12:42] <eskatrem>     #[inline(never)]' at the head of the function that calls usleep
[22:12:49] *** flaper87 is now known as flaper87|afk
[22:12:54] <eskatrem> without the semi column
[22:12:57] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[22:15:36] *** Joins: Jakub (jakub@moz-391AE95C.neoplus.adsl.tpnet.pl)
[22:16:00] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[22:16:08] *** Quits: jviereck (Adium@moz-918782F3.dip0.t-ipconnect.de) (Quit: Leaving.)
[22:16:31] *** Joins: eatkinson (eatkinson@moz-DACC1A92.dsl.bell.ca)
[22:17:28] *** Quits: saml (sam@moz-14C16814.cst.lightpath.net) (Quit: Leaving)
[22:17:55] *** Joins: dherman (dherman@moz-7B0110AD.mv.mozilla.com)
[22:17:55] *** ChanServ sets mode: +o dherman
[22:18:31] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[22:19:44] *** Joins: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com)
[22:21:21] *** kimundi is now known as zz_kimundi
[22:21:40] *** Quits: maik (maik___@moz-64456714.dip0.t-ipconnect.de) (Ping timeout)
[22:21:44] <jmgrosen> how do I compile rustc in debug mode? I'm doing `./configure --enable-debug; make -j8" but the resulting binary doesn't seem to actually be a debug binary
[22:22:10] <tjc> jmgrosen: enable-debug just makes it so that code for debug!() and error!() calls gets generated
[22:22:21] <tjc> is that what you intend to do or are you looking for actual debugging symbols?
[22:22:32] <jmgrosen> tjc: i'm looking for debug symbols :/
[22:22:34] *** Quits: dherman (dherman@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[22:22:45] <tjc> jmgrosen: I am not sure what the current status of debuginfo is
[22:22:56] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[22:23:14] <jmgrosen> tjc: well chris-morgan had a full backtrace here: https://github.com/mozilla/rust/issues/5992
[22:23:23] *** Joins: dherman (dherman@moz-BBE3ABD.mv.mozilla.com)
[22:23:23] *** ChanServ sets mode: +o dherman
[22:23:26] <strcat> tjc: I think it's supposed to work well atm, there are tests
[22:23:37] <jmgrosen> oh, perhaps i need to set RUST_LOG
[22:23:40] <tjc> strcat: ok -- do you know if it's enabled by a flag?
[22:23:46] <strcat> -Z debug-info iirc
[22:23:54] <tjc> jmgrosen: you need that ^
[22:24:18] <jmgrosen> tjc: i'm not debugging my own program, i'm debugging the compiler
[22:24:35] <tjc> jmgrosen: right, so you would need to build rustc with that flag
[22:24:47] *** Quits: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[22:24:48] <tjc> probably by editing a line in one of the Makefiles -- I'm not sure offhand...
[22:24:49] * tjc looks
[22:25:38] <strcat> meh iterators are so close to being vectorized by LLVM
[22:25:56] <strcat> this silly pointer induction check just wants the loop to be laid out *slightly* differently
[22:26:45] <tjc> jmgrosen: it looks like if you go to mk/target.mk and edit the WFLAGS_ST0, WFLAGS_ST1, and WFLAGS_ST2 lines, you can add the -Z debug-info flag
[22:26:56] <tjc> or if you want to debug stage2 for example, you can probably just edit the WFLAGS_ST2 line
[22:27:15] <jmgrosen> tjc: ok; without that, though, but with RUST_LOG set, the last thing printed out is ~"Call(llfn=*fn(*{*{*tydesc, *i8}, *{*tydesc, *i8}, *{*tydesc, *i8}}, *{i64, *tydesc, *i8, *i8, i8}) -> Void, args=~[~\"*{*{*tydesc, *i8}, *{*tydesc, *i8}, *{*tydesc, *i8}}\", ~\"*{i64, *tydesc, *i8, *i8, i8}\"])" but that looks fine
[22:27:18] <jmgrosen> the types seem to match up
[22:28:29] *** Joins: Florob (Florob@moz-39532932.de)
[22:29:14] <bjz> tjc: rustpkg spits out a lot of debug stuff for me when I run it :/
[22:29:23] <tjc> bjz: Yeah, I'm fixing some of it
[22:29:28] <tjc> bjz: by "a lot" do you mean like 20 lines?
[22:29:28] <bjz> ok
[22:29:45] <jmgrosen> while rustc with -Z debug-info is compiling, here's the code that crashes it: https://gist.github.com/jmgrosen/40f9bae6674aad85cfd5
[22:29:54] <bjz> tjc: 250: https://gist.github.com/bjz/1f61458a78b87ccfb8d4
[22:30:21] <tjc> bjz: that's mostly not from rustpkg -- somebody checked in an error! statement in the typechecker
[22:30:28] <tjc> that should be debug!
[22:30:32] <bjz> ha
[22:30:46] <tjc> yeah, just the first 3 lines are actually from rustpkg :-)
[22:31:04] <bjz> tjc: that's from cgmath-rs
[22:31:13] <bjz> https://github.com/bjz/cgmath-rs
[22:31:16] <tjc> bjz: if you go to librustc/middle/kind.rs and look for check_impl_of_trait, there's an error! call there that you can change to a debug!
[22:31:29] <tjc> I'll check it in with my next pull request, but in the meantime, you can be non-distracted :-)
[22:31:47] <bjz> cool
[22:32:01] <bjz> nobody hit that one before?
[22:32:13] <tjc> everyone's probably suffering in silence
[22:32:14] <jmgrosen> bjz: so cgmath-rs is a rebooted lmath-rs?
[22:32:28] <bjz> jmgrosen: yep -_-
[22:32:41] <jmgrosen> bjz: and it works with about latest rust?
[22:33:00] <bjz> jmgrosen: yep, but it's not done yet
[22:33:19] <jmgrosen> bjz: well, neither is my library, so that's fine :P but awesome! :D
[22:33:22] <bjz> jmgrosen: I still need to transfer some functionality over from the old source
[22:33:41] <jmgrosen> bjz: so how usable is rustpkg at the moment?
[22:33:52] <bjz> jmgrosen: 'lmath' was a confusing name - made it seem more general than it was
[22:34:06] <tjc> jmgrosen: Jack has been able to build 11 Servo crates with it -- with one extra patch I haven't submitted a PR for yet
[22:34:07] <bjz> jmgrosen: seems to be better than my dumb makefiles
[22:34:14] *** Parts: Jakub (jakub@moz-391AE95C.neoplus.adsl.tpnet.pl) ()
[22:34:35] <bjz> jmgrosen: I should be done in a day or two
[22:34:40] <jmgrosen> tic, biz: awesome, I'll use it then -- better than running `rustc` directly :P
[22:34:50] <tjc> report bugs :-)
[22:35:04] <jmgrosen> bjz: wow, awesome -- out of curiosity, how much time per day are you able to devote to rust stuff?
[22:35:06] <bjz> jmgrosen: but that's not counting possible ICEs  :D
[22:35:19] <jmgrosen> bjz: >.<
[22:35:36] <bjz> jmgrosen: heh, too much - should spend more time on my uni work
[22:36:07] <jmgrosen> bjz: solution: do your uni code in rust! :D
[22:36:14] <bjz> -_-
[22:36:17] <jmgrosen> i wish i actually did programming for school :/
[22:36:22] <bjz> have to use java
[22:36:25] <jmgrosen> D:
[22:36:32] *** Joins: sigma (sigma@51C589B3.EF2694B5.DFAC6AA7.IP)
[22:36:42] <tjc> that's easy, then, write a Rust-to-Java compiler and submit the generated code :-)
[22:36:48] <bjz> :D
[22:36:50] <jmgrosen> the only programming we do is very, very basic arduino stuff :(
[22:37:22] <SiegeLord> I think rustpkg is actually building my libraries too
[22:37:34] * bjz is getting the whole OO is amazing sermon
[22:37:40] <SiegeLord> I get a warning though: warning: library_in_workspace didn't find a library in /tmp/.rust/build/github.com/SiegeLord/RustGnuplot for RustGnuplot
[22:37:58] <bjz> ok, bbl
[22:38:02] <Florob> Hmm... is it expected that rust code crashes when accessing a huge stack allocation, or should the stack grow in theory?
[22:38:06] *** Quits: eatkinson (eatkinson@moz-DACC1A92.dsl.bell.ca) (Quit: eatkinson)
[22:38:06] * bjz walking dog
[22:38:12] <tjc> Florob: right now, it's expected; it's a known bug
[22:38:14] *** Quits: Jesin (Jessin_@moz-48B48C95.eecs.lehigh.edu) (Ping timeout)
[22:38:22] <tjc> you can set the RUST_MIN_STACK environment variable to something bigger
[22:38:27] <tjc> and it should work in the meantime
[22:39:48] *** Joins: Jesin (Jessin_@moz-48B48C95.eecs.lehigh.edu)
[22:39:57] <Florob> tjc, Is there any actual benefit to having things on the stack in rust's case? I have it as a heap allocation (owning pointer) now, which from a C programmers POV seems more sensible anyway.
[22:40:11] *** Quits: huseby (huseby@13F2CEC5.7672369.D8E68FF6.IP) (Quit: Leaving)
[22:40:33] <tjc> Florob: depends on the details of your application
[22:41:18] *** Quits: KindOne (KindOne@moz-CF41ACCB.dynamic.ip.windstream.net) (Ping timeout)
[22:41:57] <tjc> it's cheaper to allocate on the stack than on the heap, usually, if you use the allocation in a way that jibes with lexical scope
[22:42:59] <Florob> Is that still true when the stack allocation requires growing the stack?
[22:43:47] <tjc> Florob: good question -- brson would be one of the ones to answer toat
[22:44:40] *** Joins: KindOne (KindOne@moz-CF41ACCB.dynamic.ip.windstream.net)
[22:45:06] <brson> Florob: stack allocation can require growing the stack if there's not enough room, though currently rust doesn't do stack growth
[22:45:14] <brson> because it's not implemented
[22:45:50] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[22:45:51] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/B0tsDw
[22:45:51] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[22:46:45] *** Joins: tikue_ (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net)
[22:48:29] <Luqman> eskatrem: i think the "right" fix for rust-sdl would be to change the callback to be Option<extern "C" fn(...)> instead of *u8
[22:49:00] <Florob> brson, tjc, what I'm actually wondering is what eventually would be the "recommended" way. In my case it's just a toy example where I (more by accident) allocated 1024*768 ints on the stack. In C I would usually instinctively do that on the heap. But my guess here is that growing the stack instead would not be worse then doing that. And memory accesses should be pretty much the same
[22:49:06] *** Quits: donri (dag@moz-9BB61102.tbcn.telia.com) (Client exited)
[22:50:17] *** Quits: lkuper (lkuper@moz-D862222C.dhcp-bl.indiana.edu) (Ping timeout)
[22:50:51] <tjc> Florob: This is not my area, but I believe we do have the goal of making stack growth fast
[22:50:52] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[22:50:52] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/LwYDuw
[22:50:52] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[22:50:53] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[22:50:53] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/zySq4Q
[22:50:53] <ghrust> 13rust/06auto 14b29696a 15Adrien TÃ©tar: librustpkg/tests.rs: cleanup unused import
[22:50:53] <ghrust> 13rust/06auto 14d5c144a 15bors: auto merge of #8792 : adridu59/rust/master, r=catamorphism...
[22:50:53] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[22:51:44] <ecr> bblum: you around?
[22:51:49] <ecr> on IRC that is
[22:53:32] <brson> Florob: I think the rust way is probably to prefer putting things on the stack, but in your example you're right it's not so clear-cut. Some considerations: growing the stack could possibly be faster than a malloc depending on our caching strategy and what's in the cache; on x86_64 that buffer would probably not require growing the stack since we're likely to have very large stack segments and rely on OS to commit pages lazily
[22:54:00] <brson> Florob: if the stack needs to grow and there's not an available segment cached then growing the stack will *defenitely* be slower than malloc
[22:54:30] <strcat> brson: we could just rely on jemalloc to cache the segments now though, it caches up to 4MiB allocs
[22:54:38] <strcat> I think glibc's threshold is *much* lower
[22:55:26] <brson> strcat: possibly. calling malloc requires having the stack space to run malloc, and acquiring that space also takes work
[22:55:39] <strcat> true
[22:56:14] <brson> though i think it will not be much work
[22:56:56] *** Quits: jorendorff (jorendorff@moz-1747FB68.hsd1.tn.comcast.net) (Quit: jorendorff)
[22:58:14] <brson> it would be pretty rad if we didn't have to cache any stack segments at all, even for ffi, but i don't know if jemalloc is tuned for that
[22:59:30] <brson> every instruction counts and there is some overhead there. when possible you really just want to grab a free stack pointer, marshall the arguments and change sp
[23:00:08] <jmgrosen> tjc: I just compiled rustc with "WFLAGS_ST2 = -D warnings -Z debug-info" but still didn't get the full backtrace
[23:00:32] <tjc> jmgrosen: can you also add VERBOSE=1 at the beginning of your command line so you can see if the option is actually being passed?
[23:00:39] <tjc> that prints out the full command lines that the Makefiles run
[23:00:58] <jmgrosen> tjc: ok, i'll try that
[23:01:30] <jmgrosen> tjc: VERBOSE=1 on the ./configure or make?
[23:01:37] <tjc> jmgrosen: make
[23:01:43] <strcat> brson: the nice thing about jemalloc is that it won't ever munmap that memory - it will use it for other stuff
[23:01:56] <strcat> you would stop paying for system calls once you reach the peak VM
[23:02:21] <strcat> definitely more accounting stuff going on though
[23:02:42] <strcat> if something is larger than 4MiB, it falls through to mmap/munmap
[23:02:46] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[23:02:57] <strcat> although you can adjust that
[23:03:34] <strcat> brson: we'd probably want to round stack sizes to something like powers of two if we did do that
[23:03:47] <tjc> jmgrosen: gotta step out for a few minutes, but I'll be back
[23:03:51] <strcat> although for small ones jemalloc would already do that
[23:03:57] <jmgrosen> tjc: ok, thanks for the help so far
[23:03:57] * strcat isn't sure what happens with a 2MiB one
[23:04:14] *** Quits: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: My lid went down)
[23:04:47] <brson> nmatsakis: is it possible to create a null `extern "C" fn`?
[23:04:52] <brson> because I need some
[23:05:03] *** Quits: sebcrozet (sebcrozet@moz-2517AE39.w80-13.abo.wanadoo.fr) (Quit: Gone)
[23:05:04] <SiegeLord> I just transmuted some 0's
[23:05:44] <sfackler> brson: I think you're supposed to use Option<extern "C" fn(...)> and None for null
[23:05:59] <strcat> brson: the Option optimization works on it now
[23:06:01] <brson> sfackler: oh, nice
[23:06:18] <SiegeLord> Even when declaring the FFI function?
[23:06:24] <strcat> http://ix.io/7Cj it's decided by this thing
[23:06:25] <sfackler> yep
[23:06:48] <strcat> MonoNonNull -> adt.rs code treats it as a non-nullable ptr and uses null as the None tag
[23:06:50] <SiegeLord> Kind of weird using Option in a place littered by c_...
[23:07:26] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[23:07:32] <brson> i actually don't care about this code to convert it to options though. going to transmute
[23:08:24] *** Quits: cdidd (cdidd@moz-65A6B6CA.broadband.corbina.ru) (Ping timeout)
[23:08:25] <engla> brson: it's a bug, but can't you just cast 0 to extern fn?
[23:08:33] *** Quits: msingle (Thunderbir@moz-20675462.nrflva.fios.verizon.net) (Ping timeout)
[23:08:33] <engla> rusti: 0 as extern "C" fn()
[23:09:04] <engla> ah rusti, how naked I am without it
[23:09:18] <strcat> engla: it's here
[23:09:22] <strcat> functions just print as nothing
[23:09:24] <strcat> rusti: 2
[23:09:25] -rusti- 2
[23:09:28] <engla> oh :)
[23:09:37] *** Joins: ChrisMorgan (chris@moz-5E3713DF.its.monash.edu.au)
[23:09:41] <strcat> repr doesn't try very hard
[23:09:54] <strcat> but I'm not really sure if it could easily do it
[23:11:13] <brson> rusti: 0 as extern fn() as int
[23:11:13] -rusti- 0
[23:11:41] *** Joins: cdidd (cdidd@moz-68914B9C.broadband.corbina.ru)
[23:12:16] <engla> it's a bug, it was a bad suggestion to use it
[23:12:47] <SiegeLord> Is having multiple libraries per repository a bad idea in the age of rustpkg?
[23:13:07] <brson> the default abi for an extern fn in a type signature appears to be "Rust" but in a declaration "C"?
[23:13:27] <brson> type foo = extern fn() // "Rust"; extern { fn foo(); } // "C"
[23:13:48] <strcat> rusti: extern fn() {}
[23:13:49] -rusti- <anon>:5:18: 5:19 error: expected ident, found `(`
[23:13:49] -rusti- <anon>:5          extern fn() {}
[23:13:49] -rusti-                            ^
[23:13:50] -rusti- application terminated with error code 101
[23:13:56] <strcat> rusti: extern fn foo() {}
[23:13:57] -rusti- ()
[23:14:02] *** Quits: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net) (Ping timeout)
[23:14:15] <strcat> rusti: extern fn foo() {} let x: extern "Rust" fn = foo; x
[23:14:15] -rusti- <anon>:5:52: 5:53 error: expected `(` but found `=`
[23:14:16] -rusti- <anon>:5          extern fn foo() {} let x: extern "Rust" fn = foo; x
[23:14:16] -rusti-                                                              ^
[23:14:16] -rusti- application terminated with error code 101
[23:14:40] <strcat> rusti: extern fn foo() {} let x: extern fn = foo; x
[23:14:41] -rusti- <anon>:5:45: 5:46 error: expected `(` but found `=`
[23:14:41] -rusti- <anon>:5          extern fn foo() {} let x: extern fn = foo; x
[23:14:41] -rusti-                                                       ^
[23:14:41] -rusti- application terminated with error code 101
[23:14:43] <strcat> huh
[23:14:45] <strcat> rusti: extern fn foo() {} let x: extern fn() = foo; x
[23:14:46] -rusti- <anon>:5:49: 5:52 error: mismatched types: expected `extern "Rust" fn()` but found `extern "C" extern fn()` (expected "Rust" fn but found "C" fn)
[23:14:46] -rusti- <anon>:5          extern fn foo() {} let x: extern fn() = foo; x
[23:14:46] -rusti-                                                           ^~~
[23:14:47] -rusti- error: aborting due to previous error
[23:14:47] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[23:14:49] -rusti- application terminated with error code 101
[23:14:54] <strcat> brson: that is pretty weird...
[23:15:09] <strcat> it's also weird that they act like a ptr because I think they're supposed to be non-nullable
[23:15:17] *** Quits: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com) (Input/output error)
[23:15:29] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[23:15:29] *** ChanServ sets mode: +o tjc
[23:15:51] *** Joins: MauricioC (mauricioc@moz-2CFCD404.impa.br)
[23:16:45] *** Quits: tcr (tcr@D26BCFC9.C2203064.EDCE493E.IP) (Client exited)
[23:20:42] <jmgrosen> tjc: hm, -Z debug-info doesn't seem to be in there -- strange. do I have to do something with target.mk first?
[23:20:47] *** Joins: sevvie (sevvierose@moz-8BC5868E.hfc.comcastbusiness.net)
[23:20:57] <achin> neat robot!
[23:21:06] <tjc> jmgrosen: I'm not sure if there's an "approved" way to pass in an extra rustc flag when building
[23:21:11] <tjc> brson: do you know? ^
[23:22:42] <strcat> tjc: there is one but I don't remember
[23:22:48] <strcat> we use it to disable that debug borrow thing
[23:23:12] <strcat> Makefile.in:  RUSTFLAGS_STAGE1 += -Z no-debug-borrows
[23:23:13] <strcat> Makefile.in:  RUSTFLAGS_STAGE2 += -Z no-debug-borrows
[23:23:26] <tjc> jmgrosen: ^
[23:23:28] <strcat> would work for stage0 too because it uses $(1)
[23:23:31] <tjc> Sorry for the false start earlier
[23:23:49] <jmgrosen> strcat: thanks!
[23:23:53] <strcat> np
[23:24:09] <strcat> http://blog.smartbear.com/development/a-glimpse-into-c14/ this is pretty ridiculous, C++ gains an nth kind of array ;p
[23:24:15] <strcat> well, 2
[23:24:43] <strcat> in case C arrays, std::array, std::vector, std::valarray and new[]/malloc weren't enough
[23:25:06] * strcat doesn't understand why they need *two* runtime sized arrays :|
[23:25:27] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[23:25:39] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[23:26:29] <tjc> strcat: I'm apparently slow right now, because I can't figure out what I have to import to get the `find` method on a ~[]
[23:26:34] <tjc> importing std::iterator doesn't work
[23:26:36] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[23:26:36] <engla> VLA is an optional feature in ISO C11
[23:26:42] <doy> weren't c99's variable length arrays considered a bad idea in the first place?
[23:26:43] <strcat> tjc: need iter().find()
[23:26:46] <strcat> until we make Iterable
[23:26:54] <strcat> doy: yes.
[23:26:55] <tjc> strcat: indeed, I'm slow right now. thanks!
[23:26:57] <strcat> C11 made them optional
[23:26:59] <strcat> because it's dumb
[23:27:03] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[23:27:12] <sfackler> strcat: what's blocking Iterable?
[23:27:33] <strcat> sfackler: I don't know if there is anything specifically blocking it, I tried to make it and ran into several kinds of 'self ICEs and gave up
[23:27:51] *** Joins: ChrisMorgan1 (chris@moz-5E3713DF.its.monash.edu.au)
[23:27:51] *** Quits: ChrisMorgan (chris@moz-5E3713DF.its.monash.edu.au) (Quit: Leaving.)
[23:27:52] *** Joins: jorendorff (jorendorff@moz-30F4FB9E.hfc.comcastbusiness.net)
[23:28:43] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Ping timeout)
[23:28:43] <brson> jmgrosen: tjc: the makefiles will obey RUSTFLAGS=
[23:28:59] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[23:29:03] <tjc> brson: cool, I'll add that to the build instructions on the wiki
[23:29:05] <jmgrosen> brson: oh, that's handy
[23:29:07] <tjc> unless it's already there and I didn't look
[23:29:28] <jmgrosen> strcat: wasn't implementing iterable on iterator itself a problem?
[23:29:38] <strcat> yes I don't think you can do that
[23:29:54] <strcat> for loops should probably not just be desugaring though - the errors are very weird
[23:30:07] <strcat> a lang item on Iterable + one on Iterator would make it a non-issue
[23:30:07] <sfackler> hmm, can Iterable even be defined now? I didn't think that trait methods could return objects with parameterized lifetimes
[23:30:26] <strcat> they can because std::iterator does that
[23:30:51] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[23:30:53] *** Joins: infynyxx_ (infynyxx@moz-E95B370B.nyc.res.rr.com)
[23:30:55] <strcat> rusti: let xs = [1, 2, 3]; let _ = xs.iter().map(|x| x);
[23:30:56] -rusti- ()
[23:31:14] <strcat> the value assigned to _ there has a lifetime tied to that vector, and the stack closure
[23:31:46] * strcat already ran into all the relevant bugs and nmatsakis fixed them ;p
[23:32:24] <strcat> 'self is really fragile, that's the only issue I still hit
[23:33:05] <jmgrosen> yeah, that's my experience, too
[23:33:10] <strcat> fn map<'r, B>(self, f: &'r fn(A) -> B) -> Map<'r, A, B, Self>
[23:33:14] <strcat> signature of the map default method
[23:33:17] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[23:33:28] <sfackler> ah
[23:34:01] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[23:34:11] <strcat> the iterator code is surprisingly simple since they operate on a generic `A` element type and the lifetime is just propagated automatically
[23:34:47] <sfackler> i think the issues I ran into were things like trait Foo<T: Bar> { fn foo<'a>(&'a self) -> T<'a> }
[23:35:12] <strcat> yeah that won't work, it doesn't know if T has a lifetime parameter or not
[23:35:47] <jmgrosen> that sounds like a higher-kinded types problem too
[23:36:06] *** Quits: alisdair (textual@DB1AE4B.191304CB.C579BC3E.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[23:36:12] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[23:36:48] <sfackler> I think this may (?) help fix my thing https://github.com/mozilla/rust/issues/5922
[23:37:31] <strcat> I think it would require the struct to specify that it needs a lifetime param though
[23:38:52] <jmgrosen> tjc: what's the rustpkg package script format like? any examples?
[23:38:55] <sfackler> i guess you'd need to be able to specify lifetime parameters on traits or something weird like that. or have foo return a wrapper struct with a lifetime but that feels kind of gross
[23:39:04] <strcat> struct Statement<'a> { priv stmt: *mut sqlite3_stmt } ... Statement { stmt: connection.prepare(sql) }
[23:39:09] <tjc> jmgrosen: there's not really a pre-defined format since the intent is that you don't need one in the simplest case...
[23:39:17] <tjc> jmgrosen: but there are a few tests, let me find them
[23:39:21] <strcat> although for that you could just use &mut ;p
[23:39:49] <nmatsakis> brson: no, use Option<extern "C" fn>
[23:40:03] <jmgrosen> tjc: https://github.com/mozilla/rust/blob/master/src/librustpkg/testsuite/pass/src/fancy-lib/pkg.rs oh, so you just write a normal program and it's compiled and called with cmdline args?
[23:40:05] <tjc> jmgrosen: if you look at librustpkg/api.rs, that gives the functions that package scripts can call right now (there's not much there yet)
[23:40:13] <nmatsakis> brson: actually I think it IS possible but that's a bug
[23:40:15] <tjc> jmgrosen: Yeah, you already found the example I was going to link you to :-)
[23:40:29] <strcat> nmatsakis: is it just a bug that they act like raw pointers?
[23:40:33] <tjc> also if you look at librustpkg/tests.rs, there are a few tests that generate (very simple) pkg.rs files
[23:40:38] <nmatsakis> strcat: yes
[23:40:43] <strcat> ok good :)
[23:40:47] <tjc> I expect we'll be fleshing out that feature a lot more as we start porting servo to rustpkg
[23:41:09] <tikue_> rusti: enum Foo { Bar, Baz }; Bar as int | Baz as int
[23:41:11] -rusti- 1
[23:41:27] <strcat> probably don't want to use an enum if you need flags you can combine
[23:41:34] <tikue_> rusti: enum Foo { Bar = 1, Baz = 2 }; Bar as int | Baz as int
[23:41:35] -rusti- 3
[23:41:48] <tikue_> strcat: what's the best method for that?
[23:41:48] <strcat> you can't convert that back to Foo
[23:41:52] <tikue_> yeah i know :(
[23:41:55] <strcat> there's enumset in extra
[23:41:56] <tikue_> but you could have a method
[23:42:00] <strcat> tikue_: no, you can't
[23:42:06] <strcat> storing 3 in Foo would be undefined
[23:42:06] <tikue_> sure you could
[23:42:11] <tikue_> from_int
[23:42:17] <strcat> tikue_: it couldn't store 3 in it
[23:42:22] <tikue_> ah right
[23:42:25] <jmgrosen> wait, i've never seen this syntax before: "let pkg_id = PkgId{ version: version, ..PkgId::new(name)};" could someone explain it?
[23:42:33] <tikue_> wait
[23:42:45] <tjc> jmgrosen: it's called functional struct update
[23:42:48] <strcat> when you pattern match on an enum, the variants are an *exhaustive* list of possible values
[23:42:53] *** Joins: eatkinson (eatkinson@moz-DACC1A92.dsl.bell.ca)
[23:42:57] <tikue_> strcat: you could do fn from_int(i: int) -> ~[Foo] { }
[23:43:06] <tjc> it's saying, "Take the expression PkgId::new(name), then make a new struct that has the same fields except the version field, which I want to be `version`"
[23:43:07] <strcat> tikue_: sure but that's just going to be painful
[23:43:16] <tikue_> what does enumset do?
[23:43:26] <strcat> it's a struct with the integer in a field, and overloaded |, etc.
[23:43:32] <sfackler> represents a set of enums as a bitvector
[23:43:35] <jmgrosen> tjc: so it takes ownership of the "..thing"?
[23:43:42] <strcat> sfackler: it's just an int afaik
[23:43:53] <strcat>     priv bits: uint
[23:43:55] <tjc> jmgrosen: Yes, `thing` gets moved into the expression if it has a type that can't be copied
[23:44:01] <tikue_> strcat: how does it get back the flags from the int
[23:44:18] <tjc> you could use .clone() if you didn't want it to take ownership of `thing`
[23:44:44] <strcat> tikue_: it takes an enum as a type parameter
[23:44:56] <jmgrosen> tjc: cool. so it just uses the memory from the `thing` part but replaces the specified fields?
[23:45:25] <tjc> jmgrosen: well, that's what it should do -- I haven't looked at the codegen for that construct to make sure we're really doing that
[23:45:46] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[23:47:25] *** Joins: tcr (tcr@D26BCFC9.C2203064.EDCE493E.IP)
[23:52:04] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Ping timeout)
[23:52:10] <jmgrosen> okay, building the compiler with -Z debug-info takes a *really long* time
[23:53:05] <bjz> jeaye: https://github.com/mozilla-servo/glfw-rs/pull/2 !!!
[23:53:30] *** Quits: tcr (tcr@D26BCFC9.C2203064.EDCE493E.IP) (Ping timeout)
[23:53:30] <bjz> jeaye: lbergstrom is making some style changes, but should be in tomorrow
[23:54:08] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[23:55:11] <jmgrosen> bjz: that looks really nice -- except being able to poll events without having the window object was nice
[23:55:39] *** Quits: eatkinson (eatkinson@moz-DACC1A92.dsl.bell.ca) (Quit: eatkinson)
[23:55:57] <bjz> jmgrosen: yeah
[23:56:38] *** Joins: leonvv (leonvv@moz-7D83A5F1.ip.telfort.nl)
[23:56:39] <lbergstrom> jmgrosen: yeah, I thought about having a task that just serviced the port and dispatched the callbacks, but some of the sharing got a bit tricky. We could look into it
[23:56:59] <bjz> that would be nice
[23:57:37] <bjz> lbergstrom: for now it's just nice to get rid of the horrible hackiness
[23:58:17] <bjz> jmgrosen: have you had much of a look at cgmath?
[23:58:31] <bjz> jmgrosen: any opinions of it vs lmath?
[23:58:45] <tikue_> rusti: struct Foo { a: uint, b: uint } let foo = Foo { 1, 2 };
[23:58:45] -rusti- <anon>:5:55: 5:56 error: expected `;` but found `{`
[23:58:45] -rusti- <anon>:5          struct Foo { a: uint, b: uint } let foo = Foo { 1, 2 };
[23:58:45] -rusti-                                                                 ^
[23:58:45] -rusti- application terminated with error code 101
[23:58:47] <jmgrosen> bjz: not much yet, sorry -- been trying to debug rustc
[23:58:52] <bjz> np
[23:58:54] <leonvv> Does anyone know if std::path::Path is relative to the build directory, the directory where the executable is ran, or does it only accept absolute paths?
[23:59:08] <tikue_> rusti: struct Foo { a: uint, b: uint } let foo = Foo { 1u, 2 };
[23:59:09] -rusti- <anon>:5:55: 5:56 error: expected `;` but found `{`
[23:59:09] -rusti- <anon>:5          struct Foo { a: uint, b: uint } let foo = Foo { 1u, 2 };
[23:59:09] -rusti-                                                                 ^
[23:59:09] -rusti- application terminated with error code 101
[23:59:15] <tikue_> rusti: struct Foo { a: uint, b: uint } let foo = Foo { a: 1u, b: 2 };
[23:59:16] -rusti- <anon>:5:45: 5:48 warning: unused variable: `foo` [-W unused-variable (default)]
[23:59:16] -rusti- <anon>:5          struct Foo { a: uint, b: uint } let foo = Foo { a: 1u, b: 2 };
[23:59:16] -rusti-                                                       ^~~
[23:59:16] -rusti- ()
[23:59:19] <tjc> leonvv: it can be relative or absolute
[23:59:32] <leonvv> tjc: relative to which directory?
[23:59:47] <tjc> leonvv: at the time when it's used, relative to whatever os::getcwd() returns
[23:59:50] <bjz> jmgrosen: unfortunately I'm not really engendering much confidence in stability by doing so many changes, but I feel happier than ever with how things are fitting togethe
[23:59:53] <bjz> *together
