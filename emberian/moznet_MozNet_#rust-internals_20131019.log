[00:00:01] *** Joins: tjc (tjc@moz-BE33DA21.fw1.sfo1.mozilla.net)
[00:00:01] *** ChanServ sets mode: +o tjc
[00:11:26] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[00:11:26] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14713181c to 14df187a0: 02http://git.io/N3iJvQ
[00:11:26] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[00:11:26] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[00:11:26] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/MBOxog
[00:11:26] <ghrust> 13rust/06auto 14082cc96 15Alex Crichton: Refine privacy error messages to be more accurate...
[00:11:26] <ghrust> 13rust/06auto 14a9836e7 15bors: auto merge of #9856 : alexcrichton/rust/privacy-errors, r=huonw...
[00:11:27] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[00:19:22] *** Quits: tjc (tjc@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: zzzzzzzzzz)
[00:20:29] <brson> cmr: do you need any help with twir this weekend?
[00:29:10] <brson> does anybody know the implications of changing the linux target triple from 'unknown-linux-gnu' to 'pc-linux-gnu'?
[00:29:20] <brson> it is being attempted here https://github.com/Cynede/rust/commit/a9f7cb629b7e7d2d35afe076113008aa3dc41913#diff-e2d5a00791bce9a01f99bc6fd613a39dL263
[00:29:50] <strcat> brson: afaik pc-linux-gnu is used on x86 and unknown-linux-gnu is used on x86_64, and if we change it we won't be compatible with existing tools
[00:29:55] * strcat shrugs
[00:29:58] <strcat> I could be wrong
[00:30:08] *** Quits: dbaupp (Thunderbir@moz-54ADD9F4.lns20.syd6.internode.on.net) (Ping timeout)
[00:30:12] <brson> we use 'unknown' on both
[00:30:22] <strcat> that seems weird
[00:32:37] <strcat> brson: ah maybe you're allowed to put anything you want there
[00:32:41] <strcat> gcc has it as a *
[00:33:00] *** Joins: tjc (tjc@moz-BE33DA21.fw1.sfo1.mozilla.net)
[00:33:00] *** ChanServ sets mode: +o tjc
[00:33:42] *** Joins: dbaupp (Thunderbir@moz-54ADD9F4.lns20.syd6.internode.on.net)
[00:36:51] <pcmattman> is there by chance any way to speed up compiling rust itself?
[00:37:22] <strcat> there are pending patches for parallelized function passes by intel
[00:37:29] <strcat> beyond that... improving rustc's codegen?
[00:38:35] <pcmattman> hm, okay
[00:40:07] * pcmattman hopes this minor change doesn't error and require waiting again
[00:40:28] <dbaupp> pcmattman: is it a library change?
[00:40:52] <pcmattman> yeah, librustc, though I pulled before I built so it's currently doing the latest and greatest
[00:41:08] <dbaupp> oh, my library i mean std/extra, sorry
[00:41:39] <dbaupp> in any case, if you're just trying to get a compiler with your change to test, `make rustc-stage1` normally gives a working compiler (at half the bootstrapping cost)
[00:41:48] <dbaupp> *by library
[00:42:09] <pcmattman> sure
[00:42:19] *** Joins: Axord (xord@moz-1B228827.lsanca.dsl-w.verizon.net)
[00:42:24] * pcmattman waits for current build to complete
[00:43:46] *** Quits: tjc (tjc@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: zzzzzzzzzz)
[00:49:19] *** Joins: tjc (tjc@moz-BE33DA21.fw1.sfo1.mozilla.net)
[00:49:19] *** ChanServ sets mode: +o tjc
[01:04:13] *** Quits: tjc (tjc@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: zzzzzzzzzz)
[01:06:26] *** Quits: jeffdb (jeff@moz-D13B6004.hsd1.ca.comcast.net) (Quit: jeffdb)
[01:07:28] *** Joins: jeffdb (jeff@moz-D13B6004.hsd1.ca.comcast.net)
[01:10:19] <cmr> brson: nope, thanks for the offer!
[01:11:56] <strcat> hm
[01:12:28] <strcat> it'd be neat to have big integers in the stdlib, but have an --enable-gmp switch for configure to use the system's gmp library
[01:12:40] * acrichto sits through a compilation of no-opt rustc only to realize he left the --no-trans flag on
[01:12:50] <strcat> acrichto: ha :)
[01:12:59] <strcat> I always get bitten by lints in stage1
[01:13:07] <acrichto> but they're warnings in stage0 now!
[01:13:18] <acrichto> which I'm very happy about
[01:16:57] <strcat> acrichto: does libuv handle the case where we spawn two libuv instances, listening for the same signal?
[01:17:08] <acrichto> yes
[01:17:20] <acrichto> I made two loops, two handlers in each loop, all for the same signal
[01:17:24] <acrichto> they all got fired all the tie
[01:17:24] <acrichto> time*
[01:17:27] <acrichto> I was impressed
[01:17:37] <strcat> acrichto: not necessarily safe though
[01:17:58] <strcat> need to look at how they do it to be sure
[01:17:59] <acrichto> they have gone to what looks like great lengths to do this correctly
[01:18:11] <acrichto> what they do looks safe to me from what I've read so far
[01:18:19] <acrichto> although I didn't look at it too closely
[01:18:52] <acrichto> I do think though that if you receive 10k signals at once you may deadlock
[01:20:31] <acrichto> strcat: https://github.com/joyent/libuv/issues/887 is the only major bug I've seen in uv so far
[01:21:25] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[01:21:25] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/MBOxog
[01:21:25] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[01:26:24] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[01:26:24] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/ItedOw
[01:26:24] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[01:26:29] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[01:26:29] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/FQm5IA
[01:26:29] <ghrust> 13rust/06auto 1429c58c4 15Alex Crichton: Remove the fmt! syntax extension...
[01:26:29] <ghrust> 13rust/06auto 14cd623e3 15bors: auto merge of #9919 : alexcrichton/rust/fmt-begone, r=huonw...
[01:26:29] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[01:28:04] <acrichto> wow rustc managed to consume 3MB of stack
[01:28:23] <acrichto> 3.7 to be exact
[01:29:00] <dbaupp> doing what?
[01:29:03] <acrichto> brson: this seems like it's pretty legit (the stack overflow on nopt builds), it's just a huge stack trace in trans (3.7MB) which then wants a fixed stack segment to call malloc
[01:29:05] <strcat> acrichto: nopt? or with optimization
[01:29:07] <acrichto> nopt
[01:29:17] <acrichto> we're not this bad on optimized builds :P
[01:29:31] <acrichto> I kinda just want to slap a RUST_MIN_STACK on the builder
[01:29:38] <acrichto> with something like 20MB
[01:29:47] <acrichto> just for the nopt builds
[01:29:56] <acrichto> and only for the compile step
[01:30:17] <acrichto> this stack trace is absurd though
[01:31:48] <acrichto> oh it's all monomorphization
[01:31:56] <acrichto> a *whole lot* of it
[01:32:24] <acrichto> and then a large stack of ebml decoding
[01:35:10] *** Joins: tjc (tjc@moz-BE33DA21.fw1.sfo1.mozilla.net)
[01:35:10] *** ChanServ sets mode: +o tjc
[01:45:24] <dbaupp> cmr: word and sword would be amazing (well, mainly calling a built-in type `sword`) :D
[01:46:56] <cmr> ehhhh
[01:47:02] <cmr> it's not really the meaning of word
[01:47:29] <cmr> But what does intptr even mean?
[01:47:37] <cmr> (I know its semantics, but name-wise)
[01:47:57] <strcat> cmr: an int representation of a pointer (pointer-size integer)
[01:52:08] *** Quits: jeffdb (jeff@moz-D13B6004.hsd1.ca.comcast.net) (Ping timeout)
[01:52:32] *** Joins: jeffdb (jeff@moz-D13B6004.hsd1.ca.comcast.net)
[01:53:54] *** Quits: tjc (tjc@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: zzzzzzzzzz)
[01:54:22] *** Joins: tjc (tjc@moz-BE33DA21.fw1.sfo1.mozilla.net)
[01:54:22] *** ChanServ sets mode: +o tjc
[01:54:34] *** Quits: geoffhill (geoffhill@moz-244CF33A.amazon.com) (Quit: geoffhill)
[01:55:37] *** Quits: jeffdb (jeff@moz-D13B6004.hsd1.ca.comcast.net) (Quit: jeffdb)
[01:57:46] *** Joins: jeffdb (jeff@moz-D13B6004.hsd1.ca.comcast.net)
[02:03:27] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Quit: Jesse)
[02:08:29] <acrichto> yay removing jemalloc wasn't a massive regresssion
[02:11:04] <strcat> it's only a massive regression for parallel programs with allocation contention, or long-lived programs
[02:11:13] <strcat> doesn't really matter, can still use it
[02:22:35] *** Quits: kimundi (kimundi@moz-729E00E8.dip0.t-ipconnect.de) (Ping timeout)
[02:26:21] *** Joins: kimundi (kimundi@moz-D33AF750.dip0.t-ipconnect.de)
[02:30:20] *** kimundi is now known as zz_kimundi
[02:31:27] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[02:31:27] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/FQm5IA
[02:31:27] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[02:36:22] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[02:36:22] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/DXL8ow
[02:36:22] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[02:36:26] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[02:36:26] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/YQAlBg
[02:36:26] <ghrust> 13rust/06auto 141cf029c 15Tim Chevalier: rustpkg: Make rustpkg tests stop comparing dates...
[02:36:26] <ghrust> 13rust/06auto 144dbef01 15Tim Chevalier: rustc: Check that the output file is writeable before linking...
[02:36:27] <ghrust> 13rust/06auto 14e779313 15Tim Chevalier: rustpkg: invoke touch with a portable set of args
[02:36:29] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[02:37:15] *** zz_kimundi is now known as kimundi
[03:02:22] *** Joins: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp)
[03:41:23] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[03:41:23] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/YQAlBg
[03:41:23] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[03:46:02] *** Quits: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp) (Client exited)
[03:46:23] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[03:46:23] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/ow25tg
[03:46:23] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[03:46:27] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[03:46:27] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/BzcOfQ
[03:46:27] <ghrust> 13rust/06auto 14a0ed9bf 15Alex Crichton: Try to improve format! error messages...
[03:46:27] <ghrust> 13rust/06auto 141ddd916 15bors: auto merge of #9932 : alexcrichton/rust/better-fmt-errors, r=cmr...
[03:46:28] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[04:00:07] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Quit: Leaving...)
[04:05:43] *** Quits: tjc (tjc@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: zzzzzzzzzz)
[04:18:28] <brson> acrichto: rustc sets up the stack size explicitly when it spawns the rustc task. just give it more stack
[04:19:23] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[04:20:04] * acrichto can read code
[04:21:24] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[04:21:24] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 141ddd916 to 143a7337f: 02http://git.io/N3iJvQ
[04:21:24] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[04:21:27] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[04:21:27] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/hj9gug
[04:21:27] <ghrust> 13rust/06auto 147a8324d 15Alex Crichton: Document traits and Default about format! better...
[04:21:27] <ghrust> 13rust/06auto 1434a1e3d 15bors: auto merge of #9938 : alexcrichton/rust/fmtdox, r=huonw...
[04:21:27] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[04:22:43] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[04:31:38] <sfackler> unnecessary "pub"s are supposed to be forbidden, right?
[04:31:45] *** Quits: jeffdb (jeff@moz-D13B6004.hsd1.ca.comcast.net) (Ping timeout)
[04:31:57] *** Joins: jeffdb (jeff@moz-D13B6004.hsd1.ca.comcast.net)
[04:32:04] <sfackler> and "priv"s
[04:32:57] <acrichto> sfackler: they should be
[04:33:17] <sfackler> looks like they aren't for struct variant fields
[04:33:40] <sfackler> i'm fixing up some rustdoc issues with them now, so I'll look into fixing that as well
[04:34:01] <acrichto> I'm beginning to see why brson though they were experimental :P
[04:34:07] <acrichto> feel free to open a bug though
[04:34:12] <acrichto> should be easy to fix
[04:34:17] <sfackler> yeah
[04:37:58] *** Joins: tjc (tjc@moz-2C803B2F.tmodns.net)
[04:37:59] *** ChanServ sets mode: +o tjc
[04:43:56] *** Quits: jeffdb (jeff@moz-D13B6004.hsd1.ca.comcast.net) (Quit: jeffdb)
[04:48:25] *** Joins: jeffdb (jeff@moz-D13B6004.hsd1.ca.comcast.net)
[04:51:12] <sfackler> acrichto: reexports have inherited visibility by default?
[04:51:21] <sfackler> I didn't even know that "priv use" was a thing
[04:51:38] <acrichto> haha I forgot to check those
[04:51:42] <acrichto> b/c I've never seen priv use
[04:51:49] <acrichto> but I'd believe that we nee dto check it
[04:52:22] <sfackler> the privacy stripper currently rejects everthing with inherited visibility which is wrong in all cases except (I guess) use
[04:53:05] <dbaupp> rusti: priv use std::util;  util::ignore(1);
[04:53:06] -rusti- ()
[04:53:08] <acrichto> sfackler: wait I think I'm mixing this up, what do you mean?
[04:53:34] <sfackler> in rustdoc's privacy stripper pass
[04:54:05] <sfackler> the code strips ViewItemItems and StructFieldItems if their visibility isn't public
[04:54:17] <sfackler> but it should be inherited in the case of StructFieldItems
[04:54:38] <sfackler> I guess ViewItemItems are use statements?
[04:54:39] <acrichto> sfackler: that's the privacy pass's fault
[04:54:46] <acrichto> it should add those to the exported items set
[04:56:16] <sfackler> would that help though? it looks like exported_items is only used to exclude things that arne't in the list, and it doesn't even check for those two types
[04:59:41] <sfackler> priv use seems like something that shouldn't exist
[05:04:00] <sfackler> acrichto: r? https://github.com/mozilla/rust/pull/9946
[05:07:52] *** Quits: jeffdb (jeff@moz-D13B6004.hsd1.ca.comcast.net) (Quit: jeffdb)
[05:12:16] <acrichto> sfackler: lgtm, thanks!
[05:12:25] <acrichto> I was just going off on completely irrelevant tangents
[05:13:46] *** Quits: Kxepal (Miranda@moz-6C231589.pppoe.mtu-net.ru) (Ping timeout)
[05:14:49] *** Quits: mcpherrin (mimcpher@moz-345B5EBA.csclub.uwaterloo.ca) (Ping timeout)
[05:14:49] *** Quits: Luqman (laden@moz-AB7945E9.csclub.uwaterloo.ca) (Ping timeout)
[05:17:15] *** Joins: Kxepal (Miranda@moz-31F7E1D4.pppoe.mtu-net.ru)
[05:20:31] *** Joins: mcpherrin (mimcpher@moz-345B5EBA.csclub.uwaterloo.ca)
[05:20:34] *** Joins: Luqman (laden@moz-AB7945E9.csclub.uwaterloo.ca)
[05:26:24] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[05:26:24] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/hj9gug
[05:26:24] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[05:31:24] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[05:31:24] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/iMmyyw
[05:31:24] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[05:31:28] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[05:31:28] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/IVyVNw
[05:31:28] <ghrust> 13rust/06auto 14c05226d 15Tim Chevalier: rustpkg: Search for crates in the current directory...
[05:31:28] <ghrust> 13rust/06auto 14a23dfe8 15bors: auto merge of #9736 : catamorphism/rust/rustpkg-issue-8520, r=cmr...
[05:31:29] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[05:34:30] *** Quits: tjc (tjc@moz-2C803B2F.tmodns.net) (Ping timeout)
[05:38:21] *** Joins: tjc (tjc@moz-DFAAACEB.tmodns.net)
[05:38:22] *** ChanServ sets mode: +o tjc
[05:44:26] *** Quits: tjc (tjc@moz-DFAAACEB.tmodns.net) (Ping timeout)
[05:45:04] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[05:55:55] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[06:15:39] <acrichto> building a test harness is incredibly slow, expansion alone takes 5s!
[06:16:24] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[06:16:24] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14a23dfe8 to 1434a1e3d: 02http://git.io/N3iJvQ
[06:16:24] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[06:16:31] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[06:16:31] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/TRD_NA
[06:16:31] <ghrust> 13rust/06auto 1467ac428 15Alex Crichton: Use __morestack to detect stack overflow...
[06:16:31] <ghrust> 13rust/06auto 141e9b01b 15bors: auto merge of #9834 : alexcrichton/rust/morestack, r=brson...
[06:16:31] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[06:17:12] <dbaupp> acrichto: that seems surprising that it takes so much longer... unless there's a lot of macro-y stuff behind our #[cfg(test)]s?
[06:17:20] *** Joins: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp)
[06:19:01] *** Quits: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp) (Ping timeout)
[06:19:34] <acrichto> dbaupp: dunno, but it takes 30s in typechecking as well
[06:19:36] <acrichto> for libstd
[06:51:23] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[06:51:23] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 141e9b01b to 1434a1e3d: 02http://git.io/N3iJvQ
[06:51:23] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[06:51:27] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[06:51:27] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/fX5P0g
[06:51:27] <ghrust> 13rust/06auto 14814efb8 15Alex Crichton: Use __morestack to detect stack overflow...
[06:51:27] <ghrust> 13rust/06auto 146b2e5b4 15bors: auto merge of #9834 : alexcrichton/rust/morestack, r=brson...
[06:51:27] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[06:56:07] <pcmattman> hm, is there anything particularly magical that needs to be done to do custom compilation for a test?
[06:56:40] <dbaupp> pcmattman: other than #[cfg], you mean?
[06:57:29] <pcmattman> possibly?
[06:59:35] <pcmattman> I know what I want to do, it's the doing it that's proving less trivial (as always)
[06:59:57] <dbaupp> do you want some specific guidance? (i'll need more info if you do)
[07:00:26] <pcmattman> I need to have one test link against an output binary.
[07:00:54] <dbaupp> link in the C sense, not in the extern mod sense?
[07:00:56] <pcmattman> because the thing I'm testing is in linkage.
[07:01:03] <pcmattman> right, in the C sense
[07:02:56] <dbaupp> ah, no idea how to do that
[07:03:24] <dbaupp> you can possibly use // compile-flags:--link-args="..." 
[07:03:29] <dbaupp> (for a run-pass test)
[07:03:41] <pcmattman> mm, mostly just to get a provable test case on https://github.com/mozilla/rust/pull/9945
[07:03:46] <dbaupp> and then put the binary in auxilary with an aux-build directive
[07:04:04] <dbaupp> (I think those are the correct names...)
[07:04:05] <pcmattman> which I would love because I dislike untested/uncovered code
[07:04:12] <pcmattman> hmm, okay
[07:04:25] * pcmattman investigates
[07:15:24] <pcmattman> is there perhaps a way that I can specify just one test to run? :)
[07:16:19] <Luqman> uh setting TESTNAME i think works
[07:17:02] <pcmattman> that does the trick
[07:17:49] *** Joins: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp)
[07:19:34] *** Quits: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp) (Ping timeout)
[07:19:50] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[07:26:23] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[07:26:23] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 146b2e5b4 to 1434a1e3d: 02http://git.io/N3iJvQ
[07:26:23] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[07:26:27] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[07:26:27] <ghrust> 01[13rust01] 15bors pushed 7 new commits to 06auto: 02http://git.io/kDg3iA
[07:26:27] <ghrust> 13rust/06auto 14396f872 15Adrien TÃ©tar: doc: switch pandoc to html5
[07:26:27] <ghrust> 13rust/06auto 147b3dd1e 15Adrien TÃ©tar: doc/rust.HTML: proper version box
[07:26:28] <ghrust> 13rust/06auto 149ca0e61 15Adrien TÃ©tar: doc: tidy and cleanup CSS deps, add tutorial PDF generation
[07:26:30] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[07:28:38] *** Joins: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp)
[07:43:06] *** Quits: Axord (xord@moz-1B228827.lsanca.dsl-w.verizon.net) (Ping timeout)
[07:45:50] *** Joins: Axord (xord@moz-1B228827.lsanca.dsl-w.verizon.net)
[07:56:22] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[07:56:22] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14c7714de to 1434a1e3d: 02http://git.io/N3iJvQ
[07:56:22] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[07:56:23] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[07:56:23] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/oWn_RA
[07:56:23] <ghrust> 13rust/06auto 14a6c8889 15Alex Crichton: Use __morestack to detect stack overflow...
[07:56:23] <ghrust> 13rust/06auto 141e4fd0a 15bors: auto merge of #9834 : alexcrichton/rust/morestack, r=brson...
[07:56:23] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[08:06:18] *** Quits: doomlord_ (servitor@moz-6732E9D4.range86-184.btcentralplus.com) (Ping timeout)
[08:31:23] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[08:31:23] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 141e4fd0a to 1434a1e3d: 02http://git.io/N3iJvQ
[08:31:23] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[08:31:26] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[08:31:27] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/ZA92-g
[08:31:27] <ghrust> 13rust/06auto 14a447c3c 15Alex Crichton: Try to improve format! error messages...
[08:31:27] <ghrust> 13rust/06auto 148f24804 15bors: auto merge of #9932 : alexcrichton/rust/better-fmt-errors, r=cmr...
[08:31:27] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[08:50:41] *** Quits: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp) (Client exited)
[09:01:03] *** Joins: jeffdb (jeff@moz-D13B6004.hsd1.ca.comcast.net)
[09:02:57] *** Quits: jeffdb (jeff@moz-D13B6004.hsd1.ca.comcast.net) (Quit: jeffdb)
[09:10:07] *** Joins: jeffdb (jeff@moz-D13B6004.hsd1.ca.comcast.net)
[09:36:27] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[09:36:27] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/ZA92-g
[09:36:27] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[09:41:25] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[09:41:25] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/RSIxqw
[09:41:25] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[09:42:01] *** Joins: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp)
[09:43:43] *** Quits: jeffdb (jeff@moz-D13B6004.hsd1.ca.comcast.net) (Quit: jeffdb)
[09:46:27] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[09:46:27] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/KShqSg
[09:46:27] <ghrust> 13rust/06auto 1462cb92d 15SÃ©bastien Chauvel: doc (en & ja): remove mentions of type float, rust and rusti tools
[09:46:27] <ghrust> 13rust/06auto 14404a461 15bors: auto merge of #9939 : sinma/rust/doc, r=alexcrichton...
[09:46:27] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[09:46:28] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[09:46:28] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/RSIxqw
[09:46:28] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[09:49:43] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Quit: Jesse)
[10:02:31] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[10:39:43] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[10:40:24] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[10:44:03] *** Quits: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp) (Client exited)
[10:51:22] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[10:51:22] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/KShqSg
[10:51:22] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[10:56:20] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[10:56:20] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/s3RkLg
[10:56:20] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[10:56:24] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[10:56:24] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/neZ-XA
[10:56:24] <ghrust> 13rust/06auto 147168e70 15Alex Crichton: rustdoc: Strip methods correctly based on privacy...
[10:56:24] <ghrust> 13rust/06auto 140b1fb46 15bors: auto merge of #9941 : alexcrichton/rust/rustdoc, r=huonw...
[10:56:24] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[11:14:22] *** Joins: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp)
[11:16:06] *** Quits: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp) (Ping timeout)
[12:01:20] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[12:01:20] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/neZ-XA
[12:01:20] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[12:06:20] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[12:06:20] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/v-Pt0A
[12:06:20] <ghrust> 13rust/06auto 14590b50f 15Steven Fackler: Fix struct field visibility and add enum field doc...
[12:06:20] <ghrust> 13rust/06auto 145751794 15bors: auto merge of #9946 : sfackler/rust/enum-doc, r=alexcrichton...
[12:06:21] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[12:44:38] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Quit: Leaving)
[12:44:53] *** Joins: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp)
[12:46:39] *** Quits: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp) (Ping timeout)
[12:52:26] *** Joins: Yurume (Yurume@A826BD81.8A0DEF81.38747683.IP)
[13:04:35] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[13:11:19] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[13:11:19] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/v-Pt0A
[13:11:19] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[13:20:27] *** Joins: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp)
[13:37:24] *** Quits: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp) (Client exited)
[15:06:35] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[15:08:11] *** Joins: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp)
[15:08:39] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[15:09:58] *** Quits: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp) (Ping timeout)
[15:28:18] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[15:33:44] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[15:46:17] *** Joins: doomlord_ (servitor@moz-3F3192E5.range86-184.btcentralplus.com)
[15:58:14] *** Quits: doomlord_ (servitor@moz-3F3192E5.range86-184.btcentralplus.com) (Quit: Leaving)
[15:58:18] *** Joins: doomlord_ (servitor@moz-3F3192E5.range86-184.btcentralplus.com)
[16:06:03] *** Joins: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp)
[16:25:34] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[16:37:47] *** Quits: dbaupp (Thunderbir@moz-54ADD9F4.lns20.syd6.internode.on.net) (Ping timeout)
[16:46:18] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[16:46:18] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/fDNXdA
[16:46:18] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[16:46:20] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[16:46:20] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/0N2LQw
[16:46:20] <ghrust> 13rust/06auto 146d8330a 15Alex Crichton: Use __morestack to detect stack overflow...
[16:46:20] <ghrust> 13rust/06auto 1431a209c 15bors: auto merge of #9834 : alexcrichton/rust/morestack, r=brson...
[16:46:21] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[16:49:07] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[16:51:36] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[16:59:41] *** Joins: eddyb (eddy@3C6E2DBB.FFB4E060.A5830293.IP)
[17:31:46] *** Quits: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp) (Client exited)
[17:47:10] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[17:51:20] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[17:51:20] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/0N2LQw
[17:51:20] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[17:52:00] <acrichto> \o/ morestack landed!
[17:52:13] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[17:52:34] <acrichto> now we can enjoy proper stack overflow messages!
[17:52:43] <acrichto> well "proper"
[17:54:43] <sfackler> as "proper" as the double fail messages? :P
[17:55:39] <acrichto> pretty much :)
[17:55:51] <acrichto> I tink that the real show-stopper is arguments getting leaked
[17:56:08] <acrichto> nothing seems too appealing to fix that...
[17:56:16] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[17:56:17] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/kT5IpA
[17:56:17] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[17:56:17] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[17:56:18] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/X1ZqbQ
[17:56:18] <ghrust> 13rust/06auto 148c5f584 15Heather: remove rust and rusti from driver.rs
[17:56:18] <ghrust> 13rust/06auto 14310f7a5 15bors: auto merge of #9949 : Heather/rust/driver-rs-cleanup-pullrequest, r=thestinger
[17:56:18] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[18:02:11] *** Joins: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp)
[18:07:29] *** Quits: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp) (Ping timeout)
[18:34:53] *** Joins: StarLight (StarLight@moz-8F220F46.dynamic.avangarddsl.ru)
[18:36:52] *** Joins: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp)
[18:42:02] *** Quits: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp) (Ping timeout)
[18:50:53] *** Quits: Axord (xord@moz-1B228827.lsanca.dsl-w.verizon.net) (Quit: I'm sure it's perfectly safe)
[19:01:14] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[19:01:14] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/X1ZqbQ
[19:01:14] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[19:11:14] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[19:11:14] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/rnD4Rg
[19:11:14] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[19:11:14] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[19:11:15] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/rbHVZQ
[19:11:15] <ghrust> 13rust/06auto 14759b20d 15Huon Wilson: std::fmt: fix markdown peculiarity, unicodify some arrows, ` some trait names.
[19:11:15] <ghrust> 13rust/06auto 149d047cd 15bors: auto merge of #9952 : huonw/rust/fmt-doc, r=alexcrichton...
[19:11:15] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[19:34:02] *** Joins: tjc (tjc@moz-6EB4E533.dsl.tsoft.com)
[19:34:02] *** ChanServ sets mode: +o tjc
[20:07:26] *** Joins: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp)
[20:09:15] *** Quits: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp) (Ping timeout)
[20:14:45] *** Quits: tjc (tjc@moz-6EB4E533.dsl.tsoft.com) (Ping timeout)
[20:16:12] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[20:16:12] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/rbHVZQ
[20:16:12] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[20:21:11] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[20:21:12] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/fJFQ4A
[20:21:12] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[20:21:16] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[20:21:16] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/4j6v4Q
[20:21:16] <ghrust> 13rust/06auto 14c18afcd 15Steven Fackler: Check unnecessary visibility for struct variants
[20:21:16] <ghrust> 13rust/06auto 14423a506 15bors: auto merge of #9956 : sfackler/rust/more-more-visibility, r=alexcrichton
[20:21:16] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[20:38:47] *** Quits: eddyb (eddy@3C6E2DBB.FFB4E060.A5830293.IP) (Ping timeout)
[20:39:23] *** Joins: eddyb (eddy@3C6E2DBB.FFB4E060.A5830293.IP)
[20:48:04] <cmr> strcat: acrichto: how long do you plan on sticking around tonight? I'd like to talk a bit about runtime profiles etc
[20:48:31] <strcat> cmr: you've seen https://github.com/thestinger/rust-core right?
[20:48:35] <cmr> strcat: yeah
[20:48:49] <strcat> cmr: I will probably be around ;p
[20:49:53] <cmr> I need to gather my thoughts first and also write TWiR
[20:50:45] <acrichto> cmr: I would love to discuss that :), I may not be around much tonight though, likely midnight pst but that's not certain
[20:53:33] <cmr> The gist of it is that two pieces of Rust code compiled using two different runtimes/std profiles can't be linked together. At the very least they could be using different allocators, could block a scheduler by doing io, etc etc.
[20:54:08] <strcat> well rust-core just isn't going to support crates
[20:55:20] <strcat> you could build it into a library, but there's no point of having stuff like cross-crate inline annotations
[21:00:03] <cmr> If we want to support multiple runtimes, we need to introduce our own concept like a target triple, but the runtime used.
[21:01:13] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[21:01:13] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14423a506 to 149d047cd: 02http://git.io/N3iJvQ
[21:01:13] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[21:01:14] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[21:01:14] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/kE2r0w
[21:01:14] <ghrust> 13rust/06auto 14c18afcd 15Steven Fackler: Check unnecessary visibility for struct variants
[21:01:14] <ghrust> 13rust/06auto 1469e46f3 15bors: auto merge of #9956 : sfackler/rust/more-more-visibility, r=alexcrichton
[21:01:15] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[21:07:22] <eddyb> gaaaah
[21:07:41] <eddyb> LLVM renames foobar to foobar1, because it's also an import
[21:08:32] <strcat> eddyb: LLVM will rename conflicting symbol names
[21:08:42] <strcat> if you make 3 things called foobar, it will name them foobar, foobar1, foobar2
[21:09:05] <eddyb> that breaks one of the use cases I have for this :(
[21:09:14] <strcat> it's intended to be so you can give things names simply for debugging without worrying about them being globally unique
[21:09:16] <eddyb> importing and exporting the same symbol to link them together
[21:09:39] <strcat> I don't think that's going to work
[21:09:49] <strcat> you'd need to intercept it above the trans layer
[21:10:03] <eddyb> okay, I don't really need it here, just for this test
[21:10:44] <eddyb> how can I check if a symbol is present? I've tried exporting and importing, that's obviously not going to work
[21:11:10] <eddyb> I don't want to link two things together :/
[21:12:42] <eddyb> aux-build would make the symbol external by default
[21:13:05] <eddyb> strcat: I'm tempted to do asm!("call foobar")
[21:14:01] <strcat> eddyb: make a separate rust crate
[21:14:08] <strcat> compile both to bytecode with rustc
[21:14:11] <strcat> link them together with clang
[21:14:25] <strcat> rustc --emit-llvm -O foo.rs
[21:14:29] <eddyb> strcat: in src/test?
[21:14:34] <strcat> rustc --emit-llvm -O --lib bar.rs # one exporting a symbol
[21:14:46] <strcat> clang foo.bc bar.bc -O2 -flto
[21:14:51] <strcat> eddyb: no I'm just saying how you can work around this
[21:15:00] <strcat> I don't think what you want is possible
[21:15:07] <eddyb> strcat: if I wanted --lib I'd use aux-build. I want to export without --lib
[21:15:27] <strcat> it's not intended to be possible
[21:15:34] <eddyb> I implemented the feature, and it works, I can't just make a simple test for it
[21:15:48] <eddyb> strcat: #[linkage(external)]
[21:16:41] <eddyb> it was just a few minutes of playing with regexp, creating a test is hard (I thought import+export for the same symbol name would work)
[21:17:25] <strcat> eddyb: ah I see
[21:17:34] <strcat> I thought you meant you make it export a symbol implicitly, nvm
[21:18:03] <eddyb> asm!("call foobar"); works
[21:18:30] <eddyb> but it's bl on ARM and who knows what arcane thing on MIPS
[21:22:13] <eddyb> wait, no, that works anyway
[21:22:55] <eddyb> strcat: the platform-specific test is valid only with -O :/
[21:23:20] <eddyb> can I set the opt-level for a test?
[21:23:33] <strcat> probably not
[21:23:47] <eddyb> pffft I can't test for this then
[21:23:57] <eddyb> it works though :P
[21:24:46] <eddyb> what's "appending"? that sounds like it could do something crazy
[21:25:47] <strcat> eddyb: yeah, it does do something crazy
[21:25:52] <strcat> like merging the content of the symbols :s
[21:25:56] * strcat forgets
[21:26:15] *** Joins: tjc (tjc@94FDE217.2A034839.284344F5.IP)
[21:26:15] *** ChanServ sets mode: +o tjc
[21:26:38] *** Quits: tjc (tjc@94FDE217.2A034839.284344F5.IP) (Quit: zzzzzzzzzz)
[21:26:58] <eddyb> strcat: yupp, that's what I'm thinking
[21:27:08] <eddyb> maybe I can reliably test for those :P
[21:27:22] <eddyb> how was I setting the symbol name of a function?
[21:27:46] *** Joins: tjc (tjc@94FDE217.2A034839.284344F5.IP)
[21:27:46] *** ChanServ sets mode: +o tjc
[21:28:25] <cmr> #[export_name="foo"] ?
[21:28:33] <cmr> Or maybe #[no_mangle]?
[21:29:36] *** Quits: mcpherrin (mimcpher@moz-345B5EBA.csclub.uwaterloo.ca) (Quit: leaving)
[21:30:16] <eddyb> cmr: first one
[21:32:11] *** Joins: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp)
[21:33:48] *** Quits: km (quassel@moz-777F24DE.kevinmehall.com) (Ping timeout)
[21:33:56] *** Quits: tetsuharu (tetsuharu@moz-43BF7D89.catv.ppp.infoweb.ne.jp) (Ping timeout)
[21:35:09] *** Joins: km (quassel@moz-777F24DE.kevinmehall.com)
[21:36:17] *** jack is now known as jack|plane
[21:36:53] <eddyb> cmr: nah, doesn't do me good
[21:37:02] <eddyb> no idea how to test if this works
[21:37:10] <cmr> What are you working on?
[21:37:18] <eddyb> cmr: the linkage attr
[21:37:26] <eddyb> it works, I just can't test it
[21:37:45] <cmr> If you can't test it, how do you know it works? :)
[21:38:02] <eddyb> cmr: rabin2. nm would work just as well
[21:38:16] <eddyb> cmr: symbols are output with -O and #[linkage(external)]
[21:38:23] <eddyb> cmr: they aren't without that attr
[21:39:00] <cmr> You could hack support for running shell scripts as tests into the makefiles.
[21:39:18] <eddyb> hack being the keyword :(
[21:39:49] <eddyb> hmm, maybe private stuff doesn't get exported and I can force it to be
[21:39:51] <cmr> Anything involving the makefiles is hacky.
[21:39:53] *** Joins: brson (brson@981AA104.E81F12CD.76F66111.IP)
[21:39:54] *** ChanServ sets mode: +qo brson brson
[21:42:32] <eddyb> #[linkage(external)] #[inline(always)] #[no_mangle] fn foobar() {}
[21:43:35] <eddyb> ok, that doesn't depend on opt-level
[21:45:09] *** Quits: tjc (tjc@94FDE217.2A034839.284344F5.IP) (Quit: zzzzzzzzzz)
[21:45:19] <eddyb> but it needs foobar to be called in Rust code
[21:47:09] <Luqman> eddyb: ok, if you're making a linkage attr you should fold in the weak_linkage attr into it
[21:48:06] <eddyb> Luqman: I haven't tripped on that, weird
[21:49:29] <eddyb> Luqman: that's for ast::foreign_item_static
[21:49:35] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[21:49:48] <Luqman> yea, it's used for the crate_map
[21:50:34] <eddyb> ok, I'll make the attr stuff non-fn-specific and include replace weak_link with it
[21:51:46] <eddyb> my test is a total platform-specific hack :P
[22:05:14] <eddyb> Luqman: how do I fix that? add both attributes? if I remove the old one, will it still work?
[22:05:49] <Luqman> no you'd have to keep both until a snapshot
[22:06:16] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[22:06:16] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/kE2r0w
[22:06:16] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[22:07:05] <eddyb> Luqman: any special comment for removing next snapshot?
[22:11:18] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[22:11:18] <ghrust> 01[13rust01] 15bors pushed 7 new commits to 06auto: 02http://git.io/qUabWg
[22:11:18] <ghrust> 13rust/06auto 14f69795e 15Adrien TÃ©tar: doc: switch pandoc to html5
[22:11:18] <ghrust> 13rust/06auto 145d1fc86 15Adrien TÃ©tar: doc/rust.HTML: proper version box
[22:11:19] <ghrust> 13rust/06auto 141243d1f 15Adrien TÃ©tar: doc: tidy and cleanup CSS deps, add tutorial PDF generation
[22:11:21] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[22:19:59] *** Quits: eddyb (eddy@3C6E2DBB.FFB4E060.A5830293.IP) (Ping timeout)
[22:23:21] *** Joins: dbaupp (Thunderbir@moz-54ADD9F4.lns20.syd6.internode.on.net)
[22:25:46] *** Joins: eddyb (eddy@3C6E2DBB.FFB4E060.A5830293.IP)
[22:32:17] <dbaupp> eddyb: something like `// NOTE: remove after next snapshot` will appear in a `make tidy` run
[22:32:50] <eddyb> dbaupp: thanks :D
[22:33:17] <dbaupp> eddyb: also, you can probably test it similar to pcmattman's test for the foreign functions, can you?
[22:34:03] <eddyb> dbaupp: I have a silly test for linkage(external)
[22:34:23] <eddyb> dbaupp: I'll copy pcmattman's test after I make sure I implement the same thing
[22:35:01] <dbaupp> eddyb: awesome; what linkages have you implemented support for?
[22:35:12] <eddyb> dbaupp: all of them
[22:35:52] <dbaupp> cool; you can stick a "closes https://github.com/mozilla/rust/issues/7196" in your PR text/commit message then
[22:36:18] <eddyb> I would leave it to the reviewers to restrict the range of usable linkages
[22:36:47] <dbaupp> yup
[22:40:59] <eddyb> dbaupp: how can I run a single test?
[22:41:27] <eddyb> or what's the check target for stage1?
[22:41:31] <dbaupp> eddyb: you can compile it by hand and run the executable, or `make check-stage2-rpass TESTNAME=foo`
[22:41:36] <dbaupp> (assuming it's in run-pass)
[22:41:50] <eddyb> dbaupp: thanks :D
[22:43:42] <eddyb> hah, pcmattman's fix is included, because foreign functions use the same function I modified
[22:44:05] <eddyb> great, it's rebuilding libstd for a comment
[22:44:34] * dbaupp hates that
[22:44:58] <dbaupp> you might just have to compile it by hand with `<triples>/stage2/bin/rustc`
[22:45:16] <eddyb> *stage1. and don't worry :P
[22:45:42] * dbaupp stops worrying :P
[22:47:39] <eddyb> oooh, it cascades
[22:47:48] <eddyb> so it might compile rustc and libstd *again*
[22:47:54] <eddyb> all for a single comment
[22:48:15] <eddyb> #2amfunneh
[22:48:16] <dbaupp> libstd => libextra => libsyntax => librustc => libstd => ...
[22:48:24] <dbaupp> <3 bootstrapping
[22:51:51] *** Quits: eddyb (eddy@3C6E2DBB.FFB4E060.A5830293.IP) (Ping timeout)
[22:53:42] *** Joins: eddyb (eddy@3C6E2DBB.FFB4E060.A5830293.IP)
[22:57:41] *** lbergstrom is now known as lbergstrom|dinner
[23:10:49] <eddyb> dbaupp, acrichto, pcmattman: https://github.com/mozilla/rust/pull/9966
[23:19:58] <dbaupp> eddyb: looks good :)
[23:29:32] <eddyb> dbaupp: I guess I'll add comments now :P
[23:29:52] *** lbergstrom|dinner is now known as lbergstrom
[23:30:18] <eddyb> dbaupp: and I explained in the pullreq, without implying I won't add comments
[23:31:52] <dbaupp> eddyb: ok, good :)
[23:34:06] <eddyb> anything else to add?
[23:34:37] <eddyb> dbaupp: just so I don't break some unwritten contributing rule, amend or commit?
[23:37:36] <kimundi> eddyb: Works either way. Generally you should try to make each commit compileable, but apart from that there aren't any guidelines
[23:39:03] <kimundi> Wheew, done: https://github.com/mozilla/rust/pull/9967
[23:39:09] * kimundi goes to bed
[23:39:22] <dbaupp> kimundi: \o/
[23:40:24] <dbaupp> eddyb: keep the history cleaner by amending is nice (but not necessary, I'll often not amend when addressing a complicated review, so the reviewers can see what I changed)
[23:41:18] <dbaupp> *keeping
[23:46:05] <eddyb> pushed with some extra comments :D
[23:49:04] <dbaupp> eddyb: looks good to me
[23:58:10] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
