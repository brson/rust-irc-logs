[00:02:01] <brson> Scriptor: they are hosted on s3 actually
[00:02:21] <brson> static.rust-lang.org is an s3 bin
[00:03:03] <brson> acrichto has been tweaking the clean rules for docs. wonder if something broke
[00:03:23] *** Quits: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net) (Ping timeout)
[00:04:25] <brson> yeah, the logs say 'deleted' *everything* http://buildbot.rust-lang.org/builders/doc/builds/1641/steps/MasterShellCommand_1/logs/stdio
[00:04:30] <brson> acrichto: ^
[00:04:41] <brson> except the rustdoc search indexes, yay
[00:05:44] *** Joins: alan_andrade (alan_andra@8AB4864E.75F2E118.B7838CA6.IP)
[00:05:45] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Quit: Textual IRC Client: www.textualapp.com)
[00:05:54] <brson> i'm going to kick off another doc build and see what happens
[00:06:09] *** Quits: jhasse (jhasse@moz-3031C125.ewe-ip-backbone.de) (Quit: Verlassend)
[00:07:42] *** Joins: Jesse_ (jruderman@moz-BBE3ABD.mv.mozilla.com)
[00:07:46] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Connection reset by peer)
[00:07:46] *** Joins: ianj (ianjneu@moz-9975535.bstnma.east.verizon.net)
[00:07:51] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[00:08:18] *** Quits: moostik (Icedove@6181009C.10715965.BCDF592F.IP) (Ping timeout)
[00:10:33] *** Joins: tabraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net)
[00:10:58] *** Quits: tabraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net) (Input/output error)
[00:11:32] *** jdm is now known as jdm|f00ding
[00:12:11] <brson> i actually don't understand what that log is saying
[00:14:09] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[00:15:31] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[00:16:45] *** Quits: jvns (bork@87D98E32.4046EB22.428F94DD.IP) (Ping timeout)
[00:18:38] *** Joins: nif (Mibbit@moz-8181E2AC.oberlin.net)
[00:18:46] *** Quits: synackse (synackse__@moz-DFB8ED3B.lightspeed.wepbfl.sbcglobal.net) (Ping timeout)
[00:21:10] *** Joins: ofeldt- (ofeldt@moz-667EBECD.dip0.t-ipconnect.de)
[00:22:03] *** Quits: ofeldt (ofeldt@moz-B87DB310.dip0.t-ipconnect.de) (Ping timeout)
[00:28:01] *** Quits: Jesse_ (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse_)
[00:29:37] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[00:30:30] *** Joins: hacker_sam (hacker_sam@2EE27BB6.661C02A7.B0CE379A.IP)
[00:32:37] *** Quits: canhtak (canhtak@moz-258236CD.wl.t.ulaval.ca) (Ping timeout)
[00:33:15] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[00:33:33] *** Joins: fyolnish (fyolnish@moz-2CC62401.uqwimax.jp)
[00:33:52] *** Quits: Scriptor (anonymous@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[00:35:20] *** Quits: fyolnish (fyolnish@moz-2CC62401.uqwimax.jp) (Ping timeout)
[00:35:36] <brson> well the docs are back to normal now. bots fixed themselves i guess
[00:35:53] <ChrisMorgan> Whew.
[00:36:53] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[00:37:30] <nif> what's the expected turnaround time on pull request --> comments, suggestions, fixes --> new commits?  I just got a ton of good comments on my pull request but I've had a few drinks and probably won't get to the fixes until tomorrow.
[00:37:54] *** Joins: jhasse (jhass_000@moz-3031C125.ewe-ip-backbone.de)
[00:38:00] *** Joins: synackse (synackse__@moz-DFB8ED3B.lightspeed.wepbfl.sbcglobal.net)
[00:38:06] <mcpherrin> nif: no rush; a day or two is fine
[00:38:14] <nif> great. :)
[00:38:15] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[00:38:23] <mcpherrin> lots of people work in different time zones and this sort of thing happens
[00:38:33] <nif> people extol the values of drunk coding but I think it's probably a bad idea.
[00:38:35] <aatch> nif, I've left PRs open for like a week before because I forgot about them.
[00:38:47] <nif> yes, that's true. my "workday" is over in Ohio.
[00:38:48] <jhasse> Is there a shortcut for creating and filling a hashmap? E.g. { "key":"value", ...}
[00:39:21] *** Quits: dkeenaghan (dkeenaghan@A9F153F4.DDE28F19.986A907C.IP) (Connection reset by peer)
[00:39:21] <cmr> jhasse: no
[00:39:29] <jhasse> ok
[00:39:32] <nif> aatch: that's comforting. I'm currently getting paid to do Rust so I don't think I can get away with that, but I should have good fixes in a day or two.
[00:39:40] <sfackler> jhasse: you can write a macro to do it pretty easily though
[00:40:09] *** Joins: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com)
[00:43:12] *** Joins: canhtak (canhtak@moz-258236CD.wl.t.ulaval.ca)
[00:44:26] *** Joins: kmapped2 (kmapped2@A35331CF.60E9685E.20F09BA6.IP)
[00:44:28] *** Joins: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com)
[00:45:28] <sfackler> jhasse: something like this should work (untested) https://gist.github.com/sfackler/0f419a2a1c22536097aa
[00:47:19] <jhasse> sfackler, cool thanks! I've never looked into macros, but this looks great! IMHO this should be in libstd ;) I will try it out
[00:47:34] <bstrie> pcwalton: so is `box()` the same as `box` the same as `box(HEAP)` ?
[00:47:57] <cmr> jhasse: macros can't be exported by a crate atm.
[00:48:06] <bstrie> sfackler promises to fix this
[00:48:25] <jhasse> ah okay ic
[00:48:27] <sfackler> I only promise procedural macro export for now :)
[00:49:14] <sfackler> though once those work most of the machinery for macro_rules! macro export should be there
[00:49:31] <jhasse> How does format! work then?
[00:49:32] <ChrisMorgan> sfackler: not sure why you'd go for + in that case rather than *. If people want to write map!(), sounds fine by me.
[00:49:50] <aatch> jhasse, built into the compiler
[00:49:53] <cmr> jhasse: all the macros are hardcoded into the parser.
[00:50:05] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[00:50:06] <jhasse> ok
[00:50:19] <sfackler> ChrisMorgan: yeah, that's true
[00:50:27] <ChrisMorgan> jhasse: syntax::ext::expand if you want to look
[00:50:29] *** Quits: awidegreen (awidegreen@moz-3FE0A1F.a357.priv.bahnhof.se) (Ping timeout)
[00:51:09] <sfackler> it's a mix of macro_rules style macros like debug! and procedural macros like format! that actually process the AST manually
[00:51:40] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: Lost terminal)
[00:51:54] <pcwalton> bstrie: yes
[00:52:39] <jhasse> How do I "add #[feature(macro_rules)] to the crate attributes"?
[00:52:48] <cmr> jhasse: #[fature(macro_rules)];
[00:52:51] <cmr> in the crate root.
[00:52:59] <ChrisMorgan> Remember the semicolon.
[00:53:07] <ChrisMorgan> And the e after f. :P
[00:53:18] <cmr> hah
[00:53:27] <jhasse> ahh i forgot the ;
[00:53:43] <jhasse> thanks. Maybe the compile error should include the semicolon?
[00:54:26] <cmr> I think we should just change the syntax.
[00:54:32] <ChrisMorgan> sfackler: well, format! is done with macro_rules!, but it depends directly on format_args! which is procedural.
[00:54:38] <cmr> I don't care how ugly it is. At least #^[...] can't be mistaken.
[00:55:11] <bstrie> +1 for #^
[00:55:15] <bstrie> infinitely better than the semicolon
[00:55:22] <ChrisMorgan> I was opposed to the suggestions that had been being made with regards to macros, but I have seen *a lot* of people missing the semicolon on crate attributes and I've even done it myself a couple of times—but I knew the solution.
[00:55:42] <ChrisMorgan> Now, I agree that some form of syntax change would be a very good idea.
[00:56:25] *** Quits: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[00:56:33] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[00:57:07] <pcwalton> heh, there are several unused hash maps being created in the trans crate context
[00:57:09] <pcwalton> removing them
[00:57:17] <pcwalton> shouldn't impact compiler perf since they're only created once, it's just silly
[00:57:18] <eevee> are crate attrs the only case where you want a semicolon after #[]
[00:57:20] *** jorendorff is now known as jorendorff_away
[00:57:24] <cmr> eevee: no
[00:57:37] <pcwalton> I think we could just change the syntax to @attribute like python and java once @ is gone
[00:57:39] * pcwalton shrugs
[00:57:40] <cmr> any time you want the attribute to apply to the containing module.
[00:57:46] *** jorendorff_away is now known as jorendorff
[00:57:47] <cmr> pcwalton: sure, that'd be even better.
[00:57:49] *** Quits: hoverbear (hoverbear@EBFA78B5.F19E5E7B.E74D50F2.IP) (Quit: Taking a nap.)
[00:58:06] *** Joins: ktt3ja (ktt3ja@moz-54586A12.washdc.fios.verizon.net)
[00:58:10] <eevee> well, similar idea then; nothing to decorate
[00:58:19] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Client exited)
[00:58:46] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[00:58:49] <bstrie> pcwalton: I'd be fine with that
[00:58:53] <ChrisMorgan> pcwalton: hey! You just came up with syntax that I actually like! :-)
[00:59:11] <bstrie> ChrisMorgan: well, it's been suggested for years, since long before we ever thought about getting rid of @ :P
[00:59:12] <eevee> and that frees # for comments  ;)
[00:59:32] <bstrie> eevee: then our hashbangs would actually make sense! :)
[01:00:14] <ChrisMorgan> No, it frees it for a preprocessor—#if linux ... #else ... #endif ... #define X y ... :P
[01:00:19] <bstrie> eevee: btw, I can't believe you didn't know about C++'s abi
[01:00:30] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Ping timeout)
[01:00:34] <eevee> bstrie: i'm not /surprised/ but it's not something i'd thought very deeply about
[01:00:41] <cmr> what about what?
[01:00:47] <bstrie> that it's not standardized
[01:00:53] <cmr> ah
[01:00:58] <eevee> that it doesn't have one
[01:01:16] <bstrie> well I mean, a given compiler will have one, or possibly more :P
[01:01:38] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[01:01:39] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[01:01:39] *** ChanServ sets mode: +ao brson brson
[01:01:46] <bstrie> this is one of the really really big things that rust does
[01:01:51] <bstrie> actually standardize an abi
[01:01:51] <eevee> not be c++?  :)
[01:01:56] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[01:02:00] <cmr> bstrie: we don't standardize an ABI?
[01:02:04] <cmr> we use fastcc
[01:02:14] <cmr> which isn't a standardized abi
[01:02:19] <bstrie> are you shitting me
[01:02:30] <bstrie> are we at least doing better than C++
[01:02:39] <strcat> bstrie: the C ABI isn't any more standard
[01:02:42] <aatch> bstrie, standardising an ABI isn't actually that big a deal.
[01:02:42] <eevee> bstrie: i can't believe you didn't know about rust's abi
[01:02:44] <strcat> cmr: we don't use fastcc anymore
[01:02:47] <bstrie> eevee: I'm so ashamed!
[01:02:49] <cmr> strcat: wait we don't?
[01:03:03] <strcat> cmr: it wasn't used as long as I've used rust - we use cdecl
[01:03:09] <strcat> LLVM optimizes internal functions to fastcc
[01:03:20] <bstrie> aatch: it's a big deal to me, I want people to be able to call rust libraries from any language :)
[01:03:20] <strcat> on x86_64 I think fastcc is basically the same, if not exactly the same, anyway
[01:03:32] <cmr> bstrie: extern "C"
[01:03:36] <aatch> bstrie, then expose the interface as a C ABI
[01:03:45] <bstrie> nah I don't even want that step
[01:03:52] <bstrie> I just want to be able to call rust code
[01:03:53] <bstrie> full stop
[01:04:34] <eevee> it would be pretty impressive if rust could be used as an interchange language without c as a crutch
[01:04:50] <bjz> eevee: ++
[01:04:52] <bstrie> eevee: even with a C abi there's not necessarily any C involved... at least afaik...
[01:04:55] <cmr> strcat: hm, I swore we used fastcc.. but there's not even a PR that I could have seen to think that.
[01:05:02] <bjz> we should plan post C as well
[01:05:09] *** Joins: carllerche (carllerche@moz-2B516F15.hsd1.or.comcast.net)
[01:05:18] <bstrie> but yes, I'd love to be able to just call native rust functions
[01:05:20] <bjz> (if that *ever* comes to pass - unlikely)
[01:05:20] <ChrisMorgan> Wow, Chrome makes an impressive mess of its SVG rendering.
[01:05:24] <bstrie> without any of the silly C++ shenanigans
[01:05:44] <ChrisMorgan> My slides don't display properly in Chrome in a couple of locations, to say nothing of its selecting the wrong font weights.
[01:05:52] *** Joins: Jesin (Jesin@moz-AADC888D.eecs.lehigh.edu)
[01:06:02] *** Joins: fournm (Aria@moz-ABB60BA0.austin.res.rr.com)
[01:06:09] <bjz> bstrie: yeah, C++ has been crippled by the fact of it being a black hole of name mangling
[01:06:21] <cmr> extern "C" { ... } works fine in C++
[01:06:34] <strcat> bjz: rust has name mangling too, and requires it
[01:06:41] <bjz> strcat: yep
[01:06:41] <bstrie> cmr: shenanigans!
[01:06:50] <strcat> C++ ABI isn't any more or less standard than the C ABI
[01:06:57] <bjz> strcat: with generic functions, modules?
[01:07:20] <aatch> From my experience, the only major issue is that the C++ class layout isn't particularly stable.
[01:07:37] <strcat> virtual functions are dumb anyway ;p
[01:07:43] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[01:07:45] <aatch> strcat, lol.
[01:08:02] *** Quits: g3xzh (g3xzh@moz-E33C8149.red.bezeqint.net) (Quit: Leaving)
[01:08:03] <aatch> But compilers are allowed to re-arrange private members of C++ classes.
[01:08:14] <mcpherrin> eevee: are you @eevee on twitter by any chance?
[01:08:17] <eevee> i am
[01:08:39] <bjz> aatch: yeah, was watching a talk from the masochistic folks getting clang/llvm to work with Visual Studio
[01:09:00] <mcpherrin> eevee: well I still don't know who you are other than that some people I follow follow you :P
[01:09:11] <bjz> http://llvm.org/devmtg/2013-11/
[01:09:25] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[01:09:26] <bjz> pretty crazy stuff going on with C++
[01:09:26] <cmr> bjz: ohhhh video is up!
[01:09:27] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[01:09:37] <eevee> mcpherrin: i seem to be most known for griping about programming languages but sometimes i try to write programs also!
[01:09:44] <aatch> bjz, oo yeah, on some platforms you also have to work with yet another calling convention in C++, `thiscall`
[01:09:49] <bjz> Bringing clang and LLVM to Visual C++ users
[01:09:53] <bjz> is the one
[01:10:09] <aatch> which is explicitly optimized for calling member functions.
[01:10:27] <mcpherrin> eevee: complaining is one of my favourite hobbies!
[01:10:32] *** Quits: echristo (echristo@A2012DB6.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[01:10:33] <mcpherrin> So I can get behind that.
[01:11:08] <nif> eevee: your twitter handle is some cred! I'm going to follow you, just because.
[01:11:19] <eevee> haha it was surprisingly easy to get
[01:11:29] <eevee> it was abandoned, i asked the owner for it, he said ok
[01:11:35] <nif> groovy. :D
[01:11:50] <eevee> to get the same name on livejournal i had to register a domain and...  some other things
[01:11:52] <nif> I knew the person who had doge.tumblr.com for awhile. I have a feeling she sold it or gave it away.
[01:12:02] <nif> heh
[01:12:40] <bjz> :P
[01:12:45] *** Quits: canhtak (canhtak@moz-258236CD.wl.t.ulaval.ca) (Quit: canhtak)
[01:13:53] <bjz> bstrie: what did you think of my universal server thingy? bit more verbose :P
[01:14:17] <eevee> since the rest of the company is holiday-partying i'm pretty sure i can stop pretending to work and instead pretend to do some rust or something
[01:14:46] <nif> eevee: why don't you party, instead?
[01:14:53] <eevee> i'm remote
[01:15:00] <nif> ;~;
[01:15:01] <bjz> eevee: aww :(
[01:15:21] <nif> that should never stop you.
[01:15:27] <nif> you can always have a party of one.
[01:15:38] <eevee> nah it means i can go party with my partner instead of pretend i remember the names of people in other departments
[01:15:49] <nif> haha, seems better. :)
[01:18:52] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[01:19:36] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[01:19:38] *** Joins: canhtak (canhtak@moz-258236CD.wl.t.ulaval.ca)
[01:21:37] *** Quits: ricepuddin (graham@moz-7D68765A.cable.virginm.net) (Connection timed out)
[01:21:55] *** Joins: ricepuddin (graham@moz-7D68765A.cable.virginm.net)
[01:21:56] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[01:25:04] *** Joins: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net)
[01:25:48] *** jorendorff is now known as jorendorff_away
[01:26:13] <acrichto> brson: uh oh, I was poking around a bit, but good to hear that everything is back!
[01:26:27] *** Quits: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net) (Quit: Taking a nap.)
[01:30:03] <ChrisMorgan> I just updated rustc and I'm discovering that rust-http won't build because of things like `pub use self::response::ResponseReader;`, complaining that ResponseReader is private. Is this deliberate? I can't see any recently landed PR that would cover this.
[01:30:34] *** Quits: nif (Mibbit@moz-8181E2AC.oberlin.net) (Quit: http://www.mibbit.com ajax IRC Client)
[01:31:46] <ChrisMorgan> (Less than a day ago rust-http was building.)
[01:33:31] *** Joins: fyolnish (fyolnish@moz-C7A1FEE1.uqwimax.jp)
[01:34:17] *** Joins: MrByte (Dartakio@moz-81792842.chy-wy.client.bresnan.net)
[01:34:28] *** Quits: alan_andrade (alan_andra@8AB4864E.75F2E118.B7838CA6.IP) (Connection reset by peer)
[01:34:39] *** Joins: alan_andrade (alan_andra@8AB4864E.75F2E118.B7838CA6.IP)
[01:35:20] *** Quits: fyolnish (fyolnish@moz-C7A1FEE1.uqwimax.jp) (Ping timeout)
[01:35:59] <acrichto> ChrisMorgan: check the struct, it may actually be private
[01:37:07] <ChrisMorgan> acrichto: it is indeed private; my question is, is it deliberate that parents not be able to access private children? And when did that change?
[01:38:03] <acrichto> ChrisMorgan: a module can access anything that is private *to itself*, if "mod response" is private, then the current module can *access* it, but across any other boundary you can only access public things
[01:38:27] <acrichto> http://static.rust-lang.org/doc/master/rust.html#visibility-and-privacy has some good docs about it
[01:38:52] <ChrisMorgan> But this code was working yesterday; what changed? I can't find any mention of that.
[01:39:13] <acrichto> https://github.com/mozilla/rust/pull/11019
[01:39:53] *** Quits: carllerche (carllerche@moz-2B516F15.hsd1.or.comcast.net) (Quit: carllerche)
[01:39:56] <ChrisMorgan> Oh, OK. I get it. Thanks!
[01:41:52] *** Quits: synackse (synackse__@moz-DFB8ED3B.lightspeed.wepbfl.sbcglobal.net) (Ping timeout)
[01:42:28] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[01:44:04] *** Joins: carllerche (carllerche@moz-2B516F15.hsd1.or.comcast.net)
[01:44:08] *** Joins: synackse (synackse__@moz-DFB8ED3B.lightspeed.wepbfl.sbcglobal.net)
[01:44:38] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[01:44:39] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Client exited)
[01:45:26] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[01:45:26] *** ChanServ sets mode: +ao brson brson
[01:45:29] *** Quits: andreypopp (andreypopp@moz-7261DC60.net) (Quit: andreypopp)
[01:46:05] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[01:46:16] *** Quits: MrByte (Dartakio@moz-81792842.chy-wy.client.bresnan.net) (Ping timeout)
[01:46:22] *** Joins: brson (brson@981AA104.E81F12CD.76F66111.IP)
[01:46:22] *** ChanServ sets mode: +ao brson brson
[01:48:15] *** Quits: carllerche (carllerche@moz-2B516F15.hsd1.or.comcast.net) (Quit: carllerche)
[01:49:31] *** Quits: lkuper (lkuper@moz-D862222C.dhcp-bl.indiana.edu) (Ping timeout)
[01:50:05] <dbaupp> bjz: ping
[01:50:15] <bjz> dbaupp: ding
[01:51:02] <dbaupp> bjz: could you remove me as a collaborator from your fork of rust? (I keep seeing reaallly tempting buttons like "delete this branch" on your PRs, and I don't want to accidentally screw something up for you :) )
[01:51:13] <bjz> yikes
[01:51:16] <bjz> sorry!
[01:51:23] <bjz> (didn't realise)
[01:51:56] <mcpherrin> dbaupp: press them you know you want to
[01:52:04] <bjz> done!
[01:52:45] <dbaupp> mcpherrin: too late :P
[01:55:12] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[01:56:08] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[01:56:10] *** Joins: sellout (Adium@moz-AE26682A.hlrn.qwest.net)
[01:56:35] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[01:57:44] *** Joins: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com)
[01:57:55] *** Quits: sellout (Adium@moz-AE26682A.hlrn.qwest.net) (Ping timeout)
[01:58:34] *** Joins: MrByte (Dartakio@moz-81792842.chy-wy.client.bresnan.net)
[01:58:54] <ezyang> Hm, this is kind of unsatisfying: https://gist.github.com/ezyang/8033155 
[01:59:23] <dbaupp> ezyang: in what way?
[01:59:24] *** Joins: spott (spott@moz-82AAF168.hsd1.co.comcast.net)
[01:59:54] <ezyang> the kill span covers the entire lexical scope the borrow is live for 
[02:00:14] <ezyang> but it's not displayed in a very good way at the moment 
[02:00:15] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[02:00:35] *** Quits: c-a (c-a@moz-57C82A9.a163.priv.bahnhof.se) (Quit: Ex-Chat)
[02:00:42] <ezyang> (to be clear, the 'note's are messages I added 
[02:01:04] *** Quits: spott (spott@moz-82AAF168.hsd1.co.comcast.net) (Ping timeout)
[02:01:31] *** Quits: ianj (ianjneu@moz-9975535.bstnma.east.verizon.net) (Ping timeout)
[02:01:52] <ezyang> Hmm, I wonder what the ideal world output looks like 
[02:02:03] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[02:04:52] *** Joins: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net)
[02:05:32] *** Quits: jlong (jlong@moz-6DFDE846.socal.res.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[02:06:40] <brson> acrichto: do you have any hints about why 'make: *** No rule to make target `x86_64-unknown-linux-gnu/test/run-make/rustdoc-smoke-2-T-arm-linux-androideabi-H-x86_64-unknown-linux-gnu.ok', needed by `tmp/check-stage2-T-arm-linux-androideabi-H-x86_64-unknown-linux-gnu-rmake.ok'.  Stop.
[02:06:49] <brson> er, that^ would happen for android?
[02:07:49] <acrichto> brson: the rmake tests probably have the host/target triples mixed up
[02:08:00] <acrichto> it may only define it for $host $host and not $host $target
[02:08:20] <brson> thanks
[02:11:17] <ezyang> Hm. The span of the new loan is bigger than I would expect. 
[02:11:19] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Quit: ChatZilla 0.9.90.1 [Firefox 25.0.1/20131112160018])
[02:12:10] <ezyang> oh, actually, that is expected behavior 
[02:12:19] *** Joins: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net)
[02:14:14] *** Quits: qrada (ad@1FF1D5D4.3F1C4048.973C8D27.IP) (Quit: leaving)
[02:14:17] <ezyang> OK, I guess the first step is to tweak how Rust outputs big, multiline spans 
[02:16:08] <dbaupp> ezyang: unfortunately our diagnostics output is realllllly horrible (syntax::diagnostics, fwiw.)
[02:16:45] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[02:17:28] *** Joins: sellout (Adium@moz-AE26682A.hlrn.qwest.net)
[02:17:52] <ezyang> In your opinion, how can it be improved? (alt, is there an issue on the subject?) 
[02:18:17] <dbaupp> yes
[02:18:26] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[02:18:32] <dbaupp> the problem is it's really old, and uses @ (and @mut, I think) way too much
[02:18:36] <ChrisMorgan> If anyone wants my presentation slides from yesterday, http://chrismorgan.info/blog/rust-docs-vision-presentation.html (most of the added content I promised is not there yet, it's coming)
[02:18:45] <ezyang> oh, well, I don't really care about that ^_^ 
[02:18:58] <dbaupp> ezyang: the design is essentially one for a different language (i.e. Rust 0.1, or something)
[02:19:21] <dbaupp> ezyang: the only think that affects you is it makes modification harder, although you can probably do what you want without too many problems
[02:19:27] <dbaupp> maybe
[02:19:43] <ezyang> fair 
[02:20:09] <ezyang> btw, why did you guys decide to do ^~~~~~ instead of something uniform like ~~~~~~? 
[02:20:23] <dbaupp> ChrisMorgan: http://chrismorgan.info/blog/the-tech-behind-my-rust-docs-presentation.html is 404 for me
[02:20:36] <dbaupp> (i guess that comes under "it's coming"?)
[02:20:44] <ChrisMorgan> Oh, whoops, forgot to update that link.
[02:22:23] <ChrisMorgan> dbaupp: the content is there, just the link was wrong.
[02:23:46] *** Quits: pyon (user@F4DA2F11.BD7DB6F4.1C8C8CE9.IP) (Ping timeout)
[02:24:42] *** Quits: canhtak (canhtak@moz-258236CD.wl.t.ulaval.ca) (Quit: canhtak)
[02:24:55] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[02:26:39] *** Quits: synackse (synackse__@moz-DFB8ED3B.lightspeed.wepbfl.sbcglobal.net) (Ping timeout)
[02:27:17] *** Joins: synackse (synackse__@moz-DFB8ED3B.lightspeed.wepbfl.sbcglobal.net)
[02:31:42] <pcwalton> rust's checking to see whether you initialized a variable explicitly before using it just caught a bug
[02:31:47] <pcwalton> whee
[02:32:04] <pcwalton> (that just zeroing data out would not have)
[02:32:32] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[02:33:29] *** Joins: fyolnish (fyolnish@moz-F99B891B.uqwimax.jp)
[02:34:45] <ezyang> What does the formatting specifier {0:1$} do? 
[02:36:46] <dbaupp> rusti: println!("{0:1$} {1:1$}"), "", "123")
[02:36:48] -rusti- pastebinned 6 lines of output: http://ix.io/9rP
[02:36:58] <dbaupp> rusti: println!("{0:1$} {1:1$}", "", 123)
[02:37:00] -rusti- pastebinned 7 lines of output: http://ix.io/9rQ
[02:37:08] <dbaupp> rusti: println!("{0:1$} {0:1$}", "", 123)
[02:37:11] -rusti- pastebinned 2 lines of output: http://ix.io/9rR
[02:37:26] <dbaupp> rusti: println!("{0:1$}", "hi", 12)
[02:37:27] -rusti- hi          
[02:37:27] -rusti- ()
[02:37:47] <dbaupp> ezyang: takes the second argument as the width of the field
[02:38:31] *** Joins: jviereck (Adium@moz-B1B15ECC.dip0.t-ipconnect.de)
[02:38:34] <ezyang> Ah, I see 
[02:39:25] * ChrisMorgan just read the words "Um… yeah. Rust is bad."
[02:39:55] <geomyidae> wut
[02:40:11] <cmr> ChrisMorgan: Yay! Why this time?
[02:40:15] <ChrisMorgan> http://dilbert.com/strips/comic/1997-01-12/ :D
[02:40:30] <cmr> heh
[02:41:11] <cmr> oh the ending is golden
[02:41:48] *** Quits: ktt3ja (ktt3ja@moz-54586A12.washdc.fios.verizon.net) (Quit: Leaving)
[02:42:09] *** Quits: fyolnish (fyolnish@moz-F99B891B.uqwimax.jp) (Ping timeout)
[02:43:20] *** Joins: refold (gman@moz-42D68426.a258.priv.bahnhof.se)
[02:43:50] *** Quits: alan_andrade (alan_andra@8AB4864E.75F2E118.B7838CA6.IP) (Input/output error)
[02:45:12] *** Joins: jhass_000_ (jhass_000@moz-3158CC32.ewe-ip-backbone.de)
[02:45:15] *** Quits: jhass_000_ (jhass_000@moz-3158CC32.ewe-ip-backbone.de) (Quit: Verlassend)
[02:46:08] *** Quits: jhasse (jhass_000@moz-3031C125.ewe-ip-backbone.de) (Ping timeout)
[02:49:28] *** Joins: trecer (trecer@moz-3A571AF4.dyn.centurytel.net)
[02:50:01] *** Quits: bjustin (bjustin@moz-8FC28563.sierrabravo.net) (Quit: Textual IRC Client: www.textualapp.com)
[02:52:02] <wycats_> I have a C-style enum
[02:52:15] <wycats_> I want to go from the number to the type and vice versa
[02:52:27] <wycats_> it's an enumeration of 5 things
[02:52:40] <cmr> #[deriving(FromPrimitive, ToPrimitive)] iirc
[02:54:11] *** Quits: ricepuddin (graham@moz-7D68765A.cable.virginm.net) (Connection timed out)
[02:54:34] *** Joins: ricepuddin (graham@moz-7D68765A.cable.virginm.net)
[02:55:34] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[02:56:35] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[02:58:16] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[02:59:19] *** Joins: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net)
[02:59:27] *** Joins: jlong (jlong@moz-6DFDE846.socal.res.rr.com)
[03:00:03] *** Joins: spott (spott@moz-82AAF168.hsd1.co.comcast.net)
[03:00:36] *** Joins: canhtak (canhtak@moz-258236CD.wl.t.ulaval.ca)
[03:01:04] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[03:01:46] *** Quits: spott (spott@moz-82AAF168.hsd1.co.comcast.net) (Ping timeout)
[03:02:08] *** Quits: brson (brson@981AA104.E81F12CD.76F66111.IP) (Ping timeout)
[03:02:36] *** Quits: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net) (Ping timeout)
[03:02:41] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[03:02:42] *** ChanServ sets mode: +ao brson brson
[03:02:48] *** Joins: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net)
[03:03:06] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[03:04:30] <eevee> whoa, go's compiler isn't self-hosting?
[03:05:31] <mcpherrin> eevee: It shouldn't really be surprising; rust is pretty unique in using itself pre-1.0
[03:05:55] <eevee> i guess that seems like exactly the kind of thing google in particular would do asap
[03:06:11] *** Quits: doublec (test@moz-EC11DA4D.members.linode.com) (Quit: leaving)
[03:06:20] <eevee> yet the most significant program written in their language isn't even its own compiler  ;)
[03:07:32] <mcpherrin> Google actually uses Go for stuff, not like rust which is a play town ;)
[03:07:54] *** Quits: trecer (trecer@moz-3A571AF4.dyn.centurytel.net) (Quit: Computer has gone to sleep.)
[03:07:59] <cmr> steveklabnik: your talk is really funny to watch :)
[03:07:59] <eevee> rust is already used for compilers and rendering engines!
[03:08:04] <eevee> and other things if i can ever get it to work.
[03:08:08] <steveklabnik> cmr oh?
[03:08:10] <steveklabnik> :D
[03:08:24] *** Joins: trecer (trecer@moz-3A571AF4.dyn.centurytel.net)
[03:08:29] <cmr> steveklabnik: are you or someone else working on tutorial => guide?
[03:08:43] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[03:08:43] <steveklabnik> i am not currently working on anything. :(
[03:09:27] <steveklabnik> i think https://github.com/mozilla/rust/pull/9579 should get applied
[03:10:14] *** Quits: trecer (trecer@moz-3A571AF4.dyn.centurytel.net) (Ping timeout)
[03:10:25] <steveklabnik> that was the one i was whining about ;)
[03:10:52] <cmr> "systems programming for newbies" is something I would actually like to do
[03:11:07] <cmr> someone is pressuring me to write a book about rust too >_> this would be a good one.
[03:12:18] *** Quits: jlong (jlong@moz-6DFDE846.socal.res.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[03:12:36] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[03:12:46] *** Quits: ziad (ziad@B20586FB.BDB3D91.6E370BFC.IP) (Quit: ziad)
[03:13:16] *** jorendorff_away is now known as jorendorff
[03:16:47] <aatch> mcpherrin, eevee, fun fact, Rust was intended to be self-hosting from the start.
[03:17:29] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[03:18:54] *** Joins: trecer (trecer@moz-3A571AF4.dyn.centurytel.net)
[03:19:18] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[03:22:02] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Ping timeout)
[03:22:08] <bjz> jack: could you build Erlang-style supervisors out of Rust's current primitives?
[03:22:10] *** Joins: zmthy (zmthy@moz-C2881CC3.ecs.vuw.ac.nz)
[03:22:49] <jack> bjz: i haven't thought about it much. task::try is the thing we have
[03:23:09] <jack> i think someone should :)
[03:23:31] *** Joins: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net)
[03:25:37] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[03:26:00] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[03:26:22] *** Quits: a_m0d|home (a_m0d@moz-4A42350.acanac.net) (Quit: Leaving.)
[03:26:53] *** jorendorff is now known as jorendorff_away
[03:27:30] *** Quits: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[03:27:53] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[03:28:00] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[03:28:11] *** Quits: jviereck (Adium@moz-B1B15ECC.dip0.t-ipconnect.de) (Quit: Leaving.)
[03:28:25] <jack> kmc: ping
[03:28:32] <aatch> Dammit, now I have to learn ml...
[03:34:38] *** Quits: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net) (Quit: eholk)
[03:37:57] <bjz> jack: are there many resources out there regarding supervision?
[03:38:16] <jack> in Erlang?
[03:38:17] <bjz> jack: is it the otp thing?
[03:38:31] <bjz> aatch: yayy, ml
[03:38:33] <jack> OTP in Action is probably the best thing I know of off the top of my head.
[03:38:43] <bjz> aatch: why?
[03:39:23] <aatch> bjz, project I got my hands on the source code for. Was not expecting it to be in Ocaml though.
[03:39:26] *** Joins: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net)
[03:39:43] <bjz> aatch: oh, ocaml is abit different
[03:40:12] <bjz> aatch: I have done more reading of sml, but it's related, of course
[03:40:27] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[03:40:32] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[03:40:41] <bjz> aatch: https://realworldocaml.org/
[03:40:58] <aatch> Doesn't look too hard to read (given that I know Haskell already), just not as automatic as other languages.
[03:41:16] <bjz> aatch: It's well worth doing abit, and it will also help you understand some of how Rust came to be
[03:42:03] <bjz> plus it took a different route than what Haskell did, which makes it interesting
[03:42:04] <bjz> :)
[03:42:20] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Quit: Leaving.)
[03:42:25] <bjz> what codebase?
[03:42:39] <aatch> bjz, I wish I could say, but I am not allowed.
[03:42:44] <bjz> oh ok
[03:42:48] <bjz> super secret stuff
[03:42:59] * bjz doesn't want to get shot
[03:43:04] <aatch> bjz, not *super* secret, but I did sign an NDA.
[03:43:09] <bjz> ahh
[03:43:29] <aatch> I basically have early-access to this (well my company does)
[03:43:52] <bjz> yeah that real-world ocaml book looks super handy from the little I have skimmed of it (mainly on the first class modules)
[03:43:55] <bjz> oh nice
[03:43:55] <dbaupp> aatch: and you are rewriting it into Rust, right? :P
[03:44:05] <bjz> do you get to actually write Ocaml!
[03:44:10] * bjz is jealous
[03:44:41] *** Joins: HeroesGrave (Mibbit@moz-AC4C75C3.dyn.cust.vf.net.nz)
[03:44:48] <aatch> dbaupp, lol, might be a little more work than I can manage.
[03:45:50] *** Quits: HeroesGrave (Mibbit@moz-AC4C75C3.dyn.cust.vf.net.nz) (Quit: http://www.mibbit.com ajax IRC Client)
[03:46:05] <bjz> aatch: sounds like a nice opportunity anyway
[03:46:16] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[03:46:30] <aatch> bjz, it is.
[03:46:44] <bjz> aatch: are they using jane-street stuff, or just standard?
[03:46:57] <aatch> bjz, no idea what that even means...
[03:47:58] <bjz> jane street is one of the big commercial ocaml shops. they have their own set of libs
[03:48:01] <bjz> http://janestreet.com/
[03:48:03] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[03:48:38] *** Joins: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net)
[03:48:41] <bjz> http://janestreet.github.io/
[03:48:46] <aatch> bjz, it doesn't look like it.
[03:48:54] <bjz> oh ok - was just curious
[03:49:41] <bjz> from the little I know, concurrency is the main difficulty in Ocaml - I think janestreet has done their own libs in that.
[03:50:55] <cmr> ChrisMorgan: so are you going to write this sphinx domain?
[03:51:01] * cmr would *love* to use it.
[03:51:09] <eddyb> hmm?
[03:51:13] <ChrisMorgan> cmr: yes
[03:51:17] <cmr> <<<<<33333
[03:51:24] <cmr> eddyb: https://air.mozilla.org/rust-meetup-december-2013/
[03:51:44] <eddyb> do I have to watch all of it :)?
[03:52:04] <bjz> ChrisMorgan: really good talk btw
[03:52:07] <bjz> :)
[03:52:21] <eddyb> cmr: but I should anyway :)
[03:52:25] * bjz is super excited about sphinx
[03:52:51] <cmr> eddyb: in short: sphinx is awesome and ChrisMorgan is making it happen
[03:52:55] <cmr> (for rust)
[03:52:57] <cmr> :p
[03:52:59] <eddyb> but what is sphinx?
[03:53:02] <bjz> :)
[03:53:07] <ChrisMorgan> eddyb: my talk starts at 34:30
[03:53:13] <eddyb> ChrisMorgan: thanks :P
[03:53:14] <bjz> a big statue in the desert
[03:53:19] <eevee> my cat
[03:53:29] <eddyb> eevee: hahahahha
[03:53:39] <bjz> but it is also a doc gen thingy that allows you to do cool stuff like cross-links
[03:53:51] <ChrisMorgan> eddyb: also just the slides at http://chrismorgan.info/blog/rust-docs-vision-presentation.html
[03:53:55] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[03:54:14] *** Joins: alan_andrade (alan_andra@8AB4864E.75F2E118.B7838CA6.IP)
[03:54:14] <bjz> it knows semantic stuff about your code rather than being really stupid like our current stuff
[03:54:46] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[03:54:57] *** Quits: zz_kimundi (kimundi@moz-D3B44B8E.dip0.t-ipconnect.de) (Ping timeout)
[03:54:58] <bjz> it also works on restructured text which apparently has various benefits over markdown
[03:55:14] <eddyb> this? http://sphinx-doc.org/
[03:55:19] <ChrisMorgan> Yeppity.
[03:55:24] <bjz> ChrisMorgan: did I get it right?
[03:55:29] *** Quits: ricepuddin (graham@moz-7D68765A.cable.virginm.net) (Ping timeout)
[03:55:32] <ChrisMorgan> Yep.
[03:55:39] <eevee> reST does more things at the cost of being nearly unwritable
[03:55:59] *** Quits: alan_andrade (alan_andra@8AB4864E.75F2E118.B7838CA6.IP) (Ping timeout)
[03:56:00] <ChrisMorgan> eevee: what? Normal stuff is perfectly easily writable.
[03:56:28] <aatch> reST doesn't seem any worse than markdown most of the time.
[03:56:47] <eevee> ok ok obviously people manage  :)  but it doesn't really have the same goal of looking like plain text, which is a little unfortunate imo
[03:56:51] *** Quits: Earnestly (earnest@88884C6.A3735F9C.39C00A7A.IP) (Ping timeout)
[03:56:53] <eevee> alas markdown isn't really built to be extended
[03:56:54] <bjz> http://en.wikipedia.org/wiki/ReStructuredText
[03:56:57] <ChrisMorgan> Tables can be a bit difficult to write if you don't have a tool to manage the alignment, but that's about all that I'd say is *hard*
[03:57:04] <bjz> eevee: pluses and minuses
[03:57:37] <bjz> eevee: the question is, given what we want to achieve with Rust, does it make more sense to go with Markdown or reST
[03:57:44] <eevee> certainly reST
[03:58:07] <bjz> eevee: people live with javadoc ok.
[03:58:12] *** Joins: zz_kimundi (kimundi@moz-31F6BD2.dip0.t-ipconnect.de)
[03:58:27] <eevee> unless you want to turn markdown into a documentation language, which i would be all for, but that's some nontrivial effort there
[03:58:29] *** zz_kimundi is now known as kimundi
[03:58:50] <bjz> eevee: the issue is if we want to go creating our own standard
[03:59:03] <cmr> Using sphinx would also punt a hard problem (cross references in doc comments) elsewhere.
[03:59:06] <bjz> eevee: there are already tons of flavours of markdown
[03:59:08] <cmr> which makes me happy :)
[03:59:12] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[03:59:24] <eevee> has sphinx actually been used for not-python before?
[03:59:29] <strcat> eevee: yes
[03:59:29] <ChrisMorgan> dbaupp: what do you think of my accent, BTW?
[03:59:32] <ChrisMorgan> Absolutely!
[03:59:36] <strcat> eevee: it has C and basic C++ support
[03:59:38] <bjz> eevee: I believe so, according to ChrisMorgan 
[03:59:45] <strcat> llvm uses it for their non-API docs
[03:59:52] *** Quits: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net) (Quit: eholk)
[03:59:55] <bjz> that's what the talk of 'domains' was about
[03:59:59] <strcat> and would probably be happy to use it elsewhere
[03:59:59] <eevee> huh, neat
[04:00:17] <strcat> eevee: http://sphinx-doc.org/domains.html
[04:00:18] <bjz> ChrisMorgan: yay aussies
[04:00:33] <ChrisMorgan> What I talk about towards the end of melding autogenerated documentation into rustdoc as it is at present *is* a little unconventional, but I believe the idea is sound.
[04:00:48] *** Joins: spott (spott@moz-82AAF168.hsd1.co.comcast.net)
[04:01:07] <bjz> what about IDE integration?
[04:01:27] <bjz> would sphinx make this easier?
[04:01:39] <bjz> or combining with rustdoc?
[04:02:12] <cmr> Wait, how do you make the connectoin between IDE integration and sphinx?
[04:02:32] <bjz> cmr: well javadoc has super nice integration with ides
[04:02:32] *** Quits: spott (spott@moz-82AAF168.hsd1.co.comcast.net) (Ping timeout)
[04:03:06] <cmr> So you mean like popover API docs?
[04:03:16] <cmr> I had envisioned IDEs to use rustdoc's json for that
[04:03:17] <bjz> cmr: I'm just wondering where sphinx would fit in with this kind of thing in the future
[04:03:32] <bjz> yeah, with clickable links and stuff
[04:03:48] <strcat> bjz: it's easy to make rst backends
[04:04:01] <strcat> you can have it output whatever
[04:04:09] <eddyb> those are generated by the IDE as it parses your project - though they can be pre-rendered, I guess
[04:04:25] <bjz> ok, interesting
[04:04:44] <bjz> strcat: is that another plus for reST?
[04:04:53] <cmr> eddyb: well they also come from included jars
[04:04:58] <eddyb> bjz: kdevelop4 has a HTML doc panel, which are different from popovers - that's where it could work
[04:05:18] <ChrisMorgan> bjz: in Python, you get largely two sets of documentation; the docstrings and the official library documentation (I'm not sure if it uses autogeneration at all, but it certainly doesn't much). The docstrings tend to be brief and are what tools will tend to use.
[04:05:24] *** Quits: canhtak (canhtak@moz-258236CD.wl.t.ulaval.ca) (Quit: canhtak)
[04:05:31] <eddyb> cmr: yeah, but those jars have .java files with the javadoc comments in them
[04:05:54] <bjz> cmr: I guess rustdoc json would be ok for things like vim
[04:07:01] * cmr is also a migrant pythonista
[04:07:07] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[04:07:28] <bjz> must be a pain without static types :(
[04:07:39] <bjz> (doc stuff)
[04:08:15] <ChrisMorgan> bjz: explain?
[04:09:08] <bjz> ChrisMorgan: oh, not in terms of sphinx itself, but for things like popovers. but I'm pretty ignorant about this
[04:09:38] <ChrisMorgan> It's mixed. Some tools can do a surprisingly good job of it.
[04:10:09] <bjz> I guess it depends on the language too
[04:10:18] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[04:10:55] *** Joins: spott (spott@moz-82AAF168.hsd1.co.comcast.net)
[04:11:08] <bjz> C++ has tons of issues with all the template stuff
[04:11:47] * bjz has is reasonable hopes for Rust being 'explorable' via IDEs or editor extensions
[04:12:29] <bjz> that's one of the nice things about Java. (yikes, I said it!)
[04:12:36] *** Quits: spott (spott@moz-82AAF168.hsd1.co.comcast.net) (Ping timeout)
[04:12:45] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[04:13:08] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Input/output error)
[04:13:50] <bjz> jack: http://www.erlang.org/doc/design_principles/sup_princ.html ?
[04:13:57] <tiffany> structural editors and code visualization!
[04:13:58] * ChrisMorgan hated working with JOGL (Java OpenGL bindings), its doc comments were just "this is such-and-such a thing from the C world"
[04:14:09] <bjz> haha
[04:14:31] <bjz> well, that's the fault of the maintainer
[04:14:51] * bjz looks shiftily at himself and his glfw-rs docs
[04:15:05] *** Joins: ktt3ja (ktt3ja@moz-54586A12.washdc.fios.verizon.net)
[04:15:15] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[04:15:18] <jack> bjz: yes, that's the official OTP doc
[04:15:18] <eddyb> bjz: I should add tinkering with kdevelop on my TODO list - I think it has decent support for a bunch of languages via plugins - but I may need some kind of formal syntax description
[04:15:50] <bjz> ChrisMorgan: more talking about the idea of 'dot-driven-development'. One thing that makes OO nice for big projects.
[04:16:06] <ChrisMorgan> Eek, what a scary-sounding name
[04:16:13] *** Quits: ktt3ja (ktt3ja@moz-54586A12.washdc.fios.verizon.net) (Quit: Leaving)
[04:16:13] <bjz> ChrisMorgan: hehe
[04:16:21] <bjz> yeah, abit silly
[04:16:31] <eddyb> also ::
[04:16:36] *** Joins: ktt3ja (ktt3ja@moz-54586A12.washdc.fios.verizon.net)
[04:16:46] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[04:16:47] <bjz> yep, exactly why I have hopes for Rust
[04:17:04] <eddyb> it does help that Rust isn't as ambiguous as C++
[04:17:12] <bjz> but you know, when you want to find functionality and you just type `.`, and it pops up with a list of stuff
[04:17:20] <bjz> eddyb: yes.
[04:17:22] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[04:18:01] <bjz> bjz: it's more when you're working with unfamiliar stuff that it is useful
[04:18:04] *** Joins: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net)
[04:18:12] * bjz talks to himself
[04:18:13] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[04:19:36] <bjz> jack: supervision used to be built in to tasks right?
[04:19:40] * aatch imagines a development process centered around the usage of graphviz
[04:19:52] <bjz> aatch: indeed
[04:19:58] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[04:20:19] <bjz> jack: but maybe we could build it ourselves right? might not be as efficient though, but could be useful
[04:20:21] <jack> bjz: tasks has linked failure yes. similar to what in erlang is called a link
[04:20:24] <aatch> goddamn Ocaml code is impenetrable when it comes to types.
[04:20:25] * ChrisMorgan is intending at some point to make lots of massive graphs of usage, references, &c. &c. in Rust
[04:20:29] <eddyb> bjz: I once tried to make a C++ reformater contraption thing - and the biggest problem in parsing was the ambiguous stuff - one trick I was able to use, I think, was skipping code and just looking at definitions (well, in that case I was only caring about leading space on each line)
[04:20:38] <jack> spawn() in rust used to be like spawn_link in erlang.
[04:20:45] <bjz> jack: I still need to familiarise myself
[04:20:46] <eddyb> hmm, I think JS is where you can't just skip code
[04:20:47] <bjz> yeah
[04:21:05] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[04:21:08] <bjz> jack: that's one thing I'm having trouble with when porting Erlang API stuff
[04:21:12] * ChrisMorgan liked making that 15m*30cm class inheritance graph for the product of a company he was working for, just to demonstrate to the people that were asking: "this is why what you're asking for is silly"
[04:21:52] <eddyb> because regexp parsing is context-sensitive and / can be the start of /* or //
[04:21:55] <bjz> eddyb: yeah, C++ is a pain. clang has done tons of good work in that area, but it will always be tricky
[04:22:09] <jack> bjz: gen_servers can be started in a supervision chain or no
[04:22:16] <eddyb> and clang is not available to, let's say, something in the browser
[04:22:18] <jack> they have start and start_link
[04:22:19] <eddyb> RIP wIDE
[04:22:23] <bjz> eddyb: regexp really doesn't cut it with C++, you need semantic info too
[04:22:27] <jack> start is unsupervised
[04:22:31] <bjz> ick
[04:22:40] <bjz> jack: ok
[04:22:57] <bjz> aatch: they have their own idioms
[04:23:03] <eddyb> bjz: but I think you can track { and } and cheap out a little
[04:23:12] <bjz> aatch: are they using first class modules much?
[04:23:21] <bjz> aatch: that can be a little confusing
[04:23:27] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[04:23:35] <aatch> bjz, I think so, It's partially that it's a big codebase.
[04:23:47] <eddyb> in Rust, you can skip a lot of stuff when looking for doc info (or so I hope)
[04:23:50] <bjz> aatch: also remember that you often have a `t` per module, by convention
[04:24:22] <bjz> eddyb: one tricky thing is dealing with macro expansion
[04:24:27] <eddyb> you only need to parse local declarations and attempt inference in the current function
[04:24:30] <aatch> mostly it's just that when some function takes a <enum equivalent> and throws it straight into a match
[04:24:52] <aatch> and I have no idea were to find the definition because no types!
[04:25:12] <eddyb> bjz: thankfully they're hygienic and they can't expand to non-balanced tokens
[04:25:33] <bjz> aatch: yeah, that's sometimes tricky :(
[04:25:33] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[04:26:09] <bjz> aatch: that's why requiring types on function signatures is really useful
[04:26:14] <eddyb> bjz: so you'll be missing some things if you skip macros, but parsing everything else won't be affected
[04:26:23] <bjz> eddyb: yeah
[04:26:50] <aatch> bjz, yep. I've almost found what I was looking for though, which is nice.
[04:27:14] <bjz> aatch: did you have a skim of that orielly book?
[04:27:19] <eddyb> bjz: if I ever try to add support for Rust in an IDE - kdevelop or wIDE?
[04:27:23] <bjz> aatch: might be very useful
[04:27:41] <bjz> eddyb: rusdoc could do much of the heavy lifting
[04:28:09] <bjz> eddyb: once we get incremental compilation, I think (don't know too much about it)
[04:28:10] <aatch> bjz, not much, just for the completely inpenetrable stuff, like labeled parameters + label punning
[04:29:05] <eddyb> rustdoc only works for crates outside of the one you're working on
[04:29:10] <bjz> aatch: do they use functors? (need to get my head around them)
[04:29:26] <bjz> eddyb: hence the incremental compilation
[04:29:41] <aatch> bjz, dunno
[04:29:49] <bjz> eddyb: we need red squigglies and such
[04:29:54] <bjz> aatch: https://realworldocaml.org/v1/en/html/index.html
[04:29:57] <bjz> oops
[04:30:02] <bjz> https://realworldocaml.org/v1/en/html/functors.html
[04:30:10] <bjz> https://realworldocaml.org/v1/en/html/first-class-modules.html
[04:30:23] <bjz> maybe you might notice syntax like that - dunno
[04:30:29] <eddyb> bjz: incremental compilation is not worth the trouble
[04:31:03] <aatch> bjz, haven't seen it.
[04:31:04] <bjz> cmr: what is your opinion?
[04:31:19] <kemurphy> hey, what's the plan (or lack thereof) for user-defined attributes? any progress or proposal on that front?
[04:31:29] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Ping timeout)
[04:31:31] <bjz> kemurphy: they are planned
[04:31:35] *** Joins: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net)
[04:31:40] <bjz> kemurphy: dunno any specifics though
[04:31:47] <eddyb> you can't just use a normal parser anyway in an IDE, you have to "understand" partial expression/statements for completion and that dot / :: stuff
[04:32:16] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[04:32:29] <kemurphy> bjz: right, that's about as far as i thought it was
[04:32:32] <dbaupp> kemurphy: in what sense? "attributes that the user can load an extension into the compiler to handle"?
[04:32:45] <bjz> eddyb: doesn't clang assist with that?
[04:32:48] <bjz> eddyb: 
[04:32:57] <bjz> eddyb: I thought they used it for xcode
[04:33:07] <dbaupp> (because you can already put arbitrary attributes on things, and write external tools to handle them... that's almost way rustdoc does for doc comments.)
[04:33:13] <cmr> bjz: my thoughts on what?
[04:33:28] <eddyb> if libsyntax could provide support for that, it might get reused, with a C++-via-C wrapper, for kdevelop - but it already sounds nasty
[04:33:33] <dbaupp> s/way/what/
[04:33:37] <bjz> cmr: rust helping with intellisense
[04:33:59] <kemurphy> dbaupp: yeah i mean a compiler extension
[04:34:03] <eddyb> bjz: sure, but clang does more than libsyntax + librustc
[04:34:05] <cmr> it's a long road to get there.
[04:34:17] <bjz> cmr: for sure
[04:34:23] <bjz> cmr: defs post 1.0
[04:34:57] <kemurphy> dbaupp: or otherwise some way to probe my own attributes at runtime or compile-time and have it affect behavior or codegen, respectively
[04:35:37] <cmr> I think we *can* get there, but it will be hard, and involve much wailing and gnashing of teeth.
[04:36:11] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[04:36:32] <bjz> cmr: indeed :D
[04:36:37] <bjz> cmr: http://clang.llvm.org/docs/Tooling.html
[04:37:05] <bjz> cmr: at least hopefully it would be easier than what the poor clang guys have to deal with
[04:37:34] <bjz> cmr: xcode complete is so slow - dunno if that's the limitations of C++ speaking
[04:38:01] <cmr> bjz: I use youcompleteme in vim which is driven by libclang and it's pretty snappy.
[04:38:04] <bjz> might just be xcode though
[04:38:08] <bjz> heh
[04:38:10] <bjz> :)
[04:38:37] <kemurphy> as a compiler module, would the attr handler operate on a string of code? AST? IR? Multiple hooks/options?
[04:38:48] <kemurphy> (what sound's preferable?)
[04:39:12] <ChrisMorgan> Hmm. Can I embed just a restricted time range of https://air.mozilla.org/rust-meetup-december-2013/video/? Can't see any obvious way :-(
[04:39:31] <ChrisMorgan> Nor of changing the size to match the container :-(
[04:39:33] <kemurphy> i have a couple weeks off work, might give it a stab if there's interest and a decision on direction
[04:39:35] <cmr> kemurphy: we can already kinda handle it, via cfg!
[04:39:40] <cmr> if cfg!(foo) { .. }
[04:39:50] <bjz> ChrisMorgan: wish they used youtube or something
[04:39:53] <kemurphy> cmr: oh, wow! :D
[04:39:57] <bjz> ChrisMorgan: or at least mirrored them
[04:40:03] <ChrisMorgan> bjz: they use vid.ly
[04:40:42] <kemurphy> cmr: that must be relatively new.  if i set #[cfg(foo=bar)], will cfg!(foo) == bar?
[04:41:02] <eddyb> it would be "bar", if it would work
[04:41:17] <kemurphy> right
[04:41:18] *** Joins: kvanb (kvanb@moz-F4E1EC66.vic.bigpond.net.au)
[04:41:20] <eddyb> but it's bool right now
[04:41:24] <cmr> kemurphy: good question! if not that'd probalby be a nice extension to it.
[04:41:24] <kemurphy> i see
[04:41:39] <eddyb> cmr: I wanted a few times :D
[04:41:42] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[04:41:42] *** ChanServ sets mode: +ao pcwalton pcwalton
[04:41:52] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[04:42:01] <eddyb> *wanted that
[04:42:05] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[04:42:09] <kvanb> bjz: Hi
[04:42:12] <kvanb> Are you at RMIT?
[04:42:18] <bjz> kvanb: yep!
[04:42:25] <kvanb> Oooh that's cool
[04:42:26] <bjz> kvanb: how did you know?
[04:42:30] <kvanb> Read your blog
[04:42:35] <bjz> nice!
[04:42:43] <kvanb> got excited to find a rust dev in australia :P
[04:42:45] <bjz> kvanb: how about you?
[04:42:48] <kvanb> I'm at swinburne
[04:42:56] <kemurphy> presumably we'd just treat cfg(foo) as an implicit cfg(foo=true) (the boolean value, not the string)?
[04:42:59] <bjz> kvanb: you should come along to MFUG tonight!
[04:43:17] <kvanb> I'd have no idea what that is lol
[04:43:34] <bjz> kvanb: I'll PM
[04:43:36] <cmr> kemurphy: well, we already do do that
[04:43:57] <eddyb> kemurphy: I think cfg(foo) means "is foo present"
[04:44:10] <cmr> kemurphy: see MetaItem_ in syntax::ast
[04:44:12] <ChrisMorgan> kvanb: I just finished off my degree at Monash
[04:44:20] <eddyb> no matter what value it has
[04:44:33] <ChrisMorgan> kvanb: and dbaupp is in Sydney.
[04:45:28] <eddyb> cmr, kemurphy: maybe add cfg_value! that produces a Some(&'static str)
[04:45:48] <kemurphy> cmr: i see. i'll poke around and maybe get a PR together in the next couple days
[04:45:58] <eddyb> err, Option<&'static str>, with Some("...") if it's present, None otherwise
[04:46:01] *** Joins: sankha93 (Instantbir@F4EE2D1C.BBE513BA.EFB84E89.IP)
[04:46:05] <bjz> yay australia!
[04:46:14] <kvanb> yay aus
[04:46:15] <kvanb> haha
[04:46:18] <kemurphy> eddyb: that could be good. why not just have that be cfg! though?
[04:46:22] <kvanb> I know the haskell people in sydney
[04:46:22] <eddyb> since you can't use "" for non-present cfgs
[04:46:28] *** Quits: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com) (Input/output error)
[04:46:29] <kemurphy> eddyb: then the presence check is is_some()
[04:46:47] <cmr> kemurphy: it needs to return true/false
[04:46:48] <bjz> kvanb: come over to #rust-offtopic
[04:46:53] <eddyb> kemurphy: hmm. okay, that would work - but you'll need to jump through hoops to update std/syntax/rustc
[04:47:07] * ChrisMorgan prefers cfg! being bool
[04:47:08] <cmr> kemurphy: otherwise some stuff like disabling debug logging won't be efficient.
[04:47:10] <eevee> #[cfg(foo=bar)] sounds like a use case for ruby symbols
[04:47:16] <kemurphy> cmr, eddyb: we're not at 1.0 yet, changing it should be fine ;)
[04:47:31] <ChrisMorgan> cmr: surely the compiler is intelligent enough to know that Some("").is_some() is just true.
[04:47:39] <eevee> but i don't think there are any others since that would usually be an enum
[04:47:42] <eddyb> LLVM will, though
[04:47:47] <cmr> ChrisMorgan: the true/false thing is AST-based!
[04:47:51] <eddyb> and it's just a nullable pointer
[04:47:54] <eddyb> cmr: ahahaha
[04:48:02] <eddyb> I see what you mean now >_>
[04:48:25] <kemurphy> cmr: uh, yeah right that's a thing. hm.
[04:48:25] *** Joins: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com)
[04:48:45] <cmr> I'm fine if it just returns bool if it's MetaWord or a string otherwise..
[04:49:03] <eddyb> that's hard to use, though
[04:49:18] <kemurphy> cmr: yeah i'd be fine with that too
[04:49:23] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[04:49:40] <cmr> but cfg_value is probably a better idea
[04:49:54] <kemurphy> eddyb: really? i mean, there's nothing that says the return type of a macro always needs to be the same for every invocation yeah?
[04:50:04] <eddyb> kemurphy: it makes some things harder/impossible
[04:50:12] <kemurphy> cmr: probably more idiomatic
[04:50:13] <dbaupp> cmr: it's not any more
[04:50:19] <Eridius> kemurphy: use confusion says the return type of the macro should be predictable
[04:50:32] <dbaupp> cmr: it calls into LLVM to evaluate the condition
[04:50:37] *** Joins: z0w0 (zack@moz-7B305DFB.lnse1.woo.bigpond.net.au)
[04:50:45] <kemurphy> Eridius: sure, principle of least surprise and whatnot. that's fair.
[04:50:47] <eddyb> dbaupp: is that... the first occurence of CTFE :D?
[04:51:01] <cmr> dbaupp: ohh that's nice
[04:51:09] <cmr> I must have missed that one
[04:51:09] <eddyb> with cfg and cfg_value, you can still have cfg!(foo=bar), btw
[04:51:11] <kemurphy> omg if CTFE were to happen soonish i'd be thrilled
[04:51:15] <dbaupp> eddyb: well, if you mean "LLVM's constant folding" (or whatever it does), yes
[04:51:32] <dbaupp> eddyb: but, no, not in the true sense of CTFE
[04:51:34] <cmr> we run it before opts though don't we?
[04:51:42] <dbaupp> yes
[04:51:57] <dbaupp> it's purely to avoid transing completely useless branches
[04:52:07] <Eridius> huh, Go is going to rewrite their compiler in Go
[04:52:21] <kemurphy> yeah i'm surprised they're not already self-hosting
[04:52:21] <eddyb> dbaupp: I think you can just put a function invocation in a static and LLVM will do CTFE, if possible
[04:52:35] <Eridius> even more interestingly, they're going to do this by writing a translator program
[04:52:50] <dbaupp> eddyb: yeah, well, that's like saying "inlining is CTFE" :P
[04:53:00] <cmr> Eridius: from plan9 C to Go?
[04:53:02] <eddyb> dbaupp: but it is! :)
[04:53:03] <eevee> it would be hilarious if someone wrote a c-to-go transpiler in rust before they did
[04:53:15] <eddyb> eevee: not worth the time
[04:53:36] <eddyb> though I did think of C-to-Rust
[04:53:45] <dbaupp> eddyb: but not in the conventional sense of CTFE (nor in a sense that is particularly useful  from a language perspective.)
[04:53:48] <cmr> C-to-Rust
[04:53:49] <Eridius> cmr: from C to Go, yes. I don't know what you mean by "plan9 C". It's standard C
[04:53:54] <cmr> unsafe { call_c_fn(); }
[04:54:02] <Eridius> cmr: clearly they should rewrite their compiler in Rust
[04:54:12] <cmr> Eridius: wait how long has it been standard c? I thought it was plan9 C!
[04:54:12] <dbaupp> C to Rust would be easy -> just s/T*/*mut T/ :P
[04:54:14] <eddyb> cmr: highly useful to do on automatically decompiled code
[04:54:19] <Eridius> cmr: what is "plan9 C"?
[04:54:28] <eddyb> dbaupp: yes, like that, but then try to remove all unsafety :D
[04:54:30] <Eridius> cmr: it has to be standard C because it compiles on non-plan9 platforms!
[04:54:38] <cmr> Eridius: plan9 had its own cc with language extensions. they bootstrap the plan9 compiler iirc.
[04:54:40] <eddyb> so transpiler + sanitizer
[04:54:56] <Eridius> cmr: oh hm. I completely forgot they have a bootstrapping phase. It's been a while
[04:55:10] <dbaupp> eddyb: surely you're getting into halting problem territory there :P
[04:55:19] <ChrisMorgan> dbaupp: C to Rust would also need all functions to be marked unsafe
[04:55:23] <Eridius> cmr: anyway, from whatever subset of C is used in the compiler
[04:55:25] <eddyb> dbaupp: I eat NP for breakfast
[04:55:39] <dbaupp> eddyb: halting problem is far outside of NP :P
[04:55:47] <cmr> Halting problem is comptability, not complexity
[04:55:54] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[04:56:12] <eddyb> dbaupp: that actually makes me sad, because I have a big C++ contraption which was supposed to do something impossible - it turns out it's really hard
[04:56:16] * o11c would like to see a guided C to Rust converter, but expects hates the preprocessor
[04:56:48] <cmr> eddyb: you don't say :P
[04:56:55] <dbaupp> eddyb: IME, doing impossible things is quite hard :P
[04:57:26] <ChrisMorgan> Not in Rust.
[04:57:30] *** Joins: spott (spott@moz-82AAF168.hsd1.co.comcast.net)
[04:57:50] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[04:58:12] <eddyb> btw, I realized last night that I don't need language support for my argument-dependent failure predictor - it can be just a LLVM transform
[04:58:26] <eddyb> though I'm not sure how to handle side-effects
[04:59:12] <eddyb> but even the dumbest implementation will say that Some("foo").unwrap() won't fail, while an_option.unwrap() *might* fail
[05:00:06] <kemurphy> cmr: it occurs to me that cfg! will not quite work for the use case i'm envisioning
[05:00:19] <eddyb> LLVM will require a SMT solver at some point in the future - by that point having another solver in the compiler will be redundant
[05:00:47] <cmr> eddyb: http://llvm.org/devmtg/2013-11/#talk5
[05:00:52] <eddyb> hmm, can LLVM do string operations at compile-time?
[05:01:10] <strcat> eddyb: what do you mean by string ops?
[05:01:13] <ion> eddyb: Interesting. What will it use the SMT solver for?
[05:01:34] <ion> Ah, /me sees cmr’s link
[05:01:50] <eddyb> ion: I have very simple testcases which aren't optimized
[05:02:10] <eddyb> (x % 4 == 3) ? (x + 1) % 4 : 0
[05:02:22] <dbaupp> eddyb: Does GCC optimise that?
[05:02:32] <eddyb> dbaupp: come to think of it, I didn't check. give me a sec
[05:02:48] <ion> Would a SMT or SAT solver be useful in type inference?
[05:03:11] <strcat> type inference when you don't have to deal with subtyping is a solved problem
[05:03:14] <kemurphy> what i have in mind is like impl Driver for Subsystem { #[chips=(rev1,rev2)] fn probe(self) {...} #[chips=(rev3)] fn probe(self) {...} }
[05:03:25] <strcat> rust has a bit of subtyping (lifetimes) but it's not a big deal for that to be imperfect
[05:04:21] <eddyb> dbaupp: nope -         andl    $3, %edx
[05:04:38] <eddyb> dbaupp: they generate pretty much identical code
[05:05:06] <eddyb> as if they were optimizing (x % 4 == 3) ? black_box() : 0
[05:05:36] *** Quits: synackse (synackse__@moz-DFB8ED3B.lightspeed.wepbfl.sbcglobal.net) (Quit: Leaving)
[05:05:39] <eddyb> it's worse when the modulo isn't cheap
[05:06:09] <dbaupp> eddyb: optimisations are hard :P
[05:06:29] <eddyb> dbaupp: context: I have a function which cycles every 4 calls to itself, and I call it 4 times in a loop, after aligning the counter to a multiple of 4
[05:06:33] *** Joins: toshok (toshok@moz-43741342.cat)
[05:06:59] <eddyb> dbaupp: right now I have to hoist that safe logic out
[05:07:40] <eddyb> cmr: that talk is about proving optimizations, though
[05:08:08] <eddyb> I'm talking about adding a whole new class of optimizations
[05:09:10] *** Joins: lenstr (lenstr@6737B9B0.9636F313.7A27613B.IP)
[05:09:22] *** Joins: jvns (bork@moz-DE62990.nyc.res.rr.com)
[05:09:48] <eddyb> strcat: about strings - something like let x: int = from_str("5"); - can LLVM optimize that now? does it need special type info about strings to do it?
[05:11:02] <eddyb> this problem is similar - but it's just boolean implication, much easier to do than crazy modulo magic https://github.com/mozilla/rust/issues/8106#issuecomment-30406678
[05:11:55] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[05:12:49] <strcat> eddyb: very unlikely it will be able to constant fold the algorithm for converting strings to numbers
[05:12:58] <strcat> eddyb: it doesn't know *anything* about rust types - just the layout we ask for
[05:13:12] <eddyb> strcat: but does it know about constant memory?
[05:13:15] <strcat> sure
[05:13:30] <eddyb> "foo"[0] - can that be constant folded?
[05:13:33] <strcat> yes
[05:13:40] <strcat> trivially
[05:13:53] <bjz> <3 <3 llvm
[05:14:02] <eddyb> because constant-folding an (otherwise pure) string algorithm doesn't seem much harder than that
[05:14:04] <strcat> eddyb: when you start having loops with branches, most aren't going to be able to be constant folded
[05:14:08] <strcat> the conditions have to be super simple
[05:14:16] <strcat> eddyb: it doesn't know what it does
[05:14:26] <strcat> it doesn't have a high-level view of what any rust does
[05:14:34] <eddyb> not high level
[05:14:41] <strcat> it doesn't know that that's a string
[05:14:43] <eddyb> just evaluating a loop
[05:14:45] <strcat> it's memory, pointer offsets, etc.
[05:14:52] <strcat> eddyb: it doesn't do speculative code evaluation
[05:15:03] <cmr> eddyb: just because it *can* be done doesn't mean it will; LLVM picks its battles very carefully.
[05:15:15] <eddyb> strcat: but it's a bounded loop
[05:15:48] <eddyb> does it know the length of the defined constant memory space used by the string?
[05:17:09] <strcat> yes
[05:17:12] <eddyb> oh, but I've heard it doesn't do range analysis, that would be useless then
[05:17:25] <strcat> it has plenty of ways of proving loops aren't infinite, or figuring out how many iterations they have
[05:17:32] <strcat> it's not anywhere near as powerful as you'd think
[05:17:42] <strcat> compiler optimizations need to be very careful about the time they consume
[05:17:52] <eddyb> riiiight
[05:18:59] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[05:19:21] <eddyb> but a static value needs to be a known value, maybe it could be forced to do CTFE, giving up at the sight of compile-time-UB (like any non-static memory access, calling random C functions, etc)?
[05:19:23] *** Joins: beifeng (Mibbit@284C36E7.3062CEC3.670EEFD.IP)
[05:19:28] *** Quits: trecer (trecer@moz-3A571AF4.dyn.centurytel.net) (Ping timeout)
[05:20:02] *** Quits: dangets (dangets@moz-E9E4A77B.cpe.cableone.net) (Quit: AndroidIrc Disconnecting)
[05:20:18] <strcat> eddyb: it doesn't do speculative evaluation at all
[05:20:29] <strcat> if you want CTFE, that's the frontend's job
[05:20:47] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[05:20:54] <strcat> the compiler isn't going to do something that would slow down compile-time a ridiculous amount
[05:20:57] *** Quits: spott (spott@moz-82AAF168.hsd1.co.comcast.net) (Client exited)
[05:21:04] *** Joins: trecer (trecer@moz-3A571AF4.dyn.centurytel.net)
[05:21:11] <strcat> or something that won't pan out in many cases and will waste a lot of time
[05:21:17] <eddyb> strcat: not speculative, but on-demand
[05:21:20] *** Joins: spott (spott@moz-82AAF168.hsd1.co.comcast.net)
[05:21:45] <strcat> on-demand == the frontend evaluating code
[05:21:54] *** Quits: Jesin (Jesin@moz-AADC888D.eecs.lehigh.edu) (Quit: Leaving)
[05:21:58] <ezyang> rusti: [0,1,2].slice(0,1) 
[05:22:01] -rusti- pastebinned 17 lines of output: http://ix.io/9rY
[05:22:05] *** Quits: jvns (bork@moz-DE62990.nyc.res.rr.com) (Ping timeout)
[05:22:12] <strcat> it can do that through LLVM but LLVM isn't going to do it for the frontend
[05:22:24] <ezyang> Hm. 
[05:22:26] <eddyb> strcat: ah, sure, that makes sense
[05:22:32] <ezyang> rusti: [0,1,2].slice(0,1).to_owned() 
[05:22:34] -rusti- pastebinned 13 lines of output: http://ix.io/9rZ
[05:22:42] <strcat> eddyb: we evaluate const exprs for statics with LLVM
[05:22:49] <eddyb> strcat: I just don't want something silly like C++11 constexprs
[05:22:53] <strcat> but that's the constant stack
[05:22:58] <strcat> eddyb: why is that silly?
[05:23:01] <ezyang> rusti: printf("{:?}", [0,1,2].slice(0,1)) 
[05:23:03] -rusti- pastebinned 7 lines of output: http://ix.io/9s0
[05:23:03] *** Quits: spott (spott@moz-82AAF168.hsd1.co.comcast.net) (Ping timeout)
[05:23:12] <eddyb> strcat: it's almost a turing tarpit
[05:23:12] <strcat> they're quite a lot less restricted in C++14 (which is fully implemented by clang)
[05:23:17] <ezyang> rusti: printf!("{:?}", [0,1,2].slice(0,1)) 
[05:23:19] -rusti- pastebinned 6 lines of output: http://ix.io/9s1
[05:23:27] <eddyb> strcat: that's why I said C++11 and not C++ :P
[05:23:38] <cmr> eddyb: i'ts print! and println!
[05:23:47] <eddyb> heh
[05:23:51] <cmr> guh
[05:23:55] <cmr> ezyang: ^
[05:24:06] *** Parts: nil (nil@moz-5D50FF84.hsd1.fl.comcast.net) ()
[05:24:06] *** Quits: toshok (toshok@moz-43741342.cat) (Client exited)
[05:24:08] *** Joins: toshok (toshok@moz-43741342.cat)
[05:24:09] <ezyang> bah, all I wanted to know is if slice is inclusive or exclusive 
[05:24:17] <eddyb> exclusive
[05:24:22] <dbaupp> ezyang: [low, high)
[05:24:23] <ezyang> k 
[05:24:24] <eddyb> [0;1)
[05:24:37] <ChrisMorgan> Half-open.
[05:25:00] <cmr> I prefer to call it "left-preferential"
[05:25:32] <eddyb> strcat: so if rustc::const would allow function calls in statics, could they be evaluated by LLVM?
[05:26:09] <strcat> eddyb: not with the const evaluation stack.... you can evaluate anything you want with LLVM though via the interpreter or JIT
[05:26:18] <eddyb> cmr: now I'm curious if Rust has a built-in operation similar to JS' Array#splice
[05:27:02] <eddyb> strcat: can the interpreter be made to bail early on undefined operations?
[05:27:19] <eddyb> s/early/out
[05:27:19] <strcat> eddyb: no, UB doesn't work that way
[05:27:41] <eddyb> strcat: "undefined" in terms of compile-time constant - like calling malloc
[05:28:03] <strcat> eddyb: you can do whatever you want in the frontend
[05:28:15] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[05:28:19] <strcat> LLVM is *not* going to offer you any tools to do these beyond being a compiler able to evaluate IR you give it
[05:28:39] <eddyb> I just don't want two thousand lines of code in Rust to do something LLVM is already very good at :P
[05:29:15] <eddyb> (if it can be helped, that is)
[05:30:14] *** Joins: spott (spott@moz-82AAF168.hsd1.co.comcast.net)
[05:32:36] *** Quits: lenstr (lenstr@6737B9B0.9636F313.7A27613B.IP) (Client exited)
[05:33:55] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[05:35:14] *** Joins: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com)
[05:41:13] *** Joins: spott_ (spott@moz-82AAF168.hsd1.co.comcast.net)
[05:41:14] *** Quits: spott (spott@moz-82AAF168.hsd1.co.comcast.net) (Connection reset by peer)
[05:50:19] *** Joins: KindOne (KindOne@moz-AD778EEF.dynamic.ip.windstream.net)
[05:52:21] *** Joins: pyon (user@D883E380.480D3EC1.1C8C8CE9.IP)
[05:54:46] *** Quits: trecer (trecer@moz-3A571AF4.dyn.centurytel.net) (Input/output error)
[05:59:57] <ezyang> Hm, policy for Rust errors/warnings is to not assume coloring is available, is that correct? 
[06:00:11] <cmr> ezyang: what do you mean?
[06:00:39] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[06:00:55] <ezyang> So, I modified the highlight_lines to print out the beginning and the end of long code segments 
[06:01:13] <ezyang> but then I realized it would be even better if I just printed the whole span, and then colored the regions I cared about 
[06:01:37] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[06:01:49] <cmr> color can't be the only indicator, yes.
[06:02:32] * ezyang scratches head 
[06:02:40] <ezyang> maybe I should feature test if color is available, and do something less pretty when it's not 
[06:03:58] <cmr> extra::term::Terminal::supports_attr should help there.
[06:05:18] <killerswan> this is sorta fun: https://github.com/mozilla/rust/issues/11063
[06:05:38] <killerswan> "can't find crate for `std`"
[06:05:40] *** Joins: paulproteus (quassel@458FE134.3EC36C88.CBDCF1DC.IP)
[06:05:44] <killerswan> oh my :)
[06:05:50] <dbaupp> killerswan: oh, that one is horrible :(
[06:05:51] <cmr> killerswan: the program needs to be in the same directory as librustc
[06:06:17] <cmr> I spent like, two days trying to figure this out when I started rustdoc
[06:06:19] <cmr> it's miserable
[06:06:24] <eddyb> haha, master/slave in the talk
[06:07:19] <killerswan> cmr: >_>
[06:07:43] *** Joins: jlong (jlong@moz-6DFDE846.socal.res.rr.com)
[06:07:56] <killerswan> can I just chdir over there?
[06:07:58] *** Joins: recrack (Mibbit@B4104EBB.3CC170B1.1E14B209.IP)
[06:08:48] <cmr> not sure, worth trying
[06:08:51] *** Joins: arrrrrrrrr (arrrrrrrrr@moz-90AD0D2A.dynamic.qsc.de)
[06:09:46] <cmr> I don't think it has to do with the cwd though
[06:09:49] <carter> ezyang: don't mind me
[06:10:24] *** Joins: erickt2 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[06:10:25] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Connection reset by peer)
[06:10:33] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[06:12:00] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[06:12:35] <eddyb> ChrisMorgan: OMG. your voice is so awesome
[06:12:52] * ChrisMorgan wonders precisely what is meant by that
[06:13:19] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[06:14:00] <ChrisMorgan> eddyb: the tone, annunciation, accent, audio artefacts introduced by Skype or by recording, something else?
[06:14:14] <eddyb> tone and accent, I would say
[06:14:49] * ChrisMorgan was hoping it wouldn't be the artefacts :P
[06:15:10] <eddyb> ChrisMorgan: you could narrate a tutorial :D
[06:15:27] <ChrisMorgan> I think that's probably the first time my voice and picture have been seen on the public Internet.
[06:15:43] <cmr> Congratulations, you will never have your anonymity back.
[06:15:57] <cmr> hell, you don't even use a pseudonym :P
[06:16:01] *** Quits: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net) (Quit: Taking a nap.)
[06:16:34] <ChrisMorgan> No, I've never seen the point in the use of a pseudonym.
[06:16:52] <cmr> length, is one.
[06:16:55] <eddyb> cmr: my nick is like a google search away from my real name
[06:17:07] <cmr> eddyb: more like a /whois away
[06:17:27] <cmr> oh, looks like it changed?
[06:17:55] *** Quits: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) (Connection reset by peer)
[06:17:58] <eddyb> because Github (I think) + pedigree (where I had to put my names in source files' headers)
[06:19:39] <eddyb> s/names/real name
[06:19:44] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[06:21:35] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[06:24:43] *** Joins: zeittunnel (benjamin@moz-36A24513.dip0.t-ipconnect.de)
[06:25:12] <ezyang> This is exceedingly odd 
[06:25:51] <ezyang> why do Rust error messages give you "/home/ezyang/Dev/rust-sandbox/test.rs:13:12: 13:19 error: "; i.e. why are there two line numbers 
[06:25:59] <ezyang> ...oh, I see, it's the range 
[06:26:01] <dbaupp> start and end of the span
[06:26:02] <aatch> ezyang, start and end
[06:26:14] <o11c> same reason there's ^~~~~~ not just ^
[06:26:36] <ezyang> I would tweak it to do something clever like 13:14-17, but maybe that will break some tooling 
[06:27:35] <o11c> I would expect even that what it *does* to break tooling that looks for file:line(:col)?: (error|warning|note):
[06:27:38] <carter> otoh, better to break tooling now than later right?
[06:27:41] <dbaupp> it needs to be changed anyway, https://github.com/mozilla/rust/issues/10848 https://github.com/mozilla/rust/issues/3533
[06:28:15] <ezyang> OK, maybe I will just fix that on the way to nirvana 
[06:28:27] <ezyang> yak, meat shave 
[06:28:35] <ezyang> s/meat/meet/ 
[06:28:55] <cmr> yak meat shaving sounds frightening.
[06:28:57] <kvanb> could meat the yak, yes.
[06:29:06] <Jesse> yeah let's stick to just shaving the hair plz
[06:29:13] <carter> bbq for all?
[06:29:23] <kvanb> oh look carter is here too
[06:29:34] <carter> kvanb: vs where/
[06:29:40] <kvanb> #ghc :P
[06:29:42] <carter> where you on #ghc recently?
[06:30:00] <kvanb> well, no, but you (might) know who I am based on my initials
[06:30:01] <mcpherrin> eevee: I like your proposal to use ★ as comment character.  You're invited to name things in my non-ascii fork of rust
[06:30:27] <carter> let me go gogle Kyle Van Berendonck
[06:30:38] <carter> ohh
[06:30:40] <carter> ghoul?
[06:30:44] <ezyang> it would be yak-iniku :) 
[06:30:50] <kvanb> does that really come up?
[06:30:52] <kvanb> and yeah
[06:31:04] <eevee> i still like perl 6's (long since abandoned) ¥ zipping operator
[06:31:14] <carter> "/whois handle" -> name, google name -> saw ddc, -> thought "oh, ghoul"
[06:31:25] <carter> kvanb: see?
[06:31:29] <kvanb> lol
[06:32:17] <kvanb> llvm takes centuries to compile mhm. Still not onto rust yet
[06:33:10] <ezyang> https://github.com/mozilla/rust/issues/10848 <-- is this as simple as just adding +1 to the col? 
[06:33:52] <dbaupp> ezyang: should be
[06:34:28] *** jdm|f00ding is now known as jdm
[06:39:30] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Ping timeout)
[06:40:58] *** Joins: lpy (lpy@9EA5DA85.F09091A8.1348A864.IP)
[06:43:42] *** Joins: maxiepoo (Max@68A63377.C44F889.D279C981.IP)
[06:47:57] *** Quits: erickt2 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[06:49:11] *** Quits: bvssvni (Mibbit@moz-CBD76C21.bb.online.no) (Quit: http://www.mibbit.com ajax IRC Client)
[06:49:57] *** Joins: bvssvni (Mibbit@moz-CBD76C21.bb.online.no)
[06:50:08] <arrrrrrrrr> >python docs
[06:50:10] <arrrrrrrrr> >good
[06:50:12] <arrrrrrrrr> heh
[06:54:03] <boredomist> arrrrrrrrr: i've found some of the modules in stdlib frustrating DueTo inconsistent_design and namingschemes, but i generally don't have any complaints about the docs themselves
[06:54:45] <ezyang> hmm, is there a function for turning filenames into their basename? 
[06:57:07] <killerswan> there is a dirname function
[06:57:51] <arrrrrrrrr> boredomist: http://joepie91.wordpress.com/2013/02/19/the-python-documentation-is-bad-and-you-should-feel-bad/
[06:58:07] <arrrrrrrrr> and what might not be mentioned there: there are no tables
[06:58:22] <arrrrrrrrr> all parameters etc. are described in continuous text
[06:58:36] <arrrrrrrrr> combine this with no type annotations and you get shitty docs
[06:59:12] <carter> bascule: i just wrote a crazy person email to that thread, lemme know if its crazy or lucid
[07:00:06] <boredomist> arrrrrrrrr: good point, i hate seeing dynamically typed languages not give you the argument types expected in documentation
[07:00:07] <arrrrrrrrr> when I think of great docs I think of this: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp
[07:00:17] <boredomist> for some reason i don't really have that problem with python
[07:00:28] * boredomist shrugs
[07:00:37] *** Joins: andreypopp (andreypopp@moz-7261DC60.net)
[07:01:01] *** Quits: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com) (Input/output error)
[07:01:51] <boredomist> hah, FTA: “but I’m doing fine, I have no issues with the documentation as it is, you’re just whining!”
[07:02:09] <eddyb> arrrrrrrrr: MDN is better than most cruft out there about JS - but it's far from perfect
[07:02:38] <eddyb> arrrrrrrrr: hmm, it does look better than when I last saw it
[07:02:41] <kvanb> morestack?
[07:02:45] <kvanb> I thoguth rust stopped using that
[07:02:57] <eddyb> kvanb: it's just used to make sure you don't stack overflow
[07:03:12] <kvanb> yes, but doesn't it not get used anymore?
[07:03:25] *** Joins: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net)
[07:03:31] <eddyb> morestack just checks if you went over the stack limit
[07:03:40] <eddyb> and kills you instead of letting you overflow
[07:03:45] <kvanb> oh.
[07:03:51] <kvanb> that sounds ineffecient..
[07:03:57] <eddyb> (or something along those lines)
[07:04:27] <arrrrrrrrr> eddyb: maybe. I thinking of the good use of html elements, tables, colors, highlighting, structure. There might be other docs with better content but here I can see at a glance what the arguments are, what their meaning is and how to use them
[07:04:27] <kvanb> it would kind of defeat the purpose of them removing infinite stack if there were still checks you pay for
[07:04:31] <arrrrrrrrr> python docs have none of this
[07:05:05] <eddyb> arrrrrrrrr: I think the new wiki they're using is an improvement
[07:05:27] <eddyb> https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects hah, down thumbs for escape/unescape :D
[07:05:47] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Quit: WeeChat 0.4.2)
[07:06:17] <ChrisMorgan> arrrrrrrrr: I agree that the Python documentation isn't perfect; some of the flaws in it are due to the structure and design of the language which we wouldn't have so much in Rust. Explicit typing, for example, encourages the displaying of types and good cross-referencing so that some things which are manual in Python (and lacking) would be automatically there for us.
[07:06:28] <boredomist> oh wow, MDN looks a lot cleaner since i last looked at it
[07:06:58] <killerswan> ezyang: std::path::dirname_str
[07:07:06] <ChrisMorgan> I have read the "Python documentation is bad" article before and thought it a little exaggerated.
[07:07:19] <killerswan> but now I can't find a way to get an absolute path out of a relative one
[07:07:43] <killerswan> I could swear this function used to exist, even: i've seen its source
[07:10:07] <ChrisMorgan> As for the "separate page per function" doctrine, most of the time I would describe that as overkill which *hinders* usability. (There are times when it's helpful, but normally I don't think it's a good idea.)
[07:10:37] <ChrisMorgan> I would guess that PHP does it that way because of its history: that that was *the only way to do it* until PHP 5 or so.
[07:10:50] <ChrisMorgan> (Unless you put everything on one page.)
[07:11:09] <arrrrrrrrr> ChrisMorgan: Python puts too much on one page
[07:11:13] <ChrisMorgan> (Or grouped them by first letter or length of function name or something like that.)
[07:11:30] <ChrisMorgan> arrrrrrrrr: sometimes.
[07:11:42] <arrrrrrrrr> sometimes? those pages are long as fuck
[07:12:34] *** Joins: pao (pao@moz-AF905E87.fbx.proxad.net)
[07:12:38] <killerswan> well, I only think about it when I'm trying to find something that isn't documented at all (but which exists and I want to use)
[07:12:46] <killerswan> because those are the pages I read all of
[07:13:00] *** Quits: pao (pao@moz-AF905E87.fbx.proxad.net) (Quit: pao)
[07:13:14] <arrrrrrrrr> Anyway. As long as the manpages follow C manpage style (one function per file or a small group of very similar functions per file) I don't really care about the html docs
[07:13:31] <ChrisMorgan> arrrrrrrrr: you think that os.path page long? (I would consider it not short, but not excessively long.)
[07:13:42] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[07:14:01] *** Quits: jdm (jdm@FCCEA34F.7672369.D8E68FF6.IP) (Quit: Lost terminal)
[07:14:20] <ezyang> well, if I understand correctly, I have to first turn the filename into a proper GenericPath before I can get it out 
[07:14:53] <arrrrrrrrr> The length of os.path seems ok but its usability is very limited because it doesn't have a table of contents with one line descriptions of the functions
[07:14:55] <ezyang> ...hmm, I guess it turns out I actually want path_relative_from + the cwd 
[07:15:02] *** Quits: jessta (jessta@moz-9DDA1270.dyn.iinet.net.au) (Ping timeout)
[07:15:26] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[07:15:45] <ezyang> hmmph. It just doesn't seem profitable to provide the start and end markers 
[07:16:35] <arrrrrrrrr> Do rust docs have one line descriptions (doxygen style or something like that)?
[07:17:38] <killerswan> it is funny that both the Python discussion and ezyang and I are addressing the same problem and maybe talking past each other
[07:17:39] <ChrisMorgan> arrrrrrrrr: it's all a matter of convention at present and the conventions are not strong.
[07:18:06] <killerswan> how do I `pwd` or `%~dp0` in Rust?
[07:18:30] <ChrisMorgan> http://static.rust-lang.org/doc/master/std/os/fn.getcwd.html
[07:19:03] <ChrisMorgan> In all its glorious undocumented existence.
[07:19:25] <killerswan> awesome.  (the rust docs now are split all over the place between different traits, and I hadn't looked there)
[07:20:16] <arrrrrrrrr> does rust have any (configuration) parses besides json?
[07:20:28] <arrrrrrrrr> *parsers
[07:20:28] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[07:20:59] <o11c> rusti: std::os::getcwd()
[07:20:59] -rusti- std::path::posix::Path{repr: ~[47u8, 104u8, 111u8, 109u8, 101u8, 47u8, 114u8, 117u8, 115u8, 116u8], sepidx: Some(5u)}
[07:21:10] <o11c> why doesn't it pretty-print something stringish? ^
[07:21:38] <dbaupp> rusti: println!("{}", std::os::getcwd().display())
[07:21:39] <arrrrrrrrr> rusti: std::os::getcwd().repr
[07:21:42] -rusti- pastebinned 21 lines of output: http://ix.io/9s6
[07:21:42] -rusti- pastebinned 7 lines of output: http://ix.io/9s7
[07:22:04] <dbaupp> rusti: let cwd = std::os::getcwd(); println!("{}", cwd.display())
[07:22:05] -rusti- /home/rust
[07:22:05] -rusti- ()
[07:22:12] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[07:22:26] <ezyang> r? https://github.com/mozilla/rust/pull/11066 
[07:23:06] <dbaupp> o11c: Paths don't map 1-to-1 with strings, so they can't be stored internally as them and {:?} just prints the internal representations for debugging, nothing customisable at all.
[07:24:17] <dbaupp> ezyang: I have a feeling there's literally nothing that that can do better :(
[07:24:27] <dbaupp> ezyang: (i.e. how you've written it is optimal)
[07:24:53] <dbaupp> ezyang: although, you could just replace `item_span` entirely?
[07:25:46] <ezyang> dbaupp: I don't know, maybe item_span wants to be more strict about what kind of input it accepts 
[07:26:09] <ezyang> The function could also be split into two parts, in case you don't need to do the find 
[07:26:22] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[07:26:46] *** Quits: FreeFull (freefull@moz-EFEF3DB5.as13285.net) (Quit: )
[07:26:53] <kvanb> yay buily rust
[07:27:03] <kvanb> let the oxidization apocalypse occur.
[07:27:11] <kvanb> *built
[07:27:19] <dbaupp> ezyang: well, item_span is only called once, and that's for error diagnostics, so I guess it's not trying to be strict
[07:27:26] * dbaupp shrugs
[07:27:54] <ezyang> Fair enough 
[07:34:00] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Ping timeout)
[07:34:00] *** Joins: zxcdw (r-a@ACF33729.B543C4DE.3933CC16.IP)
[07:34:35] *** Quits: spott_ (spott@moz-82AAF168.hsd1.co.comcast.net) (Client exited)
[07:35:11] *** Joins: spott (spott@moz-82AAF168.hsd1.co.comcast.net)
[07:35:38] <geomyidae> I'm running into lifetimes for my first time and have a compiler message that is a bit of a doozy for me https://github.com/colemickens/pcapfe/blob/master/build_log.txt because it looks like it's pointing at the same thing twice
[07:35:49] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[07:36:14] <dbaupp> geomyidae: code?
[07:36:19] <geomyidae> dbaupp: same repo
[07:36:27] <geomyidae> https://github.com/colemickens/pcapfe/blob/master/pcapfe.rs#L171
[07:36:31] <geomyidae> would be the exact line :)
[07:36:52] *** Quits: spott (spott@moz-82AAF168.hsd1.co.comcast.net) (Ping timeout)
[07:36:52] *** Quits: lpy (lpy@9EA5DA85.F09091A8.1348A864.IP) (Connection reset by peer)
[07:37:32] <o11c> geomyidae: I think it's because the if() is an expression
[07:38:31] <dbaupp> geomyidae: you need -> DecodedPacket<'r>, at least
[07:38:47] <dbaupp> (i.e. connect the lifetime of the decoded packet to that of the input.)
[07:39:14] <dbaupp> from a brief glance, that should fix it
[07:39:15] <geomyidae> dbaupp: that one makes sense at least
[07:39:40] *** Quits: sankha93 (Instantbir@F4EE2D1C.BBE513BA.EFB84E89.IP) (Ping timeout)
[07:39:58] <geomyidae> o11c: I'm not sure I'm following to be honest. I was thinking about pinging you though since you were the one that recommended I avoid copying the payload, and it made sense and I wanted to bite this. We'll see if dbaupp's suggestion works
[07:41:19] <o11c> Now that I realize you *are* intending to return from the if as an expression, I agree, you just need to change the return type to include the lifetime
[07:43:15] <killerswan> whenever someone implements a good string-like trait, can we implement it for Path?
[07:43:38] <killerswan> writing `mypath.as_str().unwrap().to_str()` is just wrong
[07:44:29] <dbaupp> converting a path to a string is just wrong
[07:44:32] <killerswan> I understand that paths can exist which aren't UTF-8 strings, but good god
[07:44:42] <dbaupp> why do you need it as a string?
[07:44:46] * geomyidae smiles. rust's compiler is slow enough that I can tell when my program is more and more correct based on duration of time-to-compile-error
[07:45:00] <dbaupp> there is `mypath.display()` which you can use with `format!` and `println!` etc.
[07:45:22] <eddyb> geomyidae: by looking at the list of passes or by running with -Z time-passes you can know what kind of error you'll get
[07:45:27] <eddyb> or rather, what kinds of errors you won't get
[07:45:52] <killerswan> because things like run::process_output and rustc::main_args wants string arguments
[07:45:59] <killerswan> s/wants/want/
[07:46:07] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[07:46:13] <dbaupp> maybe we should just fix them :)
[07:46:23] <eddyb> I thought they got fixed
[07:46:39] <ChrisMorgan> geomyidae: or if you don't actually care about the compiled result but just want to verify that it's correct, --no-trans
[07:46:50] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[07:47:08] <eddyb> (to use bytes for exec arguments, that is)
[07:48:59] <o11c> dbaupp: I understand that a path is a 16-bit string on windows and an 8-bit string on linux, but how is it not a string?
[07:49:22] <klutzy> ugh my hello-rust.exe fails to start
[07:49:47] *** Joins: lpy (lpy@9EA5DA85.F09091A8.1348A864.IP)
[07:50:06] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[07:50:17] <eddyb> o11c: 8-bit but potentially not utf8
[07:51:46] <dbaupp> o11c: what eddyb says; in general they're just an arbitrary *byte* string and the only restriction is having no nulls, i.e. different to a rust string.
[07:56:22] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[07:56:48] <eevee> hmm.  Rc::from_mut(RefCell::new(val)) seems...  cumbersome
[07:58:48] <eevee> and then .borrow().borrow() anytime i want to use it
[08:01:20] *** Joins: Kxepal (Miranda@moz-2ECA0CCA.pppoe.mtu-net.ru)
[08:06:05] *** Quits: lpy (lpy@9EA5DA85.F09091A8.1348A864.IP) (Connection reset by peer)
[08:06:17] *** Joins: Ms2ger (Ms2ger@8B85F0F7.C5F25A2D.F15B0BB3.IP)
[08:06:23] *** Joins: lpy (lpy@9EA5DA85.F09091A8.1348A864.IP)
[08:06:28] *** Quits: lpy (lpy@9EA5DA85.F09091A8.1348A864.IP) (Client exited)
[08:06:54] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[08:08:41] *** Joins: Blei (philipp@moz-B2F9E4BD.cust.bluewin.ch)
[08:10:15] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[08:15:11] *** Quits: KindOne (KindOne@moz-AD778EEF.dynamic.ip.windstream.net) (Ping timeout)
[08:15:17] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[08:18:06] <arrrrrrrrr> is there a command line tool that converts strings into fully escaped json strings?
[08:18:23] <arrrrrrrrr> including '\t' -> "\\t"
[08:19:14] <ezyang> I think I should complain about the vim ctags regex being not that good 
[08:19:33] *** Joins: KindOne (KindOne@moz-AD778EEF.dynamic.ip.windstream.net)
[08:21:13] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[08:22:54] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[08:23:05] <Blei> how so? it seems to work pretty well (except enum variants, but iirc that's not easily fixable)
[08:29:09] <dbaupp> ezyang: talk to ChrisMorgan
[08:31:55] <ChrisMorgan> ezyang: I have some changes made locally but haven't committed them. Sorry, g2g just now.
[08:32:27] <ezyang> ChrisMorgan: No rush, but would be nice to have eventually :) 
[08:35:24] <eddyb> arrrrrrrrr: there's a function in extra::json to do exactly that, but I'm not sure it's public
[08:35:31] *** Joins: spott (spott@moz-82AAF168.hsd1.co.comcast.net)
[08:35:53] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[08:36:30] *** flaper87|afk is now known as flaper87
[08:37:15] *** Quits: spott (spott@moz-82AAF168.hsd1.co.comcast.net) (Ping timeout)
[08:39:21] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[08:43:13] *** Quits: sigma (sigma@moz-6E1846A2.range86-184.btcentralplus.com) (Client exited)
[08:43:48] *** Quits: Blei (philipp@moz-B2F9E4BD.cust.bluewin.ch) (Ping timeout)
[08:45:44] *** Joins: spott (spott@moz-82AAF168.hsd1.co.comcast.net)
[08:47:26] *** Quits: spott (spott@moz-82AAF168.hsd1.co.comcast.net) (Ping timeout)
[08:47:32] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[08:48:59] <ezyang> bors... is the build server? 
[08:50:03] *** Joins: Blei (philipp@moz-B2F9E4BD.cust.bluewin.ch)
[08:51:10] <Ms2ger> The merge bot
[08:54:27] *** Joins: awidegreen (awidegreen@moz-3FE0A1F.a357.priv.bahnhof.se)
[08:54:46] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[08:55:38] *** Joins: autra (augustin@moz-BE76895F.fbx.proxad.net)
[08:56:03] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:56:24] *** Quits: awidegreen (awidegreen@moz-3FE0A1F.a357.priv.bahnhof.se) (Ping timeout)
[08:58:00] <eddyb> oh, you can't do this craziness anymore? error: non-scalar cast: `*u8` as `&u8`
[08:58:30] <Ms2ger> cast::transmute!
[08:58:37] <eddyb> ewww. but ok
[08:59:28] *** Joins: awidegreen (awidegreen@moz-3FE0A1F.a357.priv.bahnhof.se)
[09:00:57] <eddyb> Ms2ger: can I transmute a tuple of these things at once?
[09:01:11] <Ms2ger> I have no idea
[09:01:47] <eddyb> dbaupp: f(x, ..unsafe {transmute((a as *u8, ...
[09:02:06] * eddyb stirs some more in the magic pot
[09:03:42] <eddyb> error: the type of this value must be known in this context
[09:04:11] <eddyb> that needs to be fixed for tuple value expansion, too
[09:06:39] <eddyb> rustc: /home/eddy/Projects/rust/src/llvm/include/llvm/ADT/SmallVector.h:140: T& llvm::SmallVectorTemplateCommon<T, <template-parameter-1-2> >::operator[](unsigned int) [with T = llvm::SDValue; <template-parameter-1-2> = void; llvm::SmallVectorTemplateCommon<T, <template-parameter-1-2> >::reference = llvm::SDValue&]: Assertion `begin() + idx < end()' failed.
[09:06:50] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[09:07:39] <Eridius> eddyb: for *u8 as &u8, you could presumably do &*p
[09:07:56] <eddyb> I'm afraid that creates a temporary
[09:08:26] *** Quits: awidegreen (awidegreen@moz-3FE0A1F.a357.priv.bahnhof.se) (Ping timeout)
[09:08:29] <eddyb> and those references are unsafe to dereference. I would do something smarter with closures, but I'm afraid it won't be optimized
[09:08:36] <Eridius> eddyb: transmute is unsafe as well
[09:08:40] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[09:08:55] <eddyb> yes, but &*p might dereference
[09:09:17] <eddyb> those references won't be dereferenced if they aren't invalid, because of outer logic
[09:09:20] <Eridius> transmute will produce a "safe" &T, which if dereferencing is legitimately unsafe, then you've violated the safety guarantees of rust
[09:09:31] <Luqman> eddyb: wait, you want to goo from a *u8 to a &u8?
[09:09:44] <eddyb> I'm lowering and lifting this code
[09:10:03] <eddyb> eventually it will be completely safe, but now I'm just trying to make a lowering pass work :P
[09:10:10] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[09:10:20] <eddyb> once I'm as fast or faster than libpng, I can start putting back safety into it
[09:10:39] <Eridius> eddyb: I'm reasonably sure &*p won't actually dereference p
[09:10:58] <eddyb> but that means it's different than &(*p). I don't like playing with fire
[09:11:36] <Eridius> eddyb: &*p and &(*p) are the same. But the point is, the memory at the location *p is never read. Only its address is used, by the & operator
[09:12:12] <Eridius> and I just double-checked, &(*p) works for all T, even those that aren't implicitly copyable
[09:12:35] <Blei> it could still do a move to a temporary
[09:12:46] <eddyb> okay, better put (because parens don't do much in Rust), it's not the same as &id(*p)
[09:12:54] <Eridius> it conceivably could have been defined that way, Blei, but apparently it wasn't
[09:12:56] *** Joins: awidegreen (awidegreen@moz-3FE0A1F.a357.priv.bahnhof.se)
[09:13:08] *** Joins: sammykim (sammy.kim@5AB4884B.FCC4549.14D5B978.IP)
[09:13:24] <Eridius> eddyb: well no, id(*p) very clearly dereferences p and passes the resulting value to the id() function. Why would you expect that to be the same?
[09:14:23] <eddyb> because Rust lvalues don't play that well
[09:14:35] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[09:15:04] <eddyb> you can "take the address" of an rvalue
[09:15:07] <Eridius> eddyb: using &*p to convert from some other pointer into a &T is not that uncommon in Rust. I don't understand your issue with it
[09:15:55] *** Quits: awidegreen (awidegreen@moz-3FE0A1F.a357.priv.bahnhof.se) (Ping timeout)
[09:16:02] <eddyb> &Some(5) works. but it's not the same as &*~Some(5)
[09:16:34] <eddyb> though it result is identical to &id(*~Some(5))
[09:16:55] <Eridius> but.. those are different things
[09:17:00] *** Quits: o11c (ben@moz-C0FD33EF.a357.priv.bahnhof.se) (Ping timeout)
[09:17:00] <Eridius> those aren't equivalent to what we're talking about
[09:17:12] *** Joins: o11c (ben@moz-C0FD33EF.a357.priv.bahnhof.se)
[09:17:26] <eddyb> & works with rvalues, so you can't tell if what you're doing dereferences or not
[09:17:31] <Eridius> in any case, &*p will convert a *T into a &T without making any temporaries.
[09:17:46] <Eridius> and if you really want to prove that to yourself: https://gist.github.com/kballard/8036568
[09:18:32] <eddyb> I want them to be better defined, but I'm not sure how good it can get - see http://en.cppreference.com/w/cpp/language/value_category
[09:19:18] <eddyb> LLVM still crashes when I transmute individual references - but I'm not sure it's related :(
[09:19:27] <Eridius> eddyb: defining it better is fine, but I still don't understand your objections to using &*p today, since it works the way you want it to
[09:20:12] *** Joins: awidegreen (awidegreen@moz-B179C175.dip0.t-ipconnect.de)
[09:20:16] <Blei> it's about guarantees i think. this program only shows that with the current compiler with the current set of llvm optimizations it behaves as expected, but not necessarily that it is defined to behave this way
[09:20:31] <Eridius> Blei: I think it actually _is_ defined this way
[09:20:32] <eddyb> Blei: no, I think Eridius is saying &* is a special case
[09:20:36] <Blei> but i agree, it works, and lots of code will break if they change it
[09:20:40] <eddyb> which makes it just as error prone
[09:20:41] <Ms2ger> Yay, special cases
[09:20:45] <ezyang> r? https://github.com/mozilla/rust/pull/11070 
[09:21:06] <Blei> Eridius: [citation needed], which is what this is all about :)
[09:22:10] <Eridius> eddyb: I don't think it's actually a special case, it's just a matter of & takes the address of a value, *p produces a value (not a temporary!), and therefore &*p works without actually reading any memory at the location *p
[09:22:11] <eddyb> because you can "take the address" of temporaries, I've considered & to be a "borrowed pointer constructor"
[09:22:18] *** Joins: c-a (c-a@moz-57C82A9.a163.priv.bahnhof.se)
[09:22:25] <Eridius> you can indeed take the address of temporaries, but that's not what &*p is doing
[09:22:49] <eddyb> which makes *p ambiguous, because depending on the type of p it's either a lvalue or a rvalue
[09:23:08] <eddyb> (I guess without a custom dereference trait *p is always a lvalue)
[09:23:09] *** Quits: awidegreen (awidegreen@moz-B179C175.dip0.t-ipconnect.de) (Ping timeout)
[09:23:39] <eddyb> *great*, now I have to find what part of my crazy code LLVM is complaining about
[09:24:36] <eddyb> I dereferencing WrapperStruct(UnitStruct) (WrapperStruct<UnitStruct> being 0-sized as well), could that trigger an assert?
[09:25:39] * Eridius heads to bed
[09:25:45] <Eridius> good luck figuring out your LLVM issue
[09:25:57] <eddyb> thanks. maybe bugpoint works this time :P
[09:26:29] *** Joins: oberstet (quassel@moz-C523F65A.dynamic.mnet-online.de)
[09:27:26] *** Joins: awidegreen (awidegreen@moz-3FE0A1F.a357.priv.bahnhof.se)
[09:28:01] <eddyb> 2.      Running pass 'X86 DAG->DAG Instruction Selection' on function '@_ZN12PartialImage11update_idat69h0f4e329589bd2a47fc09ae689ebb600141b855306d7ee5f1c0ec4de6af1b1e886Sa24v0.0E'
[09:29:47] *** Joins: skade (skade@30BBD5E6.505237C9.CAE22B62.IP)
[09:32:19] <eddyb> that was it, dereferencing an empty struct :(
[09:32:49] *** Joins: Meistarin (sid19523@moz-A42E5B7B.irccloud.com)
[09:32:59] *** Joins: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP)
[09:35:56] *** Joins: spott (spott@moz-82AAF168.hsd1.co.comcast.net)
[09:37:14] <Luqman> ezyang: added a commit. just a small nit
[09:37:39] *** Quits: spott (spott@moz-82AAF168.hsd1.co.comcast.net) (Ping timeout)
[09:38:18] <Luqman> comment*
[09:39:15] <ezyang> yep, pushing fix 
[09:40:27] *** Quits: fournm (Aria@moz-ABB60BA0.austin.res.rr.com) (Quit: Leaving)
[09:40:29] *** Joins: buster (buster@3A0EAB5F.9C69795C.ACFE537F.IP)
[09:42:59] <eddyb> wait, it's the creation?
[09:44:33] *** Quits: andreypopp (andreypopp@moz-7261DC60.net) (Quit: andreypopp)
[09:44:44] *** Joins: sigma (sigma@moz-6E1846A2.range86-184.btcentralplus.com)
[09:44:45] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[09:47:23] *** Quits: silotis (quassel@moz-4B8C4631.oc.oc.cox.net) (Ping timeout)
[09:48:52] *** Quits: z0w0 (zack@moz-7B305DFB.lnse1.woo.bigpond.net.au) (Connection reset by peer)
[09:49:37] *** Joins: moostik (Icedove@6181009C.10715965.BCDF592F.IP)
[09:52:39] *** Quits: autra (augustin@moz-BE76895F.fbx.proxad.net) (Ping timeout)
[09:53:15] * eddyb wishes Rust symbols would make more sense for debugging - like C++ ones do
[09:54:21] <ion> eddyb: Do you know which SMT solver LLVM is going to require?
[09:54:41] <eddyb> no idea if it will
[09:54:43] *** Quits: moostik (Icedove@6181009C.10715965.BCDF592F.IP) (Ping timeout)
[09:55:02] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[09:55:10] <eddyb> (assuming you meant s/require/use/)
[09:55:19] *** Joins: CarpNet (ac@moz-FD24B77.sohonet.co.uk)
[09:55:38] <ion> eddyb: Oh, i seem to have misunderstood what you said earlier.
[09:55:54] *** Joins: pao (pao@moz-AF905E87.fbx.proxad.net)
[09:56:14] *** Joins: nkoep (nik@moz-1AF7FFFD.pool.mediaways.net)
[09:58:10] *** Joins: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP)
[09:58:19] <eddyb> ion: I only know there's trivially-looking optimizations for which it doesn't have anything. that's not to say that it's going to be easy to implement those optimizations. and current generation SMT solvers might not even fit in that model. I don't know
[10:00:49] *** Quits: awidegreen (awidegreen@moz-3FE0A1F.a357.priv.bahnhof.se) (Ping timeout)
[10:00:56] *** Joins: amey (user@D647470E.72B94279.3F0DAA53.IP)
[10:01:22] *** Quits: sammykim (sammy.kim@5AB4884B.FCC4549.14D5B978.IP) (Quit: Lost terminal)
[10:02:00] <amey> Is rust master build currently failing on MinGW for everyone?
[10:02:47] <amey> Because of this issue: https://github.com/mozilla/rust/issues/10893
[10:03:34] *** Joins: juturna (Mibbit@moz-A06909E4.glbb.ne.jp)
[10:05:56] *** Joins: awidegreen (awidegreen@moz-B179C175.dip0.t-ipconnect.de)
[10:07:30] *** Joins: jviereck (Adium@moz-B1B15ECC.dip0.t-ipconnect.de)
[10:09:44] *** Quits: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net) (Connection reset by peer)
[10:10:49] *** Joins: fabiand (fabiand@moz-D89BFBB9.adsl.alicedsl.de)
[10:10:58] *** Quits: jviereck (Adium@moz-B1B15ECC.dip0.t-ipconnect.de) (Ping timeout)
[10:11:07] *** Joins: jviereck (Adium@moz-C223AC83.dip0.t-ipconnect.de)
[10:13:47] *** Quits: skade (skade@30BBD5E6.505237C9.CAE22B62.IP) (Quit: Textual IRC Client: www.textualapp.com)
[10:15:58] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[10:18:18] *** Quits: maxiepoo (Max@68A63377.C44F889.D279C981.IP) (Quit: maxiepoo)
[10:22:20] *** Quits: jlong (jlong@moz-6DFDE846.socal.res.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[10:23:09] *** Joins: jaen (jaen@138A5D71.4C038AE9.C4431F0E.IP)
[10:26:32] *** Joins: bheylin (textual@moz-8255E94E.adsl.online.nl)
[10:27:51] *** bheylin is now known as register
[10:28:09] *** register is now known as bheylin
[10:30:09] *** Quits: bheylin (textual@moz-8255E94E.adsl.online.nl) (Client exited)
[10:30:22] *** Joins: bheylin (textual@moz-8255E94E.adsl.online.nl)
[10:32:05] *** Quits: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net) (Quit: killerswan)
[10:34:16] *** Joins: jviereck1 (Adium@moz-2B2BBCFE.dip0.t-ipconnect.de)
[10:34:33] *** Quits: jviereck (Adium@moz-C223AC83.dip0.t-ipconnect.de) (Ping timeout)
[10:35:11] *** Joins: moostik (Icedove@moz-55271760.w82-123.abo.wanadoo.fr)
[10:35:58] <klutzy> amey: the error is somewhat ignorable; second `make` will work
[10:36:00] *** Quits: recrack (Mibbit@B4104EBB.3CC170B1.1E14B209.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[10:36:39] *** Joins: spott (spott@moz-82AAF168.hsd1.co.comcast.net)
[10:37:51] <Ms2ger> You know, when I first started working on Gecko, I thought its build system sucked
[10:38:05] <Ms2ger> Now I've worked on Servo... Not anymore :)
[10:38:16] *** Quits: ktt3ja (ktt3ja@moz-54586A12.washdc.fios.verizon.net) (Quit: Leaving)
[10:38:25] *** Quits: spott (spott@moz-82AAF168.hsd1.co.comcast.net) (Ping timeout)
[10:39:32] <eddyb> The ocean ate the last of the land and poured into the smoking gulf, thereby....
[10:39:33] *** Quits: sigma (sigma@moz-6E1846A2.range86-184.btcentralplus.com) (Client exited)
[10:39:50] <eddyb> Ms2ger: LTO is so poetic
[10:40:06] *** Quits: jviereck1 (Adium@moz-2B2BBCFE.dip0.t-ipconnect.de) (Quit: Leaving.)
[10:41:26] <eddyb> https://www.google.com/search?q=The+ocean+ate+the+last+of+the+land+and+poured+into+the+smoking+gulf%2C+thereby LOL, rust/src/libstd/rt/util.rs is the second result for me
[10:42:23] *** Joins: jviereck (Adium@moz-2B2BBCFE.dip0.t-ipconnect.de)
[10:42:43] <bjz> eddyb: <3 std::rt
[10:43:02] <eddyb> I always get that one. the hash is not random enough!
[10:43:10] <bjz> eddyb: the first time you encounter it is awesome
[10:43:16] <bjz> "wut"
[10:43:32] <bjz> or one of them
[10:43:51] *** Joins: ricepuddin (graham@moz-7D68765A.cable.virginm.net)
[10:44:03] <eddyb> my build is from a week ago and LTO is just broken. maybe nobody tested it with stage1?
[10:44:16] <geomyidae> would it make sense for rust bindgen to be able to ignore dead code warnings?
[10:44:28] <amey> klutzy: The second make fails with -lpthread,
[10:44:39] <meTaAU_> Is "rustpkg init" the best way to start a library? I haven't totally gotten my head around how it is intended to look.
[10:44:46] <amey> klutzy: despite the fact that I've already installed pthread-old and pthread-gc
[10:44:50] <eddyb> (the generated binary always aborts with that message)
[10:45:09] <klutzy> amey: interesting. could you pastebin some logs?
[10:45:42] <amey> klutzy: sure, doing a clean build now, will paste the second make's logs
[10:45:56] <klutzy> amey: thanks! :D
[10:46:36] *** Quits: pao (pao@moz-AF905E87.fbx.proxad.net) (Quit: pao)
[10:46:52] *** Joins: spott (spott@moz-82AAF168.hsd1.co.comcast.net)
[10:47:00] *** Joins: rca (rcatolino@moz-70492676.adsl.proxad.net)
[10:47:35] <amey> klutzy: No, thanks for offering to help, I just want rust to build :P
[10:47:57] *** meTaAU_ is now known as meTaAU
[10:48:35] *** Quits: spott (spott@moz-82AAF168.hsd1.co.comcast.net) (Ping timeout)
[10:52:30] *** Quits: jviereck (Adium@moz-2B2BBCFE.dip0.t-ipconnect.de) (Quit: Leaving.)
[10:57:47] *** Joins: Earnestly (earnest@88884C6.A3735F9C.39C00A7A.IP)
[10:59:06] *** Quits: ricepuddin (graham@moz-7D68765A.cable.virginm.net) (Ping timeout)
[11:02:30] <bjz> kvanb: ping
[11:04:06] *** Quits: amey (user@D647470E.72B94279.3F0DAA53.IP) (Ping timeout)
[11:05:27] *** Joins: jessta (jessta@moz-9DDA1270.dyn.iinet.net.au)
[11:05:34] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[11:05:52] *** Joins: amey (user@D647470E.72B94279.3F0DAA53.IP)
[11:06:32] *** Joins: autra (augustin@moz-BE76895F.fbx.proxad.net)
[11:06:51] *** Joins: doublec (farv@moz-EC11DA4D.members.linode.com)
[11:07:45] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[11:08:46] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[11:10:30] <kvanb> bjz: ping?
[11:10:49] <bjz> kvanb: PMed you
[11:14:03] <arrrrrrrrr> what is \/  ?
[11:14:13] <arrrrrrrrr> I don't know that cnotrol character
[11:15:35] <arrrrrrrrr> hm json.org lists it as a control character
[11:15:51] <kvanb> \/ looks like ddc effect union
[11:16:03] *** arrrrrrrrr is now known as arrrrrrafk
[11:17:28] *** Joins: dsirenko (mitra@8E712A0.54C21BA0.9F317420.IP)
[11:18:26] *** Joins: ricepuddin (graham@moz-7D68765A.cable.virginm.net)
[11:19:01] *** Joins: andreypopp (andreypopp@moz-7261DC60.net)
[11:20:58] *** arrrrrrafk is now known as arrrrrrrrr
[11:21:01] <arrrrrrrrr> test
[11:22:29] *** Quits: KindOne (KindOne@moz-AD778EEF.dynamic.ip.windstream.net) (Ping timeout)
[11:23:16] <arrrrrrrrr> oh no, json cannot be escaped without a five character lookahead
[11:27:16] *** Joins: KindOne (KindOne@moz-F737E0F9.dynamic.ip.windstream.net)
[11:27:27] <eddyb> arrrrrrrrr: a JSON string or any JSON?
[11:27:36] <arrrrrrrrr> JSON string
[11:27:36] *** Joins: dredozubov (dredozubov@2F14E2C1.F70E5FA9.F63E14E8.IP)
[11:27:59] <eddyb> arrrrrrrrr: there's a relatively small function in extra::json that does exactly that, no lookahead
[11:28:18] <arrrrrrrrr> \u0000   is valid so don't escape the \
[11:28:24] <arrrrrrrrr> \u000x is not so escape the \
[11:28:31] <dbaupp> eddyb: are they correct though? :P
[11:28:31] <arrrrrrrrr> how do you do this without lookahead?
[11:29:09] <eddyb> you would escape \u000
[11:29:11] <eddyb> errrr
[11:29:38] <eddyb> the rust string "\\u0000" is escaped as "\\\\u0000"
[11:29:57] <eddyb> arrrrrrrrr: are you trying to do some other kind of escaping?
[11:30:08] <eddyb> it sounds like PHP-ish-security-through-regexp
[11:30:15] <arrrrrrrrr> eddyb: then the rust thing is wrong
[11:30:22] <eddyb> why?
[11:30:28] <Ms2ger> Heh, php
[11:30:31] <arrrrrrrrr> \u0000 is allowed in JSON
[11:30:56] <eddyb> arrrrrrrrr: yes, but "\\u0000" isn't \u0000 in JSON
[11:31:13] <eddyb> "\u0000" (if it works) would become "\u0000"
[11:31:24] <arrrrrrrrr> I'm talking about "\\u0000"
[11:31:27] <arrrrrrrrr> this is allowed
[11:31:35] <arrrrrrrrr> as is "\\t"
[11:31:37] <arrrrrrrrr> but not "\t"
[11:31:56] *** arrrrrrrrr is now known as arrrrrrrfk
[11:32:10] <eddyb> the \ in \u0000 is a non-functional \
[11:32:18] <eddyb> it's just a character like everything else
[11:32:22] <eddyb> it should get escaped
[11:33:18] <eddyb> *however* the utf 8 string consisting of a 0 byte will be turned into \u0000 (if it's not encoded as a 0 byte anyway)
[11:33:29] *** Quits: zeittunnel (benjamin@moz-36A24513.dip0.t-ipconnect.de) (Ping timeout)
[11:34:12] <eddyb> arrrrrrrfk: test your theories in JS: JSON.decode(JSON.encode(str)) === str
[11:34:49] <eddyb> or parse and stringify, sorry
[11:34:59] <eddyb> '\\u0000' will be encoded as '"\\\\u0000"' and decoded as '\\u0000'
[11:35:33] <eddyb> what you're saying (AFAICT) is that it should be decoded as '\u0000' === '\x00' === String.fromCharCode(0)
[11:36:07] <eddyb> which means you've performed extra evaluation
[11:37:16] *** Joins: spott (spott@moz-82AAF168.hsd1.co.comcast.net)
[11:38:27] *** Quits: amey (user@D647470E.72B94279.3F0DAA53.IP) (Ping timeout)
[11:38:38] <eddyb> arrrrrrrfk: fwiw, "\t" is just one character
[11:38:48] <eddyb> arrrrrrrfk: and so is "\u0000"
[11:39:01] *** Quits: spott (spott@moz-82AAF168.hsd1.co.comcast.net) (Ping timeout)
[11:40:20] *** Joins: jviereck (Adium@moz-2B2BBCFE.dip0.t-ipconnect.de)
[11:42:29] *** Quits: fabiand (fabiand@moz-D89BFBB9.adsl.alicedsl.de) (Quit: Verlassend)
[11:42:35] *** Joins: Jesin (Jesin@moz-63C897DA.res.lehigh.edu)
[11:42:41] *** Quits: bheylin (textual@moz-8255E94E.adsl.online.nl) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[11:44:14] *** Quits: jviereck (Adium@moz-2B2BBCFE.dip0.t-ipconnect.de) (Quit: Leaving.)
[11:45:02] *** arrrrrrrfk is now known as arrrrrrrrr
[11:45:43] <arrrrrrrrr> eddyb: What I'm saying is: The string "\u0000" which is represented by 6 bytes is allowed in a json string
[11:45:47] *** Joins: kzzch (kzzch@moz-15D2697.public.wayport.net)
[11:45:56] <arrrrrrrrr> "\t" which is represented by 1 byte is not
[11:46:01] <arrrrrrrrr> "\t" which is represented by 2 bytes is
[11:46:17] <Ms2ger> Eh?
[11:46:27] <arrrrrrrrr> Ms2ger: Different interpretations
[11:46:38] <arrrrrrrrr> write \t in vim and you get a 2 bytes file
[11:46:47] <arrrrrrrrr> write echo "\t" and you get 1 bite file
[11:47:01] <Ms2ger> Madness
[11:47:44] <arrrrrrrrr> json.org says that control characters are not allowed
[11:47:50] <arrrrrrrrr> it also says that "\t" is allowed
[11:47:54] *** Joins: bheylin (textual@moz-8255E94E.adsl.online.nl)
[11:47:57] <arrrrrrrrr> now how do we interpret "\t"?
[11:47:59] <eddyb> arrrrrrrrr: JSON.stringify('\t') === '"\\t"'
[11:47:59] <arrrrrrrrr> 2 bytes or 1?
[11:48:09] <arrrrrrrrr> so 2 bytes
[11:48:16] <eddyb> JSON.stringify('\\t') === '"\\\\t"'
[11:48:20] <kzzch> ls
[11:48:24] <kzzch> lol, oops
[11:48:26] <eddyb> there is nothing magic going on there
[11:48:36] <arrrrrrrrr> that's why I'm saying that "\u0000" doesn't have to be escaped
[11:48:39] <arrrrrrrrr> 6 bytes
[11:48:47] <arrrrrrrrr> 6 characters
[11:48:50] <eddyb> err, why?
[11:48:56] <eddyb> it has to
[11:49:01] <arrrrrrrrr> because json.org says that the 6 characters 
[11:49:05] <eddyb> otherwise it's decoded as \x00
[11:49:06] <arrrrrrrrr> \u0000 don't have to be escaped
[11:49:24] <arrrrrrrrr> I'm not talking about the unicode character
[11:49:29] <arrrrrrrrr> buth the six character sequence
[11:49:43] <eddyb> JSON.parse('"\\u0000"') === '\x00'
[11:49:44] <eddyb> true
[11:49:49] <eddyb> yes they do have to be escaped
[11:50:14] *** Quits: hacker_sam (hacker_sam@2EE27BB6.661C02A7.B0CE379A.IP) (Client exited)
[11:50:34] *** Joins: hacker_sam (hacker_sam@2EE27BB6.661C02A7.B0CE379A.IP)
[11:50:59] <eddyb> or are you implying JSON strings can't hold certain codepoints under 0x80?
[11:51:03] <eddyb> because that would be nuts
[11:51:04] <arrrrrrrrr> depends on what your intention is. do you want your \u0000 to be interpreted as "\0"? but your language doesn't support unicode literals?
[11:51:13] <arrrrrrrrr> then you cannot escape it
[11:51:25] <eddyb> what are you even saying?
[11:51:51] <eddyb> \ is always escaped. that's it
[11:51:56] <eddyb> there's no reason not to escape it
[11:52:13] <eddyb> JSON is JS' literals made simple
[11:52:23] <eddyb> it's quite deterministic
[11:53:08] <kzzch> are there any good general tutorials on stuff like boxing and unboxing and pointers relevant to Rust but not necessarily written about Rust? I'm new to all this managed memory stuff and want to understand better what I'm doing.
[11:53:40] *** Joins: fabiand (fabiand@moz-D89BFBB9.adsl.alicedsl.de)
[11:54:14] <kzzch> like, boxing take a value type and wraps it in a reference but that's all i think i really understand about it
[11:54:16] <arrrrrrrrr> JSON.org says that "\\u0000" may appear in a json string. that's what I'm saying. Escaping it is wrong and limits the usefulness of unicode literals.
[11:54:21] <arrrrrrrrr> For example:
[11:54:37] <eddyb> arrrrrrrrr: but it means \x00
[11:54:50] <arrrrrrrrr> What if you want it to mean \0?
[11:55:08] <eddyb> '\0' is \x00' is '\u0000'
[11:55:18] <arrrrrrrrr> sure
[11:55:25] <arrrrrrrrr> now assume you write a file in a text editor
[11:55:32] <arrrrrrrrr> how do you input \u1234
[11:55:52] <eddyb> JSON doesn't support random unicode characters
[11:56:06] <eddyb> *as part of the document structure*
[11:56:23] <eddyb> JSON.parse('"\u0000"')
[11:56:25] <eddyb> SyntaxError: Unexpected token 
[11:56:26] <arrrrrrrrr> json supports all unicode characters in strings except ",\,and control characetrs
[11:56:48] <eddyb> mkay, maybe it does, nvm the way I phrased it
[11:57:10] <arrrrrrrrr> ok now you write a text in an editor and need to input a unicode character
[11:57:17] <arrrrrrrrr> you use \u1234
[11:57:27] <arrrrrrrrr> now you send it via some JSON
[11:57:33] <eddyb> arrrrrrrrr: JSON.parse('"\u1234"') === '\u1234' - correct for all \uXXXX
[11:58:02] <arrrrrrrrr> if your json encoder escapes these characters then you cannot send unicode characters
[11:58:05] <eddyb> maybe not surogates
[11:58:10] <arrrrrrrrr> eddyb: yes because you write it in the language
[11:58:28] <arrrrrrrrr> read a file that contains the six bytes string "\u1234" and try it again
[11:58:29] <eddyb> wait, I did it wrong. doesn't work for control characters
[11:58:32] <eddyb> you confuse me
[11:58:40] <eddyb> JSON.parse('"\\u1234"') === '\u1234'
[11:58:46] <arrrrrrrrr> you see
[11:58:47] <eddyb> there, still valid, including control characters
[11:58:52] <eddyb> it's the same thing
[11:59:25] <eddyb> '"\\\\u1234"' is what gives you '\\u1234'
[11:59:45] <arrrrrrrrr> I'm sure some JSON parsers support that
[11:59:51] <eddyb> "some"?
[12:00:06] <arrrrrrrrr> jq supports control characters
[12:00:15] <arrrrrrrrr> the parser used by github doesn't
[12:00:45] <eddyb> use JS or Rust string syntax and explain
[12:00:56] *** Joins: pao (pao@moz-AF905E87.fbx.proxad.net)
[12:01:35] <arrrrrrrrr> six bytes file on the hard drive containing "\\u1234"
[12:01:42] <eddyb> okay
[12:01:43] <arrrrrrrrr> load it, escape it, send it
[12:01:55] <eddyb> I told you that decode(encode(x)) is id(x)
[12:01:56] <arrrrrrrrr> parse it, save it
[12:02:05] <arrrrrrrrr> what is the resulting file?
[12:02:09] <eddyb> identical
[12:02:45] <eddyb> parsing un-escapes. is there any confusion there?
[12:02:47] <arrrrrrrrr> how does the escaped string look like?
[12:03:06] <eddyb> JSON.parse(JSON.stringify('\\u1234')) === '\\u1234'
[12:03:20] <eddyb> the escaped string has 9 bytes, 7 without the quotes
[12:03:29] <eddyb> there are two backslash characters in the escaped string
[12:03:38] <eddyb> when parsing, they get turned into a single backslash character
[12:03:54] <arrrrrrrrr> how do you get two escaped \?
[12:03:59] *** Joins: a_m0d|home (a_m0d@moz-4A42350.acanac.net)
[12:04:01] <arrrrrrrrr> remember: the file on the hd contains six bytes
[12:04:02] <kvanb> anyone know when rust will make it to the computer language benchmark game?
[12:04:03] *** Quits: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net) (Quit: I'm sure it's perfectly safe)
[12:04:06] <eddyb> one \ is escaped into two \
[12:04:19] <arrrrrrrrr> on but the you get seven bytes in the escaped string
[12:04:33] <Ms2ger> kvanb, in what sense?
[12:04:59] <kvanb> or, do we have a benchmark page or something?
[12:05:13] <eddyb> we have *some* benchmarks
[12:05:19] <Ms2ger> I've seen people mention benchmarks in here... Not sure if they're collected
[12:05:26] <arrrrrrrrr> Here: this is literally what you file looks like no the hd: https://gist.github.com/anonymous/0915f9db937cb3dcfe43
[12:05:37] *** Joins: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com)
[12:05:45] <arrrrrrrrr> I don't see how you get 9 bytes after escaping that
[12:05:56] <eddyb> arrrrrrrrr: it's escaped into the (JS string) '"\\\\u1234"'
[12:06:05] <arrrrrrrrr> which is 7 bytes
[12:06:13] <arrrrrrrrr> \\ = 1 byte
[12:06:14] <eddyb> 9 bytes with quotes
[12:06:18] <eddyb> yes
[12:06:30] <arrrrrrrrr> ok I'm talking without quotes
[12:06:36] <eddyb> 7, said it already
[12:06:45] <eddyb> [14:03] <eddyb> the escaped string has 9 bytes, 7 without the quotes
[12:06:52] <arrrrrrrrr> oh, sorry
[12:07:17] <eddyb> arrrrrrrrr: I still don't see any point whatsoever in this discussion
[12:07:27] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[12:07:41] <arrrrrrrrr> so you cannot send a unicode character over the network without being able to input it at your pc
[12:08:11] <eddyb> if it's encoded in JSON after you've inputted it, no
[12:08:22] <eddyb> I told you, JSON is simple and deterministic
[12:08:23] <dbaupp> kvanb: we have a pile of implementations of the shootout benchmarks ni `src/test/bench`
[12:08:29] <eddyb> the escape function is like 10 lines
[12:08:34] <arrrrrrrrr> depends on how the escape process works
[12:08:51] <dbaupp> kvanb: some don't compile, but others have been recently updated and optimised by TeXitoi
[12:09:08] <eddyb> arrrrrrrrr: almost 20 because of cruft https://github.com/mozilla/rust/blob/master/src/libextra/json.rs#L60-L78
[12:09:31] <arrrrrrrrr> I have it in exactly 20: https://gist.github.com/anonymous/0b59489dd3ed0a0b1758
[12:09:58] <arrrrrrrrr> but I wonder if that is correct
[12:10:10] <Ms2ger> No
[12:10:12] <Ms2ger> It uses C
[12:10:15] <eddyb> arrrrrrrrr: missing break;
[12:10:16] <arrrrrrrrr> hohoho
[12:10:25] <arrrrrrrrr> it's in the macro
[12:10:30] <eddyb> ah nvm
[12:10:34] <Ms2ger> Oh, that's terrible
[12:10:39] <eddyb> it's otherwise correct
[12:10:46] <arrrrrrrrr> I wonder
[12:10:50] <eddyb> arrrrrrrrr: the macro doesn't need the ; at the end
[12:11:03] <arrrrrrrrr> I feel better with the ;
[12:11:07] <eddyb> you actually want do {...} while(0) for these macros
[12:11:16] <arrrrrrrrr> yeah, not in this tiny progam
[12:11:22] <arrrrrrrrr> *program
[12:12:08] <arrrrrrrrr> I still feel like "\\u1234" shouldn't get extra escaping but whatever
[12:12:09] <eddyb> https://github.com/mozilla/rust/blob/master/src/libextra/json.rs#L80-L84 is there no "from_elem" equivalent for strings?
[12:12:20] <eddyb> arrrrrrrrr: then you're being silly
[12:12:45] <eddyb> without ecaping you don't get back what you put in after encoding and decoding
[12:12:50] <arrrrrrrrr> JSON.org says that "\\u1234" doesn't need extra escaping
[12:12:57] <eddyb> no
[12:13:05] <arrrrrrrrr> yes :)
[12:13:12] <eddyb> U+1234 doesn't need extra escaping
[12:13:27] <eddyb> \ always needs escaping on its own
[12:13:30] *** Quits: dredozubov (dredozubov@2F14E2C1.F70E5FA9.F63E14E8.IP) (Input/output error)
[12:13:56] <kvanb> dbaupp: cheers
[12:14:01] <arrrrrrrrr> eddyb: http://i.imgur.com/aCDX6rU.png
[12:14:05] <eddyb> U+0000 needs escaping, which means it's 6 bytes instead of 1
[12:14:50] <eddyb> arrrrrrrrr: "\\u1234" is not an unicode character
[12:15:02] <eddyb> it's a backslash, which is "except"
[12:15:03] <arrrrrrrrr> I'm not talking about unicode characters
[12:15:13] <eddyb> arrrrrrrrr: also, that's grammar, not escaping rules
[12:15:56] <arrrrrrrrr> JSON.stringify("\t") == ""\t""
[12:16:03] <arrrrrrrrr> there is an unescaped \ there
[12:16:20] <eddyb> there is no backslash in your input
[12:16:33] <Ms2ger> JSON.stringify("\t") ==  JSON.stringify("	")
[12:16:34] *** Quits: autra (augustin@moz-BE76895F.fbx.proxad.net) (Ping timeout)
[12:16:51] <arrrrrrrrr> SON.stringify("\\u1111") == ""\\u1111""
[12:16:59] <eddyb> or String.fromCharCode(whatever_the_heck_it_is)
[12:17:13] <eddyb> arrrrrrrrr: the result isn't a JS string
[12:17:26] <eddyb> arrrrrrrrr: it's actually a printed string
[12:17:35] <arrrrrrrrr> you're correct
[12:17:37] <eddyb> that's why the quotes aren't escaped, etc.
[12:17:54] <arrrrrrrrr> then chromium is wrong too
[12:17:58] <eddyb> it isn't
[12:18:02] <eddyb> you're reading it wrong
[12:18:12] <eddyb> use comparisons, not the visible output
[12:18:47] <eddyb> JSON.stringify('\\u1234') === '"\\\\u1234"'
[12:18:48] <eddyb> true
[12:19:06] <eddyb> JSON.stringify('\u1234') === '"\u1234"'
[12:19:36] <eddyb> JSON.stringify('\u0000') === '"\\u0000"'
[12:19:38] <eddyb> true
[12:19:49] <arrrrrrrrr> The tab control character isn't allowed. That's why I'm saying that by "\t" json.org means a printed string
[12:20:05] <arrrrrrrrr> same for "\u four-hex-digits"
[12:20:34] <eddyb> arrrrrrrrr: what you're talking about is calling "injection"
[12:20:39] <eddyb> and related businesses
[12:20:46] <eddyb> remember how I mentioned "PHP" at first?
[12:20:54] <arrrrrrrrr> no
[12:21:08] *** Joins: sigma (sigma@moz-6E1846A2.range86-184.btcentralplus.com)
[12:21:27] <eddyb> what you're saying is the kind of despicable shit PHP does/causes and it gets hated for it
[12:21:44] <eddyb> escaping needs to always happen. that's it
[12:22:15] <eddyb> if you need to send a special character, then input it or generate it with something
[12:22:51] <eddyb> node -pe '"\u1234"' # in a console is all it takes
[12:23:04] <eddyb> lol, is it a house? ሴ
[12:23:15] <arrrrrrrrr> I think we can reduce it to the following question: According to the picture I posted above: Is the tab control character allowed?
[12:23:19] <Ms2ger> ETHIOPIC SYLLABLE SEE
[12:23:46] <eddyb> arrrrrrrrr: that's about what's allowed in a JSON *document*, it's orthogonal to escaping
[12:24:22] <eddyb> the two character sequence \t is allowed inside a string embedded in a JSON document, and it refers to the tab control character
[12:24:35] <eddyb> the tab control character itself isn't allowed to appear
[12:25:36] *** Quits: kvanb (kvanb@moz-F4E1EC66.vic.bigpond.net.au) (Quit: kvanb)
[12:29:47] *** Joins: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net)
[12:30:57] *** Joins: sankha93 (Instantbir@AEE8596F.698FEB19.EFB84E89.IP)
[12:32:11] *** Joins: jviereck (Adium@moz-2B2BBCFE.dip0.t-ipconnect.de)
[12:33:09] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Ping timeout)
[12:33:09] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Connection reset by peer)
[12:33:14] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[12:33:59] <arrrrrrrrr> now that I've looked at the pretty images on json.org I realize that you're absolutely right. Sorry for wasting everybody's time.
[12:34:45] <eddyb> arrrrrrrrr: the upside is that now you won't do the wrong thing :P
[12:35:32] <arrrrrrrrr> That would have been too much work anyway. I'd rather spend my time arguing on IRC :)
[12:35:37] *** Quits: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net) (Client exited)
[12:35:43] <eddyb> things like this can save millions of dollars (or lives) in the future, I'm glad I could help :)
[12:37:19] *** Joins: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net)
[12:38:03] *** Joins: spott (spott@moz-82AAF168.hsd1.co.comcast.net)
[12:39:47] *** Quits: spott (spott@moz-82AAF168.hsd1.co.comcast.net) (Ping timeout)
[12:39:49] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[12:40:10] *** Quits: a_m0d|home (a_m0d@moz-4A42350.acanac.net) (Quit: Leaving.)
[12:41:51] *** Quits: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net) (Ping timeout)
[12:42:12] *** Quits: kzzch (kzzch@moz-15D2697.public.wayport.net) (Ping timeout)
[12:43:19] *** jorendorff_away is now known as jorendorff
[12:44:03] <ChrisMorgan> "Someone on the Internet is wrong!"
[12:44:28] <ezyang> "oh no!" 
[12:44:34] <arrrrrrrrr> json.org says that no control characters are allowed. What about "\v" for example? The rust escaper doesn't seem to handle the escape characters which don't have an explicit alternative. By explicit alternative I mean the ones that are listed on json.org.
[12:45:00] <eddyb> arrrrrrrrr: I guess only those mentioned in the grammar are considered "control characters"
[12:45:09] <eddyb> this sounds like fun http://www.extremetech.com/extreme/173108-researchers-crack-the-worlds-toughest-encryption-by-listening-to-the-tiny-sounds-made-by-your-computers-cpu
[12:45:29] <arrrrrrrrr> fwiw: JSON.stringify("\v") = "\u000b"
[12:45:37] * Ms2ger touches eddyb's laptop
[12:45:54] *** Joins: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net)
[12:46:15] <pnkfelix> arrrrrrrrr: or rather "\"\\u000b\""
[12:46:21] <arrrrrrrrr> yes :)
[12:46:38] <ChrisMorgan> There, I've now answered everything on http://www.reddit.com/r/rust/comments/1t87a3/a_broad_vision_for_the_rust_docs_stack/ - more questions or concerns please?
[12:47:57] *** Joins: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net)
[12:48:08] *** Joins: spott (spott@moz-82AAF168.hsd1.co.comcast.net)
[12:48:30] *** Joins: dredozubov (dredozubov@2F14E2C1.F70E5FA9.F63E14E8.IP)
[12:49:48] *** Quits: spott (spott@moz-82AAF168.hsd1.co.comcast.net) (Ping timeout)
[12:53:13] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[12:53:32] *** Joins: Cromulent|2 (Cromulent@moz-C2470BE2.cable.virginm.net)
[12:54:18] *** Joins: Cromulent|3 (Cromulent@moz-C2470BE2.cable.virginm.net)
[12:54:51] *** Quits: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net) (Ping timeout)
[12:55:17] *** Quits: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net) (Connection reset by peer)
[12:55:28] *** Quits: Cromulent|2 (Cromulent@moz-C2470BE2.cable.virginm.net) (Ping timeout)
[12:57:17] *** Quits: pao (pao@moz-AF905E87.fbx.proxad.net) (Quit: pao)
[13:01:18] *** Joins: autra (augustin@moz-BE76895F.fbx.proxad.net)
[13:04:48] *** Joins: zeittunnel (benjamin@moz-36A24513.dip0.t-ipconnect.de)
[13:13:37] *** Joins: vmx (vmx@moz-915331E5.pools.arcor-ip.net)
[13:16:08] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[13:17:52] *** Quits: refold (gman@moz-42D68426.a258.priv.bahnhof.se) (Quit: leaving)
[13:22:15] <ChrisMorgan> bstrie: once I figured it out, I liked your alteration of the tab name on /r/rust/new/.
[13:22:32] <bstrie> ChrisMorgan: thank SiegeLord!
[13:25:16] <kimundi> Let me guess - it's "box" now? :P
[13:25:29] <ChrisMorgan> Correct.
[13:26:19] *** Quits: ross (ross@moz-5EA04060.br.br.cox.net) (Quit: )
[13:26:21] <kimundi> haha :)
[13:26:25] *** Joins: skade (skade@moz-AC7A4F7F.sys11.net)
[13:27:00] <ChrisMorgan> bstrie: can the number of tabs change? I mean largely, can you do it for other pages with the likes of ``.listing-page .tabmenu > :nth-child(2)``?
[13:27:36] *** Quits: bheylin (textual@moz-8255E94E.adsl.online.nl) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[13:27:52] <bstrie> ChrisMorgan: yeah, I think the number of tabs can change in weird circumstances
[13:28:09] <bstrie> it would probably work in general
[13:28:15] <bstrie> but I'm content with it just being an easter egg :P
[13:28:27] <bstrie> not like it will make any sense to anyone who hasn't lived through this change
[13:30:12] <dbaupp> haha
[13:34:46] *** Quits: zxcdw (r-a@ACF33729.B543C4DE.3933CC16.IP) (Connection reset by peer)
[13:36:17] *** jorendorff is now known as jorendorff_away
[13:38:39] *** Joins: spott (spott@moz-82AAF168.hsd1.co.comcast.net)
[13:40:24] *** Quits: spott (spott@moz-82AAF168.hsd1.co.comcast.net) (Ping timeout)
[13:41:14] *** Joins: sk (sk@9E6B574B.EB2AA036.2CAF0D3B.IP)
[13:42:07] *** Quits: Cromulent|3 (Cromulent@moz-C2470BE2.cable.virginm.net) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[13:43:33] *** Quits: autra (augustin@moz-BE76895F.fbx.proxad.net) (Connection reset by peer)
[13:43:40] *** Joins: autra (augustin@moz-BE76895F.fbx.proxad.net)
[13:45:43] *** Quits: autra (augustin@moz-BE76895F.fbx.proxad.net) (Ping timeout)
[13:46:48] *** Joins: bheylin (textual@moz-8255E94E.adsl.online.nl)
[13:47:06] *** Joins: jackneill (jackneill@moz-90B27085.pool.digikabel.hu)
[13:47:13] *** Quits: sigma (sigma@moz-6E1846A2.range86-184.btcentralplus.com) (Client exited)
[13:48:03] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[13:50:56] *** Joins: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net)
[13:51:48] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[13:52:36] *** jorendorff_away is now known as jorendorff
[13:52:36] *** Quits: jviereck (Adium@moz-2B2BBCFE.dip0.t-ipconnect.de) (Quit: Leaving.)
[13:53:18] *** jorendorff is now known as jorendorff_away
[13:53:35] *** Joins: jviereck (Adium@moz-2B2BBCFE.dip0.t-ipconnect.de)
[13:54:18] *** Quits: jviereck (Adium@moz-2B2BBCFE.dip0.t-ipconnect.de) (Quit: Leaving.)
[13:54:47] *** jorendorff_away is now known as jorendorff
[13:57:51] *** Quits: jaen (jaen@138A5D71.4C038AE9.C4431F0E.IP) (Ping timeout)
[13:58:17] *** Quits: ricepuddin (graham@moz-7D68765A.cable.virginm.net) (Ping timeout)
[13:59:17] *** Quits: beifeng (Mibbit@284C36E7.3062CEC3.670EEFD.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:00:58] *** Quits: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP) (Ping timeout)
[14:01:03] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[14:01:54] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Connection reset by peer)
[14:01:55] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[14:03:02] *** Joins: george (Mibbit@moz-CAB3A309.netcologne.de)
[14:05:16] *** Joins: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP)
[14:07:12] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[14:10:25] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Input/output error)
[14:13:03] *** Joins: ricepuddin (graham@moz-7D68765A.cable.virginm.net)
[14:13:33] <george> hi
[14:13:56] <ChrisMorgan> Hi, george! Anything we can help you with?
[14:13:59] <george> i'm coming from go and a friend told me about rust
[14:14:08] <george> the website seems really promising
[14:14:21] <george> a low-level language with emphasis on concurrency
[14:14:34] <cmr> the emphasis is more on asfety than concurrency really.
[14:14:40] <george> is rust really "compatible" to c++ ?
[14:14:44] <cmr> concurrency is just a nice benefit from safety :)
[14:14:50] <Ms2ger> Concurrency-safety ;)
[14:14:53] <cmr> What do you mean by compatible?
[14:15:02] <Ms2ger> You can quite easily call into C
[14:15:07] <Ms2ger> C++, not so much
[14:15:11] *** Quits: ricepuddin (graham@moz-7D68765A.cable.virginm.net) (Quit: Leaving)
[14:15:15] *** Quits: george (Mibbit@moz-CAB3A309.netcologne.de) (Quit: http://www.mibbit.com ajax IRC Client)
[14:15:21] <eddyb> haha
[14:15:30] <ChrisMorgan> Scared off ☹
[14:15:32] <Ms2ger> Well, that's not true
[14:15:47] *** Joins: george (Mibbit@moz-CAB3A309.netcologne.de)
[14:15:48] <cmr> george: are you refering to the compilation model line? That's not refering to FFI or anything else, just how programs are compiled.
[14:15:50] <arrrrrrrrr> Good concurrency is a benifity from safety?
[14:15:59] <eddyb> I was going to mention how we want to use clang in the future to interface better with C/C++/Obj-C(++)
[14:16:01] <george> sorry, i just accidentally reloaded the page
[14:16:03] <arrrrrrrrr> Isn't it more like: Good concurrency is a requirement?
[14:16:18] <george> the website says that the compilation model is "ahead of time, C/C++ compatible"
[14:16:21] <cmr> arrrrrrrrr: well I mean you can't have good concurrency without memory safety.
[14:16:30] <cmr> arrrrrrrrr: race conditions are no good
[14:16:36] <Ms2ger> I'm not sure what that means :)
[14:16:38] <george> how does this c++ compatibility look ?
[14:16:44] <ChrisMorgan> Go used a race detector. In safe Rust code you simply can't have data race.
[14:17:01] <george> will i be able to call c++ functions from rust ?
[14:17:03] <cmr> george: you compile to an object file. don't read much into that line.
[14:17:06] <cmr> george: no
[14:17:09] <Ms2ger> Yes
[14:17:12] <arrrrrrrrr> Maybe
[14:17:15] <cmr> (well, not with extern "C" on both sides)
[14:17:17] <george> how does the interop look then ?
[14:17:20] <cmr> *without
[14:17:27] <cmr> george: it doesn't say interop!
[14:17:41] <eddyb> george: "compatible" doesn't mean "interop" - it's probably bad phrasing anyway
[14:17:47] <Ms2ger> Right, with extern C, calling into C++ is pretty easy
[14:17:51] <george> cmr: oh, but what does it mean ?
[14:18:02] <eddyb> the compilation model is similar
[14:18:09] <eddyb> (I guess)
[14:18:14] <george> let's say im developing a small hobby project in c++
[14:18:25] <george> and would like to run a part of the algorithm in parallel
[14:18:34] <eddyb> you can link rust and C/C++ in the same executable
[14:18:34] <george> with c++ that can cause lots of headache
[14:18:40] *** Quits: skade (skade@moz-AC7A4F7F.sys11.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[14:18:52] * ChrisMorgan would probably recommend OpenMP over Rust for such a case, at present
[14:19:04] <george> eddyb, but that means that i can call c++ functions from rust ? 
[14:19:04] <eddyb> or OpenCL etc.
[14:19:12] <kimundi> george: I'm not sure myself, but I think it means that you can take a compiled C++ object file, and a compiled rust object file, and link them together - that doesn't mean the rust code can directly call C++ methods though
[14:19:16] <cmr> george: if you use extern "C" yes
[14:19:27] <eddyb> george: you have to wrap them in extern "C" and provide a C-like API right now
[14:19:33] <george> cmr: what is extern "C" ?
[14:19:44] <george> some foreign function interface ?
[14:19:52] <george> im thinking of ctypes for python right now
[14:20:03] <eddyb> george: in C++, extern "C" can be used to define a C++ function that's callable from C code
[14:20:07] <kimundi> george: YOu need to expose your C++ library as a C library, and that can be used by rust
[14:20:19] <eddyb> george: i.e. it doesn't use name mangling and a few other things
[14:20:30] <george> hm, sounds uncomfortable
[14:20:34] <george> and the other way round ?
[14:20:41] <george> if i need to call rust from c++ ?
[14:20:46] <eddyb> you expose a C API in Rust code
[14:21:04] <george> ok
[14:21:05] <eddyb> extern "C" fn foobar(...) {...}
[14:21:19] <kimundi> A C API is pretty much the de facto common ground for language interop
[14:21:19] <george> i guess i could get this to work for my personal project
[14:21:21] <eddyb> C++ has complexities for any FFI - we can do better once we start using clang for that
[14:21:28] *** Joins: amey (user@8961CBCE.9E7B6A84.D2D1FAF0.IP)
[14:21:37] <george> after all i only need very few functions to be exposed
[14:21:50] <george> what about c++ frameworks ?
[14:22:02] <george> could i use qt from rust ?
[14:22:09] <cmr> george: we don't have any C++ FFI.
[14:22:09] <ChrisMorgan> george: bear in mind that Rust is not a stable language yet—if you work in Rust, you *will* have pain with needing to update code to cope with language changes, poor/incorrect documentation, and other things like that. (Rust is not for the faint of heart yet, but if you can cope with it, it's great fun. And for some sorts of parallelism and safety it is still the best choice despite its instability.)
[14:22:23] <kimundi> Same situation : If there is a C wrapper for QT yes, if not no, unless you write one yourself
[14:22:24] <cmr> george: so you can only call functions with a C ABI.
[14:22:43] <george> cmr: then the info on the website is just misleading ?
[14:22:54] <cmr> george: No! It's only talking about the compilation mode.
[14:22:57] <cmr> Which is unrelated to FFI
[14:22:58] <eddyb> we did say the phrasing is unfortunate :P
[14:23:04] <george> oh, sorry
[14:23:06] <george> i finally get it
[14:23:08] <cmr> You can still call C++ code from Rust code. Using the C ABI.
[14:23:20] <kimundi> And that is the compability it talks about
[14:23:21] <eddyb> where is steve? I've heard he likes fixing things :P
[14:23:22] <george> i guess ill read up on rust
[14:23:23] <cmr> (And the other way around)
[14:23:30] <george> there's a tutorial on the website
[14:23:33] <george> is that good ?
[14:23:41] <george> or would you recommend something else ?
[14:23:41] <cmr> it's ok.
[14:23:50] <dbaupp> it's improved lately
[14:23:54] <eddyb> the master one is decent, but not the best in terms of going through the language
[14:23:56] <kimundi> I think it would even be possible to get LTO with a rust <-> C <-> C++ construct ?
[14:23:57] <cmr> it and rust for rubyists are the good beginner documentation.
[14:24:12] <eddyb> cmr: but the latter is... kinda outdated
[14:24:14] <george> hm, i got to admit i never really liked ruby
[14:24:25] <cmr> that's fine, it's unrelated to ruby
[14:24:29] <ChrisMorgan> With a C++ background you may be better fitted to cope with the tutorial, such as it is, than most.
[14:24:35] <george> guess ill stick with the one on the website
[14:24:43] <eddyb> there's someone writing a supposedly better tutorial, let me find a link
[14:25:07] *** Joins: rootnode (rootnode@moz-7FAB5E8.ip1.george24.com)
[14:25:11] <george> a few minutes ago someone mentioned OpenCL
[14:25:16] <cmr> eddyb: it's not better yet
[14:25:28] <ChrisMorgan> george: yesterday steveklabnik said about Rust for Rubyists that it was more the fact that they both started with "Ru" that persuaded him to use that name than any things specific to Ruby in it!
[14:25:36] <eddyb> cmr: just something to keep an eye on - http://adridu59.github.io/rust-tuts/
[14:25:48] <cmr> eddyb: I know, I'm writing a chapter for it :p
[14:26:01] <george> eddyb, cmr : hey that looks great
[14:26:02] <george> thanks
[14:26:13] <eddyb> http://adridu59.github.io/rust-tuts/tutorial/ch-03.html that's how far it gets (spoilers!)
[14:26:21] *** Quits: buster (buster@3A0EAB5F.9C69795C.ACFE537F.IP) (Client exited)
[14:26:37] *** Joins: alonlevy (alon@C4E16506.66334A3F.AB64B967.IP)
[14:26:42] <eddyb> george: I mentioned OpenCL. if you want to drain every bit of processing power, you might want to look at it
[14:26:42] *** Joins: buster (buster@3A0EAB5F.9C69795C.ACFE537F.IP)
[14:26:43] *** Joins: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com)
[14:26:56] <Ms2ger> "Notice the joker `_`"
[14:27:04] <Ms2ger> Is that what's it called in English?
[14:27:07] <george> eddyb, that's going to be a course next year
[14:27:15] <bstrie> Ms2ger: I believe that is called an underscore
[14:27:22] <george> is there a good interface for OpenCL in rust ?
[14:27:30] <Ms2ger> I mean, is "joker" used in that sense
[14:27:32] * ChrisMorgan hasn't ever heard it called a joker
[14:27:37] <Ms2ger> Also
[14:27:38] <Ms2ger> fn abs(x: int) -> uint {
[14:27:38] <Ms2ger>     if x > 0 { x }
[14:27:38] <Ms2ger>     -x
[14:27:38] <Ms2ger> }
[14:27:42] <bstrie> I'm clueless. what's a joker here?
[14:27:56] <ChrisMorgan> bstrie: http://adridu59.github.io/rust-tuts/tutorial/ch-03.html
[14:28:10] <Ms2ger> In dutch, a joker is a playing card that acts like a wildcard in some games
[14:28:12] <Ms2ger> Dutch*
[14:28:27] <eddyb> george: looks like Luqman started to work on one https://github.com/luqmana/rust-opencl
[14:28:50] <Ms2ger> So is it just me or is that abs broken?
[14:28:52] *** Joins: skade (skade@moz-AC7A4F7F.sys11.net)
[14:28:53] <bstrie> Ms2ger: that usage of "joker" is a bit more obscure. "wildcard" would probably work better there, if that's the intended meaning
[14:29:02] <eddyb> Ms2ger: it's not you, it's missing an else
[14:29:08] <dbaupp> Ms2ger: yes, that's broken
[14:29:37] <bstrie> no, it's not broken. it returns a uint, which must always be positive! :)
[14:30:04] <eddyb> george: actually, it's not that new. the tests look interesting https://github.com/luqmana/rust-opencl/blob/master/src/OpenCL/test.rs#L533
[14:30:05] <bstrie> (you'll need a cast in there too)
[14:30:10] <dbaupp> bstrie: the syntax is wrong
[14:30:20] <arrrrrrrrr> rusti: let x = -1; if x > 0 {x} -x
[14:30:28] *** Quits: bheylin (textual@moz-8255E94E.adsl.online.nl) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[14:30:32] <bstrie> rusti isn't here right now
[14:30:35] <bstrie> rusti's gone
[14:30:38] <arrrrrrrrr> :(((((
[14:32:41] <arrrrrrrrr> doesn't work :p
[14:33:08] <arrrrrrrrr> needs an else path or a return in the branch
[14:33:18] <arrrrrrrrr> and rustc doesn't know that -x >= 0 
[14:33:19] *** Joins: bheylin (textual@moz-8255E94E.adsl.online.nl)
[14:35:11] <amey> klutzy: Are you still around?
[14:35:27] <klutzy> amey: yep
[14:35:35] <amey> klutzy: http://pastebin.com/C8nX0F8H
[14:35:43] <amey> klutzy: Sorry for the delay
[14:36:17] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Ping timeout)
[14:36:19] <klutzy> amey: thanks for log ;)
[14:36:35] <klutzy> ah, I think I know what this is
[14:37:27] <amey> klutzy: Oh, do you also happen to know the fix/workaround? :)
[14:37:27] *** Quits: george (Mibbit@moz-CAB3A309.netcologne.de) (Quit: http://www.mibbit.com ajax IRC Client)
[14:37:30] *** Joins: hjr3 (hradtke@62E115A3.E5AD9C7C.70288106.IP)
[14:37:43] <ChrisMorgan> r? https://github.com/mozilla/rust/pull/11072 with ctags regex improvements (there, you made me do it, ezyang!)
[14:38:15] <klutzy> amey: what is found if you run `ls /mingw/bin/*pthread*`? it should show libpthread-2.dll
[14:38:27] <amey> ls /mingw
[14:38:27] <dbaupp> ChrisMorgan: that does seem like something that's fairly significant
[14:38:33] <amey> oops, sorry, wrong window
[14:39:27] *** Joins: spott (spott@moz-82AAF168.hsd1.co.comcast.net)
[14:39:38] *** Joins: canhtak (canhtak@moz-258236CD.wl.t.ulaval.ca)
[14:39:39] <amey> klutzy: Yep, it shows libpthread-2, pthreadGC2 and pthreadGCE2 DLLs
[14:40:18] <ezyang> ChrisMorgan: hooray 
[14:40:34] *** Joins: exobit_ (textual@moz-E06F46F0.corp.bitshelter.com)
[14:40:50] <klutzy> amey: hmm, then it's strange because -lpthread should use one of them
[14:41:08] *** Quits: bheylin (textual@moz-8255E94E.adsl.online.nl) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[14:41:09] *** Quits: spott (spott@moz-82AAF168.hsd1.co.comcast.net) (Ping timeout)
[14:41:15] * ChrisMorgan says, once again, that bors needs to be taught that some PRs don't need tests to be run
[14:41:42] <Ms2ger> Dunno
[14:41:44] *** Quits: hjr3 (hradtke@62E115A3.E5AD9C7C.70288106.IP) (Ping timeout)
[14:42:01] <cmr> ChrisMorgan: you know, I've been tempted to push the big fat merge button a few times.
[14:42:01] <amey> klutzy: But that path doesn't seem to be one of the "-L" flags passed to g++
[14:42:08] <cmr> but I'm afraid of what it will do to bors.
[14:42:19] <Ms2ger> cmr, it will rise up against you
[14:42:26] <Ms2ger> And you will never receive r+ again
[14:42:38] <dbaupp> ChrisMorgan: what happens when someone screws up, and misses (for example) a binary checked in to the PR?
[14:42:40] * Ms2ger cackles
[14:42:42] <klutzy> amey: hmm, could you copy libpthread-2.dll into /path-to-rust-build/i686-pc-mingw32/stage0/bin?
[14:42:57] * ChrisMorgan thinks bors should cope so long as it's done in the five minute window, but some humans might not be so happy
[14:42:59] <amey> klutzy: That would fix it, but that's not a solution :|
[14:43:01] <klutzy> the directory contains libstdc++-6.dll and some other dlls
[14:43:03] <dbaupp> ChrisMorgan: it seems a little silly to risk breaking master for the sake of a few CPU hours atm.
[14:43:03] <amey> klutzy: I'll try it nonetheless
[14:43:35] <ChrisMorgan> dbaupp: misses a binary checked in to the PR? Is bors going to catch that?
[14:43:47] <klutzy> amey: the issue is: recently pthread dependency is nuked therefore we stopped shipping it with stage0 snapshot
[14:43:48] <dbaupp> ChrisMorgan: in theory make tidy checks that now, yes
[14:44:01] <amey> klutzy: That folder already have a libpthread-2.dll
[14:44:10] <amey> klutzy: *already has
[14:44:13] <klutzy> amey: but the latest snapshot itself depends on pthread because it's prepared before it 
[14:44:20] <klutzy> amey: uh.. then it's really strange
[14:44:35] <ChrisMorgan> Really, I mean more things like bors combining multiple ones together when it can detect that one doesn't need testing.
[14:44:44] *** Joins: Kruppe (user@moz-EE1E894A.home3.cgocable.net)
[14:45:20] <amey> klutzy: but that folder's also not passed to "-L"
[14:45:41] <amey> klutzy: What is passed is /path-to-rust-build/i686-pc-mingw32/stage0/bin/rustc/i686-pc-mingw32/bin
[14:45:50] *** Joins: eholk_ (eholk@moz-BA312F07.crest.iu.edu)
[14:45:52] <amey> klutzy: According to the build log
[14:45:57] <amey> klutzy: Guess I'll try copying it there
[14:46:06] *** Quits: skade (skade@moz-AC7A4F7F.sys11.net) (Ping timeout)
[14:46:20] <klutzy> amey: I hope it would save us
[14:46:26] *** Quits: Kruppe (user@moz-EE1E894A.home3.cgocable.net) (Ping timeout)
[14:46:36] <klutzy> but anyway it's strange that librustuv wants to link to pthread
[14:46:42] *** Joins: hjr3 (hradtke@817E9B7E.C3D4F2AA.56F40276.IP)
[14:46:44] *** Joins: Kruppe (user@moz-EE1E894A.home3.cgocable.net)
[14:46:59] <amey> klutzy: Nope, still doesn't work :/
[14:47:24] *** eholk is now known as IRCMonkey59555
[14:47:49] <amey> klutzy: But wait, aren't the paths all wrong?
[14:47:50] <ezyang> ChrisMorgan: Hm, my ctags file still has lots of spurious resutls for some identifiers 
[14:48:15] <amey> klutzy: Shouldn't it be "-L/c/Users/whatever" instead of "-LC:\Users\whatever"?
[14:48:20] <ChrisMorgan> ezyang: you're using `make TAGS.vi` to generate the file?
[14:48:29] <ezyang> yep 
[14:48:36] <ChrisMorgan> (Good, just wanted to verify it.)
[14:48:46] <ChrisMorgan> What sorts of things are you seeing that you shouldn't be?
[14:48:49] *** eholk_ is now known as eholk
[14:49:27] <klutzy> amey: I'm not sure. I think -lpthread should work without explicit -L
[14:49:31] *** Joins: spott (spott@moz-82AAF168.hsd1.co.comcast.net)
[14:50:03] <ezyang> for example, there's a tag for 256, because in a comment: since 255*2+1 == 255 (mod 256) 
[14:50:25] <ezyang> of course, that doesn't impact usability; let me find me the identifier that was giving me grief 
[14:50:28] <klutzy> amey: what's the result of `echo "int main(){}" > /tmp/a.cpp && g++ /tmp/a.cpp -lpthread`?
[14:50:28] *** Joins: skade (skade@30BBD5E6.505237C9.CAE22B62.IP)
[14:51:17] <ezyang> ChrisMorgan: ok, great example: the tags for item 
[14:51:17] *** Quits: spott (spott@moz-82AAF168.hsd1.co.comcast.net) (Ping timeout)
[14:51:30] <ezyang> picks up stuff like: "// It seems strange to allow a move out of a static item," 
[14:52:24] <ChrisMorgan> ezyang: what version of ctags are you using?
[14:52:57] <ezyang> Exuberant Ctags 5.9~svn20110310 
[14:52:59] <amey> klutzy: cannot find -lpthread
[14:53:02] * ChrisMorgan is using 5.9~svn20110310 with +wildcards, +regex
[14:53:11] *** Joins: bjustin (bjustin@moz-8FC28563.sierrabravo.net)
[14:53:14] <ezyang> ditto 
[14:53:23] <ChrisMorgan> ezyang: 'cos at present, I'm at norepro.
[14:54:19] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Connection reset by peer)
[14:54:53] <bstrie> wycats_: haven't heard from you in a while, still holding up?
[14:55:01] *** Quits: hjr3 (hradtke@817E9B7E.C3D4F2AA.56F40276.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[14:55:02] <ezyang> ctags is being called as 'ctags -f TAGS.vi --options="/home/ezyang/Dev/rust/src/etc/ctags.rust" --languages=-javascript --recurse' 
[14:55:23] <ezyang> (I don't have your most recent PR, looking at the regex tweaks it seems unrelated) 
[14:55:33] <klutzy> amey: eh... it seems that something in mingw is broken
[14:55:39] <ChrisMorgan> ezyang: oh! It certainly is related.
[14:55:44] <Ms2ger> Just something? :)
[14:56:00] <amey> klutzy: ok :(
[14:56:16] <ChrisMorgan> ezyang: it didn't have ^ anchoring it to the start of a line, my changes do.
[14:56:22] <klutzy> Ms2ger: or something else
[14:56:32] *** Quits: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net) (Input/output error)
[14:56:50] <ezyang> ah-ha! 
[14:57:03] <ezyang> you should amend your commit message 
[14:57:10] <klutzy> amey: maybe it's due to some pthread package downgrades (we don't need to it), but not sure.
[14:57:22] *** Joins: alan_andrade (alan_andra@8AB4864E.75F2E118.B7838CA6.IP)
[14:57:40] <klutzy> there's even chances that mingw team upgraded something into broken one :(
[14:57:56] <klutzy> I have to test with latest one
[14:58:21] <ChrisMorgan> ezyang: actually I was going back to fix a mistake with it where I was using * rather than + for whitespace after the keyword, so I'll update the message too. I forgot I'd fixed that up too and didn't read the diff fully…
[14:58:38] * ezyang neither 
[14:58:52] <ChrisMorgan> I guess that means that my change actually *wasn't* to make it find public tags but rather to remove a large number of spurious tags.
[14:59:01] <ChrisMorgan> That's what happens when you make the change and submit it several weeks apart.
[14:59:25] <eddyb> my kate syntax file updates are just sitting here
[15:00:29] <alan_andrade> hey @ChrisMorgan, I saw the slides you posted.
[15:00:47] <alan_andrade> I want to contribute somehow to Rust and I feel I could help with documentation.
[15:01:01] <alan_andrade> If anything comes up and you need help, please let me know.
[15:01:39] * ChrisMorgan isn't sure at present how significant a role he is going to play in the documentation
[15:02:22] *** Joins: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net)
[15:03:24] <ChrisMorgan> alan_andrade: brson is seeking someone to contract to control the documentation—having one person in charge of setting it all right is better than design-by-committee.
[15:04:06] <alan_andrade> Should I talk to him instead ?
[15:04:47] <alan_andrade> I agree that there should be a head
[15:04:53] <ChrisMorgan> I don't know what you had in mind or what you would like to do with it, so I can't advise on that point.
[15:05:01] <alan_andrade> got it.
[15:05:54] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[15:05:56] <Ms2ger> alan_andrade, okay, you're hired :)
[15:05:59] <alan_andrade> Really what I have in mind is to give back.
[15:06:06] <ChrisMorgan> cmr: I changed https://github.com/mozilla/rust/pull/11072, r? again
[15:06:08] <alan_andrade> This community has been amazing 
[15:06:37] <ChrisMorgan> ezyang: r+ only has meaning to bors when bestowed by someone with authority, and it has to go on the commit rather than the PR
[15:07:04] <alan_andrade> @Ms2ger haha, what do you mean ?
[15:08:01] <alan_andrade> (were you just playing?)
[15:08:13] <alan_andrade> :)
[15:09:13] <eddyb> could we safely create a Port/Chan pair between processes?
[15:09:47] <eddyb> I'm thinking of forking, but not sure how useful would it be
[15:10:11] <cmr> eddyb: using pipes, sure.
[15:10:47] <eddyb> cmr: if it's arbitrary, it's not safe anymore
[15:10:59] <eddyb> you can't just send pointers
[15:11:14] <cmr> eh? extra::serialize
[15:11:18] <cmr> flatpipes, even.
[15:11:23] <cmr> although I think he killed flatpipes with the rewrite
[15:11:48] <eddyb> I guess you could restrict it to Pod and/or implement things like ~[T].... nevermind I'm probably reinventing serialize
[15:12:39] *** Quits: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP) (Ping timeout)
[15:12:58] <eddyb> what happens if you serialize an enum on one side and send it to the other side where the enum definition is outdated? will the deserialization process transparently fail?
[15:13:14] <eddyb> why am I even asking these questions? of course it will. it's all nice and pretty and working
[15:13:40] <cmr> no, actually, I don't think it will.
[15:14:14] <cmr> it /might/
[15:14:18] <cmr> but probably not
[15:14:26] <cmr> depends on the encoder/decoder
[15:14:38] <eddyb> eh, that can be fixed
[15:14:43] <cmr> since json uses names it will be fine.
[15:15:04] <cmr> using something real like capnp or protobufs is saner anyway
[15:15:14] <eddyb> cmr: to be picky now, it should work better than https://github.com/pcmattman/pedigree/commit/1a176f3b857d961475139406f8a98c9ca800d74e#diff-54b952086c30cefc71c000113f14e8d2R265
[15:15:40] *** Joins: amro (quassel@CC16DC52.8AAAF769.FAAB0799.IP)
[15:15:42] *** Joins: sigma (sigma@moz-6E1846A2.range86-184.btcentralplus.com)
[15:16:18] <Ms2ger> alan_andrade, just joking
[15:16:30] *** Quits: sigma (sigma@moz-6E1846A2.range86-184.btcentralplus.com) (Client exited)
[15:17:42] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[15:17:42] *** ChanServ sets mode: +ao dherman dherman
[15:18:07] *** Quits: Kruppe (user@moz-EE1E894A.home3.cgocable.net) (Ping timeout)
[15:19:38] *** Joins: k4nar (quassel@moz-F5EFF779.kimsufi.com)
[15:20:31] *** Quits: alonlevy (alon@C4E16506.66334A3F.AB64B967.IP) (Ping timeout)
[15:21:22] *** Joins: kzzch (kzzch@moz-991A24E8.hsd1.va.comcast.net)
[15:23:07] <cmr> Anyone know where the nice colored logo lives?
[15:23:14] <cmr> preferably as svg?
[15:23:26] <Ms2ger> Coloured?
[15:23:32] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[15:23:36] <cmr> Like the sticker
[15:23:42] <alan_andrade> Chris might know, he used it in the slides.
[15:23:44] <ChrisMorgan> cmr: yes, hang on
[15:23:51] <cmr> <3
[15:23:58] <cmr> I'm going to etch an awesome PCB with the logo
[15:24:11] * Ms2ger realizes he didn't get a sticker
[15:24:13] <Ms2ger> Now I'm sad
[15:24:14] *** Joins: alonlevy (alon@C4E16506.66334A3F.AB64B967.IP)
[15:24:26] <ChrisMorgan> cmr: https://www.mozilla.org/en-US/styleguide/identity/mozilla/innovations/
[15:24:51] <ChrisMorgan> Also https://github.com/graydon/rust-www/tree/gh-pages/logos
[15:25:07] <ChrisMorgan> (https://github.com/graydon/rust-www/blob/gh-pages/logos/rust-logo-blk.svg is just the outline.)
[15:25:13] <cmr> oh, nice.
[15:25:18] <cmr> thanks!
[15:25:28] <Ms2ger> Firebug is an innovation?
[15:25:35] *** Quits: Peaker (eyal@AA56D864.38D8CF6B.FC30AC02.IP) (Quit: Leaving)
[15:25:46] <ChrisMorgan> Ms2ger: when it was made, it sure was.
[15:26:32] <ChrisMorgan> It succeeded in commoditising such features as it had. Firebug has thus been a successful project.
[15:26:37] <Ms2ger> Sure
[15:26:52] <Ms2ger> But now?
[15:26:57] <ChrisMorgan> (Not to say that it was the only one that introduced new features or the first such thing—but it was the first *good* such thing.)
[15:27:17] * ChrisMorgan finds himself using the Firefox developer tools more and more and Firebug less and less
[15:27:26] <cmr> yeah, the devtools are great.
[15:27:45] * ChrisMorgan also finds himself up too late at night when he gets distracted with things Rusty; g'night!
[15:28:09] *** Quits: awidegreen (awidegreen@moz-B179C175.dip0.t-ipconnect.de) (Ping timeout)
[15:28:17] *** Joins: lpy (lpy@12172131.F09091A8.1348A864.IP)
[15:28:22] <Ms2ger> Yeah, I stopped using firebug when I heard how terrible it is for JS perf
[15:28:52] <ChrisMorgan> Ms2ger: that's been almost completely fixed now
[15:29:10] <ChrisMorgan> Now it's only a very slight slowdown.
[15:29:37] <Ms2ger> At the time, using it once basically turned off the jits for the lifetime of the browser
[15:29:53] *** Quits: Earnestly (earnest@88884C6.A3735F9C.39C00A7A.IP) (Ping timeout)
[15:30:12] <cmr> not the jits!
[15:30:15] <cmr> oh, the humanity
[15:31:00] <cmr> (sorry)
[15:31:12] <Ms2ger> Does nobody think of the jits?!
[15:31:56] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[15:32:31] *** Quits: zmthy (zmthy@moz-C2881CC3.ecs.vuw.ac.nz) (Quit: leaving)
[15:33:36] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[15:34:30] *** Joins: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net)
[15:34:31] *** Quits: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net) (Client exited)
[15:34:52] *** Joins: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net)
[15:35:00] *** Quits: moostik (Icedove@moz-55271760.w82-123.abo.wanadoo.fr) (Ping timeout)
[15:35:09] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[15:36:55] <rca> Hey, anyone knows if there's a good reason why only two methods have an *_equiv version in std::hash_map, or if it's just because no one has ever needed anything else?
[15:37:09] <rca> like say find_mut_equiv
[15:37:12] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[15:37:13] *** ChanServ sets mode: +ao dherman dherman
[15:37:48] *** Joins: awidegreen (awidegreen@moz-B179C175.dip0.t-ipconnect.de)
[15:38:02] <cmr> rca: yup
[15:38:15] *** Quits: sankha93 (Instantbir@AEE8596F.698FEB19.EFB84E89.IP) (Ping timeout)
[15:38:19] *** Quits: ezyang (ezyang@moz-2957C5C9.mit.edu) (Connection reset by peer)
[15:38:25] *** Joins: moostik (Icedove@moz-654D48E3.w83-202.abo.wanadoo.fr)
[15:38:25] <rca> cmr: to which proposition ? :)
[15:38:34] <cmr> rca: not needed
[15:39:50] <kzzch> would anyone mind taking a quick look at some code i wrote and giving it a quick critique?
[15:40:03] *** Joins: spott (spott@moz-82AAF168.hsd1.co.comcast.net)
[15:40:33] *** Joins: Scriptor (anonymous@moz-E06F46F0.corp.bitshelter.com)
[15:40:39] <cmr> kzzch: go for it
[15:40:44] <kzzch> https://gist.github.com/kzzch/8041184
[15:41:15] <sellout> When compiling rustc for a second time, does it still use the downloaded bootstrapping compiler, or does it use the one that’s now in /usr/local/bin?
[15:41:28] <cmr> sellout: bootstrap
[15:41:44] <cmr> sellout: it has to; stage0 is a fixed point for a given commit.
[15:41:46] *** Quits: spott (spott@moz-82AAF168.hsd1.co.comcast.net) (Ping timeout)
[15:42:09] <cmr> kzzch: what do you think line 40 does?
[15:42:59] <kzzch> lol, i acutally didn't put much thought into it, but i think i was trying to implement the clone trait for a rustbot structure
[15:43:01] <cmr> kzzch: lines 21 and 22 are inefficient. you can use write!(stream, "NICK {}\r\n", self.nick)
[15:43:12] <cmr> kzzch: will avoid allocation intermediate string etc
[15:43:35] <cmr> kzzch: "impl Clone for RustBot { fn clone(&self) -> RustBot { ... } }
[15:43:38] <cmr> "
[15:44:05] <cmr> kzzch: any time you're doing `format!(...).as_bytes()` etc, you're doing it wrong, so to speak.
[15:44:26] <kzzch> cool, that's exactly what i was hoping to learn by asking you guys :D
[15:44:31] *** Quits: sk (sk@9E6B574B.EB2AA036.2CAF0D3B.IP) (Input/output error)
[15:44:46] <kzzch> i'm pretty new to programming in anything more complicated than python or qbasic XD
[15:44:51] <rca> cmr: ok, i need find_mut_equiv (i think, not entirely sure yet). I've implemented it with pieces of find_mut and find_equiv, it works, want a PR? http://pastebin.mozilla.org/3810535
[15:44:54] <cmr> qbasic represent!
[15:44:59] <kzzch> i appreciate your input :D
[15:45:28] <cmr> kzzch: I also think that the BufferedStream should be a priv field on RustBot, and not returned by Listen.
[15:45:31] *** Joins: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net)
[15:45:44] <cmr> or, returned by connect, used by listen.
[15:46:05] <cmr> but not really as big a deal
[15:46:26] <cmr> otherwise looks fine.
[15:46:48] <kzzch> i had it set up like that for like a minute but i was getting confused by pointers and lifetimes a little bit so i ended up doing it like this
[15:47:40] <kzzch> i re-read the rust for rubyists section on pointers, structs, and generics and stuff though so i feel a little better about them now
[15:47:44] <heftig_> the floating point numbers are a subset of the rationals, correct?
[15:47:49] *** heftig_ is now known as heftig
[15:48:34] <cmr> heftig: yes
[15:49:33] <Ms2ger> No
[15:49:39] <cmr> no?
[15:49:43] <Ms2ger> Surely they have infinities?
[15:49:48] <cmr> ah right
[15:49:49] <arrrrrrrrr> :p
[15:49:50] <cmr> and NaN too
[15:49:54] <kzzch> aside from those issues is the organization of everything ok? I'm trying not to write awful code :/
[15:50:13] <cmr> those don't really count though :p
[15:50:20] <cmr> kzzch: yeah, looks fine.
[15:50:25] <heftig> hm, in any case calling them "real" is a misnomer
[15:50:33] <kzzch> cool, thanks again.
[15:50:36] <Ms2ger> Definitely
[15:51:08] <kzzch> you guys make me feel like i should get a rust4lyfe tattoo or something
[15:53:14] *** Joins: awidegre1n (awidegreen@moz-3FEC4684.dip0.t-ipconnect.de)
[15:53:57] *** Quits: awidegreen (awidegreen@moz-B179C175.dip0.t-ipconnect.de) (Ping timeout)
[15:54:31] <arrrrrrrrr> heftig: Who calls them "real"?
[15:55:40] <heftig> FP ⊂ (ℝ̅∪{NaN}); (FP - {NaN,∞,-∞}) ⊂ ℚ
[15:55:43] <heftig> would this be correct?
[15:55:59] <arrrrrrrrr> yes
[15:56:05] <arrrrrrrrr> you forgot infinity 
[15:56:08] <heftig> arrrrrrrrr: some languages do, like Pascal
[15:56:25] <arrrrrrrrr> well, it's not more wrong than calling them rational
[15:56:52] <heftig> i'm not calling them rational, either
[15:56:57] <heftig> arrrrrrrrr:  ℝ̅ includes the infinities
[15:56:57] *** Quits: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[15:57:07] <heftig> your client may not display the combining overline
[15:57:08] <arrrrrrrrr> I can't read that in my terminal
[15:57:14] <arrrrrrrrr> Is there a bar over the R?
[15:57:18] <arrrrrrrrr> ok then
[15:58:08] <Ms2ger> heftig, as sets, yes, but note that the operations don't work like you expect at all :)
[15:59:02] <Ms2ger> (1e240 * 1e-240) * 1e-240 == 1e-240
[15:59:08] <Ms2ger> 1e240 * (1e-240 * 1e-240) == 0
[15:59:47] <heftig> yeah, i don't think it fits any algebraic structure
[16:00:32] <Ms2ger> No reasonable one, at least :)
[16:00:41] <heftig> No useful one
[16:00:58] <Ms2ger> Anyway
[16:01:00] * Ms2ger poofs
[16:01:07] <arrrrrrrrr> It's a magma :)
[16:02:11] <Ms2ger> So no useful one :)
[16:02:33] <arrrrrrrrr> is fpa associative under addition?
[16:03:26] <arrrrrrrrr> or even commutative :o
[16:03:46] *** Joins: sigma (sigma@moz-6E1846A2.range86-184.btcentralplus.com)
[16:03:59] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[16:05:27] <heftig> >> (3+1e200)+(-1e200) == 3+(1e200+(-1e200))
[16:06:15] <heftig> not associative, but I think commutativity holds
[16:06:22] <arrrrrrrrr> looks bad
[16:06:31] <arrrrrrrrr> A magma it is!
[16:06:31] <cmr> floating point is pretty nasty, yeah
[16:07:11] <kzzch> so if i put the BufferedStream in the struct, how do i create the instance of the struct with the stream? can i use an empty or dummy stream then call connect after i instantiate it?
[16:07:15] *** Quits: andreypopp (andreypopp@moz-7261DC60.net) (Client exited)
[16:07:20] <cmr> rca: open a PR, cc @thestinger
[16:07:36] *** Joins: andreypopp (andreypopp@moz-7261DC60.net)
[16:07:46] <cmr> kzzch: the idea is that constructing the RustBot connects.
[16:08:13] *** Joins: maxiepoo (Max@68A63377.C44F889.D279C981.IP)
[16:08:14] *** Quits: alan_andrade (alan_andra@8AB4864E.75F2E118.B7838CA6.IP) (Input/output error)
[16:08:20] <cmr> you could use an Option if you really care about having a temporarily useless RustBot
[16:08:26] <kzzch> i'm trying to to stream: self.connect(socket) and it's telling me self isn't allowed in this context, not sure what the proper syntax is
[16:08:44] <kzzch> I don't, just not sure the proper way to do it
[16:09:02] *** Joins: Earnestly (earnest@88884C6.A3735F9C.39C00A7A.IP)
[16:09:26] *** Quits: awidegre1n (awidegreen@moz-3FEC4684.dip0.t-ipconnect.de) (Ping timeout)
[16:09:38] *** Joins: awidegreen (awidegreen@moz-3FEC4684.dip0.t-ipconnect.de)
[16:10:13] <cmr> when I'm done etching this board I'll help some more
[16:10:16] * cmr -> afk
[16:10:22] <kzzch> is it possible to call the connect method from the constructor? (am i even getting the terminology right?)
[16:10:43] <kzzch> k, thanks
[16:10:52] <eddyb> etching? cmr sounds like he's having even more fun than *just* Rust :P
[16:11:08] <arrrrrrrrr> kzzch: From the constructor? What is self in this context?
[16:11:26] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[16:11:42] <kzzch> i'm assuming since it's throwing up an error, there is no self yet
[16:11:57] <arrrrrrrrr> nope :p
[16:12:01] <eddyb> kzzch: rust doesn't have contructors
[16:12:06] <eddyb> *constructors
[16:12:22] <kzzch> not sure what to call creating an instance of a structure :(
[16:12:32] <kzzch> i am so noob
[16:12:45] <eddyb> kzzch: it's not something special. it's pretty much a structure literal
[16:13:29] *** Quits: awidegreen (awidegreen@moz-3FEC4684.dip0.t-ipconnect.de) (Ping timeout)
[16:13:32] <kzzch> basically i'm using stream as a field in a struct, and i want it to call the connect method which returns a bufferedstream from a tcpsocket
[16:13:44] <kzzch> er, tcpstream
[16:13:46] <eddyb> in Bot::new you can can do let bot = Bot {...}; and then bot.stream.do_something(...); and just bot to return it
[16:13:52] *** Quits: Jesin (Jesin@moz-63C897DA.res.lehigh.edu) (Quit: Leaving)
[16:14:57] <kzzch> i haven't written a new method, im guessing it's necessary to do what i'm trying to accomplish?
[16:15:14] <kzzch> lemme post a gist of what i've got right now
[16:15:26] <eddyb> it's not "necessary" - you can do everything in a million ways
[16:16:19] <eddyb> kzzch: but this can be wrapped in a "static" method https://gist.github.com/kzzch/8041184#file-rustbot-rs-L53-L63
[16:16:29] *** Joins: awidegreen (awidegreen@moz-3FEC4684.dip0.t-ipconnect.de)
[16:16:52] <eddyb> but I should let you update the gist
[16:17:01] <kzzch> https://gist.github.com/kzzch/8041184
[16:17:04] <kzzch> i updated it
[16:17:45] <kzzch> i'm trying to learn the idiomatic and uh, well structured way i guess
[16:18:41] <eddyb> kzzch: you can create the stream before RustBot
[16:19:45] <kzzch> makes sense, i'm making everything else first
[16:19:47] <eddyb> that clone impl (it doesn't even work in that form) is equivalent to #[deriving(Clone)] on the line before pub struct RustBot
[16:20:20] *** Joins: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net)
[16:20:56] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[16:21:22] <eddyb> kzzch: this should actually give you a warning, you have "self" in the method but you're not using it - https://gist.github.com/kzzch/8041184#file-rustbot-rs-L15-L17
[16:21:48] <cmr> kzzch: https://gist.github.com/cmr/8041902
[16:21:51] <eddyb> though it probably doesn't know enough
[16:22:55] <kzzch> well, if i create the connection before i create the bot i don't need the connect method do i?
[16:23:15] <eddyb> kzzch: now you can add a RustBot::connect function that calls RustBot::new after resolving a hostname string and creating a TCP stream
[16:23:43] *** Quits: zeittunnel (benjamin@moz-36A24513.dip0.t-ipconnect.de) (Ping timeout)
[16:24:31] <cmr> Well, that failed miserably.
[16:24:52] <cmr> ink didn't transfer at all :(
[16:25:02] <kzzch> speaking of, is there a resolve command to go from ~"irc.mozilla.org" to the Ipv4Addr?
[16:25:11] *** Joins: penguin_dan (dan_johnsi@6902762D.11B071D.FB9A45AF.IP)
[16:25:15] <cmr> kzzch: net::get_addresses_for_hostname iirc
[16:25:17] *** Quits: awidegreen (awidegreen@moz-3FEC4684.dip0.t-ipconnect.de) (Ping timeout)
[16:25:33] <eddyb> I'd also make the listen method return when it can't read anymore from the stream, instead of failing
[16:26:10] <eddyb> RustBot -> IrcClient and impl Iterator<IrcMessage> for it :P
[16:26:12] <kzzch> heh, at the moment i'm settling for getting it to connect and idle
[16:26:18] *** Quits: sigma (sigma@moz-6E1846A2.range86-184.btcentralplus.com) (Client exited)
[16:26:38] <kzzch> is there an IrcClient already?
[16:26:40] <cmr> no
[16:26:47] <eddyb> meant to rename
[16:27:25] <kzzch> oh, you mean i should rename it and write it?
[16:27:26] <eddyb> for m in IrcBot::connect("irc.mozilla.org") { match m { PrivMsg("kzzch", "die") => fail!() .... } } :P
[16:27:47] <kzzch> babysteps XD
[16:28:14] <eddyb> you can get there within an hour, I'm sure
[16:28:48] *** Joins: awidegreen (awidegreen@moz-3FE0A1F.a357.priv.bahnhof.se)
[16:29:15] *** Joins: silotis (quassel@moz-4B8C4631.oc.oc.cox.net)
[16:29:26] <kzzch> lol, thanks for the vote of confidence
[16:29:57] *** Joins: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net)
[16:30:22] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[16:30:29] <eddyb> kzzch: so, you'd have IrcClient, which is very generic - IrcBot which is either just a trait or a type + a trait so you can add "plugins" to it by just implementing a method (or you can have a HashMap<~str, ~IrcBotPlugin>) and then a RustBot which implements whatever IrcBot needs, for a few basic commands
[16:30:36] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[16:31:02] * eddyb tends to diverge fast - do not even look at infinity!
[16:31:40] <kzzch> i was thinking of eventually doing that
[16:31:52] <kzzch> i lack confidence in my abilities tho :(
[16:32:07] <eddyb> ppfft - if I can get anything done, so can you!
[16:32:35] <kzzch> what one fool can do, another can do?
[16:32:49] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[16:35:14] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[16:36:22] <kzzch> So I'd basically have connect create the new IrcClient and the socket would be a private field in the client?
[16:36:54] <kzzch> ls
[16:36:58] <kzzch> ...
[16:37:08] <eddyb> kzzch: socket/stream - yeah
[16:37:15] <eddyb> (I guess you want to keep both
[16:37:22] <eddyb> )
[16:38:53] *** Quits: antifuchs (sid10828@moz-31ABA2C0.irccloud.com) (Ping timeout)
[16:39:06] *** Quits: whitglint (uid15486@moz-31ABA2C0.irccloud.com) (Ping timeout)
[16:40:50] *** Joins: spott (spott@moz-88EB41BB.colorado.edu)
[16:42:31] *** Quits: spott (spott@moz-88EB41BB.colorado.edu) (Ping timeout)
[16:42:38] *** Joins: infynyxx_ (infynyxx@moz-E95B370B.nyc.res.rr.com)
[16:42:41] *** Joins: whitglint (uid15486@moz-31ABA2C0.irccloud.com)
[16:44:03] *** Joins: antifuchs (sid10828@moz-31ABA2C0.irccloud.com)
[16:44:25] *** Quits: infynyxx_ (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[16:44:53] <cmr> kzzch: the more rhythmical phrase would be "what one fool can, another can too"
[16:45:13] <cmr> :P
[16:45:24] <arrrrrrrrr> check your native speaker privilege
[16:48:30] <bascule> carter: not crazy, heh
[16:48:56] *** Joins: Ferreus (ferreus@moz-6BEAFF81.pools.arcor-ip.net)
[16:49:58] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[16:50:55] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[16:51:48] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[16:51:59] *** Quits: awidegreen (awidegreen@moz-3FE0A1F.a357.priv.bahnhof.se) (Ping timeout)
[16:52:41] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Ping timeout)
[16:54:39] <kzzch> hum, so if i call the new from within connect, i need to pass connect all the info i need to pass to the new method instead of just the socket address though?
[16:56:21] *** Joins: awidegreen (awidegreen@moz-3FEC4684.dip0.t-ipconnect.de)
[16:56:34] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[16:56:43] <kzzch> i need to know the username and nick of the client in order to connect to the server
[16:56:54] <arrrrrrrrr> post another gist? :)
[16:57:12] <kzzch> so it seems to me to make more sense to create the client separately and then connect
[16:57:55] *** Joins: beifeng (Mibbit@88E2CDFA.FA7FF645.C7DB8B78.IP)
[16:58:52] <kzzch> nah, i know i'm right this time because i need to send the server the user and nick commands in order to get a connection
[16:59:48] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[17:01:14] <kzzch> i'd still like to have the stream be a priv field though so i need to use the Option type i guess?
[17:01:30] <kzzch> so i can create the client with an empty stream slot to begin with
[17:02:40] <eddyb> why do you need that?
[17:03:07] <kzzch> so i don't have to send the connect method anything other than a hostname/ip?
[17:03:25] <eddyb> but it's not a method, it's a static function :)
[17:03:32] *** Quits: canhtak (canhtak@moz-258236CD.wl.t.ulaval.ca) (Quit: canhtak)
[17:03:40] *** Joins: sigma (sigma@moz-6E1846A2.range86-184.btcentralplus.com)
[17:03:48] <kzzch> i guess i don't know the difference
[17:03:52] <eddyb> (no overloading, so it might get confusing, if someone actually wanted a method)
[17:04:12] <kzzch> explain it like i'm five :)
[17:04:22] <eddyb> kzzch: let client = IrcClient::connect("irc.mozilla.org", "rustbot");
[17:04:49] <eddyb> compared to let client = IrcClient::new("rustbot"); client.connect("irc.mozilla.org");
[17:05:04] <eddyb> the former is saner in a few ways
[17:05:11] <kzzch> i agree wholeheartedly
[17:05:36] *** Joins: canhtak (canhtak@moz-258236CD.wl.t.ulaval.ca)
[17:06:17] <eddyb> so you'd have fn connect(host: &str, nick: &str) -> IrcClient {let stream = ...; IrcClient::new(nick, stream) /* or just go for IrcClient { ... } */ }
[17:06:29] <kzzch> yeah
[17:06:45] <kzzch> i guess i can just make the default username the same as the nick
[17:07:16] *** Quits: sigma (sigma@moz-6E1846A2.range86-184.btcentralplus.com) (Client exited)
[17:07:40] *** Joins: devbug (quassel@2D4E172D.4C8B6099.9B57EA59.IP)
[17:08:03] *** Quits: lpy (lpy@12172131.F09091A8.1348A864.IP) (Quit: Leaving...)
[17:12:45] *** Quits: amey (user@8961CBCE.9E7B6A84.D2D1FAF0.IP) (Ping timeout)
[17:13:03] *** Joins: hoverbear (hoverbear@EBFA78B5.F19E5E7B.E74D50F2.IP)
[17:16:57] *** Quits: buster (buster@3A0EAB5F.9C69795C.ACFE537F.IP) (Client exited)
[17:17:25] <SiegeLord> Heh... nearly every commit is inconvenient for rustc users
[17:17:29] <SiegeLord> *rust-ci
[17:18:33] *** Joins: samnardoni (samnardoni@moz-6E63ABD.dyn.plus.net)
[17:21:16] *** Joins: wilmoore (wilmoore@moz-1248C037.mystrotv.com)
[17:21:28] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[17:21:28] *** ChanServ sets mode: +o jdm
[17:21:50] *** Quits: a__ (a__@moz-56DB9895.nycmny.fios.verizon.net) (Client exited)
[17:23:17] *** Joins: a__ (a__@moz-56DB9895.nycmny.fios.verizon.net)
[17:24:41] <geal> hi, I'm currently looking at how rust fares against these unicode tests: http://mortoray.com/2013/11/27/the-string-type-is-broken/
[17:24:56] <geal> most of it is ok, except uppercasing characters
[17:25:13] <bstrie> geal: we beat you to it, and the answer is "not as well as we'd like" :P
[17:25:23] <geal> I have begun writing a function that could do unicode aware uppercase
[17:25:47] <geal> and it works, mostly
[17:26:06] <geal> but I'm worried it might be too big to add to the libstd
[17:26:18] <geal> basically, it must include the content of ftp://ftp.unicode.org/Public/UCD/latest/ucd/UnicodeData.txt and ftp://ftp.unicode.org/Public/UCD/latest/ucd/SpecialCasing.txt
[17:26:32] <geal> should I do it as a separate library?
[17:27:01] <bstrie> geal: we've yet to decide what level of full unicode support to offer in the stdlib as opposed to external libraries
[17:27:10] <bstrie> geal: I suggest posting a message to the mailing list, if you please
[17:27:13] <geal> ok
[17:27:25] *** Joins: lenstr (lenstr@4984E3F6.9636F313.7A27613B.IP)
[17:27:27] <kzzch> so now my function doesn't know what an Ipv4Addr is :/
[17:27:44] <bstrie> kzzch: huzzah! that's very forward-thinking of you :)
[17:28:42] <kzzch> I'm trying to figuree out why XD
[17:28:44] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Connection reset by peer)
[17:28:45] <cmr> SiegeLord: well I mean, this one will actually make their tests fail for no reason :P
[17:28:53] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[17:29:09] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Client exited)
[17:29:39] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[17:29:46] *** Quits: wilmoore (wilmoore@moz-1248C037.mystrotv.com) (Ping timeout)
[17:30:36] <kzzch> eddyb: are you still here?
[17:30:38] *** Quits: moostik (Icedove@moz-654D48E3.w83-202.abo.wanadoo.fr) (Ping timeout)
[17:30:40] *** Quits: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[17:30:43] <eddyb> yupp
[17:30:47] <kzzch> https://gist.github.com/kzzch/8043059
[17:31:22] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Ping timeout)
[17:32:16] <kzzch> when i try to compile it's telling me Ipv4Addr is an unknown type on line 19 and that TcpStream on 22 is an unresolved name
[17:32:31] *** Joins: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net)
[17:33:06] *** Quits: alonlevy (alon@C4E16506.66334A3F.AB64B967.IP) (Ping timeout)
[17:33:28] *** Quits: canhtak (canhtak@moz-258236CD.wl.t.ulaval.ca) (Quit: canhtak)
[17:33:53] *** Quits: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net) (Quit: ziad)
[17:34:06] <kzzch> anyone give me an idea why that's happening?
[17:34:19] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[17:34:30] *** Joins: arrrrrrr1 (arrrrrrrrr@moz-81DA182F.dynamic.qsc.de)
[17:34:33] *** Joins: pepper_chico (pepper_chi@moz-CFBE8821.dsl.telesp.net.br)
[17:35:47] *** Quits: arrrrrrrrr (arrrrrrrrr@moz-90AD0D2A.dynamic.qsc.de) (Ping timeout)
[17:37:42] <arrrrrrr1> test
[17:37:46] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[17:37:53] <arrrrrrr1> hm moderation off?
[17:37:57] *** arrrrrrr1 is now known as arrrrrrrrr
[17:38:02] <arrrrrrrrr> test2
[17:38:09] <arrrrrrrrr> that's better
[17:39:00] <kzzch> could someone take a look at that gist and tell me why the connect function can't resolve the TcpStream name?
[17:39:07] <kzzch> Everything looks correct to me
[17:39:30] <cmr> kzzch: Ipv4Addr isn't the type.
[17:39:46] <cmr> SocketAddr is the type.
[17:40:08] <cmr> I think..
[17:40:18] <cmr> Anyway line22 should be TcpStream::connect
[17:40:20] <cmr> not .connect
[17:40:26] * cmr -> afk again
[17:41:09] <kzzch> ah
[17:41:15] <kzzch> It's IpAddr
[17:41:22] <kzzch> thanks
[17:42:20] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[17:42:49] *** Joins: alex-abreu (alex@moz-37C4838C.w90-9.abo.wanadoo.fr)
[17:44:25] <kzzch> lol, that breaks so much stuff :/
[17:45:46] *** Quits: samnardoni (samnardoni@moz-6E63ABD.dyn.plus.net) (Client exited)
[17:46:42] <arrrrrrrrr> -fmax_errors when?
[17:46:45] <wycats_> bstrie: yeah I'm doing well
[17:46:52] <wycats_> been chatting mostly with acrichto 
[17:46:56] <wycats_> and pairing with tomdale 
[17:47:02] <wycats_> we've been redoing the protobuf library
[17:47:05] <wycats_> it's been going really well
[17:47:28] <wycats_> yesterday we got our Hello message (the simplest message) writing out and being reconsumed by the Ruby protobuf library
[17:47:35] <wycats_> I just want to ditch the dependency
[17:47:38] <wycats_> it's too crazy
[17:48:03] <wycats_> I wish someone would fix the need to cast concrete impls as traits before passing them to functions
[17:48:15] <wycats_> I hear nmatsakis and pcwalton are the only ones who can do it
[17:48:22] <wycats_> what do I have to do to convince someone to do it
[17:48:29] <wycats_> I will send you holiday cookies
[17:49:03] <eddyb> kzzch: hah, sorry I wasn't here to answer anything - keep the docs around in case something doesn't go according to plan
[17:49:24] <Luqman> wycats_: i *think* someone was taking a look at that recently
[17:49:39] <wycats_> Luqman: traits are so elegant conceptually
[17:49:47] <wycats_> as tomdale would say, it's like sweat stains on the prom dress
[17:50:05] *** Joins: canhtak (canhtak@moz-258236CD.wl.t.ulaval.ca)
[17:50:17] <sfackler> wycats_: pcwalton had a patch that would implicitly cast but it bitrotted
[17:50:26] <Luqman> haha there's an old patch from pcwalton that bitrotted
[17:51:06] <Blei> ah, the trait kinds casting bug got fixed
[17:51:08] <Blei> too bad
[17:51:09] <wycats_> honestly, if traits had that fixed, they would be really great
[17:51:15] <wycats_> traits are basically two things:
[17:51:28] <wycats_> (1) if you have a concrete impl, you can call a method on the trait
[17:51:39] <wycats_> (2) if a function takes a trait, you can give it a concrete impl
[17:51:42] <wycats_> so simple
[17:51:52] <wycats_> (1) is automated
[17:51:55] <wycats_> (2) really should be automatic
[17:52:01] <wycats_> and then traits would feel like magic
[17:52:24] *** Quits: hoverbear (hoverbear@EBFA78B5.F19E5E7B.E74D50F2.IP) (Quit: Taking a nap.)
[17:52:31] <kzzch> huzzah!
[17:52:38] *** Joins: mr_trousers (Mibbit@moz-2E4E6A15.ppp-bb.dion.ne.jp)
[17:53:05] *** Quits: mr_trousers (Mibbit@moz-2E4E6A15.ppp-bb.dion.ne.jp) (Quit: http://www.mibbit.com ajax IRC Client)
[17:53:23] <wycats_> without that fix, it makes the easy explanation of traits really rough
[17:53:37] <wycats_> and I personally keep getting trapped by it
[17:53:48] <wycats_> tomdale and I both had to stop a few nights ago and wait for help
[17:53:52] <wycats_> because we hit the issue
[17:53:55] <wycats_> and we just forgot
[17:54:13] <wycats_> ok
[17:55:19] *** Joins: alonlevy (alon@moz-7A742B9E.red.bezeqint.net)
[17:55:55] *** Joins: mib_hvstte (Mibbit@moz-2E4E6A15.ppp-bb.dion.ne.jp)
[17:56:04] *** Quits: pepper_chico (pepper_chi@moz-CFBE8821.dsl.telesp.net.br) (Quit: Ex-Chat)
[17:56:58] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[17:57:25] *** Quits: mib_hvstte (Mibbit@moz-2E4E6A15.ppp-bb.dion.ne.jp) (Quit: http://www.mibbit.com ajax IRC Client)
[17:57:27] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[18:00:05] <arrrrrrrrr> does anybody know how I can hide the quit __reason__ in weechat? (eg Quit: Ping timeout)
[18:00:57] <kzzch> ugh, so i've got it basically working again, but it looks ugly this way write! doesn't work anymore so i had to go back to doing it the old way
[18:02:42] <cmr> wycats_: ... homemade holliday cookies?
[18:03:01] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[18:03:37] <Blei> arrrrrrrrr: http://www.weechat.org/files/doc/weechat_faq.en.html#filter_irc_join_part_quit
[18:03:51] *** Joins: ziad (ziad@B20586FB.BDB3D91.6E370BFC.IP)
[18:04:10] <arrrrrrrrr> Blei: I want to the xy has quit. I just want to hide the part in the ()
[18:04:20] <arrrrrrrrr> *to see the
[18:04:35] <tedh> kzzch: you can use write! if you cast to &mut Writer:  write!(&mut self.stream as &mut Writer, "NICK {}\r\n", self.nick);
[18:05:02] *** Quits: oberstet (quassel@moz-C523F65A.dynamic.mnet-online.de) (Client exited)
[18:06:01] <Blei> oh, i see
[18:06:01] <kzzch> ah, thanks
[18:06:04] <Blei> no idea
[18:06:49] *** Quits: amro (quassel@CC16DC52.8AAAF769.FAAB0799.IP) (Client exited)
[18:07:43] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[18:07:43] *** ChanServ sets mode: +ao brson brson
[18:08:02] <arrrrrrrrr> dat weechat source code https://gist.github.com/anonymous/e0f1882c4f5a949f1a35
[18:08:52] *** Joins: FreeFull (freefull@moz-EFEF3DB5.as13285.net)
[18:09:04] <arrrrrrrrr> well it obviously isn't possible, that's sad
[18:10:41] *** Quits: ziad (ziad@B20586FB.BDB3D91.6E370BFC.IP) (Ping timeout)
[18:10:53] *** Joins: txdv (quassel@966F3542.3BA477DA.14C26596.IP)
[18:10:59] *** Quits: beifeng (Mibbit@88E2CDFA.FA7FF645.C7DB8B78.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[18:11:36] <kzzch> woo! connecting again :)
[18:11:50] <cmr> rust-buildbot: dance
[18:11:51] <rust-buildbot> <(^.^<)
[18:11:52] <rust-buildbot> <(^.^)>
[18:11:53] <rust-buildbot> (>^.^)>
[18:11:54] <rust-buildbot> (7^.^)7
[18:11:55] <rust-buildbot> (>^.^<)
[18:12:10] <arrrrrrrrr> wow, much dance, so kawaii
[18:13:11] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Client exited)
[18:13:39] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[18:13:49] <kzzch> https://gist.github.com/kzzch/8043059
[18:13:53] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[18:13:54] <kzzch> alright, so how's this now?
[18:14:07] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Connection reset by peer)
[18:14:32] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[18:14:41] <brson> does anybody remember who designed the rust logo?
[18:15:32] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Client exited)
[18:15:46] <o11c> arrrrrrrrr: if you joint #weechat on FreeNode it's really easy to get them to make a code change
[18:15:46] <arrrrrrrrr> kzzch: why do you clone the nick in connect?
[18:16:02] <bstrie> brson: one sec
[18:16:03] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[18:16:09] <kzzch> it was throwing up an error, let me take it out and see what it was saying
[18:16:29] <arrrrrrrrr> o11c: I've just compiled it myself but I'm going to talk to them later (maybe, when I've time)
[18:17:04] *** Joins: samnardoni (samnardoni@moz-6E63ABD.dyn.plus.net)
[18:17:16] <kzzch> guess i don't need that anymore :o
[18:17:27] *** Joins: diverse (diverse@moz-ED94B8D.oc.oc.cox.net)
[18:17:46] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Ping timeout)
[18:17:55] <bstrie> brson: smartell designed it, at least according to graydon
[18:18:05] <arrrrrrrrr> o11c: do you know if weechat has a git repo?
[18:18:30] <o11c> arrrrrrrrr: yes, RTFW
[18:18:46] <arrrrrrrrr> on github, I mean
[18:20:34] <arrrrrrrrr> doesn't look like it :(
[18:20:55] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[18:21:20] *** Joins: jesse99 (jesse99@moz-8B1E0C5D.hsd1.wa.comcast.net)
[18:22:49] <kzzch> %
[18:23:05] <arrrrrrrrr> so do I just send them a patch on the mailing list? I guess.
[18:24:22] <brson> bstrie: thanks
[18:24:53] <diverse> arrrrrrrrr: http://savannah.nongnu.org/git/?group=weechat
[18:25:31] <arrrrrrrrr> looks good
[18:26:03] <kzzch> hmm, #[deriving(Clone)] throws up an error now that I put the BufferedStream inside the IrcClient struct
[18:27:37] *** Quits: samnardoni (samnardoni@moz-6E63ABD.dyn.plus.net) (Client exited)
[18:28:09] *** Quits: alonlevy (alon@moz-7A742B9E.red.bezeqint.net) (Ping timeout)
[18:28:15] *** Quits: skade (skade@30BBD5E6.505237C9.CAE22B62.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[18:28:52] <sfackler> it usually doesn't make a ton of sense to clone a stream
[18:29:30] <kzzch> ic
[18:30:30] <cmr> It doesn't really make sense to clone an IRC client either.
[18:31:43] <arrrrrrrrr> brb
[18:31:44] *** Quits: arrrrrrrrr (arrrrrrrrr@moz-81DA182F.dynamic.qsc.de) (Quit: arrrrrrrrr)
[18:31:49] *** Joins: arrrrrrrrr (arrrrrrrrr@moz-81DA182F.dynamic.qsc.de)
[18:32:43] <arrrrrrrrr> now I need someone to quit :)
[18:33:18] *** Quits: CarpNet (ac@moz-FD24B77.sohonet.co.uk) (Quit: Leaving)
[18:33:29] <arrrrrrrrr> much thanks
[18:37:42] *** Joins: hatman (Mibbit@moz-2799B99.dynamic.dsl.as9105.com)
[18:37:51] *** Joins: ziad (ziad@B20586FB.BDB3D91.6E370BFC.IP)
[18:38:14] <hatman> Hi - are there any good videos of introductory talks about rust online? I found a couple of bad ones on youtube - are there any really good ones?
[18:39:15] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[18:41:32] *** Quits: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net) (Quit: I'm sure it's perfectly safe)
[18:41:52] <bstrie> hatman: I don't know of any good video tutorials, no
[18:41:53] *** Quits: hatman (Mibbit@moz-2799B99.dynamic.dsl.as9105.com) (Quit: http://www.mibbit.com ajax IRC Client)
[18:43:13] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Connection reset by peer)
[18:43:30] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[18:45:49] *** Quits: rfw (rfw@moz-7D453A5B.rfw.name) (Ping timeout)
[18:47:28] *** Joins: rfw (rfw@moz-7D453A5B.rfw.name)
[18:50:27] *** Quits: nkoep (nik@moz-1AF7FFFD.pool.mediaways.net) (Quit: Leaving)
[18:51:30] *** Joins: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net)
[18:51:53] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[18:52:03] *** Joins: hjr3 (hradtke@F452D205.C4AED08B.AEED71A1.IP)
[18:52:39] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[18:53:03] <carter> bascule: woot
[18:53:59] <kzzch> w00t right back
[18:54:09] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[18:54:32] <kzzch> rust for rubyists helped me out a lot and i don't even know ruby :D
[18:54:38] <carter> kzzch: hehe
[18:55:37] <diverse> kzzch: that was steveklabnik's goal. :)
[18:56:35] <bascule> carter: fun thread there, I've been avoiding posting and just lurking ;)
[18:56:38] <kzzch> he accomplished it
[18:57:06] <kzzch> https://gist.github.com/kzzch/8043059
[18:57:59] <carter> bascule: is the kevin dude on this channel?
[18:58:02] <kzzch> eddyb: welp, i think i got what you were talking about, took a little more than an hour though
[18:58:13] <eddyb> heh
[18:58:21] *** Quits: dredozubov (dredozubov@2F14E2C1.F70E5FA9.F63E14E8.IP) (Input/output error)
[18:59:17] <eddyb> kzzch: https://gist.github.com/kzzch/8043059#file-ircclient-rs-L45 you can break the loop there and/or return
[18:59:23] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Client exited)
[18:59:49] *** Joins: jlong (jlong@moz-6DFDE846.socal.res.rr.com)
[19:00:23] *** Quits: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net) (Quit: killerswan)
[19:00:25] *** Quits: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP) (Ping timeout)
[19:01:09] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[19:01:21] *** Quits: fhahn (fhahn@moz-7924DB5C.vie.surfer.at) (Ping timeout)
[19:02:17] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[19:02:49] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[19:02:51] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Client exited)
[19:02:52] <kzzch> now i just need to work on the parser :/
[19:02:55] *** Joins: samnardoni (samnardoni@moz-6E63ABD.dyn.plus.net)
[19:03:09] <kzzch> and a way to send commands
[19:03:14] <FreeFull> I wonder if Rust has some parser combinator library
[19:04:11] <steveklabnik> kzzch wooo!
[19:04:15] <steveklabnik> glad it was helpful
[19:04:18] <kzzch> np man
[19:04:26] <steveklabnik> i really made it too niche sounding, oh well
[19:04:35] <kzzch> still got it open in my browser window
[19:04:37] <steveklabnik> i also own learnrustthehardway.com but haven't had time to write it yet
[19:04:58] <kzzch> right on
[19:05:23] <kzzch> i want to write like a rust for dummies because i'm basically learning to program for real at the same time i'm trying to learn Rust
[19:05:30] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Connection reset by peer)
[19:05:33] <kzzch> so you tottally nailed it
[19:05:38] *** Quits: heftig (heftig@moz-AC123F04.dip0.t-ipconnect.de) (Ping timeout)
[19:05:42] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[19:05:44] <steveklabnik> awesome. that's literally how i wrote it
[19:05:50] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[19:06:39] <kzzch> probably wouldn't be so hard if i wasn't trying to learn ruby and clojure at the same time >.<
[19:06:56] <kzzch> but hey, go big or go home
[19:07:22] *** Joins: gwty (gwtypc@2E2F71B6.36BA38AF.F44414AF.IP)
[19:07:33] <diverse> perhaps, you two can collaborate on making documentation like that?
[19:07:48] <kzzch> i want to do something to contribute to rust
[19:07:57] <kzzch> er, *something*
[19:08:04] <kzzch> (meant to emphasize that)
[19:08:14] <kmc> jack: pong
[19:08:20] <diverse> kzzch: practical docs, would be a big help for rust
[19:08:29] <kzzch> i agree
[19:09:20] <kzzch> Although I think it actually helped me having ot go through the source to get hints
[19:09:29] <steveklabnik> yeah
[19:09:30] <eddyb> I just halted and.... where's all my tabs q_q
[19:09:32] *** Joins: fhahn (fhahn@moz-7924DB5C.vie.surfer.at)
[19:09:37] <steveklabnik> if you need any help with getting docs into rust, just let me know
[19:09:40] <steveklabnik> i'd be happy to help
[19:09:47] <steveklabnik> i haven't had the time to write any new ones lately
[19:09:51] <kzzch> If nothing else I can proofread
[19:09:55] <bascule> carter: no idea
[19:10:01] <kzzch> I'm pretty good about spotting typos
[19:10:09] <carter> FreeFull: you should writ eone
[19:10:18] <kzzch> I'd really like to port RE2 to rust tho
[19:10:29] <carter> as in rewrite it?
[19:10:29] *** Joins: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr)
[19:10:48] <adridu59> is there a function that outputs the abs of an int? I don't find any in the docs
[19:10:50] <bascule> carter: kinda funny how the supporters of bounded queues are people who've had Erlang programs blow up in production, and the supporters of unbounded ones are all "I wrote this little toy program in Go once and unbounded queues were totally fine" o_O
[19:11:09] <carter> bascule: I was waiting for someone who wasn't me to say that
[19:11:32] *** Quits: jlong (jlong@moz-6DFDE846.socal.res.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[19:11:41] <carter> bascule: admittedly i lack the scarrring, I just try to milk experts for knowledge so i don't need scars
[19:11:48] <bascule> carter: hahaha
[19:12:35] *** Quits: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[19:12:36] <carter> brb in a bit lunch and such
[19:13:59] <carter> but yeah, pretty much every single person i've ever met that does large scale data processing where doing that correclty has money involved, they hate unbounded queues
[19:14:23] <carter> "yes I have to configure stuff, and think, but in exchange I can have well defined behavior instead of explosions"
[19:14:45] <diverse> oh, that's why you want to talk to kevin
[19:15:35] *** Quits: arrrrrrrrr (arrrrrrrrr@moz-81DA182F.dynamic.qsc.de) (Quit: arrrrrrrrr)
[19:18:01] *** Joins: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net)
[19:18:45] *** Quits: bjustin (bjustin@moz-8FC28563.sierrabravo.net) (Ping timeout)
[19:20:55] *** Quits: maxiepoo (Max@68A63377.C44F889.D279C981.IP) (Quit: maxiepoo)
[19:22:23] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[19:22:25] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[19:25:54] *** Joins: echristo (echristo@8063EDD3.D6CCE4AE.77834EAA.IP)
[19:26:16] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[19:28:10] *** Joins: brendan (brendaneic@moz-569CD944.tor.primus.ca)
[19:28:35] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Input/output error)
[19:28:35] *** Joins: DAddYE_ (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[19:29:11] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[19:30:21] *** Joins: vodik (simon@AB4CFA9A.7B706B64.578F951C.IP)
[19:30:44] <diverse> steveklabnik: have you seen this? http://adridu59.github.io/rust-tuts/
[19:30:59] <steveklabnik> i have, yes. i submitted a PR
[19:32:27] *** Joins: judder (maradukewa@837BB533.C8128DC0.78E362FE.IP)
[19:32:46] *** Quits: DAddYE_ (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[19:33:07] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[19:34:44] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Connection reset by peer)
[19:35:38] *** Joins: alonlevy (alon@5B2CEDFA.67C0172.9E22F775.IP)
[19:36:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[19:36:45] *** Quits: awidegreen (awidegreen@moz-3FEC4684.dip0.t-ipconnect.de) (Ping timeout)
[19:37:12] *** Joins: maxiepoo (Max@68A63377.C44F889.D279C981.IP)
[19:38:00] *** Quits: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net) (Quit: killerswan)
[19:38:55] *** Joins: vosen (vosen@moz-266BA656.icpnet.pl)
[19:39:59] *** Joins: mib_rqw50e (Mibbit@57811F1B.A198AA51.21538F32.IP)
[19:40:18] *** Quits: mib_rqw50e (Mibbit@57811F1B.A198AA51.21538F32.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[19:40:31] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[19:40:39] <carter> bascule: i may have aske reid if he could pull a "hey, i work on riak and know erlang too well, heres the general opinion of everyone who works at basho"
[19:40:43] <carter> *asked
[19:41:48] <bascule> carter: <3 !
[19:42:07] *** Joins: jaen (jaen@moz-56814562.play-internet.pl)
[19:44:10] <steveklabnik> woot
[19:44:39] <kzzch> i never imagined listening to dubstep while i code would actually help me concentrate >.<
[19:44:54] <steveklabnik> it works well right
[19:45:32] <kzzch> i've been trying to use peace and quiet and i finally realized i get in the zone way better when i've got something playing in my headphones
[19:46:31] <kzzch> i usually use goa but i decided to look for trancestep and the closest i can come is melodic dubstep with female vocals but damn if it isn't focusing me like a laser
[19:46:32] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[19:46:55] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[19:48:27] *** Quits: canhtak (canhtak@moz-258236CD.wl.t.ulaval.ca) (Quit: canhtak)
[19:48:43] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[19:50:05] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[19:50:16] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[19:50:16] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[19:50:31] *** Quits: hjr3 (hradtke@F452D205.C4AED08B.AEED71A1.IP) (Ping timeout)
[19:51:05] *** Joins: hjr3 (hradtke@F452D205.C4AED08B.AEED71A1.IP)
[19:53:35] *** Quits: alonlevy (alon@5B2CEDFA.67C0172.9E22F775.IP) (Ping timeout)
[19:53:52] *** Joins: jlong (jlong@moz-6DFDE846.socal.res.rr.com)
[19:55:15] *** Joins: alonlevy (alon@5B2CEDFA.67C0172.9E22F775.IP)
[19:55:46] *** Quits: andreypopp (andreypopp@moz-7261DC60.net) (Quit: andreypopp)
[19:56:31] *** jorendorff is now known as jorendorff_away
[19:57:15] *** Quits: brendan (brendaneic@moz-569CD944.tor.primus.ca) (Quit: brendan)
[19:57:36] *** Joins: jvns (bork@87D98E32.4046EB22.428F94DD.IP)
[20:00:23] *** Quits: hjr3 (hradtke@F452D205.C4AED08B.AEED71A1.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[20:01:44] <brson> jvns: your blog posts about your rust kernel have been a boon for us on hn. thanks
[20:02:00] <jvns> brson: awesome, I'm happy!
[20:02:11] <jvns> it's amazing that they've (mostly) only generated positive comments
[20:03:15] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[20:03:55] *** Joins: samx (sami@3EB32A7C.10A53EE3.77834EAA.IP)
[20:04:59] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Ping timeout)
[20:05:10] <carter> jvns: well, they're interesting and educational
[20:05:17] <jvns> man I'd really have never gotten anywhere without this channel =)
[20:05:57] *** Joins: nplatt (nplatt@moz-850C853A.strong.csnstores.com)
[20:06:02] <nplatt> :log
[20:06:28] *** Quits: nplatt (nplatt@moz-850C853A.strong.csnstores.com) (Quit: leaving)
[20:06:45] *** Joins: nplatt (nplatt@moz-850C853A.strong.csnstores.com)
[20:06:55] *** nplatt is now known as caipre
[20:07:06] *** Joins: rca_ (rcatolino@moz-E8A296BC.adsl.proxad.net)
[20:07:07] <jvns> oh, a question! Is there a way to make it so my enum has the same size as a u32?
[20:07:36] <sfackler> jvns: #[repr(u32)] should do it
[20:07:46] *** Quits: rca (rcatolino@moz-70492676.adsl.proxad.net) (Ping timeout)
[20:09:09] <jvns> sfackler: perfect, thanks!
[20:09:17] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[20:09:18] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[20:09:38] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[20:10:06] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[20:10:48] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[20:10:59] *** Joins: lolwat (nano@moz-ED77243C.superkabel.de)
[20:10:59] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[20:11:20] *** Quits: lolwat (nano@moz-ED77243C.superkabel.de) (Quit: lolwat)
[20:11:29] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Quit: nano)
[20:11:53] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[20:11:55] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[20:12:13] *** Joins: Kruppe (user@moz-EE1E894A.home3.cgocable.net)
[20:13:06] *** Quits: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[20:13:36] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[20:13:57] *** jorendorff_away is now known as jorendorff
[20:14:03] *** Quits: jaen (jaen@moz-56814562.play-internet.pl) (Ping timeout)
[20:14:31] *** Quits: noam (noam@F6B530A7.720527A7.416762B.IP) (Ping timeout)
[20:14:46] *** Joins: noam (noam@F6B530A7.720527A7.416762B.IP)
[20:15:17] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Ping timeout)
[20:15:57] *** Joins: ktt3ja (ktt3ja@moz-54586A12.washdc.fios.verizon.net)
[20:16:27] <carter> bascule: i should stop replying to that thread
[20:16:55] <bascule> carter: hahaha
[20:17:06] <bascule> I knew that thread would be a clusterfuck ;)
[20:17:09] <bascule> that's why I haven't replied
[20:17:17] <bascule> but I figured it's better to bring up now than later
[20:17:19] <carter> yeah
[20:17:40] <carter> otoh, i think its pretty clear that everyone who's actually used them for systems they need to work is on the side of bounded
[20:17:55] *** Quits: Kruppe (user@moz-EE1E894A.home3.cgocable.net) (Client exited)
[20:18:19] <carter> hell, even amazons new kinesis service is a bounded queue
[20:18:31] <carter> though the way its bounded is "we won't keep events after 24 hours"
[20:19:19] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[20:20:27] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Quit: WeeChat 0.4.2)
[20:20:27] *** Quits: alonlevy (alon@5B2CEDFA.67C0172.9E22F775.IP) (Ping timeout)
[20:23:58] *** Joins: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net)
[20:24:24] *** Quits: samx (sami@3EB32A7C.10A53EE3.77834EAA.IP) (Quit: This computer has gone to sleep)
[20:26:08] <eddyb> it... does something http://jsfiddle.net/eddyb/7g5QQ/show/
[20:27:16] <carter> what is that?
[20:28:00] <Tari> it appears to be a space-division method of approximating a circle
[20:28:58] <eddyb> Tari: yeah, I'm constructing a quad tree
[20:31:47] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[20:33:01] *** Quits: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com) (Input/output error)
[20:33:54] *** Quits: paulproteus (quassel@199.199.210.158) (Ping timeout)
[20:35:04] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[20:35:37] *** Joins: jaen (jaen@moz-4BB2EDEF.play-internet.pl)
[20:36:05] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[20:36:26] *** Joins: paulproteus (quassel@458FE134.3EC36C88.CBDCF1DC.IP)
[20:37:44] *** Joins: jaebaek (jaebaek@4D10E9F2.E551553C.7544CABF.IP)
[20:39:26] *** Quits: jaebaek (jaebaek@4D10E9F2.E551553C.7544CABF.IP) (Ping timeout)
[20:44:14] <erickt> jvns: ping
[20:44:22] <jvns> erickt: hey
[20:44:44] <erickt> jvns: hey there! are you the jvns of http://jvns.ca/ fame?
[20:44:50] <jvns> haha that's me 
[20:44:53] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[20:45:22] <jvns> "fame" =P
[20:46:02] <erickt> jvns: cool! well you get to receive my spammy offer to speak at one of our rust meetups if you're interested. I'm really enjoying your blog and it could make for a great talk sometime :)
[20:46:42] <erickt> jvns: I'm not sure if you're in the bay area, but if not, we have some ways of doing a remote presentation
[20:46:48] <jvns> erickt: sweet, thanks! I mostly live in Montreal, though I'll be in SF from jan 9-14 or so
[20:47:09] <erickt> shucks! we're scheduled for 1/28
[20:47:19] <jvns> aw :)
[20:47:33] <jvns> it's possible that I'll get a job based in SF, so we'll see =)
[20:47:41] <rntz_> is there a reason rust doesn't allow you to write to a partially moved pointer?
[20:47:45] <erickt> jvns: ooh sweet! good luck with that
[20:47:55] <jvns> erickt: thanks!
[20:48:13] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[20:48:16] <erickt> jvns: especially so I can increase my pool of presenters :)
[20:48:23] *** Quits: vodik (simon@AB4CFA9A.7B706B64.578F951C.IP) (Quit: WeeChat 0.4.3-dev)
[20:49:11] <rntz_> i.e. match *p { Blah(x) => { *p = Foo(x, ...) }, ... }?
[20:50:12] <erickt> rntz_: not directly, but you could put the value in an option type.
[20:50:55] <erickt> rntz_: for example: `let mut x = Some(~"foo"); match x.take() { Some(y) { x = Some(y); } }`
[20:51:01] <jvns> does anyone understand inline assembly? My jmp is doing the wrong thing for some reason, and I don't understand why https://gist.github.com/jvns/750ce7d2eb75d487a9e6
[20:51:06] <rntz_> I'm not asking how to do this, I'm asking why letting me do it as stated would be unsafe
[20:51:23] <rntz_> (or why the analysis that would let me do it is infeasible, etc)
[20:52:13] <rntz_> alternatively, if there's a reasonably up-to-date paper on the rust borrowchecker, I could just read that. bblum: is there?
[20:52:37] <kimundi> rntz_: I think the main reason right now is that its easier to forbid partial/temporary moving from/to a value than to support it - wether this specific kind of temporary move would be safe to allow in general I don't know though
[20:53:41] <Luqman> jvns: what do you mean by the wrong thing exactly?
[20:53:55] <jvns> Luqman: it tries to jmp somewhere, but to the wrong place
[20:54:06] <jvns> I don't really know where the address it's jumping to is coming from
[20:55:45] <rntz_> kimundi: okay, that makes sense
[20:55:48] <rntz_> erickt: uh, that is basically exactly the code I have but the borrow checker is still yelling at me...
[20:56:36] <Luqman> jvns: do you have an example?
[20:57:02] <rntz_> fn push(&mut self, ...) { match self.take() { None => {...} Some(p) => match *p { Single(b) => { *p = ... b ... } ... } } }
[20:57:07] <mcpherrin> jvns: Are you running this in that kernel you're writing? What mode are you running your cpu in?
[20:57:13] <rntz_> oh, I suppose I am assigning to *p not to self
[20:57:23] <jvns> mcpherrin: yeah, it's in my kernel. I'm in protected mode.
[20:57:27] <rntz_> but I want to overwrite *p in-place, not do a new allocation
[20:57:45] <erickt> rntz_: this worked for me: https://gist.github.com/erickt/8046150
[20:58:01] <erickt> rntz_: what is the type of `p` in this case?
[20:58:25] <rntz_> ~NonEmpty<V,A>
[20:59:01] <jvns> Luqman: hmm I call jmp() with something like 0x080480b8 as an argument, and it tries to jmp to 0xbbe58955
[20:59:04] <erickt> rntz_: hrm, this is a little hard for me to visualize. can you gist or point me at your code?
[20:59:10] <rntz_> where enum NonEmpty<V,A> { Single(~Node<V,A>), Deep(Deep<V,A>) }
[20:59:17] <jvns> this is what qemu says: http://sprunge.us/OeQE
[20:59:36] <Luqman> jvns: also, it's not necessarily the case that sizeof(*u8) == sizeof(u32)
[20:59:59] <rntz_> erickt: unfortunately the code I'm working with is 500+ lines long at this point. I'll try to select the relevant parts and pastebin the result.
[21:00:17] <erickt> rntz_: thanks
[21:00:32] <jvns> Luqman: is sizeof(uint) == sizeof(*u8)?
[21:00:42] <mcpherrin> jvns: yes
[21:01:37] <mcpherrin>  also the u32 thing seems like a red herring since you know you're on an x86 protected mode machine where it is the case
[21:02:14] <jvns> yeah, I think that part is okay
[21:02:23] <Luqman> jvns: try the assembly with rustc -S or objdump, and see which register it's using for the jmp instruction. since it seems like the value you want is already in eax
[21:02:24] <rntz_> erickt: http://sprunge.us/ZaTe?rust
[21:02:34] <mcpherrin> Could it be that your jump succeeds and it's a later jump that's going somewhere crazy?
[21:02:38] *** Joins: samx (sami@3EB32A7C.10A53EE3.77834EAA.IP)
[21:02:56] *** Joins: kvanb (kvanb@moz-F4E1EC66.vic.bigpond.net.au)
[21:04:08] <jvns> hmm okay I have the actual assembly that's being generated: http://sprunge.us/IAgY
[21:04:20] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[21:04:32] <jvns> man I wish I understood assembly =)
[21:04:45] <kvanb> jvns: I do
[21:04:47] <kvanb> that looks wrong
[21:04:50] <kvanb> whats the problem?
[21:04:50] <jvns> awesome
[21:04:58] *** Joins: heftig (heftig@moz-9928E9E7.dip0.t-ipconnect.de)
[21:05:12] <jvns> kvanb: do you know what the * means in jmp    *(%eax)?
[21:05:13] <kvanb> its odd. LLVM doesn't usually generate bad assembly
[21:05:16] <kvanb> but thats bad.
[21:05:21] <kvanb> yes, jump to the address stored in eax
[21:05:28] <kvanb> oh, probably dword ptr
[21:05:37] <kvanb> I dont like this syntax, I prefer the other Intel one
[21:05:55] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[21:06:03] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Ping timeout)
[21:06:03] <jvns> kvanb: well I generated it from this (https://gist.github.com/jvns/750ce7d2eb75d487a9e6), so it's not super surprising that it's wrong
[21:06:18] <kvanb> oh ofcourse
[21:06:22] <kvanb> you're dumping asm in the middle :P
[21:06:31] <jvns> :)
[21:06:51] <kvanb> So, it doesn't work?
[21:06:57] <jvns> yeah, it jumps somewhere else
[21:07:01] <erickt> rntz_: what are you writing, btw?
[21:07:06] <kvanb> try push eax
[21:07:07] <kvanb> ret
[21:07:16] <kvanb> That's the same as a jump, but theres more it can assemble with push
[21:07:41] <kvanb> or, wel, push ($0) or whatever
[21:07:45] <kvanb> sorry Im not too familiar with that syntax
[21:07:46] <rntz_> erickt: finger trees in rust
[21:07:52] <erickt> neat!
[21:07:57] <rntz_> erickt: I have a working implementation but it copies/allocates all over the place
[21:08:06] <rntz_> well, actually, not copies. mostly allocates.
[21:08:23] <rntz_> and now I'm trying to do ... less of that
[21:08:44] <jvns> kvanb: that seems to work!
[21:08:49] <kvanb> cheers!
[21:09:01] <kvanb> its not the most effecient I dont think
[21:09:01] <jvns> it's hard to tell exactly, because "it works" means "my program crashes in a different way"
[21:09:03] <kvanb> you might get a miss
[21:09:03] <jvns> thanks!
[21:09:07] <kvanb> is it performance critical?
[21:09:16] <jvns> kvanb: nah, I'm writing a toy kernel
[21:09:20] <jvns> I can do anything I want =)
[21:09:31] *** Joins: Kruppe (user@moz-EE1E894A.home3.cgocable.net)
[21:10:07] <rntz_> jvns: I mildly suggest just writing assembly functions and calling out to them instead of writing inline assembly.
[21:10:26] <jvns> rntz_: why?
[21:11:25] <rntz_> it's more robust against changes in language/compiler, it requires understanding only two things instead of three, and it encourages developing a stronger understanding of assembly itself
[21:11:41] <rntz_> it's not really that important, though.
[21:11:46] <kmc> i disagree with the latter point
[21:11:56] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:11:59] <kmc> writing inline assembly requires a strong understanding of assembly *and* of compilers :)
[21:12:07] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[21:12:23] <kmc> anyway a lot of things are either not possible or less efficient with out-of-line assembly
[21:12:27] <o11c> I prefer inline assembly just to keep my build process simpler
[21:12:31] *** Joins: kmag (kmag@28313FB8.D3BD3D1C.EACCA5E3.IP)
[21:12:42] <o11c> not that I actually use much assembly
[21:12:44] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[21:13:07] *** Quits: nathanic (nathan@D050B401.452FF057.EE6E63A5.IP) (Quit: Leaving.)
[21:13:31] *** Joins: ross (ross@moz-5EA04060.br.br.cox.net)
[21:13:31] <rntz_> kmc: efficiency is almost certainly not an issue. "not possible" is, I think, just false?
[21:13:34] *** Quits: lenstr (lenstr@4984E3F6.9636F313.7A27613B.IP) (Client exited)
[21:13:35] <kzzch> any of you guys done nand2tetris?
[21:13:47] <jvns> kzzch: no, but I know a bunch of people who have
[21:13:48] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[21:13:57] <rntz_> kmc: and yeah, needing to understanding how inline assembly interacts with your compiler is one of the *downsides* of inline assembly
[21:13:57] <kmag> Are any of the rest of you building on OSX seeing libuv.a being placed in the linker path?
[21:14:18] <rntz_> instead of just having to understand assembly and your language, you now have to understand assembly, your language, and the interface between them
[21:14:37] <jvns> yeah the inline assembly + compiler business is painful
[21:14:39] <kmc> rntz_: how would you do something like http://mainisusuallyafunction.blogspot.com/2011/11/self-modifying-code-for-debug-tracing.html without inline assembly
[21:14:39] <kmag> * libuv.a not being placed in the linker path.
[21:15:10] <kmag> What's the preferred pastebin?
[21:15:18] <bblum> rntz_: there is not but there should be a tutorial?
[21:15:24] <kimundi> gist is nice and has psydo rust highlining
[21:15:33] <kmc> (Linux kernel has a lot of tricks like this; it's not just for toys)
[21:15:45] <kimundi> kmc: https://gist.github.com/
[21:15:51] <kimundi> err, kmag ^
[21:16:07] <rntz_> bblum: I'm looking for more detail than a tutorial will give me, I suspect.
[21:16:20] <bblum> rntz_: your scenario is the match *p one, right?
[21:16:28] <rntz_> bblum: see the thing I pastebinned early
[21:16:30] <rntz_> *earlier
[21:16:37] <rntz_> http://sprunge.us/ZaTe?rust
[21:17:22] <kimundi> kmag: If you give the gist a name like "foo.rs" it will automatically highline it
[21:17:49] <rntz_> kmc: okay, I concede that particular thing looks difficult to do w/o inline assembler. I would call that "advanced magic", though. not the sort of thing you really need when implementing a basic kernel.
[21:18:02] <rntz_> the sort of thing you need to implement an industrial-strength kernel, sure.
[21:18:25] * rntz_ not opposed to inline assembly completely, just thinks it's overkill for most things
[21:18:42] <kvanb> the best thing would be for rust to have intrinsics.
[21:18:50] <kmc> it has many of them
[21:18:53] *** Parts: rfw (rfw@moz-7D453A5B.rfw.name) (Textual IRC Client: www.textualapp.com)
[21:19:05] <kvanb> clearly not one for jmp, even though its something you can do on every platform :P
[21:19:21] <bblum> rntz_: yeah i see you're trying to avoid an allocation there by reusing the pointer that 'p' is, right?
[21:19:23] <kmc> well it doesn't exactly fit the model where intrinsics are like functions :)
[21:19:40] <rntz_> bblum: yes.
[21:19:47] <bblum> interesting
[21:20:00] *** Quits: bvssvni (Mibbit@moz-CBD76C21.bb.online.no) (Ping timeout)
[21:20:03] <erickt> rntz_: could you do something like https://gist.github.com/erickt/8046150?
[21:20:07] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[21:20:30] <bblum> yeah rust doesn't... have... any sort of analysis that allows stuff to be partially moved without destructing the rest of the thing during the move
[21:20:34] <erickt> rntz_: oh, you're trying to reuse the box
[21:20:44] <bblum> so you need some way to take 'b' out and leave it in a still-defined state
[21:20:51] <rntz_> bblum: no, it can go into an undefined state
[21:21:00] <bblum> hm?
[21:21:18] <erickt> bblum / rntz_: you could move the box outside of the option
[21:21:23] <rntz_> I am fine with *p being treated as garbage, because it *is* garbage once I move stuff out of it
[21:21:27] <rntz_> but when I overwrite it later I am *making* it not garbage
[21:21:42] <bblum> yeah i see
[21:22:09] <bblum> this is sort of a typestate-like analysis that you want to happen here
[21:22:11] <rntz_> basically I don't see that writing to a "partially-moved" thing is a problem. reading from it, sure.
[21:22:30] <rntz_> bblum: well, "moved from" or "partially moved from" *are* typestate analyses, in a certain sense, yes.
[21:22:32] <bblum> "here, p : ~T <not garbage>, but after this operation p : ~T <garbage>"
[21:22:49] <rntz_> I read "moved from" as "garbage"
[21:22:53] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Quit: Leaving...)
[21:22:54] <rntz_> is that wrong?
[21:23:19] <bblum> no that's right; it's just that rust doesn't do this reasoning
[21:23:32] <rntz_> well, what reasoning *does* it do? :P
[21:23:52] <rntz_> this is why I want to read a paper on it
[21:23:52] *** Quits: samnardoni (samnardoni@moz-6E63ABD.dyn.plus.net) (Client exited)
[21:23:53] <rntz_> I want a deep understanding of it so I can formulate my questions in the proper way 
[21:23:59] *** Quits: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[21:24:05] <bblum> hmm
[21:24:15] <rntz_> erickt: yeah, that doesn't reuse the box.
[21:24:25] <kmag> My error with the linker not being able to find libuv <- https://gist.github.com/kmag/b63e0331c325ab9a2dac
[21:24:27] <rntz_> erickt: what is this enum NonEmpty { ..., Deep } thing?
[21:24:45] *** Quits: sellout (Adium@moz-AE26682A.hlrn.qwest.net) (Quit: Leaving.)
[21:24:55] <kmag> (trying to bulid rustc)
[21:24:57] <bblum> rntz_: well to be honest, if you read the old borrow-check paper, i think you would get the same insight about this partially-moved stuff as you would if there existed a paper on the modern borrow-checker
[21:25:06] <erickt> rntz_: this reuses the box: https://gist.github.com/erickt/8046150
[21:25:07] <bblum> rntz_: have you acquired the old borrow check paper?
[21:25:11] <rntz_> bblum: okay, where is the old borrow-check paper?
[21:25:22] <bblum> rntz_: i have it but we should ask nmatsakis 
[21:25:36] <erickt> rntz_: I didn't have all your code, so I took certain shortcuts
[21:25:44] <kvanb> llvm will hande an optimization like that
[21:25:45] <bblum> nmatsakis: can i show rntz the old borrow check paper?
[21:25:47] <Ms2ger> Ancient Chinese curse: "May you have a successful open source project."
[21:25:51] <nmatsakis> bblum: sure
[21:26:04] <erickt> Ms2ger: lol
[21:26:10] <kvanb> As long as its not a heap allocation, llvm is excellent at merging the stack and reusing it properly
[21:26:14] <rntz_> erickt: ah, that turns it into ~Option<NonEmpty<V,A>>, which is annoying b/c then I don't think it can be optimized into a nullable ptr?
[21:26:19] <rntz_> although, does rust do that optimization?
[21:26:52] <bstrie> rntz_: we do
[21:27:05] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[21:27:06] <rntz_> xlnt.
[21:27:15] <bstrie> if you mean turning Option<~4> into a nullable pointer at runtime
[21:27:15] *** Joins: samnardoni (samnardoni@moz-6E63ABD.dyn.plus.net)
[21:27:21] <erickt> rntz_: there's always one more layer of indirection. Option<~Option<NonEmpty<V>A>>> :D
[21:27:28] <rntz_> ugh ugh ugh
[21:27:38] <erickt> there's probably a better way to do that though
[21:29:22] *** Quits: jackneill (jackneill@moz-90B27085.pool.digikabel.hu) (Ping timeout)
[21:29:33] <erickt> rntz_: perhaps the Rc<T> type would work?
[21:29:55] <erickt> rntz_: I got to run to a meeting now though. back in an hour or so if you haven't figured out a better way to do it
[21:29:56] *** Quits: kvanb (kvanb@moz-F4E1EC66.vic.bigpond.net.au) (Quit: kvanb)
[21:30:13] <rntz_> erickt: hm, your gist involves copying something of type Option<NonEmpty<V,A>>
[21:30:20] <rntz_> not actually copying by rust's notion of copying, but byte-by-byte-copying it
[21:30:37] <rntz_> that may be the best I can hope for, but I'd like to avoid it if possible
[21:31:25] *** Joins: hoverbear (hoverbear@EBFA78B5.F19E5E7B.E74D50F2.IP)
[21:31:51] <rntz_> hah, "***self = Some(value)"
[21:31:57] <rntz_> triple-star programming
[21:32:11] <rntz_> ( http://c2.com/cgi/wiki?ThreeStarProgrammer )
[21:32:19] <Ms2ger> *#!2@self = Some(value)
[21:32:22] <Ms2ger> Perl programming
[21:32:35] <ziad> lol
[21:32:50] *** Quits: samx (sami@3EB32A7C.10A53EE3.77834EAA.IP) (Quit: This computer has gone to sleep)
[21:33:03] *** Joins: indirect (indirect@moz-3589B90B.c.ircrelay.com)
[21:33:47] <kimundi> let *x = &~@y;
[21:33:48] <kimundi> 1 + 3 pointer programming
[21:33:53] <kimundi> :P
[21:34:18] <kimundi> (darn, scratch that 'let')
[21:35:04] *** Quits: jix (jix@moz-D969BFFC.de) (Ping timeout)
[21:36:26] *** Joins: jix (jix@moz-D969BFFC.de)
[21:37:37] *** Quits: Blei (philipp@moz-B2F9E4BD.cust.bluewin.ch) (Quit: WeeChat 0.4.2)
[21:38:11] *** Quits: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net) (Input/output error)
[21:38:16] *** Joins: bjustin (bjustin@moz-8FC28563.sierrabravo.net)
[21:40:06] <bstrie> dbaupp: ping
[21:41:03] *** Joins: samx (sami@3EB32A7C.10A53EE3.77834EAA.IP)
[21:44:19] *** Quits: Kxepal (Miranda@moz-2ECA0CCA.pppoe.mtu-net.ru) (Ping timeout)
[21:45:24] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[21:45:37] *** Quits: Kruppe (user@moz-EE1E894A.home3.cgocable.net) (Client exited)
[21:45:38] *** Joins: Kxepal (Miranda@moz-FDC1ADF0.pppoe.mtu-net.ru)
[21:45:39] *** Joins: sigma (sigma@moz-6E1846A2.range86-184.btcentralplus.com)
[21:45:57] *** Parts: sigma (sigma@moz-6E1846A2.range86-184.btcentralplus.com) ()
[21:49:57] *** Joins: Jesin (Jesin@moz-63C897DA.res.lehigh.edu)
[21:50:42] *** Joins: sigma (sigma@moz-6E1846A2.range86-184.btcentralplus.com)
[21:51:01] *** Joins: kvanb (kvanb@moz-F4E1EC66.vic.bigpond.net.au)
[21:52:24] *** Quits: sigma (sigma@moz-6E1846A2.range86-184.btcentralplus.com) (Ping timeout)
[21:53:09] *** Quits: jvns (bork@87D98E32.4046EB22.428F94DD.IP) (Ping timeout)
[21:58:46] *** Joins: steven_is_false (user@moz-3861648A.dedicated.allstream.net)
[21:59:58] <steven_is_false> Hello. I'm porting some old code to the Rust channel changes and don't understand how to do a 'while port.peek() { port.try_recv() ...' pattern. Is this still possible?
[22:00:48] <Luqman> steven_is_false: just try_recv in a loop should work
[22:01:15] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[22:01:35] *** Joins: arrrrrrrrr (arrrrrrrrr@moz-81DA182F.dynamic.qsc.de)
[22:01:46] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[22:02:17] <steven_is_false> Luqman: How do I know if the chan on the other side has let go?
[22:02:26] *** Joins: AvianFlu (AvianFlu@974D245D.130DDD13.67CD788C.IP)
[22:02:43] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[22:03:29] <Luqman> steven_is_false: do you care if it's blocking?
[22:03:38] <steven_is_false> Luqman: Yes.
[22:03:55] <ChrisMorgan> steven_is_false: http://static.rust-lang.org/doc/master/std/comm/struct.Port.html#method.iter
[22:04:12] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[22:04:12] *** ChanServ sets mode: +ao dherman dherman
[22:04:16] <steven_is_false> ChrisMorgan: That blocks.
[22:04:18] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[22:04:30] <brson> acrichto: ^
[22:04:57] <brson> steven_is_false: I think try_recv in a loop is equivalent to what you wrote
[22:05:17] <brson> oh actually, maybe not. perhaps try_recv needs a tri-state return to express that
[22:05:25] *** Quits: Ferreus (ferreus@moz-6BEAFF81.pools.arcor-ip.net) (Quit: WeeChat 0.4.2)
[22:05:27] <steven_is_false> brson: yeah.
[22:05:34] <acrichto> steven_is_false: right now a port has no api method of knowing whether the other end has disconnected or not
[22:05:47] <acrichto> at least not without blocking
[22:05:57] <FreeFull> Enums
[22:06:00] <FreeFull> Solve everything
[22:06:55] <steven_is_false> I think maybe listening on whether the chan has disconnected shouldn't be supported.
[22:07:31] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[22:08:43] <steven_is_false> Well thanks for hearing my use case. Should I file a bug report?
[22:09:05] *** Joins: sigma (sigma@C91C7F36.70518F41.9D18269F.IP)
[22:09:15] <acrichto> steven_is_false: what do you mean?
[22:09:22] *** Quits: Ms2ger (Ms2ger@8B85F0F7.C5F25A2D.F15B0BB3.IP) (Quit: nn)
[22:09:57] <steven_is_false> acrichto: For how I can't do 'while port.peek() { match port.try_recv() ...'
[22:10:05] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[22:10:05] *** ChanServ sets mode: +ao pcwalton pcwalton
[22:10:41] <acrichto> steven_is_false: wait I'm confused, I forgot that try_recv blocked
[22:10:56] <acrichto> try_recv no longer blocks, so looping around try_recv is the exact same thing today
[22:11:11] <steven_is_false> acrichto: I can't tell if the chan at the end hung up.
[22:11:20] <steven_is_false> I mean got destroyed.
[22:11:21] <acrichto> steven_is_false: you also couldn't in that case
[22:11:30] <acrichto> peek() only returned whether there was data on the channel
[22:11:39] <acrichto> and then try_recv() extracted it
[22:11:49] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[22:11:49] *** ChanServ sets mode: +o tjc
[22:11:51] <steven_is_false> And try_recv used to give a None when the chan was destroyed
[22:12:12] <acrichto> so try_recv blocked
[22:12:20] <acrichto> try_recv was essentially renamed to recv_opt
[22:12:21] <steven_is_false> I need a combo of try_recv and try_opt I think
[22:12:40] <acrichto> what's the goal you're achieving? 
[22:12:43] <acrichto> semantically
[22:12:45] <steven_is_false> Anyways I need to go soon.
[22:13:09] <steven_is_false> I'll give a better explanation on a bug report later.
[22:13:14] <steven_is_false> Thank you for the help.
[22:13:26] *** Parts: steven_is_false (user@moz-3861648A.dedicated.allstream.net) (ERC Version 5.3 (IRC client for Emacs))
[22:13:36] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[22:16:01] *** Joins: dkeenaghan (dkeenaghan@A9F153F4.DDE28F19.986A907C.IP)
[22:16:41] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[22:18:27] *** Quits: jlong (jlong@moz-6DFDE846.socal.res.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[22:21:45] <carter> bascule: yay, you chimed in again
[22:22:32] <bascule> yeah, finally
[22:22:45] *** Quits: samx (sami@3EB32A7C.10A53EE3.77834EAA.IP) (Quit: This computer has gone to sleep)
[22:22:59] <bascule> Chuck Remes pinged me that there was too much "unbounded" (or rather, system resource bounded) queues are fine pushback
[22:23:15] <bascule> mostly by Go users with blocking channels writing toy programs o_O
[22:23:31] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[22:23:45] <carter> chuck is who?
[22:24:30] <carter> the dude could have just set the bound to like 100,000, thats enough for a one person irc server thats not a spam bot
[22:25:06] <ChrisMorgan> He also says he thinks Go allocates that space. (I don't know.)
[22:25:06] *** Joins: brendan (brendaneic@moz-569CD944.tor.primus.ca)
[22:25:48] <carter> i know nothing
[22:25:59] <ChrisMorgan> https://github.com/chris-morgan/rust-http/pull/49 makes rust-http compile with --dylib --rlib. What value is gained from compiling the rlib file thus? (acrichto?)
[22:26:08] *** Quits: bjustin (bjustin@moz-8FC28563.sierrabravo.net) (Ping timeout)
[22:26:11] <carter> i read about how they're doing the go compiler rewrite from c using a code gen thingy
[22:27:45] <acrichto> ChrisMorgan: dylib == dynamic linking rlib == static linking
[22:28:17] <ChrisMorgan> acrichto: what effect will that have on everything?
[22:28:46] <acrichto> ChrisMorgan: when we generate an object file in LLVM, we both use that object file to produce a dylib and also produce an rlib (an archive essentially)
[22:28:59] <acrichto> so compile times would increase in order to create the rlib (very small amount of time) and that's about it
[22:29:15] <acrichto> you'll basically have 2 outputs for each compile
[22:29:18] *** Quits: samnardoni (samnardoni@moz-6E63ABD.dyn.plus.net) (Client exited)
[22:29:21] <ChrisMorgan> Are there any benefits to it?
[22:29:35] <acrichto> to an rlib?
[22:29:46] <ChrisMorgan> Well, to compiling both, for something like rust-http.
[22:29:55] *** Joins: trecer (trecer@moz-3A571AF4.dyn.centurytel.net)
[22:30:08] <ChrisMorgan> (The rules are used for the http crate, also for building example binaries.)
[22:30:36] <acrichto> well it's kinda just what flavor of linking you want to work with
[22:30:43] <acrichto> if only want dynamic, then no need for an rlib
[22:30:47] <acrichto> if you want to support static, then you need an rlib
[22:31:01] <acrichto> you also cannot LTO with a dylib, but you can LTO with an rlib
[22:31:23] <diverse> what is LTO?
[22:31:30] <ChrisMorgan> Link Time Optimisation
[22:31:33] <diverse> thanks
[22:32:15] <TobiasFar> acrichto: hi. i was told you might have a clue why a static rust lib would result in undefined reference when linking it to other C/C++ code: http://nopaste2.doomsong.co.uk/1387459679.php
[22:33:08] <acrichto> TobiasFar: ah, try compiling with -Z gen-crate-map
[22:33:08] *** Quits: AvianFlu (AvianFlu@974D245D.130DDD13.67CD788C.IP) (Connection reset by peer)
[22:33:16] *** Joins: AvianFlu (AvianFlu@974D245D.130DDD13.67CD788C.IP)
[22:33:31] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[22:33:35] <TobiasFar> acrichto: thanks, will give that a shot
[22:33:45] <acrichto> that should probably be the default for a staticlib
[22:33:58] <acrichto> and the option should just get removed entirely possible
[22:34:00] <acrichto> possibly*
[22:34:20] *** Quits: jaen (jaen@moz-4BB2EDEF.play-internet.pl) (Ping timeout)
[22:34:25] <TobiasFar> possibly..is the .a going to be useful to anyone without the flags? well maybe when linking it to other rust code
[22:35:04] <acrichto> hm, I haven't seen a large amount of usage with .a files, but it is my intent to have one .a per process
[22:35:17] <acrichto> on rust .a that is, because otherwise you have multiple copies of the standard library
[22:35:20] <TobiasFar> yay...it works :D
[22:35:22] <TobiasFar> thanks a buch
[22:35:25] <TobiasFar> *bunch
[22:36:57] <TobiasFar> acrichto: my use case is having existing code/kernel written in C for constrained micro controllers but wanted to write apps for it in rust...so i though compiling my rust code to a C lib and have that called
[22:37:14] <arrrrrrrrr> what's the purpose of empty structs?
[22:37:15] <TobiasFar> since rust might provide nicer ways of abstraction compared to plain C
[22:37:47] <acrichto> TobiasFar: awesome! that's exactly what I was hoping --staticlib would be used for :)
[22:37:55] <ChrisMorgan> arrrrrrrrr: good for implementing a trait on when you have no data to contain.
[22:38:12] <kmc> arrrrrrrrr: or you can use them with phantom type parameters: http://bluishcoder.co.nz/2013/08/15/phantom_types_in_rust.html
[22:38:34] <ChrisMorgan> arrrrrrrrr: https://github.com/chris-morgan/rust-http/blob/master/src/examples/server/apache_fake/main.rs is an example
[22:39:22] *** Joins: autra (augustin@moz-BE76895F.fbx.proxad.net)
[22:40:13] <kmc> arrrrrrrrr: another example is, say you're binding to a C library which requires a global initialization step, you could wrap that using an empty «struct LibraryHandle;» with «fn new() -> LibraryHandle { do_global_init(); LibraryHandle }» and then other methods require passing a LibraryHandle
[22:40:25] <kmc> however I think that in Rust you would actually need it to be a struct with a private field, not an empty struct
[22:40:30] <arrrrrrrrr> What if I need some init code and want to make sure that this code is called before other functions are executed. Should I use a struct with one private field, put the init code in the constructor and have the other functions that rely on the init code as methods?
[22:40:44] <kmc> because there's no way to export a struct type without exporting the ability to construct that struct (unlike Haskell)
[22:41:13] <kmc> but you could make it a private field whose type is an empty struct, so that the whole thing has size 0
[22:41:21] <kmc> then you can pass it by value with no runtime overhead, I believe
[22:41:22] <arrrrrrrrr> ok :) you already answered my question
[22:41:33] *** Joins: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net)
[22:41:33] *** ChanServ sets mode: +ao dherman dherman
[22:42:32] <ChrisMorgan> steveklabnik: you support using Sphinx? Yay! \o/
[22:42:46] <steveklabnik> yeah, seems good.
[22:42:55] <steveklabnik> i prefer markdown to reST but i think sphinx works
[22:42:59] *** Quits: sigma (sigma@C91C7F36.70518F41.9D18269F.IP) (Ping timeout)
[22:43:00] <steveklabnik> also it's something that WE don't need to maintain
[22:43:34] <ChrisMorgan> (Except for the Rust domain and autodoc integration.)
[22:43:46] <ChrisMorgan> But that's certainly much simpler to maintain.
[22:45:03] <steveklabnik> yeah
[22:45:16] *** Joins: awidegreen (awidegreen@moz-3FEC4684.dip0.t-ipconnect.de)
[22:45:52] *** Quits: jessta (jessta@moz-9DDA1270.dyn.iinet.net.au) (Ping timeout)
[22:46:06] *** Quits: exobit_ (textual@moz-E06F46F0.corp.bitshelter.com) (Quit: )
[22:46:25] *** Quits: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net) (Quit: dherman)
[22:46:46] *** Quits: trecer (trecer@moz-3A571AF4.dyn.centurytel.net) (Connection reset by peer)
[22:46:57] *** Joins: trecer (trecer@moz-3A571AF4.dyn.centurytel.net)
[22:47:05] <ChrisMorgan> Sounds like I need to work on producing a proof of concept.
[22:47:07] *** Quits: awidegreen (awidegreen@moz-3FEC4684.dip0.t-ipconnect.de) (Ping timeout)
[22:47:28] <arrrrrrrrr> rusti: let x = 1u; let y = 1i; let z = x + y; x + y
[22:47:43] <arrrrrrrrr> :(
[22:48:04] <diverse> ChrisMorgan: I thought your presentation with using Sphinx was pretty great.
[22:48:48] *** Joins: canhtak (canhtak@moz-258236CD.wl.t.ulaval.ca)
[22:49:26] <ChrisMorgan> brson (or other members of the core team): have you any opinions on my suggestion of using Sphinx for documentation?
[22:49:54] <arrrrrrrrr> When a function always retuns non-negative numbers, should I make the rv uint or should I make it int for convenience?
[22:50:10] <carter> arrrrrrrrr: how is int convenient?
[22:50:24] <arrrrrrrrr> 1i + 1u is a compile error
[22:50:30] <arrrrrrrrr> most numbers will be int
[22:50:37] <arrrrrrrrr> so making everything int is convenient
[22:50:49] <ChrisMorgan> arrrrrrrrr: what type of function is it?
[22:50:59] <arrrrrrrrr> returns the width of an image
[22:51:11] <ChrisMorgan> Sounds to me like it should definitely be an unsigned quantity.
[22:51:30] *** Joins: awidegreen (awidegreen@moz-3FE0A1F.a357.priv.bahnhof.se)
[22:51:45] *** Quits: trecer (trecer@moz-3A571AF4.dyn.centurytel.net) (Quit: Computer has gone to sleep.)
[22:51:58] *** Quits: Jesin (Jesin@moz-63C897DA.res.lehigh.edu) (Quit: Leaving)
[22:52:06] *** Joins: trecer (trecer@moz-3A571AF4.dyn.centurytel.net)
[22:52:14] <ChrisMorgan> For something like sqrt or log (assuming I was dealing with integral output), I'd probably use a signed type for consistency, but for most things unsigned is the only semantically correct and valid type.
[22:52:49] <arrrrrrrrr> ok (log can return negative numbers though)
[22:53:12] <ChrisMorgan> Sorry, I was thinking of exponent
[22:53:49] *** Quits: trecer (trecer@moz-3A571AF4.dyn.centurytel.net) (Ping timeout)
[22:54:13] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[22:54:29] *** Joins: a_m0d|home (a_m0d@FB867915.4D8CD4E4.6D7C4B99.IP)
[22:54:33] <diverse> wouldn't odd numbered exponents return a negative number if the original number was negative?
[22:55:20] <dbaupp> bstrie: pong
[22:55:33] <arrrrrrrrr> diverse: sure, I guess he is talking about exp()
[22:55:45] *** Quits: a_m0d|home (a_m0d@FB867915.4D8CD4E4.6D7C4B99.IP) (Quit: Leaving.)
[22:55:52] <ChrisMorgan> Yeah, I mean the inverse function of log.
[22:57:03] *** Quits: rca_ (rcatolino@moz-E8A296BC.adsl.proxad.net) (Ping timeout)
[22:57:19] <brson> ChrisMorgan: I have two worries about it: 1) Markdown has won the markup wars and is the safe bet, 2) Adding python to our users' toolchain is a big step - right now it's pure Rust
[22:58:02] <ChrisMorgan> Both valid concerns, especially the second one.
[22:58:13] *** Quits: fabiand (fabiand@moz-D89BFBB9.adsl.alicedsl.de) (Quit: Verlassend)
[22:59:05] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[22:59:24] <ChrisMorgan> Personally, I think that reStructuredText's extensibility and sanity of design outweighs Markdown's popularity—it's got plenty built in that we'd need to implement in Markdown in a way that would still require others to learn additions of the language.
[22:59:41] *** Joins: nif (nif@moz-8181E2AC.oberlin.net)
[23:00:36] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[23:01:00] *** Quits: kzzch (kzzch@moz-991A24E8.hsd1.va.comcast.net) (Quit: WeeChat 0.4.1)
[23:01:12] *** Quits: hacker_sam (hacker_sam@2EE27BB6.661C02A7.B0CE379A.IP) (Ping timeout)
[23:01:24] *** Joins: hacker_sam (hacker_sam@2EE27BB6.661C02A7.B0CE379A.IP)
[23:01:27] <bstrie> brson: but isn't our doc toolchain already in pandoc (haskell) and node?
[23:01:37] <ChrisMorgan> No, it's pure Rust now.
[23:01:42] <bstrie> neat
[23:01:47] <ChrisMorgan> (Apart from sundown, which is C or C++.)
[23:02:04] <o11c> ooh, I can remove pandoc?
[23:02:20] <bstrie> dbaupp: I'm taking a rust hiatus for the holidays. according to this browser extension, I've given you more reddit upvotes than anyone else. wanna handle /r/rust for me until I get back?
[23:02:32] <ChrisMorgan> (When I gave the presentation I forgot that we'd shifted away from pandoc.)
[23:02:37] <brson> bstrie: that part of the toolchain is only for the main rust repo
[23:02:46] <brson> bstrie: and i think it should all be folded into rustdoc anyway
[23:02:54] <bstrie> I agree
[23:03:02] <ChrisMorgan> Being dependent upon Python and Sphinx for building documentation is, I think, the most serious concern. Is it a problem? When we were dependent upon pandoc, it was an external tool that people needed to have installed, or they wouldn't be able to build the documentation. By moving to Sphinx, we would in this way regress, but only to a state that we coped with before.
[23:03:04] *** Quits: AvianFlu (AvianFlu@974D245D.130DDD13.67CD788C.IP) (Connection reset by peer)
[23:03:05] <brson> (or whatever doc tool we settle on)
[23:03:34] *** Joins: AvianFlu (AvianFlu@974D245D.130DDD13.67CD788C.IP)
[23:03:43] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[23:03:50] <ChrisMorgan> brson: do you know of any alternatives which would tackle the entire space that Sphinx would?
[23:03:53] <bstrie> brson: but I don't think that markdown has quite won the markup wars when it comes to language documentation. as far as I know, there's nothing that's even near the same league as sphix
[23:04:07] <diverse> ChrisMorgan: port Sphinx to rust?
[23:04:10] <dbaupp> bstrie: oh, awesome... I'm not going to be around 100% of the time, but I'm happy to assist when I am around
[23:04:28] <ChrisMorgan> diverse: I don't think that's productive as a first step. Later, maybe.
[23:04:55] <bstrie> dbaupp: invited
[23:04:56] <o11c> even though sphinx is an external dep like pandoc, python is a lot more likely to be on people's systems ...
[23:04:58] *** flaper87 is now known as flaper87|afk
[23:05:35] <bstrie> dbaupp: once you accept, there will be a toolbox on the right of the subreddit. just check the moderation queue once a day or so, and make sure nobody's trolling
[23:05:43] <ChrisMorgan> I'm not saying that Sphinx is the only option for doing the documentation well, but I do firmly believe that it is the best tool for the job that exists at present, by a considerable margin.
[23:06:07] <ChrisMorgan> bstrie: when you get /r/playrust/ misposts, do you delete them?
[23:06:13] <bstrie> ChrisMorgan: yes
[23:06:29] <diverse> maybe Sphinx could be used as a model for improving our existing doc tools?
[23:06:55] <dbaupp> bstrie: seems to work :)
[23:07:03] <bstrie> ChrisMorgan: I've put the string "The Rust Programming Language" in FOUR places on that page, including literally ten pixels below the "submit" button. they get no sympathy from me
[23:07:58] *** nrc is now known as nrc|lunch
[23:08:42] <diverse> bstrie: like a boss :)
[23:08:49] <dbaupp> bstrie: I'll try not to break everything :P
[23:09:08] <bstrie> dbaupp: oh perfect, there's a thing to do. go to the moderation queue and click remove on that link
[23:09:21] <bstrie> if you do so, you will have completed the tutorial and will receive an achievement
[23:09:22] *** Joins: andreypopp (andreypopp@moz-7261DC60.net)
[23:09:33] <ChrisMorgan> diverse: that would be a rather large undertaking which would involve rearchitecting it rather significantly and making it do something quite different from what it does now.
[23:09:36] <o11c> diverse: despite the attraciteness, writing all your own tools is not the best idea ...
[23:10:08] <ChrisMorgan> We simply don't have time to do it that way.
[23:10:20] <diverse> alright, I'll shutup now.
[23:10:39] * dbaupp achievement get
[23:10:45] <ChrisMorgan> The problem is that we want decent docs by 1.0. In the long term, writing a tool in Rust may be a good way of doing it, but not yet.
[23:11:12] <dbaupp> bstrie: fwiw, I'll be (approximately) disappearing for the next week from today or tomorrow.
[23:11:21] <bstrie> dbaupp: damn it! :P
[23:11:45] * bstrie bans dbaupp from reddit forever
[23:12:23] * dbaupp has mod powers now, muahahaha
[23:12:29] *** Quits: devbug (quassel@2D4E172D.4C8B6099.9B57EA59.IP) (Input/output error)
[23:14:02] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[23:15:07] *** Quits: autra (augustin@moz-BE76895F.fbx.proxad.net) (Ping timeout)
[23:15:53] <ziad> woah, Rust is a game now? :P
[23:16:26] <tjc> Sure
[23:16:30] <tjc> the game is to get your code to compile :-)
[23:16:43] <ziad> hehe
[23:18:02] *** Joins: skade (skade@moz-B73EE4D5.pools.arcor-ip.net)
[23:18:54] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[23:18:55] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[23:18:57] <eevee> i lose  :(
[23:19:13] *** Quits: skade (skade@moz-B73EE4D5.pools.arcor-ip.net) (Quit: Textual IRC Client: www.textualapp.com)
[23:20:29] <o11c> eevee: me too
[23:20:39] *** Joins: gdey (gdey@moz-CD850554.static-ip.telepacific.net)
[23:21:39] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[23:21:45] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[23:22:22] <arrrrrrrrr> if I implement a trait for &[&A], is it automatically implemented for &[A]?
[23:22:30] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[23:22:52] <brson> ChrisMorgan: no i don't know anything else that compares to sphinx
[23:23:29] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[23:23:49] <ChrisMorgan> I didn't look around much this time, but I know that a few years ago when I was searching fairly thoroughly I deemed Sphinx the only tool in its league.
[23:24:38] *** Joins: jlong (jlong@moz-6DFDE846.socal.res.rr.com)
[23:24:40] <bstrie> eevee: you're super into python, should we start using sphinx even if it means giving up markdown for rest?
[23:24:55] <bstrie> how good is sphinx compared to literally everything else, is what I'm asking
[23:25:19] *** Quits: dkeenaghan (dkeenaghan@A9F153F4.DDE28F19.986A907C.IP) (Connection reset by peer)
[23:25:20] <eevee> bstrie: sphinx's *output* is pretty fantastic; i just don't like reST's very nuanced use of punctuation
[23:25:34] <eevee> offhand i can't think of much friendlier documentation i've seen
[23:26:24] *** Quits: brendan (brendaneic@moz-569CD944.tor.primus.ca) (Quit: brendan)
[23:28:03] * ChrisMorgan points out that Markdown is just as nuanced, with [link](target), [link][indirect-target], tack a ! on at the start to make it an image, &c.
[23:28:12] *** Joins: samx (sami@8131C247.96CB7DCC.284344F5.IP)
[23:28:18] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[23:29:11] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[23:29:19] *** Joins: brendan (brendaneic@moz-569CD944.tor.primus.ca)
[23:29:36] *** Joins: samnardoni (samnardoni@moz-6E63ABD.dyn.plus.net)
[23:29:56] <Earnestly> Indeed, rst is much better suited.  Markdown is for emails ;p
[23:30:29] * ChrisMorgan thinks reStructuredText works just as well for emails
[23:30:34] <Earnestly> I agree
[23:30:48] <mcpherrin> Markdown is shorthand HTML, and trying to turn it into anything more is dumb
[23:31:26] *** Quits: samnardoni (samnardoni@moz-6E63ABD.dyn.plus.net) (Ping timeout)
[23:32:09] *** Quits: maxiepoo (Max@68A63377.C44F889.D279C981.IP) (Quit: maxiepoo)
[23:32:55] <ChrisMorgan> I see very strong similarities between PHP and Markdown: they are both things that were designed for fairly limited usage but which became extremely popular and which at the same time are disasters in their design and architecture, at the scale that they're being used at. (And both of which are undergoing some reforms, though PHP is further down the reform path than Markdown.)
[23:33:53] <benh> harsh
[23:34:47] <ChrisMorgan> Yes, I suppose that is a rather harsh judgement. But do you disagree with it?
[23:35:45] <mcpherrin> my docs at work are in Markdown and it's pretty convenient for that -- but only because it's less HTML to write and it's just targetting html
[23:36:12] <benh> I don't have a preference for markdown as the doc comment syntax, not arguing :)
[23:36:15] <bascule> I like Markdown's aesthetics
[23:36:22] <bascule> PHP code, on the other hand, looks like shit
[23:36:42] <bascule> that's not to say that Markdown is good, but at least it isn't ugly
[23:37:06] *** Quits: txdv (quassel@966F3542.3BA477DA.14C26596.IP) (Ping timeout)
[23:37:40] *** Joins: txdv (quassel@966F3542.3BA477DA.14C26596.IP)
[23:39:24] <bstrie> the biggest problem with markdown is that you have to resort to unstandardized extensions to make embedding code sane
[23:39:31] <bstrie> four spaces before every line is beyond tedious
[23:39:34] *** Quits: brendan (brendaneic@moz-569CD944.tor.primus.ca) (Quit: brendan)
[23:39:59] *** Quits: c-a (c-a@moz-57C82A9.a163.priv.bahnhof.se) (Client exited)
[23:40:06] <benh> or to make it rust-colored, anyway
[23:40:10] <bstrie> honestly, you could cut the markdown "spec" in half, add code fences, and you'd have what is basically the perfect markup language
[23:40:51] <tiffany> it's not tedious if you have vim
[23:40:53] <ChrisMorgan> bstrie: reStructuredText uses indentation
[23:40:53] <bstrie> mmmaaaayyyyybbbee also add footnotes
[23:40:59] <tiffany> v, press down arrow a few times, >
[23:41:00] <bstrie> ChrisMorgan: garbage, then
[23:41:02] <arrrrrrrrr> how do I find out which functions are defined on &[A] types?
[23:41:05] <bstrie> code fences or gtfo
[23:41:29] <tiffany> if it's short enough to count in 1 second you could even do like 4vv>
[23:41:36] <bstrie> tiffany: you can also just press a number key, then >>
[23:41:47] <ChrisMorgan> Normal text editors can manipulate such stuff just fine, though the simplest of text editors may not cope well.
[23:41:50] <ChrisMorgan> >}
[23:41:54] <tiffany> oh right
[23:42:04] <diverse> :set shiftwidth=4
[23:42:35] <benh> I'm not the hugest of fans of markdown when it comes to nesting things
[23:42:36] <bstrie> tiffany: count no more!! https://github.com/myusuf3/numbers.vim
[23:42:37] <ChrisMorgan> reStructuredText doesn't require a certain level of indentation, though; the level that is used is dependent upon conventions.
[23:42:49] <benh> and there's a lot of corner cases where it doesn't seem to work quite right
[23:43:08] *** Joins: maxiepoo (Max@68A63377.C44F889.D279C981.IP)
[23:43:11] <ChrisMorgan> benh: yes, reStructuredText is more predictable in that regards.
[23:43:34] <ChrisMorgan> bstrie: a lot of my problem with Markdown is its lack of extensibility. reStructuredText solves that neatly with its roles and directives.
[23:44:54] *** Joins: frau (frau@moz-AB2811F6.vc.shawcable.net)
[23:45:25] *** Quits: AvianFlu (AvianFlu@974D245D.130DDD13.67CD788C.IP) (Input/output error)
[23:45:27] <frau> okay, error_result.unwrap() gives me , /Users/paul/rust/src/libstd/result.rs:192
[23:45:30] <frau> whoops
[23:45:40] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Quit: Leaving)
[23:45:42] <frau> gives me: task '<main>' failed at 'called `Result::unwrap()` on an `Err` value'
[23:46:09] <arrrrrrrrr> how do I find out which functions are defined on &[A] types?
[23:46:21] <frau> any particular reason why my error result.unwrap() doesn't dump the Err string?
[23:46:22] <cmr> arrrrrrrrr: guess
[23:46:30] <benh> read vec.rs in src/libstd imo
[23:46:33] <cmr> frau: the type contained by Err is arbitrary
[23:46:40] <bstrie> arrrrrrrrr: intellisense
[23:46:45] <bstrie> arrrrrrrrr: btw please implement intellisense
[23:46:47] <frau> cmr: oh whoops you're right! why did I think it was always a string
[23:46:58] *** Quits: MrByte (Dartakio@moz-81792842.chy-wy.client.bresnan.net) (Quit: )
[23:48:12] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[23:49:11] <diverse> bstrie: https://github.com/Shougo/neocomplete.vim ?
[23:49:12] <arrrrrrrrr> cmr: benh: bstrie: It's len(), who would have though.
[23:52:06] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Quit: Lost terminal)
[23:52:51] *** Joins: bvssvni (Mibbit@moz-CBD76C21.bb.online.no)
[23:56:49] <bvssvni> how do I clone a borrowed str and convert it into an owned str?
[23:57:08] *** Joins: Skif_ (emschwar@moz-CA025D57.ip.mcleodusa.net)
[23:57:25] <dbaupp> bvssvni: .to_owned()
[23:57:37] <bvssvni> dbaupp: thanks
[23:58:16] *** Quits: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net) (Ping timeout)
[23:58:26] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Quit: Leaving...)
[23:58:27] *** Quits: samx (sami@8131C247.96CB7DCC.284344F5.IP) (Quit: This computer has gone to sleep)
[23:58:54] *** Quits: Skif_ (emschwar@moz-CA025D57.ip.mcleodusa.net) (Ping timeout)
