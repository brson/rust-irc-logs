[00:00:07] <Eridius> anyway, the point is you're basically wrapping a stream with Chan/Ports, and you can select over Ports
[00:00:30] <nham> Eridius: oops, sorry. env is:    env: &'a mut Env
[00:00:43] <Eridius> nham: I'm quite curious as to what the automatic coercion is, then
[00:01:06] <Eridius> nham: I also have to wonder if the problem is &'a mut Env<'a>, i.e. requiring the same lifetime for the reference as is in the struct utself
[00:01:09] *** flaper87 is now known as flaper87|afk
[00:01:09] <Eridius> *itself
[00:01:16] <Eridius> which actually might be the problem
[00:01:28] <dwrensha> Eridius: what do you mean by "the cloning is only necessary if you need bidirectional"?
[00:01:29] <LordAro> Eridius: bidirectional is needed :L
[00:01:51] <Eridius> dwrensha: if you want to purely read you can just hand the stream off to the task. Cloning is only necessary if you're making two tasks, one for reading and one for writing
[00:02:10] <LordAro> Eridius: so, you're saying that there's no good way of doing multiple tcp connections (yet)? not at all? even a completely different approach to it?
[00:02:16] *** Joins: alex__ (alex@moz-7421D6C9.mc.videotron.ca)
[00:02:18] <Eridius> LordAro: a big downside to this approach is the writing end can't provide any backpressure. If the write end of the stream fills up and starts blocking, any writes you make will buffer indefinitely in the Chan that you're using
[00:02:37] *** Quits: alex_abreu (alex@moz-7421D6C9.mc.videotron.ca) (Ping timeout)
[00:03:08] <Eridius> LordAro: there's a lot of discussion at https://github.com/mozilla/rust/issues/11165
[00:04:21] <LordAro> i see, thanks
[00:04:25] <LordAro> hmm, annoying though :L
[00:04:53] <Eridius> LordAro: indeed, which is why the issue is milestoned for 1.0 and has P-high ;)
[00:04:58] <LordAro> :)
[00:05:09] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[00:05:13] <LordAro> what about reading/writing asyncronously?
[00:05:28] <LordAro> is that in progress? or is there other ways of doing that?
[00:05:44] <dwrensha> Eridius: that's right. Perhaps it'd be a bit clearer to say "cloning is only necessary if you need to shared the streams among multiple tasks"
[00:05:51] <Eridius> only solution is the same workaround: use tasks and talk to it with Chans
[00:05:53] *** Joins: lpy (lpy@DE46E67C.1B5A1487.7CEBAF5A.IP)
[00:05:58] *** Joins: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP)
[00:06:05] <LordAro> "Chans" not sure what you mean
[00:06:06] <LordAro> ?
[00:06:12] <Eridius> std::comm
[00:06:17] <Eridius> Chan/Port are how you communicate between tasks
[00:06:22] <dwrensha> Eridius: why do you call that a "workaround"? it seems like a natural solution to me.
[00:06:25] <LordAro> oh, i see
[00:06:42] *** Quits: erickt (Adium@moz-E76D6BBE.lightspeed.okldca.sbcglobal.net) (Quit: Leaving.)
[00:06:56] <Eridius> dwrensha: it's not actually async. It's just blocking a task
[00:07:15] <Eridius> and of course if the current task is using libnative, then that will spawn a whole thread
[00:07:55] *** Quits: lpy (lpy@DE46E67C.1B5A1487.7CEBAF5A.IP) (Ping timeout)
[00:09:16] <dwrensha> Chans are a means of communicating asynchronously between tasks, and can be used to implement futures
[00:09:28] <dwrensha> I don't see what's not "async" about them
[00:10:01] <dwrensha> Do you mean that you don't program like you would in node.js?
[00:10:04] *** Quits: Zylinski (karl@moz-E08C6219.tbcn.telia.com) (Quit: Zylinski)
[00:10:09] <Eridius> dwrensha: when someone says "reading/writing async" in reference to tcp streams, I assume they mean using async reading/writing support of the OS
[00:10:16] <dwrensha> ah
[00:10:16] <Eridius> as opposed to literally blocking a task internally
[00:10:22] <Eridius> which works for libgreen but is crappy for libnative
[00:10:49] *** Quits: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP) (Ping timeout)
[00:10:50] <dwrensha> so you mean "non-blocking syscalls"?
[00:11:11] <Eridius> sure
[00:11:16] *** Joins: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP)
[00:11:27] *** Quits: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net) (Client exited)
[00:11:46] *** Joins: hdevalence (quassel@moz-D125A39F.home3.cgocable.net)
[00:12:15] <gonkun> Is it possible to get a file's file descriptor?
[00:12:31] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[00:12:59] <Eridius> gonkun: probably not. on libgreen file I/O goes through libuv anyway
[00:13:38] <gonkun> k
[00:13:53] <Eridius> gonkun: if you use libnative directly you can get a file handle that provides access to its fd: http://static.rust-lang.org/doc/master/native/io/file/index.html
[00:14:17] <Eridius> but you should only do that if you're actually using libnative for tasks. Otherwise you'll block the whole OS thread which will make libgreen behave badly
[00:14:44] *** Joins: justin_ (justin@moz-26376CC7.bootp.virginia.edu)
[00:14:49] <gonkun> Eridius: thanks for the heads up
[00:14:50] *** Quits: justin (justin@moz-26376CC7.bootp.virginia.edu) (Quit: Konversation terminated!)
[00:15:54] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[00:16:00] *** Joins: lenstr (lenstr@6CD9B9BF.9636F313.7A27613B.IP)
[00:17:48] *** Quits: lenstr (lenstr@6CD9B9BF.9636F313.7A27613B.IP) (Ping timeout)
[00:18:40] *** Quits: justin_ (justin@moz-26376CC7.bootp.virginia.edu) (Connection reset by peer)
[00:18:40] *** Joins: justin__ (justin@moz-26376CC7.bootp.virginia.edu)
[00:19:08] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[00:20:03] *** Joins: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[00:20:26] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[00:20:55] *** Quits: moostik (Thunderbir@6181009C.10715965.BCDF592F.IP) (Ping timeout)
[00:20:55] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Ping timeout)
[00:20:55] *** Joins: WebeWizard (WebeWizard@moz-7CCD1DAE.ks.ks.cox.net)
[00:21:04] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[00:21:14] <WebeWizard> Wiiizzzzaaarrrrrd
[00:22:43] *** Quits: gonkun (Mibbit@98EA214A.2F87036F.DDE5D3F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[00:23:25] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[00:23:25] *** ChanServ sets mode: +ao dherman dherman
[00:23:36] *** Joins: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net)
[00:23:55] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[00:24:30] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[00:24:31] <quux00> Rust newbie question - what would be the right idiom/approach to peeking at the next value of an iterator and then deciding to grab it?
[00:24:32] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[00:24:38] <quux00> I tried this: https://gist.github.com/quux00/8892386
[00:24:39] *** Joins: moostik (Thunderbir@6181009C.10715965.BCDF592F.IP)
[00:24:53] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[00:24:53] <quux00> But I'm getting the error: cannot borrow `iter` as mutable more than once at a time
[00:25:13] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[00:25:14] <Eridius> quux00: lines 4-7 can be replaced with `for c in iter {`
[00:26:04] <Eridius> well, I guess it can't if you need to cycle the iterator in the loop
[00:26:05] <Eridius>  so belay that
[00:26:22] <quux00> Right  I want to do a peek in one particular scenario
[00:26:30] <Eridius> quux00: peekopt is Option<&'a T> where 'a is the lifetime of the iterator
[00:26:35] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[00:26:41] <Eridius> quux00: you need to make the borrowchecker happy
[00:26:56] *** Quits: fhahn (fhahn@moz-7924DB5C.vie.surfer.at) (Ping timeout)
[00:26:56] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[00:26:58] <quux00> Yeah, I hate that guy :)  He's frequently unhappy with me.
[00:27:07] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[00:27:11] <Eridius> quux00: try something like `if iter.peek().map(|&c| c) == Some('>') {`
[00:27:13] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[00:27:16] *** Quits: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Client exited)
[00:27:59] *** Joins: tjc (tjc@moz-9E9433BA.tmodns.net)
[00:27:59] *** ChanServ sets mode: +o tjc
[00:28:02] <quux00> Good grief.  OK.  I'll think on that.  It seems like overkill for such a simple thing.
[00:28:16] <Eridius> well, fundamentally, you need peekopt to be out of scope by the time you touch the iterator again
[00:28:36] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[00:28:36] <Eridius> the simplest way is to get rid of peekopt entirely. That if condition is reasonably simple
[00:28:48] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Input/output error)
[00:29:03] <Eridius> you could also use `let cnext = iter.peek().map(|&c| c); if cnext.is_some() && cnext.unwrap() == '>' {` if you want, but I think my first suggestion is actually simpler
[00:29:31] *** Joins: dukeleto (dukeleto@moz-C083E0FB.ptld.qwest.net)
[00:30:11] <quux00> Eridius: I just tried getting rid of the peekopt variable and just calling peek() twice - that worked.
[00:30:20] <Eridius> well, you can do that too if you want
[00:30:26] <WebeWizard> huzzah
[00:30:37] <quux00> I'll think on the other options now.  Thanks.
[00:31:59] *** Joins: bjz_ (bjz@B398BE78.F804C29E.D35A31DF.IP)
[00:32:06] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[00:33:15] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[00:33:26] <yuriks> gah, how do I compare a ~str and &str for equality? o_o
[00:33:39] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[00:33:46] <yuriks> these reference coercion rules are way unintuitive
[00:34:08] <Eridius> yuriks: &str == ~str
[00:34:12] <Eridius> that will auto-borrow the ~str into a &str
[00:34:28] *** Quits: eibwen (kvirc@moz-A8EFC38B.dip0.t-ipconnect.de) (Ping timeout)
[00:34:35] <bstrie> rusti: let x = &"asdf"; let y = ~"asdf"; x == y
[00:34:37] -rusti- true
[00:34:38] *** Joins: fhahn (fhahn@moz-7924DB5C.vie.surfer.at)
[00:34:38] <Eridius> just remember, a == b is the same as a.equals(&b), and ~str will auto-borrow if it's the arg
[00:34:38] <bstrie> yuriks: ^
[00:34:45] <Eridius> but since ~str implements Eq, if a is ~str then b has to be ~str too
[00:34:59] *** Joins: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[00:35:06] <bstrie> hooray non-associativity!
[00:35:07] <Eridius> bstrie: why does ~str implement Eq anyway? Why can't it auto-borrow when it's the left-hand side and always use &str == &str?
[00:35:23] <yuriks> I have x == y, x is &~str, y is &str
[00:35:27] <bstrie> Eridius: I don't know!!
[00:35:35] <yuriks> even if I do &*x it doesn't work
[00:35:48] <bstrie> Eridius: ask over in #rust-internals :P
[00:35:54] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[00:35:54] <Eridius> bstrie: heck, we should reimplement Eq so the right-hand side can be any Str
[00:36:07] <Eridius> yuriks: use y -== x
[00:36:08] <Eridius> y == x
[00:36:12] <Eridius> well, y == *x in this case I guess
[00:36:16] <bstrie> Eridius: the current semantics were likely decided years ago, could probably stand to be revisited
[00:36:20] <yuriks> o_O?!?!?
[00:36:22] *** Quits: bjz_ (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[00:36:36] <bstrie> yuriks: == is just calling a method
[00:36:48] <bstrie> imagine that you were writing a method and how it would look
[00:37:04] <yuriks> that worked. Searing confusing remains
[00:37:10] <bstrie> yuriks: remember, binary operators in rust are not necessarily associative
[00:37:18] <bstrie> yuriks: because methods have no notion of associativity
[00:37:24] <Eridius> hmm, Eq doesn't let the rhs be a different type. That sucks
[00:37:36] <bstrie> yuriks: they will always be associative if it's the same type, but otherwise not
[00:37:39] <Eridius> equiv does
[00:37:39] * o11c grumbles again about impl'ing on a tuple
[00:39:22] <Eridius> aww damn, Eq needs to be implemented on ~str so that way things like Option<~str> can also implement it
[00:39:35] <Eridius> I wish Eq took a type for the rhs though, so I could use Eq<S: Str>
[00:40:02] <yuriks> but why can't ~str implement == with &str?
[00:40:14] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[00:40:27] <Eridius> yuriks: because a == b, where a is ~str, is the same as a.equals(&b), where equals is `fn equals(&self, &~str) -> bool`
[00:40:51] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[00:41:00] <Eridius> more accurately, it's `fn equals(&self, other: &Self) -> bool`, and since this particular usage is on ~str, Self is ~str, which makes it &~str
[00:41:34] *** Quits: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Client exited)
[00:41:59] *** Quits: Krymise (Nietzsche@moz-CA789EF5.nwrknj.fios.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:42:01] *** Joins: Krymise (Nietzsche@moz-CA789EF5.nwrknj.fios.verizon.net)
[00:42:30] <yuriks> *sigh*
[00:43:00] <yuriks> Eridius: didn't really justify much for me :|
[00:43:10] *** Joins: gonkun (Mibbit@98EA214A.2F87036F.DDE5D3F6.IP)
[00:43:16] <yuriks> the rules surrounding & are bewildering
[00:44:06] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[00:48:25] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[00:48:59] <yuriks> would DST help in this situation?
[00:49:28] <seanmonstar> it really sounds like DST is the answer to every question in #rust
[00:49:56] <cmr> seanmonstar: DST *is* the question in this instance, and it really isn't the answer very frequently.
[00:49:56] <yuriks> it seems like the issue here is that I can't actually have just a str
[00:50:25] *** Joins: thinkingpad (Mibbit@moz-3DA5D4DF.dhcp.embarqhsd.net)
[00:51:44] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[00:52:23] *** Joins: quaddle (Mibbit@moz-2AD1462.dip0.t-ipconnect.de)
[00:53:30] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[00:55:08] *** Parts: yuriks (yuriks@A61B73A9.3D6294A3.10054EA3.IP) ()
[00:55:46] *** Quits: moostik (Thunderbir@6181009C.10715965.BCDF592F.IP) (Ping timeout)
[00:56:00] *** Quits: twi (Adium@moz-2DBE4224.cpe.vividwireless.net.au) (Quit: Leaving.)
[00:56:37] <seanmonstar>  /joke
[00:57:24] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[00:57:56] *** Quits: tjc (tjc@moz-9E9433BA.tmodns.net) (Ping timeout)
[00:58:26] <WebeWizard> hey cmr, are you using jekyll for your github.io blog? or something else?
[00:58:36] <cmr> WebeWizard: octopress
[00:59:04] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[01:00:38] <thinkingpad> question about traits. i have a function that takes in a reader, and i want to be able to pass in anything that implements reader (file, generic reader, buffered reader, etc.) what's the proper way to do this?
[01:00:43] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[01:00:57] <cmr> thinkingpad: there are two ways.
[01:01:13] <cmr> One is to use a type parameter, fn foo<R: Reader>(x: R) ...
[01:01:28] <cmr> The other is to use a trait object, fn foo(x: &mut R) ...
[01:01:37] <cmr> The first is like a C++ template.
[01:01:43] <cmr> The second is like a Java interface.
[01:02:20] <thinkingpad> cmr: I was attempting the second, but was getting issues when calling it with a file
[01:02:30] <thinkingpad> I'll have to try the first
[01:02:44] *** Joins: alexherb1 (alexherbo2@moz-33868228.w90-35.abo.wanadoo.fr)
[01:02:45] <cmr> thinkingpad: assuming you have a value `foo` of type File, you need to pass the function `&mut foo`
[01:02:52] *** Quits: canhtak (canhtak@moz-8DFB5E6A.wl.t.ulaval.ca) (Quit: canhtak)
[01:03:12] <cmr> (Which gets implicitly coerced to `&mut Reader`, explicitly it'd be `&mut foo as &mut Reader`)
[01:03:28] <jxs> https://twitter.com/bkerensa/status/432309217978900480
[01:03:37] <jxs> oh, where can one get one of these? :D
[01:04:40] *** alexherb1 is now known as alexherbo2
[01:05:25] *** Joins: justin (justin@moz-26376CC7.bootp.virginia.edu)
[01:05:37] *** Quits: justin__ (justin@moz-26376CC7.bootp.virginia.edu) (Ping timeout)
[01:06:02] <thinkingpad> cmr: thanks. implicit coercion wasn't working, but naming it explicitly seems to have done the trick
[01:06:10] <cmr> thinkingpad: which Rust version?
[01:06:14] <thinkingpad> 0.9
[01:06:38] *** Joins: lpy (lpy@DE46E67C.1B5A1487.7CEBAF5A.IP)
[01:08:04] *** Quits: lpy (lpy@DE46E67C.1B5A1487.7CEBAF5A.IP) (Connection reset by peer)
[01:08:25] *** Joins: lpy (lpy@DE46E67C.1B5A1487.7CEBAF5A.IP)
[01:10:19] *** Joins: lenstr (lenstr@42DC74CE.9636F313.7A27613B.IP)
[01:10:24] <jxs> seen it in the mailing list
[01:10:37] *** Quits: lpy (lpy@DE46E67C.1B5A1487.7CEBAF5A.IP) (Ping timeout)
[01:11:05] *** Joins: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP)
[01:11:31] *** Quits: justin (justin@moz-26376CC7.bootp.virginia.edu) (Quit: Konversation terminated!)
[01:11:31] *** Joins: justin_ (justin@moz-26376CC7.bootp.virginia.edu)
[01:13:27] *** Quits: quaddle (Mibbit@moz-2AD1462.dip0.t-ipconnect.de) (Quit: http://www.mibbit.com ajax IRC Client)
[01:13:37] <apoelstra> is there a rust mailing list?
[01:13:39] *** Joins: marianoguerra (marianogue@moz-1DA59919.dip0.t-ipconnect.de)
[01:13:57] *** Quits: lenstr (lenstr@42DC74CE.9636F313.7A27613B.IP) (Ping timeout)
[01:13:59] <cmr> apoelstra: http://www.rust-lang.org/, you tell me
[01:14:29] * apoelstra blushes
[01:14:30] <apoelstra> thx
[01:14:38] *** Joins: earlzlap (earlz@moz-483E1E31.neo.res.rr.com)
[01:14:38] <seanmonstar> just noticed neither rust-lang nor the mailing list is in /topic
[01:14:40] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[01:15:44] <cmr> seanmonstar: I'd be curious to learn how someone came to the IRC channel without either seeing it on reddit (which has links to the website), from the website, or from google (which they, presumably, know how to use to find the website)
[01:15:57] <seanmonstar> true
[01:16:12] <seanmonstar> i was mostly looking for a quick copy-paste
[01:16:22] <thinkingpad> cmr: rust-class.org (UVa's operating systems class) points people to the irc, and not the mailing list
[01:17:04] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[01:19:10] *** Joins: sweetbaby (sweetbaby@moz-9956C8D2.dyn.optonline.net)
[01:19:45] <jxs> by thw way, cmr do you use any software to read the mailing list?
[01:19:55] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[01:19:55] <cmr> jxs: gmail?
[01:20:00] *** Quits: justin_ (justin@moz-26376CC7.bootp.virginia.edu) (Quit: Konversation terminated!)
[01:20:06] *** Joins: justin_ (justin@moz-26376CC7.bootp.virginia.edu)
[01:20:07] <jxs> oh ok
[01:20:12] <gonkun> when saving files using File::create, why is that a question mark is appended to the file extension?
[01:20:24] <gonkun> not when saving files, when creating files*
[01:21:40] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Ping timeout)
[01:25:12] *** Quits: Ferreus (ferreus@moz-7A41E8D7.pools.arcor-ip.net) (Ping timeout)
[01:26:48] *** Joins: demizer (Mibbit@moz-6DD2EAF1.hsd1.ca.comcast.net)
[01:27:03] *** Quits: WebeWizard (WebeWizard@moz-7CCD1DAE.ks.ks.cox.net) (Connection reset by peer)
[01:28:03] *** Joins: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP)
[01:29:49] *** Quits: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[01:32:01] <jadbaires> so what is the difference between a function and a procedure (i.e. proc() )? 
[01:32:31] <jadbaires> I'm looking here http://static.rust-lang.org/doc/master/guide-tasks.html and  here http://smallcultfollowing.com/babysteps/blog/2013/10/10/fn-types-in-rust/
[01:32:42] *** Quits: derek_c (derek@8ECC4BFC.EC83738C.D8D85ABD.IP) (Ping timeout)
[01:33:03] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[01:33:35] <jadbaires> but the docs show calls to start with both a function and with proc, and I don't see the exact differences being pinpointed anywhere... 
[01:33:55] <FreeFull> A proc can only be called once
[01:35:15] <FreeFull> Not sure what the other differences are
[01:35:19] <jadbaires> right
[01:35:36] <FreeFull> I know procs can be passed around and stored in data structures
[01:36:03] <jadbaires> closures too apparently 
[01:36:08] *** Quits: dukeleto (dukeleto@moz-C083E0FB.ptld.qwest.net) (Ping timeout)
[01:36:27] <jadbaires> there's an example of that on the 2nd link
[01:36:37] <cmr> jadbaires: plain functions can be coerced to closures or prodecudres.
[01:37:04] <cmr> procedures capture their environment like a closure, but the environment is on the heap, and things get moved into it.
[01:37:26] *** Joins: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[01:39:00] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[01:39:20] *** Quits: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Ping timeout)
[01:40:02] <jadbaires> cmr: what do you mean by "things get moved into it"? 
[01:40:09] <jadbaires> cmr: which things?
[01:40:15] <cmr> jadbaires: the objects it captures.
[01:40:23] <cmr> rather than just referencing them, they get moved.
[01:42:15] <jadbaires> cmr: so if it captures something mutable, and changes it, what is happening here
[01:42:30] <jadbaires> cmr: is it changing a copy that resides in the heap, and the original is unchanged?
[01:42:40] <cmr> jadbaires: it's just like if you called a function, passed it an argument by-value, and it mutates its argument.
[01:42:49] <cmr> jadbaires: the original ceases to exist after the move.
[01:43:32] *** Quits: Krymise (Nietzsche@moz-CA789EF5.nwrknj.fios.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[01:43:56] *** Parts: sweetbaby (sweetbaby@moz-9956C8D2.dyn.optonline.net) ()
[01:44:00] *** Joins: Ferreus (ferreus@moz-BB8CF88B.pools.arcor-ip.net)
[01:45:02] <cgaebel> I have a PTSD-like reaction to seeing "BufferedReader" in rust. That's probably not healthy.
[01:45:08] <jadbaires> cmr: I always thought of by-value as making a copy of the original, not as something that would cause the original to cease existing
[01:45:42] <kimundi> jadbaires: It makes a shallow copy, which for moving types make the original inaccessible afterward
[01:45:53] <jadbaires> kimundi: oh I see
[01:46:17] <kimundi> so, the memory is still there, but for all matters and purposes it ceased to exist, as you are forbidden to access it anymore
[01:46:30] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[01:46:42] <kimundi> rusti: let x = ~5; let y = x; x
[01:46:46] -rusti- pastebinned 8 lines of output: http://ix.io/apa
[01:46:51] *** Joins: Lovot_ (root@AE31FB56.8153C3BF.F3C9A2D9.IP)
[01:47:01] <kimundi> See that error as an example
[01:47:14] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[01:47:31] *** Quits: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP) (Ping timeout)
[01:47:37] <jadbaires> kimundi: yes I understand now, I've was reading about ownership before, but to be honest I was reading the word "move" and not associating it with the concept
[01:47:42] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[01:47:48] <jadbaires> so I was a bit lost
[01:47:57] <kimundi> ah, okay :)
[01:48:19] *** Quits: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net) (Client exited)
[01:48:35] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[01:48:41] *** Joins: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net)
[01:49:02] *** Quits: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net) (Client exited)
[01:49:03] *** Joins: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net)
[01:49:14] *** Quits: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net) (Client exited)
[01:50:30] *** Joins: exobit (foo@moz-90D1B547.nycmny.fios.verizon.net)
[01:51:11] *** Joins: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net)
[01:51:57] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[01:52:05] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[01:52:13] <gonkun> is pub use native::io::file; the incorrect way of using? i get an error:
[01:52:14] <gonkun> unresolved import. maybe a missing `extern mod native`?
[01:52:35] *** Quits: jadbaires (jadrian@moz-2D403AFF.dsl.telepac.pt) (Connection reset by peer)
[01:52:38] <gonkun> help?
[01:52:41] *** Joins: jadbaires (jadrian@moz-2D403AFF.dsl.telepac.pt)
[01:52:47] <cmr> gonkun: the `pub` is not needed.
[01:52:48] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Client exited)
[01:52:56] <cmr> gonkun: do you have an `extern mod native;` in the crate root?
[01:52:58] <kimundi> gonkun: Well, do you have a "extern mod native" somewhere?
[01:53:18] <gonkun> what is extern mod native do?
[01:53:21] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[01:53:28] <cmr> gonkun: http://static.rust-lang.org/doc/master/tutorial.html#crates-and-the-module-system
[01:53:31] *** Quits: jadbaires (jadrian@moz-2D403AFF.dsl.telepac.pt) (Connection reset by peer)
[01:53:35] <kimundi> gonkun: Tell the compile to link to the library "native"
[01:53:37] *** Joins: jadbaires (jadrian@moz-2D403AFF.dsl.telepac.pt)
[01:53:37] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[01:53:57] <kimundi> gonkun: Which is required befor you can start importing things from it with "use" :P
[01:53:57] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[01:54:14] *** Quits: earlzlap (earlz@moz-483E1E31.neo.res.rr.com) (Ping timeout)
[01:54:52] <gonkun> kimundi: gotchya
[01:54:59] <gonkun> cmr kimundi: thanks guys
[01:55:03] *** Joins: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP)
[01:55:34] *** Joins: kvark (Mibbit@moz-F30E0473.cpe.net.cable.rogers.com)
[01:55:34] *** Joins: rootnode (rootnode@moz-7FAB5E8.ip1.george24.com)
[01:55:45] <mreca> getting the error "task '<main>' failed at 'called `Option::get_mut_ref()` on a `None` value', /rust-0.9/src/libstd/option.rs:344" when i try to do process.output() in a match? is there any way around this?
[01:56:02] <mreca> culprit code -> http://pastebin.com/6pTefdbN
[01:57:34] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[01:59:09] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[01:59:30] <acrichto> mreca: you specified the output as a file descriptor, so you don't have control over it through output()
[01:59:35] *** Joins: brson (brson@981AA104.E81F12CD.76F66111.IP)
[01:59:35] *** ChanServ sets mode: +ao brson brson
[01:59:40] <acrichto> mreca: you'll need to specify out_fd as None
[01:59:48] <mreca> ah, rookie error
[01:59:50] <mreca> thanks
[02:00:48] <kvark> acrichto: could you look at that please? https://gist.github.com/kvark/8893064
[02:01:24] <acrichto> kvark: the warning seems correct?
[02:01:37] <kvark> but 'add' is used in the while condition
[02:01:48] <acrichto> the first thing you do is overwrite it
[02:01:57] <kvark> ah, that's the thing
[02:01:59] <kvark> cool, thanks!
[02:02:13] *** Quits: pyon (user@21629915.40E3D2AB.1C8C8CE9.IP) (Quit: ERC Version 5.3 (IRC client for Emacs))
[02:03:45] <kvark> those c++ habits :)
[02:03:54] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[02:03:55] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[02:03:56] <kvark> initializing everything "just in case"
[02:04:16] *** Quits: marianoguerra (marianogue@moz-1DA59919.dip0.t-ipconnect.de) (Ping timeout)
[02:04:20] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[02:04:51] *** Joins: lenstr (lenstr@42DC74CE.9636F313.7A27613B.IP)
[02:04:59] <gonkun> when using this function, do i actually have to pass in structs for the second and third param? I'm unsure about how to set the second and third param
[02:05:01] <gonkun> http://static.rust-lang.org/doc/master/native/io/file/fn.open.html
[02:05:37] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[02:05:57] <kvark> gonkun: are you sure you need the native io?
[02:06:15] *** Quits: Nulldata (chatzilla@moz-B07A003C.seas-nve.net) (Quit: ChatZilla 0.9.90.1 [Firefox 26.0/20131205075310])
[02:06:31] <gonkun> kvark: I'm not sure. This is the only struct I could find that would give me the fd (file descriptor) of a file.
[02:06:39] <gonkun> kvark: do you know of a better way?
[02:07:18] <kvark> there is just std io, but it will not give you the file descriptor
[02:07:25] *** kimundi is now known as zz_kimundi
[02:07:42] <kvark> so if you need the descriptor for some interop with low-level C code, then yes, native is what you need, it seems
[02:07:57] <gonkun> kvark: ok. so back to my original question, im not sure how to use the function. do i need to pass in structs for the second and third params?
[02:08:04] <gonkun> noob question :S
[02:08:05] <gonkun> :s
[02:08:09] <cmr> gonkun: click on the types.
[02:08:12] <cmr> (they are links)
[02:08:31] *** Quits: justin_ (justin@moz-26376CC7.bootp.virginia.edu) (Quit: Konversation terminated!)
[02:08:36] *** Joins: justin_ (justin@moz-26376CC7.bootp.virginia.edu)
[02:08:39] <cmr> gonkun: they are enums. You pass one of those values as the parameters.
[02:08:42] <thinkingpad> gonkun: std::libc::funcs::posix88::fcntl::open will also return fd
[02:08:58] <cmr> thinkingpad: also known as std::libc::open
[02:09:11] *** Joins: lpy (lpy@DE46E67C.1B5A1487.7CEBAF5A.IP)
[02:09:33] <thinkingpad> cmr: I could remember open, under libc, but couldn't remember how far down it was, so I searched on the docs. Search has issues...
[02:09:56] <cmr> thinkingpad: well not really, that is its canonical name, but it's reexported.
[02:10:09] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[02:10:11] <gonkun> cmr: open is not under std::libc
[02:10:32] *** Quits: exobit (foo@moz-90D1B547.nycmny.fios.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[02:11:14] <thinkingpad> gonkun: it actually is. it's listed under the reexport section
[02:11:17] *** Quits: lpy (lpy@DE46E67C.1B5A1487.7CEBAF5A.IP) (Ping timeout)
[02:11:59] <gonkun> thinkingpad cmr: thanks
[02:13:47] <gonkun> is there a function that converts a str or c_str to a *c_char?
[02:13:50] *** Quits: lenstr (lenstr@42DC74CE.9636F313.7A27613B.IP) (Ping timeout)
[02:14:10] <gonkun> or is c_str = *c_char?
[02:14:11] <cmr> gonkun: c_str isn't a type.
[02:14:19] <cmr> http://static.rust-lang.org/doc/master/std/c_str/struct.CString.html
[02:14:25] <cmr> http://static.rust-lang.org/doc/master/std/c_str/trait.ToCStr.html
[02:15:19] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[02:15:23] <gonkun> cmr: oh right.
[02:16:28] *** Joins: tjc (tjc@moz-1C60780C.dsl.dynamic.sonic.net)
[02:16:28] *** ChanServ sets mode: +o tjc
[02:17:17] <gonkun> thinkingpad: have you used the open function?
[02:17:47] *** Quits: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP) (Ping timeout)
[02:18:01] <thinkingpad> a little?
[02:18:18] <gonkun> thinkingpad: ok, so it returns a c_int, which refers to the fd of the file?
[02:18:24] *** Quits: Ferreus (ferreus@moz-BB8CF88B.pools.arcor-ip.net) (Quit: WeeChat 0.4.3-dev)
[02:19:26] <thinkingpad> gonkun: i believe so
[02:19:36] *** Joins: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP)
[02:20:07] <gonkun> thinkingpad: one more question sorry to spam you, what are the oflag and mode params? they are c_ints but they dont really give me much info when i click on them.
[02:20:34] <gonkun> thinkingpad: what should they be if i just want to open and read a file?
[02:20:41] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[02:20:45] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[02:21:49] <cmr> gonkun: man 2 open
[02:22:29] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Ping timeout)
[02:25:19] *** Joins: lenary (sid5084@moz-31ABA2C0.irccloud.com)
[02:26:25] <gonkun> cmr: thanks.
[02:27:15] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[02:27:35] <lenary> hey guys, i'm confused as to how to provide a file to anything in std::run in order for a process to get custom output
[02:27:59] <lenary> everything in run::Process is expecting a file descriptor, and I can't see how to get one from a file
[02:28:05] <gonkun> lol
[02:28:18] <gonkun> http://static.rust-lang.org/doc/master/std/libc/funcs/posix88/fcntl/ffi.open.html
[02:28:22] <gonkun> lenary ^
[02:28:37] <gonkun> i was just looking at that
[02:28:50] <lenary> oh fun
[02:28:58] <lenary> i was hoping to avoid ffi as much as i could
[02:29:02] <lenary> *shakes fist*
[02:29:06] *** Quits: jason_ (jason@moz-EC85D533.members.linode.com) (Ping timeout)
[02:29:31] <cmr> lenary: you can you CFile from libnative.
[02:29:32] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[02:30:06] *** Quits: snerd (motk@moz-D21A06DF.members.linode.com) (Ping timeout)
[02:30:07] <cmr> or http://static.rust-lang.org/doc/master/native/io/file/fn.open.html
[02:30:12] <gonkun> cmr: i include use std::libc::consts::os::posix88; but i still get unresolved errors on the c_ints that i reference
[02:30:13] *** Joins: snerd (motk@moz-D21A06DF.members.linode.com)
[02:30:17] <gonkun> cmr: 							let file = open(file_cstr, O_APPEND, S_IWUSR);
[02:30:18] <cmr> (not CFile, sorry)
[02:30:19] *** Quits: justin_ (justin@moz-26376CC7.bootp.virginia.edu) (Quit: Konversation terminated!)
[02:30:24] *** Joins: justin_ (justin@moz-26376CC7.bootp.virginia.edu)
[02:30:53] <lenary> cmr: that looks closest to what i need, thanks
[02:31:21] <cmr> gonkun: use std::libc::{O_APPEND, S_IWUSR}
[02:32:06] *** Joins: jason_ (jason@moz-EC85D533.members.linode.com)
[02:32:13] <thinkingpad> so what's the best way to return a reader from a fn where it's created
[02:32:32] <thinkingpad> i'm having issues thinking apparently, and am running into lifetime issues
[02:32:39] <cmr> thinkingpad: you'll need to return a trait object. fn foo() -> ~Reader
[02:32:39] <gonkun> lol
[02:33:07] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[02:33:22] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[02:33:27] *** Quits: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net) (Client exited)
[02:33:37] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[02:33:42] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[02:33:57] *** Joins: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net)
[02:34:01] <thinkingpad> cmr: i've got the fn signature correct. just getting an error that says borrowed value doesn't live long enough
[02:34:11] <cmr> thinkingpad: paste code?
[02:34:50] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[02:35:24] *** Joins: thinkingpad_vm (Mibbit@moz-3DA5D4DF.dhcp.embarqhsd.net)
[02:35:30] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[02:35:43] *** Quits: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net) (Ping timeout)
[02:35:48] <gonkun> is there a way to convert to *i8 from CString or str?
[02:36:06] *** Quits: justin_ (justin@moz-26376CC7.bootp.virginia.edu) (Ping timeout)
[02:36:12] <cmr> gonkun: http://static.rust-lang.org/doc/master/std/c_str/trait.ToCStr.html#method.with_c_str
[02:36:16] *** Joins: justin_ (justin@moz-26376CC7.bootp.virginia.edu)
[02:36:29] <cmr> and see with_ref on CString
[02:36:59] <thinkingpad_vm> http://mibpaste.com/Us4xMV 
[02:37:03] <thinkingpad_vm> cmr: ^
[02:37:37] <cmr> thinkingpad_vm: you can't return a reference, that'd be like returning a pointer to a local variable.
[02:37:39] <gonkun> thinkingpad: use pastebin, much nicer
[02:37:43] *** Quits: Uther (Instantbir@moz-834083A8.hfc.dyn.abo.bbox.fr) (Ping timeout)
[02:38:12] *** Joins: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[02:38:23] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[02:39:32] <thinkingpad_vm> cmr: i guess i'm just confused on how to return it
[02:40:00] <cmr> thinkingpad_vm: you need to return a ~Reader
[02:40:03] *** Quits: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Ping timeout)
[02:40:05] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Quit: ChatZilla 0.9.90.1 [Firefox 26.0/20131205075310])
[02:40:07] *** Quits: victorporof (victorporo@C2FADE94.E7C615F.41763F20.IP) (Quit: victorporof)
[02:41:19] <gonkun>  type `std::c_str::CString` does not implement any method in scope named `with_c_str`
[02:42:53] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[02:43:02] *** Quits: justin_ (justin@moz-26376CC7.bootp.virginia.edu) (Quit: Konversation terminated!)
[02:43:07] *** Joins: justin_ (justin@moz-26376CC7.bootp.virginia.edu)
[02:43:15] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Quit: Leaving...)
[02:43:24] <gonkun> nvm fixed it
[02:43:28] *** Joins: intrepid (Mibbit@moz-E6EAEC51.dhcp.grps.or.charter.com)
[02:43:59] *** Quits: intrepid (Mibbit@moz-E6EAEC51.dhcp.grps.or.charter.com) (Quit: http://www.mibbit.com ajax IRC Client)
[02:44:30] *** Joins: jdm (jdm@48B23B18.ADAD98E4.A2DC32D.IP)
[02:44:30] *** ChanServ sets mode: +o jdm
[02:44:49] *** Joins: agallego (agallego@moz-6B897026.nyc.res.rr.com)
[02:45:17] *** Parts: agallego (agallego@moz-6B897026.nyc.res.rr.com) ()
[02:46:24] *** Joins: agallego (agallego@moz-6B897026.nyc.res.rr.com)
[02:47:52] *** Quits: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP) (Ping timeout)
[02:48:41] *** Joins: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP)
[02:49:00] <agallego> sorry, if duplicate. accidentally joined irc.ubuntu.com instead of irc.mozilla.org. 
[02:49:19] <agallego> reading vec.rc: pub fn ref_slice<'a, A>(s: &'a A) -> &'a [A]; I get that 'a is a parametric type, who's type parameter is A. I don't understand why the apostrophe matters. I see this on a lot of code. Is this just convention. I tried googleing but was unsuccessful. 
[02:51:00] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[02:51:32] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[02:51:52] <lenary> agallego: the 'a seems to be the borrow scope
[02:52:27] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[02:52:37] <lenary> (no, i don't know what that translates to for normal programmers, but that's how i'm thinking about it right now while i try hard to ignore it)
[02:53:16] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[02:53:27] <gonkun> Can someone help with this method, i cant figure out how to use pass the parameter?
[02:53:28] <gonkun> let s = "PATH".with_c_str(|path| unsafe {     libc::getenv(path) });
[02:53:35] <gonkun> http://static.rust-lang.org/doc/master/std/c_str/trait.ToCStr.html#method.with_c_str
[02:53:41] <gonkun> with_c_str function
[02:54:03] <agallego> lenary: thanks
[02:54:13] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[02:55:39] *** Joins: kanru` (kanru@moz-3017E9A4.hinet-ip.hinet.net)
[02:56:04] <agallego> leny: for what is worth, here is the compiler error if you change it from 'a to a.  error: expected `,` but found `A`:215 pub fn ref_slice<a, A>(s: &a A) -> &a [A]; 
[02:56:14] <thinkingpad_vm> cmr: I'm trying that, but am not sure how to get a ~Reader from run::Process::output() as that returns a &mut Reader that I can't dereference
[02:58:32] <lenary> agallego: don't confuse me for someone who knows about rust
[02:59:39] *** Joins: lenstr (lenstr@42DC74CE.9636F313.7A27613B.IP)
[02:59:53] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[03:00:10] *** Quits: Amaranth (travis@moz-F81BB56A.cpe.cableone.net) (Quit: Linkinus - http://linkinus.com)
[03:00:27] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[03:03:13] <gonkun> I'm having the hardest time converting a string to a *c_char :(
[03:03:23] *** Quits: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Quit: It is tiem!)
[03:03:27] <agallego> lenary: thanks. 
[03:03:53] *** Joins: dwrensha (chatzilla@moz-B23D2FF6.pitbpa.east.verizon.net)
[03:04:28] <gonkun> thinkingpad: do you know how to convert from a string into a *i8 (*c_char)? that is what the open function uses? 
[03:04:43] <gonkun> Im not sure how the function cmr pointed me towards works
[03:07:24] <thinkingpad> gonkun: you might have more luck searching github or bitbucket
[03:07:40] *** Joins: Amaranth (travis@moz-F81BB56A.cpe.cableone.net)
[03:09:34] <_achin> gonkun: mystr.to_c_str().unwrap()
[03:09:55] *** Joins: lpy (lpy@DE46E67C.1B5A1487.7CEBAF5A.IP)
[03:10:11] <gonkun> _achin: that returns an *i8?
[03:10:32] <_achin> that returns a *c_char, which is an *i8, yes
[03:10:38] <thinkingpad> gonkun: what did you have to do? you've piqued my interest
[03:10:45] *** Joins: lucperkins (Mibbit@moz-2D7760F5.hfc.comcastbusiness.net)
[03:10:52] <gonkun> _achin: thank you, ive been looking for so long
[03:11:09] <thinkingpad> gonkun: never mind. sorry. didn't scroll to the bottom of the window
[03:11:29] <gonkun> thinkingpad: its all good.
[03:11:38] <_achin> gonkun: for reference, start here: http://static.rust-lang.org/doc/master/std/c_str/index.html
[03:12:01] *** Quits: lpy (lpy@DE46E67C.1B5A1487.7CEBAF5A.IP) (Ping timeout)
[03:12:01] *** Quits: lenstr (lenstr@42DC74CE.9636F313.7A27613B.IP) (Ping timeout)
[03:13:53] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[03:15:37] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[03:15:58] <lucperkins> i have kind of an idiot question if anyone is available to help
[03:16:12] *** Joins: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP)
[03:16:45] <lucperkins> (well, not all that idiotic...it's a basic thing but i can't seem to find documentation on it)
[03:17:08] <dbaupp> gonkun: s.with_c_str(|ptr| do_stuff(ptr)) work better
[03:17:27] <dbaupp> _achin: CString.unwrap() will cause a memory leak
[03:17:43] <gonkun> dbaupp: that's what i was trying to use but i couldn't understand the param
[03:17:56] *** Quits: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[03:18:25] <gonkun> dbaupp: could you help me please?
[03:18:31] <dbaupp> gonkun: it's a closure
[03:18:38] <quux00> Is there a way to specify that a Rust task be a "daemon" thread (as you can in Java or like Go goroutines - they shut down when all non-daemon threads finish)?
[03:18:51] <dbaupp> rusti: "foo".with_c_str(|ptr| println!("pointer is {}", ptr))
[03:18:56] -rusti- pointer is 0x7fa9242c1b00
[03:18:57] -rusti- ()
[03:19:47] <lenary> lucperkins: just ask
[03:20:34] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[03:20:44] <gonkun> dbaupp: do I need to have to do something within the closure?
[03:21:00] <_achin> oops.  dbaupp: thanks for the correction
[03:21:19] *** Quits: gwty (gwtypc@9D9E9500.1E25ED5.EF1555B.IP) (Ping timeout)
[03:21:32] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[03:21:48] *** Joins: weirdo (Mibbit@moz-D0156CA3.lns8.cht.bigpond.net.au)
[03:21:52] <dbaupp> gonkun: yes, you need use the pointer with in the closure
[03:22:26] <dbaupp> (do not let it escape from the closure: it will be a dangling pointer in that case.)
[03:23:16] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Ping timeout)
[03:23:30] <gonkun> dbaupp:  let s = mystr.with_c_str(|ptr| println!("pointer is {}", ptr));
[03:23:39] <gonkun> i cannot use s after the above statement?
[03:23:47] <dbaupp> s will be ()
[03:24:10] <gonkun> ohhh, so i need to do EVERYTHING within the closure?
[03:24:17] <dbaupp> yeah, basically
[03:24:27] <gonkun> ooooh
[03:24:31] <gonkun> thats gonna be messy :)
[03:24:49] <dbaupp> Well, not quite:
[03:24:56] <dbaupp> the closure has a return value: http://static.rust-lang.org/doc/master/std/c_str/trait.ToCStr.html#method.with_c_str
[03:25:11] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[03:25:11] *** ChanServ sets mode: +ao dherman dherman
[03:25:22] <gonkun> dbaupp: i appreciate your help!
[03:25:25] <dbaupp> so you can do something like `let number = mystr.with_c_str(|ptr| some_function_returning_a_number(ptr))`
[03:25:29] *** Quits: weirdo (Mibbit@moz-D0156CA3.lns8.cht.bigpond.net.au) (Quit: http://www.mibbit.com ajax IRC Client)
[03:26:30] <dbaupp> but you need to be careful to restrict any uses of `ptr` to inside the closure, because it gets deallocated once the closure returns
[03:27:06] <gonkun> dbaupp: ok, and about the function that returns a number, since the ptr is hex value, what type should that function return?
[03:27:13] <gonkun> and take in as a param
[03:27:17] <thinkingpad> so is there anyway to get a ~Reader from run::Process.output(). it returns a borrowed pointer which doesn't live long enough to be a return value
[03:27:40] <jdm> only a &Reader I expect
[03:28:13] *** Joins: pepper_chico (pepper_chi@moz-3005614F.dsl.telesp.net.br)
[03:29:05] <thinkingpad> jdm: that's what i'd seen so far, but i'm trying to return it from a fn. i was thinking this should be as a ~Reader so it isn't deallocated, but this doesn't seem to work
[03:31:42] <dbaupp> gonkun: hm?
[03:32:01] <gonkun> dbaupp: how do i separate statements in a closure?
[03:32:10] <dbaupp> { foo(); bar(); baz() }
[03:32:28] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[03:32:44] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[03:32:45] <gonkun> let s = rightSide.with_c_str(|ptr| println!("pointer is {}", ptr); println!("hi"));
[03:32:56] <dbaupp> you need the {}
[03:32:58] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[03:33:01] <gonkun> ahh
[03:33:22] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[03:36:17] <quux00> Is there a way to send a signal (as in SIGINT type signal) from one Rust task to another?
[03:36:26] <quux00> I see the Port in the signal::Listener, but no way to get the  Chan side?
[03:36:51] *** Joins: gwty (gwtypc@9D9E9500.1E25ED5.EF1555B.IP)
[03:37:56] <lucperkins> dumb question: how do i use a package that can't be built using `rustpkg install <remote_url>`? as in a package that i git clone onto my machine
[03:37:59] <Yurume> if you are using `std::process::Process` you can use `signal` method, otherwise you'd use a plain `std::libc::signal`.
[03:38:31] <Yurume> lucperkins, use a Makefile. rustpkg has been outdated for some time so you need to use that (unfortunately).
[03:38:58] *** Joins: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[03:40:00] <gonkun> any idea what's happening here: task '<main>' failed at 'Unhandled condition: io_error: io::IoError{kind: OtherIoError, desc: "invalid argument", detail: None}'
[03:40:03] <quux00> Yurume, but the libc::signal takes a pid_t, but I want to signal to another task/thread in the same signal. I guess I just give it that Process's own pid?
[03:40:07] *** Quits: zz_kimundi (kimundi@moz-615B416.dip0.t-ipconnect.de) (Ping timeout)
[03:40:18] <quux00> sorry in the same *process*
[03:40:19] <Yurume> yes. pid_t is just an int.
[03:40:25] <Yurume> hmm?
[03:40:29] <quux00> OK.
[03:40:42] <quux00> (just correcting my typo, never mind)
[03:40:44] <Yurume> do you want to send a signal to itself?
[03:40:54] *** Quits: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Ping timeout)
[03:41:07] <quux00> Yes to another thread/task in the same process 
[03:41:13] *** Joins: earlzlap (earlz@moz-483E1E31.neo.res.rr.com)
[03:41:30] <Yurume> certainly there are some uses of that... but why?
[03:41:35] <lucperkins> @yurume how, then, do i import it into another project once I build it locally? that was actually my real question (I formulated it poorly)
[03:42:18] <Yurume> gonkun, it's a generic I/O error. not much debugging possible at this stage, maybe you can post an example to ask for.
[03:42:47] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[03:42:53] <Yurume> lucperkins, personally I have used a hardwired Makefile and git submodules. :S
[03:43:06] <Yurume> something like this: https://github.com/snrs/sonorous/blob/master/Makefile
[03:43:20] <quux00> Yurume: I've installed a SIGINT handler in another task to prevent SIGINT from killing my process, but when I want to shut down the main task, the background task just hangs waiting on a recv() of a SIGINT. 
[03:43:24] *** Joins: zz_kimundi (kimundi@moz-4FC677A6.dip0.t-ipconnect.de)
[03:43:40] *** zz_kimundi is now known as kimundi
[03:43:42] <quux00> So I though I'd signal to it to shutdown.
[03:43:47] <lucperkins> Yurume hehe. well, that's one way! but honestly, that is helpful.
[03:44:14] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[03:44:20] <Yurume> quux00, oh well, "task" is not same as "process", they are different entities. signals are for processes and you need a plain Chan/Port for tasks.
[03:44:37] <Yurume> or did you mean processes?
[03:45:02] <gonkun> Yurume: here is some code: http://pastebin.com/GwCpnMZY
[03:45:09] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Quit: )
[03:45:11] <quux00> I'm following the code snippet on this page: http://static.rust-lang.org/doc/0.9/std/io/signal/struct.Listener.html
[03:45:20] <quux00> One process, two tasks (threads)
[03:45:21] <gonkun> its breaking when i create the process
[03:45:28] <Yurume> gonkun, are you writing some kind of a shell?
[03:45:34] <gonkun> yes
[03:45:42] <quux00> One to handle the SIGINT, since it just hangs waiting for a signal
[03:45:54] <Yurume> (just out of curiosity: is this a sort of university courses?)
[03:45:56] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[03:46:02] <gonkun> Yurume: yes
[03:46:04] <quux00> Yep - cs4414
[03:46:06] *** Joins: tupshin_ (quassel@moz-E7B03838.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com)
[03:46:06] <Yurume> (since I've received almost same question recently)
[03:46:07] <Yurume> aha
[03:46:08] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[03:46:09] <gonkun> an operating systems course
[03:46:10] <gonkun> lol
[03:46:23] <Yurume> good luck to you all :)
[03:46:26] <gonkun> thanks!
[03:46:30] <quux00> diito
[03:46:39] <gonkun> quux00: you dont have to handle signals
[03:47:10] <gonkun> just create a listener and listen for an interrupt
[03:47:15] <gonkun> let mut listener = Listener::new();listener.register(Interrupt);
[03:47:49] <quux00> Yes, that's what I'm doing, but the recv() blocks, so I put it in another task. 
[03:47:54] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[03:48:05] <quux00> But that task doesn't shutdown on "exit" command.
[03:48:11] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[03:48:24] *** Quits: lucperkins (Mibbit@moz-2D7760F5.hfc.comcastbusiness.net) (Quit: http://www.mibbit.com ajax IRC Client)
[03:49:40] *** Quits: jadbaires (jadrian@moz-2D403AFF.dsl.telepac.pt) (Quit: Konversation terminated!)
[03:49:49] *** Joins: lpy (lpy@DE46E67C.1B5A1487.7CEBAF5A.IP)
[03:50:33] <Yurume> gonkun, if you want to make a pipe between the shell and the spawned process, I think you can leave in_fd and out_fd as is (i.e. None) since it automatically provides a pipe for them.
[03:51:22] <lenary> Yurume: no, it automatically creates a pipe
[03:51:25] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[03:51:30] <lenary> it doesn't automatically use the parent's pipe
[03:51:56] <quux00> gonkun: I see what you mean now about just registering the signal handler in the same thread - that does work. Thanks.
[03:51:58] <Yurume> yes, depends on your use case.
[03:52:24] *** Quits: earlzlap (earlz@moz-483E1E31.neo.res.rr.com) (Ping timeout)
[03:52:27] *** Quits: pepper_chico (pepper_chi@moz-3005614F.dsl.telesp.net.br) (Quit: WeeChat 0.4.1)
[03:52:39] <Yurume> but at least if you just need an output for the process you can do it without wedging some fds.
[03:52:52] <Yurume> I guess for shells you might not though
[03:52:54] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[03:54:27] <gonkun> Yurume: you're right, its breaking when give in_fd: Some(pipe.input)
[03:54:40] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[03:54:59] *** Joins: lenstr (lenstr@42DC74CE.9636F313.7A27613B.IP)
[03:55:49] <gonkun> yurume: maybe its because my file descriptor is -1?
[03:56:05] <Yurume> -1 is not a valid fd :)
[03:56:10] <gonkun> heheh
[03:57:17] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[03:59:22] <gonkun> I have no clue why im getting an fd of -1
[03:59:32] *** Quits: dwrensha (chatzilla@moz-B23D2FF6.pitbpa.east.verizon.net) (Ping timeout)
[03:59:53] <gonkun> i believe this function returns an fd of a file: http://static.rust-lang.org/doc/master/std/libc/funcs/posix88/fcntl/ffi.open.html
[04:00:18] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[04:01:00] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[04:01:32] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[04:02:18] <gonkun> Yurume: im not sure if i asked you this, but is there an easier way of getting a file's fd?
[04:03:02] *** Quits: zv (zv@moz-955F83E9.hsd1.ca.comcast.net) (Ping timeout)
[04:04:33] *** Joins: dwrensha (chatzilla@moz-B23D2FF6.pitbpa.east.verizon.net)
[04:04:42] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[04:04:46] *** Quits: lenstr (lenstr@42DC74CE.9636F313.7A27613B.IP) (Ping timeout)
[04:05:40] <gonkun> dwrensha: maybe you know an easy way of getting a file's file descriptor?
[04:05:58] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[04:06:19] *** Quits: tjc (tjc@moz-1C60780C.dsl.dynamic.sonic.net) (Ping timeout)
[04:06:39] <gonkun> gotta run. but thank you dbaupp and yurume!
[04:06:44] <gonkun> and cmr!
[04:06:51] <gonkun> and everyone else lol
[04:06:57] <cgaebel> to convert a *mut T to an &mut T, do I just do &mut *t?
[04:08:02] <cgaebel> oh looks like I gotta transmute
[04:08:04] <cgaebel> oh well
[04:08:24] *** Quits: jdm (jdm@48B23B18.ADAD98E4.A2DC32D.IP) (Ping timeout)
[04:08:31] *** Joins: gentlefolk (chatzilla@moz-D195EAF9.cpe.teksavvy.com)
[04:11:49] *** Quits: kvark (Mibbit@moz-F30E0473.cpe.net.cable.rogers.com) (Quit: http://www.mibbit.com ajax IRC Client)
[04:11:49] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Quit: Leaving)
[04:11:54] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[04:13:14] *** Joins: nlminhtl (ignotus@moz-4CB8A1D.site.volia.net)
[04:13:33] *** Quits: ercxx (ercan@moz-88DD3A7E.dyn.optonline.net) (Quit: WeeChat 0.4.2)
[04:14:10] *** Quits: gonkun (Mibbit@98EA214A.2F87036F.DDE5D3F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[04:14:14] *** Quits: sellout (Adium@moz-CF70CF20.hlrn.qwest.net) (Ping timeout)
[04:14:50] *** Quits: james4k (james@moz-9BB5AE72.consolidated.net) (Ping timeout)
[04:14:57] *** Joins: sellout (Adium@moz-CF70CF20.hlrn.qwest.net)
[04:16:05] *** Joins: barosl (barosl@34F62860.E551553C.7544CABF.IP)
[04:16:53] *** Quits: nlminhtl (ignotus@moz-4CB8A1D.site.volia.net) (Ping timeout)
[04:17:24] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[04:17:24] *** ChanServ sets mode: +ao dherman dherman
[04:19:03] *** Quits: yusukesuzuki (yusukesuzu@moz-43160292.net218219047.t-com.ne.jp) (Ping timeout)
[04:19:21] *** Joins: yusukesuzuki (yusukesuzu@moz-43160292.net218219047.t-com.ne.jp)
[04:19:37] *** Joins: nidhimj22 (chatzilla@moz-9C62A448.mtnl.net.in)
[04:20:34] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[04:21:02] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[04:22:12] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[04:23:54] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Ping timeout)
[04:25:53] *** Joins: canhtak (canhtak@moz-8DFB5E6A.wl.t.ulaval.ca)
[04:26:48] *** Joins: tamul (Mibbit@moz-79C9B633.cc.shawcable.net)
[04:28:01] *** Joins: justin__ (justin@moz-26376CC7.bootp.virginia.edu)
[04:28:43] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Quit: Leaving...)
[04:29:39] *** Quits: justin_ (justin@moz-26376CC7.bootp.virginia.edu) (Ping timeout)
[04:29:40] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[04:31:55] *** Joins: jdm (jdm@48B23B18.ADAD98E4.A2DC32D.IP)
[04:31:55] *** ChanServ sets mode: +o jdm
[04:32:15] *** Joins: blaenk (blaenk@moz-D046F6D6.lsanca.dsl-w.verizon.net)
[04:32:42] *** Quits: tamul (Mibbit@moz-79C9B633.cc.shawcable.net) (Quit: http://www.mibbit.com ajax IRC Client)
[04:37:59] *** Quits: blaenk (blaenk@moz-D046F6D6.lsanca.dsl-w.verizon.net) (Quit: Leaving)
[04:39:44] *** Joins: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[04:39:56] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[04:41:40] *** Quits: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Ping timeout)
[04:43:26] *** Quits: LordAro (LordAro@moz-8ED7FDB9.york.ac.uk) (Client exited)
[04:44:29] *** Quits: Kxepal (Miranda@moz-B8189C.pppoe.mtu-net.ru) (Quit: Kxepal)
[04:44:48] *** Joins: Kxepal (Miranda@moz-B8189C.pppoe.mtu-net.ru)
[04:47:10] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[04:47:23] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[04:48:07] *** Quits: justin__ (justin@moz-26376CC7.bootp.virginia.edu) (Connection reset by peer)
[04:48:12] *** Joins: justin__ (justin@moz-26376CC7.bootp.virginia.edu)
[04:48:35] *** Quits: jdm (jdm@48B23B18.ADAD98E4.A2DC32D.IP) (Quit: Lost terminal)
[04:49:15] *** Joins: guacamole (Mibbit@844B311F.8354BB98.137843A6.IP)
[04:49:39] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[04:50:00] *** Joins: Krymise (Nietzsche@moz-CA789EF5.nwrknj.fios.verizon.net)
[04:50:01] *** Joins: lenstr (lenstr@42DC74CE.9636F313.7A27613B.IP)
[04:51:01] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[04:51:24] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[04:53:07] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[04:53:18] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[04:54:59] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[04:55:06] *** Joins: six600110 (six600110@moz-9117A1DE.hsd1.il.comcast.net)
[04:56:57] *** Parts: nidhimj22 (chatzilla@moz-9C62A448.mtnl.net.in) ()
[04:57:33] *** Quits: lenstr (lenstr@42DC74CE.9636F313.7A27613B.IP) (Ping timeout)
[04:59:09] *** Quits: trinary (Adium@moz-D78CD0D5.hsd1.co.comcast.net) (Quit: Leaving.)
[05:00:09] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[05:00:36] *** Joins: derek_c (derek@BB4EA703.F1358ABB.5FF621B0.IP)
[05:01:40] *** Quits: mcpherrin (mcpherrin@BB4DB59D.2876C283.70845BE5.IP) (Ping timeout)
[05:01:41] <wycats> cgaebel: you probably want an Option<&mut T>
[05:01:44] *** Joins: mcpherrin (mcpherrin@BB4DB59D.2876C283.70845BE5.IP)
[05:01:46] <wycats> and I think to_option() will do that
[05:02:08] *** Quits: ecl3ctic (ecl3ctic@578C64B6.F0F44EFA.76AE55C1.IP) (Quit: Leaving)
[05:02:30] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[05:03:14] <cgaebel> but.. I don't need a NULL-check..
[05:03:16] <justin__> I would like to run a process in the background. How would I do this in rust? I have tried using the Process struct and putting that inside a Task but that gives me closure issues on the arguments to the function that builds the process
[05:04:21] *** Joins: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP)
[05:05:11] *** Quits: p1start (rewi@moz-A082F561.adsl.xtra.co.nz) (Ping timeout)
[05:05:28] *** Joins: earlzlap (earlz@moz-483E1E31.neo.res.rr.com)
[05:06:01] *** Quits: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[05:08:26] *** Quits: Krymise (Nietzsche@moz-CA789EF5.nwrknj.fios.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[05:09:04] *** Quits: demizer (Mibbit@moz-6DD2EAF1.hsd1.ca.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[05:10:02] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[05:11:41] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[05:13:49] *** Quits: new_one^food (new_one@moz-87B85681.rice.edu) (Client exited)
[05:14:47] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[05:15:02] *** Joins: matp (matp@moz-16FE1E05.matp.at)
[05:15:14] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[05:15:43] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[05:15:50] <sankha93> is there something similar to #define in rust?
[05:17:26] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[05:17:59] <bjz> sankha93: macro_rules! for static code generation, `static FOO: T = ...;` for constants
[05:20:24] <sankha93> bjz: thank you!
[05:20:38] <bjz> sankha93: which did you need?
[05:21:03] *** Quits: Earnestly (earnest@811A97A3.CF19AA69.5411983D.IP) (Ping timeout)
[05:21:14] *** Joins: p1start (rewi@moz-A082F561.adsl.xtra.co.nz)
[05:21:20] <sankha93> bjz: the macro_rules one
[05:21:44] *** Joins: caukajun (caukajun@moz-C003D244.lf.br.cox.net)
[05:21:57] <bjz> sankha93: macro_rules! is much safer than C's #define
[05:22:13] <sankha93> why so?
[05:22:13] <bjz> sankha93: it manipulates ASTs rather than text
[05:22:21] <bjz> like lisp macros
[05:22:58] <bjz> so that means you don't get name conflicts for example
[05:22:58] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[05:23:19] <sankha93> oh yes, I see in the manual it manipulates the designator
[05:23:24] <bjz> yep
[05:23:31] <bjz> there is a macros tutorial
[05:24:25] <sankha93> link?
[05:24:34] *** Quits: gwty (gwtypc@9D9E9500.1E25ED5.EF1555B.IP) (Ping timeout)
[05:24:36] <sankha93> the macros section in the manual doesn't give many examples
[05:24:43] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Ping timeout)
[05:24:52] <bjz> http://static.rust-lang.org/doc/master/guide-macros.html
[05:25:05] <bjz> it is linked at the bottom of the Rust Tutorial
[05:25:13] <bjz> understandable that you missed it
[05:25:22] <bjz> (not your fault)
[05:25:40] <sankha93> hmm, thank you! :)
[05:25:49] <sankha93> this will be useful!
[05:26:05] <bjz> atm exporting macros is rather clunky :(
[05:26:14] <bjz> I wish they could be paths
[05:26:24] <bjz> on paths I mean
[05:26:52] <bjz> but they can be super useful in crate for doing lots of repetitive stuff
[05:27:17] *** Quits: guacamole (Mibbit@844B311F.8354BB98.137843A6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[05:27:48] <sankha93> yup, I am still try to get acquainted with rust terminologies :)
[05:28:25] *** Joins: swgillespie (textual@moz-4B354EF9.hsd1.wa.comcast.net)
[05:28:50] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Ping timeout)
[05:29:54] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[05:29:59] *** Quits: mcpherrin (mcpherrin@BB4DB59D.2876C283.70845BE5.IP) (Ping timeout)
[05:30:24] *** Joins: mcpherrin (mcpherrin@BB4DB59D.2876C283.70845BE5.IP)
[05:33:26] *** Quits: justin__ (justin@moz-26376CC7.bootp.virginia.edu) (Connection reset by peer)
[05:33:27] *** Joins: justin (justin@moz-26376CC7.bootp.virginia.edu)
[05:36:49] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Connection reset by peer)
[05:37:26] *** Quits: gentlefolk (chatzilla@moz-D195EAF9.cpe.teksavvy.com) (Quit: ChatZilla 0.9.90.1 [Firefox 27.0/20140127194636])
[05:37:31] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[05:37:35] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[05:37:46] *** Joins: justin_ (justin@4EC33531.589CEA99.B7830B68.IP)
[05:37:57] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[05:38:05] *** Quits: justin (justin@moz-26376CC7.bootp.virginia.edu) (Ping timeout)
[05:38:36] *** Quits: dwrensha (chatzilla@moz-B23D2FF6.pitbpa.east.verizon.net) (Ping timeout)
[05:40:30] *** Joins: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[05:41:44] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[05:42:14] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[05:42:26] *** Quits: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Ping timeout)
[05:43:01] *** Joins: gwty (gwtypc@9D9E9500.1E25ED5.EF1555B.IP)
[05:44:43] *** Joins: lenstr (lenstr@42DC74CE.9636F313.7A27613B.IP)
[05:46:12] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[05:46:19] <seanmonstar> bjz: yea, i'd much rather `use std::macros::debug` (on non-standard macros)
[05:46:38] <bjz> yeah :(
[05:46:40] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[05:47:06] <bjz> std::io::println!("hi");
[05:47:51] *** Quits: brandonw (brandonw@moz-B334F9B.dhcp.oxfr.ma.charter.com) (Ping timeout)
[05:47:53] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[05:47:56] <seanmonstar> the current #[phase(syntax)] feels like `use some::crate::*`
[05:48:00] <bjz> seanmonstar: unfortunately it would apparently require making compilation more complex
[05:48:08] <bjz> yep
[05:48:19] <seanmonstar> "where the heck did that macro come from"
[05:48:20] * bjz worries about global namespaces
[05:48:27] *** Joins: brandonw (brandonw@moz-B334F9B.dhcp.oxfr.ma.charter.com)
[05:48:36] <bjz> the issue will also happen with Deriving
[05:48:57] * seanmonstar nods
[05:49:22] <seanmonstar> yea, if you #[phase(syntax)] 2 crates that both export the same names macro... compiler error?
[05:49:32] <bjz> you can't do `use std::fmt; #[deriving(fmt::Show)] struct Foo;`
[05:49:43] <bjz> I guess so
[05:50:26] <bjz> feels like macros are second class sometimes :(
[05:50:44] <bjz> well, they *are* behind feature flags
[05:50:53] *** Quits: earlzlap (earlz@moz-483E1E31.neo.res.rr.com) (Ping timeout)
[05:50:56] <carter> bjz: its kinda tricky to make macros first class in a nice way (though some languages manage to)
[05:51:07] <bjz> carter: yep
[05:51:33] *** Quits: lenstr (lenstr@42DC74CE.9636F313.7A27613B.IP) (Ping timeout)
[05:51:36] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[05:51:37] <bjz> carter: I know it's hard, but I don't know enough to know how hard
[05:51:40] <bjz> :P
[05:51:43] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[05:51:49] <carter> well, depends on the goals
[05:52:06] <carter> its not necessarily hard (though it may be), but its definitely subtle
[05:52:10] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[05:52:25] <carter> whats also subtle: how to manage exceptions in a multi threaded setting
[05:53:16] <carter> bjz: theres some really tricky questions that happen there
[05:53:29] *** Quits: rustilite (rustilite@moz-61B073BC.cpe.net.cable.rogers.com) (Client exited)
[05:53:29] *** Quits: rusti (rusti@moz-61B073BC.cpe.net.cable.rogers.com) (Client exited)
[05:53:46] <bjz> I think 'first class' is a bit far. Rust's macros will never be homoiconic because the devs still want Rust to be parseable without access to the macro definitions, which is fine imo
[05:54:16] <carter> bjz: don't say homoiconic
[05:54:17] <carter> please
[05:54:17] <carter> don't
[05:54:21] <carter> (its overused)
[05:54:23] <bjz> :P
[05:54:30] <carter> and it has nothing to do with macros being first class
[05:54:32] <carter> :)
[05:55:10] <bjz> I do understand that doesn't relate to semantics, hehe
[05:55:30] <carter> these days everyone is like "zomg, X is homoiconic"
[05:55:41] <carter> me:"you mean you can mess with strings there too?"
[05:55:42] <bjz> indeed
[05:55:52] *** Quits: Khady (Khady@moz-31F9D77E.khady.info) (Ping timeout)
[05:56:12] <bjz> it's a neat quility to have, but it's not the be-all and end-all
[05:56:15] <carter> yeah
[05:56:17] <carter> its a cute hack
[05:56:22] <carter> but... 
[05:56:35] <carter> wanna know the real reason why a strictly parens syntax is iffy?
[05:56:52] <bjz> I mean more like the way they are exported/imported – that the feel like citizens of the language rather than 'hacks'
[05:57:06] <Tekk_> carter: as a huge fan of scheme, sure :P
[05:57:23] <carter> Tekk_: giving human friendly parser error messages that point to where the syntax error is :)
[05:57:42] <carter> Tekk_: mind you i like racket lang quite a bit5
[05:57:56] <Tekk_> that's not a problem. you just run slime mode and have the editor point you to where the syntax error is for you :)
[05:58:20] *** Quits: swgillespie (textual@moz-4B354EF9.hsd1.wa.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[05:58:30] <carter> :p
[06:00:23] <bjz> :)
[06:00:45] <carter> Tekk_: theres more than one right tool. 
[06:00:48] *** Joins: dukeleto (dukeleto@moz-C083E0FB.ptld.qwest.net)
[06:00:51] <carter> soo glad that works for you
[06:01:05] <carter> *so
[06:02:36] *** Quits: dukeleto (dukeleto@moz-C083E0FB.ptld.qwest.net) (Ping timeout)
[06:03:38] *** mcpherrin is now known as HOMOICONIC
[06:03:44] <HOMOICONIC> I AM THE BEST
[06:04:29] <HOMOICONIC> (bestp 'property (language-prop 'homoiconic))
[06:04:34] <HOMOICONIC> => #t
[06:04:56] *** Joins: honza_ (honza@2F4A0D37.D725B7F3.2BF60B34.IP)
[06:05:13] *** HOMOICONIC is now known as mcpherrin
[06:06:49] <carter> :P
[06:11:24] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[06:11:44] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[06:12:07] *** Joins: twi (Adium@25779BAD.BC0CC904.54B829D6.IP)
[06:13:31] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[06:13:31] *** Quits: engla (engla@moz-F64E1B0F.cust.bredbandsbolaget.se) (Ping timeout)
[06:16:00] *** Quits: yusukesuzuki (yusukesuzu@moz-43160292.net218219047.t-com.ne.jp) (Ping timeout)
[06:18:10] *** Joins: santiago (santiago@moz-8ADE82B4.socal.res.rr.com)
[06:18:25] *** Quits: caukajun (caukajun@moz-C003D244.lf.br.cox.net) (Quit: caukajun)
[06:19:02] *** Joins: ctangent (textual@moz-4B354EF9.hsd1.wa.comcast.net)
[06:19:42] *** Quits: jeaye (jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[06:21:48] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[06:23:44] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[06:23:52] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[06:25:27] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Ping timeout)
[06:28:27] *** Quits: zztr (Thunderbir@moz-CA50D606.dsl.static.sonic.net) (Quit: zztr)
[06:29:55] *** Quits: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP) (Ping timeout)
[06:30:12] *** Quits: thinkingpad_vm (Mibbit@moz-3DA5D4DF.dhcp.embarqhsd.net) (Quit: http://www.mibbit.com ajax IRC Client)
[06:31:22] *** Quits: thinkingpad (Mibbit@moz-3DA5D4DF.dhcp.embarqhsd.net) (Quit: http://www.mibbit.com ajax IRC Client)
[06:34:55] *** Quits: twi (Adium@25779BAD.BC0CC904.54B829D6.IP) (Quit: Leaving.)
[06:37:05] *** Joins: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca)
[06:38:19] *** Quits: ctangent (textual@moz-4B354EF9.hsd1.wa.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[06:38:39] *** Joins: ctangent (textual@moz-4B354EF9.hsd1.wa.comcast.net)
[06:39:15] *** Joins: lenstr (lenstr@42DC74CE.9636F313.7A27613B.IP)
[06:39:42] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[06:39:45] <lenary> right, i have no idea quite why rust hates me this time, but maybe someone can help
[06:40:18] <lenary> i have what i think is a mutable vector of Process objects (yes, i realise there are like 10000 different process types in std, let's ignore that for a moment)
[06:40:32] <lenary> i apparently can't pull out the last one to do something to it
[06:40:40] <lenary> then go back, and pull out the first one, to do something to it
[06:40:50] <lenary> and I have no idea why...
[06:41:03] <lenary> everything i try is a type error of some kind
[06:41:21] <carter> lenary: step 1: share a link to a paste of the code + the error message
[06:41:26] *** Joins: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[06:41:34] <carter> (:)
[06:41:35] <carter> :O)
[06:41:36] <carter> :)
[06:41:37] <carter> woops
[06:41:49] <lenary> carter: right, i'll share as much as i can, it's homework, so i can't open it all up
[06:41:57] <carter> true
[06:42:00] <carter> ahhhh
[06:42:01] <carter> hrmm
[06:42:10] <carter> well, share a paste of the error message
[06:42:19] <carter> and we can try to understand what the error message is saying
[06:42:31] <lenary> oh, i want to print out the type, but i can't, because i can't compile
[06:42:33] <lenary> *cries*
[06:42:36] <carter> no
[06:42:43] *** Quits: lenstr (lenstr@42DC74CE.9636F313.7A27613B.IP) (Ping timeout)
[06:42:43] <carter> whats the error emssage that prevents you from compiling?
[06:42:45] <carter> paste that
[06:43:06] <carter> learning to read error messages is a skill
[06:43:12] <lenary> yep, one sec
[06:43:23] *** Quits: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Ping timeout)
[06:44:27] <lenary> https://gist.github.com/lenary/a34bc53a8757212fbe6a
[06:44:31] <lenary> that's the error message
[06:45:22] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[06:45:25] *** Quits: claudiu (claudiu@moz-D5BFAAB5.hsd1.ca.comcast.net) (Input/output error)
[06:47:01] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[06:47:21] *** Quits: gwty (gwtypc@9D9E9500.1E25ED5.EF1555B.IP) (Ping timeout)
[06:47:23] <carter> ok
[06:48:38] <lenary> carter: i updated the gist with the snippet too
[06:48:44] <carter> ok
[06:48:45] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[06:48:51] <carter> sooo
[06:49:12] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[06:49:42] <carter> lenary: ohhh,  ithink we've met IRL!
[06:49:44] <carter> or twitter
[06:49:46] <carter> forget which
[06:49:59] <carter> probably twitter
[06:50:22] <lenary> hmm, last tech thing i was at was RICON, i presented on crdts
[06:50:28] <carter> which ricon?
[06:50:34] <lenary> the most recent one
[06:50:42] <carter> oh, i was at that last east one
[06:50:46] <carter> (and quite the fool)
[06:50:56] <lenary> oh, the most recent one was sf
[06:50:57] <carter> i hear the most recent west one was fun
[06:51:01] *** Joins: an0nymous (Jacob@moz-F04BA440.tx.res.rr.com)
[06:51:03] <carter> ok
[06:51:21] <carter> so... rust has pretty stringent ownership checking right?
[06:51:27] *** Joins: diverse (diverse@moz-ED94B8D.oc.oc.cox.net)
[06:51:37] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[06:51:57] <lenary> seems so
[06:52:16] <carter> so theres ~ and & style references
[06:52:28] *** Joins: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP)
[06:52:36] <lenary> if i'm honest, i just choose one, try it, if it fails, choose the other
[06:52:40] <diverse> ~ is not a reference
[06:53:13] <carter> how's it not a pointer with  ownership?
[06:53:21] <lenary> woah
[06:53:34] <carter> ?
[06:53:35] <lenary> can we go back to my error before we start an argument on semantics
[06:53:49] <carter> i'm not arguing, i'm just asking
[06:53:52] <carter> i'm wrong all the time!
[06:53:56] <lenary> oh, right
[06:54:10] <carter> if i'm wrong, it means i'm going to be less long soon
[06:54:14] <carter> *wrong
[06:54:16] *** Quits: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[06:54:28] <lenary> ok, so on lkuper's suggestion, i tried &Some(mut process) for the first one
[06:54:34] <diverse> everything is stored by value in Rust regardless of allocation. That is by the & reference exists, for referencing.
[06:54:35] <lenary> and now i get an ownership error
[06:54:43] <diverse> s/by/why/
[06:54:57] *** Quits: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca) (Input/output error)
[06:55:00] <carter> sure
[06:55:06] <veddan> why is this allowed? https://gist.github.com/veddan/8895396
[06:55:28] <carter> veddan: because pattern matches are checked in order ?
[06:55:37] *** Joins: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca)
[06:55:54] <carter> veddan: that latter branch is deadcode... I think
[06:55:58] <lkuper> lenary: is it saying that "process" is what can't be moved?
[06:55:58] <carter> diverse: go on
[06:56:06] <carter> o/ lkuper 
[06:56:26] <lenary> i... have no idea
[06:56:29] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[06:57:05] <veddan> carter: why isn't it an error to impl the same trait method twice?
[06:57:17] <carter> ohhhh
[06:57:30] <carter> umm i mistread that as a redundant match statement
[06:57:38] <carter> that does look weird
[06:57:47] <veddan> carter: seems like a bug to me
[06:57:50] <carter> yeah
[06:57:55] <carter> i misread it as something else code wise
[06:57:59] <carter> off to bed
[06:57:59] <carter>  :)
[06:58:07] <lkuper> lenary: can you paste the whole error message?
[06:58:15] <lkuper> lenary: also try something for me
[06:58:16] <veddan> carter: yeah, your answers had me confused for a bit
[06:58:22] <lkuper> replace `mut` with `ref`
[06:58:26] <lkuper> lenary^
[06:58:33] <lenary> lkuper: right, so, which first
[06:59:08] <lkuper> lenary: first can I see the error message with &Some(mut process) as the pattern
[06:59:23] *** Joins: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[06:59:53] *** Joins: mitja (Mibbit@A9389DFF.342DDAAC.3E006838.IP)
[07:00:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[07:00:34] <lenary> lkuper: gist updated
[07:00:37] <lenary> now doing the ref thing
[07:00:52] <mitja> I'm trying to compile glfw-rs but keep getting error: can't find crate for `semver`. How do I fix this?
[07:01:02] <lkuper> lenary: thanks -- i see, it underlines the whole thing
[07:01:09] <bjz> mitja: are you on the latest rust?
[07:01:13] <diverse> mitja: update to master
[07:01:13] <derek_c> can something familiar with Rust's runtime tell me what Alex meant he said "just plain old sleeps?"  https://github.com/mozilla/rust/issues/11730#issuecomment-34393708
[07:01:21] <lenary> lkuper: i get something fun when i use `ref`...
[07:01:24] *** Quits: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Ping timeout)
[07:01:37] <derek_c> *someone(
[07:01:40] <derek_c> *someone*
[07:01:50] <bjz> mitja: also, we have a channel #rust-gamedev which is good for game lib questions :)
[07:01:56] <mitja> bjz: compiling the latest as we speak
[07:02:13] <bjz> mitja: semver used to be part of extra
[07:02:20] <lenary> lkuper: gist updated, look at 02-*
[07:02:23] <bjz> mitja: now it is in its own crate
[07:02:28] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[07:02:57] <mitja> bjz, oh I see, thanks. will wait until it compiles :)
[07:03:08] <lkuper> lenary: oh, haha, yeah, sorry
[07:03:32] <lenary> should i sprinkle some more `mut` and `&` ?
[07:03:58] <lkuper> lenary: this would be easier if i had a minimal example to run that demonstrated the bug
[07:03:59] <veddan> if anyone is curious, my earlier problem is already reported as #8153
[07:04:13] <lenary> lkuper: hmm
[07:04:49] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[07:06:20] *** Joins: james4k (james@moz-9BB5AE72.consolidated.net)
[07:06:20] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[07:07:33] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[07:08:08] *** Quits: brson (brson@981AA104.E81F12CD.76F66111.IP) (Ping timeout)
[07:09:33] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[07:09:33] *** ChanServ sets mode: +ao brson brson
[07:09:48] *** Quits: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca) (Ping timeout)
[07:11:49] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[07:15:53] *** Quits: mitja (Mibbit@A9389DFF.342DDAAC.3E006838.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[07:18:32] *** Quits: justin_ (justin@4EC33531.589CEA99.B7830B68.IP) (Quit: Konversation terminated!)
[07:18:38] *** Joins: justin_ (justin@4EC33531.589CEA99.B7830B68.IP)
[07:19:05] *** Joins: Ms2ger (Ms2ger@4A49FFC8.EA68D5B.F15B0BB3.IP)
[07:19:22] <wycats> treemap was removed from extra?
[07:19:49] <Ms2ger> Probably split out into its own module
[07:20:07] <derek_c> how do you get the raw pointer of an object?
[07:20:19] <seanmonstar> Ms2ger: collections::treemap
[07:20:21] <mcpherrin> wycats: it's in `collections` now
[07:20:27] *** Quits: synackse (jordyd@moz-C23D7C8B.seg34.ucf.edu) (Ping timeout)
[07:20:29] <diverse> derek_c: .to_ptr()?
[07:20:32] <seanmonstar> er, wrong mention :)
[07:20:32] <wycats> but no longer documented on rust-lang?
[07:20:39] *** Quits: justin_ (justin@4EC33531.589CEA99.B7830B68.IP) (Ping timeout)
[07:20:42] <derek_c> diverse: object.to_ptr()?
[07:20:49] <mcpherrin> wycats: http://static.rust-lang.org/doc/master/collections/index.html
[07:21:02] <diverse> I think so, but let others here confirm that
[07:21:05] <mcpherrin> wycats: this is a problem with the current website
[07:21:25] <mcpherrin> wycats: http://static.rust-lang.org/doc/master/index.html links to all docs
[07:21:33] <derek_c> I found to_unsafe_ptr
[07:21:38] *** Joins: nlminhtl (ignotus@moz-4CB8A1D.site.volia.net)
[07:21:51] <mcpherrin> Unfortuantely there's not a good way to search the whole site, except using google et al.
[07:23:33] <comex> Rust needs a Hoogle equivalent :)
[07:23:39] <mcpherrin> yeah :-)
[07:23:50] <mcpherrin> I have some neat ideas for code search bouncing around in my head...
[07:24:30] *** Quits: hdevalence (quassel@moz-D125A39F.home3.cgocable.net) (Ping timeout)
[07:24:31] *** Joins: gwty (gwtypc@9D9E9500.1E25ED5.EF1555B.IP)
[07:24:45] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[07:25:51] <wycats> is do completely removed?
[07:26:29] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Ping timeout)
[07:26:59] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[07:28:47] *** Quits: gwty (gwtypc@9D9E9500.1E25ED5.EF1555B.IP) (Ping timeout)
[07:28:59] *** Joins: valenting (Thunderbir@moz-E75529B3.euroweb.ro)
[07:29:07] *** Joins: earlzlap (earlz@moz-483E1E31.neo.res.rr.com)
[07:31:07] *** Joins: gwty (gwtypc@864B814A.A2DD6F69.F64220F6.IP)
[07:31:25] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[07:31:41] *** Quits: ctangent (textual@moz-4B354EF9.hsd1.wa.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[07:31:49] <diverse> wycats: yes
[07:31:56] <wycats> too bad
[07:32:07] <wycats> does that mean spawn is now spawn(proc({ ... }))?
[07:32:12] <diverse> correct
[07:32:17] <wycats> really too bad
[07:32:54] *** Joins: avsej (avsej@D9A610B8.4841F515.FB33447D.IP)
[07:33:37] *** Joins: lenstr (lenstr@42DC74CE.9636F313.7A27613B.IP)
[07:36:01] *** Quits: honza_ (honza@2F4A0D37.D725B7F3.2BF60B34.IP) (Ping timeout)
[07:36:15] *** Quits: StarLight (StarLight@moz-3A3EF710.pppoe.avangarddsl.ru) (Ping timeout)
[07:36:23] *** Quits: mreca (mreca@moz-9B10510C.hsd1.va.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[07:39:08] *** Quits: lenstr (lenstr@42DC74CE.9636F313.7A27613B.IP) (Ping timeout)
[07:40:13] *** Joins: StarLight (StarLight@moz-E2DD1BDA.dynamic.avangarddsl.ru)
[07:43:15] *** Joins: justin_ (justin@moz-435AF98D.bootp.virginia.edu)
[07:44:04] *** Quits: justin_ (justin@moz-435AF98D.bootp.virginia.edu) (Quit: Konversation terminated!)
[07:44:07] *** Joins: justin__ (justin@moz-435AF98D.bootp.virginia.edu)
[07:44:34] *** Quits: LinearInterpol (RJones@moz-E6F82C3A.maine.res.rr.com) (Ping timeout)
[07:47:47] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[07:49:28] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[07:50:50] *** Joins: honza_ (honza@2F4A0D37.D725B7F3.2BF60B34.IP)
[07:51:03] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[07:52:01] *** Quits: nham (Mibbit@moz-2C6185F8.lightspeed.dybhfl.sbcglobal.net) (Quit: http://www.mibbit.com ajax IRC Client)
[07:52:04] *** Quits: justin__ (justin@moz-435AF98D.bootp.virginia.edu) (Connection reset by peer)
[07:53:26] *** Quits: barosl (barosl@34F62860.E551553C.7544CABF.IP) (Quit: 랜덤은 쇠퇴했습니다.)
[07:54:38] *** Joins: Khady (Khady@moz-31F9D77E.khady.info)
[07:54:41] *** Joins: Uther (Instantbir@moz-834083A8.hfc.dyn.abo.bbox.fr)
[07:54:47] <alan_andrade> How can I declare a struct that contains an array ?
[07:55:03] <alan_andrade> rusti struct Foo { arr: int[] };
[07:55:25] *** Joins: mgottschlag (quassel@moz-2421585.cust.bluewin.ch)
[07:56:00] *** Quits: honza_ (honza@2F4A0D37.D725B7F3.2BF60B34.IP) (Ping timeout)
[07:56:01] <Ms2ger>  struct Foo { arr: ~[int] };
[07:56:22] <alan_andrade> Can I specify exact len ?
[07:56:39] <Ms2ger> [int, ..4]
[07:57:32] <alan_andrade> Whoooo \o/
[07:57:37] <alan_andrade> thnx
[07:59:09] *** Joins: barosl (barosl@34F62860.E551553C.7544CABF.IP)
[07:59:25] *** Quits: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) (Connection reset by peer)
[07:59:35] <comex> that has to be the most janky syntax in Rust
[08:00:00] *** Quits: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net) (Quit: Taking a nap.)
[08:00:08] *** Joins: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[08:01:13] <comex> what are the comma and dots supposed to *mean*?
[08:01:54] <Tekk_> well [a, b] is pretty normal array syntax
[08:01:58] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[08:02:08] <Tekk_> so it's an int from the start until eventually, which is 4 away
[08:02:14] *** Quits: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Ping timeout)
[08:02:14] <Tekk_> the use of .. vs ... confuses me though
[08:02:20] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Client exited)
[08:03:34] <comex> i guess it mirrors expression syntax, but if anything "int, ..4" sounds to me like it should be up to 4 ints, not exactly 4
[08:04:06] <Tekk_> to a certain extent they're equivalent. nothing says you need to use all 4
[08:04:07] <Tekk_> I think
[08:04:37] <seanmonstar> the memory is still allocated
[08:04:38] *** Joins: jpf (jan@moz-A8C26A15.org)
[08:04:43] <Tekk_> personally foo: [int 4] would make a bit more sense
[08:04:44] <Tekk_> or 4 int
[08:05:07] <comex> i'd do [int * 4] but i guess you would need to figure out an expression syntax
[08:05:32] <Tekk_> I like that one too, but that involves more operator overloading :P
[08:05:54] <wycats> is there a way to convert a fn(T, U) into a 'static |T, U|: Send?
[08:07:19] <wycats> or the other way
[08:07:25] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[08:07:40] <p1start> Newbie question: how do I construct a BigInt from a normal int? BigInt::from_i64() doesn't seem to work
[08:08:26] *** Quits: gwty (gwtypc@864B814A.A2DD6F69.F64220F6.IP) (Ping timeout)
[08:08:56] *** Joins: moostik (Thunderbir@6181009C.10715965.BCDF592F.IP)
[08:09:26] <Tekk_> p1start: maybe the FromPrimitive trait isn't being autoloaded
[08:09:31] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[08:09:47] <p1start> I've tried `use std::num::FromPrimitive`
[08:09:49] <Tekk_> try putting "use std::num::FromPrimitive;" maybe?
[08:10:41] <bjz> p1start: `let x: BigInt = FromPrimitive:: from_i64(...)`
[08:11:43] <bjz> p1start: static methods need to be referred to via the trait
[08:11:56] <p1start> bjz: that worked, thanks!
[08:11:56] <wycats> I feel like a big hole in the docs are a single place to get docs for builtins
[08:12:14] <bjz> wycats: there is an issue around for that
[08:12:26] <wycats> bjz: for which?
[08:12:27] <bjz> wycats: I think acrichto had a PR that fixed it
[08:12:32] <wycats> the docs?
[08:12:45] <bjz> wycats: docs for impls on built ins
[08:12:58] *** Quits: derek_c (derek@BB4EA703.F1358ABB.5FF621B0.IP) (Quit: Leaving)
[08:13:02] <wycats> cool
[08:13:09] <wycats> bjz: now what about my other question :)
[08:13:19] *** Quits: earlzlap (earlz@moz-483E1E31.neo.res.rr.com) (Ping timeout)
[08:13:24] <bjz> no idea
[08:13:31] <wycats> heh
[08:13:57] *** Joins: mib_fkgh2s (Mibbit@moz-5C618C03.hsd1.mn.comcast.net)
[08:15:07] *** Quits: moostik (Thunderbir@6181009C.10715965.BCDF592F.IP) (Quit: moostik)
[08:16:57] <wycats> where would I look in the source for traits implemented for fn or closures?
[08:17:32] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[08:18:53] *** Quits: Blub\0 (wry@620605B3.71150E1A.237AE2BA.IP) (Ping timeout)
[08:19:06] *** Joins: Blub\0 (wry@620605B3.71150E1A.237AE2BA.IP)
[08:20:39] *** Joins: dbaupp_ (dbaupp@moz-1C09EDD.pa.nsw.optusnet.com.au)
[08:21:12] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[08:21:23] *** Quits: chromatic (chromatic@moz-28CBC7F4.hsd1.or.comcast.net) (Quit: Leaving)
[08:21:39] <dbaupp_> wycats: fn coerces to closures
[08:21:51] <wycats> hm... doesn't seem to
[08:21:57] <dbaupp_> although you may have to give it some help with a let with a type hint
[08:22:02] <wycats> I have a function that takes a 'static |Request, Response|
[08:22:18] <wycats> and I tried passing an fn(Request, Response)
[08:22:19] <wycats> no die
[08:22:20] <wycats> dice
[08:22:44] <wycats> oh wait it does
[08:22:47] <wycats> it was just a dumb error
[08:22:50] <wycats> because I was missing a mut
[08:23:02] <wycats> src/main.rs:38:24: 38:31 error: mismatched types: expected `'static |&routed_http::ServerRequest<>, &mut routed_http::ServerResponse<,>|:Send` but found `fn(&routed_http::ServerRequest<>, &routed_http::ServerResponse<,>)` (values differ in mutability)
[08:23:06] <wycats> I totally misread it
[08:23:13] <wycats> it was even somewhat helpful :P
[08:23:20] <dbaupp_> and closure -> fn has to be via transmute, since it doesnt work, in general
[08:23:53] <wycats> dbaupp_: I take a &'static closure in routed-http
[08:24:02] <wycats> so I was trying to support fns
[08:24:10] <dbaupp_> (i.e. all closures but 'static ones need their environment.)
[08:24:11] <wycats> turns out it Just Works™
[08:24:32] <wycats> dbaupp_: taking a 'static already compiler-enforces no env
[08:24:35] <wycats> which is pretty nice
[08:24:59] <dbaupp_> oh cool
[08:25:11] <wycats> I want router.add("/some/:thing", |req, res| ...) to work
[08:25:17] <wycats> sadly I have to transmute still
[08:25:21] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[08:25:27] <wycats> I use transmute_copy in clone
[08:25:40] <dbaupp_> yep
[08:25:43] *** Joins: igork (igork@moz-F6DD8476.broadband.corbina.ru)
[08:25:45] <wycats> I haven't been able to identify a reason that clone shouldn't work for 'static ||
[08:25:51] <wycats> i.e. why I'm doing something dangerous
[08:26:37] <wycats> https://www.irccloud.com/pastebin/Vco4WPd2
[08:26:42] <wycats> I'm porting the go tutorial
[08:27:06] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Ping timeout)
[08:27:25] *** Quits: dbaupp_ (dbaupp@moz-1C09EDD.pa.nsw.optusnet.com.au) (Ping timeout)
[08:27:26] <wycats> they use html/template
[08:27:35] <wycats> I'm trying to decide if I should port it
[08:28:15] *** Joins: lenstr (lenstr@42DC74CE.9636F313.7A27613B.IP)
[08:29:38] <wycats> ideally it would compile a template into a .rs
[08:29:45] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[08:29:58] *** Joins: kvanb (kvanb@moz-DA06562E.lnse2.win.bigpond.net.au)
[08:30:29] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Quit: Leaving.)
[08:31:08] *** Quits: lenstr (lenstr@42DC74CE.9636F313.7A27613B.IP) (Ping timeout)
[08:31:42] <wycats> handlebars.rs would take me too long to write without a proper lexer and parser
[08:32:03] <wycats> hm... I suppose I could just write a backend for handlebars.js
[08:32:07] <wycats> not a bad idea in fact
[08:34:07] *** Quits: jyyou (jyyou@moz-47B052FA.cs.nctu.edu.tw) (Ping timeout)
[08:36:36] *** Joins: jyyou (jyyou@moz-47B052FA.cs.nctu.edu.tw)
[08:38:52] <dbaupp> wycats: re Clone for 'static ||, I think it's just unimplemented, not dangerous
[08:39:39] <dbaupp> wycats: (sorry, about dropping out before, was on my phone temporarily)
[08:40:39] *** Joins: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP)
[08:40:47] *** Joins: logicalparadox (logicalpar@moz-6525B77.adr01.dlls.pa.frontiernet.net)
[08:40:47] *** Joins: vertexclique (vertexcliq@6F384F56.153E7D13.6894ADF4.IP)
[08:42:12] *** Joins: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[08:42:22] *** Quits: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[08:42:38] *** Quits: jyyou (jyyou@moz-47B052FA.cs.nctu.edu.tw) (Ping timeout)
[08:43:25] *** Quits: canhtak (canhtak@moz-8DFB5E6A.wl.t.ulaval.ca) (Quit: canhtak)
[08:43:36] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[08:43:51] <wycats> dbaupp: np
[08:43:58] <wycats> I'll submit a PR to add it then
[08:45:02] *** Joins: jyyou (jyyou@moz-47B052FA.cs.nctu.edu.tw)
[08:45:07] <wycats> dbaupp: if I'm trying to write an API that reserves the right to return an IoError later, how do I structure it?
[08:45:13] <wycats> I'm trying to return an IoResult<T>
[08:45:25] <wycats> but getting:
[08:45:27] <wycats> https://www.irccloud.com/pastebin/5KiLVp6E
[08:45:42] <wycats> I assume because I haven't actually returned an Err on any path
[08:45:55] <wycats> but I just want to reserve the right to return an Err later
[08:45:59] <wycats> without breaking consumers
[08:48:31] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[08:50:13] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[08:50:24] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Quit: csherratt)
[08:51:09] *** Quits: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net) (Connection reset by peer)
[08:52:20] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[08:54:59] *** Joins: morton (Mibbit@478BC701.E99A82BF.39A624A.IP)
[08:56:22] <dbaupp> the semicolon there?
[08:56:28] <dbaupp> (gtg to dinner, bbiab)
[08:56:44] *** Quits: mib_fkgh2s (Mibbit@moz-5C618C03.hsd1.mn.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[08:57:52] *** Joins: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net)
[09:00:26] *** Quits: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net) (Ping timeout)
[09:00:39] *** Quits: mgottschlag (quassel@moz-2421585.cust.bluewin.ch) (Ping timeout)
[09:00:47] *** Joins: sigma1 (sigma@moz-B2E77065.range86-184.btcentralplus.com)
[09:00:50] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[09:01:07] *** Joins: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net)
[09:01:29] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Quit: csherratt)
[09:02:34] *** Quits: sigma1 (sigma@moz-B2E77065.range86-184.btcentralplus.com) (Ping timeout)
[09:03:10] *** Joins: moostik (Thunderbir@6181009C.10715965.BCDF592F.IP)
[09:03:19] *** Quits: p1start (rewi@moz-A082F561.adsl.xtra.co.nz) (Ping timeout)
[09:03:56] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[09:05:59] *** Joins: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org)
[09:06:20] *** Quits: cdidd (cdidd@moz-F6E72CE9.broadband.corbina.ru) (Input/output error)
[09:10:37] <wycats> good call
[09:10:52] <wycats> hm... next difficulty
[09:11:04] *** Quits: james4k (james@moz-9BB5AE72.consolidated.net) (Ping timeout)
[09:11:09] <wycats> I want to accept |req, res| or |req, res| -> IoResult
[09:11:23] <wycats> and assume the former is IoResult<()> that always returns ()
[09:11:40] <Ms2ger> Implement a trait for both?
[09:11:49] <wycats> Ms2ger: it's a little tricky
[09:12:26] <wycats> I need to return a 'static |&Request, &mut Response| -> IoError<()> for both
[09:12:30] <wycats> I tried a bit
[09:12:36] <wycats> lifetimes get messy
[09:13:19] *** Joins: rca (rcatolino@moz-FE910765.adsl.proxad.net)
[09:14:15] <wycats> https://gist.github.com/wycats/ad6e92e3bae33c79cf0f
[09:14:17] <wycats> fill in the blanks
[09:14:20] <wycats> I was having trouble
[09:17:14] *** Joins: eddyb (eddy@moz-92B95652.residential.rdsnet.ro)
[09:17:16] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[09:18:30] <alan_andrade> If I have a struct Foo, how can I generate a pointer of the Foo type ?
[09:18:30] *** Joins: gwty (gwtypc@864B814A.A2DD6F69.F64220F6.IP)
[09:18:35] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[09:19:17] <Ms2ger> &Foo { ... }
[09:19:40] *** Joins: sigma1 (sigma@C91C7F36.70518F41.9D18269F.IP)
[09:20:31] *** Quits: moostik (Thunderbir@6181009C.10715965.BCDF592F.IP) (Ping timeout)
[09:21:02] <alan_andrade> is it possible to init the struct as empty ?
[09:22:04] <Ms2ger> What would the memory look like?
[09:22:28] *** Joins: lenstr (lenstr@42DC74CE.9636F313.7A27613B.IP)
[09:22:42] <eddyb> alan_andrade: unsafe { let mut x: Foo = uninit(); let p = &mut x as *mut Foo; ... }
[09:22:59] <alan_andrade> struct auditinfo_addr {
[09:22:59] <alan_andrade>               au_id_t         ai_auid;        /* Audit user ID. */
[09:22:59] <alan_andrade>               au_mask_t       ai_mask;        /* Audit masks. */
[09:23:01] <alan_andrade>               au_tid_addr_t   ai_termid;      /* Terminal ID. */
[09:23:03] <alan_andrade>               au_asid_t       ai_asid;        /* Audit session ID. */
[09:23:05] <alan_andrade>               u_int64_t       ai_flags;       /* Audit session flags. */
[09:23:06] <eddyb> please....
[09:23:07] <alan_andrade>          };
[09:23:09] <alan_andrade> oh my bad :\
[09:23:11] <alan_andrade> I'm sorry
[09:23:12] <eddyb> Ms2ger: you shouldn't have asked
[09:23:18] <Ms2ger> Sorry eddyb 
[09:23:36] <eddyb> alan_andrade: yeah, as I hoped, FFI, use uninit as above to have uninitialized memory
[09:23:59] *** Quits: morton (Mibbit@478BC701.E99A82BF.39A624A.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[09:24:01] *** Joins: moostik (Thunderbir@6181009C.10715965.BCDF592F.IP)
[09:24:10] <alan_andrade> gotcha
[09:24:15] *** Quits: lenstr (lenstr@42DC74CE.9636F313.7A27613B.IP) (Ping timeout)
[09:24:50] *** Joins: LinearInterpol (RJones@moz-E6F82C3A.maine.res.rr.com)
[09:25:18] *** Quits: SimonSapin (simon@moz-9A1FE870.exyr.org) (Ping timeout)
[09:25:57] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[09:26:11] *** Joins: cdidd (cdidd@moz-6B19D6C0.broadband.corbina.ru)
[09:26:13] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[09:27:37] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Ping timeout)
[09:28:23] *** Joins: p1start (rewi@moz-A082F561.adsl.xtra.co.nz)
[09:29:05] *** Quits: cdidd (cdidd@moz-6B19D6C0.broadband.corbina.ru) (Input/output error)
[09:29:37] *** Joins: jackneill (jackneill@moz-B7CD4B21.pool.digikabel.hu)
[09:30:10] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[09:31:54] *** Joins: Zr40 (zr40@moz-CCFEAB92.adsl.xs4all.nl)
[09:31:58] *** Joins: mgottschlag (quassel@moz-2421585.cust.bluewin.ch)
[09:32:18] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[09:33:33] *** Joins: Saj (Sajuuk@moz-840D0658.netvisao.pt)
[09:34:05] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[09:35:28] *** Quits: trobertson (quassel@moz-A4AC319.sd.sd.cox.net) (Ping timeout)
[09:35:34] <wycats> Ms2ger: the tl;dr is that I can't wrap the original VoidHandler
[09:35:50] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[09:35:51] <wycats> because using it inside the new closure I return produces obvious lifetime issues
[09:36:12] <wycats> I'm surprised that 'static doesn't fix that, but it doesn't
[09:36:25] <eddyb> wycats: it's a bug
[09:36:30] *** Joins: eibwen (kvirc@moz-FBCDE62C.dip0.t-ipconnect.de)
[09:36:35] <wycats> yes, but is there a workaround?
[09:36:39] *** Joins: trobertson (quassel@moz-A4AC319.sd.sd.cox.net)
[09:36:42] <eddyb> 'static closures should be Pod+Freeze+Send
[09:37:25] <wycats> I need something like: https://gist.github.com/wycats/bdf8d08bff7214a63c44
[09:37:31] <wycats> eddyb: I would agree
[09:37:32] <eddyb> sadly, not even this works: 'static ||:Pod (because it's treated as &mut Trait:Pod, not the closure itself being Pod. not sure which makes more sense though)
[09:38:24] <eddyb> wycats: and what doesn't work there?
[09:38:46] <wycats> https://www.irccloud.com/pastebin/WGKMarCf
[09:38:46] <eddyb> wycats: erm, you're capturing self
[09:39:00] <wycats> let handler = self?
[09:39:04] <wycats> and use handler inside?
[09:39:10] <eddyb> https://gist.github.com/wycats/bdf8d08bff7214a63c44#file-gistfile1-rs-L14
[09:39:33] <wycats> let handler = self didn't help
[09:39:38] <eddyb> how could it?
[09:39:42] <eddyb> you're capturing a stack variable
[09:39:43] <wycats> eddyb: do you see what I'm trying to do?
[09:39:45] <eddyb> either way
[09:39:50] <wycats> eddyb: except that it's a 'static
[09:39:52] *** Quits: diverse (diverse@moz-ED94B8D.oc.oc.cox.net) (Quit: WeeChat 0.4.2)
[09:39:54] <wycats> so it should be fine
[09:40:02] <eddyb> wycats: oh, I see
[09:40:11] <eddyb> wycats: but you're still capturing it from the stack
[09:40:19] <wycats> eddyb: I just want a way to convert a 'static |req, res| into a 'static |req, res| -> IoResult
[09:40:27] <wycats> I'm open to anything that will work
[09:40:30] <eddyb> you can do this unsafely, if you want to
[09:40:35] <wycats> I'm ok with that
[09:40:40] <eddyb> closures are pretty deterministic
[09:40:41] <wycats> as long as it's actually safe in practice
[09:40:57] <wycats> (which would lead me to also want a built-in solution)
[09:41:07] <wycats> (I think 'static closures could be friendlier :P )
[09:41:14] <eddyb> need variadic generics
[09:41:16] <wycats> eddyb: what is the unsafe solution?
[09:42:06] <eddyb> fn void_wrapper(env: fn(&ServerRequest, &mut ServerResponse), req: &ServerRequest, res: &mut ServerResponse) -> IoResult<()> {env(req, res); Ok(())}
[09:42:37] <eddyb> wycats: and now transmute (void_wrapper, fn_ptr) to the Handler closure type
[09:43:02] <eddyb> or the other way around
[09:43:07] *** Joins: xiongmao86 (xiongmao86@A11E3BF0.5F152A6A.21B78128.IP)
[09:43:13] *** Quits: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP) (Client exited)
[09:43:37] <eddyb> you can get the fn_ptr from a closure by doing the reverse operation. you can even have a runtime check for env == null to make sure what you're doing is sane
[09:43:43] <eddyb> wycats: wait, I did something wrong :))
[09:43:57] <eddyb> fn void_wrapper(env: fn(*(), &ServerRequest, &mut ServerResponse), req: &ServerRequest, res: &mut ServerResponse) -> IoResult<()> {env(ptr::null(), req, res); Ok(())}
[09:43:58] <wycats> the idea being that a closure is just an env + a function?
[09:44:03] <eddyb> yupp
[09:44:11] <wycats> is that intentional?
[09:44:21] <eddyb> just like trait objects
[09:44:38] <wycats> I mean: is it likely to change?
[09:44:44] <eddyb> &Trait with only one method can actually use the same layout
[09:44:47] <eddyb> wycats: unlikely
[09:44:51] <eddyb> maybe the order :P
[09:44:54] <wycats> seems like a nice thing to be spec'ed
[09:45:19] <eddyb> if we decide to freeze an ABI, sure
[09:45:29] <wycats> we can freeze pieces
[09:45:41] <wycats> without being totally ABI locked-down
[09:45:41] <eddyb> wycats: see src/librustc/back/abi.rs
[09:45:54] <wycats> eddyb: what's the API for transmuting my closure into that?
[09:46:10] <eddyb> you just transmute the closure into a tuple
[09:46:22] <eddyb> or vice-versa
[09:46:30] <wycats> and then what?
[09:46:43] <wycats> I'm missing something
[09:46:52] <eddyb> the tuple has *() and fn(*(), ..args)
[09:47:00] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[09:47:04] <eddyb> env and function
[09:47:31] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[09:47:42] <eddyb> wycats: you've seen this before, in the rust_fail nonsense
[09:47:45] <wycats> transmute::<VoidHandler,(*(), void_wrapper)>(self) ?
[09:47:57] <wycats> yeah... it's definitely ringing bells
[09:48:03] <wycats> but I'm not fluent with the incantations yet
[09:48:36] <wycats> I don't think this is the right idea
[09:48:37] *** Quits: moostik (Thunderbir@6181009C.10715965.BCDF592F.IP) (Quit: moostik)
[09:48:43] <wycats> it's too far off in unsafe la la land
[09:48:54] <eddyb> let (env, fn_ptr): (*(), fn(*(), ..Args)) = transmute(self); transmute((fn_ptr, void_wrapper))
[09:49:13] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[09:49:15] <eddyb> I'm not sure that's the right order, please consult the abi.rs file I mentioned above
[09:49:21] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[09:49:47] <wycats> eddyb: it seems like some unsafe functions to do: closure.to_fn() and fn.to_closure() would be the right thing
[09:49:57] <wycats> which would require 'static closures
[09:50:11] <eddyb> wycats: need variadic generics to actually implement those :P
[09:50:15] <wycats> :(
[09:50:20] <wycats> many hacks
[09:50:34] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Connection reset by peer)
[09:50:34] <eddyb> wycats: there's a Closure type somewhere, I just remembered
[09:50:52] <eddyb> it's a struct with the right layout, if you don't want to get the tuples wrong
[09:50:52] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[09:51:23] <wycats> I'm having second thoughts about going down this path
[09:51:56] <eddyb> wycats: I did this in rustc for bare fn pointer -> closure coercion
[09:52:14] <wycats> it seems somewhat strange that it's not straight-forward to wrap a &'static || into another &'static ||
[09:52:22] <wycats> there must be a better solution
[09:52:28] <eddyb> it's still a function pointer
[09:52:40] <eddyb> not an actual constexpr function reference
[09:52:40] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[09:52:42] *** Quits: Lovot_ (root@AE31FB56.8153C3BF.F3C9A2D9.IP) (Quit: Lost terminal)
[09:52:55] <wycats> what do you mean by that?
[09:53:14] <eddyb> wycats: a 'static || is at least fn()
[09:53:24] <eddyb> you can't just wrap a function pointer
[09:53:30] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[09:53:33] <wycats> yeah
[09:53:47] <wycats> I was thinking about creating a struct that held the closure
[09:53:48] <eddyb> (but then we decided that the virtual cost wasn't worth the flexibility and only allowed coercion for statically resolved functions, with a per-function wrapper)
[09:54:15] <eddyb> wycats: the transmute above will be safe in the future
[09:54:25] <wycats> which one?
[09:54:36] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[09:54:37] <wycats> let (env, fn_ptr): (*(), fn(*(), ..Args)) = transmute(self); transmute((fn_ptr, void_wrapper))
[09:54:38] <eddyb> well, the couple of transmutes used to create the wrapper
[09:54:38] <wycats> ?
[09:54:57] *** flaper87|afk is now known as flaper87
[09:55:17] <wycats> what's ..Args in ^^
[09:55:22] <eddyb> though I should stop talking, I didn't wake up completely
[09:55:30] <eddyb> wycats: variadic notation. your argument types
[09:55:40] <eddyb> because I cba to copy paste them again
[09:55:40] <wycats> ah ok
[09:55:43] <wycats> :P
[09:57:10] <wycats> what does "safe in the future" mean?
[09:57:40] *** Quits: marc_ (uid5324@moz-31ABA2C0.irccloud.com) (Ping timeout)
[09:57:40] *** Quits: escalant3 (uid14896@moz-31ABA2C0.irccloud.com) (Ping timeout)
[09:57:40] *** Quits: sankha93 (uid12218@moz-31ABA2C0.irccloud.com) (Ping timeout)
[09:57:40] *** Quits: tomdale (sid5518@moz-31ABA2C0.irccloud.com) (Ping timeout)
[09:58:03] <eddyb> wycats: I was thinking... if we have an unsized function type, so the current fn() becomes *fn()
[09:58:21] *** Quits: lenary (sid5084@moz-31ABA2C0.irccloud.com) (Ping timeout)
[09:58:24] <alan_andrade> Hey Ms2ger, I can't find uninit() anyhwere. Is that the correct name ?
[09:58:24] <eddyb> or &'static fn(), rather
[09:58:36] <eddyb> alan_andrade: it's in std::unstable::intrinsics
[09:59:25] <eddyb> wycats: then you could cast &'static fn(A, B) -> C to &'static Fn<A, B, D> (produce a closure with a different return type), if you implemented the trait yourself
[09:59:37] *** Quits: zil (sid23500@moz-31ABA2C0.irccloud.com) (Ping timeout)
[10:00:11] *** Quits: whitglint (uid15486@moz-31ABA2C0.irccloud.com) (Ping timeout)
[10:00:11] *** Quits: cmeiklejohn (sid1900@moz-31ABA2C0.irccloud.com) (Ping timeout)
[10:00:11] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[10:00:15] *** Quits: Afuna (sid21127@moz-31ABA2C0.irccloud.com) (Ping timeout)
[10:00:25] <eddyb> it would actually mean you can get a -> () and an -> IoResult<()> closure coerced from the same bare function
[10:01:07] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[10:01:30] <wycats> eddyb: I think if we keep going down the current path we're going down, we're going to want to find ways to make Result<(), T> as pleasant as ()
[10:01:33] <wycats> https://www.irccloud.com/pastebin/TPP6dGg2
[10:01:35] <wycats> yay
[10:01:46] *** Quits: logicalparadox (logicalpar@moz-6525B77.adr01.dlls.pa.frontiernet.net) (Client exited)
[10:01:54] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[10:02:33] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[10:03:46] *** Joins: cdidd (cdidd@moz-7854DDDA.broadband.corbina.ru)
[10:05:19] *** Quits: fournm (Aria@moz-ABB60BA0.austin.res.rr.com) (Quit: Leaving)
[10:06:15] *** Joins: moostik (Thunderbir@6181009C.10715965.BCDF592F.IP)
[10:06:24] *** Quits: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Client exited)
[10:06:34] <wycats> are there multiline strings in Rust?
[10:07:01] *** Joins: yusukesuzuki (yusukesuzu@moz-43160292.net218219047.t-com.ne.jp)
[10:07:39] *** Quits: mgottschlag (quassel@moz-2421585.cust.bluewin.ch) (Ping timeout)
[10:08:18] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[10:10:56] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[10:11:08] *** Quits: valenting (Thunderbir@moz-E75529B3.euroweb.ro) (Quit: valenting)
[10:15:24] *** Joins: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[10:15:37] <dbaupp> wycats: all strings
[10:16:00] <wycats> dbaupp: via \?
[10:16:12] <dbaupp> wycats: that removes the \n from the resulting string
[10:16:14] <dbaupp> but "foo
[10:16:16] <dbaupp> bar"
[10:16:21] *** Joins: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com)
[10:16:24] <dbaupp> is the same as "foo\nbar"
[10:16:27] *** Joins: lenstr (lenstr@42DC74CE.9636F313.7A27613B.IP)
[10:16:28] <dbaupp> and "foo\
[10:16:29] <dbaupp> bar"
[10:16:31] <wycats> does it remove leading space?
[10:16:32] <dbaupp> is "foobar"
[10:16:36] <dbaupp> with \ yes
[10:16:40] <dbaupp> otherwise, no
[10:16:41] <wycats> without \ no
[10:16:44] <wycats> ok
[10:16:58] *** Quits: p1start (rewi@moz-A082F561.adsl.xtra.co.nz) (Ping timeout)
[10:17:11] <wycats> does \" not work?
[10:17:21] <wycats> the compiler seemed to be confused
[10:17:31] <dbaupp> inside a string? should work
[10:17:35] <wycats> hm weird
[10:17:40] <wycats> perhaps it was confounding
[10:17:48] <dbaupp> (there's also raw strings, r#"foo"bar"#, fwiw.)
[10:18:00] <wycats> dbaupp: another question:
[10:18:22] <wycats> I'm kind of surprised at the behavior of result.or_else
[10:18:47] <wycats> I was looking for something like unwrap_or_else
[10:18:51] <wycats> was surprised not to find it
[10:18:53] <wycats> on Result
[10:18:57] <dbaupp> .ok().unwrap_or_else
[10:19:03] <wycats> ah
[10:19:07] <wycats> semi-strange
[10:19:10] <dbaupp> that does loose the error message
[10:19:18] <dbaupp> but, composition <3
[10:20:01] *** Quits: lenstr (lenstr@42DC74CE.9636F313.7A27613B.IP) (Ping timeout)
[10:20:06] <wycats> heh
[10:20:29] *** Quits: moostik (Thunderbir@6181009C.10715965.BCDF592F.IP) (Ping timeout)
[10:21:57] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[10:22:11] <wycats> I think I finally hit my stopping point for tonight
[10:22:21] <wycats> looks like rust-http doesn't support POST params from forms
[10:23:46] *** Joins: jamil_1 (kvirc@FD4948D5.A0E3DE9C.F6DA161.IP)
[10:24:14] *** Joins: moostik (Thunderbir@6181009C.10715965.BCDF592F.IP)
[10:26:07] *** Joins: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de)
[10:26:18] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[10:26:47] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[10:27:01] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[10:27:39] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[10:28:30] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Ping timeout)
[10:28:39] *** Quits: gwty (gwtypc@864B814A.A2DD6F69.F64220F6.IP) (Ping timeout)
[10:28:48] *** Joins: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP)
[10:28:59] <wycats> hm... looks like it may not support bodies at all
[10:29:30] <eddyb> wycats: are you sure you're reading them from the request?
[10:29:40] <wycats> I'm reading the source
[10:30:05] <eddyb> POST is just data sent after the request itself
[10:30:08] <wycats> https://github.com/chris-morgan/rust-http/blob/master/src/http/server/request.rs#L280-L353
[10:30:13] *** Joins: gwty (gwtypc@864B814A.A2DD6F69.F64220F6.IP)
[10:30:13] <wycats> the body is never populated
[10:30:20] <wycats> eddyb: yes, I know how HTTP works ;)
[10:30:28] <eddyb> riiight
[10:30:31] <wycats> eddyb: it just doesn't look like the rust-http request object keeps going
[10:30:31] *** Quits: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[10:30:32] *** Quits: vertexclique (vertexcliq@6F384F56.153E7D13.6894ADF4.IP) (Client exited)
[10:30:43] <wycats> https://github.com/chris-morgan/rust-http/blob/master/src/http/server/request.rs#L313
[10:30:53] *** Joins: vertexclique (vertexcliq@6F384F56.153E7D13.6894ADF4.IP)
[10:31:05] <wycats> eddyb: such trolls at 2am :P
[10:31:22] <eddyb> wycats: https://github.com/chris-morgan/rust-http/blob/master/src/http/server/request.rs#L339
[10:31:39] <eddyb> it only closes the connection in that case
[10:31:50] <wycats> yes, but the actual stream is lost
[10:31:57] <wycats> it is not included in the request
[10:32:00] <wycats> the request.body is a ~str
[10:32:03] <wycats> (which is wrong)
[10:32:11] <wycats> https://github.com/chris-morgan/rust-http/blob/master/src/http/server/request.rs#L208
[10:32:20] <wycats> and afaict never populated
[10:32:26] <wycats> you want it to be a buffer anyway
[10:32:35] *** Quits: vertexclique (vertexcliq@6F384F56.153E7D13.6894ADF4.IP) (Ping timeout)
[10:32:47] <eddyb> wycats: the stream is taken by reference
[10:32:53] <eddyb> so you can continue reading from it
[10:32:55] <wycats> eddyb: yes, but it is never put into the Request
[10:33:02] <wycats> yes, but the Request is what's passed to handlers
[10:33:14] <eddyb> the Request is *returned*
[10:33:29] <wycats> https://github.com/chris-morgan/rust-http/blob/master/src/http/server/mod.rs#L72
[10:33:38] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[10:33:43] <wycats> eddyb: maybe you know something about this code that I'm missing?
[10:33:48] <eddyb> so a higher-level API can check the method, read the body if it's POST, parse it and whatnot
[10:34:06] <wycats> the public API for rust-http's server is https://github.com/chris-morgan/rust-http/blob/master/src/http/server/mod.rs#L19
[10:34:10] <eddyb> oops https://github.com/chris-morgan/rust-http/blob/master/src/http/server/mod.rs#L68
[10:34:26] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[10:34:26] <eddyb> wycats: I guess it's NYI, my bad
[10:34:34] <wycats> NYI?
[10:34:38] <wycats> not yet implemented?
[10:34:42] <eddyb> yeah
[10:34:44] <wycats> confirm, that is what I have been saying :P
[10:34:51] <wycats> if I get some time, I'll PR it
[10:35:05] <wycats> I'm unsure if you want it to be a string or a stream
[10:35:12] <wycats> I was first thinking stream so you don't have to block
[10:35:20] <wycats> but you're already inside a task
[10:35:44] <wycats> it seems like bad form to couple the blocking for header reading to blocking for body reading
[10:36:00] <wycats> especially if you want to do something like WebSockets or Long Polling
[10:36:53] <wycats> I should sleep
[10:37:28] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[10:40:21] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[10:40:30] <wycats> eddyb: fwiw, I'm porting http://golang.org/doc/articles/wiki/#tmp_13 to Rust
[10:40:32] <wycats> it's going well so far
[10:40:41] <wycats> I'm using my routed-http library as the core
[10:40:42] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[10:41:08] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[10:42:10] <silven> Where is the Arc-stuff nowadays? I can't seem to find anything, std::sync:: or otherwise
[10:42:20] *** Joins: vertexclique (vertexcliq@6F384F56.153E7D13.6894ADF4.IP)
[10:43:33] <eddyb> silven: libsync
[10:43:43] *** Joins: mib_pddtnm (Mibbit@810827A8.F34E366.78004705.IP)
[10:43:46] <silven> eddyb: extern mod sync?
[10:43:53] <silven> or what?
[10:44:06] <eddyb> http://static.rust-lang.org/doc/master/index.html <3
[10:44:30] <eddyb> silven: probably
[10:45:01] <silven> I checked http://static.rust-lang.org/doc/master/std/index.html but that doesn't really help
[10:45:50] <silven> I get unresolved import
[10:46:26] *** Parts: moostik (Thunderbir@6181009C.10715965.BCDF592F.IP) ()
[10:46:47] <dbaupp> http://static.rust-lang.org/doc/master/sync/index.html
[10:47:30] *** Joins: [squiddy] (squiddy@moz-767EF079.dynamic.cablesurf.de)
[10:47:34] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[10:47:38] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[10:48:01] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[10:48:11] <silven> oh, so it's sync, not std::sync
[10:48:12] <silven> bah
[10:48:40] <eddyb> we don't namespace crates :P
[10:49:53] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[10:50:24] *** Quits: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de) (Quit: Leaving.)
[10:50:53] *** Joins: amousset (amousset@6181009C.10715965.BCDF592F.IP)
[10:51:19] *** Joins: nkoep (nik@moz-F42F5A45.pool.mediaways.net)
[10:51:37] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[10:51:47] <dbaupp> cmr: does cargo-lite support building with opts?
[10:52:19] *** Quits: vertexclique (vertexcliq@6F384F56.153E7D13.6894ADF4.IP) (Client exited)
[10:52:39] <Tobba> src\kernel\core\coroutine.rs:5:45: 5:62 error: function calls in constants are limited to struct and enum constructors
[10:52:39] <Tobba> src\kernel\core\coroutine.rs:5 static sleep_queue: SleepQueue<Coroutine> = SleepQueue::new();
[10:52:43] <Tobba> pretty sure that IS a constructor
[10:53:00] <dbaupp> no, that's a function call
[10:53:12] <Tobba> then what the hell is a constructor function
[10:53:15] <dbaupp> it happens to make a new SleepQueue value, but it's not a constructor
[10:53:18] *** Quits: jamil_1 (kvirc@FD4948D5.A0E3DE9C.F6DA161.IP) (Quit: KVIrc 4.0.4 Insomnia http://www.kvirc.net/)
[10:53:21] <dbaupp> enum Foo { This(int) }
[10:53:27] <Tobba> it says function calls are allowed to constructors- ah
[10:53:27] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[10:53:29] *** Joins: jamil_1 (kvirc@FD4948D5.A0E3DE9C.F6DA161.IP)
[10:53:30] <Tobba> thats a thing?
[10:53:38] <dbaupp> enums? yeah
[10:53:44] <Tobba> wait
[10:53:47] <Tobba> I missread that hard
[10:53:48] <Tobba> anyways
[10:53:49] *** Quits: jamil_1 (kvirc@FD4948D5.A0E3DE9C.F6DA161.IP) (Quit: KVIrc 4.0.4 Insomnia http://www.kvirc.net/)
[10:54:22] <Tobba> I'll just swap it out to set the struct up in place, but eugh
[10:54:48] *** Joins: jamil_1 (kvirc@FD4948D5.A0E3DE9C.F6DA161.IP)
[10:54:57] *** Joins: escalant3 (uid14896@moz-31ABA2C0.irccloud.com)
[10:55:00] *** Joins: tomdale (sid5518@moz-31ABA2C0.irccloud.com)
[10:55:57] <eddyb> Tobba: need CTFE. you can use a macro if there's a lot of nonsense going on in there
[10:56:01] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[10:56:08] <Tobba> its pretty short (for now)
[10:56:20] <Tobba> this queue is going to be interesting though
[10:56:33] <Tobba> I found a paper on a lock free priority queue, performance is (statistically!) O(log n)
[10:56:51] <jamil_1> I have a List<A> with deriving ToStr declaration but I am getting "unable to find implementation of trait ToStr for List<i32>" when I call to_str() on a list
[10:57:03] *** Joins: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de)
[10:57:35] <eddyb> jamil_1: at this point, may I suggest #[deriving(Show)]?
[10:58:11] <jamil_1> eddyb: " error: unknown `deriving` trait: `Show`"
[10:58:18] <dbaupp> jamil_1: you need to have the trait in scope to call methods
[10:58:42] <eddyb> dbaupp: the error doesn't sound like that
[10:58:44] <Tobba> heh, this is gonna get weird
[10:58:52] <eddyb> jamil_1: I guess your rustc is not master
[10:59:02] <Tobba> in this sleep queue thing, the node is just tacked onto the object thats sleeping
[10:59:13] <Tobba> so the owner is an enum that can be an Rc or a Weak, depending on if its in the queue
[10:59:15] <jamil_1> eddyb: "C:\MinGW\msys\1.0\local\bin\rustc.exe 0.10-pre (c3ccaac 2014-02-07 03:26:34 -0800)"
[10:59:40] <eddyb> that's pretty recent
[10:59:44] <dbaupp> eddyb: oh, yeah
[10:59:47] <eddyb> dbaupp: when did deriving(Show) land?
[10:59:54] <dbaupp> last 24 hours
[11:00:00] <dbaupp> approximately
[11:00:09] <Tobba> I never got what the deriving thing did
[11:00:11] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[11:00:23] <eddyb> Tobba: it implements the trait for a struct/enum
[11:00:24] *** Quits: mib_pddtnm (Mibbit@810827A8.F34E366.78004705.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[11:00:33] *** Joins: neykov (Mibbit@810827A8.F34E366.78004705.IP)
[11:00:35] <eddyb> Tobba: by doing things with its fields/variants
[11:00:36] <dbaupp> creates trait impls for data types by derefering directly to the contained types
[11:00:53] <Tobba> interesting
[11:00:59] *** Joins: zero_coder (zero_coder@FA1433E0.BF7FE809.73A1137B.IP)
[11:01:03] <zero_coder> hey
[11:01:13] <jamil_1> I was working fine with 0.9
[11:01:16] <dbaupp> you can actually see what it does with `--pretty expanded`
[11:01:17] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[11:01:23] <dbaupp> jamil_1: code?
[11:01:23] *** Quits: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de) (Quit: Leaving.)
[11:01:40] <jamil_1> dbaupp: yes code :)
[11:02:20] <eddyb> jamil_1: ToStr is being removed fwiw. I would suggest updating your rustc and using deriving(Show), since you will have to do that soon anywway
[11:02:27] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[11:02:29] *** Joins: zil (sid23500@moz-31ABA2C0.irccloud.com)
[11:03:27] <dbaupp> jamil_1: as in, I want to see your code
[11:03:43] <jamil_1> dbaupp: oh ok
[11:05:03] *** Joins: marc_ (uid5324@moz-31ABA2C0.irccloud.com)
[11:08:00] *** Joins: lenary (sid5084@moz-31ABA2C0.irccloud.com)
[11:08:16] *** Joins: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net)
[11:08:52] <jamil_1> dbaupp: I commented out some code and error went away. should I post entire code ?
[11:10:13] *** Quits: [squiddy] (squiddy@moz-767EF079.dynamic.cablesurf.de) (Ping timeout)
[11:10:42] *** Joins: lenstr (lenstr@42DC74CE.9636F313.7A27613B.IP)
[11:11:36] <jamil_1> dbaupp: here: http://paste.ubuntu.com/6902606/
[11:12:25] *** Quits: lenstr (lenstr@42DC74CE.9636F313.7A27613B.IP) (Ping timeout)
[11:14:39] *** Quits: zero_coder (zero_coder@FA1433E0.BF7FE809.73A1137B.IP) (Ping timeout)
[11:15:28] *** Joins: sankha93 (uid12218@moz-31ABA2C0.irccloud.com)
[11:15:46] <dbaupp> woah, woah... you're calling a proc twice??
[11:15:59] <dbaupp> where's the error btw?
[11:16:40] *** Quits: Uther (Instantbir@moz-834083A8.hfc.dyn.abo.bbox.fr) (Ping timeout)
[11:17:02] *** Quits: LinearInterpol (RJones@moz-E6F82C3A.maine.res.rr.com) (Ping timeout)
[11:17:20] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[11:17:37] *** Joins: marianoguerra (marianogue@moz-CC582EFD.dip0.t-ipconnect.de)
[11:18:21] *** Joins: whitglint (uid15486@moz-31ABA2C0.irccloud.com)
[11:19:52] *** Quits: skelly (hl@moz-55F978C0.org) (Ping timeout)
[11:20:17] *** Joins: amousset_ (amousset@6181009C.10715965.BCDF592F.IP)
[11:20:49] *** Quits: amousset (amousset@6181009C.10715965.BCDF592F.IP) (Ping timeout)
[11:22:16] <jamil_1> dbaupp: line 10
[11:22:36] <jamil_1> dbaupp: what is wrong with calling a proc twice ?
[11:22:39] <dbaupp> jamil_1: https://github.com/mozilla/rust/issues/12127
[11:22:54] <dbaupp> they're require to be called once
[11:23:08] <dbaupp> and the compiler is being bad for letting that code pass (it's not your fault)
[11:23:12] <dbaupp> *required
[11:23:37] <dbaupp> ah, maybe Result doesn't implement ToStr?
[11:23:47] <jamil_1> dbaupp: no, it does
[11:24:07] <dbaupp> weird
[11:24:16] *** Joins: fabiand (fabiand@moz-98E9487F.fi.muni.cz)
[11:24:23] <dbaupp> what are the two type parameters for `out`?
[11:25:40] <jamil_1> dbaupp: out: Result<~List<i32>, ArrayInputView<u8>>
[11:25:41] *** Joins: SimonSapin (simon@moz-9A1FE870.exyr.org)
[11:27:34] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[11:27:59] <dbaupp> hm, isn't it Result<List<i32>, u8>?
[11:28:19] *** Quits: xiongmao86 (xiongmao86@A11E3BF0.5F152A6A.21B78128.IP) (Client exited)
[11:28:22] *** Joins: cmeiklejohn (sid1900@moz-31ABA2C0.irccloud.com)
[11:28:27] <jamil_1> dbaupp: it should be byteme::ArrayInputView<u8>
[11:29:11] <jamil_1> dbaupp: sorry, it should be u8, I was wrong earlier
[11:29:13] <dbaupp> you're passing an ArrayInputView<u8> to pub fn parse(self, input: ArrayInputView<C>) -> Result<A, C> {, so C == u8
[11:29:14] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Ping timeout)
[11:29:15] <dbaupp> yeah
[11:29:25] <jamil_1> dbaupp: I am parameterizing over the underlying input type C
[11:29:27] <dbaupp> also, I don't see how it is inferring the List?
[11:29:55] <dbaupp> and, btw, functions/closures stored in struct fields can be called by `(self.f)()`
[11:30:43] <jamil_1> dbaupp: see takeWhile 
[11:30:56] <dbaupp> oh, of course, cool
[11:30:56] *** Quits: gwty (gwtypc@864B814A.A2DD6F69.F64220F6.IP) (Ping timeout)
[11:31:12] <dbaupp> with it's broken use of procs :P
[11:31:32] <jamil_1> dbaupp: could it be that I am returning ~List<i32> and not List<i32> that it can't find ToStr ?
[11:31:42] <dbaupp> hm, maybe
[11:31:54] <dbaupp> actually, yeah, what's the exact error message?
[11:32:19] <jamil_1> error: failed to find an implementation of trait std::to_str::ToStr for ~byteme::List<i32>
[11:32:27] <dbaupp> (also, in general ~ is unnecessary (incl. for performance), so it would be more idiomatic to return just List<i32>)
[11:32:31] <dbaupp> sounds like it is the ~
[11:34:06] *** Joins: xiongmao86 (xiongmao86@A11E3BF0.5F152A6A.21B78128.IP)
[11:34:37] <jamil_1> dbaupp: got it compiling :) 
[11:34:43] *** Quits: cdidd (cdidd@moz-7854DDDA.broadband.corbina.ru) (Input/output error)
[11:34:44] *** Joins: twi (Adium@72A412C8.DB53807B.54B829D6.IP)
[11:34:45] <jamil_1> dbaupp: ~ was the issue
[11:35:09] <dbaupp> \o/
[11:35:35] <jamil_1> dbaupp: why can't I call proc twice ?
[11:35:41] * myname giggles at byteme
[11:35:52] <jamil_1> I am getting a seg fault now 
[11:36:01] <dbaupp> jamil_1: it's defined to be only called once
[11:36:19] <dbaupp> and so when you call it, it basically deallocates the memory it used for its environment
[11:36:55] <dbaupp> this issue, you probably need something like `trait Predicate<A> { fn check(&self, input: &A) -> bool; }`
[11:36:59] <dbaupp> *to solve
[11:37:14] <dbaupp> and then pass ~Predicate<A> to takeWhile
[11:37:57] <jamil_1> dbaupp: how would a create value of type ~Predicate<A> ? 
[11:38:10] <jamil_1> *I
[11:38:14] <dbaupp> and then (eurgh :( ) write `struct Pred; impl Predicate<int> for Pred { fn check(&self, x: &int) -> bool { x == 42 } } ....takeWhile(~Pred)...` at the call site
[11:38:24] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[11:38:27] <dbaupp> also, note how I'm taking a reference there
[11:38:32] <dbaupp> it allows you to avoid the clones
[11:38:42] <jamil_1> I see
[11:39:01] <dbaupp> the predicate is checked by `pred.check(&v)` in that scheme
[11:39:09] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[11:39:12] *** Joins: engla (engla@moz-F64E1B0F.cust.bredbandsbolaget.se)
[11:39:35] <dbaupp> in any case, you're using a lot of .clone()s, it's normally good to try to reduce them as much as possible :) (I know it's hard)
[11:40:07] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[11:40:10] <dbaupp> but I'm pretty sure `let result = out.clone(); Success(result, inp)` can just be `Success(out, inp)`
[11:40:37] <dbaupp> And ~Cons(v.clone(), out) can be ~Cons(v, out)
[11:40:54] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[11:41:23] <dbaupp> also, every clone of an ArrayInputView is copying the whole vector (i.e. new allocation and then cloning each element)
[11:42:28] <jamil_1> dbaupp: I need to read on move semantics 
[11:43:38] <dbaupp> and let inp = input.clone(); is definitely unnecessary
[11:43:41] <dbaupp> *mut
[11:43:46] <Tobba> is there any way to do this
[11:43:46] <Tobba> (n.state, owner) = match n.state {
[11:43:53] <Tobba> it complains about an illegal left hand side expression
[11:44:08] <dbaupp> can be either `let mut inp = input;` or `mut input: ...` in the proc type signature
[11:44:23] *** Joins: mgottschlag (quassel@moz-2421585.cust.bluewin.ch)
[11:44:32] <dbaupp> Tobba: only `let (a,b) = ...; n.state = a; owner =b;` unfortunately
[11:45:05] <jamil_1> dbaupp: done
[11:45:25] *** Joins: Ferreus (ferreus@moz-F0A276CE.pools.arcor-ip.net)
[11:45:47] <Tobba> right, there we go
[11:46:48] <dbaupp> jamil_1: btw, re move semantics: http://static.rust-lang.org/doc/master/tutorial.html#implementing-a-linked-list is nice (if you haven't read it already)
[11:50:30] *** Joins: arturo (Thunderbir@moz-E83B14F0.superkabel.de)
[11:50:37] *** Joins: olivernn (olivernigh@moz-7CE0F8.access.mtnbusiness.co.za)
[11:52:09] *** Joins: bjz_ (bjz@B398BE78.F804C29E.D35A31DF.IP)
[11:52:09] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[11:52:22] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[11:53:29] <jamil_1> dbaupp: impl Predicate<int> for Pred { fn check(&self, x: &int) -> bool { x == 42 } } can not close over external variable
[11:54:07] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[11:56:03] *** Joins: cdidd (cdidd@moz-C9FF2D4E.broadband.corbina.ru)
[11:58:59] <jamil_1> bbiab
[12:00:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[12:00:45] *** Quits: jamil_1 (kvirc@FD4948D5.A0E3DE9C.F6DA161.IP) (Ping timeout)
[12:02:30] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[12:04:30] *** Quits: _Vi (vi@D7277DB6.6FF508C1.10C239DF.IP) (Ping timeout)
[12:04:56] *** Joins: lenstr (lenstr@42DC74CE.9636F313.7A27613B.IP)
[12:05:03] *** Quits: agarie (agarie@66BA9D2D.647CFD0A.946930A0.IP) (Ping timeout)
[12:06:40] *** Quits: lenstr (lenstr@42DC74CE.9636F313.7A27613B.IP) (Ping timeout)
[12:11:49] *** Joins: agarie (agarie@66BA9D2D.647CFD0A.946930A0.IP)
[12:13:22] *** Joins: lpy_ (lpy@AEF55484.D19CEE75.952560D4.IP)
[12:13:23] *** Quits: lpy (lpy@DE46E67C.1B5A1487.7CEBAF5A.IP) (Ping timeout)
[12:13:25] *** Joins: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net)
[12:14:11] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[12:15:23] *** Joins: _Vi (vi@D7277DB6.6FF508C1.10C239DF.IP)
[12:16:56] *** Joins: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP)
[12:17:35] *** Quits: fabiand (fabiand@moz-98E9487F.fi.muni.cz) (Ping timeout)
[12:18:44] *** Quits: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[12:19:49] *** Joins: amousset__ (amousset@6181009C.10715965.BCDF592F.IP)
[12:20:19] *** Quits: amousset_ (amousset@6181009C.10715965.BCDF592F.IP) (Ping timeout)
[12:21:09] <Tobba> dont we all love when your allocators end up infinitely looping
[12:21:24] <dbaupp> infinite memory \o/
[12:21:45] <Tobba> I dont even know whats happening
[12:21:58] <Tobba> the allocator I assume is dying in a fire is *really* bad and I should replace it with a proper buddy anyways
[12:21:59] <dbaupp> I think it might be infinite looping
[12:22:12] * dbaupp is helpful
[12:22:23] <Ms2ger> That must be the first time
[12:22:24] * Ms2ger ducks
[12:22:43] <Tobba> the problem I had with buddy allocators was the algorithm for coalescencing blocks
[12:24:44] *** Joins: Earnestly (earnest@811A97A3.CF19AA69.5411983D.IP)
[12:25:33] *** Joins: refold (gman@moz-42D68426.a258.priv.bahnhof.se)
[12:25:53] <dbaupp> Ms2ger: geese?
[12:28:24] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[12:29:02] <Tobba> I'll sort the crap out when I get back home I guess
[12:30:07] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Ping timeout)
[12:30:55] *** Quits: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com) (Ping timeout)
[12:36:22] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[12:36:35] *** Quits: xiongmao86 (xiongmao86@A11E3BF0.5F152A6A.21B78128.IP) (Quit: )
[12:39:04] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[12:39:36] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[12:39:54] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[12:40:51] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[12:41:21] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[12:45:32] *** Quits: neykov (Mibbit@810827A8.F34E366.78004705.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[12:45:35] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[12:45:54] *** darnuria|ZzZ is now known as darnuria
[12:45:56] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[12:47:57] *** Quits: marianoguerra (marianogue@moz-CC582EFD.dip0.t-ipconnect.de) (Ping timeout)
[12:49:19] *** Quits: sigma1 (sigma@C91C7F36.70518F41.9D18269F.IP) (Ping timeout)
[12:53:22] *** Quits: sk (sk@61A494B3.BA40E8A.AAC02D62.IP) (Input/output error)
[12:53:45] *** Quits: amousset__ (amousset@6181009C.10715965.BCDF592F.IP) (Ping timeout)
[12:54:48] *** Joins: dwrensha (chatzilla@moz-B23D2FF6.pitbpa.east.verizon.net)
[12:55:01] *** Joins: amousset__ (amousset@6181009C.10715965.BCDF592F.IP)
[12:59:01] *** Joins: lenstr (lenstr@42DC74CE.9636F313.7A27613B.IP)
[13:00:49] *** Quits: lenstr (lenstr@42DC74CE.9636F313.7A27613B.IP) (Ping timeout)
[13:04:41] *** Quits: olivernn (olivernigh@moz-7CE0F8.access.mtnbusiness.co.za) (Ping timeout)
[13:08:06] *** Joins: zero_coder (zero_coder@FA1433E0.BF7FE809.73A1137B.IP)
[13:08:46] *** Quits: amousset__ (amousset@6181009C.10715965.BCDF592F.IP) (Ping timeout)
[13:09:17] *** Quits: zero_coder (zero_coder@FA1433E0.BF7FE809.73A1137B.IP) (Quit: Leaving)
[13:13:39] *** Joins: jamil_1 (kvirc@6F6794DD.18E10CE.F6DA161.IP)
[13:14:49] <dbaupp> jamil_1: you have to manually capture the variables in the struct, e.g. `struct Pred { outer: int } impl Predicate<int> { fn check(&self, x: &int) -> bool { self.outer == x } }`, passed like `~Pred { outer: 42 }`
[13:15:49] <jamil_1> what about trait Predicate<A> { fn check(self, lhs: &A, rhs: &A) -> bool;} ?
[13:17:19] *** Joins: amousset__ (amousset@6181009C.10715965.BCDF592F.IP)
[13:19:24] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[13:19:32] *** Joins: amousset (amousset@6181009C.10715965.BCDF592F.IP)
[13:19:51] <dbaupp> then it's not a closure...
[13:20:01] *** Quits: amousset__ (amousset@6181009C.10715965.BCDF592F.IP) (Ping timeout)
[13:20:03] <dbaupp> the struct + trait is basically a manual closure
[13:22:05] *** Quits: kvanb (kvanb@moz-DA06562E.lnse2.win.bigpond.net.au) (Quit: kvanb)
[13:22:35] *** Quits: _Vi (vi@D7277DB6.6FF508C1.10C239DF.IP) (Ping timeout)
[13:22:52] *** Quits: Blub\0 (wry@620605B3.71150E1A.237AE2BA.IP) (Ping timeout)
[13:23:20] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Connection reset by peer)
[13:25:15] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[13:25:16] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[13:28:01] *** Joins: a_m0d (a_m0d@moz-2F294D00.acanac.net)
[13:28:17] *** Quits: mgottschlag (quassel@moz-2421585.cust.bluewin.ch) (Ping timeout)
[13:29:04] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[13:29:27] <jamil_1> what about trait Predicate<A> { fn check(self, lhs: &A, rhs: &A) -> bool;} ?
[13:29:37] <jamil_1> sorry wrong window
[13:30:50] *** Quits: a_m0d (a_m0d@moz-2F294D00.acanac.net) (Quit: Leaving.)
[13:30:54] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Ping timeout)
[13:33:01] <jamil_1> dbaupp: I am getting Predicate<A>:Send` does not implement any method in scope named `check`
[13:33:08] *** Joins: jadbaires (jadrian@3A6C765D.27626547.6119BA41.IP)
[13:34:47] <jamil_1> dbaupp: slightly modified: http://paste.ubuntu.com/6903235/
[13:34:57] <jadbaires> is there a way to, given an owned pointer to a vector, slice it in two so I can work with each slice in a different task safely?
[13:35:34] <jadbaires> imagine implementing e.g., a concurrent (in place) quicksort 
[13:35:35] *** Joins: Blub\w (wry@620605B3.71150E1A.237AE2BA.IP)
[13:36:01] <jadbaires> where one would want to modify each partition individualy in a task
[13:36:15] <jamil_1> dbaupp: line 10, 30-40 and 254, 261
[13:36:51] *** Joins: Zylinski (karl@moz-E08C6219.tbcn.telia.com)
[13:37:04] <Ms2ger> jadbaires, there's something that splits into two &mut [T]s...
[13:37:11] <Ms2ger> I never remember the name, though
[13:38:03] <jadbaires> I was looking for it in std::vec but couldn't find it
[13:39:49] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[13:39:51] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[13:39:54] <jadbaires> Ms2ger:     fn partition(self, f: |&T| -> bool) -> (~[T], ~[T]);   ??
[13:40:08] <jadbaires> wait no
[13:40:09] <jadbaires> :/
[13:40:11] <Ms2ger> No, that's something else
[13:40:54] <jadbaires> yeah, got overly excited when I saw the name and return type
[13:41:32] *** Joins: mgottschlag (quassel@moz-2421585.cust.bluewin.ch)
[13:41:36] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[13:41:36] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[13:41:44] <jadbaires> got it I think 
[13:41:51] <jadbaires>     fn mut_split_at(self, mid: uint) -> (&'a mut [T], &'a mut [T]);
[13:42:46] <Ms2ger> Yep!
[13:43:46] <jadbaires> this is exactly what I want, but I'm curious, why is there no split_at for immutable vectors?
[13:44:02] <jadbaires> I was looking here http://static.rust-lang.org/doc/master/std/vec/trait.ImmutableVector.html and cannot find the correspondent one 
[13:44:04] <Ms2ger> No real need
[13:44:39] <Ms2ger> You can have overlapping immutable slices, but not mutable ones
[13:44:47] <jadbaires> Ms2ger: why not though? e.g. I could want to make sure I'd be reading just from one partition without going out of its bounds
[13:45:11] <jadbaires> Ms2ger: oh right, so you'd just create 2 slices
[13:45:13] <jadbaires> Ms2ger: is that it?
[13:45:15] <Ms2ger> Yeah
[13:45:18] <jadbaires> got it
[13:45:23] <jadbaires> cool
[13:45:24] <darnuria> Hey rustacean! There is any doc for writing bindings?
[13:45:34] * Ms2ger wanders off again
[13:45:48] <jadbaires> Ms2ger: bye and thanks
[13:47:49] *** Joins: alkino_ (alkino@moz-2677AA92.w90-46.abo.wanadoo.fr)
[13:47:53] <alkino_> suis je bête :p
[13:48:10] *** Joins: olivernn (olivernigh@moz-7CE0F8.access.mtnbusiness.co.za)
[13:48:54] *** Joins: tryzor (bzlandfill@moz-9E85F7F7.dip0.t-ipconnect.de)
[13:49:28] *** Quits: twi (Adium@72A412C8.DB53807B.54B829D6.IP) (Quit: Leaving.)
[13:50:58] *** Joins: moostik (Thunderbir@6181009C.10715965.BCDF592F.IP)
[13:51:12] *** Parts: moostik (Thunderbir@6181009C.10715965.BCDF592F.IP) ()
[13:53:09] *** Joins: lenstr (lenstr@42DC74CE.9636F313.7A27613B.IP)
[13:53:30] *** Joins: [squiddy] (squiddy@moz-767EF079.dynamic.cablesurf.de)
[13:53:51] *** Joins: moostik (Thunderbir@6181009C.10715965.BCDF592F.IP)
[13:54:58] *** Quits: bjz_ (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[13:55:03] *** Quits: lenstr (lenstr@42DC74CE.9636F313.7A27613B.IP) (Ping timeout)
[13:55:28] *** Quits: moostik (Thunderbir@6181009C.10715965.BCDF592F.IP) (Client exited)
[13:55:48] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[13:55:53] *** Joins: moostik (Thunderbir@6181009C.10715965.BCDF592F.IP)
[13:55:59] <dwrensha> If I have a task that's looping on reading from a TcpStream, is there a good way to shut it down?
[14:00:08] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[14:01:00] <Yurume> the task needs to be awaken periodically and look for the kill signal (Arc, simple Port/Chan etc.).
[14:01:24] <dwrensha> how can I awaken it if it's blocking on reading?
[14:02:20] <Yurume> you should not block on reading, or select over all possible ports including a port used to receive the kill signal.
[14:02:25] <Yurume> you may select*
[14:02:31] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[14:03:07] <dwrensha> How do I not block on reading?
[14:03:29] *** Joins: rally (rally@moz-6B94DC74.cable.virginm.net)
[14:03:32] *** Joins: jdm (jdm@6CB59DBB.66A3EF3D.A26A30FD.IP)
[14:03:32] *** ChanServ sets mode: +o jdm
[14:05:04] *** Joins: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP)
[14:06:11] *** Joins: canhtak (canhtak@moz-8DFB5E6A.wl.t.ulaval.ca)
[14:06:13] <dwrensha> I don't think non-task-blocking reading is actually what I want. I think it's nice to have a task whose only job is to read and forward its results to a Chan.
[14:06:24] <dwrensha> Problem is, I can never kill that task.
[14:06:52] *** Quits: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[14:06:55] *** kimundi is now known as zz_kimundi
[14:07:25] <rally> Hey #rust, I need help with this error message: error: mismatched types: expected `~str` but found `~[char]` (expected ~str but found vector
[14:07:37] <rally> I don't understand it because I thought that strings were vectors of chars
[14:07:49] <dwrensha> std::str::from_chars()
[14:08:14] <rally> My client turned :s into a smiley. How come they're two different types?
[14:08:43] <rally> That works, thanks!
[14:09:09] <Yurume> dwrensha, whoops, yeah, Stream and Port is different, so the current Select (which is for Ports) wouldn't work for Stream. gotcha...
[14:11:12] <FreeFull> rally: Strings have their own separate type probably because there are operations that only make sense on strings
[14:11:19] <FreeFull> Also, a vector of chars will take up more space
[14:12:02] <FreeFull> I think str uses UTF-16 internally, while each char is 4 bytes, so on average a vector of chars would be about twice as big
[14:12:15] <eddyb> ewww, no
[14:12:22] <eddyb> str uses utf8
[14:12:37] <eddyb> forward iterators > random access
[14:12:39] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[14:13:21] <rally> Oh, right
[14:13:35] <FreeFull> Then on average a vector of chars would be about four times as big, assuming you're mostly storing stuff representable by ASCII
[14:13:52] <rally> Right now I'm building up a vector of chars with push and then converting it into a string
[14:14:05] <eddyb> rally: you can push a char to ~str
[14:14:18] <eddyb> or collect an iterator producing chars to a ~str
[14:14:20] <rally> Yeah it's mostly the first 128 characters, but I'm not exactly too worried about efficiency when I'm still learning
[14:14:36] <eddyb> ~[char] should be linted against IMO
[14:14:49] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[14:14:51] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[14:15:06] <rally> rustc isn't saying anything about it
[14:15:18] <Yurume> eddyb, I don't think so, if you *do* need to access the individual codepoints randomly it is the best way to do it.
[14:16:41] *** Quits: moostik (Thunderbir@6181009C.10715965.BCDF592F.IP) (Quit: moostik)
[14:16:45] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[14:16:49] <rally> What was that about pushing chars onto a str? I get told that ~str doesn't implement a push.
[14:17:54] <Yurume> rally, it does implement `push_char`.
[14:18:06] <Yurume> rusti: let mut x = ~"the answer is "; x.push_char('4'); x.push_char('2'); x
[14:18:13] <rally> Ah, I used the wrong method then!
[14:18:25] <rally> I did read the docs, I swear
[14:18:29] <Yurume> oh rusti is dead! :X
[14:18:32] <rally> :(
[14:18:34] *** darnuria is now known as darnuria|afk
[14:18:42] <FreeFull> rally: http://static.rust-lang.org/doc/master/std/str/trait.OwnedStr.html#tymethod.push_char
[14:19:17] <Yurume> rally, you don't need to apologize, the current doc is quite confusing for built-in types.
[14:19:39] <Yurume> if you want to learn about &str and ~str, see StrSlice and OwnedStr respectively.
[14:19:50] <Yurume> in the module std::str*
[14:20:09] *** Joins: amousset_ (amousset@6181009C.10715965.BCDF592F.IP)
[14:20:32] <Yurume> and vectors are... much more confusing. for now you can see all traits in std::vec and also std::container::Container trait for all methods available to the vector.
[14:20:36] *** Quits: amousset (amousset@6181009C.10715965.BCDF592F.IP) (Ping timeout)
[14:21:36] <rally> Oh, right. They're traits, then? I was looking for a str class that had everything explained in it
[14:22:28] <dwrensha> there's no such thing as a "class", per se, in Rust
[14:22:35] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[14:22:41] <FreeFull> You can use traits to add your own methods to a type
[14:22:42] <dwrensha> traits can be considered typeclasses
[14:23:00] <rally> I work with OO-style classes all day long so that's what I'm used to thinking in
[14:26:46] *** Joins: Hildar (Mibbit@moz-7F4621B6.cable.virginm.net)
[14:26:47] *** Quits: mgottschlag (quassel@moz-2421585.cust.bluewin.ch) (Ping timeout)
[14:29:14] *** zz_kimundi is now known as kimundi
[14:29:51] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[14:31:12] <jadbaires> so, in functions arguments one may write this:     v : &mut[T]
[14:31:22] <jadbaires> it's a borrowed pointer to a mutable vector
[14:31:35] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Ping timeout)
[14:31:56] <jadbaires> but when declaring an owned pointer to a mutable vector we have:  let mut v : ~[uint] 
[14:32:09] *** Quits: [squiddy] (squiddy@moz-767EF079.dynamic.cablesurf.de) (Ping timeout)
[14:32:17] <jadbaires> why isn't the latter  let v : ~mut[uint]    ?
[14:32:27] <jadbaires> wouldn't it be more consistent with the above?
[14:32:44] <jadbaires> or why isn't the above:    mut v: &[T]
[14:33:26] <dwrensha> you can also `let mut v : &mut [T] = ...;`
[14:34:07] <jadbaires> dwrensha: oh I see you'd need to put the mut in both the lhs and rhs
[14:34:11] <dwrensha> if you just do `let v : &mut [T] = ...;`, then *v is mutable, but v is not
[14:34:39] <jadbaires> right 
[14:35:15] *** Quits: barosl (barosl@34F62860.E551553C.7544CABF.IP) (Quit: 랜덤은 쇠퇴했습니다.)
[14:35:26] *** Quits: nyuszika7h (nyuszika7h@moz-423AFF1D.net) (Input/output error)
[14:35:32] <jadbaires> dwrensha: so same in an argument function? i.e.   can we have  v:&mut[T] and  mut v : &mut[T]  abd mut v: &[T] ?
[14:35:34] *** Joins: nyuszika7h (nyuszika7h@moz-423AFF1D.net)
[14:35:55] <dwrensha> yeah
[14:35:59] <jadbaires> I see
[14:37:34] <jadbaires> dwrensha: but why `let v : &mut [T] `   and not  `let v : ~mut [T]`   ?
[14:39:00] <Hildar> Hmm, TcpStream.read(&mut [u8]) keeps giving me Err("No buffer space avalible"). Is there something I am doing wrong? http://pastebin.com/PAKUNy2u ((Yes, I am aware this will fail if I don't receive a whole utf8 string, but I'm not getting to that point)
[14:39:40] <jadbaires> from reading about ownership my understanding was that & was used mostly for borrowing owned pointers, if I'm declaring a new vector I'd expect it to have a pointer that owns it
[14:39:51] *** Quits: wycats (sid79@moz-5F4AA75A.irccloud.com) (Ping timeout)
[14:39:51] *** Quits: etrepum (sid763@moz-5F4AA75A.irccloud.com) (Ping timeout)
[14:39:51] *** Quits: wilfred (sid159@moz-5F4AA75A.irccloud.com) (Ping timeout)
[14:39:51] *** Quits: mhenretty (sid11899@moz-5F4AA75A.irccloud.com) (Ping timeout)
[14:40:01] *** Joins: leunggamciu (Mibbit@C2E0B3B1.43F86E82.2862F179.IP)
[14:40:04] <dwrensha> you do own it
[14:40:09] <jadbaires> and therefore declare it as  `let v: ~mut[T] = ...`
[14:40:12] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[14:40:35] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[14:40:56] <dwrensha> the mutability is not a property of the type, its a property of the variable
[14:41:22] *** Quits: andreypopp (uid22726@moz-5F4AA75A.irccloud.com) (Ping timeout)
[14:41:28] *** flaper87 is now known as flaper87|afk
[14:41:35] *** Quits: sawrubh (uid6719@moz-5F4AA75A.irccloud.com) (Ping timeout)
[14:41:35] *** Quits: lexs (uid12437@moz-5F4AA75A.irccloud.com) (Ping timeout)
[14:41:35] *** Quits: drueck (uid25037@moz-5F4AA75A.irccloud.com) (Ping timeout)
[14:41:48] *** flaper87|afk is now known as flaper87
[14:42:00] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[14:42:14] <jadbaires> dwrensha: yes but now my focus is on the & versus ~ not so much the mut annotation
[14:42:18] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[14:42:35] *** Joins: Lalla (Lalla@moz-C98EC73D.net-89-3-149.rev.numericable.fr)
[14:42:37] <jadbaires> i.e. `let v : &mut [T] `   versus `let v : ~mut [T]`  
[14:45:20] <jadbaires> better just go back and read everything again
[14:45:57] <kimundi> jadbaires: &, &mut and ~ are three different things, there is no ~mut
[14:46:52] <dwrensha> when you borrow a reference, it's important to know whether it's a mutable borrow or an immutable borrow, so mutability is part of the type in that case
[14:46:57] <kimundi> That is, the immutabel reference & and the mutable reference &mut are different types, with "mut" not being a modifier but just part of the name
[14:47:18] *** Joins: lenstr (lenstr@42DC74CE.9636F313.7A27613B.IP)
[14:49:02] *** Quits: lenstr (lenstr@42DC74CE.9636F313.7A27613B.IP) (Ping timeout)
[14:49:11] <dwrensha> if you own something, you can always mutate it
[14:49:51] <dwrensha> ... perhaps after moving it to a `mut` variable
[14:50:08] *** Joins: neykov (Mibbit@810827A8.F34E366.78004705.IP)
[14:50:22] *** Quits: neykov (Mibbit@810827A8.F34E366.78004705.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:50:40] <dwrensha> So there's no such thing as an immutable owned vector.
[14:54:34] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[14:55:02] *** Joins: wrl (lol@moz-9EEB87FF.don.gs)
[14:55:57] <wrl> hey, i'm interested in using rust to create plugins (loadable shlibs) for use in other programs. what's the status of something like that?
[14:56:11] *** Quits: olivernn (olivernigh@moz-7CE0F8.access.mtnbusiness.co.za) (Ping timeout)
[14:57:17] *** Joins: fabiand (fabiand@moz-35FDE3BA.hotelavanti.cz)
[15:00:09] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[15:01:38] *** Joins: Erik_ (Erik_S@moz-D2F74C7B.hlrn.qwest.net)
[15:02:08] *** Joins: marianoguerra (marianogue@moz-99B0A161.dip0.t-ipconnect.de)
[15:02:12] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[15:02:33] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[15:02:50] *** Quits: heftig (heftig@moz-DEF177E0.dip0.t-ipconnect.de) (Quit: Quitting)
[15:03:25] *** Joins: abinader (sid21713@moz-A42E5B7B.irccloud.com)
[15:04:10] <kimundi> wrl: Afaik you can write a Rust library exposing a C interface, and just use it for these things.
[15:04:19] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[15:05:26] <wrl> kimundi: yeah, that's roughly what i want to do. what's the status on linking that into a .so, though?
[15:05:37] <Ms2ger> I think it's possible
[15:05:42] <Ms2ger> Don't ask me how
[15:05:50] <wrl> does rust still need its runtime, or what's the status with zero.rs, #[no_std], etc
[15:05:53] *** Quits: marianoguerra (marianogue@moz-99B0A161.dip0.t-ipconnect.de) (Ping timeout)
[15:05:53] *** Quits: apoelstra (username@moz-BBEB5B9E.sw.biz.rr.com) (Ping timeout)
[15:06:16] *** Joins: kellogh (timkellogg@moz-704A74D.hsd1.co.comcast.net)
[15:06:24] *** Joins: FrozenCow (FrozenCow@moz-E69F48E.dynamic.upc.nl)
[15:07:23] <kellogh> hey, what do I use to convert Option<Option<T>> into Option<T>? In Scala I use .flatten, is there something like that in Rust?
[15:07:34] *** Quits: ab (alex@BC9D99CC.37C1012D.FE617B51.IP) (Ping timeout)
[15:08:19] *** Joins: apoelstra (username@moz-BBEB5B9E.sw.biz.rr.com)
[15:08:26] <Ms2ger> Monads!
[15:08:50] <kellogh> k... more specific?
[15:09:57] <Ms2ger> I don't see anything built-in on first sight
[15:10:05] <engla> it should be .and_then(|x| x)
[15:10:25] *** Joins: gonkun (Mibbit@moz-1C68F6E0.hsd1.va.comcast.net)
[15:10:28] <kellogh> engla: yah that's what I'm thinking
[15:10:32] <kellogh> okay
[15:10:35] <kellogh> thanks
[15:11:01] <Ms2ger> Unless you can avoid getting Option<Option<T>> by using and_then in the first place
[15:11:17] <kellogh> yeah
[15:12:56] <kellogh> engla: yeah, I just changed from using map to and_then, works like a charm
[15:14:16] *** Quits: mceier (mceier@moz-C1591437.dynamic.chello.pl) (Quit: leaving)
[15:14:57] <gonkun> question for y'all: so basically im using a port and channel to send a string over. i then receive it and create a new process using the string, since it is a path to a program. for example, when i hardcode the program into the process::new function, it works fine, but when i use the received string, it gives me an io error: task '<main>' failed at 'Unhandled
[15:15:04] <gonkun> Any idea why this might be?
[15:15:14] *** Joins: heftig (heftig@moz-DEF177E0.dip0.t-ipconnect.de)
[15:15:37] <gonkun> I even print out the received string right before passing it to the function to check if its correct and it is!
[15:19:07] *** Joins: sigma1 (sigma@moz-B2E77065.range86-184.btcentralplus.com)
[15:19:32] *** Joins: _Vi (vi@D7277DB6.6FF508C1.10C239DF.IP)
[15:19:47] *** Joins: amousset__ (amousset@6181009C.10715965.BCDF592F.IP)
[15:20:21] *** Quits: amousset_ (amousset@6181009C.10715965.BCDF592F.IP) (Ping timeout)
[15:21:35] <Hildar> Can you post code gonkun?
[15:21:49] <gonkun> sure
[15:22:17] *** Quits: Earnestly (earnest@811A97A3.CF19AA69.5411983D.IP) (Quit: WeeChat 0.4.3-rc2)
[15:22:22] *** Joins: Earnestly (earnest@811A97A3.CF19AA69.5411983D.IP)
[15:23:12] <gonkun> hildar: http://pastebin.com/zLneWUie
[15:23:17] <gonkun> its just a snippet
[15:24:10] <Hildar> gonkun: You seem to be running a program named "leftProgram", is that correct?
[15:24:20] <Hildar> Not whatever is in the string "leftProgram"
[15:24:53] *** Joins: marianoguerra (marianogue@moz-99B0A161.dip0.t-ipconnect.de)
[15:25:00] <gonkun> hildar, sorry i meant to take out the quotes
[15:25:06] <gonkun> ignore the quotes
[15:25:19] *** Joins: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[15:25:22] <gonkun> i typed those by mistake when i was editing the pastebin
[15:25:37] <gonkun> sorry for the confusion
[15:26:08] <gonkun> it should be leftProgram, without the quotes
[15:27:10] <gonkun> so back to the original issue, when i hardcode something like "ls", it works fine, but when i use leftProgram, it throws an io error, even though when i print leftprogram, it evals to "ls"
[15:27:16] *** Joins: kvark (Mibbit@moz-F30E0473.cpe.net.cable.rogers.com)
[15:27:32] <kvark> acrichto: ping
[15:27:54] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[15:28:25] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[15:28:35] <dwrensha> gonkun: what if leftprogram == "/bin/ls"
[15:28:43] <dwrensha> or whatever the full path to ls is?
[15:29:23] *** Quits: jdm (jdm@6CB59DBB.66A3EF3D.A26A30FD.IP) (Quit: Lost terminal)
[15:30:07] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[15:30:07] *** Joins: mceier (mceier@moz-C1591437.dynamic.chello.pl)
[15:30:12] <gonkun> dwrensha: same error
[15:30:41] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[15:31:36] <Hildar> No funny business with unsafety I hope gonkun? :)
[15:31:59] <gonkun> i hope so too. should i be surrounding it with unsafe {}?
[15:32:25] <Hildar> gonkun : No, just checking you weren't doing anything weird.
[15:32:26] *** Joins: sebi (Adium@moz-4119467.vie.surfer.at)
[15:32:31] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Ping timeout)
[15:32:46] <gonkun> hildar: i  dont think im doing anything weird. cant be sure though lol.
[15:32:46] <mitsuhiko> the utf8 changes were necessary but boy are they painful to migrate :(
[15:33:03] *** Quits: leunggamciu (Mibbit@C2E0B3B1.43F86E82.2862F179.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[15:33:03] *** Quits: rally (rally@moz-6B94DC74.cable.virginm.net) (Quit: bye)
[15:33:25] *** Joins: sawrubh (uid6719@moz-5F4AA75A.irccloud.com)
[15:33:51] *** Joins: etrepum (sid763@moz-5F4AA75A.irccloud.com)
[15:33:55] *** Joins: wilfred (sid159@moz-5F4AA75A.irccloud.com)
[15:33:56] *** Joins: wycats (sid79@moz-5F4AA75A.irccloud.com)
[15:34:06] *** Joins: mhenretty (sid11899@moz-5F4AA75A.irccloud.com)
[15:34:23] *** Quits: tryzor (bzlandfill@moz-9E85F7F7.dip0.t-ipconnect.de) (Quit: CGI:IRC (Ping timeout))
[15:34:32] *** Joins: copumpkin (copumpkin@moz-FC353116.dyn.optonline.net)
[15:35:42] *** Joins: skelly (hl@moz-55F978C0.org)
[15:37:22] <Hildar> gonkun: What version of rust are you using?
[15:37:28] <gonkun> .9
[15:38:30] *** Joins: andreypopp (uid22726@moz-5F4AA75A.irccloud.com)
[15:38:32] *** Joins: lexs (uid12437@moz-5F4AA75A.irccloud.com)
[15:38:35] *** Joins: drueck (uid25037@moz-5F4AA75A.irccloud.com)
[15:38:43] <Hildar> Might be worth seeing if it still happens on master? I can't seem to generate the same error on my machine. :(
[15:39:07] <gonkun> hildar: i dont think it will since the server that will eventually compile my code is running .9
[15:40:33] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[15:41:20] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[15:41:47] *** Joins: lenstr (lenstr@42DC74CE.9636F313.7A27613B.IP)
[15:42:16] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[15:42:29] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[15:42:30] *** Quits: gonkun (Mibbit@moz-1C68F6E0.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[15:43:09] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[15:43:24] <mitsuhiko> is fn foo(~self) supposed to work on values?
[15:43:32] *** Quits: lenstr (lenstr@42DC74CE.9636F313.7A27613B.IP) (Ping timeout)
[15:43:40] <mitsuhiko> whenever i define a method like this it does not seem to be found
[15:43:41] *** Quits: fabiand (fabiand@moz-35FDE3BA.hotelavanti.cz) (Quit: Verlassend)
[15:44:14] <kimundi> mitsuhiko: might be that it only works on actual ~ ptrs
[15:44:21] <engla> why do you define it like that?
[15:44:41] <mitsuhiko> I have something like an option type and i want to move the contained value out
[15:44:53] *** Joins: raze (raze@moz-EAF6E9D.members.linode.com)
[15:45:05] <mitsuhiko> i guess i should use fn foo(self)
[15:45:26] <kimundi> if you can get away with it, that would be better
[15:46:12] *** Quits: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net) (Input/output error)
[15:47:19] <SiegeLord> Huh, the fmt method changed... I wonder why
[15:47:36] <Hildar> gonkun: Can you run this program and see if it fails? http://pastebin.com/ihsBGp9V I just made a task, sent it ~ls and spawned a process from it (successfully).
[15:48:16] <Hildar> Oh he quit... bah
[15:48:22] *** Parts: agallego (agallego@moz-6B897026.nyc.res.rr.com) ()
[15:48:31] *** Joins: agallego (agallego@moz-6B897026.nyc.res.rr.com)
[15:48:41] *** Joins: gonkun (Mibbit@moz-1C68F6E0.hsd1.va.comcast.net)
[15:49:06] <SiegeLord> Oh, it was for #[deriving(Show)]...
[15:50:54] <quux00> Hildar: I just tried that code (for gonkun) and it doesn't compile with v0.9
[15:51:04] *** Joins: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net)
[15:51:18] <Hildar> quux00: Oh dang, of course it doesn't, 0.9 still uses Option not IOResult doesn;t it.
[15:51:21] *** Quits: mceier (mceier@moz-C1591437.dynamic.chello.pl) (Ping timeout)
[15:51:32] <quux00> Yep.
[15:52:05] <Hildar> Well, it's moot unless he returns >.>
[15:52:35] *** Quits: Earnestly (earnest@811A97A3.CF19AA69.5411983D.IP) (Ping timeout)
[15:52:54] *** Joins: Earnestly (earnest@119EDA00.66A37A5.BFD1ABFD.IP)
[15:53:14] *** Joins: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP)
[15:54:55] *** Quits: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[15:55:05] <Hildar> Back to my own problems: http://pastebin.com/UgmphweF I want to check over a ~[Option<Connection>], and if I find a Connection with a matching id field, set it to None. How can I appease the God of Borrow Checking here? :)
[15:55:20] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[15:55:42] *** Joins: mceier (mceier@moz-C1591437.dynamic.chello.pl)
[15:56:17] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[15:56:36] *** Joins: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca)
[15:57:08] <apoelstra> Hildar: what is connection.id? you may have to clone it
[15:57:24] <Ms2ger> Try if it works with let replace = match *x { Some(ref connection) if connection.id == id => true, _ => false }; if replace { *x = None }
[15:57:27] <apoelstra> wait nvm mind i misread your code
[15:58:06] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[15:58:55] <apoelstra> can you use an if statement? if x.is_some() && x.unwrap().id == connection.id { *x = None; }
[15:59:19] <eddyb> apoelstra: you can use map_or like that
[15:59:26] <Hildar> Ms2ger: Your way worked, thank you!
[15:59:28] <apoelstra> eddyb: oh, thanks :)
[15:59:58] <eddyb> if x.as_ref().map_or(false, |&c| c.id == connection.id) { *x = None; }
[16:00:05] *** Quits: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca) (Ping timeout)
[16:00:11] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[16:00:11] *** Joins: mib_b8mh7w (Mibbit@moz-8D947B6D.hsd1.va.comcast.net)
[16:00:46] *** Joins: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca)
[16:00:46] *** Quits: mceier (mceier@moz-C1591437.dynamic.chello.pl) (Quit: leaving)
[16:01:10] <Ms2ger> And there's eddyb with the clever way :)
[16:01:42] <Hildar> eddyb: *swoosh* Straight over my head. :D Thanks though.
[16:02:07] <Hildar> eddyb: *swoosh* Straight over my head. :D Thanks though.
[16:02:24] <Hildar> Urgh, stupid alt-tab and muscle memory. Sorry.
[16:02:37] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[16:02:52] <apoelstra> Hildar: if you haven't seen map functions before you should definitely check them out. but it's probably not good to learn by using them on Options, imho they have a different flavor in this context
[16:03:09] <apoelstra> but you can do really cool things with map, filter, foldl, etc
[16:03:33] <gonkun> hildar: im back
[16:03:58] <gonkun> sorry for leaving
[16:05:02] *** Joins: LinearInterpol (RJones@moz-E6F82C3A.maine.res.rr.com)
[16:05:08] <gonkun> hildar: so if .9 uses option, do i need yo unwrap?
[16:05:10] <Hildar> apoelstra = I've dabbled in haskell before, stupidly good tool when you work out when to use them.
[16:05:44] <Hildar> gonkun: Change the Ok/Err match to Some/None I would imagine. I don't have a copy of 0.9 lying around.
[16:05:59] <apoelstra> Hildar: oh, cool :). in that case, learn to use those functions on Options -- they are great shortcuts for the if x.is_some() && ... {} constructs
[16:06:49] <Hildar> apoelstra: I'll put that on my "todo:" list when I come back and refactor. I have a lot of pattern matches on Some/None where I do nothing in the None case >.>
[16:07:31] <apoelstra> yep. plain old map() covers that, runs its function on Some(x) and does nothing on None
[16:08:17] *** Quits: kellogh (timkellogg@moz-704A74D.hsd1.co.comcast.net) (Quit: kellogh)
[16:09:10] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[16:10:29] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[16:12:22] *** Quits: gonkun (Mibbit@moz-1C68F6E0.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[16:13:27] *** Quits: dwrensha (chatzilla@moz-B23D2FF6.pitbpa.east.verizon.net) (Ping timeout)
[16:14:16] <Hildar> So: for x in connections.mut_iter() {if x.as_ref().map_or(false, |c| c.id == id) {*x = None}}
[16:14:39] <doomlord_> is there a JSON reader in libextra .. and if so, is it relaxed to read unquoted tags
[16:14:45] <Hildar> I don't think |&c| is right, Our lord of borrow checking gives me a telling off.
[16:15:24] <apoelstra> doomlord_: there is indeed. and idk, you'd have to try it
[16:15:42] <eddyb> Hildar: oh, right, sorry
[16:15:49] <doomlord_> i know purists dont like it but its nice to have, IMO
[16:16:00] <Hildar> eddyb: Hey, don't be sorry, I learned something awesome :)
[16:16:22] <mitsuhiko> is there a guide how to build rust projects with make?
[16:16:55] <apoelstra> mitsuhiko: i just call rustc directly
[16:17:00] <apoelstra> all: $(SOURCES)
[16:17:04] <apoelstra>   rustc myproject.rs
[16:17:19] <mitsuhiko> is there a way to make rustc spit out the sources?
[16:17:22] <mitsuhiko> similar to makedep
[16:17:26] <eddyb> -D I think
[16:18:27] <apoelstra> -D is lint denied
[16:18:33] <eddyb> riight
[16:18:46] <Yurume> --dep-info foo.d
[16:19:06] <SiegeLord> mitsuhiko: http://metajack.im/2013/12/19/building-rust-code--using-make-part-2/
[16:19:21] *** Joins: amousset (amousset@6181009C.10715965.BCDF592F.IP)
[16:19:38] <SiegeLord> Don't use make though... use CMake 8)
[16:19:56] <mitsuhiko> i was thinking of adding rust support to premake
[16:20:10] <mitsuhiko> but for the time being make should do the trick
[16:20:21] <mitsuhiko> in theory rust does enough itself anyways
[16:20:40] *** Quits: amousset__ (amousset@6181009C.10715965.BCDF592F.IP) (Ping timeout)
[16:21:10] <SiegeLord> I don't think it does any more than gcc >.>
[16:21:28] <Hildar> So how do I use the magic of map() and whatnot to perform a function on all Some(T) (and no-op on None)
[16:21:42] <mitsuhiko> SiegeLord: it finds libraries
[16:21:54] <mitsuhiko> which is what cmake gives you over makefiles
[16:22:07] <SiegeLord> I wouldn't say it "finds" them... but I'll give you that it links them automatically
[16:22:16] <SiegeLord> Still need to pass lots of -L's
[16:22:26] <mitsuhiko> yeah, true
[16:22:38] <mitsuhiko> also cmake gives you visual studio solutions but that's a bit pointless right now :)
[16:23:15] <apoelstra> Hildar: map(opt, |&x| do_something_with(x)); i think
[16:23:52] <apoelstra> there are some examples in the libstd code which i can't find now
[16:26:10] <apoelstra> oh, the definition in option.rs is pretty clear imo
[16:26:18] <apoelstra> match self { Some(x) => Some(f(x)), None => None }
[16:26:29] *** Joins: gonkun (Mibbit@moz-1C68F6E0.hsd1.va.comcast.net)
[16:26:34] <kimundi> Hildar: Do you mean for something like a ~[Option]?
[16:27:23] <Hildar> kimundi: Yeah (technically it's a &mut ~[Option<T>], but it should behave the same).
[16:27:53] <kimundi> Hildar: Well, you can get a iterator for the vector, and map over that a function that in turn maps over the option
[16:28:33] <kimundi> Hildar: Do you actually want to map, or do you just want to run for all SOmes?
[16:28:54] <Hildar> kimundi: I want to run something for all Somes, yeah.
[16:28:55] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[16:29:13] <gonkun> hildar: Back to the issue i was having, i dont have any match/err to begin with
[16:29:49] <Hildar> gonkun: You can just take it out I guess, since it doesn't compile.
[16:29:59] <Hildar> gonkun: Just was a way to pretty print any error
[16:30:04] <gonkun> oh
[16:30:24] *** Hildar is now known as Hildar_away
[16:30:28] <gonkun> hildar: ok. so we're still not sure why its throwing the error right?
[16:30:42] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[16:31:03] <kimundi> Hildar: Okay, then you can do something cool: iterating over the vector, and then flat_mapping option iterators for each option. As a result you get a iterator over all Ts that are in a some, and you can use the regular for syntax to execute code
[16:31:05] <quux00> gonkun/Hildar: I have a version that compiles with 0.9 and it works for me:  https://gist.github.com/quux00/8901618
[16:31:22] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[16:31:46] <kimundi> for t in vec.iter().flat_map(|o| o.iter()) { ... }
[16:31:59] <gonkun> quux00: k ill take a look
[16:33:03] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Ping timeout)
[16:33:59] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[16:35:20] *** Joins: mceier (mceier@moz-C1591437.dynamic.chello.pl)
[16:35:33] *** Joins: lenstr (lenstr@42DC74CE.9636F313.7A27613B.IP)
[16:36:13] *** Joins: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com)
[16:37:22] *** Quits: lenstr (lenstr@42DC74CE.9636F313.7A27613B.IP) (Ping timeout)
[16:40:55] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[16:41:28] <hoverbear> What happened in April 2013? http://www.google.com/trends/explore#q=rust%20language
[16:41:57] *** Joins: mgottschlag (quassel@moz-2421585.cust.bluewin.ch)
[16:42:06] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[16:42:44] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[16:42:45] <gonkun> quuz00: Im getting the same error :(
[16:42:53] <gonkun> quux00*
[16:43:03] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[16:43:24] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[16:43:44] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Connection reset by peer)
[16:43:53] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[16:44:39] <quux00> gonkun: Hmm, I don't know enough about Rust to debug that.  I'm running on a Linux (non-virtualized) system.  What system are you running on (and is it in VirtualBox?)
[16:44:49] <mitsuhiko> anyone any ideas what causes this?
[16:44:49] <mitsuhiko> src/redis/test.rs:1:1: 1:1 error: can't find crate for `std`
[16:44:49] <mitsuhiko> src/redis/test.rs:1 extern mod redis;
[16:44:50] <gonkun> mac os x
[16:44:58] *** Joins: gimpf (gimpf@moz-74C710BA.adsl.highway.telekom.at)
[16:45:31] <gonkun> mitsuhiko: try adding: extern mod redis; before any of your use's
[16:45:34] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[16:45:50] <quux00> gonkun: maybe see if someone else with a Mac system has the same issue running 0.9?  I don't have a Mac.
[16:45:56] <mitsuhiko> gonkun: it complains about std
[16:45:56] <mitsuhiko> not redis
[16:46:06] <mitsuhiko> also as yuo can see the extern mod is the first line
[16:46:24] <eddyb> mitsuhiko: it shouldn't have a span
[16:46:43] <eddyb> mitsuhiko: extern mod std; is injected by rustc
[16:47:10] <mitsuhiko> so why does it not find a crate for std?
[16:47:16] <mitsuhiko> it works when i build the lib just not with --test
[16:47:35] <eddyb> I thought this error was rustpkg-related
[16:47:46] <eddyb> in any case, you should be able to find a github issue for it
[16:48:39] *** Quits: Kxepal (Miranda@moz-B8189C.pppoe.mtu-net.ru) (Ping timeout)
[16:49:02] *** Hildar_away is now known as Hildar
[16:49:03] <mitsuhiko> eddyb: can't find a relevant issue
[16:49:48] *** Quits: canhtak (canhtak@moz-8DFB5E6A.wl.t.ulaval.ca) (Quit: canhtak)
[16:50:38] <eddyb> mitsuhiko: not even a closed one?
[16:52:38] <abinader> anyone up for this trivial PR? https://github.com/mozilla/rust/pull/12131
[16:52:44] *** Joins: Kxepal (Miranda@moz-DC59528D.pppoe.mtu-net.ru)
[16:53:00] <mitsuhiko> more importantly. the error just went away. bizarre
[16:53:41] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[16:54:33] *** Joins: olivernn (olivernigh@moz-7CE0F8.access.mtnbusiness.co.za)
[16:54:57] *** Quits: jackneill (jackneill@moz-B7CD4B21.pool.digikabel.hu) (Max SendQ exceeded)
[16:54:57] *** Quits: lpy_ (lpy@AEF55484.D19CEE75.952560D4.IP) (Client exited)
[16:55:16] *** Quits: heftig (heftig@moz-DEF177E0.dip0.t-ipconnect.de) (Quit: Quitting)
[16:55:24] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[16:55:27] *** Joins: jackneill (jackneill@moz-B7CD4B21.pool.digikabel.hu)
[16:55:37] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[16:55:47] *** Joins: lpy (lpy@AEF55484.D19CEE75.952560D4.IP)
[16:56:21] *** Quits: olivernn (olivernigh@moz-7CE0F8.access.mtnbusiness.co.za) (Ping timeout)
[16:56:47] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[16:58:09] *** Quits: gfarfl (david@61CAEA53.EC1EE148.D1416617.IP) (Ping timeout)
[16:58:54] <Hildar> -25 lines by using flat_map (and map_or in one case) in my main loop. And I can edit things without the borrow checker blowing up in my face. Best kind of commit :)
[16:59:15] *** Quits: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net) (Input/output error)
[16:59:23] *** Joins: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net)
[17:00:10] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:02:03] <jadbaires> so here's part of what's been confusing me with regards to pointers and mutability
[17:02:30] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:02:30] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[17:02:38] <jadbaires> `let mut x : ~int`     -> I can change the element pointed by x
[17:03:00] <eddyb> and x itself
[17:03:11] <jadbaires> `let mut y : &int`    -> I cannot change the element pointed by y 
[17:03:24] <eddyb> but you can change y
[17:03:26] <jadbaires> eddyb: yes
[17:03:30] *** Quits: jamil_1 (kvirc@6F6794DD.18E10CE.F6DA161.IP) (Connection reset by peer)
[17:03:55] *** Joins: jamil_1 (kvirc@F14ADC60.5D51C837.B412A6C5.IP)
[17:03:58] <eddyb> good so far
[17:04:11] <jadbaires> but as of now it seems inconsistent to me that the 1st lets me change the elements pointed by x, and the latter doesn't let me change those pointed by y
[17:04:36] <eddyb> jadbaires: it's not inconsistent, that's what we have &mut for
[17:04:40] <kimundi> jadbaires: Why does it seem inconsistent?
[17:04:51] <Hildar> Wether you can change x/y is determined by if you own x or y. Not wether x or y is inherently "mutable".
[17:04:52] *** Joins: gentlefolk (chatzilla@moz-D195EAF9.cpe.teksavvy.com)
[17:05:00] <jadbaires> eddyb: yes i now understand that &mut is what allows me to do that, 
[17:05:04] <eddyb> Hildar: actually, both
[17:05:24] <mitsuhiko> i'm too stupid for makefiles.
[17:05:26] <jadbaires> kimundi: because the notation seems the same for both, and the effect is different
[17:05:29] *** Joins: mib_3a1cba (Mibbit@57277B56.60AA257E.6D6A344F.IP)
[17:05:37] <eddyb> jadbaires: if you borrow something, you have to preserve its mutability somehow. imagine borrowing an immutable variable
[17:05:39] <kimundi> jadbaires: The effect is identical
[17:05:41] <eddyb> jadbaires: now you can change it
[17:05:49] <kimundi> jadbaires: The types are different and have different semantic
[17:06:03] <mitsuhiko> anyone any ideas why this rule constantly rebuilds $(CRATE)? https://github.com/mitsuhiko/redis-rs/blob/master/Makefile#L35
[17:06:11] <mib_3a1cba> hi guys, what is the approximate ETA on rust 1.0?
[17:06:11] <jadbaires> eddyb: sure true
[17:06:13] <mitsuhiko> actually. this rule: https://github.com/mitsuhiko/redis-rs/blob/master/Makefile#L38
[17:06:22] <eddyb> jadbaires: even worse, imagine what would happen if you could change the elements of a &'static str (a string literal) after calling .as_bytes()
[17:06:30] *** Joins: canhtak (canhtak@moz-8DFB5E6A.wl.t.ulaval.ca)
[17:07:11] <jadbaires> eddyb: kimundi: question is, why don't we need something along the lines of  `let mut x : ~mut int` to indicate you can change the element pointed by x?
[17:07:33] <kimundi> jadbaires: Because ~ is defined to inherit ownership from its owner
[17:07:38] <mib_3a1cba> I am asking because I hear the syntax is going to be stable from 1.0 onwards
[17:07:45] <eddyb> jadbaires: because x owns the pointer and its pointee
[17:07:45] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[17:08:07] <eddyb> you can take &mut x and thus &mut *x
[17:08:33] <eddyb> jadbaires: we actually had something like what you're proposing, in the past, and it was ugly
[17:08:34] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[17:09:14] <eddyb> with the removal of @mut T some time ago, it was completely eradicated
[17:09:20] <kimundi> jadbaires: for let mut x = ~~~&~~~foo; every of the first three ~ can be changed as it inherits the mutability from the owner "x". starting with the & though, ownership and thus inherited mutability ends, and all ~ beyond that are immutable, as you only have a immutable reference to them.
[17:09:23] *** Quits: Kxepal (Miranda@moz-DC59528D.pppoe.mtu-net.ru) (Quit: Kxepal)
[17:09:24] <Ms2ger> mib_3a1cba, when it's ready
[17:09:37] <jadbaires> it confuses me that my question is about mutability, and the answer is about ownership... I understand they are related in that there is inheritance when you borrow things, but it's just a declaration
[17:09:39] *** Joins: Kxepal (Miranda@moz-DC59528D.pppoe.mtu-net.ru)
[17:09:47] <Tobba> heh
[17:09:52] <eddyb> jadbaires: there might be a better explanation of what was wrong with it, if you search for removed features
[17:09:57] <Tobba> I see someone killed all the rust-game posts on the subreddit
[17:10:04] <kvark> I need help with rustdoc. Could someone take a look please? https://gist.github.com/kvark/dbb55d15783a51132258
[17:10:21] <eddyb> jadbaires: they are not related, they are entangled
[17:10:28] <kimundi> mib_3a1cba: The syntax is actually quite stable already
[17:10:32] <Ms2ger> jadbaires, &/&mut is a witness of mutability, not a definition
[17:10:35] <eddyb> T is owned, &T is borrowed
[17:10:46] <eddyb> Ms2ger: nice definition :)
[17:11:13] <Ms2ger> eddyb, I read lots of backscroll :)
[17:11:22] <mib_3a1cba> Ms2ger: I know I sounded impatient, I asked because I need to make a decision right now, I have very limited time and if things change too much between 0.9 and 1.0, it will be a waste. On the other hand if it's too far in the future, I need to start now.
[17:11:31] *** Joins: eneas (Thunderbir@moz-D51B84D3.red-88-1-208.dynamicip.rima-tde.net)
[17:11:39] <mitsuhiko> i'm starting to blame the rust compiler overwriting some files
[17:12:00] <Ms2ger> mib_3a1cba, I wouldn't expect it before the end of the year
[17:12:25] *** Joins: manuels (Mibbit@moz-52FC149F.unity-media.net)
[17:12:29] <eddyb> mib_3a1cba: your code shouldn't break in drastic ways until 1.0. it's only a problem with large codebases
[17:12:38] *** Quits: marianoguerra (marianogue@moz-99B0A161.dip0.t-ipconnect.de) (Ping timeout)
[17:13:00] <eddyb> mib_3a1cba: but you have to track master and update at least once a couple weeks
[17:13:04] <Ms2ger> Speaking as someone who works on a large codebase: it is an issue :)
[17:13:23] <manuels> hi there, I'm just getting started with rust and tried to figure out if you can define optional function parameters. I didn't find anything in the docs :(
[17:13:33] <eddyb> manuels: you can't
[17:13:34] <Ms2ger> manuels, not (yet) supported
[17:13:45] <manuels> ok, good to know. thanks guys!
[17:13:50] <eddyb> Ms2ger: only because we removed that obsolete stuff
[17:13:54] <Ms2ger> Np
[17:14:04] <Ms2ger> eddyb, indeed
[17:14:22] <mib_3a1cba> ok thanks eddyb , I'll try to muster some courage then : :P
[17:14:29] *** Quits: mib_b8mh7w (Mibbit@moz-8D947B6D.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[17:14:37] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Quit: csherratt)
[17:15:45] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[17:17:57] *** Quits: mib_3a1cba (Mibbit@57277B56.60AA257E.6D6A344F.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[17:18:50] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[17:19:37] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[17:19:58] *** Joins: amousset_ (amousset@6181009C.10715965.BCDF592F.IP)
[17:20:02] <Hildar> How do I convert a ~[u8] to a ~str? .to_str() gives me a break down of the values of all the bytes.
[17:20:24] <erickt> Hildar: try str::from_utf8
[17:20:30] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[17:20:31] *** Quits: amousset (amousset@6181009C.10715965.BCDF592F.IP) (Ping timeout)
[17:20:37] <kvark> sorry for bumping this, I need a fresh look at https://gist.github.com/kvark/dbb55d15783a51132258
[17:21:59] *** Joins: [squiddy] (squiddy@moz-767EF079.dynamic.cablesurf.de)
[17:22:04] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[17:22:36] *** Quits: [squiddy] (squiddy@moz-767EF079.dynamic.cablesurf.de) (Input/output error)
[17:23:43] *** Quits: nlminhtl (ignotus@moz-4CB8A1D.site.volia.net) (Ping timeout)
[17:24:52] *** Joins: nlminhtl (ignotus@moz-4CB8A1D.site.volia.net)
[17:25:04] *** Joins: a_m0d (a_m0d@moz-2F294D00.acanac.net)
[17:26:00] <erickt> kvark: unfortunately I have no experience with rustdoc
[17:26:40] <erickt> kvark: just to be thorough, have you tried recompiling compress.rs?
[17:27:00] <kvark> erickt: thanks for looking into it, I'm compiling it like every 1 minute
[17:27:21] <kvark> also, I had issues with .rlib when fiddling with some other libs
[17:27:31] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[17:27:31] *** ChanServ sets mode: +ao dherman dherman
[17:27:38] <kvark> maybe I'll try switching to "so" now, just for a test
[17:29:30] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[17:30:31] *** Joins: lenstr (lenstr@AA1867B2.9636F313.7A27613B.IP)
[17:30:48] <Yurume> kvark, how about removing --test flag?
[17:30:52] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[17:30:52] *** ChanServ sets mode: +ao dherman dherman
[17:31:03] *** Joins: earlzlap (earlz@moz-483E1E31.neo.res.rr.com)
[17:31:13] <kvark> Yurume: it's fine without it
[17:31:32] <kvark> it's the doc tests that are failing to link, just that
[17:31:59] <kvark> I guess there is something wrong withing rlib on my system. Anyone else having issues linking to rlib?
[17:32:01] <Yurume> so doesn't removing --test solve the problem?
[17:32:08] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[17:32:44] *** Parts: sebi (Adium@moz-4119467.vie.surfer.at) ()
[17:32:44] <kvark> you don't get it, I *need* to compile with --test
[17:32:55] *** Quits: lenstr (lenstr@AA1867B2.9636F313.7A27613B.IP) (Ping timeout)
[17:33:11] <Yurume> why does rustdoc need --test? rustdoc flags are distinct from rustc flags.
[17:33:32] <Yurume> if you just need to generate docs for tests, --cfg test might suffice.
[17:33:35] <Yurume> (haven't tested)
[17:33:38] *** Quits: jadbaires (jadrian@3A6C765D.27626547.6119BA41.IP) (Connection reset by peer)
[17:33:42] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[17:33:45] *** Joins: jadbaires (jadrian@3A6C765D.27626547.6119BA41.IP)
[17:33:52] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Ping timeout)
[17:34:17] <kvark> Yurume: I was surprised to see rustdoc --test myself, but that's what acrichto has in the CI script, so it must work
[17:34:29] <Yurume> oh :p
[17:34:40] <kvark> apparently, rustdoc --test runs the in-doc code samples as tests
[17:34:43] <Yurume> hmm, then how did you compile libcompress*.rlib then?
[17:34:51] <kvark> rustc lib.rs
[17:34:51] <Yurume> kvark, aha!
[17:35:42] <Yurume> huh, indeed. I thought rustdoc somehow dynamically links to libcompress and that was because of --test.
[17:35:52] <Yurume> my bad.
[17:37:18] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[17:37:35] <Hildar> I definately have the dumb today. How do I cast/copy a &str to a ~str?
[17:37:54] <kvark> to_owned()
[17:38:52] <Hildar> Thanks.
[17:38:55] <eddyb> (it's a copy)
[17:38:56] *** Joins: zztr (Thunderbir@moz-CA50D606.dsl.static.sonic.net)
[17:39:57] <kvark> eddyb: AFAIK, all to_* methods making copies
[17:40:37] <Hildar> eddyb: If it wasn't a copy, it would be unsafe (and thus evillllll)
[17:40:42] <Yurume> kvark, how about -L $(pwd) instead of -L .?
[17:40:51] *** Joins: ctangent (textual@moz-4B354EF9.hsd1.wa.comcast.net)
[17:41:14] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[17:41:22] *** Joins: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP)
[17:42:01] <kvark> Yurume: same... I wonder if indeed the working folder changes for rustdoc
[17:42:17] <Yurume> FWIW, the source code for doctest runner is: https://github.com/mozilla/rust/blob/master/src/librustdoc/test.rs
[17:42:56] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[17:43:16] *** Quits: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[17:44:00] <kvark> Yurume: thanks, it looks to be parsing -L
[17:44:11] *** Quits: earlzlap (earlz@moz-483E1E31.neo.res.rr.com) (Ping timeout)
[17:44:19] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[17:44:38] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[17:44:47] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[17:46:03] <Yurume> it works as follows: i) processes the source code up to the expansion step with given libs and --crate-type=dylib, and for each collected doctest, ii) each test compiles an executable with given doctest code (plus fn main() etc) and --crate-type=exe -Z prefer-dynamic.
[17:46:27] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[17:46:33] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[17:47:18] <Hildar> So, when a task fails it says "<unamed>" or "<main>". How do I change those <unamed> tasks to useful things?
[17:47:35] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[17:47:48] *** Quits: arturo (Thunderbir@moz-E83B14F0.superkabel.de) (Ping timeout)
[17:47:53] <Yurume> Hildar, builder.name("foo");
[17:48:04] <kvark> Yurume: erickt: changed the lib type to "dylib" and everything works now
[17:48:09] *** Quits: Lalla (Lalla@moz-C98EC73D.net-89-3-149.rev.numericable.fr) (Ping timeout)
[17:48:17] <Yurume> kvark, huh....
[17:48:21] <kvark> something must be bonked withh rlib on my machine
[17:48:25] <Yurume> Hildar, you need to use TaskBuilder
[17:48:27] <erickt> kvark: great. can you file a bug report about it?
[17:48:34] <Hildar> yurume: So I can't do it if I just use spawn(proc(){foo})?
[17:48:54] <Yurume> Hildar, yes. a plain spawn() is a convenience function after all.
[17:48:57] <kvark> erickt: I will, though I'm not sure about a simple test case
[17:49:14] <Hildar> yurume: Fair enough.
[17:49:16] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[17:50:09] <erickt> kvark: acrichto might be able to help with that. He did all the rlib stuff and might know how to reduce this test case down
[17:50:33] <Yurume> Hildar, use std::task; let mut builder = task::task(); builder.name("forkbomb"); builder.spawn(proc() { ... });
[17:50:42] <kvark> erickt: ok, thanks. I've been trying to reach him all day
[17:50:44] *** Joins: synackse (jordyd@moz-B7446FAD.seg40.ucf.edu)
[17:51:10] <erickt> it's still a bit early over here in the bay area :)
[17:51:19] <Hildar> yurume: Fogive me if I do something less explosive with my taskbuilder :P Thank you.
[17:51:23] <Hildar> *forgive
[17:51:26] <Yurume> lol
[17:52:50] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[17:53:44] *** Joins: mzabaluev (mzabaluev@moz-A1406910.dhcp.inet.fi)
[17:54:13] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[17:54:14] *** Quits: lpy (lpy@AEF55484.D19CEE75.952560D4.IP) (Client exited)
[17:54:34] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[17:55:00] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[17:55:48] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[17:56:19] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[17:57:17] *** Quits: abinader (sid21713@moz-A42E5B7B.irccloud.com) (Quit: )
[17:57:22] *** Quits: avsej (avsej@D9A610B8.4841F515.FB33447D.IP) (Quit: Ex-Chat)
[17:59:53] *** Joins: hhhhhhhhhh (mike@moz-3E4E1B48.stcatz.ox.ac.uk)
[18:00:04] *** Joins: vosen (vosen@moz-266BA656.icpnet.pl)
[18:00:27] <jadbaires> so how do I generalise a function   fn p<T>(v : &mut[T,..2]);  to work with an arbitrary length?
[18:00:28] <hhhhhhhhhh> what is the most sensible correct way to write: static hashes : [ [ uint ], ..WIDTH * HEIGHT ] = std::vec::from_fn( THREADS, pixelhash );
[18:01:08] <eddyb> jadbaires: you can't really monomorphize a generic over a number
[18:01:15] <kimundi> jadbaires: Not possible atm, its one of the still existing weaknesses with Rust. A fixed sized vector is useless for generic code
[18:01:22] <Hildar> How does str::from_utf8 handle non-printable things like ^C?
[18:01:29] <eddyb> returns None AFAIK
[18:01:47] <kimundi> Hildar: If its valid unicdeo, it doesn't do anything
[18:01:57] <Yurume> ^C is non-printable but a valid codepoint, so it will return Some(~"\x03") or similar.
[18:02:03] <eddyb> Hildar: that wouldn't work at all
[18:02:11] <eddyb> err, hhhhhhhhhh
[18:02:20] *** Joins: dwrensha (chatzilla@moz-B23D2FF6.pitbpa.east.verizon.net)
[18:02:33] <eddyb> Yurume: oh, right, my bad
[18:02:35] <Yurume> ah, that was Some("\x03"), i.e. &str and not ~str, but anyway.
[18:02:38] *** Quits: jesse99 (jesse99@moz-D8DE13A5.hsd1.wa.comcast.net) (Ping timeout)
[18:02:50] *** Quits: gentlefolk (chatzilla@moz-D195EAF9.cpe.teksavvy.com) (Quit: ChatZilla 0.9.90.1 [Firefox 27.0/20140127194636])
[18:03:03] <jadbaires> eddyb: kimundi: likewise there'd be no way to use a function like say,   fn partition_in_place<T>(v : &mut[T])   with a fixed size vector, right?
[18:03:20] <kimundi> jadbaires: well that is possible
[18:03:23] <eddyb> jadbaires: a reference to a fixed vector does coerce to a slice
[18:03:31] <kimundi> jadbaires: you can borrow a fixed sized vector to a slice
[18:03:37] <jadbaires> hmmm
[18:03:37] <kvark> erickt: https://github.com/mozilla/rust/issues/12133 for your reference
[18:03:43] <eddyb> that is, &[T, ..N] coerces to &[T]
[18:03:44] <Hildar> Yurume: Hmm, it's returning None for me it looks like. That's... annoying. Guess I need to add yet another filter to my raw input.
[18:03:47] <kimundi> only working with a [T, ..N] directly causes problems
[18:04:02] <Yurume> Hildar, hmm? what do you give to from_utf8?
[18:04:14] <Yurume> could you print the argument? (i.e. println!("{:?}", arg);)
[18:04:30] *** Joins: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de)
[18:04:57] <jadbaires> eddyb: kimundi: I'm getting this error though:    mismatched types: expected `&mut [<generic #3>]` but found `&mut [<generic integer #1>, .. 2]` (expected vector but found &-ptr)
[18:05:24] *** Joins: jeaye (jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[18:05:28] <kimundi> jadbaires: coercion don'T work automatically in all cases right now sadly.
[18:05:29] <jadbaires>    let mut v = [1,2]; partition_in_place(&mut v);
[18:05:38] <eddyb> that should work AFAIK
[18:05:57] <eddyb> jadbaires: you can try v.as_mut_slice(), I guess
[18:06:01] <Yurume> jadbaires, try v.as_mut_slice().
[18:06:09] <jadbaires> ok let me try
[18:06:35] <jadbaires> ah that works, thanks!
[18:08:20] <Hildar> http://pastebin.com/tzHv2Aic (ugly dump of my buffers.to_str())
[18:08:26] <Hildar> Yurume
[18:08:38] <Yurume> Hildar, that's indeed an invalid UTF-8 sequence :)
[18:08:40] <eddyb> ugly because pastebin.com
[18:08:49] <Yurume> not ^C but \xff etc.
[18:09:18] *** Joins: till (till@moz-E0853D96.superkabel.de)
[18:09:23] *** till is now known as flan3002
[18:10:02] <Hildar> yurume: Well I can't see ^C actually in there(\x03 according to google), and it sure as hell isn't being turned into a str successfully.
[18:10:31] <Yurume> Hildar, I think you are parsing some binary protocol interleaved with occasional strings (and is it for Mu Online?), you cannot use Rust's string for that purpose since Rust requires UTF-8 encoding for every string (for safety).
[18:10:47] <flan3002> Anyone here created Vim tags to jump into the sourcecode of libstd successfully?
[18:11:06] <hhhhhhhhhh> what is the most sensible correct way to write: static hashes : [ [ uint, ..blah ], ..THREADS ] = std::vec::from_fn( THREADS, pixelhash );
[18:11:12] <Hildar> yurume: It's for a MUD server. Everything I'm sending should be valid ASCII right now.
[18:11:17] <Yurume> it is also possible that the protocol is indeed text-oriented but some special bytes are used for extension.
[18:11:22] <eddyb> hhhhhhhhhh: I told you that won't work
[18:11:32] <Yurume> in that case, you will need some custom parsing logic...
[18:11:35] <eddyb> hhhhhhhhhh: you can't call a function in a static initializer
[18:12:04] *** Quits: an0nymous (Jacob@moz-F04BA440.tx.res.rr.com) (Quit: Leaving)
[18:12:07] <hhhhhhhhhh> eddyb: is it possible to say "this is immutable and i will initialise it later"
[18:12:18] <eddyb> hhhhhhhhhh: not with statics
[18:12:19] <Hildar> yurume: Right. The issue is that I'm not sending a raw ^C then? (It's being escaped somewhere?)
[18:12:48] <hhhhhhhhhh> eddyb: what is the most sensible way of doing this then
[18:13:00] <eddyb> hhhhhhhhhh: what do you actually need?
[18:13:10] *** Quits: ctangent (textual@moz-4B354EF9.hsd1.wa.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[18:13:38] <kimundi> hhhhhhhhhh: Actually... I might have something for you there: https://gist.github.com/Kimundi/8782487
[18:13:59] <kimundi> A macro I wiped up a week ago for a lazyly initialized static
[18:14:05] <Yurume> Hildar, it seems so. and it... might be TELNET! (in the order, IAC IP IAC DO TIMING-MARK)
[18:14:21] <Yurume> how about using `nc` instead of `telnet`?
[18:14:40] <Hildar> yurume: Really? What a surprise! *facepalm*
[18:14:49] <hhhhhhhhhh> eddyb: an array of size n which contains the output of `f( i ) : [uint]` for i in [0..n)
[18:14:53] *** Joins: ctangent (textual@moz-4B354EF9.hsd1.wa.comcast.net)
[18:15:04] <eddyb> hhhhhhhhhh: any reason why it has to be static?
[18:15:04] <Yurume> so telnet is useful for debugging sockets, but it may send some strange sequences starting with 0xff (IAC) since it is not a bare protocol.
[18:15:15] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[18:15:33] <hhhhhhhhhh> eddyb: i can probably live without it
[18:15:34] <eddyb> hhhhhhhhhh: I understand the code, I don't understand what the data means or what it's used in/for
[18:15:53] <Yurume> Hildar, nc is your friend, get used to that :)
[18:16:02] <Hildar> yurume: Just bare enough to be annoying :P I need to implement a telnet parser eventually, so...
[18:16:05] *** Joins: jesse99 (jesse99@moz-D8DE13A5.hsd1.wa.comcast.net)
[18:16:23] <Yurume> ah, so it has to be connected with telnets. that makes sense.
[18:16:41] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Connection reset by peer)
[18:16:53] <Yurume> Hildar, for your convenience: the entire TELNET protocol is as follows: https://tools.ietf.org/html/rfc854#page-14
[18:16:56] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[18:17:25] <Hildar> yurume: Bookmarked :)
[18:18:09] <Yurume> basically you need to ignore 0xff followed by one or two bytes, depending on the first byte (0xfb thru 0xfe), with an exception of 0xff 0xff that translates to a raw byte 0xff.
[18:18:40] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[18:18:59] <Yurume> in the regexp: \xff([\x00-\xfa]|[\xfb-\xfe][\x00-\xff])
[18:18:59] *** Joins: marianoguerra (marianogue@moz-99B0A161.dip0.t-ipconnect.de)
[18:19:12] <Hildar> Yurume: Urgh... regex.
[18:19:36] <Yurume> (not a suggestion to use regexp for that of course)
[18:19:36] *** Joins: amousset__ (amousset@6181009C.10715965.BCDF592F.IP)
[18:20:02] *** Quits: amousset_ (amousset@6181009C.10715965.BCDF592F.IP) (Ping timeout)
[18:21:07] *** Joins: em (Mibbit@moz-21D467A8.vc.shawcable.net)
[18:21:24] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Connection reset by peer)
[18:21:30] <hhhhhhhhhh> is it possible to initialise a fixed size vector with dynamic values
[18:21:42] <eddyb> hhhhhhhhhh: not really
[18:21:55] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[18:22:01] <eddyb> hhhhhhhhhh: unless you use a macro or something that expands to N calls of the function, but it's not easy
[18:23:28] *** Joins: honza_ (honza@2F4A0D37.D725B7F3.2BF60B34.IP)
[18:24:50] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[18:24:54] *** Joins: lpy (lpy@AEF55484.D19CEE75.952560D4.IP)
[18:25:04] <jadbaires> how do you tell flycheck that the current file is not meant to have a main function?
[18:25:11] <jadbaires> i.e. to check it with --test
[18:25:46] <Yurume> what do you mean? I cannot really get your intent.
[18:26:15] <Hildar> Is there a std::vec::length() type function? (I want to assert!(vector.len() == 0))
[18:26:31] <jadbaires> Yurume: I have a file with no main function, that I compile with --test
[18:26:36] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[18:26:41] <eddyb> Hildar: there's .len()
[18:26:42] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[18:26:48] *** Quits: em (Mibbit@moz-21D467A8.vc.shawcable.net) (Quit: http://www.mibbit.com ajax IRC Client)
[18:26:56] <eddyb> Hildar: which you're using in that assert...
[18:26:58] <jadbaires> Yurume: enabling flycheck in emacs it returns error because the file has no main
[18:27:02] *** Joins: vertexclique (vertexcliq@6F384F56.153E7D13.6894ADF4.IP)
[18:27:03] *** Quits: lpy (lpy@AEF55484.D19CEE75.952560D4.IP) (Ping timeout)
[18:27:14] *** Quits: mzabaluev (mzabaluev@moz-A1406910.dhcp.inet.fi) (Quit: Ухожу я от вас)
[18:27:51] <Hildar> eddyb: Wow... Sorry. I didn't even try compiling it first... I am half asleep today it seems.
[18:27:55] <Yurume> jadbaires, huh... I haven't really used flycheck (actually, I haven't heard of that name til right now) so I cannot help
[18:28:26] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[18:28:54] <jadbaires> Yurume: no worries, it's really useful though, it's for on the fly syntactic/typechecking of your file
[18:29:21] <Yurume> jadbaires, if flycheck recognizes a Rust source and complains about the lack of main (which seems to be a bug for me), you can just add #[doc(hidden)] #[allow(dead_code)] fn main() {} and it might work.
[18:29:40] <Yurume> or even #[cfg(non_existent_flag)] fn main() {} might work?
[18:30:09] *** Quits: jga (asdf@92102BBD.141631A6.B5524284.IP) (Ping timeout)
[18:30:27] *** Quits: Zylinski (karl@moz-E08C6219.tbcn.telia.com) (Quit: Zylinski)
[18:30:51] <jadbaires> Yurume: yeap thanks did the trick, 
[18:30:55] <manuels> How do you initialize a struct if the Default trait is implemented (in v0.9)?
[18:30:56] <manuels> let msg = ~c_msghdr { msg_name: 0 as *libc::c_void, ..Default::default() };
[18:31:05] *** Joins: heftig (heftig@moz-13988104.dip0.t-ipconnect.de)
[18:31:14] <manuels> works but I wanna leave out the "msg_name: 0" part
[18:31:45] <Yurume> manuels, let msg: ~c_msghdr = ~Default::default(); or similar?
[18:32:22] <Yurume> you cannot omit the type for now (there is a proposed Default::<for c_msghdr>::default() syntax though).
[18:32:47] <manuels> thanks @Yurume. Works fine
[18:32:49] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[18:34:18] *** Joins: tjc (tjc@moz-6EB4E533.dsl.tsoft.com)
[18:34:18] *** ChanServ sets mode: +o tjc
[18:34:31] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Ping timeout)
[18:34:45] *** Quits: honza_ (honza@2F4A0D37.D725B7F3.2BF60B34.IP) (Connection reset by peer)
[18:34:50] *** Joins: p1start (rewi@moz-A082F561.adsl.xtra.co.nz)
[18:35:08] *** Joins: honza_ (honza@2F4A0D37.D725B7F3.2BF60B34.IP)
[18:36:20] *** Joins: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP)
[18:37:45] *** Quits: manuels (Mibbit@moz-52FC149F.unity-media.net) (Ping timeout)
[18:38:19] *** Quits: kvark (Mibbit@moz-F30E0473.cpe.net.cable.rogers.com) (Ping timeout)
[18:38:24] *** Quits: gonkun (Mibbit@moz-1C68F6E0.hsd1.va.comcast.net) (Ping timeout)
[18:39:47] *** Joins: c-a (c-a@moz-DBDF8C81.cust.bluewin.ch)
[18:40:03] *** Joins: hdevalence (quassel@moz-D125A39F.home3.cgocable.net)
[18:40:14] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[18:40:15] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Quit: BizarreCake)
[18:40:29] *** Quits: amousset__ (amousset@6181009C.10715965.BCDF592F.IP) (Ping timeout)
[18:41:08] *** Quits: a_m0d (a_m0d@moz-2F294D00.acanac.net) (Quit: Leaving.)
[18:41:35] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[18:42:36] *** Joins: fournm (Aria@moz-ABB60BA0.austin.res.rr.com)
[18:43:17] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[18:43:28] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[18:43:34] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[18:44:17] *** Joins: [squiddy] (squiddy@moz-767EF079.dynamic.cablesurf.de)
[18:45:23] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[18:46:33] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[18:47:09] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[18:47:09] *** Quits: mgottschlag (quassel@moz-2421585.cust.bluewin.ch) (Ping timeout)
[18:47:32] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[18:49:19] *** Joins: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net)
[18:50:05] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[18:51:16] *** Quits: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net) (Quit: eholk)
[18:51:35] *** Joins: Uther (Instantbir@moz-834083A8.hfc.dyn.abo.bbox.fr)
[18:51:55] *** Quits: synackse (jordyd@moz-B7446FAD.seg40.ucf.edu) (Ping timeout)
[18:52:27] *** Quits: ctangent (textual@moz-4B354EF9.hsd1.wa.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[18:53:01] *** Joins: maneuls (Mibbit@moz-52FC149F.unity-media.net)
[18:55:21] *** Joins: olivernn (olivernigh@moz-7CE0F8.access.mtnbusiness.co.za)
[18:56:05] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[18:56:28] <jadbaires> so what is the problem here  `fn f<T>(v : &mut[T]){v[0] = v[1];}`
[18:56:32] *** Joins: arturo (Thunderbir@moz-4F69776.superkabel.de)
[18:56:47] <jadbaires> ` error: cannot move out of dereference of & pointer`
[18:57:13] <sp3d> due to move semantics, an assignment like v[0]=v[1] will leave v[1] "moved out from"
[18:57:17] *** Quits: olivernn (olivernigh@moz-7CE0F8.access.mtnbusiness.co.za) (Ping timeout)
[18:57:41] <Hildar> I think you need to specify a trait on T so it is known to be assignable. Don't recall which one though.
[18:57:43] <sp3d> you could set v[0] to v[1].clone() to copy instead of moving
[18:57:46] <kimundi> jadbaires: A bare generic type T is assumed to be a moving type. foo = v[1] would be a move in that case, which is not allowed for a slice
[18:57:54] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[18:58:00] <Hildar> s/assignable/copyable
[18:58:11] <kimundi> jadbaires: You need to either clone(), or give T ad POD bound
[18:58:21] <kimundi> fn f<T: Pod>(v : &mut[T]){v[0] = v[1];}
[18:58:37] *** Joins: engla_ (engla@moz-F64E1B0F.cust.bredbandsbolaget.se)
[18:58:41] <eddyb> Hildar: that's Pod
[18:58:55] <jadbaires> right, I see
[18:59:21] *** Quits: engla (engla@moz-F64E1B0F.cust.bredbandsbolaget.se) (Ping timeout)
[18:59:23] <jadbaires> thank you all
[18:59:42] *** Quits: sigma1 (sigma@moz-B2E77065.range86-184.btcentralplus.com) (Ping timeout)
[19:00:10] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[19:00:15] *** Joins: new_one (new_one@C0EFC43B.8BFB2575.B3C0173E.IP)
[19:02:23] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[19:02:32] <jadbaires> so supposing this was say, a generic sorting algorithm, what would be the appropriate way to do it?
[19:02:36] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[19:02:45] <jadbaires> because cloning elements while moving them around could be pretty expensive
[19:02:58] <jadbaires> if I understand what cloning does
[19:03:11] <jadbaires> say, if the elements are linked lists
[19:03:39] <jadbaires> these aren't POD, but ideally I wouldn't be making copies of the whole lists each time they are moved around
[19:03:39] <eddyb> jadbaires: you use swap, of course :)
[19:03:41] *** Joins: sigma1 (sigma@moz-B2E77065.range86-184.btcentralplus.com)
[19:03:46] <maneuls> Hmm, how can I make sure that a function is only defined over Integer types? fn islarge<T>(val: T) -> bool { return val > 100; } throws an error.
[19:03:58] <jadbaires> eddyb: is that a method on vectors?
[19:03:59] <maneuls> so  does  fn islarge(val: Integer) -> bool { return val > 100; }
[19:04:05] *** Joins: mreca (mreca@moz-4F9C2109.hfc.comcastbusiness.net)
[19:04:10] <eddyb> maneuls: you can use Ord for >
[19:04:11] <maneuls> no, just for scalars
[19:04:45] <eddyb> jadbaires: hmm, there might be a vector-specific one
[19:04:54] <eddyb> look at MutableVector
[19:05:09] <maneuls> so what's the right syntax?? fn islarge(val: Ord) -> bool { return val > 100; } is not correct/
[19:05:16] <eddyb> maneuls: Ord is not a type
[19:05:47] <eddyb> fn is_large<T: Ord>(val: T) -> bool { val > 100 } is closer
[19:05:50] *** Quits: wilfred (sid159@moz-5F4AA75A.irccloud.com) (Ping timeout)
[19:05:50] *** Quits: mhenretty (sid11899@moz-5F4AA75A.irccloud.com) (Ping timeout)
[19:05:50] *** Quits: andreypopp (uid22726@moz-5F4AA75A.irccloud.com) (Ping timeout)
[19:05:52] <maneuls> @eddyb, I know, it's a trait, right? 
[19:05:59] <eddyb> maneuls: problem is, 100 doesn't have type T
[19:05:59] <maneuls> oh, ok!!
[19:06:22] *** Quits: arturo (Thunderbir@moz-4F69776.superkabel.de) (Ping timeout)
[19:07:29] <eddyb> you may be able to use fn is_large<T: Ord + One + Mul<int, T>>(val: T) { val > (One::one() * 100) } though that's a bit silly
[19:07:31] *** Joins: mhenretty (sid11899@moz-5F4AA75A.irccloud.com)
[19:07:34] *** Joins: andreypopp (uid22726@moz-5F4AA75A.irccloud.com)
[19:07:38] *** Joins: wilfred (sid159@moz-5F4AA75A.irccloud.com)
[19:08:22] <eddyb> maneuls: oh, I know, Ord + FromPrimitive
[19:08:53] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[19:09:10] *** Joins: Caseus (bacon@moz-9F046088.members.linode.com)
[19:09:21] <maneuls> You mean: fn is_large<T: Ord + FromPrimitive>(val: T) { val > 100 }?
[19:09:34] <maneuls> that gives; error: mismatched types: expected `T` but found `<VI0>` (expected type parameter but found integral variable)
[19:09:43] <eddyb> maneuls: FromPrimitive::from_uint(100), but yeah
[19:10:02] *** Quits: wycats (sid79@moz-5F4AA75A.irccloud.com) (Ping timeout)
[19:10:02] *** Quits: sawrubh (uid6719@moz-5F4AA75A.irccloud.com) (Ping timeout)
[19:10:02] *** Quits: etrepum (sid763@moz-5F4AA75A.irccloud.com) (Ping timeout)
[19:10:02] *** Quits: lexs (uid12437@moz-5F4AA75A.irccloud.com) (Ping timeout)
[19:10:02] *** Quits: drueck (uid25037@moz-5F4AA75A.irccloud.com) (Ping timeout)
[19:10:06] *** Quits: sawrubh|bot (~sawrubhbo@moz-E0F149F7.members.linode.com) (Ping timeout)
[19:10:06] *** Quits: andreypopp (uid22726@moz-5F4AA75A.irccloud.com) (Ping timeout)
[19:10:18] *** Quits: wilfred (sid159@moz-5F4AA75A.irccloud.com) (Ping timeout)
[19:10:19] *** Joins: arturo (Thunderbir@moz-E83B14F0.superkabel.de)
[19:10:30] *** Quits: mhenretty (sid11899@moz-5F4AA75A.irccloud.com) (Ping timeout)
[19:11:35] *** Quits: p1start (rewi@moz-A082F561.adsl.xtra.co.nz) (Ping timeout)
[19:12:27] <maneuls> fn is_large<T: Ord + FromPrimitive>(val: T) -> bool { val > FromPrimitive::from_uint(100).unwrap() }
[19:12:33] <maneuls> did the trick! Thanks!
[19:12:52] *** maneuls is now known as manuels
[19:13:46] *** Joins: sawrubh|bot (~sawrubhbo@moz-E0F149F7.members.linode.com)
[19:14:16] <vertexclique> hi guys
[19:14:17] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[19:15:09] *** Joins: amousset__ (amousset@6181009C.10715965.BCDF592F.IP)
[19:16:02] <silven> Is there a way to "bypass" type inference on templated functions? ie. to explicitly say what T you want to use, like somefn<T>(stuff) instead of somefun(stuff as T) ?
[19:16:10] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[19:16:53] <dwrensha> silven: somefn::<T>(stuff)
[19:17:51] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[19:18:02] <silven> dwrensha: thanks
[19:19:20] *** Quits: c-a (c-a@moz-DBDF8C81.cust.bluewin.ch) (Quit: c-a)
[19:19:24] *** Joins: amousset (amousset@6181009C.10715965.BCDF592F.IP)
[19:19:32] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[19:19:50] *** Quits: amousset__ (amousset@6181009C.10715965.BCDF592F.IP) (Ping timeout)
[19:22:47] *** Joins: mgottschlag (quassel@moz-2421585.cust.bluewin.ch)
[19:23:06] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[19:23:42] *** Joins: gonkun (Mibbit@539603D4.EBD92228.DDE5D3F6.IP)
[19:24:10] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[19:24:45] *** Joins: ctangent (textual@moz-4B354EF9.hsd1.wa.comcast.net)
[19:25:40] *** Joins: lpy (lpy@AEF55484.D19CEE75.952560D4.IP)
[19:26:17] *** Quits: Ferreus (ferreus@moz-F0A276CE.pools.arcor-ip.net) (Ping timeout)
[19:27:47] *** Quits: lpy (lpy@AEF55484.D19CEE75.952560D4.IP) (Ping timeout)
[19:27:52] <Hildar> can I match on a value and do something if it is between 2 values? Or do I need to resort to lots of if/elsing.
[19:28:12] <eddyb> Hildar: only for integers
[19:29:03] <Hildar> eddyb: It's a u8 if it matters. I want to do "240 < val < 250 => foo(val)" or whatever.
[19:29:04] <erickt> Hildar: you could do `match x { x if x > 2 && x < 5 => {…}, x if x >= 5 => { … }`
[19:29:10] <hhhhhhhhhh> why does "pub struct A { b : u32 };" complain about the semicolon
[19:29:15] <eddyb> erickt: but we have ranges :P
[19:29:23] <hhhhhhhhhh> while "pub struct A( u32 );" requires it
[19:29:24] <eddyb> hhhhhhhhhh: because you don't need it
[19:29:30] *** Joins: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP)
[19:29:45] <eddyb> hhhhhhhhhh: in the first case, that is
[19:29:47] *** Quits: cdidd (cdidd@moz-C9FF2D4E.broadband.corbina.ru) (Connection reset by peer)
[19:30:06] <hhhhhhhhhh> eddyb is there a way to turn it off and just let me put semicolons everywhere
[19:30:10] <jadbaires> how do you specify multiple traits for a type variable?  T:(Ord,Eq)  ?
[19:30:11] <hhhhhhhhhh> because i am never going to remembe this
[19:30:20] <eddyb> hhhhhhhhhh: why do you have to remember it :)?
[19:30:27] <eddyb> your code won't compile if you put them wrong
[19:30:42] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[19:30:43] <eddyb> hhhhhhhhhh: ; never comes after }, unless it's part of the enclosing statement
[19:30:44] <kimundi> hhhhhhhhhh: Every item that consists of {} does not need a semicolon, everything else does.
[19:30:57] <erickt> jadbaires: use `T: Ord + Eq`
[19:30:59] *** Quits: mgottschlag (quassel@moz-2421585.cust.bluewin.ch) (Ping timeout)
[19:31:17] *** Quits: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[19:31:24] <jadbaires> erickt: ah
[19:31:26] <eddyb> if cond {}; is wrong. let x = if cond {} else {}; is right, but the semicolon is the one in the let statement, not related to the {}
[19:31:44] <hhhhhhhhhh> should the compiler complain about "return A { b : 1 as u32 };" then
[19:31:47] <eddyb> everything outside of functions is an item, (); and {}
[19:31:49] *** Quits: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP) (Ping timeout)
[19:31:55] <eddyb> hhhhhhhhhh: that ; is part of the return statement
[19:32:04] *** Joins: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP)
[19:32:10] <hhhhhhhhhh> ok
[19:32:56] *** Joins: Matthias247 (Miranda@moz-BDD35EC0.hsi5.kabel-badenwuerttemberg.de)
[19:33:35] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[19:33:54] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[19:34:52] *** Joins: ktt3ja (ktt3ja@moz-85E2770C.hsd1.va.comcast.net)
[19:34:57] *** Quits: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP) (Ping timeout)
[19:35:19] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Ping timeout)
[19:35:24] *** Joins: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP)
[19:35:25] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[19:36:10] *** Quits: amousset (amousset@6181009C.10715965.BCDF592F.IP) (Ping timeout)
[19:36:49] <flan3002> Is there a module I can use to make code using numerical limits more readable? Like std::num::limits::MAX_I16?
[19:37:06] <flan3002> There is no point in writing one myself ofcourse...
[19:37:09] *** Quits: sigma1 (sigma@moz-B2E77065.range86-184.btcentralplus.com) (Ping timeout)
[19:37:09] *** Quits: arturo (Thunderbir@moz-E83B14F0.superkabel.de) (Ping timeout)
[19:37:09] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[19:37:50] <Hildar> Can I use enums like I would in C? I have an enum other_command where every value has a discriminant, can I cast a u8 to an other_command?
[19:38:18] <eddyb> Hildar: you can put #[deriving(FromPrimitive)] on the enum
[19:39:41] <jadbaires> is there no default implementation of show for  ~[T:Show]
[19:39:51] <ktt3ja> eddyb: what's your progress on the PR you talked about on Thursday?
[19:40:03] <eddyb> ktt3ja: the parent one?
[19:40:34] <ktt3ja> eddyb: yea, getting parent from a nodeid
[19:40:36] <flan3002> Oh, sorry for asking... Stupid me expected something different.
[19:40:40] <Hildar> jadbaires: Hmm, still can implicitly (or explicitly with as other_command) cast it from u8.
[19:41:03] *** Joins: voxpopuli (fanservice@71D59995.6A843466.689607DE.IP)
[19:41:04] *** Joins: sigma1 (sigma@moz-B2E77065.range86-184.btcentralplus.com)
[19:41:14] <eddyb> ktt3ja: it compiles, sorting out runtime errors now
[19:41:31] *** Quits: vertexclique (vertexcliq@6F384F56.153E7D13.6894ADF4.IP) (Ping timeout)
[19:41:52] *** Quits: tupshin_ (quassel@moz-E7B03838.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com) (Client exited)
[19:42:22] <mreca> hi, I'm trying to grab a process' output, but it won't continue past process.output().read_to_str(), it just gets hung up
[19:42:37] <mreca> [culprit code: http://pastebin.com/eeP9D8wP]
[19:43:00] *** Hildar is now known as Hildar_Away
[19:43:10] *** Joins: Ferreus (ferreus@moz-3C1EE425.pools.arcor-ip.net)
[19:43:52] *** Joins: vertexclique (vertexcliq@6F384F56.153E7D13.6894ADF4.IP)
[19:44:02] *** Joins: c-a (c-a@moz-DBDF8C81.cust.bluewin.ch)
[19:44:06] *** Quits: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP) (Ping timeout)
[19:44:21] *** Joins: drueck (uid25037@moz-5F4AA75A.irccloud.com)
[19:44:21] *** Joins: lexs (uid12437@moz-5F4AA75A.irccloud.com)
[19:44:23] *** Joins: wilfred (sid159@moz-5F4AA75A.irccloud.com)
[19:44:23] *** Joins: andreypopp (uid22726@moz-5F4AA75A.irccloud.com)
[19:44:23] *** Joins: etrepum (sid763@moz-5F4AA75A.irccloud.com)
[19:44:56] *** Joins: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP)
[19:45:25] *** Joins: mhenretty (sid11899@moz-5F4AA75A.irccloud.com)
[19:45:33] *** Joins: sawrubh (uid6719@moz-5F4AA75A.irccloud.com)
[19:45:35] *** Joins: wycats (sid79@moz-5F4AA75A.irccloud.com)
[19:47:03] *** Quits: [squiddy] (squiddy@moz-767EF079.dynamic.cablesurf.de) (Ping timeout)
[19:48:23] *** Joins: lenstr (lenstr@93D48803.9636F313.7A27613B.IP)
[19:49:35] <silven> What's the best practice when it comes to modularizing larger projects in rust? As I understand it, changes to one dependancy when using "mod X" etc, causes a complete recompile. But when using "extern mod X", I can't seem to get any sort of help with automatic dependancy resolution.
[19:50:06] <silven> Is there a way to achieve both?
[19:50:50] *** Quits: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca) (Quit: Leaving.)
[19:50:53] *** Joins: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca)
[19:51:05] <SiegeLord> What do you mean by 'automatic dependency resolution'?
[19:51:34] <SiegeLord> There are two big limitations in using multiple crates... trait coherence and no cyclical dependencies
[19:51:41] *** Quits: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP) (Ping timeout)
[19:51:54] *** Joins: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP)
[19:52:42] *** Quits: lenstr (lenstr@93D48803.9636F313.7A27613B.IP) (Ping timeout)
[19:53:01] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[19:53:03] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[19:53:03] <silven> SiegeLord: well, if I say "make X", and X has "extern mod Y", I'd like to to make it automatically compile that without having to specify dependancies beforehand. I DO get this feature if I use "mod Y" instead
[19:53:20] *** Quits: hhhhhhhhhh (mike@moz-3E4E1B48.stcatz.ox.ac.uk) (Quit: WeeChat 0.4.2)
[19:53:22] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[19:53:29] <SiegeLord> I see... can't be done at the moment.
[19:53:51] <silven> But the problem with that is that is X also refers to Z, that to is also recompiled even when I only changed Y
[19:54:08] *** Quits: smarter (smarter@moz-9C03B7C7.cust.bluewin.ch) (Ping timeout)
[19:54:12] <silven> SiegeLord: that's too bad, I mean all the information is there tbh
[19:54:16] <Zr40> Z is also a separate crate?
[19:54:28] <SiegeLord> Although to be perfectly clear, 'mod Y' is not really that. It's as if it's pasting the source file in that location
[19:54:40] <SiegeLord> silven: It's not there in general
[19:54:42] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[19:54:57] <Zr40> SiegeLord: there's --dep-info, though
[19:55:11] <SiegeLord> That's only for files that go into a single crate
[19:55:14] *** Joins: smarter (smarter@moz-9C03B7C7.cust.bluewin.ch)
[19:56:13] <silven> There should be something in between imo
[19:56:42] <silven> Like, "if there is a dylib, use that, or else compile it and use that"
[19:56:56] <SiegeLord> That's the domain of the build system
[19:56:57] *** Joins: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP)
[19:57:13] <SiegeLord> There could be a build system that grabs those dependencies and takes care of them automatically
[19:57:40] <SiegeLord> That said, it can't be done as there is not enough information
[19:57:45] <SiegeLord> At the moment, at least
[19:58:10] <silven> Zr40: what's --dep-info?
[19:58:27] <SiegeLord> Crate X could depend on crate Y, but crate Y needs special compillation flags which are lost as soon as crate Y is created
[19:59:14] <silven> Bah, "after compiling" that's worthless
[20:00:22] *** Joins: lkuper (lkuper@moz-AD4C50F5.dhcp-bl.indiana.edu)
[20:00:41] *** Quits: gonkun (Mibbit@539603D4.EBD92228.DDE5D3F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[20:01:50] <SiegeLord> silven: You can pass flags to disable compillation
[20:01:56] *** Joins: Krymise (Nietzsche@moz-CA789EF5.nwrknj.fios.verizon.net)
[20:02:01] <SiegeLord> --no-analysis is the best one in this case
[20:02:44] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[20:02:48] <Hildar_Away> jadbaires: Hmm, still can implicitly (or explicitly with as other_command) cast it from u8.
[20:02:54] *** Quits: lkuper (lkuper@moz-AD4C50F5.dhcp-bl.indiana.edu) (Ping timeout)
[20:02:55] <Hildar_Away> Stupid alt-tab...
[20:03:01] *** Hildar_Away is now known as Hildar
[20:03:53] *** Quits: TeXitoi (texitoi@moz-EA958D66.texitoi.eu) (Ping timeout)
[20:04:12] <Hildar> How do I call a function on an enum without an instance of said enum? Other_Command::foo() tells me that Other_Command is not a module...
[20:04:27] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[20:04:37] <Ms2ger> Is it a static method?
[20:05:19] <Hildar> Ms2ger: As in it doesn't have a self param? I believe so (It's from a #[deriving])
[20:05:36] <Ms2ger> Mm
[20:05:39] <Ms2ger> Dunno then
[20:05:41] *** Quits: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP) (Ping timeout)
[20:05:53] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Quit: Leaving...)
[20:05:54] <kimundi> Hildar: Is Other_Command the enum _Type_ or a variant of it?
[20:06:09] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[20:06:15] *** Joins: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP)
[20:06:24] *** Joins: cdidd (cdidd@moz-B8DFC4E5.broadband.corbina.ru)
[20:07:02] <Hildar> kimundi: The Type. I'm trying to construct the correct variant from a u8 using #[deriving(FromPrimative)]
[20:07:07] *** Joins: lkuper (lkuper@CB42B36E.654CD82F.51B6877.IP)
[20:07:12] <kimundi> Ah
[20:07:14] *** Joins: TeXitoi (texitoi@moz-EA958D66.texitoi.eu)
[20:07:50] <kimundi> let x: Option<Other_Command> = FromPrimitive::from_u8(2);
[20:07:57] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[20:08:25] <kimundi> trait functions need to be called on the trait itself
[20:08:51] <abustany> regarding enums, I also didn't find out how to pass an enumerated type as a parameter... eg assuming I have enum Foo { Bar(a, b) }, how to make a function that takes a bar
[20:09:00] <abustany> *Bar
[20:09:08] <abustany> looks like only Foo is accepted as a type
[20:10:03] <kimundi> abustany: That is correct, Only Foo is a type. a variant is not.
[20:10:26] *** Quits: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net) (Input/output error)
[20:10:33] <kimundi> abustany: Wanting to write a function that only accepts Bar would be like wanting to write a function that only accepts the integer 5
[20:10:48] <kimundi> both possible, but not checkable at compiletime
[20:10:58] <kimundi> And not encoded in the typesystem
[20:11:11] <abustany> ok I see, so I need to match again everytime?
[20:11:18] <kimundi> yup
[20:11:18] <abustany> or transmute with the risks it implies.
[20:11:29] <kimundi> err, not sure how transmute applies here?
[20:11:39] <abustany> maybe it doesn't actually :) I matched again in my case
[20:11:52] <Hildar> Either make it take a Foo, or take (a,b), not bar(a,b)
[20:11:57] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[20:12:09] <abustany> right
[20:12:43] <kimundi> Thir option would be "struct Bar(a, b); enum Foo { Bar_(Bar) }" or so
[20:12:51] *** Joins: mixi (mixi@moz-344F250F.superkabel.de)
[20:13:19] <abustany> is there a reason why the variant is not a type?
[20:13:41] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[20:13:44] <abustany> if I do take (a, b) and not Bar(a, b) I could potentially pass a Baz(a, b) to the function
[20:13:57] *** Quits: mixi (mixi@moz-344F250F.superkabel.de) (Quit: WeeChat 0.4.2)
[20:13:57] <kimundi> abustany: The same reason why 5 is not a type ;)
[20:14:17] <Ms2ger> Isn't it?
[20:14:51] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[20:15:06] <abustany> fair enough, I guess that comes back to your third option
[20:15:08] *** Joins: mixi (mixi@moz-344F250F.superkabel.de)
[20:15:26] *** Quits: mixi (mixi@moz-344F250F.superkabel.de) (Quit: WeeChat 0.4.2)
[20:15:52] *** Joins: mixi (mixi@moz-344F250F.superkabel.de)
[20:17:22] *** Quits: mixi (mixi@moz-344F250F.superkabel.de) (Quit: WeeChat 0.4.2)
[20:17:49] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[20:17:50] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[20:18:45] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[20:18:48] *** Joins: mixi (mixi@moz-344F250F.superkabel.de)
[20:19:25] <Hildar> If I have: enum OtherCommand {SB = 240 as u8, <snip>, SE = 250 as u8, <snip>}; Can I make a range SB..SE to match over?
[20:19:40] <eddyb> Hildar: nope
[20:20:12] *** Joins: lucian_ (lucian@moz-8408FDFA.cable.virginm.net)
[20:20:13] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Connection reset by peer)
[20:20:28] <bstrie> Hildar: I think you can stick #[repr(u8)] on top of your enum in order to avoid the `as u8` bits
[20:20:58] <eddyb> or use 240u8 instead of casting, which I'm not sure even works
[20:21:52] *** Quits: lucian_ (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[20:21:56] <Hildar> bstrie: That works, but I can no longer do x == IAC (where x is a u8 and IAC is a variant of my enum)
[20:22:13] <bstrie> Hildar: oh weird
[20:22:22] <Hildar> bstrie I can do x == IAC as u8 though
[20:22:22] <bstrie> or, maybe not
[20:22:27] *** Joins: holomorph (holomorph@moz-CF91A262.hsd1.md.comcast.net)
[20:22:31] *** Joins: raymondvargas (raymondvar@11667B39.599F34EC.DDE5D3F6.IP)
[20:22:31] <bstrie> I thought we *always* required a cast anyway
[20:22:41] <bstrie> to compare enum variants directly to numbers
[20:22:50] <Hildar> Maybe I'm wrong and it didn't work before, let me check.
[20:23:45] <Hildar> Yep, I'm wrong (or I can't reproduce it at least, and rustc is better than me at knowing it's own language ^^)
[20:24:36] *** Joins: lennart (lennart@moz-DE70D6F.stanford.edu)
[20:24:49] <mitsuhiko> Would love some feedback on this setup for building rust libraries: https://github.com/mitsuhiko/redis-rs/blob/master/Makefile
[20:25:01] <mitsuhiko> this is the reusable bit: https://github.com/mitsuhiko/redis-rs/blob/master/rust.mk
[20:26:02] *** Quits: mixi (mixi@moz-344F250F.superkabel.de) (Quit: WeeChat 0.4.2)
[20:26:24] *** Joins: lpy (lpy@AEF55484.D19CEE75.952560D4.IP)
[20:27:13] *** Joins: dukeleto (dukeleto@moz-C083E0FB.ptld.qwest.net)
[20:27:21] <bstrie> mitsuhiko: it looks very clean, although I still wish that we didn't make anyone feel the urge to resort to makefiles in the first place :P
[20:28:16] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[20:28:34] *** Quits: lpy (lpy@AEF55484.D19CEE75.952560D4.IP) (Ping timeout)
[20:28:43] <lennart> newbie question: how do I obtain references to members of a tuple struct, when I only have a reference to the struct itself?
[20:28:53] *** Quits: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP) (Ping timeout)
[20:28:56] <abustany> (ref a, ref b) ?
[20:29:07] <mitsuhiko> bstrie: what would you propose? :)
[20:29:37] *** Joins: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP)
[20:29:51] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Quit: csherratt)
[20:30:32] *** Joins: lurk_ (chatzilla@moz-F088D030.hsd1.in.comcast.net)
[20:30:37] <lennart> abustany: to be more specific, if I have `struct Foo(Bar);`, given a value of type `&Foo`, obtain a value of type `&Bar`
[20:30:40] <bstrie> mitsuhiko: nothing constructive, I just like to complain :P
[20:30:51] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[20:30:54] <mitsuhiko> bstrie: i love that, no sarcasm
[20:31:17] <abustany> lennart: at least in a match, I think you can have &Foo(ref Bar)
[20:31:19] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[20:31:26] <abustany> *as a branch
[20:31:48] *** Quits: raymondvargas (raymondvar@11667B39.599F34EC.DDE5D3F6.IP) (Quit: raymondvargas)
[20:31:55] <abustany> bstrie: do you know if there are obvious reasons why something like go's "go install" command wouldn't work?
[20:32:07] *** Joins: uzi_mantis (iz@688773EC.4F63199.DDE5D3F6.IP)
[20:32:16] <uzi_mantis> anybody know how to close a pipe?
[20:32:37] <mitsuhiko> abustany: because the solution that does not suck and does dependency management is a lot more complex than that :(
[20:32:38] <kimundi> lennart, abustany: let &Foo(ref bar) = foo_reference;
[20:32:39] <mitsuhiko> rustpkg basically was that
[20:33:07] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[20:33:08] <abustany> ah right there is rustpkg
[20:33:14] <kimundi> abustany: was*
[20:33:21] <abustany> was, was :)
[20:34:03] <lennart> abustany, kimundi: great, thanks
[20:34:31] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[20:34:56] <mitsuhiko> abustany: i started writing a rustpkg replacement but i ragequit it after a bit
[20:35:23] <mitsuhiko> primarily because i could not figure out a way to make shelling out work the same in a platform independent way without reinventing bash
[20:35:56] <abustany> shelling out?
[20:36:05] <abustany> invoking processes you mean, or?
[20:36:17] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[20:36:20] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Client exited)
[20:36:26] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Ping timeout)
[20:36:26] *** Quits: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP) (Ping timeout)
[20:36:37] *** Quits: Ms2ger (Ms2ger@4A49FFC8.EA68D5B.F15B0BB3.IP) (Quit: nn)
[20:36:41] *** Joins: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP)
[20:36:47] <mitsuhiko> abustany: yeah. invoking compiles and preprocessing steps
[20:36:56] <mitsuhiko> also providing support for finding native libraries etc.
[20:37:28] <mitsuhiko> i almost think like this is something for which it makes sense requiring a scripting language
[20:37:57] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[20:38:00] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[20:38:42] *** Quits: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP) (Client exited)
[20:38:46] *** Joins: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP)
[20:38:54] *** Joins: synackse (jordyd@D54F592D.64B932F7.BB06F59A.IP)
[20:39:14] <abustany> well I guess the question is if you want a configuration system or a build system... Can't you delegate "finding native libs" to tools that exist, like automake etc. ?
[20:39:26] <abustany> ie it uses pkg-config by default, and you can pass LIBFOO_CFLAGS to override
[20:39:29] <abustany> if needed
[20:39:42] <abustany> (pkg-config would indeed only work on linux)
[20:39:47] <mitsuhiko> you need to support windows
[20:39:50] *** Quits: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP) (Ping timeout)
[20:39:51] <mitsuhiko> that's what makes it hard
[20:39:59] <mitsuhiko> no windows support = dead in the water
[20:40:09] <abustany> yes but there afaik there's no standard way of finding libs anyway right?
[20:40:14] <abustany> so it'd be with LIBFOO_CFLAGS
[20:40:26] <mitsuhiko> that's why windows/node etc. have custom code that finds libraries and other things there
[20:40:30] *** Joins: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP)
[20:40:32] <mitsuhiko> s/windows/python
[20:40:46] <mitsuhiko> most setup.py's that need to find a library will have a custom path for windows
[20:40:51] *** Joins: gentlefolk (chatzilla@moz-D195EAF9.cpe.teksavvy.com)
[20:41:08] <mitsuhiko> most of which are: there is a precompiled binary right there
[20:41:22] <Hildar> How does "use self::Foo" work? Just tells me "unresolved import" even though I'm following it immediately with "mod Foo". (Or should I just put all the modules in the crate root and use them where needed?)
[20:42:11] <kimundi> Hildar: "use self::Foo; mod Foo;" shoudl indeed work, though it would be redunant
[20:42:12] <Tekk_> hm...
[20:42:22] <Tekk_> should the trait thing discussed earlier be a feature request or a bug report?
[20:42:27] <Tekk_> methods magically appearing where they weren't before
[20:43:18] <Hildar> kimundi: Hmm, it doesn't seem to work. (But it's moot if it isn't needed I guess).
[20:44:16] <SiegeLord> mitsuhiko: Does your makefile work with the -j flag?
[20:44:36] *** Joins: Zylinski (karl@moz-58495553.static.spa.siw.siwnet.net)
[20:44:42] <mitsuhiko> SiegeLord: should be
[20:44:48] <mitsuhiko> but that's make jobs
[20:46:58] *** Joins: rca_ (rcatolino@moz-85E59476.adsl.proxad.net)
[20:47:36] *** Quits: rca (rcatolino@moz-FE910765.adsl.proxad.net) (Ping timeout)
[20:48:25] *** Parts: holomorph (holomorph@moz-CF91A262.hsd1.md.comcast.net) ()
[20:48:35] *** Joins: [squiddy] (squiddy@moz-767EF079.dynamic.cablesurf.de)
[20:49:09] <SiegeLord> It does look pretty clean... aside from still being a makefile, the only thing I see missing is documentation generation support
[20:49:47] <apoelstra> Hildar: i always put modules in the crate root, use when needed. i get weird errors otherwise and often they are very misleading
[20:50:11] <SiegeLord> And it won't work for multiple outputs, as written
[20:50:20] *** Quits: [squiddy] (squiddy@moz-767EF079.dynamic.cablesurf.de) (Ping timeout)
[20:51:17] <Hildar> apoelstra: Hmm, I'm tempted to just do that. I will if I start getting weirdness.
[20:52:00] *** Joins: mixi (mixi@moz-344F250F.superkabel.de)
[20:52:39] *** Joins: weilin (Mibbit@moz-839B29C7.bootp.virginia.edu)
[20:53:01] *** Quits: dukeleto (dukeleto@moz-C083E0FB.ptld.qwest.net) (Ping timeout)
[20:53:38] *** Quits: mixi (mixi@moz-344F250F.superkabel.de) (Quit: WeeChat 0.4.2)
[20:54:08] *** Joins: nlminhtl_ (ignotus@moz-4CB8A1D.site.volia.net)
[20:54:10] *** Quits: nlminhtl (ignotus@moz-4CB8A1D.site.volia.net) (Quit: Konversation terminated!)
[20:54:35] *** Quits: Houm (Houm@moz-25669AA8.fbx.proxad.net) (Ping timeout)
[20:54:45] *** Joins: omnus (omnus@moz-2E009EE2.stny.res.rr.com)
[20:54:57] <mitsuhiko> SiegeLord: you mean dylib and rlib?
[20:55:02] <mitsuhiko> for instance
[20:55:02] <SiegeLord> Yes
[20:55:03] *** Quits: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Client exited)
[20:55:26] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Client exited)
[20:55:55] *** Joins: mixi (mixi@moz-344F250F.superkabel.de)
[20:56:20] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[20:56:54] *** Quits: omnus (omnus@moz-2E009EE2.stny.res.rr.com) (Client exited)
[20:57:18] *** Quits: synackse (jordyd@D54F592D.64B932F7.BB06F59A.IP) (Ping timeout)
[20:57:54] <jadbaires> since this doesn't work    `v.swap(i, v.len()-1)`  how do you do it?    `let n = v.len()-1; v.swap(i, n)`  ?
[20:57:55] *** Joins: dmac (dmac@moz-94F55C3.hfc.comcastbusiness.net)
[20:58:04] *** Joins: mixi1 (mixi@moz-DBD8904A.org)
[20:58:05] *** Quits: mixi1 (mixi@moz-DBD8904A.org) (Quit: mixi1)
[20:58:14] *** Quits: mixi (mixi@moz-344F250F.superkabel.de) (Quit: WeeChat 0.4.2)
[20:58:17] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[20:59:44] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[21:00:03] <mitsuhiko> SiegeLord: do you have an example of a library for rust that does that?
[21:00:15] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[21:00:33] <SiegeLord> Does what? Generate both kinds?
[21:00:38] <mitsuhiko> yeah
[21:01:02] <SiegeLord> My test library does, as I wanted to make sure it worked :P
[21:01:43] *** Joins: synackse (jordyd@D54F592D.64B932F7.BB06F59A.IP)
[21:02:19] *** Quits: dbussink (dbussink@E380FBAE.3A633175.F7A44A1B.IP) (Ping timeout)
[21:02:21] *** Joins: kvark (Mibbit@moz-F30E0473.cpe.net.cable.rogers.com)
[21:02:28] <Matthias247> seems like Rust now officially supports zombie tcp sockets and associated tasks. That makes me sad :(
[21:02:36] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[21:03:48] <dwrensha> Matthias247: are you referring to the fact that a task that blocks on reading cannot be killed?
[21:03:48] *** Joins: mixi (mixi@moz-DBD8904A.org)
[21:03:57] <Matthias247> dwrensha: yes
[21:04:10] *** Quits: tjc (tjc@moz-6EB4E533.dsl.tsoft.com) (Ping timeout)
[21:04:42] <mitsuhiko> is that intentional?
[21:04:42] <mitsuhiko> $ rustc --crate-file-name --crate-type=dylib src/redis/lib.rs 
[21:04:42] <mitsuhiko> libredis-31ebf23f-0.1.dylib
[21:04:42] <mitsuhiko> libredis-31ebf23f-0.1.rlib
[21:04:46] <dwrensha> Matthias247: I assume the stdlib will get some way of handling that case. Cloneable TcpStreams are very new.
[21:05:09] <weilin> Hi, all, could you help me fix a problem on RWArc? I got an error message about "Freeze" kind when I tried to use RWArc on my defined struct. The code is at http://pastebin.com/64WF7VpE , and the error message was: 
[21:05:13] <kimundi> jadbaires: yes
[21:05:20] <weilin>  error: instantiating a type parameter with an incompatible type `extra::priority_queue::PriorityQueue<HTTP_Request>`, which does not fulfill `Freeze` test-arc.rs:20     let shared_req_queue = RWArc::new(req_queue);
[21:05:28] <Matthias247> dwrensha: i elobareted quite a long time about the necessity of a close() or shutdown() in the associated issue
[21:05:34] *** Quits: mixi (mixi@moz-DBD8904A.org) (Quit: WeeChat 0.4.3)
[21:05:36] <dwrensha> Matthias247: unless you've heard some "official" statement on the matter
[21:05:42] <dwrensha> what's the issue?
[21:05:47] <jadbaires> kimundi: thanks!
[21:06:05] <mitsuhiko> aha. apparently it also builds an rlib if building a dylib.
[21:06:08] *** Joins: mixi (mixi@moz-DBD8904A.org)
[21:06:46] <Matthias247> dwrensha: 11165 and 11894
[21:06:58] <Hildar> I can't see much use for multiple readers. (Splitting Read and Write, and multiple writers is awesome though).
[21:08:08] *** Joins: amir (amir@moz-467F7F30.cust.bluewin.ch)
[21:08:28] *** Joins: arturo (Thunderbir@moz-E83B14F0.superkabel.de)
[21:10:09] <uzi_mantis> does the output of std::os::pipe() change every time i start a new process?
[21:13:44] <kvark> acrichto: my first BWT-DC compressor prototype is live now! It actually works, albeit not very efficiently. Also added to RustCI: https://github.com/kvark/dark
[21:15:02] <dwrensha> Matthias247: [skimming the conversation] Does the current approach make zombie listeners inevitable? Seems to me you could either add a shutdown method to TcpStream, or a way to kill a task, and you'd be fine.
[21:15:39] <acrichto> kvark: nice!
[21:15:57] *** Quits: flan3002 (till@moz-E0853D96.superkabel.de) (Ping timeout)
[21:16:07] <Matthias247> dwrensha: a shutdown  or close method for TcpStream would fix it. Killing the task probably too, but that's nowhere a clean shutdown
[21:16:18] <kvark> acrichto: it was a real challenge for the language choice as an instrument, and I must admit: rust showed itself more than capable!
[21:16:42] <kvark> acrichto: the principle "if it compiles, then it works" applied pretty well ;)
[21:17:02] <Hildar> dwrensha: From what I can tell, if you close all the writers, the remote end *should* EOF and then your readers will EOF. But that's remote-implementaion-defined.
[21:17:32] <dwrensha> what do you mean "writers"?
[21:17:38] <acrichto> kvark: hehe, that's why I love rust :P
[21:17:39] *** Joins: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP)
[21:17:44] <dwrensha> tasks current blocking on write?
[21:17:59] <dwrensha> A TcpStream is both a Reader and a Writer.
[21:18:34] <Hildar> dwrensha: that's actually a good question. There isn't a clearly defined difference in std is there (that's my own abstraction) My readers always seem to die when I disconnect my clients though.
[21:18:48] *** Joins: alan_andrade (alan_andra@moz-F038A26E.hfc.comcastbusiness.net)
[21:19:00] <Hildar> dwrensha: But I guess that's because of something I do. It's still possible to get zombies.
[21:19:27] *** Quits: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[21:19:37] <Matthias247> Hildar: when the client will do a clean disconnect then your reader will exit
[21:19:53] <Matthias247> when the remote won't disconnect then you will get a zombie
[21:20:21] *** Quits: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net) (Quit: Leaving...)
[21:20:31] *** Joins: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net)
[21:20:40] <Matthias247> and with real-world mobile internet connections this will happen often enough. Or with clients that will exploit you and don't send a close when you expect it
[21:20:54] <Hildar> matthias247: So it's still remote-implementation defined. Which is baaaaaad.
[21:21:33] <jadbaires> is this a compiler bug? https://gist.github.com/jorgeadriano/8906101
[21:21:39] <jadbaires> or a terrible error message?
[21:21:43] <Matthias247> yes. currently e.g. a rust http server would rely on the client cleanly closing the connection after receiving the response
[21:23:09] <Hildar> Matthias247:All of my clients have been me talking over 127.0.0.1, so I guess I'm well behaved ^^ But yeah, that does seem pretty bad. If a TcpStream blocked on read never gets EOF it's stuck.
[21:23:20] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[21:23:55] <Matthias247> Hildar: in the case of localhost connection the OS will be nice enough to inform you when the remote is dead :-)
[21:24:24] <FreeFull> Matthias247: No timeout?
[21:24:57] <Matthias247> tcp timeouts are a theoretical thing
[21:25:00] *** Quits: honza_ (honza@2F4A0D37.D725B7F3.2BF60B34.IP) (Ping timeout)
[21:25:22] *** Joins: honza_ (honza@2F4A0D37.D725B7F3.2BF60B34.IP)
[21:25:23] <Matthias247> everybody that really want's a timeout builds it on application protocol level
[21:25:43] *** Joins: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[21:25:51] *** Quits: sigma1 (sigma@moz-B2E77065.range86-184.btcentralplus.com) (Ping timeout)
[21:25:55] *** Quits: eddyb (eddy@moz-92B95652.residential.rdsnet.ro) (Ping timeout)
[21:26:00] <Matthias247> and even if they work, the timeout is VERY long
[21:26:19] *** Joins: ofeldt- (ofeldt@moz-C1F1ACD7.dip0.t-ipconnect.de)
[21:27:04] *** Quits: honza_ (honza@2F4A0D37.D725B7F3.2BF60B34.IP) (Ping timeout)
[21:27:09] *** Joins: lpy (lpy@AEF55484.D19CEE75.952560D4.IP)
[21:27:15] *** Quits: ofeldt (ofeldt@moz-D51760CF.dip0.t-ipconnect.de) (Ping timeout)
[21:27:33] *** Quits: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Ping timeout)
[21:27:58] *** Joins: dmac1 (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[21:29:16] *** Quits: lpy (lpy@AEF55484.D19CEE75.952560D4.IP) (Ping timeout)
[21:29:36] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Ping timeout)
[21:29:47] *** Quits: dmac1 (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[21:32:20] <cgaebel> how do I allow an enum to be decomposed from outside a module, but only constructed from inside the module?
[21:32:26] *** Joins: Ferio (Mibbit@moz-23CDE542.fullrate.dk)
[21:33:14] <Ferio> wow…does this channel really has > 400 idlers? :)
[21:33:37] <bjz> Ferio: yep :P
[21:33:39] <cgaebel> well, it is a sunday afternoon
[21:33:45] <cgaebel> they're allowed
[21:34:03] <bjz> cgaebel: not sure if that is possible
[21:34:25] <cgaebel> bjz: well shit. that's not very "secure"
[21:34:34] <cgaebel> for some arbitrary definition of security that I just made up
[21:34:50] *** Quits: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca) (Ping timeout)
[21:35:16] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[21:35:21] <bjz> heh
[21:35:32] *** Joins: amousset (amousset@6181009C.10715965.BCDF592F.IP)
[21:35:56] <Zr40> if you don't trust the code you're compiling, your binaries are screwed anyway
[21:36:24] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[21:36:39] <cgaebel> eeeh it's more to let me prove things like out of bounds accesses can't happen
[21:36:41] <ChrisMorgan> cgaebel: sorry, you can't have it both ways. Variants can be either completely public or completely private.
[21:36:42] <cgaebel> at the type level
[21:36:54] *** Joins: maxli (maxli@moz-EE42E0E.student.cs.uwaterloo.ca)
[21:37:01] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Ping timeout)
[21:37:01] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[21:37:17] * ChrisMorgan knows that desire well
[21:37:17] <cgaebel> can I have a public function return a non-exported type?
[21:37:22] *** Quits: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de) (Quit: Leaving.)
[21:37:52] <Matthias247> yes
[21:38:05] <Matthias247> but i don't know what you can actually do when calling the function from outside the module
[21:38:28] <cgaebel> well, I could pass that variable to other functions in that module
[21:38:29] <FreeFull> Matthias247: You can give the result to other functions that accept the type
[21:38:30] <ChrisMorgan> cgaebel: but others won't be able to decompose it directly if the variants are private.
[21:38:44] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[21:38:49] <cgaebel> ChrisMorgan: yeah this is for something else. sorry for the unannounced context switch :P
[21:39:00] <FreeFull> cgaebel: Nothing stops you
[21:39:02] <cgaebel> just sanity-checking my type programming
[21:39:09] * ChrisMorgan loves Rust's type system
[21:40:14] <cgaebel> it's aight
[21:40:25] *** Quits: Krymise (Nietzsche@moz-CA789EF5.nwrknj.fios.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[21:40:31] <cgaebel> not quite haskell or ocaml, but way better than the status quo
[21:40:56] <cgaebel> or maybe that's just the module system being weaker than I'm used not
[21:40:57] <cgaebel> not sure
[21:41:14] *** Quits: maxli (maxli@moz-EE42E0E.student.cs.uwaterloo.ca) (Ping timeout)
[21:41:41] *** Joins: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca)
[21:42:08] *** Joins: kellogh (timkellogg@moz-704A74D.hsd1.co.comcast.net)
[21:43:04] <Hildar> how do I go from str -> [u8]?
[21:43:16] <cgaebel> iterbytes maybe?
[21:43:25] *** Quits: jamil_1 (kvirc@F14ADC60.5D51C837.B412A6C5.IP) (Ping timeout)
[21:43:34] <cgaebel> http://static.rust-lang.org/doc/master/std/to_bytes/trait.IterBytes.html
[21:43:37] <cgaebel> to iterate over the bytes
[21:43:41] <Ferio> Hildar: .into_bytes()
[21:43:41] <cgaebel> if that's what you're looking for..
[21:43:42] <Tekk_> Hildar: you need to use std::to_bytes::ToBytes and then run .to_bytes on str
[21:44:00] <Tekk_> if you try to run .to_bytes on str before including you get a method not found error
[21:44:15] <Tekk_> so don't bother with that :)
[21:44:41] <Ferio> Tekk_:  A function .to_bytes() also exists?
[21:44:52] <Tekk_> Ferio: think so
[21:44:55] <Tekk_> least that's what I use in 0.9
[21:46:07] <Hildar> to_bytes() takes a bool parameter? What's that for?
[21:46:08] <Ferio> agh, I see to_bytes probably copies while into_bytes converts…
[21:46:24] <Tekk_> Hildar: no tsure, I just pass true and it works
[21:46:26] <Tekk_> not sure*
[21:46:58] <Hildar> Tekk_:Ah well, into_bytes() seems more appropriate here.
[21:47:23] *** Joins: uva_steph (bzlandfill@6EE87B91.83BCE10.DDE5D3F6.IP)
[21:47:27] <Tekk_> alright
[21:47:35] *** Quits: uva_steph (bzlandfill@6EE87B91.83BCE10.DDE5D3F6.IP) (Quit: CGI:IRC)
[21:47:45] *** Quits: dbaupp (Thunderbir@moz-25BBAF91.lns20.syd6.internode.on.net) (Ping timeout)
[21:48:00] <seanmonstar> into_bytes likely consumes the str
[21:48:03] *** Joins: uva_steph (Mibbit@6EE87B91.83BCE10.DDE5D3F6.IP)
[21:48:04] *** Quits: jackneill (jackneill@moz-B7CD4B21.pool.digikabel.hu) (Ping timeout)
[21:48:20] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[21:48:44] <uva_steph> Hi everyone - I was wondering if File.write() blocks until the writing is done? 
[21:48:52] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[21:49:08] <Tekk_> uva_steph: well io is blocking, file is in io, so I think so
[21:49:26] <seanmonstar> docs claim, "not blocking, but synchronous
[21:49:30] <Tekk_> oh
[21:49:32] <seanmonstar> http://static.rust-lang.org/doc/master/std/io/index.html
[21:49:34] <Tekk_> what's the difference?
[21:49:42] <Tekk_> oh right
[21:49:47] <Tekk_> so it only blocks your current task right?
[21:49:55] <seanmonstar> that's my understanding
[21:50:38] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[21:50:44] *** Quits: canhtak (canhtak@moz-8DFB5E6A.wl.t.ulaval.ca) (Quit: canhtak)
[21:51:04] <uva_steph> is there anyway to make the call to write block? 
[21:51:30] <Ferio> only use one task?
[21:51:52] <seanmonstar> uva_steph: you just want if so `file.write(someData); doSomethingElse();` such that doSomethingElse happens after file is written?
[21:52:12] <uva_steph> yeah! exactly that
[21:52:17] <seanmonstar> that's how it works
[21:53:06] <Tobba> hm
[21:53:07] *** Quits: nlminhtl_ (ignotus@moz-4CB8A1D.site.volia.net) (Quit: Konversation terminated!)
[21:53:22] <Tobba> would it be possible to have -ffunction-sections passed to llc when rustc generates machine code
[21:53:25] <uva_steph> hmmmm...so we're trying to write to a file, and then immediately read from it - but that read shows that the file is empty. But if we wait a few more seconds, the read shows that the file actually isn't empty?
[21:53:27] <Tobba> and -gc-sections passed to ld
[21:53:34] <Tobba> it would bring size down a *lot*
[21:54:45] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[21:55:10] <seanmonstar> uva_steph: in the same task?
[21:55:50] <Tekk_> uva_steph: even if you're using it in different tasks there's synchronization stuff you could do
[21:55:54] <Tekk_> this is why locks were invented ;)
[21:56:12] <Hildar> Is there a way to return from a task deep inside it (return, not fail)?
[21:56:18] <uva_steph> it's the same task, but the read and write are with different file objects
[21:56:38] <Tekk_> how are you doing it?
[21:56:50] <Tekk_> uva_steph: if you're opening the file for reading before you write with it, that'll cause the problem
[21:56:51] <Tekk_> open after you write
[21:57:07] <seanmonstar> ah, so you have 2 fd's pointing to the same file?
[21:57:37] <uva_steph> yeah - the opening of the file to read happens after the call to write, but we aren't sure that's after the file has actually been written to
[21:58:14] <seanmonstar> uva_steph: care to throw an example into a pastebin?
[21:58:22] <Tekk_> hm..
[21:58:28] <Tekk_> fflush maybe?
[21:58:32] * Tekk_ doesn't know the rust equiv
[21:58:36] <Tekk_> wait...
[21:58:42] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Ping timeout)
[21:58:44] <Tekk_> uva_steph: do you remember to close the writing fd before you open the new one? :P
[21:58:50] <uva_steph> we create two std::io::fs::File objects
[21:58:52] <Tekk_> that *should* actually write it
[21:59:17] <uva_steph> we'll try flush really quick, and if that doesn't work we'll throw something into pastebin! 
[21:59:19] <seanmonstar> file.flush() is a noop
[21:59:29] <Tekk_> thanks seanmonstar 
[21:59:51] <seanmonstar> http://static.rust-lang.org/doc/master/std/io/trait.Writer.html says flush is noop, and File doesn't overwrite default
[22:00:11] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[22:00:16] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[22:01:49] *** Joins: dukeleto (dukeleto@moz-C083E0FB.ptld.qwest.net)
[22:02:31] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[22:03:02] <Ferio> rust does not seem to have "\b" is that intended?
[22:03:14] *** Quits: mreca (mreca@moz-4F9C2109.hfc.comcastbusiness.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[22:03:16] *** Quits: hdevalence (quassel@moz-D125A39F.home3.cgocable.net) (Client exited)
[22:03:37] *** Quits: dukeleto (dukeleto@moz-C083E0FB.ptld.qwest.net) (Ping timeout)
[22:03:42] <uva_steph> http://pastebin.com/JnSrifGh
[22:04:12] <uva_steph> That code is part of a match statement - the matching on input happens after the matching on output in the execution of our program
[22:04:23] <uva_steph> but the file objects are different so we don't know if that's a problem
[22:06:16] *** Joins: twi (Adium@1A14BF91.397008E8.A622856D.IP)
[22:06:38] <seanmonstar> i don't know enough of the internals to see how rust handles its FDs
[22:06:49] <seanmonstar> since no one here seems to know, i'd file an issue
[22:07:08] *** Joins: zihaowang (zihaowang@moz-8BAEDE0A.hsd1.va.comcast.net)
[22:07:18] <uva_steph> okay, sounds good! Thanks for your help guys, you're the greatest!
[22:07:19] *** Quits: amousset (amousset@6181009C.10715965.BCDF592F.IP) (Ping timeout)
[22:07:57] *** Quits: twi (Adium@1A14BF91.397008E8.A622856D.IP) (Ping timeout)
[22:09:03] *** Quits: uva_steph (Mibbit@6EE87B91.83BCE10.DDE5D3F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:09:50] <Hildar> If a task fails, the default is to fail all it's child tasks and it's parent correct?
[22:11:20] *** Joins: gfarfl (david@61CAEA53.EC1EE148.D1416617.IP)
[22:11:33] *** Joins: kvanb (kvanb@moz-DA06562E.lnse2.win.bigpond.net.au)
[22:11:34] <seanmonstar> yes, default is bidirectional linking: http://static.rust-lang.org/doc/master/std/task/index.html
[22:11:42] *** Joins: t4nk804 (bzlandfill@6D812B09.75B49943.DDE5D3F6.IP)
[22:12:32] <kimundi> Hildar: Actually, contrary to that module description we don't have linked failure anymore atm. So if a task fails, only it alone fails.
[22:13:23] <kimundi> AT, least, I think thats the case
[22:14:01] <Hildar> kimundi : That would explain what I'm seeing then! Only failure on parents/children that try and read/send on a channel. Is there a way to make it so that the main task failing calls exit/abort? I end up staying open from a few tasks blocked on I/O (e.g. a TcpListener listen()ing)
[22:14:24] <kimundi> Hildar: No idea :(
[22:14:41] <seanmonstar> Hildar: on master?
[22:14:51] *** Quits: manuels (Mibbit@moz-52FC149F.unity-media.net) (Quit: http://www.mibbit.com ajax IRC Client)
[22:15:20] *** Joins: jamil_1 (kvirc@F14ADC60.5D51C837.B412A6C5.IP)
[22:15:31] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Input/output error)
[22:15:55] <Hildar> seanmonstar : yes (as of this morning).
[22:15:57] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[22:16:40] <jamil_1> dbaupp: line 10, 30-40 and 254, 261
[22:19:23] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[22:19:51] *** Joins: mattbloom52 (mattbloom5@992D8E79.2F87036F.DDE5D3F6.IP)
[22:19:53] *** Joins: fabiand (fabiand@moz-35FDE3BA.hotelavanti.cz)
[22:20:39] <Hildar> Is there an abort()-like function other than std::libc::funcs::c95::stdlib::exit?
[22:20:44] *** Quits: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca) (Input/output error)
[22:21:00] *** Joins: lucian_ (lucian@moz-8408FDFA.cable.virginm.net)
[22:21:03] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[22:21:15] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[22:21:19] *** Joins: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca)
[22:22:22] <Tobba> hm, what does -Z lto actually do?
[22:22:43] *** Quits: lucian_ (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[22:22:46] *** Quits: Ferreus (ferreus@moz-3C1EE425.pools.arcor-ip.net) (Quit: WeeChat 0.4.3-dev)
[22:22:47] <Hildar> Tobba: link time optimization I assume?
[22:22:58] *** mattbloom52 is now known as BBB
[22:22:59] *** BBB is now known as mattbloom52
[22:23:04] <Tobba> I meant on a lower level than that
[22:23:08] <Tobba> what does it ACTUALLY do
[22:23:25] <Tobba> other than break everything
[22:23:39] *** mattbloom52 is now known as MSB
[22:23:53] *** Quits: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca) (Ping timeout)
[22:24:38] *** Joins: mreca (mreca@moz-CD78D8F9.hfc.comcastbusiness.net)
[22:24:53] <MSB> How can you change ProcessOptions to so your out_fd is c_int and not a string?
[22:25:27] *** Joins: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca)
[22:26:37] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[22:26:37] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[22:26:37] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[22:27:54] *** Joins: lpy (lpy@AEF55484.D19CEE75.952560D4.IP)
[22:28:15] *** Quits: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 26.0/20131206145143])
[22:28:21] *** Joins: dmac1 (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[22:28:58] <jensnockert> Been debugging for 3 hours, _then_ I notice that a binary constant is wrong in one place.
[22:29:03] * jensnockert feels like such a noob.
[22:29:03] <Hildar> Tobba: No idea, you'd need to ask someone who knows what -Z actually does first :)
[22:29:56] *** Quits: lpy (lpy@AEF55484.D19CEE75.952560D4.IP) (Ping timeout)
[22:30:04] *** Quits: Ferio (Mibbit@moz-23CDE542.fullrate.dk) (Quit: http://www.mibbit.com ajax IRC Client)
[22:30:07] *** Quits: dmac1 (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[22:30:23] <Zr40> Tobba: it doesn't seem to break anything here... yet
[22:30:24] <jensnockert> The odd part is that floating-point is surprisingly robust under ignoring the implicit bit. 11000 random test vectors worked before I noticed the error :S
[22:30:32] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[22:30:39] <Tobba> I tried to compile with it
[22:30:41] <Tobba> got shitloads of linker errors
[22:30:52] <Zr40> Tobba: osx?
[22:30:55] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[22:31:04] <Tobba> win32
[22:31:15] <Zr40> Tobba: hm, can't help you there
[22:31:47] <Zr40> Tobba: although, what's one of those errors?
[22:31:50] *** Parts: wrl (lol@moz-9EEB87FF.don.gs) ()
[22:31:57] <Tobba> its just missing symbols
[22:32:01] <Tobba> it doesnt link to libuv properly I think
[22:33:14] *** Quits: mreca (mreca@moz-CD78D8F9.hfc.comcastbusiness.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[22:34:10] <Hildar> Tobba: It looks like -Z lto should only increase rustc's verbosity about linking, it shouldn't cause it to fail to link...
[22:34:23] <Tobba> weird
[22:34:40] <jensnockert> bjz: I think the softfloat library works for add/subtract now. Works with 200 million random test vectors. \o/
[22:34:55] <Tobba> also uh
[22:34:56] <Tobba> error: failed to find an implementation of trait std::num::Real for int
[22:35:07] *** Quits: jesse99 (jesse99@moz-D8DE13A5.hsd1.wa.comcast.net) (Ping timeout)
[22:35:14] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Ping timeout)
[22:35:16] *** Joins: amousset (amousset@moz-13458D93.w81-249.abo.wanadoo.fr)
[22:35:17] <Tekk_> that's....fun
[22:35:27] *** Quits: epdtry (stuart@moz-C31FC981.hsd1.wa.comcast.net) (Ping timeout)
[22:35:27] *** Quits: onelson (owen@18CF7301.95770028.5B6BFE7D.IP) (Ping timeout)
[22:35:38] *** Joins: epdtry (stuart@moz-C31FC981.hsd1.wa.comcast.net)
[22:35:41] *** Joins: onelson (owen@18CF7301.95770028.5B6BFE7D.IP)
[22:35:57] *** Quits: morganb (morgan_b_@moz-5EAC75A2.hfc.comcastbusiness.net) (Ping timeout)
[22:35:57] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[22:35:59] *** Parts: agallego (agallego@moz-6B897026.nyc.res.rr.com) ()
[22:36:04] <bjz> jensnockert: woah, yay!
[22:36:07] *** Joins: morganb (morgan_b_@moz-5EAC75A2.hfc.comcastbusiness.net)
[22:36:13] *** Quits: lkuper (lkuper@CB42B36E.654CD82F.51B6877.IP) (Quit: lkuper)
[22:36:17] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[22:36:20] <bjz> jensnockert: the groovy custom type you mean?
[22:36:21] *** Joins: agallego (agallego@moz-6B897026.nyc.res.rr.com)
[22:36:22] <Tekk_> new bug report: Rust does not understand sets
[22:36:22] <Tekk_> :D
[22:36:44] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[22:37:42] <bjz> Tobba: what are you trying to do?
[22:37:46] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Ping timeout)
[22:37:52] <Tobba> use sqrt on something, basicalu
[22:38:00] <Tobba> doing a some project euler stuff
[22:38:12] <bjz> Tobba: can't do a sqrt on an integer
[22:38:19] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[22:38:19] <Tobba> ughhhh
[22:38:22] <Tobba> why isnt int a Real though
[22:38:25] <Tobba> its a real number
[22:38:31] <bjz> yeah, it's stupid
[22:38:40] *** Joins: mib_9oh88a (Mibbit@B922295F.FC82A6FF.73529401.IP)
[22:38:44] <bjz> the traits I mean
[22:38:49] <Tekk_> is there a Rational trait?
[22:39:01] <Tekk_> then sqrt and other problematic ones could be moved into there, then the world is right again
[22:39:13] *** Quits: mib_9oh88a (Mibbit@B922295F.FC82A6FF.73529401.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:39:22] <Tekk_> (and then you just pretend that x / 1 doesn't exist)
[22:39:23] <FreeFull> sqrt isn't rational
[22:39:50] <bjz> FreeFull: well, some results of sqrt are rational, but not all
[22:39:53] *** Quits: zztr (Thunderbir@moz-CA50D606.dsl.static.sonic.net) (Connection reset by peer)
[22:39:59] <FreeFull> Ints wouldn't be reals either, since they only include integer values
[22:40:03] <MSB> What are the parameters passed into to_str_bytes?
[22:40:08] *** Quits: c-a (c-a@moz-DBDF8C81.cust.bluewin.ch) (Quit: c-a)
[22:40:21] <FreeFull> You can cast ints to floating point values
[22:40:25] <bjz> FreeFull: integers are a subset of real, yes
[22:40:32] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[22:41:00] <Tekk_> I don't see why sqrt shouldn't work on ints
[22:41:17] <Tekk_> now the discussion about whether it should round or just return the right type is antoher one
[22:41:18] <Tekk_> another*
[22:41:22] *** Quits: synackse (jordyd@D54F592D.64B932F7.BB06F59A.IP) (Ping timeout)
[22:41:34] <jensnockert> bjz: Yes.
[22:41:49] *** Joins: canhtak (canhtak@moz-46C3B4C8.wl.t.ulaval.ca)
[22:42:02] <FreeFull> Tekk_: Why not just cast the int to f64?
[22:42:17] <FreeFull> It makes what is happening more apparent anyway
[22:42:20] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[22:42:26] <FreeFull> Rather than having a hidden cast inside the sqrt
[22:42:50] <bjz> FreeFull: well, you could implement sqrt manually
[22:43:41] <FreeFull> You don't have to unless you want an integer result
[22:44:04] *** Joins: zztr (Thunderbir@moz-CA50D606.dsl.static.sonic.net)
[22:44:26] *** Joins: lkuper (lkuper@moz-AD4C50F5.dhcp-bl.indiana.edu)
[22:44:35] <Tobba> FreeFull: the integers ARE real numbers though
[22:44:54] <FreeFull> Tobba: They are complex numbers too
[22:45:14] <Tobba> uh
[22:45:19] <FreeFull> Most results of sqrt aren't representable as an integer though
[22:45:35] <Tobba> well yeah
[22:45:55] <Tobba> the problem is that a square root result can be irrational, or even complex
[22:46:09] <Tobba> but is that even necessary in the goddamn standard lib
[22:46:38] <FreeFull> I never saw any language where sqrt didn't operate on floats
[22:46:44] <FreeFull> But rather on ints
[22:46:56] <Tekk_> FreeFull: we're not saying that it should only operate on ints
[22:47:05] <Tekk_> we're saying that ints should be under the class of real numbers
[22:47:07] <Tekk_> because ints are real numbers
[22:47:11] <Tekk_> s/class/trait/
[22:47:40] <bjz> by the way, I have num-rs in the works: https://github.com/bjz/num-rs/
[22:48:12] <FreeFull> I think you should talk to a mathematician about htis
[22:48:13] <FreeFull> this*
[22:48:16] <bjz> I think the Real trait should be removed from the std
[22:48:32] <bjz> and rethought out
[22:49:09] *** Joins: vadimcn_ (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[22:49:14] *** Quits: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Ping timeout)
[22:49:20] <Tobba> just tear the whole number part of std out really
[22:49:21] *** vadimcn_ is now known as vadimcn
[22:49:24] <Tobba> p sure everyone agrees its shite
[22:49:34] *** Joins: hoverbea_ (hoverbear@moz-86FCBF4B.gv.shawcable.net)
[22:49:38] *** Quits: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net) (Ping timeout)
[22:49:43] *** Joins: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net)
[22:49:47] <bjz> Tobba: that is what is happening
[22:49:56] <Tobba> excellent
[22:50:08] <Tobba> while at it, any ETA on libprim
[22:51:01] *** Quits: arturo (Thunderbir@moz-E83B14F0.superkabel.de) (Ping timeout)
[22:51:08] *** Joins: ckw (ckw@moz-1A26A9C8.hsd1.or.comcast.net)
[22:52:50] <SiegeLord> Hopefully what it gets replaced by isn't worse :P
[22:53:33] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[22:53:34] *** flaper87 is now known as flaper87|afk
[22:53:50] <Tobba> honestly
[22:53:54] <bjz> -_-
[22:53:55] <Tobba> just a simple goddamn Number trait would suffice
[22:54:09] <bjz> It isn't that simple
[22:54:09] *** Quits: t4nk804 (bzlandfill@6D812B09.75B49943.DDE5D3F6.IP) (Quit: CGI:IRC (EOF))
[22:54:33] <Tobba> how so
[22:55:12] <Tobba> involving irrational numbers in the std lib is really overkill
[22:55:44] <bjz> what do you mean irrational in the std?
[22:56:00] <Tobba> iirc current num has them
[22:56:01] <Tobba> let me check
[22:56:27] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[22:56:31] * bjz knows of no std that can express irrational numbers
[22:56:32] <seanmonstar> irrational? or unreal?
[22:56:42] <seanmonstar> er, imaginary
[22:56:45] *** Joins: c-a (c-a@moz-DBDF8C81.cust.bluewin.ch)
[22:56:48] <Tobba> oh shit I meant imaginary
[22:56:49] <seanmonstar> stupid maths
[22:56:53] <Tobba> I should sleep
[22:57:03] <bjz> Tobba: we don't have complex numbers in the std
[22:57:38] <Tobba> ugh, right
[22:57:45] <Tobba> should really implement Real for ints though
[22:57:54] <Tobba> I dont see why not
[22:58:24] <bjz> My plan was to remove Real for no and to move those operations into Float
[22:58:34] <bjz> *for now
[22:58:47] <Tobba> they're really useful on ints though
[22:58:57] <Tobba> easy as heck to implement too
[22:59:15] <bjz> dude, which ones?
[22:59:20] <Tobba> sqrt
[22:59:46] <bjz> sqrt(1)? :[
[23:00:11] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[23:00:30] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[23:00:40] <Tobba> I'm not seeing any problem with that
[23:01:11] <FreeFull> sqrt(1) is 1
[23:01:12] *** Quits: akhosrav (akhosrav@moz-3F7067A0.tukw.qwest.net) (Ping timeout)
[23:01:21] <bjz> oh f
[23:01:25] <Tobba> I think he meant -1
[23:01:33] <bjz> yep
[23:01:37] <Tekk_> well of course -1 will get more interesting :)
[23:01:38] *** Joins: arturo (Thunderbir@moz-E83B14F0.superkabel.de)
[23:01:38] <Tobba> well, what do floats do
[23:01:46] <bjz> NaN
[23:01:46] <Tobba> it should just fail
[23:01:54] <FreeFull> sqrt for ints could return Option<int> or such
[23:01:56] <Tekk_> bjz: which is sensible
[23:02:00] <Tekk_> assuming you define numbers as reals
[23:02:08] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[23:02:13] <Tobba> or as a temporary thing make it return 0 or something
[23:02:23] <Tekk_> it's not like you can go and reserve "i" for the result of that
[23:02:31] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[23:02:32] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[23:02:45] *** Quits: photex (photex@399640B9.24E301D6.9510F13D.IP) (Ping timeout)
[23:02:55] *** Quits: sfackler (sfackler@moz-AEECCEBA.com) (Ping timeout)
[23:02:58] *** Quits: phil (phil@684D2576.37BA1B1C.20F09BA6.IP) (Ping timeout)
[23:02:58] *** Quits: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org) (Ping timeout)
[23:03:02] <bjz> carter: what are your thoughts on Integers implementing sqrt?
[23:03:14] *** Quits: dforsyth (dforsyth@A677A619.1C765EF.EE6E63A5.IP) (Ping timeout)
[23:03:29] <Tobba> casting back and forth between floats is silly
[23:03:41] *** Quits: doener (doener@moz-C68F600D.unity-media.net) (Quit: leaving)
[23:03:54] <Tobba> int sqrt can be implemented really nicely too, count leading zeroes, a shift and like three iters of newton raphson is accurate for any 32 bit int iirc
[23:03:57] <jamil_1> I am unable to call a method on trait object: http://paste.ubuntu.com/6906174/
[23:04:11] <jamil_1> line 17-25
[23:04:20] *** Quits: arturo (Thunderbir@moz-E83B14F0.superkabel.de) (Ping timeout)
[23:04:20] *** Quits: epdtry (stuart@moz-C31FC981.hsd1.wa.comcast.net) (Ping timeout)
[23:04:29] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[23:04:32] *** Joins: epdtry (stuart@moz-C31FC981.hsd1.wa.comcast.net)
[23:04:33] *** Joins: phil (phil@684D2576.37BA1B1C.20F09BA6.IP)
[23:04:44] *** Joins: dforsyth (dforsyth@A677A619.1C765EF.EE6E63A5.IP)
[23:04:48] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[23:04:50] *** Joins: photex (photex@399640B9.24E301D6.9510F13D.IP)
[23:05:47] *** Joins: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP)
[23:05:52] *** Joins: akhosrav (akhosrav@moz-3F7067A0.tukw.qwest.net)
[23:05:59] *** Quits: amir (amir@moz-467F7F30.cust.bluewin.ch) (Ping timeout)
[23:07:02] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Ping timeout)
[23:07:07] *** Joins: sfackler (sfackler@moz-AEECCEBA.com)
[23:07:08] <FreeFull> Tobba: I sort of feel like that sort of thing would belong in extra or in a library
[23:07:26] <Tobba> its simple integer math
[23:07:32] *** Quits: recrack (recrack@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[23:07:33] *** Joins: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP)
[23:07:35] <Tobba> it belongs somewhere in std imo
[23:07:47] *** Quits: John-Galt (kris@moz-882434A3.hsd1.or.comcast.net) (Ping timeout)
[23:07:50] *** Joins: John-Galt (kris@moz-882434A3.hsd1.or.comcast.net)
[23:08:03] <Tobba> alternatively if you're feeling lazy, implement Real for only uints
[23:08:04] <mark_edward> i remember a big email chain in he ML about having a proper mathematical system and stuff
[23:08:06] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[23:08:09] <mark_edward> whatever came of that?
[23:08:16] *** Joins: gentlefolk_ (chatzilla@moz-D195EAF9.cpe.teksavvy.com)
[23:08:40] <bjz> FreeFull: agreed
[23:08:55] *** Quits: gentlefolk (chatzilla@moz-D195EAF9.cpe.teksavvy.com) (Ping timeout)
[23:08:56] *** gentlefolk_ is now known as gentlefolk
[23:09:05] <Tobba> I think most people expect being able to do a proper damn square root
[23:09:08] *** Quits: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca) (Input/output error)
[23:09:17] <Tobba> without having to use a library
[23:09:35] <FreeFull> Tobba: Which project euler problem is this anyway?
[23:09:41] *** Quits: marianoguerra (marianogue@moz-99B0A161.dip0.t-ipconnect.de) (Ping timeout)
[23:09:42] <Tobba> 7
[23:09:47] *** Joins: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca)
[23:09:49] <Tobba> if you dont want it to take forever, you need a square root
[23:09:49] *** Joins: rwt (rwt@F66A57C6.82A0B0FA.51B6877.IP)
[23:10:02] <seanmonstar> yea, and for complex numbers, i'd be fine with `use num::isqrt`;
[23:10:17] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[23:11:02] *** Joins: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP)
[23:11:10] <eibwen> seanmonstar: how would that work? does it return a pair of two complex numbers?
[23:11:18] <jensnockert> bjz: https://github.com/bjz/ieee754-rs/tree/soft-float
[23:11:20] *** Quits: phil (phil@684D2576.37BA1B1C.20F09BA6.IP) (Ping timeout)
[23:11:51] <jensnockert> bjz: https://github.com/bjz/ieee754-rs/blob/soft-float/src/soft_f32.rs
[23:11:53] *** Quits: photex (photex@399640B9.24E301D6.9510F13D.IP) (Ping timeout)
[23:11:55] <seanmonstar> eibwen: return Complex(real, i)? though i don't care, as long as sqrt() for uints is easy
[23:12:04] <jensnockert> bjz: The interesting part is that the rust version is much much shorter than the C one.
[23:12:07] <bjz> jensnockert: ooh
[23:12:15] *** Quits: sfackler (sfackler@moz-AEECCEBA.com) (Ping timeout)
[23:12:23] *** Joins: photex (photex@399640B9.24E301D6.9510F13D.IP)
[23:12:24] <jensnockert> And I'm quite liberal with whitespace.
[23:12:29] <bjz> jensnockert: do you think it's clearer?
[23:12:42] *** Quits: dforsyth (dforsyth@A677A619.1C765EF.EE6E63A5.IP) (Ping timeout)
[23:12:43] <jensnockert> A bit, but mostly due to being shorter.
[23:12:57] *** Quits: Hildar (Mibbit@moz-7F4621B6.cable.virginm.net) (Quit: http://www.mibbit.com ajax IRC Client)
[23:12:58] *** Quits: c-a (c-a@moz-DBDF8C81.cust.bluewin.ch) (Quit: c-a)
[23:13:03] *** Joins: phil (phil@684D2576.37BA1B1C.20F09BA6.IP)
[23:13:13] <FreeFull> Tobba: I don't actually see why you'd need a square root for 7
[23:13:25] <mark_edward> what do people think about this http://blog.irukado.org/2014/01/an-appeal-for-correct-capable-future-proof-math-in-nascent-programming-languages/
[23:13:25] <FreeFull> I just generated primes up to 10001 with a sieve
[23:13:25] <Tobba> primality check
[23:13:29] <eibwen> jensnockert: just found that: self.data | sign_src.data & SIG_MASK
[23:13:35] <eibwen> brackets would be nice
[23:13:47] <Tobba> I guess you can use a sieve
[23:14:03] *** Quits: Matthias247 (Miranda@moz-BDD35EC0.hsi5.kabel-badenwuerttemberg.de) (Connection reset by peer)
[23:14:03] <FreeFull> Tobba: Sieve is faster than checking numbers one by one
[23:14:10] <Tobba> hm, yeah
[23:14:17] <jensnockert> mark_edward: It's silly.
[23:14:18] <Tobba> though the approach doesnt scale too well memory wise
[23:14:47] *** Quits: phil (phil@684D2576.37BA1B1C.20F09BA6.IP) (Ping timeout)
[23:14:53] *** Quits: gimpf (gimpf@moz-74C710BA.adsl.highway.telekom.at) (Ping timeout)
[23:14:54] <jensnockert> mark_edward: Performance and memory are stuff we do care about.
[23:15:02] *** Quits: photex (photex@399640B9.24E301D6.9510F13D.IP) (Ping timeout)
[23:15:04] <bjz> mark_edward: reading
[23:15:44] *** Quits: Zylinski (karl@moz-58495553.static.spa.siw.siwnet.net) (Ping timeout)
[23:16:02] *** Quits: kvanb (kvanb@moz-DA06562E.lnse2.win.bigpond.net.au) (Ping timeout)
[23:16:18] *** Joins: dforsyth (dforsyth@A677A619.1C765EF.EE6E63A5.IP)
[23:16:24] <enix> In Rustc, what exactly does a NodeId represent? An expression? A scope? A module? Something else?
[23:16:53] *** Joins: Zylinski (karl@moz-58495553.static.spa.siw.siwnet.net)
[23:16:59] <bjz> enix: might be better to ask that on #rust-internals
[23:17:09] <bjz> mark_edward: that's interesting
[23:17:11] <mark_edward> jensnockert, yeah but correctness matters too right? it's not to eliminate i32, etc, but make the default a bigint/real kina deal. 
[23:17:29] <mark_edward> bjz, it's the subject of an old hubbub on the january ML archives
[23:17:38] <enix> ah, ok, thanks
[23:17:53] <bjz> mark_edward: I do agree that `int` and `uint` are horrible names
[23:18:06] *** Quits: dforsyth (dforsyth@A677A619.1C765EF.EE6E63A5.IP) (Ping timeout)
[23:18:12] <bjz> mark_edward: set really bad expectations
[23:18:13] *** Joins: dbaupp (Thunderbir@2702835C.D5A1DCF.37681C44.IP)
[23:18:34] *** Quits: rca_ (rcatolino@moz-85E59476.adsl.proxad.net) (Ping timeout)
[23:18:50] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[23:18:51] <dbaupp> Tobba: is there a single mainstream language that offers integer sqrt in the stdlib?
[23:19:03] *** Joins: phil (phil@684D2576.37BA1B1C.20F09BA6.IP)
[23:19:07] <mark_edward> i mean, the default numerical type being numbers that behave more like numbers as we know them from math make sense. bigint, rational, real, and machine types as optimizations, not the efault
[23:19:10] <jensnockert> mark_edward: I think arbitrary length integers are useful, but decimal, nothanks.
[23:19:14] <jamil_1> dbaupp: is scala mainstream
[23:19:17] <bjz> dbaupp: seems C++11 does now http://en.cppreference.com/w/cpp/numeric/math/sqrt
[23:19:21] *** Joins: photex (photex@399640B9.24E301D6.9510F13D.IP)
[23:19:22] <Tekk_> jamil_1: kinda?
[23:19:25] <Tekk_> I mean twitter uses it at least
[23:19:25] <bjz> dbaupp: if that is mainstream
[23:19:34] <bjz> dbaupp: Integer -> double
[23:19:41] <mark_edward> jensnockert, why not? what about rationals/decimal?
[23:20:00] <jensnockert> mark_edward: Because floats do what most people expect, arbitrary length decimal does not.
[23:20:34] *** Joins: synackse (jordyd@moz-E7A9AB16.seg59.ucf.edu)
[23:20:44] *** Quits: phil (phil@684D2576.37BA1B1C.20F09BA6.IP) (Ping timeout)
[23:20:45] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[23:20:45] *** Joins: victorporof (victorporo@8F761026.B5EF4AF6.E96CA9D8.IP)
[23:20:49] <jensnockert> I know what sqrt(2.0f32) is, but I have no idea what sqrt(2) in arb. length decimal is.
[23:20:51] *** Joins: dbaupp1 (Thunderbir@2702835C.D5A1DCF.37681C44.IP)
[23:20:56] <dbaupp> bjz: that seems fundamentally no different to `sqrt(x as f64)` etc.
[23:20:56] *** Quits: dbaupp (Thunderbir@2702835C.D5A1DCF.37681C44.IP) (Input/output error)
[23:20:56] <mark_edward> jensnockert, what do you mean floats behave as expected? floats do not behave as expected. there are innumerable posts about how dangerous floats are because they do not behave as expected
[23:21:03] *** Quits: photex (photex@399640B9.24E301D6.9510F13D.IP) (Ping timeout)
[23:21:11] <bjz> dbaupp: indeed no
[23:21:25] *** dbaupp1 is now known as dbaupp
[23:21:40] <bjz> dbaupp: more like a thing to make template stuff easier
[23:21:44] <jensnockert> mark_edward: When do they not behave as expected?
[23:21:52] <cgaebel> I really wouldn't want non-machine-types to be made the default for a systems programming language...
[23:21:56] <mark_edward> equality, ordering, etc
[23:22:00] <mitsuhiko> the fact that --crate-file-name can return multiple filenames is annoying :-/
[23:22:08] *** Quits: Saj (Sajuuk@moz-840D0658.netvisao.pt) (Quit: Leaving)
[23:22:15] <jensnockert> mark_edward: How is that surprising for floats?
[23:22:15] *** Joins: aatch (James@moz-B437F499.pocketrent.com)
[23:22:24] <mark_edward> it's surprising for numbers
[23:22:27] <jamil_1> no taker for http://paste.ubuntu.com/6906174/
[23:22:30] <jamil_1> ?
[23:22:32] <jensnockert> mark_edward: In what way?
[23:22:39] <jamil_1> line 17-25
[23:22:57] <bjz> jensnockert: it is surprising for most people
[23:23:01] <mitsuhiko> jamil_1: has camel case. not looking at it :P
[23:23:16] <jensnockert> bjz: I don't understand how floating-point equality can be confusing?
[23:23:18] <mark_edward> jensnockert, how about .2 being unrepresentable acurately
[23:23:44] <jensnockert> mark_edward: Unlike decimal where 1/3 cannot be represented accurately?
[23:24:02] *** Joins: photex (photex@399640B9.24E301D6.9510F13D.IP)
[23:24:02] <mitsuhiko> floats *are* ridiculously confusing
[23:24:03] <dbaupp> jamil_1: what's the error?
[23:24:04] <jensnockert> And accurately still means 16 digits worth of precision.
[23:24:08] <mark_edward> jensnockert, but that fits into the domain of rational numbers
[23:24:13] *** Quits: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP) (Client exited)
[23:24:14] <mitsuhiko> and most languages have not the right tools to deal with them properly
[23:24:17] <mark_edward> which people can uinderstand
[23:24:28] <mcpherrin> jensnockert: 0.3, last digit repeating is a decimal and exact representation ;
[23:24:35] <jamil_1> dbaupp: "type `~Parser<A,C><no-bounds>` does not implement any method in scope named `parse`"
[23:25:12] <dbaupp> the worst thing about floats is equality/ordering in the presence of NaN... everything else is equivalent to base-10 scientific notation with fixed precision
[23:25:24] <dbaupp> jamil_1: ah, can't use self methods with ~Trait objects
[23:25:29] <dbaupp> has to be ~self
[23:25:35] <mitsuhiko> dbaupp: the worst thing is actually that "almost equal" is really hard to get right
[23:25:42] <mitsuhiko> due to varying precision
[23:25:43] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[23:26:17] *** Joins: honza_ (honza@2F4A0D37.D725B7F3.2BF60B34.IP)
[23:26:52] <dbaupp> it depends heavily on your situation; once you work out if you need relative or absolute equality it's simple (am I missing something?)
[23:27:03] <jensnockert> dbaupp: Not really.
[23:27:15] <bjz> mark_edward: do you know who wrote that blog post btw?
[23:27:29] <mark_edward> no
[23:27:51] <dbaupp> jamil_1: https://github.com/mozilla/rust/issues/10672 is the issue, btw
[23:28:01] *** Quits: honza_ (honza@2F4A0D37.D725B7F3.2BF60B34.IP) (Ping timeout)
[23:28:01] *** Quits: photex (photex@399640B9.24E301D6.9510F13D.IP) (Ping timeout)
[23:28:21] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[23:28:24] *** Joins: tjc (tjc@4104E3FB.CB3251F2.284344F5.IP)
[23:28:24] *** ChanServ sets mode: +o tjc
[23:28:27] *** Joins: dforsyth (dforsyth@A677A619.1C765EF.EE6E63A5.IP)
[23:28:39] *** Joins: lpy (lpy@AEF55484.D19CEE75.952560D4.IP)
[23:28:42] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[23:28:42] *** ChanServ sets mode: +ao brson brson
[23:28:45] <mark_edward> i mean i think rationals are a goo efault for most applications
[23:28:46] *** Joins: dmac1 (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[23:29:10] <jensnockert> I think floats are a good default for almost all applications.
[23:29:32] *** Quits: epdtry (stuart@moz-C31FC981.hsd1.wa.comcast.net) (Ping timeout)
[23:29:45] *** Joins: epdtry (stuart@moz-C31FC981.hsd1.wa.comcast.net)
[23:29:59] <aatch> I'm trying to think of a case where I've been stung, actually stung, by floating-point issues...
[23:30:05] *** Quits: lpy (lpy@AEF55484.D19CEE75.952560D4.IP) (Connection reset by peer)
[23:30:21] <mark_edward> that's because we're used to them. i think it's like stockholm syndrome. we're so used to working around it it seems okay
[23:30:25] *** Joins: rwt_ (rwt@moz-59AFDDF4.dhcp-bl.indiana.edu)
[23:30:26] *** Joins: lpy (lpy@AEF55484.D19CEE75.952560D4.IP)
[23:30:28] *** Quits: dmac1 (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[23:30:35] *** Quits: refold (gman@moz-42D68426.a258.priv.bahnhof.se) (Quit: leaving)
[23:30:44] *** Quits: morganb (morgan_b_@moz-5EAC75A2.hfc.comcastbusiness.net) (Ping timeout)
[23:30:47] <aatch> I think people often over-state the prevalence of floating-point numbers in general.
[23:30:55] *** Joins: morganb (morgan_b_@moz-5EAC75A2.hfc.comcastbusiness.net)
[23:30:59] <jamil_1> thanks dbaupp, its compiling now :)
[23:31:02] *** Quits: dforsyth (dforsyth@A677A619.1C765EF.EE6E63A5.IP) (Ping timeout)
[23:31:15] *** Quits: rwt (rwt@F66A57C6.82A0B0FA.51B6877.IP) (Ping timeout)
[23:31:22] <aatch> Sure, some fields are stuffed full of them, but the rest don't actually use them that much.
[23:31:34] <bjz> mark_edward: I'm not sure "stockholm syndrome" is the right way to put it. that implies floating point numbers are bad
[23:31:35] <jensnockert> aatch: Mostly games and science.
[23:31:53] <mark_edward> more  like an unnecessary compromise
[23:31:53] <jensnockert> aatch: And web, but that's only because of JS being silly/
[23:32:02] <dbaupp> mark_edward: what's the better compromise?
[23:32:08] <bjz> jensnockert: x)
[23:32:11] <jensnockert> mark_edward: Except length, what is the compromise in floats?
[23:32:24] <aatch> I normally find sorta-fixed point in stuff.
[23:32:24] <Tekk_> jensnockert: inability to do basic math? :)
[23:32:32] <dbaupp> Tekk_: such as?
[23:32:33] <eibwen> does the stdlib have a fixed-point type?
[23:32:35] <Tekk_> dbaupp: iirc IEEE has come out with a decimal floating point spec
[23:32:36] <aatch> Like using microseconds
[23:32:37] <jensnockert> Tekk_: Such as?
[23:32:37] *** Quits: lpy (lpy@AEF55484.D19CEE75.952560D4.IP) (Ping timeout)
[23:32:44] <bjz> Tekk_: what do you mean by that?
[23:32:47] <Tekk_> jensnockert: well of course we have the traditional 0.2 + 0.1
[23:32:54] <dbaupp> Tekk_: why is that better? it has the same problems, just in base 10
[23:32:57] <Tekk_> which the decimal spec is supposed to fix
[23:32:59] <mark_edward> dbaupp, i think rationals/decimals as default with floats as an optimization
[23:33:15] <aatch> Tekk_, that just shifts it to a different set of corner cases
[23:33:34] *** Quits: Zr40 (zr40@moz-CCFEAB92.adsl.xs4all.nl) (Quit: leaving)
[23:33:35] <jensnockert> Tekk_: That also breaks the fact that each number has a unique representation.
[23:33:40] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Ping timeout)
[23:33:46] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[23:33:51] <dbaupp> mark_edward: rationals are slow: you either get blow-out of the numerator/denominator, or you have to regularly run euclid's algorithm
[23:34:05] *** Joins: phil (phil@684D2576.37BA1B1C.20F09BA6.IP)
[23:34:16] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[23:34:21] *** Joins: photex (photex@399640B9.24E301D6.9510F13D.IP)
[23:34:22] *** Joins: dforsyth (dforsyth@A677A619.1C765EF.EE6E63A5.IP)
[23:34:28] *** Joins: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP)
[23:34:31] <dbaupp> eibwen: (no fixed point in the stdlib)
[23:34:31] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[23:34:39] <aatch> Seriously, who here has ever hit the limits of floats, up or down, outside of games and science?
[23:34:40] <mitsuhiko> floating point numbers are ridiculously confusing for most people and many are using floats without understanding how they work internally
[23:34:48] <mitsuhiko> and there are so many complexities in them
[23:34:50] <eibwen> kay
[23:35:04] <mitsuhiko> aatch: everybody who tried to round them i guess
[23:35:12] <eibwen> Seriously, who here has ever used floats, outside of games and science?
[23:35:17] <SiegeLord> I'm not aware of many of their complexities, and I've never had issues with them
[23:35:22] <mark_edward> me
[23:35:24] <jensnockert> eibwen: Audio processing.
[23:35:27] <aatch> mitsuhiko, they're not. People *think* they're confusing, *because* they don't understand the internals
[23:35:38] *** Quits: dwrensha (chatzilla@moz-B23D2FF6.pitbpa.east.verizon.net) (Ping timeout)
[23:35:42] <mitsuhiko> aatch: that's my point
[23:35:43] <Tekk_> personally I always just try to avoid them as much as possible
[23:35:46] <mitsuhiko> the internals *are* complex
[23:35:46] <aatch> And they don't bother learning the internals because they think its magic
[23:35:53] <aatch> mitsuhiko, not really.
[23:36:00] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[23:36:04] <mitsuhiko> aatch: how are floats simple?
[23:36:08] <aatch> It's literally just binary scientific notation
[23:36:13] <jensnockert> ^
[23:36:14] *** Joins: Hildar (Mibbit@moz-7F4621B6.cable.virginm.net)
[23:36:20] <bjz> aatch: ++
[23:36:21] <mark_edward> and that's simple?
[23:36:24] <cgaebel> ...with some subtle sharp corners
[23:36:25] <dbaupp> yes
[23:36:28] <mark_edward> ok
[23:36:31] <eibwen> aatch: I think that non-associativity of operations is pretty confusing
[23:36:36] <cgaebel> NaN
[23:36:41] <cgaebel> +/- inf
[23:36:42] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[23:36:46] <cgaebel> subnormals
[23:36:47] <aatch> eibwen, in some cases, if you aren't careful.
[23:36:50] <mitsuhiko> aatch: what about subnormals?
[23:36:51] *** Quits: phil (phil@684D2576.37BA1B1C.20F09BA6.IP) (Ping timeout)
[23:36:52] <dbaupp> eibwen: still just a consequence of scientific notation
[23:36:55] <mitsuhiko> well, denormals
[23:36:55] *** Quits: photex (photex@399640B9.24E301D6.9510F13D.IP) (Ping timeout)
[23:37:05] *** Quits: dforsyth (dforsyth@A677A619.1C765EF.EE6E63A5.IP) (Ping timeout)
[23:37:08] <cgaebel> they're surprising if you care about performance
[23:37:09] <jensnockert> subnormals make floats less confusing if anything.
[23:37:10] <bjz> aatch: I think that the user interface sometimes might make the user have incorrect expectations
[23:37:27] <jensnockert> cgaebel: Any modern x86 cpu handles them without extra cycles.
[23:37:38] <cgaebel> really!?
[23:37:40] <bjz> aatch: lots of folks just assume floats are this magical thing
[23:37:44] <jensnockert> cgaebel: Yes.
[23:38:04] <aatch> but if you understand `x.yyyyy * 10^z` then you understand floats
[23:38:05] <bjz> aatch: until they are hit by the unexpected properties
[23:38:10] <cgaebel> http://stackoverflow.com/questions/9314534/why-does-changing-0-1f-to-0-slow-down-performance-by-10x
[23:38:20] <bjz> aatch: yeah, I know
[23:38:29] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Ping timeout)
[23:38:45] <aatch> the same corner cases exist there.
[23:39:08] *** Joins: phil (phil@684D2576.37BA1B1C.20F09BA6.IP)
[23:39:13] <aatch> binary isn't magic, it's just a different base.
[23:39:34] <TheHydroImpulse> Is there a mechanism to convert a vector slice into an unsafe c pointer (thus an array)? Transmute doesn't work because of the difference in sizes. Issue #1167 sorta discusses it, but it's 2 years old.
[23:39:39] <mark_edward> yeah, not the one everyone learns and is trained in and uses their whole life
[23:39:58] <mcpherrin> TheHydroImpulse: You can just take a pointer to the first element
[23:40:04] <kimundi> TheHydroImpulse: There is a method for it
[23:40:06] <dbaupp> TheHydroImpulse: .as_ptr()
[23:40:06] <dbaupp> .as_mut_ptr()
[23:40:13] <bjz> TheHydroImpulse: there are also functions in std::str::raw
[23:40:13] <TheHydroImpulse> ahhh, there we go.
[23:40:34] <TheHydroImpulse> Thought I missed it. Thanks guys.
[23:40:52] *** Joins: photex (photex@399640B9.24E301D6.9510F13D.IP)
[23:41:01] *** Joins: dforsyth (dforsyth@A677A619.1C765EF.EE6E63A5.IP)
[23:41:04] *** Quits: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com) (Ping timeout)
[23:41:14] <bjz> aatch: it's not magic, it's just unfamiliar
[23:41:15] *** Joins: jesse99 (jesse99@moz-D8DE13A5.hsd1.wa.comcast.net)
[23:41:17] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[23:41:31] <mitsuhiko> what bjz said
[23:41:54] *** Quits: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca) (Ping timeout)
[23:42:09] <SiegeLord> a = 0; is also unfamiliar :P
[23:42:20] <aatch> Quick, what's the most accurate answer to `1.123 * 10^21 + 5.678 * 10^-11` while keeping only 4 significant figures in the first number?
[23:42:41] *** Quits: Zylinski (karl@moz-58495553.static.spa.siw.siwnet.net) (Quit: )
[23:42:43] <mark_edward> aatch, you're being facetious and snarky. that's what computers are for
[23:42:50] <bjz> xD
[23:42:55] *** Joins: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca)
[23:43:00] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[23:43:10] <Tekk_> aatch: learn to use wolfram alpha, we are not your calculator :D
[23:43:43] * bjz consults his amazing counting horse
[23:43:49] <dbaupp> 1.123
[23:43:52] <dbaupp> *10^21
[23:43:59] <cgaebel> rusti: 1.123e12+5.678e-11
[23:44:01] *** Quits: alan_andrade (alan_andra@moz-F038A26E.hfc.comcastbusiness.net) (Input/output error)
[23:44:04] <aatch> mark_edward, I'm doing it deliberately. When people say "floats are broken", they are implying that because the answer to the above is `1.123 * 10^21` is also broken
[23:44:20] <aatch> that decimal maths is also broken*
[23:44:23] <mitsuhiko> aatch: floats are not "broken" they are confusing
[23:44:44] <bjz> aatch: I don't think everyone here os saying they are broken
[23:44:51] <mark_edward> being confusing an different from maths as people know is a problem
[23:44:59] *** Joins: zmthy (zmthy@moz-C2881CC3.ecs.vuw.ac.nz)
[23:45:08] <bjz> s/os/is/
[23:45:17] <cgaebel> people just need to be careful with them...
[23:45:21] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[23:45:23] <mark_edward> and i dont want floats eliminated
[23:45:24] <cgaebel> it's more an education issue than a rust issue imo
[23:45:28] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Quit: willingc)
[23:45:33] <mark_edward> cgaebel, people should just be careful with pointers
[23:45:43] <cgaebel> yes
[23:45:47] <cgaebel> as in, know what they're for and what they aren't
[23:45:50] <aatch> To most people, what most of us do on a regular basis is incredibly confusing.
[23:46:20] <bjz> mark_edward: the good thing about rust is that the properties of pointers are encoded into the type system
[23:47:10] <cgaebel> neither pointers nor floating point are inherently evil
[23:47:20] <aatch> There's a lot of magical thinking about floats that seems to have spread, and people aren't bothering to learn about them properly.
[23:47:33] <cgaebel> and we should counteract that with education
[23:47:33] <Tekk_> mark_edward: the answer is that they're for everything
[23:47:40] <bjz> mark_edward: they are not abstracted over by default, the interface is just made to fit better with what is actually going on
[23:47:43] <Tekk_> </c_programmer> :P
[23:47:52] <mark_edward> i meant theoretically we can all just do everything perfectly by writing machine code
[23:48:05] <mark_edward> s/meant/mean
[23:48:14] <cgaebel> which is what we're doing, except we have a compiler to make it more convenient
[23:48:26] <mark_edward> and never mess up or do wrong things. but safe defaults and abstractions matter
[23:48:49] <cgaebel> there will always be a safety/performance tradeoff
[23:48:54] <cgaebel> it's incredibly difficult to get both
[23:49:16] <cgaebel> floats are fast for the things they're good at
[23:49:28] <bjz> aatch: "people aren't bothering to learn about them properly" I wonder if that is a user interface problem
[23:49:52] <dbaupp> bjz: what's a better UI for floats?
[23:50:01] <bjz> dbaupp: I don't know
[23:50:08] <Tekk_> not using decimal notation for them maybe
[23:50:16] <cgaebel> hexfloats!
[23:50:18] <cgaebel> woo!
[23:50:19] <mark_edward> cgaebel, there isn't always a tradeoff. think about string handling in C
[23:50:31] *** Quits: jamil_1 (kvirc@F14ADC60.5D51C837.B412A6C5.IP) (Ping timeout)
[23:50:36] <Tekk_> mark_edward: that's trading off on the third point of the triangle though
[23:50:37] *** Quits: amousset (amousset@moz-13458D93.w81-249.abo.wanadoo.fr) (Quit: Konversation terminated!)
[23:50:43] <Tekk_> it misses the feature of being able to represent null
[23:50:47] <cgaebel> mark_edward: yeah. sometimes, when we think really hard we can get both. but it's terrifyingly rare.
[23:50:57] *** Joins: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com)
[23:50:59] <mark_edward> endless room for mistakes, an you have to do a ton of things yourself that a library writer can do once, excellently
[23:51:30] *** Quits: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net) (Connection reset by peer)
[23:51:36] <Tekk_> also, partially related
[23:51:45] <Tekk_> but one could argue that C strings include a bad speed tradeoff
[23:51:46] <jensnockert> cgaebel: Hm… you're right, only Sandy Bridge and up have zero-cost denormals, I was sure all Core i had them.
[23:51:53] <Tekk_> because they require you to use strlen constantly
[23:51:57] *** Joins: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net)
[23:52:01] <bjz> dbaupp: UI as in API, or as in how they are represented and enforced at the type level. I don't know enough to say for sure though, or to give solutions.
[23:52:23] <cgaebel> jensnockert: well, I learned something cool today too. I didn't know sandy did that! Neat!
[23:52:33] <jensnockert> \o/
[23:52:42] <dbaupp> bjz: I can't imagine a UI that makes it both harder for inexperienced people to screw up, and sane for those who know what they're doing to use
[23:52:56] <bjz> dbaupp: yeah.
[23:53:02] <dbaupp> bjz: (e.g. requiring hex/binary floats would be horrible)
[23:53:04] <dbaupp> *literals
[23:53:10] <bjz> dbaupp: definitely
[23:53:20] <cgaebel> well, supporting them would be awesome. does rust do that?
[23:53:25] <cgaebel> I totally needed that in ocaml the other day...
[23:53:26] <Tekk_> dbaupp: perhaps 2 kinds of floats?
[23:53:27] <dbaupp> not sure
[23:53:38] <Tekk_> if you use a binary/octal/hex notation you get binary floats
[23:53:39] <bjz> dbaupp: let x = f32::from_decimal(1.3);
[23:53:43] <Tekk_> decimal gets decimal floats
[23:53:55] <dbaupp> cgaebel: https://github.com/mozilla/rust/issues/1433
[23:54:08] <dbaupp> Tekk_: that seems like it would lead to weird inter-op issues
[23:54:12] * dbaupp shrugs
[23:54:22] <SiegeLord> Why should my scientific code be screwed up because others can't learn floats?
[23:54:23] <Tekk_> it would lead to interop issues, but it solves the innerop ones
[23:54:25] <cgaebel> dbaupp: "not 1.0" :(
[23:54:26] <Tekk_> is innerop a word?
[23:54:31] <dbaupp> SiegeLord++
[23:54:46] <cgaebel> SiegeLord makes a good point
[23:54:51] <dbaupp> Tekk_: it wouldn't solve the innerop: decimal only solves the 0.1 + 0.1 problem
[23:54:54] <bjz> dbaupp: just because we don't know a solution doesn't mean we should give up. but it might not be Rust who solves it.
[23:55:07] *** Quits: nkoep (nik@moz-F42F5A45.pool.mediaways.net) (Quit: Leaving)
[23:55:08] <dbaupp> it doesn't solve the fundamental precision/nonassociativity problem
[23:55:19] <dbaupp> that's core to fixed-precision scientific notation
[23:55:22] <Tekk_> okay fine, final solution time. fixed point on the hardware level :P
[23:55:28] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[23:55:29] <bjz> SiegeLord: folks could say that about Rust's approach to pointers
[23:55:29] <dbaupp> bjz: yeah
[23:55:30] *** Parts: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) ()
[23:55:36] <FreeFull> dbaupp: What about rationals?
[23:55:36] <dbaupp> Tekk_: fixed point has it's own problems :P
[23:55:37] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[23:55:41] <dbaupp> FreeFull: too slow
[23:55:48] <SiegeLord> bjz: floats are not a safety issue
[23:55:52] <Tekk_> dbaupp: like? I've actually never heard many complaints about fixed point before
[23:56:00] <Tekk_> aside from being slow
[23:56:08] <dbaupp> weird overflow suff
[23:56:09] <cgaebel> Tekk_: you have to specify the exponent pretty much everywhere
[23:56:09] <dbaupp> *stuff
[23:56:13] <SiegeLord> Rust's pointer zoo solves a legitimate problem... changing floats doesn't
[23:56:15] <cgaebel> Tekk_ it's really annoying
[23:56:20] <FreeFull> You do need a lot of lcm calculation, true
[23:56:22] *** Joins: amousset (amousset@moz-13458D93.w81-249.abo.wanadoo.fr)
[23:56:23] *** Joins: t4nk727 (bzlandfill@8F6C2149.4DB138C4.DDE5D3F6.IP)
[23:56:27] *** Quits: amousset (amousset@moz-13458D93.w81-249.abo.wanadoo.fr) (Quit: amousset)
[23:56:27] <dbaupp> Tekk_: http://en.wikipedia.org/wiki/Fixed-point_arithmetic#Precision_loss_and_overflow
[23:56:41] <cgaebel> especially if you want to have type-level fixed point.. things get weird fast.
[23:56:45] *** Joins: sfackler (sfackler@moz-AEECCEBA.com)
[23:56:47] <cgaebel> like... the type of exp()
[23:56:54] *** Quits: agarie (agarie@66BA9D2D.647CFD0A.946930A0.IP) (Quit: Leaving...)
[23:57:04] <Tekk_> dbaupp: is overflow really a problem though?
[23:57:06] <Tekk_> that's in any number type
[23:57:22] <dbaupp> yeah, but you hit it earlier with fixed point
[23:57:24] <Tekk_> ah
[23:57:28] <bjz> jensnockert: but yeah, thanks so much
[23:57:31] <Tekk_> thanks
[23:57:46] <cgaebel> fixed point support at a library level would be awesome though
[23:57:51] <cgaebel> because it does have a lot of uses
[23:57:58] <Tekk_> I'm sure it exists already
[23:58:01] <bjz> cgaebel: definitely
[23:58:02] <Tekk_> there's no way that gmp hasn't been bound yet
[23:58:08] <jensnockert> cgaebel: I think there are fixed point libraries for Rust.
[23:58:11] *** Joins: alonlevy (alon@moz-7E95D53A.red.bezeqint.net)
[23:58:14] <cgaebel> k sweet.
[23:58:15] <dbaupp> https://github.com/thestinger/rust-gmp
[23:58:18] * jensnockert wrote one once, but I don't think I was the only one.
[23:58:28] <cgaebel> does gmp do no-allocation fixed point?
[23:58:34] <cgaebel> where it's just a little wrapper around u32/u64?
[23:58:34] <jensnockert> cgaebel: No.
[23:58:41] <cgaebel> jensnockert: :(
[23:58:47] <Tekk_> gmp is actually the specific case that made me realize that operator overloading is a good thing
[23:58:51] <cgaebel> oh well. guess I'll just write one one day.
[23:58:52] <jensnockert> cgaebel: But it is trivial to do in Rust.
[23:58:58] <cgaebel> ofc
[23:59:15] <mitsuhiko> Tekk_: operator overloading <3
[23:59:30] <mitsuhiko> try doing javascript/java game dev for a day and you want operator overloading
[23:59:42] <cgaebel> lol
[23:59:50] *** Joins: alan_andrade (alan_andra@moz-7559582E.hsd1.ca.comcast.net)
[23:59:57] <jensnockert> Try doing javascript game dev for a day and run away screaming…
