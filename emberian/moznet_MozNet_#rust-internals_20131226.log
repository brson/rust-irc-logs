[00:01:56] *** Quits: SiegeLord (sl@moz-3B527BD6.bstnma.fios.verizon.net) (Quit: Leaving)
[00:13:20] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[00:13:21] <ghrust> 01[13rust01] 15alexcrichton merged 06auto into 06snap-stage3: 02http://git.io/91Mdnw
[00:13:21] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[00:14:25] *** Quits: glaebhoerl (glaebhoerl@3391DE98.E9231B2.A0179ACD.IP) (Ping timeout)
[00:21:36] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[00:21:36] <ghrust> 01[13rust01] 15bors pushed 39 new commits to 06auto: 02http://git.io/WUuVbw
[00:21:36] <ghrust> 13rust/06auto 14cab44fb 15Alex Crichton: std: Introduce a Runtime trait...
[00:21:36] <ghrust> 13rust/06auto 141815aea 15Alex Crichton: std: Introduce an unstable::stack module...
[00:21:36] <ghrust> 13rust/06auto 14dafb310 15Alex Crichton: std: Delete rt::test...
[00:21:38] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[00:29:18] *** Quits: b (b@moz-55CA322E.org) (Ping timeout)
[00:30:04] *** Joins: b (b@moz-55CA322E.org)
[00:31:44] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[00:31:44] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14db63f3a to 14cab6af5: 02http://git.io/N3iJvQ
[00:31:44] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[00:31:45] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[00:31:46] <ghrust> 01[13rust01] 15bors pushed 39 new commits to 06auto: 02http://git.io/wz-Dpw
[00:31:46] <ghrust> 13rust/06auto 14cab44fb 15Alex Crichton: std: Introduce a Runtime trait...
[00:31:46] <ghrust> 13rust/06auto 141815aea 15Alex Crichton: std: Introduce an unstable::stack module...
[00:31:46] <ghrust> 13rust/06auto 14dafb310 15Alex Crichton: std: Delete rt::test...
[00:31:48] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[00:33:07] *** Quits: gwty (gwtypc@AFEE9338.7E936EA.25B273F5.IP) (Ping timeout)
[00:33:07] *** Quits: gwty_ (gwtypc@AFEE9338.7E936EA.25B273F5.IP) (Ping timeout)
[00:33:18] *** Quits: gwty__ (gwtypc@AFEE9338.7E936EA.25B273F5.IP) (Ping timeout)
[00:49:53] *** zz_kimundi is now known as kimundi
[01:34:31] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[02:25:34] *** Joins: gwty (gwtypc@980B8652.3FED2F87.F44414AF.IP)
[02:25:38] *** Joins: gwty_ (gwtypc@980B8652.3FED2F87.F44414AF.IP)
[02:26:51] *** Joins: gwty__ (gwtypc@980B8652.3FED2F87.F44414AF.IP)
[02:42:47] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[02:44:18] <sfackler> acrichto: ping
[02:54:19] *** Quits: gwty (gwtypc@980B8652.3FED2F87.F44414AF.IP) (Client exited)
[02:54:19] *** Quits: gwty__ (gwtypc@980B8652.3FED2F87.F44414AF.IP) (Client exited)
[02:54:20] *** Quits: gwty_ (gwtypc@980B8652.3FED2F87.F44414AF.IP) (Connection reset by peer)
[03:06:25] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[03:43:11] *** Joins: brson (brson@E88F5EC0.CA971BF7.BBC5804F.IP)
[03:43:11] *** ChanServ sets mode: +qo brson brson
[03:46:27] <sfackler> brson: do you know if there's any way to get stuff in test/auxiliary to link against the same version of e.g. libsyntax that that version of rustc links against?
[03:46:45] <sfackler> just doing an "extern mod syntax" seems to link a stage too high
[03:46:55] *** Quits: kimundi (kimundi@moz-403D73FE.dip0.t-ipconnect.de) (Ping timeout)
[03:48:21] <brson> sfackler: no, there isn't a way. because of the way the stage progression works, rustc is always linked to the previous stage
[03:49:00] <brson> i can't imagine a reason that would matter though? what odd thing are you trying to do?
[03:49:33] <brson> if you link to rustc from aux though you'll get a different rustc than the one used to do the compilation
[03:49:42] <sfackler> external syntax extensions! https://github.com/sfackler/rust/blob/28206f335c02ee5fef1eded5ab13dd3b459db839/src/test/auxiliary/macro_crate_test.rs
[03:50:08] *** Joins: kimundi (kimundi@moz-626CD9BD.dip0.t-ipconnect.de)
[03:50:46] <brson> aha
[03:51:00] <sfackler> I need to use the same libsyntax binary or the dynamic linker fails to match things up properly
[03:51:12] <brson> that is going to be tricky because of this issue :(
[03:51:34] <brson> i would like to build the stages in a different way so that they aren't intermixed like this, but there are complications
[03:52:33] <brson> this is something we need to resolve though
[03:52:50] <brson> i guess I'd prefer to just bite the bullet and *completely change the build process*
[03:52:54] <sfackler> how does run-pass-fulldeps work? would it be possible to do something like that for auxilliary-fulldeps?
[03:53:11] <brson> sfackler: no, you would still be getting the wrong libs
[03:53:29] <brson> the rustc exe basically has its own set of libraries
[03:53:35] <brson> from the previous stage
[03:53:57] <brson> you could hack something together to manually point your library to the correct libraries
[03:54:01] <brson> but that's minimally useful
[03:54:07] <sfackler> yeah
[03:54:09] <brson> with -L
[03:54:37] *** kimundi is now known as zz_kimundi
[03:55:21] <brson> in theory the stage3 rustc should have the same libs as its targets
[03:55:32] <brson> but stage3 is not used much
[03:55:52] <brson> and that's not always true, for unknown reasons
[03:57:15] <brson> i'll file an issue about this
[03:58:48] <sfackler> cool. I'm guessing that this'll block on getting the test infrastructure to a place where it can actually have an rpass test, right?
[03:59:08] *** Quits: canhtak (canhtak@38266F07.7A8E554D.FC900DAF.IP) (Quit: canhtak)
[04:00:12] <brson> sfackler: does it work manually, but not in a test harness? that would surprise me
[04:00:58] <sfackler> it works off of a full install
[04:01:23] *** zz_kimundi is now known as kimundi
[04:01:25] <brson> ok. probably because the symbols for the host bins and target bins are identical
[04:01:29] <sfackler> and i'm guessing that  work at stage1 if I pointed it at the right libsyntax
[04:01:37] <sfackler> *that it'll
[04:01:47] <brson> does the test work in stage2?
[04:02:07] <brson> i would expect so, since stage2 is the install stage
[04:02:23] <sfackler> let me check
[04:02:52] <sfackler> it does appear to work at stage2
[04:03:05] <brson> if it works reliably in stage2 we *might* be able to merge it, but I'm not sure how much we can rely on the stage2 symbols being the same
[04:03:29] <sfackler> is rustc statically linked?
[04:04:56] <sfackler> it should definitely work with the installed version of rustc since rustc and the extension crate will be linking to the exact same library
[04:05:26] <brson> they won't be linking to the same library. there are always at least two copies of the libs installed
[04:05:43] <sfackler> oh, really?
[04:05:49] <brson> one in /usr/lib and one in /usr/lib/rustc/$triple/lib
[04:05:54] <sfackler> ah
[04:06:05] <brson> i would rather the one in /usr/lib didn't exist
[04:06:27] <brson> it's very compilcated to change the build process though
[04:06:45] <sfackler> yeah, it seems like if you want to link against libsyntax or librustc, you'd always want the same version as rustc's
[04:08:47] <brson> yes. it's tricky though. the rustc that is compiling your crate that is linking to libsyntax needs to be exactly compatible with the one that built libsyntax, but it itself also needs to link to the libsyntax that it built
[04:08:59] <brson> bootstrapping is neat
[04:09:18] <brson> s/neat/hard
[04:12:07] <sfackler> wheee
[04:14:16] <brson> https://github.com/mozilla/rust/issues/11145
[04:15:18] <sfackler> thanks
[04:16:15] <brson> yes
[04:16:21] <brson> er
[04:19:39] *** Joins: dbaupp (Thunderbir@moz-937EB27.pa.nsw.optusnet.com.au)
[04:24:14] *** Quits: dbaupp (Thunderbir@moz-937EB27.pa.nsw.optusnet.com.au) (No route to host)
[04:26:36] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[04:26:36] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/HHOHfQ
[04:26:36] <ghrust> 13rust/06auto 14cc4e707 15Huon Wilson: std::vec: correct .sort()'s doc-string and add some...
[04:26:36] <ghrust> 13rust/06auto 14b29e548 15Huon Wilson: std::vec: clarify & examplify more docs.
[04:26:36] <ghrust> 13rust/06auto 14301d065 15bors: auto merge of #11127 : huonw/rust/vec-docs, r=alexcrichton
[04:26:38] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[04:36:35] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[04:39:09] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[05:07:53] *** Quits: brson (brson@E88F5EC0.CA971BF7.BBC5804F.IP) (Quit: leaving)
[05:19:40] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Ping timeout)
[05:19:58] *** Joins: lpy (lpy@9EA5DA85.F09091A8.1348A864.IP)
[05:46:42] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[05:46:42] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14301d065 to 14cab6af5: 02http://git.io/N3iJvQ
[05:46:42] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[05:46:42] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[05:46:43] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/9iTBjw
[05:46:43] <ghrust> 13rust/06auto 144d5243d 15Steven Fackler: Remove out of date test...
[05:46:43] <ghrust> 13rust/06auto 14c7cf5dc 15Steven Fackler: Method-ify CStore
[05:46:43] <ghrust> 13rust/06auto 14d975060 15bors: auto merge of #11146 : sfackler/rust/cleanup, r=alexcrichton...
[05:46:45] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[06:06:56] *** Quits: b (b@moz-55CA322E.org) (Quit: ZNC - http://znc.in)
[06:21:47] *** Quits: lpy (lpy@9EA5DA85.F09091A8.1348A864.IP) (Ping timeout)
[06:22:21] *** Joins: lpy (lpy@9EA5DA85.F09091A8.1348A864.IP)
[06:56:39] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[06:56:39] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/9iTBjw
[06:56:39] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[07:01:45] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[07:01:45] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/FKTaTA
[07:01:45] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[07:01:48] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[07:01:48] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/JGtaAg
[07:01:48] <ghrust> 13rust/06auto 14cc4e707 15Huon Wilson: std::vec: correct .sort()'s doc-string and add some...
[07:01:48] <ghrust> 13rust/06auto 14b29e548 15Huon Wilson: std::vec: clarify & examplify more docs.
[07:01:48] <ghrust> 13rust/06auto 14e8ede00 15bors: auto merge of #11127 : huonw/rust/vec-docs, r=alexcrichton
[07:01:50] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[07:20:54] *** Quits: lpy (lpy@9EA5DA85.F09091A8.1348A864.IP) (Client exited)
[07:48:38] *** Joins: lpy (lpy@9EA5DA85.F09091A8.1348A864.IP)
[08:01:33] *** Joins: lpy_ (lpy@8D37022B.F09091A8.1348A864.IP)
[08:02:53] *** Quits: lpy (lpy@9EA5DA85.F09091A8.1348A864.IP) (Ping timeout)
[08:07:59] *** Joins: lpy (lpy@ABD12C3A.F09091A8.1348A864.IP)
[08:08:03] *** Quits: lpy_ (lpy@8D37022B.F09091A8.1348A864.IP) (Connection reset by peer)
[08:08:35] *** Joins: lpy_ (lpy@8D37022B.F09091A8.1348A864.IP)
[08:08:39] *** Quits: lpy (lpy@ABD12C3A.F09091A8.1348A864.IP) (Connection reset by peer)
[08:08:51] *** Quits: lpy_ (lpy@8D37022B.F09091A8.1348A864.IP) (Client exited)
[08:31:02] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:36:41] *** Joins: nuts (tii@822A8E7E.6AD15BF5.75D3BBDB.IP)
[08:42:25] *** Joins: eddyb (eddy@EE946B63.921A1753.FCAAE698.IP)
[08:46:56] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[09:01:57] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[09:01:57] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14e8ede00 to 14d975060: 02http://git.io/N3iJvQ
[09:01:57] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[09:06:52] *** Quits: eddyb (eddy@EE946B63.921A1753.FCAAE698.IP) (Ping timeout)
[09:09:42] *** Joins: eddyb (eddy@EE946B63.921A1753.FCAAE698.IP)
[09:12:10] <eddyb> cmr: I've got a better idea than shortcircuiting folding: if ref-count of the node you're folding is 1, modify it in place and return it. that wouldn't really make the AST mutable, more like reuse the allocation space for the new AST
[09:12:45] <eddyb> cmr: the problem with that is it doesn't play as well with @T as it does with Rc<T>
[09:24:38] <eddyb> but I might play around with counting a percentage of @T inside the folding with a refcount of 1
[09:31:59] <Luqman> yay, got trait object coercions working \o/
[09:45:47] <eddyb> Luqman: that sounds lovely :D
[09:48:36] <Yurume> yay, &T to &Trait?
[09:50:24] <eddyb> after things like this, we need something to tell us the unnecessary casts which can be removed now
[09:50:53] <eddyb> a rustfmt tool could actually perform the replacing
[10:06:14] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[10:13:58] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[10:14:57] *** Quits: nuts (tii@822A8E7E.6AD15BF5.75D3BBDB.IP) (Connection reset by peer)
[10:16:43] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[10:16:43] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/j0H2Pg
[10:16:43] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[10:21:38] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[10:21:38] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/GdHwmg
[10:21:38] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[10:21:39] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[10:21:39] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/K6vH1Q
[10:21:39] <ghrust> 13rust/06auto 1415fff69 15Alan Andrade: Avoid compiler error about glob imports in getopts example
[10:21:39] <ghrust> 13rust/06auto 14cd07144 15Alan Andrade: Remove features from librustdoc
[10:21:40] <ghrust> 13rust/06auto 1462eb531 15bors: auto merge of #11142 : alanandrade/rust/improve_opts_example, r=alexcrichton...
[10:21:42] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[10:48:29] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[10:54:38] *** Joins: glaebhoerl (glaebhoerl@3391DE98.E9231B2.A0179ACD.IP)
[11:16:39] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[11:16:39] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1462eb531 to 149477c49: 02http://git.io/N3iJvQ
[11:16:39] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[11:16:40] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[11:16:40] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/zyXtqQ
[11:16:40] <ghrust> 13rust/06auto 1483884f7 15Alex Crichton: Register new snapshots
[11:16:40] <ghrust> 13rust/06auto 1411ae957 15bors: auto merge of #11148 : alexcrichton/rust/snapshots, r=luqmana...
[11:16:40] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[11:31:53] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[11:31:53] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1411ae957 to 149477c49: 02http://git.io/N3iJvQ
[11:31:53] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[11:31:54] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[11:31:54] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/uHyCag
[11:31:54] <ghrust> 13rust/06auto 14cc4e707 15Huon Wilson: std::vec: correct .sort()'s doc-string and add some...
[11:31:54] <ghrust> 13rust/06auto 14b29e548 15Huon Wilson: std::vec: clarify & examplify more docs.
[11:31:54] <ghrust> 13rust/06auto 14c25f23e 15bors: auto merge of #11127 : huonw/rust/vec-docs, r=alexcrichton
[11:31:56] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[11:36:28] <eddyb> cmr: 200ms for a fold which could be just a bunch of assignments. hmpf
[12:00:21] *** Joins: gwty (gwtypc@DC91ACB1.EF01F9F5.E7DAB6F9.IP)
[12:10:34] *** kimundi is now known as zz_kimundi
[12:14:29] *** Joins: dbaupp (Thunderbir@moz-9759F6F.pa.nsw.optusnet.com.au)
[12:17:13] *** Joins: canhtak (canhtak@moz-1AC8943.wl.t.ulaval.ca)
[12:19:49] <eddyb> dbaupp: merry christmas! I guess. dunno what happens down there :/
[12:20:06] <eddyb> dbaupp: and I'm joyful because I want you to update the irsy graph :P
[12:21:45] *** Quits: dbaupp (Thunderbir@moz-9759F6F.pa.nsw.optusnet.com.au) (Ping timeout)
[12:22:10] *** Quits: gwty (gwtypc@DC91ACB1.EF01F9F5.E7DAB6F9.IP) (Ping timeout)
[12:26:25] *** Joins: dbaupp (Thunderbir@moz-CA54781.pa.nsw.optusnet.com.au)
[12:27:37] <dbaupp> i'm away from home, so can't update it, unfortunately... have to wait until friday/saturday. :(
[12:27:57] <eddyb> ah, don't worry then. have a good time :)
[12:31:50] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[12:31:50] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14c25f23e to 149477c49: 02http://git.io/N3iJvQ
[12:31:50] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[12:31:52] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[12:31:52] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/PYXETA
[12:31:52] <ghrust> 13rust/06auto 14cc4e707 15Huon Wilson: std::vec: correct .sort()'s doc-string and add some...
[12:31:52] <ghrust> 13rust/06auto 14b29e548 15Huon Wilson: std::vec: clarify & examplify more docs.
[12:31:53] <ghrust> 13rust/06auto 141f34f50 15bors: auto merge of #11127 : huonw/rust/vec-docs, r=alexcrichton
[12:31:55] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[12:33:37] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[12:50:39] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[12:52:13] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[13:06:20] *** Joins: summerlight_ (summerligh@327FC32B.2C956A45.501EFF44.IP)
[13:06:29] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[13:16:28] *** Quits: dbaupp (Thunderbir@moz-CA54781.pa.nsw.optusnet.com.au) (Ping timeout)
[13:20:38] *** Joins: dbaupp (Thunderbir@moz-26647894.pa.nsw.optusnet.com.au)
[13:41:39] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[13:41:39] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/PYXETA
[13:41:39] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[13:51:20] *** Quits: dbaupp (Thunderbir@moz-26647894.pa.nsw.optusnet.com.au) (Ping timeout)
[14:05:35] <eddyb> nmatsakis: any reason the ast_map can't be a vector? HashMap sounds like a waste of processing power to me
[14:37:58] *** Quits: canhtak (canhtak@moz-1AC8943.wl.t.ulaval.ca) (Quit: canhtak)
[15:09:05] <eddyb> haha, ast_map is really dumb
[15:09:22] <eddyb> it makes redundant clones of maps
[15:12:04] *** Quits: summerlight_ (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[16:15:52] *** Joins: lpy (lpy@12172131.F09091A8.1348A864.IP)
[16:19:29] *** Joins: gwty (gwtypc@9765A544.E5EF4F0B.27560D6E.IP)
[16:20:28] *** Quits: glaebhoerl (glaebhoerl@3391DE98.E9231B2.A0179ACD.IP) (Ping timeout)
[16:24:04] <eddyb> cmr, nmatsakis: it looks like ast_map currently doesn't map argument IDs for functions without bodies (like a trait method definition without a default implementation) - I doubt they're required in any way but I'm not sure what to do about them (if I map from fold_fn_decl, I'll also get all the function types)
[16:28:05] *** Joins: glaebhoerl (glaebhoerl@3391DE98.E9231B2.A0179ACD.IP)
[16:30:08] *** Quits: Kxepal (Miranda@moz-2DC4375A.pppoe.mtu-net.ru) (Ping timeout)
[16:30:26] *** Quits: glaebhoerl (glaebhoerl@3391DE98.E9231B2.A0179ACD.IP) (Quit: )
[16:30:28] *** Joins: ninechars (glaebhoerl@3391DE98.E9231B2.A0179ACD.IP)
[16:33:32] *** Joins: Kxepal (Miranda@moz-B5D86A4D.pppoe.mtu-net.ru)
[16:40:12] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[16:43:08] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[16:48:04] <eddyb> it should work now :D
[16:49:51] <eddyb> (it should also perform some operations twice as fast
[17:00:39] *** Quits: dcrewi (david@moz-AB8667CE.gyrae.net) (Ping timeout)
[17:03:20] *** zz_kimundi is now known as kimundi
[17:17:27] <eddyb> why on earth does trans fiddle so much with the paths?
[17:18:00] <eddyb> there's cloning all over the place. but it's out of scope (for now)
[17:23:30] *** Quits: lpy (lpy@12172131.F09091A8.1348A864.IP) (Quit: Leaving...)
[17:33:04] *** Quits: Yurume (Yurume@A826BD81.8A0DEF81.38747683.IP) (Ping timeout)
[17:41:19] *** Joins: Yurume (Yurume@A826BD81.8A0DEF81.38747683.IP)
[17:43:46] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[18:05:41] *** Joins: dcrewi (david@moz-AB8667CE.gyrae.net)
[18:16:26] *** Joins: nrc (ncameron@moz-A76F1825.cable.virginm.net)
[18:29:46] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[18:29:46] *** ChanServ sets mode: +ao pcwalton pcwalton
[18:29:58] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[18:30:09] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Connection reset by peer)
[18:30:41] <eddyb> benh: wait, it's not actually in the queue
[18:31:00] <benh> It's not in the queue, but it's waiting on another r+ from what I can tell?
[18:31:23] <eddyb> but then it would be in the queue *somewhere*
[18:31:44] <benh> ctrl-f for demuting, isn't that it?
[18:31:51] <eddyb> nope, that's a tiny one
[18:31:56] <benh> ooh
[18:31:59] <benh> sorry :(
[18:32:00] <eddyb> pcwalton: where's your huge PR?
[18:32:09] <pcwalton> not landed yet
[18:32:13] <pcwalton> working on it
[18:32:16] <pcwalton> it bitrotted
[18:32:27] <pcwalton> and the tests failed
[18:32:31] <benh> (This way I'll never get hired as a mozilla build engineer!)
[18:33:04] <eddyb> pcwalton: I was disowning the visitor (teehee) and I saw @mut everywhere :/
[18:33:22] <pcwalton> I haven't started libsyntax
[18:33:26] <pcwalton> was going to do that today
[18:33:30] <pcwalton> if the build passes
[18:33:33] <eddyb> oh. great. more cross-rebasing madness
[18:34:16] * benh wonders how projects with more contributors than rust ever get anything done
[18:34:34] <eddyb> benh: you were right...
[18:34:50] <eddyb> pcwalton: did you forget to update the title? https://github.com/mozilla/rust/pull/11058
[18:34:56] <pcwalton> the title is wrongn
[18:35:27] <eddyb> well, let's see if I can get this to compile
[18:36:39] <eddyb> it should shave ~200ms off the build, but that's too little to tell
[18:37:24] <eddyb> it might reduce memory usage because someone thought it would be a good idea to clone a ~[T] into a @~[T] and then *not share it*
[18:39:18] <eddyb> pcwalton: methinks all these closures across rustc are a deoptimization danger
[18:39:32] <pcwalton> closures?
[18:39:39] <eddyb> closures in structures
[18:39:39] <pcwalton> for example?
[18:40:06] <eddyb> I'm looking right now at rustc::util::common::LoopQueryVisitor
[18:41:06] <eddyb> this pattern is spread across librustc (and some of libsyntax. I was about to add two closures to ast_map::Ctx but realized a trait is safer for optimizations)
[18:41:21] <pcwalton> yeah, probably it's not quite as fast
[18:41:30] <pcwalton> I would be surprised if it makes much of a difference in rustc bootstrap time though
[18:41:33] *** Quits: dcrewi (david@moz-AB8667CE.gyrae.net) (Ping timeout)
[18:41:57] *** Joins: vfetwnuncszu (david@moz-AB8667CE.gyrae.net)
[18:42:12] *** vfetwnuncszu is now known as dcrewi
[18:42:57] <eddyb> now comes the fun part of fixing all the function definitions to use borrowed pointers instead of whatever the visitor method signature has. even though there was no reason to use anything other than borrowed pointers for these auxiliary functions
[18:43:04] <pcwalton> grrrr, somebody rewrote the crate store and kept all the @mut
[18:45:04] <pcwalton> now I have to redo that part of my patch set :(
[18:47:20] <eddyb> pcwalton: I hope you get that patch merged fast, I have only one commit to rebase
[18:47:29] <pcwalton> I'm working on it.
[18:48:04] <eddyb> as in, I don't want you to fix half your commits because of my @ -> & tinkering :P
[18:53:32] <eddyb> we need a lint which is trigger by using ~T or @T where &T would suffice
[18:53:35] <eddyb> *triggered
[18:55:53] <strcat> should remove auto-coercion to &mut and either make T -> &T coerce or drop ~T -> &T
[18:56:11] <strcat> I think coercion to immutable refs is fine, but not arbitrarily just for ~T
[18:56:36] <strcat> eddyb: we have a lint for that
[18:56:43] <eddyb> o_O
[18:56:43] <strcat> perhaps it doesn't handle the case you're looking at
[18:57:07] <eddyb> strcat: a function which has ~T or @T for an argument, but it only coerces it to &T
[18:58:28] <eddyb> that's a not a good explanation :/. what I have is a big bunch of functions taking @T for arguments, even though changing those to &T doesn't break anything
[18:58:38] <eddyb> (across rustc)
[19:01:37] <eddyb> heh, what did I break? error: mismatched types: expected `&[syntax::ast::trait_ref]` but found `std::option::Option<syntax::ast::trait_ref>` (expected vector but found enum std::option::Option)
[19:04:44] <eddyb> oh, I though a .iter().map(...).collect() contraption was pointless - but it was iterating an Option. 
[19:05:21] <strcat> lol
[19:05:50] <strcat> that's... weird
[19:06:04] <eddyb> strcat: it's creating an owned vector out of an Option
[19:06:34] <strcat> what does it do with the vector?
[19:06:46] <eddyb> it passes it to a function which wants a slice
[19:07:04] <eddyb> I'll replace it with a match and &[...]
[19:09:26] *** Quits: ninechars (glaebhoerl@3391DE98.E9231B2.A0179ACD.IP) (Ping timeout)
[19:09:27] *** Joins: glaebhoerl (glaebhoerl@3391DE98.E9231B2.A0179ACD.IP)
[19:22:24] <acrichto> ll acrichto
[19:22:30] <acrichto> whoops
[19:23:26] <eddyb> pcwalton: hmm, I'm replacing @T with &'a T (for AST objects T) inside visitor structs, does that sound sane?
[19:23:46] <pcwalton> fine as long as they don't need to insert things into the sat map
[19:23:47] <pcwalton> ast map
[19:24:19] <eddyb> nope, there's only two things using ast_map and I've converted them both to using ast_map::Ctx (which is now a folder)
[19:25:07] <eddyb> in both cases, I've merged a node indexer with the ast map visitor
[19:26:47] <pcwalton> ok
[19:29:57] *** Joins: brson (brson@E88F5EC0.CA971BF7.BBC5804F.IP)
[19:29:58] *** ChanServ sets mode: +qo brson brson
[19:30:18] <brson> acrichto: congrats on merging the new runtime code
[19:30:51] <acrichto> brson: thanks! first up next, #[boot]
[19:31:11] <brson> acrichto: can you send a message to the mailing list explaining the change, how to use the native runtime, start schedpools, etc?
[19:31:18] <acrichto> brson: sure
[19:31:31] <brson> maybe the boot change needs to go in first?
[19:31:50] <eddyb> what's #[boot]?
[19:31:53] <acrichto> I can talk about both
[19:32:00] <acrichto> what it itends to be and what it is right now
[19:32:08] <acrichto> #[boot] shouldn't be too hard of a patch (I think)
[19:32:15] <acrichto> eddyb: selection over what runtime you boot into
[19:32:56] <eddyb> sounds interesting
[19:34:08] <eddyb> acrichto: could bindings for platforms like SDL provide their own "runtime" support, wrapping libgreen, for example?
[19:34:39] <acrichto> indeed, that's what #[boot] will entail
[19:35:21] * eddyb is imagining the "event pump task" right now :D
[19:36:38] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[19:36:38] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02https://github.com/mozilla/rust/compare/1f34f50ce6a2...1f34f50ce6a2
[19:36:38] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[19:36:39] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[19:36:39] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/sgWqqA
[19:36:39] <ghrust> 13rust/06auto 14ab431a2 15Alex Crichton: Register new snapshots
[19:36:39] <ghrust> 13rust/06auto 14f74b8f0 15bors: auto merge of #11148 : alexcrichton/rust/snapshots, r=luqmana...
[19:36:39] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[19:41:35] <eddyb> great, my changes are turning into a borrowck failfest
[19:53:25] *** Joins: erickt1 (Adium@moz-6A641B4B.maine.res.rr.com)
[19:59:37] *** Quits: brson (brson@E88F5EC0.CA971BF7.BBC5804F.IP) (Ping timeout)
[20:04:47] *** kimundi is now known as zz_kimundi
[20:08:42] *** Quits: glaebhoerl (glaebhoerl@3391DE98.E9231B2.A0179ACD.IP) (Connection reset by peer)
[20:08:45] *** Joins: ninechars (glaebhoerl@3391DE98.E9231B2.A0179ACD.IP)
[20:10:15] *** Quits: blank_na1e (blank_name@78B04CD2.66204B68.6D228269.IP) (Quit: leaving)
[20:12:21] *** Joins: blank_name (blank_name@78B04CD2.66204B68.6D228269.IP)
[20:22:50] <eddyb> aaaaand I might have broken gather_moves. great :/
[20:25:55] *** Quits: eddyb (eddy@EE946B63.921A1753.FCAAE698.IP) (Ping timeout)
[20:30:57] *** Joins: b (b@moz-55CA322E.org)
[20:32:25] <carter> whats gather?
[20:32:46] *** Quits: erickt1 (Adium@moz-6A641B4B.maine.res.rr.com) (Quit: Leaving.)
[20:38:07] *** Joins: erickt1 (Adium@moz-6A641B4B.maine.res.rr.com)
[20:46:37] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[20:46:37] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/sgWqqA
[20:46:37] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[21:01:29] <pcwalton> takes a while to rebase 230 patches :)
[21:03:01] *** Quits: erickt1 (Adium@moz-6A641B4B.maine.res.rr.com) (Quit: Leaving.)
[21:06:43] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[21:06:43] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/bLKvjQ
[21:06:43] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[21:06:53] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[21:06:53] <ghrust> 01[13rust01] 15bors pushed 229 new commits to 06auto: 02http://git.io/cOaVZQ
[21:06:53] <ghrust> 13rust/06auto 14c943232 15Patrick Walton: librustc: Change `@mut Block` to `@Block`.
[21:06:53] <ghrust> 13rust/06auto 1409589aa 15Patrick Walton: librustc: De-`@mut` `FnCtxt`.
[21:06:53] <ghrust> 13rust/06auto 14fffbe7a 15Patrick Walton: librustc: De-`@mut` the type interner
[21:06:55] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[21:21:42] *** Joins: erickt1 (Adium@moz-6A641B4B.maine.res.rr.com)
[21:29:02] *** Quits: ninechars (glaebhoerl@3391DE98.E9231B2.A0179ACD.IP) (Quit: )
[21:29:09] *** Joins: ninechars (glaebhoerl@3391DE98.E9231B2.A0179ACD.IP)
[21:29:23] *** Quits: erickt1 (Adium@moz-6A641B4B.maine.res.rr.com) (Quit: Leaving.)
[21:30:44] *** Joins: erickt1 (Adium@moz-6A641B4B.maine.res.rr.com)
[21:40:39] *** Quits: carter (carter@moz-3589B90B.c.ircrelay.com) (Quit: IRCRelay - http://ircrelay.com)
[21:40:48] *** Joins: carter (carter@moz-3589B90B.c.ircrelay.com)
[21:47:47] *** Joins: brson (brson@E88F5EC0.CA971BF7.BBC5804F.IP)
[21:47:47] *** ChanServ sets mode: +qo brson brson
[21:49:53] *** Quits: erickt1 (Adium@moz-6A641B4B.maine.res.rr.com) (Quit: Leaving.)
[22:04:56] *** Quits: nrc (ncameron@moz-A76F1825.cable.virginm.net) (Ping timeout)
[22:09:51] *** Joins: erickt1 (Adium@moz-6A641B4B.maine.res.rr.com)
[22:15:28] *** Quits: erickt1 (Adium@moz-6A641B4B.maine.res.rr.com) (Quit: Leaving.)
[22:22:15] *** Joins: erickt1 (Adium@moz-6A641B4B.maine.res.rr.com)
[22:30:42] *** Quits: erickt1 (Adium@moz-6A641B4B.maine.res.rr.com) (Quit: Leaving.)
[22:30:52] *** Quits: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net) (Quit: I'm sure it's perfectly safe)
[22:50:29] *** Joins: erickt1 (Adium@moz-6A641B4B.maine.res.rr.com)
[22:50:36] *** Parts: erickt1 (Adium@moz-6A641B4B.maine.res.rr.com) ()
[22:55:28] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[22:56:01] *** Quits: brson (brson@E88F5EC0.CA971BF7.BBC5804F.IP) (Ping timeout)
[23:01:35] *** Quits: ninechars (glaebhoerl@3391DE98.E9231B2.A0179ACD.IP) (Ping timeout)
[23:05:57] *** Joins: canhtak (canhtak@moz-1AC8943.wl.t.ulaval.ca)
[23:09:25] *** Quits: Kxepal (Miranda@moz-B5D86A4D.pppoe.mtu-net.ru) (Quit: Kxepal)
[23:09:54] *** Joins: Kxepal (Miranda@moz-B5D86A4D.pppoe.mtu-net.ru)
[23:14:47] *** Quits: Kxepal (Miranda@moz-B5D86A4D.pppoe.mtu-net.ru) (Quit: Kxepal)
[23:14:57] *** Joins: Kxepal (Miranda@moz-B5D86A4D.pppoe.mtu-net.ru)
[23:56:17] *** zz_kimundi is now known as kimundi
[23:56:41] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[23:56:41] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14278a915 to 14f74b8f0: 02http://git.io/N3iJvQ
[23:56:41] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[23:56:47] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[23:56:47] <ghrust> 01[13rust01] 15bors pushed 229 new commits to 06auto: 02http://git.io/gTJcAQ
[23:56:47] <ghrust> 13rust/06auto 14c943232 15Patrick Walton: librustc: Change `@mut Block` to `@Block`.
[23:56:47] <ghrust> 13rust/06auto 1409589aa 15Patrick Walton: librustc: De-`@mut` `FnCtxt`.
[23:56:48] <ghrust> 13rust/06auto 14fffbe7a 15Patrick Walton: librustc: De-`@mut` the type interner
[23:56:50] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
