[00:00:10] <cmr> doomlord_: just libstd
[00:00:23] *** Joins: RMF (RMF@moz-A7EEA849.dsl.telepac.pt)
[00:00:44] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[00:00:49] <cmr> dbaupp: pushed
[00:01:10] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[00:01:11] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/yTAoGw
[00:01:11] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[00:02:24] *** Joins: sammykim (Mibbit@B4104EBB.3CC170B1.1E14B209.IP)
[00:04:42] *** Quits: skoizza (Mibbit@moz-5AD217F0.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[00:05:21] <strcat> Luqman: dbaupp: the intrinsic ABI is technically just the Rust ABI, though
[00:05:27] <strcat> not that it really matters
[00:06:05] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[00:06:05] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/sFryiQ
[00:06:05] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[00:06:07] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[00:06:07] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/GBjquA
[00:06:07] <ghrust> 13rust/06auto 14ada31bb 15Alex Crichton: Disallow char literals which should be escaped...
[00:06:07] <ghrust> 13rust/06auto 14ff8330f 15bors: auto merge of #9335 : alexcrichton/rust/issue-7945, r=thestinger...
[00:06:07] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[00:06:19] <cmr> dbaupp: Ugh, I don't understand what's going on
[00:06:25] <cmr> dbaupp: it's using 3-month-old commits
[00:06:33] <cmr> oh it's using that repo
[00:06:49] <dbaupp> cmr: I think the pulling is currently a no-op
[00:06:55] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[00:07:02] <cmr> dbaupp: I had it set to use the wrong repo
[00:07:07] <dbaupp> since it doesn't reset next_candidate
[00:07:32] <dbaupp> and so is continuing to just walk backwards from then, not starting again from HEAD.
[00:07:35] <cmr> There we go
[00:07:41] <cmr> dbaupp: ah!
[00:08:40] <cmr> dbaupp: resetting next_candidate to HEAD all the time wouldn't bork it would it, sinec it still checks already_built for the commit?
[00:08:46] <cmr> It'd just do a lot of unnecessary work
[00:08:50] <dbaupp> I assume so, yes
[00:08:59] <cmr> but I'm ok with that for now
[00:09:02] <dbaupp> yup
[00:09:22] <dbaupp> I've got some ideas for making it "proper", but I've gtg now, so that's a job for later.
[00:10:57] <tikue_> what trait needs to be implemented for AdditiveIterator to work?
[00:11:00] <tikue_> apparently not Num
[00:11:19] <dbaupp> tikue_: Add + Zero? (look at the defn in std::iter)
[00:11:47] <tikue_> dbaupp: but Num covers those
[00:11:57] *** Parts: benjamin (benjamin@moz-8A7708E6.members.linode.com) ()
[00:12:31] <tikue_> dbaupp: actually i think i see the problem. &T for T : Num doesn't work
[00:13:06] *** Quits: jgilbert_ (jgilbert@moz-7B0110AD.mv.mozilla.com) (Connection reset by peer)
[00:13:53] *** Joins: jgilbert_ (jgilbert@moz-7B0110AD.mv.mozilla.com)
[00:14:05] <brson> uh, rust-lang.org looks all wrong to me now
[00:14:11] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[00:14:17] <tikue_> brson: same, i thought it was intentional
[00:14:54] <acrichto> terrain, terrain, pull up, pull up
[00:15:01] <benh> Looks like the screenshot in that rust-www pull request to me
[00:15:17] <brson> benh: hm. that's not what it looks like here ...
[00:15:26] <tikue_> anyone know what the problem is here:
[00:15:28] <tikue_> rusti: fn to_t<T: Num>(n: uint) -> T { use std::num; num::cast(n) }
[00:15:28] -rusti- <anon>:7:55: 7:64 error: failed to find an implementation of trait std::num::NumCast for T
[00:15:29] -rusti- <anon>:7          fn to_t<T: Num>(n: uint) -> T { use std::num; num::cast(n) }
[00:15:29] -rusti-                                                                 ^~~~~~~~~
[00:15:29] -rusti- application terminated with error code 101
[00:15:38] <cmr> I see http://i.imgur.com/6Kz7BDh.png
[00:15:50] <tikue_> cmr: me too
[00:15:52] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Input/output error)
[00:15:53] <dbaupp> brson: possibly cache mismatches between CSS and HTML?
[00:15:56] <acrichto> I see what brson is seeing...
[00:16:09] <bjz> looks fine to me :/
[00:16:21] <cmr> tikue_: that's what it should look like :p
[00:16:30] <bjz> cmd+shift+R
[00:16:42] <tikue_> cmr: ok :P it surprised me at first because i couldn't find the docs button :P
[00:16:53] <bjz> cmr: no, it should have the links in the sidebar
[00:17:02] *** Joins: alejandro (alejandro@moz-348A144.hsd1.ga.comcast.net)
[00:17:06] <benh> https://github.com/graydon/rust-www/pull/8 !
[00:17:08] <cmr> bjz: no it shouldn't.
[00:17:10] <cmr> bjz: it was updated
[00:17:36] <bjz> looks kinda weird with it up the top
[00:17:49] <brson> I think i'm seeing the old html with the new style sheet
[00:17:57] <acrichto> brson: it may be a github thing, if I sit reloading the stylesheets is oscillating between the old and the new (some load balancing oddness?)
[00:18:13] <brson> maybe we can just wait it out
[00:18:30] <bjz> the spaceing on the whole nav element needs to be moved down abit, and to the left abit
[00:18:44] <bjz> (according to cmr's screenshot
[00:18:46] <bjz> )
[00:18:48] *** Joins: bt3ze (bt3ze@moz-3F0303DA.hsd1.va.comcast.net)
[00:18:55] *** alejandro is now known as acabrera
[00:19:00] *** Quits: exobit_ (foo@moz-90D1B547.nycmny.fios.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[00:19:38] <bjz> the logo could also do with a bump to the right
[00:19:55] <cmr> dbaupp: I'm going to bed, but I'll write a smarter script that does recent commits first tomorrow
[00:19:56] <bjz> (design nitpicks)
[00:21:03] <brson> strcat: does rust build on arch again?
[00:21:06] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Client exited)
[00:21:20] *** Parts: acabrera (alejandro@moz-348A144.hsd1.ga.comcast.net) ()
[00:21:34] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[00:21:50] <acrichto> rusti: version
[00:21:51] -rusti- "rustc 0.8 (c1b187d 2013-09-23 21:06:03 -0700)"
[00:23:04] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[00:23:56] <engla> acrichto: great changes to rustdoc, you're very quick
[00:24:15] <acrichto> engla: thanks :)
[00:24:33] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Ping timeout)
[00:24:39] <steveklabnik> is this still the right way to do a simple loop?
[00:24:42] <steveklabnik>         for [1,2,3].iter().advance |&num| {
[00:24:50] <steveklabnik> i forget where iterators are
[00:24:55] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Quit: Leaving)
[00:24:55] <Luqman> steveklabnik: in 0.7?
[00:25:01] <steveklabnik> Luqman: updating to HEAD
[00:25:02] <jeaye> for range(1, 3)
[00:25:06] <steveklabnik> that's code that was 0.7
[00:25:09] <engla> steveklabnik: syntax is now   for &num in [1,2,3].iter()   
[00:25:16] <steveklabnik> engla: ahhhh yes, thanks.
[00:25:26] <steveklabnik> jeaye: yeah, that'd be even better, too.
[00:25:26] <engla> but! in this particular case the vector must be in a variable for the lifetimes to check out
[00:25:27] <jeaye> Rather,: for num in range(1, 3)
[00:25:31] <jeaye> steveklabnik: ^
[00:25:31] *** Quits: riley (riley@8BA43816.9AA11D69.65DDFA89.IP) (Client exited)
[00:26:02] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[00:26:05] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[00:26:47] *** Joins: acabrera (alejandro@moz-348A144.hsd1.ga.comcast.net)
[00:26:58] <steveklabnik> jeaye: does range allow me to access the current number? 
[00:26:58] <steveklabnik>     for num in range(1, 3) |num| {
[00:27:04] <steveklabnik> and &num are both erroring out
[00:27:15] <engla> for num in range(1,3) { ... }
[00:27:19] <steveklabnik> oh duh
[00:27:20] *** Quits: brendan (brendaneic@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: brendan)
[00:27:21] <steveklabnik> it's num
[00:27:21] <engla> `num` is the pattern
[00:27:21] <steveklabnik> sorry
[00:27:22] <steveklabnik> yeah
[00:27:29] <steveklabnik> lol. sigh. too many things at once
[00:27:38] <engla> yeah
[00:27:38] <steveklabnik> that's so much more awesome than 0.7
[00:27:38] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[00:27:42] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[00:27:47] <steveklabnik> i had to handwave 'dont worry about the &'
[00:27:50] *** Parts: acabrera (alejandro@moz-348A144.hsd1.ga.comcast.net) ()
[00:28:05] <engla> well you still have to worry about &  if you use vector iterators
[00:28:13] <jeaye> rusti: for num in range(1, 3) { printfln!("{}", num); }
[00:28:14] -rusti- <anon>:7:34: 7:55 error: too many arguments to fmt!. found 2, expected 1
[00:28:14] -rusti- <anon>:7          for num in range(1, 3) { printfln!("{}", num); }
[00:28:14] -rusti-                                            ^~~~~~~~~~~~~~~~~~~~~
[00:28:14] -rusti- application terminated with error code 101
[00:28:22] <jeaye> rusti: for num in range(1, 3) { printfln!("%?", num); }
[00:28:23] -rusti- 1
[00:28:23] -rusti- 2
[00:28:23] -rusti- ()
[00:28:32] <steveklabnik> engla: sure, in this case it's just for fizzbuzz
[00:28:52] <steveklabnik> jeaye: is to_str() more or less idiomatic than printfln?
[00:28:56] <steveklabnik>         println(num.to_str())
[00:29:10] <engla> printfln! is on the kill list
[00:29:17] <steveklabnik> cool
[00:29:20] <jeaye> engla: Oh?
[00:29:27] <jeaye> To be replaced with?
[00:29:28] <engla> println! is taking over :) with the new format syntax
[00:29:32] <jeaye> ah
[00:29:36] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[00:29:43] <engla> rusti: println!("{} {}", 3, "hi")
[00:29:44] -rusti- 3 hi
[00:29:44] -rusti- ()
[00:30:06] <acrichto> I need to remove printf/printfln
[00:30:44] <engla> that's a big job
[00:30:54] <acrichto> I did all of libstd and then hit an ICE :(
[00:30:56] <pcwalton> does anyone remember whether vtable or whether ptr comes first in a trait pair?
[00:30:59] <tikue_> rusti: use std::iter::AdditiveIterator; let v = [1, 2, 3]; v.iter().sum() // wat
[00:31:00] -rusti- <anon>:7:61: 8:5 error: failed to find an implementation of trait std::ops::Add<&int,&int> for &int
[00:31:00] -rusti- <anon>:7          use std::iter::AdditiveIterator; let v = [1, 2, 3]; v.iter().sum() // wat
[00:31:00] -rusti- <anon>:8     };
[00:31:00] -rusti- application terminated with error code 101
[00:31:07] <acrichto> pcwalton: first
[00:31:14] <tikue_> sum() is broken
[00:31:16] <pcwalton> acrichto: which one?
[00:31:22] <pcwalton> vtable?
[00:31:27] <engla> tikue_: sorry, you need an iterator that yields int, not &int
[00:31:27] <acrichto> pcwalton: (vtable, ptr)
[00:31:32] <pcwalton> ok, I got it backwards
[00:31:33] <pcwalton> thanks
[00:31:35] <acrichto> pcwalton: oh whoops only read half the question
[00:31:40] <engla> tikue_: for example v.iter().map(|&x| x)
[00:31:47] *** Joins: Larry (larryfox@26EE99DC.88C61CC9.ECED8BE3.IP)
[00:32:03] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[00:32:07] <tikue_> rusti: /* engla */ (&1u).add(&2)
[00:32:07] -rusti- 3u
[00:32:13] <tikue_> i don't see why 
[00:33:03] <engla> because it only has Iterator<T> and requires T: Add<T,T>.  It can't "dereference" the type T
[00:33:14] <engla> T is &int herer
[00:34:01] *** Quits: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: ChatZilla 0.9.90.1-rdmsoft [XULRunner 22.0/20130619132145])
[00:34:18] *** Joins: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP)
[00:34:19] <tikue_> no way to special case that?
[00:34:24] <tikue_> or something, idk :\
[00:34:33] <tikue_> it just kinda sucks
[00:34:39] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[00:34:57] <tikue_> engla: map(|&x| x) doesn't work with generics
[00:35:04] <engla> I don't know. The iterator API is based around just treating every iterator the same, it's an Iterator<T>  and T can be a borrowed pointer or something else
[00:35:05] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[00:35:18] <engla> yes I know tikue_. Then you have to use Clone or another way to work around it
[00:35:27] <tikue_> yeah
[00:36:04] *** Quits: sk (sk@DA137125.E993C7C3.78DD174B.IP) (Quit: Leaving)
[00:36:05] <engla> maybe sum() is broken in that it assumes the sum will be of the same type as the elements of the iterator
[00:36:12] <engla> but I don't think rust can express anything else
[00:36:20] <engla> maybe?
[00:36:25] * engla goes experimenting
[00:37:14] *** Quits: alp (alp@moz-D1CEC204.com) (Ping timeout)
[00:37:31] *** Joins: alp (alp@moz-D1CEC204.com)
[00:38:19] <tikue_> engla: yeah IDK, I see what you're saying but it'd be nice if there were sum_ref or something
[00:38:52] *** Quits: steveklabnik (steveklabn@moz-E61C28C3.lsan.ca.megapath.net) (Ping timeout)
[00:39:47] <engla> I guess
[00:39:51] <engla> there is .fold()
[00:39:56] *** Joins: Guest__ (foo@moz-90D1B547.nycmny.fios.verizon.net)
[00:41:26] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[00:41:32] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[00:41:39] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[00:42:37] <tikue_> engla: couldn't sum() just do fold?
[00:42:39] <engla> tikue_: https://gist.github.com/anonymous/1b3a0744ff8cac5a8e6b you can add it in your own code
[00:42:45] <tikue_> afaik fold doesn't have this problem
[00:42:46] <engla> sum uses .fold yes
[00:42:55] <engla> fold is generic
[00:43:03] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[00:43:18] <engla> .sum() is specialized for  A + A â†’ A  and you want &A + &A â†’ A
[00:43:56] <engla> the only difference between .sum() and .sum_ref() is the *asterisk in this line: self.fold(zero, |s, x| s + *x)
[00:43:57] <tikue_> mhm
[00:44:01] <engla> and the types in the impl
[00:44:07] <tikue_> &A &A is so common, though
[00:44:10] * pcwalton wonders what the best way to make newtype structs cross crate inlined is
[00:44:21] <tikue_> sum() feels mildly crippled, you know?
[00:44:43] <engla> if you say that loud enough I'm sure strcat will remove .sum()
[00:44:54] <acrichto> rusti: if cfg!(foo) { format!("test"); }
[00:44:55] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[00:44:55] -rusti- ()
[00:45:30] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[00:48:23] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[00:48:27] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[00:49:10] <acrichto> pcwalton: do you remember where in trans the "if false {}" optimization is?
[00:49:20] <pcwalton> acrichto: I think it's wherever if exprs get trans'd
[00:49:49] <acrichto> oh it's camel case now
[00:50:59] <acrichto> pcwalton: is there a reason that this wasn't implemented as a compiler pass?
[00:51:05] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[00:51:05] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14ff8330f to 14a7d68ad: 02http://git.io/N3iJvQ
[00:51:05] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[00:51:06] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[00:51:06] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/V5DKhg
[00:51:06] <ghrust> 13rust/06auto 145867bbd 15Daniel Micay: mark functions internal if not building a library...
[00:51:06] <ghrust> 13rust/06auto 14893ba18 15bors: auto merge of #9474 : thestinger/rust/internal, r=alexcrichton...
[00:51:07] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[00:51:12] <pcwalton> how would it be a compiler pass?
[00:51:25] <acrichto> oh wait yeah we don't fold
[00:51:59] <acrichto> items inside of if false {} aren't translated, then encode fails b/c it wants to encode the symbol
[00:52:05] <pcwalton> hmm
[00:52:13] <acrichto> I'd rather not encode the logic twice...
[00:53:33] <engla> acrichto: I guess it was to cut out debug conditional code as soon as possible
[00:54:16] <acrichto> engla: yeah it's a good codegen optimization that I don't want to lose, but the visitor for the Encoder has to know to not recurse into those if blocks
[00:57:14] *** Joins: sglez (Mibbit@E19C1D7A.4B605195.A208C5.IP)
[00:57:15] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[00:59:24] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[01:01:11] *** Parts: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net) ()
[01:01:37] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Client exited)
[01:02:11] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[01:02:13] *** kimundi is now known as zz_kimundi
[01:03:45] *** Joins: Ralith (ralith@moz-36466B9F.customer.broadstripe.net)
[01:04:22] <elly> `/w 20
[01:04:24] <elly> argh.
[01:04:38] *** Quits: eevee (eevee@moz-BDB33F35.evrt.wa.frontiernet.net) (Ping timeout)
[01:06:16] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[01:07:04] <cmr> http://www.drdobbs.com/jvm/quantities-and-units-in-python/240161101
[01:07:09] *** Quits: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP) (Ping timeout)
[01:07:14] <cmr> Pretty interesting, it'd be cool to have something like those in Rust
[01:07:29] <cmr> (I think F# has something similar in the language)
[01:07:58] *** Joins: eevee (eevee@moz-59EA9CA5.evrt.wa.frontiernet.net)
[01:08:24] *** Joins: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP)
[01:08:58] *** Joins: riley (riley@moz-E40BCEED.hsd1.ca.comcast.net)
[01:09:30] *** Joins: OSstudent (Mibbit@moz-5AF9AA47.hsd1.va.comcast.net)
[01:09:39] <OSstudent> Is there a way to output sounds in rust?
[01:09:53] <cmr> OSstudent: see #rust-gamedev, you left before anyone could answer :|
[01:10:04] <cmr> https://botbot.me/mozilla/rust-gamedev/
[01:10:26] *** Quits: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net) (Client exited)
[01:10:55] <strcat> brson: yeah, it builds again :)
[01:11:20] <strcat> brson: it actually never broke on i686, just the 64-bit snapshot
[01:11:27] * strcat didn't realize the 32-bit one was still going
[01:11:59] *** Joins: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net)
[01:12:27] *** nrc is now known as nrc|lunch
[01:12:58] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[01:13:04] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[01:13:48] *** Joins: hoverbear (andrew@moz-86FCBF4B.gv.shawcable.net)
[01:14:24] <bogen> warning: unnecessary allocation, the sigil can be removed??? What does that mean? I'm adding a macro that returns a ~str to a ~"literal"
[01:14:40] <cmr> bogen: it means you have an extra ~, which is doing an extra malloc
[01:14:49] <bogen> oh, I think I know what it means, that I can remove the ~
[01:15:40] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[01:15:44] <strcat> rusti: version
[01:15:45] -rusti- "rustc 0.8 (e3624ed 2013-09-24 11:46:02 -0700)"
[01:15:51] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[01:15:56] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[01:16:10] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[01:16:13] *** Joins: sk (sk@61A494B3.BA40E8A.AAC02D62.IP)
[01:16:26] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[01:16:32] <bogen> cmr: yeah, I understand
[01:17:12] <bogen> can a macro be defined that does not need the () ?  (for when the macro is not passed anything)
[01:17:18] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Connection reset by peer)
[01:17:21] <cmr> bogen: no
[01:17:30] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[01:17:34] <bogen> ok, no biggie
[01:17:38] *** Quits: sglez (Mibbit@E19C1D7A.4B605195.A208C5.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[01:17:54] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[01:18:23] *** Joins: ChrisMorgan (chris@moz-80C7F64F.its.monash.edu.au)
[01:18:26] *** Quits: jgilbert_ (jgilbert@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[01:18:34] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[01:18:47] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[01:19:33] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[01:19:44] *** Joins: steveklabnik (steveklabn@moz-F93A90D2.public.wayport.net)
[01:19:48] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[01:21:24] *** Joins: carllerche (carllerche@moz-B01C97E1.hsd1.or.comcast.net)
[01:21:49] <sfackler> you can define a macro that uses {} (and maybe []) instead of ()
[01:21:49] <steveklabnik> did we ever decide on new names for ~@&?
[01:21:51] *** Joins: maik (maik@moz-9F5FA6A1.dip0.t-ipconnect.de)
[01:22:03] <steveklabnik> and is 'box' a sorta deprecated term now? I haven't seen people use it in a while
[01:22:17] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[01:22:23] <cmr> At the moment, ~ is an owned pointer, @ is a managed pointer, and & is a borrowed pointer
[01:22:29] <steveklabnik> sweet
[01:22:29] <cmr> No boxes
[01:22:33] <steveklabnik> that is what i generally say
[01:22:36] <steveklabnik> cleaning up some text 
[01:22:39] <steveklabnik> :)
[01:22:47] <steveklabnik> if i add another chapter to r4r, what should it be on?
[01:22:48] <kmc> I like pcwalton's proposal to use "reference" for &
[01:22:51] <cmr> brson wants to do another renaming, so does strcat, and so do I!
[01:23:05] <kmc> also I would say that ~ isn't an *owned* pointer it's an *owning* pointer
[01:23:24] <kmc> sometimes you want to distinguish the owning pointer from the owned box it points to
[01:23:25] <SiegeLord> rusti: struct A { a : A }
[01:23:25] -rusti- <anon>:7:9: 7:27 error: this type cannot be instantiated without an instance of itself; consider using `Option<main::A>`
[01:23:26] -rusti- <anon>:7          struct A { a : A }
[01:23:26] -rusti-                   ^~~~~~~~~~~~~~~~~~
[01:23:26] -rusti- error: aborting due to previous error
[01:23:26] -rusti- application terminated with error code 101
[01:23:42] <strcat> kmc: agreed
[01:23:48] <cmr> What's the owned box?
[01:23:53] <strcat> where the value is
[01:23:56] <kmc> a chunk of memory allocated in the exchange heap
[01:24:02] <pcwalton> kmc++
[01:24:06] <strcat> pointers are always owned, what they point at might not be
[01:24:17] <strcat> so it causes confusion
[01:24:24] <cmr> I'm certainly confused now.
[01:24:26] <pcwalton> "owning pointer" just makes so much more sense to me than "owned pointer"
[01:24:34] <cmr> Every time I think I "get" the memory model, it turns out I don't :P
[01:24:37] <kmc> objects allocated on the stack are "owned" too
[01:24:38] <steveklabnik> heh
[01:24:39] <strcat> cmr: if you have &T, you don't own what it points at
[01:24:48] <strcat> you do own the &T pointer itself, you can set it to another pointer
[01:25:34] <tikue_> wait, "reference" ? so every time we'd type &T, it'll be reference<T>?
[01:25:39] <strcat> no
[01:25:46] <tikue_> ohhh
[01:25:48] <tikue_> just the "word"
[01:25:48] <tikue_> ?
[01:25:52] <strcat> we'd called it 'reference' rather than 'borrowed pointer' in the docs
[01:25:57] <tikue_> yeah, that's nice
[01:25:57] <strcat> reference, mutable reference
[01:26:17] <cmr> So, as an example, struct Foo<'self> { x: &'self Bar }, and we have a Foo value, we own the &Bar, so we can do somefoo.x = y, but not *somefoo.x = y, since we don't own the other end of the pointer?
[01:26:19] *** Quits: kseo (kseo@338DE5BC.4166765B.485A6DF.IP) (Client exited)
[01:26:23] <kmc> "reference to mutable" really
[01:26:24] *** Joins: kseo (kseo@338DE5BC.4166765B.485A6DF.IP)
[01:26:31] *** Joins: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[01:26:33] <kmc> and "reference to immutable" (capturing the fact that nobody *else* can mutate it)
[01:26:53] <kmc> cmr: you'd need &mut Foo to assign a Foo field
[01:26:56] *** Quits: Larry (larryfox@26EE99DC.88C61CC9.ECED8BE3.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[01:27:01] <kmc> er, misread maybe
[01:27:03] <acrichto> pcwalton: r? https://github.com/mozilla/rust/pull/9484
[01:27:04] <strcat> kmc: unless it's not Freeze ;p
[01:27:06] <cmr> you definitely did :p
[01:27:11] <cmr> We have a regular Foo
[01:27:11] <kmc> ok
[01:27:28] <kmc> yeah I see
[01:27:58] <kmc> note that C++ wouldn't let you do somefoo.x = y, because references aren't really first class in C++; they're always dereferenced on assign
[01:28:00] <cmr> Ok, so I understand the memory model, just not all the terms... I think.
[01:28:11] *** Quits: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[01:28:12] <kmc> (I mean it would let you, but it would mean something different, would invoke operator= on the existing x)
[01:28:12] <strcat> we aren't consistent with the terms
[01:28:18] <aatch> cmr, don't worry, the terms keep changing
[01:28:50] <cmr> Personally I thought the slot thing was fairly simple
[01:28:53] <strcat> _ patterns are really broken
[01:29:05] <kmc> it was a big lightbulb moment for me when I understood C++ well enough to know why it has such things as copy constructors and operator= and no other language does
[01:29:07] <steveklabnik> it'd be really good to get those terms consistent sometime soon
[01:29:32] <cmr> steveklabnik: So, another chapter, hmm
[01:29:38] *** Joins: mark_edward (quassel@moz-DCB0B750.lightspeed.cicril.sbcglobal.net)
[01:29:45] <strcat> kmc: and move constructors now :P
[01:29:59] <steveklabnik> cmr: yeah, no commmitment, but i may have somet ime
[01:30:00] <steveklabnik> time
[01:30:05] <cmr> steveklabnik: Maybe a chapter on how to use newrt, with networking as the motivating example?
[01:30:13] *** Quits: maik (maik@moz-9F5FA6A1.dip0.t-ipconnect.de) (Ping timeout)
[01:30:51] <steveklabnik> cmr: that might be good, since i've been playing with tcp
[01:30:57] <steveklabnik> explain my redis fun stuff
[01:31:01] <pcwalton> it would be nice if the borrow flag didn't involve 'mov rax,qword 13835058055282163712'
[01:31:14] <pcwalton> that's kind of a lot of bytes necessary to encode the instructions necessary to set the borrow flag
[01:31:39] <acrichto> rusti: format!("{:x}", 13835058055282163712)
[01:31:40] -rusti- ~"c000000000000000"
[01:31:46] <strcat> heh
[01:31:56] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[01:32:18] * pcwalton wishes LLVM converted switches into loads of a constant array where possible
[01:32:41] <pcwalton> I might implement that optimization except that it comes from netsurf<->rust-css conversions and we need to just remove those
[01:33:24] <kmc> there's a cool example of LLVM or clang compiling ((c == ' ') || (c == '\t') || (c == '\n') || (c == '\r')) into a lookup in a 64-bit table as an immediate
[01:33:29] <strcat> pcwalton: the file doing switch lowering is only 300 lines, easier than fixing things on rust's end :P
[01:33:38] <kmc> I think it's a fairly special purpose optimization pass in clang
[01:33:45] <strcat> and maybe it could be taking advantage of the range asserts we put on enum discriminants more than it does
[01:33:47] <pcwalton> kmc: oh, it already does that?
[01:33:53] <pcwalton> it must not be kicking in, I guess
[01:34:10] <kmc> well if I remember correctly that it's in clang and not LLVM...
[01:34:11] <pcwalton> it would help servo reflow
[01:34:16] <pcwalton> what
[01:34:21] <strcat> pcwalton: http://llvm.org/docs/doxygen/html/LowerSwitch_8cpp_source.html that seems to be all of it
[01:34:34] <pcwalton> since when is clang anything close to resembling the right place to implement that optimization
[01:34:39] * pcwalton sighs at upstream LLVM
[01:34:45] <kmc> I could be remembering wrong, as well
[01:35:07] * strcat just wishes they'd fix mergefunc ;p
[01:35:30] <pcwalton> strcat: the comment seems to indicate that pass doesn't run if the target implements switch?
[01:35:57] <strcat> pcwalton: I'm not sure, I think this handles small ones
[01:36:10] * kmc -> afk
[01:36:12] <strcat> there's another file dispatching to this one
[01:36:43] <pcwalton> in any case, I wish LLVM wouldn't implement important optimizations in clang
[01:36:48] <pcwalton> like devirtualization
[01:36:55] <pcwalton> it doesn't help us at all
[01:37:20] <strcat> I wish they'd let us return/pass large aggregates by-value and handle it sanely :s
[01:37:23] *** Quits: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP) (Ping timeout)
[01:37:23] *** Joins: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com)
[01:37:24] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[01:37:27] <strcat> it's target dependent and only implemented properly on x86
[01:37:31] <pcwalton> yes
[01:37:37] <pcwalton> LLVM puts too much in clang
[01:37:44] <pcwalton> I mean, gcc is probably worse
[01:37:49] <strcat> clang does that because x86_64 has special requirements based on types
[01:37:52] <strcat> like complex numbers
[01:38:02] <pcwalton> oh yeah, right
[01:38:05] *** Joins: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP)
[01:38:05] <strcat> and LLVM is mostly just clang's backend ;p
[01:38:08] *** Quits: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net) (Ping timeout)
[01:40:11] *** Quits: fyolnish (fyolnish@moz-37DC49A0.uqwimax.jp) (Client exited)
[01:41:29] *** Joins: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net)
[01:41:38] <tikue_> is stackless python still a thing?
[01:41:44] <strcat> pcwalton: https://github.com/llvm-mirror/llvm/commit/6629210aaf9d2e4fcbecc80b35f72108304da4b4 *sigh*
[01:41:45] <tikue_> s/a thing/supported
[01:41:59] <strcat> tikue_: yes
[01:42:05] <pcwalton> yeah
[01:42:07] <strcat> tikue_: pypy implements it too
[01:42:13] <tikue_> strcat: oh really? wow, didn't realize that
[01:42:20] <tikue_> awesome
[01:42:31] <pcwalton> let's just name all our functions _Znaj
[01:42:33] <strcat> I'm not sure if they can JIT stackless python yet
[01:42:41] <pcwalton> so they are eligible for Super Awesome LLVM Optimizations
[01:43:24] <strcat> pcwalton: they added this to help std::vector, would be really nice if it was general...
[01:43:43] * strcat saw them talking about it on #llvm
[01:44:01] *** Quits: azakai (alon@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[01:44:03] *** Quits: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP) (Ping timeout)
[01:44:05] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[01:44:36] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[01:44:57] *** Joins: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP)
[01:45:38] <steveklabnik> going through all this code make sme really appreciate how much better the compiler errors have gotten
[01:45:49] <cmr> steveklabnik: Yup!
[01:45:50] <cmr> The docs, too.
[01:45:51] *** Quits: OSstudent (Mibbit@moz-5AF9AA47.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[01:45:56] *** Joins: mudpit (Mibbit@moz-5AF9AA47.hsd1.va.comcast.net)
[01:46:03] <cmr> Your initial lamentation on the poor state of everything isn't *as* applicable :p
[01:47:05] <mudpit> is there a way to sleep in rust, say for about 0.5 seconds?
[01:47:34] <strcat> mudpit: std::rt::io::timer
[01:48:01] <cmr> Specifically, std::rt::io::timer::sleep(500)
[01:48:32] <steveklabnik> yeah, both, cmr
[01:48:36] <steveklabnik> are there any plans to move 
[01:48:40] <steveklabnik> graydon/rust-www
[01:48:44] <steveklabnik> into the mozilla org?
[01:48:58] <strcat> brson mentioned possibly making a rust org
[01:49:07] <cmr> A rust org would be nice.
[01:49:11] <strcat> the mozilla org has too many repos
[01:49:12] <steveklabnik> that too
[01:49:17] <mudpit> cmr is that for the new master of rust? I'm still using 0.7
[01:49:17] <steveklabnik> there really should be a rust org
[01:49:31] <steveklabnik> https://github.com/rust :(
[01:49:40] <steveklabnik>  https://github.com/rustlang is open
[01:49:50] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[01:49:54] <cmr> mudpit: ah, yeah. in 0.7 your only option is std::libc::sleep, but it only takes integers.
[01:50:04] <cmr> steveklabnik: I imagine we'd use rust-lang, like the homepage
[01:50:09] <steveklabnik> yeah
[01:50:17] <cmr> Which... already exists, apparently.
[01:50:22] <cmr> I wonder who made it?
[01:50:35] <cmr> brson: do you know who owns  https://github.com/rust-lang ?
[01:50:43] <steveklabnik> someone may be squatting it
[01:50:48] <steveklabnik> github is pretty reasonable about giving them up
[01:50:56] <cmr> It didn't exist the last time I looked at making a rust org
[01:51:11] <engla> brson mentioned that github acct so it could be him
[01:51:14] <klutzy> github group for sale
[01:51:15] <strcat> pcwalton: marking stuff internal helps more than I thought it would
[01:51:21] <strcat> it lets it eliminate dead params
[01:51:31] <strcat> all those env ptr slots
[01:51:33] <strcat> ;p
[01:51:36] <pcwalton> oh, awesome
[01:51:39] <cmr> ohhh
[01:51:46] <cmr> it eliminates the env ptrs?
[01:51:51] <steveklabnik> Basically, idiomatic Rust code will use owned pointers for data, and function
[01:51:51] <steveklabnik> signatures should use borrowed pointers. By the time you need managed pointers,
[01:51:51] <steveklabnik> you'll be much better at Rust, and you'll know it's time.
[01:51:55] <steveklabnik> ^^^^ r?
[01:52:02] <steveklabnik> anything else i should say on that topic?
[01:52:10] <cmr> steveklabnik: idiomatic rust uses values, rather than ~T
[01:52:12] <steveklabnik> 'which pointer to use then'
[01:52:14] <strcat> cmr: if the function is defined in the executable crate
[01:52:14] <steveklabnik> ah!
[01:52:17] <tikue_> steveklabnik: what cmr said
[01:52:27] <strcat> cmr: never in a library, even for private functions, unless they're generic
[01:52:27] <steveklabnik> i'm thinking explicitly in the context of 'i need a pointer'
[01:52:27] *** Quits: tefter (tefter@B5D119DC.B856A0A1.73804765.IP) (Quit: Leaving)
[01:52:38] <steveklabnik> but that'd be good to point out
[01:52:39] <tikue_> steveklabnik: owned pointers are usually for self-referential data structures
[01:52:48] <strcat> cmr: internal linkage -> deadargelim and argpromotion work
[01:52:59] <strcat> didn't really think about it before
[01:53:10] <steveklabnik> tikue_: interesting. hmmm
[01:53:10] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[01:53:11] <cmr> strcat: well, I guess it'll help a bit.
[01:53:12] <strcat> argpromotion turns &int to int
[01:53:58] <doomlord_>  argpromotion, is that something new/different to auto-dereferencing of pointers with .
[01:54:01] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[01:54:38] <doomlord_> maybe a generalization..
[01:54:46] <strcat> it's an LLVM optimization pass
[01:55:02] <strcat> it looks over all the internal functions that weren't inlined and alters their signatures
[01:55:21] <steveklabnik> round two:
[01:55:21] <strcat> so if they take a small object by-ref and don't depend on it being a ref, it can promote all the calls to by-value
[01:55:22] <steveklabnik> Basically, idiomatic Rust code will... not use pointers at all, and just use
[01:55:23] <steveklabnik> values. If you need a pointer, use owned pointers, as they won't involve the
[01:55:23] <steveklabnik> GC. If you're writing a function that needs to take a pointer, use borrowed
[01:55:24] <steveklabnik> pointers, rather than being specific, and once you need managed pointers,
[01:55:27] <steveklabnik> you'll know.
[01:55:32] <steveklabnik> better?
[01:55:45] <strcat> steveklabnik: well, you only *need* an owned pointer to make a recursive data type
[01:55:58] <steveklabnik> lots of stdlib stuff takes owned pointers though
[01:56:01] <strcat> otherwise it's a premature (de-)optimization
[01:56:07] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[01:56:14] <strcat> steveklabnik: not really, ~str/~[T] aren't ~T
[01:56:16] <engla> strcat: so rustc doesn't benefit from whole program compilation, because all of it is in the librustc crate then(?)
[01:56:19] <steveklabnik> i guess that's the part that i'm confused about.
[01:56:26] <steveklabnik> what's the difference between ~str and ~T?
[01:56:38] <strcat> engla: right, but new programs can
[01:56:40] <cmr> strcat: they're useful for transfering ownership into C libraries too, but that's a fringe use
[01:56:54] <steveklabnik> (just going to go into extreme newbie mode here for maximum learn, i think i have some idea)
[01:56:58] <strcat> steveklabnik: ~str is a resizable string type, it's essentially unrelated to ~T except sharing the same allocator and being owned
[01:57:36] <steveklabnik> isn't str a T?
[01:57:39] <cmr> steveklabnik: nope.
[01:57:41] <strcat> no, str isn't a type in rust
[01:57:42] <steveklabnik> huh.
[01:57:45] <cmr> rusti: let x: str = "foo";
[01:57:48] -rusti- pastebinned 8 lines of output: http://sprunge.us/TJEB
[01:57:54] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[01:57:54] *** ChanServ sets mode: +ao brson brson
[01:57:55] <strcat> steveklabnik: unboxed strings/vectors/traits/closures don't exist in the type system
[01:57:56] <steveklabnik> right, it usually yells
[01:57:57] <tikue_> steveklabnik: (confuses me too)
[01:58:05] <strcat> steveklabnik: because their size isn't statically known
[01:58:12] <pcwalton> they might in the future!
[01:58:16] <steveklabnik> so all ~Ts must have a non- ~ T?
[01:58:43] <engla> the vector is a special case. A string is just a vector wrapper but with a builtin name as ~str
[01:59:01] <engla> steveklabnik: no to be clear, any type can be ~T even ~~~int.
[01:59:05] <strcat> steveklabnik: &[T] and ~[T] are just special, they aren't a borrowed/owning pointer
[01:59:12] <steveklabnik> ugh
[01:59:12] <strcat> &[T] is parsed as a slice, there's no [T] type
[01:59:17] <steveklabnik> that is gross. but makes sense i guess
[01:59:33] <strcat> pcwalton: slices wouldn't ever be dynamically sized though
[01:59:47] <pcwalton> hmm
[01:59:49] <pcwalton> I guess
[01:59:51] <strcat> and imo vectors should be stored like C++ does it, so zero-size ones don't allocate
[02:00:11] <pcwalton> I don't think that's enough of a reason to give up DSTs though
[02:00:12] <pcwalton> for this reason
[02:00:17] <pcwalton> not having dynamically sized types is just gross
[02:00:24] <engla> the autoderef example was indeed gross. :-)  let s = ~~~&~&@mut@@@~"hi"; s.as_slice()
[02:00:29] <strcat> pcwalton: yeah, but I don't think vectors need to necessarily be DST
[02:00:33] <cmr> I still don't really understand what DSTs are or how they would work.
[02:00:42] <strcat> pcwalton: @ vectors don't benefit from having a capacity - they're fixed-size after allocation
[02:00:45] <pcwalton> well, if vectors aren't DST then steveklabnik's objection applies
[02:00:49] <cmr> Where does the size come from? Does it fail?
[02:00:54] <strcat> &[T] also has a length, it's not at all &T
[02:01:04] <strcat> so I don't really see how it works for vectors
[02:01:05] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[02:01:05] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/V5DKhg
[02:01:05] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[02:01:08] <cmr> s/Does/Can/
[02:01:14] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[02:01:23] <pcwalton> maybe slices shouldn't be notated &[T] at all
[02:01:36] <strcat> pcwalton: maybe vectors/strings shouldn't be :)
[02:01:59] <strcat> traits should be - so DST applies to them
[02:02:34] <strcat> being able to do Rc<Trait> would be awesome
[02:02:41] <pcwalton> yeah, it's necessary
[02:02:52] <pcwalton> it would be nice to be able to Rc<[Whatever]> though
[02:02:58] <pcwalton> otherwise you need two Rc types
[02:03:02] <pcwalton> one for regular things and one vectors
[02:03:05] <pcwalton> like new and new[]
[02:03:17] *** Quits: bt3ze (bt3ze@moz-3F0303DA.hsd1.va.comcast.net) (Ping timeout)
[02:03:34] *** Quits: ceninan (ceninan@B5874CE8.338127AB.BB9C2183.IP) (Ping timeout)
[02:03:35] <strcat> @/Rc vectors is just an optimization though
[02:03:42] <pcwalton> but an important one
[02:03:48] <strcat> we have something like 4 @ vectors in the codebase ;p
[02:04:01] <steveklabnik> so.... what _should_ I be saying? This is at the end of the chapter introducing pointers. what's the real message to get across here?
[02:04:03] <strcat> pcwalton: they're not very useful because you can't even have push on @mut [T]
[02:04:06] <pcwalton> aaaargh
[02:04:16] * pcwalton failed to CCI newtype structs
[02:04:26] <strcat> CCI?
[02:04:30] <pcwalton> cross crate inline
[02:04:40] <pcwalton> they aren't cross crate inlined at the moment
[02:04:43] <pcwalton> and it kills servo perf
[02:04:46] <strcat> I don't think they even work cross-crate? :\
[02:04:48] <strcat> on
[02:04:50] <pcwalton> they do
[02:04:52] <strcat> oh*, newtype structs
[02:04:53] <pcwalton> servo uses 'em
[02:04:56] <strcat> unit structs are the broken ones
[02:04:57] <pcwalton> they don't get inlined though
[02:05:00] <cmr> I think it's unit structs
[02:05:02] <cmr> yeah
[02:05:12] <strcat> pcwalton: custom destructors don't either
[02:05:14] <engla> the generic newtype structs don't work cross crate. probably for this exact reason
[02:05:15] <strcat> big problem for Rc
[02:05:27] <cmr> rusti: std::util::NonCopyable
[02:05:28] -rusti- error: internal compiler error: unexpected failure
[02:05:28] -rusti- note: the compiler hit an unexpected failure path. this is a bug
[02:05:28] -rusti- note: try running with RUST_LOG=rustc=1 to get further details and report the results to github.com/mozilla/rust/issues
[02:05:28] -rusti- std::util::NonCopyable
[02:05:35] <strcat> um
[02:05:43] <strcat> I think cross-crate privacy is 100% broken now
[02:05:47] <strcat> so I would take it working with a grain of salt
[02:05:48] <cmr> wait wut
[02:05:55] <cmr> That ICEd but still compiled and ran?
[02:06:01] <strcat> cmr: that's rustc -v 
[02:06:03] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[02:06:03] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/q3uYIw
[02:06:03] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[02:06:07] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[02:06:07] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/Nrx-zA
[02:06:07] <ghrust> 13rust/06auto 142661b63 15Alex Crichton: Disallow char literals which should be escaped...
[02:06:07] <ghrust> 13rust/06auto 14512f778 15bors: auto merge of #9335 : alexcrichton/rust/issue-7945, r=thestinger...
[02:06:07] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[02:06:07] <cmr> oh
[02:06:23] <strcat> cmr: https://github.com/thestinger/rust-playpen/blob/master/bin/irc.sh
[02:06:53] <pcwalton> acrichto is working on redoing privacy IIRC
[02:07:07] <mudpit> I'm trying to generate a random string with the "gen_str()" method, but it's giving me an unresolved name error. Is this syntax correct: let mut end = std::rand::gen_str(10);?
[02:07:56] <strcat> pcwalton: it's just a bit funny that it worked fairly well and then completely broke without a test failing :)
[02:08:00] <engla> mudpit: it's a method on an Rng
[02:08:14] <strcat> almost all of our xcrate tests seem to be the ones sully wrote for default methods
[02:08:27] <engla> mudpit: so you need to get the rng;  use std::rand::Rng;  let mut rng = std::rand::task_rng(); rng.get_str(10)
[02:08:43] <engla> rusti: use std::rand::Rng;  let mut rng = std::rand::task_rng(); rng.gen_str(10)
[02:08:43] -rusti- <anon>:7:67: 8:5 error: type `@mut std::rand::IsaacRng` does not implement any method in scope named `gen_str`
[02:08:43] -rusti- <anon>:7          use std::rand::Rng;  let mut rng = std::rand::task_rng(); rng.gen_str(10)
[02:08:43] -rusti- <anon>:8     };
[02:08:44] -rusti- error: aborting due to previous error
[02:08:44] -rusti- application terminated with error code 101
[02:08:53] <strcat> rusti: 1 << 128
[02:08:54] -rusti- 140000090807136
[02:08:55] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[02:09:01] <strcat> rusti: 1 << 128 << 128 << 128
[02:09:01] -rusti- 139875015510880
[02:09:05] <pcwalton> I don't know what syntax slices should get
[02:09:10] <pcwalton> at least our slice semantics aren't as messed up as Go's
[02:09:15] <engla> oh the method changed name
[02:09:42] <strcat> pcwalton: they're almost the same thing as vector iterators
[02:09:44] <pcwalton> (Go putting "cap" in the slice is bizarre)
[02:09:56] <strcat> difference is just that they store length rather than end
[02:10:19] <strcat> decreasing length each time you iterate would be too slow
[02:10:21] <pcwalton> semantically yeah, idiomatically rust slices are different though
[02:10:30] <pcwalton> they're used all over the place
[02:11:26] <strcat> rusti: let xs = &[1, 2, 3]; let ys = &[4, 5, 6]; xs.iter().chain(ys.iter()).idx(4)
[02:11:27] -rusti- Some(&5)
[02:11:32] <tikue_> pcwalton: syntax as in slice sugar?
[02:11:45] <pcwalton> just what &[T] and ~[T] should be called, if not those
[02:11:51] *** Quits: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net) (Ping timeout)
[02:11:52] <pcwalton> to address steveklabnik's objection
[02:11:53] <tikue_> ah
[02:11:56] <pcwalton> which has been a wart from the beginning
[02:12:05] <tikue_> yeah it's something that is still confusing to me
[02:12:09] <strcat> pcwalton: call ~[T] a Vec, and ~str a Str
[02:12:11] <cmr> I really like the syntax, it's short and sweet, even if inconsistent.
[02:12:12] <steveklabnik> yeah
[02:12:20] <steveklabnik> it's not the worst
[02:12:22] <pcwalton> once upon a time it was [T]/~ and [T]/& ;)
[02:12:24] <strcat> pcwalton: I don't think @/Rc vectors are common enough for a nice name to matter
[02:12:28] <strcat> GcSlice/RcSlice would be fine
[02:13:05] <steveklabnik> is new what people are calling constuctors?
[02:13:09] <mudpit> engla it's giving me some error about IsaacRng not existing, like rusti already indicated
[02:13:10] <cmr> steveklabnik: yes
[02:13:13] <tikue_> cmr: the inconsistency is pretty extreme though, since pointers are already confusing
[02:13:22] <tikue_> strcat: i like that idea
[02:13:29] <tikue_> strcat: wait no i don't
[02:13:33] <tikue_> how would you do pattern matching
[02:13:38] *** nrc|lunch is now known as nrc
[02:13:41] <strcat> we only have pattern matching on slices
[02:13:47] <tikue_> actually i guess you could still do [ref hd, ..tl] etc
[02:13:59] <tikue_> strcat: yeah, that's a good point
[02:14:33] <mudpit> nevermind engla, I had to use RngUtil
[02:14:50] <engla> mudpit: right, your version is slightly older
[02:14:58] <strcat> ~[1, 2, 3] would be Vec::new([1, 2, 3]), I guess
[02:15:03] <strcat> wouldn't be less efficient
[02:15:11] <tikue_> i don't know, it's hard to stomach Vec<T>
[02:15:21] <cmr> Should Rng be in the prelude?
[02:15:22] <strcat> encourages you to use fixed-size vectors and slices more
[02:15:24] <strcat> ;p
[02:15:47] <strcat> tikue_: Vec<int> looks better to me than ~[int]
[02:15:55] * strcat shrugs
[02:16:25] <strcat> HashMap<int, int>, RingBuf<int>, etc. make ~[int] feel out-of-place
[02:16:40] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[02:16:48] <pcwalton> strcat: a bit to me too, yeah
[02:16:54] <engla> question is if the visual similarity between &[T] and ~[T] is actually beneficial
[02:16:59] <pcwalton> could always do Go's []T
[02:17:08] <tikue_> strcat:  i don't disagree with thatâ€¦but i think having easy constructor syntax for vectors is important
[02:17:26] <strcat> tikue_: you'd still have fixed-size vectors
[02:17:35] <SiegeLord> GC<T> makes ~T look out of place too :P
[02:17:42] <ChrisMorgan> Gc
[02:17:47] <strcat> tikue_: all ~[1, 2, 3] does is make a fixed-size vector, and copy to an allocation at runtime
[02:18:16] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[02:18:27] <doomlord_> iterators - next() advances it ? - is there a way to test if there is a next item or not , without advancing
[02:18:33] <strcat> doomlord_: no
[02:18:47] <ChrisMorgan> Peekable.
[02:18:49] <cmr> doomlord_: there's a Peekable adaptor, though
[02:18:56] <cmr> But iterators in general don't support it.
[02:18:58] <strcat> how do you test if there's a new line in a file/socket without doing I/O? :)
[02:19:08] <doomlord_> fair enough
[02:19:10] <ChrisMorgan> strcat: select, I guess
[02:19:37] <doomlord_> i had a workround in mind for what i was trying to do, its a bit more convoluted but given what you've just said it would be more general.
[02:20:08] <ChrisMorgan> strcat: not sure if it's done (or how it's done) with newrt io.
[02:20:19] <strcat> ChrisMorgan: it was a rhetorical question ;p
[02:20:27] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Quit: ChatZilla 0.9.90.1 [Firefox 23.0.1/20130814063812])
[02:20:50] <strcat> ChrisMorgan: epoll/whatever tell you if there's an event but not if there's actually a *line* ;p
[02:20:51] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[02:21:24] <ChrisMorgan> Moral of the story being, don't wait for lines.
[02:21:47] <strcat> you can split has_next from next, but it makes it all a pain
[02:21:49] <ChrisMorgan> (That's almost getting into queuing theory, anyway :P)
[02:21:49] <engla> Iterators + IO really makes those iterator protocol guarantees (or non-) matter
[02:21:54] *** Quits: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP) (Ping timeout)
[02:22:15] *** Joins: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP)
[02:22:18] <doomlord_> i'm trying to implement an 'intersperse' eg for throwing commas between a vector of strings. maybe there's already a way to do that
[02:22:33] <engla> doomlord_: there is .connect() on vectors
[02:22:58] <engla> rusti: ["a", "b", "c"].connect(", ")
[02:22:58] -rusti- ~"a, b, c"
[02:23:09] <strcat> http://www.scala-lang.org/api/current/scala/collection/Iterator.html the alternative way (look at the code sample)
[02:23:16] <doomlord_> ok thats what i had in mind, indeed
[02:23:26] <strcat>  Both these methods can be called any number of times without having to discard the iterator. Note that even hasNext may cause mutation -- such as when iterating from an input stream, where it will block until the stream is closed or some input becomes available.
[02:23:28] <doomlord_> 2 steps in one.
[02:23:34] *** Quits: carllerche (carllerche@moz-B01C97E1.hsd1.or.comcast.net) (Quit: carllerche)
[02:24:43] <cmr> I really really like that rust doesn't have hasNext
[02:24:56] <cmr> hasNext has never made sense to me.
[02:25:09] * strcat likes Option too much
[02:25:17] <strcat> and LLVM hates fail!() :)
[02:25:24] <tikue_> pcwalton: []T looks a lot like [T, ..N] no?
[02:25:25] <engla> it comes down to what strcat said.. there is no way to check for a new line, you just go a head and try to do it
[02:25:48] * pcwalton shrugs. I'm not wedded to it.
[02:26:02] * ChrisMorgan likes sigil[T] and [T, ..N] isn't at all bad
[02:26:02] <tikue_> pcwalton: I think it's better than ~[T] though
[02:26:21] <tikue_> ChrisMorgan: sigil[T] is so confusing though
[02:26:32] <ChrisMorgan> How?
[02:26:43] <strcat> well lets make @ vectors a library so there's less choice ;p
[02:26:54] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[02:26:54] <doomlord_> whats sigil[T] for
[02:27:02] *** Quits: paulproteus (quassel@rose.makesad.us) (Ping timeout)
[02:27:12] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[02:27:13] *** Quits: Eridius (kevin@moz-533B0DB4.us) (Quit: leaving)
[02:27:20] *** Joins: Eridius (kevin@moz-533B0DB4.us)
[02:27:20] <ChrisMorgan> doomlord_: sigil[T] meaning ~[T], &[T], &mut [T], @[T]
[02:27:28] *** Joins: paulproteus (quassel@moz-E86A3B42.makesad.us)
[02:27:31] *** Quits: Eridius (kevin@moz-533B0DB4.us) (Quit: leaving)
[02:27:45] <doomlord_> _[T]
[02:27:46] *** Joins: Eridius (kevin@moz-533B0DB4.us)
[02:28:06] *** Joins: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net)
[02:28:36] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[02:28:43] *** Quits: mudpit (Mibbit@moz-5AF9AA47.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[02:29:13] <ChrisMorgan> tikue_: what's confusing about it?
[02:29:47] <tikue_> ChrisMorgan: because it's incongruous
[02:29:48] <cmr> ChrisMorgan: ~[T] isn't a ~T for any T
[02:30:00] <ChrisMorgan> Oh, I see.
[02:30:01] <cmr> Because [T] doesn't exist.
[02:30:01] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[02:30:01] *** ChanServ sets mode: +ao dherman dherman
[02:31:47] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[02:34:12] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[02:34:42] <tikue_> so I'm tasked with doing some java programming. Does java have any kind of lightweight threads a la rust tasks? is there any kind of message passing a la rust's ports and channels?
[02:34:46] * tikue_ can't go back
[02:35:12] <strcat> use scala instead? ;p
[02:35:20] <tikue_> strcat: not my decision unfortunately :P
[02:35:27] <pcwalton> there's that clojure thing
[02:35:33] <pcwalton> does Akka work with Java?
[02:35:39] *** Joins: anders (anders@moz-329650BE.cust.bredbandsbolaget.se)
[02:35:53] <strcat> pcwalton: I guess it does, I've only seen it used with scala
[02:36:01] *** Quits: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net) (Ping timeout)
[02:36:05] <strcat> yeah it does.
[02:36:11] <pcwalton> tikue_: try Akka if you're allowed to use it
[02:36:13] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[02:36:15] <pcwalton> if not, java.util.concurrent is sorta ok
[02:36:24] <tikue_> pcwalton: awesome, thanks :)))
[02:36:33] <ChrisMorgan> tikue_: make a Rust FFI for Java :P
[02:36:39] <tikue_> ChrisMorgan: ha!
[02:36:40] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[02:36:44] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[02:36:44] *** ChanServ sets mode: +ao dherman dherman
[02:37:31] *** Quits: zz_kimundi (kimundi@moz-C01E77F7.dip0.t-ipconnect.de) (Ping timeout)
[02:37:49] <Yeri> tikue_: There's a lightweight green threading module for java (not part of std lib) that's supposed to be pretty good -- dig around on java-gaming,org they talk about it there
[02:37:59] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[02:38:01] <cmr> Yeri: akka?
[02:38:02] *** Joins: DanC (connolly@moz-CAC8C247.dyn.everestkc.net)
[02:38:08] <strcat> pcwalton: I realized we could probably be telling LLVM our module pass is an LTO pass....
[02:38:16] <strcat> I don't think it'd be slower
[02:38:21] <Yeri> cmr: Nope, it's something independent, not akka or anything else from scala land
[02:38:22] <pcwalton> *shrug*
[02:38:50] <strcat> maybe for non-libs only
[02:39:11] <Yeri> here's the link: http://www.java-gaming.org/index.php?topic=28337.0
[02:39:21] *** Joins: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP)
[02:39:22] *** ChanServ sets mode: +o jdm
[02:39:23] *** Joins: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net)
[02:39:27] * strcat isn't sure if it tells LLVM anything
[02:39:47] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[02:40:50] *** Joins: zz_kimundi (kimundi@moz-F77364E2.dip0.t-ipconnect.de)
[02:41:18] <cmr> Yeri: seems a little bit like lua corountines? Unless these aren't cooperative
[02:41:19] *** zz_kimundi is now known as kimundi
[02:41:36] <cmr> They seem to be
[02:42:03] <Yeri> cmr: Yea probably closer to coroutines in implementation, but could be used to do lightweight tasks
[02:43:07] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[02:46:26] <bjz> brson: backing away from struct-like enum variants? :(
[02:47:18] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[02:48:28] <bjz> brson: I've found them quite useful for self-documentation purposes with messaging.
[02:49:13] <brson> bjz: do they work reliably?
[02:49:20] <brson> every time i've used them they've been buggy
[02:49:28] <bjz> brson: ah really?
[02:49:51] <strcat> I thought the only buggy part was how they print
[02:50:22] <bjz> brson: I haven't had much trouble
[02:51:07] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[02:51:27] *** Quits: Yeri (jasonjasmi@41C91A8A.CE609BA5.E39FBF79.IP) (Quit: Yeri)
[02:51:32] <sfackler> there are issues matching with them
[02:52:21] *** Joins: glyc (Mibbit@moz-20CEEF38.hsd1.ca.comcast.net)
[02:52:41] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[02:53:03] <bjz> sfackler: ah ok
[02:53:34] <sfackler> iirc something like match Foo { foo: 10 } { Foo { 10 } => (), Foo { _ } } ices
[02:53:35] <tikue_> rusti : enum Foo { Bar { a: int, b: int } } match Bar { a: 1, b: 2 }  { Bar { a, b } => (a, b),}
[02:53:35] <steveklabnik> where is abs nowadays?
[02:53:42] <tikue_> rusti: enum Foo { Bar { a: int, b: int } } match Bar { a: 1, b: 2 }  { Bar { a, b } => (a, b),}
[02:53:42] -rusti- (1, 2)
[02:53:49] *** Quits: anders (anders@moz-329650BE.cust.bredbandsbolaget.se) (Quit: )
[02:53:56] <strcat> steveklabnik: method?
[02:54:06] <sfackler> er, match Foo { foo: 10 } { Foo { 10 } => (), Foo { _ } => () }
[02:54:17] <steveklabnik> strcat: yes, though i'm using it with rand, it may not be strictly needed
[02:54:28] <strcat> rusti: (-1).abs()
[02:54:29] -rusti- pastebinned 20 lines of output: http://sprunge.us/SHaT
[02:54:35] <strcat> rusti: (-1i).abs()
[02:54:36] -rusti- 1
[02:54:39] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[02:54:39] <steveklabnik> strcat: http://www.rustforrubyists.com/book/chapter-12.html <- updating that last code example
[02:54:40] <strcat> steveklabnik: I mean it became a method
[02:54:45] <steveklabnik> ah
[02:56:02] *** Quits: glyc (Mibbit@moz-20CEEF38.hsd1.ca.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[02:56:19] *** Joins: rabble (Mibbit@moz-20CEEF38.hsd1.ca.comcast.net)
[02:56:48] <rabble> how do I see the !debug() messages; trying RUST_LOG=programname=4 but no luck
[02:57:18] <sfackler> you have to add --cfg=debug to your compile flags
[02:57:28] <rabble> sfackler: thanks!
[02:57:29] <Eridius> rabble: what version are you using?
[02:57:30] <steveklabnik> didn't --cfg=debug go away this week?
[02:57:32] <Eridius> latest master flipped that
[02:57:34] <rabble> 570431f 2013-09-19
[02:57:47] <Eridius> rabble: if you update to latest, debug!() shows up normally again
[02:57:51] <Eridius> and --cfg ndebug will turn it off
[02:57:57] <rabble> Eridius: thanks
[02:58:50] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[03:00:26] *** Quits: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP) (Ping timeout)
[03:00:31] <cmr> brson: I haven't hit bugs with struct-like variants either
[03:00:53] <cmr> I agree they're useful.
[03:00:58] *** Joins: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP)
[03:01:20] *** Quits: bytewise (bytewise@moz-4A801D04.unitymediagroup.de) (Quit: Leaving)
[03:03:22] *** Quits: canhtak (jeremy@moz-7DD34FFE.wl.t.ulaval.ca) (Quit: canhtak)
[03:04:12] <steveklabnik> [master a1889b0] Update content for 0.8 12 files changed, 301 insertions(+), 435 deletions(-)
[03:04:16] <steveklabnik> not too bad
[03:04:18] <steveklabnik> things got smaller!
[03:04:54] <strcat> that's rust for rubyists?
[03:05:01] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[03:05:11] <steveklabnik> yup
[03:05:14] <steveklabnik> some of it is text
[03:05:30] *** Quits: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP) (Ping timeout)
[03:05:30] <steveklabnik> i'm going to add code samples with the new one
[03:05:47] <steveklabnik> and add my rustpkg tutorial that's on master, as well as maybe write another chapter about tcp with newrt
[03:05:49] <cmr> steveklabnik: does it get syntax highlighting now? <3
[03:05:52] <steveklabnik> if i'm feeling adventurous tonight
[03:06:04] <steveklabnik> cmr: hmmmmmm. maybe? i'm just using vanilla pandoc....
[03:06:09] <steveklabnik> now
[03:06:19] <steveklabnik> i bet if i had a new enough pygments it would do it
[03:06:21] *** Joins: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP)
[03:06:24] <steveklabnik> something to look into...
[03:06:25] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[03:06:27] <strcat> steveklabnik: pandoc has syntax highlighting
[03:06:28] <bjz> is there a way of getting the raw ptr to the beginning of a ~str?
[03:06:34] <strcat> steveklabnik: you need to mark code like
[03:06:36] <strcat> ~~~rust
[03:06:38] <strcat> fn foo() {}
[03:06:39] <cmr> steveklabnik: still using rst?
[03:06:40] <strcat> ~~~
[03:06:44] <strcat> with a new enough version of pandoc
[03:06:45] <cmr> I suppose I could look...
[03:06:46] <steveklabnik> cmr: no, markdown now
[03:06:49] <cmr> Ah!
[03:06:52] <bjz> I am interfacing with a C lib and the lib takes a length
[03:06:53] <steveklabnik> strcat: yeah, that's how the official docs do it
[03:07:05] <steveklabnik> cmr: yeah, so, turns out pandoc's 'make an ebook' only really works with markdown
[03:07:12] <steveklabnik> in that the title page stuff doesn't come out right with rst
[03:07:17] <cmr> ah
[03:07:21] <steveklabnik> i told pandoc to port it to md and it worked fine
[03:07:24] <cmr> that's kinda unfortunate
[03:07:28] <bjz> strcat: do you know?
[03:07:46] <strcat> bjz: to_ptr/to_mut_ptr in str::raw or something
[03:07:55] <strcat> bjz: or you could use std::unstable::raw
[03:07:57] *** Quits: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[03:08:06] <bjz> strcat: can't seem to find it in str::raw :(
[03:08:17] <strcat> rusti: use std::unstable::raw::Repr; let x: &str = "foo"; x.repr()
[03:08:18] -rusti- std::unstable::raw::Slice<u8>{data: (0x40862e as *()), len: 3u}
[03:08:26] <engla> bjz: as_imm_buf on the str?
[03:08:37] <strcat> that Repr way avoids closure hell ;p
[03:09:00] <strcat> rusti: use std::unstable::raw::Repr; let x: &str = "foo"; x.repr().data
[03:09:01] -rusti- (0x40844e as *())
[03:09:12] <engla> I've added a new function too called str::raw::as_owned_vec(&mut ~str) -> &mut ~[u8]
[03:09:36] <cmr> shouldn't that be to_owned_vec?
[03:10:06] <strcat> engla: it can't be safe, so it might be better to just have people use unsafe code
[03:10:07] <engla> don't think so
[03:10:17] <engla> strcat: it is unsafe, of course
[03:10:46] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[03:11:01] <engla> yeah maybe it's not that useful. I didn't know the repr method was safe
[03:11:08] <pcwalton> yeah, there is no CCI for struct-like enums, which will also prevent generics from working
[03:11:13] <pcwalton> the patch I am working on now should fix those...
[03:11:54] <cmr> pcwalton: it's so nice when servo forces your hand into fixing rustc bugs :P
[03:12:03] <cmr> (from my perspective)
[03:12:03] <pcwalton> heh
[03:12:12] <cmr> I'm sure you enjoy it less :P
[03:12:19] <pcwalton> well, I always enjoy optimization
[03:12:36] <pcwalton> optimization is my favorite thing, pity I don't get to do it more often
[03:13:19] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[03:16:43] *** Joins: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP)
[03:17:45] *** Quits: BitPuffin (isak@moz-49828767.cust.tele2.se) (Ping timeout)
[03:17:54] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[03:18:57] *** Quits: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP) (Ping timeout)
[03:19:49] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[03:20:12] *** Joins: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP)
[03:20:26] <Eridius> pcwalton: optimization is fun, until it uncovers heisenbugs
[03:20:32] <strcat> pcwalton: where would the call graph go? the type context?
[03:21:12] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[03:21:12] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/Nrx-zA
[03:21:12] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[03:22:42] <pcwalton> strcat: yeah, I guess so
[03:22:46] <pcwalton> it's a dumping ground for lots of stuff
[03:23:06] *** Joins: dandy (Dandy@moz-84CC8377.hsd1.co.comcast.net)
[03:23:20] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[03:23:22] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[03:25:59] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[03:25:59] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/1to7Gw
[03:25:59] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[03:26:01] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[03:26:01] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/vqvROg
[03:26:01] <ghrust> 13rust/06auto 1490e009f 15Luqman Aden: Remove the annihilate function from the crate map. Fixes #8431
[03:26:01] <ghrust> 13rust/06auto 14d7bb40c 15bors: auto merge of #9470 : luqmana/rust/bba, r=brson...
[03:26:01] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[03:27:16] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[03:28:46] *** Joins: mib_ihd3cf (Mibbit@AA14B99D.589CEA99.B7830B68.IP)
[03:29:00] <pcwalton> is there a version of assert that only fires in debug builds?
[03:29:02] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[03:29:09] *** Quits: mib_ihd3cf (Mibbit@AA14B99D.589CEA99.B7830B68.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[03:29:34] <pcwalton> there's an assert which is showing up high in the profile
[03:29:48] <bblum> if cfg!(debug) { assert }
[03:29:56] <cmr> debug_assert!()
[03:29:57] <pcwalton> cfg!(debug) didn't seem to work
[03:29:57] <olsonjeffery> was there a solution for the rust-logo.ico issue?
[03:29:58] <pcwalton> but maybe I can try again
[03:30:11] <cmr> debug_assert!() just expands into an if cfg!() though
[03:30:29] <dandy> pcwalton, what tools are available for profiling rust?
[03:30:38] <cmr> dandy: same tools available for C
[03:30:43] <pcwalton> dandy: Instruments.app
[03:30:44] <dandy> I have no idea...
[03:30:46] <pcwalton> on mac
[03:30:54] <pcwalton> the ungoogleable "perf" on linux
[03:31:33] * cmr wishes linux had something like instruments
[03:31:38] <steveklabnik> what's the rust-logo.ico issue?
[03:31:51] *** Quits: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP) (Ping timeout)
[03:32:01] <engla> newline normalization affected that file too
[03:32:37] <steveklabnik> ah
[03:32:39] <strcat> steveklabnik: https://github.com/mozilla/rust/issues/9421
[03:32:43] <engla> the .ico issue should be solved in master now, with the changes to .gitattributes
[03:32:48] <strcat> engla: nope
[03:32:57] *** Joins: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP)
[03:33:04] <strcat> eol=lf there is wrong
[03:33:10] <engla> hm ok
[03:33:23] <strcat> we could just delete that line
[03:33:42] <strcat> and only have newline normalization on extensions we specify
[03:33:55] <engla> yeah
[03:34:00] <strcat> or override it for each binary ext we use
[03:34:05] <pcwalton> hmm, will LLVM optimize things like
[03:34:53] <pcwalton> int x; switch (foo) { case 1: x = 10; break; case 2: x = 15; break; case 3: x = 7; } switch (x) { case 10: do_something(); break; case 15: do_something_else(); case 7: blah(); }
[03:35:00] <pcwalton> this optimization may be important for servo
[03:35:02] <pcwalton> is this SCCP?
[03:35:29] <pcwalton> I guess I can just try
[03:36:20] *** Joins: Ferreus_ (ferreus@moz-AF602926.dyn.telefonica.de)
[03:36:26] <olsonjeffery> i can't rebase against master because the file is always modified :(
[03:36:54] *** Quits: Ferreus (ferreus@moz-E7C43FE8.dyn.telefonica.de) (Ping timeout)
[03:37:00] <strcat> olsonjeffery: stick '*.ico binary' in gitattributes
[03:37:04] <strcat> in a commit
[03:37:29] <engla> I had the same problem, just rage-removed the ico file in a commit. while rebasing.
[03:37:51] <strcat> or delete the * line without an ext
[03:38:10] <strcat> * text=auto is fine, it auto-detects binary
[03:38:30] <strcat> eol=lf after text=auto applies regardless of that
[03:38:31] *** Quits: spud (spud@moz-8F8D4E52.lightspeed.bcvloh.sbcglobal.net) (Ping timeout)
[03:38:34] <cmr> Does anyone know what's up with https://gist.github.com/cmr/7a3d37572e6ea586831e ? Shouldn't that work?
[03:38:36] <engla> oh
[03:38:43] *** Quits: Ferreus_ (ferreus@moz-AF602926.dyn.telefonica.de) (Quit: WeeChat 0.4.1)
[03:38:45] *** Quits: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP) (Quit: tikue_)
[03:38:48] <pcwalton> yeah, clang will do that optimization
[03:38:49] <pcwalton> good
[03:38:51] <pcwalton> that may help servo
[03:39:15] *** Joins: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP)
[03:39:21] <olsonjeffery> i just nuked my topic branch :(
[03:39:31] <olsonjeffery> oh well, not that much done.. i can redo it in an hour or two
[03:39:32] <steveklabnik> olsonjeffery: git reflog is your frined!
[03:39:35] <steveklabnik> friend
[03:39:42] <strcat> olsonjeffery: yeah it's still in the reflog
[03:39:49] *** Joins: m_kato (m_kato@moz-C286AD9A.bitcat.net)
[03:39:51] <strcat> git is a persistent data structure
[03:39:54] <pcwalton> assuming I make LLVM inline enough, it might be able to SROA the tuples and SCCP can convert Servo to effectively be using the native netsurfcss representation
[03:40:03] <pcwalton> SROA the enums rather
[03:40:09] <strcat> the git gc is very delayed ;p
[03:41:29] *** Quits: steveklabnik (steveklabn@moz-F93A90D2.public.wayport.net) (Quit: bai for now!)
[03:43:08] <bjz> should bindings use *mut for things that will be mutated?
[03:43:23] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[03:43:52] <strcat> bjz: you don't have to, but it makes it harder to screw up higher up
[03:44:01] <strcat> mutating through & is broken
[03:44:15] *** Parts: samx (sami@moz-D9DA5773.dyn.optonline.net) (Leaving)
[03:44:40] *** Quits: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP) (Ping timeout)
[03:44:40] <bjz> I hate when you do let mut len = 0;, with the intention of it being mutated by a function, then have it complain that it does not have to be mutable.
[03:45:24] <bjz> seems a little worrying
[03:45:27] <jeaye> I consider that a feature.
[03:45:34] *** Joins: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP)
[03:45:39] <bjz> also the loss of semantic information
[03:45:42] <jeaye> In C++, it's just left mutable and nothing is ever said.
[03:45:56] <strcat> bjz: mutating stuff that's in an immutable location + not freeze is undefined
[03:46:04] <strcat> er
[03:46:11] <strcat> + is Freeze*
[03:46:18] <engla> that's a good argument for annotating *T vs *mut T properly
[03:46:26] <engla> since &T coerces to *T
[03:46:27] <bjz> mm
[03:50:28] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[03:51:25] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[03:53:35] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[03:53:55] <olsonjeffery> brson: think #6168 is done/closable?
[03:56:51] <brson> olsonjeffery: 6168 was supposed to be about implemting the I/O API using blocking system calls, not libuv. It doesn't look like i ever actually opened an issue on what I consider non-blocking file I/O
[03:58:03] <olsonjeffery> brson: ah. so it is.
[03:58:15] <olsonjeffery> i actually just spun up a ticket for blocking IO, #9488
[03:58:27] <olsonjeffery> your thoughts/feedback would be appreciated there
[03:58:56] <olsonjeffery> hah, maybe you already saw it.
[03:59:18] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[03:59:41] *** Quits: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP) (Ping timeout)
[04:00:23] *** Joins: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP)
[04:00:48] <cmr> It seems rustpkg is entirely broken for remote packages right now :\
[04:01:33] *** Quits: joshua_ (joshua@moz-45967CBE.emarhavil.com) (Ping timeout)
[04:01:56] <olsonjeffery> yeah. rustpkg has a ways to go, still. tjc is doing god's work.
[04:02:18] <olsonjeffery> tooling is never glamourous
[04:02:24] <cmr> yup
[04:02:32] *** Quits: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net) (Ping timeout)
[04:02:42] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[04:02:44] <cmr> helping with rustpkg is... three items down on my rust todo list!
[04:03:31] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[04:03:32] *** ChanServ sets mode: +ao dherman dherman
[04:03:52] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[04:05:50] *** Quits: KindOne (KindOne@moz-6E538F5C.dynamic.ip.windstream.net) (Ping timeout)
[04:06:06] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[04:08:05] *** Quits: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca) (Connection reset by peer)
[04:08:47] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[04:10:26] *** Joins: KindOne (KindOne@moz-A27EA18C.dynamic.ip.windstream.net)
[04:10:40] *** Joins: bt3ze (bt3ze@moz-3F0303DA.hsd1.va.comcast.net)
[04:12:58] *** Quits: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[04:14:15] <dandy> does debugging not work on windows?
[04:14:20] *** Joins: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP)
[04:14:28] <cmr> dandy: it should
[04:14:34] <jdm> dandy: we have tests that indicate that it does
[04:14:42] <strcat> dandy: need to pass -Z debug-info
[04:14:52] <jdm> or event -Z extra-debug-info
[04:14:59] <jdm> s/event/even/
[04:15:07] <dandy> ill try that jdm
[04:15:58] *** Joins: carllerche (carllerche@moz-B01C97E1.hsd1.or.comcast.net)
[04:17:27] *** Quits: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP) (Ping timeout)
[04:18:22] *** Joins: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP)
[04:22:17] *** Joins: anshin (anshin@CD85F10D.F21429E2.354459FA.IP)
[04:22:48] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[04:23:43] *** Quits: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net) (Ping timeout)
[04:24:45] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Ping timeout)
[04:24:47] *** ozten is now known as ozten|afk
[04:27:08] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[04:27:39] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[04:28:11] <olsonjeffery> -Z seriously-gimme-all-the-debug-info-you-got
[04:29:09] <strcat> jdm: are those going to become a single -g switch soon? seems to work well
[04:29:22] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[04:29:22] <jdm> strcat: yeah, I think we should make the switch
[04:29:42] <jdm> assuming that the performance hit isn't ridiculous
[04:29:53] <jdm> if it is, we could just move -Z debug-info into -g
[04:30:04] <cmr> What is the justification of naming the switch -g besides "it's what cc does"?
[04:30:06] <jdm> since backtraces with line numbers are super useful
[04:30:12] <cmr> I'd much rather see a -d/--debug
[04:30:15] <pcwalton> ok, after CCI of newtype structs + more inlining, I'm down to 43% slower than Gecko
[04:30:17] <pcwalton> jdm: ^
[04:30:27] <jdm> pas mal
[04:30:27] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[04:30:39] <strcat> -Z no-monomorphic-collapse is sometimes an easy win ;p
[04:30:59] <pcwalton> actually, if it's warm
[04:31:04] <strcat> type_use breaks inlining
[04:31:10] <strcat> of things like transmute
[04:31:17] <pcwalton> it looks like warm servo is better at reflow
[04:31:19] <pcwalton> cache effects I guess.
[04:31:35] <cmr> pcwalton: better as in, warm servo beats warm gecko?
[04:31:41] <pcwalton> no
[04:31:50] <pcwalton> but it's only 27% slower
[04:32:01] <strcat> cmr: I'm not sure why they use -g
[04:32:03] <pcwalton> also I'm not done optimizing ;)
[04:32:15] <strcat> I guess because it comes after -f
[04:33:01] * strcat doesn't understand when you want private vs. internal
[04:34:03] <bogen> how do I convert &str to ~str (I know a copy needs to be made)
[04:34:13] <strcat> to_owned
[04:34:36] <bogen> strcat: thanks, that did it
[04:34:38] <pcwalton> I want rustc's OptVec in the stdlib
[04:34:46] <pcwalton> mallocing zero-length arrays hurts ussss
[04:35:11] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[04:35:12] <engla> isn't strcat's vector idea better? no alloc for empty vec
[04:35:21] <pcwalton> well, sure, if we can put Vec in the stdlib
[04:35:32] <strcat> a null ptr is nice because realloc accepts them
[04:35:49] *** Quits: anshin (anshin@CD85F10D.F21429E2.354459FA.IP) (Quit: WeeChat 0.4.1)
[04:35:58] <pcwalton> what is option::get_ref this week
[04:35:59] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[04:35:59] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/vqvROg
[04:35:59] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[04:36:06] <strcat> pcwalton: still get_ref
[04:36:08] <strcat> ;p
[04:36:32] <pcwalton> ok
[04:36:33] *** Quits: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[04:36:33] <strcat> pcwalton: https://github.com/mozilla/rust/issues/9355 although I want to change it, again :)
[04:36:48] * strcat would like to call unwrap get too
[04:37:46] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[04:37:51] *** Joins: anshin (anshin@CD85F10D.F21429E2.354459FA.IP)
[04:38:45] *** Quits: anshin (anshin@CD85F10D.F21429E2.354459FA.IP) (Quit: WeeChat 0.4.1)
[04:38:55] *** Joins: aeqwa (aeqwa@moz-D80947E3.dsl.tropolys.de)
[04:39:48] <strcat> engla: Vec { len, cap, *data } and then SmallVec would use the high bit in length to mark itself as being small
[04:39:57] <strcat> so they could be compatible
[04:40:54] <strcat> generalize string over sequences... and make Str a type alias for String<Vec<u8>>? dunno.
[04:40:58] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[04:40:58] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/R1SvnA
[04:40:58] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[04:41:00] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[04:41:00] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/zapseA
[04:41:01] <ghrust> 13rust/06auto 14f285506 15Brian Anderson: Update AUTHORS.txt
[04:41:01] <ghrust> 13rust/06auto 146ed338c 15bors: auto merge of #9478 : brson/rust/authors, r=alexcrichton
[04:41:01] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[04:41:57] *** Quits: Earnestly (earnest@moz-BE290A2B.dyn.plus.net) (Ping timeout)
[04:42:26] * strcat tries writing it
[04:45:42] <strcat> it's annoying that Send/Freeze doesn't propagate through * sometimes...
[04:47:25] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[04:48:16] *** Quits: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP) (Ping timeout)
[04:48:26] <engla> should it?
[04:48:27] *** Joins: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP)
[04:49:01] <strcat> engla: sometimes
[04:49:05] <strcat> most times. probably
[04:49:16] <strcat> Rc/Vec can't be fully correct without it propagating
[04:49:59] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[04:50:06] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: polyfractal)
[04:50:39] *** Quits: dandy (Dandy@moz-84CC8377.hsd1.co.comcast.net) (Quit: Leaving)
[04:50:46] *** Joins: jaen (jaen@moz-6DF99245.play-internet.pl)
[04:51:13] *** Quits: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP) (Ping timeout)
[04:52:34] *** Joins: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP)
[04:54:05] <mark_edward> what's the difference between clone and deepclone?
[04:54:21] <strcat> Clone does the least possible work, DeepClone makes a totally new independent value
[04:54:30] <strcat> it traverses through @/Rc and isn't implemented for &
[04:55:29] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[04:56:02] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[04:56:23] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[04:57:03] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Client exited)
[04:57:08] *** Quits: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP) (Ping timeout)
[04:57:52] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[04:58:17] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[04:59:12] <jeaye> Is it impossible to provide an impl for something defined in another crate?
[04:59:40] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[05:00:07] <cmr> jeaye: no, but you can only doitif the trait is from your crate
[05:00:44] <jeaye> I don't understand what you mean. I'm saying it's from another crate.
[05:01:07] <jeaye> extern mod foo; impl Drop for foo::Bar { ... }
[05:01:13] <cmr> Right. There's two parts to an impl: the trait, and the type.
[05:01:29] <cmr> One or both of those need tobefrom your own crate for the impl to be valid (coherent)
[05:01:41] <jeaye> ah
[05:02:17] <cmr> this is so any crate that typechecks can't create a link-time error from conflicting implementations etc
[05:02:23] <jeaye> extern mod foo; trait Spam { } impl Spam for foo::Bar { ... }
[05:02:27] <jeaye> Fine? ^
[05:02:28] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[05:02:30] <cmr> yup
[05:02:43] <jeaye> Gotcha. Thanks, mate.
[05:02:46] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[05:03:47] <pcwalton> 21% slower than Gecko
[05:03:52] <pcwalton> after inlining some more stuff
[05:04:16] <bogen> how is "error: unreachable pattern" determined?
[05:04:33] <jeaye> cmr: Would anyone using foo::Bar then get access to Spam items?
[05:04:43] <engla> strcat: *mut T could propagate nonfreeze and *T could stay as it is?
[05:04:44] <jeaye> And in which crate? Only the one with Spam?
[05:04:56] <strcat> engla: doesn't work
[05:04:59] <olsonjeffery> pcwalton: servo benchmark?
[05:04:59] <strcat> also, Send
[05:05:05] <pcwalton> benchmarking reflow, yeah
[05:05:08] <jeaye> pcwalton: versus?
[05:05:10] <pcwalton> down from 3x slower
[05:05:11] <strcat> engla: *mut T for Freeze - is it Freeze or non-Freeze itself?
[05:05:17] <jeaye> Oh, nice.
[05:05:18] <pcwalton> over the last few days
[05:05:19] <pcwalton> past
[05:05:26] <pcwalton> a combination of Servo optimizations + a couple of rustc optimizations
[05:05:35] <aatch> bogen, if there are patterns that would always match, or if you have covered all cases.
[05:05:50] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Client exited)
[05:06:04] <ChrisMorgan> pcwalton: I presume that Servo will also become slower over time as more is implemented? (Ignoring optimisations which will, of course, be done.)
[05:06:12] <engla> strcat: are the rules for Freeze documented?
[05:06:17] <aatch> for example: `match foo { 1 => {}, 2 => {}, a => {}, b => { /* unreachable */ }}`
[05:06:22] <pcwalton> ChrisMorgan: roc thinks so, yes, so we should be at least equal to Gecko now
[05:06:36] <bogen> aatch: I have a state machine, on first pass there would only be one match
[05:06:37] <aatch> bogen: ^^ since, the a will always match, the b is unreachable
[05:06:41] <pcwalton> there are some fundamental issues though, in that our CSS implementation is not done and we're using NetSurf's
[05:06:45] <pcwalton> in the meantime
[05:07:01] <pcwalton> NetSurf is slow and there is also an impedance mismatch between Servo's CSS implementation and NetSurf's
[05:07:03] <ChrisMorgan> Yeah, being that close to Gecko is *quite* acceptable!
[05:07:10] <aatch> bogen, it's *potential* matches
[05:07:11] <pcwalton> so some of the performance differential is likely due to that.
[05:07:13] * ChrisMorgan wishes he had enough time to do everything
[05:07:16] <bogen> aatch: the state machine is in a for iter loop, however, the states are mut, and outside the loop
[05:07:27] <pcwalton> I would like to get basically equal to Gecko and then add parallelism to beat it
[05:07:37] <strcat> engla: anyway it's basically impossible to write without compiler help
[05:07:41] <aatch> bogen, I assume it's a finite number of states?
[05:07:46] <strcat> because you can't deal with @ sanely ;\
[05:08:05] <bogen> aatch: yes
[05:08:13] *** Quits: bt3ze (bt3ze@moz-3F0303DA.hsd1.va.comcast.net) (Ping timeout)
[05:08:44] <aatch> bogen, well then if you have an arm for all the states, then any other pattern arm will be unreachable
[05:09:12] <aatch> it's possible that you have misspelled one of the enum variants and turned the arm into a binding.
[05:09:31] <bogen> ok
[05:09:56] <bogen> so, I can't use _ to catch the ones I did not mention? I have multiple matches
[05:10:07] <bogen> multiple match blocks
[05:10:26] <ChrisMorgan> bogen: what's your code?
[05:10:31] <aatch> bogen, you can use it, but only if it could potentially be matched.
[05:11:07] <bogen> ChrisMorgan: I'll try a smaller test case, not ready to release what I'm working on.
[05:11:35] <aatch> bogen, just grab the enum and the errant function, that should be enough contexct
[05:12:02] *** Quits: GeneralMaximus (ankur@721438CE.A9A1C449.BE90E62C.IP) (Ping timeout)
[05:12:08] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Ping timeout)
[05:12:28] *** Quits: jaen (jaen@moz-6DF99245.play-internet.pl) (Ping timeout)
[05:17:43] *** Quits: riley (riley@moz-E40BCEED.hsd1.ca.comcast.net) (Client exited)
[05:19:20] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[05:19:24] <acrichto> pcwalton: when you get a chance, could you take a look at https://github.com/mozilla/rust/pull/9432 ? not urgent at all, but I want to start there in detaching privacy from resolve
[05:20:20] <pcwalton> looking
[05:21:48] <pcwalton> looks good
[05:22:06] <acrichto> cool, thanks!
[05:24:35] *** Joins: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP)
[05:24:51] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Ping timeout)
[05:25:18] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[05:25:48] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[05:26:03] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[05:27:23] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[05:27:24] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[05:28:02] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[05:29:45] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[05:30:49] *** Quits: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP) (Ping timeout)
[05:30:50] <strcat> rusti: let xs = &[1, 2, 3]; xs.as_slice()
[05:30:51] -rusti- pastebinned 16 lines of output: http://sprunge.us/ZgVL
[05:31:01] <strcat> rusti: let xs = &[1, 2, 3]; xs.as_slice();
[05:31:02] -rusti- ()
[05:31:04] <strcat> rusti: let xs = &[1, 2, 3]; xs.as_mut_slice();
[05:31:04] -rusti- <anon>:7:30: 7:48 error: type `&[<VI2>]` does not implement any method in scope named `as_mut_slice`
[05:31:05] -rusti- <anon>:7          let xs = &[1, 2, 3]; xs.as_mut_slice();
[05:31:05] -rusti-                                        ^~~~~~~~~~~~~~~~~~
[05:31:05] -rusti- error: aborting due to previous error
[05:31:05] -rusti- application terminated with error code 101
[05:31:13] *** Joins: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP)
[05:31:30] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[05:31:36] *** Joins: ecr (Thunderbir@6A833033.5BB0586B.11F8506F.IP)
[05:32:42] *** Quits: carllerche (carllerche@moz-B01C97E1.hsd1.or.comcast.net) (Quit: carllerche)
[05:33:05] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Quit: Leaving)
[05:33:18] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Ping timeout)
[05:34:01] *** Quits: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP) (Ping timeout)
[05:34:03] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[05:34:18] <pcwalton> down to 18%...
[05:34:27] <jeaye> fuckin' right
[05:34:48] <jeaye> At this rate, you'll hit 0% before the weekend. ;)
[05:35:03] *** Joins: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP)
[05:35:04] <jeaye> (if only)
[05:35:12] * ecr is finally done driving cross-country
[05:35:26] <jeaye> Welcome back, ecr
[05:35:37] <ecr> jeaye: thx
[05:35:41] <pcwalton> it's funny how #[inline(always)] helps
[05:35:46] <pcwalton> but I know what I'm doing here
[05:35:57] <jeaye> Well, that _are_ tradeoffs. :P
[05:36:00] <pcwalton> it's because the builtin inlining heuristics don't know that these functions are tailor made for SCCP
[05:36:02] <jeaye> there*
[05:36:03] *** Quits: hoverbear (andrew@moz-86FCBF4B.gv.shawcable.net) (Quit: hoverbear)
[05:36:23] <pcwalton> anyway this is temporary, it's a workaround to allow SCCP to eliminate as much of the overhead of our incomplete CSS implementation as it can
[05:36:53] *** Quits: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP) (Ping timeout)
[05:38:19] *** Joins: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP)
[05:38:35] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[05:38:55] *** Joins: GeneralMaximus (ankur@721438CE.A9A1C449.BE90E62C.IP)
[05:40:17] *** Quits: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP) (Ping timeout)
[05:41:02] *** Joins: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP)
[05:41:09] <eevee> oh whoa almost 0.8 already
[05:41:52] <strcat> test bench::push ... bench: 63398 ns/iter (+/- 767)
[05:41:54] <strcat> test bench::push_std ... bench: 66862 ns/iter (+/- 1670)
[05:42:00] <strcat> despite fully checking for overflow, unlike libstd
[05:42:18] <strcat> difference is probably just from elements instead of bytes in the size
[05:42:20] <strcat> maybe.
[05:42:22] * strcat shrugs
[05:44:44] <pcwalton> I wonder if LLVM would generate better block placement if it saw "unreachable" after fail_borrowed
[05:44:49] *** Quits: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP) (Ping timeout)
[05:44:54] <strcat> pcwalton: mark ! functions as noreturn
[05:44:55] *** Quits: sawrubh (uid6719@moz-5F4AA75A.irccloud.com) (Ping timeout)
[05:44:58] <pcwalton> the block placement looks kinda random
[05:45:10] <strcat> nounwind is separate
[05:45:21] * strcat opened an issue about it
[05:45:23] <strcat> dunno if it'll help
[05:45:29] *** Joins: sawrubh (uid6719@moz-5F4AA75A.irccloud.com)
[05:45:39] *** Joins: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP)
[05:46:34] <strcat> engla: http://ix.io/8eO
[05:46:37] <strcat> now SmallVec
[05:49:34] <engla> nice, so simple
[05:50:31] <strcat> yeah that's the advantage of doing it this way - very small code
[05:50:42] <strcat> (well, and 0-size doesn't allocate)
[05:50:45] <pcwalton> can we borrow @mut trait to &mut trait yet?
[05:51:14] <pcwalton> we sure do have a lot of dynamic borrow checks now
[05:51:29] <strcat> they weren't being inserted everywhere they were supposed to before
[05:51:44] <engla> strcat: I guess the *end = value assignment needs to use the move* something intrinsic
[05:51:55] <pcwalton> I know, what I mean is that we're using @mut Trait very often now when I think &mut Trait would do
[05:51:57] <strcat> engla: yeah it's undef behaviour for types with destructors atm :)
[05:51:58] <pcwalton> in Servo
[05:52:02] <strcat> pcwalton: ah
[05:52:22] <strcat> engla: or swap + ignore what was already in there
[05:52:27] <strcat> I'm sure LLVM can deal with it
[05:52:51] <acrichto> strcat: also Drop for Vec<T>
[05:52:59] <strcat> acrichto: yeah it's not done :)
[05:53:05] <strcat> needs read_ptr to destroy contents
[05:53:16] <strcat> acrichto: (it's actually in this file, but only frees it)
[05:53:23] <acrichto> what was the danger of generic destructors again?
[05:53:25] <bogen> if I have I have a struct in object, how do I get a reference to it? error: cannot move out of dereference of & pointer
[05:53:38] <strcat> acrichto: I'm not sure but this isn't valid for types containing @ anyway
[05:53:39] *** Joins: fabiand (fabiand@moz-B6C5F730.adsl.alicedsl.de)
[05:53:58] <acrichto> strcat: why not?
[05:54:09] <strcat> acrichto: always use malloc_raw, not local_malloc
[05:54:16] <acrichto> bogen: how so? you should be able to do &struct.field
[05:54:18] <strcat> + Send/Freeze don't bubble through * ptrs
[05:54:22] <strcat> which is also a problem for Rc...
[05:54:29] <acrichto> sure
[05:54:32] <acrichto> :D
[05:55:08] *** Joins: orshem (orshem@moz-E7EA111C.clients.kiwiirc.com)
[05:55:14] <acrichto> thank god for ccache
[05:55:57] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[05:55:57] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/zapseA
[05:55:57] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[05:56:13] <strcat> huh, it fluctuates in speed a lot
[05:56:33] *** Quits: orshem (orshem@moz-E7EA111C.clients.kiwiirc.com) (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
[05:56:35] <bogen> acrichto: you are correct
[05:57:03] <bogen> acrichto: that did fix it, still getting use to rust's pointers
[05:57:56] <strcat> whoa, the test harness has color
[05:58:18] <dbaupp> strcat: where've you been for the past 3 months? :P
[05:58:27] <strcat> why is it disabled with >1 thread?
[05:58:29] <strcat> :\
[05:58:54] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[05:58:59] <dbaupp> because the terminal escapes get all mixed up
[05:59:18] <tikue_> what happens "under the hood" when you say &foo? it's not copying, it's certainly not moving
[05:59:22] <strcat> doesn't it already have to serialize output
[05:59:24] <strcat> ?
[05:59:43] <strcat> tikue_: hands you the address of foo?
[05:59:55] *** Quits: GeneralMaximus (ankur@721438CE.A9A1C449.BE90E62C.IP) (Ping timeout)
[06:00:03] <tikue_> strcat: isn't & a constructor for a borrowed pointer?
[06:00:05] *** Joins: or_shem (or_shem@moz-4C1E443F.clients.kiwiirc.com)
[06:00:25] <dbaupp> strcat: I think the test tasks can println themselves, and this isn't serialisable (yet)
[06:00:27] <strcat> a borrowed pointer compiles right now to an LLVM ptr
[06:00:33] <strcat> tikue_: what do you think it does?
[06:00:49] <strcat> engla: http://ix.io/8eP whole thing so far
[06:00:53] <strcat> making SmallVec atm
[06:00:53] <tikue_> strcat: not sure, i thought it was some kind of struct with unsafe magic
[06:01:03] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[06:01:03] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/II02FA
[06:01:03] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[06:01:05] <dbaupp> strcat: did mark-internal-in-a-binary land yet?
[06:01:06] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[06:01:06] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/-8F7gA
[06:01:06] <ghrust> 13rust/06auto 1410a583c 15Alex Crichton: Correctly encode item visibility in metadata...
[06:01:06] <ghrust> 13rust/06auto 149af7719 15bors: auto merge of #9432 : alexcrichton/rust/correct-item-visibility, r=pcwalton...
[06:01:07] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[06:01:17] <engla> you're not intending to replace ~[] with this? :-(
[06:01:20] *** Joins: GeneralMaximus (ankur@721438CE.A9A1C449.BE90E62C.IP)
[06:01:30] *** Quits: or_shem (or_shem@moz-4C1E443F.clients.kiwiirc.com) (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
[06:01:32] <strcat> engla: maybe? I won't change the syntax anyway
[06:01:39] *** Quits: sk (sk@61A494B3.BA40E8A.AAC02D62.IP) (Input/output error)
[06:01:39] <strcat> just rip it out of the compiler with a lang item
[06:01:57] <strcat> or several, I guess
[06:02:08] <strcat> maybe one on the type is enough though
[06:02:12] <strcat> is enough though*
[06:03:09] *** Quits: mark_edward (quassel@moz-DCB0B750.lightspeed.cicril.sbcglobal.net) (Client exited)
[06:03:10] <strcat> rusti: 5.checked_div(&2)
[06:03:10] -rusti- <anon>:7:9: 8:5 error: type `<VI0>` does not implement any method in scope named `checked_div`
[06:03:10] -rusti- <anon>:7          5.checked_div(&2)
[06:03:11] -rusti- <anon>:8     };
[06:03:11] -rusti- error: aborting due to previous error
[06:03:11] -rusti- application terminated with error code 101
[06:03:12] <strcat> huh
[06:03:18] <strcat> rusti: use std::num::CheckedDiv; 5.checked_div(&2)
[06:03:19] -rusti- pastebinned 35 lines of output: http://sprunge.us/OGVB
[06:03:24] <strcat> oh just not in prelude
[06:03:26] <strcat> rusti: use std::num::CheckedDiv; 5i.checked_div(&2)
[06:03:27] -rusti- Some(2)
[06:03:37] * strcat wanted to try * 3 / 2 instead of * 2
[06:03:55] <pcwalton> ok, gotta go home
[06:03:59] <pcwalton> at 16% slower than Gecko
[06:04:04] <strcat> engla: I accidentally left it at *3 ;p
[06:04:29] *** Quits: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP) (Ping timeout)
[06:04:39] <dbaupp> strcat: it doesn't need to be checked, right?
[06:04:41] <engla> I see. complex arithmetic there is expensive in amount of methods you need to use
[06:04:48] <strcat> dbaupp: true
[06:04:49] *** Joins: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP)
[06:04:54] <engla> I think you can get away with one .unwrap
[06:04:59] <strcat> on mul
[06:05:14] <strcat> engla: if the IR is bad I'll fix it ;p
[06:05:27] <strcat> * 3 / 2 indeed seems faster for this naive test
[06:05:42] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[06:05:53] *** Quits: GeneralMaximus (ankur@721438CE.A9A1C449.BE90E62C.IP) (Ping timeout)
[06:06:00] <engla> let cursiz = self.cap * size_of<T> never overflows, then let size = cursiz.checked_mul(&2).unwrap()
[06:06:11] <strcat> true
[06:06:13] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[06:06:16] <engla> self.cap = self.cap * 2;
[06:06:17] *** Joins: GeneralMaximus (ankur@721438CE.A9A1C449.BE90E62C.IP)
[06:07:16] <strcat> engla: much faster
[06:07:43] <strcat> hrm
[06:07:49] <strcat> because I did it wrong
[06:07:50] <strcat> ;]
[06:07:58] <strcat> oh nvm it's right
[06:08:00] * strcat shrugs
[06:08:26] <strcat> test bench::push ... bench: 32890 ns/iter (+/- 1887)
[06:08:28] <strcat> test bench::push_std ... bench: 80474 ns/iter (+/- 1420)
[06:08:35] <strcat> test bench::push ... bench: 52718 ns/iter (+/- 916)
[06:08:37] <strcat> test bench::push_std ... bench: 81563 ns/iter (+/- 953)
[06:08:39] <strcat> yay noise?
[06:08:44] <dbaupp> woah, how so fast?
[06:08:49] <strcat> back to 33k this time
[06:08:54] <strcat> dbaupp: small
[06:08:59] *** Quits: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP) (Ping timeout)
[06:09:04] <strcat> code size is king
[06:09:08] <dbaupp> right
[06:09:27] <strcat> now let me test with memory pre-allocated
[06:09:40] <engla> cool
[06:10:09] <rabble> I've gotten stdin().eof() to return true, and now I want to clearerr() and read some more... there's no clearerr in io.rs though...?
[06:10:14] *** Joins: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP)
[06:11:10] <strcat> heh
[06:11:15] <strcat> I was forgetting to set the capacity in with_capacity
[06:11:45] <strcat> test bench::empty ... bench: 2 ns/iter (+/- 0)
[06:11:47] <strcat> test bench::empty_std ... bench: 29 ns/iter (+/- 1)
[06:11:49] <strcat> test bench::push ... bench: 32732 ns/iter (+/- 821)
[06:11:51] <strcat> test bench::push_preallocated ... bench: 7159 ns/iter (+/- 104)
[06:11:53] <strcat> test bench::push_preallocated_std ... bench: 62201 ns/iter (+/- 1259)
[06:11:55] <strcat> test bench::push_std ... bench: 66751 ns/iter (+/- 1537)
[06:11:57] <strcat> beautiful? ;p
[06:12:09] <engla> nice
[06:12:13] <engla> what's wrong with bench::push_preallocated_std?
[06:12:19] <strcat> don't know
[06:12:20] *** Quits: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP) (Ping timeout)
[06:12:34] <strcat>             let mut xs = std::vec::with_capacity(10000);
[06:12:36] <strcat>             for i in range(0, 10000) {
[06:12:36] <dbaupp> <3 fast vectors
[06:12:38] <strcat>                 xs.push(i);
[06:12:40] <strcat>             }
[06:12:42] <strcat> it just does that....
[06:12:58] <strcat> let me make them bigger
[06:13:26] *** Quits: GeneralMaximus (ankur@721438CE.A9A1C449.BE90E62C.IP) (Ping timeout)
[06:13:58] <strcat> test bench::push_preallocated ... bench: 55363 ns/iter (+/- 5465)
[06:14:00] <strcat> test bench::push_preallocated_std ... bench: 123244 ns/iter (+/- 13944)
[06:14:02] <strcat> test bench::push_std ... bench: 139639 ns/iter (+/- 5209)
[06:14:04] <strcat> ;\
[06:14:07] <strcat> does with_capacity not work?
[06:14:09] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Quit: pcwalton)
[06:14:36] <strcat> http://ix.io/8eQ current code
[06:15:22] <strcat> jemalloc is too fast
[06:16:01] <eevee> omg docs are so beautiful now
[06:16:10] <eevee> look at all these colors and interlinks
[06:17:29] * strcat wants tagless enums
[06:18:14] * jeaye wants enum mod
[06:18:17] *** Quits: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) (Connection reset by peer)
[06:18:27] <strcat> rusti: std::uint::bits
[06:18:28] -rusti- 64u
[06:18:43] *** Joins: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP)
[06:18:48] <engla> why is it so fast at 10k elements and slow at 20k?
[06:18:51] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[06:18:54] <engla> the prealloc
[06:18:55] *** Joins: jviereck (Adium@moz-D03659.dip0.t-ipconnect.de)
[06:19:03] <strcat> engla: don't know
[06:19:07] <strcat> jemalloc quirks
[06:19:21] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[06:19:21] <strcat> engla: it has to do with the size of the arena
[06:19:29] <strcat> it allocates 4MiB arenas
[06:19:39] * strcat shrugs
[06:19:49] * strcat forgets the exact numbers
[06:19:52] <engla> ok
[06:20:12] <strcat> rusti: -1 - -1 / 2
[06:20:12] -rusti- -1
[06:20:26] <strcat> rusti: -1u - -1 / 2
[06:20:27] -rusti- 9223372036854775808u
[06:20:30] *** Joins: ChrisMorgan1 (chris@moz-80C7F64F.its.monash.edu.au)
[06:20:30] *** Quits: ChrisMorgan (chris@moz-80C7F64F.its.monash.edu.au) (Quit: Leaving.)
[06:20:39] <strcat> rusti: -1u - -1 / 2 & 63
[06:20:39] -rusti- 0u
[06:20:41] <strcat> rusti: -1u - -1 / 2 & 64
[06:20:41] -rusti- 0u
[06:20:42] *** Joins: Ms2ger (Ms2ger@moz-9F30495E.ugent.be)
[06:20:44] <strcat> rusti: -1u - -1 / 2 & 0
[06:20:45] -rusti- 0u
[06:20:48] *** Quits: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP) (Ping timeout)
[06:21:00] <strcat> rusti: -1u - -1 / 2 & 8
[06:21:00] -rusti- 0u
[06:21:03] <strcat> rusti: -1u - -1 / 2 & 7
[06:21:04] -rusti- 0u
[06:21:04] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[06:21:09] <strcat> stupid integers
[06:21:57] <strcat> rusti: -1u - -1 / 2 & (1 << 8)
[06:21:57] -rusti- 0u
[06:21:59] <strcat> rusti: -1u - -1 / 2 & (1 << 7)
[06:22:00] -rusti- 0u
[06:22:06] <strcat> wat
[06:22:08] <bogen> aatch: ok, I found the problem with the "unreachable" pattern, I think it is a misleading error message in this case. this is fine -> http://bpaste.net/show/135211/   this is not -> http://bpaste.net/show/135212/
[06:22:23] <strcat> rusti: -1u - -1 / 2 & (1 << 63)
[06:22:23] -rusti- 9223372036854775808u
[06:22:26] * strcat is silly
[06:22:28] *** Quits: ChrisMorgan1 (chris@moz-80C7F64F.its.monash.edu.au) (Quit: Leaving.)
[06:22:39] <strcat> 64-bit. not 8-bit.
[06:22:39] *** Joins: ChrisMorgan (chris@moz-80C7F64F.its.monash.edu.au)
[06:22:52] <strcat> I'm like the worst person to write a small vector
[06:23:11] *** Joins: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP)
[06:23:11] *** ChanServ sets mode: +o jdm
[06:23:41] <engla> bogen: the problem is that s1 .. s4 are just variable names in a pattern
[06:23:49] <engla> when they don't match statics or enums
[06:23:53] <strcat> big endian vs little endian... sigh
[06:24:15] * strcat just uses an enum and wastes a whole word for now
[06:24:30] <bogen> engla, yeah, but they are variables that don't exist, so should it not give an undefined error?
[06:24:51] *** Joins: jaen (jaen@FB01674D.56B727FE.4B52F012.IP)
[06:24:57] <engla> no, those become match bindings
[06:25:15] <engla> rusti: match 1 { x => println!("{}", x) }
[06:25:16] -rusti- 1
[06:25:16] -rusti- ()
[06:25:44] <engla> and `x` here matches anything because the binding is a catch-all
[06:25:59] <bogen> engla: ok, I get it, like when unpacking a variant
[06:26:08] *** Joins: joshua_ (joshua@moz-45967CBE.emarhavil.com)
[06:26:36] <bogen> but in this case it just passes through what is being tested
[06:26:39] <engla> strcat: write a fast ringbuf?
[06:27:16] <engla> or "deque"
[06:27:31] *** Joins: GeneralMaximus (ankur@B1BAB21F.1DD94151.D2D1FAF0.IP)
[06:27:44] *** Quits: KindOne (KindOne@moz-A27EA18C.dynamic.ip.windstream.net) (Ping timeout)
[06:28:26] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[06:28:50] <bogen> engla: so, typoes or wrong namespaces become catch-alls  :)
[06:29:11] <engla> yes, that's unfortunate
[06:29:24] <engla> and statics mess things up
[06:29:41] <engla> rusti: static x: int = 76; match 1 { x => println!("{}", x) }
[06:29:41] -rusti- <anon>:7:29: 7:63 error: non-exhaustive patterns
[06:29:41] -rusti- <anon>:7          static x: int = 76; match 1 { x => println!("{}", x) }
[06:29:41] -rusti-                                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[06:29:41] -rusti- error: aborting due to previous error
[06:29:41] -rusti- application terminated with error code 101
[06:30:17] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[06:30:27] *** Quits: ross (ross@moz-5EA04060.br.br.cox.net) (Quit: )
[06:31:13] *** Quits: aeqwa (aeqwa@moz-D80947E3.dsl.tropolys.de) (Quit: Lost terminal)
[06:31:38] *** Joins: KindOne (KindOne@moz-74654526.dynamic.ip.windstream.net)
[06:34:02] *** Quits: jviereck (Adium@moz-D03659.dip0.t-ipconnect.de) (Quit: Leaving.)
[06:35:10] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[06:35:12] <strcat> engla: mostly a proof of concept anyway
[06:35:19] <strcat> I could just make the existing vectors implemented this way.
[06:35:32] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[06:35:50] <strcat> although it won't work for @[] :)
[06:35:58] <strcat> and it will rule out DST for vecs
[06:36:01] <bogen> engla: thanks. It all compiles now so I'll debug my state machine later.
[06:36:24] <engla> I thought it didn't conflict with DST
[06:36:37] <strcat> afaik it does
[06:36:42] <strcat> there's no ~ ptr in sight
[06:37:02] <strcat> it's a struct, with a heap allocation it owns next to the len/capacity
[06:37:30] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[06:37:30] <strcat> it can't be cast as ~Trait, for sure
[06:37:48] <engla> hm that's actually true
[06:38:28] <engla> it becomes a simple Vec<T> struct. (I know this is 0 extra information)
[06:39:39] *** ozten|afk is now known as ozten
[06:40:56] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[06:40:56] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 149af7719 to 146ed338c: 02http://git.io/N3iJvQ
[06:40:56] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[06:40:57] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[06:40:57] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/SGbhEA
[06:40:57] <ghrust> 13rust/06auto 146d03897 15Brian Anderson: Don't use libc::exit. #9473...
[06:40:57] <ghrust> 13rust/06auto 14dad32f7 15bors: auto merge of #9480 : brson/rust/noexit, r=thestinger...
[06:40:57] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[06:43:52] <tikue_> engla: is that the intended behavior of static?
[06:44:10] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[06:44:10] <tikue_> i'd think pattern matching would shadow the static in that block scope
[06:44:49] *** Quits: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net) (Quit: ozten)
[06:48:24] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[06:49:47] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[06:51:25] <dbaupp> strcat: I thought that DST was designed to be (Ptr<T>, Metadata) and so the metadata doesn't necessarily have to be a pointer?
[06:51:25] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[06:53:09] <strcat> don't know
[06:53:22] <strcat> dbaupp: https://github.com/mozilla/rust/issues/8981 I have numbers now
[06:55:12] <dbaupp> strcat: that seems like a sure-to-be-approved PR
[06:57:41] <strcat> dbaupp: it has to be implemented in the compiler though
[06:57:48] <strcat> + anything relying on the representation migrated
[06:57:56] <strcat> I'd do it, if it was approved in advance ;p
[06:57:58] <dbaupp> or more lang items
[06:58:44] <strcat> dbaupp: well it has to work when you put @ in it too
[06:59:08] <dbaupp> that's "just" a if contains_managed::<T>() branch, right?
[06:59:25] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[06:59:33] <strcat> dbaupp: yes, basically
[06:59:43] *** Joins: sk (sk@DA137125.E993C7C3.78DD174B.IP)
[07:01:52] *** Quits: ChrisMorgan (chris@moz-80C7F64F.its.monash.edu.au) (Ping timeout)
[07:02:45] *** Quits: tikue_ (tkuehn@A7A81DF.28336FB0.689607DE.IP) (Quit: tikue_)
[07:04:54] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Client exited)
[07:04:56] <dbaupp> strcat: IR for those a C and Rust version of the ray tracers https://gist.github.com/huonw/348081acb4a42bc0adbb, I guess part of the problem is https://gist.github.com/huonw/348081acb4a42bc0adbb#file-c-ll-L23 vs https://gist.github.com/huonw/348081acb4a42bc0adbb#file-rust-ll-L39; we're GEPing, Clang is extractelementing
[07:05:17] <dbaupp> and clang splits up the struct
[07:05:29] <dbaupp> *and* returns by value
[07:06:17] <strcat> the by-value part we can fix
[07:06:33] <strcat> dbaupp: compile again with master ;]
[07:07:53] <dbaupp> https://github.com/huonw/card-trace/tree/master/no_std source fwiw (except for the function/variable declarations, Rust and C are ridiculously similar)
[07:08:09] <dbaupp> (compiling now)
[07:11:12] *** Joins: mib_ssncqx (Mibbit@F0909410.6C943DA4.49B25F74.IP)
[07:12:40] <strcat> dbaupp: how do these compare speed-wise?
[07:12:50] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[07:13:15] <mib_ssncqx> benchmark?
[07:13:24] <dbaupp> strcat: C is 14-15s, Rust is 18s
[07:13:27] <dbaupp> (C with clang)
[07:13:48] <mib_ssncqx> and why Rust need 2 times memory?
[07:13:51] <dbaupp> strcat: (I haven't measured it properly though.)
[07:14:08] <strcat> mib_ssncqx: it doesn't
[07:14:17] <dbaupp> mib_ssncqx: what's the "benchmark?" question meaning?
[07:14:27] <strcat> if you're comparing rust with #[no_std] to C, there are only small differences
[07:14:58] <strcat> mostly just minor fixable issues with how rust passes/returns by-value and how it handles modification of aggregates
[07:15:15] <strcat> + rust doesn't output TBAA data yet
[07:15:44] <mib_ssncqx> I heard that in benchmark of togotogo(maybe this name), rust need about 2 times memory and scala about 3 times, but nimrod need the same as clang, why
[07:16:06] <strcat> mib_ssncqx: because he isn't writing fast rust code?
[07:16:16] <mib_ssncqx> ok
[07:16:37] <strcat> you can write equivalent code in rust to C/C++ and they will do the same amount of heap allocation
[07:16:43] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[07:16:54] <strcat> rust will be a bit (10-20%) slower because rustc isn't great at generating code
[07:17:29] <strcat> if you don't write entirely equivalent code, it's not a language benchmark - it's a benchmark of a specific implementation of the task that just happens to be in another language
[07:17:56] <dbaupp> strcat: (is this directed at me or mib_ssncqx?)
[07:18:09] <strcat> mib_ssncqx
[07:18:28] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[07:18:29] <mib_ssncqx> thank ou
[07:19:39] <strcat> to get the same code as 'int main(void) {}' in C
[07:19:50] <strcat> well
[07:20:01] <strcat> to get the same code as 'int main(int argc, char **argv) {}' in C*
[07:20:26] <strcat> you need '#[no_std]; #[start] fn main(argc: int, argv: **u8) {}'
[07:20:58] <strcat> otherwise rust is giving you an initial thread pool, using a lot of memory
[07:21:59] <strcat> dbaupp: I don't quite understand why the getelementptr doesn't go away
[07:23:55] <dbaupp> strcat: because they're structs, not <2 x float>'s?
[07:24:11] <strcat> but the C starts as a struct, right?
[07:24:15] <strcat> clang isn't outputting <2 x float>
[07:24:27] <strcat> pre-optimization
[07:26:34] <dbaupp> yeah the code is essentially identical, except for the bits where C syntax differs to Rust syntax
[07:26:53] <dbaupp> http://ix.io/8eS clang pre-opts
[07:27:03] <dbaupp> (wait, it is outputting <2 x float>)
[07:27:43] <strcat> is it a struct?
[07:28:31] <dbaupp> yes, https://github.com/huonw/card-trace/blob/master/no_std/no_std.c#L7
[07:28:48] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[07:28:56] <strcat> I don't understand why it would have that logic in the frontend...
[07:29:20] <strcat> wtf.
[07:29:33] <dbaupp> and with -O0 too
[07:29:49] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Ping timeout)
[07:29:49] *** Quits: Amaranth (travis@moz-F81BB56A.cpe.cableone.net) (Ping timeout)
[07:30:21] *** flaper87|afk is now known as flaper87
[07:30:31] *** Quits: cdidd (cdidd@moz-2E603ED9.broadband.corbina.ru) (Ping timeout)
[07:30:31] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[07:30:45] <strcat> dbaupp: it's very clever with how it passes it
[07:30:48] <strcat> :s
[07:31:12] <dbaupp> yes
[07:31:42] <dbaupp> why can't clang just be a dumb C -> IR converter, instead of doing little opts like this. :(
[07:32:27] <strcat> dbaupp: did you try with master yet?
[07:32:31] <strcat> I am hopeful it fixes it
[07:32:49] <strcat> via the simple brute force of argpromotion + deadargelim
[07:32:52] <dbaupp> it's building stage2 librustc now
[07:33:38] <strcat> dbaupp: just use the stage1 compiler ;p
[07:33:57] <strcat> it's no_std so it doesn't matter 
[07:34:12] *** Joins: frau (frau@moz-C616DA0A.hsd1.ca.comcast.net)
[07:34:12] <dbaupp> true, but it's finished now anyway
[07:34:20] *** Joins: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP)
[07:34:40] <frau> what happened to result.chain()?
[07:34:54] <frau> std::result is barren now
[07:35:23] <dbaupp> strcat: https://gist.github.com/huonw/f825d529e29430b7eb53
[07:35:33] <dbaupp> frau: it's possibly result.and_then?
[07:35:51] <dbaupp> strcat: it's killed inlined everything
[07:35:56] <dbaupp> s/killed /
[07:36:05] <frau> dbaupp: oh thanks! I didn't realize I had to click on Result in the new rustdoc
[07:36:31] <dbaupp> strcat: it's still geping though
[07:37:26] *** Quits: vadimcn (chatzilla@A2267643.76F9E272.DA40C4B3.IP) (Ping timeout)
[07:37:49] *** Joins: Blub\0 (wry@7E3BB9D.71150E1A.237AE2BA.IP)
[07:37:49] *** Joins: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net)
[07:37:49] <strcat> dbaupp: is it faster? ;p
[07:37:54] *** Quits: Blub\0 (wry@7E3BB9D.71150E1A.237AE2BA.IP) (Quit: Blub\0)
[07:38:04] *** Quits: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP) (Ping timeout)
[07:38:04] *** Joins: Blub\0 (wry@7E3BB9D.71150E1A.237AE2BA.IP)
[07:38:06] <dbaupp> strcat: yes, appears to be about 15s
[07:38:07] *** Quits: elij (elij@E6C4342E.9D386EAF.AF7F4FE0.IP) (Ping timeout)
[07:38:17] <strcat> dbaupp: yay!
[07:38:38] <strcat> who needs functions anyway
[07:39:56] <dbaupp> strcat: yeah, old rust 17.4, new rust 15.3, C 14.1
[07:41:17] <strcat> dbaupp: pass -flto to clang
[07:41:50] *** Quits: RMF (RMF@moz-A7EEA849.dsl.telepac.pt) (Ping timeout)
[07:42:05] <strcat> anyway that's pretty good
[07:42:06] <dbaupp> strcat: hm, the non-no_std one has gone 18.3 -> 19.0 with the master compiler
[07:42:19] * strcat shrugs
[07:42:51] <dbaupp> with -flto: /usr/bin/ld: /usr/bin/../lib/LLVMgold.so: error loading plugin: /usr/bin/../lib/LLVMgold.so: cannot open shared object file: No such file or directory
[07:43:23] <strcat> oh I guess you don't have ld.gold
[07:43:43] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[07:43:49] <strcat> dbaupp: mark all the C functions as static
[07:43:51] <dbaupp> $ ld.gold -v
[07:43:51] <dbaupp> GNU gold (GNU Binutils for Debian 2.23.52.20130828) 1.11
[07:43:56] <strcat> except main
[07:43:58] <strcat> dbaupp: huh
[07:44:03] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[07:44:12] <strcat> dbaupp: I guess you really just don't have the LLVM plugin for gold, then :)
[07:44:14] *** Joins: elij (elij@E6C4342E.9D386EAF.AF7F4FE0.IP)
[07:44:32] <dbaupp> I already did :P
[07:44:34] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[07:44:36] <dbaupp> (mark them as static)
[07:44:39] <strcat> oh
[07:44:44] <strcat> then flto probably won't help
[07:45:15] *** Joins: vadimcn (chatzilla@A2267643.76F9E272.DA40C4B3.IP)
[07:45:32] <dbaupp> hm, static makes it .5s slower
[07:45:48] <strcat> heh
[07:45:53] <strcat> dbaupp: does it inline it all for C that way?
[07:46:12] <dbaupp> yup
[07:46:17] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[07:46:20] <dbaupp> two functions, main and T iirc
[07:46:26] <strcat> I think that explains most of the difference then, just cache noise
[07:46:40] <mib_ssncqx> is rust suitable for server side? camparing scala, rust, nimrod...
[07:46:56] <strcat> mib_ssncqx: yes, but the stdlib/runtime are very immature at this point
[07:47:42] <strcat> for example, no http support in the stdlib - there's a rust-http library with a pure rust implementation but it's not finished
[07:48:35] <strcat> (the new runtime just landed weeks ago)
[07:48:53] <mib_ssncqx> so which language is rust most like on usage of server side?
[07:49:04] <dbaupp> strcat: (sorry, 3 functions)
[07:49:20] <mib_ssncqx> scala?
[07:50:02] <dbaupp> it's like a safe C++, I guess, or a (very) low-level haskell
[07:50:02] <strcat> mib_ssncqx: dunno, it's fairly unique ;p
[07:50:18] <strcat> it's not really like C++ though
[07:50:41] <mib_ssncqx> so which language on server side will be replaced?
[07:50:44] <strcat> no object inheritance, no virtual methods, and those are big parts of C++
[07:50:48] <frau> internally, it's definitely not anything like the JVM
[07:50:55] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[07:50:56] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/SGbhEA
[07:50:56] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[07:50:56] <strcat> mib_ssncqx: it aims to be a great general purpose language
[07:50:58] <frau> the IO library is the same as node.js's
[07:51:26] <strcat> frau: well not really
[07:51:33] <strcat> it shares the event loop implementation
[07:51:37] <dbaupp> mib_ssncqx: (with a focus on writign a next-gen webbrowser, servo)
[07:51:41] <strcat> but rust's I/O will be most similar to Go's
[07:51:50] <strcat> node.js doesn't have threads/tasks
[07:51:53] <frau> right, it's not like it's going to be callback hell
[07:52:16] <tiffany> mib_ssnncqx: you may want to wait to use rust as a server language, its IO is unfinished
[07:52:21] <strcat> anyway rust is a mix of many things
[07:52:38] <tiffany> it has faux-synchronous IO that blocks the task, but you can't use TcpStreams from multiple tasks, or split them into readers/writers (at least yet)
[07:53:42] *** Joins: nkoep (nik@moz-8331E7A6.pool.mediaways.net)
[07:54:50] <mib_ssncqx> yes I am considering a server side language
[07:55:27] <strcat> I would keep rust in mind for the future but it's just not ready yet - the I/O and runtime stuff is very much alpha-state
[07:55:51] <tiffany> at this state you can't efficiencly implement frp
[07:55:54] <strcat> lots of the language is very solid now, but as a *whole* it isn't
[07:55:54] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[07:55:54] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/dlNbQA
[07:55:54] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[07:55:58] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[07:55:58] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/tKHUFA
[07:55:58] <ghrust> 13rust/06auto 1410a583c 15Alex Crichton: Correctly encode item visibility in metadata...
[07:55:58] <ghrust> 13rust/06auto 1430862a6 15Alex Crichton: Fix run-pass tests to have 'pub fn main'...
[07:55:59] <ghrust> 13rust/06auto 144531184 15bors: auto merge of #9432 : alexcrichton/rust/correct-item-visibility, r=pcwalton...
[07:56:01] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[07:56:17] <tiffany> and it's impossible to write any kind of server/client that sends and receives at the same time
[07:56:32] <strcat> you can definitely write one that sends/receives at the same time
[07:56:35] <strcat> just not over the same stream
[07:56:54] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Client exited)
[07:57:00] <mib_ssncqx> can rust in future replace erlang?
[07:57:46] <strcat> mib_ssncqx: it's meant to be a general purpose language able to fit any niche you throw at it
[07:57:47] <tiffany> it is possible to write programs which are very robust to failure in rust
[07:57:52] <tiffany> task failure is isolated and detectable
[07:59:07] <tiffany> and it pushes you towards program totality
[08:00:21] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[08:02:39] *** Quits: ecr (Thunderbir@6A833033.5BB0586B.11F8506F.IP) (Quit: ecr)
[08:03:22] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Connection reset by peer)
[08:06:45] <LRN> still no info on why W32 installation is in bad situation?
[08:07:19] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[08:07:26] <klutzy> LRN: what problem occured?
[08:07:37] <LRN> https://github.com/mozilla/rust/wiki/Meeting-weekly-2013-09-24#08-status
[08:08:06] <strcat> because the snapshot was made with an old mingw
[08:08:12] <strcat> and mingw changed their ABI
[08:08:26] <klutzy> LRN: I think they are saying this https://github.com/mozilla/rust/issues/9252
[08:08:38] <LRN> so your bootstrapping practice came back and bit you?
[08:09:49] <strcat> LRN: not really, just not enough work has gone into making rust solid on windows
[08:09:58] <strcat> it takes active work to maintain it
[08:10:23] <strcat> it means it depends on an old version of mingw atm
[08:10:27] <strcat> not the current one
[08:10:32] <strcat> unless you deal with a bunch of workarounds
[08:11:02] <LRN> can't you just make it self-bootstrappable? Like, build stage0 with a C/C++ compiler, use it to build everything else? Instead of requiring existing rustc that might depend on some obscure no-longer-maintined libraries
[08:11:15] <strcat> rust isn't written in C/C++
[08:11:37] <strcat> the runtime is written in rust, the stdlib is written in rust, the compiler is written in rust
[08:11:39] <tikue> LRN: gcc is bootstrapped as well...
[08:12:07] <LRN> OK, then cross-compile it
[08:12:45] <tikue> LRN: what is wrong with how it's currently compiled?
[08:13:00] <LRN> tikue, difficult to bootstrap
[08:13:15] <strcat> if there were core contributors who used windows it would work fine
[08:13:17] <strcat> that's the problem
[08:13:47] *** Joins: skade (skade@moz-DA43A266.hsi.kabel-badenwuerttemberg.de)
[08:14:33] <LRN> So, there are two problems. 1) SJLJ vs DW2 EH, 2) cross-compilation
[08:14:54] <LRN> I don't see how these are terribly W32-specific
[08:15:09] <LRN> (can't you compile SJLJ for *nix as well?)
[08:15:24] <dbaupp> the exceptions is because windows libc only supports one style, right?
[08:15:34] <dbaupp> (err, libc++)
[08:15:41] <strcat> we don't use libc++ ;p
[08:15:54] <strcat> we use libstdc++/libsupc++/libgcc_s/gcc
[08:16:07] <strcat> if we used LLVM's stack we would basically have no problems
[08:16:09] <LRN> Windows  supports SJLJ (or rather SJLJ just works without any support) and SEH 
[08:16:16] <LRN> AFAIU
[08:17:27] <dbaupp> strcat: how usable is lld?
[08:17:52] <LRN> Ladder logic Diagram?
[08:18:41] <strcat> dbaupp: it works now, at the very least they're compiling C++ programs on windows without mingw/msvc++
[08:18:51] *** Quits: skade (skade@moz-DA43A266.hsi.kabel-badenwuerttemberg.de) (Quit: Textual IRC Client: www.textualapp.com)
[08:19:02] <strcat> it has dynamic linking support in svn but it might not be finished...
[08:19:11] <dbaupp> strcat: neat
[08:19:27] <strcat> (or rather, it has code to do dynamic linking - haven't tried it)
[08:19:57] <dbaupp> LRN: a new linker from the llvm people, basically the last piece missing in "LLVM's stack"
[08:20:04] <LRN> ok
[08:20:57] <strcat> libc++abi (unwinding), lld, compiler-rt (libgcc_s replacement), clang is the complete stack we could use to drop mingw
[08:23:05] <LRN> great
[08:23:18] <strcat> lld does need to mature more though :(
[08:23:21] *** Quits: mib_ssncqx (Mibbit@F0909410.6C943DA4.49B25F74.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[08:23:26] <LRN> It means that i would be able to build llvm on W32, then use it to build rust
[08:23:39] <LRN> s/would/will
[08:23:42] <LRN>  /
[08:24:10] <LRN> I mean, in the future. After crayfish whistles on a mountain three times.
[08:29:11] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[08:30:29] *** Quits: GeneralMaximus (ankur@B1BAB21F.1DD94151.D2D1FAF0.IP) (Ping timeout)
[08:30:31] *** Joins: CarpNet (ac@moz-FD24B77.sohonet.co.uk)
[08:30:53] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[08:31:31] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[08:33:21] *** Quits: jyasskin_w (jyasskin@DAF66858.C60FE7DC.4065847B.IP) (Ping timeout)
[08:34:53] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[08:36:50] *** Joins: GeneralMaximus (ankur@29424A1E.58E1DE7B.D2D1FAF0.IP)
[08:37:12] *** Quits: rabble (Mibbit@moz-20CEEF38.hsd1.ca.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[08:41:23] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Client exited)
[08:42:07] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[08:42:34] *** Joins: jyasskin_w (jyasskin@DAF66858.C60FE7DC.4065847B.IP)
[08:44:17] <strcat> dbaupp: https://github.com/mozilla/rust/pull/9491 r?
[08:44:34] *** Joins: cdidd (cdidd@moz-E5B55197.broadband.corbina.ru)
[08:44:55] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[08:45:15] <strcat> oh wait I should add Closes #whatever
[08:45:47] <strcat> there
[08:46:09] <strcat> urgh I screwed it up
[08:47:11] <strcat> (fixed now ;p)
[08:48:24] <strcat> I always end up linking bugs to themselves
[08:48:26] <dbaupp> strcat: does that make LLVM like fail! more? (or do you not have a testcase for that?)
[08:49:00] <strcat> dbaupp: I have no idea, but it can't be a bad thing - I just verified that it worked
[08:49:18] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Ping timeout)
[08:49:18] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[08:49:24] <strcat> if we always put an 'unreachable' after them anyway, it won't matter
[08:49:29] <strcat> but pcwalton mentioned somewhere it didn't happen
[08:49:42] <dbaupp> ah, so it might help
[08:49:57] <dbaupp> also, do you know how to detect use or not of the fast isel? (https://github.com/mozilla/rust/issues/4353)
[08:50:32] <strcat> no
[08:50:37] <strcat> fn die() -> ! {
[08:50:39] <strcat>     unsafe { abort() }
[08:50:41] <strcat> }
[08:50:48] <strcat> ; Function Attrs: noreturn uwtable
[08:50:50] <strcat> define internal void @_ZN3die19h91d36982b3d9d4a7a94v0.0E({}* noalias sret, { i64, %tydesc*, i8*, i8*, i8 }*) #4 {
[08:50:52] <strcat> so it works
[08:50:54] <strcat> ;p
[08:51:11] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[08:51:12] <dbaupp> cool
[08:51:25] <dbaupp> (eurgh, every time I see that env pointer I cry a little :'( )
[08:51:40] <tiffany> env pointer?
[08:51:50] <dbaupp> the { i64, %tydesc*, i8*, i8*, i8 }*
[08:51:55] <strcat> tiffany: all functions have an unused env pointer parameter
[08:52:14] <strcat> but now that we mark stuff as internal, it likely only has a cost cross-crate
[08:52:18] <strcat> since LLVM can remove it
[08:52:21] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Client exited)
[08:52:24] <strcat> or in libraries.
[08:52:34] <strcat> (private functions in libs I mean, will still have the overhead)
[08:52:35] <dbaupp> it allows them to be coerced to a closure cheaply (i.e. at no cost).
[08:52:39] <tiffany> what is/was it used for?
[08:52:45] <tiffany> ah
[08:52:50] <strcat> tiffany: closures take an env param, so it makes them compatible
[08:52:54] <strcat> it's likely not a good tradeoff
[08:53:03] <dbaupp> how hard would it be to change that?
[08:53:05] <strcat> it wastes a register
[08:53:09] <strcat> dbaupp: not that hard
[08:53:19] <strcat> lazily make a stub when they get converted to a closure
[08:53:24] <dbaupp> yeah
[08:53:48] <strcat> I don't really *want* to change it until we have a way to pass fns as generics
[08:53:55] * strcat shrugs
[08:54:03] <strcat> not the biggest deal
[08:55:02] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[08:55:16] <tiffany> speaking of generics and functions, is there any way to decompose a tuple into a list of types to form function parameters?
[08:55:34] <tiffany> so that you can have a generic which takes T that you can pass to a function without having a fn((a, (b, c)))
[08:56:13] <tiffany> FP languages don't really have this problem because of ->
[08:56:48] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[08:58:30] <strcat> not much else we can tell LLVM via function attribute without purity
[08:58:32] <strcat> ;[
[09:05:38] <dbaupp> strcat: https://github.com/mozilla/rust/pull/9493 r?
[09:06:50] <strcat> dbaupp: already did
[09:11:00] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[09:11:00] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/tKHUFA
[09:11:00] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[09:11:28] *** Quits: victorporof (victorporo@8AB918FF.D4B9BCD.9B1E38F4.IP) (Quit: victorporof)
[09:12:52] *** Joins: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au)
[09:15:43] <dbaupp> strcat: heh, thanks
[09:16:00] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[09:16:00] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/9OCeaQ
[09:16:00] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[09:16:07] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[09:16:08] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/HN5V9w
[09:16:08] <ghrust> 13rust/06auto 1432f97cc 15John Clements: comment changes only
[09:16:08] <ghrust> 13rust/06auto 14876fce2 15John Clements: cleanup
[09:16:08] <ghrust> 13rust/06auto 140322832 15John Clements: renumbered due to bug shuffling
[09:16:08] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[09:18:04] *** Joins: donri (donri@moz-9BB61102.tbcn.telia.com)
[09:25:14] <flaper87> is debug-info enough to get rtdebug messages from tests? I don't see those messages being printed anywhere
[09:26:04] *** Joins: Shaladdle_ (anonymous@moz-424BC304.hsd1.pa.comcast.net)
[09:26:17] <flaper87> also, Why is Local::take() needed here if there's a scheduler object in the context already that could be used? https://github.com/mozilla/rust/blob/master/src/libstd/rt/uv/uvio.rs#L1387 (line 1382 _sched)
[09:26:27] *** Parts: Shaladdle_ (anonymous@moz-424BC304.hsd1.pa.comcast.net) ()
[09:28:20] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[09:29:34] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[09:31:24] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[09:31:38] <flaper87> aahh, found it: --cfg rtdebug
[09:33:06] *** Joins: sproing (Mibbit@moz-DA85EBDA.pool.mediaways.net)
[09:35:02] *** Quits: sproing (Mibbit@moz-DA85EBDA.pool.mediaways.net) (Quit: http://www.mibbit.com ajax IRC Client)
[09:43:11] *** Joins: tgummerer (tgummerer@moz-46ECF9D2.kthopen.kth.se)
[09:46:28] *** Quits: tgummerer (tgummerer@moz-46ECF9D2.kthopen.kth.se) (Ping timeout)
[09:48:00] *** Joins: tgummerer (tgummerer@moz-46ECF9D2.kthopen.kth.se)
[09:48:06] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[09:51:52] *** Quits: GeneralMaximus (ankur@29424A1E.58E1DE7B.D2D1FAF0.IP) (Ping timeout)
[09:52:33] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[09:54:31] *** Joins: victorporof (victorporo@77FE7E86.477C3F8E.79933D60.IP)
[09:55:13] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: sleep)
[09:58:44] *** Joins: pnkfelix (pnkfelix@A34AB32F.6B30872B.A515248C.IP)
[09:59:43] *** Quits: tgummerer (tgummerer@moz-46ECF9D2.kthopen.kth.se) (Ping timeout)
[10:04:37] *** Quits: m_kato (m_kato@moz-C286AD9A.bitcat.net) (Quit: Leaving...)
[10:05:08] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Ping timeout)
[10:07:59] *** Joins: Earnestly (earnest@moz-BE290A2B.dyn.plus.net)
[10:09:25] *** Joins: tgummerer (tgummerer@moz-46ECF9D2.kthopen.kth.se)
[10:11:07] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[10:17:56] *** Joins: fyolnish_ (fyolnish@moz-BE2BAE5B.miinet.jp)
[10:18:53] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[10:19:07] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Ping timeout)
[10:19:43] *** Quits: fyolnish_ (fyolnish@moz-BE2BAE5B.miinet.jp) (Ping timeout)
[10:26:38] *** Joins: Tobbi (Tobbi@moz-CAA98E97.xxx)
[10:26:56] <Tobbi> Guys, many of the links on here: https://github.com/mozilla/rust are 403
[10:28:31] <dbaupp> Tobbi: 0.8 is being released very soon, and the links have been updated in preparation
[10:28:41] <dbaupp> (but, as you say, they're dead at the moment)
[10:28:41] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[10:28:43] <Tobbi> dbaupp: Ah, alright.
[10:29:05] <dbaupp> if you're looking for docs http://static.rust-lang.org/doc/master/std/index.html
[10:29:05] *** Quits: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP) (Quit: Lost terminal)
[10:29:39] <dbaupp> and if you're looking to install it, building from git is better than building one of the tarballs
[10:29:57] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[10:30:10] <dbaupp> (err, tutorial too http://static.rust-lang.org/doc/master/tutorial.html)
[10:31:43] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[10:33:22] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[10:33:38] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[10:36:03] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[10:36:03] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/HN5V9w
[10:36:03] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[10:38:39] *** Quits: Guest__ (foo@moz-90D1B547.nycmny.fios.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[10:39:27] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[10:40:59] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[10:40:59] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/yPFSaw
[10:40:59] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[10:41:00] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[10:41:00] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/qgrJaw
[10:41:00] <ghrust> 13rust/06auto 145a78b54 15Alex Crichton: Disable zlib/libffi when configuring LLVM...
[10:41:00] <ghrust> 13rust/06auto 14689ecce 15bors: auto merge of #9428 : alexcrichton/rust/llvm-zlib-and-libffi, r=pnkfelix...
[10:41:00] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[10:46:28] *** Quits: Ms2ger (Ms2ger@moz-9F30495E.ugent.be) (Quit: bbl)
[10:47:48] *** Quits: frau (frau@moz-C616DA0A.hsd1.ca.comcast.net) (Quit: out)
[10:51:19] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[10:54:49] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[10:55:58] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[10:55:58] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14689ecce to 14f6c9ff3: 02http://git.io/N3iJvQ
[10:55:58] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[10:56:03] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[10:56:03] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/L7pj0Q
[10:56:03] <ghrust> 13rust/06auto 1413571af 15Jesse Ray: Added is_control function, method, and tests.
[10:56:03] <ghrust> 13rust/06auto 14df97d23 15bors: auto merge of #9455 : jesseray/rust/master, r=pnkfelix...
[10:56:03] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[10:56:52] *** Joins: canhtak (jeremy@moz-7DD34FFE.wl.t.ulaval.ca)
[11:03:08] *** Quits: dew (Instantbir@moz-8A71886F.dhcp.stls.mo.charter.com) (Ping timeout)
[11:03:16] *** Joins: saneyuki (Tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[11:03:40] *** Joins: dew (Instantbir@moz-8A71886F.dhcp.stls.mo.charter.com)
[11:05:40] *** Quits: saneyuki (Tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[11:05:44] *** Joins: saneyuki (Tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[11:08:25] *** Quits: saneyuki (Tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[11:08:29] *** Joins: saneyuki (saneyuki@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[11:14:39] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[11:17:27] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[11:19:14] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[11:20:47] *** Joins: novabyte (Instantbir@798FAEB8.960C02BA.8896DCF8.IP)
[11:30:19] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[11:30:23] *** Joins: taupsi (Mibbit@moz-950465E6.pools.arcor-ip.net)
[11:32:01] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[11:33:15] *** Quits: taupsi (Mibbit@moz-950465E6.pools.arcor-ip.net) (Quit: http://www.mibbit.com ajax IRC Client)
[11:34:41] *** Quits: novabyte (Instantbir@798FAEB8.960C02BA.8896DCF8.IP) (Quit: bye bye)
[11:38:52] *** Joins: BitPuffin (isak@moz-49828767.cust.tele2.se)
[11:51:38] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[11:52:55] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Client exited)
[11:54:29] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[11:56:08] *** Joins: GeneralMaximus (ankur@E584CC8D.236DEFC0.BE90E62C.IP)
[11:57:14] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[11:58:01] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[11:58:58] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Ping timeout)
[12:02:17] *** Joins: victorporof_ (victorporo@77FE7E86.477C3F8E.79933D60.IP)
[12:02:35] *** Quits: canhtak (jeremy@moz-7DD34FFE.wl.t.ulaval.ca) (Quit: canhtak)
[12:03:37] *** Quits: victorporof (victorporo@77FE7E86.477C3F8E.79933D60.IP) (Ping timeout)
[12:05:23] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[12:09:47] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[12:10:55] *** Joins: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net)
[12:11:04] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[12:12:38] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[12:15:58] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[12:15:58] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/L7pj0Q
[12:15:58] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[12:17:42] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[12:19:32] *** Joins: canhtak (jeremy@moz-7DD34FFE.wl.t.ulaval.ca)
[12:20:55] *** Quits: diegoyam (quassel@FF9B1514.A4EC3D18.3A1EC144.IP) (Ping timeout)
[12:20:59] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[12:20:59] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/C3j91A
[12:20:59] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[12:21:00] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[12:21:00] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/uIwYew
[12:21:00] <ghrust> 13rust/06auto 145a78b54 15Alex Crichton: Disable zlib/libffi when configuring LLVM...
[12:21:00] <ghrust> 13rust/06auto 143d4030d 15bors: auto merge of #9428 : alexcrichton/rust/llvm-zlib-and-libffi, r=pnkfelix...
[12:21:00] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[12:25:30] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[12:25:43] *** Joins: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com)
[12:26:32] *** Quits: KindOne (KindOne@moz-74654526.dynamic.ip.windstream.net) (Ping timeout)
[12:26:45] *** Joins: diegoyam (quassel@FF9B1514.A4EC3D18.3A1EC144.IP)
[12:30:42] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[12:30:43] *** Joins: KindOne (KindOne@F96FB12C.9C5C45A3.EC6A1518.IP)
[12:32:23] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[12:34:24] *** Joins: afrey71 (Mibbit@moz-7102166.slact.net)
[12:34:36] *** Quits: afrey71 (Mibbit@moz-7102166.slact.net) (Quit: http://www.mibbit.com ajax IRC Client)
[12:34:50] *** Joins: afrey71 (Mibbit@moz-7102166.slact.net)
[12:35:57] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[12:35:57] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 143d4030d to 14df97d23: 02http://git.io/N3iJvQ
[12:35:57] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[12:35:58] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[12:35:58] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/hwULGw
[12:35:58] <ghrust> 13rust/06auto 14071118c 15Alex Crichton: Ensure that skipped items aren't encoded...
[12:35:58] <ghrust> 13rust/06auto 14d1a7ca4 15bors: auto merge of #9484 : alexcrichton/rust/fix-cfg-inner-item, r=pcwalton...
[12:35:58] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[12:37:48] <afrey71> FWIW, I just figured I'm really comparing different structs. Derived Eq or TotalEq is working perfectly fine and my logic was to blame.
[12:39:00] *** Quits: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au) (Quit: ChatZilla 0.9.90.1 [Firefox 25.0/20130917123208])
[12:40:07] *** Joins: acabrera (alcabrera@4B9B70ED.4D823036.F18532AE.IP)
[12:40:16] *** Joins: fyolnish (fyolnish@moz-55AC10E6.uqwimax.jp)
[12:42:16] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[12:45:36] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[12:48:56] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[12:50:05] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.1)
[12:50:24] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[12:50:33] <bstrie> dbaupp: "`do x.times` is shorter than `for _ in range(0,x)`. length -= 10." how utterly delightful
[12:53:11] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[12:53:20] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Client exited)
[12:54:52] *** Joins: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca)
[12:55:19] <dbaupp> bstrie: haha :D
[12:55:32] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[12:55:49] *** Joins: Ferreus (ferreus@moz-AF602926.dyn.telefonica.de)
[12:55:56] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[12:55:56] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14d1a7ca4 to 14df97d23: 02http://git.io/N3iJvQ
[12:55:56] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[12:56:01] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[12:56:02] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/iGhpnQ
[12:56:02] <ghrust> 13rust/06auto 14e76bfae 15Daniel Micay: add `noreturn` attribute to functions returning !...
[12:56:02] <ghrust> 13rust/06auto 14b62b80e 15bors: auto merge of #9491 : thestinger/rust/noreturn, r=huonw...
[12:56:02] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[12:57:25] * dbaupp wants for -> :, in -> #, let -> ?
[12:57:33] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[12:57:37] *** Joins: sergi (textual@moz-DB55470C.upc-a.chello.nl)
[12:57:38] <klutzy> huh.. rustc.exe -O erases std::rt::thread::Thread::start function
[12:59:08] <klutzy> this seems fatal if it is not just my fault
[12:59:19] *** Joins: dschatz (dschatz@moz-FF1439E.bu.edu)
[12:59:27] <klutzy> test result: http://pastebin.com/JvGMPQdj
[12:59:56] * kimundi seems to be missing the context about bstries and dbaupps discussion
[13:00:09] <klutzy> this means, `let a = std::rt::thread::Thread::start; debug!("%?", a);` causes linker failure
[13:00:37] <klutzy> I started to dig into win32 network bugs and met this
[13:01:40] <dbaupp> kimundi: and you'll never know! muahahaha
[13:01:52] <kimundi> Might be for the best ;)
[13:01:52] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[13:02:19] <dbaupp> klutzy: it's not just win32, on linux 64 I only see substart too
[13:02:44] <dbaupp> kimundi: https://github.com/huonw/card-trace/commit/8d800f750b925bdf01162ae3b0a0902782d02283
[13:03:18] <kimundi> dbaupp: ah, *that*. xD
[13:03:21] <klutzy> dbaupp: uh.. so the function symbol does not exist in lib but it is usable?
[13:03:40] <dbaupp> klutzy: oh, I didn't test if I could use it or not
[13:03:47] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Quit: WeeChat 0.4.2-rc2)
[13:03:48] <klutzy> dbaupp: I'm confused since the function is used in std test
[13:04:28] <dbaupp> std::rt::thread::Thread::start
[13:04:43] <dbaupp> rusti: std::rt::thread::Thread::start
[13:04:46] -rusti- pastebinned 8 lines of output: http://sprunge.us/XQLh
[13:04:52] <klutzy> oh my.
[13:05:11] <dbaupp> klutzy: I think that's probably using the locally defined one; i.e. it's not linking against the libstd?
[13:05:19] <dbaupp> (stdtest, that is)
[13:06:50] <klutzy> dbaupp: so the test passes?
[13:07:19] *** Joins: aeqwa (aeqwa@moz-607ACAD7.dsl.tropolys.de)
[13:07:41] *** Joins: bt3ze (bt3ze@moz-3F0303DA.hsd1.va.comcast.net)
[13:07:57] *** Joins: Amaranth (travis@moz-F81BB56A.cpe.cableone.net)
[13:08:05] <dbaupp> klutzy: don't know, but the bots are passing stdtest, right?
[13:08:23] <klutzy> dbaupp: yep. the tests I'm looking is only ignored on windows.
[13:08:41] <dbaupp> oh, I see
[13:08:42] *** Joins: bytewise (bytewise@moz-4A801D04.unitymediagroup.de)
[13:08:44] <klutzy> and link failure seems bad anyway
[13:09:39] <dbaupp> yes, file a bug!
[13:10:19] <dbaupp> hm, rt::thread is private
[13:10:58] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[13:10:58] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14b62b80e to 14df97d23: 02http://git.io/N3iJvQ
[13:10:58] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[13:11:00] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[13:11:00] <ghrust> 01[13rust01] 15bors pushed 10 new commits to 06auto: 02http://git.io/L7E3xA
[13:11:00] <ghrust> 13rust/06auto 14eac429c 15Felix S. Klock II: Move the linearly-updated flag state into the Visitor.
[13:11:00] <ghrust> 13rust/06auto 14411dce8 15Felix S. Klock II: Fold type_use.rs Context into its Visitor.
[13:11:00] <ghrust> 13rust/06auto 142ceebf1 15Felix S. Klock II: Fold context into TransItemVisitor.
[13:11:02] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[13:11:48] *** Joins: dave1629 (dave@9853A2A9.599F34EC.DDE5D3F6.IP)
[13:12:12] <dbaupp> klutzy: I think this is just a consequence of cross-crate privacy not working: we shouldn't be able to access std::rt::thread anyway, so the error should be picked up by rustc, but it's not.
[13:12:49] <klutzy> dbaupp: aha! it makes sense
[13:13:35] *** Joins: wakandan (Mibbit@3ACC418E.8FF05F7.4605F140.IP)
[13:13:49] *** Joins: cowboyd (cowboyd@moz-1BD02A1E.sw.biz.rr.com)
[13:15:26] *** Quits: paulproteus (quassel@rose.makesad.us) (Ping timeout)
[13:15:46] *** Joins: paulproteus (quassel@moz-E86A3B42.makesad.us)
[13:16:23] <dschatz> does rust have veridic generics?
[13:16:27] <dschatz> variadic*
[13:17:28] <kimundi> dschatz: We don't have variadic anything, except macros, and there it's more a "we accept any syntax"
[13:17:47] <dbaupp> is there anyone on OSX who can attempt to reproduce https://github.com/mozilla/rust/issues/4655 for mw?
[13:17:58] <pnkfelix> dbaupp:  I can
[13:18:16] <dschatz> kimundi: thanks
[13:18:22] <pnkfelix> dbaupp: sorry, I mean, I will attempt to repro
[13:18:39] <dbaupp> pnkfelix: ok
[13:20:17] *** Quits: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca) (Client exited)
[13:21:34] *** Joins: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca)
[13:22:05] <klutzy> dbaupp: it seems fixed by #9432. thanks for hints!
[13:22:56] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Client exited)
[13:23:18] <dbaupp> klutzy: \o/ fixed bugs
[13:24:56] <klutzy> dbaupp: and I found similar bug report which is now closable https://github.com/mozilla/rust/issues/7388
[13:28:40] *** Quits: bt3ze (bt3ze@moz-3F0303DA.hsd1.va.comcast.net) (Ping timeout)
[13:29:50] *** Joins: bt3ze (bt3ze@moz-3F0303DA.hsd1.va.comcast.net)
[13:30:51] <geal> what is the common way to update the compiler after a git pull + make? After a "make install", I get this error while bulding anything: "error: can't find crate for `std`". I am on Mac OS. It also happens if I do a make uninstall before the pull
[13:31:05] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[13:31:24] <pnkfelix> geal: Hmm.  `make install` is supposed to warn you if it sees other libraries with different hashes
[13:31:27] *** Joins: saml (sam@moz-14C16814.cst.lightpath.net)
[13:31:38] <pnkfelix> geal: Do you not see those warnings when you run `make install` ?
[13:31:46] <kimundi> and make uninstall is supoosed to delete the old ones
[13:32:11] <geal> pnkfelix: there are no warnings, and I have checked, there are no libs with another hash
[13:32:27] <pnkfelix> geal: oh wait, you're getting "can't find crate â€¦"
[13:32:37] <dbaupp> klutzy: flagged that as needs test
[13:32:38] <pnkfelix> geal: (I thought you were getting something else.  never mind me.)
[13:32:46] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[13:33:04] <geal> also, a dtruss trace shows that it finds the correct library
[13:33:23] *** Joins: mindcat (mindcat@2B8A8DB5.BED0357D.E47F7BFE.IP)
[13:33:28] *** Joins: sw17ch (sw17ch@moz-675AFBCF.hsd1.mi.comcast.net)
[13:34:10] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[13:35:02] <mindcat> rusti: "rusti is not always here." 
[13:35:03] -rusti- "rusti is not always here."
[13:35:43] *** Joins: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP)
[13:35:43] *** ChanServ sets mode: +o jdm
[13:36:05] <wakandan> hi kimundi 
[13:36:11] <kimundi> hi
[13:36:31] <wakandan> I was trying to write a program which extends the sample linked list I wrote the other day
[13:36:42] <wakandan> to reverse a linked list
[13:37:00] <wakandan> I'm having some problem with the control structure :D
[13:37:36] <wakandan> so,the struct struct Node {  	value: uint,  	//make sure that  	next: Option<~Node>  }
[13:38:02] <wakandan> http://mibpaste.com/jqA375 <-- and the function
[13:38:31] <wakandan> when I compile, it returns  not all control paths return a value
[13:38:38] <kimundi> urg, horrible unformated mibpaste again xD
[13:39:10] <wakandan> it's unformatted?
[13:39:17] <kimundi> click on it :P
[13:39:27] <wakandan> basically I'm doing a iterative thingy
[13:39:35] <wakandan> errrgh
[13:40:10] <wakandan> https://gist.github.com/wakandan/6699744
[13:40:26] <kimundi> ah, much better :)
[13:40:34] <wakandan> yeah
[13:40:38] <kimundi> Okay, so you want to reverse a list in place, that is not make a copy, right?
[13:40:51] <wakandan> yeah, not making a copy 
[13:40:56] <wakandan> just reverse in place
[13:40:59] *** Joins: ahal (ahal@13F2CEC5.7672369.D8E68FF6.IP)
[13:41:08] <dbaupp> wakandan: it's the `;`'s on line 25
[13:41:21] <dbaupp> also, line 22 is doing nothing
[13:42:08] <wakandan> it was supposed to return the result, on 22
[13:42:14] <wakandan> so , remove the ";" as well?
[13:43:13] <kimundi> wakandan: Any block evaluates to the last expression in, but only if that last expression is not terminated with a ;
[13:43:43] <wakandan> ah ok
[13:43:46] <cmr> dbaupp: updated with the ~40 most recent commits
[13:43:55] <kimundi> wakandan: and you can't erly return the function that way
[13:43:57] <dbaupp> cmr: benchmarked?
[13:44:07] <wakandan> I can't?
[13:44:08] <wakandan> why not?
[13:44:08] <cmr> yeah
[13:44:15] <dbaupp> cmr: cool
[13:44:27] <dbaupp> cmr: when did they get uploaded? just now in one block?
[13:44:37] <kimundi> wakandan: because it just makes that block evaluate to that value.
[13:44:57] <kimundi> wakandan: Which is fine if it's a deeply nested one which evaluetes to the return value
[13:45:10] <cmr> dbaupp: yes
[13:45:29] * dbaupp kicks the updater by hand
[13:45:34] <kimundi> like fn foo() -> bool { { { { { true } } } } } // is fine
[13:45:56] <kimundi> fn foo() -> bool { { { { { true } } } }; false } // retrun always false
[13:46:20] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[13:46:23] <kimundi> fn foo() -> bool { { { { { true } } } }; } // type error, because that would mean "returns ()", which doesn't fit the -> bool
[13:46:41] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[13:47:02] <wakandan> ah
[13:47:06] <dbaupp> cmr: \o/ uploaded
[13:47:36] <kimundi> wakandan: (unrelated: we have loop { }  which is the same as while true { })
[13:47:49] <wakandan> oh 
[13:47:56] <wakandan> it's totally related :P
[13:47:59] <dbaupp> cmr: (although there only appears to be 29... how could you lie to me?!? :P )
[13:48:39] *** Joins: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[13:48:42] <dbaupp> kimundi, wakandan: that's *possibly* being removed, since loop is being renamed to continue, and so the looping loop may get removed too
[13:48:47] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[13:48:54] <wakandan> T_T
[13:48:57] <kimundi> dbaupp: wait, whhat?
[13:48:58] <wakandan> ok 
[13:49:15] <dbaupp> kimundi: it's mostly a rumour :P
[13:49:19] <kimundi> dbaupp: I know about loop; -> continue;, but didn't hear anything about removeing the actual loop {}
[13:49:20] <wakandan> lol
[13:49:22] <wakandan> "mostly"?
[13:49:48] <dbaupp> well, not even that; a proposal/question http://www.reddit.com/r/rust/comments/1n1mkb/meetingweekly20130924_08_status_continue_vs_loop/ccf01jl
[13:50:21] <kimundi> wakandan: for context, the keyword "loop" has two different meanings in rust
[13:50:44] <kimundi> wakandan: loop { loop; } == while true { continue; } in other languages
[13:50:59] <wakandan> o h
[13:51:14] <wakandan> damn
[13:51:23] <wakandan> I'm not sure I'm getting the solution
[13:51:33] <wakandan> the pattern matching is messing with my head
[13:51:56] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[13:52:00] <kimundi> wakandan: I think you can invert the list with one loop, one match, and two mutable variables outside the loop
[13:52:01] <wakandan> can you show me the code? I don't think I'm getting it
[13:52:09] <mindcat> rusti: let a = "617364670a";let mut b = 0 as uint; for i in ::std::iter::range_step(0,11,2) { printf!("%s ",a.slice_chars(b,i as uint));b = i as uint};println("")
[13:52:10] -rusti-  61 73 64 67 0a 
[13:52:10] -rusti- ()
[13:52:28] <wakandan> kimundi: hmm
[13:52:31] <cmr> dbaupp: maybe some of them failed
[13:52:38] <wakandan> kimundi: I needed 1 match for the head 
[13:52:44] <wakandan> kimundi: and another one in the loop it self
[13:52:53] <wakandan> kimundi: that's the only thing I could think of
[13:52:56] <kimundi> wakandan: you should be able to tread head and next the same
[13:53:00] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[13:53:06] <dbaupp> cmr: ok
[13:53:10] <mindcat> how make it easier?
[13:53:19] <kimundi> just a matter of shuffling the code around so that you only access next if the previous one is a SOme
[13:53:21] <wakandan> hmm
[13:54:05] *** Quits: pnkfelix (pnkfelix@A34AB32F.6B30872B.A515248C.IP) (Quit: Leaving.)
[13:54:51] *** Quits: BitPuffin (isak@moz-49828767.cust.tele2.se) (Ping timeout)
[13:56:04] <mindcat> rusti: let a = "aaabbbcccdddeeefffggghhhiii";let mut b = 0 as uint; for i in ::std::iter::range_step(0,a.len() + 1,2) { printf!("%s ",a.slice_chars(b,i as uint));b = i as uint};println("")
[13:56:05] -rusti-  aa ab bb cc cd dd ee ef ff gg gh hh ii 
[13:56:05] -rusti- ()
[13:56:47] <wakandan> kimundi: https://gist.github.com/wakandan/6699744 <-- updated
[13:56:54] <wakandan> kimundi: it's certainly wrong, 
[13:57:30] <wakandan> kimundi: like 4 is not type matching correctly 
[13:57:44] <wakandan> that was the reason I needed an outer match in the last version
[13:58:21] <kimundi> wakandan: you can'T access the .next one before you unwrapped it from the option of course
[13:58:29] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Ping timeout)
[13:58:58] <wakandan> kimundi: hmm, so is there other way I can do it?
[13:59:01] <kimundi> wakandan: I'd suggest this: have two mutable variables, store the head of the input list in on eof them, and then loop over it while building up an reverse list in the other one
[13:59:24] <kimundi> wakandan: I'm writing one right now, but try it yourself :)
[13:59:30] <wakandan> ok 
[14:00:31] <kimundi> wakandan: Ah, maybe you need two matches after all, my bad. Anyway, still in the process of writing it
[14:00:39] <wakandan> yup :(
[14:00:45] <wakandan> that's why it was messing with my head
[14:00:52] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[14:00:57] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Ping timeout)
[14:01:02] *** Joins: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com)
[14:01:14] *** Quits: ircloggr (nodebot@moz-218B8E8E.compute-1.amazonaws.com) (Client exited)
[14:01:25] *** Joins: ircloggr (nodebot@moz-218B8E8E.compute-1.amazonaws.com)
[14:01:50] *** Quits: dave1629 (dave@9853A2A9.599F34EC.DDE5D3F6.IP) (Quit: dave1629)
[14:02:12] <wakandan> how do I turn off user join/quite events?
[14:02:45] *** Joins: Ms2ger (Ms2ger@moz-45EBCB4A.adsl-dyn.isp.belgacom.be)
[14:03:59] <kimundi> wakandan: Btw, for such situations it's usually very helpful to build the function out of simpler functions. Have an append(), an pop_next(), an prepend() etc. Then you only need to think about how to manipulate the list to reverse it, not about how to manipulate the data structure
[14:04:21] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[14:05:44] *** Quits: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP) (Ping timeout)
[14:06:27] <dbaupp> cmr: in theory they should be appearing, but I can't seem them yet
[14:06:33] <wakandan> kimundi: I thought this practice was supposed to be simple T_T
[14:07:20] <kimundi> wakandan: It is more or less. But simple is relative to the own skill level. :P
[14:07:24] * dbaupp is possibly killing githubs jekyll builders with the 7733 files he has in the irfy repo :S
[14:07:41] <kimundi> wakandan: And it's very easy to loose sight of what is going on at the beginning
[14:07:50] <wakandan> kimundi: I don't know man, algorithmically this should be very simple 
[14:08:19] *** Quits: fyolnish (fyolnish@moz-55AC10E6.uqwimax.jp) (Client exited)
[14:10:07] <kimundi> wakandan: it would be if you where just shuffling unsafe pointers or garbage collected pointers around, where you're temporary allowed to make cycles or aliases
[14:10:22] <mindcat> rusti: let mut c : ~[&str] = ~[];let a = "aaabbbcccdddeeefffggghhhiii";let mut b = 0 as uint; for i in ::std::iter::range_step(0,a.len() + 1,2) { c.push(a.slice_chars(b,i as uint));c.push(" ");b = i as uint};let e = c.concat(); let e = e.trim();e.into_owned()
[14:10:23] -rusti- ~"aa ab bb cc cd dd ee ef ff gg gh hh ii"
[14:10:41] <wakandan> kimundi: yup, these points aside it becomes incredibly hard
[14:10:47] <wakandan> kimundi: i'm trying a different approach
[14:11:23] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[14:11:42] <kimundi> wakandan: I haven't tested it, but I think this might work: https://gist.github.com/Kimundi/6700200
[14:12:05] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[14:12:10] <kimundi> I cheated a bit by using take(), which basically contains the second match neccessary :P
[14:12:19] <olsonjeffery> heh. here am i freaking out because my new osx install is broken.. turns out, when i cloned all my stuff off of my old hd onto my new one, the xcode command line tools didn't get installed
[14:12:24] <olsonjeffery> can't build a rust program w/o a linker :/
[14:13:11] <kimundi> wakandan: Hm, howver my variant of the code basically makes a copy of each node I just realized
[14:13:14] *** Quits: bt3ze (bt3ze@moz-3F0303DA.hsd1.va.comcast.net) (Ping timeout)
[14:13:35] *** Quits: sergi (textual@moz-DB55470C.upc-a.chello.nl) (Quit: Computer has gone to sleep.)
[14:14:04] *** Quits: jaen (jaen@FB01674D.56B727FE.4B52F012.IP) (Ping timeout)
[14:14:38] <mindcat> My question, how can I do this simply?
[14:15:18] <mindcat> rusti: let mut c : ~[&str] = ~[];let a = "aaabbbcccdddeeefffggghhhiii";let mut b = 0 as uint; for i in ::std::iter::range_step(0,a.len() + 1,2) { c.push(a.slice_chars(b,i as uint));c.push(" ");b = i as uint};let e = c.concat(); let e = e.trim();e.into_owned()
[14:15:19] -rusti- ~"aa ab bb cc cd dd ee ef ff gg gh hh ii"
[14:15:29] <kimundi> wakandan: This could work and wouldn't copy: https://gist.github.com/Kimundi/6700200
[14:16:43] <kimundi> mindcat: gimme a few minutes
[14:16:51] *** Quits: nkoep (nik@moz-8331E7A6.pool.mediaways.net) (Ping timeout)
[14:16:52] <mindcat> kimundi: ok :D
[14:17:10] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[14:17:25] <mindcat> rusti: "ä½ å¥½".slice_to(2)
[14:17:26] -rusti- task <unnamed> failed at 'assertion failed: self.is_char_boundary(end)', /build/rust-git/src/rust/src/libstd/str.rs:1758
[14:17:26] -rusti- application terminated with error code 101
[14:17:26] <wakandan> kimundi: line 11 got problem
[14:17:43] <wakandan> mismatched types: expected `std::option::Option<~Node>` but found `~Node` (expected enum std::option::Option but found ~-ptr)
[14:17:59] <kimundi> ah, = Some(node)
[14:18:09] <dbaupp> rusti: 'ä½ '.len_utf8_bytes()
[14:18:09] -rusti- 3u
[14:18:24] <dbaupp> rusti: "ä½ å¥½".slice_to(3)
[14:18:24] -rusti- "\u4f60"
[14:18:29] <wakandan> what is that .take() again?
[14:18:42] <mindcat> rusti: "ä½ ".len()
[14:18:43] -rusti- 3u
[14:19:11] <wakandan> kimundi: this seems weird....let mut node = node;
[14:19:12] <kimundi> wakandan: swaps any Option value with None and returns the value that was there before
[14:19:24] <dbaupp> wakandan: http://static.rust-lang.org/doc/master/std/option/enum.Option.html#fn.take
[14:19:39] <wakandan> wow
[14:19:44] <kimundi> wakandan: the 'node' from the 'Some(node)' is a immutable binding, you need to store it in an mutable location to modify it
[14:19:48] <wakandan> is this the new doc builder or something you guys mentioned yesterday?
[14:19:56] <wakandan> looks nice
[14:20:00] <kimundi> wakandan: IN the future, it will be Some(mut node) => ...
[14:20:09] <wakandan> kimundi:  we can assign it to itself?
[14:20:12] <wakandan> T_T
[14:20:51] <kimundi> wakandan: No, it introduces an new variable that shaddows the old one
[14:21:00] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[14:21:00] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/L7E3xA
[14:21:00] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[14:21:04] <kimundi> rusti: let a = 45u; let a = "hello"; a
[14:21:04] -rusti- <anon>:7:13: 7:14 warning: unused variable: `a` [-W unused-variable (default)]
[14:21:05] -rusti- <anon>:7          let a = 45u; let a = "hello"; a
[14:21:05] -rusti-                       ^
[14:21:05] -rusti- "hello"
[14:21:22] <wakandan> wow
[14:21:26] <kimundi> rusti: let a = 45u; let mut a = 5u; a
[14:21:27] <wakandan> complete change of home page as well 
[14:21:27] -rusti- pastebinned 7 lines of output: http://sprunge.us/QRSG
[14:22:21] <wakandan> kimundi: example of .take()?
[14:22:59] <mindcat> rusti: #[allow(unused-variable)];let a = 1u; let a = 2u;a
[14:22:59] -rusti- <anon>:7:23: 7:24 error: expected `,` but found `-`
[14:23:00] -rusti- <anon>:7          #[allow(unused-variable)];let a = 1u; let a = 2u;a
[14:23:00] -rusti-                                 ^
[14:23:00] -rusti- application terminated with error code 101
[14:23:12] <mindcat> rusti: #[allow(unused_variable)];let a = 1u; let a = 2u;a
[14:23:12] -rusti- <anon>:7:33: 7:34 error: expected item after attributes
[14:23:12] -rusti- <anon>:7          #[allow(unused_variable)];let a = 1u; let a = 2u;a
[14:23:12] -rusti-                                           ^
[14:23:12] -rusti- error: aborting due to previous error
[14:23:12] -rusti- application terminated with error code 101
[14:23:43] <dbaupp> rusti: let mut x = Some(1i); (x.take(), x)
[14:23:44] -rusti- (Some(1), None)
[14:23:45] <kimundi> rusti: let mut a: Option<uint> = Some(5); let mut b: Option<uint> = None; let (c, d) = (a.take(), b.take()); (a,b,c,d)
[14:23:46] -rusti- (None, None, Some(5u), None)
[14:25:34] *** Quits: tgummerer (tgummerer@moz-46ECF9D2.kthopen.kth.se) (Ping timeout)
[14:25:58] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[14:25:58] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/jfpzhw
[14:25:58] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[14:25:58] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[14:25:59] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/2_rH6A
[14:25:59] <ghrust> 13rust/06auto 14e76bfae 15Daniel Micay: add `noreturn` attribute to functions returning !...
[14:25:59] <ghrust> 13rust/06auto 145375cf8 15bors: auto merge of #9491 : thestinger/rust/noreturn, r=huonw...
[14:25:59] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[14:26:04] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[14:26:21] <wakandan> kimundi: ah, so that's why you needed current_head.take() in the match
[14:26:29] <kimundi> wakandan: right
[14:26:30] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[14:26:31] *** Joins: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net)
[14:26:35] <mindcat> well, nobody answer my question now :(
[14:26:39] <wakandan> so that the current head could be referred again and again
[14:26:47] <kimundi> mindcat: I'm thinking :)
[14:27:06] <mindcat> kimundi: ohhh
[14:27:52] *** Quits: robn (robn@moz-76B0302C.static.internode.on.net) (Ping timeout)
[14:27:55] <kimundi> mindcat: The problem is that we don't offer an easy string iterator adapter for what you're doing right now
[14:27:56] *** Joins: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net)
[14:28:07] <kimundi> mindcat: So I need to think about it a bit harder :)
[14:28:33] <mindcat> kimundi: oh, ok.. :)
[14:29:08] <kimundi> mindcat: (Also multitaksing with wakandan at the moment :))
[14:29:32] <mindcat> kimundi: multitasking?
[14:29:38] <kimundi> yeah
[14:30:09] <bstrie> ugh, who redesigned rust-lang.org? now I can't get to the trunk tutorial docs :\
[14:30:12] <mindcat> kimundi: what is the multitasking? can be eat?
[14:30:25] *** Joins: sergi (textual@moz-DB55470C.upc-a.chello.nl)
[14:30:25] <dbaupp> bstrie: Seldaek 
[14:30:32] <kimundi> mindcat: :P
[14:30:39] <mindcat> kimundi: :P
[14:30:53] <bstrie> dbaupp: do you happen to know the url for the trunk tutorial docs?
[14:30:54] <Seldaek> bstrie: I'm sorry :P
[14:31:02] * bstrie shakes fist at Seldaek 
[14:31:06] <dbaupp> bstrie: yeah, s#/0.7/#/master/#
[14:31:16] <bstrie> thanks
[14:31:17] *** Joins: nkoep (nik@moz-7AAB85D1.vpn.rwth-aachen.de)
[14:31:28] *** Joins: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[14:31:30] *** Joins: bt3ze (bt3ze@63D72A3E.471081A5.DDE5D3F6.IP)
[14:31:32] *** Joins: robn (robn@moz-76B0302C.static.internode.on.net)
[14:31:40] <dbaupp> bstrie: also, typing "tu..." in your awesome bar (works for me :P )
[14:31:46] <Seldaek> bstrie: I meant for this PR to be delayed until 0.8 was tagged, at which point I hope the master tutorial will not have as many differences anymore since language changes should calm down
[14:32:33] <bstrie> dbaupp: my bar always redirects me to like the original 0.1 rust tutorial ;_;
[14:32:56] <Seldaek> I think it's best to keep the tutorial/manual links tracking the last release since that's usually what newcomers start with, but maybe it's a horrible idea
[14:33:00] <dbaupp> bstrie: ahahaha
[14:33:08] <bstrie> which is of course an xml error page at this point
[14:33:12] <bstrie> why do we have xml error pages???
[14:33:15] *** Quits: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[14:33:16] * dbaupp hates that error page
[14:33:19] <Seldaek> because S3 AFAIK
[14:33:22] <bstrie> Seldaek: make it up to me by creating an actual 404 page
[14:33:29] <bstrie> I never want to see an xml error page again
[14:33:35] <bstrie> wait
[14:33:36] <Seldaek> can one do that with S3?
[14:33:39] <bstrie> I already made an error page
[14:33:42] *** Quits: sergi (textual@moz-DB55470C.upc-a.chello.nl) (Quit: Computer has gone to sleep.)
[14:33:43] <bstrie> seleniac.org/404
[14:33:48] <bstrie> graydon didn't want it ;_;
[14:33:52] *** Joins: maik (maik@moz-9F5FA6A1.dip0.t-ipconnect.de)
[14:34:00] <bstrie> maybe brson will be more receptive
[14:34:18] <Seldaek> if it's possible to do, I'm happy to create a 404 one with links to the master & last-release tutorials :P
[14:34:28] <dbaupp> https://help.github.com/articles/custom-404-pages
[14:34:39] <dbaupp> (iirc, it's running on gh-pages)
[14:34:44] <Seldaek> but is github also serving static.* ?
[14:34:59] <Seldaek> I thought it was S3
[14:35:01] <dbaupp> Seldaek: oh! probably not
[14:35:03] <Seldaek> github does nicer ones http://www.rust-lang.org/sfmdlk
[14:35:32] <dbaupp> Seldaek: only because there's less xml
[14:35:48] * dbaupp wants an error page saying "this link appears to have rusted"
[14:36:00] <Seldaek> :P
[14:36:11] <dbaupp> bstrie: um, needs more gifs
[14:36:32] <bstrie> dbaupp: woah there. I don't presume that my users are made of bandwidth
[14:36:36] <kimundi> mindcat: Okay, a few things on your code confuse me. Could you in short describe what exactly it's supposed to do? split a string into chunks of 2 chars and add an space between each?
[14:36:44] <dbaupp> bstrie: well, repeat the one you have several times
[14:36:56] <bstrie> dbaupp: I think that will crash mosaic
[14:36:58] <bstrie> no can do
[14:37:14] <dbaupp> but it won't crash servo, so it's fine
[14:37:18] <Seldaek> dbaupp, bstrie: if anything this abomination of a 404 is a very good example why systems devs should not be allowed on the internets :p
[14:37:32] <Seldaek> only BBS and IRC for forward compatibility
[14:37:35] * dbaupp guesses it might actually crash servo
[14:37:51] <bstrie> Seldaek: I'm not a systems dev!!! I'm a python/php/javascript developer ;_;
[14:37:59] <bstrie> just a bad one!
[14:38:00] <dbaupp> Seldaek: oh, sorry. switching off my wifi.
[14:38:33] *** Quits: dbaupp (Thunderbir@moz-EAA09AEF.lns20.syd7.internode.on.net) (Quit: not allowed here any more)
[14:39:20] <Seldaek> bstrie: obviously you have some css knowledge, real systems devs publish plain text files 
[14:39:45] *** Joins: dbaupp (Thunderbir@moz-EAA09AEF.lns20.syd7.internode.on.net)
[14:40:43] <Seldaek> dbaupp: back over 56K modem I hope
[14:41:43] <bstrie> real systems devs just upload a text file containing the single character /u0404
[14:41:47] <bstrie> \u404
[14:41:58] <bstrie> something like that
[14:42:01] <bstrie> how do I even unicode
[14:42:41] <kimundi> rusti: char::from_uint(404)
[14:42:44] -rusti- pastebinned 11 lines of output: http://sprunge.us/IDTI
[14:42:50] <dbaupp> rusti: print("\u0404")
[14:42:50] -rusti- Ð„()
[14:43:18] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Ping timeout)
[14:43:43] <dbaupp> rusti: print(std::char::from_uint(404).unwrap())
[14:43:44] -rusti- <anon>:7:15: 7:35 error: unresolved name `std::char::from_uint`.
[14:43:44] -rusti- <anon>:7          print(std::char::from_uint(404).unwrap())
[14:43:44] -rusti-                         ^~~~~~~~~~~~~~~~~~~~
[14:43:44] -rusti- error: aborting due to previous error
[14:43:44] -rusti- application terminated with error code 101
[14:43:54] <dbaupp> rusti: print(std::char::from_u32(404).unwrap())
[14:43:55] -rusti- <anon>:7:15: 7:49 error: mismatched types: expected `&str` but found `char` (expected &str but found char)
[14:43:55] -rusti- <anon>:7          print(std::char::from_u32(404).unwrap())
[14:43:55] -rusti-                         ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[14:43:55] -rusti- error: aborting due to previous error
[14:43:55] -rusti- application terminated with error code 101
[14:44:07] <dbaupp> rusti: print!("{}", std::char::from_u32(404).unwrap())
[14:44:08] -rusti- Æ”()
[14:44:37] <tiffany> rusti: let rng = rand::rng(); rng.gen()
[14:44:39] -rusti- pastebinned 11 lines of output: http://sprunge.us/aTRF
[14:44:44] <engla> latin capital gamma?
[14:44:49] <tiffany> rusti: let rng = std::rand::rng(); rng.gen()
[14:45:24] -rusti- <anon>:7:37: 8:5 error: type `std::rand::IsaacRng` does not implement any method in scope named `gen`
[14:45:27] -rusti- <anon>:7          let rng = std::rand::rng(); rng.gen()
[14:45:29] -rusti- <anon>:8     };
[14:45:32] -rusti- error: aborting due to previous error
[14:45:33] -rusti- application terminated with error code 101
[14:45:58] <dbaupp> rusti: use std::rand::Rng; let rng = std::rand::rng(); rng.gen::<f32>()
[14:45:59] -rusti- <anon>:7:57: 7:60 error: cannot borrow immutable local variable as mutable
[14:45:59] -rusti- <anon>:7          use std::rand::Rng; let rng = std::rand::rng(); rng.gen::<f32>()
[14:45:59] -rusti-                                                                   ^~~
[14:45:59] -rusti- error: aborting due to previous error
[14:46:00] -rusti- application terminated with error code 101
[14:46:02] *** Quits: Kelet (Kelet@C253143A.824EB7CA.8245F614.IP) (Ping timeout)
[14:46:08] <dbaupp> rusti: use std::rand::Rng; let mut rng = std::rand::rng(); rng.gen::<f32>()
[14:46:09] -rusti- 0.56936383f32
[14:46:40] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[14:47:13] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[14:47:31] <dbaupp> tiffany: depending on what you are needing out of your RNG, std::rand::rng may not be what you want. (e.g. if you just need an occasional random number `std::rand::random()` is better.)
[14:47:46] <tiffany> how do you convert ~[T] to ~[T, ..N]?
[14:47:53] <tiffany> dbaupp: I need 512 random numbers
[14:48:25] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[14:48:44] <mindcat> kimundi: yes, 2 chars then a space
[14:48:57] <dbaupp> rusti: use std::rand::Rng; std::rand::task_rng().gen_vec::<u8>(10)
[14:48:58] -rusti- ~[243u8, 173u8, 84u8, 62u8, 0u8, 145u8, 57u8, 205u8, 74u8, 42u8]
[14:49:19] <dbaupp> tiffany: I don't think that conversion is possible without unsafe code at the moment
[14:49:24] <kimundi> mindcat: v
[14:49:25] <mindcat> kimundi: for hex display
[14:49:28] <kimundi> rusti: "aaabbbcccdddeeefffggghhhiii".iter().enumerate() .flat_map(|(i, c)| match i % 2 == 0 {     true  => Some(c).move_iter().chain(None.move_iter()),     false => Some(c).move_iter().chain(Some(' ').move_iter()) }).collect::<~str>()
[14:49:29] -rusti- ~"aa ab bb cc cd dd ee ef ff gg gh hh ii i"
[14:49:44] <dbaupp> kimundi: matching on a boolean? heh
[14:49:47] <kimundi> mindcat: wait, what? hex?
[14:50:30] <dbaupp> cmr: yay! irfy has new benchmark data! \o/
[14:50:31] <kimundi> Do you start of with u8 values? because that could be folded into this too :)
[14:50:36] *** Joins: ceninan (ceninan@moz-6BD43586.a370.priv.bahnhof.se)
[14:50:44] *** Quits: sw17ch (sw17ch@moz-675AFBCF.hsd1.mi.comcast.net) (Quit: sw17ch)
[14:50:46] <kimundi> dbaupp: Looked nicer :)
[14:51:01] <dbaupp> aaaand, we're 150MB worse than we were a month and a bit ago :(
[14:51:14] <bstrie> someone help me think of goofy css reddit flair for this person who pointed out the dead links in the sidebar
[14:51:21] <kimundi> dbaupp: Just make the devs feel better and muddle the data :P
[14:51:25] <bstrie> like how dbaupp has 'static
[14:52:20] <dbaupp> bstrie: .drop()
[14:52:29] <sp3d> bstrie: impl Drop for link? :P
[14:52:47] <bstrie> I like how we all came up with the same ideas
[14:52:52] <dbaupp> heh
[14:53:06] <kimundi> I'm trying to find something with *voide ... :P
[14:53:17] <dbaupp> `name as *void`
[14:53:27] <sp3d> I was thinking something about cycle collection for @ but I don't think it'd have any recognizable names in it
[14:53:29] <dbaupp> well, *std::libc::c_void
[14:53:30] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[14:53:48] <kimundi> ::std::unstable::gc::collect If we have something like that?
[14:54:08] <dbaupp> kimundi: the "devs" include me (to some extent :P ) and I can't just deceive myself like that
[14:54:20] <dbaupp> kimundi: (we don't have a gc yet, so no, we don't :P )
[14:54:26] <kimundi> dbaupp: Don't be barbaric! We have our own safe uninhibtable Void type :P
[14:54:52] <bstrie> hm, now I'm wondering if it's possible to use Drop as a trait object
[14:55:03] <dbaupp> rusti: unsafe { std::cast::transmute::<u64, std::util::Void>(1) }
[14:55:04] -rusti- <anon>:1:0: 1:0 error: transmute called on types with different sizes: u64 (64 bits) to std::util::Void (0 bits)
[14:55:04] -rusti- <anon>:1 extern mod extra;
[14:55:04] -rusti-          ^
[14:55:04] -rusti- application terminated with error code 101
[14:55:11] *** Joins: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net)
[14:55:22] <dbaupp> damn, plan foiled!
[14:55:23] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[14:55:26] <kimundi> *Nelson laugh*
[14:55:32] <dbaupp> rusti: unsafe { std::cast::transmute::<(), std::util::Void>(()) }
[14:55:33] -rusti- task <unnamed> failed at 'enum value matched no variant', /build/rust-git/src/rust/src/libstd/repr.rs:570
[14:55:33] -rusti- application terminated with error code 101
[14:55:34] *** Joins: Kelet (Kelet@C253143A.824EB7CA.8245F614.IP)
[14:55:36] <dbaupp> hah
[14:55:54] <dbaupp> rusti: let a = (~1) as ~Drop; 
[14:55:55] -rusti- <anon>:7:17: 7:30 error: failed to find an implementation of trait std::ops::Drop for int
[14:55:55] -rusti- <anon>:7          let a = (~1) as ~Drop; 
[14:55:55] -rusti-                           ^~~~~~~~~~~~~
[14:55:55] -rusti- application terminated with error code 101
[14:56:05] <dbaupp> rusti: let a = ~(~1) as ~Drop; 
[14:56:06] -rusti- <anon>:7:17: 7:31 error: failed to find an implementation of trait std::ops::Drop for ~int
[14:56:06] -rusti- <anon>:7          let a = ~(~1) as ~Drop; 
[14:56:06] -rusti-                           ^~~~~~~~~~~~~~
[14:56:06] -rusti- application terminated with error code 101
[14:56:29] <dbaupp> rusti: struct Foo; impl Drop for Foo { fn drop(&mut self) {} } let a = ~Foo as ~Drop; 
[14:56:30] -rusti- <anon>:7:69: 7:70 warning: unused variable: `a` [-W unused-variable (default)]
[14:56:30] -rusti- <anon>:7          struct Foo; impl Drop for Foo { fn drop(&mut self) {} } let a = ~Foo as ~Drop; 
[14:56:30] -rusti-                                                                               ^
[14:56:30] -rusti- ()
[14:56:44] <kimundi> rusti: let a = ~(extra::rc::Rc::new(5u)) as ~Drop; 
[14:56:44] <dbaupp> bstrie: seems to work-ish
[14:56:45] -rusti- pastebinned 8 lines of output: http://sprunge.us/jaaT
[14:56:46] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[14:56:53] <engla> drop is useless as trait object because you're not even allowed to call .drop()
[14:56:56] <dbaupp> rusti: struct Foo; impl Drop for Foo { fn drop(&mut self) {println("dropped")} } let _a = ~Foo as ~Drop; 
[14:56:56] <mindcat> rusti: use extra::hex::ToHex; let x = "yes, display the hex".as_bytes(); x.to_hex().iter().enumerate().flat_map(|(i, c)| match i % 2 == 0 { true => Some(c).move_iter().chain(None.move_iter()),     false =>  Some(c).move_iter().chain(Some(' ').move_iter())  }).collect::<~str>()
[14:56:58] -rusti- dropped
[14:56:58] -rusti- ()
[14:56:58] -rusti- pastebinned 11 lines of output: http://sprunge.us/WMDj
[14:57:03] <engla> if I understand this right
[14:57:05] *** Quits: maik (maik@moz-9F5FA6A1.dip0.t-ipconnect.de) (Ping timeout)
[14:57:10] *** Joins: dave1629 (dave@D0C61708.F93EBBF4.B7830B68.IP)
[14:57:10] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[14:57:12] <cmr> Eh, what? I feel like Drop should be impled for ~T, which calls T's destructor and then frees the box.
[14:57:13] <dbaupp> rusti: struct Foo; impl Drop for Foo { fn drop(&mut self) {println("dropped")} } let _a = ~Foo as ~Drop; _a.drop()
[14:57:13] -rusti- <anon>:7:107: 7:109 error: cannot borrow immutable dereference of ~ pointer as mutable
[14:57:13] -rusti- <anon>:7          struct Foo; impl Drop for Foo { fn drop(&mut self) {println("dropped")} } let _a = ~Foo as ~Drop; _a.drop()
[14:57:13] -rusti-                                                                                                                     ^~
[14:57:13] -rusti- error: aborting due to previous error
[14:57:15] -rusti- application terminated with error code 101
[14:57:28] <dbaupp> cmr: compiler magic, I guess
[14:57:51] <dbaupp> cmr: (like [int, .. 32] can be used with ==, but it doesn't impl Eq)
[14:58:55] <cmr> Too many magic!
[14:59:01] *** Quits: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca) (Client exited)
[14:59:03] * cmr is spoiled by all the things leaving the compiler into libstd
[14:59:19] <kimundi> mindcat: Ah. The to_hex() part you could build into the iterator chain, I guess. Might be a bit more complicated though... hm...
[15:00:01] <mindcat> kimundi: well, I think yours compact. I am working for this > https://gist.github.com/mindcat/6700892#file-gistfile1-rs-L53
[15:00:07] *** Joins: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca)
[15:00:19] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[15:00:33] *** Joins: riley (riley@8BA43816.9AA11D69.65DDFA89.IP)
[15:00:41] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[15:00:53] <mindcat> kimundi: it is TCP echo server
[15:01:13] <mindcat> dbaupp: :P
[15:01:21] *** Quits: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net) (Ping timeout)
[15:01:23] *** Joins: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net)
[15:02:34] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[15:04:14] *** Quits: bt3ze (bt3ze@63D72A3E.471081A5.DDE5D3F6.IP) (Ping timeout)
[15:05:23] *** Joins: bt3ze (bt3ze@63D72A3E.471081A5.DDE5D3F6.IP)
[15:05:25] *** Quits: canhtak (jeremy@moz-7DD34FFE.wl.t.ulaval.ca) (Quit: canhtak)
[15:05:54] *** Quits: bogen (dwight@moz-8B4E7E75.dsl.rcsntx.swbell.net) (Quit: Leaving.)
[15:06:24] *** Quits: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca) (Client exited)
[15:07:28] *** Joins: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca)
[15:08:36] *** Joins: fyolnish (fyolnish@moz-4E939215.uqwimax.jp)
[15:10:24] *** Quits: fyolnish (fyolnish@moz-4E939215.uqwimax.jp) (Ping timeout)
[15:10:33] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[15:10:52] *** Joins: hoverbear (andrew@moz-86FCBF4B.gv.shawcable.net)
[15:11:08] *** Joins: slackito (slackito@moz-7779E4A6.dyn.user.ono.com)
[15:12:02] *** Quits: hoverbear (andrew@moz-86FCBF4B.gv.shawcable.net) (Client exited)
[15:12:54] *** Quits: dave1629 (dave@D0C61708.F93EBBF4.B7830B68.IP) (Quit: dave1629)
[15:14:02] *** Joins: hoverbear (andrew@moz-86FCBF4B.gv.shawcable.net)
[15:15:30] *** Quits: hoverbear (andrew@moz-86FCBF4B.gv.shawcable.net) (Quit: hoverbear)
[15:15:46] <kimundi> mindcat: Okay, it got a bit longer, but that's because of missing utility functions:
[15:15:50] <kimundi> rusti: "yes, display the hex".byte_iter() .map(|b| {     let (a, b) = (b >> 4,b & 0xf);      let f = |c:uint| std::char::from_digit(c, 16).unwrap();     (f(a as uint), f(b as uint), ' ') }) .flat_map(|(a, b, c)| {     Some(a).move_iter().chain(         Some(b).move_iter().chain(             Some(c).move_iter()         )     ) }) .collect::<~str>()
[15:15:51] -rusti- ~"79 65 73 2c 20 64 69 73 70 6c 61 79 20 74 68 65 20 68 65 78 "
[15:16:44] *** Quits: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net) (Quit: eholk)
[15:17:43] <mindcat> kimundi: alright.. it complicated too
[15:18:05] *** Joins: squiddy (squiddy@moz-CF736F05.adsl.alicedsl.de)
[15:18:13] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[15:18:38] *** Joins: josedonizetti (josedonize@DF22210B.35D9DDB.8EF76F75.IP)
[15:18:48] *** Joins: fyolnish (fyolnish@moz-4E939215.uqwimax.jp)
[15:19:27] <kimundi> mindcat: Yeah, this one just has the advantage of allocating the resulting string once, instead of making multible copies during the transfomration
[15:19:35] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[15:19:43] <kimundi> mindcat: But if you don't car about that, then that'S fine ;)
[15:19:58] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[15:20:33] *** Quits: fyolnish (fyolnish@moz-4E939215.uqwimax.jp) (Ping timeout)
[15:21:26] <mindcat> kimundi: that means, it good for performance right?
[15:21:31] *** Joins: dave1629 (dave@D0C61708.F93EBBF4.B7830B68.IP)
[15:21:53] <mindcat> kimundi: :)
[15:22:14] <kimundi> mindcat: yeah, but for such trivial things it really doesn'T matter either way
[15:22:36] *** Quits: dave1629 (dave@D0C61708.F93EBBF4.B7830B68.IP) (Quit: dave1629)
[15:22:44] *** Joins: maik (maik@moz-9F5FA6A1.dip0.t-ipconnect.de)
[15:23:28] *** Joins: dave1629 (dave@D0C61708.F93EBBF4.B7830B68.IP)
[15:24:13] <kimundi> mindcat: If you don't care about allocations, then this works too:
[15:24:16] <kimundi> rusti: "yes, display the hex".as_bytes().map(|s| s.to_str_radix(16)).connect(" ")
[15:24:17] -rusti- ~"79 65 73 2c 20 64 69 73 70 6c 61 79 20 74 68 65 20 68 65 78"
[15:24:25] <kimundi> :P
[15:24:55] <kimundi> (Sorry that I didn't mention that first)
[15:25:03] *** Quits: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net) (Ping timeout)
[15:26:33] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[15:26:52] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[15:26:54] *** Joins: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP)
[15:26:54] *** ChanServ sets mode: +o jdm
[15:27:39] <mindcat> kimundi: alright :)
[15:28:20] <mindcat> kimundi: it is ok :)
[15:28:27] *** Joins: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net)
[15:29:07] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[15:29:22] *** Quits: wakandan (Mibbit@3ACC418E.8FF05F7.4605F140.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[15:29:28] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[15:29:28] *** ChanServ sets mode: +o pnkfelix
[15:30:43] *** Joins: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net)
[15:31:16] *** Quits: dave1629 (dave@D0C61708.F93EBBF4.B7830B68.IP) (Quit: dave1629)
[15:31:51] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[15:32:05] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[15:32:08] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[15:32:08] *** ChanServ sets mode: +o pnkfelix
[15:33:00] *** Joins: canhtak (jeremy@moz-7DD34FFE.wl.t.ulaval.ca)
[15:33:33] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[15:34:36] *** Quits: StarLight (StarLight@moz-D403F843.dynamic.avangarddsl.ru) (Ping timeout)
[15:34:50] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[15:34:54] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[15:37:05] *** Joins: jclements (jclements@moz-5DA334F9.wireless.calpoly.edu)
[15:38:24] *** Joins: StarLight (StarLight@moz-BD8682CE.dynamic.avangarddsl.ru)
[15:38:51] * jld rebases enum-discrim-size.new and... yep, more conflicts in debuginfo.rs.
[15:40:56] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[15:40:56] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/2_rH6A
[15:40:56] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[15:43:33] *** Joins: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net)
[15:43:39] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[15:45:56] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[15:45:56] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/j3-teg
[15:45:56] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[15:46:05] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[15:46:05] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/SHAE9w
[15:46:05] <ghrust> 13rust/06auto 145a78b54 15Alex Crichton: Disable zlib/libffi when configuring LLVM...
[15:46:05] <ghrust> 13rust/06auto 14ea51fc3 15bors: auto merge of #9428 : alexcrichton/rust/llvm-zlib-and-libffi, r=pnkfelix...
[15:46:06] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[15:48:11] *** Joins: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com)
[15:52:05] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[15:55:05] *** Joins: vk (chatzilla@3E9D68F2.B1163E0C.2A6693DD.IP)
[15:56:02] *** Quits: sk (sk@DA137125.E993C7C3.78DD174B.IP) (Ping timeout)
[15:56:54] *** Quits: jclements (jclements@moz-5DA334F9.wireless.calpoly.edu) (Ping timeout)
[15:57:38] *** Joins: infynyxx_ (infynyxx@moz-E95B370B.nyc.res.rr.com)
[15:58:04] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[15:59:18] *** Quits: infynyxx_ (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[15:59:45] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[16:00:06] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[16:01:05] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[16:01:06] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14ea51fc3 to 145375cf8: 02http://git.io/N3iJvQ
[16:01:06] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[16:01:09] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[16:01:09] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/vf1suQ
[16:01:09] <ghrust> 13rust/06auto 1404ca6dc 15Huon Wilson: std: Replace CloneableTuple with Tuple, which takes self by-val....
[16:01:09] <ghrust> 13rust/06auto 1442e5b5a 15bors: auto merge of #9493 : huonw/rust/move-tuples, r=thestinger...
[16:01:09] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[16:01:47] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[16:03:11] *** Quits: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net) (Client exited)
[16:05:44] *** Joins: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net)
[16:05:47] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Ping timeout)
[16:06:28] *** jorendorff_away is now known as jorendorff
[16:07:16] *** Quits: fabiand (fabiand@moz-B6C5F730.adsl.alicedsl.de) (Quit: Verlassend)
[16:09:00] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[16:09:13] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[16:11:55] *** Joins: hoverbear (andrew@moz-35C200B.wireless.uvic.ca)
[16:13:37] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[16:17:40] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[16:17:43] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[16:19:08] *** Joins: fyolnish (fyolnish@moz-118EF6DF.uqwimax.jp)
[16:19:10] *** Joins: feduser (feduser@572F51FB.76F0BAA0.650F25DA.IP)
[16:19:59] *** Joins: sergi (textual@moz-DB55470C.upc-a.chello.nl)
[16:20:49] *** Quits: fyolnish (fyolnish@moz-118EF6DF.uqwimax.jp) (Ping timeout)
[16:20:59] *** Quits: hoverbear (andrew@moz-35C200B.wireless.uvic.ca) (Quit: hoverbear)
[16:21:11] <tiffany> is there a function to do parallel computation?
[16:21:17] <tiffany> well
[16:21:22] <tiffany> my specific case is from_fn
[16:21:42] <cmr> tiffany: no. we had some stuff in extra::par but it was slow and generally not-good
[16:21:51] <kimundi> tiffany: We don't have fork-and-join parallelism yet, though there are interesting plans
[16:21:52] <cmr> what we really need is good fork-join support
[16:22:01] <tiffany> ah
[16:22:06] <tiffany> are there any solutions right now?
[16:22:07] * cmr waits patiently for nmatsakis to emerge from his pjs
[16:22:13] <tiffany> I'm playing with image generation and holy crap is this slow
[16:22:19] <kimundi> not really except roll your own with tasks
[16:22:34] <tiffany> I think part of the blame goes on bjz's noise library and part of it on me for using 24 perlin samples per pixel
[16:22:37] <cmr> thing with tasks is you want to have a task pool
[16:22:56] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[16:23:50] *** Quits: bt3ze (bt3ze@63D72A3E.471081A5.DDE5D3F6.IP) (Ping timeout)
[16:25:01] *** jdm is now known as jdm|f00ding
[16:25:10] <bjz_> tiffany: it would be good if we had a 2d version
[16:25:23] <tiffany> I'm actually using 3d noise
[16:25:26] <tiffany> I plan to generate skyboxes
[16:25:28] <bjz_> tiffany: ohh
[16:25:49] <bjz_> do you think simplex might be faster?
[16:25:54] *** Joins: hoverbear (andrew@moz-35C200B.wireless.uvic.ca)
[16:25:58] <tiffany> I don't really know how gimp's plasma noise generator is so fast
[16:26:03] *** Quits: mindcat (mindcat@2B8A8DB5.BED0357D.E47F7BFE.IP) (Quit: Lost terminal)
[16:26:11] <tiffany> maybe
[16:26:31] *** Joins: sk (sk@61A494B3.BA40E8A.AAC02D62.IP)
[16:26:58] <bjz_> http://webstaff.itn.liu.se/~stegu/simplexnoise/simplexnoise.pdf
[16:27:41] <bjz_> tiffany: seems like the algorithm is faster
[16:27:43] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[16:27:53] <tiffany> I heard it was faster but not by how much
[16:28:11] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[16:28:27] <nsf> https://github.com/mozilla/rust/blob/master/src/test/bench/noise.rs
[16:28:48] <nsf> somewhat related, actually 2d perlin noise in rust runs as fast as in C
[16:30:46] *** Quits: maik (maik@moz-9F5FA6A1.dip0.t-ipconnect.de) (Ping timeout)
[16:30:57] <nsf> tiffany: but if you want to make it really fast, use opencl or opengl shaders, I mean that's what GPUs are for :)
[16:31:12] <tiffany> yeah, opengl would be good for this
[16:31:33] <tiffany> I was hoping there'd be a quick to setup solution though
[16:31:38] *** Joins: steveklabnik (steveklabn@moz-5EF6C37C.socal.res.rr.com)
[16:31:55] <bjz_> nsf: yeah, my one is probably pretty bad: https://github.com/bjz/noise-rs/blob/master/src/noise/perlin.rs#L99
[16:32:21] <steveklabnik> ... oh, it's wednesday
[16:32:22] <steveklabnik> heh
[16:32:30] *** Quits: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net) (Ping timeout)
[16:32:30] <steveklabnik> i was like 'IS IT 0.8 DAY??!?!?!'
[16:32:31] <cmr> steveklabnik: what happens on wednesdays?
[16:32:33] <cmr> oh
[16:32:35] <steveklabnik> is it still tomorrow?
[16:32:39] <cmr> afaik
[16:32:58] <nsf> bjz_: looks legit, but the version I dropped a link on was tuned multiple times to make it as fast as the C version
[16:33:19] <bjz_> tiffany: did you compile with optimisations?
[16:33:25] <bjz_> nsf: ahh ok
[16:33:26] <steveklabnik> cmr: btw, did a metric ton of work on the build process for r4r last night. could use a little more, but it actually builds super fast and just what it needs to now
[16:33:27] <tiffany> uh.. how do you do that?
[16:33:30] <steveklabnik> dexy was SUPPOSED to do that
[16:33:30] *** Joins: maik (maik@moz-9F5FA6A1.dip0.t-ipconnect.de)
[16:33:46] <cmr> tiffany: -O / --opt-level={1,2,3}
[16:33:51] <bjz_> tiffany: I'm not sure how to do it with rustpkg
[16:33:57] <bjz_> cmr: ^?
[16:33:58] <steveklabnik> but when cutting calibre out of the process, it's like a few seconds rather than a minute and a half, and builds epubs that are a third of the size with no errors
[16:34:01] <steveklabnik> heh
[16:34:09] <cmr> Nice!
[16:34:12] <naq> nsf: are you the nsf that wrote termbox in gocode?
[16:34:29] <cmr> bjz_: same for rustpkg
[16:34:34] <nsf> I also wrote it in C, yes that's my
[16:34:36] <bjz_> coolies
[16:34:40] <nsf> me*
[16:34:49] <cmr> rustpkg takes a bunch of rustc options too
[16:34:51] <cmr> see rustpkg build -h
[16:35:00] <naq> nsf: I was only curious, nice to see you being interested in rust
[16:35:11] <bjz_> tiffany: try that and let me know
[16:35:53] <bjz_> nsf: are you going to write it in Rust as well? :P
[16:35:55] *** Joins: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net)
[16:36:03] <tiffany> that didn't help much
[16:36:03] <nsf> naq: well, I'm following rust development somewhat, but too afraid to use it as of now :) currently working on a C++11 bindings generator for lua
[16:36:09] <nsf> bjz_: maybe
[16:36:27] <naq> :)
[16:36:38] <bjz_> nsf: just making fun x)
[16:36:41] <tiffany> rusti: 512*512*24
[16:36:41] -rusti- 6291456
[16:36:50] <bjz_> tiffany: dang :(
[16:37:09] <nsf> bjz_: no, it's an interesting app to write in any language, as it has an extreme requirements to the event loop model the language offers
[16:37:29] <nsf> in C you either use an event library (like libuv) or plain POSIX select
[16:37:41] <nsf> in Go goroutines and their select statement fails to fulfil the requirements
[16:37:58] <nsf> fulfill*
[16:38:13] <nsf> it's interesting to see if rust is different
[16:38:35] <nsf> but it's not ready yet :) (the rust I mean)
[16:38:36] <cmr> nsf: and if you find rust deficient, we can make it better :)
[16:39:16] <bjz_> nsf: what do you mean when you say 'select'?
[16:39:23] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[16:39:25] <nsf> bjz_: which one? Go's or C's?
[16:39:34] <bjz_> nsf: both
[16:39:59] <nsf> in Go there is a select statement in the language, which blocks a goroutine and waits for various events to occur
[16:40:06] <sp3d> "man 3 select" explains POSIX select
[16:40:18] <nsf> well, it supports only waiting on channels send/receive
[16:40:22] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Client exited)
[16:40:34] <nsf> there are however many problems with that approach
[16:40:43] *** Joins: bt3ze (bt3ze@moz-3F0303DA.hsd1.va.comcast.net)
[16:40:48] <bjz_> yeah?
[16:40:50] <nsf> once you're blocked in a syscall, you cannot "unblock" it
[16:41:02] <nsf> and Go doesn't offer poller for ordinary file reads
[16:41:02] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[16:41:02] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1442e5b5a to 145375cf8: 02http://git.io/N3iJvQ
[16:41:02] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[16:41:03] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[16:41:03] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/ln7-8A
[16:41:03] <ghrust> 13rust/06auto 145a78b54 15Alex Crichton: Disable zlib/libffi when configuring LLVM...
[16:41:03] <ghrust> 13rust/06auto 14cf62672 15bors: auto merge of #9428 : alexcrichton/rust/llvm-zlib-and-libffi, r=pnkfelix...
[16:41:03] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[16:41:15] <nsf> it offers a epoll/select/whatever based poller only for sockets
[16:41:34] <nsf> so I can't just start a goroutine for termbox and block it in read call to /dev/tty
[16:41:40] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[16:41:48] <bjz_> how did you get around those things with termbox-go?
[16:41:52] <nsf> because user may decide to shutdown the termbox library and use terminal for whatever needs he desires
[16:42:10] <nsf> termbox-go on windows is just broken in that regard, on posix it uses SIGIO :)
[16:42:18] <bjz_> ahh
[16:42:43] <bjz_> do you think Rust might be up to the challenge?
[16:42:57] <nsf> well, rust uses libuv as far as I know
[16:43:04] <nsf> depends how much of libuv will be exposed in rust
[16:43:07] *** Joins: azakai (alon@moz-BBE3ABD.mv.mozilla.com)
[16:43:15] <nsf> maybe it'll become a standard way of doing all kinds of events in rust
[16:43:27] <nsf> and that way the solution to termbox problem on *nix should be easy
[16:43:39] <cmr> Well our IO library is abstracted from libuv, libuv is just the only implementation right now.
[16:43:58] <naq> nsf: I meant "and gocode" not "in gocode", it's a nice daemon, I was actually asking myself how did you implement the daemon like behaviour, last time I searched around go didn't seem to offer many possibilities there
[16:44:00] <cmr> newrt is actually quite neat in how it works
[16:44:32] <naq> I didn't check the code not once :P
[16:44:46] <nsf> naq: gocode just starts itself using exec or whatever go offers
[16:45:04] <olsonjeffery> huh. so how do you compile multiple source files into a single crate? can you do it in one rustc call?
[16:45:07] <nsf> naq: that's the tricky part: https://github.com/nsf/gocode/blob/master/os_windows.go#L25-L34
[16:45:09] <naq> ah, nothing fancy
[16:45:12] <olsonjeffery> like `rustc --bin main.rs foo.rs` barfs
[16:45:23] <nsf> naq: and this: https://github.com/nsf/gocode/blob/master/os_posix.go#L16-L38
[16:45:23] *** Quits: hoverbear (andrew@moz-35C200B.wireless.uvic.ca) (Quit: hoverbear)
[16:45:30] <olsonjeffery> and just trying to compile main.rs, where it uses `use foo;` fails because it can't find foo...
[16:45:48] <cmr> olsonjeffery: `mod foo;`
[16:45:58] <olsonjeffery> ugh. thanks.
[16:46:09] <nsf> cmr: well, libraries like termbox need to do async event dispatching on file reads (/dev/tty) and signals (SIGWINCH) at the same time, hopefully without blocking anything at all, because at an arbitrary moment user may decide to shutdown the library
[16:46:09] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[16:46:11] <olsonjeffery> ive been working on the libraries for too long
[16:46:16] <olsonjeffery> i can't even build a program, heh.
[16:46:18] <cmr> olsonjeffery: http://static.rust-lang.org/doc/master/tutorial.html#crates-and-the-module-system :P
[16:46:24] <nsf> cmr: if rust eventually provides something for these needs, I'm happy about it :)
[16:46:26] <naq> nsf: I've imagined something else, thanks
[16:46:31] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[16:46:56] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[16:47:01] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[16:47:09] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[16:47:37] <nsf> naq: well, Go cannot fork() due to complicated runtime, therefore it's the only way
[16:48:13] <nsf> it's an implementation detail of the runtime after all, maybe it will be different in a couple of years
[16:48:15] <nsf> who knows
[16:48:18] *** Quits: feduser (feduser@572F51FB.76F0BAA0.650F25DA.IP) (Ping timeout)
[16:49:34] <bjz_> tiffany: did you get much difference with 2/3
[16:49:38] <naq> I guess we'll have to wait and see how it evolves
[16:49:43] *** Joins: fyolnish (fyolnish@moz-DE1C8B5C.uqwimax.jp)
[16:49:49] <tiffany> I'll try actually timing it
[16:51:02] <nsf> naq: sure
[16:52:02] <tiffany> okay
[16:52:09] <tiffany> opt level 3 is apparently 4 times faster
[16:52:14] <tiffany> I am really bad at measuring time
[16:52:20] <cmr> lol
[16:52:43] *** Joins: hoverbear (andrew@moz-63B2AC87.wireless.uvic.ca)
[16:54:17] <nsf> have you guys watched the latest going native conf? it was surprising for me to see that all C++ gurus admit using size_t was a mistake in STL
[16:54:20] *** Quits: fyolnish (fyolnish@moz-DE1C8B5C.uqwimax.jp) (Client exited)
[16:54:22] *** Joins: fyolnish (fyolnish@moz-DE1C8B5C.uqwimax.jp)
[16:54:29] <cmr> nsf: I've watched some of the stuff
[16:54:38] <nsf> and strongly recommend using signed ints for everything unless you really need unsigned
[16:54:41] <cmr> Bjarne's modern c++ thing smelled very strongly of rust :)
[16:55:08] *** Quits: sergi (textual@moz-DB55470C.upc-a.chello.nl) (Quit: Computer has gone to sleep.)
[16:55:15] <nsf> and I like the adobe guy last presentation
[16:55:17] <nsf> about inheritance
[16:55:20] <nsf> I liked*
[16:55:21] <engla> nsf: why is this? because of wrap around below zero?
[16:55:38] <nsf> engla: because of the amount of programmer mistakes it creates
[16:55:45] <nsf> underflows mostly, yeah
[16:56:22] <nsf> well, it's obvious to me, just was surprising to see that C++ gurus think so as well
[16:56:36] <engla> ok it is not obvious to me
[16:57:19] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Client exited)
[16:57:20] <nsf> in a strongly typed language like rust using ints as default matters simply because of a pain of manual integer casts
[16:57:32] <nsf> in C++, there is a good blog post about it, one moment
[16:57:49] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[16:57:54] <nsf> http://www.soundsoftware.ac.uk/c-pitfall-unsigned
[16:57:56] <nsf> there
[16:57:58] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Client exited)
[16:58:08] <engla> thanks
[16:58:39] <nsf> I see it somewhat related, but can express it differently
[16:58:54] <nsf> many think that using unsigned when the number shouldn't be negative makes sense
[16:59:05] <nsf> it's true, but only if we're talking about storing the number in memory
[16:59:24] <nsf> unfortuantelly (or fortuantelly) we write programs, where we do calculations, sizes are part of them often
[16:59:28] *** Quits: saneyuki (saneyuki@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[16:59:34] <nsf> and this rule "cannot be negative" doesn't apply to calculations
[17:00:12] <nsf> the example in the blog post above shows when it hurts
[17:00:13] <engla> well it often still does if your variables have a relation, like size and capacity
[17:00:37] <kimundi> nsf: Well, the story would look different if the language would just trap all over and underflows :)
[17:00:42] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[17:01:01] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[17:01:01] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14cf62672 to 145375cf8: 02http://git.io/N3iJvQ
[17:01:01] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[17:01:03] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[17:01:03] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/eBjRJg
[17:01:03] <ghrust> 13rust/06auto 145a78b54 15Alex Crichton: Disable zlib/libffi when configuring LLVM...
[17:01:03] <ghrust> 13rust/06auto 14b6f74e6 15bors: auto merge of #9428 : alexcrichton/rust/llvm-zlib-and-libffi, r=pnkfelix...
[17:01:03] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[17:01:23] <Ms2ger> kimundi, that would be lovely
[17:01:35] <nsf> engla: well, I guess, but in practice it just brings all sorts of pain in C/C++ especially since ints and uints can be mixed freely
[17:01:45] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[17:01:53] <nsf> kimundi: yes
[17:02:16] <nsf> but in C unsigned overflow is defined sadly
[17:02:27] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Ping timeout)
[17:02:28] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:02:30] <pnkfelix> nsf: we might change that
[17:02:36] <nsf> and now we have clang's sanitizer to catch signed overflows (I think it can do that)
[17:02:37] *** Quits: bt3ze (bt3ze@moz-3F0303DA.hsd1.va.comcast.net) (Ping timeout)
[17:02:42] <pnkfelix> nsf: it was a topic of discussion at the mtg last night
[17:02:52] <engla> that's why it's not called overflow nsf, because it's not an error
[17:02:59] <nsf> pnkfelix: interesting, well, whatever you think is right guys :)
[17:03:39] <engla> pnkfelix: don't you think it would be logical to preserve the current behavior of the fixed-width types u8 to u64
[17:03:41] <kimundi> Apparently there is a paper that shows that if you implement it in a non-stupid way, trapping all integer over and underflows does cause a surprisingly low performance penalty.
[17:03:42] <pnkfelix> nsf: we don't have the data yet to know if we can afford to put in checks, but we'd like to try.
[17:04:02] <cmr> nsf: the thing is, you shouldn't be using int/uint most of the time, rather a proper non-fixed-size numeric type.
[17:04:08] <nsf> regarding rust I can only tell my experience from Go, where type system is somewhat as strong (actually stronger I think regarding int casts)
[17:04:13] <bjz_> tiffany: woww
[17:04:14] <pnkfelix> engla: the current thinking is that we'd still offer modular arithmetic, but you'd have to use different primitives.
[17:04:23] <kimundi> cmr: well depends on what you're doing
[17:04:34] <cmr> pnkfelix: hmmm, that's interesting
[17:04:34] <bjz_> tiffany: does that help with you rendering times?
[17:04:36] <nsf> and in Go unless you use ints, you're doomed with manual type casting, it sucks
[17:04:46] <cmr> pnkfelix: I was thinking same primitives, but -Z checked-arithmetic to instrument them.
[17:04:52] * cmr reads the mtg notes
[17:04:53] <pnkfelix> engla: the {+,-,*,â€¦} operators would all fail! on overflow.  (I think; that was what I understood it to mean)
[17:04:54] *** Joins: andrew-d_w (andrew-d_w@moz-5A92CAFF.dsl.static.sonic.net)
[17:05:09] <cmr> https://github.com/mozilla/rust/wiki/Meeting-weekly-2013-09-24#continue \o/
[17:05:36] <engla> pnkfelix: ok. I fixed the str and vec overflow bugs I could find, but those were all related to unsafe code and interacting with realloc_raw  etc.. so I'm not sure if trapping by default would have any effect
[17:05:39] *** Joins: jgilbert (jgilbert@moz-4C088FCE.hsd1.ca.comcast.net)
[17:05:58] <steveklabnik> cmr: :/ idk how i feel about that
[17:06:03] <engla> given that this was already in an unsafe { } area, those might well have existed inside unchecked { } as well
[17:06:47] <pnkfelix> engla: maybe.  I don't know.  I'm not the right person to debate with about this, I come from a Lisp background.
[17:07:01] <bjz_> cmr: \o/
[17:07:26] *** Parts: lbergstrom (Adium@moz-5D8E4B14.lightspeed.cicril.sbcglobal.net) ()
[17:07:38] <cmr> https://github.com/mozilla/rust/wiki/Meeting-weekly-2013-09-24#comment-nesting making the language irregular is sad, but I think it's probably worth it.
[17:08:18] *** Joins: jonathanmarvens (jonathanma@moz-18997F78.bu.edu)
[17:08:23] *** Quits: Ralith (ralith@moz-36466B9F.customer.broadstripe.net) (Ping timeout)
[17:08:42] <nsf> I can't say that I miss comment nesting :) I just try to use // and who needs /* */
[17:09:29] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[17:09:29] *** ChanServ sets mode: +ao pcwalton pcwalton
[17:09:39] <nsf> you can put /* */ in the // comment though :)
[17:09:40] <engla> pnkfelix: ok!
[17:09:47] <nsf> if you really need it for docs or something
[17:10:18] *** Joins: slack1256 (slack@moz-B16C864A.baf.movistar.cl)
[17:11:28] <nsf> overflow protections for everything sounds good actually
[17:11:36] *** Quits: hoverbear (andrew@moz-63B2AC87.wireless.uvic.ca) (Quit: hoverbear)
[17:12:07] <engla> what happens if you try to combine the raw strings discussion with doc comments?
[17:12:08] <bjz_> cmr: what does it mean if the language is not regular?
[17:12:14] <benh> really tempted to suggest we remove block comments entirely so that all the line comment forms nest naurally
[17:12:34] <bjz_> yeah, I try to never use block comments
[17:12:41] <nsf> +1
[17:12:41] *** Quits: jonathanmarvens (jonathanma@moz-18997F78.bu.edu) (Ping timeout)
[17:12:55] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[17:12:57] <bjz_> nsf: +1 for what?
[17:13:02] <pnkfelix> bjz_: it means you cannot tokenize it with just a standard regular-expression
[17:13:02] <nsf> for not using block comments
[17:13:10] <cmr> bjz_: it means you can't have easy syntax highlighting just using regex :p
[17:13:18] <bjz_> ahh
[17:13:22] <benh> Of course then I'd be completely helpless if I ever have to comment out a huge block of code outside of my natural text editor environment :(
[17:13:32] *** Joins: bt3ze (bt3ze@moz-3F0303DA.hsd1.va.comcast.net)
[17:14:07] *** Joins: Kruppe (user@moz-253119B0.esg.uwaterloo.ca)
[17:14:08] <nsf> the editor I wrote for myself has emacs-like macros :)
[17:14:24] <pnkfelix> bjz: i had just wanted to confirm that we weren't committed to regularness, because that would mean you couldn't use "choose-your-own-end-delimiter" for raw strings.
[17:14:25] *** Joins: jonathanmarvens (jonathanma@moz-18997F78.bu.edu)
[17:14:34] <nsf> hm.. maybe I should actually add block (un)commenting feature
[17:14:45] <bjz_> pnkfelix: yep ok
[17:15:40] <cmr> I feel like raw strings should be the default, and we should have a syntax ext for escaping.
[17:15:56] <nsf> ok, I'm back to my C++ fun, copy & pasting 200 lines of cityhash64 + murmur2 to provide a custom hash for unordered_map, because STL doesn't provide a generic hash for byte ranges
[17:15:58] <nsf> :P
[17:16:18] *** Joins: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net)
[17:16:27] <jld> ...oh.  I bet LLVM doesn't appreciate trying to zero-"extend" i64 to i32.
[17:16:31] <cmr> ...except for \", which seems necessary...
[17:16:31] *** Joins: RMF (RMF@moz-A7EEA849.dsl.telepac.pt)
[17:16:51] * cmr hates strings more and more
[17:17:14] <pnkfelix> cmr: \" implies you need \\  too, don't forget
[17:17:15] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[17:18:01] <engla> except in python
[17:18:36] <benh> I'm surprised there's so much enthusiasm for raw strings
[17:18:36] <nsf> I like lua raw strings
[17:18:50] <nsf> there was an argument that they don't look like strings and that's exactly why I like them
[17:19:18] <nsf> although C++11 raw strings are ok too, why not
[17:19:20] <nsf> :)
[17:19:39] <nsf> been writing a lot of embedded lua code in C++11 recently, works just fine
[17:20:01] <c74d> If I have multiple logically-related struct types that all have mostly the same fields, is there a way to â€œinheritâ€ those common fields from a â€œancestorâ€ struct type, other than including that ancestor as a field in each â€œdescendantâ€ struct type?
[17:20:07] <doomlord_> c++ + lua.. works for gamedevs..
[17:20:13] <cmr> c74d: no
[17:20:31] <nejucomo> benh: Why are you surprised about raw string support?
[17:20:34] <c74d> cmr: Okay, thanks.
[17:21:02] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[17:21:15] <benh> nejucomo: I thought everybody was mostly happy just escaping all the backslashes in windows paths in exchange for a smaller/simpler lexical grammar
[17:21:20] * nejucomo ponders a macro to document "commented-out" code blocks: disabled!(  â€¦ items â€¦ )
[17:21:35] <benh> and now we're talking about throwing out non-raw strings? huh.
[17:21:52] <nejucomo> benh: There's also regular expression syntax which uses \.
[17:21:56] <cmr> benh: I think I'm the only one talking about it :p
[17:21:58] <pnkfelix> benh: well, I only saw cmr say that..
[17:22:10] <benh> good enough for me!
[17:22:30] <benh> nejucomo: I'm happy with lua's quasi-regular-expression syntax that just uses % in place of \ everywhere, really
[17:22:48] <benh> worked for printf!
[17:23:39] <benh> I'm also afraid of having to use some weird non-default string syntax for every format string because raw string supports lets format strings keep \{ without having to write \\\\ for \ :)
[17:23:56] <nejucomo> regex backslash is the only case I personally run into frequently where I desire raw strings.  I rarely write windows software.  I don't recall many other common string-literal embedded syntaxes with backslash.
[17:24:14] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[17:24:39] <nsf> guys if you like regexps (or hate them), I suggest checking out "lpeg"
[17:24:51] <nsf> it's a lua library, but it can be written as well in any other language
[17:24:58] <nsf> makes life much simpler
[17:24:58] <nejucomo> Is that a PEG parser / parser generator?
[17:25:03] <nsf> yes
[17:25:12] <cmr> nsf: I don't think it'd be nearly as nice in Rust as it is in Lua, since our operators aren't as flexible.
[17:25:14] <nsf> the API is super friendly though
[17:25:20] <nsf> that's why I said lpeg instead of peg
[17:25:28] <tiffany> I made a parsing library inspired by lpeg
[17:25:32] <kimundi> benh: I think it comes down to familiarity. Having a escaping "" with separate raw string syntax is what most other mainstream languages do. If we wanted to alienate those users, we'd have unified struct and enum a long time ago. :)
[17:25:41] *** Joins: eholk (eholk@D555BD42.7EDA02CF.51B6877.IP)
[17:25:44] <tiffany> lpeg has really awful error checking though, and by that I mean it doesn't have any at all
[17:25:45] <engla> cmr: infix function call syntax!
[17:25:47] <tiffany> mine has pretty good errors
[17:25:51] *** Quits: valenting (Thunderbir@C6866972.77435D89.FB866788.IP) (Ping timeout)
[17:25:52] <nsf> cmr: in rust op overload works only on similar types? but in lua that's the case as well
[17:25:54] <tiffany> the library is in rust
[17:26:04] <tiffany> cmr: it's ugly but it works
[17:26:08] <nsf> cmr: and rust has macros :)
[17:26:11] <nejucomo> tiffany: Repository?
[17:26:14] <cmr> nsf: macros! good point
[17:26:37] <kimundi> benh: What do you mean with "being afraid of non-default string syntax" ?
[17:26:39] <tiffany> https://github.com/tiffany352/frscript/blob/master/parse.rs
[17:26:46] <tiffany> I should probably give it its own repo
[17:26:46] <engla> nsf: rust operator overloads only use &T, &U arguments, so that's inflexible
[17:26:56] <nsf> ah
[17:27:13] *** Quits: heftig (heftig@moz-AACE7C14.dip0.t-ipconnect.de) (Ping timeout)
[17:27:18] <benh> kimundi: I want to keep typing fmt!("format string goes here"), not make a habit out of fmt!(r"format string goes here") just for the odd escaped {
[17:27:21] <tiffany> there are some operators available with mien
[17:27:22] <doomlord_> at the minute if you want to overload operators on 2 types, you need to write a bit of boiler plate like double dispatch i think?
[17:27:23] <tiffany> such as + and *
[17:27:23] <nejucomo> If we remove string literals entirely we can completely sidestep this issue!  </troll>
[17:27:30] *** Joins: heftig (heftig@moz-AACE7C14.dip0.t-ipconnect.de)
[17:27:37] <cmr> nejucomo++
[17:27:42] *** Quits: Guest (textual@moz-E06F46F0.corp.bitshelter.com) (Ping timeout)
[17:27:45] <cmr> No more strings! Would make me a very happy human :)
[17:27:58] <doomlord_> haskell has multi-parameter typeclasses , i wonder if those would translate into rust..
[17:28:15] *** Quits: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com) (Ping timeout)
[17:28:22] <cmr> doomlord_: I don't know haskell but that sounds a lot like trait Foo<T, U, V> ?
[17:28:28] <nsf> what I personally like about lpeg, there is just one match function, no need to remember various regexp APIs ways to capture things or what not
[17:28:29] <nejucomo> doomlord_: Do you mean without type-checker changes?
[17:28:35] <kimundi> benh: format! could just parse all escapes that the regular string syntax parses+the additional ones for { ?
[17:28:58] <benh> But then I still need to use raw strings?
[17:29:05] <kimundi> benh: true
[17:29:22] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[17:29:23] <nejucomo> cmr: I'm not certain, but I believe multi-param type classes are different than rust trait Foo<T, U, V>
[17:29:24] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[17:29:31] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[17:29:32] <nejucomo> I don't understand the latter well yet.
[17:30:02] <kimundi> format!(r"\n") == format!("\\n") == format!("\n")
[17:30:06] <nejucomo> Does that mean in order to declare an impl you must provide three types (or type variables)?
[17:30:15] *** Joins: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com)
[17:30:18] <tiffany> I should probably add custom matching to my parser library
[17:31:09] <cmr> nejucomo: yes
[17:32:03] *** Joins: six600110 (six600110@moz-3C5CCD60.neo.res.rr.com)
[17:32:09] *** Quits: CarpNet (ac@moz-FD24B77.sohonet.co.uk) (Quit: Leaving)
[17:32:24] <pcwalton> I think we should write a FAQ for each Go feature that is not in Rust explaining why it is not in Rust
[17:32:40] <Ms2ger> Do it! :)
[17:32:42] <benh> And then turn around and do the same for Haskell features ;)
[17:32:43] *** Quits: eholk (eholk@D555BD42.7EDA02CF.51B6877.IP) (Ping timeout)
[17:32:43] <cmr> pcwalton: re: the recent ml post?
[17:32:45] <pcwalton> yeah
[17:32:51] <cmr> yeah
[17:32:53] <pcwalton> I've answered these more times than I care to count
[17:32:54] <erickt> heh
[17:33:21] * erickt looks forward to the day where Go and Haskell need a FAQ to explain why they aren't rust
[17:33:34] <tiffany> I considered replying to that post
[17:33:48] <Ms2ger> erickt, wouldn't hold my breath ;)
[17:34:10] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[17:34:57] *** Quits: Ferreus (ferreus@moz-AF602926.dyn.telefonica.de) (Ping timeout)
[17:35:07] *** Joins: bogen (dwight@moz-8B4E7E75.dsl.rcsntx.swbell.net)
[17:35:38] <bogen> how can one have a structure with mutable fields?
[17:36:00] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[17:36:01] <pnkfelix> bogen: let mut s = MyStruct{ foo: 3, bar: 4 };
[17:37:06] <bogen> pnkfelix: I did that, but I still get error: cannot assign to immutable field
[17:37:07] <nejucomo> bogen: It might help to read the (short) tutorial section on ownership: http://static.rust-lang.org/doc/0.7/tutorial.html#ownership
[17:37:18] <pnkfelix> bogen: put up a gist?
[17:37:21] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[17:37:43] <bogen> pnkfelix: sure, it will be a minute
[17:38:08] *** jdm|f00ding is now known as jdm
[17:38:22] <nejucomo> bogen: Are there any '@' types inside the structure?
[17:38:32] <nejucomo> (or '&')
[17:39:22] <bogen> no, they are enums or bool
[17:42:02] *** Parts: acabrera (alcabrera@4B9B70ED.4D823036.F18532AE.IP) ()
[17:42:47] <bogen> pnkfelix: well, when I create an isocated case it works, I'll troubleshoot it
[17:43:02] *** Quits: squiddy (squiddy@moz-CF736F05.adsl.alicedsl.de) (Ping timeout)
[17:44:56] *** Quits: jgilbert (jgilbert@moz-4C088FCE.hsd1.ca.comcast.net) (Ping timeout)
[17:45:04] *** Joins: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP)
[17:45:07] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: Leaving.)
[17:47:49] *** Joins: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:48:13] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[17:48:32] *** Quits: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[17:48:53] <bogen> pnkfelix: fixed it.... (&mut self, ...) in member functions
[17:49:20] <doomlord_> ( multiparameter typeclasses in haskell - i'm not completely familiar, but i'm told that you can implement polymorphism for multiple types without needing the 'double-dispatch' style boilerplate in the middle; i was just wondering if its something that would ever make sense in rust in a future version.. maybe even a special case for operator overloads where there isn't a syntactic 'receiver' )
[17:49:26] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[17:52:17] *** Joins: tavmem (Mibbit@moz-299BD82F.static.optonline.net)
[17:54:20] *** jorendorff is now known as jorendorff_away
[17:55:43] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[17:55:43] <ghrust> 01[13rust01] 15brson merged 06master into 06dist-snap: 02http://git.io/Gtolmg
[17:55:43] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[17:55:45] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[17:55:52] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:56:37] *** Quits: andrew-d_w (andrew-d_w@moz-5A92CAFF.dsl.static.sonic.net) (Input/output error)
[17:56:58] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[17:58:43] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[17:58:43] *** ChanServ sets mode: +ao brson brson
[17:59:08] *** Joins: nejucomo (Adium@moz-A94CACD5.dsl.pltn13.sbcglobal.net)
[17:59:30] *** Quits: bt3ze (bt3ze@moz-3F0303DA.hsd1.va.comcast.net) (Ping timeout)
[18:00:16] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Quit: Lost terminal)
[18:00:28] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Quit: pcwalton)
[18:02:27] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[18:02:32] *** Quits: vk (chatzilla@3E9D68F2.B1163E0C.2A6693DD.IP) (Ping timeout)
[18:02:46] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[18:02:46] *** ChanServ sets mode: +o tjc
[18:02:59] *** Joins: vk (chatzilla@3E9D68F2.B1163E0C.2A6693DD.IP)
[18:03:07] *** Joins: pcwalton (pcwalton@moz-BBE3ABD.mv.mozilla.com)
[18:03:07] *** ChanServ sets mode: +ao pcwalton pcwalton
[18:03:29] *** Joins: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP)
[18:04:48] <dschatz> are there portions of the rust standard library that are freestanding?
[18:05:54] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[18:06:19] <engla> there are many parts that are not dependent on the runtime, but it's not broken out
[18:07:49] *** Quits: Amaranth (travis@moz-F81BB56A.cpe.cableone.net) (Ping timeout)
[18:08:05] <dschatz> engla: do you know which parts?
[18:08:10] *** Joins: Amaranth (travis@moz-F81BB56A.cpe.cableone.net)
[18:08:17] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Ping timeout)
[18:08:20] *** Quits: slack1256 (slack@moz-B16C864A.baf.movistar.cl) (Quit: Konversation terminated!)
[18:08:29] <cmr> dschatz: almost all of it except rt and io
[18:08:36] *** Quits: pcwalton (pcwalton@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[18:08:55] <cmr> dschatz: I have an old patch that  lets you pass --cfg no-rt toget a full freestanding libstd
[18:08:59] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[18:09:04] *** Joins: pcwalton (pcwalton@moz-BBE3ABD.mv.mozilla.com)
[18:09:04] *** ChanServ sets mode: +ao pcwalton pcwalton
[18:09:18] <cmr> but it aborts on task failure and doesn't implement TLS
[18:09:31] <engla> dschatz: well say the default HashMap::new asks the runtime for a random key for its hash function, but there are alternative constructor functions that go around that
[18:10:04] <cmr> dschatz: https://github.com/mozilla/rust/pull/8454 for an idea
[18:11:21] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[18:12:26] <dschatz> cmr: how can I instantiate a vector with a custom memory allocator?
[18:13:02] <cmr> dschatz: the allocator used is a language item.
[18:14:11] <cmr> dschatz: we don't have allocator parameterization like the STL does though
[18:14:28] <dschatz> cmr: thats a shame
[18:14:34] <engla> A custom vec could have it
[18:14:50] <engla> but not for @ types
[18:15:39] <SiegeLord> So I'm confused about a thread on the ML... should (a, b) = foo(); currently work?
[18:16:00] <Ms2ger> I think yes, but not with mut
[18:16:23] <engla> it's not in the syntax of rust
[18:16:34] <cmr> SiegeLord: I don't think it should, no.
[18:16:38] <SiegeLord> But it parses atm
[18:16:48] <cmr> The only thing that accepts a pattern in the LHS like that should be `let`
[18:16:49] <SiegeLord> I just ICEs later on
[18:17:21] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Ping timeout)
[18:17:26] <SiegeLord> Or I guess no, I suppose it ICEs in the parser
[18:18:21] <cmr> dschatz: alocator parameterization  introcues a lot of complexityfordubious benefit, and increased memory fragmentation.
[18:18:58] <tiffany> siegelord: you can define new variables, but you can't assign to variables
[18:19:12] <cmr> tjc: are you aware that rustpkg building from remotes seems to be completely broken?
[18:19:17] <doomlord_> dynamic arrays.. i figure those might aswell go through a general purpose allocator
[18:19:21] <tjc> cmr: Yeah, I think there's a bug open on that
[18:19:22] <SiegeLord> tiffany: What about let mut a = 0; a = 1; :P
[18:19:30] <cmr> tjc: ok
[18:19:38] <tiffany> well I mean when destructuring tuples
[18:19:53] <tjc> cmr: https://github.com/mozilla/rust/issues/9482
[18:19:59] <tjc> I think there's a second one too. can't find it rn
[18:20:25] <cmr> My usecase was https://gist.github.com/cmr/7a3d37572e6ea586831e
[18:20:37] <tjc> I'll add that
[18:20:47] <tjc> the problem is that there are no tests for remotes
[18:21:00] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[18:21:00] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/eBjRJg
[18:21:00] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[18:21:03] <tjc> since either the bots or github have sporadic network connectivity problems, causing tests to fail randomly
[18:21:06] <dschatz> cmr: I think a freestanding generic library would make rust a compelling language to use for low level programming. I don't think such a library is suitable for all applications
[18:21:49] *** Joins: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[18:22:10] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[18:22:33] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[18:22:36] <cmr> dschatz: https://github.com/mozilla/rust/blob/master/src/libstd/unstable/lang.rs#L38 allocation is customizable, but not on a per-datastructure basis
[18:22:55] *** Quits: bogen (dwight@moz-8B4E7E75.dsl.rcsntx.swbell.net) (Quit: Leaving.)
[18:23:23] <cmr> (in libstd. yet)
[18:23:52] <dschatz> yes I understand
[18:25:16] <engla> that's the managed allocator right? and rt/global_heap.rs has the allocator for non-managed
[18:25:37] <cmr> Is it?
[18:25:39] * cmr looks
[18:26:02] <engla> Gc needs the task allocator
[18:26:10] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[18:26:10] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/hmnLOw
[18:26:10] <ghrust> 13rust/06auto 1404ca6dc 15Huon Wilson: std: Replace CloneableTuple with Tuple, which takes self by-val....
[18:26:10] <ghrust> 13rust/06auto 140186473 15bors: auto merge of #9493 : huonw/rust/move-tuples, r=thestinger...
[18:26:10] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[18:26:11] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[18:26:11] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/kR5Waw
[18:26:11] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[18:26:17] *** Joins: bt3ze (bt3ze@moz-3F0303DA.hsd1.va.comcast.net)
[18:26:17] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[18:26:26] <cmr> so it iss
[18:26:30] <cmr> *is
[18:26:42] <cmr> So the malloc lang item is for @T?
[18:26:47] <cmr> Seems backwards
[18:27:03] <cmr> And exchange_malloc... could use a renaming
[18:28:25] <acrichto> brson: not sure if it helps at all,b ut http://buildbot.rust-lang.org/builders/auto-linux-32-nopt-t/builds/789/steps/test/logs/stdio is the first runtime-failure I've seen this week on bors
[18:31:56] *** Quits: pcwalton (pcwalton@moz-BBE3ABD.mv.mozilla.com) (Quit: pcwalton)
[18:32:21] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[18:32:38] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[18:33:04] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[18:33:04] *** ChanServ sets mode: +ao pcwalton pcwalton
[18:34:30] <brson> can I push a minor change to the relnotes directly to master?
[18:34:51] <brson> actually, I can just make a pr and do a dist-snap based off my branch
[18:35:14] <brson> r? https://github.com/mozilla/rust/pull/9499
[18:36:19] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[18:36:19] <ghrust> 01[13rust01] 15brson pushed 1 new commit to 06dist-snap: 02http://git.io/cN719Q
[18:36:19] <ghrust> 13rust/06dist-snap 14d06989c 15Brian Anderson: 0.8 will be in September
[18:36:19] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[18:36:32] *** Joins: deio (chris@moz-CB76BB97.dynamic.tstt.net.tt)
[18:37:16] *** Quits: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net) (Quit: msingle)
[18:40:30] *** Quits: bt3ze (bt3ze@moz-3F0303DA.hsd1.va.comcast.net) (Ping timeout)
[18:40:37] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[18:40:37] <ghrust> 01[13rust01] 15brson 04force-pushed 06dist-snap from 14d06989c to 14a05de31: 02http://git.io/0Tp-4A
[18:40:37] <ghrust> 13rust/06dist-snap 14a05de31 15Brian Anderson: 0.8 will be in September
[18:40:37] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[18:44:15] <engla> the @fn removal is missing from relnotes. well I guess lots of things are still happening
[18:44:41] <cmr> rusti: let x: @fn();
[18:44:42] -rusti- <anon>:7:16: 7:21 error: managed closures are not supported
[18:44:42] -rusti- <anon>:7          let x: @fn();
[18:44:42] -rusti-                          ^~~~~
[18:44:42] -rusti- error: aborting due to previous error
[18:44:43] -rusti- application terminated with error code 101
[18:44:50] <cmr> oh yay, that landed
[18:44:54] <kimundi> engla: He, not a small thing to miss ;)
[18:47:51] *** Joins: tikue_ (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net)
[18:49:00] *** Joins: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net)
[18:49:43] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[18:51:36] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[18:52:13] *** Quits: afrey71 (Mibbit@moz-7102166.slact.net) (Quit: http://www.mibbit.com ajax IRC Client)
[18:52:39] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[18:52:42] <nejucomo> Waitâ€¦  There are no longer managed closures?
[18:52:56] <nejucomo> What's the alternative?
[18:53:22] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.1)
[18:53:42] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[18:54:14] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Client exited)
[18:54:15] <kimundi> nejucomo: In general the trend is to just implement a trait
[18:54:54] <kimundi> nejucomo: Owned closures will probably get replaced too
[18:54:56] <engla> trait objects and owned closures are relatively direct alternatives
[18:55:56] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[18:56:08] <SiegeLord> There are plans for some sugar around this, right?
[18:56:16] <kimundi> SiegeLord: Yeah
[18:56:31] <nejucomo> Soâ€¦ what would the alternative look like for: do spawn { â€¦ }
[18:56:32] <nejucomo> ?
[18:56:33] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[18:56:49] <kimundi> nejucomo: Multible psoibbilties
[18:57:00] <kimundi> nejucomo: That is, not yet clearly decided
[18:57:11] <nejucomo> Can impls be defined locally within a function?
[18:57:13] <bblum> i still feel like no amount of sugar will make the replacement for owned closures usable, since you'll have to write explicit capture clauses and write at invocation-site whether your closure is oneshot or not
[18:57:17] <kimundi> nejucomo: yes
[18:57:31] <kimundi> nejucomo: you can even return a struct locally defined in side that function
[18:58:00] <engla> bblum: but today you have to write explicit Cell::new(x);  ... c.take() and that's boilerplate too
[18:58:01] <kimundi> bblum: Not if you add suagr that can figure out the capturing for you
[18:58:18] <kimundi> engla: Cell is a workaround to begin with :P
[18:58:19] <bblum> engla: yeah, having actual once fns would solve that properly though
[18:58:23] <bblum> kimundi: i do not believe that is possible
[18:58:38] <nejucomo> I suppose I really like bundling definition with use where possible, so I really appreciate do spawn { â€¦ } -versus- struct T {â€¦} ; impl Spawner for T {â€¦} ; let myT = â€¦ ; spawn(myT).
[18:58:40] <bblum> i could be wrong
[18:59:08] <engla> nejucomo: that's unlikely. It will use lambda expressions in some way
[18:59:24] <engla> the impl Spawner part is unlikely
[18:59:50] <Amaranth> Wait, what's the problem with variable capture?
[18:59:59] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[19:00:01] <Amaranth> Lifetime tracking, right?
[19:00:18] <kimundi> Amaranth: I'm also not sure what the problem is with it
[19:01:13] <kimundi> Amaranth: I think it comes down to that the owned closure as implemented today is to restricted, and you really want N different ways to construct something like this
[19:01:36] <kimundi> like, run once closures, run n-times closures, etc
[19:02:00] <Amaranth> Actually I'm not sure I understand the difference between the different kinds of closures
[19:02:25] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[19:02:29] <kimundi> I personally don'T see the problem with the current situation either, but I'm not part of the core developers, and they think otherwise, so who am I to object :P
[19:02:31] <kimundi> Amaranth: Okay
[19:02:51] *** Joins: bt3ze (bt3ze@moz-3F0303DA.hsd1.va.comcast.net)
[19:03:06] <bblum> i also think the current situation is fine
[19:03:11] <Amaranth> Ah, I see
[19:03:23] <bblum> i think the change is just so there don't have to be sigils in front of function types like ~fn vs &fn vs @fn
[19:03:24] <kimundi> Amaranth: The big difference is that ~fn() moves the captured things into it's environment, while &fn() just has references to them, possible mutable.
[19:03:52] <bblum> the problem with variable capture is you don't want to make the user write down what they're capturing every time they write a closure
[19:03:54] <Amaranth> I think the problem is this isn't fine grained enough :)
[19:04:01] <doomlord_> kimundi are you still doing a rename too
[19:04:02] <doomlord_> kimundi are you still doing a rename tool
[19:04:19] <kimundi> Amaranth: And that if we wanted them to be truely analog to the normal pointer situations, &fn would have to be &mut fn()
[19:04:44] <kimundi> doomlord_: I'm still dreaming of it, but haven't started yet :P
[19:05:00] *** Quits: steveklabnik (steveklabn@moz-5EF6C37C.socal.res.rr.com) (Ping timeout)
[19:05:46] <Amaranth> Actually I can't think of a time I'd ever _want_ an owned closure except for the compiler/library forcing it on me
[19:05:48] <SiegeLord> I kind of like &mut fn() :P
[19:06:17] <engla> Amaranth: certain types of composition (parser combinator?)
[19:06:38] <kimundi> bblum: Anyway, there was this thunk { ... } subproposal as a language construct that would construct a struct+trait impl an capture things referenced inside the block
[19:06:41] *** Quits: flowsnake (flowsnake@moz-1918C33E.aztw.cable.virginmedia.com) (Connection reset by peer)
[19:06:49] *** Joins: flowsnake (flowsnake@moz-1918C33E.aztw.cable.virginmedia.com)
[19:07:00] <Amaranth> Managed closures sound really really useful though
[19:07:05] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[19:07:15] <bblum> kimundi: yes, i don't like it
[19:07:16] *** Quits: maik (maik@moz-9F5FA6A1.dip0.t-ipconnect.de) (Ping timeout)
[19:07:37] <Amaranth> But I think I'd like more fine grained control. Take ownership of foo, copy bar, get a reference to baz
[19:07:52] <kimundi> bblum: So the other solution would be to have owned_closure!((a,b,c) -> { ... })
[19:07:58] <doomlord_> the information to do it is definitely around in 'rustfind' , i wonder if it would make sense to add it there . (it could do with renaming itself, rustfind doesn't describe it very well at the minute)
[19:08:06] <Amaranth> I think the type system would explode though
[19:08:19] <kimundi> bblum: Which is also meh :)
[19:08:34] <kimundi> bblum: I had the idea recently to just combine them
[19:09:27] <kimundi> bblum: thunk owned_closure! { ... /* captures a */ ... } == owned_closure!( (a) => { ... /* captures a */ ... })
[19:09:39] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Ping timeout)
[19:09:42] <kimundi> bblum: Basically just define an syntax-level api
[19:09:46] *** Quits: GeneralMaximus (ankur@E584CC8D.236DEFC0.BE90E62C.IP) (Quit: Computer has gone to sleep.)
[19:10:01] <bblum> that's pretty clunky for something that used to be spelled "{ ... /* captures a */ ... }"
[19:10:13] <bblum> || { ... } in the long form
[19:10:27] <kimundi> bblum: would mean some intemingling of compiler passes though, at least for a subset of the ast
[19:10:50] <kimundi> bblum: No arguing there
[19:11:22] <Amaranth> So the way to make a closure that contains copies of owned variables is to clone said variables outside of the closure and capture the clones?
[19:12:17] <SiegeLord> Somehow C++ managed to create a syntax with fine grained reference/copy control, don't see why Rust can't :P
[19:12:19] <kimundi> Amaranth: Well, that would be the cases even today
[19:12:41] <Amaranth> kimundi: I thought @fn copied the variables it captured
[19:12:42] <kimundi> SiegeLord: C++ has basically syntax sugar for creating a struct+trait impl 
[19:12:55] <kimundi> SiegeLord: +- actual construct names
[19:13:02] <SiegeLord> Yes, which is what we are talking about, no?
[19:13:23] <doomlord_> i noticed a change to rustc recently with a closure parameter being changed to a trait object with a single method... 
[19:13:35] *** Quits: bt3ze (bt3ze@moz-3F0303DA.hsd1.va.comcast.net) (Quit: Leaving)
[19:13:37] <doomlord_> i wondered if that was an ominous sign, 
[19:13:58] <kimundi> Amaranth: Any copy today shoukld happen with clone() in the generic case
[19:14:09] <benh> There was a huge patch to get rid of @fn, no?
[19:14:21] <kimundi> Amaranth: It can only make a copy with implicit copiable types, or move them.
[19:14:50] <kimundi> Amaranth: If it did ever anything more than that, then that's considered a bug these days
[19:14:55] <Amaranth> kimundi: So it wasn't just calling clone for you?
[19:15:09] <kimundi> Amaranth: No
[19:15:10] <doomlord_> people from functional languages usually say C++ lambdas are 'crippled' , is it the case they're used to GC allowing much more adhoc referencing / lifetimes with closures
[19:15:21] <Amaranth> kimundi: Alright then, it was useless :P
[19:17:31] <benh> Our &-closures are even "more 'crippled'" than C++ lambdas, no?
[19:17:43] <benh> The fp people are gonna hate us and get java flashbacks making traits for everything!
[19:17:46] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[19:17:48] <kmc> doomlord_: I know a lot of FP zealots and I've never heard that complaint
[19:18:48] *** Joins: jviereck (Adium@moz-D03659.dip0.t-ipconnect.de)
[19:18:58] <doomlord_> the comments i remember ... prior to introduction i remember seeing skepticism that closures would be useful without GC, or rather that theyy'd cause lots of memory problems with mismatched lifetimes.
[19:19:34] <doomlord_> as a C++ person , i had lesser expectations of lambdas.
[19:19:52] <kmc> I would say that of course they cause lots of memory problems; manual memory management is hard to get right, but that's true whether your datastructure is a closure or something else
[19:19:58] <kimundi> benh: Ideally closures would just be a special kind of structural trait, that you could use with either dynmaic or static dispatch, and that you could construct easyly without repeating yourself.
[19:20:34] <kmc> and in most cases they're just replacing a much more verbose solution to build something that would *also* need to be managed manually
[19:20:39] <doomlord_> so in C++ you explicitely say [&] or otherwise to pass by reference or value..
[19:21:04] <kmc> but yeah if someone was expecting C++ to become a super high level expressive language just by having some sugar for function literals, they were very mistaken
[19:21:31] <Amaranth> doomlord_: [] is no capture, [&] is by reference, [=] is by value
[19:21:32] <doomlord_> i was certainly happy just to get *anonymous functions*
[19:21:50] <doomlord_> [=] thanks, couldn't remember.. DAMN i must start writing c++ again
[19:22:05] <Amaranth> You can also do [&foo] to make sure you _only_ capture foo and do it by reference
[19:22:14] <doomlord_> right 
[19:22:16] <benh> Now I want to say [=] is ~fn and [&] is &fn but that's probably wrong
[19:22:25] *** Joins: maik (maik@moz-46093746.dip0.t-ipconnect.de)
[19:22:30] <Amaranth> Or [&, foo] to capture everything by reference except foo which you capture by value
[19:22:49] <doomlord_> is ~ vs & more about potential to escape
[19:22:51] <Amaranth> It's C++, if it didn't give you fine grained control over the thing I'd be shocked
[19:22:54] <nsf> and there will be some changes in C++14 to allow move captures
[19:23:30] <nsf> auto lambda = [ptr{std::move(ptr)}] {return *ptr;};
[19:23:33] <Amaranth> benh: ~fn is more like the C++14 capture by move
[19:23:34] <nsf> lambda capture expressions! :D
[19:23:36] <kmc> benh: [=] will invoke copy constructors if necessary; Rust doesn't have those
[19:23:44] <kmc> in Rust there's a limited set of types which can be implicitly copied
[19:23:45] *** ozten is now known as ozten|afk
[19:24:08] <benh> Right, there isn't really a place in the syntax where you can say .clone() to make it the same thing
[19:24:13] <kmc> nsf: oh wow, that's kinda wacky
[19:24:16] *** Joins: fabiand (fabiand@moz-B6C5F730.adsl.alicedsl.de)
[19:24:51] <kmc> seems useful though
[19:24:56] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[19:25:02] <nsf> yeah, sure, wacky - the C++ way
[19:25:10] <kmc> can you initialize a smart pointer that way too
[19:25:19] <benh> That is probably a smart pointer
[19:25:25] <doomlord_> so: is some new syntax needed for rust to express all the cases here - and is this why I found something had been moved from a closure argument to a trait-object-with-one-function
[19:25:44] <nsf> the type of ptr is deduced by the expression
[19:25:51] <nsf> outer ptr is unique_ptr in that example
[19:25:57] <nsf> so it will be unique_ptr as well
[19:26:00] <engla> you only need capture by value though? x is a value, &x is a value, &mut x is a value?
[19:26:06] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Input/output error)
[19:27:14] <nsf> or maybe it uses the type of ptr, I don't know, it's a bit confusing because you can declare new variables there as well
[19:27:55] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Connection reset by peer)
[19:28:10] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[19:28:35] *** Joins: hoverbear (andrew@moz-63B2AC87.wireless.uvic.ca)
[19:29:36] *** Joins: TheDust (Stijn@moz-8C2076C2.upc-d.chello.nl)
[19:30:03] *** Joins: jgilbert (jgilbert@moz-4C088FCE.hsd1.ca.comcast.net)
[19:30:15] <sp3d> engla: seems right imo; that's how it would be done in C/GLib closures at least
[19:30:21] *** Quits: tikue_ (tkuehn@moz-FEADCD38.hsd1.pa.comcast.net) (Quit: tikue_)
[19:31:03] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[19:31:12] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[19:31:30] *** Joins: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com)
[19:31:37] *** Quits: hoverbear (andrew@moz-63B2AC87.wireless.uvic.ca) (Quit: hoverbear)
[19:32:21] *** Quits: jgilbert (jgilbert@moz-4C088FCE.hsd1.ca.comcast.net) (Ping timeout)
[19:32:36] *** Quits: Ms2ger (Ms2ger@moz-45EBCB4A.adsl-dyn.isp.belgacom.be) (Ping timeout)
[19:32:47] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[19:32:55] *** Joins: BitPuffin (isak@moz-49828767.cust.tele2.se)
[19:33:47] *** Quits: canhtak (jeremy@moz-7DD34FFE.wl.t.ulaval.ca) (Quit: canhtak)
[19:34:25] *** Quits: cdidd (cdidd@moz-E5B55197.broadband.corbina.ru) (Input/output error)
[19:34:33] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[19:35:03] *** Quits: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[19:35:06] *** Joins: five (five@moz-F45C65F8.v4.ngi.it)
[19:35:13] *** Quits: jonathanmarvens (jonathanma@moz-18997F78.bu.edu) (Ping timeout)
[19:35:14] *** Joins: Ferreus (ferreus@moz-AF602926.dyn.telefonica.de)
[19:35:54] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[19:36:49] *** Joins: Ms2ger (Ms2ger@moz-45EBCB4A.adsl-dyn.isp.belgacom.be)
[19:37:29] *** Joins: dherman (dherman@moz-7B0110AD.mv.mozilla.com)
[19:37:29] *** ChanServ sets mode: +ao dherman dherman
[19:37:38] <nejucomo> Doesn't the language already provide enough to specify fine-grained closures?  let x = ~foo(); let y = ~bar(); let mut z = 42; let mut closure;   { let taken_x = x; let copied_y = y.clone(); closure = |a, b| { a.stuff(b, taken_x, copied_y); x += 1 } } ; do_stuff_with_callback( closure );
[19:38:04] *** jorendorff_away is now known as jorendorff
[19:38:09] *** Quits: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com) (Ping timeout)
[19:38:21] <nejucomo> I'm guessing on a lot here, so I'm probably missing a bunch of detail.
[19:38:25] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Connection reset by peer)
[19:38:42] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[19:39:13] <nejucomo> Also, I meant z += 1.
[19:39:45] *** Quits: cowboyd (cowboyd@moz-1BD02A1E.sw.biz.rr.com) (Client exited)
[19:39:50] <kimundi> nejucomo: That's basically correct, yeah
[19:40:57] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[19:40:57] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/hmnLOw
[19:40:57] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[19:41:06] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[19:41:27] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[19:42:04] *** Joins: tdc (santegoeds@moz-ADD1F5DF.range86-135.btcentralplus.com)
[19:42:09] *** ozten|afk is now known as ozten
[19:42:17] *** Quits: dherman (dherman@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[19:43:17] *** Quits: maik (maik@moz-46093746.dip0.t-ipconnect.de) (Client exited)
[19:43:25] *** Joins: rubber-duck (rubber-duc@moz-AE28F469.dsl.iskon.hr)
[19:43:57] <nejucomo> Actually, I'm not clear on the distinction between &fn, ~fn, and (the former) @fn...
[19:44:03] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[19:44:05] *** Joins: cowboyd (cowboyd@moz-1BD02A1E.sw.biz.rr.com)
[19:44:11] *** Joins: dherman (dherman@moz-BBE3ABD.mv.mozilla.com)
[19:44:11] *** ChanServ sets mode: +ao dherman dherman
[19:44:16] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[19:44:37] <nejucomo> Can't there be a single closure abstraction and programmers are forced to declare the ownership types of each binding within that closure?
[19:44:43] *** Quits: dherman (dherman@moz-BBE3ABD.mv.mozilla.com) (Quit: dherman)
[19:44:48] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[19:45:34] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[19:45:55] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[19:45:55] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/JzTQlg
[19:45:55] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[19:45:56] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[19:45:56] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/9PjmMg
[19:45:56] <ghrust> 13rust/06auto 142265416 15Tim Chevalier: std: Add an is_parent_of method to Path
[19:45:56] <ghrust> 13rust/06auto 14667adad 15Tim Chevalier: rustpkg: Search for packages correctly when using the rust_path_hack...
[19:45:57] <ghrust> 13rust/06auto 14af25f58 15bors: auto merge of #9498 : catamorphism/rust/rust-path-hack-fix, r=cmr,metajack...
[19:45:59] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[19:46:51] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[19:46:51] *** ChanServ sets mode: +o tjc
[19:47:36] *** Quits: aeqwa (aeqwa@moz-607ACAD7.dsl.tropolys.de) (Quit: Lost terminal)
[19:48:39] *** Joins: hoverbear (andrew@moz-63B2AC87.wireless.uvic.ca)
[19:48:44] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[19:48:57] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Client exited)
[19:49:28] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[19:49:32] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[19:49:41] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[19:50:10] *** Quits: michaelgreene (michael@DA820AA2.17CD9887.F12515B4.IP) (Quit: Leaving)
[19:50:48] *** Quits: hoverbear (andrew@moz-63B2AC87.wireless.uvic.ca) (Quit: hoverbear)
[19:51:13] *** Joins: squiddy (squiddy@moz-CF736F05.adsl.alicedsl.de)
[19:52:32] *** Joins: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP)
[19:53:21] *** Quits: cowboyd (cowboyd@moz-1BD02A1E.sw.biz.rr.com) (Client exited)
[19:53:34] *** Joins: steveklabnik (steveklabn@moz-389D91E.public.wayport.net)
[19:53:53] *** Joins: canhtak (jeremy@moz-7DD34FFE.wl.t.ulaval.ca)
[19:54:04] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[19:54:56] *** Quits: jviereck (Adium@moz-D03659.dip0.t-ipconnect.de) (Quit: Leaving.)
[19:54:59] *** Quits: vk (chatzilla@3E9D68F2.B1163E0C.2A6693DD.IP) (Ping timeout)
[19:55:54] *** Joins: mdu (mdu@moz-2989B319.rev.numericable.fr)
[19:56:56] *** Joins: cowboyd (cowboyd@moz-1BD02A1E.sw.biz.rr.com)
[19:57:16] *** Joins: vk (chatzilla@3E9D68F2.B1163E0C.2A6693DD.IP)
[19:57:20] *** Joins: squiddy_ (squiddy@moz-CF736F05.adsl.alicedsl.de)
[19:57:22] *** Quits: squiddy (squiddy@moz-CF736F05.adsl.alicedsl.de) (Connection reset by peer)
[19:58:26] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Quit: pcwalton)
[19:59:56] *** Quits: kkris (kkris@moz-CB70009.yourvserver.net) (Ping timeout)
[20:00:24] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[20:00:59] *** Joins: pcwalton (pcwalton@moz-BBE3ABD.mv.mozilla.com)
[20:00:59] *** ChanServ sets mode: +ao pcwalton pcwalton
[20:01:39] *** Quits: lerc (quassel@B2E8CAD3.A8D14E52.788638A4.IP) (Ping timeout)
[20:01:44] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[20:01:58] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[20:02:42] *** Quits: huseby (huseby@moz-4E8C421A.husebyhome.com) (Quit: Leaving)
[20:03:08] *** Joins: kkris (kkris@moz-CB70009.yourvserver.net)
[20:05:01] *** Quits: canhtak (jeremy@moz-7DD34FFE.wl.t.ulaval.ca) (Quit: canhtak)
[20:05:04] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[20:05:34] *** Joins: huseby (huseby@moz-4E8C421A.husebyhome.com)
[20:05:53] *** Quits: dschatz (dschatz@moz-FF1439E.bu.edu) (Quit: dschatz)
[20:09:00] *** Joins: canhtak (jeremy@moz-7DD34FFE.wl.t.ulaval.ca)
[20:10:52] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[20:12:18] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[20:12:38] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[20:12:38] *** ChanServ sets mode: +o tjc
[20:12:41] *** Joins: wil (wil@84DCED2.A7636379.B7830B68.IP)
[20:13:10] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Client exited)
[20:13:49] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[20:14:21] <wil> Question: I built the 0.8pre source on Linux, and am trying to compile a simple file. However, it seems that rustc isn't able to find any crates - it complains about "undeclared module os", etc. How might I check where it's searching?
[20:14:45] <cmr> wil: gist your code, you're probably just not importing os from std.
[20:14:50] <cmr> You need `use std::os` to use os.
[20:16:23] <olsonjeffery> was there ever any solution proposed to the "have to do 'use' before 'mod'" thing?
[20:16:27] <olsonjeffery> it is ackward. just curious.
[20:16:37] <wil> https://gist.github.com/wbthomason/6705396
[20:16:56] <cmr> olsonjeffery: changing it was turned down because mod shadows use.
[20:17:15] <doomlord_> it stops being so weird outside of the main module i guess
[20:17:33] <acrichto> wil: you have the `use` outside of 'mod internal', so the use statement isn't in scope inside the inner module
[20:17:37] <doomlord_> if you have one source file that just brings things in (mod's...) then other sources files just do 'use' ...
[20:17:38] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[20:18:01] <wil> acrichto: Ah, ok. My bad - I thought that 'use' was file-global, not mod-global
[20:18:04] <wil> Thanks!
[20:18:05] <doomlord_> puttting lots of code int he main module that has mods = bad in my experience :) been severely burned by that
[20:18:30] <acrichto> wil: yeah use is lexical in the sense that it only brings the name into scope for the current block, and `mod` is outside the current block
[20:18:42] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[20:18:58] <kimundi> wil: Nothing in the module system itself is actually file-relative
[20:19:03] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[20:19:06] <doomlord_> i wondered if you could have a 'use mod foo' that behaves more like 'import' in other module systems, without breaking existing behaviorur..
[20:19:19] <wil> acrichto: Makes complete sense, I just wasn't thinking.
[20:19:41] *** Joins: josh (josh@moz-357ADCEA.hsd1.mn.comcast.net)
[20:19:49] <kimundi> doomlord_: that's already just 'mod' :P
[20:19:57] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[20:20:04] *** Joins: jgilbert (jgilbert@moz-BBE3ABD.mv.mozilla.com)
[20:20:14] <doomlord_> but that *doesnt* behave like import in other module systems.. i thought
[20:20:27] <engla> what should it do?
[20:20:32] <kimundi> wil: That is, files are irrelevant to the paths of items in 'use' 
[20:21:21] <kimundi> doomlord_: 'use' allows you to import names into local scope, but if you already defined a name with 'mod' in the local scope, thats visible too
[20:21:22] <wil> kimundi: Alright, thanks!
[20:21:27] *** Quits: tdc (santegoeds@moz-ADD1F5DF.range86-135.btcentralplus.com) (Ping timeout)
[20:21:42] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[20:22:06] <kimundi> mod foo { ... } fn bar() { }
[20:22:16] <kimundi> mod foo { ... } fn bar() { ... foo::baz() ...}
[20:22:24] <kimundi> this should work anywhere
[20:22:39] <kimundi> as lon as they are both idefined in the same scope
[20:22:42] <kimundi> long*
[20:23:19] <kimundi> now, if you want to 'use' something from that, you need to use self:: of course
[20:23:47] <doomlord_> (i'm just thinking back to the flailing around i original had before i settled on the 'bring modules in in crate root, and just have 'use' in individual sources..)
[20:23:48] *** Joins: valenting (Thunderbir@C6866972.77435D89.FB866788.IP)
[20:24:06] <kimundi> but the name foo and its content is visible as if it where imported from somewhere else
[20:24:40] <kimundi> rusti: mod foo { pub fn bar() {} } fn baz() { foo:bar() } baz()
[20:24:40] -rusti- <anon>:7:51: 7:52 error: expected one of `; }` but found `:`
[20:24:40] -rusti- <anon>:7          mod foo { pub fn bar() {} } fn baz() { foo:bar() } baz()
[20:24:40] -rusti-                                                             ^
[20:24:40] -rusti- application terminated with error code 101
[20:24:46] <kimundi> rusti: mod foo { pub fn bar() {} } fn baz() { foo::bar() } baz()
[20:24:46] -rusti- ()
[20:24:53] <doomlord_> ok it might just be that. it brings the module in, but in a location you might not expect until you read about how the module system works..
[20:24:58] <kimundi> rusti: mod foo { pub fn bar() { println("test"); } } fn baz() { foo::bar() } baz()
[20:24:59] -rusti- test
[20:24:59] -rusti- ()
[20:25:32] <kimundi> doomlord_: It's certainly a lot of details to learn at first :)
[20:25:35] <doomlord_> (is it just that.... the paths are *crate relative* by default, not module relative)
[20:25:50] <doomlord_> (.. thats what breaks a nieve module user)
[20:26:04] <kimundi> doomlord_: paths in use statements are global per default
[20:26:23] <kimundi> doomlord_: paths in expressions are local-scope-relative unless prefixed with "::"
[20:26:37] <doomlord_> hehe maybe i'm just confusing myself here. i just remember pain, and it works now, so long as i follow a set pattern..
[20:26:37] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[20:27:07] <kimundi> It's certainly confusing, but it beats needing to add useless annotations everywhere once you understand it.
[20:27:32] <doomlord_> i know how to avoid the pain i created originally now
[20:27:37] *** Quits: Kruppe (user@moz-253119B0.esg.uwaterloo.ca) (Ping timeout)
[20:27:37] *** Joins: hoverbear (andrew@moz-63B2AC87.wireless.uvic.ca)
[20:27:44] <doomlord_> and i did fix 'rustfinds' layout eventually (i think..)
[20:27:45] <kimundi> That's good :)
[20:28:30] *** Quits: pcwalton (pcwalton@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[20:28:47] *** Joins: jgilbert_ (jgilbert@moz-BBE3ABD.mv.mozilla.com)
[20:29:11] *** Joins: pcwalton (pcwalton@moz-BBE3ABD.mv.mozilla.com)
[20:29:11] *** ChanServ sets mode: +ao pcwalton pcwalton
[20:29:31] *** Quits: jgilbert (jgilbert@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[20:29:50] *** Quits: Amaranth (travis@moz-F81BB56A.cpe.cableone.net) (Ping timeout)
[20:29:50] *** Joins: Amaranth (travis@moz-F81BB56A.cpe.cableone.net)
[20:30:30] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[20:30:49] *** Quits: jgilbert_ (jgilbert@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[20:30:50] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[20:31:34] *** Quits: slackito (slackito@moz-7779E4A6.dyn.user.ono.com) (Quit: leaving)
[20:32:32] <doomlord_> is the rust module system an exact copy of ML ?
[20:32:48] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[20:32:54] <wil> exit
[20:33:05] <wil> heh, wrong terminal
[20:33:28] *** Quits: wil (wil@84DCED2.A7636379.B7830B68.IP) (Quit: Thanks!)
[20:34:50] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[20:34:54] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[20:34:54] *** ChanServ sets mode: +o pnkfelix
[20:35:25] *** Quits: fabiand (fabiand@moz-B6C5F730.adsl.alicedsl.de) (Quit: Verlassend)
[20:36:06] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Quit: Jesse)
[20:39:36] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[20:39:45] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[20:39:52] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[20:40:08] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Ping timeout)
[20:40:39] *** Joins: tikue_ (tkuehn@CFA5F35A.2ACBBF24.689607DE.IP)
[20:42:05] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[20:44:19] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[20:47:14] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[20:48:08] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[20:48:39] *** Joins: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl)
[20:49:42] <bstrie> ...is bugzilla.mozilla.org designed to only open in firefox??
[20:49:43] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[20:50:11] <bstrie> trying from chrome and IE just give me connection errors
[20:50:24] <bstrie> perhaps I should try from servo...
[20:50:27] <bheylin_> how can i concert a &'static char to char?
[20:50:41] <bstrie> bheylin_: .clone(), maybe?
[20:50:42] <Luqman> bheylin_: *foo
[20:50:48] <bstrie> no idea what happens if you try to clone a static thing
[20:50:50] *** Quits: Blub\0 (wry@7E3BB9D.71150E1A.237AE2BA.IP) (Quit: gtg, bb2morrow)
[20:51:13] <kimundi> bheylin_: dereference or clone it, the first will do an implicit copy, the latter will do the same hidden under an inlined function call
[20:51:35] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[20:51:35] *** ChanServ sets mode: +o tjc
[20:51:51] <kimundi> rusti: static C: &'static char = &'h'; C
[20:51:51] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[20:51:52] -rusti- &'h'
[20:52:08] <kimundi> rusti: static C: &'static char = &'h'; (*C, C.clone())
[20:52:08] -rusti- ('h', 'h')
[20:52:20] <engla> rusti: static C: &'static char = &'h'; (&C).clone()
[20:52:21] -rusti- &'h'
[20:52:46] <bheylin_> kimundi:  bstrie: cool thanks 
[20:52:55] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[20:53:03] <nejucomo> bheylin_: I'm curious why you have a &'static char in the first place.  Is it related to instantiated a generic with a char type parameter?
[20:53:43] <bheylin_> nejucomo:  writing a parse, chars are the axioms
[20:54:00] <bheylin_> nejucomo: *parser
[20:54:57] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[20:55:06] <nejucomo> Is there a canonical short-hand / sugar for CheckedSub.checked_sub, or should I explicitly call the method?
[20:55:44] *** Quits: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net) (Quit: ozten)
[20:55:49] <engla> call the method, for now
[20:56:05] <engla> rusti: 5i.checked_sub(&5)
[20:56:06] -rusti- Some(0)
[20:56:12] *** Joins: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net)
[20:56:45] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[20:57:04] *** Quits: deio (chris@moz-CB76BB97.dynamic.tstt.net.tt) (Quit: Ex-Chat)
[20:57:49] *** Joins: jgilbert (jgilbert@moz-BBE3ABD.mv.mozilla.com)
[20:59:23] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[21:00:43] *** Quits: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP) (Ping timeout)
[21:01:06] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[21:01:06] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/9PjmMg
[21:01:06] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[21:01:39] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[21:02:43] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[21:04:56] <bstrie> idea: make + - * / checked operations, and ++ -- ** // unchecked operations
[21:04:57] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[21:05:12] <bstrie> but then we'd need to come up with a new syntax for lexical comments dammit wadler's law nooooooo
[21:05:19] <bheylin_> kimundi: bstrie: https://gist.github.com/brianheylin/6705999
[21:05:34] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[21:05:57] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[21:05:57] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/i1MBlg
[21:05:57] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[21:05:57] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[21:05:57] <ghrust> 01[13rust01] 15bors pushed 16 new commits to 06auto: 02http://git.io/Qabr6A
[21:05:57] <ghrust> 13rust/06auto 1492a73b1 15Alex Crichton: rustdoc: Add sundown to src/rt/...
[21:05:57] <ghrust> 13rust/06auto 142346138 15Alex Crichton: rustdoc: Use sundown for markdown highlighting...
[21:05:58] <ghrust> 13rust/06auto 14d11d6e5 15Alex Crichton: rustdoc: Change all code-blocks with a script...
[21:06:00] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[21:06:01] <bheylin_> kimundi: bstrie: looks like matching against a static requires a copy to local first?
[21:07:02] *** Quits: rubber-duck (rubber-duc@moz-AE28F469.dsl.iskon.hr) (Input/output error)
[21:07:08] <bheylin_> kimundi: bstrie: or just replace match with if else chain
[21:07:47] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[21:07:58] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[21:08:21] <brson> oh shit: Error on line 6 in c:\bot\slave\dist2-win\build\obj\rust.iss: Resource update error: Icon file is invalid.
[21:08:37] <acrichto> brson: hahaha that's great
[21:08:51] <engla> bheylin_: why isn't it just   static LBRACK: char = '['  ?
[21:09:13] *** Quits: josh (josh@moz-357ADCEA.hsd1.mn.comcast.net) (Quit: josh)
[21:09:53] *** Quits: vk (chatzilla@3E9D68F2.B1163E0C.2A6693DD.IP) (Ping timeout)
[21:09:53] <brson> how do we fix this icon problem?
[21:10:23] <engla> fix .gitattributes. and restore the ico file if it was mangled in a commit
[21:10:33] <bheylin_> engla: hah that fixes it
[21:10:43] *** Quits: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net) (Quit: msingle)
[21:10:46] <brson> engla: what is the fix for .gitattributes?
[21:10:51] <bheylin_> engla: it was old code from the time when it had to be static
[21:10:59] *** Quits: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP) (Quit: Lost terminal)
[21:11:09] <flaper87> Hey guys, I'm working on the `SelectInner` implementation for Timer, I'm running into some issues, My current code is: https://gist.github.com/FlaPer87/6703281
[21:11:23] <engla> brson: remove or fix this line  * text=auto eol=lf
[21:11:32] <flaper87> block_on is being called, this is the rtdebug output: http://pastebin.mozilla.org/3147207
[21:11:37] <engla> brson: or explicitly  *.ico binary
[21:11:43] <flaper87> but the trask gets dropped: http://pastebin.mozilla.org/3147219
[21:11:56] <flaper87> aaaaaaand, I don't quite understand why
[21:12:17] <flaper87> I'm following this example: https://github.com/mozilla/rust/blob/master/src/libstd/rt/comm.rs#L234
[21:12:25] <flaper87> as reference 
[21:12:39] <flaper87> it's actually the only one around, AFAIK
[21:12:53] <acrichto> flaper87: it's because 'block_own' owns the argument `task`, and you're not transferring ownership in the case that the timer is still running
[21:14:41] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[21:14:44] <flaper87> acrichto: mmh but neither does this: https://github.com/mozilla/rust/blob/master/src/libstd/rt/comm.rs#L243
[21:14:51] <flaper87> I'm definitely missing something here :D
[21:15:00] *** Joins: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net)
[21:15:05] <acrichto> flaper87: it does, task.cast_to_uint consumes task
[21:15:12] <flaper87> T_T
[21:15:21] <flaper87> (facepalm)
[21:15:33] <flaper87> got it, lemme work on that!
[21:15:54] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.1)
[21:16:16] *** mdu is now known as mdup
[21:16:31] <flaper87> acrichto: do you mind elaborating a bit more on what happens when block_on keeps the ownership of the task? I mean, scheduler-wise
[21:16:55] <nejucomo> Couldn't the "unchecked operators" simply have a different token which doesn't collide with // ?
[21:17:07] *** Quits: Axord (xord@moz-1B228827.lsanca.dsl-w.verizon.net) (Quit: I'm sure it's perfectly safe)
[21:17:19] <nejucomo> first attempt: +!, -!, *!, /!
[21:17:41] <nejucomo> Confusingly similar to macro expansions...
[21:17:49] <SiegeLord> Breaks a+!b
[21:17:50] <engla> oh but that's legal today in  1+!1
[21:18:04] <acrichto> flaper87: it appears that it needs to squirrel away the task to wake it up later on, it specifically should not drop the task
[21:18:05] <engla> rusti: 0+!0
[21:18:05] -rusti- -1
[21:18:16] <nejucomo> Sure, that suggestion falls flat immediately, but the general idea still stands.
[21:18:18] <acrichto> flaper87: but again that's just from a cursory glane
[21:18:21] <myname> what
[21:18:21] <acrichto> glance*
[21:18:27] <myname> rusti: !0
[21:18:28] -rusti- -1
[21:18:33] <myname> huh?
[21:18:44] <myname> oh
[21:18:47] <flaper87> acrichto: kk, that's a good start for me, thanks
[21:18:52] <myname> rusti: !1
[21:18:53] -rusti- -2
[21:18:55] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[21:18:55] <myname> i see
[21:19:02] <sp3d> bitwise negation
[21:19:07] <sp3d> rusti: !false
[21:19:08] -rusti- true
[21:19:18] <myname> i got that
[21:19:28] <myname> bitwise negation is best negatio
[21:19:43] *** Joins: jmgrosen (jmgrosen@moz-BF80C818.sbcc.edu)
[21:19:54] <SiegeLord> Why do we not do the same thing for &/&& and |/|| ?
[21:20:09] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[21:20:43] <sp3d> what does rust use '?' for? anything?
[21:20:44] *** Joins: carllerche (carllerche@383121B7.B2666F0E.66399531.IP)
[21:20:44] <cmr> SiegeLord: what thing?
[21:20:48] <cmr> sp3d: nothing
[21:21:14] <SiegeLord> cmr: ! does boolean or bitwise operation depending on what's to the right of it
[21:21:18] <nejucomo> âŠ•, âŠ–, âŠ—, âŠ˜    ;-p
[21:21:24] <SiegeLord> Why not have & and | also do that
[21:21:32] <cmr> rusti: (true | false, 2 | 8)
[21:21:33] -rusti- (true, 10)
[21:21:37] <cmr> SiegeLord: they do
[21:21:44] <engla> rusti: true ^ true
[21:21:44] -rusti- false
[21:21:59] <SiegeLord> rusti: true && true
[21:22:00] -rusti- true
[21:22:03] <SiegeLord> rusti: true && 1
[21:22:04] -rusti- pastebinned 8 lines of output: http://sprunge.us/RbML
[21:22:08] <cmr> SiegeLord: we don't have a && operator
[21:22:14] <cmr> That's true & (&true)
[21:22:16] <myname> nejucomo: i'm still for APL as subset of rust *g*
[21:22:21] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[21:22:29] <SiegeLord> rusti: &&1
[21:22:30] <sp3d> what about short-circuiting/no?
[21:22:30] -rusti- <anon>:7:9: 7:11 error: unexpected token: `&&`
[21:22:30] -rusti- <anon>:7          &&1
[21:22:30] -rusti-                   ^~
[21:22:30] -rusti- application terminated with error code 101
[21:22:33] <engla> cmr: now you are joking
[21:22:36] <SiegeLord> cmr: Are you sure?
[21:22:40] <cmr> ...no, I'm not
[21:22:43] <cmr> rusti: 5 || 2
[21:22:44] -rusti- <anon>:7:9: 7:15 error: binary operation || cannot be applied to type `<VI0>`
[21:22:44] -rusti- <anon>:7          5 || 2
[21:22:44] -rusti-                   ^~~~~~
[21:22:44] -rusti- error: aborting due to previous error
[21:22:44] -rusti- application terminated with error code 101
[21:22:50] <sp3d> rusti: true & &true
[21:22:50] -rusti- <anon>:7:16: 7:21 error: mismatched types: expected `bool` but found `&bool` (expected bool but found &-ptr)
[21:22:50] -rusti- <anon>:7          true & &true
[21:22:50] -rusti-                          ^~~~~
[21:22:51] -rusti- error: aborting due to previous error
[21:22:52] <engla> true && (false || true)
[21:22:52] <cmr> OH I remember now.
[21:22:53] -rusti- application terminated with error code 101
[21:22:54] <cmr> yes
[21:22:56] <cmr> I am very wrong
[21:23:06] <strcat> pcwalton: ! functions are marked noreturn now btw, I remember you said something about it yesterday
[21:23:17] <strcat> maybe we should mark the fail stuff as cold too
[21:23:17] *** Quits: nejucomo (Adium@moz-A94CACD5.dsl.pltn13.sbcglobal.net) (Quit: Leaving.)
[21:23:45] <pcwalton> strcat: awesome
[21:23:45] * strcat wishes LLVM knew how to hoist stuff out of a function into another
[21:24:07] <pcwalton> also would be nice to add an unreachableinst after rt_fail_borrowed
[21:24:10] <strcat> pcwalton: there is a *lot* of code bloat from stuff like the fail!() macro, not sure how to fix that
[21:24:21] <pcwalton> yeah, I know
[21:25:07] <SiegeLord> rusti: true & 1
[21:25:07] -rusti- <anon>:7:16: 7:17 error: mismatched types: expected `bool` but found `<VI0>` (expected bool but found integral variable)
[21:25:07] -rusti- <anon>:7          true & 1
[21:25:07] -rusti-                          ^
[21:25:08] -rusti- error: aborting due to previous error
[21:25:08] -rusti- application terminated with error code 101
[21:25:12] <sp3d> rusti: true || fail!("short-circuit")
[21:25:12] -rusti- true
[21:25:13] <SiegeLord> rusti: true & true
[21:25:18] -rusti- true
[21:25:31] <strcat> pcwalton: also, the alternate vector implementation turned out to be much faster than what we do atm
[21:25:34] <strcat> pcwalton: https://github.com/mozilla/rust/issues/8981 numbers there
[21:25:46] <strcat> just because the code size of push is so much smaller... doesn't need to add the header and stuff
[21:25:53] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[21:25:53] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14f10bdb2 to 14af25f58: 02http://git.io/N3iJvQ
[21:25:53] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[21:25:55] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[21:25:55] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/qmtuXw
[21:25:55] <ghrust> 13rust/06auto 14b82e0d3 15Gareth Smith: Add a new Digest.result_bytes convenience function.
[21:25:55] <ghrust> 13rust/06auto 1424d46a0 15bors: auto merge of #9345 : Dretch/rust/digest-result-bytes, r=cmr...
[21:25:55] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[21:26:09] <cmr> acrichto: rustdoc bounced
[21:26:14] <SiegeLord> rusti: true | fail!("short-circuit")
[21:26:14] -rusti- pastebinned 13 lines of output: http://sprunge.us/YPVj
[21:26:15] <tiffany> howcome the new format! doesn't support as many types?
[21:26:19] <strcat> maybe hoisting out the capacity doubling part into a function marked cold would help
[21:26:23] <cmr> tiffany: what do you mean?
[21:26:35] <tiffany> stars.rs:17:23: 17:27 error: failed to find an implementation of trait std::fmt::Default for ~[(float,<VF0>)]
[21:26:36] <tiffany> stars.rs:17         println!("{}", list);
[21:26:36] <acrichto> cmr: noooo
[21:26:50] <cmr> tiffany: what do you think that's equivalent to?
[21:26:53] <SiegeLord> So I guess the shortcircuidness of | for boolean types and not for others might be confusing
[21:27:05] <sp3d> no, || short-circuits
[21:27:06] <tiffany> well, before I was using println(fmt!("%?", list)) and that would work fine
[21:27:16] <sp3d> i.e. ends execution early if it can
[21:27:19] <SiegeLord> sp3d: I'm describing the way things could be, not the way they are
[21:27:20] <cmr> tiffany: "%?" -> "{:?}"
[21:27:21] <sp3d> oh
[21:27:23] <cmr> tiffany: not "{}"
[21:27:40] <SiegeLord> sp3d: I.e. rust without && and ||
[21:27:42] <tiffany> I should probably read about the new formatting
[21:27:42] <myname> what doas {} do, actually?
[21:27:49] <cmr> myname: uses the std::fmt::Default trait
[21:27:52] *** Quits: tikue_ (tkuehn@CFA5F35A.2ACBBF24.689607DE.IP) (Quit: tikue_)
[21:27:56] <cmr> tiffany: http://static.rust-lang.org/doc/master/std/fmt/index.html
[21:27:56] <sp3d> if | did short-circuit you'd want something that wouldn't
[21:28:09] * strcat loves how nice the docs are now
[21:28:11] <sp3d> in case you had side_effecty1() | side_effecty2()
[21:28:28] <myname> new docs? great!
[21:28:35] <cmr> strcat: me too
[21:28:38] <cmr> :p
[21:28:41] *** Quits: five (five@moz-F45C65F8.v4.ngi.it) (Ping timeout)
[21:29:25] <bheylin_> can enums be composed? as in enum B : A; enum enum C : A
[21:29:27] <engla> and even better with acrichto's change to hide the privates. It's easier to navigate if every item is important (part of the pub api)
[21:29:36] <kimundi> how can I rebase my git branch on an external git repo without adding it to my remotes?
[21:29:56] <cmr> bheylin_: no
[21:29:57] <acrichto> kimundi: maybe "git pull --rebase remote_url remote_branch"
[21:29:58] <aatch> kimundi, git fetch <url>; git rebase FETCH_HEAD
[21:30:01] <acrichto> kimundi: that's just a guess though
[21:30:05] <acrichto> I would trust attach
[21:30:08] <acrichto> aaatch*
[21:30:09] *** Quits: pcwalton (pcwalton@moz-BBE3ABD.mv.mozilla.com) (Quit: pcwalton)
[21:30:12] <acrichto> arch I can type
[21:30:15] <acrichto> w/e
[21:30:23] <aatch> acrichto, I dispute that claim
[21:30:40] <aatch> kimundi, it's similar to that, the git fetch might be a little different
[21:31:02] <strcat> acrichto: fwiw they landed some mergefunc fixes upstream
[21:31:05] <strcat> I don't think it's enough yet
[21:31:19] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[21:31:19] *** ChanServ sets mode: +o pnkfelix
[21:31:32] <acrichto> strcat: woo! I'm ready to update llvm at a moment's notice
[21:31:39] <acrichto> not really, but metaphorically
[21:31:45] <strcat> acrichto: let me see if it actually works for us first ;p
[21:32:04] *** Joins: wil (wil@84DCED2.A7636379.B7830B68.IP)
[21:32:10] <bheylin_> cmr:  explicit explicit decision not to?
[21:32:33] <cmr> bheylin_: no idea
[21:32:34] *** Joins: tikue_ (tkuehn@CFA5F35A.2ACBBF24.689607DE.IP)
[21:32:48] <kimundi> aatch: That worked, thanks
[21:33:26] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[21:33:38] <aatch> bheylin_, I imagine that it would play havoc with the representation.
[21:33:42] <wil> Stupid question: To use something from extra (specifically "time"), I need to have "extern mod extra" at the top of my mod and "use extra::time" below that, correct?
[21:34:02] <aatch> since right now we just use 0->(n-1) for the discriminants.
[21:34:03] <kmc> the extern mod can be anywhere in the same crate, I think
[21:34:05] <kimundi> wil right
[21:34:10] *** Quits: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: I feel so disconnected now	)
[21:34:27] <SiegeLord> Do extern mod's get inserted into the current mod or the crate root?
[21:34:34] <bheylin_> aatch: representation as in keeping in line with c memory layout?
[21:34:40] <tikue_> is the reason you don't need `extern mod std;` because the prelude has `extern mod std; pub use std` ?
[21:34:54] <kimundi> SiegeLord: You can add then into any module, including the crate root
[21:34:54] <wil> kimundi: Hmm. I have that, but rustc is failing to resolve the import "extra::time"
[21:34:56] <engla> wil: only the first part is strictly necessary, the `use` only shortens the path from extra::time::XYZ to time::XYZ
[21:34:59] <strcat> tikue_: yes
[21:35:03] <cmr> SiegeLord: current mod, just like normal mod.
[21:35:06] <aatch> bheylin_, more that you need to be able to distinguish between them at runtime.
[21:35:08] <kimundi> wil: Ah, is that in an submodule?
[21:35:13] <SiegeLord> cmr: k
[21:35:45] <kimundi> wil: use paths are aleways relative to the crate root. You probably want 'use self::extra::time;' to make it relative to the module
[21:36:00] <bheylin_> aatch: hmm, yep, it's going down the structural typing road
[21:36:21] <strcat> acrichto: https://github.com/llvm-mirror/llvm/commit/33300d91b66a86fc39482dd262fb735ca54d92e1 !
[21:36:26] <wil> kimundi: Ah, ok. That seems to have fixed it. Out of curiosity, why are use paths structured so?
[21:36:38] <aatch> It also would most likely need to be limited to intra-crate, since with stuff like enum { A(int, int) }, there's a size.
[21:37:06] <strcat> acrichto: https://github.com/llvm-mirror/llvm/commit/80361492ae7ea9fedbb5a55c72d4aea6a3d600b1 one of the fixes
[21:37:12] <aatch> bheylin_, you try and "extend" an enum from another crate and change the size things will likely start breaking.
[21:37:48] <kimundi> wil: Don't know the exact reasons, but doing it any other way did complicate the implementation to much and/or made reasoning about it to hard
[21:38:36] <aatch> wil, the current implementation is actually the simplest we have done so far.
[21:38:44] <aatch> wil, bugs notwithstanding.
[21:38:52] <acrichto> strcat: awesome to see them working on it
[21:39:24] *** Quits: heftig (heftig@moz-AACE7C14.dip0.t-ipconnect.de) (Ping timeout)
[21:39:28] <wil> kimundi: Alright, thanks. I'm trying to learn as much of the guiding design policy behind rust as I can. I'd like to start contributing once I have sufficient mastery of the language, and figure a solid understanding of the guiding design decisions should also be necessary.
[21:39:37] <wil> kimundi, aatch: Thanks!
[21:39:44] *** Joins: cdidd (cdidd@moz-464D7AB.broadband.corbina.ru)
[21:39:56] <aatch> wil, do what I did, contribute *in order* to gain mastery of the language.
[21:40:08] *** Quits: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin_)
[21:40:22] * cmr still doesn't have mastery of the language
[21:40:36] <wil> aatch: How would you recommend I get started? Just grab an issue and work on it? I've been reading the source as my primary documentation so far.
[21:40:46] <aatch> wil, depends on what you want to do.
[21:40:57] <aatch> you could work on compiler stuff, library stuff.
[21:41:08] <aatch> there's a ton of things to clean up in libextra
[21:41:17] <geal> I rebuilt the compiler from master today (commit df97d23c71f6fbe300d3bc0dca23b063044b3934 ), and now I get "error: can't find crate for `std`" when compiling anything. Here is the trace from rustc::metadata::loader http://paste2.org/B8Kxm2BW . Is there a way to fix that?
[21:41:22] <aatch> We really need a new rope implementation.
[21:41:35] *** Joins: eatkinson (eatkinson@moz-392601D4.lightspeed.sntcca.sbcglobal.net)
[21:41:42] <strcat> aatch: well really need a new vector implementation that's 2x-5x faster
[21:41:44] <strcat> ;p
[21:41:45] <Luqman> strcat: so mergefunc pass for rust soon hopefully? :D
[21:41:51] <strcat> Luqman: yes, and dropping type_use
[21:41:53] <strcat> :)
[21:42:08] <strcat> I'm going to cherry-pick the patch and see if it works
[21:42:08] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[21:42:25] <wil> aatch: Ok, cool. I'll look around and see where I can help. Thanks!
[21:42:27] <aatch> strcat, what's slow about it atm?
[21:42:39] <strcat> aatch: https://github.com/mozilla/rust/issues/8981 benchmarks
[21:42:42] <cmr> aatch: https://github.com/mozilla/rust/issues/8981
[21:43:21] <Luqman> strcat: that fix does seem like the relevant one, but who knows if there are going to more stumbling blocks
[21:43:29] *** Quits: nkoep (nik@moz-7AAB85D1.vpn.rwth-aachen.de) (Ping timeout)
[21:43:30] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[21:43:32] *** Quits: Shaladdle (Shaladdle@moz-424BC304.hsd1.pa.comcast.net) (Quit: Leaving)
[21:43:35] <strcat> Luqman: yeah but I don't mind turning it on even if it's not perfect
[21:43:40] <strcat> it can't be as bad as type_use
[21:43:43] <strcat> ;p
[21:43:49] <Luqman> well i meant, tripping more asserts
[21:43:59] *** Quits: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net) (Ping timeout)
[21:44:50] *** Joins: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net)
[21:44:52] *** Quits: wil (wil@84DCED2.A7636379.B7830B68.IP) (Quit: Thanks again!)
[21:44:57] <brson> acrichto: do you think your rustdoc improvements need to be in 0.8?
[21:45:10] <cmr> brson: It'd be really nice if they were, which is why I gave them a p=100
[21:45:21] <cmr> especially enum + reexport hyperlinking
[21:46:30] <aatch> strcat, hmm, I'm not sure if I followed nmatsakis' ramblings, was that him saying it's ok or not?
[21:46:41] <cmr> strcat: are there any cases where it's *worse*?
[21:46:48] <brson> damn it i don't understand how to make this ico file checkout out correctly
[21:46:50] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[21:46:58] <brson> i can't even figure out how to revert it
[21:46:58] <strcat> brson: *.ico binary
[21:47:00] <strcat> in gitattributes
[21:47:02] <brson> i did
[21:47:14] <strcat> brson: git checkout master src/etc/whatever.ico
[21:47:22] <pnkfelix> brson: then delete it and do checkout â€” src/etc/rust.ico ?
[21:47:39] <strcat> brson: what it does it mangle the line endings on checkout because our gitattributes has eol=lf on the * glob line
[21:47:59] <strcat> I'm thinking we should just not have a * glob line
[21:48:20] <strcat> (or override it for each binary file ext...)
[21:48:48] <brson> ok, some combination of commands restored the icon...
[21:49:16] <strcat> can you get github to spit out a patch for a specific commit?
[21:49:16] <acrichto> brson: if possible, I think it's worth it because it drops the pandoc dep
[21:49:19] <brson> err, maybe. git has no diff for the icon in my last commit, but the icon is not broken now
[21:49:20] <pnkfelix> strcat: we don't expect to have many binary files, right?  At this point I'd say just put an entry in for each such file, until that becomes too much
[21:49:33] <strcat> pnkfelix: yeah, that's true
[21:49:41] <brson> this can't be right ...
[21:50:13] <strcat> brson: it's from incorrect newline normalization
[21:50:16] <strcat> it uses magic
[21:50:20] *** Joins: gareth0 (gareth0@7C428FA9.3FD5F917.1A294DCF.IP)
[21:50:32] <strcat> it basically means if someone uses CRLF line endings it will magically convert them to LF
[21:50:40] * strcat shrugs
[21:50:47] *** Quits: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net) (Quit: ozten)
[21:50:48] *** Joins: DAddYE_ (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[21:50:52] *** Quits: DAddYE_ (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[21:51:09] *** Quits: Ms2ger (Ms2ger@moz-45EBCB4A.adsl-dyn.isp.belgacom.be) (Quit: nn)
[21:51:13] *** Joins: DAddYE_ (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[21:51:34] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[21:51:52] *** Joins: heftig (heftig@moz-6F2AD80B.dip0.t-ipconnect.de)
[21:52:16] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Client exited)
[21:52:24] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[21:53:22] <pnkfelix> strcat: https://github.com/mozilla/rust/pull/9501
[21:53:43] <strcat> pnkfelix: could you just use *.ico?
[21:53:51] *** Joins: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net)
[21:53:58] <strcat> doesn't *really* matter
[21:54:04] <pnkfelix> strcat: I figure be specific until one needs to generalize
[21:54:04] *** Quits: TheDust (Stijn@moz-8C2076C2.upc-d.chello.nl) (Quit: Leaving)
[21:54:12] <strcat> true
[21:54:14] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[21:55:37] *** Quits: steveklabnik (steveklabn@moz-389D91E.public.wayport.net) (Ping timeout)
[21:55:50] *** Quits: tikue_ (tkuehn@CFA5F35A.2ACBBF24.689607DE.IP) (Quit: tikue_)
[21:56:28] <brson> not sure if we'll get an rc out today
[21:56:59] *** Quits: DAddYE_ (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[21:57:05] <strcat> aatch: I'm not sure
[21:57:17] <strcat> I don't think DST matters for vectors though
[21:57:19] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[21:57:24] <strcat> slices will always be weird
[21:57:45] <strcat> @/Rc vectors don't really want a word wasted on capacity, since their size can't be changed
[21:58:03] <strcat> imo the speed improvement makes it worth changing
[21:58:18] <cmr> I agree
[21:58:38] <mdup> hi, I'm writing simple rust code and getting this compile error:
[21:58:41] <mdup> error: failed to find an implementation of trait std::io::Writer for std::option::Option<std::rt::io::net::tcp::TcpStream>
[21:58:59] <cmr> mdup: you're trying to use code from std::io with code from std::rt::io, they're completely incompatible.
[21:59:00] *** Joins: DAddYE_ (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[21:59:15] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Input/output error)
[21:59:18] <mdup> ok, I didn't see the namespace problem...
[21:59:19] *** Quits: DAddYE_ (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[21:59:40] *** Joins: DAddYE_ (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[21:59:42] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Connection reset by peer)
[21:59:45] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[22:00:01] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[22:00:31] <mdup> I'll look into it, but I think I'm coming back soon :)
[22:01:54] <strcat> acrichto: I was thinking that the call graph would basically be...
[22:02:00] *** Joins: nkoep (nik@moz-8331E7A6.pool.mediaways.net)
[22:02:02] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[22:02:06] <strcat> function -> (vec_of_stuff_it_calls, vec_of_stuff_calling_it)
[22:02:14] <strcat> but globals matter too
[22:02:15] *** Joins: tikue_ (tkuehn@CFA5F35A.2ACBBF24.689607DE.IP)
[22:02:41] <strcat> and I'm not sure where that will fit in..... maybe just use the node ids and stick them both in the same thing
[22:03:17] *** Quits: DAddYE_ (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[22:03:38] <strcat> and then a lint pass can walk the graph from public functions (the entry point, in a binary) and then yell about every global/function that it didn't walk to
[22:03:55] <strcat> so you'd catch 'fn foo() { bar() } fn bar() { foo() }' as unused too
[22:04:54] <acrichto> strcat: why do you need to know what call sit?
[22:04:55] <strcat> + it works for the internalize thing too.
[22:05:01] *** Quits: canhtak (jeremy@moz-7DD34FFE.wl.t.ulaval.ca) (Quit: canhtak)
[22:05:14] *** Quits: ahal (ahal@13F2CEC5.7672369.D8E68FF6.IP) (Input/output error)
[22:05:15] <strcat> acrichto: I guess it depends on what you want to do
[22:05:25] <strcat> acrichto: but consider globals - they don't call anything
[22:05:37] <acrichto> globals are kinda similar though
[22:05:45] <acrichto> function -> [globals it uses, methods it uses]
[22:05:50] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[22:05:54] *** Quits: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Quit: Leaving...)
[22:06:13] <strcat> true, I was thinking you might want to do searches for a single item
[22:06:15] <strcat> rather than walking
[22:06:16] *** Quits: hoverbear (andrew@moz-63B2AC87.wireless.uvic.ca) (Quit: hoverbear)
[22:06:21] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[22:06:30] <cmr> What is a global in this context?
[22:06:35] <strcat> statics
[22:06:40] <cmr> ah
[22:06:56] <acrichto> strcat: in theory you can do one "call graph build pass", and then you can un-internalize things on the trans bas
[22:07:07] <acrichto> so everything defaults to being internal, but you reset the linkage as you detect that it's called by someone else
[22:07:11] <strcat> right
[22:07:13] <acrichto> or rather it's called by an exported function
[22:07:15] <cmr> *cough* #rust-internals
[22:08:04] <tikue_> :P
[22:08:14] <doomlord_> is that new ?
[22:08:22] <cmr> doomlord_: yes
[22:08:27] <strcat> wow
[22:08:31] <cmr> see recent ML post
[22:08:40] <strcat> they fixed our libextra mergefunc assert
[22:08:42] <strcat> !
[22:09:08] <Luqman> strcat: \o/ does it get through everything else?
[22:09:15] <strcat> Luqman: trying now
[22:09:26] <strcat> Luqman: I was testing the minimal example I made
[22:09:31] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[22:09:31] <acrichto> nice!
[22:09:34] <acrichto> go llvm!
[22:09:44] <strcat> Luqman: http://ix.io/8dc
[22:09:51] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[22:10:02] <strcat> originally, was caused by two anon functions
[22:10:07] <strcat> |_, b| b
[22:10:17] <strcat> one with i64, i64
[22:10:21] <strcat> one with *i64, i64
[22:10:33] <strcat> so it should be able to merge, but it was hitting an assert from casting wrong
[22:10:39] *** Joins: DAddYE_ (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[22:11:22] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[22:11:35] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[22:12:41] <strcat> acrichto: dropping pandoc for 0.8 is going to happen?
[22:12:57] <strcat> meh! mergefunc is still broken on libstd
[22:12:59] <acrichto> strcat: only for rustdoc, not for building the tutorial
[22:13:08] <brson> a recent commit changed the icon file - presumably breaking it - and i am having a hard time reverting it
[22:13:12] *** Joins: canhtak (jeremy@moz-7DD34FFE.wl.t.ulaval.ca)
[22:13:22] <strcat> brson: a local commit? or in the repo
[22:13:27] <brson> strcat: in the repo
[22:13:30] *** Quits: dbaupp (Thunderbir@moz-EAA09AEF.lns20.syd7.internode.on.net) (Ping timeout)
[22:13:31] <cmr> brson: remove and readd?
[22:13:34] *** Joins: steveklabnik (steveklabn@moz-5EF6C37C.socal.res.rr.com)
[22:13:48] *** Joins: dbaupp (Thunderbir@moz-EAA09AEF.lns20.syd7.internode.on.net)
[22:13:51] <strcat> you need the gitattributes line to be able to fix it
[22:13:55] <strcat> well
[22:13:59] <strcat> mergefunc now works on libextra
[22:14:01] <strcat> not libstd
[22:14:15] <Luqman> strcat: wait, did it get through libstd and broke on libextra before?
[22:14:33] <strcat> it broke on both before
[22:14:41] <Luqman> ah
[22:14:46] <brson> strcat: I added the gitattributes line and git continues to think there are no changes
[22:14:55] <strcat> brson: you need to add it and then change it
[22:15:15] <brson> as in, I need to commit .gitattributes?
[22:15:32] <strcat> brson: yeah, just do it in a separate commit + rebase it out after
[22:15:36] <strcat> since there's now a PR in the queue fixing it
[22:15:41] *** Quits: cowboyd (cowboyd@moz-1BD02A1E.sw.biz.rr.com) (Client exited)
[22:15:57] <strcat> gogo bugpoint
[22:16:23] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[22:16:39] <brson> strcat: git still thinks there are no changes to the icon
[22:16:43] <strcat> :(
[22:16:56] <strcat> 37713 bugpoint-reduced-simplified.ll
[22:16:58] <strcat> 462347 std.ll
[22:17:00] <strcat> well
[22:17:02] <strcat> that's better...
[22:17:32] <acrichto> it did so well last time lol
[22:17:39] *** Quits: DAddYE_ (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[22:17:53] <strcat> yeah it's sadly not getting smaller than this
[22:17:54] *** Joins: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au)
[22:17:56] <strcat> that's not good :(
[22:18:00] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[22:18:26] <strcat> acrichto: I could optimize it... and then run it again
[22:19:33] *** Quits: josedonizetti (josedonize@DF22210B.35D9DDB.8EF76F75.IP) (Ping timeout)
[22:19:54] <brson> fixing the icon then rebasing out the .gitattribute commit turns the icon commit into a no-op!
[22:19:58] * brson gah!
[22:20:17] <strcat> heh
[22:20:43] <strcat> brson: just send the PR in yourself fixing gitattributes I guess
[22:21:03] <engla> there must be some remedy like an env var to specify a .gitattributes file to use
[22:22:19] *** Quits: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net) (Client exited)
[22:22:26] <strcat> acrichto: this time I'll pre-optimize the bytecode...
[22:22:37] <strcat> post-optimize removes the code bugpoint reduced >.<
[22:22:41] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[22:23:56] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[22:24:33] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[22:24:54] <tiffany> rusti: max(5.0, 7.0)
[22:24:57] -rusti- <anon>:7:9: 7:12 error: unresolved name `max`.
[22:24:57] -rusti- <anon>:7          max(5.0, 7.0)
[22:24:57] -rusti-                   ^~~
[22:24:57] -rusti- error: aborting due to previous error
[22:24:57] -rusti- application terminated with error code 101
[22:25:03] <tiffany> rusti: std::num::max(5.0, 7.0)
[22:25:05] -rusti- 7
[22:25:11] <tiffany> this is behaving strangely for me
[22:25:17] *** Joins: krebbit (Mibbit@moz-C05F69DC.sub-70-209-7.myvzw.com)
[22:25:42] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Ping timeout)
[22:26:05] <dbaupp> tiffany: in what way?
[22:26:22] *** Quits: krebbit (Mibbit@moz-C05F69DC.sub-70-209-7.myvzw.com) (Quit: http://www.mibbit.com ajax IRC Client)
[22:27:01] <tiffany> .. oh, I see
[22:27:03] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[22:27:26] *** Quits: ceninan (ceninan@moz-6BD43586.a370.priv.bahnhof.se) (Ping timeout)
[22:27:35] <tiffany> I'm doing this function to convert a normal to a box shape, I thought something was going wrong but I had forgotten to abs the values I give to max
[22:28:38] *** Quits: eatkinson (eatkinson@moz-392601D4.lightspeed.sntcca.sbcglobal.net) (Quit: eatkinson)
[22:29:34] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[22:29:42] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[22:29:58] <strcat> we make.... a ridiculous number of "anonymous" external constants
[22:31:01] <acrichto> strcat: which ones?
[22:31:22] <strcat> I'm just looking at the IR
[22:31:25] *** Quits: donri (donri@moz-9BB61102.tbcn.telia.com) (Client exited)
[22:31:25] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Ping timeout)
[22:31:32] <acrichto> what's their name?
[22:31:32] <strcat> they aren't named
[22:31:34] <strcat> :\
[22:31:36] <strcat> acrichto: @const12432142145
[22:31:43] <acrichto> oh those are used in constexprs
[22:31:47] <acrichto> we call them all "const"
[22:31:48] <acrichto> llvm renames them
[22:31:55] <acrichto> *silently* renames them
[22:31:55] <strcat> why aren't they internal?
[22:32:06] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[22:32:12] <acrichto> hmm...
[22:32:17] <acrichto> I think they can be
[22:32:31] <acrichto> static a: &'static int
[22:32:34] <acrichto> that yields 2 constants
[22:32:41] <acrichto> one for `a`, one for the thing it points to
[22:32:51] <acrichto> the thing it points to is "const", which I think can be internalized
[22:33:27] *** Joins: anders (anders@moz-329650BE.cust.bredbandsbolaget.se)
[22:34:10] *** Joins: jdm (jdm@EE8B569C.C68510DC.D0446090.IP)
[22:34:10] *** ChanServ sets mode: +o jdm
[22:34:22] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[22:34:36] <Luqman> acrichto: strcat they seem to be already marked 'private'
[22:34:40] *** Quits: cdidd (cdidd@moz-464D7AB.broadband.corbina.ru) (Input/output error)
[22:34:43] <strcat> Luqman: oh, that's fine then
[22:35:39] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[22:35:54] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[22:35:54] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/qmtuXw
[22:35:54] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[22:36:01] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[22:36:13] *** Quits: jmgrosen (jmgrosen@moz-BF80C818.sbcc.edu) (Quit: jmgrosen)
[22:40:03] *** Joins: lerc (quassel@B2E8CAD3.A8D14E52.788638A4.IP)
[22:40:47] *** Quits: carllerche (carllerche@383121B7.B2666F0E.66399531.IP) (Quit: carllerche)
[22:40:53] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[22:40:53] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/tjfrEA
[22:40:53] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[22:40:55] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[22:40:55] <ghrust> 01[13rust01] 15bors pushed 17 new commits to 06auto: 02http://git.io/bF31Yg
[22:40:55] <ghrust> 13rust/06auto 146aba140 15Alex Crichton: rustdoc: Add sundown to src/rt/...
[22:40:55] <ghrust> 13rust/06auto 14db28c29 15Alex Crichton: rustdoc: Use sundown for markdown highlighting...
[22:40:55] <ghrust> 13rust/06auto 143585c64 15Alex Crichton: rustdoc: Change all code-blocks with a script...
[22:40:57] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[22:41:07] *** Joins: cdidd (cdidd@moz-E42A7DCD.broadband.corbina.ru)
[22:41:40] *** Joins: Fluky (Mibbit@moz-7B2B6018.kortex.jyu.fi)
[22:42:16] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[22:42:24] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[22:42:34] <acrichto> cmr: ping
[22:42:47] <cmr> acrichto: pogn
[22:43:00] <acrichto> cmr: the graphs of memory, are they just samples taken every so often?
[22:43:11] <dbaupp> acrichto: yes
[22:43:20] <acrichto> how are the vertical lines for passes generated?
[22:43:28] <aatch> acrichto, parsing stderr
[22:43:34] <dbaupp> acrichto: parsing the output of -Z time-passes
[22:43:41] <dbaupp> hey aatch :)
[22:43:47] <aatch> dbaupp, hey
[22:44:21] *** Quits: bytbox (s@moz-DC83764A.washdc.fios.verizon.net) (Ping timeout)
[22:44:35] <acrichto> I get the feeling that the passes don't line  up exactly to the right times
[22:44:42] <aatch> acrichto, they don't
[22:44:50] *** Joins: dherman (dherman@moz-BBE3ABD.mv.mozilla.com)
[22:44:50] *** ChanServ sets mode: +ao dherman dherman
[22:44:55] *** ozten is now known as ozten|afk
[22:45:14] *** Joins: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[22:45:32] <dbaupp> woaaaah, I just looked at the new data... what are we doing the the first 5 seconds o_O
[22:45:38] * acrichto stops chasing a theoretical leak in rutstc
[22:45:53] <acrichto> dbaupp: the huge peak is reindexing
[22:45:57] <acrichto> the huge drop is when phase_2 returns
[22:46:08] <acrichto> we don't drop crates as new crates are crated
[22:46:10] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[22:46:10] <acrichto> created*
[22:46:33] <acrichto> phase_2 creates like 10 crates (all folded from one another), but they're all dropped at the same time instead of incrementally
[22:46:51] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[22:47:02] <dbaupp> ah! makes sense
[22:47:15] * acrichto is satsified for now
[22:47:23] <acrichto> back to rampaging around in privacy
[22:47:33] <strcat> what is the crate map for?
[22:47:47] <acrichto> logging levels
[22:47:51] <acrichto> for each module
[22:48:36] *** Quits: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[22:48:48] <Fluky> could anyone point out what modules exist for rust in terms of cgi/fastcgi?
[22:49:04] <Fluky> can't seem to know how to find anything
[22:49:06] <aatch> Fluky, to my knowledge, none.
[22:49:20] <tiffany> is there a constant for euler's number?
[22:49:51] <Luqman> tiffany: yes
[22:49:57] <acrichto> tiffany: in the existential sense, I believe so, in rust, I'd look in f32::consts and such
[22:49:57] <Luqman> don't remember the exact path though
[22:50:02] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[22:50:44] <Luqman> rusti: std::f32::consts::e
[22:50:45] -rusti- 2.71828175f32
[22:50:51] <Luqman> rusti: std::f64::consts::e
[22:50:52] -rusti- error: internal compiler error: unexpected failure
[22:50:52] -rusti- note: the compiler hit an unexpected failure path. this is a bug
[22:50:52] -rusti- note: try running with RUST_LOG=rustc=1 to get further details and report the results to github.com/mozilla/rust/issues
[22:50:52] -rusti- 2.71828183f64
[22:51:05] *** Joins: bytbox (s@moz-DC83764A.washdc.fios.verizon.net)
[22:51:07] <tiffany> rusti: std::num::Real::e()
[22:51:08] -rusti- pastebinned 7 lines of output: http://sprunge.us/dUWF
[22:51:12] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[22:51:21] <tiffany> rusti: std::num::Real::<float>::e()
[22:51:22] -rusti- pastebinned 13 lines of output: http://sprunge.us/VATY
[22:51:26] <tiffany> rusti: std::num::Real<float>::e()
[22:51:27] -rusti- pastebinned 14 lines of output: http://sprunge.us/OcHN
[22:51:30] <kmc> wow new layout on http://www.rust-lang.org/
[22:51:39] <strcat> kmc: and fancy new docs ;p
[22:51:47] <kmc> yeah I saw the new docs, they rock my socks
[22:51:57] <Fluky> I wonder if something is being worked out. As I'm just beginning to look at Rust, I haven't got to look into the FFI and such yet.
[22:52:24] <strcat> Fluky: don't think so
[22:52:24] <kmc> Fluky: would you want to use FFI to implement CGI / FastCGI support? i would think it would be more self-contained than that
[22:52:42] <Fluky> Well I don't know
[22:52:55] <Fluky> Because I'm new to rust
[22:53:43] *** Joins: rlbaker (rlbaker@moz-D05907D4.hfc.comcastbusiness.net)
[22:54:00] <kmc> also the world has generally moved away from FastCGI to things like http://projects.unbit.it/uwsgi/ that speak various language-specific APIs
[22:54:00] <Fluky> I was just thinking that it would be a module that I'd be looking to use myself
[22:54:04] *** Joins: eatkinson (eatkinson@EEDFA61C.772DB3ED.90B17E8F.IP)
[22:54:15] <kmc> I don't understand the tradeoffs of that vs. FastCGI well enough to say what we should do
[22:54:29] <dbaupp> rusti: let f: f32 = Real::e(); f
[22:54:31] -rusti- 2.71828175f32
[22:54:37] <strcat> kmc: the overhead of using http and having the web server proxy to it is negligible anyway
[22:55:05] <dbaupp> tiffany: ^ (we currently don't allow specifying the Self type in a static method call, so we have to help the inference)
[22:55:59] *** Quits: gareth0 (gareth0@7C428FA9.3FD5F917.1A294DCF.IP) (Input/output error)
[22:56:33] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[22:58:48] *** Joins: spud (spud@moz-8F8D4E52.lightspeed.bcvloh.sbcglobal.net)
[22:59:55] <aatch> bah, the homepage was updated but the example is still old!
[23:00:25] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[23:00:53] <cmr> aatch: it tracks releases, not master.
[23:01:03] <steveklabnik> fastcgi is... good to have, but is also bad globally
[23:01:14] <steveklabnik> people are moving away from mit
[23:01:21] <steveklabnik> from it
[23:01:26] <aatch> cmr, is the new for-loop 0.7 or 0.8?
[23:01:31] <cmr> aatch: 0.8
[23:01:44] <aatch> cmr, ah.
[23:02:36] <Amaranth> heh, I remember the original WSGI talks, I think I might still be on that mailing list
[23:02:46] <Amaranth> Crazy to see it's gone so far
[23:03:17] <steveklabnik> rails has really hit the limit of rack
[23:03:23] <steveklabnik> which is roughly equivlant to wsgi
[23:03:37] <steveklabnik> it's amazing for simple stuff but has a lot of problems
[23:03:47] <brson> aatch: do you have a new example?
[23:03:49] <steveklabnik> specifically, because of the nesting, it can cause a _lot_ of GC thrashing
[23:04:02] <steveklabnik> partially because ruby's gc isn't optimized for that kind of work
[23:04:03] <aatch> brson, no, I just thought that it was out-of-date
[23:04:25] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[23:04:25] *** ChanServ sets mode: +o tjc
[23:04:28] <aatch> because of the for-loop syntax.
[23:04:44] <dbaupp> steveklabnik: it's getting a new GC in 2.1, isn't it? (will that be better?)
[23:05:03] <steveklabnik> dbaupp: it's getting a semi-new gc. it will help, but not with that problem
[23:05:17] <Amaranth> The new GC is always the one that will fix it
[23:05:21] <steveklabnik> :)
[23:05:26] <flaper87> aatch: brson I think it'd be nice to use try or spawn_supervised instead of just spawn
[23:05:31] <flaper87> in the example, that is
[23:07:22] *** Joins: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net)
[23:07:53] *** Quits: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net) (Input/output error)
[23:07:57] *** Joins: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net)
[23:08:27] <brson> the description for std::rt::io in rustdoc is "Synchronous I/O. Synchronous I/O. Synchronous I/O"
[23:09:15] <dbaupp> acrichto: ^ (it looks like rustdoc doesn't handle /*! description without a newline?)
[23:11:25] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[23:11:28] <acrichto> dbaupp: that's getting fixed in the rustdoc pull
[23:12:05] <acrichto> or wait no
[23:12:35] <acrichto> that looks really amusing actually
[23:12:55] *** Joins: josh (josh@moz-357ADCEA.hsd1.mn.comcast.net)
[23:13:25] <acrichto> while I'm not entirely sure why it shows up 3 times, I know why it shows up at least 2 times!
[23:15:14] *** Joins: tjc (tjc@moz-7B0110AD.mv.mozilla.com)
[23:15:14] *** ChanServ sets mode: +o tjc
[23:15:16] *** Quits: jdm (jdm@EE8B569C.C68510DC.D0446090.IP) (Quit: Lost terminal)
[23:16:17] *** Quits: squiddy_ (squiddy@moz-CF736F05.adsl.alicedsl.de) (Quit: Leaving)
[23:19:58] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[23:20:35] *** Joins: ofeldt (ofeldt@moz-2C983C49.dip0.t-ipconnect.de)
[23:20:53] *** Joins: tcsc (tcsc@moz-ADC0ED45.hsd1.ct.comcast.net)
[23:20:56] *** Joins: maik (maik@moz-46093746.dip0.t-ipconnect.de)
[23:21:22] *** Quits: ofeldt- (ofeldt@moz-E0ED28D.dip0.t-ipconnect.de) (Ping timeout)
[23:22:07] *** Joins: bogen (dwight@moz-8B4E7E75.dsl.rcsntx.swbell.net)
[23:24:12] *** Quits: mdup (mdu@moz-2989B319.rev.numericable.fr) (Quit: mdup)
[23:24:24] *** ozten|afk is now known as ozten
[23:24:53] *** Quits: SteveMcQwark (steven099@moz-7CFCF343.cpe.net.cable.rogers.com) (Ping timeout)
[23:25:47] *** Joins: SteveMcQwark (steven099@moz-7CFCF343.cpe.net.cable.rogers.com)
[23:26:09] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[23:27:36] <Luqman> i need more descriptive branch names than: bba, en, esln, hf, etc :|
[23:28:10] *** Joins: mdup (mdup@moz-2989B319.rev.numericable.fr)
[23:28:17] *** Quits: cdidd (cdidd@moz-E42A7DCD.broadband.corbina.ru) (Input/output error)
[23:28:19] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[23:28:24] <kimundi> Luqman: He, most of the time I forget to actually make a branch and just use master :P
[23:30:02] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[23:30:07] <steveklabnik> at least git makes it easy to turn that work into a branch afterward!
[23:31:33] <acrichto> brson: are we slow on mac, or do the linux bots just have better hardware? linux is almost always beating osx by ~20 mins
[23:31:33] *** Quits: eatkinson (eatkinson@EEDFA61C.772DB3ED.90B17E8F.IP) (Quit: eatkinson)
[23:31:40] <acrichto> ~15 mins
[23:31:44] <kimundi> Um, why is there no link to the trunk tutorial and manual on the new rust frontpage?
[23:32:56] <mcpherrin> woah, new front page
[23:33:37] <Eridius> whoa new front page
[23:33:54] *** flaper87 is now known as flaper87|afk
[23:33:57] <aatch> acrichto, probably better hw. The mac bots are mac-minis if I remember right.
[23:34:06] <aatch> whoa new, front page
[23:34:19] <Eridius> hmm, the github link is really important. I'm surprised to see it relegated to an icon
[23:34:37] *** Quits: nkoep (nik@moz-8331E7A6.pool.mediaways.net) (Client exited)
[23:34:37] <brson> i'm not crazy about the icons
[23:34:48] <mcpherrin> I think the icons are okay if they are next to a text label
[23:34:51] <Eridius> an octothorpe for IRC? I wasn't sure what that icon represented until I hovered
[23:35:03] <Eridius> given its proximity to twitter and twitter's annexing of octothorpe for hashtags
[23:35:12] <dbaupp> https://github.com/graydon/rust-www/tree/gh-pages btw
[23:35:17] <tikue_> if i have a workspace with multiple projects, is it possible to use rustpkg to bundle them up as one git repo?
[23:35:40] <Eridius> dbaupp: wow, remarkably little discussion for such a front-facing thing
[23:35:40] <dbaupp> tikue_: just make the whole workspace the git repo?
[23:35:43] *** Joins: eatkinson (eatkinson@EEDFA61C.772DB3ED.90B17E8F.IP)
[23:36:16] <tikue_> dbaupp: and then eventually (once it's fixed) you can just do rustpkg install git@github.com:<user>/<repo> ?
[23:36:29] <steveklabnik> rustpkg install github.com/user/repo
[23:36:55] <tikue_> steveklabnik: ah thank you. the thing i'm wondering isâ€¦rustpkg init sets up the workspace, so how would that work with a repo that _is_ a workspace?
[23:37:14] <steveklabnik> i wrote a whole new tutorial for rustpkg here: http://static.rust-lang.org/doc/master/tutorial-rustpkg.html
[23:37:15] <tikue_> do you skip rustpkg init in that case?
[23:37:23] <steveklabnik> it may answer some of your questions... let me read the scrollback real quick
[23:37:36] <steveklabnik> ahhh yes, so you just put two subdirectories inside of src
[23:37:37] <steveklabnik> basically
[23:37:59] <steveklabnik> so 'rustpkg build foo' and 'rustpkg build bar' can coexist in src/{foo,bar}
[23:38:39] <tikue_> steveklabnik: i see (maybe). 
[23:38:50] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Input/output error)
[23:38:55] *** Joins: huseby_ (huseby@moz-4E8C421A.husebyhome.com)
[23:39:08] *** Joins: Azdle (patrick@moz-8C723B60.hsd1.mn.comcast.net)
[23:39:13] <tikue_> steveklabnik: so would each subdirectory require a separate rustpkg install?
[23:39:38] <brson> I'll make a few tweaks to the website
[23:39:38] *** Quits: huseby (huseby@moz-4E8C421A.husebyhome.com) (Ping timeout)
[23:40:04] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[23:40:17] *** Quits: josh (josh@moz-357ADCEA.hsd1.mn.comcast.net) (Quit: josh)
[23:40:33] <steveklabnik> tikue_: so, you have two projects, foo and bar. you're building baz, which depends on them
[23:40:58] <tikue_> steveklabnik: the use case is essentially "look at all these example rust projects! try them out!"
[23:41:01] <steveklabnik> really, you do 'extern mod foo="github.com/user/repo"; extern mod bar="github.com/user/repo"
[23:41:16] <steveklabnik> then when you build your project, it will grab the repo, and build the two of them
[23:41:24] <steveklabnik> if you want the 'look at these and try them out
[23:41:26] *** Quits: BitPuffin (isak@moz-49828767.cust.tele2.se) (Ping timeout)
[23:41:33] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[23:42:04] <steveklabnik> you'd probably have them just clone the repo
[23:42:10] <steveklabnik> and build whichever ones you want
[23:42:16] <steveklabnik> i'd imagine
[23:42:21] <steveklabnik> tjc: what do you think of all this ^^^
[23:43:20] *** Joins: cdidd (cdidd@moz-4E94942D.broadband.corbina.ru)
[23:43:30] <acrichto> steveklabnik: I've got a package in a github repo called rs-splay, and relevant file is src/splay/lib.rs, ye it fails to install (a condition is raised), do I need to specify that rs-splay isn't the name of the library that I want to install?
[23:44:26] *** Quits: LU324 (weechat@9AF4F288.83671C58.1B5D53D7.IP) (Input/output error)
[23:44:40] *** Joins: LU324 (weechat@9AF4F288.83671C58.1B5D53D7.IP)
[23:45:19] <steveklabnik> acrichto: i believe the current state of the world is that it assumes that the name is the same
[23:45:58] <brson> rust-lang.org is updated to have master tutorial and manual links and remove the icons
[23:46:09] <doomlord_> foo.iter().collect()  .. seems to give you a collection of [&T] if foo was [T] ... i found this a bit unexpected when doing a 'filter' (seems like you need to map it after with |&x|x
[23:46:12] <steveklabnik> the other bit of docs currently is http://static.rust-lang.org/doc/master/rustpkg.html
[23:46:15] <steveklabnik> which is the manual
[23:46:30] <strcat> doomlord_: collect takes Iterator<A> and gives you Collection<A>
[23:46:41] <strcat> rusti: range(0, 10).collect::<~[int]>()
[23:46:43] -rusti- ~[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
[23:46:53] <strcat> if you have an iterator if references, you'll get a collection of references
[23:47:20] <doomlord_> 	let a:~[int]=~[4,1,5,3,7,2,9];let b=a.iter().filter(|&x|*x<6).map(|&x|x).to_owned_vec();
[23:47:32] <doomlord_> ^^^ works but did surprise me
[23:47:41] <c74d> If I have what would in C++ be a class, with state and methods, do I understand correctly that in Rust this would be broken into a struct for the state, a trait to declare the methods, and an impl for the struct to define the methods?
[23:47:54] <strcat> c74d: no
[23:48:00] <doomlord_> (maybe its a contrived example)
[23:48:01] <strcat> c74d: you can do an impl on a type
[23:48:10] <strcat> traits are to make stuff generic between types
[23:48:20] <c74d> An impl for the struct type, I mean.
[23:48:23] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[23:48:29] <strcat> no trait though
[23:48:36] <strcat> rusti: struct Foo; impl Foo { }
[23:48:37] -rusti- ()
[23:48:39] <c74d> strcat: Oh, I donâ€™t need the trait?
[23:48:40] <kimundi> doomlord_: If you don't care about the original owned vector afterwards, you can use move_iter(), which is a Iterator over T 
[23:48:51] <strcat> c74d: nope
[23:48:56] <strcat> c74d: traits are for making stuff generic
[23:49:00] <dbaupp> rusti: struct Foo { state: int } impl Foo { fn some_method(&self) { println!("{}", self.state); } } (Foo { state: 1 }).some_method() // c64d
[23:49:01] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[23:49:01] -rusti- 1
[23:49:01] -rusti- ()
[23:49:05] <c74d> strcat: Okay, thanks. Thatâ€™s good to know.
[23:49:18] <c74d> I almost switched back to C++.
[23:49:18] <dbaupp> (err, *c74d)
[23:50:29] <tikue_> lol.
[23:51:19] <amatus> does rust have ioctl?
[23:52:28] *** Quits: eatkinson (eatkinson@EEDFA61C.772DB3ED.90B17E8F.IP) (Quit: eatkinson)
[23:52:28] <kmc> amatus: it has libc + POSIX so yeah
[23:52:28] <sp3d> link to libc and define it as an extern fn and it does
[23:52:36] <doomlord_> its the behaviour with filter between iter() and collect() that surprised me; i suppose with map you're directly saying what you want
[23:52:39] <kmc> but you might need to write a little C if you want to pull in constants from C headers
[23:53:04] <steveklabnik> is vararg support still nonexistant, btw?
[23:53:04] <amatus> fair enough
[23:53:07] <steveklabnik> im assuming so
[23:53:43] <dbaupp> steveklabnik: (it is)
[23:54:11] <kimundi> doomlord_: yeah, fileter adds an reference itself, so if you start of with an iterator over &T, fileter will give you & &T to compare against
[23:54:19] <acrichto> steveklabnik: but if you want it for vprintf-style formatting you can use format_args!
[23:54:28] <tikue_> doomlord_: the filter doesn't change it
[23:54:32] <tikue_> rusti: let v = ~[1, 2, 3, 4]; let v2: ~[int] = v.move_iter().filter(|&i| i % 2 == 0).collect(); v2
[23:54:33] -rusti- ~[2, 4]
[23:54:42] *** Joins: dandy (Dandy@moz-84CC8377.hsd1.co.comcast.net)
[23:54:44] <steveklabnik> acrichto: oh yeah?
[23:54:46] <doomlord_> yeah i was seeing &&'s appearing where i didn't expect it 
[23:55:01] <kimundi> doomlord_: I guess you could map early so that it'S only a &T at the filter
[23:55:02] *** Quits: tikue_ (tkuehn@CFA5F35A.2ACBBF24.689607DE.IP) (Quit: tikue_)
[23:55:18] <acrichto> rusti: format_args!(::std::fmt::format, "{}", "test")
[23:55:20] -rusti- ~"test"
[23:55:25] <doomlord_> i suppose a lot of the time filtering and getting a ptr collection would make sense.. 
[23:55:29] <acrichto> rusti: format_args!(|args| { ::std::fmt::format(args) }, "{}", "test")
[23:55:30] -rusti- ~"test"
[23:55:41] <doomlord_> or filter_map would give direct control
[23:55:54] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[23:55:54] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/bF31Yg
[23:55:54] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[23:56:02] <kimundi> doomlord_: yeah
[23:56:17] <doomlord_> rusti: let v = ~[1, 2, 3, 4]; let v2: ~[int] = v.iter().filter(|&i| i % 2 == 0).collect(); v2
[23:56:18] -rusti- pastebinned 41 lines of output: http://sprunge.us/MiRa
[23:56:38] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Input/output error)
[23:57:06] *** Quits: anders (anders@moz-329650BE.cust.bredbandsbolaget.se) (Quit: )
[23:57:27] <doomlord_> so move_iter() passes T, wheras iter() is &T ?
[23:57:35] <dbaupp> doomlord_: yes
[23:57:39] *** ozten is now known as ozten|afk
[23:58:40] <kimundi> doomlord_: move_iter consumes the vector, and thus can give you the actual elements, rather than references to it.
[23:58:52] <doomlord_> i suppose another way to go would be to make another variant of 'filter' that makes the case i had in mind more intuitive
[23:58:57] <dandy> If I have a vec of "enum Shape" as in the rust tutorial is there extra data stored with each instance to flag if it is a Circle or a Rectangle?
[23:59:05] <kmc> yes
[23:59:15] <Eridius> dandy: there's an integral value, called the discriminant
[23:59:22] *** Quits: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: ChatZilla 0.9.90.1-rdmsoft [XULRunner 22.0/20130619132145])
[23:59:26] <dandy> If I ad a vec if Circles do I still gget that discriminant?
[23:59:34] <heftig> dandy: no
[23:59:36] <Eridius> dandy: you can't have a vec of only one enum variant
[23:59:47] <Eridius> Circle isn't a type. Shape is. Circle is a value
[23:59:47] <kmc> Circle isn't a type
[23:59:55] <dandy> so it has to be ~[Shape]
