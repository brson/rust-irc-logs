[00:08:28] <cmr> bjz_: http://docs.octayn.net/color/
[00:09:53] <dbaupp> cmr: <3 docs
[00:09:55] <bjz_> |o/
[00:10:14] <dbaupp> (although I guess we need to make rustdoc more controllable: the empty sidebar looks weird :( )
[00:10:28] <bjz_> dbaupp: indeed
[00:11:29] <bjz_> h3r3tic: so are you doing a data-driven approach to your gfx managment?
[00:11:45] <bjz_> h3r3tic: ie. buffers, shaders etc?
[00:13:43] <h3r3tic> bjz_: right now only the post-processing pipeline
[00:14:52] <bjz_> h3r3tic: I'm feeling like my abstractions are really leaky
[00:15:01] <h3r3tic> bjz_: I'm creating the runtime for this right now: https://gist.github.com/h3r2tic/5ad4030bc1247c37285b
[00:15:27] <h3r3tic> mine are pretty opaque :P the user-accessible textures, buffers, etc are just opaque handles
[00:15:36] <h3r3tic> could swap DX for OGL at any moment :P
[00:15:59] <bjz_> mm
[00:16:13] <bjz_> I haven't had much experience with this stuff
[00:16:25] <bjz_> that would be super nice
[00:17:05] <bjz_> h3r3tic: can you tie the lifetime of your handles to the GfxDevice?
[00:17:14] <bjz_> or whatever?
[00:17:28] <h3r3tic> my idea is that gfx resources will be opaque handles which you can 'map' exclusively to modify them. you get a borrowed pointer, so none of the internals may escape
[00:17:59] <bjz_> h3r3tic: also, cgmath has Points
[00:18:00] <h3r3tic> don't really care for the lifetimes of handles. I'll be logging their creation and checking whether they got cleaned upon shutdown
[00:18:09] <h3r3tic> mm
[00:18:11] <h3r3tic> neat
[00:18:29] <bjz_> h3r3tic: they were private for a while there, shockingly
[00:18:34] <h3r3tic> hah
[00:18:35] <bjz_> but fixed now
[00:18:43] <h3r3tic> HEADLINE: FIXED POINT
[00:18:48] <h3r3tic> ha. ha. haha.
[00:18:54] <h3r3tic> wheew, my jokes own.
[00:19:25] <bjz_> they have stuff like p - p -> v
[00:19:32] <h3r3tic> awesome :D
[00:19:35] <bjz_> p + v -> p
[00:19:37] <h3r3tic> can you port it to GLSL now?
[00:19:39] <h3r3tic> please?
[00:19:43] <bjz_> heh
[00:19:49] <h3r3tic> or rather, make rustc emit glsl
[00:20:05] <cmr> I don't think that'd be nice to use.
[00:20:10] <bjz_> so yeah, with mine uniforms can take Vecs or Points
[00:21:06] <h3r3tic> GLSL is teh suck.
[00:21:14] <h3r3tic> Cg interfaces <3
[00:22:43] <bjz_> h3r3tic: https://gist.github.com/bjz/416c552f284fba12a474
[00:22:56] <tiffany> Cg doesn't go past geometry shaders doesn't it?
[00:23:38] <bjz_> h3r3tic: not sure if that's the best way
[00:23:45] <bjz_> h3r3tic: was playing though
[00:23:48] <h3r3tic> yeah, Cg is in a major state of disrepair :< it did work on NV quite well for some time. but to target anything else, you'd need to cross-compile to GLSL, and that didn't support bloody anything :P
[00:24:05] <h3r3tic> bjz_: looks pretty neat. me, I don't allow the setting of individual uniforms
[00:24:15] <h3r3tic> I only have uniform buffers. just like GPUs :P
[00:24:41] *** Quits: dmarcos_ (dmarcos@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: Leaving...)
[00:24:47] <bjz_> h3r3tic: yeah, I don't know this stuff :()
[00:24:49] <h3r3tic> well, GPUs don't really have uniform buffers, but drivers do :P
[00:25:00] <bjz_> so much to learn :V
[00:25:39] <tiffany> how does that work?
[00:25:46] <tiffany> uniform buffers just let you fill out arrays easily don't they?
[00:25:50] <bjz_> h3r3tic: would be nice to collaborate :(
[00:26:11] <tiffany> and then there was another kind of buffer that let you bind different uniforms for each call in a MultiDraw call
[00:26:23] <h3r3tic> bjz_: my aim is to work on rather niche stuff and obsess about some gfx stuff. difficult to collaborate like that :P
[00:26:32] <bjz_> mmk
[00:26:38] <tiffany> I should probably help out
[00:26:50] <h3r3tic> tiffany: well, texture buffers are mostly for arays
[00:26:50] <bjz_> tiffany: would be nice to
[00:26:52] <h3r3tic> arrays*
[00:27:02] <cmr> I don't know if jeaye announced in here, but he's taking contributions for q3 now.
[00:27:12] <h3r3tic> with uniform buffers you basically define structs with params which you upload and bind as a bulk
[00:27:21] <h3r3tic> ( you can have arrays in them, sure )
[00:27:24] <bjz_> cmr: I'm after something more general
[00:27:38] <tiffany> oh right
[00:27:41] <tiffany> I forgot you can fill out more things
[00:27:50] <tiffany> don't you have to do lots of worrying about struct layout and padding though?
[00:27:53] <bjz_> cmr: something that people can plug into. maximise my impact
[00:27:56] <h3r3tic> the GL wiki is quite neat: http://www.opengl.org/wiki/Uniform_Buffer_Object
[00:28:02] <h3r3tic> tiffany: yah, you do :<
[00:28:08] <h3r3tic> float3 is terrible, for example :P
[00:28:12] *** lbergstrom is now known as lbergstrom|away
[00:28:24] <h3r3tic> it can pack individual floats, but float3 is padded to 16 bytes. *facepalm*
[00:28:32] <h3r3tic> dx11 doesn't have this issue
[00:28:32] <cmr> bjz_: I have no idea what you're talking about, but ok.
[00:28:38] <h3r3tic> oh, I'm talking about the std140 layout
[00:28:46] <h3r3tic> there are other ones, but equally quirky
[00:29:17] <bjz_> cmr: oh, well you could work on one monolithic project, or you could split your project into components and then others can use them too
[00:29:35] <cmr> bjz_: context?
[00:29:44] <h3r3tic> bjz_: maybe I can share my gfx base stuffs, but it's not there yet
[00:29:45] <bjz_> cmr: re opengl stuff
[00:29:48] <tiffany> ooh, I should use uniform buffers
[00:29:53] <bjz_> cmr: you meantioned q3
[00:30:09] <bjz_> h3r3tic: np!
[00:30:11] <tiffany> that sounds like it'd be really efficient for loading up constants + per-frame + per-object data
[00:30:19] <h3r3tic> yup! exactly :)
[00:30:19] <cmr> oh
[00:30:30] <h3r3tic> you split your data depending on the frequency of updates to minimize the nr of uploads
[00:30:34] <tiffany> having a different block for each is a useful annotation too
[00:30:41] <h3r3tic> I currently have per-viewport and per-instance constants
[00:32:05] <bjz_> tiffany: my current shader module. ty.rs is abit ecessive probs, was just going off the spec: https://gist.github.com/bjz/416c552f284fba12a474
[00:32:32] <bjz_> tiffany: probably pretty awful
[00:32:39] <jeaye> cmr: Thanks. :)
[00:32:42] <h3r3tic> I don't know about GL drivers, but in DX11 there isn't even a way to modify a single constant. so every time you want to modify any, you need to upload the entire buffer. I suspect there may be similar inefficiencies in teh GL driver if you use individual consts
[00:32:52] * bjz_ is stabbing blindly
[00:33:08] <bjz_> h3r3tic: ok
[00:33:45] * h3r3tic hasn't even bothered to add support for anything other than pixel and vertex shaders xD
[00:34:42] <h3r3tic> bjz_: I stole your shader error checking :P
[00:34:52] <bjz_> heh
[00:35:04] <h3r3tic> and then I haz runtime reload whenever I save the shader file :D
[00:35:11] <bjz_> h3r3tic: not sure if I should just fail, or return a result
[00:35:41] <h3r3tic> I have it fail. and upon runtime reload, it will print the errors without actually updating the shader
[00:36:16] <bjz_> h3r3tic: the issue is that gl stuff must run on the main thread right?
[00:36:17] <h3r3tic> and I modify the compiler errors to point to the preprocessed file, so that I can double-click it in the output window in Sublime to go to the proper line :D
[00:36:24] <h3r3tic> nah, it doesn't
[00:36:30] <bjz_> oh cool
[00:36:43] <bjz_> I guess it's not getting os events
[00:36:44] <h3r3tic> well, only one thread at a time can use GL
[00:36:50] <h3r3tic> scratch that
[00:37:07] <h3r3tic> one GL /rendering context/ can only be used by one thread at a time
[00:37:16] <h3r3tic> so one window or one PBO.
[00:37:32] <h3r3tic> and every time you want to use it from another thread, you need to call *glMakeContextCurrent();
[00:37:37] <h3r3tic> or something along these lines
[00:37:40] <bjz_> h3r3tic: I'm just thinking that failure is super useful if you're working with lots of little tasks
[00:37:57] <tiffany> it looks good bjz
[00:38:04] <bjz_> h3r3tic: fail at the site, then let somebody else deal with it
[00:38:20] <h3r3tic> well I just fail it to hell. the app simply won't start if shaders are borken
[00:38:26] <h3r3tic> kinda like you don't run a partially compied app.
[00:38:31] <bjz_> ok
[00:38:35] <h3r3tic> compiled*
[00:38:50] <tiffany> it's nice how you made uniforms traits
[00:39:49] <bjz_> tiffany: I worry about trait explosion though
[00:40:22] <h3r3tic> mine's just this: https://gist.github.com/h3r2tic/2d3213d40edadfe8a043 :P and I handle uniform buffers externally
[00:40:47] * bjz_ thinks there's value in simplicity
[00:41:08] <bjz_> h3r3tic: don't do 	let mut buf = vec::from_elem(len as uint - 1, 0u8); // subtract 1 to skip the trailing null character
[00:41:22] <bjz_> https://gist.github.com/bjz/416c552f284fba12a474#file-mod-rs-L68
[00:41:33] <bjz_> I worked out a better way
[00:42:12] <bjz_> I know you were just copying me ')
[00:42:17] <bjz_> :P
[00:42:31] <h3r3tic> :P
[00:42:34] <h3r3tic> but why is this better?
[00:42:52] <h3r3tic> you already have the length, why calculate it again via strlen? :P
[00:43:02] <h3r3tic> as that's what from_c_str will do
[00:43:46] <bjz_> hm
[00:44:03] * bjz_ wonders if that's what from_utf8 does too
[00:44:09] <h3r3tic> sure does
[00:44:25] * bjz_ wonders if there should be a from_c_str_len
[00:45:02] <h3r3tic> oh, no, wait, from_utf8 can't possibly
[00:45:12] <h3r3tic> cause it gets a buffer with proper length and without a \0
[00:45:29] <bjz_> only one way to find out - look at the code
[00:45:33] <h3r3tic> which unicode type are the rust strings?
[00:45:39] <dbaupp> utf8
[00:45:48] <h3r3tic> cool, then it can just copy the buffer as is
[00:45:58] <dbaupp> ~str is essentially an alias for a utf8-encoded ~[u8]
[00:46:05] <h3r3tic> mm :)
[00:46:15] <h3r3tic> I thought that maybe it was utf32 for easy indexing
[00:46:43] <h3r3tic> but that would probably be too wasteful :P
[00:47:02] <bjz_> https://github.com/mozilla/rust/blob/master/src/libstd/str.rs#L1020
[00:47:09] <bjz_> ooh, from_buf_len
[00:47:44] <tiffany> wow, ty.rs is quite a file
[00:48:02] <bjz_> tiffany: heh
[00:48:20] <bjz_> tiffany: as I say, was just going off what the docs specified
[00:48:27] <bjz_> as valid values
[00:48:32] <h3r3tic> bjz_: maybe from_utf8_owned ?
[00:48:34] <dbaupp> h3r3tic: yeah, too wasteful (and anyway ~[char] is utf32), and random-access char indexing isn't actually very useful
[00:48:43] * bjz_ has no idea what 90% of them mean
[00:49:02] * bjz_ actually maybe 50%
[00:49:20] <bjz_> ok, maybe 60%
[00:49:22] <bjz_> -_-#
[00:49:30] <bjz_> the texture stuff is weird
[00:49:37] * bjz_ doesn't like textures
[00:49:47] * bjz_ plans not to use textures in his game
[00:50:33] <bjz_> h3r3tic: ahh, nice
[00:51:35] <h3r3tic> dbaupp: mm, neat :) and, yeah. I think I only ever used utf32 once, in a GUI toolkit which found it handy for random slicing and reverse iteration of the text
[00:52:28] <h3r3tic> bjz_: don't under-appreciate textures :P they give you one thing geometry can't do: filtering
[00:52:41] <h3r3tic> you don't want craploads of aliasing for tiny detail
[00:52:50] <bjz_> h3r3tic: heh, yeah, was being a little silly
[00:52:54] <h3r3tic> :P
[00:53:37] *** Joins: mib_pnlu5y (Mibbit@moz-424CB7EB.cs.brown.edu)
[00:53:48] <bjz_> h3r3tic: plying the 'naive diane-kruger-ful noob'
[00:53:49] *** Quits: mib_pnlu5y (Mibbit@moz-424CB7EB.cs.brown.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[00:53:58] <h3r3tic> lol
[00:54:02] <bjz_> :)
[00:54:03] <tiffany> my PEG library doesn't use random char accesses, it uses slices and char ranges
[00:54:10] <dbaupp> h3r3tic: well, we have reverse iteration cheaply
[00:54:29] <h3r3tic> oh? didn't know you could do that cheaply with utf8/16 :o
[00:54:42] <tiffany> utf8 is designed to allow reverse iteration
[00:54:46] <h3r3tic> awesome then :D
[00:54:58] <dbaupp> h3r3tic: but handling unicode correctly very very rarely indexes by char, or iterates in reverse, since some visible characters (i.e. things shown to the user, aka graphemes) are more than one codepoint
[00:55:09] <h3r3tic> aye
[00:55:16] <dbaupp> e.g. you can write ö as 'o' + combining diaersis
[00:55:18] <h3r3tic> diactrics which apply to neighboring chars, and stuff
[00:55:52] <h3r3tic> I never handled these properly despite having unicode glyph rendering support >_>
[00:56:04] <h3r3tic> I might be stealing Servo's code for my purposes then xD
[00:56:09] <tiffany> my engine does unicode via harfbuzz+freetype2
[00:56:28] <tiffany> it can as-correctly-as-someone-who-can't-read-arabic-could-tell render arabic just fine
[00:56:36] <h3r3tic> awesome :o
[00:56:47] <dbaupp> (servo uses harfbuzz too, don't know about freetype2)
[00:56:57] <tiffany> I use freetype2 to load font files
[00:57:04] <h3r3tic> can servo render into opengl framebuffers? xD
[00:57:10] <tiffany> harfbuzz for layout, cairo for actual rendering
[00:57:37] <tiffany> the code is pretty ugly
[00:57:59] <tiffany> I have a giant struct with like 30 members just to do render an image of the text
[00:58:05] <h3r3tic> that sounds pretty comprehensive, tiffany
[00:58:10] <h3r3tic> wow xD
[00:58:39] <tiffany> I was exaggerating apparently
[00:58:40] <tiffany> 22 members
[00:58:50] <tiffany> er, 21, and 2 of them are mine
[00:58:52] <tiffany> https://github.com/TheCodeLab/IntenseLogic/blob/master/src/graphics/gui/text.c
[00:59:04] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Ping timeout)
[00:59:55] <h3r3tic> dbaupp: let me rephrase... can I use servo as a GUI toolkit for my toy 3D engine? xD kinda like Awesomium works with Gecko and C++
[01:00:32] <h3r3tic> tiffany: hah, as long as it's easy to use
[01:00:42] <tiffany> I suppose
[01:01:06] <tiffany> it's fairly easy to use
[01:01:06] <tiffany> https://github.com/TheCodeLab/IntenseLogic/blob/master/demos/helper.lua#L113
[01:01:40] <h3r3tic> hah. yup :)
[01:01:41] <dbaupp> h3r3tic: no idea, you'd have to ask #servo
[01:02:01] <h3r3tic> kay
[01:02:43] <h3r3tic> hrm, lua... reminds me of the eternal quesiton: to script or not to script
[01:02:55] <h3r3tic> ideally I'd just reload Rust crates at runtime
[01:03:08] <h3r3tic> don't want a lousy dynamically typed scripting lang >_<
[01:03:55] <tiffany> well, rust is a little on the verbose side syntax-wise
[01:04:08] <tiffany> I want a statically typed scripting language designed for conciseness over prevention of errors
[01:04:18] <tiffany> I kind of have a running project for that
[01:05:42] <h3r3tic> hm, I'm not finding Rust particularly heavy on syntax... and I hate maintaining bindings and forcing the API to only use concepts available in the scripting lang
[01:06:09] <tiffany> well, I've been personally burned by rust when I should beu sing a DSL
[01:06:25] <tiffany> https://github.com/tiffany352/frscript/blob/master/grammar.rs#L66
[01:06:34] <tiffany> there's also the very explicit casts and stuff
[01:06:45] <tiffany> yeah, maintaining bindings is pretty sucky
[01:06:53] <tiffany> I use luajit ffi because of that
[01:07:20] <h3r3tic> mm
[01:07:52] <h3r3tic> I'm all for DSLs, but mostly for declarative purposes
[01:08:09] <h3r3tic> but then again, I haven't dabbled with gameplay logic much
[01:09:18] <h3r3tic> back when I did some, I was dealing with rather tricky networked logic. but for that I just needed the right abstraction, not a scripting lang
[01:10:09] <tiffany> the reason I want a scripting language is because of how rust is
[01:10:21] <bjz_> aye
[01:10:28] <tiffany> rust is designed for programming in the large, and doing it efficiently; safety features and memory management and such
[01:10:41] <bjz_> rust isn't really great for the higher level stuff
[01:11:01] <tiffany> for writing small code that just manages a bunch of high-level objects, garbage-collected concise scripting languages are nice
[01:11:02] <h3r3tic> hah, for scripting I'd jus use @ptrs everywhere. a scripting lang would do the same anyway
[01:11:53] <tiffany> I've been working on my own scripting language actually
[01:12:03] <tiffany> it
[01:12:14] <tiffany> it's currently a very simple S-expr based language
[01:12:19] <tiffany> but I plan on redoing it to be stack-based
[01:12:27] <h3r3tic> <yoda>The NIH is strong in this one.</yoda>
[01:12:29] <h3r3tic> xD
[01:12:41] <h3r3tic> I blew it.
[01:12:45] <h3r3tic> strong in this one is.
[01:12:46] <h3r3tic> >_>
[01:13:23] <bjz_> tiffany: oooh!
[01:13:32] <bjz_> tiffany: yay for stack based
[01:13:36] <tiffany> well my problem is that the languages designed for easy embedding are all crap in more than one way
[01:13:48] <bjz_> tiffany: hehe
[01:13:49] <tiffany> I could spend an hour ranting about how bad lua is
[01:13:55] <h3r3tic> hah
[01:14:00] <bjz_> so why not make your own crap one?
[01:14:05] <bjz_>  /jk
[01:14:22] <tiffany> then there's the languages that would be great for scripting but their API is non-existant
[01:14:33] * cmr likes lua very much
[01:14:43] <cmr> what doyou perceive tobe its crappiness?
[01:14:44] <tiffany> like, I'd be using kitten right now if it wasn't written in haskell with an afaik-undocumented-if-it-even-exists API
[01:14:44] <bjz_> tiffany: I am jealous of idris's dsl thingy
[01:14:50] <bjz_> yeah
[01:14:55] <bjz_> kitten looks great
[01:14:55] <tiffany> cmr: for one thing, typos are not errors
[01:15:27] <cmr> sure, yeah
[01:15:58] <h3r3tic> >>> "meow" say
[01:15:58] <h3r3tic> meow
[01:16:00] <h3r3tic> there, I'm sold.
[01:16:59] <h3r3tic> "This is the best way to learn Kitten, a little functional stack-based programming language. Actually, it’s pretty much the only way, because Kitten is young."
[01:17:02] <h3r3tic> ..... because Kitten is young .........
[01:17:03] <h3r3tic> xD
[01:17:21] *** Joins: canhtak (jeremy@moz-ABE51D61.wl.t.ulaval.ca)
[01:17:26] <bjz_> awesome thing about stack languages: a repl is usually literally: read eval pront loop.
[01:17:33] <bjz_> or something like that
[01:17:40] <tiffany> heh
[01:17:45] <bjz_> pront
[01:17:49] <bjz_> ptonto!
[01:17:53] <bjz_> fff
[01:17:57] <bjz_> -_-#
[01:18:01] <bjz_> potatoes
[01:18:10] <cmr> second hand smoke: not even once
[01:18:18] <bjz_> heah, that would be a good lang - potatoes
[01:18:35] <bjz_> replant and it sprouts again
[01:18:39] <bjz_> or something
[01:18:53] * bjz_ doesn't know where that metaphor is going...
[01:22:41] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[01:43:34] <bjz_> h3r3tic tiffany: updated ze logging: https://gist.github.com/bjz/416c552f284fba12a474
[01:44:08] <h3r3tic> cool, tnx :D
[01:44:35] <h3r3tic> hm, no need to subtract that \0 ?
[01:44:42] <bjz_> h3r3tic: now remember, if you use this you have to follow the licence conditions :P
[01:44:44] <bjz_> no
[01:44:47] <h3r3tic> @_@
[01:44:51] <bjz_> 'cuse you know the length
[01:45:41] <h3r3tic> but it includes the terminator
[01:45:56] <bjz_> hmm
[01:45:59] <h3r3tic> oooooh, "If shader has no information log, a value of 0 is returned." that's dangerous with a -1
[01:46:18] <bjz_> heh
[01:46:50] <bjz_> wait, let me mess up my shader
[01:46:54] <h3r3tic> lol
[01:47:14] <h3r3tic> fun fun fun fun. so much fun and it's not even friday!
[01:47:20] <bjz_> haha
[01:49:02] *** Quits: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[01:49:07] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[01:50:58] <bjz> h3r3tic: ok: https://gist.github.com/bjz/416c552f284fba12a474#file-mod-rs-L72
[01:53:27] <h3r3tic> mkay
[01:54:09] <h3r3tic> I think I'd rather return Err(~"(no error log)") or something along these lines :P
[02:01:23] <bjz> ok
[02:02:00] <bjz> not an Result<Option<~str>>? xD
[02:02:06] <bjz>  jk
[02:02:24] <bjz> sadly we don't have any monadic sugar :P
[02:02:48] <h3r3tic> surely you mean Cell<Result<Option<~str>>>
[02:03:50] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[02:04:02] <cmr> Surely you mean Cell<Arc<Mut<Result<Option<~str>, Option<~str>>>>>
[02:04:56] <bjz> D-:
[02:05:06] <h3r3tic> and finally have a *c_void point at it, and return that.
[02:05:10] <cmr> hah
[02:05:11] * bjz hides under his blanket
[02:11:35] <bjz> h3r3tic: oki, professional error messagy thing: https://gist.github.com/bjz/416c552f284fba12a474#file-mod-rs-L73
[02:13:09] * bjz wonders if he should take a queue from the rust runtime and spit out random lines of Pride and Predjudice instead
[02:13:27] <cmr> cue*
[02:13:35] <bjz> or maybe Animal Farm
[02:13:37] <h3r3tic> xD
[02:13:41] <bjz> cmr: gah, yes
[02:14:04] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Ping timeout)
[02:14:18] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[02:14:35] <h3r3tic> or dup CPU register contents
[02:14:40] <bjz> or maybe I should assign the opengl error codes specific messages from 1984
[02:14:41] <h3r3tic> just so that it looks cryptic when it happens
[02:14:47] <bjz> it would be just as descriptive
[02:14:48] <h3r3tic> dump*
[02:15:04] <h3r3tic> lolz
[02:15:19] <bjz> ("double plus bad")
[02:15:30] <h3r3tic> I don't handle a single GL error code :P
[02:15:50] <bjz> eugh, you and your callback wizardry
[02:15:56] <h3r3tic> ARB_debug_output for the win.
[02:15:58] <h3r3tic> seriously :)
[02:16:29] *** Quits: zz_kimundi (kimundi@moz-DBB29B3E.dip0.t-ipconnect.de) (Ping timeout)
[02:16:37] * bjz prays to the spaghetti monster that Mavericks supports it
[02:16:42] <h3r3tic> can you get a local stack trace from the runtime?
[02:17:01] <h3r3tic> that would be neat to have in the GL error callback
[02:17:01] <cmr> rust runtime?
[02:17:04] <cmr> no
[02:17:04] <h3r3tic> yeah
[02:17:06] <h3r3tic> aw
[02:17:23] <bjz> http://renderingpipeline.com/2013/09/opengl-debugging-with-khr_debug/
[02:18:05] <bjz> ohwait
[02:18:09] <bjz> wrong article
[02:18:19] <bjz> http://renderingpipeline.com/2013/09/simulating-khr_debug-on-macos-x/
[02:19:11] *** Quits: pcwalton (pcwalton@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: pcwalton)
[02:20:22] *** Joins: zz_kimundi (kimundi@moz-C410002E.dip0.t-ipconnect.de)
[02:20:24] *** zz_kimundi is now known as kimundi
[02:35:13] *** Joins: Yeri (jasonjasmi@41C91A8A.CE609BA5.E39FBF79.IP)
[02:44:40] *** Joins: pcwalton (pcwalton@moz-471501F5.snfc.ca.megapath.net)
[02:44:40] *** ChanServ sets mode: +qo pcwalton pcwalton
[02:57:19] *** Quits: pcwalton (pcwalton@moz-471501F5.snfc.ca.megapath.net) (Quit: pcwalton)
[03:03:36] *** Joins: jeffdb_ (jeff@moz-D13B6004.hsd1.ca.comcast.net)
[03:06:27] *** Quits: geoffhill (geoffhill@moz-244CF33A.amazon.com) (Ping timeout)
[03:07:48] *** Quits: Yeri (jasonjasmi@41C91A8A.CE609BA5.E39FBF79.IP) (Quit: Yeri)
[03:11:28] <h3r3tic> yay, my post-processing pipeline is starting to work :D running the ssao via it now :D
[03:11:37] <h3r3tic> enough for today. nighyt! o/
[03:11:52] <h3r3tic> nighty*
[03:14:55] *** Quits: sp3d (s@6361F3B1.19CD1E54.8354FB35.IP) (Ping timeout)
[03:25:01] *** Joins: pcwalton (pcwalton@moz-B51927E9.hsd1.ca.comcast.net)
[03:25:01] *** ChanServ sets mode: +qo pcwalton pcwalton
[03:45:09] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Ping timeout)
[04:05:34] *** Quits: jeffdb_ (jeff@moz-D13B6004.hsd1.ca.comcast.net) (Ping timeout)
[04:16:36] *** Joins: dmarcos_ (dmarcos@moz-F7958F77.dsl.static.sonic.net)
[04:22:27] *** Quits: canhtak (jeremy@moz-ABE51D61.wl.t.ulaval.ca) (Quit: canhtak)
[04:25:40] *** Quits: dmarcos_ (dmarcos@moz-F7958F77.dsl.static.sonic.net) (Quit: Leaving...)
[04:26:37] *** Joins: dmarcos_ (dmarcos@moz-F7958F77.dsl.static.sonic.net)
[04:39:11] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[05:04:31] *** Quits: tikue_ (tikue_star@5D962672.CD72397.689607DE.IP) (Ping timeout)
[05:42:07] *** Quits: dmarcos_ (dmarcos@moz-F7958F77.dsl.static.sonic.net) (Quit: Leaving...)
[05:56:43] *** kimundi is now known as zz_kimundi
[06:02:37] *** Quits: pcwalton (pcwalton@moz-B51927E9.hsd1.ca.comcast.net) (Quit: .)
[06:29:29] *** zz_kimundi is now known as kimundi
[06:45:41] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[06:46:33] *** Joins: dmarcos_ (dmarcos@moz-F7958F77.dsl.static.sonic.net)
[06:47:24] *** Quits: dmarcos_ (dmarcos@moz-F7958F77.dsl.static.sonic.net) (Quit: Leaving...)
[07:06:26] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[07:11:40] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[07:19:13] *** Joins: Ferreus (ferreus@moz-661E82D6.dip0.t-ipconnect.de)
[07:32:56] *** Joins: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk)
[07:43:06] *** Quits: dbaupp (Thunderbir@moz-CB11E887.lns20.syd6.internode.on.net) (Ping timeout)
[07:47:06] *** Joins: dbaupp (Thunderbir@moz-EA27E3E6.lns20.syd6.internode.on.net)
[07:48:19] *** Quits: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP) (Ping timeout)
[07:49:30] *** Joins: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP)
[07:59:56] *** Joins: squiddy (squiddy@moz-7C8450A3.adsl.alicedsl.de)
[08:01:32] *** Joins: Axord (xord@moz-1B228827.lsanca.dsl-w.verizon.net)
[08:11:55] *** kimundi is now known as zz_kimundi
[08:17:10] *** zz_kimundi is now known as kimundi
[08:17:49] *** Joins: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[08:18:02] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[08:22:53] *** Quits: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP) (Ping timeout)
[08:24:04] *** Joins: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP)
[08:31:42] *** Quits: Amaranth (travis@moz-F81BB56A.cpe.cableone.net) (Ping timeout)
[08:35:08] *** Joins: Amaranth (travis@moz-F81BB56A.cpe.cableone.net)
[08:35:33] *** Joins: jdm (jdm@87C1F78E.1DE10CA8.D8E68FF6.IP)
[08:35:45] *** Joins: ac_dc (ac@moz-FD24B77.sohonet.co.uk)
[08:36:04] *** Quits: ac_dc (ac@moz-FD24B77.sohonet.co.uk) (Quit: Leaving)
[08:37:06] *** Quits: StarLight (StarLight@moz-2CB27D18.dynamic.avangarddsl.ru) (Ping timeout)
[08:40:34] *** Joins: StarLight (StarLight@moz-3D8C0C7A.dynamic.avangarddsl.ru)
[08:42:02] <bjz_> h3r3tic: so do you just bypass glUniform and just use uniform buffers?
[08:42:25] <bjz_> http://www.opengl.org/wiki/Uniform_Buffer_Object
[08:47:41] <bjz_> jack: hoy
[08:48:02] <bjz_> jack: so yeah, I was wondering how you guys work with opengl and concurrency in servo
[08:48:45] <bjz_> also in terms of abstracting it
[08:48:55] <jack> So the compositor and the input events all live on the main thread 
[08:49:34] <jack> we create layers with rust-layers and then render those using rust-opengles calls
[08:49:45] <jack> to the dinwo that glfw-rs created for us
[08:49:59] <bjz_> oh cool, will have to look at rustlayers
[08:50:03] <bjz_> dinwo?
[08:50:09] <bjz_> window!
[08:50:12] <bjz_> hah
[08:50:15] <jack> the renderers run on arbitrary threads, and do Azure calls to a draw target backed by an FBO
[08:50:26] <jack> then we pass the texture from hte FBO to the compositor
[08:50:36] <jack> s/dinwo/window/
[08:50:48] <doomlord_> thinking out loud .. could servo code yield libraries to build a native rust gui toolkit
[08:50:56] <bjz_> ah, nice: https://github.com/mozilla-servo/rust-layers
[08:51:28] <bjz_> jack: I guess your in a slightly different space to us in 3d gamedev land
[08:51:32] <jack> i don't think we've done any work on native gui stuff
[08:51:46] <jack> servo's gui will probably be rendered with servo i'm guessing
[08:52:00] <jack> like gecko, will be javascript/html based 
[08:52:36] <bjz_> jack: I'm sort of thinking about what h3r3tic is doing - I think he's taking a handle-based approach - you have a GfxManager thing, and put stuff in  and it gives you back handles
[08:53:53] <bjz_> jack: I assume that inside the box you could queue up the calls, then push them off to the graphics card
[08:54:13] <bjz_> 'box' meaning the manager thing
[08:55:09] <bjz_> jack: you might be able to use messaging to talk to the manager, but I don't know how heavy that would be
[08:55:35] <bjz_> jack: I was also wondering about what happens if the handles get out of date
[08:56:11] <bjz_> in your experience with erlang, do any systems take that approach?
[08:57:06] * bjz_ has been reading this: http://gamesfromwithin.com/data-oriented-design
[08:59:03] <jack> i'll take a look at that in a sec
[08:59:13] <jack> there is a wxwidgets api in erlang, but i've never used it.
[08:59:25] <jack> i think ti's even in the standard library. so you could take a peek at that.
[09:03:45] <doomlord_> bjz_ have you seen the sony pdfs on that aswell
[09:04:12] <doomlord_> ah its definitely similar material
[09:04:19] <bjz_> doomlord_: I think I may have
[09:04:39] <bjz_> https://gist.github.com/bjz/3792143#data-oriented-design
[09:04:39] <doomlord_> i've never done performance tuning on x86 machines.
[09:04:55] <doomlord_> on the consoles this stuff couldn't be over-emphasized, it was really dramatic
[09:05:10] <doomlord_> ballpark 10x 
[09:05:40] <bjz_> wow
[09:05:50] <doomlord_> extreme cases 50x
[09:06:03] <bjz_> http://research.scee.net/files/presentations/gcapaustralia09/Pitfalls_of_Object_Oriented_Programming_GCAP_09.pdf
[09:06:06] <bjz_> is that it?
[09:06:15] <doomlord_> yes
[09:06:57] <bjz_> (first link on my list)
[09:08:15] <doomlord_> the fact traits do both vtables and compile-time polymorphism is interesting..
[09:08:27] <doomlord_> not having the vtable pointers embedded in the structs
[09:08:42] <bjz_> mm
[09:08:49] <doomlord_> i wonder if it will make switching from one side of code to the other easier
[09:09:12] <bjz_> well, so long as you don't use trait objects
[09:09:48] <doomlord_> the reason this was such a big deal on consoles was the in-order processors they had
[09:10:07] <doomlord_> made cache-misses more severe.. and also their pipelines were very deep
[09:10:40] <Amaranth> Right it was the worst case CPU design basically for branchy indirect code
[09:10:46] <doomlord_> but the general gist of sorting by type will always help parllelism
[09:10:50] <Amaranth> Branch prediction failure and cache misses hurt
[09:11:06] <bjz_> I guess I'm less interested in the perfomance aspect, and more in terms of creating a nice stream based abstraction
[09:11:37] <doomlord_> its great when there is synergy between "a nice abstraction" and potential for optimization
[09:11:44] <bjz_> yes, exactly
[09:12:05] <Amaranth> That's basically the entity component system design too
[09:12:20] <bjz_> as in, I don't want to be doing premature optimization, but if you can choose the right abstraction it should make it easier down the line
[09:12:42] <bjz_> the interesting thing will be how it plays with the task based concurrency
[09:13:01] <Amaranth> Processing components instead of entities means better cache usage and such but also makes for a nice way to build entities in a flexible manner
[09:13:09] <bjz_> mm
[09:13:32] <doomlord_> concurrency and 8core nextgen consoles :)
[09:14:00] <bjz_> so yeah, that's the kind of graphics manager thing that would be nice
[09:14:02] <Amaranth> Oh yeah it also makes it easier to split entity work up into things you can run concurrently and not
[09:15:57] <bjz_> like, you could try to go and model opengl in an OO way, but I wonder if that's the best way
[09:16:20] <Amaranth> Definitely better to worry about it at a much higher level than that
[09:16:25] <bjz_> mm
[09:16:25] <Amaranth> Like the model layer
[09:16:38] <bjz_> model layer?
[09:16:57] <Amaranth> An API for defining a scene and shoving models into it
[09:17:05] <bjz_> ah yes
[09:18:28] <bjz_> I was sort of thinking the main streams of inputs would be shaders, geometry and varying attribute thingies - is that right?
[09:18:45] <bjz_> there are others
[09:19:46] <Amaranth> What happened to uniforms?
[09:19:56] <bjz_> oh yes, uniforms
[09:20:10] <bjz_> textures?
[09:20:26] <Amaranth> At this level you have to be very flexible though to match what model loaders and such people want to hook up with it
[09:20:35] <bjz_> yeah
[09:20:52] <Amaranth> Unless you're making the whole thing and screw alternative components
[09:21:12] <Amaranth> https://github.com/bkaradzic/bgfx might be interesting to look at
[09:21:28] <bjz_> oh cool
[09:21:30] <Amaranth> Although it's a bit over the top
[09:21:40] <bjz_> why do you say that?
[09:22:10] <bjz_> woah, fonts?
[09:22:13] <Amaranth> It has its own shading language :P
[09:22:31] <bjz_> ha!
[09:22:34] <Amaranth> Because it abstracts GLSL vs HLSL away from you too
[09:23:31] <Amaranth> It works with both GLFW and SDL as well
[09:23:44] <bjz_> not sure if lod and hdr would be on the table
[09:24:04] <bjz_> lod seems like something better left to the client
[09:24:06] <Amaranth> Although by works with I mean it has API to pass it a window handle and no other interaction
[09:24:18] <bjz_> oh ok
[09:25:39] *** kimundi is now known as zz_kimundi
[09:27:15] <bjz_> Amaranth: yeah it does seem over top, I would be interested in something more lightweight. Unix philosophy. but I'm gonna have a read of it.
[09:27:24] * bjz_ clones repo
[09:27:50] <Amaranth> I starred it for the same purpose a while back
[09:28:00] <Amaranth> The base sounds like a really good idea
[09:28:42] <bjz_> Amaranth: are you interested in working on something like this for Rust?
[09:29:03] <Amaranth> Maybe but I don't seem to have time to work on anything
[09:29:07] <bjz_> oh ok
[09:29:09] <Amaranth> Or rather when I have time I don't feel like doing it
[09:29:10] <bjz_> no worries
[09:29:14] <bjz_> haha
[09:29:29] <bjz_> yeah that's no problem
[09:34:00] <Amaranth> I think filling out something someone else started would be easier though. That way I don't freeze on trying to ensure I have the best design to start with
[09:34:55] * bjz_ is good at starting things
[09:35:15] <bjz_> (not so good at finishing)
[09:35:23] <bjz_> (but getting better)
[09:41:33] * bjz_ is thinking that [T,..2], [T,..3], [T,..4], [[T,..2],..2], [[T,..3],..3], [[T,..4],..4] would be good intermediate formats for vertex/matrix data
[09:45:35] <bjz_> doomlord_: ^
[09:46:50] <Amaranth> bjz_: texcoords, vertcoords, RGBA color?
[09:51:41] <rsaarelm> Ooh hey bgfx looks neat. Thanks for the link.
[09:53:10] <bjz_> Amaranth: basically
[09:53:26] <bjz_> Amaranth: wait
[09:53:37] <bjz_> Amaranth: what do texcoords normally look like?
[09:54:13] <Amaranth> https://msdn.microsoft.com/dynimg/IC282223.jpg
[09:54:44] <Amaranth> Bit of a smartass answer, you said look :P
[09:54:52] <Amaranth> Dunno what you mean otherwise though
[09:55:09] <bjz_> Amaranth: what do you mean by "texcoords, vertcoords, RGBA color?"
[09:55:34] <Amaranth> You've got 2 values, 3 values, and 4 values
[09:55:44] <Amaranth> 2 = UV, 3 = XYZ, 4 = RGBA
[09:55:49] <Amaranth> Figured that was what you were going for
[09:56:00] <bjz_> yeah
[09:56:25] <bjz_> well momogeneous coordinates?
[09:56:33] <bjz_> *homo-
[09:56:35] <bjz_> :P
[09:57:27] <bjz_> not sure if that's used all that mich though when working with bufferes
[09:58:06] <Amaranth> So this is where things get more finicky
[09:58:34] <Amaranth> Every model format lays things out a little differently so you either need to be really flexible on how you allow loading it in to the GPU or you need a conversion step if there is a mismatch
[09:59:04] <Amaranth> That's why bgfx has its own format you have to convert things to offline
[10:00:41] <bjz_> by 'model format', do you mean how the vertex data is laide out, with colors uv etc? like interleaved etc?
[10:01:28] <bjz_> or do you mean the data file?
[10:01:43] <bjz_> like .obj?
[10:02:33] *** zz_kimundi is now known as kimundi
[10:03:02] <Amaranth> Those are the same thing?
[10:06:07] <bjz_> oh ok
[10:08:12] <bjz_> yeah I was thinking that would be up to the client
[10:10:02] *** Quits: squiddy (squiddy@moz-7C8450A3.adsl.alicedsl.de) (Connection reset by peer)
[10:27:46] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[11:56:30] *** kimundi is now known as zz_kimundi
[12:03:09] *** Quits: alex_abreu (alex@moz-7421D6C9.mc.videotron.ca) (Ping timeout)
[12:11:17] *** Joins: alex_abreu (alex@moz-7421D6C9.mc.videotron.ca)
[12:13:16] *** Quits: alex_abreu (alex@moz-7421D6C9.mc.videotron.ca) (Ping timeout)
[12:24:55] *** Joins: alex_abreu (alex@moz-7421D6C9.mc.videotron.ca)
[12:25:01] *** zz_kimundi is now known as kimundi
[12:49:19] *** Joins: canhtak (jeremy@moz-ABE51D61.wl.t.ulaval.ca)
[13:35:13] *** Joins: nexzen (Mibbit@moz-6EC6C2C7.superkabel.de)
[13:35:46] <nexzen> bjz you on?
[13:48:14] *** lbergstrom|away is now known as lbergstrom
[13:52:07] *** Quits: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net) (Ping timeout)
[14:04:31] *** kimundi is now known as zz_kimundi
[14:24:46] *** Quits: nexzen (Mibbit@moz-6EC6C2C7.superkabel.de) (Quit: http://www.mibbit.com ajax IRC Client)
[14:32:39] *** Quits: alex_abreu (alex@moz-7421D6C9.mc.videotron.ca) (Client exited)
[14:34:47] *** Joins: sp3d (s@6361F3B1.19CD1E54.8354FB35.IP)
[14:37:05] *** Joins: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca)
[14:37:18] *** zz_kimundi is now known as kimundi
[14:39:39] <cmr> doomlord_: data-oriented design is very interesting
[14:42:44] <cmr> and these slides are really good
[15:04:12] <cmr> bjz_: your gist with allt he links
[15:04:16] <cmr> bjz_: sooooooooo interesting
[15:04:28] <bjz_> heh
[15:05:01] <bjz_> woops! missed nexen :(
[15:06:06] <cmr> vpri is basically the coolest thing ever
[15:06:17] <doomlord_> vpri = ?
[15:06:31] <cmr> I'm looking at http://www.vpri.org/pdf/tr2009016_steps09.pdf right now
[15:06:38] <cmr> some sort of research project
[15:12:06] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[15:12:22] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[15:20:03] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[15:20:23] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[15:22:55] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[15:25:25] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[15:34:07] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Quit: leaving)
[15:36:05] <bjz_> cmr: yeah Alan Kay and co. are pretty ridiculous
[15:36:40] <bjz_> metalanguages ftw
[15:45:40] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[15:46:03] *** Joins: dmarcos_ (dmarcos@moz-F7958F77.dsl.static.sonic.net)
[16:14:55] *** Quits: dmarcos_ (dmarcos@moz-F7958F77.dsl.static.sonic.net) (Quit: Leaving...)
[16:30:51] *** Quits: jdm (jdm@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: Lost terminal)
[16:30:55] *** Quits: Ferreus (ferreus@moz-661E82D6.dip0.t-ipconnect.de) (Ping timeout)
[16:37:55] *** Joins: dmarcos_ (dmarcos@moz-F7958F77.dsl.static.sonic.net)
[16:48:48] *** Quits: dmarcos_ (dmarcos@moz-F7958F77.dsl.static.sonic.net) (Ping timeout)
[16:50:28] *** Joins: dmarcos_ (dmarcos@moz-F7958F77.dsl.static.sonic.net)
[16:50:50] *** Joins: dmarcos- (dmarcos@13C3AE42.9B31F973.27C4FA62.IP)
[16:51:06] *** Quits: dmarcos- (dmarcos@13C3AE42.9B31F973.27C4FA62.IP) (Quit: Leaving...)
[16:51:54] *** Quits: dmarcos_ (dmarcos@moz-F7958F77.dsl.static.sonic.net) (Ping timeout)
[16:55:00] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[17:00:33] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[17:15:00] *** Joins: dmarcos_ (dmarcos@13C3AE42.9B31F973.27C4FA62.IP)
[17:17:28] *** Joins: pcwalton (pcwalton@moz-BE33DA21.fw1.sfo1.mozilla.net)
[17:17:28] *** ChanServ sets mode: +qo pcwalton pcwalton
[17:29:07] *** Joins: dmarcos- (dmarcos@D4362188.813F9F87.40DA7F7D.IP)
[17:29:45] *** Quits: dmarcos_ (dmarcos@13C3AE42.9B31F973.27C4FA62.IP) (Ping timeout)
[17:31:25] *** Quits: dmarcos- (dmarcos@D4362188.813F9F87.40DA7F7D.IP) (Ping timeout)
[17:38:38] *** Quits: CarpNet (ac@moz-FD24B77.sohonet.co.uk) (Quit: Leaving)
[17:40:57] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Quit: Leaving)
[17:41:33] *** Joins: dmarcos_ (dmarcos@4740923C.8B096A1C.9BBDBC7E.IP)
[17:42:43] *** Joins: dmarcos- (dmarcos@93B219C2.9693521E.943C3C9C.IP)
[17:43:40] *** Quits: dmarcos_ (dmarcos@4740923C.8B096A1C.9BBDBC7E.IP) (Ping timeout)
[17:45:04] *** Joins: dmarcos_ (dmarcos@8825862D.F9C9B3C0.943C3C9C.IP)
[17:45:16] *** Quits: luisbg (luisbg@moz-E7587DBE.collabora.co.uk) (Ping timeout)
[17:46:02] *** Joins: luisbg (luisbg@moz-E7587DBE.collabora.co.uk)
[17:46:07] *** Quits: dmarcos- (dmarcos@93B219C2.9693521E.943C3C9C.IP) (Ping timeout)
[17:53:33] *** Joins: tikue_ (tikue_star@7FD2F500.F3E8A984.689607DE.IP)
[17:59:52] *** Joins: dmarcos- (dmarcos@205E76FE.9EC63A3F.943C3C9C.IP)
[18:00:42] *** Quits: dmarcos_ (dmarcos@8825862D.F9C9B3C0.943C3C9C.IP) (Ping timeout)
[18:07:18] *** Joins: dmarcos_ (dmarcos@C58C6294.701413E4.DE10B5AD.IP)
[18:08:13] *** Quits: dmarcos- (dmarcos@205E76FE.9EC63A3F.943C3C9C.IP) (Ping timeout)
[18:13:49] *** Quits: dmarcos_ (dmarcos@C58C6294.701413E4.DE10B5AD.IP) (Ping timeout)
[18:28:55] *** Joins: squiddy (squiddy@moz-7C8450A3.adsl.alicedsl.de)
[18:32:22] *** kimundi is now known as zz_kimundi
[18:33:47] *** Quits: pcwalton (pcwalton@moz-BE33DA21.fw1.sfo1.mozilla.net) (Input/output error)
[18:35:05] *** Joins: pcwalton (pcwalton@moz-BE33DA21.fw1.sfo1.mozilla.net)
[18:35:05] *** ChanServ sets mode: +qo pcwalton pcwalton
[18:43:45] *** zz_kimundi is now known as kimundi
[18:46:40] *** Joins: geoffhill (geoffhill@moz-244CF33A.amazon.com)
[18:48:38] *** Quits: geoffhill (geoffhill@moz-244CF33A.amazon.com) (Ping timeout)
[19:09:23] <h3r3tic> bjz_: yeah, I bypass glUniform and only use buffers.
[19:14:22] <bjz_> h3r3tic: ok, neat
[19:18:10] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Client exited)
[19:27:11] <bjz_> h3r3tic: any comments you can make based on the following discussion we had?
[19:27:37] <h3r3tic> which one? :P
[19:28:40] *** Quits: doomlord_ (servitor@moz-3F3192E5.range86-184.btcentralplus.com) (Quit: Leaving)
[19:29:11] <bjz_> 'we' as in doomlord and Amaranth
[19:32:55] <h3r3tic> right
[19:33:03] <h3r3tic> well I just read it, and don't know what to comment on :P
[19:33:07] <h3r3tic> you touched quite a few subjects
[19:33:11] <bjz_> np
[19:33:22] <h3r3tic> if you have a specific query... xD
[19:39:41] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[19:43:20] *** Quits: StarLight (StarLight@moz-3D8C0C7A.dynamic.avangarddsl.ru) (Ping timeout)
[19:44:18] *** Joins: StarLight (StarLight@moz-9EB0C86E.dynamic.avangarddsl.ru)
[19:50:18] *** Quits: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr) (Quit: ZNC - http://znc.sourceforge.net)
[19:52:43] *** Joins: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr)
[19:54:04] *** Quits: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr) (Quit: ZNC - http://znc.sourceforge.net)
[20:01:33] *** Joins: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr)
[20:10:08] *** fredy is now known as fredy_away
[20:10:12] *** fredy_away is now known as fredy
[20:13:15] *** Quits: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr) (services.mozilla.org (Too many invalid passwords))
[20:14:03] *** Joins: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr)
[20:22:09] *** Joins: jxv (jxv@moz-B6559D27.socal.res.rr.com)
[20:23:38] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[20:29:35] *** Quits: lbergstrom (Adium@moz-5D8E4B14.lightspeed.cicril.sbcglobal.net) (Quit: Leaving.)
[20:37:59] *** Quits: tikue_ (tikue_star@7FD2F500.F3E8A984.689607DE.IP) (Ping timeout)
[20:47:39] *** Joins: doomlord_ (servitor@moz-3F3192E5.range86-184.btcentralplus.com)
[20:49:53] *** Quits: doomlord_ (servitor@moz-3F3192E5.range86-184.btcentralplus.com) (Ping timeout)
[20:50:43] *** Joins: doomlord_ (servitor@moz-3F3192E5.range86-184.btcentralplus.com)
[20:55:22] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[20:58:58] *** Quits: doomlord_ (servitor@moz-3F3192E5.range86-184.btcentralplus.com) (Ping timeout)
[21:01:26] *** Joins: doomlord_ (servitor@moz-3F3192E5.range86-184.btcentralplus.com)
[21:02:39] *** Quits: squiddy (squiddy@moz-7C8450A3.adsl.alicedsl.de) (Quit: Leaving)
[21:07:30] *** Quits: doomlord_ (servitor@moz-3F3192E5.range86-184.btcentralplus.com) (Ping timeout)
[21:10:06] *** Joins: doomlord_ (servitor@moz-3F3192E5.range86-184.btcentralplus.com)
[21:15:44] *** Joins: ercxx (ercan@moz-7CFF3469.dyn.optonline.net)
[21:18:53] *** Joins: lbergstrom (Adium@moz-5D8E4B14.lightspeed.cicril.sbcglobal.net)
[21:25:07] *** Joins: Yeri (jasonjasmi@41C91A8A.CE609BA5.E39FBF79.IP)
[21:31:45] *** Quits: doomlord_ (servitor@moz-3F3192E5.range86-184.btcentralplus.com) (Ping timeout)
[21:31:55] *** Joins: adrusi (adrusi@moz-392E7E0.bltmmd.fios.verizon.net)
[21:33:23] *** Joins: doomlord_ (servitor@moz-3F3192E5.range86-184.btcentralplus.com)
[21:37:09] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[21:44:07] *** Joins: geoffhill (geoffhill@moz-244CF33A.amazon.com)
[21:48:24] *** Joins: dmarcos_ (dmarcos@moz-BE33DA21.fw1.sfo1.mozilla.net)
[21:49:02] *** Quits: doomlord_ (servitor@moz-3F3192E5.range86-184.btcentralplus.com) (Quit: Leaving)
[21:50:40] *** Quits: jxv (jxv@moz-B6559D27.socal.res.rr.com) (Connection reset by peer)
[22:17:17] *** Quits: Yeri (jasonjasmi@41C91A8A.CE609BA5.E39FBF79.IP) (Quit: Yeri)
[22:25:10] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[22:25:32] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[22:45:10] *** Joins: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net)
[22:48:48] *** Quits: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk) (Ping timeout)
[22:49:22] *** Quits: dmarcos_ (dmarcos@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: Leaving...)
[22:51:25] <cmr> bjz_: hey.
[22:51:53] <cmr> bjz_: you deleted the glcore repo instead of redirecting it to gl-rs
[22:52:03] <cmr> bjz_: someone just complained ot me about not being able to find the opengl bindings :p
[23:08:04] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[23:08:10] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[23:08:21] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[23:08:27] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[23:22:12] <bjz_> bjz_: ack
[23:22:23] <bjz_> bjz_: yeah I had it redirecting for a while
[23:22:40] <bjz_> oh woops, cmr
[23:23:10] <bjz_> I had it redirecting for several months
[23:23:28] <bjz_> obviously not long enough :P
[23:23:59] <bjz_> cmr: who complained?
[23:24:07] <bjz_> on irc?
[23:25:02] <bjz_> h3r3tic: is it ok if I borrow your idea about the gfxdevice thing?
[23:26:45] <bjz_> h3r3tic: the sort of vending machine thing?
[23:27:28] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[23:27:55] <h3r3tic> bjz_: of course it is, why would you even ask xD
[23:28:01] <bjz_> heh
[23:28:22] <bjz_> h3r3tic: do you use vaos?
[23:28:26] <h3r3tic> not yet
[23:28:40] <h3r3tic> but will :
[23:28:41] <h3r3tic> :)
[23:29:03] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[23:31:01] <bjz_> h3r3tic: does this seem reasonable? https://gist.github.com/bjz/5a03661591705a978b31
[23:32:20] <bjz_> h3r3tic: also, have you thought of using ports/chans in the handles?
[23:32:25] <h3r3tic> yup, though I don't store shaders separately from programs
[23:32:30] <bjz_> ok
[23:32:35] <h3r3tic> nope; don't know much about them
[23:32:48] <bjz_> h3r3tic: dunno if they would be too heavy
[23:32:49] <h3r3tic> why would I use them?
[23:33:02] <bjz_> I was thinking you could make duplex streams
[23:33:22] <h3r3tic> duplex streams?
[23:33:45] <bjz_> so with a handle you could send a message to the gfx manager if you want to render it
[23:33:53] <bjz_> then it would add it to the queue
[23:33:56] <bjz_> or something
[23:34:28] <bjz_> and then the renderer could send a message back if it destroys the object
[23:35:29] <h3r3tic> dunno.. typically you render objects composed of a bunch of these handles
[23:35:36] <h3r3tic> and you render them in specific orders, and so on
[23:35:40] <bjz_> GfxManager::new() would spool up a task
[23:35:43] <bjz_> mmk
[23:35:51] <h3r3tic> I'm planning to go with the DX11 deferred context abstraction
[23:35:58] <h3r3tic> or basically, render lists
[23:36:30] <h3r3tic> you can add items into render lists in multilpe threads ( one or more lists per thread ), but then you pass the lists to the main thread for actual rendering
[23:37:56] <bjz_> ok
[23:38:20] <bjz_> h3r3tic: why multiple render lists?
[23:38:48] <bjz_> h3r3tic: why not just send messages to the main device server?
[23:40:31] <h3r3tic> less contention that way. if you have a render list per thread, then you don't need to lock it for every object
[23:40:52] <h3r3tic> also, if the lists contain any state changes, then the order is important
[23:41:03] <h3r3tic> mine currently don't, but I haven't tackled much state play yet
[23:41:54] <bjz_> like, I was thinking a vao could have an enum of mesages: enum { Draw, Update(~[...]), Remove } the gfx object could have: enum { CreateVao(...), ... , Terminate } or something
[23:42:00] <cmr> bjz_: no, someone I know IRL
[23:42:07] <bjz_> h3r3tic: ok
[23:42:28] <bjz_> cmr: oh really? you actually know somebody IRL who uses Rust? :P
[23:43:06] <h3r3tic> in my case, I don't want to have such fine granularity resource allocation / destruction
[23:43:24] <h3r3tic> free them up in bulk when the entire resources they underlie go away
[23:43:25] <h3r3tic> etc
[23:43:34] <bjz_> h3r3tic: ok, how would you do it? how do you know to free?
[23:43:51] <h3r3tic> that comes from your scene manager
[23:43:58] <h3r3tic> through some simple ownership logic
[23:44:08] <h3r3tic> you'd have a streaming manager or something
[23:44:15] <h3r3tic> and if you unload a zone, you unload its objects
[23:44:31] <bjz_> h3r3tic: i guess I'm looking at something that you could hook up to a scene manager
[23:44:34] <h3r3tic> for now, I don't even care :P I'm just never freeing anything up
[23:44:39] <bjz_> heh
[23:44:41] <h3r3tic> yeah
[23:44:55] <h3r3tic> this is something that's handled at a higher level, and I don't want to even think about that higher level yet
[23:45:04] <bjz_> heh
[23:45:40] <bjz_> h3r3tic: what would be awesome is just have a gfxdevice box with inputs that you can send messages to
[23:45:46] <bjz_> then forget about them
[23:46:17] <h3r3tic> that's neat and all, but probably not very practical :P
[23:46:27] <bjz_> yeah?
[23:46:50] <h3r3tic> just due to the overhead :P
[23:46:54] <bjz_> yeah
[23:47:12] <h3r3tic> I want my gfx api abstraction to be lean and mean :P
[23:47:26] <h3r3tic> then I'll have a scene manager built on top of it
[23:47:28] <bjz_> overhead where? in the messaging?
[23:47:38] <h3r3tic> yeah, and in the refcounting of resoruces and stuff
[23:47:52] <bjz_> true
[23:48:16] <bjz_> yeah lean would be cool
[23:48:21] <bjz_> Amaranth: thoughts?
[23:49:35] <bjz_> h3r3tic: if you use vaos, would you need to worry about keeping track of separate vbos and ibos?
[23:50:17] <h3r3tic> depends on your data; if you share meshes across shaders, then yeah
[23:51:51] <Amaranth> bjz_: My thoughts are if this requires OpenGL 4 I can't do anything with it :P
[23:52:01] <bjz_> Amaranth: me too
[23:52:12] <bjz_> Amaranth: :)
[23:52:30] <bjz_> Amaranth: I'm probably stuck with 3.2
[23:52:32] <Amaranth> But you're talking about VAOs
[23:52:53] <bjz_> is that an issue for you?
[23:53:03] <Amaranth> Isn't that a 4.x thing?
[23:53:15] <bjz_> Amaranth: no, 3.2 supports it I know
[23:53:59] <bjz_> Amaranth: http://www.opengl.org/wiki/Vertex_Specification#Vertex_Array_Object
[23:54:04] <bjz_> since 3.0 apparently
[23:54:11] <h3r3tic> it's a driver-level feature
[23:54:27] <h3r3tic> doesn't need any fancy HW
[23:56:30] <Amaranth> h3r3tic: Doesn't mean your driver supports it though
[23:56:35] <bjz_> h3r3tic: driver level meaning they can easily implement it via sofware?
[23:56:54] <Amaranth> Sure it's just a nicer API for doing the same thing you can do otherwise
[23:57:01] <h3r3tic> meaning it doesn't actually translate to anything novel in the HW
[23:59:00] <bjz_> well if you guys aren't bothering with them for now I won't :P
[23:59:02] <h3r3tic> http://www.g-truc.net/doc/OpenGL%20matrix%202013-09.pdf
[23:59:10] <h3r3tic> VAO seems to be supported everywhere
[23:59:23] <h3r3tic> even Intel :P
[23:59:55] <Amaranth> Does mesa in Ubuntu 10.04 support it? :)
