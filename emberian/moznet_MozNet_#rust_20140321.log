[00:00:29] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[00:01:56] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[00:01:56] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[00:02:09] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[00:02:17] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[00:03:42] *** Joins: Savago (Savago@202BED95.35A5082B.B8C5454C.IP)
[00:03:57] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[00:04:21] *** Joins: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru)
[00:04:34] <kmc> can procedural macros produce trees which invoke additional (procedural or MBE) macros?
[00:05:16] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Ping timeout)
[00:06:06] <cmr> kmc: I feel like they should be able to, either by expanding into ItemMac or ExprMac
[00:06:09] *** Quits: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru) (Ping timeout)
[00:06:16] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[00:06:18] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[00:06:19] *** Joins: pyrac (pyrac@moz-598F4A4.w90-60.abo.wanadoo.fr)
[00:06:43] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[00:07:12] <kmc> ok
[00:07:29] <kmc> where should I start to learn enough libsyntax to write procedural macros?
[00:08:03] *** Quits: pyrac (pyrac@moz-598F4A4.w90-60.abo.wanadoo.fr) (Ping timeout)
[00:08:13] <sfackler> kmc: the result of a macro will be re-expanded, yes
[00:08:23] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[00:08:58] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[00:09:29] <huon> kmc: syntax::ext::bytes and syntax::ext::concat are two reasonably small examples
[00:09:40] *** Quits: dsyang (dsyang@moz-8EBF0366.wv.cc.cmu.edu) (Quit: )
[00:10:01] <huon> rusti: concat!("foo", 2, 'c', 1.250000000)
[00:10:04] -rusti- foo2c1.250000000
[00:10:19] * huon didn't realise that you could use things other than strings...
[00:10:34] <sfackler> kmc: ast.rs has the actual AST definition
[00:10:38] <sfackler> or most of it at least
[00:10:46] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[00:10:58] <kmc> okay. and I know where to find some procedural macro examples to look at
[00:11:00] *** Quits: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net) (Quit: carllerche)
[00:11:10] <kmc> btw I'm really pleased with rust-phf :)
[00:11:25] <sfackler> cool :D
[00:11:50] <huon> are there any (runtime) perf benches?
[00:12:04] <sfackler> nope
[00:12:29] <sfackler> the lookup cost is a run of SipHash, a tiny bit of integer math and an equality check though
[00:12:55] <sfackler> I should really switch to a faster hash function but all the modern ones are terrifying/wildly unportable
[00:13:32] <sfackler> generation time is pretty good though: I think kmc generated a 10,000+ entry map in like .25 seconds
[00:13:43] <huon> neat
[00:14:11] <mcpherrin> kmc: you're using that to look up tags and stuff in your parser I guess?
[00:14:30] <mcpherrin> phf are neat
[00:14:47] *** Quits: copumpkin (copumpkin@53E2D28C.C8540D7F.AF46A2E7.IP) (Ping timeout)
[00:14:49] *** Joins: copumpki_ (copumpkin@53E2D28C.C8540D7F.AF46A2E7.IP)
[00:14:53] *** Quits: brson (brson@moz-62518563.mtv2.mozilla.com) (Quit: leaving)
[00:16:18] <kmc> mcpherrin: currently, named character references
[00:16:22] <kmc> all of http://www.whatwg.org/specs/web-apps/current-work/multipage/named-character-references.html#named-character-references and all their prefixes
[00:16:26] <kmc> we'll probably use it for tags too
[00:16:55] <kmc> ideally we would have static interned strings for common tag + attribute names, and the phf would map to those
[00:16:59] *** Quits: ewalstad (Adium@moz-9A04E871.dedicated.static.sonic.net) (Quit: Leaving.)
[00:17:34] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[00:19:26] *** Joins: leowoe (Leo@moz-6CADCFED.dip0.t-ipconnect.de)
[00:20:18] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[00:21:04] *** Quits: taylanub (taylanub@moz-CACE0A8E.dip0.t-ipconnect.de) (Quit: Using Circe, the loveliest of all IRC clients)
[00:21:19] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[00:23:51] *** Joins: klaus (koz@moz-4486E876.hsd1.wa.comcast.net)
[00:23:52] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[00:24:10] *** Quits: glaebhoer1 (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Ping timeout)
[00:24:20] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[00:25:10] *** Quits: copumpki_ (copumpkin@53E2D28C.C8540D7F.AF46A2E7.IP) (Ping timeout)
[00:25:41] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[00:25:54] <huon> sfackler: whoops, you wrote a library that people use; looks like you have to support it now :P
[00:26:24] <sfackler> noooooo
[00:26:27] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[00:27:08] *** Joins: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net)
[00:27:18] *** Quits: leowoe (Leo@moz-6CADCFED.dip0.t-ipconnect.de) (Ping timeout)
[00:28:50] *** Quits: hdevalence (quassel@moz-D125A39F.home3.cgocable.net) (Ping timeout)
[00:28:57] <dougxxx> O_o git pull -> create mode 100644 src/test/run-make/suspicious-library/Makefile
[00:29:00] <dougxxx> nice~
[00:29:11] *** Joins: copumpkin (copumpkin@53E2D28C.C8540D7F.AF46A2E7.IP)
[00:29:11] *** Joins: evanm (evanm@636AC086.5999CED5.71743E61.IP)
[00:29:25] *** Joins: leowoe (Leo@moz-6CADCFED.dip0.t-ipconnect.de)
[00:29:36] *** Quits: Savago (Savago@202BED95.35A5082B.B8C5454C.IP) (Ping timeout)
[00:30:29] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[00:31:14] *** Joins: Savago (Savago@202BED95.35A5082B.B8C5454C.IP)
[00:31:44] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Input/output error)
[00:32:24] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Ping timeout)
[00:33:48] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[00:35:22] <bvssvni> it compiled!
[00:36:24] *** Joins: ferdinand (Mibbit@7E217F04.2C8DBE39.CC1A2609.IP)
[00:36:30] *** Joins: ztomo (ztomo@moz-54927FEF.qcl9.cha.bigpond.net.au)
[00:36:56] *** Quits: copumpkin (copumpkin@53E2D28C.C8540D7F.AF46A2E7.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:37:47] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[00:39:39] <bvssvni> the monad macro works! https://gist.github.com/bvssvni/9674632
[00:39:53] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[00:40:08] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[00:40:11] *** Quits: ferdinand (Mibbit@7E217F04.2C8DBE39.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[00:40:54] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[00:42:25] *** kimundi is now known as zz_kimundi
[00:43:12] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[00:43:17] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[00:43:47] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[00:44:15] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[00:44:17] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[00:46:03] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Ping timeout)
[00:46:24] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[00:46:57] <mbrubeck> bvssvni++
[00:47:52] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[00:47:52] *** Quits: japaric2 (japaric@5264F756.A8CC9503.F29ED47E.IP) (Connection reset by peer)
[00:48:26] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[00:48:49] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Client exited)
[00:48:51] <bvssvni> updated gist, it now supports guarded statements https://gist.github.com/bvssvni/9674632
[00:49:01] <o11c|interview> ooh, shiny
[00:49:09] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[00:49:16] *** Joins: japaric (japaric@5264F756.A8CC9503.F29ED47E.IP)
[00:49:33] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[00:49:48] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[00:49:57] *** Quits: IanCormac84 (User@D1AEF093.64D641E5.67DFF8B4.IP) (Ping timeout)
[00:50:45] *** Quits: annubbis (igor@5811CD3B.520BE45E.4A407CF8.IP) (Ping timeout)
[00:50:49] *** Joins: annubbis (igor@5811CD3B.520BE45E.4A407CF8.IP)
[00:50:51] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[00:51:05] *** Quits: enos (jkingyens@moz-68C04E7A.mycingular.net) (Quit: enos)
[00:51:27] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[00:51:28] *** Joins: IanCormac84 (User@9EAA8665.64D641E5.67DFF8B4.IP)
[00:52:36] *** Quits: tiffany (kawaii@moz-7AF84602.dhcp.embarqhsd.net) (Input/output error)
[00:52:38] *** Quits: Doppp (Doppp@ABA7820A.3D394227.C4926542.IP) (Ping timeout)
[00:52:59] <tom1> bvssvni: neat
[00:53:01] *** Quits: Matthias247 (Miranda@moz-678B5E4A.hsi2.kabel-badenwuerttemberg.de) (Quit: Matthias247)
[00:53:43] *** Quits: johnpclaus (johnpclaus@moz-7B864857.hlrn.qwest.net) (Ping timeout)
[00:53:53] *** Quits: alkino_ (alkino@moz-61F150EC.w92-151.abo.wanadoo.fr) (Ping timeout)
[00:56:41] *** Quits: annubbis (igor@5811CD3B.520BE45E.4A407CF8.IP) (Ping timeout)
[00:57:18] *** Joins: alonlevy (alon@moz-944C9098.red.bezeqint.net)
[00:59:11] <bvssvni> hmm, needs some more work
[00:59:44] *** Quits: onelson (owen@moz-DD666EC5.laika.com) (Quit: Leaving)
[01:04:01] *** Quits: kanru` (kanru@moz-DB4A9C19.scl3.mozilla.com) (Input/output error)
[01:04:09] *** Joins: mib_3xwwax (Mibbit@7E217F04.2C8DBE39.CC1A2609.IP)
[01:04:51] *** Joins: enos (jkingyens@moz-E17B5E78.public.monkeybrains.net)
[01:06:55] *** Quits: victorporof (victorporo@moz-FFB76956.cpe.net.cable.rogers.com) (Ping timeout)
[01:07:10] *** Joins: pyrac (pyrac@moz-598F4A4.w90-60.abo.wanadoo.fr)
[01:07:20] *** Quits: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch) (Ping timeout)
[01:08:07] *** Joins: philix (felipe@moz-466D2B4D.user.veloxzone.com.br)
[01:08:51] *** Quits: pyrac (pyrac@moz-598F4A4.w90-60.abo.wanadoo.fr) (Ping timeout)
[01:09:45] *** Joins: oxum (anonymous@8E0AE9E9.36364A0A.520CDC98.IP)
[01:12:37] *** Joins: johnpclaus (johnpclaus@moz-7B864857.hlrn.qwest.net)
[01:12:45] *** Quits: mib_3xwwax (Mibbit@7E217F04.2C8DBE39.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[01:12:59] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[01:14:01] *** Quits: krdln (krdln@moz-C271714F.dynamic.chello.pl) (Client exited)
[01:14:13] *** Joins: mno2 (mno2@E1E0A0A3.621D86F0.CFF65E33.IP)
[01:14:19] *** Quits: johnpclaus (johnpclaus@moz-7B864857.hlrn.qwest.net) (Ping timeout)
[01:14:21] *** Joins: victorporof (victorporo@moz-FFB76956.cpe.net.cable.rogers.com)
[01:14:33] *** Quits: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net) (Quit: Leaving.)
[01:14:45] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[01:14:46] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[01:15:10] *** Quits: evanm (evanm@636AC086.5999CED5.71743E61.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[01:15:29] *** Joins: Mathieu (cicak@420C86E4.9C1E3043.FBF02BB8.IP)
[01:15:58] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[01:17:56] *** Joins: quux00 (uid24415@moz-E77DEB21.irccloud.com)
[01:18:01] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[01:18:07] *** Quits: ChrisOei (ChrisOei@moz-53A9266A.blurb.com) (Client exited)
[01:19:13] *** Quits: Axord (xord@moz-BC8E2FBC.static.rvsd.ca.charter.com) (Ping timeout)
[01:22:40] *** Quits: enos (jkingyens@moz-E17B5E78.public.monkeybrains.net) (Quit: enos)
[01:24:16] *** jorendorff_away is now known as jorendorff
[01:24:36] *** Joins: krdln (krdln@moz-C271714F.dynamic.chello.pl)
[01:25:36] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Input/output error)
[01:25:48] *** Quits: judder (maradukewa@75FA4DEE.A989D80C.78E362FE.IP) (Ping timeout)
[01:26:03] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[01:26:11] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[01:27:48] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[01:28:55] *** Joins: enos (jkingyens@moz-E17B5E78.public.monkeybrains.net)
[01:29:30] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[01:29:45] *** Quits: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca) (Ping timeout)
[01:31:20] *** Joins: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca)
[01:31:23] <mcpherrin> whois mbrubeck 
[01:31:25] <mcpherrin> oops
[01:31:28] *** Quits: mno2 (mno2@E1E0A0A3.621D86F0.CFF65E33.IP) (Quit: mno2)
[01:31:32] *** Quits: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca) (Input/output error)
[01:31:42] <mcpherrin> mbrubeck: good news you're not the same person I think you are! :p
[01:31:44] *** Joins: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca)
[01:31:52] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[01:31:57] <mbrubeck> :)
[01:32:30] *** Joins: mno2 (mno2@E1E0A0A3.621D86F0.CFF65E33.IP)
[01:32:41] *** Joins: dwrensha (chatzilla@moz-B23D2FF6.pitbpa.east.verizon.net)
[01:32:51] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[01:33:10] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[01:34:25] *** Quits: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net) (Ping timeout)
[01:35:22] *** Quits: ztomo (ztomo@moz-54927FEF.qcl9.cha.bigpond.net.au) (Ping timeout)
[01:35:48] *** Joins: leowoe1 (Leo@moz-6CADCFED.dip0.t-ipconnect.de)
[01:36:26] *** Joins: Axord (xord@moz-BC8E2FBC.static.rvsd.ca.charter.com)
[01:36:34] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Client exited)
[01:36:47] *** Quits: leowoe (Leo@moz-6CADCFED.dip0.t-ipconnect.de) (Ping timeout)
[01:36:54] *** Quits: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca) (Ping timeout)
[01:36:56] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[01:37:04] *** Joins: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca)
[01:37:37] *** Quits: leowoe1 (Leo@moz-6CADCFED.dip0.t-ipconnect.de) (Ping timeout)
[01:37:52] *** Quits: gimpf (gimpf@moz-11D9DBFB.adsl.highway.telekom.at) (Quit: Leaving.)
[01:38:24] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[01:38:27] *** Joins: wilmoore (wilmoore@moz-4EF3CEBC.hsd1.co.comcast.net)
[01:38:44] *** Joins: leowoe (Leo@moz-5DACF24D.vpn5-pool.uni-konstanz.de)
[01:39:42] *** Quits: philix (felipe@moz-466D2B4D.user.veloxzone.com.br) (Ping timeout)
[01:39:48] *** Joins: ztomo (ztomo@moz-54927FEF.qcl9.cha.bigpond.net.au)
[01:43:44] *** Joins: zztr (Thunderbir@moz-CA50D606.dsl.static.sonic.net)
[01:43:52] *** Joins: eibwen (kvirc@moz-D733931B.dip0.t-ipconnect.de)
[01:44:26] <quux00> I recently tried moving a Rust project I'm working on to use namespaces, but I'm hitting some issues I can't resolve.
[01:44:42] <quux00> I wonder if anyone would have a chunk of time (and patience) to look at my code and help resolve the issues (or suggest how to restructure it)?
[01:45:08] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[01:45:35] *** Quits: huon (Thunderbir@moz-826BD85A.lns20.syd6.internode.on.net) (Quit: huon)
[01:45:39] *** Quits: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca) (Ping timeout)
[01:45:59] *** Quits: claudiu (claudiu@moz-FB94486E.thefacebook.com) (Input/output error)
[01:46:20] *** Joins: claudiu (claudiu@moz-FB94486E.thefacebook.com)
[01:46:22] *** Joins: maxli (Adium@moz-B19F68ED.student.cs.uwaterloo.ca)
[01:47:07] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[01:47:27] <cmr> quux00: shoot
[01:47:28] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[01:47:54] *** Quits: klaus (koz@moz-4486E876.hsd1.wa.comcast.net) (Quit: klaus)
[01:47:56] <quux00> OK.  I've put the problematic code in a branch here: https://bitbucket.org/quux00/schooner/src/2f3d0f9a118fcde01072156f55b7245fb4689f91/?at=ns-issue
[01:48:00] *** Quits: claudiu (claudiu@moz-FB94486E.thefacebook.com) (Ping timeout)
[01:48:08] <quux00> I'm facing two problems.
[01:48:29] <quux00> You'll see that I have a top level server.rs
[01:48:40] *** Quits: dougxxx (dougxxx@moz-2801788.perm.iinet.net.au) (Ping timeout)
[01:48:49] <quux00> and then a bunch of supporting code/struct in the schooner directory.
[01:49:09] *** Quits: ztomo (ztomo@moz-54927FEF.qcl9.cha.bigpond.net.au) (Ping timeout)
[01:49:33] <quux00> The first problem is that I can't compile or run tests of individual files - I have to run them via the top level server.rs.
[01:49:50] <cmr> that's expected.
[01:49:52] *** Quits: maxli (Adium@moz-B19F68ED.student.cs.uwaterloo.ca) (Ping timeout)
[01:50:01] <cmr> you use `rustc --test server.rs`, server being your crate
[01:50:06] <cmr> then you can do `./server testname`
[01:50:06] <bvssvni> updated the gist. now the monad works for all match expressions https://gist.github.com/bvssvni/9674632
[01:50:09] *** Joins: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca)
[01:50:30] *** Joins: philix (felipe@moz-466D2B4D.user.veloxzone.com.br)
[01:50:34] <cmr> individual files never live separate from their crate.
[01:50:47] <quux00> cmr: OK.  I guess I can live with that, but it's going to get clunky as the code base grows. 
[01:50:49] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[01:50:49] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Client exited)
[01:50:56] <quux00> cmr: I plan to have a lot of tests.
[01:51:02] <cmr> that's fine.
[01:51:07] <quux00> cmr: The second problem then -
[01:51:09] <cmr> std has hundreds of tests, then run very quickly :)
[01:51:11] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[01:51:44] *** Joins: Doppp (Doppp@moz-553020DA.hfc.comcastbusiness.net)
[01:51:54] <quux00> right now when I run "make server-test" which does what you just said, I get this error:
[01:51:55] <quux00> schooner/log.rs:194:76: 194:117 error: mismatched types: expected `std::vec_ng::Vec<schooner::log_entry::LogEntry>` but found `std::vec_ng::Vec<schooner::log::log_entry::LogEntry>` (expected struct schooner::log_entry::LogEntry but found struct schooner::log::log_entry::LogEntry)
[01:52:06] *** Quits: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Quit: It is tiem!)
[01:52:13] <quux00> If you look at the tests in log.rs
[01:52:18] *** Joins: leowoe1 (Leo@moz-6CADCFED.dip0.t-ipconnect.de)
[01:52:27] <o11c|interview> quux00: I'm guessing you think the 'mod' statement does something sensible.
[01:52:29] <o11c|interview> it does not
[01:52:33] <cmr> this is because you have multiple `mod log_entry;`
[01:52:46] <cmr> remove every `mod foo;` that isn't in server.rs or mod.rs
[01:53:13] <quux00> OK.  I'll try that now.  Thanks.
[01:53:18] <cmr> `mod foo;` is equivalent to `mod foo { /* contents of foo.rs */ }`
[01:53:23] *** Quits: leowoe (Leo@moz-5DACF24D.vpn5-pool.uni-konstanz.de) (Ping timeout)
[01:53:25] <cmr> that is, it always creates a new, individual module.
[01:53:26] *** Joins: dougxxx (dougxxx@moz-2801788.perm.iinet.net.au)
[01:53:30] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[01:53:31] *** Quits: Doppp (Doppp@moz-553020DA.hfc.comcastbusiness.net) (Ping timeout)
[01:54:03] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[01:54:13] *** Joins: brontron (brontron@moz-C8D86903.tc.ph.cox.net)
[01:54:20] <quux00> Oh, so multiple imports would load it into different (sub) namespaces.  
[01:54:37] <cmr> imports being `use`, yes.
[01:55:02] <cmr> unless you mean import as in `mod foo;` in which case yes, it creates separate modules in different namespaces.
[01:55:07] <cmr> `use` brings a name into scope.
[01:55:11] <cmr> (aka imports it)
[01:55:14] *** Quits: leowoe1 (Leo@moz-6CADCFED.dip0.t-ipconnect.de) (Quit: Leaving.)
[01:55:22] <cmr> module definition is separate from importing.
[01:55:29] *** Quits: Rym (y@1B461471.3DA4EAA.51C6DE68.IP) (Ping timeout)
[01:56:08] <quux00> OK.  Thanks very much.  trying your suggestion now ...
[01:56:18] *** Joins: Rym (y@1B461471.3DA4EAA.51C6DE68.IP)
[01:57:02] *** Quits: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca) (Ping timeout)
[01:57:52] *** Joins: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca)
[01:59:03] *** Quits: enos (jkingyens@moz-E17B5E78.public.monkeybrains.net) (Quit: enos)
[02:00:37] <krdln> cmr: if you maybe remember conversation from yesterday, I've implemented this tree (for now it's unary tree, aka. list, but shh), and I don't need unswappables :)
[02:01:03] <cmr> krdln: that's what I thought! do the points I was making yesterday about contents vs location make sense now?
[02:01:31] <krdln> yeah :)
[02:01:47] *** Joins: erickt (etryzelaar@49C4075F.3AC15C18.2321E71E.IP)
[02:02:06] *** Quits: tyna (liadon@moz-BB1BAD9A.dynamic.chello.pl) (Quit: Leaving.)
[02:03:00] <krdln> and I have a question: how to implement custom mut-handle? I have
[02:03:00] <krdln> struct Handle<'a> { priv node: &'a mut Node } with `&mut self` methods for now. Is it a proper way?
[02:04:02] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[02:04:02] *** ChanServ sets mode: +o jdm
[02:05:23] *** Quits: canhtak (canhtak@moz-2C382DC9.wl.t.ulaval.ca) (Quit: canhtak)
[02:06:05] <cmr> krdln: might look at how RefCell does it?
[02:07:48] *** Joins: pyrac (pyrac@moz-598F4A4.w90-60.abo.wanadoo.fr)
[02:07:56] <krdln> cmr: hm.. funny there are different lifetimes on struct and methods
[02:08:01] *** Joins: canhtak (canhtak@moz-2C382DC9.wl.t.ulaval.ca)
[02:09:30] *** Quits: pyrac (pyrac@moz-598F4A4.w90-60.abo.wanadoo.fr) (Ping timeout)
[02:09:54] *** Joins: onelson (owen@18CF7301.95770028.5B6BFE7D.IP)
[02:10:42] *** Quits: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca) (Ping timeout)
[02:11:05] *** Joins: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca)
[02:11:23] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[02:11:46] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[02:12:10] <krdln> I didn't want to use &'a self, because "that's not the lifetime I want, I want the lifetime from template parameter!", but now I see that self lifetime won't outlive struct lifetime and that's not a problem. Is my reasoning good?
[02:13:06] *** Quits: brontron (brontron@moz-C8D86903.tc.ph.cox.net) (Quit: brontron)
[02:13:20] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[02:14:21] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[02:14:28] *** Quits: Savago (Savago@202BED95.35A5082B.B8C5454C.IP) (Quit: Savago)
[02:15:10] *** Quits: Anupkumar (uid16774@moz-A42E5B7B.irccloud.com) (Quit: Connection closed for inactivity)
[02:15:22] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[02:16:03] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Client exited)
[02:17:46] <bvssvni> is there a way to ignore unreachable error?
[02:17:57] <cmr> bvssvni: make it reachable.
[02:18:08] <cmr> krdln: I think so?
[02:18:10] <bvssvni> cmr: I can't, it's inside a macro
[02:18:22] *** Quits: oxum (anonymous@8E0AE9E9.36364A0A.520CDC98.IP) (Ping timeout)
[02:18:41] <cmr> bvssvni: #[allow(unreachable_code)]
[02:19:03] *** Joins: lpy (lpy@1834E2CB.F09091A8.1348A864.IP)
[02:19:24] <quux00> cmr:  namespaces are making more sense now and my project code is compiling again - thanks
[02:19:26] <krdln> cmr: Thanks for hints about looking at RefMut :)
[02:19:29] *** Joins: ChrisOei (ChrisOei@moz-30D80888.hsd1.ca.comcast.net)
[02:19:36] *** Quits: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca) (Ping timeout)
[02:20:06] *** Joins: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca)
[02:20:42] <krdln> cmr: that will get rid of many trasmute_regions
[02:21:29] <cmr> krdln: transmute_region is evil!
[02:21:30] *** Joins: phay (phay@16E8BAAB.D2C4A785.91986DB5.IP)
[02:23:19] <krdln> cmr: I'll try not to abuse it again. I promise
[02:24:11] *** Joins: dylukes (dylukes@5A7964CA.52BC16B2.E8393EEB.IP)
[02:24:20] <cmr> :P
[02:24:23] *** Quits: lpy (lpy@1834E2CB.F09091A8.1348A864.IP) (Client exited)
[02:24:40] <cmr> transmutations between types I see as acceptable, but between lifetimes is just scary.
[02:24:47] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[02:25:10] *** Joins: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net)
[02:25:53] *** Joins: tulloch (tulloch@2A036BF4.7B33B9A1.EFF8B7BF.IP)
[02:27:51] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[02:28:18] *** Joins: espindol_ (espindola@8EC99D26.4B7A7726.A2E931B1.IP)
[02:28:55] *** Quits: espindola (espindola@563D60BB.4B7A7726.A2E931B1.IP) (Ping timeout)
[02:29:35] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[02:29:35] *** Quits: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca) (Ping timeout)
[02:29:59] *** Quits: espindol_ (espindola@8EC99D26.4B7A7726.A2E931B1.IP) (Input/output error)
[02:30:13] *** Joins: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca)
[02:30:25] *** Quits: Havvy (Havvy@moz-4FE57F72.hsd1.wa.comcast.net) (Ping timeout)
[02:30:40] *** Quits: ChrisOei (ChrisOei@moz-30D80888.hsd1.ca.comcast.net) (Client exited)
[02:30:44] *** Joins: ChrisOei (ChrisOei@moz-30D80888.hsd1.ca.comcast.net)
[02:31:31] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[02:33:27] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Ping timeout)
[02:33:53] *** Parts: krdln (krdln@moz-C271714F.dynamic.chello.pl) ()
[02:33:54] *** Joins: oxum (anonymous@8FAC8DC0.BADE7F43.520CDC98.IP)
[02:35:14] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[02:36:58] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[02:37:55] *** Quits: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca) (Ping timeout)
[02:38:37] *** Joins: lpy (lpy@1834E2CB.F09091A8.1348A864.IP)
[02:38:43] *** Joins: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca)
[02:39:22] *** Joins: mib_9v0pid (Mibbit@7E217F04.2C8DBE39.CC1A2609.IP)
[02:39:53] *** Joins: Ralith (ralith@moz-67D4EB93.customer.broadstripe.net)
[02:40:02] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[02:41:40] *** Quits: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net) (Quit: carllerche)
[02:41:42] *** Joins: brontron (brontron@moz-C8D86903.tc.ph.cox.net)
[02:41:46] *** Quits: mib_9v0pid (Mibbit@7E217F04.2C8DBE39.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[02:44:08] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[02:44:47] *** Quits: reverend_paco (chatzilla@moz-FDBE15EC.hsd1.ma.comcast.net) (Ping timeout)
[02:46:31] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[02:48:01] *** Quits: tulloch (tulloch@2A036BF4.7B33B9A1.EFF8B7BF.IP) (Ping timeout)
[02:49:31] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[02:50:18] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[02:51:32] *** Quits: ChrisOei (ChrisOei@moz-30D80888.hsd1.ca.comcast.net) (Client exited)
[02:52:04] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[02:52:04] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[02:52:43] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Connection reset by peer)
[02:52:43] *** Quits: bjustin (bjustin@moz-8FC28563.sierrabravo.net) (Connection reset by peer)
[02:52:51] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[02:53:03] *** Quits: Rym (y@1B461471.3DA4EAA.51C6DE68.IP) (Ping timeout)
[02:53:59] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[02:55:05] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[02:56:20] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[02:58:23] *** Joins: bleibig (bleibig@moz-B4D9C5AF.hsd1.ca.comcast.net)
[02:58:40] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[02:59:49] *** Joins: Savago (Savago@202BED95.35A5082B.B8C5454C.IP)
[03:00:08] *** Quits: Savago (Savago@202BED95.35A5082B.B8C5454C.IP) (Quit: Savago)
[03:02:55] *** Quits: lpy (lpy@1834E2CB.F09091A8.1348A864.IP) (Client exited)
[03:04:45] *** Joins: IanCormac841 (User@EE84D974.64D641E5.67DFF8B4.IP)
[03:05:10] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[03:05:10] *** Quits: IanCormac84 (User@9EAA8665.64D641E5.67DFF8B4.IP) (Ping timeout)
[03:05:30] *** Quits: oxum (anonymous@8FAC8DC0.BADE7F43.520CDC98.IP) (Quit: ...)
[03:08:39] *** Joins: pyrac (pyrac@moz-598F4A4.w90-60.abo.wanadoo.fr)
[03:09:25] *** Quits: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com) (Ping timeout)
[03:09:36] *** Quits: dylukes (dylukes@5A7964CA.52BC16B2.E8393EEB.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[03:10:20] *** Quits: pyrac (pyrac@moz-598F4A4.w90-60.abo.wanadoo.fr) (Ping timeout)
[03:12:01] *** Joins: lawrence (lawrence@moz-898F28F6.wireless.utoronto.ca)
[03:12:47] *** Joins: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com)
[03:15:06] *** Quits: soumyaC (uid15286@moz-E77DEB21.irccloud.com) (Quit: Connection closed for inactivity)
[03:15:11] *** Quits: ganitsu1 (ganitsu@moz-B03ADDA.dialup.adsl.anteldata.net.uy) (Quit: WeeChat 0.4.3)
[03:17:08] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[03:18:27] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[03:20:28] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[03:20:28] *** Quits: cgaebel (clark@moz-F9D89110.nyc.res.rr.com) (Ping timeout)
[03:23:26] *** Joins: copumpkin (copumpkin@B1BD1E0F.D360D990.9850EA4D.IP)
[03:24:01] *** Joins: jeff_ (jeff@moz-E6A9E8C9.hsd1.or.comcast.net)
[03:26:54] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[03:27:31] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[03:31:52] *** Quits: untitaker (untitaker@moz-8F4F4BAA.adsl.highway.telekom.at) (Ping timeout)
[03:32:18] *** Joins: sa46 (Mibbit@moz-5B096CCE.static.snfr.nc.charter.com)
[03:33:56] *** Quits: kris (kris@moz-6D20263F.fullrate.dk) (Ping timeout)
[03:34:34] *** Joins: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net)
[03:36:22] *** jorendorff is now known as jorendorff_away
[03:38:45] *** Quits: dwrensha (chatzilla@moz-B23D2FF6.pitbpa.east.verizon.net) (Ping timeout)
[03:39:17] *** Joins: untitaker (untitaker@moz-A642299A.adsl.highway.telekom.at)
[03:40:06] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[03:40:44] *** Joins: lukem (Mibbit@7F64772F.63E6F0B5.217FF3D2.IP)
[03:43:16] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[03:43:21] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Client exited)
[03:43:24] *** Quits: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca) (Quit: Leaving.)
[03:43:38] <lukem> hey, guys quick question: i'm trying to use the output of rust-bindgen and am getting an error telling me to add "#feature(globs)" to the crate attributes to enable glob imports... i've tried adding that to the .rs file generated by rust-bindgen as well as to the file that references it, but no dice. any ideas as to what i might be doing wrong?
[03:43:41] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[03:45:03] *** Joins: lpy (lpy@8B40CDAC.F09091A8.1348A864.IP)
[03:45:24] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[03:45:26] *** Quits: japaric (japaric@5264F756.A8CC9503.F29ED47E.IP) (Quit: WeeChat 0.4.3)
[03:49:22] <lukem> oh ffs, it needs a semicolon after it (#[feature(globs)]; not #[feature(globs)]
[03:49:54] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[03:51:40] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[03:52:26] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[03:52:44] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[03:53:41] *** Joins: oxum (anonymous@A4CDB3F5.5F016CAB.520CDC98.IP)
[03:54:43] *** Quits: zz_kimundi (kimundi@moz-B62309E6.dip0.t-ipconnect.de) (Ping timeout)
[03:54:57] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[03:55:43] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[03:56:32] *** Joins: tulloch (tulloch@2A036BF4.7B33B9A1.EFF8B7BF.IP)
[03:56:39] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Quit: )
[03:58:04] *** Joins: zz_kimundi (kimundi@moz-D07AE760.dip0.t-ipconnect.de)
[03:58:20] *** Quits: tulloch (tulloch@2A036BF4.7B33B9A1.EFF8B7BF.IP) (Ping timeout)
[03:58:31] *** zz_kimundi is now known as kimundi
[03:59:28] *** Joins: hdevalence (quassel@moz-D125A39F.home3.cgocable.net)
[04:01:30] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[04:02:45] *** Joins: mib_9x3ojb (Mibbit@B87B0F75.EBD92228.DDE5D3F6.IP)
[04:03:09] *** Quits: matp (matp@moz-16FE1E05.matp.at) (Ping timeout)
[04:03:17] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[04:03:25] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[04:03:52] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[04:03:56] <mib_9x3ojb> Hey we need help with a course assignment: a rust kernel
[04:04:45] *** Quits: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net) (Quit: carllerche)
[04:05:14] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Ping timeout)
[04:05:23] <mib_9x3ojb> The given code references from the core str.rs for strings, iter.rs for iterators, etc. We need to use vec.rs for vectors, however it can't find vec.rs even though it is in the exact same directory as str.rs
[04:05:35] <mib_9x3ojb> rust-core/core
[04:08:51] <o11c|interview> mib_9x3ojb: as in, *the* rust-core ? I think strcat was working on that before, but not so much now that libstd is changing
[04:09:06] *** Joins: maxli (Adium@moz-B19F68ED.student.cs.uwaterloo.ca)
[04:09:12] <strcat> I'm not aware of any changes to libstd to let it replace rust-core
[04:09:17] <strcat> or planned changes
[04:09:19] *** Joins: pyrac (pyrac@moz-598F4A4.w90-60.abo.wanadoo.fr)
[04:09:27] <o11c|interview> mib_9x3ojb: possibly your error is related to the use/mod thing
[04:09:39] * o11c|interview is oblivious to many things about rust
[04:10:05] <o11c|interview> strcat: I thought libc and os were getting out of libstd in the future?
[04:10:12] *** Quits: jeff_ (jeff@moz-E6A9E8C9.hsd1.or.comcast.net) (Quit: jeff_)
[04:10:17] <strcat> o11c|interview: doesn't move it closer to replacing rust-core
[04:10:27] *** Joins: earlzlap (earlz@moz-483E1E31.neo.res.rr.com)
[04:10:34] <o11c|interview> okay, well, you know better than I do
[04:10:41] <strcat> o11c|interview: a replacement for rust-core would have stuff like HashMap and Vec available for freestanding usage
[04:10:47] <strcat> if anything, rust is moving further away from that
[04:11:00] *** Quits: pyrac (pyrac@moz-598F4A4.w90-60.abo.wanadoo.fr) (Ping timeout)
[04:11:01] <strcat> the only thing it's going to provide for freestanding use is a crippled crate with some intrinsics
[04:11:26] *** Joins: aravindavk (aravinda@111BB25B.543F7718.BB883D3E.IP)
[04:11:28] <o11c|interview> mib_9x3ojb: pastebinning a full error with code would help
[04:11:58] <o11c|interview> (let's not get distracted by this discussion from actually helping the guy)
[04:12:20] <nrc> can anyone help with this:
[04:12:21] <nrc>         let mut result: ~Vec<@Vec<@field_ty>> = ~Vec::new();
[04:12:23] <nrc>         ....
[04:12:25] <nrc>         result.move_iter().flat_map(|x| x.iter()).collect()
[04:12:26] <nrc> error: expected std::iter::FromIterator<&@middle::ty::field_ty>, but found std::iter::FromIterator<@middle::ty::field_ty> (expected &-ptr but found @-ptr)
[04:12:48] <o11c|interview> nrc: don't use @, it's deprecated
[04:12:50] <strcat> o11c|interview: I'm just not working it on it because I don't feel like fighting that fight anymore
[04:13:16] <mib_9x3ojb> It likely is a use/mod issue, but it doesn't appear to be an obvious one. I'll work on the pastebin now, but it's tricky just because it may be moreso dependent on the directory layout than the code
[04:13:17] <nrc> o11c|interview: not an option - I get the @ from elsewhere in the code base
[04:13:21] <strcat> rust has bad support for that use case and there doesn't seem to be any intent to improve it
[04:13:34] <o11c|interview> strcat: sadness
[04:13:53] <o11c|interview> well, at least Rust has gotten further along the path of "mistakes to make when designing a new programming language"
[04:14:06] *** Joins: japaric (japaric@5264F756.A8CC9503.F29ED47E.IP)
[04:14:06] <strcat> o11c|interview: https://github.com/mozilla/rust/pull/11968 you can read over the issues I raised here
[04:14:09] <strcat> if you're curious
[04:14:24] <o11c|interview> I'm always curious
[04:14:24] <strcat> I don't think splitting crates brings us closer to having good freestanding support
[04:14:45] <strcat> there is no plan on how something like containers would be provided for the freestanding use case
[04:14:47] <strcat> or Rc, or whatever
[04:15:51] *** Quits: anshin (anshin@CD85F10D.F21429E2.354459FA.IP) (Ping timeout)
[04:15:52] * strcat shrugs
[04:16:14] <mib_9x3ojb> Ok, here's the repo we import from. In kernel\sgash.rs use core::vec; does not work
[04:16:32] <mib_9x3ojb> https://github.com/cs4414/ps4
[04:16:34] *** Quits: Mardak (Mardak@4851473D.BD9ECD5D.97D164AB.IP) (Ping timeout)
[04:17:13] *** Joins: anshin (anshin@CD85F10D.F21429E2.354459FA.IP)
[04:18:09] *** Joins: Mardak (Mardak@4851473D.BD9ECD5D.97D164AB.IP)
[04:18:22] <strcat> o11c|interview: I'm more interested in making rust's compile-time and code size more competitive with C
[04:18:50] <strcat> I don't get the impression that it will have good freestanding support anytime soon (or ever), so I don't really feel it's worth spending time on
[04:19:02] <strcat> there's no willingness to do what has to be done to have that good support
[04:19:08] <strcat> or even talk about it openly
[04:19:49] *** Joins: justin (justin@CF7218C.28BE7003.DDE5D3F6.IP)
[04:20:06] <strcat> imo, making it so the stdlib has a tiny bit of functionality for the freestanding use case is worse than not doing it, because it puts up a barrier to a proper solution
[04:21:00] <mib_9x3ojb> hey um, not to interrupt this and all, but I just want to get a sense for how insane our problem is
[04:22:07] <strcat> mib_9x3ojb: I haven't reimplemented allocators for rust-core (it had them at one point) so there are no vectors for freestanding usage
[04:22:39] <strcat> I'm not really sure if I plan on working on it any more, it's getting out-of-date too
[04:23:21] <sa46> hey all, how do I create a string from Vec<u8>?
[04:23:23] *** Quits: mno2 (mno2@E1E0A0A3.621D86F0.CFF65E33.IP) (Quit: mno2)
[04:23:49] <strcat> sa46: atm you'll have to inefficiently convert a slice to a string via an allocation
[04:23:52] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[04:24:00] <strcat> as_slice() -> convert from &[T] to string
[04:24:15] <strcat> until ~str/~[T] are removed and there's a new string type represented as vectors are
[04:24:20] *** Quits: japaric (japaric@5264F756.A8CC9503.F29ED47E.IP) (Quit: WeeChat 0.4.3)
[04:24:27] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Ping timeout)
[04:24:29] <sa46> bummer
[04:25:34] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[04:25:58] <mib_9x3ojb> strcat: We're stuck with an older version of rust, as required by the class, so the linked github shows exactly what version we're stuck with
[04:26:46] *** Quits: lpy (lpy@8B40CDAC.F09091A8.1348A864.IP) (Ping timeout)
[04:27:24] <strcat> the linked version is still after core::vec gained a libc requirement
[04:27:30] <strcat> because I dropped allocators
[04:27:49] <strcat> as at that point, generic dtors were broken and there wasn't support for default type parameters
[04:27:58] <strcat> now, it could be implemented properly
[04:28:01] *** Quits: quux00 (uid24415@moz-E77DEB21.irccloud.com) (Quit: Connection closed for inactivity)
[04:28:26] <strcat> you're just not going to be able to use core::vec, you'd have to copy-paste it out (or copy the stdlib's vector)
[04:28:46] <strcat> unless you have libc available
[04:29:04] <strcat> (including malloc, etc., and threads, and floating point)
[04:29:58] <strcat> o11c|interview: I think a fork of rust would be far more viable than rust-core
[04:30:09] <strcat> just hit fork, make it work for freestanding usage, provide nightlies
[04:30:10] * strcat shrugs
[04:30:18] <strcat> it wouldn't be hard to make it work
[04:30:27] <strcat> but I don't think it would be acceptable
[04:30:30] <strcat> upstream
[04:30:53] <strcat> would involve adding cfg() all over the place
[04:31:07] *** Quits: Rusky (russell@moz-173BA32C.slkc.qwest.net) (Ping timeout)
[04:31:32] <strcat> for example, 90% of Vec would be available all the time
[04:31:54] <strcat> convenience methods like new() not taking an allocator instance would be cfg(malloc)
[04:32:23] <strcat> if you planned on providing that, you'd flip on the cfg switch and link in a lib providing it
[04:32:29] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[04:32:58] *** Quits: erickt (etryzelaar@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[04:33:08] <strcat> would probably just drop unwinding completely and switch to using abort for logic errors
[04:33:16] * strcat shrugs
[04:33:27] <strcat> anyway as it is, rust isn't really any more usable than java for freestanding use
[04:33:46] <strcat> both work, but you won't have any usable stdlib and you'll have lots of pain
[04:34:11] <sa46> Another question, I'm getting an error trying to index Vec<u8>:
[04:34:15] <sa46> src\lzw.rs:49:16: 49:35 error: cannot index a value of type `std::vec::Vec<u8>` src\lzw.rs:49     let test = vec!(1 as u8, 2)[0];
[04:34:19] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Ping timeout)
[04:34:27] <strcat> sa46: need to use as_slice for that too atm
[04:34:38] <mcpherrin> strcat: I dunno, is java's FFI as easy as rust standalone?
[04:34:39] <strcat> sa46: we don't have traits for overloading indexing in a satisfactory way yet
[04:34:46] <sa46> oh, thanks
[04:34:52] <strcat> mcpherrin: well you wouldn't be doing FFI in a freestanding case
[04:35:02] <mcpherrin> strcat: well you can use something like newlib
[04:35:03] <strcat> I'm not really serious with that statement anyway
[04:35:07] *** Joins: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net)
[04:35:10] <mcpherrin> strcat: :-)
[04:35:11] <strcat> mcpherrin: why though? :)
[04:35:16] <strcat> 90% of what you get is str* functions
[04:35:24] <mib_9x3ojb> strcat: We're compiling this for arm, so wouldn't libc be available. We have the cross-compile tool chain
[04:36:09] <mcpherrin> strcat: easy to use newlib on a platform where you only have putchar() and getchar() to have a reasonable printf and things
[04:36:23] <strcat> mcpherrin: I guess ;)
[04:36:36] <strcat> I'm just very frustrated by it
[04:36:41] <strcat> rust could be a great language for that
[04:36:51] <strcat> you could have type-safe format strings and all that fancy stuff available
[04:37:04] <mcpherrin> strcat: Yeah, I would really like to write a little microkernel in Rust
[04:37:19] <mcpherrin> and write a libmetal rust runtime that can sit on top of it
[04:37:27] *** Quits: james4k (james@moz-9BB5AE72.consolidated.net) (Ping timeout)
[04:37:39] <mcpherrin> or if the api is close enough, maybe even using libnative
[04:37:58] *** Joins: lpy (lpy@E44EE2C4.F09091A8.1348A864.IP)
[04:37:59] <mcpherrin> no point in writing your own OS if you're just gonna make another boring unix though
[04:38:42] <kmc> == mcpherrin
[04:38:51] *** Quits: lawrence (lawrence@moz-898F28F6.wireless.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[04:38:53] *** Quits: sa46 (Mibbit@moz-5B096CCE.static.snfr.nc.charter.com) (Quit: http://www.mibbit.com ajax IRC Client)
[04:39:00] <kmc> on another note, how can I add an explicitly-constructed TestDescAndFn to the set of tests to be run by the binary output by --test
[04:39:48] <kmc> I know how to write my own main() which calls test_main(), but then I don't get the magic of a library turning into an executable with --test
[04:39:50] *** Quits: bvssvni (Mibbit@moz-A47B6F8E.bb.online.no) (Quit: http://www.mibbit.com ajax IRC Client)
[04:40:03] <strcat> kmc: you could use cfg(test) yourself
[04:40:08] <kmc> but maybe #[cfg(main)] fn main() { ... } is good enough
[04:40:08] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Connection reset by peer)
[04:40:10] <kmc> err
[04:40:13] <kmc> cfg(test) like you said :)
[04:40:35] <kmc> in that case how do I get at the list of functions tagged with #[test]?
[04:40:42] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[04:40:49] <kmc> I want to mix #[test] with explicitly generated TestDescAndFn's, potentially
[04:41:09] <strcat> I'm not really sure how any of that works ;s
[04:41:30] <strcat> kmc: there's run_test
[04:41:33] *** Quits: mib_9x3ojb (Mibbit@B87B0F75.EBD92228.DDE5D3F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[04:41:59] *** Joins: james4k (james@moz-9BB5AE72.consolidated.net)
[04:43:15] <strcat> kmc: are you generating tests dynamically?
[04:44:26] *** Quits: EastByte_ (EastByte@moz-F0D1E34F.ewe-ip-backbone.de) (Ping timeout)
[04:44:27] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[04:45:03] *** Joins: leaper (Mibbit@B87B0F75.EBD92228.DDE5D3F6.IP)
[04:45:08] *** Quits: justin (justin@CF7218C.28BE7003.DDE5D3F6.IP) (Quit: Konversation terminated!)
[04:45:33] *** Joins: EastByte_ (EastByte@moz-31BE2A9E.ewe-ip-backbone.de)
[04:46:46] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[04:47:43] *** Joins: ztomo (ztomo@moz-54927FEF.qcl9.cha.bigpond.net.au)
[04:48:24] <kmc> looks like I may find answers in librustc/front/test.rs
[04:48:46] <kmc> strcat: right, I want to use #[test] throughout my library but also it will load a JSON file and generate a bunch more tests from that
[04:49:03] <kmc> and I want them to be independent tests, so I don't just want to put #[test] on the function which does that
[04:49:14] <kmc> (admittedly my reasons for wanting that are not super strong)
[04:49:27] *** Quits: ztomo (ztomo@moz-54927FEF.qcl9.cha.bigpond.net.au) (Ping timeout)
[04:49:35] *** Quits: hdevalence (quassel@moz-D125A39F.home3.cgocable.net) (Ping timeout)
[04:50:17] <strcat> kmc: https://github.com/thestinger/rust-seccomp/blob/master/generate.py this ends up being my solution to these kinds of issues ;P
[04:50:35] <strcat> could also make a syntax ext but it's probably too much trouble
[04:51:04] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[04:51:58] *** Quits: james4k (james@moz-9BB5AE72.consolidated.net) (Quit: WeeChat 0.4.3)
[04:52:08] *** Quits: leaper (Mibbit@B87B0F75.EBD92228.DDE5D3F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[04:52:51] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[04:53:15] *** Quits: lpy (lpy@E44EE2C4.F09091A8.1348A864.IP) (Ping timeout)
[04:53:58] *** Joins: james4k (james@moz-9BB5AE72.consolidated.net)
[04:54:21] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[04:54:28] *** Quits: Jesin (Jesin@moz-48B48C95.eecs.lehigh.edu) (Quit: Leaving)
[04:54:33] *** Quits: aravindavk (aravinda@111BB25B.543F7718.BB883D3E.IP) (Ping timeout)
[04:56:05] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[04:56:11] <kmc> I think for now I will accept that unit tests and generated tests will run in different binaries
[04:57:49] *** Joins: lpy (lpy@E44EE2C4.F09091A8.1348A864.IP)
[04:58:22] *** Joins: Doppp (Doppp@ABA7820A.3D394227.C4926542.IP)
[05:00:54] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[05:01:35] <o11c|interview> strcat: yeah, I was thinking fork also after I read that ... too bad I don't have any time for this kind of thing
[05:02:08] *** Joins: ztomo (ztomo@moz-54927FEF.qcl9.cha.bigpond.net.au)
[05:02:47] * strcat goes back to fighting with win32
[05:03:03] <tautologico> rustc is generating only SSE code for SIMD, though my CPU supports AVX
[05:03:14] <strcat> on the positive side, I got to delete 200 mingw-w32 packages from arch's aur
[05:03:28] <tautologico> is this LLVM's fault? any configuration I can change?
[05:03:30] <strcat> tautologico: it doesn't generate CPU-specific code by default
[05:03:35] <strcat> neither do clang/gcc
[05:03:41] <strcat> you can set the target CPU
[05:04:25] <strcat> rustc -C target-cpu=core-avx2 (or whatever it is)
[05:04:38] <tautologico> thanks
[05:04:39] <strcat> also, you can't use libgreen if you're doing that
[05:04:59] <mcpherrin> strcat: wait, really? why?
[05:05:01] <strcat> it doesn't swap SSE registers on x86 or AVX registers on 64-bit
[05:05:07] <mcpherrin> :-(
[05:05:10] <strcat> mcpherrin: it does a context switch specific to the base architecture
[05:05:17] <strcat> can't handle extensions from CPU revs
[05:05:25] <strcat> I think stuff like AES-NI would be broken too
[05:05:26] <mcpherrin> I didn't realize libuv was doing its own context switching.
[05:05:30] <strcat> mcpherrin: it doesn't
[05:05:46] <strcat> mcpherrin: rust's green threads have a context switching implementation
[05:05:50] <strcat> libuv is just async I/O
[05:05:58] <mcpherrin> strcat: Oh, i understand.  Yeah that makes more sense
[05:06:21] <strcat> mcpherrin: src/rt/arch/x86_64 if you're curious
[05:06:42] <strcat> _context.S
[05:06:43] <mcpherrin> And I am!
[05:06:43] *** Quits: jld (jld@moz-B94C75AD.xlerb.net) (Ping timeout)
[05:06:58] <mcpherrin> I like using the ARM compiler
[05:07:04] <mcpherrin> has a context switch intrinsic :P
[05:07:13] *** Quits: aatch (James@moz-B437F499.pocketrent.com) (Client exited)
[05:07:38] *** Quits: zen|merge (quassel@91FECF97.C92E06F3.D74AE493.IP) (Client exited)
[05:07:41] <strcat> mcpherrin: POSIX did too but they removed it
[05:07:59] <strcat> setcontext/getcontext, removed in POSIX 2008
[05:08:02] <strcat> and afaik, broken in many places
[05:08:06] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 31.0a1/20140319030201])
[05:08:12] <strcat> including glibc iirc
[05:08:54] <strcat> o11c|interview: I regret deciding to use portaudio despite it being awful ;P
[05:09:06] <strcat> I already have 4 patches for it that I apply
[05:09:10] <strcat> one just to make it build
[05:10:05] *** Joins: pyrac (pyrac@moz-598F4A4.w90-60.abo.wanadoo.fr)
[05:10:26] *** Quits: Doppp (Doppp@ABA7820A.3D394227.C4926542.IP) (Ping timeout)
[05:10:34] *** Quits: canhtak (canhtak@moz-2C382DC9.wl.t.ulaval.ca) (Quit: canhtak)
[05:11:42] *** Joins: enos (jkingyens@moz-386FB5BA.mycingular.net)
[05:11:48] *** Quits: pyrac (pyrac@moz-598F4A4.w90-60.abo.wanadoo.fr) (Ping timeout)
[05:12:39] *** Joins: jld (jld@moz-B94C75AD.xlerb.net)
[05:13:41] *** Joins: aravindavk (aravinda@9D11EE2C.6E390BC8.25742D89.IP)
[05:14:18] *** Quits: brendanc (brendan@moz-CA4BEC19.cs.ubc.ca) (Ping timeout)
[05:14:50] *** Joins: brendanc (brendan@moz-CA4BEC19.cs.ubc.ca)
[05:17:45] <tautologico> in a small test code if I turn on optimization rustc does not generate SSE instructions :)
[05:18:59] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[05:19:09] *** Joins: japaric (japaric@5264F756.A8CC9503.F29ED47E.IP)
[05:19:20] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[05:20:16] <tautologico> I don't think it ever generates AVX using the std::unstable::simd types
[05:20:36] *** Quits: rootnode (rootnode@moz-4E0AA685.pools.arcor-ip.net) (Ping timeout)
[05:21:03] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[05:21:29] <tautologico> these are all 128-bit and AVX registers are 256
[05:21:44] <strcat> tautologico: so define some AVX width types and use them
[05:21:49] <strcat> however #[simd] is really primitive
[05:21:57] <tautologico> yeah I know
[05:22:03] <kmc> TreeMap doesn't have .find_equiv() does it :/
[05:22:08] <strcat> you need to manually declare llvm.x86 intrinsics
[05:22:10] <strcat> kmc: can't exist
[05:22:20] <strcat> kmc: Equiv is equality, TreeMap needs TotalOrd
[05:22:30] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[05:22:36] <kmc> hm
[05:22:40] <strcat> kmc: imo it should just have functions taking a closure with a comparison function
[05:22:44] *** Quits: brontron (brontron@moz-C8D86903.tc.ph.cox.net) (Quit: brontron)
[05:22:46] <kmc> could have an Ord variant which lets me compare a ~str and a &'static str
[05:22:48] <kmc> yeah
[05:22:54] <tautologico> I'm trying to get more familiar with LLVM
[05:23:21] <strcat> kmc: closure is better imo because it doesn't fall into the trap of coherence hell and inflexibility
[05:23:33] <strcat> might not want to define a type
[05:23:56] <strcat> you might just want to look for some Foo with x == 5 and y == 10 without defining Bar to avoid instantiating two bigints or w/e
[05:24:49] <kmc> yeah
[05:26:04] *** Joins: Doppp (Doppp@moz-553020DA.hfc.comcastbusiness.net)
[05:27:35] <strcat> I hate portaudio ;s
[05:27:47] <strcat> I have to build it a dozen times before it makes libportaudio.a
[05:27:59] <strcat> inexplicable why it doesn't most of the time
[05:28:00] <strcat> oh great
[05:28:06] <strcat> /usr/bin/install: cannot stat 'lib/.libs/libportaudio.lai': No such file or directory
[05:28:19] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[05:28:22] *** Quits: victorporof (victorporo@moz-FFB76956.cpe.net.cable.rogers.com) (Quit: victorporof)
[05:28:39] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Client exited)
[05:29:00] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[05:29:06] *** Joins: zen|merge (quassel@91FECF97.C92E06F3.D74AE493.IP)
[05:30:40] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[05:31:14] *** Joins: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca)
[05:33:42] *** Quits: gwty (gwtypc@123D3329.2908BEAF.25B273F5.IP) (Ping timeout)
[05:35:14] *** Joins: gwty (gwtypc@4B5CCF07.AA3AB44C.F44414AF.IP)
[05:35:17] *** Joins: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru)
[05:36:39] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[05:36:50] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[05:38:00] *** Quits: philix (felipe@moz-466D2B4D.user.veloxzone.com.br) (Ping timeout)
[05:38:08] *** Quits: enos (jkingyens@moz-386FB5BA.mycingular.net) (Quit: enos)
[05:39:05] *** Joins: schnozzle (Mibbit@7E217F04.2C8DBE39.CC1A2609.IP)
[05:44:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[05:44:13] *** Quits: oxum (anonymous@A4CDB3F5.5F016CAB.520CDC98.IP) (Quit: Bye..)
[05:44:38] *** Joins: oxum (anonymous@A4CDB3F5.5F016CAB.520CDC98.IP)
[05:45:41] *** Quits: schnozzle (Mibbit@7E217F04.2C8DBE39.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[05:46:26] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[05:50:01] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[05:50:18] *** Quits: Earnestly (earnest@18162BE0.BA6AC103.30311652.IP) (Ping timeout)
[05:51:26] *** Joins: mno2 (mno2@E1E0A0A3.621D86F0.CFF65E33.IP)
[05:52:18] *** Joins: rootnode (rootnode@moz-30F8AAED.pools.arcor-ip.net)
[05:52:20] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[05:53:01] *** Quits: tom1 (tom@F616D77.77D422C6.AA74B5DB.IP) (Quit: WeeChat 0.4.1)
[05:55:34] *** Joins: daschl (Adium@moz-DC6DE6E2.vie.surfer.at)
[05:56:04] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Quit: Lost terminal)
[05:56:09] *** Joins: benjamin_ (benjamin@moz-8733F881.dip0.t-ipconnect.de)
[05:58:39] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[05:58:40] *** ChanServ sets mode: +ao pcwalton pcwalton
[05:59:27] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[05:59:41] *** Joins: pyrac (pyrac@moz-598F4A4.w90-60.abo.wanadoo.fr)
[06:00:37] <o11c|interview> strcat: didn't you say sfml would work?
[06:00:58] <strcat> o11c|interview: but it seemed like the lazy solution was to use the portaudio code I already wrote ;P
[06:01:04] <o11c|interview> or openal?
[06:01:09] <o11c|interview> strcat: throw away ALL the code
[06:01:17] <o11c|interview> that's my rule for starting a new project
[06:01:21] *** Quits: pyrac (pyrac@moz-598F4A4.w90-60.abo.wanadoo.fr) (Ping timeout)
[06:01:35] <o11c|interview> always go in expecting to throw away every single line at least once
[06:01:56] <o11c|interview> the first time, all you can learn is what some of the problems are
[06:03:09] <o11c|interview> (if you're *really* lucky, you might accidentally solve a problem the right way the first time and be able to reuse a little bit of code directly. Of course, this can only happen if you're really modular)
[06:06:03] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[06:07:24] *** Joins: ChrisOei (ChrisOei@moz-30D80888.hsd1.ca.comcast.net)
[06:09:11] *** Quits: ehsanul (harish@moz-A9E56CFE.hfc.comcastbusiness.net) (Ping timeout)
[06:12:11] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[06:12:22] *** Quits: maxli (Adium@moz-B19F68ED.student.cs.uwaterloo.ca) (Quit: Leaving.)
[06:14:10] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[06:15:43] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[06:17:10] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[06:18:27] *** aatch_ is now known as aatch
[06:18:54] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[06:19:10] <aatch> tautologico, I'm working on improving SIMD support btw
[06:20:57] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[06:21:27] *** Quits: james4k (james@moz-9BB5AE72.consolidated.net) (Ping timeout)
[06:23:09] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[06:24:20] *** Joins: matp (matp@moz-16FE1E05.matp.at)
[06:24:58] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[06:25:07] *** Quits: tmh (e@6F8495BB.FEF84806.AA32EE5B.IP) (Ping timeout)
[06:25:17] *** Quits: nfroidure (nfroidure@moz-C115682E.w90-34.abo.wanadoo.fr) (Quit: Ex-Chat)
[06:27:43] *** Quits: earlzlap (earlz@moz-483E1E31.neo.res.rr.com) (Ping timeout)
[06:28:10] *** Joins: eddyb (eddy@F8B50789.F33C1089.FB866788.IP)
[06:29:13] *** Joins: edwardw (edwardw@FF419987.E8120A68.7E4FEB66.IP)
[06:29:59] *** Joins: Rusky (russell@moz-173BA32C.slkc.qwest.net)
[06:31:24] *** Joins: tom1 (tom@moz-EEA4C0D9.lsanca.fios.verizon.net)
[06:32:35] *** Joins: james4k (james@moz-9BB5AE72.consolidated.net)
[06:32:51] *** Quits: aravindavk (aravinda@9D11EE2C.6E390BC8.25742D89.IP) (Ping timeout)
[06:33:25] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[06:34:20] *** Quits: alonlevy (alon@moz-944C9098.red.bezeqint.net) (Ping timeout)
[06:34:44] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[06:35:08] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[06:35:15] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Ping timeout)
[06:35:33] *** Joins: tmh (e@6F8495BB.FEF84806.AA32EE5B.IP)
[06:36:23] *** Joins: skade (skade@moz-1EC0F118.pools.arcor-ip.net)
[06:36:25] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[06:36:27] *** Joins: ahunt (ahunt@moz-6D6D79D6.cable.virginm.net)
[06:37:20] *** Quits: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com) (Ping timeout)
[06:39:39] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[06:40:05] *** Quits: bleibig (bleibig@moz-B4D9C5AF.hsd1.ca.comcast.net) (Quit: bleibig)
[06:40:52] *** Joins: ofeldt- (ofeldt@moz-766162C8.dip0.t-ipconnect.de)
[06:41:41] *** Joins: aravindavk (aravinda@9D11EE2C.6E390BC8.25742D89.IP)
[06:41:56] *** Quits: ofeldt (ofeldt@moz-FFDEB100.dip0.t-ipconnect.de) (Ping timeout)
[06:42:18] *** Quits: skade (skade@moz-1EC0F118.pools.arcor-ip.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[06:44:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[06:45:27] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[06:46:17] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[06:46:26] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[06:49:19] *** Joins: Ferreus (ferreus@moz-EE6F8A97.dip0.t-ipconnect.de)
[06:49:36] *** Quits: oxum (anonymous@A4CDB3F5.5F016CAB.520CDC98.IP) (Quit: Bye..)
[06:51:10] <kvanb> vadimcn: most the time I'm out the house or away from irc here
[06:51:15] <kvanb> thanks for putting up the repo
[06:51:49] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[06:53:29] *** Joins: pyrac (pyrac@moz-598F4A4.w90-60.abo.wanadoo.fr)
[06:53:39] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[06:54:21] *** Quits: matp (matp@moz-16FE1E05.matp.at) (Ping timeout)
[06:54:51] *** Quits: aravindavk (aravinda@9D11EE2C.6E390BC8.25742D89.IP) (Ping timeout)
[06:55:10] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[06:55:10] *** Joins: enos (jkingyens@moz-B0C1B161.hsd1.ca.comcast.net)
[06:55:11] *** Quits: pyrac (pyrac@moz-598F4A4.w90-60.abo.wanadoo.fr) (Ping timeout)
[06:57:34] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[06:58:04] *** Quits: ksev (DrunkenPan@212685B3.5B8F260F.586E6F35.IP) (Ping timeout)
[06:59:31] *** Joins: ehsanul (harish@moz-24DD2596.hsd1.ca.comcast.net)
[07:02:25] *** Quits: jesse98 (jjones@6251EDC2.15651213.B46B86FA.IP) (Ping timeout)
[07:03:12] *** Joins: jesse98 (jjones@6251EDC2.15651213.B46B86FA.IP)
[07:03:57] <tautologico> aatch: good to know
[07:04:25] <tautologico> wish I knew more about how the compiler worked so I could help
[07:04:30] <tautologico> works
[07:04:39] <aatch> tautologico, I mean, it won't use AVX instructions for 128bit vectors, but it does for 256 ones.
[07:04:40] *** Quits: nlminhtl (ignotus@moz-393BCEC.la.net.ua) (Quit: Konversation terminated!)
[07:04:55] *** Quits: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com) (Ping timeout)
[07:05:08] <aatch> Technically, you can use any size vector you want, LLVM can generally make it work.
[07:05:12] <tautologico> that's good
[07:05:25] <aatch> which means doing stuff like having simd![f32,..3] will work
[07:05:40] <tautologico> right
[07:05:53] <tautologico> I was only looking at the types defined in std::unstable::simd
[07:06:15] <aatch> tautologico, yeah, that's not brilliant, hence why I want to improve it.
[07:06:22] <aatch> I did an RFC for it.
[07:06:31] *** Joins: aravindavk (aravinda@9AC4F92D.1763B023.CA60403C.IP)
[07:06:40] *** Joins: Anupkumar (uid16774@moz-A42E5B7B.irccloud.com)
[07:06:50] <tautologico> where's it?
[07:06:58] <tautologico> dev list?
[07:07:14] <eddyb> https://github.com/rust-lang/rfcs
[07:07:22] <tautologico> I see
[07:08:05] *** Quits: skelly (hl@moz-55F978C0.org) (Ping timeout)
[07:08:17] *** Quits: wilmoore (wilmoore@moz-4EF3CEBC.hsd1.co.comcast.net) (Ping timeout)
[07:10:38] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[07:11:10] * eddyb is so confused by this https://github.com/rust-lang/rfcs/pull/11/files
[07:11:42] <tautologico> I'll take a look at it tomorrow
[07:11:47] <tautologico> good night
[07:11:50] <eddyb> it doesn't help when people who are trying to help are not familiar with internals. however, I could be *too* biased
[07:12:04] <eddyb> I see cans of worms everywhere
[07:12:08] *** Joins: skelly (hl@moz-55F978C0.org)
[07:12:18] <aatch> eddyb, heh, I've kinda had the opposite problem for my one.
[07:12:24] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[07:12:30] <aatch> People seeing problems that aren't really too bad.
[07:12:33] *** Quits: lpy (lpy@E44EE2C4.F09091A8.1348A864.IP) (Client exited)
[07:12:52] *** Quits: IanCormac841 (User@EE84D974.64D641E5.67DFF8B4.IP) (Ping timeout)
[07:13:41] *** Joins: IanCormac84 (User@C151EAB9.2A8D8854.67DFF8B4.IP)
[07:14:44] *** Quits: Doppp (Doppp@moz-553020DA.hfc.comcastbusiness.net) (Ping timeout)
[07:15:48] *** Quits: IanCormac84 (User@C151EAB9.2A8D8854.67DFF8B4.IP) (Ping timeout)
[07:16:30] *** Joins: IanCormac84 (User@E2C87274.2A8D8854.67DFF8B4.IP)
[07:17:21] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[07:18:22] *** Quits: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[07:18:58] *** Quits: zztr (Thunderbir@moz-CA50D606.dsl.static.sonic.net) (Ping timeout)
[07:19:21] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[07:22:36] *** Joins: zztr (Thunderbir@moz-CA50D606.dsl.static.sonic.net)
[07:26:29] *** Quits: IanCormac84 (User@E2C87274.2A8D8854.67DFF8B4.IP) (Ping timeout)
[07:27:17] *** Joins: fabiand (fabiand@moz-4A60F0CD.adsl.alicedsl.de)
[07:27:59] *** Joins: IanCormac84 (User@6BB125B3.2A8D8854.67DFF8B4.IP)
[07:28:22] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Ping timeout)
[07:28:56] *** aatch is now known as aatch|food
[07:30:16] *** Joins: skade (skade@B4A5FE21.505237C9.CAE22B62.IP)
[07:30:37] *** Quits: darkf (darkf@moz-F9058B8A.net) (Ping timeout)
[07:34:07] *** Quits: Mardak (Mardak@4851473D.BD9ECD5D.97D164AB.IP) (Ping timeout)
[07:35:06] *** Joins: Mardak (Mardak@4851473D.BD9ECD5D.97D164AB.IP)
[07:36:36] *** Quits: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) (Connection reset by peer)
[07:36:50] *** Joins: philix (felipe@moz-466D2B4D.user.veloxzone.com.br)
[07:37:59] *** Joins: lpy (lpy@2B87A1BA.DFA2C7B3.8C13C571.IP)
[07:38:31] *** aatch|food is now known as aatch
[07:38:52] *** Quits: philix (felipe@moz-466D2B4D.user.veloxzone.com.br) (Ping timeout)
[07:38:56] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[07:39:49] *** Joins: pyrac (pyrac@8EED02EC.73C89388.AD05C589.IP)
[07:41:04] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[07:44:07] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[07:46:26] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[07:47:04] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[07:47:25] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[07:49:08] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[07:52:36] *** Quits: Mardak (Mardak@4851473D.BD9ECD5D.97D164AB.IP) (Quit: Mardak)
[07:53:32] *** pmoore|away is now known as pmoore
[07:53:50] *** Joins: sigma (sigma@moz-55097A0B.range86-163.btcentralplus.com)
[07:56:35] *** Joins: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP)
[07:58:59] *** Quits: edwardw (edwardw@FF419987.E8120A68.7E4FEB66.IP) (Quit: Leaving...)
[07:59:37] *** Quits: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP) (Ping timeout)
[08:00:11] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[08:00:14] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[08:00:55] *** Joins: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP)
[08:01:11] *** Quits: james4k (james@moz-9BB5AE72.consolidated.net) (Ping timeout)
[08:01:50] *** Quits: eddyb (eddy@F8B50789.F33C1089.FB866788.IP) (Ping timeout)
[08:02:35] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[08:03:37] *** Quits: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP) (Quit: This computer has gone to sleep)
[08:07:53] *** flaper87|afk is now known as flaper87
[08:11:30] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[08:12:51] *** Joins: alonlevy (alon@moz-8A0868EF.red.bezeqint.net)
[08:12:57] *** Joins: eddyb (eddy@F8B50789.F33C1089.FB866788.IP)
[08:13:10] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[08:13:17] *** Joins: Zr40 (zr40@EE4BB9F5.926C319A.BE2F4011.IP)
[08:13:19] *** Quits: valentin (Thunderbir@4F2F9D91.E06BF678.B9540FE1.IP) (Quit: valentin)
[08:13:28] *** Joins: matp (matp@moz-16FE1E05.matp.at)
[08:13:53] *** Joins: valentin (Thunderbir@4F2F9D91.E06BF678.B9540FE1.IP)
[08:16:18] *** Joins: huon (Thunderbir@moz-826BD85A.lns20.syd6.internode.on.net)
[08:16:18] *** ChanServ sets mode: +o huon
[08:19:51] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[08:19:56] *** Quits: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net) (Input/output error)
[08:20:53] *** Quits: aravindavk (aravinda@9AC4F92D.1763B023.CA60403C.IP) (Ping timeout)
[08:22:25] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[08:24:22] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[08:24:39] *** Joins: wilmoore (wilmoore@moz-4EF3CEBC.hsd1.co.comcast.net)
[08:25:19] *** Joins: aravindavk (aravinda@9AC4F92D.1763B023.CA60403C.IP)
[08:27:29] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[08:28:27] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[08:28:46] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[08:35:29] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[08:35:32] *** Joins: mrmonday_ (mrmonday@moz-1E82AE75.members.linode.com)
[08:36:02] *** Quits: alonlevy (alon@moz-8A0868EF.red.bezeqint.net) (Ping timeout)
[08:37:13] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[08:37:52] *** Joins: Ms2ger (Ms2ger@6BCD8197.DF5CCC78.F15B0BB3.IP)
[08:39:09] *** Quits: mrmonday_ (mrmonday@moz-1E82AE75.members.linode.com) (Input/output error)
[08:39:12] *** Quits: onelson (owen@18CF7301.95770028.5B6BFE7D.IP) (Ping timeout)
[08:39:32] *** Quits: meTaAU (admin@moz-5635B403.lns20.per2.internode.on.net) (Quit: leaving)
[08:42:05] *** Joins: mrmonday_ (mrmonday@moz-1E82AE75.members.linode.com)
[08:42:59] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Client exited)
[08:44:20] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[08:45:09] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[08:46:25] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[08:48:29] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[08:52:17] *** Joins: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch)
[08:52:39] *** Quits: ztomo (ztomo@moz-54927FEF.qcl9.cha.bigpond.net.au) (Ping timeout)
[08:53:36] <Yurume> hmm, there is no way to construct a (new) Vec from an owned pointer and length/capacity, right?
[08:54:16] *** Joins: espindola (espindola@3AA6F601.53AE8582.A535BD55.IP)
[08:54:26] *** Joins: arturo (Thunderbir@moz-E83B14F0.superkabel.de)
[08:54:53] <eddyb> Yurume: owned pointer to what?
[08:55:06] <eddyb> oh, ~T to Vec<T>?
[08:55:50] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[08:56:01] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[08:56:10] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Connection reset by peer)
[08:56:29] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[08:56:29] <Yurume> eddyb: *T to Vec<T>.
[08:56:37] <Yurume> (an obviously unsafe operation)
[08:57:00] <eddyb> the from_buf thing?
[08:57:01] *** Quits: dougxxx (dougxxx@moz-2801788.perm.iinet.net.au) (Quit: Leaving...)
[08:57:04] <Yurume> yeah
[08:57:36] <Yurume> I'm converting rust-sdl to use Vec<T> (finally!) and have some occurrences of slice::from_buf
[08:58:18] <strcat> is there really a use case for sdl 1.2? ;p
[08:58:19] <Yurume> I think most of them can be converted to a temporary &[T], but that made me wonder
[08:58:48] *** Quits: mrmonday_ (mrmonday@moz-1E82AE75.members.linode.com) (Quit: Lost terminal)
[08:59:02] <eddyb> Yurume: is it owned, or is it borrowed?
[08:59:04] <Yurume> strcat: I use it. shouldn't it be a reason? :S
[08:59:12] <strcat> Yurume: but why use it for new code?
[08:59:19] <strcat> it's hopelessly buggy/broken
[08:59:31] * strcat shrugs
[09:00:46] <Yurume> if you can convert all codes using SDL 1.2 to use SDL2, then I can start to understand your concern. :(
[09:00:57] <Yurume> all existing codes.
[09:01:07] <strcat> Yurume: I'm just talking about rust though
[09:01:18] <eddyb> can SDL1.2 do something SDL2 can't? that doesn't sound right
[09:01:28] <eddyb> (apart from "crash" and "burn")
[09:01:29] <Yurume> my existing code uses SDL 1.2 a lot and can't easily be changed yet.
[09:01:38] <strcat> eddyb: API isn't fully backwards compatible
[09:01:39] <eddyb> why "yet"?
[09:01:51] <eddyb> strcat: I don't care for that :P
[09:01:57] <Yurume> eddyb: I do have a plan for it but don't have much time to do that
[09:02:09] <Yurume> the last time I've tried rust-sdl2 it segfaulted in Windows
[09:02:29] <strcat> binding issue
[09:02:33] <Yurume> and I couldn't easily fix that, so I gave up at that time
[09:02:36] <Yurume> I think so
[09:02:38] <strcat> sdl2 is used in AAA games, sdl 1.2 isn't really
[09:02:44] <strcat> or rather, wasn't
[09:03:04] <Yurume> I'm not building AAA games anyway, so who cares? ;)
[09:03:18] <strcat> partly due to fears about LGPL, partly because it has a totally broken cursor, resolution management, window management, audio, etc. ;p
[09:03:44] <Yurume> anyway, I *have* to maintain rust-sdl for now. please do not criticize me for that :p
[09:04:26] <eddyb> do you?
[09:04:39] <Yurume> seems so.
[09:04:41] <eddyb> is it really worth maintaining something old?
[09:04:58] <Yurume> otherwise my project does not compile obviously.
[09:04:59] <eddyb> you could spend that time upgrading to SDL2. or something like GLFW
[09:05:14] <Yurume> and I have lots of things to do besides from converting to SDL2 for now
[09:05:36] *** Joins: mib_edp3cy (Mibbit@91AC5DA1.25CAA13F.659DEE14.IP)
[09:05:39] <strcat> eddyb: glfw isn't really a complete replacement for sdl2
[09:06:19] *** Joins: mye (mye@moz-A8B75C5E.dip0.t-ipconnect.de)
[09:06:39] <eddyb> strcat: well, SDL has a bunch of useless stuff in it :P
[09:06:46] <strcat> sdl2 does? like what ;p
[09:07:15] <eddyb> strcat: or only the old one did? I'm not exactly sure
[09:07:22] <Yurume> it at least does not have CD playback support now
[09:07:27] <strcat> 1.2 has some useless cruft + is pretty buggy
[09:07:28] <eddyb> hahaha
[09:08:10] *** Quits: patpat (patpat@moz-1599AAE4.as13285.net) (Ping timeout)
[09:09:02] <Yurume> ha, this palette thing is actually very crazy. :(
[09:09:24] *** Quits: mib_edp3cy (Mibbit@91AC5DA1.25CAA13F.659DEE14.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[09:09:36] <Yurume> why on the earth destruct the owned vector *into* the SDL_Palette?!
[09:09:42] *** Joins: ztomo (ztomo@moz-54927FEF.qcl9.cha.bigpond.net.au)
[09:09:43] <Yurume> why on the earth does it*
[09:11:06] *** Quits: aravindavk (aravinda@9AC4F92D.1763B023.CA60403C.IP) (Quit: Leaving)
[09:11:17] *** Joins: aravindavk (aravinda@9AC4F92D.1763B023.CA60403C.IP)
[09:12:16] <strcat> eddyb: https://wiki.libsdl.org/MigrationGuide this is like a long list of why I find playing sdl1 games unbearable
[09:12:27] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[09:13:07] *** Joins: philix (felipe@moz-466D2B4D.user.veloxzone.com.br)
[09:13:41] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Connection reset by peer)
[09:13:59] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[09:14:18] *** Quits: tautologico (uid22285@moz-A42E5B7B.irccloud.com) (Quit: Connection closed for inactivity)
[09:14:30] *** Quits: aravindavk (aravinda@9AC4F92D.1763B023.CA60403C.IP) (Ping timeout)
[09:14:43] *** Joins: aravindavk (aravinda@9AC4F92D.1763B023.CA60403C.IP)
[09:15:44] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[09:16:28] *** Quits: philix (felipe@moz-466D2B4D.user.veloxzone.com.br) (Ping timeout)
[09:17:51] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Client exited)
[09:18:52] *** Joins: glaebhoer1 (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[09:19:15] *** Quits: ztomo (ztomo@moz-54927FEF.qcl9.cha.bigpond.net.au) (Ping timeout)
[09:19:28] *** Quits: cceckman (cceckman@moz-135DFDD5.bootp.virginia.edu) (Ping timeout)
[09:20:13] *** Joins: ztomo (ztomo@moz-4B664A27.lnse3.cha.bigpond.net.au)
[09:20:38] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[09:21:31] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Client exited)
[09:25:27] *** Joins: nkoep (nik@moz-CCDD9EE3.pool.mediaways.net)
[09:26:08] *** Quits: espindola (espindola@3AA6F601.53AE8582.A535BD55.IP) (Input/output error)
[09:27:04] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[09:29:30] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[09:30:44] *** Joins: soumyaC (uid15286@moz-E77DEB21.irccloud.com)
[09:32:06] *** Joins: wilfred (uid159@moz-5F4AA75A.irccloud.com)
[09:35:50] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[09:37:05] *** Joins: philix (felipe@moz-466D2B4D.user.veloxzone.com.br)
[09:37:22] *** Quits: wry (wry@620605B3.71150E1A.237AE2BA.IP) (Ping timeout)
[09:37:30] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[09:37:30] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[09:37:36] *** Joins: wry (wry@620605B3.71150E1A.237AE2BA.IP)
[09:40:44] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[09:40:44] *** Joins: IanCormac841 (User@E766529A.2A8D8854.67DFF8B4.IP)
[09:41:11] *** Quits: IanCormac84 (User@6BB125B3.2A8D8854.67DFF8B4.IP) (Ping timeout)
[09:41:38] *** pmoore is now known as pmoore|away
[09:42:01] *** Quits: ztomo (ztomo@moz-4B664A27.lnse3.cha.bigpond.net.au) (Ping timeout)
[09:43:59] *** Joins: tulloch (tulloch@2A036BF4.7B33B9A1.EFF8B7BF.IP)
[09:44:04] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[09:44:37] *** Quits: enos (jkingyens@moz-B0C1B161.hsd1.ca.comcast.net) (Quit: enos)
[09:46:05] *** Joins: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP)
[09:46:08] *** Joins: enos (jkingyens@moz-B0C1B161.hsd1.ca.comcast.net)
[09:46:22] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[09:47:11] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[09:49:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[09:49:45] <huon> wycats: ping
[09:49:54] *** Quits: lpy (lpy@2B87A1BA.DFA2C7B3.8C13C571.IP) (Client exited)
[09:51:20] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[09:54:37] *** Quits: IanCormac841 (User@E766529A.2A8D8854.67DFF8B4.IP) (Ping timeout)
[09:54:46] *** Joins: IanCormac84 (User@D23CFDB.2A8D8854.67DFF8B4.IP)
[09:54:57] *** Joins: rmt (rmt@moz-4CB6ED0D.superkabel.de)
[09:57:17] *** Joins: IanCormac841 (User@E036259D.64D641E5.67DFF8B4.IP)
[09:57:52] *** Joins: Matthias247 (Miranda@moz-678B5E4A.hsi2.kabel-badenwuerttemberg.de)
[09:57:57] *** Quits: IanCormac84 (User@D23CFDB.2A8D8854.67DFF8B4.IP) (Ping timeout)
[09:58:51] *** Joins: [squiddy] (squiddy@moz-7B493F09.dip0.t-ipconnect.de)
[09:59:00] *** Quits: [squiddy] (squiddy@moz-7B493F09.dip0.t-ipconnect.de) (Quit: Leaving)
[09:59:08] *** Quits: IanCormac841 (User@E036259D.64D641E5.67DFF8B4.IP) (Ping timeout)
[10:01:10] *** Joins: IanCormac84 (User@E036259D.64D641E5.67DFF8B4.IP)
[10:02:07] *** Joins: rumpler (Mibbit@A54702E.4B947797.97F07BE5.IP)
[10:02:57] *** Quits: IanCormac84 (User@E036259D.64D641E5.67DFF8B4.IP) (Ping timeout)
[10:05:03] *** Joins: q66 (q66@moz-25DACF.range109-154.btcentralplus.com)
[10:05:07] <rumpler> Rustin, is that you? It's me Martin. Did you ever figure out who the Yellow King was?
[10:05:12] *** Quits: rumpler (Mibbit@A54702E.4B947797.97F07BE5.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[10:07:03] *** Joins: refold (gman@moz-42D68426.a258.priv.bahnhof.se)
[10:07:29] *** Quits: mno2 (mno2@E1E0A0A3.621D86F0.CFF65E33.IP) (Quit: mno2)
[10:11:02] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[10:11:38] *** Joins: lpy (lpy@8B40CDAC.F09091A8.1348A864.IP)
[10:12:56] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[10:13:01] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[10:14:41] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[10:15:56] *** Joins: yota (sdouche@moz-7D878FB8.securactive.net)
[10:16:57] *** Quits: tulloch (tulloch@2A036BF4.7B33B9A1.EFF8B7BF.IP) (Connection reset by peer)
[10:17:24] *** Joins: gimpf (gimpf@moz-CAA3F4E7.adsl.highway.telekom.at)
[10:20:27] *** Joins: NiccosSystem_ (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[10:20:57] *** Joins: cceckman (cceckman@moz-135DFDD5.bootp.virginia.edu)
[10:21:18] *** Joins: patpat (patpat@7121ECA2.CDD6CF5F.98F3E2B5.IP)
[10:22:32] *** Joins: tulloch (tulloch@2A036BF4.7B33B9A1.EFF8B7BF.IP)
[10:22:58] *** Quits: kanru (kanru@moz-DB4A9C19.scl3.mozilla.com) (Input/output error)
[10:26:00] *** Quits: NiccosSystem_ (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[10:28:07] *** Joins: bvssvni (Mibbit@moz-A47B6F8E.bb.online.no)
[10:28:48] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Client exited)
[10:32:20] *** Quits: phay (phay@16E8BAAB.D2C4A785.91986DB5.IP) (Client exited)
[10:32:44] *** Joins: phay (phay@16E8BAAB.D2C4A785.91986DB5.IP)
[10:32:47] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[10:33:35] *** Quits: phay (phay@16E8BAAB.D2C4A785.91986DB5.IP) (Connection reset by peer)
[10:34:31] <lukem> is there an easy way to get a new struct with zeroed fields? or do you have to manually specify zeros for each of the fields?
[10:34:41] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[10:34:49] *** pmoore|away is now known as pmoore
[10:35:38] <eddyb> lukem: #[deriving(Zero)] if all your fields are numeric primitives
[10:35:54] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[10:37:47] *** Joins: reverend_paco (chatzilla@moz-FDBE15EC.hsd1.ma.comcast.net)
[10:38:14] <lukem> added that , but i am still not sure how to do the creation. let mut msg = MyMessage {} says "MyMessage is a structure name, but this expression uses it like a function name"
[10:38:28] <eddyb> lukem: that implements Zero for the struct
[10:38:33] <eddyb> Zero::zero() to create it
[10:40:30] <eddyb> this is sweet https://github.com/wycats/hammer.rs (#needsdocs)
[10:40:50] <eddyb> maybe we can use that instead of getopt within rust itself
[10:41:11] <lukem> ah ok, thanks eddyb !
[10:42:16] *** Quits: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch) (Quit: Leaving.)
[10:42:20] *** Joins: nical (nico@87C1F78E.1DE10CA8.D8E68FF6.IP)
[10:44:08] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[10:45:16] *** Joins: kris (kris@moz-6D20263F.fullrate.dk)
[10:46:29] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[10:46:46] <eibwen> would there be a way of making http://static.rust-lang.org/doc/master/std/mem/fn.init.html safe, like #[deriving(Init)]?
[10:46:58] *** Quits: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP) (Connection reset by peer)
[10:47:23] <eibwen> that way, one could actually make a safe vector allocation, using calloc()
[10:47:24] <eddyb> eibwen: that's what Default is for
[10:47:41] <eibwen> eddyb: except that Default might init with nonzero
[10:47:58] <tom1> is Cargo going to hitch its wagon to toml?
[10:48:36] *** Quits: wilmoore (wilmoore@moz-4EF3CEBC.hsd1.co.comcast.net) (Ping timeout)
[10:49:53] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[10:50:22] <huon> tom1: no; it's going to have toml as the input format while in development now
[10:50:42] <huon> it may or may not use it as the canonical format going forward
[10:51:08] <huon> the design means it will be *very* easy to switch in a new input format
[10:52:29] * eddyb starts replacing @T with P<T>
[10:52:41] <eddyb> this will be a complete and utter mess for a few days
[10:53:14] *** Joins: darkf (darkf@moz-F9058B8A.net)
[10:53:55] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[10:56:01] *** Joins: alonlevy (alon@moz-944C9098.red.bezeqint.net)
[10:56:18] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[10:56:18] *** Quits: EastByte_ (EastByte@moz-31BE2A9E.ewe-ip-backbone.de) (Ping timeout)
[10:57:22] *** Joins: EastByte_ (EastByte@moz-4161ACFC.ewe-ip-backbone.de)
[10:58:22] <kimundi> Hmm, defining Iterable traits seems to work in principle now: https://gist.github.com/Kimundi/9683769
[10:58:29] *** Joins: Guest (textual@3E0487DF.D8252BC.9532F1CE.IP)
[10:58:40] *** Quits: Guest (textual@3E0487DF.D8252BC.9532F1CE.IP) (Quit: Textual IRC Client: www.textualapp.com)
[10:59:00] <huon> rusti: &1i as *_
[10:59:01] -rusti- 0x7ffff26994f8
[10:59:09] * huon loves that
[11:00:37] <eddyb> kimundi: why does it take &self/&mut self instead of self?
[11:00:40] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Client exited)
[11:00:48] <SiegeLord> What happened to vec::with_capacity?
[11:00:49] <eddyb> kimundi: I guess... hmm. it's all weird :(
[11:01:10] <kimundi> eddyb: I'm unsure about how to answer this querstion, seeing how all thre variants exist in that gist :P
[11:01:55] <eddyb> oooh, inherit Iterable rather than implementing it. that could work
[11:02:08] <eddyb> kimundi: nevermind I didn't look at the first one
[11:02:17] <eddyb> it looks... good
[11:02:17] <kimundi> well, you still need to implement it right now
[11:02:34] <eddyb> yeah, but a generic implementation would be kicked out by coherence
[11:02:54] <huon> SiegeLord: std::slice::with_capacity
[11:02:56] <huon> to get a ~[]
[11:03:01] <kimundi> but if we get coherence changes so that we can generically implement Iterable for all Iterators without conflicting with data structures implementing it also, it would work
[11:03:03] <huon> Vec::with_capacity to get a Vec<T>
[11:03:25] <eddyb> huon: silly guy, slices don't have capacities :P!
[11:03:28] <SiegeLord> I wanted a ~[]. Glad it was just moved
[11:03:42] <eddyb> SiegeLord: why are you still touching ~[T]?
[11:03:43] <huon> SiegeLord: you really don't want a ~[]. :P
[11:03:48] <kimundi> impl<A, T: Iterator<A>> Iterable<A, T> for T {...} impl<A> Iterable<A> for Vec<A> {...}
[11:04:04] <SiegeLord> Because you didn't fix Index yet
[11:04:05] <huon> eddyb: because it still exists and migrating is annoying?
[11:04:17] <huon> or because someone needs index
[11:04:34] <SiegeLord> Well, that's why migrating is annoying
[11:04:38] <huon> (is the temporary overhead of .get() really too much?)
[11:04:43] *** Joins: jviereck (Adium@moz-F2E90186.ethz.ch)
[11:04:51] *** Quits: jviereck (Adium@moz-F2E90186.ethz.ch) (Client exited)
[11:04:54] <eddyb> SiegeLord: but I'm blocked on someone smarter than me fixing the issues that would arise with IndexMut :(
[11:05:35] <SiegeLord> Strictly speaking, this spot is probably where ~[] will continue to be used
[11:05:49] <SiegeLord> Or maybe it'll just be []
[11:05:51] *** Joins: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl)
[11:06:11] <huon> ~[] is definite for death
[11:06:16] <huon> so it can't continue to be used
[11:06:21] <eddyb> huon: likely after DST
[11:06:33] <huon> eddyb: that's a completely different type ;)
[11:06:39] *** Quits: ehsanul (harish@moz-24DD2596.hsd1.ca.comcast.net) (Ping timeout)
[11:06:41] <eddyb> I mean, that's what SiegeLord probably means
[11:06:44] <huon> that just happens to have the same name
[11:06:52] <huon> different syntax contexts, so the idents are different
[11:07:01] <huon> but yeah...
[11:07:32] *** Joins: ehsanul (harish@moz-24DD2596.hsd1.ca.comcast.net)
[11:07:49] <kimundi> eddyb: Only trouble I have with that Iterable sketch is that I'm unsure where to put the Iterator adapters that are defined for &mut self
[11:07:53] *** Joins: andre_ (andre@CA528A4A.45A4338E.8EE27E6.IP)
[11:08:25] <kimundi> eddyb: They might need to remain on Iterator
[11:08:41] <eddyb> that shouldn't be an issue
[11:08:43] <huon> Oooh...
[11:08:54] <huon> implement Deref<...> on iterable structurs
[11:09:02] <huon> wait
[11:09:08] <eddyb> doesn't give you a new value
[11:09:11] <huon> that won't work, unless they are themselves iterators
[11:09:11] <Ms2ger> Are you high? :)
[11:09:12] *** Quits: patpat (patpat@7121ECA2.CDD6CF5F.98F3E2B5.IP) (Ping timeout)
[11:09:13] <eddyb> (not yet)
[11:09:19] *** Joins: patpat (patpat@7121ECA2.CDD6CF5F.98F3E2B5.IP)
[11:09:29] <eddyb> Ms2ger: feature-drunk
[11:10:22] <kimundi> huon, eddyb: Anyway, this would mean splitting up the adapters on Iterator in two sets: adapter that takes ownership of a Iterable, and adapter that modify a existing Iterator
[11:10:51] <kimundi> The one would live as default methods in Iterable, the other as default methods in Iterator
[11:11:04] *** Quits: patpat (patpat@7121ECA2.CDD6CF5F.98F3E2B5.IP) (Ping timeout)
[11:11:22] <huon> eddyb: done https://github.com/mozilla/rust/pull/12809#issuecomment-38018727
[11:11:47] <eddyb> done what?
[11:11:56] <eddyb> that's my PR
[11:12:10] <huon> done snapping
[11:12:23] <kimundi> Hm, that might actually coincide with another distinction between current Iterator adapters: Adapters that can be usefully overwritten, because they consume and calculate a value, and adapters that can not be, because they just return a adapter
[11:12:26] <eddyb> huon: priorities :P
[11:13:28] *** Joins: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[11:13:40] *** Joins: patpatter (patpat@7121ECA2.CDD6CF5F.98F3E2B5.IP)
[11:13:47] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[11:14:29] *** Quits: aravindavk (aravinda@9AC4F92D.1763B023.CA60403C.IP) (Ping timeout)
[11:15:10] <kimundi> rusti: use std::slice;
[11:15:12] -rusti- pastebinned 8 lines of output: http://sprunge.us/SJPZ
[11:15:21] *** Quits: patpatter (patpat@7121ECA2.CDD6CF5F.98F3E2B5.IP) (Ping timeout)
[11:15:27] *** Joins: patpat (patpat@7121ECA2.CDD6CF5F.98F3E2B5.IP)
[11:15:33] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[11:16:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[11:16:27] *** Joins: janra (Janus@1CDC5701.A48867D7.52E4E107.IP)
[11:16:40] <bvssvni> look at this beauty https://gist.github.com/bvssvni/9684061
[11:16:58] <bvssvni> the full monad macro is here https://gist.github.com/bvssvni/9674632
[11:17:06] *** Quits: enos (jkingyens@moz-B0C1B161.hsd1.ca.comcast.net) (Quit: enos)
[11:17:09] *** Quits: patpat (patpat@7121ECA2.CDD6CF5F.98F3E2B5.IP) (Ping timeout)
[11:17:14] *** Joins: patpat (patpat@7121ECA2.CDD6CF5F.98F3E2B5.IP)
[11:17:26] <SiegeLord> Does Vec have unsafe_ref?
[11:17:43] <strcat> SiegeLord: it will have all the &[T]/&mut [T] methods soon
[11:17:52] <strcat> I don't think we should duplicate any more implementations of them though
[11:17:59] <strcat> just need to abstract that stuff
[11:18:03] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[11:18:11] <strcat> I don't think it has ones like that atm
[11:18:14] <huon> SiegeLord: .as_slice().unsafe_ref() is a work around
[11:18:24] <huon> it does have fairly complete docs now, though
[11:18:28] <SiegeLord> One'd wish it'd be finished before being pushed onto peopel :P
[11:18:47] <huon> nothing else happens like that in Rust ;P
[11:19:03] *** Quits: patpat (patpat@7121ECA2.CDD6CF5F.98F3E2B5.IP) (Ping timeout)
[11:19:08] *** Joins: patpat (patpat@7121ECA2.CDD6CF5F.98F3E2B5.IP)
[11:19:12] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[11:19:17] <SiegeLord> The new formatting was like that ;)
[11:19:20] <strcat> SiegeLord: it has to happen for DST to land
[11:19:25] <huon> (nothing stops progress, especially not temporary (relatively) minor usability regressions)
[11:19:28] <SiegeLord> It was new, super functional right out of the box
[11:19:49] <huon> yeah, but it wasn't stopping progress
[11:19:57] <strcat> SiegeLord: I would have done a lot of Vec<T> work if I hadn't had to wait almost 2 weeks on a related PR ;p
[11:20:14] <strcat> and waited on another PR before then...
[11:20:39] <SiegeLord> Hmm... how come I managed to keep one of my ~[] without compiler errors...
[11:20:51] <strcat> SiegeLord: that deprecation warning is off now
[11:20:52] *** Quits: patpat (patpat@7121ECA2.CDD6CF5F.98F3E2B5.IP) (Ping timeout)
[11:20:56] *** Joins: patpat (patpat@7121ECA2.CDD6CF5F.98F3E2B5.IP)
[11:21:08] <strcat> until more of the stdlib is ported
[11:21:10] <huon> (by default)
[11:21:24] <huon> can enable it with -W deprecated-owned-vectors
[11:21:26] <SiegeLord> I must have been using only one with_capacity
[11:21:34] <huon> or #[warn(deprecated_owned_vectors)]
[11:22:23] <SiegeLord> That's just a warning ;)
[11:22:32] <eddyb> strcat: why no grow_fn? http://static.rust-lang.org/doc/master/std/vec/struct.Vec.html
[11:22:40] *** Quits: patpat (patpat@7121ECA2.CDD6CF5F.98F3E2B5.IP) (Ping timeout)
[11:22:45] *** Joins: patpat (patpat@7121ECA2.CDD6CF5F.98F3E2B5.IP)
[11:22:47] <eddyb> I don't want to implement Clone for not-supposed-to-be-cloned structure
[11:22:51] <eddyb> *for my
[11:22:57] <strcat> eddyb: I didn't add those grow fns in the first place afaik
[11:22:59] <huon> SiegeLord: the only compiler "errors" about ~[] are warnings
[11:23:09] <huon> i.e. lints
[11:23:11] <strcat> eddyb: pcwalton added what he needed to port code
[11:23:14] <huon> it's still in the language
[11:23:26] <huon> you can turn them into an error with -D / #[deny]
[11:23:32] <strcat> for now
[11:23:34] <strcat> it'll be totally gone soon
[11:23:56] * huon is updating one of pcwalton's removal PRs as we speak
[11:23:58] <SiegeLord> Why would I want to add more compiler errors :P I was just marveling that I wasn't using as many old vec:: functions as I thought I was
[11:24:06] <strcat> ah
[11:24:34] <SiegeLord> And in that place I wasn't using Index at all, hah... just that unsafe_ref
[11:24:36] <strcat> SiegeLord: also, Rc/Cell/RefCell was forced on people long before Deref
[11:24:37] *** Quits: patpat (patpat@7121ECA2.CDD6CF5F.98F3E2B5.IP) (Ping timeout)
[11:24:42] *** Joins: patpat (patpat@7121ECA2.CDD6CF5F.98F3E2B5.IP)
[11:24:56] <strcat> SiegeLord: but would Deref have been implemented so soon if it hadn't been forced on people? probably not ;p
[11:25:13] <SiegeLord> I managed to avoid needing shared ownership so far (except Cell, but that always was like it was)
[11:25:23] <Leo`> in libsyntax, how to I "unintern" a name or an ident to get a strign ?
[11:25:26] <SiegeLord> Does that mean I can remove my get/set calls on Cell? That'd be fun
[11:25:29] <Leo`> string*
[11:26:26] *** Quits: patpat (patpat@7121ECA2.CDD6CF5F.98F3E2B5.IP) (Ping timeout)
[11:26:31] *** Joins: patpat (patpat@7121ECA2.CDD6CF5F.98F3E2B5.IP)
[11:27:02] *** Joins: canhtak (canhtak@moz-805AE185.wl.t.ulaval.ca)
[11:27:12] <huon> SiegeLord: Cell doesn't (and can't) implement Deref
[11:27:12] <eddyb> SiegeLord: Cell? no
[11:27:24] <eddyb> RefCell? yes
[11:27:38] <SiegeLord> Oh, well then... no change is good too
[11:27:41] <huon> (it is explicitly desiged to not allow extracting a reference: save the requirement for dynamic borrow checks)
[11:27:43] *** Joins: leowoe (Leo@moz-CEF2400C.inf.uni-konstanz.de)
[11:27:49] <huon> Leo`: syntax::parser::token
[11:28:04] <huon> and some function that maps to InternedStr or RcStr
[11:28:16] <huon> can't remember the details
[11:28:21] *** Joins: reijoslav (antek@58F5EA4F.2E23C380.AFE2C49D.IP)
[11:28:37] *** Parts: reijoslav (antek@58F5EA4F.2E23C380.AFE2C49D.IP) (WeeChat 0.4.3)
[11:28:54] <kimundi> strcat: Do you think this could be a sensible design for Iterable? https://gist.github.com/Kimundi/9683769
[11:29:07] <Leo`> huon: thanks
[11:29:26] <strcat> kimundi: if it can be impl'ed on both &[T] and Vec<T> ;)
[11:30:18] *** Joins: reijoslav (antek@58F5EA4F.2E23C380.AFE2C49D.IP)
[11:30:26] *** Quits: benjamin_ (benjamin@moz-8733F881.dip0.t-ipconnect.de) (Ping timeout)
[11:32:05] <kimundi> strcat: One aspect I'm unsure about is that `datastructure.map(...)` will always dispatch to the equivalent of move_iter() - which makes sense composability wise, but is maybe not the common case you want to default too
[11:32:26] <huon> kimundi: impl on &'a Vec<T> ?
[11:32:48] <kimundi> strcat: But I don't see any sane way to do this differently, and datastructure.refs() would always work anyway
[11:32:56] <kimundi> huon: that won'T get you autoref afaik
[11:34:01] <SiegeLord> I wish rust-ci wouldn't repeatedly send [Fixed] emails... :/
[11:34:32] <SiegeLord> Or maybe the problem is on Travis's end
[11:34:42] * huon wishes it wouldn't send so many [Still Failing] emails
[11:35:01] * huon ignores the fact that he has the power to fix that
[11:35:05] <strcat> travis-ci pissed me off and I haven't used it since then ;\
[11:35:10] <strcat> forget why too
[11:35:20] <huon> SiegeLord: I'd assume it is Travis just sending emails for every build
[11:35:27] <strcat> it did something weird to one of my repos a year ago
[11:35:31] <huon> strcat: you're missing out on the glory that is rust-ci
[11:35:32] <SiegeLord> It happens when I fix a broken build
[11:35:37] *** Quits: alonlevy (alon@moz-944C9098.red.bezeqint.net) (Ping timeout)
[11:35:39] <huon> SiegeLord: yes
[11:35:41] <SiegeLord> It'll keep sending that it got fixed every day afterward
[11:35:50] <SiegeLord> However, if I add a commit that merely passes, it won't send any
[11:35:54] <strcat> huon: yeah, but I don't have to give a bunch of access permissions to something I don't really trust ;p
[11:36:01] <huon> due to the recurring nightly builds that rust-ci triggers?
[11:36:05] <huon> oh, I see
[11:36:18] <huon> strcat: yes, it makes me nervous too
[11:36:34] <huon> especially with that other CI service that mangled a pile of repos a few months ago...
[11:36:34] <SiegeLord> I guess a brute force solution would be disable fixed emails altogether, not sure that's an option
[11:36:35] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[11:38:16] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[11:38:51] <huon> SiegeLord: another solution would be an email filter for "[Fixed]" from Travis, if you can't disable it at their end
[11:39:10] <SiegeLord> That's true...
[11:41:39] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[11:44:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[11:45:21] *** Quits: Ferreus (ferreus@moz-EE6F8A97.dip0.t-ipconnect.de) (Ping timeout)
[11:46:27] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[11:46:50] *** Quits: ehsanul (harish@moz-24DD2596.hsd1.ca.comcast.net) (Ping timeout)
[11:47:23] <kimundi> strcat: Okay, implementing Iterable for Vec<T> and &[T] seems to work if I make the move_iter equivalent for Vec return T and &T for &[T]: https://gist.github.com/Kimundi/9683769
[11:47:47] <kimundi> (mod vec_impl and mod slice_impl)
[11:47:49] *** Joins: tiffany (kawaii@moz-7AF84602.dhcp.embarqhsd.net)
[11:48:38] <kimundi> Its kinda strange because slice.into_values() would return reference and do the same as slice.refs()
[11:49:23] *** Joins: Earnestly (earnest@18162BE0.BA6AC103.30311652.IP)
[11:49:25] <kimundi> could also just not implement Iterable for slice, which would require slice.refs() to get a iterator
[11:50:20] <kimundi> Meh, need to wait for DST anyway, to see how all the interactions shake out if &[T] ceases being its own type
[11:50:20] <huon> it seems like slice is the "canonical" iterable thing?
[11:50:26] *** Quits: Mathieu (cicak@420C86E4.9C1E3043.FBF02BB8.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[11:51:04] <kimundi> huon: Well its certainly not canonical to get a move_iter from it ;)
[11:52:00] <kimundi> Maybe this just means I need to seperate out the concepts "thing that provides move iter, ref iter and mut ref iter" and "thing that is iterable for a specific iterator type"
[11:52:17] <kimundi> but the latter would need to take self anyway to be consistent...
[11:52:51] <huon> rusti: fn foo<B>(f: fn(int) -> B) -> B { f(1) } fn bar(x: int) -> f64 { x as f64 } foo(bar)
[11:52:51] *** Joins: fyolnish (fyolnish@moz-49396AB9.dynamic.ppp.asahi-net.or.jp)
[11:52:52] -rusti- 1
[11:54:00] *** Quits: mye (mye@moz-A8B75C5E.dip0.t-ipconnect.de) (Quit: sleep message)
[11:57:52] *** jorendorff_away is now known as jorendorff
[11:58:09] *** Joins: dwrensha (chatzilla@moz-B23D2FF6.pitbpa.east.verizon.net)
[11:59:03] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[11:59:26] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[12:00:49] *** Quits: daschl (Adium@moz-DC6DE6E2.vie.surfer.at) (Quit: Leaving.)
[12:01:03] *** Quits: bvssvni (Mibbit@moz-A47B6F8E.bb.online.no) (Quit: http://www.mibbit.com ajax IRC Client)
[12:01:23] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[12:01:28] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[12:02:14] *** Joins: Ferreus (ferreus@moz-54CB863F.dip0.t-ipconnect.de)
[12:03:37] *** Joins: jviereck (Adium@moz-42E51C3B.ethz.ch)
[12:05:37] *** Joins: tfogal (tfogal@349C7098.B9F5E6C9.F7261B00.IP)
[12:07:50] <tfogal> hi all, just getting started.  I grok Option<foo> but the tutorial does not appear to cover how to get the 'foo' out of the 'Option'.  I tried 'match x { None => println("error"), ??? }' but i have no clue what to put in the ??? part.. any hints?
[12:08:21] <huon> Some(y) => { ... }
[12:08:50] <huon> the docs are here: http://static.rust-lang.org/doc/master/std/option/enum.Option.html , the interesting part is the `None` and the `Some(..)`
[12:09:04] <huon> the thing to match on is the constructors
[12:09:24] *** Joins: oberstet (quassel@moz-CAAEB459.dynamic.mnet-online.de)
[12:09:24] *** Quits: leowoe (Leo@moz-CEF2400C.inf.uni-konstanz.de) (Quit: Leaving.)
[12:09:28] *** Joins: asmyers (quassel@1AED7747.A07F7734.FAA4474F.IP)
[12:09:33] <huon> e.g. for Option the constructors are Some and None, for Result ( http://static.rust-lang.org/doc/master/std/result/enum.Result.html ) they are Ok and Err
[12:09:51] <huon> for a reference `&T`, the constructor is `&` (so the pattern match is `&foo => { ... }`
[12:09:52] <huon> )
[12:11:56] *** Quits: jviereck (Adium@moz-42E51C3B.ethz.ch) (Quit: Leaving.)
[12:12:52] *** Quits: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net) (Connection reset by peer)
[12:14:22] *** Quits: kris (kris@moz-6D20263F.fullrate.dk) (Ping timeout)
[12:14:23] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[12:14:41] *** Joins: Kynes (Kynes@moz-3DC6C6E7.mit.edu)
[12:16:12] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[12:18:28] <Ms2ger> What happened to debug!()?
[12:19:09] <huon> Ms2ger: moved to liblgo
[12:19:11] <huon> http://static.rust-lang.org/doc/master/log/index.html
[12:19:14] <huon> erm, log
[12:19:26] <Ms2ger> libgo? :)
[12:20:00] *** Joins: manishearth (manisheart@moz-F9058B8A.net)
[12:20:04] <Ms2ger> And error!()?
[12:20:22] <SiegeLord> Hehe, libgo would have a go!{insert go code here} macro ;)
[12:21:15] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[12:21:26] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[12:21:51] *** Joins: jackneill (jackneill@moz-9A6532AC.pool.digikabel.hu)
[12:21:56] *** Joins: kanru (kanru@moz-DB4A9C19.scl3.mozilla.com)
[12:23:18] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[12:23:40] *** pmoore is now known as pmoore|lunch
[12:25:17] *** Joins: leowoe (Leo@moz-CEF2400C.inf.uni-konstanz.de)
[12:27:32] *** Joins: alonlevy (alon@moz-944C9098.red.bezeqint.net)
[12:29:20] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[12:30:02] *** Quits: patpat (patpat@7121ECA2.CDD6CF5F.98F3E2B5.IP) (Ping timeout)
[12:31:58] *** Joins: krdln (krdln@moz-C271714F.dynamic.chello.pl)
[12:32:42] *** Joins: io2 (io2@moz-EE406A5.home.otenet.gr)
[12:33:25] <huon> Ms2ger: check the example there ;)
[12:33:29] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Quit: Leaving.)
[12:34:07] *** Quits: glaebhoer1 (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Ping timeout)
[12:34:26] <Ms2ger> So #[allow()]; #[feature(phase)]; #[phase(syntax, link)] extern crate log; extern crate foo;
[12:34:27] <Ms2ger> ?
[12:35:23] <huon> Ms2ger: yeah, something like that
[12:35:45] *** Joins: edwardw (edwardw@2BFF2300.F4429B.7E4FEB66.IP)
[12:36:56] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[12:37:06] *** Joins: glaebhoer1 (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[12:38:36] <kimundi> Hm does this logic for naming something make sense? "A container for items T that is Iterable<T> can be iterated over to yield elements of type T. Because of move semantics, this means that in Rust every Iterable is a interface that takes `self` to turn the container into a iterator."
[12:38:37] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[12:38:58] <Ms2ger> *an interface
[12:40:32] *** Quits: dwrensha (chatzilla@moz-B23D2FF6.pitbpa.east.verizon.net) (Ping timeout)
[12:41:43] *** Joins: Rym (y@B9974C6D.8A65FA57.8772DA20.IP)
[12:43:42] *** Quits: alonlevy (alon@moz-944C9098.red.bezeqint.net) (Ping timeout)
[12:43:51] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[12:44:30] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[12:46:48] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[12:48:32] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[12:49:55] <Earnestly> to turn the, -> which turns ?
[12:51:51] *** Quits: japaric (japaric@5264F756.A8CC9503.F29ED47E.IP) (Ping timeout)
[12:52:37] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[12:52:50] <huon> Earnestly: ?
[12:53:18] <Earnestly> huon: It's only 10 minutes later, same context
[12:53:24] *** Joins: japaric (japaric@C87928B9.6A7849D9.95AE23EB.IP)
[12:53:25] <kimundi> I didn't mean grammar or spelling, I meant the logic behind naming it "Iterable" and making it a interface for "into_iter()"
[12:53:37] <Earnestly> Well, you got some grammar for free then :P
[12:54:02] <huon> Earnestly: oh; right, history
[12:54:09] *** Quits: japaric (japaric@C87928B9.6A7849D9.95AE23EB.IP) (Quit: WeeChat 0.4.3)
[12:54:35] <Earnestly> huon: to be fair, I can sometimes reply to things hours passed as I don't use timestamps normally
[12:54:39] <Ms2ger> task 'rustc' failed at 'index out of bounds: the len is 380215 but the index is 380215',
[12:55:07] *** Joins: kris (kris@moz-147EE6DF.diku.dk)
[12:56:22] *** Quits: tiffany (kawaii@moz-7AF84602.dhcp.embarqhsd.net) (Ping timeout)
[12:57:05] *** Quits: io2 (io2@moz-EE406A5.home.otenet.gr) (Quit: )
[12:58:27] *** Joins: tiffany (kawaii@moz-7AF84602.dhcp.embarqhsd.net)
[13:00:27] *** Joins: mib_aju9bz (Mibbit@7E217F04.2C8DBE39.CC1A2609.IP)
[13:02:27] *** Joins: benjamin_ (benjamin@moz-8733F881.dip0.t-ipconnect.de)
[13:03:41] *** Joins: jviereck (Adium@moz-42E51C3B.ethz.ch)
[13:03:43] *** pmoore|lunch is now known as pmoore
[13:04:01] *** Quits: jviereck (Adium@moz-42E51C3B.ethz.ch) (Max SendQ exceeded)
[13:04:44] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[13:05:08] <doomlord_> should be able to cast  a *T as &'T , right ?  .. (i had this working, just re-arranged it to something generic.. )        data:~[u8]...      &self.data[0] as *u8  as *T  as &'s T   /* 's is the lifetime of the enclosing object */
[13:05:41] <doomlord_> the difference is, i had a concrete type before, now its a type param , 
[13:06:15] *** Quits: tom1 (tom@moz-EEA4C0D9.lsanca.fios.verizon.net) (Ping timeout)
[13:06:43] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[13:07:01] <kimundi> doomlord_: I don't think we support safeöy casting a *T back into a &T
[13:07:09] <kimundi> doomlord_: It would open unsafety
[13:07:13] <doomlord_> its unsafe
[13:07:28] <kimundi> You mean, the cast is in a unsafe block?
[13:07:43] <kimundi> Might still not be implemented on purpose though
[13:07:45] <doomlord_> http://pastebin.com/hxVFw4AV
[13:08:10] <doomlord_> this worked until i tried to make it generic - i had sucessfully read the contents out 
[13:08:10] *** Quits: mib_aju9bz (Mibbit@7E217F04.2C8DBE39.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[13:08:51] *** Joins: japaric (japaric@C87928B9.6A7849D9.95AE23EB.IP)
[13:09:10] <kimundi> what worked, until you changed what?
[13:09:12] *** Quits: not_gavin (gavin@gavinsharp.com) (Input/output error)
[13:09:13] *** Quits: japaric (japaric@C87928B9.6A7849D9.95AE23EB.IP) (Quit: WeeChat 0.4.3)
[13:09:14] <doomlord_> (i started out making a 'struct Bsp { ... } ,    impl Bsp { ... get<'s>() -> &'s BspHeader {.. the same casting } ... that was ok, but i wanted to make a generic blob
[13:09:29] *** Joins: not_gavin (gavin@gavinsharp.com)
[13:09:37] *** Joins: jviereck (Adium@moz-F2E90186.ethz.ch)
[13:09:55] <kimundi> rusti: unsafe { &5 as *int as &int }
[13:09:55] -rusti- <anon>:16:18: 16:36 error: non-scalar cast: `*int` as `&int`
[13:09:55] -rusti- <anon>:16         unsafe { &5 as *int as &int }
[13:09:55] -rusti-                            ^~~~~~~~~~~~~~~~~~
[13:09:55] -rusti- error: aborting due to previous error
[13:09:56] -rusti- application terminated with error code 101
[13:10:05] <doomlord_> get<'s>(&self)  -> &'s BspHeader {  unsafe { &self.data[0] as *u8 as *BspHeader }}  << it seemed to automatically coerce the final result
[13:10:16] <kimundi> well, this tells me that it can'T have worked either way, so I'm confused :P
[13:10:32] *** Joins: japaric (japaric@C87928B9.6A7849D9.95AE23EB.IP)
[13:10:33] <doomlord_> i had somethign onscreen 5mins ago :)
[13:10:45] <kimundi> ooh... coercion does not do the same as casting, sadly
[13:11:04] <kimundi> rusti: let x: &int = unsafe { &5 as *int };
[13:11:04] -rusti- <anon>:16:23: 16:44 error: mismatched types: expected `&int` but found `*int` (expected &-ptr but found *-ptr)
[13:11:04] -rusti- <anon>:16         let x: &int = unsafe { &5 as *int };
[13:11:04] -rusti-                                 ^~~~~~~~~~~~~~~~~~~~~
[13:11:05] -rusti- error: aborting due to previous error
[13:11:05] -rusti- application terminated with error code 101
[13:11:20] <doomlord_> but its not letting me coerce when its generic; so is that it? it can coerce to a known type, but not to a generic type
[13:11:25] <doomlord_> is there a type bound that might make it work
[13:11:47] <kimundi> rusti: fn foo<'a>(a: &'a int) -> &'a int { unsafe { a as *int } }
[13:11:48] -rusti- <anon>:16:45: 16:65 error: mismatched types: expected `&'a int` but found `*int` (expected &-ptr but found *-ptr)
[13:11:48] -rusti- <anon>:16         fn foo<'a>(a: &'a int) -> &'a int { unsafe { a as *int } }
[13:11:48] -rusti-                                                       ^~~~~~~~~~~~~~~~~~~~
[13:11:48] -rusti- error: aborting due to previous error
[13:11:49] -rusti- application terminated with error code 101
[13:11:51] <doomlord_> i dont strictly need it generic.. but.. it's nice to make re-usable components :)
[13:12:40] <kimundi> doomlord_: Can't give you a answer, because I'm still confused why it worked for you at all ;)
[13:13:55] <krdln> doomlord_: casting from *T to &T should be done via &*ptr
[13:14:01] <kimundi> doomlord_: In principle, "*T as &T" for any T should either be generally impossible, or require unsafe. And in principle, everywhere where casting works should coercion work too.
[13:14:39] *** Joins: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net)
[13:14:39] <kimundi> eh, everywhere where coercion works you should also be able to do it manually with casting I mean
[13:15:04] *** Quits: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net) (Input/output error)
[13:15:08] *** Joins: IanCormac84 (User@299C0A73.2A8D8854.67DFF8B4.IP)
[13:15:13] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[13:15:18] <kimundi> But in reality, what is coercable and what is castable is currently a bunch of special cases :P
[13:15:21] *** Joins: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net)
[13:16:44] *** Joins: ventos (ventos@moz-533F284E.dip0.t-ipconnect.de)
[13:16:56] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[13:17:27] <krdln> kimundi: Isn't it true now?
[13:17:36] <huon> *T -> &T should never happen implicitly
[13:17:47] <huon> that's like... going against everything that *T means
[13:17:51] <kimundi> krdln: "But in reality, what is coercable and what is castable is currently a bunch of special cases"
[13:18:09] *** Quits: fyolnish (fyolnish@moz-49396AB9.dynamic.ppp.asahi-net.or.jp) (Client exited)
[13:18:39] <krdln> kimundi: So could you give an example of something coercible, but not castable?
[13:18:52] <kimundi> ~[T] -> &[T]
[13:18:59] <kimundi> OR ~T -> &T
[13:19:00] <doomlord_> ^^ its definitely unsafe code - perhaps it knew when it was POD ?
[13:19:41] <huon> doomlord_: what would Pod change?
[13:19:47] <krdln> kimundi: oh, that's right. thanks.
[13:19:49] <doomlord_> (its' an unsafe implementation , a safe wrapper for acessing blob contents; the lifetime is that of the entire blob)
[13:20:02] <doomlord_> did it just work by virtue of a compiler bug :)
[13:20:38] <kimundi> doomlord_: you could try `transmute<*_, &'a _>(ptr)` as reusable, restricted component ;)
[13:20:43] *** Joins: yorhel (Ayo@moz-B79AC08A.adsl.xs4all.nl)
[13:20:46] *** Quits: canhtak (canhtak@moz-805AE185.wl.t.ulaval.ca) (Quit: canhtak)
[13:20:48] <huon> doomlord_: can you give me a concrete piece of code that worked?
[13:20:49] <doomlord_> ok thanks!   &* works. But its unexpected that one can't just cast it :(
[13:20:49] <huon> kimundi: no!
[13:20:51] <huon> no transmute
[13:20:51] <kimundi> doomlord_: Might well be that it only worked because of a bug
[13:21:08] <huon> doomlord_: why? *T -> &T is a big assertion
[13:21:25] <huon> "this is a valid pointer, and there's no aliases that will mutate the data"
[13:21:34] <huon> (valid pointer to valid data)
[13:21:55] <huon> kimundi: &* is 1e10x better than transmute
[13:22:14] <kimundi> Well http://static.rust-lang.org/doc/master/std/cast/index.html seems to have no predefined one for it...
[13:22:14] <huon> so much harder to screw up
[13:22:19] <doomlord_> i'd have guessed in unsafe you can just cast things;
[13:22:24] <huon> kimundi: &*raw_ptr
[13:22:26] <kimundi> huon: Maybe, but its not what doomlord_ wanted ;)
[13:22:59] <doomlord_> http://pastebin.com/AazxhbVp  << ok so this is how its' working now, but i'll show you what worked 20mins ago aswell
[13:23:02] *** Quits: jviereck (Adium@moz-F2E90186.ethz.ch) (Quit: Leaving.)
[13:23:17] <huon> kimundi: what did doomlord_ want? coercing *T -> &T? ... the transmute doesn't solve that
[13:23:17] *** Joins: alonlevy (alon@moz-944C9098.red.bezeqint.net)
[13:23:31] *** Joins: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com)
[13:23:41] <huon> and &* is a (a) shorter and (b) safer, way of saying exactly the same thing
[13:23:51] <kimundi> doomlord_: unsafe really just lifts the restriction of using anything that has the "unsafe" property - it does not change the language beyond that
[13:24:48] <kimundi> huon: I'm confused. &*T is not the same as &T :P
[13:24:59] *** Joins: dschatzberg (dschatzber@moz-E2680405.bu.edu)
[13:25:00] <huon> kimundi: &*raw_ptr
[13:25:07] <huon> expression, not type
[13:25:12] <kimundi> what does that do?
[13:25:18] <huon> *T -> &T
[13:25:29] <huon> i.e. exactly what the transmute does
[13:25:54] <kimundi> okay, I didn'T know we have that. whats the difference to doing it manually with transmute?
[13:25:56] <huon> it's just dereferencing (the *T) and then re-referencing (as a &T)
[13:26:00] <doomlord_> i must be going mad...
[13:26:04] <kimundi> And I assume its unsafe to do?
[13:26:04] <huon> at runtime, nothing
[13:26:05] <Ms2ger> What's #[deriving(DeepClone)]?
[13:26:10] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[13:26:12] <huon> at compile time, everything
[13:26:16] <huon> well, it's safer
[13:26:17] <eddyb> kimundi: needless transmute is a sin
[13:26:18] <kimundi> huon: er, thats not the same then
[13:26:20] <doomlord_> i dont remember writing &*(...) before - i just tried what i thought i had previously - and as you suggest, it *didn't* work.
[13:26:20] <huon> as I said above
[13:26:23] <eddyb> #[deny(sin)]
[13:26:27] <krdln> kimundi: It's the same method as for transforming ~T to &T. Only difference is that *raw_ptr is unsafe, and *uniq_ptr is safe
[13:26:31] <huon> kimundi: huh??
[13:26:38] <huon> it's exactly the same
[13:26:40] <doomlord_> i wrote the previous thing yesterday, did i really forget what i wrote overnight :)
[13:26:48] <huon> except the transmute is bad style and bad practice
[13:26:57] *** Quits: nstdloop (nstdloop@moz-C7FAE86A.washdc.fios.verizon.net) (Input/output error)
[13:26:58] <doomlord_> most likely explanation is the details were different and it worked by a compiler bug
[13:27:17] <Ms2ger> Oh, and what'd Chan turn into?
[13:27:23] *** Joins: nstdloop (nstdloop@moz-C7FAE86A.washdc.fios.verizon.net)
[13:27:44] <huon> Ms2ger: deriving(DeepClone) created an impl for the (now removed) DeepClone trait
[13:27:44] <eddyb> Ms2ger: Sender/Receiver
[13:27:54] <huon> Ms2ger: and channel() to construct
[13:27:56] <eddyb> Ms2ger: and channel() to create the pair
[13:28:25] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[13:28:27] <kimundi> huon: Okay, maybe I'm confused about the deref semantic again, I assumed that &*raw would copy the raw to a temporary stack slot that then gets dereferenced, but writing it down I remember eddyb saying "deref never derefs", so thats probably wrong... :P
[13:28:36] <eddyb> ;)
[13:28:56] <huon> kimundi: yes, &*ptr points to the pointer data
[13:29:06] *** Quits: nstdloop (nstdloop@moz-C7FAE86A.washdc.fios.verizon.net) (Ping timeout)
[13:29:20] <huon> it's taking the address of the data that `ptr` pointers too
[13:29:29] <huon> s/er//
[13:29:39] <huon> let tmp = *ptr; &tmp does copy
[13:29:47] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[13:29:48] <eddyb> or &{*ptr}
[13:29:48] <huon> or &{*ptr}
[13:29:58] <sp3d> * gives an lvalue like in C
[13:29:59] * eddyb kills the echo
[13:30:10] * huon was here first ;P
[13:30:11] <yorhel> Beginner question: How do I give a stack-allocated buffer to a function accepting '&mut [u8]'? Tried doing a 'let mut buf = [0u8, ..17];' and passing '&mut buf', but that err's. (Context: http://p.blicky.net/3jsm7)
[13:30:20] <huon> yorhel: pass `buf`
[13:30:31] <doomlord_> ok well it works now.  well, continuing to explore what rust can represent... would i be able to implement . operator or something for this .. so that Blob<HEADER>    gets acess to elements of HEADER with "." directly .. like a smartpointer. At the minute i have a 'get()' 
[13:30:31] <huon> fixed length vectors coerce to &mut [] automatically
[13:30:45] <yorhel> Oh, that was too simple.
[13:30:48] <yorhel> Thanks
[13:31:02] <eddyb> doomlord_: implement Deref
[13:31:24] <kimundi> wait, [T, ..N] coerces to &mut[T] but &mut [T, ..N] doesn't? ... Thank good DST is planned and this stuff gets normalized...
[13:31:39] <eddyb> doomlord_: but don't implement DerefMut *just* yet, it will cause weird errors
[13:31:58] <doomlord_> ok. it is immutable
[13:32:02] <huon> kimundi: &mut [T, .. N] is just &mut U with U = [T, .. N]
[13:32:03] *** Joins: philix_ (felipe@moz-19A8ED5D.user.veloxzone.com.br)
[13:32:13] <huon> and no coercions happen "through" a U
[13:32:16] <huon> erm,
[13:32:22] <huon> through a &mut
[13:32:37] <kimundi> Not today, yes.
[13:32:46] <huon> even in future
[13:32:46] *** Quits: philix (felipe@moz-466D2B4D.user.veloxzone.com.br) (Ping timeout)
[13:32:50] <tfogal> huon: thanks!! got it working with your explanation+docs :-)
[13:32:59] <huon> kimundi: the coercion will be of the &mut U
[13:33:06] <eddyb> huon: &mut [T, ..N] => &mut [T] with DST
[13:33:08] <huon> not of the U inside the &mut
[13:33:12] <kimundi> In the future you can eraste the N from &mut [T, ..N] to get &mut [T]
[13:33:19] <huon> eddyb: yes, that's coercing the &mut
[13:33:24] <huon> not the contents
[13:33:29] <eddyb> your "through" was ambiguous :P
[13:33:31] *** Quits: ebalint (ebalint@moz-BFA5E762.inf.u-szeged.hu) (Input/output error)
[13:33:33] *** Joins: tigrou3tac (fabien@moz-6E2397FF.fbx.proxad.net)
[13:33:35] <huon> tfogal: :)
[13:33:49] <huon> kimundi: anyway, it is a little peculiar how that works
[13:33:57] <huon> (or doesn't work, in this case.)
[13:34:05] <eddyb> interfaces, classes, old code is meh
[13:34:22] <doomlord_> magic, thats great
[13:34:39] *** Quits: gwty (gwtypc@4B5CCF07.AA3AB44C.F44414AF.IP) (Ping timeout)
[13:36:02] *** Joins: ganitsu (ganitsu@moz-F0ADA81D.dialup.adsl.anteldata.net.uy)
[13:36:29] *** Joins: Guest_ (textual@moz-6FD8C94B.hfc.comcastbusiness.net)
[13:37:16] *** Joins: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[13:37:23] *** Joins: patpat (patpat@moz-1599AAE4.as13285.net)
[13:38:31] <doomlord_> i wonder if there's a way i can make relative pointers carry the base around , eg OWNER::deref()->ELEM_TYPE returning BlobSubElement<OWNER, ELEM_TYPE> .. with more overloads of deref and [] to acess sub element peices..
[13:38:57] *** Quits: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[13:39:14] <eddyb> doomlord_: you want multiple inheritance?
[13:39:43] <doomlord_> no; its just helper code for navigating components of a precompiled object graph loaded as one allocation
[13:39:47] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[13:39:47] *** ChanServ sets mode: +o jdm
[13:40:05] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[13:41:22] *** Joins: nszceta (nszceta@moz-E458A7C0.pharm.pitt.edu)
[13:41:48] *** Joins: canhtak (canhtak@moz-805AE185.wl.t.ulaval.ca)
[13:42:47] *** Quits: glaebhoer1 (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Quit: )
[13:42:49] *** Joins: ninechars (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[13:42:50] *** Joins: Kruppe (user@moz-253119B0.esg.uwaterloo.ca)
[13:42:52] <doomlord_> self.get(&self.vertices,i))  <<<  'get' does the relative pointer offseting at the minute,   one has to specific 'self' twice; maybe i can make 'Deref' carry self information down the expression..
[13:43:09] *** Joins: Mardak (Mardak@4851473D.BD9ECD5D.97D164AB.IP)
[13:44:30] *** Joins: ebalint (ebalint@moz-BFA5E762.inf.u-szeged.hu)
[13:44:50] <eddyb> doomlord_: why both get and vertices?
[13:44:59] <eddyb> doomlord_: why not self.vertices.get(i)?
[13:45:16] <eddyb> you have something very weird going on
[13:45:22] <doomlord_> 'vertices' is  a 'DEntry { offset:u32, size:u32}'
[13:45:34] *** Quits: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Quit: It is tiem!)
[13:45:40] <eddyb> of course, more of those unholy micro-optimizations
[13:45:49] <doomlord_> its a precompiled datastructure, just read in as one blob
[13:47:38] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[13:48:16] <doomlord_> if you have a load of immutable data... holding it in one allocation is nice IMO. one benefit is fast loading times. it was also a nice way to do things on the PS3 , where you had to DMA blocks into localstores. We dont have to deal with that in future thankfully
[13:49:21] *** Joins: bjustin (bjustin@moz-8FC28563.sierrabravo.net)
[13:49:39] <doomlord_> I guess rust macros would offer some interesting ways of declaring something to read these into propper datastructures, but i'm just exploring ..
[13:49:58] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[13:50:54] <doomlord_> actually if you have a pointer-heavy datastructure, relative pointers can be compressed, thats a big deal , especially on 64bit.. you can cluster large graphs into subgraphs where the contents have shorter links
[13:51:05] *** Quits: ebalint (ebalint@moz-BFA5E762.inf.u-szeged.hu) (Input/output error)
[13:51:09] <doomlord_> you get synergy between cache-coherency and compression
[13:51:16] <eddyb> doomlord_: what does get do?
[13:51:31] <eddyb> I don't see why you need both self.get and self.vertices
[13:51:59] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[13:52:22] <doomlord_> http://pastebin.com/BetxCQbd  <<< this is what it does at the minute
[13:53:09] <doomlord_> 'get' is an acessor for an array field relative to the blob header. the header has a relative offset to the field start
[13:53:13] *** Quits: cschneid (cschneid@moz-621ACC77.hlrn.qwest.net) (Client exited)
[13:53:35] <eddyb> doomlord_: why not encode the relative offset from the header to each DEntry?
[13:53:43] *** Quits: ventos (ventos@moz-533F284E.dip0.t-ipconnect.de) (Input/output error)
[13:53:54] <doomlord_> i didn't make the file :)
[13:53:58] <eddyb> doomlord_: so that you don't need the header to access each DEntry
[13:54:02] *** Quits: ganitsu (ganitsu@moz-F0ADA81D.dialup.adsl.anteldata.net.uy) (Quit: WeeChat 0.4.1)
[13:54:09] *** Joins: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[13:54:12] <eddyb> doomlord_: this is at the semantic level
[13:54:28] *** Joins: Houm (Houm@moz-25669AA8.fbx.proxad.net)
[13:54:29] <doomlord_> .. but i used to work this way aswell...  a pointer to a header object and relative pointers relative to the same header, not to themselves
[13:54:31] <eddyb> (I wish you kept your code clean so I could edit it)
[13:54:53] <eddyb> doomlord_: add another type param to each DEntry
[13:55:06] <doomlord_> DEntry<Owner,Element> ?
[13:55:20] <eddyb> DEntry<Element, Offset>
[13:55:26] <eddyb> encode that offset as [u8, ..N]
[13:56:10] <eddyb> so each field in BspHeader would have the type DEntry<Element, [u8, ..offset_of_field!(BspHeader, field)]>
[13:56:22] <eddyb> doomlord_: you might have to compute those offsets manually, but that looks simple
[13:56:31] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[13:56:39] <doomlord_> what i've got in mind at the minute is making a 'deref' for Header that returns SubElem<OWNER,Elem>{owner:&OWNER, elem:&Elem}  OWNER=Header.. it will carry the base ..  then impl Deref for SubElem aswell..
[13:56:50] *** Joins: ewalstad (Adium@moz-D29CADB4.lightspeed.sntcca.sbcglobal.net)
[13:57:08] <Tobba> hmm
[13:57:16] <Tobba> maybe I could actualy use stdlib in my kernel
[13:57:18] <eddyb> doomlord_: I doubt that makes sense or that will work
[13:57:27] <Tobba> if I just provide a lot of dummy POSIX crap
[13:58:08] <doomlord_> eddyb when you say 'code clean' , is it the commented out bits that confuse
[13:58:10] <Tobba> ... although I'd need weak lang items, crap
[13:58:17] <eddyb> doomlord_: no, the style
[13:59:02] *** Quits: pyrac (pyrac@8EED02EC.73C89388.AD05C589.IP) (Quit: pyrac)
[13:59:11] <eddyb> not to mention the lack of highlighting and the crappy overall look of pastebin.com
[13:59:23] <doomlord_> heh you know its taken me months to accept snake_case at all 
[13:59:36] *** Quits: ninechars (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Connection reset by peer)
[13:59:42] *** Joins: ninechars (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[14:00:11] <eddyb> doomlord_: then I'm a chameleon
[14:00:29] <eddyb> quick to learn new things, but not very efficient as using the knowledge I have :/
[14:00:30] *** Joins: jviereck (Adium@moz-F2E90186.ethz.ch)
[14:00:37] <doomlord_> i'll try throwing it on Gist. 
[14:00:59] *** Joins: gwty (gwtypc@8B0C96F5.439CEDBD.F44414AF.IP)
[14:01:03] <doomlord_> well i like to learn but i dont switch preferences easily :) i'm stubborn
[14:01:44] <eddyb> 8 space tabs make code unreadable, so does any inconsistency
[14:01:55] <doomlord_> yeah i want 4, i'm trying gist
[14:02:15] <eddyb> use spaces :P
[14:02:32] <doomlord_> i wish github would have language dependant tabs
[14:02:47] <eddyb> (or configurable)
[14:03:01] <Ms2ger> Wait
[14:03:02] <Ms2ger> Wait
[14:03:24] <Ms2ger> Does channel() return port/chan in the opposite order from Chan::new?
[14:03:41] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[14:03:51] <eddyb> Ms2ger: nobody knew what order port/chan came it or even which was rx and which was tx
[14:04:03] <eddyb> Ms2ger: so you have like no right to complain :P
[14:04:07] <Ms2ger> fn new() -> (Port<T>, Chan<T>)
[14:04:11] <Ms2ger> pub fn channel<T: Send>() -> (Sender<T>, Receiver<T>)
[14:04:48] <doomlord_> https://gist.github.com/dobkeratops/9686969 <<< eddyb, spacified
[14:05:14] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.3)
[14:06:29] <doomlord_> i could make a nice macro for 'get' , get!{self.vertices[index]} ...
[14:06:44] *** Joins: aravindavk (aravinda@4851891C.5EC44BB6.4781A82F.IP)
[14:07:27] <eddyb> did you hear what I said :)?
[14:07:47] *** Joins: Leo`_ (Mibbit@moz-1D3002ED.rev.sfr.net)
[14:07:57] <kimundi> Heh, with my Iterable design I can do `let array = [1, 2, 3]; let v: Vec<&int> = array.collect();`
[14:08:13] <eddyb> maybe we should rename collect
[14:08:22] <Leo`_> is there a simple way in libsyntax to get a Parser from a &[TokenTree] ?
[14:08:24] <kimundi> why?
[14:08:25] <eddyb> or... not
[14:08:33] <Ms2ger> Where'd std::rand go?
[14:08:38] <eddyb> Ms2ger: librand
[14:08:47] <eddyb> Leo`_: have you looked in parser/mod.rs?
[14:08:59] *** Joins: sw17ch (sw17ch@moz-675AFBCF.hsd1.mi.comcast.net)
[14:09:02] <Leo`_> yay i've been browsing the doc for 20 min.
[14:09:10] <kimundi> Ms2ger: Everytime you loos a module in the last few weeks, chanches are it got its own crate ;)
[14:09:19] <Ms2ger> Yeah
[14:09:21] <Leo`_> the Parser asks for something that impls Reader
[14:09:24] <eddyb> Leo`_: docs? for libsyntax? lol
[14:09:26] *** Quits: jviereck (Adium@moz-F2E90186.ethz.ch) (Quit: Leaving.)
[14:09:39] <doomlord_> eddyb i can see one could implement a relative pointer quite happily with Deref - i'll definitely have one of those for my own purposes elsewhre
[14:09:43] <eddyb> Leo`_: parse/mod.rs has the constructors
[14:09:45] <Leo`_> there are functions that return Readers from a Vec<TokenTree>
[14:09:52] <Ms2ger> jdm, in case you didn't realize from the backscroll, I'm having fun with a rust upgrade :)
[14:09:56] <Leo`_> but not from &[TokenTree]
[14:10:02] <jdm> ooh
[14:10:03] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[14:10:08] *** Joins: erickt_ (etryzelaar@49C4075F.3AC15C18.2321E71E.IP)
[14:10:11] <eddyb> doomlord_: you can't return anything other than a reference with Deref
[14:10:18] <eddyb> Leo`_: it needs ownership
[14:10:50] <Leo`_> eddyb: yes but syntax extensions are invoked with a &[TokenTree] :(
[14:10:57] <doomlord_> it wouldn't work for this specific file, but a relative pointer would have the offset relative to *itself*, it could return a reference quite hapily i think?
[14:11:22] <eddyb> Leo`_: you need to clone it to parse it again
[14:11:33] <Leo`_> mhhh
[14:11:42] <huon> Ms2ger: upgrading servo again, already?
[14:11:46] <Leo`_> this sounds costly
[14:11:46] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[14:11:50] <eddyb> doomlord_: I mean, Deref<T>::deref returns &T, not T
[14:11:54] <doomlord_> thats fine
[14:11:56] <eddyb> doomlord_: you can't return a custom wrapper
[14:12:00] <eddyb> which you want AFAICT
[14:12:01] <doomlord_> ahhh ok
[14:12:06] <Ms2ger> huon, yeah, the one that landed earlier this week was a rust from 25 Feb or so
[14:12:19] * eddyb puts the cluebat in a more accessible place
[14:12:20] <Leo`_> eddyb: copying the whole AST looks slow
[14:12:26] <Ms2ger> huon, that's how long it takes to upgrade :)
[14:12:30] <doomlord_> right so Deref can't do my earlier 'SubElem' idea, ok.  (but it could do a relative pointer, relative to itself)
[14:12:32] <eddyb> Leo`_: each folding pass copies the entire crate :P
[14:12:39] <eddyb> Leo`_: token trees are cheaper than other things ;)
[14:12:46] <Leo`_> oh
[14:12:48] <Leo`_> ok.
[14:12:51] <eddyb> doomlord_: waaaait a second
[14:12:53] <Leo`_> I will do that then
[14:13:05] <Leo`_> libsyntax is cool.
[14:13:11] <o11c|interview> doomlord_: relative pointer can't work
[14:13:20] <huon> Ms2ger: woah
[14:13:27] <o11c|interview> doomlord_: because the pointer itself might move without warning
[14:13:41] <doomlord_> for blobs they work, the idea is immutable data.
[14:13:53] <doomlord_> a precompiled object graph
[14:13:58] <Leo`_> hum by the way
[14:14:05] <Leo`_> http://static.rust-lang.org/doc/master/syntax/ext/tt/transcribe/fn.new_tt_reader.html what is the second parameter here ?
[14:14:38] *** Joins: jviereck (Adium@moz-F2E90186.ethz.ch)
[14:14:38] <huon> Leo`: check the source
[14:14:47] <huon> but I think that's the $foo things
[14:14:49] <doomlord_> https://gist.github.com/dobkeratops/9687136  <<< i'll try and make this for Rust
[14:14:56] <Leo`_> huon: the what ?
[14:15:07] *** Quits: erickt_ (etryzelaar@49C4075F.3AC15C18.2321E71E.IP) (Quit: leaving)
[14:15:08] <doomlord_> 'OffsetPtr' aka 'relative_ptr' .. whatever you'd call it..
[14:15:12] <huon> Leo`_: macro_rules! foo ( ($this_thing: expr) => { ... } )
[14:15:19] <Leo`_> hum
[14:15:21] *** Joins: tom1 (tom@moz-EEA4C0D9.lsanca.fios.verizon.net)
[14:15:23] <Leo`_> I see
[14:15:29] <Ms2ger> What happened to url::Url?
[14:15:31] <eddyb> Leo`_: why are you touching tt?
[14:15:35] <eddyb> Ms2ger: liburl?
[14:15:39] <huon> Ms2ger: librurl?
[14:15:47] <Ms2ger> Oh
[14:15:49] <eddyb> Leo`_: I'm pretty sure tt is for macro_rules!
[14:15:51] <Ms2ger> url.rs:8 use url::Url;
[14:16:04] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[14:16:05] <huon> doesn
[14:16:09] <doomlord_> Building these things i used to have buffer classes which are predetermined capacity, so they dont move when you 'push_back' new objects into them.. 
[14:16:10] * Ms2ger tries ::url::Url
[14:16:12] *** Quits: jviereck (Adium@moz-F2E90186.ethz.ch) (Quit: Leaving.)
[14:16:13] <huon> 't servo have a better liburl?
[14:16:13] <Leo`_> eddyb: hum, I want a Parser
[14:16:19] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Client exited)
[14:16:20] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[14:16:22] <eddyb> Leo`_: I told you in what file to look
[14:16:24] <Ms2ger> No, doesn't work
[14:16:25] <Leo`_> eddyb: creating a Parser takes a Reader
[14:16:26] <huon> Leo`_: syntax::parser
[14:16:33] <huon> erm, syntax::parse
[14:16:40] <doomlord_> start with raw linkedlist data -> cluster it into known sizes  -> assemble the clusters into blobs (internally using relative pointers)
[14:16:41] <Leo`_> eddyb: so I looked at the implementations of Reader
[14:16:46] <Leo`_> and found TtReader
[14:16:57] <huon> see, e.g. syntax::ext::base::exprs_from_tts (or something like that)
[14:16:58] <eddyb> oh, right, sorry
[14:16:59] <Ms2ger> huon, any way I can use formerly-libextra url::Url in my url.rs?
[14:17:03] *** Quits: tom1 (tom@moz-EEA4C0D9.lsanca.fios.verizon.net) (Ping timeout)
[14:17:07] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[14:17:29] <eddyb> Leo`_: transcribe expands macro_rules! macros
[14:17:38] <Leo`_> ok
[14:17:44] <Leo`_> that's not what I want
[14:17:53] <eddyb> doomlord_: https://gist.github.com/eddyb/9687031#file-gistfile1-rs-L41-L58
[14:17:53] <huon> Ms2ger: add extern crate url to https://github.com/mozilla/servo/blob/master/src/components/util/util.rs ?
[14:18:04] *** Quits: nical (nico@87C1F78E.1DE10CA8.D8E68FF6.IP) (Client exited)
[14:18:04] <Leo`_> I just have a &[TokenTree] that contains... arbitrary thing
[14:18:07] <eddyb> doomlord_: those are the only lines I've changed
[14:18:12] <Leo`_> and I'd like to use the functions of Parser over it
[14:18:34] <Leo`_> http://static.rust-lang.org/doc/master/syntax/parse/fn.new_parser_from_tts.html
[14:18:35] <Leo`_> oh
[14:18:37] <Leo`_> this looks good
[14:18:54] <eddyb> Leo`_: told you to look in that file :P
[14:19:13] <Leo`_> didn't see this one at first
[14:19:17] <Leo`_> hm
[14:19:21] <Leo`_> In fact I saw it
[14:19:39] <Leo`_> but I was still optimistically thinking I could avoid copying my &[TokenTree] into a Vec
[14:19:52] <doomlord_> eddyb, ah, so you're suggesting the DEntries themselves encode where they are in the header, as compile time info in that second param
[14:19:59] <eddyb> doomlord_: yes
[14:20:08] <Leo`_> but doesn't matter
[14:20:10] <Leo`_> i'll copy :p
[14:20:17] <doomlord_> ok that makes sense, i guess the whole thing could be declared with a neat macro aswell
[14:20:19] <Ms2ger> slice::from_fn(new_bucket_count, |_| None);
[14:20:31] <eddyb> Ms2ger: Vec::from_fn
[14:20:44] <huon> Ms2ger: what's the problem with that line?
[14:20:45] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Client exited)
[14:20:49] <eddyb> Leo`_: for code size reasons we can't make Parser generic
[14:20:55] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[14:20:56] <Ms2ger> Don't we have anything better than |_| None?
[14:20:57] <huon> (unless you're trying to remove uses of ~[]?)
[14:21:01] <Leo`_> eddyb: I see
[14:21:07] <huon> nope
[14:21:15] <Ms2ger> Fun
[14:21:29] <eddyb> Leo`_: so it has that token Reader as a trait object. a ~Reader to be specific. we still can't put lifetime into it, so it can't borrow (safely) anything, it has to own
[14:21:30] <Ms2ger> So
[14:21:39] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Client exited)
[14:21:46] <Ms2ger> I've got extern crate url; in util/util.rs
[14:21:52] <Ms2ger> use url; in url.rs
[14:22:01] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[14:22:04] <eddyb> shouldn't "extern crate foo;" be in the crate root?
[14:22:04] <Ms2ger> Using url::Url gives error: use of undeclared type name `url::Url`
[14:22:10] <Leo`_> eddyb: okok
[14:22:18] <doomlord_> eddyb .. using [u8,..N]  as a workaround for ints in typesystem ? :)
[14:22:19] <Leo`_> eddyb: anyway my ASTs shouldn't be very big
[14:22:19] *** Joins: vikstrous (v@13F2CEC5.7672369.D8E68FF6.IP)
[14:22:26] <eddyb> unless util.rs is the crate root
[14:22:26] <Ms2ger> eddyb, that should be the crate root?
[14:22:34] <eddyb> Ms2ger: awful file name :P
[14:22:36] <Leo`_> eddyb: but I found the libsyntax API quite messy... but still fun and cool to use :P
[14:22:38] <eddyb> Leo`_: token tree != AST
[14:22:42] <olsonjeffery> rust is pretty much the greatest thing ever.
[14:22:44] <olsonjeffery> that is all.
[14:22:45] <Ms2ger> eddyb, yes
[14:22:53] <eddyb> doomlord_: yes, works very well
[14:22:55] <olsonjeffery> (also that monad macro abusing the match syntax is awesome)
[14:22:55] <Leo`_> eddyb: ?
[14:23:11] <eddyb> Leo`_: AST is (much) higher level than a token tree
[14:23:15] *** Joins: mye (mye@moz-A8B75C5E.dip0.t-ipconnect.de)
[14:23:20] <Leo`_> eddyb: hum yep
[14:23:29] <Leo`_> eddyb: of course
[14:23:30] <huon> eddyb: servo uses crate_name.rs as the crate roots
[14:23:41] <eddyb> huon: confusing!
[14:23:42] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[14:23:55] <huon> Ms2ger: check the docs to see if Url is still in url?
[14:24:02] <Ms2ger> Also lib.rs, mod.rs, hubbub.rc
[14:24:09] <Ms2ger> http://static.rust-lang.org/doc/master/url/struct.Url.html says yes?
[14:24:19] <huon> weird
[14:24:28] <doomlord_> in this particular case i can clean up where i do 'get' (put it on the dentry as a method taking owner ptr) and a macro acessor works ok for me ... its easier to declare
[14:24:33] <huon> Ms2ger: oh!
[14:24:38] <Ms2ger> No more #[deriving(TotalOrd)]?
[14:24:40] <huon> I know
[14:24:44] <Ms2ger> Tell me!
[14:24:49] <eddyb> doomlord_: I feel like my "hack" is saner
[14:24:50] <doomlord_> hmmm, ok but encoding the info in the header is less error prone for users..
[14:24:53] <huon> Ms2ger: the problem is the `mod url` is shadowing the extern crate url
[14:24:57] <doomlord_> everyone feels their hack is saner :)
[14:25:05] <huon> Ms2ger: so the `use url::...` is trying to import from url.rs
[14:25:11] <Ms2ger> Right
[14:25:15] *** Quits: Axord (xord@moz-BC8E2FBC.static.rvsd.ca.charter.com) (Quit: I'm sure it's perfectly safe)
[14:25:34] <eddyb> doomlord_: you can add a marker to make DEntry non-copyable
[14:25:39] <huon> Ms2ger: `extern crate rust_url = "url"` and import from rust_url
[14:25:50] <doomlord_> interesting..
[14:25:57] *** Joins: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca)
[14:26:06] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[14:26:23] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[14:26:59] <doomlord_> i can see there would be many benefits to making macros for fileformat declarations; one could easily make something that declares the blob layout, but also makes a mirror of the structure with dynamic allocations
[14:27:13] <doomlord_> (HKT would do that better later?)
[14:27:23] *** Quits: aravindavk (aravinda@4851891C.5EC44BB6.4781A82F.IP) (Ping timeout)
[14:27:44] <Ms2ger> huon, #[deriving(TotalOrd)] pub enum ProfilerCategory { ... } is no good?
[14:28:11] <huon> rusti: #[deriving(TotalOrd)] enum Foo { A, B }
[14:28:11] -rusti- pastebinned 6 lines of output: http://sprunge.us/HOcX
[14:28:16] *** Quits: kris (kris@moz-147EE6DF.diku.dk) (Ping timeout)
[14:28:24] <huon> rusti: #[deriving(TotalOrd, TotalEq)] enum Foo { A, B }
[14:28:25] -rusti- pastebinned 6 lines of output: http://sprunge.us/cBcg
[14:28:36] <doomlord_> struct BspHeader<COLLECTION> {      planes: COLLECTION<Plane>, vertices:COLLECTION<Vertices>, faces:COLLECTION<Faces> ... etc}
[14:28:39] <eddyb> huon: don't you need Ord and Eq?
[14:28:41] <huon> rusti: #[deriving(TotalOrd, TotalEq, Eq)] enum Foo { A, B }
[14:28:42] -rusti- pastebinned 6 lines of output: http://sprunge.us/OHah
[14:28:46] <Ms2ger> Oh
[14:28:52] <doomlord_> COLLECTION = RelativeVector for blob,    Vec for dynamic manipulation ..
[14:28:53] <Ms2ger> I wasn't reading the error
[14:28:57] <huon> rusti: #[deriving(TotalOrd, TotalEq, Eq, Ord)] enum Foo { A, B }
[14:28:57] -rusti- ()
[14:28:59] <Ms2ger> failed to find an implementation of trait std::cmp::Ord
[14:29:01] <huon> eddyb: seems so, yes
[14:29:02] <doomlord_> but do that all with macros now..
[14:29:12] <Ms2ger> D'oh
[14:29:14] <eddyb> doomlord_: that's... a bit ridiculous
[14:29:17] <Ms2ger> Sorry
[14:29:24] <eddyb> doomlord_: supporting more than one format with one structure, that is
[14:29:25] <huon> Ms2ger: I heard rumours that compiler errors sometimes help diagnose problems :P
[14:29:28] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[14:29:39] <Ms2ger> No more data.iter().min() on [f64], eh
[14:29:40] <huon> I also heard rumours that #rust is better
[14:29:55] <huon> .min_by
[14:30:04] <huon> with a f64 comparator function
[14:30:18] <huon> such a function would be useful for sorting too
[14:30:23] <Ms2ger> Got a good one? :)
[14:30:27] <huon> if you every sort [f64]'s
[14:30:54] <huon> cast::transmute::<f64, i64>(x).cmp(&cast::transmute::<f64, i64>(y))
[14:31:04] <Ms2ger> Sounds good
[14:31:05] *** Joins: Axord (xord@moz-BC8E2FBC.static.rvsd.ca.charter.com)
[14:31:10] <huon> not 100% sure that's correct
[14:31:20] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[14:31:23] <Ms2ger> Hrm, that's not what min_by does
[14:31:42] <Ms2ger> |x| cast::transmute::<f64, i64>(x), I guess
[14:31:57] *** Quits: ChrisOei (ChrisOei@moz-30D80888.hsd1.ca.comcast.net) (Ping timeout)
[14:32:01] <huon> oh, ok
[14:32:21] <huon> (it's `unsafe`... could define a safe f64_to_i64 wrapper)
[14:32:51] <Ms2ger> (**x)
[14:33:21] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Client exited)
[14:33:23] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[14:33:30] *** Joins: pyrac (pyrac@moz-C9C1E431.math.u-bordeaux1.fr)
[14:33:33] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[14:33:35] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[14:33:58] *** Quits: avsej (avsej@D9A610B8.4841F515.FB33447D.IP) (Client exited)
[14:33:58] *** Quits: ahunt (ahunt@moz-6D6D79D6.cable.virginm.net) (Ping timeout)
[14:34:20] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Client exited)
[14:34:51] *** Joins: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net)
[14:35:47] <doomlord_> eddyb not at all... it was very common to move between basically the same object but with a dynamic representation for processing it, then fixing it into an efficient representation for runtime
[14:36:10] <eddyb> doomlord_: you live in a strange world
[14:36:39] *** Quits: jvoorhis (jvoorhis@moz-930B7923.ptld.qwest.net) (Ping timeout)
[14:36:49] <doomlord_> we had to keep the same structures in sync between preprocesssor tools and runtimes. the runtimes had to be absolutely minimal
[14:36:58] *** Joins: aravindavk (aravinda@4851891C.5EC44BB6.4781A82F.IP)
[14:37:02] *** Quits: aravindavk (aravinda@4851891C.5EC44BB6.4781A82F.IP) (Quit: aravindavk)
[14:37:19] <doomlord_> fileformats in the middle... a point of failiure (did you update the tools and the runtime.. )
[14:38:18] <doomlord_> Rust macros would have streamlined a lot of that.
[14:39:53] *** Quits: Mardak (Mardak@4851473D.BD9ECD5D.97D164AB.IP) (Ping timeout)
[14:40:23] *** Quits: pyrac (pyrac@moz-C9C1E431.math.u-bordeaux1.fr) (Ping timeout)
[14:40:33] <doomlord_> not only a point of failiure but a point of conflict in teams ... usually these were different job titles. "tools programmer" writes the format... "engine programmer" reads the format. fights ensue :)   personally i never liked that divide, crappy management IMO
[14:40:48] *** Joins: ChrisOei (ChrisOei@moz-4A811643.mycingular.net)
[14:40:52] *** Joins: philix (felipe@4BFF164F.661F4D81.648674BD.IP)
[14:41:16] *** Quits: philix_ (felipe@moz-19A8ED5D.user.veloxzone.com.br) (Ping timeout)
[14:41:24] *** Joins: daschl (Adium@moz-DC6DE6E2.vie.surfer.at)
[14:41:45] *** Joins: Mardak (Mardak@4851473D.BD9ECD5D.97D164AB.IP)
[14:44:05] <huon> Ms2ger: btw, the transmutes are incorrect
[14:44:05] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[14:44:42] <Ms2ger> huon, ha
[14:45:26] *** Joins: pyrac (pyrac@moz-C9C1E431.math.u-bordeaux1.fr)
[14:45:58] <Ms2ger> huon, got something better?
[14:46:29] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[14:46:49] <huon> there's always `if x < y {Less} else if x == y {Equal} else {Greater}`... but that doesn't really solve the .min_by problem
[14:47:26] *** Joins: io2 (io2@moz-EE406A5.home.otenet.gr)
[14:47:29] *** Quits: valentin (Thunderbir@4F2F9D91.E06BF678.B9540FE1.IP) (Quit: valentin)
[14:48:07] <strcat> just write alternate ones using the min/max defined on Float
[14:48:23] <strcat> it's already done correctly in stats
[14:48:28] <Ms2ger> Anyway, need to get going
[14:48:33] <Ms2ger> I'll look at it later
[14:48:39] <Ms2ger> Thanks for all the help
[14:48:55] *** Joins: khodzha (khodzha@66787691.EF9FA30D.CA6E2165.IP)
[14:50:37] *** Quits: Ms2ger (Ms2ger@6BCD8197.DF5CCC78.F15B0BB3.IP) (Ping timeout)
[14:51:25] *** Quits: pyrac (pyrac@moz-C9C1E431.math.u-bordeaux1.fr) (Ping timeout)
[14:52:01] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[14:52:32] *** Quits: ChrisOei (ChrisOei@moz-4A811643.mycingular.net) (Ping timeout)
[14:52:32] *** Quits: bjustin (bjustin@moz-8FC28563.sierrabravo.net) (Connection reset by peer)
[14:52:38] *** Joins: pyrac (pyrac@moz-C9C1E431.math.u-bordeaux1.fr)
[14:52:48] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[14:53:45] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.3)
[14:54:27] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[14:54:48] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[14:55:13] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[14:55:16] *** Quits: Zr40 (zr40@EE4BB9F5.926C319A.BE2F4011.IP) (Quit: leaving)
[14:55:22] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Quit: Leaving.)
[14:56:25] *** Joins: bollu (bollu@31CCE710.7065DDB9.6D6A344F.IP)
[14:56:31] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[14:56:34] <bollu> Question - how do I force an exit in rust?
[14:56:45] <bollu> like, exit(0) ?
[14:56:53] <eddyb> bollu: it's a bad idea in general
[14:57:00] <eddyb> because destructors don't run
[14:57:15] <bollu> eddyb: this is kind of a "I have to idea wtf I'm supposed to do. welp!" kind of situation
[14:57:34] <eddyb> why do you want to exit?
[14:58:11] <kimundi> bollu: You simply let the main function end
[14:58:13] *** Quits: zztr (Thunderbir@moz-CA50D606.dsl.static.sonic.net) (Quit: zztr)
[14:58:19] <bollu> kimundi: :)
[14:58:41] <bollu> eddyb: when the resource loader can't load stuff. I know, I know, implement better error handling >_>
[14:58:52] <kimundi> fail!() then
[14:58:59] <bollu> kimundi: thanks
[14:59:08] *** Joins: brson (brson@moz-62518563.mtv2.mozilla.com)
[14:59:08] *** ChanServ sets mode: +ao brson brson
[14:59:21] <eddyb> I dismiss the idea of bollu having done anything significant in rust without using failure
[14:59:38] <bollu> eddyb: xD
[14:59:55] <kimundi> eddyb: Well, triggering failure is not the same as knowing about it and invoking it :)
[15:00:19] <bollu> kimundi: I did trigger a segfault. once
[15:00:31] <kimundi> bollu: Real segfault?
[15:00:36] *** Joins: benjamin_____ (benjamin@moz-9D949A92.dip0.t-ipconnect.de)
[15:00:45] *** Quits: Leo`_ (Mibbit@moz-1D3002ED.rev.sfr.net) (Quit: http://www.mibbit.com ajax IRC Client)
[15:00:55] *** Quits: Guest_ (textual@moz-6FD8C94B.hfc.comcastbusiness.net) (Quit: Textual IRC Client: www.textualapp.com)
[15:00:58] <bollu> kimundi: yeah, it printed a lovecraft paragraph and segfaulted
[15:01:08] <bollu> kimundi: I think aatch filed the bug report
[15:01:10] <kimundi> Ah, a runtime failure then
[15:01:14] *** Quits: benjamin_ (benjamin@moz-8733F881.dip0.t-ipconnect.de) (Ping timeout)
[15:01:14] *** Quits: khodzha (khodzha@66787691.EF9FA30D.CA6E2165.IP) (Ping timeout)
[15:01:20] <kimundi> abort I eman
[15:01:23] *** Quits: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net) (Ping timeout)
[15:01:28] *** Joins: zimbatm_ (zimbatm@moz-D4F596B.cable.virginm.net)
[15:02:11] <bollu> kimundi: I think aatch filed the bug report
[15:02:15] <bollu> whoops. 
[15:02:18] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[15:03:23] *** Joins: jviereck (Adium@moz-F2E90186.ethz.ch)
[15:03:31] *** Joins: ChrisOei (ChrisOei@moz-4A811643.mycingular.net)
[15:03:35] *** Quits: zimbatm_ (zimbatm@moz-D4F596B.cable.virginm.net) (Connection reset by peer)
[15:03:44] *** Quits: jviereck (Adium@moz-F2E90186.ethz.ch) (Client exited)
[15:03:55] *** Joins: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net)
[15:04:33] *** Joins: erickt (etryzelaar@49C4075F.3AC15C18.2321E71E.IP)
[15:04:52] <bollu> data Wire e m a b     Why u no use descriptive names? :( 
[15:05:26] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[15:05:26] <huon> because they don't need descriptive names... normally
[15:05:42] <bollu> huon: sure, for trivial stuff. but this is just silly
[15:05:54] <huon> where do you see this type?
[15:06:27] <bollu> Wire library. I've been reading up on FRP
[15:06:31] <huon> a & b are almost certainly some sort of input and output types
[15:07:29] <bollu> I'm probably overengeneering like crazy but I'd like to use this - the lack of a void* has me searching for alternatives
[15:07:52] *** Quits: Rym (y@B9974C6D.8A65FA57.8772DA20.IP) (Ping timeout)
[15:08:00] *** Quits: tulloch (tulloch@2A036BF4.7B33B9A1.EFF8B7BF.IP) (Ping timeout)
[15:08:10] <bollu> huon: and yes, a is input but b is ouput. how'd you know?
[15:08:31] <huon> convention is a wonderful thing
[15:08:46] <huon> and e is error, m is a monad (HKT) type
[15:09:11] <bollu> huon: :D didn't know that. that's really awesome. even so, it feels weird to see single letter variable names
[15:09:20] <bollu> huon: what are my chances of replicating this in rust?
[15:09:35] <huon> (those two were by checking the source for the netwire library... don't know if that's the one you're looking at.)
[15:09:39] <huon> small?
[15:09:56] <benh> The problem with monad transformers is that they're only marginally, if any, more understandable with everything spelled out and very descriptive ;)
[15:09:59] <huon> in particular, it uses closures heavily
[15:09:59] <huon> and our closures are not good
[15:10:10] <huon> (good for this)
[15:10:24] <bollu> huon: I mean, FRP in general. and I didn't know that about rust's closures
[15:10:47] <bollu> my god, it seems impossible to write a generalized collision handler
[15:11:26] <huon> I think most FRP implementations will meet with closure problems
[15:11:34] <tiffany> I think implementing FRP in rust would be dramatically easier with HKT and owned closures
[15:11:44] <huon> ... well I guess you could use ~Trait's a lot
[15:11:53] <huon> but it'll be struct&impl-y
[15:12:02] <huon> i.e. really verbose
[15:12:03] <tiffany> oh right, I forgot about that
[15:12:12] <tiffany> yuck
[15:12:46] <huon> ( http://www.reddit.com/r/rust/comments/20yhm9/request_for_explanation_the_deprecation_of/cg80ax8 example of replacing closures with the struct equivlent)
[15:12:47] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[15:12:55] <bollu> huon: I'm seriosly out of my comfort zone with FRP. But it seems to be a really nice system of expression. 
[15:13:33] *** Joins: cschneid (cschneid@moz-CA025D57.ip.mcleodusa.net)
[15:13:43] <tiffany> when we get DST will owned closures be possible again?
[15:13:58] <tiffany> it seems like a closure/proc is simply an unsized type
[15:13:59] <huon> they're possible now
[15:14:03] <huon> not related to DST
[15:14:06] *** Quits: erickt (etryzelaar@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[15:14:23] <huon> closures and procs are sized types, they have an unsized environment
[15:14:30] <eddyb> tiffany: only if you model them as trait objects
[15:14:35] <eddyb> which you can if you have VG
[15:14:35] <tiffany> manually implemented closures hardly qualify as such
[15:14:43] <tiffany> and yeah, environment is what I meant
[15:14:44] <huon> eddyb: you can do it without VG too
[15:14:55] <huon> it's just uglier
[15:14:57] <eddyb> not sanely and nicely
[15:15:00] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:15:00] <bollu> eddyb, huon, tiffany : any ideas on how to design a collision handler like system? 
[15:15:13] <eddyb> bollu: think outside the box
[15:15:15] <huon> #[lang="fn0"] #[lang="fn1"]
[15:15:18] <huon> eetc.
[15:15:22] *** Quits: ChrisOei (ChrisOei@moz-4A811643.mycingular.net) (Ping timeout)
[15:15:25] <huon> which is sane, but not nice.
[15:15:31] <huon> (slightly sane)
[15:15:37] <eddyb> slightly less
[15:15:40] <bollu> eddyb: I'm trying to read everything I can get my hands on, but there seem to be no "neat" solutions
[15:15:42] *** Joins: ChrisOei (ChrisOei@moz-4A811643.mycingular.net)
[15:15:46] <eddyb> bollu: as in, don't take entire concepts from other languages
[15:15:58] <tiffany> you wouldn't need variadic generics if rust had currying
[15:16:02] <eddyb> bollu: you can reuse optimization techniques, but try to start with idiomatic Rust building blocks
[15:16:02] *** Joins: jviereck (Adium@moz-42E51C3B.ethz.ch)
[15:16:04] <eddyb> tiffany: pls no
[15:16:20] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[15:16:24] *** Quits: jeaye (jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Ping timeout)
[15:16:35] <eddyb> currying doesn't really work in a non-purely-functional language
[15:16:35] <huon> tiffany: I'm not 100% sure that helps
[15:16:42] <bollu> eddyb: AFAIK FRP is not "tied" to haskell in any way right? 
[15:16:51] <tiffany> bollu: it is not
[15:16:57] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[15:17:00] <tiffany> there's other languages with frp, such as elm
[15:17:02] <eddyb> I actually want a HKT without currying
[15:17:16] <huon> tiffany: in particular, you end up with extra closures everywhere
[15:17:24] <benh> Isn't elm basically haskell sold to web programmers
[15:17:34] *** Joins: Doppp (Doppp@moz-553020DA.hfc.comcastbusiness.net)
[15:17:35] <tiffany> kind of yes
[15:17:48] <tiffany> there's also frp implemented in javascript, but it loses the magic when implemented in a dynamic type system
[15:17:49] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[15:17:53] <bollu> huon: (very naieve question) can't you maintain the environment by hand?
[15:17:58] <bollu> naive*
[15:18:17] <bollu> huon: like, why does FRP => closures?
[15:18:19] *** Joins: khodzha (khodzha@4D2BECD3.71D0B9BF.E8ACC090.IP)
[15:18:33] *** Quits: daschl (Adium@moz-DC6DE6E2.vie.surfer.at) (Quit: Leaving.)
[15:18:34] *** Quits: lpy (lpy@8B40CDAC.F09091A8.1348A864.IP) (Ping timeout)
[15:18:43] <huon> bollu: you can maintain the enviroment by hand
[15:18:43] <tiffany> bollu: because that defeats the purpose of frp in the first place
[15:18:54] *** Joins: erickt (etryzelaar@49C4075F.3AC15C18.2321E71E.IP)
[15:19:05] <tiffany> the idea is that you can lift a function from a functionally pure transform into a signal easily
[15:19:07] <huon> bollu: https://botbot.me/mozilla/rust/msg/12401978/ 
[15:19:17] <huon> "i.e. really verbose"
[15:19:24] *** Quits: ChrisOei (ChrisOei@moz-4A811643.mycingular.net) (Ping timeout)
[15:19:57] <tiffany> it's not very useful when it's 10x as verbose than necessary
[15:20:06] <huon> yeah
[15:20:30] <huon> I assume bollu is more interested in the concepts than making a truly usable library at this point, though
[15:20:37] <bollu> huon: yeah
[15:20:39] <huon> (of course, the verbosity will obscure the concepts)
[15:20:55] <huon> but... macros can save the day
[15:20:58] <huon> maybe
[15:21:05] <bollu> huon: any tangentially related concepts that I may need to check out?
[15:21:55] <huon> I've never actually done any FRP ;P
[15:21:57] <eddyb> "String.all Char.isDigit s" elm is so funky
[15:21:58] <pauls> huon: I keep trying to tell that to the network executives, but for some reason, no one ever picks up my TV show.
[15:22:56] <huon> pauls: macro-man! fighting disease with hygiene
[15:23:15] <huon> eddyb: looks pretty similar to haskell :P
[15:23:31] <bollu> huon: I'm trying to use my DSP knowledge to FRP. It's succeeding so far. They seem to have bastardised much of the terminology though
[15:24:10] *** Joins: jeaye (jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[15:24:13] <eddyb> huon: methods being called like that... it's just past silly
[15:24:31] *** Joins: tulloch (tulloch@2A036BF4.7B33B9A1.EFF8B7BF.IP)
[15:24:47] <tiffany> how do DSPs apply to FRP?
[15:24:55] <huon> eddyb: methods?
[15:24:56] <tiffany> DSPs are focused around pipelining where as FRP is all dataflow
[15:24:56] *** Joins: gregburd (uid3997@moz-E77DEB21.irccloud.com)
[15:24:57] <eddyb> s.all Char.isDigit would make slightly more sense. s.all(c => c.isDigit) makes most sense
[15:25:15] <huon> eddyb: since were they methods?
[15:25:23] *** Quits: alinab (alina@moz-94EAE39D.alinab.org) (Quit: leaving)
[15:25:24] *** Quits: reverend_paco (chatzilla@moz-FDBE15EC.hsd1.ma.comcast.net) (Ping timeout)
[15:25:30] <benh> eddyb: that's a very oop-biased perspective
[15:25:56] <eddyb> huon: well, they are used like methods, in JS-compatible context. nevermind, I guess
[15:26:02] <benh> all isDigit s seems more readable to me than that explicit lambda
[15:26:22] <eddyb> benh: I was referring to the explicit String and Char
[15:26:23] <huon> eddyb: some would argue that methods are just used like normal functions
[15:26:31] <huon> they're just namespaces
[15:26:36] <eddyb> yeah, I got confused
[15:26:43] <huon> I would guess (having never used elm) that one can import from them
[15:27:07] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Client exited)
[15:27:35] <eddyb> now I'm curious what (Maybe.maybe "" id) does
[15:27:54] <whitequark> huon: what about vtables?
[15:28:08] <huon> whitequark: for methods?
[15:28:11] <whitequark> yeah
[15:28:22] <huon> that's no inherent to the idea of a "method"
[15:28:34] *** Joins: pczarn (pczarn@moz-69A55FA.izacom.pl)
[15:28:34] <huon> e.g. Haskell's type classes are essentially vtables
[15:28:36] <whitequark> e.g. in OCaml you have things like Char.isDigit where Char is a module. it looks similar to namespaced methods until you want to do dynamic dispatch
[15:28:38] <whitequark> *nod*
[15:28:55] *** Joins: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP)
[15:29:22] *** Quits: jviereck (Adium@moz-42E51C3B.ethz.ch) (Quit: Leaving.)
[15:29:22] <whitequark> but typeclasses are in no way using "normal functions".
[15:29:24] <bollu> tiffany: they both deal with time varying values, so a lot of the intuition carries over I feel.
[15:30:06] <huon> whitequark: I guess I'm mostly talking about the syntax, and `typeClassFunction x` and `normalFunction x` look the same
[15:30:32] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Ping timeout)
[15:31:46] *** Joins: ChrisOei (ChrisOei@moz-53A9266A.blurb.com)
[15:32:01] *** Quits: Ferreus (ferreus@moz-54CB863F.dip0.t-ipconnect.de) (Ping timeout)
[15:32:58] <bollu> Future == promise or something else?
[15:32:59] <eddyb> really, what does Maybe.maybe do?
[15:33:25] *** Joins: jviereck (Adium@moz-42E51C3B.ethz.ch)
[15:33:27] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[15:33:51] <whitequark> eddyb: let maybe f x = match x with Some x' -> f x'; () | None -> () ?
[15:33:56] <whitequark> (forgive my french)
[15:34:15] <eddyb> haha what?
[15:34:24] <huon> case x of { Just x -> f x; Nothing -> a }
[15:34:30] *** Joins: judder (maradukewa@75FA4DEE.A989D80C.78E362FE.IP)
[15:34:38] <eddyb> map_or?
[15:34:42] *** Parts: judder (maradukewa@75FA4DEE.A989D80C.78E362FE.IP) ()
[15:34:49] <huon> match x { Some(x) => f(x), None => a }
[15:34:54] <huon> yeah
[15:34:59] <eddyb> thanks :)
[15:35:01] <whitequark> a ?
[15:35:07] *** Quits: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca) (Quit: Leaving.)
[15:35:12] <whitequark> oh
[15:35:34] <huon> it's `maybe a f x` isn't it?
[15:35:47] <eddyb> looks like it
[15:35:47] *** pmoore is now known as pmoore|away
[15:36:06] <eddyb> huon: but f is "id", why don't they have an unwrap_or equivalent?
[15:36:19] <krdln> hm, it looks like option.map(f).unwrap_or(a)
[15:36:24] <eddyb> now I have to look up what lift does
[15:36:35] <eddyb> krdln: that's map_or(f, a) (or is it a, f?)
[15:36:36] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:37:01] <huon> a, f
[15:37:28] <krdln> oh, there is map_or, i forgot
[15:37:54] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[15:38:08] *** Quits: khodzha (khodzha@4D2BECD3.71D0B9BF.E8ACC090.IP) (Ping timeout)
[15:38:12] <eddyb> map_or is one character longer than maybe, but it's... much more descriptive
[15:38:15] *** Joins: lpy (lpy@1834E2CB.F09091A8.1348A864.IP)
[15:38:22] *** Joins: khodzha (khodzha@86326CC6.3E410295.CA6E2165.IP)
[15:38:32] *** Quits: ninechars (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Quit: )
[15:38:40] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[15:38:40] <eddyb> maybe it's just me being biased
[15:38:53] <kimundi> Well, if we where using java conventions it would be mapOr() ;)
[15:38:53] <huon> not really, it's mapping and unwrapping at the same time
[15:39:07] <huon> so the name lies :P
[15:39:37] <eddyb> is "lift" in haskell's prelude?
[15:39:47] <krdln> name maybe is so non-descriptive, it forces you to look at type signature
[15:40:06] <kimundi> map_or => map a function or use a value
[15:40:21] <eddyb> because in Elm it's a Signal (monad?) lifter which means it's quite specific
[15:40:34] <huon> eddyb: it's not in haskell's prelude
[15:40:44] <huon> (at least, not with ghc 7.6.3)
[15:41:22] <eddyb> lifting may be a cool trick, but it makes code unreadable
[15:41:22] <huon> kimundi: it's not just "map" though, since it's extracting the result from the Option type
[15:42:13] <eddyb> "main = lift2 above field message" basically each program is its own DSL
[15:42:14] <kimundi> huon: Yeah, I guess unwrap_map_or would be more true
[15:42:32] *** Joins: Rym (y@B9974C6D.8A65FA57.8772DA20.IP)
[15:42:47] *** Quits: jackneill (jackneill@moz-9A6532AC.pool.digikabel.hu) (Quit: WeeChat 0.4.3)
[15:43:00] <huon> eddyb: just look at the types, they shold tell you everything that's relevant ;P
[15:43:07] *** Joins: jackneill (jackneill@moz-9A6532AC.pool.digikabel.hu)
[15:43:34] <eddyb> oh and functions don't have explicit types
[15:44:08] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:44:20] <eddyb> it reminds me of JS. but without the last bit of readability left in it
[15:45:21] *** Quits: andre_ (andre@CA528A4A.45A4338E.8EE27E6.IP) (Connection reset by peer)
[15:45:32] <krdln> is there any way to specify trait like that? trait Cont<T> { fn ref_map<U>(&self, f: |&T|->U) -> Cont<U>; }
[15:45:33] <eddyb> {"city": "Young America", "state": "Minnesota", "country": "US"} // at least now I know where 55555 is
[15:45:56] <eddyb> http://elm-lang.org/edit/examples/Reactive/ZipCodes.elm fwiw
[15:46:23] <eddyb> huon: I am not feeling well
[15:46:30] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[15:46:50] *** Joins: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net)
[15:46:53] <eddyb> there is no sensible explanation to me wasting time trying to understand a code example in a language that defies practicality
[15:47:05] * eddyb washes hands
[15:47:54] <huon> eddyb: I would encourage you to stop being so against Haskell et al.
[15:48:06] *** Joins: bollu_ (bollu@31CCE710.7065DDB9.6D6A344F.IP)
[15:48:20] * eddyb lifts huon
[15:48:20] <huon> it's a nice language, with very useful concepts if nothing else
[15:48:29] *** Joins: daschl (Adium@moz-DC6DE6E2.vie.surfer.at)
[15:48:34] *** Joins: victorporof (victorporo@moz-FFB76956.cpe.net.cable.rogers.com)
[15:48:39] *** Joins: pepper_chico (pepper_chi@BE2968B5.6F4A2706.E4090502.IP)
[15:49:12] *** Quits: bollu (bollu@31CCE710.7065DDB9.6D6A344F.IP) (Ping timeout)
[15:49:15] <eddyb> huon: and I was actually thinking of how I've managed to not rebase my branch on top of your OwnedSlice so it compiles
[15:49:28] *** Quits: ChrisOei (ChrisOei@moz-53A9266A.blurb.com) (Client exited)
[15:49:31] *** Joins: ChrisOei (ChrisOei@moz-53A9266A.blurb.com)
[15:49:36] *** Joins: espindola (espindola@3AA6F601.53AE8582.A535BD55.IP)
[15:49:42] <eddyb> I guess I find fetching a specific branch from someone else's fork difficult
[15:50:15] <eddyb> huon: I knew I remembered something http://www.haskell.org/hoogle/?hoogle=liftM
[15:50:43] *** Joins: twi (Adium@CF16816F.E0BD96E5.9ECBD630.IP)
[15:50:46] <eddyb> so Elm's lift is just liftM for Signal, right?
[15:51:00] <huon> afaict
[15:52:02] *** Joins: andre_ (andre@CA528A4A.45A4338E.8EE27E6.IP)
[15:52:15] <eddyb>  liftM2 (+) (Just 1) Nothing = Nothing
[15:52:38] <eddyb> then `liftM2 (+) (Just 1) (Just 2) = Just 3`, right?
[15:52:39] *** Joins: ksev (DrunkenPan@2413B76E.68EECDA4.4EA770CF.IP)
[15:52:51] <huon> yes
[15:53:18] <krdln> eddyb: it get crazier, when you write it as: (+) <$> (Just 1) <*> Nothing
[15:53:19] <pnkfelix> i suppose the word "inject" may be more appropriate than "map".  Or whatever word Category Theorists associated with the arrows from a coproduct to some target object
[15:53:28] *** Parts: ozten (ozten@moz-87FC77D4.hsd1.wa.comcast.net) ()
[15:53:35] <pnkfelix> and then one can go with `inj` since `inject` is too long
[15:53:45] <pnkfelix> but, that's probably terrible.
[15:53:45] <eddyb> pnkfelix: but... common sense!
[15:54:17] <eddyb> hmm, let's see if I VG + HKT allows for a variadic lift
[15:54:30] <eddyb> huon: Monad is just a HKT type class, right?
[15:54:32] <krdln> eddyb: <$> and (n-1) <*>s is equivalent too liftMn
[15:55:08] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Quit: Lost terminal)
[15:55:11] <eddyb> or a HKT class, I should say :P
[15:55:17] *** Quits: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP) (Quit: This computer has gone to sleep)
[15:55:51] <bascule>  13_4__8__ 9_11__12_  13_4__ 8_9__11_    13_ 4_8_   11__12_ 13_ 4_ 
[15:55:54] <bascule> 4|  8_9__11|  12_ 13\4|_ 8_9|  11_ 12\  4/ 8\\ 9\ 11/ 12/ 13| 4| 8|
[15:55:57] <bascule> 8| 9|_  12| 13|_4) 8|| 9|11| 12| 13| 4|/ 8_ 9\11\ 12V 13/| 4| 8| 9|
[15:56:00] <bascule> 9|  11_12| 13|  4_ 8< 9| 11|12| 13|_4| 8/ 9__11_ 12\| 13| 4|8_|9_|11_|
[15:56:03] <bascule> 11|_12|   4|_8| 9\_11\_12__13|_4__8_/9_/   12\13_\4_| 8(9_|11_|12_)
[15:56:06] <bascule>                                         
[15:56:13] <eddyb> didn't we agree on using rusti to do that?
[15:56:22] <bascule> haha
[15:56:28] *** pmoore|away is now known as pmoore
[15:56:31] <bascule> I... don't recall?
[15:56:52] <kimundi> rusti: let t="Can't remember a agreement";let s = "<"+t+">   ^__^\n ü \\  (oo)\\_______\n ü    (__)\\       )\\/\\\n ü        ||----w |\n ü        ||     ||";let mut i=0u8;for l in s.lines(){println!("{}",l.chars().map(|x|{let s="\x03"+(i+50).to_str()+x.to_str();i=(i+1)%14;s}).to_owned_vec().concat().replace("ü"," ".repeat(t.char_len())))}if true{return}
[15:56:53] -rusti- pastebinned 12 lines of output: http://sprunge.us/CagB
[15:56:57] <kimundi> damn it
[15:57:22] *** Quits: not_gavin (gavin@gavinsharp.com) (Input/output error)
[15:57:38] *** Joins: not_gavin (gavin@gavinsharp.com)
[15:57:44] *** Quits: espindola (espindola@3AA6F601.53AE8582.A535BD55.IP) (Input/output error)
[15:57:45] * kimundi lets that code rest, until the owned vector story is sorted out
[15:57:59] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[15:58:17] <eddyb> kimundi: haha chrome downloaded that file
[15:58:58] *** Quits: nkoep (nik@moz-CCDD9EE3.pool.mediaways.net) (Ping timeout)
[15:59:29] <eddyb> rustilite: #[allow(deprecated_owned_vector)]fn main(){rusti: let t="Can't remember a agreement";let s = "<"+t+">   ^__^\n ü \\  (oo)\\_______\n ü    (__)\\       )\\/\\\n ü        ||----w |\n ü        ||     ||";let mut i=0u8;for l in s.lines(){println!("{}",l.chars().map(|x|{let s="\x03"+(i+50).to_str()+x.to_str();i=(i+1)%14;s}).to_owned_vec().concat().replace("ü"," ".repeat(t.char_len())))}}
[15:59:32] -rustilite- pastebinned 4 lines of output: http://ix.io/bcI
[15:59:40] <eddyb> aww
[15:59:42] <krdln> Somebody could help me with how to express this trait? `trait Cont<T> { fn ref_map<U>(&self, f: |&T|->U) -> Cont<U>; }` It is possible in haskell's classess
[15:59:48] <eddyb> rustilite: #[allow(deprecated_owned_vector)]fn main(){let t="Can't remember a agreement";let s = "<"+t+">   ^__^\n ü \\  (oo)\\_______\n ü    (__)\\       )\\/\\\n ü        ||----w |\n ü        ||     ||";let mut i=0u8;for l in s.lines(){println!("{}",l.chars().map(|x|{let s="\x03"+(i+50).to_str()+x.to_str();i=(i+1)%14;s}).to_owned_vec().concat().replace("ü"," ".repeat(t.char_len())))}}
[15:59:49] -rustilite- application terminated abnormally with signal 31 (Bad system call)
[15:59:54] *** Quits: jviereck (Adium@moz-42E51C3B.ethz.ch) (Quit: Leaving.)
[15:59:54] <eddyb> well.great
[16:00:08] <eddyb> krdln: is it HKT?
[16:00:10] <huon> rustilite uses libgreen by default
[16:00:24] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[16:00:25] <eddyb> krdln: oh, yeah, it is
[16:01:04] <kimundi> huon: libgreen has what implications here?
[16:01:10] <eddyb> trait<*> Map { fn ref_map<T, U>(self: &Self<T>, f: |&T| -> U) -> Self<U>; }
[16:01:25] <eddyb> krdln: but map is usually by value, and for Option you have .as_ref().map
[16:01:29] <huon> kimundi: can't run in the sandbox
[16:01:34] <krdln> eddyb: Oh, never thought something that simple could be higher order
[16:01:40] <huon> kimundi: because libuv makes some peculiar system calls, aiui
[16:01:49] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[16:01:51] <kimundi> krdln: Note that we don't support HKT atm, eddyb's example is imaginary
[16:01:59] <eddyb> krdln: it's one of the few reasons we want HKT :))
[16:02:08] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[16:02:52] <kimundi> huon: So, using anything runtime-y that makes the wrong syscall gets aborted by the container?
[16:03:07] *** Quits: not_gavin (gavin@gavinsharp.com) (Input/output error)
[16:03:23] <huon> kimundi: yeah, by the kernel, I guess
[16:03:24] *** Joins: not_gavin (gavin@gavinsharp.com)
[16:03:58] *** Quits: pyrac (pyrac@moz-C9C1E431.math.u-bordeaux1.fr) (Ping timeout)
[16:04:10] <krdln> eddyb, kimundi: So I'll have to wait, I guess.. Maybe some known workarounds?
[16:04:36] <eddyb> krdln: the HKT transform
[16:04:47] <eddyb> but the result is fringe
[16:04:55] <krdln> eddyb: What is that?
[16:05:17] <eddyb> trait Map<T, U, SelfU> (where Self is SelfT)
[16:05:51] <eddyb> and then you impl<T, U> Map<T, U, Option<U>> for Option<T>
[16:06:20] <eddyb> krdln: generic associated items give you type lambdas like in Scala
[16:06:26] <krdln> eddyb: Hm, funny I just started writing this workaroud
[16:06:29] <kimundi> rusti: mod f{#[allow(deprecated_owned_vector)]pub fn m(){let t="Moo";let s = "<"+t+">   ^__^\n ü \\  (oo)\\_______\n ü    (__)\\       )\\/\\\n ü        ||----w |\n ü        ||     ||";let mut i=0u8;for l in s.lines(){println!("{}",l.chars().map(|x|{let s="\x03"+(i+50).to_str()+x.to_str();i=(i+1)%14;s}).to_owned_vec().concat().replace("ü"," ".repeat(t.char_len())))}}}f::m();if true{return}
[16:06:29] -rusti- 50<51M52o53o54>55 56 57 58^59_60_61^
[16:06:30] -rusti- 62 63   50 51\52 53 54(55o56o57)58\59_60_61_62_63_50_51_
[16:06:30] -rusti- 52 53   54 55 56 57 58(59_60_61)62\63 50 51 52 53 54 55 56)57\58/59\
[16:06:30] -rusti- 60 61   62 63 50 51 52 53 54 55 56|57|58-59-60-61-62w63 50|
[16:06:30] -rusti- 51 52   53 54 55 56 57 58 59 60 61|62|63 50 51 52 53 54|55|
[16:06:39] *** Quits: daschl (Adium@moz-DC6DE6E2.vie.surfer.at) (Quit: Leaving.)
[16:06:47] <eddyb> so if we had those, we could have hacky HKT traits
[16:06:54] <eddyb> kimundi: of course
[16:07:26] <kimundi> Heh, don't even need the mod
[16:07:33] <kimundi> just a functiond efinition
[16:07:43] <kimundi> but anyway, enough cow spam for now :P
[16:07:46] *** Quits: gimpf (gimpf@moz-CAA3F4E7.adsl.highway.telekom.at) (Ping timeout)
[16:07:48] *** Joins: maxli (Adium@moz-B19F68ED.student.cs.uwaterloo.ca)
[16:07:53] <krdln> eddyb: Never used scala, what are type lambdas?
[16:08:17] <eddyb> let's use imaginary Rust syntax to exemplify their hack
[16:08:44] <eddyb> well, I can't. I'll use pseudoJava
[16:08:51] *** Joins: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net)
[16:08:59] <krdln> nooo, anything but java
[16:09:05] <eddyb> class {type F<T> = ...;}::F
[16:09:09] <eddyb> krdln: just the class keyword :P
[16:09:31] <eddyb> that produces an anonymous type constructor
[16:09:34] *** Joins: bleibig (bleibig@moz-B4D9C5AF.hsd1.ca.comcast.net)
[16:09:54] *** Joins: onelson (owen@moz-DD666EC5.laika.com)
[16:09:56] <eddyb> I hope we get something like <T> Foo<T, Bar> in Rust, it feels natural and I don't see issues with it
[16:10:10] <huon> such spiky
[16:10:20] <huon> much awkward-to-type
[16:10:32] <kimundi> <T>Spaceship<T>
[16:10:43] <eddyb> kimundi: but that's just Spaceship!
[16:11:00] <eddyb> or maybe not, if Spaceship has a default type param
[16:11:35] <kimundi> eddyb: Well <T>S<T> forces S to be kind * -> *, while just S could be any kind on its own
[16:11:48] <huon> <T>T
[16:11:54] <huon> what does it mean?
[16:11:57] <eddyb> huon: identity
[16:12:02] <kimundi> Unless we add VG in there, then all bets are off
[16:12:26] <eddyb> <..T> Foo<A, ..T, B, C>
[16:12:31] <eddyb> Haskell can't do that :P
[16:13:22] * kimundi sometimes has the feeling that Rust gets remembered as very prominent example that a good type system and C++ - like syntax just don't match.
[16:13:27] *** Joins: nkoep (nik@moz-A25B8A61.vpn.rwth-aachen.de)
[16:13:53] <huon> eddyb: sure it can, GADTs solve everything
[16:14:02] *** Quits: bleibig (bleibig@moz-B4D9C5AF.hsd1.ca.comcast.net) (Quit: bleibig)
[16:14:09] <tiffany> as someone who prefers to look at rust as a low-level functional programming language, I agree
[16:14:13] * huon doesn't actually know if it can
[16:14:14] <eddyb> GADTs can't make VG out of thin air
[16:14:31] <tiffany> is there a reason why rust doesn't take more liberties breaking out of C++ syntax?
[16:14:40] <eddyb> tiffany: because it's... hard?
[16:14:41] <huon> kimundi: yeah, the verbose generics are annoying
[16:14:49] <kimundi> rusti: let v: Vec<uint> = vec!(1); v
[16:14:50] -rusti- <anon>:16:16: 16:25 error: use of undeclared type name `Vec`
[16:14:50] -rusti- <anon>:16         let v: Vec<uint> = vec!(1); v
[16:14:50] -rusti-                          ^~~~~~~~~
[16:14:50] -rusti- error: aborting due to previous error
[16:14:50] -rusti- application terminated with error code 101
[16:15:05] <huon> at least it's not template<....> annoying, though.
[16:15:08] <kimundi> Is there a reason why Vec is still not in the prelude?
[16:15:09] <krdln> eddyb: yay, finished parsing `class {type F<T> = ...;}::F`, thanks
[16:15:10] <eddyb> you can't go full Haskell because... well, it wouldn't be that special of a language
[16:15:13] <huon> kimundi: it is
[16:15:18] <huon> rusti is too old
[16:15:21] <kimundi> ah
[16:15:23] <kimundi> kay
[16:15:27] <huon> eddyb: sure you can
[16:15:32] <kimundi> rusti: version
[16:15:33] -rusti- rustc 0.10-pre (891eab9 2014-03-18 11:52:31 -0700)
[16:15:41] <kimundi> ouch, three days
[16:15:48] *** Joins: reverend_paco (chatzilla@moz-15582D1B.dia.static.qwest.net)
[16:16:09] <tiffany> eddyb: rust's syntax is not what distinguishes it from haskell
[16:16:48] <eddyb> s/because .*$/because I wouldn't use it/
[16:16:55] <tiffany> not that I want rust to look like haskell - some C++ syntax is fine
[16:17:12] * kimundi wonders if there will ever be a `Frust` language, that takes Rusts semantic but gives it a more functional syntax
[16:17:24] <tiffany> it's just that a lot of the syntax feels bolted on to make it feel more like C++
[16:17:34] <huon> eddyb: well that's entirely your loss
[16:17:46] * huon <3 haskell's generics syntax
[16:17:54] <eddyb> there is no syntax
[16:17:59] <eddyb> it's just spaces, like everything else
[16:18:02] <kimundi> (bilingual bonus points for "Frust" being the german word for "frustration")
[16:18:03] <huon> huh?
[16:18:07] <eddyb> kimundi: haha
[16:18:12] <huon> Class a => type -> type -> type
[16:18:13] <eddyb> huon: or do you mean =>?
[16:18:30] <tiffany> I'd prefer a solution that wouldn't result in unnecessary fragmentation
[16:18:31] <huon> lower case for generic params, no need to pre-declare them
[16:19:03] *** Joins: bjustin (bjustin@moz-8FC28563.sierrabravo.net)
[16:19:03] *** Joins: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net)
[16:19:09] <eddyb> yeah, well, that doesn't work very well given rust's semantics
[16:19:32] *** Quits: leowoe (Leo@moz-CEF2400C.inf.uni-konstanz.de) (Quit: Leaving.)
[16:19:32] <eddyb> or if you made it not error prone, it would end awkardly
[16:19:41] <huon> it works fine for haskell
[16:19:46] *** pmoore is now known as pmoore|dinner
[16:19:49] <huon> and I don't see how rust's semantics relate to this
[16:19:57] <eddyb> huon: name shadowing
[16:20:04] <tiffany> impl Foo a for Bar b c { } would be nice
[16:20:10] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[16:20:14] <kimundi> tiffany: Oh, no one wants fragmentation. But there are definitely different mutually exclusive ways how the syntax can be defined, and not eveyone will be happy with what we have.
[16:20:16] <huon> eddyb: of which name?
[16:20:30] <eddyb> huon: formal generic type params
[16:20:43] <tiffany> kimundi: do you have specific examples?
[16:20:59] <huon> eddyb: example?
[16:21:24] *** Quits: Rym (y@B9974C6D.8A65FA57.8772DA20.IP) (Ping timeout)
[16:21:59] <eddyb> trait LiftTypes<M<*>: Monad> {type Result: Tuple} impl<M<*>: Monad> LiftTypes<M> for () {type Result = ();} impl<M<*>: Monad, T, Tail: LiftTypes<M>> LiftTypes<M> for (T, ..Tail) {type Result = (M<T>, ..Tail::Result);}
[16:22:04] <eddyb> well, that was the hardest part
[16:22:10] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[16:22:19] <eddyb> liftM should be easy to define then
[16:22:20] <huon> what's shadowing?
[16:22:32] <eddyb> huon: trait Foo<T> {fn foo<T>(){}}
[16:22:42] <kimundi> tiffany: Hard to give a example for something that refers to the whole language itself
[16:22:55] <huon> eddyb: that's bad practice now, anyway
[16:23:04] <eddyb> huon: not for lifetimes
[16:23:11] <tiffany> well, what I'm thinking of is, who would be against getting rid of the redundancy for generics in impl statements?
[16:23:17] <huon> eddyb: and Haskell has the same "problem", hasn't stopped anyone
[16:23:19] <tiffany> I wouldn't think C++ programmers would like it just for the sake of C++
[16:23:21] <huon> eddyb: yes for lifetimes?
[16:23:33] <eddyb> huon: everything shadows 'a :P
[16:23:37] <huon> eddyb: impl<'a> ... { fn foo<'a>(...) {} }
[16:23:39] <huon> ick
[16:23:46] <huon> "everything"?
[16:23:49] * huon is confused
[16:24:09] <eddyb> huon: as in, have you seen that case where the second lifetime has a different name?
[16:24:24] <huon> eddyb: i.e. fn foo<'b>?
[16:24:25] <kimundi> tiffany: Like this Foo a vs <a> Foo. Or \x -> x vs |x| x. Or fn foo() -> Bar { new_bar() } vs foo :: bar foo = new_bar
[16:24:29] <eddyb> huon: yeah
[16:24:41] <huon> eddyb: yes? I write that all the time
[16:24:54] <eddyb> I don't remember seeing it more than once
[16:25:01] <eddyb> and that was a special case
[16:25:27] <eddyb> also, if you don't know / can't see that the trait uses "a", and you think you write a generic method, when in fact you are writing a non-generic one
[16:25:33] <tiffany> do C++ programmers complain about functions nto being C++-like though?
[16:25:48] <tiffany> or how variable declarations have the type "backwards"?
[16:26:12] <eddyb> though Haskell doesn't have "methods" in the same sense, just free functions, so it's less of an issue
[16:26:47] *** Joins: espindola (espindola@8EC99D26.4B7A7726.A2E931B1.IP)
[16:26:57] <huon> eddyb: that's not related to the semantics of the language though
[16:27:04] <krdln> auto-shadowing in haskell sometimes is a problem.
[16:27:06] <huon> just the conventions of people writing it
[16:27:12] *** Joins: espindol_ (espindola@563D60BB.4B7A7726.A2E931B1.IP)
[16:27:21] <eddyb> the main issue I have with <> is ::<>, which could be solved by using arcane symbols that nobody can type, or... I don't know
[16:27:58] <huon> "also, if you don't know / can't see that the trait uses "a", and you think you write a generic method, when in fact you are writing a non-generic one"
[16:28:00] <huon> I don't get that?
[16:28:17] <eddyb> huon: reusing a type parameter that you didn't know existed
[16:28:27] <krdln> you can't write explicitely type signature for inner function, refering to types from outer function. Only workaround is no to write any signature for inner fun
[16:28:29] *** Quits: espindola (espindola@8EC99D26.4B7A7726.A2E931B1.IP) (Ping timeout)
[16:28:48] <huon> eddyb: scroll up to look at the `impl` body?
[16:28:54] <eddyb> you think you write fn foo<T>(x: T); when you are writing fn foo(x: T);
[16:29:07] <eddyb> huon: this can happen by mistake. I know, type errors can fix it
[16:29:19] <huon> haskell has the same "problem" with class instances
[16:29:32] *** Quits: gwty (gwtypc@8B0C96F5.439CEDBD.F44414AF.IP) (Ping timeout)
[16:29:37] <eddyb> about the <> syntax comment above...
[16:29:38] *** Joins: gwty (gwtypc@8B0C96F5.439CEDBD.F44414AF.IP)
[16:30:09] <eddyb> spaces are not an option for me, and I know I'm nothing more than a (dumb) speck of dust, so I understand nobody would miss me if Rust were to drop the current syntax
[16:30:56] <eddyb> maybe I shouldn't even display my negative opinion towards that. I'd be sad if that were to happen, but it's not the end of the world
[16:31:12] *** Joins: Savago (Savago@816F9901.E820043D.D4C04133.IP)
[16:31:19] *** Joins: Rym (y@B9974C6D.8A65FA57.8772DA20.IP)
[16:31:28] <eddyb> and now I feel like crying. I think I'm just tired. ttyl
[16:31:46] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Quit: Computer has gone to sleep.)
[16:32:10] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[16:32:18] *** Quits: bollu_ (bollu@31CCE710.7065DDB9.6D6A344F.IP) (Connection reset by peer)
[16:33:51] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[16:35:11] *** Quits: eddyb (eddy@F8B50789.F33C1089.FB866788.IP) (Ping timeout)
[16:37:24] *** Quits: maxli (Adium@moz-B19F68ED.student.cs.uwaterloo.ca) (Quit: Leaving.)
[16:39:30] *** Joins: afrey71 (Mibbit@moz-54AA233A.ftth.as8758.net)
[16:40:17] *** Quits: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl) (Ping timeout)
[16:40:30] *** Joins: daschl (Adium@moz-DC6DE6E2.vie.surfer.at)
[16:40:39] *** Joins: nical (nico@87C1F78E.1DE10CA8.D8E68FF6.IP)
[16:41:17] *** Quits: canhtak (canhtak@moz-805AE185.wl.t.ulaval.ca) (Quit: canhtak)
[16:41:32] <afrey71> I need some help, again. I want to link multiple objects together, and since the deprecation of @mut, I started looking into std::rc::Rc for those links. I can guarantee cycle-free linkage, so reference counting seems just fine.
[16:41:48] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[16:42:01] <afrey71> However, trying to access the (mut!) linked-to object via the Rc gives me trouble.
[16:42:21] *** Quits: sellout (greg@moz-F7BC9302.us-west-2.compute.amazonaws.com) (Quit: ZNC - http://znc.in)
[16:42:41] *** Joins: sellout (greg@moz-F7BC9302.us-west-2.compute.amazonaws.com)
[16:42:52] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[16:42:54] <Tobba> apparently
[16:43:00] <Tobba> you cant have proc() -> !
[16:43:18] <afrey71> Given Rc<RefCell<~MyTrait>>, the borrow_mut() gives me a RefCell. So far so good.
[16:43:38] *** Quits: Matthias247 (Miranda@moz-678B5E4A.hsi2.kabel-badenwuerttemberg.de) (Connection reset by peer)
[16:43:50] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[16:44:24] <afrey71> .get() on that fails, because MyTrait doesn't implement the Send trait.
[16:44:47] <Tobba> is there an issue for this or should I file one
[16:45:10] <kimundi> afrey71: What version of Rust are you using?
[16:45:11] <Tobba> error: expected type, found token DOC_COMMENT
[16:45:12] <Tobba> also what the shit
[16:45:23] <afrey71> kimundi: git head as of yesterday
[16:45:31] *** Joins: canhtak (canhtak@moz-805AE185.wl.t.ulaval.ca)
[16:45:39] *** Joins: james4k (james@moz-9BB5AE72.consolidated.net)
[16:46:28] *** Joins: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP)
[16:46:28] *** ChanServ sets mode: +o jdm
[16:46:46] <kimundi> afrey71: hm, okay, could you past some example code about what doesn'T work? with the Deref trait we now have, you should be able to do `let rc: Rc<RefCell<~MyTrait>> = ...; rc.borrow_mut().method_of_trait_object()`
[16:47:26] <afrey71> kimundi: hm.. I'll try that (i.e. leave away .get() in between).
[16:48:15] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[16:48:39] <afrey71> I misremembered one thing: borrow_mut() doesn't get me a RefCell, but a RefMut, obviously.
[16:48:39] *** Joins: maxli (Adium@moz-B19F68ED.student.cs.uwaterloo.ca)
[16:49:06] <Tobba> is it a good idea to use no_pod on stuff that really shouldent be implictly copied anywhere?
[16:49:37] <kimundi> Tobba: That's what it is for
[16:49:53] <Tobba> I was a bit suspicious since I've only ever seen it used in the implementations of stuff like Rc
[16:49:55] <Tobba> but excellent
[16:50:12] <afrey71> kimundi: hm.. interesting, that seems to work.
[16:50:18] *** Quits: james4k (james@moz-9BB5AE72.consolidated.net) (Quit: WeeChat 0.4.3)
[16:50:24] *** Joins: james4k (james@moz-9BB5AE72.consolidated.net)
[16:50:45] <Tobba> also when it comes semantics
[16:51:02] <Tobba> A::new(&B) or B::create_a() -> A
[16:51:20] <afrey71> kimundi: So does a RefMut simply pass on such method calls? Or what does it do? Somewhere I can read about these new-ish things? (i.e. Cell vs. RefCell vs RefMut, etc...)
[16:52:23] <kimundi> afrey71: Okay, so the actual thing that happens if you do rc.borrow_mut().foo is rc.borrow().borrow_mut().get().foo
[16:52:59] <lessless> hi folks! is this  the only available inheritance mechanism in rust http://stackoverflow.com/questions/18674413/rust-inheritance-call-parent-method ? 
[16:53:07] <kimundi> afrey71: The Deref trait allows to overwrite the dereference operator, so with autoderef the .borrow() and .get() calls dissaperar
[16:53:17] *** Quits: daschl (Adium@moz-DC6DE6E2.vie.surfer.at) (Quit: Leaving.)
[16:54:00] <afrey71> kimundi: okay, makes sense, thanks.
[16:54:05] <kimundi> afrey71: Rc's borrow() just returns a &T to its interior, and RefMuts get() just returns the &mut T that is represented by the RefMut
[16:54:51] *** Joins: Guest__ (textual@3E0487DF.D8252BC.9532F1CE.IP)
[16:55:46] <kimundi> afrey71: borrow_mut() is explicit because that is the point where runtime failure can happen. borrow_mut() is a method on RefCell for dynamically enabling mutation behind a &T pointer (the one you get by calling Rc's borrow() method)
[16:56:16] <khodzha> hello guys, how can I cast Vec<u8> to actual string?
[16:56:23] *** Quits: Kxepal (Miranda@moz-B1712077.pppoe.mtu-net.ru) (Ping timeout)
[16:56:23] *** Joins: t4nk251 (bzlandfill@moz-777B27BB.uwaterloo.ca)
[16:56:54] <kimundi> khodzha: Right now, you can't cast it in the sense of turning it into a ~str
[16:57:01] <afrey71> kimundi: what confused me a bit was that the Rc documentation says it points to an immutable thing. Still trying to get my head around the Rc<RefCell<..>> construct...
[16:57:25] <kimundi> khodzha: You can however get a &str from it, by doing `str::from_utf8(vec.as_slice())`
[16:57:43] <kimundi> afrey71: Yeah, we are a bit in a paradigmen shift here
[16:58:12] *** Joins: Ferreus (ferreus@moz-10D7207C.lsn.wtnet.de)
[16:58:21] *** Joins: heftig (heftig@moz-D746319F.unitymedia.biz)
[16:58:39] <kimundi> afrey71: Until recently, one could say that &T is a immutable reference, that is that the T never changes. Therefore types like Rc that only expose a &T are imutable too
[16:58:43] *** Quits: t4nk251 (bzlandfill@moz-777B27BB.uwaterloo.ca) (Quit: CGI:IRC (EOF))
[16:59:24] *** Quits: cremes (cremes@moz-72B945E0.hsd1.il.comcast.net) (Quit: cremes)
[16:59:25] <khodzha> kimundi: thanks
[17:00:42] *** Joins: Kxepal (Miranda@moz-DC6FDBB9.pppoe.mtu-net.ru)
[17:00:50] <Tobba> hm
[17:01:02] *** Joins: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net)
[17:01:02] *** ChanServ sets mode: +ao dherman dherman
[17:01:05] <Tobba> Send and Share are kinda similar
[17:01:17] <Tobba> except not really
[17:01:41] <kimundi> afrey71: However, in newer Rust, its more that &T is something that allows multiple pointers to the same memory at the same time, which is generally made safe by not allowing mutation of the T. But a custom type like RefCell can circumvent that immutability by allowing you to mutate the interior through a safe API, that still ensures that there is at most one mutable pointer to the data at the same time
[17:02:04] <Tobba> Share implies no data races for any reachable immutable paths, Send just specifies that it can be sent between tasks right?
[17:02:23] <kimundi> Tobba: Yeah, kinda
[17:02:25] *** Joins: evanm (evanm@636AC086.5999CED5.71743E61.IP)
[17:02:29] <Tobba> actually this all makes sense
[17:02:58] <Tobba> or Send implies it can be moved into another task, I think
[17:02:58] <kimundi> Send means "this type owns its content deeply, so you can put it wherever and it will not become unsafe"
[17:03:10] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:03:12] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[17:03:14] <afrey71> kimundi: thanks for elaborating, very helpful!
[17:04:34] *** Quits: fabiand (fabiand@moz-4A60F0CD.adsl.alicedsl.de) (Quit: Verlassend)
[17:04:54] *** Joins: claudiu (claudiu@81B10C62.5F4BC945.49B2C1AE.IP)
[17:05:03] <kimundi> afrey71: The whole thing is now applicable to multitasking scenarios as well. Arc<T> requires that T has a bound of the trait `Share` which means "If you have a &T, all access to that T through the reference has to be threadsafe"
[17:05:28] <kimundi> And we have the type `RWLock`, which is basically a threadsafe RefCell
[17:05:33] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:05:38] *** Joins: judder (maradukewa@75FA4DEE.A989D80C.78E362FE.IP)
[17:05:49] <kimundi> So Arc<RWLock<T>> is the threadsafe analog to Rc<RefCell<T>>
[17:06:20] <Tobba> I'm still not entirely sure what Send does but afaik its just if its safe to move it into another task or not
[17:06:51] *** Quits: victorporof (victorporo@moz-FFB76956.cpe.net.cable.rogers.com) (Quit: victorporof)
[17:08:25] *** Quits: gwty (gwtypc@8B0C96F5.439CEDBD.F44414AF.IP) (Ping timeout)
[17:09:06] <kimundi> Tobba: Send means "this type owns all its data deeply and alone". That is, it contains no references to other data, thread unsafe shared ownership types (because those are not Send), etc. because everything a `T: Send` owns is only reachable by starting from the T itself, you can send the T between tasks. Per definition, its content can only be accessed by starting with the T itself, so there are no data races.
[17:09:39] <Tobba> ah
[17:09:41] <afrey71> kimundi: Arc<RWLock<T>> may become handy, eventually, thanks. For now, I'm going single-threaded...
[17:09:44] <kimundi> (Hm, I should proofread my answers more. The last few irc messages of me where very incoherent)
[17:09:50] <Tobba> heh
[17:10:51] <Tobba> maybe I should make my coroutine type something that just wraps an Rc
[17:10:57] <Tobba> instead of implementing things for Rc<>
[17:11:18] <Tobba> kimundi: although, the compiler detects Send for you doesnt it
[17:11:24] *** Quits: benjamin_____ (benjamin@moz-9D949A92.dip0.t-ipconnect.de) (Ping timeout)
[17:11:33] <kimundi> (One can imagine a T: Send as the root of a tree, with no branches connected to the outside)
[17:11:34] <Tobba> or rather, if everything inside a struct is Send, then the owner is Send
[17:11:44] <Tobba> yeah I get it
[17:11:46] *** Quits: nszceta (nszceta@moz-E458A7C0.pharm.pitt.edu) (Quit: Textual IRC Client: www.textualapp.com)
[17:11:47] <kimundi> Tobba: Right now kinds are inferred, yeah
[17:11:52] <afrey71> Use of deprecated ~[]? OMG, having to adapt even more. Well, guess that's the cost of being an early adopter. :-)
[17:11:56] <kimundi> And can be disabled with markers
[17:12:53] <kimundi> There is a recent idea/proposal from the devs to make kinds opt-in instead of automatically defined, to be more backwards compatible.
[17:13:03] * afrey71 certainly is thankful for the helpful warnings that point to replacements for deprecated stuff.
[17:13:11] *** Joins: nszceta (nszceta@moz-E458A7C0.pharm.pitt.edu)
[17:13:13] <Tobba> rustc error messages are really helpful
[17:13:22] *** Joins: leowoe (Leo@moz-79CB3771.dip0.t-ipconnect.de)
[17:13:25] <Tobba> except when they print your entire lookup table to the terminal
[17:13:26] <afrey71> Tobba: +1
[17:13:30] <Tobba> those suck
[17:13:57] *** Quits: pczarn (pczarn@moz-69A55FA.izacom.pl) (Input/output error)
[17:14:03] <kimundi> afrey71: If you update your Rust right now, you will not have to start over again later. :) std::vec got renamed to std::slcie, and std::vec_ng is now std::vec
[17:14:34] <Tobba> early adoption is great because you kinda get to see the thing evolve
[17:14:43] <kimundi> (Unless you just updated anyway, and thats why you mentioned that warning)
[17:15:06] <kimundi> Tobba: Yeah, I've been here since over a year, and its interesting what changed
[17:15:27] <kimundi> Tobba: sadly most of the changes went over my head at the point they happened. :P
[17:15:47] *** Joins: gwty (gwtypc@8B0C96F5.439CEDBD.F44414AF.IP)
[17:16:40] *** Joins: claudiu_ (claudiu@CB447DD5.6B10AC3.E2F59BBC.IP)
[17:16:47] <Tobba> been following Share for a while
[17:17:04] <Tobba> and watching bors helplessly fail at the tests and the retry button getting hit a billion times
[17:17:36] *** Quits: claudiu (claudiu@81B10C62.5F4BC945.49B2C1AE.IP) (Ping timeout)
[17:17:36] * kimundi remembers the time when Rust was the language with three distinct pointer types &, ~ and @ for three different jobs, and internal iteration was the default way to do things.
[17:18:05] *** Quits: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net) (Ping timeout)
[17:18:53] *** Joins: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net)
[17:18:54] *** ChanServ sets mode: +ao dherman dherman
[17:21:37] *** Joins: victorporof (victorporo@13F2CEC5.7672369.D8E68FF6.IP)
[17:23:05] <Tobba> I never managed to figure out why it was Rc<RefCell<T>> instead of Rc<T>
[17:25:21] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:26:01] *** Quits: lpy (lpy@1834E2CB.F09091A8.1348A864.IP) (Client exited)
[17:27:17] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:27:56] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[17:28:01] *** Joins: cremes (cremes@moz-72B945E0.hsd1.il.comcast.net)
[17:28:02] *** Quits: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP) (Quit: buildmaster reconfigured: bot disconnecting)
[17:28:03] *** Joins: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP)
[17:28:44] <seanmonstar> if i know a Result is an Ok, i still cant destructure it with let? `let Ok(v) = promised_ok()`?
[17:29:19] <kmc> correct. use the .unwrap() method
[17:29:27] <kmc> or .ok().expect("useful error message")
[17:29:34] *** Quits: leowoe (Leo@moz-79CB3771.dip0.t-ipconnect.de) (Ping timeout)
[17:29:40] <kmc> why does --dep-info require a full compile? and is there a way to avoid that?
[17:29:42] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[17:30:14] *** Joins: leowoe (Leo@moz-79CB3771.dip0.t-ipconnect.de)
[17:31:21] *** Quits: Ralith (ralith@moz-67D4EB93.customer.broadstripe.net) (Ping timeout)
[17:33:27] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[17:35:53] *** Quits: mye (mye@moz-A8B75C5E.dip0.t-ipconnect.de) (Quit: sleep message)
[17:36:38] <Tobba> what do exceptions even do right now
[17:36:46] <Tobba> they're used by memory stuff instead of fail I think
[17:36:59] <jdm> how can I use nm on an rlib?
[17:37:07] <jdm> what incantations are required?
[17:38:13] <jdm> ar -t shows me some filenames
[17:38:29] <jdm> maybe ar -x
[17:40:17] *** Joins: turon (Mibbit@D6C93061.35CDA2B7.8C888900.IP)
[17:41:10] *** Quits: reverend_paco (chatzilla@moz-15582D1B.dia.static.qwest.net) (Ping timeout)
[17:41:28] *** Quits: StarLight (StarLight@2420915.6E46BAD1.F1EF1E39.IP) (Ping timeout)
[17:42:17] <sfackler> kmc: a full compile works when using --dep-info with Makefiles. I think SiegeLord or someone had a patch to make --dep-info --parse-only work but I don't know if it merged
[17:43:08] *** Quits: victorporof (victorporo@13F2CEC5.7672369.D8E68FF6.IP) (Quit: victorporof)
[17:43:09] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[17:44:30] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:44:31] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[17:45:31] *** Joins: enos (jkingyens@moz-B0C1B161.hsd1.ca.comcast.net)
[17:45:53] *** Joins: StarLight (StarLight@1BEE9A32.4B616D14.F1EF1E39.IP)
[17:46:18] *** Quits: turon (Mibbit@D6C93061.35CDA2B7.8C888900.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[17:46:31] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:47:03] *** Quits: Rym (y@B9974C6D.8A65FA57.8772DA20.IP) (Ping timeout)
[17:50:00] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Ping timeout)
[17:50:59] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[17:51:25] <kmc> can I do something like  #[cfg(external_test)] #[crate_type="bin"];
[17:51:30] <kmc> I get "expected item but found `;`" on the second attr
[17:52:19] *** Joins: shubhaml (shubham@102712D1.C15BC1FD.249488B6.IP)
[17:54:06] *** Quits: Kynes (Kynes@moz-3DC6C6E7.mit.edu) (Quit: Leaving)
[17:54:19] <pnkfelix> kmc: I do not think you can apply attributes to other attributes.
[17:54:48] <pnkfelix> kmc: that is an interesting use case to handle.
[17:55:27] <kmc> ok
[17:55:46] <kmc> I can use --crate-type, and actually I decide my test program should be a separate crate from the library, anyway
[17:55:59] *** Parts: ewalstad (Adium@moz-D29CADB4.lightspeed.sntcca.sbcglobal.net) ()
[17:56:37] *** Joins: harish (harish@moz-A9E56CFE.hfc.comcastbusiness.net)
[17:57:05] *** Quits: nical (nico@87C1F78E.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[17:57:32] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[17:57:35] *** Quits: cremes (cremes@moz-72B945E0.hsd1.il.comcast.net) (Ping timeout)
[17:58:14] *** Joins: nical (nico@87C1F78E.1DE10CA8.D8E68FF6.IP)
[18:00:07] *** Joins: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP)
[18:00:44] *** Joins: Rym (y@B9974C6D.8A65FA57.8772DA20.IP)
[18:01:21] <doomlord_> std::intrinsics::offset : is the offset in bytes or units of size_of<T>
[18:03:06] *** Joins: brianm (brianm@B14CC6C5.5D49961F.D8D85ABD.IP)
[18:04:52] *** Quits: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net) (Quit: Sharp)
[18:05:30] *** Quits: brianm (brianm@B14CC6C5.5D49961F.D8D85ABD.IP) (Quit: Leaving...)
[18:05:37] <doomlord_> units of it seems ok
[18:06:20] *** Joins: brianm (brianm@B14CC6C5.5D49961F.D8D85ABD.IP)
[18:06:32] *** Quits: brianm (brianm@B14CC6C5.5D49961F.D8D85ABD.IP) (Client exited)
[18:06:34] *** Joins: brianm (brianm@B14CC6C5.5D49961F.D8D85ABD.IP)
[18:07:23] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[18:07:45] *** Joins: reverend_paco (chatzilla@moz-FDBE15EC.hsd1.ma.comcast.net)
[18:07:55] *** Quits: Kruppe (user@moz-253119B0.esg.uwaterloo.ca) (Ping timeout)
[18:08:13] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[18:08:20] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[18:08:21] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[18:08:33] *** Quits: sawrubh (uid6719@moz-5F4AA75A.irccloud.com) (Ping timeout)
[18:08:46] *** Joins: bvssvni (Mibbit@moz-A47B6F8E.bb.online.no)
[18:09:23] *** Quits: heftig (heftig@moz-D746319F.unitymedia.biz) (Ping timeout)
[18:09:39] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[18:09:59] *** Joins: ninechars (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[18:10:41] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[18:10:48] *** Joins: doener (doener@moz-C68F600D.unity-media.net)
[18:10:56] *** Quits: leowoe (Leo@moz-79CB3771.dip0.t-ipconnect.de) (Ping timeout)
[18:11:20] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[18:11:30] <kmc> can I declare a static array without explicitly giving its size in the type?
[18:11:37] *** manishearth is now known as Manishearth
[18:11:43] *** Joins: sawrubh (sid6719@moz-5F4AA75A.irccloud.com)
[18:12:36] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[18:13:16] <pnkfelix> doomlord_: yeah that documentation could probably be improved.  See e.g. how I adjusted the docs for std::ptr::offset
[18:14:15] <pnkfelix> doomlord_: I've always been a little unnerved by the "or one-byte-past-the-end" when talking about non-byte units.  Perhaps it should say "or one-unit-past-the-end" ?
[18:14:51] *** Quits: not_gavin (gavin@gavinsharp.com) (Input/output error)
[18:14:55] <pnkfelix> but verifying that is actually correct would require more digestion of the constraints induced by LLVM than I have digested to date.
[18:15:08] *** Joins: not_gavin (gavin@gavinsharp.com)
[18:15:09] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[18:15:12] <doomlord_> yeah that would clarify it
[18:15:48] *** Joins: paraze (paraze@moz-DAFFEE79.w90-27.abo.wanadoo.fr)
[18:15:57] <doomlord_> "at the unit imiediately after the contents of the object
[18:15:59] <doomlord_> "
[18:16:13] *** Joins: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP)
[18:17:27] *** Quits: gwty (gwtypc@8B0C96F5.439CEDBD.F44414AF.IP) (Ping timeout)
[18:18:23] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Input/output error)
[18:18:59] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Input/output error)
[18:19:25] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[18:19:29] *** Joins: gwty (gwtypc@498D0BCE.ACBB8BD3.8A00C703.IP)
[18:20:22] *** Joins: pepp (Mibbit@moz-A17B47F9.net.upcbroadband.cz)
[18:20:30] *** Joins: Florob (Florob@moz-39532932.de)
[18:20:37] *** Joins: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl)
[18:21:52] <doomlord_> this is so much harder than in C
[18:22:12] <doomlord_> (ok C is optimized for this purpose..)
[18:22:24] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[18:22:24] *** ChanServ sets mode: +ao pcwalton pcwalton
[18:22:45] *** Quits: txdv (quassel@966F3542.3BA477DA.14C26596.IP) (Quit: No Ping reply in 180 seconds.)
[18:22:52] *** Joins: Jesin (Jesin@moz-48B48C95.eecs.lehigh.edu)
[18:22:56] *** Joins: txdv (quassel@966F3542.3BA477DA.14C26596.IP)
[18:24:38] *** Quits: erickt (etryzelaar@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[18:25:06] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Quit: Leaving)
[18:25:34] *** Joins: Sharp (Sharp@19388942.6B775EBE.DC877F3B.IP)
[18:27:24] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[18:27:33] *** Joins: mye (mye@moz-A8B75C5E.dip0.t-ipconnect.de)
[18:28:16] <kimundi> kmc: yes
[18:28:43] <kimundi> rusti: static SLICE: &'static [u8] = &[1, 2, 3]; SLICE
[18:28:44] -rusti- [1, 2, 3]
[18:29:34] *** Joins: azita (Azita@moz-62518563.mtv2.mozilla.com)
[18:29:40] *** Quits: gwty (gwtypc@498D0BCE.ACBB8BD3.8A00C703.IP) (Ping timeout)
[18:29:45] *** Quits: japaric (japaric@C87928B9.6A7849D9.95AE23EB.IP) (Quit: WeeChat 0.4.3)
[18:29:48] <pepp> hello, I am new to rust and I want to ask few questions
[18:30:04] <kimundi> sure :)
[18:30:16] <tiffany> howcome the changes rust needs for llvm haven't been upstreamed?
[18:30:31] <pepp> can be types implementing Drop used with Gc or Rc?
[18:30:41] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[18:30:46] <sfackler> pepp: yep
[18:31:15] <pepp> how does Gc order calls to Drop for cyclic structures?
[18:32:28] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[18:33:05] <kimundi> pepp: Well... We actually don't have a garage collector atm. Gc<T> uses the old @T internally, which uses reference counting
[18:33:26] <sfackler> it will collect cycles at task exit though
[18:33:36] <kimundi> For @T, cycles are only detected at task exit
[18:33:49] <kimundi> and then freed in a nondeterminsitic order I guess
[18:34:50] <pepp> oh, that is quite dangerous
[18:35:10] <kimundi> pepp: Rc<T> will just leak cycles, always. We have tried to make cycles impossible with it, buts its to restricive, and leaks are not memory unsafe, so we allow them
[18:35:32] <kimundi> And Rc<T> allows weak references
[18:35:48] <kimundi> So you can always build a cycle free ownership tree
[18:36:09] *** Joins: claudiu (claudiu@81B10C62.5F4BC945.49B2C1AE.IP)
[18:36:10] <kimundi> So, for Rc<T> frees are deterministic
[18:36:13] <pepp> kimundi: yes, i think that's fine ... I am doing C++ for living and shared_ptr is not that big deal
[18:37:00] <pepp> but I was curious about Gc ... I know that finalizers in Java have this problem
[18:37:05] *** Quits: claudiu_ (claudiu@CB447DD5.6B10AC3.E2F59BBC.IP) (Ping timeout)
[18:37:38] *** Quits: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP) (Quit: This computer has gone to sleep)
[18:37:39] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Client exited)
[18:38:28] *** Quits: CarpNet (ac@moz-FD24B77.sohonet.co.uk) (Quit: Leaving)
[18:38:29] <pnkfelix> pepp: I suspect we are going to put in more restrictive rules about what T is allowed to be use with Gc<T> and Rc<T>
[18:38:32] <SiegeLord> Where does it say that Gc will allow destructors? They seem antithetical to Gc
[18:38:33] <kmc> kimundi: nice, ty
[18:38:37] <pnkfelix> pepp: its sitll TBD though.
[18:38:55] <pepp> ok, great
[18:39:16] <pnkfelix> pepp: Its certainly something I'm pretty concerned about.
[18:39:18] <pepp> I have another question :)
[18:39:30] *** Quits: IanCormac84 (User@299C0A73.2A8D8854.67DFF8B4.IP) (Quit: Leaving.)
[18:39:41] *** Quits: Doppp (Doppp@moz-553020DA.hfc.comcastbusiness.net) (Ping timeout)
[18:39:54] <pepp> can I make some struct non-movable? when declared?
[18:40:03] <Tobba> hm
[18:40:30] <pnkfelix> pepp: yes
[18:40:31] <Tobba> is there any good way to dissect a proc() into the argument it has to be called with and the function pointer, then stop it from calling the destructor on that argument?
[18:40:36] <Tobba> maybe forget()
[18:40:44] <pnkfelix> pepp: right now the way to do that is with a zero-size marker field
[18:40:45] *** Joins: nlminhtl (ignotus@moz-393BCEC.la.net.ua)
[18:40:49] <pnkfelix> pepp: let me find it for you
[18:41:07] *** Quits: janra (Janus@1CDC5701.A48867D7.52E4E107.IP) (Ping timeout)
[18:41:17] <pepp> pnkfelix: such struct cannot be returned from function, right?
[18:41:29] <pnkfelix> pepp: oh wait
[18:41:31] <sfackler> why do you want to do such a thing?
[18:41:34] <pnkfelix> pepp:  I was thinking of non-copyable
[18:41:38] <kimundi> pepp: Do you mean "not being able to be moved"? Thats not possible afaik
[18:41:40] <sfackler> you can take an &mut reference when constructing it
[18:41:49] <sfackler> let foo = &mut MyStruct { ... };
[18:41:55] *** Quits: enos (jkingyens@moz-B0C1B161.hsd1.ca.comcast.net) (Ping timeout)
[18:42:06] *** Joins: Kruppe (user@moz-253119B0.esg.uwaterloo.ca)
[18:42:28] <kimundi> pepp: What do you need it for? :)
[18:42:47] *** Joins: klaus (koz@moz-4486E876.hsd1.wa.comcast.net)
[18:43:11] <pepp> it is more of a theoretical question - you may know that move is expensive and you want to force user to place it into ~ or Rc or Gc
[18:43:22] *** Quits: claudiu (claudiu@81B10C62.5F4BC945.49B2C1AE.IP) (Input/output error)
[18:43:23] *** Joins: enos (jkingyens@moz-B0C1B161.hsd1.ca.comcast.net)
[18:44:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[18:44:10] <Tari> in that case you can just return an owned pointer
[18:44:11] <pepp> but at the same time you do not want to force dynamic allocation on heap
[18:44:32] *** Quits: gregburd (uid3997@moz-E77DEB21.irccloud.com) (Quit: Connection closed for inactivity)
[18:45:07] *** Quits: soumyaC (uid15286@moz-E77DEB21.irccloud.com) (Quit: Connection closed for inactivity)
[18:45:07] <kimundi> Yeah, no way to explicitly prevent the user from doing huge memcopies implicitly atm.
[18:45:23] *** Quits: pepper_chico (pepper_chi@BE2968B5.6F4A2706.E4090502.IP) (Quit: WeeChat 0.4.1)
[18:45:36] *** Joins: Doppp (Doppp@moz-553020DA.hfc.comcastbusiness.net)
[18:45:49] <kimundi> rusti: let a = [0u8, ..1024]; let b = a ; (a.to_owned(), b.to_owned())
[18:45:51] -rusti- pastebinned 7 lines of output: http://sprunge.us/jXJe
[18:46:09] * pnkfelix was wondering if there's some way to emulate the effect with priv fields
[18:46:13] <pepp> another related question: any plans for user defined move callback/operator/trait?
[18:46:14] <kimundi> heh, I don't know why I expected that to fit in 5 lines ;)
[18:46:26] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[18:46:50] <kimundi> pepp: Not really. Moves are integral part of the langauge semantic, explicit move constructors would blow a hughe hole in it
[18:47:04] *** Quits: enos (jkingyens@moz-B0C1B161.hsd1.ca.comcast.net) (Quit: enos)
[18:47:37] <sfackler> moves that can fail are a nightmare safety wise
[18:47:44] <pepp> kimundi: :-(
[18:48:01] <tfogal> I'm hitting issues with std::rand::Rng in 0.9.  Compiler seems to crash due to linkage error if I use ::std::rand::Rng::fill_bytes, but if I use simply 'std::...' then it cannot resolve the name.  any thoughts on how I could resolve this?
[18:48:02] *** Joins: jmmk (jmmk@moz-3BDBD2C0.hfc.comcastbusiness.net)
[18:48:30] <pepp> it can be useful for example for exact rooting gc
[18:48:55] <mcpherrin> tfogal: My first suggestion would be to use a current master and not 0.9, as many bugs have been fixed
[18:49:03] <pepp> I mean you want to interface with some gc'ed language
[18:49:12] <mcpherrin> tfogal: but that's not really being helpful to you
[18:49:52] <pepp> in the custom move function you can patch pointers from to always point the the object
[18:49:54] <tfogal> mcpherrin: not so bad, maybe.  i can use the rust-nightly package pretty easily.  I'm just a little leery of the language changing out from under me a ton *while* i'm learning it.
[18:50:08] <tfogal> i actually already tried switching to master, but it seems i have to modify my code in ways that it is then incompatible with 0.9
[18:50:17] *** Quits: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net) (Client exited)
[18:50:21] <tfogal> is everyone else just using master and I should bite the bullet?
[18:50:33] <kimundi> pepp: Our moves are differently defined than C++ ones, so I'm not sure how you could define a overload for it. But maybe something that allows you to react to a move would serve the same purpose?
[18:50:39] *** Joins: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net)
[18:50:50] <pepp> kimundi: yes
[18:51:21] <pepp> i was thinking about unsafe code anyways as it is really low-level stuff, but may be useful sometimes
[18:51:47] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[18:51:49] *** Joins: gwty (gwtypc@BCF94A7A.D0D7F4BE.4654B817.IP)
[18:52:05] <pepp> I mean the custom move function will be marked unsafe and called implicitly by runtime
[18:52:05] <kimundi> trait MoveHandler { fn old_location(&mut T) {} fn new_location(&mut T){} } maybe?
[18:52:20] *** Quits: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net) (Ping timeout)
[18:52:23] <kimundi> Anyway, thats certainly a post 1.0 enancement. :)
[18:52:54] <pepp> kimundi: agree
[18:53:16] <SiegeLord> Err... wouldn't that destroy our nice Vec speed?
[18:53:33] <kimundi> pepp: Failability, and hidden function calls would still be a problem though.
[18:54:01] *** Quits: shubhaml (shubham@102712D1.C15BC1FD.249488B6.IP) (Quit: leaving)
[18:54:05] <pepp> kimundi: i know, that's why it will be unsafe
[18:54:06] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[18:54:10] <kimundi> SiegeLord: Would it? If its optional for a custom type, and would emit no codegen otherwise?
[18:54:12] *** Quits: evanm (evanm@636AC086.5999CED5.71743E61.IP) (Connection reset by peer)
[18:54:28] *** Quits: jmmk (jmmk@moz-3BDBD2C0.hfc.comcastbusiness.net) (Quit: leaving)
[18:54:32] *** Joins: evanm (evanm@636AC086.5999CED5.71743E61.IP)
[18:54:43] <SiegeLord> We increase the size of a Vec by doing a realloc
[18:54:58] <SiegeLord> How and when would you call this handler?
[18:54:59] <pepp> kimundi: and it would be required to be unfailable
[18:55:27] <kimundi> pepp: Well, you'd need to make all moves unsafe then to be consistent in generics, which I think would be bad. :)
[18:55:50] *** Joins: jmmk (jmmk@moz-3BDBD2C0.hfc.comcastbusiness.net)
[18:56:15] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[18:56:17] *** Joins: IanCormac84 (User@299C0A73.2A8D8854.67DFF8B4.IP)
[18:56:34] <kimundi> SiegeLord: yeah, I think that would indeed prevent this from being a good idea...
[18:57:23] *** Quits: gwty (gwtypc@BCF94A7A.D0D7F4BE.4654B817.IP) (Ping timeout)
[18:57:47] <pepp> moves will be always considered safe, only the declaration will require unsafe and the function will have to meet some requirements
[18:57:50] *** Joins: tjc (tjc@1FC322A8.2D024FDB.284344F5.IP)
[18:57:50] *** ChanServ sets mode: +o tjc
[18:58:41] <pepp> another motivation would be user defined ~-like pointers
[18:58:46] *** Quits: evanm (evanm@636AC086.5999CED5.71743E61.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[18:58:54] <kimundi> pepp: Well, you can already define a ~T in user code
[18:59:00] *** Joins: gwty (gwtypc@816DE8AF.76932361.645B845A.IP)
[18:59:06] *** Quits: txdv (quassel@966F3542.3BA477DA.14C26596.IP) (Ping timeout)
[18:59:20] <pepp> kimundi: per type or global?
[18:59:20] *** Joins: txdv (quassel@966F3542.3BA477DA.14C26596.IP)
[18:59:40] <kimundi> pepp: You mean generic over all T? yes
[19:00:13] <kimundi> struct Owned<T> { priv data: *T } impl Drop ...
[19:00:46] *** Joins: cremes (cremes@moz-72B945E0.hsd1.il.comcast.net)
[19:01:03] <pepp> how you decide when to free data?
[19:01:08] <kimundi> Once our placement new system works properly you can initialize it without memcopy too
[19:01:10] *** Joins: japaric (japaric@C87928B9.6A7849D9.95AE23EB.IP)
[19:01:24] <pepp> oh, I see
[19:01:29] <kimundi> pepp: when it goes out of scope, like everything that impls Drop
[19:01:46] <pepp> the Drop is called only once (bad bad c++) :-)
[19:02:04] *** Quits: gwty (gwtypc@816DE8AF.76932361.645B845A.IP) (Ping timeout)
[19:03:25] <kimundi> Drop is only called once, but we actually emit a boolean flag to a type implementing Drop right now that ensures that. The plan is to make drops just statically known to happen at one place each
[19:03:27] <bvssvni> I improved the syntax for the monad https://gist.github.com/bvssvni/9674632
[19:03:48] <pepp> so Rc implements Unref, Drop and Copy, Owned would implement Unref and Drop?
[19:03:52] *** Quits: Guest__ (textual@3E0487DF.D8252BC.9532F1CE.IP) (Ping timeout)
[19:03:55] <bvssvni> does it make more sense now?
[19:04:20] <kimundi> (And if you use the no_drop flag to disable that field, Drop will get called more than once, and you have to check for yourself. But this is all not final)
[19:04:55] <kimundi> pepp: Where did you get those names? (Unref and Copy)
[19:05:24] *** Quits: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[19:05:28] *** Quits: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[19:05:34] <pepp> kimundi: maybe Deref
[19:05:39] *** Joins: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com)
[19:05:57] <pepp> I know there is Clone, but it has to be called explicitly
[19:05:59] *** Joins: ivan (ivan@moz-531C3EC9.members.linode.com)
[19:06:01] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Client exited)
[19:06:38] *** Quits: IanCormac84 (User@299C0A73.2A8D8854.67DFF8B4.IP) (Ping timeout)
[19:06:41] <kimundi> Rc and Owned would implement Deref, which allows you to get a &T to the content. Both also implement Clone, which for Rc increases the refcount, while for Owned it does a clone of the content. Both implent Drop, Rc decreases rc/frees while Owned always frees.
[19:07:45] *** Quits: azita (Azita@moz-62518563.mtv2.mozilla.com) (Quit: azita)
[19:08:13] <kimundi> If we get a "Move out" operator overload, then Owned would implement it to enable moving the T out of a Onwed<T>. Rc<T> would not implement it, because it can't ensure the refcount is equal to 1, and we probably don't want failure in that operator overload.
[19:08:21] *** Joins: alkino_ (alkino@moz-61F150EC.w92-151.abo.wanadoo.fr)
[19:08:37] <pepp> is the Clone on Owned needed? as long as it is just raw pointer, it can be simply moved
[19:08:52] <kimundi> ("Move out" in a syntactical sense, like `let value = *(~foo);`)
[19:09:06] *** Joins: IanCormac84 (User@2371CD0B.2A8D8854.67DFF8B4.IP)
[19:09:36] <kimundi> pepp: Clone is not needed for Owned to function. But neither is it required for Rc to function. ;)
[19:10:30] <kimundi> The semantic for Clone is "shallowest copy possible to get a T from a &T". So for &~T,  it has to do a deep copy, but for &Rc it only has to do a refcount
[19:12:25] <kimundi> (A problem with the old @T refcount implementation is that it bumps the count on every shallow copy, while a Rc<T> only needs to bump it if you explicitly fork the ownership with a clone() call)
[19:13:26] *** Joins: claudiu (claudiu@8ECC4BFC.EC83738C.D8D85ABD.IP)
[19:13:26] *** Joins: tom1 (tom@F616D77.77D422C6.AA74B5DB.IP)
[19:13:48] <SiegeLord> I wonder if Servo has passed IE6 in conformance tests
[19:13:50] *** Quits: txdv (quassel@966F3542.3BA477DA.14C26596.IP) (Quit: No Ping reply in 180 seconds.)
[19:13:58] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[19:14:01] *** Quits: ninechars (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Quit: )
[19:14:29] <pepp> the last question for now: I know that there is and will not be any try {} catch exception handling mechanism
[19:14:54] *** Quits: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP) (Input/output error)
[19:15:05] <pepp> any plans to make some kind of dummy task for this purpose?
[19:15:26] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[19:15:33] *** Quits: Ferreus (ferreus@moz-10D7207C.lsn.wtnet.de) (Quit: WeeChat 0.4.4-dev)
[19:15:54] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[19:16:11] *** Joins: gwty (gwtypc@B3118ADB.4C058DC4.553D87E5.IP)
[19:16:28] *** pmoore|dinner is now known as pmoore|away
[19:16:41] <SiegeLord> Isn't that what std::task::try is?
[19:16:58] <kimundi> pepp: No concrete plans I know of, but its been tossed around a few times. Having a task that runs on the same stack and blocks the parent task might be useful
[19:17:06] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[19:17:13] <kimundi> SiegeLord: That spawns a new task with its own stack etc and waits for it to complete
[19:17:16] <pepp> kimundi: definitely
[19:17:31] <SiegeLord> Yeah, is that not what is desired?
[19:17:49] <pepp> SiegeLord: no, just want to make a safe "checkpoint"
[19:17:54] <kimundi> SiegeLord: The semantic is desired, but with a more efficient implementation.
[19:18:09] <SiegeLord> So the answer is yes :P
[19:18:17] <SiegeLord> If you don't mind a tiny bit of inefficiency
[19:18:40] <kimundi> SiegeLord: Basically the same isolation semantic of a new task, without creating a new task with its own stack etc. I have no idea wether this would be safely doable though.
[19:19:47] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Quit: Leaving...)
[19:19:59] *** Quits: Doppp (Doppp@moz-553020DA.hfc.comcastbusiness.net) (Ping timeout)
[19:20:06] <pepp> kimundi: what whould be the problem?
[19:20:26] <kimundi> pepp: I don't know, hence the "no idea" ;)
[19:20:54] <kimundi> pepp: I might know much about Rust the language, but I have zero experience with the gritty system programming details ;)
[19:21:38] <kimundi> (And all I know about C and C++ I learned by lurking around here, haha)
[19:22:03] *** Quits: afrey71 (Mibbit@moz-54AA233A.ftth.as8758.net) (Quit: http://www.mibbit.com ajax IRC Client)
[19:22:32] <pepp> :-)
[19:22:36] <kimundi> pepp: But I assume that there might be more invariants in task isolation involved than simply total stack unwinding. task locat data for example.
[19:22:59] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[19:23:00] <pepp> ok, thanks for your answers
[19:23:06] <kimundi> (which is distinct from thread local storage)
[19:23:25] *** Joins: claudiu_ (claudiu@moz-FB94486E.thefacebook.com)
[19:23:26] <doomlord_> ah fixed it, crazy bug
[19:23:30] <eibwen> is the foramt_args! macro family internationalizable?
[19:23:48] <kimundi> eibwen: Its been designed to be, in principle
[19:24:00] *** Joins: Blub\w (wry@620605B3.71150E1A.237AE2BA.IP)
[19:24:03] <eibwen> how would that work? :)
[19:24:11] *** Quits: Rym (y@B9974C6D.8A65FA57.8772DA20.IP) (Ping timeout)
[19:24:15] *** Quits: wry (wry@620605B3.71150E1A.237AE2BA.IP) (Ping timeout)
[19:24:26] *** Quits: claudiu (claudiu@8ECC4BFC.EC83738C.D8D85ABD.IP) (Ping timeout)
[19:24:33] <Tobba> have fun with chinese
[19:24:49] <kimundi> rusti: println!("This {0} is {1}.", "House", "nice")
[19:24:50] -rusti- This House is nice.
[19:24:50] -rusti- ()
[19:24:56] <doomlord_> i started out with this - thought it was a mess, so i refactored it (wouldn't it make sense if it was header.element.get(...)   rather than header.get(&header, header.elemt, index) ? ...  but after refactoring to the latter,  it just took me hours to find out i was passing &self when i just needed 'self'.
[19:24:58] *** Joins: ninechars (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[19:25:08] <doomlord_> https://gist.github.com/dobkeratops/9686969
[19:25:10] *** Quits: ninechars (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Quit: )
[19:25:11] <Tobba> internationalizing thats gonna be great actually
[19:25:19] <Tobba> since they have separate numerals
[19:25:20] <kimundi> rusti: println!("Das ist ein {1} {0}.", "Haus", "nettes");
[19:25:21] -rusti- Das ist ein nettes Haus.
[19:25:21] -rusti- ()
[19:25:21] *** Quits: oberstet (quassel@moz-CAAEB459.dynamic.mnet-online.de) (Client exited)
[19:25:28] <Tobba> well of course that works
[19:25:50] <SiegeLord> Do we have runtime format string handling?
[19:26:00] <SiegeLord> That's what internationalization needs
[19:26:00] *** Joins: jviereck (Adium@moz-3B5248BD.dclient.hispeed.ch)
[19:26:03] <doomlord_> do i keep my design that i thought was a mess, or the one that prevented me spending 2+ hours finding &self -> self
[19:26:38] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Quit: Leaving)
[19:26:52] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[19:27:00] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[19:27:13] <Tobba> rusti: println!("åäö")
[19:27:13] -rusti- åäö
[19:27:13] -rusti- ()
[19:27:19] <Tobba> well rusti does unicode at least
[19:27:50] <eibwen> kimundi: no, I mean how would you dynamically load localization?
[19:27:58] *** Quits: ksev (DrunkenPan@2413B76E.68EECDA4.4EA770CF.IP) (Client exited)
[19:28:05] *** Quits: skade (skade@B4A5FE21.505237C9.CAE22B62.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[19:28:32] <kimundi> rusti: println!("{0, plural, =1{1} two{2} many{3} other{4}}", 1, "one thing", "a pair", "many things", "who knows how many things");
[19:28:33] -rusti- pastebinned 14 lines of output: http://sprunge.us/hOPZ
[19:28:37] <eibwen> because println!(gettext("This {0} is {1}"), ...) wouldn't work I guess?
[19:28:39] *** Joins: Rym (y@B9974C6D.8A65FA57.8772DA20.IP)
[19:28:48] *** Joins: fabiand (fabiand@moz-4A60F0CD.adsl.alicedsl.de)
[19:29:02] <Tobba> rusti: "é" == "é"
[19:29:02] -rusti- false
[19:29:23] <Tobba> gotta love unicode
[19:29:41] <Tobba> spidermonkey doesnt get that right either
[19:29:42] <kimundi> eibwen: No idea about that, but a gettext!() macro might actually work if its known at compiletime. But I'm sure the same formmatting stuff can be invoked at runtime somehow.
[19:29:44] *** Quits: nszceta (nszceta@moz-E458A7C0.pharm.pitt.edu) (Quit: Textual IRC Client: www.textualapp.com)
[19:30:29] *** Quits: tjc (tjc@1FC322A8.2D024FDB.284344F5.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[19:30:35] *** Joins: tjc (tjc@1FC322A8.2D024FDB.284344F5.IP)
[19:30:35] *** ChanServ sets mode: +o tjc
[19:31:17] <kimundi> rusti: "é".nfd_chars().collect::<~str>() == "é".nfd_chars().collect::<~str>()
[19:31:17] -rusti- true
[19:31:35] <Tobba> slightly messier sadly
[19:32:01] <Tobba> not everything is representable in NFD either afaik
[19:32:21] <kimundi> Well there could be a NfdStr type for example, which upholds that invariant
[19:32:32] <Tobba> and different ordering etc
[19:32:45] <Tobba> and then you get to control codes
[19:32:50] <Tobba> now thats a clusterfuck if I've ever seen one
[19:32:51] <SiegeLord> Yeah, I can't find any mention of doing runtime formatting
[19:33:05] <SiegeLord> I recall asking a few months ago, and was told it wasn't implemented yet... but a few months is a long time
[19:33:23] <kimundi> Tobba: Arent those normalization algorithms intended for ...normalizing those things?
[19:33:44] <Tobba> kimundi: different orderings yeah
[19:33:49] <Tobba> kimundi: control codes? oooh boy
[19:33:58] <Tobba> there isnt even a standardized place where they are all
[19:34:02] <Tobba> they're smacked in with the space characters
[19:34:12] <kimundi> Tobba: But those get ordered uniformly too, right?
[19:34:26] <Tobba> which by the way there are like 10 completely equal space characters that arent even visible
[19:34:36] *** Quits: IanCormac84 (User@2371CD0B.2A8D8854.67DFF8B4.IP) (Ping timeout)
[19:35:00] <Tobba> kimundi: the thing is how awful text handling for this gets
[19:35:09] <Tobba> if you want to do normal equivilence thats like
[19:35:30] <Tobba> nfd_chars().strip_control().strip_0widthspace() and so on
[19:35:43] <Tobba> shit example but unicode is horrible to deal with
[19:35:51] <kimundi> Sure, geting something that you intuitively think to be the same is another can of worms. ;)
[19:35:57] <SiegeLord> Render it to a bitmap and compare bitmaps ;)
[19:36:06] <Tobba> the joke is
[19:36:11] <Tobba> thats the most sane way at this point
[19:36:20] <kimundi> SiegeLord: Breaks depedning on font ;)
[19:36:38] <Tobba> "a​a" == "aa"
[19:36:43] <SiegeLord> Well, then they aren't equal, are they :P
[19:36:50] <Tobba> rusti: "a​a" == "aa
[19:36:51] -rusti- <anon>:18:17: 19:3 error: unterminated double quote string
[19:36:51] -rusti- <anon>:18     println!("{}", r)
[19:36:51] -rusti- <anon>:19 }
[19:36:51] -rusti- application terminated with error code 101
[19:36:55] <kimundi> Tobba: yeah, unicode is a mess like all standards, but better than codepages at least
[19:37:03] <Tobba> rusti: "a​a" == "aa"
[19:37:04] -rusti- false
[19:37:17] <bvssvni> what
[19:37:29] <Tobba> theres a 0 width space in there
[19:37:34] <Tobba> those are a thing, for whatever reason
[19:37:38] <cmr> because they're totally useful
[19:37:41] <bvssvni> a 0 width space ...
[19:37:46] <kimundi> "aa".as_bytes()
[19:37:48] <Tobba> cmr: I havent come up with a reason to use them yet
[19:37:59] <kimundi> rusti: "a​a".as_bytes()
[19:37:59] <Tobba> rusti: "a​a".to_bytes()
[19:38:00] -rusti- [97, 226, 128, 139, 97]
[19:38:01] -rusti- pastebinned 11 lines of output: http://sprunge.us/IVGW
[19:38:01] <cmr> Tobba: exploiting naively implemented websites of course
[19:38:03] <kimundi> rusti: "aa".as_bytes()
[19:38:04] -rusti- [97, 97]
[19:38:07] <Tobba> cmr: hahahahah
[19:38:08] *** Joins: soumyaC (uid15286@moz-E77DEB21.irccloud.com)
[19:38:18] <cmr> why, what would *you* use them for? :P
[19:38:37] <bvssvni> email spam bot protection
[19:38:38] <Tobba> I've tried to put them in domain names
[19:38:55] <Tobba> I still havent entirely figured out how to do it but the standards suck
[19:38:57] <Tobba> so it should be do-able
[19:39:12] *** Joins: lawrence (lawrence@moz-EAABC905.wireless.utoronto.ca)
[19:39:17] <kimundi> Hm, I wonder if there where a language that uses color for its alphabet, would unicode include color codes?
[19:39:23] <Tobba> nope
[19:39:25] <Tobba> fun fact:
[19:39:26] *** Joins: evanm (evanm@636AC086.5999CED5.71743E61.IP)
[19:39:27] <zwarich> cmr: hinting line wrapping?
[19:39:32] <Tobba> theres sans-serif versions of all latin characters
[19:39:34] *** Joins: Guest__ (textual@3E0487DF.D8252BC.9532F1CE.IP)
[19:39:35] <Tobba> and bold versions
[19:39:45] <Tobba> I have no idea why this exists, also no fonts implement that obviously
[19:39:53] <Tobba> its just the same characters with messed up hinting and no kerning
[19:40:02] <zwarich> of course, there's also the zero width nonbreaking space
[19:40:03] *** Quits: judder (maradukewa@75FA4DEE.A989D80C.78E362FE.IP) (Connection reset by peer)
[19:40:06] <cmr> Tobba: I don't think it is, I'm pretty sure IDNs normalize that stuff out.
[19:40:17] <Tobba> rusti: "a‌a".as_bytes()
[19:40:17] -rusti- [97, 226, 128, 140, 97]
[19:40:22] <cmr> IDN is why I gave up rewriting extra::url
[19:40:30] <Tobba> cmr: considering theres like 300 complete batshit characters
[19:40:30] <cmr> ain't nobody got time fo dat
[19:40:33] <fredy> is there a way to use enum datatypes from a mod without using use-statements for all the datatypes of the enum? an example that doesn't work http://pastebin.mozilla.org/4648436
[19:40:38] <Tobba> which arent uniformely placed in any way whatsoever
[19:40:41] <Tobba> I'm fairly sure there are some gaps
[19:40:51] <cmr> fredy: those aren't datatypes, those are variants (data constructors in haskell parlance)
[19:40:56] <kimundi> fredy: No, unless you import them all wild a wildcard or so
[19:40:57] <cmr> fredy: and no, there isn't.
[19:41:15] <bvssvni> fredy: put them in their own mod and use the mod
[19:41:24] <fredy> I see... thanks
[19:41:34] <Tobba> rusti: "a⁤a".as_bytes()
[19:41:34] -rusti- [97, 226, 129, 164, 97]
[19:41:35] <Tobba> ah yes
[19:41:39] <Tobba> the good old invisible plus character
[19:41:44] <kimundi> haha
[19:41:45] <Tobba> that is a thing, apparently
[19:41:47] <fredy> bvssvni: not sure what you mean...
[19:41:56] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[19:42:05] <kimundi> rusti: "⁤".as_bytes()
[19:42:05] -rusti- [226, 129, 164]
[19:42:31] <kimundi> rusti: "⁤⁤⁤⁤⁤⁤⁤⁤⁤⁤⁤⁤⁤⁤⁤⁤".as_bytes()
[19:42:31] -rusti- pastebinned 1 lines of output: http://sprunge.us/LIKG
[19:42:34] <bvssvni> fredy: mod choice { enum Choice { ... } }
[19:42:52] <Tobba> the fun part is that some things like V8 handle unicode chars somewhat nicely
[19:42:58] <Tobba> so you can write code that is like 99% invisible characters
[19:42:58] <bvssvni> fredy: then use choice::Foo and choice::Bar
[19:43:11] <Tobba> the rest would mostly be various keywords or punctuation
[19:43:20] <kimundi> "How to fill your harddrive with a empty string literal"
[19:43:27] <cmr> hahah
[19:43:29] <cmr> oh unicode
[19:43:32] <cmr> I hate strings :|
[19:43:39] <Tobba> maybe we should have a uh
[19:43:49] <Tobba> graphical_normalize() that normalizes + strips all invisble crap
[19:43:58] <Tobba> but then you have the RTL-LTR control codes which do affect the graphical stuff
[19:44:02] *** Joins: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net)
[19:44:16] <kimundi> Tobba: We allow unicode identifiers. But only the unicode recommened subset for that purpose, and its disabled per default right now.
[19:44:33] <Tobba> who thought RTL was a good idea anyways, if you write like that you drag your hand over the ink
[19:44:41] <Tobba> darn left handed people
[19:44:51] <fredy> bvssvni: that was what I am trying to avoid... but it seems I can not..., it would be nice if I could only write "use choice::Choice" and automatically choice::Foo and choice::Bar would be available :) 
[19:45:06] *** Quits: EastByte_ (EastByte@moz-4161ACFC.ewe-ip-backbone.de) (Ping timeout)
[19:45:23] <bvssvni> fredy: that is not possible :(
[19:45:23] *** Quits: murph (murph@moz-769F6638.oracle.com) (Broken pipe)
[19:45:34] <SiegeLord> Use a glob import ;)
[19:45:36] *** Joins: murph (murph@moz-769F6638.oracle.com)
[19:45:37] *** Joins: EastByte_ (EastByte@moz-59E49508.ewe-ip-backbone.de)
[19:45:38] <bvssvni> fredy: you can use choice::*;
[19:45:47] <fredy> ;)
[19:45:47] <cmr> Tobba: I'm I lefty and I would *love* english to be RTL :P
[19:45:56] <fredy> that is probably what I am going to do
[19:45:57] <Tobba> I rest my case
[19:46:04] <bvssvni> cmr: yeah, let's switch
[19:46:25] <Tobba> cmr: write LTR then just write the control code on the paper
[19:46:28] <cmr> I think my brain is far too ingrained with the top left being most important for me to ever switch
[19:46:30] <cmr> lol
[19:46:31] <doomlord_> when printing an object with  {:?} , is there something to restrict depth for recursive or large structures 
[19:46:32] <Tobba> RTL*
[19:46:33] <Tobba> dangit
[19:46:43] <cmr> doomlord_: nope
[19:47:02] <bvssvni> tfel ot thgir morf setirw ydobyreve no won morf
[19:47:03] *** Joins: m-r-r (m-r-r@moz-4FB14902.rev.sfr.net)
[19:47:14] <kimundi> Eh, centered is the way to go. Total equality, same unusability from both sides. ;)
[19:47:30] <SiegeLord> Maybe top down then? :P
[19:47:42] <SiegeLord> No ink smearage and equality
[19:47:52] <cmr> kimundi: like in harison bergeron? :P
[19:47:57] <Tobba> oh god top down languages
[19:47:58] <kimundi> doomlord_: Nope, rustc will just happily fill the stack :|
[19:48:02] <Tobba> chinese is one isnt it
[19:48:13] <cmr> SiegeLord: http://www.ccelian.com/concepca.html
[19:48:22] *** Quits: tjc (tjc@1FC322A8.2D024FDB.284344F5.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[19:48:30] *** Quits: gwty (gwtypc@B3118ADB.4C058DC4.553D87E5.IP) (Ping timeout)
[19:48:48] <cmr> I wrote with that for a bit. It's nice.
[19:48:52] <cmr> Impossible to read though, IMO
[19:49:03] <kimundi> I like that japanese allows both. top left to bottom right, and top right to bottom left.
[19:49:04] <bvssvni> some countries with right to left has "reverse" books, so if it can have english one way and native the other way
[19:49:48] <Tobba> ah yes, the chinese have top to bottom writing
[19:50:01] <Tobba> from my inner text layout engine coder: fuck 'em
[19:50:22] *** Joins: gwty (gwtypc@980E6763.65D8992A.137C914F.IP)
[19:50:53] <kimundi> cmr: Heh, that reminds me of that hexadecimal writing system I've seen
[19:50:56] * kimundi looks for the link
[19:51:01] * pcwalton wants to write a :ReformatRustImports for vim
[19:51:10] <pcwalton> then I will go on an import reformatting spree
[19:51:12] *** Quits: evanm (evanm@636AC086.5999CED5.71743E61.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[19:51:29] <cmr> pcwalton: what is your preferred format? :P
[19:51:30] *** Quits: jpf (jan@moz-A8C26A15.org) (Quit: Lost terminal)
[19:51:32] <cmr> I like shortest-to-longest
[19:51:40] <cmr> separating stdlib from non-stdlib imports
[19:51:53] *** Joins: jpf (jan@moz-A8C26A15.org)
[19:51:56] <pcwalton> local imports, newline, external imports, newline, rest of code
[19:52:03] <pcwalton> within each import block, alphabetical
[19:52:16] <pcwalton> all imports from the same module are grouped foo::bar::{A, B, C}
[19:52:22] <pcwalton> A, B, C must be alphabetized too
[19:52:34] <pcwalton> repeat foo::bar:: for multiple lines, so
[19:52:37] <pcwalton> use foo::bar::{A, B, C};
[19:52:41] <pcwalton> use foo::bar::{D, E, F};
[19:52:49] <cmr> blech alphabetical
[19:53:08] <cmr> I reject your alphabet and substitute it with my own!
[19:53:12] <bvssvni> let there be order
[19:53:18] <pcwalton> never import functions, only import modules and types
[19:53:34] *** Joins: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP)
[19:53:39] <pcwalton> (though it's OK to import enum/tuple struct constructors)
[19:55:49] <kimundi> Ah, found it: http://www.hauptmech.com/base42/wiki/index.php?title=Main_Page
[19:56:36] *** Quits: andre_ (andre@CA528A4A.45A4338E.8EE27E6.IP) (Quit: leaving)
[19:56:56] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[19:57:41] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[19:58:12] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[19:58:22] *** Quits: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP) (Input/output error)
[19:58:26] *** Joins: nszceta (nszceta@moz-E458A7C0.pharm.pitt.edu)
[19:58:38] *** Joins: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP)
[19:58:38] *** ChanServ sets mode: +o jdm
[19:59:15] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[19:59:54] *** Quits: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP) (Input/output error)
[20:00:14] *** Joins: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP)
[20:00:15] *** ChanServ sets mode: +o jdm
[20:01:24] *** Quits: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP) (Connection reset by peer)
[20:02:02] *** Joins: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP)
[20:02:02] *** ChanServ sets mode: +o jdm
[20:02:14] *** Joins: mcpherri1 (mcpherrin@moz-464166A4.hsd1.ca.comcast.net)
[20:02:40] *** Quits: mcpherri1 (mcpherrin@moz-464166A4.hsd1.ca.comcast.net) (Quit: leaving)
[20:03:11] *** Quits: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP) (Input/output error)
[20:03:20] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Connection reset by peer)
[20:03:29] *** Joins: mcpherri1 (mcpherrin@moz-464166A4.hsd1.ca.comcast.net)
[20:03:29] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[20:03:45] *** Quits: asmyers (quassel@1AED7747.A07F7734.FAA4474F.IP) (Ping timeout)
[20:03:53] *** Joins: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP)
[20:03:54] *** ChanServ sets mode: +o jdm
[20:04:15] *** Quits: mcpherri1 (mcpherrin@moz-464166A4.hsd1.ca.comcast.net) (Quit: leaving)
[20:04:28] *** Joins: mcpherri1 (mcpherrin@moz-464166A4.hsd1.ca.comcast.net)
[20:04:54] *** Quits: mcpherrin (mcpherrin@BB4DB59D.2876C283.70845BE5.IP) (Quit: leaving)
[20:05:09] *** Quits: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP) (Input/output error)
[20:06:09] *** mcpherri1 is now known as mcpherrin
[20:06:45] *** Quits: jmmk (jmmk@moz-3BDBD2C0.hfc.comcastbusiness.net) (Ping timeout)
[20:06:46] *** Joins: bbloom (bbloom@moz-6728B89F.nyc.res.rr.com)
[20:08:57] *** Quits: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP) (Quit: This computer has gone to sleep)
[20:09:39] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[20:09:42] *** Joins: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP)
[20:10:05] *** Quits: jviereck (Adium@moz-3B5248BD.dclient.hispeed.ch) (Quit: Leaving.)
[20:10:53] *** Joins: jdm (jdm@FCCEA34F.7672369.D8E68FF6.IP)
[20:10:53] *** ChanServ sets mode: +o jdm
[20:11:44] *** Quits: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP) (Quit: This computer has gone to sleep)
[20:14:53] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Ping timeout)
[20:14:59] *** Joins: jmmk (jmmk@moz-3BDBD2C0.hfc.comcastbusiness.net)
[20:15:14] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[20:15:20] <mcpherrin> cb
[20:15:25] <mcpherrin> oops
[20:15:51] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[20:16:32] *** Joins: enos (jkingyens@moz-15FB2963.hfc.comcastbusiness.net)
[20:17:25] *** Quits: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP) (Quit: buildmaster reconfigured: bot disconnecting)
[20:17:26] *** Joins: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP)
[20:17:30] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[20:17:37] *** Joins: zucchini (Mibbit@moz-4A19983C.ip227.fastwebnet.it)
[20:17:53] *** Quits: canhtak (canhtak@moz-805AE185.wl.t.ulaval.ca) (Quit: canhtak)
[20:17:58] *** Quits: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net) (Quit: dherman)
[20:20:49] *** Quits: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP) (Quit: buildmaster reconfigured: bot disconnecting)
[20:21:53] *** Joins: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP)
[20:22:06] <zucchini> is it possible to cast a clike enum to uint and back?
[20:22:20] <cmr> to uint yes, not back, at least not safely.
[20:22:36] <cmr> see ToPrimitive and FromPrimitive (which can be used with deriving) for safe wrappers.
[20:24:31] *** Quits: jdm (jdm@FCCEA34F.7672369.D8E68FF6.IP) (Input/output error)
[20:26:50] *** Quits: japaric (japaric@C87928B9.6A7849D9.95AE23EB.IP) (Quit: WeeChat 0.4.3)
[20:27:07] *** Joins: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[20:27:45] *** Joins: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP)
[20:27:50] *** Quits: enos (jkingyens@moz-15FB2963.hfc.comcastbusiness.net) (Quit: enos)
[20:27:52] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[20:30:52] *** Joins: eddyb (eddy@F8B50789.F33C1089.FB866788.IP)
[20:31:12] *** Quits: tulloch (tulloch@2A036BF4.7B33B9A1.EFF8B7BF.IP) (Connection reset by peer)
[20:31:24] *** Quits: EastByte_ (EastByte@moz-59E49508.ewe-ip-backbone.de) (Ping timeout)
[20:32:03] *** Joins: tyna (liadon@moz-BB1BAD9A.dynamic.chello.pl)
[20:32:33] *** Joins: japaric (japaric@C87928B9.6A7849D9.95AE23EB.IP)
[20:32:36] *** Joins: EastByte_ (EastByte@moz-4D708C0C.ewe-ip-backbone.de)
[20:33:17] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[20:34:03] *** Quits: edwardw (edwardw@2BFF2300.F4429B.7E4FEB66.IP) (Ping timeout)
[20:34:42] <kmc> in the DST world, will bare closures become a real (unsized) type, such that we can do ~(fn(A) -> B) and Rc<fn(A) -> B> and such?
[20:35:24] <eddyb> kmc: would be easier if they'd just become sugar for trait objects
[20:35:43] <eddyb> we could have VG by now, if I were more efficient and more persuasive
[20:36:00] <mcpherrin> VG?
[20:36:03] *** Joins: edwardw (edwardw@CDC87030.9642909.B3B412E5.IP)
[20:36:05] *** Quits: rootnode (rootnode@moz-30F8AAED.pools.arcor-ip.net) (Ping timeout)
[20:36:16] <kmc> also I heard that vector literal syntax [a,b] is going away... that's madness
[20:36:23] <kmc> will it return once the transition to new vectors is complete?
[20:36:35] <eddyb> who said that's going away?
[20:36:41] <benh> kmc: I think the bare closures unsizedness thing is a pet issue for some people, but not for 1.0
[20:36:44] <kmc> heard from a friend
[20:36:51] <kmc> i haven't been paying close attention
[20:36:56] <aatch> kmc, ~[] is temporarily going away
[20:36:59] <benh> ~[a, b, c] isn't gonna be a Vec<> literal
[20:37:07] <eddyb> kmc: that's exclusively [T, ..2] which is staying
[20:37:29] <benh> ... and that is gonna coerce to an unsized [T], right?
[20:37:32] <aatch> Oh, btw, with https://github.com/mozilla/rust/pull/12947, you'll be able to write vec![1,2,3]
[20:38:38] <kmc> aatch: and ~[T] will return, as an ordinary application of ~ to [T]?
[20:38:48] *** Joins: rootnode (rootnode@moz-4349A9F.pools.arcor-ip.net)
[20:38:53] <kmc> and then would ~[1,2] also work? seems so
[20:38:56] <eddyb> kmc: to [T, ..N]
[20:39:08] <eddyb> and then ~[T, ..N] will coerce to ~[T]
[20:39:13] <benh> ~[T] is gonna be a non-growable heap-allocated array thing
[20:39:14] <kmc> i see. but it still won't be growable
[20:39:16] <kmc> yeah
[20:39:22] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Ping timeout)
[20:39:29] <eddyb> there was a file in trans creating fixed-length Vec<T> then giving them out as slices
[20:39:46] *** Joins: Doppp (Doppp@310D5BF1.5E7911EA.DA40C4B3.IP)
[20:39:51] <eddyb> that file is not using any vec! at all anymore, in my local branch
[20:40:12] <eddyb> at least abuse is easier to spot than ~[...]
[20:40:27] <eddyb> but I also doubt very general usefulness
[20:40:37] *** Quits: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Input/output error)
[20:41:04] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[20:41:08] *** Joins: evanm (evanm@636AC086.5999CED5.71743E61.IP)
[20:41:59] <edwardw> https://gist.github.com/edwardw/acc30ec58b2afffc9c31 what should be the inferred variances of 'a and T, respectively?
[20:42:39] <eddyb> edwardw: invariant for both 'a and T
[20:42:50] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[20:42:56] <eddyb> assuming the markers are the opposite of what &'a T does
[20:42:57] <edwardw> eddyb: why not the declared ones?
[20:43:03] <eddyb> "declared"?
[20:43:07] <cmr> the markers
[20:43:11] <edwardw> the markers 
[20:43:14] *** Quits: jmmk (jmmk@moz-3BDBD2C0.hfc.comcastbusiness.net) (Ping timeout)
[20:43:15] <cmr> edwardw: th markers take precedence I think
[20:43:18] <eddyb> and ignore &'a T?
[20:43:34] <edwardw> that's my question :)
[20:43:34] <eddyb> cmr: AFAIK the markers can only add, not subtract
[20:43:42] *** Quits: Rym (y@B9974C6D.8A65FA57.8772DA20.IP) (Ping timeout)
[20:43:47] <edwardw> cmr: the result is both invariant
[20:43:59] <eddyb> good, that's what I would expect
[20:44:01] <edwardw> a bit surprising to me
[20:44:06] <cmr> eddyb: I think the markers should always take precedence.
[20:44:15] <cmr> You're telling variance inference "step back, I know what I'm doing"
[20:44:17] <eddyb> cmr: that would be fringe IMO
[20:44:27] <eddyb> since markers aren't unsafe
[20:44:39] *** Joins: jmmk (jmmk@moz-3BDBD2C0.hfc.comcastbusiness.net)
[20:44:40] <aatch> nah, the markers are there for when inference doesn't work at all.
[20:44:40] *** Joins: Ms2ger (Ms2ger@moz-CE3CEBEE.access.telenet.be)
[20:44:42] *** Joins: erickt (etryzelaar@49C4075F.3AC15C18.2321E71E.IP)
[20:44:48] <eddyb> cmr: you've now created a safe structure that you can do unsafe things with
[20:44:48] *** Quits: dschatzberg (dschatzber@moz-E2680405.bu.edu) (Input/output error)
[20:45:01] <eddyb> that doesn't sound sane
[20:45:18] <eddyb> you should be able to restrict variance, not loosen it
[20:45:23] <aatch> if you have something like struct Foo<T>; then it'll infer T as bivariant
[20:45:57] <edwardw> hmm, then I thought it all wrong :(
[20:46:22] <aatch> the markers are to *help* the inference engine, not to control it.
[20:46:23] <edwardw> markers are additional constraints then?
[20:46:28] *** Joins: ahunt (ahunt@moz-1C60F995.range31-53.btcentralplus.com)
[20:46:28] <eddyb> edwardw: yes :)
[20:46:40] <eddyb> and that's the easiest way to implement them, too
[20:46:44] <edwardw> eddyb: cool, I was all wrong this week then
[20:46:49] <eddyb> LOL
[20:46:50] <aatch> like lifetime parameters, you can't control the lifetimes, just help the compiler reason about them.
[20:47:02] *** Joins: Rym (y@B9974C6D.8A65FA57.8772DA20.IP)
[20:47:20] *** Joins: Ferreus (ferreus@moz-10D7207C.lsn.wtnet.de)
[20:47:22] *** Joins: jviereck (Adium@moz-3B5248BD.dclient.hispeed.ch)
[20:48:06] <eddyb> cmr, edwardw: if that structure were lifetime covariant, you could do fn foo<'a>(x: S<'a>) -> S<'static> {x}
[20:48:22] <eddyb> that's completely safe code, bypassing borrowck
[20:48:35] <eddyb> definitely not what you want
[20:48:58] <edwardw> but according to the doc of CovariantLifetime<T>, that's something one can do sometimes
[20:49:18] <eddyb> yes, but not with a borrowed reference
[20:49:27] <edwardw> ok
[20:50:15] *** Quits: nical (nico@87C1F78E.1DE10CA8.D8E68FF6.IP) (Client exited)
[20:50:57] *** Quits: edwardw (edwardw@CDC87030.9642909.B3B412E5.IP) (Quit: Leaving...)
[20:51:08] *** Joins: Havvy (Havvy@moz-4FE57F72.hsd1.wa.comcast.net)
[20:51:23] *** Joins: IanCormac84 (User@DD10B2F0.64D641E5.67DFF8B4.IP)
[20:51:59] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[20:52:21] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[20:52:53] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[20:53:31] <Ms2ger> Did something change about swap_remove?
[20:53:31] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Connection reset by peer)
[20:53:41] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[20:53:56] <sfackler> not that I know of
[20:54:19] <Ms2ger> Returns an option where it didn't last month?
[20:54:46] <sfackler> oh, it probably used to fail if the index was out of bounds
[20:54:51] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[20:55:22] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[20:55:50] *** Joins: justin (justin@A2D171E0.83BCE10.DDE5D3F6.IP)
[20:56:12] * Ms2ger unwraps his way to victory
[20:56:29] <Ms2ger> Or somewhat-further-from-defeat
[20:56:58] * eddyb throws a bin of candy wrappers at Ms2ger
[20:57:29] <Ms2ger> You!
[20:57:44] <Ms2ger> You and your borrow() removal!
[20:57:52] *** Quits: bjustin (bjustin@moz-8FC28563.sierrabravo.net) (Quit: Textual IRC Client: www.textualapp.com)
[20:58:04] <eddyb> Ms2ger: hey, how else would you make your code nice :P?
[20:58:24] *** Quits: doener (doener@moz-C68F600D.unity-media.net) (Quit: leaving)
[20:58:52] *** Quits: Rym (y@B9974C6D.8A65FA57.8772DA20.IP) (Ping timeout)
[20:58:57] *** Quits: philix (felipe@4BFF164F.661F4D81.648674BD.IP) (Ping timeout)
[20:59:00] *** Joins: dwrensha (chatzilla@moz-B23D2FF6.pitbpa.east.verizon.net)
[20:59:01] <Ms2ger>             for y_offset in kid_base.fixed_descendants.static_y_offsets.move_iter() {
[20:59:02] <Ms2ger>                 // The offsets are wrt the kid flow box. Translate them to current flow.
[20:59:02] <Ms2ger>                 y_offset = y_offset + kid_base.position.origin.y;
[20:59:10] <Ms2ger> Was that previously allowed?
[20:59:32] <Ms2ger> Now: error: re-assignment of immutable variable `y_offset`
[20:59:51] *** Quits: jmmk (jmmk@moz-3BDBD2C0.hfc.comcastbusiness.net) (Ping timeout)
[20:59:53] <eddyb> there was a bug in match
[21:00:11] <eddyb> and I'm guessing for uses match? or maybe not :/
[21:00:47] <Ms2ger> Probably does
[21:01:33] <eddyb> rusti: for Some(_) in Some(Some(1)).move_iter() {}
[21:01:34] -rusti- <anon>:16:9: 17:6 error: non-exhaustive patterns: None not covered
[21:01:34] -rusti- <anon>:16         for Some(_) in Some(Some(1)).move_iter() {}
[21:01:34] -rusti- <anon>:17     };
[21:01:34] -rusti- error: aborting due to previous error
[21:01:34] -rusti- application terminated with error code 101
[21:01:48] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[21:01:48] <eddyb> Ms2ger: it does. yeah, that was a bug that got fixed
[21:01:57] <bvssvni> ha
[21:02:00] *** Joins: Rym (y@B9974C6D.8A65FA57.8772DA20.IP)
[21:02:01] <eddyb> rusti: let Some(_) = Some(1);
[21:02:02] -rusti- <anon>:16:13: 16:20 error: refutable pattern in local binding
[21:02:02] -rusti- <anon>:16         let Some(_) = Some(1);
[21:02:02] -rusti-                       ^~~~~~~
[21:02:02] -rusti- error: aborting due to previous error
[21:02:02] -rusti- application terminated with error code 101
[21:02:08] <eddyb> (different error)
[21:02:10] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[21:02:11] *** Joins: drawoc (mike@moz-BAC1D3AB.res-cmts.sesh.ptd.net)
[21:02:12] *** Parts: int3_ (int3_@moz-15FBE4B6.subnet-224.amherst.edu) (Leaving...)
[21:02:22] <Ms2ger> Ha!
[21:02:37] <Ms2ger> There's all this code with // NOTE: work around borrowchk issue
[21:02:47] <Ms2ger> Which all turned into "error: cannot move out of dereference of `&`-pointer"
[21:02:48] <justin> If I have a static mut struct that has fields that are additional structs, how can I define all of those structs?
[21:02:58] *** Quits: jviereck (Adium@moz-3B5248BD.dclient.hispeed.ch) (Ping timeout)
[21:03:03] <Ms2ger> Static mut?
[21:03:06] <Ms2ger> There be dragons
[21:03:18] <justin> yes. this is for kernel development
[21:03:32] <justin> so i don't have much choice
[21:03:36] <bvssvni> justin: the lazy_init macro?
[21:03:51] *** Joins: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch)
[21:04:07] <bvssvni> justin: oh forget it, not sure if I understand the need
[21:04:15] <justin> bvssvni: how does that work? You mean like setting values to zero or something and then init them in a function?
[21:04:25] <eddyb> justin: Struct {a: StructA {...}, b: StructB {...}}?
[21:04:30] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[21:04:58] *** Joins: hdevalence (quassel@moz-D125A39F.home3.cgocable.net)
[21:04:59] <justin> eddyb: I tried that and it was giving syntax errors. I was wondering if that was correct though
[21:05:12] <eddyb> it is, maybe you had a typo
[21:05:15] <eddyb> justin: gist?
[21:05:28] *** Quits: Rym (y@B9974C6D.8A65FA57.8772DA20.IP) (Ping timeout)
[21:05:31] <bvssvni> justin: one moment, searching for it
[21:05:38] *** Quits: Blub\w (wry@620605B3.71150E1A.237AE2BA.IP) (Ping timeout)
[21:05:48] <eddyb> bvssvni: I doubt justin needs lazy init, just struct initializers :P
[21:05:51] *** Joins: Blub\w (wry@620605B3.71150E1A.237AE2BA.IP)
[21:05:57] *** Quits: goffrie (goffrie@moz-68961183.dsl.ncf.ca) (Ping timeout)
[21:05:58] *** Joins: goffrie (goffrie@moz-CEDBC6D9.dsl.ncf.ca)
[21:06:11] <eddyb> justin: keep your friends close
[21:06:18] <eddyb> justin: and your compiler errors closer
[21:06:29] <eddyb> as they are the way to enlightment
[21:06:42] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[21:06:43] <bvssvni> justin: https://gist.github.com/Kimundi/8782487
[21:07:01] <eddyb> bvssvni: I bet you justin doesn't need that
[21:07:21] <bvssvni> that's what I thought
[21:07:33] <eddyb> (but we do have a few nasty syntax errors, even though we're like LL(3) and can give meaningful contextual errors most of the time)
[21:07:54] *** Joins: jmmk (jmmk@moz-3BDBD2C0.hfc.comcastbusiness.net)
[21:08:03] <kimundi> rusti: struct Foo {data: uint} struct Bar { a: Foo, b: Foo } static C = Bar { a: Foo { data: 1}, b: Foo { data: 2}}; C
[21:08:03] -rusti- <anon>:16:72: 16:73 error: expected `:` but found `=`
[21:08:04] -rusti- <anon>:16         struct Foo {data: uint} struct Bar { a: Foo, b: Foo } static C = Bar { a: Foo { data: 1}, b: Foo { data: 2}}; C
[21:08:04] -rusti-                                                                                  ^
[21:08:04] -rusti- application terminated with error code 101
[21:08:13] <kimundi> rusti: struct Foo {data: uint} struct Bar { a: Foo, b: Foo } static C: Bar = Bar { a: Foo { data: 1}, b: Foo { data: 2}}; C
[21:08:14] -rusti- pastebinned 8 lines of output: http://sprunge.us/FTOV
[21:08:29] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[21:08:39] <kimundi> rusti: struct Foo {data: uint} struct Bar { a: Foo, b: Foo } static C: Bar = Bar { a: Foo { data: 1}, b: Foo { data: 2}}; println!("{:?}", C);
[21:08:40] -rusti- main::Bar{a: main::Foo{data: 1u}, b: main::Foo{data: 2u}}
[21:08:41] -rusti- ()
[21:08:58] <kimundi> rusti: struct Foo {data: uint} struct Bar { a: Foo, b: Foo } static mut C: Bar = Bar { a: Foo { data: 1}, b: Foo { data: 2}}; println!("{:?}", unsafe{C});
[21:08:59] -rusti- main::Bar{a: main::Foo{data: 1u}, b: main::Foo{data: 2u}}
[21:08:59] -rusti- ()
[21:09:10] <kimundi> justin: seems to work
[21:09:43] <justin> kimundi: that might work since before I was trying to make them mutables... they don't necessarily need to be right then although the parent sturct has to be
[21:09:51] <justin> kimundi: I'll try it
[21:10:09] *** Quits: tiffany (kawaii@moz-7AF84602.dhcp.embarqhsd.net) (Ping timeout)
[21:10:16] *** Quits: Guest__ (textual@3E0487DF.D8252BC.9532F1CE.IP) (Quit: Textual IRC Client: www.textualapp.com)
[21:10:30] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[21:10:30] <kimundi> justin: I'm not entirely following. :) What is mutable, and what isn't?
[21:10:48] <Tobba> hm
[21:10:57] <Tobba> trying to come up with a way to keep a huge list of bytecode instructions in my code
[21:11:07] *** Joins: philix (felipe@moz-D140DE32.user.veloxzone.com.br)
[21:11:09] <Tobba> in a way that I can directly reference them as values/types but still keep a list around
[21:11:11] *** Joins: Rym (y@B9974C6D.8A65FA57.8772DA20.IP)
[21:11:27] *** Joins: leowoe (Leo@moz-72D47201.dclient.hispeed.ch)
[21:11:33] *** Quits: leowoe (Leo@moz-72D47201.dclient.hispeed.ch) (Connection reset by peer)
[21:12:16] <kimundi> Tobba: Are we talking about compiletime constant definitions, or dynamically computed values here?
[21:12:26] <Tobba> compiletime
[21:12:33] <Tobba> I think I might have them as statics in a special opcodes module
[21:12:37] <Tobba> then a list of them all
[21:12:39] <eddyb> Tobba: we usually use a macro for this
[21:12:48] <eddyb> to create both structures at the same time
[21:12:53] <Tobba> hm
[21:12:55] <eddyb> (two or more, actually)
[21:13:02] <eddyb> https://gist.github.com/bvssvni/9674632 hmm, now I understand more :D
[21:13:34] <justin> kimundi: I have to go for now but I think I can get it now thank you
[21:13:39] <eddyb> bvssvni: could you implement monadic "return"?
[21:13:51] <justin> eddyb: thank you as well
[21:13:52] <Manishearth> Uh, will macros let me use idents in generics?
[21:13:58] *** Quits: justin (justin@A2D171E0.83BCE10.DDE5D3F6.IP) (Quit: Konversation terminated!)
[21:13:59] <Manishearth> As in if I have $type:ident
[21:14:07] <eddyb> Manishearth: yeah
[21:14:15] <eddyb> you can't put macro invocations in idents
[21:14:17] <Manishearth> will it let me use the token &JS<$type>?
[21:14:21] <eddyb> sure
[21:14:41] <Manishearth> Hm, it says "found `type` in ident position"
[21:14:45] <kimundi> sure? Doesn'T it have to be $ty ?
[21:14:55] *** Quits: jmmk (jmmk@moz-3BDBD2C0.hfc.comcastbusiness.net) (Ping timeout)
[21:14:58] <eddyb> ah, right
[21:15:04] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[21:15:04] *** ChanServ sets mode: +ao dherman dherman
[21:15:09] <Manishearth> oh, reserved words -_-
[21:15:15] <eddyb> s/reserved/used
[21:15:21] <eddyb> type Foo = Bar; is Rust syntax
[21:15:31] <Manishearth> gah
[21:16:24] <eddyb> bvssvni: trait Monad<T> {fn return_(x: T) -> Self;} impl<T> Monad<T> for Option<T> {fn return_(x: T) -> Option<T> {Some(x)}}
[21:17:06] <Tobba> eddyb: I basicaly need to specify opcodes like (0x0033, "get", [ValueRef]) somehow
[21:17:15] <Tobba> I guess I could use a macro to build both the full list of them and the statics
[21:17:59] *** Joins: jmmk (jmmk@moz-3BDBD2C0.hfc.comcastbusiness.net)
[21:18:18] <Tobba> not sure how I'd pull that off though
[21:18:38] *** Joins: tiffany (kawaii@moz-7AF84602.dhcp.embarqhsd.net)
[21:18:40] <eddyb> bvssvni: aww, I see, you'd have to use and_then and closures to get rid of Some/Ok in the patterns
[21:19:13] <eddyb> Tobba: pretty easy, actually
[21:19:14] <rootnode> is there a way to implement Add for two different right hand sides?
[21:19:23] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:19:30] <eddyb> Tobba: look at src/librustc/middle/lang_items.rs
[21:19:39] <eddyb> rootnode: with another trait
[21:19:48] <Tobba> eddyb: would also be good if I didnt have to make an allocation per opcode when putting the decoded ones in a list, but I thik that'd come with DST
[21:19:55] *** Quits: jmmk (jmmk@moz-3BDBD2C0.hfc.comcastbusiness.net) (Ping timeout)
[21:20:21] <eddyb> as in, impl<U: MyAdd<T, R> , R> Add<U, R> for T
[21:20:34] <eddyb> rootnode: I think that may be a form of "double dispatch" actually
[21:20:41] *** Quits: ahunt (ahunt@moz-1C60F995.range31-53.btcentralplus.com) (Ping timeout)
[21:20:48] *** Quits: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP) (Quit: This computer has gone to sleep)
[21:21:04] <eddyb> bvssvni: I still like it as chained patterns, and I may use it against the pyramids of doom :)
[21:21:57] *** Quits: fabiand (fabiand@moz-4A60F0CD.adsl.alicedsl.de) (Quit: Verlassend)
[21:22:10] <bbloom> unsafe/interop question: I've got a bunch of structs w/ layout that foreign code cares about, but i'd like to be able to stuff such a struct back in to an enum with a discriminator for type safety / matching. Is this a crazy idea? Advice on where to start for such a thing?
[21:22:13] <Rym> Is typedefing a vector of a certain type, a bad strategy? e.g. type Hand<'r> = &'r [Card]
[21:22:47] <eddyb> Rym: if you use the type a lot, not really
[21:23:25] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[21:23:40] <eddyb> bbloom: as in, enum Foo {Bar(StructA), Baz(StructB)}? that will work just fine
[21:23:40] <kimundi> bbloom: I don't really understand the question here :)
[21:23:46] *** Joins: jmmk (jmmk@moz-3BDBD2C0.hfc.comcastbusiness.net)
[21:24:07] <Ms2ger> error: internal compiler error: deref invoked on expr of illegal type std::rc::Rc<layers::layers::ContainerLayer>
[21:24:22] <Ms2ger> Pointing to...
[21:24:22] <bbloom> sorry, trying to spare you a ton of context
[21:24:27] <Ms2ger> *drumroll*
[21:24:27] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[21:24:30] <Ms2ger> /* This Source Code Form is subject to the terms of the Mozilla Public
[21:24:37] <sfackler> Ms2ger: acrichto has an issue filed on that iirc
[21:24:46] <Havvy> Ms2ger:  XD
[21:24:52] <eddyb> Ms2ger: the license is buggy, obviously
[21:25:07] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[21:25:12] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[21:25:17] <eddyb> Ms2ger: the real answer is "I dun goofd" - there is an issue for this
[21:25:36] <Ms2ger> eddyb, do you have a workaround?
[21:25:40] <eddyb> not why it happens, you can replace autoderef with manual deref and *I think* that can work
[21:25:47] <eddyb> at least that's what I recall acrichto doing
[21:26:03] <Ms2ger> Uh
[21:26:11] <Ms2ger> How can I tell which deref is guilty?
[21:26:14] <bbloom> eddyb: kimundi: these structs have a pointer in them and i can do some pointer math to get back to an "index" that is essentially a type id. I'd like to take that type id and the struct pointer and construct an enum variant from it
[21:26:15] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[21:26:20] <eddyb> Ms2ger: oh, but you don't know from where. crap :S
[21:26:27] <Ms2ger> No
[21:26:41] <Ms2ger> I've narrowed it down to all of Servo
[21:26:48] <eddyb> Ms2ger: you can run with RUST_LOG=rustc::middle::trans and look at the last 5-50 lines
[21:26:57] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[21:27:19] * Ms2ger wonders if his terminal will survive that
[21:27:52] <kimundi> bbloom: Do you want to thread that struct as a enum directly, or do you just want to wrap it in a new enum?
[21:28:14] <eddyb> Ms2ger: less, you fool!
[21:28:41] <bbloom> kimundi: i don't care as long as i can give a discriminator-free bag of bytes to the foreign code
[21:28:48] <eddyb> Ms2ger: though it may be on stderr and I don't know how to redirect that in bash. I know it's 2>| less or ^| less in fish
[21:29:03] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[21:29:23] <eddyb> bbloom: just wrap the pointer in a variant
[21:29:44] <eddyb> and then pattern match later
[21:29:55] <kimundi> bbloom: If redundancy is okay you could just check at construction that it is the right type and construct the right variant, and then reverse that for sending it to foreign code
[21:30:02] <Ms2ger>  2>&1 > log?
[21:30:05] <acrichto> Ms2ger: oh btw that bug is fixed by not doing autoderef in cross-crate generic methods
[21:30:09] <eddyb> Ms2ger: mmmaybe
[21:30:16] <Ms2ger> acrichto, which one? :)
[21:30:22] <Ms2ger> Nope
[21:30:31] <acrichto> Ms2ger: if you have a generic method, use (*ptr).method() instead of ptr.method()
[21:30:43] <acrichto> if you're using the method across crates (sorry that's a little vague)
[21:30:54] <Ms2ger> acrichto, I presume I have one, but the error message is pointing at the license header
[21:30:55] <eddyb> acrichto: but... I encode the relevant tables :/
[21:31:08] <Ms2ger> acrichto, and this is upgrading Servo over autoderef
[21:31:11] <acrichto> Ms2ger: the span is wrong, you want to look in upstream crates
[21:31:13] <eddyb> Ms2ger: because it's inlined code that fails
[21:31:24] <eddyb> not crate-local code
[21:31:24] <acrichto> Ms2ger: somewhere in an upstream crate there's a method which is generic and uses autoderef
[21:31:42] <eddyb> bbloom: if all the variants have one pointer each, pattern matching should be optimized to a noop
[21:31:50] <bbloom> eddyb: kimundi: yeah, i expected i'd have struct Foo { ... } , struct Bar { ... } etc and then enum Whatever { XFoo(*Foo), XBar(*Bar), XUnknown(*Void) }
[21:31:58] <Ms2ger> 300k lines of output, still going
[21:32:02] *** Quits: jackneill (jackneill@moz-9A6532AC.pool.digikabel.hu) (Input/output error)
[21:32:03] <Ms2ger> 400k
[21:32:03] <eddyb> bbloom: that will work
[21:32:13] <acrichto> Ms2ger: for example: https://github.com/alexcrichton/rust/blob/1c33c77e184c4fa688ccb2be56f35fe96307e322/src/libsyntax/util/interner.rs#L79-L85
[21:32:24] <acrichto> rustc can't use that method unless it specifically has (*map)
[21:32:28] <bbloom> eddyb: kimundi: is there some way to save that redundancy? can i just define struct variants & peal of the discriminator somehow?
[21:32:29] <acrichto> b/c it's generic
[21:32:49] <Ms2ger> 500k
[21:32:51] <eddyb> bbloom: pattern matching is safer :/
[21:33:02] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[21:33:34] <eddyb> bbloom: you could maybe write a macro, producing the variants and code to get a *c_void (or equivalent) pointer back
[21:33:35] <bbloom> eddyb: yeah, i want the safety of pattern matching when interoping with external code that does discriminated unions with a type pointer rather than a type id/index
[21:33:50] *** Joins: heftig (heftig@moz-B0C9DC6C.dip0.t-ipconnect.de)
[21:34:06] *** Joins: krebbit (Mibbit@A54702E.4B947797.97F07BE5.IP)
[21:34:22] <Ms2ger> acrichto, so my error is in the servo crate... Who is calling whom?
[21:34:46] <eddyb> Ms2ger: the error is in one of the crates you're using
[21:34:57] <eddyb> well, caused by one of the crates you're using
[21:34:57] <Ms2ger> I'm using a million crates
[21:35:01] <eddyb> good luck
[21:35:10] *** Quits: Anupkumar (uid16774@moz-A42E5B7B.irccloud.com) (Quit: Connection closed for inactivity)
[21:35:10] <eddyb> Ms2ger: the trans output should help though
[21:35:20] <acrichto> Ms2ger: this is a big bug, you may want to wait until it's fixed if you're having trouble to find a workaround
[21:35:23] *** Joins: judder (maradukewa@75FA4DEE.A989D80C.78E362FE.IP)
[21:35:26] <eddyb> maybe if you used less instead of writing it to a file, it wouldn't be as slow ;)
[21:35:59] <Ms2ger> less gives me the start, no?
[21:36:05] <huhlig> ok, I am feeling stupid. How do I give rust multiple input files to compile
[21:36:13] *** Quits: Savago (Savago@816F9901.E820043D.D4C04133.IP) (Quit: Savago)
[21:36:13] *** Quits: exobit_ (textual@moz-E06F46F0.corp.bitshelter.com) (Quit: )
[21:36:23] <eddyb> Ms2ger: ... have you ever used less?
[21:36:28] <Ms2ger> Yes?
[21:36:31] <acrichto> Ms2ger: are you trying to look at trans debug output to figure out wher eit is?
[21:36:43] <eddyb> Ms2ger: it buffers the output in memory
[21:36:50] * Ms2ger tries that
[21:37:00] <Ms2ger> Oh huh
[21:37:03] <eddyb> acrichto: that's what the 500k lines was about :P
[21:37:07] <Ms2ger> Gah
[21:37:09] <bbloom> eddyb: assuming i have a pointer to an enum value with repr(int32), is it safe to assume i can just add sizeof(int32) to that pointer and get the a struct variant's body?
[21:37:19] <acrichto> Ms2ger: I wouldn't recommend that, I ran it for 3 hours on rustc and it never terminted
[21:37:24] <acrichto> Ms2ger: it was faster to look at upstream crates
[21:37:37] <eddyb> Ms2ger: press > to keep scrolling down
[21:37:38] <Havvy> huhlig:  rustc should pick up modules added via `mod x;` automatically, and for libraries, pass directories pointing to that library with -L
[21:37:42] <eddyb> acrichto: servo can't be that big, can it?
[21:37:46] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[21:38:01] <eddyb> Ms2ger: you could probably restrict it and still get some decent clues
[21:38:05] *** Quits: Mardak (Mardak@4851473D.BD9ECD5D.97D164AB.IP) (Connection reset by peer)
[21:38:13] <eddyb> bbloom: no, it's not safe
[21:38:17] *** Joins: Mardak (Mardak@4851473D.BD9ECD5D.97D164AB.IP)
[21:38:43] <eddyb> bbloom: you can probably do it now and get it to work, but we won't ensure it keeps working
[21:38:43] <kimundi> bbloom: Well, you need to consider alignment as well, and we lack the ability to force it to be always safe atm
[21:39:15] <bbloom> bummer. but you do promise alignment/layout/etc for regular structs, right?
[21:39:30] <eddyb> I'd like that to change :D
[21:39:44] <eddyb> and require #[repr(C)] for FFI compat
[21:39:46] <bbloom> change from promised to not promised, or the other way? :-P
[21:40:00] <bbloom> ah, ok, as long as there is a way to ask for C compat
[21:40:02] <eddyb> because we have padding bloat
[21:40:16] *** Quits: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl) (Client exited)
[21:40:32] <aatch> eddyb is like a less-cynical version of strcat :P
[21:41:15] <huhlig> so using mod will just grab everything in a directory?
[21:41:31] <eddyb> huhlig: it will grab mod.rs
[21:41:53] <eddyb> (in that directory, if it's a directory)
[21:42:07] <eddyb> aatch: but strcat doesn't hate Haskell syntax/methodology
[21:42:27] <eddyb> I guess I'm still not cynical enough
[21:43:08] <eddyb> Ms2ger: derp, couldn't you have used this information to track down the source? std::rc::Rc<layers::layers::ContainerLayer>
[21:43:27] <Ms2ger> Maybe
[21:43:32] <Ms2ger> That's not code I know
[21:43:52] <eddyb> just look for Rc<.*ContainerLayer>
[21:44:11] <bbloom> eddyb: so if i'm trying to avoid depending on likely-to-change things, do i rely on variant layout or macros ;-)
[21:44:22] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[21:44:28] <eddyb> bbloom: macros :D
[21:44:47] <kimundi> huhlig: http://static.rust-lang.org/doc/master/tutorial.html#crates-and-the-module-system
[21:44:57] *** Quits: nkoep (nik@moz-A25B8A61.vpn.rwth-aachen.de) (Ping timeout)
[21:45:06] <bbloom> eddyb: somewhat unrelated question.... can i get the size of structs and offsets of fields in macros?
[21:45:48] <kimundi> bbloom: size yes, offset I think we don't have a nice way yet?
[21:45:49] <eddyb> bbloom: size, yes (std::mem::size_of::<T>()), for offsets of fields there is a hack
[21:45:49] <aatch> first stage of implementing shuffle syntax got to trans \o/
[21:46:01] * eddyb hugs aatch
[21:46:22] <bbloom> kimundi:  thanks. eddyb: what's the hack?
[21:46:27] <eddyb> we can add "first class SIMD" to our selling point list :P
[21:46:38] <aatch> this should get shuffling past typeck so it explodes in trans
[21:46:51] <kimundi> bbloom: create a nullpointer to the type, take address of a filed, cast to integer
[21:46:58] <eddyb> bbloom: &(*(0 as *T)).field as *FieldType as uint
[21:46:58] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[21:47:40] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[21:47:41] <bbloom> ah cool, not too bad for those of us who are used to far less type safety :-)
[21:47:43] <bbloom> thanks guys
[21:47:49] *** Quits: dwrensha (chatzilla@moz-B23D2FF6.pitbpa.east.verizon.net) (Quit: ChatZilla 0.9.90.1 [Firefox 27.0.1/20140212131424])
[21:48:01] *** Quits: krebbit (Mibbit@A54702E.4B947797.97F07BE5.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[21:48:10] *** Quits: vikstrous (v@13F2CEC5.7672369.D8E68FF6.IP) (Ping timeout)
[21:48:18] *** Quits: lawrence (lawrence@moz-EAABC905.wireless.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[21:48:42] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[21:49:42] <khodzha> Does mod.rs provide any unusual behavoir for crates imports?
[21:50:01] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[21:50:20] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[21:50:47] <kimundi> khodzha: Its just a naming convention that is supported by the compiler directly.
[21:51:04] *** Quits: akhosrav (akhosrav@moz-75023AE8.tukw.qwest.net) (Ping timeout)
[21:51:17] <Tobba> eddyb: I cant get ($($opcode:expr, $name:ident, $asmname:expr, [($operand:ident)*];)*) to match the ValueRef part of 0x33, Get, "get", [ValueRef];
[21:51:30] <khodzha> kimundi: and what is supported? :)
[21:51:50] <khodzha> naming convention for what?
[21:52:10] <sfackler> if you have a "mod foo;" the compiler will look for foo.rs and foo/mod.rs
[21:52:16] <kimundi> khodzha: `mod foo;` is equivalent to `mod foo { /* content of foo.rs or foo/mod.rs */ }`
[21:53:01] <eddyb> Tobba: you're missing a $
[21:53:08] <eddyb> Tobba: before ($operand
[21:53:08] <kimundi> This allows you to vary you file management between "flat list" and "directory tree mirroring the module tree", without allowing you to inverting a level
[21:53:21] *** Quits: nszceta (nszceta@moz-E458A7C0.pharm.pitt.edu) (Quit: Textual IRC Client: www.textualapp.com)
[21:53:23] *** Quits: Jesin (Jesin@moz-48B48C95.eecs.lehigh.edu) (Ping timeout)
[21:53:37] <Tobba> eddyb: not sure how to handle the comma either
[21:53:59] <kimundi> Tobba: comma for what?
[21:54:15] <Tobba> in the list, [a, b, c]
[21:54:36] <eddyb> Tobba: ),*
[21:54:49] <kimundi> [$(...),*] will produce [..., ..., ...]
[21:54:56] <kimundi> [$(...,)*] will produce [..., ..., ...,]
[21:55:11] <kimundi> [$(...)+*] will produce [... + ... + ...,]
[21:55:13] <kimundi> etc
[21:55:28] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[21:55:30] <Tobba> seems to work right, now just gotta figure out this part operands: &[($operand,)*]
[21:55:38] <kimundi> (should not have picked ... there)
[21:55:47] *** Joins: ktt3ja (ktt3ja@moz-54586A12.washdc.fios.verizon.net)
[21:55:50] <Tobba> error: variable 'operand' is still repeating at this depth, not sure what that even means
[21:56:17] <kimundi> Tobba: you have a nesting mismatch between the declared $(...)* nesting and the usage of them
[21:56:27] <Tobba> yeah I just figured it out
[21:56:31] *** Quits: Ms2ger (Ms2ger@moz-CE3CEBEE.access.telenet.be) (Quit: nn)
[21:56:33] <Tobba> missing $
[21:57:46] <eddyb> acrichto: waaaait a second
[21:57:47] <Tobba> although the list isnt excepting the ValueRef, the type inside the list is an OpcodeOperand trait which ValueRef implements though...
[21:58:14] <eddyb> acrichto: I think I really goofed up. there's a certain iteration one has to do to encode the autoderef method map entries
[21:58:28] <eddyb> acrichto: and I don't remember writing that code *down*
[22:00:38] <Tobba> if I try to cast it I get this instead error: mismatched types: expected `&'static [&'static opcode::OpcodeOperand:'static]` but found `&'static [&opcode::OpcodeOperand<no-bounds>]` (expected bounds `'static` but found no bounds)
[22:00:56] *** Joins: NiccosSystem` (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[22:00:59] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[22:01:03] <eddyb> Tobba: you need a cast for each value
[22:01:11] <eddyb> Tobba: but you're in a macro, so you can probably do it
[22:01:25] <Tobba> if I cast to a &OpcodeOperand it gives me that though
[22:01:27] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[22:01:38] <Tobba> not sure how to give it static bounds
[22:01:41] <eddyb> Tobba: oh, right, sorry. looks like a bug
[22:01:45] <Tobba> well shit
[22:01:51] *** Quits: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net) (Connection reset by peer)
[22:01:51] <eddyb> Tobba: maybe `as &'static Trait`?
[22:01:57] <Tobba> tried
[22:02:02] *** Quits: zucchini (Mibbit@moz-4A19983C.ip227.fastwebnet.it) (Quit: http://www.mibbit.com ajax IRC Client)
[22:02:07] <Tobba> "not in constant expression"
[22:02:09] *** Joins: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net)
[22:02:39] *** Quits: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net) (Connection reset by peer)
[22:03:08] *** Joins: zimbatm (zimbatm@moz-D4F596B.cable.virginm.net)
[22:03:11] <eddyb> that's... odd
[22:03:28] *** Quits: NiccosSystem` (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[22:03:29] *** Joins: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se)
[22:03:40] *** Joins: nkoep (nik@moz-CCDD9EE3.pool.mediaways.net)
[22:03:42] <Tobba> yeah not sure what to do about this
[22:04:29] <Tobba> I could do it via a bunch of enums but that would just suck
[22:04:30] <eddyb> Tobba: what about using &'static opcode::OpcodeOperand: instead of &'static opcode::OpcodeOperand in the type?
[22:04:43] <eddyb> the static's type, that is
[22:05:02] *** Joins: jdm (jdm@CC0122E6.8F96AEA7.2D179A7D.IP)
[22:05:02] *** ChanServ sets mode: +o jdm
[22:05:14] <eddyb> that will remove the 'static bound resulting from the 'static lifetime of the trait object
[22:05:21] <eddyb> rusti: &0 as &Clone:'static
[22:05:22] -rusti- pastebinned 8 lines of output: http://sprunge.us/BGeG
[22:05:42] <eddyb> Tobba: ohh that works ^^
[22:05:57] <eddyb> Tobba: as &Trait:'static
[22:06:14] <Tobba> error: can not cast to `&'static opcode::OpcodeOperand:'static` in a constant expression
[22:06:18] <Tobba> not in constant expressions
[22:06:27] <eddyb> but how can you cast at all?
[22:06:52] <eddyb> Tobba: aaaah that just means it's type checking =))
[22:07:12] <eddyb> i.e. you can't do it, but if you have a type error, that shows up first
[22:07:47] <Tobba> ah
[22:07:50] <Tobba> so uh, how would I fix it
[22:08:01] <eddyb> by... not using trait objects?
[22:08:12] <eddyb> rusti: static FOO: &'static Clone = &0;
[22:08:12] -rusti- pastebinned 5 lines of output: http://sprunge.us/eDMG
[22:08:36] <eddyb> rusti: static FOO: &'static Clone = &0 as &Clone:'static;
[22:08:36] -rusti- <anon>:16:38: 16:58 error: can not cast to `&'static std::clone::Clone:'static` in a constant expression
[22:08:37] -rusti- <anon>:16         static FOO: &'static Clone = &0 as &Clone:'static;
[22:08:37] -rusti-                                                ^~~~~~~~~~~~~~~~~~~~
[22:08:37] -rusti- error: aborting due to previous error
[22:08:37] -rusti- application terminated with error code 101
[22:08:47] <Tobba> I suspected as such
[22:09:01] <eddyb> not exactly sure why, though
[22:09:09] <eddyb> Tobba: you can go implement it :)
[22:09:23] <Tobba> implementing that isnt really a good first issue to tackle I think
[22:09:34] <eddyb> Tobba: I started by fixing inline asm
[22:09:52] <eddyb> Tobba: we already do proc/closure coercion from bare fn, in consts
[22:10:03] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[22:11:11] <eddyb> Tobba: just closure, sorry
[22:12:06] *** Quits: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch) (Quit: Leaving.)
[22:12:51] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[22:12:51] *** ChanServ sets mode: +ao pcwalton pcwalton
[22:13:25] *** Quits: harish (harish@moz-A9E56CFE.hfc.comcastbusiness.net) (Quit: Lost terminal)
[22:13:54] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[22:15:18] <eddyb> Tobba: need to replicate meth::trans_trait_cast in consts
[22:15:30] <Tobba> I hope the module isnt named meth
[22:15:33] <Tobba> even though that would be hilarious
[22:15:37] <eddyb> it is
[22:15:40] <Tobba> oh god
[22:15:42] <eddyb> there's also a glue one
[22:16:02] *** Joins: harish (harish@moz-A9E56CFE.hfc.comcastbusiness.net)
[22:17:03] <Tobba> oh boy
[22:17:10] <eddyb> that uses get_vtable which uses emit_vtable_methods which uses trans_fn_ref_with_vtables
[22:18:07] <eddyb> which needs a Block because it may have to do casts
[22:18:34] <eddyb> but... the methods in a vtable are in a global constant, so that doesn't seem right
[22:19:03] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[22:20:03] *** Joins: adonohue (adonohue@55513BD.95D3F462.59D8BB03.IP)
[22:21:01] <Tobba> hm
[22:21:08] <Tobba> it would be nice if there was an Iterable trait
[22:21:11] <eddyb> Tobba: hehe, you'd totally get some funky LLVM errors if it actually used the Block it needed a vtable from
[22:21:18] <eddyb> Tobba: kimundi was working on that
[22:21:52] *** Quits: tiffany (kawaii@moz-7AF84602.dhcp.embarqhsd.net) (Ping timeout)
[22:22:23] <kimundi> Tobba: Look here: https://github.com/rust-lang/rfcs/pull/17
[22:22:32] *** Quits: Blub\w (wry@620605B3.71150E1A.237AE2BA.IP) (Ping timeout)
[22:22:37] <kimundi> In the comments I have a link to a gist where I sketeched something up
[22:22:37] <Tobba> I didnt know there was a rust-lang github
[22:22:45] *** Joins: Blub\w (wry@620605B3.71150E1A.237AE2BA.IP)
[22:22:48] <Tobba> although github appears to be down atm
[22:22:54] <Tobba> or just slow
[22:23:02] *** Joins: tiffany (kawaii@moz-7AF84602.dhcp.embarqhsd.net)
[22:23:05] <kimundi> here's the gist: https://gist.github.com/Kimundi/9683769
[22:23:51] *** Quits: refold (gman@moz-42D68426.a258.priv.bahnhof.se) (Quit: leaving)
[22:24:02] *** Quits: Rym (y@B9974C6D.8A65FA57.8772DA20.IP) (Ping timeout)
[22:24:09] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[22:24:14] <Tobba> I should write an RFC for weak lang items
[22:25:03] <eddyb> Tobba: okay, good news. resolve_default_method_vtables takes bcx (a basic block reference) but only uses tcx (type context)
[22:25:24] <Tobba> help I'm reading wizard
[22:25:46] <Tobba> I should poke around in the compiler though, that does sound doable
[22:26:09] <eddyb> Tobba: trans_fn_ref_with_vtables should use an enum InBlockOrConst<'a> {InBlock(&'a Block<'a>), InConst(&'a CrateContext)}
[22:26:19] <eddyb> Tobba: for the pointer/bit casts it may have to do
[22:27:03] <eddyb> and then get_vtable can take a &CrateContext instead of a &Block, so you can use it from consts
[22:27:47] <eddyb> it would be nice if you would implement both the coercion and the explicit cast (should use the same code)
[22:29:06] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[22:29:19] *** Quits: tigrou3tac (fabien@moz-6E2397FF.fbx.proxad.net) (Ping timeout)
[22:29:35] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[22:30:26] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[22:31:19] *** Joins: mib_68vqd3 (Mibbit@moz-EDB38002.t-com.sk)
[22:31:28] *** Parts: mib_68vqd3 (Mibbit@moz-EDB38002.t-com.sk) ()
[22:31:32] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[22:31:48] *** Quits: evanm (evanm@636AC086.5999CED5.71743E61.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[22:32:19] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Quit: Computer has gone to sleep.)
[22:32:42] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[22:34:11] <eddyb> Tobba: it should just be C_struct(cx, [llconst, meth::get_vtable(cx, ty, origin)]) in the relevant place... hmm...
[22:34:23] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[22:34:33] <Tobba> I'm still curious about the name of that module
[22:34:38] <eddyb> Tobba: method
[22:34:48] <eddyb> (that's where meth comes from)
[22:34:50] <Tobba> thought so
[22:34:57] <eddyb> Tobba: you might have to implement typeck::check::vtable support for it, so you actually have an "origin" :/
[22:37:08] <aatch> Ok, so lets see what things with trans I've gotten wrong
[22:37:12] <eddyb> Tobba: yeah, casts are type checked like calls to a function taking <T: Trait> where Trait is the trait you're casting to
[22:37:51] <eddyb> Tobba: but I don't think you need *special* support, vtable already handles this fine
[22:38:06] *** Joins: lawrence (lawrence@moz-A96D30C6.wireless.utoronto.ca)
[22:38:57] <Tobba> oh yeah
[22:39:01] <Tobba> the fun part of the new languages:
[22:39:10] <Tobba> some poor soul has to implement time code for each new language again
[22:39:33] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[22:39:53] <eddyb> Tobba: typeck::check::check_const_with_ty, you need to add a vtable checking call in there
[22:39:59] <Tobba> hm
[22:40:12] <Tobba> I'm not sure if I'm familiar enough with the compiler currently to do it, but I'll see
[22:40:16] <Tobba> after I get this crap over with
[22:40:44] *** Quits: Kruppe (user@moz-253119B0.esg.uwaterloo.ca) (Client exited)
[22:40:50] *** Joins: bytbox (s@moz-E1E7FAC3.washdc.fios.verizon.net)
[22:41:00] *** o11c|interview is now known as o11c
[22:41:10] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[22:41:11] <eddyb> check_fn has the full stack running
[22:41:18] *** Quits: o11c (ben@moz-C0FD33EF.a357.priv.bahnhof.se) (Quit: WeeChat 0.4.3-dev)
[22:41:21] *** Joins: o11c (ben@moz-C0FD33EF.a357.priv.bahnhof.se)
[22:42:24] <o11c> sigh ... this is the one network I'm on that unidentifies you when you change your nick *and* doesn't reidentify you automatically if you change it back
[22:43:15] <eddyb> Tobba: add a resolve_in_expr similar to resolve_in_block (walk_expr instead of walk_block and different argument type), in typeck::check::vtable
[22:43:18] *** Quits: cschneid (cschneid@moz-CA025D57.ip.mcleodusa.net) (Ping timeout)
[22:43:40] <seanmonstar> i've been modifying Decodable/Encodable to use Results, and i'm now getting the error "wrong number of type params" for #[deriving(Decodable)]. i wouldn't expect to use my new Decoble until stage1?
[22:43:48] <eddyb> Tobba: then call vtable::resolve_in_expr(&fcx, e); right before regionck::regionck_expr(fcx, e);
[22:44:02] <Tobba> at least its a backwards compatible change
[22:44:04] <eddyb> Tobba: fcx rather, not &fcx
[22:44:08] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[22:44:09] <Tobba> initially I wanted to poke around in std but that really would suck
[22:44:32] <eddyb> Tobba: I am basically dictating to you =))
[22:44:38] <Tobba> pretty much
[22:44:39] <kimundi> seanmonstar: the attribute won't use it till stage1, but in stage0 it already uses the new library code that expects Result, I assume
[22:44:46] <Tobba> I'm not too familiar with the internals though
[22:44:58] <Tobba> it does feel like you just want to drag me into working on the compiler
[22:45:00] <Tobba> heh
[22:45:12] *** Quits: adonohue (adonohue@55513BD.95D3F462.59D8BB03.IP) (Quit: adonohue)
[22:45:13] <eddyb> if you start now, I can answer questions. we should move this to #rust-internals
[22:45:15] *** Joins: adonohue (adonohue@55513BD.95D3F462.59D8BB03.IP)
[22:45:21] <Tobba> not gonna start this now
[22:45:23] <Tobba> tired as hell
[22:45:24] <kimundi> seanmonstar: So you need to cfg(stage0), cfg(stage1) gate all code that uses Decodable with that syntax extension
[22:45:41] <eddyb> Tobba: okay, just don't lose the conversation :P
[22:45:45] <Tobba> I'm just autopiloting this disassembler code for now
[22:45:47] <Tobba> of course, I have logs
[22:45:59] <seanmonstar> kimundi: so, where those errors occur, just add the attr?
[22:46:33] <kimundi> seanmonstar: Maybe? Need more context to really give a confident answer
[22:46:35] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[22:47:01] *** Quits: dmsky (dmsky@moz-63A2E3E4.pppoe.spdop.ru) (Input/output error)
[22:47:05] <eddyb> seanmonstar: have you kept the original for #[cfg(stage0)]?
[22:47:09] <seanmonstar> kimundi: i've changed Encodable<S> to Encodable<S, E>, where encode() -> Result<(), S>
[22:47:15] <eddyb> that's not enough
[22:47:29] <eddyb> seanmonstar: you need a copy of the unchanged Encodable/Decodable
[22:47:29] *** Quits: erickt (etryzelaar@49C4075F.3AC15C18.2321E71E.IP) (Input/output error)
[22:47:37] <seanmonstar> well, theres quite a bit of stuff changed
[22:47:43] <seanmonstar> i see, so i need to keep around both?
[22:47:44] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[22:47:45] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[22:47:51] <eddyb> just grab the old version and put it in a different file
[22:48:17] *** Joins: mib_b5mvd5 (Mibbit@moz-7002DE99.lns20.adl2.internode.on.net)
[22:48:17] <eddyb> name it foo_stage0.rs or something, and import that for #[cfg(stage0)], instead of foo.rs
[22:48:23] <brson> do any unixes that matter not put local man pages in /usr/local/share/man?
[22:48:24] <seanmonstar> eddyb: do i need to keep the old implementations also? like json and ebml?
[22:48:37] <eddyb> seanmonstar: yes :S
[22:48:50] * seanmonstar dies
[22:49:05] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Connection reset by peer)
[22:49:15] <eddyb> seanmonstar: it's okay, you don't lose progress
[22:49:22] <eddyb> just need old copies in a few places
[22:49:25] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[22:49:29] <seanmonstar> eddyb: so, this sort of change requires transient step and a new snapshot?
[22:49:51] <brson> our configure script is filled with options that can't possibly work in reality
[22:49:51] <eddyb> it requires keeping old things around before the next snapshot, yes
[22:50:18] <eddyb> good guy brson, cleaning up the cobwebs in configure
[22:50:20] <seanmonstar> i see, that explains the std::old_hash i was seeing, since i looked that to understand better
[22:50:23] <eddyb> at least it's not autoconf
[22:50:37] <eddyb> seanmonstar: it's because of deriving
[22:50:49] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[22:50:54] <eddyb> seanmonstar: the snapshot compiler is hardwired to derive implementations a certain way
[22:50:56] *** Quits: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net) (Quit: Leaving.)
[22:51:10] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[22:51:23] <eddyb> seanmonstar: so stage0 (before the new compiler with new #[deriving(Encodable, Decodable)] implementations) needs the old behavior
[22:51:46] <seanmonstar> hokay
[22:53:15] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[22:57:41] *** Quits: bvssvni (Mibbit@moz-A47B6F8E.bb.online.no) (Quit: http://www.mibbit.com ajax IRC Client)
[22:57:52] <seanmonstar> eddyb: now with a few _old.rs files, would i add the cfg(stage0) and stage1 in libserialize/lib.rs?
[22:58:11] <seanmonstar> #[cfg(stage0)] pub mod json; #[cfg(stage1)] pub mod json; ?
[22:58:34] <seanmonstar> er, #[cfg(stage0)] pub mod json = "json_old";
[22:58:42] *** Joins: Ralith (ralith@moz-67D4EB93.customer.broadstripe.net)
[22:58:58] *** Joins: Rym (y@72FB9FA1.6FEC6D87.51C6DE68.IP)
[22:59:26] <eddyb> seanmonstar: if that syntax works, yes
[22:59:38] <kimundi> seanmonstar: I'm not sure if the mod foo = "bar" syntax is valid, but thats the idea, yeah
[23:00:02] <seanmonstar> er, that's for use... its path = something for mod, right?
[23:02:14] <kimundi> seanmonstar: you can also just do #[cfg(stage0)] #[path=".../old_foo.rs"] mod foo;
[23:02:35] *** Quits: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net) (Client exited)
[23:02:59] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Input/output error)
[23:03:06] *** Joins: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net)
[23:03:15] *** Quits: japaric (japaric@C87928B9.6A7849D9.95AE23EB.IP) (Ping timeout)
[23:03:32] <eddyb> s/also//
[23:04:29] *** Joins: japaric (japaric@29430DD7.551A521E.212E9B57.IP)
[23:04:46] <Armavica> rusti: (vec!("foo", "bar")).move_iter().collect().concat()
[23:04:47] -rusti- pastebinned 7 lines of output: http://sprunge.us/OZMh
[23:04:49] *** Quits: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net) (Ping timeout)
[23:04:53] <Armavica> I wonder whether there is a deep reason why rustc cannot infer the type of (...).collect() by the presence of concat()
[23:05:07] <eddyb> Armavica: because concat is quite generic
[23:05:27] <Armavica> isn't it only implemented for Vectors?
[23:05:44] <seanmonstar> can i do #[cfg(stage0)] around a particular impl?
[23:05:59] *** Quits: adonohue (adonohue@55513BD.95D3F462.59D8BB03.IP) (Quit: adonohue)
[23:06:04] <seanmonstar> uuid impls Encodable, and instead of having 2 files, i'd rather just wrap the impls
[23:06:14] <eddyb> Armavica: actually... this is probably what you want
[23:06:21] <eddyb> rusti: rusti: (vec!("foo", "bar")).as_slice().concat()
[23:06:22] -rusti- <anon>:16:14: 16:15 error: expected one of `;`, `}` but found `:`
[23:06:22] -rusti- <anon>:16         rusti: (vec!("foo", "bar")).as_slice().concat()
[23:06:22] -rusti-                        ^
[23:06:22] -rusti- application terminated with error code 101
[23:06:32] <eddyb> huh. lol
[23:06:35] <eddyb> rusti: (vec!("foo", "bar")).as_slice().concat()
[23:06:36] -rusti- foobar
[23:07:17] <Armavica> oh, indeed
[23:07:26] *** Quits: jmmk (jmmk@moz-3BDBD2C0.hfc.comcastbusiness.net) (Ping timeout)
[23:07:29] <Armavica> I don't think to slices as often as I should
[23:07:29] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[23:07:46] <eddyb> Armavica: ...
[23:07:56] <eddyb> Armavica: principle of minimal requirements
[23:08:09] <eddyb> Armavica: prefer iterators over slices over vectors
[23:08:14] <seanmonstar> its compiling \o/
[23:08:49] <kimundi> seanmonstar: putting the attribute on a impl should work too, yeah
[23:08:51] *** Joins: adonohue (adonohue@55513BD.95D3F462.59D8BB03.IP)
[23:09:11] <Armavica> eddyb: oh, in fact I simplified my example, it is actually an iterator
[23:09:16] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[23:09:30] <eddyb> Armavica: ;)
[23:09:54] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[23:10:07] *** Joins: evanm (evanm@636AC086.5999CED5.71743E61.IP)
[23:10:14] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[23:10:14] <eddyb> we should have some principles somewhere for idiomatic Rust
[23:10:45] *** Quits: adonohue (adonohue@55513BD.95D3F462.59D8BB03.IP) (Quit: adonohue)
[23:11:14] <eddyb> needless transmute is sin, clone/collect should be avoided etc.
[23:11:27] *** Parts: pepp (Mibbit@moz-A17B47F9.net.upcbroadband.cz) ()
[23:11:48] <Armavica> but then I don't see how I can connect(" ") my iterator without going through a vector
[23:11:51] *** Quits: Doppp (Doppp@310D5BF1.5E7911EA.DA40C4B3.IP) (Ping timeout)
[23:12:08] <eddyb> Armavica: fold
[23:12:11] <kmc> where did extra::json move to?
[23:12:14] *** Joins: adonohue (adonohue@55513BD.95D3F462.59D8BB03.IP)
[23:12:20] <seanmonstar> so, in deriving, in adding the return value of Result<(), __E>, to get the unit type, i do vec!((), __E)?
[23:12:26] <seanmonstar> serialize::json
[23:12:28] <eddyb> Armavica: there were talks of having connect/concat on iterators
[23:12:37] <kmc> seanmonstar: thanks
[23:12:47] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[23:12:50] <seanmonstar> trying to figure out the proper Ty of ()
[23:12:58] <eddyb> seanmonstar: it's TyNil, obviously :P
[23:13:03] <eddyb> seanmonstar: why do you have (), though?
[23:13:12] <seanmonstar> eddyb: Result<(), E>
[23:13:12] <eddyb> is this Encodable?
[23:13:21] <eddyb> I guess that's fine, then
[23:13:23] <seanmonstar> yea
[23:13:41] <kimundi> eddyb: The problem is that sometimes the temporary vector approach is more efficient than the directly on iterator approach. :)
[23:14:00] <Armavica> eddyb: I will need to strip a leading/trailing space with fold, right?
[23:14:36] *** Quits: jdm (jdm@CC0122E6.8F96AEA7.2D179A7D.IP) (Ping timeout)
[23:14:48] <eddyb> Armavica: no, just need to do it right ;)
[23:15:03] <eddyb> Armavica: i.e. not add the space at all before the first element
[23:15:04] <Armavica> ok then let me think about it
[23:15:17] <eddyb> kimundi: when is it ever more efficient?
[23:15:27] <eddyb> kimundi: collect/concat *iterate*
[23:15:37] <eddyb> when is it more efficient to collect before iterating again?
[23:15:55] <kimundi> eddyb: small number of very long string fragments
[23:16:30] <eddyb> won't help
[23:16:33] <kimundi> can iterate once to determine length, preallocate, and iterate a second time to push them all.
[23:16:43] <eddyb> pretty sure collect/concat don't use that information
[23:17:22] <kimundi> then concat/connect pair on string slices does that
[23:17:53] <eddyb> I... didn't know :/
[23:18:15] <kimundi> eddyb: https://github.com/mozilla/rust/blob/master/src/libstd/str.rs#L176-L226
[23:18:20] <eddyb> https://www.ohloh.net/p/rust-lang/ so maybe this is old, but "took an estimated 78 years of effort"
[23:18:31] <eddyb> > Here at Rust, we use time machines for maximum efficiency
[23:18:31] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[23:18:56] <mcpherrin> man-years
[23:19:30] *** Quits: Sharp (Sharp@19388942.6B775EBE.DC877F3B.IP) (Quit: Sharp)
[23:20:10] *** Quits: jesse99 (jesse99@moz-D8DE13A5.hsd1.wa.comcast.net) (Ping timeout)
[23:21:19] <kimundi> eddyb: However, I think this is one of those situations where our unfinsished, underused RandomAccessIterator might solve it
[23:21:34] *** Joins: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net)
[23:22:09] <eddyb> kimundi: or infinite peekable :P
[23:22:11] <kimundi> eddyb: Though I'm not sure how to implement a connect() that uses either that or the naive implementation as a fallback
[23:22:32] <Armavica> I'm probably half an hour in these 78 years \o/
[23:22:46] <eddyb> kimundi: you can't really, need inverted trait bounds
[23:23:11] <kimundi> eddyb: Not even inverted, its a generic form of specialization
[23:23:33] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[23:23:37] <kimundi> eddyb: Your Many could probably do it at runtime?
[23:23:38] <eddyb> <T, Iter: Iterator<T> + !RandomAccessIterator<T>>
[23:23:44] *** Quits: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net) (Ping timeout)
[23:23:47] *** Joins: andrewd18 (andrew@moz-DAC9D29F.wi.res.rr.com)
[23:23:51] <eddyb> Many isn't automatic :/
[23:24:02] <kimundi> what do you mean?
[23:24:10] <eddyb> you need to implement it for each type
[23:24:18] <eddyb> it's a macro with a list of traits, but still
[23:24:54] <kimundi> ... You know I waited approximately 2 months for this clarification?
[23:25:16] <eddyb> I have an implementation that makes it obvious...
[23:25:38] <eddyb> kimundi: https://gist.github.com/eddyb/f828f8ce819a5f00d42d#file-many-rs-L55
[23:25:44] <kimundi> I knew it was not possible to do in general, but you didn't outright say that until know, so I kept wondering you you managed to do it :|
[23:25:46] *** Joins: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net)
[23:25:59] <eddyb> kimundi: that file is the entirety of Many :/
[23:26:16] <eddyb> kimundi: and the tests below assert that Foo, which is implemented for uint, is not found via Many
[23:26:50] <eddyb> it's not compiler magic, just a bridge between providers and consumers
[23:26:54] <seanmonstar> is it possible to insert a syntax expression in a MethodDef?
[23:26:59] <seanmonstar> extension*
[23:27:08] <eddyb> seanmonstar: what do you mean?
[23:27:14] <eddyb> a macro?
[23:27:26] <seanmonstar> eddyb: inserting try! into the derived decode/encode methods
[23:27:27] <eddyb> if_ok!?
[23:27:32] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[23:27:36] <eddyb> ah, right, it's called try now :P
[23:27:44] <eddyb> seanmonstar: it might work
[23:27:59] *** Joins: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP)
[23:28:00] <eddyb> seanmonstar: but you have to use tokens for its contents
[23:28:05] *** Joins: samx (sami@B37F6088.D3601EE1.CDBCCAEF.IP)
[23:28:18] <eddyb> seanmonstar: look around in ext/deriving, maybe there's another one that has to do this
[23:28:29] *** Quits: lawrence (lawrence@moz-A96D30C6.wireless.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[23:28:57] <eddyb> kimundi: the whole point of Many is that the holder of Many may not know about the existance of the trait
[23:29:11] <eddyb> kimundi: *of any of the traits exposed
[23:30:03] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Ping timeout)
[23:30:13] <eddyb> so you can keep a Vec<Arc<Many>> and a dynamically loaded module can insert an object there exposing a vtable that it provided
[23:30:25] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[23:30:25] *** Joins: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net)
[23:30:33] <eddyb> and another dynamically loaded module can get access to that trait interface
[23:30:55] <eddyb> kimundi: this is very useful in a OOP-ish kernel
[23:31:02] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[23:31:13] <eddyb> you can't pretend that the set of possible device types is closed, for example
[23:31:57] <eddyb> you don't want to add variants to an enum or other such nonsense
[23:32:56] *** Joins: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net)
[23:32:58] <eddyb> kimundi: I'm tempted to add trait method reflection via #[deriving] on the trait itself :P
[23:33:08] <eddyb> rusti: #[deriving(Clone)] trait Foo {}
[23:33:09] -rusti- ()
[23:33:14] <eddyb> huh
[23:33:19] <eddyb> kimundi: I guess it's noop now
[23:34:21] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[23:34:36] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[23:34:48] *** jorendorff is now known as jorendorff_away
[23:35:27] <kimundi> eddyb: So, with that macro you manually define an implementation of the Many trait for a given type with a fixed set of traits that the type needs to implement at the pointer where the any gets implemented, correct?
[23:35:38] <kimundi> Many*
[23:35:55] <eddyb> yupp
[23:36:23] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[23:36:47] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[23:36:55] <kimundi> And code can be generic over any `Many` and query for a given trait whether a types Many impl contains support for that.
[23:37:23] <eddyb> yupp
[23:37:24] <kimundi> Thats certainly useful, just not what I had imaged you'd be doing. :)
[23:37:43] <eddyb> it's not general trait reflection
[23:37:53] *** Quits: Ferreus (ferreus@moz-10D7207C.lsn.wtnet.de) (Quit: WeeChat 0.4.4-dev)
[23:37:57] <kimundi> Yeah
[23:37:59] <eddyb> for one, if you did that, your lookup tables would be meh
[23:38:05] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[23:38:15] <eddyb> kimundi: but it should be possible with a Many-like trait implemented by the compiler
[23:38:46] *** Quits: adonohue (adonohue@55513BD.95D3F462.59D8BB03.IP) (Quit: adonohue)
[23:38:53] <kimundi> I though you had found a way to support any.implements::<Clone>() in a zero-effort way for any type/trait combination, which would have hugely surprised me :)
[23:39:27] <eddyb> keep dreaming
[23:39:30] *** Joins: fournm (Aria@moz-ABB60BA0.austin.res.rr.com)
[23:40:17] <kimundi> eddyb: I guess its doable if you have Many automatically defined for all traits a type implements, but that only works for trait impls inside the same crate as the type.
[23:40:41] <eddyb> oh, right :D
[23:40:59] <eddyb> I guess this is where C++ does RTTI
[23:41:01] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[23:41:09] <kimundi> would need a crazy dynamically chaining lookup table that extends itself if you link in other crates to support all implementations.
[23:42:00] <eddyb> dynamic vtables.... crazy
[23:42:37] <kimundi> eddyb: Heh, I have actually similarly crazy but more serious ideas about dynamic vtables
[23:43:41] <kimundi> basically "If you dlopen a crate and expose a safe interface, how do you make sure stuff like vtables from trait objects originating in that crate do not outlive the dlopened code itself"
[23:43:58] *** Joins: adonohue (adonohue@55513BD.95D3F462.59D8BB03.IP)
[23:44:46] <Rym> is there an assert macro that 'Shows' the incorrect result?
[23:45:02] <kimundi> Rym: assert_eq!  ?
[23:45:23] <kimundi> rusti: assert_eq!(1u, 2u)
[23:45:24] -rusti- task '<unnamed>' failed at 'assertion failed: `(left == right) && (right == left)` (left: `1`, right: `2`)', <anon>:16
[23:45:24] -rusti- application terminated with error code 101
[23:45:43] <Rym> kimundi: Danke
[23:45:52] <kimundi> Kein problem
[23:45:55] *** Quits: Rusky (russell@moz-173BA32C.slkc.qwest.net) (Ping timeout)
[23:46:22] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[23:46:52] *** Parts: jakob (jakob@moz-B56E0BCB.angrykittens.co.uk) ()
[23:47:26] *** Joins: Florob (Florob@moz-39532932.de)
[23:48:03] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[23:48:21] *** Quits: adonohue (adonohue@55513BD.95D3F462.59D8BB03.IP) (Quit: adonohue)
[23:49:29] <kimundi> let crt = dyncrate!(libfoo); let f = crt.symbol::<fn(uint) -> ~Foo>("foo::bar::my_fn"); let o = (*f)(24); drop(crt); // make sure `o` either keeps the dynopen alive, or becomes invalid
[23:49:45] <kimundi> eddyb: ^ something like that would be cool to do.
[23:49:54] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Quit: Leaving)
[23:50:01] *** Quits: evanm (evanm@636AC086.5999CED5.71743E61.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[23:50:09] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[23:50:13] *** Joins: cgaebel (clark@moz-F9D89110.nyc.res.rr.com)
[23:50:28] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[23:50:38] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[23:50:59] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[23:51:15] <sfackler> kimundi: std::unstable::dynamic_lib
[23:51:19] <kimundi> I'm thinking maybe with custom allocators for the ~ returned, or with a restricted set of symbol signatures and automatically generated wrapper types that keep the dynopen alive with refcounting...
[23:51:23] <eddyb> kimundi: make it borrow the crate
[23:51:30] <kmc> would somebody be willing to test this program for me on recent rust? https://gist.github.com/kmcallister/9698903
[23:51:51] <kimundi> sfackler: Thats the basic functionality, not a foolproof safe interface
[23:51:53] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[23:51:54] <eddyb> kimundi: and have the lifetime of the crate as a bound for the type
[23:51:56] <kimundi> eddyb: But how?
[23:52:07] <sfackler> kmc: task '<main>' failed at 'called `Option::unwrap()` on a `None` value', /Users/sfackler/Documents/no_scan/code/rust/src/libstd/option.rs:149
[23:52:08] <eddyb> kimundi: allowing only ~Trait:'crate and not just ~Trait
[23:52:11] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[23:52:12] <kmc> :/
[23:52:13] <eddyb> kimundi: kinda like 'static
[23:52:19] <eddyb> kmc: but it doesn't work in general now
[23:52:35] *** Quits: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net) (Quit: Leaving.)
[23:52:39] <kmc> thanks sfackler 
[23:52:48] *** Quits: cgaebel (clark@moz-F9D89110.nyc.res.rr.com) (Client exited)
[23:52:49] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[23:52:58] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[23:53:06] <eddyb> kmc: are those surrogate pairs?
[23:53:14] <kmc> yep, that's how you encode non-BMP characters in JSON :/
[23:53:16] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[23:53:36] <eddyb> kmc: huh, JSON is utf8 not utf16
[23:53:40] <eddyb> at least AFAIK
[23:53:40] *** Joins: Doppp (Doppp@ED5E5331.58AB7B93.EE633EE.IP)
[23:53:42] <kimundi> eddyb: I'm not sure how 'crate would work.
[23:53:54] <eddyb> kimundi: it would be the lifetime of the crate handle
[23:54:25] <kmc> eddyb: and .js files are usually sent over the Internet in UTF-8 too, but that doesn't affect the semantics of JavaScript strings
[23:54:26] <eddyb> fn symbol<'c, T: 'c>(&'c self, name: &str) -> T {...}
[23:54:33] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[23:54:36] <kimundi> yes, but I don't see how I can generically wedge it in every possible symbol definition you could open with the crate handle
[23:54:53] <kimundi> hmm.
[23:54:55] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[23:55:03] <huon> kimundi, eddyb: the main problem with that is function pointers
[23:55:03] <eddyb> kmc: well... there's a few variables there
[23:55:15] <kimundi> T: 'c as bound might work, but its non existing syntax so I'm not sure what the semantic would be
[23:55:25] <kimundi> huon: right, those too
[23:55:27] <eddyb> kimundi: like 'static
[23:55:33] <kmc> anyway https://www.ietf.org/rfc/rfc4627.txt § 2.5
[23:55:34] <eddyb> huon: since function pointers are not bound by lifetimes? :(
[23:55:34] <huon> they're not really pointers, and so can't have lifetimes; every other symbol should be extracted as &T (or *T), but it's just fn() that can't be
[23:55:44] <kimundi> eddyb: well if its like static then it doesn't sole the problem
[23:55:45] <huon> eddyb: yeah
[23:55:54] <eddyb> huon: I wanted to make fn unsized, actually
[23:56:05] <eddyb> so you can impl a trait taking &self on fn
[23:56:10] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[23:56:22] <kimundi> eddyb: if you make fn unsized, we are back in 2013 where a function pointer had type &extern fn ;)
[23:56:27] *** Parts: Mardak (Mardak@4851473D.BD9ECD5D.97D164AB.IP) ()
[23:56:30] <kimundi> 2012 even
[23:56:31] <huon> eddyb: that'd be sthe solution, yeah
[23:56:35] <eddyb> kimundi: not really
[23:56:40] <huon> s/sthe/the|a/
[23:56:43] *** Joins: erickt_ (erickt@49C4075F.3AC15C18.2321E71E.IP)
[23:56:46] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Connection reset by peer)
[23:56:50] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[23:56:54] <eddyb> &'static fn usually
[23:57:27] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[23:57:28] *** Joins: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch)
[23:57:32] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[23:57:37] <eddyb> but &'a fn in the case of dynamic crate loading/JIT
[23:57:46] <eddyb> hmm, JIT would work nicely with this
[23:57:48] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[23:57:49] <huon> eddyb: or &'static extern "Rust" fn
[23:57:57] <huon> if you were feeling verbose
[23:58:06] <huon> ;P
[23:58:07] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[23:58:08] <huon> (this sounds RFC worthy)
[23:58:11] <eddyb> kimundi: hehe Rc<fn> would be a bit crazy
[23:58:13] *** Quits: m-r-r (m-r-r@moz-4FB14902.rev.sfr.net) (Client exited)
[23:58:18] <eddyb> huon: everything does nowadays
[23:58:23] *** Quits: q66 (q66@moz-25DACF.range109-154.btcentralplus.com) (Quit: Leaving)
[23:58:34] <eddyb> huon: almost can't take the trash out without a RFC
[23:58:38] <kimundi> Anyway, the problem is that the typesystem has a few dependencies on immutable statically allocated memory with infinite lifetime in it. function pointers and vtables are the main problem.
[23:59:08] <eddyb> kimundi: ~Trait:'foo is the solution
[23:59:17] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[23:59:27] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[23:59:30] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[23:59:34] <eddyb> that can't outlive 'foo, so you can just have 'foo as min('data, 'vtable)
[23:59:47] *** Quits: saml (sam@moz-14C16814.cst.lightpath.net) (Quit: Leaving)
