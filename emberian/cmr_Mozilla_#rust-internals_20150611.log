[00:03:44] *** Quits: yjv (yjv@moz-j0cdis.fios.verizon.net) (Connection closed)
[00:05:50] *** Quits: aatch (james@moz-is4j4r.cable.telstraclear.net) (Ping timeout: 121 seconds)
[00:06:07] *** Joins: trecer (textual@moz-2s7.vki.125.98.IP)
[00:08:36] <Gankro> nmatsakis: Add an I-soundness tag to the issue tracker? y/n
[00:09:39] *** Quits: James_ (quassel@moz-8qs8a3.range86-148.btcentralplus.com) (Ping timeout: 121 seconds)
[00:10:24] *** Joins: Barca (Mibbit@moz-j9a.ns7.133.129.IP)
[00:11:36] <Barca> Hey, I was wondering if anyone had any advice on dealing with this issue.  I've been working on it, but haven't had much luck.    https://github.com/rust-lang/rust/issues/25574
[00:11:55] <brson> this patch was submitted against 'stable' https://github.com/rust-lang/rust/pull/25739 but thankfully bors merged it into master
[00:12:22] <acrichto> brson: whoa
[00:12:45] <acrichto> brson: I wonder if rust-highfive could give a warning if it's not targeting master
[00:20:41] *** Quits: swgillespie (swgillespie@moz-o29.3un.220.167.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:20:47] <brson> Barca: it's after hours pacific time so some compiler hackers have already gone home, but I'll ping some people on that ticket for you
[00:21:37] *** Joins: swgillespie (swgillespie@moz-o29.3un.220.167.IP)
[00:23:01] *** Joins: Kingsqueee (kingsley@moz-3fm07c.bchsia.telus.net)
[00:23:23] *** Quits: Kingsquee (kingsley@moz-3fm07c.bchsia.telus.net) (Ping timeout: 121 seconds)
[00:24:55] <Barca> thanks, you asked about putting up my patch? should i just put up a gist or something else
[00:25:59] <huon> Barca: you could push the branch to your fork of rust and link to that
[00:26:32] <Barca> ok, thanks for the advice and thanks for the message on git
[00:26:41] <edunham> acrichto: it'd be pretty straightforward to add that to highfive. https://github.com/nrc/highfive/issues/50
[00:26:57] *** Joins: dinfuehr (dinfuehr@moz-vgkuuv.highway.telekom.at)
[00:27:04] <acrichto> edunham: oh thanks!
[00:27:13] * acrichto should stop wondering and open issue smore often
[00:27:53] <edunham> np :) among my most useful features as an ops guy are complaining loudly and volunteering to help ;)
[00:28:06] *** Quits: Barca (Mibbit@moz-j9a.ns7.133.129.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[00:30:58] * nrc especially likes the latter
[00:31:04] *** Quits: dinfuehr (dinfuehr@moz-vgkuuv.highway.telekom.at) (Ping timeout: 121 seconds)
[00:32:09] <edunham> nrc: it's all your fault for having such a self-documenting and cleanly designed codebase to need the help :P
[00:32:43] * nrc blushes
[00:32:52] <edunham> (okay, maybe I just mean "only 2 files", but hey, it's easy to work on all the same)
[00:33:32] <nrc> :-p
[00:37:18] *** Joins: Quxxy_ (chatzilla@moz-efh10q.internode.on.net)
[00:38:12] *** Quits: laumann (thomas@moz-n9e72h.0.fullrate.dk) (Ping timeout: 121 seconds)
[00:38:55] *** Quits: Quxxy (chatzilla@moz-0nv.jkp.167.59.IP) (Ping timeout: 121 seconds)
[00:39:07] *** Quxxy_ is now known as Quxxy
[00:45:33] <Gankro> huon: any idea if we leverage/specify rounding modes with floating point?
[00:45:45] <brson> omg 1.1 is so boring
[00:46:08] *** Joins: aatch (james@moz-c6etfk.fosn.r6an.e000.2406.IP)
[00:46:09] <Sho> it doesn't even break anything!
[00:46:18] <brson> i'm determined to put a relnote pr up tonight but i keep accidentally falling asleep reading the commit logs
[00:46:23] <brson> it's that boring
[00:46:29] <sfackler> stability!
[00:49:07] <Gankro> sfackler: cc gh24928
[00:49:08] <[o__o]> [Not serious] Language not unstable enough: https://github.com/rust-lang/rust/issues/24928
[00:52:41] <aturon> brson: lol
[00:52:59] <aturon> brson: we're planning to backport the std::fs stabilization
[00:53:00] <aturon> so that's something
[00:53:08] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[00:53:44] <XMPPwocky> pr27382: Remove the secret Rust zeppelin
[00:59:43] *** Joins: grant (grant@moz-jfh.0nq.187.64.IP)
[01:02:09] *** Quits: Skyler (Skyler@moz-rv949t.sd.cox.net) (Client exited)
[01:03:57] *** Joins: Skyler (Skyler@moz-rv949t.sd.cox.net)
[01:04:02] *** Joins: poorman (poorman@moz-dpk.91o.74.71.IP)
[01:10:58] *** Quits: trecer (textual@moz-2s7.vki.125.98.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[01:12:41] *** Joins: trecer (textual@moz-2s7.vki.125.98.IP)
[01:25:16] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[01:27:29] *** Joins: newbie (eibwen@moz-gfvfik.dip0.t-ipconnect.de)
[01:27:52] *** Joins: dinfuehr (dinfuehr@moz-vgkuuv.highway.telekom.at)
[01:29:28] *** Quits: trecer (textual@moz-2s7.vki.125.98.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[01:30:21] *** Quits: eibwen (eibwen@moz-sf8cgb.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[01:31:13] *** kimundi is now known as zz_kimundi
[01:31:55] *** Quits: dinfuehr (dinfuehr@moz-vgkuuv.highway.telekom.at) (Ping timeout: 121 seconds)
[01:32:33] <brson> acrichto: r? https://github.com/rust-lang/rust-packaging/pull/33
[01:32:48] <brson> that downgrades cargo to a rev that still includes 'cargo rustc'
[01:32:58] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[01:32:58] <acrichto> sweet
[01:33:00] <acrichto> sgtm
[01:33:44] <brson> let's try to get backports merged tomorrow so we can do beta.3 friday
[01:34:21] <nrc> acrichto: did we ever decide on a snapshot policy?
[01:34:36] <acrichto> nrc: the conclusion was still "whenever we need it"
[01:34:48] <nrc> I'd like a new snapshot so we can use parallel codegen for the whole bootstrap
[01:34:49] <acrichto> brson: r? https://github.com/rust-lang/rust/pull/26161
[01:35:11] <nrc> acrichto: Ok, great. I'll wait a few days to see if any bugs emerge then set one up
[01:35:23] *** Quits: dcb (dcb@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[01:36:50] <WindowsBunny> brson: cargo rustc was removed? D:
[01:37:08] <brson> WindowsBunny: nope
[01:37:21] <WindowsBunny> (9:32:55 PM) brson: that downgrades cargo to a rev that still includes 'cargo rustc'
[01:37:24] <WindowsBunny> Then I'm really confused
[01:37:36] *** Quits: Diamond (dick@moz-s67uin.ok.cox.net) (Connection closed)
[01:39:19] *** Joins: bkoropoff (bkoropoff@moz-kthi5c.wa.comcast.net)
[01:40:15] <brson> WindowsBunny: english language is so ambiguous. both revs of cargo here include 'cargo rustc'. the concern was that we want to downgrade cargo to a rev that is old but at least contains this one new feature
[01:40:50] <aatch> brson, ohhh. That makes way more sense.
[01:41:07] <WindowsBunny> brson: oh okay
[01:41:12] <WindowsBunny> Thanks English
[01:41:29] <aatch> brson, I was wondering why cargo rustc was removed, it's like my favorite feature!
[01:41:55] <WindowsBunny> It's not actually his favorite feature, it's merely like it
[01:42:10] *** Joins: trecer (textual@moz-2s7.vki.125.98.IP)
[01:42:17] <brson> i'm on the edge of my seat wondering what aatch's favorite feature now
[01:42:19] * aatch shakes fist at natural language
[01:42:28] <aatch> This is why I'm a programmer!
[01:42:29] *** Joins: zxq9 (ceverett@moz-qsm369.mesh.ad.jp)
[01:42:40] <Sho> obligatory http://xkcd.com/1483/
[01:42:51] <WindowsBunny> Rust programmers are so good at writing code that is very explicit and clear about what it's doing
[01:43:03] <WindowsBunny> and then we attempt to speak and out comes a jumble of ambiguity
[01:45:13] *** Quits: jgallagher (john@moz-6ge.dhn.131.24.IP) (Client exited)
[01:50:27] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[01:51:57] *** Quits: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se) (Ping timeout: 121 seconds)
[01:57:29] *** Joins: summerlight (summerlight@moz-99k.2mj.130.121.IP)
[02:00:51] *** Quits: Sho (sho@moz-s6t.arq.28.5.IP) (Quit: Konversation terminated!)
[02:04:55] *** Quits: zxq9 (ceverett@moz-qsm369.mesh.ad.jp) (Quit: Konversation terminated!)
[02:05:25] *** Joins: zxq9 (ceverett@moz-qsm369.mesh.ad.jp)
[02:05:44] <brson> 1.1 relnotes for review https://github.com/rust-lang/rust/pull/26200
[02:06:22] <WindowsBunny> oh boy
[02:08:17] <bstrie> ooh
[02:08:22] *** Joins: adu (ajr@moz-0foa9t.md.comcast.net)
[02:11:19] <sp3d> some kind of mismarkup at "scenarios][ll]"
[02:20:17] *** Quits: swgillespie (swgillespie@moz-o29.3un.220.167.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[02:20:38] *** Quits: brson (brson@moz-cfhap5.mtv2.mozilla.com) (Quit: leaving)
[02:23:25] *** chmanchester is now known as chmanchestet
[02:23:35] *** chmanchestet is now known as chmanchester|afk
[02:25:58] <bstrie> didn't eddyb also have a compiler perf improvement PR that made it into 1.1?
[02:27:48] <nrc> I think so, maybe more than one? arielb1 had at least one too
[02:28:38] *** Joins: dinfuehr (dinfuehr@moz-vgkuuv.highway.telekom.at)
[02:30:50] *** Joins: koobs (koobs@moz-lu0tvm.internode.on.net)
[02:32:42] *** Quits: dinfuehr (dinfuehr@moz-vgkuuv.highway.telekom.at) (Ping timeout: 121 seconds)
[02:51:26] <XMPPwocky> all hail nrc savior of codegen-units
[02:53:58] <nrc> :-)
[02:54:24] *** Quits: zz_kimundi (kimundi@moz-ktmie3.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[02:55:23] *** Quits: Kingsqueee (kingsley@moz-3fm07c.bchsia.telus.net) (Quit: Konversation terminated!)
[02:56:30] <bstrie> no! he is a false prophet until it passes make check in multithreaded mode!
[02:56:42] *** Joins: zz_kimundi (kimundi@moz-o5192b.dip0.t-ipconnect.de)
[02:56:44] *** zz_kimundi is now known as kimundi
[02:59:47] * bstrie resists nrc's cunning wiles
[03:00:18] <aatch> So, is there a @rust-lang/lang subteam I can ping on issues?
[03:00:45] *** Joins: Kingsquee (kingsley@moz-3fm07c.bchsia.telus.net)
[03:01:22] <jethrogb> Pre-RFC: redefine libc::free as unsafe fn free<T>(ptr: *mut T) {libc::free(ptr as *mut c_void);} ?
[03:03:02] <acrichto> aatch: there should be yeah
[03:03:18] <aatch> acrichto, I don't think you can mention teams you can't see.
[03:03:26] <acrichto> zomg github
[03:03:31] <acrichto> are you serious
[03:04:18] <aatch> acrichto, why the concept of teams-you-can't-see exists to start with is beyond me.
[03:04:25] <aatch> Kinda defeats the point imo
[03:04:32] <acrichto> I think that post about new perms may fix this?
[03:04:37] <acrichto> the had some blog post about rolling out new controls
[03:04:44] <acrichto> and I think I remember seeing this somewhere in the dropdowns
[03:04:51] <acrichto> we're signed up to get "early access", so... we'll see how that goes
[03:05:28] <aatch> acrichto, yep, first bullet point in the blog post: "(Opt-in) Members can view and mention all teams, even when they're not on those teams."
[03:05:54] <acrichto> oh yay!
[03:08:27] <aatch> For us at least, having all the teams being public makes more sense. I'm not sure why we'd want to keep the lists private, it's not like they convey any special priviledges beyond "can be more easily aware of issue they are knowledgable about".
[03:09:22] <acrichto> yeah no we definitely want our team lists public
[03:11:22] *** Joins: p1start (p1start@moz-nftjhe.org)
[03:13:07] <aatch> acrichto, and after all that, it's fixed on nightly...
[03:15:36] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[03:25:55] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[03:27:36] *** Joins: semarie (semarie@moz-kvs6fc.torservers.net)
[03:29:13] *** Joins: dinfuehr (dinfuehr@moz-vgkuuv.highway.telekom.at)
[03:33:16] *** Quits: dinfuehr (dinfuehr@moz-vgkuuv.highway.telekom.at) (Ping timeout: 121 seconds)
[03:33:42] *** Quits: adu (ajr@moz-0foa9t.md.comcast.net) (Client exited)
[03:37:53] *** Joins: avikpal (avikpal@moz-1el.9l2.194.117.IP)
[03:39:27] *** Quits: bkoropoff (bkoropoff@moz-kthi5c.wa.comcast.net) (Client exited)
[03:40:21] *** Joins: avikpal_ (avikpal@moz-pql.c38.233.117.IP)
[03:42:50] *** Quits: avikpal (avikpal@moz-1el.9l2.194.117.IP) (Ping timeout: 121 seconds)
[03:56:02] *** Joins: avikpal (avikpal@moz-9o8.ds3.194.117.IP)
[03:57:19] *** Joins: dcb (dcb@moz-j72nfe.ca.comcast.net)
[03:57:44] <geofft> brson: so uh. what is the process of upgrading the Android API level? 
[03:58:25] <geofft> I don't actually care to upgrade it, it's just that I want to remove some hax when we get to API 21 (since it starts to resemble other UNIXes more) 
[03:59:01] <geofft> in particular, there are a handful of things that are inlined in headers, and not actually symbols, until 21. (turns out sigemptyset and signal are in this list) 
[03:59:19] *** Quits: dcb (dcb@moz-j72nfe.ca.comcast.net) (Quit: Textual IRC Client: www.textualapp.com)
[03:59:20] *** Quits: avikpal_ (avikpal@moz-pql.c38.233.117.IP) (Ping timeout: 121 seconds)
[03:59:32] <geofft> should I ... pay attention to someone talking about the buildbots here? add some #[cfg]? 
[04:01:04] *** Joins: dcb (dcb@moz-j72nfe.ca.comcast.net)
[04:01:52] *** Joins: avikpal_ (avikpal@moz-bp3.cen.194.117.IP)
[04:01:56] *** Quits: avikpal (avikpal@moz-9o8.ds3.194.117.IP) (Ping timeout: 121 seconds)
[04:07:58] *** Quits: avikpal_ (avikpal@moz-bp3.cen.194.117.IP) (Ping timeout: 121 seconds)
[04:09:18] *** Joins: avikpal (avikpal@moz-u8k.6lo.194.117.IP)
[04:14:09] *** Quits: avikpal (avikpal@moz-u8k.6lo.194.117.IP) (Ping timeout: 121 seconds)
[04:15:10] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[04:15:10] *** ChanServ sets mode: +ao erickt erickt
[04:15:34] *** Joins: avikpal (avikpal@moz-tst.imq.194.117.IP)
[04:26:52] *** Quits: miselin (miselin@moz-c77.igu.11.203.IP) (Ping timeout: 121 seconds)
[04:27:25] *** Quits: avikpal (avikpal@moz-tst.imq.194.117.IP) (Ping timeout: 121 seconds)
[04:29:07] <bstrie> koobs: how goes the effort? any progress?
[04:29:52] *** Joins: miselin (miselin@moz-c77.igu.11.203.IP)
[04:29:59] *** Joins: dinfuehr (dinfuehr@moz-vgkuuv.highway.telekom.at)
[04:30:36] *** Joins: laumann (thomas@moz-n9e72h.0.fullrate.dk)
[04:31:00] <koobs> bstrie: $life things, almost preppred my new keys
[04:31:10] <koobs> then need to commit it to the freebsd pgp keys file
[04:31:15] <koobs> so its verifiable :)
[04:32:48] *** Joins: avikpal_ (avikpal@moz-2k6.cra.194.117.IP)
[04:34:02] *** Quits: dinfuehr (dinfuehr@moz-vgkuuv.highway.telekom.at) (Ping timeout: 121 seconds)
[04:36:56] <c74d> koobs: does FreeBSD's package manager verify PGP signatures of package files?
[04:38:41] <koobs> c74d: each port (and package produced from a port) has a distribution file checksum that it needs to match
[04:38:49] <koobs> c74d: not PGP (sha256)
[04:40:01] <c74d> ah
[04:40:42] <c74d> my apologies, I misread and thought you meant you were adding the Rust release signing key to a FreeBSD file.
[04:43:40] *** Quits: avikpal_ (avikpal@moz-2k6.cra.194.117.IP) (Ping timeout: 121 seconds)
[04:46:46] *** Quits: ytain (ytain@moz-o0gerq.dsl.teksavvy.com) (Quit: Textual IRC Client: www.textualapp.com)
[04:47:31] *** Joins: avikpal (avikpal@moz-jhb.meh.194.117.IP)
[04:47:59] <koobs> c74d: not at all :)
[04:52:40] *** Quits: avikpal (avikpal@moz-jhb.meh.194.117.IP) (Ping timeout: 121 seconds)
[04:55:30] *** Quits: dcb (dcb@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[04:57:19] <bstrie> koobs: does that mean that you finally got everything building properly?
[04:59:57] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[05:10:32] *** Joins: avikpal (avikpal@moz-psc.loq.194.117.IP)
[05:13:07] *** Quits: O01eg (o01eg@moz-849.n83.112.37.IP) (Client exited)
[05:15:04] *** Joins: avikpal_ (avikpal@moz-i6k.36p.249.117.IP)
[05:18:26] *** Quits: avikpal (avikpal@moz-psc.loq.194.117.IP) (Ping timeout: 121 seconds)
[05:25:13] <koobs> bstrie: yes, for 10.x/amd64
[05:25:55] <koobs> bstrie: broadly speaking :)
[05:29:58] *** Joins: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net)
[05:29:59] *** ChanServ sets mode: +o pcwalton
[05:30:14] *** Quits: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net) (Client exited)
[05:30:43] *** Joins: dinfuehr (dinfuehr@moz-vgkuuv.highway.telekom.at)
[05:34:51] *** Quits: dinfuehr (dinfuehr@moz-vgkuuv.highway.telekom.at) (Ping timeout: 121 seconds)
[05:39:03] *** Quits: avikpal_ (avikpal@moz-i6k.36p.249.117.IP) (Ping timeout: 121 seconds)
[05:40:27] *** Quits: Jesin (Jesin@moz-6pufsn.eecs.lehigh.edu) (Quit: Leaving)
[05:41:28] *** Joins: avikpal (avikpal@moz-g02.dcg.226.117.IP)
[05:48:04] *** Quits: trecer (textual@moz-2s7.vki.125.98.IP) (Ping timeout: 121 seconds)
[05:50:29] *** Joins: James_ (quassel@moz-8qs8a3.range86-148.btcentralplus.com)
[05:53:25] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Client exited)
[05:59:54] <SimonSapin> Are RustCamp talks gonna be recorded?
[06:00:15] *** Quits: kimundi (kimundi@moz-o5192b.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[06:01:30] *** Quits: benh (ben@moz-ie00gt.org) (Ping timeout: 121 seconds)
[06:02:17] *** Joins: zz_kimundi (kimundi@moz-o5192b.dip0.t-ipconnect.de)
[06:02:20] *** zz_kimundi is now known as kimundi
[06:02:37] *** Joins: benh (ben@moz-ie00gt.org)
[06:10:40] *** Quits: miselin (miselin@moz-c77.igu.11.203.IP) (Ping timeout: 121 seconds)
[06:11:23] *** Joins: munksgaard (munksgaard@moz-478pev.u.parknet.dk)
[06:11:50] <Manishearth> SimonSapin: according to reddit, yes
[06:13:32] *** Joins: miselin (miselin@moz-c77.igu.11.203.IP)
[06:16:33] *** Joins: erz (erz@moz-fiq1tl.broadband.corbina.ru)
[06:26:21] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[06:26:21] *** ChanServ sets mode: +ao erickt erickt
[06:30:47] *** Joins: eddyb (eddyb@moz-vpa.2f0.121.86.IP)
[06:30:48] *** Quits: elif (chatzilla@moz-ev8m1p.res.rr.com) (Quit: ChatZilla 0.9.90.1-rdmsoft [XULRunner 29.0/20140421221237])
[06:31:04] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[06:40:06] *** Quits: laumann (thomas@moz-n9e72h.0.fullrate.dk) (Ping timeout: 121 seconds)
[06:45:17] <WindowsBunny> So just wondering, since my unsafe enum RFC was postponed pre-1.0, is it a reasonable time to consider opening that back up yet?
[06:45:53] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Quit: It's a joke, it's all a joke.)
[06:47:09] *** Quits: aatch (james@moz-c6etfk.fosn.r6an.e000.2406.IP) (Quit: Leaving)
[06:49:00] *** Quits: James_ (quassel@moz-8qs8a3.range86-148.btcentralplus.com) (Ping timeout: 121 seconds)
[06:50:03] <eddyb> WindowsBunny: unions?
[06:50:15] <WindowsBunny> eddyb: untagged unions, yes
[06:50:18] <eddyb> make an Union(A, B, ...) type
[06:50:32] <eddyb> which is opaque, but has the right size and alignment
[06:50:57] <eddyb> wait, this is Rust 1.0, I mean Union<(A, B, ...)>
[06:51:36] <benh> Do you have a plan for Rust 1.x or 2.0 to remove the angle brackets
[06:51:55] * eddyb is not fond on adding more things that are specifically unsafe. static mut is one too many
[06:52:03] <eddyb> benh: I do... kinda
[06:52:19] <eddyb> I wrote Vec(Type).new() on reddit recently
[06:52:20] <benh> I had one first >:U
[06:52:36] <eddyb> benh: does yours require redoing the type system :P?
[06:53:10] <eddyb> there's no easy way of doing this without throwing away the fixed value/type/trait mindset
[06:53:44] <benh> eddyb: nah, i just wanted to make the <> optional when there's no top-level , between them :P
[06:53:56] <benh> so I could write Rc RefCell T
[06:54:02] <benh> instead of < < >>
[06:54:26] <eddyb> oh
[06:54:35] <eddyb> I would make it Rc(RefCell(T))
[06:54:54] <eddyb> and then you could argue that F(x) can be written as F x
[06:55:10] <eddyb> and I would be too stubborn to accept it
[06:56:02] <benh> ( https://mail.mozilla.org/pipermail/rust-dev/2014-June/010621.html )
[06:56:20] <eddyb> I remember
[06:56:50] <eddyb> benh: anyways, to use () you need merged type/value namespaces
[06:57:07] <benh> yeah
[06:57:11] <eddyb> i.e. removing the cool thing that lets Rust do a few things C++ can't
[06:57:11] <benh> does that break newtype structs?
[06:57:25] <eddyb> not immediatelly
[06:57:39] <eddyb> you'd have to consider the same entity as both a type and a value
[06:58:02] <eddyb> so you have to distinguish between types and values based on the context
[06:58:47] <benh> right
[06:59:16] <eddyb> what worries me is struct Foo(T)(T); and Foo(x);
[06:59:24] <benh> does that mean there's no such thing as generic types, only functions taking types and returning types
[06:59:36] <eddyb> kiiind of
[06:59:54] <eddyb> but you want Foo(x); to be a shorthand for Foo(_)(x);
[07:00:12] <eddyb> or even flatten the call (while also keeping the option to elide the argument)
[07:00:55] <eddyb> think... struct Foo { x: T, T: Type = _ }
[07:01:08] <eddyb> it's still pretty crazy and I doubt it even makes sense
[07:05:04] <eddyb> benh: might want to remove tuple structs from the language with this occasion :P. but they do make for an interesting hard corner case
[07:05:40] <eddyb> unit types are easier because they're singletons, which means that a fused type/value does make sense
[07:06:11] <WindowsBunny> eddyb: Just get me some sort of untagged union that I can use for FFI D:
[07:08:09] <eddyb> with CTFE, you can kinda do it yourself
[07:08:24] <eddyb> WindowsBunny: oh you should totally try to get type macros in the language
[07:08:46] <eddyb> WindowsBunny: because that + CTFE would let you write union!(A, B, C, ...)
[07:09:53] <eddyb> benh: hmm, I've never considered it until now, but it may be a good idea to make values special from all other entities
[07:10:17] <eddyb> struct Foo; becomes entity Foo; value Foo = (); impl Foo for Foo;
[07:10:39] <eddyb> which means... slightly more. in Rust terms, Foo is also a trait implemented by Foo
[07:10:41] <WindowsBunny> eddyb: Can't I leave the complex design stuff up to you? D:
[07:10:55] <eddyb> WindowsBunny: what?
[07:11:06] <WindowsBunny> (3:08:34 AM) eddyb: WindowsBunny: oh you should totally try to get type macros in the language
[07:11:13] <eddyb> WindowsBunny: there's 0 difficulty
[07:11:36] <eddyb> at the technical level
[07:11:54] <WindowsBunny> Yeah but I'm a bunny, so I don't even have opposable thumbs
[07:12:00] <eddyb> it's just the matter of making the core devs understand that it's not okay to have pattern macros and trait/impl item macros (i.e. method macros)
[07:12:01] <WindowsBunny> How do you expect me to get type macros in the language? D:
[07:12:38] <eddyb> I'm not telling you to implement them, because then I'd use the word "implement"
[07:13:12] <eddyb> even thought it would be easier to implement them than convince the core^W language team
[07:13:48] <eddyb> at least we have a nicer solution to ident manipulation (early macro expansion, and token-based)
[07:16:33] *** Joins: skeuomorf (skeuomorf@moz-pa5.ssi.32.197.IP)
[07:17:02] <eddyb> or, hmm.
[07:17:11] <eddyb> Foo(x: T) = data(x);
[07:17:23] <eddyb> no, that's overly restrictive
[07:17:54] <eddyb> I think the default could be singleton creation and then a body results in a function
[07:19:57] *** Joins: laumann (thomas@moz-3m6.3kq.109.2.IP)
[07:20:59] <eddyb> benh: I just figured how to prototype my "new Rust semantics+grammar" :D
[07:21:09] <eddyb> benh: write a converter from Rust 1.0 code to it
[07:21:46] <eddyb> and then enough of a Rust 2.x compiler to convert to 1.0 code (where applicable)
[07:23:31] <eddyb> benh: now if I could get anything done :P
[07:24:54] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[07:26:51] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[07:27:06] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[07:27:06] *** ChanServ sets mode: +ao erickt erickt
[07:27:23] <benh> heh
[07:28:30] *** Joins: zmack (zmack@moz-htpein.home.aster.pl)
[07:28:47] *** Quits: munksgaard (munksgaard@moz-478pev.u.parknet.dk) (Ping timeout: 121 seconds)
[07:30:53] *** Joins: squiddy (squiddy@moz-md4.pm3.19.178.IP)
[07:31:51] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[07:36:00] *** Quits: avikpal (avikpal@moz-g02.dcg.226.117.IP) (Quit: )
[07:36:10] *** Quits: grant (grant@moz-jfh.0nq.187.64.IP) (Client exited)
[07:37:19] *** Quits: njn (chatzilla@moz-c6c476.iinet.net.au) (Quit: ChatZilla 0.9.91.1 [Firefox 41.0a1/20150531163607])
[07:46:12] *** Quits: ChrisMorgan (ChrisMorgan@moz-g6osuq.tpgi.com.au) (Ping timeout: 121 seconds)
[08:00:35] *** Joins: bjz (bjz@moz-0j4.2c9.87.203.IP)
[08:03:11] *** Joins: avikpal (avikpal@moz-o6r.mde.194.117.IP)
[08:05:46] *** Joins: avikpal_ (avikpal@moz-i9h.cen.194.117.IP)
[08:07:35] *** Quits: avikpal (avikpal@moz-o6r.mde.194.117.IP) (Ping timeout: 121 seconds)
[08:08:47] *** Quits: bjz (bjz@moz-0j4.2c9.87.203.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[08:10:43] *** Quits: avikpal_ (avikpal@moz-i9h.cen.194.117.IP) (Ping timeout: 121 seconds)
[08:11:02] *** Joins: avikpal (avikpal@moz-8ra.uhm.194.117.IP)
[08:11:36] *** Joins: madmalik (uid13697@moz-lfin5p.brockwell.irccloud.com)
[08:13:34] *** Joins: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de)
[08:14:50] *** Quits: avikpal (avikpal@moz-8ra.uhm.194.117.IP) (Connection closed)
[08:16:28] *** Joins: avikpal (avikpal@moz-g02.dcg.226.117.IP)
[08:16:43] *** Joins: vmx (vmx@moz-kjggf6.dip0.t-ipconnect.de)
[08:24:05] <Mutabah> acrichto: (or anyone else) for the Result::expect change, should I change the module docs that do .ok().expect(...) to use .expect()? Or leave that until after gating?
[08:24:10] <Mutabah> *de-gating
[08:26:48] *** Quits: newbie (eibwen@moz-gfvfik.dip0.t-ipconnect.de) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[08:33:04] <eddyb> if would be nice if we could have a marker in there so when de-gating is done, that change is also made
[08:39:26] *** Joins: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se)
[08:42:21] *** Joins: bjz (bjz@moz-puppgq.tpgi.com.au)
[08:44:53] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[08:47:31] <Mutabah> eddyb: Well, the ugly way is just to make the change on a different copy of the line :)
[08:47:48] <Mutabah> (I.e. duplicate the line, remove the !, and edit the comment
[08:48:37] *** Quits: nham (nham@moz-lglsfe.il.comcast.net) (Quit: leaving)
[08:51:35] *** Quits: det (chris@moz-6q2one.lv.cox.net) (Connection closed)
[08:52:43] <doener> playbot: *""
[08:52:45] -playbot- <anon>:8:5: 8:9 error: the trait `core::marker::Sized` is not implemented for the type `str` [E0277]
[08:52:45] -playbot- <anon>:8     show({
[08:52:45] -playbot- output truncated; full output at: http://bit.ly/1e4UYxX
[08:52:49] *** Joins: fenster (Mibbit@moz-vh2.89f.178.220.IP)
[08:52:51] <doener> playbot: let _ = *"";
[08:52:53] -playbot- ()
[08:52:57] <doener> hmm
[08:53:09] <doener> eddyb: ^^ that's not right, is it?
[08:54:01] *** Joins: nicknikolov (nicknikolov@moz-qg7.vka.123.2.IP)
[08:54:02] <benh> weird
[08:54:12] <benh> playbot: let _: () = *"";
[08:54:13] -playbot- <anon>:9:21: 9:24 error: mismatched types:
[08:54:14] -playbot-  expected `()`,
[08:54:14] -playbot- output truncated; full output at: http://bit.ly/1FakBT0
[08:54:26] <eddyb> doener: you're not assigning it to anything, so it's... fine
[08:54:32] <Mutabah> doener: Hmm... thing is, _ there means "discard"... so it doesn't really care...
[08:54:33] <Dabo> playbot: drop(*"")
[08:54:34] -playbot- <anon>:9:9: 9:13 error: the trait `core::marker::Sized` is not implemented for the type `str` [E0277]
[08:54:35] -playbot- <anon>:9         drop(*"")
[08:54:35] -playbot- output truncated; full output at: http://bit.ly/1e4VbRE
[08:54:41] <benh> well i guess that makes sense
[08:54:41] <eddyb> Dabo: drop is not language level
[08:54:47] <Dabo> eddyb, yeah, was just seeing
[08:54:52] <eddyb> playbot: let ref foo = *"str"; foo
[08:54:53] -playbot- "str"
[08:55:00] <eddyb> doener: ^^
[08:55:21] <doener> eddyb: ah, didn't know that _ goes that far 
[08:55:34] <eddyb> doener: _ is nothing like a named pattern :P
[08:55:46] <eddyb> it completely ignores whatever you match on it
[08:56:32] <Dabo> playbot: let a = String::new(); let _ = a; a
[08:56:34] -playbot- ""
[08:56:36] <Dabo> ah
[08:57:43] <eddyb> let _ = foo(); is not different semantically from foo();
[08:58:17] <eddyb> it does cancel the unused result lint though
[09:00:12] <bluss> eddyb: I was confused about this though https://github.com/rust-lang/rust/pull/26138/files
[09:00:48] <eddyb> bluss: that's incorrect >_>
[09:01:03] <bluss> eddyb: I don't think so. Anyway
[09:01:07] <bluss> the bindings do the difference
[09:01:45] <eddyb> let _ = foo(); is just foo(); so that example is like Noisy(1); followed by two bound Noisy's
[09:01:52] <eddyb> _ is not even a binding
[09:01:59] <eddyb> which is probably where the confusions stems from
[09:02:59] <bluss> eddyb: you're right, the text isn't really correct
[09:03:11] <eddyb> I'll post a comment
[09:03:12] <bluss> I thought you talked about the example -- it is correct about what it outputs
[09:03:17] *** Joins: det (chris@moz-6q2one.lv.cox.net)
[09:03:26] <bluss> eddyb: I already did, but you have more credibility in rustc internals
[09:03:56] <Dabo> that example, prints 1,3,2 xD
[09:04:42] <eddyb> bluss: there's terminology misuse though
[09:05:31] *** Quits: det (chris@moz-6q2one.lv.cox.net) (Connection closed)
[09:06:33] <eddyb> playbot: Ok(0)
[09:06:35] -playbot- <anon>:9:9: 9:11 error: unable to infer enough type information about `_`; type annotations required [E0282]
[09:06:35] -playbot- <anon>:9         Ok(0)
[09:06:35] -playbot- output truncated; full output at: http://bit.ly/1Fam0sN
[09:06:39] <eddyb> meh
[09:07:18] *** Joins: avikpal_ (avikpal@moz-2el.0kg.194.117.IP)
[09:07:42] <eddyb> playbot: let a = String::new(); a; a
[09:07:43] -playbot- <anon>:9:35: 9:36 error: use of moved value: `a`
[09:07:43] -playbot- <anon>:9         let a = String::new(); a; a
[09:07:43] -playbot- output truncated; full output at: http://bit.ly/1e4WtMy
[09:07:47] <eddyb> wat
[09:08:04] <eddyb> did the rules change when I wasn't looking?
[09:09:13] *** Joins: avikpal__ (avikpal@moz-jc5.igl.194.117.IP)
[09:10:24] *** Quits: avikpal (avikpal@moz-g02.dcg.226.117.IP) (Ping timeout: 121 seconds)
[09:10:41] <Manishearth> playbot: let a = String::new(); a; a;
[09:10:43] -playbot- <anon>:9:35: 9:36 error: use of moved value: `a`
[09:10:43] -playbot- <anon>:9         let a = String::new(); a; a;
[09:10:43] -playbot- output truncated; full output at: http://bit.ly/1FamsHp
[09:10:46] <Manishearth> huh
[09:11:19] * bluss does not share the surprise. Ignorance is bliss? is bluss?
[09:11:28] *** Quits: avikpal_ (avikpal@moz-2el.0kg.194.117.IP) (Ping timeout: 121 seconds)
[09:11:51] *** Quits: _Vi (vi@moz-bbs.vhj.131.104.IP) (Ping timeout: 121 seconds)
[09:12:19] <eddyb> bluss: I think it changed at some point
[09:14:19] <eddyb> playbot: let x = &[][..];
[09:14:20] -playbot- <anon>:9:18: 9:24 error: unable to infer enough type information about `_`; type annotations required [E0282]
[09:14:21] -playbot- <anon>:9         let x = &[][..];
[09:14:21] -playbot- output truncated; full output at: http://bit.ly/1e4XdkF
[09:14:25] <eddyb> playbot: let x = &[0][..];
[09:14:26] -playbot- ()
[09:14:35] <eddyb> playbot: let x = [0].as_slice();
[09:14:37] -playbot- output truncated; full output at: http://bit.ly/1FamS0D
[09:15:53] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[09:15:53] *** ChanServ sets mode: +ao erickt erickt
[09:16:10] *** Joins: avikpal (avikpal@moz-g02.dcg.226.117.IP)
[09:16:48] *** Quits: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[09:18:10] *** Quits: avikpal__ (avikpal@moz-jc5.igl.194.117.IP) (Ping timeout: 121 seconds)
[09:20:41] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[09:27:18] <doener> eddyb: hmmm, that comment about using {x} instead of drop(x) made me look into the generated IR, and e.g. for "fn foo() { let s = String::new(); drop(s) }", we generate an invoke instead of a call, because of s. But at the time of the invoke, ownership has already moved to drop(), so strictly, tracking moves we should be able to avoid invokes more aggressively, right? Not sure if it's worth it thoug
[09:27:24] <doener> h...
[09:28:07] <eddyb> doener: is a landing pad generated or not?
[09:28:36] <eddyb> oh, for the s local, not the - okay, I get you
[09:28:50] <eddyb> doener: something like this was raised on pnkfelix's PR, you should subscribe to that
[09:29:56] <eddyb> so, uhm, I think I checked for all the errors that could be
[09:29:58] <doener> eddyb: which one? Didn't see anything like that on gh26173
[09:29:58] <[o__o]> Nonzeroing Move Hints (take3 branch): https://github.com/rust-lang/rust/pull/26173
[09:30:21] * doener actually gets mail for all PRs
[09:31:11] <doener> eddyb: or are you referring to the store_arg thing?
[09:31:15] <eddyb> doener: https://github.com/rust-lang/rust/pull/26173#discussion_r32153440
[09:31:21] <eddyb> yes, that one
[09:32:26] <eddyb> doener: handling that correctly should theoretically give us the invoke->call optimizations you were talking about
[09:32:57] <doener> eddyb: right
[09:32:59] <eddyb> with enough luck, drop will just be a call to the drop glue and nothing else
[09:39:03] *** Joins: snorr (snorredc@moz-8g9ina.cust.comxnet.dk)
[09:41:51] <doener> eddyb: we just need an SSA-like IR to find dominating moves :-p
[09:43:40] <eddyb> doener: did you see me rant on transforming MIR from dynamic drop to uniform drop :P?
[09:43:45] <eddyb> or even linear
[09:43:51] *** Quits: nicknikolov (nicknikolov@moz-qg7.vka.123.2.IP) (Connection closed)
[09:45:20] <eddyb> so that nothing is live at the end of a block, that shouldn't be
[09:45:48] <doener> eddyb: I don't think I did
[09:45:49] *** Joins: nicknikolov (nicknikolov@moz-qg7.vka.123.2.IP)
[09:45:50] <eddyb> I wonder if borrowck could work on explicit local introduction/destruction instead of region scopes
[09:47:15] <eddyb> let x: Option<T>::Some = Some(foo()); let x_1: Option<T>; if bar(&x.0) { consume(x.0); x_1 = None; } else { x_1 = x; }
[09:48:01] <eddyb> doener: as a "desugared" form of: let x: T = foo(); if bar(&x) { consume(x); }
[09:48:30] <eddyb> doener: add `drop(x_1);` at the end to make it linear
[09:48:43] *** Quits: snorr (snorredc@moz-8g9ina.cust.comxnet.dk) (A TLS packet with unexpected length was received.)
[09:57:36] *** Quits: sp3d (sp3d@moz-ik970v.enn1.s22b.000d.2601.IP) (Ping timeout: 121 seconds)
[09:58:33] *** Joins: mukilan (mukilan@moz-5ke.d4s.164.122.IP)
[09:59:27] <eddyb> oh, wow, types aren't in the ast map
[10:02:05] *** Joins: det (chris@moz-6q2one.lv.cox.net)
[10:03:28] <eddyb> that would definitely explains the span-less errors I was getting
[10:16:41] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[10:16:41] *** ChanServ sets mode: +ao erickt erickt
[10:21:47] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[10:25:00] *** Joins: oli_obk__ (Mibbit@moz-7bq.0sb.52.141.IP)
[10:32:17] *** Joins: ChrisMorgan (ChrisMorgan@moz-g6osuq.tpgi.com.au)
[10:42:23] *** Quits: stl (stl@moz-o95.t8r.15.176.IP) (Ping timeout: 121 seconds)
[10:47:51] *** Joins: stl (stl@moz-vot.hbd.15.176.IP)
[10:52:53] *** Quits: stl (stl@moz-vot.hbd.15.176.IP) (Ping timeout: 121 seconds)
[10:54:21] *** Quits: morton (Mibbit@moz-g6k.oht.161.46.IP) (Ping timeout: 121 seconds)
[11:04:13] *** Joins: arielb1 (Ariel@moz-6an0ej.red.bezeqint.net)
[11:16:21] *** Quits: arielb1 (Ariel@moz-6an0ej.red.bezeqint.net) (Quit: Ex-Chat)
[11:16:28] *** Quits: fenster (Mibbit@moz-vh2.89f.178.220.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[11:25:05] *** Joins: Sho (sho@moz-l3v.s57.28.5.IP)
[11:29:49] *** Quits: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com) (Ping timeout: 121 seconds)
[11:36:52] *** Joins: stl (stl@moz-sa1.66b.15.176.IP)
[11:37:13] *** Quits: Johannes (Johannes@moz-4et8d7.ocn.ne.jp) (Quit: Leaving...)
[11:37:14] *** Joins: skeuomor1 (skeuomorf@moz-v66.i0i.32.197.IP)
[11:38:47] *** Joins: munksgaard (munksgaard@moz-478pev.u.parknet.dk)
[11:39:18] *** Quits: skeuomorf (skeuomorf@moz-pa5.ssi.32.197.IP) (Ping timeout: 121 seconds)
[11:42:42] <semarie> Manishearth: could you r+ and include gh26213 in your rollup ? you already have merge gh26197, but it omits OpenBSD in list of platform that don't support morestack.
[11:42:42] <[o__o]> fixes __morestack symbol problem on BSDs: https://github.com/rust-lang/rust/pull/26197
[11:43:13] <semarie> else, I will wait 26197 to be in master in order to rebase 26213
[11:44:57] <Manishearth> semarie: it's not in the rollup
[11:45:08] <Manishearth> the other bsd/bitring pr broke the rollup so I removed both
[11:45:19] <Manishearth> (I'm not in a situation where I can test these rigjht now)
[11:46:04] <semarie> Manishearth: ok, so I will see dhuseby for include OpenBSD in the list. thanks.
[11:46:38] *** Joins: harrisonclarke (harrisoncla@moz-4lq79j.eastlink.ca)
[11:50:03] *** Joins: mgottschlag (quassel@moz-nm3cpo.qiv1.bbcb.1398.2a00.IP)
[11:50:06] *** skeuomor1 is now known as skeuomorf
[11:50:57] <semarie> Manishearth: the error "clang requested but not found" in configure shouldn't be caused by #if in src/rustllvm. it seems odd.
[11:53:31] <semarie> the error should come from gh26185 (which have change in configure)
[11:53:32] <[o__o]> allowing fallback to clang on freebsd when needed: https://github.com/rust-lang/rust/pull/26185
[11:55:51] <Manishearth> semarie: I know
[11:56:01] *** Quits: harrisonclarke (harrisoncla@moz-4lq79j.eastlink.ca) (Connection closed)
[11:56:02] <Manishearth> semarie: I said it was the other PR :)
[11:56:22] *** Joins: harrisonclarke (harrisoncla@moz-4lq79j.eastlink.ca)
[11:57:15] <semarie> Manishearth: the first PR (26213) isn't in your list. it completes 26197.
[11:59:01] <semarie> no problem for now. I will just wait and see :)
[11:59:40] <Manishearth> semarie: it was -- it;'s a new rollup now :)
[12:00:16] <semarie> Manishearth: I think we don't speak about the same thing :)
[12:00:30] <semarie> gh26213 isn't approved for now.
[12:00:31] <[o__o]> OpenBSD don't support morestack: https://github.com/rust-lang/rust/pull/26213
[12:00:36] *** Quits: harrisonclarke (harrisoncla@moz-4lq79j.eastlink.ca) (Ping timeout: 121 seconds)
[12:00:43] <semarie> gh26197 was in your list
[12:00:43] <[o__o]> fixes __morestack symbol problem on BSDs: https://github.com/rust-lang/rust/pull/26197
[12:00:54] <semarie> but it don't include openbsd in the list
[12:02:47] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[12:02:47] *** ChanServ sets mode: +ao erickt erickt
[12:07:34] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[12:17:26] *** Joins: O01eg (o01eg@moz-kdi.38l.112.37.IP)
[12:22:09] *** Joins: ytain (ytain@moz-o0gerq.dsl.teksavvy.com)
[12:22:30] *** Joins: harrisonclarke (harrisoncla@moz-th044a.ns.bellaliant.net)
[12:22:55] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[12:23:58] *** Joins: ytain_ (ytain@moz-o0gerq.dsl.teksavvy.com)
[12:24:27] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[12:24:43] *** Quits: ytain (ytain@moz-o0gerq.dsl.teksavvy.com) (Connection closed)
[12:25:30] <Manishearth> semarie: ah okay. Perhaps you should put them together as one? :)
[12:32:07] *** Joins: _Vi (vi@moz-bbs.vhj.131.104.IP)
[12:35:01] *** Joins: p1start (p1start@moz-nftjhe.org)
[12:39:05] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[13:11:32] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[13:11:32] *** ChanServ sets mode: +ao erickt erickt
[13:15:34] *** Quits: mgottschlag (quassel@moz-nm3cpo.qiv1.bbcb.1398.2a00.IP) (Ping timeout: 121 seconds)
[13:17:07] *** Quits: avikpal (avikpal@moz-g02.dcg.226.117.IP) (Connection closed)
[13:21:14] *** Quits: ChrisMorgan (ChrisMorgan@moz-g6osuq.tpgi.com.au) (Ping timeout: 121 seconds)
[13:21:35] *** Joins: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net)
[13:23:52] <nmatsakis> Gankro: re: I-soundness, no strong opinion I guess.
[13:30:12] *** Joins: avikpal (avikpal@moz-g02.dcg.226.117.IP)
[13:30:40] *** Quits: avikpal (avikpal@moz-g02.dcg.226.117.IP) (Connection closed)
[13:32:24] *** Joins: larhat1 (Adium@moz-egv.ld6.128.213.IP)
[13:34:56] *** Joins: ChrisMorgan (ChrisMorgan@moz-g6osuq.tpgi.com.au)
[13:35:11] *** Quits: larhat1 (Adium@moz-egv.ld6.128.213.IP) (Quit: Leaving.)
[13:36:36] *** Joins: avikpal (avikpal@moz-g02.dcg.226.117.IP)
[13:40:35] *** Joins: bombless (_@moz-uag.piv.41.59.IP)
[13:42:52] *** Quits: avikpal (avikpal@moz-g02.dcg.226.117.IP) (Connection closed)
[13:50:20] *** Quits: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net) (Ping timeout: 121 seconds)
[13:58:08] *** Joins: avikpal (avikpal@moz-g02.dcg.226.117.IP)
[14:05:27] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[14:13:34] *** Joins: jgallagher (john@moz-d5e8oc.hfc.comcastbusiness.net)
[14:13:57] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[14:13:58] *** ChanServ sets mode: +ao erickt erickt
[14:14:02] *** Quits: oli_obk__ (Mibbit@moz-7bq.0sb.52.141.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:17:38] *** Quits: squiddy (squiddy@moz-md4.pm3.19.178.IP) (Quit: Leaving)
[14:21:05] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[14:36:01] *** Quits: madmalik (uid13697@moz-lfin5p.brockwell.irccloud.com) (Quit: Connection closed for inactivity)
[14:37:23] *** Joins: skeuomor1 (skeuomorf@moz-d5k.lok.32.197.IP)
[14:39:39] *** Quits: skeuomorf (skeuomorf@moz-v66.i0i.32.197.IP) (Ping timeout: 121 seconds)
[14:40:36] *** Quits: summerlight (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[14:55:52] *** Joins: duesenfranz_ (jona@moz-711djm.tirol.surfer.at)
[15:02:30] *** Quits: Kxepal (Miranda@moz-nivk72.pppoe.mtu-net.ru) (Ping timeout: 121 seconds)
[15:03:04] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[15:03:56] *** Joins: Kxepal (Miranda@moz-b6og7h.pppoe.mtu-net.ru)
[15:04:28] <nmatsakis> so I've been working on my crazy profiler
[15:04:31] <nmatsakis> improving its ability to generate graphs
[15:04:50] <nmatsakis> here is a random graph showing who calls code from middle::traits::fulfill when compiling script crate
[15:04:53] <nmatsakis> http://people.mozilla.org/~nmatsakis/killme.0d714c8.traits-fulfill-callers.dot.svg
[15:04:56] <nmatsakis> :)
[15:04:58] <nmatsakis> (in my optimized branch...)
[15:11:34] *** Quits: zmack (zmack@moz-htpein.home.aster.pl) (Connection closed)
[15:14:15] <eddyb> Tobba: ^^ I know you want it
[15:14:27] <eddyb> nmatsakis: could you also strip the hashes from symbol names?
[15:14:38] <Tobba> oo
[15:15:07] <eddyb> nmatsakis: there's code somewhere to reverse the custom mangling we do
[15:16:13] <eddyb> nmatsakis: constant checking takes the most time?
[15:16:29] <eddyb> more than type-checking?1
[15:17:04] <eddyb> nmatsakis: could you somehow expand on that subgraph?
[15:17:10] <nmatsakis> eddyb: keep in mind that this is *just* code paths that wind up invoking `middle::traits:fulfill`,
[15:17:20] <nmatsakis> but the tool allows you to provide arbitrary regular expressions,
[15:17:22] <nmatsakis> so you can strip hashes,
[15:17:33] <nmatsakis> and in fact I am using regular expressions to *compress* detail here
[15:17:48] <nmatsakis> the percentages are all as a percent of absolute time tho
[15:18:03] <nmatsakis> so yeah constant checking spends more time in trait resolution than type checking 
[15:18:08] <nmatsakis> I am investigating how to improve this :)
[15:18:09] <eddyb> amazing :D
[15:18:22] <eddyb> nmatsakis: it's only monomorphic traits, no?
[15:18:34] <bombless> coherence check cost a lot of time atm..
[15:18:35] <eddyb> marker ones, even. Sync and Copy
[15:18:45] <eddyb> bombless: on 1.0?
[15:19:16] <eddyb> time: 0.302     coherence checking
[15:19:18] <eddyb> that's librustc
[15:28:33] <nmatsakis> eddyb: here's the tool btw https://github.com/nikomatsakis/perf-focus along with *some* docs
[15:33:35] *** Quits: harrisonclarke (harrisoncla@moz-th044a.ns.bellaliant.net) (Connection closed)
[15:35:33] <eddyb> nmatsakis: whaaa this is built on top of perf
[15:36:05] <eddyb> nmatsakis: I've mentioned perf and custom vizualizations some time ago!
[15:36:19] <eddyb> like, a couple weeks. in here
[15:37:50] <eddyb> nmatsakis: does it give you the information to make a multi-line graph, with one color per function, showing e.g. the number of calls to, or the time spent in that function, in a running 1ms window?
[15:38:04] <nmatsakis> eddyb: does `perf` give you that information?
[15:38:15] <eddyb> that's what I'm asking :P
[15:38:27] <nmatsakis> I don't know that perf can deliver samples to you in a "running" fashion
[15:38:37] <nmatsakis> but you can use perf script pretty easily to view the samples it did create
[15:38:41] <nmatsakis> after the fact
[15:38:42] <eddyb> do you get timed samples?
[15:38:45] <nmatsakis> yes
[15:38:47] <eddyb> that's the main issue
[15:38:52] <nmatsakis> I believe they include a timestamp
[15:38:59] <nmatsakis> given that they come at regular intervals,
[15:39:00] <nmatsakis> I've ignored it :)
[15:39:33] <eddyb> you could use this to select a single pass to look at
[15:39:45] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Quit: It's a joke, it's all a joke.)
[15:39:55] <nmatsakis> the time? or my tool..? 
[15:40:19] <nmatsakis> the main reason I Wrote this tool is because I wanted to be able to select things like a single pass, etc. there are probably other tools that do it what I'm doing better :)
[15:40:24] <nmatsakis> but...it's easier to write your own than learn someone else's... 
[15:40:25] *** Quits: Quxxy (chatzilla@moz-efh10q.internode.on.net) (Ping timeout: 121 seconds)
[15:40:33] <eddyb> nmatsakis: I don't think there are any tools
[15:40:39] <eddyb> or at least I couldn't find anyone who knew any
[15:41:06] * kimundi wonders how something like perf actually works. How it intercepts calls in an existing binary, how does it not slow the whole thing down while doing so, etc
[15:41:11] <nmatsakis> http://gperftools.googlecode.com/git/doc/cpuprofile.html <-- can do some of it
[15:41:15] <nmatsakis> but it's not as flexible
[15:41:28] <nmatsakis> kimundi: it doens't intercept calls
[15:41:35] <nmatsakis> it just wakes up every so often and peeks up the stack
[15:41:46] <nmatsakis> and it does this very, very fast :)
[15:41:59] <kimundi> heh, okay that actually sounds reasonable :)
[15:42:10] <kimundi> I guess it needs debug info to work?
[15:42:15] <nmatsakis> you can also trigger it wellpresuambly it also marshalls 
[15:42:15] <eddyb> not really
[15:42:17] <nmatsakis> sorry
[15:42:20] <nmatsakis> it just collects addresses
[15:42:23] <nmatsakis> it's only after the fact
[15:42:25] <eddyb> it doesn't care about the stack unless you pass -g
[15:42:32] <eddyb> (AFAIK)
[15:42:35] <nmatsakis> (that's also true)
[15:42:49] <nmatsakis> anyway, it's only affect the fact that the addresses are converted to fn names and line numbers etc
[15:43:02] <nmatsakis> so you can profile a binary with no info, but of course it's goin to be hard to correlate it back to your code
[15:43:17] <eddyb> you could probably get the EIP without slowing down that process
[15:43:24] <nmatsakis> unless you like to read assembly :)
[15:43:24] <nmatsakis> and yes by default it gives you a flat profile, which is less invasive, but also ... prettty ueseless most of the time
[15:43:27] <eddyb> or RIP or whatever
[15:44:22] * nmatsakis has a very laggy IRC connection right now...
[15:48:07] *** Quits: koobs (koobs@moz-lu0tvm.internode.on.net) (Ping timeout: 121 seconds)
[15:49:20] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[15:49:20] *** ChanServ sets mode: +ao erickt erickt
[15:49:56] <eddyb> > help: items from traits can only be used if the trait is implemented and in scope; the following trait defines an item `zip`, perhaps you need to implement it
[15:50:10] <eddyb> I suspect this is caused by a certain Clone bound but I do not get a "this is not Clone" error :(
[15:50:21] *** Joins: Rym (uid91135@moz-n2i7qm.charlton.irccloud.com)
[15:52:26] <nmatsakis> acrichto: it'd be mildly nice (I think) if symbol names included the crate-id, e.g. rustc_typeck::check::... not check::...
[15:52:27] *** Joins: koobs (koobs@moz-lu0tvm.internode.on.net)
[15:52:30] <nmatsakis> acrichto: thoughts?
[15:52:45] <nmatsakis> acrichto: (in particular, when using gdb etc, it is annoying to me that I don't know what crate code comes from)
[15:54:15] *** Quits: vmx (vmx@moz-kjggf6.dip0.t-ipconnect.de) (Quit: Leaving)
[15:57:03] *** Joins: yjv (yjv@moz-j0cdis.fios.verizon.net)
[16:08:11] *** Joins: imperio (Mibbit@moz-8otf3a.fbx.proxad.net)
[16:08:32] <eddyb> error: the trait `core::clone::Clone` is not implemented for the type `core::option::IntoIter<<It as core::iter::Iterator>::Item>`
[16:08:40] <eddyb> that's odd
[16:09:05] <eddyb> it's missing #[deriving(Clone)] :|
[16:09:14] <eddyb> this is what happens because we didn't put Copy on iterators
[16:09:27] <imperio> steveklabnik: ping
[16:10:00] *** Quits: laumann (thomas@moz-3m6.3kq.109.2.IP) (Ping timeout: 121 seconds)
[16:10:03] <bluss> eddyb: I just submitted a fix for that
[16:10:09] <bluss> it's in the queue
[16:10:24] <steveklabnik> imperio: pong
[16:11:50] <imperio> steveklabnik: Have you have it a thought about officialization process (or adding my tuto link ? :p)
[16:12:48] <steveklabnik> i unfortunately have not, i had some personal semi-emergency stuff come up in the last few days :(
[16:12:54] <steveklabnik> can we talk about it monday, maybe? and sorry :(
[16:13:36] <imperio> yes no problem
[16:13:46] <imperio> monday is also rust meetup in paris ! \o/
[16:13:57] <imperio> two rust events in one haha
[16:14:02] <steveklabnik> oh nice
[16:17:30] <eddyb> error: type mismatch resolving `for<'r> <Fn0<[closure /home/eddy/Projects/rust/src/test/run-pass/anon-types-example-calendar.rs:272:37: 272:59]> as core::ops::FnOnce<(&'r <It as core::iter::Iterator>::Item,)>>::Output == bool`
[16:17:50] <eddyb> nmatsakis: I think I went a bit too far with the closures
[16:19:02] <eddyb> I've tried to make something which lets me clone zero-sized closures
[16:19:28] <eddyb> although I need to capture in certain places so even if this would compile, assertions would fail :/
[16:20:04] <acrichto> nmatsakis: from a UI perspective I definitely agree, although in the past we've had worries about symbol table size b/c of all our hashes at the end (e.g. we have very long symbol names), but that's the only possible downside I can think of
[16:20:12] <acrichto> nmatsakis: and that's not much of a downside
[16:20:23] <acrichto> Mutabah: I'd leave ok().expect() until expect() is ungated
[16:20:23] * Mutabah is away (Sleeping, and exam)
[16:20:28] <eddyb> acrichto: just put the hash at the start
[16:20:40] <eddyb> what could possibly go wrong :P
[16:22:02] <eddyb> symbol tables not having path compression is a silly thing of the past... too bad all our object formats are ancient
[16:26:03] <nmatsakis> acrichto: well, I agree :)
[16:29:00] <eddyb> even without path compression... C++ name mangling mixed with string interning would let you compare most symbol names in a few instructions
[16:32:04] *** Joins: Astrum|Lap (Astrum|Lap@moz-7enfbr.co.comcast.net)
[16:35:17] <eddyb> nmatsakis: I want Clone closures :(
[16:35:41] <eddyb> I just made this type depend on them by mistake
[16:35:47] <eddyb> s/type/demo
[16:39:13] *** Joins: dcb (dcb@moz-4hh.6p3.217.74.IP)
[16:39:26] <eddyb> or... not. there's a way around it
[16:40:24] *** Joins: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP)
[16:42:36] *** Quits: dcb (dcb@moz-4hh.6p3.217.74.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[16:44:51] *** Joins: dcb (dcb@moz-4hh.6p3.217.74.IP)
[16:51:27] *** Quits: bombless (_@moz-uag.piv.41.59.IP) (Ping timeout: 121 seconds)
[16:53:09] *** Joins: Sindriava (textual@moz-h86ut8.broadband6.iol.cz)
[16:54:38] *** Joins: rkruppe_ (chatzilla@moz-3nj.rnu.131.95.IP)
[16:55:17] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[16:55:18] *** rkruppe_ is now known as rkruppe
[16:59:03] *** Quits: Sindriava (textual@moz-h86ut8.broadband6.iol.cz) (Quit: My Mac has gone to sleep. ZZZzzz…)
[16:59:10] *** Joins: zmack (zmack@moz-qdq.e19.24.188.IP)
[17:00:32] <eddyb> bluss: it works!
[17:00:47] <eddyb> it also takes a very long time to compile... or I've made it into an infinite loop :D
[17:05:56] *** Parts: imperio (Mibbit@moz-8otf3a.fbx.proxad.net) ()
[17:11:05] <bluss> eddyb: what works, cloning closures?
[17:15:22] *** Joins: arielb1 (Mibbit@moz-jagbpo.tau.ac.il)
[17:17:10] *** chmanchester|afk is now known as chmanchester
[17:18:49] <eddyb> well, I've somehow managed to get away with only zero-sized closures
[17:19:00] <eddyb> for which I have a wrapper :P
[17:19:08] <eddyb> bluss: it takes ages to compile though
[17:20:19] *** Joins: Sindriava (textual@moz-h86ut8.broadband6.iol.cz)
[17:20:31] <bluss> that sounds logical, it should be trivial to clone them
[17:20:45] <bluss> I was looking for a way to convert a zero sized closure to a function pointer
[17:21:30] <bluss> how did you implement this?
[17:21:34] <eddyb> that's easy :P
[17:21:39] <eddyb> let me push :D
[17:21:51] <eddyb> (I don't use function pointers, because they're not 0 sized)
[17:22:00] <arielb1> nmatsakis: ping
[17:22:06] <nmatsakis> arielb1: pong
[17:22:24] <arielb1> did you discover anything wrt. compilation time?
[17:22:38] <arielb1> other than type_is_simd and struct_fields. I mean?
[17:22:41] *** Joins: pcwalton (pcwalton@moz-nh2.o1i.216.216.IP)
[17:22:41] *** ChanServ sets mode: +o pcwalton
[17:23:02] <arielb1> and the fact that we don't cache associated types
[17:23:10] <arielb1> in tras
[17:23:12] <arielb1> *trans
[17:23:48] <arielb1> I mean, these 3 should be a 33% no-opt compile-time improvement
[17:24:14] <bluss> someone *cough*huon told on reddit about a compile time improvement :) and now everyone is quite excited
[17:24:24] <eddyb> :/
[17:24:34] <eddyb> no dissing pls
[17:24:38] <eddyb> bluss: https://github.com/eddyb/rust/commit/e78e20466a75714575d67e1ab8aa7f0e2885dc77#diff-e316089ce0820fd13d7dd1401048c54fR211
[17:24:52] <nmatsakis> arielb1: well, I'm about to open a PR that adds some simple caching to give ~33% improvement on servo script crate (overall comp time)
[17:25:00] <eddyb> you can use the same thing to make a free function generic on F and take its pointer. wait, no, you can't
[17:25:07] <arielb1> nmatsakis: caching of
[17:25:08] <nmatsakis> arielb1: I was planning to write up some thoughts in a discuss post digging into the profiling I've been doing
[17:25:19] <arielb1> type_is_simd/struct_fields?
[17:25:19] <eddyb> bluss: heh you need VG for function pointers :P
[17:25:30] <eddyb> or a thing built into the language (which I also want)
[17:25:31] <nmatsakis> arielb1: caching of trait relationships known to hold; the patch is a bit hacky, I'd like to revisit this in a more structured way, but it's small enough
[17:25:45] <arielb1> so script is hitting a worst-case?
[17:26:05] <arielb1> rustc spends 30%-ish of no-opt time in selection
[17:26:15] <arielb1> I mean, all librustc crates
[17:26:27] *** Quits: Sindriava (textual@moz-h86ut8.broadband6.iol.cz) (Quit: My Mac has gone to sleep. ZZZzzz…)
[17:27:30] <nmatsakis> arielb1: I haven't measured the impact on rustc, but I'd not be surprised if it has similar benefits.
[17:27:38] <arielb1> it can't be 30%
[17:27:48] <arielb1> unless there are some massive cache effects
[17:28:02] <nmatsakis> presumably not 30%, though I think I did measure a higher %age
[17:28:05] <bluss> eddyb: aha I guess that was simple. Don't think the compile time is from the closure hack though
[17:28:41] <eddyb> yeah, there's more crazyness going on
[17:28:48] <eddyb> it should be faster tho :D
[17:30:37] *** Quits: zmack (zmack@moz-qdq.e19.24.188.IP) (Connection closed)
[17:30:38] <arielb1> nmatsakis: callgrind says its 30%
[17:30:58] *** Joins: zmack (zmack@moz-qdq.e19.24.188.IP)
[17:31:05] <arielb1> random sampling gave me 5/23
[17:31:07] <eddyb> nrc: your perf-rustc frontend thing is still broken :(
[17:31:14] <bluss> eddyb: so that's just the assoc types part, so is this going to work for rustc? It's a quite massive feature
[17:31:28] <eddyb> bluss: what do you mean?
[17:32:02] <bluss> eddyb: that commit was just assoc types, and I think you said that was the hard part? Just asking if this will become a rust feature soon, what do you think
[17:32:20] *** Quits: avikpal (avikpal@moz-g02.dcg.226.117.IP) (Connection closed)
[17:32:36] <eddyb> no, that's not the same thing
[17:33:09] <eddyb> it's a new way to declare anonymized types, that wasn't in the RFC
[17:33:18] <eddyb> it's not the same as anonymous associated types, which was in the RFC
[17:33:49] <eddyb> here's the whole branch https://github.com/eddyb/rust/commits/calendar-driven-development
[17:34:05] <eddyb> bluss: at this rate, no
[17:36:29] <nmatsakis> acrichto: I have a question about attr::mark_used, do you know this code?
[17:36:56] *** Quits: pcwalton (pcwalton@moz-nh2.o1i.216.216.IP) (Client exited)
[17:37:42] <acrichto> nmatsakis: a little, yeah, but I believe that sfackler was the original author
[17:37:48] <sfackler> yeah
[17:37:50] <sfackler> that was me
[17:38:30] <nmatsakis> sfackler: I see I can mark an entire attribute as used,
[17:38:36] <nmatsakis> sfackler: but is that as fine-grained as it gets?
[17:38:44] <sfackler> right now, yeah
[17:38:50] <nmatsakis> sfackler: i.e., if I have something like legacy(x, y) and I want to declare `x` as used but not `y`, I should just issue a lint myself or something?
[17:39:18] <sfackler> It seems like that kind of thing would be common enough to want to have abstracted out
[17:39:31] *** Quits: zmack (zmack@moz-qdq.e19.24.188.IP) (Connection closed)
[17:39:32] <sfackler> but nothing exists that would do that right now iirc
[17:40:49] <arielb1> nmatsakis: trait relationships known to hold?
[17:41:46] *** Joins: Sindriava (textual@moz-hegob1.wendulka.net)
[17:46:35] <nmatsakis> arielb1: (already tested elsewhere)
[17:46:47] <arielb1> trait relationships
[17:47:03] <arielb1> I mean, improve select caching
[17:47:35] <arielb1> so we don't stupidly try to do confirmation when we have Foo: Sized
[17:49:01] *** Joins: nham (nham@moz-lglsfe.il.comcast.net)
[17:54:56] <Gankro> Does rustc have a semver comparison fn squirreled away anywhere?
[17:56:11] <arielb1> Gankro: crates.io
[17:56:24] <arielb1> https://crates.io/crates/semver
[17:56:28] <Gankro> arielb1: Want to do this in our stability lint :)
[17:56:42] <arielb1> it's rust-lang/semver
[17:58:35] *** Joins: zmack (zmack@moz-qdq.e19.24.188.IP)
[18:06:53] *** Quits: mukilan (mukilan@moz-5ke.d4s.164.122.IP) (A TLS packet with unexpected length was received.)
[18:08:05] *** Quits: zmack (zmack@moz-qdq.e19.24.188.IP) (Connection closed)
[18:17:55] *** Quits: bdero (bran@moz-0e2lk5.sns9.e6pb.0197.2601.IP) (Quit: Leaving.)
[18:20:15] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[18:20:15] *** ChanServ sets mode: +o pcwalton
[18:21:24] *** Quits: doener (doener@moz-eku96m.hsi08.unitymediagroup.de) (Quit: leaving)
[18:22:48] *** Joins: grant (grant@moz-jfh.0nq.187.64.IP)
[18:22:57] *** Joins: brson (brson@moz-u3dg2t.sfo1.mozilla.com)
[18:22:58] *** ChanServ sets mode: +o brson
[18:41:42] *** Joins: harrisonclarke (harrisoncla@moz-gcv.dcv.30.96.IP)
[18:43:41] <acrichto> arielb1: do you have privs to close issues? (e.g. you can probably just close https://github.com/rust-lang/rust/issues/18884)
[18:43:51] *** Joins: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de)
[18:44:11] <arielb1> acrichto: I don't
[18:44:48] <arielb1> that's a rather bad issue
[18:45:02] <arielb1> I mean, so many *different* panics
[18:45:08] <arielb1> there's cat_expr
[18:45:09] <acrichto> arielb1: ok, invited you to the rust-push team
[18:45:10] <arielb1> and cast
[18:45:15] <acrichto> arielb1: that should give you perms to close issues
[18:45:27] <acrichto> arielb1: it also gives perms to push to master, but I'd recommend not doing that :)
[18:45:36] <acrichto> (yay github!)
[18:46:10] <arielb1> do I need to approve it or something?
[18:46:12] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[18:46:19] <arielb1> or just cache
[18:46:30] <arielb1> I mean, wait for github cache to update
[18:46:44] <acrichto> arielb1: I think you get an email?
[18:46:51] <acrichto> it says you were invited to the organization (rust-lang)
[18:47:00] <acrichto> and I guess once that's accepted you'll be good to go
[18:48:04] *** Quits: brson (brson@moz-u3dg2t.sfo1.mozilla.com) (Connection closed)
[18:48:23] *** Quits: dcb (dcb@moz-4hh.6p3.217.74.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[18:50:38] *** Joins: elif (chatzilla@moz-ev8m1p.res.rr.com)
[18:51:19] <arielb1> nmatsakis: ping
[18:52:24] *** Quits: Sindriava (textual@moz-hegob1.wendulka.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[18:55:09] *** Joins: dinfuehr (dinfuehr@moz-fnju7g.highway.telekom.at)
[18:55:52] *** Quits: dinfuehr (dinfuehr@moz-fnju7g.highway.telekom.at) (Connection closed)
[18:56:13] *** Joins: dinfuehr (dinfuehr@moz-fnju7g.highway.telekom.at)
[18:59:11] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[18:59:27] *** Joins: erickt (erickt@moz-0vd.dgr.221.67.IP)
[18:59:28] *** ChanServ sets mode: +ao erickt erickt
[18:59:38] *** Joins: dinfuehr_ (dinfuehr@moz-fnju7g.highway.telekom.at)
[19:00:16] *** Quits: dinfuehr (dinfuehr@moz-fnju7g.highway.telekom.at) (Ping timeout: 121 seconds)
[19:01:10] *** Quits: grant (grant@moz-jfh.0nq.187.64.IP) (Ping timeout: 121 seconds)
[19:03:40] *** Quits: erickt (erickt@moz-0vd.dgr.221.67.IP) (Ping timeout: 121 seconds)
[19:04:53] *** Quits: _Vi (vi@moz-bbs.vhj.131.104.IP) (Ping timeout: 121 seconds)
[19:06:51] *** Quits: dinfuehr_ (dinfuehr@moz-fnju7g.highway.telekom.at) (Connection closed)
[19:07:12] *** Joins: dinfuehr (dinfuehr@moz-fnju7g.highway.telekom.at)
[19:07:19] *** Joins: grant (grant@moz-jfh.0nq.187.64.IP)
[19:08:39] *** Quits: harrisonclarke (harrisoncla@moz-gcv.dcv.30.96.IP) (Connection closed)
[19:08:47] *** Joins: dcb (dcb@moz-4hh.6p3.217.74.IP)
[19:08:55] *** Joins: dinfuehr_ (dinfuehr@moz-fnju7g.highway.telekom.at)
[19:09:10] <arielb1> what's *up* with explicit self?
[19:09:59] *** Quits: dinfuehr (dinfuehr@moz-fnju7g.highway.telekom.at) (Connection closed)
[19:10:39] *** Quits: Kroisse (Kroisse@moz-t75tk5.krois.se) (Quit: Good bye :))
[19:11:02] <arielb1> seriously
[19:11:10] <arielb1> what's the matter with it?
[19:11:54] <Manishearth> nmatsakis: around?
[19:12:24] <nmatsakis> arielb1: pong
[19:12:28] <nmatsakis> Manishearth: yeah, -ish
[19:12:43] <arielb1> nmatsakis: how should I go about with fix-wf
[19:13:06] *** Joins: harrisonclarke (harrisoncla@moz-kqomg8.eastlink.ca)
[19:13:21] <Manishearth> nmatsakis: Assuming the breaking change is to land, around when would that be (estimate)?
[19:13:22] *** Joins: jbomo (dkd@moz-uol4mm.fios.verizon.net)
[19:13:24] <Manishearth> cc steveklabnik 
[19:13:42] <arielb1> the most annoying problem there was associated types well-formedness
[19:13:48] <Manishearth> I'd like to ensure that the production users don't have trouble with it and are on board
[19:14:09] <arielb1> people have impls like impl<'a, T> IntoIterator for &'a Foo<T> { type Iter = FooIter<'a, T> }
[19:14:28] <arielb1> I suppose I can use the free-region map from the self type?
[19:14:29] <nmatsakis> Manishearth: well, per acrichto's suggestion, we wouldn't try to backport it, so it would land hopefully in time for beta, which would certainly give people time to complain 
[19:14:33] <arielb1> via implicator
[19:14:54] <nmatsakis> Manishearth: I think we could make avail a binary before we land on nightly though, not sure if crater makes  one available, if people  wanted to test early
[19:15:29] <Manishearth> nmatsakis: Yeah, having a binary would be really great
[19:15:47] <Manishearth> okay, so that seems like plenty of time
[19:15:54] <nmatsakis> arielb1: hmm. yes, this relates to something I'm writing an RFC about
[19:16:45] <arielb1> and how should wf work with methods?
[19:17:34] <arielb1> non-generic methods need to be checked for wf
[19:17:37] <arielb1> at least at trans time
[19:17:42] <nmatsakis> arielb1: in particular it seems like it'd be good if we could rely on self type being WF, but we have to be a bit careful I think, to make sure we actally enforce that, 
[19:17:45] <nmatsakis> at the right spots
[19:17:53] <arielb1> nmatsakis: of impls?
[19:21:10] *** Quits: dinfuehr_ (dinfuehr@moz-fnju7g.highway.telekom.at) (Connection closed)
[19:23:19] <arielb1> nmatsakis: also, what should we do with false predicates?
[19:23:47] <arielb1> http://is.gd/O9Gcrw
[19:23:55] <arielb1> I think that case is fine
[19:24:00] <arielb1> because you can't actually call the function
[19:24:21] <arielb1> but you may be able to cause ICEs
[19:24:32] *** Joins: laumann (thomas@moz-n9e72h.0.fullrate.dk)
[19:25:20] <nmatsakis> arielb1: sorry, I"ve been pondering one of your first questions :)
[19:26:12] <arielb1> I suppose we should check function wf at call time
[19:26:31] <nmatsakis> arielb1: regarding the last case, I've been wondering about it in another context; I think it's ok anyhow, but eventually I would probably like to reject fns that have where clauses we know no caller can prove, I was worrying in particular about how it could falsify some of the caching logic, though so long as type parameters are involved, it should be ok
[19:26:47] <arielb1> nmatsakis: no type parameters in my example
[19:27:00] <arielb1> actually the current cache logic smartly ignores these cases
[19:27:08] <nmatsakis> arielb1: regarding the first case, I've been working on the WF rules around projections, whicha are inadequate. The change I've impl'd so far isn't quite strong enough to enable the reasoning in impls I think we'd want (as you suggested), but I can easily experiment I think 
[19:27:23] <arielb1> first case?
[19:27:42] <nmatsakis> impl<'a, T> IntoIterator for &'a Foo<T> { type Iter = FooIter<'a, T> }
[19:27:52] <arielb1> obviously assoc types need to be wf if the impl is wf
[19:28:09] <arielb1> because otherwise we have trans errors
[19:28:16] *** Quits: semarie (semarie@moz-kvs6fc.torservers.net) (A TLS packet with unexpected length was received.)
[19:28:16] <nmatsakis> arielb1: well, there is T, but of course it's normalized away, which is your point. The existing rules against type parameters aren't good enough. That example would (I think) break the more aggressive caching i've been experimenting with, for example, which is precisely what I was worrying about :)
[19:28:30] *** Joins: semarie (semarie@moz-ke9rv2.nos-oignons.net)
[19:28:42] <arielb1> nmatsakis: when where clauses are involved
[19:29:00] <arielb1> we can't cache anything except for matches when no inference variables are involved
[19:29:04] <arielb1> because of
[19:29:18] <arielb1> inference leaps of faith
[19:29:26] <arielb1> and "single impls"
[19:29:37] <arielb1> and of course where clause creating new ambiguities
[19:30:02] <arielb1> of course we have to be careful about false predicates
[19:30:03] <nmatsakis> arielb1: yes, I know. I've been working on changes that target cases where there are no inference variables, which is the vast majority it turns out.
[19:30:10] *** Joins: Kroisse (Kroisse@moz-t75tk5.krois.se)
[19:30:15] <arielb1> nmatsakis: because of projection?
[19:30:46] *** Joins: larhat1 (Adium@moz-vlo5br.cable.virginm.net)
[19:30:48] <nmatsakis> nothing to do w/ projection...
[19:31:10] <nmatsakis> we just know most types most of the time
[19:31:16] <nmatsakis> particularly around things like X: Sized and X: Copy etc
[19:31:55] <nmatsakis> I'm pondering what is the best way to handle such "false" predicates -->
[19:31:56] *** Quits: untitaker_ (untitaker@moz-ibc87j.highway.telekom.at) (Ping timeout: 121 seconds)
[19:31:59] *** Quits: arielb1 (Mibbit@moz-jagbpo.tau.ac.il) (Quit: http://www.mibbit.com ajax IRC Client)
[19:32:03] <nmatsakis> seems like if the normalized form
[19:32:12] <nmatsakis> has no lifetime or type parameters in it
[19:32:28] <nmatsakis> we ought not to add it to the where-clause set, and can just check it in the callee
[19:32:30] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[19:32:36] <nmatsakis> (add it to the environment, that is)
[19:32:59] <nmatsakis> (it will also get checked in the caller, but that's kind of neither here nor there)
[19:33:18] <nmatsakis> at least if we did that it would make it easier to cache results across fns...
[19:34:55] *** Joins: untitaker (untitaker@moz-qarldn.highway.telekom.at)
[19:37:38] *** Quits: nicknikolov (nicknikolov@moz-qg7.vka.123.2.IP) (Quit: Leaving...)
[19:39:21] *** Quits: larhat1 (Adium@moz-vlo5br.cable.virginm.net) (Quit: Leaving.)
[19:45:02] *** Quits: semarie (semarie@moz-ke9rv2.nos-oignons.net) (A TLS packet with unexpected length was received.)
[19:45:03] *** Joins: bombless (_@moz-uag.piv.41.59.IP)
[19:55:25] *** chmanchester is now known as chmanchester|afk
[19:56:28] *** Joins: rkruppe_ (chatzilla@moz-3nj.rnu.131.95.IP)
[19:58:51] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[19:58:51] *** ChanServ sets mode: +o pcwalton
[19:59:13] *** Joins: zmack (zmack@moz-qdq.e19.24.188.IP)
[19:59:54] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[20:00:07] *** rkruppe_ is now known as rkruppe
[20:00:23] *** Joins: arielb1 (Ariel@moz-ovd.f7o.66.109.IP)
[20:02:23] <arielb1> I am afraid false predicates can cause ICE
[20:03:27] <arielb1> I think you can do similar damage with false predicates that involve lifetime parameters
[20:03:34] <arielb1> i.e. [&'a u8]: Sized
[20:04:10] <arielb1> of course, currently all predicates must be checked by the caller
[20:04:19] <arielb1> so methods with false predicates are unusable
[20:04:26] *** Quits: zmack (zmack@moz-qdq.e19.24.188.IP) (Connection closed)
[20:04:48] *** Joins: zmack (zmack@moz-qdq.e19.24.188.IP)
[20:06:01] <arielb1> nmatsakis: maybe we should ban these methods outright
[20:06:30] <arielb1> after all, they are unusable
[20:06:30] <arielb1> that would be a hazard with traits, through
[20:07:43] <arielb1> maybe we actually should allow methods with false predicates to not be implemented
[20:07:54] <arielb1> after all, that's what Self: Sized becomes when Self=[u8]
[20:09:08] *** Quits: zmack (zmack@moz-qdq.e19.24.188.IP) (Connection closed)
[20:10:44] *** Joins: _Vi (vi@moz-bbs.vhj.131.104.IP)
[20:21:21] *** Quits: harrisonclarke (harrisoncla@moz-kqomg8.eastlink.ca) (Connection closed)
[20:26:31] *** Joins: harrisonclarke (harrisoncla@moz-kqomg8.eastlink.ca)
[20:28:45] *** Joins: larhat1 (Adium@moz-vlo5br.cable.virginm.net)
[20:29:49] *** Joins: brson (brson@moz-u3dg2t.sfo1.mozilla.com)
[20:29:50] *** ChanServ sets mode: +o brson
[20:32:22] <arielb1> eddyb: how does explicit self work?
[20:32:30] <arielb1> is it only for &Self,Box<Self>?
[20:32:38] <arielb1> +&mut Self,Self
[20:33:42] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Quit: ChatZilla 0.9.91.1 [Firefox 38.0.5/20150525141253])
[20:33:48] <eddyb> yes
[20:33:57] <eddyb> it's mainly for Box<Self>
[20:34:02] <eddyb> arielb1: it can't be fixed soon though
[20:34:16] <eddyb> or, I mean, not directly
[20:34:27] <eddyb> for inherent methods we need to stop tracking impl blocks and start tracking method names
[20:35:01] <arielb1> eddyb: track method names?
[20:35:32] <arielb1> i.e. have a method name => method map?
[20:35:52] <arielb1> or better, a (method name, fast-reject key) => method map?
[20:37:39] <eddyb> arielb1: pretty much, yes
[20:38:01] <eddyb> arielb1: well, if you use fast reject, you may need two maps
[20:38:15] <arielb1> eddyb: one for blankets, one for others?
[20:38:16] <eddyb> (or... not?)
[20:38:35] <eddyb> arielb1: the issue I'm thinking of is <T>::foo vs (x: T).foo()
[20:38:43] <arielb1> not really
[20:38:51] <eddyb> but those might end up using the same type for each method
[20:38:52] *** Quits: Astrum|Lap (Astrum|Lap@moz-7enfbr.co.comcast.net) (Client exited)
[20:38:56] <arielb1> eddyb: what's the difference between them?
[20:38:58] <eddyb> well, no
[20:39:08] <arielb1> actually, <T>::foo should look up the inherent impl
[20:39:14] <eddyb> arielb1: impl Foo { fn foo(self: Box<Self>) {} }
[20:39:26] <arielb1> eddyb: that should be <Foo>::foo
[20:39:28] <eddyb> Foo::foo vs (x: Box<Foo>).foo()
[20:39:40] <eddyb> arielb1: yupp
[20:39:52] <eddyb> but when you look up method calls, it won't be Foo you want to look for
[20:39:58] <arielb1> so we need the 2 map
[20:40:00] <arielb1> *maps
[20:48:42] <arielb1> eddyb: then r? gh26225?
[20:48:42] <[o__o]> Prevent raw pointers from being used as an explicit self: https://github.com/rust-lang/rust/pull/26225
[20:49:38] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[20:50:04] *** Joins: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com)
[20:53:42] *** Joins: andrew-d_w (andrew-d_w@moz-f7k.iq2.247.50.IP)
[20:54:15] <eddyb> arielb1: might want to ask brson to check for regressions later
[20:54:25] <eddyb> I doubt any code would use that form *shrug*
[20:54:28] <arielb1> eddyb: it didn't really work
[20:54:45] <arielb1> I mean, self: *const Self was being treated as self: Self
[20:54:45] *** Quits: jgallagher (john@moz-d5e8oc.hfc.comcastbusiness.net) (Client exited)
[20:55:32] <eddyb> could you use it as a static method?
[20:55:34] <arielb1> so it goes under "change requiring minor annotation"
[20:55:39] <arielb1> eddyb: it was usable
[20:55:45] <arielb1> just the self-type was Self, not *const Self
[20:55:48] <arielb1> or *mut Self
[20:56:00] <Gankro> Hmm, so what are you generally supposed to do in rustc when you reach a kind of nonsensical point in the middle of a procedure? In particular I want to parse some semver strings into the constituent numbers. If that Err's I'm inclined to span_err and return 0 and let the code that handled them do whatever it feels like (which in this case might spit out some
[20:56:00] <Gankro> more bogus span_errs, or proceed the lint as normal which seems harmless).
[20:56:03] <arielb1> the code was saving the wrong self-type
[20:56:37] <eddyb> lol
[20:57:22] <cmr> Gankro: if you can get away with it, span_err and continuing with some sort of safe state is a Good Thing as it allows other things to also potentially make progress.
[20:57:50] <Gankro> cmr: And if it spits out bogus span_errs as a result? Big deal?
[20:57:57] <eddyb> Gankro: if you can prevent unnecessary errors without preventing anything useful from running, you should do it
[20:58:28] <Gankro> Alright I'll just make the code more imperative; less closures
[21:04:46] *** chmanchester|afk is now known as chmanchester
[21:05:34] *** Quits: munksgaard (munksgaard@moz-478pev.u.parknet.dk) (Ping timeout: 121 seconds)
[21:07:36] *** Joins: munksgaard (munksgaard@moz-urnkl5.u.parknet.dk)
[21:08:06] <jethrogb> why is the derive(RustcEncodable) stuff split between the main compiler and a separate library?
[21:08:39] <steveklabnik> external libraries cannot write their own derive yet
[21:10:16] <bluss> external libraries actually got derive after it was split out
[21:10:25] <bluss> rand_macros uses that I think
[21:10:39] <steveklabnik> oh that changed?
[21:10:46] <steveklabnik> i thought special stuff was done for encodable
[21:11:10] <bluss> I know that #[derive(Rand)] is translated to #[derive_Rand] which the external library then handles
[21:11:17] <sfackler> #[derive(Foo, Bar)] expands to #[derive_Foo] and #[derive_Bar]
[21:11:42] <sfackler> RustcEncodable is supported in rustc because syntax extensions aren't stable
[21:11:59] <steveklabnik> ohhhh
[21:12:01] <sfackler> you can only use derive(Rand) on nightlies
[21:12:02] <steveklabnik> right, i remember this now
[21:12:13] <WindowsBunny> and custom deriving needs syntax extensions
[21:14:01] *** Quits: erz (erz@moz-fiq1tl.broadband.corbina.ru) (Quit: My Mac has gone to sleep. ZZZzzz…)
[21:15:52] *** Quits: munksgaard (munksgaard@moz-urnkl5.u.parknet.dk) (Ping timeout: 121 seconds)
[21:17:23] *** Quits: dcb (dcb@moz-4hh.6p3.217.74.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[21:17:25] <bluss> it makes sense
[21:17:46] <eddyb> compressed.push_all(&flate::deflate_bytes(&metadata));
[21:17:56] <eddyb> I don't think this is verry efficient q_q
[21:19:49] <Gankro> eddyb: Delicious allocation is always optimal
[21:20:12] <eddyb> Gankro: and we keep metadata around and we pass a slice of compressed to LLVM
[21:20:26] <eddyb> I don't think I can count the copies on one hand
[21:20:57] <Gankro> It's ok, eddyb, one day you'll be able to count to 3 on one hand :P
[21:21:12] *** Quits: harrisonclarke (harrisoncla@moz-kqomg8.eastlink.ca) (Connection closed)
[21:21:34] <eddyb> I'll... just stop questioning it
[21:25:27] *** Joins: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu)
[21:27:31] <arielb1> acrichto: what's up with the buildbots?
[21:28:14] <arielb1> auto-mac-32-opt retry exception slave lost
[21:28:30] <Gankro> eddyb: (less copies would indeed be great!)
[21:29:33] <arielb1> 3 copies?
[21:29:54] *** Quits: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP) (Ping timeout: 121 seconds)
[21:30:06] <arielb1> there's only one copy there
[21:30:13] *** Joins: Astrum|Lap (Astrum|Lap@moz-7enfbr.co.comcast.net)
[21:30:14] <arielb1> + 1 deflate "copy"
[21:30:27] *** Joins: dcb (dcb@moz-4hh.6p3.217.74.IP)
[21:30:39] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[21:30:39] *** ChanServ sets mode: +ao erickt erickt
[21:32:43] <acrichto> arielb1: mac4 is just a weird bot
[21:32:49] <acrichto> it randomly disappears sometimes unfortunately
[21:33:03] *** Joins: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP)
[21:33:29] <arielb1> it seems to block the build
[21:36:23] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[21:43:00] *** Quits: bombless (_@moz-uag.piv.41.59.IP) (Quit: Leaving)
[21:49:22] <Gankro> arielb1: I was counting copy-into-deflate, copy-into-compressed, and copy-into-llvm (which eddyb seemed to imply happened)
[21:49:40] <arielb1> copy-into-deflate?
[21:50:45] <arielb1> there's one "copy" inside deflate
[21:51:02] <arielb1> one true copy inside push_all
[21:51:31] <arielb1> and whatever C_bytes_in_context does
[21:52:03] <arielb1> which may be just a write(2)
[21:52:47] <arielb1> that's 1 useless copy
[21:53:23] <arielb1> Gankro: I can't see the other 2
[21:53:39] <arielb1> unless you were counting the deflate as a copy
[21:53:59] <arielb1> and counting LLVM as one copy
[21:54:06] <Gankro> arielb1: I think the main point is that ideally we deflate directly into compressed
[21:54:32] <Gankro> Everything else is basically required
[21:54:44] <arielb1> that would require a better miniz interface
[21:55:57] <eddyb> arielb1: C_bytes_in_context goes into the heap
[21:56:20] <arielb1> eddyb: it clones the buffer?
[21:56:40] *** Quits: dcb (dcb@moz-4hh.6p3.217.74.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[21:57:24] <eddyb> yeah, on the LLVM side
[21:57:24] <acrichto> WindowsBunny: ping
[21:57:30] <WindowsBunny> acrichto: pong
[21:57:45] <acrichto> WindowsBunny: if I were interested in an API being bound in your windows api crates, what would be the best way of going about that?
[21:57:50] <eddyb> arielb1: "compressed" is deallocated afterwards and the data is in the heap
[21:58:01] <acrichto> WindowsBunny: specifically the RtlCaptureContext function
[21:58:02] <WindowsBunny> acrichto: Well, it depends on whether you want me to do it, or you want to do it yourself
[21:58:03] <eddyb> arielb1: owned by a LLVM value
[21:58:15] <arielb1> eddyb: I guess
[21:58:38] <acrichto> WindowsBunny: I wouldn't mind doing it, I guess it's just a PR in that case?
[21:58:54] <WindowsBunny> acrichto: lib/kernel32-sys/src/lib.rs
[21:59:00] <WindowsBunny> The function is already there commented out
[21:59:08] <acrichto> cool
[21:59:22] <WindowsBunny> Just fill in the signatures you want, uncomment, submit a PR, and I'll land a crates.io bump shortly
[22:01:19] <acrichto> WindowsBunny: so this function depends on a type definition in winnt, is it ok to add a dep between the two?
[22:01:24] <acrichto> oh wait nvmd
[22:01:29] * acrichto has this
[22:01:40] <WindowsBunny> acrichto: All the dependencies are already setup
[22:01:54] <acrichto> wow this is way too easy
[22:01:56] <WindowsBunny> If you need to add some types/constants just add them to the respective header under src/
[22:02:57] *** Joins: summerlight (summerlight@moz-99k.2mj.130.121.IP)
[22:03:22] *** Joins: dcb (dcb@moz-4hh.6p3.217.74.IP)
[22:07:31] *** Quits: Jesin (Jesin@moz-t88s6v.cc.lehigh.edu) (Ping timeout: 121 seconds)
[22:09:38] *** Joins: njn (chatzilla@moz-c6c476.iinet.net.au)
[22:18:39] *** Joins: Jesin (Jesin@moz-4jre1i.eecs.lehigh.edu)
[22:21:01] <WindowsBunny> acrichto: k, should be good to go
[22:22:38] *** Quits: martin (martin@moz-bmp33l.u0v6.gff7.1608.2001.IP) (Ping timeout: 121 seconds)
[22:24:52] *** Quits: laumann (thomas@moz-n9e72h.0.fullrate.dk) (Ping timeout: 121 seconds)
[22:26:06] *** Quits: larhat1 (Adium@moz-vlo5br.cable.virginm.net) (Quit: Leaving.)
[22:35:09] *** Quits: summerlight (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[22:36:29] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[22:41:05] *** Quits: bjz (bjz@moz-puppgq.tpgi.com.au) (Quit: My Mac has gone to sleep. ZZZzzz…)
[22:41:28] *** skeuomor1 is now known as skeuomorf
[22:45:06] <acrichto> WindowsBunny: awesome! I'm adding some dbghelp stuff as well, just making sure it all compiles locally
[22:45:30] *** Quits: skeuomorf (skeuomorf@moz-d5k.lok.32.197.IP) (Ping timeout: 121 seconds)
[22:45:34] <acrichto> WindowsBunny: hm, there's a comment saying // Skipping TCHAR things
[22:45:42] <acrichto> should I just use some other char instead?
[22:46:10] <WindowsBunny> acrichto: Anything that takes TFOO can be replaced with FOO and WFOO, and A/W versions of the functions
[22:46:42] <acrichto> cool
[22:46:50] <WindowsBunny> T things are just macro'd based on whether UNICODE is defined, so I just don't bother with that abstraction
[22:47:15] <acrichto> makes sense
[22:50:09] *** Quits: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua) (Ping timeout: 121 seconds)
[22:54:01] <acrichto> WindowsBunny: hm, are you familiar with dbghelp.dll?
[22:55:57] *** Joins: joh (uid13099@moz-2c7ap3.ealing.irccloud.com)
[23:01:39] *** Quits: dcb (dcb@moz-4hh.6p3.217.74.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[23:01:51] *** Joins: dcb (dcb@moz-4hh.6p3.217.74.IP)
[23:14:24] <acrichto> nrc: just tried out today's nightly and was able to build the entirety of cargo with parallel codegen!
[23:16:42] *** Quits: duesenfranz_ (jona@moz-711djm.tirol.surfer.at) (Client exited)
[23:18:30] <WindowsBunny> acrichto: I will be in a few seconds
[23:19:30] *** Joins: duesenfranz_ (jona@moz-711djm.tirol.surfer.at)
[23:21:01] <reem> what packages do I need to build rust on a totally fresh ubuntu install?
[23:23:13] *** Quits: brandonson (brandonson@moz-04bj5s.cs.ubc.ca) (Ping timeout: 121 seconds)
[23:26:51] <brson> reem: https://github.com/rust-lang/rust-wiki-backup/blob/master/Note-getting-started-developing-Rust.md#debian-based-linux-distributions
[23:27:38] <reem> nice, thanks
[23:27:51] <reem> I am testing parallel codegen on a 32 core machine with 32 codegen units
[23:28:01] <WindowsBunny> acrichto: Can you rebase against my latest commit?
[23:28:23] <WindowsBunny> acrichto: I fixed things so you _can_ link to dbghelp
[23:28:42] <brson> reem: woah cool
[23:28:47] *** Quits: dcb (dcb@moz-4hh.6p3.217.74.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[23:28:56] <reem> yay 8xlarges :)
[23:30:22] *** Joins: dcb (dcb@moz-4hh.6p3.217.74.IP)
[23:31:10] <acrichto> WindowsBunny: oh man you're the best, pushed a rebased version now
[23:32:01] <WindowsBunny> !WindowsBunny
[23:32:01] <rustbot> Retep998, the local expert on Windows and bunnies. Is the best.
[23:32:35] <brson> wait, i've never seen WindowsBunny say anything meaningful about bunnies
[23:32:42] <brson> I think you are misrepresenting yourself
[23:32:47] <WindowsBunny> brson: That's because nobody asks
[23:32:50] <brson> lol
[23:34:53] *** Quits: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[23:39:06] *** Joins: brandonson (brandonson@moz-04bj5s.cs.ubc.ca)
[23:40:21] *** chmanchester is now known as chmanchester|afk
[23:40:37] *** Quits: duesenfranz_ (jona@moz-711djm.tirol.surfer.at) (Client exited)
[23:45:38] *** Quits: yjv (yjv@moz-j0cdis.fios.verizon.net) (Connection closed)
[23:57:07] <nrc> acrichto: \o/
