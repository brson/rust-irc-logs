[00:00:41] <aatch> man alex is really earning his new paycheck
[00:00:49] <tjc> heh
[00:01:00] <mletterle> noice
[00:01:08] *** Joins: brianm (brianm@moz-9B7D279E.dsl.static.sonic.net)
[00:01:37] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[00:02:09] <joelteon> Dat alex
[00:02:10] *** Joins: jgilbert (jgilbert@moz-BBE3ABD.mv.mozilla.com)
[00:02:19] <mletterle> When ever I see a rust question that starts with "I'm using 0.8" I want to just reply with "WHY AREN'T YOU USING MASTER!?"
[00:03:01] *** Joins: qrada (ad@1FF1D5D4.3F1C4048.973C8D27.IP)
[00:03:23] <sp3d> can we move the master doc links above the 0.8 ones on rust-lang.org?
[00:03:24] * dbaupp thinks we should be less aggressive about that, until we have "official" nightlies.
[00:04:00] <bodie> presumably because if you're using 0.8 to build something someone else might ever look at, you want a reference point
[00:04:05] *** jorendorff is now known as jorendorff_away
[00:04:18] <pcwalton> I've been busy on servo lately, apologies
[00:04:27] * mletterle agrees that official nightlies is a good idea once 0.9 starts to colesce.
[00:04:28] <aatch> Eh, it's understandable. But I can't ever answer the "how do I do x in 0.8" questions. I can't remember how to do stuff with a week-old build.
[00:04:49] <bodie> this is commonly perceived as a huge problem in the wider community, fyi
[00:05:19] <bodie> 9/10 of the breakdowns of Rust that I've read count "constantly changing spec" as a minus
[00:05:24] <bodie> which actually almost put me off it
[00:05:42] <aatch> bodie, kind of unfair though, we don't advertise as being stable
[00:05:51] <mletterle> I think that's to be expected for something pre 1.0. if it continues post 1.0 that's different.
[00:06:04] <dbaupp> (we advertise as being explicitly unstable, even.)
[00:06:13] <bodie> *shrug* it is what it is
[00:06:13] <tjc> aatch: There's no such thing as an unfair complaint when you're trying to improve :-)
[00:06:14] <bodie> I'm willing to deal with some instability in exchange for being ahead of the crowd ;)
[00:06:31] <tjc> With that said, though, I think there are other languages people can use if they want something they know isn't going to change
[00:07:16] <bodie> I definitely got the sense it was moving in a more "let's move toward a more stable spec" direction lol
[00:07:42] <aatch> bodie, and we are. The rate of breaking changes has been falling rapidly.
[00:07:52] <bodie> that's what I like to hear =) hehe
[00:07:59] <aatch> We're starting to seriously address questions that have to be solved pre-1.0
[00:08:06] <aatch> Stuff like segmented stacks.
[00:08:25] <bodie> still tough to get my feet wet when it's not certain that open-source stuff I'm trying to look over for learning purposes has become drastically different than spec
[00:08:34] <bodie> but, reading manuals never hurt anyone lol
[00:08:41] <bodie> that's awesome
[00:09:07] <aatch> bodie, I feel that we try to make up for some of it by being as helpful as possible in this room
[00:09:17] <bodie> plus you guys are clearly an amazing community =]
[00:09:21] <bodie> definitely
[00:09:26] <dbaupp> reading Rust's manual doesn't help that much... it's not exactly kept up-to-date
[00:10:03] <aatch> We also have a fairly broad base, attracting both people from high-level (especially functional) languages and low-level ones
[00:10:07] <aatch> helps keep a balance.
[00:10:07] *** Joins: lfox (lfox@moz-B8648F0F.nycmny.fios.verizon.net)
[00:10:11] <mletterle> Pick a few projects, create a couple more, and keep them running master.
[00:10:30] <dbaupp> <3 rust-ci and the people maintaining nightlies
[00:10:36] *** Quits: Kruppe (user@moz-9A6FCE9E.cable.teksavvy.com) (Client exited)
[00:10:45] <aatch> strcat definately does an invaluable service in being a performance hawk
[00:10:50] <bodie> oogh...... manual not current?
[00:10:52] <mletterle> whoever keeps the rust nightly ppa is my hero.
[00:10:58] <bodie> what version exactly have I been learning? lol
[00:11:13] <aatch> bodie, probably a mixture of multiple versions.
[00:11:28] <dbaupp> bodie: a weird mix of pre 0.1 through 0.9 :P
[00:11:28] *** Quits: carllerche (carllerche@moz-2B516F15.hsd1.or.comcast.net) (Quit: carllerche)
[00:11:33] <strcat> there are parts of the tutorial/manual that are up-to-date but they are a small fraction
[00:11:43] *** Joins: rlbaker (rlbaker@moz-7F06875C.hfc.comcastbusiness.net)
[00:11:50] *** Quits: rlbaker (rlbaker@moz-7F06875C.hfc.comcastbusiness.net) (Quit: rlbaker)
[00:11:52] <mletterle> I really need to take the time to go through the docs and do more cleanup.
[00:11:56] <strcat> there's a lot of incorrect/misleading information in them
[00:12:02] <mletterle> so hard when there's.. code to write.
[00:12:20] *** Joins: Kruppe (user@moz-9A6FCE9E.cable.teksavvy.com)
[00:12:24] <bodie> documentation is a hard engineering problem in my experience
[00:12:36] <bodie> not the actual making of it, but the actual keeping of it lol
[00:12:42] <tjc> there aren't really incentives for open-source people to work on docs
[00:12:51] <tjc> since by their nature, they're the ones who are already into the project and don't need the docs :-)
[00:12:56] <Sharp> There are almost anti-incentives :P
[00:12:58] <Sharp> No docs => upsell support
[00:13:05] <tjc> Yeah, that too
[00:13:06] <mletterle> neverending appreciation by users and maintainers.
[00:13:09] <tjc> and, docs have to be kept up to date
[00:13:27] <rbancroft> how about being immortalized in the technical documentation hall of fame
[00:13:27] <[mm]> tjc: It's worse in closed source companies imo.  Since who needs docs when everybody writing the software is in the same building?
[00:13:49] * [mm] pretty bad at writing documentation
[00:13:50] <mletterle> if you're an ISV you're paid to update docs... and it's hard there.
[00:13:58] <Sharp> OTOH, MDN is routinely singled out as some of the best documentation available
[00:14:04] <Sharp> At least in my experience
[00:14:17] <mletterle> I slipped an "S" in there and almost choked.
[00:14:26] <mletterle> also, that's totally not true for NSS. Trust me.
[00:14:31] <Sharp> Haha
[00:14:46] <Sharp> I've been following the Mozilla project off and on for a long time now and I don't think NSS was ever well documented
[00:14:49] <Sharp> Or not confusing
[00:15:11] *** Quits: alan (alan@moz-FE02DD30.sat6.rackspace.com) (Ping timeout)
[00:15:18] <mletterle> I came across a page the other day that said "man pages go here".. it was last updated in 2010.
[00:15:31] <bodie> I like auto-documentation
[00:15:33] *** Quits: donri (donri@moz-9BB61102.tbcn.telia.com) (Client exited)
[00:15:41] <mletterle> auto docs are good
[00:15:42] <bodie> anyone who commits code without a doc comment must be punished
[00:15:46] <bodie> with the belt
[00:15:49] <mletterle> docs in code are good too
[00:15:52] <Sharp> At least in close source solutions, that doesn't really work as expected :P
[00:15:57] <Sharp> Or at least as intended.
[00:16:08] <bodie> silly humans
[00:16:21] <Sharp> fn getFoo() /* Gets foo */
[00:16:21] *** Joins: yuriks (yuriks@CE6EF1E.88B480FC.748B6D8D.IP)
[00:16:23] <strcat> the Vectors and strings part of the tutorial is especially bad
[00:16:25] <Sharp> See that routinely
[00:16:29] <tjc> [mm]: At least at a closed source company, a manager can ask people to do it...
[00:16:35] <tjc> in my experience, that rarely happens
[00:16:37] <tjc> but it *can* :-)
[00:16:52] <dbaupp> acrichto: is rust-compress designed to be streaming?
[00:16:53] <Sharp> In theory it could also be part of code review standards, in the same way that writing a test is
[00:16:57] <tjc> Yeah
[00:17:02] <Sharp> We can't statically check that you added a test
[00:17:06] <Sharp> So it's pretty similar IMO
[00:17:07] <acrichto> dbaupp: yes, although I haven't done a whole lot of work on it:(
[00:17:07] *** Joins: SiegeLord (sl@moz-1DF56822.twcny.res.rr.com)
[00:17:11] <bodie> standards, ahh.  I love fantasy land
[00:17:11] <bodie> lol
[00:17:12] <tjc> when I review code for Rust, I try to make sure it's well-documented, but...
[00:17:14] <tjc> that's all ad hoc
[00:17:21] *** Quits: brianm (brianm@moz-9B7D279E.dsl.static.sonic.net) (Quit: Linkinus - http://linkinus.com)
[00:17:22] <Sharp> Running examples in the documentation would improve things :)
[00:17:32] <Sharp> At least then it wouldn't be blatantly wrong
[00:17:34] <dbaupp> acrichto: would you take contributions? (not that I have time to, but I can at least imagine myself doing so)
[00:17:39] <bodie> You guys should have the manual auto-doc itself lol
[00:17:39] <acrichto> dbaupp: ceratinly!
[00:17:55] *** Quits: kellogh (timkellogg@moz-68DF7EF7.teliax.com) (Quit: kellogh)
[00:18:02] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[00:18:05] <bodie> like some kind of crazy magic Rust-enabled natural language parser that explains its thoughts and feelings
[00:18:09] <bodie> ... I'll stop now
[00:18:36] <yuriks> Hey
[00:18:43] <bodie> but we were talking about unicorns and doc standards and stuff
[00:18:49] <dbaupp> bodie: you're volunteering to write it, yeah? :P
[00:18:53] <yuriks> I'm trying to build a package using rustpkg (rust 0.8) on windows, and I'm getting this: http://hastebin.com/warodadutu.txt
[00:19:03] <yuriks> is rustpkg known not to work on windows or is there something else going on?
[00:19:44] <dbaupp> it's possibly because glfw doesn't work with rust 0.8, but that error looks like something to do with rustpkg itself.
[00:19:49] <bodie> dbaupp, I will do my part by lurking in your IRC and criticizing any attempts at it
[00:20:04] <dbaupp> bodie: close enough \o/
[00:20:07] <bodie> :D
[00:20:14] <bodie> wow, you guys ARE welcoming
[00:20:27] <bodie> I was very impressed when I first came in here looking for advices.  <3
[00:20:50] <yuriks> dbaupp: I agree. It's saying it can't find the 'std' package, but that doesn't make much sense
[00:20:59] <yuriks> I can run little test programs fine using rust run
[00:21:27] <dbaupp> yuriks: I've got no idea... tjc (author of most of rustpkg) might though
[00:21:49] <tjc> dbaupp yuriks : Not really -- I know the rustpkg tests pass on windows, but I don't have access to a Windows machine to test it on...
[00:21:57] <tjc> yuriks: you might try upgrading to git HEAD, though
[00:21:59] <dbaupp> acrichto: https://github.com/alexcrichton/rust-compress/blob/master/lz4.rs#L349 is incorrect, the checksum could well be 0 sometimes. :P
[00:22:17] <acrichto> dbaupp: ah, i should change that to rand::random()
[00:22:29] <dbaupp> acrichto: much better
[00:22:53] *** Joins: carllerche (carllerche@moz-2B516F15.hsd1.or.comcast.net)
[00:23:46] <acrichto> dbaupp: technically the lz4 compression is working, it just never compresses
[00:23:50] <yuriks> tjc: I'll try. I doubt I'll manage to build rust tho. I'm currently using the binaries
[00:24:09] <dbaupp> acrichto: ship it
[00:24:14] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Ping timeout)
[00:24:55] <dbaupp> acrichto: just stick a little comment on the compression methods "Note: only valid for files with checksum 0, and doesn't actually compress."
[00:25:01] <tjc> yuriks: Sorry, this is just one example of our Windows experience being less than ideal
[00:25:08] <acrichto> hahaha, the devil's in the details...
[00:25:33] <tjc> brson: r? https://github.com/mozilla/rust/pull/10342
[00:25:48] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[00:26:12] <mletterle> oooh, rustpkg fix. 
[00:26:21] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[00:26:44] <yuriks> tjc: :( Well, mingw/msys is already pretty annoying by itself
[00:26:55] <tjc> yuriks: Yeah, that's part of the problem
[00:27:01] <tjc> in the long term, we want to switch to MSVC++
[00:27:09] <tjc> but no one has been very motivated to do that work, and it's a lot of work
[00:27:40] <mletterle> :/
[00:28:40] <SiegeLord> I thought the eventual idea was to switch to lld, and not care about the C++ compiler version at all
[00:28:52] <yuriks> what parts of it does rustc depend on? ld and as?
[00:29:05] <tjc> yuriks: those parts, certainly
[00:29:10] *** tiffnya is now known as tiffany
[00:29:18] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[00:30:22] <dbaupp> I thought LLVM had it's own as?
[00:30:39] <strcat> LLVM has an assembler, yes
[00:30:51] <strcat> and a perfectly good linker for static linking
[00:30:53] <dbaupp> There's also some actual C/C++ in the code-base (src/rt)
[00:31:04] <rossm> I'm a windows programmer. what kind of work is required to improve the windows experience in rust?
[00:31:34] <bodie> Rust uses pthread right?
[00:31:36] <tjc> rossm: brson has more of a sense than I do, I think
[00:31:40] <rossm> granted I am a C# developer, but I'm willing to help if it's just a time commitment that's needed rather than expertise
[00:32:05] <dbaupp> rossm: also, klutzy has been doing a lot of work on windows, so they might know more.
[00:32:25] <strcat> switching to mingw-w64 would fix a lot of broken stuff on 32-bit and allow for 64-bit support
[00:32:28] <tiffany> rossm: it's been expressed that command prompt is terrible and that there should be graphical repls for programming languages to make getting into them easier
[00:32:32] <bodie> um, on that note, does anyone happen to know if there's a native windows implementation of C11/C++11?
[00:32:45] <tjc> tiffany is right, but a GUI would be a much more ambitious project
[00:32:57] <tjc> there are more nuts-and-bolts problems on windows even for people who are ok with the command line
[00:33:04] <bodie> since MSVC expressly said they'll never support the cross-platform threading features of C*11
[00:33:08] <yuriks> imo just eliminating the need for the mingw toolchain would be awesome
[00:33:17] <tjc> right
[00:33:19] <yuriks> specially since you need specific versions of gcc, etc.
[00:33:20] <bodie> right that's what I'm getting at, I think pthread is one of the key requirements
[00:33:20] <strcat> bodie: MSVC++ doesn't support C99/C11
[00:33:30] <SiegeLord> I don't see how mingw is a bad toolchain :P
[00:33:33] <tiffany> I hear it supports part of C99 in vs 2013
[00:33:37] <bodie> correct, it supports a subset but specifically excludes the new non-pthread threading features
[00:33:45] <bodie> which is super frustrating 
[00:33:47] <tiffany> I don't think even gcc/clang do C11 properly right now
[00:33:55] <strcat> mingw-w64 is a far better toolchain than MSVC++ for us imo... it has way better C++11 support
[00:33:57] <tiffany> last time I tried to use C11 I found out the hard way that there's no thread.h
[00:34:00] <strcat> and it has pthreads
[00:34:11] <bodie> yeah but most Windows users don't
[00:34:15] <bodie> doesn't that cause problems?
[00:34:17] <SiegeLord> It'd be nice enough if rust just worked with mingw without copying dll's around (if that's still a thing)
[00:34:27] <bodie> since pthreads are supposed to be a kernel threading implementation
[00:34:28] <yuriks> SiegeLord: mingw-w64 is much better. It still does the akward 'thin unix simulation layer' thing though
[00:34:32] <bodie> which isn't in the windows monolith
[00:34:35] <strcat> LLVM has compiler-rt
[00:34:41] <strcat> we should be using it, we don't need libgcc
[00:34:50] <strcat> LLVM has a C++ stdlib, we don't need libstdc++
[00:34:52] *** Quits: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu) (Quit: maxiepoo)
[00:34:54] <strcat> LLVM has an assembly, and a linker
[00:35:14] * strcat shrugs
[00:35:16] <SiegeLord> Also... on a related point... is there a reason why llvm isn't snapshotted?
[00:35:45] <strcat> what do you mean isn't snapshotted?
[00:35:47] <strcat> it is
[00:35:59] <SiegeLord> Like in terms of not having to compile it
[00:36:06] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[00:36:35] <strcat> SiegeLord: because we wouldn't be able to upgrade LLVM?
[00:37:01] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[00:37:03] <strcat> it comes in the snapshot for the stage0 compiler
[00:37:21] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[00:37:39] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[00:37:45] <strcat> there could be a flag to reuse it if the version matches but it needs to be something you could disable
[00:37:46] *** Parts: jeffdb (jeffbelg@moz-ABCAA64B.efi.com) ()
[00:37:53] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[00:38:01] <SiegeLord> I'm not sure what you mean by not being to upgrade it... wouldn't you just create a new snapshot whenever you want a newer llvm?
[00:38:19] *** Quits: Kruppe (user@moz-9A6FCE9E.cable.teksavvy.com) (Ping timeout)
[00:38:29] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Quit: Leaving...)
[00:38:51] <brson> we could reuse the llvm snapshot in some scenarios, but at this point i want to move to full nightly binary installers
[00:38:58] <brson> which would be more useful to more people
[00:39:02] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[00:39:07] <SiegeLord> Yeah, that's true
[00:39:13] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[00:39:28] *** Joins: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu)
[00:39:38] <strcat> switching to compiler-rt + mingw-w64 should be a priority imo
[00:39:52] <strcat> it's not something an outside contributor can do
[00:41:09] <SiegeLord> I should try mingw-64...
[00:42:05] <yuriks> one thing that bothered me with mingw-w64 is that it can actually build for both 32-bit and 64-bit on the same install, but it doesn't have separate library paths as far as I could tell
[00:42:31] <yuriks> forced me to build my own directory structures and specify paths manually
[00:42:42] <yuriks> I ended up giving up and just sticking to 32-bit builds
[00:43:15] <strcat> we don't actually need libgcc_s/gcc
[00:43:22] <strcat> we just need their runtime
[00:43:29] <strcat> we could drop the dep on gcc
[00:43:38] <strcat> (and their linker, if we didn't switch to lld)
[00:44:04] <yuriks> if we *did*, you mean?
[00:45:00] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[00:46:37] <dbaupp> strcat: does lld do dynamic linking yet?
[00:46:54] <strcat> dbaupp: we don't need dynamic linking imo, we don't offer a stable ABI
[00:47:12] <strcat> and yes, it does, but it doesn't work well
[00:47:13] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[00:47:22] <dbaupp> strcat: yup, I was just wondering if we could just drop it in now, rather than having to get static linking working too
[00:47:35] *** Quits: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu) (Quit: maxiepoo)
[00:47:35] <dbaupp> (although I believe aatch got static linking working?)
[00:48:12] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Ping timeout)
[00:48:15] *** Joins: nif (Mibbit@moz-B6DFA19D.wireless.oberlin.edu)
[00:49:56] *** Quits: gareth0 (gareth0@7B67FAFD.7B34A6AE.2653C6EC.IP) (Connection timed out)
[00:50:47] *** Joins: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP)
[00:51:35] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[00:53:29] <mcarberry> Having some problems with my pull request. Seems that bors failed on a make clean for windows platform. Not exactly sure how to go about testing/fixing this I'm guessing the other builds were killed because the windows one failed. 
[00:55:16] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[00:55:30] <dbaupp> mcarberry: which PR?
[00:55:46] <mcarberry> https://github.com/mozilla/rust/pull/10243
[00:55:56] <mcarberry> dbaupp, Sorry, should have pasted that before.
[00:56:47] <dbaupp> mcarberry: I've retried it, because that looks like it's a transient issue unrelated to your PR (we'll see though)
[00:57:04] <dbaupp> (and yes, the "exception"s are those builds being killed due to the failure.)
[00:57:55] *** Joins: geoffhill (geoffhill@moz-738DC0DB.org)
[00:57:57] <mcarberry> dbaupp, Thanks. I wasn't exactly surr.
[00:58:00] <mcarberry> *sure.
[00:58:43] <tautologico> so, how do I rebase my branch? git fetch upstream; git rebase upstream/master ?
[01:00:13] <tjc> tautologico: almost -- see https://github.com/mozilla/rust/wiki/Note-git-workflow
[01:00:19] <strcat> or git pull --rebase upstream/master
[01:00:50] * strcat just wishes pull defaulted to --ff-only, so he'd rarely need fetch
[01:00:50] <dbaupp> mcarberry: np :)
[01:00:54] <strcat> I guess I should just alias it ;p
[01:01:00] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[01:01:41] <bodie> git is so kludgy sometimes
[01:06:41] *** Quits: blank_name (blank_name@FAB53C88.7071B2C8.31EC03F3.IP) (Ping timeout)
[01:07:08] *** Joins: blank_name (blank_name@FAB53C88.7071B2C8.31EC03F3.IP)
[01:09:02] <aatch> dbaupp, kinda. I got something resembling static linking working.
[01:09:41] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[01:10:01] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[01:11:06] *** Quits: sk (sk@61A494B3.BA40E8A.AAC02D62.IP) (Quit: Leaving)
[01:11:48] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[01:12:38] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[01:17:21] *** Quits: moostik (Icedove@moz-3E868786.w90-2.abo.wanadoo.fr) (Ping timeout)
[01:17:27] *** Joins: dew1 (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[01:18:31] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[01:19:20] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[01:20:21] *** Joins: sammykim (sammy.kim@5AB4884B.FCC4549.14D5B978.IP)
[01:20:56] *** Joins: moostik (Icedove@moz-3131F39.w81-249.abo.wanadoo.fr)
[01:21:59] *** Joins: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu)
[01:26:07] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[01:29:33] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[01:35:27] <acrichto> strcat: #10321 should now fix rusti (once landed)
[01:36:47] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[01:38:04] *** Joins: Jesin (Jessin_@moz-3A59C218.cc.lehigh.edu)
[01:38:13] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Connection reset by peer)
[01:38:28] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[01:39:14] *** Joins: q66_ (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[01:40:02] *** Quits: simlay (simlay@moz-1C72F8DD.hsd1.ca.comcast.net) (Ping timeout)
[01:40:09] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[01:40:14] *** Quits: q66__ (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Ping timeout)
[01:41:12] *** Joins: jeffdb (jeff@moz-ED35AD97.hsd1.ca.comcast.net)
[01:44:20] *** Quits: ozten (ozten@moz-BC0C74E2.range86-174.btcentralplus.com) (Quit: ozten)
[01:45:07] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[01:46:31] *** Joins: ozten (ozten@moz-BC0C74E2.range86-174.btcentralplus.com)
[01:47:49] <dbaupp> aatch: "resembling"?
[01:48:03] *** Joins: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net)
[01:48:10] *** Quits: jeffdb (jeff@moz-ED35AD97.hsd1.ca.comcast.net) (Quit: jeffdb)
[01:48:43] *** Joins: pradeep (pradeep@5AB4884B.FCC4549.14D5B978.IP)
[01:49:26] <aatch> dbaupp, as in, it *is* static linking. But that's about it. It doesn't have much in the way of intelligence, but I'm waiting for some decision on the linking model before continuing.
[01:52:09] <yuriks> I'm trying to get lld to produce a running executable on windows
[01:52:19] <yuriks> doesn't seem to be working, linking against the VS 2013 CRT
[01:52:25] <ChrisMorgan> nmatsakis: did you come up with anything on the augmented-assignment matter?
[01:52:33] <yuriks> was fun to try though :)
[01:55:26] <strcat> yuriks: afaik it does work because it's being tested on the LLVM buildbot
[01:56:29] <dbaupp> acrichto: ah... worth a ML post?
[01:56:44] *** Parts: nif (Mibbit@moz-B6DFA19D.wireless.oberlin.edu) ()
[01:56:47] <yuriks> strcat: if I don't pass /subsystem:console it produces an unrunnable executable. If I pass /subystem:console the CRT needs the kernel32.lib imports, however passing that to the linker makes it crash
[01:57:08] <yuriks> maybe there's some more complex incantation I'm not aware of
[01:57:40] <klutzy> yuriks: on mingw you can pass similar one https://github.com/klutzy/win32-rust/commit/53d49595f0fb442653787a70c86badc2fa61c332
[01:58:14] *** Quits: tautologico (lymph@703660AA.CFE755C8.C27E1635.IP) (Quit: tautologico)
[01:58:27] <yuriks> I just tried that, it still needs kernel32.lib and still crashes
[01:58:59] <acrichto> dbaupp: a ML post?
[01:59:38] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[02:00:00] *** Joins: tautologico (lymph@703660AA.CFE755C8.C27E1635.IP)
[02:00:23] <dbaupp> acrichto: whooops.. that was directed at aatch
[02:00:43] <dbaupp> let's retry... aatch: ah... worth a ML post?
[02:00:47] <klutzy> yuriks: ah wait. you are using lld not gcc?
[02:00:58] * klutzy doesn't know about it so much
[02:01:22] <yuriks> klutzy: yeah
[02:01:29] <klutzy> maybe you can hex-edit .exe file after compiling :p
[02:01:50] <klutzy> there is console/windows flag
[02:01:53] <yuriks> clang works with the msvc crt, but you still need to use MS's link.exe
[02:02:23] <yuriks> klutzy: I suspect it just drops all the code if you don't specify a subsystem, which is the only way I got it to produce an output :)
[02:02:26] <aatch> dbaupp, hmm, probably.
[02:03:45] *** Parts: Earnestly (earnest@38FE72A5.82423D8F.BFD1ABFD.IP) (WeeChat 0.4.3-dev)
[02:05:39] <strcat> if we don't want to write a math library ourselves, we're stuck with mingw/mingw-w64 because C99 features are exposed
[02:06:04] <yuriks> what does clang use?
[02:06:06] <strcat> mingw happens to have broken implementations for most of them... but mingw-w64 works
[02:06:28] <strcat> yuriks: don't know, what happens if you call c99 math functions?
[02:06:50] <yuriks> good question
[02:06:51] <strcat> LLVM doesn't have a libc/libm implementation, compiler-rt just covers a subset of the stuff LLVM itself outputs
[02:06:55] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[02:07:01] <yuriks> does libc++ have that?
[02:07:05] <strcat> no
[02:07:15] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[02:07:44] *** Quits: ozten (ozten@moz-BC0C74E2.range86-174.btcentralplus.com) (Quit: ozten)
[02:07:58] <klutzy> msvcrt.dll lacks c99 functions, so mingw and mingw-w64 (try to) provide them
[02:08:20] <klutzy> I've heard msvcr100.dll contains some of them
[02:09:02] <strcat> C99 added most of the C float support
[02:09:02] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[02:09:48] <strcat> it adds a 'float' and 'long double' version of all the math functions (previously only available for double), and we use the float ones for f32
[02:09:57] *** Joins: kellogh (timkellogg@moz-704A74D.hsd1.co.comcast.net)
[02:10:00] <strcat> and we'll want stuff like the floating point environment exposed
[02:10:32] <strcat> and a lot of the math functions we have are C99 only
[02:10:52] <yuriks> "Atoms with Same Ordinal!" "UNREACHABLE executed at ..\tools\lld\lib\Passes\LayoutPass.cpp:133!"
[02:10:58] <yuriks> hmm, yeah, crash!
[02:11:09] <strcat> http://en.cppreference.com/w/c/numeric/math (the ones available in C89 like exp are missing the expf/expl versions)
[02:11:17] <tautologico> tests with xfail-fast won't work?
[02:12:05] <strcat> tautologico: tests marked xfail-fast don't run with 'make check-fast'
[02:12:16] <strcat> the windows and freebsd bots only run check-fast
[02:12:16] <tautologico> ah
[02:12:29] <yuriks> it would probably do a lot of good to write a MIT libm then
[02:12:35] <strcat> freebsd, because it's a slow EC2 bot, and windows, because rustc is too slow there atm
[02:12:59] <strcat> yuriks: http://www.musl-libc.org/ not portable, but you could make it so ;p
[02:13:08] <tautologico> I think I should add a test to my patch
[02:13:28] <strcat> it has a full c99 math lib
[02:13:37] <strcat> and is MIT :)
[02:13:43] <yuriks> what about BSD's libc?
[02:14:15] <strcat> musl is likely a lot nicer because it was a fresh implementation of C99/C11 without any legacy
[02:14:34] <yuriks> I'm looking at the colorful tables. It looks promising indeed
[02:16:13] <yuriks> strcat: I happen to be looking for stuff to do as my undergrad thesis, so I'll keep it in mind
[02:17:02] *** Quits: [o__o] (~o__o@moz-24EBFAC7.me) (Input/output error)
[02:17:14] *** Joins: [o__o] (~o__o@moz-24EBFAC7.me)
[02:17:24] *** Quits: heftig (heftig@moz-B2FDBD25.dip0.t-ipconnect.de) (Ping timeout)
[02:22:18] *** Joins: alisdair (textual@C40A4520.370CB94C.DBEE2280.IP)
[02:23:50] *** Quits: boredomist (ruqs@8186917.CC8FA3EE.E3401B6E.IP) (Ping timeout)
[02:26:45] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[02:28:00] <[mm]> sigh, that feeling when you surrender: Wrap the whole function in unsafe { } and use raw pointers
[02:28:27] *** Quits: alisdair (textual@C40A4520.370CB94C.DBEE2280.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[02:29:18] *** Quits: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net) (Quit: Leaving.)
[02:29:56] *** Joins: heftig (heftig@moz-76BC6A3B.dip0.t-ipconnect.de)
[02:31:16] *** Joins: z0w0 (zack@moz-238C2341.lnse3.cha.bigpond.net.au)
[02:33:57] <ChrisMorgan> [mm]: :-(
[02:35:09] *** Quits: carllerche (carllerche@moz-2B516F15.hsd1.or.comcast.net) (Quit: carllerche)
[02:36:10] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[02:36:57] *** Quits: kellogh (timkellogg@moz-704A74D.hsd1.co.comcast.net) (Quit: kellogh)
[02:39:13] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[02:40:58] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[02:41:58] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[02:42:33] *** Joins: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com)
[02:42:40] *** Joins: ktt3ja (Mibbit@moz-6B6EE8C0.hsd1.va.comcast.net)
[02:43:02] *** Quits: vodik_ (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[02:45:10] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[02:45:10] *** Quits: anri (solancile@moz-E49E7C4B.hsd1.wa.comcast.net) (Quit: anri)
[02:45:31] *** Quits: ktt3ja (Mibbit@moz-6B6EE8C0.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[02:45:46] *** Joins: yuriks_ (yuriks@CE6EF1E.88B480FC.748B6D8D.IP)
[02:45:47] *** Quits: yuriks (yuriks@CE6EF1E.88B480FC.748B6D8D.IP) (Connection reset by peer)
[02:47:53] *** Quits: nkoep (nik@moz-CC1EFD15.pool.mediaways.net) (Client exited)
[02:54:34] *** Joins: anri (solancile@moz-E49E7C4B.hsd1.wa.comcast.net)
[02:55:07] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[02:56:45] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[03:00:40] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Ping timeout)
[03:01:38] *** Joins: ktt3ja (Mibbit@moz-6B6EE8C0.hsd1.va.comcast.net)
[03:01:41] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[03:03:27] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[03:03:27] *** ChanServ sets mode: +ao dherman dherman
[03:03:59] <ktt3ja> in libsyntax/ast.rs, what do Local, Ty, and Pat represent?
[03:04:09] *** Joins: tudor (tudor@moz-233C4930.hsd1.ca.comcast.net)
[03:06:06] *** Quits: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu) (Quit: maxiepoo)
[03:06:23] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[03:07:11] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[03:07:21] <dbaupp> ktt3ja: Local == `let`, Ty == any type, Pat == pattern (i.e. in match)
[03:07:35] <dbaupp> (I'm not 100% sure about Local...)
[03:07:57] <dbaupp> ktt3ja: yup, just checked, Local is let.
[03:08:22] <strcat> Local is an irrefutable pattern, right? function parameters too
[03:08:28] <strcat> maybe not ;p
[03:08:51] *** Joins: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu)
[03:09:15] *** Joins: josh (josh@moz-E6247462.meeting.ietf.org)
[03:10:56] <dbaupp> strcat: no, it's the struct that stores everything about a `let <pat> = <expr>;` irrefutability is checked in the compiler, not the parser.
[03:11:21] <dbaupp> strcat: (well, yes you are correct, but it's not directly relevant to the AST.)
[03:11:28] *** Joins: kellogh (timkellogg@moz-704A74D.hsd1.co.comcast.net)
[03:11:34] <SiegeLord> Was 'let' used to be called 'local'?
[03:11:39] *** Joins: tikue (tikue_star@moz-FEADCD38.hsd1.pa.comcast.net)
[03:11:41] <strcat> dbaupp: I know the refutable part is checked in the compiler
[03:11:55] <strcat> just using it to distinguish match arms vs. let/parameters
[03:11:57] <cmr> SiegeLord: it introduces a local.
[03:12:36] <SiegeLord> Well, there's also things called 'records' in rustc... I bet they weren't called that because structs are a type of record ;)
[03:13:06] <ktt3ja> thank you, dbaupp
[03:13:19] *** Quits: z0w0 (zack@moz-238C2341.lnse3.cha.bigpond.net.au) (Ping timeout)
[03:13:44] *** Quits: tikue (tikue_star@moz-FEADCD38.hsd1.pa.comcast.net) (Ping timeout)
[03:14:36] *** Joins: z0w0 (zack@moz-FE2A0BDD.lnse2.woo.bigpond.net.au)
[03:14:43] <cmr> SiegeLord: it had `let` at the same time as it had `local`
[03:14:53] <cmr> It was a type of mode, apparently.
[03:14:57] *** Quits: lfox (lfox@moz-B8648F0F.nycmny.fios.verizon.net) (Quit: ZZZzzz…)
[03:16:00] *** Joins: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net)
[03:16:37] *** Quits: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net) (Client exited)
[03:16:52] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[03:18:25] *** Joins: skeet70 (skeet70@moz-697F48F2.bzm-mt.client.bresnan.net)
[03:18:33] *** Quits: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net) (Quit: tiffany)
[03:19:42] *** Quits: kellogh (timkellogg@moz-704A74D.hsd1.co.comcast.net) (Quit: kellogh)
[03:21:35] *** sam113101 is now known as sam113101_afk
[03:22:53] *** Joins: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net)
[03:24:15] *** Quits: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[03:25:36] *** Quits: japaric (japaric@FEDDDB01.42146A62.CBF5D49D.IP) (Quit: WeeChat 0.4.2)
[03:25:37] *** Joins: japaric (japaric@FEDDDB01.42146A62.CBF5D49D.IP)
[03:33:00] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[03:33:21] *** Quits: ktt3ja (Mibbit@moz-6B6EE8C0.hsd1.va.comcast.net) (Ping timeout)
[03:34:43] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[03:36:16] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[03:36:17] *** Quits: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net) (Input/output error)
[03:37:54] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[03:39:58] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[03:40:07] *** Quits: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu) (Quit: maxiepoo)
[03:41:40] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[03:43:35] *** Joins: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu)
[03:45:04] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Quit: pcwalton)
[03:45:23] *** Joins: kellogh (timkellogg@moz-704A74D.hsd1.co.comcast.net)
[03:45:24] *** Joins: axitkhurana (Adium@63F3AA56.9CFBD76D.30E7AE68.IP)
[03:47:28] *** Quits: zz_kimundi (kimundi@moz-C83B8CEE.dip0.t-ipconnect.de) (Ping timeout)
[03:47:43] *** Joins: ercxx (ercan@moz-8383857F.dyn.optonline.net)
[03:48:42] *** Quits: Houm (Houm@moz-25669AA8.fbx.proxad.net) (Ping timeout)
[03:49:30] *** Quits: tudor (tudor@moz-233C4930.hsd1.ca.comcast.net) (Quit: Leaving)
[03:49:37] *** Quits: StarLight (StarLight@moz-8EAA71F9.dynamic.avangarddsl.ru) (Ping timeout)
[03:50:46] *** Joins: zz_kimundi (kimundi@moz-E1B6D3ED.dip0.t-ipconnect.de)
[03:51:03] *** zz_kimundi is now known as kimundi
[03:54:04] *** Joins: StarLight (StarLight@moz-121895D8.dynamic.avangarddsl.ru)
[03:56:02] *** Quits: kellogh (timkellogg@moz-704A74D.hsd1.co.comcast.net) (Quit: kellogh)
[04:00:27] *** Joins: ktt3ja (Mibbit@moz-6B6EE8C0.hsd1.va.comcast.net)
[04:01:34] <ktt3ja> conceptually, what does pat_util::pat_bindings do? https://github.com/mozilla/rust/blob/master/src/librustc/middle/liveness.rs#L384
[04:02:53] <ktt3ja> the code for pat_bindings is here, but I don't understand what it does: https://github.com/mozilla/rust/blob/master/src/librustc/middle/pat_util.rs#L73
[04:03:12] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[04:04:50] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[04:05:31] *** sam113101_afk is now known as sam113101
[04:06:12] <dbaupp> ktt3ja: it calls `it` on every "binding" in a pattern, i.e. on 'a' in `match foo() { Some(a) => {} None => {} }` or in `Some(ref a)` etc.
[04:06:31] <dbaupp> (but not `None` or `Some` there.)
[04:06:47] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[04:06:49] *** Quits: dew1 (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[04:06:53] <cmr> Should add a comment to that effect :)
[04:07:13] <dbaupp> cmr: should add a lot of comments to a lot of effects throughout rustc :P
[04:07:15] <strcat> hm
[04:07:57] <dbaupp> ktt3ja: but yes, cmr makes a good point, feel free to ask questions and record findings as comments :) (that's worthy project too.)
[04:08:42] * cmr added a bunch of comments in libsyntax when he was working on rustdoc_ng
[04:09:17] <dbaupp> strcat: ?
[04:09:56] <ktt3ja> I think I should do "contribute to Rust" in case I'm unable to finish the Rust issue that I picked :p
[04:10:11] <ktt3ja> project "contribute to Rust" *
[04:10:35] *** Quits: lkuper (lkuper@moz-54129201.dhcp-bl.indiana.edu) (Quit: lkuper)
[04:11:18] <dbaupp> ktt3ja: you're doing the dead-code warning one, yeah?
[04:11:36] <ktt3ja> yea
[04:11:58] <ktt3ja> I'm feeling overwhelmed right now since I still don't know what to do even after spending the past few days reading the codes :(
[04:12:05] <cmr> ktt3ja: that's normal
[04:12:23] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[04:13:03] *** Joins: lkuper (lkuper@moz-54129201.dhcp-bl.indiana.edu)
[04:13:10] *** Joins: tudor (tudor@moz-233C4930.hsd1.ca.comcast.net)
[04:14:20] <dbaupp> ktt3ja: ask questions here and/or the mailing list. the easiest way to begin with this is, I think, replicating the logic of reachable, but just recording everything that's call at all (rather than called from #[inline]/generics like reachable does) into a HashSet, and then iterate over all the items checking if their NodeId are in that HashSet.
[04:14:23] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[04:15:04] *** Quits: lkuper (lkuper@moz-54129201.dhcp-bl.indiana.edu) (Quit: lkuper)
[04:15:06] <dbaupp> ktt3ja: ... that possibly doesn't make total sense, but "iterate over all items" == use syntax::visit::Visitor and override visit_item, and "NodeId" == a unique identifier for every piece of the AST.
[04:16:54] *** Quits: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu) (Quit: maxiepoo)
[04:17:24] <dbaupp> ktt3ja: in fact, you can probably do this "out-of-tree" to begin with, to allow faster iteration because you can run the various passes of the compiler using the syntax and rustc libraries.
[04:17:29] <ktt3ja> I should create another visitor, right?
[04:17:35] <dbaupp> yes
[04:17:53] <dbaupp> and example of an out-of-compiler ast consumer: https://github.com/huonw/spellck
[04:17:57] <ktt3ja> MegaLivenessVisitor, yeaa
[04:18:17] <dbaupp> in particular, https://github.com/huonw/spellck/blob/master/main.rs#L128-L158 loads the crate
[04:18:46] <dbaupp> (that doesn't quite do enough though, it needs to run "phase_3_...".)
[04:19:07] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[04:20:38] *** Quits: geoffhill (geoffhill@moz-738DC0DB.org) (Quit: )
[04:20:56] <ktt3ja> what did you mean by this? "replicating the logic of reachable, but just recording everything that's call at all (rather than called from #[inline]/generics like reachable does)"
[04:21:08] <strcat> rusti: let f = || ();
[04:21:09] -rusti- <anon>:9:13: 9:14 warning: unused variable: `f` [-W unused-variable (default)]
[04:21:09] -rusti- <anon>:9          let f = || ();
[04:21:09] -rusti-                       ^
[04:21:09] -rusti- ()
[04:21:33] <strcat> rusti: let f = || (); unsafe { let x: (uint, uint) = std::cast::transmute(f); } x
[04:21:34] -rusti- <anon>:9:82: 9:83 error: unresolved name `x`. Did you mean `f`?
[04:21:34] -rusti- <anon>:9          let f = || (); unsafe { let x: (uint, uint) = std::cast::transmute(f); } x
[04:21:34] -rusti-                                                                                            ^
[04:21:35] -rusti- error: aborting due to previous error
[04:21:35] -rusti- application terminated with error code 101
[04:21:38] <strcat> rusti: let f = || (); unsafe { let x: (uint, uint) = std::cast::transmute(f); x }
[04:21:39] -rusti- (4207360u, 0u)
[04:22:08] <dbaupp> ktt3ja: I believe reachable does something similar: it records everything that is accessible from outside the crate (i.e. pub), as well as things that are used in functions marked #[inline], or functions that have generics / are in impls with generics.
[04:22:26] <sfackler> it lives!
[04:22:30] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[04:22:46] <strcat> sfackler: it's 0.8
[04:23:25] *** Joins: recrack2 (Mibbit@B4104EBB.3CC170B1.1E14B209.IP)
[04:23:35] *** Joins: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu)
[04:23:53] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[04:24:12] *** Quits: recrack2 (Mibbit@B4104EBB.3CC170B1.1E14B209.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[04:24:37] *** Joins: recrack (Mibbit@B4104EBB.3CC170B1.1E14B209.IP)
[04:25:41] *** Joins: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP)
[04:26:02] <recrack> Hi, i have some question. i'm working ont this issue(https://github.com/mozilla/rust/issues/10275)
[04:26:17] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[04:27:16] <recrack> this is my source code, https://github.com/recrack/rust/compare/move_treemap_to_libstd
[04:28:29] <recrack> there is some error.
[04:28:32] <recrack> src/libstd/treemap.rs:1260:8: 1260:21 error: failed to find an implementation of trait std::container::MutableMap<uint,uint> for treemap::TreeMap<uint,uint>
[04:28:37] <recrack> src/libstd/treemap.rs:1260         insert_rand_n(100, &mut m, bh);
[04:29:08] <strcat> needs to be updated to not refer to std
[04:29:46] *** Joins: dew1 (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[04:30:00] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Client exited)
[04:35:37] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Quit: Bye)
[04:35:41] *** Quits: SiegeLord (sl@moz-1DF56822.twcny.res.rr.com) (Quit: Leaving)
[04:37:18] *** Quits: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu) (Quit: maxiepoo)
[04:37:49] *** Quits: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net) (Connection reset by peer)
[04:38:21] *** Quits: nomadic (nomadic@moz-E01D5C49.hsd1.ga.comcast.net) (Ping timeout)
[04:38:30] *** Joins: boredomist (ruqs@B16F530C.DC641F2C.BCAEBB33.IP)
[04:40:18] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[04:40:35] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Quit: Textual IRC Client: www.textualapp.com)
[04:40:43] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[04:41:54] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[04:42:30] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[04:43:13] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[04:44:56] <ChrisMorgan> Curious... `format!("{}", http::method::Get);` is making a segfault.
[04:45:57] <recrack> strcat: Thanks :) i will try it again.
[04:46:03] <Yurume> what type of Get is?
[04:46:11] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[04:46:31] <strcat> meh, it's impossible to use function ptrs in rust-core without editing the IR manually
[04:46:41] <strcat> due to the upcalls in landing pads
[04:47:02] *** Quits: bholley (anonymous@moz-A2189431.hsd1.ca.comcast.net) (Quit: bholley)
[04:47:12] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[04:47:12] *** ChanServ sets mode: +ao dherman dherman
[04:47:13] <cmr> strcat: even `extern fn`?
[04:47:25] <strcat> cmr: an extern fn can still throw
[04:47:29] <strcat> we don't mark them nounwind
[04:47:37] <cmr> ah, right, makes sense.
[04:47:44] *** Joins: mib_ddbtph (Mibbit@moz-2AE80CCC.dhcp.centurylinkservices.net)
[04:47:45] *** Quits: mib_ddbtph (Mibbit@moz-2AE80CCC.dhcp.centurylinkservices.net) (Quit: mib_ddbtph)
[04:48:44] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[04:48:50] * strcat was going to make a nice threading lib but it's not going to work
[04:50:22] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[04:50:39] <strcat> you have to edit the IR anyway to make foreign functions nounwind
[04:53:57] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[04:54:07] *** Quits: tudor (tudor@moz-233C4930.hsd1.ca.comcast.net) (Quit: Leaving)
[04:54:24] *** Quits: Jesin (Jessin_@moz-3A59C218.cc.lehigh.edu) (Quit: Leaving)
[04:55:12] *** Quits: canhtak (canhtak@moz-44AEB22E.wl.t.ulaval.ca) (Quit: canhtak)
[04:56:43] *** Quits: skeet70 (skeet70@moz-697F48F2.bzm-mt.client.bresnan.net) (Quit: Textual IRC Client: www.textualapp.com)
[04:57:49] *** Joins: nif (Mibbit@moz-B6DFA19D.wireless.oberlin.edu)
[04:59:19] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[05:02:45] *** Quits: pradeep (pradeep@5AB4884B.FCC4549.14D5B978.IP) (Quit: leaving)
[05:03:59] *** Quits: jgilbert (jgilbert@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[05:04:01] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[05:07:21] <ChrisMorgan> Yurume: Get is a member of the Method enum, which implements std::fmt::Default.
[05:07:48] <dbaupp> ChrisMorgan: it's the code segfaulting, not the compiler, right?
[05:07:55] <ChrisMorgan> Correct.
[05:08:01] <ChrisMorgan> Now taking it down to a minimal test case.
[05:08:33] <sfackler> ChrisMorgan: r? https://github.com/chris-morgan/rust-http/pull/41
[05:08:43] <sfackler> not sure if you want to cache it instead of reparsing every request
[05:09:01] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[05:09:29] <dbaupp> ChrisMorgan: possibly related to https://github.com/mozilla/rust/issues/10288 btw.
[05:09:47] <dbaupp> (just because that's also a peculiar segfault relating to strings.)
[05:10:04] <ChrisMorgan> sfackler: not caching it is probably a better idea for slightly-closer-to-realistic performance
[05:10:26] * strcat doesn't really understand why we're going to only have once fns for heap closures
[05:10:52] *** Joins: m_kato (m_kato@moz-C286AD9A.bitcat.net)
[05:11:01] <dbaupp> strcat: because only ~self works as a move in trait objects?
[05:11:18] <strcat> but what does that have to do with it?
[05:11:42] <strcat> I guess because it's moving towards traits?
[05:11:47] <dbaupp> because ~fn will desugar to a trait object, I thought?
[05:12:02] <strcat> well right now 'proc' is an alias for '~once fn'
[05:12:02] <dbaupp> (or proc, or whatever it'll be called.)
[05:12:14] <dbaupp> yeah
[05:12:53] <strcat> dbaupp: yeah I guess it makes sense
[05:13:04] <strcat> https://github.com/thestinger/rust-core/commit/74755eda98a05a4667b3b173e9b310f62cd99ee0 that works ;p
[05:13:51] <dbaupp> strcat: neat
[05:14:04] * strcat isn't sure if there should be a Future type or if Thread should just make the function return a result
[05:14:24] <strcat> hrm
[05:14:28] <dbaupp> strcat: Thread::new doesn't sound like it's necessarily spawning it immediately fwiw.
[05:14:46] <strcat> true
[05:15:03] <ChrisMorgan> dbaupp: https://gist.github.com/chris-morgan/3e13dbccd827ba3eb37c
[05:15:30] <ChrisMorgan> Top of the stack at segfault: main::__STATIC_FMTSTR::hf5e9bd29f77bbec0aM::v0.0
[05:15:32] <dbaupp> ChrisMorgan: :(
[05:16:09] <ChrisMorgan> I think it'd be connected to the compile-time stuff related to that formatting?
[05:16:20] *** Quits: cubic (cubic@moz-80241A3A.mc.videotron.ca) (Quit: Leaving)
[05:16:53] <ChrisMorgan> If you shift the match outside the f.buf.write, it works. If you use a completely separate function instead of f.buf.write, it works. But blend the two and it segfaults.
[05:17:14] *** Quits: ktt3ja (Mibbit@moz-6B6EE8C0.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[05:17:18] <strcat> hm
[05:17:29] <strcat> I guess the reason you would want threads to be separate is so you can detach them...
[05:17:38] * strcat isn't sure
[05:17:57] <dbaupp> ChrisMorgan: weird... :/
[05:18:12] <tautologico> is there an easy way to print the metadata for a compiled lib crate?
[05:18:30] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[05:18:38] *** Joins: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net)
[05:19:09] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: Textual IRC Client: www.textualapp.com)
[05:20:50] <ChrisMorgan> dbaupp: note also that the `match EnumVariant` part can be `s` (and normally would be, I just changed it see if it'd still crash, it does).
[05:21:45] *** Joins: pnathan (Adium@moz-E72012D3.tukw.qwest.net)
[05:22:06] <dbaupp> ChrisMorgan: changing the format!() to `format_args!(|x| println!("{:?}", x), "{}", EnumVariant);` crashes with "enum matched no variant"
[05:22:32] * ChrisMorgan isn't familiar with format_args!, has only heard it mentioned once or so
[05:23:01] <dbaupp> it just allows "manipulating" the internal std::fmt structures directly
[05:25:25] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[05:25:32] <ChrisMorgan> So... what *is* going on?
[05:26:31] <dbaupp> not sure, I'm attempting to apply some transmutes to look inside
[05:27:24] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[05:28:11] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[05:30:17] <dbaupp> oh, the "enum matched no variant" is expected... because it's got &util::Void... should probably be *util::Void.
[05:30:44] *** Joins: jonesnc (Mibbit@moz-A825E7E7.slkc.qwest.net)
[05:31:16] <aatch> Man, ccache is awesome
[05:31:46] *** Quits: josh (josh@moz-E6247462.meeting.ietf.org) (Quit: josh)
[05:32:15] <jonesnc> if the rust compiler is written in rust, why when i compile it are most of the source files I see begin compiled ending in .cpp and some in .c? shouldn't it be compiling .rs files?
[05:32:30] <ChrisMorgan> jonesnc: it depends on LLVM and must build it first.
[05:32:53] <ChrisMorgan> That happens only occasionally, when there are changes in our copy of LLVM.
[05:33:02] <aatch> jonesnc, if you want to get technical, the Rust compiler *frontend* is written in rust.
[05:33:57] <ChrisMorgan> When it gets to compiling Rust stuff, you'll typically get only a small number of "compile_and_link: ..." lines, because it compiles each crate in one shot with no output if there are no warnings or errors.
[05:34:36] <dbaupp> ChrisMorgan: this is really strange... gdb seems to imply the call stack is getting corrupted :/
[05:35:09] <jonesnc> ChrisMorgan, i just got to the compile_and_link phase a few minutes ago. 
[05:35:09] <ChrisMorgan> That would be consistent with an observation I made at one point when tweaking the minimal test case where the segfault changed to an "illegal instruction".
[05:35:16] <cmr> dbaupp: enum discriminant brokenness?
[05:35:25] <acrichto> dbaupp: ChrisMorgan: hm in that test case if I compile with optimizations it passes, without though it fails
[05:36:20] <ChrisMorgan> acrichto: I found this bug in a rust-http example (altering it to also print out the request method), and that gets compiled with -O.
[05:36:41] <dbaupp> cmr: don't think so, the testcase ChrisMorgan gave is a zero-sized enum
[05:37:14] <dbaupp> and it even segfaults with `#[repr(u64)] pub enum Enum { EnumVariant, EnumVariant2 }` (and without the repr too)
[05:37:19] <ChrisMorgan> dbaupp: though in http::method::Method, it's {Get, Post, ..., ExtensionMethod(~str)}.
[05:37:24] <cmr> hm
[05:37:29] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Client exited)
[05:37:50] <ChrisMorgan> Sounds like I've found an interesting bug.
[05:38:26] <dbaupp> from what I can tell, it looks like the format string structure is entirely valid, so it's seems to be something deeper... :/
[05:39:09] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[05:39:18] *** Quits: ercxx (ercan@moz-8383857F.dyn.optonline.net) (Quit: WeeChat 0.4.2)
[05:40:48] <dbaupp> acrichto: #10288 seems similar, and segfaults for me even with -O
[05:41:05] <aatch> Yay, codegen bugs -.-
[05:41:19] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Connection reset by peer)
[05:41:35] <acrichto> dbaupp: hm interesting...
[05:41:46] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[05:42:22] *** Parts: doomlord_ (servitor@moz-4625DF14.range86-184.btcentralplus.com) (Leaving)
[05:42:57] *** Joins: Jesin (Jessin_@moz-25306B28.cc.lehigh.edu)
[05:43:29] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[05:44:37] <ChrisMorgan> Ah! My `info` example server is also crashing, as it also formats a Method. It was working somewhere around a week ago, as I recall it.
[05:44:40] <dbaupp> acrichto: hm, actually, not that similar, deleting the format!() still segfaults (although changing the `let c = (a+ b).to_str()` line at all stops it segfaulting.)
[05:45:04] <dbaupp> (although it's still concerning...)
[05:45:34] <cmr> I can bisect.
[05:45:38] <strcat> ugh, why isn't pthread_tryjoin standard ;[
[05:45:39] <cmr> If you give me a minimal testcase
[05:46:05] <acrichto> cmr: https://gist.github.com/chris-morgan/3e13dbccd827ba3eb37c
[05:46:14] <ChrisMorgan> Yeah, that'll do.
[05:46:21] *** Quits: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) (Connection reset by peer)
[05:46:27] <dbaupp> cmr: also, https://github.com/mozilla/rust/issues/10288 (although they're possible not connected)
[05:46:29] <cmr> ChrisMorgan: what sha are you seeing the segfault on?
[05:46:36] <strcat> tryjoin would be such a simple way to build a nice async API... *cries*
[05:46:53] <ChrisMorgan> 03f3051
[05:47:02] <strcat> the C++11 implementation in libstdc++ obviously uses it ;p
[05:47:11] <strcat> condition variables everywhere I guess
[05:48:59] *** Quits: aatch (James@moz-B437F499.pocketrent.com) (Client exited)
[05:49:54] <cmr> That example segfaults as far back as a month ago
[05:50:20] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[05:50:22] <cmr> 1.5 months...
[05:50:22] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Client exited)
[05:50:47] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[05:52:04] <cmr> illegal instruction 3 months ago
[05:52:19] <cmr> But holy shit it's still compiling 3 months ago :P
[05:52:42] <cmr> wait no
[05:52:54] <cmr> sorry, 2 months. the commit was 3 months old, but not the merge :\
[05:53:04] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[05:53:20] *** Quits: sammykim (sammy.kim@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[05:54:29] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[05:54:40] <cmr> acrichto: So this segfaults for as long as format! has existed.
[05:54:59] <cmr> since a17c7e4
[05:55:15] <ChrisMorgan> Interesting... so how is it that my info example server *has* worked recently?
[05:55:21] <cmr> ChrisMorgan: good question!
[05:55:55] <dbaupp> cmr: what about #10288?
[05:56:06] <cmr> dbaupp: was doing that now
[05:56:40] <dbaupp> cmr: <3 having a million rustcs
[05:57:44] <cmr> dbaupp: same
[05:57:54] <cmr> not good :S
[05:58:11] <dbaupp> cmr: and if you remove the format!()? (since it segfaults without that for me)
[05:58:27] <cmr> dbaupp: going further back now
[05:59:04] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[05:59:15] <cmr> dbaupp: it segfaults as far back as the great renaming
[05:59:42] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[05:59:55] *** Quits: japaric (japaric@FEDDDB01.42146A62.CBF5D49D.IP) (Ping timeout)
[06:00:22] <cmr> Back when rustc didn't know how to handle non-xterm terminals
[06:00:26] <cmr> Oh the good ole days
[06:00:51] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[06:01:09] <cmr> So this bug, whatever it is, has probably always existed.
[06:01:54] *** Joins: tudor (tudor@moz-233C4930.hsd1.ca.comcast.net)
[06:02:08] *** Joins: jviereck (Adium@moz-CF8216D6.dip0.t-ipconnect.de)
[06:02:46] <sfackler> is this something that should theoretically coerce? If I have an impl Foo for &str, let a: ~str; let b = &a as &Foo
[06:03:09] <cmr> sfackler: hm, seems like it should
[06:03:11] <dbaupp> sfackler: theoretically maybe, but not with the current compiler
[06:05:12] <benh> wouldn't &a be &~str? does it coerce behind another &?
[06:06:24] <dbaupp> benh: theortically it could check to see that there's not Foo for ~str, and then check &str, and so coerce `a` to &str. (as it would do with a method call on ~str in that instance)
[06:06:37] *** Quits: jviereck (Adium@moz-CF8216D6.dip0.t-ipconnect.de) (Quit: Leaving.)
[06:06:48] *** Quits: sigma (sigma@moz-654650A0.range86-160.btcentralplus.com) (Ping timeout)
[06:06:57] *** Joins: jviereck (Adium@moz-CF8216D6.dip0.t-ipconnect.de)
[06:07:08] <benh> indirection is hard, let's add more of it :(
[06:07:51] *** Quits: jviereck (Adium@moz-CF8216D6.dip0.t-ipconnect.de) (Quit: Leaving.)
[06:08:00] *** Quits: Jesin (Jessin_@moz-25306B28.cc.lehigh.edu) (Quit: Leaving)
[06:10:01] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[06:10:27] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[06:11:14] <jason_> strcat: what part of libstdc++ do you think uses pthread_tryjoin?
[06:12:05] <dbaupp> sfackler: note that ~str/&str aren't normal ~(T)/&(T)'s
[06:12:30] <dbaupp> sfackler: also, there's .as_slice() for a manual ~str -> &str
[06:12:31] <strcat> jason_: well I expected it would use it for calls like wait_until
[06:12:34] <strcat> but maybe I'm wrong :)
[06:12:45] <jason_> i'm pretty sure it isn't used because iirc, they never make any direct calls to pthread_ functions. they only use the __gthread_ symbols
[06:12:49] <strcat> otherwise... I guess each future object has a condition variable?
[06:12:55] <jason_> yeah
[06:12:57] <strcat> jason_: oh I just mean in general, how it does it
[06:14:40] <jason_> strcat: yeah, i get what you mean, but there is no __gthread_tryjoin though, its implemented only in pthreads
[06:14:50] <strcat> ah
[06:14:57] * strcat won't worry about it then
[06:15:15] <jason_> i wanted tryjoin in std::thread too, so i went hunting
[06:15:22] <jason_> actually i really wanted timedjoin
[06:16:50] <strcat> just thinking about it in terms of rust-core
[06:17:09] <strcat> probably going to want separate abstractions for detached threads and ones that will be joined
[06:17:20] * strcat really doesn't "get" the C++ stdlib thread stack
[06:18:44] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[06:18:44] *** ChanServ sets mode: +ao dherman dherman
[06:18:44] <jason_> i think rust could get away with exposing something very minimal and marking it experimental. ideally you shouldn't need to think about threads with rust.
[06:19:20] <dbaupp> jason_: with the main stdlib, you mean?
[06:19:27] <jason_> yeah
[06:21:28] <strcat> the only real difference from the stdlib will be that it uses 1:1 threading
[06:21:38] <jonesnc> I'm trying to compile the hello world function, but I get this: "error: linking with 'cc' failed with code `". I have successfully compiled rust, and I have llvm 2.9 installed, and I'm on an ubuntu-like distro of linux called elementaryos. Any ideas?
[06:21:44] <strcat> I think...
[06:21:58] <strcat> fn spawn(start_routine: proc()) { ... }
[06:22:01] <strcat> for a detached thread
[06:22:03] <strcat> and
[06:22:23] <strcat> fn future(start_routine: proc()) -> Future<T> { ... } for one you can join, is fine
[06:22:25] <strcat> er
[06:22:36] <strcat> fn future(start_routine: proc() -> T) -> Future<T> { ... }
[06:22:45] *** Joins: sigma (sigma@moz-654650A0.range86-160.btcentralplus.com)
[06:22:54] <jason_> strcat: that seems reasonable
[06:24:29] <strcat> std::thread/std::packaged_task/std::future/std::async in C++11 just seems very weird to me
[06:24:34] <ChrisMorgan> jonesnc: is `cc` installed and on your PATH?
[06:25:01] <jonesnc> ah, figured it out.
[06:25:04] <jason_> getting some kind of id for the thread is useful for logging too. like gettid on linux and GetCurrentThreadId on windows
[06:25:24] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[06:25:26] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[06:25:37] <jonesnc> i was trying to compile test.rs, but I had a folder named test in the directory as well. removing that folder (something I created earlier and no longer needed) fixed the problem.
[06:25:39] <jason_> std::async is terrible. it almost never does what you'd expect or want
[06:25:42] * strcat will be evil and add a pthread_exit(null) call to the end of main with --cfg libc
[06:26:02] <strcat> the default behaviour is dumb
[06:27:29] <jonesnc> as far as compiler version do you folks usually stick with numbered releases or stay current with master?
[06:27:39] <strcat> master
[06:29:15] <jason_> strcat: i'd almost say you don't even want to expose detatched threads. very few reasons to use them
[06:30:21] <jason_> in my experience, more often than not their use is hiding some larger problem
[06:30:53] <strcat> it's definitely nice to know that falling off main is where your program ends
[06:31:35] <strcat> jason_: yeah, I guess you always want to keep around a handle for the thread anyway
[06:31:39] <strcat> so it might as well be the thread...
[06:32:03] <jason_> but what are your threads doing that you can just exit them at any time and not care what they've done or not done?
[06:32:09] *** Joins: victorporof (victorporo@9B024C76.73B1E539.9B1E38F4.IP)
[06:32:37] <jason_> said another way, if you have threads doing something you don't care about, why are they doing it?
[06:33:32] <strcat> the stdlib essentially uses detached threads
[06:33:32] *** Parts: jonesnc (Mibbit@moz-A825E7E7.slkc.qwest.net) ()
[06:33:35] <strcat> you don't get a handle from spawn
[06:33:47] *** Joins: mojibake (Mibbit@moz-A825E7E7.slkc.qwest.net)
[06:34:04] <jason_> the scheduler threads you mean?
[06:34:05] <strcat> can't get a result from it without a communication primitive
[06:34:09] <strcat> jason_: yes, std::task
[06:34:26] *** Joins: victorporof_ (victorporo@9B024C76.73B1E539.9B1E38F4.IP)
[06:34:33] <strcat> if there are only joined threads, I'll just have Future
[06:34:45] <strcat> maybe I'll just start with that anyway
[06:35:45] *** Quits: victorporof (victorporo@9B024C76.73B1E539.9B1E38F4.IP) (Ping timeout)
[06:36:42] *** Joins: pcwalton (pcwalton@moz-B51927E9.hsd1.ca.comcast.net)
[06:36:42] *** ChanServ sets mode: +ao pcwalton pcwalton
[06:37:56] <jason_> strcat: maybe there should be an option of either exiting when main ends, or waiting for all tasks to exit before exiting the process.
[06:39:30] <jason_> given that option, the "wait for all tasks to finish" version will need a way to trigger shutdown which would cause all tasks to unwind (for example you might want to do that from SIGINT)
[06:40:14] <strcat> jason_: you can't really safely interrupt threads though
[06:40:16] *** Quits: pnathan (Adium@moz-E72012D3.tukw.qwest.net) (Quit: Leaving.)
[06:40:24] <jason_> strcat: but you can tasks
[06:40:31] <strcat> not at any point
[06:40:40] *** Quits: mojibake (Mibbit@moz-A825E7E7.slkc.qwest.net) (Quit: http://www.mibbit.com ajax IRC Client)
[06:40:54] <strcat> I think it would happen at yield points
[06:41:01] <strcat> they don't do pre-emptive scheduling
[06:41:12] <jason_> right, so you have cancellation points where it is safe. like when waiting on io, or a channel
[06:41:35] <strcat> and what if the task doesn't do I/O? ;p
[06:41:55] <jason_> then your program has a bug and it hangs at exit
[06:42:01] <strcat> at least not for a long time
[06:42:18] <strcat> jason_: so it's... buggy to have long running tasks without I/O?
[06:42:37] <jason_> but this could be a good thing, say i have a database and it needs to flush i/o before exit.
[06:42:51] <jason_> you definitely want the safe shutdown mode for code like that
[06:43:06] <cmr> jason_: that's why you send the task a shutdown message and have it terminate itself.
[06:43:08] *** Quits: tudor (tudor@moz-233C4930.hsd1.ca.comcast.net) (Quit: Leaving)
[06:43:32] <strcat> rust tasks do have linked failure but there are often not common yield points
[06:44:20] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[06:44:34] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[06:44:45] <cmr> I think acrichto is in the process of removing linked failure.
[06:45:00] <cmr> As it is segfaulty and not-very-useful.
[06:45:29] <strcat> linked failure seems important though
[06:45:39] <jason_> linked failure would make the safe-shutdown fairly trivial if you just spawned all your tasks as children of a single task and then tried to join/cancel that one parent
[06:45:45] *** Joins: h0rrorvacui (h0rrorvacu@moz-5B34B08.sip.bhm.bellsouth.net)
[06:45:52] <cmr> I agree
[06:46:00] <cmr> let me find the exact log..
[06:46:29] <jason_> it is also difficult to do though, i've tried a few times and either failed or really slowed down my scheduler
[06:47:00] <acrichto> cmr: I'm not removing linked failure
[06:47:12] <acrichto> brson is considering rewriting it though, but I know little about it
[06:47:21] <cmr> https://botbot.me/mozilla/rust-internals/msg/7622584/
[06:47:28] <cmr> ah
[06:47:34] <acrichto> yeah it's not good
[06:50:35] <jason_> that irc log hits home hard
[06:51:59] <jason_> i spent most of last night and today debugging a live lock in a task scheduling system i've been using for years at work. somehow the bug went unnoticed until i triggered it entirely by accident benchmarking a performance change
[06:54:10] *** Joins: doomlord_ (servitor@moz-4625DF14.range86-184.btcentralplus.com)
[06:55:14] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[06:56:36] *** Joins: nwmcsween (nwmcsween@E0025B86.51EE1362.3655BBF5.IP)
[06:57:38] *** Quits: h0rrorvacui (h0rrorvacu@moz-5B34B08.sip.bhm.bellsouth.net) (Quit: Leaving)
[06:58:59] *** Joins: fabiand (fabiand@moz-8374B9E4.adsl.alicedsl.de)
[06:59:31] *** Joins: Jesin (Jessin_@moz-3A59C218.cc.lehigh.edu)
[07:01:13] *** Quits: avsej (avsej@D9A610B8.4841F515.FB33447D.IP) (Client exited)
[07:02:06] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[07:02:41] *** Quits: nwmcsween (nwmcsween@E0025B86.51EE1362.3655BBF5.IP) (Ping timeout)
[07:04:32] *** Joins: h0rrorvacui (h0rrorvacu@moz-5B34B08.sip.bhm.bellsouth.net)
[07:06:01] *** Quits: h0rrorvacui (h0rrorvacu@moz-5B34B08.sip.bhm.bellsouth.net) (Quit: Leaving)
[07:06:42] *** Quits: bjustin (bjustin@moz-8FC28563.sierrabravo.net) (Ping timeout)
[07:07:18] *** Quits: Jesin (Jessin_@moz-3A59C218.cc.lehigh.edu) (Quit: Leaving)
[07:09:05] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[07:09:43] *** Joins: h0rrorvacui (h0rrorvacu@moz-5B34B08.sip.bhm.bellsouth.net)
[07:10:28] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[07:10:58] *** Quits: Addle (quassel@moz-89E971E4.cable.teksavvy.com) (Client exited)
[07:12:05] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[07:15:38] *** Joins: sammykim (sammy.kim@5AB4884B.FCC4549.14D5B978.IP)
[07:15:41] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[07:17:52] *** Joins: Jesin (Jessin_@moz-5C1F7BD2.res.lehigh.edu)
[07:18:54] <strcat> you can't make generic functions that are extern "C"... ugh!
[07:18:59] * strcat has no idea how to work around that...
[07:19:01] *** Quits: tautologico (lymph@703660AA.CFE755C8.C27E1635.IP) (Quit: tautologico)
[07:19:46] <dbaupp> how could a generic extern "C" function possibly work?
[07:19:49] <cmr> strcat: how would that work in the first place?
[07:20:02] <strcat> dbaupp: exactly like a generic function does but exposing the C API?
[07:20:06] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[07:20:09] <strcat> er
[07:20:11] <strcat> C ABI*
[07:20:14] <strcat> so
[07:20:16] <strcat> you can do
[07:20:17] <dbaupp> oh, right. I was thinking of FFI.
[07:20:22] <strcat> fn foo<A>() {}
[07:20:29] <strcat> and then do foo::<A> to get a function ptr
[07:20:46] <strcat> I need to be able to pass a callback *that depends on the generic type* to C
[07:20:47] * strcat sighs
[07:21:01] <strcat> the whole code path isn't going to work ;p
[07:21:27] <strcat> hmm
[07:21:29] <dbaupp> modify the compiler some more?
[07:21:54] <strcat> or easier, force people to return ~A instead of A
[07:22:21] <strcat> PITA when you don't want to return something, because () isn't ~A ;p
[07:22:56] <dbaupp> ~() is fun.
[07:22:57] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[07:23:57] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[07:24:00] *** Joins: Heather (Heather@19663F6.F53BAACC.9C17E900.IP)
[07:24:04] <Heather> Hey
[07:24:12] <Heather> it's me again with my weird questions
[07:24:13] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[07:24:33] <Heather> This time error: failed to find an implementation of trait StarStorm::Trait for [type err or] )
[07:24:59] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[07:25:37] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[07:28:11] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[07:28:45] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[07:29:14] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[07:29:42] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Quit: Leaving)
[07:29:52] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Quit: Leaving...)
[07:31:28] <bjz> Heather: did you import the trait?
[07:31:32] <bjz> oh wait
[07:31:45] <bjz> no that shouldn't be it
[07:32:08] <Heather> bjz nevermind it can't detect output path in first :S that was primary error
[07:32:14] *** Quits: mark_edward (quassel@moz-DCB0B750.lightspeed.cicril.sbcglobal.net) (Ping timeout)
[07:32:23] <Heather> now I have : error: attempted access of field `loc` on type `&Moon::Remote`, but no field wi th that name was found
[07:32:46] <Heather> sounds strange...
[07:33:00] <Heather> ah, I know
[07:33:03] <Heather> my fault again
[07:33:05] <Heather> I moved this
[07:33:14] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[07:34:17] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[07:35:53] *** Joins: Ferreus (ferreus@moz-AB73FEA6.dip0.t-ipconnect.de)
[07:35:54] <nif> oh no whyyyyy... my pull request failed.
[07:36:40] *** Quits: FreeFull (freefull@D89A5B80.2CE4D4F4.159B5998.IP) (Quit: )
[07:37:16] *** Quits: pcwalton (pcwalton@moz-B51927E9.hsd1.ca.comcast.net) (Quit: pcwalton)
[07:37:35] *** Joins: pyrac (pyrac@151566EE.73C89388.AD05C589.IP)
[07:37:59] <dbaupp> nif: you need some documentation on the module itself, like the //! comment at the top of treemap.rs
[07:38:29] <dbaupp> (the //! is an "internal" doc comment, and it attached to item it is in, in this case, the btree module itself.)
[07:39:08] <dbaupp> (assuming you're "niftynif" on github...)
[07:39:10] <nif> dbaupp: oh my goodness, okay. great.  I thought it was something like that but I wasn't sure of the exact syntax of the comment I was supposed to put.
[07:39:13] <nif> that's me!
[07:39:29] <dbaupp> cool :)
[07:39:48] <nif> so this means I need r+ approval again, right?
[07:39:55] <nif> after I push my commit.
[07:39:58] <dbaupp> yup
[07:40:14] <nif> maaaan...I was so excited too.
[07:40:26] <benh> subsequent r+'s come pretty easy, though
[07:40:32] <dbaupp> nif: ping me when you add it and i'll sort out an r+ for you :P
[07:40:45] * dbaupp has a few spare ones in his pocket
[07:40:57] <nif> heh, thanks so much!
[07:42:37] <nif> dbaupp: I got it up. what should I do next?
[07:44:02] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[07:44:12] <Heather> how to convert ~str to &str
[07:44:16] <Heather> forgot again
[07:44:26] <dbaupp> nif: wait for bors to come back :)
[07:44:31] <strcat> Heather: it will coerce implicitly
[07:44:38] <strcat> if you need to do it explicitly, as_slice
[07:44:40] <nif> dbaupp: groovy :)
[07:44:58] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[07:45:00] <strcat> wooo, invalid free
[07:45:18] <Heather> strcat thanks
[07:45:20] <Sharp> I just found out about Eclipse's "non-null by default" annotation, will be making heavy use of that :P
[07:47:02] * strcat sighs
[07:47:05] <strcat> why won't this work ,_,
[07:48:47] <strcat> oh wow
[07:48:50] <strcat> it works
[07:49:05] <dbaupp> strcat: do you know why?
[07:49:06] <myname> lol
[07:49:13] <strcat> dbaupp: yes
[07:49:30] <strcat> I was joining the threads twice... :(
[07:49:30] <dbaupp> that's good
[07:50:42] *** Quits: pyrac (pyrac@151566EE.73C89388.AD05C589.IP) (Ping timeout)
[07:52:05] *** Joins: ofeldt- (ofeldt@moz-4E9CE318.dip0.t-ipconnect.de)
[07:52:49] *** Quits: ofeldt (ofeldt@moz-5E0330E8.dip0.t-ipconnect.de) (Ping timeout)
[07:53:03] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[07:55:47] <Heather> cannot move out of dereference of & pointer <- I hate this error :(
[07:55:54] *** Joins: simlay (simlay@moz-1C72F8DD.hsd1.ca.comcast.net)
[07:56:05] *** Joins: Ms2ger (Ms2ger@moz-EA6EE9F3.adsl-dyn.isp.belgacom.be)
[07:57:16] <Heather> how can I pass Option without such error
[07:58:38] *** Joins: fyolnish_ (fyolnish@moz-BE2BAE5B.miinet.jp)
[07:59:21] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Ping timeout)
[08:00:01] <klutzy> rusti: fn f<'a>() -> Option<&'a str> { Some("a") } println!("{:?}", f());
[08:00:02] -rusti- Some("a")
[08:00:02] -rusti- ()
[08:00:24] *** Quits: fyolnish_ (fyolnish@moz-BE2BAE5B.miinet.jp) (Ping timeout)
[08:00:54] *** Quits: paulproteus (quassel@199.199.210.158) (Ping timeout)
[08:02:06] <dbaupp> Heather: pass an &Option<T> rather than an Option<T>
[08:02:08] *** Joins: paulproteus (quassel@458FE134.3EC36C88.CBDCF1DC.IP)
[08:02:49] <dbaupp> unless that function needs ownership itself
[08:03:11] *** Joins: fyolnish (fyolnish@moz-FD787FCB.panda-world.ne.jp)
[08:04:57] <Ms2ger> Woo, rusti is back
[08:05:05] <strcat> it's rust 0.8 for now though
[08:05:14] <strcat> rusti: 0_0
[08:05:15] -rusti- 0
[08:06:07] *** Joins: ozten (ozten@moz-BC0C74E2.range86-174.btcentralplus.com)
[08:06:16] <strcat> rusti: 0_0.0_0e-1
[08:06:17] -rusti- 0
[08:08:48] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[08:09:15] <benh> oh, rusti is back \o/
[08:09:29] <cmr> rusti: version
[08:09:30] -rusti- "rustc 0.8"
[08:09:39] <cmr> benh: only kinda!
[08:10:19] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[08:10:22] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[08:10:41] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[08:10:46] *** Joins: Shaladdle (Shaladdle@moz-424BC304.hsd1.pa.comcast.net)
[08:10:49] *** Quits: Shaladdle (Shaladdle@moz-424BC304.hsd1.pa.comcast.net) (Quit: Shaladdle)
[08:12:31] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[08:13:26] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[08:18:22] *** Joins: squiddy (squiddy@moz-1E9E1CA5.adsl.alicedsl.de)
[08:22:35] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[08:24:41] <Heather> dbaupp hi, but if I will pass &Option then how then I will work with it ?
[08:24:55] <Heather> dbaupp if I will do *next then I will get same error
[08:25:12] <dbaupp> Heather: match *next { Some(ref a) => { ... } None => { ... } }
[08:26:08] <dbaupp> Heather: you need to work out your "ownership hierachy", i.e. which resources are owned by what things, and then pass references (and match with `ref`) when ownership isn't required, and pass by value otherwise.
[08:26:37] <Heather> :S
[08:27:16] <dbaupp> i.e. if a function *needs* ownership of one of its arguments, it should take that argument by value
[08:27:16] *** Quits: h0rrorvacui (h0rrorvacu@moz-5B34B08.sip.bhm.bellsouth.net) (Quit: Leaving)
[08:27:27] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[08:27:31] <Heather> dbaupp I used unwrap_or there with *next { ref a => I can't use it? :S
[08:27:44] <dbaupp> Heather: next.as_ref().unwrap_or()
[08:27:52] <Heather> wow
[08:27:55] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[08:28:04] *** Joins: Jackneill (Jackneill@moz-4F3809C5.pool.digikabel.hu)
[08:31:07] <Heather> Assertion failed:
[08:31:12] <Heather> Damn again
[08:32:29] <dbaupp> you can't return Option<trait object>
[08:32:51] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[08:32:54] <Heather> dbaupp why?
[08:33:09] <dbaupp> Heather: because it hits that assertion
[08:33:11] <dbaupp> it's a bug
[08:34:51] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[08:35:31] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[08:37:14] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[08:37:28] <Heather> dbaupp https://gist.github.com/Heather/7368087
[08:37:42] <Heather> dbaupp horrible
[08:38:14] <strcat> Heather: so write it differently ;p
[08:38:17] <dbaupp> Heather: let u = match maybe_upstream { Some(ref s) => s.as_slice(), None => "upstream" };
[08:38:27] <strcat> don't need as_slice
[08:38:29] <dbaupp> *maybe_upstream, I guess
[08:38:30] <strcat> just put it 2nd?
[08:38:47] <dbaupp> strcat: that might work, except you may get lifetime issues with "upstream" being 'static...
[08:38:50] * dbaupp tries
[08:38:51] <Heather> strcat I need & in the out
[08:39:08] <strcat> rusti: println(match Some(~"foo") { None => "upstream", Some(s) => s })
[08:39:10] -rusti- pastebinned 5 lines of output: http://sprunge.us/TbeM
[08:39:18] <strcat> meh ;p
[08:39:33] <strcat> stupid subtyping!
[08:39:39] <dbaupp> rusti: println(match Some(~"foo") { Some(s) => s, None => "upstream" })
[08:39:39] -rusti- pastebinned 5 lines of output: http://sprunge.us/YOSW
[08:39:48] <strcat> subtyping + type inference doesn't mix
[08:39:58] <strcat> but...
[08:39:58] *** Quits: fyolnish (fyolnish@moz-FD787FCB.panda-world.ne.jp) (Connection reset by peer)
[08:40:05] <strcat> it's supposed to pick the most general type
[08:40:07] <cmr> But... you're returning a ~str there, what does subtyping have to do with it?
[08:40:14] <cmr> Or are you expecting it to coerce
[08:40:17] <strcat> cmr: ~str is supposed to coerce to &str
[08:40:25] <strcat> except it doesn't work because type inference is lazy
[08:40:28] <Heather> I need Option<~str> -> &str
[08:40:44] <strcat> so use dbaupp's first solution
[08:40:54] <dbaupp> Heather: maybe_upstream.as_ref().map(|s| s.as_slice()).unwrap_or("upstream") probably works too
[08:40:56] <Heather> but I also need to pass &Option
[08:41:16] <Heather> dbaupp no
[08:41:17] <dbaupp> both my solutios should work if maybe_upstream is &Option<~str>
[08:41:24] <dbaupp> "no"?
[08:41:34] <Heather> dbaupp unwrap of as_ref will return &~str
[08:41:48] <dbaupp> Heather: there is a .map there that converts the &~str to a &str
[08:41:51] <Heather> and "upstream" is &
[08:41:52] *** Quits: boredomist (ruqs@B16F530C.DC641F2C.BCAEBB33.IP) (Ping timeout)
[08:42:04] <Heather> ah....
[08:42:10] <Heather> convert before unwrap :S
[08:42:37] <Heather> dbaupp but why do you use map like this is array?
[08:42:50] <strcat> map is defined on Option
[08:42:59] <Heather> strcat I see now
[08:43:04] <cmr> Heather: map is a generic, abstract operation.
[08:43:58] * strcat wishes rust had CTFE and real static assertions ;[
[08:44:13] <Heather> dbaupp yes it works
[08:44:24] <dbaupp> strcat: implement it! \o/
[08:44:31] <strcat> no it's a bad idea
[08:44:32] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[08:44:33] <strcat> ;p
[08:44:40] <dbaupp> (and/or wait for pcwalton do to it :P )
[08:44:48] <strcat> real static assertions would break the ability to type-check generics solely from the definition
[08:45:51] <Heather> fix trait bugs please )
[08:46:06] <strcat> which?
[08:46:25] <Heather> strcat all causing assertion fault )
[08:48:11] <dbaupp> Heather: you can :P
[08:49:20] <Heather> dbaupp how can you know it?
[08:49:22] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[08:49:47] <dbaupp> Heather: what do you mean?
[08:49:50] <strcat> Heather: which bug is bothering you specifically?
[08:50:31] <dbaupp> strcat: https://github.com/mozilla/rust/issues/9719
[08:50:34] <Heather> strcat I'm not sure dbaupp said there is bug I can't pass trait in option
[08:51:00] <Heather> strcat and also there are some bugs providing &implstruct as &Trait
[08:56:36] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[08:58:50] <klutzy> Heather: #9719 still breaks llvm assertion?
[08:59:46] <klutzy> it annoyed me at some moment but not recently, so I forgot it
[09:02:21] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[09:03:19] *** Quits: KindOne (KindOne@moz-77F4DC09.dynamic.ip.windstream.net) (Ping timeout)
[09:04:30] *** Quits: dsirenko (mitra@8E712A0.54C21BA0.9F317420.IP) (Ping timeout)
[09:06:28] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[09:07:43] *** Joins: KindOne (KindOne@moz-A4D1EB48.dynamic.ip.windstream.net)
[09:07:54] *** Quits: sammykim (sammy.kim@5AB4884B.FCC4549.14D5B978.IP) (Quit: Lost terminal)
[09:08:24] *** Joins: fyolnish_ (fyolnish@moz-BE2BAE5B.miinet.jp)
[09:08:35] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[09:09:17] <Heather> klutzy :(
[09:09:19] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Ping timeout)
[09:10:10] *** Quits: fyolnish_ (fyolnish@moz-BE2BAE5B.miinet.jp) (Ping timeout)
[09:10:17] *** Quits: KindOne (KindOne@moz-A4D1EB48.dynamic.ip.windstream.net) (Ping timeout)
[09:10:23] *** Joins: KindTwo (KindOne@moz-3AD2B5DC.dynamic.ip.windstream.net)
[09:11:09] *** Joins: CarpNet (ac@moz-FD24B77.sohonet.co.uk)
[09:11:34] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[09:11:39] *** KindTwo is now known as KindOne
[09:12:16] *** pmoore|away is now known as pmoore
[09:12:46] *** Quits: ozten (ozten@moz-BC0C74E2.range86-174.btcentralplus.com) (Quit: ozten)
[09:13:17] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[09:13:19] *** Joins: nfroidure (nfroidure@moz-A747E642.w90-18.abo.wanadoo.fr)
[09:13:55] *** Joins: avsej (avsej@DF1824D5.EFF97412.48F984E6.IP)
[09:16:23] *** Quits: Ms2ger (Ms2ger@moz-EA6EE9F3.adsl-dyn.isp.belgacom.be) (Quit: bbl)
[09:16:40] *** Quits: recrack (Mibbit@B4104EBB.3CC170B1.1E14B209.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[09:18:31] *** Quits: anshin (anshin@CD85F10D.F21429E2.354459FA.IP) (Ping timeout)
[09:20:59] *** Joins: nkoep (nik@moz-3DF0F12F.pool.mediaways.net)
[09:22:04] <nif> wow so exciting: my changes were merged. :) baby's first pull request.
[09:22:37] <cmr> nif: hey, adding b-trees is pretty awesome
[09:22:50] <nif> it'll be a neat project, for sure!
[09:23:06] <nif> I just can't wait until I graduate so I can sink more time into it. :D
[09:23:18] <sigma> I thought that, then I got a job
[09:23:49] <dbaupp> sigma: why'd you go and do something silly like that?
[09:24:03] <sigma> it was an accident
[09:24:09] <nif> lol
[09:24:37] <dbaupp> sigma: make sure you're wearing your seatbelt next time
[09:24:57] <sigma> My plan was "take 6 months and do interesting stuff" A friend persuaded me to make a linkedin account a couple of weeks in
[09:25:15] <nif> oops.  there's your problem. ;P
[09:25:26] <sigma> recruiter dude contacted me, thought I'd do the interview for the experience, got the job, whoops
[09:25:40] <nif> I think I got a call from a recruiter today, but my phone was on silent.
[09:25:48] <nif> sadness fortress.
[09:26:27] <sigma> kinda scuppered me "I'll write a rust xml parser" plan
[09:26:30] <sigma> my*
[09:26:52] <nif> ah well. there will be other issues to work on.
[09:27:00] <nif> equally exciting.
[09:27:04] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Client exited)
[09:27:23] <nif> I'm sorry, I am so loopy right now. it is 4:30 AM here and I have been in my lab for hours.
[09:27:31] <cmr> nif: me too!
[09:27:38] <nif> yay!! :D
[09:27:41] * cmr sleeps here most days
[09:27:54] <dbaupp> cmr: do... you have a bed?
[09:27:58] <cmr> otherwise I don't wake up on time for class :(
[09:28:13] <cmr> dbaupp: I have a floor and a pillow :P
[09:28:25] <dbaupp> how comfortable
[09:28:32] <nif> oh man, why didn't I think of that? I could totally put a pillow in my lab and sleep under the desk.
[09:28:50] <sigma> it's 9:30am and I just got into work from the gym, I can barely walk so time to pay the technical debt our bitrotted linux backend!
[09:28:53] <cmr> nif: get an eletric kettle and you never need to leave
[09:29:02] <dbaupp> cmr: (I believe that going to sleep before 4.30 would correlate well with waking up earlier. :P )
[09:29:10] <cmr> dbaupp: shh
[09:29:15] <dbaupp> sigma: sounds like it needs a rewrite into Rust
[09:29:27] <nif> cmr: I had that in the lab over the summer, but I moved it to my house so my housemates could use it.  I also had a french press in here.  I made coffee every day.
[09:29:29] <sigma> If I could swing that with management I would.
[09:29:29] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[09:29:30] <dbaupp> cmr: weren't you waking up at, like, 5 a while ago?
[09:29:43] *** Joins: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP)
[09:29:54] <cmr> dbaupp: yes. ah, the luxury of not living in a rowdy dorm hall
[09:30:20] <dbaupp> haha
[09:30:34] <nif> cmr: where do you go to school, if you don't mind me asking?
[09:30:41] <cmr> nif: http://clarkson.edu/
[09:31:03] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[09:31:28] <nif> oh cool. :D
[09:42:12] *** Quits: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP) (Connection reset by peer)
[09:48:45] <Heather> dbaupp from yesterday vcs discussion here is how I do it now: https://github.com/Heather/Mirana/blob/master/src/Main.rs#L166 , &Git should be replaced with &Trait as soon as it will stop failing with bug
[09:54:48] *** Joins: Daniel_S (Daniel@moz-5B58D8B7.dhcp.snlo.ca.charter.com)
[10:07:39] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[10:07:51] * Sharp is fixing about a billion potential null references in his Java app and also wishes he could rewrite it in Rust :P
[10:07:56] <Sharp> Can't until that Thrift implementation is finished
[10:08:03] *** Quits: heftig (heftig@moz-76BC6A3B.dip0.t-ipconnect.de) (Quit: Quitting)
[10:08:03] <Sharp> But I can't finish the Thrift implementation until I fix this stuff :(
[10:09:55] <strcat> every time I try writing something I end up being distracted by long detours into the compiler codebase to fix something
[10:10:45] * strcat sighs
[10:10:47] <Heather> Sharp java support options
[10:11:04] <Sharp> Heather: Option<T>?
[10:11:11] <Sharp> I think I looked for it and couldn't find it.
[10:11:20] <Heather> Sharp really?
[10:11:32] <cmr> Sharp: http://functionaljava.org/
[10:11:51] <cmr> Sharp: I present to your: your sanity
[10:11:55] <Sharp> Heh.
[10:12:03] <Sharp> I am all for sanity.
[10:12:22] <Sharp> Huh, it looks like they turned Java into a semi usable language?
[10:12:23] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[10:12:34] <cmr> yeah it's a pretty neat lib
[10:12:53] *** Joins: dsirenko (mitra@8E712A0.54C21BA0.9F317420.IP)
[10:13:08] <strcat> Sharp: nearly everything is still nullable even if you have an option type though
[10:13:12] <Heather> Sharp https://github.com/npryce/maybe-java/blob/master/test/com/natpryce/maybe/MaybeTest.java
[10:13:23] <strcat> Sharp: so you just end up with multiple layers of nullability
[10:13:25] <strcat> yay! ;p
[10:13:26] <Sharp> strcat: Yeah… in particular, I've noticed that like
[10:13:28] <Sharp> All the stdlib routines
[10:13:29] <Sharp> Are nullable
[10:13:42] <strcat> well, all non-primitives, right?
[10:13:47] * strcat doesn't really know java
[10:13:49] <Sharp> Yeah.
[10:13:55] <Sharp> Or pretty much.
[10:14:06] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[10:14:07] <Sharp> Including really dumb/obvious things like Character.toString().
[10:14:15] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[10:14:23] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[10:14:26] <Sharp> Which… I understand that *theoretically* malloc could fail, but Java isn't really written at a level where I can do anything about it.
[10:15:00] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[10:15:16] <Sharp> Heather: that implementation of Maybe looks (1) slow and (2) verbose
[10:15:24] <dbaupp> cmr: is that "functional java" as in "java that works"? :P
[10:15:35] <Sharp> Also for some reason it's giving me three valued logic
[10:15:48] <Heather> Sharp well sure it's slow and verbose :D
[10:15:53] <Heather> it's Java
[10:16:04] <Sharp> Yes, I know :(
[10:16:20] <strcat> enum Maybe<A> { Nothing, Just(A), Injustice(A) }
[10:16:26] <Sharp> Yes
[10:16:30] <Sharp> That would be the sane implementation
[10:17:17] <Sharp> But this is Java, so their solution to "C enums would be nicer if…" is to turn them from constants suitable for tagging into full fledged classes
[10:17:39] <Sharp> (Classes that can only have static members)
[10:18:24] <Sharp> Sorry, I'll stop hating on Java, it's cliched at this point.  I just rarely use it and it's upsetting me :P
[10:18:52] *** Joins: fyolnish (fyolnish@moz-6D0C638B.uqwimax.jp)
[10:19:39] *** Quits: huhlig-home (huhlig@moz-C8339267.hfc.comcastbusiness.net) (Ping timeout)
[10:20:11] *** Quits: Jesin (Jessin_@moz-5C1F7BD2.res.lehigh.edu) (Quit: Leaving)
[10:20:39] *** Quits: fyolnish (fyolnish@moz-6D0C638B.uqwimax.jp) (Ping timeout)
[10:21:33] *** Joins: ohazi (ohazi@moz-F62F3603.hsd1.ca.comcast.net)
[10:21:57] <sigma> I think I successfully steered us away from using Java in our testing system, C# is a little bit of an improvement...
[10:22:08] <sigma> ish
[10:22:18] <Heather> well
[10:22:29] <Heather> C# is good language
[10:22:43] <Heather> it's really good.
[10:22:55] <sigma> linq helps redeem the java-ness
[10:23:20] <Heather> sigma linq, lambdas, and many more syntax sugar
[10:23:33] <Sharp> C# is kitchen sinkish, I don't like it that much… but after using Java for the last couple of days I understand why people love it so much :P
[10:23:36] <Heather> unblockable collections etc
[10:23:52] <strcat> proper generics, value types, yield + async/await, lots of nice stuff
[10:23:57] <strcat> compared to java
[10:23:59] <strcat> ;p
[10:23:59] <sigma> Heather: oh yeh, it's much better than java
[10:24:00] <Heather> yes yes
[10:24:03] <Sharp> Yeah, exactly.
[10:24:35] <Sharp> Though at least Java is open source… at my last company we ran into a bug with the .NET serializer
[10:24:36] *** Joins: huhlig-home (huhlig@moz-C8339267.hfc.comcastbusiness.net)
[10:24:49] <Sharp> It was causing significant production problems, wasn't reported elsewhere, and it took us three months to diagnose
[10:24:58] <Sharp> Then we had to spend another 20 days or so rewriting it
[10:24:59] *** kimundi is now known as zz_kimundi
[10:25:09] *** Quits: Daniel_S (Daniel@moz-5B58D8B7.dhcp.snlo.ca.charter.com) (Quit: Leaving)
[10:25:09] <Heather> which Java is open source? it's not
[10:25:11] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Client exited)
[10:25:14] <strcat> Heather: it is
[10:25:24] <strcat> the reference implementation of java is openjdk since java7
[10:25:25] <Heather> strcat where is sources?
[10:25:30] <Heather> lol
[10:25:32] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[10:25:36] <Heather> it's not java
[10:25:36] <strcat> http://openjdk.java.net/
[10:25:39] <strcat> Heather: it is
[10:25:45] <strcat> it became the reference implementation
[10:25:47] <Sharp>  OpenJDK isn't Java?
[10:25:54] <Heather> oracle is
[10:25:59] <strcat> Heather: no
[10:26:03] <Heather> strcat why no
[10:26:08] <sigma> openjdk supplanted the sun/oracle implementation
[10:26:12] <strcat> openjdk == the java developed by oracle, and the reference implementation of java7
[10:26:14] <Sharp> I worked at Oracle before this so it's kind of irrelevant anyway :P
[10:26:33] <strcat> they have lots of proprietary extensions, but they are not part of java the language or java's *standard* library
[10:26:34] <Heather> I still don't get
[10:26:39] <sigma> the standard jvm on all platforms is now openjdk, which is opensource.
[10:26:40] <strcat> Heather: openjdk == java7
[10:26:51] <Heather> as far as I understand java is not free because orcale sell it )
[10:26:53] <strcat> with java6, openjdk wasn't real java - it was incomplete
[10:27:04] <strcat> Heather: they sell support, and proprietary extensions
[10:27:15] <Heather> hm...
[10:27:17] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Ping timeout)
[10:27:17] <strcat> RHEL6 is fully open-source and red hat still sells it
[10:27:26] <Heather> rhel is different
[10:27:32] *** Joins: Ms2ger (Ms2ger@moz-4FC8E205.ugent.be)
[10:27:45] <Heather> but in this case I also can say that C# is opensource, there is mono
[10:27:52] <sigma> Oracle essentially sponsor and guide the development direction of java at this point, but it's under an open source licence, and you can build it yourself
[10:28:05] <Sharp> Mono is crippled, Heather, let's not pretend otherwise.
[10:28:10] <sigma> c# is more encumbered than java, but it's still technically free
[10:28:12] <strcat> Heather: an out-of-date, incomplete version of C# without the usual stdlib
[10:28:18] <Heather> pff
[10:28:29] <Heather> mono implementation works much better
[10:28:33] <Sharp> Not in a "technicality" sort of way either
[10:28:37] <Sharp> Every time I wanted to use it in practice I couldn't
[10:28:46] <Sharp> Because it didn't support some significant subsection of .NET.
[10:29:10] <Heather> also with C# by using reflector you can see whole stdlib and edit what you don't like
[10:29:12] <sigma> the only thing I've run into it not supporting was WPF
[10:29:21] <Heather> also you can trick it and unlock blocked parts etc ...
[10:29:44] <Sharp> Goes back to what I've said before: having to use reflection is a failure of the original language :P
[10:29:57] <Heather> it's not
[10:30:03] <Heather> it's great thing
[10:30:16] <Heather> and huge plus for debugging
[10:30:32] *** Joins: andre (andre@CA528A4A.45A4338E.8EE27E6.IP)
[10:30:42] <Sharp> Yes, it's great for development.  Not so much verifying that things will really work in production though, in my experience.
[10:31:14] <Heather> Sharp well.... depends on what you want to get...
[10:31:36] <Heather> sometimes .net itself is bad for production when you want extreme perfomance or case alike
[10:31:44] <sigma> Yeh, i've found it's one of those things that feels really useful, but ends up costing a lot to use
[10:31:57] <sigma> reflection I mean
[10:32:32] <Sharp> I'm not a big fan of .NET to begin with, but while the overhead sucks and misuse sucks, that's not my primary issue with reflection… more that it's a particularly terrible form of dynamic linking.
[10:32:33] <sigma> if I find myself reaching for it, it usually means I havn't thought something through properly
[10:32:34] <Heather> reflections allows me to make something alike
[10:32:38] <Heather> typeof(SerialPort).GetField("internalSerialStream", BindingFlags.NonPublic | BindingFlags.Instance).GetValue(serialPort);
[10:32:45] <Heather> (SafeFileHandle)stream.GetType().GetField("_handle", BindingFlags.NonPublic | BindingFlags.Instance).GetValue(stream)
[10:32:55] <Heather> SetCommTimeouts(handle, ref communications_timeouts)
[10:33:10] <Sharp> If you happen to have a deployment process that involves more than one application and you rely heavily on reflection, the odds are very high that your application will break in ways that are undetectable statically.
[10:33:16] <Heather> Sharp it's std private hidden property unlock
[10:33:44] <Sharp> But why would you do that?
[10:33:53] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[10:34:07] <Heather> Sharp because it's some idiot made this property private
[10:34:34] <Heather> Sharp I was angry discovered that it's strongly hiddent and protected but I achived to unlock it
[10:34:35] <Sharp> Right… but isn't just what I said earlier?  It's a failure of the language, it lets people make things private but doesn't actually keep them private.
[10:34:55] <Sharp> Reflection is the language designers saying "I give up, you give it a shot."
[10:35:12] <Heather> Sharp well yes it's horrible that in reality all your private fields are public
[10:35:20] <strcat> Sharp: I wanted std::{repr, reflect} in rust to be unsafe but you weren't around to back me up! ;p
[10:35:27] *** Joins: donri (donri@moz-9BB61102.tbcn.telia.com)
[10:35:27] * strcat was sad that was rejected
[10:35:29] <Heather> Sharp but it's still being comfortable to use
[10:35:35] * cmr was too
[10:35:35] <Sharp> strcat: Try, try again!
[10:35:37] <strcat> but round 2 can just be feature gating them >:)
[10:35:43] <Heather> Sharp git also can do rebase but it's comfortable
[10:36:17] <dbaupp> strcat: quick, the devs are asleep
[10:36:22] <Sharp> Haha… I wish I could have back the hours I wasted trying to get people at my company not to use rebase as their default workflow.
[10:36:29] <strcat> https://github.com/mozilla/rust/issues/10239 ;p
[10:36:43] <Heather> Sharp rebase is cool :3
[10:37:06] <Sharp> Rebase is very cool, but it's also one of the very few ways you can actually lose history in git :P
[10:37:10] <dbaupp> Heather: depends where/how you're using it...
[10:37:13] <Sharp> And it's a very common pitfall for new users.
[10:37:14] <sigma> I like rebase, locally anyway
[10:37:19] <Heather> Sharp rebase + C# , everything dynamic + everything unlocked
[10:37:20] <strcat> Sharp: pfft
[10:37:21] <Sharp> Especially new users who have been taught to *always* rebase.
[10:37:24] <strcat> history can't be lost with rebase!
[10:37:27] <strcat> it's in the reflog ;p
[10:37:29] <Sharp> After 30 days it can
[10:37:32] <Sharp> Reflog gets GC'd
[10:37:37] <dbaupp> Sharp: change the gc interval
[10:37:40] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[10:37:41] <sigma> never!
[10:37:45] <strcat> Sharp: 30 days is an eternity ;)
[10:37:47] <Sharp> dbaupp: On every user's machine? :P
[10:37:53] <sigma> *ends up with 10GB git repo*
[10:37:56] <Sharp> strcat: It's a distant possibility, I admit :D
[10:38:03] <strcat> Sharp: and the defaults are longer if it's not in a deleted branch
[10:38:07] <Sharp> The more likely thing that rebase does is confuse CI tools
[10:38:14] <strcat> there are several intervals I forget exactly
[10:38:17] <Sharp> To the extent that you can't figure out what's in the build
[10:38:53] <strcat> Sharp: 30 days for unreachable (deleted branch), 90 days for reachable
[10:39:05] <Sharp> I didn't even realize reflogs got deleted for reachable branches.
[10:39:09] <Sharp> Not that it matters
[10:39:30] <sigma> if you havn't gone looking for something for 90 days odds are you don't need it
[10:39:51] * sigma will realise tomorrow it's 91 days since he deleted something he needed
[10:39:56] <strcat> if you didn't immediately panic as soon as you deleted it, odds are you don't need it
[10:40:06] <Sharp> I just don't delete things, saves time later.
[10:41:12] <Heather> Sharp I know how to break the life ! start new project, use Gentoo, use Git, use Rust... you have chance to once you run system update your os will be broken, code will be broken, and you have chance to get broken repo with rebase :D
[10:41:13] <Sharp> Anyway: there are two big issues I have with rebase.  Impact on CI tools, and difficulty keeping a shared history (when more than one person is working against the same branch).  Obviously nobody actually recommends continuously rewriting history on a shared branch, but people do it.
[10:41:22] <Sharp> And people *only* do it because that's literally the only merge strategy they know.
[10:41:53] <Sharp> Heather: Hah.
[10:41:56] * strcat is a bad person and likes linear history like a non-DVCS ;p
[10:42:08] <strcat> feature branches + rebase onto master! >:)
[10:42:13] <Heather> Sharp if you end with broken os, repo and project you have a chance of suicide XD
[10:42:37] <strcat> merge commits are silly if each commit already stands alone
[10:43:05] <Sharp> I'm fully in favor of a rebase to prettify history, just don't do it when your branch is still going to be used afterwards :D
[10:43:49] <strcat> Sharp: I happily rebase anything that's not a collaborative project yet ;p
[10:43:54] <Heather> c'mon git checkout --orphan temp $1 & git commit -m "Truncated history" & git rebase --onto temp $1 origin/master & git checkout master & git branch -D temp
[10:44:03] *** Quits: sigma (sigma@moz-654650A0.range86-160.btcentralplus.com) (Client exited)
[10:44:05] <Sharp> strcat: Yeah, or individual, of course.
[10:44:10] *** Joins: sigma (sigma@moz-654650A0.range86-160.btcentralplus.com)
[10:44:52] <Sharp> Git actually has some pretty powerful rewriting tools that do far more than rebase, though I'm not totally sure why because, uh, it's distributed
[10:45:05] <dbaupp> strcat: you'll happily amend pushed things too :P
[10:45:10] <Sharp> It's not like deleting them on the server means the password you committed 2 years ago is gone from everyone else's computers
[10:45:32] <strcat> dbaupp: sure, if no one else is sending pull requests I don't mind breaking the history >:)
[10:45:53] * dbaupp starts sending regular PRs just to annoy strcat
[10:46:07] <Sharp> strcat: You see my point though, you have to actually have a minimal amount of knowledge not to disrupt other people when you rebase, whereas you need basically none with merge.
[10:46:07] <sigma> yeh, once the history is in more than one repo I treat it as immutable, you can sometimes get away with it but when it doesn't work...
[10:46:09] <dbaupp> Sharp: deleting large binary files accidentally commit
[10:46:09] <Heather> I found that people becoming angry when I do rebase on repos with many contributors
[10:46:20] <dbaupp> Sharp: (maybe...)
[10:46:37] <strcat> Sharp: well, I don't think you should ever rebase master on a collaborative project
[10:46:39] <dbaupp> Heather: if you rebase things that are already public... yes, you're a bad person :P
[10:46:45] <Sharp> dbaupp: I think a git alias would do that more effectively, not sure though, I've never actually seen someone use one.
[10:46:51] <Sharp> strcat: I think most sane people agree with that.
[10:47:10] <Sharp> The problem is accidental pushes / commits and it happens not infrequently with programmers who are new to git
[10:47:28] <Sharp> Especially when the official strategy is something dumb, like setting .git/config to automatically force push :P
[10:47:40] <Ms2ger> The problem is that you need to `git commit` before you're willing to actually commit to the change :)
[10:48:05] <strcat> you can amend it 200 times before sending it off to master ;p
[10:48:06] <sigma> I've been working through a git-svn bridge for a couple of months now, it requires a lot of discipline
[10:48:22] <Sharp> Yeah, and you *should* amend it 200 times :)
[10:48:33] <sigma> but I couldn't work without the ability to rewrite local history
[10:48:35] <dbaupp> Sharp: automatic force pushes o_O
[10:48:43] <dbaupp> that's your problem...
[10:48:45] <Sharp> dbaupp: It's almost exactly as dumb as it sounds.
[10:48:51] <strcat> I really hate pull's default
[10:48:56] <strcat> of making a merge commit
[10:48:59] <strcat> fuck you, git-pull
[10:49:06] * strcat sighs
[10:49:20] <dbaupp> can you alias over built-ins?
[10:49:23] <strcat> yes
[10:49:27] <sigma> git subtree irritates me in a similar way
[10:49:36] <strcat> --ff-only should be the default upstream though
[10:49:36] <Sharp> The line was essentially push = +refs/heads/*:refs/remotes/<yourinitialshere>/*
[10:49:37] <dbaupp> strcat: there's your fix :P
[10:49:40] <hoelzro> there's a git-config setting for pull's default behavior
[10:50:03] <strcat> I only ever use --ff-only (on branches I want to update) or --rebase (on ones where I have local commits)
[10:50:06] <Sharp> Git is pretty much completely configurable
[10:50:10] <strcat> merges smerges ;p
[10:50:12] *** Joins: Houm (Houm@moz-25669AA8.fbx.proxad.net)
[10:50:21] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Connection reset by peer)
[10:50:26] <Sharp> For any definition of the word you care to use :P
[10:50:33] *** Parts: ohazi (ohazi@moz-F62F3603.hsd1.ca.comcast.net) (Leaving)
[10:50:38] <strcat> there's actually a way to do an iterative merge like rebase's default
[10:50:45] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[10:51:05] <Sharp> Iterative or interactive?
[10:51:21] <strcat> iterative as in it goes through every commit and stops when there's an issue
[10:51:42] <Sharp> That sounds like it's beyond the scope of just a merge strategy?  Maybe it isn't.
[10:51:53] <Sharp> I'm pretty sure you can define custom merge strategies anyways though.
[10:53:32] * Sharp wishes rerere statistics could be pushed up :P
[10:53:32] *** Quits: axitkhurana (Adium@63F3AA56.9CFBD76D.30E7AE68.IP) (Ping timeout)
[10:53:55] <Heather> dbaupp once I used to rebase ~500 commits to 73
[10:54:02] <Heather> dbaupp in Gentoo/dotnet repository
[10:54:27] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[10:54:35] <Sharp> Heather: Were they all yours?  Otherwise you could definitely piss some people off by eliminating attribution :)
[10:54:35] <Heather> dbaupp I used to rewrite whole history keeping contributors activity )
[10:54:55] <dbaupp> Heather: wow...
[10:54:59] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Ping timeout)
[10:55:00] <Heather> Sharp I used to separate them smart
[10:55:42] <strcat> Sharp: I know people who would be so happy to have blame attributed to someone else for breakage ;p
[10:55:47] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[10:55:50] <Sharp> Ultimately, the reason I eventually switched to merge by default is just that to use rebase *correctly* you have to painstakingly go through all your commits and try to pretend there was a logical progression that there may not have been
[10:56:01] <Sharp> And to create working, understandable states that never existed in the first place
[10:56:09] <Sharp> It just takes so looong compared to a merge.
[10:56:17] <strcat> Sharp: or just squash everything? ;p
[10:56:43] <Sharp> strcat: Or that, yes :P
[10:57:28] *** Quits: m_kato (m_kato@moz-C286AD9A.bitcat.net) (Quit: Leaving...)
[10:57:31] <Sharp> Squash isn't easier than merge, though, it just results in less information being available
[10:57:59] <sigma> I tend to obsessively add -p so all my commits do one thing
[10:58:06] <Sharp> Also, squash isn't always an option (e.g. when I'm merging master onto a topic branch)
[10:58:26] <sigma> takes a little longer, but the subsequent rebase and squash is much tidier
[10:58:29] <sigma> and faster
[10:58:36] <Sharp> Yeah, I used to do that
[10:59:20] <Sharp> Pristine history is lovely, it just takes longer.
[11:00:04] <sigma> yeh, I'm working on a large legacy code base atm, so it's worth the tidiness
[11:00:27] <Sharp> Ah, gotcha.
[11:00:48] <sigma> I'm a bit more haphazard when I'm working on something with a lot of churn
[11:01:13] *** Joins: Daniel_S (Daniel@moz-5B58D8B7.dhcp.snlo.ca.charter.com)
[11:01:50] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[11:01:52] *** Quits: Houm (Houm@moz-25669AA8.fbx.proxad.net) (Ping timeout)
[11:02:23] * Sharp would gladly swap rebase time for time spent adding all these null checks :(
[11:05:26] *** Quits: Heather (Heather@19663F6.F53BAACC.9C17E900.IP) (Ping timeout)
[11:06:12] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Quit: yichoi)
[11:06:45] *** Joins: Houm (Houm@moz-25669AA8.fbx.proxad.net)
[11:09:27] *** zz_kimundi is now known as kimundi
[11:09:43] *** Joins: cubic (cubic@moz-80241A3A.mc.videotron.ca)
[11:10:10] *** Joins: sweet_kid (Upasana@77858518.3BB3BF4C.388CF16F.IP)
[11:10:41] *** Joins: Sorella_ (quildreen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[11:10:52] *** Quits: StarLight (StarLight@moz-121895D8.dynamic.avangarddsl.ru) (Ping timeout)
[11:12:20] *** Joins: Heather (Heather@19663F6.F53BAACC.9C17E900.IP)
[11:13:11] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[11:13:22] *** Joins: Earnestly (earnest@38FE72A5.82423D8F.BFD1ABFD.IP)
[11:13:39] <cmr> It's so nice to have sane, defined privacy rules.
[11:14:59] * dbaupp hugs acrichto
[11:15:00] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[11:15:18] <cmr> dbaupp: quick! to the cloning vat with the dna!
[11:15:49] *** Quits: Ms2ger (Ms2ger@moz-4FC8E205.ugent.be) (Quit: bbl)
[11:16:50] *** Joins: heftig (heftig@moz-E8E2034C.inf.fh-bonn-rhein-sieg.de)
[11:16:53] <dbaupp> cmr: we started cloning acrichto long ago
[11:17:13] <dbaupp> how else could he be so productive? it's actually 4 people all using the same github account.
[11:17:20] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Ping timeout)
[11:17:23] <cmr> ahhh it makes so much sense now
[11:17:47] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[11:19:36] <dbaupp> cmr: we've deemed that experiment a success, so we're rolling out a big batch soon
[11:19:56] <dbaupp> we're going to try to get to >1 PR from "acrichto" per hour.
[11:20:18] <cmr> Poor bors. All of those acricto's are going to generate a lot of bum test runs!
[11:20:21] <cmr> ;p
[11:20:36] <dbaupp> we've got some bors-cloning in the queue too.
[11:22:11] *** Joins: hjbv873h48t58u (hjbv873h48@CD2799A7.934D5458.521C0519.IP)
[11:22:17] *** Quits: hjbv873h48t58u (hjbv873h48@CD2799A7.934D5458.521C0519.IP) (User has been banned from Mozilla (no spamming here))
[11:24:20] *** Quits: sweet_kid (Upasana@77858518.3BB3BF4C.388CF16F.IP) (Ping timeout)
[11:25:22] *** Quits: flowsnake (flowsnake@moz-E4E567EE.aztw.cable.virginm.net) (Quit: ZNC - http://znc.in)
[11:26:28] *** Joins: flowsnake (flowsnake@moz-E4E567EE.aztw.cable.virginm.net)
[11:33:40] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[11:36:14] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[11:39:34] <nuts> Hello, I'm trying to play with ffi today
[11:39:54] <nuts> so In my C library I've only one function (void print(char *str);
[11:39:56] <nuts> )
[11:40:12] <nuts> This function perform a call of printf to write str
[11:43:00] <cmr> nuts: do you have a question? :P
[11:43:04] <nuts> in my rust code I've that http://pastealacon.com/33465
[11:43:07] <nuts> cmr: yes
[11:43:42] <nuts> It's ok for an caracter, but it is possible to passe a ~str to my c function?
[11:44:11] <cmr> nuts: The signature should be `fn aff(my: *c_char) -> c_void`
[11:44:23] <cmr> (use std::libc::*)
[11:44:49] <dbaupp> (or `use std::libc; ... (my: *libc::c_char)`)
[11:44:59] <nuts> right
[11:45:12] <cmr> nuts: and then you can use to_c_str().with_ref(|ptr| unsafe { aff(ptr) })
[11:45:21] <cmr> `some_str.to_c_str().with_ref(|ptr| unsafe { aff(ptr) })`, that is
[11:45:36] <nuts> oh
[11:45:38] <dbaupp> using with_c_str rather than to_c_str().with_ref will be faster.
[11:45:41] <cmr> or actually `some_str.with_c_str`
[11:45:43] <cmr> Yeah
[11:45:47] <nuts> nice, it's exactly when I try to do
[11:46:14] <dbaupp> (faster for small strings, that is.)
[11:48:09] <nuts> It can't possible to write unsafe { aff(str.to_c_str()) }; ?
[11:48:24] <dbaupp> no
[11:49:16] <dbaupp> the c_str stores a pointer internally, and so if you were to let a * pointer escape, it would very easy to accidentally crash (since the internal allocation may be freed)
[11:49:32] *** Quits: tgummerer (tgummerer@moz-582025B2.members.linode.com) (Ping timeout)
[11:50:01] <nuts> I wee
[11:50:03] <nuts> see*
[11:50:10] <dbaupp> it is possible to satisfy the type checker via str.with_c_str(|ptr| ptr), but this is in particular *very* bad, and should never be used.
[11:50:55] <dbaupp> (since with_c_str allocates the c_str internally, and so `ptr` will *always* be invalid outside that closure.)
[11:53:06] <nuts> so now, I've an ~str
[11:53:07] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[11:54:30] <nuts> so now, I've an ~str, but in my_str.to_c_str().with_ref(|ptr| unsafe { aff(ptr) })
[11:54:38] <nuts> rustc say to me
[11:54:45] <nuts> mismatched types: expected `~i8` but found `*i8` (expected ~-ptr but found *-ptr)
[11:55:15] <cmr> nuts: is your FFI declaration using a ~ rather than a * ?
[11:55:36] <nuts> fn aff(my: ~c_char) -> c_void; this?
[11:55:48] <cmr> yes
[11:55:51] <cmr> it should be *c_char
[11:55:55] *** Joins: sweet_kid (Upasana@38DC0908.ADD6300A.388CF16F.IP)
[11:56:00] <cmr> Also, see what dbaupp said about with_c_str
[11:56:18] *** Quits: Heather (Heather@19663F6.F53BAACC.9C17E900.IP) (Quit: ~ Trillian - www.trillian.im ~)
[11:56:18] <nuts> yep, I read his explanation right now
[11:56:30] <sigma> are there any plans for something like runhaskell?
[11:56:38] <dbaupp> nuts: change the ~ to a *. for FFI, you should be using * almost always.
[11:56:51] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[11:56:52] <dbaupp> sigma: there used to be `rust run foo.rs`
[11:56:53] <bjz> sigma: what's runhaskell?
[11:57:02] <hoelzro> sigma: you mean like rust run?
[11:57:13] <dbaupp> sigma: but no-one was maintaining the rust tool, so it was (unfortunately) removed
[11:57:25] <hoelzro> bwah
[11:57:36] <sigma> something I use to do #!/usr/bin/env runrust
[11:57:59] <sigma> i can *
[11:58:33] <bjz> they've said that the `rust` tool could be re-added if there was somebody dedicated who wanted to maintain it
[11:58:38] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[11:58:46] <dbaupp> sigma: put a shell script in ~/bin? :P
[11:59:28] <sigma> heh, there's always that option :)
[12:01:21] <dbaupp> (at least until there's something similar upstream)
[12:03:52] *** Joins: tgummerer (tgummerer@moz-582025B2.members.linode.com)
[12:07:51] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[12:08:12] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[12:09:57] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[12:10:09] *** Joins: fyolnish (fyolnish@moz-5FBEB0E.uqwimax.jp)
[12:11:51] *** Quits: fyolnish (fyolnish@moz-5FBEB0E.uqwimax.jp) (Ping timeout)
[12:14:01] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[12:15:43] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[12:16:43] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[12:16:59] *** Quits: KindOne (KindOne@moz-3AD2B5DC.dynamic.ip.windstream.net) (Ping timeout)
[12:21:02] *** Joins: KindOne (KindOne@moz-73A4C238.dynamic.ip.windstream.net)
[12:21:20] *** Quits: Sorella_ (quildreen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Quit: Ex-Chat)
[12:23:11] <ChrisMorgan> ``Paths are always kept in normalized form. This means that creating the path Path::new("a/b/../c") will return the path a/c. Similarly any attempt to mutate the path will always leave it in normalized form.`` — std::path docs. But surely the normalized form for WindowsPath uses backslashes rather than forward slashes?
[12:24:39] *** Joins: sk (sk@9E6B574B.EB2AA036.2CAF0D3B.IP)
[12:24:43] <cmr> ChrisMorgan: of course
[12:27:30] <ChrisMorgan> Anyway, the question I really want to ask: is there any convenient way to read UTF-8 incrementally? Basically, a char-oriented Reader? (I know you can read it all at once and use std::str::from_utf8, that's what I'm expecting to be doing, but I'd like to know the other too.)
[12:28:15] <cmr> ChrisMorgan: Like, stream chars from a utf8 bytestream?
[12:28:19] <ChrisMorgan> Yep/.
[12:28:36] * dbaupp normalises that to `Yep`
[12:28:49] <ChrisMorgan> Well done, you are indeed sagacious.
[12:28:52] <cmr> http://static.rust-lang.org/doc/master/std/str/trait.StrSlice.html#tymethod.is_char_boundary helps, but still doesn't qualify as "convenient"
[12:29:31] <dbaupp> if there's not currently a way to do it, I assume the encoding stuff will add one.
[12:29:32] <ChrisMorgan> I'm guessing that the "doing encoding properly" stuff will provide such an interface?
[12:29:40] <cmr> I'd hope so!
[12:29:44] * ChrisMorgan delivers a high-five to dbaupp
[12:29:45] <dbaupp> and I guess https://github.com/lifthrasiir/rust-encoding has one already...
[12:29:51] * dbaupp returns it
[12:30:18] *** Joins: canhtak (canhtak@moz-44AEB22E.wl.t.ulaval.ca)
[12:30:25] * dbaupp doesn't think this is the high-five he ordered: "could I have a refund please? free return postage too?"
[12:30:41] *** Joins: Ms2ger (Ms2ger@moz-EA6EE9F3.adsl-dyn.isp.belgacom.be)
[12:31:28] *** Joins: arodier74 (Thunderbir@moz-25EB015.in-addr.btopenworld.com)
[12:32:17] <dbaupp> hm, it doesn't appear have a plain Reader wrapper https://github.com/lifthrasiir/rust-encoding/blob/master/src/types.rs#L181 I guess that's a higher level thing to be built on top of Decoder
[12:32:49] <dbaupp> also, conditionally compiled default methods... that's some fancy test framework
[12:33:14] <ChrisMorgan> Well, I'll get back to writing my parser with loading it all up-front.
[12:33:46] <ChrisMorgan> Yeah, that does make it more convenient than standalone functions in a separate module.
[12:33:56] <cmr> I mean, you just need a buffer with 4 bytes of storage to do it.
[12:34:36] <ChrisMorgan> Sure, it's a fairly simple thing to do.
[12:37:17] <dbaupp> rusti: use std::rt::io::net::ip; let x: Option<ip::IpAddr> = FromStr::from_str("1.2"); x
[12:37:18] -rusti- None
[12:37:26] <ChrisMorgan> Ooh, rusti is working again :-)
[12:37:30] <dbaupp> that's meant to be the same as 1.0.0.2 isn't it?
[12:37:36] <ChrisMorgan> I believe so.
[12:37:41] <dbaupp> ChrisMorgan: 0.8, not master.
[12:38:02] <ChrisMorgan> Just as the 32-bit number representation is also valid as an IP address.
[12:38:14] <dbaupp> use std::rt::io::net::ip; let x: Option<ip::IpAddr> = FromStr::from_str("2345"); x
[12:38:18] <cmr> I didn't think omitting inner fields like that was valid.
[12:38:28] <dbaupp> rusti: use std::rt::io::net::ip; let x: Option<ip::IpAddr> = FromStr::from_str("2345"); x
[12:38:29] -rusti- None
[12:39:23] <cmr> well hot damn
[12:39:33] <cmr> http://127.1:8000/ with python2 -m SimpleHTTPServer works
[12:40:23] <ChrisMorgan> cmr: 2130706433 is a valid IP address too, equating to 127.0.0.1.
[12:40:35] <cmr> I knew about those
[12:42:08] *** Joins: arodier75 (Thunderbir@moz-25EB015.in-addr.btopenworld.com)
[12:42:59] *** Quits: arodier74 (Thunderbir@moz-25EB015.in-addr.btopenworld.com) (Ping timeout)
[12:43:15] <Sharp> rusti is back?
[12:43:25] <cmr> rusti: "no, I'm just a very fast typist"
[12:43:26] -rusti- "no, I'm just a very fast typist"
[12:43:31] <Sharp> :P
[12:44:54] *** Quits: arodier75 (Thunderbir@moz-25EB015.in-addr.btopenworld.com) (Quit: arodier75)
[12:45:27] <Sharp> So given that Java raises an explicit NullPointerException on every null pointer access, does Java insert such a check on every pointer access?  Or is it smart enough to know when you've already included the checks in your code?
[12:45:42] <Sharp> Specifically, does it trust you on assertions when you run without assertions enabled?
[12:46:09] <Sharp> If not then asserts() isn't really all that useful :P
[12:46:26] *** Quits: heftig (heftig@moz-E8E2034C.inf.fh-bonn-rhein-sieg.de) (Ping timeout)
[12:46:37] <dbaupp> cmr, ChrisMorgan: http://www.unix.com/man-page/Linux/3/inet_addr/
[12:47:28] <cmr> dbaupp: ah that makes a lot more sense.
[12:47:36] <cmr> CIDR ftw
[12:48:58] *** Joins: samnardoni_ (Mibbit@F889EF52.38924046.A86B7D63.IP)
[12:50:00] *** Joins: heftig (heftig@moz-E8E2034C.inf.fh-bonn-rhein-sieg.de)
[12:52:14] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[12:52:39] <Sharp> Blah, the JVM doesn't even hoist null checks out of loops?
[12:53:05] <cmr> Sharp: multithreading!
[12:53:23] <Sharp> Local variables? :P
[12:53:30] <strcat> Sharp: aliasing, then
[12:53:42] <cmr> No such thing as a local, it's all GC'd refs.
[12:53:46] <strcat> compilers are much more conservative than you would think
[12:53:56] <strcat> they are also much more clever and thorough than you'd think too
[12:53:59] <strcat> ;p
[12:54:05] <Sharp> I'm well aware of that :)
[12:54:08] <cmr> although it could do escape analysis I guess
[12:54:09] <samnardoni_> what parts of the standard library are considered the most up-to-date idiomatic rust? or any one have examples of some beautiful rust code?
[12:54:20] <Sharp> Me vs. compiler => compiler should win pretty much every time
[12:54:35] <Sharp> Which is why I'm always bewildered when I run into something that seems like the compiler should do it.
[12:54:54] <strcat> samnardoni_: most of the standard library provides high-level concepts built on low-level code
[12:55:07] <strcat> so it's not really idiomatic rust, because it's building the concepts for idiomatic rust to use
[12:55:24] <samnardoni_> strcat: very good point
[12:55:44] <strcat> samnardoni_: although, maybe you would consider something like std::iter to be idiomatic because it's entirely free of unsafe code, and provides a high-level zero-cost abstraction with great code reuse ;p
[12:55:47] <Sharp> "Null checks can be hoisted manually, and suppress implicit null checks in dominated blocks."  So it sounds like there's no fundamental reason *why* the null couldn't be hoisted, then?  It just isn't?
[12:56:01] <Sharp> Are the semantics different somehow in a way I'm not detecting?
[12:56:11] <samnardoni_> so rust's stdlib is more like other languages C++ runtime code? :P
[12:56:43] <strcat> samnardoni_: well, that's what a big part of the stdlib is
[12:57:09] <strcat> we don't have many layers of abstraction
[12:57:20] *** Quits: decoder (quassel@moz-D7023D7D.own-hero.net) (Quit: No Ping reply in 180 seconds.)
[12:57:23] <samnardoni_> amazing, really
[12:57:36] <cmr> what is?
[12:57:36] *** Joins: decoder (quassel@moz-D7023D7D.own-hero.net)
[12:58:08] <dbaupp> Sharp: do they get jit'd away?
[12:58:15] <samnardoni_> have a self-hosted runtime(?)... not sure what the correct terminology is
[12:58:20] <Sharp> dbaupp: This is the Hotspot documentation.
[12:58:36] <dbaupp> Sharp: oh. that's weird/saddening :(
[12:58:39] <cmr> samnardoni_: Rust occupies the same space as C++, it's not really that unusual
[12:58:43] <Sharp> Yeah...
[12:58:46] <strcat> samnardoni_: I think it's quite neat how concise expressing something like a memory safe reference counting implementation is https://github.com/mozilla/rust/blob/master/src/libstd/rc.rs#L29-L76
[12:59:04] <strcat> so I guess you can still say something like that is beautiful/idiomatic rust even though it's low-level ;p
[12:59:07] <Sharp> I'm sure there's a reason for it, though, it's not like nobody has worked on optimizing the JVM :P
[12:59:44] *** Quits: nuts (tii@822A8E7E.6AD15BF5.75D3BBDB.IP) (Ping timeout)
[13:00:04] <eddyb> rusti: "thanks for bringing me back to life, strcat <3"
[13:00:04] -rusti- "thanks for bringing me back to life, strcat <3"
[13:00:16] <eddyb> and whoever fixed the darn bugs :P
[13:00:20] <strcat> rusti: version
[13:00:20] -rusti- "rustc 0.8"
[13:00:23] <strcat> eddyb: no one
[13:00:25] <strcat> ;p
[13:00:33] <samnardoni_> strcat: yeah definitely
[13:00:35] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[13:00:37] <Sharp> "Exception throwing compiles to a goto, if the thrower and catcher inline together. For such uses, rely on preallocated or cloned exceptions, or override the fillInStackTrace part of exception creation, which is an expensive, reflective native call."
[13:00:38] * eddyb shamefully leaves the room
[13:00:40] <Sharp> Yay Java!
[13:00:49] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[13:00:55] <strcat> rusti: version
[13:00:59] <Sharp> "If you want exceptions to be fast, don't use them idiomatically."
[13:01:00] -rusti- timeout triggered!
[13:01:02] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[13:01:08] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[13:01:57] *** Joins: nuts (tii@822A8E7E.6AD15BF5.75D3BBDB.IP)
[13:03:16] <Sharp> Hotspot's deoptimization stuff sounds neat.  I suppose that's a perk of not having to do all analysis statically.
[13:03:19] <dbaupp> rusti: version
[13:03:19] -rusti- "rustc 0.8"
[13:04:22] <strcat> Sharp: well, AOT compilers can still do PGO
[13:04:50] <Sharp> True :)
[13:05:36] * Sharp was just looking for a bright spot :P
[13:06:19] *** Quits: sweet_kid (Upasana@38DC0908.ADD6300A.388CF16F.IP) (Quit: Leaving)
[13:07:45] <Daniel_S> is there an idiomatic way to convert failure to read a file into a useful error message?
[13:08:51] <cmr> Daniel_S: IoError has a ToStr, but afaik the only way to actually get the IoError is to handle conditions :\
[13:09:02] <samnardoni_> what's the name for users of rust anyway? rustifarians?
[13:09:03] <Daniel_S> extra caveats: I see task::try but that spams stdout, and I can't do anything useful beyond ignoring the file so conditions seem like overkill
[13:09:18] <cmr> samnardoni_: rusties is popular
[13:09:27] <Sharp> Rustics, rusties, rustlers.
[13:09:28] <Daniel_S> cmr: I really really don't want to handle conditions, but that could just be evil C habits :)
[13:09:46] * Sharp didn't know you didn't have to handle conditions in C.
[13:09:50] <cmr> Daniel_S: conditions on I/O are going away, but they're all you get right now.
[13:10:08] <dbaupp> cmr: are they really going away? I thought it was still up in the air?
[13:10:21] <cmr> dbaupp: pretty sure the decision was made?
[13:10:23] *** Joins: g3orge (g3orge@moz-369F78A7.access.hol.gr)
[13:10:41] <samnardoni_> they all sound good apart from "rustlers". a cheap brand of microwavable food in the UK
[13:10:58] <cmr> http://static.rust-lang.org/doc/master/std/os/struct.MemoryMap.html has the only idiomatic error API atm, I think.
[13:11:41] <strcat> an error enum! yay!
[13:11:47] <Sharp> "Idiomatic" is all over my screen :D
[13:11:56] *** Quits: samnardoni_ (Mibbit@F889EF52.38924046.A86B7D63.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[13:12:01] <cmr> strcat: I put the PR that added MemoryMap through intense scrutiny :P
[13:12:16] *** Quits: dsirenko (mitra@8E712A0.54C21BA0.9F317420.IP) (Ping timeout)
[13:12:20] <dbaupp> cmr: ok
[13:12:41] *** sankha93 is now known as sankha93|afk
[13:13:25] <dbaupp> cmr: you didn't insist on documentation for the struct, it's fields, or the methods though... :/
[13:13:44] <cmr> dbaupp: the names are very self-documenting IMO
[13:13:51] <cmr> Though I agree it needs docs
[13:14:02] <dbaupp> cmr: "granularity"?
[13:14:07] <cmr> ...I feel like it had docs at one point.
[13:14:39] <cmr> dbaupp: page size, of course.
[13:14:46] <cmr> The granularity you map with.
[13:14:50] *** Joins: dsirenko (mitra@8E712A0.54C21BA0.9F317420.IP)
[13:14:56] <dbaupp> that's not "of course" :P
[13:15:03] <dbaupp> page_size would be "of course".
[13:15:08] <strcat> of coarse*, memory maps are like 200 grit
[13:15:10] <Sharp> I think this is a good illustration of how what's obvious is kind of subjective :P
[13:15:16] <dbaupp> haha
[13:15:18] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[13:15:32] <dbaupp> the point is... it should have docs.
[13:17:00] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[13:18:36] <cmr> dbaupp: doccing now
[13:18:48] * dbaupp hugs cmr
[13:19:11] <cmr> My overtired brain was going to kill me if I tried doing more linear alg anyway :p
[13:19:18] *** Joins: SiegeLord (sl@moz-1DF56822.twcny.res.rr.com)
[13:19:22] <dbaupp> cmr: did you try sleeping?
[13:19:36] <dbaupp> :P
[13:19:43] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[13:19:47] <cmr> I did try. Failed for 45 minutes, so resumed consciousness.
[13:20:02] *** Quits: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com) (Ping timeout)
[13:20:46] <strcat> cmr: http://jonls.dk/redshift/ > sleep
[13:21:21] *** Joins: GeneralMaximus (ankur@B41E9C2B.5C42E10C.D5D59AD9.IP)
[13:21:22] <cmr> strcat: I could never get used to everything being reddish.
[13:21:38] <strcat> but it's useless and provides a nice feel-good aura
[13:21:43] <cmr> hahah
[13:21:58] *** Joins: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com)
[13:22:10] *** kimundi is now known as zz_kimundi
[13:23:57] *** Quits: GeneralMaximus (ankur@B41E9C2B.5C42E10C.D5D59AD9.IP) (Ping timeout)
[13:24:11] *** Quits: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com) (Ping timeout)
[13:25:25] *** Quits: Houm (Houm@moz-25669AA8.fbx.proxad.net) (Ping timeout)
[13:25:27] *** Quits: g3orge (g3orge@moz-369F78A7.access.hol.gr) (Quit: leaving)
[13:26:09] *** Joins: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com)
[13:26:57] *** Quits: z0w0 (zack@moz-FE2A0BDD.lnse2.woo.bigpond.net.au) (Client exited)
[13:26:59] <mletterle> Good morning residents of Rustlandia.
[13:27:15] *** Joins: GeneralMaximus (ankur@728B23F2.E8A26698.BE90E62C.IP)
[13:28:09] * ChrisMorgan has learned by now that when mletterle says "good morning" it's time for him to go to bed (or half an hour earlier), but then he tends not to get round to it for another hour or two
[13:28:37] <Sharp> When mletterle says good morning, it's time for me to get up :(
[13:31:02] <bstrie> I've learned by now that when ChrisMorgan says good night, it's time for nmatsakis to come in two minutes later futilely pinging him
[13:31:11] <cmr> bstrie: inorite!
[13:31:14] <ChrisMorgan> Yeah, that too.
[13:31:31] <cmr> #rust is an underoiled train.
[13:31:56] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Client exited)
[13:31:59] <ChrisMorgan> nmatsakis: did you get anywhere with augmented-assignment?
[13:32:16] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[13:33:55] *** Quits: GeneralMaximus (ankur@728B23F2.E8A26698.BE90E62C.IP) (Quit: Computer has gone to sleep.)
[13:33:56] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Ping timeout)
[13:34:16] *** Quits: sigma (sigma@moz-654650A0.range86-160.btcentralplus.com) (Quit: Leaving.)
[13:35:54] <Sharp> "For small variations in the remaining part, consider using a single named class as a template and loading it multiple times as an anonymous class with constant pool edits. Anonymous classes load and unload faster than named ones."  Why would anonymous classes load faster?
[13:37:22] <Sharp> Oh, I see… it's some VM extension.
[13:37:33] *** Joins: jvshahid (jvshahid@DFBC979C.A3446CDA.EB438161.IP)
[13:38:10] <mletterle> ChrisMorgan, Sharp: :)
[13:38:18] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[13:40:17] <KokaKiwi> How do I print a '{' with print! ? I say me that he expect a closing '}' :o
[13:40:46] <KokaKiwi> (Oh wait, I forgot to check manual, sorry :x)
[13:40:56] <ChrisMorgan> \\{
[13:41:08] <SiegeLord> What is the use case for arbitrary base literals?
[13:41:10] <ChrisMorgan> More fully, "\\{", or r"\{"
[13:41:21] <ChrisMorgan> SiegeLord: why not have them?
[13:41:27] *** Quits: canhtak (canhtak@moz-44AEB22E.wl.t.ulaval.ca) (Quit: canhtak)
[13:41:28] <cmr> SiegeLord: satiating the crazies
[13:41:32] <cmr> ChrisMorgan: Feature creep
[13:41:37] <SiegeLord> ChrisMorgan, Pointless complexity
[13:41:49] <ChrisMorgan> I have, in my degree, come across cases where bases three and four would be convenient in algorithms.
[13:42:00] <cmr> ChrisMorgan: What do you do when two crates specify different handlers for different bases?
[13:42:00] <bstrie> we have macros for that
[13:42:07] <KokaKiwi> ChrisMorgan: It works, thanks :)
[13:42:22] <cmr> ChrisMorgan: What is the return type? What gets called? Does it happen at compile time?
[13:42:28] <ChrisMorgan> cmr: I don't understand. These are just literals.
[13:42:32] <SiegeLord> I'm with bstrie, I think it should be a syntax extension
[13:42:36] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Ping timeout)
[13:42:37] <cmr> ChrisMorgan: What's the type of the literal?
[13:42:41] <cmr> How does it get evaluated?
[13:42:50] <Sharp> Wait, what does it make more complex?
[13:43:03] <SiegeLord> Rust
[13:43:09] <cmr> ChrisMorgan: What is allowed in the non-prefix part of the literal?
[13:43:16] <Sharp> Reading it, you mean?  I think parsing it wouldn't be that different.
[13:43:51] <cmr> Arbitrary base literals doesn't just mean numeric bases, it means *arbitrary* bases.
[13:44:04] <Sharp> Wait
[13:44:06] <Sharp> Like, unicode?
[13:44:26] <Sharp> Like I could write stuff in base 1037?
[13:44:30] <ChrisMorgan> cmr: it depends a little on how you decide to represent it. Put the radix first in decimal and you're out of trouble at that end. For example, you might have 4r0123.
[13:44:49] <cmr> Sharp: more like user-defined literals in C++
[13:45:14] <ChrisMorgan> For it to be reasonable, you'll need to stop at base 62.
[13:45:20] <cmr> That's not arbitrary
[13:45:31] <ChrisMorgan> It *is* arbitrary, just bounded.
[13:45:33] <cmr> Well, it is, but it's not arbitrary bases :p
[13:45:37] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[13:45:39] <Sharp> Wow I totally did not know about that C++ feature
[13:45:50] <SiegeLord> Arbitrary limit to an arbitrary feature :P
[13:46:18] <cmr> I agree they're useful, but we have syntax extensions so we don't *have* to extend the language proper for these sorts of things.
[13:46:20] <ChrisMorgan> Then there's the matter of the type suffix (e.g. how would one parse 62r0u32?)
[13:47:01] <Sharp> The type suffix isn't part of the literal, is it?
[13:47:05] <strcat> Sharp: sure, C++11 added user-defined literals and now C++14 had to add digit separators as *commas*
[13:47:18] <Sharp> Dear god.
[13:47:21] <SiegeLord> o_O
[13:47:25] <strcat> 1'000'000'000
[13:47:27] <strcat> C++14
[13:47:41] <strcat> (clang implements it)
[13:47:44] <bstrie> are we allowed to specify the base itself in an arbitrary base? 2r10r00101000?
[13:47:49] <ChrisMorgan> A syntax extension may be a suitable way of doing it, though perhaps not as "nice"; in fact, it would allow much more flexible bases.
[13:47:54] <ChrisMorgan> bstrie: now you're just being silly!
[13:48:10] <cmr> ChrisMorgan: doesn't look as pretty, but that's the tradeoff.
[13:48:27] <strcat> Sharp: http://clang.llvm.org/cxx_status.html just glance over the huge list ;p
[13:48:30] <SiegeLord> I don't think there's anything pretty about this XrY notation :P
[13:48:32] <Sharp> We should be able to specify numbers as self-computing Turing Machine encodings :P
[13:48:34] <strcat> they already finished C++14 draft support
[13:48:35] <ChrisMorgan> Sharp: the problem with a case like 62r0u32 is that 0u32 would be a valid base-62 literal—so should it be 0 as a u32 or 0u32 as a [type error]?
[13:48:48] <strcat> and those are just non-library features...
[13:48:49] *** Joins: bholley (anonymous@moz-A2189431.hsd1.ca.comcast.net)
[13:49:09] <Sharp> ChrisMorgan: That makes sense to me, I just didn't realize that 3u32 is a thing already in Rust
[13:50:07] <ChrisMorgan> Yeah, you have the suffixes [ui](8|16|32|64)?|f(32|64)
[13:50:25] <cmr> rusti: let x: float = 3;
[13:50:26] -rusti- <anon>:9:24: 9:25 error: mismatched types: expected `float` but found `<VI0>` (expected float but found integral variable)
[13:50:26] -rusti- <anon>:9          let x: float = 3;
[13:50:26] -rusti-                                  ^
[13:50:26] -rusti- error: aborting due to previous error
[13:50:27] -rusti- application terminated with error code 101
[13:50:37] <cmr> wut
[13:50:40] <bstrie> cmr: wtf is a float
[13:50:44] <Sharp> Heh.
[13:50:47] <Sharp> Floats were removed.
[13:50:53] <cmr> bstrie: I don't know if 0.8 was post or pre removal
[13:51:02] <bstrie> rusti isn't 0.8 though
[13:51:04] <bstrie> or did it get reverted
[13:51:05] <cmr> rusti: version
[13:51:06] -rusti- "rustc 0.8"
[13:51:06] <bstrie> cuz of bugs
[13:51:13] <bstrie> dammit rusti
[13:51:28] <cmr> 0.8 is better than nothing.
[13:51:33] <ChrisMorgan> Indeed it is.
[13:51:36] <Sharp> On the plus side, rusti is the only person in this room who knows the answer to 0.8 specific questions.
[13:51:38] <bstrie> I'm not so sure
[13:51:46] * ChrisMorgan wonders whether rusti should be renamed rusti-0.8 for the moment
[13:51:56] <strcat> if you make fun of rusti for being 0.8 he'll curl into a ball and get worse
[13:51:59] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[13:52:11] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[13:52:14] <strcat> look what you did!
[13:52:26] <strcat> rusti: version
[13:52:26] -rusti- playpen: execvpe: No such file or directory
[13:52:27] -rusti- application terminated with error code 1
[13:52:31] <strcat> haha
[13:52:35] * strcat sighs
[13:52:38] *** Quits: jvshahid (jvshahid@DFBC979C.A3446CDA.EB438161.IP) (Ping timeout)
[13:52:53] <ChrisMorgan> rusti: :-(
[13:52:53] -rusti- playpen: execvpe: No such file or directory
[13:52:53] -rusti- application terminated with error code 1
[13:52:54] * bstrie apologizes for hurting rusti's feelings
[13:53:04] <strcat> rusti: version
[13:53:05] -rusti- <anon>:11:4: 11:11 error: macro undefined: 'println'
[13:53:05] -rusti- <anon>:11     println!("{:?}", r)
[13:53:06] -rusti-               ^~~~~~~
[13:53:06] -rusti- application terminated with error code 101
[13:53:20] <strcat> it doesn't even work that far back ;p
[13:53:22] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[13:53:31] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[13:53:36] <Sharp> rusti: "\n/nick rusti-0.8"
[13:53:36] -rusti- "\n/nick rusti-0.8"
[13:53:37] <strcat> rusti: 0_0
[13:53:38] -rusti- 0
[13:54:13] * strcat finds it hilarious that C++ has 'auto x = foo()' and 'decltype(auto) x = foo()' now
[13:54:24] <strcat> 'auto' is broken, so they had to replace it already
[13:54:29] <bstrie> haha, what
[13:54:42] <bstrie> links please
[13:54:47] <strcat> so, C++11 added 'auto' for type inference from the RHS
[13:54:51] <bstrie> yeah
[13:54:59] <strcat> C++14 adds decltype(auto) because auto doesn't work right in some cases
[13:55:08] <Yoric> ...
[13:55:12] <Yoric> That's so C++
[13:55:13] <SiegeLord> lol...
[13:55:17] <Sharp> Heh.
[13:55:28] <strcat> well
[13:55:33] <strcat> and also it's used for return type deduction...
[13:55:36] <strcat> I think?
[13:55:40] * strcat could be wrong
[13:56:00] <strcat> http://scottmeyers.blogspot.ca/2013/07/when-decltype-meets-auto.html here
[13:56:17] <bstrie> In C++11, two methods of type deduction were added. auto was a way to create a variable of the appropriate type, based on a given expression. decltype was a way to compute the type of a given expression. However, the way decltype and auto deduce types are different. In particular, auto will always deduce a non-reference type, as though by using std::remove_reference, while auto&& will always deduce a reference type. However, decltype can be prodde
[13:56:43] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[13:57:27] <strcat> bstrie: well, for some reason they added http://en.cppreference.com/w/cpp/types/result_of too
[13:57:40] <strcat> I guess that's for template-style
[13:57:50] *** Joins: japaric (japaric@FEDDDB01.42146A62.CBF5D49D.IP)
[13:57:58] <bstrie> I'm quoting from https://en.wikipedia.org/wiki/C%2B%2B14#Alternate_type_deduction_on_declaration
[13:58:40] <strcat> C++14 is also going to add 2 new kinds of arrays
[13:58:49] <strcat> but no slices/views yet ;p
[13:58:58] <cmr> Because language explosion is clearly the answer to progress.
[13:59:01] <strcat> I guess iterators are supposed to cover that
[13:59:10] <SiegeLord> More explosions!
[13:59:10] *** Joins: canhtak (canhtak@moz-44AEB22E.wl.t.ulaval.ca)
[13:59:18] <strcat> cmr: yep, they'll have...
[13:59:20] <ChrisMorgan> cmr: KA-BOOM! And there goes C++. Oh no! What's left?
[13:59:40] <ChrisMorgan> Is it a bird? Is it a plane? (Well if it is, it's a little ____y.)
[13:59:45] <bstrie> ChrisMorgan: we'll all have to use objective-C now! nooooo
[13:59:47] <strcat> std::array (fixed-size), std::vector (dynamic), std::valarray (wut?), std::dynarray, runtime-sized arrays, fixed-size C arrays
[13:59:50] <strcat> and... maybe another
[13:59:52] <Yoric> I'm sure that there are still bits from some languages that C++ hasn't included.
[13:59:58] <Yoric> It's still missing some Python.
[14:00:04] <ChrisMorgan> bstrie: uh oh, that was *not* the direction that was supposed to go.
[14:00:15] <Yoric> Plus monadic support isn't robust yet.
[14:00:19] <Yoric> Just wait for C++15.
[14:00:25] <bstrie> C++17
[14:00:29] <ChrisMorgan> Yoric: I guess C++ just needs the converse of `from __future__ import braces`.
[14:00:35] <Yoric> :)
[14:00:40] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[14:00:53] <bstrie> in any case, I thought I heard that C++ templates were actually more expressive than haskell
[14:01:01] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[14:01:07] * ChrisMorgan discovered earlier today that in libsyntax the double underscore is called clown feet.
[14:01:08] <Sharp> strcat: Are any of those the alloca equivalent?  Dynamic?
[14:01:09] <cmr> bstrie: for certain values of expressive, yes.
[14:01:11] <strcat> bstrie: well, C++ templates are pretty damn expressive
[14:01:21] <strcat> Sharp: std::dynarray and runtime-sized arrays are alloca
[14:01:23] <bstrie> ChrisMorgan: clown *shoes*
[14:01:28] <Sharp> Ah, okay.
[14:01:30] <ChrisMorgan> Sorry, yeah, clown shoes.
[14:01:32] <strcat> the difference is that one is a C-like array and one is a proper container
[14:01:35] <strcat> why add both? who knows.
[14:01:40] <strcat> also they added it in a way that's not C99 compatible
[14:01:44] <Sharp> Because at least one person wanted it :P
[14:01:51] <strcat> Sharp: there was a proposal for a third kind too.
[14:01:59] <strcat> seems to have been retroactively retracted?
[14:02:09] <Sharp> I don't see why, what's the problem?
[14:02:14] <bstrie> "C++14: Still Not As Haphazard As PHP"
[14:02:19] <strcat> Sharp: they wanted another kind that would be able to not put huge ones on the stack
[14:02:36] <Sharp> What makes huge huge
[14:02:38] <strcat> implementation defined
[14:02:42] <Sharp> Ah.
[14:02:46] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[14:02:58] <ChrisMorgan> bstrie: PHP has been getting a little better in recent releases, actually. (I still don't want to use it, of course.)
[14:03:06] <strcat> Sharp: this is C++ we're talking about http://en.cppreference.com/w/cpp/numeric/math/nan
[14:03:11] <Sharp> And yes, it's funny to see so many clown shoes in rustc :P
[14:03:19] <strcat> 'implementation-defined character string'
[14:03:22] <strcat> so useful
[14:03:27] <cmr> ...
[14:03:31] <cmr> well that's great
[14:03:36] <Sharp> Hahaha
[14:03:43] <Sharp> Weren't you complaining about C doing something similar?
[14:03:48] <strcat> cmr: also, the C++11/C11 unicode support doesn't have to be unicode
[14:03:53] <strcat> they added uchar.h
[14:03:55] *** Joins: bynaryshef (bynaryshef@moz-EA9AD1CC.mem.bellsouth.net)
[14:04:00] <strcat> there's a macro saying where it's unicode
[14:04:21] <strcat> whether*
[14:04:52] *** Joins: mojibake (Mibbit@moz-A825E7E7.slkc.qwest.net)
[14:05:01] <strcat> (anyway they're generally pretty bad like that ;p)
[14:05:03] <Sharp> From my perspective: as long as the code that doesn't use a feature is still high quality, I see no reason why C++ shouldn't have as much shit in it as possible.  That's its whole purpose as a language.
[14:05:19] <strcat> Sharp: the reason for not having as much shit in it as possible is that they can never take it back
[14:05:20] <bstrie> it's true
[14:05:20] <Sharp> Pardon my language.
[14:05:38] <strcat> they can never change the library interfaces in a backwards incompatible way
[14:05:54] <strcat> they make bad decisions all the time (like anyone else) and are stuck with them.
[14:06:05] <Sharp> strcat: I suppose.  But it seems like most of the stuff they're adding is just sugar, right?  So at least it shouldn't affect performance.
[14:06:11] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[14:06:15] <bstrie> same as javascript nowadays. no more point in exercising restraint, just shove all that you can into it and see what sticks
[14:06:29] <strcat> they certainly gets thing far more right the first time than most other languages.... but there is no 2nd/3rd/4th time, like there is for something like python or D
[14:06:32] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[14:06:48] <cmr> bstrie: That's not true at all.
[14:07:02] <cmr> bstrie: Every decision made by the ES working group is very heavily debated and experimented with.
[14:07:20] <strcat> well, that's even more true of the C++ committee
[14:07:39] <strcat> a national body (lets say, Canada) can basically decide to shut something down afaik.
[14:07:41] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[14:07:41] <bstrie> cmr: I'm not accusing them of haphazardness, I'm accusing them of shrugging their shoulders and accepting the existence of redundant features with slightly improved semantics
[14:07:50] <cmr> bstrie: Such as?
[14:07:58] <Sharp> I sort of get the sense that a language can't escape this particular trap.  If it changes a lot (C++, JS) it's "oh they're just heedlessly making decisions with no thought to the future" and if they just stay static people complain about them not getting with the times.
[14:07:58] <bstrie> short function syntax
[14:08:01] <bstrie> for of
[14:08:02] <strcat> cmr: new kind of for loop
[14:08:05] <strcat> ;p
[14:08:20] <strcat> new map/set, but not removing objects (obviously)
[14:08:27] <strcat> I bet they'll end up adding real bound methods eventually
[14:08:51] <bstrie> cmr: and I'm not saying that's a bad thing! I wish them the best of luck
[14:09:41] <cmr> I love how make tidy decides it needs to update and reconfigure all of the submodules.
[14:09:51] <bstrie> although it's not like C++ doesn't *also* have legions of smart people working on its standards, and they still seem to manage to deprecate half the features of every previous release with each new release
[14:10:33] <strcat> bstrie: idiomatic C++ changed more from C++98 -> C++11 than rust has from 0.4 -> now
[14:10:43] <strcat> except they can't drop features. or even change a method signature
[14:11:00] <strcat> so it's no wonder that it's so complex (and it was complex before!)
[14:11:49] <Sharp> The problem is that people expect C++ to be performant, I think :P  Otherwise it would be much easier to give everyone what they want.
[14:11:57] <SiegeLord> The fact that C++ is designed by C++ experts is the problem... they can assimilate the extra complexity into their understanding, because they already spent years understanding what came before...
[14:12:26] <strcat> the new features are usually easier to use than the old ones, but the old ones stay around along with all their interactions with the new features
[14:12:49] *** Joins: jvshahid (jvshahid@DFBC979C.A3446CDA.EB438161.IP)
[14:15:05] *** Joins: a_m0d (dschoof@moz-A861BB8.coyotecorp.com)
[14:16:09] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[14:16:24] <Sharp> Personally, I've never badly wanted any syntactic feature that couldn't be implemented with LISP macros (yeah, parentheses blah blah).  Unfortunately that isn't always performant and everybody hates LISP :P
[14:16:48] <Earnestly> Not everyone hates lisp
[14:16:55] <Earnestly> ._.
[14:17:00] <cmr> all the cool kids like lisp
[14:17:01] <Yoric> strcat: Yeah, that's one of my major problems with JS actually. It makes sense, but it's annoying.
[14:17:25] <cmr> Yoric: it's simple (except where coercions come into play) but limited, at least ES <= 5
[14:17:32] <strcat> cmr: fixing that test case was as easy as removing the assertion, but it didn't fix my use case in rust-core ;[
[14:17:45] <strcat> task 'rustc' failed at 'assertion failed: !ty::type_has_params(t)', /home/strcat/projects/rust/src/librustc/middle/trans/common.rs:1117
[14:17:47] <cmr> strcat: what was the further failure?
[14:17:49] <cmr> ah
[14:17:54] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[14:18:33] <strcat> cmr: http://ix.io/8WQ/diff it'd be so nice if it worked ;p
[14:19:31] <bstrie> oh, I think I get it now. the point of decltype(auto) is so that you can type-infer your type-inference
[14:19:36] <bstrie> insert xzibit quote
[14:20:09] <strcat> let x = spawn(foo); let y = spawn(bar); (x.join(), y.join()), where the threads can directly return results is a pretty nice API
[14:20:10] *** Joins: tudor (tudor@moz-233C4930.hsd1.ca.comcast.net)
[14:20:13] <strcat> considering it is safe
[14:20:32] <strcat> just need a thread pool abstraction + some rustc magic for safe data parallelism ;p
[14:20:56] <Sharp> Is there a reason it's (x.join(), y.join()) and not (x,y).join()?
[14:21:20] <cmr> Sharp: one is possible to implement properly, one is not :p
[14:21:31] <cmr> can't have nary tuples without a separate impl for each
[14:21:39] <strcat> Sharp: join as in join the thread
[14:21:42] <Sharp> Fair enough.
[14:22:00] <strcat> you'd rarely actually make a tuple from the results
[14:22:11] <bstrie> strcat: is that implemented?
[14:22:16] <Sharp> Yeah, I was pretty sure that was what you meant strcat, but join() blocks until the value comes in right?
[14:22:21] <strcat> bstrie: in rust-core ;p
[14:22:23] <Sharp> So quite frequently you'd want to run it on a tuple.
[14:22:24] <bstrie> ah
[14:22:28] <strcat> Sharp: yes, it blocks
[14:22:41] <strcat> it also runs join in the dtor and blocks if you ignore it, detached threads will be separate
[14:22:52] <Sharp> Oh, nice.
[14:23:15] <strcat> the alternative is detach in the dtor like C++ std::thread which is dumb
[14:23:19] <cmr> dbaupp: r? https://github.com/mozilla/rust/pull/10358
[14:23:30] <strcat> C++'s std::thread is a really stupid API imo
[14:23:32] <strcat> so...
[14:23:34] <strcat> you do
[14:23:37] <strcat> std::thread foo(x);
[14:23:46] <strcat> and basically all you do with that handle is a) join or b) detach
[14:23:49] <strcat> usually you want to join
[14:23:56] <strcat> the dtor kindly calls detach
[14:23:57] <Sharp> Fits well with Rust's approach to error handling, namely that you don't get to just ignore potential problems :P
[14:24:15] <strcat> Sharp: well, join won't have problems
[14:24:25] <Sharp> I meant "returning without joining"
[14:24:25] <strcat> it's just that if you don't join or detach, it leaks ;p
[14:24:29] <strcat> ah
[14:24:39] <strcat> it's more to preserve ownership of the thread
[14:25:05] <strcat> with detached threads, dropping off main is going to kill a bunch of active threads
[14:25:22] <Sharp> How are detached threads being handled?
[14:25:23] <strcat> unless I wrap main to call pthread_exit, and then main is no longer where the process ends
[14:25:40] <Sharp> From an ownership perspective, I mean.
[14:25:44] <strcat> Sharp: well, they aren't owned
[14:25:49] <strcat> that's what detached means ;p
[14:26:01] <Sharp> They aren't owned by the process or something?
[14:26:08] <strcat> well they are part of the process
[14:26:22] <strcat> dropping off main calls exit()
[14:26:31] <strcat> which kills every active thread, whether or not they are done
[14:26:41] <Sharp> Right.
[14:27:19] <strcat> anyway not exactly sure yet
[14:27:27] <strcat> detached threads seem pretty evil though, for rust
[14:27:40] <strcat> it is *safe* to exit anywhere, but it's ugly
[14:28:13] <strcat> the stdlib tasks are basically equivalent to detached threads with pthread_exit at the bottom of main :)
[14:28:28] *** Quits: diegoyam_ (quassel@FF9B1514.A4EC3D18.3A1EC144.IP) (Ping timeout)
[14:28:29] <Sharp> Detached threads are kind of important though, I was just curious how they were going to be done.
[14:28:40] *** Quits: canhtak (canhtak@moz-44AEB22E.wl.t.ulaval.ca) (Quit: canhtak)
[14:29:02] <strcat> Sharp: spawn_detached -> pthread_create + pthread_detach, and hide it behind a cfg sticking pthread_exit at the bottom of main? I guess
[14:29:18] <strcat> or always allow them
[14:29:25] *** Quits: Daniel_S (Daniel@moz-5B58D8B7.dhcp.snlo.ca.charter.com) (Quit: Leaving)
[14:29:37] <Sharp> I guess that would work.
[14:30:05] <Sharp> That's kind of weird though.
[14:30:10] <strcat> why? ;p
[14:30:19] <Sharp> Do we normally stick things from totally different functions in the CFG for main? :P
[14:30:28] <strcat> well, rust-core doesn't
[14:30:37] <strcat> with the stdlib you don't get to define the real main
[14:30:57] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[14:31:02] <Sharp> I vaguely recall that C has some number of hooks you can attach that always get run before and after main
[14:31:07] *** Joins: GeneralMaximus (ankur@728B23F2.E8A26698.BE90E62C.IP)
[14:31:13] <strcat> so, #[start] gets passed argc/argv
[14:31:22] <Sharp> Right.
[14:31:24] <strcat> #[lang = "start"] gets passed a main function to wrap, argc and argv
[14:31:26] <cmr> Sharp: not standard C, besides atexit
[14:31:38] <Sharp> Yeah, probably thinking of (horribly) nonstandard features here.
[14:31:38] <strcat> stdlib uses lang = "start"
[14:31:49] <strcat> cmr: at_quick_exit!!
[14:31:53] <cmr> GNU (and ELF) have initializers/finializers
[14:32:08] <strcat> they'll add at_quicker_exit soon enough
[14:32:16] <strcat> cmr: http://en.cppreference.com/w/cpp/utility/program :D
[14:32:23] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[14:32:26] <cmr> strcat: ... oh them.
[14:32:31] <Sharp> :(
[14:32:35] <strcat> too many at_exit handlers -> need a faster way to exit, still needs at_exit handlers
[14:32:43] <Sharp> lol
[14:32:55] <Sharp> This will go on indefinitely
[14:33:04] <Sharp> They might as well just adopt a naming convention that reflects this fact
[14:33:08] <Sharp> at_exit_xx
[14:33:13] <Sharp> For the version of C++ :P
[14:33:19] <strcat> it's basically a way to exit with only *your* handlers running
[14:33:22] <Sharp> Future proof your code by targeting the quickest available exit!
[14:33:28] <strcat> but once people start using quick_exit...
[14:33:31] <Sharp> Right.
[14:33:42] *** Joins: canhtak (canhtak@moz-44AEB22E.wl.t.ulaval.ca)
[14:34:18] <Sharp> Isn't there a preferential voting theorem that basically says that coming to a consensus between all these programs is impossible in general?
[14:34:22] <Sharp> Er, all these interfaces.
[14:35:07] <eddyb> wasn't this merged? https://github.com/mozilla/rust/issues/9881
[14:35:23] <Sharp> Seems to me that if you really want your function to run first / last, you have to have control of the entire stack.
[14:35:30] <Sharp> And otherwise you might as well just give up on that.
[14:35:34] <eddyb> I mean, I remember a full PR on that
[14:36:06] *** Joins: diegoyam (quassel@FF9B1514.A4EC3D18.3A1EC144.IP)
[14:37:13] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Ping timeout)
[14:37:14] <strcat> cmr: meh, removing the assert didn't really work
[14:37:20] <strcat> the types don't match!
[14:38:11] <cmr> Every time I write code that does non-trivial things like derefence a pointer or call a method on Option and it works the first time I'm amazed.
[14:38:27] <eddyb> yeah, https://github.com/mozilla/rust/pull/9967 should've closed #9881
[14:40:18] *** Quits: jvshahid (jvshahid@DFBC979C.A3446CDA.EB438161.IP) (Ping timeout)
[14:40:36] <cmr> indutny: strcat: r? https://github.com/mozilla/rust/pull/10358
[14:45:42] *** Joins: darkowlzz (sunny@2D730B43.15D34F31.27560D6E.IP)
[14:47:28] <cmr> strcat: I like the example for Iterator::advance is a bog-standard `count`, unrealted to the old for-loop protocol :P
[14:49:00] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Ping timeout)
[14:50:08] *** Quits: GeneralMaximus (ankur@728B23F2.E8A26698.BE90E62C.IP) (Quit: Computer has gone to sleep.)
[14:50:09] *** Joins: jvshahid (jvshahid@DFBC979C.A3446CDA.EB438161.IP)
[14:52:07] *** Quits: bynaryshef (bynaryshef@moz-EA9AD1CC.mem.bellsouth.net) (Quit: Leaving)
[14:52:48] <cmr> So if I have a call to `Zero::zero()` a bunch of times in some nested and conditions, can I expect LLVM to hoist that all the way out of them and use a cached value?
[14:53:16] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[14:54:59] <cmr> I suppose it could only do that if it knew zero() was side-effect-free.
[14:55:20] *** Quits: joone_ (joone@moz-C50DC051.jf.intel.com) (Ping timeout)
[14:55:56] *** Joins: joone_ (joone@2678A73.2160464A.A34EC3BB.IP)
[14:57:20] *** Joins: eddyb9 (eddy@336E3A7F.D51DAF03.FB866788.IP)
[14:57:41] *** Joins: lkuper (lkuper@moz-54129201.dhcp-bl.indiana.edu)
[14:59:11] *** Joins: strcat1 (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[14:59:37] <cmr> But if it inlines it it should know that information
[15:00:02] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[15:00:02] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[15:00:47] *** Quits: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP) (Ping timeout)
[15:01:11] *** Joins: bynaryshef (bynaryshef@moz-EA9AD1CC.mem.bellsouth.net)
[15:01:53] *** Joins: lfox (lfox@moz-343B6F0C.nyc.biz.rr.com)
[15:02:07] *** Quits: jvshahid (jvshahid@DFBC979C.A3446CDA.EB438161.IP) (Ping timeout)
[15:02:29] <strcat1> cmr: LLVM runs a function attribute pass marking stuff readnone/readonly/nounwind
[15:02:34] <strcat1> unwinding is rust's biggest issue there
[15:02:43] <strcat1> if it can unwind, it has an effect
[15:02:45] *** strcat1 is now known as strcat
[15:03:01] <strcat> any call to a foreign function not on LLVM's list of libcalls -> may unwind
[15:03:21] <strcat> lots of C libraries mark stuff as nothrow in headers
[15:03:23] *** Joins: StarLight (StarLight@moz-A9906031.dynamic.avangarddsl.ru)
[15:03:25] *** Joins: StarLigh1 (StarLight@moz-A9906031.dynamic.avangarddsl.ru)
[15:03:30] *** Quits: StarLigh1 (StarLight@moz-A9906031.dynamic.avangarddsl.ru) (Quit: StarLigh1)
[15:03:42] <strcat> not portable but... macros handle that fine ;p
[15:03:43] *** Joins: StarLigh1 (StarLight@moz-A9906031.dynamic.avangarddsl.ru)
[15:03:51] *** Joins: bjustin (bjustin@moz-8FC28563.sierrabravo.net)
[15:04:22] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[15:04:23] *** ChanServ sets mode: +ao dherman dherman
[15:04:31] <nuts> rha, I've a new problem, I use rust from master but use std::rt::fs => error: unresolved import: there is no `fs` in `std::rt`
[15:05:14] <bstrie> nuts: I think it's std::rt::io::fs
[15:05:20] *** Joins: johanna (chatzilla@1563D1DD.81B50CCB.5DB860A5.IP)
[15:05:30] <bstrie> such an inscrutable string of characters
[15:05:53] *** Quits: avsej (avsej@DF1824D5.EFF97412.48F984E6.IP) (Client exited)
[15:06:12] <johanna> Hi Everyone. I'm new to Rust (started on monday) -expect beginners questions from me ;-)
[15:06:21] *** Quits: eddyb9 (eddy@336E3A7F.D51DAF03.FB866788.IP) (Ping timeout)
[15:06:42] <nuts> right, I don't why I find std::rt::fs instead of rt::io::fs my bad
[15:06:49] <bjz> johanna: o/
[15:06:53] <bstrie> johanna: this is the place for questions!
[15:07:02] <bstrie> otherwise we would not bother answering them
[15:07:02] <bjz> johanna: feel free to ask things
[15:08:29] *** Joins: mark_edward (quassel@moz-DCB0B750.lightspeed.cicril.sbcglobal.net)
[15:08:50] <johanna> Rust has a fuzz testing tool. Anyone where is the location of the code
[15:09:01] <bstrie> hm, I don't think we've had a fuzz testing tool for a long, long time
[15:09:04] <bstrie> that was like, rust 0.2
[15:09:14] <johanna> yes its kind of long time
[15:09:21] <bstrie> I hope you are not using rust 0.2!
[15:09:40] <johanna> bstrie: no, I want to work on that
[15:09:54] <johanna> I want to revive the fuzzer  tool
[15:10:01] *** Joins: Kruppe (user@moz-9A6FCE9E.cable.teksavvy.com)
[15:10:02] <bstrie> aha
[15:10:08] <bstrie> I wonder if there is an issue for that somewhere
[15:11:20] *** Joins: eddyb9 (eddy@336E3A7F.D51DAF03.FB866788.IP)
[15:12:21] *** Quits: canhtak (canhtak@moz-44AEB22E.wl.t.ulaval.ca) (Quit: canhtak)
[15:12:28] *** Joins: fyolnish (fyolnish@moz-BDF474D8.uqwimax.jp)
[15:12:41] <johanna> is the code with the fuzzer excluded from the actual rust repo?
[15:13:02] <bstrie> johanna: back in the old days we used to have a "libfuzzer" directory that lived in the rust repo
[15:13:18] *** Quits: heftig (heftig@moz-E8E2034C.inf.fh-bonn-rhein-sieg.de) (Quit: Quitting)
[15:13:43] *** Joins: heftig (heftig@moz-E8E2034C.inf.fh-bonn-rhein-sieg.de)
[15:14:08] *** Joins: canhtak (canhtak@moz-44AEB22E.wl.t.ulaval.ca)
[15:14:09] *** Quits: fyolnish (fyolnish@moz-BDF474D8.uqwimax.jp) (Ping timeout)
[15:14:09] *** Joins: ianj (ianjneu@moz-7140CF01.ccs.neu.edu)
[15:14:57] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Client exited)
[15:15:18] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[15:16:19] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[15:16:27] <johanna> so the code is not there anymore?
[15:16:30] <johanna> :-(
[15:16:31] <bstrie> johanna: see https://github.com/mozilla/rust/issues/2736 and https://github.com/mozilla/rust/issues/414
[15:16:39] <bstrie> johanna: though those bugs are pretty sparse in general
[15:16:53] <bstrie> johanna: the code exists in version control. let me try to track it down
[15:16:58] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[15:17:04] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Ping timeout)
[15:17:19] <bjz> johanna: if the code was from 0.2, as bstrie says, it won't be of much use
[15:17:20] <bstrie> johanna: though note that the code probably won't be very useful. the old fuzzer probably worked by mutating the AST, and I imagine our AST has changed significantly since then
[15:17:28] <bstrie> but I've never written a fuzzer, so who knows
[15:18:19] <johanna> I can imagine, so basically I'll need to build it from scratch
[15:18:32] <bjz> johanna: even besides the changes to the AST, the languages has changed a great deal
[15:18:34] *** Quits: StarLight (StarLight@moz-A9906031.dynamic.avangarddsl.ru) (Quit: Lost terminal)
[15:18:34] <bjz> yep
[15:18:40] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[15:19:13] *** StarLigh1 is now known as StarLight
[15:19:50] <bstrie> johanna: looks like libfuzzer survived until 0.6, though I doubt it was still being used then
[15:19:53] <bstrie> johanna: https://github.com/mozilla/rust/tree/00dbbd01c2aee72982b3e0f9511ae1d4428c3ba9/src/libfuzzer
[15:20:27] <bstrie> johanna: have you already clone the rust repo?
[15:20:31] <bstrie> *cloned
[15:20:46] <johanna> yes
[15:20:56] <johanna> I worked on an issue in servo
[15:21:01] <bstrie> cool
[15:21:17] <johanna> an easy one for beginners ;-)
[15:21:28] <bstrie> I really wanna tackle an easy servo issue
[15:21:32] <bstrie> one of these days...
[15:22:17] <johanna> but I'm moving to more complex one and want to take a lib or project to work on dedicated
[15:22:18] <bstrie> johanna: so yeah, maybe you can use the code in the 0.6 tag as a rough base of how to structure it. though I can't help much beyond that
[15:22:44] <bstrie> johanna: you should also join the #rust-internals channel, which is where more of the compiler devs hang out
[15:22:46] <johanna> bstrie: you mean the libfuzzer right?
[15:22:50] <bstrie> yeah
[15:23:18] <johanna> bstrie: you  are right. I'm gonna check that right now :-)
[15:23:50] <bstrie> I mean, most of the devs are also in here. but specific questions about the AST will probably get more response there
[15:23:58] <bstrie> ...but only once all the devs are actually awake :P
[15:24:40] *** Joins: jvshahid (jvshahid@DFBC979C.A3446CDA.EB438161.IP)
[15:25:31] *** Quits: flowsnake (flowsnake@moz-E4E567EE.aztw.cable.virginm.net) (Ping timeout)
[15:25:44] *** Joins: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net)
[15:27:04] *** Joins: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net)
[15:27:34] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[15:29:17] *** Joins: flowsnake (flowsnake@moz-E4E567EE.aztw.cable.virginm.net)
[15:29:48] *** Quits: a__ (a__@moz-56DB9895.nycmny.fios.verizon.net) (Client exited)
[15:30:06] *** Joins: Scriptor (anonymous@moz-E06F46F0.corp.bitshelter.com)
[15:30:29] *** Quits: tudor (tudor@moz-233C4930.hsd1.ca.comcast.net) (Quit: Leaving)
[15:30:29] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[15:32:01] *** Joins: lmandel (lmandel@13F2CEC5.7672369.D8E68FF6.IP)
[15:33:10] *** pmoore is now known as pmoore|away
[15:33:21] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[15:34:51] *** Joins: nwmcsween (nwmcsween@E0025B86.51EE1362.3655BBF5.IP)
[15:35:03] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[15:39:24] *** Quits: heftig (heftig@moz-E8E2034C.inf.fh-bonn-rhein-sieg.de) (Quit: Quitting)
[15:39:26] *** Joins: pnathan (Adium@moz-5EF6A514.tukw.qwest.net)
[15:39:53] *** pmoore|away is now known as pmoore
[15:39:59] *** Quits: Kxepal (Miranda@moz-95B10DEC.pppoe.mtu-net.ru) (Ping timeout)
[15:40:31] *** zz_kimundi is now known as kimundi
[15:41:46] *** Joins: a__ (a__@moz-56DB9895.nycmny.fios.verizon.net)
[15:42:29] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[15:43:29] *** Joins: Kxepal (Miranda@moz-AE08CD94.pppoe.mtu-net.ru)
[15:43:52] *** Joins: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu)
[15:45:00] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[15:46:45] *** Quits: jvshahid (jvshahid@DFBC979C.A3446CDA.EB438161.IP) (Ping timeout)
[15:48:27] *** Quits: Kruppe (user@moz-9A6FCE9E.cable.teksavvy.com) (Ping timeout)
[15:49:26] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[15:49:45] *** Joins: sweet_kid (Upasana@38DC0908.ADD6300A.388CF16F.IP)
[15:49:46] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[15:50:01] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[15:50:21] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[15:54:35] *** Joins: Jesin (Jessin_@moz-5C1F7BD2.res.lehigh.edu)
[15:55:07] *** Joins: tudor (tudor@moz-233C4930.hsd1.ca.comcast.net)
[15:56:02] *** Joins: purkinje (Mibbit@C77B46D2.D3CF842A.3225B490.IP)
[16:00:34] *** Quits: fmtq (fmt@moz-5769BD38.static.tpgi.com.au) (Client exited)
[16:01:07] *** Quits: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu) (Quit: maxiepoo)
[16:05:17] *** Joins: tautologico (lymph@703660AA.CFE755C8.C27E1635.IP)
[16:06:19] *** Joins: kellogh (timkellogg@moz-68DF7EF7.teliax.com)
[16:07:48] *** jorendorff_away is now known as jorendorff
[16:07:59] *** Joins: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu)
[16:09:13] *** Joins: idog98 (idog98@moz-E3F1D7ED.guilhem.org)
[16:11:41] *** Joins: avsej (avsej@D9A610B8.4841F515.FB33447D.IP)
[16:12:30] <purkinje> Anyone else here?
[16:12:39] <Ms2ger> No
[16:12:46] <bstrie> Hm... nope
[16:12:51] <tiffany> nope
[16:12:58] <idog98> .
[16:12:58] <nif> definitely not.
[16:13:10] <purkinje> haha okay, just making sure i got in.
[16:14:51] <nuts> What is missing field 'variadic' build error?
[16:15:01] <nuts> what that means?
[16:15:24] <bstrie> nuts: never heard of it
[16:15:28] <bstrie> paste the whole error
[16:16:00] <kimundi> I'm not here too
[16:16:14] <bstrie> kimundi *definitely* isn't here
[16:16:20] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[16:16:37] <nuts> I try to build this: https://github.com/crabtw/rust-bindgen
[16:16:40] <nuts> and the error is
[16:16:48] <nuts> http://pastealacon.com/33467
[16:16:50] *** Joins: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net)
[16:17:15] *** Joins: jvshahid (jvshahid@DFBC979C.A3446CDA.EB438161.IP)
[16:17:51] *** Quits: six600110 (six600110@moz-C663577C.hsd1.il.comcast.net) (Connection reset by peer)
[16:18:00] <bstrie> nuts: ah, I'm going to be building bindgen myself shortly, once I finish compiling today
[16:18:03] <bstrie> I'll look into it
[16:18:12] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[16:18:24] <bstrie> nuts: keep in mind that bindgen generally tracks very specific versions of rust... and it's not always easy to figure out which
[16:18:59] <bstrie> nuts: are you using the rust master branch?
[16:19:47] *** Joins: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net)
[16:19:54] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[16:20:19] <nuts> bstrie: yes I use master branch
[16:20:26] <nuts> and I think bindgen too
[16:20:36] <bstrie> I'll try it once I'm done building
[16:20:49] *** Quits: Ferreus (ferreus@moz-AB73FEA6.dip0.t-ipconnect.de) (Ping timeout)
[16:21:16] <nuts> because It use std::rt::io::fs, this aren't available in rust 0.8 (I failed to build before with rust 0.8)
[16:22:49] <tautologico> is there a way to print the metadata that rustc compiles into a lib crate?
[16:23:29] <nuts> bstrie: I really don't understand, this build error's
[16:24:45] <bstrie> nuts: we recently added support for variadic C functions
[16:30:09] <nuts> I see
[16:30:56] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[16:31:02] <nuts> support stdarg?
[16:32:10] *** Quits: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu) (Ping timeout)
[16:32:27] *** Quits: tgummerer (tgummerer@moz-582025B2.members.linode.com) (Ping timeout)
[16:33:49] *** pmoore is now known as pmoore|away
[16:36:08] *** Joins: anshin (anshin@CD85F10D.F21429E2.354459FA.IP)
[16:37:02] *** Quits: kellogh (timkellogg@moz-68DF7EF7.teliax.com) (Quit: kellogh)
[16:39:05] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Ping timeout)
[16:39:30] *** pmoore|away is now known as pmoore
[16:40:00] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[16:42:34] *** Joins: heftig (heftig@moz-76BC6A3B.dip0.t-ipconnect.de)
[16:44:02] <bstrie> nuts: where did you get your copy of clang from? I ask because it's been a while since I built bindgen :P
[16:45:29] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[16:46:05] <nuts> bstrie: I get it from gentoo portage tree
[16:46:17] <nuts> clang version 3.3 (tags/RELEASE_33/final)
[16:47:35] <bstrie> hm, my sources only have clang 3.2 :(
[16:47:43] <bstrie> gotta check it out manually I guess
[16:49:38] <nuts> "ast" module is from clang?
[16:49:41] *** Joins: themgt (themgt@moz-83F07CDA.cm.vtr.net)
[16:50:30] <bstrie> I don't know anything about clang
[16:50:45] <nuts> me too :(
[16:50:55] *** Joins: kellogh (timkellogg@moz-68DF7EF7.teliax.com)
[16:53:01] <SiegeLord> ast is from libsyntax
[16:54:31] <bstrie> building clang right now
[16:54:40] <nuts> bstrie: thanks
[16:54:52] <bstrie> a long, long time ago, clang came bundled with rust
[16:55:09] <bstrie> and I always just used that with bindgen :)
[16:56:42] *** Quits: jvshahid (jvshahid@DFBC979C.A3446CDA.EB438161.IP) (Ping timeout)
[16:57:15] <nuts> You have clang only for bindgen?
[16:57:37] *** Parts: nif (Mibbit@moz-B6DFA19D.wireless.oberlin.edu) ()
[16:57:38] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[16:58:42] *** Quits: KindOne (KindOne@moz-73A4C238.dynamic.ip.windstream.net) (Ping timeout)
[16:58:45] *** Joins: alan (alan@moz-FE02DD30.sat6.rackspace.com)
[16:59:05] *** Quits: lkuper (lkuper@moz-54129201.dhcp-bl.indiana.edu) (Quit: lkuper)
[16:59:10] *** Joins: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP)
[17:01:56] *** Quits: lfox (lfox@moz-343B6F0C.nyc.biz.rr.com) (Quit: ZZZzzz…)
[17:02:05] *** Joins: nejucomo (Adium@9F0867A2.BB950596.DFB232DA.IP)
[17:02:33] *** Joins: KindOne (KindOne@FFC433AA.35741547.34F73994.IP)
[17:02:45] *** Joins: pcwalton (pcwalton@moz-B51927E9.hsd1.ca.comcast.net)
[17:02:45] *** ChanServ sets mode: +ao pcwalton pcwalton
[17:04:38] *** Joins: jvshahid (jvshahid@DFBC979C.A3446CDA.EB438161.IP)
[17:05:39] *** Quits: Voomer_ (Voomer@moz-CC05FF5E.hsd1.wa.comcast.net) (Connection reset by peer)
[17:05:41] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[17:06:26] <bstrie> ugh clang doesn't even want to build
[17:06:30] *** Joins: valenting (Thunderbir@590D2376.7E118222.89C0DD0D.IP)
[17:06:32] <bstrie> yak shaviiiing
[17:07:00] <nuts> rha
[17:07:34] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[17:09:06] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[17:09:43] *** Quits: KindOne (KindOne@FFC433AA.35741547.34F73994.IP) (Ping timeout)
[17:09:56] <nuts> bstrie: do you have the last revision of bindgen?
[17:10:31] <bstrie> yeah
[17:10:34] <bstrie> still building clang
[17:10:42] <bstrie> it didn't like compiling with -j8
[17:10:52] *** Quits: eddyb (eddy@336E3A7F.D51DAF03.FB866788.IP) (Ping timeout)
[17:11:04] <eddyb9> bstrie: yay broken build system
[17:11:39] <nuts> you're lucky! on my computer if I try something higter than -j2, my computer shut down^^
[17:11:43] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[17:12:12] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Quit: Leaving...)
[17:12:30] <bstrie> eddyb9: llvm itself is fine building with -j8!
[17:12:40] <bstrie> I figured the clang devs would have the same discipline
[17:12:44] <eddyb9> nuts: is it heating up?
[17:12:46] <klutzy> your third core is super lazy :o
[17:13:28] *** Joins: KindOne (KindOne@moz-B7437C7B.dynamic.ip.windstream.net)
[17:13:56] <nuts> eddyb9: yes :(
[17:14:06] <eddyb9> I don't even dare to take my laptop GPU off underclocking, without having my huge fan turned on
[17:15:04] <eddyb9> and I can have the fan running only during the summer, so only when it's hot outside I can get 50°C
[17:15:22] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[17:15:43] <eddyb9> in the winter, with all the insulation and heating, it can go up to 80ish without much load :(
[17:15:57] *** Quits: yota (sdouche@moz-7D878FB8.securactive.net) (Quit: Ex-Chat)
[17:16:11] *** Quits: tudor (tudor@moz-233C4930.hsd1.ca.comcast.net) (Quit: Leaving)
[17:16:30] *** Joins: lfox (lfox@moz-343B6F0C.nyc.biz.rr.com)
[17:16:44] <nuts> I
[17:16:47] <eddyb9> it just stops if I start using the GPU intensively, and I can't even monitor the actual GPU temp properly, just the CPU one from acpi
[17:18:01] <nuts> without intensive use of GPU, it turns off.
[17:18:11] *** Joins: h0rrorvacui (h0rrorvacu@moz-5B34B08.sip.bhm.bellsouth.net)
[17:18:52] <nuts> so now I'm patient and I build only with -j1 or -j2 if the project isn't too big
[17:19:13] <nuts> but it's really painful
[17:20:10] *** Joins: rveach (kvirc@moz-E5095E39.hsd1.ca.comcast.net)
[17:20:23] <SiegeLord> Why not fix the problem :P
[17:20:45] <Ms2ger> Sounds like that involves make
[17:22:17] <bstrie> mwahaha, I think bindgen has built
[17:22:34] <nuts> I think to solve this, I should buy a new computer
[17:22:52] <nuts> bstrie: bad news for me^^
[17:22:59] *** Joins: mikezaby (mikezaby@moz-145CF3DD.home.otenet.gr)
[17:25:09] <bstrie> oh god
[17:25:11] <bstrie> this is clang 3.4
[17:25:13] <bstrie> welp
[17:25:20] <bstrie> let's see if anything goes wrong
[17:27:05] *** Joins: osa1 (omer@moz-63168A82.hsd1.in.comcast.net)
[17:27:27] *** Quits: canhtak (canhtak@moz-44AEB22E.wl.t.ulaval.ca) (Quit: canhtak)
[17:27:36] <osa1> can anyone help me, I can't subscribe to rust-dev mailing list. I tried 3 or 4 times now, I just don't get any confirmation mails.
[17:28:02] <bstrie> osa1: weid
[17:28:13] <bstrie> we id.
[17:28:19] <bstrie> *weird
[17:28:21] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[17:28:32] <SiegeLord> Isn't that email manual?
[17:28:35] <bstrie> osa1: ask either tjc or brson once they're online, they have access to it
[17:28:41] <osa1> okay
[17:29:57] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[17:31:48] <SiegeLord> It took me a day or two to register half a year ago...
[17:34:27] *** Joins: Ferreus (ferreus@moz-72964D2.pools.arcor-ip.net)
[17:35:39] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Client exited)
[17:36:00] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[17:36:56] *** Quits: jvshahid (jvshahid@DFBC979C.A3446CDA.EB438161.IP) (Ping timeout)
[17:37:46] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Ping timeout)
[17:38:11] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[17:38:47] <nuts> bstrie: I do, git pull on my local repos of bindgen
[17:39:16] <nuts> now, I've some trouble with libclang :D
[17:40:41] *** Joins: azakai (alon@moz-BBE3ABD.mv.mozilla.com)
[17:40:47] <nuts> like this
[17:40:47] <nuts> /usr/lib/llvm/libclang.so: undefined reference to `llvm::BumpPtrAllocator::~BumpPtrAllocator()'
[17:40:54] <nuts> but It's an another problem
[17:41:13] <bstrie> nuts: I followed these directions to get clang: http://clang.llvm.org/get_started.html\
[17:41:25] <bstrie> http://clang.llvm.org/get_started.html
[17:42:56] <nuts> thanks for the link
[17:43:07] *** Quits: pcwalton (pcwalton@moz-B51927E9.hsd1.ca.comcast.net) (Quit: pcwalton)
[17:43:55] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[17:44:15] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[17:45:50] *** Joins: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP)
[17:45:55] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[17:46:15] *** Joins: tgummerer (tgummerer@moz-582025B2.members.linode.com)
[17:47:10] *** Joins: arodier74 (Thunderbir@moz-25EB015.in-addr.btopenworld.com)
[17:48:28] *** Joins: boredomist (ruqs@8186917.CC8FA3EE.E3401B6E.IP)
[17:49:51] <pnkfelix> acrichto: regarding #10128, the backtrace() function gives me useful output.
[17:50:17] *** Quits: arodier74 (Thunderbir@moz-25EB015.in-addr.btopenworld.com) (Quit: arodier74)
[17:50:21] <acrichto> pnkfelix: were you compiling a library or executable?
[17:50:29] <pnkfelix> acrichto: ah, an executable
[17:50:29] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[17:50:35] <acrichto> whoa
[17:50:45] <acrichto> I would expect it to not give you useful output in that case
[17:50:53] <pnkfelix> acrichto: e.g. : https://gist.github.com/pnkfelix/7374846
[17:50:54] <acrichto> we mark all symbols as internal in an executable
[17:51:00] <pnkfelix> acrichto: no no, I'm talking about from C
[17:51:16] <acrichto> ah ok, I think that our flagging symbols as internal is causing us problems
[17:51:29] <pnkfelix> acrichto: okay, you noted such on the bug
[17:52:11] <pnkfelix> acrichto: I misinterpreted what sort of experimentation you had done.  You must have jumped straight into Rust
[17:52:39] <acrichto> deep ends first!
[17:52:52] *** Quits: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net) (Ping timeout)
[17:53:26] *** Quits: squiddy (squiddy@moz-1E9E1CA5.adsl.alicedsl.de) (Ping timeout)
[17:53:38] *** Quits: simlay (simlay@moz-1C72F8DD.hsd1.ca.comcast.net) (Ping timeout)
[17:54:40] <pnkfelix> acrichto: do you know how to mark functions as internal in C ?
[17:54:46] <pnkfelix> acrichto:  for e.g. gcc ?
[17:54:50] <acrichto> static
[17:54:52] <acrichto> at least I think
[17:55:04] <pnkfelix> acrichto: tried that first
[17:55:11] <pnkfelix> acrichto: it didn't seem to ruin the backtrace
[17:55:13] *** Quits: valenting (Thunderbir@590D2376.7E118222.89C0DD0D.IP) (Connection reset by peer)
[17:55:15] *** Joins: valenting (Thunderbir@590D2376.7E118222.89C0DD0D.IP)
[17:55:28] <pnkfelix> acrichto: oh wait
[17:55:35] <eddyb9> internal shouldn't ruin any backtrace, AFAIK
[17:55:50] <pnkfelix> acrichto: (well, maybe one of the functions got inlined)
[17:56:04] <pnkfelix> acrichto: i'll keep notes on the bug
[17:56:09] <acrichto> pnkfelix: yeah looks like static flags functions as 'internal'
[17:56:21] <acrichto> static int foo() { return 3 } =>  define internal i32 @foo() nounwind ssp uwtable {
[17:57:32] <pnkfelix> acrichto:  my recursive static function still shows up in the stack trace, but my non-recursive one, that I've marked as __attribute__((noinline)), does not show up in the stack trace
[17:58:07] <acrichto> interesting
[17:58:27] <acrichto> it's possible that we could change the internal-ness of functions based on whether debug-info is getting generated
[17:59:03] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[18:00:30] *** pmoore is now known as pmoore|away
[18:02:47] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[18:03:31] *** Quits: eddyb9 (eddy@336E3A7F.D51DAF03.FB866788.IP) (Ping timeout)
[18:04:56] *** Joins: dherman (dherman@moz-BBE3ABD.mv.mozilla.com)
[18:04:56] *** ChanServ sets mode: +ao dherman dherman
[18:05:09] *** Joins: FreeFull (freefull@D89A5B80.2CE4D4F4.159B5998.IP)
[18:06:53] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[18:07:13] *** Joins: eddyb9 (eddy@336E3A7F.D51DAF03.FB866788.IP)
[18:07:17] *** Quits: bynaryshef (bynaryshef@moz-EA9AD1CC.mem.bellsouth.net) (Ping timeout)
[18:07:53] *** Joins: bynaryshef (bynaryshef@moz-248325C5.mem.bellsouth.net)
[18:08:58] *** Joins: geoffhill (geoffhill@moz-738DC0DB.org)
[18:09:15] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[18:09:39] *** Quits: eddyb9 (eddy@336E3A7F.D51DAF03.FB866788.IP) (Quit: Leaving)
[18:10:20] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[18:13:39] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[18:13:39] *** ChanServ sets mode: +o tjc
[18:17:01] *** Quits: sk (sk@9E6B574B.EB2AA036.2CAF0D3B.IP) (Input/output error)
[18:17:33] *** Joins: jvshahid (jvshahid@DFBC979C.A3446CDA.EB438161.IP)
[18:18:40] *** Quits: bynaryshef (bynaryshef@moz-248325C5.mem.bellsouth.net) (Ping timeout)
[18:19:46] *** Joins: lkuper (lkuper@moz-54129201.dhcp-bl.indiana.edu)
[18:22:15] *** Joins: josh (josh@B71029CE.D6F172E7.2A2F4638.IP)
[18:23:17] *** Joins: bynaryshef (bynaryshef@moz-97E96350.mem.bellsouth.net)
[18:23:37] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[18:23:37] *** ChanServ sets mode: +ao brson brson
[18:23:54] *** Quits: rveach (kvirc@moz-E5095E39.hsd1.ca.comcast.net) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[18:23:57] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[18:25:32] *** Joins: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP)
[18:26:13] *** Quits: gavin (gavin@moz-DB4A9C19.scl3.mozilla.com) (Quit: leaving)
[18:26:18] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[18:26:18] *** ChanServ sets mode: +o tjc
[18:27:12] *** Quits: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[18:27:27] *** Joins: gavin (gavin@moz-DB4A9C19.scl3.mozilla.com)
[18:28:30] *** Joins: canhtak (canhtak@moz-44AEB22E.wl.t.ulaval.ca)
[18:28:59] *** Quits: CarpNet (ac@moz-FD24B77.sohonet.co.uk) (Quit: Leaving)
[18:31:07] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: Leaving.)
[18:31:21] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[18:31:52] *** Joins: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr)
[18:31:59] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[18:32:11] *** Quits: valenting (Thunderbir@590D2376.7E118222.89C0DD0D.IP) (Ping timeout)
[18:32:13] *** Quits: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[18:33:36] <mletterle> be nice to manually specify library locations for rustpkg...
[18:35:56] *** Quits: osa1 (omer@moz-63168A82.hsd1.in.comcast.net) (Ping timeout)
[18:37:53] *** Joins: ozten (ozten@moz-BC0C74E2.range86-174.btcentralplus.com)
[18:39:25] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[18:42:09] *** Joins: Person5328 (person5328@255B7720.B3E3CD5C.AEFEE4D5.IP)
[18:42:48] *** Parts: Person5328 (person5328@255B7720.B3E3CD5C.AEFEE4D5.IP) ()
[18:47:16] *** Quits: josh (josh@B71029CE.D6F172E7.2A2F4638.IP) (Quit: josh)
[18:50:04] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[18:50:24] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[18:50:59] *** Joins: willingc_ (willingc@moz-B4760708.san.res.rr.com)
[18:50:59] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Connection reset by peer)
[18:52:18] *** Quits: jvshahid (jvshahid@DFBC979C.A3446CDA.EB438161.IP) (Ping timeout)
[18:55:37] *** Quits: Sharp (Sharp@moz-7B61DF4.dsl.static.sonic.net) (Quit: Sharp)
[18:55:53] *** Quits: anshin (anshin@CD85F10D.F21429E2.354459FA.IP) (Ping timeout)
[18:57:19] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[18:57:27] *** Quits: sankha93|afk (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Ping timeout)
[18:59:11] <olsonjeffery> foreach(var val in some_collection_of_vals) { new Thread(() => DoSomethingWith(val)).Start(); } // c#
[18:59:35] <olsonjeffery> question: do you think the compiler copies *val* into the captured scope of that closure that invokes DoSomethingWith() ?
[18:59:59] <olsonjeffery> answer, by observation: concurrency related hijinks!
[19:00:18] *** Joins: sankha93|afk (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[19:00:41] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[19:01:26] <olsonjeffery> </grumpy>
[19:01:42] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[19:01:42] *** ChanServ sets mode: +o tjc
[19:02:01] *** Joins: jvshahid (jvshahid@DFBC979C.A3446CDA.EB438161.IP)
[19:03:37] <tikue_> olsonjeffery: is it by reference?
[19:04:12] <olsonjeffery> val isn't a reference type, if that's what you mean
[19:04:16] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Client exited)
[19:04:24] <olsonjeffery> im pretty sure the closure is taking a reference to the slot where val is stored, by observation
[19:04:49] <olsonjeffery> actually it might be, now that i think about it.
[19:05:11] <olsonjeffery> anyways. the perils of ill-conceived concurrency, part 3453469023098908234908234y680734587234-
[19:05:20] <bstrie> "13:57 <LexAckson> even with orb delay
[19:05:23] <bstrie> grr
[19:05:35] <bstrie> "according to the experts' summary, the firmware responsible for handling this task and implemented as a superstructure over a real-time operating system contained... eleven thousand global variables."
[19:05:41] <bstrie> http://www.viva64.com/en/a/0083/
[19:05:43] <bstrie> hooray global state!
[19:05:47] <tjc> haha
[19:05:55] <tjc> They should have used a State monad instead
[19:06:01] <tjc> with a State type that's a record with 11,000 fields :-)
[19:06:27] <olsonjeffery> woulda been better if they'd been content to say it contained "over 9000" global variables
[19:06:47] *** Joins: sanxiyn (tinuviel@5F1AEB26.A92E374.57C4C441.IP)
[19:07:01] <olsonjeffery> tjc: but we all know, from reading HN, the perils of an ever-expanding State
[19:07:15] <bstrie> a Global State, even
[19:07:29] <tjc> olsonjeffery: I'm tempted to make the "Church and State" joke, but idk how many people will get it
[19:07:54] <bstrie> something something The Lambda Calculus
[19:07:55] <olsonjeffery> ill follow allonzo :)
[19:08:25] <olsonjeffery> -l
[19:08:41] <sanxiyn> http://liyang.hu/church.xhtml
[19:08:44] <tautologico> tjc: I'll create a PR later about the package_id issue… but if it's applied I think we'll need a FIXME right after :)
[19:08:59] <tjc> tautologico: it's still progress :-)
[19:09:42] <bstrie> sanxiyn: wonderful
[19:09:53] <bstrie> the Why combinator
[19:10:01] *** Quits: andre (andre@CA528A4A.45A4338E.8EE27E6.IP) (Quit: leaving)
[19:10:04] <tautologico> tjc: with the changes the package_id will always be there in the link meta, but the LinkMeta struct declares package_id as Option
[19:10:41] <tautologico> tjc: so in the encoder we have to unwrap the option, but it will always be Some()
[19:11:18] <sanxiyn> Too bad I won't do Rust (and Servo) at work anymore
[19:11:26] <tautologico> tjc: so I think package_id should be changed to just a string instead of an option
[19:11:50] <sanxiyn> (will play with Rust (and Servo) at home though)
[19:11:55] <bstrie> sanxiyn: oh no :(
[19:11:59] <bstrie> sanxiyn: what are you working on now?
[19:12:11] <sanxiyn> bstrie: Can't say
[19:12:15] <bstrie> haha
[19:12:21] <mletterle> rustpkg automatically upgraded my libs from 0.0 to 0.1
[19:12:26] *** Joins: dsk (Sohbet@1899F3D3.748DB4F1.E9B01DC7.IP)
[19:12:31] <tjc> tautologico: I guess it's ok to always have a package ID, though it seemed like it didn't make sense to have one if you weren't actually building a package
[19:12:31] <bstrie> samsung is so mysterious
[19:12:38] <tjc> mletterle: how were you specifying the 0.0 version?
[19:12:42] <sanxiyn> bstrie: Effective 2013-11-04
[19:12:52] <sanxiyn> So it has been a week
[19:13:19] <bstrie> sanxiyn: how about the others? ilyoan, etc?
[19:13:35] <sanxiyn> bstrie: ilyoan too
[19:13:38] <sanxiyn> But just us two
[19:13:43] <bstrie> kk
[19:14:11] *** Quits: dsk (Sohbet@1899F3D3.748DB4F1.E9B01DC7.IP) (Ping timeout)
[19:14:14] <tautologico> tjc: it's either that (always having a package_id) or making 'extern mod foo = "bar"' behave differently and not automatically insert the package_id attribute when trying to link with bar
[19:14:32] <mletterle> tjc: #[link(name = "nss", vers = "0.0-pre")];
[19:14:39] <mletterle> But the libs themself are right
[19:14:46] <tjc> mletterle: Ah, ok. Yeah, rustpkg is ignoring the vers attribute right now...
[19:15:03] <tjc> it should warn about it, but the way to add a version is either by making a source control tag, or naming the package directory nss-0.0-pre
[19:15:12] *** sankha93|afk is now known as sankha93
[19:15:15] <tjc> I'm not sure if the second one works either. The tag one definitely does, though :-)
[19:15:47] <mletterle> Not a big deal at the moment, as far as I can tell the only fallout is the output saying what it installed.
[19:16:02] <mletterle> at least in this case
[19:16:03] *** Parts: nejucomo (Adium@9F0867A2.BB950596.DFB232DA.IP) ()
[19:16:48] <mletterle> I'm starting to think having submodules might be a good route to go to handle dependencies... 
[19:18:43] *** Joins: sk (sk@61A494B3.BA40E8A.AAC02D62.IP)
[19:19:30] <tjc> mletterle: what do you mean by submodules in this case?
[19:23:22] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[19:23:41] <mletterle> git submodules
[19:24:07] <tjc> Ah, well, part of the point of rustpkg is to avoid having to have git submodules
[19:24:17] <tjc> and just encoding the desired repo and revision in the `extern mod` directives inside the code
[19:25:04] <mletterle> Nice to have things buildable without needing net access :)
[19:25:38] *** Joins: Sharp (Sharp@1710C26.8381A41.8725677B.IP)
[19:26:04] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.2)
[19:26:42] *** Joins: nejucomo (Adium@9F0867A2.BB950596.DFB232DA.IP)
[19:30:19] *** Quits: Sharp (Sharp@1710C26.8381A41.8725677B.IP) (Quit: Sharp)
[19:31:27] <tjc> mletterle: I think the current system does as best as it can -- if you don't have net access, it will use a cached copy
[19:31:40] <tjc> If you don't have net access but haven't downloaded all the libraries you need, I'm not sure how to do any better :-)
[19:33:37] <mletterle> i guess it just bugs me that modules designed for rustpkg can't be compiled with rustc. That's the root of my concern I think.
[19:40:37] *** Quits: victorporof_ (victorporo@9B024C76.73B1E539.9B1E38F4.IP) (Quit: victorporof_)
[19:40:51] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[19:44:23] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[19:44:25] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[19:45:19] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.2)
[19:47:25] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[19:51:18] *** Quits: ozten (ozten@moz-BC0C74E2.range86-174.btcentralplus.com) (Quit: ozten)
[19:52:23] *** Joins: simlay (simlay@moz-1C72F8DD.hsd1.ca.comcast.net)
[19:52:42] *** Joins: Sharp (Sharp@1710C26.8381A41.8725677B.IP)
[19:54:22] *** Quits: simlay (simlay@moz-1C72F8DD.hsd1.ca.comcast.net) (Ping timeout)
[19:54:26] *** Quits: Sharp (Sharp@1710C26.8381A41.8725677B.IP) (Quit: Sharp)
[19:54:59] *** Quits: fabiand (fabiand@moz-8374B9E4.adsl.alicedsl.de) (Quit: Verlassend)
[19:55:18] *** Quits: kellogh (timkellogg@moz-68DF7EF7.teliax.com) (Quit: kellogh)
[19:55:35] *** Quits: lmandel (lmandel@13F2CEC5.7672369.D8E68FF6.IP) (Quit: lmandel)
[19:56:28] *** Joins: MISH (Mibbit@42ED73FA.F836AB6E.ECA3D134.IP)
[19:57:23] *** Joins: simlay (simlay@moz-1C72F8DD.hsd1.ca.comcast.net)
[19:57:38] <MISH> can any1 plz tell me how to start up 
[19:57:59] *** Parts: sanxiyn (tinuviel@5F1AEB26.A92E374.57C4C441.IP) (Bye)
[19:58:04] <tiffany> get started with rust?
[19:58:15] <tiffany> well, you should download the compiler for one, and also read the tutorial
[19:58:45] *** Quits: bynaryshef (bynaryshef@moz-97E96350.mem.bellsouth.net) (Quit: This computer has gone to sleep)
[19:58:46] <MISH> ya rust
[19:58:50] *** Joins: bent (Mibbit@E13B7D13.FB3E72DF.F12515B4.IP)
[19:59:06] <MISH> k.
[19:59:10] <kimundi> Ideally compile the most current git master instead of using the old 0.8 version
[19:59:50] *** bent is now known as IRCMonkey34187
[19:59:50] *** Quits: jvshahid (jvshahid@DFBC979C.A3446CDA.EB438161.IP) (Ping timeout)
[20:00:23] <IRCMonkey34187> hello all, I have a quick question - is there any way to clear the console in Rust?
[20:00:57] <IRCMonkey34187> (besides printing 1000 blank lines :) )
[20:01:16] <kimundi> shell out to the clear command? :)
[20:01:43] <tautologico> create bindings to ncurses and then you can do it in rust :)
[20:01:53] <kimundi> Generally thats less a rust thing and mor a console/shell thing ;)
[20:01:54] *** Quits: darkowlzz (sunny@2D730B43.15D34F31.27560D6E.IP) (Quit: This computer has gone to sleep)
[20:02:23] <IRCMonkey34187> I'm not really sure what you mean by "shell out"...
[20:02:34] *** Joins: steveklabnik (steveklabn@moz-F84F761F.homerun.telia.com)
[20:03:23] <MISH> m getting 0.8 version only
[20:03:53] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Ping timeout)
[20:03:58] <tautologico> IRCMonkey34187: go to the shell and execute a shell command, in this case
[20:04:12] <tautologico> MISH: you have to download the repository using git
[20:04:47] *** Joins: jvshahid (jvshahid@DFBC979C.A3446CDA.EB438161.IP)
[20:06:00] <IRCMonkey34187> @tautologico right, is there a way to do that with Rust?
[20:06:24] <tautologico> IRCMonkey34187: are you using windows, linux, os x? 
[20:06:50] <IRCMonkey34187> @tautologico ubuntu, but it has to work on osx too...
[20:08:13] <[mm]> IRCMonkey34187: The way terminals work, you just print out a command to clear the window
[20:08:48] <bstrie> however, printing 1000 newlines also works
[20:08:53] <bstrie> we won't judge
[20:09:02] <[mm]> IRCMonkey34187: \escape[H^\escape[J generally works
[20:09:39] <[mm]> where \escape is a byte 0x1B
[20:09:49] <steveklabnik> control-l maybe??
[20:09:50] <[mm]> I forget how to embed that in a rust string literal
[20:10:02] <kimundi> rusti: "\x1b"
[20:10:03] -rusti- "\x1b"
[20:10:24] <kimundi> rusti: "\x1b[H^\x1b[J"
[20:10:25] -rusti- "\x1b[H^\x1b[J"
[20:10:42] <IRCMonkey34187> @[mm] and I'd put that into a `print()` statement?
[20:10:47] <[mm]> Yes
[20:10:53] <kimundi> rusti: println("\x1b[H^\x1b[J")
[20:10:54] -rusti- [H^[J
[20:10:54] -rusti- ()
[20:11:03] <kimundi> :P
[20:11:15] *** Joins: miloshadzic (miloshadzi@59612C1E.AEAC8983.ADC9B595.IP)
[20:12:26] <[mm]> To be "more correct", you would want to look up the correct control sequence in terminfo
[20:12:38] <[mm]> but I don't know of any terminals that don't use that sequence
[20:12:43] <MISH> sm1 plz help me with rust compiler
[20:13:14] <kimundi> MISH: Which operation system?
[20:13:16] <bstrie> MISH: what platform?
[20:13:36] <MISH> windows7
[20:13:48] <bstrie> MISH: 64-bit or 32-bit?
[20:13:54] <MISH> 64 bit
[20:14:02] <bstrie> MISH: rust doesn't support 64-bit windows yet
[20:14:06] <bstrie> sorry
[20:14:09] <MISH> oops
[20:14:25] *** Joins: kellogh (timkellogg@moz-68DF7EF7.teliax.com)
[20:14:31] <MISH> will it work with ubuntu?
[20:14:33] <bstrie> you're welcome to install linux though :)
[20:14:36] <bstrie> indeed it does
[20:14:37] <Luqman> bstrie: MISH you can still run the 32bit rustc
[20:14:37] <kimundi> You can use a linux virtual machine ;)
[20:14:38] *** Joins: kirneh (Henrik@moz-ACBB9422.k955.webspeed.dk)
[20:15:02] <bstrie> Luqman: really? I thought that was fubared
[20:15:03] <kimundi> MISH: For ubuntu you will even get nice nightly builds
[20:15:03] <MISH> k .wil install it
[20:15:06] <bstrie> not that I've ever tried
[20:15:24] <bstrie> in any case luqman be quite, we're getting someone to use ubuntu instead of windows!!! :)
[20:15:28] <MISH> k.den wil install it
[20:15:37] <MISH> :)
[20:15:55] <Luqman> haha, well it will definitely be easier to get started on ubuntu.
[20:16:07] <Luqman> there's a ppa for rust nightly builds somewhere
[20:16:08] <kimundi> Windows in general is still more painful to use rust with in any case right now
[20:16:32] <MISH> k..got u
[20:16:42] <bstrie> it's all part of our devious "embrace, extend, extinguish" strategy
[20:16:47] <bstrie> rust alone shall be the death of windows
[20:16:50] <steveklabnik> lol
[20:17:27] <bstrie> steveklabnik: we've already converted one person to linux!!!
[20:17:41] <steveklabnik> seems good
[20:17:46] <bstrie> slowly but surely, the ocean wears away at the mountain
[20:17:47] <steveklabnik> i'm thinking about doing Linux from Scratch
[20:17:50] <tautologico> anything is better than windows for development
[20:17:51] <MISH> k..after dat wat i need to do?
[20:18:02] <IRCMonkey34187> @kimundi @[mm] awesome, thanks!  That `^` is getting left behind, I don't think it's necessary
[20:18:16] <bstrie> MISH: do you have ubuntu installed?
[20:18:31] <[mm]> IRCMonkey34187: Oh yeah there shouldn't be a ^ in there
[20:18:35] <MISH> nt yet
[20:18:42] <MISH> installing thru wubi
[20:18:50] <[mm]> That was just a typo on my part
[20:18:55] *** Joins: Soft (soft@moz-EC8D39F.yok.fi)
[20:19:07] <bstrie> MISH: once you have ubuntu installed, you can either 1) download the nightly build of rust from the PPA, or 2) install build-essentials and then compile rust yourself
[20:19:20] <IRCMonkey34187> @[mm] so I'm not quite sure how those escape characters are working, is there a resource you could point me to that explains them?
[20:20:34] <[mm]> IRCMonkey34187: Sorry, I don't know a good reference off the top of my head.  Try googling for "VT100 control sequences"
[20:20:52] *** Parts: kirneh (Henrik@moz-ACBB9422.k955.webspeed.dk) ()
[20:21:02] *** Joins: kirneh (Henrik@moz-ACBB9422.k955.webspeed.dk)
[20:21:21] <IRCMonkey34187> @[mm] ok cool, thanks so much for your help!
[20:21:24] <[mm]> IRCMonkey34187: http://www.termsys.demon.co.uk/vtansi.htm seems reasonable but a little out of date
[20:21:34] <MISH> ohk..thnx
[20:21:46] *** Joins: addy93 (Mibbit@A75CE54A.8981B243.A2DC32D.IP)
[20:21:59] *** Quits: MISH (Mibbit@42ED73FA.F836AB6E.ECA3D134.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[20:22:16] *** Joins: futurehorizons (Mibbit@moz-61717F7A.bitstream.orcon.net.nz)
[20:23:06] <futurehorizons> error: type `&mut [~str]` does not implement any method in scope named `push`. How to add an element to a string vec?
[20:24:22] <bstrie> futurehorizons: &[] is a slice, you can't grow it
[20:24:40] <bstrie> futurehorizons: you want ~[~str] instead
[20:24:54] <futurehorizons> OK. Thanks.
[20:24:57] *** Joins: MISH (Mibbit@DB0DC0F4.5687E32F.D83D0F57.IP)
[20:25:02] *** Quits: jvshahid (jvshahid@DFBC979C.A3446CDA.EB438161.IP) (Ping timeout)
[20:25:28] <kimundi> or &mut ~[~str]
[20:25:44] <bstrie> kimundi: that's still a slice, no? you can't push to it
[20:25:50] <kimundi> no
[20:25:54] <bstrie> the mut bit there just lets you modify the elements
[20:26:10] <kimundi> it's a mutable reference to a owned vector
[20:26:32] <kimundi> It's how push() is implemented in fact
[20:26:57] <Soft> https://dpaste.de/04Ry why won't this work, if I am reading the docs correctly, listen is implemented for UnixListener
[20:27:55] *** Joins: tikue (tikue_star@56941469.92504EB1.689607DE.IP)
[20:28:17] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[20:29:07] <Luqman> Soft: add `use std::rt::io::Listener;`
[20:29:14] <kimundi> listen is a method of the trait Listener
[20:29:24] <kimundi> which needs to be in scope
[20:29:54] <Soft> oh, thank you. I am little confused about the rules regarding use statements
[20:31:37] *** Quits: bholley (anonymous@moz-A2189431.hsd1.ca.comcast.net) (Quit: bholley)
[20:31:54] *** Quits: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net) (Quit: tiffany)
[20:32:00] *** Joins: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net)
[20:32:22] *** Quits: IRCMonkey34187 (Mibbit@E13B7D13.FB3E72DF.F12515B4.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[20:32:26] *** Quits: dherman (dherman@moz-BBE3ABD.mv.mozilla.com) (Quit: dherman)
[20:33:40] *** Joins: carllerche (carllerche@moz-2B516F15.hsd1.or.comcast.net)
[20:33:59] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[20:34:38] <kimundi> Soft: The thing that provides a method needs to be in scope. Without a use statement, only the definitions in the libstd prelude and local definitions are in scope
[20:34:50] *** Joins: anshin (anshin@CD85F10D.F21429E2.354459FA.IP)
[20:35:41] <kimundi> the scope is the body of a module usually
[20:35:41] <nmatsakis> ChrisMorgan: I was able to build your branch, doing some more reading now
[20:36:37] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[20:37:36] *** Quits: johanna (chatzilla@1563D1DD.81B50CCB.5DB860A5.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 25.0/20131025151332])
[20:37:51] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[20:39:58] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Quit: Leaving)
[20:40:17] *** Joins: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu)
[20:41:40] *** Quits: kirneh (Henrik@moz-ACBB9422.k955.webspeed.dk) (Quit: kirneh)
[20:42:14] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[20:42:19] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[20:42:30] *** Joins: kirneh (kirneh@moz-ACBB9422.k955.webspeed.dk)
[20:42:53] *** Joins: icebattle (wayne@8A14A542.EBE2EE2B.C7CEC4ED.IP)
[20:47:39] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.2)
[20:47:58] *** Joins: ercxx (ercan@moz-8383857F.dyn.optonline.net)
[20:48:17] *** Quits: lkuper (lkuper@moz-54129201.dhcp-bl.indiana.edu) (Ping timeout)
[20:48:21] *** Parts: kirneh (kirneh@moz-ACBB9422.k955.webspeed.dk) ()
[20:50:29] *** Quits: MISH (Mibbit@DB0DC0F4.5687E32F.D83D0F57.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[20:51:26] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Client exited)
[20:53:53] *** Joins: MISH (Mibbit@B97A6FA2.F836AB6E.ECA3D134.IP)
[20:54:21] *** Quits: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu) (Quit: maxiepoo)
[20:55:16] *** Quits: carllerche (carllerche@moz-2B516F15.hsd1.or.comcast.net) (Quit: carllerche)
[20:56:12] *** Joins: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu)
[20:58:17] *** Quits: jyasskin_w (jyasskin@DAF66858.C60FE7DC.4065847B.IP) (Ping timeout)
[21:00:02] *** Quits: auscompgeek (aucg@aries.trekweb.org) (Quit: FATAL ERROR: afrosdwish detected)
[21:00:43] *** Joins: jvshahid (jvshahid@DFBC979C.A3446CDA.EB438161.IP)
[21:00:55] *** Quits: MISH (Mibbit@B97A6FA2.F836AB6E.ECA3D134.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[21:01:15] *** Quits: nejucomo (Adium@9F0867A2.BB950596.DFB232DA.IP) (Quit: Leaving.)
[21:01:49] *** Joins: wolfwood (wolfwood@moz-A19F104D.pitbpa.fios.verizon.net)
[21:01:52] *** Quits: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu) (Quit: maxiepoo)
[21:03:03] *** Joins: Palmik (palmik@moz-DEC2AB.pks.muni.cz)
[21:03:51] *** Joins: jgilbert (jgilbert@moz-BBE3ABD.mv.mozilla.com)
[21:03:51] *** Joins: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu)
[21:04:46] *** Quits: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu) (Quit: maxiepoo)
[21:07:08] *** Joins: carllerche (carllerche@moz-2B516F15.hsd1.or.comcast.net)
[21:12:18] *** Joins: jyasskin_w (jyasskin@DAF66858.C60FE7DC.4065847B.IP)
[21:13:52] <tikue> with brson's wildcard change to pattern matching, you can do both `[head, ..] => ...` and `[head, ..tail] => ...` right?
[21:14:14] <sully> what changed about pattern matching?
[21:14:26] <tikue> sully: just syntax 
[21:14:27] <tikue> https://github.com/mozilla/rust/pull/10366
[21:14:30] <sully> ah, ok
[21:15:30] <bstrie> tikue: I presume so
[21:16:50] *** Quits: Jackneill (Jackneill@moz-4F3809C5.pool.digikabel.hu) (Ping timeout)
[21:17:29] *** Joins: andrew-d_w (andrew-d_w@moz-5A92CAFF.dsl.static.sonic.net)
[21:17:29] *** Quits: andrew-d_w (andrew-d_w@moz-5A92CAFF.dsl.static.sonic.net) (Input/output error)
[21:17:44] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[21:17:44] *** ChanServ sets mode: +o tjc
[21:17:50] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[21:17:51] *** Joins: dherman (dherman@moz-BBE3ABD.mv.mozilla.com)
[21:17:51] *** ChanServ sets mode: +ao dherman dherman
[21:18:19] *** Quits: andrew-__ (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Ping timeout)
[21:18:23] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[21:18:35] *** Quits: jyasskin_w (jyasskin@DAF66858.C60FE7DC.4065847B.IP) (Ping timeout)
[21:19:25] *** Joins: andrew-__ (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[21:20:15] *** Quits: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP) (Client exited)
[21:20:27] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Ping timeout)
[21:21:10] *** Joins: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP)
[21:21:11] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[21:21:11] *** ChanServ sets mode: +ao pcwalton pcwalton
[21:21:29] *** Quits: mikezaby (mikezaby@moz-145CF3DD.home.otenet.gr) (Input/output error)
[21:25:21] *** Joins: Sharp (Sharp@1710C26.8381A41.8725677B.IP)
[21:27:23] *** Joins: ksf_ (ksf@moz-E85E6526.adsl.hansenet.de)
[21:27:27] *** Quits: ksf (ksf@moz-1919582C.adsl.hansenet.de) (Ping timeout)
[21:28:47] *** Quits: kellogh (timkellogg@moz-68DF7EF7.teliax.com) (Quit: kellogh)
[21:31:55] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[21:32:33] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[21:32:33] *** ChanServ sets mode: +o tjc
[21:32:50] *** Quits: dherman (dherman@moz-BBE3ABD.mv.mozilla.com) (Quit: dherman)
[21:34:15] *** Joins: kellogh (timkellogg@moz-68DF7EF7.teliax.com)
[21:34:26] *** Parts: addy93 (Mibbit@A75CE54A.8981B243.A2DC32D.IP) ()
[21:36:01] *** Quits: steveklabnik (steveklabn@moz-F84F761F.homerun.telia.com) (Ping timeout)
[21:38:10] *** Quits: mojibake (Mibbit@moz-A825E7E7.slkc.qwest.net) (Quit: http://www.mibbit.com ajax IRC Client)
[21:40:23] *** Joins: steveklabnik (steveklabn@moz-F84F761F.homerun.telia.com)
[21:42:02] *** Joins: six600110 (six600110@moz-C663577C.hsd1.il.comcast.net)
[21:44:12] <tikue> anyone know what I've done wrong here? https://gist.github.com/tikue/b20120af1ee8b286da5d
[21:44:52] *** Joins: kirneh (kirneh@moz-ACBB9422.k955.webspeed.dk)
[21:47:48] *** Quits: Ms2ger (Ms2ger@moz-EA6EE9F3.adsl-dyn.isp.belgacom.be) (Quit: nn)
[21:49:49] *** Quits: Sharp (Sharp@1710C26.8381A41.8725677B.IP) (Quit: Sharp)
[21:50:57] <tautologico> tjc: it's there https://github.com/mozilla/rust/pull/10368
[21:51:12] *** Quits: willingc_ (willingc@moz-B4760708.san.res.rr.com) (Quit: Leaving...)
[21:51:46] *** Quits: anshin (anshin@CD85F10D.F21429E2.354459FA.IP) (Ping timeout)
[21:54:32] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Client exited)
[21:54:53] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[21:54:55] <tjc> tautologico: Looks good except for the one comment I just left
[21:55:12] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[21:55:22] <tautologico> can I add an issue for code that is not there yet? that was my doubt :)
[21:56:37] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Ping timeout)
[21:56:42] <tjc> tautologico: yes, we do it all the time :-)
[21:56:48] <tjc> Just say that it refers to a pull request that's not yet landed
[21:59:14] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[21:59:14] *** ChanServ sets mode: +ao brson brson
[22:00:33] *** Joins: tudor (tudor@moz-233C4930.hsd1.ca.comcast.net)
[22:00:41] <tautologico> tjc: ok, done
[22:01:35] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[22:03:49] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[22:04:13] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[22:04:13] *** ChanServ sets mode: +ao brson brson
[22:04:44] *** Joins: Sharp (Sharp@1710C26.8381A41.8725677B.IP)
[22:06:49] *** Joins: glinscott (garylinsco@789A6618.53EB7C1.FFFE3AA.IP)
[22:11:08] *** Quits: tikue (tikue_star@56941469.92504EB1.689607DE.IP) (Ping timeout)
[22:12:52] <glinscott> beginner question - let f = &mut File::open(&Path::new("sample.json")).unwrap(); json::from_reader(f as &mut io::Reader);
[22:12:58] *** Quits: avsej (avsej@D9A610B8.4841F515.FB33447D.IP) (Client exited)
[22:13:06] <glinscott> why do i have to cast to &mut io::Reader there?
[22:13:16] <tjc> tautologico: r+'ed, thanks!
[22:13:40] <tjc> glinscott: what is f? the f on the right-hand side, I mean
[22:14:23] *** Parts: a_m0d (dschoof@moz-A861BB8.coyotecorp.com) ()
[22:14:50] *** Quits: jvshahid (jvshahid@DFBC979C.A3446CDA.EB438161.IP) (Ping timeout)
[22:14:50] <glinscott> tjc: json::from_reader?  it's "pub fn from_reader(rdr: &mut io::Reader)"
[22:15:06] <tjc> glinscott: Sorry, mis-read your code
[22:15:30] <bjz> glinscott: File::open returns an Option<File>
[22:15:54] <bjz> glinscott: File impls the trait Reader
[22:16:09] <tjc> glinscott: Casting from File to &mut io::Reader changes the representation of the thing you're casting
[22:16:15] <tjc> it actually allocates a new object and makes vtables
[22:16:22] <bjz> glinscott: json::from_reader takes a Reader trait object
[22:16:25] <tjc> since it's an operation with a cost, we want it to be explicit in the syntax
[22:16:28] *** Quits: Sharp (Sharp@1710C26.8381A41.8725677B.IP) (Quit: Sharp)
[22:16:41] <glinscott> bjz: ok, a little confused still :) so .unwrap() is not doing what i think?
[22:17:04] <bjz> glinscott: so you cast the File to a Reader trait object
[22:17:06] <glinscott> tjc: ah, okay.  that is a bit startling, when one looks at the implementation of File, and sees it implements io::Reader though
[22:17:23] <bjz> glinscott: no, unwrap is right
[22:17:30] <tjc> glinscott: Because this is dynamic dispatch and without a cast, static dispatch happens
[22:17:39] *** Quits: dbaupp (Thunderbir@moz-DDA7CEB8.lns20.syd6.internode.on.net) (Ping timeout)
[22:18:02] *** Joins: jvshahid (jvshahid@DFBC979C.A3446CDA.EB438161.IP)
[22:18:48] <glinscott> ok.  well, maybe i will take a look at improving the error message for the next person to hit this :)  it's currently "error: mismatched types: expected `&mut std::rt::io::Reader<no-bounds>` but found `&mut std::rt::io::fs::File` (expected trait std::rt::io::Reader but found &-ptr)"
[22:19:04] *** Quits: heftig (heftig@moz-76BC6A3B.dip0.t-ipconnect.de) (Quit: Quitting)
[22:19:05] <bjz> glinscott: it's the difference between: `fn foo<R: Reader>(r: &r)` and `fn foo(r: &Reader)`
[22:19:25] <bjz> the first on is static dispatch, the second is dynamic
[22:19:30] <tjc> Certainly an error message hint would be great to add
[22:19:44] <kimundi> glinscott: There are actually plans to make the cast there implicit
[22:20:14] *** Joins: heftig (heftig@moz-76BC6A3B.dip0.t-ipconnect.de)
[22:20:25] <kimundi> That is, to make ptr-to-type automatically coerce to a trait object
[22:20:56] <bjz> kimundi: that would be nice
[22:21:14] <bjz> kimundi: but tjc does make a good point
[22:21:38] <bjz> ie. the allocation should be evident
[22:21:49] <ercxx> tikue_: did you find out the what that error was with the gist you posted?
[22:22:25] <glinscott> kimundi: interesting, thanks.  ok, so for static dispatch, the disadvantage is we end up with a copy of the code for each type (ie. C++ template-alike)?
[22:22:28] *** Quits: tudor (tudor@moz-233C4930.hsd1.ca.comcast.net) (Quit: Leaving)
[22:22:49] <glinscott> whereas with dynamic dispatch we need a trait object to be allocated at some point?
[22:23:07] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[22:23:10] <cmr> bjz: what allocation?
[22:23:37] <sfackler> the main cost to dynamic dispatch is an extra cost for every method call made on the object
[22:23:40] <cmr> With &Trait it's two words, with ~Trait you already have a ~T (and same two words)
[22:25:56] <kimundi> And the vtable is just a static memory location
[22:26:11] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[22:26:33] *** Quits: Palmik (palmik@moz-DEC2AB.pks.muni.cz) (Quit: Lost terminal)
[22:28:02] *** Joins: dbaupp (Thunderbir@moz-DDA7CEB8.lns20.syd6.internode.on.net)
[22:31:28] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Ping timeout)
[22:32:57] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[22:34:34] *** Quits: saml (sam@moz-14C16814.cst.lightpath.net) (Quit: Leaving)
[22:37:45] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[22:43:13] *** Quits: jvshahid (jvshahid@DFBC979C.A3446CDA.EB438161.IP) (Ping timeout)
[22:43:33] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[22:45:37] *** Joins: jeffdb (jeff@moz-9D2E3B02.hsd1.wa.comcast.net)
[22:45:45] *** Quits: netoarmando (uid10138@moz-E77DEB21.irccloud.com) (Quit: )
[22:46:46] *** Quits: lfox (lfox@moz-343B6F0C.nyc.biz.rr.com) (Quit: ZZZzzz…)
[22:48:27] *** Quits: jeffdb (jeff@moz-9D2E3B02.hsd1.wa.comcast.net) (Quit: jeffdb)
[22:49:31] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[22:52:10] *** kimundi is now known as zz_kimundi
[22:57:15] *** Quits: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Connection reset by peer)
[23:02:19] *** Quits: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP) (Quit: n)
[23:03:23] *** Joins: jeffdb (jeff@moz-9D2E3B02.hsd1.wa.comcast.net)
[23:04:04] *** Joins: maxiepoo (mnew@moz-6F50ADE.hsd1.il.comcast.net)
[23:08:20] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Ping timeout)
[23:09:23] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[23:10:49] <Leo`> WTF does stringify! returns "an interpolated block" when called in the expansion of another macro ? O__o
[23:11:34] <dbaupp> Leo`: if called with stringify!($b) where $b:blk, yes.
[23:11:54] <dbaupp> because then $b is no longer tokens; it's been parsed into an AST block by that point.
[23:12:13] *** Joins: bholley (anonymous@moz-A2189431.hsd1.ca.comcast.net)
[23:13:28] *** Joins: Sharp (Sharp@1710C26.8381A41.8725677B.IP)
[23:14:54] <Leo`> dbaupp: erf
[23:14:59] <Leo`> dbaupp: how should I do then ?
[23:15:17] <dbaupp> Leo`: O
[23:15:27] <dbaupp> I'm not sure you can
[23:15:31] <Leo`> O ?
[23:15:41] <Leo`> erf
[23:15:48] <Leo`> this is regrettable :|
[23:16:18] <dbaupp> (O was a typo, sorry.)
[23:16:38] <dbaupp> you can use the tt type (i.e. $b:tt), which keeps it as tokens,
[23:16:54] <dbaupp> but you can't treat that as a block without more indirection.
[23:17:22] *** Joins: obk (Mibbit@moz-651DE3B6.red.bezeqint.net)
[23:18:21] <Leo`> I don't need to treat it as a block at all
[23:18:33] <Leo`> in fact, I could as well be a single instruction
[23:18:46] <Leo`> and I just need to stringify it
[23:18:47] <obk> Is it possible to get from an &mut ~Type to an &mut ~Trait (where the Type implements the Trait)?
[23:19:07] <Leo`> dbaupp: what is "tt" for ?
[23:19:22] <sfackler> token tree
[23:19:28] <Leo`> ok
[23:19:34] <Leo`> it's not mentionned in the macro tutorial
[23:20:04] <dbaupp> obk: probably not
[23:20:29] <dbaupp> obk: though you can get to &mut Trait, I guess
[23:20:32] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[23:20:32] *** ChanServ sets mode: +ao dherman dherman
[23:21:01] <sfackler> I think you could only get to &mut Trait if ~Type implements Trait as opposed to Type
[23:21:17] <obk> Hmmm... that's an idea.
[23:21:22] <sfackler> although you should be able to get it to borrow properly
[23:21:27] <sfackler> with some fiddling
[23:21:58] * obk will try and see how it goes...
[23:22:59] <Leo`> thx dbaupp, tt works perfectly for what I want :)
[23:24:54] <dbaupp> sfackler, obk: (&mut **foo) as &mut Trait should work
[23:25:01] <dbaupp> *may work
[23:26:49] *** Joins: valenting (Thunderbir@64481B2A.F69E933D.FCAAE698.IP)
[23:27:53] <obk> dbaupp: That works, it seems...
[23:29:24] *** Joins: mark_edward_ (quassel@moz-DCB0B750.lightspeed.cicril.sbcglobal.net)
[23:30:24] <obk> I guess there's no such thing as *Trait then... (ok, that's getting extreme here, but it is an interesting question).
[23:30:59] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Client exited)
[23:31:20] *** Joins: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP)
[23:31:25] *** Quits: valenting (Thunderbir@64481B2A.F69E933D.FCAAE698.IP) (Ping timeout)
[23:33:02] *** Quits: samnardoni (samnardoni@FC9A45BE.3393236F.BFD1ABFD.IP) (Ping timeout)
[23:35:32] *** Joins: netoarmando (netoarmand@F7F0F7A.30F3D1B9.20F09BA6.IP)
[23:35:36] *** Quits: ianj (ianjneu@moz-7140CF01.ccs.neu.edu) (Quit: leaving)
[23:45:55] <ercxx> Are there any plans to enabling declaration of multiple variables? Compiler says obsolete syntax.
[23:46:10] <cmr> let (a, mut b) = (1, 2);
[23:46:26] <ercxx> cmr: thank you.
[23:47:44] <ercxx> and how about something like `let (a,b,c):int;`
[23:48:40] <ercxx> multiple same type variable declaration without initilization?
[23:50:05] <cmr> ercxx: not possible atm
[23:50:08] <ercxx> ok
[23:50:12] <cmr> or probably ever
[23:50:57] <strcat> shouldn't rarely need type annotations on locals
[23:51:08] <ercxx> I don't think it's that useful, I just wondered.
[23:52:15] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[23:54:10] *** Joins: jaredhanson (jaredhanso@moz-8323839A.hfc.comcastbusiness.net)
[23:56:31] <yuriks_> can anyone help me understand what's the usual rustpkg workflow supposed to be? Suppose I want to use this in my project: https://github.com/bjz/glfw-rs
[23:56:52] <yuriks_> what do I do? do I clone the repo to some other directory, build it, then copy the build output to the .rust directory inside my project?
[23:57:05] *** Quits: Scriptor (anonymous@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[23:57:32] *** Joins: Skif_ (emschwar@moz-CA025D57.ip.mcleodusa.net)
[23:57:39] *** Quits: purkinje (Mibbit@C77B46D2.D3CF842A.3225B490.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[23:58:08] <cmr> yuriks_: `extern mod glfw = "github.com/bjz/glfw-rs";`
[23:58:39] *** Quits: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net) (Ping timeout)
[23:59:16] *** Quits: Skif_ (emschwar@moz-CA025D57.ip.mcleodusa.net) (Ping timeout)
