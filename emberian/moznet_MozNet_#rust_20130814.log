[00:01:27] *** Quits: brendan (brendaneic@538BABFE.A073F3E.97BBD552.IP) (Quit: brendan)
[00:01:44] *** Quits: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: ChatZilla 0.9.90.1-rdmsoft [XULRunner 22.0/20130619132145])
[00:02:00] *** Quits: maxli (maxli@13F2CEC5.7672369.D8E68FF6.IP) (Quit: Leaving.)
[00:02:32] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[00:05:57] *** Joins: vk (chatzilla@F92596F.2DEF7520.EF7679FA.IP)
[00:06:07] *** Joins: milinda (milinda@moz-C79ADF95.dhcp-bl.indiana.edu)
[00:06:54] *** Joins: june0cho (Mibbit@19636E12.611EC27D.F796972A.IP)
[00:07:29] *** Quits: june0cho (Mibbit@19636E12.611EC27D.F796972A.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[00:07:31] *** Joins: vadimcn (chatzilla@A2267643.76F9E272.DA40C4B3.IP)
[00:08:10] *** Joins: june0cho (Mibbit@19636E12.611EC27D.F796972A.IP)
[00:08:43] *** Joins: deokjinkim (Mibbit@9EDECB6.3A2F0FBD.4BEB41DB.IP)
[00:08:57] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[00:10:46] <dbaupp> https://github.com/mozilla/rust/pull/8453 r?
[00:11:47] <cmr> dbaupp: lgtm. why don't you r it?
[00:12:11] <dbaupp> cmr: I helped dmanescu write half the code
[00:12:14] <cmr> ah
[00:12:49] *** Quits: vk (chatzilla@F92596F.2DEF7520.EF7679FA.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 24.0/20130806170643])
[00:13:50] *** Quits: deokjinkim (Mibbit@9EDECB6.3A2F0FBD.4BEB41DB.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[00:16:01] *** Joins: recrack2 (Mibbit@B4104EBB.3CC170B1.1E14B209.IP)
[00:16:01] *** Quits: Odiel (Mibbit@moz-526E04A.cable.teksavvy.com) (Quit: http://www.mibbit.com ajax IRC Client)
[00:16:25] *** Quits: recrack2 (Mibbit@B4104EBB.3CC170B1.1E14B209.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[00:16:29] *** Quits: recrack (ymin@5AB4884B.FCC4549.14D5B978.IP) (Quit: leaving)
[00:17:42] *** Quits: cdidd (cdidd@moz-413B7B85.broadband.corbina.ru) (Input/output error)
[00:19:47] <jld> ...why is the testsuite doing only one run-pass at a time?
[00:20:16] *** Joins: cdidd (cdidd@moz-1A721999.broadband.corbina.ru)
[00:20:23] <jld> It used to parallelize them.  Which is useful, given that parallel make check is always already broken.
[00:20:40] *** Quits: june0cho (Mibbit@19636E12.611EC27D.F796972A.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[00:20:53] <ecr> jld: do you have RUST_THREADS=1 in your call to make?
[00:21:11] <jld> Nothing with RUST in it in the environment
[00:21:33] <ecr> jld: Then I'm out of ideas.
[00:21:59] <jld> Oh, huh.  I can sometimes see it running more than one.
[00:22:12] <jld> But usually not.
[00:22:36] <jld> Certainly not the 8 it should be, and used to the last time I ran it.
[00:23:16] <cmr> jld: what platform is parallel make check broken on?
[00:23:37] <jld> cmr: host {x86_64,i686}-unknown-linux-gnu, target likewise.
[00:24:02] <jld> I mean, this tree has both of those host tuples, and the same set of target tuples.
[00:25:28] <jld> It's currently running an x86_64-unknown-linux-gnu compiletest, FWIW.
[00:25:53] <cmr> parallel make check works for me
[00:26:07] <jld> /usr/bin/ld: x86_64-unknown-linux-gnu/test/run-pass/alignment-gep-tup-like-1.o: invalid string offset 1920234240 >= 2569 for section `.strtab'
[00:26:17] <jld> note: collect2: error: ld terminated with signal 11 [Segmentation fault]
[00:26:19] *** Quits: pyrac (pyrac@moz-F2B1E85D.w92-162.abo.wanadoo.fr) (Quit: pyrac)
[00:26:29] <jld> Errors like that.
[00:27:07] <jld> Parallel make check has... sometimes worked for me.  I'm pretty sure it doesn't when builds for multiple platforms are running in parallel and overwriting each other's object files.
[00:27:23] <cmr> oh
[00:27:25] <cmr> right
[00:27:27] <cmr> that might be it
[00:27:31] <cmr> I don't cross compile at all
[00:28:02] <cmr> brson: graydon: could that be the cause of the testsuite slowdown? bad parallelization in compiletest/
[00:28:19] <jld> This is my long-dormant change to switch enum discriminants from uint to u64 (originally int to i64).  The 32-to-64 cross case is important.
[00:28:26] <jld> But also, not breaking 32-bit is important.
[00:29:00] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[00:29:04] <cmr> Related to https://github.com/mozilla/rust/issues/1647 ?
[00:29:16] <graydon> jld: on a mac? on valgrind?
[00:29:44] <sp3d> speaking of which, did a way to specify C-like enum size ever get finalized?
[00:29:47] *** Joins: NewGuy (Mibbit@moz-FB83D6F7.tampfl.fios.verizon.net)
[00:29:56] *** Joins: fread2281 (zcarterc@moz-CB181B42.dia.static.qwest.net)
[00:30:00] <jld> graydon: Linux, and... CFG_VALGRIND is set but I don't see anything matching /valgrind/ in PS.
[00:30:00] <NewGuy> Howdy, guys.
[00:30:07] <jld> ...um, s/PS/ps(1)/.
[00:30:12] <brson> hm
[00:30:26] <brson> it does seem to be running rather serial
[00:30:43] <jld> So, this change was the start of my branch to improve enum discriminant sizes.
[00:30:44] <NewGuy> Just a quick question: Has rust had any improvement in the windows 64-bit area?
[00:30:57] <cmr> NewGuy: there's a PR that causes it to at least build now
[00:31:07] <cmr> Task failure doesn't work, but that's a windows-in-general thing
[00:31:14] *** Quits: ecr (Thunderbir@moz-BBE3ABD.mv.mozilla.com) (Quit: ecr)
[00:31:17] <jld> Which at one point almost worked, but a lot of things have changed since then.
[00:31:19] <cmr> https://github.com/mozilla/rust/pull/8488
[00:31:34] <brson> I hope we're doing multithreading at all
[00:31:34] <graydon> brson: maybe run:: interacting with newsched?
[00:31:41] *** Quits: sigma (sigma@moz-5022C87F.range109-151.btcentralplus.com) (Ping timeout)
[00:31:58] <cmr> brson: that'd be a pretty big bug yeah :\
[00:32:01] <brson> graydon: could be
[00:32:43] <NewGuy> cmr: Hm... Well I guess I'll either wait a bit longer or use Linux as my dev env for now. 
[00:33:05] <NewGuy> cmr: Any real plans to get that up and working? Or is that something that will get worked out right before the official 1.0 release?
[00:33:14] *** Quits: eschweic (Adium@moz-BBE3ABD.mv.mozilla.com) (Quit: Leaving.)
[00:33:44] *** Quits: dherman (dherman@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[00:33:50] <cmr> NewGuy: noone is really working on it afaik, but it's definitely a pre-1.0 thing
[00:34:08] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[00:34:32] *** Joins: dherman (dherman@moz-BBE3ABD.mv.mozilla.com)
[00:34:32] *** ChanServ sets mode: +o dherman
[00:35:07] *** Quits: NewGuy (Mibbit@moz-FB83D6F7.tampfl.fios.verizon.net) (Quit: http://www.mibbit.com ajax IRC Client)
[00:35:46] *** Quits: doomlord (doomlod@moz-13E69BC8.range86-180.btcentralplus.com) (Ping timeout)
[00:36:33] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[00:38:13] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[00:39:25] *** jgilbert_ is now known as jgilbert
[00:41:07] *** Quits: mihneadb (Mihnea@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: Leaving)
[00:42:07] *** Quits: huseby (huseby@moz-4E8C421A.husebyhome.com) (Ping timeout)
[00:42:57] *** Quits: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Quit: Leaving...)
[00:43:03] *** Quits: vosen (vosen@moz-266BA656.icpnet.pl) (Quit: Leaving)
[00:44:11] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[00:48:29] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[00:50:15] *** Joins: sigma (sigma@51C589B3.EF2694B5.DFAC6AA7.IP)
[00:51:34] *** Quits: barosl (barosl@E287D94F.C81E10FB.7544CABF.IP) (Ping timeout)
[00:52:06] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Quit: Leaving.)
[00:52:26] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[00:52:31] *** Quits: mschifer (Adium@moz-BBE3ABD.mv.mozilla.com) (Quit: Leaving.)
[00:53:16] <brson> in a normal test runner I see parallelism, not full utilization, but that's expected. under compiletest though I see a lot of threads blocking in pthread_join
[00:53:49] *** Quits: ozten (ozten@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: ozten)
[00:54:08] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Ping timeout)
[00:57:11] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Quit: Leaving...)
[00:57:37] <brson> hm
[00:57:47] <brson> actually, they are all just sitting in epoll
[00:57:54] *** tikue--dinner is now known as tikue
[00:58:08] *** Joins: brendan (brendaneic@538BABFE.A073F3E.97BBD552.IP)
[00:58:37] *** Quits: true_droid (true_droid@moz-123FD9B8.beck.volia.net) (Client exited)
[00:59:28] <tjc> anyone want to review a small pull request to improve a resolve error message?
[00:59:30] <tjc> super quick: https://github.com/mozilla/rust/pull/8502
[01:00:04] <brson> all those threads just sitting there
[01:00:06] *** Joins: true_droid (true_droid@moz-123FD9B8.beck.volia.net)
[01:00:12] <brson> pretty tragic
[01:00:26] <brson> i think it's probably a bug in the scheduling logic
[01:00:42] <graydon> r+
[01:01:12] <nmatsakis> where is the file that contains the "standard" macros?
[01:01:16] <nmatsakis> e.g., debug! etc
[01:01:16] <tjc> thx graydon
[01:01:33] *** Joins: barosl (barosl@E287D94F.C81E10FB.7544CABF.IP)
[01:01:41] <strcat> nmatsakis: libsyntax/ext/expand.rs
[01:01:47] *** Quits: true_droid (true_droid@moz-123FD9B8.beck.volia.net) (Ping timeout)
[01:02:07] <Luqman> tjc: r? again https://github.com/mozilla/rust/pull/8483 added the cfail test
[01:02:17] <tjc> Luqman: great, looking
[01:02:40] <tjc> r+'ed
[01:03:02] <nmatsakis> pauls: ping
[01:03:07] <Luqman> tjc: thanks
[01:03:15] *** Quits: acrichto (acrichto@moz-17CABEB0.wv.cc.cmu.edu) (Ping timeout)
[01:08:44] <nmatsakis> macro parsing is...quite inadequate.
[01:09:52] * strcat wishes they could make multiple items
[01:10:36] <nmatsakis> yes
[01:10:43] <nmatsakis> that would be nice too
[01:11:01] <nmatsakis> but e.g. I had `fn $name:ident ($($arg_name:ident : $arg_ty:ty),*)`
[01:11:04] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[01:11:09] <nmatsakis> i.e., fn foo(a:ty) etc
[01:11:15] <nmatsakis> it works fine unless there are zero arguments
[01:11:27] <nmatsakis> there are other similar cases I've run into 
[01:11:36] <nmatsakis> where I can't really comprehend how it could be so limited
[01:12:06] *** Joins: doomlord (doomlod@moz-13E69BC8.range86-180.btcentralplus.com)
[01:12:18] <strcat> I've just run into not being able to *use* macros in most places and I give up ;P
[01:13:14] *** Joins: msingle (Thunderbir@moz-20675462.nrflva.fios.verizon.net)
[01:13:47] <nmatsakis> all that said, they are pretty damn nice when they work
[01:13:49] <strcat> rusti: let x = [1, 2, 3]; let y = [4, 5, 6, 7]; x.iter().zip(y.iter()).size_hint()
[01:13:50] -rusti- (3, Some(3))
[01:14:56] <Luqman> nmatsakis: it is pretty awesome when they work. i got a macro for hashmaps working last night https://gist.github.com/luqmana/6219956
[01:15:32] *** Joins: steven_is_false (user@C5B76363.1FF1EBF8.1ECA502.IP)
[01:15:52] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Quit: Leaving)
[01:16:04] <steven_is_false> I think I'm getting a double free error related to the timer facilities in the new runtime: http://pastebin.mozilla.org/2850270
[01:16:22] <nmatsakis> Luqman: neat, though why hm = hashmap!(hm, ...) ?
[01:16:28] <strcat> huh, I didn't realize we had these weird zip wrappers on tuples
[01:16:31] <strcat> going to kill these
[01:16:38] <strcat> rusti: ([1, 2, 3], [2, 3, 4]).zip()
[01:16:39] -rusti- <anon>:5:9: 6:5 error: type `([<VI2>, .. 3],[<VI5>, .. 3])` does not implement any method in scope named `zip`
[01:16:39] -rusti- <anon>:5          ([1, 2, 3], [2, 3, 4]).zip()
[01:16:39] -rusti- <anon>:6     };
[01:16:39] -rusti- error: aborting due to previous error
[01:16:39] -rusti- application terminated with error code 101
[01:16:40] <nmatsakis> Luqman: as opposed to just hashmap!(hm, ...). is that needed to guarantee expr context?
[01:16:46] <strcat> rusti: (&[1, 2, 3], &[2, 3, 4]).zip()
[01:16:47] -rusti- ~[(1, 2), (2, 3), (3, 4)]
[01:16:53] <strcat> weird
[01:17:29] <brson> toddaaro: It appears that the current scheduling strategy is leaving a lot of schedulers sleeping in the test suite (e.g. make check-stage1-rpass). What I am imagining is happening is that the theif threads are making their two steal attempts, failing and going back to sleep. Because these tests are long-running there is a lot of time where threads are just sleeping and not doing work.
[01:18:01] <brson> still investigating though, but this is something we need to resolve quickly. it is probably a contributor to the long build times
[01:18:19] <toddaaro> what do you mean by "leave sleeping"?
[01:18:21] <Luqman> nmatsakis: hmm, you're right. i forgot to change that bit
[01:18:26] <toddaaro> sleeping while there is work to do?
[01:18:44] <brson> toddaaro: i believe so, yes
[01:18:57] <toddaaro> I'll see if i get to it tomorrow
[01:19:09] <toddaaro> the singlethreaded mode is broken with fixed idle callbacks
[01:19:31] <toddaaro> and I'm not sure why, I think the shutdown strategy of using the handles might be fundamentally flawed and we just never noticed as there are so many idle callbacks around
[01:19:48] <toddaaro> you can send a message to a scheduler then drop your handle, and the scheduler event loop returns ignoring the message event
[01:20:28] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[01:20:41] <toddaaro> I might be able to rewrite the spawn implementation to avoid it, not certain
[01:20:56] *** Quits: myname (myname@F6BC1CBC.2C5F047.A0197E77.IP) (Ping timeout)
[01:21:02] *** Joins: myname (myname@F6BC1CBC.2C5F047.A0197E77.IP)
[01:21:59] <brson> toddaaro: it might be, but i'm skeptical because of the reason i said before - the actual closing of the handle happens back on the same thread as the event loop, while the loop is still reffed. as long as another idle callback is scheduled before the async_cb finishes the loop should stay reffed
[01:22:52] <toddaaro> this is unrelated, it is when a singlethreaded join_task is sent to a different scheduler
[01:23:04] <toddaaro> the async callback fires to ensure a callback to check for the message
[01:23:28] <toddaaro> but the dropping of the handle after the send finishes results in the event loop ref count hitting zero
[01:23:35] <toddaaro> so the message is never checked
[01:24:31] <toddaaro> so I think the whole model just doesn't make any sense, as the async callback fire doesn't guarentee the message will be received by the scheduler at all
[01:24:39] <brson> it is related. i don't think that is what happens. the dropping of the handle does not deref the event loop. the dropping of the handle sets an atomic flag that tells the callback (that wraps the callback) to drop the handle
[01:24:57] <toddaaro> it isn't dropping the event loop, it is returning before checking the event
[01:25:08] <toddaaro> and assert failing on messages in the queue when it exists
[01:25:10] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Quit: Bye!)
[01:25:11] <toddaaro> *exits
[01:25:15] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[01:25:21] <brson> yes, but i am doubtful that it is for the reason you think
[01:25:29] <toddaaro> do you have any thoughts?
[01:25:30] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: Places to go, people to annoy)
[01:26:14] <strcat> rusti: let xs = ~[1, 2, 3]; xs.move_iter().size_hint()
[01:26:15] -rusti- (0, None)
[01:26:17] <strcat> ;[
[01:26:27] <toddaaro> I was able to eliminate that error by including a handle to the destination scheduler inside join task, which was dropped when it ran
[01:26:44] <toddaaro> but that just repalced it with occasional deadlock on a pthread_join with every scheduler in epoll_wait
[01:28:57] *** Quits: steven_is_false (user@C5B76363.1FF1EBF8.1ECA502.IP) (Client exited)
[01:29:37] <toddaaro> I think the solution is to rewrite it such that the shutdown message is sent in the "main task" for that scheduler's on_exit function, like a normal scheduler
[01:30:01] <toddaaro> not entirely sure why, but it works that way on the other schedulers so maybe it will work here
[01:30:54] *** Joins: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net)
[01:34:01] <brson> toddaaro: do you know why putting the handle in the join task would cause a deadlock?
[01:34:21] <toddaaro> no, it is perplexing
[01:34:21] *** Joins: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP)
[01:34:23] <strcat> Luqman: ideally, it'd call reserve first too ;], but our macros aren't really up to that
[01:34:53] <toddaaro> that is what I stopped on today, so I'll see if I come up with anything
[01:36:11] <brson> i guess i can add a test case that UvRemoteCallback doesn't deref the event loop before triggering the callback
[01:36:21] <brson> the existing test case doesn't prove such a thing
[01:38:24] <toddaaro> the callback registration seems to be going fine, it just doesn't always seem to execute
[01:39:02] <Luqman> strcat: well, unless you manually added cases to match for upto n inputs :P
[01:41:25] *** Joins: vk (chatzilla@F92596F.2DEF7520.EF7679FA.IP)
[01:43:04] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[01:44:06] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[01:44:23] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[01:44:23] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/Rn8LWw
[01:44:23] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[01:44:34] <strcat> rusti: std::rand::task_rng().gen::<u64>()
[01:44:35] -rusti- <anon>:5:9: 6:5 error: type `@mut std::rand::IsaacRng` does not implement any method in scope named `gen`
[01:44:35] -rusti- <anon>:5          std::rand::task_rng().gen::<u64>()
[01:44:35] -rusti- <anon>:6     };
[01:44:35] -rusti- error: aborting due to previous error
[01:44:35] -rusti- application terminated with error code 101
[01:46:33] <strcat> rusti: use std::rand::RngUtil; let mut r = std::rand::task_rng(); for _ in range(0, 3) { printf!("%? ", r.gen()) }
[01:46:35] -rusti- pastebinned 8 lines of output: http://ix.io/7gH
[01:46:48] <strcat> rusti: use std::rand::RngUtil; let mut r = std::rand::task_rng(); for _ in range(0, 3) { printf!("%d ", r.gen()) }
[01:46:49] -rusti- -3055151864299695484 -2366277933765711098 -7588991783247290426 ()
[01:47:21] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[01:47:21] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/wrVltw
[01:47:21] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[01:47:22] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[01:47:22] <ghrust> 01[13rust01] 15bors pushed 6 new commits to 06auto: 02http://git.io/m7LN1g
[01:47:22] <ghrust> 13rust/06auto 14b820748 15Alex Crichton: Implement formatting arguments for strings and integers...
[01:47:22] <ghrust> 13rust/06auto 146feb58e 15Alex Crichton: Define integer formats for all widths...
[01:47:23] <ghrust> 13rust/06auto 141f6afa8 15Alex Crichton: Correct the padding on integer types for formatting
[01:47:25] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[01:49:16] *** Joins: ChrisMorgan (chris@moz-577E5F7F.its.monash.edu.au)
[01:51:21] *** Joins: recrack (Mibbit@B4104EBB.3CC170B1.1E14B209.IP)
[01:51:22] *** Joins: acrichto (acrichto@moz-69F2E428.ugrad.cs.cmu.edu)
[01:52:09] *** Joins: gavinb (gavinb@moz-CA19A0CF.vic.adsl.internode.on.net)
[01:54:17] *** Quits: brendan (brendaneic@538BABFE.A073F3E.97BBD552.IP) (Quit: brendan)
[01:56:37] *** Quits: joshua_ (joshua@moz-45967CBE.emarhavil.com) (Ping timeout)
[01:56:49] *** Quits: cdidd (cdidd@moz-1A721999.broadband.corbina.ru) (Input/output error)
[01:57:01] *** Joins: brendan (brendaneic@538BABFE.A073F3E.97BBD552.IP)
[01:57:05] *** Quits: sully (sully@moz-45967CBE.emarhavil.com) (Ping timeout)
[01:57:14] *** Joins: sully (sully@moz-45967CBE.emarhavil.com)
[01:58:06] <klutzy> in mk/rustllvm.mk, RUSTLLVM_INCS_$(1) has -iquote $$(S)src/rustllvm/include but the directory seems not to exist. is it intended or typo?
[01:58:13] *** Joins: cdidd (cdidd@moz-1137464F.broadband.corbina.ru)
[02:00:16] *** Quits: sigma (sigma@51C589B3.EF2694B5.DFAC6AA7.IP) (Ping timeout)
[02:00:53] *** Quits: michael_rb (michael_rb@moz-985E1E74.sw.biz.rr.com) (Ping timeout)
[02:00:58] *** Quits: n0v (n0v@29BE42A.39E37E6E.A6DC652B.IP) (Quit: ZNC - http://znc.in)
[02:03:32] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Quit: l4d2)
[02:03:49] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[02:04:23] *** Quits: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP) (Quit: Textual IRC Client: www.textualapp.com)
[02:04:51] *** Quits: dherman (dherman@moz-BBE3ABD.mv.mozilla.com) (Quit: dherman)
[02:05:37] *** Quits: tikue (tkuehn@374A74BD.DE6F369E.F4438BC.IP) (Quit: tikue)
[02:07:45] *** Joins: z0w0 (zack@moz-E12708D5.lns6.woo.bigpond.net.au)
[02:08:22] *** Quits: azakai (alon@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[02:08:34] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[02:09:19] *** Joins: samx (sami@moz-48EC0983.dyn.optonline.net)
[02:09:42] *** Quits: bnicholson (bnicholson@moz-E98974C1.hsd1.ca.comcast.net) (Input/output error)
[02:10:42] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[02:11:31] *** Joins: b (b@moz-55CA322E.org)
[02:11:51] *** Joins: bnicholson (bnicholson@moz-E98974C1.hsd1.ca.comcast.net)
[02:12:58] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[02:15:16] *** Quits: Earnestly (earnest@B0BDF733.8FDE20A.5411983D.IP) (Ping timeout)
[02:16:36] *** Quits: sebcrozet (sebcrozet@moz-F96421F3.w80-13.abo.wanadoo.fr) (Ping timeout)
[02:20:11] *** Joins: tikue (tkuehn@374A74BD.DE6F369E.F4438BC.IP)
[02:20:32] *** Quits: eatkinson (eatkinson@moz-BBE3ABD.mv.mozilla.com) (Quit: eatkinson)
[02:21:11] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[02:23:23] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[02:23:23] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14b1c2792 to 14433fbe8: 02http://git.io/N3iJvQ
[02:23:23] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[02:23:25] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[02:23:25] <ghrust> 01[13rust01] 15bors pushed 6 new commits to 06auto: 02http://git.io/yAi5FQ
[02:23:25] <ghrust> 13rust/06auto 14b820748 15Alex Crichton: Implement formatting arguments for strings and integers...
[02:23:25] <ghrust> 13rust/06auto 146feb58e 15Alex Crichton: Define integer formats for all widths...
[02:23:26] <ghrust> 13rust/06auto 141f6afa8 15Alex Crichton: Correct the padding on integer types for formatting
[02:23:28] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[02:26:13] <acrichto> graydon: ping
[02:26:42] *** Quits: paulproteus (quassel@rose.makesad.us) (Ping timeout)
[02:27:51] *** Joins: paulproteus (quassel@moz-E86A3B42.makesad.us)
[02:31:04] *** Quits: zz_kimundi (kimundi@moz-216AF03A.dip0.t-ipconnect.de) (Ping timeout)
[02:31:46] *** Joins: steven_is_false (user@C5B76363.1FF1EBF8.1ECA502.IP)
[02:33:23] <steven_is_false> Hi. I'm trying to track down a double free error. How can I register a break on the double free error function?
[02:34:01] *** Joins: zz_kimundi (kimundi@moz-42A2AF2C.dip0.t-ipconnect.de)
[02:34:01] *** Quits: richard|s (mindginati@moz-9C555AF3.spmconsultants.co.nz) (Quit: zzZZZ)
[02:34:26] *** zz_kimundi is now known as kimundi
[02:38:29] *** Quits: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[02:38:29] *** Parts: steven_is_false (user@C5B76363.1FF1EBF8.1ECA502.IP) (ERC Version 5.3 (IRC client for Emacs))
[02:45:29] *** Quits: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net) (Quit: jorendorff)
[02:48:37] *** Joins: bent (chatzilla@moz-932324BF.hsd1.ca.comcast.net)
[02:49:19] *** Quits: milinda (milinda@moz-C79ADF95.dhcp-bl.indiana.edu) (Input/output error)
[02:50:07] *** Joins: erickt (etryzelaar@49C4075F.3AC15C18.2321E71E.IP)
[02:51:20] *** Joins: richard|s (mindginati@moz-C1729134.dsl.clear.net.nz)
[02:55:55] *** Quits: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP) (Connection reset by peer)
[02:56:04] *** Quits: richard|s (mindginati@moz-C1729134.dsl.clear.net.nz) (Connection reset by peer)
[02:56:19] *** Joins: richard|s (mindginati@moz-C1729134.dsl.clear.net.nz)
[02:57:24] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[03:00:28] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[03:00:55] *** Joins: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP)
[03:14:55] *** Quits: bent (chatzilla@moz-932324BF.hsd1.ca.comcast.net) (Quit: ChatZilla 0.9.90.1-rdmsoft [XULRunner 22.0/20130619132145])
[03:31:06] <sp3d> rustc --ls doesn't actually show symbols, right?
[03:32:14] *** Quits: msingle (Thunderbir@moz-20675462.nrflva.fios.verizon.net) (Ping timeout)
[03:35:06] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[03:42:32] *** Quits: vk (chatzilla@F92596F.2DEF7520.EF7679FA.IP) (Connection reset by peer)
[03:44:08] <sp3d> how would I go about using "println" without it being in the prelude?
[03:45:07] *** Quits: gavinb (gavinb@moz-CA19A0CF.vic.adsl.internode.on.net) (Quit: gavinb)
[03:45:53] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[03:48:27] <ChrisMorgan> sp3d: `use std::io::println;` (am I missing something?)
[03:49:33] *** Joins: gavinb (gavinb@moz-CA19A0CF.vic.adsl.internode.on.net)
[03:50:00] <sp3d> rusti: use std::io::println; std::io::println("test");
[03:50:00] -rusti- test
[03:50:00] -rusti- ()
[03:50:05] *** Quits: samx (sami@moz-48EC0983.dyn.optonline.net) (Quit: This computer has gone to sleep)
[03:50:18] <sp3d> huh, that doesn't work locally?
[03:50:42] <ChrisMorgan> You got it a little wrong there, actually.
[03:50:45] <sp3d> I get "unresolved name `std::io::println`"
[03:50:57] <ChrisMorgan> rusti: use std::io::println; println("test");
[03:50:57] -rusti- test
[03:50:58] -rusti- ()
[03:51:11] <sp3d> does that work if println wasn't in the prelude already?
[03:51:18] <ChrisMorgan> rusti: use std; std::io::println("test");
[03:51:19] -rusti- test
[03:51:19] -rusti- ()
[03:51:40] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[03:52:10] <ChrisMorgan> sp3d: an expression like `std::io::println` assumes std to be in scope. An item like `use std::io::println;` puts println into scope, not std.
[03:52:28] <sp3d> hm
[03:52:52] <ChrisMorgan> (That your first example worked indicates that rusti has `use std;` in it.)
[03:53:06] <sp3d> "use std;" doesn't work locally either?
[03:53:27] <sp3d> "error: unresolved import (maybe you meant `std::*`?)"
[03:54:15] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Quit: Leaving...)
[03:54:23] <ChrisMorgan> Well, actually `extern mod std;`
[03:54:47] *** Joins: samx (sami@moz-48EC0983.dyn.optonline.net)
[03:56:24] <sp3d> here's the code I'm trying to compile: http://pastebin.com/U1uxJTxY
[03:58:15] <ChrisMorgan> sp3d: imports don't get through into to a mod item. Shift `extern mod std` into the mod.
[03:58:45] <sp3d> cripes
[03:58:54] <sp3d> a tutorial for all these fiddly rules would be great
[03:58:54] <ChrisMorgan> Alternatively use super::std::io::println.
[03:59:20] <ChrisMorgan> Sure would be. I found these things out by trial and error, largely.
[04:00:51] <sp3d> coming from a primarily C background this seems a lot harder to conceptualize than the semantics of #include
[04:01:29] <ChrisMorgan> Naturally. With C, everything is global. But that's crazy. :-)
[04:02:46] <sp3d> no, an include into a .c file is "local"
[04:02:57] <sp3d> since you generally don't include .c into anything else
[04:03:06] <sp3d> an an include into a public header is "public"
[04:03:10] <sp3d> and*
[04:03:28] <sp3d> it's probably just a matter of familiarity though, and not having seen it all written out in one place
[04:04:13] <ChrisMorgan> Yeah. With less than a month's experience of Rust, I'm quite comfortable with it. I had to write some Processing code (basically Java) this morning... *shudder*.
[04:05:19] <sp3d> right now I'm writing C that generates rust, trying to maybe breathe some life into the grust GObject-Introspection bindings project
[04:06:49] <sp3d> the glib mainloop presents serious challenges but a lot of useful bindings can be generated without needing mainloop integration yet
[04:09:46] *** Joins: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net)
[04:23:44] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Ping timeout)
[04:24:44] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[04:26:25] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[04:26:25] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/yAi5FQ
[04:26:25] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[04:29:22] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[04:29:22] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/_K96yA
[04:29:22] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[04:29:23] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[04:29:23] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/cJmAKw
[04:29:23] <ghrust> 13rust/06auto 14afb2077 15Niko Matsakis: Fix freezing of @mut Objects when passing as argument
[04:29:23] <ghrust> 13rust/06auto 14bf2d3c8 15Niko Matsakis: Reborrow even when passing &Object to &Object, so as to permit freezing
[04:29:24] <ghrust> 13rust/06auto 14e86d414 15bors: auto merge of #8497 : nikomatsakis/rust/improvements-to-object-coercion, r=pcwalton...
[04:29:26] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[04:36:34] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Client exited)
[04:38:50] *** Joins: vk (chatzilla@moz-389FEE13.hsd1.ca.comcast.net)
[04:39:52] *** Quits: jaen (jaen@moz-D2DF94DF.play-internet.pl) (Ping timeout)
[04:40:20] *** Joins: FDS (arnaud@moz-CE4D5907.bdx.modulonet.fr)
[04:40:46] *** Quits: erickt (etryzelaar@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[04:43:27] *** Quits: lmandel (lmandel@moz-57D3C086.dsl.bell.ca) (Quit: lmandel)
[04:46:30] <aatch> sp3d, it doesn't matter if rusti has 'use std' or not, since use statements don't affect each other.
[04:46:55] <aatch> rusti: use std::io; use io::println; println("Test")
[04:46:58] -rusti- pastebinned 8 lines of output: http://ix.io/7gV
[04:47:18] *** Quits: samx (sami@moz-48EC0983.dyn.optonline.net) (Quit: This computer has gone to sleep)
[04:49:37] <sp3d> but they can "pollute" the same namespace, no? that's why I was asking if behavior in the absence of prelude would be the same
[04:50:28] <aatch> prelude has no special behaviour
[04:51:39] <sp3d> I thought that prelude was what made it possible to refer to println by "println" without qualifiers by default
[04:52:10] <aatch> sp3d, the prelude is implicitly `use`d at the top of the... crate, I think.
[04:52:23] <aatch> So there is an implicit `use std::prelude::*`
[04:52:35] <aatch> and then prelude has a bunch of re-exports
[04:52:37] <sp3d> the tutorial says "module"
[04:52:39] <sp3d> right
[04:53:11] <aatch> sp3d, yeah, I think it is module.
[04:53:58] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[04:54:14] <aatch> Oh, it's the implicit 'extern mod std' that plays funny with resolution outside the crate module (the pretend module that represents the top-level module)
[04:54:21] *** Joins: dherman (dherman@moz-BBE3ABD.mv.mozilla.com)
[04:54:21] *** ChanServ sets mode: +o dherman
[04:54:29] <aatch> so sometimes you need 'use std' in other modules.
[04:55:31] <ChrisMorgan> Yeah, I made a mistake with that earlier. Once you're in another module it is indeed `use std;` that you should use rather than `extern mod std;`
[04:55:51] <aatch> I have a feeling that isn't intended.
[04:56:04] <sp3d> is there a reason symbol visibility isn't lexically scoped within a given file? it seems like that would be a very intuitive approach, but maybe it causes problems with specifying which imports are reexported?
[04:56:29] <aatch> sp3d, not sure. Ask pcwalton.
[04:56:38] <aatch> He did most of the resolution work.
[04:57:02] <pcwalton> you're supposed to be able to take modules and move them between files without breaking them
[04:57:03] <pcwalton> helps refactoring
[04:57:11] <pcwalton> there is no concept of a "file" in resolve sense
[04:57:38] <sp3d> hrm
[04:57:44] <aatch> pcwalton, there's no concept of "file" once you get past parsing (except for error messages)
[04:57:52] <sp3d> but you can import things into the *crate*?
[04:58:16] <sp3d> (which is, I guess, what a top-level "use" would do?)
[04:58:30] <sp3d> or is there an implicit module if you do that... ack.
[04:58:37] <aatch> sp3d, no, only the crate module, which has the same rules as a regular module
[04:59:30] *** Quits: brendan (brendaneic@538BABFE.A073F3E.97BBD552.IP) (Quit: brendan)
[04:59:55] <sp3d> what does a top-level "use" in a file do, then?
[05:00:46] <aatch> sp3d, well a file is a module itself, so it adds the symbols into the module like normal.
[05:01:02] <sp3d> so there *is* an implicit module
[05:01:23] <benh> It's not really implicit because somewhere in the crate it says mod filename;
[05:01:25] <aatch> sp3d, yes, kinda. You still have to declare it explicitly, somewhere
[05:01:46] <sp3d> it never ends D:
[05:01:54] <sp3d> I'll need a while to absorb all this I guess
[05:03:09] <sp3d> if each file has its own module, though, wouldn't you need to change all imports which mention that module in the :: chain if you move a module out of that file?
[05:04:03] <sp3d> or is that the minimal feasible churn, and other schemes would be more invasive/pervasive?
[05:05:03] <aatch> sp3d, well if you have a 'mod foo { ... }' in a file, bar.rs, then the path is '...::bar::foo', if you move bar.rs to bar/mod.rs and the foo module to bar/foo.rs then nothing else has to change.
[05:05:17] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[05:05:27] <benh> the idea is, i think, that mod foo is gonna keep compiling no matter where in the crate it is
[05:05:44] <aatch> Oh, and change the 'mod foo { ... }' in bar.rs (now bar/mod.rs) to 'mod foo;'
[05:05:53] <benh> (unless you use super:: i guess?)
[05:06:20] <aatch> If you don't change the topology of the modules, then literally nothing will break.
[05:06:34] <aatch> As I said, after parsing, files are all but gone.
[05:06:35] <sp3d> mm
[05:11:21] *** Quits: txdv (quassel@966F3542.3BA477DA.14C26596.IP) (Ping timeout)
[05:12:57] <aatch> sp3d, probably the easiest way to think about it is that when the parser sees 'mod foo;' it looks for 'foo.rs' or 'foo/mod.rs' and then just substitutes the 'mod foo;' with 'mod foo { <contents of file> }'
[05:13:03] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[05:15:44] <sp3d> that doesn't seem like it really works out in the face of mutual usage, but I guess I get what you mean
[05:16:14] *** Quits: vk (chatzilla@moz-389FEE13.hsd1.ca.comcast.net) (Ping timeout)
[05:17:38] *** Quits: dherman (dherman@moz-BBE3ABD.mv.mozilla.com) (Quit: dherman)
[05:18:02] <aatch> sp3d, what do you mean by 'mutual usage'?
[05:18:16] <sp3d> two modules, each of which uses functions from the other?
[05:18:26] <sp3d> or "items", I suppose
[05:18:52] <aatch> sp3d, that's separate from the way modules are treated though.
[05:19:47] <sp3d> ohhh, I guess I had "use" and "mod" confused there
[05:21:30] <sp3d> thanks for all the explanation
[05:27:26] *** Quits: tikue (tkuehn@374A74BD.DE6F369E.F4438BC.IP) (Quit: tikue)
[05:34:25] *** Quits: jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Quit: zzz)
[05:45:16] *** Quits: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP) (Ping timeout)
[05:46:35] *** Joins: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP)
[05:52:38] *** Quits: richard|s (mindginati@moz-C1729134.dsl.clear.net.nz) (Quit: zzZZZ)
[06:01:43] *** Quits: ab (alex@BC9D99CC.37C1012D.FE617B51.IP) (Ping timeout)
[06:01:52] *** Joins: dim-an (ermolovd@moz-FE167E47.nationalcablenetworks.ru)
[06:03:55] *** Quits: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net) (Ping timeout)
[06:05:27] *** Joins: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net)
[06:08:30] *** Joins: brendan (brendaneic@E908EF74.6BAC3F3B.56A6FAA.IP)
[06:11:01] *** Quits: dim-an (ermolovd@moz-FE167E47.nationalcablenetworks.ru) (Client exited)
[06:22:39] *** Quits: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca) (Quit: Leaving)
[06:23:17] *** Quits: ChrisMorgan (chris@moz-577E5F7F.its.monash.edu.au) (Ping timeout)
[06:24:53] *** Quits: pcwalton (pcwalton@E2F7352.56080C53.97BBD552.IP) (Quit: pcwalton)
[06:26:23] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[06:26:23] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/cJmAKw
[06:26:23] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[06:27:20] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Ping timeout)
[06:27:54] <bjz> how do you match against struct-like enum enries
[06:27:58] <bjz> *entries
[06:28:17] <bjz> I was trying something like: StartElement {_} @ se => fmt!("<%s%s>", se.name, se.atts.to_str()),
[06:29:20] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[06:29:20] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/zj1oIw
[06:29:20] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[06:29:20] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[06:29:20] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/NCezCg
[06:29:20] <ghrust> 13rust/06auto 14c14773a 15Tim Chevalier: rustc: Eliminate a derived error in check::_match
[06:29:20] <ghrust> 13rust/06auto 1460ee999 15bors: auto merge of #8479 : catamorphism/rust/derived-errors, r=bblum...
[06:29:21] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[06:29:57] <dbaupp> rusti: enum Foo { Bar { x: int, y: int } } match Bar { x: 1, y: 1 } { Bar { x, y, _ } => fmt!("%? %?", x, y) } 
[06:29:58] -rusti- ~"1 1"
[06:30:08] <dbaupp> bjz: ^
[06:30:45] <dbaupp> bjz: (an @ pattern needs to be <ident> @ <pattern>, and it doesn't work, because you can't access the fields of a struct like enum, even when the compiler could "know" that they exist.)
[06:31:10] <bjz> dang
[06:31:13] <dbaupp> rusti: enum Foo { Bar { x: int, y: int } } match Bar { x: 1, y: 1 } { Bar { x: ref x, y: ref y, _ } => fmt!("%? %?", *x, *y) } 
[06:31:14] -rusti- ~"1 1"
[06:31:20] <bjz> will that ever work?
[06:31:23] <dbaupp> maybe
[06:31:36] <dbaupp> I think nmatsakis ha[sd] some ideas for refinement types
[06:31:45] <bjz> I just want self-documenting code
[06:31:57] <dbaupp> (which is what this is, assuming I've got the correct terminology.)
[06:32:10] *** Quits: graydon (graydon@moz-F14EE0DB.cable.teksavvy.com) (Quit: Leaving.)
[06:32:15] *** Quits: LU324 (weechat@9AF4F288.83671C58.1B5D53D7.IP) (Input/output error)
[06:32:21] <bjz> I don't want my messages to be these long tuples
[06:32:24] <bjz> but yeah
[06:32:30] <dbaupp> fo reference http://smallcultfollowing.com/babysteps/blog/2012/08/24/datasort-refinements/
[06:32:34] <bjz> Bar { x, y, _ } works
[06:33:10] *** Joins: LU324 (weechat@9AF4F288.83671C58.1B5D53D7.IP)
[06:33:28] <dbaupp> hopefully Bar { ref x, ref y } will work at some point (rather than `x: ref x, y: ref y`), but it doesn't currently.
[06:33:40] <dbaupp> (if you want by-ref, obviously.)
[06:34:24] *** Quits: FDS (arnaud@moz-CE4D5907.bdx.modulonet.fr) (Ping timeout)
[06:34:45] <bjz> AGH!
[06:34:50] <bjz> that sucks!
[06:35:02] <bjz> just ran into that
[06:36:00] <bjz> I guess I'll have to do long incomprehensible tuples then :(
[06:37:58] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[06:37:58] *** ChanServ sets mode: +o dherman
[06:38:17] <dbaupp> what, tuples are worse than `x: ref x`?
[06:39:38] <dbaupp> you can also do `StartElement(StartElementInner) .. struct StartElementInner { name: ~str, atts: ... }`
[06:39:45] *** Quits: brendan (brendaneic@E908EF74.6BAC3F3B.56A6FAA.IP) (Quit: brendan)
[06:40:30] *** Quits: LU324 (weechat@9AF4F288.83671C58.1B5D53D7.IP) (Input/output error)
[06:43:39] *** Joins: LU324 (weechat@9AF4F288.83671C58.1B5D53D7.IP)
[06:48:04] *** Joins: Ms2ger (Ms2ger@moz-3E74B52D.adsl-dyn.isp.belgacom.be)
[06:48:04] *** Quits: LU324 (weechat@9AF4F288.83671C58.1B5D53D7.IP) (Input/output error)
[06:48:46] *** Joins: LU324 (weechat@9AF4F288.83671C58.1B5D53D7.IP)
[06:49:21] *** Joins: Palmik (palmik@moz-CC484FDD.tmcz.cz)
[06:50:33] *** Quits: LU324 (weechat@9AF4F288.83671C58.1B5D53D7.IP) (Input/output error)
[06:52:25] *** Joins: LU324 (weechat@9AF4F288.83671C58.1B5D53D7.IP)
[06:57:14] *** Quits: victorporof (victorporo@DBFC8886.2203F6DA.D111398B.IP) (Quit: victorporof)
[06:57:31] *** Joins: victorporof (victorporo@DBFC8886.2203F6DA.D111398B.IP)
[06:58:51] *** Quits: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net) (Ping timeout)
[06:59:20] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[06:59:21] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1460ee999 to 14e86d414: 02http://git.io/N3iJvQ
[06:59:21] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[06:59:21] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[06:59:21] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/P-EM4w
[06:59:21] <ghrust> 13rust/06auto 14db2d9ca 15Tim Chevalier: rustc: Give a hint when a static method call has fewer than expected type parameters...
[06:59:21] <ghrust> 13rust/06auto 140efbb25 15bors: auto merge of #8477 : catamorphism/rust/issue-4096, r=msullivan...
[06:59:22] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[06:59:46] *** flaper87|afk is now known as flaper87
[07:00:06] <bjz> oh well, dbaupp: https://github.com/bjz/sax-rs
[07:01:47] <dbaupp> bjz: that's not so bad
[07:02:08] *** Quits: lerc (quassel@B2E8CAD3.A8D14E52.788638A4.IP) (Ping timeout)
[07:02:08] *** Quits: echristo (echristo@moz-1892C634.hsd1.ca.comcast.net) (Quit: echristo)
[07:02:39] <bjz> it was more when I was trying to do the Start/EndElementNs messages, which have quite a few parameters
[07:03:02] <bjz> I don't really need them for now, so I left them out
[07:03:53] *** Joins: sebcrozet (sebcrozet@moz-A855F6C0.w82-127.abo.wanadoo.fr)
[07:04:13] *** Joins: lerc (quassel@B2E8CAD3.A8D14E52.788638A4.IP)
[07:06:02] *** Joins: maik_ (maik___@moz-E1B76F8B.dip0.t-ipconnect.de)
[07:09:30] <dbaupp> rusti: trait Foo {} impl Foo for uint {} let x = @1u as @Foo; let y: &Foo = x;
[07:09:31] -rusti- <anon>:5:68: 5:69 warning: unused variable: `y` [-W unused-variable (default)]
[07:09:31] -rusti- <anon>:5          trait Foo {} impl Foo for uint {} let x = @1u as @Foo; let y: &Foo = x;
[07:09:31] -rusti-                                                                              ^
[07:09:31] -rusti- ()
[07:09:44] <dbaupp> rusti: trait Foo {} impl Foo for uint {} let x = ~1u as ~Foo; let _y: &Foo = x;
[07:09:44] -rusti- ()
[07:10:31] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[07:11:34] <myname> ich 
[07:11:38] <myname> damnit
[07:12:51] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[07:20:31] *** Quits: gavinb (gavinb@moz-CA19A0CF.vic.adsl.internode.on.net) (Quit: gavinb)
[07:22:05] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[07:23:33] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[07:24:11] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[07:26:10] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[07:26:41] *** Joins: pnkfelix1 (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[07:27:03] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Connection reset by peer)
[07:28:06] *** Joins: m_kato (m_kato@moz-C286AD9A.bitcat.net)
[07:28:22] *** Joins: sk (sk@61A494B3.BA40E8A.AAC02D62.IP)
[07:30:09] *** Quits: recrack (Mibbit@B4104EBB.3CC170B1.1E14B209.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[07:34:49] *** Joins: cypher (ircnet@moz-EA42E471.static.surfer.at)
[07:36:50] *** Joins: pyrac (pyrac@moz-F2B1E85D.w92-162.abo.wanadoo.fr)
[07:38:52] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[07:39:04] *** Quits: pnkfelix1 (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[07:41:57] *** Joins: pnkfelix1 (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[07:42:16] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[07:45:22] *** Quits: pnkfelix1 (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[07:46:24] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[07:48:02] *** Joins: pnkfelix1 (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[07:48:06] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Connection reset by peer)
[07:48:29] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.1)
[07:50:51] *** Quits: tautologico (lymph@8ABDEDA.34CAB63A.7B974E06.IP) (Quit: tautologico)
[07:52:03] *** Quits: pyrac (pyrac@moz-F2B1E85D.w92-162.abo.wanadoo.fr) (Ping timeout)
[07:54:09] *** Joins: pyrac (pyrac@moz-F2B1E85D.w92-162.abo.wanadoo.fr)
[07:54:24] *** Joins: jaen (jaen@moz-2B565DD9.neoplus.adsl.tpnet.pl)
[07:54:55] *** Quits: santiago (santiago@moz-8ADE82B4.socal.res.rr.com) (Ping timeout)
[07:55:42] *** Joins: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP)
[08:03:17] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[08:03:37] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[08:12:11] *** Quits: Azdle (Azdle@moz-B334B496.hfc.comcastbusiness.net) (Ping timeout)
[08:13:35] *** Joins: Azdle (Azdle@moz-B334B496.hfc.comcastbusiness.net)
[08:15:15] *** Quits: Azdle (Azdle@moz-B334B496.hfc.comcastbusiness.net) (Ping timeout)
[08:15:21] *** Quits: dew (Instantbir@moz-8A63B53.dhcp.stls.mo.charter.com) (Quit: Instantbird 1.4 -- http://www.instantbird.com)
[08:17:27] <cmr> Does patrick ever sleep, or did he write an AI to respond to ML posts?
[08:17:48] <pnkfelix1> its not that late in Pacific time
[08:17:59] *** Quits: pyrac (pyrac@moz-F2B1E85D.w92-162.abo.wanadoo.fr) (Ping timeout)
[08:18:05] <cmr> ah
[08:18:12] <pnkfelix1> (oh wait, he's not in pacific time right now, he's in new zealand)
[08:18:44] <cmr> Ah, that makes even more sense!
[08:18:51] *** Joins: pyrac (pyrac@moz-F2B1E85D.w92-162.abo.wanadoo.fr)
[08:21:24] *** Quits: pyrac (pyrac@moz-F2B1E85D.w92-162.abo.wanadoo.fr) (Ping timeout)
[08:22:54] *** Joins: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP)
[08:23:05] *** Joins: lucian_ (lucian@6B2B4644.4304AE1E.CE5E78F6.IP)
[08:23:05] *** Quits: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP) (Connection reset by peer)
[08:27:01] *** Joins: pyrac (pyrac@moz-F2B1E85D.w92-162.abo.wanadoo.fr)
[08:30:38] *** Joins: CarpNet (ac@moz-FD24B77.sohonet.co.uk)
[08:34:15] *** Quits: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net) (Quit: eatkinson)
[08:34:33] *** Joins: fabiand (fabiand@moz-40AC6CE3.adsl.alicedsl.de)
[08:35:24] *** Joins: santiago (santiago@moz-8ADE82B4.socal.res.rr.com)
[08:35:58] *** Quits: busylizzy (lisa@85228838.12D0DC84.211374C4.IP) (Ping timeout)
[08:36:04] *** Joins: busylizzy (lisa@85228838.12D0DC84.211374C4.IP)
[08:42:15] *** Joins: k4nar (quassel@moz-F5EFF779.kimsufi.com)
[08:47:00] *** Quits: maik_ (maik___@moz-E1B76F8B.dip0.t-ipconnect.de) (Ping timeout)
[08:49:38] *** Joins: msingle (Thunderbir@moz-20675462.nrflva.fios.verizon.net)
[08:56:20] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[08:56:20] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/P-EM4w
[08:56:20] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[08:59:19] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[08:59:19] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/a6m64w
[08:59:19] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[08:59:20] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[08:59:20] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/1ePutA
[08:59:20] <ghrust> 13rust/06auto 14c45c264 15Graydon Hoare: test: un-xfail now working run-pass/foreign-struct.rs, close #2334.
[08:59:20] <ghrust> 13rust/06auto 14af5cea8 15bors: auto merge of #8173 : graydon/rust/2013-07-31-issue-2334-un-xfail-a-test, r=catamorphism
[08:59:21] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[09:03:20] *** Joins: davbo (dave@moz-3FFA637C.oucs.ox.ac.uk)
[09:11:15] *** Joins: maik_ (maik___@moz-E1B76F8B.dip0.t-ipconnect.de)
[09:15:19] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[09:15:46] *** Quits: vadimcn (chatzilla@A2267643.76F9E272.DA40C4B3.IP) (Ping timeout)
[09:21:29] *** Quits: m_kato (m_kato@moz-C286AD9A.bitcat.net) (Quit: Leaving...)
[09:22:38] *** Joins: vadimcn (chatzilla@A2267643.76F9E272.DA40C4B3.IP)
[09:24:45] *** Quits: robn (robn@moz-76B0302C.static.internode.on.net) (Ping timeout)
[09:26:23] <dbaupp> cmr: ping
[09:28:07] *** Joins: brendan (brendaneic@E908EF74.6BAC3F3B.56A6FAA.IP)
[09:29:19] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[09:29:20] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14af5cea8 to 140efbb25: 02http://git.io/N3iJvQ
[09:29:20] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[09:29:23] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[09:29:23] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/HOPUcA
[09:29:23] <ghrust> 13rust/06auto 14cbfb65d 15Corey Richardson: Add a Default trait.
[09:29:23] <ghrust> 13rust/06auto 149cdebc4 15bors: auto merge of #8438 : cmr/rust/default, r=brson
[09:29:23] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[09:31:13] *** Joins: robn (robn@moz-76B0302C.static.internode.on.net)
[09:31:40] *** Quits: msingle (Thunderbir@moz-20675462.nrflva.fios.verizon.net) (Ping timeout)
[09:32:29] *** Quits: brendan (brendaneic@E908EF74.6BAC3F3B.56A6FAA.IP) (Quit: brendan)
[09:32:46] *** Joins: brendan (brendaneic@E908EF74.6BAC3F3B.56A6FAA.IP)
[09:38:21] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[09:38:21] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 149cdebc4 to 140efbb25: 02http://git.io/N3iJvQ
[09:38:21] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[09:38:22] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[09:38:22] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/k2dPMw
[09:38:22] <ghrust> 13rust/06auto 14c8ca989 15Huon Wilson: std: add a Clone impl for HashSet.
[09:38:22] <ghrust> 13rust/06auto 14cd656c7 15bors: auto merge of #8439 : huonw/rust/hashset-clone, r=cmr...
[09:38:23] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[09:41:54] *** Joins: Earnestly (earnest@B0BDF733.8FDE20A.5411983D.IP)
[09:45:47] *** Joins: doener (bs@moz-AA189A5A.unitymedia.biz)
[09:45:56] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[09:49:02] *** Joins: donri (dag@moz-9BB61102.tbcn.telia.com)
[10:11:49] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[10:13:29] *** Joins: dew (Instantbir@moz-8A63B53.dhcp.stls.mo.charter.com)
[10:16:03] *** Quits: sk (sk@61A494B3.BA40E8A.AAC02D62.IP) (Quit: Leaving)
[10:25:42] *** Joins: true_droid (true_droid@moz-123FD9B8.beck.volia.net)
[10:25:53] *** Joins: richard|s (mindginati@moz-268511E5.dsl.dyn.ihug.co.nz)
[10:26:37] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Connection reset by peer)
[10:29:13] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[10:29:58] *** Joins: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com)
[10:33:37] *** Quits: huhlig-home (huhlig@moz-C8339267.hfc.comcastbusiness.net) (Connection reset by peer)
[10:48:16] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Quit: Leaving.)
[10:58:47] *** Quits: jroll (jroll@moz-5989BB9E.members.linode.com) (Ping timeout)
[11:01:35] *** Joins: jroll (jroll@moz-5989BB9E.members.linode.com)
[11:04:52] *** Quits: lerc (quassel@B2E8CAD3.A8D14E52.788638A4.IP) (Ping timeout)
[11:06:26] *** Joins: sk (sk@A8E15A9E.F427598.78DD174B.IP)
[11:09:42] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Ping timeout)
[11:19:07] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[11:19:46] *** Quits: maik_ (maik___@moz-E1B76F8B.dip0.t-ipconnect.de) (Ping timeout)
[11:22:52] *** Joins: fyolnish (fyolnish@moz-369B9502.uqwimax.jp)
[11:24:59] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Ping timeout)
[11:25:16] *** Joins: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net)
[11:28:13] *** Quits: fyolnish (fyolnish@moz-369B9502.uqwimax.jp) (Client exited)
[11:29:07] *** Joins: lerc (quassel@B2E8CAD3.A8D14E52.788638A4.IP)
[11:33:33] *** Joins: maik_ (maik___@moz-E1B76F8B.dip0.t-ipconnect.de)
[11:35:13] *** Quits: Jesin (Jessin_@moz-48B48C95.eecs.lehigh.edu) (Ping timeout)
[11:35:19] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[11:35:20] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/k2dPMw
[11:35:20] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[11:36:36] *** Quits: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP) (Quit: bbl or tomorrow)
[11:38:17] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[11:38:17] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/ya8a8A
[11:38:17] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[11:39:40] <dbaupp> https://github.com/mozilla/rust/pull/8508 r?
[11:40:58] *** Joins: Jesin (Jessin_@moz-48B48C95.eecs.lehigh.edu)
[11:41:21] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[11:41:21] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/ya8a8A
[11:41:21] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[11:41:22] *** Joins: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net)
[11:41:23] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[11:41:23] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/M9D0GQ
[11:41:23] <ghrust> 13rust/06auto 14f3a79cf 15Steven Fackler: Fixed option_env! type...
[11:41:23] <ghrust> 13rust/06auto 14ac49e65 15bors: auto merge of #8440 : sfackler/rust/env-fix, r=pcwalton...
[11:41:23] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[11:42:31] *** Quits: richard|s (mindginati@moz-268511E5.dsl.dyn.ihug.co.nz) (Ping timeout)
[11:44:28] *** Quits: z0w0 (zack@moz-E12708D5.lns6.woo.bigpond.net.au) (Client exited)
[11:45:32] *** Quits: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net) (Ping timeout)
[11:45:39] *** Joins: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net)
[11:49:14] *** Joins: maik__ (maik___@moz-92A2E009.dip0.t-ipconnect.de)
[11:49:15] *** Quits: Palmik (palmik@moz-CC484FDD.tmcz.cz) (Ping timeout)
[11:50:08] *** Quits: maik_ (maik___@moz-E1B76F8B.dip0.t-ipconnect.de) (Ping timeout)
[11:50:22] *** Joins: richard|s (mindginati@moz-268511E5.dsl.dyn.ihug.co.nz)
[11:50:28] *** Quits: richard|s (mindginati@moz-268511E5.dsl.dyn.ihug.co.nz) (Quit: richard|s)
[11:50:30] *** Quits: dbaupp (Thunderbir@moz-712A1135.lns20.syd6.internode.on.net) (Ping timeout)
[11:51:02] *** Joins: Palmik (palmik@moz-CC484FDD.tmcz.cz)
[11:52:12] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[11:54:16] *** Joins: dbaupp (Thunderbir@moz-EAA09AEF.lns20.syd7.internode.on.net)
[11:55:00] *** Quits: sebcrozet (sebcrozet@moz-A855F6C0.w82-127.abo.wanadoo.fr) (Ping timeout)
[11:55:56] *** Joins: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[11:56:00] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[12:04:50] *** Joins: ab (alex@BC9D99CC.37C1012D.FE617B51.IP)
[12:07:42] *** Joins: BitPuffin (quassel@moz-7BB00EC9.bredband.comhem.se)
[12:08:47] <dbaupp> is it possible to build with optimisations with rustpkg?
[12:08:58] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[12:11:10] *** Quits: maik__ (maik___@moz-92A2E009.dip0.t-ipconnect.de) (Ping timeout)
[12:15:05] *** Joins: sebcrozet (sebcrozet@moz-F96421F3.w80-13.abo.wanadoo.fr)
[12:15:34] *** Joins: maik__ (maik___@moz-92A2E009.dip0.t-ipconnect.de)
[12:16:56] *** Quits: KindOne (KindOne@moz-65A10CB1.dynamic.ip.windstream.net) (Input/output error)
[12:17:33] *** Joins: KindOne (KindOne@moz-65A10CB1.dynamic.ip.windstream.net)
[12:20:54] *** Quits: maik__ (maik___@moz-92A2E009.dip0.t-ipconnect.de) (Ping timeout)
[12:21:55] *** Quits: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net) (Quit: jorendorff)
[12:27:44] *** Quits: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[12:32:38] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Client exited)
[12:33:03] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[12:33:23] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[12:34:47] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[12:36:52] *** Quits: brendan (brendaneic@E908EF74.6BAC3F3B.56A6FAA.IP) (Quit: brendan)
[12:37:57] *** Quits: donri (dag@moz-9BB61102.tbcn.telia.com) (Ping timeout)
[12:38:17] *** Joins: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net)
[12:40:27] *** Quits: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net) (Ping timeout)
[12:40:31] <ChrisMorgan> Bah, my rust-http is causing an ICE on a fresh rust build :-(
[12:41:58] <ChrisMorgan> "internal compiler error: debuginfo: FunctionDebugContext should be initialized but is not!"
[12:41:59] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[12:45:54] *** Joins: maxli (maxli@13F2CEC5.7672369.D8E68FF6.IP)
[12:48:43] <dbaupp> ChrisMorgan: file it!
[12:48:59] <ChrisMorgan> dbaupp: I will. I just like to whinge first :P
[12:49:23] <ChrisMorgan> (Temporary workaround is to remove -Z debug-info.)
[12:49:30] <cmr> Try -Z extra-debug-info
[12:49:37] <cmr> Also, cc @michaelwoerister
[12:50:07] <dbaupp> cmr: http://octayn.net/benches/f7b293bc75684a368e20567b5987c482dc5f8550/ is missing time.txt?
[12:50:15] <dbaupp> (a few others are too)
[12:50:29] <cmr> dbaupp: are those commits listed in the history file?
[12:50:53] <cmr> hm, they are
[12:50:57] <cmr> troubling
[12:51:26] *** Joins: saneyuki_s (Mibbit@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[12:52:22] *** Joins: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca)
[12:53:52] <cmr> I'm just going to remove those ones
[12:55:37] <dbaupp> ok
[12:57:57] <ChrisMorgan> Eek! I was simplifying the test case (down to two statements) and found another, non-debug-info-only one: "internal compiler error: borrow-vec associated with bad sty: &ty_err"
[12:57:58] <ChrisMorgan> rusti: let n = []; n.iter().map(|_| 0);
[12:57:58] -rusti- <anon>:5:21: 5:22 error: internal compiler error: borrow-vec associated with bad sty: &ty_err
[12:57:58] -rusti- <anon>:5          let n = []; n.iter().map(|_| 0);
[12:57:59] -rusti-                               ^
[12:57:59] -rusti- application terminated with error code 101
[12:58:30] <cmr> ChrisMorgan: it's trying to tell you that the type of n is unconstrained
[12:59:21] <ChrisMorgan> cmr: it should use its voice, then, rather than merely throwing an ICEy glare in my general direction.
[12:59:49] <cmr> yeah, the compiler can be very passive-agressive sometimes
[12:59:49] *** Parts: saneyuki_s (Mibbit@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) ()
[13:00:06] *** Joins: tetsuharu (Mibbit@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[13:00:10] *** Quits: tetsuharu (Mibbit@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Quit: tetsuharu)
[13:00:40] *** Joins: snyk (Mibbit@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[13:01:03] *** Quits: snyk (Mibbit@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Quit: http://www.mibbit.com ajax IRC Client)
[13:02:36] <ChrisMorgan> Aw, dbaupp filed that one a month ago: https://github.com/mozilla/rust/issues/7813
[13:03:36] <ChrisMorgan> rusti: [].iter()
[13:03:36] -rusti- <anon>:5:9: 5:11 error: internal compiler error: borrow-vec associated with bad sty: &ty_err
[13:03:37] -rusti- <anon>:5          [].iter()
[13:03:37] -rusti-                   ^~
[13:03:37] -rusti- application terminated with error code 101
[13:08:03] <dbaupp> ChrisMorgan: haha
[13:08:13] * dbaupp is a ninja-bug-filer
[13:08:22] <dbaupp> cmr: have you removed those benches?
[13:10:25] <cmr> dbaupp: just finished, I'll tell you when the rsync is done
[13:10:46] <ChrisMorgan> This debug-info thing appears to be extremely serious: as far as I can tell, the use of *any* closure makes it crash.
[13:11:03] <cmr> dbaupp: done
[13:11:59] <dbaupp> cmr: ok, thanks. :)
[13:15:18] <dbaupp> cmr: do you know if it's possible to get the span of e.g. a function name?
[13:15:33] <cmr> dbaupp: the span? no, don't think so
[13:15:57] <cmr> I don't think idents get spans
[13:16:00] <dbaupp> or extract the line it's on?
[13:16:49] <cmr> well you can get the span of the function item itself, or its block
[13:17:22] <dbaupp> right, but that includes the whole thing; I'm only interested in the declaration
[13:17:48] <dbaupp> I guess i can "subtract" off the span of the block, but that's pretty ugly, and probably doesn't work for structs & enums etc.
[13:17:58] <pnkfelix1> rustc : passive aggressive, or just shu?
[13:18:02] *** Joins: vosen (vosen@moz-266BA656.icpnet.pl)
[13:18:07] <pnkfelix1> sed -e s/shu/shy/
[13:18:11] *** Joins: maik__ (maik___@moz-B802DD64.dip0.t-ipconnect.de)
[13:18:12] *** pnkfelix1 is now known as pnkfelix
[13:18:42] <cmr> dbaupp: I don't think it's possible, that information isn't retained
[13:19:27] * dbaupp sighs
[13:21:39] *** Quits: clonejo (clonejo@moz-CC9FD036.de) (Quit: WeeChat 0.3.8)
[13:24:09] *** Joins: clonejo (clonejo@moz-CC9FD036.de)
[13:24:36] *** Quits: BitPuffin (quassel@moz-7BB00EC9.bredband.comhem.se) (Ping timeout)
[13:26:08] *** Joins: jfbk (textual@moz-EEA9CFB3.nyc.res.rr.com)
[13:27:49] *** Joins: BitPuffin (quassel@moz-7BB00EC9.bredband.comhem.se)
[13:29:28] *** Quits: nwf (nwf@moz-E26BF8D7.rr.ietfng.org) (Ping timeout)
[13:29:47] *** Joins: nwf (nwf@moz-E26BF8D7.rr.ietfng.org)
[13:33:36] *** Joins: ipc (ipc@moz-76ED5036.lightspeed.cicril.sbcglobal.net)
[13:38:31] *** Quits: pyrac (pyrac@moz-F2B1E85D.w92-162.abo.wanadoo.fr) (Ping timeout)
[13:41:18] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[13:41:18] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/M9D0GQ
[13:41:18] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[13:41:41] *** Quits: maik__ (maik___@moz-B802DD64.dip0.t-ipconnect.de) (Ping timeout)
[13:41:55] *** Joins: Mowah (Mowah@moz-436C35C5.cust.bredbandsbolaget.se)
[13:42:47] *** Joins: pyrac (pyrac@moz-F2B1E85D.w92-162.abo.wanadoo.fr)
[13:43:37] *** Joins: jorendorff (jorendorff@moz-1747FB68.hsd1.tn.comcast.net)
[13:44:19] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[13:44:20] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/vyPkLw
[13:44:20] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[13:44:21] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[13:44:21] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/6EBSqQ
[13:44:21] <ghrust> 13rust/06auto 14767688f 15David Manescu: Fixed #8451 - extra::stats::write_boxplot() applied to negative or zero sample values
[13:44:21] <ghrust> 13rust/06auto 14836a3d9 15bors: auto merge of #8453 : dmanescu/rust/8451, r=cmr...
[13:44:21] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[13:44:39] <bjz_> is there a 'technical' name for an identifier/type pair
[13:44:50] <cmr> ...variable?
[13:44:55] <cmr> binding?
[13:45:11] <cmr> definitely binding
[13:45:18] <bjz_> perhaps binding is what I want
[13:46:10] <bjz_> cheers!
[13:47:19] *** Joins: lmandel (lmandel@moz-57D3C086.dsl.bell.ca)
[13:49:32] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[13:50:22] <ipc> wouldn't 'binding' be what happens when you assign your id/type pair a value?
[13:51:03] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[13:51:23] <ipc> for the pair itself I would use something like 'slot' in informal discussion
[13:51:41] <cmr> I don't think so, `fn foo(mut x: int)` x is said to be a mutable binding, afaik
[14:01:55] *** Joins: donri (dag@moz-9BB61102.tbcn.telia.com)
[14:02:22] *** Quits: donri (dag@moz-9BB61102.tbcn.telia.com) (Client exited)
[14:04:03] *** Quits: victorporof (victorporo@DBFC8886.2203F6DA.D111398B.IP) (Quit: victorporof)
[14:04:10] *** Joins: boredomist (user@moz-63CF9F31.res-cmts.sesp.ptd.net)
[14:04:57] *** Joins: sundar (Mibbit@CB401058.55A2CBFC.C28326FD.IP)
[14:06:41] *** Joins: victorporof (victorporo@DBFC8886.2203F6DA.D111398B.IP)
[14:08:14] <SimonSapin> How can I get a &mut T from a &mut [T]?
[14:08:38] <cmr> rusti: let x = &mut [1, 2, 3, 4]; let y = &mut x[4]; printfln!(y);
[14:08:39] -rusti- task <unnamed> failed at 'index out of bounds: the len is 4 but the index is 4', <anon>:5
[14:08:39] -rusti- application terminated with error code 101
[14:08:43] <cmr> rusti: let x = &mut [1, 2, 3, 4]; let y = &mut x[3]; printfln!(y);
[14:08:44] -rusti- &mut 4
[14:08:44] -rusti- ()
[14:09:21] <SimonSapin> thanks cmr, not sure why I was looking for a vec method
[14:09:39] <cmr> np
[14:12:12] *** kimundi is now known as zz_kimundi
[14:13:53] <Seldaek> what are naming rules on macros? because I'd love if printfln!() was <!() or something, it's too hard to type when you rage at the compiler and want to output something quickly :p
[14:14:08] <cmr> Seldaek: it need to be an identifier
[14:15:53] *** Joins: tautologico (lymph@8ABDEDA.34CAB63A.7B974E06.IP)
[14:17:38] <SimonSapin> so, apparently I can not borrow as mutable multiple non-overlapping parts of a slice
[14:17:52] <cmr> SimonSapin: I think there's a method for that
[14:17:56] <cmr> partition, or split, or something
[14:18:18] <cmr> The type system doesn't know about slice lengths and overlapping.
[14:18:25] <SimonSapin> partitioned makes copies
[14:18:34] *** Quits: jaen (jaen@moz-2B565DD9.neoplus.adsl.tpnet.pl) (Ping timeout)
[14:18:53] <SimonSapin> ha, mut_split
[14:19:16] <cmr> Guess it was renamed from split
[14:19:18] <cmr> makes sense
[14:19:33] <pauls> nmatsakis: pong
[14:19:47] *** Quits: sundar (Mibbit@CB401058.55A2CBFC.C28326FD.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:20:21] <pnkfelix> Seldaek: can't you make a local wrapper macro with a shorter name?
[14:21:59] <pnkfelix> (or maybe that was the point of your question)
[14:22:05] <Seldaek> pnkfelix: sure can, but then one could argue println(fmt!()) was good enough
[14:22:24] <pauls> SimonSapin: ident concatenation is currently non-working. It will work in the future, but it's non-trivial.
[14:22:29] <Seldaek> printfln!() is already better, but I'd think we can still do better :)
[14:23:28] * pnkfelix didn't have a problem with println(fmt!(..)), so he'll just sit back and see what others decide
[14:23:43] * cmr doesn't have a problem with printfln!
[14:24:18] <engla> I'm assuming these functions are still in flux
[14:24:58] <pnkfelix> I would vote against an inscrutable name like <!() or prf!(), though.
[14:25:01] <engla> I hope rust will simplify again and not have print printf, println printfln all in the default namespace
[14:25:06] <Seldaek> well printfln is okayish, but it seriously lacks vowels 
[14:25:27] <engla> I have a problem remembering if it's printlnf or printfln
[14:25:33] <engla> now that might go away
[14:25:52] *** Joins: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com)
[14:26:08] <Seldaek> printalready!() would lead to less typos :p
[14:26:28] <Seldaek> it's not really about the length, more that 'ntfln' part that's inscrutable 
[14:26:44] <dbaupp> engla: at least the compiler complains at compile time about it
[14:27:26] <engla> well yes
[14:27:43] *** Quits: busylizzy (lisa@85228838.12D0DC84.211374C4.IP) (Ping timeout)
[14:27:45] <cmr> God, yes. There's nothing worse than getting a NameError 15 minutes into a complex program
[14:28:51] * dbaupp hates getting exceptions because the name of the exception in the `try: ... except Foo:` block was mistyped
[14:29:58] <Yoric> At some point in hte development of Opa, we used to have these kinds of exceptions 4 hours into the build process.
[14:30:10] <Yoric> (that's before we reduced the build process to a few minutes and made it much type-safer, of course)
[14:30:24] <Yoric> This was considered a legitimate motive for nervous breakdown.
[14:32:29] <dbaupp> how'd you get 4 hours to a few minutes?
[14:32:42] <dbaupp> (can you apply some magic to rustc too? ;) )
[14:32:46] *** Joins: busylizzy (lisa@85228838.12D0DC84.211374C4.IP)
[14:33:57] <doomlord_> heh r.e. the prints, maybe you need default parameters and a default mode argument :)
[14:34:55] *** Joins: milinda (milinda@moz-C79ADF95.dhcp-bl.indiana.edu)
[14:36:35] *** Quits: milinda (milinda@moz-C79ADF95.dhcp-bl.indiana.edu) (Ping timeout)
[14:36:45] *** Quits: mibitzi (mibitzi@659DAD1F.60DF3A09.8395810B.IP) (Ping timeout)
[14:37:14] *** Joins: mibitzi (mibitzi@659DAD1F.60DF3A09.8395810B.IP)
[14:38:06] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[14:38:45] *** Quits: KindOne (KindOne@moz-65A10CB1.dynamic.ip.windstream.net) (Ping timeout)
[14:38:48] *** Joins: KindTwo (KindOne@moz-65A10CB1.dynamic.ip.windstream.net)
[14:40:05] *** KindTwo is now known as KindOne
[14:40:34] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[14:42:50] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[14:43:26] *** Joins: milinda (milinda@moz-C79ADF95.dhcp-bl.indiana.edu)
[14:45:08] *** Joins: ofeldt- (ofeldt@moz-91DA54E2.dip0.t-ipconnect.de)
[14:45:48] *** Quits: ofeldt (jen@moz-90A4EF1C.dip0.t-ipconnect.de) (Ping timeout)
[14:46:11] <dbaupp> cmr: in http://octayn.net/benches/history.txt "bench-override.txt@"
[14:46:25] <cmr> oops
[14:46:56] <cmr> I didn't ls > history.txt, no, surely not ;)
[14:47:08] <dbaupp> haha
[14:49:14] *** Joins: orshem (orshem@C5E06B1E.A5B6B765.E3D28531.IP)
[14:51:00] *** Quits: mibitzi (mibitzi@659DAD1F.60DF3A09.8395810B.IP) (Ping timeout)
[14:51:01] *** Joins: mibitzi (mibitzi@659DAD1F.60DF3A09.8395810B.IP)
[14:51:34] <SimonSapin> Is there a reason extra::future::Future has no get_mut_ref() method?
[14:51:57] *** Joins: reyre_ (reyre@moz-9002CDDA.cpe.net.cable.rogers.com)
[14:52:20] <dbaupp> SimonSapin: probably not, other than it hasn't be maintained/improved for a while.
[14:52:31] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[14:52:54] *** Quits: reyre (reyre@moz-9002CDDA.cpe.net.cable.rogers.com) (Ping timeout)
[14:52:54] *** reyre_ is now known as reyre
[14:52:59] <orshem> hi, is there a way to iterate over an enum discriminants? without reflection?
[14:53:09] <cmr> I think olsonjeffery is working on a new Future interface
[14:53:24] <engla> what a nice commit log, "Explain what ifmt! is all about"
[14:53:51] <dbaupp> cmr: 29 of the benches have an invalid/empty mem.json.gz
[14:53:56] <cmr> orshem: no, there's an issue open about it, trying to find them...
[14:54:16] <cmr> dbaupp: but a valid time.txt?
[14:54:37] <dbaupp> cmr: don't know, it's crashing on the mem.json before it checks the time.txt
[14:54:46] <cmr> ok
[14:54:58] <orshem> cmr, thanks, nice to know that it is considered
[14:55:06] <dbaupp> cmr: http://ix.io/7hq
[14:55:23] <cmr> dbaupp: nice list, thanks!
[14:55:44] <cmr> I setup automatic rescheduling when there is a build with no benchmarks, so they should be filled in fairly quickly.
[14:55:53] <olsonjeffery> cmr: it got scrapped
[14:56:02] <olsonjeffery> in the decision to punt on aio, for now
[14:56:12] <dbaupp> heh
[14:56:13] <cmr> olsonjeffery: ah, good to know, thanks!
[14:56:23] <olsonjeffery> i did create a future::pair() fn that returned a (Future<A>, Primise<A>)
[14:56:28] * dbaupp is running ~200 cpu intensive tasks on a very old laptop
[14:56:37] <olsonjeffery> and promise just has a fulfill(v: A) method
[14:56:44] <olsonjeffery> and they're connected via a port/chan
[14:56:52] *** Joins: maik__ (maik___@moz-B802DD64.dip0.t-ipconnect.de)
[14:56:56] <olsonjeffery> wouldn't be to hard to make a PR out of that
[14:57:03] * dbaupp is surprised that it only took 30 seconds, clearly extra::json is much better now
[14:57:03] <olsonjeffery> that's the only work i did on future, tbh
[14:57:18] <cmr> dbaupp: yeah! I don't remember who did it, but it was amazing
[14:57:47] *** Quits: KindOne (KindOne@moz-65A10CB1.dynamic.ip.windstream.net) (Ping timeout)
[14:57:53] <cmr> anyway the bum ones have been removed
[14:58:06] <engla> it was some nice tuning, like checking for space first in char::is_whitespace
[14:58:06] <dbaupp> cmr: either doener or engla, I think
[14:58:10] <engla> not me
[14:58:17] <cmr> wasn't doener either
[14:58:20] * cmr checks twir
[14:58:42] <dbaupp> nope, glinscott
[14:58:51] <cmr> yup
[14:59:00] * dbaupp gets all these optimisation genii confused
[14:59:37] <dbaupp> http://huonw.github.io/isrustfastyet/mem/
[14:59:45] <dbaupp> we're eating all our memory again!
[15:00:28] <engla> nice, the graph is back
[15:00:36] <cmr> great, right where the hole in the data is, too :P
[15:00:41] <cmr> probably newrt
[15:01:08] <cmr> no, can't be, newrt is too recent isn't it?
[15:01:20] <cmr> (like I can keep track of time...
[15:01:55] *** Joins: KindOne (KindOne@moz-65A10CB1.dynamic.ip.windstream.net)
[15:02:18] <dbaupp> can't see anything obvious in `git log dbde42e..18e3db7 --author bors`
[15:02:26] <dbaupp> although there is a rollup commit
[15:02:32] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[15:02:36] <cmr> was it mine?
[15:02:37] *** Quits: fabiand (fabiand@moz-40AC6CE3.adsl.alicedsl.de) (Quit: Verlassend)
[15:02:54] *** Quits: mibitzi (mibitzi@659DAD1F.60DF3A09.8395810B.IP) (Ping timeout)
[15:03:21] <dbaupp> nah, one of strcat's
[15:03:28] <cmr> oh good :)
[15:03:33] *** Quits: maik__ (maik___@moz-B802DD64.dip0.t-ipconnect.de) (Ping timeout)
[15:03:41] <engla> at least what happens is that it goes back from flatline to the old gradual increase of memory use
[15:03:42] <dbaupp> (at least, strcat r+'d it)
[15:04:05] <dbaupp> cmr: is it filling in that gap?
[15:04:10] <cmr> dbaupp: it should be
[15:04:16] <cmr> Half of the data was missing a time.txt
[15:04:21] <cmr> so... it has a bit of catching up to do
[15:04:49] *** Quits: KindOne (KindOne@moz-65A10CB1.dynamic.ip.windstream.net) (Ping timeout)
[15:04:49] <cmr> It should update roughly every 5 minutes
[15:05:04] <dbaupp> then I'll get 3 updates each time :)
[15:05:17] <engla> dbaupp: git log --first-parent  is almost the same, but you get all merges
[15:05:28] <engla> git log dbde42e..18e3db7 --first-parent
[15:05:41] *** Joins: maik__ (maik___@moz-78E608AC.dip0.t-ipconnect.de)
[15:05:47] <engla> there's  one manual merge too by strcat
[15:05:55] <acrichto> dbaupp: btw #8508 is awesome!
[15:06:17] <dbaupp> engla: `git log dbde42e..18e3db7 --merges` gets the merges :)
[15:06:21] <dbaupp> acrichto: thanks :)
[15:06:34] <engla> ah but we only want the first-parent history 
[15:07:02] <dbaupp> ah, that just follows the "backbone" of master, right?
[15:07:07] <cmr> I only consider the first-parents for benchmarking
[15:07:23] *** Quits: brianm (brianm@moz-9B7D279E.dsl.static.sonic.net) (Quit: Linkinus - http://linkinus.com)
[15:07:25] <engla> yes
[15:09:01] *** Joins: KindOne (KindOne@moz-65A10CB1.dynamic.ip.windstream.net)
[15:11:46] *** Quits: milinda (milinda@moz-C79ADF95.dhcp-bl.indiana.edu) (Ping timeout)
[15:11:53] *** Quits: KindOne (KindOne@moz-65A10CB1.dynamic.ip.windstream.net) (Ping timeout)
[15:12:54] *** Joins: KindOne (KindOne@4452C1B1.2171A688.34F73994.IP)
[15:14:04] *** Joins: donri (dag@moz-9BB61102.tbcn.telia.com)
[15:14:23] <maik__> do you think FRP would be useful in Rust?
[15:15:00] <cmr> maik__: I don't see why it wouldn't be
[15:15:13] <cmr> tiffany was working on some FRP stuff, but didn't get very far
[15:15:22] <dbaupp> I guess it'd work, but it'd be syntactically unpleasant (I think)
[15:15:27] <cmr> Had @ troubles
[15:15:45] <dbaupp> (everyone has @ troubles. :P )
[15:15:50] <maik__> :)
[15:17:35] *** Joins: jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[15:19:37] <maik__> do you think it is possible to achieve complete purity in Rust without fighting against the language?
[15:19:44] <cmr> no
[15:19:51] <cmr> not without the effect system
[15:19:58] <cmr> as there's no way to assert purity
[15:23:08] *** Quits: pyrac (pyrac@moz-F2B1E85D.w92-162.abo.wanadoo.fr) (Quit: pyrac)
[15:26:45] <nmatsakis> pauls: I'm trying to understand why the macro parser is so ... frustratingly limited
[15:28:11] *** Joins: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com)
[15:28:27] <maik__> in function languages there is no mutable state so everything has to be created from scratch again right? for example moving a cube from pos 0 0 to pos 0 10 , it would delete the old cube and create a new cube at 0 0. How can this be efficient?
[15:29:11] <nmatsakis> pauls: but I think I do
[15:29:39] <cmr> maik__: compiler optimization, functional datastructures, and laziness
[15:30:06] <olsonjeffery> maaaaaaaagic
[15:30:11] <cmr> yeah basically
[15:30:15] <maik__> cmr, would it also be efficient to do this in Rust?
[15:30:26] *** Joins: milinda (milinda@moz-C79ADF95.dhcp-bl.indiana.edu)
[15:30:28] <pauls> nmatsakis: the big limitation is that if the official rust parser in parse.rs fails, the whole compile fails.
[15:30:30] <maik__> or do we rely on mutable states?
[15:31:00] <pauls> So we can't start parsing an expr and then say "oh, wait, this isn't an expr at all", and then back out and try something else...
[15:31:02] <nmatsakis> pauls: presumably this is why you must encode the 0 case as an alternate arm?
[15:31:09] <cmr> maik__: I don't know enough to answer that
[15:31:16] <pauls> ...like a normal parser would.
[15:31:31] <pauls> nmatsakis: "the 0 case"?
[15:32:18] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[15:32:18] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/6EBSqQ
[15:32:18] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[15:33:16] *** Quits: KindOne (KindOne@4452C1B1.2171A688.34F73994.IP) (Ping timeout)
[15:33:26] *** Quits: reyre (reyre@moz-9002CDDA.cpe.net.cable.rogers.com) (Client exited)
[15:33:46] <nmatsakis> pauls: if I do "foo($($x:ty),*)", for example, it can't parse foo()
[15:33:52] *** Joins: reyre (reyre@moz-9002CDDA.cpe.net.cable.rogers.com)
[15:34:03] <pauls> nmatsakis: ah, yes.
[15:34:29] <pauls> Because it can't try :ty without committing to it.
[15:35:17] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[15:35:17] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/IcHEmA
[15:35:17] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[15:35:17] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[15:35:18] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/NtD4-Q
[15:35:18] <ghrust> 13rust/06auto 14a00becd 15Marvin LÃ¶bel: Methodyfied the string ascii extionsion functions...
[15:35:18] <ghrust> 13rust/06auto 14927aff1 15bors: auto merge of #8452 : Kimundi/rust/stuff02, r=bstrie...
[15:35:18] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[15:35:49] <pauls> It might be possible to gain a little ground, come to think of it, by trying the non-nonterminal case first.
[15:36:01] *** Quits: cypher (ircnet@moz-EA42E471.static.surfer.at) (Quit: 410 Gone)
[15:36:29] <miloshadzic> maik__, afaik, Rust doesn't have data structures that optimise for this like clojure does so you would mutate within a function and return a result.
[15:36:50] <pauls> But it still might wind up having to commit too early, if you have another nonterminal after the non-nonterminal, before the other case becomes totally impossible.
[15:37:12] <engla> I don't think rust can optimize across allocations. Say optimizing  ~[] + ~[]  to ~[]  (?)
[15:37:15] *** Joins: fabiand (fabiand@20858201.5291F4C0.16E13E53.IP)
[15:37:17] <pauls> I think that it's going to be hard to get a good solution until the Rust parser can fail gracefully.
[15:37:19] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[15:38:52] <nmatsakis> pauls: trying the non-terminal would at least give us 1-lookahead grammars,
[15:38:55] <nmatsakis> pauls: which would be a big win!
[15:39:04] <nmatsakis> pauls: well, a subset of those,
[15:39:12] <nmatsakis> pauls: but the subset I am interested in :)
[15:39:22] <nmatsakis> or at least the subset in which my example falls
[15:39:28] <pauls> nmatsakis: yeah. Hm. Maybe just doing a single lookahead would be fairly easy.
[15:41:06] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[15:45:15] <pauls> ...in fact, I have this vague sense that I kinda sorta implemented single-token lookahead, but it never seemed to actually do anything.
[15:46:05] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[15:53:22] *** Joins: infynyxx_ (infynyxx@moz-E95B370B.nyc.res.rr.com)
[15:54:57] *** Joins: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net)
[15:55:02] *** Quits: infynyxx_ (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[15:55:28] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[15:57:04] *** Joins: Sergio965 (sergiobz@moz-C9623834.dyn.mit.edu)
[16:00:12] <maik__> rusti: range(1,1000).iter();
[16:00:13] -rusti- <anon>:5:9: 5:30 error: type `std::iterator::Range<int>` does not implement any method in scope named `iter`
[16:00:13] -rusti- <anon>:5          range(1,1000).iter();
[16:00:13] -rusti-                   ^~~~~~~~~~~~~~~~~~~~~
[16:00:13] -rusti- error: aborting due to previous error
[16:00:14] -rusti- application terminated with error code 101
[16:00:30] <maik__> range does not have .iter()?
[16:01:09] <Ms2ger> It returns an iterator, no?
[16:03:25] <maik__> Ms2ger, oh right.. :x
[16:03:58] *** Quits: Sergio965 (sergiobz@moz-C9623834.dyn.mit.edu) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[16:04:30] *** Quits: jfbk (textual@moz-EEA9CFB3.nyc.res.rr.com) (Ping timeout)
[16:05:51] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[16:06:19] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[16:06:33] *** Joins: mschifer (Adium@moz-7B0110AD.mv.mozilla.com)
[16:06:35] *** Joins: FDS (arnaud@moz-CE4D5907.bdx.modulonet.fr)
[16:07:27] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[16:08:13] <cmr> dbaupp: can you compare the cpuacct stuff in the JSON to the time from time.txt? I'd like to see which one has more of a signal..
[16:09:37] <dbaupp> cmr: sure, but can you ask me again tomorrow/in 8-ish hours? I'm just about to go to bed.
[16:09:44] *** Joins: KindOne (KindOne@moz-82A15E3F.dynamic.ip.windstream.net)
[16:09:46] <cmr> dbaupp: yeah, sure
[16:10:19] *** Joins: ozten (ozten@moz-BE33DA21.fw1.sfo1.mozilla.net)
[16:12:08] *** Quits: milinda (milinda@moz-C79ADF95.dhcp-bl.indiana.edu) (Input/output error)
[16:18:53] *** Quits: eevee (eevee@moz-9A8E1439.evrt.wa.frontiernet.net) (Ping timeout)
[16:22:12] <acrichto> wow ccache just compiled llvm in less than 60s, quick, someone make a rustcache!
[16:22:24] *** Quits: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[16:23:26] *** Joins: eevee (eevee@moz-9A8E1439.evrt.wa.frontiernet.net)
[16:24:05] <maik__> miloshadzic, yeah I made some microbenchmarks, mutable code is 1/3 faster
[16:28:04] *** Joins: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net)
[16:28:59] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[16:29:29] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[16:29:53] *** Joins: graydon (Adium@A5087023.2354C43D.D8E68FF6.IP)
[16:29:54] *** ChanServ sets mode: +qo graydon graydon
[16:31:21] *** Joins: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net)
[16:31:39] *** Joins: mihneadb (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net)
[16:33:49] *** Quits: bnicholson (bnicholson@moz-E98974C1.hsd1.ca.comcast.net) (Input/output error)
[16:34:11] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[16:34:46] *** Quits: mschifer (Adium@moz-7B0110AD.mv.mozilla.com) (Quit: Leaving.)
[16:35:25] *** Joins: bnicholson (bnicholson@moz-E98974C1.hsd1.ca.comcast.net)
[16:39:14] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[16:40:17] *** Joins: mschifer (Adium@moz-BBE3ABD.mv.mozilla.com)
[16:41:03] *** Joins: carllerche (carllerche@moz-CDE5367B.dsl.static.sonic.net)
[16:43:18] *** Quits: nwf (nwf@moz-E26BF8D7.rr.ietfng.org) (Ping timeout)
[16:44:21] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[16:45:26] *** Quits: CarpNet (ac@moz-FD24B77.sohonet.co.uk) (Quit: Leaving)
[16:46:05] *** Joins: huseby (huseby@moz-4E8C421A.husebyhome.com)
[16:49:17] *** Quits: KindOne (KindOne@moz-82A15E3F.dynamic.ip.windstream.net) (Ping timeout)
[16:50:20] *** Joins: brianm (brianm@moz-B4F5B7FB.ptr.us.xo.net)
[16:51:25] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[16:53:13] *** Joins: KindOne (KindOne@EE1CEA1E.B7D17EEE.EC6A1518.IP)
[16:57:21] *** Joins: azakai (alon@moz-BBE3ABD.mv.mozilla.com)
[16:57:25] *** Quits: azakai (alon@moz-BBE3ABD.mv.mozilla.com) (Client exited)
[16:57:47] *** Joins: milinda (milinda@DA212585.7CFC0820.51B6877.IP)
[16:59:14] *** Joins: dherman (dherman@moz-7B0110AD.mv.mozilla.com)
[16:59:14] *** ChanServ sets mode: +o dherman
[16:59:44] *** Quits: dherman (dherman@moz-7B0110AD.mv.mozilla.com) (Quit: dherman)
[16:59:58] *** Quits: jorendorff (jorendorff@moz-1747FB68.hsd1.tn.comcast.net) (Quit: jorendorff)
[17:00:22] *** Joins: mark_edward (quassel@A5B34F21.AFBE850E.FC355C3F.IP)
[17:01:37] *** Quits: StarLight (StarLight@moz-B9BAF9D0.dynamic.avangarddsl.ru) (Ping timeout)
[17:01:44] *** Joins: mibitzi (mibitzi@659DAD1F.60DF3A09.8395810B.IP)
[17:01:58] <mark_edward> cmr: pongo
[17:02:10] *** Quits: milinda (milinda@DA212585.7CFC0820.51B6877.IP) (Input/output error)
[17:02:27] <cmr> mark_edward: hi
[17:02:55] <mark_edward> is there a fuxed version of the rustdoc_ng docs??
[17:02:59] <mark_edward> *fixed
[17:03:08] <cmr> no
[17:03:40] *** Quits: huseby (huseby@moz-4E8C421A.husebyhome.com) (Connection reset by peer)
[17:03:54] *** Joins: huseby (huseby@moz-4E8C421A.husebyhome.com)
[17:04:01] <mark_edward> cmr: okey dokes. how's work on it been goign?
[17:04:16] <cmr> I haven't worked on it since the weekend
[17:04:54] <mark_edward> has it really been not  that long? thoght i was last online a week ago
[17:05:06] <cmr> you were last online yesterday :p
[17:05:12] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[17:05:13] *** Quits: sk (sk@A8E15A9E.F427598.78DD174B.IP) (Quit: Leaving)
[17:05:26] <mark_edward> my sense of time is really distorted...
[17:05:28] *** Joins: StarLight (StarLight@moz-71A9D610.dynamic.avangarddsl.ru)
[17:06:54] *** Joins: milinda (milinda@DA212585.7CFC0820.51B6877.IP)
[17:08:54] *** Joins: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net)
[17:09:13] *** Joins: eatkinson (eatkinson@moz-BBE3ABD.mv.mozilla.com)
[17:09:55] *** Quits: milinda (milinda@DA212585.7CFC0820.51B6877.IP) (Input/output error)
[17:14:01] *** Joins: Sergio965 (sergiobz@moz-BB21156B.dynamic.csail.mit.edu)
[17:15:20] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[17:15:20] *** ChanServ sets mode: +o brson
[17:16:32] *** Quits: maik__ (maik___@moz-78E608AC.dip0.t-ipconnect.de) (Ping timeout)
[17:17:10] *** Joins: maik__ (maik___@moz-78E608AC.dip0.t-ipconnect.de)
[17:19:19] <pnkfelix> nmatsakis: Got all but one visit module ported.  even lint.rs.  Can't figure out what's wrong with the one that's left, but I think I'm ready to put it together for review.
[17:19:39] <pnkfelix> nmatsakis: gotta go home for dinner now.  I will try to polish this off later tonight.
[17:19:42] *** Joins: eschweic (Adium@moz-BBE3ABD.mv.mozilla.com)
[17:20:04] <pnkfelix> nmatsakis: current status is in: https://github.com/pnkfelix/rust/commits/pcw-visitor-vpar-defaults-all-but-writeback.rs
[17:20:40] *** Joins: bytewise (bytewise@moz-4A801D04.unitymediagroup.de)
[17:22:33] *** Quits: fabiand (fabiand@20858201.5291F4C0.16E13E53.IP) (Ping timeout)
[17:22:51] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: Leaving.)
[17:24:02] *** Quits: mark_edward (quassel@A5B34F21.AFBE850E.FC355C3F.IP) (Ping timeout)
[17:24:44] *** Joins: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com)
[17:25:12] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[17:25:49] *** Quits: carllerche (carllerche@moz-CDE5367B.dsl.static.sonic.net) (Quit: carllerche)
[17:26:26] *** Quits: lucian_ (lucian@6B2B4644.4304AE1E.CE5E78F6.IP) (Ping timeout)
[17:32:08] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[17:32:22] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[17:32:23] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/NtD4-Q
[17:32:23] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[17:32:40] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:35:15] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[17:35:15] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/JpOQqw
[17:35:15] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[17:35:15] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[17:35:15] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/iDMwjw
[17:35:15] <ghrust> 13rust/06auto 14d99d337 15Daniel Micay: remove more dead code from the old `for`
[17:35:15] <ghrust> 13rust/06auto 140a677bc 15bors: auto merge of #8462 : thestinger/rust/loop-cleanup, r=cmr...
[17:35:16] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[17:37:19] *** Joins: fabiand (fabiand@moz-40AC6CE3.adsl.alicedsl.de)
[17:38:00] *** Quits: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net) (Ping timeout)
[17:41:03] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[17:41:41] *** Joins: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net)
[17:43:32] *** Quits: davbo (dave@moz-3FFA637C.oucs.ox.ac.uk) (Client exited)
[17:45:19] *** Quits: maik__ (maik___@moz-78E608AC.dip0.t-ipconnect.de) (Ping timeout)
[17:45:47] *** Quits: eatkinson (eatkinson@moz-BBE3ABD.mv.mozilla.com) (Quit: eatkinson)
[17:45:59] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[17:45:59] *** ChanServ sets mode: +o brson
[17:49:36] *** Joins: maik__ (maik___@moz-E9AE01F.dip0.t-ipconnect.de)
[17:51:48] *** Quits: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net) (Input/output error)
[17:51:53] *** Joins: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net)
[17:52:44] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[17:54:28] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[17:54:29] *** ChanServ sets mode: +o brson
[17:58:04] *** Quits: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: ChatZilla 0.9.90.1-rdmsoft [XULRunner 22.0/20130619132145])
[17:58:54] *** Joins: dherman (dherman@moz-BBE3ABD.mv.mozilla.com)
[17:58:54] *** ChanServ sets mode: +o dherman
[18:01:20] *** Quits: maik__ (maik___@moz-E9AE01F.dip0.t-ipconnect.de) (Ping timeout)
[18:01:26] *** Eridius|vacation is now known as Eridius
[18:01:30] *** Joins: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net)
[18:04:21] <toddaaro> brson: is there an issue for the workstealing stuff you mentioned yesterday?
[18:04:37] <toddaaro> brson: if not, can you give a quick summary of where you were with that?
[18:05:08] <toddaaro> I think you mentioned that it was the check-stage1-rbench tests that were slow, any in particular?
[18:05:12] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Quit: Jesse)
[18:05:28] *** Quits: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[18:06:55] *** Joins: eatkinson (eatkinson@moz-BBE3ABD.mv.mozilla.com)
[18:10:02] *** Joins: reyre_ (reyre@moz-9002CDDA.cpe.net.cable.rogers.com)
[18:10:37] *** Quits: reyre (reyre@moz-9002CDDA.cpe.net.cable.rogers.com) (Ping timeout)
[18:10:38] *** Quits: jpf (jan@moz-A8C26A15.org) (Quit: leaving)
[18:11:22] *** zz_kimundi is now known as kimundi
[18:12:28] *** Joins: jpf (jan@moz-A8C26A15.org)
[18:13:27] *** reyre_ is now known as reyre
[18:14:05] *** Quits: dherman (dherman@moz-BBE3ABD.mv.mozilla.com) (Quit: dherman)
[18:14:12] *** Joins: maik__ (maik___@moz-E9AE01F.dip0.t-ipconnect.de)
[18:14:16] *** Quits: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net) (Ping timeout)
[18:16:58] *** Joins: rossm (rossm@moz-EE3BB1DC.br.br.cox.net)
[18:18:09] *** Quits: Sergio965 (sergiobz@moz-BB21156B.dynamic.csail.mit.edu) (Quit: Textual IRC Client: www.textualapp.com)
[18:21:23] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[18:21:36] *** Joins: jviereck (Adium@moz-A034D4DA.dclient.hispeed.ch)
[18:21:38] *** Joins: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net)
[18:23:03] <Palmik> Hi guys. Could you recommend any projects that extensively use the C FFI in "the correct way"? I was thinking or wrapping one C library myself (I found the documentation & tutorial for FFI) and would be interested in how other people approach the problem.
[18:23:43] *** Joins: mihneadb_ (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net)
[18:24:10] *** Joins: dherman (dherman@moz-7B0110AD.mv.mozilla.com)
[18:24:10] *** ChanServ sets mode: +o dherman
[18:24:17] *** Quits: mihneadb (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net) (Connection reset by peer)
[18:24:53] *** Quits: dherman (dherman@moz-7B0110AD.mv.mozilla.com) (Quit: dherman)
[18:26:39] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[18:26:46] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[18:29:22] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[18:30:59] <kmc> Palmik: for the Servo project we have a bunch of bindings to C libraries here: https://github.com/mozilla-servo
[18:31:26] <kmc> I don't want to make a strong claim that they're done "the correct way" as I haven't read that much of the code yet
[18:31:35] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[18:32:04] <myname> ncurses bindings are the only important :p
[18:32:41] <kmc> to me the most important thing when writing FFI bindings is to provide an API that matches the safety guarantees of the host language (Rust here)
[18:33:11] <Eridius> I think something's not right in the makefile dependencies. I haven't rebuilt in a week, and running `make` now errors because it can't find `-lmorestack` (I'm doing a clean build at the moment to try and fix that)
[18:33:15] <kmc> and so it's worth having more unsafe code in your bindings, if it frees users from dealing with unsafety
[18:33:29] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[18:33:29] <kmc> e.g. putting a global lock in your bindings to make a C library threadsafe
[18:33:49] <kmc> of course that will depend on performance requirements as well
[18:34:36] <myname> how do i have to get servo? is it more like "we just do it to look at how to improve rust" like the videos made with blender or is it a serious atempt to replace gecko?
[18:35:01] <kmc> we are pretty serious about it, but it will take years before it could be anywhere close to a replacement for gecko
[18:35:20] *** Joins: ecr (Thunderbir@moz-BBE3ABD.mv.mozilla.com)
[18:36:26] <myname> interesting
[18:36:32] <myname> are there reasons for it?
[18:36:57] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[18:37:51] *** Quits: fabiand (fabiand@moz-40AC6CE3.adsl.alicedsl.de) (Quit: Verlassend)
[18:38:03] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[18:39:45] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[18:41:15] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[18:41:16] *** ChanServ sets mode: +o brson
[18:42:57] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[18:43:20] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[18:44:42] *** Joins: mschifer1 (Adium@moz-BBE3ABD.mv.mozilla.com)
[18:44:57] *** Quits: mschifer (Adium@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[18:47:41] <jack> how do i uppercase a string in rust?
[18:47:47] * jack feels dumb asking this
[18:48:43] *** Quits: maik__ (maik___@moz-E9AE01F.dip0.t-ipconnect.de) (Ping timeout)
[18:50:08] <ecr> jack: I think it's std::ascii::to_ascii_upper
[18:50:21] <jack> i guess we are out of luck if it's unicode still :)
[18:50:23] <ecr> I don't think anyone has written a variant for unicode yet
[18:50:56] <myname> it should be a pain in the ass outside of the ascii subset
[18:51:28] <ecr> ideally, std::char would have a to_upper() and then you could just map that over a string with an iterator
[18:51:43] <ecr> well, we already have predicates for upper, lower, etc. for unicode
[18:51:46] <ecr> just not conversions
[18:51:46] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[18:53:11] <kmc> yep you can't correctly upper-case text without knowing what language it's in
[18:53:48] <myname> that too
[18:54:07] <myname> i still find the php bug about the turkish locale hilarious
[18:54:16] <ecr> kmc: why would you need to know the language to get the uppercase variant of a character?
[18:54:17] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[18:54:37] <jack> can i note invoke one macro from another?
[18:54:45] <myname> ecr: upercase turkish i would be a I with a dot and lowercase I would be a i without dot
[18:55:04] <ecr> ah, ok.
[18:55:20] <ecr> jack: you're supposed to be able to, but it might be broken
[18:55:51] <kmc> jack: you can
[18:56:08] <kmc> you can invoke macros recursively too :)
[18:56:24] *** Joins: maik__ (maik___@moz-E9AE01F.dip0.t-ipconnect.de)
[18:56:40] <ecr> did the hygienic macro stuff land? 
[18:57:24] *** Quits: busylizzy (lisa@85228838.12D0DC84.211374C4.IP) (Ping timeout)
[18:57:28] <graydon> no
[18:57:45] <graydon> I have a bitrotted version of it I'm trying to land
[18:58:59] *** Joins: busylizzy (lisa@85228838.12D0DC84.211374C4.IP)
[18:59:06] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Ping timeout)
[18:59:13] *** Joins: josh (josh@moz-104CC309.mv.mozilla.com)
[18:59:35] <orshem> is it possible to compare two enum arms without match?
[18:59:59] <orshem> if doesn't work
[18:59:59] <jack> graydon: is this supposed to work? https://gist.github.com/metajack/6234347
[19:00:00] *** Quits: maik__ (maik___@moz-E9AE01F.dip0.t-ipconnect.de) (Ping timeout)
[19:00:38] <ecr> orshem: could you give an example?
[19:01:37] <graydon> jack: I think so, probably-ish?
[19:01:39] <graydon> what goes wrong?
[19:02:06] *** Joins: fabiand (fabiand@moz-40AC6CE3.adsl.alicedsl.de)
[19:02:06] *** Quits: vadimcn (chatzilla@A2267643.76F9E272.DA40C4B3.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 22.0/20130618035212])
[19:02:30] <orshem> rusti: enum E {One, Two} let o = One; if o == One {print("one");}
[19:02:30] -rusti- <anon>:5:43: 5:51 error: binary operation == cannot be applied to type `main::E`
[19:02:30] -rusti- <anon>:5          enum E {One, Two} let o = One; if o == One {print("one");}
[19:02:31] -rusti-                                                     ^~~~~~~~
[19:02:31] -rusti- error: aborting due to previous error
[19:02:31] -rusti- application terminated with error code 101
[19:02:37] <orshem> ecr, ^
[19:02:42] <sp3d> orshem: I think you need #[deriving(Eq)] or an impl of Eq
[19:02:55] *** Quits: Palmik (palmik@moz-CC484FDD.tmcz.cz) (Ping timeout)
[19:02:55] <jack> graydon:
[19:02:56] <jack> $ rustc --pretty expanded colormacs.rs 
[19:02:56] <jack> colormacs.rs:13:25: 13:26 error: expected `=>` but found `!`
[19:02:58] <jack> colormacs.rs:13                 stringify!($color) => $color,
[19:02:59] <bblum> what RUST_LOG prefix should i use to make error!() calls inside of rustc appear on stderr?
[19:03:00] <jack>                                          ^
[19:03:02] <orshem> rusti:  #[deriving(Eq)]enum E {One, Two} let o = One; if o == One {print("one");}
[19:03:02] <jack>  
[19:03:03] -rusti- <anon>:5:59: 5:67 error: binary operation == cannot be applied to type `main::E`
[19:03:03] -rusti- <anon>:5           #[deriving(Eq)]enum E {One, Two} let o = One; if o == One {print("one");}
[19:03:03] -rusti-                                                                     ^~~~~~~~
[19:03:03] -rusti- error: aborting due to previous error
[19:03:05] -rusti- application terminated with error code 101
[19:03:06] <jack> whoops. sorry about the extra newlines.
[19:04:09] <orshem> sp3d, it worked! thanks! i don't know why it didn't work with rusti
[19:07:07] *** Joins: dherman (dherman@moz-BBE3ABD.mv.mozilla.com)
[19:07:07] *** ChanServ sets mode: +o dherman
[19:07:11] *** Joins: maik__ (maik___@moz-E9AE01F.dip0.t-ipconnect.de)
[19:07:50] <ecr> orshem: just to follow up with sp3d's fix, the only way to examine an enum and check which variant it is (or bind to things inside) is destruction via match (or something like a let). The implementation of Eq is going to do this internally and hide it behind ==, which will allow you to do equality checks wherever.
[19:07:54] <ecr> does that make sense?
[19:09:03] <orshem> ecr: yep! thanks
[19:09:27] <ecr> orshem: sure :)
[19:09:42] *** Quits: josh (josh@moz-104CC309.mv.mozilla.com) (Ping timeout)
[19:09:49] <pauls> jack: yes, recursive macros are fine
[19:10:35] *** Quits: dherman (dherman@moz-BBE3ABD.mv.mozilla.com) (Quit: dherman)
[19:10:54] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[19:11:08] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[19:11:41] <jack> pauls: this doens't seem to work. it's mad about stringify! https://gist.github.com/metajack/6234347
[19:11:51] <bblum> expr_paren? seriously? we generate AST nodes for expr_paren??
[19:12:08] <orshem> another question (sorry): to debug i need to break on rust_break_unwind?
[19:12:13] <Luqman> bblum: afaik for pretty printing
[19:12:22] <bblum> Luqman: ah, that makes sense.
[19:13:22] <sp3d> q: is "RUST_LOG=rustc=1,::rt::backtrace" supposed to be enough on its own to get a backtrace from rustc ICEs?
[19:14:08] <sp3d> I get an ICE and placing that in the environment merely lists the "fallback" fail!() at the end of rustc.rs
[19:14:21] <pauls> jack: what does "mad" mean here? 
[19:15:24] <doomlord_> lol. i'd refactored some navigation code of mine to use zero-based line indices througout,  after having a mix - i figured "i'll never go with zero based column indices, so it makes sense to have line indices consistent"
[19:15:45] <doomlord_> *then* i check what rust's source does.   "Loc" .. 1-based line index , zero-based column index :)
[19:15:45] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[19:16:10] <strcat> yay, cdnjs merged my PR with an up-to-date ace ;p
[19:16:20] <sully> haha, sigh.
[19:16:29] <sully> pnkfelix found two parsing related bugs in default methods
[19:16:58] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[19:19:53] <orshem> can't break on rust_break_unwind
[19:19:58] <orshem> it used to work
[19:19:59] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Connection reset by peer)
[19:20:00] <orshem> did it change?
[19:20:33] *** Quits: Earnestly (earnest@B0BDF733.8FDE20A.5411983D.IP) (Ping timeout)
[19:20:35] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[19:20:36] <sully> rust_begin_unwind is what you want now
[19:20:44] <sully> pnkfelix: sigh, I was just about to close the default methods bug
[19:20:50] <sully> pnkfelix: and you filed two more against it
[19:21:02] <pnkfelix> sully: sorry
[19:21:05] <orshem> sully, right. i misremembered. thanks!
[19:21:16] *** Quits: eatkinson (eatkinson@moz-BBE3ABD.mv.mozilla.com) (Quit: eatkinson)
[19:21:25] <pnkfelix> sully: I think they are probably easy
[19:21:32] <pnkfelix> sully: like,  Icould probably do them,  :)
[19:21:33] <sully> yeah, they look like
[19:21:37] <sully> just parser things
[19:21:56] <sully> honestly I'm no more qualified than anyone else for them :P
[19:22:10] <pnkfelix> sully: give 'em to me, I was hacking on the parser recently
[19:22:13] <sully> I'm going to be OOO Thursday and Friday, but can probably just knock them off on Monday, unless you want to
[19:22:17] <sully> ok
[19:22:18] <pauls> jack: I don't see anything obviously wrong with that code, but I might be able to figure it out, given the failure mode.
[19:22:37] <pnkfelix> sully: I'm going on PTO Thurdsay and Friday too, but they really might be doable tonight for me.  We'll see
[19:22:45] <sully> I don't think I have touched the parser at *all* this summer
[19:22:47] <strcat> huh, somehow ace already knows about rust having an `in` keyword
[19:22:55] <strcat> but it was last edited 4 months ago...
[19:22:58] <sully> this is the first summer I haven't added any language features, I guess
[19:23:19] <sully> strcat: `in` might have been used in rust's original iterator scheme
[19:23:20] <jack> pauls: https://gist.github.com/metajack/6234592
[19:23:25] <sully> strcat: years ago
[19:23:33] <bblum> *sigh*
[19:23:40] <sully> strcat: when we actually had a sort of function that was an iterator
[19:23:41] <bblum> fix soundness bug in type system, libstd no longer compiles
[19:23:41] <pnkfelix> sully: I'd call your work on default methods a seriously important language feature.  Maybe it was "already" in the language, but not in any meaningful sense since it was unusable.
[19:23:42] <jack> not sure if that's what you meant
[19:23:47] <strcat> sully: heh
[19:24:05] <pnkfelix> sully: but I get your point, w.r.t parser work
[19:24:23] <sully> bblum: what was the bug?
[19:25:08] <bblum> sully: https://github.com/mozilla/rust/issues/7836
[19:25:26] <pauls> jack: ah, the problem is that patterns aren't (yet -- this might change eventually) a valid position for macro invocations.
[19:25:37] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Ping timeout)
[19:25:41] *** kimundi is now known as zz_kimundi
[19:25:54] <pauls> `my_mac!(...)`can occur as an expression, an item, or a statement.
[19:26:19] <jack> pauls: oh. that kind of sucks. I guess i can fall back to lots of if blocks maybe.
[19:26:39] <pauls> Adding new valid positions is tricky; it's the price we pay for not using S-expressions
[19:26:41] *** Joins: sigma (sigma@51C589B3.EF2694B5.DFAC6AA7.IP)
[19:26:43] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[19:26:58] *** Quits: eschweic (Adium@moz-BBE3ABD.mv.mozilla.com) (Quit: Leaving.)
[19:27:05] <pauls> jack: the good news is that lots of repetitive code is exactly what macros were made to write!
[19:27:05] *** Joins: eatkinson (eatkinson@moz-BBE3ABD.mv.mozilla.com)
[19:29:19] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[19:29:19] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/iDMwjw
[19:29:19] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[19:32:17] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[19:32:17] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/Ed0-LQ
[19:32:17] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[19:32:28] *** Quits: Ms2ger (Ms2ger@moz-3E74B52D.adsl-dyn.isp.belgacom.be) (Quit: nn)
[19:33:15] *** Quits: eevee (eevee@moz-9A8E1439.evrt.wa.frontiernet.net) (Ping timeout)
[19:33:51] *** Joins: eschweic (Adium@moz-BBE3ABD.mv.mozilla.com)
[19:34:06] *** Joins: Sergio965 (sergiobz@moz-A03D2AA1.wireless.csail.mit.edu)
[19:34:17] <Sergio965> If I build from source, who do I install the manual pages?
[19:34:20] <Sergio965> Should they get installed by make?
[19:35:16] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[19:35:16] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/Ed0-LQ
[19:35:16] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[19:35:18] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[19:35:18] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/wsz7ew
[19:35:18] <ghrust> 13rust/06auto 14b25721d 15Felix S. Klock II: Address comments from PR #8418.
[19:35:18] <ghrust> 13rust/06auto 14eb15dbc 15bors: auto merge of #8467 : pnkfelix/rust/fsk-followup-pr8418, r=pcwalton...
[19:35:19] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[19:37:06] *** Joins: eevee (eevee@moz-9A8E1439.evrt.wa.frontiernet.net)
[19:40:22] <Sergio965> how*
[19:40:27] *** Quits: huseby (huseby@moz-4E8C421A.husebyhome.com) (Ping timeout)
[19:46:01] <strcat> Sergio965: you have to do it manually
[19:46:16] <strcat> and the mime stuff, vim support, and so on
[19:47:11] *** Quits: ozten (ozten@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: ozten)
[19:47:47] <strcat> https://github.com/thestinger/packages/blob/master/rust-git/PKGBUILD#L41 for an idea of what it misses
[19:48:20] <strcat> actually make install does install the man pages now
[19:49:01] *** Quits: maik__ (maik___@moz-E9AE01F.dip0.t-ipconnect.de) (Ping timeout)
[19:50:24] *** Quits: Jesin (Jessin_@moz-48B48C95.eecs.lehigh.edu) (Quit: Leaving)
[19:51:21] *** Quits: KindOne (KindOne@EE1CEA1E.B7D17EEE.EC6A1518.IP) (Ping timeout)
[19:51:49] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[19:52:10] *** Joins: mihneadb (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net)
[19:52:19] *** Quits: mihneadb_ (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net) (Connection reset by peer)
[19:54:01] *** Quits: jviereck (Adium@moz-A034D4DA.dclient.hispeed.ch) (Quit: Leaving.)
[19:56:02] *** Joins: KindOne (KindOne@EE1CEA1E.B7D17EEE.EC6A1518.IP)
[19:57:16] <doomlord> what does ~MyTrait:Send mean r.e. types (i'm trying out trait objects for the first time...)
[19:59:33] *** Joins: dim-an (ermolovd@moz-FE167E47.nationalcablenetworks.ru)
[19:59:50] *** Joins: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net)
[20:00:05] <jack> doomlord: it means whatever implements the trait must satisfy Send
[20:00:17] <jack> so it can only contain Send things.
[20:00:54] *** Quits: eschweic (Adium@moz-BBE3ABD.mv.mozilla.com) (Quit: Leaving.)
[20:00:54] <doomlord> ok thanks. (ah its just trait inheritents or trait bounds..)
[20:03:46] <doomlord> http://pastebin.com/FhfDkx0v <<< randomly trying them out,
[20:05:06] <doomlord> q1 at the point where it says p2:~Bar .. "let x=p2 as ~MyTrait"  ... is x  (*Bar, *Vtable)  internally.
[20:05:24] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[20:05:24] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14eb15dbc to 140a677bc: 02http://git.io/N3iJvQ
[20:05:24] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[20:05:25] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[20:05:25] <ghrust> 01[13rust01] 15bors pushed 5 new commits to 06auto: 02http://git.io/ns0gLQ
[20:05:25] <ghrust> 13rust/06auto 147b1b7f3 15gifnksm: doc: Add -M and -L option to po4a
[20:05:25] <ghrust> 13rust/06auto 142bc8a9b 15gifnksm: doc: Update .pot files
[20:05:25] <ghrust> 13rust/06auto 14e4cfb1d 15gifnksm: doc: Generate .po files for Japanse translations
[20:05:27] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[20:06:14] <doomlord> i didn;'t seem to be able to do this with a function taking a &MyTrait with any sort of casting. should i have been able to create a MyTrait aka (*data, *vtable) on the stack, and pass a pointer to a function taking a '&MyTrait'
[20:06:54] *** Quits: mitsuhiko (mitsuhiko-@moz-BC29B73E.srv.pocoo.org) (Ping timeout)
[20:10:54] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[20:14:00] *** Joins: Earnestly (earnest@B0BDF733.8FDE20A.5411983D.IP)
[20:17:26] <toddaaro> is there a way to run newrt tests sequentially, but have multiple runtime threads per test?
[20:17:32] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[20:17:58] <toddaaro> sequential was RUST_THREADS=1, but now that is also the one for number of threads in a test runtime too?
[20:18:09] <bblum> toddaaro: "Is the test framework flexible in any way whatsoever?" haha you're a funny guy
[20:18:23] <toddaaro> bblum: :=|
[20:18:26] *** Quits: fabiand (fabiand@moz-40AC6CE3.adsl.alicedsl.de) (Quit: Verlassend)
[20:23:39] *** Quits: mschifer1 (Adium@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[20:25:45] <sigma> hmm, is there a nice way to match against the head of a vector?
[20:26:39] <Eridius> I think you can say [x, ..xs]
[20:26:40] *** Joins: mschifer (Adium@moz-BBE3ABD.mv.mozilla.com)
[20:26:55] *** Quits: mihneadb (mihneadb@moz-BE33DA21.fw1.sfo1.mozilla.net) (Input/output error)
[20:27:01] <Eridius> rusti: match [1,2,3] { [x, ..xs] => x, [] => fail!("blah") }
[20:27:02] -rusti- <anon>:5:9: 5:62 error: non-exhaustive patterns: vectors of length 3 not covered
[20:27:02] -rusti- <anon>:5          match [1,2,3] { [x, ..xs] => x, [] => fail!("blah") }
[20:27:02] -rusti-                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[20:27:03] -rusti- error: aborting due to previous error
[20:27:03] -rusti- application terminated with error code 101
[20:27:13] <Eridius> rusti: match &[1,2,3] { [x, ..xs] => x, [] => fail!("blah") }
[20:27:15] -rusti- <anon>:5:32: 5:34 warning: unused variable: `xs` [-W unused-variable (default)]
[20:27:15] -rusti- <anon>:5          match &[1,2,3] { [x, ..xs] => x, [] => fail!("blah") }
[20:27:15] -rusti-                                          ^~
[20:27:15] -rusti- 1
[20:27:32] <Eridius> rusti: match &[1,2,3] { [x, .._] => x, [] => fail!("blah") }
[20:27:32] -rusti- 1
[20:27:36] <sigma> aha
[20:27:39] <Eridius> rusti: match &[1,2,3] { [x, *] => x, [] => fail!("blah") }
[20:27:39] <sigma> awesome
[20:27:39] -rusti- <anon>:5:30: 5:31 error: unexpected token: `*`
[20:27:39] -rusti- <anon>:5          match &[1,2,3] { [x, *] => x, [] => fail!("blah") }
[20:27:39] -rusti-                                        ^
[20:27:40] -rusti- application terminated with error code 101
[20:28:08] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[20:28:30] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[20:28:30] *** ChanServ sets mode: +o brson
[20:29:29] *** Joins: mihneadb (Mihnea@moz-BE33DA21.fw1.sfo1.mozilla.net)
[20:29:35] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[20:30:46] *** Quits: brianm (brianm@moz-B4F5B7FB.ptr.us.xo.net) (Quit: Leaving...)
[20:30:49] *** Joins: mitsuhiko (mitsuhiko-@moz-BC29B73E.srv.pocoo.org)
[20:31:10] *** Quits: mihneadb (Mihnea@moz-BE33DA21.fw1.sfo1.mozilla.net) (Ping timeout)
[20:31:45] *** Joins: mihneadb (Mihnea@moz-BE33DA21.fw1.sfo1.mozilla.net)
[20:32:29] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[20:32:45] <graydon> olsonjeffery: ping
[20:32:57] *** Joins: dherman (dherman@moz-BBE3ABD.mv.mozilla.com)
[20:32:57] *** ChanServ sets mode: +o dherman
[20:33:04] <brson> toddaaro: check-stage1-rpass runs a program called compiletest that runs the programs in src/test/run-pass. while it's doing this most of its threads tend to be sitting in epoll not working
[20:33:32] <brson> toddaaro: right now i'm trying to compare the perf of the test run with and w/o work stealing
[20:33:35] <toddaaro> brson: I would expect that, most of them aren't parallel tests, or are they?
[20:34:05] <toddaaro> every sequential test will still have RUST_THREADS workers sitting idle
[20:34:07] *** Joins: brendan (brendaneic@E908EF74.6BAC3F3B.56A6FAA.IP)
[20:34:54] <toddaaro> hm, is it the worker threads *in* compiletest or the threads in the programs it runs?
[20:36:15] *** Joins: azakai (alon@moz-BBE3ABD.mv.mozilla.com)
[20:37:16] <olsonjeffery> graydon: pong
[20:38:04] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[20:38:04] *** ChanServ sets mode: +o tjc
[20:38:06] <graydon> olsonjeffery: what's new in file-io-land? I'm too excited to just wait and see :)
[20:38:24] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[20:38:46] <olsonjeffery> i want to have a PR by friday
[20:38:51] <graydon> !!
[20:38:54] <olsonjeffery> if not, ill pull a bender over the weekend
[20:39:39] <graydon> is there a wip branch I can look at? I'm super curious
[20:41:10] *** Quits: FDS (arnaud@moz-CE4D5907.bdx.modulonet.fr) (Ping timeout)
[20:41:24] <olsonjeffery> graydon: i need to do some cleanup. will you be around later?
[20:41:36] <graydon> 'course!
[20:41:50] <graydon> you can also say "no" :)
[20:41:56] *** Quits: eatkinson (eatkinson@moz-BBE3ABD.mv.mozilla.com) (Quit: eatkinson)
[20:42:10] <graydon> I was just interested to see. I spent a while recently writing stuff using io:: again and my heart was heavy during it...
[20:42:12] *** Joins: eatkinson (eatkinson@moz-BBE3ABD.mv.mozilla.com)
[20:42:32] <graydon> "Must .. not .. use .. @Writer ... gnrrrr!"
[20:42:40] *** Quits: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net) (Input/output error)
[20:45:31] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[20:48:00] *** Quits: maxli (maxli@13F2CEC5.7672369.D8E68FF6.IP) (Quit: Leaving.)
[20:48:26] <doomlord> http://pastebin.com/JxvXsSyK << could anyone advise me how i'm suposed to do that.. just trying  out how to create and pass a trait object pointer
[20:48:42] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[20:49:20] <doomlord> not sure if i should even be able to do that .. the intention was to create a trait object as an interface to an existing object of a known type, to pass to somthing expecting an interface.
[20:49:45] <doomlord> the test works if i dont do line 54
[20:51:59] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[20:52:02] <brson> toddaaro: it's the threads in compiletest - compiletest should be parallelizing the test suite
[20:52:21] <cmr> brson: did you see http://huonw.github.io/isrustfastyet/mem/ btw
[20:53:13] <cmr> I don't have data for newrt yet but I don't think it's the only thing to blame for the perf spike
[20:53:25] <Eridius> hey graydon. I updated the Process::new() PR again now that CString is available
[20:53:40] <graydon> Eridius: great
[20:53:56] *** Joins: foxtrottango (Mibbit@moz-25ED1BAB.net.uwaterloo.ca)
[20:54:48] <graydon> Eridius: seems a little odd that spawn_process_os takes args as &[S] but not prog or env
[20:54:48] <kmc> how do we feel generally about .to_c_str().with_ref vs. the RAII-ish use of CString and .unwrap()?
[20:54:56] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Input/output error)
[20:55:00] <graydon> kmc: example?
[20:55:06] *** Quits: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net) (Ping timeout)
[20:55:07] <bblum> rusti: struct X<T>(T); impl <T> Send for X<T> { }
[20:55:07] -rusti- ()
[20:55:11] <kmc> I've been converting code to the former because it's closer to the old way, but I wonder if the latter is favored
[20:55:16] <Eridius> graydon: yeah I was considering making a second PR to update those as well. The original issue was only requesting the conversion for args
[20:55:37] <kmc> graydon: uh, something like   x.to_c_str().with_
[20:55:39] <cmr> kmc: strcat advocated explicitly doing push_char('\0') / push_str("\0") when you need it to avoid the copy and the temporary
[20:55:40] <kmc> erp one sec
[20:55:41] <Eridius> graydon: but I figured, this PR has lived long enough, env/etc can be done as a separate PR
[20:55:46] <cmr> which I think is pretty sane
[20:55:58] *** Joins: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net)
[20:55:58] <Eridius> kmc: .unwrap() doesn't free the buffer
[20:56:18] <toddaaro> cmr: how does one read that graph?
[20:56:36] <brson> cmr: i haven't. that's a regression related to Map::contains_key?
[20:56:38] <toddaaro> brson: ok, makes sense. How are the tests run? via SingleThreaded?
[20:56:45] <graydon> Eridius: fair enough. r+, looks good otherwise.
[20:56:51] <Eridius> graydon: thanks
[20:56:53] <kmc> graydon: uh, something like   x.to_c_str().with_ref(|cx| my_c_fun(cx))  vs.  { let cx = x.to_c_str(); my_c_fun(cx.unwrap()) }
[20:56:56] <kmc> these are both safe, right?
[20:56:58] <cmr> toddaaro: on the top, the horizontal lines mark pull requests. blue line is memory usage (left axis), red line is time taken (right axis)
[20:57:07] <kmc> in the latter case the buffer is freed when cx goes out of scope
[20:57:10] <Eridius> kmc: the latter will leak the CString buffer
[20:57:14] *** Joins: ozten (ozten@moz-BE33DA21.fw1.sfo1.mozilla.net)
[20:57:14] <strcat> brson: no there's a big gap with no benchmarks
[20:57:20] <kmc> really?  "This structure wraps a *libc::c_char, and will automatically free the memory it is pointing to when it goes out of scope."
[20:57:22] <Eridius> kmc: .unwrap() consumes the receiver
[20:57:32] <Eridius> that's the whole point of unwrap
[20:57:33] <kmc> I thought that was the whole point of this new CString type
[20:57:34] <cmr> toddaaro: you can scroll to zoom in, clicking on a PR opens a card on the left and puts the memory vs time graph of that commit on the bottom
[20:57:36] <brson> toddaaro: no they are spawned normally, then fork/execed, then they wait (blocking) on the subprocess, while spawning two SingleThreaded schedulers to collect the stdout/stderr streams
[20:57:42] <strcat> brson: contains_key one was just the first benchmarked since it regressed
[20:57:55] *** Quits: dherman (dherman@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[20:57:56] <kmc> well anyway ok, if it consumes the receiver, why would it leak?
[20:57:57] <Eridius> kmc: yeah I don't think unwrap is suitable for use except when you're using a non-owned buffer. I already submitted a PR clarifying the docs on unwrap
[20:57:58] <jack> graydon: is bors supposed to handle the case where buildbot force-fails a test because `make check` times out?
[20:58:01] <kmc> ok
[20:58:12] <Eridius> kmc: because it marks the receiver as non-owning before extracting the buffer and throwing away the receiver
[20:58:13] *** Joins: dherman (dherman@moz-BBE3ABD.mv.mozilla.com)
[20:58:13] *** ChanServ sets mode: +o dherman
[20:58:19] <brson> strcat: ok, and presumably that gap spans the commit where newrt landed?
[20:58:20] <toddaaro> brson: so fork/exec is called from inside a "normal" runtime scheduler thread?
[20:58:21] <Eridius> it can't free the buffer, otherwise it would be returning an invalid pointer
[20:58:27] <brson> toddaaro: yes
[20:58:33] <cmr> toddaaro: time measurement is too noisy to make useful decisions with though, so ignore it
[20:58:37] <kmc> hm I guess I should read the code
[20:58:38] <doomlord> {  		let q=&Foo{v:15} as &MyTrait;  do_soemthing(q) }    fn do_something(p:&MyTrait){..}   ... complains about lifetime
[20:58:41] <toddaaro> cmr: ok, interesting
[20:58:49] <cmr> will be seeing if the cpuacct measurement is less noisy
[20:58:52] <Eridius> kmc: if you .unwrap(), you're taking all responsibility for the resulting pointer.
[20:58:59] <doomlord> should that  even work or not
[20:59:00] <kmc> yeah that is... not clear from the docs :)
[20:59:21] <Eridius> maybe we should rename that method entirely, since .unwrap() does not normally threaten to leak resources when used on other constructs
[20:59:35] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[20:59:36] <kmc> the API really looks like it's trying to provide an RAII c string buffer
[20:59:48] <Eridius> yeah, it does, but you have to use .with_ref() in that case
[20:59:51] <engla> strcat: the memory use change looks just like a revert of the changes that made the memory graph flat  (adding some scopes to release objects sooner)
[21:00:10] <kmc> well but if I'm using the with_* idiom anyway, then why do I need RAII?
[21:00:14] <Eridius> methinks we should have a .get_ref() since people are going to say .with_ref(|x| x) often enough anyway
[21:00:15] <toddaaro> brson: ok that sounds terrifying, I will have to think through what that means for the runtime
[21:00:38] <toddaaro> brson: how is the join call made?
[21:00:48] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[21:00:58] <kmc> Eridius: yeah I agree
[21:01:02] <kmc> and unwrap should be renamed
[21:01:26] <kmc> .with_ref(|x| x) is definitely an anti-pattern as it's not generally safe with these with_* idioms
[21:01:41] <kmc> in fact I found some code that was using the old with_c_str with |x| x  :( 
[21:01:52] <cmr> with_ref should be yielding a borrowed pointer, not a raw pointer
[21:01:57] <brson> toddaaro: joining with the subprocess? it's waitpid
[21:01:59] <brson> toddaaro: if you think that putting those tests into a SingleThreaded scheduler would help then the code is in src/compiletest/runtest.rs
[21:02:14] <toddaaro> brson: ok, I'll think about it some
[21:02:25] <engla> cmr:  can't as_imm_buf on a vector do the same?
[21:02:32] <cmr> engla: yup
[21:02:34] <Eridius> cmr: CString is only useful when dealing with raw pointeers anyway
[21:02:37] <toddaaro> brson: if schedulers are sitting in epoll_wait though it probably doesn't make much difference
[21:02:49] <cmr> Eridius: Why?
[21:03:05] <strcat> toddaaro: brson: ideally you want to use posix_spawn, if you don't need anything special after fork
[21:03:08] <Eridius> cmr: because the purpose is to interact with FFI functions?
[21:03:23] <Eridius> you don't typically need to null-terminate a buffer unless you're interacting with a C API, which means FFI
[21:03:27] <cmr> Eridius: The pointers it gives still follow the lifetime rules, there's no reason to not use them
[21:03:59] <Eridius> cmr: what do you mean? The only borrowed pointer it will give you is via .as_bytes()
[21:04:10] <Eridius> .with_ref() and .with_mut_ref() give you *libc::c_char and *mut libc::c_char
[21:04:24] <cmr> Eridius: yes, and there's no reason they can't give a &c_char and a &mut c_char
[21:04:39] <Eridius> cmr: well except that those would then require a cast to be useful
[21:04:42] <cmr> it's not a safe interface if the pointer escapes
[21:04:54] <Eridius> cmr: sure it is. you can't dereference the pointr without an unsafe{} block
[21:05:04] <Eridius> *pointer
[21:05:21] <cmr> Eridius: not the point, the point is that the pointer will dangle if it escapes with_ref and the destructor is called.
[21:05:31] <sigma> hmm, I'm getting the error "cannot bind by-move into a pattern guard" anyone know what resource I should read to understand whats wrong?
[21:05:35] <Eridius> correct. But it's still safe until it's derefenced, which is an unsafe operation
[21:06:31] <cmr> Eridius: Right, but that doesn't mean you should make footguns just because you can
[21:06:33] <Eridius> if you want to dereference that *libc::c_char, then the burden is upon you to make sure the CString object is still in scope (or, alternatively, did not own the buffer)
[21:06:57] <Eridius> cmr: again, the only real reason to use CString is if you're interacting with C APIs, which means FFI, which means unsafe code. You can't make the thing any safer
[21:07:10] <Eridius> all you can do is make it more awkward to use, by using & instead of *, and requiring that the user cast everything
[21:07:12] <cmr> I think it was bjz_ who had a bug where the pointer escaped with_ref and he was passing garbage data to libxml
[21:07:16] <Eridius> which doesn't really help
[21:07:54] <cmr> rusti: let x = &5; x as *int
[21:07:55] -rusti- 140038606155992
[21:08:12] <cmr> rusti: let x = &5; fn foo(x: *int) {x} foo(x)
[21:08:13] -rusti- <anon>:5:38: 5:39 error: mismatched types: expected `()` but found `*int` (expected () but found *-ptr)
[21:08:13] -rusti- <anon>:5          let x = &5; fn foo(x: *int) {x} foo(x)
[21:08:13] -rusti-                                                ^
[21:08:14] -rusti- error: aborting due to previous error
[21:08:14] -rusti- application terminated with error code 101
[21:08:20] <cmr> rusti: let x = &5; fn foo(x: *int) -> *int {x} foo(x)
[21:08:21] -rusti- 140039500824792
[21:08:25] <cmr> Eridius: no casts needed
[21:08:37] <Eridius> I didn't know we implicitly cast & to * like that
[21:08:58] <cmr> it's not even really a cast, they're the exact same type
[21:09:04] <cmr> one just has static validation
[21:09:41] <Eridius> I thought that &&&T isn't necessarly represented any differently than &T, so they're not strictly the same thing. Or am I misinformed?
[21:09:50] <cmr> &&&T is three layers of indirection
[21:10:12] <cmr> just like ***T
[21:10:20] <cmr> autoderef makes it appear not to be so, but it is
[21:10:26] <Eridius> semantically, yes. But I seem to recall reading somewhere that it doesn't have to be represented in memory as 3 layers of indirection
[21:10:46] <toddaaro> brson: one naive change we can make is to wake the whole sleeper list on every enqueue, that *should* result in no sleeping schedulers while there is work to do
[21:10:48] *** Quits: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net) (Quit: msingle)
[21:10:51] <Eridius> in the absence of *, there's no real way to tell if it's represented using 3 layers or not
[21:10:51] <strcat> well you don't really know anything about how LLVM is going to represent it
[21:11:01] <strcat> it doesn't have to represent * as indirection
[21:11:07] <cmr> yeah that's true
[21:11:09] <strcat> it's not an address, it's LLVM's concept of a pointer
[21:11:13] <Eridius> hmm
[21:11:36] <strcat> LLVM's pointers don't correspond to integers-acting-as-addresses
[21:12:00] <Eridius> cmr: anyway, CString doesn't necessarily own the buffer, so tying the lifetime of the buffer pointer to the CString isn't necessarily correct (although, admittedly, it's going to be correct more often than not)
[21:12:10] *** zz_kimundi is now known as kimundi
[21:12:14] <cmr> Eridius: it's always going to be correct for with_ref though, isn't it?
[21:12:21] <strcat> no
[21:12:29] <Eridius> cmr: is it? I can make a non-owning CString and still use .with_ref()
[21:12:34] <strcat> CString has no idea when the string is going to be freed
[21:12:38] <strcat> it can't allow non-unsafe access
[21:12:40] <strcat> if it doesn't own it
[21:13:08] <strcat> but I don't think we have use cases for CString in the stdlib
[21:13:16] <cmr> right but if you make the callback &fn(&libc::c_char) -> T, it can't return the borrowed pointer at all, can it?
[21:13:19] <brson> toddaaro: instead of stealing randomly, what if we did a linear search of all the sleepers but started at a random index, so it's impossible to miss the queue that contains the work?
[21:13:23] <cmr> lifetimes wouldn't line up
[21:14:04] <engla> cmr: right, if you give it no lifetime as a callback parameter it's impossible
[21:14:10] <engla> I think
[21:15:03] *** Joins: pcwalton (pcwalton@E2F7352.56080C53.97BBD552.IP)
[21:15:03] *** ChanServ sets mode: +o pcwalton
[21:15:55] <toddaaro> brson: yea, that should work
[21:16:00] <toddaaro> I like that idea
[21:16:56] *** reyre is now known as reyre|away
[21:17:12] <brson> *search of all the queues
[21:17:20] *** reyre|away is now known as reyre
[21:19:56] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[21:19:59] <graydon> is randomness intrinsically part of the work stealing algorithm?
[21:20:11] <graydon> (not critical, just curious if they depend on that)
[21:20:22] <toddaaro> I don't think so, but you need some strategy to pick who to steal from
[21:20:32] <toddaaro> and randomizing it I think is the empirical best result so far
[21:20:43] <graydon> sure. good as any.
[21:20:50] <toddaaro> we just have a *really* bad implementation of random stealing
[21:21:23] <toddaaro> like, it computes a random index in a super absurd way and then just tries twice and stops
[21:21:26] <brson> graydon: yes, picking the queue randomly is part of the algorithm
[21:21:29] <brson> afair
[21:21:34] <graydon> toddaaro: (backstory here is I put random scheduling mostly on a hunch that it was "most honest", in the earliest scheduler, and took a certain amount of critique for it, I'm honestly just curious if someone had newer work validating that hunch.)
[21:22:14] <brson> stealing from random queues is part of reducing contention
[21:22:18] <toddaaro> graydon: I'm not sure if randomness is well supported outside of workstealing, but here it is the standard
[21:22:23] <graydon> k
[21:23:43] <olsonjeffery> is it possible to do bitwise-or in rust?
[21:23:55] <brson> graydon: in that sense though workstealing is much lest 'honest' than the old system that scheduled randomly. work stealing scheduling is very deterministic up to the point you start stealing. avoiding starvation and livelocks is going to be a hazard for us
[21:24:31] <graydon> ok
[21:24:32] <sfackler> olsonjeffery: yeah
[21:24:36] <sfackler> rusti: 1 | 2
[21:24:37] -rusti- 3
[21:24:49] <olsonjeffery> heh. guess i should just tried. ty.
[21:25:05] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[21:25:19] <brson> we've speculated about was to introduce more randomness to work stealing
[21:25:21] <brson> *ways
[21:27:00] <ecr> ideally you would always know who to steal from, but since you never to most work stealing schedulers I've seen pick randomly
[21:27:40] <toddaaro> some sort of profiling could be productive, but wrong often enough to be a negative
[21:27:52] <toddaaro> to catch the "one task is doing all the spawning" situations
[21:27:56] <cmr> Would it be possible for the program to give hints to the scheduler?
[21:28:16] <toddaaro> cmr: yes, that could be helpful, but complex
[21:28:24] <cmr> that's what I figured
[21:28:33] <graydon> back to making it actually do the stealing more aggressively!
[21:28:35] <graydon> :)
[21:28:44] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[21:28:49] <ecr> it's probably better for the program to be ignorant of how the scheduler chooses to steal. that way we can work on optimizing it w/o breaking programs.
[21:28:55] <graydon> sorry, didn't mean to send conversation sideways into "interesting randomness" topics!
[21:29:48] <cmr> ecr: is explicit hints any different than implicitly depending on how it works at a given release?
[21:31:13] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[21:31:54] <ecr> cmr: I would say any program that's implicitly depending on the precise details of how steal works is simply wrong because it's depending on implementation specific behavior for correctness.
[21:31:57] *** Quits: saml (sam@moz-14C16814.cst.lightpath.net) (Client exited)
[21:32:20] <cmr> ecr: I'd say the same thing about depending on hints
[21:32:37] *** Joins: eschweic (Adium@moz-BBE3ABD.mv.mozilla.com)
[21:33:18] <ecr> fair enough.
[21:34:26] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[21:34:40] *** Quits: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net) (Quit: jorendorff)
[21:36:12] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:37:03] *** Joins: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net)
[21:37:50] <tjc> graydon: ping
[21:37:55] <graydon> tjc: pong
[21:38:13] * pcwalton finally finished his path type parameter reform patch
[21:38:15] <pcwalton> now to rebase it
[21:38:16] <tjc> graydon: was looking at https://github.com/mozilla/rust/issues/5677 -- I noticed that all the issues on the list of "things that need to be done for rustpkg to be ready to use" are done :-)
[21:38:20] <pcwalton> I apologize that this has taken to long
[21:38:24] <pcwalton> so long*
[21:38:29] <tjc> graydon: except workcache, which I only added just now
[21:38:39] <pcwalton> NZ trip has killed my productivity
[21:38:41] <graydon> pcwalton: no apology required. hard stuff is hard.
[21:38:42] <olsonjeffery> pcwalton: speaking of paths.. what's the best way to turn a path::Path into a *c_char?
[21:38:47] <tjc> graydon: anyway, there are other issues cross-referenced with #5677, but I don't think any of them hold back rustpkg from being "ready to use"
[21:38:47] <aatch> pcwalton, you were here!
[21:38:50] <tjc> wanted to get your opinion on that
[21:38:54] <pcwalton> aatch: I'm here now
[21:38:57] <pcwalton> in Auckland
[21:38:59] <pcwalton> leaving at 5
[21:39:04] <olsonjeffery> &(path.to_str()) ?
[21:39:10] <aatch> pcwalton, aw... Wellington is much better.
[21:39:14] <pcwalton> :)
[21:39:17] <pcwalton> the Moz office is in Auckland
[21:39:30] <graydon> tjc: it uses workcache now?
[21:39:31] <aatch> pcwalton, they should move to Wellington.
[21:39:35] <tjc> graydon: No, I mean...
[21:39:40] <tjc> workcache isn't done yet, but it also wasn't on the list
[21:39:45] <graydon> oh, I see
[21:39:47] <tjc> I think it should have been on the list, so I added it just now
[21:39:51] <graydon> :)
[21:39:55] <tjc> so that needs to be done, but everything that was on the list before today is done
[21:40:01] <graydon> ok, that's great! how usable is it?
[21:40:08] <graydon> I mean, day-to-day
[21:40:11] *** flaper87 is now known as flaper87|afk
[21:40:13] <bblum> hmmm
[21:40:20] <pcwalton> I have no opinion, NZ is really beautiful though
[21:40:20] <bblum> how can i tell if a trait_ref is a lang item trait?
[21:40:33] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Input/output error)
[21:40:40] <graydon> tjc: is it at the point where you want community testing? people to start porting packages to it?
[21:40:46] <cmr> graydon: I've been using it to build rustdoc_ng and it's got rough edges, but it works well
[21:40:51] <pcwalton> bblum: resolve it by looking in the def map and check if it in the def is in tcx.lang_items
[21:41:01] <aatch> pcwalton, as you may have guessed, I live in Wellington. It's awesome because it's like a compressed city.
[21:41:11] <graydon> cmr: yeah? can I try building rustdoc_ng with it here locally?
[21:41:11] <bblum> pcwalton: thank you
[21:41:28] <cmr> graydon: I haven't updated it to current master but feel free to try
[21:41:51] <brson> olsonjeffery: to_str().to_c_str().with_ref(...) maybe
[21:42:34] <graydon> got a ways in!
[21:42:37] <graydon> but crashed :(
[21:42:50] <graydon> lemme clean the workspace
[21:43:06] <toddaaro> brson: I'm still wrestling with figuring out how to provide a delivery guarentee on messages sent to schedulers
[21:43:38] <toddaaro> brson: I got the SingleThreaded spawn to work fine with the "include a handle to the destination inside the task being sent" trick, but in the general case that doesn't work
[21:44:13] <bblum> pcwalton: does this work during typeck::collect, or only after?
[21:44:14] <toddaaro> brson: I think the best plan is to make it so that you check the scheduler message queue when the first call to event_loop.run ends, and if there are still messages in the queue, call run again
[21:44:30] <pcwalton> bblum: hmm. lang item collection happens before typeck, right?
[21:44:38] <pcwalton> I would think it works anytime after resolve and lang item coll
[21:44:44] <toddaaro> brson: it seems ugly, but I think this will save us in the general case without much code effort
[21:44:49] <cmr> graydon: updated it to build with master
[21:44:51] <bblum> pcwalton: ok so tcx.def_map is established by resolve
[21:44:57] <pcwalton> ya
[21:44:57] <cmr> ...as of yesterday
[21:45:00] <bblum> thanks
[21:45:12] <tjc> graydon: given cmr's experience, I would say it's ready for community testing
[21:45:23] <tjc> in an "expect to be reporting issues" kind of way :-)
[21:45:32] <cmr> I agree
[21:45:35] <toddaaro> brson: and in this case we "end" by sending a message to the local scheduler with a handle to itself, so when it reads and discards that message the run will return
[21:45:59] <graydon> tjc: aside from me poking at it / showering you with confetti (seriously: this is _great_) did you want me to do something / send a note / review the code closer / etc.?
[21:46:00] *** Quits: Sergio965 (sergiobz@moz-A03D2AA1.wireless.csail.mit.edu) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[21:46:21] *** flaper87|afk is now known as flaper87
[21:46:22] <sigma> Hmm, I have a problem:
[21:46:22] <sigma> I have a match arm that reads like:
[21:46:22] <sigma> (a,b) if a.is_something() => ()
[21:46:22] <sigma> and it's giving me the error "cannot bind by-move into pattern guard" is there a way to do what I'm trying?
[21:46:25] <tjc> graydon: I'm not sure. I was mostly asking whether you thought any of the other open issues deserve the status of "we shouldn't talk about rustpkg until this is fixed"
[21:46:38] <cmr> sigma: do you want (ref a, b) ... ?
[21:46:39] <aatch> I was planning on using rustpkg for a library I'm planning, so I agree that it's a good time for community testing.
[21:46:48] <graydon> tjc: lemme browse 'em for a sec
[21:46:51] <tjc> graydon: ok
[21:47:19] *** Quits: ozten (ozten@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: ozten)
[21:47:48] <sigma> I have no idea ^^ though that gives me something to go read
[21:48:49] *** Joins: tikue (tkuehn@moz-F4812C6E.hsd1.fl.comcast.net)
[21:49:12] <tjc> sigma: the difference is that if you said "ref a" it would make a a pointer to the first component of the pair
[21:49:15] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[21:49:22] <tjc> whereas with just a, it either moves or copies that component of the pair into a
[21:49:26] <tjc> depending on the type of a
[21:50:22] <sigma> ahh, thanks, I've found the part of the manual I'd apparently missed the past 5 times I've grepped through it
[21:50:31] <sigma> yup, it works now
[21:50:33] <sigma>  thanks guys
[21:51:33] <graydon> tjc: I think possibly 7402, 8405, 7240, 6408?
[21:51:42] <graydon> tjc: but um .. main question: does it get things recursively?
[21:51:57] *** Quits: heftig (heftig@moz-B35D30A.dip0.t-ipconnect.de) (Ping timeout)
[21:52:03] <tjc> graydon: hmmâ€¦ good question. I should test that.
[21:52:44] *** Quits: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com) (Input/output error)
[21:52:59] <tjc> graydon: ok, those seem reasonable. I'll add them to the list in the description part of the meta-bug
[21:53:00] <graydon> recursive operation + pointing to particular versions is the main thing a living package ecosystem needs, I think
[21:53:06] <tjc> yeah
[21:53:24] <graydon> the remainder can be done piecemeal
[21:53:48] <cmr> Also #[link(name="foo")] working!
[21:53:58] <graydon> cmr: how's that?
[21:54:02] <tjc> cmr: yeah, I'm looking at that right now
[21:54:10] <cmr> graydon: can't link against a library if it's built with a different name than you expect
[21:54:29] <tjc> that's https://github.com/mozilla/rust/issues/8239
[21:54:29] <graydon> why would it be? I mean, is this just for renamed packages or something else?
[21:54:33] *** Joins: heftig (heftig@moz-4A54E499.dip0.t-ipconnect.de)
[21:54:47] <tjc> graydon: I'm injecting metadata based on the package ID
[21:54:49] <tjc> which is wrong
[21:54:56] <tjc> I should only do it if there's no #[link] specified
[21:55:14] <graydon> wait, that bug says that it emits a "main" executable
[21:55:17] <cmr> well for example the rust_zmq library builds as librust_zmq......so, but it builds as libzmq......so without rustpkg
[21:55:17] <tjc> I keep looking at this bug because I told cmr I would fix it, and then getting distracted by something else...
[21:55:25] <graydon> something else is going on in there
[21:55:28] <graydon> wait wait
[21:55:32] <cmr> it builds as libzmq when using rustc, that is
[21:55:35] <cmr> and not rustpkg
[21:55:36] <graydon> this is something more subtle
[21:56:16] <graydon> if someone says 'extern mod zmq = "github.com/foo/rust-zmq";'
[21:56:31] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[21:56:41] <tjc> right now it would build as librust_zmq
[21:56:47] <tjc> librust-zmq actually
[21:56:48] <graydon> that is supposed to get the package and its (presumably unique) crate, yes? and if its crate is non-unique, they should be able to refer to the subdir of that by name.
[21:57:07] <brson> toddaaro: i'd like to understand why schedulers are missing messages. the strategy of running the idle callback until there is no work, paired with the async callback to guarantee the scheduler wakes up on sends is simple.
[21:57:10] <graydon> in other words, is this issue not #6408?
[21:57:33] <tjc> it seems like a separate issue?
[21:58:03] <graydon> I would think 6408 is important and 8239 is not (arguably shouldn't happen at all). because if we make the convention that "people name their libs by #[link(name)]" then users of that library have no way to extern-mod to fetch it.
[21:58:12] <tjc> hmm
[21:58:19] <graydon> the key point here is that the extern mod statement should identify a crate in a package
[21:58:32] <tjc> graydon: do we just want to remove support for #[link(name)], then?
[21:58:39] *** Quits: orshem (orshem@C5E06B1E.A5B6B765.E3D28531.IP) (Quit: Leaving)
[21:58:56] <cmr> How do I use that `extern mod` syntax? rustc bails "can't find crate for `zmq`", `rustpkg build` fails because I'm in /tmp/foo which isn't a rustpkg workspace (I'd expect it to fetch into .rust)
[21:59:04] <cmr> graydon: what about for binaries and not libraries?
[21:59:09] <graydon> tjc: I would prefer removing it.
[21:59:17] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[21:59:17] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/ns0gLQ
[21:59:17] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[21:59:20] <tjc> cmr: first question is, are you up to date? this change landed recently
[21:59:31] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[21:59:35] <toddaaro> brson: the problem is that the async callback does not guarentee wake up, if the async callback handle is destructed right after the send, the refcount of watchers on the event_loop decrements, and the run function returns, without handling the event sent by the async callback
[21:59:39] <cmr> tjc: up-to-date as of yesterday, I'll rebuild
[21:59:56] <cmr> 0d817ee specifically
[22:00:03] <toddaaro> brson: so sending a message to a scheduler using the last remaining handle to it fails
[22:00:44] <tjc> cmr: that rev should be good enough. can you paste your code?
[22:00:46] <toddaaro> brson: unless there is some guarentee that events are caught even when there are no watchers keeping the loop active this wouldn't be the case, but I don't think that guarente exists
[22:01:13] <toddaaro> brson: in the past I don't think we ever had a problem as there were just so many idle callbacks flying around stuff got handled
[22:01:35] <graydon> tjc: https://gist.github.com/graydon/9b789f6db4768912fe80 is what I get when I try to do a rustpkg install
[22:01:47] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Ping timeout)
[22:02:00] <brson> toddaaro: this is the same assertion that i've mentioned i have doubts about. have you written a test to verify that a destructed RemoteUvCallback handle does not keep an EventLoop alive?
[22:02:21] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[22:02:21] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/4vioTA
[22:02:21] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[22:02:21] <cmr> tjc: extern mod zmq = "github.com/erickt/rust-zmq"; fn main() { let c = zmq::Context::new(); }
[22:02:23] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[22:02:23] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/hb6brw
[22:02:23] <ghrust> 13rust/06auto 141b7ed8b 15Kevin Ballard: run: Process::new() should take &[Str] instead of &[~str] for args...
[22:02:23] <ghrust> 13rust/06auto 1481256b6 15bors: auto merge of #8203 : kballard/rust/process-new-args, r=graydon...
[22:02:23] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[22:02:23] <toddaaro> the event loop stays alive, but the call to run returns
[22:02:38] <brson> that's what i meant
[22:02:49] <tjc> cmr: hmm, I'll try running that
[22:02:51] <toddaaro> I'll write something to try and demonstrate this
[22:02:57] <tjc> cmr: I have a meeting at 3:15, might have to get back to you after 4
[22:03:04] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[22:03:06] <tjc> graydon: puzzling. I'll try it
[22:03:09] <cmr> tjc: rust-zmq doesn't actually build right now because of the cstr changes but that's not the point :p
[22:03:13] <cmr> tjc: timezone?
[22:03:14] <tjc> sure
[22:03:18] <tjc> cmr: Oh, sorry, Pacific
[22:03:21] <cmr> ok
[22:03:22] *** Joins: richard|s (mindginati@moz-9C555AF3.spmconsultants.co.nz)
[22:03:27] <toddaaro> accounting for this problem fixed the SingleThreaded mode, and explains cleanly the remaining failures, so I'm pretty convinced, but I do not yet have a minimized test case
[22:03:31] * cmr goes back to conquering europe
[22:06:25] <cmr> graydon: cycle time is a lot more managable now, thanks!
[22:07:14] *** Quits: KindOne (KindOne@EE1CEA1E.B7D17EEE.EC6A1518.IP) (Ping timeout)
[22:08:14] <olsonjeffery> speaking of conquering europe: im just about wiped out in a game of web diplomacy im playing (russia, if you must know)
[22:08:21] <olsonjeffery> #rust webdip would be pretty cool
[22:08:55] <cmr> heh, that reminds me of #python on freenode, who recommends to people asking for a project to do to write a diplomacy adjucator
[22:09:02] <olsonjeffery> diplomacy would be a pretty good problem domain for a rust web application
[22:09:19] *** Quits: bblum (bblum@moz-2B41ACB5.andrew.cmu.edu) (Ping timeout)
[22:09:25] <tjc> that would probably interest sully
[22:09:55] <toddaaro> honestly I think it would be pretty boring
[22:10:00] <sully> diplomacy adjudication is hard
[22:10:01] <toddaaro> unless you tried scaling
[22:10:07] *** Quits: rntz_ (rntz@moz-C76A8D96.sp.cs.cmu.edu) (Ping timeout)
[22:10:11] <olsonjeffery> hard, but deterministic!
[22:10:40] <toddaaro> adjucating a single game is just generic coding with no performance requirement on the webappy part, but scaling to thousands of games at once would be interesting
[22:11:07] *** Joins: rntz_ (rntz@moz-C76A8D96.sp.cs.cmu.edu)
[22:11:52] *** Joins: KindOne (KindOne@664CD005.E1AE408F.34F73994.IP)
[22:12:12] *** Joins: bblum (bblum@moz-2B41ACB5.andrew.cmu.edu)
[22:14:45] *** Joins: maxli (maxli@13F2CEC5.7672369.D8E68FF6.IP)
[22:16:15] *** Joins: panzi (chatzilla@moz-94D85B10.adsl.highway.telekom.at)
[22:16:21] <panzi> rusti: -1 >> 1
[22:16:22] -rusti- -1
[22:18:37] <cmr> rusti: -1u8 >> 1
[22:18:38] -rusti- 127
[22:18:45] <cmr> rusti: -1i8 >> 1
[22:18:46] -rusti- -1
[22:18:48] <cmr> rusti: -1i8 >> 2
[22:18:49] -rusti- -1
[22:18:58] <cmr> rusti: (-1i8 as u8) >> 2
[22:18:59] -rusti- 63
[22:19:00] <strcat> http://strcat.zapto.org:8000/ improved a little bit ;p
[22:19:25] <myname> i don't get the last one
[22:19:34] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Ping timeout)
[22:19:40] <graydon> strcat: ooh branch switcher!
[22:20:27] *** Quits: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[22:21:13] <kimundi> Is someone rewriting the module section of the tutorial at the moment? If not, I'd like to take a stab at it
[22:22:04] <strcat> graydon: in the simplest way possible :P, it just uses a different root based on the version
[22:23:09] <cmr> kimundi: not that I know of, go for it!
[22:23:35] <olsonjeffery> strcat: now we just need a turtle graphics api
[22:23:36] <graydon> hm. stage0 is still using the non-rtdebug-fixed snapshots
[22:23:40] <graydon> time for a new snap
[22:23:42] <cmr> IMO the way to go is to have the tutorial smaller, and have more detailed, separate tutorial-like things that go in-depth into a specific topic
[22:23:43] <graydon> anyone want one?
[22:24:07] <graydon> (anyone got something they will shortly-want-one for?)
[22:24:31] <strcat> graydon: probably not, because I just made one a few days ago
[22:24:45] <graydon> yeah, you missed the fix by just a handful of revs
[22:25:10] <strcat> olsonjeffery: I could teach it to use canvas ;P
[22:25:21] <strcat> canvas mode -> interpret output as canvas commands?
[22:25:23] * strcat shrugs
[22:25:29] <olsonjeffery> an api that returns json instructors
[22:25:33] <olsonjeffery> which are interpretted on the client?
[22:25:36] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[22:25:36] <ghrust> 01[13rust01] 15graydon merged 06master into 06snap-stage3: 02http://git.io/R-aiuw
[22:25:36] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[22:25:37] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: Places to go, people to annoy)
[22:25:38] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[22:25:39] <olsonjeffery> instructions, even
[22:26:01] <olsonjeffery> [{angle:90,distance:10},...]
[22:26:16] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[22:26:16] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1481256b6 to 14e7b5729: 02http://git.io/N3iJvQ
[22:26:16] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[22:26:18] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[22:26:18] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/kxq0Vw
[22:26:18] <ghrust> 13rust/06auto 14f70737c 15blake2-ppc: std: Change either::{lefts, rights} to return an iterator
[22:26:18] <ghrust> 13rust/06auto 1415d54d6 15blake2-ppc: Update either::partition...
[22:26:18] <ghrust> 13rust/06auto 14ba93082 15blake2-ppc: std: Replace map_vec, map_vec2, iter_vec2 in std::result...
[22:26:20] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[22:26:28] *** Joins: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com)
[22:26:59] <strcat> rusti: std::os::list_dir("/dev")
[22:26:59] -rusti- <anon>:5:27: 5:33 error: mismatched types: expected `&std::path::PosixPath` but found `&'static str` (expected &-ptr but found &'static str)
[22:26:59] -rusti- <anon>:5          std::os::list_dir("/dev")
[22:27:00] -rusti-                                     ^~~~~~
[22:27:00] -rusti- error: aborting due to previous error
[22:27:00] -rusti- application terminated with error code 101
[22:27:08] <strcat> rusti: std::os::list_dir(Path("/dev"))
[22:27:11] -rusti- line longer than 150 columns, pastebinned 5 lines of output: http://ix.io/7i2
[22:27:19] <strcat> rusti: std::os::list_dir(&Path("/dev"))
[22:27:19] -rusti- ~[~"full", ~"null", ~"fd", ~"stderr", ~"urandom", ~"random", ~"stdin", ~"zero", ~"stdout", ~"shm"]
[22:28:55] * kimundi ponders making a nice graphic for the module tutorial
[22:29:23] <cmr> kimundi: graydon has an awesome metaphor for the module system: it's a filesystem
[22:32:16] *** Quits: dim-an (ermolovd@moz-FE167E47.nationalcablenetworks.ru) (Quit: dim-an)
[22:32:18] <kimundi> cmr: yeah, I know. But I don't think that metaphor is necessary for the tutorial. :) 
[22:32:21] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[22:32:22] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1479f7b00 to 14e7b5729: 02http://git.io/N3iJvQ
[22:32:22] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[22:32:22] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[22:32:22] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/CmE1Zw
[22:32:22] <ghrust> 13rust/06auto 14735dfb9 15Tim Chevalier: testsuite: Tests for #6458. Closes #6458
[22:32:22] <ghrust> 13rust/06auto 14ea2c742 15bors: auto merge of #8473 : catamorphism/rust/issue-6458, r=catamorphism
[22:32:22] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[22:32:29] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[22:32:32] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[22:32:39] * cmr thinks it's pretty great
[22:32:53] <bblum> where is the right place to put random type check utility functions? 
[22:32:55] <bblum> ty.rs?
[22:33:09] * strcat wonders if anyone has called a rust project tetanus yet :P
[22:33:26] <kimundi> cmr: Right now I'm trying to think about how to start it though... To explain 'Crate', I need to explain the module tree... To explain the module tree, I need to explain 'Crate'
[22:33:38] <pcwalton> did transform() become map()?
[22:33:43] <strcat> pcwalton: yep
[22:33:43] <pcwalton> strcat: there have been multiple rust projects called that
[22:33:55] *** Quits: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com) (Input/output error)
[22:34:00] <strcat> they became default methods so they no longer hit the generic impl issues
[22:34:03] <cmr> kimundi: I was thinking about writing one after the memory management one I'm working on
[22:34:17] <cmr> kimundi: The way I was going to start it was doing a preview of the existing module systems in other lanugages
[22:34:19] <pcwalton> oh good
[22:34:24] <pcwalton> feels more like a real language day by day :)
[22:34:24] *** Joins: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com)
[22:34:37] <cmr> kimundi: Show the requirements of a module system, and then show how rust tackles the problem
[22:34:58] <kimundi> cmr: Hmm... That's the 'why', not the 'what'
[22:35:16] <cmr> kimundi: the what comes after the why, I think the why provides a solid framework to build the what off of
[22:35:20] *** Quits: donri (dag@moz-9BB61102.tbcn.telia.com) (Client exited)
[22:35:28] <cmr> just an idea though, never laid out an outline or anything, so I dunno how'd it actually work out
[22:35:39] <kimundi> I'm trying to just properly explain how it works here, hard enough xD
[22:36:47] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[22:36:55] <kimundi> I think I'll try  'compiled binary' -> 'crate' -> 'module tree' -> 'use'
[22:37:06] <strcat> rusti: 2
[22:37:07] -rusti- 2
[22:40:12] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[22:40:14] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[22:40:53] <strcat> rusti: 2
[22:40:53] -rusti- 2
[22:41:03] <myname> what
[22:41:41] <strcat> just making sure it survived being moved :P
[22:42:04] <myname> i see
[22:43:17] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[22:44:36] <kimundi> what exactly are the effects of a 'pub use' ? Does it create an alias, that is there are now two or more canonical paths to the same things?
[22:45:02] <Eridius> strcat: when did the method resolve bug get fixed?
[22:45:05] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[22:45:07] <strcat> Eridius: it didn't
[22:45:12] <Eridius> then how did transform() become map()?
[22:45:15] <strcat> 18:34:00       strcat | they became default methods so they no longer hit the generic impl issues
[22:45:18] <Eridius> ahhhh
[22:45:36] *** Joins: huseby (huseby@moz-4E8C421A.husebyhome.com)
[22:45:42] <strcat> rusti: range(0, 10).skip(3).take(2).to_owned_vec()
[22:45:42] -rusti- ~[3, 4]
[22:46:12] <Eridius> strcat: now that we have .checked_add(), I suspect we should re-evaluate the existing .size_hint()s because the upper bound should transition to None instead of saturating (as per our last discussion on this topic)
[22:46:31] <Eridius> of course, a week ago (before vacation) I was also going to add .size_hint() to all the new iterators, so maybe I should do this as part of that work
[22:47:45] <brson> how can i tell if the gcc the shell is invoking is actually ccache?
[22:48:17] <Eridius> brson: you mean if CC=gcc but gcc is really a script that uses ccache, as opposed to CC="ccache gcc"?
[22:48:42] <brson> Eridius: I think? I symlinked /usr/local/bin/gcc to ccache
[22:48:46] *** Joins: ozten (ozten@A01051A9.6F669779.3D1CA460.IP)
[22:49:03] <Eridius> brson: oh you can do that? huh
[22:49:35] <Eridius> I suppose you could check if it's a symlink, and if so, resolve it and see if the binary is named ccache. But if it's a script that won't work
[22:49:50] *** Quits: lmandel (lmandel@moz-57D3C086.dsl.bell.ca) (Ping timeout)
[22:50:55] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[22:51:15] *** Joins: Houm (Houm@moz-25669AA8.fbx.proxad.net)
[22:51:29] <Eridius> or you could exec it with the name ccache and the flag --version and see what you get. But that also won't solve the script case
[22:51:43] <pnkfelix> brson: and you can monitor `ccache â€”show-stats`
[22:51:52] <bblum> sully: can you tell me about lookup_vtables_for_param
[22:52:04] <bblum> sully: in what situations is it called?
[22:52:13] *** Quits: mschifer (Adium@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[22:52:35] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[22:53:06] <brson> pnkfelix: ccach --show-stats does indicate activity. i guess it's working
[22:53:08] <sully> bblum: given a set of bounds on a single type parameter, it searches for all of the vtables for it
[22:53:09] *** Joins: mschifer (Adium@moz-BBE3ABD.mv.mozilla.com)
[22:55:14] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[22:55:53] *** Quits: maxli (maxli@13F2CEC5.7672369.D8E68FF6.IP) (Quit: Leaving.)
[22:56:31] <sully> sigh, rust-mode is behaving badly
[22:56:39] <cmr> kimundi: `pub use` is a symlink that is externally visible
[22:57:16] *** Joins: gandi (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net)
[22:57:20] <sully> oh, I see
[22:57:22] *** Quits: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net) (Ping timeout)
[22:57:55] <bblum> sully: it also appears to be being used when checking if it's ok to impl a trait that has supertraits
[22:58:17] <bblum> (which is what i'm interested in)
[22:58:36] <sully> yes
[22:59:06] *** Joins: maxli (maxli@13F2CEC5.7672369.D8E68FF6.IP)
[22:59:22] <sully> it checks all supertraits for the bounds as well
[22:59:38] <sully> so we check that supertraits are implemented by checking that the impl properly implements its type at its trait
[22:59:44] <sully> using that function
[22:59:51] *** Joins: mib_xi006f (Mibbit@moz-4BD36ED2.pools.arcor-ip.net)
[23:00:19] <bblum> it seems like in the case of <T:Foo>, when instantiating such a thing, it should suffice to just lookup the traits that are named, and not also make sure they have their supertraits implemented
[23:00:32] <bblum> because supertraits should be ensured at the impl definition site
[23:01:57] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[23:04:08] *** Quits: dew (Instantbir@moz-8A63B53.dhcp.stls.mo.charter.com) (Connection reset by peer)
[23:06:43] *** Quits: mib_xi006f (Mibbit@moz-4BD36ED2.pools.arcor-ip.net) (Quit: http://www.mibbit.com ajax IRC Client)
[23:08:13] *** Quits: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Quit: Leaving...)
[23:09:09] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[23:09:18] <bblum> sully: can you tell me what stops lookup_vtables_for_param() from emitting the "failed to find an implementation" error in the case of Send and Freeze?
[23:09:58] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[23:10:11] <sully> it probably would suffice to not do the lookup for supertraits on function calls and stuff
[23:10:16] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[23:10:53] <sully> although the vtable information is used for codegen, so it would require some work to properly get the information
[23:11:12] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[23:11:27] <sully> lookup_vtables_for_param only ever looks like the trait bounds
[23:11:27] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Client exited)
[23:11:31] <sully> it doesn't look at built in bounds
[23:11:40] <sully> note that a big part of the reason it is the way that it is
[23:11:55] <sully> is that until like 3 weeks ago, we never checked supertraits and impl defn site
[23:12:20] <doomlord> if a trait contains 1 function, could that theoretically be optimized to not use a vtable (just a pair of data & function ptr)
[23:12:21] <bblum> oh because the builtin bounds get converted earlier. right.
[23:12:38] <jeaye> "Rust or bust"
[23:12:39] <cmr> doomlord: theoretically yes, as it is right now
[23:12:40] <jeaye> ^ fucking clever, right?
[23:12:48] <bblum> they just don't get converted earier in the case of supertrait declarations
[23:12:51] <cmr> jeaye: almost as good as in rust we trust
[23:12:54] <bblum> i see
[23:13:05] <jeaye> cmr: Ohh, that is good.
[23:13:06] <doomlord> heh cool.
[23:13:14] <cmr> doomlord: Although I think the vtable also carries the type descriptor with it for reflection, so maybe not
[23:13:47] <strcat> it can't ever be a ptr to a fn since it always needs the tydesc
[23:14:12] <strcat> at least for ~Trait
[23:14:16] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[23:14:16] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14ea2c742 to 14e7b5729: 02http://git.io/N3iJvQ
[23:14:16] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[23:14:18] <strcat> although it probably always needs visit glue
[23:14:18] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[23:14:18] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/Pgm0Zw
[23:14:18] <ghrust> 13rust/06auto 1463083ee 15Tim Chevalier: rustc: Eliminate a derived error in check::_match
[23:14:18] <ghrust> 13rust/06auto 14a5337fa 15bors: auto merge of #8479 : catamorphism/rust/derived-errors, r=catamorphism...
[23:14:19] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[23:14:40] *** Joins: Sodel_the_V (user@moz-853663E1.va.shawcable.net)
[23:15:26] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[23:15:59] <kimundi> cmr: Do we still use the name 'crate file' to refer to the crate root file? Or should we just refer to that as 'crate root' ?
[23:16:09] <cmr> kimundi: we still use crate file.
[23:16:20] <cmr> graydon: what do you think of that term?
[23:16:28] <cmr> now that "crate files" have been unified
[23:17:22] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[23:19:59] *** Quits: ozten (ozten@A01051A9.6F669779.3D1CA460.IP) (Quit: ozten)
[23:20:52] *** Joins: lmandel (lmandel@moz-57D3C086.dsl.bell.ca)
[23:22:41] <dbaupp> is there a way to build with opts with rustpkg?
[23:23:43] <dbaupp> cmr: what did you want me to do?
[23:24:05] <cmr> dbaupp: compare the cpuacct that's in the json to the values in time.txt
[23:24:20] <dbaupp> cmr: oh, to see if it's less noisy?
[23:24:24] <cmr> yeah
[23:24:38] <dbaupp> ok, i'll get to it in a bit
[23:26:15] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[23:26:16] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14a5337fa to 14e7b5729: 02http://git.io/N3iJvQ
[23:26:16] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[23:26:18] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[23:26:18] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/O2f9BA
[23:26:18] <ghrust> 13rust/06auto 14f70737c 15blake2-ppc: std: Change either::{lefts, rights} to return an iterator
[23:26:18] <ghrust> 13rust/06auto 1415d54d6 15blake2-ppc: Update either::partition...
[23:26:18] <ghrust> 13rust/06auto 14ba93082 15blake2-ppc: std: Replace map_vec, map_vec2, iter_vec2 in std::result...
[23:26:20] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[23:26:31] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[23:26:31] *** ChanServ sets mode: +o tjc
[23:26:56] <tjc> cmr: ping
[23:27:02] <cmr> tjc: pong
[23:27:26] <strcat> python web servers really don't scale at all
[23:27:29] <tjc> cmr: I tried building your code snippet -- it was able to fetch rust-zmq and then failed to compile the library (probably because it's not up-to-date for rustc master)
[23:27:30] <engla> did I mess up bors? I reopened this PR https://github.com/mozilla/rust/pull/8471
[23:27:33] <strcat> after ~5 threads
[23:27:37] <tjc> but, it sounds like for you it's failing before it fetches zmq?
[23:27:42] <engla> I managed to close it (by deleting the branch during spring cleaning)
[23:28:01] <cmr> tjc: how are you compiling it?
[23:28:10] <strcat> maybe python's subprocess is polling :\
[23:28:24] <tjc> cmr: so I made a directory called ~/.rust/src/cmr
[23:28:28] <tjc> put your code in it as "main.rs"
[23:28:45] <tjc> and then did: [long/path/to]/rustpkg build cmr
[23:28:51] <tjc> while in my ~/.rust directory
[23:29:28] <dbaupp> engla: possibly
[23:29:49] <dbaupp> graydon: bors seems to be acting up
[23:30:11] <cmr> tjc: right, my thing was that I'm /not/ in a rustpkg workspace.. Do I always need to be in one during development?
[23:30:40] <tjc> cmr: I think it should also work if the directory that your code is in is in the RUST_PATH. So let me try doing thatâ€¦ 1 sec
[23:30:46] <engla> I'm sorry! yeah all the builders are running two builds concurrently now
[23:30:51] <cmr> Well, it's not that either :)
[23:30:57] <tjc> (including the implicit RUST_PATH)
[23:30:59] <cmr> oh
[23:31:17] <cmr> what's the implicit RUST_PATH?
[23:31:36] <tjc> cmr: so implicitly, ./.rust, ../.rust, and so on all the way up to the filesystem root are in the RUST_PATH
[23:31:44] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[23:31:59] <cmr> What I woudl expect to happen is that rustpkg gets and builds dependencies into ./.rust
[23:32:12] *** Parts: maxli (maxli@13F2CEC5.7672369.D8E68FF6.IP) ()
[23:32:35] <tjc> the way it works right now is that it only works if the source you're building is also in ./.rust or some other directory that's (explicitly or implicitly) in the RUST_PATH
[23:32:39] <tjc> but I've never been quite sure about this
[23:33:16] <tjc> graydon: ^ - it's correct that rustpkg should only build a package if it's in the CWD or in one of the directories in the RUST_PATH, right?
[23:33:21] <tjc> I've always been kind of fuzzy on this
[23:33:29] <cmr> it's very weird to me that I'd need to put my own thing into a workspace to have it fetch its deps
[23:33:57] <cmr> I don't think any other package manager works like that? None that I have used at least
[23:34:02] *** Joins: maxli (maxli@13F2CEC5.7672369.D8E68FF6.IP)
[23:35:21] *** Quits: brendan (brendaneic@E908EF74.6BAC3F3B.56A6FAA.IP) (Quit: brendan)
[23:35:26] <tjc> it's how the Go package manager works: http://golang.org/doc/code.html
[23:35:35] <tjc> (which I've never used, but it's what we're basing this particular aspect of rustpkg on)
[23:37:01] <cmr> What is their justification for that?
[23:37:53] *** Quits: heftig (heftig@moz-4A54E499.dip0.t-ipconnect.de) (Quit: Quitting)
[23:38:37] *** Joins: heftig (heftig@moz-4A54E499.dip0.t-ipconnect.de)
[23:39:47] <Eridius> tjc: my recollection is that you can still `go get` from outside GOPATH and it will fetch and install deps for you
[23:39:49] <graydon> cmr: what do you expect it to do?
[23:39:54] <tjc> extrapolating, but I think it's just that so it's obvious where to create the bin/ and pkg/ directories for compiled code
[23:40:20] <tjc> if the src/ directory wasn't required, it would be "either ../src or ../../src, depending where you found the source code to begin with..."
[23:40:24] <cmr> graydon: I expect it to make a workspace into .rust, fetch into .rust/src, build into .rust/build
[23:40:27] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[23:40:27] <cmr> and soforth
[23:40:36] <graydon> ok. and it doesn't do that?
[23:40:49] <cmr> no
[23:40:55] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[23:41:06] *** Joins: vk (chatzilla@moz-389FEE13.hsd1.ca.comcast.net)
[23:41:08] <tjc> I guess I misunderstood something, because my assumption was that rustpkg would never create a src/ directory
[23:41:26] <tjc> that you would create workspaces with src/ directories and put your sources in them, and rustpkg would create directories for generated code
[23:41:27] <cmr> it requires the source for your package to be in a workspace, ie a subdir in a src subdir, and builds into ../../build or wherever the nearest workspace is according to RUST_PATH, aiui
[23:41:57] <graydon> tjc: where does rustpkg fetch code to if it hasn't downloaded it yet?
[23:42:26] <kimundi> graydon: Is 'crate file' still a valid concept in rust? (with meaning crate root module file)
[23:42:28] <tjc> graydon: right now it fetches it into src/
[23:42:38] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Ping timeout)
[23:42:42] <kimundi> Or should we just call that 'crate root'
[23:42:43] <graydon> tjc: isn't that what cmr just said it doesn't do?
[23:42:50] <graydon> kimundi: crate root
[23:43:07] <tjc> graydon: I think cmr is saying that he wants to be able to build the package when in a directory containing his sources that doesn't have an src/ directory at all
[23:43:16] <graydon> cmr: I just ran it and it fetched into .rust/src/github.com/cmr/rustdoc_ng
[23:43:41] <graydon> containing his sources .. that doesn't contain a src/ dir .. is it a package at all?
[23:43:47] <Eridius> graydon: I see src
[23:43:51] <Eridius> it's just after the .rust
[23:43:54] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[23:44:01] <Eridius> graydon: every project isn't a workspace. .rust is the workspace
[23:44:04] <graydon> cmr: what is the exact thing you're expecting to happen, that's not happening?
[23:44:36] <cmr> My example is `mkdir /tmp/foo; cd /tmp/foo; vim main.rs; (main.rs has an 'extern mod foo = ...') rustpkg build;`
[23:44:40] <graydon> tjc: rustpkg clearly does create src/ directories. it just made one.
[23:44:46] <cmr> That does not work, because it isn't in a workspace
[23:44:57] <cmr> I expect it to make .rust, fetch the dependencies and build in that workspace
[23:45:05] <cmr> and then use that workspace to resolve the dependencies when building.
[23:45:22] <graydon> cmr: which workspace, .rust?
[23:45:27] <cmr> graydon: yes
[23:45:35] <Eridius> cmr: your code isn't in a workspace. I wouldn't expect it to be able to build your code. I would expect it to be able to fetch deps and install them in the first avaialble workspace though
[23:45:45] <Eridius> I haven't looked at rustpkg though, i'm basing this on how go works
[23:45:49] <cmr> Eridius: I don't expect my code to have to be in a workspace to build it
[23:45:52] *** Quits: vosen (vosen@moz-266BA656.icpnet.pl) (Quit: Leaving)
[23:46:00] <Eridius> I have GOPATH=~/Dev/go so if I'm outside of that workspace, that's where my deps get installed
[23:46:02] <cmr> I'm saying that how gopkg works is flawed, I much prefer the npm approach
[23:46:14] <Eridius> cmr: ok sorry clarification, I expect to be able to build, but not install
[23:46:37] <Eridius> with Go, I have a project outside my workspace. I can `go get` to install the deps into my primary workspace, and `go build` to build the project right here. I just can't `go install`
[23:46:45] <cmr> Ok, that behavior would make sense
[23:46:59] <cmr> although I'd want a `rustpkg install --global` or similar
[23:47:06] <graydon> cmr: I'm not interested in debating the npm vs. go pkg style right now. npm has a central registry which means pathnames play a much reduced role in its design. we infer stuff from pathnames.
[23:47:08] <strcat> what would global mean?
[23:47:15] <strcat> it's not rustpkg's role to install to /usr
[23:47:16] <cmr> installs it into /usr/local or whatever the configured global directory is
[23:47:17] <Eridius> I was never much of a fan of npm's style
[23:47:22] <strcat> cmr: that's not rustpkg's job though
[23:47:34] <strcat> the /usr dir is the system package manager's domain
[23:47:48] <graydon> it doesn't matter, we're trying one approach, we'll see how well it works. trying to change approach mid-design is not reasonable. don't propose it.
[23:47:58] <graydon> (please)
[23:48:04] <Eridius> the one wart that I don't like on go's design is you cannot use relative paths (e.g. `import "./foo"`) and still be go-gettable
[23:48:21] *** Joins: dew (Instantbir@moz-8A63B53.dhcp.stls.mo.charter.com)
[23:48:22] <Eridius> but that's a decision that's orthogonal to the rest of the behavior, and could be removed without affecting anything
[23:48:46] <heftig> I think rustpkg should use ~/.local/share/rust (XDG_DATA_HOME) or ~/.rust by default
[23:48:48] <cmr> graydon: I think the current design is fine, and I think it's better than the alternatives, it's just the one little nit about where you put your source code and if it will create a workspace if one doesn't already exist
[23:48:58] <heftig> if system-wide installation is wanted, put it into /var/lib/rust/
[23:49:13] <cmr> (which it does if you try to build anything that isn't the current directory, is `rustpkg install pkgid`)
[23:49:26] <graydon> heftig: that would be --user. we're installing in the _local directory_ by default.
[23:49:47] <cmr> I'm not really interested in --user/--global, just a nice feature to have
[23:49:48] *** Joins: mib_2dr5lk (Mibbit@moz-FB83D6F7.tampfl.fios.verizon.net)
[23:49:54] <cmr> (in this discussion, that is)
[23:50:04] <graydon> cmr: ok. so it does create a workspace if one doesn't exist, in .rust
[23:50:10] <heftig> graydon: you mean the current working directory?
[23:50:17] <graydon> heftig: yes
[23:50:27] *** Joins: brendan (brendaneic@E908EF74.6BAC3F3B.56A6FAA.IP)
[23:50:35] <graydon> cmr: it _doesn't_ have a 'go build' like  mode that builds cwd even if cwd isn't a pkgid
[23:50:46] <graydon> cmr: at least, by the sound of it. tjc: am I correct about that?
[23:50:51] <tjc> graydon: that's correct
[23:51:04] <heftig> hm, i suppose that makes sense
[23:51:07] *** Quits: mib_2dr5lk (Mibbit@moz-FB83D6F7.tampfl.fios.verizon.net) (Quit: http://www.mibbit.com ajax IRC Client)
[23:51:12] <heftig> compared to ruby, i'd rather have bundler than gem semantics
[23:51:16] <tjc> I wouldn't have any problem with adding rustpkg build-even-if-not-really-a-package
[23:51:18] <graydon> tjc: I gather it has a mode like "rustpkg install" w/o arg that infers pkgid from cwd, yes?
[23:51:19] <tjc> or something like that :-)
[23:51:32] <tjc> graydon: yeah, it has that too, but it still requires you to be in a workspace
[23:52:23] <graydon> tjc: I see. would it be problematic to have it work even when not in a workspace? (how does it decide if you are or are-not? absence of src/ above you?)
[23:52:53] <Eridius> graydon: with Go, your workspace has to be in $GOPATH
[23:52:58] <tjc> graydon: yeah
[23:52:59] <Eridius> (which is a colon-delimited list)
[23:53:10] <Eridius> the mere presence of a src/ dir does not define a workspace
[23:53:25] <tjc> as for whether it would be problematic, I'm not sure
[23:53:33] <tjc> it's just not what the spec I've been going with so far says
[23:53:38] <tjc> if we need to change it, that's fine
[23:54:04] <graydon> Eridius: is there an implicit GOPATH for dir-local installation?
[23:54:07] <cmr> I just see it as a violation of the principle of least surprise
[23:54:13] <graydon> .:..:../..: etc?
[23:54:14] <Eridius> graydon: not sure what you mean by dir-local installation
[23:54:20] <Eridius> ah, no
[23:54:24] <Eridius> you need to set GOPATH
[23:54:33] <graydon> Eridius: so Go definitely requires a GOPATH, ok.
[23:54:44] <Eridius> you can use `go build` outside of a workspace, but it won't fetch deps or install anything
[23:54:45] <graydon> we would like to work without a RUST_PATH until such time as you set one
[23:55:08] <graydon> won't fetch deps or install
[23:55:10] <graydon> huh
[23:55:20] <Eridius> graydon: personally, I have no problem with saying RUST_PATH defaults to ~/.rust if not set
[23:55:23] <graydon> is there a way in go, outside a workspace, to have it fetch deps an install? any command?
[23:55:30] <strcat> no it's evil
[23:55:36] <graydon> Eridius: no, we've had very clear instructions to default to cwd
[23:55:38] <strcat> it makes you set GOPATH or you're on your own
[23:55:48] <cmr> I agree that cwd is best
[23:55:50] <Eridius> graydon: you can say `go get` inside a project, and it will fetch your deps and install them (into the primary workspace I believe; I only have one), but it will complain that the root project is outside the workspace and not try to install it
[23:56:06] <Eridius> graydon: cwd can't be a workspace. It's a project. a project lives inside a workspace; it is not a workspace.
[23:56:07] <graydon> ok. so it won't install but it will fetch deps.
[23:56:08] <graydon> build?
[23:56:18] <Eridius> `go build` doesn't require workspace. It builds locally and leaves the built product in the cwd
[23:56:27] <cmr> Eridius: well the workspace is specifically ./.rust, ../.rust, and soforth
[23:56:28] <Eridius> although it uses the workspace to look up non-relative dependencies
[23:57:17] <Eridius> cmr: if you want to search the cwd for a .rust dir and assume that's the workspace, I suppose that works. But if there's no .rust, what do you do?
[23:57:23] <graydon> yeah, sorry, I am confused and cmr is right. the implicit workspace list is just ".rust:../.rust:../../.rust:..."
[23:57:24] <Eridius> although you'd have to actually search for .rust/src
[23:57:24] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[23:57:54] <Eridius> graydon: with .rust:, are you proposing that this would be where dependencies are installed? But the project itself can't very well live inside a workspace embedded inside itself
[23:58:10] <graydon> Eridius: if there's no .rust it's the same as if there's no first-entry in the RUST_PATH (if that were set): create it
[23:58:28] <graydon> Eridius: no, obviously the project can't, just its deps and built artifacts
[23:58:33] *** Quits: boredomist (user@moz-63CF9F31.res-cmts.sesp.ptd.net) (Ping timeout)
[23:58:42] <Eridius> graydon: in Go, a project lives inside a workspace. A workspace cannot live inside a project. I'm trying to understand what you expect the behavior to be of a workspace living inside a project
[23:58:53] <tjc> brson: r? https://github.com/mozilla/rust/pull/8518
[23:59:06] <cmr> If rustpkg cannot find a workspace anywhere, in either RUST_PATH or by searching for .rust, it creates a workspace in .rust, correct?
[23:59:42] <graydon> Eridius: it's just the default value for RUST_PATH
[23:59:56] *** Joins: boredomist (user@moz-63CF9F31.res-cmts.sesp.ptd.net)
