[00:00:07] *** Joins: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net)
[00:00:26] *** Quits: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net) (Ping timeout)
[00:00:56] <kvark> I'm having a problem with cell::Ref
[00:00:58] *** Quits: Ferreus (ferreus@moz-82D586A6.pools.arcor-ip.net) (Quit: WeeChat 0.4.2)
[00:01:01] *** Quits: Skif_ (emschwar@moz-CA025D57.ip.mcleodusa.net) (Ping timeout)
[00:01:04] *** Quits: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de) (Quit: Leaving.)
[00:01:15] <SiegeLord> arcnor: It's pretty neat, but now without its issues
[00:01:36] <SiegeLord> E.g. afaik you need to read the metadata for the entire library just to look up a single function
[00:01:43] <dbaupp> SiegeLord: *not?
[00:01:44] <arcnor> is there any way of extracting the metadata using rustc itself?
[00:01:55] <SiegeLord> *not
[00:01:56] <SiegeLord> XD
[00:01:58] <kvark> it has a lifetime parameter, but since it is returned by copy (see RefCell::borrow()), it doesn't allow the Ref::get() to outlive the local copy of Ref itself
[00:02:06] <dbaupp> arcnor: yeah, but it's pretty awkward
[00:02:07] <SiegeLord> My typing is not without its issues too ._.
[00:02:22] *** Joins: Ferreus (ferreus@moz-82D586A6.pools.arcor-ip.net)
[00:02:24] <dbaupp> arcnor: http://static.rust-lang.org/doc/master/rustc/metadata/index.html handles it all
[00:02:27] *** Quits: Ferreus (ferreus@moz-82D586A6.pools.arcor-ip.net) (Quit: Ferreus)
[00:02:50] <dbaupp> arcnor: but the only real documentation is how it is actually used by the rest of librustc
[00:03:12] *** jorendorff is now known as jorendorff_away
[00:03:15] *** Quits: moostik (Icedove@moz-53E05E9C.w92-151.abo.wanadoo.fr) (Quit: moostik)
[00:03:23] <dbaupp> kvark: that's by design: the destructor of the `Ref` resets the RefCell back to being unborrowed
[00:03:47] <arcnor> hmm, I see. Yeah, the docs are not very enlighting :)
[00:03:52] <kvark> dbaupp: ah, so I can't return the reference to inside element, I see
[00:04:23] <dbaupp> kvark: yeah you have to pass the RefCell itself around
[00:05:26] *** Quits: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net) (Ping timeout)
[00:06:51] <kvark> so it turns out Gc<RefCell<T>> is not a replacement of @mut T, since you can't upcast it to anything any more
[00:07:41] *** Quits: Matthias247 (Matthias24@moz-BDD35EC0.hsi5.kabel-badenwuerttemberg.de) (Quit: Computer has gone to sleep.)
[00:08:11] *** Quits: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP) (Quit: Lost terminal)
[00:08:28] *** Quits: Addle (quassel@93529591.BA907378.971E19F6.IP) (Ping timeout)
[00:08:37] *** Joins: Addle (quassel@moz-67A92E8A.cable.teksavvy.com)
[00:09:50] *** Joins: negativezero (negativeze@5A0C3424.BE38E08.1B0787CF.IP)
[00:11:58] *** Quits: Jesin (Jesin@moz-4B662E55.washdc.fios.verizon.net) (Quit: Leaving)
[00:14:04] *** Joins: laofli (Mibbit@moz-196469EC.dip0.t-ipconnect.de)
[00:14:09] <dbaupp> kvark: what do you mean?
[00:14:49] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Quit: WeeChat 0.4.2)
[00:14:56] <bjz> arcnor: do you mean `println` or `println!`?
[00:15:44] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[00:15:46] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Quit: Leaving.)
[00:15:58] *** Joins: Jesin (Jesin@moz-4B662E55.washdc.fios.verizon.net)
[00:16:04] <bjz> arcnor: println, the function is re-exported in the prelude: http://static.rust-lang.org/doc/master/std/prelude/index.html
[00:16:12] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[00:16:43] *** Quits: negativezero (negativeze@5A0C3424.BE38E08.1B0787CF.IP) (Ping timeout)
[00:16:44] *** Joins: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de)
[00:16:44] <bjz> arcnor: the prelude is automatically included in every rust crate, but you can add an attribute to prevent that
[00:16:50] *** Quits: laofli (Mibbit@moz-196469EC.dip0.t-ipconnect.de) (Quit: http://www.mibbit.com ajax IRC Client)
[00:17:56] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[00:18:04] <arcnor> oh sorry bjz, this irc client doesn't seem to notify me of mentions :)
[00:18:05] <bjz> arcnor: println! on the other hand is automagically injected into the crate via some code in the compiler: https://github.com/mozilla/rust/blob/master/src/libsyntax/ext/expand.rs#L821-L826
[00:18:18] <bjz> arcnor: which is horribly hacky
[00:18:23] <arcnor> I meant everything, really
[00:18:30] <arcnor> println is just an example
[00:18:51] <bjz> arcnor: hopefully macros will be able to be exported nicely like other items in the future
[00:19:07] <arcnor> hmm, so println! won't be in the libstd library metadata?
[00:19:36] <bjz> nope :(
[00:19:50] *** Quits: AvianFlu_ (AvianFlu@moz-723527FF.nycmny.fios.verizon.net) (Ping timeout)
[00:19:51] <bjz> it reall should be defined in std
[00:19:58] <bjz> std::println!(...)
[00:20:13] <arcnor> hmm, then only reading the lib metadata won't be enough
[00:20:23] <bjz> use std::println;
[00:20:30] <arcnor> oh, but it also won't be defined in std.rs or whatever the name of the libstd files?
[00:20:39] <bjz> arcnor: I'm not sure of the low level specifics
[00:21:01] <bjz> you might have to ask on #rust-internals if that is the thrust of the question
[00:21:08] <arcnor> oh, there is another channel
[00:21:11] <arcnor> yeah, I'll go there and ask
[00:21:23] <arcnor> thank you dbaupp, SiegeLord and bjz :)
[00:21:25] <bjz> I thought you were talking from a more user level seeing as it's #rust
[00:21:29] <bjz> no worries!
[00:22:11] <arcnor> have a good day (or night if you're in the other side ;)
[00:22:33] <bjz> good day is right :)
[00:22:41] <bjz> (Australia)
[00:23:01] <arcnor> ;)
[00:23:05] *** Quits: arcnor (arcnor@moz-C48B224D.lns20.syd7.internode.on.net) (Quit: Konversation terminated!)
[00:24:45] *** Quits: eholk (eholk@moz-58C5EE6F.wavecable.com) (Ping timeout)
[00:25:34] *** Quits: zztr (Thunderbir@moz-CA50D606.dsl.static.sonic.net) (Quit: zztr)
[00:25:34] *** Joins: eholk (eholk@moz-58C5EE6F.wavecable.com)
[00:27:04] *** Joins: TimAbraldes (quassel@moz-204A2E3F.hsd1.or.comcast.net)
[00:28:11] *** Quits: Taneb (Taneb@moz-AA8D754D.hacksoc.org) (Ping timeout)
[00:28:41] *** Quits: Earnestea (earnest@moz-E86D50FA.dyn.plus.net) (Ping timeout)
[00:28:41] *** Quits: luz (lucy@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[00:28:53] *** Joins: Earnestea (earnest@moz-E86D50FA.dyn.plus.net)
[00:29:31] *** Joins: Taneb (Taneb@moz-AA8D754D.hacksoc.org)
[00:29:46] *** Joins: luz (lucy@moz-CD18B14B.customer.cdi.no)
[00:29:52] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[00:30:06] <mitja> bjz: I opened an issue for glfw-rs
[00:31:32] <kvark> dbaupp: I mean that you could upcast @mut A as @mut T, but you can't do the same with Gc<RefCell<>>
[00:32:05] <dbaupp> kvark: if `T` is a trait, you mean?
[00:33:32] *** Quits: Mathnerd314 (Mibbit@DD760FDD.60D7EA1F.459A737F.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[00:33:53] <kvark> yep
[00:34:01] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[00:34:09] *** Quits: elux (peter@B6F21F4B.1F20BC31.2170E5F.IP) (Quit: Leaving...)
[00:35:09] <kvark> dbaupp: as far as I see RefCell has T stored by value, which makes the cast-to-trait impossible
[00:35:30] <dbaupp> RefCell<~T>
[00:35:48] <dbaupp> but yeah, it's not the same :(
[00:36:12] <kvark> oh, I forgot about this one. Yes, another level of indirection.. but at least some kind of workaround
[00:37:35] *** Quits: luz (lucy@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[00:38:09] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[00:39:38] *** Joins: luz (lucy@moz-CD18B14B.customer.cdi.no)
[00:39:44] *** Quits: WebeWizard (Mibbit@moz-7CCD1DAE.ks.ks.cox.net) (Quit: http://www.mibbit.com ajax IRC Client)
[00:40:58] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Quit: Leaving.)
[00:41:19] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[00:41:27] <bjz> mitja: cheers - I'm abit busy atm, but it would be good to discuss the gamedev stuff on #rust-gamedev
[00:41:29] *** Quits: int3_ (int3_@6647F17C.C24D7B6A.EC6C369A.IP) (Ping timeout)
[00:43:37] *** Joins: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com)
[00:45:24] *** kimundi is now known as zz_kimundi
[00:46:02] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[00:46:37] *** Joins: bheylin (brianheyli@moz-8255E94E.adsl.online.nl)
[00:46:44] *** Joins: dev14 (devarshdes@moz-4EB22C7B.san.res.rr.com)
[00:48:01] *** Quits: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net) (Quit: Leaving.)
[00:48:53] *** Quits: icebattle (icebattle@8A14A542.EBE2EE2B.C7CEC4ED.IP) (Quit: Leaving)
[00:49:11] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[00:50:55] <ercxx> Are there any plans for writing a more involved ffi tutorial?
[00:51:32] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[00:52:23] <brson> ercxx: i haven't heard any plans, but it would definitely be beneficial
[00:52:34] <brson> maybe you can do it
[00:52:55] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[00:53:12] <ercxx> I was going for a 'beneficiary' approach :)
[00:53:13] <TheHydroImpulse> Just wondering if you'd accept a design PR for the documentation for std, and extra? Basically just make it look equally as good as the tutorial section.
[00:53:26] *** Joins: elux (peter@moz-6B45ADE5.dsl.bell.ca)
[00:53:54] <brson> TheHydroImpulse: it depends on the design of course, but yes, I very much want to make all our html consistent. there's a bug open on it :)
[00:54:04] <brson> https://github.com/mozilla/rust/issues/9875
[00:54:31] <TheHydroImpulse> brson Awesome, I'll start working on it.
[00:55:37] <TheHydroImpulse> brson Would you recommend putting screenshots in that issue before submitting a PR?
[00:56:15] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[00:57:01] <brson> TheHydroImpulse: yes, that always helps, or upload to a github page is even better
[00:57:22] <brson> although rustdocs are pretty big, maybe screenshot is easier
[00:57:34] <ercxx> brson: I think a good FFI tutorial should have a big warning saying something like 'If you are not familiar with C just stay away' for people like me. 
[00:57:46] *** Quits: eholk (eholk@moz-58C5EE6F.wavecable.com) (Quit: eholk)
[00:57:47] <TheHydroImpulse> brson Ok, awesome. Thanks.
[00:57:57] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[00:58:16] <geomyidae_> https://pay.reddit.com/r/rust/comments/1uxbgm/moving_ownership_via_borrowed_reference/
[00:58:29] *** Quits: synackse (jordyd@moz-5289C68.jax.bellsouth.net) (Quit: synackse)
[00:58:34] <bjz> TheHydroImpulse: that would be awesome
[00:58:46] *** Quits: ramitos (ramitos@moz-60679625.socal.res.rr.com) (Quit: Textual IRC Client: www.textualapp.com)
[00:59:09] <bjz> TheHydroImpulse: ping me if you want some design critique
[00:59:58] <ercxx> geomyidae_: That segfaults here after printing `1`.
[01:00:32] <geomyidae_> (not my post, just heads up; I found it interesting, I'm also trying it locally right now)
[01:00:33] *** Joins: lenstr (lenstr@D88D273E.9636F313.7A27613B.IP)
[01:00:38] <ercxx> geomyidae_: 64 bit linux
[01:00:42] <TheHydroImpulse> bjz Thanks, I'll definitely do that.
[01:00:59] *** Joins: eatkinson (eatkinson@moz-C52156BC.dsl.bell.ca)
[01:01:01] * geomyidae_ gets same result
[01:01:42] *** Joins: synackse (jordyd@moz-5289C68.jax.bellsouth.net)
[01:02:06] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[01:02:11] <flu-> I'm having no luck getting my project structured properly for rustpkg - is there a project out there on github that works with 0.9? Having an example might help quite a bit
[01:02:26] <wycats_> flu-: I'd probably not bother with rust-pg
[01:02:27] <flu-> specifically the standard layout + rustpkg + Makefile
[01:02:28] <wycats_> pkg
[01:02:33] <wycats_> just got with rustc
[01:02:38] <wycats_> it'll keep your life happier
[01:02:42] <wycats_> go*
[01:02:44] <flu-> womp womp
[01:02:59] <wycats_> just giving you hard-won learnings :(
[01:03:01] <flu-> back to Makefile land then
[01:03:29] <wycats_> flu-: should be easy
[01:03:37] <flu-> heh, well after looking at two other projects and the rustpkg manual, I had to come here to beg assistance. Probably will be better with straight rustc
[01:03:44] <wycats_> default: cd src && rustc --rlib lib.rs
[01:04:04] <wycats_> test: cd src && rusc --test --rlib lib.rs && ./my_crate_id
[01:04:09] *** Quits: io2 (io2@moz-871549F5.home.otenet.gr) (Ping timeout)
[01:04:15] <wycats_> if you have dependencies
[01:04:23] <wycats_> rustc -L ../lib --rlib lib.rs
[01:04:30] <wycats_> and just put the rlibs into root/lib
[01:04:38] <wycats_> make sure you compile them with the same version of the compiler
[01:04:45] <flu-> ok
[01:04:48] <wycats_> you can add some tasks to clone the repos and make the deps
[01:04:52] <flu-> any projects set up that way you'd point me to?
[01:04:55] <wycats_> sure
[01:04:58] <wycats_> uno momento por favor
[01:05:02] <flu-> you bet
[01:05:12] <wycats_> https://github.com/wycats/route-recognizer.rs/blob/master/Makefile
[01:05:13] <ercxx> geomyidae_: that works if ax is &int instead of ~int. 
[01:05:31] <wycats_> https://github.com/wycats/routed-http.rs/blob/master/Makefile
[01:05:54] <flu-> Perfect, thanks! Similar layout to my own project
[01:05:59] *** Joins: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca)
[01:06:23] <wycats_> flu-: :)
[01:06:45] <wycats_> flu-: I'm hoping rustpkg gets some love in the next few months (I hope to contribute) but right now it's really quite limited
[01:06:50] <wycats_> and has regressions from rustc
[01:07:24] <flu-> yeah
[01:08:01] *** Quits: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca) (Quit: Leaving.)
[01:08:04] *** Joins: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca)
[01:08:19] <wycats_> flu-: I gave up when it wouldn't compile against an rlib (needed the original source, structured as a rustpkg project)
[01:08:36] <wycats_> and it wanted the git repo to have everything in the root
[01:08:45] <wycats_> didn't have a good story for developing two libraries locally in tandem
[01:09:08] <flu-> seems like it'd be great for really derivative projects that have lots of existing dependencies
[01:09:51] * geomyidae_ is still sincerely interested in throwing some money at the rustpkg problem. maybe more bitcoins ;p
[01:09:55] <cmr> wycats_, it doesn't want them all in the root, or it shouldn't require it.
[01:10:12] *** Quits: mrshankly (mrshankly@3EE34383.CE0EEBAE.806C54C8.IP) (Quit: leaving)
[01:10:35] *** Joins: int3_ (int3_@6647F17C.C24D7B6A.EC6C369A.IP)
[01:11:10] <flu-> Ok, so my project builds a library, and I include some samples that require that library (via external mod foo;) - is this something easy to deal with without rustpkg?
[01:11:23] <cmr> without? certainly.
[01:11:30] <wycats_> cmr: it shouldn't require it, but it does
[01:11:38] <wycats_> github repos aren't the entire "workspace"
[01:11:41] <wycats_> just the src part
[01:11:46] <cmr> wycats_, by it shouldn't, I mean it really doesn't, right now.
[01:11:58] <flu-> cmr: right - so the super simple Makefile that wycats_  pointed me to doesnt tell rustc where the build libfoo.so is, so the samples dont build
[01:11:59] <cmr> depends on how you use it.
[01:12:02] <wycats_> cmr: must have gotten fixed recently
[01:12:10] <flu-> s/build/built/
[01:12:28] <flu-> oh.. *facepalm*
[01:12:30] <wycats_> cmr: given how easy it is to write a Makefile, and how limited rustpkg is on top of rustc, I don't see any reason to use it
[01:12:33] <flu-> probably -L or something.
[01:12:37] * flu- RTFMs
[01:12:43] <wycats_> cmr: did rustpkg fix the "compile against a .rlib" yet?
[01:12:46] <wycats_> that's what pwned me
[01:13:13] <cmr> don't think so, no.
[01:13:25] *** Quits: dev14 (devarshdes@moz-4EB22C7B.san.res.rr.com) (Quit: dev14)
[01:14:47] <wycats_> this is the bug I filed: https://github.com/mozilla/rust/issues/10430
[01:14:56] <wycats_> cmr: it's pretty bad when you're developing libraries in tandem
[01:15:15] *** Quits: synackse (jordyd@moz-5289C68.jax.bellsouth.net) (Quit: synackse)
[01:15:16] <wycats_> you really do need a workflow for linking an rlib from dira into dirb/lib
[01:15:47] <wycats_> also, if your deps aren't rustpkg compatible, it means you can't just rustc and pull in the artifact
[01:15:51] <wycats_> honestly, it didn't work for me at all
[01:15:52] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[01:16:44] <wycats_> again, given how easy Makefile + rustc is (for the current normal workflows) and the regressions from rustc in rustpkg, I don't see any reason to recommend rustpkg in its current state
[01:16:57] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[01:17:07] <cmr> yeah, I agree.
[01:17:38] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Ping timeout)
[01:18:39] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[01:19:34] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[01:20:07] *** Joins: synackse (jordyd@moz-5289C68.jax.bellsouth.net)
[01:20:40] *** Joins: hays (quassel@moz-E481F431.washdc.east.verizon.net)
[01:21:47] <flu-> Can I set a crate level directive to ignore warning on dead_code somehow?
[01:22:14] <cmr> flu-, #[allow(dead_code)]; on the crate root.
[01:22:21] <flu-> hai
[01:22:21] <cmr> flu-, why do you want to disable it?
[01:22:28] <flu-> generated bindings
[01:22:42] <flu-> I'm using make 10% of the exposed interface right now
[01:22:45] <flu-> *maybe
[01:23:00] <cmr> why don't you put the attribute on the module the bindings are in then?
[01:23:13] <flu-> didn't know I could :-)
[01:23:20] <cmr> :)
[01:23:38] *** Quits: dopin (mrsk@9805BFB5.13C3B28A.5DB9309E.IP) (Ping timeout)
[01:23:38] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Ping timeout)
[01:24:26] *** Joins: jzcz (nick@moz-95A8D512.rb2.lax.centurytel.net)
[01:24:31] *** Joins: dopin (dopin@9805BFB5.13C3B28A.5DB9309E.IP)
[01:24:39] *** Quits: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca) (Quit: Leaving.)
[01:25:11] *** Quits: dcrewi (david@moz-AB8667CE.gyrae.net) (Ping timeout)
[01:26:38] *** Quits: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Quit: It is tiem!)
[01:27:56] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[01:28:02] *** Joins: vfetwnuncszu (david@moz-AB8667CE.gyrae.net)
[01:28:18] *** vfetwnuncszu is now known as dcrewi
[01:28:25] *** Quits: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net) (Client exited)
[01:28:46] *** Joins: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net)
[01:29:48] <whitequark> flu-: or just make them public, pub items don't trigger the dead code warning
[01:30:15] <cmr> whitequark, they do if you're compiling an executable.
[01:30:28] *** Quits: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net) (Ping timeout)
[01:30:39] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[01:30:39] *** ChanServ sets mode: +ao dherman dherman
[01:30:42] *** Quits: synackse (jordyd@moz-5289C68.jax.bellsouth.net) (Quit: synackse)
[01:30:44] <whitequark> oh
[01:30:46] <flu-> heh. So with 'rustc --lib', if you also specify '-o /path/to/some/dir/', rustc totally ignores you and drops the library in your current working directory. BUT, if you add '-o /path/to/some/dir/foo.so', rustc warns you that it is ignoring the name, yet it puts the library in /path/to/some/dir
[01:31:04] <cmr> flu-, -o is perpetually broken.
[01:31:51] <flu-> just funny how it's acting like a bratty kid. "I'm ignoring you!!" - secretly puts the library where you want it
[01:32:56] *** Quits: TimAbraldes (quassel@moz-204A2E3F.hsd1.or.comcast.net) (Connection reset by peer)
[01:33:20] <whitequark> rustc really tends to do that with command-line switches
[01:33:38] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[01:33:47] <flu-> um... so where did getopts go?
[01:33:58] <cmr> it's still there
[01:34:04] <cmr> extra::getopts
[01:34:16] <flu-> ah, extra. that's right. i was looking in std for some reason
[01:35:02] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Quit: Leaving...)
[01:35:08] <cmr> flu-, https://github.com/mozilla/rust/issues/7791 is about fixing that sort of thing.
[01:35:25] <cmr> (the proposals later on eliminate -o)
[01:36:34] <flu-> nice
[01:38:11] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[01:38:56] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[01:39:27] <flu-> thankfully most of the syntax changes I'm dealing with are consistent changes from bar::baz(&bar, something) to bar.baz(something)
[01:44:37] *** Quits: lenstr (lenstr@D88D273E.9636F313.7A27613B.IP) (Client exited)
[01:47:23] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[01:49:31] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[01:50:30] *** Joins: kvanb (kvanb@moz-25C48B43.lns11.lon.bigpond.net.au)
[01:52:32] *** Joins: jjwa (MtToMotiva@moz-7AA875CF.dsl.cambrium.nl)
[01:55:12] *** Joins: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca)
[01:55:37] *** Quits: KindOne (KindOne@AF1B46C7.A8EAE74D.34F73994.IP) (Ping timeout)
[01:56:32] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[01:57:00] *** Quits: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca) (Ping timeout)
[01:57:58] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[01:58:04] *** Quits: canhtak (canhtak@moz-DB18D73D.wl.t.ulaval.ca) (Quit: canhtak)
[01:58:04] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[01:58:17] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[01:59:38] *** Joins: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca)
[01:59:38] *** Joins: KindOne (KindOne@moz-7F904CFD.dynamic.ip.windstream.net)
[02:01:57] <elux> hrmm https://github.com/chris-morgan/rust-http doesnt compile with rust 0.9
[02:02:19] <cmr> elux, did you run make
[02:02:26] <elux> yep
[02:02:44] <elux> https://gist.github.com/pkieltyka/86c8d607a78b047e75de
[02:03:05] <brson> could use some help with a macro https://gist.github.com/brson/8366039
[02:03:32] <brson> i'm trying to pass `$foo.method` to another macro
[02:04:21] *** Joins: z0w0 (zack@moz-87AABEA0.lnse1.woo.bigpond.net.au)
[02:04:34] *** Quits: bheylin (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin)
[02:05:15] <cmr> it's mysterious to me
[02:05:20] <dbaupp> brson: ah, a `tt` is a single token, or a parenthesised group of tokens
[02:05:24] <dbaupp> so...
[02:05:28] * dbaupp thinks
[02:05:38] <elux> cmr: me?
[02:05:57] <cmr> elux, no, the macro thing
[02:06:11] <cmr> rust-http passes on travis, so once travis updates ChrisMorgan will probably fix it.
[02:06:19] <cmr> maybe get_ref died with Decorator?
[02:06:45] <dbaupp> brson: you may have to do something like `[ $($f:tt)* ], ...`
[02:06:48] <dbaupp> brson: give me a sec
[02:07:34] <flu-> eh.. this do block change from closures to procs is a little confusing. If I declare a parameterless proc, I can't call it without the compiler getting confused. This worked with closures :-/
[02:07:42] *** Quits: Krymise (Nietzsche@moz-CA789EF5.nwrknj.fios.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[02:09:00] <dbaupp> hm
[02:09:04] *** Joins: koute_ (kouteiheik@moz-FEAFB652.neoplus.adsl.tpnet.pl)
[02:09:48] *** Quits: koute (kouteiheik@moz-8F718F09.neoplus.adsl.tpnet.pl) (Ping timeout)
[02:11:29] *** Quits: dkeenaghan (dkeenaghan@A9F153F4.DDE28F19.986A907C.IP) (Connection reset by peer)
[02:13:01] <acrichto> brson: $f is a tt, which is consuming $sess and then the period and err aren't showin gup anywhere
[02:13:08] <acrichto> brson: you probably want $f:expr
[02:13:29] <acrichto> although that won't work for what you're doing...
[02:14:45] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[02:14:49] <dbaupp> this is really weird
[02:14:50] *** Quits: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de) (Quit: Leaving.)
[02:16:05] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[02:16:06] *** Quits: koute_ (kouteiheik@moz-FEAFB652.neoplus.adsl.tpnet.pl) (Quit: leaving)
[02:16:11] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[02:16:46] *** Joins: atomical (atomical@moz-C4295341.c3-0.lem-ubr1.chi-lem.il.cable.rcn.com)
[02:17:42] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[02:17:52] *** Joins: canhtak (canhtak@moz-DB18D73D.wl.t.ulaval.ca)
[02:17:53] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Ping timeout)
[02:18:15] <dbaupp> brson: https://gist.github.com/huonw/070472c49b67ad70fc23
[02:19:28] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[02:19:37] <flu-> omg, how do I write the signature for a function taking a parameterless proc?
[02:19:53] <flu-> Every iteration I've tried yields some different compiler error
[02:20:20] <brson> dbaupp: thanks. i still get different errors trying to invoke the macro afterwards
[02:20:20] <dbaupp> fn foo(f: proc())
[02:20:30] <dbaupp> fn foo(f: proc() -> int)
[02:20:36] <dbaupp> brson: such as?
[02:20:42] <brson> oh you used a bunch of exprs instead off tts
[02:20:47] <brson> let me try changing things to exprs
[02:21:00] <flu-> dbaupp: but then how do I call it? if I try f(), I get an error
[02:21:17] <dbaupp> flu-: what's the error?
[02:21:23] <flu-> dbaupp: that form works when I was using closures (fn foo(f: ||) { f() })
[02:21:35] <flu-> src/rustwand/lib.rs:80:9: 80:22 error: type `proc:Send()` does not implement any method in scope named `call`
[02:21:40] <dbaupp> brson: (you'll also have to change the method call to be in a closure)
[02:21:42] <flu-> wait
[02:21:47] <flu-> wrong error, one sec
[02:22:11] <flu-> use of moved value
[02:22:51] <dbaupp> ah, are you trying to call it twice?
[02:23:04] <flu-> hmm, not that I see
[02:23:08] <flu-> gist is here -> https://gist.github.com/influenza/8366192
[02:23:54] <dbaupp> ah, is it in a loop?
[02:24:08] <flu-> dbaupp: https://github.com/influenza/wand-of-rust/blob/updated-to-rust-0.9/src/rustwand/lib.rs#L80
[02:24:12] <flu-> yes, in a loop
[02:24:26] *** Joins: Jessin (Jesin@moz-4B662E55.washdc.fios.verizon.net)
[02:25:11] <dbaupp> that "counts" as calling it multiple times
[02:25:15] <flu-> guessing I may need to change this function to use a closure and ditch the do-syntax huh?
[02:25:19] <dbaupp> yes
[02:25:30] <flu-> got it, thanks a lot for the help
[02:25:45] <dbaupp> proc should only be used when you need a function to transfer between tasks
[02:25:55] <flu-> but but but... the do-sugar
[02:26:00] <dbaupp> because it incurs an allocation
[02:26:17] <dbaupp> and moves all its captured variables into it's environment
[02:26:23] *** Joins: hdevalence (quassel@moz-D125A39F.home3.cgocable.net)
[02:26:26] *** Quits: jjwa (MtToMotiva@moz-7AA875CF.dsl.cambrium.nl) (Quit: )
[02:26:29] <dbaupp> (and can only be called once)
[02:26:31] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[02:26:49] <flu-> gotcha. Thanks again! Gotta run immediately (office mates turning the lights off on me)
[02:27:17] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[02:27:34] *** Quits: Jessin (Jesin@moz-4B662E55.washdc.fios.verizon.net) (Quit: Leaving)
[02:27:49] <hdevalence> what kind of stuff does Rust have for SIMD operations?
[02:28:10] <dbaupp> hdevalence: very experimental manual support in std::unstable::simd
[02:28:18] <brson> dbaupp: ../src/librustc/diag_macros.rs:95:56: 95:59 error: No rules expected the token: "test"
[02:28:21] <brson> ../src/librustc/diag_macros.rs:95         report_diag!(|m| $sess.err(m), $name, $msg, $($arg), *);
[02:28:30] <brson> where "test" is my parameter to format!
[02:28:32] <hdevalence> dbaupp: thanks, I'll take a look
[02:28:39] <dbaupp> hdevalence: and then LLVM's vectorising optimiser (although that can't be relied upon)
[02:28:50] <dbaupp> brson: hm :(
[02:29:01] <dbaupp> brson: what's the macro definition and invocation look like?
[02:29:19] *** Joins: Ralith (ralith@moz-67D4EB93.customer.broadstripe.net)
[02:29:41] <brson> dbaupp: https://gist.github.com/brson/8366242
[02:30:25] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[02:30:37] *** Quits: atomical (atomical@moz-C4295341.c3-0.lem-ubr1.chi-lem.il.cable.rcn.com) (Ping timeout)
[02:30:50] <dbaupp> I don't understand :(
[02:31:05] <brson> ah there's a type in my report_diag macro
[02:31:09] *** Joins: atomical (atomical@moz-C4295341.c3-0.lem-ubr1.chi-lem.il.cable.rcn.com)
[02:31:24] <brson> $arg didn't have the $
[02:31:27] <brson> thanks, dbaupp
[02:32:27] <a_m0d|home> Could some one give me some help with getting this code here: https://github.com/am0d/rust-web/blob/master/src/web/main.rs#L69-73
[02:32:27] <dbaupp> oh
[02:32:43] <a_m0d|home> I'm trying to get the call to `dispatch_request` in a task::try block
[02:32:51] <a_m0d|home> so I can see if it fails and return a 500 status
[02:33:12] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[02:33:27] <a_m0d|home> But if I do that, then I get a "moved" error on the call to `log_request` because `w` has moved
[02:34:09] <a_m0d|home> Also, neither Request nor ResponseWriter is `Send`able, so I haven't worked out how to wrap them in cells and send them into the proc()
[02:34:23] <dbaupp> If they're not sendable, you can't
[02:34:40] <dbaupp> (you could use some unsafe code... but that's rather risky.)
[02:34:46] *** Joins: synackse (jordyd@moz-5289C68.jax.bellsouth.net)
[02:35:01] <a_m0d|home> So because they're not sendable, there's no way to call a method with them, and catch the failure of that method?
[02:35:10] <dbaupp> yes
[02:35:17] <a_m0d|home> I want to be able to execute my code and ensure that I return a 500 if the task fails
[02:35:30] <pcwalton> bstrie: PR submitted for http://www.reddit.com/r/rust/comments/1uxbgm/moving_ownership_via_borrowed_reference/
[02:35:39] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[02:36:04] <a_m0d|home> I figured that since I am guarenteed that the proc() will only be called once, and it should be finished before the `log_request` is reached, it should be safe ...
[02:36:36] <dbaupp> pcwalton: that was a quick fix
[02:36:46] <pcwalton> nasty borrow check issues get top priority :)
[02:36:57] <pcwalton> turns out niko already had a fix in a branch
[02:37:07] <pcwalton> that I independently duplicated in the same way
[02:37:43] <dbaupp> heh, neat
[02:38:37] <dbaupp> a_m0d|home: I'm not sure of the best way to design this, sorry :(
[02:38:46] *** Quits: synackse (jordyd@moz-5289C68.jax.bellsouth.net) (Quit: synackse)
[02:39:14] <pcwalton> we don't have catchable exceptions in the language unfortunately, and I think it would require more overhead if we did
[02:39:17] <pcwalton> I forget
[02:39:22] <pcwalton> there may be an unsafe way to do it
[02:39:49] <pcwalton> a_m0d|home: you could send the response data over a channel.
[02:40:01] *** Joins: zq (p@moz-4C4640FD.com)
[02:40:08] <pcwalton> this is a good use case, we should be able to spawn a task to service a web request
[02:40:30] <zq> what's the syntax of a functional dependency in rust?
[02:40:44] *** Quits: atomical (atomical@moz-C4295341.c3-0.lem-ubr1.chi-lem.il.cable.rcn.com) (Ping timeout)
[02:40:55] <pcwalton> there are no fundeps
[02:40:57] <Eridius> pcwalton: my worry with the idea of catchable exceptions is that this could possibly leave an object in an unsafe state, if failure unwinds through code that's temporarily broken an invariant that it expects to repair
[02:41:03] <pcwalton> yes
[02:41:05] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[02:41:07] <pcwalton> it's not very good
[02:41:30] *** Joins: atomical (atomical@moz-C4295341.c3-0.lem-ubr1.chi-lem.il.cable.rcn.com)
[02:41:39] <cmr> if I have to manually maintain exception safety I don't think I could consider rust a success.
[02:41:43] <zq> pcwalton: then how do you solve the issue of ambiguous types when templated trait impls are used?
[02:41:45] <a_m0d|home> I don't even think that exceptions are necessary here, although I would love to be able to see the stack trace if the task failed (why did that get removed?)
[02:41:56] <pcwalton> zq: there is always an implicit fundep
[02:41:59] <a_m0d|home> But I think being able to call the function in a separate task should work
[02:42:08] <pcwalton> from the self parameter to the other type parameters
[02:42:12] <Eridius> cmr: exactly, which is why I tend to come down on the side of sticking with task boundaries for exception safety, as annoying as that is
[02:42:13] <acrichto> a_m0d|home: I don't think we ever had stack traces
[02:42:17] <acrichto> on failure at least
[02:42:26] <a_m0d|home> acrichto: RUST_LOG=::rt::backtrace
[02:42:31] <a_m0d|home> it was kind of there
[02:42:31] <dbaupp> a_m0d|home: iirc, rust-http has the requirement that the Server is Send-able, and actually clones it into a new task on each request
[02:42:38] <acrichto> oh wow, I never knew that!
[02:42:45] <Eridius> a_m0d|home: that never worked on OS X at least
[02:42:46] <a_m0d|home> it's gone now :(
[02:42:48] <dbaupp> a_m0d|home: and so the "catcher" would run on the handler that does the cloning
[02:42:50] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[02:42:50] *** ChanServ sets mode: +ao dherman dherman
[02:42:51] <cmr> it never worked well.
[02:42:55] <brson> more stylistic lints would be a really nice thing for newbies to implement
[02:42:55] <a_m0d|home> it definitely worked on linux for me
[02:43:40] <dbaupp> a_m0d|home: (the user is then required to wrap internal variables in things like Arc and MutexArc to make the clones cheap (and any interaction  safe).)
[02:43:40] <a_m0d|home> dbaupp: chris-morgan has stated that he doesn't think rust-http should send the 500 response if the task fails
[02:44:04] <Eridius> a_m0d|home: what does he think it should send then?
[02:44:10] <a_m0d|home> So I have to do the clone myself in this case, but according to rustc the ResponseWriter is not cloneable
[02:44:12] <dbaupp> ok. My point was just that that is how *you* could handle
[02:44:24] <a_m0d|home> Eridius: He says it is the responsibility of the framework to do this
[02:44:27] <dbaupp> you'll need to put it in a RwArc
[02:44:31] <dbaupp> (or something)
[02:44:40] <pcwalton> IMHO there should be hooks to allow that to be opt-in
[02:44:52] <a_m0d|home> dbaupp: Would that possibly let me send it into a task::try proc?
[02:44:56] <pcwalton> forcing the framework to spawn a separate task seems overly opinionated
[02:45:08] <cmr> pcwalton, in rust-http? it's opt-in by the virtue of you having to implement it yourself.
[02:45:08] <pcwalton> since that's just saying you need twice the number of tasks for a very common use case
[02:45:14] <a_m0d|home> pcwalton: this is already running in a separate task spawned inside rust-http
[02:45:18] <pcwalton> cmr: you *can't* implement it yourself except by spawning another task
[02:45:29] <pcwalton> well, maybe you can.
[02:45:31] <pcwalton> with RAII
[02:45:33] <a_m0d|home> I might discuss it with Chris and see if we can work something out
[02:45:41] <pcwalton> actually, maybe you can just do it with RAII
[02:45:45] <Eridius> pcwalton: that's a good idea
[02:45:51] <a_m0d|home> pcwalton: how so?
[02:45:51] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Quit: Leaving...)
[02:45:56] <Eridius> pcwalton: now I'm tempted to write a RAIIProc struct that takes a proc and runs it on unwind
[02:45:59] <Eridius> or maybe call it Finally
[02:46:08] <pcwalton> use a destructor that wraps the ResponseWriter, checks to see whether the task is failing, and if it is sends the 500
[02:46:12] <acrichto> Eridius: std::unstable::finally::Finally
[02:46:15] <Eridius> acrichto: hah
[02:46:16] <pcwalton> use an object with a destructor that is
[02:46:29] <acrichto> std::task::failing will say if the task is currently failing
[02:46:35] <Eridius> although the downside with RAII is it needs to take the borrow when the struct is created instead of when it's destroyed
[02:46:53] <pcwalton> it could just be a wrapper around ResponseWriter
[02:46:54] <acrichto> https://github.com/mozilla/rust/blob/master/src/librustuv/lib.rs#L175-L193
[02:46:56] <a_m0d|home> Okay, I'll try that out and see if I can get it working
[02:46:57] <pcwalton> ErrorReportingResponseWriter or something
[02:47:03] <pcwalton> that's *almost* catchable exceptions except that you can't stop the exception from killing you
[02:47:12] <pcwalton> but, importantly, you can do something as you go down
[02:47:12] <Eridius> pcwalton: it needs to hold onto the &mut ResponseWriter though, which would mean you can't use the ResponseWriter while the wrapper is alive
[02:47:16] <acrichto> you can always run arbitrary code on exceptions
[02:47:24] <pcwalton> Eridius: oh, it's &mut? bah. thought it was owned.
[02:47:40] <pcwalton> if it was owned you could just hand ownership to a new wrapper
[02:47:41] <acrichto> you could transmute a mutable copy b/c you know you'll only use it on failure and it's certainly still valid
[02:47:44] <dbaupp> unsafe *mut ResponseWriter
[02:47:46] <Eridius> oh hrm, I expect you meant you then use the RAII object instead of the original ResponseWriter to write responess
[02:47:54] <pcwalton> right
[02:47:54] <Eridius> pcwalton: which should still work even with the &mut ResponseWriter
[02:47:57] <pcwalton> if it was owned you could do that
[02:48:03] <pcwalton> yeah, you'd have a lifetime parameter on it though
[02:48:06] <pcwalton> which would be kinda annoying
[02:48:14] <Eridius> on the struct, sure, but you never have to type it when using the struct
[02:48:16] <pcwalton> although maybe not
[02:48:18] <pcwalton> right
[02:49:02] <Eridius> but writing the wrapper is going to be annoying since you have to implement all of ResponseWriter's methods just to call through to the embedded value
[02:49:02] *** Joins: depp (depp@500BAFC1.53465674.3C05E6CB.IP)
[02:49:09] <pcwalton> yes
[02:49:14] <pcwalton> generalized new type deriving would be nice :)
[02:49:17] <Eridius> indeed
[02:49:27] <acrichto> it'd just be a smart pointer
[02:49:30] <acrichto> implementing deref
[02:49:34] <pcwalton> or that
[02:49:46] <Eridius> acrichto: hmm, good point
[02:49:49] <depp> generalized new type deriving runs the risk of breaking other guarantees the type system providess
[02:49:52] <pcwalton> yes
[02:49:53] <depp> it's not as simple as it sounds
[02:49:55] <pcwalton> I know it is
[02:49:59] *** Quits: int3_ (int3_@6647F17C.C24D7B6A.EC6C369A.IP) (Ping timeout)
[02:50:01] <pcwalton> which is why I'm scared of it
[02:50:01] <Eridius> although if you wanted to selectively override some methods to do other behavior, you'd be left with reimplementing the entire trait again
[02:50:13] <pcwalton> GHC's type system is unsound with it and type families or something
[02:51:54] <sully> yeah
[02:51:58] <sully> also it plus GADTs
[02:52:01] *** a_m0d|home is now known as a_m0d|afk
[02:52:01] <sully> which is more frightening
[02:52:38] <_achin> it seems like "rustpkg test" should be able to accept a test name, just like you can if you built a library with rustc --test.  thoughts?
[02:55:02] <_achin> ooh, i see that issue #9646 covers this
[02:55:13] <dbaupp> does someone feel like porting FFmpeg to Rust? ;P http://googleonlinesecurity.blogspot.com.au/2014/01/ffmpeg-and-thousand-fixes.html 
[02:55:51] <Eridius> haha
[02:56:05] <Eridius> dbaupp: we just need that C++-to-rust tool that was suggested on the ML!
[02:56:27] <depp> I thought FFmpeg was C + ASM
[02:56:51] <dbaupp> even easier
[02:57:01] <depp> er... ASM?
[02:57:09] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[02:57:11] <dbaupp> we have inline asm too
[02:57:24] <depp> FFmpeg doesn't use inline asm that much
[02:57:28] <zq> why port?
[02:57:35] <dbaupp> (obviously we can't make any safety guarantees about asm)
[02:57:35] <depp> they have loads of ASM files with macros
[02:58:03] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[02:58:04] <depp> a huge macro system for abstracting away differences between ia32 and ia64, and the different ABIS for each
[02:58:05] <dbaupp> zq: safety
[02:58:42] <dbaupp> I guess that might be slightly tricky to convert into Rust
[02:58:51] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[02:59:22] *** Joins: LinearInterpol (RJones@moz-E6F82C3A.maine.res.rr.com)
[02:59:30] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[02:59:46] <depp> FFmpeg is a beast of legend... something on the order of a million liness of code with a significant percentage (>5%) of assembly
[03:01:02] *** Joins: Chillectual (RJones@moz-E6F82C3A.maine.res.rr.com)
[03:01:07] *** Quits: eatkinson (eatkinson@moz-C52156BC.dsl.bell.ca) (Quit: eatkinson)
[03:02:14] *** Quits: LinearInterpol (RJones@moz-E6F82C3A.maine.res.rr.com) (Ping timeout)
[03:02:29] *** Quits: jadbaires (jadrian@7C3E5A47.7DF3BC65.6119BA41.IP) (Quit: Konversation terminated!)
[03:02:37] *** Joins: jadbaires (jadrian@7C3E5A47.7DF3BC65.6119BA41.IP)
[03:03:05] *** Quits: ziad (ziad@B20586FB.BDB3D91.6E370BFC.IP) (Quit: ziad)
[03:03:26] *** Quits: jadbaires (jadrian@7C3E5A47.7DF3BC65.6119BA41.IP) (Quit: Konversation terminated!)
[03:03:32] *** Joins: jadbaires (jadrian@7C3E5A47.7DF3BC65.6119BA41.IP)
[03:03:48] *** Quits: Earnestea (earnest@moz-E86D50FA.dyn.plus.net) (Ping timeout)
[03:03:51] <bstrie> pcwalton: haha, wow, that was fast
[03:03:56] <bstrie> pcwalton: good marketing :)
[03:04:45] <pcwalton> 3 hour turnaround time for type system issues ;)
[03:06:38] <bstrie> it occurs to me that that person asked other questions that we completely ignored, but I don't know the answer to
[03:06:54] <bstrie> *do* we have a comprehensive list of runtime failures that can happen in the "core language"?
[03:06:57] *** Quits: KindOne (KindOne@moz-7F904CFD.dynamic.ip.windstream.net) (Ping timeout)
[03:07:02] <bstrie> index out of bounds is one...
[03:07:07] <bstrie> now that @mut is gone I can't think of another
[03:07:31] <pcwalton> stack overflow, division by zero
[03:08:03] <cmr> (modulus by zero)
[03:08:13] <bstrie> it would be great to document this somewhere :)
[03:08:22] <cmr> it's in the manual iirc
[03:08:35] <dbaupp> it's in the IRC logs for eternity now, good enough. :P
[03:08:35] <bstrie> right, like I trust the manual :P
[03:08:40] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[03:08:40] *** ChanServ sets mode: +ao dherman dherman
[03:08:43] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[03:09:21] <dbaupp> there's only one mention of "division" in the manual
[03:09:59] <dbaupp> "Vector access is bounds-checked at run-time. When the check fails, it will put the task in a failing state."
[03:10:12] <cmr> heh
[03:10:32] *** Joins: KindOne (KindOne@moz-B749DB92.dynamic.ip.windstream.net)
[03:11:10] <dbaupp> the only "overflow" is integer overflow
[03:11:21] <bstrie> which isn't a failure at all
[03:11:32] <zq> with_overflow_instrinsic <- intentionally misspelled?
[03:11:42] * cmr remembered wrong, apparently.
[03:12:02] *** Quits: jzcz (nick@moz-95A8D512.rb2.lax.centurytel.net) (Quit: Konversation terminated!)
[03:12:08] *** Joins: jzcz (nick@moz-95A8D512.rb2.lax.centurytel.net)
[03:12:15] *** Quits: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca) (Quit: Leaving.)
[03:12:23] *** Joins: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca)
[03:12:41] *** Quits: pnkfelix (pnkfelix@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Input/output error)
[03:12:57] <dbaupp> zq: no
[03:14:06] *** Quits: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca) (Ping timeout)
[03:14:33] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[03:15:00] *** Joins: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de)
[03:16:32] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[03:17:41] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Connection reset by peer)
[03:17:41] *** Joins: ptc1 (Adium@moz-192425C4.nyc.res.rr.com)
[03:17:41] *** ptc1 is now known as ptc
[03:17:59] *** Quits: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de) (Quit: Leaving.)
[03:18:34] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[03:20:16] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[03:22:11] *** Quits: zz_kimundi (kimundi@moz-1273C77B.dip0.t-ipconnect.de) (Ping timeout)
[03:23:11] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[03:23:11] *** ChanServ sets mode: +o jdm
[03:23:16] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[03:25:16] *** Joins: zz_kimundi (kimundi@moz-B4EEA79E.dip0.t-ipconnect.de)
[03:25:46] *** zz_kimundi is now known as kimundi
[03:25:53] <diverse> what was fast?
[03:26:59] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[03:27:24] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[03:27:52] *** Quits: bobthenameless (bobthename@moz-A1BB42C4.dhcp.leds.al.charter.com) (Ping timeout)
[03:27:58] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[03:28:03] *** Joins: bobthenameless (bobthename@moz-A1BB42C4.dhcp.leds.al.charter.com)
[03:29:19] *** Quits: nfroidure (nfroidure@moz-FEF2D22A.w90-18.abo.wanadoo.fr) (Ping timeout)
[03:29:38] *** Joins: b1nd (b1nd@moz-5A306E04.lns17.ken.bigpond.net.au)
[03:29:54] *** Quits: jzcz (nick@moz-95A8D512.rb2.lax.centurytel.net) (Ping timeout)
[03:30:07] *** Joins: mib_buekyt (Mibbit@moz-E12651DC.ppp-oct.au-hikari.ne.jp)
[03:30:20] *** Joins: jzcz (nick@moz-95A8D512.rb2.lax.centurytel.net)
[03:31:34] *** Quits: mib_buekyt (Mibbit@moz-E12651DC.ppp-oct.au-hikari.ne.jp) (Quit: http://www.mibbit.com ajax IRC Client)
[03:31:43] *** Quits: atomical (atomical@moz-C4295341.c3-0.lem-ubr1.chi-lem.il.cable.rcn.com) (Ping timeout)
[03:32:28] *** Joins: atomical (atomical@moz-C4295341.c3-0.lem-ubr1.chi-lem.il.cable.rcn.com)
[03:32:54] <SiegeLord> I like Niko's presentation... one of the better presentations (about Rust) I've seen to date
[03:33:46] <SiegeLord> In part, because it barely had any Rust code :P
[03:34:05] <SiegeLord> Many presentations just start teaching you syntax as if the audience is expected to start coding by the end of it
[03:35:05] *** Joins: zil (sid23500@moz-31ABA2C0.irccloud.com)
[03:35:10] <diverse> SiegeLord: was there a Rust talk meeting?
[03:35:27] *** Joins: doomlord_ (servitor@moz-CA917A47.range86-184.btcentralplus.com)
[03:35:52] <SiegeLord> I'm not sure where it was presented... http://mirror.linux.org.au/pub/linux.conf.au/2014/Friday/107-The_Rust_language_memory_ownership_and_lifetimes_-_Nicholas_Matsakis.mp4
[03:36:42] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[03:37:23] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[03:37:26] <diverse> SiegeLord: that should be uploaded on youtube or something
[03:37:45] <dbaupp> SiegeLord: linux.conf.au on friday
[03:37:55] <dbaupp> (i.e. yesterday)
[03:38:01] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[03:38:29] <dbaupp> diverse: the fast thing was pcwalton fixing http://www.reddit.com/r/rust/comments/1uxbgm/moving_ownership_via_borrowed_reference/
[03:38:41] <SiegeLord> It's a shame he didn't present named lifetimes, that'd impress the two Boost questions
[03:38:49] *** Joins: slimer (Mibbit@moz-F86E2C0E.sip.bix.bellsouth.net)
[03:39:59] <diverse> dbaupp: that was fast of him, damn.
[03:41:32] *** Quits: azakai (alon@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[03:41:52] <SiegeLord> And lol... he keeps repeating the questions from the audience... he's like the perfect presenter
[03:41:56] *** Quits: zil (sid23500@moz-31ABA2C0.irccloud.com) (Quit: )
[03:42:12] *** Joins: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net)
[03:42:46] *** Joins: zil (sid23500@moz-31ABA2C0.irccloud.com)
[03:42:54] *** Joins: eatkinson (eatkinson@moz-C52156BC.dsl.bell.ca)
[03:43:26] *** Joins: negativezero (negativeze@moz-AF1C6D8D.nyc.res.rr.com)
[03:43:28] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[03:44:16] *** Joins: nfroidure (nfroidure@moz-13F41233.w90-18.abo.wanadoo.fr)
[03:44:22] <diverse> SiegeLord: I'm liking how he shows a visual representation of memory with the C++ program, and why it's a problem.
[03:45:46] <SiegeLord> Yeah, absolutely... it's very important, imo, to clearly identify the problems Rust solves
[03:46:10] <diverse> which is a great marketing
[03:47:14] *** Joins: arcnor (arcnor@moz-C48B224D.lns20.syd7.internode.on.net)
[03:49:00] *** Quits: slimer (Mibbit@moz-F86E2C0E.sip.bix.bellsouth.net) (Quit: http://www.mibbit.com ajax IRC Client)
[03:49:24] <nmatsakis> SiegeLord: yeah, not answering the boost uqestions a bit better is my biggest regret from the presentation. I was trying to be careful not to overstate, but I think I mildly understated.
[03:50:04] <nmatsakis> oh well. 
[03:50:30] <nmatsakis> what's the name of the tool that converts mangled C++  names into their demangled form?
[03:50:35] <dbaupp> c++filt
[03:50:53] <nmatsakis> thanks
[03:52:14] <diverse> book == data structure, rofl
[03:52:27] *** Joins: int3_ (int3_@6647F17C.C24D7B6A.EC6C369A.IP)
[03:52:33] <SiegeLord> Just you wait until it gets freed ;)
[03:52:47] <diverse> and burning frees it, brillant!
[03:53:05] *** Quits: elux (peter@moz-6B45ADE5.dsl.bell.ca) (Quit: Leaving...)
[03:53:37] *** Quits: jadbaires (jadrian@7C3E5A47.7DF3BC65.6119BA41.IP) (Ping timeout)
[03:54:42] <diverse> SiegeLord: color me entertained
[03:55:15] *** Joins: jeffdb1 (jeff@moz-ED35AD97.hsd1.ca.comcast.net)
[03:55:55] *** Quits: int3_ (int3_@6647F17C.C24D7B6A.EC6C369A.IP) (Client exited)
[03:57:36] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[03:58:33] *** Joins: int3_ (int3_@6647F17C.C24D7B6A.EC6C369A.IP)
[03:59:17] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[03:59:30] *** Quits: negge (unlord@moz-5BD795E6.hsd1.va.comcast.net) (Ping timeout)
[04:00:17] *** Quits: int3_ (int3_@6647F17C.C24D7B6A.EC6C369A.IP) (Ping timeout)
[04:00:46] <diverse> nmatsakis: your presentation so far is really good (I'm still watching it). You show the thought process of why the Rust features are called the way they are and how they work visually in a real life scenario.
[04:03:51] *** Joins: negge (unlord@moz-5BD795E6.hsd1.va.comcast.net)
[04:04:48] *** Quits: Chillectual (RJones@moz-E6F82C3A.maine.res.rr.com) (Ping timeout)
[04:08:07] *** Quits: bobthenameless (bobthename@moz-A1BB42C4.dhcp.leds.al.charter.com) (Ping timeout)
[04:08:18] *** Joins: bobthenameless (bobthename@moz-A1BB42C4.dhcp.leds.al.charter.com)
[04:08:30] *** Quits: arcnor (arcnor@moz-C48B224D.lns20.syd7.internode.on.net) (Client exited)
[04:08:58] *** Joins: int3_ (int3_@6647F17C.C24D7B6A.EC6C369A.IP)
[04:09:41] <SiegeLord> I think I want to try doing some HMM stuff in Rust. Looks like I'll be writing a matrix library after all
[04:09:56] <diverse> HMM?
[04:10:09] <SiegeLord> Hidden Markov Model
[04:10:31] *** Joins: arcnor (arcnor@moz-C48B224D.lns20.syd7.internode.on.net)
[04:13:42] <_achin> if i spot a bug that i intend to fix immeditally, am i expected to first open the issue, and then open the PR to fix it?  or can i just open the PR which includes a description of both the problem and the fix?
[04:14:11] *** Quits: int3_ (int3_@6647F17C.C24D7B6A.EC6C369A.IP) (Client exited)
[04:14:14] <dbaupp> _achin: pain PR is fine
[04:14:16] <dbaupp> *plain
[04:14:28] <_achin> ok cool; thanks
[04:14:32] *** Joins: int3_ (int3_@6647F17C.C24D7B6A.EC6C369A.IP)
[04:15:56] <brson> how do you escape # in a format string?
[04:15:57] *** Quits: Jesin (Jesin@moz-4B662E55.washdc.fios.verizon.net) (Ping timeout)
[04:16:14] <brson> nvm, it's \\#
[04:16:26] *** Quits: int3_ (int3_@6647F17C.C24D7B6A.EC6C369A.IP) (Ping timeout)
[04:16:41] *** Quits: bobthenameless (bobthename@moz-A1BB42C4.dhcp.leds.al.charter.com) (Ping timeout)
[04:16:46] *** Quits: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP) (Ping timeout)
[04:17:12] *** Joins: Jesin (Jesin@moz-4B662E55.washdc.fios.verizon.net)
[04:17:27] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[04:17:45] *** Joins: gwty (gwtypc@8A5CB0D0.18989014.F44414AF.IP)
[04:17:58] *** Quits: negativezero (negativeze@moz-AF1C6D8D.nyc.res.rr.com) (Quit: leaving)
[04:18:01] *** Joins: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP)
[04:18:17] <diverse> nmatsakis: so once `b` borrows from `m` with `m.get(1);` you couldn't use `m` again?
[04:19:00] *** Joins: pnathan (Adium@moz-A8921E45.tukw.qwest.net)
[04:19:12] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[04:19:45] <sfackler> diverse: you can't use move or modify m until b goes away
[04:19:49] <diverse> oh wait, that's called 'freezing'?
[04:20:01] <sfackler> er, s/use//
[04:20:04] <sfackler> yeah
[04:20:09] <diverse> gotcha
[04:20:39] <sfackler> you can do e.g. let a = m.get(1); let b = m.get(2); though
[04:20:53] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[04:21:07] <diverse> sfackler: how is that?
[04:21:25] *** Joins: maxli (maxli@moz-EE42E0E.student.cs.uwaterloo.ca)
[04:21:33] <diverse> I haven't looked into the HashMap impl
[04:21:45] <sfackler> the compiler knows that get doesn't modify m so there's no risk in making the second call to get
[04:21:50] <SiegeLord> Yeah, that's where the book analogy starts to break down
[04:22:05] <SiegeLord> Since you can make multiple immutable lends
[04:24:46] <diverse> sfackler: gotcha, so you can read (get) from it, but not write (set) it while it is borrowed.
[04:25:14] <sfackler> right. something like this wouldn't compile: let b = m.get(1); m.remove(1);
[04:25:15] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[04:27:46] <diverse> SiegeLord: I guess you would have to rethink of it as giving the person you are lending to the raw data, say like a .doc file, while you only keep only the pdf of it.
[04:29:00] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[04:29:01] <diverse> wait... actually...
[04:29:08] *** Joins: pzol (pzol@moz-553BEE64.dynamic.chello.pl)
[04:29:15] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Quit: Leaving.)
[04:29:55] <diverse> sfackler: so both `a` and `b` can still modify right?
[04:30:37] <sfackler> diverse: a and b are immutable references
[04:31:21] <diverse> whoop, I mean in a scenario if they both were mutable
[04:31:39] <sfackler> I don't think there can be such a scenario
[04:32:10] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[04:32:16] <diverse> oh wait... that depends on what .get() returns. Alright, shoot me.
[04:32:41] <diverse> only in the foot though ;)
[04:32:57] <sfackler> so if there was a get_mut() method that returned a mutable reference, this would not compile: let a = m.get_mut(1); let b = m.get_mut(2);
[04:34:44] *** Quits: gwty (gwtypc@8A5CB0D0.18989014.F44414AF.IP) (Ping timeout)
[04:36:10] <diverse> sfackler: because it would require the `let mut a` and `mut b` at declaration?
[04:36:47] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[04:36:53] *** Joins: bobthenameless (bobthename@moz-A1BB42C4.dhcp.leds.al.charter.com)
[04:36:58] <sfackler> the first call to get_mut freezes m until a goes away
[04:37:19] <diverse> oooh
[04:37:22] <sfackler> rust forbids multiple mutable references to the same data
[04:37:39] <sfackler> and it can't guarantee at compile time that a and b won't point to the same data
[04:37:56] <diverse> neat safety feature
[04:37:58] <dbaupp> (it doesn't just freeze m, it renders completely it unusable.)
[04:38:13] *** Joins: vjones (vjones@moz-544E84DC.cat.pdx.edu)
[04:38:24] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[04:38:46] <sfackler> oh yeah, what I should have said is that rust forbids a second reference to anything that is mutably referenced
[04:39:52] *** Quits: pyon (user@A16F2BE6.A9B419CB.1C8C8CE9.IP) (Quit: brb)
[04:39:59] *** a_m0d|afk is now known as a_m0d
[04:40:13] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[04:40:31] <diverse> so you can only do that with `a` from the first time, but not `b` for the second time.
[04:41:23] <dbaupp> tracing GC for Rust \o/
[04:41:45] <diverse> dbaupp: hmm?
[04:42:29] <diverse> sounds like I need to check out the master commits
[04:42:51] <dbaupp> I'm writing one "for fun", and it appears to be working
[04:42:56] <dbaupp> (it's not in master)
[04:43:33] <diverse> that's cool, what is the type called?
[04:43:46] <diverse> the smart pointer I mean
[04:43:48] *** Joins: pyon (user@A16F2BE6.A9B419CB.1C8C8CE9.IP)
[04:43:55] <sfackler> Gc
[04:43:56] *** Quits: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net) (Ping timeout)
[04:44:09] *** Quits: a_m0d (a_m0d@moz-322A4DE4.acanac.net) (Quit: Leaving.)
[04:44:54] <diverse> oh, so the tracing GC dbaupp is working on is going to become the Gc?
[04:45:16] <sfackler> *something* is going to replace the current version of Gc
[04:45:47] *** Joins: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net)
[04:45:47] <dbaupp> diverse: maybe, not guaranteed
[04:46:02] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[04:46:03] <SiegeLord> Any performance metrics yet?
[04:46:08] <dbaupp> slow
[04:46:11] <dbaupp> :P
[04:46:15] <SiegeLord> lol
[04:46:23] <diverse> dbaupp: hey you got to start from somewhere, right?
[04:46:40] <SiegeLord> It's nice to start from "fast"
[04:47:03] <arcnor> lol
[04:47:07] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[04:47:10] <diverse> SiegeLord: I think that would too idealistic for reality :P
[04:48:01] <dbaupp> SiegeLord: oh did I say "slow"? I mean to say "extremely fast".
[04:48:08] <dbaupp> the keys are right next to each other
[04:48:09] <SiegeLord> :D
[04:48:19] *** Quits: mwillsey (Mibbit@moz-26DE65CF.res.cmu.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[04:48:21] <diverse> hahaha, that got me to chuckle.
[04:48:25] <dbaupp> I always make that mistake
[04:48:28] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[04:48:53] *** Quits: new_one (new_one@338D8DF9.4C461BEC.59A381B9.IP) (Ping timeout)
[04:49:06] <diverse> dbaupp: so that 'maybe' becomes 'absolutely'
[04:49:41] <dbaupp> diverse: no
[04:49:42] <SiegeLord> A Gc will be useful when Rc is too slow, correct?
[04:50:00] * dbaupp has no idea what he's doing when it comes to GC implementations
[04:50:19] <SiegeLord> It worked for D ;)... just keep doing what you're doing
[04:50:23] <sfackler> Rc will always be faster than a Gc I'd think
[04:50:30] <dbaupp> SiegeLord: I think it's most useful when the overhead of bumping refcounts is too high
[04:50:35] <sfackler> but you'd move to Gc when you want to make sure cycles get collected
[04:50:37] <SiegeLord> Right, that's what I'm getting at
[04:50:42] <dbaupp> (and cycles)
[04:50:59] <dbaupp> we have a big advantage over D: GC is always task local
[04:51:02] <dbaupp> makes life easier
[04:51:06] <SiegeLord> "make sure" and "collected" isn't something I expect to see when describing a GC
[04:51:14] <SiegeLord> together
[04:51:26] <diverse> yeah, D needs to learn from us!
[04:51:51] <dbaupp> in theory that would let us have different GC's per task
[04:51:57] <dbaupp> which might be cute
[04:52:06] <diverse> sounds neat
[04:52:12] *** Quits: nobody (nobody@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[04:52:20] *** Joins: nobody (nobody@moz-7E09A266.neo.res.rr.com)
[04:53:16] *** Joins: new_one (new_one@338D8DF9.4C461BEC.59A381B9.IP)
[04:54:29] <diverse> dbaupp: do you have your GC somewhere on github where GC experts can help improve on it?
[04:54:57] <dbaupp> diverse: https://github.com/mozilla/rust/pull/11399
[04:55:02] <dbaupp> (that one is not the tracing one)
[04:55:37] <dbaupp> anyways... only 388 bytes of overhead per allocation. I should possibly do some work on improving that.
[04:55:39] <pyon> Does Rust use lifetimes to determine what objects should be allocated in the same region, to prevent memory fragmentation?
[04:55:47] <dbaupp> no
[04:56:34] *** Quits: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP) (Ping timeout)
[04:57:35] *** Quits: kzzch (kzzch@moz-BB97B490.washdc.fios.verizon.net) (Quit: WeeChat 0.4.1)
[04:57:46] *** Joins: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP)
[04:57:55] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[04:59:38] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[04:59:38] *** Quits: Jesin (Jesin@moz-4B662E55.washdc.fios.verizon.net) (Ping timeout)
[04:59:57] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[05:00:02] *** Joins: Jesin (Jesin@moz-4B662E55.washdc.fios.verizon.net)
[05:02:29] *** Quits: paulproteus (quassel@199.199.210.158) (Ping timeout)
[05:02:50] *** Quits: cheese_cast (raspinudo@moz-FB14AB08.hsd1.ca.comcast.net) (Ping timeout)
[05:03:44] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[05:04:54] *** Joins: james (jdeng@moz-6548813B.blktn6.nsw.optusnet.com.au)
[05:05:12] *** Joins: paulproteus (quassel@458FE134.3EC36C88.CBDCF1DC.IP)
[05:06:22] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[05:06:46] *** Quits: Jesin (Jesin@moz-4B662E55.washdc.fios.verizon.net) (Ping timeout)
[05:07:02] *** Joins: Jesin (Jesin@moz-4B662E55.washdc.fios.verizon.net)
[05:10:18] *** Quits: eatkinson (eatkinson@moz-C52156BC.dsl.bell.ca) (Quit: eatkinson)
[05:10:43] <james> Hey, I have a generic function. If I pass a closure like |mut a| {...}, it work. However, if the closure is |mut (a, b)| {...}, the compiler complains "error: expected identifier, found path" at the "mut" position.
[05:10:56] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[05:13:59] *** Joins: jamesd (Mibbit@moz-6548813B.blktn6.nsw.optusnet.com.au)
[05:15:03] <james> Is this error normal or a bug?
[05:16:01] <pzol> Is anybody going to update http://static.rust-lang.org/doc/0.8/tutorial-borrowed-ptr.html for 0.9 ??
[05:16:54] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Quit: Lost terminal)
[05:17:00] <dbaupp> pzol: change the 0.8 to 0.9 in the URL
[05:17:32] <_achin> dbaupp: error from aws
[05:17:34] <pzol> dbaupp tried that already... comes back with an error AccessDenied
[05:17:39] <diverse> pzol: http://static.rust-lang.org/doc/0.9/guide-lifetimes.html
[05:17:55] <pzol> diverse thanks :D 
[05:18:16] <dbaupp> oh, right, the tutorials were all renamed
[05:18:25] <diverse> borrowed pointers is now called reference, and the guide is mostly about lifetimes, so it'
[05:18:31] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:18:40] <diverse> it's in the Lifetimes guide at the bottom of the tutorial
[05:19:57] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[05:21:38] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[05:21:38] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[05:21:42] <diverse> ah, that was a fun watch
[05:21:52] <SiegeLord> Hmm... has 1f64 always been allowed?
[05:21:52] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[05:22:03] <dbaupp> SiegeLord: yes, why?
[05:22:06] <SiegeLord> I.e. without the period
[05:22:20] <dbaupp> yes
[05:22:30] <SiegeLord> Odd...
[05:22:47] <dbaupp> (well, maybe not *always* valid, but I don't remember a time when it wasn't valid.)
[05:22:48] <sfackler> james: try |(mut a, mut b)| { ... }
[05:23:01] <diverse> it would be like saying `1 as f64`?
[05:23:32] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[05:23:58] <james> sfackler: Yes. I used that to resolve my problem. But I wanna know if that is designed intentionally, or a bug?
[05:24:11] <SiegeLord> Need to redo the lexer for floats... I was sure I was just transcribing Rust to C++, but I must have made a mistake
[05:24:52] <james> sfackler: why |(mut a, mut b)| and |mut a|  works but not |mut (a, b)|?
[05:24:56] <SiegeLord> I'm a bit dismayed that 1. is valid but 1.f64 is not
[05:25:20] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[05:25:30] <sfackler> james: (a, b) is a destructuring pattern there
[05:25:34] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Quit: Leaving.)
[05:26:11] *** Joins: pepper_chico (pepper_chi@E3C2E286.D158355F.F546FA5F.IP)
[05:26:20] <diverse> SiegeLord: just for kicks, have you tried 1.f32?
[05:26:55] <sfackler> it's saying "this closure takes a single argument, which is a tuple. I want the two parts of the tuple to be bound to mutable variables a and b"
[05:26:59] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[05:27:36] <dbaupp> diverse: why would that be any different?
[05:27:53] <james> sfackler: I see. So it's like |arg| { let (mut a, mut b) = arg; }
[05:27:59] <sfackler> yep
[05:28:34] <james> sfackler: but why |arg| { let mut (a, b) = arg; } doesn't work?
[05:28:35] <diverse> dbaupp: it shouldn't be, but just in case if he got a different result, it might mean something.
[05:29:15] <sfackler> that used to be the way to do it, but was changed (I think just after 0.8?). It doesn't give you enough control over what parts you want mutable
[05:29:27] <sfackler> it also makes less sense when interpreting it as a pattern
[05:29:51] <arcnor> SiegeLord: if you are playing with suffixes, try 0b11f32; that one is also interesting :)
[05:29:52] <sfackler> "I expect arg to be a mutable tuple and I want the two parts to be bound to (mutable? immutable?) variables a and b"
[05:30:14] *** Quits: wting (wting@E31B3884.E538DA90.20F09BA6.IP) (Quit: leaving)
[05:30:16] <arcnor> (i.e. I expected that to fail)
[05:30:21] <sfackler> well, less of "I expect" and more of "arg _is_"
[05:30:22] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[05:30:38] *** Joins: gwty (gwtypc@F7E523E8.8B53FFE9.AAF4A5CC.IP)
[05:31:17] *** Joins: wting (wting@E31B3884.E538DA90.20F09BA6.IP)
[05:31:28] <diverse> SiegeLord: ah I think know why 1.f64 won't. Since libstd provides integers with methods, something like 1.f64 is probably expecting to call something.
[05:31:57] <SiegeLord> I think the 1. syntax is an affront to civilization
[05:32:09] <diverse> *won't work
[05:32:10] <SiegeLord> Oh well, fixy time tomorrow
[05:32:11] <james> sfackler: I c. So this is designed intentionally, not a bug, right? Since my first impression is that it is not consistent, where |mut a| works but |mut (a, b)| not.
[05:32:15] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[05:32:17] <james> sfackler: Thanks
[05:32:25] <sfackler> np
[05:32:30] <ecl3ctic> I see no reason why 1. should be allowed to be valid
[05:34:00] <ecl3ctic> it's like the least understandable way to declare a float
[05:35:21] <dbaupp> std::cast::transmute::<u64, f64>(4608236261112822104)
[05:35:30] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[05:35:45] <dbaupp> is marginally less understandable. :P
[05:35:49] <ecl3ctic> no that seems fine to me
[05:36:02] <dbaupp> heh
[05:38:07] *** Parts: james (jdeng@moz-6548813B.blktn6.nsw.optusnet.com.au) ()
[05:42:36] *** Quits: dforsyth (dforsyth@A677A619.1C765EF.EE6E63A5.IP) (Ping timeout)
[05:42:40] *** Joins: dforsyth (dforsyth@A677A619.1C765EF.EE6E63A5.IP)
[05:42:48] <_achin> should "make check" work in parallel (with -j8) ?
[05:43:27] <dbaupp> _achin: maybe
[05:43:32] <dbaupp> but it'll kill your computer :P
[05:43:50] <diverse> what does check do?
[05:44:15] <_achin> dbaupp: what if i was a little more conservative with my parallelness?
[05:44:17] <dbaupp> run the full testsuite
[05:44:30] <diverse> ah
[05:44:47] <diverse> _achin: what processor do you use?
[05:44:51] <dbaupp> _achin: the test runners have parallelism built-in, so each they'll saturate your computer, so running in parallel might not give you much
[05:45:19] <_achin> diverse: i've got 2 quad-core Xeons
[05:45:22] <dbaupp> _achin: (and the run-pass, run-fail and compile-fail basically spawn a rustc for each test, which results in a *lot* of running rustc)
[05:45:38] <_achin> dbaupp: ah, i didn't realize there was built-in parallelism
[05:45:55] <dbaupp> you will get some parallelism from being able to compile the test runners for the libraries in parallel though
[05:46:00] * dbaupp shrugs
[05:46:29] <dbaupp> either way, `nice make check` is a nice way of keeping the computer usable while the tests are running.
[05:46:47] <_achin> i wasn't worried about my computer, i was worried about them finishing before i wantd to head to bed :P
[05:47:11] <dbaupp> well, if you don't need to use the computer for a while, -j8 should be fine
[05:47:13] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[05:47:14] *** ChanServ sets mode: +ao pcwalton pcwalton
[05:47:33] * dbaupp doesn't normally run the test suite with a -j
[05:47:53] <_achin> on my old macbookpro, the full suite took about 45 minutes (maybe, i didn't time it).  
[05:47:54] <diverse> _achin: btw, it's okay to use -j9 (usually the rule is ncpus + 1) for make in general, don't know about make check though.
[05:48:55] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[05:49:01] <_achin> at one point, someone reported that "make" for rust didn't work with any -j options
[05:49:16] *** Joins: alanjc (alanjc@moz-9CA9651B.dsl.dynamic.sonic.net)
[05:49:29] <diverse> _achin: when it enters cp mode, it doesn't
[05:49:38] <dbaupp> there have been various parallelism related bugs in the makefiles over time
[05:51:04] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[05:53:49] *** Quits: kvark (Mibbit@moz-F30E0473.cpe.net.cable.rogers.com) (Quit: http://www.mibbit.com ajax IRC Client)
[05:54:35] <_achin> seems like the best thing to do is just not start at the terminal as rust is building
[05:55:27] *** Quits: maxiepoo (mnew@moz-6F50ADE.hsd1.il.comcast.net) (Quit: Leaving)
[05:55:32] <diverse> _achin: you mean `stare at the terminal`?
[05:55:34] *** Joins: Zor (alexrp@moz-B01F40E3.rev.stofanet.dk)
[05:55:49] <_achin> uh, yes
[05:55:53] * _achin is getting sleepy
[05:56:23] *** Quits: new_one (new_one@338D8DF9.4C461BEC.59A381B9.IP) (Ping timeout)
[05:57:35] <diverse> _achin: Yeah, I agree about that, usually I update rust on a separate tmux panel and come back to weechat, zoom in, and continue to chat :)
[05:58:01] <diverse> and periodically checking by zooming out and in
[05:58:13] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[05:58:42] * dbaupp sets RUST_LOG=rustc and watches the compiler's progress
[05:58:55] <cmr> dbaupp: that's a good way to never get it to complete.
[05:59:05] <cmr> some of the formatting it does is expensive, and it does a lot of it
[05:59:09] <dbaupp> :P
[05:59:17] * cmr <- experience.
[05:59:54] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[06:00:18] <_achin> hm, this seems to be the 3rd time rust is linking libstd.so
[06:00:40] <pepper_chico> so, an alpha is expected this year, cool.
[06:00:46] <_achin> i must be getting near the end!
[06:00:47] *** Joins: cheese_cast (raspinudo@moz-FB14AB08.hsd1.ca.comcast.net)
[06:00:53] <pepper_chico> about the new Gc pointers
[06:01:02] <ecl3ctic> having different semantics for use-statements and actual usage of module definitions makes things unnecessarily complicated
[06:01:07] <pepper_chico> which I need to call .borrow
[06:01:26] <pepper_chico> will that call be removed somewhat?
[06:01:32] <pepper_chico> I mean
[06:01:39] <cmr> pepper_chico: hopefully, with smart pointer sugar.
[06:01:44] *** Quits: eevee (eevee@moz-8DEBFFC9.lv.lv.cox.net) (Ping timeout)
[06:01:45] *** Joins: eevee (eevee@moz-8DEBFFC9.lv.lv.cox.net)
[06:01:48] <pepper_chico> no need to call borrow() explicitely
[06:01:55] <dbaupp> in future, yes
[06:01:58] <carter> cmr: i support intpr and uintptr
[06:02:04] <carter> i'm pushing for something like that in GHC
[06:02:05] <pepper_chico> cmr, that will be nice
[06:02:07] <carter> for 7.10
[06:02:08] <pepper_chico> but
[06:02:08] <ecl3ctic> i.e. "use farm::cow" is a global path but farm::cow::moo() is a local path
[06:02:11] *** Quits: jamesd (Mibbit@moz-6548813B.blktn6.nsw.optusnet.com.au) (Quit: http://www.mibbit.com ajax IRC Client)
[06:02:50] <sfackler> ecl3ctic: there's an open issue for making it less weird iirc
[06:02:51] <pepper_chico> will this sugar feature of generic types posing as if they were native pointer be available for any custom type
[06:03:07] <pepper_chico> what will call this feature?
[06:03:14] <sfackler> pepper_chico: It'll be a Deref trait that you can implement just like e.g. Eq for ==
[06:03:22] <pepper_chico> hmmm
[06:03:25] <pepper_chico> ok thanks
[06:03:26] <ecl3ctic> sfackler: that's great to hear, I'll search for it
[06:03:45] *** Joins: james (jdeng@moz-6548813B.blktn6.nsw.optusnet.com.au)
[06:04:19] *** Parts: james (jdeng@moz-6548813B.blktn6.nsw.optusnet.com.au) ()
[06:04:24] <pepper_chico> sfackler, is that expected for the next prerelease?
[06:05:15] <sfackler> I think so, not sure though
[06:06:12] <diverse> ecl3ctic: I guess when the glob feature becomes stable, doing "use farm::cow::*" would make more sense than "use farm::cow"
[06:06:28] <cmr> globs are being removed afaik
[06:06:35] <diverse> oh really?
[06:06:54] <cmr> I think pcwalton wants to remove them
[06:07:01] <cmr> maybe that was just a passing, meaningless remark.
[06:08:00] <ecl3ctic> diverse: that's not the issue I was talking about
[06:08:19] <ecl3ctic> it's that in a use-statement, "use farm::cow" refers to ::farm::cow
[06:08:40] <ecl3ctic> and you specify self::farm::cow for a relative path
[06:08:46] <dbaupp> cmr: I think globs + self & super make resolve undecidable (at least, I think I saw him say that)
[06:08:57] <ecl3ctic> but farm::cow is a relative path if you're calling something like farm::cow::moo()
[06:09:11] <diverse> cmr: if it's pcwalton, he's gotta be serious about that
[06:09:20] <ecl3ctic> and then ::farm::cow::moo() is global!
[06:09:25] <cmr> dbaupp: yeah it was something like that.
[06:09:29] <diverse> hmm
[06:09:51] *** Quits: cheese_cast (raspinudo@moz-FB14AB08.hsd1.ca.comcast.net) (Ping timeout)
[06:12:20] *** Joins: eholk (eholk@moz-58C5EE6F.wavecable.com)
[06:17:55] *** Quits: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net) (Ping timeout)
[06:19:52] *** Quits: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net) (Quit: Taking a nap.)
[06:20:06] *** Joins: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net)
[06:20:19] <diverse> I got a working find prime function. Anyone want to help on improving it? https://gist.github.com/anonymous/18f676b02c3ad77a3397
[06:21:20] <dbaupp> go up to sqrt(n)
[06:21:25] *** Joins: atnt (Mibbit@moz-BB047FF.hsd1.wa.comcast.net)
[06:21:30] <dbaupp> only check odd numbers
[06:22:03] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[06:22:50] <klutzy> maintain is_prime: ~[bool] and mark anything which is not prime?
[06:23:27] <ecl3ctic> sfackler: I can't seem to find an issue on imports
[06:24:12] <ecl3ctic> is it just me that finds the global/relative syntax inconsistency jarring?
[06:24:15] <diverse> dbaupp: can you show me your edit on it?
[06:24:19] *** Joins: jpoirier_ (jpoirier@moz-150F5176.dhcp.ftwo.tx.charter.com)
[06:24:23] *** Quits: jpoirier (jpoirier@moz-150F5176.dhcp.ftwo.tx.charter.com) (Connection reset by peer)
[06:25:20] *** Joins: jpoirier (jpoirier@moz-150F5176.dhcp.ftwo.tx.charter.com)
[06:25:20] *** Quits: jpoirier_ (jpoirier@moz-150F5176.dhcp.ftwo.tx.charter.com) (Connection reset by peer)
[06:25:43] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[06:25:47] <sfackler> ecl3ctic: it is not just you
[06:26:06] <atnt> hi guys, what is the apostrophe syntax for? struct BitsNStrings<'a> {     mybits: [uint, ..2],     mystring: &'a str } can't figure out what this 'a means.
[06:26:17] <sfackler> atnt: it's a lifetime specifier
[06:26:36] <sfackler> atnt: check out http://static.rust-lang.org/doc/master/guide-lifetimes.html
[06:26:41] *** Joins: jpoirier_ (jpoirier@moz-150F5176.dhcp.ftwo.tx.charter.com)
[06:26:44] *** Quits: jpoirier (jpoirier@moz-150F5176.dhcp.ftwo.tx.charter.com) (Connection reset by peer)
[06:27:10] *** Joins: synackse (jordyd@moz-5289C68.jax.bellsouth.net)
[06:27:10] <atnt> cool, thanks, that should help.
[06:27:29] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Ping timeout)
[06:28:13] <strcat> one day someone will tell me what they think 'word-size' is ;P
[06:28:22] *** Quits: atomical (atomical@moz-C4295341.c3-0.lem-ubr1.chi-lem.il.cable.rcn.com) (Quit: atomical)
[06:28:33] <strcat> x86_64 still considers the word-size to be 16-bit in the assembly language...
[06:28:36] <cmr> did I use word-sized somewhere
[06:28:40] <strcat> no
[06:28:42] <cmr> k
[06:28:48] * cmr tries to avoid "word"
[06:29:02] <diverse> word seems vague to me
[06:29:03] <strcat> that's why there's those awful mulq q suffixes
[06:29:07] <ecl3ctic> my understanding that word size == register size
[06:29:12] <strcat> quad -> 64-bit (4x word-size, which is 16-bit on x86_64)
[06:29:15] <ecl3ctic> but I don't like the term word
[06:29:30] <strcat> ecl3ctic: so, on modern x86_64 chips with 512-bit vector registers, what is word-size?
[06:29:37] *** Joins: atomical (atomical@moz-C4295341.c3-0.lem-ubr1.chi-lem.il.cable.rcn.com)
[06:29:42] <strcat> you can do both integer/float ops in those
[06:29:55] <ecl3ctic> those are *big* words :P
[06:29:55] <strcat> (in fact, float ops aren't done in the general purpose ones)
[06:29:57] <ecl3ctic> super words
[06:30:04] <strcat> they're the same size as a cache line
[06:30:26] <dbaupp> diverse: https://gist.github.com/huonw/8b22ca60b906d1f393cf
[06:30:27] <strcat> anyway, word-size is 16-bit on x86_64 per the machine/assembly language ;p
[06:30:37] <ecl3ctic> wait what is? I thought a cache line is 64 bytes
[06:30:42] <ecl3ctic> oh
[06:30:42] <ecl3ctic> wait
[06:30:45] <ecl3ctic> derp
[06:31:07] <cmr> heh
[06:31:08] <dbaupp> diverse: (but as klutzy says, a sieve will be much faster)
[06:31:49] <strcat> ecl3ctic: SSE added 8x 128-bit registers (2 doubles or 4 floats), AVX replaced them with 16x 256-bit and now they're at 32x 512-bit with AVX-512 ;p
[06:31:53] <strcat> and the general purpose ones...
[06:32:09] <strcat> anyway these are only the "API" registers
[06:32:20] <strcat> under the hood there are like.... 300? of varying sizes
[06:32:24] <strcat> yay register renaming
[06:32:56] *** Quits: pepper_chico (pepper_chi@E3C2E286.D158355F.F546FA5F.IP) (Quit: Ex-Chat)
[06:33:08] <strcat> and that's why big integer arithmetic stuff has to be written by hand... due to carry/overflow flags, you'll end up preventing it from using the full power of the machine
[06:33:20] * strcat shrugs
[06:33:21] *** Quits: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net) (Ping timeout)
[06:33:37] <strcat> and just all your little intermediate ops
[06:34:19] <ecl3ctic> if only SIMD was as easy as SISD
[06:34:28] * cmr hates numerics almost as much as he hates strings
[06:34:31] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[06:34:34] *** Joins: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net)
[06:34:52] *** Quits: maxli (maxli@moz-EE42E0E.student.cs.uwaterloo.ca) (Quit: Leaving.)
[06:36:16] *** Joins: magg (magg@9F955BB.B3A4AA73.3D0AE249.IP)
[06:36:32] <magg> hello
[06:36:49] <magg> just updated to 0.9
[06:37:02] <magg> but i´m getting this warn
[06:37:04] <magg> 1:1 warning: code is never used: `main`, #[warn(dead_code)] on by default
[06:37:13] <strcat> %a = 5; %b = 10; %c = %a + b; %a = 20; %b = 40; %d = %a + %b;
[06:37:15] <strcat> like that
[06:37:37] <magg> how can i find this dead code?
[06:37:40] *** Joins: tikue (tkuehn@moz-879E86A9.hsd1.ca.comcast.net)
[06:37:41] <strcat> it can rename the 2nd `a` and `b` to other registers and run it those 2 ops in parallel
[06:37:43] <strcat> but...
[06:37:52] <cmr> magg: it's point right at it.
[06:37:52] <strcat> evil carry/overflow flags like to ruin everything ;p
[06:37:56] <strcat> wooo side effects everywhere
[06:38:08] <cmr> magg: main isn't called.
[06:38:09] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[06:38:23] <strcat> the LLVM overflow intrinsics let you read the overflow flag, but then what do you want to do with it?
[06:38:32] <magg> cmr: what?
[06:39:03] <ecl3ctic> strcat: you've lost me now :P I haven't delved into that area
[06:39:19] <strcat> if you do %a + %b, it will set a flag saying whether it overflowed
[06:39:22] <strcat> so you can efficiently check
[06:39:30] <strcat> but by checking, you serialize the CPU pipeline
[06:39:43] <strcat> and also, if you *do* something based on what you read like branching, that's pretty significant
[06:40:03] <magg> cmr: of course its getting called, i have another function called inside main and get output
[06:40:21] <ecl3ctic> I imagine so
[06:40:53] *** Joins: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net)
[06:41:30] <strcat> %a = 5; %b = 10; %c = %a + b; %a = 20; %b = 40; %d = %a + %b;
[06:41:31] <strcat> so..
[06:41:44] <strcat> there, %c = %a + %b and %d = %a + %b are independent
[06:41:47] <ecl3ctic> magg: you're not compiling with --test are you?
[06:41:48] <tikue> does anyone know of a rust regex library?
[06:41:50] <strcat> get renamed, run in parallel
[06:41:56] *** Quits: eholk (eholk@moz-58C5EE6F.wavecable.com) (Quit: eholk)
[06:41:58] <strcat> but if you check the overflow flag each time and branch, it's serial
[06:42:02] <dbaupp> tikue: links in https://github.com/mozilla/rust/issues/3591
[06:42:04] <strcat> so you get 1/2 the performance
[06:42:09] <tikue> dbaupp: thanks!
[06:42:12] <strcat> and that scales
[06:42:14] <magg> ecl3ctic: nope
[06:42:26] <tiffany> strcat, you've heard of the mill cpu right?
[06:42:37] <_achin> magg: can we see the code, and how you're building it?
[06:42:45] <ecl3ctic> magg: you should put your code up somewhere, yeah
[06:42:47] <strcat> tiffany: yes, but I don't know enough about CPU architectures to comment on that ;p
[06:43:22] <tiffany> it is supposed to fix the power problems incurred by using a giant multiplexer for connecting the hundreds and hundreds of registers in superscalar CPUs
[06:43:34] <strcat> tiffany: well, it improves it...
[06:43:39] <strcat> it doesn't expose the actual pipeline to the compiler
[06:43:47] <magg> oh boy i got a bunch of warnings and code snippets
[06:43:58] <strcat> the compiler can communicate more, but it can also do that on itanium with the huge number of registers ;p
[06:43:59] <ecl3ctic> you can cut it down
[06:43:59] <magg> with --test
[06:44:13] <tiffany> I don't know about that strcat
[06:44:27] <ecl3ctic> magg: oh, well with test, it seems to warn you about *all the code* that isn't used in the tests
[06:44:29] <tiffany> if you stick 30 instructions in the same segment, it'll execute them all in parallel
[06:44:45] <ecl3ctic> I'm not sure if that's intended behaviour
[06:45:02] <strcat> tiffany: sure, and you can do that on x86 with AVX to a lesser extent
[06:45:09] <magg> ecl3ctic: thanks. let me look at it. will ping back if i need more help
[06:45:22] <strcat> tiffany: LLVM's slp-vectorize pass does this
[06:45:53] <strcat> if anything, it makes the language-level issues larger
[06:45:57] <tiffany> AVX is SIMD though, not pipelining
[06:46:02] <strcat> because since you can communicate more, the language gains more responsibilities
[06:46:08] <sfackler> ecl3ctic: it's a bug, or at least no one's closed the bug I filed on it :) https://github.com/mozilla/rust/issues/10914
[06:46:18] <strcat> tiffany: SIMD is manual pipelining, is it not?
[06:46:26] <strcat> a restricted form of it
[06:46:41] <tiffany> restricted in that you can only run the same operation in parallel instead of different operations
[06:46:59] *** Joins: b1nd_ (b1nd@moz-5A306E04.lns17.ken.bigpond.net.au)
[06:47:05] <strcat> tiffany: well you can perform whatever instructions are in the instruction set
[06:47:12] <ecl3ctic> sfackler: ah, good
[06:47:14] <tiffany> there are some tight loops with this architecture which are supposed to be able to run in a single insruction cycle
[06:47:15] <strcat> not necessary the same op on each bit of the register
[06:47:21] <b1nd_> Hey guys, how do you run the tests for rust? I'm working on an issue for funzies
[06:47:42] <carter> strcat: tiffany  hand written simd >>> compiler auto stuff
[06:47:46] <strcat> tiffany: if it's so good, they'd be bathing in money
[06:48:00] <tiffany> strcat: they haven't released the cpu yet
[06:48:07] <strcat> they haven't made the CPU yet
[06:48:09] <strcat> ;p
[06:48:16] <tiffany> doesn't mean it is without merit
[06:48:25] <cmr> they have, according to them
[06:48:25] <carter> are you talking about the barrel register thingy?
[06:48:34] <cmr> they've even botstrapped it with clang
[06:48:40] <strcat> they'd have been bought by intel for a billion dollars if it was revolutionary ;p
[06:48:43] <tiffany> the mill cpu does not have registers
[06:48:46] <strcat> tiffany: so, do you know how itanium works?
[06:48:55] <tiffany> intel is probably cemented in their position that x86 can never die
[06:48:59] <carter> cmr: have what?
[06:49:05] <strcat> itanium is very similar to the mill
[06:49:06] <tiffany> strcat: vaguely
[06:49:09] <tiffany> and no, it's not
[06:49:12] <cmr> carter: created the cpu
[06:49:13] <carter> strcat: itanium was designed by HP
[06:49:19] <strcat> tiffany: yeah, it is
[06:49:22] <carter> cmr: using CLANG?
[06:49:24] <cmr> carter: they're discussing the mill
[06:49:25] <strcat> tiffany: the compiler has to communicate data dependencies
[06:49:34] <carter> yah
[06:49:34] <tiffany> itanium tries to fix the problem by adding tons of registers and the mill replaces registers wholesale with a belt
[06:49:36] <cmr> carter: no, pootstrapped a system on it
[06:49:41] <strcat> tiffany: no, that's not how itanium works
[06:49:42] <carter> poot?
[06:49:44] <sfackler> ecl3ctic: dead_code is really new so there are still some kinks to work out
[06:49:44] <tikue> is there a canonical way to find all occurrences of a given substring, without using regex?
[06:49:52] <tiffany> carter: don't make the argument that the compiler will always be dumber than humans
[06:50:01] <tiffany> because your assumption will be broken eventually, if not already
[06:50:05] <ecl3ctic> sfackler: fair enough
[06:50:08] <strcat> tiffany: itanium is VLIW
[06:50:11] <strcat> tiffany: http://en.wikipedia.org/wiki/Very_long_instruction_word
[06:50:25] <carter> tiffany: show me a BLAS lib thats machine generated and faster than openblas
[06:50:28] *** Quits: gwty (gwtypc@F7E523E8.8B53FFE9.AAF4A5CC.IP) (Ping timeout)
[06:50:29] <strcat> an instruction is a 'belt'
[06:50:32] <carter> otherwise i dont care :)
[06:50:40] <sfackler> tikue: Boyer-Moore-Horspool is pretty canonical I think
[06:50:50] <strcat> ultiflow produced the TRACE series of VLIW minisupercomputers, shipping their first machines in 1987. Multiflow's VLIW could issue 28 operations in parallel per instruction
[06:50:56] <ecl3ctic> sfackler: it's a great feature though, I've found far too much abandoned code after who knows how many months in some of my programs in other languages
[06:50:57] <tiffany> carter: you're exactly the kind of person who would argue that compilers will never surpass human-optimized assembly back in the 80s
[06:51:01] <carter> nope
[06:51:03] <carter> tiffany: i use haskell
[06:51:04] <strcat> so in 1987, you have a 28 operation 'belt'
[06:51:07] <tikue> sfackler: awesome, much appreciated
[06:51:09] <strcat> it's a bit different, but not massively so
[06:51:16] <carter> i just think for the tight, inner loop, human attention is valuable
[06:51:17] <dbaupp> tikue: do you mean canonical algorithm or canonical way in Rust?
[06:51:23] <tikue> dbaupp: algorithm
[06:51:30] <carter> tiffany: so please respect that i may actdually know what i'm talking about
[06:51:39] <tikue> dbaupp: well, assuming rust doesn't provide a means?
[06:51:41] <carter> and don't make presumptions like some high school student
[06:51:41] <tiffany> human attention is valuable, but that does not mean dropping to virtually instruction level is not the ultimate solution
[06:51:49] <tikue> (i didn't see anything in std::str)
[06:51:54] <carter> whats the ultimatel solution?
[06:51:56] <dbaupp> tikue: methods! :)
[06:52:00] <strcat> tiffany: anyway for itanium, the compiler gets to include *many* operations in one instruction
[06:52:00] <carter> *ultiamte
[06:52:07] <carter> strcat: yeah, i've read about it
[06:52:08] <carter> its cool
[06:52:10] <carter> but complex
[06:52:14] *** Quits: canhtak (canhtak@moz-DB18D73D.wl.t.ulaval.ca) (Quit: canhtak)
[06:52:21] <tikue> dbaupp: methods?
[06:52:21] <strcat> tiffany: so the reason you have that many registers is to give the compiler the ability to use them from a single instruction
[06:52:26] <dbaupp> tikue: http://static.rust-lang.org/doc/master/std/str/trait.StrSlice.html#tymethod.match_indices
[06:52:30] <strcat> tiffany: it's *nearly* the same concept as the mill belt
[06:52:49] <ercxx> I just clicked the 'other docs' link on the main page first time in a while. It's really nice having everything in one place.
[06:53:01] <tikue> dbaupp: ah! i hadn't noticed that. excellent
[06:53:15] <carter> strcat: the tricky bit is writing an optimizer that can use it
[06:53:19] <tikue> oh but it's disjoint
[06:53:20] <tikue> :\
[06:53:26] <strcat> carter: which didn't happen for itanium ;p
[06:53:31] <carter> yeah
[06:53:31] <tiffany> carter: can you explain why you think that compilers will never be able to optimize to simd instructions better than someone writing assembly?
[06:53:38] <tiffany> aside from just saying "well why haven't they yet?"
[06:53:42] <strcat> you can always do better via asm
[06:53:45] <carter> tiffany: i didnt say that
[06:53:46] <strcat> especially for domain specific cases
[06:53:47] <dbaupp> tikue: oh
[06:53:48] <carter> yes
[06:53:51] <carter> exactly
[06:53:53] <carter> i said BLAS
[06:53:56] <dbaupp> tikue: yeah, you'll probably have to implement it yoursel
[06:53:57] <dbaupp> f
[06:53:59] <carter> not normal programs
[06:54:13] <strcat> tiffany: the compiler basically has a bunch of special cases
[06:54:14] *** Quits: z0w0 (zack@moz-87AABEA0.lnse1.woo.bigpond.net.au) (Quit: z0w0)
[06:54:19] <strcat> that's the hand-written asm
[06:54:27] <strcat> it then has to recognize those patterns, and output the special cases
[06:54:30] <carter> yeah
[06:54:35] <strcat> but it's never going to have every special case you need
[06:54:38] <carter> yes
[06:54:50] <strcat> and it's never going to have perfect abilities to see through pointers and so on and recognize the patterns
[06:54:55] <carter> and its really really hard to formalize exact models of the physics of a CPU 
[06:55:01] <carter> because at the end fo the day
[06:55:08] <strcat> so yes, it's better to encode a pattern in the compiler in some cases
[06:55:10] <carter> a CPU is a physical device
[06:55:14] <strcat> if you expect people to write this pattern over and over
[06:55:20] <carter> that has complex behavior
[06:55:20] <strcat> but it's a lot harder than just writing some asm
[06:55:22] <strcat> in a lib
[06:55:27] <carter> yeah
[06:55:33] <strcat> I'm capable of writing a fast implementation of some of the big int ops
[06:55:42] <strcat> I would not be capable of writing auto-detection of the patterns in LLVM
[06:55:47] <strcat> without a hell of a lot of learning/effort
[06:55:56] <carter> also: CPUs are literally the most complex engineering artifacts known to man
[06:55:58] <strcat> and then you'd have to write very careful low-level code it can match
[06:56:09] <tiffany> the argument you're presenting also works when aimed at compilers from the 80s
[06:56:26] <strcat> tiffany: not really
[06:56:32] <carter> tiffany: pleae suggest algorithms or analyses we're overlooking
[06:56:35] <strcat> compilers haven't advanced to a huge degree
[06:56:56] <tiffany> it's not worth the time to write a project in assembly anymore though, by a longshot
[06:56:57] <strcat> I really don't think gcc is much better now than high-end proprietary compilers were in 1998
[06:57:06] *** Joins: gwty (gwtypc@F7E523E8.8B53FFE9.AAF4A5CC.IP)
[06:57:09] <tiffany> assuming you are good enough to do better than the compiler
[06:57:18] <carter> tiffany: you've never tried to write a fast matrix multiply then :)
[06:57:30] <strcat> tiffany: it's not worth writing a project in assembly or C because most of the project doesn't need to be micro-optimized
[06:58:02] <strcat> tiffany: look in LLVM at the type of vectorization it knows how to do
[06:58:03] <carter> tiffany: if you had to write a really fast matrix mult alg, how would you do it?
[06:58:04] <tiffany> carter: my game engine has an un-optimized matrix multiplication which isn't even the biggest bottleneck on -O0 compared to actually rendering
[06:58:07] <strcat> it knows a few dozen simple special cases
[06:58:16] <carter> tiffany: i don't care about games
[06:58:17] <_achin> Steve Gibson would be disappointed
[06:58:19] <strcat> and it may or may not recognize code that matches them
[06:58:24] <strcat> so sure
[06:58:26] <carter> i care about large scale physics simulations and machien learning
[06:58:26] <strcat> if you write rust
[06:58:30] <strcat> you can target LLVM
[06:58:42] <strcat> you can look at the IR/asm and see when it's actually doing a good job
[06:58:42] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[06:58:44] *** Quits: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com) (Ping timeout)
[06:58:55] <strcat> which for something like matrix ops or bigint ops is never ;p
[06:58:58] <strcat> it doesn't know how
[06:59:13] <strcat> a loop over an array of doubles adding 5.5 to each one? okay, it can do that efficiently in some cases
[06:59:14] <carter> the hand tuned ASM matrix mult in openblas is ~ 5x faster than my tuned high level code, and 1000x faster than the naive C
[06:59:37] <strcat> the state of the art of LLVM vectorization is doing a loop with more than one op ;p
[06:59:40] <strcat> like
[06:59:41] <carter> yeah
[06:59:43] *** Joins: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com)
[06:59:46] <carter> strcat: agreed
[06:59:50] <carter> auto vectorization is sooo fragile
[06:59:52] <carter> its laughable
[07:00:02] <strcat> for (size_t i = 0; i < n; i++) { a[i] += 5.5; b[i] *= 2.0; }
[07:00:10] <tiffany> it doesn't help that C is not very good for SIMD, seeing how any loop has to be meticulously examined to make sure it isn't sequential
[07:00:14] <strcat> it may be able to vectorize that now
[07:00:28] <carter> tiffany: we're being concrete
[07:00:29] <tiffany> functionally pure map() is much easier to vectorize
[07:00:30] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[07:00:33] <carter> tiffany: nope
[07:00:36] <strcat> tiffany: not really
[07:00:45] <carter> point wise simd is usesless
[07:00:52] <carter> theres some cool work that was on on it
[07:00:58] <carter> but pointwise simd missses the point of simd
[07:01:00] <carter> the shuffles
[07:01:09] <carter> tiffany: i contribute to GHC 
[07:01:24] <carter> auto vectorization wont' give me the perf i need for numerical kernels
[07:01:24] <strcat> compilers try to encode very common cases
[07:01:29] <carter> and is too fragile 
[07:01:29] <strcat> so some pattern that people write everywhere
[07:01:42] <carter> yup
[07:01:45] <carter> boring patterns :)
[07:02:10] <strcat> tiffany: for example, you might expect LLVM to recognize a lot of loop patterns and optimize to optimal code
[07:02:12] <strcat> it has two
[07:02:20] <strcat> 1) memset-like loops (reasonably robust)
[07:02:31] <strcat> 2) memcpy-like loops (I can rarely get this to kick in)
[07:02:40] <strcat> it can't recognize memmove loops
[07:02:47] <strcat> or memcmp, or other patterns
[07:02:55] <strcat> or matrix ops, or big int ops, or whatever
[07:03:05] <strcat> it also has vectorization
[07:03:09] <strcat> which is a bit more general
[07:03:11] <carter> yeah
[07:03:17] <carter> but it canonly do pointwise really
[07:03:20] <carter> which is boring
[07:03:25] <carter> and misses out on memory locality stuff
[07:03:29] <strcat> it has several patterns to recognize, and the inner part can be one of several instructions (mapping to SIMD ones)
[07:03:38] <tiffany> but it's not like the situation will never improve
[07:03:38] <carter> clever memory locality qualitiy + SIMD + SHuffles is the real win
[07:03:42] <carter> tiffany: how
[07:03:43] <carter> please
[07:03:53] <carter> i want a research program that will result in the tech that lets me not care 
[07:03:53] <tiffany> you're asking me to predict the future?
[07:03:54] <carter> please
[07:03:56] <carter> no
[07:04:01] <strcat> tiffany: there are fundamental limits to alias analysis
[07:04:04] <strcat> there is a limit to what you can prove
[07:04:07] <carter> you're making claims
[07:04:19] <carter> to people who *wish* compilers were that smart
[07:04:23] <carter> and even work on compilers
[07:04:51] <carter> we are asking for techniques we can put in those compilers that prove your claims
[07:04:52] * strcat isn't smart enough to teach LLVM new pointer induction rules :(
[07:05:01] <carter> strcat: we can dream
[07:05:02] <strcat> I changed the rust side instead
[07:05:03] <tiffany> do you have a proof saying that the fundamental limit is what we have now?
[07:05:18] <strcat> tiffany: it's not what we have now, but look at perf improvements in compilers
[07:05:20] <carter> we said nothign about limits
[07:05:23] <strcat> gcc 4.5 vs 4.8
[07:05:26] <carter> but about what compilers can do
[07:05:27] <carter> and how they work
[07:05:33] <strcat> some programs get 2-5% slower, some 2-5% faster
[07:05:36] <carter> they are dumb rules engines that smart people fiddl with
[07:05:44] <strcat> perhaps they concentrated on a specific benchmark, and added special cases to make it 20-30% faster
[07:05:47] *** Quits: arcnor (arcnor@moz-C48B224D.lns20.syd7.internode.on.net) (Ping timeout)
[07:05:51] <strcat> but... they probably hurt something else by 10%+
[07:05:52] <carter> yes
[07:06:07] <strcat> tiffany: ok I'll give a concrete example
[07:06:13] <strcat> lets look at how gcc does branch prediction
[07:06:17] <carter> and despite that, careful hand tuning can give you a 10-100x perf win, that compiler optimization cant
[07:06:28] *** Quits: lurk_ (chatzilla@moz-F088D030.hsd1.in.comcast.net) (Quit: ChatZilla 0.9.90.1-rdmsoft [XULRunner 22.0/20130619132145])
[07:07:22] <strcat> anyway I would say what rust does is give you the ability to keep the 90% of your code that's cold code nice and lightweight
[07:07:38] <carter> night all
[07:07:38] <strcat> well, lets say 95%  ;p
[07:08:05] <strcat> lets you avoid spreading out your data everywhere and avoid pointer indirection
[07:08:23] <strcat> but it doesn't really offer anything significant for the hot inner loops
[07:08:31] <strcat> (well, inline assembly)
[07:09:09] <strcat> I don't think rust gives you anything significant go or java doesn't for a bigint multiplication implementation for example
[07:11:47] <tiffany> bleh
[07:12:19] <tiffany> anyway, I find it hard to believe that compilers will have a hard time generating code for the mill cpu
[07:12:42] <strcat> never said that
[07:12:52] <strcat> they'll generate code for the mill as they do for other VLIW architectures like itanium
[07:13:33] <strcat> they still won't be able to vectorize your code for you
[07:13:56] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[07:14:04] <strcat> they can do a reasonable job for certain common patterns...
[07:14:06] * strcat shrugs
[07:14:09] <tiffany> carter sort of derailed the conversation by saying that hand written code is better than simd
[07:14:36] <tiffany> generating simd is much harder than pipelining your operations though, it seems
[07:14:56] <strcat> pipelining operations is still hard
[07:15:06] <strcat> rust isn't SSA form and rustc doesn't generate SSA form
[07:15:31] <strcat> switching it to SSA form means doing a whole lot of memory dependency analysis, alias analysis, etc.
[07:15:41] <tiffany> because of mut?
[07:15:43] <strcat> LLVM only has primitive implementations of this stuff
[07:15:50] <strcat> tiffany: because it's not SSA
[07:16:42] <strcat> if you want a language mapping well to vectorization... start with immutable values and map it *all* to SSA
[07:16:59] <strcat> rust puts every variable in-memory (alloca)
[07:17:02] *** Joins: pepper_chico (pepper_chi@E3C2E286.D158355F.F546FA5F.IP)
[07:17:08] <strcat> you can take the address of a variable/field
[07:17:17] *** Quits: darthdeus (darthdeus@62EE3073.3B96A244.4E88690D.IP) (Quit: Leaving...)
[07:17:42] <pepper_chico> hey, is this going to get into? http://ieeexplore.ieee.org/xpl/login.jsp?tp=&arnumber=6650903&url=http%3A%2F%2Fieeexplore.ieee.org%2Fxpls%2Fabs_all.jsp%3Farnumber%3D6650903
[07:17:52] <strcat> tiffany: if you write 'let x = a * b; let y = c * d;' in rust, it allocas two slots for `x` and `y`
[07:17:54] <tiffany> I got kind of confused on the difference between ssa and immutable variables
[07:17:56] <strcat> so it gets back addresses
[07:18:00] <strcat> then it loads the addresses
[07:18:03] <strcat> well
[07:18:09] <strcat> for a, b, c, d
[07:18:24] <strcat> and computes a value, and stores it
[07:18:39] <strcat> so, any time there's a load/store, it doesn't map to a parallel pipeline
[07:19:00] <strcat> it has to go and analyze all of this with stuff like the mem2reg pass to try to undo it and have no loads/stores
[07:19:30] <tiffany> what's an example of a language which maps well to pipelining?
[07:19:41] <pepper_chico> a barely scanned the paper but, what's going on about embedding a "kernel" gpu language into rust, and other features?
[07:19:51] <pepper_chico> s/a/I/
[07:19:57] <strcat> tiffany: LLVM IR written by hand ;)
[07:20:08] <tiffany> higher level?
[07:20:31] <strcat> IR is pretty high-level, you could add a thin facade over it
[07:20:32] <tiffany> the main problem is dealing with pointers when you're pipelining?
[07:20:47] <strcat> tiffany: pointers are a big problem everywhere
[07:20:51] <strcat> with most optimizations
[07:21:01] <strcat> anyway, to pipeline the instructions you need a bunch of SSA form stuff
[07:21:32] <pepper_chico> no knows about embedded into the language gpu programming?
[07:21:55] <pepper_chico> this is hot stuff in my view
[07:22:15] <pepper_chico> s/no/no one/
[07:22:31] <strcat> tiffany: http://llvm.org/docs/AliasAnalysis.html#the-basicaa-pass this basic-aa pass is the entire extent of rust's alias analysis
[07:22:40] <strcat> can't expect much from it ;p
[07:22:54] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[07:23:31] *** Joins: jaeholee (uid4856@moz-31ABA2C0.irccloud.com)
[07:23:54] <pepper_chico> the paper, http://www.cs.indiana.edu/~eholk/papers/hips2013.pdf
[07:23:54] <strcat> doesn't do any fancy analysis, just runs a few queries down a list of common rules
[07:24:25] *** Quits: pyon (user@A16F2BE6.A9B419CB.1C8C8CE9.IP) (Quit: zzz)
[07:24:44] *** Joins: Ms2ger (Ms2ger@D324D80C.3387515C.187A1082.IP)
[07:26:03] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[07:26:13] *** Joins: ptc1 (Adium@moz-192425C4.nyc.res.rr.com)
[07:26:13] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Connection reset by peer)
[07:27:54] *** Quits: ptc1 (Adium@moz-192425C4.nyc.res.rr.com) (Ping timeout)
[07:28:56] *** Quits: bobthenameless (bobthename@moz-A1BB42C4.dhcp.leds.al.charter.com) (Ping timeout)
[07:29:08] *** Joins: bobthenameless (bobthename@moz-A1BB42C4.dhcp.leds.al.charter.com)
[07:30:34] <flu-> How do I tell my generated rust bindings that it needs to link against a particular shared library? That is, say I've ran rust-bindgen against libfoo.so, how do I specify to rustc that programs using the libfoo.so rust bindings need to actually link against libfoo.so?
[07:30:45] *** Joins: lurk_ (chatzilla@moz-F088D030.hsd1.in.comcast.net)
[07:31:04] <flu-> The library compiles fine, but when building programs using it, I get a lot of undefined reference errors, similar to this issue -> https://github.com/JeremyLetang/rust-sfml/issues/14
[07:33:00] *** Quits: synackse (jordyd@moz-5289C68.jax.bellsouth.net) (Quit: synackse)
[07:33:14] <flu-> I'm looking at the rust-zmq project, and the only thing that seems relevant there is a #[link("zmq")] directive in their lib.rs
[07:34:06] <dbaupp> #[link] is how you specify a library to link against it
[07:34:11] <flu-> hrm
[07:34:12] <dbaupp> s/it//
[07:34:32] <flu-> and for a dylib, that'd be in the lib.rs, correct?
[07:35:30] *** Quits: jeaye (jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[07:35:41] <pepper_chico> I know zmq is up and running, but the original author started a new project expecting to make a better zmq, ... not sure about the adoption, since everyone keeps talking about zmq
[07:35:41] <dbaupp> http://static.rust-lang.org/doc/master/guide-ffi.html
[07:35:52] <flu-> got it
[07:35:52] <dbaupp> flu-: specifically http://static.rust-lang.org/doc/master/guide-ffi.html#linking
[07:36:17] <flu-> dbaupp: that's exactly what I was looking for!
[07:36:23] * flu- retreats to the guide
[07:36:38] *** Joins: fabiand (fabiand@moz-1CD2837F.adsl.alicedsl.de)
[07:39:13] <ercxx> is there a way of seeing which one of my unrap()'s is blowing up? 
[07:39:25] <ercxx> this is what I see at the moment: `task '<unnamed>' failed at 'called `Option::unwrap()` on a `None` value', /build/rust-git/src/rust/src/libstd/option.rs:133`
[07:39:52] <magg> how to read files line by line in 0.9
[07:40:56] <flu-> jesus. ImageMagick is so effed up
[07:41:05] <flu-> the most jacked up library layout ever
[07:41:55] <pepper_chico> ah, here it's the rust binding for the "new" zmq https://github.com/glycerine/rust-nanomsg
[07:42:17] <diverse> flu-: have you checked out GraphicsMagick? I think that's more improved and newer.
[07:42:54] <flu-> diverse: I have not, maybe it's more standardized
[07:43:47] <flu-> ImageMagick relies on either pkg-config or MagickWand-config to dynamically produce the appropriate cc flags for includes and library linkage
[07:43:52] <flu-> doesn't play well with other systems
[07:43:53] *** Quits: hdevalence (quassel@moz-D125A39F.home3.cgocable.net) (Ping timeout)
[07:44:45] <diverse> flu-: well GraphicsMagick claims "is quite portable, and compiles under almost every general purpose operating system that runs on 32-bit or 64-bit CPUs."
[07:45:12] <strcat> flu-: lots of libs use pkg-config ;p
[07:45:31] <flu-> strcat: is there some accepted way to make that fit with rust's compiler directives?
[07:45:40] <flu-> specifically, the link directive vs pkg-config and friends
[07:45:48] <strcat> flu-: no
[07:45:54] <flu-> hooray! :-P
[07:46:02] <strcat> well, rust doesn't use include files at this point anyway
[07:46:09] <strcat> since it currently makes you hardcode the definitions
[07:46:09] <flu-> might need to bust out some auto-tools or something at this point
[07:46:28] <diverse> can you guys fill me in on what pkg-config is about?
[07:46:29] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Ping timeout)
[07:46:43] *** Joins: achim (achim@moz-88EC5B9B.dip0.t-ipconnect.de)
[07:46:44] <strcat> flu-: if you need dynamic LDFLAGS/LDLIBS, I would just use a simple 1 target Makefile
[07:46:46] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[07:47:01] <flu-> diverse: it generates the appropriate -I/some/nonstandard/location and -L/another/nonstandard/location flags for cc
[07:47:12] <flu-> from what I gather at least
[07:47:24] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[07:47:37] *** Quits: pepper_chico (pepper_chi@E3C2E286.D158355F.F546FA5F.IP) (Quit: Ex-Chat)
[07:47:46] <diverse> sounds messy, very
[07:47:52] <flu-> strcat: good point - this may be easier to solve with make than with a rustc link directive
[07:47:53] <strcat> flu-: rustc foo.rs -O -c && clang foo.o $(pkg-config --ldflags bar)
[07:48:07] <strcat> flu-: although, you could use --link-args to pass it to rustc
[07:48:11] <strcat> which is passed along to gcc
[07:48:24] * strcat is used to dealing with more complex cases
[07:48:32] <strcat> as in mixed C/C++/Rust ;p
[07:48:54] <ercxx> magg: I think you have to wrap the std::io::fs::File in a buffer
[07:48:57] *** Quits: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) (Connection reset by peer)
[07:49:04] <flu-> strcat: I'm definitely thankful for the experience tips. You helped me out a lot back in June when I was last doing rust stuff as well
[07:49:23] *** Joins: moostik (Icedove@moz-53E05E9C.w92-151.abo.wanadoo.fr)
[07:49:25] <magg> ercxx, ok thanks 
[07:49:44] <ercxx> magg: take a look at this http://static.rust-lang.org/doc/master/std/io/buffered/struct.BufferedReader.html
[07:50:15] <magg> ercxx: great!
[07:50:15] *** Quits: moostik (Icedove@moz-53E05E9C.w92-151.abo.wanadoo.fr) (Client exited)
[07:51:56] <TheHydroImpulse> Anyone want to give me their opinion on the new rust website design I've been working on?
[07:52:31] *** Quits: fabiand (fabiand@moz-1CD2837F.adsl.alicedsl.de) (Quit: Verlassend)
[07:52:40] <diverse> TheHydroImpulse: link?
[07:53:05] *** Quits: alanjc (alanjc@moz-9CA9651B.dsl.dynamic.sonic.net) (Client exited)
[07:53:36] <TheHydroImpulse> diverse Just getting a screenshot real quick
[07:54:24] <flu-> strcat: so it seems trying that way - rustc foo.rs -O -c && clang foo.o $(pkg-config --ldflags bar) - clang isn't linking against the rust libs (undefined references to io::stdio::println, etc
[07:54:31] <TheHydroImpulse> diverse https://www.dropbox.com/s/8wi4pgj0jyuoyg1/Screenshot%202014-01-11%2000.52.58.png
[07:55:27] <TheHydroImpulse> Still working on the actual content and stuff. Mainly just the header and code snippets right now
[07:55:30] <strcat> flu-: ah right, use --link-args then
[07:55:53] <strcat> flu-: or static linking ;p
[07:56:02] <strcat> hm
[07:56:22] * strcat isn't sure if rust will ask the linker to do it or do it itself
[07:56:37] <strcat> probably the linker in which case only -Z lto would let you not pass args to clang yourself
[07:57:05] <flu-> I was able to hack it to work by explicitly symlinking the appropriate ImageMagick libs to /usr/lib/libImageMagick.so and using the link directive, but that'd be kind of lame to ask of users. haha
[07:57:19] *** Quits: jeffdb1 (jeff@moz-ED35AD97.hsd1.ca.comcast.net) (Quit: Leaving.)
[07:57:53] *** Quits: Ms2ger (Ms2ger@D324D80C.3387515C.187A1082.IP) (Ping timeout)
[07:59:14] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[07:59:57] *** Quits: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net) (Quit: syatchmenoff)
[08:00:52] *** Joins: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net)
[08:01:02] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[08:01:41] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[08:03:40] *** Joins: dapz (textual@moz-F958911.hsd1.ca.comcast.net)
[08:04:27] <flu-> strcat: omg. The --link-args flag did the trick!!
[08:04:28] <flu-> woooooo
[08:05:14] *** Quits: atnt (Mibbit@moz-BB047FF.hsd1.wa.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[08:07:39] *** Quits: mleise (marco@moz-850E56A9.pools.arcor-ip.net) (Ping timeout)
[08:08:18] *** Parts: vjones (vjones@moz-544E84DC.cat.pdx.edu) (WeeChat 0.3.7)
[08:08:22] <diverse> TheHydroImpulse: my opinion would be about the light violet color. I don't know if that color works out as a Rust theme, but then again, I don't know what color would suit Rust best.
[08:09:39] <TheHydroImpulse> diverse Yeah, definitely. I've had a hard time trying to find good colors to match Rust, but also be attractive.
[08:11:32] <diverse> One color I was thinking of is a light gray color to give it that industrial feel, but in the end I think that is not a good choice.
[08:12:04] *** Joins: scp (scp@moz-9BEDE8C8.hsd1.ca.comcast.net)
[08:12:25] *** Joins: Ms2ger (Ms2ger@moz-27A0DD9D.ugent.be)
[08:12:55] <scp> hey folks, the docs on github pointed me here for "how to read/write files". Uh, anyone got a pointer to the docs?
[08:12:56] *** Quits: Ms2ger (Ms2ger@moz-27A0DD9D.ugent.be) (Connection reset by peer)
[08:12:59] *** Quits: jzcz (nick@moz-95A8D512.rb2.lax.centurytel.net) (Ping timeout)
[08:13:23] <scp> (being redirected to IRC seem... annoying to you all, I'm happy to paste the pointer in said doc if that makes things easier)
[08:14:25] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Quit: Textual IRC Client: www.textualapp.com)
[08:15:05] *** Joins: Ms2ger (Ms2ger@D324D80C.3387515C.187A1082.IP)
[08:15:19] <ercxx> scp: Take a look at this: http://static.rust-lang.org/doc/master/std/io/fs/struct.File.html
[08:16:07] <scp> ercxx: many thanks
[08:16:18] <scp> and I see from here how I can discover other such information
[08:16:27] <diverse> TheHydroImpulse: try it with light green, perhaps?
[08:16:50] <ercxx> scp: also put the File in this if you want to read it line by line : http://static.rust-lang.org/doc/master/std/io/buffered/struct.BufferedReader.html
[08:17:27] <dbaupp> TheHydroImpulse, diverse: something reddish goes with the Rust idea more than violet or green (although may not look so good)
[08:18:33] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[08:18:50] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[08:18:55] <diverse> TheHydroImpulse, dbaupp: http://html-color-codes.info/color-names/ how about "IndianRed"?
[08:18:58] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[08:20:40] *** Quits: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net) (Quit: syatchmenoff)
[08:20:55] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[08:21:27] <TheHydroImpulse> dbaupp going to try a redish color 
[08:21:43] *** Quits: Ms2ger (Ms2ger@D324D80C.3387515C.187A1082.IP) (Quit: Leaving)
[08:21:51] *** Joins: Ms2ger (Ms2ger@D324D80C.3387515C.187A1082.IP)
[08:23:13] <ercxx> w
[08:23:28] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[08:23:43] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[08:23:46] <ercxx> is it also possible to have a non white bg?
[08:23:59] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[08:24:02] <diverse> TheHydroImpulse: I wouldn't make the red too dark though.
[08:24:15] <TheHydroImpulse> diverse it's more on the lighter side
[08:24:18] *** Joins: Puddles (Mibbit@2A6DD57.32920692.9995024D.IP)
[08:24:24] <Puddles> ss
[08:24:33] <Puddles> hello
[08:24:49] <diverse> TheHydroImpulse: something like #ff3333? http://www.colorhexa.com/ff3333
[08:25:25] *** Quits: Puddles (Mibbit@2A6DD57.32920692.9995024D.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[08:25:34] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[08:25:58] <TheHydroImpulse> diverse a bit too bright
[08:26:23] <TheHydroImpulse> going more for a #d7625f
[08:26:37] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[08:27:01] <TheHydroImpulse> https://www.dropbox.com/s/fh1qo9o6wl64ong/Screenshot%202014-01-11%2001.26.51.png
[08:27:06] <TheHydroImpulse> diverse
[08:27:10] *** Joins: q66_ (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[08:27:17] <TheHydroImpulse> dbaupp
[08:27:54] <dbaupp> looks rather pale
[08:28:01] <dbaupp> but I'm not a designer at all :)
[08:28:13] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Ping timeout)
[08:28:22] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Ping timeout)
[08:28:31] <diverse> TheHydroImpulse: perhaps a little darker: #d24e4b ?
[08:28:46] <scp> you are lacking contrast on the top. Something like a drop shadow on the text might help
[08:29:14] <TheHydroImpulse> https://www.dropbox.com/s/8osw673xturlbpt/Screenshot%202014-01-11%2001.29.01.png
[08:29:31] <TheHydroImpulse> scp do you mean text at the top?
[08:29:47] <diverse> That looks better, what do you think dbaupp?
[08:29:52] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:29:53] <scp> Pretty much all the white text at the top
[08:30:05] <scp> also the screen shot you just posted is better in the contrast dept
[08:30:26] <TheHydroImpulse> I agree
[08:30:27] <geomyidae> The red is glowing on my screen
[08:30:39] <TheHydroImpulse> glowing in a bad way?
[08:31:05] <geomyidae> I hate to be a whiner and I know the colors aren't like pro calibrated on my monitors, but if it could be darkened a smidge
[08:31:26] <geomyidae> Oh, almost thought it was an html mockup for a second, I was going to just play with it myself :p
[08:31:40] <TheHydroImpulse> It is
[08:31:50] <Ms2ger> I dunno, that's too red for me :)
[08:31:51] <TheHydroImpulse> I'll push the code to github fairly soon
[08:32:04] *** Quits: pnathan (Adium@moz-A8921E45.tukw.qwest.net) (Quit: Leaving.)
[08:32:22] *** Quits: mitja (Mibbit@B14D1387.F3F635F6.3E006838.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[08:32:41] <geomyidae> Were you soliciting any feedback at all? More links are better. I like one-click access to the manual|tut|std|extra mast|0.8 etc
[08:33:02] <diverse> TheHydroImpulse: #bb322f ?
[08:33:03] <Ms2ger> You mean |0.9
[08:33:04] <TheHydroImpulse> geomyidae Yeah, I'm trying to get feedback
[08:33:23] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:34:11] * geomyidae would probably have gone in the opposite direction in general with more links all around (like download links for all platforms) just with a more elegant design and typography (very nice) like here.
[08:34:40] <mcpherrin> oh goody, microsoft's exe filtering thing isn't angry at the rust installer anymore
[08:35:18] <mcpherrin> I'm far too noobish at windows to figure out how to get angry enough at the right thing to stop it
[08:35:44] <diverse> TheHydroImpulse: could you try it with that color? I would like to see how it would look.
[08:35:46] <TheHydroImpulse> geomyidae I read on one of the issues on github for the redesign that they wanted a single-click install type deal. So people can easily get Rust installed with no fuss. Having it default on their current OS makes it simpler.
[08:36:11] *** Joins: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net)
[08:36:24] <strcat> mcpherrin: http://ix.io/9O7 foo.rc, http://ix.io/9O8 manifest.xml
[08:36:26] <TheHydroImpulse> https://www.dropbox.com/s/mv6flr3g5wvt3hq/Screenshot%202014-01-11%2001.36.21.png
[08:36:28] <strcat> i686-w64-mingw32-windres --input foo.rc --output foo.res --output-format=coff
[08:36:37] <TheHydroImpulse> I'd say it's a little dark
[08:36:59] <strcat> mcpherrin: and then you pass that file to your gcc link command ;p
[08:37:39] <strcat> at least that's what I have to do when compiling windows executables on linux with mingw-w64...
[08:38:12] <diverse> TheHydroImpulse: #cd3a37 ?
[08:38:23] <strcat> UAC doesn't work anyway, you can just bypass it
[08:38:27] <diverse> it's a little lighter
[08:38:55] <TheHydroImpulse> almost the same as before. A little bit lighter, but barely noticeable.
[08:39:02] * strcat isn't sure if it even counts as a local exploit when it has worked consistently since it was introduced
[08:39:12] <TheHydroImpulse> There's also the possibility of going for a more brown color
[08:39:17] *** Quits: b1nd_ (b1nd@moz-5A306E04.lns17.ken.bigpond.net.au) (Client exited)
[08:39:17] *** Quits: b1nd (b1nd@moz-5A306E04.lns17.ken.bigpond.net.au) (Client exited)
[08:39:21] <bjz> TheHydroImpulse: I would think of rusty colours
[08:39:30] <diverse> TheHydroImpulse: #d35451 ?
[08:39:31] <bjz> TheHydroImpulse: oxides
[08:39:51] <bjz> TheHydroImpulse: the aqua highlight is nice
[08:39:57] <strcat> bjz: so, that brown color apples become?
[08:40:27] <diverse> bjz: what kind of oxide? http://www.technomarketings.com/chemical_products/iron-oxide.jpg
[08:40:52] <TheHydroImpulse> https://www.dropbox.com/s/hl7312z35vbihg5/Screenshot%202014-01-11%2001.40.49.png
[08:40:56] <TheHydroImpulse> There's a brown
[08:41:25] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[08:42:19] <diverse> TheHydroImpulse: that's probably too dark, try aiming for this color http://www.grothe.net/wp-content/uploads/et_temp/kr_2-104608_960x480.jpg
[08:42:48] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[08:42:56] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[08:43:19] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[08:43:39] <mcpherrin> of course I can't even use rustc until I figure out how to get a working gcc on windows
[08:43:55] <bjz> TheHydroImpulse: it's abit hard to do any critique on the site though, not until there's more content on therte
[08:44:10] *** Quits: ercxx (ercan@moz-88DD3A7E.dyn.optonline.net) (Quit: WeeChat 0.4.2)
[08:44:51] <bjz> TheHydroImpulse: here was one I suggested a while back: https://kuler.adobe.com/Rust-color-theme-2709677/
[08:45:00] <TheHydroImpulse> bjz Definitely. 
[08:45:11] *** Joins: victorporof (victorporo@5EC92F85.71368607.9B1E38F4.IP)
[08:45:11] <TheHydroImpulse> Oops, I get a 404 on that link
[08:45:18] <diverse> me too...
[08:45:26] <bjz> TheHydroImpulse: try again?
[08:45:36] <TheHydroImpulse> got it
[08:45:40] <TheHydroImpulse> https://www.dropbox.com/s/g8lghuzqbbqoxn6/Screenshot%202014-01-11%2001.44.42.png
[08:45:47] <diverse> bjz: nice colors
[08:45:52] <TheHydroImpulse> Yeah, I like that color pallet. 
[08:46:12] <bjz> TheHydroImpulse: sort of going from gunmetal to a sort of iron oxide thing - like mars
[08:46:20] *** Quits: tikue (tkuehn@moz-879E86A9.hsd1.ca.comcast.net) (Ping timeout)
[08:46:21] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[08:46:35] *** Quits: depp (depp@500BAFC1.53465674.3C05E6CB.IP) (Ping timeout)
[08:46:35] *** Quits: grahame (grahame@moz-F6161E0E.members.linode.com) (Ping timeout)
[08:46:37] *** Quits: disjukr (disjukr@1B452A7A.D5FE504D.FC69BED9.IP) (Ping timeout)
[08:46:37] *** Joins: grahame (grahame@moz-F6161E0E.members.linode.com)
[08:46:40] *** Joins: disjukr (disjukr@1B452A7A.D5FE504D.FC69BED9.IP)
[08:46:43] *** Quits: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net) (Ping timeout)
[08:46:43] *** Quits: abacus (snoonan_mo@moz-F95B9243.hsd1.wa.comcast.net) (Ping timeout)
[08:46:47] <bjz> TheHydroImpulse: but you'll always get variations in people's monitors
[08:47:01] *** Joins: [a]bacus (snoonan_mo@moz-F95B9243.hsd1.wa.comcast.net)
[08:47:03] *** Quits: ktt3ja (ktt3ja@moz-54586A12.washdc.fios.verizon.net) (Quit: Leaving)
[08:47:04] * bjz has his calibrated
[08:47:18] *** [a]bacus is now known as abacus
[08:47:33] *** Quits: bleibig (bleibig@moz-B4D9C5AF.hsd1.ca.comcast.net) (Ping timeout)
[08:47:33] *** Quits: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net) (Ping timeout)
[08:47:33] *** Quits: MrByte (Dartakio@moz-81792842.chy-wy.client.bresnan.net) (Ping timeout)
[08:47:33] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[08:47:38] *** Joins: MrByte (Dartakio@moz-81792842.chy-wy.client.bresnan.net)
[08:47:40] *** Joins: depp (depp@500BAFC1.53465674.3C05E6CB.IP)
[08:47:40] *** Joins: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net)
[08:47:42] <TheHydroImpulse> bjz Yeah for sure.
[08:47:51] <diverse> TheHydroImpulse: just for kicks, can you show me a version with the gray color from the far left?
[08:47:53] *** Quits: SingingBoyo (SingingBoy@DA28FB90.A5D0D593.4F048BDC.IP) (Ping timeout)
[08:48:44] <TheHydroImpulse> diverse Sure thing
[08:50:07] <TheHydroImpulse> https://www.dropbox.com/s/w1e4x178lfl8vwf/Screenshot%202014-01-11%2001.50.00.png
[08:51:12] <bjz> nice. with some hint's of ornge-brown scattered around would be awesome. would be hard against the ble-grey background though (complimentary colours)
[08:52:05] <bjz> but yeah, the layout might still be a placeholder
[08:52:05] <diverse> I just wanted to see how it would look. But I am seeing the red as the best version so far.
[08:52:15] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[08:52:45] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[08:52:56] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[08:53:10] <TheHydroImpulse> diverse which red version? 
[08:53:19] <diverse> https://www.dropbox.com/s/g8lghuzqbbqoxn6/Screenshot%202014-01-11%2001.44.42.png
[08:53:36] <bjz> TheHydroImpulse: so what were you planning on doing? the docs and the website?
[08:53:40] <diverse> the one from bjz pallet
[08:54:11] *** Quits: noam (noam@F6B530A7.720527A7.416762B.IP) (Ping timeout)
[08:54:23] *** Quits: csherratt (csherratt@moz-8D848271.cpe.teksavvy.com) (Quit: csherratt)
[08:54:28] <TheHydroImpulse> bjz Right now I'm focusing on the website, but I've been experimenting with the docs section, more in the layout area.
[08:54:37] <bjz> oh neat
[08:54:43] <scp> Can anyone tell me how to convert str -> [u8] in rust?
[08:54:50] <TheHydroImpulse> diverse ahh yeah, that's my favourite so far.
[08:54:50] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[08:55:03] <diverse> and besides we have to find a good color theme for Rust
[08:55:30] <bjz> diverse: yeah, the branding is really scattered at the moment
[08:55:53] <bjz> TheHydroImpulse: we have this kinda ugly gradient version of the logo
[08:56:40] <bjz> TheHydroImpulse: I did a re-trace of the logo a year ago to clean up some of the wonky paths, but it seemed to have got forgotten
[08:57:03] <magg> how is the string represented? when try to get the len a from_char() i get +1 the size. does it add the '\0' char like C
[08:57:34] <bjz> magg: it's a pointer and a length afaik - no null terminator
[08:57:44] <TheHydroImpulse> bjz yeah, I tried putting the logo from the website on here, but it didn't really fit.
[08:57:57] <magg> bjz: mmmm
[08:57:58] <bjz> TheHydroImpulse: the gradient one?
[08:58:13] <TheHydroImpulse> bjz no, just the black one.
[08:58:25] <TheHydroImpulse> it fit size wise, but not style wise.
[08:58:44] <bjz> yeah, might want to consider that when doing the layouts
[08:58:53] <bjz> do you think it might be too detailed?
[08:59:32] *** Quits: paulproteus (quassel@199.199.210.158) (Ping timeout)
[08:59:37] <bjz> scp: http://static.rust-lang.org/doc/master/std/str/trait.StrSlice.html#tymethod.as_bytes
[08:59:46] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[08:59:46] *** Joins: paulproteus (quassel@458FE134.3EC36C88.CBDCF1DC.IP)
[09:00:03] <TheHydroImpulse> bjz Not sure. I find it a bit think.
[09:00:25] <TheHydroImpulse> that's probably why
[09:00:38] <TheHydroImpulse> while all the fonts and styles are fairly thinned down
[09:00:41] <bjz> TheHydroImpulse: a bit think?
[09:00:59] *** Joins: int3_ (int3_@1D458A5D.B412A054.8BC4C3B1.IP)
[09:01:05] <TheHydroImpulse> oops thick*****
[09:01:29] <scp> bjz: ty
[09:01:32] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[09:01:45] <bjz> I'm personally not a real fan of the headline font that has been used on the docs, it seems quite harsh - but the issue is finding an open source one
[09:02:47] <bjz> I think the font they used is a league of type one
[09:03:02] <TheHydroImpulse> bjz Yeah, Helvetica Neue works, but only for Mac users (or those who have it). Google fonts are ok.
[09:03:11] *** Quits: int3_ (int3_@1D458A5D.B412A054.8BC4C3B1.IP) (Client exited)
[09:03:35] <bjz> TheHydroImpulse: it's a constraint, at least for the docs side of things
[09:03:46] <bjz> less so for the forward facing site
[09:03:46] *** Joins: noam (noam@F6B530A7.720527A7.416762B.IP)
[09:03:49] *** Joins: int3_ (int3_@1D458A5D.B412A054.8BC4C3B1.IP)
[09:04:08] <bjz> but then we might want to put that on github as well
[09:04:27] <diverse> TheHydroImpulse: can I have you experiment with the color from bjz's pallet from 2nd to the right?
[09:04:41] <diverse> and yeah put it up on github
[09:05:01] <TheHydroImpulse> bjz yeah.
[09:05:04] <TheHydroImpulse> diverse sure
[09:05:05] <bjz> diverse: I wouldn't be too concerned about the current layout - these things can change quite a bit through the design process
[09:05:22] <diverse> bjz: I'm curious
[09:05:34] <bjz> heh - sorry :)
[09:06:11] *** Joins: int3__ (int3_@moz-77A2D27D.singnet.com.sg)
[09:06:32] <TheHydroImpulse> diverse https://www.dropbox.com/s/ivqvava34d9w4do/Screenshot%202014-01-11%2002.06.26.png
[09:06:38] *** Quits: int3_ (int3_@1D458A5D.B412A054.8BC4C3B1.IP) (No route to host)
[09:06:47] <TheHydroImpulse> oops forgot to change that link color
[09:06:54] <diverse> TheHydroImpulse: I mean the other right :P
[09:07:00] *** Quits: Valtis (Valtis@moz-7A6DF574.kymp.net) (Ping timeout)
[09:07:05] <bjz> TheHydroImpulse: but yeah, I'll get off your back - sorry. I have a graphic design background but I really haven't felt like doing any this past year or so... hence why I haven't taken the website on
[09:07:25] *** Quits: lurk_ (chatzilla@moz-F088D030.hsd1.in.comcast.net) (Ping timeout)
[09:07:27] *** Joins: Valtis (Valtis@moz-7A6DF574.kymp.net)
[09:07:50] <TheHydroImpulse> bjz Oh no worries. I actually welcome feedback. Especially when it comes to a community project.
[09:08:23] <diverse> Actually, I'm starting to think the light gray work...
[09:08:25] <bjz> TheHydroImpulse: I used to hang out on designerstalk.com - they were ruthless critiquers
[09:08:25] <diverse> *works
[09:08:47] <bjz> TheHydroImpulse: but you always ended up with something awesome in the end if you listened
[09:08:51] *** Quits: gwty (gwtypc@F7E523E8.8B53FFE9.AAF4A5CC.IP) (Ping timeout)
[09:09:04] <diverse> bjz: I like your choice of colors for Rust
[09:09:14] *** Joins: pyon (user@A16F2BE6.A9B419CB.1C8C8CE9.IP)
[09:09:29] <TheHydroImpulse> bjz hehe. Now I just browse through Dibbble.
[09:09:35] <bjz> TheHydroImpulse: but these were awesome design people - it's not like you were trying to aim for the lowest common denominator
[09:09:40] *** Quits: int3__ (int3_@moz-77A2D27D.singnet.com.sg) (Client exited)
[09:09:40] <ecl3ctic> I actually like the darket blue
[09:09:43] <pyon> Why does extra::arc::RWArc only work on types that implement Freeze?
[09:09:46] <ecl3ctic> darkest*
[09:10:09] *** Joins: int3_ (int3_@moz-77A2D27D.singnet.com.sg)
[09:10:10] <TheHydroImpulse> https://www.dropbox.com/s/l67id9sd6fj098r/Screenshot%202014-01-11%2002.10.07.png
[09:10:18] *** Quits: int3_ (int3_@moz-77A2D27D.singnet.com.sg) (Client exited)
[09:10:37] <TheHydroImpulse> I like brown, too. 
[09:10:41] <bjz> TheHydroImpulse: I dunno... dribble seems very superficial
[09:11:13] <bjz> TheHydroImpulse: I mean - there isn't a ton of context
[09:11:19] <TheHydroImpulse> bjz Oh definitely. 
[09:12:13] *** Quits: depp (depp@500BAFC1.53465674.3C05E6CB.IP) (Quit: Lost terminal)
[09:12:43] *** Joins: heftig (heftig@moz-3C2728A9.dip0.t-ipconnect.de)
[09:13:02] <bjz> TheHydroImpulse: like, you can talk about colours and pixels and effects, but there are far more important things.
[09:13:07] <diverse> TheHydroImpulse: many of these colors work so well, you might just want to include them all in github for others to choose
[09:13:34] <TheHydroImpulse> diverse Yep, all included in sass files with variables.
[09:14:06] <ecl3ctic> let's not settle on one colour
[09:14:11] <ecl3ctic> we should have a rainbow background
[09:14:17] <ecl3ctic> and it should be animated
[09:14:21] <TheHydroImpulse> ecl3ctic :)
[09:15:02] <TheHydroImpulse> bjz What would you say should be the main priority of the main page? * Communicate that rust is a programming language (safety, concur. etc..) * Ability to install Rust super easily * An intro to the language? * Further resources (tutorials, docs, etc...)
[09:15:29] <bjz> TheHydroImpulse: well number one is to put the code front and center
[09:16:11] <diverse> ecl3ctic: yes, make the site very trippy on oxide colors :P
[09:16:12] <TheHydroImpulse> bjz Ok, what type of example do you think would be best? I don't think a hello world would be appropriate.
[09:16:23] <ecl3ctic> I would like to see the main page state as concisely as possible Rust's most major plus-points with lots of example code snippets
[09:16:23] <bjz> TheHydroImpulse: the thing that many language sites do wrong is you have to go looking to find actual code
[09:16:39] <TheHydroImpulse> bjz Yeah, I definitely agree with that
[09:16:40] <bjz> TheHydroImpulse: I wouldn't worry too much about what the code is atm
[09:16:52] *** Quits: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net) (Ping timeout)
[09:17:02] <TheHydroImpulse> bjz ok, cool.
[09:17:13] <bjz> TheHydroImpulse: just the fact that it's there
[09:17:32] <bjz> TheHydroImpulse: like, in the future it would be great if it was editable and runnable
[09:17:36] <ecl3ctic> so put up some unsafe blocks with some transmutes and c-style pointers
[09:17:41] <bjz> right on the front page
[09:17:43] *** Quits: Valtis (Valtis@moz-7A6DF574.kymp.net) (Ping timeout)
[09:17:45] *** Joins: avsej (avsej@D9A610B8.4841F515.FB33447D.IP)
[09:17:45] *** Joins: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net)
[09:17:57] <bjz> TheHydroImpulse: this is an example of what not to do: http://www.ats-lang.org/
[09:17:59] <bjz> :P
[09:18:11] <TheHydroImpulse> bjz lol :)
[09:18:45] *** Joins: Valtis (Valtis@moz-7A6DF574.kymp.net)
[09:18:49] <TheHydroImpulse> That's a great sales technique </sarcasm>?
[09:19:04] <TheHydroImpulse> didn't mean to put a ?
[09:19:08] <bjz> TheHydroImpulse: go does it really well - the page is a tad ugly and cluttered, but it has the code front and center which is good: http://golang.org/
[09:20:02] *** Joins: mr_evil (Mibbit@moz-F62F3603.hsd1.ca.comcast.net)
[09:20:21] <bjz> that said, I'm sure Rust could have a nice pretty example showing things like enums, pattern matching, tasks, implicit returns etc. but again, it's less of a worry
[09:20:36] <TheHydroImpulse> bjz for sure.
[09:20:39] <bjz> TheHydroImpulse: also, the IRC is a *huge* thing in the rust community
[09:21:24] <bjz> TheHydroImpulse: maybe having prominent links to the channels would be good: #rust, #servo, #rust-internals, #rust-gamedev, #rust-osdev
[09:21:55] <bjz> just an idea
[09:22:08] *** Joins: int3_ (int3_@moz-77A2D27D.singnet.com.sg)
[09:22:11] <bjz> I don't know how that would look to folks less versed in IRC though
[09:22:19] *** Joins: rca (rcatolino@moz-F434D9F9.adsl.proxad.net)
[09:22:46] <ecl3ctic> can an IRC chat box be embedded in a web page?
[09:22:56] <ecl3ctic> like, on Rust's home page :)
[09:23:05] <TheHydroImpulse> bjz Good tip
[09:23:07] <diverse> hahahaha
[09:23:28] <ecl3ctic> (that's probably a terrible idea, but it would be cool to *see* people discussing Rust when you visit the site)
[09:23:36] <bjz> TheHydroImpulse: but yeah, Rust is a very community driven project. it shouldn't be something that's hidden away. we want to be welcoming
[09:23:42] <bjz> ecl3ctic: yeah
[09:24:02] <rca> ecl3ctic: https://botbot.me/mozilla/rust/ :)
[09:24:05] <TheHydroImpulse> bjz Definitely. I'll keep thinking about that.
[09:24:07] <bjz> ecl3ctic: we have [o__o] checking us
[09:24:37] <diverse> ecl3ctic: it's not a terrible idea, it's just funny to image having the site show what people are talking about. :P
[09:24:45] <diverse> especially when we get offtopic
[09:24:53] <diverse> *imagine
[09:25:37] <bjz> TheHydroImpulse: also, rust is very practical, and can sometimes be a little intimidating, but it has quirky bits hidden a little below the surface
[09:26:06] <bjz> TheHydroImpulse: like when the runtime encounters a fatal error it spits out lovecraftian quotes
[09:26:16] *** Joins: bheylin (brianheyli@moz-8255E94E.adsl.online.nl)
[09:26:45] <bjz> TheHydroImpulse: would be interesting to see if we could hide a few little whimsical things in
[09:26:46] <TheHydroImpulse> bjz Yeah, I was very surprised on how easy it was to go from high-level stuff, straight down to raw C-interop. The compiler is very helpful.
[09:26:58] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[09:27:01] <TheHydroImpulse> bjz Like "eastereggs"?
[09:27:11] <magg> i get this error. while concatenating two strings:  failed at 'assertion failed: end <= self.len()', /private/tmp/rust-R5p2/rust-0.9/src/libstd/vec.rs:1027
[09:27:14] <ecl3ctic> diverse: yeah I suppose it would be strange to hear people talking about some of the random things the chat deviates to
[09:27:30] <diverse> TheHydroImpulse: no easter eggs, make it easy
[09:27:39] <bjz> TheHydroImpulse: here's and example of 'Graydon Humour': go here: http://buildbot.rust-lang.org/bors/bors.html
[09:27:45] <ecl3ctic> unless we had a #rust-beginner
[09:27:47] <magg> this code: hex_string = str::from_char('0') + hex_string;
[09:28:03] <bjz> TheHydroImpulse: now delete the `bors.html`
[09:28:15] <bjz> And go there
[09:28:34] <TheHydroImpulse> bjz ahh
[09:28:40] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Ping timeout)
[09:28:47] <bjz> I laughed so hard the first time I saw that
[09:28:48] <bjz> :P
[09:28:56] <TheHydroImpulse> lol
[09:29:15] <bjz> but yeah, I guess that could be something for example code to do
[09:29:54] <bjz> so it's like a friendly, yet serious site, with whimsical code examples or something
[09:30:04] <bjz> I dunno
[09:31:22] <TheHydroImpulse> bjz sounds good. Everything is currently in a private github repo that I'll open up.
[09:31:23] * bjz is wondering if we need a temporary #rust-branding
[09:31:25] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[09:33:09] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[09:33:25] <bjz> ok, opened up a #rust-branding channel
[09:34:23] <ecl3ctic> that was a long time spent deliberating
[09:35:46] <diverse> cmr: you there?
[09:38:06] *** Joins: darthdeus (darthdeus@62EE3073.3B96A244.4E88690D.IP)
[09:38:23] *** Joins: hiker13526 (hiker@moz-FF139BF3.ca.yorkinet.com)
[09:39:07] *** Quits: magg (magg@9F955BB.B3A4AA73.3D0AE249.IP) (Quit: magg)
[09:39:12] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[09:40:54] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[09:44:38] *** Quits: bheylin (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin)
[09:45:26] *** Quits: avsej (avsej@D9A610B8.4841F515.FB33447D.IP) (Ping timeout)
[09:46:18] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[09:46:41] *** Joins: TisButMe (Mibbit@moz-5233EFA9.w92-144.abo.wanadoo.fr)
[09:50:51] <TheHydroImpulse> https://github.com/TheHydroImpulse/rust-website
[10:00:16] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[10:01:25] *** Joins: c-a (c-a@moz-57C82A9.a163.priv.bahnhof.se)
[10:01:54] <diverse> dbaupp: join the #rust-branding channel
[10:02:01] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[10:02:04] *** Joins: fuogo (Mibbit@moz-6DD2EAF1.hsd1.ca.comcast.net)
[10:02:50] *** Quits: fuogo (Mibbit@moz-6DD2EAF1.hsd1.ca.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[10:04:17] *** Joins: avsej (avsej@D9A610B8.4841F515.FB33447D.IP)
[10:06:03] *** Joins: SingingBoyo (SingingBoy@DA28FB90.A5D0D593.4F048BDC.IP)
[10:07:24] *** Parts: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) ()
[10:11:17] *** Joins: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de)
[10:12:29] *** Joins: mib_dt0umq (Mibbit@45B1DDB.11925AAA.93CD1CA.IP)
[10:12:29] <geomyidae> http://static.rust-lang.org/doc/master/extra/arc/struct.RWArc.html I'm a bit lost on where type U comes from ?
[10:12:51] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[10:13:24] <diverse> geomyidae: because the methods also have a generic type associated to them
[10:13:55] <geomyidae> diverse: I don't see anything that constrains U and T in those functions
[10:13:59] *** Quits: StarLight (StarLight@moz-F30410F.pppoe.avangarddsl.ru) (Ping timeout)
[10:14:08] *** Joins: tristramh (tris@moz-168C3D60.lns20.syd6.internode.on.net)
[10:14:23] <geomyidae> like write<U>() .... U has to be T, right?
[10:14:39] <geomyidae> Oh I guess not
[10:15:04] <geomyidae> blk takes x mutably so it gets to do and return whatever, U.
[10:15:12] *** Joins: Matthias247 (Miranda@moz-BDD35EC0.hsi5.kabel-badenwuerttemberg.de)
[10:15:21] *** Quits: wting (wting@E31B3884.E538DA90.20F09BA6.IP) (Quit: leaving)
[10:16:43] *** Parts: mib_dt0umq (Mibbit@45B1DDB.11925AAA.93CD1CA.IP) ()
[10:17:27] *** Quits: kimundi (kimundi@moz-B4EEA79E.dip0.t-ipconnect.de) (Ping timeout)
[10:20:36] *** Joins: zz_kimundi (kimundi@moz-73A8AA3F.dip0.t-ipconnect.de)
[10:20:54] *** zz_kimundi is now known as kimundi
[10:22:47] *** Joins: jackneill (jackneill@moz-8864B729.pool.digikabel.hu)
[10:22:55] <diverse> geomyidae: that's a good question, I don't know what U turns out to be, but it is different from T
[10:23:11] *** Quits: mr_evil (Mibbit@moz-F62F3603.hsd1.ca.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[10:24:14] *** Joins: wting (wting@E31B3884.E538DA90.20F09BA6.IP)
[10:24:16] *** Quits: kimundi (kimundi@moz-73A8AA3F.dip0.t-ipconnect.de) (Ping timeout)
[10:27:18] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[10:27:20] <diverse> geomyidae: my guess is, U becomes the type of whatever is returned from the function or closure.
[10:27:36] *** Joins: zz_kimundi (kimundi@moz-805FAAC7.dip0.t-ipconnect.de)
[10:27:54] *** zz_kimundi is now known as kimundi
[10:28:59] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Ping timeout)
[10:29:47] *** Quits: int3_ (int3_@moz-77A2D27D.singnet.com.sg) (Client exited)
[10:30:20] *** Quits: Houm (Houm@moz-25669AA8.fbx.proxad.net) (Ping timeout)
[10:30:43] *** Joins: int3_ (int3_@moz-77A2D27D.singnet.com.sg)
[10:33:02] *** Quits: int3_ (int3_@moz-77A2D27D.singnet.com.sg) (Client exited)
[10:33:07] *** Joins: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com)
[10:34:58] *** Quits: tristramh (tris@moz-168C3D60.lns20.syd6.internode.on.net) (Ping timeout)
[10:35:18] <bjz> geomyidae: if you look at `fn write<U>(&self, blk: |x: &mut T| -> U) -> U`
[10:35:41] <bjz> U is a type parameter on the method
[10:35:49] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[10:36:00] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[10:36:17] <bjz> and it doesn't have to be the same as T
[10:38:10] <bjz> rust can infer the type of U: let x = foo.write(|_| ~"hi"); // U will be inferred from the return value, in this case ~str
[10:38:35] <bjz> you can be explicit if need be though: let x = foo.write::<~str>(|_| ~"hi");
[10:38:46] <bjz> geomyidae: does that make sense?
[10:42:06] *** Joins: paull (Mibbit@moz-66112FF7.unity-media.net)
[10:42:11] <paull> hi
[10:42:21] <paull> i just read the release notes on rust 0.9
[10:42:32] <paull> the language has been on my reading list for a long time
[10:42:39] <paull> and now i would like to invest some time in it
[10:42:47] <paull> is the tutorial on the rust website up to date ?
[10:42:52] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[10:42:54] <paull> im slightly confused
[10:43:09] <paull> in the release notes it is said that the @ pointer is obsolete
[10:43:16] <paull> but in the tutorial it is used a lot
[10:43:20] *** Joins: int3_ (int3_@D36F42D.83793537.D1416617.IP)
[10:43:28] <paull> there's no mention of rc and gc pointers in the tutorial
[10:43:39] <skrylar> i seem to have been pinged in this chat a while back, and now i can't find it in irssi
[10:43:51] <paull> did you already update it or is it still the version for 0.8
[10:45:52] *** Joins: eddyb (eddy@EE946B63.921A1753.FCAAE698.IP)
[10:46:24] <Matthias247> paull: The tutorial was updated, but some @ptrs were overlooked and so they are still in it. However they are deprecated
[10:47:30] <paull> Matthias247: some were overlooked ? they are everywhere
[10:47:36] <paull> i think this is a really big issue
[10:47:51] <paull> the rust 0.9 release was in the various newsfeeds
[10:48:03] <paull> and all the people flocking to your site are treated with outdated docs
[10:48:29] <paull> theres the section references which lists @ quite prominently
[10:48:59] <bjz> paull: we'll get there, eventually :) - rust has progressed amazingly since I started working with it - at 0.3
[10:49:13] <skrylar> hrm. first i've heard of an update
[10:49:14] *** Quits: eddyb (eddy@EE946B63.921A1753.FCAAE698.IP) (Ping timeout)
[10:49:17] <skrylar> i guess i should pull and build a new compiler
[10:49:37] <paull> skrylar, you would probably have to rewrite a lot of code
[10:49:43] <paull> oh
[10:49:45] <paull> got to go
[10:49:45] <bjz> paull: treat the 0.9 release as a snapshot
[10:49:53] <Matthias247> That's from yesterday: "cmr: I thought I had removed @ from the tutorial, though..."
[10:50:01] <paull> i guess ill wait till 1.0
[10:50:05] <bjz> paull: most of us track master
[10:50:13] <paull> ok
[10:50:15] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[10:50:16] <paull> bye
[10:50:17] *** Joins: gwty (gwtypc@17C8B8C7.AD96D6D0.137C914F.IP)
[10:50:21] *** Quits: paull (Mibbit@moz-66112FF7.unity-media.net) (Quit: http://www.mibbit.com ajax IRC Client)
[10:50:21] <bjz> that's the reccomended way
[10:50:22] <bjz> o/
[10:52:29] <skrylar> yeah, i've been writing it on 0.9-pre 
[10:52:58] <skrylar> and i have the compiler installed in a local folder which is tracked by git, so i can wipe out / restore installed versions
[10:53:40] *** Quits: pzol (pzol@moz-553BEE64.dynamic.chello.pl) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[10:54:08] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[10:54:54] *** Joins: eddyb (eddy@EE946B63.921A1753.FCAAE698.IP)
[10:55:49] *** Quits: Blub\0 (wry@620605B3.71150E1A.237AE2BA.IP) (Ping timeout)
[10:55:54] *** Joins: io2 (io2@moz-871549F5.home.otenet.gr)
[10:56:01] *** Joins: Blub\0 (wry@620605B3.71150E1A.237AE2BA.IP)
[10:56:28] <pyon> Is it possible to declare a trait synonym?
[10:56:35] *** Quits: zootm (calum@moz-150DDDC2.sgyl.cable.virginm.net) (Ping timeout)
[10:57:35] <rca> pyon: another name for the same type? There's the type keyword for that.
[10:57:46] <pyon> Another name for the same trait.
[10:59:27] *** Joins: tristramh (tris@moz-168C3D60.lns20.syd6.internode.on.net)
[11:00:45] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[11:01:32] *** Joins: Earnestea (earnest@moz-E86D50FA.dyn.plus.net)
[11:02:29] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[11:02:31] <kimundi> pyon: Don't think so - why do you need it?
[11:03:02] *** Joins: StarLight (StarLight@moz-984D6E83.dynamic.avangarddsl.ru)
[11:03:17] <kimundi> You could define a new trait that inherits from the old one, but not sure if that would give you access to all methods of the base trait
[11:04:49] *** Joins: zootm (calum@moz-150DDDC2.sgyl.cable.virginm.net)
[11:05:12] <pyon> I just wanted to shorten Iterator<int> to something like IntIter, because I use it quite often in a module.
[11:05:17] <rca> pyon: well you could hack that using inner mods and ```use Foo = bar::Baz;``` declarations.
[11:05:29] *** Quits: tristramh (tris@moz-168C3D60.lns20.syd6.internode.on.net) (Ping timeout)
[11:05:31] <rca> but that's kinda ugly IMO
[11:05:53] <rca> oh, that won't work then.
[11:06:01] <pyon> I will stick to writing the whole thing for now.
[11:09:27] *** Quits: gwty (gwtypc@17C8B8C7.AD96D6D0.137C914F.IP) (Ping timeout)
[11:12:41] *** Quits: eddyb (eddy@EE946B63.921A1753.FCAAE698.IP) (Ping timeout)
[11:14:37] *** Quits: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net) (Ping timeout)
[11:14:37] *** Quits: int3_ (int3_@D36F42D.83793537.D1416617.IP) (Ping timeout)
[11:14:38] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[11:15:50] *** Joins: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net)
[11:17:26] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[11:17:36] *** Quits: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net) (Ping timeout)
[11:18:39] *** Joins: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net)
[11:19:57] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[11:23:36] *** Joins: bbodi (Mibbit@moz-77CC3D67.pool.digikabel.hu)
[11:23:46] <skrylar> is there a built-in code coverage system?
[11:23:58] *** Joins: alonlevy (alon@moz-30492E92.bb.netvision.net.il)
[11:24:31] <bbodi> Hi all! I have a longer question about this fantastic programming language, but I don1t find a forum for rust where I can ask my question. How can I find an appropriate place for that?
[11:25:13] <skrylar> bbodi: there are some rust questions on StackOverflow
[11:25:22] *** Joins: scriptdevil (scriptdevi@3216D6EC.B8DB306.8B6C1D65.IP)
[11:26:01] <scriptdevil> Is there a mirror for rust tarballs? The main server seems very slow for me (< 5kbps) [India]
[11:26:09] <bbodi> stackoverflow, awesome, thank you!
[11:26:37] <Tobba> I could mirror them on my server but you'd probably get the same speed
[11:26:56] <scriptdevil> Tobba: Why? 
[11:27:06] <Tobba> its in germany, or wait, is the main rust server in the US?
[11:27:14] <Tobba> one sec then
[11:27:28] <scriptdevil> Thanks!
[11:27:36] <Tobba> this one right? http://static.rust-lang.org/dist/rust-0.9.tar.gz
[11:27:37] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[11:27:40] <scriptdevil> Yes
[11:28:31] <Tobba> tobba.pw/rust-0.9.tar.gz
[11:28:48] <scriptdevil> Great
[11:29:14] *** Joins: sk (sk@468213F1.BDC97DA2.1FCE22BB.IP)
[11:29:22] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Ping timeout)
[11:29:36] <scriptdevil> It is much faster. I wonder if something is wrong with my network connection though, Still only around 50kbps
[11:29:47] <Tobba> ah, that sucks
[11:30:55] <scriptdevil> Ok, improving to like 120kbps. Please keep it up there for a few more minutes.
[11:31:14] <Tobba> I have craploads of space left on that thing, I'll leave it up for a while
[11:32:24] *** Joins: eddyb (eddy@EE946B63.921A1753.FCAAE698.IP)
[11:32:25] <bjz> bbodi: the best place is either here or the mailing list
[11:32:30] <scriptdevil> Ok. Done downloading. Thanks again.
[11:32:53] *** Quits: wting (wting@E31B3884.E538DA90.20F09BA6.IP) (Client exited)
[11:33:05] *** Joins: ofeldt- (ofeldt@moz-7C2BB22C.dip0.t-ipconnect.de)
[11:33:30] <bjz> scriptdevil: are you just starting up with Rust?
[11:34:03] *** Quits: ofeldt (ofeldt@moz-3A4AA409.dip0.t-ipconnect.de) (Ping timeout)
[11:35:28] *** Quits: alonlevy (alon@moz-30492E92.bb.netvision.net.il) (Ping timeout)
[11:36:43] <scriptdevil> bjz: No, I did some work with it several months back (and even sent in a patch to some library). But had thesis work and just found free time
[11:36:55] *** Joins: summerlight_ (summerligh@327FC32B.2C956A45.501EFF44.IP)
[11:36:56] <bjz> ah ok
[11:37:02] *** Quits: eddyb (eddy@EE946B63.921A1753.FCAAE698.IP) (Ping timeout)
[11:37:02] <bjz> well, welcome back!
[11:37:18] <scriptdevil> bjz: :) 
[11:37:34] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[11:38:13] <bjz> it's probably better to build from source and track master if you plan on sticking with it for a while, but 0.9 isn't that out of date yet
[11:39:12] *** Quits: ofeldt- (ofeldt@moz-7C2BB22C.dip0.t-ipconnect.de) (Quit: quit)
[11:39:25] *** Joins: ofeldt (ofeldt@moz-7C2BB22C.dip0.t-ipconnect.de)
[11:40:14] *** Joins: FreeFull (freefull@moz-5700401D.as13285.net)
[11:40:24] <scriptdevil> bjz: Will do. For some reason some servers are very slow for me today and github seems to be one of them
[11:47:35] *** Joins: gwty (gwtypc@17C8B8C7.AD96D6D0.137C914F.IP)
[11:47:57] *** Joins: dkeenaghan (dkeenaghan@A9F153F4.DDE28F19.986A907C.IP)
[11:49:03] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[11:49:29] *** Joins: sebcrozet (sebcrozet@moz-F96421F3.w80-13.abo.wanadoo.fr)
[11:49:30] *** Quits: sebcrozet (sebcrozet@moz-F96421F3.w80-13.abo.wanadoo.fr) (Quit: sebcrozet)
[11:49:56] *** Quits: summerlight_ (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[11:56:15] *** Quits: Valtis (Valtis@moz-7A6DF574.kymp.net) (Ping timeout)
[11:56:32] *** Joins: Valtis (Valtis@moz-7A6DF574.kymp.net)
[11:59:37] *** Joins: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net)
[12:01:04] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[12:02:11] *** Joins: wting (wting@E31B3884.E538DA90.20F09BA6.IP)
[12:02:59] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[12:04:00] *** Quits: ecl3ctic (Mibbit@moz-E1FAD64C.wzfv1.vic.bigpond.net.au) (Quit: http://www.mibbit.com ajax IRC Client)
[12:04:16] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Client exited)
[12:04:37] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[12:05:08] *** Joins: lenstr (lenstr@D88D273E.9636F313.7A27613B.IP)
[12:15:49] *** Quits: scriptdevil (scriptdevi@3216D6EC.B8DB306.8B6C1D65.IP) (Ping timeout)
[12:26:38] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[12:27:58] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[12:27:58] *** Joins: int3_ (int3_@D36F42D.83793537.D1416617.IP)
[12:28:43] *** Quits: lenstr (lenstr@D88D273E.9636F313.7A27613B.IP) (Client exited)
[12:29:05] *** Joins: lenstr (lenstr@D88D273E.9636F313.7A27613B.IP)
[12:29:47] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Ping timeout)
[12:29:47] *** Quits: lenstr (lenstr@D88D273E.9636F313.7A27613B.IP) (Connection reset by peer)
[12:30:03] *** Joins: lenstr (lenstr@D88D273E.9636F313.7A27613B.IP)
[12:33:46] *** Joins: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[12:34:54] * skrylar continues to <3 git for opt installs
[12:35:13] <skrylar> removing outdated rusts is just a rebase away
[12:36:20] <Tobba> does the compiler have the ability to combine enums to minimize space?
[12:36:48] <skrylar> Tobba: combine enums?
[12:36:51] <Tobba> like, if I make two enums, will it try to combine them into a single value
[12:36:57] <Tobba> if there are bits leftover somewhere
[12:37:02] <skrylar> No.
[12:37:14] <skrylar> Two values within the same enum, it will use the space of the largest variant IIRC
[12:37:23] <skrylar> (tag + data, because an enum is a tagged union)
[12:37:33] <skrylar> Two separate enums, it will not secretly merge together
[12:37:57] <Tobba> yeah uh
[12:38:02] <Tobba> I basicaly need it to combine the tags
[12:38:08] <skrylar> are you making a bitfield?
[12:38:11] <Tobba> this structure needs to be as small as possible
[12:38:17] <Tobba> but I want to keep it using safe code
[12:38:45] <dbaupp> it can't safely combine tags, because you could take a reference into the inner one
[12:38:50] <dbaupp> s/into/to/
[12:38:52] *** Quits: Deewiant (deewiant@moz-C015B7F8.iki.fi) (Ping timeout)
[12:39:13] <skrylar> If you don't care which bits are set, you can use extra::EnumSet to store your flags as a single bitfield set and combine the enums yourself 
[12:39:13] <Tobba> ah
[12:39:32] <Tobba> making an R-B tree
[12:39:37] <Tobba> not a normal R-B tree though
[12:39:47] <Tobba> it relies on blocks of nodes packed into a single page as a big block
[12:40:08] <skrylar> yeah, unfortunately safety goes out the window when special needs kick in :)
[12:40:17] <skrylar> fortunately you can bury the unsafety within a tested class
[12:40:17] <Tobba> hahahaha
[12:40:20] <Tobba> I have a better idea actually
[12:40:45] <skrylar> you could make an enum with both enums as possible values, and write a generic that combined them
[12:40:46] <Tobba> I can dodge most unsafety, I think
[12:40:51] <skrylar> all though you still have to deal with bit manips
[12:41:19] *** Joins: vgeddes (vincent.ge@moz-4C6314FC.dsl.mweb.co.za)
[12:41:20] *** Quits: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de) (Quit: Leaving.)
[12:42:39] *** Joins: mib_3yxgo8 (Mibbit@moz-3B6D895F.dip0.t-ipconnect.de)
[12:43:10] <Tobba> I think I partially nailed it
[12:43:23] <Tobba> partially, of course
[12:43:30] *** Joins: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de)
[12:44:50] *** Joins: Ferreus (ferreus@moz-7966CC5D.pools.arcor-ip.net)
[12:46:17] *** Quits: Valtis (Valtis@moz-7A6DF574.kymp.net) (Ping timeout)
[12:46:54] *** Joins: Valtis (Valtis@moz-7A6DF574.kymp.net)
[12:49:21] *** Quits: lenstr (lenstr@D88D273E.9636F313.7A27613B.IP) (Ping timeout)
[12:49:27] *** Quits: Valtis (Valtis@moz-7A6DF574.kymp.net) (Ping timeout)
[12:49:51] *** Joins: Valtis (Valtis@moz-7A6DF574.kymp.net)
[12:52:03] *** Quits: kvanb (kvanb@moz-25C48B43.lns11.lon.bigpond.net.au) (Ping timeout)
[12:52:16] *** Quits: LRN (LRN@moz-50DF30B.nationalcablenetworks.ru) (Ping timeout)
[12:55:16] *** Joins: bachm (Mibbit@moz-4A19983C.ip227.fastwebnet.it)
[12:55:42] *** Quits: mib_3yxgo8 (Mibbit@moz-3B6D895F.dip0.t-ipconnect.de) (Quit: http://www.mibbit.com ajax IRC Client)
[12:55:43] *** Joins: kvanb (kvanb@moz-8A43FA87.lnse5.lon.bigpond.net.au)
[12:57:04] *** Joins: scriptdevil (scriptdevi@3216D6EC.B8DB306.8B6C1D65.IP)
[12:58:46] *** Quits: int3_ (int3_@D36F42D.83793537.D1416617.IP) (Ping timeout)
[12:59:31] <bachm> is it too late to suggest name changes to std functions?
[12:59:44] *** Joins: autra (augustin@moz-BE76895F.fbx.proxad.net)
[13:01:02] *** Quits: Valtis (Valtis@moz-7A6DF574.kymp.net) (Ping timeout)
[13:01:12] <dbaupp> bachm: no
[13:01:30] *** Joins: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org)
[13:01:35] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[13:01:49] *** Joins: Valtis (Valtis@moz-7A6DF574.kymp.net)
[13:02:03] *** Quits: DasIch (dasich@moz-5EDA591.de) (Ping timeout)
[13:03:19] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[13:03:30] *** Quits: Valtis (Valtis@moz-7A6DF574.kymp.net) (Ping timeout)
[13:03:58] *** Quits: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de) (Quit: Leaving.)
[13:04:08] *** Joins: Valtis (Valtis@moz-7A6DF574.kymp.net)
[13:04:24] *** Parts: Valtis (Valtis@moz-7A6DF574.kymp.net) ()
[13:09:42] *** Joins: fabiand (fabiand@moz-1CD2837F.adsl.alicedsl.de)
[13:10:02] *** Quits: scriptdevil (scriptdevi@3216D6EC.B8DB306.8B6C1D65.IP) (Quit: leaving)
[13:10:03] *** Joins: LRN (LRN@moz-22E3F71.nationalcablenetworks.ru)
[13:13:29] *** Quits: LRN (LRN@moz-22E3F71.nationalcablenetworks.ru) (Connection reset by peer)
[13:13:46] <pyon> I want to add a new method to MutexArc<Foo> (for some concrete struct Foo). However, if I add an "impl MutexArc<Foo>", suddenly the generic methods for "MutexArc<T>" are unavailable. Is there any way around this?
[13:16:02] *** Joins: LRN (LRN@moz-22E3F71.nationalcablenetworks.ru)
[13:17:51] <geal> pyon: you could create a new trait that applies to MutexArc<Foo>, I think
[13:19:03] <FreeFull> New trait would probably be best
[13:20:03] *** Joins: mleise (marco@moz-850E56A9.pools.arcor-ip.net)
[13:20:03] *** Quits: LRN (LRN@moz-22E3F71.nationalcablenetworks.ru) (Connection reset by peer)
[13:21:47] *** Joins: LRN (LRN@moz-22E3F71.nationalcablenetworks.ru)
[13:23:05] <Tobba> woo
[13:23:07] <Tobba> I figured out how to pack it
[13:27:29] <FreeFull> Safely?
[13:28:17] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[13:28:31] <bjz> Posted niko's presentation to HN - https://news.ycombinator.com/newest - it's really good (the strobing on the slides is a little headache inducing though)
[13:29:44] *** Quits: dapz (textual@moz-F958911.hsd1.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[13:30:02] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Ping timeout)
[13:30:10] <Tobba> I think so
[13:30:18] <Tobba> if I can couple the lifetimes of the overlying struct, then yes
[13:30:31] <Tobba> as safely as "memory allocator allocating its own structs" gets
[13:32:09] *** Quits: LRN (LRN@moz-22E3F71.nationalcablenetworks.ru) (Ping timeout)
[13:32:32] *** Joins: int3_ (int3_@D36F42D.83793537.D1416617.IP)
[13:32:55] *** Joins: LRN (LRN@moz-50DF30B.nationalcablenetworks.ru)
[13:36:25] *** Joins: new_one (new_one@338D8DF9.4C461BEC.59A381B9.IP)
[13:38:24] *** Joins: twi (Adium@moz-AFBE9690.pa.vic.optusnet.com.au)
[13:38:38] *** Quits: twi (Adium@moz-AFBE9690.pa.vic.optusnet.com.au) (Quit: Leaving.)
[13:38:50] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[13:40:49] *** Joins: canhtak (canhtak@moz-DB18D73D.wl.t.ulaval.ca)
[13:41:51] *** Joins: gwty_ (gwtypc@17C8B8C7.AD96D6D0.137C914F.IP)
[13:42:00] <Matthias247> What's the difference between pub mod otherfile; mod otherfile; ?
[13:42:16] <Matthias247> and "mod otherfile;" I meant
[13:43:11] <Matthias247> expected that pub mod would import everything declared there directly at my current module. But apparantlly it does the same as without pub
[13:43:56] <dbaupp> Matthias247: `pub` controls what people outside your current module can see
[13:44:09] <Matthias247> so to do sth. like a simple C include I would have to do add a pub use myfile::* -> but this is feature gated
[13:44:16] *** Quits: int3_ (int3_@D36F42D.83793537.D1416617.IP) (Client exited)
[13:44:40] <dbaupp> `pub mod foo;` lets other modules see and import `foo`; `mod foo;` they can't.
[13:44:40] *** Joins: int3_ (int3_@D36F42D.83793537.D1416617.IP)
[13:44:57] <dbaupp> yes, globs are the way to import everything from a module
[13:45:14] <kimundi> minus the pub in front of the use
[13:45:41] <kimundi> Basically, you got the system completely backwards ;)
[13:46:17] <Matthias247> what I want is an api that is externally exposed through a single module, because otherwise it's really akward to use. But I do want to split the implementation in multiple files
[13:46:32] *** Quits: int3_ (int3_@D36F42D.83793537.D1416617.IP) (Ping timeout)
[13:46:38] *** Quits: LRN (LRN@moz-50DF30B.nationalcablenetworks.ru) (Ping timeout)
[13:46:59] <kimundi> ah, then pub use is the right thing to do - you write your library with different modules, and then add one public module that pub uses everything
[13:47:14] <Matthias247> so as far as I understand pub use otherfile::*; mod otherfile; is the way to go.
[13:47:53] <kimundi> yes, if your goal is to only expose all public names in otherfile;
[13:47:59] <Matthias247> but with the ::* feature gated it doesn't seem a good thing. But repeating each definition from the included files is also cumbersome
[13:48:13] *** Joins: LRN (LRN@moz-50DF30B.nationalcablenetworks.ru)
[13:49:02] <kimundi> (As an pedantic aside, equating Rusts modules with files is uneccessary - there is no different between a module that is defined in the same file or one that is defined in another)
[13:49:09] *** Joins: wsen (Mibbit@5B3E0FCE.BF69A53E.20F09BA6.IP)
[13:49:22] <Tobba> hm
[13:49:41] <Tobba> yep I think I've actually sort of got this
[13:49:44] <Matthias247> yes, but I want multiple files because it's way more navigatable than a 1 10kloc file
[13:50:01] <kimundi> Matthias247: well, * is feature gated because there are bugs with it (private things becoming public, public things not visible etc) - explicitly listing everything is the safe bet
[13:50:02] *** Joins: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr)
[13:50:04] <wsen> Hi body, i have a question: after upgrading to 0.9, i can't find "rust" command, i use the homebrew version
[13:50:47] <Matthias247> I can't agree to this sentence from the tutorial: "One important aspect about Rusts module system is that source files are not important: " --> Because earch source file automatically creates a module. Whether you want it or not
[13:51:04] <kimundi> Matthias247: Sure, I did not mean that you should not use files - just that Rusts module system is only defined in terms of modules, not in terms of files
[13:51:34] <dbaupp> Matthias247: there is `include!(some_file)` which doesn't create a module
[13:51:57] <kimundi> wsen: The rust tool got removed because of lack of maintenance, and because there is not yet enough additional tooling to warant its existence seperate from rustc
[13:52:23] <kimundi> dbaupp: It doesn't create definitions either :P
[13:52:30] <dbaupp> Matthias247: oh, maybe it's `include!("some_file.rs")`
[13:52:33] <kimundi> include! just expands to a string literal
[13:52:36] <Matthias247> dbaupp: ah, thxs. Haven't seen that documented.
[13:52:37] <dbaupp> kimundi: no
[13:52:41] <kimundi> No?
[13:52:43] <dbaupp> kimundi: that's include_str
[13:52:48] <dbaupp> and include_bin
[13:52:49] <kimundi> Huh
[13:52:55] <Matthias247> any drawbacks to use it?
[13:53:03] <dbaupp> not well supported
[13:53:05] <wsen> kimundi: thanks! i am new to rust, so i should use rustc ? compile then run?
[13:53:15] <dbaupp> (e.g. kimundi is an experienced rust user and hasn't heard of it)
[13:53:16] * kimundi 's memory is hazy
[13:53:36] <kimundi> wsen: yes
[13:53:46] <Matthias247> not well supported or not well documented or not often used? :)
[13:53:56] * dbaupp wonders what happens on `include!("a.rs")` inside a.rs
[13:54:00] <Matthias247> not well supported would mean for mean that it doesn't work all the time
[13:54:00] *** Quits: victorporof (victorporo@5EC92F85.71368607.9B1E38F4.IP) (Quit: victorporof)
[13:54:01] <dbaupp> Matthias247: all 3
[13:54:02] <kimundi> Matthias247: You should not use include!() if you can express it with the module system
[13:54:04] <wsen> kimundi: ah, ok, thanks again
[13:54:11] <dbaupp> (as in, it probably has weird bugs.)
[13:55:09] <Matthias247> is it planned to fix the glob imports? Then I think I will go that way
[13:55:16] <kimundi> Matthias247: Its just a rare feature for that one special case where you need it, like a lot of features of systems languages :P
[13:55:33] <kimundi> Matthias247: Undecided - they might get fixed, they might get removed
[13:55:56] <kimundi> Matthias247: Ône problem is that thy can break your code if you upgrade a library that you glob imported from
[13:55:59] *** Quits: hiker13526 (hiker@moz-FF139BF3.ca.yorkinet.com) (Ping timeout)
[13:56:24] *** Joins: hiker13526 (hiker@moz-FF139BF3.ca.yorkinet.com)
[13:56:35] <Matthias247> I would use it only to import submodules in my own code into the main module
[13:56:36] *** Joins: Chillectual (RJones@moz-E6F82C3A.maine.res.rr.com)
[13:56:50] *** Chillectual is now known as LinearInterpol
[13:56:52] <kimundi> (Though I personally think that could be solved by extending glob imports to allow specify a exclude list)
[13:56:53] *** Joins: sedman (sedman@E4D2F0A.47298EC7.57E8EAD3.IP)
[13:56:59] *** Joins: blank_na1e (blank_name@7D3AA8DE.3C877FC9.53C6B850.IP)
[13:57:14] *** Joins: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de)
[13:57:30] *** Joins: jadbaires (jadrian@B338873B.2E7B5617.6119BA41.IP)
[13:57:38] *** Quits: blank_name (blank_name@C5C84EB0.9E887BEB.53C6B850.IP) (Ping timeout)
[13:58:01] <dbaupp> kimundi: I think the main problem is they make the name resolution algorithm undecidable (apparently)
[13:58:12] <Matthias247> I think repeating definitions is really not the way to go. That's the thing that already annoys in C headers
[13:58:57] <kimundi> dbaupp: I can not claim to know this stuff, but I can not imagine how that could be the case
[13:59:30] <Matthias247> or even worse. I just discovered if you declare an enum in your submodule you have to pub use all subvariants of that
[13:59:31] <dbaupp> kimundi: talk to pcwalton
[13:59:34] <dbaupp> but apparently it does
[13:59:49] <dbaupp> (possibly only when combined with `super` and `self` though)
[14:00:20] <kimundi> Heh, even then I don't see a difference to just enumerating all public things :P
[14:01:39] <dbaupp> what happens when you are glob importing in a cycle?
[14:02:07] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[14:02:21] <dbaupp> `mod foo { pub use self::bar::*; pub mod bar { pub use self::baz::*; pub mod bar { pub use foo::*; } } }` 
[14:02:26] <dbaupp> etc etc.
[14:02:39] * dbaupp doesn't exactly understand it either
[14:03:05] <Matthias247> should result in an error ;)
[14:03:50] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[14:04:26] *** Quits: achim (achim@moz-88EC5B9B.dip0.t-ipconnect.de) (Quit: Computer has gone to sleep.)
[14:05:15] *** Quits: jadbaires (jadrian@B338873B.2E7B5617.6119BA41.IP) (Ping timeout)
[14:05:26] *** Quits: fabiand (fabiand@moz-1CD2837F.adsl.alicedsl.de) (Quit: Verlassend)
[14:06:40] *** Quits: wsen (Mibbit@5B3E0FCE.BF69A53E.20F09BA6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:07:14] <kimundi> dbaupp: Well, that's exactly analogue to importing in a cycle without *, so I don't see how that is *s fault :P
[14:07:34] <kimundi> Besides, last I tested it worked
[14:07:58] *** Joins: achim (achim@moz-88EC5B9B.dip0.t-ipconnect.de)
[14:08:17] <kimundi> I had foo::bar, foo::baz::foo::bar, foo::baz::foo::baz::bar all pointing at the same thing and working :P
[14:08:32] <dbaupp> kimundi: that doesn't look like a cycle?
[14:09:03] <kimundi> dbaupp: Maybe I'm misreading your code there
[14:09:14] <dbaupp> kimundi: the last one is importing from the top level
[14:09:23] <dbaupp> the first two are importing from their children
[14:09:49] *** Quits: negge (unlord@moz-5BD795E6.hsd1.va.comcast.net) (Ping timeout)
[14:10:10] <kimundi> If two imports end up pointing at each other recursivly, then that should a) be a compile eroor, and b) no different than not using * and naming the things directly that lead to a cycle
[14:10:12] <dbaupp> kimundi: (in any case, pcwalton does have a little experience with rustc ;P and did write the majority of resolve so he's probably not saying this lightly.)
[14:10:18] *** Quits: LRN (LRN@moz-50DF30B.nationalcablenetworks.ru) (Ping timeout)
[14:11:05] <kimundi> I know, I tried asking him multible times - the answer usually was "look at resolve, I don'T rember the exact rules" , which did not realy help me understand :P
[14:11:32] *** Joins: LRN (LRN@moz-50DF30B.nationalcablenetworks.ru)
[14:11:45] <kimundi> I mean, if it does not work thats fine, I just haven'T been able to read or get an explanation of why
[14:13:18] *** Quits: LRN (LRN@moz-50DF30B.nationalcablenetworks.ru) (Ping timeout)
[14:13:20] *** Joins: LRN (LRN@moz-50DF30B.nationalcablenetworks.ru)
[14:13:34] *** Joins: Florob (Florob@moz-39532932.de)
[14:13:35] <kimundi> In my simplified model of rusts module system, there is the canonical tree of module declarations, and then arbitrary links between nodes that you can create with "use" and "pub use" - which has exactly one failure mode, the cyyclic import, and globs have zero to do with it...
[14:14:06] <kimundi> Anyway, gonna watch nmatsakis presentation now :P
[14:14:13] *** Joins: negge (unlord@moz-5BD795E6.hsd1.va.comcast.net)
[14:14:16] *** Quits: gwty (gwtypc@17C8B8C7.AD96D6D0.137C914F.IP) (Ping timeout)
[14:14:37] *** Quits: gwty_ (gwtypc@17C8B8C7.AD96D6D0.137C914F.IP) (Ping timeout)
[14:14:57] *** Joins: gwty (gwtypc@17C8B8C7.AD96D6D0.137C914F.IP)
[14:15:02] *** Quits: LRN (LRN@moz-50DF30B.nationalcablenetworks.ru) (Ping timeout)
[14:15:37] *** Joins: gwty_ (gwtypc@17C8B8C7.AD96D6D0.137C914F.IP)
[14:15:50] *** Joins: LRN (LRN@moz-50DF30B.nationalcablenetworks.ru)
[14:16:03] *** Joins: Deewiant (deewiant@moz-C015B7F8.iki.fi)
[14:16:20] *** Quits: darthdeus (darthdeus@62EE3073.3B96A244.4E88690D.IP) (Quit: Leaving...)
[14:16:29] <dbaupp> does anyone feel like microoptimising the triemap iterator?
[14:18:47] <Ms2ger> You? :)
[14:19:43] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[14:19:44] *** ChanServ sets mode: +ao dherman dherman
[14:19:56] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[14:20:46] *** Joins: bheylin (brianheyli@moz-8255E94E.adsl.online.nl)
[14:22:39] <dbaupp> Ms2ger: you're volunteering? awesome!
[14:23:08] *** Joins: eddyb (eddy@EDE07015.D51DAF03.FB866788.IP)
[14:23:54] <Tobba> watched that whole presentation
[14:23:55] <Tobba> that was good
[14:24:26] *** Quits: bheylin (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin)
[14:26:12] *** Quits: gwty (gwtypc@17C8B8C7.AD96D6D0.137C914F.IP) (Ping timeout)
[14:26:12] *** Quits: gwty_ (gwtypc@17C8B8C7.AD96D6D0.137C914F.IP) (Ping timeout)
[14:27:05] <skrylar> oh joy
[14:27:18] <skrylar> upgraded compiler, now i get personality errors
[14:27:59] <Tobba> there is some psychiatric joke to make here
[14:28:23] *** Joins: jadbaires (jadrian@B338873B.2E7B5617.6119BA41.IP)
[14:28:37] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[14:28:41] <skrylar> well i have the old working build on hand, so it sounds like some derp that got introduced
[14:30:17] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Ping timeout)
[14:30:24] *** Joins: james (jdeng@moz-6548813B.blktn6.nsw.optusnet.com.au)
[14:31:10] <james> Hi, as single-field tuple-structs can no longer be dereferenced, what is the recommended way to replace legacy code?
[14:31:57] <james> Pattern match always works, but any other concise alternatives?
[14:33:15] <dbaupp> james: the concisest is to repace struct Foo(bar); with `struct Foo { x: bar }` and just use `.x`
[14:33:19] * skrylar guesses its time to git-bisect
[14:33:30] <dbaupp> (i.e. `*self` => `self.x`
[14:33:30] <dbaupp> )
[14:33:37] <kimundi> james: Or write a method that does the pattern match internally#
[14:33:52] <kimundi> And just returns the inner value/returns a reference to it
[14:34:05] <FreeFull> Then you have extra () though
[14:34:26] <james> When the field is not named, like "struct Unit(int)"?
[14:35:27] <james> dbaupp: self.x is concise.
[14:35:35] *** Quits: hiker13526 (hiker@moz-FF139BF3.ca.yorkinet.com) (Ping timeout)
[14:35:50] <Tobba> is there any way to derive structs from eachother yet
[14:36:12] <klutzy> skrylar: maybe `make clean` helps?
[14:37:11] *** Joins: xarcus (Mibbit@945922DB.8264761A.5AD57FDE.IP)
[14:40:22] *** Quits: LRN (LRN@moz-50DF30B.nationalcablenetworks.ru) (Ping timeout)
[14:40:22] *** Joins: LRN1 (LRN@moz-50DF30B.nationalcablenetworks.ru)
[14:40:24] <james> If the field is not named, "self._" refers to the single filed. This is cool I think.
[14:41:01] <james> I mean, if the compiler supports this.
[14:41:30] *** Quits: xarcus (Mibbit@945922DB.8264761A.5AD57FDE.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:41:44] *** Quits: jadbaires (jadrian@B338873B.2E7B5617.6119BA41.IP) (Quit: Konversation terminated!)
[14:41:50] *** Joins: jadbaires (jadrian@B338873B.2E7B5617.6119BA41.IP)
[14:42:07] *** Quits: LRN1 (LRN@moz-50DF30B.nationalcablenetworks.ru) (Ping timeout)
[14:42:21] *** Joins: LRN (LRN@moz-50DF30B.nationalcablenetworks.ru)
[14:42:50] *** Joins: DasIch (dasich@moz-5EDA591.de)
[14:43:20] *** Quits: jadbaires (jadrian@B338873B.2E7B5617.6119BA41.IP) (Quit: Konversation terminated!)
[14:43:26] *** Joins: jadbaires (jadrian@B338873B.2E7B5617.6119BA41.IP)
[14:45:05] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Client exited)
[14:45:08] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[14:47:24] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[14:47:26] <Tobba> why does it want me to put a lifetime on a *?
[14:47:30] *** Quits: LRN (LRN@moz-50DF30B.nationalcablenetworks.ru) (Ping timeout)
[14:48:19] <Tobba> actaully wait, fuck
[14:48:22] <nielsle> Tobba not yet http://smallcultfollowing.com/babysteps/blog/2013/10/24/single-inheritance/
[14:48:30] *** Joins: LRN (LRN@moz-50DF30B.nationalcablenetworks.ru)
[14:48:58] <Tobba> ugh
[14:49:11] <Tobba> I have this LABlock structure which has a method name root()
[14:49:22] <Tobba> which returns a borrow of one of its nodes, which is inside of anrray
[14:49:23] <FreeFull> > struct Foo(u8); (Foo(3))._
[14:49:26] <Tobba> I cant get the lifetimes to work nicely
[14:49:29] <FreeFull> rusti: struct Foo(u8); (Foo(3))._
[14:49:36] <FreeFull> No rusti D:
[14:51:02] *** Quits: LRN (LRN@moz-50DF30B.nationalcablenetworks.ru) (No route to host)
[14:51:15] *** Joins: LRN (LRN@moz-50DF30B.nationalcablenetworks.ru)
[14:51:50] <Tobba> doing it like so
[14:51:52] <Tobba> impl<'a> LABlock<'a> {
[14:51:52] <Tobba> 	pub fn root(&self) -> &'a LANode {
[14:52:01] <Tobba> and root() returns &self.nodes[127]
[14:52:10] <Tobba> it says it cant infer a lifetime though
[14:52:27] <dbaupp> what type is nodes?
[14:52:35] <Tobba> nodes: [LANode, ..255],
[14:53:07] <dbaupp> so the lifetime of that pointer is connected to the lifetime of the actual value `self`, sicne it's stored unboxed in `self`.
[14:53:26] <Tobba> not sure how to solve that though
[14:53:27] <dbaupp> i.e. `fn root<'b>(&'b self) -> &'b LANode` would work
[14:53:30] <Tobba> ah
[14:54:04] <Tobba> I always have issues with lifetimes, think I'm starting to figure them out though
[14:57:02] <Tobba> I need to make it mutable too
[14:57:09] <Tobba> it doesnt seem to let me do that
[14:58:02] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Quit: Leaving.)
[14:58:07] <kimundi> &'b mut self) -> &'b mut LANode
[14:58:12] <Tobba> oh
[14:58:44] <kimundi> Though if your intention is to be able to mutably lend out more than one LANode at the time, it gets a bit more complicated
[14:58:56] <Tobba> it isnt
[14:59:12] <kimundi> Then this is enough :)
[15:00:05] <Tobba> I basicaly have a red black tree where the node color is kept by the parent
[15:00:12] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[15:00:23] <Tobba> and then theres a hilarious amount of unsafety involved, oh boy
[15:01:06] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[15:01:57] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[15:02:41] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[15:04:30] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[15:10:11] *** Quits: wilkie (wilkie@moz-A19F104D.pitbpa.fios.verizon.net) (Connection reset by peer)
[15:10:39] <Tobba> wait, can the parens around a match be dropped?
[15:11:04] *** Quits: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[15:11:28] <rca> around the thing that's matched ? yup.
[15:11:38] *** Quits: james (jdeng@moz-6548813B.blktn6.nsw.optusnet.com.au) (Quit: james)
[15:11:40] <Tobba> aw yeah
[15:11:45] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[15:11:56] <rca> just like with if statements btw.
[15:12:07] <Tobba> wait, now I'll have to go over all my code and remove useless parens just out of OCD
[15:12:10] <Tobba> damnit
[15:12:15] <rca> %s/
[15:12:19] <rca> :)
[15:12:22] <Tobba> eh, also works
[15:12:49] <Tobba> using tuple matches for this is going to rock
[15:13:24] * rca is wondering what the match for this would look like...
[15:13:28] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[15:14:04] <Tobba> http://pastebin.com/8KBUzg1z
[15:14:27] <rca> i meant the match in the search and replace
[15:14:31] <Tobba> oh
[15:14:33] <rca> hehe
[15:14:38] <Tobba> I dont think you can regex it
[15:14:56] <Tobba> you'd have to be able to handle nested parens
[15:14:59] <rca> never say that to a perl dev
[15:15:04] <rca> :D
[15:15:06] <Tobba> oh god
[15:15:29] *** Quits: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de) (Quit: Leaving.)
[15:15:37] <rca> (not that i am one, just a friendly advice)
[15:15:53] *** Quits: avsej (avsej@D9A610B8.4841F515.FB33447D.IP) (Ping timeout)
[15:15:57] <Tobba> red-black trees are hard
[15:15:59] <Tobba> goddamn
[15:16:06] *** Quits: bachm (Mibbit@moz-4A19983C.ip227.fastwebnet.it) (Quit: http://www.mibbit.com ajax IRC Client)
[15:16:09] <whitequark> I once wrote an HTML parser with ruby's regexps
[15:16:09] <Tobba> well, when you're searching them in a unique way, they are
[15:16:24] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Input/output error)
[15:16:28] <whitequark> it took it about two minutes to parse a 70-character document
[15:16:32] *** Joins: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca)
[15:16:37] <Tobba> hahahahaha
[15:16:45] <Tobba> I'm curious how it managed to become that slow
[15:16:59] <whitequark> backtracking
[15:17:09] <whitequark> unless memoized, it had exponential complexity
[15:17:57] <rca> Tobba: about your RB tree, is it performance critical? otherwise using Rc and Weak might make it easier.
[15:18:06] <Tobba> its the mem allocator
[15:18:19] <rca> oh, maybe better to optimize it then.
[15:18:19] <Tobba> its performance critical and it allocates its own memory for its structures
[15:18:45] *** Joins: avsej (avsej@D9A610B8.4841F515.FB33447D.IP)
[15:18:46] <rca> that sounds hard, you're bootstrapping it?
[15:19:04] <Tobba> this actually leads to a messy situation where the thing finds an optimal spot, but it has to allocate a new block, so it recurses with one size bigger than it needs
[15:19:13] <Tobba> and uses the extra space to put the block in
[15:19:21] <Tobba> bootstrapping?
[15:19:25] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[15:19:48] *** Quits: FreeFull (freefull@moz-5700401D.as13285.net) (Ping timeout)
[15:19:49] <Tobba> the allocator struct itself contains a block
[15:20:00] <Tobba> so it can do ~255 allocs without needing to do any allocs
[15:20:15] <rca> well if your allocator needs to allocate on a heap, i'd just write a simple best-fit allocator, then write the real allocator using the first one.
[15:20:27] <rca> it's easier.
[15:20:42] <Tobba> not sure how that'd even work
[15:20:43] <rca> well i'm lazy so.
[15:20:49] <rca> how so?
[15:20:52] <Tobba> you'd basicaly have to make the second allocator work together with the first one
[15:21:04] <Tobba> unless the best fit one cant free?
[15:21:07] <rca> ha, yes use to separate heaps.
[15:21:20] <Tobba> I've got one that cant free
[15:21:22] <rca> s/to/two
[15:21:31] <rca> why couldn't it free?
[15:21:32] <Tobba> which is used to bootstrap the system before the allocators are up
[15:21:43] <Tobba> it just packs everything linearly at a fixed address
[15:21:54] <Tobba> since the info required to boot up the actual allocator will remain there forever
[15:22:05] <Tobba> its mostly just internal structures for the CPU
[15:22:42] <Tobba> separate heaps IS an interesting idea though
[15:22:48] <rca> if you don't *need* it to free, then sure that's fine. But i meant for your RB-tree, i'm pretty sure you're gonna free some nodes from time to time.
[15:22:59] *** Joins: FreeFull (freefull@moz-3E0AAA7E.as13285.net)
[15:23:07] <Tobba> I can free nodes just fine
[15:23:10] <Tobba> though
[15:23:16] <rca> you are writing a kernel right ?
[15:23:19] <Tobba> yeah
[15:23:28] <Tobba> inserting new blocks gets *insanely* messy
[15:23:36] <Tobba> since that means it needs to insert two nodes
[15:23:55] <Tobba> and my experience with RB trees isnt exactly top
[15:24:01] <eddyb> Tobba: my Slam rewrite in Rust is generic over another allocator
[15:24:25] <Tobba> yeah I actually had an idea
[15:24:38] <Tobba> two separate heaps, one only being capable of allocating tiny objects
[15:24:42] <Tobba> is basicaly what I need
[15:24:49] <Tobba> or well
[15:24:53] <Tobba> bitmap allocator with like 32 byte blocks
[15:25:37] <rca> yeah, well i would use several allocators with several heaps. Or better a global allocator that you can use to allocate big chunck of memory (think mmap), and then you can write differents custom allocators that manages thos heap according to your need. Slub, buddy, etc..
[15:26:08] <eddyb> Tobba: and the one I've been using is a dumb linear allocator (4MB of preallocated space IIRC) with an atomic position update
[15:26:17] *** Joins: Cevn (sameer@moz-84053B42.hsd1.va.comcast.net)
[15:26:29] <Tobba> yeah I've already got one of those
[15:26:44] <eddyb> Tobba: I could stack a Slam on top of a Slam, but it's silly because it allocates multiples of a page
[15:27:00] <Tobba> its only used during init though, calls to it are invalid after the main allocator is initialized
[15:27:23] <eddyb> why not use it as backing storage?
[15:27:26] <Tobba> the idea is to also reuse the allocator for applications
[15:27:31] <Tobba> since it operates on pages anyways
[15:28:06] <eddyb> (I might replace the generic base Allocator interface with something page-sized. a bitmap would allow it to free pages)
[15:28:11] * Ms2ger takes out his slammers
[15:28:14] * Ms2ger gets all the pogs
[15:29:04] <eddyb> Tobba: the C++ version doesn't actually reclaim memory, it just adds nodes to a free list
[15:29:10] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[15:29:27] <Tobba> heh
[15:29:39] <Tobba> I actually plan on building an allocator ontop of this one though
[15:32:29] <eddyb> Tobba: the idea with Slam is to reclaim pages that have only free nodes (and you can do this in idle time, since it's slightly more expensive than the very simple free)
[15:33:38] <skrylar> Ms2ger: ... pogs
[15:33:47] <skrylar> I remember those.
[15:34:24] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[15:34:39] <eddyb> the C++ version has a few problems and it's clunkier. I realized that one could abuse the overlap of the next pointer position (in a free node) and the cache instance pointer (in an allocated node) to check whether a node is allocated or not
[15:35:05] *** Joins: mohawk (Mibbit@moz-A392ED1B.ip-addr.inexio.net)
[15:35:16] *** Quits: mohawk (Mibbit@moz-A392ED1B.ip-addr.inexio.net) (Quit: http://www.mibbit.com ajax IRC Client)
[15:36:05] <skrylar> nope, that build is broken
[15:36:15] <skrylar> undefined linkage to cxx_personality in the stdlib
[15:36:18] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[15:36:50] *** Joins: Blub\1 (wry@620605B3.71150E1A.237AE2BA.IP)
[15:36:57] *** Quits: Blub\0 (wry@620605B3.71150E1A.237AE2BA.IP) (Ping timeout)
[15:37:25] *** Joins: bheylin (brianheyli@moz-8255E94E.adsl.online.nl)
[15:37:35] *** Joins: int3_ (int3_@6647F17C.C24D7B6A.EC6C369A.IP)
[15:38:09] <skrylar> dbaupp / eddyb: have you heard of this issue?
[15:38:26] <eddyb> skrylar: make clean tends to fix such problems
[15:38:36] <skrylar> eddyb: that wouldn't help :)
[15:38:44] *** Joins: nkoep (nik@moz-4CB0191F.pool.mediaways.net)
[15:39:05] <skrylar> i used git rebase to delete the existing install, git clean -df to wipe all build artifacts, clean build, installed on it
[15:39:37] <Tobba> oh god this is getting rediclous
[15:39:38] <skrylar> wiped artifacts in both the test project and the compiler
[15:39:45] <eddyb> skrylar: I don't know more than that. actually, cxx_personality shouldn't appear anywhere, I remember seeing a custom Rust eh_personality
[15:39:57] <Tobba> its used in the stack unwinder
[15:39:59] <skrylar> eddyb: i'm currently running it through bisect :/
[15:40:05] <Tobba> just FYI
[15:40:14] <eddyb> Tobba: what is?
[15:40:14] <skrylar> I have a "good" build which I was already using, so i had that as the bisect good target
[15:40:19] <eddyb> Tobba: ah nvm
[15:40:20] <Tobba> gcc_personality stuff
[15:40:29] <skrylar> unfortunately it takes an hour to do a full build ._.
[15:40:34] <eddyb> we're not using stdc++ anymore fwiw
[15:40:45] <eddyb> skrylar: full? as in, stage2?
[15:40:48] *** Quits: vgeddes (vincent.ge@moz-4C6314FC.dsl.mweb.co.za) (Input/output error)
[15:40:54] <skrylar> eddyb: ./configure && make && make install
[15:40:58] <skrylar> from nothing
[15:41:06] <eddyb> *cough* *cough*
[15:41:17] <dbaupp> skrylar: do you have ccache?
[15:41:22] <skrylar> dbaupp: negative
[15:41:26] <dbaupp> https://github.com/mozilla/rust/wiki/Note-ccache
[15:41:35] <dbaupp> makes rebuilding LLVM much much faster
[15:41:37] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[15:41:40] <eddyb> skrylar: make rustc-stage1 is recommended for quick(er) testing
[15:42:37] <skrylar> luckily i still have a copy of the "good" binaries
[15:43:31] *** Joins: jzcz (nick@moz-95A8D512.rb2.lax.centurytel.net)
[15:44:03] <Tobba> argh
[15:44:08] <Tobba> this tree search is gonna get gigantic
[15:44:31] <skrylar> :<
[15:44:33] *** Joins: gwty (gwtypc@17C8B8C7.AD96D6D0.137C914F.IP)
[15:44:56] *** Joins: gwty_ (gwtypc@17C8B8C7.AD96D6D0.137C914F.IP)
[15:45:12] *** Joins: dapz (textual@moz-F958911.hsd1.ca.comcast.net)
[15:45:23] <eddyb> Tobba: still thinking a tree is a good idea :P?
[15:45:24] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[15:45:33] <Tobba> it is a good idea
[15:45:35] <Tobba> I think
[15:45:37] <Tobba> possibly
[15:45:38] <Tobba> theoretically
[15:45:45] <Tobba> its just that the code is a shitfest
[15:45:45] <skrylar> what are you trying to use trees on
[15:45:49] <skrylar> oh
[15:46:03] <skrylar> shitfests are a sign you are copypasting things that could be put in generics. lol
[15:46:22] <Tobba> hahahaha
[15:46:22] <Tobba> sorta
[15:46:31] <Tobba> its just because theres like 4 unique cases
[15:46:32] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[15:46:36] <Tobba> which all use a crapload of code
[15:46:49] <skrylar> are those optimizations or edge cases?
[15:46:52] <Tobba> though only two of them are actually complicated
[15:46:53] *** Quits: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP) (Ping timeout)
[15:46:56] <Tobba> edge cases really
[15:47:04] <skrylar> bleh, hate those
[15:47:05] *** Quits: dapz (textual@moz-F958911.hsd1.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[15:47:06] <Tobba> they're all handled differently except for one part
[15:47:12] <skrylar> especially since i don't know how to do code coverage on rust
[15:47:17] <Tobba> which I can make generic'ish anyways
[15:47:22] <Tobba> thanks to that match is an expression
[15:48:06] *** Joins: dapz (textual@moz-F958911.hsd1.ca.comcast.net)
[15:48:37] *** Joins: a_m0d|home (a_m0d@moz-322A4DE4.acanac.net)
[15:48:47] <Tobba> the worst part is that getting the left/right nodes is complex as hell
[15:48:58] *** Joins: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de)
[15:49:02] <Tobba> they can either be in the same block, or they can be in another block
[15:49:24] <Tobba> if they're in the same block you need to know where in the block you are
[15:49:28] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[15:49:51] <skrylar> 191-lines of boilerplate \o/ woohoo
[15:50:13] <Tobba> to get the left you need to do pos/2, right is pos/2+pos+1
[15:50:18] <Tobba> pain in the ass to track all that
[15:50:29] <skrylar> inline generic?
[15:50:36] <Tobba> I think I'll use tuples
[15:50:37] <Tobba> so like
[15:50:43] <skrylar> actually i'm not sure if its smart enough to inline matches like that
[15:50:46] *** Quits: dapz (textual@moz-F958911.hsd1.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[15:51:08] <Tobba> (block, pos, left) = block.left(pos)
[15:51:18] <Tobba> ughhhhhh
[15:51:20] *** Joins: dapz (textual@moz-F958911.hsd1.ca.comcast.net)
[15:51:21] <skrylar> thats a lot of return values
[15:51:32] <Tobba> it can be inlined though
[15:51:33] <Tobba> so its fine
[15:51:56] *** Quits: ienh (user@moz-F3A1CBB9.lsanca.dsl-w.verizon.net) (Quit: leaving)
[15:52:00] *** Quits: dangets (dangets@moz-E9E4A77B.cpe.cableone.net) (Ping timeout)
[15:52:30] *** Quits: Kxepal (Miranda@moz-D214BAA1.pppoe.mtu-net.ru) (Ping timeout)
[15:52:41] <skrylar> hrm
[15:52:48] *** Joins: Kxepal (Miranda@moz-33D0A42F.pppoe.mtu-net.ru)
[15:52:54] * skrylar ponders if result or fail is better here...
[15:53:03] <skrylar> probably fail, because if clearing the screen fails you're in a panic anyway
[15:53:21] *** Quits: tupshin (quassel@moz-E7B03838.c3-0.nyr-ubr1.nyr.ny.cable.rcn.com) (Ping timeout)
[15:53:22] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[15:53:25] <skrylar> it's not like asset loading where you could reasonably expect a different action to be desired
[15:53:28] *** Quits: dapz (textual@moz-F958911.hsd1.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[15:53:58] *** Joins: darthdeus (darthdeus@moz-6556EDDE.eurotel.cz)
[15:54:40] *** Joins: Liam` (quassel@6265EFB3.B1CCF5AA.217C7FCC.IP)
[15:55:01] <Tobba> I hope I wont need to keep a parent pointer
[15:55:05] <Tobba> if I can dodge that then thank fuck
[15:55:43] <skrylar> shouldn't you know if you'll need to do that o_O
[15:55:59] <skrylar> also you don't need a parent pointer in the tree if you only need the parent when visiting
[15:56:32] <Tobba> I dont have much experience with R-B trees
[15:56:45] <Tobba> basicaly: recipe for disaster
[15:56:45] *** Quits: darthdeus (darthdeus@moz-6556EDDE.eurotel.cz) (Ping timeout)
[15:56:47] <skrylar> I don't think those need parent pointers because you aren't accessing the middle of the tree directly
[15:56:50] *** Joins: eatkinson (eatkinson@moz-C52156BC.dsl.bell.ca)
[15:56:52] <skrylar> kind of like trie's
[15:57:29] <Tobba> http://pastebin.com/HQyz667F
[15:57:32] <Tobba> this is what I've got right now
[15:57:35] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[15:57:37] <Tobba> the first case isnt even in yet, and its the most complex
[15:58:01] <Tobba> wait shit, the third ones linearRight None match is wrong
[15:58:04] * skrylar mumbles about not unit testing first xD
[15:58:22] <skrylar> admittedly i don't test first, but i do test when i'm not 100% confident in a function
[15:58:30] <skrylar> or if it does something i know i'm prone to botch
[15:58:57] * skrylar needs to write some tips on how to do that in rust, but i feel infinitely busy lately x.x
[15:59:45] *** Joins: dapz (textual@moz-F958911.hsd1.ca.comcast.net)
[16:00:36] *** Joins: darthdeus (darthdeus@moz-6556EDDE.eurotel.cz)
[16:02:11] *** Joins: jpoirier (jpoirier@moz-150F5176.dhcp.ftwo.tx.charter.com)
[16:02:11] *** Quits: jpoirier_ (jpoirier@moz-150F5176.dhcp.ftwo.tx.charter.com) (Connection reset by peer)
[16:02:12] <Tobba> match best_fit(size, match linearLeft { Some(node) => (node.pos + node.size) - cursor.pos, None => 0 }, match linearRight { Some(node) => (cursor.pos + cursor.size) - node.pos, None => (cursor.pos + cursor.size) - self.space }) {
[16:02:15] <Tobba> "please kill me"
[16:02:15] *** Quits: dapz (textual@moz-F958911.hsd1.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[16:02:34] *** Joins: dangets (dangets@moz-E9E4A77B.cpe.cableone.net)
[16:02:48] <Tobba> actually the second match can be made a wee bit smaller
[16:02:59] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[16:03:18] *** Joins: jpoirier_ (jpoirier@moz-150F5176.dhcp.ftwo.tx.charter.com)
[16:03:18] *** Quits: jpoirier (jpoirier@moz-150F5176.dhcp.ftwo.tx.charter.com) (Connection reset by peer)
[16:03:44] *** Joins: mib_ma4k7h (Mibbit@moz-8CA209A.cust.bluewin.ch)
[16:03:46] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[16:04:46] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[16:04:59] *** Quits: mib_ma4k7h (Mibbit@moz-8CA209A.cust.bluewin.ch) (Quit: http://www.mibbit.com ajax IRC Client)
[16:06:57] *** Quits: LRN (LRN@moz-50DF30B.nationalcablenetworks.ru) (Connection reset by peer)
[16:09:38] <eddyb> is there a push_all equivalent, taking an Iterator?
[16:10:32] <skrylar> Tobba: there's always the option to make one of the branch arms a function and inline it
[16:10:48] <skrylar> then it doesn't look as much like an unreadable morass
[16:10:49] <Tobba> yeah I got rid of most of those duplicate TODOs
[16:11:06] <cmr> eddyb: .extend
[16:11:25] <eddyb> cmr: sounds cool and underused
[16:11:51] <cmr> eddyb: it's plenty used by those in the know ;p
[16:12:09] <cmr> FromIterator is implemented in terms of it, frequently.
[16:12:47] *** Joins: LRN (LRN@moz-50DF30B.nationalcablenetworks.ru)
[16:13:12] <eddyb> cmr: inside rustc and syntax, it's used 3 times
[16:13:25] <cmr> neither of those were written when iterators existed.
[16:14:09] <eddyb> while push_all goes to 19 (and there's probably similarly ineffecient patterns around)
[16:14:44] <eddyb> cmr: didn't say they were. moar refactoring!
[16:14:54] <cmr> <3
[16:15:18] <skrylar> looks like the builds almost done
[16:15:33] *** Quits: dangets (dangets@moz-E9E4A77B.cpe.cableone.net) (Ping timeout)
[16:18:59] *** Quits: sigma (sigma@moz-BFB7A653.range86-143.btcentralplus.com) (Ping timeout)
[16:25:15] <LinearInterpol> I see the 0.9 tutorial still features "@".
[16:25:33] <LinearInterpol> Instead of Gc<T>?
[16:26:21] <bstrie> does it
[16:26:22] <bstrie> bleh
[16:26:40] <cmr> LinearInterpol: just ignore it, you won't lose anything
[16:26:47] <LinearInterpol> lol. cool.
[16:26:48] *** Quits: Cevn (sameer@moz-84053B42.hsd1.va.comcast.net) (Ping timeout)
[16:27:25] <kimundi> You're about the tenth person to remark that since the rease ;)
[16:27:36] <LinearInterpol> Sorry. :(
[16:28:06] <kimundi> I'm not sure what would be better - ripping them out now, or waiting till box, Rc and Gc would make for a better replacement for the text in general
[16:28:08] *** Joins: victorporof (victorporo@5EC92F85.71368607.9B1E38F4.IP)
[16:28:15] <kimundi> LinearInterpol: Ah, not your fault :P
[16:28:53] <SiegeLord> Why is 0b1e1 a valid float literal >_<
[16:29:21] *** Quits: bheylin (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin)
[16:29:48] <kimundi> ... good question
[16:29:58] <kimundi> is 10e5; a valid integer literal?
[16:30:02] <SiegeLord> Yes
[16:30:16] <kimundi> Well, then its alright: valid integerl literals are also valid float literals
[16:30:18] <SiegeLord> It's not actually parsed as that base either...
[16:30:28] <SiegeLord> 0b11e1 is 110 not 80
[16:30:31] <Matthias247> Hmm, is it correct that it is not possible to select on IO (e.g. TcpStream) - only on Chan?
[16:30:43] <SiegeLord> Or 16
[16:31:05] <kimundi> SiegeLord: Wait, which base does e use there? always 10, or the base of the literal?
[16:31:26] <SiegeLord> Rust does not have non-base-10 float literals
[16:31:38] <kimundi> I mean the exponent of the literal
[16:31:39] <SiegeLord> If it did, it'd use the base of the literal
[16:31:47] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[16:31:49] <SiegeLord> At least, that's how it works in C
[16:31:56] <SiegeLord> (it has hex float literals)
[16:32:03] <kimundi> Thats what I wanted to know - I'd expect a  'e' suffix to be aöways base 10
[16:32:25] <kimundi> and have a 'p' suffix for base 2
[16:32:34] <SiegeLord> Well either way, the mantissa is still base 10 despite the 0b suffix
[16:32:50] <kimundi> Which is fine
[16:32:51] <SiegeLord> That's why we need a spec... I don't know if this is a parser bug or a language bug :P
[16:33:02] <kimundi> I claim its neither
[16:33:05] <SiegeLord> I don't see how it's fine... 0b11 is not 11
[16:33:08] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[16:33:24] <SiegeLord> 0b1. is not parsed either
[16:33:54] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[16:34:15] <Tobba> does anyone know a good method to compute (a/3)*2 on integers
[16:34:26] <Tobba> (that works on numbers below 6)
[16:34:48] *** Joins: sigma (sigma@moz-9EAC972C.range86-184.btcentralplus.com)
[16:35:03] <SiegeLord> a*2/3 ?
[16:35:12] <SiegeLord> Wait, nvm
[16:35:15] <SiegeLord> Too early in the morning
[16:35:41] <Tobba> hahaha yeah
[16:35:55] <Tobba> a-a/3 doesnt really work either for < 3
[16:35:55] <Tobba> so ugh
[16:36:40] <kimundi> Tobba: Why does (a/3)*2 not work as is?
[16:36:55] <Tobba> below 6
[16:36:59] *** Joins: pzol (pzol@moz-553BEE64.dynamic.chello.pl)
[16:37:02] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[16:37:02] <Tobba> it gets different results than if it was a float and you floored it
[16:37:10] *** Quits: jzcz (nick@moz-95A8D512.rb2.lax.centurytel.net) (Quit: Konversation terminated!)
[16:37:15] *** Joins: jzcz (nick@moz-95A8D512.rb2.lax.centurytel.net)
[16:37:35] <kimundi> Okay, other question: which semantic do you want for both the / and * there? :P
[16:37:49] <Tobba> uh, actually, this whole equation is gonna get messy
[16:37:54] <Tobba> I think I might just go with a lookup table
[16:38:12] <kimundi> Just confused of wether you mean the abstract mathematical term (a/3)*2 or actual operators on a int type
[16:38:22] <Tobba> abstract mathematical term
[16:38:27] <Tobba> with only int operators
[16:38:30] <Matthias247> Guess it's not possible to do a reasonable websocket implementation with the current IO implementation :(
[16:38:34] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[16:38:39] <Tobba> (the result value is floored)
[16:39:13] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[16:39:23] <kimundi> (a*2u) / 3u // ?
[16:39:29] <Tobba> ... wait shit
[16:39:36] <Tobba> goddamnit kimundi
[16:39:40] <Tobba> I was looking at all kinds of stuff but missed the obvious
[16:39:46] <kimundi> haha
[16:39:52] <kimundi> :)
[16:40:06] <Matthias247> Either I could block to receive data in my task (but then would never be able to send) or I could focus on sending but not do any receiving
[16:40:08] *** Joins: kngl1 (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[16:40:10] <Tobba> I cant do that anyways sadly
[16:40:14] <kimundi> well, it breaks down if you expect a to ever become larger than MAXVALUE/2
[16:40:15] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Connection reset by peer)
[16:40:28] <Tobba> I need a lookup table, I think
[16:40:50] <Tobba> basicaly, each node has left at pos/2, right at pos/2+pos+1
[16:41:01] <cmr> Matthias247: open an issue.
[16:41:44] <Tobba> if you start at 127, you can go either 7 or 8 levels deep, cant remember which
[16:41:46] <Matthias247> cmr: i will do either that or write something about that on the mailing list
[16:41:47] <zxcdw> What sort of actions does one take to port a C++ library to Rust?
[16:41:53] <Tobba> they're all unique, and I need to do it in reverse
[16:42:28] <cmr> Matthias247: it's just a bug, not really worth an ml post?
[16:42:36] <kimundi> zxcdw: depends
[16:42:55] <kimundi> zxcdw: Its not going to be easy, because of different language semantics
[16:43:13] <skrylar> Matthias247: er, try_recv doesn't work on the channel?
[16:43:17] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Quit: Leaving.)
[16:43:30] <cmr> skrylar: TcpStream isn't a channel
[16:43:35] <skrylar> oh
[16:43:48] <skrylar> tcp
[16:44:18] <skrylar> i haven't messed with rust io; i know with berkeley sockets you can set a no-block flag to prevent blocking
[16:45:01] *** Quits: jzcz (nick@moz-95A8D512.rb2.lax.centurytel.net) (Ping timeout)
[16:45:29] <skrylar> ... shiver
[16:45:31] *** Joins: bheylin (brianheyli@moz-8255E94E.adsl.online.nl)
[16:45:39] <skrylar> i just remembered the guy who made a small scale MMO, using UDP
[16:45:47] <skrylar> and instead of a proper transmision control replacement, he just used
[16:45:47] <geal> skrylar: isn't that easier to put it in a task anyway? (maybe less efficient, though)
[16:45:51] <skrylar> 100.times { send packet }
[16:45:58] <geal> ouch
[16:46:11] <skrylar> we found out why some people's routers hated that game
[16:46:24] <skrylar> and why there were so many lag problems
[16:46:30] <skrylar> the client wasn't even trusted to run its own GUI
[16:46:31] <cmr> geal: it's not possible, since the read is going to block. you'll need two tasks, a sending andreceiving, but there's no way to clone a tcpstream
[16:47:03] *** Joins: jzcz (nick@moz-95A8D512.rb2.lax.centurytel.net)
[16:48:54] *** Quits: jzcz (nick@moz-95A8D512.rb2.lax.centurytel.net) (Ping timeout)
[16:49:09] <Matthias247> cmr: yep, that's the problem.
[16:49:39] <Matthias247> split send and receive would be an option or a select that works on both channels and IO
[16:50:13] <zxcdw> kimundi: but like, do I need to re-implement lots of stuff in Rust or is it more straightforward as providing function prototypes and such?
[16:50:51] <Matthias247> in classic blocking IO implementations you would use one dedicated thread for receiving and send in the main thread
[16:50:56] <cmr> zxcdw: depends on what you're using. will be fairly straightforward some of the time.
[16:50:56] <kimundi> zxcdw: Is your goal to port a library, or just writing and Rust interface to it?
[16:51:04] <skrylar> zxcdw: IIRC there is no linkage to C++ (there is no standard name mangling either, IIRC, because GCC and MSVC do their own sometimes)
[16:51:19] *** Joins: jzcz (nick@moz-F1598072.dyn.centurytel.net)
[16:51:20] <skrylar> zxcdw: so you have to wrap the C++ lib with C, write the bindings in rust, and then write a wrapper back over that
[16:51:33] <skrylar> unless you have a tool to do that for you, you will become very sad and bored :(
[16:51:38] <zxcdw> I'd just prefer to be able to provide Rust bindings for the library
[16:52:20] <Matthias247> if the library is small consider rewriting it completly in rust
[16:52:25] <cmr> well that's not porting :p
[16:52:31] <Matthias247> wrapping in C is really ugly
[16:52:33] <cmr> if it exposes a C interface, wrap that.
[16:52:37] <cmr> Elsewise, expose a C interface.
[16:52:46] <zxcdw> Ah yeah, my bad for sloppy wording :P
[16:52:49] <skrylar> there are a few ways of cheating though, like setting up Doxygen in specific ways to give you the .xml with minimal extra data and using something like Ruby+Nokogiri to do it 
[16:53:03] <skrylar> there was one C++ library that used doxygen's scanner to produce meta-data for reflection like that
[16:53:14] <geal> cmr: ok
[16:53:28] <geal> cmr: btw, I think I forgot about the build it break it contest, sorry
[16:53:31] <geal> wasn't it this week?
[16:53:49] <cmr> geal: it wasn't open for non-students of that university :(
[16:54:17] <geal> ok
[16:54:27] <geal> let's launch a non student contest then :p
[16:54:45] <cmr> I think their next versino of it will be, this one was just a "pilot"
[16:55:03] *** Joins: FliPPeh (lukas@moz-DE237B6E.dip0.t-ipconnect.de)
[16:55:20] *** Quits: LRN (LRN@moz-50DF30B.nationalcablenetworks.ru) (Connection reset by peer)
[16:55:32] *** Quits: pzol (pzol@moz-553BEE64.dynamic.chello.pl) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[16:55:53] *** Quits: autra (augustin@moz-BE76895F.fbx.proxad.net) (Ping timeout)
[16:56:03] *** Joins: dapz (textual@moz-F958911.hsd1.ca.comcast.net)
[16:56:12] *** Joins: LRN (LRN@moz-50DF30B.nationalcablenetworks.ru)
[16:56:20] <FliPPeh> I wonder, is there some kind of compile time reflection planned for Rust? As in, using a macro, will it eventually be possible to obtain a list of structure members and their types to generate code that, for example, serializes a structure to JSON?
[16:56:41] <FliPPeh> Something like D basically
[16:56:54] <kimundi> FliPPeh: Thats already kinda possible - though not in a general, user extendable way
[16:57:01] *** Quits: jzcz (nick@moz-F1598072.dyn.centurytel.net) (Ping timeout)
[16:57:13] <kimundi> But something like it would certainly be desirable
[16:57:20] <skrylar> IIRC eddyb said there will be
[16:57:30] <skrylar> in the form of being able to look at the AST from a macro
[16:57:30] *** Quits: dapz (textual@moz-F958911.hsd1.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[16:57:32] <FliPPeh> I think that would be the last feature missing that would make Rust my dream programming language
[16:57:46] <skrylar> i donno, if the syntax looked like smalltalk. :D
[16:58:16] <cmr> FliPPeh: we already have such reflection.
[16:58:17] <eddyb> skrylar: not a regular macro, but a procedural one (a syntax extension - rust code being compiled and ran on the AST)
[16:58:20] * skrylar might be an avid fan of Io's "not ugly lisp" syntax
[16:58:21] <FliPPeh> I like the syntax, althought I'm much more a fan of C's prefixed types than Go's postfixed type notation
[16:58:24] *** Joins: jzcz (nick@moz-4C262E7E.dyn.centurytel.net)
[16:58:24] <cmr> FliPPeh: However, we don't need reflection to do that.
[16:58:25] <FliPPeh> But that's a minor complaint
[16:58:29] <Tobba> ah shit, lifetimes again
[16:58:33] <skrylar> FliPPeh: earlier than go :)
[16:58:42] <skrylar> Pascal coined it, if I recall
[16:58:45] <cmr> FliPPeh: #[deriving(Encodable)] will create an implementation of serialization.
[16:59:03] <cmr> FliPPeh: our syntax comes from ML, not Go :)
[16:59:04] <FliPPeh> skrylar: I guesss I completely purged Pascal from my mind :D
[16:59:23] <skrylar> isn't there some weirdness where you can override encodable for specific types
[16:59:27] *** Joins: pzol (pzol@moz-553BEE64.dynamic.chello.pl)
[16:59:33] <skrylar> i thought i saw one of the msgpack libraries doing something like that
[16:59:35] <Matthias247> cmr: seems like there is already an issue: https://github.com/mozilla/rust/issues/11165
[16:59:44] <FliPPeh> cmr: Okay, that'd solve a particular instance of serialization, but a generic compile time reflection would be so much more flexible
[16:59:54] <Tobba> gotta love when you mess up something and just get a gigantic two terminal wall of errors
[17:00:04] <skrylar> Tobba: compile early and often :(
[17:00:14] <Tobba> * usually caused by one thing
[17:00:20] <cmr> FliPPeh: We have syntax extensions for that.
[17:00:26] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[17:00:27] <cmr> FliPPeh: Soon to be loadable.
[17:00:28] <Tobba> in this case lifetimes tend to generate massive amounts
[17:00:35] * skrylar commits habitual save/compile and routine git commit'ing to private branches
[17:00:46] <geal> oh, I didn't know about Encodable. Nice!
[17:00:49] <skrylar> sometimes on complex trees i just commit every time something doesn't crash
[17:00:55] <skrylar> er, complex code
[17:01:03] *** Joins: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr)
[17:01:07] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[17:01:35] <skrylar> well this is progress; now instead of total failure the compiler just gives me derpy "could not unwind stack error 5" 
[17:01:37] <cmr> skrylar: no, that msgpack just provides an Encoder/Decoder
[17:01:51] <skrylar> i thought i saw it implement encodable distinctly
[17:02:12] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[17:02:27] <FliPPeh> I guess I should just start some pet project with Rust, maybe by the time I'm proficient with it, I'll have my full compile time reflection based code generation :D
[17:02:28] <skrylar> oh, no
[17:02:33] <Tobba> ughhhhh
[17:02:37] <Tobba> I've got matches all over the place
[17:02:40] *** Joins: pepper_chico (pepper_chi@E3C2E286.D158355F.F546FA5F.IP)
[17:02:41] <skrylar> i have it on my todo's to look in to the Encoder trait
[17:02:42] <Tobba> and this value gets moved into a match
[17:02:45] *** Quits: darthdeus (darthdeus@moz-6556EDDE.eurotel.cz) (Quit: Leaving...)
[17:02:49] *** Quits: Ferreus (ferreus@moz-7966CC5D.pools.arcor-ip.net) (Quit: WeeChat 0.4.2)
[17:02:53] <skrylar> i need to support it in my own msgpack v5 lib
[17:03:22] <cmr> FliPPeh: again, we already have it. although it's not over types. by the time type information is known it's too late to add code to the AST
[17:03:28] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[17:03:41] <eddyb> cmr: I considered something like the TyVisitor, but with compile-time monomorphization - that might allow implementing Encodable/Decodable in the library. but they can't replace the visit_glue which needs to go through trait pointers :(
[17:03:43] <FliPPeh> aw :(
[17:03:46] <cmr> but usually you don't need it
[17:03:51] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[17:03:52] <kimundi> Tobba: Usually adding a few 'ref' keyword helps in those cases :) - of course if you actually want to move values in that match, you properly need greater refactoring
[17:03:53] <cmr> type inference does a lot of the heavy lifting
[17:03:54] <eddyb> generics <3
[17:03:56] <skrylar> i'm wondering how insane that AST is, because i keep hearing "we can't do it because its too late in the AST"
[17:04:00] <Tobba> where should I add it
[17:04:02] <skrylar> all though haxe does allow this...
[17:04:04] <Tobba> the compiler tells me to add it but not where
[17:04:05] <cmr> (deriving doesn't have any types)
[17:04:09] <geal> whenever I don't know if something is safe, the compiler just tells me: "error: transmute called on types with different sizes" (once it gets to the phase where it checks this stuff, after I solve the type problems)
[17:04:11] <cmr> skrylar: it isn't?
[17:04:50] <skrylar> cmr: well IIRC haxe macros work the same way, you compile them outside the source and they can alter the ast, and i seem to recall them being able to type-inspect structures
[17:05:06] <kimundi> The main problem is that the Rust compiler runs in separate phases, and the devs are reluctant to mix them together
[17:05:15] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[17:05:26] <Tobba> kimundi: where should I use the ref keyword
[17:05:33] <kimundi> The macro expansion phase runs befor the typecheck and module resolve phase, so you can'T use their features
[17:05:43] <skrylar> kimundi: i guess that keeps it simpler... all though having macros and then kneecapping macros is a vague bit pointless
[17:05:47] <pepper_chico> guys, I've asked about this yesterday, anyone knows whether there're ongoing efforts (from mozilla or who knows) based on this: "GPU Programming in Rust: Implementing High Level Abstractions in a Systems Level Language" (http://www.cs.indiana.edu/~eholk/papers/hips2013.pdf)
[17:06:06] <cmr> skrylar: it doesn't kneecap them, they're still insanely useful.
[17:06:22] <skrylar> yeah but a lisper is still going to be accustomed to doing anything they want with them
[17:06:36] <cmr> is lisp typed? :)
[17:06:41] <kimundi> Tobba: Okay, I assume that you have the problem that in a match arm like "(foo, _) => ... " the compiler complains that your moving foo. If you change it to "(ref foo, _) => ...", you get a reference to the value instead, which will not move
[17:06:42] <cmr> pepper_chico: no
[17:06:42] <skrylar> whereas rust macros (at least currently) can't even be used to automate Lua wrapping, because concat_idents! is busted
[17:06:54] <eddyb> kimundi: did I finish explaining how I can do generators in syntax extensions?
[17:07:03] <skrylar> (admittedly you can, but you have to put in a lot of extra symbol names that uglify the macro call)
[17:07:04] <cmr> skrylar: ok, that's a specific bug with concat_idents that is going to be fixed.
[17:07:21] <skrylar> cmr: still have to provide the function signature in that case
[17:07:21] <cmr> pauls already has an action plan for it.
[17:07:23] <pepper_chico> cmr, there isn't? =/ you know why? was the idea dropped?
[17:07:29] <skrylar> because the macro can't check the types 
[17:07:45] <kimundi> eddyb: No, but I don't have the concentration for doing that right now :P
[17:08:20] <eddyb> kimundi: the worst part is parsing, IMO. you can have statements inside expressions, you need to somehow "sneak in" some code before parsing each statement
[17:08:49] <skrylar> laptop time. my desk chair is killing me
[17:08:51] <klutzy> pepper_chico: seems that the source is https://github.com/eholk/RustGPU
[17:08:52] *** skrylar is now known as skry|afk
[17:08:56] <eddyb> if you let Parser run on the token tree, it will hit "yield" and fatal
[17:09:06] *** Joins: synackse (jordyd@moz-5289C68.jax.bellsouth.net)
[17:09:10] *** Quits: eatkinson (eatkinson@moz-C52156BC.dsl.bell.ca) (Quit: eatkinson)
[17:09:10] <pepper_chico> klutzy, ah, interesting
[17:09:17] <cmr> pepper_chico: he moved on to other things afaik
[17:09:24] <pepper_chico> =(
[17:09:34] <cmr> specifically https://github.com/eholk/harlan
[17:10:00] <pepper_chico> sad, great guys leaving rust
[17:10:20] <pepper_chico> I'm affraid microsoft is doing sabotage
[17:10:25] <pepper_chico> =D
[17:10:32] <kimundi> eddyb: SUre, you can use a parse that parses it like Rust code, but knows about yield, and then try to transform the code in a mechanical way that ends up with a struct or enum containing all local variables between each yield segemnt. At that point you need to know what type they are though...
[17:10:54] <Tobba> kimundi: oh god it became worse
[17:11:01] <kimundi> Tobba: haha
[17:11:18] <kimundi> Tobba: Did that at least fix errors?
[17:11:22] <klutzy> eholk still contributes to rust
[17:11:24] <Tobba> it made a shitload of new ones
[17:11:35] <Tobba> I've got an idea though
[17:11:52] <klutzy> but as you may expect, code-for-paper is usually not maintained after publish :p
[17:12:11] <cmr> I wonder if his lambda calculus interpreter still works
[17:12:14] * cmr looks for it
[17:12:24] <cmr> (it was implemented using only macros)
[17:12:27] *** Joins: Cevn (sameer@moz-84053B42.hsd1.va.comcast.net)
[17:12:41] *** Joins: Ferreus (ferreus@moz-7966CC5D.pools.arcor-ip.net)
[17:13:03] <Tobba> kimundi: I successfully filled my terminal buffer with errors
[17:13:10] <eddyb> kimundi: I'm afraid there would be a lot of code duplication. the local variables part is easy - you make them generic
[17:13:25] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[17:13:46] *** Joins: dev14 (devarshdes@moz-4EB22C7B.san.res.rr.com)
[17:14:11] *** Quits: synackse (jordyd@moz-5289C68.jax.bellsouth.net) (Quit: synackse)
[17:14:12] <eddyb> so inference works, the Iterator::next implementation shouldn't be generic. solution? put it in a closure
[17:14:14] *** Quits: Cevn (sameer@moz-84053B42.hsd1.va.comcast.net) (Ping timeout)
[17:14:23] *** Joins: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net)
[17:15:02] *** Joins: synackse (jordyd@moz-5289C68.jax.bellsouth.net)
[17:15:07] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Ping timeout)
[17:15:09] <eddyb> that makes it even more obvious how it's related to unboxed closures
[17:15:26] *** Quits: Jesin (Jesin@moz-4B662E55.washdc.fios.verizon.net) (Quit: Leaving)
[17:15:37] <kimundi> eddyb: Then we're at the point again where I don't see how that help. :P If you write that down somewhere as a proper proposal to mull over, it would probably be better for me understand.
[17:16:05] <kimundi> Tobba: What errors?
[17:16:24] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[17:16:25] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[17:16:25] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[17:17:04] <Tobba> I think I'm just doing this wrong
[17:17:17] <cmr> https://github.com/mozilla/rust/issues/3201#issuecomment-10746176
[17:17:21] <Tobba> basicaly I have a match that either just returns the function, or gives back a pointer to a node node to set the cursor to
[17:17:32] *** Parts: dev14 (devarshdes@moz-4EB22C7B.san.res.rr.com) ()
[17:17:45] <Tobba> though this isnt a very good idea anyways since the linear pointers need to converge, so I'll slap it in an enum
[17:17:51] <Tobba> is it possible to define an enum inside of a function?
[17:18:09] <cmr> Tobba: yes
[17:18:21] <cmr> all items can be defined inside of functions.
[17:18:30] <cmr> except, I think, static mut.
[17:18:55] <Tobba> even functions?
[17:18:59] <cmr> especially functions
[17:19:02] <Tobba> fuck yes
[17:19:52] *** Quits: bbodi (Mibbit@moz-77CC3D67.pool.digikabel.hu) (Quit: http://www.mibbit.com ajax IRC Client)
[17:21:56] *** Quits: jpoirier_ (jpoirier@moz-150F5176.dhcp.ftwo.tx.charter.com) (Quit: Bye!)
[17:21:57] *** Joins: ptc (Adium@moz-192425C4.nyc.res.rr.com)
[17:21:59] <SiegeLord> Do we indent match arms only 2 spaces in rustc code?
[17:22:03] *** Joins: jhasse (jhasse@moz-999AD28C.ewe-ip-backbone.de)
[17:22:07] <cmr> SiegeLord: no, full 4 spaces.
[17:22:18] *** Joins: darthdeus (darthdeus@moz-6556EDDE.eurotel.cz)
[17:22:19] *** Joins: glaebhoerl (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[17:22:22] <cmr> at least that's the current style, might be old code hanging aroudn somewhere
[17:22:24] <SiegeLord> What if the file does so anyway... do I mimic the file?
[17:22:29] <adridu59> r? https://github.com/mozilla/rust/pull/11477
[17:23:27] *** Joins: vodik (simon@moz-35088AE9.dsl.bell.ca)
[17:23:49] <kimundi> SiegeLord: Fix it up to use 4
[17:23:59] <SiegeLord> Fix what up
[17:24:04] <SiegeLord> The file or my added code
[17:24:47] <eddyb> kimundi: magic. I'm working on other things, though. ok, here's an attempt: generator!(g()->int{let x=f(); yield x;}) -> fn g() -> ~Iterator<int> {enum S<Tx>{S0, S1{x:Tx}} impl<Tx> Iterator<int> for (S<Tx>, |&S<Tx>|->(S<Tx>, Option<int>)) {fn next(&mut self) {let &(ref mut s, go) = self; let (next, r) = go(s); *s = next; r}} ~(S0, |s| match *s {S0 => {let x = f(); (S1{x: x}, Some(x))} S1{x} => (S1{x: x}, None)}) as ~Iterator<int>}
[17:25:09] <eddyb> wow, that fits on one line. it's a bit silly, in perspective
[17:25:18] <kimundi> SiegeLord: I think the best course of action would be to not change anything for your added code, and then have a seperate commit that adjusts the intendation of the surrounding code or the whole file to 4 spaces
[17:25:43] <kimundi> eddyb: So its returning a ~Iterator<T> ?
[17:25:59] <eddyb> kimundi: containing a closure with an inferred type
[17:26:18] <kimundi> And that is the end result? A trait object that calls a closure?
[17:26:35] <eddyb> the state could be a capture of an unboxed closure and then it's obvious
[17:26:54] <kimundi> Becuase two virtual calls will be unacceptable slow...
[17:26:57] <eddyb> kimundi: it can be optimized if all the types are provided
[17:27:05] <eddyb> no, there would be only one virtual call, that to the Iterator
[17:27:12] <kimundi> Slow :P
[17:27:41] <eddyb> that's why we need the fancy return type thing
[17:28:11] <kimundi> And that's why I think this solution is unworkable, as it requires modifying the language for this one feature :P
[17:28:26] <cmr> well no, it's not just this one feature.
[17:28:59] <cmr> glaebhoerl's proposal is actually quite elegant I think
[17:29:18] *** Quits: FliPPeh (lukas@moz-DE237B6E.dip0.t-ipconnect.de) (Quit: Lost terminal)
[17:29:20] <kimundi> WHat is that about?
[17:29:24] *** Quits: darthdeus (darthdeus@moz-6556EDDE.eurotel.cz) (Quit: Leaving...)
[17:29:30] <eddyb> kimundi: unboxed closures are bigger than this. and by implementing generators with closures it's obvious that you can use something intented for unboxed closures (which we want) to make generators work nicely
[17:29:40] <cmr> https://github.com/mozilla/rust/issues/11455
[17:29:53] *** Quits: KindOne (KindOne@moz-B749DB92.dynamic.ip.windstream.net) (Ping timeout)
[17:31:04] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Ping timeout)
[17:31:19] <eddyb> cmr: I like that :D
[17:32:26] <eddyb> it makes type checking relatively painless (no API-level inferrence that people are scared about) while allowing anonymous types
[17:32:32] *** Quits: ptc (Adium@moz-192425C4.nyc.res.rr.com) (Quit: Leaving.)
[17:32:55] *** Quits: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org) (Ping timeout)
[17:33:04] *** Joins: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP)
[17:33:08] *** Joins: darthdeus (darthdeus@moz-6556EDDE.eurotel.cz)
[17:33:30] *** Joins: KindOne (KindOne@moz-E7657D88.dynamic.ip.windstream.net)
[17:34:26] *** Quits: heftig (heftig@moz-3C2728A9.dip0.t-ipconnect.de) (Input/output error)
[17:34:30] <pepper_chico> well, that harlan language seems an interesting effort, although it would be nice to have the same on rust =/
[17:34:40] *** Joins: heftig (heftig@moz-3C2728A9.dip0.t-ipconnect.de)
[17:35:08] <kimundi> Okay, let me reformulate: Under the _assumption_ we won't get return type inference on the API level, it seems to me that generator syntax will not be able to run at at syntax expansion time, and should just take the name of the to-be-generated type directly. In case where we _get_ return type inference on API level, I have nothing to say, as it invalidates enough assumptions and knowledge I have about the Rust design to make useful statem
[17:35:08] <kimundi> ents.
[17:35:19] <luz> pepper_chico, the author of harlan experimented with gpu computing in rust iirc
[17:35:47] <luz> oh, this was probably already covered sorry
[17:36:25] <pepper_chico> yeah it was
[17:36:27] <kimundi> In other words, I'm just talking about the best solution for adding generators without changing anything else of the language
[17:36:39] *** Quits: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[17:37:00] <eddyb> kimundi: unboxed closures don't require API-level *inference*
[17:37:24] <eddyb> the type is not inferred, it's just anonymous and expressed in terms of implementing a trait
[17:37:30] <kimundi> Never claimed that
[17:37:44] <eddyb> (in the linked proposal, that is)
[17:38:01] *** Joins: lassej (lassej@moz-839695BF.dip0.t-ipconnect.de)
[17:38:10] <kimundi> Wel, maybe I claimed it - as I said I can not make useful statements about hypothetical features that I don'T full understand
[17:38:26] <eddyb> kimundi: it would be literally just removing the ~ from ~Iterator<T>, in my implementation, if that proposal gets implemented
[17:38:46] <eddyb> (and the cast to ~Iterator<T>)
[17:39:26] <SiegeLord> Is there a syntax to go from an unboxed closure to a boxed on?
[17:39:31] <SiegeLord> *one
[17:39:41] <eddyb> SiegeLord: as we don't have unboxed closures yet, no
[17:39:52] <SiegeLord> Well, is there one proposed
[17:39:52] *** Quits: synackse (jordyd@moz-5289C68.jax.bellsouth.net) (Quit: synackse)
[17:40:02] <kimundi> eddyb: And everything I learned from lurking in this channel for over half an year tells me this is not possible without invalidating core design decision of the language - and I'll only be properly convinced if a core dev disagrees with me there :P
[17:40:29] <eddyb> kimundi: that is easy, summon pcwalton
[17:40:40] <kimundi> For what its worth, I know that unboxed closures are planned and will be useful, but think there is a distinction there - I may well be wrong
[17:40:58] <eddyb> SiegeLord: it would probably be a cast (or a coercion) from a type implementing Fn to &Fn
[17:41:12] <SiegeLord> Sounds good
[17:42:25] *** Quits: kngl1 (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Quit: Leaving.)
[17:42:32] *** Joins: lurk_ (chatzilla@moz-F088D030.hsd1.in.comcast.net)
[17:44:21] <cmr> kimundi: The nice thing about Gabor's proposal is that it *doesn't* break typing.
[17:44:30] <cmr> It's not unlimited, it still has a specific type.
[17:44:38] <cmr> Except that type happens to be a trait
[17:44:55] <cmr> (it's also a DST, I don't know how it will interact with it)
[17:45:38] *** Joins: Skrylar (Skrylar@moz-F692F728.austin.res.rr.com)
[17:45:38] <cmr> or, it's not a DST, since the function still needs to return a concrete type...
[17:46:01] <glaebhoerl> cmr: that's not how I would phrase it. from outside the function it's assumed to be _some anonymous type_ that impls the trait. from inside the function it's a specific type.
[17:46:05] *** Quits: jzcz (nick@moz-4C262E7E.dyn.centurytel.net) (Quit: Konversation terminated!)
[17:46:09] <cmr> yes.
[17:46:10] *** Joins: jzcz (nick@moz-4C262E7E.dyn.centurytel.net)
[17:46:14] <glaebhoerl> I used to think it might be related to DST too, but I no longer do
[17:46:16] <cmr> I misspoke.
[17:46:20] *** Joins: Gloomz (io@2F40E326.8D39CEA4.24D545EA.IP)
[17:46:27] <cmr> or, I didn't misspeak, I was just wrong :P
[17:46:44] *** Quits: sedman (sedman@E4D2F0A.47298EC7.57E8EAD3.IP) (Ping timeout)
[17:46:56] <glaebhoerl> :)
[17:47:06] <Gloomz> hi all. can anybody tell me how much disk space is required to build Rust?
[17:47:14] <cmr> Gloomz: 2.1G
[17:47:20] <Gloomz> thanks
[17:48:22] *** Joins: synackse (jordyd@moz-5289C68.jax.bellsouth.net)
[17:49:00] <glaebhoerl> (fwiw I think DST-as-such is just wrong too, and I want to write up a detailed SST-based proposal, but I still have some questions I need to figure out before I can do that...)
[17:51:08] *** Parts: Gloomz (io@2F40E326.8D39CEA4.24D545EA.IP) ()
[17:51:28] <kimundi> See, my argument is basically that its not useful to propose a feature if it builds on not-yet existing other language features - especially if the subject is disputed and discussed since many months...
[17:51:32] *** Quits: darthdeus (darthdeus@moz-6556EDDE.eurotel.cz) (Ping timeout)
[17:51:37] *** Joins: Jesin (Jesin@moz-4B662E55.washdc.fios.verizon.net)
[17:51:49] <SiegeLord> I want to make a test for a parsing failure... except that the compiler aborts after the first one it sees. Do I need to make lots of test files for it?
[17:52:03] <kimundi> SiegeLord: Well, yeah
[17:52:23] <eddyb> kimundi: I can make generators work without the return thing, that's sort of an optimization. all I'm waiting on is syntax extensions
[17:52:50] <eddyb> by no means am I proposing generator support in rust itself
[17:53:13] <kimundi> eddyb: But if that optimization neer gtes implemented, then your work was for nothing, because generators that use virtual calls will be too slow...
[17:53:31] *** Joins: hdima (Mibbit@F0354C75.67925389.76FD8EA4.IP)
[17:54:04] <eddyb> kimundi: I did mention this, maybe not in detail: if all locals have explicit types, then the generator can return a concrete type instead
[17:54:42] <eddyb> don't make me less excited about my magic trick :P
[17:54:53] *** Quits: vodik (simon@moz-35088AE9.dsl.bell.ca) (Connection reset by peer)
[17:55:12] <lassej> I'm getting an error in my test program: type `~Sub::TheSub` does not implement any method in scope named `output`
[17:55:19] <lassej> https://gist.github.com/anonymous/8374274
[17:55:38] <kimundi> Okay, maybe I just misunderstood the core idea behind what you're where talking about - I assumed you're talking about implementing generators in the Rust language using a syntax-expansion-phase only approach. If its just about implementing it as a syntax extension in general for fun, and for maybe usefulness later, without it being a actual language feature, then don't let me stop you. :|
[17:56:11] <lassej> when implementing a trait for a type that's in a module and trying to call that method from outside
[17:56:38] <kimundi> eddyb: Yeah, if you require explicit typing on locals, then it really might be possible easily :)
[17:57:05] <kimundi> Actually, that wouldn't even be that bad a restriction....
[17:57:28] <eddyb> kimundi: depends. for loops have inference that you can't override
[17:57:31] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[17:58:07] <kimundi> ANd then returning ~Iterator<T> or a struct becomes basically a few lines difference in the implementation :P
[17:58:25] <SiegeLord> Maybe it's a good candidate for a #[test] function inside lexer.rs...
[17:58:34] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[17:58:36] *** Quits: synackse (jordyd@moz-5289C68.jax.bellsouth.net) (Quit: synackse)
[17:58:37] *** Joins: pnkfelix (pnkfelix@70A6E7A1.55ADD344.4C2245EF.IP)
[17:58:40] *** Quits: pnkfelix (pnkfelix@70A6E7A1.55ADD344.4C2245EF.IP) (Input/output error)
[17:59:55] <kimundi> eddyb: yeah, but you can just reject the code and require the user to rebind the values with explicit types.
[18:00:13] <kimundi> Or bann for sugar completly
[18:00:17] <eddyb> wait a second. can't we allow r/foo/ as valid syntax?
[18:00:30] <kimundi> eddyb: for what?
[18:00:55] <hdima> Is there a way to create a static fixed-size vector at compile time the same way as with std::vec::from_fn?
[18:01:17] <eddyb> kimundi: for regexp support. I mean, it would be just a raw string with different quotes (outside of a regexp context)
[18:01:21] <kimundi> hdima: Nope - need initialize it with values manuyll by writing them all out
[18:01:39] <glaebhoerl> eddyb: how would you distinguish it from the division operator?
[18:01:54] <kimundi> eddyb: I think that would run into the problem of / being the division operator, and r and foo possible being values :P
[18:01:55] <eddyb> glaebhoerl: derp, nvm, I'll keep thinking about it
[18:02:00] *** Quits: pepper_chico (pepper_chi@E3C2E286.D158355F.F546FA5F.IP) (Quit: Ex-Chat)
[18:02:02] <hdima> kimundi: OK, thanks
[18:02:20] <eddyb> JS has some funny parsing issues because automatic semicolon insertion and regexp parsing depending so much on sorrounding context
[18:03:23] *** Joins: pepper_chico (pepper_chi@E3C2E286.D158355F.F546FA5F.IP)
[18:03:42] <eddyb> I was hoping I can have an alternative syntax for r"...". /foo/ would work in Rust, but I wouldn't dare to propose something that simple
[18:04:00] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[18:04:02] <eddyb> r#/foo/#? a bit eww
[18:04:21] <cmr> why do we need regex literals.
[18:04:26] <Ms2ger> r\/foo\/
[18:05:44] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[18:06:10] <eddyb> cmr: that's why I want some kind of literals that work nicely with regex without looking targeted
[18:06:26] <cmr> I really don't think such a pursuit it worthwhile.
[18:06:33] <cmr> regex aren't going to be that common
[18:06:49] <eddyb> riiight. re!r"foo" is fine otherwise
[18:06:54] *** Quits: pepper_chico (pepper_chi@E3C2E286.D158355F.F546FA5F.IP) (Quit: Ex-Chat)
[18:06:55] *** Joins: synackse (jordyd@moz-5289C68.jax.bellsouth.net)
[18:07:55] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[18:12:22] *** Joins: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com)
[18:14:05] <geal> ok, I'm in a case where I found a double free. Should I make it an issue for rustc?
[18:14:18] *** Joins: alonlevy (alon@moz-61A0AD83.red.bezeqint.net)
[18:14:35] <geal> it happens while hacking in libnative, with lots of unsafe memory juggling, so it is obviously my fault
[18:15:35] <cmr> if it's your fault, why open an issue?
[18:16:08] <SiegeLord> Is there some documentation on how to add tests?
[18:16:08] *** Quits: LRN (LRN@moz-50DF30B.nationalcablenetworks.ru) (Connection reset by peer)
[18:16:19] <SiegeLord> (to rustc test suite)
[18:16:21] <geal> well, because I have never seen a rust program dump a core before, so I was wondering if the compiler should have caught that beforehand
[18:16:47] <cmr> if the cause is safe code, open an issue. if it isn't, then it's expected that it could be incorrect.
[18:17:02] <cmr> SiegeLord: https://github.com/mozilla/rust/wiki/Note-testsuite
[18:17:09] <SiegeLord> Thanks
[18:17:51] *** Joins: LRN (LRN@moz-50DF30B.nationalcablenetworks.ru)
[18:17:53] <eddyb> some function returns Option<Option<ty::t>> because it uses map instead of and_then
[18:18:03] *** Joins: autra (augustin@moz-BE76895F.fbx.proxad.net)
[18:18:14] <geal> cmr: ok, I'll fix my code then :)
[18:20:23] <wting> I'm trying to induce a floating point error (0.1 + 0.2 == 0.300000000000004) but can't. Does Rust not have this problem?
[18:20:27] *** Quits: synackse (jordyd@moz-5289C68.jax.bellsouth.net) (Quit: synackse)
[18:20:54] *** Joins: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr)
[18:21:06] <adridu59> if I pass a unique pointer to a function, is there copy involved?
[18:21:23] <cmr> adridu59: the pointer is copied, but not the value
[18:21:29] <cmr> (ie, standard C argument passing semantics)
[18:21:37] <eddyb> wting: f32 or f64?
[18:22:03] <cmr> wting: assert_eq!(0.1 + 0.2, 0.3); fails.
[18:22:13] <adridu59> cmr: I see, but why is a pointer copy required?
[18:22:21] <adridu59> because of lifetime?
[18:22:26] <cmr> adridu59: because that's how you get the pointer into the function's stack frame
[18:23:03] <wting> cmr: thx
[18:23:08] <adridu59> okay and that is because a function has its own namespace?
[18:23:15] <cmr> adridu59: no, unrelated.
[18:23:19] <cmr> it's just how function call works.
[18:23:19] <wting> eddyb: f64, but I was printing the answer so I guess format! messed with the output
[18:23:30] <cmr> you need to push the argument onto the stack, or put it into a register.
[18:23:43] <eddyb> wting: format won't print full precision by default
[18:23:55] <eddyb> maybe .to_str() does it? I'm not sure
[18:24:10] *** Joins: pepper_chico (pepper_chi@E3C2E286.D158355F.F546FA5F.IP)
[18:24:12] *** Joins: Thad (chatzilla@moz-21A53E7F.tx.res.rr.com)
[18:24:13] <adridu59> why isn't it possible to keep the same stack for a function?
[18:24:49] <glaebhoerl> bah, lifetimes are still totally brain-hurting. they're very intuitive right up until I try thinking about how they actually work.
[18:24:50] <cmr> adridu59: http://www.slideshare.net/saumilshah/how-functions-work-7776073
[18:25:04] <wting> eddyb: good to know, thx
[18:25:12] <adridu59> cmr: thanks!
[18:25:24] <Thad> Could Rust be used to develop a Custom File System Driver for Windows / Linux / OSX  ??
[18:25:43] <cmr> Thad: we have fuse bindings somewhere.
[18:25:55] <cmr> https://github.com/zargony/rust-fuse
[18:26:05] <glaebhoerl> someone give me examples of illegal things the lifetime/region system prevents doing. one is returning a pointer to a local variable. I basically understand that one. what else is there?
[18:26:16] <Thad> I need to support all 3 OS's for my Custom File System
[18:26:54] *** Joins: darthdeus (darthdeus@62EE3073.3B96A244.4E88690D.IP)
[18:26:54] *** Quits: LRN (LRN@moz-50DF30B.nationalcablenetworks.ru) (Connection reset by peer)
[18:26:59] <cmr> Thad: I'm not sure you'll be able to do Windows with Rust, not without pain. You'll have to use their driver sdk.
[18:27:02] *** Joins: doener (doener@moz-C68F600D.unity-media.net)
[18:27:03] <Matthias247> You could'nt use the stdlib
[18:27:09] *** Quits: autra (augustin@moz-BE76895F.fbx.proxad.net) (Ping timeout)
[18:27:19] <cmr> but mac + linux you can use fuse.
[18:27:47] <Thad> cmr: fair enough.  and I thought so.
[18:27:51] <Matthias247> and for windows I see also problems, because the ABI doesn't seem to be 100% compatible with VSs C ABI
[18:28:11] <kimundi> glaebhoerl: Making sure a function that uses a pointer from a higher stack frame doesn't invalidate the thing the pointer points at through an different channel?
[18:28:13] <eddyb> that should be fixable
[18:28:31] <kimundi> Though thats more owenrship than lifetime
[18:28:39] <cmr> Thad: http://msdn.microsoft.com/en-us/library/windows/hardware/ff548137%28v=vs.85%29.aspx
[18:29:20] *** Joins: LRN (LRN@moz-50DF30B.nationalcablenetworks.ru)
[18:29:30] *** Quits: mleise (marco@moz-850E56A9.pools.arcor-ip.net) (Ping timeout)
[18:29:33] <Thad> cmr:  Yeah, I know.... mostly dealing with IRP Function Codes
[18:29:49] <kimundi> glaebhoerl: preventing you from modifying a value you've mutably borrowed earlier
[18:29:57] <Matthias247> eddyb: If you want to fix sth. there here is my issue :-) https://github.com/mozilla/rust/issues/11343
[18:30:13] <Thad> cmr: K thanks... I think I have a general plan.... will work on the low level driver first for Win.
[18:30:23] <glaebhoerl> kimundi: yeah, those are more borrow checker-y things... 
[18:30:37] <kimundi> glaebhoerl: The latter one uses lifetimes though
[18:30:57] <eddyb> Matthias247: can you provide a restricted test-case? and maybe a disasm of the C code?
[18:31:01] <kimundi> lifetime == during what time may I not modify this
[18:31:27] <eddyb> Matthias247: I am going to pretty much destroy the notion of "Rust ABI"
[18:31:28] <Matthias247> eddyb: I have provided an isolated test case in the link
[18:31:34] <glaebhoerl> yeah I guess so
[18:31:35] <Matthias247> the gist
[18:31:49] <eddyb> Matthias247: it's still big
[18:32:12] <eddyb> Matthias247: I was thinking of a structure with two-three fields, that's a nice testcase
[18:32:14] *** Joins: synackse (jordyd@moz-5289C68.jax.bellsouth.net)
[18:32:26] <doener> acrichto: around?
[18:32:34] <cmr> doener: welcome back!
[18:32:40] <acrichto> doener: I am indeed
[18:32:43] <Matthias247> eddyb: but the first fields weren't corrupted :)
[18:32:56] <adridu59> cmr: so it's about registers and how they gather their data?
[18:33:09] <doener> acrichto: I'm looking at https://github.com/mozilla/rust/issues/9024 and wondered about the ll code in your comment
[18:33:45] <doener> acrichto: you said that you passed that to `opt`. But that's already missing the bounds check and still has the parts which you said you removed
[18:33:49] <eddyb> Matthias247: tried removing fields?
[18:33:56] *** Joins: mleise (marco@moz-850E56A9.pools.arcor-ip.net)
[18:34:09] <eddyb> is there anything nice we could in a Rust ABI that other ABIs don't get right?
[18:34:41] <Matthias247> I could try it later with only the u8 fields. I think they are the problem, 32bit fields seem to work
[18:34:42] <Ms2ger> Segmented stacks
[18:34:42] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[18:34:57] <doener> acrichto: plus, I can't reproduce `opt` removing the bounds check if I remove %s and the memcpy from the ll code that rustc currently generates
[18:35:17] <doener> cmr: thanks!
[18:35:22] <acrichto> doener: oh dear need to drag up a memory of this
[18:35:42] <eddyb> Ms2ger: passing a stack as a special argument?
[18:35:49] *** Quits: Thad (chatzilla@moz-21A53E7F.tx.res.rr.com) (Quit: ChatZilla 0.9.90.1 [Firefox 26.0/20131205075310])
[18:35:52] * Ms2ger trolls
[18:36:15] *** Quits: pepper_chico (pepper_chi@E3C2E286.D158355F.F546FA5F.IP) (Quit: Ex-Chat)
[18:36:21] <acrichto> doener: so it's currently removing the bounds check?
[18:36:37] *** Joins: pepper_chico (pepper_chi@E3C2E286.D158355F.F546FA5F.IP)
[18:36:39] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[18:36:59] <acrichto> doener: I may have just been misreading the code, looking back at it I'm wondeirng what's the improvement we need to make...
[18:37:04] <doener> acrichto: no, it's not. I tried to reproduce your result, that it gets removed when %s is eliminated and %0 is used directly
[18:37:19] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[18:37:24] <eddyb> Ms2ger: I'm asking because bare functions (and, actually, even methods) are going to be pretty much C compatible soon
[18:37:50] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Connection reset by peer)
[18:38:04] *** Joins: eatkinson (eatkinson@moz-C52156BC.dsl.bell.ca)
[18:38:05] <doener> acrichto: IOW it's not even removed by `opt` when I remove %s manually
[18:38:13] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[18:38:25] *** Quits: hdima (Mibbit@F0354C75.67925389.76FD8EA4.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[18:38:41] <doener> acrichto: or maybe I'm using `opt` wrong? I do "opt -O3 issue9024.ll | llvm-dis"
[18:38:54] *** Joins: rca_ (rcatolino@moz-E246AD29.adsl.proxad.net)
[18:38:59] <acrichto> hmm let me try to reproduce what I was doing
[18:39:04] <eddyb> (I'm considering allowing let f = x.foo; where foo is a method, to create a closure with env = x and fn = foo)
[18:39:30] *** Quits: rca (rcatolino@moz-F434D9F9.adsl.proxad.net) (Ping timeout)
[18:40:38] <acrichto> doener: I'm not really sure what's going on here, I still get two branches myself
[18:41:13] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[18:41:39] <doener> acrichto: ok. thanks
[18:42:53] <acrichto> doener: you may not want to go off my code, the original code still shouldn't have a bounds check
[18:44:06] <doener> acrichto: yeah, I just wanted to reproduce that because it seemed so unlikely that that change would have any effect
[18:44:44] *** Joins: hdevalence (quassel@moz-D125A39F.home3.cgocable.net)
[18:45:31] *** Quits: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de) (Quit: Leaving.)
[18:45:43] <adridu59> cmr: updated
[18:45:54] <adridu59> (https://github.com/mozilla/rust/pull/11477)
[18:46:40] <SiegeLord> ::sigh::... I changed the lexer, get codegen size regressions
[18:46:58] *** Quits: pepper_chico (pepper_chi@E3C2E286.D158355F.F546FA5F.IP) (Quit: Ex-Chat)
[18:48:02] *** Joins: wilkie (wilkie@moz-A19F104D.pitbpa.fios.verizon.net)
[18:49:32] *** Quits: KindOne (KindOne@moz-E7657D88.dynamic.ip.windstream.net) (Ping timeout)
[18:49:42] <cmr> adridu59: well, it's not specifically about registers, that's just one way how functions are implemented...
[18:50:04] <cmr> adridu59: the function you are calling needs to get its parameters somehow. it can't refer directly to the variables in its caller since it doesn't know who it is called by.
[18:50:35] <adridu59> oh okay, I see now
[18:50:39] <cmr> (sorry about delay, doing review)
[18:50:49] *** Quits: victorporof (victorporo@5EC92F85.71368607.9B1E38F4.IP) (Quit: victorporof)
[18:50:57] <adridu59> that's fine
[18:51:03] *** Joins: jeaye (jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[18:52:41] *** Joins: squiggy (Mibbit@6368EA6C.F751E182.33946C2A.IP)
[18:53:08] *** Quits: squiggy (Mibbit@6368EA6C.F751E182.33946C2A.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[18:53:29] <adridu59> `new` means heap alloc necessarily?
[18:54:07] <cmr> in rust? no
[18:54:12] <adridu59> cmr: I still have "green scheduling library" on the src readme fwiw
[18:54:23] <adridu59> I should probably change that too?
[18:54:31] <cmr> yes please
[18:55:17] *** Quits: mleise (marco@moz-850E56A9.pools.arcor-ip.net) (Ping timeout)
[18:56:02] <adridu59> cmr: done, thanks
[18:56:13] *** Quits: eatkinson (eatkinson@moz-C52156BC.dsl.bell.ca) (Quit: eatkinson)
[18:58:01] *** Joins: chandler (foo@moz-F990611.mastenbrook.net)
[19:00:10] *** Quits: synackse (jordyd@moz-5289C68.jax.bellsouth.net) (Quit: synackse)
[19:00:32] *** Joins: vgeddes (vincent.ge@moz-4C6314FC.dsl.mweb.co.za)
[19:00:50] *** Quits: luz (lucy@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[19:01:18] *** Joins: Houm (Houm@moz-25669AA8.fbx.proxad.net)
[19:01:48] *** Joins: synackse (jordyd@moz-5289C68.jax.bellsouth.net)
[19:02:35] *** Joins: nif (nif@moz-8181E2AC.oberlin.net)
[19:02:57] *** Joins: mleise (marco@moz-850E56A9.pools.arcor-ip.net)
[19:04:32] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[19:04:42] *** Joins: victorporof (victorporo@5EC92F85.71368607.9B1E38F4.IP)
[19:05:12] *** Joins: KindOne (KindOne@moz-E7657D88.dynamic.ip.windstream.net)
[19:05:32] *** Joins: ktt3ja (ktt3ja@moz-54586A12.washdc.fios.verizon.net)
[19:06:15] *** Quits: Florob (Florob@moz-39532932.de) (Client exited)
[19:06:18] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[19:07:30] <geal> alright, double free solved. It was a case of "CString::new(buf, true)" to change in "CString::new(buf, false)"
[19:08:09] <geal> I thought that by passing true, my new CString would take ownership of that part of the memory, but it seems I was wrong
[19:08:26] <cmr> it will
[19:08:34] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Client exited)
[19:08:38] <cmr> but only semantically, the compiler won't assert it.
[19:08:40] <cmr> (since it can't
[19:08:42] <cmr> )
[19:08:55] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[19:09:16] *** Joins: lenstr (lenstr@EE424927.9636F313.7A27613B.IP)
[19:09:52] *** Quits: hdevalence (quassel@moz-D125A39F.home3.cgocable.net) (Connection reset by peer)
[19:10:21] *** Quits: int3_ (int3_@6647F17C.C24D7B6A.EC6C369A.IP) (Ping timeout)
[19:10:33] *** Joins: hdevalence (quassel@moz-D125A39F.home3.cgocable.net)
[19:11:01] *** Joins: int3_ (int3_@6647F17C.C24D7B6A.EC6C369A.IP)
[19:14:30] *** Quits: lenstr (lenstr@EE424927.9636F313.7A27613B.IP) (Ping timeout)
[19:15:12] *** Joins: luz (lucy@moz-CD18B14B.customer.cdi.no)
[19:16:55] *** Joins: lenstr (lenstr@D196DA72.9636F313.7A27613B.IP)
[19:17:09] *** Quits: atomical (atomical@moz-C4295341.c3-0.lem-ubr1.chi-lem.il.cable.rcn.com) (Ping timeout)
[19:17:29] *** Joins: goran (goran@B83196FF.C26CF587.3C521BE1.IP)
[19:17:30] <geal> well, right now it works. I'll clean the code a bit more, add tests, then send the PR for review
[19:17:34] *** Joins: atomical (atomical@moz-C4295341.c3-0.lem-ubr1.chi-lem.il.cable.rcn.com)
[19:18:47] *** Quits: bytbox (s@moz-54E13927.washdc.fios.verizon.net) (Ping timeout)
[19:18:54] <adridu59> cmr: does borrowing also involve copy?
[19:19:43] <cmr> adridu59: it's a pointer copy; you're storing the address of a value into a stack frame.
[19:20:36] *** Joins: zztr (Thunderbir@moz-CA50D606.dsl.static.sonic.net)
[19:20:57] <kimundi> adridu59: Everything involves a copy of raw memory bytes - that is not the same like a logical copy of the value inside of the language semantic
[19:21:35] *** Quits: int3_ (int3_@6647F17C.C24D7B6A.EC6C369A.IP) (Client exited)
[19:22:03] <kimundi> let x = ~5; let y = x; // Semantically, the value moved from x to y. On a low hardware level, the bytes of the pointer just got copied.
[19:22:54] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[19:24:24] <adridu59> ok, but low-level wise, is there a difference between ~ and & or is it just a matter of compiler checks?
[19:25:06] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[19:25:09] *** Quits: dmz (Mibbit@9A8A5739.49975FB2.AE2D72A6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[19:25:12] *** Joins: int3_ (int3_@6647F17C.C24D7B6A.EC6C369A.IP)
[19:25:18] <kimundi> low level wise, as currently implemented, both & and ~ are just a machine word
[19:25:37] <kimundi> slightly higher level, both machine words represent a memory address
[19:25:52] <adridu59> and in terms of how memory is used its the same then?
[19:26:12] <kimundi> adridu59: What do you mean?
[19:26:45] <adridu59> when I looked at niko's presentation, I see an example that does a copy into a new stack frame and another that just copies a pointer
[19:27:36] *** Joins: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de)
[19:27:40] *** Joins: dangets (dangets@moz-E9E4A77B.cpe.cableone.net)
[19:27:47] *** Quits: pyon (user@A16F2BE6.A9B419CB.1C8C8CE9.IP) (Client exited)
[19:27:52] *** Joins: pyon (user@A16F2BE6.A9B419CB.1C8C8CE9.IP)
[19:27:56] *** Quits: int3_ (int3_@6647F17C.C24D7B6A.EC6C369A.IP) (Client exited)
[19:28:44] <kimundi> Well, values that are not a pointer get treated the same way: they just get memcopied - if the type has a destructor that counts as a move, if it doesn't, then it just counts as a implicit copy
[19:31:58] *** Joins: elux (peter@moz-6B45ADE5.dsl.bell.ca)
[19:32:52] <nielsle> cmr. regarding the pull request. I think that bors was stopped  by hand.
[19:33:05] *** Quits: synackse (jordyd@moz-5289C68.jax.bellsouth.net) (Quit: synackse)
[19:33:11] <cmr> nielsle: link?
[19:33:56] *** Joins: robhobbes (Mibbit@moz-21C1D4AA.byu.edu)
[19:34:11] *** Joins: synackse (jordyd@moz-5289C68.jax.bellsouth.net)
[19:34:12] <nielsle> One sec
[19:34:43] <_achin> the waterwall is idle
[19:35:02] <cmr> _achin: yes, bors waits five minutes before merging the next PR
[19:35:29] <_achin> ah.  why's that?
[19:35:35] <cmr> github api rate limiting
[19:35:39] <nielsle> OK
[19:35:40] <_achin> :(
[19:35:53] *** Quits: robhobbes (Mibbit@moz-21C1D4AA.byu.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[19:36:12] *** Quits: pyon (user@A16F2BE6.A9B419CB.1C8C8CE9.IP) (Quit: restart)
[19:36:49] *** Quits: pzol (pzol@moz-553BEE64.dynamic.chello.pl) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[19:36:52] *** Quits: wting (wting@E31B3884.E538DA90.20F09BA6.IP) (Client exited)
[19:37:54] *** Joins: pyon (user@A16F2BE6.A9B419CB.1C8C8CE9.IP)
[19:39:32] *** Quits: goran (goran@B83196FF.C26CF587.3C521BE1.IP) (Ping timeout)
[19:40:41] *** Joins: eholk (eholk@moz-815A5DDF.wavecable.com)
[19:41:41] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[19:42:30] *** Joins: wting (wting@E31B3884.E538DA90.20F09BA6.IP)
[19:43:56] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[19:45:03] *** Quits: Skrylar (Skrylar@moz-F692F728.austin.res.rr.com) (Ping timeout)
[19:45:13] *** Quits: jzcz (nick@moz-4C262E7E.dyn.centurytel.net) (Ping timeout)
[19:45:14] *** Joins: fabiand (fabiand@moz-1CD2837F.adsl.alicedsl.de)
[19:45:29] *** Joins: magg (magg@1600179A.409429FF.3D0AE249.IP)
[19:45:45] <mleise> cmr: are you the next to implement OAuth? :)
[19:46:17] <cmr> mleise: say what?
[19:47:23] <magg> i wrote a bunch of functions with ~str as a parameter but now i need to pass a slice of a string, a &str as a parameter... should i change all my other functions to accept &str?
[19:47:34] <strcat> mleise: \o
[19:47:37] <mleise> When you authenticate with github the API call restrictions are lifted
[19:47:39] *** Joins: int3_ (int3_@6647F17C.C24D7B6A.EC6C369A.IP)
[19:47:52] <cmr> surely we're authenticated, because it comments on our PRs.
[19:47:53] <Tobba> ... oh god
[19:48:01] <Tobba> I've actually filled my terminal buffer way beyond with errors
[19:48:09] <cmr> magg: yes, you should be using &str
[19:48:20] <mleise> cmr: ah ok. i didn't read the context
[19:48:22] <cmr> magg: you shouldn't use ~str unless you require ownership of the string.
[19:48:24] <Tobba> lifetime errors are absolutely rediclous right now
[19:48:31] <magg> cmr: ok
[19:48:42] <mleise> strcat: hi
[19:48:46] <strcat> Tobba: write smaller functions? they're function local ;p
[19:49:00] <Tobba> 100 line function
[19:49:05] <Tobba> its necessary to be one function too
[19:49:09] <cmr> Tobba: What is ridiculous about them?
[19:49:19] <Tobba> for each case they print out like 5 lines of code
[19:49:24] <Tobba> + wrapping
[19:49:33] <cmr> may I recommend making your terminal larger
[19:49:39] *** Quits: fabiand (fabiand@moz-1CD2837F.adsl.alicedsl.de) (Quit: Verlassend)
[19:49:53] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[19:50:07] <Tobba> the buffer is as big as windows supports
[19:50:29] <strcat> Tobba: I don't think it has a limit?
[19:50:30] *** Quits: Houm (Houm@moz-25669AA8.fbx.proxad.net) (Ping timeout)
[19:50:42] <strcat> what are you using rust from?
[19:50:49] <Tobba> windows terminal has a line limit
[19:50:52] <Tobba> windows cmd*
[19:50:54] <strcat> it doesn't
[19:51:00] <strcat> if you're really using the horror that is cmd.exe, right click the title bar and change the size
[19:51:16] <Tobba> tried
[19:51:20] <strcat> it probably just predates the time where size hints existed
[19:51:30] <strcat> so you have to set the # of columns/rows yourself
[19:51:43] <strcat> if you really want a terrible error, compile this with g++ http://ix.io/9o8
[19:51:55] <cmr> heh
[19:51:57] * strcat highly recommends it
[19:52:04] <strcat> it takes a while to print
[19:52:06] <strcat> it's a few megs
[19:52:19] <Tobba> if you make it deeper, does it become bigger?
[19:52:43] <strcat> hm, vte 0.35.0 is a lot less slow
[19:52:53] <Tobba> windows *has* a buffer size setting
[19:53:02] <Tobba> (which has been broken since like XP)
[19:53:06] <strcat> works for me! ;p
[19:53:35] <strcat> Tobba: anyway it's far saner to use the mingw rxvt/bash
[19:53:43] <Tobba> yeah this is rediclous
[19:54:10] <strcat> or powershell's GUI but.... it's a bit weird
[19:55:09] <jhasse> ConEmu!
[19:55:16] <jhasse> you can resize it
[19:55:18] *** Joins: goran (goran@B83196FF.C26CF587.3C521BE1.IP)
[19:55:49] <Tobba> oh god strcat
[19:55:50] <Tobba> I compiled that
[19:55:53] <SiegeLord> So much derp...
[19:55:55] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[19:55:57] *** Quits: victorporof (victorporo@5EC92F85.71368607.9B1E38F4.IP) (Quit: victorporof)
[19:56:20] <Tobba> it broke my ssh session
[19:56:21] *** Quits: jeaye (jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: reboot)
[19:56:25] <cmr> heh
[19:56:46] <strcat> after it's done printing, it will also stop and require a lot of memory - I don't have enough, so g++ gets killed ;p
[19:56:52] <strcat> don't know why
[19:56:55] <SiegeLord> Clang cheats: test.cpp:2:19: note: (skipping 247 contexts in backtrace; use -ftemplate-backtrace-limit=0 to see all)
[19:57:10] *** Joins: jeaye (jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[19:57:20] <strcat> SiegeLord: well it's not really cheating, it's just not stupid ;p
[19:57:21] *** Quits: jhasse (jhasse@moz-999AD28C.ewe-ip-backbone.de) (Quit: Verlassend)
[19:57:31] <strcat> foo.cc:1:35: error: circular inheritance between 'derp<T>' and 'derp<T>'
[19:57:33] <strcat> template<typename T> struct derp: derp<T> {
[19:57:50] <strcat> it catches that problem
[19:57:57] <strcat> and then deals with the other problem
[19:58:10] * strcat is sure you can make one to break clang too
[19:59:21] *** Joins: scp_ (scp@moz-9BEDE8C8.hsd1.ca.comcast.net)
[19:59:23] <jeaye> How curious[ly recurring].
[19:59:23] *** Quits: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca) (Quit: Leaving.)
[19:59:35] <whitequark> strcat: quick, submit it to tgceec!
[19:59:35] <scp_> where do I put the #[feature(struct_variants)] attribute?
[19:59:46] *** Quits: dv (dv@4E84A121.6B684CF9.27E2265F.IP) (Quit: leaving)
[19:59:48] *** Quits: Jesin (Jesin@moz-4B662E55.washdc.fios.verizon.net) (Quit: Leaving)
[19:59:49] <cmr> scp_: in the crate root, with a semicolon after it.
[19:59:53] <strcat> whitequark: I'm sure similar stuff was submitted ;)
[20:00:02] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[20:00:14] <scp_> cmr: in a single file program, this is just the top of the file? or...
[20:00:18] <cmr> scp_: yes
[20:00:32] <scp_> cmr: thanks
[20:00:34] *** Quits: scp_ (scp@moz-9BEDE8C8.hsd1.ca.comcast.net) (Quit: leaving)
[20:01:35] *** Quits: FreeFull (freefull@moz-3E0AAA7E.as13285.net) (Ping timeout)
[20:02:31] *** Joins: jzcz (nick@moz-4C262E7E.dyn.centurytel.net)
[20:02:46] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[20:02:53] *** Joins: pongad (Mibbit@moz-7E8AAD2E.res.gatech.edu)
[20:03:30] <adridu59>  cmr: can you get more out of the GitHub API when upgrading account?
[20:03:47] <cmr> adridu59: don't think so, no.
[20:04:41] <Tobba> ughhh
[20:04:46] <Tobba> I have some lifetime madness going on
[20:04:57] <Tobba> pub fn left<'b>(&'b mut self, pos: uint, level: uint) -> Option<(&'b mut LANode, uint, uint, &mut LABlock)> {
[20:05:04] <Tobba> currently just returns
[20:05:05] <Tobba> Some((&mut self.nodes[p], p, level+1, self))
[20:05:09] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[20:06:12] <cmr> that last &mut needs a lifetime.
[20:06:20] <Tobba> I tried that
[20:06:20] *** Quits: goran (goran@B83196FF.C26CF587.3C521BE1.IP) (Ping timeout)
[20:06:23] <Tobba> same error
[20:06:32] <doener> isn't that a double mut borrow?
[20:06:39] <cmr> well it needs one anyway, even if it isn't the cause of the error.
[20:06:53] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[20:06:54] <cmr> but yes, it is.
[20:06:59] <cmr> you'll need unsafe code to do that.
[20:07:07] <Tobba> hm?
[20:07:08] <doener> one for self itself, and one for self.nodes[p]
[20:07:22] <doener> borrowing a field in a struct borrows the struct itself
[20:07:24] <cmr> Tobba: no two &mut may ever alias.
[20:07:33] <Tobba> ah, crap
[20:07:37] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[20:07:46] <Tobba> I dont actually need it to be mutable though
[20:07:49] <Tobba> its just that self is mutable
[20:08:06] <cmr> why are you returning self, though?
[20:08:16] <Tobba> theres another case where it can return another block
[20:08:16] <cmr> the caller is still going to have a reference to self...
[20:08:23] <cmr> ah
[20:08:29] <Tobba> a node may be inside of another block
[20:08:31] <Tobba> so yeah
[20:10:25] <Tobba> should I cast self to be nonmutable
[20:10:33] *** sam113101 is now known as sam113101_afk
[20:10:35] <Tobba> I have no idea why it actually complains about returning a mutable in place of an immutable
[20:11:07] <cmr> &mut and & never alias.
[20:11:23] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[20:11:23] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[20:11:28] <SiegeLord> Hmm... maybe I should stop that gcc process... it's using nearly 7GB of memory...
[20:11:40] *** Joins: mwillsey (Mibbit@71E37B0D.2F40DA9D.689607DE.IP)
[20:11:46] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[20:11:46] <Tobba> I passed that to a site that allows live compiling of C++ code
[20:11:53] <Tobba> the server has yet to respond
[20:11:55] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[20:13:16] <SiegeLord> It reminds me of a valid C++ program that does not hit the nesting limit, but still requires enormous amount of memory to compile... it wasn't particularly long
[20:13:22] <mwillsey> whats the difference betweeen std::io::process and std::run::Process
[20:13:26] <SiegeLord> I wonder when Rust will get such things ;)
[20:13:36] <mwillsey> lol the smileys
[20:14:15] *** Joins: mib_3ayzjk (Mibbit@moz-7DB19521.hsd1.ma.comcast.net)
[20:14:28] <Tobba> with borrows
[20:14:31] <Tobba> you can probably make something insane
[20:14:42] *** Quits: mib_3ayzjk (Mibbit@moz-7DB19521.hsd1.ma.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[20:14:43] *** Quits: dangets (dangets@moz-E9E4A77B.cpe.cableone.net) (Ping timeout)
[20:14:44] <Tobba> one thing I've always wanted to do is, you know how docx files are secretly zips?
[20:15:05] <Tobba> think 42.zip
[20:15:44] <cmr> mwillsey: std::run gives a higher level interface over input/output than just pipes.
[20:16:06] *** Quits: lenstr (lenstr@D196DA72.9636F313.7A27613B.IP) (Client exited)
[20:16:46] *** Joins: lenstr (lenstr@D196DA72.9636F313.7A27613B.IP)
[20:17:29] <adridu59> what is the difference between `~` and `&mut`? I mean, if I write a function with `~` and a return it should just have the same effect?
[20:17:54] <mwillsey> cmr: is there a way to spawn a process without blocking? because i tried both and run and io
[20:18:04] <kimundi> adridu59: well, if you return it its the same as using a &mut borrow until the end of the function
[20:18:13] <cmr> mwillsey: spawn it in a new task.
[20:18:21] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[20:18:21] <kimundi> adridu59: The difference is that ~ is not restricted to a stack dicipline
[20:18:24] <benh> adridu59: some things aren't ~-allocated, moving things into ~-memory just to pass them to functions seems weird
[20:18:29] *** Quits: lenstr (lenstr@D196DA72.9636F313.7A27613B.IP) (Ping timeout)
[20:18:36] <benh> and you can't pass parts of things
[20:19:03] <cmr> mwillsey: wait, std::io was blocking?
[20:19:12] <adridu59> so using `~` and return it would be silly right? that was my thought
[20:19:54] <mwillsey> cmr: pretty sure, ill try it again and let you know
[20:19:55] <pongad> adridu59: It seems like using ~ for something it's not meant to do xD
[20:20:14] <kimundi> adridu59: Wouldn't call it silly, but that would result in the same situation than passing a &mut, which is common way to deal with
[20:20:17] <kimundi> with it*
[20:20:46] <kimundi> It also allows for a more functional style of composing methods
[20:20:52] *** Joins: bytbox (s@moz-54E13927.washdc.fios.verizon.net)
[20:21:02] <pongad> kimundi: It does?
[20:21:15] *** Quits: bheylin (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin)
[20:21:16] *** Joins: mib_cde5rx (Mibbit@7E20B4B5.D265B9D.9E22F775.IP)
[20:22:13] *** Quits: pongad (Mibbit@moz-7E8AAD2E.res.gatech.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[20:22:33] <kimundi> well, let x: ~T = foo(bar(~my_value)); vs let mut x = ~my_value; bar(x); foo(x);
[20:23:06] <kimundi> err, replace method with function above
[20:23:10] <kimundi> sorry
[20:25:37] <mwillsey> cmr: yeah it looks like io:: process:: Process:: new() is blocking
[20:25:55] *** Quits: KindOne (KindOne@moz-E7657D88.dynamic.ip.windstream.net) (Ping timeout)
[20:26:04] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[20:26:21] *** Quits: synackse (jordyd@moz-5289C68.jax.bellsouth.net) (Quit: synackse)
[20:26:36] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[20:27:36] *** Joins: eatkinson (eatkinson@C0A89863.ED78EA15.5FF071F1.IP)
[20:29:28] <cmr> mwillsey: I don't think so.
[20:29:39] *** Joins: KindOne (KindOne@moz-587E0DD2.dynamic.ip.windstream.net)
[20:29:40] <cmr> https://gist.github.com/cmr/d0c1458a11700ab56a30 prints immediately.
[20:30:35] <magg> i keep getting this error: 'Unhandled condition: not_utf8: ~"from_utf8: input is not UTF-8; first bad byte is 134"',
[20:30:47] *** Quits: doener (doener@moz-C68F600D.unity-media.net) (Quit: leaving)
[20:30:52] <cmr> magg: you're trying to decode an invalid utf8 string
[20:30:52] *** Quits: int3_ (int3_@6647F17C.C24D7B6A.EC6C369A.IP) (Client exited)
[20:31:01] <magg> cmr: oh
[20:31:20] <magg> cmr: is there way to validate a utf8 string?
[20:31:31] <Ms2ger> You can use from_utf8_opt, I think
[20:31:32] <mleise> what is the source of the string by the way? a file?
[20:31:33] <cmr> std::str::is_utf8
[20:31:49] *** Joins: goran (goran@B83196FF.C26CF587.3C521BE1.IP)
[20:31:53] <magg> cool, thanks
[20:32:10] <magg> it is  a file
[20:32:20] <cmr> Is it a text file?
[20:32:21] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[20:33:01] * mleise thinks it is probably some text file with windows encoding
[20:33:16] <Tobba> ugh
[20:33:20] <Tobba> this shit is the worst
[20:33:27] <Ms2ger> Windows? Yes :)
[20:33:57] <mleise> have you Rust ppl implemented some terminal I/O library?
[20:34:09] <cmr> mleise: depends on what you want
[20:34:17] <cmr> there are some ncurses bindings, a terminfo library in extra::terminfo
[20:34:27] <mleise> like something that converts utf-8 to utf-16 on windows and changes colors
[20:34:28] <cmr> a higher-level colored text thingy in extra::term
[20:34:37] <cmr> extra::term
[20:34:43] <cmr> it's what rustc uses
[20:34:46] <mleise> ah, nice
[20:34:59] <magg> cmr: sorry no it's not. my mistake. let bytes = res.from_hex().unwrap(); let result_str = str::from_utf8_owned(bytes);  res is a hex_string i'm producing
[20:35:20] *** Joins: synackse (jordyd@moz-5289C68.jax.bellsouth.net)
[20:35:43] *** Quits: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de) (Ping timeout)
[20:35:47] <cmr> magg: ok, so you probably don't want to use a string, you want &[u8] if it's just data.
[20:36:07] <mleise> so why do you produce a 134 then? :p
[20:36:11] *** Joins: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de)
[20:36:28] *** Quits: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de) (Max SendQ exceeded)
[20:36:30] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[20:37:17] *** Joins: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de)
[20:37:23] <magg> mleise: don't know... hehe
[20:37:33] <mleise> maybe you really only want to print what matches ASCII  and replace the rest with ' '  or '.' ?
[20:37:43] <wting> Does Rust have a null / nil type? I'm asking because the tutorial linked list example references ones: http://static.rust-lang.org/doc/master/tutorial.html#implementing-a-linked-list
[20:37:51] <mleise> like in the text display of a hex editor
[20:37:57] *** Joins: cjs2 (Mibbit@A24C4196.B0CE3BD6.76F66111.IP)
[20:38:03] <cmr> wting: that's not a type, that's an enum variant.
[20:38:11] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[20:38:22] <wting> cmr: oh duh, thx again.
[20:38:38] <wting> have to unlearn C habits
[20:39:02] *** Quits: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de) (Ping timeout)
[20:39:18] <cjs2> is it possible to use pattern matching on strings in rust?
[20:39:21] <magg> mleise: yeah maybe i'l do that
[20:39:30] <cmr> cjs2: very basic pattern matching, yes.
[20:39:33] <cmr> only equality.
[20:39:39] *** Joins: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de)
[20:40:28] <cjs2> ahh
[20:40:45] *** Joins: dgryski (dgryski@moz-DEAD01C9.adsl-surfen.hetnet.nl)
[20:40:51] <magg> is there u8 to ascii?
[20:41:04] <cmr> foo.to_ascii()
[20:41:42] <magg> k, thx
[20:41:55] <dgryski> Hi, I'm trying to update some old code to 0.9 and am having trouble figuring out how to fix an '@io::Reader': https://github.com/dgryski/rust-hd/blob/master/hd.rs#L72
[20:42:17] <cmr> dgryski: fn hd(fin: &Reader)
[20:42:21] <cjs2> so I can't do something like " match line { "foo" => println("ok"), _ => println("not ok")} ?
[20:42:30] <cjs2> where line is a string?
[20:42:37] <cmr> cjs2: you can.
[20:42:49] *** Quits: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net) (Ping timeout)
[20:42:54] <cmr> only if it's &str though
[20:43:00] <cmr> you'll need ~"foo" if it's ~str
[20:43:08] <Ms2ger> Or .as_slice()
[20:43:08] <cjs2> I get this error though
[20:43:20] <cmr> or that
[20:43:51] <Ms2ger> Tell us about it
[20:44:00] <dgryski> cmr: ok, so how do I adjust the callers?  I previously had 'hd(io::stdin())' but that gives me " error: mismatched types: expected `&std::io::Reader<no-bounds>` but found `std::io::stdio::StdReader`"
[20:44:02] *** Joins: ziad (ziad@moz-5729CEA7.hsd1.ca.comcast.net)
[20:44:08] <cjs2> "missmatched types: expected 'std::option::Option<~str>' but found '~str'
[20:44:10] <cmr> dgryski: &io::stdin()
[20:44:21] <cmr> cjs2: line isn't a string, it's an Option<~str>
[20:44:44] <Ms2ger> match line { Some(~"foo") => println("ok"), _ => println("not ok")}?
[20:44:54] <cmr> dgryski: (it's a trait object. stdin() returns a regular object)
[20:45:01] <cjs2> what does some() do?
[20:45:04] <cjs2> oic
[20:45:20] <adridu59> println is deprecated in favor of println! through (if you are using today's rustc)
[20:45:31] <kimundi> cjs2: Option is just a enum with two possible values: Some(T) or None
[20:45:32] <adridu59> cjs2: Some is an Option type
[20:45:32] *** Joins: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net)
[20:45:47] <Ms2ger> adridu59, it is?
[20:45:51] <adridu59> allows conditional handling of case where nothing is returned
[20:46:02] <adridu59> Ms2ger: well it's not in the prelude anymore
[20:46:10] <cmr> OH it's saturday
[20:46:16] <adridu59> https://github.com/mozilla/rust/pull/11416
[20:46:42] *** Quits: goran (goran@B83196FF.C26CF587.3C521BE1.IP) (Quit: leaving)
[20:46:46] *** Joins: lenstr (lenstr@D196DA72.9636F313.7A27613B.IP)
[20:47:43] *** Quits: a_m0d|home (a_m0d@moz-322A4DE4.acanac.net) (Quit: Leaving.)
[20:47:45] <wting> On a side note I'm getting back into Rust after a year hiatus using 0.5 / 0.6. It has been improved *a lot*.
[20:47:56] <cmr> wting: thanks :)
[20:47:59] <wting> Thank you to all the contributors.
[20:48:07] <Ms2ger> Is rust even a year old? ;)
[20:48:19] *** Joins: tdc (santegoeds@moz-7ECA6D65.range86-178.btcentralplus.com)
[20:48:21] <Matthias247> eddyb: ok, the error already happens when I transfer a struct with more than 2 u8 or 2 u16
[20:48:28] <wting> hah yeah I helped out a little with the documentation a while ago
[20:48:28] <glaebhoerl> Ms2ger: it's multiple years old
[20:48:30] *** Quits: lenstr (lenstr@D196DA72.9636F313.7A27613B.IP) (Ping timeout)
[20:48:32] <cmr> Ms2ger: rust is 8 years old now I think
[20:48:33] *** Quits: eatkinson (eatkinson@C0A89863.ED78EA15.5FF071F1.IP) (Quit: eatkinson)
[20:48:44] *** Joins: lenstr (lenstr@D196DA72.9636F313.7A27613B.IP)
[20:48:48] <eddyb> Matthias247: try to find if it's related to padding
[20:48:49] <wting> figure I'd do the same now and learn Rust API at the same time.
[20:48:49] <glaebhoerl> the earliest versions have basically nothing at all in common with today's Rust, as far as I can tell
[20:49:00] <Ms2ger> Just the name?
[20:49:03] <cmr> glaebhoerl: they're called Rust!
[20:49:09] <Matthias247> eddyb: if I transfer 4 u16 then  5  0  6  0  7  0  8  0   gets  5  0  7  0 B0 9D A8 9D
[20:49:30] <glaebhoerl> some old-timers could answer that with surety, I just have the impression
[20:49:32] <eddyb> Matthias247: how about 3 u8s?
[20:49:43] <eddyb> (nevermind about padding, couldn't be)
[20:49:44] <Matthias247> eddyb: I would say some offsets get calculated weird
[20:49:56] <Matthias247> 4u8:  5  6  7  8 ->  5 B0 A8  1
[20:50:05] <eddyb> 3 is fine?
[20:50:13] <Ms2ger> Something seems as high as a kite :)
[20:50:24] <Matthias247> I will test 3
[20:51:10] *** Quits: mib_cde5rx (Mibbit@7E20B4B5.D265B9D.9E22F775.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[20:51:23] <eddyb> wait a second. what are 0x9DB0 and 0x9DA8 as i16?
[20:51:55] *** Joins: jhasse (jhasse@moz-999AD28C.ewe-ip-backbone.de)
[20:52:04] <cmr> What are you playing with?
[20:52:11] <cmr> And wouldn't it easier just to look at the IR?
[20:52:34] <eddyb> Matthias247: in any case, it smells like surrounding C/C++ code is overwriting part of the structure
[20:52:51] *** Joins: fabiand (fabiand@moz-1CD2837F.adsl.alicedsl.de)
[20:53:04] <new_one> hi, I'm writing a function to find the sum of values in a ~[Num] vector, but am having trouble getting addition to work with generic numbers
[20:53:19] *** Quits: lassej (lassej@moz-839695BF.dip0.t-ipconnect.de) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[20:53:32] <new_one> the function signature is fn sum<Num:Zero>(v:~[Num])->Num
[20:53:51] <cmr> Num is only bound by Zero, not Add
[20:53:54] <new_one> I let mut acc : Num = Zero::zero() to get the right zero
[20:54:19] <Ms2ger> That's the only thing you said you needed :)
[20:54:30] <cmr> fn sum<T: std::num::Num>(v: &[T]) -> T
[20:54:31] <new_one> cmr: how should I add the Add bound?
[20:54:33] <cmr> (http://static.rust-lang.org/doc/master/std/num/trait.Num.html)
[20:54:38] <cmr> new_one: Num: Zero+Add
[20:54:47] <cjs2> fixed my problem, I didn't know you could unwrap the type from std::Option
[20:54:48] *** Joins: rgawdzik (chatzilla@moz-81B2CBE4.net.uwaterloo.ca)
[20:54:57] <new_one> cmr: thanks, I'll try that out
[20:54:57] *** Parts: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net) ()
[20:55:19] *** Joins: eatkinson (eatkinson@C0A89863.ED78EA15.5FF071F1.IP)
[20:55:28] <new_one> I'd thought that Num included all the traits like Add, Zero, Mul, Div, etc.
[20:55:33] *** Joins: int3_ (int3_@6647F17C.C24D7B6A.EC6C369A.IP)
[20:55:36] <cmr> but you're not using Num
[20:55:37] <kimundi> It does
[20:55:44] <cmr> you're just using a type variable that you named Num
[20:55:46] *** Quits: synackse (jordyd@moz-5289C68.jax.bellsouth.net) (Quit: synackse)
[20:56:16] <dgryski> cmr: excellent, got it working again.  Thanks for your help.  (Also, love TWIRust)
[20:56:42] <new_one> I see -- so I have to specifically use std::num::Num?
[20:57:08] <cmr> yes.
[20:57:18] <cmr> (it's in the prelude, so you can just use Num. but that's its full path)
[20:58:29] <mwillsey> can someone do me a huge favor and help me with my little shell? for some reason it looks like process spawing is blocking when it shouldnt be. https://gist.github.com/mwillsey/8376654
[20:58:43] *** Quits: fabiand (fabiand@moz-1CD2837F.adsl.alicedsl.de) (Quit: Verlassend)
[20:58:57] <cmr> mwillsey: rust version?
[20:58:59] *** Joins: scpayson (scp@moz-9BEDE8C8.hsd1.ca.comcast.net)
[20:59:12] <scpayson> hey guys, can anyone tell me why this won't compile: https://gist.github.com/scpayson/8376655
[20:59:44] <mwillsey> cmr: im on 0.9 pre right now
[20:59:49] *** Joins: synackse (jordyd@moz-5289C68.jax.bellsouth.net)
[20:59:52] <benh> b/c &mut self means you have a mutable reference to self but you don't own it and hence can't move out of it b/c that would leave it in an invalid state for the caller
[21:00:02] *** Joins: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca)
[21:00:05] *** Quits: tdc (santegoeds@moz-7ECA6D65.range86-178.btcentralplus.com) (Quit: Leaving)
[21:00:06] <mwillsey> cmr: but i ran your example you sent and it didnt block just as you said
[21:00:25] <scpayson> benh: so, if I did ~mut self it would work?
[21:00:27] <benh> in general, binding to a pattern is a move, and you have to say 'ref' in the pattern to make it not
[21:00:37] *** Quits: eatkinson (eatkinson@C0A89863.ED78EA15.5FF071F1.IP) (Quit: eatkinson)
[21:00:39] <benh> or just "self"
[21:01:36] <scpayson> wait a minute... what is the point of "mut" if I'm not allowed to modify the receiver?
[21:01:46] *** Quits: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca) (Ping timeout)
[21:01:51] <scpayson> in &mut self, that is
[21:01:54] *** Quits: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de) (Quit: Leaving.)
[21:01:55] <cmr> you can mutate, but not move.
[21:01:59] <benh> You can mutate it into another valid state, but moving out leaves it in an invalid state
[21:02:00] <kimundi> scpayson: Two misconceptions here
[21:02:22] <kimundi> scpayson: ~mut is not somethign that exists in rust, because ~ inherits its mutability from the owner
[21:02:23] <benh> i think you can actually replace your whole match block with self.x.take()
[21:02:47] <scpayson> benh: it is a contrived example
[21:02:59] <benh> right
[21:03:18] <kimundi> scpayson: And taking something by value means ownership transfer, so you are free to put it in either a mutable or immutable location
[21:03:22] <benh> well, if you have a mutable Option<T> you can always swap the value with None to move out and yet leave it in a valid state
[21:03:34] <jhasse> Hi! Was println removed in favor of println!(...) ?
[21:03:41] <cmr> jhasse: yes
[21:03:44] <kimundi> jhasse: Right now, yes
[21:03:46] <cmr> from the prelude, that is.
[21:03:49] <cmr> it's still in std::io
[21:03:55] <scpayson> benh: how would I perform that swap?
[21:04:03] <cmr> scpayson: .take() does it for you
[21:04:15] <jhasse> ok thx!
[21:04:16] *** Quits: lenstr (lenstr@D196DA72.9636F313.7A27613B.IP) (Ping timeout)
[21:04:26] <scpayson> I think it would be useful to know how take does it
[21:04:31] <cmr> scpayson: but let x = None; swap(&mut self.x, &mut x);
[21:04:38] <cmr> look at the source :P
[21:04:41] <benh> it's in std::util::swap
[21:04:50] <benh> or at
[21:05:15] *** Joins: depp (depp@500BAFC1.53465674.3C05E6CB.IP)
[21:05:22] <kimundi> scpayson: I adjusted you example code into two variations that work: https://gist.github.com/Kimundi/8376749
[21:05:42] <kimundi> One uses a mutable reference, the other takes ownership
[21:05:45] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[21:06:13] *** Joins: Kikohs (Adium@moz-C71DCA8.mts.modulonet.fr)
[21:06:25] *** Joins: FreeFull (freefull@moz-3BA188BF.as13285.net)
[21:06:59] <scpayson> kimundi: but the semantics of those are different, right? I can't use the return value of simple1 after the receiver leaves scope
[21:07:05] <kimundi> (Updated it with a third example using immutable references, just F5)
[21:07:24] <kimundi> scpayson: correct
[21:07:28] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[21:07:33] <scpayson> ok
[21:07:39] *** Quits: eholk (eholk@moz-815A5DDF.wavecable.com) (Quit: eholk)
[21:07:43] <scpayson> Also, looking at the implementation of swap is.. disturbing
[21:08:02] *** Quits: atomical (atomical@moz-C4295341.c3-0.lem-ubr1.chi-lem.il.cable.rcn.com) (Ping timeout)
[21:08:09] <kimundi> scpayson: Heh, thats why we have swap - to hide such details behind a safe interface :P
[21:09:52] <Kikohs> hello all
[21:10:01] <kimundi> hi
[21:10:05] <cmr> mwillsey: quite confusing :(
[21:10:20] *** Joins: atomical (atomical@moz-C4295341.c3-0.lem-ubr1.chi-lem.il.cable.rcn.com)
[21:10:21] <Kikohs> I am very interested in rust
[21:10:51] <Kikohs> and currently looking at alternatives of c++ such as golang and D
[21:11:08] <Tobba> I wouldent really call Go a systems language of the same kind as C++
[21:11:13] <cmr> mwillsey: hm it's not blocking... at least not directly.
[21:11:21] <cmr> mwillsey: since a println right after ::new() runs
[21:11:29] <Kikohs> no the lack of generics disturbs me
[21:11:36] <Kikohs> for instance
[21:11:52] *** Joins: fabiand (fabiand@moz-1CD2837F.adsl.alicedsl.de)
[21:11:58] <Kikohs> my question is simple, how can rust can interact with other languages
[21:12:17] <Ms2ger> Rust and C can easily call each other
[21:12:18] <Kikohs> do a SWIG wrapper is planned for instance
[21:12:24] <Kikohs> does*
[21:12:29] <cmr> Kikohs: http://static.rust-lang.org/doc/master/guide-ffi.html
[21:12:33] <cmr> No
[21:12:37] <kimundi> Kikohs: Basically, rust can either directly call C APIs, or provide C APIs
[21:12:47] <cmr> But we have rust-bindgen with generates Rust wrappers for C headers.
[21:12:58] <Matthias247> eddyb: can you do sth with that? https://gist.github.com/Matthias247/8376787
[21:13:05] *** Joins: bheylin (brianheyli@moz-8255E94E.adsl.online.nl)
[21:13:06] <mwillsey> cmr: so it's not blocking directly but its not exiting ::new() unil its done
[21:13:19] <Kikohs> ok so I could use swig to generate C and then use Rust
[21:13:45] <kimundi> Kikohs: Dunno what swig is, but yeah
[21:13:50] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Input/output error)
[21:13:53] <cmr> mwillsey: no! even putting it after Job::new() prints immediately.
[21:14:16] *** Quits: alonlevy (alon@moz-61A0AD83.red.bezeqint.net) (Ping timeout)
[21:14:24] <Kikohs> http://www.swig.org/, you can wrap different languages together
[21:14:35] *** Joins: Sharp (Sharp@moz-EEC85237.hsd1.ca.comcast.net)
[21:14:45] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[21:14:48] *** Quits: adridu59 (Mibbit@moz-E1FF077C.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[21:14:49] <SiegeLord> Just to clarify... can we use libstd when using Rust from a different language (perhaps with libnative?)?
[21:14:52] <cmr> mwillsey: I wonder if print() is being synchronized with something? I don't think it is...
[21:14:52] <mwillsey> cmr: oh yikes it doesnt for me
[21:14:55] <eddyb> Matthias247: can you run rustc on that file with -S --emit-llvm -o test.ll?
[21:15:02] <cmr> SiegeLord: yes.
[21:15:07] <Matthias247> sure
[21:15:23] <SiegeLord> cmr: You just have to start the runtime and the communicate in a careful way?
[21:15:34] <eddyb> Matthias247: I guess you can leave optimizations on, that might make it easier. it might be possible the extern "C" -> Rust ABI wrapper is at fault here
[21:15:42] <cmr> SiegeLord: well not even that if you don't use std::io
[21:15:54] <SiegeLord> Interesting
[21:16:00] <SiegeLord> Good times
[21:16:07] <eddyb> Matthias247: the C code looks too simple to misbehave
[21:16:51] <Matthias247> eddyb: yep. Newest revision contians .ll file
[21:17:05] <nielsle> acrichto or cmr, I added a new patch to the rustpkg pull request, to hide the global functions in run_args.rs. https://github.com/mozilla/rust/pull/11475 But perhaps one of you have a word of advice.  If this rewrite is not promising, then I should probably leave it behind. I don't want to create trouble :-)
[21:17:10] *** Joins: trinary (Adium@moz-D78CD0D5.hsd1.co.comcast.net)
[21:17:26] <Kikohs> and another question, do you have a rough idea of when the 1.0 is due ?
[21:17:47] <eddyb> Matthias247: ouch. forgot to mention, don't use I/O
[21:18:03] <cmr> Kikohs: "before 2015"
[21:18:25] <eddyb> cmr: "before the end of 2014" sounds sooner ;)
[21:18:31] <Matthias247> eddyb: only in rust or in both?
[21:18:34] *** Quits: bytbox (s@moz-54E13927.washdc.fios.verizon.net) (Ping timeout)
[21:19:20] <Kikohs> cmr: that's great news
[21:19:21] <eddyb> Matthias247: in rust. also rename it atest.ll so it shows up in the gist (I like highlighting). to ensure optimizations don't affect the code, do something like unsafe {*(0 as *mut Notification) = notification;}
[21:19:39] *** Quits: sk (sk@468213F1.BDC97DA2.1FCE22BB.IP) (Quit: Leaving)
[21:19:53] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[21:20:04] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[21:21:13] <cjs2> is there an easy way to check types of variables?
[21:21:15] <acrichto> nielsle: I don't undestand why methods are becoming functions, we generally prefer methods where possible
[21:21:51] <Matthias247> eddyb: updated
[21:23:07] <eddyb> Test.ll would actually work better, now I see you have all those uppercase file names
[21:23:29] <eddyb> Matthias247: Ctrl+F __rust_abi
[21:23:48] <kimundi> cjs2: let () = my_var; // then read the error
[21:24:08] <nielsle> I think that rustpkg would be easier to work with the command line parsing happened before creating workcache. This way the workcache would only be created in situations where it was actually needed.
[21:24:59] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[21:25:13] <nielsle> The problem is that "rustpkg info" called a method on buildcontext, which contains workcache, so you cannot run "rusrpkg info" wiithout creating a workcache.
[21:25:23] <eddyb> Matthias247: oh, you're calling print_bytes from Rust to C? and that displays problems?
[21:25:36] <cjs2> thanks
[21:25:42] <Matthias247> eddyb: printing them in Rust shows the same problem
[21:25:56] <Matthias247> I just wanted to make sure that I'm comparing apples to apples
[21:26:22] <eddyb> it... looks file
[21:26:24] <eddyb> *fine
[21:27:17] <Matthias247> C calls the first function without the __rust_abi and this calls the latter?
[21:27:22] <eddyb> yes
[21:27:47] <nielsle> But the present code (before my PR) works fine. You sound like the  PR is a bad idea. There is no need to commit something that is a step backwards :-)
[21:27:52] *** Parts: trinary (Adium@moz-D78CD0D5.hsd1.co.comcast.net) ()
[21:28:02] *** Joins: trinary (Adium@moz-D78CD0D5.hsd1.co.comcast.net)
[21:28:06] *** Joins: eatkinson (eatkinson@moz-C52156BC.dsl.bell.ca)
[21:29:16] *** Joins: khodzha1 (khodzha@E048973E.2AEE264E.CA6E2165.IP)
[21:29:29] <eddyb> Matthias247: can you pass a non-extern "C" Rust function to C (and call it with a NULL first argument - the env ptr)?
[21:29:44] *** Quits: khodzha (khodzha@58A7E199.A859D9FD.CA6E2165.IP) (Ping timeout)
[21:29:52] <eddyb> Matthias247: also, is this compiled with --opt-level=3?
[21:29:59] <eddyb> doesn't look clean enough
[21:30:50] <Matthias247> I compiled it as you told me :) there was no opt-level param
[21:31:09] <Matthias247> I trying to make a pure C file now
[21:32:02] *** Quits: bheylin (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin)
[21:32:05] <eddyb> Matthias247: sorry, I thought you already were compiling with optimizations
[21:33:08] *** Quits: synackse (jordyd@moz-5289C68.jax.bellsouth.net) (Quit: synackse)
[21:33:49] *** Quits: int3_ (int3_@6647F17C.C24D7B6A.EC6C369A.IP) (Client exited)
[21:33:52] *** Quits: jhasse (jhasse@moz-999AD28C.ewe-ip-backbone.de) (Quit: Verlassend)
[21:34:12] <Matthias247> eddyb: ok, pure C file has the same result
[21:34:33] <eddyb> Matthias247: you mean no Rust still shows corruption?
[21:35:01] <Matthias247> yes, still corruption
[21:35:07] <Matthias247> even with a pure C project
[21:35:11] <eddyb> Matthias247: can you do one thing for me?
[21:35:25] <eddyb> burn Redmond to a crisp, will ya?
[21:35:33] <Matthias247> lol
[21:35:57] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[21:36:08] *** Joins: Jesin (Jesin@moz-4B662E55.washdc.fios.verizon.net)
[21:36:10] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Ping timeout)
[21:37:09] <mwillsey> cmr: any idea about that print syncronization?
[21:37:36] *** Joins: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca)
[21:38:11] <cjs2> can someone help explain why this example code won't match the strings? https://gist.github.com/cjschneider2/8377248 
[21:38:52] <scpayson> aaaand the compiler hit an index out of bounds error. Maybe I'll visit you cats again in a few months...
[21:38:59] <benh> You probably have an extra newline in your input
[21:39:14] <bstrie> scpayson: please do :)
[21:39:21] *** Quits: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca) (Ping timeout)
[21:39:30] <mwillsey> cjs2: thats the problem, try trim()
[21:39:51] <cjs2> thanks guys ... too much python programming -_-
[21:40:25] *** Joins: ekwan (ekwan@moz-6635E2EF.hsd1.ca.comcast.net)
[21:41:01] <Matthias247> eddyb: have pushed the c version now. But do you think it's a Visual Studio bug?
[21:41:26] *** Quits: dgryski (dgryski@moz-DEAD01C9.adsl-surfen.hetnet.nl) (Ping timeout)
[21:41:44] <eddyb> Matthias247: maybe the default ABI is not "C"?
[21:41:51] *** Joins: mwillsey` (user@71E37B0D.2F40DA9D.689607DE.IP)
[21:42:00] <Matthias247> it's set to __cdecl
[21:42:08] <Matthias247> if I set it to anything else it won't even link
[21:42:08] *** Joins: tikue (tkuehn@moz-879E86A9.hsd1.ca.comcast.net)
[21:42:20] *** Quits: mwillsey (Mibbit@71E37B0D.2F40DA9D.689607DE.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[21:42:46] *** Parts: ekwan (ekwan@moz-6635E2EF.hsd1.ca.comcast.net) ()
[21:42:58] *** Parts: mwillsey` (user@71E37B0D.2F40DA9D.689607DE.IP) (ERC Version 5.3 (IRC client for Emacs))
[21:43:20] *** Joins: mwillsey (user@71E37B0D.2F40DA9D.689607DE.IP)
[21:44:13] *** Joins: lenstr (lenstr@95535B34.9636F313.7A27613B.IP)
[21:44:26] *** Quits: atomical (atomical@moz-C4295341.c3-0.lem-ubr1.chi-lem.il.cable.rcn.com) (Ping timeout)
[21:44:39] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[21:45:05] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[21:45:05] *** Joins: atomical (atomical@moz-C4295341.c3-0.lem-ubr1.chi-lem.il.cable.rcn.com)
[21:45:39] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[21:45:56] *** Quits: lenstr (lenstr@95535B34.9636F313.7A27613B.IP) (Ping timeout)
[21:45:58] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[21:47:24] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[21:49:06] *** Joins: mib_r1owmu (Mibbit@71E37B0D.2F40DA9D.689607DE.IP)
[21:50:26] *** Parts: scp (scp@moz-9BEDE8C8.hsd1.ca.comcast.net) ()
[21:53:42] *** Joins: alonlevy (alon@moz-30492E92.bb.netvision.net.il)
[21:54:01] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[21:55:17] <Matthias247> eddyb: with opt-level=3 the output is different ;)
[21:55:21] <Matthias247> but still wrong
[21:55:43] <eddyb> Matthias247: if plain C still exhibits the problem, then the C side is corrupting the structure
[21:56:01] *** sam113101_afk is now known as sam113101
[21:56:26] <eddyb> I'd suggest finding a community which knows enough about VS to figure out what's going on there
[21:57:30] <Matthias247> but how could it when the control is on the rust side at that moment?\fs26
[21:59:04] *** Quits: KindOne (KindOne@moz-587E0DD2.dynamic.ip.windstream.net) (Ping timeout)
[21:59:21] <Matthias247> I think that's not really fair. If the FFI with VS has problems that there is a high propability that some syscalls would also produce bugs
[22:01:28] <eddyb> Matthias247: what do you mean "FFI with VS"?
[22:01:36] *** Quits: Ms2ger (Ms2ger@D324D80C.3387515C.187A1082.IP) (Quit: nn)
[22:01:37] <eddyb> I thought you moved all the code to C and it still had corruptions
[22:01:53] *** sam113101 is now known as sam113101_afk
[22:02:11] <Matthias247> I mean that all available windows libraries are also compiled with VS
[22:02:45] *** Quits: jzcz (nick@moz-4C262E7E.dyn.centurytel.net) (Ping timeout)
[22:03:06] <eddyb> Matthias247: soooo does this happen with 0 Rust code? I'm not sure now
[22:03:21] *** Joins: KindOne (KindOne@moz-86E0A6D8.dynamic.ip.windstream.net)
[22:04:07] *** Joins: int3_ (int3_@6647F17C.C24D7B6A.EC6C369A.IP)
[22:05:19] *** Quits: ktt3ja (ktt3ja@moz-54586A12.washdc.fios.verizon.net) (Quit: Leaving)
[22:06:17] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[22:06:25] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[22:06:59] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[22:07:59] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[22:08:16] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[22:08:27] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[22:08:38] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[22:09:01] *** Quits: brianm (brianm@moz-8161EF8D.hsd1.ca.comcast.net) (Quit: Linkinus - http://linkinus.com)
[22:09:06] *** sam113101_afk is now known as sam113101
[22:09:39] <wting> Why doesn't this work? range(1,5).map(|i| println!("{:d}", i);
[22:10:06] <wting> There's no compile errors or warnings, but nothing gets printed.
[22:10:14] <strcat> wting: because map is a lazy adaptor
[22:10:20] <strcat> it doesn't do anything alone
[22:10:21] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[22:10:27] <wting> oh ok, is there an eager version?
[22:10:30] <strcat> you just want a for loop
[22:10:41] <strcat> for i in range(1, 5) { ... }
[22:10:42] <bstrie> yes, just use a for loop there :)
[22:11:04] <wting> k. Rust doesn't have anything like pool.map()?
[22:11:32] <wting> (Where pool is a group of pre-forked processes / kernel threads)
[22:12:22] *** sam113101 is now known as sam113101_afk
[22:12:36] <strcat> wting: it wouldn't be possible to pass a closure to that method
[22:12:40] <strcat> not memory safe
[22:13:05] *** sam113101_afk is now known as sam113101
[22:14:20] <strcat> you could have an API like 'for x in iter { pool.submit(proc { foo(x) }) }
[22:16:04] *** sam113101 is now known as sam113101_afk
[22:16:39] *** sam113101_afk is now known as sam113101
[22:17:33] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[22:18:23] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[22:19:15] *** Joins: a_m0d|home (a_m0d@moz-322A4DE4.acanac.net)
[22:19:17] *** Joins: simendsjo (Mibbit@moz-9859255A.getinternet.no)
[22:20:17] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[22:20:27] *** Joins: ecl3ctic (Mibbit@578C64B6.F0F44EFA.76AE55C1.IP)
[22:23:34] *** Quits: tikue (tkuehn@moz-879E86A9.hsd1.ca.comcast.net) (Quit: tikue)
[22:27:36] <cjs2> what is the best way to read in number type values from stdin?
[22:27:56] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[22:28:02] *** sam113101 is now known as sam113101_afk
[22:28:14] *** Quits: nobody (nobody@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[22:28:42] *** sam113101_afk is now known as sam113101
[22:28:43] <Tobba> has anyone worked on Rust OpenGL yet
[22:28:58] <depp> There is rs-gl
[22:29:04] <depp> is that what you're asking?
[22:29:12] <Tobba> think so
[22:29:30] <depp> https://github.com/bjz/glfw-rs https://github.com/bjz/gl-rs
[22:29:51] *** Joins: nobody (nobody@moz-7E09A266.neo.res.rr.com)
[22:29:55] <depp> gl-rs isn't usable by itself, of course
[22:30:21] <Tobba> why
[22:30:30] <depp> OpenGL has no way of creating a window
[22:30:46] <Tobba> can just use native APIs
[22:30:48] <depp> so you need GLFW, GLX, WGL, AGL, etc
[22:31:02] <depp> even the native OpenGL isn't useful by itself
[22:31:37] <Tobba> yeah I know
[22:31:42] <Tobba> I kinda wanna write a wrapper aorund OGL
[22:31:44] <Tobba> to make safe OpenGL
[22:32:25] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[22:32:27] <depp> rs-gl is a great starting point
[22:32:37] <depp> because only certain functions are marked as "unsafe"
[22:33:02] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[22:33:16] *** Quits: hdevalence (quassel@moz-D125A39F.home3.cgocable.net) (Ping timeout)
[22:33:45] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[22:33:45] *** Quits: rca_ (rcatolino@moz-E246AD29.adsl.proxad.net) (Ping timeout)
[22:35:31] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[22:35:32] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[22:35:36] *** Quits: rgawdzik (chatzilla@moz-81B2CBE4.net.uwaterloo.ca) (Quit: ChatZilla 0.9.90.1 [Firefox 26.0/20131206145833])
[22:36:14] <enix> what should I add a breakpoint on to break on failure in gdb? I seem to remember that it changed recently.
[22:37:23] <enix> ah, nevermind, looks like its  _Unwind_RaiseException
[22:37:37] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[22:38:09] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[22:38:21] *** Joins: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca)
[22:38:22] *** Joins: lenstr (lenstr@95535B34.9636F313.7A27613B.IP)
[22:39:08] <kimundi> Tobba: For OpenGL related questions, best join #rust-gamedev and/or talk to bjz 
[22:39:18] <Tobba> oh, rust-gamedev is a thing?
[22:39:26] <kimundi> yup
[22:39:29] <Tobba> I was considering messing around with rust gamedev but I kinda do wanna get the tree stuff finished
[22:39:43] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[22:39:49] *** Quits: lenstr (lenstr@95535B34.9636F313.7A27613B.IP) (No route to host)
[22:40:01] *** Joins: lenstr (lenstr@95535B34.9636F313.7A27613B.IP)
[22:40:04] *** Quits: maxli (maxli@moz-F47DD19B.student.cs.uwaterloo.ca) (Ping timeout)
[22:41:39] *** Quits: fabiand (fabiand@moz-1CD2837F.adsl.alicedsl.de) (Quit: Verlassend)
[22:41:49] *** Quits: lenstr (lenstr@95535B34.9636F313.7A27613B.IP) (Ping timeout)
[22:42:52] <eddyb> Tobba: burn down the forest already
[22:42:59] *** Joins: hdevalence (quassel@moz-D125A39F.home3.cgocable.net)
[22:43:46] <lucian> does let have a block form? let a = 1 { ... }; gives me a syntax error
[22:44:11] *** Quits: zztr (Thunderbir@moz-CA50D606.dsl.static.sonic.net) (Ping timeout)
[22:44:27] <Matthias247> let a = {...};
[22:45:04] <kimundi> lucian: what would a block form do?
[22:45:19] <lucian> kimundi: equivalent to { let a = 1; ... }
[22:45:21] <eddyb> lucian: you mean let (a = 1) {...}? no, it doesn't work like that
[22:45:30] <lucian> i don't particularly need it, but i was surprised it didn't work
[22:45:37] <lucian> let ... in equivalent
[22:45:48] <eddyb> err, yeah. what I was thinking was "with" from other languages
[22:46:02] *** Quits: alonlevy (alon@moz-30492E92.bb.netvision.net.il) (Ping timeout)
[22:46:14] <eddyb> lucian: we have an "in" keyword, feel free to open an issue (after checking if this was ever suggested before)
[22:46:25] <kimundi> lucian: yeah, no real need for that because we can just scope with {} 
[22:46:40] <lucian> kimundi: the only advantage is the slightly clearer intent
[22:46:47] <eddyb> (it should be trivial to implement, if we want it)
[22:46:56] <lucian> and it would be exactly python's with, but not hacky
[22:47:09] <lucian> eddyb: so let a = 1 in { ... }; ?
[22:47:17] <kimundi> Well, for what it's worth I had to ask you what such a syntax would even mean, so I find "clearer intent" disputable ;)
[22:47:40] <lucian> depends on one's background i guess
[22:47:50] *** Joins: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net)
[22:48:02] <lucian> ML/Haskell/Lisp folks will instantly know what it is, Python folks would be told it's with
[22:48:13] *** Joins: zztr (Thunderbir@moz-CA50D606.dsl.static.sonic.net)
[22:48:19] <eddyb> lucian: it should be any expression after "in"
[22:48:27] <eddyb> let a = 1 in a * a
[22:48:35] <Matthias247> kimundi: i also have no clue :)
[22:48:41] <eddyb> it looks cute, even though we don't need it
[22:48:54] <lucian> also vaguely related, i have a unit test where i want to compare something to Some(&1) and the only way i could satisfy the borrow checker was to let r = 1; and Some(&r). that looks bad
[22:49:05] <lucian> eddyb: agreed, on both accounts
[22:49:41] <eddyb> lucian: rvalue lifetimes should fix that - Some(&1) will work in the future, that is
[22:49:59] <lucian> i see
[22:50:17] *** Quits: simendsjo (Mibbit@moz-9859255A.getinternet.no) (Quit: http://www.mibbit.com ajax IRC Client)
[22:50:26] <lucian> i love Arc so much
[22:51:03] <depp> Arc loves you too
[22:52:17] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[22:52:37] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[22:53:20] *** Joins: dapz (textual@moz-F958911.hsd1.ca.comcast.net)
[22:54:23] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[22:54:51] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[22:54:52] <lucian> also, writing a persistent data structure is so nice. i wasn't expecting this
[22:55:08] <lucian> it's extremely clear where allocations happen and which data is shared when
[22:57:15] *** Parts: a_m0d|home (a_m0d@moz-322A4DE4.acanac.net) ()
[22:58:41] *** Joins: tikue (tkuehn@moz-879E86A9.hsd1.ca.comcast.net)
[23:00:29] *** Joins: dogurness (dogurness@moz-1BF32EBD.pitbpa.fios.verizon.net)
[23:00:33] *** Joins: bytbox (s@moz-54E13927.washdc.fios.verizon.net)
[23:00:45] *** Quits: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net) (Quit: syatchmenoff)
[23:06:48] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[23:08:30] *** Quits: jackneill (jackneill@moz-8864B729.pool.digikabel.hu) (Ping timeout)
[23:08:39] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[23:08:54] *** Quits: Jesin (Jesin@moz-4B662E55.washdc.fios.verizon.net) (Ping timeout)
[23:09:22] <wting> I can do a `make install` of 0.9, but `make check` fails with "make: *** [tidy] Error 123". Is there a workaround to get tests working?
[23:09:25] *** Joins: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net)
[23:09:32] *** Joins: Jesin (Jesin@moz-4B662E55.washdc.fios.verizon.net)
[23:10:14] <eddyb> wting: does `make tidy` show any useful information?
[23:10:57] *** Joins: watt (Mibbit@moz-E97CB210.nycmny.east.verizon.net)
[23:11:12] *** Joins: jroweboy (Mibbit@moz-18814A6B.provo.static.broadweavenetworks.net)
[23:11:32] <watt> hi is there a way to use rust to watch folders for file created and deleted?
[23:11:52] <depp> I doubt there's an existing library
[23:12:12] <depp> the solutions for C vary wildly from platform to platform
[23:12:21] <watt> how do we wrap inotify with rust in that case?
[23:12:23] <wting> watt: You might want to consider inotify as a C library.
[23:12:38] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[23:12:39] *** ChanServ sets mode: +ao brson brson
[23:12:43] <depp> mind you that's Linux only, but yes
[23:12:46] <eddyb> libuv has support for watchers, doesn't it? I know node.js has such things
[23:13:05] <eddyb> libgreen could provide watcher support using libuv in that case
[23:13:24] <watt> i look at the examples for c interface but didn't really know how to do that with inotify.
[23:14:44] <wting> eddyb: make tidy doesn't give any info when it fails: http://pastebin.com/dGW2Picb
[23:14:56] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[23:15:06] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[23:15:10] *** Joins: bleibig (bleibig@moz-B4D9C5AF.hsd1.ca.comcast.net)
[23:16:04] <eddyb> wting: everything after "Binaries checked into src:" are errors
[23:16:16] <eddyb> (everything ... is errors? or are errors?)
[23:16:40] <eddyb> wting: did you run "make" inside src?
[23:16:49] <wting> eddyb: yup
[23:16:56] <eddyb> .... why did you do that?
[23:17:03] <eddyb> I'm surprised it even worked
[23:17:29] <eddyb> wting: make is supposed to be ran in the top directory of the checkout/clone, not inside src
[23:17:52] <wting> ... lol that wasn't the case a year ago. :p
[23:18:26] *** Joins: sellout (Adium@DDFD3B9E.3AD4021.78322BBA.IP)
[23:18:35] <eddyb> don't mind me, then. but that's the issue, I would say
[23:18:49] <wting> but I don't have a Makefile in root.
[23:18:53] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[23:18:54] <wting> (besides Makefile.in)
[23:19:05] <kimundi> need to run configure first
[23:19:26] <flu-> What is the significance of top-of-file comment blocks starting with '/*!' rather than '/*' - does the former tie into a doc generation tool?
[23:19:45] <strcat> yes
[23:19:46] <sfackler> flu-: yes
[23:19:50] <flu-> k
[23:20:01] *** Quits: mib_r1owmu (Mibbit@71E37B0D.2F40DA9D.689607DE.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[23:20:04] <wting> kimundi: ahh ok, I've been running ../configure inside ./src out of old habits
[23:20:12] *** Quits: mwillsey (user@71E37B0D.2F40DA9D.689607DE.IP) (Client exited)
[23:20:34] *** Quits: cjs2 (Mibbit@A24C4196.B0CE3BD6.76F66111.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[23:24:02] *** Quits: tikue (tkuehn@moz-879E86A9.hsd1.ca.comcast.net) (Quit: tikue)
[23:24:11] <wting> eddyb: running in root makes no difference, make check still fails: http://pastebin.com/KwMQCk5n
[23:24:47] <eddyb> wting: rm -rf src/x86_64-unknown-linux-gnu
[23:24:57] <eddyb> then make tidy shouldn't complain anymore
[23:29:23] *** Joins: weekendrust (chatzilla@moz-1F0BDFEC.hsd1.wa.comcast.net)
[23:30:26] <wting> eddyb: thx, that worked
[23:30:56] *** Quits: silotis (quassel@moz-4B8C4631.oc.oc.cox.net) (Ping timeout)
[23:31:03] *** Joins: z0w0 (zack@moz-87AABEA0.lnse1.woo.bigpond.net.au)
[23:31:23] <LinearInterpol> Lol. One of my friends is complaining about the size of a program in Rust.
[23:31:29] *** Joins: silotis (quassel@moz-4B8C4631.oc.oc.cox.net)
[23:31:37] <LinearInterpol> He just compiled a file containing "fn main() { }", and it ended up being like 2MB.
[23:31:50] *** Joins: robhobbes (Mibbit@moz-2741C540.slkc.qwest.net)
[23:32:19] <eddyb> LinearInterpol: statically linked, the presence of dead code is caused by virtual interactions between runtime components
[23:32:23] <jroweboy> Hey everyone! I'm just starting to learn Rust and I'm wonder how would one find the length of a string in Rust? I can't seem to find it anywhere :/
[23:32:30] <eddyb> jroweboy: .len()
[23:32:38] <depp> length in what... characters? bytes?
[23:32:42] <weekendrust> just starting to learn some rust - trying to wrap my head around the M:N scheduling behavior.  On OS X and 0.9, if I spawn two tasks (which loop and print something out), I'm only seeing 1 tasks get executed.  If I spawn three tasks, two run.  Am I doing something wrong?
[23:32:50] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[23:32:54] <jroweboy> That's what I expected. Length in characters. its not len!() though?
[23:33:13] <eddyb> jroweboy: why !?
[23:33:15] <LinearInterpol> eddyb: What if he uses #[no_std]; ?
[23:33:20] *** Quits: avsej (avsej@D9A610B8.4841F515.FB33447D.IP) (Client exited)
[23:33:28] <depp> jroweboy: Why do you want length in characters?
[23:33:33] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[23:33:33] *** ChanServ sets mode: +ao brson brson
[23:33:36] <tedh> i'm seeing lots of llvm-lint "Undefined behavior" messages after updating today
[23:33:49] <eddyb> LinearInterpol: under 1KB, I would expect
[23:33:59] <LinearInterpol> thought so. told him to do that.
[23:34:06] <eddyb> won't allow you to do much
[23:34:08] <LinearInterpol> by the way, do you have any documentation for that and #[start]?
[23:34:10] *** Joins: lenstr (lenstr@95535B34.9636F313.7A27613B.IP)
[23:34:21] <LinearInterpol> Couldn't find any (then again, I didn't look all that hard..)
[23:34:31] <tedh> the only commit that looks like it could have affected this is the ty-cleanup stuff
[23:34:31] <jroweboy> Just parsing string input and stuff :) Thanks for the help!
[23:34:34] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[23:34:49] <eddyb> jroweboy: foo!() is invocation syntax for macros, not functions/methods
[23:35:08] <tedh> format!("{:?}", 1i) is enough to trigger it
[23:35:16] <depp> jroweboy: For parsing you usually want to pop the front character off one at a time... no need to get the length
[23:35:19] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[23:35:50] <eddyb> tedh: format is quite complex, can you find more isolated examples?
[23:35:55] <eddyb> tedh: O
[23:35:58] *** Quits: lenstr (lenstr@95535B34.9636F313.7A27613B.IP) (Ping timeout)
[23:36:05] <eddyb> err, random enter key
[23:37:00] <watt> i was looking around and saw that rust uses libuv.
[23:37:02] <eddyb> tedh: I'm responsible for those commits, and one of them changes how methods are called, but all tests pass so maybe it's not a serious issue. can you provide further information in #rust-internals?
[23:37:03] <tedh> fail!("hi") will get one message
[23:37:12] <watt> is that exposed to be used?
[23:37:25] <tedh> sure
[23:37:32] <eddyb> watt: librustuv contains the libuv bindings
[23:37:40] <watt> how do i use it?  sorry i am new to rust.
[23:38:04] <eddyb> watt: you'll have to take a look at its source, I doubt we auto-generate docs for a relatively internal library
[23:38:35] <eddyb> LinearInterpol: #[no_uv] will switch from libgreen (M:N) runtime to libnative (1:1) (with some other tweaks involved to get it running) - that is smaller, but still a lot to have. -Z lto might help to bring down the size
[23:38:49] *** Quits: magg (magg@1600179A.409429FF.3D0AE249.IP) (Quit: magg)
[23:38:55] <LinearInterpol> It did.
[23:39:16] *** Joins: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca)
[23:39:30] <watt> i am looking at it right now.
[23:39:37] <LinearInterpol> eddyb: Thanks man. :)
[23:39:37] <watt> it has a file watcher.
[23:40:15] <eddyb> watt: librustuv? and it's not exposed in std? interesting
[23:40:16] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[23:40:50] <watt> it is not in std.
[23:40:59] *** Quits: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca) (Ping timeout)
[23:41:02] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Ping timeout)
[23:41:15] <watt> i am seeing it here - https://github.com/mozilla/rust/blob/master/src/librustuv/file.rs
[23:42:21] <watt> i don't think it is exposed.
[23:42:33] <watt> fail at compile when use.
[23:44:14] *** Joins: magg (magg@1600179A.409429FF.3D0AE249.IP)
[23:45:10] <eddyb> watt: you have to "import" librustuv to use its API
[23:45:22] *** Joins: peanut (Mibbit@moz-D22665D8.lightspeed.cicril.sbcglobal.net)
[23:45:24] <eddyb> extern mod librustuv; might be enough, I'm not sure
[23:46:11] <watt> you mean put that in the file?
[23:47:00] <eddyb> watt: in your code, above "use" statements
[23:47:02] <watt> error: can't find crate for `librustuv`
[23:47:11] *** Quits: peanut (Mibbit@moz-D22665D8.lightspeed.cicril.sbcglobal.net) (Quit: http://www.mibbit.com ajax IRC Client)
[23:47:35] <eddyb> watt: err, no, just "extern mod rustuv;" - lib is implied
[23:48:32] <robhobbes> depp: you mentioned something about popping a char off one at a time. how would you do that in rust?
[23:48:34] <watt> this works extern mod rustuv;
[23:48:58] <depp> robhobbes: Two ways.  You can use an iterator, or you can use .slice_shift_char()
[23:49:11] <watt> thanks eddyb.
[23:49:31] <watt> i will muck around and see if it can be use to watch folders.
[23:49:38] <robhobbes> depp: will .slice_shirt_char() return false if the string is empty?
[23:49:53] <depp> robhobbes: it will fail
[23:50:19] <robhobbes> depp: that seems less than helpful...
[23:50:20] *** Quits: dapz (textual@moz-F958911.hsd1.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[23:50:29] <depp> robhobbes: just check if string is empty
[23:50:34] <depp> robhobbes: or use an iterator
[23:50:40] <robhobbes> okay
[23:50:41] <robhobbes> thanks
[23:50:51] <weekendrust> eddyb:is there a way to switch schedulers between both styles?
[23:50:55] *** Joins: dapz (textual@moz-F958911.hsd1.ca.comcast.net)
[23:51:04] *** Joins: Sodel_the_V (user@moz-853663E1.va.shawcable.net)
[23:51:08] *** Quits: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com) (Quit: Leaving...)
[23:51:16] <eddyb> weekendrust: I think so, ask acrichto or look around on reddit/mailing list/github issues
[23:51:21] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[23:52:34] *** Joins: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com)
[23:52:43] *** Joins: bheylin (brianheyli@moz-8255E94E.adsl.online.nl)
[23:53:04] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Quit: Leaving.)
[23:53:25] *** Joins: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru)
[23:53:29] <nif> is it possible to take a slice of a vector?
[23:53:37] <depp> yes
[23:53:43] <nif> great. :D
[23:53:52] <nif> what's the syntax? I'm having trouble finding it.
[23:54:13] <depp> http://static.rust-lang.org/doc/master/std/vec/trait.Vector.html
[23:54:27] <eddyb> it's actually in ImmutableVector ;)
[23:54:27] <depp> http://static.rust-lang.org/doc/master/std/vec/trait.ImmutableVector.html
[23:54:34] <eddyb> nif: .as_slice()
[23:54:34] <depp> yep
[23:54:46] <depp> .slice(), .slice_from(), .slice_to()
[23:54:47] <nif> great. I just wasn't looking very closely.
[23:54:48] <eddyb> nif: but it usually coerces nicely to a slice wherever required
[23:54:50] <kimundi> nif It either coerces automatically, or you can force it with .as_slice()
[23:55:02] *** Joins: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net)
[23:55:16] *** Quits: dredozubov (dredozubov@moz-1E374954.nationalcablenetworks.ru) (Ping timeout)
[23:56:04] <nif> alright, good to know. thanks everyone!
[23:56:06] *** Quits: magg (magg@1600179A.409429FF.3D0AE249.IP) (Quit: magg)
[23:58:46] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[23:59:06] *** Quits: glaebhoerl (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Quit: )
[23:59:14] <flu-> If I want to provide a typesafe subset of string values, say color names (the identifier Blue would map to the string "blue"), would an enum be the best way to achieve this? Or would a scoped block of constants be a better fit?
[23:59:20] *** Quits: weekendrust (chatzilla@moz-1F0BDFEC.hsd1.wa.comcast.net) (Quit: ChatZilla 0.9.90.1 [Firefox 26.0/20131205075310])
[23:59:31] <flu-> actually I answered my own question as I was typing that, nvm. Enums it is
