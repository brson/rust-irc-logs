[00:04:06] <brson> acrichto: the primary reason for tt_map is because i need the diagnostic message in two different places and one needs to be in literal form so it can go through format!
[00:04:22] <brson> i did look into using std::fmt at runtime but my impression was i would lose type safety
[00:04:31] <acrichto> cool, makes sense to me
[00:05:08] <acrichto> well hmm...
[00:05:26] *** Quits: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net) (Ping timeout)
[00:05:36] <acrichto> the extended description isn't a format string, right?
[00:05:44] <brson> no
[00:05:57] <acrichto> so it's can't be a hashmap stored in the sessioN?
[00:06:13] <acrichto> code => extended description
[00:06:26] <acrichto> code => Option<&'static str>
[00:07:30] <brson> i want the 'primary diagnostic message' too. when you say raise_fatal!("error doing {}", blah)' that "error doing {}" blah gets squirreled away so that when we later generate docs we can say "A0001: error doing {}\n\n extended description"
[00:07:51] <brson> not blah, but the string itself gets squirreled
[00:08:04] <acrichto> concat!() ?
[00:08:11] *** Quits: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP) (Quit: Lost terminal)
[00:08:25] <acrichto> format!(concat!("{}: ", $fmtstr), error_code $($arg)+)
[00:08:46] <acrichto> the error code would be a runtime thing
[00:09:01] <brson> that's not the issue. the section of code where the error is raised and where it is recorded in the database are in different locations
[00:09:11] <brson> and where it's raised it must be a literal
[00:10:26] <acrichto> oh!
[00:10:30] <acrichto> you want the format string recorded
[00:10:37] <brson> yeah
[00:10:44] <acrichto> oh yeah that's gotta be a compile-time thing
[00:10:45] <brson> to use as a description of the error
[00:10:57] <acrichto> you might be able to modify fmt::Arguments
[00:11:00] <acrichto> to have a pointer to the format string
[00:11:03] <acrichto> to look it up at runtime
[00:11:23] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[00:11:23] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14f7cefdf to 14f411b94: 02http://git.io/N3iJvQ
[00:11:23] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[00:11:33] <acrichto> but eh, both ways are fine
[00:11:48] <acrichto> having this functionality is more important than having it be themost beautiful; thing ever right now
[00:12:40] <brson> i'm going to go ahead and get these extensions into a snapshot so i can keep working. not sure if niko will show up to review any time soon
[00:15:24] <acrichto> sounds good to me
[00:15:30] <brson> I guess what matters most is that the syntax for raising diagnostics is acceptable
[00:15:52] <acrichto> the syntax you have looks totally reasonable
[00:16:03] <acrichto> it'd be kinda nice if you could make err/span_err private
[00:16:09] <acrichto> nad have the macros respect privacy
[00:16:14] <acrichto> but it doesn't work that way :(
[00:18:25] <brson> i'll probably rename them in a way that makes them obnoxious
[00:22:07] <dbaupp> .why_are_you_calling_this_directly_span_err
[00:22:50] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[00:22:50] <ghrust> 01[13rust01] 15alexcrichton 04force-pushed 06try from 147bcf5e9 to 142f73f49: 02http://git.io/k471pw
[00:22:50] <ghrust> 13rust/06try 142f73f49 15Alex Crichton: fixes
[00:22:50] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[00:23:24] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[00:23:24] <ghrust> 01[13rust01] 15alexcrichton 04deleted 06upstream at 142056091: 02http://git.io/PfwADQ
[00:23:24] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[00:27:04] *** Joins: TimAbraldes (quassel@moz-204A2E3F.hsd1.or.comcast.net)
[00:28:41] *** Quits: luz (lucy@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[00:29:46] *** Joins: luz (lucy@moz-CD18B14B.customer.cdi.no)
[00:29:52] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[00:37:35] *** Quits: luz (lucy@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[00:38:10] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[00:39:38] *** Joins: luz (lucy@moz-CD18B14B.customer.cdi.no)
[00:45:24] *** kimundi is now known as zz_kimundi
[00:46:02] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[00:46:44] *** Joins: dev14 (devarshdes@moz-4EB22C7B.san.res.rr.com)
[01:00:43] <bstrie> nmatsakis: that slide of yours, labeled "Servo"... surely those aren't actually screenshots of servo?
[01:06:30] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[01:06:30] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/0m8ZlA
[01:06:30] <ghrust> 13rust/06auto 1440d8a12 15Nick Cameron: item_impl holds an Option<> to the trait ref, not a list of trait refs. Therefore, we should not iterate over it.
[01:06:30] <ghrust> 13rust/06auto 145a6ca45 15bors: auto merge of #11415 : nick29581/rust/visit_trait_option, r=alexcrichton...
[01:06:31] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[01:06:32] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[01:06:32] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14f3a3cf7 to 14f411b94: 02http://git.io/N3iJvQ
[01:06:32] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[01:08:00] <cmr> brson, I don't think so?
[01:08:03] <cmr> acrichto, :(
[01:08:13] <cmr> acrichto, I thought multiple try builds could be going on at once.
[01:08:21] <acrichto> cmr: no worries!
[01:08:29] <acrichto> I'm keeping brson warm today
[01:08:36] <acrichto> lots of bors work on the bots
[01:08:36] <cmr> sorry
[01:08:51] <cmr> it feels like the last linux.conf.au wasn't that long ago..
[01:11:02] <cmr> acrichto, that explains why my earlier try build died then, too.
[01:11:15] <acrichto> oh my bad :(
[01:12:01] <bstrie> does this look like a pretty nasty bug to anyone else? http://www.reddit.com/r/rust/comments/1uxbgm/moving_ownership_via_borrowed_reference/
[01:12:13] <dbaupp> bstrie: yes...
[01:12:20] <bstrie> is it already filed?
[01:12:21] <acrichto> oh dear that looks bad
[01:12:33] <acrichto> maybe? not sure if that exact bug is filed
[01:12:44] <dbaupp> bstrie: it seems like something that concerning would've been noticed by now...
[01:12:49] <dbaupp> but I don't know
[01:13:25] *** Quits: dev14 (devarshdes@moz-4EB22C7B.san.res.rr.com) (Quit: dev14)
[01:13:33] <cmr> whaaaat
[01:13:37] <cmr> that let ax shouldn't be allowed.
[01:16:09] <cmr> acrichto, wait what's happening with #[boot]?
[01:16:30] <acrichto> cmr: brson and I thought about it, and #[start] is basically exactly what we want
[01:16:46] <acrichto> so the real solution is gonna be "use #[start]
[01:16:48] <acrichto> "
[01:16:54] <cmr> ok
[01:17:04] <acrichto> I'm gonna try to write up some dox this weekend
[01:17:13] <acrichto> like an official "guide to the runtime"
[01:17:23] <acrichto> for now I'm distracted with nmatsakis's talk :P
[01:17:28] * cmr is too
[01:18:39] <cmr> acrichto, once your try build is done can you push my upstream branch to it?
[01:18:59] <acrichto> cmr: mine should be done now
[01:19:14] <acrichto> I think try can handle more than one build though, they just all get queued up
[01:19:25] <acrichto> I've had like 6 running in parallel by accident before
[01:19:28] <cmr> well clearly not, if yours was cancelled when I pushed?
[01:19:34] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[01:20:36] <cmr> looks like it's done
[01:20:51] <acrichto> maybe I canceled it by accident
[01:20:59] <acrichto> I normally cancel my old builds when I push again
[01:21:09] <acrichto> and maybe I pushed, saw yours, canceled mine, and then something else happened...
[01:21:17] <acrichto> oh well, tis all good!
[01:24:01] *** Joins: geomyidae_ (uid214@moz-E77DEB21.irccloud.com)
[01:24:04] <geomyidae_> join #rust-gamedev
[01:25:11] *** Quits: dcrewi (david@moz-AB8667CE.gyrae.net) (Ping timeout)
[01:25:35] <cmr> I have 15 copies of the msvc++ runtime installed ._.
[01:28:02] *** Joins: vfetwnuncszu (david@moz-AB8667CE.gyrae.net)
[01:28:18] *** vfetwnuncszu is now known as dcrewi
[01:30:42] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[01:30:42] *** ChanServ sets mode: +ao dherman dherman
[01:32:56] *** Quits: TimAbraldes (quassel@moz-204A2E3F.hsd1.or.comcast.net) (Connection reset by peer)
[01:33:41] <bstrie> if a function is inlined, does that affect when locals to that function will be destroyed?
[01:34:18] <cmr> bstrie, not afaik
[01:34:56] <cmr> I'm not sure if llvm is allowed to reorder stuff like that
[01:45:25] <cmr> nmatsakis, note that we already have safe mmap bindings.
[01:46:41] <dbaupp> cmr: is there a safe way to get an fd?
[01:47:01] <cmr> not that I know of.
[01:47:21] <cmr> or actually
[01:47:25] <cmr> we have a CFile somewhere don't we?
[01:47:26] * cmr looks
[01:48:16] <cmr> seems not
[01:52:07] <cmr> Hah I like how the .exe link is "using rust on windows"
[01:58:04] *** Quits: canhtak (canhtak@moz-DB18D73D.wl.t.ulaval.ca) (Quit: canhtak)
[01:58:26] <bstrie> nmatsakis keeps coming back to this spectrum where rust is "more control and more safety", but now I'm curious about what our perfect dual is
[01:58:34] <bstrie> i.e. a language with no control and no safety
[01:58:49] <cmr> brainfuck
[01:58:54] <cmr> or maybe malbolge
[02:00:06] <dbaupp> exactly the same as haskell where the "GC" just calls free on a random 5% of the allocations
[02:00:21] <bstrie> haha
[02:00:22] <bstrie> perfect
[02:01:04] <cmr> whua
[02:01:10] <cmr> windows 8 doesn't have edit!?!?
[02:02:19] <dbaupp> cmr: http://gnuwin32.sourceforge.net/packages/ed.htm
[02:02:42] <dbaupp> the one true editor
[02:02:45] <cmr> indeed
[02:03:17] <bstrie> I need to invent a text editor even more minimalist than ed
[02:03:19] <bstrie> "e"
[02:03:25] <bstrie> "the one truer text editor"
[02:04:53] * dbaupp has a lot of trouble not typing "metadata" as "meatdata"
[02:06:56] <brson> dbaupp: re-r? https://github.com/mozilla/rust/pull/11463
[02:11:42] <acrichto> dbaupp: we need more meatdata
[02:16:24] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[02:16:24] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/0m8ZlA
[02:16:24] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[02:17:52] *** Joins: canhtak (canhtak@moz-DB18D73D.wl.t.ulaval.ca)
[02:21:22] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[02:21:22] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/-PbhrA
[02:21:22] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[02:21:23] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[02:21:23] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/rkXxDA
[02:21:23] <ghrust> 13rust/06auto 144fc0452 15Brendan Zabarauskas: Remove re-exports of std::io::stdio::{print, println} in the prelude....
[02:21:23] <ghrust> 13rust/06auto 14a34727f 15bors: auto merge of #11416 : bjz/rust/remove-print-fns, r=alexcrichton...
[02:21:24] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[02:21:40] <bjz> acrichto: fingers crosse!
[02:21:45] <bjz> *crossed
[02:27:17] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[02:27:30] <nmatsakis> bstrie: no, those were random screenshots I pulled  from typing "twitter" into google image search or something like that
[02:27:36] * nmatsakis too lazy to make his own screenshots
[02:28:00] <nmatsakis> and then resized so they would be squares, figuring I'd just flit through the slide real quick so that nobody noticed the aspect ratios
[02:28:49] <cmr> nmatsakis, nice presentation :)
[02:29:10] <nmatsakis> cmr: thanks. yeah I forgot we had mmap bindings. I guess/hope they mostly work like I suggested? :)
[02:29:23] <cmr> nmatsakis, not sure, I don't remember the details
[02:29:30] * nmatsakis shrugs
[02:30:05] <nmatsakis> mmap bindings etc make for an interesting example, I think, because while you can make bindings that are safe when used in isolation,
[02:30:14] <nmatsakis> I guess if you had two sets of "safe" mmap bindings,
[02:30:24] <nmatsakis> it's...maybe plausible that one would unmap bindings the other made
[02:30:27] <nmatsakis> but probably not
[02:30:39] <nmatsakis> because I can't imagine how you could cal something safe that unmaps memory it did not itself map
[02:30:50] <cmr> you can't, of course
[02:30:53] <cmr> ours does it with dtors.
[02:31:04] <nmatsakis> right
[02:31:23] <nmatsakis> I think over time though we'll hit examples where you can make things are ... almos safe
[02:31:32] <nmatsakis> which is fine. 
[02:33:12] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[02:41:03] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[02:42:53] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[02:42:53] *** ChanServ sets mode: +ao dherman dherman
[02:45:51] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Quit: Leaving...)
[02:52:01] *** a_m0d|home is now known as a_m0d|afk
[02:58:03] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[02:59:30] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[03:08:42] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[03:08:43] *** ChanServ sets mode: +ao dherman dherman
[03:12:41] *** Quits: pnkfelix (pnkfelix@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Input/output error)
[03:14:33] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[03:22:11] *** Quits: zz_kimundi (kimundi@moz-1273C77B.dip0.t-ipconnect.de) (Ping timeout)
[03:23:11] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[03:25:44] *** Joins: zz_kimundi (kimundi@moz-B4EEA79E.dip0.t-ipconnect.de)
[03:25:46] *** zz_kimundi is now known as kimundi
[03:27:58] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[03:31:57] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[03:31:57] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/rkXxDA
[03:31:57] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[03:35:27] *** Joins: doomlord_ (servitor@moz-CA917A47.range86-184.btcentralplus.com)
[03:36:27] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[03:36:27] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/TjeR8A
[03:36:27] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[03:36:27] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[03:36:27] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/SCIEKg
[03:36:27] <ghrust> 13rust/06auto 14781e99b 15Patrick Walton: libsyntax: Make managed box `@` patterns obsolete
[03:36:27] <ghrust> 13rust/06auto 148add909 15Patrick Walton: librustc: Remove `@` pointer patterns from the language
[03:36:28] <ghrust> 13rust/06auto 144a66d93 15bors: auto merge of #11305 : pcwalton/rust/at-patterns, r=pcwalton...
[03:36:30] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[03:36:42] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[03:37:23] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[03:47:19] *** Joins: arcnor (arcnor@moz-C48B224D.lns20.syd7.internode.on.net)
[03:52:25] <arcnor> hi guys, is there a good grammar for rust, preferably for the latest version?
[03:52:39] <arcnor> I found the ANTLR one, but that one was updated 8 months ago
[03:53:07] <arcnor> I saw someone saying on the mailing list that for 0.7 one of the things in the TODO was "extracting" the grammar from libsyntax or something like that
[03:53:17] <arcnor> just wondering if that got done
[03:53:35] <dbaupp> I don't think so
[03:54:56] <arcnor> does anyone have any idea of how that was even possible? i.e. does that library have the parser in some generic format that can be parsed with a bit of help?
[03:55:07] <dbaupp> nope
[03:55:11] <dbaupp> it's all hand coded Rust
[03:55:21] <arcnor> then I don't understand what that message was about :P
[03:55:36] <arcnor> I'm assuming he/she meant manually, then
[03:55:55] * dbaupp doesn't know
[03:56:02] <arcnor> https://mail.mozilla.org/pipermail/rust-dev/2013-April/003741.html
[03:56:05] <arcnor> that was the message, found it
[03:56:48] <dbaupp> well "automating" seems to imply non-manually... I don't exactly understand it either
[03:57:45] <dbaupp> although a rewrite of the parser to use a formal grammar/be amenable to having one extracted is a possibility too
[03:58:40] <arcnor> ok, I'll try to "extract" one from the manual page then, although (as it says at the top) that one is incomplete
[03:58:56] <dbaupp> erm
[03:58:57] <dbaupp> and wrong
[03:59:26] <dbaupp> updating the ANTLR one is likely to be the path of least pain, unfortunately. :(
[04:00:37] <arcnor> so bad... but well, it's understandable at this point
[04:08:30] *** Quits: arcnor (arcnor@moz-C48B224D.lns20.syd7.internode.on.net) (Client exited)
[04:10:33] *** Joins: arcnor (arcnor@moz-C48B224D.lns20.syd7.internode.on.net)
[04:17:45] *** Joins: gwty (gwtypc@8A5CB0D0.18989014.F44414AF.IP)
[04:34:44] *** Quits: gwty (gwtypc@8A5CB0D0.18989014.F44414AF.IP) (Ping timeout)
[04:36:29] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[04:36:29] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 144a66d93 to 14a34727f: 02http://git.io/N3iJvQ
[04:36:29] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[04:38:24] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[04:39:59] *** a_m0d|afk is now known as a_m0d
[04:40:13] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[04:44:09] *** Quits: a_m0d (a_m0d@moz-322A4DE4.acanac.net) (Quit: Leaving.)
[04:46:05] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[04:58:06] <acrichto> brson: do you have an opinion on the native timers patch for now?
[04:58:20] <acrichto> perhaps we should wait to settle the api?
[04:59:24] <brson> acrichto: I think it can go in
[05:10:56] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[05:11:26] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[05:11:26] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14bd45f23 to 14a34727f: 02http://git.io/N3iJvQ
[05:11:26] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[05:11:29] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[05:11:29] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/XJMegQ
[05:11:29] <ghrust> 13rust/06auto 14ba74391 15thomas: Switched both non_camel_case_type and non_uppercase_constants lints to warn
[05:11:29] <ghrust> 13rust/06auto 14db17e5b 15thomas: Updated copyright
[05:11:29] <ghrust> 13rust/06auto 145356345 15bors: auto merge of #11457 : TisButMe/rust/disallow_stylistic_lint, r=cmr...
[05:11:30] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[05:16:54] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Quit: Lost terminal)
[05:18:31] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:21:38] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[05:23:32] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[05:26:23] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[05:26:23] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 145356345 to 14a34727f: 02http://git.io/N3iJvQ
[05:26:23] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[05:26:24] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[05:26:24] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/2AvGpQ
[05:26:24] <ghrust> 13rust/06auto 14580db13 15Corey Richardson: syntax: add better error message for unexpected inner attrs...
[05:26:24] <ghrust> 13rust/06auto 14980dd1d 15Corey Richardson: driver: use libnative
[05:26:25] <ghrust> 13rust/06auto 142056091 15Corey Richardson: Align stack size to page size
[05:26:27] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[05:26:59] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[05:30:22] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[05:30:38] *** Joins: gwty (gwtypc@F7E523E8.8B53FFE9.AAF4A5CC.IP)
[05:32:15] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[05:36:27] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[05:36:27] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1484cab8d to 14a34727f: 02http://git.io/N3iJvQ
[05:36:27] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[05:36:29] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[05:36:29] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/KVSNpQ
[05:36:29] <ghrust> 13rust/06auto 140d4c51e 15Ted Horst: fix uninstall target with configurable rustlib directory
[05:36:29] <ghrust> 13rust/06auto 148de3813 15bors: auto merge of #11459 : tedhorst/rust/uninstall_rustlib, r=alexcrichton...
[05:36:29] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[05:41:00] <jack> oh man. i really want by-value trait methods :(
[05:43:15] <dbaupp> cmr: "We need to perform at least as well as GMP for me to even consider it" does *anything* other than GMP itself perform at least as well as GMP?
[05:47:13] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[05:47:14] *** ChanServ sets mode: +ao pcwalton pcwalton
[05:48:55] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[05:51:11] <jack> i can cast ~Trait to *Trait?
[05:51:22] <dbaupp> I don't think *Trait exists as a thing
[05:51:50] <jack> we won't have by-value ~Trait, so i'm trying to hack around it with a transmute.
[05:51:50] <cmr> dbaupp: intel's proprietary libs do :)
[05:52:15] <dbaupp> cmr: makes sense
[05:52:27] <dbaupp> cmr: (presumably only on intel's hardware though.)
[05:52:59] <dbaupp> jack: you have a `self` method you're trying to call on a `~Trait`?
[05:53:02] <sfackler> jack: have you tried ~self methods? I may be misremembering but I think that was a workaround for the lack of by value self methods
[05:53:13] <dbaupp> sfackler: that's correct
[05:53:14] <jack> hmm.. i'll try ~self.
[05:54:41] <cmr> dbaupp: but yes, if we default to a bigint I want it to be state-of-the-art
[05:55:28] <dbaupp> cmr: I totally agree
[05:55:29] <sfackler> cmr: gmp has like a decade of crazy assembly microoptimization behind it
[05:57:27] <jack> how do i cast from ~Trait to the sturct that ipmlements that trait?
[05:57:47] <jack> does ~Trait as ~Struct work?
[05:57:49] <cmr> jack: you mostly don't, it's crazy unsafe.
[05:58:03] <cmr> std::any has safe interfaces for it.
[05:58:06] <sfackler> Any is the way to do it, but I don't think you can go from ~Trait to ~Any
[05:58:06] <dbaupp> jack: via the Any trait
[05:59:31] <sfackler> is there any reason that Rust can't just link to GMP for its bigints like Haskell does? I'm not super sure how the LGPL works
[05:59:33] <jack> with move?
[05:59:47] <cmr> sfackler: licensing issues :(
[06:00:00] <cmr> can't static link without making your binary relinkable.
[06:00:14] <dbaupp> There's https://github.com/wbhart/bsdnt too, which isn't ridiculously slower than GMP
[06:00:26] <sfackler> oh right :(
[06:00:57] <dbaupp> (https://news.ycombinator.com/item?id=6990233 benchmarks etc.)
[06:00:58] <cmr> ohh we get mersenne_twister for free too
[06:01:28] <dbaupp> my implementation of MT ended up being slower than ISAAC, fwiw :P (maybe I was just doing it wrong...)
[06:01:47] <cmr> I remember that
[06:02:00] <cmr> I feel like I saw a paper that showed MT being bad, too.
[06:13:46] <dbaupp> klutzy: you should still submit the transmute_mut commit as a patch
[06:14:39] <klutzy> dbaupp: yeah, but it's quite small so I'm going to add it to another pr later
[06:15:08] <cmr> dbaupp: bsdnt looks nice.
[06:15:13] <klutzy> dbaupp: I was splitting https://github.com/klutzy/rust/compare/rustpkg-cleanup into small prs
[06:15:45] <klutzy> since some patches may need discussion
[06:16:44] <dbaupp> cmr: worth experimenting with?
[06:16:55] <cmr> dbaupp: I think so.
[06:18:47] <jack> i can't seem to cast ~Trait to ~Any
[06:19:01] <jack> and it doesn't coerce.
[06:19:05] <cmr> :(
[06:19:16] <jack> maybe i'm trying to use it wrong.
[06:19:35] <sfackler> I think it may just not be doable now
[06:19:40] <dbaupp> I think you'll need Trait to explicit inherit from Any
[06:19:47] <dbaupp> trait Trait: Any { ... }
[06:19:59] <sfackler> iirc there are resolve issues with ~Trait and supertraits
[06:20:15] <jack> using it wrong. there we got.
[06:20:32] <jack> i just did use std::any::AnyOwnExt;
[06:20:37] <jack> and then i could call move
[06:24:19] *** Joins: jpoirier_ (jpoirier@moz-150F5176.dhcp.ftwo.tx.charter.com)
[06:24:23] *** Quits: jpoirier (jpoirier@moz-150F5176.dhcp.ftwo.tx.charter.com) (Connection reset by peer)
[06:24:44] <jack> If i have Option<~Trait> can i somehow get to Option<~Struct> via ~Any without moving out?
[06:25:20] *** Joins: jpoirier (jpoirier@moz-150F5176.dhcp.ftwo.tx.charter.com)
[06:25:20] *** Quits: jpoirier_ (jpoirier@moz-150F5176.dhcp.ftwo.tx.charter.com) (Connection reset by peer)
[06:25:33] <jack> AnyRefExt
[06:25:34] <jack> whee
[06:26:41] *** Joins: jpoirier_ (jpoirier@moz-150F5176.dhcp.ftwo.tx.charter.com)
[06:26:44] *** Quits: jpoirier (jpoirier@moz-150F5176.dhcp.ftwo.tx.charter.com) (Connection reset by peer)
[06:29:57] <jack> i have Option<~Foo> and matching Some(ref mut foo) gives me an &mut ~Foo
[06:30:04] <jack> instead of &mut Foo
[06:30:15] <jack> how do I get &mut Foo?
[06:30:39] <cmr> ref mut *foo, maybe?
[06:30:49] <cmr> I've done this twice before
[06:30:57] <cmr> every time I'm wrong the first time
[06:31:01] <cmr> and every time dbaupp corrects me
[06:31:20] <dbaupp> ~ref mut foo
[06:31:27] <cmr> that's the one
[06:31:37] <cmr> dbaupp to the rescue <3
[06:31:47] <dbaupp> it's a ~<pattern> to go inside the ~Foo, and then `ref mut <ident>` to get a reference to that piece of memory
[06:32:04] <dbaupp> you can also just write *foo and let it coerce to a &mut Foo
[06:32:12] <dbaupp> (i.e. *foo at the point of use)
[06:32:25] <jack>  error: mismatched types: expected `~script::dom::node::LayoutData:Send` but found a ~-box pattern
[06:32:38] <dbaupp> oh, is it a trait object?
[06:32:41] <jack> yes.
[06:32:49] <dbaupp> that's a horrible error message :(
[06:32:51] <jack> i'll have to coerce i guess.
[06:33:00] * dbaupp files a bug
[06:34:53] <jack> ok. now i have &mut Foo, and of course it can't do AnyRefExt methods.
[06:35:32] <jack> duh. i want AnyMutRefEx.
[06:36:39] <jack> that doesn't work either.
[06:37:05] <dbaupp> https://github.com/mozilla/rust/issues/11469
[06:37:39] <bjz> acrichto dbaupp: yay, numeric redux #100001: https://github.com/bjz/num-rs/blob/master/src/lib.rs - I feel a ton better doing an algebraic-style thing when I know it's not going to be in the std
[06:37:40] *** Joins: tikue (tkuehn@moz-879E86A9.hsd1.ca.comcast.net)
[06:38:09] <dbaupp> bjz: !
[06:38:12] <dbaupp> numbe-rs
[06:38:20] <dbaupp> would be a brilliant name
[06:38:21] <cmr> hahahah
[06:38:25] <bjz> HAHA
[06:38:29] <Eridius> extern mod numbe;
[06:38:42] <dbaupp> Eridius: none of your logic here, please. :P
[06:40:04] <bjz> I don't want folks doing generic math stuff to be hit once we start making std::num simpler again, so I think its best to work on this separately
[06:40:34] <dbaupp> bjz: um.. why aren't the integers commutative rings?
[06:42:28] <jack> even doing `trait Foo: Any {}` i can't get &mut Foo to work as &mut Any
[06:42:41] <dbaupp> bjz: but, yeah, out-of-libstd development works better
[06:42:43] <jack> it just can't find the as_mut() method.
[06:42:45] <bjz> dbaupp: that's what I was going to ask you - the multiplicative inverse is an issue. if we had associated types, we could make it go to a rational for Integers only I guess
[06:42:48] <jack> any ideas?
[06:43:10] <dbaupp> bjz: integers are a commutative ring always...
[06:43:22] <Eridius> jack: where is .as_mut() defined?
[06:43:25] <dbaupp> bjz: they're not a field, but they are definitely a ring
[06:43:38] <Eridius> jack: I see it on AnyMutRefExt but not on Any
[06:43:41] <jack> Eridius: std::any::AnyMutRefExt
[06:43:42] <Eridius> ooh that's defined for Any
[06:43:50] <dbaupp> jack: you may have to add an equivalent method to the Foo trait
[06:43:50] <Eridius> is it in scope?
[06:43:55] <dbaupp> or something
[06:44:00] <jack> yes
[06:44:01] * dbaupp doesn't know
[06:44:08] <Eridius> actually that's a good question. Do traits impl'd for Any work for traits that inherit Any?
[06:44:48] <bjz> dbaupp: I'm right with the MultiplicativeC definition right? https://github.com/bjz/num-rs/blob/master/src/lib.rs#L132-L155
[06:44:50] <jack> i think changin the coerce to &mut Foo:Any fixed it.
[06:45:04] <dbaupp> bjz: oh, hum
[06:45:11] <jack> this is beautiful:
[06:45:16] <jack>             Some(ref mut layout_data) => {
[06:45:16] <jack>                 let layout_data: &mut LayoutData:Any = *layout_data;
[06:45:17] <jack>                 let layout_data = layout_data.as_mut::<PrivateLayoutData>().unwrap();
[06:45:30] <dbaupp> bjz: having commutative multiplication doesn't imply that there is multiplicative inverses
[06:45:32] <jack> the things i do for safety.
[06:45:37] <bjz> aha
[06:45:47] <jack> oh wait.
[06:45:51] <jack> that doesn't work eitehr.
[06:45:57] <jack> error: only the builtin traits can be used as closure or object bounds
[06:46:10] <jack> I have no idea how to use AnyMutRefExt then.
[06:46:11] <dbaupp> bjz: (also, the first sentence of the docs for MultiplcativeC mentions "addition operation"?)
[06:46:21] <bjz> woop - copy/paste
[06:46:30] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[06:46:30] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/KVSNpQ
[06:46:30] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[06:46:37] <jack> maybe i'm the first to try it :)
[06:46:37] <dbaupp> jack: is some unsafe code acceptable here?
[06:47:27] <jack> dbaupp: it's already unsafe
[06:47:28] <jack> so yes
[06:47:47] <bjz> dbaupp: cheers sir
[06:48:16] <dbaupp> you can transmute to `(&mut PrivateLayoutData, uint)` and use the first element
[06:49:28] <dbaupp> possibly going via .get_type_id() (which is a method straight on Any, so inheriting from Any should be enough) and something with TypeId
[06:49:42] <jack> how does get_type_id work?
[06:49:50] <jack> i mean, how does that help me
[06:50:08] <dbaupp> it'd allow you to make it marginally safer
[06:50:13] <dbaupp> by doing the check Any does manually
[06:50:22] <dbaupp> (or you could just do the transmute unchecked, of course.)
[06:50:28] *** Quits: gwty (gwtypc@F7E523E8.8B53FFE9.AAF4A5CC.IP) (Ping timeout)
[06:50:35] <jack> does as_mut_void_ptr give me a pointer to the struct?
[06:50:44] <dbaupp> I assume so
[06:50:51] <jack> that maybe enough :)
[06:51:27] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[06:51:27] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/yB6v3w
[06:51:27] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[06:52:14] *** Quits: canhtak (canhtak@moz-DB18D73D.wl.t.ulaval.ca) (Quit: canhtak)
[06:57:06] *** Joins: gwty (gwtypc@F7E523E8.8B53FFE9.AAF4A5CC.IP)
[07:05:47] *** Quits: arcnor (arcnor@moz-C48B224D.lns20.syd7.internode.on.net) (Ping timeout)
[07:13:56] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[07:16:26] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[07:16:26] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14823312e to 148de3813: 02http://git.io/N3iJvQ
[07:16:26] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[07:16:29] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[07:16:29] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/auCVCg
[07:16:29] <ghrust> 13rust/06auto 1460e096a 15Brian Anderson: rustc: Fix formatting of env! error message...
[07:16:29] <ghrust> 13rust/06auto 14cdc4494 15Brian Anderson: syntax: Fix capitalization in macro_parser errors
[07:16:30] <ghrust> 13rust/06auto 143d4f10d 15bors: auto merge of #11463 : brson/rust/envcaps, r=huonw...
[07:16:32] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[07:23:30] *** Joins: jaeholee (uid4856@moz-31ABA2C0.irccloud.com)
[07:46:46] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[07:47:24] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[08:01:35] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[08:01:35] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 143d4f10d to 148de3813: 02http://git.io/N3iJvQ
[08:01:35] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[08:01:36] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[08:01:36] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/71JTnw
[08:01:36] <ghrust> 13rust/06auto 14c2e6673 15Patrick Walton: librustc: Check restrictions on all subcomponents of a path when moving...
[08:01:36] <ghrust> 13rust/06auto 14f0541d5 15bors: auto merge of #11465 : pcwalton/rust/borrow-check-bug, r=pcwalton...
[08:01:36] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[08:14:25] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Quit: Textual IRC Client: www.textualapp.com)
[08:18:33] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[08:20:55] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[08:23:43] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[08:25:34] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[08:29:52] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:33:25] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:42:48] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[08:42:56] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[08:43:19] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[08:46:20] *** Quits: tikue (tkuehn@moz-879E86A9.hsd1.ca.comcast.net) (Ping timeout)
[08:47:03] *** Quits: ktt3ja (ktt3ja@moz-54586A12.washdc.fios.verizon.net) (Quit: Leaving)
[08:47:33] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[09:08:51] *** Quits: gwty (gwtypc@F7E523E8.8B53FFE9.AAF4A5CC.IP) (Ping timeout)
[09:16:32] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[09:16:32] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/71JTnw
[09:16:32] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[09:21:50] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[09:21:50] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/6YNQrw
[09:21:50] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[09:22:19] *** Joins: rca (rcatolino@moz-F434D9F9.adsl.proxad.net)
[09:31:25] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[09:33:09] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[09:37:19] *** Joins: mr_evil (Mibbit@moz-F62F3603.hsd1.ca.comcast.net)
[09:48:53] *** Parts: mr_evil (Mibbit@moz-F62F3603.hsd1.ca.comcast.net) ()
[10:17:27] *** Quits: kimundi (kimundi@moz-B4EEA79E.dip0.t-ipconnect.de) (Ping timeout)
[10:20:53] *** Joins: zz_kimundi (kimundi@moz-73A8AA3F.dip0.t-ipconnect.de)
[10:20:54] *** zz_kimundi is now known as kimundi
[10:24:16] *** Quits: kimundi (kimundi@moz-73A8AA3F.dip0.t-ipconnect.de) (Ping timeout)
[10:27:53] *** Joins: zz_kimundi (kimundi@moz-805FAAC7.dip0.t-ipconnect.de)
[10:27:54] *** zz_kimundi is now known as kimundi
[10:36:52] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[10:36:52] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/bRiB9g
[10:36:52] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[10:41:26] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[10:41:26] <ghrust> 01[13rust01] 15bors pushed 6 new commits to 06auto: 02http://git.io/_kBs_g
[10:41:26] <ghrust> 13rust/06auto 1418e7f3b 15Alex Crichton: rustdoc: Don't strip empty modules with documentation...
[10:41:26] <ghrust> 13rust/06auto 14b1eaeb5 15Alex Crichton: doc: build the docs for librustuv...
[10:41:26] <ghrust> 13rust/06auto 1479e144e 15Alex Crichton: rustdoc: Get --version working...
[10:41:29] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[10:45:52] *** Joins: eddyb (eddy@EE946B63.921A1753.FCAAE698.IP)
[10:47:17] <eddyb> task '[run-pass] run-pass/match-pattern-drop.rs' failed at 'explicit failure'
[10:47:23] <eddyb> I thought I ran rpass locally :/
[10:49:14] *** Quits: eddyb (eddy@EE946B63.921A1753.FCAAE698.IP) (Ping timeout)
[10:50:17] *** Joins: gwty (gwtypc@17C8B8C7.AD96D6D0.137C914F.IP)
[10:54:54] *** Joins: eddyb (eddy@EE946B63.921A1753.FCAAE698.IP)
[11:08:41] <eddyb> cmr, dbaupp: could someone r=pcwalton on https://github.com/mozilla/rust/pull/11252? I failed one test because I replaced a memcpy with copy_to instead of move_to (so it was leaking @T)
[11:09:27] *** Quits: gwty (gwtypc@17C8B8C7.AD96D6D0.137C914F.IP) (Ping timeout)
[11:12:41] *** Quits: eddyb (eddy@EE946B63.921A1753.FCAAE698.IP) (Ping timeout)
[11:17:26] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[11:32:24] *** Joins: eddyb (eddy@EE946B63.921A1753.FCAAE698.IP)
[11:35:16] <eddyb> dbaupp: thanks :)
[11:36:51] *** Joins: summerlight_ (summerligh@327FC32B.2C956A45.501EFF44.IP)
[11:37:02] *** Quits: eddyb (eddy@EE946B63.921A1753.FCAAE698.IP) (Ping timeout)
[11:37:34] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[11:47:35] *** Joins: gwty (gwtypc@17C8B8C7.AD96D6D0.137C914F.IP)
[11:49:56] *** Quits: summerlight_ (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[11:56:24] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[11:56:24] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/_kBs_g
[11:56:24] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[12:01:38] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[12:01:38] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/7RhxrA
[12:01:38] <ghrust> 13rust/06auto 14d644a3f 15Eduard Burtescu: Removed obsolete 'e' prefix on ty_evec and ty_estr.
[12:01:38] <ghrust> 13rust/06auto 14c458d0d 15Eduard Burtescu: Removed free_glue from tydesc (the code is still generated, but inlined in drop_glue).
[12:01:39] <ghrust> 13rust/06auto 1489fb3ea 15Eduard Burtescu: Use the right type for self in methods and remove obsoleted items....
[12:01:41] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[12:46:27] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[12:46:27] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/fPE_Ew
[12:46:27] <ghrust> 13rust/06auto 14d578ecc 15klutzy: extra::workcache: Remove unused Logger
[12:46:27] <ghrust> 13rust/06auto 14e19b1b1 15bors: auto merge of #11468 : klutzy/rust/workcache-cleanup, r=alexcrichton
[12:46:27] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[13:17:56] <bjz> posted nmatsakis' presentation: https://news.ycombinator.com/newest
[13:40:49] *** Joins: canhtak (canhtak@moz-DB18D73D.wl.t.ulaval.ca)
[13:41:51] *** Joins: gwty_ (gwtypc@17C8B8C7.AD96D6D0.137C914F.IP)
[13:56:59] *** Joins: blank_na1e (blank_name@7D3AA8DE.3C877FC9.53C6B850.IP)
[13:57:38] *** Quits: blank_name (blank_name@C5C84EB0.9E887BEB.53C6B850.IP) (Ping timeout)
[14:06:25] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[14:06:25] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/fPE_Ew
[14:06:25] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[14:11:25] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[14:11:25] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/4oLcgQ
[14:11:25] <ghrust> 13rust/06auto 1460e096a 15Brian Anderson: rustc: Fix formatting of env! error message...
[14:11:25] <ghrust> 13rust/06auto 14cdc4494 15Brian Anderson: syntax: Fix capitalization in macro_parser errors
[14:11:26] <ghrust> 13rust/06auto 1499df8a3 15bors: auto merge of #11463 : brson/rust/envcaps, r=huonw...
[14:11:28] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[14:14:16] *** Quits: gwty (gwtypc@17C8B8C7.AD96D6D0.137C914F.IP) (Ping timeout)
[14:14:37] *** Quits: gwty_ (gwtypc@17C8B8C7.AD96D6D0.137C914F.IP) (Ping timeout)
[14:14:57] *** Joins: gwty (gwtypc@17C8B8C7.AD96D6D0.137C914F.IP)
[14:15:37] *** Joins: gwty_ (gwtypc@17C8B8C7.AD96D6D0.137C914F.IP)
[14:19:50] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[14:19:50] *** ChanServ sets mode: +ao dherman dherman
[14:19:56] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[14:23:08] *** Joins: eddyb (eddy@EDE07015.D51DAF03.FB866788.IP)
[14:23:53] <eddyb> oh come on... dbaupp: http://buildbot.rust-lang.org/builders/auto-bsd-64-opt/builds/3290/steps/test/logs/stdio
[14:26:12] *** Quits: gwty (gwtypc@17C8B8C7.AD96D6D0.137C914F.IP) (Ping timeout)
[14:26:12] *** Quits: gwty_ (gwtypc@17C8B8C7.AD96D6D0.137C914F.IP) (Ping timeout)
[14:26:56] <dbaupp> eddyb: I saw
[14:27:31] <dbaupp> eddyb: (you know that's caused by the check-fast driver, right?)
[14:38:01] <eddyb> dbaupp: riiight. *sigh* another easy mistake that can't be caught by running check locally
[14:38:14] <dbaupp> eddyb: yes it can :P
[14:38:18] <dbaupp> `make check-fast`
[14:39:02] <eddyb> well, yeah, but if you remember about that, you might as well not forget "pub" before "fn main"
[14:39:35] * dbaupp has forgotten the `pub` multiple times :(
[14:40:01] <eddyb> at least it's not "FreeBSD is the new Android". that would be fun
[14:41:19] <eddyb> dbaupp: what's the target for check-fast/stage1?
[14:41:30] <dbaupp> dunno
[14:41:39] <dbaupp> just let the bots do it :P
[14:42:16] <dbaupp> (if your test doesn't use any of the fancy // compiler-flags: and so on directives then pub fn main in run-pass should fix it fine.)
[14:42:34] <eddyb> dbaupp: r=pcwalton, take two
[14:43:53] <eddyb> dbaupp: hmm, does snapshot testing error on "NOTE remove after next snapshot"?
[14:44:38] <dbaupp> don't tihnk so
[14:44:48] * dbaupp hasn't used the snap testing yet
[14:45:12] <eddyb> I guess it's just there in tidy as a reminder
[14:48:15] <eddyb> (interesting, I'm first in the "approved" list, again)
[14:48:45] <eddyb> dbaupp: thanks btw... I was hoping it's done with so I can just go ahead and start working on other stuff
[14:50:05] <dbaupp> eddyb: "approved" is sorted by priority first, and then by PR#
[14:50:29] <dbaupp> so having an old PR puts you at the front of the queue for each r+, basically.
[14:50:35] <eddyb> dbaupp: ah, that explains it, it's ancient :P
[15:00:10] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[15:01:57] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[15:26:23] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[15:26:23] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/4oLcgQ
[15:26:23] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[15:31:41] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[15:31:41] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/8kgK6Q
[15:31:41] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[15:31:45] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[15:31:45] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/85dXJg
[15:31:45] <ghrust> 13rust/06auto 145ad2a78 15Eduard Burtescu: Removed obsolete 'e' prefix on ty_evec and ty_estr.
[15:31:45] <ghrust> 13rust/06auto 147a305f9 15Eduard Burtescu: Removed free_glue from tydesc (the code is still generated, but inlined in drop_glue).
[15:31:45] <ghrust> 13rust/06auto 1408ac616 15Eduard Burtescu: Use the right type for self in methods and remove obsoleted items....
[15:31:47] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[15:44:33] *** Joins: gwty (gwtypc@17C8B8C7.AD96D6D0.137C914F.IP)
[15:44:56] *** Joins: gwty_ (gwtypc@17C8B8C7.AD96D6D0.137C914F.IP)
[15:48:37] *** Joins: a_m0d|home (a_m0d@moz-322A4DE4.acanac.net)
[15:52:30] *** Quits: Kxepal (Miranda@moz-D214BAA1.pppoe.mtu-net.ru) (Ping timeout)
[15:52:48] *** Joins: Kxepal (Miranda@moz-33D0A42F.pppoe.mtu-net.ru)
[15:57:35] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[16:00:31] <eddyb> dbaupp: hmpf, PatIdent is a misnomer. it's a path because it can refer to an enum or struct (and middle::resolve sorts it out)
[16:02:11] *** Joins: jpoirier (jpoirier@moz-150F5176.dhcp.ftwo.tx.charter.com)
[16:02:11] *** Quits: jpoirier_ (jpoirier@moz-150F5176.dhcp.ftwo.tx.charter.com) (Connection reset by peer)
[16:03:18] *** Joins: jpoirier_ (jpoirier@moz-150F5176.dhcp.ftwo.tx.charter.com)
[16:03:18] *** Quits: jpoirier (jpoirier@moz-150F5176.dhcp.ftwo.tx.charter.com) (Connection reset by peer)
[16:04:03] <eddyb> okay, so, methods. is there anything wrong with having self as a regular parameter and keep on using ty_fn?
[16:18:59] *** Quits: sigma (sigma@moz-BFB7A653.range86-143.btcentralplus.com) (Ping timeout)
[16:34:48] *** Joins: sigma (sigma@moz-9EAC972C.range86-184.btcentralplus.com)
[16:39:11] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[16:41:22] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[16:41:22] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/85dXJg
[16:41:22] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[16:41:51] <cmr> eddyb: woo!
[16:42:36] <eddyb> :D
[16:46:22] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[16:46:22] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/kH63HQ
[16:46:22] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[16:46:24] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[16:46:24] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/BPq8yQ
[16:46:24] <ghrust> 13rust/06auto 146bbd2ed 15kud1ing: define arch for iOS/ARM
[16:46:24] <ghrust> 13rust/06auto 1429e82c6 15bors: auto merge of #11472 : kud1ing/rust/iOS, r=alexcrichton...
[16:46:25] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[16:46:57] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[16:46:57] <ghrust> 01[13rust01] 15cmr created 06upstream (+3 new commits): 02http://git.io/FBwTeQ
[16:46:57] <ghrust> 13rust/06upstream 14580db13 15Corey Richardson: syntax: add better error message for unexpected inner attrs...
[16:46:57] <ghrust> 13rust/06upstream 14980dd1d 15Corey Richardson: driver: use libnative
[16:46:58] <ghrust> 13rust/06upstream 14956f8ed 15Corey Richardson: Align stack size to page size
[16:47:00] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[16:47:09] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[16:47:09] <ghrust> 01[13rust01] 15cmr 04force-pushed 06try from 142f73f49 to 14956f8ed: 02http://git.io/k471pw
[16:47:09] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[16:47:16] <cmr> wait
[16:47:20] <cmr> why does that keep happening
[16:47:29] <cmr> How does one push to try without creating a branch?
[16:47:40] <cmr> Because I'm clearly doing it wrong
[16:49:20] <eddyb> cmr: push origin/try?
[16:50:20] <cmr> eddyb: well I'm not working on the try branch locally
[16:50:49] <eddyb> I'm pretty sure git push pushes the current branch. and you can choose a target
[16:51:17] <bstrie> why is it that
[16:51:19] <bstrie> on github
[16:51:25] <eddyb> you can always use git gui if you want to make it easy
[16:51:33] <bstrie> sometimes pull requests get tagged with "close"
[16:51:41] <bstrie> and sometimes they get tagged with "merged"
[16:51:52] <cmr> bstrie: I think it's a race with bors.
[16:51:53] <bstrie> seems like bors is just merging them either way
[16:52:08] <cmr> it's just github ui braindamage.
[16:53:33] <eddyb> my "Fixes" didn't work?
[16:54:05] <eddyb> Fixes #7411, #10615. it closed the first one, but not the other one
[16:59:19] <klutzy> who is responsible (or interested) on rustpkg? I'm going to add some cc on pr message
[17:03:51] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[17:13:46] *** Joins: dev14 (devarshdes@moz-4EB22C7B.san.res.rr.com)
[17:17:32] *** Parts: dev14 (devarshdes@moz-4EB22C7B.san.res.rr.com) ()
[17:21:56] *** Quits: jpoirier_ (jpoirier@moz-150F5176.dhcp.ftwo.tx.charter.com) (Quit: Bye!)
[17:22:19] *** Joins: glaebhoerl (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[17:32:04] <cmr> dbaupp: the builder was going about 2x slower than it should have been since the directory it was copying to do the build with had an LLVM from a few versions back.
[17:32:08] <cmr> I've updated it.
[17:34:29] <eddyb> hehe, typeck actually creates ty_bare_fn's including the self type
[17:36:03] <eddyb> so we should get less duplication by always including the self type
[17:58:37] *** Joins: pnkfelix (pnkfelix@70A6E7A1.55ADD344.4C2245EF.IP)
[17:58:40] *** Quits: pnkfelix (pnkfelix@70A6E7A1.55ADD344.4C2245EF.IP) (Input/output error)
[18:01:50] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[18:01:50] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/BPq8yQ
[18:01:50] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[18:07:02] <klutzy> bors queue is empty!
[18:07:26] <eddyb> klutzy: I'm slow
[18:11:22] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[18:11:22] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/Tmhxwg
[18:11:22] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[18:19:29] <acrichto> cmr: ?w=1 is amazing
[18:19:43] <cmr> acrichto: did you just learn of it?
[18:19:52] <acrichto> I did indeed :)
[18:19:56] <cmr> it is very awesome.
[18:21:16] * eddyb should keep it in mind for next time he starts refactoring around the code he touches
[18:21:24] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[18:21:24] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/gz2WEw
[18:21:24] <ghrust> 13rust/06auto 14e01abfe 15Andrew Chin: Fix `rustpkg help` handling...
[18:21:24] <ghrust> 13rust/06auto 14dc21ca9 15Andrew Chin: "rustpkg prefer" should print the help for '"prefer" not "uninstall"
[18:21:24] <ghrust> 13rust/06auto 1491aec7c 15bors: auto merge of #11470 : eminence/rust/rustpkg_help_test, r=alexcrichton...
[18:21:26] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[18:38:54] *** Joins: rca_ (rcatolino@moz-E246AD29.adsl.proxad.net)
[18:39:30] *** Quits: rca (rcatolino@moz-F434D9F9.adsl.proxad.net) (Ping timeout)
[18:56:52] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[18:56:52] <ghrust> 01[13rust01] 15cmr 04deleted 06upstream at 14956f8ed: 02http://git.io/ET7Buw
[18:56:52] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[18:59:05] <eddyb> cmr: did you get anywhere with that?
[18:59:16] <cmr> eddyb: yes, it's in the queue
[19:00:50] *** Quits: luz (lucy@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[19:05:32] *** Joins: ktt3ja (ktt3ja@moz-54586A12.washdc.fios.verizon.net)
[19:15:12] *** Joins: luz (lucy@moz-CD18B14B.customer.cdi.no)
[19:24:54] <ktt3ja> dbaupp: we want to mark lang items as live (in dead-code pass) because even when said item is not public, it's still callable from elsewhere?
[19:25:29] <ktt3ja> dbaupp: is that right?
[19:25:31] <cmr> ktt3ja: yes.
[19:25:41] <ktt3ja> cmr: thanks
[19:31:37] <eddyb> ooh, this is nice, I'm making typeck code *readable*
[19:32:02] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[19:32:02] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/gz2WEw
[19:32:02] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[19:36:42] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[19:36:42] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/8KrSWQ
[19:36:42] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[19:36:44] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[19:36:44] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/xn32tA
[19:36:44] <ghrust> 13rust/06auto 14bfff111 15Corey Richardson: Align stack size to page size
[19:36:44] <ghrust> 13rust/06auto 149a7674d 15bors: auto merge of #11431 : cmr/rust/upstream, r=alexcrichton...
[19:36:45] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[19:41:41] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[19:43:56] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[19:52:40] <cmr> fffff
[19:52:42] <cmr> http://buildbot.rust-lang.org/builders/auto-win-32-nopt-c/builds/2626/steps/compile/logs/stdio
[19:52:47] <cmr> what am I even supposed to do with that.
[19:53:14] <eddyb> borked metadata?
[19:54:49] <eddyb> hmm, I've hit an interesting function. its sole purpose is to replace things like &Self and ~Self in a trait method with &Trait and ~Trait, and it can't do it by simple substitution because Trait isn't a type
[19:55:07] <eddyb> (I hope that will be removed by DST)
[19:55:55] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[19:56:07] <eddyb> hehe, pcwalton forgot to remove @mut from comments and stuff
[19:56:23] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[19:56:23] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 149a7674d to 1491aec7c: 02http://git.io/N3iJvQ
[19:56:23] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[19:56:24] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[19:56:24] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/WgrxcQ
[19:56:24] <ghrust> 13rust/06auto 14bfff111 15Corey Richardson: Align stack size to page size
[19:56:24] <ghrust> 13rust/06auto 14a9f67ec 15bors: auto merge of #11431 : cmr/rust/upstream, r=alexcrichton...
[19:56:24] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[20:00:02] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[20:07:39] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[20:12:05] <cmr> dammit
[20:12:14] <cmr> acrichto: do you have any idea why http://buildbot.rust-lang.org/builders/auto-win-32-nopt-c/builds/2627/steps/compile/logs/stdio would happen?
[20:12:52] <cmr> the only thing I can think of is libnative is broken on windows :(
[20:12:58] <cmr> (it only fails on windows)
[20:16:22] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[20:16:22] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14a9f67ec to 1491aec7c: 02http://git.io/N3iJvQ
[20:16:22] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[20:16:24] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[20:16:24] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/L4YrgA
[20:16:24] <ghrust> 13rust/06auto 14e2b1808 15Alex Crichton: Shuffle around ownership in concurrent queues...
[20:16:24] <ghrust> 13rust/06auto 143386a3b 15Alex Crichton: Drop the full message queue when a `Port` is gone...
[20:16:24] <ghrust> 13rust/06auto 149444657 15bors: auto merge of #11413 : alexcrichton/rust/chan-changes, r=cmr...
[20:16:26] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[20:20:59] <eddyb> why does ty_uniq have an inner mutable type?
[20:22:13] <cmr> ~mut used to be a thing
[20:22:51] <cmr> looks like whoever removed it missed sty_uniq
[20:33:03] <eddyb> cmr: should I?
[20:33:12] <eddyb> I guess I can commit my progress and start another branch
[20:33:15] <cmr> eddyb: yes
[20:47:43] *** Quits: a_m0d|home (a_m0d@moz-322A4DE4.acanac.net) (Quit: Leaving.)
[20:52:42] <acrichto> cmr: corrupt metadata
[20:52:51] <acrichto> or looking at the wrong libraries
[20:59:18] <eddyb> this is weird. mut &self and mut @self are invalid, but mut self and mut ~self aren't
[21:00:21] <eddyb> token::is_keyword(keywords::Const, t) this is weird
[21:06:28] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[21:06:28] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 149444657 to 1491aec7c: 02http://git.io/N3iJvQ
[21:06:28] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[21:06:28] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[21:06:29] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/ZpygpQ
[21:06:29] <ghrust> 13rust/06auto 14e330d4b 15Jan Niklas Hasse: Use target libraries instead of host libraries. Fixes #11243
[21:06:29] <ghrust> 13rust/06auto 14db9ef28 15bors: auto merge of #11338 : jhasse/rust/patch-rustpkgtarget, r=alexcrichton...
[21:06:29] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[21:06:53] <eddyb> LOL @mut self is still allowed
[21:07:56] <eddyb> (it does nothing fwiw. or it might be interpreted as mut @self)
[21:08:39] <eddyb> nope, it's not. killing right now
[21:14:35] *** Joins: Sharp (Sharp@moz-EEC85237.hsd1.ca.comcast.net)
[21:19:53] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[21:36:10] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Ping timeout)
[21:42:08] *** Joins: tikue (tkuehn@moz-879E86A9.hsd1.ca.comcast.net)
[21:45:39] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[22:05:19] *** Quits: ktt3ja (ktt3ja@moz-54586A12.washdc.fios.verizon.net) (Quit: Leaving)
[22:06:25] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[22:08:27] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[22:16:44] <eddyb> cmr: ty_vec also contains a mt
[22:19:15] *** Joins: a_m0d|home (a_m0d@moz-322A4DE4.acanac.net)
[22:23:34] *** Quits: tikue (tkuehn@moz-879E86A9.hsd1.ca.comcast.net) (Quit: tikue)
[22:33:45] *** Quits: rca_ (rcatolino@moz-E246AD29.adsl.proxad.net) (Ping timeout)
[22:35:32] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[22:37:37] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[22:38:11] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[22:55:20] <eddyb> cmr: nvm, that's for mutable slices
[22:56:25] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[22:56:25] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/ZpygpQ
[22:56:25] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[22:57:16] *** Parts: a_m0d|home (a_m0d@moz-322A4DE4.acanac.net) ()
[22:58:04] <eddyb> I don't know how to fix src/librustc/middle/typeck/infer/doc.rs - it mentions @mut in a confusing way
[22:58:41] *** Joins: tikue (tkuehn@moz-879E86A9.hsd1.ca.comcast.net)
[23:01:35] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[23:01:35] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/hOmZzg
[23:01:35] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[23:01:35] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[23:01:35] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/JJeFLA
[23:01:35] <ghrust> 13rust/06auto 14a30d61b 15Adrien Ttar: Various READMEs and docs cleanup...
[23:01:35] <ghrust> 13rust/06auto 147279409 15Adrien Ttar: Trim src/ README, bring back version_info everywhere
[23:01:36] <ghrust> 13rust/06auto 1468ebe81 15bors: auto merge of #11477 : adridu59/rust/bug-report, r=cmr...
[23:01:38] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[23:12:38] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[23:12:39] *** ChanServ sets mode: +qo brson brson
[23:14:56] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[23:18:53] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[23:24:02] *** Quits: tikue (tkuehn@moz-879E86A9.hsd1.ca.comcast.net) (Quit: tikue)
[23:33:33] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[23:33:33] *** ChanServ sets mode: +qo brson brson
[23:37:58] <tedh> eddyb would like me to file an issue?
[23:38:15] *** Joins: weekendrust (chatzilla@moz-1F0BDFEC.hsd1.wa.comcast.net)
[23:38:54] <tedh> pub fn main() {
[23:38:54] <eddyb> tedh: I'd rather see a #[no_std] example first
[23:38:54] <tedh> 	fail!("hi");
[23:38:55] <tedh> }
[23:39:23] <eddyb> fail! is still a macro calling into the runtime, there could be a lot of things going on in there
[23:39:23] <tedh> compiled with -Z lint-llvm
[23:39:38] <tedh> ok, let me try that
[23:39:44] <eddyb> does that tell you what part of the IR caused it?
[23:40:02] <tedh> Undefined behavior: Call argument type mismatches callee parameter type
[23:40:02] <tedh>   invoke void bitcast (void ({ i64, %tydesc*, i8*, i8*, i8 }*, { %tydesc*, { i64, %tydesc*, i8*, i8*, i8 }* }*)* @_ZN2rt6unwind8Unwinder12begin_unwind21h24794ba2018f31a7CLad4v0.9E to void (%"struct.std::rt::unwind::Unwinder[#1]"*, { %tydesc*, { i64, %tydesc*, i8*, i8*, i8 }* }*)*)(%"struct.std::rt::unwind::Unwinder[#1]"* %264, { %tydesc*, { i64, %tydesc*, i8*, i8*, i8 }* }* %__self113)
[23:40:02] <tedh>           to label %"normal return114" unwind label %unwind
[23:40:16] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[23:40:37] <eddyb> ah, begin_unwind's type
[23:41:46] <tedh> in the other example, i get things from visitor:
[23:42:29] <tedh> Undefined behavior: Call argument type mismatches callee parameter type
[23:42:29] <tedh>   %12 = call i8 bitcast (i8 ({ i64, %tydesc*, i8*, i8*, i8 }*, i64, %"struct.std::unstable::intrinsics::TyDesc[#1]"*)* @"_ZN4repr21TyVisitor$ReprVisitor15visit_tup_field21h13eb2745599215cdaGau4v0.9E" to i8 (%"struct.std::repr::ReprVisitor[#1]"*, i64, %"struct.std::unstable::intrinsics::TyDesc[#1]"*)*)(%"struct.std::repr::ReprVisitor[#1]"* %9, i64 %10, %"struct.std::unstable::intrinsics::TyDesc[#1]"* %11)
[23:42:34] <eddyb> tedh: I think it's caused by casting the function to the right self type, but I thought this wouldn't happen if the function is defined with the right type
[23:43:21] <eddyb> tedh: can you output LLVM IR and look for the definitions of those functions?
[23:43:30] <eddyb> -Z lto if they're not locally defined
[23:44:09] <eddyb> this is no serious issue, and I'm fixing the underlying problem (not treating self like a regular argument) as we speak
[23:44:21] <eddyb> but I'm curious if I did something silly in that last commit
[23:48:19] <tedh> i get 11MB or ir from the one line fail!
[23:48:50] <eddyb> tedh: just / in less or grep for the function name and give me the declare/define line
[23:50:36] <tedh> define internal fastcc void @_ZN2rt6unwind8Unwinder12begin_unwind21h24794ba2018f31a7CLad4v0.9E(%"struct.rt::unwind::Unwinder"*, { %tydesc*, { i64, %tydesc*, i8*, i8*, i8 }* }* nocapture) unnamed_addr #2 {
[23:50:36] <tedh> "normal return":
[23:50:36] <tedh>   %.sroa.2 = alloca [23 x i8], align 1
[23:50:36] <tedh>   %__self1 = alloca { %tydesc*, { i64, %tydesc*, i8*, i8*, i8 }* }, align 8
[23:50:36] <tedh>   %2 = getelementptr inbounds %"struct.rt::unwind::Unwinder"* %0, i64 0, i32 0
[23:50:36] <tedh>   store i8 1, i8* %2, align 1
[23:50:37] <tedh>   %3 = bitcast { %tydesc*, { i64, %tydesc*, i8*, i8*, i8 }* }* %1 to i8*
[23:50:39] <tedh>   %4 = bitcast { %tydesc*, { i64, %tydesc*, i8*, i8*, i8 }* }* %__self1 to i8*
[23:50:41] <tedh>   call void @llvm.memcpy.p0i8.p0i8.i64(i8* %4, i8* %3, i64 16, i32 8, i1 false)
[23:50:43] <tedh>   tail call void @llvm.memset.p0i8.i64(i8* %3, i8 0, i64 16, i32 8, i1 false)
[23:50:45] <tedh>   %.sroa.2.8.idx = getelementptr inbounds [23 x i8]* %.sroa.2, i64 0, i64 7
[23:50:47] <tedh>   call void @llvm.memcpy.p0i8.p0i8.i64(i8* %.sroa.2.8.idx, i8* %4, i64 16, i32 1, i1 false)
[23:50:49] <tedh>   call void @llvm.memset.p0i8.i64(i8* %4, i8 0, i64 16, i32 8, i1 false)
[23:50:51] <tedh>   %5 = getelementptr inbounds %"struct.rt::unwind::Unwinder"* %0, i64 0, i32 1, i32 0
[23:50:54] <tedh>   %6 = load i8* %5, align 1, !range !0
[23:50:54] <tedh>   %cond.i = icmp eq i8 %6, 1
[23:50:55] <tedh>   br i1 %cond.i, label %enum-iter-variant-1.i, label %"_ZN39option..Option$LT$$UP$any..Any.Send$GT$9glue_drop19h3dc596aba3ec60beacE.exit"
[23:50:57] <tedh> is that helpful?
[23:51:27] <eddyb> just the first line
[23:51:30] <dbaupp> tedh: please use a pastebin rather than putting it directly into IRC :)
[23:52:02] <tedh> sure, sorry
[23:52:21] <eddyb> tedh: I guess it's not obvious to LLVM when importing from another crate. it's actually safer now than it was before ;)
[23:54:51] <tedh> ok, just thought i should let somebody know
[23:55:02] *** Joins: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net)
[23:55:20] <eddyb> OOOH, //~^^^^ ERROR is a thing, this would've been helpful weeks ago
[23:57:27] <eddyb> cmr: r? https://github.com/mozilla/rust/pull/11485
[23:59:06] *** Quits: glaebhoerl (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Quit: )
[23:59:11] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[23:59:20] *** Quits: weekendrust (chatzilla@moz-1F0BDFEC.hsd1.wa.comcast.net) (Quit: ChatZilla 0.9.90.1 [Firefox 26.0/20131205075310])
