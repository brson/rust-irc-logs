[00:01:41] <Ilari> It actually succeeds at recreating the well-known label/seed screwup in TLS PRF with HKDF.
[00:11:39] <eternaleye> ...that's pretty sad.
[00:12:59] <Ilari> And the key derivation looks to be even more screwed.
[00:13:18] <lahwran> what are we talking about?
[00:15:00] <Ilari> https://www.ietf.org/mail-archive/web/tls/current/msg15621.html
[00:16:36] <lahwran> Ilari: do you report these complaints to those folks?
[00:17:14] <lahwran> or do you just complain elsewhere
[00:17:47] <lahwran> seems like you're pretty competent, and if you only complain in places where it won't get back to the original folks, then there's no chance it will improve TLS :/
[00:18:31] * lahwran waits for a response
[00:18:46] <Ilari> lahwran: I actually didn't pick repeating the PRF screwup before. I did post about key derivation being screwy on the TLS list.
[00:19:08] <lahwran> yay!
[00:19:23] <lahwran> I mean, if there's going to be a tls 1.3, it'd be awesome if it were an actual improvement
[00:21:21] <Ilari> Okay, reading more what it changes... What on earth is this doing?
[00:24:00] <lahwran> have you heard of these folks? http://galois.com/
[00:29:54] <Ilari> Okay, I think I just discovered a way to break the key exchange.
[00:30:20] <lahwran> do they take you seriously when you point these things out?
[00:30:40] <bascule> hahahaha https://galois.com/blog/2015/03/tech-talk-rust-ffi-pam/
[00:30:41] <bascule> nice
[00:30:45] <bascule> we keep talking about that
[00:31:23] <cmr> I find it hard to take a security company seriously when their website is mixed content  ;)
[00:32:31] <cmr> I guess it's just their images
[00:32:41] <cmr> probably a wordpress idiocy
[00:34:47] <Ilari> What makes this thing practicularly fun is that nobody seems to know what TLS 1.3 actually does.
[00:34:58] <bascule> lolololol cmr
[00:35:02] <bascule> so true
[00:35:10] <bascule> I was trying to think of who I saw with that recently
[00:35:19] <bascule> https://matrix.org/ perhaps
[00:35:45] <lahwran> "Your connection to galois.com is encrypted with obsolete cryptography. However, this page includes other resources which are not secure."
[00:35:51] <bascule> hahahaha
[00:36:03] <lahwran> why does chrome not turn the thingy red when it's obsolete?
[00:36:12] <lahwran> wasn't there a browser coordination effort to do that on all browsers at once?
[00:36:27] <lahwran> (s/obsolete/broken/)
[00:36:54] <bascule> what about plaintext HTTP? :P
[00:37:00] <bascule> start there
[00:37:22] <cmr> right?
[00:37:54] <lahwran> I think there actually was an effort to warn about plaintext http!
[00:37:54] <Ilari> It considers 256-bit AES obsolete?
[00:38:06] <lahwran> does it?
[00:38:14] <lahwran> http://security.stackexchange.com/questions/83831/google-chrome-your-connection-to-website-is-encrypted-with-obsolete-cryptograph
[00:38:17] <bascule> Ilari: it considers non-AEAD obsolete
[00:38:18] <bascule> well
[00:38:21] <bascule> when I say AEAD
[00:38:23] <bascule> I mean GCM
[00:38:27] <bascule> not "real" TLS AEAD
[00:38:41] <Ilari> Chacha20 is also supported, is AEAD but not GCM.
[00:38:54] <bascule> sure
[00:38:58] <bascule> that works too ;)
[00:40:14] <lahwran> "At this time, we have not active plans to deprecate other ciphersuites (e.g. those using RC4)."
[00:40:16] <lahwran> :(
[00:40:19] <lahwran> http://www.chromium.org/Home/chromium-security/education/tls#TOC-Deprecation-of-TLS-Features-Algorithms-in-Chrome
[00:40:38] <Ilari> Doesn't FF have further plans for deprecation of RC4?
[00:41:42] <eternaleye> Oh god PAM is horrible
[00:41:59] <eternaleye> Sadly, there's nothing else to use
[00:44:32] *** Quits: Church (hatter@moz-r3irp5.dyn.optonline.net) (Ping timeout: 121 seconds)
[00:44:43] <Ilari> "<no-hats-except-the-330+-ciphersuites-is-crap-hat>"
[00:52:40] <Ilari> If one dropped PSK, 11 ciphersuites would span all AEAD ciphers usable in TLS 1.2.
[00:53:39] <Ilari> AES-GCM, CAMELLIA-GCM, ARIA-GCM, AES-CCM and AES-CCM8 (128/256 bits) plus Chacha20-Poly1305.
[00:55:00] *** Joins: brson (brson@moz-20p.7vl.56.172.IP)
[00:56:51] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[00:57:56] *** Joins: Church (hatter@moz-e031bf.dyn.optonline.net)
[00:59:12] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[01:00:21] *** Joins: BigE (BigE@moz-ln8nc9.0xdeadce11.com)
[01:07:47] <Ilari> No, I don't even begin to understand what's going on with rust testbots.
[01:13:24] <bascule> eternaleye: lol one of the main things we've discussed about using Rust in production is a PAM module
[01:15:48] <Ilari> They somehow managed to make testbot try to test two builds in parallel, and this screwed the display pretty bad?
[01:16:41] <cmr> Ilari: are you talking about http://buildbot.rust-lang.org/ ?
[01:16:51] <Ilari> Yeah.
[01:16:55] <cmr> yeah
[01:16:58] <cmr> I find it incomprehensible as well
[01:17:31] <Ilari> As far as I can see, the big rollup is still testing (with ETA ~10 min or so).
[01:17:50] <lahwran> rollup?
[01:18:08] <cmr> lahwran: collects a bunch of pull requests into a single patch
[01:18:36] <Ilari> Testing a patch takes a few hours, so useful to be able to test multiple at once.
[01:18:37] <cmr> builds have a roughly fixed latency, so this improves pull request bandwidth significantly.
[01:20:06] <lahwran> makes it harder to tell who broke what, though, doesn't it?
[01:20:37] <Ilari> lahwran: Well, one can deduce from logs.
[01:25:14] <klutzy> Ilari: at #rust-internals acrichto said they don't have plan to create mmap crate. interested to create new one yourself?
[01:25:29] <klutzy> (I'm definitely interested but don't know if I can manage the crate well :p)
[01:29:30] <Ilari> klutzy: To keep it up to date with nightly changes?
[01:30:05] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[01:30:07] <klutzy> yep
[01:30:39] <klutzy> well, actually it's 2nd day of my new job so I don't have much free time ;p
[01:30:54] <klutzy> (no more emv! yay!)
[01:33:52] <Ilari> Also, the tests passed and that rollup got merged.
[01:35:25] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[01:37:39] <Ilari> Also, it isn't mmap that is nasty, it is dealing with the Win32 equivalent too...
[01:45:01] <cmr> I mentored the creation of the original std::os::MemoryMap
[01:45:13] <cmr> it's pretty straightforward...
[01:45:20] <cmr> at least for what MemoryMap exposed :)
[02:02:46] *** Joins: erickt (erickt@moz-gott10.pltn13.pacbell.net)
[02:06:17] *** Quits: brson (brson@moz-20p.7vl.56.172.IP) (Quit: leaving)
[02:12:51] *** Quits: erickt (erickt@moz-gott10.pltn13.pacbell.net) (Ping timeout: 121 seconds)
[02:44:19] *** Quits: coyotebush (quassel@moz-trb.jto.19.71.IP) (Ping timeout: 121 seconds)
[02:46:29] *** Joins: coyotebush (quassel@moz-5oq2q4.coreyford.name)
[03:04:30] *** Quits: c74d (c74d3a4ebb6@moz-0ersgu.oc.cox.net) (Ping timeout: 121 seconds)
[03:04:37] *** Joins: c74d3 (c74d3a4ebb6@moz-logo75.mggc.hibn.4404.2002.IP)
[03:07:57] *** Quits: c74d3 (c74d3a4ebb6@moz-logo75.mggc.hibn.4404.2002.IP) (Connection closed)
[03:10:02] *** Joins: c74d (c74d3a4ebb6@moz-logo75.mggc.hibn.4404.2002.IP)
[04:02:13] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[04:03:08] *** Joins: brson (brson@moz-20p.7vl.56.172.IP)
[04:30:49] *** Quits: brson (brson@moz-20p.7vl.56.172.IP) (Quit: leaving)
[04:45:06] *** Joins: c74d3 (c74d3a4ebb6@moz-0ersgu.oc.cox.net)
[04:45:54] *** Quits: c74d (c74d3a4ebb6@moz-logo75.mggc.hibn.4404.2002.IP) (Ping timeout: 121 seconds)
[05:02:04] *** Joins: adu (ajr@moz-rdrp0r.biz.rr.com)
[05:20:40] *** Quits: adu (ajr@moz-rdrp0r.biz.rr.com) (Client exited)
[05:25:18] *** Joins: adu (ajr@moz-rdrp0r.biz.rr.com)
[05:53:33] *** Quits: adu (ajr@moz-rdrp0r.biz.rr.com) (Client exited)
[06:07:13] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[06:36:37] <eternaleye> Martin Rex's suggestion re: ciphersuite de-cartesianizing would be nice :D
[06:38:09] <lahwran> de-cartesianizing?
[06:38:14] <lahwran> that sounds like ... quite a thing
[06:39:08] <eternaleye> lahwran: TLS Ciphersuite lists are the cartesian product of (key exchange, auth mechanism, bulk encryption) (and implicitly define a PRF, IIRC)
[06:39:30] <eternaleye> lahwran: Separating those is a huge benefit towards not sucking colossal amounts of crap
[06:39:54] <lahwran> I'm not sure what the difference would be
[06:40:10] <lahwran> if you have a tuple those things, it's a product type
[06:40:27] <lahwran> it doesn't matter if they're called that or counted that way
[06:40:37] <eternaleye> lahwran: Think sum vs product types
[06:40:52] <eternaleye> lahwran: Currently, it's a list of product types.
[06:41:11] <eternaleye> lahwran: This would move to being a list of a sum type, that can be any of the entries in the product type.
[06:41:33] <lahwran> let's talk concrete here
[06:41:37] <lahwran> 'cause that doesn't sound different
[06:41:43] * lahwran is the idiot in the room
[06:41:50] <eternaleye> lahwran: TLS negotiates using a list of available ciphersuites
[06:42:00] <eternaleye> lahwran: Each ciphersuite is a tuple.
[06:42:17] <lahwran> (I have seriously recently realized that I owe a really seriously huge amount of education to hanging out on irc with people smarter than me)
[06:42:24] <lahwran> eternaleye: okay
[06:42:25] <eternaleye> lahwran: If you want to support ECDHE with RSS and ECDSA, with AES and Chacha, you need four entries
[06:42:31] <lahwran> ah, I see
[06:42:38] <eternaleye> lahwran: Because it's the product of the freedom
[06:42:50] <lahwran> it's not a matter of what values you're representing
[06:42:56] <eternaleye> lahwran: Yes
[06:42:57] <lahwran> you're talking about how compact the representation is
[06:43:10] <lahwran> okay, that sounds cool
[06:43:27] <eternaleye> lahwran: That, and because ciphersuites are _defined_ as the tuple
[06:43:50] <lahwran> you can have some mysteriously missing, even though each component is available in other combinations?
[06:43:55] <eternaleye> lahwran: So when a new AEAD is defined (like chacha), you need to instantiate all other fields of the tuple with all other values
[06:43:59] <eternaleye> lahwran: Yep.
[06:44:16] <eternaleye> lahwran: It's horrendous.
[06:44:35] <eternaleye> lahwran: That way lies having >330 ciphersuites.
[06:44:40] <eternaleye> lahwran: Which... happened.
[06:44:47] <lahwran> figures
[06:44:49] <lahwran> it's a product type
[06:44:58] <lahwran> but I didn't think they'd be that stupid
[06:45:03] <eternaleye> lahwran: And there are _still_ holes in the support, even so
[06:45:03] <lahwran> to actually enumerate the possible values
[06:45:12] <lahwran> it's tls
[06:45:13] <eternaleye> Yup.
[06:45:17] <lahwran> I should not have expected better
[06:45:33] <lahwran> I'm learning to be sufficiently pessimistic :p
[06:45:54] <eternaleye> The idea Martin Rex suggested is to basically define new ciphersuites, that rather than being (X, Y, Z), are (X, _, _) but are encoded the same way as the old kind
[06:45:59] <eternaleye> And thus back-compatible
[06:46:58] <eternaleye> By using the first byte of the ciphersuite (16-bit value) as a discriminant, and the second as a value.
[06:47:43] <eternaleye> >>    0x10,0xXX    specifies a key exchange algorithm (XX) 256 codepoints
[06:47:50] <eternaleye> And so on for the other fields
[06:48:19] <eternaleye> By using a part of the encoding space nothing else used, old implementations will ignore them, and new implementations can be sane.
[06:48:21] <eternaleye> Finally.
[06:49:11] <eternaleye> lahwran: Crypto teaches pessimism like little else.
[06:49:23] <eternaleye> lahwran: One of its few competitors? Systems administration.
[06:49:39] <eternaleye> lahwran: The former is something I find interesting in a hobby sense; the latter is my job.
[06:49:55] <eternaleye> lahwran: I am far more pessimistic than any 24-year-old has a right to be :P
[06:52:52] <eternaleye> Anyway, IMO there should only be two (maaaaybe three) kinds: KEX, AEAD, and maaaaybe AUTH because too many things rely on how TLS does authentication. (I feel it should just all happen over channel binding)
[06:53:56] <eternaleye> But because TLS is TLS, it looks like there may wind up being five (kex, auth, enc, mac, prf)
[07:35:05] *** Joins: ttaubert (uid2620@moz-6d2u0s.uxbridge.irccloud.com)
[07:39:55] <eternaleye> The more papers I read with Rogaway in the authors list, the more respect I have: https://eprint.iacr.org/2015/189
[07:40:45] <eternaleye> Also, neat PAKE paper: https://eprint.iacr.org/2015/188
[07:42:21] *** Joins: Tobba|Laptop (Tobba@moz-1hh.7ki.21.217.IP)
[07:45:35] *** Quits: Tobba|Laptop (Tobba@moz-1hh.7ki.21.217.IP) (Connection closed)
[07:57:29] *** Quits: gsingh93 (gulshan@moz-3fu4am.mi.comcast.net) (Ping timeout: 121 seconds)
[08:07:09] *** Joins: Tobba|Laptop (Tobba@moz-1hh.7ki.21.217.IP)
[09:14:23] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[09:46:40] *** Quits: Tobba|Laptop (Tobba@moz-1hh.7ki.21.217.IP) (Ping timeout: 121 seconds)
[10:09:39] *** Joins: Tobba|Laptop (Tobba@moz-1hh.7ki.21.217.IP)
[10:12:15] *** Joins: slarti (arthi@moz-55rvi2.dclient.hispeed.ch)
[10:36:59] *** Quits: slarti (arthi@moz-55rvi2.dclient.hispeed.ch) (A TLS packet with unexpected length was received.)
[11:31:11] <Ilari> Regarding TLS algorithm negotiation, DH/ECDH and certificate format can be negotiated by extensions, so one would only need one key exchange + auth codepoint for non-anon-DH.
[11:38:14] *** Quits: Tobba|Laptop (Tobba@moz-1hh.7ki.21.217.IP) (Ping timeout: 121 seconds)
[12:02:42] <Ilari> Looks like CNNIC got revoked from Chrome.
[13:02:32] <Ilari> Also, lol at the comments about need for CT. CT as of currently is IMO a joke.
[13:03:52] <Ilari> For it to be not a joke, all certificates in "publically trusted" set would have to be audited.
[13:08:07] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[13:24:35] *** Quits: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua) (Ping timeout: 121 seconds)
[14:22:54] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[14:37:08] *** Quits: Dcoder (a@moz-7vtrpf.m6ok.ft5n.04f8.2a01.IP) (Quit: leaving)
[14:39:27] *** Joins: Dcoder (test@moz-2gsqbt.compute-1.amazonaws.com)
[15:20:35] *** Quits: BigE (BigE@moz-ln8nc9.0xdeadce11.com) (Connection closed)
[16:00:04] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[16:36:47] *** Joins: brson (brson@moz-0cc.7vl.56.172.IP)
[17:35:18] *** Joins: adu (ajr@moz-rdrp0r.biz.rr.com)
[17:43:38] *** Quits: adu (ajr@moz-rdrp0r.biz.rr.com) (Client exited)
[17:58:25] *** Joins: gsingh93 (gulshan@moz-3fu4am.mi.comcast.net)
[19:23:56] *** Quits: ttaubert (uid2620@moz-6d2u0s.uxbridge.irccloud.com) (Quit: )
[20:13:37] <Ilari> eternaleye: Also checked out the proposed Chacha20 I-D? It has 8 ciphersuites, and could do 3 more if every non-obsolete kex is to be supported.
[20:15:06] *** Quits: brson (brson@moz-0cc.7vl.56.172.IP) (Quit: leaving)
[20:27:12] <eternaleye> *sigh*
[20:38:08] <Ilari> TLS seemingly has 316 negotiable ciphersuites currently.
[20:39:44] <Ilari> (negotiable => not the NULL_NULL cipher nor an SCSV)
[20:41:51] <Ilari> GnuTLS seemingly supports 173 ciphersuites.
[20:45:44] <Ilari> (And the EXPORT crap has been deimplemented there).
[20:51:03] <Ilari> Also, TLS has 98 ciphersuites for 10 AEAD ciphers.
[20:54:15] <Ilari> And 70 of those would be usable in TLS 1.3. Blech.
[20:54:24] <eternaleye> "I'm in despair! The profusion of meaningless ciphersuites has left me in despair!"
[21:33:37] *** Quits: eternaleye (eternaleye@moz-5fh.ehi.245.50.IP) (Ping timeout: 121 seconds)
[21:35:15] *** Quits: randati (antti@moz-cs4sra.763s.ieq4.0708.2001.IP) (Ping timeout: 121 seconds)
[21:35:16] *** Joins: eternaleye (eternaleye@moz-5fh.ehi.245.50.IP)
[21:43:24] *** Joins: randati (antti@moz-6rrs3k.763s.ieq4.0708.2001.IP)
[21:46:46] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Connection closed)
[21:51:07] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[22:04:34] <eternaleye> ...dammit jsalowey
[22:05:19] <Ilari> Oh, that post?
[22:05:26] <eternaleye> Splitting it into an (auth, kex+AEAD) pair? Yeah.
[22:06:40] <eternaleye> I think he's splitting 'record layer' too broadly; kex is about what parameters to instantiate it with, more than the record layer itself.
[22:07:09] <eternaleye> Output of kex should be considered an input to the ongoing record stuff, not part of it.
[22:07:35] <eternaleye> (auth, kex, aead) 3-tuple is considerably better IMO
[22:09:10] <Ilari> TLS is already capable of doing orthogonal negotiation of (EC)DH groups and signatures.
[22:10:03] <eternaleye> Ilari: groups and signatures are at most 1/3 of the thing
[22:10:17] <eternaleye> Ilari: His email explicitly noted things like PAKE, &c
[22:10:36] <eternaleye> Ilari: And non-DH exchanges in the future really shouldn't be lumped in with AEAD
[22:10:41] <eternaleye> Ilari: Incidentally, did you see the Rogaway paper I linked last night?
[22:10:46] <Ilari> Yeah.
[22:11:01] <Ilari> PAKEs would be fun, because those work nothing like DH.
[22:11:04] <eternaleye> Ilari: The "chain" construction looks like it'd be a good base for a stream enc protocol
[22:11:20] <Ilari> One thing I noticed: There is no per "packet" AD.
[22:11:38] <eternaleye> Ilari: With considerably better-understood (or at least more easily modeled) semantics than the TLS record layer
[22:12:13] <eternaleye> Ilari: Mm, really? Because from what I saw, it was just specifying what parts of prior packets must be AD for next packets.
[22:12:25] <eternaleye> Ilari: Doesn't mean there can't be _more_ AD than that
[22:12:42] <Ilari> Well, In formal model, I saw no placeholder for AD per-packet.
[22:13:33] <Ilari> The "DH-based" TLS key exchange is really annoying to analyze (and looks to me it contains errorneous assumptions, not just bad crypto).
[22:13:45] <eternaleye> Ilari: Mm, sounds like more oversight than anything. Because of how AD works, concatenating the AD to the inner chaining stuff should work fine, no?
[22:20:49] <eternaleye> Ilari: On page 13, then, C ← E_k(S, ϵ, M) becomes  C ← E_k(S, ϵ || A_i, M)
[22:42:53] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[22:44:32] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[22:56:25] *** Quits: gsingh93 (gulshan@moz-3fu4am.mi.comcast.net) (Ping timeout: 121 seconds)
[23:10:28] *** Joins: gsingh93 (gulshan@moz-3fu4am.mi.comcast.net)
[23:38:55] <Ilari> eternaleye: One problem with the Chain construct is that there's DTLS, which has to deal with unreliable data. Wonderful.
[23:45:21] <eternaleye> Ilari: >> for a stream enc protocol
[23:45:46] <eternaleye> Ilari: For DTLS, you really have no better option than individual AEAD of each packet.
[23:47:07] <Ilari> ... Which kinda tends to mean that's also what TLS will do. :-/
[23:59:18] <eternaleye> Which is sad, because different underlying technologies mean different approaches may be optimal.
