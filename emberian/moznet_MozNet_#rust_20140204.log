[00:00:25] *** Quits: Skif_ (emschwar@moz-CA025D57.ip.mcleodusa.net) (Ping timeout)
[00:00:27] <pcwalton> maybe basicaa does it too, I dunno
[00:00:37] <acrichto> LRN: you can still generate shared libs, we just switched the default
[00:00:42] *** Quits: nadph (Adium@EC55D6D0.5DC12898.58B1C2DD.IP) (Quit: Leaving.)
[00:01:13] <LRN> by the way, does rust use hash in shared lib names?
[00:01:31] * LRN forgot
[00:01:35] <acrichto> we currently use it to disambiguate between libraries of the same name
[00:01:47] <acrichto> in the theory that everything lives in /usr/lib
[00:02:12] <LRN> so, there's no way to update a shared library without re-linking programs that depend on it?
[00:02:13] *** Joins: maxiepoo (Max@moz-6F50ADE.hsd1.il.comcast.net)
[00:02:40] *** Quits: u1 (u1@2E3F5E6A.9DD606B.3DAF2526.IP) (Quit: WeeChat 0.4.2)
[00:02:50] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[00:02:55] <acrichto> in theory you can update a shared library without having to recompile downstream users, but rust doesn't currently have a stable enough ABI to support that model well enough just yet
[00:03:04] <acrichto> we plan on making progress on that model in the future, thugh
[00:03:18] *** Quits: eibwen (kvirc@moz-57850844.dip0.t-ipconnect.de) (Ping timeout)
[00:03:22] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[00:03:31] <LRN> how about a tool to check whether library interface changed or was expanded?
[00:03:34] <strcat> LRN: the definitions of generic or #[inline] functions are part of the ABI, as are private fields
[00:03:47] <strcat> so there's not much that you can change without changing the ABI
[00:03:50] <acrichto> LRN: right now we don't have a tool to do that
[00:04:08] <LRN> strcat, well, that is kind of sad
[00:04:08] <acrichto> a tool along those lines would most likely be part of our solution to this problem
[00:04:22] *** Joins: james4k (james@moz-9BB5AE72.consolidated.net)
[00:04:23] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[00:04:27] <strcat> LRN: the size of a public type will always be part of the ABI
[00:04:29] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[00:04:33] <acrichto> you can think of it as changing a C++ header file, if you change a constant you must recompile everything that uses the header
[00:04:38] <strcat> but at the moment, the private fields are also part of the ABI
[00:04:52] <strcat> as in, the full internal definition including any internal private types
[00:04:55] <LRN> is that really required, or just something "at the moment"?
[00:05:02] *** Joins: olivernn (olivernigh@moz-7CE0F8.access.mtnbusiness.co.za)
[00:05:03] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[00:05:03] *** ChanServ sets mode: +ao pcwalton pcwalton
[00:05:04] <strcat> LRN: it's required for the reflection-based printing support
[00:05:26] <strcat> you can read private fields in safe code... via print!("{:?}", x)
[00:05:31] <strcat> it walks the full type definition
[00:05:35] <strcat> so there is no true privacy
[00:05:50] <LRN> well, how are you going to explain this in the context of rust being used for libraries?
[00:06:05] <LRN> (like, big dependency trees, as in Debian)
[00:06:12] <acrichto> LRN: at this time, it is recommended to use static compilation for rust libraries
[00:06:25] <strcat> LRN: if you are writing a library usable from other languages, then these issues are not present
[00:06:27] <LRN> rebuild the world every time something changes near the root of thr tree?
[00:06:37] <LRN> uh-oh
[00:06:39] *** Quits: arturo (Thunderbir@moz-E83B14F0.superkabel.de) (Ping timeout)
[00:06:51] <strcat> if your library exposes a C ABI then there aren't ABI stability issues
[00:06:58] <acrichto> LRN: we realize the problems with this, and that's why we're not saying that we're done with dynamic libraries yet
[00:07:08] <strcat> if it exposes generic functions, then that's an ABI stability hazard
[00:07:10] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[00:07:10] *** ChanServ sets mode: +o tjc
[00:07:26] <LRN> understood
[00:07:35] <strcat> and as a rust crate, the reflection-based printing (and the support code for it) makes privacy non-existent
[00:07:40] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[00:07:44] <strcat> rust (like C++) is also very value-based
[00:07:45] <LRN> it'll be interesting to see how you'll solve this problem
[00:07:48] <strcat> so the sizes of types are public
[00:07:53] <acrichto> LRN: if you built a rust library with *only* an extern "C" interfact, that works just fine as a dynamic library
[00:07:56] <strcat> LRN: it's not really something you can solve
[00:08:02] <strcat> without overhead
[00:08:19] <strcat> in order to expose a stable ABI, the type sizes need to be stable
[00:08:29] <strcat> adding a private field increases the size of the type
[00:09:04] <LRN> well, if i _add_ a type that wasn't there before, would that change the parts of the ABI that are already there?
[00:09:06] <strcat> the workaround for this is adding a bunch of padding you can use in the future or exposing only pointers in the public API and doing a memory allocation for each type instance
[00:09:10] <LRN> or _add_ a function
[00:09:12] <strcat> LRN: no
[00:09:51] <strcat> LRN: but if you change the internal definition of a type, even if it's the same size, the ABI is changed, due to reflection
[00:10:13] <LRN> what if i change implementation details of a function? That wouldn't change the ABI?
[00:10:30] <LRN> is "internal definition" recursive?
[00:10:30] <strcat> LRN: if it's a generic function, or a non-generic function marked #[inline], then it changes the ABI
[00:10:43] <strcat> LRN: yes, internal definition is recursive for that type thing
[00:10:55] <strcat> LRN: there is a reflection-based printing feature walking the entire type definition
[00:11:03] *** Quits: olivernn (olivernigh@moz-7CE0F8.access.mtnbusiness.co.za) (Ping timeout)
[00:11:16] <LRN> yeah, that puts a very strict limit on what you can change...
[00:11:51] <strcat> if we prevent reflection from being used in release builds, then things would be a lot better
[00:11:53] <LRN> so you can fix internals of a function, but can't touch types
[00:12:00] <LRN> (as long as function is not generic)
[00:12:03] <LRN> (or inline)
[00:12:32] *** Joins: Matthias247_ (Miranda@moz-BDD35EC0.hsi5.kabel-badenwuerttemberg.de)
[00:13:02] <LRN> this means that libs can receive small bugfixes (where you don't have to change existing types, only change the implementation of some functions)
[00:13:04] *** Quits: Matthias247_ (Miranda@moz-BDD35EC0.hsi5.kabel-badenwuerttemberg.de) (Quit: Matthias247_)
[00:13:16] *** Quits: Matthias247 (Miranda@moz-BDD35EC0.hsi5.kabel-badenwuerttemberg.de) (Ping timeout)
[00:13:51] <LRN> extending the API will be very difficult, unless it's structured in a way that prevents old and new types from interacting
[00:13:59] <pcwalton> strcat: yup, clang has the same problem if you insert padding manually ;)
[00:14:01] <strcat> LRN: if reflection wasn't around, it's still pretty restricted
[00:14:11] <pcwalton> it generates awful IR and asm if you insert padding manually instructures
[00:14:13] <pcwalton> in structures
[00:14:17] <strcat> you can modify a type definition *if* the size remains the same
[00:14:20] <pcwalton> even with all optimizations on!
[00:14:25] <strcat> you can modify a non-generic/non-inline function definition
[00:14:29] <pcwalton> yay for dirty LLVM lies
[00:14:45] <pcwalton> the solution is just gonna be to stop emitting padding, hooray....
[00:14:56] <LRN> i'll keep this in mind, thank you
[00:15:06] <strcat> LRN: idiomatic rust libraries aren't going to avoid generics, inline functions and are not going to wrap every public type as a ptr
[00:15:09] <pcwalton> maybe we should just implement Prefix and then stop doing padding for it
[00:15:24] <strcat> LRN: in practice, C++ libraries don't have any ABI stability for this reason too
[00:15:52] <LRN> so: expose C interface, or rebuild every time
[00:15:57] <strcat> because templates go in headers, inline functions go in headers, and private fields in a type defined in the header don't stop the size from being exposed
[00:16:23] <strcat> LRN: yep
[00:16:26] <strcat> pretty much
[00:16:28] <pcwalton> acrichto: ^ check it out
[00:16:35] <strcat> and the C interface has to be carefully thought out
[00:16:37] <pcwalton> LLVM has no optimizations for TBAA-struct and clang has the same problem :D
[00:17:00] <LRN> if you put it this way ("C++ has the same problem"), it might sell
[00:17:19] <pcwalton> the solution is going to be (a) stop emitting explicit padding for structs where possible; (b) implement the Prefix mode for ADTs so that we can drop into "no padding" mode more often
[00:18:03] <acrichto> pcwalton: that makes me sad :(
[00:18:09] *** Joins: aurynj (Eon@583ABBE5.60FA2E28.B9E25744.IP)
[00:18:14] <strcat> pcwalton: well, and fix LLVM
[00:18:18] <acrichto> pcwalton: this kinda sounds like an llvm bug as well though
[00:18:19] <pcwalton> thanks LLVM for documenting stuff that doesn't exist :P
[00:18:39] <acrichto> lol
[00:18:46] <strcat> pcwalton: you feel as I did when I was trying to take advantage of branch hints and they just optimized out of dead code :(
[00:19:03] *** kimundi is now known as zz_kimundi
[00:19:28] <strcat> and I've been told a few times in #llvm to do `if condition { unreachable }' but it only works in gcc
[00:19:36] <strcat> LLVM optimizes it out as dead early on and it accomplishes nothing
[00:19:44] * strcat shrugs
[00:19:44] *** Quits: KindOne (KindOne@9FE94A0D.B11A32F.EC6A1518.IP) (Ping timeout)
[00:20:03] <strcat> it's a bit scary that LLVM 3.4 is competitive with gcc, considering how immature it still is :P
[00:20:24] <strcat> in a way that's a good thing because it means there's a whole lot of improvement to be made...
[00:20:59] <LRN> maybe it's because you are separate?
[00:20:59] <Jemaclus> hmm. my decompression dictionary is off by one. grr.
[00:21:09] <strcat> we can expose a branch hint intrinsic now that LLVM intrinsics are called directly...
[00:21:31] *** Quits: stephenmac7 (quassel@moz-F2C114C1.hsd1.fl.comcast.net) (Ping timeout)
[00:22:07] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[00:22:12] <zwarich> strcat: LLVM's secret trick is the SCC-based optimizer that mixes inlining and optimization
[00:22:32] <strcat> zwarich: doesn't gcc also do that?
[00:22:42] *** Quits: Savago (Savago@D8B9C081.E820043D.D4C04133.IP) (Quit: Savago)
[00:22:45] <strcat> gcc also has partial inlining on by default, and more clever inlining heuristics
[00:22:54] <strcat> imo, LLVM's secret is a good test suite
[00:23:09] <zwarich> maybe they do that now? they used to not do that and just had fixed inlining passes
[00:23:11] <strcat> and not adding passes before they are shown to not cause overall regressions
[00:23:27] *** Quits: nif (nif@moz-8181E2AC.oberlin.net) (Client exited)
[00:23:31] <FreeFull> So GCC is too ad-hoc?
[00:23:31] *** Joins: stephenmac7 (quassel@moz-F2C114C1.hsd1.fl.comcast.net)
[00:23:36] *** Joins: KindOne (KindOne@moz-945436A1.dynamic.ip.windstream.net)
[00:23:42] <strcat> gcc's -O3 is often slower than -O2, and that's where stuff like loop-vectorize is for gcc
[00:23:54] <strcat> FreeFull: well, it has way more passes/optimizations and tricks in codegen
[00:24:03] <strcat> but it's just not as well tuned/tested...
[00:24:04] *** Quits: kellogh (timkellogg@moz-704A74D.hsd1.co.comcast.net) (Quit: kellogh)
[00:24:40] *** Joins: lerc (quassel@moz-289EFA2.telstraclear.net)
[00:25:05] <strcat> I don't think adding a test for every fixed issue, adding tests for new features and not enabling passes before they're proven to result in overall improvements is part of their culture
[00:25:13] <canhtak> Hi rust dev's ! make check abort at the beginning because of an invalid license in the file mpsc_intrusive.rs
[00:25:13] <strcat> it's certainly not part of the linux kernel culture :P
[00:25:23] <canhtak> is it possible to ignore this error?
[00:25:26] <Amaranth> gcc is getting less ad hoc
[00:26:12] <Amaranth> strcat: The kernel folks generally do actually require some kind of benchmark showing an improvement for optimization work
[00:26:27] <strcat> Amaranth: but they don't add tests to make sure it won't regress
[00:26:51] <Amaranth> That's why there has always been a problem getting in any changes that improve responsiveness, that's really hard to measure and often causes regressions on speed benchmarks
[00:26:53] <strcat> I really mean that testing is not part of the linux kernel culture
[00:27:26] <chromatic> To be fair, "Does this driver hang the hardware?" is difficult to automate.
[00:28:00] <Amaranth> IBM (iirc) runs a huge number of servers doing allyesconfig builds and then running various tests on top
[00:28:21] <Amaranth> But yeah, kernel testing is hard to automate
[00:28:27] <chromatic> Back when OSDL was OSDL, they had a big server room full of weird hardware too.
[00:28:32] <pcwalton> jld: ping
[00:28:49] <strcat> Amaranth: well, you could also say that testing for resilience to file system or disk failure in software is hard
[00:29:01] <strcat> but sqlite certainly has a massive infrastructure for testing that
[00:29:21] <chromatic> "Difficult" doesn't mean "Don't do it"
[00:29:38] <strcat> Amaranth: imo the way mainline linux is developed isn't very professional...
[00:30:00] <zwarich> GCC has a pretty big test suite, including what is probably the best test suite for C aliasing rules
[00:30:07] *** Joins: fournm (Aria@moz-ABB60BA0.austin.res.rr.com)
[00:30:23] <Amaranth> strcat: Perhaps not but it is hard to argue with the results
[00:30:24] <zwarich> but it lacks the targeted tests of individual optimizer passes that LLVM has
[00:30:27] <strcat> as someone who uses a rolling release distro, I know very well how stable the latest stable releases of various software projects really are
[00:30:44] <strcat> Amaranth: the results? stable linux kernel releases are often pretty broken
[00:31:01] <strcat> release candidate really means pre-alpha, stable is alpha, lts is beta
[00:31:26] <strcat> the only stable kernel you're going to get is the carefully developed RHEL/CentOS/Oracle one
[00:31:37] <Amaranth> strcat: The results are that the linux kernel runs on everything and is generally the "best" any way you measure
[00:31:58] <strcat> Amaranth: the latest release is pretty much always broken on a large subset of hardware
[00:32:13] <Amaranth> More people should be testing with that hardware then
[00:32:30] <strcat> debian has a frozen kernel version, so it's a predictable frozen subset of breakage
[00:32:30] *** Quits: icebattle (wayne@8A14A542.EBE2EE2B.C7CEC4ED.IP) (Connection reset by peer)
[00:32:32] <Amaranth> You can't expect one person/group to have every combination of hardware the kernel supports for testing
[00:32:40] <strcat> but you only get backported fixes without lots of breakage with RHEL
[00:32:51] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[00:33:31] *** Joins: lpy (lpy@51E8C831.DDD9F058.E99F7FDB.IP)
[00:33:43] <strcat> Amaranth: common hardware often breaks. there are regularly huge regressions on *every* sandy bridge CPU, etc.
[00:33:44] * strcat shrugs
[00:34:03] *** Quits: ecr (chatzilla@moz-CC701484.dhcp4.washington.edu) (Ping timeout)
[00:34:24] <Amaranth> Oh, you're talking about performance regressions
[00:34:41] *** Joins: ecr (chatzilla@moz-CC701484.dhcp4.washington.edu)
[00:34:43] <strcat> performance regressions, power usage regressions, and major filesystem bugs causing data loss
[00:34:50] <Amaranth> Outright broken common hardware I find hard to believe otherwise it isn't very common :P
[00:35:01] <strcat> Amaranth: well, I agree with that
[00:35:08] <darnuria> I'am really chocked... For me Kernel dev was something with loot of test... And you destroyed my impression =O 
[00:35:09] <strcat> but that's because you notice when you aren't even looking for it
[00:35:20] *** Quits: AndroUser2 (androirc@moz-F1D96E8.wireless.telus.com) (Ping timeout)
[00:35:29] *** Quits: lpy (lpy@51E8C831.DDD9F058.E99F7FDB.IP) (Ping timeout)
[00:35:36] <darnuria> but... It
[00:35:44] <strcat> Amaranth: I find it surprising that intel can afford to pay hundreds of devs to work on linux
[00:35:51] <strcat> perhaps thousands if you include non-kernel work
[00:35:57] <darnuria> It's like a loot of thing. I suppose...
[00:36:03] <strcat> but they can't afford to run a farm of 5-10 computers to look for perf/power regressions?
[00:36:18] *** Joins: Savago (Savago@D8B9C081.E820043D.D4C04133.IP)
[00:36:19] *** Joins: recrack (Mibbit@5AB4884B.FCC4549.14D5B978.IP)
[00:36:21] <zwarich> you need a bigger farm then that
[00:36:25] <zwarich> and you need to pay someone to care
[00:36:26] *** Quits: recrack (Mibbit@5AB4884B.FCC4549.14D5B978.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[00:36:34] *** Quits: Savago (Savago@D8B9C081.E820043D.D4C04133.IP) (Quit: Savago)
[00:36:43] <strcat> zwarich: you don't need a bigger farm than that to find bugs across every CPU of a generation
[00:36:51] <zwarich> assuming it's just CPU bugs
[00:36:51] <strcat> which have happened many times in the past year
[00:36:52] *** Joins: dsyang (dsyang@F241238B.7254D4BA.689607DE.IP)
[00:37:46] <strcat> zwarich: you do need more to feel good about how much you're testing... but they're not doing the bare minimum
[00:37:53] * strcat shrugs
[00:39:03] <dmillerw> how does one declare a lifetime name?
[00:39:21] *** Joins: fyolnish (fyolnish@moz-E107BB9.uqwimax.jp)
[00:39:22] <strcat> dmillerw: in what context?
[00:39:31] <strcat> struct Foo<'a> { x: &'a int }
[00:39:48] <dmillerw> I'm passing a reference of a struct to another struct
[00:39:54] *** Joins: apoelstra (username@moz-BBEB5B9E.sw.biz.rr.com)
[00:41:02] *** Quits: fyolnish (fyolnish@moz-E107BB9.uqwimax.jp) (Ping timeout)
[00:41:07] <sam113101> does rust have function overloading?
[00:41:11] <strcat> sam113101: no
[00:41:22] <Seb> How can I read a u64 as a f64? The 'as' keyword isn't working for me
[00:41:38] <strcat> rusti: 5u64 as f64
[00:41:39] -rusti- 5f64
[00:41:50] <o11c> Seb: do you mean a bit cast?
[00:42:02] <o11c> Seb: if so, it's called 'transmute'
[00:42:08] <Seb> o11c: I think so
[00:42:13] <strcat> not portable though
[00:42:14] <Jemaclus> heh, i just "decompressed" my compressed file to 43MB... original size: 400K. whoops.
[00:42:25] <FreeFull> rusti: (5u64).transmute() as f64
[00:42:26] -rusti- <anon>:10:9: 10:30 error: type `u64` does not implement any method in scope named `transmute`
[00:42:26] -rusti- <anon>:10         (5u64).transmute() as f64
[00:42:26] -rusti-                   ^~~~~~~~~~~~~~~~~~~~~
[00:42:26] -rusti- error: aborting due to previous error
[00:42:26] -rusti- application terminated with error code 101
[00:42:38] <strcat> unsafe { std::cast::transmute(...) }
[00:42:45] <pcwalton> strcat: acrichto: behold, awful asm for https://gist.github.com/pcwalton/8795445
[00:43:08] <pcwalton> https://gist.github.com/pcwalton/8795451
[00:43:10] <pcwalton> here's the asm
[00:43:24] <pcwalton> explicit padding ain't got nothin' to do with it
[00:43:32] <pcwalton> it's just LLVM is not being kind to us
[00:43:32] <acrichto> what in the world is llvm doing
[00:43:39] <dmillerw> if I declare a lifetime name on a struct, do implementations need one too? Says the impl line is expecting one
[00:43:45] <o11c> what in the world is that __attribute__ doing?
[00:43:55] <pcwalton> it's my failed attempt to make it no inline, ignore it
[00:44:01] <pcwalton> doesn't make a difference
[00:44:20] <acrichto> pcwalton: maybe time to revisit https://github.com/mozilla/rust/issues/11551 ?
[00:44:20] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[00:44:43] <pcwalton> https://gist.github.com/pcwalton/8795466
[00:44:46] <pcwalton> that's the LLVM IR
[00:44:47] <Seb> o11c: Thanks, transmute was what I was after :)
[00:44:52] <pcwalton> why is it not legal to optimize that memcpy out, is what I wonder
[00:45:09] *** Quits: wilmoore (wilmoore@moz-1248C037.mystrotv.com) (Ping timeout)
[00:45:13] <pcwalton> I mean
[00:45:21] <strcat> pcwalton: in many cases, because LLVM has to assume touching the memory may trap
[00:45:28] <pcwalton> it's copying undefined bytes
[00:45:38] <strcat> pcwalton: so writing 1 byte at a time may be different than memcpy
[00:45:43] <strcat> well
[00:45:47] <strcat> it's all a mess
[00:46:05] <pcwalton> this wouldn't be a problem if llvm could just optimize out that UB memcpy, no?
[00:46:10] *** Quits: tq (tq@moz-9FE9CCF4.a251.priv.bahnhof.se) (Quit: tq)
[00:46:15] <pcwalton> surely that's undefined behavior
[00:46:23] <strcat> pcwalton: I don't think it is
[00:46:24] <pcwalton> it's totally uninitialized data
[00:46:28] <strcat> well
[00:46:33] <strcat> does it know it's uninit in the local context?
[00:46:34] <pcwalton> it's not UB in C to write uninitialized data to the heap?
[00:46:42] <pcwalton> yes
[00:46:42] <pcwalton> look
[00:46:44] <pcwalton> it's from an alloca
[00:46:46] <strcat> pcwalton: well, in LLVM IR it's not UB
[00:46:50] <strcat> to read/write undef memory
[00:46:55] <strcat> it actually tracks the undef per-bit
[00:46:59] <strcat> or at least, claims it does
[00:47:02] *** Quits: maxiepoo (Max@moz-6F50ADE.hsd1.il.comcast.net) (Quit: maxiepoo)
[00:47:09] <strcat> pcwalton: http://llvm.org/docs/LangRef.html#undefined-values
[00:47:37] <strcat> if you have an undef i8
[00:47:43] <strcat> and lets say you set 4 of the bits
[00:47:49] <pcwalton> well I think what matters here is what alloca() produces
[00:47:59] <strcat> then those bits have to be set but the others can act as undef
[00:48:33] *** Joins: elyzion (elyzion@moz-D4AAE1FD.ap122.ftth.ucom.ne.jp)
[00:48:44] <pcwalton> the llvm language reference doesn't say what the bits inside an alloca are set to if uninitialized
[00:48:48] <pcwalton> it doesn't say the undef value
[00:48:58] <pcwalton> I claim I'm allowed to optimize them out :P
[00:49:25] <strcat> pcwalton: well it's a reference, not a spec :)
[00:49:29] <strcat> the code is the spec!
[00:49:52] <sam113101> strcat: 0,4WHY not
[00:49:58] *** Joins: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com)
[00:50:12] <sunfish> pcwalton: alloca is initialized to the undef value, but you typically can optimize out copies of it, because a copy of an undef is still undef, and still fluctuating
[00:50:21] <strcat> sam113101: makes errors complex
[00:50:22] <Jemaclus> ok, so more dumb questions: if files only write u8s, then that means the value for my compression dictionary has to be a u8, which means my dictionary has a max size of 256... What am I missing?
[00:50:25] *** Quits: omnus (omnus@moz-2E009EE2.stny.res.rr.com) (Client exited)
[00:50:34] <strcat> sam113101: same reason rust uses trait bounds instead of C++-like duck typing
[00:50:46] <strcat> makes the API clearly defined and errors clean
[00:50:58] <strcat> function overloading gets really horrible
[00:51:24] <o11c> Jemaclus: you have to encode some larger integer into a list of u8s
[00:51:44] <Jemaclus> like, I can't say that the value for ~[25u8,64u8,23u8] => 285u8, because that would just roll over to 18u8...
[00:51:45] <pcwalton> sunfish: can I optimize out stores of freshly alloca'd memory to the heap?
[00:52:10] <Jemaclus> o11c: example?
[00:52:11] <strcat> pcwalton: I think it should...
[00:52:13] <sunfish> pcwalton: you mean copies from the alloca to the heap? yes
[00:52:24] <strcat> although
[00:52:28] <pcwalton> oh cool
[00:52:32] * pcwalton goes to implement that patch
[00:52:33] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[00:52:41] <strcat> pcwalton: I think it would have to see that the allocation is valid to deref
[00:52:54] *** Quits: exobit (foo@moz-90D1B547.nycmny.fios.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[00:53:19] <strcat> pretty sure that if you set a page PROT_NONE and write uninit memory to it, LLVM has to preserve the fault
[00:53:38] <strcat> dunno
[00:53:42] <pcwalton> sunfish: ^ is this true?
[00:53:52] <strcat> I wouldn't be surprised if a lot of missed optimizations in LLVM are caused by this stuff not being clearly defined
[00:54:01] *** Joins: kellogh (timkellogg@moz-704A74D.hsd1.co.comcast.net)
[00:54:16] <o11c> strcat: clearly undefined, you mean
[00:54:25] <strcat> :)
[00:54:47] <sunfish> alloca is always valid to deref
[00:54:56] <strcat> sunfish: the heap allocation
[00:55:02] <strcat> i.e. you've got
[00:55:03] <sunfish> @llvm.lifetime.end notwithstanding
[00:55:17] <sunfish> and @llvm.stackrestore
[00:55:29] <strcat> some_ptr.write(&uninit())
[00:55:39] <strcat> does LLVM have to know that writing to some_ptr won't trap to optimize out the write?
[00:56:03] <sunfish> the code as written is doing a store, right?
[00:56:09] <strcat> memcpy, I think
[00:56:22] <sunfish> sure. so if the memory is not mapped, then it's already undefined behavior
[00:56:30] <strcat> sunfish: what if it's mapped and PROT_NONE?
[00:56:44] <sunfish> llvm doesn't model PROT_NONE
[00:56:50] <pcwalton> strcat: sunfish seems to be correct
[00:56:56] <pcwalton> __attribute__((noinline)) extern "C" void f(int *y) { int x; *y = x; }
[00:56:57] * strcat doesn't understand why lots of optimizations are missed then
[00:57:05] <pcwalton> optimizes to push rbp; mov rbp,rsp; pop rbp; ret
[00:57:07] <strcat> pcwalton: write twice
[00:57:24] <strcat> hm, maybe it only misses it with memcpy
[00:57:31] <pcwalton> yeah
[00:57:34] <pcwalton> I think the problem is memcpy
[00:57:48] <strcat> I always thought it was because of the semantics, not that it was a missing opt
[00:58:18] <strcat> apparently I need to unlearn "the compiler is always right"
[00:58:25] <pcwalton> :)
[00:58:43] <sunfish> LLVM optimized memcpy mostly with a specialized memcpy-specific pass, rather than the generic code for loads and stores
[00:58:43] *** Quits: stephenmac7 (quassel@moz-F2C114C1.hsd1.fl.comcast.net) (Ping timeout)
[00:59:12] <strcat> pcwalton: let me make an example where sret results in more optimizations
[00:59:13] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[00:59:24] <strcat> it makes it clear what goes wrong...
[00:59:49] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[00:59:55] *** Joins: earlzlap (earlz@moz-483E1E31.neo.res.rr.com)
[00:59:58] <strcat> sunfish: why is there a function to check if something can be deref'ed, then?
[01:00:24] <sunfish> strcat: it's for use by speculative optimizations
[01:00:28] <cgaebel> I have a proposal for a really cool rust feature!
[01:00:38] <cgaebel> instead of #[deprecated]
[01:00:40] <sunfish> strcat: like moving a load above a branch
[01:00:45] <strcat> sunfish: ah
[01:00:51] *** Joins: stephenmac7 (quassel@moz-F2C114C1.hsd1.fl.comcast.net)
[01:00:53] <cgaebel> use #[deprecated(rewrite_macro=...)]
[01:00:53] *** Quits: alexherbo2 (alexherbo2@moz-33868228.w90-35.abo.wanadoo.fr) (Quit: WeeChat 0.4.3-dev)
[01:01:16] <cgaebel> and it provides a compile-time flag to re-write all calls to that deprecated function with the supplied macro
[01:01:43] * pcwalton goes to write that LLVM patch
[01:01:51] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[01:02:17] *** Joins: nif (nif@moz-8181E2AC.oberlin.net)
[01:02:23] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[01:02:56] *** Quits: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP) (Ping timeout)
[01:04:22] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[01:04:53] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[01:04:54] <Jemaclus> ok, so now that that's done with
[01:04:56] <Jemaclus> :)
[01:05:03] <strcat> sunfish: http://ix.io/aiX this is the really bad case we hit btw
[01:05:07] <Jemaclus> I have a HashMap<~[u8], u8>
[01:05:14] <strcat> sunfish: we know that pointer from the (ptr, len) slice passed in is non-null
[01:05:15] *** Quits: lkuper (lkuper@moz-D862222C.dhcp-bl.indiana.edu) (Ping timeout)
[01:05:25] <Jemaclus> i'm keying up ~[u8]s worth of bytes, assigning it to a single byte
[01:05:31] <strcat> just don't have a way to tell LLVM... so it leaves the null check from == None in the loop
[01:05:32] * strcat sighs
[01:05:51] <Jemaclus> when it's done compressing, it writes out the values of the hashmap
[01:05:51] <strcat> and then loop-vectorize, loop-delete, [...] don't work on that loop
[01:06:13] *** Joins: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP)
[01:06:14] <aatch> pcwalton, how easy does the stuff you did for tbaa-struct make implementing custom passes?
[01:06:28] <pcwalton> aatch: I don't think we necessarily need custom passes
[01:06:35] <pcwalton> we can just use TBAA
[01:06:39] <pcwalton> I'll push my stuff to a branch, gimme a few
[01:06:40] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[01:06:54] <strcat> pcwalton: well, for non-null/dereferenceable we do need a custom pass (or something added upstream)
[01:07:00] <pcwalton> yeah
[01:07:09] <pcwalton> I just mean for basic Rust alias analysis
[01:07:14] <strcat> it would *really* easy to add a non-null function attribute but it's not enough :(
[01:07:15] <aatch> pcwalton, it's something useful to be able to do
[01:07:19] <o11c> strcat: I'm serious about initially lowering it to: if (ptr == null) { call unreachable(); } else { ...; } 
[01:07:20] <pcwalton> locals don't alias each other, &mut doesn't alias &mut/&, ~ doesn't alias ~
[01:07:36] <o11c> because I think LLVM *is* smart enough to optimize inside the else
[01:07:48] <o11c> then define unreachable() at the end and reoptimize
[01:07:53] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[01:08:05] <strcat> o11c: well, I think that would work
[01:08:10] <strcat> but it's not ideal
[01:08:29] <strcat> and the issue here is that I don't want to slow down compiles by adding a non-null assertion for every recursively contained ptr in a parameter
[01:08:33] <o11c> well, I don't expect LLVM will ever be ideal, so I'm being real
[01:08:46] <strcat> o11c: we could set arbitrary metadata, and then consume it in a pass
[01:08:51] <strcat> you can dynamically load a pass
[01:08:51] <o11c> and since you have to run LLVM twice *anyway* ...
[01:09:06] <strcat> I don't think we run it twice
[01:09:08] <strcat> we run one module pass
[01:09:19] <strcat> unless you use lto
[01:09:24] <sunfish> strcat: hmmm.. that loop is unrotated...
[01:09:25] <o11c> well, LLVM misses a lot of optimization unless you run it twice
[01:09:40] <strcat> sunfish: well, %2 = icmp eq i64* %s.sroa.0.0.copyload12, %1 is the iterator check
[01:09:47] <strcat> i.e. next() does that internally
[01:09:52] <strcat> checks for current == end
[01:10:04] <strcat> %3 = icmp eq i64* %s.sroa.0.0.copyload12, null is from checking Option<T> == None outside
[01:10:10] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Client exited)
[01:10:14] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[01:10:25] <strcat> when we do Some(&T), LLVM sees *ptr -> *ptr
[01:10:30] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[01:10:30] <sunfish> strcat: I was just wondering, if you rotated out the header, if that would make it possible to eliminate the null check on the backedge
[01:10:36] <strcat> when what we know is *non_null_ptr -> *ptr
[01:10:58] <strcat> sunfish: well, I'm surprised it doesn't hoist it
[01:11:01] <strcat> but I want it completely gone :)
[01:11:05] <Jemaclus> ok nevermind then. i'll figure it out later.
[01:11:08] <Seb> When you're expecting 64 bits back from a C lib is there a way to express this (lack of) type? Or should just use u64? (There is also a flag sent back to let me know what to interpret it as)
[01:11:18] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[01:11:19] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[01:11:27] *** Quits: ricepuddin (graham@moz-7D68765A.cable.virginm.net) (Ping timeout)
[01:12:14] <aatch> Seb, just use u64, it's not like it's expressed much differently in C
[01:12:48] <Yurumechan> Seb : Rust u64 is no different than C uint64_t
[01:13:28] <Yurumechan> and perhaps unsigned long long is same to uint64_t
[01:13:36] <reima> Jemaclus: What was your question again?
[01:13:52] <Seb> Cool :) just wanted to check I wasn't missing anything more idiomatic in Rust
[01:14:17] <aatch> Seb, nope, for fixed-width returns, there's no problems.
[01:14:37] <aatch> It's only with int/unsigned int that you run into issues
[01:14:49] *** Quits: elyzion (elyzion@moz-D4AAE1FD.ap122.ftth.ucom.ne.jp) (Ping timeout)
[01:15:01] <aatch> which is why we have c_int and c_uint types for those cases
[01:15:28] <o11c> *long
[01:15:43] <o11c> wait, not even that
[01:15:54] <strcat> int is often 16-bit
[01:16:05] <strcat> rust doesn't support those platforms yet... but
[01:16:07] <strcat> it may
[01:16:26] <strcat> the only thing I would not worry about is a platform where size_t and uintptr_t are not aliases
[01:16:29] <aatch> none of the regular C types have a fixed size, the standard generally just says that n bits are available
[01:16:49] <aatch> I'm not sure about floats.
[01:17:00] <strcat> it also doesn't require intptr_t and uintptr_t to be the same size
[01:17:07] <strcat> or size_t to match uintptr_t
[01:17:22] <strcat> but in practice, they're the same, and good luck writing code handling a case where they aren't
[01:17:23] *** Joins: suzak (suzak@moz-FEBD2936.sakura.ne.jp)
[01:17:31] <Jemaclus> I'm trying to implement an lzw compression algorithm. I've got a HashMap<~[u8], u8> that is my dictionary. The problem is that means my dictionary can be a max size of 256. I'm unsure on how to convert to u32, since when I write my compressed version to file, it should (I think) be written in u8
[01:17:41] <strcat> aatch: I don't think it says much about floats
[01:17:46] <strcat> aatch: they don't even have to be binary floats!
[01:17:54] <Jemaclus> in other words, if I use HashMap<~[u8], u32>, then writing to file becomes problematic, I think.
[01:17:59] <aatch> strcat, yeah. I'm pretty sure C predates IEEE-754
[01:18:00] <strcat> there's FLT_RADIX and there are some functions for handling the case where they're not binary
[01:18:11] <strcat> aatch: they added stuff in C99 for handling non-binary floats
[01:18:26] <strcat> despite that being mostly about adding optional IEEE754 support
[01:18:27] * strcat shrugs
[01:19:12] <aatch> strcat, meh. Still, I just remind myself that the "official" definition of int is "a signed integer with at least 16 usable bits"
[01:19:36] <aatch> (Or something like that, anyway)
[01:19:55] <strcat> aatch: http://en.cppreference.com/w/c/numeric/math scalbn is the same as ldexp with binary floats, yet they added scalbn in c99
[01:20:00] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[01:20:00] *** ChanServ sets mode: +ao dherman dherman
[01:20:05] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Input/output error)
[01:20:13] <strcat> so some platforms must use FLT_RADIX != 2...
[01:20:36] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[01:21:02] <strcat> aatch: and long double is rarely even an official IEEE754 size ;P
[01:21:10] <strcat> I think it might be on PPC
[01:21:15] <aatch> strcat, I saw that.
[01:21:35] <Yurumechan> double-double, uh oh.
[01:22:06] <strcat> gcc has __float128 to work around long double being the horrific x87 type
[01:22:21] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[01:22:31] <aatch> strcat, long double is that 80-bit one, right?
[01:22:34] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[01:22:35] <tiffany> does rust have f80 and f128 types?
[01:22:35] <strcat> aatch: on x86
[01:22:43] <strcat> aatch: on PPC I am pretty sure it is 128-bit
[01:23:06] <o11c> arguably it's 79-bit on x86
[01:23:07] *** Joins: Jesse_ (jruderman@moz-BBE3ABD.mv.mozilla.com)
[01:23:23] <strcat> tiffany: no
[01:23:31] <aatch> tiffany, it does not, adding it wouldn't be *that* hard, but then you have to deal with the lack of wide support
[01:23:39] <strcat> I think it will get f128, but we need a permissively licensed support library with the hooks LLVM expects for it
[01:23:42] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[01:23:48] <strcat> I don't think it should have f80.
[01:23:49] <o11c> and IMO using anything larger than 'double' is wrong
[01:23:59] *** Joins: ryeguy (ryeguy@9C569A0.5D1143CD.E8644521.IP)
[01:24:06] <strcat> o11c: I don't think so
[01:24:19] <strcat> kerbal space program has lots of problems stemming from doubles not being high enough precision :)
[01:24:23] <Yurumechan> I don't think so either
[01:24:29] <strcat> they work around it by centering the universe on the player
[01:24:33] <tiffany> one could argue that if you need something better than double then you shouldn't be using floating point
[01:24:40] <strcat> but it causes objects to drift due to precision when they aren't focused
[01:24:48] <tiffany> but the poor state of fixed point acceleration on current architectures invalidates that
[01:25:00] *** Quits: dsyang (dsyang@F241238B.7254D4BA.689607DE.IP) (Client exited)
[01:25:11] <aatch> strcat, they aren't affected too much by the precision of doubles
[01:25:24] <aatch> The precision of floats was a massive problem for them though
[01:25:33] <strcat> aatch: doubles do hurt
[01:25:45] <tiffany> solar systems are big
[01:25:47] <strcat> you can get into a geostationary orbit
[01:25:51] <strcat> and then if you focus something far away
[01:25:56] <strcat> when you come back, it's not geostationary
[01:25:59] <strcat> it moves up or down a few meters
[01:26:03] <Yurumechan> floating point exposes an useful (yeah you need to know its problems but it is still useful) interface that is much slower when implemented in the software
[01:26:04] * strcat shrugs
[01:26:13] <aatch> strcat, oh sure, but it's a very minor annoyance compared to the Space Kraken
[01:26:19] <strcat> aatch: right :)
[01:26:25] <aatch> Since they also had the issue of going too fast
[01:26:30] <strcat> aatch: well that's unity's fault
[01:26:31] <Yurumechan> I think f128 is feasible, while f256 seems absurd
[01:26:32] <tiffany> yurumechan: yeah, but software fixed point is slower than hardware floating point
[01:26:38] *** Quits: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net) (Quit: Leaving.)
[01:26:40] <reima> Jemaclus: I just read up on LZW. If I understood it correctly, it outputs 12 bits per code word, so writing to a file won't be *that* easy anyway
[01:27:02] <strcat> Yurumechan: f128 is also an explicitly supported LLVM feature
[01:27:05] <Yurumechan> tiffany : which is my point
[01:27:10] <strcat> it knows how to lower it to library calls when a hardware type is unavailable
[01:27:25] <strcat> so we could easily support it... if someone can point out a good permissively licensed quad math lib
[01:27:32] <tiffany> I don't get why intel won't support fixed point
[01:27:42] <aatch> Fixed point isn't particularly useful for general use.
[01:27:46] <strcat> tiffany: small range.
[01:27:57] <strcat> tiffany: it fixes the denser in some spots problem, but I doubt that's often a problem
[01:28:20] <strcat> and it's probably not any faster/slower when implemented in hardware...
[01:28:58] <tiffany> I find it highly doubtful that hardware fixed point would be slower than hardware floating point
[01:29:01] <Jemaclus> reima: hmm. Any suggestions? I can do it if I treat things as chars and strings, but a real LZW compression program would treat things as bytes, no?
[01:29:16] <strcat> tiffany: I said not any faster/slower
[01:29:20] <aatch> Each fixed point location is it's own type.
[01:29:31] <strcat> I don't really think it would be faster on x86/x86_64/ARM
[01:29:47] <Yurumechan> tiffany : imho fixed point type is highly variable in its size and scale
[01:29:56] <strcat> maybe on a CPU that's not a monstrosity with an enormous pipeline, but where can I get one of those?
[01:30:00] <Yurumechan> so there are lots of fp types there
[01:30:10] *** Quits: echristo (echristo@E55635C9.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[01:30:17] <Yurumechan> even with the same bitsize
[01:30:31] <aatch> for a 64-bit fixed-point number, there are 63 different types
[01:30:46] <reima> Jemaclus: As I see it, LZW compression transforms a stream of 8-bit words into a stream of 12-bit words
[01:30:57] <aatch> (not counting the degenerate case where it's just an int)
[01:31:00] <strcat> aatch: they could make fixed-point math faster without picking a case
[01:31:13] <strcat> like they've made big integer math faster on haswell and soon on broadwell
[01:31:42] <strcat> just need to look at what software implementations need to be faster
[01:31:50] <strcat> doesn't *all* need to be in hw
[01:31:56] <reima> Jemaclus: So you would at least need an u16 per output word
[01:32:35] <aatch> Whats the difference between fixed-point maths and integer maths that you scale after-the-fact?
[01:32:51] <reima> Jemaclus: But as soon as you have two 12-bit output words, you can encode them in 3 bytes
[01:33:14] <strcat> aatch: *shrug*, they could no doubt make it faster if they tried
[01:33:17] <reima> (2 * 12 = 3 * 8)
[01:33:25] <strcat> aatch: they implemented strcpy in hardware...
[01:33:32] <strcat> well, in microcode at least
[01:33:41] *** Quits: nif (nif@moz-8181E2AC.oberlin.net) (Quit: Konversation terminated!)
[01:33:57] *** Quits: Jesse_ (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse_)
[01:34:04] <Jemaclus> right
[01:34:08] <aatch> strcat, for sure. But I don't think explictly supporting fixed-point arithmetic is sane, just improving the speed of implementation
[01:34:16] *** Joins: lpy (lpy@51E8C831.DDD9F058.E99F7FDB.IP)
[01:34:21] <aatch> If that makes sense
[01:34:29] <strcat> aatch: https://gmplib.org/list-archives/gmp-devel/2013-August/003353.html well, this is the haswell bigint example
[01:34:32] <strcat> and broadwell will do more
[01:34:43] <Jemaclus> hmm
[01:34:57] <reima> Jemaclus: So I would make the function signature "fn compress(data: &[u8]) -> ~[u8]" and do the bit mangling internally, appending 3 bytes to the output buffer for every 2 code words generated
[01:35:33] <reima> (Or 2 bytes if there is an odd number of code words)
[01:35:39] <Jemaclus> hmm
[01:35:42] <Jemaclus> ok, i'll try.
[01:35:43] *** Joins: takuin (takuin@moz-21A5F23D.ks.ks.cox.net)
[01:35:53] <strcat> snappy has a really clever buffer handling strategy
[01:36:07] <strcat> the decompressed buffer size is included in the compressed output
[01:36:13] <strcat> so you can allocate it in one go
[01:36:22] *** Quits: lpy (lpy@51E8C831.DDD9F058.E99F7FDB.IP) (Ping timeout)
[01:36:27] <strcat> and it just errors out in the algorithm if it lied
[01:36:37] * strcat loves that API
[01:37:22] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[01:37:32] <Jemaclus> thanks
[01:37:48] <Jemaclus> heading out. be back tomorrow. thanks again.
[01:37:50] *** Quits: Jemaclus (Jemaclus@4EEAB704.5843BA5A.D4E4C7A5.IP) (Quit: Leaving...)
[01:38:41] <pcwalton> ok, implemented the llvm pass
[01:38:47] <pcwalton> or rather, modified MemCpyOptimizer
[01:38:53] <pcwalton> it seems to work on a small test case, let's see if the world explodes
[01:40:44] *** Quits: reima (Instantbir@moz-70778B32.dip0.t-ipconnect.de) (Quit: Leaving.)
[01:41:55] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[01:42:31] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[01:43:24] *** Quits: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp) (Client exited)
[01:43:45] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[01:43:54] *** Joins: dsyang (dsyang@moz-8EBF0366.wv.cc.cmu.edu)
[01:44:51] *** Joins: montezuma (Mibbit@moz-AE55F4BE.cat.csiro.au)
[01:44:53] *** Joins: AndroUser2 (androirc@moz-F1D96E8.wireless.telus.com)
[01:45:10] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[01:45:25] *** Quits: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp) (Ping timeout)
[01:45:26] *** Quits: dsyang (dsyang@moz-8EBF0366.wv.cc.cmu.edu) (Client exited)
[01:45:39] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Input/output error)
[01:46:59] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[01:48:03] *** Quits: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp) (Quit: Leaving...)
[01:48:32] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[01:48:48] <pcwalton> yup, the world exploded
[01:49:00] <pcwalton> pretty funny crash too
[01:49:30] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[01:50:37] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[01:51:02] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[01:52:39] *** Joins: bblum (bblum@moz-29B04EEA.ghc.andrew.cmu.edu)
[01:52:54] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[01:53:36] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[01:55:05] *** Joins: dew (Instantbir@moz-D2186B13.static.stls.mo.charter.com)
[01:55:57] *** Joins: blaenk (blaenk@moz-43A413B6.lsanca.dsl-w.verizon.net)
[01:57:31] *** Quits: ecr (chatzilla@moz-CC701484.dhcp4.washington.edu) (Quit: ChatZilla 0.9.90.1 [Firefox 27.0/20140127194636])
[02:01:39] *** Joins: maxiepoo_ (Max@moz-6F50ADE.hsd1.il.comcast.net)
[02:01:57] *** Quits: maxiepoo_ (Max@moz-6F50ADE.hsd1.il.comcast.net) (Quit: maxiepoo_)
[02:02:44] *** Joins: ekiara (emk@moz-9B1940E9.tech.co.ke)
[02:04:12] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[02:04:36] *** Quits: lennart (lennart@moz-DE70D6F.stanford.edu) (Quit: Lost terminal)
[02:05:17] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[02:05:49] <aatch> pcwalton, what happened?
[02:06:06] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[02:06:08] <pcwalton> aatch: optimization was wrong. fixed one bug, retrying.
[02:06:17] <pcwalton> if it still doesn't work I'll have to dive into it
[02:06:45] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Connection reset by peer)
[02:06:50] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[02:06:55] *** Parts: bblum (bblum@moz-29B04EEA.ghc.andrew.cmu.edu) ()
[02:07:01] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[02:08:14] *** Joins: nguyeng (Mibbit@moz-362CDC0.fttp.sta.comporium.net)
[02:08:55] <enix> Is there a reason that BufferedReader take owernship of the Reader it wraps, while LimitReader takes a reference?
[02:09:22] *** Joins: olivernn (olivernigh@moz-7CE0F8.access.mtnbusiness.co.za)
[02:09:26] *** Joins: p1start (rewi@moz-A082F561.adsl.xtra.co.nz)
[02:09:59] *** Quits: sunfish (chatzilla@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[02:11:12] *** Quits: olivernn (olivernigh@moz-7CE0F8.access.mtnbusiness.co.za) (Ping timeout)
[02:11:42] <sfackler> enix: when I wrote LimitReader, I figured the most common use case was that it would be used in the middle of reading from the Reader it's wrapping
[02:11:46] <pcwalton> looks better now
[02:11:50] <sfackler> something like
[02:11:50] <pcwalton> 0.6% code size improvement
[02:12:06] <pcwalton> not huge but could be big in certain scenarios
[02:12:13] <pcwalton> 0.6% for librustc
[02:12:38] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[02:12:39] <sfackler> "r.read(...); do stuff ... { let r = LimitReader::new(100, &mut r); read_a_foo(r) } r.read(...); ... "
[02:12:50] *** Joins: dsyang (dsyang@moz-C45D48C5.hsd1.pa.comcast.net)
[02:13:04] <acrichto> pcwalton: did you confirm in the samll case that it's better?
[02:13:11] <pcwalton> acrichto: yup
[02:13:12] *** Joins: alisdair (textual@BB0336C3.D2943E17.C579BC3E.IP)
[02:13:14] <pcwalton> codegen for that is fixed
[02:13:15] <sfackler> whereas if you're making a BufferedReader, you'll probably want to use it buffered indefinitely
[02:13:26] <acrichto> pcwalton: nice
[02:13:44] <pcwalton> acrichto: push rbp; mov rbp,rsp; mov BYTE PTR [rdi],0; mov QWORD PTR [rdi+8],0; pop rbp; ret
[02:13:56] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[02:13:59] <acrichto> pcwalton: sgtm
[02:14:11] <sfackler> acrichto: I am simultaneously excited and terrified to update for the new IO api :P
[02:14:32] <enix> sfacker: I would agree thats probably the most common. But it also means its impossible to make LimitReader send, right? What if there were a type, maybe named ReaderRef, that does why ByRef does for Iterators 
[02:14:42] <acrichto> sfackler: hehe, it was one of the worse rebasings I've had to do yet
[02:14:49] <sfackler> maybe
[02:15:03] <sfackler> enix: what's the use case for a sending a LimitReader?
[02:15:22] <enix> then, all the of the Reader and Writers could be the same - they all take ownership, and the caller gets to decide if they take ownership of the actual object or if they take ownership of a reference
[02:15:53] <acrichto> sfackler: it is true that there's "impl Reader for &mut Reader"
[02:16:00] <enix> sfackler: honestly, I don't have one myself. Maybe if you wanted to have a task process the first 200 bytes of a file or something.
[02:16:04] <sfackler> that's a trait object though
[02:16:21] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[02:16:25] <acrichto> true
[02:16:34] <sfackler> you'd really want a impl<R: Reader> Reader for &mut Reader but that doesn't work
[02:16:41] <enix> The reason I'm looking at this is that I'm writing my own Reader implementing struct, and I couldn't decide if it should take a reference or take ownership, and the standard lib has conflicting examples
[02:16:43] <sfackler> and is probably a bad idea
[02:16:48] <Yurume> -rwxrwxr-x 1 lifthrasiir 2978751 Feb  4 11:05 hello-green*
[02:16:48] <Yurume> -rwxrwxr-x 1 lifthrasiir    9371 Feb  4 11:07 hello-green-dyn*
[02:16:48] <Yurume> -rwxrwxr-x 1 lifthrasiir 1849968 Feb  4 11:05 hello-native*
[02:16:48] <Yurume> -rwxrwxr-x 1 lifthrasiir    9206 Feb  4 11:06 hello-native-dyn*
[02:17:02] <Yurume> hmm, is this the overhead of `Runtime`?
[02:17:08] <sfackler> enix: probably take ownership
[02:17:12] <Yurume> (the size of hello-{green,native})
[02:17:17] <sfackler> what's the struct do?
[02:17:44] <enix> Decrypts all data being read
[02:18:25] <sfackler> I'd say that should take ownership
[02:18:41] <sfackler> probably with a method to unwrap it to get back at the underlying reader
[02:18:55] <enix> yeah, i decided on takes ownership, since I think its a bit more flexible since you can write an adaptor struct to pass a <R: Reader> &mut R to something that tries to take ownership, but you can't do the reverse, I don't think
[02:19:21] *** Joins: Erik_ (Erik_S@moz-D2F74C7B.hlrn.qwest.net)
[02:19:22] <sfackler> maybe I should change LimitReader to just take by value and add a fn unwrap(self) -> R
[02:19:35] *** Quits: nham (Mibbit@moz-2C6185F8.lightspeed.dybhfl.sbcglobal.net) (Quit: http://www.mibbit.com ajax IRC Client)
[02:20:03] <enix> I think  thats slightly more general
[02:20:13] *** Quits: earlzlap (earlz@moz-483E1E31.neo.res.rr.com) (Ping timeout)
[02:20:43] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[02:21:00] <enix> You can then use something that looks like: https://gist.github.com/DaGenix/8796382 to wrap a reference and pass it to a Reader that wants to take ownership, and then I think you can satisfy all use cases
[02:21:24] <sfackler> yeah
[02:21:24] <enix> so, what I was really getting at was if something like that struct in the Gist would be a reasonable addition to the StdLib for that type of use case
[02:21:42] <sfackler> it'll make stuff slightly more awkward in some cases though
[02:21:52] <enix> or, if the overloader deference trait would provide a mechanism to create a much more general approach
[02:22:01] <sfackler> I've only needed a LimitReader in a context where I have a &mut R as opposed to owning it
[02:22:51] *** Quits: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) (Ping timeout)
[02:22:55] <enix> ps, while I was very pleasantly surpised to find a LimitReader in the standard lib. It is very useful. Thanks for adding it!
[02:22:57] *** Quits: TimAbraldes (quassel@125EF623.B2666F0E.66399531.IP) (Input/output error)
[02:23:26] <acrichto> Yurume: indeed, you'll get smaller binaries with -Zlto, but it's not drastically smaller.
[02:23:46] <acrichto> Yurume: in general if you want smaller sizes our answer for now is "dynamically link instead of statically link"
[02:24:05] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[02:24:09] <acrichto> we've preferred static linking for now due to instability in the ABI of libraries (planned to be fixed in the future)
[02:24:30] *** Quits: aruniiird (aruniiird@28876D92.F24A7F1B.260B031E.IP) (Quit: Leaving)
[02:25:04] <enix> sfackler: in my case, I'm using it where I have a reference as well, so, its not an issue for me.
[02:25:54] *** Quits: Armavica (virgile@moz-AD428ED7.ens.fr) (Ping timeout)
[02:27:48] <brson> reddit's going to have 3k rustaceans in no time
[02:28:03] <montezuma> rustafarians?
[02:28:03] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[02:28:05] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[02:28:12] *** Quits: ryeguy (ryeguy@9C569A0.5D1143CD.E8644521.IP) (Quit: )
[02:29:35] *** Joins: sellout (Adium@moz-CF70CF20.hlrn.qwest.net)
[02:29:57] *** Quits: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP) (Quit: Leaving...)
[02:29:59] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[02:30:21] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[02:30:47] <dmillerw> do implementations of structs have to have a lifetime defined as well?
[02:31:06] <sfackler> if the struct has a lifetime parameter, yes:
[02:31:14] <sfackler> impl<'a> Foo<'a> { .. }
[02:32:18] *** Quits: takuin (takuin@moz-21A5F23D.ks.ks.cox.net) (Ping timeout)
[02:32:29] *** Quits: onelson (onelson@moz-DD666EC5.laika.com) (Quit: Leaving.)
[02:34:23] *** Quits: kvark (Mibbit@9A8A5739.49975FB2.AE2D72A6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[02:34:40] *** Joins: echristo (echristo@moz-1892C634.hsd1.ca.comcast.net)
[02:35:01] *** Joins: lpy (lpy@51E8C831.DDD9F058.E99F7FDB.IP)
[02:35:26] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[02:35:42] <dmillerw> shouldn't this work then? https://gist.github.com/dmillerw/0f47861c399fd7f89613 or am I blind? apparently there's conflicting requirements?
[02:36:04] <_achin> pardon the offtopicness, but: do any of you have ergonnomic keyboards that you'd recommend?
[02:36:12] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[02:36:53] *** Quits: lpy (lpy@51E8C831.DDD9F058.E99F7FDB.IP) (Ping timeout)
[02:37:35] *** Joins: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[02:37:58] <sfackler> dmillerw: the 'c lifetime there has no effect
[02:38:02] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[02:38:21] <sfackler> you'd only need a lifetime parameter on the struct if the struct contains something that needs a parameterized lifetime
[02:38:33] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[02:38:34] <Jesse> _achin: in general, or for typing code with lots of ~ & * () # ! ?
[02:38:35] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[02:38:45] <sfackler> get rid of the <'c> and change the signature of peek to
[02:38:58] <sfackler> fn peek<'a>(&'a self) -> &'a Controller
[02:39:06] *** Quits: echristo (echristo@moz-1892C634.hsd1.ca.comcast.net) (Ping timeout)
[02:39:07] <_achin> Jesse: as a general purpose keyboard for someone to spends a lot of time at a computer writing code
[02:39:25] *** Quits: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[02:39:44] <_achin> (at work i have a MS natural 4000, which i like.  i need something at home now, and am looking around at othe roptions)
[02:41:46] <dmillerw> so how does that all work exactly then sfackler? I wanna say it's somehow tied into the lifetime of self? or what?
[02:41:48] *** Quits: nguyeng (Mibbit@moz-362CDC0.fttp.sta.comporium.net) (Quit: http://www.mibbit.com ajax IRC Client)
[02:42:49] *** Quits: AndroUser2 (androirc@moz-F1D96E8.wireless.telus.com) (Quit: AndroIRC - Android IRC Client ( http://www.androirc.com ))
[02:43:37] *** Quits: kellogh (timkellogg@moz-704A74D.hsd1.co.comcast.net) (Quit: kellogh)
[02:44:03] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[02:44:59] <sfackler> dmillerw: the signature is saying "define a method peek, which, given a reference to a ControllerStack with some lifetime, returns a reference to a Controller with that same lifetime
[02:45:27] *** Quits: joone (joone@E10A1781.2160464A.A34EC3BB.IP) (Ping timeout)
[02:45:46] *** Quits: blaenk (blaenk@moz-43A413B6.lsanca.dsl-w.verizon.net) (Ping timeout)
[02:45:51] *** Quits: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) (Ping timeout)
[02:45:52] <dmillerw> ahh, alright. That makes some amount of sense. Thanks :)
[02:46:34] *** Joins: joone (joone@E10A1781.2160464A.A34EC3BB.IP)
[02:47:12] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[02:47:21] *** Joins: Erik__ (Erik_S@moz-D2F74C7B.hlrn.qwest.net)
[02:47:30] *** Quits: Erik_ (Erik_S@moz-D2F74C7B.hlrn.qwest.net) (Ping timeout)
[02:47:41] *** Erik__ is now known as Erik_
[02:51:42] *** Quits: gwty (gwtypc@3981F4ED.79F5D148.BD94A9D5.IP) (Ping timeout)
[02:53:55] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: Textual IRC Client: www.textualapp.com)
[02:54:00] *** Quits: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) (Ping timeout)
[02:54:08] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Client exited)
[02:54:10] <aatch> bjz, libnoise's core method, GetValue, is for 3-dimensions, and only for 3-dimensions. While this limits flexibility a little, it does make it easier to write a nice API on top of it.
[02:54:44] *** Joins: Scruff (Scruff@moz-ADE1AFA5.hsd1.wa.comcast.net)
[02:55:32] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[02:56:12] *** Quits: victorporof (victorporo@53EBB099.7C27E871.79933D60.IP) (Quit: victorporof)
[02:56:19] *** Joins: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP)
[02:56:23] <aatch> bjz, since otherwise you have to come up with all sorts of madness to get it to work properly.
[02:56:48] *** Joins: kellogh (timkellogg@moz-704A74D.hsd1.co.comcast.net)
[02:56:49] *** Joins: alex-abreu (alex@C08D9303.9289A342.80AB4F0.IP)
[02:58:13] * aatch wishes we had HKT
[03:02:45] <dmillerw> Can I have a vector that simply can store everything that has a trait? Keeps telling me to store a reference
[03:03:08] *** Quits: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Quit: It is tiem!)
[03:03:56] <aatch> dmillerw, you need to store trait objects
[03:04:05] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[03:04:07] <aatch> since the types could all be different sizes
[03:04:13] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[03:04:29] <aatch> which means using &Trait, &mut Trait or ~Trait
[03:05:20] *** Quits: dmac (Adium@moz-99EF2EE6.hfc.comcastbusiness.net) (Quit: Leaving.)
[03:05:52] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[03:05:52] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[03:07:28] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[03:08:35] <dmillerw> So to store references of my trait I need to again specify a lifetime. The vector is inside a struct, but applying one to a struct leads me down the same rabbit hole as earlier
[03:08:36] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[03:10:33] <jld> pcwalton: pong?
[03:11:37] *** Joins: takuin (takuin@moz-21A5F23D.ks.ks.cox.net)
[03:12:16] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[03:12:33] <pcwalton> jld: never mind, figured it out :)
[03:12:50] <pcwalton> I forget what my question was anyway, something to do with adt.
[03:13:48] <sfackler> dmillerw: you probably want something like "trait Bar { ... } struct Foo<'a> { bars: ~[&'a Bar] }" or "struct Foo { bars: ~[~Bar] }" if you want Foo to take ownership
[03:14:32] *** Joins: Ralith (ralith@moz-67D4EB93.customer.broadstripe.net)
[03:14:58] *** Quits: gimpf (gimpf@moz-2E64FEA7.adsl.highway.telekom.at) (Quit: Leaving.)
[03:17:14] <dmillerw> okay, so if I do that, I can't seem to pass out references to it through peek anymore?
[03:17:18] <dmillerw> sfackler ^
[03:17:40] <dmillerw> https://gist.github.com/dmillerw/bfadfe8f9aaaa29bb0d0
[03:18:41] <sfackler> dmillerw: returning a ~TraitController transfers ownership which is not what you want. You'll want to do
[03:18:57] <sfackler> fn peek<'a>(&'a self) -> &'a ~TraitController
[03:19:14] <sfackler> or maybe even a fn peek<'a>&'a self) -> &'a TraitController
[03:19:17] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[03:19:23] <sfackler> but I'm not sure if you can get from a ~Trait to a &Trait
[03:20:14] <apoelstra> sfackler: i had a similar problem, it was a small trait so i just clone()d it
[03:20:32] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[03:20:32] *** Quits: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) (Max SendQ exceeded)
[03:21:07] <apoelstra> small enum* but i had the same problems transfering ownership
[03:21:13] *** Quits: Scruff (Scruff@moz-ADE1AFA5.hsd1.wa.comcast.net) (Quit: )
[03:21:38] <dmillerw> apoelstra, these will be managing a lot of info unfortunately, so cloning wouldn't be ideal
[03:21:45] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[03:22:07] *** Quits: zz_kimundi (kimundi@moz-B1BB70A3.dip0.t-ipconnect.de) (Ping timeout)
[03:22:29] <dmillerw> so sfackler I think that worked. :P Seems messy to me though
[03:22:52] <apoelstra> it looks messy but it's a fairly standard idiom by this point
[03:23:28] *** Quits: maxli (maxli@moz-EE42E0E.student.cs.uwaterloo.ca) (Quit: Leaving.)
[03:24:14] *** Joins: ljrmorgan (Mibbit@991D7890.9C346C7F.FAA4474F.IP)
[03:24:36] <dmillerw> I'll take your word for it
[03:25:30] *** Quits: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP) (Quit: Lost terminal)
[03:25:43] *** Joins: zz_kimundi (kimundi@moz-68679156.dip0.t-ipconnect.de)
[03:26:04] *** zz_kimundi is now known as kimundi
[03:28:35] <dmillerw> So I'm passing an instance of my struct which implements TraitController, and it's erroring out with `ControllerMessage` does not name a structure
[03:29:08] *** Quits: alisdair (textual@BB0336C3.D2943E17.C579BC3E.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[03:30:43] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[03:31:32] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[03:31:33] *** ChanServ sets mode: +ao dherman dherman
[03:33:20] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[03:33:34] *** Quits: chromatic (chromatic@moz-28CBC7F4.hsd1.or.comcast.net) (Quit: Leaving)
[03:35:44] *** Joins: SingingBoyo (SingingBoy@DA28FB90.A5D0D593.4F048BDC.IP)
[03:35:46] *** Joins: lpy (lpy@51E8C831.DDD9F058.E99F7FDB.IP)
[03:36:42] *** Joins: onelson (owen@18CF7301.95770028.5B6BFE7D.IP)
[03:37:53] *** Quits: lpy (lpy@51E8C831.DDD9F058.E99F7FDB.IP) (Ping timeout)
[03:38:05] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[03:39:06] *** Quits: Seb (Seb@moz-97344273.actrix.co.nz) (Client exited)
[03:39:20] *** Quits: themgt (themgt@moz-83F07CDA.cm.vtr.net) (Quit: themgt)
[03:39:29] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[03:39:32] *** Joins: themgt (themgt@moz-83F07CDA.cm.vtr.net)
[03:41:10] *** Joins: pcwalton (pcwalton@moz-14285ACF.ptr.us.xo.net)
[03:41:11] *** ChanServ sets mode: +ao pcwalton pcwalton
[03:41:34] *** Quits: pcwalton (pcwalton@moz-14285ACF.ptr.us.xo.net) (Quit: pcwalton)
[03:42:09] *** Quits: p1start (rewi@moz-A082F561.adsl.xtra.co.nz) (Ping timeout)
[03:42:31] *** Joins: pcwalton (pcwalton@moz-14285ACF.ptr.us.xo.net)
[03:42:31] *** ChanServ sets mode: +ao pcwalton pcwalton
[03:43:39] *** Quits: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp) (Client exited)
[03:43:42] *** Quits: dmillerw (dylan@moz-D352EDAE.eugn.qwest.net) (Quit: Leaving)
[03:44:00] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[03:45:49] *** Quits: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp) (Ping timeout)
[03:48:06] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[03:48:34] *** Quits: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) (Ping timeout)
[03:50:59] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[03:51:18] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[03:53:30] <ljrmorgan> hi - are there any examples of well tested rust libraries? I'm really struggling to get the tests for my library compiling. I used to have them all in one file (when I was using rustpkg), now I've tried moving them into test modules within the source files and I just can't get things to compile anymore
[03:55:33] <ChrisMorgan> ljrmorgan: what are the compilation failures?
[03:56:19] <ljrmorgan> it's complaining about missing extern mod
[03:56:37] <ChrisMorgan> ljrmorgan: is your code accessible publicly?
[03:56:55] <ljrmorgan> ChrisMorgan: No, it will be, but I wanted to get it compiling first :-)
[03:57:32] *** Joins: maxli (maxli@moz-EE42E0E.student.cs.uwaterloo.ca)
[03:57:54] <ChrisMorgan> There are a couple of different patterns in use: (a) storing tests inside the library, which should pretty much Just Workâ„¢, and (b) storing them outside and linking with the regular crate.
[03:57:54] <ljrmorgan> ChrisMorgan: I could back-out the changes I made recently which broke everything and stick it on github I suppose
[03:57:59] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[03:58:22] <ljrmorgan> ChrisMorgan: so I thought I'd store them in the library, in "mod test" blocks - is that what you mean?
[03:59:30] <ChrisMorgan> That works and is (a).
[03:59:32] *** Quits: sawrubh|bot (~sawrubhbo@moz-E0F149F7.members.linode.com) (Input/output error)
[04:00:03] <ChrisMorgan> ljrmorgan: make sure you have the appropriate `use` statements in it all.
[04:00:43] <ChrisMorgan> SimonSapin: in rust-url, would you permit me to rename *URL* to *Url* and IPv6* to Ipv6*, in line with prevailing Rust conventions?
[04:00:53] *** Joins: sawrubh|bot (~sawrubhbo@moz-E0F149F7.members.linode.com)
[04:01:52] <ljrmorgan> ChrisMorgan: I think this is where I start to go wrong - should I have "use super::Blah" or "use mylib::blah::Blah"? I think I also ran into issues because my library exports macros which I want to use in my tests, but to use those I was linking against my library
[04:02:01] <ljrmorgan> it all got very confusing :-)
[04:02:05] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[04:02:20] <ChrisMorgan> ljrmorgan: it would be either `use super::Blah;` or `use blah::Blah;`.
[04:02:39] <ChrisMorgan> It's inside the same crate, so there is no `mylib` in the root namespace.
[04:02:42] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[04:02:44] *** Quits: canhtak (canhtak@moz-8A625E1D.wl.t.ulaval.ca) (Quit: canhtak)
[04:03:58] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[04:04:01] <ljrmorgan> ChrisMorgan: ok, thanks for all your help, I'll experiment a bit more and see how I get on
[04:05:10] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[04:05:29] *** Quits: jesse99 (jesse99@moz-8B1E0C5D.hsd1.wa.comcast.net) (Ping timeout)
[04:05:55] *** Joins: jesse99 (jesse99@moz-8B1E0C5D.hsd1.wa.comcast.net)
[04:06:12] <ChrisMorgan> ljrmorgan: for `use ...;`, the path is relative to the root namespace except in two cases: when the first component is `self` or `super`. When your tests were outside the crate, you had `extern mod mylib;` and that loaded `mylib` into the root namespace. Now your tests are inside the crate, so the root namespace is what used to be the `mylib` namespace.
[04:07:17] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[04:10:13] *** Joins: olivernn (olivernigh@moz-7CE0F8.access.mtnbusiness.co.za)
[04:11:11] <ljrmorgan> ChrisMorgan: ok, I think I understand, just about anyway... I think the issue I have now is that my tests are inside the crate, but they also link against the library. I was running into things like (can't remember the exact error): "expected mylib::Blah but got Blah"
[04:11:41] <cmr> ljrmorgan: libstd is an excellent example of a well-tested crate.
[04:11:52] <ChrisMorgan> ljrmorgan: yes, mixing the two is a recipe for disaster. Remove your `extern mod mylib;` and any `mylib::`.
[04:12:02] *** Quits: olivernn (olivernigh@moz-7CE0F8.access.mtnbusiness.co.za) (Ping timeout)
[04:12:17] <cmr> https://github.com/mozilla/rust/blob/master/src/libstd/iter.rs#L2343
[04:12:23] <ChrisMorgan> ljrmorgan: it's a good demonstration of how you can, if necessary, have multiple versions of a crate loaded simultaneously, anyway.
[04:15:36] *** Joins: dmillerw (dylan@moz-D352EDAE.eugn.qwest.net)
[04:16:55] <ljrmorgan> thanks guys, part of the reason I had the "extern mod mylib" stuff was that my lib.rs file was exporting macros that I was using in my tests. I can't seem to get the macros working without the extern mod
[04:17:14] *** Quits: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp) (Client exited)
[04:17:36] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[04:17:41] *** Quits: pcwalton (pcwalton@moz-14285ACF.ptr.us.xo.net) (Quit: pcwalton)
[04:18:22] *** Quits: alex-abreu (alex@C08D9303.9289A342.80AB4F0.IP) (Ping timeout)
[04:18:47] *** Joins: mattm (Mibbit@B96613DA.BFB18F0A.28EACA3.IP)
[04:19:10] <ljrmorgan> now I'm getting an ICE :-(
[04:19:21] *** Quits: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp) (Ping timeout)
[04:19:26] <ChrisMorgan> ljrmorgan: you could put them in a separate crate and use `#[phase(syntax)] extern mod mylib_macros;`
[04:19:34] *** Quits: kellogh (timkellogg@moz-704A74D.hsd1.co.comcast.net) (Quit: kellogh)
[04:19:57] <ChrisMorgan> Or if they're just macro_rules! macros, then you don't need thatâ€”you just need appropriate #[macro_escape]; attributes on the modules
[04:20:17] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[04:20:24] <cmr> And #[macro_export] if you want to use them outside your crate.
[04:20:45] *** Quits: takuin (takuin@moz-21A5F23D.ks.ks.cox.net) (Ping timeout)
[04:21:11] <ChrisMorgan> ljrmorgan: these sorts of things are much easier to advise on if we can see the code and what you're *really* trying to do.
[04:21:22] <ljrmorgan> I have #[macro_export] above each of the macros, but no #[macro_escape] attributes
[04:21:22] *** Quits: hdevalence (quassel@moz-D125A39F.home3.cgocable.net) (Connection reset by peer)
[04:21:46] <cmr> #[macro_escape] "lifts" macros from only being visible in a given mod to also the parent module.
[04:21:53] <ljrmorgan> ChrisMorgan: Sorry, I really will make it public soon, I just don't want to make something public when it doesn't compile
[04:21:55] <cmr> (though they need to come before use, lexically)
[04:22:16] <ChrisMorgan> ljrmorgan: that's for if you wish to use it elsewhere in the same crate but in a later module (it must be a later moduleâ€”earlier won't work).
[04:23:14] *** Quits: cdidd (cdidd@moz-59E35386.broadband.corbina.ru) (Ping timeout)
[04:23:51] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[04:24:19] *** Quits: bytbox (s@moz-54E13927.washdc.fios.verizon.net) (Input/output error)
[04:24:29] *** Joins: bytbox (s@moz-54E13927.washdc.fios.verizon.net)
[04:24:40] <cmr> jctrl-U
[04:24:43] <cmr> oops, sorry.
[04:24:50] *** Joins: barosl (barosl@3DE683B6.E551553C.7544CABF.IP)
[04:25:04] <Diamond> #[no_mangle]'s still a thing, right?
[04:25:22] <cmr> Diamond: yep
[04:26:01] *** Joins: cdidd (cdidd@moz-3F78C8D2.broadband.corbina.ru)
[04:26:13] <ljrmorgan> cmr: ChrisMorgan: Thanks guys, this is looking really promising
[04:26:20] <dmillerw> So I'm curious. What's the reasoning behind Rust using only structs and traits, and not going for the full class route?
[04:26:28] <cmr> dmillerw: we used to have classes.
[04:26:50] <dmillerw> why drop them then?
[04:27:00] <cmr> because structs and traits and impls are better, of course!
[04:27:46] <cmr> I don't know all the reasoning, I wasn't around then.
[04:27:51] <cmr> bstrie_boot: do you remember?
[04:28:26] <dmillerw> I would definitely disagree with them being better :|
[04:28:32] <cmr> Why?
[04:28:46] <cmr> With them you can seamlessly add methods to types defined in another crate.
[04:29:05] <cmr> Plus bounded polymorphism is really nice
[04:29:39] <ChrisMorgan> Once you've got structs and traits, the need for classes just disappears. Most things you can do with classes, you can do with structs and traits, and the rest you're probably safer not doing.
[04:29:49] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[04:30:07] <cmr> dmillerw: https://github.com/mozilla/rust/wiki/Meeting-weekly-2012-06-12#wiki-maxmin-classes, https://github.com/mozilla/rust/wiki/Meeting-weekly-2012-06-19#wiki-case-classes, https://github.com/mozilla/rust/wiki/Meeting-weekly-2012-08-07#wiki-case-classes
[04:30:16] <cmr> https://github.com/mozilla/rust/wiki/Meeting-weekly-2011-11-29#wiki-type-classes
[04:30:27] <cmr> all the relevant meeting notes I could find
[04:30:41] <cmr> (in reverse chronological order)
[04:30:56] <ChrisMorgan> ("records" are another concept that has been removed from the language in favour of structs.)
[04:32:10] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[04:32:32] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[04:32:46] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[04:32:58] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[04:33:54] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[04:34:48] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[04:36:10] <cmr> dmillerw: seems like what was *called* classes is really much closer to what we have today than to any other classical OO system
[04:36:16] <dmillerw> I personally just don't understand it. I find them irritating. But hey, to each his own
[04:36:24] <cmr> What do you find irritating about them?
[04:36:29] *** Joins: lpy (lpy@51E8C831.DDD9F058.E99F7FDB.IP)
[04:36:32] <cmr> separate struct/impl blocks?
[04:38:06] <Yurume> dmillerw: that's simply because what can be done with structs and traits is a strict superset of what can be done with classes.
[04:39:02] <Yurume> there is an attempt to have a simpler syntax for single inheritance (since some applications literally demand it) but it does not change the overall picture
[04:39:22] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[04:39:33] <Yurume> as it can be done today, it is just annoying to do so.
[04:39:56] *** Joins: canhtak (canhtak@moz-8A625E1D.wl.t.ulaval.ca)
[04:41:13] *** Quits: dmillerw (dylan@moz-D352EDAE.eugn.qwest.net) (Quit: Leaving)
[04:42:45] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[04:43:22] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[04:45:10] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[04:46:22] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Client exited)
[04:46:43] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[04:50:17] *** Joins: derek_c (derek@moz-12EF5DF.cit.cornell.edu)
[04:50:54] *** Quits: sawrubh|bot (~sawrubhbo@moz-E0F149F7.members.linode.com) (Input/output error)
[04:51:04] *** Joins: p1start (rewi@moz-A082F561.adsl.xtra.co.nz)
[04:51:55] *** Joins: sawrubh|bot (~sawrubhbo@moz-E0F149F7.members.linode.com)
[04:52:22] <o11c> I know it can be convenient to have single inheritance, but I would like to see it gone
[04:53:09] <cmr> we don't have it *now*
[04:53:15] <derek_c> inside a #[start] function `fn start(argc: int, argv: **u8)`, how would you process `argc` and `argv` so that you get the list of arguments?
[04:53:23] <Eridius> derek_c: the same way you do in C?
[04:53:59] <derek_c> Eridius: yeah, but how do you do pointer arithmetic in Rust?
[04:54:12] <sam113101> how many pointer types does rust have?
[04:54:25] <cmr> There used to be a function for getting a ~[~[u8]] out of a **u8
[04:54:30] <cmr> I have no idea where it went.
[04:54:38] <cmr> sam113101: three.
[04:54:40] <Eridius> derek_c: check out std::ptr
[04:54:41] <cmr> in the language
[04:54:46] <cmr> ~, &, *
[04:54:59] <Eridius> std::ptr::array_each_with_len() will let you iterate it
[04:55:00] <sam113101> cmr: what do they do?
[04:55:04] <cmr> (although you might count &mut and *mut as separate)
[04:55:22] <cmr> sam113101: ~T is like an auto malloc/free pointer, & is a reference, * is a raw pointer.
[04:55:24] *** Joins: hdevalence (quassel@moz-D125A39F.home3.cgocable.net)
[04:55:29] <cmr> references have lifetimes and static analysis done to ensure safety.
[04:55:34] <cmr> * is just a raw pointer like C
[04:55:43] <cmr> specifically const*
[04:55:48] <cmr> our *mut is like C's unadorned *
[04:55:57] <derek_c> Eridius: thanks
[04:56:10] *** Joins: Jemaclus (jemaclus@moz-5A4BC30.hsd1.ca.comcast.net)
[04:56:19] <sam113101> well, doesn't it make rust unsafe?
[04:56:28] <cmr> you need unsafe blocks to derefence them.
[04:56:40] *** Quits: sawrubh|bot (~sawrubhbo@moz-E0F149F7.members.linode.com) (Input/output error)
[04:56:41] <cmr> it's analogous to sun.misc.Unsafe
[04:57:03] <sam113101> what's that?
[04:57:24] <cmr> a class in java that lets you do all sorts of crazy stuff.
[04:57:27] <o11c> cmr: I mean, gone from the minds of programmers
[04:57:34] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[04:57:34] <sam113101> oh
[04:57:34] *** Joins: sawrubh|bot (~sawrubhbo@moz-E0F149F7.members.linode.com)
[04:57:41] <sam113101> IÂ never used java ;p
[04:58:01] <o11c> cmr: if Rust provides single inheritance, then all the power of Traits will be seen as "that thing you use when you can't use single inheritance to solve all the world's problems, but stay away from otherwise"
[04:58:02] <cmr> sam113101: http://static.rust-lang.org/doc/master/rust.html#unsafety
[04:58:10] *** Quits: maxli (maxli@moz-EE42E0E.student.cs.uwaterloo.ca) (Quit: Leaving.)
[04:58:15] <cmr> o11c: single inheritance is only struct fields.
[04:58:24] *** Joins: maxli (maxli@moz-EE42E0E.student.cs.uwaterloo.ca)
[04:58:29] <cmr> o11c: traits still need to do everything else
[04:58:50] <cmr> http://smallcultfollowing.com/babysteps/blog/2013/10/24/single-inheritance/
[04:58:52] <o11c> and companies will come up with a policy to avoid Traits since they're too confusing
[04:59:02] *** Quits: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net) (Quit: Leaving)
[04:59:12] <Eridius> o11c: you have some strange ideas
[04:59:41] <tiffany> the problem with using traits instead of single inheritance is that it's a little bit verbose
[04:59:52] <montezuma> does regex exist in rust yet
[05:00:10] <cmr> montezuma: there are bindings to various regex languages.
[05:00:14] <cmr> s/languages/libraries/
[05:00:24] <ljrmorgan> has anyone seen this error before? any idea what it means? "error: internal compiler error: borrow-trait-obj associated with bad sty: &ty_err"
[05:00:28] <cmr> montezuma: https://github.com/mozilla/rust/issues/3591
[05:00:30] *** Quits: maxli (maxli@moz-EE42E0E.student.cs.uwaterloo.ca) (Input/output error)
[05:00:31] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[05:00:39] <montezuma> cheers
[05:00:39] *** Joins: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca)
[05:00:42] <cmr> ljrmorgan: see the "reporting a bug" link in the error message.
[05:00:56] <cmr> ljrmorgan: but it sounds like it's caused by another type error in your program
[05:01:12] <o11c> Eridius: I'm paranoid, but paranoia has protected me in the past, so I won't stop.
[05:01:13] <cmr> and you're trying to make a type error into a trait object
[05:01:16] *** Joins: Seb (Seb@moz-97344273.actrix.co.nz)
[05:02:09] <Seb> What's the best way to get a the first u32 chunk out of a [u8, ..8]?
[05:02:22] <cmr> Seb: use a BufReader, .read_le_u32
[05:02:27] <cmr> (or whatever endianness you desire)
[05:02:29] <Eridius> Seb: x[0] << 24 | x[1] << 16 | x[2] << 8 | x[3] ?
[05:02:38] <ljrmorgan> cmr: thanks, I appreciate it's a compiler bug, just wondered what I could change to avoid running into it. Trying to turn a type error into a trait object was not something I wanted to do...
[05:03:04] <Eridius> ljrmorgan: I bet if you can identify and fix the original type error the ICE will go away
[05:06:09] <cmr> I think "type errors" show up like that when inference fails.
[05:06:31] <Seb> cmr, Eridius: Thanks.. will try a BufReader
[05:07:00] *** Joins: daschl (Adium@moz-A3B8EA95.static.bezeqint.net)
[05:07:25] <Seb> Will a BufReader add much overhead?
[05:07:30] <cmr> Seb: no
[05:07:49] <cmr> esp if you're using native endianness there should be 0 overhead.
[05:07:56] <cmr> (make sure to use -O)
[05:08:17] <Seb> That's the optimization flag right?
[05:08:26] <cmr> yes
[05:09:17] <Seb> Neat! Sorry for the stupid questions :)
[05:09:19] <Yurume> cmr: in fact, I think LLVM optimizes read/write in the reverse endianness into (say) x86 `bswap` etc.
[05:09:35] <cmr> Yurume: do you have evidence of that transformation?
[05:09:45] <montezuma> is copy_memory the typical way to assign the contents of one vector to another?
[05:09:54] <o11c> yurume, cmr: it does it in many case, but is stupid in other cases
[05:09:54] <Yurume> cmr: http://blog.regehr.org/archives/1055
[05:10:05] <Yurume> not a silver bullet of course
[05:10:15] <cmr> beautiful
[05:10:27] *** Joins: beifeng (Mibbit@284C36E7.3062CEC3.670EEFD.IP)
[05:11:11] <o11c> yurume, cmr: I just recalled, last time I checked, you had to #ifdef by endian it to make it work
[05:11:11] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Connection reset by peer)
[05:11:24] <o11c> i.e. it would optimize a bswap, but not a direct endian-write
[05:11:24] <Jemaclus> I should just change my nick to DumbQuestioner... here's another: just for kicks, if I wanted to implement something like regex for Rust, would it be better to build it from scratch (i.e., 100% rust) or to write bindings for an existing C library like re2?
[05:11:35] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[05:11:42] <cmr> Jemaclus: well there are already bindings for re2 etc.
[05:11:44] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[05:11:47] <cmr> "better" depends on your goals...
[05:11:53] <o11c> Jemaclus: there is definitely a need for a native RE engine
[05:12:14] <o11c> but it's far from easy to actually write a good one
[05:12:22] <Jemaclus> I saw that. 
[05:12:43] * o11c wishes vim's RE engine was libraryizable
[05:12:48] <Jemaclus> ok, that answers my question. thanks.
[05:13:02] <Yurume> Russ Cox's articles on RE2 are beautiful, but they come only after all the hard work. ;)
[05:13:09] <Eridius> Yurume: RE2 is also a bit limited
[05:13:16] <Jemaclus> I'm not even close to the level of competence required to do a native RE engine. I was just browsing the issues on Github and figured I'd ask. :)
[05:13:17] <Eridius> e.g. no backreferences
[05:13:25] <Yurume> Eridius: NFA/DFA debates are enough to be heard :p
[05:13:26] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: )
[05:14:08] <Jemaclus> I'm mostly just tackling Rosetta Code tasks to learn. I don't feel like I'm making a ton of progress. A lot of these things are contrived or not really necessary.
[05:14:14] *** Joins: Heather (Heather@19663F6.F53BAACC.9C17E900.IP)
[05:14:16] <Yurume> o11c: vim's RE engine lacks some crucial features; for example, it fails to allow the wider Unicode range in character classes. (I think the range is limited to 256 codepoints)
[05:14:21] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Client exited)
[05:14:33] <Heather> good morning
[05:14:33] <bstrie_boot> cmr: I've got a treat for you: http://thread.gmane.org/gmane.comp.lang.rust.devel/858
[05:14:36] <Heather> how to handle IoResult
[05:14:42] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[05:14:43] <cmr> bstrie_boot: awesome!
[05:14:49] <Yurume> Heather: if_ok!()? (I haven't tried that yet)
[05:15:05] <cmr> Jemaclus: A pure-Rust RE engine, even if limited, would still be awesome :)
[05:15:09] <Eridius> Heather: with `match`, or if_ok!() if it does what you want
[05:15:20] <o11c> yurume: I find that I really don't care about character classes other than [A-Za-z_0-9] and [^ ]
[05:15:23] <cmr> Jemaclus: I tried implementing Lua's patterns but got extraordinarily lost.
[05:15:30] <Yurume> so there are two cases: if you want to propagate the errors down to the callers, make the return type IoResult and use if_ok!()
[05:15:34] <Yurume> otherwise stick to match.
[05:15:39] <Heather> Eridius: with match?
[05:15:54] <Jemaclus> cmr: I'm still a long way from done with the LZW thing, so... maybe RE is too far out of my reach right now. But I'll keep that in mind. :)
[05:15:54] <Heather> Ok => Fail => ?
[05:15:55] <o11c> Jemaclus: realistically, you want to implement the ECMAScript standard
[05:16:06] <Eridius> Heather: Ok(result) and Err(err)
[05:16:12] <Heather> Eridius: thanks
[05:16:19] <Yurume> o11c: CJK users often need to filter the text over certain classes of characters. e.g. [\uac00-\ud7ac]?
[05:16:53] *** Quits: canhtak (canhtak@moz-8A625E1D.wl.t.ulaval.ca) (Ping timeout)
[05:16:57] <Yurume> I don't really expect excellent CJK support in vim, but that annoys me and friends many times
[05:17:03] *** bstrie_boot is now known as bstrie_maester
[05:17:13] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[05:17:39] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[05:17:59] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[05:19:10] <Heather> Eridius: if I don't need error message Err(_) ?
[05:19:24] *** Quits: mattm (Mibbit@B96613DA.BFB18F0A.28EACA3.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[05:19:25] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[05:20:26] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[05:20:33] <Eridius> Heather: sure
[05:20:57] <bstrie_maester> Heather: instead of Err(_) you can probably get away with just _
[05:23:29] <Heather> bstrie_maester: matrch res { Ok(..) => ... _ => .. ?
[05:23:38] <bstrie_maester> Heather: yep
[05:23:59] <bstrie_maester> either way you know it's an error, and either way you don't care what the error is :P
[05:24:27] *** bstrie_maester is now known as bstrie_iro_Days
[05:25:06] *** Quits: bjustin (bjustin@moz-8FC28563.sierrabravo.net) (Connection reset by peer)
[05:26:01] *** Joins: an0nymous (an0nymous@moz-F04BA440.tx.res.rr.com)
[05:26:11] <bstrie_iro_Days> cmr: that proposal is a blast from the past. it's so wild to think of how different everything turned out!
[05:26:33] <bstrie_iro_Days> I remember being so psyched reading it at the time
[05:26:54] <bstrie_iro_Days> we're better off today :)
[05:28:37] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[05:30:14] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[05:30:22] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[05:32:21] <Heather> eh... -> IoResult<()>
[05:32:35] *** Quits: cdidd (cdidd@moz-3F78C8D2.broadband.corbina.ru) (Ping timeout)
[05:32:50] <Heather> this way I better check if_ok!
[05:33:43] *** Joins: canhtak (canhtak@moz-8A625E1D.wl.t.ulaval.ca)
[05:34:00] <montezuma> there isnt any syntactic sugar for performing a vector-wide scalar cast is there?
[05:34:38] <montezuma> copy_memory(buf.mut_slice(53, 58), [c >> 24 as u8, c >> 16 as u8, c >> 8 as u8, c as u8]); is a bit ugly
[05:34:39] <Heather> there really should be if_not_ok!
[05:34:58] <bstrie_iro_Days> Heather: write the macro! :)
[05:35:15] <cmr> Heather: IoResult<T> is just Result<T, IoError>
[05:35:25] <bstrie_iro_Days> montezuma: doubtful
[05:35:45] <cmr> Heather: wouldn't it be easier to have a match on the Result instead of a macro for handling each case separately?
[05:37:40] <Heather> cmr:  mkdir returns -> IoResult<()>
[05:38:20] <cmr> Heather: if_ok fails when there is an error. do you want if_not_ok to fail on success!?
[05:38:40] <cmr> or, that's not true, sorry.
[05:38:57] <Heather> I want to handle error in if body
[05:39:10] *** Joins: doener (doener@moz-C68F600D.unity-media.net)
[05:39:23] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[05:39:23] *** ChanServ sets mode: +ao dherman dherman
[05:39:48] <Heather> cmr: btw... I need Im_not_Ok(why) { } macro
[05:40:23] <Heather> cmr: just to not write match xx { Ok(_) => (), <- that feels a bit weird
[05:41:16] <Heather> e.g.   match mkdir(&prefix, S_IRWXU as u32) { Ok(_) => () , Err(er) => fail!("failed to create prefix dir : {}", er) }
[05:41:55] <Heather> => if_fail!(err) mkdir(&prefix, S_IRWXU as u32) { fail!("failed to create prefix dir : {}", er) }
[05:42:26] <Heather> or somehow alike...
[05:42:32] <Jemaclus> Is there a way to declare a constant for a file, to be used in all functions?
[05:42:39] *** Joins: earlzlap (earlz@moz-483E1E31.neo.res.rr.com)
[05:42:57] <Yurume> `std::io::File`?
[05:44:22] <Jemaclus> hm.
[05:44:33] <Heather> Can someone remind me where I can track this bug: [&"foo", bar] ?
[05:44:39] <Jemaclus> I mean something like:  let foo = "bar";  fn main() { println!("{}", foo); } // bar
[05:46:20] <Yurume> Jemaclus: static foo: &'static str = "bar";
[05:46:31] <Jemaclus> ah cool.
[05:46:33] <Jemaclus> thanks
[05:46:37] <Yurume> types that can be in static items are limited though
[05:46:53] <Yurume> for example, you cannot put HashMap in statics
[05:47:28] <Yurume> (the limitation is not a bad thing, it is to avoid the static initialization race as seen in C++ etc.)
[05:48:02] *** Joins: cdidd (cdidd@moz-F6E72CE9.broadband.corbina.ru)
[05:48:47] <Jemaclus> yeah, that makes sense
[05:48:48] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[05:48:57] *** Joins: sust_rucks (Mibbit@moz-82E5EE96.hsd1.va.comcast.net)
[05:49:08] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[05:49:24] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[05:49:50] *** Quits: ljrmorgan (Mibbit@991D7890.9C346C7F.FAA4474F.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[05:50:12] <sust_rucks> Any advice for using shared channels? I've been attempting to follow the documentation from http://static.rust-lang.org/doc/master/guide-tasks.html and keep getting unconstrained type errors
[05:50:45] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[05:50:49] *** Quits: voxpopuli (fanservice@3E03F882.9AD3813C.689607DE.IP) (Ping timeout)
[05:51:08] *** Quits: hdevalence (quassel@moz-D125A39F.home3.cgocable.net) (Ping timeout)
[05:51:08] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[05:52:01] <bjz> sust_rucks: gist?
[05:52:34] <aatch> bjz, so I may have made *a lot* of changes to noise-rs
[05:52:36] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[05:52:45] <bjz> aatch: ^_^
[05:52:58] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[05:52:59] <aatch> Including a completely different perlin implementation
[05:53:06] <aatch> That doesn't require a ton of allocations
[05:53:18] <aatch> (If you want multiple octaves etc.)
[05:53:52] <aatch> I'm basically just cribbing off of libnoise right now
[05:53:59] <sust_rucks> bjz: following the code there exactly, I get the error "cannot determine the type for this local variable: unconstrained type"
[05:54:20] <bjz> aatch: awesome!
[05:54:28] <bjz> sust_rucks: but which part?
[05:54:57] <sust_rucks> bjz: ah, sorry. at the (port, chan) tuple
[05:55:25] <sust_rucks> in let (port, chan) = SharedChan::new();
[05:55:47] *** Quits: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca) (Quit: Leaving.)
[05:55:48] <bjz> you might need: let (port, chan) = SharedChan::new::<T>();
[05:55:53] *** Joins: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca)
[05:55:57] <bjz> to give rust the hint
[05:56:10] <bjz> that you need some type T
[05:56:25] *** Joins: benjamin_ (benjamin@moz-98B43171.dip0.t-ipconnect.de)
[05:57:26] *** Joins: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net)
[05:58:03] *** Quits: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net) (Quit: I'm sure it's perfectly safe)
[05:58:34] <bjz> sust_rucks: often Rust can infer the type, but cometimes it needs help
[05:58:37] *** Quits: LinearInterpol (RJones@moz-E6F82C3A.maine.res.rr.com) (Ping timeout)
[05:58:47] <bjz> oh wait
[05:59:00] <bjz> it's actually: let (port, chan) = SharedChan::<T>::new();
[05:59:13] *** Quits: jvoorhis (jvoorhis@moz-84A91726.ptld.qwest.net) (Ping timeout)
[05:59:22] *** Quits: Earnestly (earnest@811A97A3.CF19AA69.5411983D.IP) (Ping timeout)
[06:00:07] <sust_rucks> bjz: perfect!
[06:01:03] <sust_rucks> that worked out. just out of question, where in the documentation did you see that it's SharedChan::<T>::new(); as opposed to SharedChan::new::<T>();? I'm getting a bit lost in the documentation (though the slightly broken search really isn't helping)
[06:01:18] <sust_rucks> well, not slightly broken. just not to my liking
[06:02:30] <bjz> http://static.rust-lang.org/doc/master/std/comm/struct.SharedChan.html
[06:02:52] <ChrisMorgan> sust_rucks: that means that the T is for SharedChan<T>â€”the type, not the method.
[06:03:00] <bjz> `new()` is impled on SharedChan<T>
[06:03:08] *** Joins: sammykim (sammy.kim@5AB4884B.FCC4549.14D5B978.IP)
[06:03:18] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[06:03:33] <ChrisMorgan> sust_rucks: Type::<T>::static_method() corresponds to `struct Type<T>; impl<T> Type<T> { fn static_method() {} }`
[06:03:48] <ChrisMorgan> sust_rucks: Type::static_method::<T>() corresponds to `struct Type; impl Type { fn static_method<T>() {} }`
[06:03:52] <bjz> so to pin down the type you need to do SharedChan::<T>::new()
[06:03:55] <sust_rucks> got it, thanks all
[06:03:58] <bjz> yep ^
[06:04:30] <ChrisMorgan> (In fact, the second example could still be for a struct Type<T>, but the generic parameter that has been specified will be the method's parameter. The other will be inferred.)
[06:05:26] *** Joins: ljrmorgan (Mibbit@991D7890.9C346C7F.FAA4474F.IP)
[06:05:28] <ChrisMorgan> (So you could write something that could be called like `Type::<T>::static_method::<U>()` if you were really feeling particularly exuberant.)
[06:06:12] <cmr> Type::<'a, T, U<'b, V>>::static_method::<W<X, Y>>()
[06:06:19] <cmr> The beating will continue until morale improves
[06:07:00] <sust_rucks> if morale has improved due to a slightly better understanding of typing and declaring types in certain situations, do the beatings still continue?
[06:07:35] <cmr> I was more refering the the abject misery of writing type signatures
[06:07:41] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Ping timeout)
[06:08:24] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[06:09:00] <sust_rucks> i'm not sure i'll get to a point in rust where i fully understand a type signature like that, so that may be my way to avoid it
[06:09:33] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Ping timeout)
[06:09:47] <cmr> I'm not sure *I* understand what such a convoluted type signature could possibly be used for
[06:10:33] <aatch> cmr, and why are you naming types 'U' and 'W'?
[06:11:10] <o11c> there's nothing hard to read about it, but it does scream WWWHHHHHYYYYYYYYYYYYYYYYY????????????????
[06:12:09] <bjz> aatch: T, U, V, W, X, Y, Z...?
[06:12:40] *** Joins: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com)
[06:12:42] <aatch> bjz, yes, as type variables, but the 'U' and 'W' in his "example" aren't type variables
[06:12:49] <aatch> since we don't support higher-kinded types
[06:14:38] *** Quits: ljrmorgan (Mibbit@991D7890.9C346C7F.FAA4474F.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[06:14:57] <cmr> rusti: fn foo<T<'a, U>>(x: T) -> T { x }
[06:14:59] -rusti- <anon>:10:17: 10:18 error: expected `,` but found `<`
[06:14:59] -rusti- <anon>:10         fn foo<T<'a, U>>(x: T) -> T { x }
[06:14:59] -rusti-                           ^
[06:14:59] -rusti- application terminated with error code 101
[06:15:07] <cmr> oh does that seriously not work
[06:15:22] <cmr> maybe I was thinking of additionally typarams on trait bounds
[06:15:44] <aatch> cmr, you can do foo<T,U:Trait<T>>
[06:15:52] <cmr> right
[06:18:27] *** Joins: sanxiyn (tinuviel@B4104EBB.3CC170B1.1E14B209.IP)
[06:18:49] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[06:19:05] *** Joins: ercxx (ercan@moz-88DD3A7E.dyn.optonline.net)
[06:19:35] <ercxx> I'm having hard time with lifetimes: `error: mismatched types: expected `T` but found `T` (expected type parameter but found type parameter)`
[06:20:16] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[06:20:22] *** Quits: Jemaclus (jemaclus@moz-5A4BC30.hsd1.ca.comcast.net) (Client exited)
[06:21:36] <sanxiyn> ercxx: T is not a lifetime?
[06:21:45] <sanxiyn> (Lifetime is spelt with leading apostrophes)
[06:21:53] *** Quits: Erik_ (Erik_S@moz-D2F74C7B.hlrn.qwest.net) (Ping timeout)
[06:21:54] <ercxx> T is a type.
[06:22:23] <sanxiyn> Probably a binder problem
[06:22:39] <aatch> bjz, anyway, I'm not sure if you saw my earlier message. A major change I've made is that I've copied libnoise's thing where it just takes 3 values for getting the value.
[06:22:40] <sanxiyn> Make sure you don't have <T> in two places such that T refers to different type parameter
[06:22:49] <aatch> An x, y and a z
[06:23:03] *** Joins: aravindavk (aravinda@moz-BD0CADEE.redhat.com)
[06:23:04] <bjz> aatch: alright
[06:23:25] <aatch> So it means if you want 1d noise, you just one dimension and leave the others.
[06:23:25] <Heather> std io result -> IoResult?
[06:23:26] <bjz> aatch: does that mean it is slower for lower dimensions?
[06:23:53] <ercxx> sanxiyn: ok
[06:24:07] <aatch> bjz, I'm not sure. Probably, but I don't know if it'll be significant
[06:24:16] <aatch> Anyway, I'll open a PR so you can take a look
[06:24:26] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[06:24:44] <bjz> awesome, will look
[06:25:35] <Heather> where is std::io::result
[06:27:09] *** Quits: derek_c (derek@moz-12EF5DF.cit.cornell.edu) (Quit: Leaving)
[06:27:33] <Heather> there should be list for such changes
[06:27:33] *** Quits: zztr (Thunderbir@moz-CA50D606.dsl.static.sonic.net) (Quit: zztr)
[06:27:40] <Heather> toi save users from pain...
[06:27:43] <aatch> bjz, and opened.
[06:28:04] <aatch> I'm heading off now though.
[06:28:19] <aatch> (hence the terseness of the PR)
[06:29:00] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[06:30:03] <fournm> Hey all, are there any particular issues that would be a good starting point for someone? Short of just rolling a die and pointing at something tagged E-easy and unassigned?
[06:30:07] *** Quits: canhtak (canhtak@moz-8A625E1D.wl.t.ulaval.ca) (Quit: canhtak)
[06:30:48] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[06:32:20] *** Quits: aravindavk (aravinda@moz-BD0CADEE.redhat.com) (Ping timeout)
[06:32:34] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[06:32:58] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[06:33:19] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: Textual IRC Client: www.textualapp.com)
[06:33:38] *** Joins: andrew-d_w (andrew-d_w@moz-963E7120.nat.bb.dnainternet.fi)
[06:33:42] *** Quits: andrew-d_w (andrew-d_w@moz-963E7120.nat.bb.dnainternet.fi) (Input/output error)
[06:34:06] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[06:34:38] <Heather> okay... maybe people here is just sleeping...
[06:34:41] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[06:34:45] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[06:34:54] <Yurume> and I'm doing the daily job.
[06:34:58] *** Quits: sust_rucks (Mibbit@moz-82E5EE96.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[06:35:15] *** Joins: eddyb (eddy@832D2DE5.66315F97.FB866788.IP)
[06:35:44] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[06:35:53] *** Joins: cluelessperson (cluelesspe@moz-617B0E16.tx.res.rr.com)
[06:36:11] <cluelessperson> Hey guys, My group just started a Rust server because we're tired of abusive admins and hackers.
[06:36:14] <sanxiyn> fournm: What are you interested in? (Roughly, say, compiler, standard library, runtime, etc.)
[06:36:32] <sanxiyn> cluelessperson: As in Rust-the-game?
[06:36:42] <cluelessperson> I canyup, is this a correct place?
[06:36:47] <sanxiyn> No
[06:36:52] <cluelessperson> lol
[06:36:54] <sanxiyn> This is abput Rust-the-programming-language
[06:36:58] <bjz> :)
[06:37:01] <cluelessperson> woops
[06:37:03] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[06:37:07] <bjz> but hi o/
[06:37:22] <sp3d> plenty of hackers here :)
[06:37:32] *** Joins: eibwen (kvirc@moz-92E31A33.dip0.t-ipconnect.de)
[06:37:44] <Heather> Rust server :D
[06:37:49] <Heather> on rust os
[06:38:04] <Yurume> that'd be an HTTP server written in Rust? :p
[06:38:04] <eddyb> written in Rust?
[06:38:10] <fournm> Standard library, compiler, probably in that order?
[06:38:37] *** Quits: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com) (Ping timeout)
[06:38:44] <Yurume> fournm: then you may start with A-libs tag?
[06:39:03] *** Quits: ktt3ja (ktt3ja@moz-85E2770C.hsd1.va.comcast.net) (Quit: Leaving)
[06:39:17] <Heather> Yurume do you know where std::io::result goes? :)
[06:39:19] <Yurume> there are considerably many issues with the moderate complexity
[06:39:20] <cluelessperson> oh god what have I inspired?
[06:39:48] <eddyb> cluelessperson: don't worry, we didn't exceed the regular level of craziness
[06:40:03] <fournm> I'll give it a look through, then
[06:40:11] <Yurume> Heather: what do you mean? `IoResult`?
[06:40:22] <eddyb> rust-the-game is pretty lame compared to what Rust and its community attempts at times :P
[06:40:46] *** Quits: daschl (Adium@moz-A3B8EA95.static.bezeqint.net) (Ping timeout)
[06:40:55] <Heather> Yurumechan: well there was std::io::result and seems like IoResult is different
[06:40:56] <Yurume> rust-the-game is played by the community. rust-the-language is developed by the community. :p
[06:41:36] <Yurume> Heather: ah, older condition-based approach. it went gone, you need to handle IoResult now.
[06:41:54] <Yurume> you at least need to use `if_ok!` macro
[06:42:03] *** Quits: bitemyapp (callen@95EE74F7.F6EF2525.EE6E63A5.IP) (Quit: leaving)
[06:42:35] <Heather> Yurume there was loop with match result(|| reader.read(buf)) { so I need match read now?
[06:42:54] <Yurume> yes
[06:43:15] <Yurume> in that case the code would have been simplified
[06:43:30] <Heather> ah true
[06:43:39] <Heather> yes and in good way
[06:43:48] <cmr> cluelessperson: does your group want to learn and work on Rust-the-language? :D
[06:43:49] <sanxiyn> fournm: I don't see anything very easy at the moment
[06:43:53] <sanxiyn> fournm: How about #11582?
[06:44:04] <sanxiyn> (Add debug logging to channels)
[06:44:13] <c74d> cluelessperson: <https://botbot.me/mozilla/rust-internals/msg/9887676/>
[06:45:14] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Input/output error)
[06:45:34] <cluelessperson> c74d, .... someone complained about the performance?
[06:45:45] <ercxx> Question about lifetimes: why do I have to dereference 'self' and put it behind a pointer again here : http://kib2.free.fr/pastebin/view_paste.php?id=190 ?
[06:46:20] <c74d> cluelessperson: I guess. But that was just the start of the conversation.
[06:46:49] <sanxiyn> ercxx: Get rid of <'a> after fn insert?
[06:47:41] <Yurume> sanxiyn: then it wouldn't work, the lifetime of self reference may be well shorter than the lifetime of the Node itself.
[06:47:55] <ercxx> yeah, it doesn't work.
[06:48:17] *** Quits: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca) (Quit: Leaving.)
[06:48:24] *** Quits: earlzlap (earlz@moz-483E1E31.neo.res.rr.com) (Ping timeout)
[06:48:45] <Yurume> ercxx: it is like a classical (hah!) doubly-linked list, where it is hard (if not impossible) to have a reference to the parent.
[06:49:30] <ercxx> This really beat me up. I have hard time understanding lifetimes and related errors.
[06:49:39] <Heather> Yurume how to ignore result?
[06:49:46] <Heather> let _= x ?
[06:49:56] <Yurume> Heather: for IoResult<()>, yes.
[06:50:11] <Heather> there should be macro for it
[06:50:23] <eddyb> Heather: why?
[06:50:41] <Heather> eddyb: write let to ignore result is not logicall
[06:50:57] <eddyb> you *don't want* to ignore the result in the first place
[06:51:11] <Heather> eddyb: also, many languages got better stuff to ignore result...
[06:51:26] <Heather> eddyb: that's true but still
[06:51:28] *** Joins: aravindavk (aravinda@moz-BD0CADEE.redhat.com)
[06:51:39] <Heather> eddyb: there are situations when you want to
[06:52:05] <eddyb> not as often as situations where you're going to abuse it :P
[06:52:59] <Heather> eddyb: well... I can't be agreed with that
[06:53:07] <Yurume> ercxx: I think the interlinked data structures are where Rust's static analyzer does not work well; the invariant used by those structures are too alien for the analyzer (or put in the other words: the analyzer isn't designed for those cases).
[06:53:35] *** Quits: tcsc (tcsc@moz-ADC0ED45.hsd1.ct.comcast.net) (Quit: bye!)
[06:53:38] <Yurume> ercxx: so you may occasionally need an unsafe block (or some heavyweight smart pointers, e.g. Rc/Weak).
[06:53:45] <eddyb> Heather: every unhandled error is a probable future bug :P
[06:53:57] <ercxx> Yurume: thanks
[06:54:00] <sanxiyn> Yurume: I think the question was that with reborrowing it works...?
[06:54:07] <Yurume> sanxiyn: what?
[06:54:14] <Yurume> does it *work* at the first place?
[06:54:17] <sanxiyn> Wasn't the question why it should be &'a *self?
[06:54:25] <Yurume> did it*
[06:54:56] <sanxiyn> ercxx: I thought you were saying that (1) it compiles (2) but not sure why reborrowing is needed
[06:54:59] <sanxiyn> Did I misunderstand
[06:55:31] <ercxx> sanxyn, the moment i add `self.right = Some(~new_node);` it blows up again.
[06:55:43] * Yurume phew
[06:55:54] <Yurume> I thought I've missed some important point. :p
[06:55:54] <ercxx> Can't send a reference to the child node.
[06:55:54] <sanxiyn> ercxx: But the code you pasted does compile?
[06:56:02] <ercxx> sanxiyn: correct
[06:56:10] <Yurume> hmm!
[06:56:10] <sanxiyn> Yurume: So it's a different issue
[06:56:15] <sanxiyn> I believe coercion is not applied somewhere
[06:56:20] *** Joins: dbaupp (Thunderbir@moz-25BBAF91.lns20.syd6.internode.on.net)
[06:56:33] <sanxiyn> Which is strange; it should be
[06:56:57] <Yurume> ah, you didn't put `new_node` to the self, so it compiles. okay.
[06:57:09] <Yurume> I should point out that your design ultimately won't work
[06:57:18] <Yurume> but that is another issue, as sanxiyn said.
[06:57:29] *** Joins: Ferreus (ferreus@moz-9F6BB095.dip0.t-ipconnect.de)
[06:57:41] <ercxx> Yurume: I didn't have great hopes for it. I just wanted a somewhat working tree.
[06:57:49] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[06:57:56] <Heather> eddyb: I don't like current method of error handling 
[06:58:14] <Yurume> ercxx: somewhat working tree made by your own? (since there is, for example, TreeMap in extra.)
[06:58:16] <Heather> eddyb: match x() { OK(_) => (), Err(err) => ... }
[06:58:31] <sanxiyn> ercxx: Can yoou post the full source somewhere so that I can reproduce (this particular issue, which, even if resolved, won't be interesting to you, sorry)?
[06:58:37] <Heather> eddyb: it's semantic mess
[06:58:40] <ercxx> Yurume: I dtotally forgot about the extra.
[06:59:11] <Yurume> yeah, having a full source code helps (but that wouldn't help you anyway :S)
[06:59:37] *** Joins: dmacvicar (dmacvicar@moz-663A7346.nue.novell.com)
[07:00:02] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[07:00:03] <cmr> Heather: you can say #[allow(unused_must_use)] to get rid of the warnings.
[07:00:22] <ercxx> sanxiyn: here you go: http://kib2.free.fr/pastebin/view_paste.php?id=191
[07:00:41] <ercxx> didn't get too far with that one
[07:00:43] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[07:00:45] <sanxiyn> ercxx: Thanks!
[07:00:53] <ercxx> no problem
[07:01:07] <Yurume> hmm?
[07:01:32] <Yurume> my rustc compiles the code with `&'a *self` replaced by `self` just fine
[07:01:40] <Yurume> what version of rustc are you using now?
[07:01:46] <sanxiyn> Yurume: Heh
[07:01:50] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[07:02:12] <Yurume> (I have the 20140121 nightly version in Ubuntu PPA)
[07:02:48] <ercxx> Yurume: rustc 0.10-pre (2bcd951 2014-02-01 11:16:24 -0800)
[07:02:59] <Yurume> I'm trying to update to 20140202
[07:03:01] <ercxx> from daily arch packages
[07:03:04] <Heather> cmr: yes but it's not solution
[07:03:14] <Heather> cmr: syntax must be changed
[07:03:31] *** Quits: eibwen (kvirc@moz-92E31A33.dip0.t-ipconnect.de) (Ping timeout)
[07:03:41] <ercxx> Yurume: i made a mistake, self.right is never set in that piece of code
[07:04:07] <sanxiyn> Yurume: Fails in 2014-02-03 (self-built)
[07:04:14] <sanxiyn> Curiouser and curiouser
[07:04:26] <sanxiyn> afk
[07:04:38] *** Joins: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de)
[07:04:43] <ercxx> Yurume: Try this: http://kib2.free.fr/pastebin/build_new_paste.php
[07:04:55] <ercxx> that has the missing line
[07:05:49] *** Joins: Houm (Houm@moz-25669AA8.fbx.proxad.net)
[07:05:49] *** Quits: p1start (rewi@moz-A082F561.adsl.xtra.co.nz) (Ping timeout)
[07:06:09] <Yurume> ercxx: that... is not a proper paste.
[07:06:17] <Yurume> try to paste the URL again :p
[07:06:47] <ercxx> Yurume: Middle click copy borked
[07:06:52] *** Quits: Kxepal (Miranda@moz-94E27C3F.pppoe.mtu-net.ru) (Quit: Kxepal)
[07:07:06] <Yurume> update-initramfs: Generating /boot/initrd.img-3.2.0-58-generic
[07:07:08] *** Joins: Kxepal (Miranda@moz-94E27C3F.pppoe.mtu-net.ru)
[07:07:15] <Yurume> ... I regret my decision to update all packages..
[07:07:59] <Yurume> t.rs:32:36: 32:40 error: cannot infer an appropriate lifetime for region in type/impl due to conflicting requirements
[07:08:03] <Yurume> got it!
[07:08:29] <geomyidae> mcpherrin: you around?
[07:08:38] <ercxx> Yurume: I think the paste was okay.
[07:09:03] <ercxx> Yurume: yeah, that's the error.
[07:09:30] <Yurume> very interesting. is this a side effect of rvalue lifetimes? :S
[07:09:36] <cmr> Yurume: yeah
[07:09:44] <cmr> it's probably the same issue as the rest of them...
[07:10:35] <csherratt> Yurume: would have had to fix it sometime, might as well be now :P
[07:11:04] <ercxx> Yurume: so, what was I doing wrong?
[07:11:11] <Yurume> ercxx: I think you are not wrong :S
[07:11:29] <Yurume> it seems a side effect of the recent lifetime-related changes
[07:11:33] <ercxx> Yurume: not used to that.
[07:11:38] *** Joins: p1start (rewi@moz-A082F561.adsl.xtra.co.nz)
[07:11:57] <ercxx> I'll dig into the one in extra and learn how it's done properly.
[07:11:59] <Yurume> ercxx: FWIW, reborrowing can be done without a lifetime (&'a *self -> &*self)
[07:12:15] <ercxx> Yurume: ok
[07:12:29] <Yurume> anyway, I'm not sure this is intentional, so if you mind that, consider making an issue for that :)
[07:12:32] *** Joins: trobertson (quassel@moz-A4AC319.sd.sd.cox.net)
[07:12:42] <Yurume> (I couldn't find a related issue)
[07:13:25] <ercxx> I'll take a look and see if I can articulate it properly.
[07:13:27] <geomyidae> Any way to collab edit Rust online yet ? :)
[07:13:33] * Yurume afk
[07:15:24] <cmr> geomyidae: https://floobits.com/
[07:15:28] <Heather> fail! writes to stderr, right?
[07:15:53] <cmr> Heather: it writes to a task-local logger, which will write to stderr.
[07:16:06] <Heather> that's good...
[07:16:07] <cmr> (you can redirect the output etc if you wish, per-task)
[07:16:12] <Heather> cmr: and returns 1 ?
[07:16:23] <cmr> Heather: it definitely returns non-0
[07:16:26] *** Quits: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de) (Quit: Leaving.)
[07:16:28] <geomyidae> cmr, whoa, most times I wouldn't even give something like that a second shot but that is... just, slick.
[07:16:29] <cmr> I don't think it returns 1
[07:16:44] <cmr> geomyidae: made by the author of the_silver_searcher :)
[07:16:50] <Heather> hm
[07:16:57] *** Joins: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de)
[07:17:18] *** Joins: victorporof (victorporo@53EBB099.7C27E871.79933D60.IP)
[07:17:20] <cmr> Heather: it returns 101 here
[07:18:00] <Heather> I just don't like this code :             writeln!(&mut stderr() as &mut Writer,                "Invalid options\n{}", f.to_err_msg());            os::set_exit_status(1);            return
[07:18:16] <cmr> Heather: you don't need `as &mut Writer` anymore
[07:18:19] <Heather> want to replace it with fail, not sure if that will be crime
[07:18:21] <cmr> that will happen automatically
[07:18:40] <Heather> but maybe I can just replace it with fail
[07:19:06] <cmr> if you just need any non-0 return code fail will work
[07:19:21] <Heather> I think fail should take exit code as optional argument
[07:19:44] <Heather> cmr: yes, it's trouble ) I'm not sure if non-0 is acceptable there
[07:19:45] <cmr> fail doesn't always cause program termination
[07:19:45] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[07:19:48] <cmr> it just fails the task
[07:19:49] *** Joins: bdd (bdd@53058B9B.C0E94BF1.D01D599A.IP)
[07:20:25] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[07:20:26] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[07:20:52] <Heather> I see
[07:21:08] *** Joins: Jemaclus (jemaclus@moz-5A4BC30.hsd1.ca.comcast.net)
[07:21:34] *** Quits: FreeFull (freefull@moz-1883929A.as13285.net) (Quit: )
[07:21:43] <Heather> but lol
[07:21:45] *** flaper87|afk is now known as flaper87
[07:22:07] <Heather> cmr: should I handle error in writing termination error message using writeln ? 
[07:22:13] *** Quits: StarLight (StarLight@moz-7BB7DD14.dynamic.avangarddsl.ru) (Connection reset by peer)
[07:22:21] <Heather> it's recursion !!!
[07:22:38] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Client exited)
[07:22:54] *** Quits: Jemaclus (jemaclus@moz-5A4BC30.hsd1.ca.comcast.net) (Ping timeout)
[07:23:07] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[07:23:38] <Heather> match writeln!(stderr(), ..... { ..... Err(err) => { match writeln!(stderr(), ..... { ..... Err(err) => { match .... // oh... what ?
[07:23:57] <geomyidae> Is it posible to constrain a generic by type? like from an enum?
[07:24:02] <geomyidae> does that question even make some sense?
[07:24:16] <cmr> geomyidae: only a tiny bit. example of what you want to express?
[07:24:25] <cmr> Heather: if writeln fails, just give up :)
[07:25:04] <Heather> cmr: you see! there is situation when your words are wrong )
[07:25:40] <geomyidae> Before I was discussing a packet encode api, and we were discussing EthernetPacket<Something<>> and I want to constrain Something, both on a trait (len() and serialize()) but also limit it to Ipv4<> and Ipv6<> structs, am I a ding dong and missing something obvious
[07:26:38] <Heather> btw I need &mut stderr() as &mut Writer there
[07:26:43] *** Joins: sigma (sigma@moz-B2E77065.range86-184.btcentralplus.com)
[07:26:45] <Heather>  expected `&mut std::io::Writer<no-bounds>` but found `std::io::stdio::StdWriter`
[07:26:49] <geomyidae> rusti: enum Test { X, Y }; pub struct EthernetPacket<T: Test> { }
[07:26:49] -rusti- <anon>:10:66: 10:67 error: Unit-like struct definition should be written as `struct EthernetPacket;`
[07:26:49] -rusti- <anon>:10         enum Test { X, Y }; pub struct EthernetPacket<T: Test> { }
[07:26:50] -rusti-                                                                            ^
[07:26:50] -rusti- application terminated with error code 101
[07:27:02] <geomyidae> rusti: enum Test { X, Y }; pub struct EthernetPacket<T: Test> { i: uint }
[07:27:05] -rusti- pastebinned 7 lines of output: http://ix.io/ajk
[07:27:22] *** Joins: StarLight (StarLight@moz-2B113AB3.dynamic.avangarddsl.ru)
[07:27:33] *** Joins: takuin (takuin@moz-21A5F23D.ks.ks.cox.net)
[07:27:54] *** Quits: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de) (Quit: Leaving.)
[07:28:45] <cmr> Heather: you should just need &mut stderr()
[07:29:11] <cmr> geomyidae: no, you can't have bounds in data declaration
[07:29:20] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[07:29:41] *** Joins: brendan (brendaneic@35E90EE3.B8B12C49.396B22AD.IP)
[07:29:57] <Heather> cmr: ah... maybe
[07:30:31] <Heather> I feel like Rust have to much work to do before 1.0 ...
[07:31:06] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[07:31:53] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[07:32:04] <pzol> Morning! what's the reason a HashMap::iter() returns its the values in a random fashion?
[07:32:13] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[07:32:29] <cmr> pzol: it's simple inherent in how hashmaps store their data
[07:32:33] <cmr> pzol: if you need order, use a TreeMap
[07:33:00] <pzol> cmr ok, is there a performance penalty for TreeMap?
[07:33:09] <cmr> pzol: I do not know.
[07:33:14] <pzol> cmr Thanks :)
[07:33:15] <csherratt> pzol: how big is your tree?
[07:33:23] <pzol> chandler 2 elements :D
[07:33:30] *** Joins: earlzlap (earlz@moz-483E1E31.neo.res.rr.com)
[07:33:32] <cmr> pft
[07:33:36] <cmr> just use a vector :P
[07:33:51] <csherratt> well for less then 100 elements a treemap will always be faster
[07:33:57] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[07:34:14] <pzol> cmr I am writing a blog post on hashmaps ;)
[07:34:16] <pzol> https://gist.github.com/8799497
[07:34:17] <cmr> ah ok
[07:34:47] <cmr> map.values().map(|v| v.clone()).to_owned_vec()
[07:34:49] <cmr> \o/
[07:35:25] <pzol> cmr thanks ;) I will add that as an alternative, the point here is to show how to use iter ;)
[07:35:35] <cmr> sure
[07:36:02] <csherratt> Has anyone used std::comm::Select?
[07:36:09] *** Quits: sanxiyn (tinuviel@B4104EBB.3CC170B1.1E14B209.IP) (Ping timeout)
[07:36:46] <csherratt> I'm running into issues with it asserting during the destructor.
[07:37:27] <sigma> pzol: remember that the random order they return isn't necessarily consistent either. If the dict resizes the order of the elements may well change
[07:37:29] <csherratt> I think the reason is to do with destructor order, Handles outliving the Select. but that does not make sense to me.
[07:37:31] <sigma> hashmap*
[07:37:40] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[07:38:01] <pzol> sigma I noticed that, thanks ;) even with two elements in a hasmap, the order flips every now and then
[07:38:19] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[07:38:25] <pzol> btw is there something ready in std to compare two vectors regardless of their order?
[07:38:43] <sigma> as in set operations?
[07:38:56] <sigma> like disjoint and intersection and such?
[07:39:29] *** Joins: skade (skade@moz-B73EE4D5.pools.arcor-ip.net)
[07:39:42] <pzol> sigma aaa haven't thought about that, but probably yes, so ~[1, 2] should eq ~[2, 1]
[07:40:24] <cmr> you probably want a HashSet or TreeSet. vectors don't support those operations natively..
[07:40:54] *** Quits: aravindavk (aravinda@moz-BD0CADEE.redhat.com) (Ping timeout)
[07:41:03] <sigma> yeh, the complexity for performing that operation on array-like things is terrible
[07:41:46] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[07:42:36] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[07:43:17] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Quit: Leaving.)
[07:44:11] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[07:45:18] *** Quits: brendan (brendaneic@35E90EE3.B8B12C49.396B22AD.IP) (Quit: brendan)
[07:45:40] *** Quits: bytbox (s@moz-54E13927.washdc.fios.verizon.net) (Ping timeout)
[07:46:37] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[07:47:23] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[07:47:24] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Client exited)
[07:47:30] *** Quits: montezuma (Mibbit@moz-AE55F4BE.cat.csiro.au) (Quit: http://www.mibbit.com ajax IRC Client)
[07:47:39] <jcmoyer> Can someone explain why line 24 is not equivalent to lines 25-28 here: https://gist.github.com/jcmoyer/d4417d80ad2e6b4d88cf
[07:47:45] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[07:48:17] *** Quits: earlzlap (earlz@moz-483E1E31.neo.res.rr.com) (Ping timeout)
[07:48:44] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Client exited)
[07:49:05] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[07:50:19] *** Joins: bytbox (s@moz-54E13927.washdc.fios.verizon.net)
[07:51:36] *** Quits: Heather (Heather@19663F6.F53BAACC.9C17E900.IP) (Quit: Leaving.)
[07:54:02] *** Quits: fournm (Aria@moz-ABB60BA0.austin.res.rr.com) (Quit: Leaving)
[07:56:44] *** Joins: aravindavk (aravinda@moz-BD0CADEE.redhat.com)
[07:59:23] *** Quits: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) (Connection reset by peer)
[08:00:20] *** Joins: andrew-d_w (andrew-d_w@4CCE6E0C.339B431B.1E537B93.IP)
[08:00:26] *** Quits: andrew-d_w (andrew-d_w@4CCE6E0C.339B431B.1E537B93.IP) (Input/output error)
[08:00:48] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[08:01:16] *** Quits: jeaye (jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[08:01:45] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Quit: csherratt)
[08:02:06] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[08:02:17] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Quit: csherratt)
[08:02:24] *** Joins: Jemaclus (jemaclus@moz-5A4BC30.hsd1.ca.comcast.net)
[08:02:36] <dmacvicar> why is std::hashmap::HashMap inside a hashmap namespace?
[08:02:59] <cmr> dmacvicar: shenanigans
[08:03:18] <eddyb> std::hash::HashMap sounds better IMO
[08:03:54] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Client exited)
[08:04:04] *** Quits: Jemaclus (jemaclus@moz-5A4BC30.hsd1.ca.comcast.net) (Ping timeout)
[08:04:14] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[08:04:23] <dmacvicar> ah ok, std::container::Map makes sense
[08:04:42] <dmacvicar> HashMap is an impl... still the namespace name is weird
[08:06:21] *** nrc is now known as nrc|afk
[08:07:26] *** Quits: skade (skade@moz-B73EE4D5.pools.arcor-ip.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[08:10:11] *** Joins: sanxiyn (tinuviel@B4104EBB.3CC170B1.1E14B209.IP)
[08:10:18] *** Joins: Zr40 (zr40@EE4BB9F5.926C319A.BE2F4011.IP)
[08:14:01] *** Quits: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com) (Input/output error)
[08:14:54] *** Joins: marianoguerra (marianogue@moz-6647E3BD.dip0.t-ipconnect.de)
[08:15:07] *** Joins: kitarousa (sokomo@8293D4FC.93FF164A.408809BB.IP)
[08:15:33] *** kitarousa is now known as sokomo
[08:16:02] *** Quits: sanxiyn (tinuviel@B4104EBB.3CC170B1.1E14B209.IP) (Quit: Leaving)
[08:20:20] *** Joins: victorporof_ (victorporo@53EBB099.7C27E871.79933D60.IP)
[08:21:35] *** Quits: victorporof (victorporo@53EBB099.7C27E871.79933D60.IP) (Ping timeout)
[08:22:48] *** Quits: dbaupp (Thunderbir@moz-25BBAF91.lns20.syd6.internode.on.net) (Ping timeout)
[08:26:11] *** Joins: dbaupp (Thunderbir@moz-25BBAF91.lns20.syd6.internode.on.net)
[08:27:45] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:27:55] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:30:01] *** Quits: bytbox (s@moz-54E13927.washdc.fios.verizon.net) (Input/output error)
[08:32:33] *** Joins: bytbox (s@moz-54E13927.washdc.fios.verizon.net)
[08:35:59] *** Quits: onelson (owen@18CF7301.95770028.5B6BFE7D.IP) (Ping timeout)
[08:41:07] <bjz> dmacvicar: it's a know issue :(
[08:41:31] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Quit: Busying myself...)
[08:41:40] <bjz> dmacvicar: we have such wonders as std::from_str::FromStr::from_str
[08:41:48] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[08:41:56] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[08:42:11] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[08:42:57] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:43:05] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:44:48] *** Quits: sokomo (sokomo@8293D4FC.93FF164A.408809BB.IP) (Quit: Read error: Connection reset by peer)
[08:45:22] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[08:45:39] *** Joins: sokomo (sokomo@8293D4FC.93FF164A.408809BB.IP)
[08:46:16] *** Joins: fabiand (fabiand@moz-51FA4D43.adsl.alicedsl.de)
[08:51:12] <pzol> I find it would be better: std::container::{HashMap, TrieMap}
[08:53:17] *** Joins: gimpf (gimpf@moz-2EECDFD6.adsl.highway.telekom.at)
[08:56:02] *** Joins: arturo (Thunderbir@moz-E83B14F0.superkabel.de)
[08:59:33] *** Joins: vgeddes (vincent.ge@moz-E5B12DD4.dsl.mweb.co.za)
[09:01:31] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Client exited)
[09:01:51] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[09:02:06] *** Quits: james4k (james@moz-9BB5AE72.consolidated.net) (Ping timeout)
[09:03:00] *** Joins: Jemaclus (jemaclus@moz-5A4BC30.hsd1.ca.comcast.net)
[09:03:20] *** Quits: bdd (bdd@53058B9B.C0E94BF1.D01D599A.IP) (Quit: leaving)
[09:03:23] *** Quits: takuin (takuin@moz-21A5F23D.ks.ks.cox.net) (Ping timeout)
[09:04:41] *** Quits: Jemaclus (jemaclus@moz-5A4BC30.hsd1.ca.comcast.net) (Ping timeout)
[09:05:12] *** Joins: jackneill (jackneill@moz-2A74CDA9.pool.digikabel.hu)
[09:06:17] *** pmoore|away is now known as pmoore
[09:08:11] *** Quits: kvanb (kvanb@moz-4300E235.lnse1.win.bigpond.net.au) (Ping timeout)
[09:09:00] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[09:09:28] <sammykim> When I get the data which is Option wrapped by Ref, I was trying to get data like "data.get().and_then(|d|{...});" But I got error cannot move out of dereference of & pointer. What do I need to check? I just want to change usage of match to and_then.
[09:11:07] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[09:14:58] *** Quits: p1start (rewi@moz-A082F561.adsl.xtra.co.nz) (Ping timeout)
[09:14:59] *** Joins: p1start (rewi@moz-A082F561.adsl.xtra.co.nz)
[09:15:58] *** Joins: oberstet (quassel@moz-6F36E3C9.dynamic.mnet-online.de)
[09:16:23] *** Quits: oal (oal@26029749.1D466084.2CFD4520.IP) (Quit: Goodbye, cruel world.)
[09:16:49] *** Joins: kvanb (kvanb@2993D02C.98758811.1611EE05.IP)
[09:17:29] *** Quits: p1start (rewi@moz-A082F561.adsl.xtra.co.nz) (Ping timeout)
[09:20:03] *** Quits: rdn (rdn@moz-3FCD2726.tk) (Ping timeout)
[09:20:10] <pzol> use extra::json::{Json, Object, Null}; assert_eq!(Some(&Null), Some(&Null));
[09:20:17] <pzol> rusti: use extra::json::{Json, Object, Null}; assert_eq!(Some(&Null), Some(&Null));
[09:20:21] -rusti- pastebinned 13 lines of output: http://ix.io/ajp
[09:20:22] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[09:20:28] *** Joins: nooblit (Mibbit@moz-CBA73F0A.dhcp.ftwo.tx.charter.com)
[09:20:40] <kimundi> sammykim: Could you explain the problem again?
[09:21:05] <pzol> rusti: extern mod extra;  use extra::json::{Null}; assert_eq!(Some(&Null), Some(&Null));
[09:21:05] -rusti- <anon>:10:9: 10:26 error: "extern mod" declarations are not allowed here
[09:21:05] -rusti- <anon>:10         extern mod extra;  use extra::json::{Null}; assert_eq!(Some(&Null), Some(&Null));
[09:21:05] -rusti-                   ^~~~~~~~~~~~~~~~~
[09:21:06] -rusti- error: aborting due to previous error
[09:21:06] -rusti- application terminated with error code 101
[09:21:14] <pzol> rusti: use extra::json::{Null}; assert_eq!(Some(&Null), Some(&Null));
[09:21:17] -rusti- pastebinned 7 lines of output: http://ix.io/a6T
[09:21:45] <pzol> anyway... I get here an error: borrowed value does not live long enough 
[09:23:20] <pzol> and obviously this works: let null = Null; assert_eq!(Some(&null), Some(&null));
[09:23:39] *** Joins: rdn (rdn@moz-3FCD2726.tk)
[09:24:16] <pzol> which is kind of logical, but inconvenient
[09:24:39] <sammykim> kimundi: There is a data which is like this Ref<Option<Data>>. When I get the data with match, It's OK but As long as I change it to use and_then without match, It says me "cannot move out of dereference of & pointer".
[09:25:58] <sammykim> It's part of servo codes. https://github.com/parkjaeman/servo/blob/pseudo-element-build-flow-and-box/src/components/main/layout/wrapper.rs#L105 Here is what I mentioned.
[09:26:28] <kimundi> sammykim: and_then takes the Option by value, try "data.get().as_ref().and_then(|d|{...});"
[09:27:30] *** Joins: Armavica (virgile@moz-AD428ED7.ens.fr)
[09:27:38] <sammykim> Wow!! Great. How does it work ? 
[09:27:38] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[09:27:39] <sam113101> that code looks like mountains
[09:28:08] *** Quits: nooblit (Mibbit@moz-CBA73F0A.dhcp.ftwo.tx.charter.com) (Quit: http://www.mibbit.com ajax IRC Client)
[09:28:23] <sam113101> almost as bad as python stairs
[09:28:25] <sammykim> sam113101: That's why I want to clean up
[09:28:51] *** Joins: gotts (gotts@583D7927.9799C9E7.3F2079FA.IP)
[09:28:58] <FliPPeh> That's what haskell solves with Monads!
[09:30:11] <kimundi> sam113101: Well, Ref::get() gives you a &Option<Data>. calling and_then() which takes a Option<T> on it will auto deref the reference, and then complain because that would mean a move. as_ref() takes a &Option<T> and turns it into a Option<&T>, which is then taken by value by and_then and provides you with a &Data inside the closure
[09:30:21] <kimundi> err, sammykim 
[09:30:38] <pzol> is there a ready macro hash!({ foo: 1, bar: [1,2] }) ????
[09:30:58] <kimundi> pzol: No
[09:30:58] <sammykim> Oh I see :) thanks
[09:31:06] <sammykim> Oh I see :) thanks
[09:33:26] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[09:35:33] <pzol> kimundi damn ;) 
[09:36:40] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[09:38:21] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[09:42:24] <sammykim> kimundi: umm. May I have one more question? If I want to return data inside and_then function closure, how can I do that? like and_then(|data|{ return this_data});
[09:43:27] <sammykim> match is OK with returning data Becuase they don't have any closure.
[09:44:01] *** Joins: rca (rcatolino@moz-314B78.adsl.proxad.net)
[09:45:07] *** Joins: nooblit (Mibbit@moz-CBA73F0A.dhcp.ftwo.tx.charter.com)
[09:45:39] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[09:46:09] *** Joins: fyolnish_ (fyolnish@moz-BE2BAE5B.miinet.jp)
[09:46:45] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Ping timeout)
[09:47:36] *** Quits: nrc|afk (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[09:47:38] <nooblit> :P
[09:47:57] *** Quits: fyolnish_ (fyolnish@moz-BE2BAE5B.miinet.jp) (Ping timeout)
[09:48:15] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[09:48:31] <nooblit> I can't find ONE tutorial online for "first time" programmers that teaches C++, they all teach C with classes, I'm disgusted. I don't want to practice  char* and *(int*)(someVoidPointer) C idioms.  I want to learn std::string, std::unique_ptr, functor concept,"Smart Pointers and RAII" and STL library. vector, maps. 
[09:48:34] <nooblit>  Most problems should use idomatic C++ to solve not C with classes.  I don't even know how to program but I know enough to know they are not teaching me C++.  Is there not ONE freaking site that teaches new people C++? Are all programmers that teach stupid? I found ONE book so far "c++ primer 5th edition" but it's not very good for a first time programmer. 
[09:49:10] <sigma> get the c++ primer book
[09:50:10] <Yurume> seriously, http://www.amazon.com/dp/0321714113/
[09:50:48] <kimundi> sammykim: could you post the code you have so far somewhere? like, the .and_Then line and the function from which you want to return?
[09:50:56] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[09:51:28] <sigma> nooblit: I literally have it sitting on my desk beside me, it's very good
[09:51:53] <nooblit> For someone who has 0 experience? 
[09:51:59] <sigma> yup, it's find
[09:52:02] <sigma> fine*
[09:52:13] <sigma> it actually spends a _lot_ of time in general programming stuff
[09:52:16] <nooblit> It doesn't make me practice the C stuff like char ?
[09:52:24] *** Joins: daschl (Adium@9E1B3473.8A86D3C3.EBB4EDEF.IP)
[09:52:24] <sigma> nope, updated for c++11
[09:52:39] <nooblit> Maybe there is hope
[09:53:04] <nooblit> Why are all the free sites teaching c with classes?
[09:53:14] <nooblit> even the schools
[09:53:35] <sigma> because that's what a lot of C++ code in the wild looks like
[09:53:51] <sigma> it's a bit of a vicious cycle
[09:54:12] <nooblit> I herd the exact opposite, that c with classes is NOT c++
[09:54:53] *** Quits: daschl (Adium@9E1B3473.8A86D3C3.EBB4EDEF.IP) (Quit: Leaving.)
[09:54:53] <Yurume> nooblit: the modern C++ best practice is not C with classes. the truth is, however, that you can at least live with writing C with classes in C++.
[09:54:55] <nooblit> That it's considered bad practice to write C++ without smart pointers and STL ect RAII?
[09:55:03] <sigma> Everything that is syntactically legal that the compiler will accept will eventually wind up in your codebase - John Carmack
[09:55:09] <Yurume> lol
[09:55:32] <sigma> C++ has a lot of syntactically legal things.
[09:55:53] <Yurume> nooblit: the fully standard C/C++ code can be very hard to understand or maintain as well.
[09:55:58] <sigma> which are and which aren't best practices varies wildly dependint on the project and problem space
[09:56:05] <nooblit> If I wanted to learn C, I'd study that, I want to learn C++ though
[09:56:16] <nooblit> Modern way of doing it
[09:56:22] <sigma> then get that book
[09:56:28] <Yurume> nooblit: then get and read the C++ Primer book. it is (afaik) for the modern C++.
[09:56:39] <nooblit> I read lots of posts like this guy http://miburl.com/TfjK3S 
[09:57:44] <sigma> read the book and read some modern C++ source from good programmers
[09:57:47] <nooblit> It seems to be a common thing I read in lots of forms and I just don't want to spend 6 months forming bad habbits is all, I'll try the primer book
[09:58:24] <Yurume> sigma: unfortunately Boost wouldn't work ;)
[09:58:33] <sigma> oh god no
[09:58:50] <Yurume> ah wait have I triggered a bad word filter? :o
[09:58:53] <Yurume> oh sorry...
[09:59:28] <sigma> Some of boost is very... educational...
[09:59:33] <Yurume> nooblit: remember, you should write the code, not only read the book.
[10:00:14] <Yurume> I really want you to stop reading those things. they are good, but of the least value for you.
[10:00:25] <sigma> yeh, making mistakes and developing bad habits is unavoidable, you don't know enough to know what you're doing is bad until after you've done them
[10:00:58] <nooblit> I herd that the book dose not have the answers to the practice questions, so If I get it, is it ok if I PastBin it here for checking?
[10:01:15] *** Quits: kvanb (kvanb@2993D02C.98758811.1611EE05.IP) (Ping timeout)
[10:01:18] <sigma> I'd use a c++ channel somewhere
[10:01:26] <nooblit> okay
[10:01:58] <Zr40> why do I have to specify mut in `match walk_dir(x) { Ok(mut files) => for _ in files {} }` but not in `for _ in walk_dir(x).unwrap() {}`?
[10:02:12] *** Joins: andre (andre@CA528A4A.45A4338E.8EE27E6.IP)
[10:02:37] *** Joins: kvanb (kvanb@moz-E7694EAC.vwl9.win.bigpond.net.au)
[10:03:13] <Yurume> Zr40: since walk_dir returns an iterator (`std::io::fs::Directories`) directly. when used as a temporary value, its mutability is inferred. when stored in a variable, the mutability should be stated.
[10:05:09] *** Quits: rofrol (rofrol@moz-8C55345C.static.ptr.magnet.ie) (Ping timeout)
[10:05:09] *** Quits: zv (zv@moz-955F83E9.hsd1.ca.comcast.net) (Ping timeout)
[10:05:09] *** Quits: chandler (foo@moz-F990611.mastenbrook.net) (Ping timeout)
[10:05:09] *** Quits: arturo (Thunderbir@moz-E83B14F0.superkabel.de) (Ping timeout)
[10:05:09] *** Quits: Ke (jkarlson@moz-785A3407.org.aalto.fi) (Ping timeout)
[10:05:09] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Ping timeout)
[10:05:09] *** Quits: eevee (eevee@moz-8DEBFFC9.lv.lv.cox.net) (Ping timeout)
[10:05:09] *** Quits: lpy (lpy@51E8C831.DDD9F058.E99F7FDB.IP) (Ping timeout)
[10:05:09] *** Quits: dbussink (dbussink@moz-E0A5568C.bussink.me) (Ping timeout)
[10:05:09] *** Quits: wilsonk-xserve (kvirc@4DFD0DC.D4D0D202.F97ED6F2.IP) (Ping timeout)
[10:05:09] *** Quits: jj2baile (jon@moz-345B5EBA.csclub.uwaterloo.ca) (Ping timeout)
[10:05:09] *** Quits: mhoye (mhoye@moz-C14EAE67.vs.heavycomputing.ca) (Ping timeout)
[10:05:09] *** Quits: zil (sid23500@moz-31ABA2C0.irccloud.com) (Ping timeout)
[10:05:09] *** Quits: mmalecki (maciej@DE8E8A22.9EBA3CD1.D6573861.IP) (Ping timeout)
[10:05:09] *** Quits: arpd (ben@moz-F01B790B.chunkhost.com) (Ping timeout)
[10:05:09] *** Quits: meTaAU (admin@moz-2576F2BD.lns20.per1.internode.on.net) (Ping timeout)
[10:05:09] *** Quits: ekiara (emk@moz-9B1940E9.tech.co.ke) (Ping timeout)
[10:05:09] *** Quits: oz (oz@moz-20EC2160.net) (Ping timeout)
[10:05:09] *** Quits: zxcdw (r-a@5F0EDB29.B543C4DE.3933CC16.IP) (Ping timeout)
[10:05:09] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Ping timeout)
[10:05:09] *** Quits: Caseus (bacon@moz-9F046088.members.linode.com) (Ping timeout)
[10:05:09] *** Quits: Luqman (laden@moz-AB7945E9.csclub.uwaterloo.ca) (Ping timeout)
[10:05:09] *** Quits: GregorR (Gregor@moz-D9651910.so) (Ping timeout)
[10:05:09] *** Quits: doy (doy@moz-8F23663C.net) (Ping timeout)
[10:05:09] *** Quits: btm_work (btm@moz-2160AA7C.sakura.ne.jp) (Ping timeout)
[10:05:09] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[10:05:09] *** Quits: grahame (grahame@moz-F6161E0E.members.linode.com) (Ping timeout)
[10:05:09] *** Quits: pmoore (pmoore@moz-DB4A9C19.scl3.mozilla.com) (Ping timeout)
[10:05:09] *** Quits: rhodesd (none@3646D136.4C5731DA.F395EA5B.IP) (Ping timeout)
[10:05:09] *** Quits: AlexMax (alexmax@moz-3D3F5603.funcrusher.net) (Ping timeout)
[10:05:09] *** Quits: kini (kini@moz-92AA953A.members.linode.com) (Ping timeout)
[10:05:09] *** Quits: SingingBoyo (SingingBoy@DA28FB90.A5D0D593.4F048BDC.IP) (Ping timeout)
[10:05:09] *** Quits: robn (robn@moz-76B0302C.static.internode.on.net) (Ping timeout)
[10:05:09] *** Quits: ion (ion@heh.fi) (Ping timeout)
[10:05:09] *** Quits: benh (ben@moz-4A0366D2.org) (Ping timeout)
[10:05:09] *** Quits: friggle (friggle@moz-A607EAFA.members.linode.com) (Ping timeout)
[10:05:09] *** Quits: nealla (nealla@moz-8609DA39.members.linode.com) (Ping timeout)
[10:05:09] *** Quits: quasisphere (btw@DC685DC2.94302614.1D0D91FF.IP) (Ping timeout)
[10:05:09] *** Quits: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP) (Ping timeout)
[10:05:09] *** Quits: benbangert (bbangert@moz-B1FEE9C0.org) (Ping timeout)
[10:05:09] *** Quits: zheng_li (zheng_li@moz-D6711E9E.xenplanet.org) (Ping timeout)
[10:05:09] *** Quits: xales (xales@moz-7DEA692E.forevernothing.com) (Ping timeout)
[10:05:09] *** Quits: h3r3tic (heretic@moz-8BC3B3DB.se) (Ping timeout)
[10:05:09] *** Quits: dmacvicar (dmacvicar@moz-663A7346.nue.novell.com) (Ping timeout)
[10:05:09] *** Quits: epdtry (stuart@moz-C31FC981.hsd1.wa.comcast.net) (Ping timeout)
[10:05:09] *** Quits: ski (ski@moz-E5796727.student.chalmers.se) (Ping timeout)
[10:05:09] *** Quits: cyndis (cyndis@moz-C4357EA7.kapsi.fi) (Ping timeout)
[10:05:09] *** Quits: dg (dg@moz-AF6F3E94.com) (Ping timeout)
[10:05:09] *** Quits: stvc (quassel@DDF9BE86.571456BD.9510F13D.IP) (Ping timeout)
[10:05:09] *** Quits: jyyou (jyyou@moz-47B052FA.cs.nctu.edu.tw) (Ping timeout)
[10:05:09] *** Quits: Kxepal (Miranda@moz-94E27C3F.pppoe.mtu-net.ru) (Ping timeout)
[10:05:09] *** Quits: photex (photex@399640B9.24E301D6.9510F13D.IP) (Ping timeout)
[10:05:09] *** Quits: hansjorg (hansjorg@moz-41C5CE61.redpill-linpro.com) (Ping timeout)
[10:05:09] *** Quits: gavin (gavin@moz-DB4A9C19.scl3.mozilla.com) (Ping timeout)
[10:05:09] *** Quits: Deewiant (deewiant@moz-C015B7F8.iki.fi) (Ping timeout)
[10:05:09] *** Quits: kkris (kkris@moz-CB70009.yourvserver.net) (Ping timeout)
[10:05:09] *** Quits: veddan (viktor@moz-C79BC80B.csbnet.se) (Ping timeout)
[10:05:09] *** Quits: Yurume (Yurume@A826BD81.8A0DEF81.38747683.IP) (Ping timeout)
[10:05:09] *** Quits: nfroidure (nfroidure@moz-844D3AA9.w90-18.abo.wanadoo.fr) (Ping timeout)
[10:05:09] *** Quits: nmatsakis (nmatsakis@moz-DB4A9C19.scl3.mozilla.com) (Ping timeout)
[10:05:09] *** Quits: madmoose (Hat@moz-E1973371.nerp.net) (Ping timeout)
[10:05:09] *** Quits: morganb (morgan_b_@moz-5EAC75A2.hfc.comcastbusiness.net) (Ping timeout)
[10:05:09] *** Quits: angdev (uid7041@moz-E77DEB21.irccloud.com) (Ping timeout)
[10:05:09] *** Quits: Zor (alexrp@moz-B01F40E3.rev.stofanet.dk) (Ping timeout)
[10:05:09] *** Quits: satalha (satalha@moz-21D6B3DE.csclub.uwaterloo.ca) (Ping timeout)
[10:05:09] *** Quits: jld (jld@moz-B94C75AD.xlerb.net) (Ping timeout)
[10:05:09] *** Quits: Gracenotes (person@EBE65A41.2EC0B472.9510F13D.IP) (Ping timeout)
[10:05:09] *** Quits: mcpherrin (mcpherrin@BB4DB59D.2876C283.70845BE5.IP) (Ping timeout)
[10:05:09] *** Quits: epsylon (epsylon@moz-35BFFF47.thele.me) (Ping timeout)
[10:05:09] *** Quits: skelly (hl@moz-55F978C0.org) (Ping timeout)
[10:05:09] *** Quits: kphelps (kphelps@858F33C0.15D9BE54.9510F13D.IP) (Ping timeout)
[10:05:09] *** Quits: noct (quassel@moz-4F2CA1D7.noctal.com) (Ping timeout)
[10:05:09] *** Quits: ab (alex@BC9D99CC.37C1012D.FE617B51.IP) (Ping timeout)
[10:05:09] *** Quits: Cork (Cork@moz-352B7E7B.a370.priv.bahnhof.se) (Ping timeout)
[10:05:09] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Ping timeout)
[10:05:09] *** Quits: joone (joone@E10A1781.2160464A.A34EC3BB.IP) (Ping timeout)
[10:05:09] *** Quits: cgaebel (clark@ADA4DDE2.290DF317.EE6E63A5.IP) (Ping timeout)
[10:05:09] *** Quits: xitology (xi@85437D54.5AFA3E4.CEDFC552.IP) (Ping timeout)
[10:05:09] *** Quits: Ralith (ralith@moz-67D4EB93.customer.broadstripe.net) (Ping timeout)
[10:05:09] *** Quits: yusukesuzuki (yusukesuzu@moz-43160292.net218219047.t-com.ne.jp) (Ping timeout)
[10:05:09] *** Quits: aravindavk (aravinda@moz-BD0CADEE.redhat.com) (Ping timeout)
[10:05:09] *** Quits: nonehaxor (nonehaxor@BA9CBAE.4C3B0355.EE6E63A5.IP) (Ping timeout)
[10:05:09] *** Quits: nightpool (nightpool@moz-7CAAC068.wi.res.rr.com) (Ping timeout)
[10:05:09] *** Quits: limeburst (me@247D1419.D73964AC.27A8748.IP) (Ping timeout)
[10:05:09] *** Quits: silotis (quassel@moz-4B8C4631.oc.oc.cox.net) (Ping timeout)
[10:05:09] *** Quits: shachaf (shachaf@moz-F37E0395.members.linode.com) (Ping timeout)
[10:05:09] *** Quits: phil (phil@684D2576.37BA1B1C.20F09BA6.IP) (Ping timeout)
[10:05:09] *** Quits: Eridius (kevin@moz-533B0DB4.us) (Ping timeout)
[10:05:09] *** Quits: sam113101 (sam113101@moz-83612DFD.us-west-2.compute.amazonaws.com) (Ping timeout)
[10:05:09] *** Quits: StarLight (StarLight@moz-2B113AB3.dynamic.avangarddsl.ru) (Ping timeout)
[10:05:09] *** Quits: diegoyam (quassel@FF9B1514.A4EC3D18.3A1EC144.IP) (Ping timeout)
[10:05:09] *** Quits: suzak (suzak@moz-FEBD2936.sakura.ne.jp) (Ping timeout)
[10:05:09] *** Quits: pepijndevos (pepijndevo@9EACEF43.E50A3180.BCE47D84.IP) (Ping timeout)
[10:05:09] *** Quits: assaf758 (assaf@moz-7FEEB595.adsl.012.net.il) (Ping timeout)
[10:05:09] *** Quits: JustAPerson (JustAPerso@EAC6AADA.C1481309.D9401097.IP) (Ping timeout)
[10:05:09] *** Quits: LQDH (uid17894@moz-31ABA2C0.irccloud.com) (Ping timeout)
[10:05:09] *** Quits: pkondzior (uid768@moz-A42E5B7B.irccloud.com) (Ping timeout)
[10:05:09] *** Quits: ivan (ivan@moz-531C3EC9.members.linode.com) (Ping timeout)
[10:05:09] *** Quits: huhlig (sid17687@moz-A42E5B7B.irccloud.com) (Ping timeout)
[10:05:09] *** Quits: copumpkin (copumpkin@moz-FC353116.dyn.optonline.net) (Ping timeout)
[10:05:09] *** Quits: cds (uid23856@moz-E77DEB21.irccloud.com) (Ping timeout)
[10:05:09] *** Quits: HansiHE (HansiHE@moz-7DF634EA.com) (Ping timeout)
[10:05:09] *** Quits: geomyidae_ (uid214@moz-E77DEB21.irccloud.com) (Ping timeout)
[10:05:09] *** Quits: ienh (user@moz-F3A1CBB9.lsanca.dsl-w.verizon.net) (Ping timeout)
[10:05:09] *** Quits: jesse99 (jesse99@moz-8B1E0C5D.hsd1.wa.comcast.net) (Ping timeout)
[10:05:09] *** Quits: sawrubh|bot (~sawrubhbo@moz-E0F149F7.members.linode.com) (Ping timeout)
[10:05:09] *** Quits: ecl3ctic (Mibbit@578C64B6.F0F44EFA.76AE55C1.IP) (Ping timeout)
[10:05:09] *** Quits: jasom (aidenn@moz-5F6FC7B3.sb.sd.cox.net) (Ping timeout)
[10:05:09] *** Quits: XgF (quassel@moz-86690AAD.london1.uk.e43.eu) (Ping timeout)
[10:05:09] *** Quits: etrepum (sid763@moz-5F4AA75A.irccloud.com) (Ping timeout)
[10:05:09] *** Quits: machty (sid13535@moz-31ABA2C0.irccloud.com) (Ping timeout)
[10:05:09] *** Quits: erik (erik@moz-E73505F3.us-west-2.compute.amazonaws.com) (Ping timeout)
[10:05:09] *** Quits: wilfred (sid159@moz-5F4AA75A.irccloud.com) (Ping timeout)
[10:05:09] *** Quits: ldlework (ldlework@6AEB83D1.B92A0FC.176AC772.IP) (Ping timeout)
[10:05:09] *** Quits: crail (uid24674@moz-E77DEB21.irccloud.com) (Ping timeout)
[10:05:09] *** Quits: sawrubh (uid6719@moz-5F4AA75A.irccloud.com) (Ping timeout)
[10:05:09] *** Quits: mhenretty (sid11899@moz-5F4AA75A.irccloud.com) (Ping timeout)
[10:05:09] *** Quits: andreypopp (uid22726@moz-5F4AA75A.irccloud.com) (Ping timeout)
[10:05:09] *** Quits: gotts (gotts@583D7927.9799C9E7.3F2079FA.IP) (Ping timeout)
[10:05:09] *** Quits: santiago (santiago@moz-8ADE82B4.socal.res.rr.com) (Ping timeout)
[10:05:09] *** Quits: wycats (sid79@moz-5F4AA75A.irccloud.com) (Ping timeout)
[10:05:09] *** Quits: GameGamer43 (sid5533@moz-E77DEB21.irccloud.com) (Ping timeout)
[10:05:09] *** Quits: jzelinskie (sid17772@moz-A42E5B7B.irccloud.com) (Ping timeout)
[10:05:09] *** Quits: locks (sid130@moz-5F4AA75A.irccloud.com) (Ping timeout)
[10:05:09] *** Quits: michaelgreene (michael@DA820AA2.17CD9887.F12515B4.IP) (Ping timeout)
[10:05:09] *** Quits: mitsuhiko (mitsuhiko-@moz-BC29B73E.srv.pocoo.org) (Ping timeout)
[10:05:09] *** Quits: Seb (Seb@moz-97344273.actrix.co.nz) (Ping timeout)
[10:05:09] *** Quits: dopin (dopin@9805BFB5.13C3B28A.5DB9309E.IP) (Ping timeout)
[10:05:09] *** Quits: sankha93 (uid12218@moz-31ABA2C0.irccloud.com) (Ping timeout)
[10:05:09] *** Quits: quux00 (uid24415@moz-E77DEB21.irccloud.com) (Ping timeout)
[10:05:09] *** Quits: Boreeas (Boreeas@moz-F35C832D.boreeas.net) (Ping timeout)
[10:05:09] *** Quits: mje113 (uid16557@moz-A42E5B7B.irccloud.com) (Ping timeout)
[10:05:09] *** Quits: robertknight (robertknig@moz-DF72422D.members.linode.com) (Ping timeout)
[10:05:09] *** Quits: jxs (joaoxsouls@1FF12F4F.CDF09DE2.D6573861.IP) (Ping timeout)
[10:05:09] *** Quits: escalant3 (uid14896@moz-31ABA2C0.irccloud.com) (Ping timeout)
[10:05:09] *** Quits: patrikstenmark (sid16326@moz-A42E5B7B.irccloud.com) (Ping timeout)
[10:05:09] *** Quits: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Ping timeout)
[10:05:09] *** Quits: zokier` (zokier@moz-C4357EA7.kapsi.fi) (Ping timeout)
[10:05:09] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[10:05:09] *** Quits: Crandom (Crandom__@moz-56264BBC.sx) (Ping timeout)
[10:05:09] *** Quits: reyre (reyre@moz-89E9865B.com) (Ping timeout)
[10:05:09] *** Quits: Munchor (munchor@moz-8CFC84AD.yourvserver.net) (Ping timeout)
[10:05:09] *** Quits: marc_ (uid5324@moz-31ABA2C0.irccloud.com) (Ping timeout)
[10:05:09] *** Quits: froydnj (nfroyd@moz-DB4A9C19.scl3.mozilla.com) (Ping timeout)
[10:05:09] *** Quits: jack (sid19593@moz-A42E5B7B.irccloud.com) (Ping timeout)
[10:05:09] *** Quits: nattofriends (tsutsumi@moz-A9E340E1.fuqu.jp) (Ping timeout)
[10:05:09] *** Quits: MrByte (Dartakio@moz-81792842.chy-wy.client.bresnan.net) (Ping timeout)
[10:05:09] *** Quits: sk (sk@61A494B3.BA40E8A.AAC02D62.IP) (Ping timeout)
[10:05:09] *** Quits: qmx (qmx@moz-B6DBCD05.qmx.me) (Ping timeout)
[10:05:09] *** Quits: silven (quassel@moz-F81D3961.a328.priv.bahnhof.se) (Ping timeout)
[10:05:09] *** Quits: cantsin (cantsin@moz-F99612CC.members.linode.com) (Ping timeout)
[10:05:09] *** Quits: burg (sid14893@moz-5F4AA75A.irccloud.com) (Ping timeout)
[10:05:09] *** Quits: beifeng (Mibbit@284C36E7.3062CEC3.670EEFD.IP) (Ping timeout)
[10:05:09] *** Quits: abinader (sid21713@moz-A42E5B7B.irccloud.com) (Ping timeout)
[10:05:09] *** Quits: fairfieldt (fairfieldt@moz-D8998E1C.xen.prgmr.com) (Ping timeout)
[10:05:09] *** Quits: Edwards (MeltdownMo@moz-B62E1D6B.members.linode.com) (Ping timeout)
[10:05:09] *** Quits: tomdale (sid5518@moz-31ABA2C0.irccloud.com) (Ping timeout)
[10:05:09] *** Quits: gifnksm (gifnksm@moz-2EC7BA37.szoknt01.ap.so-net.ne.jp) (Ping timeout)
[10:05:09] *** Quits: zwarich (zwarich@A89ECEB1.A86FC3A7.DE9B45B6.IP) (Ping timeout)
[10:05:09] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[10:05:09] *** Quits: bleibig (bleibig@moz-B4D9C5AF.hsd1.ca.comcast.net) (Ping timeout)
[10:05:09] *** Quits: robert (uid15951@moz-A42E5B7B.irccloud.com) (Ping timeout)
[10:05:09] *** Quits: Afuna (sid21127@moz-31ABA2C0.irccloud.com) (Ping timeout)
[10:05:09] *** Quits: lexs (uid12437@moz-5F4AA75A.irccloud.com) (Ping timeout)
[10:05:09] *** Quits: sindork (sindork@ABFA98AB.DD47BB48.F7A44A1B.IP) (Ping timeout)
[10:05:09] *** Quits: kemurphy (kemurphy@3863AC20.C4E71399.9510F13D.IP) (Ping timeout)
[10:05:09] *** Quits: FliPPeh (flippeh@moz-5A449869.dip0.t-ipconnect.de) (Ping timeout)
[10:05:09] *** Quits: dbaupp (Thunderbir@moz-25BBAF91.lns20.syd6.internode.on.net) (Ping timeout)
[10:05:09] *** Quits: sfackler (sfackler@moz-AEECCEBA.com) (Ping timeout)
[10:05:09] *** Quits: dnyarri (dnyarri@moz-84E87CA5.kapsi.fi) (Ping timeout)
[10:05:09] *** Quits: tautologico (uid22285@moz-A42E5B7B.irccloud.com) (Ping timeout)
[10:05:09] *** Quits: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr) (Ping timeout)
[10:05:09] *** Quits: whitglint (uid15486@moz-31ABA2C0.irccloud.com) (Ping timeout)
[10:05:09] *** Quits: dcolish (dcolish@1DB472A5.BE69FB10.416A0103.IP) (Ping timeout)
[10:05:09] *** Quits: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com) (Ping timeout)
[10:05:09] *** Quits: LRN (LRN@moz-50DF30B.nationalcablenetworks.ru) (Ping timeout)
[10:05:09] *** Quits: cmeiklejohn (sid1900@moz-31ABA2C0.irccloud.com) (Ping timeout)
[10:05:09] *** Quits: brianloveswords (brianloves@moz-CB223D1E.members.linode.com) (Ping timeout)
[10:05:09] *** Quits: seanmonstar (seanmonsta@8C4EE5CE.65CB159.9D887C86.IP) (Ping timeout)
[10:05:09] *** Quits: johanh (uid17185@moz-A42E5B7B.irccloud.com) (Ping timeout)
[10:05:09] *** Quits: ggherdov_ (sid11402@moz-E77DEB21.irccloud.com) (Ping timeout)
[10:05:09] *** Quits: steveklabnik (uid17044@moz-A42E5B7B.irccloud.com) (Ping timeout)
[10:05:09] *** Quits: syst3mw0rm (quassel@moz-7886FF16.us-west-2.compute.amazonaws.com) (Ping timeout)
[10:05:09] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[10:05:09] *** Quits: evilpie (sid7877@moz-E77DEB21.irccloud.com) (Ping timeout)
[10:05:09] *** Quits: balpert_ (sid15886@moz-A42E5B7B.irccloud.com) (Ping timeout)
[10:05:09] *** Quits: AutomatedTester (David@moz-DB4A9C19.scl3.mozilla.com) (Ping timeout)
[10:05:09] *** Quits: davidillsley (sid18481@moz-5F4AA75A.irccloud.com) (Ping timeout)
[10:05:09] *** Quits: claudiu (claudiu@moz-FB94486E.thefacebook.com) (Ping timeout)
[10:05:09] *** Quits: nchapman (sid15818@moz-E77DEB21.irccloud.com) (Ping timeout)
[10:05:09] *** Quits: btipling (btipling@moz-D51E0AEB.xen.prgmr.com) (Ping timeout)
[10:05:09] *** Quits: _Y_ (chatzilla@moz-6DE2BADB.dynamic.isp.telekom.rs) (Ping timeout)
[10:05:09] *** Quits: xyproto (alexander@moz-251295DE.members.linode.com) (Ping timeout)
[10:42:02] *** Joins: cmr (moznet@moz-EC676DFE.members.linode.com)
[10:42:03] *** Joins: Crandom (Crandom__@moz-56264BBC.sx)
[10:43:19] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[10:45:11] *** Joins: GameGamer43 (sid5533@moz-E77DEB21.irccloud.com)
[10:45:11] <dbaupp> sammykim: https://gist.github.com/huonw/ba51032af944c753baf4
[10:47:15] *** Joins: cyndis (cyndis@moz-C4357EA7.kapsi.fi)
[10:48:16] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[10:48:59] *** Joins: benh (ben@moz-4A0366D2.org)
[10:50:05] <dbaupp> sammykim: updated
[10:50:11] *** Joins: escalant3 (uid14896@moz-31ABA2C0.irccloud.com)
[10:51:11] *** Joins: heftig (heftig@moz-D746319F.unitymedia.biz)
[10:52:22] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[10:54:16] *** Joins: andreypopp (uid22726@moz-5F4AA75A.irccloud.com)
[10:54:54] <sammykim> dbaupp: Why do we need else? I don't unserstand :( I think it works well.
[10:56:20] <dbaupp> sammykim: because, for `if cond { ... }`, what value would it be if `cond` was false?
[10:56:33] <dbaupp> you always need to specific it manually 
[10:58:10] <sammykim> dbaupp: I see . Thanks and also when do I need to use ref exactly? I usually use it with borrowed problem. The code I commented out is using ref but how can we remove ref keyword?
[10:58:39] *** Joins: LRN (LRN@moz-50DF30B.nationalcablenetworks.ru)
[10:59:55] *** Joins: Ke (jkarlson@moz-785A3407.org.aalto.fi)
[11:00:14] *** Joins: sankha93 (uid12218@moz-31ABA2C0.irccloud.com)
[11:00:15] *** Joins: quux00 (uid24415@moz-E77DEB21.irccloud.com)
[11:00:15] *** Joins: patrikstenmark (sid16326@moz-A42E5B7B.irccloud.com)
[11:01:03] *** Quits: rca (rcatolino@moz-314B78.adsl.proxad.net) (Ping timeout)
[11:01:43] <dbaupp> ref is needed for pattern matching without moving ownership
[11:02:15] <dbaupp> so, the `ref` in the `match`s is serving the same purpose as the .as_ref() calls
[11:04:40] *** Joins: Jemaclus (jemaclus@moz-5A4BC30.hsd1.ca.comcast.net)
[11:06:22] *** Quits: Jemaclus (jemaclus@moz-5A4BC30.hsd1.ca.comcast.net) (Ping timeout)
[11:10:11] *** Quits: sk (sk@61A494B3.BA40E8A.AAC02D62.IP) (Quit: Leaving)
[11:10:37] *** Joins: dopin (dopin@9805BFB5.13C3B28A.5DB9309E.IP)
[11:11:15] <sammykim> dbaupp: clear! Thanks for making me understand :)
[11:11:15] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[11:11:20] <sammykim> Have a great day!
[11:11:27] *** Joins: jensnockert (jensnocker@moz-C4B24C3.customers.ownit.se)
[11:11:32] *** Quits: sammykim (sammy.kim@5AB4884B.FCC4549.14D5B978.IP) (Quit: Lost terminal)
[11:12:39] *** Quits: jensnockert (jensnocker@moz-C4B24C3.customers.ownit.se) (Input/output error)
[11:13:34] *** Joins: Ms2ger (Ms2ger@moz-E2F08450.adsl-dyn.isp.belgacom.be)
[11:13:44] * ChrisMorgan sets of a rustc build which will include the new IoError stuff. Exciting times!
[11:14:19] *** Joins: JustAPerson (JustAPerso@EAC6AADA.C1481309.D9401097.IP)
[11:16:52] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[11:17:22] <pzol> Shouldnt Option have a fn unwrap_copy? 
[11:17:59] <pzol> in the same spirit as hashmap has get_copy
[11:17:59] <ChrisMorgan> pzol: you mean something like `match option { Some(ref value) => value.clone(), None => fail!() }`?
[11:18:30] * pzol is thinking
[11:18:33] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[11:20:00] <ChrisMorgan> pzol: `option.get_ref().clone()`
[11:20:04] <pzol> ChrisMorgan yes, well there are cases where a match option can be avoided and you can go straight ahead with unwrap => option.unwrap_copy() instead of option.unwrap().clone() - minor detail, but I think a consistency across stdlib is important
[11:20:32] <pzol> ChrisMorgan yes, that one
[11:20:48] <pzol> or option.get_copy()
[11:21:17] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[11:22:34] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Input/output error)
[11:23:00] *** Joins: Rui (rui@DC292421.962C7E8.F44582AE.IP)
[11:25:52] <pnkfelix> pzol: the Option API has been revised a number of times already... I do not know if you've already see the history here.
[11:26:06] <pnkfelix> pzol: see e.g. https://github.com/mozilla/rust/pull/9359
[11:26:30] <pnkfelix> pzol: or i guess the real discussion is at: https://github.com/mozilla/rust/issues/9355
[11:27:25] <pnkfelix> pzol: and see also: https://github.com/mozilla/rust/issues/7887
[11:27:32] *** pmoore is now known as pmoore|lunch
[11:27:43] <pzol> pnkfelix the current api is good, just saying that it could be more consistent across different data structures
[11:29:46] <pzol> pnkfelix once we hit 1.0 changing anything will be next to impossible
[11:30:06] *** Quits: sigma (sigma@moz-B2E77065.range86-184.btcentralplus.com) (Client exited)
[11:31:03] <pnkfelix> pzol: maybe I am missing your point.  There is a tension here between 1. consistency across all of the APIs in the stdlib, vs. 2. incremental progress towards goals for the APIs of individual core types.
[11:31:50] <pnkfelix> pzol: and #9355 explicitly was pushing towards using composition instead of having many variants of each method
[11:33:06] <pnkfelix> pzol: (I'm not sure whether there's enough of a push towards using composition everywhere for us to revise the map API to make it consistent here, which seems like one way to resolve that tension)
[11:35:10] *** Joins: kvanb (kvanb@moz-3AC18234.lnse3.lon.bigpond.net.au)
[11:35:17] *** Joins: marc_ (uid5324@moz-31ABA2C0.irccloud.com)
[11:35:18] *** Joins: mje113 (uid16557@moz-A42E5B7B.irccloud.com)
[11:35:24] <pzol> pnkfelix let me read the issues you sent me, first
[11:36:15] <pnkfelix> pzol: I certainly acknowledge that 1.0 represents a milestone where we would hope to have API stability.  Though perhaps we can tag questionable methods with instability attributes to circumvent that.
[11:37:20] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[11:39:06] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[11:39:51] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[11:40:57] *** Joins: ricepuddin (graham@moz-7D68765A.cable.virginm.net)
[11:42:17] *** Joins: StarLight (StarLight@moz-2B113AB3.dynamic.avangarddsl.ru)
[11:42:20] *** Quits: A1kmm (A1kmm@moz-6171F151.dsl.mel.iprimus.net.au) (Ping timeout)
[11:42:21] *** Joins: nkoep (nik@moz-E793A9FD.pool.mediaways.net)
[11:42:23] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[11:43:28] *** Joins: sigma (sigma@moz-B2E77065.range86-184.btcentralplus.com)
[11:43:33] *** Joins: A1kmm (A1kmm@moz-72AA67E.dsl.mel.iprimus.net.au)
[11:44:06] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[11:44:22] *** Joins: rca (rcatolino@moz-314B78.adsl.proxad.net)
[11:45:23] *** Joins: daschl (Adium@9E1B3473.8A86D3C3.EBB4EDEF.IP)
[11:45:34] <poiru> .
[11:45:42] <poiru> Oops.
[11:45:45] <Ms2ger> !
[11:48:13] *** Joins: jxs (joaoxsouls@1FF12F4F.CDF09DE2.D6573861.IP)
[11:48:36] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[11:49:22] *** Joins: sk (sk@9E6B574B.EB2AA036.2CAF0D3B.IP)
[11:49:57] *** Joins: skade (skade@541D1605.505237C9.CAE22B62.IP)
[11:52:24] *** Joins: robn (robn@moz-76B0302C.static.internode.on.net)
[11:52:29] *** Joins: beifeng (Mibbit@284C36E7.3062CEC3.670EEFD.IP)
[11:52:45] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[11:52:55] *** Joins: Kxepal (Miranda@moz-94E27C3F.pppoe.mtu-net.ru)
[11:53:30] *** Quits: daschl (Adium@9E1B3473.8A86D3C3.EBB4EDEF.IP) (Quit: Leaving.)
[11:55:10] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[11:59:39] *** Quits: ricepuddin (graham@moz-7D68765A.cable.virginm.net) (Ping timeout)
[12:05:20] *** Joins: robert_ (uid15951@moz-A42E5B7B.irccloud.com)
[12:05:26] *** Quits: patpat (patpat@moz-1599AAE4.as13285.net) (Ping timeout)
[12:05:38] *** Joins: Jemaclus (jemaclus@moz-5A4BC30.hsd1.ca.comcast.net)
[12:07:01] *** Quits: Jemaclus (jemaclus@moz-5A4BC30.hsd1.ca.comcast.net) (Connection reset by peer)
[12:07:06] *** Joins: Jemaclus (jemaclus@moz-5A4BC30.hsd1.ca.comcast.net)
[12:08:50] *** Quits: Jemaclus (jemaclus@moz-5A4BC30.hsd1.ca.comcast.net) (Ping timeout)
[12:09:24] *** Joins: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP)
[12:10:22] *** Joins: fyolnish (fyolnish@moz-ADDABC0D.uqwimax.jp)
[12:11:56] *** Joins: calvinmetcalf (cmetcalf@moz-7BEE0DCC.hfc.comcastbusiness.net)
[12:14:29] *** Joins: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP)
[12:16:20] *** Joins: Kynes (Kynes@moz-3DC6C6E7.mit.edu)
[12:17:22] *** Joins: btipling (btipling@moz-D51E0AEB.xen.prgmr.com)
[12:17:29] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[12:18:51] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[12:19:40] *** Joins: jensnockert (jensnocker@moz-AB60F11D.wireless.lu.se)
[12:20:21] *** Joins: claudiu (claudiu@moz-FB94486E.thefacebook.com)
[12:21:26] *** Joins: wilfred (sid159@moz-5F4AA75A.irccloud.com)
[12:22:02] *** Quits: claudiu (claudiu@moz-FB94486E.thefacebook.com) (Ping timeout)
[12:26:50] *** Quits: Khady (Khady@moz-31F9D77E.khady.info) (Ping timeout)
[12:27:21] *** Quits: davbo (dave@moz-84455EE7.skybroadband.com) (Ping timeout)
[12:27:32] *** Quits: franckverrot (Franck_Ver@C3033BF6.B86F1645.C91367C6.IP) (Ping timeout)
[12:27:38] *** Quits: TeXitoi (texitoi@moz-EA958D66.texitoi.eu) (Ping timeout)
[12:30:33] *** Joins: davbo (dave@moz-84455EE7.skybroadband.com)
[12:31:04] *** Joins: TeXitoi (texitoi@moz-EA958D66.texitoi.eu)
[12:35:20] *** Joins: tomdale (sid5518@moz-31ABA2C0.irccloud.com)
[12:35:22] *** Joins: jack (sid19593@moz-A42E5B7B.irccloud.com)
[12:35:22] *** ChanServ sets mode: +o jack
[12:35:48] *** Joins: Yoric (Yoric@moz-DB4A9C19.scl3.mozilla.com)
[12:37:41] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[12:38:02] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[12:39:11] *** Joins: ercxx (ercan@moz-88DD3A7E.dyn.optonline.net)
[12:39:26] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[12:39:34] *** Joins: alexherbo2 (alexherbo2@moz-FC10E83F.de)
[12:40:52] *** Joins: canhtak (canhtak@moz-8A625E1D.wl.t.ulaval.ca)
[12:42:27] *** Joins: nmatsakis (nmatsakis@moz-DB4A9C19.scl3.mozilla.com)
[12:42:27] *** ChanServ sets mode: +ao nmatsakis nmatsakis
[12:43:09] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[12:43:22] *** pmoore|lunch is now known as pmoore
[12:43:22] *** Quits: jensnockert (jensnocker@moz-AB60F11D.wireless.lu.se) (Connection reset by peer)
[12:43:42] *** Joins: jensnockert (jensnocker@moz-C6FC9FF5.wireless.lu.se)
[12:44:26] *** Joins: Earnestly (earnest@811A97A3.CF19AA69.5411983D.IP)
[12:44:40] *** Quits: skade (skade@541D1605.505237C9.CAE22B62.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[12:45:00] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[12:47:57] *** Joins: claudiu (claudiu@moz-D5BFAAB5.hsd1.ca.comcast.net)
[12:49:07] *** Joins: claudiu_ (claudiu@CB447DD5.6B10AC3.E2F59BBC.IP)
[12:49:37] *** Quits: claudiu (claudiu@moz-D5BFAAB5.hsd1.ca.comcast.net) (Ping timeout)
[12:50:29] <Diamond> what exactly are proc()s?
[12:50:50] *** Quits: jensnockert (jensnocker@moz-C6FC9FF5.wireless.lu.se) (Input/output error)
[12:51:07] *** Quits: aurynj (Eon@583ABBE5.60FA2E28.B9E25744.IP) (Quit: Leaving)
[12:51:28] *** Quits: Rui (rui@DC292421.962C7E8.F44582AE.IP) (Ping timeout)
[12:52:13] *** Joins: nical (nico@87C1F78E.1DE10CA8.D8E68FF6.IP)
[12:52:55] <Zr40> hm, they're not in the reference manual
[12:53:05] <Diamond> Indeed.
[12:53:45] *** Joins: skelly (hl@moz-55F978C0.org)
[12:54:13] *** Joins: Rui (rui@FEA917E4.5F152A6A.21B78128.IP)
[12:54:27] <Zr40> rusti: proc
[12:54:27] -rusti- <anon>:11:5: 11:6 error: expected `(` but found `}`
[12:54:28] -rusti- <anon>:11     };
[12:54:28] -rusti-               ^
[12:54:28] -rusti- application terminated with error code 101
[12:55:07] <Ms2ger> Heh
[12:55:17] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[12:55:32] <Ms2ger> procs are once fns, I think?
[12:55:37] <Diamond> I believe they are used to safely send closures across task boundaries 
[12:55:46] *** Joins: alex-abreu (alex@C08D9303.9289A342.80AB4F0.IP)
[12:56:10] <Diamond> But I wonder as to they're specifics.
[12:56:42] <dbaupp> proc is a closure with a heap allocated environment that can only be called once
[12:57:03] <Diamond> dbaupp: thanks
[12:57:27] <Diamond> also their*
[12:57:46] <Diamond> facepalm
[12:58:20] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[12:58:39] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[12:58:52] *** Joins: nszceta (hax@moz-E458A7C0.pharm.pitt.edu)
[12:59:39] *** Joins: skade (skade@541D1605.505237C9.CAE22B62.IP)
[13:00:44] *** Quits: skade (skade@541D1605.505237C9.CAE22B62.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[13:00:44] *** Joins: gwty (gwtypc@1B95AFF8.4A426DC1.B29E8538.IP)
[13:01:37] *** Joins: skade (skade@541D1605.505237C9.CAE22B62.IP)
[13:01:50] *** Quits: skade (skade@541D1605.505237C9.CAE22B62.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[13:02:01] *** Joins: skade (skade@541D1605.505237C9.CAE22B62.IP)
[13:03:04] *** Joins: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net)
[13:05:00] *** Quits: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net) (Ping timeout)
[13:05:26] *** Joins: Afuna (sid21127@moz-31ABA2C0.irccloud.com)
[13:05:41] *** Joins: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP)
[13:07:52] *** Joins: Jemaclus (jemaclus@moz-5A4BC30.hsd1.ca.comcast.net)
[13:08:04] *** Quits: Ms2ger (Ms2ger@moz-E2F08450.adsl-dyn.isp.belgacom.be) (Input/output error)
[13:09:20] *** Quits: canhtak (canhtak@moz-8A625E1D.wl.t.ulaval.ca) (Quit: canhtak)
[13:09:38] *** Quits: Jemaclus (jemaclus@moz-5A4BC30.hsd1.ca.comcast.net) (Ping timeout)
[13:11:04] *** Joins: patpat (patpat@5BE5DD85.B3082579.98F3E2B5.IP)
[13:12:58] *** Joins: squiddy (squiddy@moz-8A927E3C.adsl.alicedsl.de)
[13:13:41] <dbaupp> Do FFI bindings to GPL libraries have to be GPL too?
[13:14:16] *** Quits: skade (skade@541D1605.505237C9.CAE22B62.IP) (Ping timeout)
[13:14:40] *** Joins: oal (oal@26029749.1D466084.2CFD4520.IP)
[13:14:41] <pnkfelix> dbaupp: one would imagine so, since it implies that you're linking the pieces together, no?
[13:15:07] <pnkfelix> dbaupp: I would think you'd need to be connecting to an LGPL to be able to avoid that
[13:15:08] <Zr40> dbaupp: if not, I'd imagine they have to be at least GPL-compatible
[13:15:21] *** Joins: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[13:15:27] *** Quits: alex-abreu (alex@C08D9303.9289A342.80AB4F0.IP) (Ping timeout)
[13:15:35] <dbaupp> I've checked for other languages bindings to this lib (FFTW), and they seem to use BSD or LGPL
[13:15:53] <dbaupp> (although there's no guarantee that they're correct)
[13:16:17] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[13:16:42] <dbaupp> (e.g. http://hackage.haskell.org/package/fft )
[13:16:59] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Quit: Leaving.)
[13:17:23] *** Quits: oal (oal@26029749.1D466084.2CFD4520.IP) (Quit: Goodbye, cruel world.)
[13:17:57] <pnkfelix> dbaupp: there may be some subtlety here in terms of whether the FFI bindings themselves can be BSD licensed, but the end linked result must be GPL'ed ?
[13:18:03] *** Joins: oal (oal@26029749.1D466084.2CFD4520.IP)
[13:18:09] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[13:18:20] <pnkfelix> dbaupp: (or it could just be an instance of a GPL violation.  but IANAL.)
[13:18:42] <pnkfelix> dbaupp: Do note that FFTW is also available under a commerical license
[13:19:45] <dbaupp> pnkfelix: a subtlety like that sounds semireasonable, as does it just being a violation.
[13:19:54] <pnkfelix> dbaupp: So that might be a way to justify providing the FFI bindings under a different license, in that its the responsibility of the distributor at the end to ensure that they are not violating any licenses.
[13:20:16] *** Joins: skade (skade@541D1605.505237C9.CAE22B62.IP)
[13:20:22] *** Quits: gimpf (gimpf@moz-2EECDFD6.adsl.highway.telekom.at) (Client exited)
[13:20:35] *** Joins: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net)
[13:20:57] <dbaupp> pnkfelix: Ok, sounds good. (If I get sued for GPL violations, it'll be on your head! :P )
[13:21:22] <pnkfelix> dbaupp: Its easy: Just don't distribute your linked program
[13:21:55] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[13:22:40] *** Joins: canhtak (canhtak@moz-8A625E1D.wl.t.ulaval.ca)
[13:23:15] <dbaupp> no one would want to use majority of the code I write anyway, so that's easy :P
[13:25:12] *** Quits: skade (skade@541D1605.505237C9.CAE22B62.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[13:25:37] *** Joins: bstrie (ben@moz-D5A1D0F5.members.linode.com)
[13:25:54] <bstrie> did we get botted again?
[13:26:24] *** Quits: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP) (Quit: Leaving...)
[13:26:44] <pnkfelix> bstrie: I'm not aware of any attacks?
[13:27:21] *** Joins: skade (skade@541D1605.505237C9.CAE22B62.IP)
[13:27:32] *** Quits: canhtak (canhtak@moz-8A625E1D.wl.t.ulaval.ca) (Quit: canhtak)
[13:28:40] <dbaupp> the server dropped out (or something, wasn't paying complete attention) for some time a few hours ago
[13:29:11] <pnkfelix> dbaupp: ah, you know, I do recall having problems connecting
[13:29:21] *** Joins: canhtak (canhtak@moz-8A625E1D.wl.t.ulaval.ca)
[13:29:22] <pnkfelix> dbaupp: I was assuming it was an issue with my flaky IRC setup
[13:29:30] <pnkfelix> sed -e 's/setup/client/'
[13:30:20] <nszceta> are there any IRC OPS on here
[13:30:34] *** Joins: pheleas_frog (Mibbit@A1FE981B.940A4703.BA2F4534.IP)
[13:30:38] <pnkfelix> nszceta: I doubt there are any in this room
[13:30:43] <nszceta> any idea where to find them
[13:30:57] <pnkfelix> nszceta: maybe ask in #servicedesk ?
[13:31:31] <nszceta> thanks
[13:32:23] <pheleas_frog> Hi, i'm trying to run the configure of rust-0.9 and I get an error : configure: error: C preprocessor "/lib/cpp" fails sanity check. Does anyone know how to fix this ?
[13:34:23] *** Joins: hdevalence (quassel@moz-D125A39F.home3.cgocable.net)
[13:34:31] <pnkfelix> pheleas_frog: can you put a full transcript of the configure invocation and the output up on gist.github.com ?
[13:35:23] *** Joins: nchapman (sid15818@moz-E77DEB21.irccloud.com)
[13:35:28] *** Joins: whitglint (uid15486@moz-31ABA2C0.irccloud.com)
[13:37:29] <bstrie> "It's a misconception parsers are easy to write. Plus, they do an unfathomable amount of damage."
[13:37:32] <bstrie> "Parsers are far from harmless pieces of logic you can just throw together. And not just because they take time to write - parsers are physically dangerous. Compiler writers develop incipient carpal tunnel syndrome trying to write parsers."
[13:37:42] <bstrie> #shitHNsaysindefenseofsexpressions
[13:38:01] <bstrie>  /nick bstrie_sexpressions
[13:38:02] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[13:38:10] <Zr40> it's parsers all the way down
[13:38:44] *** Joins: diverse (diverse@moz-ED94B8D.oc.oc.cox.net)
[13:39:30] <pheleas_frog> pnkfelix: here is the log of my configure  https://gist.github.com/EscoCreeks/cf41904fe7ad06f51f1d
[13:39:47] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[13:39:52] <pnkfelix> pheleas_frog: looking
[13:40:04] *** Joins: Erik_ (Erik_S@moz-D2F74C7B.hlrn.qwest.net)
[13:40:13] <Zr40> pheleas_frog: the error seems to be truncated
[13:41:03] <pnkfelix> pheleas_frog: okay, the first thing I wanted to check/confirm was where the check is happening: its happening in the LLVM configure that the Rust configure calls out to
[13:42:02] *** Quits: skade (skade@541D1605.505237C9.CAE22B62.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[13:42:10] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[13:42:27] <pnkfelix> pheleas_frog: do you have any idea why its trying to use /lib/cpp as the C preprocessor?  E.g. do you have the CPP env variable set?
[13:43:11] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[13:43:18] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[13:43:32] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[13:44:06] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[13:44:30] <pheleas_frog> pnkfelix: no, the CPP env variable is not set
[13:45:47] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[13:46:59] *** Joins: jsonnull (Thunderbir@26F61E6.CFD9471D.494A0F8B.IP)
[13:47:00] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[13:47:11] <pnkfelix> pheleas_frog: well, in any case, my strategy for figuring out the problem would be to figure out what the LLVM configure script is doing.
[13:47:39] *** Joins: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com)
[13:48:47] <pnkfelix> pheleas_frog: i.e. start by running just the LLVM configure on its own, with the same flags that rust's configure is feeding it
[13:49:07] <pnkfelix> pheleas_frog: to ensure that the bug still arises in that context.  Then dissect the llvm configure script.
[13:49:17] *** Quits: Rui (rui@FEA917E4.5F152A6A.21B78128.IP) (Quit: )
[13:49:32] *** Joins: emerson (Icedove@6F3CD6F5.77F4443F.66AE2FF3.IP)
[13:49:32] <pheleas_frog> pnkfelix: ok, thanks !
[13:50:06] *** Parts: emerson (Icedove@6F3CD6F5.77F4443F.66AE2FF3.IP) ()
[13:50:16] <pnkfelix> pheleas_frog: oh, also, this may be obvious, but also double check whether /lib/cpp actually *is* the C preprocessor on your host.  (It probably is not)
[13:50:27] *** Joins: skade (skade@541D1605.505237C9.CAE22B62.IP)
[13:50:47] <pnkfelix> pheleas_frog: I see "/lib/cpp" arising around line 3250 of src/llvm/configure
[13:51:07] <pnkfelix> pheleas_frog: have you ever debugged a configure script before?
[13:51:18] *** Joins: alex-abreu (alex@C08D9303.9289A342.80AB4F0.IP)
[13:51:36] *** Joins: chandler (foo@moz-F990611.mastenbrook.net)
[13:52:51] <pheleas_frog> pnkfelix: no, but I think I have found something interesting 
[13:53:08] *** Quits: skade (skade@541D1605.505237C9.CAE22B62.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[13:53:11] <pnkfelix> pheleas_frog: okay. let me know if you want assistance/advice
[13:53:42] <pheleas_frog> pnkfelix: I ran the configure for llvm with the flags, and here is the error I got : configure: error: Selected compiler could not find or parse C++ standard library headers.  Rerun with CC=c-compiler CXX=c++-compiler ./configure ...
[13:54:00] *** Joins: jensnockert (jensnocker@moz-8620B324.wireless.lu.se)
[13:54:09] <pnkfelix> pheleas_frog: what kind of host system are you on?  Linux, Mac, ...?
[13:54:47] <pheleas_frog> pnkfelix: i am on Mac OS X (10.9.1)
[13:54:56] <pnkfelix> pheleas_frog: ah ha
[13:54:59] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[13:55:22] <pnkfelix> pheleas_frog: So I assume you have Xcode installed, but ... you also need to install the command line support utilities, I believe.
[13:55:55] <pnkfelix> pheleas_frog: (give me a sec, I'm finding a reference)
[13:56:00] <pheleas_frog> pnkfelix: Yes, I have it
[13:56:52] *** Quits: beifeng (Mibbit@284C36E7.3062CEC3.670EEFD.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[13:57:01] <pnkfelix> pheleas_frog: have you installed the "Command Line Tools", listed under Xcode .. Preferences .. Downloads (tab) ... Components? 
[13:57:18] <pheleas_frog> pnkfelix: Yes
[13:57:39] <pnkfelix> pheleas_frog: hmm.  Can you run the C and C++ compilers yourself in the terminal?
[13:57:50] *** Quits: japaric (japaric@DA9B0B44.F596884F.F29ED47E.IP) (Ping timeout)
[13:58:12] *** Joins: LinearInterpol (RJones@moz-E6F82C3A.maine.res.rr.com)
[13:58:34] *** Quits: kvanb (kvanb@moz-3AC18234.lnse3.lon.bigpond.net.au) (Quit: kvanb)
[13:58:46] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[13:58:51] <pheleas_frog> pnkfelix: What do you mean ?
[13:58:55] <pnkfelix> pheleas_frog: also, I'm not on 10.9 yet myself
[13:58:58] <pnkfelix> pheleas_frog: i'm only on 10.8
[13:59:08] <pnkfelix> pheleas_frog: you may want to look at the items here: http://stackoverflow.com/questions/18216865/how-to-install-command-line-tools-on-osx-mavericks
[13:59:51] <pnkfelix> pheleas_frog: my question above about running the C and C++ compilers meant, can you compile and run hello world type programs
[14:00:02] <pnkfelix> pheleas_frog: that are written in C and/or C++
[14:00:04] *** Joins: abinader (sid21713@moz-A42E5B7B.irccloud.com)
[14:00:20] <pnkfelix> pheleas_frog: at the terminal interface
[14:00:21] *** jorendorff_away is now known as jorendorff
[14:00:39] <pnkfelix> pheleas_frog: http://en.wikipedia.org/wiki/List_of_Hello_world_program_examples#C
[14:01:01] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[14:02:08] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[14:05:25] *** Joins: balpert_ (sid15886@moz-A42E5B7B.irccloud.com)
[14:05:28] *** Joins: cmeiklejohn (sid1900@moz-31ABA2C0.irccloud.com)
[14:06:24] <pheleas_frog> pnkfelix: Well, i cannot compile hello world type programs. This is quite surprising. I look out on the web why is this happening (I already worked on various C and C++ programs and never got this problem). I think my problem is related to this : http://stackoverflow.com/questions/9352171/stdio-h-not-found-after-fresh-xcode-4-3-installed
[14:07:03] *** Joins: ricepuddin (graham@moz-B9899664.wlan.ic.ac.uk)
[14:07:56] *** Quits: gwty (gwtypc@1B95AFF8.4A426DC1.B29E8538.IP) (Ping timeout)
[14:08:38] *** Joins: Jemaclus (jemaclus@moz-5A4BC30.hsd1.ca.comcast.net)
[14:10:23] *** Quits: Jemaclus (jemaclus@moz-5A4BC30.hsd1.ca.comcast.net) (Ping timeout)
[14:12:15] <pheleas_frog> pnkfelix: The configure is running and seems to have pass the problem. I had an internship and worked on ios app development. During the internship I had to upgrade to Lion and to the new version of XCode. I think that this is the reason of my problems
[14:13:09] *** Joins: skade (skade@541D1605.505237C9.CAE22B62.IP)
[14:13:34] <pheleas_frog> pnkfelix: Thanks a lot for your help
[14:15:17] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[14:15:50] <nical> pnkfelix: I implemented the streaming json parser I told you about in libextra: https://github.com/nical/rust/blob/streaming-parser/src/libextra/json.rs
[14:16:04] <nical> (re-implemented)
[14:16:36] *** Joins: dschatzberg (dschatzber@moz-9384E83C.bu.edu)
[14:18:10] *** Quits: jensnockert (jensnocker@moz-8620B324.wireless.lu.se) (Input/output error)
[14:18:39] *** Joins: jensnockert (jensnocker@moz-8620B324.wireless.lu.se)
[14:19:07] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[14:19:42] *** Joins: infynyxx (infynyxx@moz-6A908824.cit.cornell.edu)
[14:20:30] *** Quits: jensnockert (jensnocker@moz-8620B324.wireless.lu.se) (Ping timeout)
[14:20:49] *** Quits: patpat (patpat@5BE5DD85.B3082579.98F3E2B5.IP) (Ping timeout)
[14:21:35] *** Joins: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com)
[14:23:06] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[14:23:06] *** ChanServ sets mode: +ao dherman dherman
[14:24:04] *** Quits: apoelstra (username@moz-BBEB5B9E.sw.biz.rr.com) (Quit: WeeChat 0.4.2)
[14:24:29] *** Joins: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP)
[14:25:57] *** Joins: Khady (Khady@moz-31F9D77E.khady.info)
[14:26:10] *** Joins: kellogh (timkellogg@moz-704A74D.hsd1.co.comcast.net)
[14:26:22] *** Quits: skade (skade@541D1605.505237C9.CAE22B62.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[14:26:30] *** Joins: skade (skade@541D1605.505237C9.CAE22B62.IP)
[14:26:58] *** Joins: franckverrot (Franck_Ver@C3033BF6.B86F1645.C91367C6.IP)
[14:27:33] *** Quits: pheleas_frog (Mibbit@A1FE981B.940A4703.BA2F4534.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:30:22] *** Joins: maxli (maxli@moz-EE42E0E.student.cs.uwaterloo.ca)
[14:31:54] *** Quits: themgt (themgt@moz-83F07CDA.cm.vtr.net) (Quit: Pogoapp - http://www.pogoapp.com)
[14:33:32] *** Joins: jensnockert (jensnocker@moz-8620B324.wireless.lu.se)
[14:36:10] *** Quits: maxli (maxli@moz-EE42E0E.student.cs.uwaterloo.ca) (Quit: Leaving.)
[14:36:58] *** Quits: jensnockert (jensnocker@moz-8620B324.wireless.lu.se) (Input/output error)
[14:37:10] <pnkfelix> nical: cool.  I also heard you had a good discussion with SimonSapin
[14:37:46] <pnkfelix> nical: after all those weekly mtgs of hearing your status on layers, I trust that you are indeed our local expert on the matter.  :)
[14:38:21] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[14:38:43] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[14:38:49] *** Quits: nszceta (hax@moz-E458A7C0.pharm.pitt.edu) (Input/output error)
[14:39:09] <nical> pnkfelix: I am the local expert on what it went wrong :) I hope servo will not need the complicated setup we have in gecko. nrc knows quite a bit about that too
[14:39:15] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[14:39:54] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[14:40:05] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[14:40:06] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[14:40:22] *** Joins: jzelinskie (sid17772@moz-A42E5B7B.irccloud.com)
[14:40:47] *** Joins: dave1629 (dave@55EE1F81.83BCE10.DDE5D3F6.IP)
[14:41:54] <SimonSapin> btw, does jsonâ€™s Object really need to be a Treemap, or could it get away with a vector of name/value pairs?
[14:42:42] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[14:43:09] <eddyb> SimonSapin: it probably is a TreeMap because that should be somewhat more efficient
[14:43:20] <eddyb> it would be a HashMap if the order didn't matter
[14:43:58] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[14:44:42] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[14:45:13] *** pmoore is now known as pmoore|brb
[14:45:25] <SimonSapin> eddyb: Is O(log(n)) access to a value from a key really that important compared to O(n) in a vector?
[14:45:49] <pnkfelix> SimonSapin: maybe the choice of which kind of object to create could be a parameter of the parser?
[14:45:52] *** Joins: pheleas_frog (Mibbit@CD762837.C20AE592.BA2F4534.IP)
[14:46:06] <eddyb> SimonSapin: I'm not sure anything cares about the order, IMO it would just be a HashMap
[14:46:25] <SimonSapin> pnkfelix: or the parser could give the simplest possible representation, leaving the user to choose to transform it into whatever afterwards
[14:46:30] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[14:46:31] <pnkfelix> eddyb: I think SimonSapin's point is about whether a Map api is necessary here
[14:46:47] <pnkfelix> eddyb: a [(key, value)] is going to be more compact than a TreeMap and a HashMap, no?
[14:47:15] *** Joins: jhasse (jhass_000@moz-4E139B4C.ewe-ip-backbone.de)
[14:47:16] <pnkfelix> SimonSapin: well there's a reasonable argument that one might want to avoid allocating the intermediate [(key, value)] if it can be sidesteps
[14:47:17] *** Joins: trobertson (quassel@moz-A4AC319.sd.sd.cox.net)
[14:47:20] <pnkfelix> *sidestepped
[14:47:24] *** Quits: jhasse (jhass_000@moz-4E139B4C.ewe-ip-backbone.de) (Quit: Verlassend)
[14:47:31] *** Joins: jhasse (jhass_000@moz-4E139B4C.ewe-ip-backbone.de)
[14:47:36] <eddyb> well... it could be Json<ObjectRepr = TreeSet>. or something like that
[14:47:44] *** Joins: diegoyam (quassel@FF9B1514.A4EC3D18.3A1EC144.IP)
[14:47:59] <SimonSapin> Context: https://github.com/mozilla/rust/pull/11984#issuecomment-33903888 dependency on extra::treemap for moving extra::json out of extra
[14:48:05] *** Quits: jhasse (jhass_000@moz-4E139B4C.ewe-ip-backbone.de) (Quit: Verlassend)
[14:48:13] <eddyb> a TreeMap should be in std IMO
[14:48:20] <eddyb> next to HashMap
[14:48:21] *** Quits: _Vi (vi@D7277DB6.6FF508C1.10C239DF.IP) (Ping timeout)
[14:51:25] *** Joins: Yurume (Yurume@A826BD81.8A0DEF81.38747683.IP)
[14:52:19] *** Joins: jooert (Mibbit@moz-92C96310.zim.uni-duisburg-essen.de)
[14:52:57] *** Parts: jooert (Mibbit@moz-92C96310.zim.uni-duisburg-essen.de) ()
[14:53:51] *** Quits: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP) (Ping timeout)
[14:55:16] *** Joins: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP)
[14:57:19] *** Quits: ricepuddin (graham@moz-B9899664.wlan.ic.ac.uk) (Ping timeout)
[14:59:57] *** Quits: dave1629 (dave@55EE1F81.83BCE10.DDE5D3F6.IP) (Quit: dave1629)
[15:00:08] *** Quits: skade (skade@541D1605.505237C9.CAE22B62.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[15:00:09] *** Joins: ricepuddin (graham@moz-B9899664.wlan.ic.ac.uk)
[15:00:16] *** Joins: dave1629 (dave@55EE1F81.83BCE10.DDE5D3F6.IP)
[15:00:34] <pheleas_frog> Hi, it's me again. I am having problem when I run make -j4 for rust-0.9, i'm sorry to bother you again.
[15:00:43] *** Quits: dave1629 (dave@55EE1F81.83BCE10.DDE5D3F6.IP) (Quit: dave1629)
[15:02:09] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[15:02:27] <Zr40> what's the problem?
[15:02:46] *** Joins: dave1629 (dave@55EE1F81.83BCE10.DDE5D3F6.IP)
[15:04:16] *** Joins: skade (skade@541D1605.505237C9.CAE22B62.IP)
[15:04:59] *** victorporof_ is now known as victorporof_|away
[15:05:10] *** Joins: maxli (maxli@moz-B19F68ED.student.cs.uwaterloo.ca)
[15:05:20] <pheleas_frog> It is a problem of undifened symbol. Here is a part of the output : https://gist.github.com/EscoCreeks/a45b8796f58854e6c736
[15:05:26] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[15:05:27] *** Joins: tautologico (uid22285@moz-A42E5B7B.irccloud.com)
[15:05:35] *** Joins: ggherdov_ (sid11402@moz-E77DEB21.irccloud.com)
[15:05:41] *** Quits: sellout (Adium@moz-CF70CF20.hlrn.qwest.net) (Quit: Leaving.)
[15:05:41] *** Quits: skade (skade@541D1605.505237C9.CAE22B62.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[15:06:24] <Zr40> have you tried running make without -j4?
[15:07:06] <pheleas_frog> Yes, and i get the same error
[15:08:34] *** Joins: skade (skade@541D1605.505237C9.CAE22B62.IP)
[15:09:24] *** Joins: Jemaclus (jemaclus@moz-5A4BC30.hsd1.ca.comcast.net)
[15:09:39] *** Joins: bjustin (bjustin@moz-8FC28563.sierrabravo.net)
[15:11:04] *** Quits: Jemaclus (jemaclus@moz-5A4BC30.hsd1.ca.comcast.net) (Ping timeout)
[15:11:47] *** Quits: fyolnish (fyolnish@moz-ADDABC0D.uqwimax.jp) (Client exited)
[15:12:41] *** Quits: barosl (barosl@3DE683B6.E551553C.7544CABF.IP) (Quit: ëžœë¤ì€ ì‡ í‡´í–ˆìŠµë‹ˆë‹¤.)
[15:12:58] *** Joins: io2 (io2@moz-7C3DDBE8.home.otenet.gr)
[15:13:41] <bstrie> dbaupp: I thought bors was javascript, not python
[15:14:35] *** Joins: _Vi (vi@D7277DB6.6FF508C1.10C239DF.IP)
[15:14:40] <eddyb> bstrie: nope
[15:15:11] <Tobba> hm
[15:15:18] <Tobba> lld should be mature enough to link rust applications, actually
[15:15:23] <Tobba> not sure about its PE support though
[15:16:34] *** Quits: io2 (io2@moz-7C3DDBE8.home.otenet.gr) (Quit: )
[15:17:07] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[15:17:31] <Tobba> though it really doesnt have much docs
[15:17:47] *** Quits: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP) (Ping timeout)
[15:18:05] *** Joins: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP)
[15:19:19] *** Joins: io2 (io2@moz-7C3DDBE8.home.otenet.gr)
[15:19:52] <Tobba> llds arg parser is absolutely fucked, I doubt anyone actually uses the thing
[15:20:04] <bstrie> Tobba: lld would solve SO MANY PROBLEMS
[15:20:10] <bstrie> we wouldn't need mingw anymore!!
[15:20:17] <cmr> it's the linker on OS X
[15:20:22] <Tobba> liblld or w/e could work
[15:20:23] <bstrie> but does it work on windows
[15:20:29] <cmr> I use it too a bunch of times
[15:20:31] <cmr> bstrie: yes.
[15:20:33] <Tobba> but it doesnt even recognise any more option than one properly
[15:20:38] <cmr> eh?
[15:20:39] <bstrie> then why aren't we using it?
[15:20:43] <bstrie> everywhere
[15:20:44] <Tobba> if you try to do
[15:20:45] <cmr> are you putting it in the right mode?
[15:20:48] <Tobba> lld -flavor link -target <X>
[15:20:52] <cmr> bstrie: because it doesn't work on linux :P
[15:20:52] <Tobba> then it just says unknown option
[15:20:58] <Tobba> and bitches out about the fact that it got passed an ELF file
[15:22:27] <Tobba> sadly there really also appars to be no documentation for the thing
[15:22:32] <cmr> doesn't link use /Foo syntax
[15:22:40] <Tobba> nope
[15:22:41] *** Quits: skade (skade@541D1605.505237C9.CAE22B62.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[15:22:45] <Tobba> it accepts the first option you pass to it
[15:22:46] *** Joins: skade (skade@541D1605.505237C9.CAE22B62.IP)
[15:22:52] <Tobba> but it fucks out on the second one
[15:23:02] <cmr> no seriously, link.exe, isn't that what it uses
[15:23:12] <Tobba> wonder what -core does, it wants a YAML file but its all undocumented
[15:23:16] <Tobba> link.exe is MS's linker afaik?
[15:23:18] <cmr> yes.
[15:23:21] <cmr> and -flavor link
[15:23:29] <cmr> uses link.exe's command syntax
[15:23:31] <Tobba> ... ah shit
[15:23:47] <Tobba> I blame that I had no idea what the -flavor arg actually does
[15:23:50] <Tobba> (theres no documentation!)
[15:23:59] *** Quits: skade (skade@541D1605.505237C9.CAE22B62.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[15:24:49] <cmr> lld is meant to be CLI-compatible with All Of The Linkers
[15:24:59] <cmr> (and thus a drop-in replacement)
[15:25:04] <Tobba> yeah I just realized that
[15:25:07] *** Joins: sbalmos (quassel@CA5677B6.576D0C1.ED2EFC1B.IP)
[15:25:19] <Tobba> with this sorted out, usage should be obvious
[15:25:25] <Tobba> sadly, theres another hitch with it
[15:25:32] *** Quits: hdevalence (quassel@moz-D125A39F.home3.cgocable.net) (Client exited)
[15:25:32] *** Quits: dsyang (dsyang@moz-C45D48C5.hsd1.pa.comcast.net) (Ping timeout)
[15:25:34] <Tobba> it complains about undefined symbols even if they're never used
[15:25:40] <Tobba> (GNU ld doesnt)
[15:25:42] *** Joins: patpat (patpat@moz-1599AAE4.as13285.net)
[15:25:59] <sigma> you should be able to explicitly turn that of
[15:26:02] <sigma> off*
[15:26:57] <marc_> 1) build with --lib, 2) build a main.rs with -L set to output of #1, 3) build/xxx.rlib is not UTF-8 encoded
[15:27:14] <Tobba> uhhh
[15:27:19] <cmr> marc_: -L takes a directory
[15:28:12] *** Joins: aklt (aklt@83B8238.6BE5A349.B330AC0A.IP)
[15:28:32] <Tobba> now the big question is if the gnu flavor of lld supports link scripts
[15:28:47] <Tobba> I cant test right now because my code somehow got the idea that its being compiled for ARM and wont compile properly
[15:29:11] <bstrie> cmr: dammit linux!
[15:29:16] <bstrie> let's just drop support entirely
[15:29:41] *** Quits: heftig (heftig@moz-D746319F.unitymedia.biz) (Quit: Quitting)
[15:29:55] <Tobba> cmr: pretty sure lld runs on linux just fine actually?
[15:30:15] <cmr> Tobba: runs yes, but still doesn't really support dynamic linking all that well.
[15:30:36] <cmr> it exploded violently on rust when I last tested it (a few months ago?)
[15:30:36] <bstrie> cmr: is this anything that they're working on?
[15:30:42] <Tobba> isnt dynamic linking on linux pretty damn bad
[15:30:44] <bstrie> can we start using lld before 1.0??
[15:30:52] <cmr> Tobba: not necessarily
[15:30:53] *** Quits: pheleas_frog (Mibbit@CD762837.C20AE592.BA2F4534.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[15:30:54] <Tobba> like, really horrortastically shit
[15:30:57] <cmr> no
[15:31:00] <Tobba> or annoying to implement, at least
[15:31:06] <cmr> not really
[15:31:23] <cmr> you're thinking static linking
[15:31:34] <cmr> because glibc is a monster
[15:31:53] <Tobba> iirc dynamic linking does some weird shit
[15:31:59] <Tobba> where theres a section that tells it to load an interpreter
[15:32:03] <Tobba> which just performs black magkc
[15:32:07] <cmr> that's ELF in general
[15:32:15] <cmr> that's fine though
[15:32:34] *** Quits: kellogh (timkellogg@moz-704A74D.hsd1.co.comcast.net) (Quit: kellogh)
[15:32:46] <Tobba> sounds like a mess to implement though
[15:32:50] <cmr> eh
[15:32:57] <cmr> the "interpreter" is just the runtime dynamic linker
[15:33:11] <cmr> the kernel calls the "interpreter" like it does hashbang scripts
[15:33:13] <cmr> bstrie: maybe
[15:33:29] *** Joins: dsyang (dsyang@moz-C45D48C5.hsd1.pa.comcast.net)
[15:33:55] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[15:33:57] *** Joins: Scriptor (anonymous@moz-E06F46F0.corp.bitshelter.com)
[15:34:03] <Tobba> heh, glibc
[15:34:13] <Tobba> /bin/false on my box is 21k
[15:35:11] <sigma> yeh, some of the coreutils statically link a lot of symbols
[15:35:13] *** Quits: dave1629 (dave@55EE1F81.83BCE10.DDE5D3F6.IP) (Quit: dave1629)
[15:35:20] <Tobba> then again
[15:35:27] <Tobba> false has --version and --help
[15:35:28] *** Joins: johanh (uid17185@moz-A42E5B7B.irccloud.com)
[15:35:31] <Tobba> which is hilarious to me for some reason
[15:35:47] <sigma> then again on windows you probably have a couple of hundred copies of the same dlls ^^
[15:36:07] <cmr> or literally 15 versions of msvcrt
[15:36:17] <Tobba> well yeah, thats for a reason though
[15:36:25] *** Joins: kellogh (timkellogg@moz-704A74D.hsd1.co.comcast.net)
[15:36:30] *** Joins: dave1629 (dave@55EE1F81.83BCE10.DDE5D3F6.IP)
[15:36:31] <Tobba> its so the runtime can be updated without breaking compat
[15:36:34] <sigma> yeh, because there is no package manager
[15:36:49] *** Quits: xitology (xi@85437D54.5AFA3E4.CEDFC552.IP) (Quit: Ex-Chat)
[15:36:49] <Tobba> I dont see how that relates really
[15:37:14] <Tobba> or wait, you mean dumbass devs that include the runtime with the bins, obliterating the point of them?
[15:37:32] <sigma> depends if we're just talking about the c runtime or the "distribute everything you use with every install" policy
[15:38:32] <yuriks> figure I'll try asking again: anyone know if I can get rid of this error, and if it's a bug? https://gist.github.com/yuriks/8777775/8cfb31c203020028a2b1146a81fae655b9bdd2ae
[15:38:45] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[15:39:13] <yuriks> if I make posargs a mut variable and move lines 98-119 to inside a scope it compiles, but that makes me make posargs a mut var :P
[15:39:18] <cmr> yuriks: it's legitimate
[15:39:22] <cmr> yes, that is the solution
[15:39:35] <Tobba> isnt #[cfg(target_arch = "arm")] meant to exclude something if target_arch isnt arm
[15:40:03] <yuriks> I thought borrowing was supposed to have the minimum lifetime necessary?
[15:40:08] <cmr> Tobba: in other words only build it the arch is arm, yes.
[15:40:27] <Tobba> well its either getting the idea that this is arm or it isnt working
[15:40:29] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[15:40:30] <cmr> yuriks: that doesn't apply within scopes sometimes afaik
[15:40:42] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[15:41:38] *** Joins: FreeFull (freefull@moz-1883929A.as13285.net)
[15:42:26] *** Joins: pheleas_frog (Mibbit@5F4A07F1.DC78FBC3.BA2F4534.IP)
[15:42:31] *** Joins: fyolnish (fyolnish@moz-ADDABC0D.uqwimax.jp)
[15:43:58] <yuriks> cmr: hm, confusing.
[15:44:06] *** Joins: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net)
[15:44:25] <yuriks> I kept thinking that I was somehow leaking the reference in my computation, since that sometimes works
[15:45:09] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[15:45:22] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[15:45:32] *** Joins: skade (skade@541D1605.505237C9.CAE22B62.IP)
[15:45:53] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[15:46:01] *** Joins: gwty (gwtypc@3DBB567C.D38441B7.553D87E5.IP)
[15:47:02] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[15:48:35] *** Quits: fyolnish (fyolnish@moz-ADDABC0D.uqwimax.jp) (Ping timeout)
[15:48:45] <Tobba> "Error parsing linker script"
[15:48:49] <Tobba> very descriptive of you lld
[15:50:00] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[15:50:40] <cmr> bstrie: ok, looking at the git log the lld situations hasn't changed for the most part
[15:50:47] <cmr> Almost all the recent work is into pecoff support
[15:50:50] *** Quits: infynyxx (infynyxx@moz-6A908824.cit.cornell.edu) (Client exited)
[15:51:09] *** Quits: alex-abreu (alex@C08D9303.9289A342.80AB4F0.IP) (Ping timeout)
[15:51:22] *** Joins: alex-abreu (alex@C08D9303.9289A342.80AB4F0.IP)
[15:51:40] <cmr> I'll play with it again soon
[15:52:02] <Tobba> dynamic linking probably shouldent be too hard to fix, but yeah
[15:52:13] *** Quits: ricepuddin (graham@moz-B9899664.wlan.ic.ac.uk) (Ping timeout)
[15:52:21] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[15:52:56] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[15:53:27] *** Quits: kellogh (timkellogg@moz-704A74D.hsd1.co.comcast.net) (Quit: kellogh)
[15:58:08] *** Joins: japaric (japaric@DA9B0B44.F596884F.F29ED47E.IP)
[15:58:18] *** Joins: Blaze- (blaze@moz-9B9AB2F0.dhcp.inet.fi)
[15:59:35] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[16:00:02] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[16:01:48] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[16:02:29] *** pmoore|brb is now known as pmoore
[16:04:03] *** Joins: infynyxx (infynyxx@moz-6A908824.cit.cornell.edu)
[16:04:10] *** Quits: Zr40 (zr40@EE4BB9F5.926C319A.BE2F4011.IP) (Quit: leaving)
[16:04:14] *** Quits: sigma (sigma@moz-B2E77065.range86-184.btcentralplus.com) (Client exited)
[16:04:39] *** Joins: etrepum (sid763@moz-5F4AA75A.irccloud.com)
[16:05:19] *** Quits: alexherbo2 (alexherbo2@moz-FC10E83F.de) (Quit: WeeChat 0.4.2)
[16:05:22] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[16:05:29] *** Joins: steveklabnik (uid17044@moz-A42E5B7B.irccloud.com)
[16:06:11] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[16:06:20] <Tobba> hm, yep lld seems to have pretty poor support for ld link scripts
[16:06:23] <Tobba> as in none at all
[16:06:25] *** Joins: brendan (brendaneic@35E90EE3.B8B12C49.396B22AD.IP)
[16:06:29] <Tobba> cmr: any idea what the "core" flavor does?
[16:06:52] *** Joins: sigma (sigma@moz-B2E77065.range86-184.btcentralplus.com)
[16:07:36] <Tobba> it seems to be the most functional but again, no docs at all
[16:07:39] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Input/output error)
[16:07:50] *** Joins: kellogh (timkellogg@moz-704A74D.hsd1.co.comcast.net)
[16:08:32] *** Joins: sellout (Adium@5669757E.F4CAF5DC.C5F4E277.IP)
[16:08:37] *** Joins: ricepuddin (graham@moz-B9899664.wlan.ic.ac.uk)
[16:08:44] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[16:10:10] *** Joins: Jemaclus (jemaclus@moz-5A4BC30.hsd1.ca.comcast.net)
[16:10:28] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[16:11:52] *** Quits: Jemaclus (jemaclus@moz-5A4BC30.hsd1.ca.comcast.net) (Ping timeout)
[16:11:56] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[16:16:11] *** Quits: brendan (brendaneic@35E90EE3.B8B12C49.396B22AD.IP) (Quit: brendan)
[16:17:25] *** Joins: vertexclique (vertexcliq@D70C24E9.50C04591.6894ADF4.IP)
[16:17:34] *** Joins: fyolnish (fyolnish@moz-AE44E973.uqwimax.jp)
[16:17:35] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[16:17:54] *** Joins: nszceta (hax@moz-E458A7C0.pharm.pitt.edu)
[16:18:47] *** Joins: Jemaclus (jemaclus@moz-5A4BC30.hsd1.ca.comcast.net)
[16:19:16] *** Quits: fyolnish (fyolnish@moz-AE44E973.uqwimax.jp) (Ping timeout)
[16:20:37] *** Quits: Jemaclus (jemaclus@moz-5A4BC30.hsd1.ca.comcast.net) (Ping timeout)
[16:20:51] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[16:23:07] *** Quits: sokomo (sokomo@8293D4FC.93FF164A.408809BB.IP) (Quit: Read error: Connection reset by peer)
[16:24:55] *** Joins: sunfish (chatzilla@moz-8DE7F965.dsl.dynamic.sonic.net)
[16:25:58] *** Joins: pauls (pauls@moz-BFEF1F22.ccs.neu.edu)
[16:28:04] <pzol> does the compiler do optimization like auto-inlining certain function calls?
[16:28:29] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[16:28:30] *** Joins: takuin (takuin@moz-21A5F23D.ks.ks.cox.net)
[16:28:45] *** Quits: canhtak (canhtak@moz-8A625E1D.wl.t.ulaval.ca) (Quit: canhtak)
[16:29:23] *** Quits: takuin (takuin@moz-21A5F23D.ks.ks.cox.net) (Client exited)
[16:29:35] <Tari> yes, but it's not necessarily a contract
[16:29:44] <Tari> a lot of std is marked #[inline] though
[16:31:44] *** Joins: phil (phil@684D2576.37BA1B1C.20F09BA6.IP)
[16:32:35] <cmr> Tobba: nope
[16:32:41] <cmr> Tobba: isn't the lack of docs wonderful?
[16:32:46] <Tobba> yep
[16:32:53] <Tobba> it seems to be really basic command thing from reading the code
[16:33:04] <bstrie> pzol: within a crate, llvm is free to inline whatever it wants, based on its own heuristics
[16:33:26] <pzol> bstrie thx
[16:33:27] <cmr> pzol: Tari: #[inline] emits information for cross-crate inlining
[16:34:01] <bstrie> #[inline] still leaves the final decision up to llvm, but without that cross-crate inlining just can't happen at all
[16:34:01] *** Joins: kini (kini@moz-92AA953A.members.linode.com)
[16:34:40] *** Quits: luz (lucy@moz-CD18B14B.customer.cdi.no) (Input/output error)
[16:34:49] *** Joins: luz (lucy@moz-CD18B14B.customer.cdi.no)
[16:35:19] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[16:36:19] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[16:37:07] *** Quits: John-Galt (kris@moz-882434A3.hsd1.or.comcast.net) (Ping timeout)
[16:37:38] *** Joins: benbangert (bbangert@moz-B1FEE9C0.org)
[16:37:53] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Quit: Leaving.)
[16:37:58] *** Joins: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net)
[16:38:52] *** Joins: brendan (brendaneic@35E90EE3.B8B12C49.396B22AD.IP)
[16:39:02] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[16:40:03] *** Quits: Erik_ (Erik_S@moz-D2F74C7B.hlrn.qwest.net) (Ping timeout)
[16:40:43] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[16:40:53] *** Quits: ercxx (ercan@moz-88DD3A7E.dyn.optonline.net) (Ping timeout)
[16:43:26] *** Joins: fyolnish (fyolnish@moz-AE44E973.uqwimax.jp)
[16:44:03] *** Quits: claudiu_ (claudiu@CB447DD5.6B10AC3.E2F59BBC.IP) (Connection reset by peer)
[16:45:07] *** Quits: fyolnish (fyolnish@moz-AE44E973.uqwimax.jp) (Ping timeout)
[16:46:15] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[16:46:26] *** Quits: Kxepal (Miranda@moz-94E27C3F.pppoe.mtu-net.ru) (Connection reset by peer)
[16:47:43] *** Quits: brendan (brendaneic@35E90EE3.B8B12C49.396B22AD.IP) (Quit: brendan)
[16:47:58] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[16:49:07] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[16:49:07] *** ChanServ sets mode: +ao dherman dherman
[16:50:09] *** Joins: Kxepal (Miranda@moz-6CFAB9DE.pppoe.mtu-net.ru)
[16:50:48] *** Joins: xitology (xi@moz-8864BD7B.hsd1.il.comcast.net)
[16:51:34] *** Quits: ricepuddin (graham@moz-B9899664.wlan.ic.ac.uk) (Ping timeout)
[16:52:17] *** Joins: andrew-d_w (andrew-d_w@moz-A790E83C.nat.bb.dnainternet.fi)
[16:54:42] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[16:55:12] *** Quits: abaez (a__@moz-8D618AC3.nycmny.fios.verizon.net) (Quit: I haz left.)
[16:55:22] *** Joins: abaez (a__@moz-8D618AC3.nycmny.fios.verizon.net)
[16:56:12] *** Quits: nical (nico@87C1F78E.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[16:56:15] *** Joins: jeaye (jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[16:56:21] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[16:56:54] *** Joins: ercxx (ercan@moz-88DD3A7E.dyn.optonline.net)
[16:57:57] *** Quits: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp) (Client exited)
[16:58:18] *** Joins: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp)
[16:59:06] *** Quits: abaez (a__@moz-8D618AC3.nycmny.fios.verizon.net) (Quit: I haz left.)
[16:59:16] *** Joins: abaez (a__@moz-8D618AC3.nycmny.fios.verizon.net)
[16:59:59] *** Quits: ssira (ssira@moz-DC71C200.kanagawa.ocn.ne.jp) (Ping timeout)
[17:01:53] *** Quits: andrew-d_w (andrew-d_w@moz-A790E83C.nat.bb.dnainternet.fi) (Ping timeout)
[17:03:35] *** Quits: aklt (aklt@83B8238.6BE5A349.B330AC0A.IP) (Quit: leaving)
[17:03:39] <mark_edward> if a crate defines macros, are they exposed to crates that link to/use it?
[17:04:09] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[17:06:10] *** Quits: nszceta (hax@moz-E458A7C0.pharm.pitt.edu) (Input/output error)
[17:06:25] *** Joins: kngl (Adium@moz-18BD1C.ipv4.evonet.be)
[17:06:30] *** Joins: onelson (onelson@moz-DD666EC5.laika.com)
[17:06:43] *** Joins: heftig (heftig@moz-513A856E.dip0.t-ipconnect.de)
[17:07:24] *** Joins: james4k (james@moz-9BB5AE72.consolidated.net)
[17:08:48] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[17:09:22] *** Quits: pheleas_frog (Mibbit@5F4A07F1.DC78FBC3.BA2F4534.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[17:10:04] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[17:10:42] *** Joins: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net)
[17:10:43] *** Quits: gwty (gwtypc@3DBB567C.D38441B7.553D87E5.IP) (Connection reset by peer)
[17:11:25] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[17:12:41] *** Joins: brendan (brendaneic@35E90EE3.B8B12C49.396B22AD.IP)
[17:14:34] *** Joins: AlexMax (alexmax@moz-3D3F5603.funcrusher.net)
[17:15:25] *** Quits: brendan (brendaneic@35E90EE3.B8B12C49.396B22AD.IP) (Ping timeout)
[17:18:15] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[17:19:09] *** Quits: alex-abreu (alex@C08D9303.9289A342.80AB4F0.IP) (Ping timeout)
[17:20:51] *** Joins: saati (s@moz-11469F61.harmless.hu)
[17:20:57] *** Joins: Kruppe (user@moz-F462DD97.net.uwaterloo.ca)
[17:21:13] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: rcirc on GNU Emacs 24.3.1)
[17:21:59] *** Joins: ostbengt (textual@moz-2D34ADFA.dynamic.se.alltele.net)
[17:22:09] *** Quits: dave1629 (dave@55EE1F81.83BCE10.DDE5D3F6.IP) (Quit: dave1629)
[17:22:47] *** Quits: sigma (sigma@moz-B2E77065.range86-184.btcentralplus.com) (Client exited)
[17:22:53] *** Joins: sigma (sigma@moz-B2E77065.range86-184.btcentralplus.com)
[17:23:44] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[17:23:59] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[17:24:37] *** Quits: sigma (sigma@moz-B2E77065.range86-184.btcentralplus.com) (Client exited)
[17:25:00] *** Quits: jeaye (jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Ping timeout)
[17:25:00] *** Quits: bjustin (bjustin@moz-8FC28563.sierrabravo.net) (Connection reset by peer)
[17:25:11] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[17:25:19] *** Quits: Kruppe (user@moz-F462DD97.net.uwaterloo.ca) (Ping timeout)
[17:25:35] *** Joins: canhtak (canhtak@moz-8A625E1D.wl.t.ulaval.ca)
[17:25:39] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[17:25:58] *** Joins: bjustin (bjustin@moz-8FC28563.sierrabravo.net)
[17:27:01] *** Joins: c74d (c74d@moz-E2EAC718.oc.oc.cox.net)
[17:27:28] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[17:28:51] *** Joins: Ferreus (ferreus@moz-B4C76760.pools.arcor-ip.net)
[17:29:13] <mark_edward> are there any docs as to how compiling works now? i've noticed these new .rlib files, and i remember reading something about making sttatic libs by default or something?
[17:29:49] <acrichto> mark_edward: exporting macros is a relatively new feature (feature gated), and sadly I don't know of many docs for them right now
[17:30:07] <acrichto> mark_edward: you can find more info about linkage at http://static.rust-lang.org/doc/master/rust.html#linkage
[17:30:44] <mark_edward> acrichto, thank you. do you know if macros get exported from one crate to another?
[17:30:57] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Connection reset by peer)
[17:31:00] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Connection reset by peer)
[17:31:06] <acrichto> mark_edward: not automatically, it's a feature-gated thing right now as well
[17:31:22] <acrichto> see https://github.com/mozilla/rust/blob/master/src/libstd/macros.rs for some examples
[17:31:25] <mark_edward> ah okay. what is the directive for that?
[17:31:27] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[17:31:34] <mark_edward> thanks!
[17:31:37] <acrichto> (you need more than that though)
[17:32:06] <acrichto> you'll need #[feature(macro_rules)] and #[feature(phase)] I think it's called
[17:32:19] <acrichto> you'll then do '#[phase(syntax)] extern mod lib_with_macros;'
[17:32:24] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[17:32:41] *** Joins: jeaye (jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[17:33:00] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[17:34:42] *** Quits: infynyxx (infynyxx@moz-6A908824.cit.cornell.edu) (Client exited)
[17:35:55] *** Joins: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net)
[17:36:25] *** Quits: ostbengt (textual@moz-2D34ADFA.dynamic.se.alltele.net) (Quit: Textual IRC Client: www.textualapp.com)
[17:36:26] *** Joins: notmatt (notmatt@CC62CF7E.1E7FDFDB.A82DBDDB.IP)
[17:37:32] *** Quits: fabiand (fabiand@moz-51FA4D43.adsl.alicedsl.de) (Quit: Verlassend)
[17:39:02] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[17:39:21] *** Joins: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net)
[17:39:47] *** Joins: gwty (gwtypc@3DBB567C.D38441B7.553D87E5.IP)
[17:40:16] <Yurume> awww, nuget seems dead (for me)
[17:40:26] *** Joins: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[17:41:03] *** Quits: dmac (Adium@moz-94F55C3.hfc.comcastbusiness.net) (Ping timeout)
[17:42:08] *** Joins: nrc|afk (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[17:42:18] *** Quits: bytbox (s@moz-54E13927.washdc.fios.verizon.net) (Ping timeout)
[17:42:24] *** Joins: bytbox (s@moz-54E13927.washdc.fios.verizon.net)
[17:42:28] *** Joins: nszceta (hax@moz-E458A7C0.pharm.pitt.edu)
[17:44:22] *** Joins: RaFromBRC (RaFromBRC@moz-DB4A9C19.scl3.mozilla.com)
[17:44:40] <cmr> acrichto: no
[17:44:43] <cmr> #[macro_export]
[17:44:45] <cmr> does macro_rules macros
[17:44:50] <cmr> that's regular syntax extensions
[17:45:13] *** Joins: Kruppe (user@moz-253119B0.esg.uwaterloo.ca)
[17:45:17] <acrichto> cmr: I think you still need #[phase(syntax)] to pull in macro_rules macros from extern crates though
[17:45:17] *** Quits: sk (sk@9E6B574B.EB2AA036.2CAF0D3B.IP) (Quit: Leaving)
[17:45:40] <cmr> hm maybe
[17:46:56] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[17:47:47] *** Quits: sellout (Adium@5669757E.F4CAF5DC.C5F4E277.IP) (Quit: Leaving.)
[17:48:32] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[17:48:36] *** Joins: Jemaclus (Jemaclus@4EEAB704.5843BA5A.D4E4C7A5.IP)
[17:48:40] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[17:48:47] *** Joins: ricepuddin (graham@moz-7D68765A.cable.virginm.net)
[17:49:05] <mark_edward> also how can macros be successfully imported? like a macro i'm writing has `use foomod::bar::MyStruct` but if it's imported into another crate won't that path become invalid?
[17:51:41] <Jemaclus> ha. i finally got it. 
[17:54:05] *** Joins: Ms2ger (Ms2ger@moz-E2F08450.adsl-dyn.isp.belgacom.be)
[17:54:44] <Jemaclus> my lzw compression/decompression code works. weee
[17:54:45] *** Quits: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com) (Input/output error)
[17:55:40] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[17:55:41] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[17:56:20] *** Joins: sindork (sindork@ABFA98AB.DD47BB48.F7A44A1B.IP)
[17:57:28] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[17:57:37] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[17:58:00] *** Quits: Kruppe (user@moz-253119B0.esg.uwaterloo.ca) (Client exited)
[17:58:15] *** Joins: claudiu (claudiu@moz-FB94486E.thefacebook.com)
[17:59:07] *** Quits: nszceta (hax@moz-E458A7C0.pharm.pitt.edu) (Input/output error)
[17:59:36] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[18:01:26] *** Joins: Kruppe (user@moz-253119B0.esg.uwaterloo.ca)
[18:01:46] *** Joins: sellout (Adium@moz-B46AE510.hfc.comcastbusiness.net)
[18:01:59] *** Joins: jviereck (Adium@82889C84.3D50F6D0.7FD7B4A6.IP)
[18:02:04] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[18:02:05] *** ChanServ sets mode: +ao brson brson
[18:03:48] *** Quits: sunfish (chatzilla@moz-8DE7F965.dsl.dynamic.sonic.net) (Client exited)
[18:03:59] *** Joins: nielsle (nielsle@moz-C46DA772.boa.fiberby.dk)
[18:04:21] *** Quits: canhtak (canhtak@moz-8A625E1D.wl.t.ulaval.ca) (Quit: canhtak)
[18:04:50] *** Joins: canhtak (canhtak@moz-8A625E1D.wl.t.ulaval.ca)
[18:08:46] *** Joins: fyolnish (fyolnish@moz-CC86DC14.uqwimax.jp)
[18:09:48] *** Joins: aklt (aklt@moz-E66E9BCB.u.parknet.dk)
[18:10:02] *** Joins: sunfish (chatzilla@moz-8DE7F965.dsl.dynamic.sonic.net)
[18:10:27] *** Quits: fyolnish (fyolnish@moz-CC86DC14.uqwimax.jp) (Ping timeout)
[18:11:38] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[18:12:24] <marc_> What is the correct definition of a struct which has a field that is a reference?
[18:13:03] <marc_> Do you do something like: pub struct Foo<'a> { something: &'a Bar }
[18:13:11] *** Joins: takuin (takuin@moz-21A5F23D.ks.ks.cox.net)
[18:13:37] <eddyb> marc_: yupp
[18:13:57] <marc_> Thanks.. What does the constructor look like then?
[18:14:05] *** Joins: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[18:14:19] *** Quits: Jemaclus (Jemaclus@4EEAB704.5843BA5A.D4E4C7A5.IP) (Client exited)
[18:14:19] *** Quits: dsyang (dsyang@moz-C45D48C5.hsd1.pa.comcast.net) (Broken pipe)
[18:14:30] <marc_> I assume you have to write: impl Foo<'a>
[18:14:38] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[18:14:56] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[18:15:19] <marc_> But then I'm stuck :(
[18:15:47] <eddyb> marc_: impl<'a> Foo<'a>
[18:17:04] <marc_> Woah. What? Why?
[18:20:01] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[18:20:26] *** Joins: bvssvni (Mibbit@moz-CBD76C21.bb.online.no)
[18:21:19] *** Joins: infynyxx (infynyxx@moz-6A908824.cit.cornell.edu)
[18:21:39] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[18:22:05] <bstrie> marc_: you need somewhere to declare your type parameters and lifetimes. impls are the only place where you can't just stick them after the identifier, because there is no identifier. so they go after the keyword
[18:22:17] *** Joins: John-Galt (kris@moz-882434A3.hsd1.or.comcast.net)
[18:22:19] *** Joins: amir (amir@moz-467F7F30.cust.bluewin.ch)
[18:22:37] <marc_> Thanks. It made more sense once I thought about it.
[18:22:45] <bstrie> marc_: think of `impl<T,U> Foo<T> for Bar<U> {`
[18:24:32] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[18:25:08] *** Joins: Jemaclus (Jemaclus@4EEAB704.5843BA5A.D4E4C7A5.IP)
[18:25:10] *** Joins: nical (nico@87C1F78E.1DE10CA8.D8E68FF6.IP)
[18:27:28] *** Quits: infynyxx (infynyxx@moz-6A908824.cit.cornell.edu) (Ping timeout)
[18:27:55] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[18:28:06] *** Quits: diegoyam (quassel@FF9B1514.A4EC3D18.3A1EC144.IP) (Client exited)
[18:28:21] *** Joins: diegoyam (quassel@FF9B1514.A4EC3D18.3A1EC144.IP)
[18:28:33] <cmr> marc_: you probably don't want the 'a on the impl
[18:28:48] <cmr> you probably want fn new<'a>(x: &'a Bar) -> Foo<'a>
[18:29:28] <marc_> error: wrong number of lifetime parameters: expected 1 but found 0
[18:29:39] <marc_> If I omit that.
[18:29:46] <cmr> oh right my bad
[18:29:51] <cmr> you do need it on the impl
[18:29:58] <cmr> but you *also* probably want it on new
[18:30:14] <marc_> That doesn't work because then 'a is unused
[18:30:37] *** Joins: Zr40 (zr40@moz-CCFEAB92.adsl.xs4all.nl)
[18:31:42] *** jorendorff is now known as jorendorff_away
[18:31:45] *** Joins: eibwen (kvirc@moz-73F1BA16.dip0.t-ipconnect.de)
[18:32:17] <cmr> https://gist.github.com/cmr/8809507
[18:32:39] *** Joins: dangets (dangets@moz-E9E4A77B.cpe.cableone.net)
[18:33:15] *** Joins: dmac (Adium@moz-99EF2EE6.hfc.comcastbusiness.net)
[18:34:42] *** Joins: km (quassel@moz-777F24DE.kevinmehall.com)
[18:36:41] *** Quits: Jemaclus (Jemaclus@4EEAB704.5843BA5A.D4E4C7A5.IP) (Client exited)
[18:37:28] <eddyb> fn new(x: &'a Bar) -> Foo<'a> should work
[18:38:32] *** Quits: nielsle (nielsle@moz-C46DA772.boa.fiberby.dk) (Quit: Ex-Chat)
[18:38:58] *** Quits: Kruppe (user@moz-253119B0.esg.uwaterloo.ca) (Ping timeout)
[18:39:39] *** Joins: mr_pants (Mibbit@1A8E612B.ACD5979D.DD28FF8.IP)
[18:39:50] *** Joins: pyon (user@B454AC64.92B6FB33.1C8C8CE9.IP)
[18:40:20] *** Quits: mr_pants (Mibbit@1A8E612B.ACD5979D.DD28FF8.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[18:40:25] *** Joins: idkfa (idkfa@moz-F632033D.rightside.ru)
[18:42:30] <dangets> I got a quick unit testing question
[18:42:30] *** Joins: Hildar (Mibbit@moz-7F4621B6.cable.virginm.net)
[18:42:36] <dangets> if someone could please help
[18:42:42] <dangets> see code at https://gist.github.com/dangets/8809680
[18:42:58] <dangets> basically, how to run tests specified within an impl block
[18:44:11] *** Joins: dsyang (dsyang@5443A547.FCD0EB8C.689607DE.IP)
[18:44:26] <Zr40> dangets: move the test outside the impl
[18:44:40] <dangets> haha
[18:44:48] *** jorendorff_away is now known as jorendorff
[18:45:17] *** Quits: bvssvni (Mibbit@moz-CBD76C21.bb.online.no) (Quit: http://www.mibbit.com ajax IRC Client)
[18:45:45] <dangets> is that the suggested way?
[18:46:01] <dangets> I was thinking to keep the test and method close together
[18:46:17] <dangets> I suppose I could have an outer test function right?
[18:46:40] <Zr40> you could, but I don't think it's going to be any cleaner that way :)
[18:46:58] *** Quits: gwty (gwtypc@3DBB567C.D38441B7.553D87E5.IP) (Ping timeout)
[18:46:59] *** Joins: darthdeu (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP)
[18:47:02] *** Quits: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP) (No route to host)
[18:47:26] <pyon> Assume for a while Mutex and RWArc do not implement Clone. Instead we share them by putting them into Arcs. Would it be safe, then, to nest Mutexes and RWArcs?
[18:47:50] *** Joins: eevee (eevee@moz-8DEBFFC9.lv.lv.cox.net)
[18:47:52] <dangets> yeah, you're prob right - alright, thanks
[18:48:30] *** Quits: xitology (xi@moz-8864BD7B.hsd1.il.comcast.net) (Quit: Ex-Chat)
[18:48:41] <Hildar> Result<(),()> or bool for returning a pass/fail condition on initializing a library?
[18:49:00] *** Joins: gwty (gwtypc@CD7F90EE.DDD319A2.137C914F.IP)
[18:49:08] <mark_edward> Hildar, i'd suggest bool
[18:49:10] <Zr40> Hildar: third option: fail!()
[18:49:14] <mark_edward> would anyone be willing to critique and possibly give direction to a small library I'm writing?
[18:49:24] <Ms2ger> Or Option<()>
[18:49:36] *** Quits: skade (skade@541D1605.505237C9.CAE22B62.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[18:49:39] *** Joins: marianoguerra (marianogue@moz-A1DC1891.dip0.t-ipconnect.de)
[18:50:07] *** Quits: kngl (Adium@moz-18BD1C.ipv4.evonet.be) (Ping timeout)
[18:50:26] *** Joins: synackse (jordyd@moz-7DB9703E.seg96.ucf.edu)
[18:50:33] <o11c> Hildar: I'm somewhat fond of Result<(), ()>, since bool is ambiguous
[18:50:38] *** Joins: Jemaclus (Jemaclus@A084B2A7.5843BA5A.D4E4C7A5.IP)
[18:50:39] *** Quits: Jemaclus (Jemaclus@A084B2A7.5843BA5A.D4E4C7A5.IP) (Client exited)
[18:50:55] <Zr40> how would I normally install and use rust libraries written by others?
[18:50:59] *** Joins: Jemaclus (Jemaclus@4EEAB704.5843BA5A.D4E4C7A5.IP)
[18:51:44] <mark_edward> o11c, would you be willing to take a quick look at a small lib i'm writing and tell me what you think?
[18:51:45] <Hildar> o11c: Hmm, maybe I could do Result<(),~str> instead and put an error message in. At worst the user of my library just calls fail!(). At best they get possibly useful info.
[18:51:54] *** Joins: skade (skade@541D1605.505237C9.CAE22B62.IP)
[18:53:08] <o11c> mark_edward: it can't hurt for you to link it, I can't promise much though
[18:53:25] <mark_edward> o11c, okay! https://github.com/MarkJr94/diagrust
[18:53:37] *** Quits: skade (skade@541D1605.505237C9.CAE22B62.IP) (Ping timeout)
[18:53:49] <o11c> Zr40: nobody knows, since rustpkg died
[18:53:58] <o11c> there is #rustpkg-wg for ideas
[18:55:01] <Zr40> o11c: I mean, where would I place the resulting .rlib so extern mod can find it?
[18:55:04] *** Quits: rca (rcatolino@moz-314B78.adsl.proxad.net) (Ping timeout)
[18:55:04] *** Quits: lpy (lpy@51E8C831.DDD9F058.E99F7FDB.IP) (Client exited)
[18:55:16] <yuriks> Zr40: you pass -L path/to/directory to rustc
[18:55:39] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[18:55:48] <Zr40> yuriks: hm, I suppose that works
[18:56:33] <yuriks> I just git-extern the modules I need, then build and cp them to a lib/ dir (in my Makefile)
[18:56:45] *** Joins: bvssvni (Mibbit@moz-CBD76C21.bb.online.no)
[18:56:51] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Connection reset by peer)
[18:57:00] <yuriks> I think at the very least there should be some examples of using rustc with make, since it's kind of tricky
[18:57:08] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[18:57:20] <Zr40> yuriks: I've already got a decent Makefile for another rust project :)
[18:57:34] *** Joins: sk (sk@61A494B3.BA40E8A.AAC02D62.IP)
[18:58:01] *** Quits: oberstet (quassel@moz-6F36E3C9.dynamic.mnet-online.de) (Connection reset by peer)
[18:58:07] <Jemaclus> ok, so let's say I write a file using file.write_be_u32();
[18:58:07] *** Quits: io2 (io2@moz-7C3DDBE8.home.otenet.gr) (Ping timeout)
[18:58:16] <Jemaclus> how do I read those bytes back out again?
[18:58:30] <Jemaclus> i know I can do file.read_be_u32(), but I'm unclear on how to iterate over the bytes
[18:58:34] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Ping timeout)
[18:58:38] *** Quits: darthdeu (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP) (Ping timeout)
[18:59:30] *** Joins: rca (rcatolino@moz-BC04AA53.adsl.proxad.net)
[18:59:51] *** Quits: jviereck (Adium@82889C84.3D50F6D0.7FD7B4A6.IP) (Quit: Leaving.)
[19:00:05] <Zr40> Jemaclus: if you want to read until the end of the file, just continue calling read_be_u32() until it returns an IoError with kind=EndOfFile
[19:00:09] *** Quits: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: brendan)
[19:00:10] *** Joins: darthdeus (darthdeus@EEC5B4DB.3B96A244.4E88690D.IP)
[19:01:35] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[19:02:00] *** Quits: _Vi (vi@D7277DB6.6FF508C1.10C239DF.IP) (Ping timeout)
[19:02:06] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[19:03:10] *** Quits: pyon (user@B454AC64.92B6FB33.1C8C8CE9.IP) (Connection reset by peer)
[19:03:38] *** Quits: synackse (jordyd@moz-7DB9703E.seg96.ucf.edu) (Ping timeout)
[19:03:46] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[19:04:04] <idkfa> is it possible to build rust code for arm target using x86 host?
[19:04:42] <strcat> yes, rustc is a cross-compiler
[19:04:42] <Jemaclus> Zr40: ah, gotcha. That works. Thanks :)
[19:04:47] <strcat> but you have to build support for your target
[19:04:53] <dschatzberg> does rust have memory barriers?
[19:05:13] *** nrc|afk is now known as nrc
[19:05:38] <strcat> dschatzberg: it has an equivalent to C++11 atomics
[19:05:47] <idkfa> strcat: should rustc be recompiled to support this? i tried rustc shipped in arch repos to no success
[19:05:52] <strcat> so yes, there are barriers, but using them is usually an anti-pattern
[19:05:56] <dschatzberg> strcat: where are they?
[19:05:59] <dsyang> Why would I be getting this error message using a rustc I just compiled with make rustc-stage1? https://gist.github.com/anonymous/360f197ac60b95d79e7a
[19:06:00] <strcat> idkfa: the one in the arch repos only supports target == host
[19:06:16] <Jemaclus> Another dumb question: my original file is 507,105 bytes long. I compressed it down to 233,012 bytes. A little over 50%. Not bad. When I decompressed, it went up to 506,971. I somehow lost 134 bytes. But looking at my end result, it looks fine to me. Did I screw something up, or is that kind of thing normal?
[19:06:32] <Zr40> dsyang: the `do` keyword has been removed
[19:06:34] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Ping timeout)
[19:06:43] <strcat> Jemaclus: how are you measuring size?
[19:06:51] <Jemaclus> file size
[19:06:57] <strcat> Jemaclus: but how are you obtaining file size?
[19:07:00] <Jemaclus> ls -l
[19:07:01] <dsyang> Zr40: ah, so is it just spawn { ... } then?
[19:07:10] <strcat> Jemaclus: actually read it
[19:07:17] <Zr40> dsyang: spawn(proc(){ ... })
[19:07:23] <strcat> Jemaclus: if it's longer then you screwed up
[19:07:36] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Input/output error)
[19:07:36] <strcat> Jemaclus: afaik `stat` has an accurate size
[19:07:38] <strcat> dunno about ls
[19:07:51] <Jemaclus> ok
[19:07:56] <Jemaclus> I compressed a text file
[19:08:01] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[19:08:05] <Jemaclus> the end result is smaller than the original
[19:08:08] <Jemaclus> after deflating
[19:08:21] <Jemaclus> which surprised me, but it looks ok to me
[19:08:24] <Jemaclus> i'll investigate a bit further
[19:08:36] <Zr40> Jemaclus: wild guess: did the line endings change?
[19:08:51] *** Joins: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net)
[19:08:57] <Jemaclus> It shouldn't... but maybe that's it.
[19:09:08] <strcat> look at it in a hex editor
[19:09:11] <mark_edward> strcat, would you mind taking a quick look at a small library i'm writing and lettming me know what you think?
[19:09:24] <Jemaclus> I'm gonna compress an image and see if it screws it up
[19:09:40] <o11c> Jemaclus: um, if it's text, just diff?
[19:09:44] <o11c> if not text, cmp
[19:09:57] <dsyang> Zr40: Thanks! That worked
[19:10:20] <Jemaclus> yeah, diff shows that it removed a bunch of extra newlines
[19:10:25] <Jemaclus> so maybe Zr40 is right
[19:10:26] <Jemaclus> hmm
[19:11:02] *** Quits: Kynes (Kynes@moz-3DC6C6E7.mit.edu) (Quit: Leaving)
[19:11:04] *** Joins: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com)
[19:11:44] <Jemaclus> Hmm. Nuts.
[19:13:17] *** Joins: gimpf (gimpf@moz-9A3C6795.adsl.highway.telekom.at)
[19:15:32] <Jemaclus> Well, that's frustrating.
[19:15:42] <Jemaclus> OK, thanks for the tips. :)
[19:15:59] <Zr40> Jemaclus: did you implement your own algorithm?
[19:16:06] <strcat> mark_edward: okay
[19:16:06] <Jemaclus> yep
[19:16:09] <Jemaclus> :)
[19:16:23] <mark_edward> strcat, thanks! here it is https://github.com/MarkJr94/diagrust
[19:16:24] <Zr40> check for off by one errors :)
[19:16:25] *** Joins: tq (tq@moz-9FE9CCF4.a251.priv.bahnhof.se)
[19:16:29] *** Quits: kellogh (timkellogg@moz-704A74D.hsd1.co.comcast.net) (Quit: kellogh)
[19:17:07] <Jemaclus> off by one errors?
[19:17:09] *** Joins: alex-abreu (alex@C08D9303.9289A342.80AB4F0.IP)
[19:17:30] <Zr40> Jemaclus: a number being one too high or one too low
[19:17:36] <Hildar> Is it possible to link rust code to *shudder* C++? Or do I need to make bindings to the c bindings to the c++ library?
[19:17:48] <strcat> Hildar: C bindings
[19:17:52] <Jemaclus> well, if that was true, then over the course of my 500K worth of text, things would get way off by the end, right?
[19:18:02] <dsyang> Not sure if I screwed up but why is stage0/bin/rustc only executable as root?
[19:18:14] <Jemaclus> but looking at my decompressed copy of Paradise Lost, the ending looks exactly the way it should..
[19:18:19] <Zr40> dsyang: did you perhaps run `sudo make`?
[19:18:22] <strcat> dsyang: you build as root (bad idea) with a restrictive umask
[19:18:36] <sp3d> Jemaclus: do you use str anywhere or just [u8]?
[19:18:45] <Jemaclus> sp3d: u8
[19:18:50] <Jemaclus> er, [u8]
[19:18:52] <sp3d> hm
[19:19:01] *** Joins: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[19:19:16] <strcat> running make install as root is also not a great idea. the sane way is to run make install as non-root to build a pkg and then the pkg manager is the only thing running as root (and won't clobber anything, or leave behind a mess of untracked files)
[19:19:21] <Zr40> Jemaclus: does this only happen to newlines? Have you tried compressing and decompressing some test patterns?
[19:19:22] *** Joins: reima (Instantbir@moz-1C4B2644.dip0.t-ipconnect.de)
[19:19:31] *** Joins: geoffhill (geoffhill@moz-95FF7399.members.linode.com)
[19:19:33] <dsyang> Zr40: strcat: ah, probably. is there a way of fixing this without rebuilding everything (like, LLVM)?
[19:19:35] *** Joins: nuts (nuts@moz-69475367.w92-148.abo.wanadoo.fr)
[19:19:37] <nuts> Hi
[19:19:51] <strcat> dsyang: well, if you built LLVM as root then that's also a problem
[19:19:56] *** Quits: Ms2ger (Ms2ger@moz-E2F08450.adsl-dyn.isp.belgacom.be) (Quit: nn)
[19:20:03] <strcat> you could chown your_user: -R build_dir
[19:20:29] <nuts> I've update my rust compiler from master, and right now this kind of thing http://static.rust-lang.org/doc/master/extra/getopts/index.html (copy/past example) give me this error test.rs:1:1: 1:18 error: multiple matching crates for `extra`
[19:20:32] <dsyang> strcat: how would I check?
[19:20:38] <Hildar> Does the compiler "Know about" ~str? I just got an error message talking about a Result<(),*u8> where I believe it should be a Result<(),~str>.
[19:20:56] <strcat> Hildar: yes, ~str is a type
[19:20:59] <Jemaclus> Zr40: I literally got this working like 15 minutes ago, so I've only tested three different files. The text files *look* normal, but I tried a JPG and it's unreadable after decompression... so something's busted in there somewhere. Frustrating that it's such a small percentage of bytes... probably make debugging difficult
[19:21:01] <strcat> it's not the same size as *u8
[19:21:15] <strcat> (or the same type, but importantly it's not at all the same representation)
[19:21:30] <strcat> I *doubt* the compiler is making a mistake there
[19:22:26] <Hildar> strcat: Okey doke. Sounds pretty wrong then. I was returning a Err(*c_schar) by mistake, not an Err(~str), the error message reads: "expected `std::result::Result<(),*i8>` but found `std::result::Result<<generic #97>,&'static str>`"
[19:22:30] <Zr40> Jemaclus: as a start, you could try a sequence of increasing bytes, 0 to 255.
[19:22:59] <strcat> dsyang: find . -user root
[19:23:02] <Jemaclus> ok, i'll try that.
[19:23:06] <Hildar> strcat: Or is it me reading it backward?
[19:23:48] <strcat> Hildar: I don't know what code is causing the error so I can't say
[19:23:59] <eddyb> Hildar: the order may not be deterministic
[19:24:35] <eddyb> Hildar: that is, there may not be a specific order that is better than the opposite, for every given two mismatched types
[19:24:41] <dsyang> strcat: thanks! I think I did build everything as root. the chown seems to have worked though
[19:25:14] <Hildar> strcat eddyb: Yeah, I think it might be rustc seeing it backwards to how I see it in my head. I'd expect "type I wanted to return, but found x", but rustc says it the other way around.
[19:25:27] *** Joins: strcat1 (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[19:25:28] <eddyb> Hildar: it's much more generic than that
[19:25:37] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Connection reset by peer)
[19:25:49] *** Quits: andre (andre@CA528A4A.45A4338E.8EE27E6.IP) (Quit: leaving)
[19:26:08] <eddyb> Hildar: it's just two mismatched types, not mismatched return type or anything more specific
[19:26:09] *** Joins: Savago (Savago@D8B9C081.E820043D.D4C04133.IP)
[19:26:58] <Hildar> eddyb: Yeah. The compiler doesn't care about the context, it's just telling me "these types are wrong!", and I'm inferring too much >.>
[19:27:13] *** Quits: tiffany (kawaii@moz-FC0DB29D.dhcp.embarqhsd.net) (Input/output error)
[19:29:30] *** Joins: kellogh (timkellogg@moz-704A74D.hsd1.co.comcast.net)
[19:32:18] *** Quits: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net) (Client exited)
[19:32:43] *** Joins: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net)
[19:34:02] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[19:34:02] *** ChanServ sets mode: +o tjc
[19:34:15] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[19:34:21] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[19:34:26] *** strcat1 is now known as strcat
[19:34:28] *** Quits: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net) (Ping timeout)
[19:36:47] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[19:36:48] <strcat> hm
[19:37:28] <Jemaclus> Zr40: looks identical. maybe i have to go higher than 256..?
[19:37:35] *** Joins: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de)
[19:38:10] *** Quits: sunfish (chatzilla@moz-8DE7F965.dsl.dynamic.sonic.net) (Ping timeout)
[19:38:31] *** Joins: synackse (jordyd@moz-1DEC53D7.seg131.ucf.edu)
[19:38:35] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[19:39:36] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[19:43:02] <Zr40> Jemaclus: bytes only go up to 255 :)
[19:43:18] <Zr40> Jemaclus: try some more patterns. Perhaps one of them will trigger the bug
[19:43:39] <mark_edward> strcat, do you have any thoughts/
[19:44:07] <strcat> mark_edward: dunno :), not particularly insightful today
[19:44:42] <nuts> Anyone know why when I use 'extern mod extra' it never build now
[19:44:43] *** Joins: jasom (aidenn@moz-5F6FC7B3.sb.sd.cox.net)
[19:44:49] <nuts> test.rs:1:1: 1:18 error: multiple matching crates for `extra`
[19:44:52] <nuts> ?
[19:44:57] <mark_edward> strcat, but you're always so insightful! i bet libnative was 50% due to your agitating! does it seem useable? are there any features you think would help it?
[19:45:27] <strcat> well I think extra::json is probably the wrong way to approach json in rust
[19:45:40] *** Joins: Zylinski (karl@moz-58495553.static.spa.siw.siwnet.net)
[19:45:55] <strcat> when you're dealing with json, you're aware of some structure it has
[19:46:00] <strcat> otherwise you can't be doing anything sanely
[19:46:20] *** Joins: Kruppe (user@moz-253119B0.esg.uwaterloo.ca)
[19:46:28] <strcat> turning it into a tree of ADTs might make sense in some cases, but I doubt most json is encoding a recursive tree structure
[19:46:50] <strcat> so yes, in some cases you may want that
[19:47:06] <strcat> but it doesn't work when you don't want to or can't load the whole thing into memory
[19:47:30] <strcat> it's slow in the general case, where it's not a recursive tree of different types
[19:47:40] <strcat> and too verbose
[19:47:53] <mark_edward> hm that makes  a lot of sense. are there any json libraries you like?
[19:48:24] <strcat> http://zserge.bitbucket.org/jsmn.html ;)
[19:48:38] <o11c> I'm planning on writing a cson library using yacc soon ...
[19:48:46] <strcat> I think as soon as the json library it allocating arrays and hash tables for you, it has made too many choices
[19:48:52] *** Joins: vgeddes (vincent.ge@moz-D8D4FE4D.dsl.mweb.co.za)
[19:49:07] <strcat> yes, you do want a tree-based parser in some cases reading in the whole file and doing that
[19:49:20] <strcat> but it's really not easier to use when you have some very specific structure you're looking for
[19:49:25] <strcat> same with xml
[19:50:05] <strcat> lets say you have the 38GiB xml file corresponding to the latest version of every non-talk/meta wikipedia article - or maybe you even have a bigger one
[19:50:11] <strcat> there's *no way* you can use a tree-based parser
[19:50:24] <strcat> even if you had enough memory, it'd take ages to read it all into a tree
[19:50:40] *** Quits: dsyang (dsyang@5443A547.FCD0EB8C.689607DE.IP) (Client exited)
[19:50:43] <Tari> in the known-small-structure case, a robust set of macros would be nice
[19:50:51] <strcat> or lets say you have some little json response from an API
[19:50:57] <strcat> it has a very well-defined, known structure
[19:51:00] <strcat> the tree way is a huge waste
[19:51:04] <strcat> too verbose
[19:51:15] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[19:51:22] <Tari> define a schema via the macro, you get a type with the data expected
[19:51:33] <strcat> imo, the stdlib should provide a streaming parser like http://zserge.bitbucket.org/jsmn.html
[19:51:47] <strcat> ideally without memory allocation (with xml that may not be possible, insane namespaces/dtd stuff blah blah)
[19:52:01] <mark_edward> Tari, i have something almost like that, but sad because no nesting https://github.com/MarkJr94/diagrust/blob/master/macros.rs#L46-L100
[19:52:05] <strcat> and then various abstractions can be built on top of it in third party libs
[19:52:07] <o11c> no mallocation means you have to unescape strings yourself
[19:52:24] <strcat> o11c: not necessary
[19:52:28] <strcat> o11c: iterators!
[19:52:30] <strcat> ;p
[19:52:49] *** Joins: sigma (sigma@moz-B2E77065.range86-184.btcentralplus.com)
[19:53:04] <Tari> one could certainly build struct deserialization on top of a streaming parser
[19:53:18] <Tari> it's a more useful primitive in general, I think
[19:53:23] <strcat> yep, that's my ideal json library - a streaming parser, and then various abstraction choices on top
[19:53:23] <Tari> (streaming, that is)
[19:53:33] <sp3d> http://aosabook.org/en/posa/parsing-xml-at-the-speed-of-light.html
[19:53:39] *** Joins: photex (photex@399640B9.24E301D6.9510F13D.IP)
[19:53:39] <sp3d> kinda relevant?
[19:53:50] <strcat> so you can pick the best tool for the job, or if the tools don't fit the job you can use the streaming parser directly
[19:54:05] <strcat> and above all, it should take &[u8] as input
[19:54:20] <strcat> that way.... you can mmap some enormous file
[19:54:37] <strcat> iirc, expat and libxml2 use a 32-bit size
[19:54:37] *** Quits: sigma (sigma@moz-B2E77065.range86-184.btcentralplus.com) (Ping timeout)
[19:54:50] <strcat> makes me sad
[19:55:19] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[19:55:19] <strcat> (well, I guess it would have .feed(slice))
[19:55:22] <mark_edward> strcat, would bindings to jsmn or a rust port be useful?
[19:55:43] *** Joins: lpy (lpy@51E8C831.DDD9F058.E99F7FDB.IP)
[19:55:48] <strcat> mark_edward: well, it's 200 lines of code so probably a port ;)
[19:56:23] *** Joins: orospakr (orospakr@moz-4514BEF2.cpe.teksavvy.com)
[19:56:37] *** Joins: trinary (Adium@moz-D78CD0D5.hsd1.co.comcast.net)
[19:56:52] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[19:56:52] *** ChanServ sets mode: +ao brson brson
[19:57:04] *** Quits: Hildar (Mibbit@moz-7F4621B6.cable.virginm.net) (Quit: http://www.mibbit.com ajax IRC Client)
[19:57:22] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Quit: Leaving.)
[19:57:36] <mark_edward> strcat, i got dibs, don't do it before me :-P 
[19:57:49] *** Quits: lpy (lpy@51E8C831.DDD9F058.E99F7FDB.IP) (Ping timeout)
[19:57:56] * strcat hasn't been doing much rust stuff lately anyway
[19:58:32] <Zr40> gah, both rust-postgres and rust-http don't build against rust master :(
[19:58:49] <strcat> somewhat feel like writing a non-lossy layer of LLVM IR that's an easier compilation target and has pluggable rewrite rules
[19:58:50] *** Joins: glaebhoerl (glaebhoerl@3391DE98.E9231B2.A0179ACD.IP)
[19:59:44] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: back later)
[19:59:49] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[20:02:01] *** Quits: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net) (Ping timeout)
[20:02:40] *** Joins: eternaleye (eternaleye@moz-5668AFCB.hsd1.wa.comcast.net)
[20:03:15] <glaebhoerl> yo. I downloaded a 0.9 snapshot and any time I try to use a struct or enum in a static, no matter how trivial, rustc complains either "Unsupported constant expr" or "Non-constant path in constant expr"
[20:03:23] <glaebhoerl> but as far as I've been able to figure out this is supposed to work
[20:03:27] <glaebhoerl> what am I missing?
[20:03:58] <FliPPeh> rusti: struct Foo { x: int; }; let foo = Foo{32}
[20:04:04] <FliPPeh> rusti :(
[20:04:39] *** Joins: chromatic (chromatic@moz-28CBC7F4.hsd1.or.comcast.net)
[20:05:25] *** Joins: hjr3_ (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[20:05:33] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Connection reset by peer)
[20:06:34] *** Quits: hjr3_ (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Client exited)
[20:06:46] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[20:06:46] *** ChanServ sets mode: +ao pcwalton pcwalton
[20:06:55] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[20:07:05] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[20:07:11] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[20:07:11] *** ChanServ sets mode: +ao dherman dherman
[20:07:16] <pcwalton> acrichto: idea: have you tried inlining the fast path for the mutex?
[20:07:17] <pcwalton> and then bailing to a function call for the slow path
[20:07:17] *** Quits: kellogh (timkellogg@moz-704A74D.hsd1.co.comcast.net) (Quit: kellogh)
[20:07:19] <pcwalton> I wonder if you could squeeze out a few more % of performance that way
[20:07:24] <pcwalton> it'd be an optimization that pthreads don't do
[20:08:13] <acrichto> pcwalton: I hadn't tried that, no
[20:08:22] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[20:08:29] <acrichto> pcwalton: but I was seeing function calls make a fair bit of difference, so that may actually make a big difference
[20:08:37] *** Joins: kalenedrael (wat@moz-DBB6BE74.zagar.us)
[20:08:45] <pcwalton> yeah when you're benchmarking mutexes at that level every insn hurts
[20:09:19] <pcwalton> it'd be really awesome for the asm for "lock a mutex" to be a CAS right there in the code
[20:09:21] *** Joins: fyolnish (fyolnish@moz-E5F37BA4.uqwimax.jp)
[20:09:30] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[20:10:35] *** Joins: sigma (sigma@C91C7F36.70518F41.9D18269F.IP)
[20:10:53] *** Joins: moostik (Icedove@moz-9CCE699F.w81-249.abo.wanadoo.fr)
[20:11:02] *** Quits: fyolnish (fyolnish@moz-E5F37BA4.uqwimax.jp) (Ping timeout)
[20:11:17] *** Quits: bytbox (s@moz-54E13927.washdc.fios.verizon.net) (Ping timeout)
[20:12:01] *** Quits: Zr40 (zr40@moz-CCFEAB92.adsl.xs4all.nl) (Quit: leaving)
[20:12:07] *** Joins: kvanb (kvanb@moz-3AC18234.lnse3.lon.bigpond.net.au)
[20:12:57] *** Quits: Savago (Savago@D8B9C081.E820043D.D4C04133.IP) (Ping timeout)
[20:13:14] *** Quits: moostik (Icedove@moz-9CCE699F.w81-249.abo.wanadoo.fr) (Client exited)
[20:13:45] *** Joins: moostik (Icedove@moz-9CCE699F.w81-249.abo.wanadoo.fr)
[20:13:52] *** Joins: kellogh (timkellogg@moz-704A74D.hsd1.co.comcast.net)
[20:16:12] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[20:16:20] <Jemaclus> ah, I think it's throwing away the last codeword during decompression...
[20:17:05] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[20:18:30] *** Joins: xitology (xi@85437D54.5AFA3E4.CEDFC552.IP)
[20:20:44] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[20:22:40] *** Joins: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net)
[20:23:35] *** Quits: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: brendan)
[20:25:10] *** Quits: Matthias247 (Miranda@moz-BDD35EC0.hsi5.kabel-badenwuerttemberg.de) (Connection reset by peer)
[20:26:32] *** Joins: _Vi (vi@D7277DB6.6FF508C1.10C239DF.IP)
[20:29:11] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[20:29:42] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[20:30:28] *** Joins: sunfish (chatzilla@moz-BBE3ABD.mv.mozilla.com)
[20:31:32] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Quit: Leaving.)
[20:31:58] *** Joins: jensnockert (jensnocker@moz-988C9930.e0f8471ae7fa.afb.bredband2.com)
[20:32:37] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[20:33:18] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[20:33:19] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[20:36:48] *** Joins: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net)
[20:37:06] *** Quits: vertexclique (vertexcliq@D70C24E9.50C04591.6894ADF4.IP) (Ping timeout)
[20:37:09] *** Joins: mrengstad (Mibbit@moz-58D696C9.com)
[20:37:57] *** Quits: synackse (jordyd@moz-1DEC53D7.seg131.ucf.edu) (Ping timeout)
[20:38:16] *** Joins: dsyang (dsyang@5443A547.FCD0EB8C.689607DE.IP)
[20:39:18] *** Quits: Jemaclus (Jemaclus@4EEAB704.5843BA5A.D4E4C7A5.IP) (Client exited)
[20:40:44] <doomlord_> is anything like 'multiparameter typeclasses' on the horizon, or would there be some special case for operator overloading; currentl if you want to overload on multiple parameters you have some hoops to jump through
[20:40:56] <doomlord_> i dont know what it would look like in function signatures
[20:41:09] <marc_> Halp please.. trying to impl a struct which holds a reference to something with a bounded lifetime
[20:41:12] <marc_> https://www.irccloud.com/pastebin/CoYkBmJd
[20:41:22] *** Quits: sigma (sigma@C91C7F36.70518F41.9D18269F.IP) (Ping timeout)
[20:41:25] <marc_> error: value may contain references; add `'static` bound
[20:44:35] <jasom> hmm; adding a second variable with identical lifetimes causes a "cannot infer an appropriate lifetime" error
[20:44:49] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[20:46:30] *** Joins: synackse (jordyd@moz-1DEC53D7.seg131.ucf.edu)
[20:46:37] *** Joins: Jemaclus (Jemaclus@4EEAB704.5843BA5A.D4E4C7A5.IP)
[20:48:07] *** Joins: mgottschlag (quassel@moz-D9E207E7.cust.bluewin.ch)
[20:48:27] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[20:48:34] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[20:48:47] <kmc> doomlord_: you can have type parameters on traits, e.g.  trait Foo<T> { }
[20:49:01] <kmc> that is somewhat like MPTC but yeah, it doesn't always work out how you'd like
[20:49:28] <doomlord_> whats the current situation with operator overloading
[20:50:03] <doomlord_> i think last time i looked into this you basically had to do something like 'double dispatch' (i realise it just compiles into a single call)
[20:50:30] <doomlord_> eg if you want to overload "*" for vector * vector, vector*matrix,  vector* scalar etc
[20:50:45] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[20:50:55] *** Joins: vertexclique (vertexcliq@69CFE6CE.16F818C8.6894ADF4.IP)
[20:50:57] <kmc> http://static.rust-lang.org/doc/master/std/ops/trait.Add.html
[20:51:06] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[20:51:07] <kmc> so it's general enough
[20:51:13] <kmc> but maybe it fails to infer types sometimes
[20:51:16] <doomlord_> [i can work with plain functions for that sort of thing, i have done vector maths in plain c of course :) ]
[20:51:46] <kmc> there's nothing like GHC's "functional dependencies" to say that the result type is completely determined by the argument types
[20:51:53] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[20:52:26] <eibwen> is there a reference for contributors?
[20:52:36] <kmc> for what kind of thing?
[20:53:03] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[20:53:06] <kmc> there's https://github.com/mozilla/rust/wiki/Notes
[20:53:09] <doomlord_> vector maths.. i've done 3d maths libraries in plain C of course, its not a disaster if operator overloading doesn't work
[20:53:20] <eibwen> for people who'd like to contribute for the first time :)
[20:53:44] <eibwen> ah, there's a link in notes
[20:53:47] <kmc> eibwen: take a look at https://github.com/mozilla/rust/wiki/Note-guide-for-new-contributors then
[20:54:29] <eibwen> thanks
[20:54:32] <jasom> this: https://gist.github.com/jasom/49223746c29b2852d23d (very slightly modified from trie.rs) compiles but if you uncomment line 16, it fails to compile.  Any idea why?
[20:54:54] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[20:56:33] *** Joins: lpy (lpy@51E8C831.DDD9F058.E99F7FDB.IP)
[20:57:11] <jasom> Here's a full test-case: http://bpaste.net/show/175472/; this time it's line 429 to uncomment
[20:58:06] *** Joins: Eridius (kevin@moz-533B0DB4.us)
[20:58:18] <Eridius> how strange, irssi left #rust without telling me
[20:58:26] *** Quits: lpy (lpy@51E8C831.DDD9F058.E99F7FDB.IP) (Ping timeout)
[20:58:59] *** Quits: alex-abreu (alex@C08D9303.9289A342.80AB4F0.IP) (Ping timeout)
[21:00:09] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[21:01:10] <Tobba> #[cfg(target_arch = "arm")] #[path="arch/arm/stateaccess.rs"] #[macro_escape] pub mod stateaccess;
[21:01:13] <Tobba> whats wrong with this
[21:01:14] *** Quits: kvanb (kvanb@moz-3AC18234.lnse3.lon.bigpond.net.au) (Quit: kvanb)
[21:01:25] <Tobba> its compiling the file even if the target isnt arm
[21:01:58] <eddyb> Tobba: it will analyze but not compile the file
[21:02:12] <Tobba> that explains things
[21:02:14] <Tobba> why would it do that
[21:02:34] <eddyb> Tobba: well, "analyze" is a bit too strong. it will load the file and parse it, run feature gates and whatnot, before stripping it from the AST
[21:02:50] *** Joins: olivernn (olivernigh@moz-7CE0F8.access.mtnbusiness.co.za)
[21:03:04] <eddyb> Tobba: because cfg is a pass and not part of the parsing. though it could be, to prevent such mishaps
[21:03:05] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[21:03:34] <Tobba> eh
[21:03:37] <Tobba> it was just confusing
[21:03:50] <Tobba> its probably a good thing though to prevent blatantly broken code all over
[21:03:55] <Tobba> then again might not be good for compile times
[21:04:17] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[21:04:25] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[21:07:48] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Connection reset by peer)
[21:08:15] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[21:08:27] *** Quits: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Ping timeout)
[21:08:31] *** Quits: Kxepal (Miranda@moz-6CFAB9DE.pppoe.mtu-net.ru) (Quit: Kxepal)
[21:08:49] *** Joins: Kxepal (Miranda@moz-6CFAB9DE.pppoe.mtu-net.ru)
[21:08:56] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Quit: Leaving.)
[21:09:29] *** Joins: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[21:09:45] *** Quits: jensnockert (jensnocker@moz-988C9930.e0f8471ae7fa.afb.bredband2.com) (Connection reset by peer)
[21:09:47] *** Joins: fyolnish (fyolnish@moz-36592C56.uqwimax.jp)
[21:09:52] *** Joins: mr_pants (Mibbit@moz-75833D22.net.upcbroadband.cz)
[21:10:19] *** Joins: jensnockert (jensnocker@moz-988C9930.e0f8471ae7fa.afb.bredband2.com)
[21:11:02] <mr_pants> Would be Rust suitable for writing a compiler - lexer, parser, semantic analyzer and code generation?
[21:11:27] <o11c> mr_pants: yes, it is especially suitable
[21:11:31] *** Quits: fyolnish (fyolnish@moz-36592C56.uqwimax.jp) (Ping timeout)
[21:11:51] *** Quits: olivernn (olivernigh@moz-7CE0F8.access.mtnbusiness.co.za) (Ping timeout)
[21:12:05] <o11c> mr_pants: well, I'm not sure how well it talks to LLVM for codegen
[21:12:29] *** Quits: yuriks (yuriks@6A0B4D7B.A9CCF389.F3163DCD.IP) (Ping timeout)
[21:12:40] <mr_pants> o11c: It allows to call C code, right? So I can use that for codegen
[21:13:28] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[21:13:30] *** Joins: infynyxx (infynyxx@moz-127C9080.cit.cornell.edu)
[21:14:05] <o11c> sure, you *can*, but LLVM is hard to use from any language but C++
[21:14:11] *** Quits: synackse (jordyd@moz-1DEC53D7.seg131.ucf.edu) (Ping timeout)
[21:14:13] <o11c> rustc has some nastiness
[21:14:27] <o11c> but, I'm not intimately familiar with it
[21:14:35] <o11c> someone else probably knows better
[21:14:40] <mr_pants> oh, okay
[21:14:56] <mr_pants> I have just discovered Rust and I have an idea for toy language so I am looking for solutions
[21:15:14] <steveklabnik> someone had ragel bindings at some point
[21:16:45] *** Quits: jackneill (jackneill@moz-2A74CDA9.pool.digikabel.hu) (Ping timeout)
[21:17:23] *** Joins: yuriks (yuriks@541FB14B.E4E1C694.748B6D8D.IP)
[21:17:51] <jasom> steveklabnik: I'm sure that doesn't work anymore if it's not maintained
[21:18:05] <steveklabnik> yeah, i'm not sure what its status is
[21:18:15] * jasom loves himself some ragel
[21:19:49] *** Quits: nical (nico@87C1F78E.1DE10CA8.D8E68FF6.IP) (Ping timeout)
[21:20:54] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[21:21:04] *** Joins: themgt (themgt@moz-83F07CDA.cm.vtr.net)
[21:22:11] *** Quits: eddyb (eddy@832D2DE5.66315F97.FB866788.IP) (Ping timeout)
[21:23:23] <bstrie> ragel with cream cheese
[21:23:31] *** Joins: dogurness (dogurness@moz-FA042A88.nyc.res.rr.com)
[21:23:33] *** Joins: alex-abreu (alex@C08D9303.9289A342.80AB4F0.IP)
[21:23:57] <bstrie> mr_pants: anyone who tries to write a compiler in rust should be institutionalized
[21:24:20] <bstrie> it is the mark of a completely unhinged individual
[21:24:38] <jasom> bstrie: isn't rustc written in rust?
[21:24:42] <Tobba> yes it is
[21:24:51] *** Quits: dsyang (dsyang@5443A547.FCD0EB8C.689607DE.IP) (Client exited)
[21:25:54] *** Quits: doener (doener@moz-C68F600D.unity-media.net) (Quit: leaving)
[21:26:37] *** Quits: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de) (Quit: Leaving.)
[21:27:05] *** Quits: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP) (Ping timeout)
[21:28:32] *** Joins: hoverbear (hoverbear@moz-6819B92F.wireless.uvic.ca)
[21:29:06] <mark_edward> can you have multiple immutable slices to the same vector?
[21:29:06] *** Joins: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP)
[21:29:49] *** Joins: synackse (jordyd@9E6CE43B.4B53A366.BB6D8913.IP)
[21:29:59] *** Joins: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP)
[21:30:49] *** Joins: dherman (dherman@F5DBC48.1E9D22A9.3A1BB2FB.IP)
[21:30:49] *** ChanServ sets mode: +ao dherman dherman
[21:30:56] <kmc> mark_edward: yes
[21:31:08] *** Quits: geoffhill (geoffhill@moz-95FF7399.members.linode.com) (Ping timeout)
[21:32:02] *** Quits: moostik (Icedove@moz-9CCE699F.w81-249.abo.wanadoo.fr) (Ping timeout)
[21:32:04] <mark_edward> thanks
[21:32:20] *** Joins: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[21:32:31] <mark_edward> how many? does it slow down the compiler a lot? what if you had dozens of slices of the same vec?
[21:32:52] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[21:34:02] *** Quits: jensnockert (jensnocker@moz-988C9930.e0f8471ae7fa.afb.bredband2.com) (Input/output error)
[21:34:14] *** Joins: dsyang (dsyang@5443A547.FCD0EB8C.689607DE.IP)
[21:34:27] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[21:34:27] *** ChanServ sets mode: +ao pcwalton pcwalton
[21:34:32] *** Joins: jensnockert (jensnocker@moz-988C9930.e0f8471ae7fa.afb.bredband2.com)
[21:34:44] *** Quits: Kruppe (user@moz-253119B0.esg.uwaterloo.ca) (Ping timeout)
[21:34:45] *** Quits: bvssvni (Mibbit@moz-CBD76C21.bb.online.no) (Quit: http://www.mibbit.com ajax IRC Client)
[21:36:07] <kmc> mark_edward: a slice is represented as just a pointer and a length, so there's not much runtime overhead to creating them
[21:36:15] <kmc> i'm not sure about compile time but don't see why it would be an issue
[21:36:20] *** Quits: jensnockert (jensnocker@moz-988C9930.e0f8471ae7fa.afb.bredband2.com) (Ping timeout)
[21:36:36] <mark_edward> kmc, know i meant like for the compiler, calculating lifetimes and stuff. isn't borrowck expensive?
[21:37:05] <kmc> perhaps; i don't know really
[21:37:17] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[21:37:17] *** ChanServ sets mode: +o tjc
[21:39:03] *** Quits: dsyang (dsyang@5443A547.FCD0EB8C.689607DE.IP) (Client exited)
[21:39:21] <mr_pants> bstrie: Why?
[21:39:37] *** Joins: arturo (Thunderbir@moz-E83B14F0.superkabel.de)
[21:39:48] <pcwalton> borrowck isn't much more expensive than any of the analysis passes that LLVM performs
[21:39:52] <pcwalton> if any
[21:39:57] <pcwalton> it's certainly less expensive than typechecking
[21:40:42] *** Joins: alexherbo2 (alexherbo2@moz-33868228.w90-35.abo.wanadoo.fr)
[21:41:12] *** Joins: nszceta (hax@moz-E458A7C0.pharm.pitt.edu)
[21:42:06] *** Quits: nuts (nuts@moz-69475367.w92-148.abo.wanadoo.fr) (Ping timeout)
[21:42:28] <dschatzberg> is there any way to restrict imports to only those which have no dependency on runtime functions?
[21:42:33] *** Quits: japaric (japaric@DA9B0B44.F596884F.F29ED47E.IP) (Ping timeout)
[21:43:05] *** Quits: dogurness (dogurness@moz-FA042A88.nyc.res.rr.com) (Quit: dogurness)
[21:43:24] *** Quits: dbaupp (Thunderbir@moz-25BBAF91.lns20.syd6.internode.on.net) (Ping timeout)
[21:44:57] *** Quits: alex-abreu (alex@C08D9303.9289A342.80AB4F0.IP) (Client exited)
[21:44:58] <Jemaclus> I have no idea what's wrong with this. Hmm.
[21:45:33] *** Joins: japaric (japaric@FDCA8EB5.4F37C8B4.BFC118EE.IP)
[21:46:30] *** Joins: skade (skade@moz-B73EE4D5.pools.arcor-ip.net)
[21:46:40] *** Joins: askalski (akuda@2BA4E5A7.CC7751E8.6712E96B.IP)
[21:49:45] *** Quits: sbalmos (quassel@CA5677B6.576D0C1.ED2EFC1B.IP) (Ping timeout)
[21:50:55] <steveklabnik> dschatzberg: if you compile with https://github.com/thestinger/rust-core you won't have one, so it will blow up if you try to import code that depends on the RT
[21:50:58] <steveklabnik> i'd imagine
[21:51:26] <steveklabnik> wellllll maybe not
[21:51:57] <steveklabnik> isn't there some sort of 'no runtime' flag? #[no_std]; ?
[21:52:38] <dschatzberg> I thought no_std meant don't automatically import the std crate
[21:52:38] *** Quits: orospakr (orospakr@moz-4514BEF2.cpe.teksavvy.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[21:52:41] *** Joins: dsyang (dsyang@moz-8EBF0366.wv.cc.cmu.edu)
[21:52:42] *** Joins: orospakr (orospakr@moz-4514BEF2.cpe.teksavvy.com)
[21:52:54] *** Joins: mib_ypig0h (Mibbit@9C0271F4.BC2EF01F.A16D61D0.IP)
[21:52:55] *** Quits: dsyang (dsyang@moz-8EBF0366.wv.cc.cmu.edu) (Broken pipe)
[21:53:05] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[21:53:40] *** Quits: mib_ypig0h (Mibbit@9C0271F4.BC2EF01F.A16D61D0.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[21:54:23] *** Quits: reima (Instantbir@moz-1C4B2644.dip0.t-ipconnect.de) (Quit: Leaving.)
[21:54:25] *** Quits: calvinmetcalf (cmetcalf@moz-7BEE0DCC.hfc.comcastbusiness.net) (Ping timeout)
[21:55:50] <brson> bstrie: do we downvote or report rust-the-game posts to r/rust?
[21:56:07] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Ping timeout)
[21:56:31] *** Joins: sbalmos (quassel@CA5677B6.576D0C1.ED2EFC1B.IP)
[21:56:34] *** Quits: sellout (Adium@moz-B46AE510.hfc.comcastbusiness.net) (Quit: Leaving.)
[21:57:20] *** Joins: lpy (lpy@51E8C831.DDD9F058.E99F7FDB.IP)
[21:57:43] *** Joins: moostik (Icedove@6181009C.10715965.BCDF592F.IP)
[21:58:57] *** Quits: Ferreus (ferreus@moz-B4C76760.pools.arcor-ip.net) (Quit: WeeChat 0.4.3-dev)
[21:59:06] *** Quits: lpy (lpy@51E8C831.DDD9F058.E99F7FDB.IP) (Ping timeout)
[21:59:38] *** Quits: alexherbo2 (alexherbo2@moz-33868228.w90-35.abo.wanadoo.fr) (Quit: WeeChat 0.4.3-dev)
[22:01:51] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[22:02:00] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[22:02:39] <mark_edward> JSON has to be UTF-8 right?
[22:02:49] <mark_edward> or is it just unicode?
[22:02:54] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[22:03:15] *** Joins: nif (nif@moz-8181E2AC.oberlin.net)
[22:03:21] *** Quits: glaebhoerl (glaebhoerl@3391DE98.E9231B2.A0179ACD.IP) (Quit: )
[22:04:20] <Jemaclus> Is there a standard code documentation format?
[22:04:51] <kmc> mark_edward: http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-404.pdf doesn't seem to require UTF-8, and describes it as a "text format"
[22:05:58] *** Joins: saml (sam@moz-14C16814.cst.lightpath.net)
[22:06:02] *** Quits: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net) (Ping timeout)
[22:06:13] *** Joins: dsyang (dsyang@moz-8EBF0366.wv.cc.cmu.edu)
[22:07:53] *** Quits: kngl (Adium@E5907D90.770DEA4D.7C797F8E.IP) (Quit: Leaving.)
[22:08:11] <eibwen> where did the wanted libraries note go?
[22:08:47] *** Quits: dschatzberg (dschatzber@moz-9384E83C.bu.edu) (Input/output error)
[22:08:49] *** Joins: ecr (chatzilla@moz-10C88DA7.dyn.cs.washington.edu)
[22:08:59] <steveklabnik> mark_edward: http://tools.ietf.org/html/rfc4627#section-3
[22:09:15] <steveklabnik> mark_edward:  JSON text SHALL be encoded in Unicode.  The default encoding is
[22:09:15] <steveklabnik>    UTF-8.
[22:10:13] *** Joins: fyolnish (fyolnish@moz-942923BA.uqwimax.jp)
[22:10:19] *** Joins: assaf__ (assaf@541083A5.CDEFF991.9E22F775.IP)
[22:10:26] <mark_edward> ok, thanks. why couldn't they just say utf8. i wish standards committees had courage.
[22:10:29] *** Quits: assaf758 (assaf@moz-7FEEB595.adsl.012.net.il) (Ping timeout)
[22:11:48] *** Joins: Savago (Savago@839A46D0.E820043D.D4C04133.IP)
[22:11:49] <ecr> hm
[22:11:58] *** Quits: fyolnish (fyolnish@moz-942923BA.uqwimax.jp) (Ping timeout)
[22:12:00] <eibwen> I consider it good to have a standard not focussed on how the text is represented
[22:12:09] *** Quits: heftig (heftig@moz-513A856E.dip0.t-ipconnect.de) (Ping timeout)
[22:12:17] <ecr> anyone else ever want an iterator method that just consumes the whole thing without producing a value?
[22:13:13] *** pmoore is now known as pmoore|away
[22:16:16] <mark_edward> ecr, what do you mean?
[22:17:02] *** Quits: infynyxx (infynyxx@moz-127C9080.cit.cornell.edu) (Client exited)
[22:17:26] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[22:17:31] *** Joins: infynyxx (infynyxx@moz-127C9080.cit.cornell.edu)
[22:17:39] <Eridius> ecr: that doesn't seem particularly useful to me, unless you're writing a test to ensure the iterator doesn't fail!(), but if you want it you could do something like .skip_while(|_| true).next()
[22:17:47] <Eridius> which should exhaust the whole iterator in one go
[22:17:49] *** Quits: infynyxx (infynyxx@moz-127C9080.cit.cornell.edu) (Connection reset by peer)
[22:17:54] <Eridius> or, ya know, `for _ in iter {}`
[22:17:55] <ecr> mark_edward: like .collect() but with returning a value
[22:18:06] *** Joins: infynyxx (infynyxx@moz-127C9080.cit.cornell.edu)
[22:18:08] <ecr> Eridius: the use case is when you're iterating just for side-effects
[22:18:16] <jasom> mark_edward: for text formats, the encoding is an implementation detail; unicode allows you to convert between many encodings and still interoperate
[22:18:19] *** Quits: infynyxx (infynyxx@moz-127C9080.cit.cornell.edu) (Client exited)
[22:18:26] <ecr> like s.iter().map(|src| src.send(false))
[22:18:39] <jasom> mark_edward: json is also typically transferred over protocols that can specify the encoding out-of-band with the data
[22:18:48] *** Joins: infynyxx (infynyxx@moz-127C9080.cit.cornell.edu)
[22:18:57] <Eridius> ecr: we used to have an .each() method, which was actually the adaptor for the old style of iterators, but it would have been appropraite for what you're doing
[22:18:58] *** Quits: infynyxx (infynyxx@moz-127C9080.cit.cornell.edu) (Client exited)
[22:18:59] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[22:19:01] *** Quits: moostik (Icedove@6181009C.10715965.BCDF592F.IP) (Ping timeout)
[22:19:06] <Eridius> although I have to ask, why not just use `for src in s.iter() { src.send(false) }`
[22:19:07] *** Quits: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Client exited)
[22:19:46] <ecr> Eridius: mostly because the person I'm teaching Rust did that and I wanted to showcase an alternative of chaining iterators
[22:20:04] <ecr> so I was curious if anyone had ever run into that use case
[22:20:31] <Eridius> ecr: the only time I've ever seen an iterator be iterated without caring about the results was in a #[test] that was ensuring it didn't fail!()
[22:20:41] <ecr> I figured .collect(); initially, but the type checker isn't smart enough to just ignore the uninitialized type variable
[22:20:45] <Eridius> that case used .skip(10000).next(), for convenience
[22:21:04] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Quit: Leaving)
[22:21:07] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[22:21:15] <ecr> I hadn't thought about .skip_while(|_| true).next(). that's a clever way to do it though
[22:21:15] <Eridius> ecr: I think the recommended solution is just to use a `for` loop
[22:21:19] <ecr> yeah
[22:21:25] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Client exited)
[22:21:31] <ecr> I had the perfect name for it too. "eat".
[22:21:51] *** Quits: rca (rcatolino@moz-BC04AA53.adsl.proxad.net) (Ping timeout)
[22:22:52] *** Joins: heftig (heftig@moz-1448C700.dip0.t-ipconnect.de)
[22:23:43] *** Joins: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net)
[22:24:41] *** Quits: synackse (jordyd@9E6CE43B.4B53A366.BB6D8913.IP) (Ping timeout)
[22:25:05] *** Joins: geomyidae_ (uid214@moz-E77DEB21.irccloud.com)
[22:25:22] <geomyidae_> So, someone asked a good question, why am I writing my own packet lib instead of wrapping/porting libnet?
[22:25:32] *** Quits: askalski (akuda@2BA4E5A7.CC7751E8.6712E96B.IP) (Quit: Wychodzi)
[22:26:03] *** Joins: silven (quassel@moz-F81D3961.a328.priv.bahnhof.se)
[22:26:17] <ecr> i dunno. why are you ?
[22:27:24] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[22:27:27] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[22:27:41] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[22:27:53] <geomyidae_> I was kinda hoping someone would cheer me on and say "It's cool to have it in native rust"
[22:28:09] <geomyidae_> But I'm not even sure libnet does what I'm doing so /shrug for now I gues
[22:28:15] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[22:28:45] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[22:29:14] <patpat> Hello, maybe a strange question, but how would you pattern match over the digits of an integer? Or is there a standard method to convert an integer into a tuple of its digits for pattern matching? For example, if I had 183 it would become (1, 8, 3)?
[22:29:18] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[22:29:18] <o11c> geomyidae_: because nobody has managed to come up with a good general-purpose packet library
[22:29:24] *** Joins: jviereck (Adium@moz-56DDD13.dip0.t-ipconnect.de)
[22:29:33] <o11c> patpat: that can't work
[22:30:14] <aatch> patpat, you'd have to do it by hand. Though the best way would probably be just turning it into a string and matching against *that*
[22:30:17] <jasom> patpat: best is probably to convert it to a string,
[22:30:22] <ecr> patpat: you could write a int2digits function that returns a vector of digits and then pattern match on that
[22:30:29] <mark_edward> geomyidae_  It's cool to have it in native rust!
[22:30:39] <geomyidae_> phew
[22:30:43] <patpat> ahh, those are good ideas, thanks!
[22:30:46] *** Quits: Zylinski (karl@moz-58495553.static.spa.siw.siwnet.net) (Quit: )
[22:30:54] *** Quits: nif (nif@moz-8181E2AC.oberlin.net) (Quit: Konversation terminated!)
[22:30:59] <ecr> geomyidae: I'm all for native libraries that use better abstractions that what some C programmer did years ago
[22:31:00] <mark_edward> geomyidae_, seriously though, the more native libs the best!
[22:31:47] <jasom> geomyidae_: isn't libnet for abstractibe between e.g. ipx and ip?
[22:32:10] <o11c> only ipv4, ipv6, and unix domain sockets matter these days
[22:32:18] <geomyidae_> It says "Libnet is a high-level API (toolkit) allowing the application programmer to construct and inject network packets"
[22:32:32] <geomyidae_> The "construct" part is important. (Already wrote the pcap bindings for injection anyway)
[22:32:45] <geomyidae_> But I don't see apis in libnet that look like what I'm writing. not sure yet.
[22:33:05] <jasom> geomyidae_: oh I was thinking of this: http://libnet.sourceforge.net/#whatis
[22:33:07] <o11c> incidentally, I'm in the process of refactoring an application into more reusable layers, one of which is the network ... it's C++ (formerly C) though, but it has ideas
[22:33:31] <geomyidae_> I see this is a very polluted name :s
[22:33:42] <o11c> the fundamental properties of packets are: send blob, peek head to know length, recv blob
[22:37:08] <mark_edward> when you have `return` in a closure, it returns from the closure and not the enclosing fn, right?
[22:38:09] *** Quits: Savago (Savago@839A46D0.E820043D.D4C04133.IP) (Quit: Savago)
[22:38:44] <kmc> correct, but I think for a while 'return' just wasn't allowed there
[22:40:07] *** Joins: andrew-d_w (andrew-d_w@moz-821EBDED.nat.bb.dnainternet.fi)
[22:40:31] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper)
[22:40:41] *** Joins: bt3ze (bt3ze@moz-3F0303DA.hsd1.va.comcast.net)
[22:40:51] *** Quits: bt3ze (bt3ze@moz-3F0303DA.hsd1.va.comcast.net) (Quit: )
[22:41:19] <dsyang> Hey all, I just noticed that in documentation for std::comm, 0.9 had a section about the std::comm::select module while master does not
[22:42:04] <dsyang> What happened? is select! no longer a thing?
[22:43:06] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[22:43:42] *** Joins: derek_c (derek@moz-B8433164.cit.cornell.edu)
[22:43:56] *** Quits: gwty (gwtypc@CD7F90EE.DDD319A2.137C914F.IP) (Ping timeout)
[22:44:08] <derek_c> are there other people not getting rust-nightly updates?
[22:44:16] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[22:44:19] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[22:44:20] *** ChanServ sets mode: +ao brson brson
[22:44:36] *** Joins: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[22:46:09] *** Quits: skade (skade@moz-B73EE4D5.pools.arcor-ip.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[22:46:22] *** Joins: skade (skade@moz-B73EE4D5.pools.arcor-ip.net)
[22:49:16] *** Quits: skade (skade@moz-B73EE4D5.pools.arcor-ip.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[22:50:40] *** Joins: alex-abreu (alex@C08D9303.9289A342.80AB4F0.IP)
[22:50:59] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[22:52:52] <mark_edward> translating C code is hard because of all the aliasing... i don't think i can copy this lib 1:1 because what it does inherently would fail borrowck i think...
[22:55:24] <ecr> dsyang: select! shows up in master for me
[22:55:26] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[22:55:31] *** Joins: mcpherrin (mcpherrin@BB4DB59D.2876C283.70845BE5.IP)
[22:55:37] <ecr> so I'm not sure
[22:55:42] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[22:55:48] *** Quits: saml (sam@moz-14C16814.cst.lightpath.net) (Quit: Leaving)
[22:55:50] <ecr> looks like it's still a thing for now
[22:56:08] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: Textual IRC Client: www.textualapp.com)
[22:56:21] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[22:56:21] *** ChanServ sets mode: +o tjc
[22:56:43] *** Quits: dsyang (dsyang@moz-8EBF0366.wv.cc.cmu.edu) (Client exited)
[22:57:00] *** Quits: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: brendan)
[22:57:29] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[22:57:36] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[22:58:02] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[22:58:06] *** Joins: lpy (lpy@51E8C831.DDD9F058.E99F7FDB.IP)
[22:58:39] *** Joins: dsyang (dsyang@5443A547.FCD0EB8C.689607DE.IP)
[22:59:24] *** Joins: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[22:59:40] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Client exited)
[22:59:57] *** Quits: lpy (lpy@51E8C831.DDD9F058.E99F7FDB.IP) (Ping timeout)
[23:00:31] *** Quits: dsyang (dsyang@5443A547.FCD0EB8C.689607DE.IP) (Client exited)
[23:00:33] *** Joins: assaf758 (assaf@moz-2FB0029B.cable.012.net.il)
[23:01:13] <Jemaclus> hmm, wonder where Zr40 went. Could use some thoughts on this... 
[23:01:30] *** Quits: assaf__ (assaf@541083A5.CDEFF991.9E22F775.IP) (Ping timeout)
[23:01:52] *** Quits: mgottschlag (quassel@moz-D9E207E7.cust.bluewin.ch) (Ping timeout)
[23:02:28] *** Joins: GeDaMo (Mibbit@moz-1A313C1E.dslaccess.co.uk)
[23:02:38] *** Quits: aklt (aklt@moz-E66E9BCB.u.parknet.dk) (Quit: leaving)
[23:03:10] <geomyidae_> good/bad news, Well, the ##networking guy was able to read my rust code, but not able to find a bug in my logic.
[23:04:12] *** Quits: AvianFlu (AvianFlu@moz-51534E77.c3-0.43d-ubr2.qens-43d.ny.cable.rcn.com) (Input/output error)
[23:04:21] *** Quits: alex-abreu (alex@C08D9303.9289A342.80AB4F0.IP) (Ping timeout)
[23:05:04] <eibwen> geomyidae_: what do you want to say withthat?
[23:05:09] *** Quits: orospakr (orospakr@moz-4514BEF2.cpe.teksavvy.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[23:05:29] <geomyidae_> Mostly that it was cool that rust was readable to someone unfamiliar with it enough to troubleshoot through a stranger's code
[23:05:41] <geomyidae_> (and that I'm stumped :P)
[23:06:06] *** Quits: amir (amir@moz-467F7F30.cust.bluewin.ch) (Ping timeout)
[23:06:52] *** Joins: dogurness (dogurness@moz-FA042A88.nyc.res.rr.com)
[23:08:47] *** Joins: bytbox (s@moz-54E13927.washdc.fios.verizon.net)
[23:10:08] <Jemaclus> ok, so apparently my decompression algorithm is dropping the last few bytes. It happens after a certain point... but I can't determine what it is that changes. Argh.
[23:12:35] *** Joins: Savago (Savago@839A46D0.E820043D.D4C04133.IP)
[23:12:36] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[23:13:04] *** Joins: dbaupp (Thunderbir@2702835C.D5A1DCF.37681C44.IP)
[23:14:49] *** Joins: ienh (user@moz-F3A1CBB9.lsanca.dsl-w.verizon.net)
[23:15:02] *** Joins: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net)
[23:15:58] *** Quits: marianoguerra (marianogue@moz-A1DC1891.dip0.t-ipconnect.de) (Ping timeout)
[23:16:07] *** Joins: Seb (Seb@moz-97344273.actrix.co.nz)
[23:17:02] *** Quits: kaksmet (kaksmet@moz-2D34ADFA.dynamic.se.alltele.net) (Ping timeout)
[23:18:12] *** Quits: ecr (chatzilla@moz-10C88DA7.dyn.cs.washington.edu) (Ping timeout)
[23:18:59] *** Quits: andrew-d_w (andrew-d_w@moz-821EBDED.nat.bb.dnainternet.fi) (Input/output error)
[23:19:22] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[23:21:32] *** Joins: ecr (chatzilla@moz-22A3616E.dhcp4.washington.edu)
[23:21:45] <bstrie> brson: report them, then they show up in the modqueue
[23:25:01] *** Quits: victorporof_|away (victorporo@53EBB099.7C27E871.79933D60.IP) (Quit: victorporof_|away)
[23:26:26] *** jorendorff is now known as jorendorff_away
[23:26:47] *** Joins: mihneadb (mihneadb@moz-8A3C769D.residential.rdsnet.ro)
[23:26:54] *** Joins: synackse (jordyd@2D608993.77F880E0.D9401097.IP)
[23:27:33] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[23:30:04] *** Joins: tabraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net)
[23:30:12] *** Joins: dsyang (dsyang@5443A547.FCD0EB8C.689607DE.IP)
[23:30:32] *** Joins: Skif_ (emschwar@moz-CA025D57.ip.mcleodusa.net)
[23:30:38] *** Quits: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net) (Ping timeout)
[23:30:50] *** Quits: dherman (dherman@F5DBC48.1E9D22A9.3A1BB2FB.IP) (Quit: dherman)
[23:31:27] *** Quits: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net) (Ping timeout)
[23:31:31] *** flaper87 is now known as flaper87|afk
[23:32:21] *** Quits: Skif_ (emschwar@moz-CA025D57.ip.mcleodusa.net) (Ping timeout)
[23:33:37] *** Quits: ecr (chatzilla@moz-22A3616E.dhcp4.washington.edu) (Ping timeout)
[23:33:39] *** Quits: yuriks (yuriks@541FB14B.E4E1C694.748B6D8D.IP) (Quit: leaving)
[23:35:28] *** Quits: Scriptor (anonymous@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[23:36:16] *** Quits: GrecKo (GrecKo@moz-A7AA1BB6.fr) (Client exited)
[23:36:39] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[23:38:03] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[23:38:04] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Input/output error)
[23:38:29] <mrmonday> do macro_rules! have to be pub to be visible outside of a package?
[23:38:34] <mrmonday> or crate rather
[23:41:05] *** Quits: synackse (jordyd@2D608993.77F880E0.D9401097.IP) (Ping timeout)
[23:41:09] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[23:41:13] *** Joins: sellout (Adium@moz-CF70CF20.hlrn.qwest.net)
[23:41:57] *** Quits: Savago (Savago@839A46D0.E820043D.D4C04133.IP) (Ping timeout)
[23:42:43] *** Joins: Savago (Savago@C01F8AD9.E820043D.D4C04133.IP)
[23:43:03] *** Joins: alisdair (textual@BB0336C3.D2943E17.C579BC3E.IP)
[23:43:07] *** Quits: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com) (Ping timeout)
[23:44:28] <kmc> mrmonday: the ability to export macros from a crate at all is very new
[23:45:12] <kmc> and I believe the syntax is
[23:45:12] <kmc> #[macro_export]
[23:45:13] <kmc> macro_rules! exported_macro (() => (2))
[23:45:17] <kmc> see https://github.com/mozilla/rust/pull/11151
[23:45:26] *** Quits: dsyang (dsyang@5443A547.FCD0EB8C.689607DE.IP) (Client exited)
[23:46:07] <kmc> and see also the #[phase(syntax)] on the extern mod where it's used -- but I don't know if that applies to macro_rules! or only to programmatic macros
[23:46:29] <mrmonday> I'll give it a shot
[23:46:58] *** Quits: hoverbear (hoverbear@moz-6819B92F.wireless.uvic.ca) (Quit: Taking a nap.)
[23:47:41] <mrmonday> it's a bit of a pain, I need access to quite a few things which aren't accessible outside the crate for my testcases, I'm having to change the visiblity of quite a lot of stuff :<
[23:48:01] <mrmonday> and I'll no doubt need to change it again once it's done anyway
[23:49:47] *** Joins: dsyang (dsyang@moz-8EBF0366.wv.cc.cmu.edu)
[23:50:18] *** Joins: aurynj (Eon@583ABBE5.60FA2E28.B9E25744.IP)
[23:50:19] *** Joins: ecr (chatzilla@moz-22A3616E.dhcp4.washington.edu)
[23:51:16] *** Joins: synackse (jordyd@2D608993.77F880E0.D9401097.IP)
[23:51:41] *** Quits: nkoep (nik@moz-E793A9FD.pool.mediaways.net) (Quit: Leaving)
[23:52:22] *** Quits: mihneadb (mihneadb@moz-8A3C769D.residential.rdsnet.ro) (Quit: Bye)
[23:52:25] *** Quits: brendan (brendaneic@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: brendan)
[23:52:30] *** Quits: GeDaMo (Mibbit@moz-1A313C1E.dslaccess.co.uk) (Quit: http://www.mibbit.com ajax IRC Client)
[23:53:29] *** Quits: ecr (chatzilla@moz-22A3616E.dhcp4.washington.edu) (Ping timeout)
[23:56:16] *** Joins: bblum (bblum@moz-2B41ACB5.andrew.cmu.edu)
[23:57:49] <chromatic> Should the tutorial code avoid warnings (unless it mentions them explicitly)?
[23:58:21] *** Quits: claudiu (claudiu@moz-FB94486E.thefacebook.com) (Connection reset by peer)
[23:58:56] *** Joins: lpy (lpy@51E8C831.DDD9F058.E99F7FDB.IP)
[23:58:58] <mcpherrin> chromatic: you'd think so.  Is there something that warns in the tutorial?
[23:59:43] <chromatic> In the destructuring example of 4.3 Pattern Matching, the second arm has an unused y.
