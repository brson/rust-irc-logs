[00:18:00] *** Quits: jdm (jdm@F2D29657.F60B0462.67AC9B1.IP) (Input/output error)
[00:19:52] *** Joins: jdm (jdm@F2D29657.F60B0462.67AC9B1.IP)
[00:20:17] *** Joins: eatkinson (eatkinson@moz-BBE3ABD.mv.mozilla.com)
[00:35:13] *** Joins: victorporof (victorporo@864CC037.542EA61F.70D60F75.IP)
[00:37:02] *** Quits: victorporof (victorporo@864CC037.542EA61F.70D60F75.IP) (Ping timeout)
[00:52:06] *** Joins: ghservo (ghservo@E7A4CCE2.6A2AE50.F3114085.IP)
[00:52:07] <ghservo> [13servo] 15eric93 opened pull request #589: Refactor display lists to use an explicit traversal (06master...06diplaylist-refactor)  02http://git.io/0aGOjg
[00:52:07] *** Parts: ghservo (ghservo@E7A4CCE2.6A2AE50.F3114085.IP) ()
[01:03:28] *** Joins: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP)
[01:03:28] <ghservo> 01[13servo01] 15bors-servo pushed 0 new commits to 06auto: 02http://git.io/MTn7Ww
[01:03:28] *** Parts: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP) ()
[01:03:31] *** Joins: ghservo (ghservo@AD60B2E3.6A2AE50.F3114085.IP)
[01:03:31] <ghservo> 01[13servo01] 15bors-servo pushed 2 new commits to 06auto: 02http://git.io/fhXcRA
[01:03:31] <ghservo> 13servo/06auto 145fc794f 15Eric Atkinson: Refactor display lists to use an explicit traversal
[01:03:31] <ghservo> 13servo/06auto 1445e6873 15bors-servo: auto merge of #589 : eric93/servo/diplaylist-refactor, r=pcwalton
[01:03:31] *** Parts: ghservo (ghservo@AD60B2E3.6A2AE50.F3114085.IP) ()
[01:10:29] *** Quits: eholk (eholk@moz-39F1DC8F.uconnect.utah.edu) (Quit: eholk)
[01:11:23] *** Quits: eatkinson (eatkinson@moz-BBE3ABD.mv.mozilla.com) (Quit: eatkinson)
[01:11:37] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: Places to go, people to annoy)
[01:15:32] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[01:15:32] *** ChanServ sets mode: +qo dherman dherman
[01:15:44] *** Quits: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: My lid went down)
[01:16:18] *** Joins: mccr8 (mccr8@moz-5FEA0C74.dsl.dynamic.sonic.net)
[01:16:54] *** Quits: ehsanul (irc@moz-A9E56CFE.hfc.comcastbusiness.net) (Ping timeout)
[01:20:57] *** Quits: eschweic (Adium@moz-BBE3ABD.mv.mozilla.com) (Quit: Leaving.)
[01:24:23] *** Joins: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP)
[01:24:23] <ghservo> 01[13servo01] 15bors-servo merged 06auto into 06master: 02http://git.io/fhXcRA
[01:24:23] *** Parts: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP) ()
[01:24:24] *** Joins: ghservo (ghservo@CFE85B59.6A2AE50.F3114085.IP)
[01:24:24] <ghservo> [13servo] 15bors-servo closed pull request #589: Refactor display lists to use an explicit traversal (06master...06diplaylist-refactor)  02http://git.io/0aGOjg
[01:24:24] *** Parts: ghservo (ghservo@CFE85B59.6A2AE50.F3114085.IP) ()
[01:24:52] <jdm> 20 minute cycle
[01:24:54] <jdm> pas mal
[01:35:41] *** Joins: victorporof (victorporo@864CC037.542EA61F.70D60F75.IP)
[01:37:36] *** Quits: victorporof (victorporo@864CC037.542EA61F.70D60F75.IP) (Ping timeout)
[01:39:35] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[01:54:28] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[01:54:28] *** ChanServ sets mode: +qo dherman dherman
[01:54:45] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[01:56:24] *** Quits: azakai (alon@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[01:56:59] *** Quits: seth (seth@moz-42C5FAA8.nc.res.rr.com) (Input/output error)
[02:13:24] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[02:14:08] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[02:14:08] *** ChanServ sets mode: +qo dherman dherman
[02:14:26] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[02:16:45] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[02:24:11] *** Quits: lmandel (lmandel@8B192B20.1F93A08E.ADB88A9.IP) (Quit: lmandel)
[02:24:18] *** Joins: eatkinson (eatkinson@moz-AD233F1B.dia.static.qwest.net)
[02:24:23] *** Joins: sankha93 (Instantbir@BDA3DC61.465E20BB.27560D6E.IP)
[02:25:57] *** Joins: lmandel (lmandel@8B192B20.1F93A08E.ADB88A9.IP)
[02:30:31] *** Joins: seth (seth@moz-42C5FAA8.nc.res.rr.com)
[02:31:49] *** Quits: jet (jet@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: jet)
[02:32:17] *** Joins: jet (jet@moz-BE33DA21.fw1.sfo1.mozilla.net)
[02:32:32] *** Quits: seth (seth@moz-42C5FAA8.nc.res.rr.com) (Ping timeout)
[02:36:11] *** Joins: victorporof (victorporo@864CC037.542EA61F.70D60F75.IP)
[02:37:17] <tikue> I've run into a problem with how I'm trying to do navigation
[02:37:31] <jdm> sounds like fun
[02:37:47] <tikue> The idea is that the navigation context has frame trees; if you navigate in an iframe then you only change the part of the tree with that iframe
[02:38:02] *** Quits: victorporof (victorporo@864CC037.542EA61F.70D60F75.IP) (Ping timeout)
[02:38:21] <tikue> However, if there's already a "next" tree queued, and it's got the same root as the current tree, then you don't want to overwrite that whole next tree
[02:38:35] <tikue> you want to take the union of that tree with the new iframe you're navigating to
[02:38:53] <tikue> so like the situation is: at some page. click a link in iframe 1. that starts loading. click a link in iframe 2. now load that in addition to iframe 1
[02:39:22] <jdm> and which is the "next" tree that would be overwritten in that case?
[02:39:32] <tikue> jdm: iframe 1, currently
[02:39:39] <tikue> jdm: or rather the frame tree containing the updated iframe 1
[02:40:16] <tikue> jdm: the problem is, what if you click 2 links in 2 iframesâ€¦then you click a link in one of them
[02:40:29] <tikue> jdm: the updated tree won't have an id to either of the original iframes, so you don't know which one to overwrite
[02:40:35] <tikue> there's no way to tell those frames apart
[02:41:07] <tikue> to clarify, the third click is before either of the first 2 finished loading
[02:42:35] <tikue> hm. I didn't think I'd need to have "iframe IDs" in addition to "pipeline IDs". But maybe this can't be solved without an additional piece of information
[02:42:46] <tikue> so the iframe ID would be a positional identifier
[02:43:08] <tikue> I don't know. :(
[02:43:31] <jdm> or else maybe we need current and pending IDs, or something?
[02:44:54] <tikue> jdm: right now I assign a new unique pipeline ID when any navigation occurs -- so if you click a link in an iframe, I clone the current tree and replace that sub portion. If you click another link in an iframe, it'd check and see "oh there's already a frame tree pending, so let's just update that one instead so we can aggregate changes"
[02:45:33] <jdm> ah
[02:45:45] <tikue> but now it's like, "oh, my ID isn't in the pending frame, which means someone attempted to load another page, and now they decided to click something elseâ€¦but how do I know which one?"
[02:46:22] <jdm> that does sound like sub-IDs would be the way to go
[02:47:14] <tikue> yeah, I'm not yet sure how to do it
[02:48:07] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[02:48:07] *** ChanServ sets mode: +qo dherman dherman
[02:48:20] <tikue> jdm: the other problem is that if the ID isn't in the new tree, that doesn't necessarily mean THAT iframe is navigating to a new link. It could also mean that a parent iframe is navigating
[02:48:33] <tikue> jdm: in which case you'd actually need a new tree, because you'd want to stop the parent navigation
[02:48:38] <tikue> jeez
[02:48:43] <jdm> erf
[02:49:31] *** Quits: jet (jet@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: jet)
[02:49:34] <tikue> this seems hard. I bet no browser does what I'm imagining. They probably just choose one iframe to keep and discard the other loading one
[02:49:40] * tikue goes off to run a sample test
[02:51:19] *** Quits: mccr8 (mccr8@moz-5FEA0C74.dsl.dynamic.sonic.net) (Quit: mccr8)
[02:51:30] *** Joins: seth (seth@moz-42C5FAA8.nc.res.rr.com)
[02:52:40] * tikue was wrong
[02:52:49] <tikue> firefox maintains both loading iframes
[02:53:12] <tikue> but they have two separate navigation items not one
[02:53:30] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[03:01:30] <tikue> what does firefox do when you click 2 links on the same page? in my tests it seems like it loads the first one clicked, but I can't figure out if there's a critical point where it makes the decision to load one over the other
[03:03:13] <pcwalton> tikue: bz is about the only person who knows our docshell for sure
[03:03:25] <pcwalton> I can tell you where the source is in Firefox
[03:03:47] <tikue> pcwalton: yeah that'd be great -- where can I find the source? I've never actually looked at it...
[03:04:17] <pcwalton> http://mxr.mozilla.org/mozilla-central/source/content/base/src/nsFrameLoader.cpp is some of it
[03:04:30] <tikue> thanks
[03:04:40] <pcwalton> this is most of it http://mxr.mozilla.org/mozilla-central/source/docshell/base/nsDocShell.cpp
[03:04:48] <tikue> cool ty
[03:04:49] <pcwalton> beware, it's 12000 lines ;)
[03:04:57] *** Quits: seth (seth@moz-42C5FAA8.nc.res.rr.com) (Input/output error)
[03:09:08] *** Joins: seth (seth@moz-42C5FAA8.nc.res.rr.com)
[03:09:40] *** Quits: seth (seth@moz-42C5FAA8.nc.res.rr.com) (Input/output error)
[03:13:12] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[03:14:18] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[03:14:26] *** Joins: eholk (eholk@moz-9AB4D52F.hsd1.ut.comcast.net)
[03:15:04] *** Quits: eholk (eholk@moz-9AB4D52F.hsd1.ut.comcast.net) (Quit: eholk)
[03:15:45] *** Quits: jdm (jdm@F2D29657.F60B0462.67AC9B1.IP) (Quit: Lost terminal)
[03:21:29] *** Joins: seth (seth@moz-42C5FAA8.nc.res.rr.com)
[03:21:57] *** Quits: seth (seth@moz-42C5FAA8.nc.res.rr.com) (Input/output error)
[03:28:29] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[03:29:33] *** Quits: eatkinson (eatkinson@moz-AD233F1B.dia.static.qwest.net) (Quit: eatkinson)
[03:32:22] *** Joins: seth (seth@moz-42C5FAA8.nc.res.rr.com)
[03:34:23] *** Quits: tikue (tkuehn@moz-BBE3ABD.mv.mozilla.com) (Quit: tikue)
[03:36:47] *** Joins: victorporof (victorporo@864CC037.542EA61F.70D60F75.IP)
[03:38:33] *** Quits: victorporof (victorporo@864CC037.542EA61F.70D60F75.IP) (Ping timeout)
[03:43:01] *** Quits: dzbarsky (Adium@moz-BBE3ABD.mv.mozilla.com) (Quit: Leaving.)
[03:59:40] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[04:07:57] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[04:10:00] *** Joins: Adityab (Adityab@C78A4F2D.5E545589.16E13E53.IP)
[04:16:07] *** Joins: eatkinson (eatkinson@moz-AD233F1B.dia.static.qwest.net)
[04:18:41] *** Quits: sankha93 (Instantbir@BDA3DC61.465E20BB.27560D6E.IP) (Ping timeout)
[04:23:23] *** Quits: seth (seth@moz-42C5FAA8.nc.res.rr.com) (Input/output error)
[04:25:24] *** Joins: ghservo (ghservo@614D05BD.6A2AE50.F3114085.IP)
[04:25:24] <ghservo> [13rust-azure] 15ILyoan opened pull request #39: Add some path functions. (06master...06shpark)  02http://git.io/PV1RnA
[04:25:24] *** Parts: ghservo (ghservo@614D05BD.6A2AE50.F3114085.IP) ()
[04:33:38] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[04:33:39] *** ChanServ sets mode: +qo dherman dherman
[04:37:11] *** Joins: victorporof (victorporo@864CC037.542EA61F.70D60F75.IP)
[04:39:02] *** Quits: victorporof (victorporo@864CC037.542EA61F.70D60F75.IP) (Ping timeout)
[04:48:15] *** Joins: caitp- (caitp@moz-9FE842F.cpe.net.cable.rogers.com)
[04:52:30] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[04:55:37] *** Quits: lmandel (lmandel@8B192B20.1F93A08E.ADB88A9.IP) (Quit: lmandel)
[04:56:23] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[04:56:23] *** ChanServ sets mode: +qo dherman dherman
[05:24:09] *** Joins: dzbarsky (Adium@moz-BBE3ABD.mv.mozilla.com)
[05:27:49] *** Quits: dzbarsky (Adium@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[05:36:46] *** Joins: dzbarsky (Adium@moz-7B0110AD.mv.mozilla.com)
[05:47:37] *** Quits: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com) (Input/output error)
[05:50:26] *** Quits: caitp- (caitp@moz-9FE842F.cpe.net.cable.rogers.com) (Quit: caitp-)
[05:51:47] *** Joins: victorporof (victorporo@864CC037.542EA61F.70D60F75.IP)
[06:06:40] *** Quits: victorporof (victorporo@864CC037.542EA61F.70D60F75.IP) (Quit: victorporof)
[06:14:11] *** Joins: sankha93 (Instantbir@E564052F.CB9FA3BE.25B273F5.IP)
[06:16:43] *** Quits: dzbarsky (Adium@moz-7B0110AD.mv.mozilla.com) (Quit: Leaving.)
[06:23:23] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[06:36:24] *** Quits: Adityab (Adityab@C78A4F2D.5E545589.16E13E53.IP) (Quit: Adityab)
[06:46:45] *** Joins: dzbarsky (Adium@moz-A7CDB794.dia.static.qwest.net)
[06:50:25] *** Quits: eatkinson (eatkinson@moz-AD233F1B.dia.static.qwest.net) (Quit: eatkinson)
[07:06:27] *** Joins: Adityab (Adityab@moz-35A459C2.dip0.t-ipconnect.de)
[07:08:41] *** Joins: Nefzaoui (chatzilla@F6C73F56.38D65433.80E43DAF.IP)
[07:30:25] *** Joins: jet (jet@moz-79F891EE.hsd1.ca.comcast.net)
[07:37:32] *** Quits: sankha93 (Instantbir@E564052F.CB9FA3BE.25B273F5.IP) (Ping timeout)
[08:00:13] *** Joins: SimonSapin (simon@moz-D0C2F181.zone2.bethere.co.uk)
[08:09:10] *** Joins: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP)
[08:30:56] *** Joins: Debloper (debloper@moz-88FF8AE8.redhat.com)
[08:32:29] *** Quits: yury (yury@moz-3BE8938D.ok.ok.cox.net) (Ping timeout)
[08:32:32] *** Joins: yury (yury@moz-3BE8938D.ok.ok.cox.net)
[08:49:18] *** Quits: mcclurmc (mcclurmc@moz-8D61EFD1.cable.virginmedia.com) (Ping timeout)
[09:06:59] *** Quits: SimonSapin (simon@moz-D0C2F181.zone2.bethere.co.uk) (Ping timeout)
[09:10:11] *** Quits: jet (jet@moz-79F891EE.hsd1.ca.comcast.net) (Quit: jet)
[10:04:51] *** Joins: SimonSapin (simon@88F51059.F3BBB17D.144F44FA.IP)
[10:06:28] *** Quits: passcod (passcod@moz-5BCF5019.passcod.name) (Ping timeout)
[10:06:54] *** Quits: shachaf (shachaf@moz-F37E0395.members.linode.com) (Ping timeout)
[10:10:11] *** Joins: shachaf (shachaf@moz-F37E0395.members.linode.com)
[10:10:29] *** Joins: passcod (passcod@moz-5BCF5019.passcod.name)
[10:28:48] *** Quits: Nefzaoui (chatzilla@F6C73F56.38D65433.80E43DAF.IP) (Ping timeout)
[10:41:01] *** Joins: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com)
[10:53:20] *** Quits: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com) (Input/output error)
[10:54:41] *** Quits: Luqman (laden@moz-DCEF6040.csclub.uwaterloo.ca) (Ping timeout)
[10:57:24] *** Joins: Luqman (laden@moz-DCEF6040.csclub.uwaterloo.ca)
[10:57:49] *** Quits: Adityab (Adityab@moz-35A459C2.dip0.t-ipconnect.de) (Quit: Adityab)
[11:06:34] *** Quits: Luqman (laden@moz-DCEF6040.csclub.uwaterloo.ca) (Ping timeout)
[11:12:39] *** Joins: Luqman (laden@moz-DCEF6040.csclub.uwaterloo.ca)
[11:34:39] *** Joins: jensnockert (jensnocker@moz-EF95FD94.astro.lu.se)
[11:40:30] *** Quits: jensnockert (jensnocker@moz-EF95FD94.astro.lu.se) (Input/output error)
[11:42:31] *** Joins: Adityab (Adityab@moz-35A459C2.dip0.t-ipconnect.de)
[12:18:19] *** Joins: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com)
[12:25:14] *** Joins: leonvv (leonvv@moz-7D83A5F1.ip.telfort.nl)
[12:25:52] *** bhearsum|afk is now known as bhearsum
[12:28:52] *** Joins: ehsanul (irc@moz-D1FFCC4A.hsd1.ca.comcast.net)
[12:37:47] *** Quits: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP) (Quit: Lost terminal)
[12:39:19] *** Quits: reyre (reyre@moz-9002CDDA.cpe.net.cable.rogers.com) (Client exited)
[12:43:33] *** Joins: caitp- (caitp@moz-9FE842F.cpe.net.cable.rogers.com)
[13:29:52] *** Joins: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[13:31:51] *** Joins: reyre (reyre@86C3727C.33EE9F8A.1139E686.IP)
[13:38:26] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[13:38:27] *** ChanServ sets mode: +qo dherman dherman
[13:39:46] *** Quits: ehsanul (irc@moz-D1FFCC4A.hsd1.ca.comcast.net) (Ping timeout)
[13:49:50] *** Quits: Debloper (debloper@moz-88FF8AE8.redhat.com) (Ping timeout)
[13:49:56] *** Joins: Debloper (debloper@moz-88FF8AE8.redhat.com)
[14:00:50] *** Quits: leonvv (leonvv@moz-7D83A5F1.ip.telfort.nl) (Client exited)
[14:07:43] *** Quits: dzbarsky (Adium@moz-A7CDB794.dia.static.qwest.net) (Ping timeout)
[14:17:42] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[14:28:31] *** Quits: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com) (Input/output error)
[14:31:54] *** Joins: lmandel (lmandel@8B192B20.1F93A08E.ADB88A9.IP)
[14:34:18] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[14:34:18] *** ChanServ sets mode: +qo dherman dherman
[14:44:43] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[14:44:44] *** Joins: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com)
[14:49:57] *** Joins: Nefzaoui (chatzilla@F6C73F56.38D65433.80E43DAF.IP)
[14:56:17] *** Quits: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com) (Input/output error)
[14:58:47] *** Joins: sankha93 (Instantbir@E7C34868.9EE147E0.25B273F5.IP)
[15:10:04] *** Joins: eatkinson (eatkinson@moz-BBE3ABD.mv.mozilla.com)
[15:11:53] *** Quits: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Quit: Leaving...)
[15:11:53] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Quit: Leaving...)
[15:12:04] *** Joins: victorporof (victorporo@8255EF0D.E934E1A1.4A6B528C.IP)
[15:13:21] *** Joins: victorporof_ (victorporo@8255EF0D.E934E1A1.4A6B528C.IP)
[15:14:23] *** Quits: victorporof (victorporo@8255EF0D.E934E1A1.4A6B528C.IP) (Ping timeout)
[15:22:09] *** Joins: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP)
[15:28:15] *** Joins: mccr8 (mccr8@moz-BE33DA21.fw1.sfo1.mozilla.net)
[15:29:04] <jack> it *does* read from the back buffer: http://www.opengl.org/sdk/docs/man/xhtml/glReadBuffer.xml
[15:31:07] <jack> of course, glReadBuffer was added in OGLES3
[15:37:57] *** Quits: mccr8 (mccr8@moz-BE33DA21.fw1.sfo1.mozilla.net) (Ping timeout)
[15:38:38] *** Joins: eholk (eholk@moz-E3082F2B.uconnect.utah.edu)
[15:38:51] *** Joins: mccr8 (mccr8@moz-BE33DA21.fw1.sfo1.mozilla.net)
[15:39:13] *** Quits: mccr8 (mccr8@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: mccr8)
[15:39:16] *** Joins: mccr8 (mccr8@moz-BE33DA21.fw1.sfo1.mozilla.net)
[15:43:43] *** Joins: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP)
[15:43:43] <ghservo> [13rust-opengles] 15metajack opened pull request #44: Add support for glReadPixels. (06master...06read-pixels)  02http://git.io/IBwClA
[15:43:43] *** Parts: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP) ()
[15:46:35] *** Joins: ghservo (ghservo@AD60B2E3.6A2AE50.F3114085.IP)
[15:46:35] <ghservo> [13rust-azure] 15metajack opened pull request #40: Revert #22. (06master-upgrade...06revert-skia-dep)  02http://git.io/uPeEIQ
[15:46:35] *** Parts: ghservo (ghservo@AD60B2E3.6A2AE50.F3114085.IP) ()
[15:48:41] *** Joins: ghservo (ghservo@614D05BD.6A2AE50.F3114085.IP)
[15:48:41] <ghservo> [13rust-azure] 15metajack closed pull request #40: Revert #22. (06master-upgrade...06revert-skia-dep)  02http://git.io/uPeEIQ
[15:48:41] *** Parts: ghservo (ghservo@614D05BD.6A2AE50.F3114085.IP) ()
[15:48:42] *** Joins: ghservo (ghservo@C8693FCB.6A2AE50.F3114085.IP)
[15:48:42] <ghservo> 01[13rust-azure01] 15metajack pushed 2 new commits to 06master-upgrade: 02http://git.io/PMd26A
[15:48:42] <ghservo> 13rust-azure/06master-upgrade 14511d9be 15Jack Moffitt: Revert #22....
[15:48:42] <ghservo> 13rust-azure/06master-upgrade 14c6774cb 15Jack Moffitt: Merge pull request #40 from metajack/revert-skia-dep...
[15:48:43] *** Parts: ghservo (ghservo@C8693FCB.6A2AE50.F3114085.IP) ()
[15:49:37] <jack> jdm: r? on the rust-opengles PR a few lines up
[15:49:44] <jdm> sure
[15:51:25] *** Joins: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP)
[15:51:25] <ghservo> 01[13rust-opengles01] 15jdm pushed 2 new commits to 06master: 02http://git.io/zg6yzA
[15:51:25] <ghservo> 13rust-opengles/06master 148a7d777 15Jack Moffitt: Add support for glReadPixels.
[15:51:25] <ghservo> 13rust-opengles/06master 14b5cb559 15Josh Matthews: Merge pull request #44 from metajack/read-pixels...
[15:51:26] *** Parts: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP) ()
[15:56:36] *** Joins: ghservo (ghservo@1E8607E8.6A2AE50.F3114085.IP)
[15:56:36] <ghservo> [13servo] 15metajack opened pull request #590: Add optional PNG output rendering to Servo (06master...06png-output)  02http://git.io/UUv1RA
[15:56:36] *** Parts: ghservo (ghservo@1E8607E8.6A2AE50.F3114085.IP) ()
[15:58:40] *** Quits: Debloper (debloper@moz-88FF8AE8.redhat.com) (Quit: Leaving.)
[15:59:43] *** Quits: eatkinson (eatkinson@moz-BBE3ABD.mv.mozilla.com) (Quit: eatkinson)
[16:00:45] *** Joins: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com)
[16:02:09] *** Joins: eatkinson (eatkinson@moz-BBE3ABD.mv.mozilla.com)
[16:05:06] *** Quits: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com) (Input/output error)
[16:05:32] *** Quits: mccr8 (mccr8@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: mccr8)
[16:05:40] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[16:06:01] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[16:09:04] *** Joins: mccr8 (mccr8@moz-BE33DA21.fw1.sfo1.mozilla.net)
[16:12:33] *** Joins: ghservo (ghservo@FD7BC443.6A2AE50.F3114085.IP)
[16:12:33] <ghservo> 01[13servo01] 15bors-servo pushed 0 new commits to 06auto: 02http://git.io/3Zyrtw
[16:12:33] *** Parts: ghservo (ghservo@FD7BC443.6A2AE50.F3114085.IP) ()
[16:12:35] *** Joins: ghservo (ghservo@F6EE6DE3.6A2AE50.F3114085.IP)
[16:12:35] <ghservo> 01[13servo01] 15bors-servo pushed 6 new commits to 06auto: 02http://git.io/n5iCVw
[16:12:35] <ghservo> 13servo/06auto 14e9b1657 15Jack Moffitt: Add rust-png submodule.
[16:12:35] <ghservo> 13servo/06auto 14092e887 15Jack Moffitt: Enable `-o` option for output_file.
[16:12:35] <ghservo> 13servo/06auto 141e28a5c 15Jack Moffitt: Bump rust-azure pointer.
[16:12:36] *** Parts: ghservo (ghservo@F6EE6DE3.6A2AE50.F3114085.IP) ()
[16:12:54] *** Quits: eholk (eholk@moz-E3082F2B.uconnect.utah.edu) (Quit: eholk)
[16:14:01] *** Quits: eatkinson (eatkinson@moz-BBE3ABD.mv.mozilla.com) (Quit: eatkinson)
[16:17:13] *** Joins: eatkinson (eatkinson@moz-BBE3ABD.mv.mozilla.com)
[16:25:31] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[16:26:21] *** Joins: seth (seth@moz-42C5FAA8.nc.res.rr.com)
[16:31:19] <jack> oh no
[16:31:30] <jack> stupid build slaves don't have libpng
[16:33:35] *** Quits: SimonSapin (simon@88F51059.F3BBB17D.144F44FA.IP) (Quit: Leaving.)
[16:33:58] *** Joins: SimonSapin (simon@88F51059.F3BBB17D.144F44FA.IP)
[16:34:08] <pcwalton> jack: eatkinson: I'm writing up an email to dev-servo about our ideas for parallel constraint solving in layout
[16:34:18] <pcwalton> I'm pretty excited, we whiteboarded some good stuff yesterday
[16:34:57] *** Joins: jet (jet@moz-79F891EE.hsd1.ca.comcast.net)
[16:35:23] <eatkinson> pcwalton: awesome
[16:35:24] <jack> did anyone get a picture of the whiteboard?
[16:35:30] <eatkinson> jack: yes
[16:35:31] <pcwalton> jack: it's still there, but it's also all in my memory
[16:35:41] *** Joins: eholk (eholk@moz-E3082F2B.uconnect.utah.edu)
[16:36:04] <jack> bhearsum: ping
[16:36:07] <pcwalton> eatkinson: I had some ideas for how to distribute out the work in the fastest way, I'll include it in the email
[16:36:36] <eatkinson> jack: I can post it somewhere if it'll help explain things, but the board was pretty scattered
[16:36:57] <jack> i'll wait to see the email i guess :)
[16:37:06] <bhearsum> hello
[16:38:45] <jack> bhearsum: i need a new package on the slaves. and since i have to do that, i'd figure i'd pign you about bug 891870 as well
[16:39:09] <jack> i could probably do a patch for it if you point me in the right direction
[16:39:44] <bhearsum> yeah, unfortunately i couldn't find an owner for 891870 yet =\
[16:40:07] <jack> you mean someone to do the work? or someone to review it?
[16:40:11] <bhearsum> to do it
[16:40:26] <bhearsum> https://bugzilla.mozilla.org/show_bug.cgi?id=891870#c1 has a good overview on what needs to be done
[16:41:50] <jack> yeah, i think i could do it without too much trouble. what's the workflow for mozharness? is it all on github, or in hg?
[16:42:12] <bhearsum> hg is the authoritative place, but we have a read-only github mirror
[16:46:01] <jack> is it not in mozilla central?
[16:46:13] <bhearsum> correct
[16:46:18] <jack> the only thing i see there is mozharness_config.py under testing
[16:46:22] <bhearsum> https://hg.mozilla.org/build/mozharness/
[16:46:30] <bhearsum> and https://github.com/mozilla/build-mozharness is the read-only mirror
[16:46:50] <bhearsum> most of the mozharness scripts pull mozilla-central or other source, so you can't feasibly put the scripts in there
[16:48:29] <bhearsum> jack: you'll probably want to update the config before looking at in-tree mozharness configs if you think that's urgent in any way
[16:49:00] <jack> bhearsum: i'm confused. the mac slave failed because it can't find libpng. doesn't libpng come with OS X?
[16:49:15] <bhearsum> oh, the mac build failed for that? o_O
[16:49:34] <jack> maybe i'm mistaken. i see i have libpng installed via brew
[16:50:05] <bhearsum> so, if you need a package installed on mac, that should be handled by puppet, not mozharness
[16:50:15] <jack> does mozharness use brew? there's currently no packages config needed on mac, so i'm not sure where it expects to get packages.
[16:50:31] <bhearsum> nope, we don't do any package installation during the build process on mac
[16:50:57] <bhearsum> i wouldn't recommend using brew either - you'll end with very difficult to reproduce environments
[16:51:06] <bhearsum> if you file that bug i'll figure out how to get it installed properly
[16:52:37] *** Joins: eschweic (Adium@moz-BBE3ABD.mv.mozilla.com)
[16:53:10] <jack> bhearsum: https://bugzilla.mozilla.org/show_bug.cgi?id=894462
[16:56:14] <bhearsum> jack: libpng-devel for centos/fedora, right?
[17:02:15] *** Joins: ghservo (ghservo@614D05BD.6A2AE50.F3114085.IP)
[17:02:16] <ghservo> 01[13rust-azure01] 15metajack pushed 3 new commits to 06master: 02http://git.io/mcDG8w
[17:02:16] <ghservo> 13rust-azure/06master 144a184aa 15Saehie Park: Added some PATH functions
[17:02:16] <ghservo> 13rust-azure/06master 1449edc85 15Ilyong Cho: Add rust wrapper for path functions
[17:02:16] <ghservo> 13rust-azure/06master 14c696986 15Jack Moffitt: Merge pull request #39 from ILyoan/shpark...
[17:02:18] *** Parts: ghservo (ghservo@614D05BD.6A2AE50.F3114085.IP) ()
[17:02:23] <jack> bhearsum: sounds right.
[17:03:39] <bhearsum> k
[17:08:48] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[17:13:20] *** Joins: azakai (alon@moz-BBE3ABD.mv.mozilla.com)
[17:14:48] *** Joins: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP)
[17:14:48] <ghservo> [13servo] 15metajack synchronize pull request #590: Add optional PNG output rendering to Servo (06master...06png-output)  02http://git.io/UUv1RA
[17:14:48] *** Parts: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP) ()
[17:15:52] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[17:20:07] <pcwalton> jack: eatkinson: sent the email
[17:20:14] <pcwalton> nmatsakis: I suspect you're interested too :)
[17:21:48] <jdm> woo, mail
[17:22:13] <jdm> so what's fun is that I was under the impression that laying out in parallel was off the table and we were focusing on other problems
[17:22:20] <jdm> so I lied to a bunch of platform engineers the other day
[17:22:52] <pcwalton> jdm: I thought so too until our conversation yesterday :)
[17:22:57] <jdm> haha
[17:23:01] <pcwalton> we realized how easy it is
[17:23:02] <pcwalton> I mean
[17:23:04] <pcwalton> in theory
[17:23:10] <jdm> that is not a phrase I would have expected :)
[17:23:32] <pcwalton> well, we found a way to fit the rust and servo pieces together
[17:23:51] <pcwalton> still need a little discussion around floats
[17:24:03] <nmatsakis> pcwalton: reading now
[17:24:29] <pcwalton> jdm: the kernel functions are the key and we made sure to design servo that way
[17:28:03] <jdm> pcwalton: by the way, I was thinking more about the wrapper stuff. if our DOM objects live in the tail of JS objects, we have the same memory usage complaints as wrapping eagerly, right?
[17:28:15] <jdm> same performance concerns too
[17:33:44] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[17:33:49] *** Joins: dzbarsky (Adium@moz-A7CDB794.dia.static.qwest.net)
[17:39:07] <kmc> jdm: I still get crashes from DOM element finalizers even when the JS compartment/context/runtime teardown is moved to a separate step before the ScriptTask is destroyed
[17:40:35] <kmc> I'll keep digging
[17:42:12] <bhearsum> jdm: are you ready to retry the patch that needs libpng soon? i've got a dmg ready that i'd like to test before throwing it at puppet
[17:42:45] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[17:46:11] <bhearsum> er
[17:46:12] <bhearsum> jack: ^
[17:48:05] <pcwalton> jdm: well, as I understood it the memory usage complaints were that there were 2 allocations for a wrapped DOM node
[17:48:13] <pcwalton> the XPCOM DOM node and the JS wrapper
[17:48:24] <pcwalton> but if there's just the JS wrapper then there's only 1 allocation
[17:49:18] *** Quits: sankha93 (Instantbir@E7C34868.9EE147E0.25B273F5.IP) (Ping timeout)
[17:49:53] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Quit: pcwalton)
[17:54:00] <jdm> yes, pcwalton makes a good point
[17:54:35] <jdm> kmc: tell me more
[17:54:51] <jdm> when is the DOM element finalizer running?
[17:55:11] <jdm> oh, that would be from the GC, wouldn't it?
[17:55:54] *** Quits: Nefzaoui (chatzilla@F6C73F56.38D65433.80E43DAF.IP) (Ping timeout)
[17:56:15] <jdm> bhearsum: want me to retry the merge?
[17:56:23] <bhearsum> jdm: one sec
[17:58:24] <bhearsum> jdm: okay, please do at your convenience
[18:00:37] *** Joins: ghservo (ghservo@C621748.6A2AE50.F3114085.IP)
[18:00:37] <ghservo> 01[13servo01] 15bors-servo 04force-pushed 06auto from 1468404a0 to 1445e6873: 02http://git.io/c8GovQ
[18:00:37] *** Parts: ghservo (ghservo@C621748.6A2AE50.F3114085.IP) ()
[18:00:40] *** Joins: ghservo (ghservo@614D05BD.6A2AE50.F3114085.IP)
[18:00:41] <ghservo> 01[13servo01] 15bors-servo pushed 7 new commits to 06auto: 02http://git.io/4l8UTQ
[18:00:41] <ghservo> 13servo/06auto 14e9b1657 15Jack Moffitt: Add rust-png submodule.
[18:00:41] <ghservo> 13servo/06auto 14092e887 15Jack Moffitt: Enable `-o` option for output_file.
[18:00:41] <ghservo> 13servo/06auto 141e28a5c 15Jack Moffitt: Bump rust-azure pointer.
[18:00:41] *** Parts: ghservo (ghservo@614D05BD.6A2AE50.F3114085.IP) ()
[18:01:49] <kmc> yes, from the GC, which is triggered by the dtor for Cx
[18:03:19] *** Quits: SimonSapin (simon@88F51059.F3BBB17D.144F44FA.IP) (Ping timeout)
[18:05:18] *** Joins: SimonSapin (simon@514D186.F3BBB17D.144F44FA.IP)
[18:05:55] *** Joins: ehsanul (irc@moz-A9E56CFE.hfc.comcastbusiness.net)
[18:06:52] *** Joins: sankha93 (Instantbir@C7CDA546.253678E8.27560D6E.IP)
[18:07:43] *** Quits: jet (jet@moz-79F891EE.hsd1.ca.comcast.net) (Quit: jet)
[18:08:59] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[18:09:21] <jdm> kmc: ok, check with people like brson and graydon what your options are for logging allocations and releases
[18:09:32] <jdm> we need to figure out why the runtime believes no objects are allocated
[18:12:07] *** Quits: SimonSapin (simon@514D186.F3BBB17D.144F44FA.IP) (Ping timeout)
[18:18:16] *** Quits: reyre (reyre@86C3727C.33EE9F8A.1139E686.IP) (Connection reset by peer)
[18:19:50] *** Quits: eatkinson (eatkinson@moz-BBE3ABD.mv.mozilla.com) (Quit: eatkinson)
[18:24:42] *** Joins: reyre (reyre@86C3727C.33EE9F8A.1139E686.IP)
[18:25:45] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[18:32:48] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[18:33:37] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[18:40:59] *** Quits: Adityab (Adityab@moz-35A459C2.dip0.t-ipconnect.de) (Quit: Adityab)
[18:45:33] *** Quits: caitp- (caitp@moz-9FE842F.cpe.net.cable.rogers.com) (Quit: caitp-)
[18:46:07] *** Joins: caitp- (caitp@moz-9FE842F.cpe.net.cable.rogers.com)
[18:48:51] *** Quits: caitp- (caitp@moz-9FE842F.cpe.net.cable.rogers.com) (Ping timeout)
[18:53:37] *** Joins: eatkinson (eatkinson@moz-BBE3ABD.mv.mozilla.com)
[18:54:41] *** Joins: SimonSapin (simon@moz-D0C2F181.zone2.bethere.co.uk)
[18:55:06] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[18:56:01] *** Joins: tikue (tkuehn@moz-BBE3ABD.mv.mozilla.com)
[18:56:51] <jdm> pcwalton: so I chatted with terrence, and he gave me pointers on how to implement both the inline storage and JS heap allocation strategies
[18:56:59] <pcwalton> jdm: great!
[18:57:05] <jdm> so now I guess we should choose which one to pursue first
[18:57:41] *** Quits: dzbarsky (Adium@moz-A7CDB794.dia.static.qwest.net) (Quit: Leaving.)
[18:58:03] <jdm> pcwalton: the downside of the inline storage is that we get an extra four words of memory usage per DOM object
[18:58:08] *** Joins: dzbarsky (Adium@moz-A7CDB794.dia.static.qwest.net)
[18:58:19] <jdm> for Gecko that's a non-starter, due to XUL
[18:58:42] <jdm> for us that may not be a disaster
[18:58:59] <pcwalton> jdm: ah, I see
[18:59:08] <pcwalton> well, the malloc slop may be 4 words
[18:59:47] <pcwalton> or near that
[19:00:16] <pcwalton> also, don't all DOM objects have an XPCOM class ID?
[19:00:35] <jdm> I don't believe so
[19:00:42] <pcwalton> "e809393c-0f86-4ef2-831f-06a3c461a52e" is nearly 4 words
[19:00:44] <pcwalton> oh, hmm
[19:00:49] <pcwalton> I thought you needed a class ID to QI
[19:00:55] <pcwalton> oh wait, but you can just do that through the vtable
[19:00:55] <pcwalton> ok
[19:01:06] <jdm> pretty sure we just QI with constant checks in the function, not against a member
[19:01:19] <tikue> jdm: thanks to some investigation by pcwalton, I now know that Firefox essentially doesn't let you change a pending load once the http response is in. That simplifies things for me and nullifies most of my concerns from yesterday
[19:01:27] <jdm> tikue: fantastic
[19:01:41] <pcwalton> tikue: keep in mind that I'm not very certain as to that
[19:01:47] <pcwalton> I am far from a docshell expert
[19:02:06] <tikue> pcwalton: true. The findings were still encouraging though
[19:02:52] <tikue> jdm: so going back to the example from yesterday, if I'm loading pages in two iframes and click a link in one of them, the very absence of that pipeline's id in the pending tree means that you don't have to worry about it. I'm hoping this will be general enough in the long run
[19:03:35] <jdm> tikue: so we would end up creating a pipeline and throwing it away?
[19:04:01] <tikue> jdm: the constellation can check before creating the pipeline in the first place, I think
[19:04:06] <jdm> cool
[19:04:09] <jdm> that sounds fine to me
[19:04:12] <tikue> great :)
[19:05:19] <kmc> RUSTRT_TRACK_ALLOCATIONS=2 moves the crash to a different, more useful place
[19:05:27] <jdm> pcwalton: it looks like inline storage might be less invasive (or at least less comprehensively so), so I think I'll start looking into that
[19:05:36] <jdm> kmc: more useful in what sense?
[19:06:27] *** Quits: tikue (tkuehn@moz-BBE3ABD.mv.mozilla.com) (Quit: tikue)
[19:06:32] <kmc> well it crashes inside some sanity checking... possibly it's not really more useful :)
[19:06:58] <kmc> I need to figure out how to edit the rust runtime code and then rebuild servo against that without doing a clean build of rust+servo
[19:10:25] *** Joins: tikue (tkuehn@moz-BBE3ABD.mv.mozilla.com)
[19:10:29] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[19:10:29] *** ChanServ sets mode: +qo dherman dherman
[19:11:33] *** Quits: sankha93 (Instantbir@C7CDA546.253678E8.27560D6E.IP) (Quit: He will be back!)
[19:11:49] *** Quits: ehsanul (irc@moz-A9E56CFE.hfc.comcastbusiness.net) (Ping timeout)
[19:15:35] *** Joins: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com)
[19:16:16] *** Joins: vodik_ (simon@moz-CBE4BB13.cable.teksavvy.com)
[19:17:09] *** Quits: dzbarsky (Adium@moz-A7CDB794.dia.static.qwest.net) (Quit: Leaving.)
[19:19:01] *** Joins: Nefzaoui (chatzilla@F6C73F56.38D65433.80E43DAF.IP)
[19:19:34] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Quit: WeeChat 0.4.2-dev)
[19:21:07] *** vodik_ is now known as vodik
[19:21:20] *** Joins: Adityab (Adityab@7CCD06B4.8B38C502.16E13E53.IP)
[19:22:21] <tikue> hm. interesting. Firefox doesn't push iframe history in the order in which they're clicked but rather in the order in which they finish loading.
[19:22:30] *** Joins: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net)
[19:31:40] *** Joins: ghservo (ghservo@1E8607E8.6A2AE50.F3114085.IP)
[19:31:40] <ghservo> [13servo] 15eschweic opened pull request #591: Automatic tile removal (06master...06del-tiles)  02http://git.io/QS_tZw
[19:31:40] *** Joins: dzbarsky (Adium@moz-A7CDB794.dia.static.qwest.net)
[19:31:40] *** Parts: ghservo (ghservo@1E8607E8.6A2AE50.F3114085.IP) ()
[19:36:16] <jack> jdm: i was thinking about the mozjs changes today. i assume this means we'll have to do the new API right? or are you planning to work in our fork?
[19:36:23] *** Quits: dzbarsky (Adium@moz-A7CDB794.dia.static.qwest.net) (Quit: Leaving.)
[19:36:37] <jdm> jack: I haven't quite decided yet.
[19:37:02] <jdm> jack: terrence was operating under the assumption that I would work on tip and update servo to use that.
[19:37:20] <jdm> jack: he also mentioned that the interface should be settling down in a month, which might be a good point to branch once more
[19:37:29] <jdm> and put in the time to update everything and create the C API
[19:38:20] <jdm> I may do the work on tip, because it will be easier for SM people reviewing, and fuzzing will mean more
[19:40:07] *** Joins: jyeo (uid12229@moz-E77DEB21.irccloud.com)
[19:42:10] <pcwalton> jdm: sounds good to me
[19:42:59] <jdm> so with inline storage, we still require trace hooks
[19:43:15] <pcwalton> right
[19:43:23] <pcwalton> we should generate those with #[deriving]
[19:43:34] <jdm> that would be pretty rad
[19:55:30] *** Joins: dzbarsky (Adium@moz-BBE3ABD.mv.mozilla.com)
[20:00:49] <jack> r? https://github.com/mozilla-servo/rust-png/pull/1
[20:01:46] *** Quits: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net) (Ping timeout)
[20:02:17] *** Joins: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net)
[20:02:44] *** Quits: eschweic (Adium@moz-BBE3ABD.mv.mozilla.com) (Quit: Leaving.)
[20:03:38] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: Places to go, people to annoy)
[20:04:22] *** Quits: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net) (Ping timeout)
[20:04:44] *** Joins: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net)
[20:08:06] <jack> check out the floats! http://imgur.com/2fgwziu
[20:10:45] *** Quits: eatkinson (eatkinson@moz-BBE3ABD.mv.mozilla.com) (Quit: eatkinson)
[20:11:06] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[20:11:29] <jdm> yeeeeeeeeeah
[20:11:55] <jdm> I wonder how browsing the source on github looks
[20:11:58] <jack> and: https://twitter.com/metajack/status/357230723100463104
[20:12:54] <jack> jdm: it looks like a giant error since we have no https support
[20:13:04] <jdm> heh
[20:13:12] *** Quits: tikue (tkuehn@moz-BBE3ABD.mv.mozilla.com) (Quit: tikue)
[20:14:36] *** Joins: ghservo (ghservo@AC22872E.6A2AE50.F3114085.IP)
[20:14:36] <ghservo> [13rust-png] 15jdm closed pull request #1: Switch to using png_jmpbuf to support older libpng versions. (06master...06older-libpng)  02http://git.io/4RpIzg
[20:14:36] *** Parts: ghservo (ghservo@AC22872E.6A2AE50.F3114085.IP) ()
[20:15:26] *** Joins: ghservo (ghservo@F6EE6DE3.6A2AE50.F3114085.IP)
[20:15:26] <ghservo> [13servo] 15metajack synchronize pull request #590: Add optional PNG output rendering to Servo (06master...06png-output)  02http://git.io/UUv1RA
[20:15:26] *** Parts: ghservo (ghservo@F6EE6DE3.6A2AE50.F3114085.IP) ()
[20:18:47] *** Joins: ghservo (ghservo@614D05BD.6A2AE50.F3114085.IP)
[20:18:47] <ghservo> 01[13servo01] 15bors-servo 04force-pushed 06auto from 14d572e28 to 1445e6873: 02http://git.io/c8GovQ
[20:18:47] *** Parts: ghservo (ghservo@614D05BD.6A2AE50.F3114085.IP) ()
[20:18:50] *** Joins: ghservo (ghservo@C621748.6A2AE50.F3114085.IP)
[20:18:50] <ghservo> 01[13servo01] 15bors-servo pushed 8 new commits to 06auto: 02http://git.io/wUYz8g
[20:18:50] <ghservo> 13servo/06auto 14e9b1657 15Jack Moffitt: Add rust-png submodule.
[20:18:50] <ghservo> 13servo/06auto 14092e887 15Jack Moffitt: Enable `-o` option for output_file.
[20:18:50] <ghservo> 13servo/06auto 141e28a5c 15Jack Moffitt: Bump rust-azure pointer.
[20:18:50] *** Parts: ghservo (ghservo@C621748.6A2AE50.F3114085.IP) ()
[20:19:28] *** Joins: askalski (akuda@2BA4E5A7.CC7751E8.6712E96B.IP)
[20:20:12] *** Quits: reyre (reyre@86C3727C.33EE9F8A.1139E686.IP) (Client exited)
[20:20:33] *** Quits: askalski (akuda@2BA4E5A7.CC7751E8.6712E96B.IP) (Quit: Wychodzi)
[20:20:34] *** Joins: robertknight_ (robertknig@moz-B6DD6E0B.range86-166.btcentralplus.com)
[20:24:12] *** Quits: seth (seth@moz-42C5FAA8.nc.res.rr.com) (Input/output error)
[20:27:07] *** Joins: seth (seth@moz-42C5FAA8.nc.res.rr.com)
[20:27:51] <kmc> "Servo passes Acid3?!?!? oh"
[20:30:23] <jdm> yeah, I had the same reaction
[20:31:21] *** Joins: reyre (reyre@E28B450A.6A6F5F66.47C41102.IP)
[20:31:29] <jack> i just looked at acid1 with servo. not great.
[20:31:50] <jack> seems like background-color isn't working.
[20:33:05] <jack> oh. i wonder if it's just missing <dt> and <dl> support
[20:34:55] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Ping timeout)
[20:35:24] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[20:35:24] *** ChanServ sets mode: +qo dherman dherman
[20:35:52] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[20:39:44] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[20:39:48] <jack> jdm: HTML5 spec says dt and dd should be HTMLElement. there doesn't seem to be a generic HTMLElement though
[20:40:09] <jdm> well, there's UnknownElement :P
[20:40:24] <jack> is that what we use for generic?
[20:40:32] <jdm> I'm not sure
[20:40:36] <jdm> we're missing some from the list
[20:40:51] <jdm> I think Unknown is for <foopy>
[20:44:45] <jack> yeah, unknown has a different interface.
[20:47:47] *** Joins: caitp- (caitp@moz-2E2F18CB.senecacollege.ca)
[20:55:22] <jack> bhearsum: even with png 1.2 support, it seems to fail :(
[20:55:39] <bhearsum> =\
[20:55:42] <bhearsum> same error?
[20:56:07] <jack> differnet one. seems to crash in the pngconf.h header file.
[20:56:12] <bhearsum> huh
[20:56:16] <bhearsum> that's pretty strange
[20:56:55] <jack> can you gist that header? or spin up the slave so i can go peek at it?
[20:57:02] <bhearsum> sure, one sec
[20:59:44] <bhearsum> sorry, having trouble with aws at the moment and i have to run for the train - i'll be back online in 30min and we can try to sort this out
[21:00:02] <jack> np
[21:01:45] *** bhearsum is now known as bhearsum|afk
[21:02:24] *** Quits: victorporof_ (victorporo@8255EF0D.E934E1A1.4A6B528C.IP) (Quit: victorporof_)
[21:02:24] *** Quits: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net) (Ping timeout)
[21:02:45] *** Joins: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net)
[21:04:01] *** Joins: eatkinson (eatkinson@moz-BBE3ABD.mv.mozilla.com)
[21:04:03] *** Joins: eschweic (Adium@moz-BBE3ABD.mv.mozilla.com)
[21:05:46] *** Joins: tikue (tkuehn@moz-BBE3ABD.mv.mozilla.com)
[21:06:04] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[21:07:03] *** Quits: robertknight_ (robertknig@moz-B6DD6E0B.range86-166.btcentralplus.com) (Ping timeout)
[21:08:05] *** Quits: reyre (reyre@E28B450A.6A6F5F66.47C41102.IP) (Ping timeout)
[21:09:00] <tikue> jdm: I think that layout actually does need to route iframe size msgs through the constellation -- a layout's associated script won't necessarily have the handles to the layout tasks for the iframes, e.g. in cases of cross-origin iframes they will all be handled by an independent script task
[21:10:32] *** Quits: caitp- (caitp@moz-2E2F18CB.senecacollege.ca) (Quit: caitp-)
[21:11:20] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[21:12:59] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[21:14:07] *** Joins: eschweic1 (Adium@moz-BBE3ABD.mv.mozilla.com)
[21:14:10] *** Quits: eschweic (Adium@moz-BBE3ABD.mv.mozilla.com) (Connection reset by peer)
[21:21:42] <jdm> tikue: true
[21:22:06] * tikue needs to write these things down...
[21:22:09] <jdm> it's something we can think about optimizing later
[21:22:13] <tikue> jdm: definitely
[21:22:35] <tikue> jdm: there are definitely ways to avoid the extra layer of indirection, but I dont' think it's an urgent thing atm
[21:22:41] <jdm> yep
[21:27:36] *** Joins: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP)
[21:27:36] <ghservo> [13servo] 15eschweic synchronize pull request #591: Automatic tile removal (06master...06del-tiles)  02http://git.io/QS_tZw
[21:27:36] *** Parts: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP) ()
[21:28:08] *** Joins: reyre (reyre@moz-9002CDDA.cpe.net.cable.rogers.com)
[21:32:17] <jack> do we have a double HTMLHtmlElement in the flow tree?
[21:36:31] <jdm> jack: yes
[21:36:35] <jdm> there's an issue filed about it
[21:37:02] <jack> ok. wanted to make sure that was the same thing.
[21:37:10] <jack> also i noticed that <head> and <title> are in the flow tree
[21:37:13] <jack> that seems wrong
[21:37:19] *** Joins: leonvv (leonvv@moz-7D83A5F1.ip.telfort.nl)
[21:37:35] <jack> (<head> is an InlineFlow in case you were curious)
[21:38:26] <jdm> jack: http://htmlpad.org/fffffffffffffff/
[21:38:34] <jdm> seems like that's desired behaviour
[21:39:05] <jdm> title, probably not so much
[21:39:44] <jack> wow
[21:39:51] <jack> learn something new every day
[21:41:13] <bhearsum|afk> jack: https://github.com/pornel/improved-pngquant/issues/7 looks like it might have insight into the latest linux error
[21:41:24] <jdm> jack: although apparently having non-child-element content in head actually triggers an automatic closing of head and opening of the body
[21:41:27] <eatkinson> jack, jdm: iirc head is set to display:none by the UA stylesheet, so probably shouldn't be in the flow tree
[21:41:31] <jdm> so um, technically you're right
[21:42:35] <jack> i'll file a bug for it in a bit
[21:43:45] <bhearsum|afk> http://lists.opensuse.org/opensuse-packaging/2010-06/msg00152.html suggests that #define PNG_SKIP_SETJMP_CHECK might fix it....
[21:45:04] <kmc> do you think it will be hard to convince the Servo build system to rebuild just the Rust runtime library and then build Servo against it (if necessary)
[21:46:52] <jack> kmc: i'm not sure what you mean. you can touch src/compiler/rust-auto-clean-trigger to force it to rebuild rust. or you can use `make clean-rust` and `make rust`
[21:47:15] <jack> bhearsum: so maybe just removing setjmp will do it
[21:47:49] <bhearsum|afk> hopefully!
[21:47:58] <jack> bhearsum: you can test by manually removing the first line of src/support/png/rust-png/shim.c and rebuilding
[21:48:32] <bhearsum|afk> i don't think i'll be able to do that today, but i can try it tomorrow if you remind me
[21:48:36] <bhearsum|afk> or you can repush
[21:49:46] <jack> bhearsum: i'll retry
[21:50:10] <bhearsum|afk> cool
[21:54:23] *** Joins: ghservo (ghservo@614D05BD.6A2AE50.F3114085.IP)
[21:54:23] <ghservo> [13rust-png] 15metajack opened pull request #2: Remove setjmp.h header and add copyright notice. (06master...06remove-header)  02http://git.io/5HDtHA
[21:54:23] *** Parts: ghservo (ghservo@614D05BD.6A2AE50.F3114085.IP) ()
[21:54:45] *** Joins: ghservo (ghservo@AC22872E.6A2AE50.F3114085.IP)
[21:54:45] <ghservo> [13rust-png] 15metajack closed pull request #2: Remove setjmp.h header and add copyright notice. (06master...06remove-header)  02http://git.io/5HDtHA
[21:54:45] *** Parts: ghservo (ghservo@AC22872E.6A2AE50.F3114085.IP) ()
[21:56:04] * bhearsum|afk chants "go png go"
[21:58:54] *** Joins: ghservo (ghservo@FD7BC443.6A2AE50.F3114085.IP)
[21:58:54] <ghservo> [13servo] 15metajack synchronize pull request #590: Add optional PNG output rendering to Servo (06master...06png-output)  02http://git.io/UUv1RA
[21:58:54] *** Parts: ghservo (ghservo@FD7BC443.6A2AE50.F3114085.IP) ()
[22:00:44] <kmc> jack: that rebuilds all of rust though, not just src/rt/
[22:01:11] *** Joins: ghservo (ghservo@AD60B2E3.6A2AE50.F3114085.IP)
[22:01:11] <ghservo> 01[13servo01] 15bors-servo 04force-pushed 06auto from 14105c56d to 1445e6873: 02http://git.io/c8GovQ
[22:01:11] *** Parts: ghservo (ghservo@AD60B2E3.6A2AE50.F3114085.IP) ()
[22:01:14] <jack> kmc: afaik there is no "only build some piece of rust" target
[22:01:18] *** Joins: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP)
[22:01:18] <ghservo> 01[13servo01] 15bors-servo pushed 8 new commits to 06auto: 02http://git.io/ycIvZg
[22:01:18] <ghservo> 13servo/06auto 14e9b1657 15Jack Moffitt: Add rust-png submodule.
[22:01:18] <ghservo> 13servo/06auto 14092e887 15Jack Moffitt: Enable `-o` option for output_file.
[22:01:18] <ghservo> 13servo/06auto 141e28a5c 15Jack Moffitt: Bump rust-azure pointer.
[22:01:19] *** Parts: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP) ()
[22:01:55] <kmc> jack: well does rust itself support incremental builds?
[22:02:06] <cmr> kmc: not yet no
[22:02:19] <kmc> aw ok then
[22:11:44] *** Quits: Adityab (Adityab@7CCD06B4.8B38C502.16E13E53.IP) (Ping timeout)
[22:16:02] <bhearsum|afk> jack: looks like the build got past libpng!
[22:16:04] * bhearsum|afk offline now
[22:16:13] <jack> \o/
[22:19:40] <jdm> woot
[22:20:50] *** Joins: cait-phone (androirc@917EEEA1.8C19BC3D.26E1259.IP)
[22:21:23] *** Quits: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: My lid went down)
[22:24:45] *** Joins: ghservo (ghservo@5FEF1C87.6A2AE50.F3114085.IP)
[22:24:45] <ghservo> [13servo] 15bors-servo closed pull request #590: Add optional PNG output rendering to Servo (06master...06png-output)  02http://git.io/UUv1RA
[22:24:45] *** Parts: ghservo (ghservo@5FEF1C87.6A2AE50.F3114085.IP) ()
[22:25:36] <jack> we definitely are messing up calculating the background color
[22:25:52] <jack> somehow we get black at 0 alpha
[22:25:59] <jack> but not always
[22:26:37] <eschweic1> jack: when the window first loads, you mean?
[22:28:03] <jack> no, in the real layout
[22:28:22] <jack> while i was futzing with bors i figured i'd work on acid1 a bit
[22:28:32] <jack> and the first thing you notice is that all the background colors are missing :)
[22:30:54] <pcwalton> jack: yay, acid1
[22:31:07] <pcwalton> we should file specific bugs on everything that's missing, we're down to that stage
[22:31:13] <pcwalton> modulo "clear" I guess, we know that's wrong
[22:31:24] <pcwalton> as in, unimplemented and needed to pass
[22:31:48] *** Quits: mccr8 (mccr8@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: mccr8)
[22:32:27] *** Quits: leonvv (leonvv@moz-7D83A5F1.ip.telfort.nl) (Client exited)
[22:37:20] <SimonSapin> pcwalton: wait until we get to acid2, itâ€™s gonna be way more fun :)
[22:37:30] <SimonSapin> for some values of "fun"
[22:37:30] <pcwalton> SimonSapin: mostly just bugs, right?
[22:37:36] <pcwalton> margin collapsing and whatnot
[22:37:42] <pcwalton> I don't actually care about bugs, it sounds fun
[22:38:01] <pcwalton> I mostly care about "oh my God this CSS feature requires us to nuke all of Servo's architecture and start over"
[22:38:04] <pcwalton> which I want to avoid :)
[22:38:42] <jack> how does servo compute styles currently? i thought that we did the selector match when we built a render box
[22:38:47] <tikue> well, it's like what the ship metaphor you made at lunch, right pcwalton 
[22:38:54] <jack> but apparently that expects the style to already be computed
[22:39:09] <pcwalton> jack: you have to have the style computed in order to know what boxes to create in the first place
[22:39:11] <pcwalton> because of display:
[22:39:28] <jack> i assumed we only computed display and friends at that stage.
[22:39:36] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Quit: Leaving...)
[22:39:37] <jack> so we compute all the styles when building the flow tree?
[22:40:11] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Client exited)
[22:41:07] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[22:41:19] <pcwalton> right
[22:42:21] *** Quits: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP) (Quit: Lost terminal)
[22:43:14] <jack> can you point me to the code? i can't seem to find it.
[22:45:35] <jack> oh i see it. restyle_subtree
[22:45:59] <jack> i was too far in the stack. it's before the flow tree is built actually
[22:49:04] <pcwalton> jack: right
[22:50:39] *** Quits: SimonSapin (simon@moz-D0C2F181.zone2.bethere.co.uk) (Ping timeout)
[22:53:30] <tikue> I want to have a side-effect in a function. Can a function mutate arguments?
[22:53:41] <pcwalton> tikue: yes, it can
[22:53:47] <tikue> pcwalton: ok thanks
[22:53:53] <pcwalton> but you should probably take them by pointer (&mut something)
[22:53:59] <tikue> the use case is replacing a node in a tree, so I want to pass by value
[22:54:01] <pcwalton> if the types are not already mutable
[22:54:02] <pcwalton> ok
[22:54:18] <tikue> I want to mutate the node's parent to point to the replaced node's parent
[22:59:09] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[23:22:36] *** Quits: eatkinson (eatkinson@moz-BBE3ABD.mv.mozilla.com) (Quit: eatkinson)
[23:24:41] *** Quits: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com) (Input/output error)
[23:26:19] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[23:27:50] *** Quits: eholk (eholk@moz-E3082F2B.uconnect.utah.edu) (Quit: eholk)
[23:34:51] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[23:39:12] *** Joins: caitp-phone (androirc@moz-9FE842F.cpe.net.cable.rogers.com)
[23:40:52] *** Quits: cait-phone (androirc@917EEEA1.8C19BC3D.26E1259.IP) (Ping timeout)
[23:41:37] *** Joins: jet (jet@moz-79F891EE.hsd1.ca.comcast.net)
[23:54:05] *** Quits: tikue (tkuehn@moz-BBE3ABD.mv.mozilla.com) (Quit: tikue)
[23:55:06] *** Joins: tikue (tkuehn@moz-BBE3ABD.mv.mozilla.com)
