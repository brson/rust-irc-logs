[00:00:10] <brson> jeffdb: your v.clone() is unnecessary. push takes v by value, so you are copying v then throwing away the original
[00:00:24] <brson> jeffdb: what happens if you don't have the 'static bounds? is it a compile error?
[00:00:34] *** Joins: saati (s@moz-11469F61.harmless.hu)
[00:01:20] <jeffdb> error: value may contain borrowed pointers
[00:01:32] <jeffdb> *l = Cons(v.clone(), @mut((*l).clone()));
[00:01:53] <jeffdb> brson: it underlined the second half of the Cons enum
[00:03:09] <jeffdb> Without the 'static guarentee on T, it doesn't know whether there are borrowed pointers in my list l
[00:03:42] <brson> sounds good. i've never had to use the 'static bound, so I just didn't know
[00:05:19] <jeffdb> brson: so the (*l).clone() is what i want right? the overhead of that is just a single element and the pointer?
[00:09:32] *** Quits: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: ChatZilla 0.9.90.1-rdmsoft [XULRunner 22.0/20130619132145])
[00:09:52] <brson> jeffdb: it could be more efficient by avoiding that clone, since the cost of cloning a T could be arbitrary
[00:10:20] <brson> jeffdb: with that signature, one thing you could do is swap Nil into l, then assign the new Cons to l without cloning the original l
[00:10:30] <brson> others may have better ideas
[00:10:44] <brson> swap is in std::util
[00:13:06] <dbaupp> it's hard to avoid both the infinite loop and the .clone with that design (i.e using @mut), personally I'd take either &mut @mut List, or return a new @mut List with the body being @mut Cons(v, l)
[00:13:49] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[00:13:59] <brson> dbaupp: what infinite loop are you referring to?
[00:15:34] <jeffdb> brson: I had *l = Cons(v, *list) initially
[00:15:48] <jeffdb> sorry *l = Cons(v, l)
[00:15:49] <dbaupp> brson: https://gist.github.com/JeffBelgum/7016255/9e8cdf143309278aaaca5c5f53080d2036c77a0f
[00:15:59] <jeffdb> ^
[00:18:06] *** Joins: mib_lu0sjf (Mibbit@moz-499B701B.hsd1.mn.comcast.net)
[00:18:10] <brson> oh, that's funny. it wouldn't have been a loop if it was written `list = Cons(v, list)` though 
[00:18:25] <brson> instead of mutating the node to assign it to itself
[00:19:48] *** Joins: martndemus (martndemus@moz-876695FC.sshunet.nl)
[00:19:51] <earlz> does Rust have regular expressions yet?
[00:20:12] <sfackler> earlz: not in the standard library yet
[00:20:31] <jeffdb> thanks brson and dbaupp for the help!
[00:20:32] <brson> there are bindings for something somewhere
[00:20:40] <dbaupp> there are some (old) bindings to pcre around, don't know if they work with 0.8/master
[00:20:54] <sfackler> try this: https://github.com/uasi/rust-pcre
[00:21:03] <sfackler> dunno if it still works, but it seems to be updated
[00:21:49] *** Quits: martndemus (martndemus@moz-876695FC.sshunet.nl) (Ping timeout)
[00:21:54] <earlz> yea, appears to at least work for 0.8
[00:22:59] *** Quits: simon (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[00:24:28] <mib_lu0sjf> I'm having a bit of trouble listing directories. Is that something that should work with on the current master branch?
[00:24:41] <earlz> Going to port a URL pattern matcher (for URL routing) over from C# to Rust. Luckily the regex use in it is minimal anyway. Mainly just string cutting lots of other boring stuff
[00:24:46] <mib_lu0sjf> my code is only 2 lines:
[00:24:52] <mib_lu0sjf>     let dir = std::path::posix::Path::new("..");
[00:24:58] <mib_lu0sjf>     println(fmt!("%?", dir.readdir().unwrap()))
[00:25:45] <mib_lu0sjf> but the compiler says that std::path::posix::Path does not implement any method in scope named "readdir"
[00:26:20] <mib_lu0sjf> and the documentation says that posix path implements the DirectoryInfo trait which includes the readdir method
[00:27:01] <acrichto> mib_lu0sjf: make sure you've imported the DirectoryInfo trait into scope
[00:27:07] *** Joins: eatkinson (eatkinson@moz-E57448EF.airbears2.berkeley.edu)
[00:27:36] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[00:27:38] <dbaupp> rusti: use std::rt::io::file::DirectoryInfo; Path("..").readdir().unwrap()
[00:27:41] -rusti- pastebinned 7 lines of output: http://ix.io/8wA
[00:27:47] <brson> pcwalton: do you remember the name of the lock profiler we were using this summer?
[00:28:02] <brson> mutrace maybe
[00:28:05] <dbaupp> erm... how do I make a path with the new path?
[00:28:20] <dbaupp> rusti: use std::rt::io::file::DirectoryInfo; Path::new("..").readdir().unwrap()
[00:28:20] <strcat> brson: there's a weird valgrind tool for that too, maybe it was that?
[00:28:22] -rusti- ~[std::path::posix::Path{repr: ~[46u8, 46u8, 47u8, 114u8, 117u8, 115u8, 116u8], sepidx: Some(2u)}]
[00:28:31] <strcat> drd
[00:28:51] <mib_lu0sjf> yep, that was it: the trait being in scope
[00:28:56] <mib_lu0sjf> thanks
[00:29:04] <strcat> drd doesn't look like what you want :)
[00:29:13] * strcat thought it did profiling
[00:29:53] *** Quits: brendan (brendaneic@moz-F2813A2B.hfc.comcastbusiness.net) (Quit: brendan)
[00:29:56] *** jorendorff is now known as jorendorff_away
[00:30:01] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[00:30:21] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[00:31:14] <earlz> is there such a thing as an index setter? like so you can do `foo[bar] = baz` ? 
[00:31:22] <brson> Luqman: the new crate map code is not valgrind clean
[00:31:27] <strcat> earlz: only vectors can do it
[00:31:46] <strcat> we need to temporarily remove the Index trait and add one able to do what vectors do
[00:32:04] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[00:32:14] *** Quits: sp3d (s@6361F3B1.19CD1E54.8354FB35.IP) (Ping timeout)
[00:32:35] <brson> Luqman: oh, scratch that. I'm on an old branch. it may be fine
[00:32:45] *** Quits: mystal (Mibbit@3FB4C2BC.2E4FD3DD.225F4543.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[00:34:39] *** Quits: jvns_ (bork@87D98E32.4046EB22.428F94DD.IP) (Ping timeout)
[00:35:29] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:36:07] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[00:36:19] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[00:36:54] *** Quits: mib_lu0sjf (Mibbit@moz-499B701B.hsd1.mn.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[00:39:28] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[00:41:43] *** Quits: crembo (crembo@moz-C2B364AA.vc.shawcable.net) (Client exited)
[00:43:44] *** Joins: aegeaner (Aegeaner@C8372C16.21B75AD6.FA28A497.IP)
[00:44:12] *** Joins: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP)
[00:47:17] <earlz> Is it possible to add a method to an existing generic type? I want to add something akin to an extension method (or monkey patching) to a HashMap<string, [string]> 
[00:48:14] <sfackler> you can make a trait with the method and then implement it for HashMap
[00:48:50] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[00:49:20] *** Joins: brendan (brendaneic@moz-F2813A2B.hfc.comcastbusiness.net)
[00:50:40] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[00:50:40] *** Quits: Earnestly (earnest@moz-BE290A2B.dyn.plus.net) (Ping timeout)
[00:53:03] *** Quits: brendan (brendaneic@moz-F2813A2B.hfc.comcastbusiness.net) (Quit: brendan)
[00:53:07] *** jld is now known as jld|afk
[00:55:39] *** Joins: _Vi (vi@527C345F.497AA854.B16B3BE6.IP)
[00:56:42] <_Vi> Is "rusti" expected to work? I've just built Rust from "0.8" tag and can get anything useful from "rusti"; always "Segmentation Fault"...
[00:57:04] <_Vi> s/can/can't/
[00:57:04] <tjc> _Vi: No, rusti is in a bad state right now -- we're about to remove it so that it doesn't trip people up
[00:57:16] <tjc> hopefully someone will volunteer to maintain it and bring it back eventually, but no one is doing that now
[00:57:21] <_Vi> tjc, Which Rust version provides best "rusti"?
[00:57:53] *** Joins: skeet70 (skeet70@moz-DB50BE3F.bzm-mt.client.bresnan.net)
[00:58:06] <earlz> How do I use str in generic parameters? I get "bare 'str' is not a type"
[00:58:49] <skeet70> Is the pathify function referred to in the libextra/fileinput.rs comments/example not implemented? I can't seem to find it in the source/docs.
[00:58:52] <tjc> _Vi: I'm not sure if it has ever worked well, but I've never really used it myself, since it didn't exist when I started working on Rust :-)
[00:59:58] <_Vi> Can "poor man's rusti" that just appends all typed lines to temporary source file and compiles it and shows the execution result after each typed line be useful?
[01:00:04] *** Joins: brendan (brendaneic@moz-F2813A2B.hfc.comcastbusiness.net)
[01:00:29] <dbaupp> that's essentially what the current rusti does
[01:00:53] <_Vi> dbaupp, Why does it "Segmentation Fault"s so often them?
[01:01:49] <_Vi> Can "rusti" be made easy, reliable and not requiring too much maintenance when Rust gets changed?
[01:02:00] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[01:02:10] <mcpherrin> It could be, but it isn't.
[01:02:18] <mcpherrin> There are some people working on a better version
[01:02:22] <dbaupp> _Vi: well it does it incorrectly
[01:02:27] <dbaupp> (hence the segfaults)
[01:02:47] *** Parts: holomorph (holomorph@moz-CF91A262.hsd1.md.comcast.net) (0.4.3-dev)
[01:03:13] <_Vi> There's better "rusti", but not in Rust git repository but somewhere else?
[01:03:15] <brson> _Vi: rusti is especially unreliable because it's the only rust thing that uses the llvm jit. there have been other rust repls that didn't
[01:03:32] <mcpherrin> I just use the irc bot personally :P
[01:03:43] <_Vi> Can "rusti" work without JIT?
[01:04:24] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Quit: Leaving)
[01:04:34] <mcpherrin> The current iteration doesn't, but it should be possible, yes.
[01:04:49] <earlz> why do I get this? error: cannot index a value of type `std::hashmap::HashMap<~str,~[~str]>`
[01:05:07] <skeet70> Anyone know how to create a filesystem path for file input as is shown in the docs?
[01:05:22] *** Joins: sp3d (s@6361F3B1.19CD1E54.8354FB35.IP)
[01:05:26] <jeaye> skeet70: Using io::Path?
[01:05:57] *** Quits: riley (riley@8BA43816.9AA11D69.65DDFA89.IP) (Client exited)
[01:06:18] <dbaupp> jeaye: it'd be nice if that existed :P
[01:06:30] <skeet70> Yeah I'm not seeing that haha
[01:06:33] <dbaupp> earlz: you can't do map[x]
[01:06:48] <earlz> really? why? 
[01:07:03] <dbaupp> because it's not implemented yet
[01:07:17] <dbaupp> (and may not every be implemented) call .find or .get (IIRC)
[01:07:19] <jeaye> dbaupp: Wait, there was a Path
[01:07:19] <earlz> wouldn't it just be a very simple mapping to .get(key) though?
[01:07:33] <jeaye> dbaupp: Am I being silly, or was it removed?
[01:07:36] <dbaupp> jeaye: yes, std::path::Path (which is in the prelude)
[01:07:44] <jeaye> Ok. I'm being silly.
[01:07:53] <Amaranth> earlz: Not quite that simple but it isn't particularly hard either
[01:07:54] *** Joins: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com)
[01:08:00] <jeaye> There should be an io::Path! :P
[01:08:03] <skeet70> jeaye in the docs it shows a pathify being used http://static.rust-lang.org/doc/0.8/extra/fileinput.html
[01:08:07] <kmc> rusti: (1,)
[01:08:08] -rusti- (1,)
[01:08:13] <dbaupp> earlz: probably, it doesn't mean that it will automatically get implemented. (Also, the current Index trait that allows for this doesn't work)
[01:08:31] <_Vi> Will Rust v1.0 have some mean (with JIT or without) to quickly test a code snippet from command line without resorting to the text editor or explicitly saving it somewhere?
[01:08:37] <kmc> rusti: (1,2,)
[01:08:37] *** Joins: crembo (crembo@moz-C2B364AA.vc.shawcable.net)
[01:08:38] -rusti- (1, 2)
[01:08:38] <Amaranth> It's just a matter of putting in the work (and it sounds like a lot of work)
[01:08:52] <skeet70> there is a http://static.rust-lang.org/doc/master/std/path/posix/struct.Path.html, but I'm not seeing what would be used in the way shown in the docs
[01:09:11] <kmc> rusti: match (1,2) { (a,b,) => "foo" }
[01:09:13] -rusti- pastebinned 6 lines of output: http://ix.io/8wM
[01:09:25] <dbaupp> skeet70: pathify was renamed to "make_path_option_vec"
[01:09:35] <maikeru> bah
[01:09:52] <kmc> ^--- any way to make that work? i'm writing a macro which will expand with a tuple of 1 or more elements
[01:10:22] <dbaupp> skeet70: also the documentation hasn't been updated for changes (https://github.com/mozilla/rust/issues/9895) :(
[01:10:28] <maikeru> struct a implements Stream, struct b implements Stream, strut c<T> can't make it understand that structc<structa> and structc<structb> should be treated the same...
[01:10:40] <_Vi> "<mcpherrin> I just use the irc bot personally" -> Why not "convert" the bot into new, updated "rusti"?
[01:10:53] <dbaupp> kmc: edit libsyntax to allow trailing commas in patterns
[01:11:05] <dbaupp> kmc: (that's semi-serious)
[01:11:27] <kmc> yaks :(
[01:11:32] <dbaupp> yup :(
[01:11:35] <mcpherrin> _Vi: The IRC bot has a lot of sandboxing stuff that isn't really relevant, it's a 5 line shell script to replicate if you want
[01:11:55] *** Joins: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca)
[01:12:29] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[01:12:31] <_Vi> (Forgot that IRC bot is expected to be stateless, but "rusti" is expected to remember "let"s and "fn"s.)
[01:12:32] <dbaupp> _Vi: also, the IRC bot retains no state, it evaluates each line in an entirely new context
[01:12:37] <dbaupp> yeah
[01:13:41] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[01:14:20] *** Quits: dbaupp (Thunderbir@moz-54ADD9F4.lns20.syd6.internode.on.net) (Ping timeout)
[01:14:34] <_Vi> I think simple (without JIT or access to tricky LLVM/Rust internals) "rusti" should be. Later (after Rust stabilization) there can be complexer rusti that peeks into internals for speed and, for example, good tab completion.
[01:15:15] <mcpherrin> _Vi: Patches welcome :)
[01:17:06] <_Vi> Maybe something like "https://github.com/bstrie/rust-rustic" can be integrated?
[01:17:47] <dwrensha> kmc: what exactly are you trying to do?
[01:17:53] <earlz> How can I take an &str and clone it to produce an ~str ? Apparently .clone() produces an &str :/ 
[01:18:55] <kmc> earlz: .into_owned()
[01:19:11] <kmc> .clone() always returns the type it was given
[01:19:28] <earlz> ah, so it's actually doing the same thing behind the scenes?
[01:19:52] <kmc> same as what?
[01:19:58] *** Joins: GGpin (hell@moz-B9EFFE2E.dyn.optonline.net)
[01:20:10] <kmc> cloning a borrowed pointer just gives you another pointer to the same thing
[01:20:20] *** Quits: jxv (jxv@4732E7D7.2AB34561.9B38A32A.IP) (Ping timeout)
[01:20:25] <earlz> oh.. now I see
[01:21:24] <kmc> it can't clone the underlying object because where would it allocate, and who would be responsible for freeing it
[01:22:25] <earlz> So I get this... warning: unused variable: `c`, #[warn(unused_variable)] on by default
[01:22:25] <earlz> let mut test = router.controller(|c| TestController::new());
[01:22:25] <earlz> The reason that `c` is there though is because the controller method is expecting a function taking one argument. Is there something I'm missing to get rid of this warning? 
[01:22:40] <earlz> (other than globally disabling the warning)
[01:24:25] <kmc> change c to _
[01:24:39] <kmc> _ is the wildcard pattern which matches anything and binds no variables
[01:25:05] <earlz> ah ok
[01:25:15] <kmc> alternately if you want to give a name for doc purposes you can write _foo which is a real variable name but won't warn if unused
[01:26:22] <kmc> do cross-crate macros work?
[01:26:25] <earlz> I was wondering why in some examples names were like _rhs
[01:28:43] <dwrensha> kmc: I don't think so
[01:28:45] <kmc> :/
[01:29:17] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[01:29:19] * kmc ponders just having his macros.rs be part of several different crates at once
[01:29:57] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[01:30:03] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[01:30:09] <earlz> Has there ever been any talk of using a naming convention for traits similar to the IFooBar convention of C#(and Java?) 
[01:30:31] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[01:30:42] *** Joins: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net)
[01:30:43] <sp3d> the tutorial suggests a Verb convention
[01:30:51] *** Joins: p_adams (p_adams@moz-EB08CC70.dhcp.stls.mo.charter.com)
[01:30:51] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[01:30:59] <sp3d> which is what kinds use, at least, e.g. "Freeze" and "Send"
[01:31:17] <kmc> smells like hungarian notation to me
[01:31:19] <sp3d> but there are definitely some Noun traits in the stdlib and even some -er traits
[01:31:43] <strcat> a trait is a set of things you can do with a value, so anything describing that makes sense
[01:32:06] <kmc> if you want all trait names to start with a particular character, that should be part of the syntax, not some convention that people will ignore and is totally unchecked
[01:32:09] <kmc> like hungarian notation
[01:32:22] *** Quits: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net) (Quit: Leaving.)
[01:32:41] <earlz> So I'll take that as a no. I agree it's like hungarian notation and probably bad. heh Just curious as to if there was ever any consideration to it
[01:32:54] <kmc> as long as we don't go all Rails and include a big list of English verbs and enforce that trait names need to be verbs
[01:33:11] <strcat> lol
[01:33:18] <earlz> Don't even get me started on plurals and rails
[01:33:26] <strcat> kmc: are you serious?
[01:33:29] <strcat> ;\
[01:33:52] <kmc> Rails has a big list of irregular plurals so that it knows that if your class is named "Child" it should look in the "children" table in the DB
[01:34:05] <kmc> of course the list has some mistakes and omissions and they can't be fixed now
[01:34:05] <snerd> ew
[01:34:06] <strcat> that's ridiculously stupid
[01:34:27] <kmc> strcat: no it's "elegant" and "beautiful"
[01:34:34] <strcat> and I guess poor people who speak english as a second language just don't use rails? :)
[01:34:42] <earlz> That and plurals is the number one reason I could never get myself to sit still and make any rails project of size
[01:34:46] <strcat> kmc: elegant would be naming the table 'Child' ;p
[01:35:21] <strcat> or... not mapping classes to tables
[01:35:21] <tjc> strcat: Well, I thought RoR was pretty popular in Japan, so...
[01:35:28] <tjc> seems like some people must be able to get around it :-)
[01:35:46] <klutzy> it's skeuomorphism!
[01:35:47] *** Joins: jeffdb_ (jeff@moz-D13B6004.hsd1.ca.comcast.net)
[01:35:52] *** Quits: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Quit: Bye!)
[01:35:59] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[01:36:02] *** Quits: reedlepee (Mibbit@3C9ED70E.61B8DFA9.9D59D0D8.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[01:36:22] <skeet70> So how is file input done in Rust now? All I want to do is grab an input array to quicksort...
[01:38:50] <kmc> strcat: indeed... there's more to elegance than having nice syntax for the trivial example that's displayed in a big font on your library's website
[01:39:23] <kmc> frankly I don't understand why people want programming to be more like writing English (or other natural language)... natural languages are TERRIBLE for giving unambiguous instructions
[01:40:19] <strcat> English is a crappy language anyway
[01:40:21] <kmc> areas of human activity where precision is required (law, science, math) develop their own highly stylized forms of language that are much closer to programming languages
[01:40:35] *** Joins: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net)
[01:40:44] <earlz> I think staticly typed fluent interfaces is the perfect intersection between the two :) 
[01:40:46] <mcpherrin> kmc: please don't make me program in legalese
[01:42:44] <earlz> speaking of fluent interfaces.. I have an interface where you use it like foo.handles("url").with(function); ... magic happens at the handles part, so it breaks if you do foo.handles("url").handles("url2")... 
[01:43:14] <kmc> (I shouldn't imply that precision isn't "required" in e.g. the humanities... I guess it's more of a tradeoff between precision and expressiveness, and programmers are on the extreme precision end because computers are so freaking bad at resolving ambiguity the way we would like)
[01:43:34] <earlz> the handles method just returns self though, so it's possible to do that.. is there anyway to segregate it in a way like explicit interfaces in C# so that you woul dhave to manually cast to access the handles() method in an inappropriate context?
[01:44:05] *** Quits: vmx (vmx@8155E38.294C4FB6.EBB03D7A.IP) (Quit: Leaving)
[01:44:12] <strcat> earlz: wouldn't you just use different types?
[01:44:36] <kmc> yeah you can have a different struct for "thing on which handles() has already been called", and a trait so that most of the methods work on both
[01:44:56] *** Joins: lkuper_ (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[01:44:58] <earlz> Well, it's all one backing type that has handles() and with() implemented on it.. 
[01:45:08] <kmc> sure, the different struct would just wrap the first one in a priv field
[01:45:19] <earlz> ahhh.. I see
[01:45:20] <kmc> or it might be more concise if you use a phantom type parameter instead of a new struct
[01:45:38] <kmc> we do that in Servo to make certain methods callable from certain code only
[01:45:40] <earlz> phantom type parameter? 
[01:45:52] <kmc> struct Foo<T> { ... T is not used here ... }
[01:46:05] <kmc> but then you can do e.g. impl Foo<HandleNotCalled> { ... } and impl Foo<HandleHasBeenCalled> { ... }
[01:46:15] <kmc> for struct HandleNotCalled {}; struct HandleHasBeenCalled {};
[01:46:19] <kmc> i think there was a blog post about this recently
[01:46:20] <kmc> but I gotta run
[01:46:22] <kmc> ttyl all
[01:46:25] *** Quits: themgt (themgt@moz-9B7DF13D.baf.movistar.cl) (Ping timeout)
[01:46:25] <earlz> ah I see. 
[01:46:26] <earlz> thanks! 
[01:46:50] *** Joins: fabiand__ (fabiand@moz-D16E79E0.adsl.alicedsl.de)
[01:47:14] <mcpherrin> _Vi: A simple shell script version of rusti si http://csclub.uwaterloo.ca/~mimcpher/rusti
[01:47:21] <mcpherrin> (I meant to link earlier but my power went out)
[01:47:38] *** Quits: fabiand_ (fabiand@moz-8CBADDBC.adsl.alicedsl.de) (Ping timeout)
[01:47:51] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[01:47:58] <strcat> mcpherrin: use a here doc :)
[01:48:17] <mcpherrin> strcat: I know I could
[01:49:06] <mcpherrin> strcat: the time it takes me to remember heredoc syntax is longer than that to record a macro to wrap a line in echo "%s" >> $TMP
[01:49:09] <mcpherrin> :p
[01:50:00] <strcat> mcpherrin: you can actually feed stuff to rustc's stdin too
[01:50:04] <strcat> instead of using a temp file
[01:50:08] <strcat> I realized that I could do that for the irc bot
[01:50:20] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[01:50:26] <mcpherrin> strcat: Yeah, I know, I read irc.sh, but I wanted to have the temp file around for debugging
[01:50:30] <strcat> ah
[01:50:40] *** Joins: martndemus (martndemus@moz-876695FC.sshunet.nl)
[01:50:58] <mcpherrin> This started from irc.sh with a few seds :P
[01:51:37] <strcat> rusti: 2
[01:51:38] -rusti- 2
[01:52:09] *** Joins: brson (brson@981AA104.E81F12CD.76F66111.IP)
[01:52:10] *** ChanServ sets mode: +ao brson brson
[01:52:18] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[01:52:22] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Client exited)
[01:52:51] *** Quits: martndemus (martndemus@moz-876695FC.sshunet.nl) (Ping timeout)
[01:52:57] <strcat> rusti: use std::unstable::raw::Repr; let xs = &[1, 2, 3]; xs.repr()
[01:52:58] -rusti- std::unstable::raw::Slice<int>{data: (0x7fe42262a0e8 as *()), len: 3u}
[01:53:20] <strcat> rusti: use std::unstable::raw::Repr; let xs = &[1, 2, 3]; xs[std::uint::max_value / 8 + 2]
[01:53:21] -rusti- <anon>:9:13: 9:37 warning: unused import, #[warn(unused_imports)] on by default
[01:53:21] -rusti- <anon>:9          use std::unstable::raw::Repr; let xs = &[1, 2, 3]; xs[std::uint::max_value / 8 + 2]
[01:53:21] -rusti-                       ^~~~~~~~~~~~~~~~~~~~~~~~
[01:53:21] -rusti- task '<unnamed>' failed at 'index out of bounds: the len is 3 but the index is 2305843009213693953', <anon>:9
[01:53:23] -rusti- application terminated with error code 101
[01:53:25] <strcat> \o/
[01:53:44] *** Quits: azakai (alon@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[01:53:51] <strcat> still a lot of overflow bugs left to kill...
[01:54:11] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[01:54:35] *** Quits: eatkinson (eatkinson@moz-E57448EF.airbears2.berkeley.edu) (Quit: eatkinson)
[01:58:33] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[01:58:46] <erickt1> Eridius: ping
[02:00:42] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[02:03:28] *** Quits: brendan (brendaneic@moz-F2813A2B.hfc.comcastbusiness.net) (Quit: brendan)
[02:06:03] *** Joins: lfox (lfox@moz-F9C0E858.nycmny.east.verizon.net)
[02:07:01] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[02:07:06] <skeet70> Is it possible to apply .map to a string somehow?
[02:07:17] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[02:07:40] <strcat> skeet70: strings have several iterators, and map is provided for them
[02:07:56] <strcat> http://static.rust-lang.org/doc/master/std/iter/trait.Iterator.html
[02:08:06] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[02:10:27] *** Quits: p_adams (p_adams@moz-EB08CC70.dhcp.stls.mo.charter.com) (Quit: WeeChat 0.4.2)
[02:10:48] <earlz> Is there a standard for commenting code so that documentation can be easily generated from it?
[02:10:54] *** Joins: andrew-__ (andrew-d_w@moz-5A92CAFF.dsl.static.sonic.net)
[02:11:30] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Ping timeout)
[02:11:33] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[02:12:05] <strcat> earlz: doc comments are part of the language
[02:12:06] *** Joins: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com)
[02:12:24] <strcat> rustdoc turns them into auto-generated documentation
[02:13:04] <brson> earlz: here are some conventions, may be out of date https://github.com/mozilla/rust/wiki/Doc-using-rustdoc
[02:13:21] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[02:14:19] <earlz> thanks 
[02:16:08] *** Quits: andrew-__ (andrew-d_w@moz-5A92CAFF.dsl.static.sonic.net) (Ping timeout)
[02:16:54] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[02:18:08] *** Quits: echristo (echristo@4EEA9249.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[02:18:29] *** Quits: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net) (Ping timeout)
[02:18:30] *** Quits: brson (brson@981AA104.E81F12CD.76F66111.IP) (Ping timeout)
[02:19:57] *** Joins: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net)
[02:23:26] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[02:23:57] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: Leaving.)
[02:24:12] *** Quits: GGpin (hell@moz-B9EFFE2E.dyn.optonline.net) (Client exited)
[02:24:16] *** Joins: GGpin (hell@moz-B9EFFE2E.dyn.optonline.net)
[02:24:41] *** Quits: zz_kimundi (kimundi@moz-265AA1A2.dip0.t-ipconnect.de) (Ping timeout)
[02:26:43] *** Joins: jhenahan (jhenahan@moz-65B7D4EE.hsd1.vt.comcast.net)
[02:27:36] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[02:27:51] *** Joins: zz_kimundi (kimundi@moz-55AF642C.dip0.t-ipconnect.de)
[02:28:08] *** zz_kimundi is now known as kimundi
[02:28:10] <Eridius> erickt1: pong
[02:29:18] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[02:31:20] *** jorendorff_away is now known as jorendorff
[02:31:24] *** Quits: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net) (Ping timeout)
[02:31:39] *** Joins: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net)
[02:33:22] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[02:33:32] *** Quits: dew (Instantbir@moz-8EDFD40B.static.stls.mo.charter.com) (Connection reset by peer)
[02:33:33] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[02:33:46] *** Quits: lfox (lfox@moz-F9C0E858.nycmny.east.verizon.net) (Quit: ZZZzzz…)
[02:34:25] <erickt1> Eridius: hey there. Are there any paths I can't convert to a str?
[02:34:54] <strcat> yes
[02:35:31] <strcat> valid paths vary per filesystem, but traditional *nix filesystems allow every byte that's not '\0' or '/'
[02:35:42] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[02:35:42] *** ChanServ sets mode: +ao dherman dherman
[02:36:03] <heftig> why does grust have that weird utf8 wrapper?
[02:36:31] <heftig> i.e. this: https://github.com/mzabaluev/grust/blob/master/grust/gstr.rs
[02:37:07] <strcat> dunno, but glib doesn't actually support UTF-8
[02:37:16] <strcat> it doesn't allow \0 since it uses C strings
[02:37:20] <erickt1> strcat: that would limit converting any string into a path, I'm referring to the other way around.
[02:37:35] <strcat> it supports a useful *subset* of UTF-8
[02:37:40] <Eridius> erickt1: paths may be any byte sequence outside of \0. This means they may not be UTF-8
[02:37:48] <strcat> so that might be the reason
[02:37:49] * strcat shrugs
[02:37:50] <Eridius> erickt1: if the path is not utf-8, then you cannot convert it to a string
[02:38:11] <Eridius> erickt1: the new Path API was designed to make it hard to ignore this
[02:38:44] <Eridius> if you need to display paths to users, you can use .display() or .filename_display(). These return values that implement fmt::Default
[02:39:17] <Eridius> but do not mistake that as meaning you can use them to produce usable values. The printed string from these uses the unicode replacement character for any non-utf8 byte sequence
[02:39:25] <Eridius> so they're purely intended for display purposes
[02:39:41] <Eridius> there's a bunch of APIs we now need to update to support vectors, such as Process arguments/environment
[02:40:32] <erickt1> Eridius: I'm trying to implement Decodable/Encodable for path. Is it possible to use fmt::Default to represent all strings?
[02:40:49] <Eridius> what do you mean, to represent all strings?
[02:40:56] <Eridius> fmt::Default is just for printing using format!("{}", ...)
[02:41:04] <Eridius> in the case of path, it's a lossy conversion
[02:41:58] <Eridius> erickt1: if you want to encode/decode a path, the simplest way is probably to just encode/decode the underlying vector
[02:42:36] <Eridius> hrm, I wonder if Encoder could benefit from having an .emit_u8_vec() method. Those can't be that uncommon
[02:42:37] <qmx> I need to pass two unsigned char[32] to a C function - any tips on how to allocate this on the rust side? n00b here
[02:42:47] <Eridius> [libc::c_char, ..32]
[02:43:00] <Eridius> although that's not strictly necessary to do it that way
[02:43:06] <Eridius> an array as a C function argument is really just a pointer
[02:43:10] <erickt1> Eridius: that's what I'm doing right now, I was just hoping there was some way I could escape all the non-utf8 characters so it could be prettier.
[02:43:25] <Eridius> qmx: so you could just allocate any 32-element ~[libc::c_char] and use that instead
[02:43:32] <erickt1> Eridius: for example, when serializing to json
[02:44:04] <erickt1> Eridius: you can just use `~[5u8].encode(&mut encoder)`
[02:44:12] <Eridius> ah
[02:44:26] <Eridius> erickt1: paths aren't comprised of characters. They're comprised of bytes
[02:44:33] <Eridius> you cannot represent that in a JSON string, since JSON strings represent characters
[02:44:51] <erickt1> k. vectors it is
[02:45:04] <Eridius> erickt1: if you really wanted you could produce some hack, by defining an escape yourself that you then decode yourself. but that sucks
[02:45:05] *** jorendorff is now known as jorendorff_away
[02:45:25] <erickt1> that's pretty nasty.
[02:45:27] <Eridius> alternatively, you could define two separate representations for a path, one is str-like and the other is vec-like. Use the str-like one if the path is str-convertable, the vec-like one otherwise
[02:45:27] <qmx> Eridius: what's the syntax for allocating it?
[02:45:33] *** Quits: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net) (Quit: leaving)
[02:45:38] <qmx> RTFM's welcome
[02:45:40] <qmx> kinda lost
[02:46:07] *** Joins: jvns_ (bork@moz-DE62990.nyc.res.rr.com)
[02:46:21] <Eridius> qmx: do you want to stack-allocate or heap-allocate? They're pretty small so let's say stack-allocate
[02:46:29] <Eridius> in that case, the type is [libc::c_char, ..32] which is a 32-element array
[02:46:41] <qmx> ah, the ..32 was the missing part
[02:46:44] <Eridius> `let x: [libc::c_char, ..32] = [0, ..32]` will zero-allocate an array for you
[02:47:03] <Eridius> then you can use std::vec::raw::to_ptr(x) to produce a *libc::c_char suitable for passing to the C function
[02:47:03] <qmx> this is de-allocated when it's out of scope, right?
[02:47:06] <Eridius> yes
[02:47:09] <qmx> awesome
[02:47:14] <qmx> thanks
[02:48:25] *** Quits: sp3d (s@6361F3B1.19CD1E54.8354FB35.IP) (Quit: sp3d)
[02:48:52] *** Joins: mib_avm675 (Mibbit@7D406E64.18FD1B80.B9D97DBA.IP)
[02:49:43] *** Quits: mib_avm675 (Mibbit@7D406E64.18FD1B80.B9D97DBA.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[02:50:46] *** fmt is now known as fmtq
[02:50:56] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Client exited)
[02:51:16] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[02:51:56] *** Joins: spott_ (spott@moz-9B11536C.hsd1.co.comcast.net)
[02:51:56] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Connection reset by peer)
[02:52:17] *** Joins: martndemus (martndemus@moz-876695FC.sshunet.nl)
[02:52:38] *** Quits: kurisumasu (queen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Quit: G'night everynyan~!)
[02:53:32] <Eridius> erickt1: btw, you might want to serialize whether the path is a PosixPath or a WindowsPath. Serializing one and deserializing as the other would be rather confusing
[02:54:27] *** Quits: martndemus (martndemus@moz-876695FC.sshunet.nl) (Ping timeout)
[02:54:31] *** Quits: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca) (Quit: Leaving.)
[02:54:36] <erickt1> Eridius: sure, I can do that
[02:54:47] *** Quits: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca) (Quit: Leaving)
[02:54:56] *** Quits: JanC__ (janc@moz-21724FF1.dsl.scarlet.be) (Ping timeout)
[02:56:05] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[03:00:45] *** Quits: rveach (rveach@410D297A.C7FE7DD2.1302FB2C.IP) (Ping timeout)
[03:03:27] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[03:07:04] <jack> any reason I'd be getting "Ptr must be a pointer to Val type" asserts when trying to compile glfw-rs using rust as of about 2 weeks ago?
[03:07:19] <jack> it's a commit between strcats immediate PRs
[03:08:49] *** Joins: dbaupp (Thunderbir@7B3DE86F.D5A1DCF.37681C44.IP)
[03:09:17] *** Joins: sp3d (s@6361F3B1.19CD1E54.8354FB35.IP)
[03:10:00] <jack> looks like it's probably this https://github.com/mozilla/rust/issues/9692. i'll have ot move past the second immediate PR.
[03:10:17] *** Joins: JanC__ (janc@moz-4CCD39BC.dsl.scarlet.be)
[03:11:07] <qmx> Eridius: I think I'm getting closer, https://gist.github.com/qmx/7018680
[03:11:33] <qmx> note the several attempts of getting it right ;)
[03:11:40] *** Quits: BitPuffin (isak@moz-98F8BF74.cust.tele2.se) (Ping timeout)
[03:12:48] *** Quits: lkuper_ (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper_)
[03:12:50] *** Joins: lkuper_ (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[03:12:56] <strcat> jack: yeah there was breakage in between, I had to fix ~6 unrelated bugs in the process of it and they would have effected the earlier commits (and newtype structs, which were already immediate)
[03:12:57] <Eridius> qmx: use to_mut_ptr instead of to_ptr if you need a *mut T
[03:13:16] <strcat> jack: the big one was that we used the wrong type to make the alloca for translating to FFI
[03:13:22] *** Joins: eddyb (eddy@3C6E2DBB.FFB4E060.A5830293.IP)
[03:13:25] <Eridius> qmx: and you need to convert sk to a pointer too, not just pk
[03:13:34] <qmx> yeah, that was trial and error ;)
[03:13:38] <strcat> we make an alloca and store the value there, so that we can cast a ptr to what the platform ABI wants
[03:13:47] *** Joins: jxv (jxv@4732E7D7.2AB34561.9B38A32A.IP)
[03:13:49] <strcat> but we used the type the platform ABI wanted rather than our type
[03:13:55] <strcat> so... the cast never had a purpose before ;p
[03:14:06] <lkuper_> so, just now I was trying to do this toy reverse-a-string-in-place problem in rust, and I'm unhappy with what I came up with: https://gist.github.com/lkuper/7018709
[03:14:22] <lkuper_> it's super-unsafe, and I couldn't seem to figure out how to avoid the .clone() :(
[03:14:28] <strcat> lkuper_: check out what the iterator reverse method does
[03:14:47] *** Quits: Jesin (Jessin_@moz-76F15F40.cc.lehigh.edu) (Quit: Leaving)
[03:15:00] <Eridius> lkuper_: reversing a string in-place like that is not going to work for non-ASCII
[03:15:03] <strcat> lkuper_: https://github.com/mozilla/rust/blob/master/src/libstd/iter.rs#L697
[03:15:19] <Eridius> lkuper_: to reverse utf-8 in place you need to reverse the entire string once, then reverse every multi-byte subsequence
[03:15:31] *** Joins: Jesin (Jessin_@moz-76F15F40.cc.lehigh.edu)
[03:15:33] <strcat> lkuper_: double-ended iterators let you do things like this because they know they're a one-pass over the container
[03:15:37] *** Quits: Jesin (Jessin_@moz-76F15F40.cc.lehigh.edu) (Input/output error)
[03:15:38] *** Joins: rveach (rveach@410D297A.C7FE7DD2.1302FB2C.IP)
[03:15:47] <strcat> (and you can reverse a dlist or deque too)
[03:16:07] <strcat> ofc the iterator uses unsafe code... but something has to :p
[03:16:16] <strcat> none of the adaptors need to
[03:16:26] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[03:16:37] <dbaupp> Eridius: and then properly semantically reversing a string requires handling combining charaters correctly too
[03:17:08] <dbaupp> strcat: I'm not sure the iterator *needs* unsafe code, vector matching should be able to make it work safely (although slowly)
[03:17:31] *** Joins: Jesin (Jessin_@moz-76F15F40.cc.lehigh.edu)
[03:17:46] <strcat> you could write the iterator with slices
[03:17:55] <strcat> but you need unsafe code to split an &mut slice in two (mut_split)
[03:18:10] <Eridius> dbaupp: screw semantics :P
[03:18:19] <strcat> the code to split an &mut slice has to be *somewhere*
[03:18:23] <dbaupp> strcat: don't need to split into 2, just need to seperate into an element at the start (or end) and the rest
[03:18:30] <dbaupp> which vector matching should be able to do
[03:18:31] <strcat> dbaupp: well yeah, but that's splitting in two ;p
[03:18:40] <dbaupp> strcat: right, but it doesn't require unsafe code
[03:18:46] <strcat> dbaupp: isn't vector matching just with immutable slices?
[03:18:54] <strcat> yeah but vector matching is unsafe code in the compiler
[03:18:59] <strcat> it doesn't matter where this is implemented
[03:19:15] <lkuper_> oh, I didn't know about util::swap!
[03:19:24] <dbaupp> strcat: well, this use-case doesn't work because matching handles &mut[] incorrectly, yes
[03:19:29] <strcat> lkuper_: the tricky part is getting two &mut refs to the container though
[03:19:40] <strcat> lkuper_: there's a mut_slice method to split one
[03:19:47] <strcat> dbaupp is suggesting using matching eventually
[03:19:48] <lkuper_> strcat: yeah, that was a problem when I was writing my code
[03:19:55] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[03:21:12] <dbaupp> strcat: https://github.com/mozilla/rust/issues/8636 (well, not suggesting since it would likely be slower, just saying that it would work.)
[03:21:28] <strcat> it would probably compile to the same thing
[03:22:00] <jack> strcat: cool. i foudn this trying to bisect for a servo bug. i'll just hav eto hope it's not in the middle of yoru two PRs :)
[03:22:08] <strcat> lkuper_: oh and vectors have a swap method
[03:22:23] <strcat> but what I really want is a MutableRandomAccess trait with swap
[03:22:49] <strcat> jack: it would be easy to cherry-pick the fix, I think it's a one line change
[03:23:10] <qmx> Eridius: thanks! it worked fine
[03:23:12] *** Joins: tautologico (shung@703660AA.CFE755C8.C27E1635.IP)
[03:23:30] <strcat> jack: the foreign.rs change in f504461a40d0f6fd88983be6d744c8d62b430506
[03:23:53] <Eridius> qmx: \o/
[03:24:07] <qmx> ridiculously easy compared to my autotools black magic ;)
[03:24:10] <lkuper_> strcat: oh, in the MutableVector trait -- I should've looked there
[03:25:01] *** Joins: ross (ross@moz-5EA04060.br.br.cox.net)
[03:25:11] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[03:25:20] <strcat> lkuper_: yeah I really want to cut the API size down more so it's easier to find the meat ;p
[03:25:23] *** Joins: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca)
[03:25:52] <strcat> + allow impls on built-in types in libstd so we don't need all that weird trait obfuscation
[03:26:00] <dbaupp> also, fixing either how builtins are impled & rustdoc to make it easier
[03:26:05] <dbaupp> yeah
[03:26:22] *** Quits: pcwalton (pcwalton@moz-B51927E9.hsd1.ca.comcast.net) (Quit: pcwalton)
[03:27:25] *** Quits: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca) (Ping timeout)
[03:27:26] <lkuper_> haha, oh, also, "right + 1" in my code should've been "right - 1" :)
[03:28:00] <tautologico> so, what was the trouble with rusti again? I've read some discussion about allowing fork in the interpreter, but why? is there some problem with the design?
[03:28:06] *** Joins: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca)
[03:28:15] <strcat> tautologico: it's not a proper REPL at all
[03:28:20] <tautologico> I know
[03:28:26] <strcat> oh you mean with fork?
[03:28:33] <strcat> it's *really* hard to make a multi-threaded program fork-safe
[03:28:43] <strcat> and that won't work on Windows, which is a requirement
[03:28:44] <tautologico> I'm trying to get an idea about its internal problems and how hard they are to fix
[03:29:08] <strcat> I think starting over would be easier, and not worrying about a UI
[03:29:16] <strcat> just getting a basic REPL working is a huge task
[03:29:37] <strcat> the UI part can be easily redone later, and hopefully with a better lib than that linenoise one ;p
[03:29:55] <tautologico> yeah apparently linenoise will be removed as well
[03:30:29] <strcat> only rusti used it
[03:30:55] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Quit: ChatZilla 0.9.90.1 [Firefox 24.0/20130910160258])
[03:31:18] *** Quits: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca) (Ping timeout)
[03:31:49] <eddyb> rusti: &5
[03:31:52] -rusti- pastebinned 18 lines of output: http://ix.io/8x5
[03:31:57] <dbaupp> of course, it'll be removed just after I fixed it to be safe! :'( haha
[03:32:04] <dbaupp> rusti: &'static 5
[03:32:06] -rusti- pastebinned 18 lines of output: http://ix.io/8x6
[03:32:26] <skeet70> Can anyone help out? I'm not sure what the errors we're getting mean after trying to make this quicksort multithreaded: http://hastebin.com/memexucame.cs
[03:32:32] <strcat> dbaupp: the lock?
[03:32:41] <dbaupp> strcat: yeah
[03:32:43] <dbaupp> (well, "safe")
[03:32:51] <strcat> my familiarity with the linenoise wrapper starts and ends with the fact that it has a lock, since I had to delete that
[03:32:52] <strcat> ;p
[03:32:55] <skeet70> errors: http://hastebin.com/naliqicite.avrasm
[03:33:27] <lkuper_> strcat: so I updated it to use swap(), and it's a lot nicer, but I'm still not sure about getting rid of clone()
[03:33:35] <dbaupp> strcat: that's mine too... I was just assigned it for triage.
[03:33:45] <strcat> lkuper_: can you link it again?
[03:33:52] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[03:34:41] <dbaupp> skeet70: no idea about the errors, but a sufficiently new version of rust will allow you to write `let numbers: ~[int] = std::rand::task_rng().gen_vec(1000);` rather than writing the loop
[03:34:46] <strcat> lkuper_: oh nvm
[03:36:22] <strcat> lkuper_: it does work if I remove the return value + the clone
[03:36:34] <skeet70> dbaupp Just using .8 installed with homebrew, complains about IsaacRng not having gen_vec. Using the for loop isn't really a problem though :D
[03:36:44] <strcat> (although as someone - dbaupp? - mentioned before, it's unsafe due to possibly making an invalid UTF-8 str)
[03:37:12] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[03:37:36] <dbaupp> skeet70: oh, slightly too old, nevermind then :)
[03:38:07] <skeet70> dbaupp haha np. No ideas on how to get passing the vector pointer to the threads working though?
[03:39:08] <dbaupp> skeet70: you may need to use an Arc (extra::arc::Arc) so that you can share the vector
[03:39:21] <dbaupp> ... although you really need a mutable one for sorting it
[03:39:24] <lkuper_> strcat: oh nice, and then I don't have to turn it back into a string
[03:39:41] <lkuper_> strcat: funny, I don't think that worked before when I was swapping it by hand
[03:39:45] <skeet70> dbaupp isn't it declared as mutable though? Or are we declaring that incorrectly?
[03:39:53] <dbaupp> skeet70: we currently don't have a non-`unsafe` way to share subsections of vectors between tasks, so that'll be had
[03:40:40] <skeet70> It should be okay for it to be unsafe, since the partitions are separated ahead of time (so swaps can only happen in it's own segment).
[03:40:50] <dbaupp> skeet70: (an Arc only stores immutable data, the can-store-mutable-data equivalents RWArc and MutexArc use locks for any attempt to modify the contents, and so will make parallelising the qsort pointless, since all access to the vector is serialised)
[03:41:17] <strcat> rusti: "foo".iter().invert().collect::<~str>()
[03:41:18] -rusti- ~"oof"
[03:41:21] <skeet70> hmmm
[03:41:26] <strcat> lkuper_: boring safe way ;p
[03:41:40] <strcat> I think an in-place reverse correctly handling UTF-8 would be really hard
[03:41:42] <strcat> y
[03:41:48] <dbaupp> skeet70: yeah, you could pass `*&mut [T]` pointers to the sub-tasks, but you have to be very careful with (1) disjoint-ness of the &mut and (2) makign sure the subtasks don't out live the parents
[03:41:49] <strcat> you'd need to have some side buffer thing to stick parts in
[03:42:16] <lkuper_> strcat: yeah, I wanted to do it "by hand" to see if I could
[03:42:19] <dbaupp> skeet70: there are plans for a fork-join library which would make this safe operation easy & possible without `unsafe`.
[03:42:45] <skeet70> Isn't there already a thread join? Or did I read that wrong?
[03:42:48] <eddyb> error: duplicate entry for `exchange_malloc`
[03:42:48] <SiegeLord> Can you not create dynamically checked safe slices?
[03:43:05] <strcat> how would dynamic checking work?
[03:43:25] <lkuper_> final version: https://gist.github.com/lkuper/7018709
[03:43:26] <SiegeLord> Upon slice creation it'd check if the subsection is already taken
[03:43:48] <strcat> SiegeLord: so that would make vectors larger, since they'd need to store that data
[03:43:56] <skeet70> dbaupp http://static.rust-lang.org/doc/0.8/std/rt/thread/struct.Thread.html the join in there? So there's currently no way to force a wait? We were thinking of using a shared connection (in the code) to force a wait for all the children.
[03:43:58] <strcat> and you can slice into slices
[03:44:05] <eddyb> I may have cycles :(
[03:44:12] <SiegeLord> It'd have to be a separate type from the current vectors
[03:44:17] <lkuper_> Eridius, dbaupp: that's true about multi-byte stuff, I didn't wanna worry about that
[03:44:43] <strcat> SiegeLord: you can use mut_split to create disjoint slices
[03:45:06] <dbaupp> skeet70: that's an implementation detail, the "correct" wait to wait (I believe) is to use a stream (or a one-shot stream) which each tasks .send's to when they finish, and the parent sits there .recv-ing
[03:45:28] *** Joins: jensnockert (jensnocker@moz-D12CA539.mobileonline.telia.com)
[03:45:35] <dbaupp> skeet70: (i.e. things in std::rt aren't really for public use, except std::rt::io, which will become std::io soon, hopefully)
[03:45:35] *** Quits: jensnockert (jensnocker@moz-D12CA539.mobileonline.telia.com) (Connection reset by peer)
[03:46:12] <skeet70> dbaupp Yeah, that's what we're doing, using the SharedConn. Maybe we'll just split the partitions into separate variables and pass those to the children, then merge when they're done?
[03:46:40] <SiegeLord> Ah, didn't know about mut_split
[03:46:54] <skeet70> We're just doing this for an OS assignment, so unstable-ness isn't really too big of a problem. Other than asking annoying IRC questions vs using current docs obviously haha
[03:46:58] *** Joins: barosl (barosl@3DE683B6.E551553C.7544CABF.IP)
[03:48:21] <dbaupp> skeet70: if it works, that's fine (but, you're not going to get any speed-up if you copy the vector into the children rather than sharing sub-slices of the original one, which can only be done by passing an unsafe pointer to the slices atm)
[03:48:47] <dbaupp> skeet70: (anyway, I've gtg, sorry for not being more help)
[03:48:58] <skeet70> dbaupp no problem. Thanks for the help.
[03:49:24] <eddyb> module A imports module B and module C. how can I use B from C? this is actually highly confusing
[03:50:06] <tautologico> eddyb: you can use B; inside C
[03:50:16] <eddyb> doesn't work
[03:50:27] <eddyb> wait, I'm stupid, used the wrong function name :(
[03:50:33] <tautologico> it's not confusing if you think about the tree
[03:51:57] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Client exited)
[03:52:03] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[03:53:30] *** Joins: martndemus (martndemus@moz-876695FC.sshunet.nl)
[03:53:32] <lkuper_> strcat: your "foo".iter().invert().collect::<~str>() way of doing it above is in-place?  that's non-obvious!
[03:53:43] <strcat> lkuper_: no, not in-place
[03:53:49] <lkuper_> ohhh
[03:53:51] <lkuper_> okay
[03:53:59] <strcat> iter().invert() gets a reverse iterator and collect allocates a container
[03:54:46] <strcat> lkuper_: in-place is tricky for strings since you need to actually move the 1-4 block of bytes representing the character
[03:54:59] <strcat> block of 1-4 bytes*
[03:55:20] * strcat isn't sure it is possible
[03:55:33] *** Quits: martndemus (martndemus@moz-876695FC.sshunet.nl) (Ping timeout)
[03:55:41] <lkuper_> hm, so is that version safe for multi-byte chars?
[03:55:47] <strcat> lkuper_: yeah
[03:55:57] <strcat> lkuper_: iter() is over chars, and collect knows how to turn chars back into a str
[03:56:03] *** Quits: jhenahan (jhenahan@moz-65B7D4EE.hsd1.vt.comcast.net) (Quit: Textual IRC Client: www.textualapp.com)
[03:56:45] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Ping timeout)
[03:56:53] <strcat> storing invalid UTF-8 in a str is actually memory-unsafe because it could break code (matching?) depending on that invariant
[03:58:14] <lkuper_> yeah, I wouldn't want to do multi-byte in-place...it would no-longer be "in-place" in a sense because char boundaries would change...
[03:59:08] *** Quits: rveach (rveach@410D297A.C7FE7DD2.1302FB2C.IP) (Client exited)
[04:00:01] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[04:00:02] <strcat> lkuper_: I think if you had a 4-byte buffer as scratch space you might be able to do it
[04:00:07] <strcat> it'd be weird though
[04:00:56] <strcat> two 4-byte buffer scratch spaces*
[04:01:00] <strcat> and maybe more...
[04:01:05] <lkuper_> or if strings were always represented with 4 bytes for every char
[04:01:06] *** Quits: dbaupp (Thunderbir@7B3DE86F.D5A1DCF.37681C44.IP) (Ping timeout)
[04:01:14] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[04:01:28] <strcat> lkuper_: well, then you would just use ~[char] :)
[04:01:46] <strcat> the useful part of ~str is that it enforces UTF-8 encoding
[04:01:52] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[04:02:07] <strcat> (ignoring the weakness/strengths of the stdlib in regards to strings vs vectors)
[04:02:09] <skeet70> cannot borrow an `&mut` in an aliasable location ?? What is an aliasable location?
[04:03:08] *** Quits: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[04:05:18] *** Quits: alan (alan@moz-F8EE186F.lightspeed.snantx.sbcglobal.net) (Quit: alan)
[04:05:38] *** Quits: GGpin (hell@moz-B9EFFE2E.dyn.optonline.net) (Client exited)
[04:05:42] *** Joins: GGpin (hell@moz-B9EFFE2E.dyn.optonline.net)
[04:05:43] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Ping timeout)
[04:06:11] <Eridius> lkuper_: interestingly, reversing a utf-8 string in-place is identical to reversing the order of words in a sentence
[04:06:32] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[04:06:50] <lkuper_> Eridius: reversing the sentence in-place?  yeah, that makes sense
[04:06:59] <strcat> Eridius: hm?
[04:07:03] *** Quits: canhtak (jeremy@moz-3DC6023A.wl.t.ulaval.ca) (Quit: canhtak)
[04:07:13] <strcat> you could reverse a string in many ways
[04:07:21] <Eridius> well, reversing it in linear time and constant memory
[04:07:25] <Eridius> in-place
[04:07:37] <strcat> oh
[04:07:56] <strcat> yeah I realized it involves more swaps around than I considered
[04:08:23] <strcat> |4444|4444|4444|1|1|1| where that's a string of 6 characters
[04:09:08] *** Quits: jvns_ (bork@moz-DE62990.nyc.res.rr.com) (Ping timeout)
[04:09:12] <strcat> (you could make a much worse one ;p)
[04:09:19] *** Joins: ksh8281 (ksh8281@5AB4884B.FCC4549.14D5B978.IP)
[04:11:03] <tautologico> what's #[feature(globs)] ?
[04:11:12] <lkuper_> reminds me of the kind of stuff folks have to do for dealing with irregular matrix computations on GPUs
[04:11:16] <Eridius> a feature gate for `use mod::*;`
[04:11:22] <tautologico> oh
[04:12:31] <SiegeLord> Don't forget to write it as #[feature(globs)];
[04:13:41] *** Quits: jeffdb_ (jeff@moz-D13B6004.hsd1.ca.comcast.net) (Quit: jeffdb_)
[04:14:55] *** Joins: jeffdb_ (jeff@moz-D13B6004.hsd1.ca.comcast.net)
[04:16:47] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[04:17:29] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[04:19:19] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[04:20:10] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[04:20:13] *** Quits: GGpin (hell@moz-B9EFFE2E.dyn.optonline.net) (Quit: Falling asleep)
[04:22:52] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[04:23:11] *** Quits: ldunn (username@moz-94CB0FA.cyberius.net) (Ping timeout)
[04:23:40] *** Quits: fairfieldt (fairfieldt@moz-D8998E1C.xen.prgmr.com) (Ping timeout)
[04:23:40] *** Quits: btipling (btipling@moz-D51E0AEB.xen.prgmr.com) (Ping timeout)
[04:25:07] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[04:25:23] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[04:25:34] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[04:25:39] *** Joins: btipling (btipling@moz-D51E0AEB.xen.prgmr.com)
[04:26:34] *** Joins: ldunn (username@moz-94CB0FA.cyberius.net)
[04:27:13] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[04:27:14] *** ChanServ sets mode: +ao dherman dherman
[04:27:21] *** Joins: fairfieldt (fairfieldt@moz-D8998E1C.xen.prgmr.com)
[04:32:15] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[04:32:41] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[04:33:21] *** Joins: andrew-d_w (andrew-d_w@moz-5A92CAFF.dsl.static.sonic.net)
[04:33:39] *** Quits: _Vi (vi@527C345F.497AA854.B16B3BE6.IP) (Ping timeout)
[04:34:11] *** Quits: crembo (crembo@moz-C2B364AA.vc.shawcable.net) (Client exited)
[04:34:46] *** Quits: sp3d (s@6361F3B1.19CD1E54.8354FB35.IP) (Ping timeout)
[04:35:43] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[04:37:38] *** Quits: andrew-d_w (andrew-d_w@moz-5A92CAFF.dsl.static.sonic.net) (Input/output error)
[04:37:52] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[04:37:59] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[04:38:42] *** Joins: sankha93 (Instantbir@B880ADB9.6961CCB6.25B273F5.IP)
[04:39:07] *** Joins: andrew-__ (andrew-d_w@moz-5A92CAFF.dsl.static.sonic.net)
[04:39:50] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Ping timeout)
[04:41:35] *** jld|afk is now known as jld
[04:41:47] *** Quits: andrew-__ (andrew-d_w@moz-5A92CAFF.dsl.static.sonic.net) (Input/output error)
[04:42:42] *** Quits: ross (ross@moz-5EA04060.br.br.cox.net) (Quit: )
[04:45:48] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[04:46:55] *** Quits: diegoyam (quassel@FF9B1514.A4EC3D18.3A1EC144.IP) (Ping timeout)
[04:47:12] *** Joins: diegoyam (quassel@FF9B1514.A4EC3D18.3A1EC144.IP)
[04:49:31] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[04:51:21] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[04:55:07] *** Joins: martndemus (martndemus@moz-876695FC.sshunet.nl)
[04:55:13] *** Joins: _Vi (vi@527C345F.497AA854.B16B3BE6.IP)
[04:55:56] *** Quits: sankha93 (Instantbir@B880ADB9.6961CCB6.25B273F5.IP) (Ping timeout)
[04:56:50] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[04:57:09] *** Quits: martndemus (martndemus@moz-876695FC.sshunet.nl) (Ping timeout)
[04:59:20] *** Joins: ab (alex@BC9D99CC.37C1012D.FE617B51.IP)
[05:00:34] <skeet70> dbaupp mentioned passing an unsafe pointer to allow all these threads to access our vector at the same time. Which is an unsafe pointer? Any example of this kind of thing?
[05:00:39] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[05:01:01] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[05:01:13] <skeet70> We can't use Arc on the data since it's mutable, and can't use RWArc because in this case it will take away all the benefits of multiple threads...
[05:01:57] <skeet70> We kinda need to just allow unsafe access, and trying to split and pass pointers to the split areas quickly ballooned the code out of control.
[05:02:10] <skeet70> Suggestions are welcome if anyone is still around :/
[05:03:35] <Eridius> skeet70: what is your use case?
[05:04:26] *** Joins: [squiddy] (squiddy@moz-D3754FCB.adsl.alicedsl.de)
[05:05:16] <skeet70> We're trying to quicksort a vector, with four threads handling four subsections of it
[05:06:33] <strcat> you can split a mutable slice with mut_split
[05:06:34] <Eridius> if you want to be quick & dirty about it, use std::cast::transmute_mut_region() on the results of vec.mut_slice() to remove the associated region
[05:06:35] <skeet70> http://hastebin.com/galofifile.cs is our current state. Error's all relate to cloning the numbers vector, and something about implicitly capturing it.
[05:06:56] <strcat> when there's an implementation of fork-join, you would be able to pass the slices from mut_slice to different workers
[05:07:35] <skeet70> We actually tried to do that already, that was when the code ballooned like crazy.
[05:07:47] *** Joins: voxpopuli (fanservice@moz-424BC304.hsd1.pa.comcast.net)
[05:07:48] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[05:07:48] *** ChanServ sets mode: +ao dherman dherman
[05:08:46] *** Quits: yusukesuzuki (yusukesuzu@moz-FEE44B6.net220148245.t-com.ne.jp) (Ping timeout)
[05:08:50] <skeet70> Our first attempt was to split, pass to threads, wait on a return, then join. Second was Arc before we realized it was immutable only, third was RWArc before we realized that was going to negate the benefits of parallelization in this case.
[05:09:03] *** Joins: yusukesuzuki (yusukesuzu@moz-FEE44B6.net220148245.t-com.ne.jp)
[05:09:31] <skeet70> Now we're back to square one of just wanting to pass an unsafe pointer of some sort so that each one can sort in place (since their bounds are pre partitioned)
[05:09:51] <Eridius> hrm, yeah, skeet70, did you try mut_split as strcat suggested?
[05:09:54] <Eridius> (I didn't realize we had that)
[05:09:55] <Eridius> http://static.rust-lang.org/doc/master/std/vec/trait.MutableVector.html#tymethod.mut_split
[05:10:17] <skeet70> Yeah, that was the first thing we tried.
[05:10:23] <Eridius> why didn't that work?
[05:10:52] <skeet70> Honestly it was like three hours ago now, but there were 20 something errors, and every change added more :/
[05:11:02] *** Quits: jordyd (jordyd@moz-A4658EC8.seg41.ucf.edu) (Ping timeout)
[05:11:09] <Eridius> unfortunately I have to recompile rust, or I'd try your code right now
[05:12:10] *** Joins: pepper_chico (pepper_chi@5B1C9931.F07E9C90.2E5C92D8.IP)
[05:13:27] *** Quits: Kxepal (Miranda@moz-2EDC98B.pppoe.mtu-net.ru) (Ping timeout)
[05:14:04] <skeet70> Retrying the mut_split right now just to be sure… but yeah. A way to just let them go at it would be awesome right now :P
[05:14:32] *** Quits: nwmcsween (nwmcsween@E0025B86.51EE1362.3655BBF5.IP) (Connection reset by peer)
[05:15:37] *** Joins: nwmcsween (nwmcsween@E0025B86.51EE1362.3655BBF5.IP)
[05:16:08] *** Quits: tautologico (shung@703660AA.CFE755C8.C27E1635.IP) (Quit: tautologico)
[05:16:33] *** Joins: Kxepal (Miranda@moz-D440E09C.pppoe.mtu-net.ru)
[05:17:40] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[05:18:49] <skeet70> Alright, looks like the errors are all along the lines of referencing the slices from aliasable locations?
[05:18:54] <skeet70> Whatever that means?
[05:20:08] <Eridius> not sure what error you're talking about
[05:20:19] <Eridius> but it just occurred to me that of course you can't use mut_slice(). You're sending to another task. You can't send borrowed pointers
[05:20:42] <strcat> sure, but you can at least get the slices with mut_slice
[05:20:57] <skeet70> http://hastebin.com/tidelepogi.hs errors
[05:20:58] <Eridius> skeet70: what you can do is convert your slices into (*mut T, uint) where the uint is the length. Then using unsafe code you can do whatever you want
[05:21:01] <strcat> with fork-join parallelism you could give one slice to each worker
[05:21:19] <skeet70> http://hastebin.com/jefigifiwo.cs code now
[05:21:29] <Eridius> skeet70: that's a kind of obscure error
[05:22:04] <strcat> skeet70: yeah, you won't be able to send the &mut as-is
[05:22:19] <skeet70> the endpoints down in the send are all wrong, but that's not the issue now anyways
[05:22:24] <skeet70> okay
[05:22:32] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[05:22:53] <strcat> skeet70: there isn't a way to do parallelism like that yet
[05:23:05] <skeet70> noooooooooooooooooooooooooo
[05:23:05] <strcat> unless you use unsafe { }
[05:23:14] <skeet70> how do I do that haha
[05:23:21] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[05:23:24] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[05:23:25] <Eridius> skeet70: I'm hacking that up right now
[05:23:33] *** Joins: brendan (brendaneic@moz-F2813A2B.hfc.comcastbusiness.net)
[05:23:37] *** Quits: spott_ (spott@moz-9B11536C.hsd1.co.comcast.net) (Client exited)
[05:23:45] <strcat> a fork-join library would internally spawn closures in tasks, and restrict them to things fulfilling a non-implemented Isolate/Share kind
[05:23:57] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[05:24:00] <strcat> you would be able to pass &mut ptrs/slices in
[05:25:43] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Ping timeout)
[05:26:01] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[05:26:23] <skeet70> the fork terminology keeps confusing me, I always think of new processes with that. Haskell does the same thing I think (forks = new threads)
[05:26:26] *** Quits: bleibig (bleibig@moz-CB11172C.hsd1.ca.comcast.net) (Quit: bleibig)
[05:26:41] <skeet70> but yeah that would handle this
[05:27:03] <skeet70> honestly didn't realize going it to this that it wasn't possible… not that crazy :S
[05:27:28] <strcat> it's possible in unsafe code as much as it is possible in C/C++
[05:27:44] <strcat> safe code provides a guarantee of no data races, no memory corruption, no dangling pointers, etc.
[05:27:55] <strcat> sharing mutable references to the same block of memory safely isn't easy
[05:28:04] <strcat> I don't know of a language providing it
[05:28:33] <strcat> rust could provide it but the functionality just isn't implemented yet
[05:28:59] <skeet70> Oh I know. I think it most languages it would allow you to share it, and just let you implement your own safety. Eg semaphores, etc. 
[05:29:51] <skeet70> We recently did a Haskell implementation of a similar program, that unsafely shared access to I/O, just to prove you can't do it safely without semaphores etc
[05:29:53] <strcat> rust will allow you to do that in an unsafe block
[05:30:18] <strcat> you can convert slices to something you can send like this
[05:30:31] <strcat> rusti: use std::unstable::raw::Repr; let xs = &[1, 2, 3]; xs.repr()
[05:30:34] -rusti- std::unstable::raw::Slice<int>{data: (0x7f2fa962a0e8 as *()), len: 3u}
[05:30:43] <strcat> converting *back* to a slice requires std::cast:transmute
[05:30:58] *** Joins: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP)
[05:31:28] <strcat> rusti: use std::unstable::raw::Repr; let xs = &[1, 2, 3]; unsafe { let ys: &'static [int] = std::cast::transmute(xs.repr()); ys }
[05:31:29] -rusti- &[1, 2, 3]
[05:32:00] <skeet70> Is this documented anywhere?
[05:32:52] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[05:34:46] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[05:35:37] <strcat> skeet70: well you're on your own with unsafe code
[05:35:51] <strcat> the individual functions/methods needed are documented
[05:35:58] <strcat> the specific use case isn't
[05:36:04] <skeet70> Yeah, I'm looking for those, but can't find them
[05:36:24] <strcat> std::unstable has docstrings but is marked as hidden
[05:37:36] <skeet70> Ah I see
[05:39:07] *** Quits: jxv (jxv@4732E7D7.2AB34561.9B38A32A.IP) (Client exited)
[05:39:39] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[05:40:00] *** Joins: sp3d (s@6361F3B1.19CD1E54.8354FB35.IP)
[05:41:10] *** Joins: tikue (quassel@moz-FEADCD38.hsd1.pa.comcast.net)
[05:41:52] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[05:41:55] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:44:53] *** Quits: jeffdb_ (jeff@moz-D13B6004.hsd1.ca.comcast.net) (Ping timeout)
[05:44:55] *** Joins: eddyb9 (eddy@EF52682F.834833CE.4A6B528C.IP)
[05:45:18] <skeet70> Well thanks for your help strcat, I'll have to try to get this working tomorrow with unsafe blocks.
[05:45:44] *** Joins: tautologico (shung@703660AA.CFE755C8.C27E1635.IP)
[05:45:48] *** Joins: jensnockert (jensnocker@moz-D12CA539.mobileonline.telia.com)
[05:46:51] *** Quits: jensnockert (jensnocker@moz-D12CA539.mobileonline.telia.com) (Connection reset by peer)
[05:49:06] *** Quits: pepper_chico (pepper_chi@5B1C9931.F07E9C90.2E5C92D8.IP) (Quit: Ex-Chat)
[05:49:38] <eddyb9> strcat: what would be your suggested way of embedding rust-core?
[05:49:52] <strcat> eddyb9: just what example.rs does
[05:49:59] <strcat> including it in the top-level crate
[05:50:20] <strcat> and then the submodules can use it via 'use core;'
[05:50:27] <strcat> or 'use super::core', I forget.
[05:50:31] <eddyb9> what about a git repo?
[05:51:02] <strcat> eddyb9: I guess just include it as a submodule and use #[path = "..."] on the mod
[05:51:20] <eddyb9> aha, thanks :)
[05:51:40] *** Joins: smarter (smarter@moz-1D179AD0.cust.bluewin.ch)
[05:52:07] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[05:52:22] <eddyb9> if I were to add something to rust-core that is already in std, should I keep the same module structure, maybe the same code?
[05:52:28] *** Joins: gour (gour@moz-1BF2F07F.adsl.net.t-com.hr)
[05:52:52] <strcat> well atm I've been stripping all the docstrings to reduce churn
[05:53:12] <eddyb9> I mean, most of the stuff I need has no runtime deps, but duplicating code from std seems meh
[05:53:43] <eddyb9> reusing code would be best, but AFAIK that's not immediatelly possible
[05:53:53] *** Quits: smarter (smarter@moz-1D179AD0.cust.bluewin.ch) (Quit: )
[05:53:58] *** Joins: smarter (smarter@moz-1D179AD0.cust.bluewin.ch)
[05:54:22] <eddyb9> I heard about core->std, std->extra
[05:54:24] <strcat> I think in the end it's not going to be possible to share much code between them
[05:54:33] <strcat> eddyb9: well that was just a renaming
[05:54:38] *** Quits: skeet70 (skeet70@moz-DB50BE3F.bzm-mt.client.bresnan.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[05:54:44] <Eridius> rusti: let mut v: ~[uint] = ~[]; let (a,b) = v.mut_split(0); println!("{:?}, {:?}", a, b)
[05:54:45] -rusti- &mut [], &mut []
[05:54:45] -rusti- ()
[05:55:02] <eddyb9> now I feel I'd need std on top of rust-core, but that would feel weird considering the previous renaming
[05:55:42] <strcat> std assumes the presence of unwinding, tasks, task-local storage, task-local RNG, async I/O, etc.
[05:55:44] <eddyb9> feels so much. I'm maybe a little tired
[05:55:59] <strcat> would need to implement a lot just to get std::hashmap working
[05:56:08] <eddyb9> hmpf...
[05:56:10] <strcat> with the default constructor at least
[05:56:14] *** Joins: martndemus (martndemus@moz-876695FC.sshunet.nl)
[05:56:25] <strcat> it retrieves an 128-bit key (as two 64-bit ints) for siphash
[05:56:27] <eddyb9> strcat: overengineered?
[05:56:29] <strcat> no
[05:56:40] <strcat> it needs a random seed for security
[05:56:46] <eddyb9> oh lol
[05:56:48] <strcat> to stop DoS attacks
[05:56:56] <gour> morning
[05:57:08] <strcat> so there's a task-local RNG implementation, and that gets seeded from /dev/urandom (or something similar)
[05:57:19] <gour> KENZ: hi, are you the one working on wxrust?
[05:58:10] *** Quits: martndemus (martndemus@moz-876695FC.sshunet.nl) (Ping timeout)
[05:58:16] <strcat> eddyb9: rust-core isn't going to support segmented stacks, or some of the stuff libstd does like throwing a failure on an out-of-bounds index
[05:58:26] <strcat> so I have a feeling code reuse won't work
[05:58:29] *** Joins: bheylin (brianheyli@moz-8255E94E.adsl.online.nl)
[05:59:10] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[05:59:10] *** ChanServ sets mode: +ao dherman dherman
[05:59:12] <heftig> strcat: so every time you create a new task and then access the RNG from it, it opens and reads /dev/urandom?
[05:59:24] <strcat> heftig: yes, and afaik it has to reseed occasionally
[05:59:39] <strcat> I think it will open /dev/urandom immediately rather than when you use it
[05:59:53] <strcat> it contributes to running out of file descriptors with the insanely low default OS X limit
[05:59:57] <eddyb9> strcat: btw, my allocation function (the never inlined core) is under 256 bytes on x86 and it takes 3 instructions to allocate anything (get the cache pointer for the size class, call the function, offset the returned pointer)
[06:00:14] <eddyb9> hmm, I could get rid of the offset part
[06:00:16] <heftig> strcat: couldn't you just work with one urandom fd for the entire process?
[06:00:29] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[06:01:17] <strcat> heftig: dunno
[06:01:18] <eddyb9> strcat: now if only every cache instance had its own alloc function, it would be even faster
[06:01:29] <eddyb9> but I'm now grasping at cycles
[06:01:41] *** Joins: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com)
[06:02:50] *** Parts: smarter (smarter@moz-1D179AD0.cust.bluewin.ch) ()
[06:02:51] *** Joins: wdeng (Mibbit@E1AD879F.CC98CBF7.C589985.IP)
[06:04:12] <eddyb9> strcat: what if I pass a fixed length vector type as a type param and do size_of on it?
[06:04:39] <strcat> it will work
[06:04:48] <eddyb9> hahahahahaha
[06:04:52] <strcat> the size_of will produce a constant at compile-time
[06:05:05] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[06:05:15] <strcat> eddyb9: that's a good idea
[06:05:27] <strcat> s/good/great/
[06:05:28] <strcat> ;p
[06:05:37] <strcat> but sadly size_of can't be used as a constant
[06:05:42] *** Quits: bheylin (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin)
[06:05:45] <strcat> but it will be optimized as one
[06:05:59] <eddyb9> doesn't matter, all uses are runtime
[06:07:45] *** Joins: smarter (smarter@moz-1D179AD0.cust.bluewin.ch)
[06:10:09] <Eridius> strcat: clearly we just need to get around to making sizeof a working keyword
[06:10:10] <eddyb9> strcat: the only problem is that I have a fixed vector of these caches, and if each of them differs in a type param, it won't work
[06:10:13] *** Joins: dbaupp (Thunderbir@moz-54ADD9F4.lns20.syd6.internode.on.net)
[06:11:47] <eddyb9> strcat: I do self.caches[next_lg2(size)].alloc(), I can't just use different field names for the caches, so I need a way to inline those polymorphics
[06:12:11] <strcat> eddyb9: can you just let LLVM do this?
[06:12:41] <strcat> I don't really get what you're trying to do now
[06:12:48] <eddyb9> it doesn't do it, since the object_size of each cache is a member, mutable by default :(
[06:13:00] *** Quits: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk) (Quit: Ex-Chat)
[06:13:38] <strcat> eddyb9: make it a method?
[06:13:53] <strcat> if it's constant
[06:14:17] *** Quits: lkuper_ (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper_)
[06:14:24] <eddyb9> well, I can either pass the cache size to the cache itself from the allocator, or use the vector trick, have different field names and a match block to choose the right instance
[06:15:08] <strcat> if the field is constant, just make it a method instead
[06:15:11] <strcat> it can be a method in a trait
[06:15:24] <strcat> LLVM will know it's a constant if it's a method returning a value
[06:15:40] <eddyb9> strcat: constant after initialization
[06:15:41] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[06:15:41] *** ChanServ sets mode: +ao dherman dherman
[06:15:55] <strcat> eddyb9: so you don't know it at compile-time?
[06:16:18] <eddyb9> I have a vector of 32 cache instances, and each one has a different object size
[06:16:27] <eddyb9> right now it's a member
[06:16:28] <strcat> so instead the object size constant?
[06:16:31] <strcat> isn't the*
[06:16:45] <eddyb9> strcat: it's not constant across instances
[06:16:54] <eddyb9> I want moar specialization
[06:17:03] <strcat> eddyb9: make each instance a type, and make them implement a common trait
[06:17:10] <strcat> and then use them via generic functions
[06:17:18] <eddyb9> hmm...
[06:17:24] <strcat> eddyb9: you can do it like
[06:17:42] <strcat> struct Alloc<T> { ... }
[06:17:51] <eddyb9> well, I still want a function call, inlining everything would suck
[06:17:53] <strcat> impl<T> AllocTrait for Alloc<T> { ... }
[06:18:01] <strcat> eddyb9: you only have to write it once
[06:18:13] <strcat> eddyb9: use a type parameter to specialize them as different types
[06:18:27] <strcat> you only need 1 impl block, using that type parameter to get a size (like you suggested)
[06:18:40] <strcat> rusti: struct Foo<T> { x: int }
[06:18:42] -rusti- ()
[06:18:54] <eddyb9> what's the cost for a vector of trait objects?
[06:18:56] <strcat> rusti: struct Foo<T> { x: int } trait Bar {} impl<T> Bar for Foo<T> {}
[06:18:57] -rusti- ()
[06:19:15] <strcat> eddyb9: trait objects are dynamic dispatch, I don't think you want that
[06:19:22] <eddyb9> I mean, can it inline the call to the right method?
[06:19:29] <eddyb9> strcat: see, that's my problem
[06:19:31] <strcat> it won't inline calls through trait objects
[06:19:43] <strcat> traits used for generics are static dispatch
[06:19:46] <eddyb9> I need a vector of specialized Caches
[06:19:52] <strcat> eddyb9: you don't need a vector
[06:19:54] *** Joins: bleibig (bleibig@moz-CB11172C.hsd1.ca.comcast.net)
[06:20:13] <eddyb9> or a match block
[06:20:15] <strcat> eddyb9: you can use a match statement to dispatch to the right allocator, LLVM can optimize it to a lookup table
[06:20:17] <strcat> yeah
[06:20:33] <eddyb9> if the index is known, it will call the right function?
[06:20:45] <strcat> hm?
[06:21:56] <eddyb9> I mean, inline the call to the specialized function if the lookup index is known at compile time
[06:21:56] *** Quits: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net) (Connection reset by peer)
[06:22:30] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[06:22:41] *** Joins: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net)
[06:22:52] <strcat> eddyb9: yes
[06:23:14] <eddyb9> now, how do I concatenate things in a macro?
[06:23:18] <strcat> eddyb9: although I feel like it should already be able to do what you want without all this work
[06:24:10] *** Joins: Heather_ (Heather@19663F6.F53BAACC.9C17E900.IP)
[06:24:13] <eddyb9> nah, I want a function instance for every Cache instance, only a JIT like v8 would go to those lengths
[06:24:15] <Heather_> Hello everyone
[06:25:03] <Heather_> I need help with configure / make stuff in rust
[06:25:27] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[06:25:34] <Heather_> there is : make: *** clean: No such file or directory.  Stop. coming from somewhere but I can't clearly get where is it
[06:25:55] *** Quits: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) (Connection reset by peer)
[06:26:22] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[06:26:41] <Heather_> anybody here?
[06:26:59] <eddyb9> strcat: I love abusing a language to its limits. this wouldn't work very well in C++ without LTO
[06:28:52] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[06:29:01] *** Joins: martndemus (martndemus@moz-876695FC.sshunet.nl)
[06:29:33] <sp3d> is it possible to have a ~fn/&fn/closure item?
[06:30:00] <strcat> item as in constant?
[06:30:08] <sp3d> yeah
[06:30:22] <strcat> well a normal function will coerce to &fn, but that's the best you'll get
[06:31:04] <sp3d> hmm, that must not be the issue then
[06:31:32] *** Joins: squiddy (squiddy@moz-D3754FCB.adsl.alicedsl.de)
[06:31:32] *** Quits: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net) (Connection reset by peer)
[06:31:53] <sp3d> is there a valid normal-function formulation of "|x| *x"?
[06:31:59] *** Joins: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net)
[06:32:15] *** Joins: oberstet (quassel@moz-CBA52AE7.dynamic.mnet-online.de)
[06:32:20] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Quit: Leaving...)
[06:33:14] <strcat> sp3d: not as generic, since the closure will have the type inferred
[06:33:37] <Heather_> rt is always building with O3 ? :S
[06:34:00] <strcat> where do you see O3?
[06:34:01] <engla> sp3d: for a generic function you would have to use Clone, since there is no trait for implicitly copyable
[06:34:15] <sp3d> mm, makes sense
[06:34:25] <strcat> jemalloc's makefile uses -O3 by default, afaik we override it (we shouldn't)
[06:34:32] <Heather_> strcat in rt
[06:34:34] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[06:34:38] <strcat> Heather_: where?
[06:34:40] <Heather_> strcat Makefile
[06:34:43] *** Quits: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net) (Connection reset by peer)
[06:34:51] <Heather_> strcat rust\src\rt\sundown
[06:35:03] <eddyb9> \? heresy
[06:35:21] <strcat> Heather_: that's just sundown's default set of flags
[06:35:25] <Heather_> but more I'm interesting why clean target is failing there
[06:35:35] <strcat> it prefers to be compiled with -O3 but we probably override it
[06:35:41] <strcat> we should really not do that
[06:36:23] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Ping timeout)
[06:37:03] *** Quits: FreeFull (freefull@31BCA4E6.5B0E29BE.159B5998.IP) (Quit: )
[06:37:25] <Heather_> strcat may you help me to debug my problem, I will post log in minute
[06:38:49] *** flaper87|afk is now known as flaper87
[06:38:54] <Heather_> strcat : https://gist.github.com/Heather/7020059
[06:39:16] *** Joins: sankha93 (Instantbir@4691D0F1.A4938A92.25B273F5.IP)
[06:39:59] *** Quits: martndemus (martndemus@moz-876695FC.sshunet.nl) (Ping timeout)
[06:40:11] *** Joins: pyrac (pyrac@F1F89E09.73C89388.AD05C589.IP)
[06:40:11] *** Joins: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net)
[06:40:17] <strcat> Heather_: dunno, ask pnkfelix when he's on again
[06:41:17] <Heather_> strcat is he from USA? just asking to know if I need to wake up in night for it )
[06:41:29] <dbaupp> Heather_: europe
[06:41:29] <strcat> france iirc
[06:41:37] *** Joins: crembo (crembo@moz-C2B364AA.vc.shawcable.net)
[06:41:37] <Heather_> dbaupp that's good
[06:41:40] <strcat> although maybe he is from the US, but he lives there
[06:41:42] <dbaupp> Heather_: can you try re-running ./configure?
[06:41:42] <strcat> ;p
[06:42:00] <Heather_> dbaupp portage does really clean configure run
[06:42:05] *** Quits: voxpopuli (fanservice@moz-424BC304.hsd1.pa.comcast.net) (Ping timeout)
[06:42:11] *** Quits: tautologico (shung@703660AA.CFE755C8.C27E1635.IP) (Quit: tautologico)
[06:42:49] <Heather_> dbaupp it's ... not rust problem, it's me trying to edit some configure scritps and failed somewhere but can't debug where
[06:43:15] <Heather_> dbaupp failing message don't tell me much :(
[06:43:48] *** Joins: Palmik (palmik@moz-11EA685D.pks.muni.cz)
[06:44:19] <dbaupp> Heather_: oh :(
[06:44:38] * dbaupp doesn't know much
[06:45:18] <dbaupp> although using the `remake` program might help (it's the first thing pnkfelix recommends for debugging makefiles anyway)
[06:46:18] *** Joins: rveach (Mibbit@410D297A.C7FE7DD2.1302FB2C.IP)
[06:47:43] *** Joins: eatkinson (eatkinson@moz-E57448EF.airbears2.berkeley.edu)
[06:50:19] *** Joins: aegeaner1 (Aegeaner@C8372C16.21B75AD6.FA28A497.IP)
[06:50:48] *** Joins: aegeaner2 (Aegeaner@C8372C16.21B75AD6.FA28A497.IP)
[06:50:55] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[06:51:15] *** Quits: aegeaner (Aegeaner@C8372C16.21B75AD6.FA28A497.IP) (Ping timeout)
[06:52:06] *** Quits: aegeaner1 (Aegeaner@C8372C16.21B75AD6.FA28A497.IP) (Ping timeout)
[06:55:34] <xAndy> is Int a rust keyword or imported by prelude? i get strange behaviour with Int as an enum variant: https://gist.github.com/anonymous/7020208
[06:55:47] *** Quits: eatkinson (eatkinson@moz-E57448EF.airbears2.berkeley.edu) (Quit: eatkinson)
[06:56:19] *** Quits: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP) (Connection reset by peer)
[06:56:19] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[06:56:49] <dbaupp> xAndy: it shouldn't be
[06:58:29] *** Joins: muppetman (Mibbit@1689EA8A.7DCD925.CE255B90.IP)
[06:59:10] <klutzy> xAndy: this? https://github.com/mozilla/rust/issues/9678
[06:59:20] *** Quits: rveach (Mibbit@410D297A.C7FE7DD2.1302FB2C.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[07:00:07] *** Joins: rveach (kvirc@410D297A.C7FE7DD2.1302FB2C.IP)
[07:00:57] <xAndy> klutzy it doesn't seem like a visibility issue and all components in https://gist.github.com/anonymous/7020208 are public
[07:01:18] <xAndy> and it works with enum names other than Int
[07:01:55] <dbaupp> how about F64 or Uint?
[07:01:59] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Connection reset by peer)
[07:02:03] <dbaupp> hm
[07:02:04] <dbaupp> wait
[07:02:27] <xAndy> Str doesn't work either
[07:02:28] <xAndy> Fn works
[07:02:35] <dbaupp> ah, there's an Int trait in prelude
[07:02:36] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[07:02:45] <dbaupp> (and a Str one, but no Fn one)
[07:03:03] <xAndy> but shouldn't the use shadow it?
[07:03:06] <xAndy> or at elast warn
[07:03:10] <dbaupp> in theory...
[07:03:29] * dbaupp wonders if the prelude use is added at the end or start of the other uses
[07:04:02] *** Quits: diegoyam (quassel@FF9B1514.A4EC3D18.3A1EC144.IP) (Ping timeout)
[07:04:15] <dbaupp> ah, at the start
[07:04:22] *** Joins: martndemus (martndemus@moz-E30F5776.adsl.xs4all.nl)
[07:04:30] <dbaupp> so the variant should shadow the trait
[07:06:09] *** Joins: diegoyam (quassel@FF9B1514.A4EC3D18.3A1EC144.IP)
[07:11:32] *** Quits: crembo (crembo@moz-C2B364AA.vc.shawcable.net) (Client exited)
[07:11:33] *** Joins: Ms2ger (Ms2ger@B7B2FF50.C60A97A6.F9FB0584.IP)
[07:12:53] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[07:12:53] *** ChanServ sets mode: +ao dherman dherman
[07:13:41] *** Quits: dbaupp (Thunderbir@moz-54ADD9F4.lns20.syd6.internode.on.net) (Quit: dbaupp)
[07:14:47] *** Joins: dbaupp (Thunderbir@moz-54ADD9F4.lns20.syd6.internode.on.net)
[07:17:05] <Heather_> okay seems like I've got little progress on my configure changes pull reuqest
[07:17:38] <Heather_> also, someone steal my username
[07:19:19] *** Joins: eatkinson (eatkinson@moz-E57448EF.airbears2.berkeley.edu)
[07:19:22] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[07:19:36] <mcpherrin> Heather_: you can register your nickname with "nickserv" to prevent others from taking it
[07:19:57] <Heather_> mcpherrin oh, Hello
[07:21:30] *** Quits: bleibig (bleibig@moz-CB11172C.hsd1.ca.comcast.net) (Quit: bleibig)
[07:21:31] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[07:21:51] <mcpherrin> Hello! :-)
[07:22:01] <Heather_> mcpherrin well I can't awhile it's busy
[07:22:10] <mcpherrin> Right.
[07:22:32] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[07:23:12] <Heather_> someone must review my PR
[07:23:24] *** Joins: jaen (jaen@138A5D71.4C038AE9.C4431F0E.IP)
[07:23:57] <Heather_> .... right after I finish compiling it because there is still being big chance it will fail for myself ...
[07:25:06] <mcpherrin> The configure one?
[07:25:11] <Heather_> mcpherrin Yes
[07:25:16] *** Joins: avsej (avsej@D9A610B8.4841F515.FB33447D.IP)
[07:25:39] <Heather_> mcpherrin why I  never see brson here
[07:25:41] <mcpherrin> Build systems scare me.
[07:25:50] <mcpherrin> Heather_: time zones perhaps?
[07:25:57] <mcpherrin> I see him on here :P
[07:25:58] <Heather_> mcpherrin America?
[07:26:09] <mcpherrin> Yeah.
[07:26:52] <mcpherrin> brson is west coast USA (ie, where Mozilla HQ is)
[07:27:18] <Heather_> mcpherrin wait... today economics should die, right? .... ok ... nvm
[07:28:06] *** Joins: bholley (anonymous@moz-D5EB36E2.rev.numericable.fr)
[07:28:54] <mcpherrin> Heather_: fwiw, brson was active today from 3pm to 6pm pacific time.
[07:30:14] <Heather_> mcpherrin what is pacific time in UTC offset?
[07:30:32] <mcpherrin> -7
[07:30:34] <ChrisMorgan> Heather_: the Internet knows
[07:30:47] <mcpherrin> As a resident of time time zone, I also know ;P
[07:30:48] <Heather_> ChrisMorgan I'm banned on search engines
[07:30:57] <ChrisMorgan> All of them?
[07:31:03] <mcpherrin> er, I suppose it's still daylight savings time, so -8
[07:31:09] <Heather_> ChrisMorgan local network politics
[07:31:13] <mcpherrin> Heather_: Really?  Because that's quite an achievement
[07:31:28] <Heather_> mcpherrin not, just joking
[07:31:41] <mcpherrin> Heather_: I've been banned from google before :-D
[07:31:48] <Luqman> mcpherrin: no, you were right the first time
[07:31:52] *** Quits: aegeaner2 (Aegeaner@C8372C16.21B75AD6.FA28A497.IP) (Connection reset by peer)
[07:31:58] <mcpherrin> Luqman: haha okay
[07:32:01] * ChrisMorgan prefers DuckDuckGo to Google for most searches
[07:32:09] * mcpherrin is tired, cannot handle numbers
[07:32:15] <Luqman> Heather_: what did you want reviewed?
[07:32:32] <Heather_> mcpherrin so 3->6 is 0->6 (in a.m.) for me :)
[07:32:34] <mcpherrin> I can barely handle talking to two people named Heather at the same time, never mind time zones.
[07:32:44] <Heather_> luisbg https://github.com/mozilla/rust/pull/9760
[07:33:09] <mcpherrin> Heather_: Ah, so probably when you're asleep if you have any reasonable sleeping hours :P
[07:34:54] <Heather_> mcpherrin well, yes, I need vampiric poison to contact him
[07:35:48] <Heather_> mcpherrin btw .... I said 3->6 is 0->6, that means time goes 2x slower for me....
[07:36:26] *** Quits: sankha93 (Instantbir@4691D0F1.A4938A92.25B273F5.IP) (Ping timeout)
[07:36:39] <Heather_> mcpherrin when you live one day I live 2 days ...
[07:37:26] <mcpherrin> Heather_: that's a nice perk!
[07:38:42] <Heather_> mcpherrin yeah and my rust fork just failed to build %D
[07:39:34] *** Joins: autra (augustin@moz-2EA7A1DF.fullsix.com)
[07:39:39] <xAndy> i have made more working and not working exaples for the name shadowing issue https://gist.github.com/anonymous/7020687 dbaupp 
[07:39:40] <Luqman> Heather_: i don't think your pc-linux-gnu change would work since everything kind of assumes unknown-linux-gnu now
[07:40:55] *** Quits: [squiddy] (squiddy@moz-D3754FCB.adsl.alicedsl.de) (Ping timeout)
[07:41:08] *** Joins: sankha93 (Instantbir@4691D0F1.A4938A92.25B273F5.IP)
[07:41:19] <dbaupp> xAndy: wow, that's weird, thanks for investigating it more. can you file a bug with that test case?
[07:41:29] <xAndy> ok
[07:42:04] <Heather_> Luqman it should
[07:43:07] <Heather_> Luqman I only not sure if I also should rename things like CFG_COMPILER_TRIPLE to CFG_COMPILER with renaming CFG_BUILD_TRIPLE to CFG_BUILD
[07:43:21] *** Quits: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net) (Ping timeout)
[07:43:51] *** Quits: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[07:43:56] <Heather_> mcpherrin what means "nice perk" ... I can't translate it :(
[07:44:24] <dbaupp> Heather_: "that's a nice benefit" "that's a nice bonus"
[07:44:32] <mcpherrin> Heather_: I mean that having time go twice as slow in your time zone is a nice benifit of living there
[07:44:58] <Heather_> mcpherrin dbaupp I see, thanks :)
[07:45:32] <dbaupp> mcpherrin: but you can only do half as much rust hacking if time runs that slowly! :'(
[07:46:36] <Luqman> Heather_: why do you need to remove TRIPLE?
[07:46:51] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[07:47:03] <Heather_> Luqman ... for native --build etc... support
[07:48:01] <Heather_> Luqman by the way what means triple there? I can translate it as 3 ...
[07:48:35] <Luqman> Heather_: it's called a triple because there are 3 parts
[07:48:51] <Heather_> Luqman build host and target?
[07:50:21] *** pmoore|away is now known as pmoore
[07:50:39] <Heather_> Luqman well I just wanted to write proper ebuild for rust (gentoo install script or package)
[07:50:46] <Luqman> no, something like i686-pc-linux-gnu has 3 parts: i686 - cpu, pc - vendor, linux-gnu - environment
[07:51:10] <Heather_> Luqman I see ...
[07:51:19] *** Joins: Ferreus (ferreus@moz-AFBE732E.dip0.t-ipconnect.de)
[07:52:20] <Luqman> Heather_: anyways, i just mean i don't see any reason to rename CFG_BUILD_TRIPLE and the others
[07:52:32] <Luqman> Heather_: is adding support for --build etc enough?
[07:52:42] <Heather_> Luqman for me - yes
[07:53:22] <Heather_> Luqman but from discussion on pull request people want deprecate --build-triple stuff
[07:53:51] <Luqman> yes but that's separate from the makefile variables
[07:54:29] <Luqman> you can remove --build-triple but CFG_{BUILD,HOST,TARGET}_TRIPLE[S] can still remain
[07:55:34] <Heather_> Luqman well yes it's possible but you must say it two hours earlier :(
[07:59:24] <Heather_> Luqman anyways what's wrong with removing it?
[07:59:58] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[08:00:02] <Luqman> it seems less descriptive and confusing
[08:00:29] <xAndy> dbaupp https://github.com/mozilla/rust/issues/9903 i'll try to find more examples/cases
[08:01:23] <dbaupp> xAndy: that test-case there is almost certainly good enough: it's pretty comprehensive :)
[08:01:52] <xAndy> dbaupp ok :)
[08:02:17] <Heather_> Luqman well, maybe a bit... so are you sure all other people want to keep TRIPLE and I must to revert some stuff?
[08:03:09] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[08:06:39] <Luqman> acrichto: what say you about renaming CFG_BUILD_TRIPLE and friends in the makefiles?
[08:07:00] * Ms2ger wonders if it would be hard to make gdb break on rust_begin_unwind by default
[08:07:04] <acrichto> sorry I haven't been following along, but what for?
[08:07:24] <acrichto> Ms2ger: 'catch throw' also works and may work "by default" more, but I'm not sure...
[08:07:26] *** Quits: eatkinson (eatkinson@moz-E57448EF.airbears2.berkeley.edu) (Quit: eatkinson)
[08:08:04] <Luqman> acrichto: part of Heather_'s changes to support gnu style configure flags
[08:08:43] <Heather_> I would say gnu standard
[08:09:00] <Heather_> or configure ./standard
[08:10:22] <Ms2ger> Can someone remind we what a failure 'borrowed' from rt::borrowck::fail_borrowed means?
[08:11:10] <strcat> Ms2ger: @mut dynamic freeze failed
[08:11:11] <dbaupp> Ms2ger: you've borrowed a @mut as &mut previously, and then are trying to reborrow it (as either & or &mut)
[08:11:28] <dbaupp> (or borrowed as & previously, and are trying to borrow a &mut)
[08:11:53] <strcat> will also fail if you borrowed as & or &mut and try to modify directly
[08:11:58] <strcat> yay @mut
[08:12:12] <Ms2ger> I'm afraid Servo is full of @mut :/
[08:12:49] <dbaupp> :(
[08:13:06] <strcat> need to be very careful about borrowing from an @mut
[08:13:26] <strcat> if you pass it as @mut everywhere you won't get failures, it's infectious that way
[08:13:50] <strcat> any borrow from it needs to have a lifetime you know about
[08:14:09] <strcat> so you can avoid modifying or trying to make an aliasing &mut
[08:14:27] * strcat finds the implicit borrowing awful for that reason
[08:14:43] <strcat> RcMut makes it explicit - sure, it's ugly, but it's harder to get wrong (and @mut is ugly as a concept anyway)
[08:15:34] <Ms2ger> So if I have an @mut Window and I call this:
[08:15:36] <Ms2ger>     fn reflector<'a>(&'a self) -> &'a Reflector {
[08:15:36] <Ms2ger>         &self.reflector_
[08:15:36] <Ms2ger>     }
[08:15:39] <Ms2ger> I'm in trouble?
[08:15:47] <Ms2ger> Or not yet...
[08:16:09] <strcat> Ms2ger: that's fine
[08:16:19] <strcat> but you can't modify the @mut or take an &mut borrow until that return value is gone
[08:16:22] <strcat> *anything* in the @mut
[08:17:27] <acrichto> Luqman: I figured that the makefiles wouldn't change much, but the ./configure script would just set the appropriate variables from the relevant command-line flags
[08:20:32] *** Quits: pyrac (pyrac@F1F89E09.73C89388.AD05C589.IP) (Quit: pyrac)
[08:24:08] *** Joins: bjz (brendanzab@moz-38D46E1C.perm.iinet.net.au)
[08:27:28] *** Quits: busylizzy (lisa@85228838.12D0DC84.211374C4.IP) (Quit: No Ping reply in 180 seconds.)
[08:27:47] *** Joins: busylizzy (lisa@85228838.12D0DC84.211374C4.IP)
[08:29:37] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: sleep)
[08:31:47] <xAndy> i have a link failure if i call a reexported function in another crate: https://gist.github.com/ydnax/7021109
[08:32:13] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[08:32:27] <xAndy> it fails if i run rustpkg test testmod
[08:35:02] <eddyb9> oh, I didn't catch strcat before he left... I had some ideas for rust-core and custom allocators
[08:35:49] *** Joins: DeTeam (DeTeam@3F8887A3.6883A39.F5F3AF2.IP)
[08:37:12] *** Quits: anri (solancile@moz-E49E7C4B.hsd1.wa.comcast.net) (Ping timeout)
[08:39:45] *** Joins: CarpNet (ac@moz-FD24B77.sohonet.co.uk)
[08:40:35] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[08:41:54] *** Quits: muppetman (Mibbit@1689EA8A.7DCD925.CE255B90.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[08:42:18] *** Quits: nwmcsween (nwmcsween@E0025B86.51EE1362.3655BBF5.IP) (Ping timeout)
[08:52:30] *** Quits: jgilbert (jgilbert@moz-4C088FCE.hsd1.ca.comcast.net) (Ping timeout)
[08:52:32] *** Quits: rveach (kvirc@410D297A.C7FE7DD2.1302FB2C.IP) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[08:54:11] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[09:00:45] *** Joins: pyrac (pyrac@F1F89E09.73C89388.AD05C589.IP)
[09:09:13] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Ping timeout)
[09:18:39] *** Quits: brendan (brendaneic@moz-F2813A2B.hfc.comcastbusiness.net) (Quit: brendan)
[09:19:08] *** Joins: mc (Mibbit@54B0D324.D4DDBED4.B3490680.IP)
[09:19:49] <mc> where the sqrt function，let a :f64 = sqrt(10);error: unresolved name `sqrt`.
[09:20:01] <mc> anybody help？
[09:20:08] *** mc is now known as IRCMonkey35659
[09:21:51] <ksh8281> std::f64;
[09:26:04] <ksh8281> let f:f64 = (2.0f64).sqrt();
[09:27:14] <kimundi> rusti: let f:f64 = (2.0f64).sqrt(); f
[09:27:15] -rusti- 1.41421356f64
[09:27:50] <Heather_> rust tool is completely removed?
[09:27:55] <kimundi> yes
[09:28:18] <Heather_> then I think it should be also removed from drivers.rs
[09:28:28] <kimundi> If you had it previously, an old version might be left over and complain about missing libs.
[09:28:33] <Heather_> rust\src\driver\driver.rs
[09:28:44] <Heather_> hm... I see
[09:28:55] <kimundi> Heather_: If it's still there, make a Pull Request! :)
[09:29:54] <Heather_> kimundi it's there... I already got PR with another target :S but complex one.... and lazy for branching
[09:30:09] <kimundi> Heather_: haha, know that problem :)
[09:30:22] *** Joins: dissimile (dissimile@moz-F3007ED4.static.as13285.net)
[09:31:49] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Ping timeout)
[09:32:14] <Heather_> kimundi 01well I can fork to organization and PR from it but I don't want to have two forks )01
[09:32:40] <IRCMonkey35659> thanks a lot
[09:32:45] *** Quits: topspin (allenc@moz-3A4A8509.frii.com) (Quit: Lost terminal)
[09:33:34] *** Quits: IRCMonkey35659 (Mibbit@54B0D324.D4DDBED4.B3490680.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[09:34:08] <kimundi> Heather_: You could just commit all local changes, start a new branch, push it, make a PR, and checkout the old one afterwards :P
[09:34:49] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[09:35:12] <kimundi> Heather_: Also, your last IRC message had black text, which in combination with my black background means I had to highlight it with my mouse ;)
[09:35:25] *** Quits: alonlevy (alon@moz-697DD27F.bb.netvision.net.il) (Ping timeout)
[09:35:38] *** Quits: _Vi (vi@527C345F.497AA854.B16B3BE6.IP) (Ping timeout)
[09:35:38] *** Quits: sankha93 (Instantbir@4691D0F1.A4938A92.25B273F5.IP) (Ping timeout)
[09:36:09] <Heather_> kimundi -_-
[09:36:50] *** Joins: sankha93 (Instantbir@4691D0F1.A4938A92.25B273F5.IP)
[09:37:22] <Heather_> kimundi strange I've got colors disabled in irc, still black ?
[09:40:07] *** Quits: martndemus (martndemus@moz-E30F5776.adsl.xs4all.nl) (Quit: Lost terminal)
[09:42:25] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Client exited)
[09:42:46] *** Joins: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp)
[09:42:56] *** Joins: nkoep (nik@moz-4CC49C1B.pool.mediaways.net)
[09:43:12] <kimundi> Heather_: Hm... Not sure really. The last messages were all highlighted because you pinged me. :)
[09:43:24] *** Joins: donri (donri@moz-9BB61102.tbcn.telia.com)
[09:43:36] <Heather_> now?
[09:43:59] <Heather_> kimundi ^
[09:44:09] <dbaupp> Heather_: you can clone your remote fork twice too, you don't need a separate fork for that
[09:44:10] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[09:44:13] *** Joins: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com)
[09:44:29] *** Quits: fyolnish (fyolnish@moz-BE2BAE5B.miinet.jp) (Ping timeout)
[09:44:37] <kimundi> That looks normal
[09:44:45] <Heather_> good
[09:45:16] <Heather_> dbaupp I don't understand
[09:46:29] *** Joins: z0w0 (zack@moz-C877F2F7.lnse2.cha.bigpond.net.au)
[09:46:39] *** Joins: umbridge (Mibbit@moz-4A19983C.ip227.fastwebnet.it)
[09:49:36] <dbaupp> Heather_: if you want to work on another thing without having to change branches, you can `git clone github.com/../rust` into another directory to have another copy of the rust repo so you can work on the new thing there
[09:50:21] <Heather_> dbaupp and how to PR it? :)
[09:51:34] *** Houm_ is now known as Houm
[09:53:15] <Heather_> dbaupp well it anyways easy to get separate fork on branch or org and work from it but I can't have two versions of rust installed and it builds slow I don't want to rebuild both everyday ... so I want focus on single PR until it will be finished ...
[09:53:37] <kimundi> Heather_: PR are no problem
[09:53:50] <dbaupp> Heather_: you can push the branch (it will need a separate name) to your remote repo and PR as normal
[09:53:50] <kimundi> Heather_: You can make a PR of any branch to any branch
[09:54:50] <dbaupp> Heather_: (if you are sending PRs from "master" this won't work, but it is better to create a new branch for each PR anyway, working on master can cause problems when you try to merge/rebase your work later.)
[09:54:54] <Heather_> kimundi well I just said that getting separate fork is easy to get but what I don't want to is having two versions of rust :)
[09:55:21] <kimundi> Ah, misunderstood your last message :)
[09:55:21] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[09:55:32] <kimundi> Well, you don't need to install it
[09:55:32] <Heather_> kimundi my English is weird...
[09:56:01] <kimundi> Just "make check" with unit test is enough usually
[09:56:59] <kimundi> I get not wanting to rebuild everything, but that happens anyway even with just one local clone of the git repo :P
[09:58:52] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[10:02:55] *** Joins: aruniiird (aruniiird@92D70115.B332A52C.E3D0A897.IP)
[10:05:57] *** Quits: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net) (Ping timeout)
[10:06:51] *** Joins: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net)
[10:08:09] <ksh8281> i have question
[10:08:19] <ksh8281> i need arm version of rust
[10:08:32] <ksh8281> so i installed arm-linux-gnueabihf
[10:09:03] <aruniiird> Hi everybody, I am a new bee to rust lang... I tried to run a recursive fibonacci code in rust, but it soon gives '[1]    2321 segmentation fault (core dumped)  ./test' when N=100000
[10:09:45] <ksh8281> i compiled rust with ./configure --target-triples=arm-linux-unknown-gnueabihf
[10:09:50] <ksh8281> with no errors
[10:10:07] <aruniiird> is there any way I can give higher memory options before running the code (like Java Xmx)
[10:11:35] <ksh8281> i tried to compile rust code with rustc --target=arm-linux-known-gnueabihf source.rs
[10:11:47] <ksh8281> rustc returns to error
[10:11:58] <dbaupp> aruniiird: you can run with RUST_MIN_STACK=8000000 to give yourself more stack space (the segfault is from stack overflow)
[10:12:15] <dbaupp> aruniiird: i.e. `RUST_MIN_STACK=8000000 ./your_program`
[10:12:30] *** Quits: StarLight (StarLight@moz-C80940BC.pppoe.avangarddsl.ru) (Ping timeout)
[10:12:32] <dbaupp> ksh8281: what error message?
[10:12:49] <aruniiird> @dbaupp oh! great... thanks a lot
[10:13:00] <aruniiird> I will try that now
[10:13:02] <ksh8281> error: linking with `cc` failed with code 1
[10:13:03] <ksh8281> note: cc arguments: -L/home/ksh8281/rust8_bin/lib/rustc/arm-unknown-linux-gnueabihf/lib -marm -o h h.o -L/home/ksh8281/rust8_bin/lib/rustc/arm-unknown-linux-gnueabihf/lib -lstd-6c65cf4b443341b1-0.8 -lrustrt -lrt -lpthread -L/home/ksh8281/rust8_bin/bin/.rust -L/home/ksh8281/rust8_bin/bin -lrt -ldl -lm -lmorestack -lrustrt -Wl,-rpath,$ORIGIN/../lib/rustc/arm-unknown-linux-gnueabihf/lib -Wl,-rpath,/home/ksh8281/rust8_bin/lib/rustc/arm-unknown-linux
[10:13:08] <ksh8281> note: cc: error: unrecognized command line option '-marm'
[10:13:15] <ksh8281> this is error message
[10:13:20] *** Quits: DeTeam (DeTeam@3F8887A3.6883A39.F5F3AF2.IP) (Ping timeout)
[10:13:24] <dbaupp> Luqman: ^ ?
[10:13:24] *** Joins: alonlevy (alon@moz-61A0AD83.red.bezeqint.net)
[10:13:30] <dbaupp> ksh8281: oh :( I don't know
[10:14:00] <ksh8281> dbaupp > thanks you 
[10:14:14] *** Joins: jdm (jdm@moz-300427AD.cable.virginmedia.com)
[10:14:14] *** ChanServ sets mode: +o jdm
[10:15:01] *** Joins: DeTeam (DeTeam@92C799C.31715274.F5F3AF2.IP)
[10:15:09] *** Joins: tgummerer (tgummerer@moz-3BE96E52.kthopen.kth.se)
[10:16:37] <eddyb9> haha, this is cool, a modulo that can fail (div0, I presume) requires the lang item fail_
[10:16:50] *** Joins: StarLight (StarLight@moz-C2023557.dynamic.avangarddsl.ru)
[10:17:39] <dbaupp> rusti: 1 % 0
[10:17:41] -rusti- task '<unnamed>' failed at 'attempted remainder with a divisor of zero', <anon>:9
[10:17:41] -rusti- application terminated with error code 101
[10:18:29] <eddyb9> remind me to bug strcat about fail_ or make a PR myself
[10:19:01] * dbaupp reminds eddyb9 to bug strcat
[10:19:02] *** Quits: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[10:19:21] *** Joins: Jackneill (Jackneill@moz-2F976809.pool.digikabel.hu)
[10:19:30] *** Joins: fyolnish (fyolnish@moz-75428E9C.tky.mesh.ad.jp)
[10:20:04] *** Joins: jensnockert (jensnocker@moz-D12CA539.mobileonline.telia.com)
[10:22:06] <zokier`> how can i capture mutable variable in (heap) closure?
[10:22:48] <zokier`> "error: mutable variables cannot be implicitly captured" is there some explicit way to capture?
[10:22:52] <engla> there is a crutch for that zokier`, std::cell::Cell
[10:23:26] <dbaupp> engla: that doesn't quite cover the mutable variable case
[10:24:03] <engla> rusti: use std::cell::Cell; let cell = Cell::new(~[1,2,3]);  do spawn {  let mut u = cell.take(); println!("{}", u.pop()) }
[10:24:04] -rusti- 3
[10:24:04] -rusti- ()
[10:25:43] <dbaupp> Heather_: you need to rebase https://github.com/mozilla/rust/pull/9760
[10:26:16] *** Joins: ksf (ksf@moz-B281265A.adsl.hansenet.de)
[10:26:36] <dbaupp> Heather_: (that is, there are merge conflicts that mean that bors will not be able to merge it automatically)
[10:26:45] <zokier`> rusti: use std::cell::Cell; let i = Cell::new(0); (|| { let mut x = cell.take(); x = 10; })(); i.take()
[10:26:50] -rusti- pastebinned 7 lines of output: http://ix.io/8xp
[10:27:10] <zokier`> rusti: use std::cell::Cell; let i = Cell::new(0); (|| { let mut x = i.take(); x = 10; })(); i.take()
[10:27:14] -rusti- pastebinned 8 lines of output: http://ix.io/8xr
[10:27:53] <dbaupp> rusti: use std::cell::Cell; let i = Cell::new(0); (|| { let mut x = i.take(); x = 10; i.put_back(x); })(); i.take()
[10:27:54] -rusti- <anon>:9:66: 9:67 warning: value assigned to `x` is never read, #[warn(dead_assignment)] on by default
[10:27:54] -rusti- <anon>:9          use std::cell::Cell; let i = Cell::new(0); (|| { let mut x = i.take(); x = 10; i.put_back(x); })(); i.take()
[10:27:54] -rusti-                                                                            ^
[10:27:54] -rusti- 10
[10:28:03] *** Joins: sk (sk@moz-82E9BD64.dynamic.vega-ua.net)
[10:28:07] <dbaupp> rusti: use std::cell::Cell; let i = Cell::new(3); (|| { let mut x = i.take(); x += 10; i.put_back(x); })(); i.take()
[10:28:08] -rusti- 13
[10:28:09] <engla> well, not much you can do about mutable variables in heap closures
[10:28:17] <dbaupp> you can use @mut...
[10:28:22] * dbaupp feels bad for saying that
[10:28:52] *** Quits: wdeng (Mibbit@E1AD879F.CC98CBF7.C589985.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[10:28:57] <engla> if you have a ~fn:()   (heap closure that doesn't require Send), you can capture a &mut T in a cell I guess
[10:29:12] <dbaupp> probably
[10:29:30] *** Joins: q66 (q66@470AAFA1.9B6ACF79.CE12DF22.IP)
[10:29:45] <dbaupp> (well, maybe not, since @ doesn't actually work with ~fn: https://github.com/mozilla/rust/issues/8983)
[10:29:54] <engla> rusti: use std::cell::Cell; let mut v = ~[1,2,3]; let cell = Cell::new(&mut v);  let f: ~fn:() = || {  let mut u = cell.take(); println!("{}", u.pop()) };
[10:29:57] -rusti- pastebinned 7 lines of output: http://ix.io/8xq
[10:29:57] <dbaupp> (that is, `~fn:`)
[10:29:59] <kimundi> zokier`: You just want the variable to be mutable inside the heap closure, right?
[10:30:09] <engla> it compiles at least.
[10:30:11] <Heather_> dbaupp rebase on top of what?
[10:30:16] <engla> not sure if it's correct
[10:30:18] <dbaupp> Heather_: the mozilla master
[10:30:24] <Heather_> dbaupp ok
[10:30:35] <zokier`> kimundi, i want to change the value of outer variable from inside the closure
[10:31:24] <kimundi> zokier`: Right, but do you want the variable to be used inside the closure or outside of it afterwards?
[10:31:31] <dbaupp> rusti: use std::cell::Cell; let mut v = ~[1,2,3]; let cell = Cell::new(&mut v); let f: ~fn:() = || { let mut u = cell.take(); println!("{}", u.pop()); cell.put_back(u); }; f(); cell.take()
[10:31:33] -rusti- pastebinned 24 lines of output: http://ix.io/8xu
[10:31:39] *** Quits: tgummerer (tgummerer@moz-3BE96E52.kthopen.kth.se) (Ping timeout)
[10:31:42] <zokier`> kimundi, outside
[10:31:53] <dbaupp> rusti: use std::cell::Cell; let mut v = ~[1,2,3]; let cell = Cell::new(&mut v); let f: ~fn:() = || { let mut u = cell.take(); println!("{}", u.pop()); cell.put_back(u); }; f(); v
[10:31:55] -rusti- pastebinned 10 lines of output: http://ix.io/8xv
[10:32:00] *** Quits: dissimile (dissimile@moz-F3007ED4.static.as13285.net) (Ping timeout)
[10:32:06] <dbaupp> rusti: use std::cell::Cell; let mut v = ~[1,2,3]; { let cell = Cell::new(&mut v); let f: ~fn:() = || { let mut u = cell.take(); println!("{}", u.pop()); cell.put_back(u); }; f(); } v
[10:32:08] -rusti- pastebinned 5 lines of output: http://ix.io/8xw
[10:32:11] <kimundi> zokier`: That's not really compatible with ~fn closures then :P
[10:32:34] <aruniiird> @dbaupp: with RUST_MIN_STACK=8000000, I can scale upto N=1000000 (recursive fibonacci problem)
[10:32:45] <dbaupp> rusti: use std::cell::Cell; let mut v = ~[1,2,3]; { let cell = Cell::new(&mut v); let f: ~fn:() = || { let u = cell.take(); println!("{}", u.pop()); }; f(); } v
[10:32:46] -rusti- 3
[10:32:46] -rusti- ~[1, 2]
[10:33:05] <aruniiird> on N=1500000 I get the following output
[10:33:07] <aruniiird> Fibonacci of 1500000 is 1125000750000
[10:33:07] <aruniiird> failed in non-task context at 'called `Option::get_mut_ref()` on a `None` value', /home/arun/aruns/programming/rust/rust-0.8/src/libstd/option.rs:301
[10:33:17] <dbaupp> weeeird.
[10:33:48] <dbaupp> can you run it under gdb and with `catch throw` (this will give us a backtrace from the fail!() call.)
[10:34:01] <aruniiird> on N=2000000, I still get segfault
[10:34:02] <aruniiird> ok
[10:34:28] <kimundi> Are you sure you're not hitting numeric limits?
[10:34:38] <kimundi> max value of uint, stack size, etc?
[10:34:44] <dbaupp> kimundi: but "get_mut_ref" failing?
[10:35:06] <aruniiird> yes, may not be hitting numeric limit, I am using 'uint' 
[10:35:08] <dbaupp> aruniiird: you aren't calling .get_mut_ref() anywhere in your code, are you?
[10:35:08] *** Joins: HollyRain (HollyRain@moz-50A83091.dyn.user.ono.com)
[10:35:17] <kimundi> dbaupp: In which context does it fail?
[10:35:36] <dbaupp> kimundi: I don't know... I haven't seen the code. :P
[10:35:41] <aruniiird> @dbaupp: no no... it a simple code (a few 10s of lines)...
[10:35:56] <HollyRain> is there any web where can be seen code in diferrent languages for the same tasks? (where is included the version for Rust)
[10:36:03] <kimundi> Because get_mut_ref failing is not unusual if it's being called on a None value :P
[10:36:19] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[10:36:32] *** Joins: dissimile (dissimile@moz-141B07E7.static.as13285.net)
[10:37:03] <kimundi> HollyRain: Rust is to young/unstable to be heavyly compared to other languages like that
[10:37:21] <dbaupp> kimundi: yeah, but why on earth would fibonacci code be getting a None to fail for some specific numbers to compute
[10:37:31] *** Quits: Ms2ger (Ms2ger@B7B2FF50.C60A97A6.F9FB0584.IP) (Ping timeout)
[10:37:32] <kimundi> aruniiird: Could you paste your 10 lines somewhere? :)
[10:37:41] <dbaupp> kimundi: as in, why isn't it failing for N=1000000.
[10:37:45] <aruniiird> following is fibonacci function..
[10:37:47] <aruniiird> fn fibonacci (n : uint) -> uint {
[10:37:47] <aruniiird>   match n {
[10:37:47] <aruniiird>     0 => 0,
[10:37:47] <aruniiird>     1 => 1,
[10:37:47] <aruniiird>     _ => n + fibonacci(n-1) 
[10:37:48] <aruniiird>   }
[10:37:50] <aruniiird> }
[10:38:03] <dbaupp> aruniiird: that's not the fibonacci numbers :P
[10:38:18] <dbaupp> you need fibonacci(n) + fibonacci(n-1)
[10:38:28] <dbaupp> (this will make it exponentially slower, though.)
[10:38:34] <aruniiird> oops =P 
[10:38:45] <aruniiird> in the main i am just calling...
[10:38:51] <kimundi> Okay, that'S really strange then :P. Maybe stack exhaustion triggers a None result somewhere that'S not handled?
[10:38:54] <aruniiird>   let fNum:uint = 1500000;
[10:38:54] <aruniiird>   println! ("Fibonacci of {:u} is {:u}", fNum, fibonacci(fNum));
[10:39:01] <dbaupp> kimundi: not yet
[10:39:13] <dbaupp> kimundi: currently we just run off the end of the stack without even caring
[10:39:38] <dbaupp> kimundi: acrichto has a PR that makes us abort when we hit the limit
[10:40:09] <kimundi> rusti: fn fibonacci (n : uint) -> uint {match n {0 => 0, 1 => 1, => fibonacci(n) + fibonacci(n-1) } } fibonacci(10000)
[10:40:13] -rusti- pastebinned 6 lines of output: http://ix.io/8xx
[10:40:33] <kimundi> rusti: fn fibonacci (n : uint) -> uint {match n {0 => 0, 1 => 1, _ => fibonacci(n) + fibonacci(n-1) } } fibonacci(10000)
[10:40:34] -rusti- application terminated abnormally with signal 11 (Segmentation fault)
[10:40:39] <kimundi> rusti: fn fibonacci (n : uint) -> uint {match n {0 => 0, 1 => 1, _ => fibonacci(n) + fibonacci(n-1) } } fibonacci(1000)
[10:40:39] -rusti- application terminated abnormally with signal 11 (Segmentation fault)
[10:40:42] <kimundi> rusti: fn fibonacci (n : uint) -> uint {match n {0 => 0, 1 => 1, _ => fibonacci(n) + fibonacci(n-1) } } fibonacci(100)
[10:40:43] -rusti- application terminated abnormally with signal 11 (Segmentation fault)
[10:40:46] <kimundi> rusti: fn fibonacci (n : uint) -> uint {match n {0 => 0, 1 => 1, _ => fibonacci(n) + fibonacci(n-1) } } fibonacci(10)
[10:40:46] -rusti- application terminated abnormally with signal 11 (Segmentation fault)
[10:40:47] <eddyb9> gcc optimizes this to a loop, I'd be disappoint if LLVM doesn't do the same thing
[10:40:50] <kimundi> :P
[10:41:16] <eddyb9> step yo game up, LLVM
[10:41:26] <kimundi> rusti: fn fibonacci (n : uint) -> uint {match n {0 => 0, 1 => 1, _ => fibonacci(n-1) + fibonacci(n-2) } } fibonacci(10000)
[10:41:31] -rusti- timeout triggered!
[10:41:41] <kimundi> wait, what am I even writing here...
[10:41:41] *** Quits: HollyRain (HollyRain@moz-50A83091.dyn.user.ono.com) (Quit: bye, bye)
[10:41:53] <eddyb9> LOOOL
[10:42:21] <kimundi> rusti: fn fibonacci (n : uint) -> uint {match n {0 => 0, 1 => 1, _ => fibonacci(n-1) + fibonacci(n-2) } } fibonacci(10)
[10:42:22] -rusti- 55u
[10:42:31] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[10:42:40] <eddyb9> kimundi: haha, I see now what you did wrong the first time(s) :P
[10:42:46] <kimundi> Well that seems to be the correct one
[10:42:55] <kimundi> yeah :P
[10:43:04] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[10:43:09] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[10:43:11] <kimundi> I blame dbaupp for giving wrong intel :P
[10:43:28] <eddyb9> but it gets optimized, doesn't it?
[10:43:30] * dbaupp was just testing #rust
[10:43:33] *** Joins: vodik (simon@moz-3AFED2F2.dsl.bell.ca)
[10:43:35] <dbaupp> eddyb9: optimised to what?
[10:43:39] <kimundi> rusti: fn fibonacci (n : uint) -> uint {match n {0 => 0, 1 => 1, _ => fibonacci(n-1) + fibonacci(n-2) } } fibonacci(100)
[10:43:41] <eddyb9> to a loop
[10:43:44] -rusti- timeout triggered!
[10:43:50] <dbaupp> eddyb9: unlikely
[10:44:02] *** Joins: jeyraof_ (uid6796@moz-31ABA2C0.irccloud.com)
[10:44:06] <kimundi> Well, for 100 it runs too long :P
[10:44:10] <jeyraof_> hi
[10:44:22] <dbaupp> eddyb9: this isn't linear recursion (/me is making that term up), so it'd require LLVM creating & managing a stack in the loop
[10:44:24] <eddyb9> dbaupp: GCC does it for -O2 or -O3
[10:44:35] <eddyb9> without a stack
[10:44:36] <dbaupp> eddyb9: for recursion of that form?
[10:44:42] <dbaupp> it can do factorial
[10:44:57] <dbaupp> but I'd be *very* surprised if it could do fibonacci
[10:45:01] * dbaupp tests
[10:45:03] <eddyb9> lol
[10:45:03] <kimundi> You need dynamic programming for that
[10:45:43] <eddyb9> I would write you an "echo to assembly" test thing, but I'm on my phone
[10:46:25] <eddyb9> kimundi: I've seen it do it, and even on an older version on ARM (yes, I was bored enough to test codegen)
[10:46:28] *** Quits: pyrac (pyrac@F1F89E09.73C89388.AD05C589.IP) (Quit: pyrac)
[10:46:52] * kimundi wonders how that would work
[10:47:57] <eddyb9> well, it's a pure function, so mathematical recursion tricks apply
[10:48:06] <ksf> http://pastebin.com/Whc7JGSE what am I doing wrong? why is rust finding to_json for the declaration, but not for its uses?
[10:48:37] <dbaupp> eddyb9: I'm seeing `call fib` inside the definition of fib for the obvious program compiled with `-O3 -S`
[10:48:46] <eddyb9> o_O
[10:49:02] <eddyb9> dbaupp: how large is the function body?
[10:49:09] <dbaupp> eddyb9: in asm?
[10:49:10] <ksf> (and why am I boxing when I want to negate?)
[10:49:23] <kimundi> eddyb9: Maybe it constant folded it?
[10:49:29] <eddyb9> dbaupp: yes, 5 instructions vs 150
[10:49:45] <dbaupp> eddyb9: ~300 lines for -O3
[10:49:52] <eddyb9> kimundi: nope, it generated a crazy big function
[10:50:00] <eddyb9> yeah, that thing
[10:50:02] <dbaupp> 50 for -O2
[10:50:06] <eddyb9> dbaupp: is call fib inside fib?
[10:50:10] <dbaupp> eddyb9: yes
[10:50:22] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[10:50:35] <eddyb9> hmpf, I will test that ARM gcc to be sure, then
[10:50:41] <dbaupp> from a quick glance it looks like it's doing fib(n-2) + fib(n-4) + ...
[10:50:46] * dbaupp is slightly confused by that
[10:51:01] <eddyb9> lookahead
[10:51:34] *** Joins: _Vi (vi@527C345F.497AA854.B16B3BE6.IP)
[10:52:51] *** flaper87 is now known as flaper87|afk
[10:53:21] <eddyb9> f(n) -> g(f(n-1), f(n-2), ..., f(n-k)) can be optimized to a loop that requires k space and uses shifting (k+2 moves per loop iteration)
[10:53:37] *** Quits: jensnockert (jensnocker@moz-D12CA539.mobileonline.telia.com) (Connection reset by peer)
[10:54:02] <ksf> oh, nevermind. it's a method, it should be called on an object.
[10:54:04] <eddyb9> but that should be a special case of a more generic optimization, I would assume
[10:54:19] <dbaupp> eddyb9: yeah, it looks like it's doing something like that
[10:54:48] <eddyb9> except that should result in a loop with no recursive calls
[10:55:21] *** Quits: sankha93 (Instantbir@4691D0F1.A4938A92.25B273F5.IP) (Ping timeout)
[10:56:20] <dbaupp> yup, and it's definitely not
[10:56:23] * dbaupp tries clang
[10:56:46] <dbaupp> nope, clang keeps both recursive calls
[10:56:54] <dbaupp> (so Rust will too)
[10:57:17] <eddyb9> it's just a map-reduce on a range with a k-sized context
[10:57:36] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[10:57:36] *** Quits: vodik (simon@moz-3AFED2F2.dsl.bell.ca) (Ping timeout)
[10:57:37] <eddyb9> if someone does this concoction, it will be Haskell
[10:57:59] * dbaupp hopes he can remember enough core to interpret the output of GHC
[10:58:11] <eddyb9> dbaupp: maybe I missed the bl (call equiv in arm) in the generated code :/
[10:58:12] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[11:00:02] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[11:00:26] <eddyb9> dbaupp: btw, I know how to specialize a function for every vector element, with no call overhead
[11:01:47] <eddyb9> I already have the numbers from 0 to 31 in a macro, for initialization, I'll reuse them to create 32 functions
[11:03:05] <Heather_> dbaupp done
[11:03:19] *** Joins: adridu59 (Mibbit@moz-E7A273CD.ac-paris.fr)
[11:04:07] <eddyb9> I'll have to show everyone this thing when it's done. I won't abuse fixed vector size as a numeric parameter though
[11:04:25] *** Joins: Earnestly (earnest@moz-BE290A2B.dyn.plus.net)
[11:08:39] *** Quits: fyolnish (fyolnish@moz-75428E9C.tky.mesh.ad.jp) (Client exited)
[11:08:55] *** Joins: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP)
[11:09:00] *** Joins: fyolnish (fyolnish@moz-75428E9C.tky.mesh.ad.jp)
[11:10:11] *** Joins: BitPuffin (isak@moz-98F8BF74.cust.tele2.se)
[11:10:13] *** Quits: sk (sk@moz-82E9BD64.dynamic.vega-ua.net) (Ping timeout)
[11:10:29] *** Joins: sk (sk@moz-82E9BD64.dynamic.vega-ua.net)
[11:10:41] *** Quits: fyolnish (fyolnish@moz-75428E9C.tky.mesh.ad.jp) (Ping timeout)
[11:10:41] *** Quits: avsej (avsej@D9A610B8.4841F515.FB33447D.IP) (Ping timeout)
[11:10:54] *** Joins: avsej (avsej@D9A610B8.4841F515.FB33447D.IP)
[11:11:00] *** Quits: q66 (q66@470AAFA1.9B6ACF79.CE12DF22.IP) (Quit: Leaving)
[11:13:22] *** Quits: GeneralMaximus (ankur@15904EB6.A825C662.4C155415.IP) (Ping timeout)
[11:13:23] *** Joins: fyolnish (fyolnish@moz-75428E9C.tky.mesh.ad.jp)
[11:14:23] <dbaupp> eddyb9: fwiw, GHC doesn't turn fibonacci into a loop
[11:15:32] *** Joins: jensnockert (jensnocker@moz-197D59BC.wireless.lu.se)
[11:16:05] *** Quits: Houm (Houm@moz-25669AA8.fbx.proxad.net) (Ping timeout)
[11:16:21] *** Joins: Houm (Houm@moz-25669AA8.fbx.proxad.net)
[11:17:09] *** Quits: eddyb9 (eddy@EF52682F.834833CE.4A6B528C.IP) (Ping timeout)
[11:17:21] *** Joins: FreeFull (freefull@31BCA4E6.5B0E29BE.159B5998.IP)
[11:18:26] <ksf> even more than that, GHC's benchmark suite is called "nofib".
[11:18:56] <adridu59> r? https://github.com/mozilla/rust/pull/9868 acrichto
[11:19:00] *** Quits: jensnockert (jensnocker@moz-197D59BC.wireless.lu.se) (Connection reset by peer)
[11:19:21] *** Joins: jensnockert (jensnocker@moz-197D59BC.wireless.lu.se)
[11:19:39] <dbaupp> adridu59: you fixed the header links! <3
[11:20:36] *** Quits: heftig (heftig@moz-B2FE7F86.dip0.t-ipconnect.de) (Quit: Quitting)
[11:20:37] <adridu59> dbaupp: what do you mean exactly?
[11:21:08] <adridu59> what header? BTW if you have an r+ for me that's good, acrichto and brson reviewed it already, just fixed a makefile derp
[11:21:34] <dbaupp> adridu59: clicking on the "communication between tasks" in http://adrientetar.legtux.org/cached/rust-doc/rust.html#communication-between-tasks used to take you back to the table of contents... but with your changes it doesn't
[11:23:12] <adridu59> dbaupp: ah ok, not sure what changed that... only change on the HTML was switching pandoc to HTML5
[11:23:37] <dbaupp> adridu59: oh, well, doesn't matter... it's fixed :)
[11:23:57] *** Joins: wilma (Mibbit@1CC1662.4C84EF83.57DA49D3.IP)
[11:23:58] *** Quits: jensnockert (jensnocker@moz-197D59BC.wireless.lu.se) (Input/output error)
[11:24:49] *** Quits: wilma (Mibbit@1CC1662.4C84EF83.57DA49D3.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[11:25:22] *** Quits: fyolnish (fyolnish@moz-75428E9C.tky.mesh.ad.jp) (Client exited)
[11:26:28] *** Quits: alonlevy (alon@moz-61A0AD83.red.bezeqint.net) (Ping timeout)
[11:26:38] <adridu59> dbaupp: thanks! well I think the documentation is easier to read with my changes.... think I can start reading it now ;)
[11:27:08] <dbaupp> adridu59: I agree (although, I'm not so bothered about reading it :P )
[11:27:38] <adridu59> yea I can imagine that seing your CRs
[11:27:54] <dbaupp> "CRs"?
[11:28:01] <adridu59> code reviews
[11:28:09] <adridu59> anyways, I've gotta go now cheers
[11:28:12] *** Quits: adridu59 (Mibbit@moz-E7A273CD.ac-paris.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[11:28:15] <dbaupp> thanks
[11:28:17] <dbaupp> oh
[11:31:06] *** Quits: ksh8281 (ksh8281@5AB4884B.FCC4549.14D5B978.IP) (Quit: Lost terminal)
[11:39:12] *** Joins: jensnockert (jensnocker@moz-D12CA539.mobileonline.telia.com)
[11:40:27] *** Joins: eddyb9 (eddy@3C6E2DBB.FFB4E060.A5830293.IP)
[11:44:51] * ksf is stuck. can't figure out how to insert an element into a treemap :(   http://pastebin.com/vU2wC84y
[11:48:07] *** Joins: andre_ (andre@CA528A4A.45A4338E.8EE27E6.IP)
[11:48:07] <Heather_> dbaupp now my PR is fine so bot can test it?
[11:48:35] <FreeFull> ksf: What happens when you get rid of the &
[11:48:52] <dbaupp> rusti: use extra::treemap::TreeMap; let mut map = TreeMap::new(); map.insert(~"foo", 1i); println!("{:?}", map.find(&~"foo"))
[11:48:53] -rusti- Some(&1)
[11:48:53] -rusti- ()
[11:48:58] <dbaupp> ksf: ^
[11:49:15] *** andre_ is now known as _andre
[11:49:38] <dbaupp> Heather_: a reviewer needs to put an "r+" on the last commit and then "bors" will test it, and merge it if the tests pass ok
[11:50:12] <dbaupp> rusti: use extra::treemap::TreeMap; let mut map = TreeMap::new(); map.extend((~[(~"foo", 1i)]).move_iter()); println!("{:?}", map.find(&~"foo"))
[11:50:16] -rusti- pastebinned 9 lines of output: http://ix.io/8xH
[11:50:24] <ksf> FreeFull, then it complains that it wants a reference
[11:50:38] *** Joins: pyrac (pyrac@F1F89E09.73C89388.AD05C589.IP)
[11:50:40] <ksf> dbaupp, why didn't I see "insert" in the docs?
[11:51:14] <ksf> (because it's not there, apparantly)
[11:51:19] <dbaupp> rusti: use extra::treemap::TreeMap; let mut map = TreeMap::new(); map.extend(&mut (~[(~"foo", 1i), (~"bar", 2i)]).move_iter()); println!("{:?} {:?} {:?}", map.find(&~"foo"), map.find(&~"bar"), map.find(&~"baz"))
[11:51:20] -rusti- Some(&1) Some(&2) None
[11:51:20] -rusti- ()
[11:51:32] <dbaupp> ksf: it's a method on the Map or MutableMap trait
[11:51:33] <dbaupp> iirc
[11:51:34] <FreeFull> Seems your m wasn't mutable anyway, so I don't know what extending it was supposed to do
[11:51:37] <ksf> ahhh move_iter. that makes sense.
[11:52:00] *** Quits: bjz (brendanzab@moz-38D46E1C.perm.iinet.net.au) (Quit: Leaving...)
[11:52:15] <ksf> FreeFull, throw another error :)
[11:52:18] <dbaupp> ksf: ... oh, it's not in the docs :S
[11:52:45] <dbaupp> ksf: ah! it's a default method on MutableMap: http://static.rust-lang.org/doc/master/std/container/trait.MutableMap.html
[11:53:12] <FreeFull> http://static.rust-lang.org/doc/master/extra/treemap/struct.TreeSet.html#method.insert
[11:53:21] <FreeFull> That looks like it is in the docs to me
[11:53:32] <dbaupp> FreeFull: different type
[11:53:39] *** Joins: reedlepee (Mibbit@BD7C15CC.C619D10B.9D59D0D8.IP)
[11:53:39] <dbaupp> that's TreeSet, not TreeMap
[11:53:42] <FreeFull> Ah
[11:53:46] <FreeFull> You're right
[11:55:11] <FreeFull> TreeMap doesn't document that it implements MutableMap, so either the docs aren't accurate or the impl is somewhere lower down
[11:55:31] <FreeFull> Ah, it does implement MutableMap
[11:55:37] <ksf> it does document it, but doesn't mention all methods.
[11:55:45] <dbaupp> probably worth filing a bug about
[11:55:48] <FreeFull> insert is a provided method
[11:55:49] *** Quits: jdm (jdm@moz-300427AD.cable.virginmedia.com) (Ping timeout)
[11:55:51] <ksf> ...nor links to mutableMap's definition.
[11:56:04] <FreeFull> swap, pop and find_mut are the ones you have to implement
[11:56:05] <dbaupp> you can click on the name of the trait in the `impl ...`
[11:56:07] *** kimundi is now known as zz_kimundi
[11:56:45] <FreeFull> http://static.rust-lang.org/doc/master/src/std/home/rustbuild/src/rust-buildbot/slave/doc/build/src/libstd/container.rs.html#48-74
[11:57:08] *** Joins: jdm (jdm@moz-300427AD.cable.virginmedia.com)
[11:57:08] *** ChanServ sets mode: +o jdm
[11:57:32] <FreeFull> Also http://static.rust-lang.org/doc/master/src/extra/home/rustbuild/src/rust-buildbot/slave/doc/build/src/libextra/treemap.rs.html#110-132
[11:57:53] <ksf> yeah it's using the default methods.
[11:58:06] <ksf> maybe rustdoc generally doesn't link to non-overidden ones.
[11:58:31] <ksf> haddock doesn't even do that, it just links to the typeclass definition.
[11:58:50] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[11:59:04] <FreeFull> Maybe linking straight to the trait definition would be less confusing
[11:59:23] <FreeFull> It'd be nice for the default methods to show up in search though
[11:59:57] *** Quits: jdm (jdm@moz-300427AD.cable.virginmedia.com) (Ping timeout)
[12:00:39] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[12:02:11] *** Joins: jwheare (uid2@moz-A42E5B7B.irccloud.com)
[12:03:42] <reedlepee> cmr: Hi I would like to know about the bug "Inspecific span when struct has no field" . Could you please help me..
[12:06:06] <reedlepee> Someone cam help me with the bug "Add method to obtain useful system hardware information" ??
[12:07:02] <reedlepee> bjz_: are u there ??
[12:11:19] *** Joins: alonlevy (alon@moz-61A0AD83.red.bezeqint.net)
[12:11:28] <benh> re: "Inspecific span when struct has no field", the issue is apparently that the error message isn't clear on which struct doesn't have a field foo
[12:11:42] *** zz_kimundi is now known as kimundi
[12:12:24] <benh> given that Foo { foo: f.foo } requires that both the type Foo and the variable f have a field called foo, just underlining that whole line of code and not mentioning which structure is the problem is not very clear
[12:13:03] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Quit: Jesse)
[12:13:59] <benh> the error message seems to get generated in src/librustc/middle/typeck/check/mod.rs fwiw
[12:15:24] *** Joins: heftig (heftig@DAFC9820.215F88BE.172227A7.IP)
[12:16:53] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[12:20:20] *** Quits: jaen (jaen@138A5D71.4C038AE9.C4431F0E.IP) (Ping timeout)
[12:21:13] *** bhearsum|afk is now known as bhearsum
[12:22:23] <eddyb> how do I concatenate two things in a macro?
[12:22:47] *** Joins: canhtak (jeremy@moz-44A7DE0.wl.t.ulaval.ca)
[12:24:30] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[12:24:40] <eddyb> I have $a and $b, and I want $a$b, if that's possible
[12:25:27] *** Joins: mw (mw@moz-4347A390.adsl.highway.telekom.at)
[12:26:01] *** Joins: fyolnish (fyolnish@moz-75428E9C.tky.mesh.ad.jp)
[12:26:29] <benh> i think there's concat_idents! but i don't know how it works or what it does :D
[12:27:02] <ChrisMorgan> concat_idents!($a, $b) produces $a$b concatenated, as desired.
[12:27:46] *** Quits: fyolnish (fyolnish@moz-75428E9C.tky.mesh.ad.jp) (Ping timeout)
[12:27:50] <benh> rusti: let ab = 42; concat_idents!(a, b)
[12:27:52] -rusti- pastebinned 7 lines of output: http://ix.io/8xK
[12:28:29] <benh> Does it not work with locals or is that some hygiene thing
[12:32:36] *** Quits: Houm (Houm@moz-25669AA8.fbx.proxad.net) (Input/output error)
[12:32:51] *** Joins: kurisumasu (queen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[12:33:15] <ChrisMorgan> Sounds like it's become broken recently.
[12:33:30] <eddyb> rusti: let ab = 42; macro_rules! foo (($a:ident $b:ident) => (concat_idents!($a, $b))) foo!(a, b)
[12:33:32] -rusti- pastebinned 6 lines of output: http://ix.io/8xO
[12:33:42] <eddyb> rusti: let ab = 42; macro_rules! foo (($a:ident $b:ident) => (concat_idents!($a, $b))) foo!(a b)
[12:33:45] -rusti- pastebinned 7 lines of output: http://ix.io/8xP
[12:34:03] *** Joins: Houm (Houm@moz-25669AA8.fbx.proxad.net)
[12:34:34] <eddyb> ChrisMorgan: maybe it's rusti + macros?
[12:34:48] *** Parts: Heather_ (Heather@19663F6.F53BAACC.9C17E900.IP) ()
[12:35:06] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[12:36:09] *** Joins: Ms2ger (Ms2ger@moz-8FA937F3.ugent.be)
[12:36:37] <reedlepee> bjz: Hi
[12:36:46] <bjz> o/
[12:37:58] *** Joins: jaen (jaen@138A5D71.4C038AE9.C4431F0E.IP)
[12:40:11] <reedlepee> i would like to work on my first bug .. "Add method to obtain useful system hardware information" could you please help me where to start
[12:40:11] <reedlepee> I have  successfully  downloaded the code
[12:40:46] <umbridge> can anyone recommend a text editor for rust?
[12:41:16] <zokier`> vim seems to work nicely enough
[12:41:38] <reedlepee> bjz:any information about the bug?
[12:45:56] *** Quits: _Vi (vi@527C345F.497AA854.B16B3BE6.IP) (Ping timeout)
[12:47:47] *** jorendorff_away is now known as jorendorff
[12:47:49] *** Quits: jensnockert (jensnocker@moz-D12CA539.mobileonline.telia.com) (Input/output error)
[12:49:05] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[12:50:12] <reedlepee> when i run make check following the instructions on https://github.com/mozilla/rust/wiki/Note-getting-started-developing-Rust .. It says "make: *** No rule to make target `check'.  Stop." 
[12:50:22] <reedlepee> Can anyone help with this ?
[12:50:34] <FreeFull> reedlepee: Is the makefile there?
[12:50:35] <bstrie> reedlepee: did you run "./configure" yet?
[12:51:39] <reedlepee> yeah i ran ./configure
[12:51:53] <bstrie> hm, not sure
[12:51:55] *** Quits: dissimile (dissimile@moz-141B07E7.static.as13285.net) (Ping timeout)
[12:51:59] <bstrie> I haven't run make check in a while myself
[12:52:02] <bstrie> perhaps it was renamed
[12:52:43] <mw> bstrie: I think it should still be 'make check'
[12:53:12] <reedlepee> i followed the instructions on the above link. yesterday I  followed till ./configure 
[12:53:23] <reedlepee> now i ran make check it gave the following error
[12:53:26] <FreeFull> reedlepee: Is there a makefile in that directory?
[12:54:18] <reedlepee> oopss sorry.. 
[12:54:21] <mw> reedlepee: What operating system are you on?
[12:54:33] <reedlepee> i was running it in a directory rust that i created 
[12:54:45] <FreeFull> An empty directory?
[12:54:50] <reedlepee> not in the directory that was created while downloading the code
[12:55:23] <mw> reedlepee: I guess we've all been there at one time or other :)
[12:55:38] <reedlepee> sorry :(
[12:55:59] <bstrie> reedlepee: np :P
[12:57:10] <reedlepee> bstrie:I would like to work on the bug "Add method to obtain useful system hardware information" 
[12:57:14] <reedlepee> could you help me with the bug
[12:57:28] *** Quits: TD-Linux (TD-Linux@E338EB99.2B4F0AE0.A0A36CCE.IP) (Ping timeout)
[12:57:57] *** flaper87|afk is now known as flaper87
[12:59:06] <bstrie> reedlepee: can you link me to the bug?
[12:59:33] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[12:59:43] <reedlepee> bstrie:https://github.com/mozilla/rust/issues/2181
[13:00:30] *** Joins: GeneralMaximus (ankur@414583C7.48DE37B0.BE90E62C.IP)
[13:01:58] <bstrie> reedlepee: yikes, that looks scary :) but should be doable if you follow the code from stackoverflow
[13:02:43] <bstrie> reedlepee: given that this is an issue with different solutions for each platform, how many operating systems do you have available to test on?
[13:03:02] <reedlepee> only one 
[13:03:26] <bstrie> ok, then perhaps tjc can give you access to the rust trybots
[13:03:38] <bstrie> which are just testing bots that live in the cloud
[13:03:39] <reedlepee> bstrie:  i want to start with some very easy bugs
[13:03:49] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[13:04:13] <reedlepee> i took this from the wiki page for rust opw
[13:04:44] <reedlepee> i don't know which bug to work on :(
[13:04:51] *** Quits: BitPuffin (isak@moz-98F8BF74.cust.tele2.se) (Ping timeout)
[13:05:44] *** Joins: jensnockert (jensnocker@moz-D12CA539.mobileonline.telia.com)
[13:06:18] <bstrie> hm
[13:08:15] <bstrie> reedlepee: what do you think about https://github.com/mozilla/rust/issues/7313 ?
[13:08:57] <bstrie> reedlepee: looks like the person working on that disappeared 4 months ago, and I don't see a branch for this issue in their github repo
[13:09:01] *** Quits: gour (gour@moz-1BF2F07F.adsl.net.t-com.hr) (Quit: WeeChat 0.4.1)
[13:09:01] <bstrie> so it's up for grabs
[13:10:51] *** Joins: wilsonk-laptop (kvirc@moz-8E86F35A.cg.shawcable.net)
[13:13:15] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[13:13:39] <reedlepee> bstrie:Could you explain a lil about the bug
[13:14:57] <eddyb> bstrie: I don't see *() mentioned for c_void :P
[13:17:46] <bstrie> eddyb: does that seriously work
[13:17:51] <kimundi> eddyb: We also have util::Void
[13:18:04] <bstrie> right, I wasn't sure if util::Void was a drop-in replacement for c_void
[13:18:11] <bstrie> commented as such in the issue
[13:18:24] <eddyb> bstrie: it should AFAIK
[13:18:50] <kimundi> At least for void pointers
[13:19:13] <bstrie> reedlepee: basically, our `libc` library defines a lot of types that map directly to types from c, like c_void
[13:19:33] <kimundi> The difference between Void and () is that you can't construct a Void, but can always construct a ()
[13:19:42] <bstrie> reedlepee: but we prefer to only use those in functions that are marked with `extern "C"`, which indicates that those functions are for C interoperability
[13:20:09] <bstrie> reedlepee: the problem is that there are rust functions that use the c types directly
[13:20:21] <eddyb> rusti: unsafe {*((&("abc"[0]) as *u8 as *() as uint + 1) as *() as *u8) as char}
[13:20:22] -rusti- 'b'
[13:20:24] <bstrie> reedlepee: so the solution is to figure out which rust types are analogous to the c types, and use those instead
[13:20:29] <eddyb> hah that worked first time
[13:21:06] <bstrie> reedlepee: for example, replacing any use of `std::libc::c_void` with `std::util::Void`
[13:21:24] * kimundi slaps eddyb for that line of code ;)
[13:21:55] <bstrie> reedlepee: before you start work on this though, I recommend consulting with the person who filed the bug (which is brson, in this case) and making sure that it's still relevant
[13:22:03] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[13:22:04] <kimundi> eddyb: Also, I think you can remove the "as *()" parts
[13:22:19] <eddyb> kimundi: yupp, I'm just showing it works that way
[13:22:43] <eddyb> it's probably good that pointer arithmetic doesn't work :D
[13:22:45] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[13:22:46] <kimundi> Ah, yeah
[13:23:03] <bstrie> reedlepee: as for the task of figuring out which rust types are equivalent to which c types, you'll have to ask someone smarter than I am :)
[13:23:59] <bstrie> reedlepee: as a start though, I *think* that "size_t" can always be replaced with "uint" (but I'm no good at C)
[13:24:29] <kimundi> yeah, that one should work
[13:25:11] <bstrie> http://stackoverflow.com/questions/131803/unsigned-int-vs-size-t seems to indicate that's not true for 16-bit systems, so it's a good thing we don't support those :P
[13:25:16] <reedlepee> bstrie:u mean to say in the whole code base we need to replace c types to rust types wherever possible
[13:25:52] <bstrie> reedlepee: *only* in rust functions :)
[13:26:00] <bstrie> reedlepee: I will give you an example of both rust and extern functions
[13:26:29] *** Quits: six600110 (six600110@moz-C663577C.hsd1.il.comcast.net) (Ping timeout)
[13:26:56] <klutzy> seems like rustdoc doesn't see `impl X { ... }` methods now
[13:27:46] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[13:27:52] *** Joins: james_alt (uid15103@moz-31ABA2C0.irccloud.com)
[13:28:41] *** Parts: mw (mw@moz-4347A390.adsl.highway.telekom.at) ()
[13:28:43] *** Quits: jensnockert (jensnocker@moz-D12CA539.mobileonline.telia.com) (Input/output error)
[13:29:01] <bstrie> reedlepee: look at the line of code here: https://github.com/mozilla/rust/blob/master/src/libstd/os.rs#L63
[13:29:17] <bstrie> reedlepee: do you see those two function signatures inside the "extern" block?
[13:29:32] <reedlepee> bstrie:where is  the libc library?
[13:29:46] <reedlepee> bstrie: yeah
[13:30:03] <kimundi> std::libc
[13:30:07] <bstrie> reedlepee: in the rust tree, our libc module is under "src/libstd/libc.rs"
[13:30:18] <kimundi> src/libstd/libc.rs
[13:30:57] <bstrie> reedlepee: anyway, any functions defined inside "extern" blocks are just declaring the signature of C functions
[13:31:04] *** Joins: six600110 (six600110@moz-C663577C.hsd1.il.comcast.net)
[13:31:14] <bstrie> reedlepee: so any function that's inside an "extern" block is totally allowed to use c types
[13:31:54] <bstrie> reedlepee: I *think* what brson wants from that bug is for any function that's *not* in an "extern" block to *not* have c types in its function signature
[13:32:03] <eddyb> bstrie: uint isn't unsigned int, it's uintptr_t which should be as big as size_t
[13:32:06] *** Quits: huseby (huseby@moz-4E8C421A.husebyhome.com) (Input/output error)
[13:32:39] <bstrie> eddyb: by "as big as" do you mean "equal to" or "at least as big as"
[13:32:57] <eddyb> bstrie: uint >= uintptr_t = size_t
[13:33:05] <eddyb> AFAIK
[13:33:24] <bstrie> eddyb: well you know more about this than I do, I invite you to help reedlepee out on https://github.com/mozilla/rust/issues/7313 :P
[13:33:42] *** Quits: aruniiird (aruniiird@92D70115.B332A52C.E3D0A897.IP) (Ping timeout)
[13:33:51] <eddyb> on a 16bit system, they could decide to make (u)int 32bit, but it could be 16bit as well
[13:33:57] <bstrie> reedlepee: also, brson only cares about the standard library here, don't worry about looking in all the other places in the compiler
[13:34:22] <kimundi> eddyb: Our uint and int are defined as pointer sized though
[13:34:52] <bstrie> kimundi: I think what eddyb is saying is that size_t isn't defined as pointer-sized
[13:35:03] <eddyb> bstrie: nope, it is
[13:35:06] *** Quits: lahwran (lahwran@lahwran.net) (Ping timeout)
[13:35:10] * bstrie throws up his hands
[13:35:21] <eddyb> kimundi: I saw uint >= uintptr_t. maybe the wording was wrong in the docs or wherever I read that
[13:35:36] * kimundi catches bstries hands and hands them back
[13:35:38] <eddyb> I know uint = uintptr_t for all supported platforms atm
[13:36:22] * bstrie reluctantly takes back his half-digested hands
[13:36:34] <eddyb> reedlepee: uintptr_t and size_t => uint. intptr_t and ssize_t => int
[13:36:36] *** Joins: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP)
[13:36:57] <eddyb> (does anything use ssize_t in std, even?)
[13:37:09] <eddyb> ßize_t
[13:38:45] <kimundi> rusti: type ßize_t = int; // For German users
[13:38:46] -rusti- ()
[13:39:01] <reedlepee> bstrie:https://github.com/mozilla/rust/issues/6085 
[13:39:09] <reedlepee> this is similar i guess
[13:39:10] *** Joins: sankha93 (Instantbir@D8CFE4A.4DC87FA4.25B273F5.IP)
[13:39:28] <eddyb> rusti: let două = 2; două
[13:39:29] -rusti- 2
[13:39:34] <eddyb> wow...
[13:39:35] *** Parts: jwheare (uid2@moz-A42E5B7B.irccloud.com) ()
[13:39:52] <eddyb> rusti: let $ = 5; $
[13:39:54] -rusti- pastebinned 6 lines of output: http://ix.io/8xT
[13:40:34] <bstrie> eddyb: was that a "wow, this is neat" or "wow, this is terrible" :P
[13:40:54] *** Quits: Ms2ger (Ms2ger@moz-8FA937F3.ugent.be) (Ping timeout)
[13:40:59] <eddyb> bstrie: I don't have a precise use for it, but it's a very neat thing
[13:41:12] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[13:41:21] <kimundi> rusti: let 日本語 = true; 日本語
[13:41:22] -rusti- true
[13:41:29] <bstrie> rusti: let π = 3; π
[13:41:30] -rusti- 3
[13:41:49] * kimundi throws a geometry book at bstrie
[13:42:04] <eddyb> rusti: let x₀ = 0; x₀
[13:42:06] -rusti- pastebinned 6 lines of output: http://ix.io/8xU
[13:42:08] <eddyb> :(
[13:42:35] <kimundi> It only accepts unicode codepoints that are part of a regular alphabet
[13:42:48] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[13:42:55] <kimundi> WHich means greek math symbols usually work, but nothing too fancy
[13:43:14] *** Joins: _Vi (vi@77C5EFC7.65F4C6C6.48F984E6.IP)
[13:43:31] <eddyb> but since you can use decimal digits in an ident, why not allow sub/super digits?
[13:43:44] <eddyb> (sounds like Unicode doesn't mark them as such)
[13:43:51] <kimundi> Probably
[13:44:41] <kimundi> rusti: let ☺ = true;
[13:44:43] -rusti- pastebinned 6 lines of output: http://ix.io/8xV
[13:45:55] <kimundi> let ب_ب = true; ب_ب
[13:46:00] <kimundi> rusti: let ب_ب = true; ب_ب
[13:46:01] -rusti- true
[13:46:18] *** Joins: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net)
[13:46:30] <maikeru> That's beautiful
[13:47:09] *** Joins: Ms2ger (Ms2ger@moz-E5FA052E.ugent.be)
[13:47:11] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[13:47:14] <FreeFull> let ¶ = 3; ¶
[13:47:23] <FreeFull> rusti: let ¶ = 3; ¶
[13:47:25] -rusti- pastebinned 6 lines of output: http://ix.io/8xW
[13:48:09] *** Joins: sebcrozet (sebcrozet@moz-2517AE39.w80-13.abo.wanadoo.fr)
[13:49:21] *** Joins: cowboyd (cowboyd@1D8844A7.1B729417.CEE440B6.IP)
[13:50:34] <maikeru> rusti: let τrue = false; τrue
[13:50:35] -rusti- false
[13:50:53] <eddyb> maikeru: oh you can troll someone with that
[13:50:58] <maikeru> hehe
[13:51:31] *** Quits: heftig (heftig@DAFC9820.215F88BE.172227A7.IP) (Ping timeout)
[13:54:07] *** Joins: Kruppe (user@moz-253119B0.esg.uwaterloo.ca)
[13:55:23] *** Joins: alex_quiterio (Mibbit@moz-AC2C0758.rev.vodafone.pt)
[13:57:16] <FreeFull> Where are true and false defined?
[13:57:43] <bstrie> FreeFull: amusingly, "true" and "false" are keywords in rust, but "bool" isn't :P
[13:58:12] <FreeFull> So you can shadow keywords? That doesn't sound good
[13:58:19] <bstrie> we decided that the risk of someone redefining true and false wasn't worth the niceness of not having them live in the compiler
[13:58:32] <bstrie> FreeFull: look closely at that example above...
[13:58:42] *** Joins: lahwran (lahwran@lahwran.net)
[13:58:45] <FreeFull> Oh, that's not a t
[13:58:56] <eddyb> rusti: let int = 0u;
[13:58:57] -rusti- <anon>:9:13: 9:16 warning: unused variable: `int`, #[warn(unused_variable)] on by default
[13:58:57] -rusti- <anon>:9          let int = 0u;
[13:58:57] -rusti-                       ^~~
[13:58:57] -rusti- ()
[13:59:11] <eddyb> it's not really dangerous
[13:59:21] <eddyb> rusti: type int = uint;
[13:59:22] -rusti- ()
[13:59:29] <eddyb> wait, that might be :))
[14:00:02] <bstrie> eddyb: I'm not sure that that *actually* works
[14:00:05] <bstrie> it might just pretend to
[14:00:07] <kimundi> rusti: type int = uint; let x: int = -1; x
[14:00:08] -rusti- -1
[14:00:14] <benh> aw
[14:00:21] <kimundi> rusti: type yint = uint; let x: yint = -1; x
[14:00:22] -rusti- 18446744073709551615u
[14:00:33] <benh> rusti: type int = uint; let x: ::int = -1; x
[14:00:34] -rusti- -1
[14:00:35] <eddyb> kimundi: not even a warning? that's also dangerous
[14:00:41] <kimundi> I think this is a bug :P
[14:00:43] <benh> huh
[14:00:51] *** Quits: six600110 (six600110@moz-C663577C.hsd1.il.comcast.net) (Quit: Ex-Chat)
[14:00:54] <FreeFull> In Haskell True and False might seem like a normal type, but you need to use the built in ones if you want some things to work, like pattern matching on numbers
[14:01:11] <bstrie> yeah, should probably file a bug for typedefing int as uint
[14:01:11] <reedlepee> bstrie:https://github.com/mozilla/rust/issues/6085 is it different from  https://github.com/mozilla/rust/issues/7313 ??
[14:01:22] <bstrie> either it should work or it should fail to compile, not silently fail to work
[14:01:45] <bstrie> reedlepee: 6085 looks like a subset of 7313
[14:02:01] <bstrie> reedlepee: what timezone are you in?
[14:02:09] <benh> rusti: mod m { type int = (); } let x: m::int = -1; x
[14:02:11] -rusti- pastebinned 7 lines of output: http://ix.io/8xX
[14:02:41] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[14:02:49] *** Joins: six600110 (six600110@moz-C663577C.hsd1.il.comcast.net)
[14:03:02] <eddyb> use m::*; mod m { type int = (); } let x: m::int = -1; x
[14:03:10] <Earnestly> If people say True and False is built-in to Haskell, does that mean built-in (to the language) or part of the standard library?
[14:03:24] <eddyb> rusti: use m::*; mod m { type int = (); } let x: int = -1; x
[14:03:26] -rusti- pastebinned 10 lines of output: http://ix.io/8xY
[14:03:44] <bstrie> Earnestly: it could probably mean either
[14:03:52] <Earnestly> So confusing :(
[14:03:53] <reedlepee> bstrie: tjc has suggested 6085 on wiki for rust OPW
[14:04:14] *** Quits: erickt1 (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[14:04:25] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[14:04:27] <Earnestly> By saying it’s part of the language it implys you cannot create the same with the language itself, when it’s part of the standard library, it is built from the language itself
[14:04:42] <bstrie> Earnestly: there are a lot of things in Rust that are "built-in" to the compiler, like true and false, and then there are things that are "built-in" to the stdlib, like Option, and then there are things that are "built-in" to the stdlib but require a lang item which means that they're *also* sort of a little bit part of the compiler
[14:05:07] <Earnestly> :|
[14:05:30] <bstrie> Earnestly: I disgree. in the case of true and false, we could clearly define them in the stdlib if we wanted to. however, the risk of people redefining the values of true and false to something different is seen as too great, so it's in the compiler instead
[14:05:37] <bstrie> this is a policy decision, not a technical decision
[14:05:54] <Earnestly> That’s fine.  In that case your true and false is built-in
[14:06:27] <Earnestly> Whereas it’s not built-in to Haskell but part of the prelude
[14:06:43] *** Joins: jdm (jdm@514D186.F3BBB17D.144F44FA.IP)
[14:06:43] *** ChanServ sets mode: +o jdm
[14:07:08] <Earnestly> Or something like that
[14:07:21] <bstrie> Earnestly: as for things that are in the stdlib as lang-items, these are often for performance reasons. for example, when we move GC from the compiler to the stdlib, it will have to use lang items because there are some things about efficient GC implementation that simply require compiler support
[14:07:59] *** Joins: jdm_ (jdm@88F51059.F3BBB17D.144F44FA.IP)
[14:08:13] <Earnestly> I guess lang-items do blur the lines
[14:08:15] *** Joins: aruniiird (aruniiird@28876D92.F24A7F1B.260B031E.IP)
[14:08:25] *** Quits: jdm (jdm@514D186.F3BBB17D.144F44FA.IP) (Ping timeout)
[14:08:28] <bstrie> Earnestly: for the reasons above, when someone asks if something is "built-in" to rust, I generally say it is if the rust specification document would define that thing, regardless of where the implementation itself lives
[14:08:37] <bstrie> and since the stdlib would be part of the standard, those things are built-in
[14:08:50] <Earnestly> Okay, I can adapt to that then
[14:09:10] *** Quits: DasIch (dasich@moz-5EDA591.de) (Client exited)
[14:09:11] <bstrie> though it's still important to make the distinction between the two, since people are free to create rust code that eliminates the stdlib entirely
[14:09:24] <bstrie> in which case, it's up to them to provide implementations of each lang item that they intend to use
[14:09:44] *** Joins: lfox (lfox@moz-343B6F0C.nyc.biz.rr.com)
[14:10:30] *** Joins: DasIch (dasich@moz-5EDA591.de)
[14:10:59] <bstrie> reedlepee: 6085 should be feasible for a new contributor, but the only problem is that it's not entirely clear what the fix should be :)
[14:11:11] <bstrie> reedlepee: there appears to be an argument in the comments over the correct approach to fixing the bug
[14:11:35] <bstrie> reedlepee: in general, since brson filed that bug, it's safe to ask brson what he thinks the correct approach is
[14:12:17] <reedlepee> bstrie:I coudn't see brson online
[14:12:53] <bstrie> reedlepee: that's why I asked what timezone you were in :) brson is in california, so he might not be online for a few more hours
[14:13:02] *** Joins: pnkfelix (pnkfelix@moz-B65AF445.hfc.comcastbusiness.net)
[14:13:03] *** ChanServ sets mode: +o pnkfelix
[14:13:26] <bstrie> reedlepee: in the meantime, if you can't stick around that long, feel free to leave a comment on 6085, and then ask brson in person the next time you see him
[14:13:37] <reedlepee> ohh I am in India 
[14:13:42] <bstrie> ah I see
[14:13:53] *** Joins: heftig (heftig@moz-E8E2034C.inf.fh-bonn-rhein-sieg.de)
[14:14:13] <bstrie> reedlepee: it must be getting late there :P
[14:16:43] *** Quits: lfox (lfox@moz-343B6F0C.nyc.biz.rr.com) (Ping timeout)
[14:16:59] *** Joins: crembo (crembo@moz-C2B364AA.vc.shawcable.net)
[14:18:11] *** Joins: lmandel (lmandel@13F2CEC5.7672369.D8E68FF6.IP)
[14:18:43] *** Joins: lfox (lfox@moz-343B6F0C.nyc.biz.rr.com)
[14:20:33] <reedlepee> bstrie:Meanwhile if you could help me in selecting a bug to work on from https://wiki.mozilla.org/GNOME_Outreach_December2013#Outreach_Program_For_Women_2013 :)
[14:21:57] *** Quits: z0w0 (zack@moz-C877F2F7.lnse2.cha.bigpond.net.au) (Client exited)
[14:22:32] *** Joins: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net)
[14:22:59] <bstrie> reedlepee: how do you like the look of https://github.com/mozilla/rust/issues/4992 ? are you a fan of writing data structures?
[14:25:59] *** Quits: arodier74 (Thunderbir@moz-25EB015.in-addr.btopenworld.com) (Quit: arodier74)
[14:26:10] <reedlepee> bstrie:not actually a fan ..
[14:26:51] *** Quits: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net) (Ping timeout)
[14:27:24] <reedlepee> but i think it won't be easy 
[14:27:49] <reedlepee> by not easy i mean it would a lot of time 
[14:27:56] <reedlepee> take*
[14:28:46] *** Parts: james_alt (uid15103@moz-31ABA2C0.irccloud.com) ()
[14:28:56] <bstrie> hm
[14:28:57] *** Joins: jordyd (jordyd@moz-F459C4AF.seg33.ucf.edu)
[14:29:58] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[14:29:58] *** ChanServ sets mode: +ao dherman dherman
[14:31:06] <bstrie> reedlepee: what platform are you on?
[14:32:15] *** Joins: nwmcsween (nwmcsween@E0025B86.51EE1362.3655BBF5.IP)
[14:32:21] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[14:33:18] <bstrie> acrichto: ping
[14:34:34] *** Quits: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net) (Quit: ozten)
[14:34:53] *** jorendorff is now known as jorendorff_away
[14:37:28] *** Quits: nwmcsween (nwmcsween@E0025B86.51EE1362.3655BBF5.IP) (Ping timeout)
[14:37:55] *** Joins: arodier74 (Thunderbir@moz-25EB015.in-addr.btopenworld.com)
[14:38:11] *** Joins: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com)
[14:38:41] <xAndy> i have a link failure if i call a reexported function in another crate: https://gist.github.com/ydnax/7021109
[14:38:43] <xAndy> it fails if i run rustpkg test testmod
[14:39:37] <bstrie> xAndy: yikes
[14:39:38] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[14:39:54] <xAndy> i am nut sure if i am doing this right ;)
[14:40:17] <bstrie> xAndy: worse still is that we're not sure if rustpkg is doing this right :P
[14:40:46] <bstrie> it's still so new that I'm not sure how it works myself
[14:40:47] <ChrisMorgan> Yes, I like this Rust-CI thing. I just got informed that rust-http broke, GenericPath::from_str no longer exists :-)
[14:40:58] <bstrie> ChrisMorgan: \o/
[14:41:14] *** Quits: GeneralMaximus (ankur@414583C7.48DE37B0.BE90E62C.IP) (Quit: Computer has gone to sleep.)
[14:41:54] <ChrisMorgan> Time to make me a fresh build of rust overnight. And that's good justification for going to bed now... if not an hour or two ago.
[14:42:13] *** Joins: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net)
[14:42:56] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[14:43:06] <xAndy> bstrie is there a way to let rustpkg print the commands it executes so i could narrow down the error?
[14:43:33] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[14:43:44] <bstrie> xAndy: rustpkg is a black box to me, but tjc would know the answer when he gets on
[14:43:50] <xAndy> ok
[14:43:52] *** Joins: exobit (foo@moz-90D1B547.nycmny.fios.verizon.net)
[14:43:55] *** Quits: exobit (foo@moz-90D1B547.nycmny.fios.verizon.net) (Quit: exobit)
[14:44:18] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[14:44:24] *** jdm_ is now known as jdm
[14:44:34] *** jorendorff_away is now known as jorendorff
[14:45:57] *** Quits: crembo (crembo@moz-C2B364AA.vc.shawcable.net) (Client exited)
[14:46:59] *** Joins: rail44 (Mibbit@moz-327E5E76.m-net.ne.jp)
[14:47:51] *** Joins: jvns_ (bork@87D98E32.4046EB22.428F94DD.IP)
[14:48:03] *** Quits: rail44 (Mibbit@moz-327E5E76.m-net.ne.jp) (Quit: http://www.mibbit.com ajax IRC Client)
[14:48:31] *** Quits: alonlevy (alon@moz-61A0AD83.red.bezeqint.net) (Ping timeout)
[14:49:05] *** Joins: rail44 (Mibbit@moz-327E5E76.m-net.ne.jp)
[14:50:11] <bstrie> reedlepee: in any case, the projects on that wiki page are designed to be long-term, challenging projects. I think tjc wanted you to start with something simpler, hence why he suggested looking at the "easy" bugs in the compiler
[14:51:50] <reedlepee> bstrie:yeah actually i want to apply for OPW and for that i need to make a small contribution before the application deadline ...
[14:52:07] <reedlepee> still searching for a easy bug 
[14:54:06] *** Joins: crembo (crembo@moz-C2B364AA.vc.shawcable.net)
[14:54:57] *** Quits: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net) (Quit: leaving)
[14:55:06] *** Quits: KENZ (Mibbit@moz-8933D851.ppp-bb.dion.ne.jp) (Quit: http://www.mibbit.com ajax IRC Client)
[14:55:29] *** Quits: rail44 (Mibbit@moz-327E5E76.m-net.ne.jp) (Quit: http://www.mibbit.com ajax IRC Client)
[14:55:34] *** Joins: rail44 (Mibbit@moz-327E5E76.m-net.ne.jp)
[14:55:48] *** Joins: KENZ (Mibbit@moz-8933D851.ppp-bb.dion.ne.jp)
[14:56:52] *** Joins: Soft (soft@moz-EC8D39F.yok.fi)
[14:57:19] *** Quits: umbridge (Mibbit@moz-4A19983C.ip227.fastwebnet.it) (Quit: http://www.mibbit.com ajax IRC Client)
[14:58:22] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[15:03:11] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[15:04:09] *** Joins: bananapeel (nehmulos@moz-D2FF7068.netcologne.de)
[15:04:12] *** Quits: Kruppe (user@moz-253119B0.esg.uwaterloo.ca) (Ping timeout)
[15:06:41] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[15:08:54] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[15:09:43] *** Joins: jbaldwin (Mibbit@EF784383.FC9BECD6.A8DE49A2.IP)
[15:11:20] *** Quits: crembo (crembo@moz-C2B364AA.vc.shawcable.net) (Client exited)
[15:13:13] *** Quits: jaen (jaen@138A5D71.4C038AE9.C4431F0E.IP) (Ping timeout)
[15:13:24] *** Joins: skeet70 (skeet70@moz-156ACA63.msu.montana.edu)
[15:14:30] *** Quits: Ms2ger (Ms2ger@moz-E5FA052E.ugent.be) (Quit: bbl)
[15:19:28] <xAndy> bstrie ok, i managed to reproduce this link failiure error without rustpkg as well
[15:20:43] <xAndy> if i have https://gist.github.com/ydnax/7021109 in src/testmod/ and run "rustc --lib src/testmod/lib.rs -o src/testmod/testmod && rustc --test src/testmod/test.rs -L src/testmod/"
[15:21:00] <bstrie> weird
[15:21:05] <bstrie> xAndy: mind filing it as a bug report?
[15:21:08] <xAndy> i get the same link time error. it works if i move the struct and the impl in lib.rs
[15:21:27] <xAndy> bstrie np just wanted to make sure that the error isn't on my side :)
[15:22:09] *** Quits: sk (sk@moz-82E9BD64.dynamic.vega-ua.net) (Quit: Leaving)
[15:22:10] <qmx> what are the cool kids are using with rust? plain Makefiles?
[15:23:15] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[15:23:22] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[15:23:46] *** Quits: skeet70 (skeet70@moz-156ACA63.msu.montana.edu) (Ping timeout)
[15:24:01] *** Joins: crembo (crembo@moz-C2B364AA.vc.shawcable.net)
[15:25:26] <jdm> qmx: rust-pkg
[15:25:47] <jdm> qmx: http://static.rust-lang.org/doc/0.8/tutorial-rustpkg.html
[15:26:43] *** Quits: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net) (Ping timeout)
[15:26:45] *** Joins: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net)
[15:26:59] *** Quits: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca) (Client exited)
[15:27:36] *** Quits: fabiand__ (fabiand@moz-D16E79E0.adsl.alicedsl.de) (Ping timeout)
[15:28:31] *** Joins: fabiand__ (fabiand@moz-D16E79E0.adsl.alicedsl.de)
[15:29:12] *** Quits: sankha93 (Instantbir@D8CFE4A.4DC87FA4.25B273F5.IP) (Quit: Gone to save the world!)
[15:29:55] *** Joins: brendan (brendaneic@moz-F2813A2B.hfc.comcastbusiness.net)
[15:29:56] *** Joins: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca)
[15:30:57] *** Quits: bholley (anonymous@moz-D5EB36E2.rev.numericable.fr) (Quit: bholley)
[15:31:24] *** Quits: brendan (brendaneic@moz-F2813A2B.hfc.comcastbusiness.net) (Quit: brendan)
[15:31:28] <xAndy> bstrie https://github.com/mozilla/rust/issues/9906
[15:32:52] *** Joins: brendan (brendaneic@moz-F2813A2B.hfc.comcastbusiness.net)
[15:35:58] *** Quits: crembo (crembo@moz-C2B364AA.vc.shawcable.net) (Client exited)
[15:36:20] <bstrie> xAndy: thanks!
[15:36:28] *** Joins: vodik (simon@moz-B8C714D0.net.uwaterloo.ca)
[15:36:56] <xAndy> bstrie if i change mod other; to pub mod other it works
[15:37:07] <xAndy> is this intended? otherwise i'll update the issue
[15:37:16] <bstrie> not sure, honestly
[15:37:17] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[15:37:23] <bstrie> the pub/priv stuff has all changed recently
[15:37:31] *** Joins: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net)
[15:37:38] <xAndy> it seems like the symbols oinly get exported if the mod is pub. i'll update the issue then
[15:39:49] <bananapeel> rusti: let p = match std::path::PosixPath::from_str("/tmp") { Some(some) => some, _ => fail!("err")};
[15:39:52] -rusti- pastebinned 7 lines of output: http://ix.io/8y5
[15:40:04] *** Joins: bholley (anonymous@moz-D5EB36E2.rev.numericable.fr)
[15:40:21] *** Quits: bholley (anonymous@moz-D5EB36E2.rev.numericable.fr) (Quit: bholley)
[15:42:24] <jack> ChrisMorgan: r? https://github.com/chris-morgan/rust-http/pull/30
[15:42:59] * ksf wants monads
[15:43:14] <bstrie> jack: I think he went to bed a little while ago
[15:43:52] <bstrie> how does this rust-ci thing work?\
[15:43:56] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[15:44:13] *** Quits: vodik (simon@moz-B8C714D0.net.uwaterloo.ca) (Quit: brb)
[15:44:32] <bananapeel> I'm getting unresolved name `std::path::PosixPath::from_str`. What am I missing in that line? Trying to make a http://static.rust-lang.org/doc/0.8/std/path/struct.PosixPath.html
[15:44:51] <jack> bstrie: are there other reviewers? i guess brson is a committer there.
[15:45:23] *** Quits: aruniiird (aruniiird@28876D92.F24A7F1B.260B031E.IP) (Ping timeout)
[15:45:24] <bstrie> jack: surely servo has its own fork of rust-http as a submodule, rather than using ChrisMorgan's directly?
[15:45:52] <bstrie> I thought there was a whole github account just for servo submodules
[15:46:15] *** Quits: Houm (Houm@moz-25669AA8.fbx.proxad.net) (Ping timeout)
[15:46:29] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Client exited)
[15:46:37] *** Joins: Houm (Houm@moz-25669AA8.fbx.proxad.net)
[15:46:40] <bstrie> jack: he did see the build failure though, but he had to fire off a new build of rust and then called it a night
[15:46:44] *** Joins: vodik (simon@moz-414092C1.net.uwaterloo.ca)
[15:46:50] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[15:46:53] *** Quits: DeTeam (DeTeam@92C799C.31715274.F5F3AF2.IP) (Quit: DeTeam)
[15:48:12] *** Joins: riley (riley@8BA43816.9AA11D69.65DDFA89.IP)
[15:48:14] *** Joins: Kruppe (user@moz-253119B0.esg.uwaterloo.ca)
[15:48:33] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Ping timeout)
[15:48:39] <jack>  bstrie: for rust-http and glfw-rs we only use the mozilla-servo repo to host our build system changes. we make changes upstream for things like rust syntax upgrades.
[15:50:18] *** Joins: ozten (ozten@19BD73A1.5D8BCA3A.A0C1B52F.IP)
[15:50:41] *** Joins: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net)
[15:50:42] *** Quits: pyrac (pyrac@F1F89E09.73C89388.AD05C589.IP) (Ping timeout)
[15:53:56] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[15:54:14] <zokier`> rusti: std::path::Path::new("/tmp")
[15:54:15] -rusti- std::path::posix::Path{repr: ~[47u8, 116u8, 109u8, 112u8], sepidx: Some(0u)}
[15:54:43] *** Joins: bent|away (chatzilla@moz-932324BF.hsd1.ca.comcast.net)
[15:54:57] *** bent|away is now known as bent
[15:56:10] <zokier`> bananapeel, ^ i think that is how you are supposed to construct paths from strings
[15:58:06] *** Joins: tgummerer (tgummerer@moz-3BE96E52.kthopen.kth.se)
[15:58:51] *** Joins: Houm_ (Houm@moz-25669AA8.fbx.proxad.net)
[15:58:58] *** Quits: Ferreus (ferreus@moz-AFBE732E.dip0.t-ipconnect.de) (Ping timeout)
[15:59:12] *** Quits: heftig (heftig@moz-E8E2034C.inf.fh-bonn-rhein-sieg.de) (Quit: Quitting)
[15:59:25] *** Quits: Houm (Houm@moz-25669AA8.fbx.proxad.net) (Ping timeout)
[15:59:41] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[16:02:14] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[16:02:27] *** Quits: brendan (brendaneic@moz-F2813A2B.hfc.comcastbusiness.net) (Quit: brendan)
[16:03:17] <bananapeel> thanks, but I'm still getting unresolved name errrors for that with rust 0.8 on my machine
[16:03:26] *** Joins: alan (alan@moz-FE02DD30.sat6.rackspace.com)
[16:04:26] <bananapeel> zokier: but it seems to work on the server, so I might just upgrade to master
[16:05:54] *** Joins: rveach (kvirc@EAFF8742.1B4F02A2.27500626.IP)
[16:05:54] *** Quits: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net) (Connection reset by peer)
[16:06:10] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[16:06:37] *** Joins: themgt (themgt@moz-9AAC8E45.baf.movistar.cl)
[16:06:56] *** Joins: brendan (brendaneic@moz-F2813A2B.hfc.comcastbusiness.net)
[16:07:20] <earlz2> where is documentation about attributes like #[derived and friends? 
[16:07:52] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[16:08:49] *** Joins: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net)
[16:09:27] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[16:09:39] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: Leaving.)
[16:10:56] *** Quits: brendan (brendaneic@moz-F2813A2B.hfc.comcastbusiness.net) (Quit: brendan)
[16:11:17] *** Quits: _Vi (vi@77C5EFC7.65F4C6C6.48F984E6.IP) (Client exited)
[16:11:55] *** Joins: _Vi (vi@77C5EFC7.65F4C6C6.48F984E6.IP)
[16:12:58] *** Joins: crembo (crembo@moz-C2B364AA.vc.shawcable.net)
[16:13:22] *** Quits: jvns_ (bork@87D98E32.4046EB22.428F94DD.IP) (Quit: Ex-Chat)
[16:13:25] *** Joins: jvns__ (bork@87D98E32.4046EB22.428F94DD.IP)
[16:13:55] <rveach> earlz2 you might have seen this alread but http://static.rust-lang.org/doc/master/rust.html#deriving
[16:14:42] *** Quits: autra (augustin@moz-2EA7A1DF.fullsix.com) (Ping timeout)
[16:15:45] *** Joins: alisdair (textual@E1CEBB1A.D061F0C9.AA6AEE7B.IP)
[16:16:04] *** bhearsum is now known as bhearsum|afk
[16:16:07] *** Joins: vmx (vmx@8155E38.294C4FB6.EBB03D7A.IP)
[16:16:13] *** Joins: pcwalton (pcwalton@moz-B51927E9.hsd1.ca.comcast.net)
[16:16:13] *** ChanServ sets mode: +ao pcwalton pcwalton
[16:17:15] *** Joins: brendan (brendaneic@moz-F2813A2B.hfc.comcastbusiness.net)
[16:17:19] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[16:17:27] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[16:17:56] *** Quits: canhtak (jeremy@moz-44A7DE0.wl.t.ulaval.ca) (Ping timeout)
[16:19:46] *** Joins: TD-Linux (TD-Linux@E338EB99.2B4F0AE0.A0A36CCE.IP)
[16:19:53] *** Joins: canhtak (jeremy@moz-44A7DE0.wl.t.ulaval.ca)
[16:20:03] *** Joins: huseby (huseby@19BD73A1.5D8BCA3A.A0C1B52F.IP)
[16:22:16] *** Quits: alisdair (textual@E1CEBB1A.D061F0C9.AA6AEE7B.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[16:24:28] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[16:24:35] *** Quits: crembo (crembo@moz-C2B364AA.vc.shawcable.net) (Client exited)
[16:25:14] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[16:27:07] *** Quits: cowboyd (cowboyd@1D8844A7.1B729417.CEE440B6.IP) (Client exited)
[16:27:12] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[16:27:47] *** Quits: tgummerer (tgummerer@moz-3BE96E52.kthopen.kth.se) (Ping timeout)
[16:29:28] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[16:30:17] *** Quits: spacetime (quassel@moz-CAB487E6.rishab.in) (Input/output error)
[16:30:37] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[16:31:42] <qmx> jdm: thanks!
[16:32:18] *** Joins: jaen (jaen@138A5D71.4C038AE9.C4431F0E.IP)
[16:34:07] <jorendorff> lkuper: hey, I just got mail from gvwilson. do you have a sec to chat?
[16:34:29] *** Joins: spacetime (quassel@moz-CAB487E6.rishab.in)
[16:34:34] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[16:34:48] <Leo`> I can't get Rust to build since today
[16:35:03] <Leo`> I got 
[16:35:04] <Leo`> make: *** No rule to make target `x86_64-apple-darwin/stage2/bin/rusti', needed by `all-target-x86_64-apple-darwin-host-x86_64-apple-darwin'.  Stop.
[16:35:20] <Leo`> this is weird, I tried on several machines, with a proper clone of the repo each time
[16:35:32] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[16:35:36] *** Quits: brendan (brendaneic@moz-F2813A2B.hfc.comcastbusiness.net) (Quit: brendan)
[16:37:47] *** Quits: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net) (Ping timeout)
[16:37:56] *** Joins: Ms2ger (Ms2ger@moz-92A79B55.adsl-dyn.isp.belgacom.be)
[16:39:25] *** Joins: josh (josh@moz-E500C116.mpls.qwest.net)
[16:40:31] *** Quits: lfox (lfox@moz-343B6F0C.nyc.biz.rr.com) (Quit: ZZZzzz…)
[16:40:32] *** Joins: alonlevy (alon@moz-B0E66DB7.static.bezeqint.net)
[16:40:57] *** Joins: brendan (brendaneic@moz-F2813A2B.hfc.comcastbusiness.net)
[16:41:10] *** Joins: jhenahan (jhenahan@moz-65B7D4EE.hsd1.vt.comcast.net)
[16:41:29] <jack> leo: did you reconfigure? rusti just got removed i think.
[16:41:34] <Leo`> (I removed something in the Makefile and now it works)
[16:41:38] <Leo`> jack: yeah, I reconfigured oO
[16:41:47] <Leo`> I said it was a proper new clone of the repo
[16:41:54] <Leo`> but the rusti target was still in the generated Makefile
[16:41:55] <maikeru> rust got removed.. 
[16:42:20] <kimundi> maikeru: rust and rusti, even
[16:42:21] *** Joins: eholk (eholk@moz-BA312F07.crest.iu.edu)
[16:42:25] <maikeru> oh my
[16:42:37] <Leo`> yeah I know that
[16:43:05] <maikeru> https://github.com/mozilla/rust/commit/7c92435f8f93344330e47fb0cca4f79297896bd2 guess so.
[16:43:51] <Leo`> well this is strange then
[16:44:16] <maikeru> that should really be branched off and maintained somehow IMHO. 
[16:44:46] *** flaper87 is now known as flaper87|afk
[16:45:23] <Leo`> https://github.com/mozilla/rust/blob/master/Makefile.in#L443
[16:45:30] <Leo`> this is the line I removed to get it work
[16:45:36] *** Quits: eddyb (eddy@3C6E2DBB.FFB4E060.A5830293.IP) (Ping timeout)
[16:45:47] <Leo`> well. In fact, I reoved it in the generated Makefile rather than in Makefile.in
[16:45:54] <Leo`> +m
[16:46:08] *** Quits: jaen (jaen@138A5D71.4C038AE9.C4431F0E.IP) (Ping timeout)
[16:46:17] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[16:46:22] <zokier`> that does look suspect
[16:46:29] *** Joins: eddyb (eddy@3C6E2DBB.FFB4E060.A5830293.IP)
[16:47:15] <Leo`> I know but, eh.
[16:47:55] *** Joins: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca)
[16:48:01] *** Quits: isenmann (isenmann@moz-B656BA79.science-computing.de) (Quit: Leaving.)
[16:48:12] *** Joins: aruniiird (aruniiird@28876D92.F24A7F1B.260B031E.IP)
[16:49:05] *** Quits: vodik (simon@moz-414092C1.net.uwaterloo.ca) (Quit: class)
[16:49:34] *** Quits: pcwalton (pcwalton@moz-B51927E9.hsd1.ca.comcast.net) (Ping timeout)
[16:49:44] *** Quits: bent (chatzilla@moz-932324BF.hsd1.ca.comcast.net) (Quit: ChatZilla 0.9.90.1-rdmsoft [XULRunner 22.0/20130619132145])
[16:50:26] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Ping timeout)
[16:50:37] *** Quits: jesse99 (jesse99@moz-8B1E0C5D.hsd1.wa.comcast.net) (Connection reset by peer)
[16:51:16] *** Quits: johns (johns@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[16:51:26] *** Quits: jst (quassel@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[16:51:29] *** Quits: dcrewi (david@moz-AB8667CE.gyrae.net) (Ping timeout)
[16:51:31] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[16:51:34] *** Joins: jst (quassel@moz-BBE3ABD.mv.mozilla.com)
[16:51:46] <eddyb>     // Not using labeled break to get us through one round of bootstrapping.
[16:51:47] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[16:51:54] * eddyb wonders how old that code is
[16:51:56] *** Quits: huseby (huseby@19BD73A1.5D8BCA3A.A0C1B52F.IP) (Ping timeout)
[16:52:03] *** Joins: jesse99 (jesse99@moz-8B1E0C5D.hsd1.wa.comcast.net)
[16:52:05] *** Quits: ozten (ozten@19BD73A1.5D8BCA3A.A0C1B52F.IP) (Ping timeout)
[16:52:09] <Eridius> probably quite old
[16:52:27] *** Joins: ozten (ozten@19BD73A1.5D8BCA3A.A0C1B52F.IP)
[16:53:41] *** Quits: oberstet (quassel@moz-CBA52AE7.dynamic.mnet-online.de) (Client exited)
[16:54:13] *** Joins: azakai (alon@moz-BBE3ABD.mv.mozilla.com)
[16:54:19] <Leo`> Do you think I should do a pull request to remove the line in Makefile.in ?
[16:54:29] *** Quits: paulproteus (quassel@199.199.210.158) (Ping timeout)
[16:54:53] *** Joins: vfetwnuncszu (david@moz-AB8667CE.gyrae.net)
[16:54:53] *** Joins: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net)
[16:55:03] <Leo`> ( zokier` maikeru )
[16:55:04] *** vfetwnuncszu is now known as dcrewi
[16:55:26] *** Joins: paulproteus (quassel@458FE134.3EC36C88.CBDCF1DC.IP)
[16:57:24] <zokier`> i think so. but i've been rusting for a week or so, so maybe my opinion is not the most valuable thing
[16:58:06] <Leo`> I was about to do a pull request for another bug anyway
[16:58:20] <Leo`> but I'm not quite sure
[16:58:43] <Leo`> first time I contribute to Rust (first time I contribute to anything at all in fact ... )
[17:00:21] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[17:00:21] *** ChanServ sets mode: +ao brson brson
[17:00:27] *** Joins: tjc (tjc@moz-6EB4E533.dsl.tsoft.com)
[17:00:27] *** ChanServ sets mode: +o tjc
[17:02:01] <eddyb> src/test/compile-fail/asm-out-no-modifier.rs:16:8: 16:46 error: internal compiler error: output operand constraint lacks '='
[17:02:08] <eddyb> oops, I used span_bug :/
[17:02:45] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Client exited)
[17:02:50] <Leo`> If in put "Closes #XXX" in my commit message, and then I push to my own fork, and then do a pull request
[17:02:59] <Leo`> will it close the issue if my pull request is merged into the main repo ?
[17:03:06] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[17:03:28] <tjc> Leo`: Yes, it will
[17:03:44] <Leo`> ok
[17:04:07] <Leo`> well, I will post my pull request with the 2 bug fixes (including the one in the Makefile)
[17:04:12] <Leo`> I hope it will be accepted :p
[17:04:34] <Leo`> mh
[17:04:41] <Leo`> or maybe I should do a pull request for each bug ?
[17:04:46] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Ping timeout)
[17:04:47] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[17:06:14] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[17:06:23] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[17:06:38] <kimundi> Leo`: Its okay to batch small fixes together
[17:06:41] *** Joins: heftig (heftig@moz-4F8F88EB.dip0.t-ipconnect.de)
[17:06:44] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[17:07:04] <Leo`> ok kimundi 
[17:07:15] *** Joins: ianj (ianjneu@moz-7140CF01.ccs.neu.edu)
[17:07:44] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[17:08:33] <kimundi> brson: ping
[17:11:22] <Leo`> https://github.com/mozilla/rust/pull/9909
[17:11:25] <Leo`> hope this is ok :d
[17:13:44] <jack> strcat: ping
[17:13:51] <strcat> jack: pong
[17:13:56] <strcat> jack: https://github.com/mozilla/rust/pull/9902
[17:14:03] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[17:14:05] <jack> your patch doesn't work quite
[17:14:08] *** Quits: Kruppe (user@moz-253119B0.esg.uwaterloo.ca) (Ping timeout)
[17:14:12] <strcat> oh
[17:14:15] <strcat> :(
[17:14:17] <jack> https://gist.github.com/metajack/7028722
[17:14:24] <jack> causes an assert in unsafearc
[17:14:43] <strcat> jack: is this the stage1 or stage2 compiler?
[17:14:50] <strcat> oh wait I see
[17:14:53] <strcat> hrm
[17:15:31] <strcat> jack: so it does fix your issue but it doesn't fix the issue that I removed the workaround for... for you
[17:15:34] <strcat> but it did fix it here :s
[17:15:43] <eddyb> strcat: not sure where I was left when you left :P
[17:16:55] *** Joins: echristo (echristo@moz-1892C634.hsd1.ca.comcast.net)
[17:17:19] <strcat> jack: if you rm the uncommenting of #[unsafe_no_drop_flag] on UnsafeArc that won't happen but that's really weird
[17:17:25] <jack> strcat: I can't test if it fixes because I can't get rust-htp to compile now :)
[17:17:32] <strcat> heh
[17:18:06] <jack> i'll try removing the unsafe_no_drop_flag as a workaround
[17:18:31] <eddyb> strcat: I thought of a better way: the specialized functions are in the main allocator object, and each one of them calls the function on the cache it corresponds to. the object size and base allocator reference are passed as arguments (they should get inlined)
[17:18:50] <strcat> eddyb: ah
[17:19:13] *** Quits: pnkfelix (pnkfelix@moz-B65AF445.hfc.comcastbusiness.net) (Quit: Leaving.)
[17:19:20] <eddyb> this means the caller only need to setup the allocator reference and call the allocator function, no arguments. and you can initialize by-value with a base allocator and it won't end up with multiple copies
[17:19:36] <eddyb> strcat: all I need is a working concat_idents!
[17:19:57] *** Quits: echristo (echristo@moz-1892C634.hsd1.ca.comcast.net) (Quit: echristo)
[17:21:03] *** Joins: lfox (lfox@moz-343B6F0C.nyc.biz.rr.com)
[17:21:08] *** Joins: pnkfelix (pnkfelix@moz-B65AF445.hfc.comcastbusiness.net)
[17:21:08] *** ChanServ sets mode: +o pnkfelix
[17:21:23] *** Joins: huseby (huseby@19BD73A1.5D8BCA3A.A0C1B52F.IP)
[17:22:47] *** Quits: squiddy (squiddy@moz-D3754FCB.adsl.alicedsl.de) (Ping timeout)
[17:23:28] *** Quits: robn (robn@moz-76B0302C.static.internode.on.net) (Ping timeout)
[17:25:18] *** Joins: robn (robn@moz-76B0302C.static.internode.on.net)
[17:25:42] *** Joins: bholley (anonymous@moz-D5EB36E2.rev.numericable.fr)
[17:26:28] *** pmoore is now known as pmoore|away
[17:26:29] *** Joins: squiddy (squiddy@moz-D3754FCB.adsl.alicedsl.de)
[17:26:34] *** Quits: TD-Linux (TD-Linux@E338EB99.2B4F0AE0.A0A36CCE.IP) (Quit: ZNC - http://znc.in)
[17:27:30] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[17:27:51] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:29:37] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[17:31:04] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:31:40] *** Joins: ofeldt (ofeldt@moz-90CA896C.dip0.t-ipconnect.de)
[17:31:50] *** Quits: barosl (barosl@3DE683B6.E551553C.7544CABF.IP) (Quit: 랜덤은 쇠퇴했습니다.)
[17:32:19] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[17:32:20] *** Quits: ofeldt- (ofeldt@moz-EC1A65EE.dip0.t-ipconnect.de) (Ping timeout)
[17:32:20] *** Joins: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP)
[17:32:58] *** Quits: CarpNet (ac@moz-FD24B77.sohonet.co.uk) (Quit: Leaving)
[17:34:02] *** Quits: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca) (Quit: Leaving.)
[17:34:07] *** Joins: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca)
[17:35:41] *** Joins: lkuper_ (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[17:35:48] *** Quits: lkuper_ (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Connection reset by peer)
[17:35:54] *** Joins: lkuper_ (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[17:36:23] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[17:36:24] *** Joins: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net)
[17:36:37] *** Quits: bholley (anonymous@moz-D5EB36E2.rev.numericable.fr) (Quit: bholley)
[17:37:56] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[17:40:58] <ksf> is there some way in the standard library to get an iterator over a file, stdin or such?
[17:41:16] <ksf> ...all I found is low-level read and non-file iterators.
[17:41:22] <strcat> jack: yeah it doesn't work at all ;\
[17:44:35] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Client exited)
[17:44:55] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[17:45:15] *** Quits: aruniiird (aruniiird@28876D92.F24A7F1B.260B031E.IP) (Ping timeout)
[17:46:37] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Ping timeout)
[17:46:45] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[17:47:56] *** Joins: anri (solancile@moz-E49E7C4B.hsd1.wa.comcast.net)
[17:49:42] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[17:50:04] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[17:50:07] <engla> ksf: new IO is still in development, not sure if anything went in during the last week
[17:50:13] <engla> rusti: use std::rt::io::extensions::ReaderUtil; std::rt::io::native::stdio::stdin().bytes()
[17:50:17] -rusti- pastebinned 1 lines of output: http://ix.io/8yi
[17:50:21] *** Joins: devbug (quassel@2D4E172D.4C8B6099.9B57EA59.IP)
[17:50:34] <engla> but that iterator is available ^   maybe it is of little use, though
[17:51:47] *** Quits: Addle (quassel@moz-89E971E4.cable.teksavvy.com) (Client exited)
[17:51:51] <jack> strcat: with that commented out, confirmed working in servo. no crash now.
[17:52:20] <strcat> jack: it's supposed to work ;p
[17:53:00] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[17:53:30] <jack> strcat: i guess the question now is whether it's supposed to work with unsafe_no_drop_flag
[17:53:43] <strcat> jack: well it fixes by test case
[17:53:46] <strcat> with unsafe_no_drop_flag
[17:53:49] <strcat> ;s
[17:54:36] <SimonSapin> Hi. I have an ICE with task <unnamed> failed at 'assertion failed: bpos == mbc.pos || bpos.to_uint() >= mbc.pos.to_uint() + mbc.bytes', /home/simon/projects/servo/src/compiler/rust/src/libsyntax/codemap.rs:480
[17:54:55] <SimonSapin> anyone knows what this could be about?
[17:55:05] <strcat> jack: ok good
[17:55:09] <strcat> I managed to make a failing test case
[17:55:12] <strcat> ;p
[17:55:14] <eddyb> SimonSapin: grep it
[17:55:16] <SimonSapin> The comment above the assert says "We should never see a byte position in the middle of a character"
[17:55:26] <eddyb> oh nvm it shows the file and line /facepalm
[17:55:54] <eddyb> SimonSapin: for some reason, the entire path wrapped and went on the next line, in my client
[17:55:59] *** Joins: maik (maik@moz-FF7537DA.dip0.t-ipconnect.de)
[17:56:17] <SimonSapin> mine too, that’s what wrapping does :)
[17:56:46] <SimonSapin> what in my source files could cause this error?
[17:57:00] <eddyb> there's almost enough space to fit on a single line, that made me thing the message ended
[17:57:07] <eddyb> SimonSapin: fancy utf-8
[17:57:15] *** Joins: nwmcsween (nwmcsween@E0025B86.51EE1362.3655BBF5.IP)
[17:57:41] <eddyb> SimonSapin: or non-unicode byte sequences in your source, which would be your fault
[17:59:11] <SimonSapin> there is a debug!() that could be helpful, how do I enable it?
[18:00:27] <eddyb> SimonSapin: RUST_LOG=rustc I think. beware, format macros seem to create infinite debug log sequences, so only use it when you know the compile fails
[18:01:44] <brson> kimundi: pong
[18:01:51] <kimundi> brson: Hi, do you know why std::task::TaskBuilder::future_result() takes an &fn(v: Port<TaskResult>) instead of just returning Port<TaskResult> ? As it's currently implemented, it doesn't seem neccessary.
[18:02:09] *** Quits: alonlevy (alon@moz-B0E66DB7.static.bezeqint.net) (Ping timeout)
[18:03:26] <kimundi> Legacy reasons maybe?
[18:03:29] *** Quits: tjc (tjc@moz-6EB4E533.dsl.tsoft.com) (Quit: Places to go, people to annoy)
[18:03:36] <brson> kimundi: it's because task builder used to be designed for method chaining, passing TaskBuilder by value and returning TaskBuilder. It will probably do chaining again in the future, but future_result still has a bad signature. I might rather have a spawn_result method, or just make future_result return the result and break the chaining
[18:03:55] <maik> could someone have a look at http://stackoverflow.com/questions/19433827/wrapping-c-enums-in-rust ?
[18:04:08] *** Joins: TD-Linux (TD-Linux@E338EB99.2B4F0AE0.A0A36CCE.IP)
[18:05:16] <kimundi> brson: Ah, right method chaining used to be a thing there. Just wanted to be sure that I'm not missing something subtle here :)
[18:05:34] *** Joins: jxv (jxv@4732E7D7.2AB34561.9B38A32A.IP)
[18:06:19] <ksf> what am I doing wrong? http://pastebin.com/7czNCsfb
[18:06:52] *** Quits: prudhvi (prudhvi@moz-154A460A.supr.io) (Quit: leaving)
[18:06:53] <kimundi> brson: If you say that future_result has a bad signature, do you mean that it would be an improvement if it get's changed to return the result, even if that doesn't end up as the final design? 
[18:07:19] <ksf> maik, yes, it is.
[18:07:34] <brson> kimundi: yes
[18:07:36] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[18:07:37] <kimundi> Cause I kinda have an itch to just change it right now :)
[18:07:41] <brson> that's fine
[18:07:56] <Ms2ger> Pff, method chaining
[18:07:58] <kimundi> Okay, thanks :)
[18:08:08] <maik> ksh, do you know how :)?
[18:08:18] *** Joins: jstevans (Instantbir@moz-DDB2FAA.bootp.virginia.edu)
[18:08:36] <maik> ksf, ^
[18:09:59] *** Quits: jdm (jdm@88F51059.F3BBB17D.144F44FA.IP) (Ping timeout)
[18:10:15] <ksf> maik, not in detail but yes, it is possible.
[18:10:34] *** Quits: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca) (Quit: Leaving.)
[18:10:47] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[18:10:48] <ksf> next time try using "how" in your question, stackoverflow can be quite brutal :)
[18:11:51] <SimonSapin> eddyb: I replaced a non-ASCII ’ in a comment by an ASCII '
[18:11:53] *** Joins: cowboyd (cowboyd@moz-1BD02A1E.sw.biz.rr.com)
[18:11:56] <SimonSapin> that worked around the bug
[18:12:12] *** Quits: squiddy (squiddy@moz-D3754FCB.adsl.alicedsl.de) (Ping timeout)
[18:13:10] <Leo`> strcat: how can I "squash" the commits like you said ?
[18:13:48] <benh> with git rebase
[18:13:52] <strcat> Leo`: git rebase -i parent_commit_hash (the one before your first one)
[18:14:11] <Leo`> okay
[18:14:19] <strcat> Leo`: then move the line corresponding to the test case right below the first commit, and set the action text to squash
[18:14:19] <Leo`> this will "merge" the 3 commits into one right ?
[18:14:24] <eddyb> SimonSapin: are you on windows?
[18:14:28] <strcat> Leo`: no just merge the test with the fix
[18:14:30] <SimonSapin> eddyb: linux
[18:14:36] <strcat> Leo`: the other one should still be separate
[18:14:38] <Leo`> strcat: okay
[18:14:47] <benh> Leo`: git rebase -i gives you a text-editor based interface to choose which to squash how
[18:14:53] <strcat> it just makes it easier to associate the test with that fix in the history
[18:14:59] <benh> it's the basic history rewriting tool, you can also use it to retroactively edit commits~
[18:15:08] <Leo`> ok... ok
[18:15:09] <eddyb> SimonSapin: hmm, if it were Windows-1252, that would make sense. maybe it's a libsyntax bug
[18:15:15] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[18:15:19] <SimonSapin> not, UTF-8 all the way down
[18:15:21] <Leo`> i'm not very familiar with git advanced features ... :P
[18:15:24] <ksf> engla, those import paths look scary
[18:15:26] <SimonSapin> also, this comment has be there for ages
[18:15:33] <SimonSapin> I was changes unrelated parts of the file
[18:15:58] <Leo`> strcat: I added the licence header like you said
[18:16:04] <Leo`> strcat: must I git add it before I do the rebase ?
[18:16:31] <zokier`> is it known that links from tutorial to stdlib docs are broken?
[18:16:32] <strcat> Leo`: you should git commit --amend with the change added before doing the rebase
[18:16:52] <Leo`> what does --amend mean ?
[18:16:52] * ksf can't make heads and tails of this error: http://pastebin.com/7czNCsfb
[18:17:13] <zokier`> they point to eg http://static.rust-lang.org/doc/master/std/comm.html instead of http://static.rust-lang.org/doc/master/std/comm/index.html
[18:17:14] *** Quits: maik (maik@moz-FF7537DA.dip0.t-ipconnect.de) (Client exited)
[18:17:23] <ksf> how can a bounded type be unconstrained?
[18:17:30] <kimundi> Leo`: "Modify the last commit to include this change, instead of creating a new one"
[18:17:39] <Leo`> okay
[18:18:21] <kimundi> Well, technically it still creates a new one that replaces the old one and contains the same changes, but whatever :P
[18:19:51] <ksf> btw. regarding a new IO subsystem, this might be of interest (if y'all didn't see it already): http://haskell.cs.yale.edu/wp-content/uploads/2013/08/hask035-voellmy.pdf
[18:20:40] *** Quits: fabiand__ (fabiand@moz-D16E79E0.adsl.alicedsl.de) (Quit: Verlassend)
[18:21:26] <Leo`> strcat: git says i'm not fast-forward now when I try to push
[18:21:35] <Ms2ger> Leo`, push -f
[18:21:37] <kimundi> Leo`: push -f
[18:21:51] <Leo`> mhh ><
[18:21:56] <benh> could use gitg or something to visualize what is going on
[18:21:57] <Leo`> I'm really a noob with git
[18:21:59] <Leo`> sorry :D
[18:22:11] <Ms2ger> No, this is just poor UX from git's side
[18:22:21] <kimundi> It complains because your history on your remote branch on github is now different than your local one, the -f option tells git to just overwrite the one on github
[18:22:54] <kimundi> Leo`: Don't worry, it also took a long time for me :)
[18:23:09] <Leo`> kimundi: yeah, I knew why it was saying this. I just didn't know how to force it
[18:23:14] <Leo`> strcat: all should be ok now
[18:23:49] <engla> ksf: I think you are using the wrong syntax. two traits are separated with plus:   R: Reader + ReaderUtil.  However, you wouldn't use ReaderUtil like that
[18:23:55] <kimundi> Ha, then you already know more than I did when I had that error the first time :)
[18:23:59] <engla> since it is implemented for all Reader.
[18:24:09] <Leo`> kimundi: it wasn't just the first time.
[18:24:21] <ksf> engla, thanks
[18:24:24] <Leo`> kimundi: only the first time in the context of a rebase :D
[18:24:32] <kimundi> haha :)
[18:24:47] <engla> ksf: further, there is a buffered reader inside std::rt::io
[18:25:00] <rhodesd> So, my library implements the Digest trait.  While testing, I found that I couldn't use methods implementing Digest without also importing (use extra::digest::Digest) into my external test.  Is this import really necessary?  I couldn't find documentation on this, if someone could point it out, I'd be grateful.
[18:25:08] <Leo`> how long does it generally takes before the "r+" and the time Bors merges the pull request ? :p
[18:25:18] <kimundi> rhodesd: That's by design
[18:25:52] <engla> Leo`: the queue is here http://buildbot.rust-lang.org/bors/bors.html  with an empty queue it would take approximately an hour
[18:25:53] *** Quits: rail44 (Mibbit@moz-327E5E76.m-net.ne.jp) (Quit: http://www.mibbit.com ajax IRC Client)
[18:25:53] <rhodesd> kimundi: so I'll have to tell users which extra imports they'll need?
[18:25:53] *** Quits: xAndy (xandy@moz-1C332306.unity-media.net) (Ping timeout)
[18:26:13] <kimundi> Leo`: r+ - As long as it takes for someone to notice the PR and/or you to bugger someone to notice it. Testing itself takes a while, you can monitor the queue on http://buildbot.rust-lang.org/bors/bors.html
[18:26:24] <kimundi> rhodesd: That's how traits work, yeah
[18:26:33] <rhodesd> kimundi: ok, great, thanks.
[18:26:50] <Leo`> s/before/between/
[18:26:52] <Leo`> u_u
[18:27:07] *** Quits: lfox (lfox@moz-343B6F0C.nyc.biz.rr.com) (Ping timeout)
[18:27:08] <kimundi> rhodesd: It's the same as with types: The user needs to have the type in scope to call functions on it
[18:27:41] *** Joins: DeTeam (DeTeam@moz-76DDA368.dyn.broadband.iskratelecom.ru)
[18:28:22] *** Quits: nwmcsween (nwmcsween@E0025B86.51EE1362.3655BBF5.IP) (Ping timeout)
[18:28:37] *** Joins: fabiand (fabiand@moz-D16E79E0.adsl.alicedsl.de)
[18:29:52] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Client exited)
[18:30:12] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[18:30:17] *** Quits: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca) (Client exited)
[18:31:09] *** Joins: lfox (lfox@moz-343B6F0C.nyc.biz.rr.com)
[18:31:26] *** Joins: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca)
[18:31:59] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Ping timeout)
[18:33:36] <bstrie> "once you start putting types in, it kinda starts spreading everywhere and eventually will look like full static typing. I'd rather have tests than types." #shitHNsays, in a conversation on optional typing
[18:36:43] <ksf> oh. I should switch to HEAD, apparently.
[18:37:59] <XMunkki> I'm a mediocre man but fully type inferred code (like ML or haskell whn omitting type sigs) is really hard to read and follow through.. quite often you need to find each and every function and think how it affects the total typing..
[18:38:06] <XMunkki> good typing is more like good documentation
[18:38:26] <ksf> one does not simply omit type sigs.
[18:38:46] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[18:39:22] <ksf> but then. even GHC can defer type errors to runtime.
[18:39:39] <XMunkki> well you can easily chain many functions together in one-liners.. and the code itself doesn't make clear what's happening to the data (and types)
[18:39:39] <ksf> never thought that makes any sense, though.
[18:39:44] <benh> I'd be tempted to suggest that type signatures for priv fns could be optional ;)
[18:40:04] <bstrie> XMunkki: actually, optional typing is different from inferred typing. with inferred types, you can omit type annotations, but there still exists a type at compile time. with optional typing, if you omit the type annotation then that type is dynamic
[18:40:22] <XMunkki> bstrie: point
[18:40:47] <ksf> I'd be content with not having to give the type in impls
[18:40:51] <XMunkki> got confused with inferred types where it's optional to type the actual type :)
[18:41:01] <bstrie> CS is terrible at naming things
[18:41:05] <bstrie> I hear that's a hard problem
[18:41:32] <ksf> there's two hard things in CS: naming things, layers of indirection and off-by-one errors.
[18:42:10] <jorendorff> "cache invalidation"
[18:42:12] <kimundi> Hm, I need an example for an Issue. What is a often used type in the stdlib that is neither generic nor build-in to the compiler?
[18:42:19] <jorendorff> https://plus.google.com/+IanBicking/posts/3BoGUiGZF82
[18:42:22] <ksf> that's a layer of indirection :)
[18:42:38] <ksf> layers of indirection solve every problem but that of too many layers of indirection.
[18:42:55] <bstrie> ksf: that's a deprecated definition. the modern version is: "there's two hard things in CS: naming things, cache invalidation, off-by-one errors, and updating the documentation"
[18:42:55] <jorendorff> you're mixing your programming adages
[18:43:20] <bstrie> there is no problem that cannot be solved by cache invalidation, except too much cache invalidation
[18:44:27] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[18:44:48] <bstrie> kimundi: Void
[18:45:05] <kimundi> bstrie: Hm, that's a good one, indeed :)
[18:45:26] *** Joins: pcwalton (pcwalton@moz-BE33DA21.fw1.sfo1.mozilla.net)
[18:45:26] *** ChanServ sets mode: +ao pcwalton pcwalton
[18:46:02] *** Joins: shagun (shagun@465D4417.95EEE99B.BB883D3E.IP)
[18:46:14] *** Quits: ozten (ozten@19BD73A1.5D8BCA3A.A0C1B52F.IP) (Quit: ozten)
[18:46:34] *** Quits: shagun (shagun@465D4417.95EEE99B.BB883D3E.IP) (Quit: Leaving)
[18:47:25] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[18:48:41] *** Quits: huseby (huseby@19BD73A1.5D8BCA3A.A0C1B52F.IP) (Quit: Leaving)
[18:48:50] *** Joins: echristo (echristo@4EEA9249.D6CCE4AE.77834EAA.IP)
[18:49:28] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[18:49:37] *** Quits: wilsonk-laptop (kvirc@moz-8E86F35A.cg.shawcable.net) (Quit: KVIrc 4.0.4 Insomnia http://www.kvirc.net/)
[18:51:50] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[18:51:50] *** ChanServ sets mode: +ao dherman dherman
[18:52:44] *** Joins: dguenther (dg@moz-AF6F3E94.com)
[18:53:34] *** Quits: rveach (kvirc@EAFF8742.1B4F02A2.27500626.IP) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[18:54:03] <kmc> yeah GHC even warns when you don't have type signatures on top level functions
[18:54:14] <kmc> the norm is very much that you should put them in as documentation
[18:54:59] * Ms2ger found a pretty big downside of rust
[18:55:14] <Ms2ger> I can't write python anymore without putting "let"s all over
[18:55:24] <kimundi> haha :)
[18:55:41] <Leo`> at least you can write some Caml or Haskell now Ms2ger 
[18:56:04] <Ms2ger> You're making it worse :)
[18:56:09] <FreeFull> bstrie: Actually, too much cache invalidation can be solved by invalidating the cache invalidation routine from the cache
[18:56:19] <Leo`> Ms2ger: why ? don't like Caml ? :p
[18:56:31] <Ms2ger> Haven't tried Caml
[18:56:34] *** Quits: bananapeel (nehmulos@moz-D2FF7068.netcologne.de) (Quit: Verlassend)
[18:56:39] <Ms2ger> But I found Haskell pretty annoying
[18:56:48] <Leo`> :/
[18:57:26] <Ms2ger> I mean, it's not bad
[18:57:26] <eholk> whoa, i'm looking through tjc's OSBridge slides and I didn't realize Rust had pattern matching on vectors. That's awesome!
[18:57:40] <Ms2ger> But I just didn't enjoy writing it a lot
[18:59:09] *** Quits: jvns__ (bork@87D98E32.4046EB22.428F94DD.IP) (Ping timeout)
[18:59:31] <Leo`> personally, I learned Haskell recently, and I didn't enjoyed programming like I did with it for quite a long time :P
[18:59:38] <Leo`> mh
[18:59:42] <Leo`> my sentence is not really clear
[19:00:34] <Yoric> Functional Programming tends to have that effect on people.
[19:00:42] <Leo`> xD
[19:00:56] <Leo`> english is not my native language :P
[19:01:10] <pcwalton> Ms2ger: the worst thing about Rust for me is that I can't write C++ anymore without forgetting to parenthesize if and for headers :(
[19:01:19] <kmc> haha yep
[19:01:39] <Leo`> the worst thing about Rust is that I can't write C++ at all :p
[19:01:48] <Leo`> anymore
[19:01:51] <Ms2ger> Well, who can, really? :)
[19:01:56] <Leo`> :D
[19:02:12] <Leo`> well, I must admit I have never been a really god C++ dev
[19:02:23] <jbaldwin> Hey, is it possible to reassign a borrowed pointer? like while traversing a tree?
[19:02:36] <bstrie> Leo`: so what, you're just a demigod C++ dev?
[19:02:49] <bstrie> I'd say that's still pretty good :)
[19:03:00] <Leo`> why ? I'm a shitty C++ dev ><
[19:03:03] *** Quits: kurisumasu (queen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Ping timeout)
[19:03:08] <Leo`> oh
[19:03:13] <Leo`> ><
[19:03:15] <Leo`> good*
[19:03:30] <bstrie> Leo`: socrates would say that thinking that you're a bad C++ dev, makes you a good C++ dev
[19:03:59] <Leo`> It would be cool 
[19:04:10] <pcwalton> I think that's Dunning-Kruger actually
[19:04:18] *** Joins: wilsonk-laptop (kvirc@moz-8E86F35A.cg.shawcable.net)
[19:04:23] <Ms2ger> Well, thinking you're a good C++ dev sure makes you someone I wouldn't hire :)
[19:04:25] *** Joins: kurisumasu (chris@9D963F5D.DF5D8AE7.54BCAB54.IP)
[19:04:28] <Ms2ger> Also: perl
[19:04:34] <kmc> jbaldwin: a pointer is a value, not a location that can be updated, so the question doesn't make sense; however if you have a local 'let mut' variable of borrowed-pointer type, you can update it to hold a different pointer
[19:04:47] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[19:04:49] * pcwalton writes a lot of Perl... it's the devil I know
[19:05:01] <kmc> I learned recently that D-K didn't actually demonstrate a negative correlation between perceived and actual ability http://www.talyarkoni.org/blog/2010/07/07/what-the-dunning-kruger-effect-is-and-isnt/
[19:05:01] *** Quits: brendan (brendaneic@moz-F2813A2B.hfc.comcastbusiness.net) (Quit: brendan)
[19:05:02] <Leo`> Ms2ger: haha :D
[19:05:21] <pcwalton> for example, my "dump an X pixmap" script is Perl because Perl has good bindings to Xlib (who knew?)
[19:05:48] <kmc> rusti: let mut x = &3; x = &4; fmt!("%d", *x)  // jbaldwin
[19:05:49] -rusti- <anon>:9:17: 9:18 warning: value assigned to `x` is never read, #[warn(dead_assignment)] on by default
[19:05:49] -rusti- <anon>:9          let mut x = &3; x = &4; fmt!("%d", *x)  // jbaldwin
[19:05:49] -rusti-                           ^
[19:05:49] -rusti- ~"4"
[19:06:01] <Ms2ger> pcwalton, writing perl is fine... It's just that nobody will ever be able to read it :)
[19:06:05] <pcwalton> oh sure
[19:06:10] <pcwalton> I won't check it into the repo
[19:06:13] *** Joins: jstevans1 (Instantbir@moz-DDB2FAA.bootp.virginia.edu)
[19:06:13] <kmc> you can write readable maintainable perl
[19:06:18] <kmc> just like you can write memory safe C++
[19:06:20] <pcwalton> I just find it the quickest way to duct tape things together which happens a lot
[19:06:22] <kmc> if you are careful :)
[19:06:29] <pcwalton> probably just because I know it
[19:06:51] <Ms2ger> kmc, [citation needed] on readable maintainable perl ;)
[19:07:02] <kmc> I still really like Perl for shell oneliners... perl -n / -e / -l / -A / etc. are great
[19:07:03] <kimundi> brson: There is a #[test] in std::rt::task with
[19:07:04] <kimundi> / XXX: This is a copy of test_future_result in std::task.
[19:07:04] <kimundi>     // It can be removed once the scheduler is turned on by default.
[19:07:09] <Ms2ger> Anyway, I should stop talking about perl here :)
[19:07:10] <jbaldwin> kmc: error: cannot assign to `letter` because it is borrowed
[19:07:10] *** Joins: tjc (tjc@8B72BF20.2A034839.284344F5.IP)
[19:07:10] *** ChanServ sets mode: +o tjc
[19:07:17] <kimundi> brson: That can be removed now, right?
[19:07:18] *** Quits: lkuper_ (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Quit: lkuper_)
[19:07:21] <kmc> jbaldwin: you could pastebin your code and we can take a look
[19:07:29] <jbaldwin> I'm doing that ;-)
[19:07:30] *** Quits: jstevans (Instantbir@moz-DDB2FAA.bootp.virginia.edu) (Ping timeout)
[19:07:35] <kmc> I'm not clear on what you're trying to do, either, but seeing the code will probably help :)
[19:08:09] <jbaldwin> https://gist.github.com/jbaldwin/466babdecc9494fcc497
[19:08:18] <jbaldwin> yeah hard to know without looking at the code
[19:08:22] *** Joins: Kruppe (user@moz-253119B0.esg.uwaterloo.ca)
[19:08:53] *** Quits: _Vi (vi@77C5EFC7.65F4C6C6.48F984E6.IP) (Client exited)
[19:08:54] *** Quits: tjc (tjc@8B72BF20.2A034839.284344F5.IP) (Ping timeout)
[19:09:00] <jbaldwin> kmc: basically iterating over the children, finding the one that matches or making it, and then updating pointer to the child
[19:09:17] <kmc> can you paste the full error msg too?
[19:09:20] <kmc> it should say where it was borrowed
[19:09:21] <brson> kimundi: yes
[19:09:23] <FreeFull> kmc: Sometimes bash is best for short scripts
[19:09:30] *** Joins: jstevans (Instantbir@2083105D.6CF13040.DDE5D3F6.IP)
[19:09:32] <kimundi> brson: Okay :)
[19:09:51] <jbaldwin> kmc: ok its updated
[19:09:53] *** Quits: jstevans1 (Instantbir@moz-DDB2FAA.bootp.virginia.edu) (Ping timeout)
[19:10:12] *** Joins: jstevans1 (Instantbir@5B33AB70.BCCBF0DD.DDE5D3F6.IP)
[19:10:22] <jbaldwin> well the lines are messed up, line 14 is the main error
[19:11:19] *** Quits: jstevans (Instantbir@2083105D.6CF13040.DDE5D3F6.IP) (Ping timeout)
[19:11:58] *** Quits: jstevans1 (Instantbir@5B33AB70.BCCBF0DD.DDE5D3F6.IP) (Ping timeout)
[19:12:10] *** Joins: jstevans (Instantbir@CCDF9408.75B49943.DDE5D3F6.IP)
[19:13:19] *** Joins: tjc (tjc@8B72BF20.2A034839.284344F5.IP)
[19:13:19] *** ChanServ sets mode: +o tjc
[19:13:44] <kmc> are cross-crate macros expected to be working soon?  (or even now in master Rust, which I haven't tried yet)
[19:15:27] <pcwalton> kmc: nobody's working on them AFAIK
[19:15:43] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[19:20:12] <nmatsakis> brson: did you have any concrete idea of a replacement for `extern mod`?
[19:20:15] <kmc> do you think an acceptable workaround is to symlink or otherwise include a single macros.rs into multiple crates
[19:20:34] <brson> nmatsakis: no. `use`? :)
[19:20:41] <brson> 'import', 'crate'
[19:20:43] <nmatsakis> brson: I had a crazy thought that we could make `crate` a keyword
[19:20:49] <benh> yayy, bikeshedding
[19:20:54] <pcwalton> nmatsakis: +1
[19:20:57] <benh> *pulls up chair*
[19:21:07] *** Quits: lmandel (lmandel@13F2CEC5.7672369.D8E68FF6.IP) (Quit: lmandel)
[19:21:09] <kimundi> kmc: Well, it's the only kind of workaround possible right now aside from including the macros in the compiler, so...
[19:21:19] <pcwalton> I always thought "use crate foo;" or "crate foo;" was the obvious choice
[19:21:22] <nmatsakis> brson: well that part is not crazy. the crazy part was that we could potentially remove "inner" attributes by having people write `#foo #bar crate;` at the top of the .rs file
[19:21:36] <nmatsakis> brson: and perhaps similarly #foo #bar mod; 
[19:21:54] <nmatsakis> not sure if removing inner attributes is so imp't, and I like inner docs (but those are kind of special)
[19:22:05] <brson> nmatsakis: /**crate */?
[19:22:07] <benh> I figured we could do that "right now" with a specialcased #foo #bar mod self;
[19:22:08] *** Quits: kurisumasu (chris@9D963F5D.DF5D8AE7.54BCAB54.IP) (Ping timeout)
[19:22:14] <nmatsakis> or that
[19:22:31] *** Quits: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: I feel so disconnected now	)
[19:22:38] <nmatsakis> brson: well I still like /*! ... */ in any case :)
[19:22:53] <nmatsakis> brson: but yes conceivably /** foo */ crate;
[19:23:03] <nmatsakis> not sure why I'm directing all of this at brson  :)
[19:23:04] <kimundi> wouldn't /**crate */ just be a special case of /*! */ ? :P
[19:23:47] <kimundi> Also, what about /// comments: ///crate on each line seems excessive xD
[19:24:07] <benh> I'm happily in favor of making crate a keyword because I remember reading that concepts that have keywords associated with them are easier to learn :V
[19:24:17] <nmatsakis> kimundi: I'm not sure what this ///crate is
[19:24:32] <brson>  /** */ crate; makes sense
[19:24:36] <nmatsakis> kimundi: I envisioned "/// Foo \n crate;" or "/** Foo */ crate;"
[19:24:36] <brson> /// foo\n crate;
[19:24:39] *** Quits: Jackneill (Jackneill@moz-2F976809.pool.digikabel.hu) (Input/output error)
[19:24:49] * kimundi likes the idea of making crate a keyword replacemnt for extern mod in general though
[19:24:52] <ksf> you're not arguing about literal syntax for comments, are you?
[19:24:59] <benh> ksf: aren't we ever
[19:25:05] *** Joins: jstevans1 (Instantbir@5A1A6EF2.9B1DA26B.DDE5D3F6.IP)
[19:25:09] *** Quits: Jesin (Jessin_@moz-76F15F40.cc.lehigh.edu) (Ping timeout)
[19:25:17] <nmatsakis> ksf: we're discussing annotation syntax, but doc comments are one instance of it...
[19:25:19] <benh> Would you be able to use that syntax for crate attributes outside of the crate root file?
[19:25:22] <ksf> http://www.haskell.org/haskellwiki/Wadler%27s_Law
[19:25:33] *** Quits: jstevans (Instantbir@CCDF9408.75B49943.DDE5D3F6.IP) (Ping timeout)
[19:25:43] <brson> nmatsakis: for inner attributes: /** */ fn;?
[19:25:49] *** Joins: jstevans (Instantbir@43AF9CB6.9E5415FF.DDE5D3F6.IP)
[19:25:56] <nmatsakis> brson: oh, I was just figuring we wouldn't have inner attributes.
[19:25:58] <brson> it's kind of unsightly imo though it works
[19:26:18] <kimundi> ksf: I don't know if you noticed it, but the discussion about attribute and doc comment syntax developed to a bikeshedd singularity weeks ago :P
[19:26:19] <brson> nmatsakis: why not generalize it if we allow it on crate and mod?
[19:26:20] <nmatsakis> this would basically be a special syntax for the case of attaching attributes to the crate/module that owns the file
[19:26:25] <brson> oh i se
[19:26:26] * pnkfelix thinks we should keep inner attributes
[19:26:27] <nmatsakis> cause it's ugly :)
[19:26:33] <brson> it's ugly everywhere though!
[19:26:37] <nmatsakis> I personally like inner attributes, I'm sort of devil's advocating
[19:26:43] <nmatsakis> or at least I like /*! */
[19:26:45] *** Quits: jstevans1 (Instantbir@5A1A6EF2.9B1DA26B.DDE5D3F6.IP) (Ping timeout)
[19:27:05] <nmatsakis> but since we recently had that discussion and I feel like nothing felt wholly satisfactory I thought i'd toss it out there
[19:27:16] <nmatsakis> it's sort of what Java does for comments on packages, kind of
[19:27:17] *** Joins: Jesin (Jessin_@moz-76F15F40.cc.lehigh.edu)
[19:27:23] *** Quits: tjc (tjc@8B72BF20.2A034839.284344F5.IP) (Quit: zzzzzzzzzz)
[19:27:34] <pnkfelix> nmatsakis: you'll drink the #^ kool(aid) ; soon enoguh
[19:27:41] <brson> lol
[19:27:47] <nmatsakis> :)
[19:27:49] <benh> would need to change how /// comments are parsed or you'd have to do /// first line \n crate; \n /// second line \n crate; etc :D
[19:27:54] *** Joins: jstevans1 (Instantbir@4EEFAB0.59F1AD41.B7830B68.IP)
[19:28:11] <kimundi> benh: Well, those could just stack
[19:28:26] <kimundi> benh: Or rather, they already do
[19:28:34] *** Quits: jstevans (Instantbir@43AF9CB6.9E5415FF.DDE5D3F6.IP) (Ping timeout)
[19:29:01] <nmatsakis> brson: well anyway inner attributes aside, I don't care too much about extern mod vs crate but the latter does seem clearer
[19:29:09] *** Joins: brendan (brendaneic@moz-F2813A2B.hfc.comcastbusiness.net)
[19:29:32] <brson> nmatsakis: yeah, the only thing that makes me apprehensive about that is that we are *firmly* commiting to the 'crate' terminoligy. i'm so wishy-washy
[19:29:33] <kimundi> I also heard the name "link" thrown around as a posibility
[19:29:47] <strcat> extern mod doesn't seem bad to me
[19:29:48] <nmatsakis> all that's old is new again
[19:29:48] <brson> but +1 in principle
[19:29:56] <nmatsakis> didn't we used to write "link"?
[19:29:58] <strcat> it's consistent with the usage of extern elsewhere
[19:29:59] <nmatsakis> oh, no, we just tlaked about it
[19:30:01] <benh> oh, i thought we already had committed
[19:30:05] <brson> nmatsakis: it used to be 'use'
[19:30:09] <nmatsakis> right I remember now
[19:30:11] <kimundi> strcat: Is it?
[19:30:33] <strcat> yes, extern means 'not within this crate' everywhere except bare fns, and that's planned to change
[19:30:35] <nmatsakis> I personaly find that `extern mod` makes sense as well
[19:30:53] <nmatsakis> or seems consistent-ish
[19:30:59] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[19:31:00] *** Quits: Jesin (Jessin_@moz-76F15F40.cc.lehigh.edu) (Quit: Leaving)
[19:31:05] <kimundi> Well, imo `extern use` covers more the semantic of it
[19:31:07] <benh> It doesn't make it obvious that there's a conceptual difference between crates, which are top-level-ish things, and mods, which are arbitrarily nested :/
[19:31:34] <benh> kimundi: well, extern mod kinda looks like "mod foo;" that loads foo.rs as a module foo into the current scope
[19:31:41] <pnkfelix> extern use ::
[19:31:56] <benh> and extern mod does that, just with an .so I guess
[19:32:02] <nmatsakis> benh: but they are arbitrary nested
[19:32:06] <kimundi> benh: And that is exactly why that is bad: It's not what happens
[19:32:20] <benh> kimundi: good point
[19:32:28] <nmatsakis> benh: by which I mean you can link to them at any point in the module tree...
[19:32:37] <pnkfelix> (which reminds me of that suggestion I was going to make that we put a leading `::` on our `use declarations, so that path syntax is consistent in use decl and in expressions)
[19:32:48] <benh> nmatsakis: but you can't ever super::super::... your way out of the top crate scope, can you?
[19:32:51] *** Quits: josh (josh@moz-E500C116.mpls.qwest.net) (Quit: josh)
[19:32:51] *** Joins: jstevans (Instantbir@moz-1D911ADF.bootp.virginia.edu)
[19:33:00] <nmatsakis> I don't know what that means
[19:33:00] <kimundi> extern mod extra; mod foo { extern mod extra; } // two paths to the same module hierarchy, can be used interchangeably
[19:33:11] <benh> pnkfelix: Yeah, I think that might be good too :)
[19:33:22] <kimundi> mod extra; mod foo { mod extra; } // two paths to different module hierarchies, can not be used interchangeably
[19:33:49] *** Quits: jstevans1 (Instantbir@4EEFAB0.59F1AD41.B7830B68.IP) (Ping timeout)
[19:34:23] <benh> nmatsakis: I meant that mods are arbitrarily nested in that if you have a file representing a module, it can get hooked into some module hierarchy, and then you can say super::blah or whatever to refer to the surrounding modules in that hierarchy, but you never really have parent crates or child crates?
[19:34:28] <myname> is there some not completely out of date tutorial on file IO?
[19:34:38] <nmatsakis> benh: well that's true
[19:34:52] <kimundi> myname: #rust :P
[19:35:07] <myname> kimundi: i though i am there :p
[19:35:08] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[19:35:18] <myname> i have no specific questions yet
[19:35:27] *** Quits: eevee (eevee@moz-B2437F13.evrt.wa.frontiernet.net) (Ping timeout)
[19:35:28] <myname> i just want any kind of "it's done this way"
[19:35:32] *** Quits: jstevans (Instantbir@moz-1D911ADF.bootp.virginia.edu) (Ping timeout)
[19:35:59] *** Joins: eevee (eevee@moz-B20A74DC.evrt.wa.frontiernet.net)
[19:35:59] <kimundi> well, IO itself is not done yet, so I don't expect there to be much tutorials about it :)
[19:36:09] <myname> :/
[19:36:14] *** Quits: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca) (Client exited)
[19:36:26] *** Joins: Addle (quassel@moz-89E971E4.cable.teksavvy.com)
[19:37:18] *** Joins: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca)
[19:37:24] *** Quits: Amaranth (travis@moz-F81BB56A.cpe.cableone.net) (Quit: Linkinus - http://linkinus.com)
[19:37:45] *** Joins: Amaranth (travis@moz-D359BBDD.sxct.qwest.net)
[19:40:47] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[19:41:34] *** Joins: jgilbert (jgilbert@moz-4C088FCE.hsd1.ca.comcast.net)
[19:41:45] *** Quits: eddyb (eddy@3C6E2DBB.FFB4E060.A5830293.IP) (Quit: Konversation terminated!)
[19:41:55] *** Joins: eddyb (eddy@3C6E2DBB.FFB4E060.A5830293.IP)
[19:42:33] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Ping timeout)
[19:42:50] *** Quits: eddyb9 (eddy@3C6E2DBB.FFB4E060.A5830293.IP) (Quit: Leaving)
[19:43:01] <nmatsakis> I/O is overrated
[19:43:11] *** Quits: alex_quiterio (Mibbit@moz-AC2C0758.rev.vodafone.pt) (Quit: http://www.mibbit.com ajax IRC Client)
[19:43:18] <myname> lol
[19:43:24] <Ms2ger> Who needs I/O anyway
[19:43:42] <nmatsakis> I am a rock, I am an island...
[19:43:55] *** Quits: eddyb (eddy@3C6E2DBB.FFB4E060.A5830293.IP) (Ping timeout)
[19:44:05] *** Joins: kurisumasu (chris@9D963F5D.DF5D8AE7.54BCAB54.IP)
[19:45:12] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[19:45:33] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[19:46:57] *** Quits: pcwalton (pcwalton@moz-BE33DA21.fw1.sfo1.mozilla.net) (Ping timeout)
[19:47:15] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[19:49:36] *** Joins: jvns__ (bork@87D98E32.4046EB22.428F94DD.IP)
[19:50:08] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[19:50:10] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[19:51:35] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[19:51:58] *** Joins: tjc (tjc@4DAA5A80.2D024FDB.284344F5.IP)
[19:51:58] *** ChanServ sets mode: +o tjc
[19:52:12] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[19:52:36] *** Joins: mib_euvlql (Mibbit@moz-F9A500E6.dynamic.adsl.abo.nordnet.fr)
[19:52:48] *** Joins: jstevans (Instantbir@moz-A9F12457.bootp.virginia.edu)
[19:53:23] *** Parts: mib_euvlql (Mibbit@moz-F9A500E6.dynamic.adsl.abo.nordnet.fr) ()
[19:53:46] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[19:54:37] *** Quits: jstevans (Instantbir@moz-A9F12457.bootp.virginia.edu) (Ping timeout)
[19:55:04] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Client exited)
[19:55:21] *** Joins: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com)
[19:55:25] *** Joins: spott (spott@moz-5158CBDE.colorado.edu)
[19:57:08] *** Quits: spott (spott@moz-5158CBDE.colorado.edu) (Ping timeout)
[19:58:12] <myname> so, i have this string and i want to iterate it by line and inside that by char
[19:58:26] <myname> i thought of
[19:58:36] *** Joins: alisdair (textual@E1CEBB1A.D061F0C9.AA6AEE7B.IP)
[19:58:43] <myname> for line in foo.any_line_iter() { for ch in line.iter() { ...
[19:58:52] <myname> it complains about each() not being defined for &str
[19:58:56] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Client exited)
[19:58:59] <bstrie> is .any_line_iter actually a thing?
[19:59:06] <myname> yeah
[19:59:37] *** Joins: bent (chatzilla@C36F5748.8CE62E0F.A36C57B9.IP)
[19:59:39] *** Quits: fabiand (fabiand@moz-D16E79E0.adsl.alicedsl.de) (Quit: Verlassend)
[20:00:04] <strcat> rusti: for line in "foo\nbar".line_iter() { for c in line.iter() { println!("{}", c) } }
[20:00:07] -rusti- pastebinned 7 lines of output: http://ix.io/8yp
[20:00:13] <strcat> seems to work
[20:00:21] <myname> huh
[20:00:27] <bstrie> what's any_line_iter vs line_iter?
[20:00:41] <myname> ah
[20:00:42] <myname> m(
[20:00:45] <kimundi> bstrie: \n vs \r\n
[20:00:47] <bstrie> does any_line_iter also consider \r\n
[20:00:47] <myname> nvmd, totally my fault
[20:00:54] *** Quits: brendan (brendaneic@moz-F2813A2B.hfc.comcastbusiness.net) (Quit: brendan)
[20:01:29] <bstrie> should line_iter also consider \r\n?
[20:01:38] <bstrie> seems a bit weird not to
[20:01:56] *** Quits: alisdair (textual@E1CEBB1A.D061F0C9.AA6AEE7B.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[20:02:16] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[20:02:18] <myname> indeed
[20:02:31] <bstrie> in practice it just means that if you're not using any_line_iter, you're just not cross-platform
[20:02:51] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Ping timeout)
[20:03:14] <Leo`> any_line_iter considers both \n and \r\n ?
[20:03:33] <Leo`> where line_iter considers only \n ?
[20:03:33] <bstrie> that's our conjecture
[20:03:43] <bstrie> strcat might know, but he'll never tell
[20:03:46] <bstrie> he's too wily
[20:03:49] <Leo`> :D
[20:03:57] <bstrie> wily like a strfox
[20:04:03] <bstrie> strfox64
[20:04:07] <Leo`> http://ix.io/8yp whis is there a () at the end ?
[20:04:18] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[20:04:21] <bstrie> Leo`: are you using rusti
[20:04:30] <benh> because the value of the  loop is ()
[20:04:35] <bstrie> Leo`: rusti always prints the return value. your command returned ()
[20:04:44] <benh> an rusti prints the value of the expression, in addition to what that expression prins
[20:04:47] <benh> prints
[20:04:48] <Leo`> okay
[20:04:50] <bblum> bstrie: use the std::boost to get through
[20:04:54] <strcat> http://unicode.org/standard/reports/tr13/tr13-5.html *shrug*
[20:05:14] <myname> i like how you get the answer to this 3 times at once but at other question no answers at all :D
[20:05:33] <benh> well, it's an easy one!
[20:05:47] <strcat> rusti: ()
[20:05:47] -rusti- ()
[20:05:48] <myname> indeed
[20:06:04] <Leo`> rusti: 5
[20:06:05] -rusti- 5
[20:06:07] <bstrie> rusti: 5;
[20:06:08] -rusti- ()
[20:06:13] <Leo`> mhhhh
[20:06:14] *** Joins: Jesin (Jessin_@moz-76F15F40.cc.lehigh.edu)
[20:06:19] *** Joins: _Vi (vi@527C345F.497AA854.B16B3BE6.IP)
[20:06:19] <Leo`> okay
[20:06:32] <Leo`> rusti: { println("foo"); 5 }
[20:06:33] -rusti- foo
[20:06:33] -rusti- 5
[20:06:34] <strcat> rusti: true<false>true<false>true<false>true<false>true
[20:06:35] -rusti- false
[20:06:42] <Leo`> rusti: { println("foo"); }
[20:06:43] -rusti- foo
[20:06:43] -rusti- ()
[20:06:55] <kmc> <true>false</true>
[20:06:59] *** Quits: _andre (andre@CA528A4A.45A4338E.8EE27E6.IP) (Quit: leaving)
[20:07:03] <Leo`> oO wtf
[20:07:09] <Leo`> is that binary compareason on booleans ?
[20:07:19] <strcat> rusti: true > false
[20:07:19] -rusti- true
[20:07:20] <myname> obviously
[20:07:34] <strcat> rusti: () < ()
[20:07:34] -rusti- false
[20:07:36] <Leo`> don't know is there are actual uses for this ... :p
[20:07:37] <myname> not sure why, though
[20:07:45] <strcat> it is very useful for deriving
[20:08:00] <Leo`> mh
[20:08:03] <kmc> "All things are true."  "Even false things?"  "Even false things are true."  "How can that be?"  "I don't know, man, I didn't do it."
[20:08:23] <strcat> rusti: !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!false
[20:08:24] -rusti- false
[20:08:25] <kmc> Leo`: it should be possible to use booleans as keys in a tree-based lookup structure, for example
[20:08:33] <Leo`> kmc: mh. yeah
[20:08:42] <strcat> (or more likely as part of your key with a derived TotalOrd)
[20:08:44] <kmc> mostly important in generic code; if you know there are only 2 possible keys you wouldn't use a tree :)
[20:08:56] *** Quits: vmx (vmx@8155E38.294C4FB6.EBB03D7A.IP) (Ping timeout)
[20:09:14] <kmc> Haskell has an Ordering type with members LT, EQ, GT and it itself is ordered which can be fun :)
[20:09:22] <strcat> kmc: we have that too
[20:09:28] <strcat> rusti: 5.cmp(&2)
[20:09:31] -rusti- pastebinned 37 lines of output: http://ix.io/8yq
[20:09:35] <strcat> rusti: 5u.cmp(&2)
[20:09:36] -rusti- Greater
[20:09:38] <kmc> cool
[20:09:41] <strcat> rusti: 5u.cmp(&2) < 5.cmp(&6)
[20:09:43] -rusti- pastebinned 37 lines of output: http://ix.io/8yr
[20:09:46] * strcat sighs
[20:09:48] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[20:09:48] <strcat> rusti: 5u.cmp(&2) < 5i.cmp(&6)
[20:09:49] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[20:09:49] -rusti- false
[20:10:02] <strcat> rusti: 5u.cmp(&2).cmp(&5i.cmp(&6))
[20:10:02] *** Joins: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP)
[20:10:03] -rusti- Greater
[20:10:31] <strcat> anyway I hate floats
[20:10:55] <strcat> we could make Ord a total ordering if we made floats not implement it
[20:11:06] <strcat> floats could still implement the operators, just not the trait
[20:11:10] * strcat shrugs
[20:11:18] * strcat likes that idea
[20:11:25] <bstrie> file the bug
[20:11:37] <bstrie> rusti: 5.0
[20:11:38] -rusti- 5f64
[20:11:41] <bstrie> cool
[20:11:54] *** Joins: Dcoder (a@moz-F8BDC9E8.org)
[20:12:36] <bstrie> strcat: better yet, invent a time machine and crash the drunken party where they came up with ieee 754
[20:13:20] <ksf> HEAD won't build, missing rules for rusti?
[20:13:38] <ksf> make: *** No rule to make target `x86_64-unknown-linux-gnu/stage2/bin/rusti', needed by `all-target-x86_64-unknown-linux-gnu-host-x86_64-unknown-linux-gnu'.  Stop.
[20:13:39] <Leo`> ksf: what's the error message ?
[20:13:44] <Leo`> ksf: haha
[20:13:50] <Leo`> ksf: I fixed this bug today
[20:13:57] <Leo`> ksf: wait for the pull request to be merged :p
[20:14:01] <bstrie> rusti rises from the grave!
[20:14:19] *** Joins: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP)
[20:14:30] <Leo`> https://github.com/LeoTestard/rust/commit/74edbb204a4892ce1f7ee23dc18646949e2a4428
[20:15:15] * Leo` is very proud of his pull request :3
[20:15:31] <jbaldwin> kmc: i was able to get it to work.. but I don't really understand what the problem is https://gist.github.com/jbaldwin/466babdecc9494fcc497 line 42
[20:15:44] <maikeru> "mismatched types: expected `std::option::Option<buffer::BufferedStream<S>>` but found `std::option::Option<buffer::BufferedStream<S>>`" <3
[20:15:45] * ksf just found that line and was considering deleting it 
[20:15:56] *** Quits: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net) (Client exited)
[20:16:13] <benh> I would just have touched the path where the makefile expects rusti to appear ;)
[20:16:37] <Leo`> too simple for me
[20:16:42] <Leo`> I prefer editing Makefiles
[20:16:51] <Ms2ger> Eww, makefiles
[20:16:58] *** Joins: vmx (vmx@8155E38.294C4FB6.EBB03D7A.IP)
[20:17:03] *** Quits: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com) (Ping timeout)
[20:17:13] <kmc> you can use Scheme in GNU Make makefiles now
[20:17:21] <mcpherrin> kmc: What?!??
[20:17:22] <ksf> the problem with make is that it's an applicitive functor, not a monad.
[20:17:24] <Leo`> (that must be a consequence of the time when I tried to compile Darwin manually ... )
[20:17:26] <ksf> no, seriously :)
[20:17:32] *** Joins: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net)
[20:17:33] <mcpherrin> kmc: that's insane and also awesome
[20:17:51] <Leo`> kmc: what what what ? Scheme in Makefiles ?
[20:17:53] <bstrie> kmc: scheme, but not elisp?
[20:18:10] <Leo`> Guile, I guess
[20:18:29] <mcpherrin> http://www.gnu.org/software/make/manual/make.html#Guile-Function
[20:18:31] <mcpherrin> well i'll be damned
[20:18:39] <Leo`> It's supposed to be GNU's official extension langage
[20:18:47] *** Joins: ksf_ (ksf@moz-6AC4331.adsl.hansenet.de)
[20:19:05] <Leo`> well that's awesome
[20:19:20] <Leo`> i'm writing my Makefiles only in Scheme starting right now
[20:19:36] *** Quits: ksf (ksf@moz-B281265A.adsl.hansenet.de) (Ping timeout)
[20:20:45] *** Joins: BitPuffin (isak@moz-98F8BF74.cust.tele2.se)
[20:21:02] *** Quits: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net) (Input/output error)
[20:24:07] *** Joins: josh (josh@moz-E500C116.mpls.qwest.net)
[20:24:29] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[20:25:05] *** Quits: DeTeam (DeTeam@moz-76DDA368.dyn.broadband.iskratelecom.ru) (Quit: DeTeam)
[20:25:52] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[20:25:56] <strcat> kmc: yeah it's a bit insane
[20:25:57] <jack> strcat: did you find a better fix?
[20:26:04] <strcat> jack: nope but that one is going in
[20:26:07] <strcat> better than nothing
[20:26:22] <strcat> jack: (I left #[unsafe_no_drop_flag] off of UnsafeArc for now)
[20:26:28] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[20:26:32] <strcat> so it will fix servo
[20:26:49] <jack> strcat: ok. did anyone review it yet? i would like it if we could p=2 it or something
[20:27:19] <strcat> jack: yeah it's the current pending one
[20:27:20] <strcat> jack: http://buildbot.rust-lang.org/bors/bors.html
[20:27:53] <strcat> still really need to fix the UnsafeArc issue
[20:27:55] <strcat> :s
[20:28:30] <jack> brson: can you review rust-http PRs on ChrisMorgan's repo?
[20:30:19] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[20:30:59] *** Quits: tjc (tjc@4DAA5A80.2D024FDB.284344F5.IP) (Quit: Places to go, people to annoy)
[20:31:01] *** Quits: Palmik (palmik@moz-11EA685D.pks.muni.cz) (Quit: Lost terminal)
[20:33:48] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[20:33:59] *** Joins: huhlig-home (huhlig@moz-C8339267.hfc.comcastbusiness.net)
[20:35:09] *** Joins: brendan (brendaneic@moz-F2813A2B.hfc.comcastbusiness.net)
[20:36:00] *** Quits: huhlig-home (huhlig@moz-C8339267.hfc.comcastbusiness.net) (Ping timeout)
[20:36:17] *** Joins: huhlig-home (huhlig@moz-C8339267.hfc.comcastbusiness.net)
[20:36:18] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[20:37:13] *** Quits: Ms2ger (Ms2ger@moz-92A79B55.adsl-dyn.isp.belgacom.be) (Ping timeout)
[20:37:52] <Leo`> strcat: oops. I just realized that when I copied the license header from another test in my test suite file, I kept the "2012" instead of "2013" ><
[20:39:35] *** Joins: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP)
[20:39:44] * bstrie buries Leo` under a pile of shame
[20:39:54] <Leo`> eeeeh
[20:40:25] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[20:40:39] <strcat> afaik we could just be using 2013 in all of them
[20:40:41] <kimundi> Stop living in the past, Leo`!
[20:40:57] *** Quits: jgilbert (jgilbert@moz-4C088FCE.hsd1.ca.comcast.net) (Ping timeout)
[20:41:00] <Leo`> strcat: but the one from which I copied the header had 2012
[20:41:02] <Leo`> :(
[20:41:11] <strcat> yeah but we could just add a lint check enforcing that they match the current year
[20:41:17] <Leo`> :D
[20:41:53] <strcat> it's a unified copyright on the parts of the project written by rust contributors, it's not really per-function or per-file
[20:41:54] <pnkfelix> strcat: you want to go further than the current `make tidy` check ?
[20:42:16] <bstrie> doesn't make tidy consist solely of checking whether all lines are < 100 chars
[20:42:25] <strcat> pnkfelix: yeah, afaik there's no need to have ranges of years or anything - just the current year, but brson would probably need to pester a mozilla lawyer about it ;p
[20:42:46] <bstrie> I'm not even sure what the legal purpose of having the year is
[20:42:48] <pnkfelix> bstrie: okay, maybe its some other make target; all I know is that recently we started running a python script that checks the license at the top of the files
[20:42:59] <strcat> bstrie: the copyright expires a set number of years after the year in the headers
[20:43:08] <bstrie> what copyright
[20:43:20] *** Joins: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com)
[20:43:21] <strcat> the copyright the rust contributors/developers have on the code
[20:43:29] <bstrie> but
[20:43:31] <strcat> you implicitly have a copyright on anything you create
[20:43:32] <bstrie> MIT-license
[20:43:43] <Leo`> that doesn't mean absence of copyright
[20:43:44] <bstrie> you explicitly give it up when you commit to this repo
[20:43:45] <strcat> bstrie: that's the license the people with the copyright have agreed to license it under
[20:43:47] <strcat> no
[20:43:58] <strcat> mozilla doesn't use copyright assignment
[20:44:11] *** Joins: Ms2ger (Ms2ger@moz-92A79B55.adsl-dyn.isp.belgacom.be)
[20:44:24] <strcat> you own the copyright to any code you've written in the rust repo, and have just agreed to license it under the rust licenses
[20:44:29] <bstrie> so what does that mean my legal rights are, effectively
[20:44:33] <strcat> if you work for mozilla, mozilla likely owns the copyrights
[20:44:47] <strcat> bstrie: you can use the code *you wrote* without respecting the rust licenses
[20:44:59] <strcat> you agreed to license it under the rust licenses, but you didn't give up the right to use it outside of them
[20:45:05] <Ms2ger> [SINAL, I assume]
[20:45:05] <strcat> they are permissive so it hardly matters
[20:45:10] <bstrie> so you mean that I can insist that anyone using the rust compiler MUST release my code bits under GPL
[20:45:15] <strcat> bstrie: no.
[20:45:24] <strcat> bstrie: you licensed them under those licenses, you can't take it back
[20:45:34] <strcat> but you didn't give up your copyright
[20:45:34] <bstrie> ok so just tell me what action I can take
[20:45:47] <bstrie> I want to assert my copyright. what do I do.
[20:45:50] <strcat> bstrie: if you contribute a module to rust, you license it under the rust licenses
[20:45:54] <Leo`> but you can use YOUR lines in a project using an even more permissive license than MIT
[20:45:56] <Leo`> for example
[20:45:57] <strcat> but you could *also* use it in your *own* project
[20:46:00] <strcat> not under the rust license
[20:46:02] <bstrie> haha
[20:46:07] <bstrie> I see
[20:46:16] <bstrie> so it's if I think MIT somehow isn't permissive enough
[20:46:20] <kurisumasu> Not that there should be much difference between MIT licensed code and otherwise
[20:46:35] <bstrie> I really, really want the Times trait to be WTFPL
[20:46:40] *** Joins: pcwalton (pcwalton@moz-BE33DA21.fw1.sfo1.mozilla.net)
[20:46:40] *** ChanServ sets mode: +ao pcwalton pcwalton
[20:46:42] <strcat> bstrie: oracle and canonical generally use copyright assignment, so if you contribute code to a GPL project they own, you can no longer use the code *you wrote* in your MIT licensed project
[20:46:50] *** Joins: ozten (ozten@19BD73A1.5D8BCA3A.A0C1B52F.IP)
[20:46:55] <strcat> it's evil, they do it so that they can later change the license on the code
[20:46:57] <strcat> mozilla doesn't do that
[20:47:06] <bstrie> btw
[20:47:14] <Leo`> by the way what are the differences between MIT and other BSD-like licenses ?
[20:47:15] <bstrie> fn reform == death of times trait
[20:47:21] <bstrie> strcat wins at alast!!
[20:47:29] <Leo`> and why is Rust dual licensed ?
[20:47:45] <Leo`> and last very important question
[20:47:50] <bstrie> Leo`: the apache is there because of patent bullshit, the MIT is there because of license bullshit
[20:47:57] <Leo`> do I need to change this "2012" in my pull request ?
[20:48:00] <strcat> Leo`: you can choose to use it under either license, it makes more people happy
[20:48:23] <strcat> Leo`: it really doesn't matter, the mistake is all over the codebase ;p
[20:48:31] <Leo`> okay :p
[20:48:56] <bstrie> in the future I will specify the year as 1877 and see if anyone notices
[20:49:01] <strcat> afaik the copyright headers are there so that the copyright is always clear, even if files are taken out of the project and used somewhere else
[20:49:13] <strcat> but we could just make them all the same
[20:49:38] <strcat> jack: great, my test didn't have 'pub' main so it failed on windows :(
[20:50:34] <Leo`> by the way
[20:50:40] <Leo`> you makes me think of a thing
[20:51:04] *** Joins: huseby (huseby@19BD73A1.5D8BCA3A.A0C1B52F.IP)
[20:51:09] <bstrie> say what you must, don't leave it there
[20:51:25] <Leo`> i've got a project with a crate that is linked against other files
[20:51:31] *** Joins: ktt3ja (Mibbit@moz-6B6EE8C0.hsd1.va.comcast.net)
[20:51:57] <Leo`> I have to use the --lib flag beacause without it, Rustc complains the lack of main
[20:52:17] <Leo`> but with --lib, I have warnings because I have omitted the #[link] attributes
[20:52:24] <strcat> yep
[20:52:32] <strcat> if you have the #[link] attributes you also won't need --lib
[20:52:46] <kimundi> You don't?
[20:52:49] <Leo`> I think "I don't want a main function" and "I want build as a library" should be separate things, no ?
[20:52:53] <kimundi> Don't we have an extra attribuet for that?
[20:52:56] <kimundi> crate_type?
[20:53:03] <strcat> kimundi: ah right, yes
[20:53:09] * strcat shrugs
[20:53:12] <Leo`> yes, but my crate is not "properly speaking" a library
[20:53:41] *** Quits: brendan (brendaneic@moz-F2813A2B.hfc.comcastbusiness.net) (Quit: brendan)
[20:53:42] <strcat> Leo`: having main means you have a binary, not having main means you have a library
[20:53:59] <strcat> there are just those 2 kinds of crates
[20:54:06] <Leo`> mh.
[20:54:19] <strcat> there are other obscure ways to compile rust, but not ways that are referred to as a crate
[20:54:27] <Leo`> and if I build with -c, and then call manually the linker to produce an... hybrid thing ? :D
[20:54:32] <strcat> -c doesn't really work
[20:54:38] <Leo`> oO
[20:54:44] <Leo`> It works perfectly fine for me
[20:54:55] <strcat> if you use -c without --lib, the only external symbol will be main
[20:54:59] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[20:55:00] *** Quits: Jesin (Jessin_@moz-76F15F40.cc.lehigh.edu) (Ping timeout)
[20:55:03] <strcat> Leo`: why are you using -c?
[20:55:05] <Leo`> oh
[20:55:06] <Leo`> okay
[20:55:15] *** Joins: brendan (brendaneic@moz-F2813A2B.hfc.comcastbusiness.net)
[20:55:16] *** Quits: Ms2ger (Ms2ger@moz-92A79B55.adsl-dyn.isp.belgacom.be) (Quit: nn)
[20:55:18] <strcat> I've wanted to drop -c
[20:55:24] <Leo`> strcat: I'm doing low-level dirty things :p
[20:55:33] *** Joins: shrughes (shrughes@moz-C34BE8E5.hsd1.ca.comcast.net)
[20:55:56] <strcat> --emit-llvm produces a file you can compile with clang
[20:55:57] *** Quits: shrughes (shrughes@moz-C34BE8E5.hsd1.ca.comcast.net) (Quit: Leaving)
[20:56:03] <Leo`> I have to invoke LD manually
[20:56:03] <strcat> along with C
[20:56:05] <Leo`> mh
[20:56:08] <Leo`> :/
[20:56:12] <Leo`> I prefer -c
[20:56:30] <Leo`> it makes less targets in my Makefile
[20:56:56] <Leo`> but yeah I could use --emit-llvm, or even -S
[20:57:55] <Leo`> (rather -S than --emit-llvm, I don't like the idea that my projet would need clang to build :p)
[20:58:24] <Leo`> mh
[20:58:35] <Leo`> when I make install rustc, does it install llvm along with it ?
[20:58:57] <Leo`> I mean, llc, etc.
[20:58:57] <strcat> rust's LLVM
[20:59:00] <strcat> Leo`: no
[20:59:05] <Leo`> okay
[20:59:11] <Leo`> well, so I prefer -S
[20:59:13] <Leo`> :p
[20:59:24] <Leo`> but -c is fine. Why do you want to remove it ? :/
[21:00:27] <strcat> because it's specific to BFD's output format
[21:00:35] <ktt3ja> excuse me, does a FileStream object really have a read_line method like shown in this example? http://static.rust-lang.org/doc/0.8/std/rt/io/trait.Reader.html#fn.eof
[21:00:56] <strcat> we really shouldn't hardcode a dependency on the *old* binutils linker
[21:01:40] <strcat> it's very bad for portability and isn't going to support LTO
[21:01:42] *** Quits: Kruppe (user@moz-253119B0.esg.uwaterloo.ca) (Ping timeout)
[21:01:44] <Leo`> mhhh
[21:02:01] <strcat> (we shouldn't be using gcc to link at all)
[21:02:14] <Leo`> yeah but
[21:02:41] <Leo`> why is it specific to any linker ?
[21:02:43] *** Quits: ksf_ (ksf@moz-6AC4331.adsl.hansenet.de) (Ping timeout)
[21:02:46] <Leo`> I don't get the point
[21:03:03] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[21:03:12] <strcat> there are object file output formats
[21:03:21] <Leo`> yeah I know that
[21:03:45] *** Joins: ksf (ksf@moz-57140CF1.adsl.hansenet.de)
[21:03:54] <ksf> just call whatever you produce for separate compilation .ro and take care that rustc -c and rustc -o foo *.ro understand each other, on one platform?
[21:04:02] <Leo`> but why shouldn't -c generate an object file in the native format for the target ?
[21:04:11] <strcat> ksf: rustc doesn't use object files though
[21:04:23] <ksf> separate compilation *is* important for larger projects...
[21:04:33] <strcat> ksf: separate compilation is done with crates
[21:04:39] <Leo`> just like gcc and other C compiler do
[21:04:47] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[21:04:49] <strcat> Leo`: rustc isn't a C compiler
[21:05:13] <Leo`> well
[21:05:15] <Leo`> and ?
[21:05:18] <strcat> rust modules aren't able to be compiled separately from the crate
[21:05:18] <ksf> relying solely on .o is virtually impossible if you're not c or c++
[21:05:35] <Leo`> strcat: yes I know
[21:05:42] <ksf> GHC, for example, litters .hi files all over the place.
[21:05:43] <Leo`> but a .o = a crate looks fine to me
[21:05:48] <strcat> a crate is rust's single unit of compilation
[21:06:00] <strcat> Leo`: well, I don't see a use case for it
[21:06:29] <Leo`> strcat: of course I could achieve the same thing with -S and then as
[21:06:36] <ksf> all I'm concerned about is the granularity, here. when compiling rustc, for example, each .so takes ages.
[21:06:37] <Leo`> it's more a convenience
[21:07:05] <strcat> ksf: it would be slower if it was split into many crates and you still wanted to compile the same thing
[21:07:21] <strcat> unless you're talking about parallelism, in which case the solution is going to be using the in-progress FunctionPass parallelism
[21:07:22] <ksf> for a single build, yes, but for an incremental one?
[21:07:35] <strcat> ksf: crates are a single unit of compilation, it's just how things are
[21:07:50] <strcat> modules are not capable of being compiled independently, it's not an option
[21:08:18] <strcat> if you want an incremental build you can split things into many crates
[21:08:48] <strcat> it's going to be slower to do a non-incremental build ofc
[21:08:59] <strcat> if you split it up
[21:09:14] <ksf> an estimated 99.99% of my builds are incremental
[21:09:28] <strcat> so split it into as many crates as you want
[21:09:32] <strcat> that's rust's compilation unit
[21:10:05] *** Joins: Jesin (Jessin_@moz-9BB5F6CF.cc.lehigh.edu)
[21:10:06] <strcat> we can't change it at this point, modules can have dependencies on any other modules in the crate
[21:10:34] <Leo`> so why couldn't I compile all my crates into .o and then link them together ?
[21:10:46] *** Quits: earlz2 (earlz@3BA8656D.F04AFED0.49B48A1E.IP) (Quit: Leaving.)
[21:11:12] <ksf> at that point they should probably be called .a, though that's a detail.
[21:11:23] <Leo`> yep
[21:11:28] <ksf> shipping gazillions of .so files would definitely be strange, though.
[21:11:40] <ksf> ...not to mention lto.
[21:11:48] <Leo`> but .a or .o is fine
[21:11:54] <Leo`> it produces a single binary
[21:12:00] <Leo`> and the crate remains the "compilation unit"
[21:12:40] <strcat> there are many different formats a .o could be
[21:12:49] <strcat> I am only saying that the current -c switch is going to be removed
[21:12:54] <Leo`> one per target, just like binarys
[21:12:58] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[21:13:00] <strcat> there could still be a -c switch.... but it's not going to be done by calling gcc
[21:13:26] <Leo`> ok
[21:13:29] <Leo`> and what would it produce ?
[21:13:51] <strcat> a file with a .o extension rustc and clang know how to link together
[21:14:01] <Leo`> mhh
[21:14:07] <Leo`> and would the native linker understand this file ?
[21:14:09] *** Quits: pnkfelix (pnkfelix@moz-B65AF445.hfc.comcastbusiness.net) (Quit: Leaving.)
[21:14:17] <ksf> what about #[ crate_type = "static-lib" ]; ?
[21:14:19] <strcat> Leo`: not necessarily
[21:14:22] <Leo`> strcat: :/
[21:14:26] <Leo`> it should
[21:14:31] <strcat> but it won't necessarily
[21:15:03] <strcat> clang -c -flto foo.c -> foo.o that the native linker doesn't necessarily understand
[21:15:16] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Client exited)
[21:15:18] <Leo`> -flto ?
[21:15:25] <ksf> link time optimisation
[21:15:36] <Leo`> mh
[21:15:36] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[21:15:51] <Leo`> mh mh
[21:15:55] <strcat> if rustc uses lld, I'm not sure that the 'native' linker is going to understand any of it
[21:16:08] <strcat> I don't think it matters
[21:16:17] <Ralith> lld <3
[21:16:23] <pcmattman> also note that clang could be controlled by the rustc build to target an object format that your native linker can't understand, for xcompiles for example
[21:16:23] <Ralith> is that becoming usable yet?
[21:16:27] <strcat> Ralith: yes
[21:16:36] <Leo`> well id doesn't matters if ways exist to bypass this
[21:16:37] <ksf> at least on my box it's vain to try to use -flto with ld, gnu ld just doesn't grok llvm IR
[21:16:38] <Ralith> ooh
[21:16:43] <Ralith> strcat: elaborate?
[21:16:48] *** Quits: ktt3ja (Mibbit@moz-6B6EE8C0.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[21:16:52] <Leo`> like generate assembly or LLVM assembly
[21:16:55] <strcat> Ralith: static linking works, dynamic linking mostly works
[21:17:02] <Leo`> and assemble and link it using the native assembler/linker
[21:17:03] <Ralith> on all platforms?
[21:17:17] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Ping timeout)
[21:17:45] <strcat> Ralith: well static linking works everywhere
[21:18:02] *** Quits: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP) (Quit: nn)
[21:18:08] <Ralith> you still need to dynamically link libc, though, yes?
[21:18:25] <strcat> there are libc implementations you can statically link
[21:18:36] <Ralith> portable ones?
[21:18:47] *** Joins: ksf_ (ksf@moz-B356ED6F.adsl.hansenet.de)
[21:18:49] <strcat> well it's not like glibc is portable
[21:18:59] <Ralith> fair
[21:19:06] *** Quits: jhenahan (jhenahan@moz-65B7D4EE.hsd1.vt.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[21:19:07] <strcat> afaik musl only works on linux
[21:19:09] <Ralith> what I mean to ask is, does there exist a set that spans the set of major platforms?
[21:19:16] <strcat> doubt it
[21:19:21] *** Quits: ksf (ksf@moz-57140CF1.adsl.hansenet.de) (Ping timeout)
[21:19:23] <Ralith> well that's a problem then
[21:19:35] <Ralith> not-terrible windows support is one of the primary motivating aspects of lld imo
[21:20:16] <Ralith> how far along is dynamic linking, then?
[21:20:22] <strcat> dunno exactly
[21:20:28] <Ralith> kay
[21:20:33] <Leo`> http://buildbot.rust-lang.org/bors/bors.html what does the "2" means in the second column ?
[21:20:34] <Ralith> good to know it's moving along anyway
[21:20:38] <strcat> I only tried it to make a statically linked thing
[21:20:38] <Luqman> Ralith: it could just link against the msvcrt for windows no?
[21:20:46] <Leo`> is it the stage or something ?
[21:20:49] <Ralith> Luqman: that would be dynamic linking
[21:20:50] <sfackler> Leo`: it's the priority
[21:20:56] <Leo`> ah
[21:21:11] *** Joins: tjc (tjc@AC76BDFB.870F2FA5.2370DFC3.IP)
[21:21:11] *** ChanServ sets mode: +o tjc
[21:21:20] *** Quits: tjc (tjc@AC76BDFB.870F2FA5.2370DFC3.IP) (Client exited)
[21:21:21] *** Quits: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP) (Ping timeout)
[21:21:35] <Ralith> I'm eagerly awaiting the day when I can make idris completely independent of external toolchains at runtime
[21:21:50] <sfackler> some things bitrot quickly or fix something really important so they jump the queue
[21:22:26] <heftig> strcat: lld?
[21:22:33] <strcat> heftig: llvm's linker
[21:22:36] <Luqman> Ralith: afaik you could "statically" link the msvcr dll
[21:22:51] <Ralith> Luqman: it's a dll...
[21:22:53] <strcat> heftig: http://lld.llvm.org/
[21:22:54] *** Joins: topspin (allenc@moz-3A4A8509.frii.com)
[21:23:10] <strcat> that page is out-of-date
[21:23:23] <Ralith> is there an up to date status page anywhere, or does one need to pour over the ML?
[21:23:55] <strcat> docs are always the last thing to be updated ;p
[21:24:00] <Ralith> heh
[21:24:38] *** Joins: jgilbert (jgilbert@moz-BBE3ABD.mv.mozilla.com)
[21:24:57] <Luqman> Ralith: from http://msdn.microsoft.com/en-us/library/2kzt1wy3.aspx the /MT option - Causes your application to use the multithread, static version of the run-time library. Defines _MT and causes the compiler to place the library name LIBCMT.lib into the .obj file so that the linker will use LIBCMT.lib to resolve external symbols.
[21:25:10] <heftig> strcat: so with that you wouldn't need binutils anymore?
[21:25:19] <strcat> heftig: yeah, no binutils
[21:25:35] <strcat> heftig: and libc++abi is picking up support for native exception handling so the libgcc dep will go away too
[21:25:47] <heftig> wasn't it compiler-rt?
[21:25:49] <strcat> atm libc++abi delegates to the "native" exception handling library
[21:26:00] <strcat> heftig: compiler-rt provides the other things you'd expect from libgcc_s, but not exceptions
[21:26:03] <Ralith> Luqman: that would be linking LIBCMT.lib instead of the msvcrt dll, if indeed that is what it means
[21:26:15] <Ralith> Luqman: if that's doable, then that would certainly work.
[21:26:25] <heftig> didn't libc++ replace libstdc++?
[21:26:42] <strcat> heftig: libc++ replaces libstdc++, libc++abi replaces libsupc++
[21:26:50] <strcat> compiler-rt replaces some of libgcc, but not exceptions
[21:27:08] *** Quits: pauls (pauls@9205DEB4.9B5854D0.10894A1E.IP) (Ping timeout)
[21:27:11] <heftig> so much stuff
[21:27:17] <heftig> i just want to build a toolchain :(
[21:27:51] <Luqman> Ralith: it seems like LIBC.LIB/LIBCMT.LIB are the static versions of the windows c runtime library
[21:27:56] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[21:28:09] <strcat> heftig: I think Arch has libsupc++ inside libstdc++ but it doesn't have to be that way
[21:28:27] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[21:28:47] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:29:20] <strcat> it's kind of sad that if you use libc++, you can't use any of the pre-built C++ packages
[21:29:40] <strcat> and our clang/llvm doesn't use compiler-rt so a bunch of features are broken
[21:30:24] <strcat> libc++ + clang -> full C++11 implementation, and full C++14 draft implementation
[21:30:42] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[21:31:09] *** Joins: crembo (crembo@moz-C2B364AA.vc.shawcable.net)
[21:32:43] *** Joins: tjc (tjc@moz-6C584174.ipnetworksinc.net)
[21:32:43] *** ChanServ sets mode: +o tjc
[21:32:49] *** Quits: tjc (tjc@moz-6C584174.ipnetworksinc.net) (Client exited)
[21:33:16] *** Quits: brendan (brendaneic@moz-F2813A2B.hfc.comcastbusiness.net) (Quit: brendan)
[21:34:00] *** Joins: brendan (brendaneic@moz-F2813A2B.hfc.comcastbusiness.net)
[21:34:52] *** Joins: eatkinson (eatkinson@moz-397CFE61.airbears2.berkeley.edu)
[21:34:56] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[21:35:18] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:36:47] <ksf_> strcat, that's going to change though, multiple distros have plans to at least support libc++
[21:37:02] <ksf_> freebsd I think even wants to switch completely
[21:37:49] <ksf_> ...and if you want c++11 you really want libc++, because it's been designed for it, instead of being hacked to accomodate it.
[21:38:58] <Amaranth> Is libstdc++ still using reference counted strings?
[21:39:29] *** Joins: jhenahan (jhenahan@moz-BF70BC63.ngn.east.myfairpoint.net)
[21:39:40] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[21:41:26] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[21:42:54] <strcat> ksf_: I think freebsd already switched completely
[21:42:55] *** Quits: crembo (crembo@moz-C2B364AA.vc.shawcable.net) (Client exited)
[21:43:09] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[21:43:27] <Amaranth> OS X switched
[21:43:47] *** Joins: ktt3ja (Mibbit@moz-6B6EE8C0.hsd1.va.comcast.net)
[21:45:24] *** Joins: spott (spott@moz-9B11536C.hsd1.co.comcast.net)
[21:46:29] *** Quits: huseby (huseby@19BD73A1.5D8BCA3A.A0C1B52F.IP) (No route to host)
[21:46:29] *** Quits: ozten (ozten@19BD73A1.5D8BCA3A.A0C1B52F.IP) (No route to host)
[21:46:33] <strcat> Amaranth: yes, libstdc++ still has completely terrible atomic reference counting for std::string
[21:46:59] <Amaranth> It's not terrible, there was a reason they used it that is still valid
[21:46:59] *** Quits: jvns__ (bork@87D98E32.4046EB22.428F94DD.IP) (Ping timeout)
[21:47:05] *** Quits: spott (spott@moz-9B11536C.hsd1.co.comcast.net) (Ping timeout)
[21:47:07] <Earnestly> strcat: What exactly would have to change for Arch to use libc++?
[21:47:51] <strcat> Amaranth: it's terrible to do atomic refcounting for anything but enormous strings
[21:48:35] <Amaranth> Where enormous is anything larger than the short string optimization
[21:48:41] *** Joins: ozten (ozten@19BD73A1.5D8BCA3A.A0C1B52F.IP)
[21:48:49] <strcat> Amaranth: no, you have to get a lot bigger for it to be worth it
[21:49:30] <strcat> facebook's C++ lib has 3 tiers
[21:49:43] <ksf_> Earnestly, well first off more packages have to build with clang
[21:49:56] <strcat> COW makes sense but not for the average use case, unless it's really big
[21:50:16] <strcat> a small allocation only takes 10-20ns
[21:50:22] <aatch> strcat, folly! folly is awesome
[21:50:38] <brson> jack: I merged the two that were mergable
[21:50:55] *** Joins: geoffhill (geoffhill@moz-79C8D45C.amazon.com)
[21:50:59] <strcat> Amaranth: afaik the only reason they forbid COW strings in the C++11 standard is because it's almost universally viewed as a bad idea
[21:51:10] <strcat> (for a general purpose string type)
[21:51:23] <Amaranth> strcat: It's a bad idea in a world where multithreaded is pervasive
[21:51:38] *** Quits: Houm_ (Houm@moz-25669AA8.fbx.proxad.net) (Ping timeout)
[21:51:45] <ktt3ja> why does this code print the content of my file twice? https://friendpaste.com/60ZolKXctEI62beFbIfrZy
[21:52:14] <Earnestly> friendpaste.com fails safe ssl negotiation fwiw
[21:52:47] <strcat> it worked here :s
[21:53:15] <ktt3ja> really?
[21:53:40] <Earnestly> Error code: ssl_error_unsafe_negotiation
[21:53:55] *** Joins: tjc (tjc@AC76BDFB.870F2FA5.2370DFC3.IP)
[21:53:56] *** ChanServ sets mode: +o tjc
[21:54:03] *** Quits: tjc (tjc@AC76BDFB.870F2FA5.2370DFC3.IP) (Client exited)
[21:54:12] <strcat> ktt3ja: you're converting the whole buffer to a string, instead of just the part read wrote out data to
[21:54:29] <Earnestly> Since I am treating unsafe ssl negotiation as broken
[21:54:46] *** Joins: huseby (huseby@19BD73A1.5D8BCA3A.A0C1B52F.IP)
[21:55:07] <Earnestly> It’s quite fun, even microsoft.com fails, amazon aws, etc.  Although most websites function just fine
[21:55:36] <ktt3ja> strcat: how do I print just the data?
[21:55:41] <Amaranth> Earnestly: What does unsafe mean in this context? SSL 3?
[21:55:52] <strcat> ktt3ja: well read is likely returning you a uint with how much it read
[21:56:06] <strcat> so slice the buffer and print only that much
[21:56:12] <strcat> or use a higher-level API?
[21:56:21] <strcat> I haven't used rust's built-in I/O stuff really
[21:56:36] <Earnestly> Amaranth: https://wiki.mozilla.org/Security:Renegotiation#security.ssl.treat_unsafe_negotiation_as_broken
[21:57:28] <Earnestly> and security.ssl.require_safe_negotiation
[21:57:42] <ktt3ja> strcat: which module would have a higher-level API?
[21:57:56] <strcat> ktt3ja: don't know, haven't used that stuff
[21:57:56] <Earnestly> (outdated article to be sure)
[21:57:59] *** Quits: cowboyd (cowboyd@moz-1BD02A1E.sw.biz.rr.com) (Client exited)
[21:58:45] <ktt3ja> strcat: ah, k
[22:00:16] *** Quits: josh (josh@moz-E500C116.mpls.qwest.net) (Quit: josh)
[22:00:22] *** Quits: diegoyam (quassel@FF9B1514.A4EC3D18.3A1EC144.IP) (Ping timeout)
[22:00:32] *** Joins: diegoyam (quassel@FF9B1514.A4EC3D18.3A1EC144.IP)
[22:00:33] *** Joins: josh (josh@moz-E500C116.mpls.qwest.net)
[22:02:37] *** Quits: josh (josh@moz-E500C116.mpls.qwest.net) (Quit: josh)
[22:04:03] *** Quits: devbug (quassel@2D4E172D.4C8B6099.9B57EA59.IP) (Ping timeout)
[22:04:20] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[22:04:40] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[22:04:50] *** Quits: jbaldwin (Mibbit@EF784383.FC9BECD6.A8DE49A2.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:05:36] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[22:06:08] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[22:06:17] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Connection reset by peer)
[22:06:20] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[22:06:51] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[22:07:52] *** Quits: ksf_ (ksf@moz-B356ED6F.adsl.hansenet.de) (Ping timeout)
[22:08:01] *** Joins: ksf_ (ksf@moz-28126AD7.adsl.hansenet.de)
[22:09:02] *** Joins: Houm (Houm@moz-25669AA8.fbx.proxad.net)
[22:10:26] *** Quits: ksf_ (ksf@moz-28126AD7.adsl.hansenet.de) (Ping timeout)
[22:11:31] *** Joins: ksf (ksf@moz-C69BC2EB.adsl.hansenet.de)
[22:11:50] *** Joins: alonlevy (alon@moz-697DD27F.bb.netvision.net.il)
[22:14:21] *** Quits: ksf (ksf@moz-C69BC2EB.adsl.hansenet.de) (Quit: Leaving)
[22:16:47] *** Joins: Amaranthus (travis@moz-F81BB56A.cpe.cableone.net)
[22:16:56] *** Quits: Amaranthus (travis@moz-F81BB56A.cpe.cableone.net) (Quit: Linkinus - http://linkinus.com)
[22:17:33] *** Quits: Amaranth (travis@moz-D359BBDD.sxct.qwest.net) (Connection reset by peer)
[22:19:04] *** Quits: vmx (vmx@8155E38.294C4FB6.EBB03D7A.IP) (Ping timeout)
[22:21:56] *** Quits: pcwalton (pcwalton@moz-BE33DA21.fw1.sfo1.mozilla.net) (Ping timeout)
[22:23:36] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[22:27:53] *** Parts: reuben (reuben@moz-DB4A9C19.scl3.mozilla.com) (Textual IRC Client: www.textualapp.com)
[22:29:03] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[22:30:05] *** Quits: ianj (ianjneu@moz-7140CF01.ccs.neu.edu) (Quit: leaving)
[22:30:30] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[22:31:22] *** Joins: vmx (vmx@8155E38.294C4FB6.EBB03D7A.IP)
[22:31:34] *** Quits: eatkinson (eatkinson@moz-397CFE61.airbears2.berkeley.edu) (Quit: eatkinson)
[22:31:53] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[22:32:50] *** sam113101 is now known as sam113101_afk
[22:33:11] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[22:33:46] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[22:35:11] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[22:38:59] *** Quits: sebcrozet (sebcrozet@moz-2517AE39.w80-13.abo.wanadoo.fr) (Quit: Gone)
[22:39:17] *** Joins: Amaranth (travis@moz-D359BBDD.sxct.qwest.net)
[22:41:15] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[22:41:31] *** Quits: lfox (lfox@moz-343B6F0C.nyc.biz.rr.com) (Quit: ZZZzzz…)
[22:43:51] *** Quits: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[22:46:06] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[22:46:22] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[22:47:17] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[22:47:38] *** Joins: eatkinson (eatkinson@moz-392601D4.lightspeed.sntcca.sbcglobal.net)
[22:52:36] *** Parts: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) ()
[22:57:28] *** Joins: skeet70 (skeet70@moz-DB50BE3F.bzm-mt.client.bresnan.net)
[22:58:42] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[22:58:53] *** Quits: donri (donri@moz-9BB61102.tbcn.telia.com) (Client exited)
[22:59:12] *** Joins: atul_ (chatzilla@80CD12EB.CDE2649A.C842849F.IP)
[22:59:20] *** Quits: huseby (huseby@19BD73A1.5D8BCA3A.A0C1B52F.IP) (Quit: Leaving)
[23:00:20] *** Quits: KENZ (Mibbit@moz-8933D851.ppp-bb.dion.ne.jp) (Quit: http://www.mibbit.com ajax IRC Client)
[23:01:56] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[23:02:06] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[23:02:34] *** Joins: vodik (simon@moz-2D668626.cpe.net.cable.rogers.com)
[23:02:36] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[23:03:18] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.2)
[23:06:13] *** Joins: lkuper_ (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[23:06:35] <kmc> what could cause 'assertion failed: !borrow_list.is_empty()', src/libstd/rt/borrowck.rs:221 ?
[23:07:44] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[23:08:29] *** Quits: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net) (Client exited)
[23:08:35] <Jesse> https://github.com/mozilla/rust/issues/8675 ?
[23:09:49] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[23:11:24] <kmc> haha, thanks Jesse and thanks me 2 months ago
[23:11:41] <Jesse> hehe
[23:11:51] *** sam113101_afk is now known as sam113101
[23:15:00] *** Quits: eatkinson (eatkinson@moz-392601D4.lightspeed.sntcca.sbcglobal.net) (Quit: eatkinson)
[23:15:41] <jeffdb> could someone enlighten me as to what this compiler error might be saying: 
[23:15:44] <jeffdb> error: mismatched types: expected `@mut std::option::Option<Node<T>>` but found `@mut std::option::Option<Node<T>>` (expected type parameter but found type parameter)
[23:15:55] <jeffdb> I can post code if anyone wants it
[23:16:43] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[23:17:01] <kmc> yeah that would be useful
[23:17:26] <benh> My bet is on impl<T> blah { ... fn blah<T>... 
[23:17:45] <benh> or maybe hygiene, somehow
[23:18:02] <kmc> my first guess is the former yeah
[23:18:09] *** Joins: crembo (crembo@moz-C2B364AA.vc.shawcable.net)
[23:18:33] <jeffdb> https://gist.github.com/JeffBelgum/7034013
[23:18:43] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[23:18:47] <jeffdb> it's complaining about line 19
[23:18:52] <benh> \o/
[23:18:58] <jeffdb> benh: sounds like what you are saying
[23:19:00] <kmc> yeah what benh said :)
[23:19:01] *** Quits: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com) (Input/output error)
[23:19:14] <benh> you can probably just remove the <T: Clone> in line 17
[23:19:44] <benh> but we really should, like, fix that error message ;)
[23:19:57] *** Joins: eatkinson (eatkinson@moz-392601D4.lightspeed.sntcca.sbcglobal.net)
[23:20:28] <jeffdb> Thanks guys. hehe, it's not very helpful. So the fn blah<T> is implied?
[23:20:34] *** Joins: andrew-d_w (andrew-d_w@3D890366.5FA265D1.30850A2D.IP)
[23:20:42] <benh> it's already generic from the impl<T>
[23:21:01] <andrew-d_w> So, random question - anyone know why I can't read a file like this?  https://gist.github.com/andrew-d/22c630cacb5a1326eff0
[23:22:08] <jeffdb> you have to use std::rt::io:Reader;
[23:22:29] *** Quits: ozten (ozten@19BD73A1.5D8BCA3A.A0C1B52F.IP) (Ping timeout)
[23:24:06] <strcat> ummm, why exactly do we have these hash_keyed_n functions?
[23:24:15] *** Joins: nwmcsween (nwmcsween@E0025B86.51EE1362.3655BBF5.IP)
[23:24:49] *** Quits: eholk (eholk@moz-BA312F07.crest.iu.edu) (Quit: eholk)
[23:25:07] *** Quits: alan (alan@moz-FE02DD30.sat6.rackspace.com) (Quit: alan)
[23:26:01] *** Joins: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com)
[23:27:19] <jeffdb> andrew-d_w: sorry meant "use std::rt::io::Reader;"
[23:28:22] <andrew-d_w> jeffdb: Ah, thanks
[23:29:03] <benh> jeffdb: I stole your code for https://github.com/mozilla/rust/issues/9914, hope that's ok :)
[23:29:34] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[23:29:39] *** Quits: skeet70 (skeet70@moz-DB50BE3F.bzm-mt.client.bresnan.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[23:29:47] <jeffdb> benh: well that's fine. It has other bugs in it (on my end) that break it though
[23:30:37] <benh> mhm, I suppose
[23:30:43] <benh> those darn @-ptrs
[23:31:07] *** jorendorff is now known as jorendorff_away
[23:31:16] *** Joins: Guest_ (textual@moz-7D72AF75.rev.vodafone.pt)
[23:31:27] *** Guest_ is now known as jxs
[23:32:29] <ChrisMorgan> jack: thanks for the rust-http fix, that saved me spending time doing it myself which I should be using to do other things :-)
[23:32:46] <benh> gee, was Send the kind for "doesn't have borrowed pointers" or was there a narrower one
[23:33:08] <benh> 'static!
[23:33:18] <jeffdb> yeah, that's one thing.
[23:34:01] *** sam113101 is now known as sam113101_afk
[23:34:03] *** Quits: jordyd (jordyd@moz-F459C4AF.seg33.ucf.edu) (Ping timeout)
[23:34:07] <ChrisMorgan> jack: you can now commit to chris-morgan/rust-http
[23:34:08] <benh> Can you just match against Some(_) and then set next to self.head?
[23:34:21] <benh> I'm not properly visualizing your whole list type right now :i
[23:34:29] <jeffdb> lol. I'm not either
[23:35:03] *** Joins: tautologico (shung@703660AA.CFE755C8.C27E1635.IP)
[23:36:34] <andrew-d_w> Hum, fun thing: I get a compiler task failure when compiling the code I linked above.  "error: linking with `cc` failed with code 1"
[23:37:14] <andrew-d_w> Also:
[23:37:14] <andrew-d_w> note: task '<unnamed>' failed at 'failure in execvp: No such file or directory', /.../rust/src/libstd/rt/io/native/process.rs:
[23:37:20] <Luqman> dbaupp: oh yea, what was the hilight for last night?
[23:37:30] <andrew-d_w> If someone has a moment, would you mind confirming?
[23:38:09] *** Joins: lfox (lfox@moz-B8648F0F.nycmny.fios.verizon.net)
[23:40:23] <jeffdb> benh: I've updated that gist if you want compiling code for the issue... https://gist.github.com/JeffBelgum/7034013
[23:40:35] *** Quits: avsej (avsej@D9A610B8.4841F515.FB33447D.IP) (Ping timeout)
[23:40:45] <jeffdb> no guarantees it is "good" code in any sense of the word....
[23:40:50] *** Quits: Jesin (Jessin_@moz-9BB5F6CF.cc.lehigh.edu) (Ping timeout)
[23:40:55] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[23:42:22] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[23:42:50] <benh> jeffdb: I think I'll just go with a minimal example instead
[23:43:05] <strcat> I guess I'll write a new siphash implemented based on a streaming iterator...
[23:43:05] *** Joins: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com)
[23:43:07] <jeffdb> kk
[23:43:09] <strcat> implementation*
[23:43:21] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[23:43:23] <strcat> it's somewhat ridiculous how slow our hash tables are, not sure exactly why ;\
[23:43:42] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[23:44:34] *** Joins: ercxx (ercan@moz-7CFF3469.dyn.optonline.net)
[23:44:46] <mcpherrin> Is there an example of a bitstream iterator where you can read varying sized ints out of it?
[23:44:50] <pcmattman> is it a known thing that latest git master for rust doesn't build, or am I doing something wrong?
[23:44:53] <mcpherrin> dunno if anybody has done something like that.
[23:45:06] <benh> pcmattman: are you hitting that rusti thing?
[23:45:23] <pcmattman> src/rust/src/libstd/rt/borrowck.rs:180:34: 180:63 error: mismatched types: expected `fmt::rt::Count` but found `fmt::parse::Count<>` (expected enum fmt::rt::Count but found enum fmt::parse::Count)
[23:45:37] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[23:45:39] <benh> that's not the rusti thing
[23:45:41] <pcmattman> (is this a #rust-internals thing, perhaps?)
[23:45:51] <benh> it's fine in either place
[23:46:31] <strcat> I'm not sure how that made it through bors
[23:46:34] <strcat> I guess it doesn't full clean
[23:46:44] *** Joins: rveach (kvirc@moz-7E54B3A2.hsd1.ca.comcast.net)
[23:48:03] *** Quits: bent (chatzilla@C36F5748.8CE62E0F.A36C57B9.IP) (Ping timeout)
[23:48:32] *** Joins: bent (chatzilla@C36F5748.8CE62E0F.A36C57B9.IP)
[23:48:39] <pcmattman> I tried a make clean just in case, not done a distclean yet
[23:48:53] *** sam113101_afk is now known as sam113101
[23:49:12] <pcmattman> which is good because that's not actually a target :)
[23:49:46] <strcat> pcmattman: I sent in another fix for it since the one bundled in another PR failed https://github.com/mozilla/rust/pull/9915
[23:49:47] <benh> there's, like, clean-llvm or something but I usually just nuke my separate build directory and then curse myself when it takes forever to build again
[23:49:48] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[23:49:54] <strcat> bors will find it soon and it will be fixed in an hour
[23:50:13] <strcat> I just missed that line in my pull request removing it
[23:50:41] <strcat> anyway back to making siphash faster ;p
[23:50:44] * pcmattman applies that change manually and runs build
[23:53:05] <benh> mhm, i guess that other pull request that i thought fixed this didn't make it through bors
[23:53:07] <strcat> hashing a 16-byte key with this pure C siphash implementation takes 60ns
[23:53:10] <strcat> :|
[23:53:18] <strcat> benh: yeah it was bundled with another commit and failed
[23:53:38] <strcat> it's a one line fix so I just sent in another 
[23:53:56] <benh> i'm not sure how the rusti target in the makefile caused that error pcmattman pasted tho
[23:54:08] <benh> i thought i just jumped the gun blaming rusti
[23:54:11] <strcat> but yeah..... it doesn't seem great that hashing a 16 byte string takes as long as 3.5 16-byte allocations from jemalloc
[23:54:14] <strcat> :|
[23:54:25] <strcat> our implementation is slower
[23:54:38] <pcmattman> benh: I can confirm applying that patch doesn't fix the build
[23:55:29] <strcat> pcmattman: where does the build fail for you?
[23:55:31] <strcat> it still works fine here
[23:56:39] <strcat> pcmattman: you also need to ./configure again afaik
[23:56:51] <pcmattman> early, it builds librustrt, libmorestack, and then attempts to build libstd and that's where things go sour
[23:57:06] <strcat> what error message do you get though?
[23:58:33] *** Joins: Jesin (Jessin_@moz-76F15F40.cc.lehigh.edu)
[23:59:15] <pcmattman> strcat: things like http://slexy.org/view/s2Gmk3lsqS
[23:59:34] <pcmattman> basically exclusively that 'expected fmt::rt::Count' error
[23:59:52] <strcat> pcmattman: did you run configure again?
[23:59:56] *** Quits: brendan (brendaneic@moz-F2813A2B.hfc.comcastbusiness.net) (Quit: brendan)
