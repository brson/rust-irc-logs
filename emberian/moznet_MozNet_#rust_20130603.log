[00:01:45] <nmatsakis> aatch: trans is bad, but it's not as bad as all that. it's got some good parts. the adt stuff jld put in is lovely. :)
[00:02:09] <aatch> nmatsakis, to fair I haven't looked at adt
[00:02:11] <nmatsakis> but it's definitely got some sharp edges that need to be reworked.
[00:02:16] <nmatsakis> methods and match code come to mind.
[00:02:25] <nmatsakis> I'm hoping we'll get to methods very soon.
[00:02:33] <nmatsakis> keep meaning to write up my plans on that
[00:02:34] <aatch> but the core of it is a mission and a half to slog through
[00:02:40] <mark_edward> how com rustc doesn't produce intermediate *.o files?
[00:03:00] <cmr> mark_edward: because the complation unit is a crate, there isn't a per-source-file .o to make
[00:03:02] <aatch> mark_edward, well there would only be one
[00:03:11] <cmr> mark_edward: you can use --save-temps though
[00:03:16] <nmatsakis> what I really want to do is rewrite it to not be based on the AST...
[00:03:21] <nmatsakis> ...but that's a long-term goal.
[00:03:23] <mark_edward> oh ok, so if anything in a crate is changed the whole thing is rewritten
[00:03:29] <mark_edward> *recompiled
[00:03:30] <cmr> unfortunately, yes.
[00:03:31] <aatch> nmatsakis, what would it be based on instead?
[00:03:31] <nmatsakis> ...and one I'm not sure everyone else on the team shares :)
[00:03:47] <nmatsakis> aatch: I would like to convert from the AST to a control-flow-graph shortly after typeck, and use that for borrowck / trans / a few other things
[00:03:57] <strcat> nmatsakis: it's generally great after optimization but our pre-optimization code is really terrible compared with clang's
[00:04:02] <strcat> we generate 10-20x as much 
[00:04:33] <strcat> seems like there would be big compile-time wins just from looking at some simple examples and reducing the little windy label/cast routes we make
[00:04:41] <nmatsakis> strcat: I am aware, I'm not defending its output.
[00:05:25] <aatch> there needs to be some more smarts around glue code
[00:05:34] <nmatsakis> I've been spending the last few days trying to get let patterns to work,
[00:05:42] <nmatsakis> it is *amazing* the quantity of crap we generate, 
[00:05:44] <nmatsakis> believe me I know.
[00:05:53] <nmatsakis> Though replacing all the inline(always) with inline helped a lot
[00:05:55] <strcat> nmatsakis: are let patterns considered the same as the one in fn signatures?
[00:06:02] <strcat> ones*
[00:06:08] <strcat> as in same codepath
[00:06:09] <nmatsakis> strcat: yes, all the same code. I've got it about 75% working now, but still some bug
[00:06:16] <nmatsakis> strcat: I've also integrated it with borrowck
[00:06:22] <nmatsakis> strcat: so we actually check that you don't do bad things
[00:06:26] <nmatsakis> strcat: which we currently just...don't do.
[00:06:26] <aatch> nmatsakis, hey, at least dead prototypes are always stripped, even with optmizations off, now
[00:06:35] <strcat> nmatsakis: well, it will be nice to have that working :)
[00:06:40] <strcat> it's one of the rough edges I often run into
[00:06:50] <nmatsakis> strcat: yeah, hopefully very soon, if I can force myself to trace through more LLVM bytecode and figure out where this double free is coming from.
[00:07:11] <nmatsakis> strcat: incidentally, my first version was very simple, but it generated so many alloca temporary I couldn't even read the non-optimzied output at all
[00:07:15] <nmatsakis> strcat: so I had to fix that :)
[00:07:25] <nmatsakis> strcat: now it does an ok job.
[00:07:44] <cmr> we really need a few clones of you, nmatsakis
[00:07:48] <aatch> nmatsakis, I've seen that one. It's incredible the sheer numbers of alloca's you get
[00:08:07] <nmatsakis> aatch: you mean in the match code?
[00:08:15] * strcat is happy swaps don't output equality comparisons anymore ;p
[00:08:16] <aatch> nmatsakis, in most code.
[00:08:19] <nmatsakis> :)
[00:08:29] <nmatsakis> strcat: but omg how much code they DO output.
[00:08:33] <nmatsakis> strcat: pre-optimization, anyhow.
[00:08:39] *** Quits: thomaslee_ (thomaslee@moz-306D3DF4.hsd1.or.comcast.net) (Quit: Leaving)
[00:08:40] <nmatsakis> I don't really get where some of it comes from.
[00:08:51] <strcat> nmatsakis: yeah, I got it to the same IR as clang post-optimization though from using memcpy in the &mut one
[00:08:58] *** Quits: dew (Instantbir@moz-66796D51.dhcp.stls.mo.charter.com) (Ping timeout)
[00:09:01] <strcat> we just make really strange chains of casts
[00:09:22] <nmatsakis> yes, I would like it if we casted less.
[00:10:42] <aatch> nmatsakis, the hilarious thing is that not all of the casts are valid, especially around the glue code.
[00:10:47] <strcat> at least rust compiles faster than haskell ;p
[00:10:50] *** Joins: tjc (tjc@moz-42A31148.hsd1.wa.comcast.net)
[00:10:50] *** ChanServ sets mode: +o tjc
[00:11:01] <aatch> the LLVM lint pass hates the glue code
[00:12:48] *** Joins: ssbr (ssbr@moz-F4C1E66D.dsl.bell.ca)
[00:14:19] *** Joins: wuwei`lab (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[00:15:19] <SingingBoyo> What's the best way to make a system call and get whatever it outputs to stdout?
[00:15:42] <aatch> SingingBoyo, look in std::run
[00:15:56] *** Quits: nooy (user@moz-2458675D.a146.priv.bahnhof.se) (Connection reset by peer)
[00:16:12] <SingingBoyo> aatch: which is now extra::run, right?
[00:16:20] <aatch> SingingBoyo, not sure...
[00:16:27] <strcat> no it was core::run before
[00:16:28] <aatch> It's in one of them.
[00:16:35] <strcat> rusti: print(std::str::from_bytes(std::run::process_output("ls", [~"-l", ~"/"]).output))
[00:16:41] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/USLY
[00:16:49] <aatch> strcat, glad I'm not going insane...
[00:17:07] <steven_is_false> I'm using Phantom Types to emulate Type State to safely wrap OpenGL but my wrapping seems kind of crufty. Are there any practical alternatives to Phantom Types for enforcing invariants on my code?
[00:17:16] <nmatsakis> aatch: what is LLVM lint? I guess just what it sounds like?
[00:17:20] <nmatsakis> aatch: didn't know about that.
[00:17:29] <nmatsakis> steven_is_false: I guess it depends on the invariant?
[00:17:32] <SingingBoyo> ah kk.  weird I thought the docs were based off  0.6, and they have it under std::run.  ah well
[00:17:36] <cmr> nmatsakis: -Z lint-llvm :)
[00:17:43] *** Joins: nooy (user@moz-2458675D.a146.priv.bahnhof.se)
[00:17:49] <nmatsakis> cmr: neat.
[00:17:51] <cmr> SingingBoyo: it's only based off 0.6 if 0.6 is in the URI
[00:18:00] <aatch> nmatsakis, it generally just finds undefined behaviour
[00:18:31] <aatch> nmatsakis, I added it when I was fiddling with optmization passes, since it was easy and there was a issue open for it
[00:18:32] *** Quits: MaikKlein (maik@moz-972D34E0.dip0.t-ipconnect.de) (Ping timeout)
[00:18:49] <nmatsakis> aatch: very nice.
[00:18:55] <nmatsakis> aatch: I'll give it a spin sometime,
[00:19:03] <nmatsakis> aatch: but I guess we gotta fix the glue stuff so it's happy with it
[00:19:24] <aatch> nmatsakis, well try it on any code that generates any glue at all.
[00:22:40] <Boreeas> rusti: print(std::str::from_bytes(std::run::process_output("lsb_release", [~"-a"]).output))
[00:22:42] -rusti- ()
[00:22:54] <Boreeas> Well that's disappointing
[00:23:20] <cmr> It's in a sandbox
[00:23:35] <strcat> it doesn't have lsb_release anyway
[00:24:49] <strcat> rusti: print(std::str::from_bytes(std::run::process_output("cat", [~"/etc/os-release"]).output))
[00:24:50] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/PgOa
[00:25:05] *** Quits: SimonSapin (simon@AC677AA0.72C1E24.8EDFB172.IP) (Ping timeout)
[00:26:50] <JesseH> How can I get rust syntax highlighting for gedit?
[00:27:12] <cmr> JesseH: https://github.com/mozilla/rust/tree/master/src/etc/gedit
[00:27:20] <JesseH> ty
[00:27:40] <strcat> maybe I should finish the zsh completion ;p
[00:29:57] <cmr> What is *const and where does it fit in with * and *mut?
[00:30:24] *** Joins: dew (Instantbir@moz-66796D51.dhcp.stls.mo.charter.com)
[00:30:30] <strcat> cmr: it can point at mutable memory
[00:30:38] <aatch> cmr, *const is pointer that may be mutable, but the callee wont modifiy data through it
[00:30:53] <strcat> ofc... Cell screws this all over.
[00:31:05] <aatch> it's a little anachronistic, so it might not stick around
[00:34:30] <claude> Is the difference between managed and owned boxes, the garbage collector that takes care of them? Where owned boxes are managed by the scope they are in and managed boxes are kept if something cares about them?
[00:34:56] <aatch> claude, close
[00:35:00] <strcat> claude: yes, owned boxes are just destroyed when their owner is (like a variable going out of scope)
[00:35:05] *** Quits: wuwei`lab (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Quit: Leaving)
[00:35:19] <heftig> managed boxes are garbage collected, you can have as many references as you want, and it's destroyed some time after the last reference vanishes
[00:35:23] <strcat> you can move ownership around so they can outlive a scope
[00:35:31] *** Parts: steven_is_false (user@moz-144077DE.bchsia.telus.net) (ERC Version 5.3 (IRC client for Emacs))
[00:35:32] <aatch> owned boxes can only have one owner, so when there are no owners, it dies
[00:35:36] <heftig> it's also local to the task, and cannot be moved between tasks
[00:35:51] *** Joins: k00mi (koomi@moz-ECD7DE60.pools.arcor-ip.net)
[00:37:21] *** Quits: koomi (koomi@moz-37293BFC.pools.arcor-ip.net) (Ping timeout)
[00:38:00] <claude> Okay. Is a task like a function?
[00:38:12] <cmr> No, it's like a thread.
[00:38:22] <cmr> (It *is* a thread, by all definitions except the OS one)
[00:38:45] <JesseH> Good god rust is taking forever to build lol
[00:38:50] <strcat> cmr: well if the OS defines things then linux has no threads or processes anyway ;p
[00:38:59] <strcat> only scheduled tasks
[00:39:01] <aatch> JesseH, well yeah. it does
[00:39:34] <aatch> it's actually gotten faster recently (though that's actually more of a fix of a regression)
[00:40:28] <JesseH> Not sure why, but it hasnt moved in a while.
[00:40:30] <JesseH> Might restart.
[00:40:42] <cmr> JesseH: are you swapping?
[00:40:47] <aatch> JesseH, how long is a "while"?
[00:40:54] <JesseH> 4 minutes
[00:41:03] <cmr> that's normal for some things
[00:41:07] *** Joins: jclements (jclements@BE2C733F.BE115975.BABD49BE.IP)
[00:41:08] <aatch> the full compile on a decent machine is ~20-30 mins
[00:41:18] <JesseH> Heh! I'm not on a decent machine.
[00:41:20] <aatch> With rustc often taking 4-5 mins
[00:41:23] * JesseH continues to wait.
[00:41:31] *** Quits: tjc (tjc@moz-42A31148.hsd1.wa.comcast.net) (Quit: zzzzzzzzzz)
[00:41:45] <JesseH> There should be games on the rust website, for people waiting on their build to finish ;P
[00:41:50] <aatch> JesseH, how do you think I felt trying to fix a *performance regression*
[00:42:02] <JesseH> lol
[00:42:14] <SingingBoyo> yeah it's long enough that half the time when I update I just fire off the compile when I go eat dinner.
[00:42:16] *** Joins: steven_is_false (user@moz-144077DE.bchsia.telus.net)
[00:42:29] <aatch> SingingBoyo, I'll often start one before bed.
[00:42:37] <aatch> Then come back to find it failed...
[00:42:46] <JesseH> LOL I love when that happens :/
[00:43:00] *** Quits: hjr3 (hradtke@54B05067.8A23C5CC.BCAEBB33.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[00:43:17] *** Joins: samx (sami@moz-62B7FC03.dyn.optonline.net)
[00:44:02] *** Quits: vosen (vosen@moz-266BA656.icpnet.pl) (Quit: Leaving)
[00:45:21] <SingingBoyo> so I'm sure I've seen the answer to this before, but can the main method be in a separate module that's 'included' using mod <modname> in the crate file?
[00:45:55] *** Joins: wilsonk-laptop (kvirc@moz-39EFBFC2.cg.shawcable.net)
[00:46:12] <aatch> SingingBoyo, I'm not sure about the exact rules, but I know that you can use the #[main] attribute to mark /any/ function as the main function
[00:46:31] *** Quits: wilsonk|2 (kvirc@moz-39EFBFC2.cg.shawcable.net) (Ping timeout)
[00:46:33] *** Quits: claude (Mibbit@moz-D29440D3.eastlink.ca) (Quit: http://www.mibbit.com ajax IRC Client)
[00:46:43] *** Joins: calatalee (Mibbit@moz-D29440D3.eastlink.ca)
[00:47:12] *** Quits: calatalee (Mibbit@moz-D29440D3.eastlink.ca) (Quit: http://www.mibbit.com ajax IRC Client)
[00:48:31] <nmatsakis> I wonder how bad things would break if I removed the Ignore mode from trans. It's such a pain.
[00:48:45] <nmatsakis> not really clear to me what it's optimizing.
[00:48:53] <SingingBoyo> rusti: type A = int; let x:A = 2; x
[00:48:53] <aatch> nmatsakis, Ignore mode?
[00:48:54] -rusti- 2
[00:49:12] <nmatsakis> aatch: yeah, when we translate expressions, one of the ways you can do it is by passing a destination, which can be ignore,
[00:49:18] <SingingBoyo> hmm so type aliases do exist.  Any way to alias a function type?
[00:49:19] <nmatsakis> aatch: in that case the expression is evaluated just for side-effects.
[00:49:25] <aatch> nmatsakis, oh right. I remember that.
[00:49:45] <nmatsakis> SingingBoyo: you can alias any type
[00:50:00] <aatch> SingingBoyo, type MyFunType = ~fn(int,int) -> f64
[00:50:29] *** Quits: EXetoC (ex@moz-2DBEB1E4.customer.t3.se) (Quit: WeeChat 0.4.1)
[00:50:30] <SingingBoyo> rusti: type A = ~fn(int) -> bool; let tryme = |x| {x > 2}; tryme(3)
[00:50:32] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/YELX
[00:50:51] <nmatsakis> aatch: I guess it's optimizing something like "foo();" where `foo` returns a value --- but in that case, we need a temp stack slot anyway, since the function doesn't know you're ignoring it's return value.
[00:50:55] <SingingBoyo> rusti: type A = ~fn(int) -> bool; let tryme:A = |x| {x > 2}; tryme(3)
[00:50:56] -rusti- true
[00:51:20] <nmatsakis> aatch: so i'm tempted to just rip it out so that every fn doesn't need to ask "oh, wait, am I ignoring my output or what?"
[00:51:50] <aatch> nmatsakis, I'm currently doing wrappers for LLVM and I'm not sure why that's in there. doesn't look like LLVM cares
[00:52:01] *** Quits: steven_is_false (user@moz-144077DE.bchsia.telus.net) (Ping timeout)
[00:52:21] <nmatsakis> aatch: you mean ignore mode? I think it's just a holdover from some bitrotted plan
[00:52:31] <aatch> nmatsakis, yeah, that makes the most sense
[00:54:28] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[00:55:06] <SingingBoyo> So how do you produce different exit values in rust.  can I just do return 1; in main or is there some exit(int) function somewhere?
[00:55:48] *** Joins: strcat1 (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[00:55:56] <strcat1> ugh, silly wifi
[00:56:05] *** Joins: rusti_ (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[00:56:07] <strcat1> rusti: std::os::set_exit_status(1)
[00:56:14] <strcat1> rusti_: std::os::set_exit_status(1)
[00:56:15] -rusti_- ()application terminated with error code 1
[00:56:20] <strcat1> oh well.
[00:56:28] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[00:56:33] *** strcat1 is now known as strcat
[00:56:35] *** Joins: ysuzuki (ysuzuki@moz-F333A8C8.st.keio.ac.jp)
[00:56:35] <mleise> error code even :)
[00:56:47] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[00:56:57] *** Quits: rusti_ (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[00:56:58] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[00:57:24] <strcat> rusti: ~[0, ..10000000000]
[00:57:25] -rusti- rust: task failed at 'assertion failed: p.is_not_null()', /build/rust-incoming-git/src/rust/src/libstd/rt/global_heap.rs:26
[00:57:25] -rusti- rust: domain main @0x1b571b0 root task failed
[00:57:25] -rusti- application terminated with error code 101
[00:57:30] <strcat> rusti: ~[0, ..10000000]
[00:57:35] -rusti- timeout triggered!
[00:57:42] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[00:57:42] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/5GDZXg
[00:57:42] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[00:57:43] <strcat> rusti: ~[5, ..100000000]
[00:57:44] -rusti- application terminated abnormally with signal 9 (Killed)
[00:57:45] *** Joins: steven_is_false (user@moz-144077DE.bchsia.telus.net)
[00:58:43] *** Quits: steven_is_false (user@moz-144077DE.bchsia.telus.net) (Client exited)
[00:58:44] *** Joins: aruniiird (arun@84E199D6.DCDBCF8E.83D0DF30.IP)
[01:07:07] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Quit: Leaving.)
[01:07:36] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[01:07:36] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Input/output error)
[01:09:50] *** cscottnet_away is now known as cscottnet
[01:10:26] *** Joins: adu (ajr@moz-96FE9B84.washdc.fios.verizon.net)
[01:17:48] *** Joins: tjc (tjc@moz-B867959A.redactedconsulting.com)
[01:17:48] *** ChanServ sets mode: +o tjc
[01:23:13] *** Joins: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[01:24:00] *** Quits: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP) (Ping timeout)
[01:26:30] <cmr> Any way to get the max_value of a c_int?
[01:26:48] <cmr> I don't think assuming it's an i32 and using core::i32::max_value is the right thing.
[01:28:48] <aatch> rusti: let a : std::libc::c_uint = std::num::Bounded::max_value(); a
[01:28:49] -rusti- 4294967295
[01:29:03] <cmr> hey that's neato!
[01:29:09] <aatch> rusti: let a : std::libc::c_uint = std::num::Int::max_value(); a
[01:29:10] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/KHMh
[01:29:30] <aatch> rusti: let a : std::libc::c_uint = std::num::Bounded::max_value(); a
[01:29:31] -rusti- 4294967295
[01:29:37] <aatch> rusti: let a : std::libc::c_ulonglong = std::num::Bounded::max_value(); a
[01:29:39] -rusti- 18446744073709551615
[01:30:07] <aatch> cmr, I've spend a long time figuring out how to use traits effectively lol.
[01:32:00] *** Quits: Axord (xord@moz-C3CCF156.lsanca.dsl-w.verizon.net) (Quit: I'm sure it's perfectly safe)
[01:32:06] <cmr> rusti: num::Bounded::max_value() as c_int
[01:32:07] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/HLBU
[01:32:13] <cmr> rusti: std::num::Bounded::max_value() as c_int
[01:32:14] -rusti- foo.rs:10:43: 10:48 error: use of undeclared type name `c_int`
[01:32:14] -rusti- foo.rs:10          std::num::Bounded::max_value() as c_int
[01:32:14] -rusti-                                                      ^~~~~
[01:32:14] -rusti- error: aborting due to previous error
[01:32:15] -rusti- application terminated with error code 101
[01:32:22] <cmr> rusti: std::num::Bounded::max_value() as std::libc::c_int
[01:32:24] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/ZOCF
[01:32:40] <cmr> oh wait
[01:32:41] <aatch> cmr, won't work because it doesn't know what the return type should be
[01:33:01] <cmr> rusti: std::num::Bounded::<std::libc::c_int>max_value()
[01:33:03] -rusti- foo.rs:10:46: 10:55 error: expected `;` or `}` after expression but found `max_value`
[01:33:03] -rusti- foo.rs:10          std::num::Bounded::<std::libc::c_int>max_value()
[01:33:03] -rusti-                                                         ^~~~~~~~~
[01:33:03] -rusti- application terminated with error code 101
[01:33:11] *** Quits: \n (NDesaulnie@moz-C2B49FFE.hsd1.ca.comcast.net) (Quit: \n)
[01:33:14] <cmr> rusti: std::num::Bounded<std::libc::c_int>::max_value()
[01:33:16] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/AWQD
[01:35:23] * cmr just uses a variable
[01:36:28] *** Quits: tjc (tjc@moz-B867959A.redactedconsulting.com) (Quit: Places to go, people to annoy)
[01:38:50] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[01:38:51] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[01:39:18] *** Joins: tjc (tjc@moz-B867959A.redactedconsulting.com)
[01:39:18] *** ChanServ sets mode: +o tjc
[01:39:27] *** Quits: tjc (tjc@moz-B867959A.redactedconsulting.com) (Quit: Places to go, people to annoy)
[01:43:15] *** Joins: z0w0 (zack@moz-B5D18119.lns1.woo.bigpond.net.au)
[01:47:47] *** Joins: MaikKlein (maik@moz-972D34E0.dip0.t-ipconnect.de)
[01:49:13] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[01:50:57] <MaikKlein> if I install rust I always get some errors like "multiple matching crates for `std`"
[01:51:03] <MaikKlein> because it installs it 2 times
[01:51:13] <MaikKlein> then I have to delete on of those libs 
[01:51:29] <MaikKlein> am I the only one with this problem?
[01:52:10] *** Quits: ysuzuki (ysuzuki@moz-F333A8C8.st.keio.ac.jp) (Client exited)
[01:52:19] <MaikKlein> https://gist.github.com/MaikKlein/5695734
[01:53:52] *** Joins: posco (oscarboyki@moz-121FFE47.hsd1.ca.comcast.net)
[01:54:43] *** Quits: posco (oscarboyki@moz-121FFE47.hsd1.ca.comcast.net) (Quit: posco)
[01:54:46] *** Joins: posco (oscarboyki@moz-121FFE47.hsd1.ca.comcast.net)
[01:56:18] *** Joins: lmandel (lmandel@FE1F74.86ED00A7.971E19F6.IP)
[01:56:35] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[01:56:40] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[01:56:51] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[01:57:00] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[01:57:03] <aatch> bjz, ping
[01:57:26] <bjz> pong
[01:57:45] <aatch> So i've managed to get quite a bit of LLVM wrapped now.
[01:57:58] <bjz> MaikKlein: make uninstall
[01:58:02] *** Quits: balpert (alpert@moz-B247840C.hsd1.ca.comcast.net) (Quit: balpert)
[01:58:09] <bjz> MaikKlein: then make install
[01:58:14] <bjz> aatch: neat!
[01:58:27] <aatch> I'm going to see if I can get rusp to use it.
[01:58:43] <aatch> I've "only" done the core stuff atm
[01:58:52] *** Quits: k00mi (koomi@moz-ECD7DE60.pools.arcor-ip.net) (Ping timeout)
[01:59:09] <aatch> but given that it includes the instruction builder, which my wrappers clock at...
[01:59:24] <aatch> 895 lines and it's not even complete.
[01:59:48] *** Joins: carter (carter@moz-12C317EF.nyc.res.rr.com)
[01:59:49] *** Quits: Sorella (queen@B12A78F5.BA14766C.95C8B7C6.IP) (Quit: (quit))
[01:59:57] <MaikKlein> bjz: thanks
[02:00:30] <aatch> So I'm going to try to do a AST->IR conversion to start with.
[02:01:00] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Client exited)
[02:01:03] <MaikKlein> btw if I spawn 80k tasks and send a message to 80k tasks it takes around 8 secs. If I increase the number to 90k it takes 36 secs
[02:01:20] <MaikKlein> seems a little bit odd
[02:01:42] <aatch> MaikKlein, is it spike, or exponential?
[02:01:50] <bjz> aatch: awesome. yeah I need to get back to it. lots of things on the go atm
[02:02:00] <bjz> aatch: relatively speaking
[02:02:14] <MaikKlein> aatch: it grows exponential
[02:02:26] <bjz> aatch: keeping libs up to date etc. working on std
[02:02:28] <aatch> MaikKlein, ah, then it's an algorithm issue.
[02:02:39] <aatch> bjz, I know the feeling.
[02:03:54] <aatch> bjz, this is what the wrapper looks like atm: https://github.com/Aatch/llvm-rs
[02:03:59] <aatch> No comments!
[02:04:02] <aatch> :D
[02:04:14] <bjz> aatch: it's good though, when you get bored of one thing, you have something else to try
[02:05:30] <bjz> aatch: nice. ideomatic wrapper?
[02:05:45] <aatch> bjz, I'm trying
[02:06:28] <bjz> aye. it's a fun thing to try
[02:06:34] <bjz> :)
[02:06:41] <aatch> Though my main focus is trying to get a bit more type-safety in
[02:06:46] <bjz> ahh yea
[02:06:55] <bjz> that's the most important thing
[02:07:10] <SingingBoyo> is there a way to have a closure return itself?
[02:07:24] <bjz> aatch: get rid of much of the unsafes and transmutes
[02:07:43] <aatch> bjz, hmm what?
[02:07:55] <bjz> aatch: ie. from the cleant code
[02:08:18] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[02:08:18] <aatch> bjz, Oh right.
[02:08:23] <SingingBoyo> rusti: type A = ~fn(~str) -> A; let someClosure = |x| {io::println(x); someClosure};  someClosure(~"Foo")
[02:08:24] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/IKYb
[02:08:26] <bjz> aatch: wrap it once and keep it contained. ie. what you're doing
[02:08:44] <SingingBoyo> rusti: type A = ~fn(~str) -> A; let someClosure = |x| {std::io::println(x); someClosure};  someClosure(~"Foo")
[02:08:45] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/abFg
[02:09:30] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[02:09:37] <aatch> The main issue is that the C-bindings exposes like 5 different types, but there are a tonne of functions that can only be called on some unknown subtype
[02:09:47] <bjz> aatch: ugh
[02:10:05] <aatch> It's easy enough to track the type though, which is what I have.
[02:10:10] <bjz> aatch: btw: https://github.com/mozilla/rust/issues/6894
[02:10:43] <bjz> if you were interested in showing use-cases
[02:12:27] <aatch> bjz, yeah, I think I'm actually more after default methods
[02:12:34] <bjz> ahh ok
[02:13:10] <aatch> rusp, step one, fix imports...
[02:13:11] <aatch> sigh
[02:13:22] <bjz> ahh, you want me to do that?
[02:13:25] <bjz> sorry
[02:13:29] <aatch> bjz, nah, I'll do it
[02:13:52] <bjz> it would be nice to get rusp looking a little more elegant
[02:14:04] *** Quits: MaikKlein (maik@moz-972D34E0.dip0.t-ipconnect.de) (Ping timeout)
[02:14:16] <bjz> it's a little bit hodge-podge atm, but at least it works
[02:15:29] <bjz> I just don't want it to be something like PHP, a random assortment of features the designers like, put together in a haphazard way
[02:15:45] <bjz> :)
[02:15:57] <aatch> bjz, fair enough lol
[02:16:18] *** Quits: snearch (snearch@moz-20D9F6B4.pool.mediaways.net) (Quit: Verlassend)
[02:16:19] <bjz> heh
[02:16:34] <aatch> Have you any preference on the typing discipline?
[02:19:24] <Ralith> bjz: have you fixed the representation?
[02:21:11] <bjz> aatch: I'm thinking we shouldn't do type inference or promotion
[02:21:35] <aatch> bjz, ok, so strong, dynamic typing?
[02:21:47] <bjz> aatch: yeah, I think so
[02:22:00] <aatch> Good lol, that's what I was thinking too.
[02:22:38] *** Joins: deepdog (deepdog@moz-490E834C.client.mchsi.com)
[02:22:49] *** Joins: joebobjoe (joebobjoe@55F2E07A.7F841963.2213276E.IP)
[02:23:19] <bjz> Ralith: We're thinking we're going to go with a more Clojure style, ie. list operations manipulate collections, not cons cells. We're not claiming to be a lisp any more.
[02:23:29] <JesseH> Where are those speed benchmarks located again?
[02:23:40] <Ralith> shame
[02:23:43] <bjz> http://clojure.org/lisps
[02:23:50] <aatch> JesseH, src/tests/bench
[02:23:51] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Client exited)
[02:23:54] <JesseH> Thanks
[02:24:29] *** Joins: SimonSapin (simon@moz-C286AD9A.bitcat.net)
[02:24:57] <Ralith> judging from git you have indeed fixed the representation, though, so that's good
[02:25:17] <bjz> Ralith: yeah, we really appreaciate your input on that
[02:25:30] <bjz> Ralith: we have much to clean up though
[02:25:47] <Ralith> you should implement shutt fexprs
[02:25:53] <Ralith> you're already halfway there
[02:26:10] <aatch> Hmm, I think I might clean up the parser...
[02:26:21] <bjz> aatch: that would be amazing
[02:26:30] <aatch> ideally you should get straight to an AST
[02:26:34] <aatch> not a token tree.
[02:26:34] <bjz> Ralith: btw, should macros be lexically or dynamically scoped?
[02:27:08] <Ralith> bjz: your terminology is confused; macros have lexical scope, but you're thinking about the semantics of their *expansions*
[02:27:19] <bjz> Ralith: http://en.wikipedia.org/wiki/Fexpr
[02:27:22] <bjz> ?
[02:27:38] <bjz> Ralith: cool, good to know I have things confused :)
[02:28:08] <bjz> Ralith: as in, not good
[02:28:16] <Ralith> the easy approach is to trivially expand them, which can result in name confusion
[02:28:37] <bjz> Ralith: I think I get you
[02:28:40] <jclements> Ralith: yes, hygiene coming soon. Must work faster.
[02:28:46] <bjz> *understand
[02:29:02] <bjz> jclements: we're talking about rusp :)
[02:29:09] <Ralith> it's tricky to implement hygiene without reducing expression or adding gratuitous complexity
[02:29:16] <Ralith> but you can avoid that problem entirely by using shutt fexprs
[02:29:25] <bjz> Ralith: neat
[02:29:27] <jclements> bjz: glad to hear it.
[02:29:43] <Ralith> the problem with shutt fexprs is that they're hard to compile
[02:29:47] <bjz> jclements: hehe, why's that?
[02:29:47] <Ralith> but you're writing an interpreter, so.
[02:29:51] <jclements> Ralith: fexprs combine language levels in an icky way. I'm speaking as a Schemer here, of course :).
[02:30:08] *** Quits: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net) (Quit: eatkinson)
[02:30:20] <Ralith> jclements: with shutt fexprs, you don't *have* distinct levels.
[02:30:29] <Ralith> save read-time, I suppose
[02:30:32] <jclements> Ralith: agreed. That's the issue. 
[02:30:38] <Ralith> why is that necessarily an issue?
[02:30:54] * bjz remembers that jclements is a racketeer
[02:31:04] <jclements> indeed.
[02:31:09] <Ralith> it's much harder to implement well, certainly, but it confers great expressivity
[02:31:46] <bjz> jclements: me and dbaupp are incompetantly messing around with an sexpr scripting language
[02:31:51] <bjz> :)
[02:31:55] <jclements> I don't want to argue, but I guess I do want to say that where macros are concerned, expressiveness is not the difficult part. Creating a system that does what you expect it to, is.
[02:31:58] <Ralith> and if you're settling for an interpreted language *anyway* then it's trivial to implement and you get a boatload of expressiveness
[02:32:16] <Ralith> jclements: I don't mean to argue; I'm interested in hearing other perspectives here
[02:32:32] <bjz> jclements: well, I'll speak for my own incompetance, dbaupp is much better :)
[02:32:36] <Ralith> I've used shutt fexprs in practice and I find they're immensely intuitive compared to conventional macros
[02:32:36] <aatch> I'm not convinced that we should completely forgo the ability to compile it though
[02:33:08] <bjz> aatch: yeah
[02:33:09] <aatch> (though I'm certainly ok with having a "compilable" subset)
[02:33:46] <Ralith> yeah, it's quite feasible to do that
[02:34:08] <bjz> jclements: aatch is interested in jitting it
[02:34:15] *** Quits: zz_kimundi (kimundi@moz-D4550336.dip0.t-ipconnect.de) (Ping timeout)
[02:34:59] <aatch> though it is possible to have it be JIT compiled, without it being able to be natively compiled
[02:35:09] <bjz> aatch: mm
[02:36:36] <bjz> aatch: so long as it can be reloaded while the rust program is running, to allow for quick iteration
[02:37:06] <bjz> I think?
[02:37:17] <aatch> bjz, yeah, should be possible
[02:37:18] *** Joins: zz_kimundi (kimundi@moz-E8D1DF71.dip0.t-ipconnect.de)
[02:37:36] <aatch> the execution engine allows you to over-write and recompile functions
[02:37:40] *** zz_kimundi is now known as kimundi
[02:38:17] <bjz> you mean some sort of shadowing?
[02:38:30] <aatch> bjz, no, more like redefinition
[02:38:37] <bjz> ahh ok
[02:39:43] <bjz> aatch: see I wonder if it would be better to aim for some kind of jittable meta language, that you can then write something like rusp in
[02:39:43] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[02:39:56] <bjz> aatch: but maybe I'm over-complicating things
[02:39:58] *** Quits: lmandel (lmandel@FE1F74.86ED00A7.971E19F6.IP) (Quit: lmandel)
[02:40:29] <aatch> I have some idea of how to get this to work. It does rely on my understanding being correct, but I don't think it will be too hard to do.
[02:40:55] <bjz> meh, we're all learning here :)
[02:43:04] *** Quits: joebobjoe (joebobjoe@55F2E07A.7F841963.2213276E.IP) (Quit: Textual IRC Client: www.textualapp.com)
[02:43:15] *** Quits: RMF (RMF@68B6AD91.A3D80C3C.8D19547B.IP) (Ping timeout)
[02:43:40] *** Joins: Axord (xord@moz-C3CCF156.lsanca.dsl-w.verizon.net)
[02:43:55] *** Joins: RMF (RMF@68B6AD91.A3D80C3C.8D19547B.IP)
[02:46:11] *** Quits: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk) (Connection reset by peer)
[02:46:27] *** Quits: jrfeenst (jrfeenst@1B4E3DBD.8A7F2529.1CD399FA.IP) (Quit: jrfeenst)
[02:51:26] *** Joins: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk)
[02:52:06] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[02:53:24] *** Quits: aruniiird (arun@84E199D6.DCDBCF8E.83D0DF30.IP) (Ping timeout)
[02:53:50] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[02:56:37] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[02:56:45] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[02:58:02] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[03:08:23] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.1)
[03:13:42] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[03:14:46] *** Quits: wilsonk-laptop (kvirc@moz-39EFBFC2.cg.shawcable.net) (Ping timeout)
[03:14:58] *** Joins: wilsonk-laptop (kvirc@moz-39EFBFC2.cg.shawcable.net)
[03:16:33] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[03:19:30] *** Quits: adu (ajr@moz-96FE9B84.washdc.fios.verizon.net) (Quit: adu)
[03:20:25] *** Quits: RMF (RMF@68B6AD91.A3D80C3C.8D19547B.IP) (Client exited)
[03:20:45] *** Joins: RMF (RMF@68B6AD91.A3D80C3C.8D19547B.IP)
[03:25:33] *** Quits: jclements (jclements@BE2C733F.BE115975.BABD49BE.IP) (Quit: jclements)
[03:26:32] *** Quits: cscottnet (cscott@moz-2577C94A.net) (Ping timeout)
[03:33:21] *** Quits: devbug (quassel@moz-E1DE087C.bchsia.telus.net) (Ping timeout)
[03:34:19] *** Quits: samx (sami@moz-62B7FC03.dyn.optonline.net) (Quit: Leaving)
[03:35:26] *** Joins: ysuzuki (ysuzuki@moz-A563888C.ics.keio.ac.jp)
[03:37:04] *** Joins: johnmurray (jmurray@B18D9D41.1781649A.A0D3DFE2.IP)
[03:37:10] *** Quits: johnmurray (jmurray@B18D9D41.1781649A.A0D3DFE2.IP) (Quit: johnmurray)
[03:37:14] *** Joins: johnmurray (jmurray@B18D9D41.1781649A.A0D3DFE2.IP)
[03:38:11] <johnmurray> Is there any good documentation on the unit-test features in Rust?
[03:38:35] <aatch> https://github.com/mozilla/rust/wiki/Doc-unit-testing
[03:39:09] <johnmurray> aatch: Awesome. Thanks!
[03:43:20] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[03:45:33] *** Joins: \n (NDesaulnie@moz-C2B49FFE.hsd1.ca.comcast.net)
[03:46:14] *** Joins: brson (brson@E9CDE21E.991753BB.CA4D1600.IP)
[03:46:14] *** ChanServ sets mode: +o brson
[03:47:40] <johnmurray> any idea how io::println is handled within tests? I can't seem to get any output to debug one of my tests.
[03:47:50] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[03:47:59] <aatch> johnmurray, it should work fine.
[03:48:07] <SingingBoyo> johnmurray: should output normally, though it might be mixed in with the output from the test runner
[03:48:45] <johnmurray> hmmâ€¦. okay, must have just missed it then. thanks.
[03:49:11] <SingingBoyo> is there a way to have something like a constructor, where you can call MyType(arg1, arg2) to create a new type, and then do some processing on the arguments to initialize a struct?
[03:49:38] *** Joins: steve (steve@1527A0E8.C194AA38.4EA770CF.IP)
[03:49:42] *** steve is now known as steveklabnik
[03:49:57] *** Quits: brson (brson@E9CDE21E.991753BB.CA4D1600.IP) (Ping timeout)
[03:50:22] <bstrie> SingingBoyo: generally that's achieved by making a static method on MyType called "new" (but you can call it whatever you want) and then using it like MyType::new(arg1, arg2)
[03:51:32] <SingingBoyo> bstrie: that could work.  Though if there's no way to make it more 'constructor-like' then how does something like, say, SharedChan(channel) work?
[03:54:16] *** Joins: brson (brson@5F06B402.AD1E507F.3688B332.IP)
[03:54:16] *** ChanServ sets mode: +o brson
[03:56:18] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[03:56:47] <aatch> I'm not sure why dbaupp decided to have a tokenizer...
[03:56:47] <bjz> SingingBoyo: you can make a function of the same name as the type
[03:57:09] <bjz> SingingBoyo: but it is more 'rustic' to use a static method
[03:57:14] <bjz> aatch: neither
[03:57:29] <bjz> aatch: if you can make it simpler that would be amazing
[03:57:31] <aatch> I'm re-writing without it, much smaller and simpler.
[03:57:36] <bjz> awesome!
[03:57:50] <bjz> at least we got something up and running though
[03:57:54] <SingingBoyo> bjz: heh yeah I discovered that but it felt weird doing something like that so I went with new
[03:58:30] <bjz> SingingBoyo: so yeah, rust has no special semantics/syntax for constructors
[03:58:40] <bjz> SingingBoyo: it's not really needed
[03:59:24] <steveklabnik> lots of people seem to use new as a name for that
[03:59:27] <steveklabnik> at least in code i've seen
[03:59:38] <steveklabnik> but that's just it, a naming convention :)
[04:00:26] <bjz> steveklabnik: I also use Foo::from_bar_baz(_: Bar, _: Baz) -> Foo sometimes
[04:00:35] <steveklabnik> i like that :)
[04:00:58] <bjz> like Mat4::from_angle_axis
[04:01:01] <steveklabnik> also, hello from the freaking future: this plane has power and wifi, so i'm IRC-ing from the sky :)
[04:01:08] <bjz> or Plane::from_abc
[04:01:12] <steveklabnik> ha!
[04:01:16] <bjz> *Plane::from_abcd
[04:01:22] <aatch> bjz, good timing
[04:01:22] <bjz> steveklabnik: noice!
[04:01:39] <bjz> steveklabnik: owait
[04:02:06] <bjz> steveklabnik: ha, actually geometric plane I meant :P
[04:02:25] <bjz> Aeroplane::from_spoon
[04:02:36] <bjz> nneeerow
[04:02:59] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[04:03:37] *** Quits: deepdog (deepdog@moz-490E834C.client.mchsi.com) (Quit: Leaving)
[04:04:51] *** Quits: johnmurray (jmurray@B18D9D41.1781649A.A0D3DFE2.IP) (Quit: johnmurray)
[04:05:50] *** Joins: devbug (quassel@moz-E1DE087C.bchsia.telus.net)
[04:06:02] <aatch> bjz, how do you want to handle unrecognized escape sequences in strings?
[04:06:36] <bjz> EvalResult error, maybe?
[04:06:37] <aatch> Theres two ways: "foo \q bar" => "foo \q bar" and "foo \q bar" => "foo q bar"
[04:06:40] *** Quits: carter (carter@moz-12C317EF.nyc.res.rr.com) (Quit: Textual IRC Client: www.textualapp.com)
[04:06:41] <steveklabnik> mega-noob question: ' expected `u8` but found `& u8`' what should I do?
[04:06:50] <steveklabnik> just trying to ^ some u8s
[04:06:59] <aatch> steveklabnik, you doing an each on a vector?
[04:07:00] <steveklabnik> one of them is a borrowed pointer because i'm parsing it from a string
[04:07:14] <bjz> *foo
[04:07:14] <steveklabnik> let bytes2 = str::to_bytes(cypher).slice(0, 1);
[04:07:35] <aatch> steveklabnik, yeah, just dereference it.
[04:07:37] <steveklabnik> bjz: that gives type & u8 cannot be dereferenced
[04:07:44] <aatch> What?
[04:07:50] <steveklabnik> yup
[04:08:03] <bjz> what is the full error and code?
[04:08:05] <aatch> Hang on, are you sure it's &u8, and not &[u8]
[04:08:11] <bjz> yeah
[04:08:13] <steveklabnik> main.rs:28:43: 28:50 error: type & u8 cannot be dereferenced
[04:08:15] <steveklabnik> main.rs:28         hex.push_str(u8::to_str_radix((a ^ *bytes2), 16)); ^~~~~~~
[04:08:23] <steveklabnik> that bytes2 is from the above
[04:08:29] <steveklabnik> i guess slice would return []
[04:08:34] <steveklabnik> but it doesnt say that in the error
[04:08:34] *** Joins: steven_is_false (user@moz-144077DE.bchsia.telus.net)
[04:08:34] <aatch> because slice returns &[]
[04:09:07] <steveklabnik> wonder why it doesnt say that in the error then :/
[04:09:11] <aatch> why don't you just do str::to_butes(cypher)[0] ?
[04:09:12] <bjz> hex.push_str(u8::to_str_radix((a ^ bytes2[0]), 16)); it would have to be
[04:09:18] <aatch> to_bytes*
[04:09:20] <steveklabnik> aatch: because that would be too easy ;)
[04:09:22] <steveklabnik> seems good
[04:09:23] <steven_is_false> I'm really starting to reach the limits of a simple configure, and Makefile.in script. What success has anybody had with build systems for Rust?
[04:09:41] <bjz> rustpkg is the future
[04:09:53] <aatch> steven_is_false, rustpkg should solve these problems.
[04:09:54] <bjz> if anybody ever puts any time into it
[04:09:57] <steveklabnik> that worked, thanks everyone
[04:10:03] <bjz> np
[04:10:06] <aatch> bjz, hey, tjc works on it.
[04:10:10] *** Quits: ysuzuki (ysuzuki@moz-A563888C.ics.keio.ac.jp) (Client exited)
[04:10:14] <steveklabnik> i will slowly re-learn systems programming
[04:10:16] <bjz> aatch: ahh cool
[04:10:18] <z0w0> yeah, tjc has been working on it heaps
[04:10:30] <bjz> yeah haven't heard much
[04:10:46] <bjz> I guess he's doing it a little under the radar
[04:10:58] <bjz> or maybe I'm not reading the commits well enough
[04:11:00] <bjz> :P
[04:11:02] <z0w0> good, otherwise people will use it before its ready
[04:11:05] <aatch> bjz, not if you see the number of issues about it open.
[04:11:08] <bjz> indeed
[04:11:15] <bjz> aatch: ahh
[04:11:23] <bjz> aatch: that'd be it
[04:11:50] <z0w0> i think he's polished the specification
[04:12:04] <bjz> nice
[04:12:04] <z0w0> so it's probably down to just finishing off the implementation
[04:12:20] *** Joins: doomlord (doomlod@moz-3CF8202D.range81-159.btcentralplus.com)
[04:12:26] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[04:14:08] <z0w0> bjz: it's changed quite a bit since i first committed, so i only know partially what is going on. it definitely changed for the better though, it's a lot more straight forward now 
[04:14:17] <aatch> rusti: let mut s = ~"123"; s.push_char('\n'); s
[04:14:18] -rusti- ~"123\n"
[04:14:27] <\n> ugh I got pinged again
[04:14:27] <steven_is_false> I sort of want to help out with rustpkg. I need a better word than help though. Whats the word for when a contributor is motivated to "help" out with a project by practical need?
[04:14:43] <steveklabnik> steven_is_false: intrinsic motivatin
[04:14:45] <steveklabnik> motivation
[04:14:48] <aatch> steven_is_false, motivated
[04:14:49] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[04:14:54] <bjz> :P
[04:15:06] <bjz> z0w0: yeah, sometimes it's just getting something going
[04:15:16] <z0w0> steven_is_false: i don't think it's ready for more than one dev at a time yet
[04:15:33] <steven_is_false> z0w0: :p
[04:15:45] <z0w0> well at least, tjc hasn't let me know that i can start helping yet :V
[04:16:21] <z0w0> on the otherhand, maybe i should actually work on closing the bugs i was assigned in the triage :P
[04:17:53] *** Quits: H4199 (chatzilla@moz-64E556D3.austin.res.rr.com) (Client exited)
[04:18:17] <steven_is_false> Of course, rustpkg won't take care of stuff like the FHS, and installing icons, and .desktop files.
[04:20:12] <SingingBoyo> so if I have impl<'self, S,I> Executor<S,I> for &'self fn(&S, I) -> NextState<S,I>
[04:20:48] <SingingBoyo> why does  (~|state:~Option<int>, input:int| âŸ¶â€€ NextState<Option<int>,int>{
[04:20:50] <z0w0> steven_is_false: it's scriptable, so no reason it can't. but i don't think there will be uninstall hooks so there's reallyn o point. it's more of a build system than a package manager anyway
[04:20:50] <SingingBoyo>     if (input == 0){
[04:20:50] <SingingBoyo>       End(state)
[04:20:50] <SingingBoyo>     }else if(input < 0){
[04:20:50] <SingingBoyo>       Continue(~None)
[04:20:50] <SingingBoyo>     }else{
[04:20:50] <SingingBoyo>       Continue(~Some(input))
[04:20:51] <SingingBoyo>     }
[04:20:53] <SingingBoyo>   }) as ~Executor<Option<int>, int> say it can't find an impl of Executor<Option<int>, int> for &fn...
[04:21:07] <z0w0> maybe pastebin it, easier to read
[04:21:11] <SingingBoyo> whoa newlines.  thought I'd compacted the if
[04:21:12] <SingingBoyo> yeah
[04:22:32] <steven_is_false> z0w0: Just trying to think of how to set up a bunch of this stuff.
[04:22:42] <z0w0> setup what, sorry?
[04:23:11] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke. It's all a joke.)
[04:23:12] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[04:24:14] <aatch> rusti: let c : char = 0x22; c
[04:24:16] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/UhgI
[04:24:22] <SingingBoyo> alright this should be better: https://gist.github.com/singingboyo/5696101
[04:24:45] <SingingBoyo> oh hmm missing an enum in there
[04:25:18] <steven_is_false> Maybe I should ask for advice on build systems later on when more people are here.
[04:31:55] *** Quits: steveklabnik (steve@1527A0E8.C194AA38.4EA770CF.IP) (Quit: bye!)
[04:32:10] <aatch> bjz, I assume you want stuff like `'` to actually be a read-time macro?
[04:32:18] *** Quits: wizeman (quassel@moz-9C343656.dyn.user.ono.com) (Connection reset by peer)
[04:32:49] *** Joins: wizeman (quassel@moz-9C343656.dyn.user.ono.com)
[04:34:31] <bjz> aatch: aye
[04:35:02] <aatch> Cool, shouldn't be too hard to get in, at least as an initial form.
[04:35:09] *** Quits: SingingBoyo (brandon@moz-94AE1D3A.bchsia.telus.net) (Input/output error)
[04:35:12] <bjz> aatch: as in, when the code is parsed it would just output (quote ...)
[04:35:22] <aatch> thats the idea.
[04:36:04] <aatch> but I'm going to get it set up to make it easier to manage
[04:36:10] <bjz> r+? https://github.com/mozilla/rust/pull/6908
[04:36:41] <bjz> aatch: that will be awesome. It's been a little tricky
[04:36:58] <bjz> aatch: I'm sure dbaupp won't mind
[04:38:35] <bjz> aatch: and remember, I'm extremely open to people gutting my stuff if it's for the better, and simplifies things :)
[04:38:48] *** Joins: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net)
[04:39:23] <aatch> Well this simplifies the parser right down, and adds more features, like escape-sequence expansion.
[04:39:37] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[04:39:37] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/f_TBFA
[04:39:37] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[04:39:37] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[04:39:37] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/VUtuWw
[04:39:37] <ghrust> 13rust/06auto 14dee7c5a 15Brendan Zabarauskas: Add traits for concat and connect methods
[04:39:37] <ghrust> 13rust/06auto 149b60ecc 15bors: auto merge of #6908 : bjz/rust/concat-connect, r=Aatch...
[04:39:38] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[04:39:49] <bjz> aatch: perfect
[04:40:02] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[04:40:43] <aatch> what characters do you want to disallow in idents?
[04:41:34] <bjz> ones starting with a number I think?
[04:41:53] <aatch> bjz, oh, that's already handled by the parser
[04:41:56] <bjz> I'd probably go with scheme on that
[04:42:05] <aatch> I meant more with ', `, etc
[04:42:35] *** Quits: bnicholson (bnicholson@moz-E98974C1.hsd1.ca.comcast.net) (Ping timeout)
[04:42:51] *** Joins: ysuzuki (ysuzuki@moz-A563888C.ics.keio.ac.jp)
[04:43:36] <bjz> I think ' ` should probably be disallowed
[04:43:59] <bjz> scheme has: ! $ % & * + - . / : < = > ? @ ^ _ ~
[04:44:01] <aatch> eh, I'm just disallowing all read macros atm
[04:44:15] <bjz> http://www.r6rs.org/final/html/r6rs/r6rs-Z-H-7.html#node_sec_4.2.4
[04:44:45] *** Joins: Erik (Erik_S@moz-252DBA2.hsd1.co.comcast.net)
[04:45:14] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[04:45:32] *** Joins: johnmurray (jmurray@B18D9D41.1781649A.A0D3DFE2.IP)
[04:45:35] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[04:46:38] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[04:47:01] *** Quits: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Ping timeout)
[04:47:44] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[04:50:40] <steven_is_false> Are there any good image loading libraries out there that have bindings to Rust? I need to load a PNG for my application icon.
[04:50:42] *** Joins: tjc (tjc@moz-B867959A.redactedconsulting.com)
[04:50:42] *** ChanServ sets mode: +o tjc
[04:51:25] *** Joins: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net)
[04:51:36] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[04:52:17] *** Joins: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[04:56:12] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[04:57:28] <steven_is_false> How is work on syntax extensions going? I think that might be useful for my project.
[04:58:46] <tjc> steven_is_false: jbclements can answer that better (and is usually around during Pacific time business hours), but is there anything particular about syntax extensions that you were waiting for? they're implemented in general
[04:59:31] <steven_is_false> tjc: I was thinking about making an import_png!("myfile.png") extension which imports a png file at compile time.
[05:00:50] <tjc> steven_is_false: I think that would work now, except that you can't import macros from other modules, which is a pretty big "except", I realize
[05:01:27] *** Joins: bnicholson (bnicholson@moz-E98974C1.hsd1.ca.comcast.net)
[05:01:33] <steven_is_false> tjc: So how do syntax extensions work then?
[05:01:50] <steven_is_false> tjc: Maybe you should just point me to some examples.
[05:01:52] <tjc> steven_is_false: they're built into the compiler -- you can think of the compiler as including them into every file
[05:01:55] <tjc> things like debug!
[05:02:03] <tjc> which is a pretty big hack
[05:02:26] <tjc> I guess if you wanted to experiment, you could look at how debug! and error! are implemented, and copy that, but it's not a great long-term solution :-)
[05:02:34] <tjc> the files for that are under src/libsyntax/ext
[05:02:49] <steven_is_false> I thought there was progress towards making them dynamically loadable?
[05:02:52] *** Joins: jack (jack@moz-1DC9BB81.lsanca.dsl-w.verizon.net)
[05:03:11] <tjc> some progress, yeah. let me see if I can find the pull request...
[05:03:46] *** Joins: aruniiird (arun@92D70115.B332A52C.E3D0A897.IP)
[05:03:52] <tjc> steven_is_false: I think you're thinking of https://github.com/mozilla/rust/pull/6735 , but it hasn't yet been integrated
[05:05:25] <steven_is_false> tjc: Oh, okay then.
[05:08:05] <tjc> gtg, goodnight!
[05:08:06] *** Quits: tjc (tjc@moz-B867959A.redactedconsulting.com) (Quit: Places to go, people to annoy)
[05:11:14] *** Quits: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net) (Input/output error)
[05:13:01] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:13:35] <aatch> bjz, I only broke half the tests!
[05:13:51] <bjz> yay!
[05:14:29] <bjz> aren't we glad for tests
[05:16:24] *** Joins: Atrus6 (Mibbit@42C0399B.5C5FD9E.4670A0E2.IP)
[05:18:17] <Atrus6> I'm trying to get the length of a vector with vec::len, but I'm getting errors of "impure due to access to impure function". What should I do to fix that?
[05:21:33] *** Quits: Atrus6 (Mibbit@42C0399B.5C5FD9E.4670A0E2.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[05:25:09] *** Parts: steven_is_false (user@moz-144077DE.bchsia.telus.net) (ERC Version 5.3 (IRC client for Emacs))
[05:27:20] *** Quits: jack (jack@moz-1DC9BB81.lsanca.dsl-w.verizon.net) (Quit: Leaving.)
[05:27:38] *** Joins: MaikKlein (maik@moz-972D34E0.dip0.t-ipconnect.de)
[05:28:21] <aatch> Ok, I won't answer his question then...
[05:29:20] *** Quits: johnmurray (jmurray@B18D9D41.1781649A.A0D3DFE2.IP) (Quit: johnmurray)
[05:30:30] *** Joins: carter (carter@moz-12C317EF.nyc.res.rr.com)
[05:30:35] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[05:30:35] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/VUtuWw
[05:30:35] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[05:33:36] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[05:33:36] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/Mvf29Q
[05:33:36] <ghrust> 13rust/06auto 14b51f44e 15BjÃ¶rn Steinbrink: Fix passing self by value for types passed by value...
[05:33:36] <ghrust> 13rust/06auto 144f6285f 15bors: auto merge of #6903 : dotdash/rust/self_by_value, r=catamorphism...
[05:33:36] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[05:33:44] <aatch> down to one failed test
[05:37:34] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[05:38:10] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[05:40:18] *** Quits: MaikKlein (maik@moz-972D34E0.dip0.t-ipconnect.de) (Broken pipe)
[05:42:26] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[05:43:56] <bjz> aatch: hooray
[05:44:04] <bjz> aatch: bors hath merged it
[05:44:05] <aatch> I'm just doing a PR now
[05:44:50] <Jeaye> bjz: What were the prelude changes you were talking about?
[05:44:57] <Jeaye> There's no more prelude?
[05:44:59] *** Quits: aruniiird (arun@92D70115.B332A52C.E3D0A897.IP) (Ping timeout)
[05:45:16] <bjz> Jeaye: there is a prelude, but it only re-exports traits
[05:45:19] <bjz> not mods
[05:45:26] *** Joins: aruniiird (arun@92D70115.B332A52C.E3D0A897.IP)
[05:45:28] <Jeaye> hmm
[05:45:34] <bjz> you have to do, for example, use str;
[05:45:43] <bjz> to get str::connect
[05:46:26] <Jeaye> But you can still say `let s: ~str = ~"string";` without `use str;`
[05:46:39] <aatch> Jeaye, because str is a type
[05:46:44] <aatch> built into the compiler
[05:46:46] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[05:46:52] <Jeaye> Bad example.
[05:47:08] <Jeaye> What *does* prelude give me?
[05:47:15] <aatch> Look in std::prelude
[05:47:29] <bjz> :)
[05:47:39] <Jeaye> will do
[05:47:54] <bjz> Jeaye: it gives you things like vector.each
[05:48:17] *** Parts: Erik (Erik_S@moz-252DBA2.hsd1.co.comcast.net) ()
[05:48:27] <bjz> or do [1, 2, 3].map |x| { ... }
[05:48:37] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Computer has gone to sleep.)
[05:48:37] <Jeaye> gotcha
[05:48:48] <bjz> because those are in the traits re-exported in core
[05:48:57] <bjz> I mean, prelude
[05:49:00] <aatch> bjz: https://github.com/bjz/rusp/pull/13
[05:49:03] <bjz> *facepalm*
[05:50:14] <bjz> aatch: holy cow, paser is beautiful
[05:50:18] <bjz> *parser
[05:50:29] <bjz> well, I'm sure it could be improved
[05:50:35] <bjz> but still, great job
[05:50:40] <aatch> bjz, I seem to have a knack for hand-writing parsers
[05:50:57] <aatch> There is a bit of refactoring I should do though.
[05:50:58] <bjz> :)
[05:51:02] <bjz> of course
[05:51:21] *** Joins: wuwei`lab (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[05:51:40] <bjz> ooh, and less @
[05:51:42] <bjz> :)
[05:51:49] <aatch> bjz, not really.
[05:51:55] *** Quits: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Quit: zzzZZZzzz)
[05:51:56] <aatch> It's just all in the parser now
[05:51:58] *** Quits: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net) (Ping timeout)
[05:52:02] <bjz> oh, I see
[05:52:06] <bjz> just shifted
[05:52:31] <aatch> I might try to figure out how fix that later.
[05:52:48] *** Joins: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net)
[05:52:52] <bjz> can I delete the branch?
[05:53:07] <bjz> or would you like to keep working on it
[05:53:17] <aatch> bjz, just a minute, I'm doing those aforementioned refactorings
[05:54:41] *** Joins: dbaupp (Thunderbir@moz-C6B1454A.lns20.syd7.internode.on.net)
[05:56:35] <z0w0> bjz: aatch: wow you guys are making heaps of progress
[05:56:36] *** Joins: dsirenko (mitra@8E712A0.54C21BA0.9F317420.IP)
[05:56:50] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[05:58:55] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[06:00:01] <dbaupp> aatch: nice job killing my horrible parser :)
[06:00:08] <aatch> dbaupp, lol
[06:00:42] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[06:00:50] <dbaupp> aatch: I hope you used fire ;P
[06:00:59] <bjz> dbaupp: I want him to kill some of my code too :) (although I think you already did some of that)
[06:01:45] <dbaupp> bjz: possibly... but, yeah, aatch is clearly a more powerful code-killer
[06:01:54] <z0w0> bjz: so is it going to support currying out of the box?
[06:02:21] * aatch wields a mighty keyboard, code trembles at the sound of my keystrokes
[06:02:23] <bjz> z0w0: possibly, we'll see. not sure how that play with varargs
[06:02:44] <aatch> bjz, arguments are lists
[06:02:51] <bjz> z0w0: like (fn (a b .. c) ...)
[06:02:55] <aatch> that's the easiest was to deal with it.
[06:02:55] <bjz> aatch: yep
[06:03:00] *** Quits: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net) (Quit: eatkinson)
[06:03:22] <dbaupp> bjz: speaking of varargs, and 'a b .. c', the current match code handles that pretty poorly
[06:03:37] <bjz> bjz: tbh I'm not sure about match
[06:03:42] <aatch> dbaupp, that match code threw me for a loop...
[06:03:47] <bjz> *dbaup
[06:03:50] <bjz> p
[06:03:55] <aatch> actually, the '..' did
[06:04:04] <dbaupp> aatch: is it still throwing you for loops?
[06:04:14] <aatch> no
[06:04:25] <z0w0> are you guys going to wrap the standard library to make it easier to work with at all?
[06:04:27] <aatch> i was just confused as to why it broke my parser
[06:04:37] <dbaupp> yeah, the .. a hack to get it to work, the rest is all right-ish
[06:04:41] <dbaupp> bjz: are you ok? :P
[06:04:52] *** Quits: carter (carter@moz-12C317EF.nyc.res.rr.com) (Quit: Textual IRC Client: www.textualapp.com)
[06:04:56] <aatch> I just special-case it.
[06:04:59] <bjz> z0w0: would be kind of neat
[06:05:06] <dbaupp> z0w0: I was thinking of using libsyntax to just dump bindings for the whole of it
[06:05:17] <dbaupp> not sure how successful that would be
[06:05:37] <bjz> z0w0: the question is, how best to interface with Rust code
[06:05:49] <bjz> z0w0: your input is welcome
[06:06:17] <z0w0> depends on what it means by "rust dialect"
[06:06:40] <z0w0> if it means completely interop or if it means rust will be interfaced with through an "FFI" of sortsz
[06:06:51] *** Joins: berak (chatzilla@4AD45451.4742BCFA.1A5CC7E5.IP)
[06:07:04] <bjz> z0w0: we removed that
[06:07:25] <z0w0> ah ok, so it's a separate language now?
[06:07:26] <bjz> z0w0: ie. describing it as a 'lisp dialect for rust'
[06:08:21] <z0w0> it's dynamically typed right? in that case i have no idea
[06:08:42] <\n> hey how do I use the constant for pi?  `use float::consts::pi;` doesn't compile
[06:08:43] *** Quits: thou (thou@moz-1C1CA9F7.fasttrackcomm.net) (Input/output error)
[06:09:00] <dbaupp> rusti: std::float::pi
[06:09:13] <z0w0> but if it were my project, i'd make it a FRP language and make my own standard library just for kicks :P. but it's not mine, so i'd probably make it integrate with Rust gracefully which means mutability support and someway to enforce types
[06:09:35] <dbaupp> \n: use std::float::consts::pi
[06:09:45] <bjz> z0w0: yeah?
[06:09:49] <\n> cool thanks, I must be looking at 0.6 docs
[06:10:42] *** Parts: berak (chatzilla@4AD45451.4742BCFA.1A5CC7E5.IP) ()
[06:11:23] <bjz> \n: you should be looking at http://static.*
[06:11:40] <bjz> I think that's the latest doc build
[06:11:45] <bjz> from master
[06:12:09] <bjz> (which still could be well out of date, owing to the changes in incoming)
[06:13:21] <z0w0> bjz: maybe make a ":" macro that coerces something to a type?
[06:13:39] *** Joins: pyrac (pyrac@moz-984F61EC.w83-200.abo.wanadoo.fr)
[06:13:42] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[06:14:19] <bjz> z0w0: we were thinking that it might be good not to have coercions and promotions
[06:14:40] <z0w0> i honestly have no idea though, i haven't really used lisp dialects that much
[06:15:28] *** Joins: alisdair (textual@moz-EBE9F394.bchsia.telus.net)
[06:18:55] <\n> are the standard trigonometric functions implemented in the stdlib anywhere?
[06:18:55] <bjz> z0w0: It might be useful to look at typed racket for inspiration
[06:19:09] <bjz> rusti: 20f.sin()
[06:19:10] -rusti- 0.91294525
[06:19:17] <\n> sweet!
[06:19:30] <\n> implemented on type float, cool
[06:20:04] <aatch> bjz, refactor, and more tests
[06:20:07] <bjz> \n: the docs are confusing at the moment :(
[06:20:08] <bjz> http://static.rust-lang.org/doc/core/num.html#trait-trigonometric
[06:20:31] <bjz> http://static.rust-lang.org/doc/core/f64.html#implementation-of-trigonometric-for-f64
[06:22:14] <\n> rusti: 6f.tan() == 1 / 6f.atan()
[06:22:16] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/bHOI
[06:22:57] <\n> rusti: (6.0).tan() == 1 / (6.0).atan()
[06:22:58] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/iXaf
[06:23:08] <bjz> rusti: (6.0).tan() == 1.0 / (6.0).atan()
[06:23:09] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/RUbT
[06:23:20] <bjz> oh wait
[06:23:22] <bjz> rusti: 6f.tan() == 1f / 6f.atan()
[06:23:23] -rusti- false
[06:23:49] <bjz> it's kinda silly that rusti: (6.0).tan() == 1.0 / (6.0).atan() doesn't work :(
[06:23:56] <\n> oh right the numerator, too much time spent in loosely typed land...
[06:24:03] <bjz> but yeah, you can't coerce the integer
[06:24:23] <\n> bjz: not surprised, floating point comparison usually never works
[06:24:35] <\n> rusti: 6f.tan()
[06:24:36] -rusti- -0.29100619
[06:25:02] <Jesse> yeah, why are you using == on floating-point numbers
[06:25:10] <bjz> rusti: 6f.tan().approx_eq(&(1f / 6f.atan()))
[06:25:11] -rusti- false
[06:25:18] <\n> numbers without fractional parts yes, but not the tangent of a non multiple of pi
[06:25:47] <\n> rusti: 1f / 6f.atan()
[06:25:48] -rusti- 0.71141584
[06:25:57] <\n> oh
[06:26:01] <bjz> :P
[06:26:05] <\n> maybe my memory of trig is a little off!
[06:26:10] <bjz> heh
[06:26:16] <bjz> I was trusting you :)
[06:26:23] <Jesse> also atan() is an inverse function, not a function that returns a (multiplicative) inverse
[06:26:27] <bjz> but yeah
[06:26:52] <bjz> approx_eq does better floating point comparisons
[06:26:55] <\n> cool thanks Jesse!
[06:27:08] <Jesse> rust: (0.3).tan().atan()
[06:27:13] <dbaupp> rusti: 6f.atan().tan().approx_eq(6f)
[06:27:14] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/WHfY
[06:27:20] <Jesse> rusti: (0.3).tan().atan()
[06:27:21] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/BaJS
[06:27:24] <bjz> there's also approx_eq_eps that allows you to specify an epsilon
[06:27:33] <bjz> rusti: 6f.atan().tan().approx_eq(&6f)
[06:27:35] -rusti- true
[06:27:47] <\n> oh neat
[06:27:51] <bjz> brson: can (0.3).tan().atan() be fixed?
[06:29:06] <Jesse> rusti: (0.3f).tan().atan()
[06:29:07] -rusti- 0.3
[06:29:35] <bjz> rusti: 0.3f.tan().atan()
[06:29:36] -rusti- 0.3
[06:30:25] <bjz> in the future I hope you will be able to do float::tan(0.3)
[06:30:53] <bjz> at the moment you can, but that's because it's a free-standing function as well
[06:30:57] <Jesse> rusti: 0.3
[06:30:58] -rusti- 0.3
[06:31:06] <bjz> yeah see?
[06:31:13] <bjz> it doesn't complain
[06:31:22] <Jesse> yeah now i'm confused
[06:31:29] <Jesse> do you understand what's going on?
[06:31:30] <dbaupp> rusti: 1.add(&2)
[06:31:32] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/XVMT
[06:31:43] <Jesse> why i can stringify 0.3 without specifying what kind of float it is, but not tan it
[06:31:50] *** Joins: fabiand (fabiand@moz-571979A5.adsl.alicedsl.de)
[06:31:51] <bjz> Jesse: Rust's type inference being annoying
[06:31:58] <dbaupp> Jesse: I think it's because floats default to 'float' (like ints default to 'int')
[06:32:18] <bjz> Jesse: you can do it with args, but not if it's a method
[06:32:26] *** Quits: Ralith (ralith@moz-50F3C77.vc.shawcable.net) (Ping timeout)
[06:32:32] <dbaupp> Jesse: except, for method calls, it goes and checks all the float/int types to see if they implement the method
[06:32:51] <bjz> Jesse: if they want to do it like that then they should just disallow all unadorned literals
[06:32:54] <dbaupp> Jesse: and complains if they do, rather than just using 'int'/'float' if it implements the method
[06:33:11] <dbaupp> complains if more than one does
[06:33:12] <Jesse> i think i understand
[06:33:30] <bjz> Jesse: but I'd rather the just allow 0.3.tan()
[06:33:35] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[06:33:35] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/Mvf29Q
[06:33:35] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[06:33:39] <Jesse> rusti: (0.3 : std::f64)
[06:33:39] -rusti- foo.rs:10:14: 10:15 error: expected `)` but found `:`
[06:33:39] -rusti- foo.rs:10          (0.3 : std::f64)
[06:33:39] -rusti-                         ^
[06:33:39] -rusti- application terminated with error code 101
[06:33:45] <dbaupp> rusti: trait Foo { fn foo(&self) {} } impl Foo for f32 { fn foo(&self) {} } 0.3.foo()
[06:33:47] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/eWbP
[06:34:00] <dbaupp> rusti: trait Foo { fn foo(&self); } impl Foo for f32 { fn foo(&self) {} } 0.3.foo()
[06:34:01] -rusti- ()
[06:34:15] <dbaupp> rusti: trait Foo { fn foo(&self); } impl Foo for f32 { fn foo(&self) {} } impl Foo for f64 { fn foo(&self) {} } 0.3.foo()
[06:34:17] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/ZYDc
[06:34:20] *** Joins: victorporof (victorporo@2406C47F.9A7C5F59.4A6B528C.IP)
[06:34:27] <engla> you'd "cast" it with 'as' Jesse 
[06:34:37] <Jesse> i'm not trying to cast
[06:34:42] <bjz> rusti: fn foo<T:Float>(x:T) -> T { x * x } foo(0.3)
[06:34:42] <Jesse> i'm trying to constrain
[06:34:43] -rusti- 0.09
[06:34:44] *** Quits: Blub\w (wry@moz-5567490F.wireless.dyn.drei.com) (Quit: WeeChat 0.4.0)
[06:34:47] <bjz> see?
[06:34:56] <bjz> it's inconsistent
[06:35:08] *** Joins: balpert (alpert@moz-B247840C.hsd1.ca.comcast.net)
[06:35:11] <Jesse> rusti: let d : f64 = 0.3; d
[06:35:12] -rusti- 0.3
[06:35:53] <engla> ok I understand the difference now
[06:36:12] <dbaupp> bjz: wow, that is inconsistent
[06:36:25] <bjz> dbaupp: indeed
[06:36:32] <bjz> dbaupp: that's what annoys me
[06:36:45] <Jesse> bjz: "if they want to do it like that then they should just disallow all unadorned literals" or disallow using unadorned literals for the less common types
[06:37:02] <dbaupp> rusti: fn foo<T:Algebraic>(x:T) -> T { x.sqrt() } foo(0.3)
[06:37:03] -rusti- 0.54772256
[06:37:18] <\n> what's the convention for converting int's to floats?
[06:37:32] <dbaupp> \n: (foo_int as float)
[06:37:41] <bjz> rusti: 1i as float
[06:37:42] <\n> as, right
[06:37:43] -rusti- 1
[06:38:43] <dbaupp> Jesse, bjz: It's really nice to write &[1u8, 2, 3, 4], rather than &[1u8, 2u8, 3u8, 4u8]
[06:38:55] <dbaupp> (or let x: &[u8] = [1,2,3,4];)
[06:39:40] <Jesse> or even passing x[0] to a function that takes a u8. yay type inference!
[06:40:09] <bjz> dbaupp: as I say, I'd prefer they not do that
[06:40:17] <dbaupp> bjz: good good :)
[06:40:23] <bjz> dbaupp: but the inconsistency is annoying
[06:40:39] <Jesse> (speaking of which, apparently you can index into arrays using both signed and unsigned ints?)
[06:40:40] <\n> are you supposed to cat the output of rustc --pretty to a file?
[06:40:55] <dbaupp> bjz: yes, how often does one call methods on literals, though?
[06:40:58] <dbaupp> \n: yes
[06:41:17] <dbaupp> rusti: (&[1, 2, 3])[-1]
[06:41:18] <\n> is it a bug that it formated my code like this:
[06:41:18] -rusti- rust: task failed at 'index out of bounds: the len is 3 but the index is -1', foo.rs:10
[06:41:18] -rusti- rust: domain main @0xc9f1b0 root task failed
[06:41:18] -rusti- application terminated with error code 101
[06:41:20] <\n> println(fmt!("Area of nonagon: %s" , nonagon . area ( ) . to_str ( )));
[06:41:33] <dbaupp> Jesse: yes, apparently
[06:41:45] <dbaupp> \n: the pretty-printer isn't great
[06:41:55] <\n> spaces in between dot operators and empty argument lists
[06:42:46] <dbaupp> Jesse: although, it *only* allows ints, even if you impl the Index trait with a different type, https://github.com/mozilla/rust/issues/6588
[06:42:50] *** Joins: Ralith (ralith@moz-50F3C77.vc.shawcable.net)
[06:42:58] <dbaupp> \n: yes, the pretty-printer sucks
[06:43:10] <Jesse> bjz, dbaupp: is there an issue filed about that inconsistency with float literals and method selection?
[06:43:29] <bjz> Jesse: not sure
[06:43:43] <Jesse> \n: i found the pretty-printer code reasonably easy to understand, if you're interested in improving it.
[06:43:46] <dbaupp> bjz: fileone?
[06:43:52] <dbaupp> fiel one
[06:43:52] <bjz> Jesse: you're welcome to make one though
[06:43:53] <dbaupp> file
[06:44:55] <dbaupp> aatch, bjz: have we though about AOT/JIT compilation for Rusp?
[06:45:09] <dbaupp> (s/we/you/ I guess)
[06:45:25] <bjz> dbaupp: that's aatch's main interest in the project
[06:45:26] <bjz> JIT
[06:45:43] <dbaupp> bjz: cool
[06:45:50] <\n> haven't seen bindings to mmap
[06:45:58] <dbaupp> aatch: is that (partially) the goal of llvm-rs?
[06:46:10] <JesseH> Jesse, stealing my name >:(
[06:46:14] <dbaupp> \n: there aren't any
[06:46:38] <\n> shameless plug: http://nickdesaulniers.github.io/blog/2013/04/03/basic-jit/
[06:46:42] <dbaupp> \n: it should be pretty easy to write
[06:47:32] <aatch> dbaupp, I'm actually investigating that now
[06:47:46] <dbaupp> \n: `extern { fn mmap(addr: *c_void, len: c_size_t, prot: c_int ..) -> *c_void; fn munmap(...) }`
[06:48:18] <\n> ship it!  aatch: investigating?
[06:48:28] <dbaupp> would a JIT require `asm!` to work?
[06:48:46] <aatch> I was planning on using LLVM for it...
[06:48:48] <bjz> dbaupp: aatch is working on nice LLVM bindings
[06:49:01] <dbaupp> bjz: I know, i've already starred the repo ;)
[06:49:16] <bjz> ahh
[06:49:29] <Jesse> JesseH: should i change my nick to jruderman?
[06:49:33] <dbaupp> aatch: yep, but like, actually calling the JIT'd code, or does LLVM manage all that too?
[06:49:45] <aatch> dbaupp, pretty much
[06:50:21] <aatch> You can ask it for a function pointer
[06:50:39] <aatch> if it needs to, it'll compile it there and then
[06:50:51] <dbaupp> cool!
[06:50:57] <\n> what aspects would be JIT'd?
[06:51:21] <aatch> \n, probably just execution atm.
[06:51:30] <dbaupp> \n: (you know we're talking about Rusp, not Rust, right?)
[06:51:40] <\n> huh?
[06:51:50] <dbaupp> https://github.com/bjz/rusp
[06:52:04] <JesseH> Jesse, No it's fine. :P One of us might have to leave, it's according on how large the jesse limit is.
[06:52:04] *** Quits: ysuzuki (ysuzuki@moz-A563888C.ics.keio.ac.jp) (Client exited)
[06:52:46] <\n> could use some more parens :P
[06:53:43] <dbaupp> (really? (are you sure?))
[06:53:51] <dbaupp> :P
[06:54:07] <\n> no, jk, looks neat.  I know 0 lisp (or relatives)!
[06:55:11] *** Quits: brson (brson@5F06B402.AD1E507F.3688B332.IP) (Quit: leaving)
[06:56:19] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[06:57:02] <dbaupp> bjz: I've been thing that adopting clojure (fn [] ()) syntax might work better with pattern matching on function arguments
[06:57:15] <bjz> aye
[06:58:00] <dbaupp> and also, that having () be cons, and [] be a vector literal might work better, possibly. Not really sure
[06:58:18] <bjz> about to say that
[06:58:25] <bjz> *i was
[06:58:40] <dbaupp> cool :) great minds think alike ;P
[06:59:22] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[06:59:36] <bjz> {} for named structs?
[06:59:59] <bjz> like in rust proper?
[07:00:05] <dbaupp> bjz: named structs, or hashmap/associative arrays?
[07:00:07] <bjz> (just an idea)
[07:00:17] <bjz> both, I'm thinking
[07:00:27] <bjz> maybe
[07:00:29] <bjz> not sure
[07:00:48] <dbaupp> How do we distinguish between a named struct and a hashmap?
[07:00:49] <bjz> I mean, we have to be careful of making it a grab-bag of neat features
[07:01:12] <dbaupp> bjz: i.e. it should be thought out and consistent?
[07:01:57] <bjz> yeah, I mean, no reason why we can't mess around for now, but we can aim to eventually sort things out as we learn
[07:02:59] <dbaupp> and as aatch removes them, hehe ;)
[07:03:15] <bjz> hehe
[07:03:41] <bjz> http://docs.racket-lang.org/ts-guide/
[07:03:50] <dbaupp> yeah, I think experimenting for a bit and see what works/what doesn't/is useless and adjusting accordingly sounds good
[07:04:39] *** Joins: sankha93 (Instantbir@2DA22337.BBCFAF58.F4137E23.IP)
[07:04:49] <dbaupp> bjz: hm, I was thinking that types might not be appropriate if it's a scripting language?
[07:05:04] <dbaupp> bjz: (or at least, compulsory types wouldn't be appropriate)
[07:05:35] <aatch> dbaupp, yeah, we were thinking strong, dynamic typing
[07:05:49] <aatch> You have to have types, there isn't really a choice there.
[07:06:14] <dbaupp> for JITing?
[07:06:23] *** Joins: SingingBoyo (brandon@moz-94AE1D3A.bchsia.telus.net)
[07:07:00] <aatch> in general. You have to have some sort of typing otherwise you can't distinguish between "I'm a string" and 42
[07:07:43] <dbaupp> aatch: oh, right, of course... (doesn't that automatically come from being able to represent the "Value" type in Rust?)
[07:07:50] <Jesse> what's wrong with static type checking there?
[07:08:37] <aatch> Jesse, static type checking is fine, but in an already-dynamic language it's not really useful
[07:09:30] <bjz> aatch: and optional annotations maybe?
[07:10:21] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Connection reset by peer)
[07:10:22] <aatch> I guess, though it's all checked at "runtime"
[07:10:33] <aatch> since there isn't a compile time.
[07:11:17] <bjz> yep
[07:12:19] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[07:14:08] *** Quits: Jesin (Jessin_@moz-157A63DD.cc.lehigh.edu) (Quit: Leaving)
[07:14:15] *** Quits: sankha93 (Instantbir@2DA22337.BBCFAF58.F4137E23.IP) (Ping timeout)
[07:14:28] <dbaupp> aatch: are you planning to try to get llvm-rs back into rustc?
[07:14:31] *** Quits: pyrac (pyrac@moz-984F61EC.w83-200.abo.wanadoo.fr) (Quit: pyrac)
[07:18:25] *** Joins: sankha93 (Instantbir@E9B46378.95644FC6.BE90E62C.IP)
[07:22:59] <aatch> dbaupp, not atm, though it has crossed my mind
[07:31:17] *** Quits: lerc (quassel@121-74-233-23.telstraclear.net) (Connection reset by peer)
[07:31:48] *** Quits: devbug (quassel@moz-E1DE087C.bchsia.telus.net) (Ping timeout)
[07:32:13] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[07:32:15] *** Joins: lerc (quassel@moz-598ED764.telstraclear.net)
[07:32:17] *** Joins: doener (bs@moz-AA189A5A.unitymedia.biz)
[07:39:25] *** Joins: devbug (quassel@moz-E1DE087C.bchsia.telus.net)
[07:41:23] *** Quits: \n (NDesaulnie@moz-C2B49FFE.hsd1.ca.comcast.net) (Quit: \n)
[07:41:43] <dbaupp> doener: you fixed by-val self!
[07:42:14] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Quit: Jesse)
[07:43:04] *** Quits: devbug (quassel@moz-E1DE087C.bchsia.telus.net) (Connection reset by peer)
[07:43:33] <doener> dbaupp: most of it. Non-pointer types like "int" still fail. Maybe I'll get to look at that in the evening
[07:44:31] <doener> But that was a nice thing to do to learn about the codegen.
[07:44:58] <aatch> doener, and now you cannot unlearn it!
[07:45:02] <aatch> mwuhahaha
[07:46:17] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[07:47:48] <cmr> So to enable https://github.com/mozilla/rust/issues/6902 I'm thinkg try decompressing the metadata as lz4 and if it fails, fallback to deflate, until the next snapshot
[07:49:15] *** Joins: donri (dag@moz-9BB61102.tbcn.telia.com)
[07:51:27] *** Quits: cdidd (cdidd@moz-8F89EF1D.broadband.corbina.ru) (Ping timeout)
[07:55:55] <friggle> interesting proposal http://pcwalton.github.io/blog/2013/06/02/removing-garbage-collection-from-the-rust-language/. Looks like there's still some largeish language changes that could happen
[07:56:04] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[07:56:44] <cmr> " remove garbage collection from the core language and relegate it to the standard library, with a minimal set of language hooks in place to allow for flexible, pluggable automatic memory management." I'm for it already
[07:57:07] *** Quits: solancile (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net) (Ping timeout)
[07:58:08] *** Quits: dbaupp (Thunderbir@moz-C6B1454A.lns20.syd7.internode.on.net) (Input/output error)
[07:58:47] *** Joins: dbaupp (Thunderbir@moz-C6B1454A.lns20.syd7.internode.on.net)
[08:00:37] <dbaupp> cmr: I don't think a given rustc ever reads from a crate it didn't compile, even while bootstrapping
[08:01:17] <cmr> dbaupp: stage1 compiler uses crates built by stage0, no?
[08:01:23] <dbaupp> (I'm not sure of this, but there are a lot of ICEs and "symbol not found" errors if you do try to use a crate compiled with a different rust in "userspace")
[08:01:29] <cmr> oh I just need a #[cfg(stage0)]
[08:01:35] <dbaupp> cmr: sort-of, maybe, not sure
[08:01:39] <cmr> That is really obvious in hindsight
[08:02:24] <dbaupp> cmr: actually, no, stage1-rustc is compiled by stage0 but stage1-libstd and libextra are compiled by the stage1 compiler
[08:02:42] <dbaupp> so it should work without any #[cfg]'s, I'm pretty sure
[08:02:59] <cmr> dbaupp: how does that work, considering that librustc depends on libstd and libextra :S
[08:03:02] <cmr> Does it recompile them?
[08:03:46] *** Quits: victorporof (victorporo@2406C47F.9A7C5F59.4A6B528C.IP) (Connection reset by peer)
[08:03:50] *** Joins: victorporof (victorporo@2406C47F.9A7C5F59.4A6B528C.IP)
[08:04:18] *** Quits: sankha93 (Instantbir@E9B46378.95644FC6.BE90E62C.IP) (Quit: Instantbird 1.4 -- http://www.instantbird.com)
[08:05:35] <dbaupp> wait, I'm possibly using the wrong terminology
[08:05:42] <dbaupp> diagram time!
[08:05:53] <dbaupp> std -> extra -> syntax -> rustc -> std -> extra -> syntax -> rustc -> ...
[08:05:56] <dbaupp> is the bootstrap
[08:06:04] <dbaupp> the first 4 are compiled with the snapshot
[08:06:13] <dbaupp> the next 4 with the first rustc
[08:06:15] <dbaupp> and so on
[08:06:28] <aatch> woo, I am actually building IR.
[08:06:39] <dbaupp> but at no point does a rust compile read metadata from a crate it didn't compile itself
[08:06:48] <dbaupp> aatch: \o/
[08:06:54] <dbaupp> aatch: does it run?
[08:07:33] <cmr> That first rustc in the chain reads metadata from std and so on, no?
[08:07:48] <aatch> dbaupp, no, unfortunately.
[08:07:58] <dbaupp> cmr: only when it is compiling the extra/syntax/rustc that occur after it in the chain
[08:08:02] <aatch> I haven't even written the wrappers for the execution engine atm
[08:08:12] <dbaupp> cmr: since it doesn't read any metadata to compile std
[08:08:28] <cmr> Oh hm, I see now
[08:09:05] <dbaupp> cmr: I could be entirely wrong, of course. so it might be better to just do the replacement and see what blows up
[08:09:17] <cmr> dbaupp: That's what I'm doing now :)
[08:10:52] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[08:11:59] <cmr> Is BytesReader safe? (Doesn't allow you to read pastt he end of the slice)?
[08:12:42] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[08:13:00] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:13:37] *** Joins: sankha93 (Instantbir@E9B46378.95644FC6.BE90E62C.IP)
[08:15:03] <dbaupp> rusti: do std::io::with_bytes_reader(&[1]) |rdr| { rdr.read_bytes(10000) }
[08:15:04] -rusti- ~[1]
[08:15:28] <cmr> good point, forgot about that guy
[08:15:33] <dbaupp> rusti: do std::io::with_bytes_reader(&[1]) |rdr| { (rdr.read_byte(), rdr.read_bytes()) }
[08:15:35] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/QWVN
[08:15:47] <dbaupp> rusti: do std::io::with_bytes_reader(&[1]) |rdr| { (rdr.read_byte(), rdr.read_byte()) }
[08:15:48] -rusti- (1, -1)
[08:15:57] *** Quits: SingingBoyo (brandon@moz-94AE1D3A.bchsia.telus.net) (Ping timeout)
[08:16:02] <dbaupp> rusti: do std::io::with_bytes_reader(&[1]) |rdr| { rdr.read_le_u64() }
[08:16:03] -rusti- 18446744073709551361
[08:16:08] <dbaupp> huh
[08:16:11] <cmr> That's nasty :(
[08:16:29] <dbaupp> oh, right. it's &[-1, -1, ... , -1, 1] cast to a u64
[08:17:59] *** Quits: lerc (quassel@121-74-233-23.telstraclear.net) (Ping timeout)
[08:21:37] <aatch> hah, I just realized that we don't parse negative numbers anymore...
[08:21:44] *** Joins: Blei (philipp@moz-3CA5666A.ethz.ch)
[08:21:47] *** Quits: blitter (blitter@moz-BA14D5CF.dyn.centurytel.net) (Ping timeout)
[08:21:53] <cmr> rusti: -2
[08:21:55] -rusti- -2
[08:22:02] <aatch> I meant in rusp
[08:22:08] <cmr> oh
[08:22:30] <cmr> I was about to be worried... "do we use negative numbers *nowhere*?"
[08:22:37] <dbaupp> ruspi: -2
[08:22:41] <dbaupp> drat! ;P
[08:23:35] *** Quits: victorporof (victorporo@2406C47F.9A7C5F59.4A6B528C.IP) (Ping timeout)
[08:24:36] *** Joins: SingingBoyo (androirc@moz-94AE1D3A.bchsia.telus.net)
[08:25:56] <Blei> so... how do i find out if a `def` is a non-static trait/impl function?
[08:26:06] <Blei> is this what `def_self` is?
[08:27:47] <dbaupp> Blei: i.e. a method?
[08:27:54] *** Joins: CarpNet (ac@moz-FD24B77.sohonet.co.uk)
[08:28:23] <Blei> ah, yes
[08:29:56] <dbaupp> Blei: I think it might be indicated by the 'explicit_self_' enum
[08:32:04] <Blei> dbaupp: thanks. now let's see how to get one of those
[08:33:24] *** Quits: alisdair (textual@moz-EBE9F394.bchsia.telus.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[08:33:37] <dbaupp> Blei: well, you need to get the `method` struct somehow... and that's where my knowledge stops :)
[08:34:04] <Blei> yeah, i'm trying to find out how to do that... rustc is convoluted
[08:36:45] *** Joins: mib_guyt4z (Mibbit@moz-6C52FBE0.dsl.teksavvy.com)
[08:37:47] *** Quits: mib_guyt4z (Mibbit@moz-6C52FBE0.dsl.teksavvy.com) (Quit: http://www.mibbit.com ajax IRC Client)
[08:39:59] *** Joins: MaikKlein (maik@moz-972D34E0.dip0.t-ipconnect.de)
[08:45:15] <aatch> I can now declare functions! Not do anything else, and the types are all i32, but it's a start!
[08:46:56] <cmr> rusti: struct Foo<'self> { buf: &'self[u8] } let bytes = ~[1, 2, 3, 4]; Foo {buf: bytes}
[08:46:58] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/jjCD
[08:47:18] <cmr> rusti: struct Foo<'self> { buf: &'self[u8] } let bytes = ~[1, 2, 3, 4]; fmt!("%?", Foo {buf: bytes})
[08:47:20] -rusti- ~"{buf: &[1, 2, 3, 4]}"
[08:47:24] <cmr> swankity
[08:48:01] <cmr> rusti: struct Foo<'self> { buf: &'self[u8] } let bytes = ~[1, 2, 3, 4]; let x = Foo {buf: bytes}; bytes
[08:48:02] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/VjHg
[08:48:09] <cmr> mmm
[08:48:14] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[08:48:24] <cmr> that's weird, note: borrow of `(*bytes)[]` occurs here
[08:48:25] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Quit: ["Textual IRC Client: www.textualapp.com"])
[08:48:53] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[08:49:19] *** Joins: illissius (illissius@A518C422.3F1C0C4.3AEF08B3.IP)
[08:51:18] *** Quits: a__ (a__@moz-250D9B4.nycmny.fios.verizon.net) (Ping timeout)
[08:51:32] <MaikKlein> cmr: compiles fine on my machine
[08:52:10] <MaikKlein> ah wait
[08:52:28] <cmr> MaikKlein: it's because rusti runs fmt!("%?", foo) on the expression returned by what you give it
[08:53:13] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[08:53:47] *** Joins: a__ (a__@moz-250D9B4.nycmny.fios.verizon.net)
[08:54:04] <MaikKlein> cmr: bytes is bound to Foo or isn't it?
[08:54:17] <dbaupp> MaikKlein: nope
[08:54:25] <dbaupp> `x` is borrowing bytes
[08:55:03] <dbaupp> cmr: to be clear, it runs fmt!("%?", { <user input> }), so the lifetime of ~'s is contained to this block
[08:55:06] <cmr> rusti: struct Foo<'self> { buf: &'self[u8] } fn foo() { let bytes = ~[1, 2, 3, 4]; let x = Foo {buf: bytes}; bytes } foo()
[08:55:07] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/bCdM
[08:55:16] *** Joins: dLog (anonymous@moz-8FAE8709.eastlink.ca)
[08:55:26] <cmr> rusti: struct Foo<'self> { buf: &'self[u8] } fn foo() -> Foo { let bytes = ~[1, 2, 3, 4]; let x = Foo {buf: bytes}; x } foo()
[08:55:36] *** Quits: SimonSapin (simon@moz-C286AD9A.bitcat.net) (Quit: Leaving.)
[08:55:44] <dbaupp> rusti: struct Foo<'self> { buf: &'self[u8] } let bytes = ~[1, 2, 3, 4]; let x = Foo {buf: bytes}; (x, bytes)
[08:56:19] <MaikKlein> rusti: 5
[08:56:54] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:57:59] <MaikKlein> hmm
[08:58:34] <MaikKlein> what does this even mean? Foo<'self>
[08:59:05] <dbaupp> I think we killed it, oops!
[08:59:12] <doener> declare the lifetime 'self, which is the lifetime of the Foo instance
[08:59:17] <dbaupp> MaikKlein: it's giving a lifetime to the borrowed pointers in the struct
[09:00:03] <doener> using &'self[u8] then means that the borrowed pointer needs to be valid as long as the instance itself
[09:00:39] <MaikKlein> ok so buf: &'self[u8] can points to any type?
[09:00:49] <MaikKlein> point*
[09:01:08] <cmr> no, just to slices of u8
[09:01:29] <MaikKlein> ah i am stupid
[09:02:56] <cmr> happens to the best of us :)
[09:05:21] <Blei> woot, fixed it! maybe
[09:05:36] <Blei> how do you run tests again? only for stage1?
[09:05:45] <cmr> Blei: make check-stage1
[09:05:51] <Blei> cmr: thanks
[09:06:11] <dbaupp> cmr: does lz4 work?
[09:06:19] <cmr> dbaupp: tests pass
[09:06:33] <dbaupp> cmr: yay! is it faster?
[09:06:37] <cmr> unless you mean for metadata
[09:06:44] <dbaupp> cmr: yeah, that one
[09:06:55] <cmr> working on it still :)
[09:07:40] <cmr> I'm trying to avoid copying (lz4 originally wanted a ~[u8])
[09:07:57] *** Joins: lerc (quassel@moz-598ED764.telstraclear.net)
[09:12:47] *** Joins: davbo (dave@moz-3FFA637C.oucs.ox.ac.uk)
[09:13:44] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[09:13:52] <bjz> holy cow this is awesome: http://pcwalton.github.io/blog/2013/06/02/removing-garbage-collection-from-the-rust-language/
[09:14:02] *** wuwei`lab is now known as wuwei|afk
[09:14:47] <mitsuhiko> bjz: i like it, but i don't think it's at that state yet
[09:15:03] <mitsuhiko> pretty sure if you move that into the stdlib the lack of syntax and the limited borrow checke are going to be annoying
[09:15:32] *** Joins: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP)
[09:17:54] <cmr> I What we need is *user defined* sigils! ;)
[09:23:16] <cmr> Look at all the unused symbols... %, #, $, `, ?, \
[09:23:18] <cmr> Such a waste
[09:26:47] <cmr> Can a borrowed pointer be the only owner of a datum?
[09:30:43] <heftig> i don't think so. it's always anchored to a stack frame
[09:33:02] <heftig> cmr: borrowed pointers never own
[09:33:18] <heftig> also, § as a sigil :p
[09:33:23] <cmr> heh
[09:33:46] *** Quits: MaikKlein (maik@moz-972D34E0.dip0.t-ipconnect.de) (Ping timeout)
[09:35:15] *** Joins: novabyte (Instantbir@moz-3E0F9699.cable.virginmedia.com)
[09:35:16] <cmr> rusti: struct Foo<'self> { buf: &'self[u8] } fn foo() -> Foo { let bytes = ~[1, 2, 3, 4]; let x = Foo {buf: bytes}; x } foo()
[09:35:18] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/UaQj
[09:35:57] <cmr> rusti: struct Foo<'self> { buf: &'self[u8] } fn foo<'a>() -> Foo { let bytes = ~[1, 2, 3, 4]; let x = Foo {buf: &'a bytes}; x } foo()
[09:35:59] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/ihVa
[09:36:39] <cmr> Meh, that's nothing like what I'm doing anyway.
[09:36:54] <heftig> that won't work. the array doesn't survive the function, but the pointer does, so you get an error
[09:38:19] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[09:41:11] *** Quits: doomlord (doomlod@moz-3CF8202D.range81-159.btcentralplus.com) (Ping timeout)
[09:42:33] *** Joins: mib_eu34zo (Mibbit@moz-A0E225F0.avcosystems.co.uk)
[09:44:30] *** Joins: cdidd (cdidd@moz-D9B11263.broadband.corbina.ru)
[09:44:51] *** Joins: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP)
[09:44:58] *** Quits: balpert (alpert@moz-B247840C.hsd1.ca.comcast.net) (Quit: balpert)
[09:47:22] *** Quits: sankha93 (Instantbir@E9B46378.95644FC6.BE90E62C.IP) (Ping timeout)
[09:49:13] <mleise> I sent LDC into an infinite loop :/
[09:49:50] <mleise> oh wrong chat room, sorry
[09:50:28] <mib_eu34zo> how can i move an owned value from one vector to another without copying the value?
[09:50:42] *** Joins: sankha93 (Instantbir@BE94BAB6.6AB2528E.BE90E62C.IP)
[09:51:19] <bjz> mleise: careful, q66 will come after you!
[09:51:36] <bjz> x)
[09:52:21] <cmr> Is there a safe (read: not transmute) way to get a &[u8] from a uint?
[09:53:25] <bjz> cmr: do you think that would be useful?
[09:54:31] <dbaupp> mib_eu34zo: as in you have (for example) ~[foo, bar, baz] and want to move baz to another vector?
[09:54:55] <dbaupp> cmr: do you mean convert the uint to a pointer, or a slice to the bytes of the uint?
[09:55:06] *** Quits: Blei (philipp@moz-3CA5666A.ethz.ch) (Quit: WeeChat 0.4.1)
[09:55:19] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Ping timeout)
[09:56:27] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[09:56:32] <mib_eu34zo> similar, it's like: ~[~foo, ~bar, ~baz] and i'm trying to ~baz to another vector
[09:56:35] <bjz> cmr: bytes!
[09:56:43] <bjz> I think?
[09:57:55] <dbaupp> mib_eu34zo: is it always the one at the end? because vec.pop() will move the ~baz out (without copying the data), which you can then .push() onto another vector
[09:58:06] *** Joins: EXetoC (ex@moz-2DBEB1E4.customer.t3.se)
[09:58:27] <dbaupp> bjz: I think that only works for literal u8s, chars and strs
[09:58:48] <bjz> ahh
[09:58:50] <bjz> dang
[09:58:51] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[09:58:55] <dbaupp> rusti> bytes!(1000)
[09:58:56] <dbaupp> <anon>:36:0: 37:1 error: Too large integer literal in bytes!
[09:58:56] <dbaupp> yeah
[09:59:50] <bjz> that's a shame
[10:00:00] <cmr> I want a slice to the bytes of the uint.
[10:00:58] <dbaupp> cmr: I guess `unsafe { cast::transmute((&foo, sys::size_of_val(&foo))) }` works
[10:01:04] <dbaupp> which you can wrap into a safe function
[10:02:37] <mib_eu34zo> thanks dbaupp, i guess remove would also do the job if i wanted a value between the start and end elements?
[10:03:11] <dbaupp> mib_eu34zo: hm, looks like it
[10:03:48] <mib_eu34zo> thanks :)
[10:04:07] <dbaupp> (although that does end up having to shift everything after the one you remove, which is possibly suboptimal?)
[10:04:33] <cmr> you want vec::swap but between two vectors
[10:04:39] <cmr> right?
[10:04:59] <mib_eu34zo> yeah
[10:05:56] <mib_eu34zo> if i'm going to be doing a few of these operations am i going to be doing a few of these operations am i better off converting to a list and back to a vector?
[10:06:09] <dbaupp> mib_eu34zo: what version of Rust?
[10:07:35] <dbaupp> mib_eu34zo: because you could vec::swap an uninitialised value into one vector to remove an elem, vec::swap that element with the appropriate element of the other vector, and then finally swap this element with the uninitialised one that you inserted before
[10:08:11] <dbaupp> (or, if you don't care about maintaining the order of the vector, vec::swap_remove)
[10:09:10] <mib_eu34zo> ah thanks, that should be perfect
[10:11:14] *** Parts: z0w0 (zack@moz-B5D18119.lns1.woo.bigpond.net.au) ()
[10:12:25] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[10:13:10] <dbaupp> rusti: botsnack
[10:14:07] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[10:14:08] *** Joins: balpert (alpert@moz-B247840C.hsd1.ca.comcast.net)
[10:14:25] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[10:17:02] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[10:17:28] <doener> hm, if you're really swapping, do you need the temp?
[10:18:01] <doener> rusti: let mut x = [~1,~2,~3]; let mut y = [~4,~5,~6]; std::util::swap(&mut x[1], &mut y[2]); fmt!("%? %?", x, y)
[10:18:02] -rusti- ~"[~1, ~6, ~3] [~4, ~5, ~2]"
[10:18:11] <cmr> hey!
[10:18:15] <cmr> I didn't even know that existed
[10:18:51] <dbaupp> doener: wow!
[10:19:09] <dbaupp> mib_eu34zo: doener's solution is the best
[10:19:49] *** Joins: z0w0 (zack@moz-B5D18119.lns1.woo.bigpond.net.au)
[10:21:20] *** Quits: SingingBoyo (androirc@moz-94AE1D3A.bchsia.telus.net) (Client exited)
[10:21:23] *** Joins: SingingBoyo (androirc@moz-94AE1D3A.bchsia.telus.net)
[10:22:02] *** Joins: martndemus (martndemus@moz-FAE8D24A.sshunet.nl)
[10:30:14] <dbaupp> bjz: aatch: https://github.com/bjz/rusp/pull/15 ?
[10:31:49] <cmr> /home/cmr/hacking/rust/src/librustc/rustc.rc:1:0: 1:0 error: transmute called on types with different sizes: uint (64 bits) to &const [u8] (128 bits)
[10:31:51] <cmr> /home/cmr/hacking/rust/src/librustc/rustc.rc:1 // Copyright 2012-2013 The Rust Project Developers. See the COPYRIGHT
[10:31:53] <cmr>                                                ^
[10:31:57] <cmr> The error is nowhere near there at all but that's ok :p
[10:33:42] <dbaupp> cmr: yeah, the transmute error has the worst span :(
[10:33:53] <dbaupp> cmr: it's because a &[] stores a pointer and it's length
[10:34:14] <cmr> I just want to append the bytes of this uint to this ~[u8] :(
[10:34:19] <dbaupp> so you need to transmute (&foo, <byte length of foo>)
[10:34:24] <dbaupp> cmr: iter_bytes?
[10:34:33] <cmr> dbaupp: is that defined for uint?
[10:34:38] <dbaupp> cmr: sure
[10:34:44] <cmr> oh sweet
[10:34:59] <doener> hash_keyed needs IterBytes, so it's defined for lots of things
[10:35:16] <cmr> it's even does endianness for me!
[10:38:33] *** Joins: judder (maradukewa@385DDD8F.206937E4.78E362FE.IP)
[10:40:09] <kimundi> "remove gc from the core language"... Interesting proposal!
[10:40:31] *** Quits: sankha93 (Instantbir@BE94BAB6.6AB2528E.BE90E62C.IP) (Ping timeout)
[10:40:47] <cmr> I'm getting:
[10:40:48] <cmr> /home/cmr/hacking/rust/src/librustc/metadata/encoder.rs:1524:8: 1524:40 error: type `uint` does not implement any method in scope named `to_bytes`
[10:41:06] <cmr> Even though I can /see/ "impl IterBytes for uint" in to_bytes.rs
[10:41:13] <cmr> And I have "use core::to_bytes;" up at the top
[10:41:44] <kimundi> do you also have "use core::to_bytes::IterBytes;" in scope?
[10:41:53] <cmr> oh whoops
[10:42:03] <kimundi> core::to_bytes is just the module
[10:42:03] <dbaupp> cmr: the method is iter_bytes, right?
[10:42:07] <cmr> That's so nonintuitive :(
[10:42:15] <kimundi> cmr: agreed
[10:42:17] <cmr> dbaupp: yes, but there's also to_bytes which returns ~[u8]
[10:42:23] <dbaupp> cmr: is the lz4 fix not just drop-in? :(
[10:42:25] <dbaupp> cmr: oh, I see
[10:42:51] <cmr> dbaupp: it's pretty drop-in, I just don't know rust very well :)
[10:42:58] <dbaupp> heh :)
[10:43:18] <dbaupp> I was thinking it'd just be change the [de]compressor call, but clearly not?
[10:43:26] <cmr> pretty much
[10:43:35] <cmr> I wanted to avoid some copies though, but gave up on that.
[10:43:49] <cmr> wasted a bunch of time doing that :(
[10:43:55] <dbaupp> as long as it's small-ish, it's probably fine, right?
[10:44:01] <cmr> lz4 also doesn't have a container format like deflate, so the length needs to be encoded
[10:45:35] <dbaupp> oh, I see
[10:45:58] <cmr> stage0 builds
[10:46:03] <cmr> let's see if it goes any further :)
[10:46:34] <cmr> and an ICE
[10:47:15] <dbaupp> that's fun! what's the error?
[10:47:22] <cmr> rust: task failed at 'header wants more bytes than present in buffer', /home/cmr/hacking/rust/src/libextra/lz4.rs:100
[10:47:40] <cmr> (in the unpushed from_bytes method of LZ4Container)
[10:47:57] <cmr> When building libextra
[10:48:33] *** Quits: balpert (alpert@moz-B247840C.hsd1.ca.comcast.net) (Quit: balpert)
[10:48:52] <cmr> So either my code is broken (likely) or there needs to be more changes to bootstrap (semi-unlikely)
[10:48:53] <dbaupp> oh, sounds like the metadata isn't being written correctly?
[10:48:56] *** Quits: aruniiird (arun@92D70115.B332A52C.E3D0A897.IP) (Ping timeout)
[10:49:12] <cmr> I hope so :)
[10:52:10] <aatch> dbaupp, done.
[10:52:22] <dbaupp> aatch: cool! it wasn't too horrible? :)
[10:53:33] <aatch> dbaupp, nope lol
[10:56:16] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[10:58:58] *** Joins: Blei (philipp@moz-6F4BE1F4.ethz.ch)
[11:00:10] <cmr> Is there a term for "those who use rust" yet (a la pythonistas?) I'm thinking "rust slingers" or "rusties"
[11:00:33] *** Quits: wuwei|afk (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Quit: Leaving)
[11:00:56] <cmr> dbaupp: you were right about rustc not reading metadata from any crate it didn't build though
[11:00:56] <Blei> i've read rusties before, not sure where though
[11:00:58] <dbaupp> I've seen rusties on the mailing list
[11:01:14] *** Quits: fabiand (fabiand@moz-571979A5.adsl.alicedsl.de) (Quit: Verlassend)
[11:01:15] <dbaupp> cmr: cool, I apparently know something! :)
[11:02:01] <cmr> maybe...
[11:02:05] <cmr> rust: task failed at 'header wants more bytes than present in buffer (wanted 2951313, found 22601008', /home/cmr/hacking/rust/src/libextra/lz4.rs:100
[11:02:32] <kimundi> cmr: What did you do? :P
[11:02:47] <cmr> kimundi: trying to use LZ4 instead of Deflate for metadata
[11:02:49] <dbaupp> that doesn't seem to be a sensible error message given? 2951313 < 22601008 last time I checked :P
[11:03:00] <cmr> yeah I just check expected_len != actual_len :p
[11:03:14] <cmr> never considered this case
[11:03:57] *** Joins: aruniiird (arun@92D70115.B332A52C.E3D0A897.IP)
[11:03:58] <cmr> I don't even see how this is possible though, I only slice expected_len bytes O_o
[11:04:06] <cmr> dbaupp: if I push my changes will you take a poke?
[11:04:09] <cmr> I have to head
[11:04:34] <dbaupp> cmr: probably not... I've got exams tomorrow that I really should be studying for
[11:04:42] <dbaupp> well, exam. but either way
[11:05:09] * doener would be willing to take a look
[11:05:12] <cmr> well, it's at https://github.com/cmr/rust/tree/metadata-lz4 if anyone wants to play with it
[11:07:30] <doener> cmr: heh, the assertion is before you slice
[11:10:01] *** Quits: kaeso (kaeso@moz-F21FF626.unstable.it) (Ping timeout)
[11:10:33] *** Quits: glandium (glandium@moz-A09032B1.kimsufi.com) (Ping timeout)
[11:10:55] *** Quits: andor (andor@moz-B1384951.neferty.in) (Ping timeout)
[11:11:05] *** Quits: wizeman (quassel@moz-9C343656.dyn.user.ono.com) (Ping timeout)
[11:12:20] *** Joins: vermeille (vermeille@moz-436628F6.net)
[11:12:34] *** Joins: andor (andor@518ECB3F.6B32A7A2.A2798B07.IP)
[11:12:37] *** Joins: kaeso (kaeso@moz-F21FF626.unstable.it)
[11:12:59] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[11:13:08] *** Joins: wizeman (quassel@moz-9C343656.dyn.user.ono.com)
[11:13:28] *** Joins: glandium (glandium@moz-A09032B1.kimsufi.com)
[11:13:58] <q66> who pinged me :V
[11:13:59] <q66> oh, bjz
[11:14:08] <bjz> :)
[11:24:50] *** Quits: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk) (Connection reset by peer)
[11:24:53] *** Joins: dylukes (dylukes@moz-7B9A0DA0.neo.res.rr.com)
[11:25:33] *** Joins: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk)
[11:26:56] <martndemus> Where can I find more documentation on which warnings I can 
[11:27:05] <martndemus> set in crate (.rc) files
[11:27:34] <dbaupp> martndemus: rustc -W help
[11:28:10] <dbaupp> martndemus: I think replacing - by _ gives the corresponding #[allow()]/#[warn()]/etc name
[11:28:33] <martndemus> dbaupp: Thanks, should have been a no-brainer haha
[11:28:44] <EXetoC> I think crate files are going away soon. I'm only using rs files
[11:29:47] <martndemus> EXetoC: Oh? How would you recommend compiling multiple source file projects without crate files?
[11:29:50] <dbaupp> yeah, I'm pretty sure .rc files are deprecated
[11:30:02] <martndemus> Better said: how to without .rc files?
[11:30:06] <dbaupp> (and they certainly have no special meaning to the compiler)
[11:30:19] <dbaupp> martndemus: you can just call your main file .rs, it's no different
[11:30:51] <dbaupp> martndemus: but there is "rustpkg" in development which will impose it's own file structure
[11:30:56] <martndemus> oh. hahaha, so mv main.rc main.rs should do?
[11:31:01] <dbaupp> yup
[11:31:06] <martndemus> awesome
[11:31:34] <martndemus> and the attributes for compiler flags?
[11:33:04] <dbaupp> what do you mean?
[11:33:37] <martndemus> can i put #[ warn(non_camel_case_types) ]; in my main file?
[11:33:59] <kimundi> martndemus: Sure, there is no different at this point any more
[11:34:02] <dbaupp> yeah, you can actually put it any module
[11:34:16] <dbaupp> (you can even put them on individual types and modules)
[11:34:19] <martndemus> even more awesome, thanks :)
[11:34:32] <kimundi> martndemus: Your crate file is just the root .rs file you pass the compiler
[11:34:59] <EXetoC> simplicity ftw
[11:35:58] <dbaupp> individual types and functions*
[11:39:24] *** Quits: dylukes (dylukes@moz-7B9A0DA0.neo.res.rr.com) (Quit: Computer has gone to sleep.)
[11:45:29] *** Joins: dbaumgarten (quassel@moz-65731869.dip0.t-ipconnect.de)
[11:46:00] *** Quits: Blei (philipp@moz-6F4BE1F4.ethz.ch) (Quit: WeeChat 0.4.1)
[11:49:55] *** Joins: sankha93 (Instantbir@D46AAA40.F6D95C1.8B6C1D65.IP)
[11:51:56] *** Quits: xenocons (otk@moz-C675529E.members.linode.com) (Ping timeout)
[11:55:09] *** Joins: xenocons (otk@moz-C675529E.members.linode.com)
[11:55:37] *** Quits: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net) (Ping timeout)
[11:56:46] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[12:01:43] *** Joins: fabiand (fabiand@moz-571979A5.adsl.alicedsl.de)
[12:04:14] *** Joins: xazax (xazax@moz-D7592A2A.csoma.elte.hu)
[12:04:23] *** Joins: johnmurray (jmurray@moz-299FF8FF.fw.nyc2.appnexus.com)
[12:05:31] *** Joins: Nisstyre (wes@moz-FD86289.netflash.net)
[12:06:14] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[12:10:11] *** Joins: k00mi (koomi@moz-ECD7DE60.pools.arcor-ip.net)
[12:10:24] *** Quits: mib_eu34zo (Mibbit@moz-A0E225F0.avcosystems.co.uk) (Quit: http://www.mibbit.com ajax IRC Client)
[12:11:54] *** Quits: KindOne (KindOne@B2A5C4FE.9C5C45A3.EC6A1518.IP) (Ping timeout)
[12:12:28] *** Joins: KindTwo (KindOne@B2A5C4FE.9C5C45A3.EC6A1518.IP)
[12:12:33] *** Joins: Palmik (palmik@moz-5CA3F354.pks.muni.cz)
[12:12:38] *** KindTwo is now known as KindOne
[12:13:45] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[12:14:33] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Quit: Computer has gone to sleep.)
[12:17:53] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[12:19:32] *** Quits: johnmurray (jmurray@moz-299FF8FF.fw.nyc2.appnexus.com) (Quit: johnmurray)
[12:21:35] *** Quits: aruniiird (arun@92D70115.B332A52C.E3D0A897.IP) (Ping timeout)
[12:28:45] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Ping timeout)
[12:32:07] *** Joins: Puddles (Mibbit@moz-464CB55D.adslplus.ch)
[12:32:22] *** Parts: Puddles (Mibbit@moz-464CB55D.adslplus.ch) ()
[12:32:41] *** Joins: maxli (maxli@F2D29657.F60B0462.67AC9B1.IP)
[12:34:21] *** Joins: themgt (themgt@moz-248BBB96.dhcp.gnvl.sc.charter.com)
[12:34:22] *** Quits: themgt (themgt@moz-248BBB96.dhcp.gnvl.sc.charter.com) (Client exited)
[12:34:27] <bstrie> cmr: feel free to use "rustinista" to refer to rust users
[12:34:38] *** Joins: mib_zgi3z3 (Mibbit@F0C8E617.4C7AE645.2662C207.IP)
[12:35:45] <aatch> rustistanianianitists?
[12:35:57] *** Quits: k00mi (koomi@moz-ECD7DE60.pools.arcor-ip.net) (Ping timeout)
[12:36:58] <bstrie> "rust monsters"
[12:37:03] <Thiez> I like rusties
[12:37:32] <Thiez> reminds me of RÃ¶sti
[12:37:35] <Thiez> now I'm hungry.
[12:38:33] <bstrie> if our language makes you hungry, then we have succeeded
[12:38:52] <bstrie> although we really should have just called it Bacon
[12:40:13] <Thiez> I suppose that would encourage us to be more careful when coding
[12:40:19] <Thiez> nobody wants bugs in their bacon.
[12:40:59] <aatch> bjz, if you're interested I've got a little bit of llvm stuff done here: https://github.com/Aatch/rusp/tree/jit
[12:41:05] <aatch> but I'm going to bed now.
[12:41:05] <bstrie> idiomatic Bacon code is referred to as "delicious"
[12:41:17] <dbaupp> aatch: can I be interested too? ;P
[12:41:24] <aatch> dbaupp, sure lol
[12:41:29] <dbaupp> hehe
[12:41:37] *** Joins: aruniiird (arun@92D70115.B332A52C.E3D0A897.IP)
[12:42:05] <aatch> the jit.rs file is just an experiment atm though.
[12:42:27] <aatch> anyway, goodnight.
[12:42:31] *** Quits: aatch (aatch@moz-2BB0AC01.cable.telstraclear.net) (Quit: Leaving)
[12:43:02] *** Quits: mleise (marco@moz-3468AB5B.pools.arcor-ip.net) (Quit: Leaving.)
[12:48:34] *** Quits: EXetoC (ex@moz-2DBEB1E4.customer.t3.se) (Quit: WeeChat 0.4.1)
[12:50:38] *** Joins: EXetoC (ex@moz-2DBEB1E4.customer.t3.se)
[12:51:48] *** Quits: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk) (Ping timeout)
[12:56:23] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[12:56:44] <bstrie> bblum: you created ARC, right?
[13:01:33] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[13:03:35] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[13:03:46] *** Joins: mib_2iixrj (Mibbit@moz-A0E225F0.avcosystems.co.uk)
[13:12:26] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[13:13:00] <caitp> if the language leaves you hungry on the other hand
[13:17:24] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[13:18:37] *** Quits: aruniiird (arun@92D70115.B332A52C.E3D0A897.IP) (Ping timeout)
[13:18:50] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[13:20:34] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[13:26:02] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[13:28:25] *** Joins: rindolf (Shlomi@5A1EC92D.5015F465.CB858787.IP)
[13:28:32] <rindolf> Hi all.
[13:29:28] <caitp> Hello rindolf.
[13:29:30] <rindolf> http://paste.debian.net/8244/ - I am trying to run this program, but get this error - Â«Reverse_Repeated_Printing.rs:5:99: 5:117 error: mismatched types: expected `&char` but found `char` (expected &-ptr but found char)Â» - on Linux - on the rust trunk - how can I fix it?
[13:29:33] <rindolf> caitp: hi.
[13:29:50] <rindolf> I think the rust reference should have more examples.
[13:30:26] <caitp> I think if you use %c instead of %? it will likely work
[13:30:33] <rindolf> caitp: %c?
[13:30:39] <caitp> in the fmt! string
[13:30:43] <dbaupp> caitp: that probably won't help
[13:30:51] <dbaupp> caitp: %? can print anything and everything
[13:31:03] <caitp> doesn't %? rely on to_str() being implemented?
[13:31:54] <rindolf> caitp: http://paste.debian.net/8245/ - this gives me the same problem.
[13:32:03] <caitp> hmm, weird
[13:32:22] <dbaupp> caitp: no, %? uses reflection
[13:32:25] <rindolf> caitp: the problem is in the .count call.
[13:32:40] *** Joins: cowboyd (cowboyd@1D8844A7.1B729417.CEE440B6.IP)
[13:32:42] <dbaupp> rindolf: .count takes a &T
[13:32:47] <caitp> oh, I see
[13:32:50] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[13:32:53] <dbaupp> rindolf: so .count(&str::char_at(s, 0)) works
[13:32:55] <rindolf> dbaupp: hi.
[13:33:03] <rindolf> dbaupp: ah, OK.
[13:33:27] <caitp> yeah, which is back to the terribleness issue from yesterday again
[13:34:01] <dbaupp> rindolf: also, you can do `for io::stdin().each_line |s| { .. }` instead of manually reading the lines
[13:34:24] <dbaupp> caitp: ? (the format strings are in the (very slow) process of being redone)
[13:35:05] <caitp> no no, the requirements for explicitness
[13:35:07] <dbaupp> rindolf: also, str::char_at_reverse(n) doesn't start n from the back, it starts at that index
[13:35:26] <caitp> it's like nothing has been learned from python :(
[13:35:27] <rindolf> dbaupp: ah.
[13:36:13] <dbaupp> rindolf: also, there are methods on &str, `s.char_at(0)`, `s.char_at_reverse(0)`, ...
[13:36:17] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[13:36:53] <rindolf> dbaupp: thanks.
[13:37:00] <dbaupp> caitp: which particular instance of explicitness is annoying you here?
[13:37:05] <dbaupp> the & ?
[13:37:21] <rindolf> dbaupp: how do I get the $i-th character of string? (Based on characters - not on bytes)?
[13:37:33] <dbaupp> rindolf: hm
[13:37:53] <dbaupp> rindolf: are you trying to iterate over the characters?
[13:38:10] <rindolf> dbaupp: no, I want the first character and the last one.
[13:38:22] <dbaupp> rindolf: oh, s.char_at_reverse(s.len())
[13:38:23] <caitp> any requirement for explicitness is bad, any at all -- it's like asking people to talk like lawyers
[13:38:37] <caitp> if it can possibly be avoided, it should be
[13:38:40] <rindolf> dbaupp: but char_at_reverse is based on *bytes*
[13:38:47] <caitp> for the sake of clarity
[13:38:56] <bjz> caitp: you're in the wrong place for that, sorry :(
[13:38:56] <dbaupp> rindolf: yes, and s.len() is in bytes. strangely enough
[13:39:03] <friggle> caitp: did you see http://pcwalton.github.io/blog/2013/06/02/removing-garbage-collection-from-the-rust-language/?
[13:39:03] <rindolf> dbaupp: ah.
[13:39:04] *** Joins: MaikKlein (maik@moz-972D34E0.dip0.t-ipconnect.de)
[13:39:06] *** Joins: saml (sam@moz-14C16814.cst.lightpath.net)
[13:39:15] <caitp> I haven't actually
[13:39:16] <bjz> caitp: rust is all about being explicit
[13:39:28] <caitp> yeah I see that, but it's a mistake
[13:39:38] <friggle> caitp: seemed very well timed given your complaints yesterday :)
[13:39:58] <caitp> except when absolutely necessary, language should be clear and readable
[13:39:58] *** Joins: reyre (rick@B2D8AB09.33EE9F8A.1139E686.IP)
[13:40:00] <dbaupp> caitp: yeah, most people using/developing rust seem to prefer explicitness (e.g. to be able to reason about the program locally, rather than requiring the whole thing in ones head at once)
[13:40:32] <dbaupp> caitp: since performance (and being able to reason about it easily) is a key part of the design goal
[13:40:56] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[13:41:22] <dbaupp> rindolf: (the string routines are mostly in bytes, even though Rust purports to be unicode by default.)
[13:41:28] <bjz> it's also about providing the compiler with enough information
[13:41:39] <rindolf> dbaupp: ah.
[13:41:40] <bjz> ie. to ensure safety
[13:42:42] <bjz> other languages don't need to be that explicit, but they don't make th same claims as Rust
[13:43:10] <bjz> It's definitely a trade off though
[13:43:14] <dbaupp> rindolf: however, to be clear, anything that is type ~str/&str/@str is utf8 encoded (ignoring bugs in the compiler)
[13:43:16] <caitp> even rust wouldn't require this level of explicitness _everywhere_
[13:43:50] <caitp> a lot of this stuff could be inferred, and if it couldn't be inferred with 100% certainty, a warning could be emit
[13:44:29] <caitp> there's no good reason to require people to be lawyers, it prevents people from communicating the code to other humans
[13:46:03] <rindolf> dbaupp: what does the & at "&s.char_at(0)" do?
[13:46:08] *** Joins: SimonSapin (simon@A5049320.3E93794D.61EA6C28.IP)
[13:46:21] <rindolf> dbaupp: thanks for the input.
[13:46:38] <dbaupp> rindolf: it takes a reference to the return value of s.char_at(0)
[13:47:05] <dbaupp> rindolf: (in machine terms, it's the address of the variable in memory.)
[13:49:18] <rindolf> dbaupp: I see.
[13:49:28] <rindolf> dbaupp: why does vec::count require it?
[13:49:30] *** Quits: reyre (rick@B2D8AB09.33EE9F8A.1139E686.IP) (Ping timeout)
[13:49:38] *** Joins: reyre (rick@B2D8AB09.33EE9F8A.1139E686.IP)
[13:49:50] <dbaupp> rindolf: because otherwise the value would have to be copied into the function
[13:50:05] <dbaupp> rindolf: (i.e. ownership is transferred from the callee to the called function)
[13:50:08] <rindolf> http://www.shlomifish.org/Files/files/code/Reverse_Repeated_Printing.rs - here is my Rust Golf solution to http://golf.shinh.org/p.rb?Reverse+Repeated+Printing - could be optimised.
[13:50:19] <rindolf> dbaupp: ah.
[13:50:28] <caitp> imagine if there was something similar to C++ references, where passing by reference can look just like passing by value, but in fact isn't
[13:50:40] <caitp> wouldn't that just be something incredible and poetic
[13:50:43] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[13:50:48] *** Quits: barosl (barosl@1E71221E.C81E10FB.7544CABF.IP) (Quit: ëžœë¤ì€ ì‡ í‡´í–ˆìŠµë‹ˆë‹¤.)
[13:50:48] <dbaupp> rindolf: which could be quite expensive, but is actually unnecessary, since the eq method only requires a reference
[13:51:17] <dbaupp> caitp: https://github.com/mozilla/rust/wiki/Note-development-policy#conduct specifically "If you have solid ideas you want to experiment with, make a fork and see how it works."
[13:51:39] *** Joins: doomlord (doomlod@moz-3CF8202D.range81-159.btcentralplus.com)
[13:51:44] <caitp> libsyntax is a bit too much of a mess right now, but maybe when I have more time
[13:52:38] <caitp> besides, ain't nobody got time for adding yet another reference type to the language
[13:54:00] <strcat> rusti: 1
[13:54:01] -rusti- 1
[13:54:11] <bstrie> caitp: a whole lot of people really hate how C++ lets you write a pass-by-value that is secretly a pass-by-reference :)
[13:54:13] <dbaupp> caitp: it will likely make the ownership semantics of the code far less clear, since, for example, one can't tell whether x has been moved or not just by looking at foo(x)
[13:54:37] <bstrie> in fact I've heard nothing but praise so far from C++ devs for *not* allowing that in rust
[13:54:42] <MaikKlein> can a trait have members? 
[13:54:53] <strcat> it can have methods and static methods, that's all
[13:54:55] <MaikKlein> like ints
[13:54:58] <strcat> no
[13:55:00] <MaikKlein> hm
[13:55:01] <bstrie> MaikKlein: the functions in a trait definition can have bodies
[13:55:05] <bstrie> theoretically
[13:55:09] <bstrie> not sure if that works very well
[13:55:28] <MaikKlein> well then I want to ask sth
[13:55:32] <dbaupp> bstrie: nope
[13:55:38] <rindolf> http://www.shlomifish.org/Files/files/code/Reverse_Repeated_Printing.rs - a bit shorter.
[13:55:45] <Yoric> bstrie: Praise seconded.
[13:55:48] <dbaupp> rusti: trait Foo { fn f(&self) {} } 
[13:56:01] <caitp> some C++ developers have crazy ideas about what is sensible, really -- if you have strong conventions and a clear language, it's beautiful
[13:56:16] <caitp> if you have ridiculous coding standards and a disaster of a tree, it's less beautiful, but still nice
[13:56:19] *** Joins: strcat1 (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[13:56:31] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (NickServ (GHOST command used by strcat1))
[13:56:32] <dbaupp> rindolf: I think the `io::`'s are optional
[13:56:34] *** strcat1 is now known as strcat
[13:56:38] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[13:57:00] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[13:57:59] <MaikKlein> ok I want to write an abstraction layer for OpenGL. Every object (Shader, Program, Uniform etc) has a Handle int and probably some getter and setter. How do I share this behavior?
[13:58:34] <strcat> make one struct
[13:58:41] <strcat> share it between them
[13:58:44] <strcat> object composition
[13:58:55] <doomlord> r.e. pass by value/reference having the same syntax, its ok if (a) its immutable and (b) ownership is definitely NOT passing
[13:59:15] <strcat> & is only actually immutable for Const things though
[13:59:18] *** kimundi is now known as zz_kimundi
[13:59:20] <rindolf> dbaupp: they appear to be required.
[13:59:25] <doomlord> i usually think  of that in C++ as an optimization - is it easier to pass something in a register (eg a vector in SIMD) or by a pointer? 
[13:59:38] <dbaupp> rindolf: oh? what version of Rust?
[13:59:46] <doomlord> yeah. const blah& is something one types an awful lot in C++
[13:59:48] <rindolf> dbaupp: trunk.
[13:59:55] <rindolf> dbaupp: I mean master HEAD.
[14:00:03] <dbaupp> rindolf: I'm suprised by that
[14:00:05] <rindolf> Well, close to that anyway.
[14:00:09] <dbaupp> rusti: println("foo")
[14:00:11] -rusti- foo
[14:00:11] -rusti- ()
[14:00:12] <caitp> it beats having to declare every goddamned local variable as mut
[14:00:20] <caitp> what on earth is that nonsense
[14:00:32] <strcat> most are usually immutable
[14:00:43] <caitp> most locals are not immutable! they're local for a reason!
[14:00:50] <caitp> locals are usually not shared
[14:00:50] <doomlord> i think the functional style eliminates many locals (loops/iterators)
[14:00:51] <caitp> :u
[14:00:52] <dbaupp> rindolf: (development happens on the incoming branch btw, master only gets updated very occasionally)
[14:01:03] <doomlord> map,filter,reduce ftw
[14:01:05] <dbaupp> caitp: sure they are, you just have to write you code differently
[14:01:18] <dbaupp> caitp: more like Haskell, less like C++
[14:01:18] <MaikKlein> strcat, that's what I thought too, but what if I want to check "hey do you have a Handle"? I don't think this is possible with composition
[14:01:27] *** Quits: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP) (Input/output error)
[14:01:29] *** Joins: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP)
[14:01:38] <strcat> MaikKlein: why?
[14:01:42] <bstrie> caitp: if you want implicitness and mutability-by-default, rust is going to disappoint you :)
[14:01:56] <caitp> yeah, but it shouldn't have to
[14:01:58] <dbaupp> (it's not surprising that trying to squeeze C++ patterns into a language that isn't C++ is going to be annoying)
[14:02:11] <doomlord> speaking of HOFs, how to implement this in rust: go through a collection and get a reference to the element that has the highest value of some given cost function
[14:02:13] <rindolf> dbaupp: well, I think the version on golf.shinh.org is still 0.6
[14:02:28] <dbaupp> rindolf: oh, ok
[14:02:30] <caitp> we can have C++ with closures and a "safer" memory model
[14:02:39] <strcat> doomlord: implement a max function for Iterator taking a function to determine the max
[14:02:40] <caitp> it doesn't have to look like something IBM gave up on
[14:03:17] <doomlord> is this something common enough to find its way into the standard library - its a thing i use alot myself
[14:03:22] <dbaupp> rindolf: even then, print and println were in the prelude
[14:03:22] <strcat> doomlord: yes
[14:03:23] <MaikKlein> strcat, dunno what if I somehow want sth like this fn foo<T: Handle>(h: T){...}
[14:03:36] <bstrie> caitp: I write RPG-LE sometimes, which is a language that IBM *did* actually give up on, and I'm still happy with rust :P
[14:03:42] <doomlord> let item,hiscore = mycollection.findBest( |x| .... ) 
[14:03:47] <strcat> MaikKlein: every opengl handle can be treated the same way?
[14:03:50] <strcat> doesn't sound right
[14:03:52] <caitp> if only they did give up on it :( they still ship it
[14:04:00] <doomlord> wow tuples are  nice
[14:04:53] *** Joins: cstrahan (cstrahan@moz-4C7E5789.hsd1.dc.comcast.net)
[14:05:07] <bstrie> caitp: true, but java and php are the, er, "new" hotness in IBM-land
[14:05:33] <MaikKlein> can I give enums a default member?
[14:05:46] <strcat> MaikKlein: no
[14:06:13] <MaikKlein> I probably think too much in c++ terms
[14:06:15] <MaikKlein> :(
[14:06:44] <caitp> C++ enums can have defaults?
[14:07:02] <strcat> nope
[14:07:04] <caitp> you can have nominal enums though
[14:07:47] <MaikKlein> what are nominal enums?
[14:07:51] <caitp> which, i haven't tested this, but probably will be initialized to the equivalent of '0'
[14:07:56] <MaikKlein> ah
[14:08:32] <strcat> caitp: in C++? you mean the enum class ones? I don't think they have a default constructor
[14:08:53] <caitp> I was asking what MaikKlein  meant by "can I give enums a default member?"
[14:09:06] <caitp> when they said "I probably think too much in c++ terms"
[14:09:33] <doomlord> i get the impression rust isn't so bad for people who think in c++ terms... a cleaned up c++
[14:09:37] <caitp> because i'm not aware of a c++ analog for that
[14:10:30] <MaikKlein> caitp, so every enum could have a member handle: int
[14:10:43] <MaikKlein> that's what I was thinking of
[14:11:04] <strcat> don't know what you mean by default in this case
[14:11:16] *** Joins: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com)
[14:11:46] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[14:11:53] <caitp> since in OpenGL "handles" are generally GLuint or GLint iirc, why not just pub struct GLFoo(int); or something
[14:12:20] <strcat> and they likely are only valid for use as a specific "type"
[14:12:36] <strcat> how much generic code can you really write treating them as a generic handle?
[14:12:38] <strcat> instead of a typed one
[14:13:39] <MaikKlein> afaik all objects that are requesting memory all have some kind of handle
[14:14:07] <MaikKlein> I just try it with composition now
[14:14:17] <strcat> so what kind of generic code are you going to write on handles of unknown types?
[14:14:37] <MaikKlein> ah probably no generic code at all
[14:14:40] <MaikKlein> in this case
[14:14:59] <strcat> well, I don't really understand why you want it then
[14:15:04] <MaikKlein> I was just curious in how I would so sth like this
[14:15:11] *** zz_kimundi is now known as kimundi
[14:15:26] <MaikKlein> well doesn't matter
[14:15:33] <MaikKlein> I ask again if I find a better example
[14:17:06] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[14:18:57] *** Quits: sawrubh (uid6719@moz-D8B63698.irccloud.com) (Ping timeout)
[14:18:57] *** Quits: jihyun (uid7128@moz-D8B63698.irccloud.com) (Ping timeout)
[14:19:42] <caitp> you could also provide a GLHandle trait or something shared by all of them if there is anything that each handle type does in fact have in common
[14:19:59] <caitp> like introspecting properties such as "type()" or something
[14:20:59] <caitp> i'm not sure how useful it would be in an application though
[14:21:41] *** Joins: unbracketed (textual@moz-7F0EE151.lsanca.fios.verizon.net)
[14:22:30] <rindolf> dbaupp: thanks! I was able to remove one of the io::s - http://www.shlomifish.org/Files/files/code/Reverse_Repeated_Printing.rs
[14:22:47] <MaikKlein> there is only trait inheritance right?
[14:23:16] <strcat> yes
[14:24:00] <dbaupp> rindolf: oh, right! i forgot that stdin() wasn't in the prelude :)
[14:24:43] <dbaupp> rindolf: do you need to use utf8, or is bytes/ascii ok?
[14:24:45] <rindolf> dbaupp: :-)
[14:24:46] *** Joins: victorporof (victorporo@8B3CDCA.67B94DB5.4A6B528C.IP)
[14:24:48] *** Quits: unbracketed (textual@moz-7F0EE151.lsanca.fios.verizon.net) (Quit: Computer has gone to sleep.)
[14:24:53] <rindolf> dbaupp: bytes/ascii is fine.
[14:24:55] <dbaupp> rindolf: because you can index a string with [0]
[14:25:02] <rindolf> dbaupp: ah.
[14:26:22] *** Joins: cmr_ (cmr_@1BD98D1C.50B803AF.E299D283.IP)
[14:26:49] *** Joins: lmandel (lmandel@F2D29657.F60B0462.67AC9B1.IP)
[14:26:49] *** Joins: molnarg (darkelf@moz-A80E711.clients.your-server.de)
[14:27:32] *** Joins: svenstaro (svenstaro@moz-1E96A5B8.com)
[14:28:27] <rindolf> dbaupp: how can you convert a u8 to its ASCII codepoint?
[14:28:48] <rindolf> Like I have s[0] - how do I print it as a character?
[14:28:51] <dbaupp> rusti: 65 as char
[14:28:54] -rusti- 'A'
[14:29:05] <dbaupp> rindolf: I guess that's possibly longer
[14:29:20] <strcat> and the casts to char need to go away
[14:29:29] <strcat> they cause unsoundness indirectly
[14:29:37] <dbaupp> rusti: 10000000000 as char
[14:29:38] -rusti- '\U540be400'
[14:30:02] <strcat> and now code rightly assuming that 4 bytes is the maximum encoding length will break
[14:30:04] <dbaupp> rusti: (-1) as char
[14:30:05] -rusti- rust: task failed at 'assertion failed: s.len() <= pad', /build/rust-incoming-git/src/rust/src/libstd/char.rs:211
[14:30:05] -rusti- rust: domain main @0xb731b0 root task failed
[14:30:05] -rusti- application terminated with error code 101
[14:30:35] <dbaupp> strcat: isn't that true for non-legacy utf8?
[14:30:47] <dbaupp> (i.e. 4 bytes is the maximum)
[14:30:57] <strcat> dbaupp: yes, that's why I said rightly assuming
[14:31:05] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[14:31:16] *** Quits: seth (seth@moz-D840E602.dsl.static.sonic.net) (Input/output error)
[14:31:17] <strcat> you shouldn't be able to make invalid 'char' without unsafe 
[14:31:18] *** Joins: jack (jack@moz-1DC9BB81.lsanca.dsl-w.verizon.net)
[14:31:20] <dbaupp> oh! (words are hard to read sometimes ;P )
[14:31:32] <dbaupp> strcat: yeah, I totally agree
[14:32:14] <strcat> but anyway these str/vec modules just get bigger and bigger but 90% of the stuff in them is redundant and/or broken ;\
[14:32:32] <cmr_> yup
[14:33:01] <dbaupp> it's my favourite part of rust... working out which of the 100 vec/str functions is the right one :/
[14:33:13] <rindolf> dbaupp: http://www.shlomifish.org/Files/files/code/Reverse_Repeated_Printing.rs - shorter now.
[14:33:17] <strcat> I don't think we value minimal complete APIs enough
[14:33:24] <strcat> we just add 20 versions of the same stuff ;\
[14:33:31] <strcat> and it's impossible to find what you want or learn the API
[14:33:40] <strcat> anyway, oh well
[14:33:50] <strcat> it would be a cultural change to start doing it differently
[14:33:50] *** Joins: pnkfelix|rcirc (pnkfelix@moz-43495417.fbx.proxad.net)
[14:33:52] *** Joins: berak (chatzilla@71D095D9.5F42470D.16E13E53.IP)
[14:34:01] <dbaupp> yeah, the problem is getting stuff generic enough to be useful
[14:34:18] <strcat> well we have .find().unwrap() but we're still adding get, get_mut and so on
[14:34:21] <dbaupp> (if people used iterators more it'd help!)
[14:34:21] <strcat> why?
[14:34:23] *** Joins: Blei (philipp@moz-96D25F7A.cust.bluewin.ch)
[14:34:38] <strcat> we make the bad practice easier than the good practice
[14:34:47] <dbaupp> because it's shorter? I don't know
[14:35:10] <cmr_> Hides the complexity when you don't care
[14:35:25] <dbaupp> rindolf: nice!
[14:35:27] <strcat> Option isn't really complex
[14:35:28] <cmr_> course, I'd rather have get use .expect("author is lazy") ;)
[14:36:11] <strcat> .expect("cached directory not found") is much better than "key not found"
[14:37:25] <doener> cmr_: got the lz4 stuff working
[14:37:25] <strcat> cmr_: I mean look at the gigantic interface in std::hashmap now
[14:37:28] <bjz> strcat: there was talk of removing unwrap and having get move
[14:37:43] <cmr_> doener: what was it?
[14:37:50] <strcat> cmr_: if we want to make that generic, it places a *huge* burden on anyone implementing a map type
[14:37:59] <dbaupp> strcat: I guess a fairly significant part is the language and APIs changing so much that things that were "correct" 6 months ago are now obsolete
[14:38:12] <strcat> dbaupp: well get_mut was added this week ;\
[14:38:12] <dbaupp> (i'm sure you knew that though)
[14:38:24] <strcat> and we're still adding stuff using the obsolete Copy trait, etc.
[14:38:42] <dbaupp> you should send a mailing list email, or something?
[14:38:47] <doener> cmr_: a few things. Used the same field for compressed and uncompressed length, passed "len" as "end" (instead of current pos + len), values swapped in the assertion
[14:38:48] * strcat shrugs
[14:38:56] <dbaupp> doener: nice! is it faster?
[14:38:59] <cmr_> API Minimization and Simplification Task Force, go!
[14:39:12] <cmr_> (I'm not joking)
[14:39:23] <bjz> strcat: we could start trying to remove those free-standing functions in vec/str
[14:39:27] <strcat> cmr_: well I tried but now get_copy, find_copy, etc. are back
[14:39:38] *** Joins: sk (sk@EA324BFE.54A580E3.78DD174B.IP)
[14:39:50] <doener> dbaupp: only very little currently, most of the gains are eaten by the awful to_owned method for vectors (a loop with push). I'm compiling a version that uses vec::to_owned() instead now
[14:40:03] <dbaupp> strcat: you could at least start the discussion (and tell people to use Clone in big letters!)
[14:40:06] <doener> well, it updates the method to call vec::to_owned()
[14:40:10] <strcat> dbaupp: it's not about using Clone
[14:40:18] <strcat> we shouldn't have duplicate APIs like this
[14:40:21] <bjz> strcat: I traitified connect an concat for &[~[T]] and &[~str], but left the free standing functions
[14:40:29] <strcat> there's *no reason* for HashMap to do a copy for you
[14:40:38] <dbaupp> Oh, I guess .get().clone(), does what you want?
[14:40:38] <strcat> foo().clone() is not harder than foo_clone()
[14:40:49] <strcat> dbaupp: well I don't want get but...
[14:40:59] <strcat> dbaupp: here's our problem
[14:41:00] <doener> cmr_: pushed the amended wip commit to metadata-lz4 in my repo
[14:41:02] <strcat> we could have 2 functions
[14:41:04] <strcat> instead we have 12
[14:41:10] <strcat> with every combination of copy, fail, clone
[14:41:11] <bjz> dbaupp: get() should move, not copy
[14:41:26] <bjz> dbaupp: unwrap should be removed
[14:41:32] <dbaupp> bjz: return by ref, surely?
[14:41:46] <cmr_> doener: You can drop the LZ4Container, really, and just add a function decompress(expectedlen: c_int, bytes: &[u8]), which would avoid copies entirely.
[14:41:48] <caitp> take() should move, get() should return a reference
[14:41:53] <bjz> dbaupp: is what pcwalton and nmatsakis I think were saying
[14:41:55] <cmr_> In hindsight the LZ4Container was a really bad idea
[14:42:03] <bjz> dbaupp: Oh, I meant for option/result
[14:42:07] <strcat> and the one I really hate is that we have is_foo() and is_not_foo() for most predicates
[14:42:09] <dbaupp> bjz: oh, right
[14:42:12] <strcat> that's just ridiculous
[14:42:23] <bjz> strcat: those can be removed
[14:42:28] <doener> cmr_: I'll leave that to you ;-) And we'll want a faster to_owned() anyway
[14:42:48] <cmr_> Alright.
[14:42:49] <strcat> bjz: and then added back apparently :(
[14:42:51] <cmr_> doener:thanks for fixing it :)
[14:42:55] <dbaupp> bjz, strcat: I heard at least one core dev say they liked is_not_* ... not sure who it was
[14:42:57] <doener> my pleasure
[14:43:09] <friggle> yes, I remember that comment too
[14:43:19] <friggle> is_not reading better than !is_...
[14:43:30] <strcat> friggle: then the problem is !
[14:43:34] <strcat> and we should remove ! and call it not
[14:43:40] <strcat> doubling API size is not a solution
[14:43:48] <dbaupp> strcat: I think it was more the ordering of the symbols
[14:43:59] <strcat> every single function returning bool is going to have a duplicate? that's *ridiculous* ;\
[14:44:03] <friggle> strcat: I agree it's messy, doesn'ty seem like the biggest problem in the world to me as long as one is implemented in terms of the other
[14:44:12] <caitp> but it's so clean and pure
[14:44:13] <dbaupp> strcat: `not foo.is_baz()` flows less well than `foo.is_not_baz()`, or something
[14:44:13] <strcat> friggle: sure but we have 100 of these problems
[14:44:16] <caitp> how could you not love it
[14:44:31] <cmr_> I would prefer "not" to "!"
[14:44:42] <strcat> dbaupp: yeah and a page with 100 functions is harder to read than a page with 5 doing the same thing
[14:44:48] <strcat> there is a *cost* to *every* function you add to an API
[14:44:50] <dbaupp> strcat: agreed
[14:44:55] <benh> we just need a .! operator so we can do foo.!is_baz()
[14:45:27] <strcat> we get questions about how to split strings because we have so many ridiculous variations of things making it impossible to find
[14:45:30] <caitp> what's wrong with just putting it before the expression like a normal unary operator
[14:45:35] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[14:45:49] *** Quits: cmr_ (cmr_@1BD98D1C.50B803AF.E299D283.IP) (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
[14:45:53] <dbaupp> friggle: part/most of the problem is having 100s of ways to do any task, and so everyone does different things and no-one can read the docs
[14:45:56] <strcat> http://static.rust-lang.org/doc/core/vec.html from a user's POV
[14:45:58] <strcat> this is awful
[14:46:15] <strcat> all, all2, alli, any, any2 - all of these are useless, they can be on iterators
[14:46:31] <friggle> dbaupp: yes, good point
[14:46:37] <strcat> contains, count, each2, eachi, same thing
[14:46:44] <strcat> foldl
[14:46:50] *** Joins: unbracketed (textual@moz-7F0EE151.lsanca.fios.verizon.net)
[14:46:59] <strcat> I'm not going to spend time removing them because they're still being added though.
[14:47:00] <dbaupp> strcat: seriously, bundle this thread into a mailing list email, or a blog post, reddit self post or something!
[14:47:06] <strcat> dbaupp: yeah I should.
[14:47:40] <friggle> a framework was put in place for individual stdlib contributions, but it sounds like there's some need for a cleanup/general style plan.
[14:47:42] <dbaupp> strcat: I'm guessing a lot of people won't even know about std::iterator
[14:47:48] <caitp> fn Foo { fn not() -> bool { â€¦ } } for when is_not_foo() needs to do something weird for some reason
[14:47:53] <caitp> er
[14:47:55] <caitp> impl Foo
[14:48:05] <strcat> dbaupp: and that's a problem ;p, they don't know about it *because* we have all these duplicates
[14:48:10] <benh> imo the html docs are mostly useless because 1) functions aren't grouped under meaningful headers and 2) there's no interlinking :/
[14:48:12] <friggle> if the proposal to remove gc goes through, at least that means a concerted effort to get rid of @
[14:48:18] <dbaupp> strcat: yeah... so publicise it ;)
[14:48:26] <strcat> benh: and because there should be 15 functions here but there are 100
[14:48:36] <dbaupp> benh: yeah, rustdoc needs improvements
[14:48:50] <dbaupp> friggle: I think it's essentially just renaming it
[14:49:03] <dbaupp> (and moving the implementation to library-space)
[14:49:11] <benh> I like the structure of http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-List.html
[14:49:29] *** Quits: SingingBoyo (androirc@moz-94AE1D3A.bchsia.telus.net) (Client exited)
[14:49:31] *** Joins: SingingBoyo (androirc@moz-94AE1D3A.bchsia.telus.net)
[14:49:31] <friggle> dbaupp: sure, but I would expect core/extra libs using Gc<> will stick out more and be further discouraged
[14:49:39] *** Quits: SingingBoyo (androirc@moz-94AE1D3A.bchsia.telus.net) (Client exited)
[14:49:41] *** Joins: SingingBoyo (androirc@moz-94AE1D3A.bchsia.telus.net)
[14:49:43] *** Quits: unbracketed (textual@moz-7F0EE151.lsanca.fios.verizon.net) (Quit: Computer has gone to sleep.)
[14:49:59] <strcat> benh: http://static.rust-lang.org/doc/core/clone.html I think this isn't bad at all
[14:50:04] <kimundi> rusti: 99u8.to_ascii().to_char()
[14:50:05] -rusti- 'c'
[14:50:11] <kimundi> rusti: 255u8.to_ascii().to_char()
[14:50:12] -rusti- rust: task failed at 'assertion failed: self.is_ascii()', /build/rust-incoming-git/src/rust/src/libstd/str/ascii.rs:114
[14:50:12] -rusti- rust: domain main @0xfaa1b0 root task failed
[14:50:12] -rusti- application terminated with error code 101
[14:50:27] *** Joins: unbracketed (textual@moz-7F0EE151.lsanca.fios.verizon.net)
[14:50:31] <benh> strcat: needs a nested ToC that has meaningful headings instead of listing every single impl imo
[14:50:36] <dbaupp> strcat: the formatting isn't great
[14:50:48] <kimundi> ^ At whoever was talking about char casts being bad before.
[14:51:20] <benh> and if you scroll through it it's a 100 repetitions of "return a deep copy of the value"
[14:51:25] <benh> it's kind of a trivial case to document
[14:51:50] *** Quits: mib_2iixrj (Mibbit@moz-A0E225F0.avcosystems.co.uk) (Quit: http://www.mibbit.com ajax IRC Client)
[14:51:50] *** Quits: unbracketed (textual@moz-7F0EE151.lsanca.fios.verizon.net) (Quit: Computer has gone to sleep.)
[14:51:57] <dbaupp> kimundi: that's nicer, but it doesn't solve the problem of 1) getting a non-ascii utf8 value safely, and 2) being able to cast an arbitrary int to a char
[14:52:03] *** Joins: cscottnet (cscott@moz-2577C94A.net)
[14:52:16] <benh> also with stuff like built-in vector or string types I'd rather err towards having a pile of redundant functionality than have people go "ugh this is so much easier in perl"
[14:52:21] <benh> just needs organized docs :/
[14:53:02] <strcat> benh: redundant functionality is what makes it hard to use
[14:53:12] <strcat> here, how do you join 5 strings together with a separator
[14:53:13] <dbaupp> benh: the problem is when most of the redundancy is stupid and *trivially* implemented in other ways
[14:53:40] <benh> connect is like one of the functions i actually used ;)
[14:53:51] <kimundi> dbaupp: I don't understand the first point. But the seconde should be forbidden/size asserted
[14:54:13] *** Quits: jack (jack@moz-1DC9BB81.lsanca.dsl-w.verizon.net) (Quit: Leaving.)
[14:54:21] <benh> my opinion is that we aren't going to get every generated html file down to the size of the docs for an interface with a single method that does something simple for every implementation
[14:54:43] <benh> and we ought to deal with the resulting complexity rather than just proclaiming it's bad :/
[14:54:58] *** Quits: igl (igl@moz-F81201D5.adsl.alicedsl.de) (Ping timeout)
[14:55:05] *** Joins: igl (igl@moz-E9E3740A.adsl.alicedsl.de)
[14:55:14] <kimundi> Maybe the rule could be made that 'as' does safety checks? If that's a performance problem then use unsafe cast methods
[14:55:18] <strcat> python has 11 normal methods on [] and I've never felt anything is missing
[14:55:25] <strcat> they have far more functionality than we do through iterators
[14:55:32] <dbaupp> kimundi: the first point is "how do I cast 246 to Ã¶ safely now?", it's not possible other than a manual check and then 'as char'
[14:55:40] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[14:55:45] *** Parts: berak (chatzilla@71D095D9.5F42470D.16E13E53.IP) ()
[14:56:05] <strcat> I can't see something in rust's vec module that they don't have (keeping in mind that str/vec avoid @str/@[] so we don't have that as an excuse)
[14:56:34] <benh> Can you link to the docs for the 11 methods?
[14:57:00] <strcat> benh: http://docs.python.org/3.3/tutorial/datastructures.html
[14:57:11] <strcat> no table of contents
[14:57:18] <dbaupp> benh: as strcat says, there are 21 functions starting with 'all' in std, which could be implemented as a single method on iterators
[14:57:28] <benh> I don't see .len() for once :)
[14:57:35] <dbaupp> (maybe 2 or 3)
[14:57:55] <strcat> benh: they don't have a len method, len() is a separately documented function working on any container
[14:58:06] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[14:58:07] <strcat> this is just methods
[14:58:26] <strcat> you can just ignore the Container and operator impls in str
[14:58:31] <strcat> and it's the same thing
[14:58:55] <kimundi> dbaupp: So we need a 'to_char<T: NumCast>(n: T) -> Some(char) { if n <= cast(CHAR_MAX_VALUE) { Some(n as char) } else { None }}'
[14:58:57] *** Joins: joebobjoe (joebobjoe@55F2E07A.7F841963.2213276E.IP)
[14:59:06] <benh> i don't think hiding functionality in separate pages is a great solution for being unable to find functioniality in the vec docs
[14:59:11] <strcat> benh: it's not hidden.
[14:59:22] <strcat> benh: you learn iterators once, you can use them for any container
[14:59:47] <kimundi> benh: The problem/solution is that a iterator is composable.
[14:59:50] <strcat> why 20 methods on each container over a *single* method for all of them?
[15:00:13] <kimundi> benh: So, instead of a buch of specialsied each functions, just two chaned iterators
[15:00:34] <dbaupp> kimundi: yeah, just have char::from_u32(n: u32) -> Option<char> { } and deprecate `as` for char
[15:00:54] <kimundi> dbaupp: Well as is still necessary for constexpr
[15:00:59] <strcat> benh: http://docs.python.org/2/library/stdtypes.html#typesseq documentation for *all* sequence types
[15:01:04] <strcat> including lists, but not specific to them
[15:01:07] <dbaupp> kimundi: bytes!(..) or something?
[15:01:34] *** Quits: jyyou (jyyou@moz-47B052FA.cs.nctu.edu.tw) (Ping timeout)
[15:01:39] <benh> I still think str.join(iterable) is completely backwards
[15:01:40] <dbaupp> (one really shouldn't be casting raw ints to chars. either one wants a literal char, or they should be using u8's)
[15:01:55] <strcat> benh: why?
[15:02:03] <strcat> benh: here's the thing -> there are different types are strings
[15:02:09] <strcat> benh: there are different kinds of iterables
[15:02:11] <benh> and I'm not good with python but I've never found anything I needed in their docs, I always just google for my one-off needs :)
[15:02:19] <strcat> python has 1 method for joining anything to a string
[15:02:26] <strcat> you learn *one* method, not 200
[15:02:37] <kimundi> dbaupp: Either that or just change 'as' to cause runtime checks, so it either fails at compiletime in constexpr, or at runtime in non-constexpr
[15:03:00] <benh> Yeah but I never think of it as "this string here has to duplicate itself n-1 times and then arrange the iteratees around/between itself"
[15:03:15] <strcat> benh: that's not how it's supposed to read
[15:03:17] <dbaupp> kimundi: I guess that would work, but that seems like it'd complicate 'as' unnecessarily
[15:03:19] *** Joins: jyyou (jyyou@moz-47B052FA.cs.nctu.edu.tw)
[15:03:25] <strcat> benh: "join an iterable with a string"
[15:03:30] <strcat> benh: you don't need to make it sound ridiculous
[15:03:40] <kimundi> dbaupp: A lot of things in rust are unnecessary complicated for the sake of safety ;)
[15:03:44] *** Quits: igl (igl@moz-E9E3740A.adsl.alicedsl.de) (Ping timeout)
[15:03:44] <dbaupp> strcat: wouldn't that be better to be iterable.join(string)?
[15:03:47] <benh> but it's a string method!
[15:03:53] <strcat> dbaupp: so you'd rather have 2000 implementations?
[15:03:54] <dbaupp> kimundi: and yes, that's why it'd be a whole function
[15:03:56] <strcat> one for every iterable
[15:03:58] <benh> you gotta read it with the string first!
[15:04:05] <strcat> benh: yeah, it's a string method, and I read it with the string first
[15:04:10] <strcat> here's a string, join an iterable with it
[15:04:13] <strcat> there's nothing hard about that
[15:04:24] <dbaupp> strcat: I was assuming it'd be generic on iter, but thinking about it, it wouldn't really work
[15:04:34] *** Joins: igl (igl@moz-8CCC9B33.adsl.alicedsl.de)
[15:04:38] <strcat> to_vec shouldn't be on iterables
[15:04:40] <strcat> are we going to have
[15:04:41] <strcat> to_hash_set
[15:04:42] <strcat> to_hash_map
[15:04:45] <strcat> to_small_vec
[15:04:47] <strcat> to_str
[15:04:49] <strcat> really?
[15:04:50] *** Joins: pyrac (pyrac@moz-96C2FD1F.w109-214.abo.wanadoo.fr)
[15:04:51] <strcat> no way.
[15:05:01] *** Joins: wilsonk|2 (kvirc@moz-39EFBFC2.cg.shawcable.net)
[15:05:02] <strcat> we're going to have a FromIterable trait and implement it in their modules
[15:05:17] <strcat> maybe it doesn't read well to you, but it's sure as hell simpler and easier to learn
[15:05:36] <strcat> if rust is going to have 1000 duplicate methods that are unusable in generic code... I don't want to use rust
[15:05:39] *** Quits: wilsonk-laptop (kvirc@moz-39EFBFC2.cg.shawcable.net) (Ping timeout)
[15:05:55] *** Quits: SimonSapin (simon@A5049320.3E93794D.61EA6C28.IP) (Quit: Leaving.)
[15:05:55] <doy> benh: it's "join($str, @list)" in perl too, which is as close as perl gets to having it be a method on strings (rather than on the list)
[15:06:06] <kimundi> strcat: Well to be honest Nothing speaks against an to_vec extension method
[15:06:32] <kimundi> strcat: It just shouldn't be defined in the iterator module, but as an seperate trait in the vec module
[15:06:34] <benh> i can't get my head around making it an operation on strings, sorry :(
[15:06:47] <strcat> kimundi: can't be generic that way
[15:06:48] <dbaupp> strcat: that means that our equivalent of str.join(iterable) can be actually be a method on Iterator/IteratorStrUtil (or something, right?
[15:06:56] *** Joins: Jesin (Jessin_@moz-157A63DD.cc.lehigh.edu)
[15:07:03] <kimundi> strcat: SO, everyone can add their specialsied cast function if they want to and it increases readability.
[15:07:05] <strcat> dbaupp: no
[15:07:08] <strcat> dbaupp: that's not generic
[15:07:15] <strcat> that requires you to use a specific string impl
[15:07:15] <kimundi> strcat: Why not?
[15:07:25] <strcat> kimundi: because to_vec isn't generic
[15:07:36] <kimundi> strcat: Define generic please
[15:07:38] <strcat> from_iterator on containers is generic
[15:07:46] <strcat> kimundi: usable in generic code. not tying you to specific containers
[15:08:00] *** Parts: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (It's a joke. It's all a joke.)
[15:08:08] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[15:08:09] <strcat> std::str and std::vec aren't God types, we are going to have small vectors, ropes, etc.
[15:08:16] <strcat> sets, maps, queues
[15:08:29] <kimundi> strcat: Well it would be a cast function with the sole purpose of tying you to a specific container so... I think we are talking about differen things?
[15:08:54] <strcat> kimundi: I don't think so
[15:09:08] <strcat> you can go from any container to any container with from_iterator(xs.iter())
[15:09:12] <dbaupp> strcat: I don't believe it does require us to use a specific string impl, we just need to have a Str trait with the appropriate metohds
[15:09:30] <dbaupp> (i.e. push_str, or whatever)
[15:09:37] <strcat> dbaupp: still ties you to strings or vectors
[15:09:49] <strcat> there's no reason for conversion functions from anything but an iterator
[15:10:03] <strcat> how do you convert a HashSet to a TreeSet?
[15:10:04] <dbaupp> I'm not sure where talking about the same thing...
[15:10:13] * strcat shrugs
[15:10:15] <dbaupp> I'm talking about iter.connect(sep)
[15:10:19] <strcat> dbaupp: oh
[15:10:21] <dbaupp> (I agree about the containers)
[15:10:37] <kimundi> strcat: What I'm talking about is: You should write code that is generic over a container by using generics etc. But if you WANT to dump it in a vector because of whatever reason, a havin a to_vec() extension method is nicer than writing vec::from_iterable()
[15:10:56] <strcat> kimundi: it's not nicer if it's an extra method to learn and from_iterable already exists
[15:11:04] <strcat> smaller APIs are easier to use/learn
[15:11:07] <strcat> that has value
[15:11:37] <kimundi> strcat: Well, teach from_iterable, and let them discover to_vec themselfes.
[15:11:41] <dbaupp> kimundi: part of the point of iterators is avoiding have to actually allocate a vec
[15:11:45] <strcat> from_iterable(xs) vs {xs.to_vec, xs.to_hash_set, xs.to_tree_set, ...}
[15:11:49] <caitp> what would be a good way to write tests involving asynchous tasks? like, can I ask to wait for a task to finish or timeout?
[15:11:52] <strcat> kimundi: it shouldn't exist though
[15:12:01] <strcat> kimundi: why not have to_hash_set, to_hash_map, etc. too?
[15:12:03] <caitp> can I have orange tests in the rust test harness?
[15:12:22] <kimundi> strcat: Sure they can all exist to
[15:12:25] *** Joins: H4199 (chatzilla@moz-64E556D3.austin.res.rr.com)
[15:12:38] <kimundi> strcat: Just not as part of the iterator libary
[15:12:57] <strcat> kimundi: and now you have 150 methods on iterators to convert to containers based on what's in scope, why? ...
[15:13:00] <Blei> do rust's iterators know about the size of their respective container?
[15:13:01] <kimundi> strcat: But as a little extensionMethod trait hidden somewhere in their corresponding modules
[15:13:04] <strcat> kimundi: it still appears somewhere in the docs
[15:13:15] <strcat> Blei: they can be taught to have size hints
[15:13:18] <dbaupp> Blei: i.e. how many things they iterate over?
[15:13:23] <Blei> yeah, cool
[15:13:48] <strcat> kimundi: there is a huge learning overhead from having 1000 functions to do what 1 could do just as well
[15:13:50] <Blei> that's the one common optimization that's not possible with "standard" iterators
[15:13:54] <dbaupp> kimundi: this can actually be done outside of the std library
[15:13:56] <kimundi> strcat: I get your argument that an api should be small. But if your to radical you can also end up with one thats too small.
[15:14:10] <kimundi> dbaupp: That was my point basically
[15:14:12] <dbaupp> kimundi: unlike many languages, so there could be a 'utils' crate that does all this
[15:14:24] <strcat> yeah and it shouldn't be in the stdlib.
[15:14:33] <strcat> really
[15:14:50] <strcat> having a conversion function from each container to each container doesn't belong in the stdlib
[15:14:50] <dbaupp> and then with rustpkg, it'll be trivial to get a million methods to do every little task
[15:15:16] <SiegeLord> What exactly is wrong with x.from_iter(y.iter()) ?
[15:15:32] *** Quits: victorporof (victorporo@8B3CDCA.67B94DB5.4A6B528C.IP) (Connection reset by peer)
[15:15:44] <dbaupp> SiegeLord: it'd end up looking something like FromIterable::from_iter(y.iter())
[15:15:54] <kimundi> dbaupp, strcat: Not that there SHOULD be to_vec, etc... functions, but that having one CAN be nicer, if optional.
[15:15:59] <dbaupp> which is slightly less nice, but not hugely so
[15:16:03] <strcat> kimundi: ok so lets say we have 20 containers
[15:16:24] <strcat> kimundi: do you realize how many conversion methods they are going to have? ;\
[15:16:45] <dbaupp> SiegeLord: (that syntax is possibly not correct though... since I don't really understand the implications of the proposed associated items changes yet)
[15:17:00] <strcat> dbaupp: it would actually be
[15:17:06] <kimundi> strcat: Yeah. But you don't have to import them all in your scope if you don't want them
[15:17:07] <strcat> FromIterable::from_iterable(xs)
[15:17:16] <dbaupp> strcat: oh, right, yes
[15:17:16] <strcat> dbaupp: once we have an Iterable trait there are no .iter calls
[15:17:20] <SiegeLord> dbaupp, can't you get something like let x : Blah = from_iter(x.iter)?
[15:17:31] <dbaupp> SiegeLord: yeah, probably
[15:17:34] <strcat> kimundi: they are still in the docs
[15:17:39] <strcat> they are still functions we need tests for
[15:17:51] <strcat> kimundi: honestly, look in the vec module docs
[15:17:57] <strcat> you can't tell me that's okay/reasonable
[15:18:12] <kimundi> strcat: They would all just be short wrappers for the from_iterable call... 
[15:18:18] *** Quits: fabiand (fabiand@moz-571979A5.adsl.alicedsl.de) (Quit: Verlassend)
[15:18:24] <dbaupp> kimundi: they still take up space in the docs
[15:18:33] <strcat> kimundi: still going to appear in the docs and make everything that's not useless hard to find
[15:18:57] *** Quits: igl (igl@moz-8CCC9B33.adsl.alicedsl.de) (Ping timeout)
[15:19:03] <kimundi> whatever, it's not something I wanted to argue about...
[15:19:07] <strcat> every function added to an object makes it harder to use, because there are more functions to look through
[15:19:21] <strcat> it needs to have value or it's a net negative
[15:19:55] *** Joins: igl (igl@moz-66401F12.adsl.alicedsl.de)
[15:19:59] <strcat> if you add a duplicate method to every container you also have to keep it in sync everywhere
[15:20:05] <MaikKlein> any idea how I can avoid the duplicated constructor for FragmentShader https://gist.github.com/MaikKlein/5698913 ? Note that VertexShader and FragmentShader are virtually the same, just named differently.
[15:20:09] <strcat> fold on every container, now you have 20 fold functions + docstrings to maintain
[15:20:19] <strcat> it doesn't matter if they're implemented on top of the same code
[15:20:27] <kimundi> strcat: My point is basically that if you abstract to much, code somewhere tends to get to verbose.
[15:20:32] <strcat> they have a documentation cost for users and a maintenance cost
[15:20:45] <strcat> kimundi: it's not an abstraction though, it's just simpler.
[15:20:58] <dbaupp> kimundi: and not abstracting enough can have the same effect
[15:21:21] <strcat> I'm not even talking about iterators being more abstract/generic
[15:21:35] <strcat> I'm talking about it being vastly simpler than our current ridiculous APIs
[15:21:41] *** Quits: igl (igl@moz-66401F12.adsl.alicedsl.de) (Ping timeout)
[15:21:42] *** Joins: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP)
[15:21:45] *** Joins: igl (igl@moz-8212271A.adsl.alicedsl.de)
[15:22:05] <engla> composable was the thing. Also that an object could provide many different iterators but only one .each() method
[15:22:27] <strcat> here's another example
[15:22:28] <kimundi> Then why do we have 'foo.to_u32()'?
[15:22:38] <strcat> kimundi: that's unrelated
[15:22:44] <kimundi> It the same situation
[15:22:47] <strcat> no it isn't
[15:22:58] <dbaupp> kimundi: it's not necessarily a good thing
[15:23:00] <strcat> integers aren't iterable or created from iterators
[15:23:27] *** Quits: igl (igl@moz-8212271A.adsl.alicedsl.de) (Ping timeout)
[15:23:30] *** Quits: Blei (philipp@moz-96D25F7A.cust.bluewin.ch) (Quit: WeeChat 0.4.1)
[15:23:30] <kimundi> "specific convenience methods that wrap the more verbose generic call"
[15:23:39] <dbaupp> kimundi: very little of the standard library can be held up as an example of a good API yet, since there is a lot of legacy waste there.
[15:23:43] *** Joins: igl (igl@moz-823E37BE.adsl.alicedsl.de)
[15:23:47] <strcat> kimundi: I don't think that wraps a generic call
[15:23:56] <strcat> unless we have numeric_cast::<T, U> somewhere
[15:24:02] <kimundi> we have
[15:24:13] <strcat> how does that work?
[15:24:49] <strcat> I can cast a gmp integer to a float from some other lib? don't see how it'd work
[15:25:18] <strcat> iterators do work like that with containers
[15:25:24] <kimundi> rusti: let n: u8 = num::cast(45f); n
[15:25:26] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/ePeg
[15:25:30] <strcat> a third party lib implementing a hash table should be as first-class as the built-in hash table
[15:25:32] <kimundi> rusti: let n: u8 = std::num::cast(45f); n
[15:25:34] -rusti- 45
[15:25:56] <strcat> kimundi: I'm sure that doesn't work for third party types
[15:26:14] <strcat> it's just hardcoded for the built-ins
[15:26:17] <strcat> not comparable
[15:26:22] <kimundi> strcat: If they implement the right traits it does afaik
[15:26:56] *** Joins: michaelgreene (michael@DA820AA2.17CD9887.F12515B4.IP)
[15:27:07] <bstrie> rusti: 1 as float
[15:27:08] -rusti- 1
[15:27:17] <strcat> kimundi: no, they have to manually implement it for each type they want to convert to
[15:27:22] <strcat> that's how it's implemented in num.rs
[15:27:26] <strcat> it's really not at all comparable
[15:27:29] <bstrie> rusti: 256 as i8
[15:27:30] -rusti- 0
[15:27:35] <strcat> it's an abstraction over to_u32, not the other way around
[15:27:43] <strcat> you need to_u32 for num::cast to work
[15:27:56] <bstrie> rusti: let a = [256]; a[0]as i8
[15:27:57] -rusti- 0
[15:28:10] <bstrie> ^ I'm somewhat surprised that there's no whitespace required there
[15:28:35] *** Joins: jdm (jdm@DB05BBF2.BB1F48F2.971E19F6.IP)
[15:28:43] *** Joins: bsmedberg (bsmedberg@moz-748CAEF1.jst.pa.atlanticbb.net)
[15:29:03] <bsmedberg> Where is the proper place to give feedback about pcwalton's blog post (removal of GC)?
[15:29:10] *** Joins: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net)
[15:29:13] *** Quits: rindolf (Shlomi@5A1EC92D.5015F465.CB858787.IP) (Quit: Leaving)
[15:29:14] <strcat> bsmedberg: you can comment on it
[15:29:23] <dbaupp> bsmedberg: on the blog post, on reddit, or on the mailing list, I guess
[15:29:31] <bsmedberg> what mailing list?
[15:29:45] <bsmedberg> blog post comments seem like the wrong place for technical discussions!
[15:29:52] <dbaupp> bsmedberg: https://mail.mozilla.org/listinfo/rust-dev
[15:30:08] <dbaupp> http://www.reddit.com/r/rust/comments/1fkhe6/removing_garbage_collection_from_the_rust_language/, for reference.
[15:31:39] <engla> strcat: NumCast works as long as it can be mediated via the built-in types. so gmp to gmp-like will not work
[15:31:58] <strcat> engla: yeah and it requires implementing each one, I know
[15:32:49] <kimundi> strcat: I realsie that I'm not going to convince you otherwise, but I'm of the opinion that at least the to_vec() method is useful to keep, simply because a vector is rusts buildin container primitive and used all over the place.
[15:33:11] <strcat> kimundi: but it shouldn't be placed higher than an alternate vector
[15:33:27] <strcat> small vectors should be just as convenient to use
[15:33:38] *** Quits: dbaupp (Thunderbir@moz-C6B1454A.lns20.syd7.internode.on.net) (Ping timeout)
[15:33:47] <strcat> the only thing you should have to consider is which implementation is more suited to your use case
[15:34:08] <strcat> they should be drop-in replacements for each other. along with a rope or vector in a third party lib
[15:34:33] <bsmedberg> What's the volume of rust-dev?
[15:35:03] <strcat> kimundi: the fact that integer/float/vector literals aren't generic is a bug we should fix
[15:35:20] <kimundi> strcat: Rewrite ALL functions in rustc, std and extra to only uses generics over containers and you have a library source so verbose that people think 'wtf?'. But then you'd have a point. :P
[15:35:30] <strcat> kimundi: it will be less verbose..
[15:35:32] <strcat> really
[15:35:35] *** Quits: Nisstyre (wes@moz-FD86289.netflash.net) (Connection reset by peer)
[15:35:37] <strcat> kimundi: http://ix.io/5Xi what is wrong with this?
[15:35:48] <strcat> that's what using iterators looks like
[15:35:55] <strcat> that will work on vectors too
[15:35:58] <benh> bsmedberg: 2300 messages since july last year if i'm not doing this wrong ;)
[15:35:58] <strcat> or treemaps
[15:36:00] <strcat> or whatever
[15:36:04] *** Joins: Nisstyre (wes@moz-A4FF38E0.netflash.net)
[15:36:05] <strcat> one small API to learn
[15:36:52] <benh> Why'd you need to deref x in take_while and not transform or fold?
[15:37:00] <benh> are those by-move?
[15:37:01] <strcat> benh: take_while passes by-ref
[15:37:14] <strcat> because it asks your predicate if it should yield that value and then yields it by-value
[15:37:21] <benh> right
[15:39:15] <strcat> http://ix.io/5Xl compiles to a clean loop too ;p
[15:39:26] <strcat> (with println replaced with a noinline dummy function)
[15:40:08] <kimundi> strcat: I know how iterators work, I know what their advantages are
[15:40:41] <strcat> okay but I don't see why having a generic iterator API with 20 methods is more complex than 300 methods on vec to provide 1/4 of the same functionality
[15:41:06] <strcat> vec has any
[15:41:09] <strcat> where's reverse_any?
[15:41:12] <strcat> where's range_any?
[15:41:17] <strcat> are we really going to add those?
[15:41:40] <benh> I just don't want "\n".join(...) :(
[15:41:42] <kimundi> NO!
[15:41:42] <strcat> .iter(), .reverse_iter() solves that problem
[15:41:48] <kimundi> I never clamied that
[15:41:57] <benh> (and I still think we need better rustdocs)
[15:42:01] <strcat> kimundi: but we already have dozens of variants of this stuff and are adding more
[15:42:05] <kimundi> Stop extending your arguments to points I never talked about
[15:42:10] <strcat> kimundi: you did talk about it
[15:42:21] <strcat> kimundi: you wanted to add 20 conversion functions to every container to convert to every other container
[15:42:26] <strcat> seems like the same situation to me.
[15:42:28] <kimundi> I just di talk about 'to_vec'. Nothing more.
[15:43:06] <kimundi> Just that I think 'keeping to_vec would be more convient than removing it for the sake of consistency'
[15:43:53] <kimundi> I agree with all you say in general, but I don't get the argument "ther should be no way to make the code prettier never!"
[15:44:13] <strcat> it doesn't make code prettier
[15:44:18] <strcat> it makes the API ugly and huge
[15:44:26] <kimundi> arg... sorry I'm kinda agitated today...
[15:45:24] <engla> keeping to_vec sounds like a nobrainer
[15:45:47] <benh> i don't see vec::from_iter(...) as much worse
[15:46:22] <engla> unless a generic method is just as easy to use. Maybe    let m: HashMap<K,V> = y.iter().collect(); where .collect() can return any collection that implements some trait?
[15:46:48] <engla> still, .to_vec() is simpler because it never needs type annotation
[15:48:36] <kimundi> A vector is the most used _concrete_ container data structure in current rust code. Is having _one_ convenience cast function for that really that bad? I'm not talking about what functions or methods a vec has, or the reasons why you'd call to_vec, just that if you WANT to dump the output of an iterator into the buildin container type, having to_vec() is nicer... 
[15:49:14] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[15:49:25] *** Quits: dbaumgarten (quassel@moz-65731869.dip0.t-ipconnect.de) (Client exited)
[15:52:21] *** Joins: eevee_ (eevee@moz-A643AA65.evrt.wa.frontiernet.net)
[15:52:31] <strcat> kimundi: it's not a "concrete" data structure
[15:52:35] <strcat> it's one possible implementation
[15:52:45] <strcat> it doesn't do the small vector optimization
[15:52:58] *** Quits: eevee (eevee@moz-A20C5AE8.evrt.wa.frontiernet.net) (Ping timeout)
[15:53:15] <strcat> it uses a specific allocator
[15:53:27] <strcat> it uses a specific growth constant
[15:53:51] <strcat> most vectors in rustc should be small vectors
[15:55:02] <strcat> of course we've made it very hard to introduce small vectors by hardcoding vectors everywhere
[15:55:07] <strcat> but it's a huge performance issue
[15:55:34] <strcat> clang/LLVM use small vectors all over the place, it's one of the ways they manage to be very fast
[15:56:09] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[15:56:28] *** Joins: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP)
[15:56:41] *** Joins: \n (NDesaulnie@2557E599.66715431.D25A875A.IP)
[15:57:29] *** Joins: thou (thou@moz-1C1CA9F7.fasttrackcomm.net)
[15:57:50] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[15:58:07] *** Quits: dsirenko (mitra@8E712A0.54C21BA0.9F317420.IP) (Ping timeout)
[15:59:14] <joebobjoe> Please don't remove @
[15:59:16] *** Joins: dsirenko (mitra@8E712A0.54C21BA0.9F317420.IP)
[15:59:34] <strcat> joebobjoe: no one is suggesting removing it, just renaming
[15:59:35] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[16:00:08] <friggle> joebobjoe: we really need the full proposal to evaluate it
[16:00:17] <joebobjoe> mk
[16:00:43] <MaikKlein> can I do sth like this? https://gist.github.com/MaikKlein/5699175
[16:00:48] *** Joins: igl1 (igl@moz-432220ED.adsl.alicedsl.de)
[16:01:13] *** Joins: hugod (user@3C2C754E.1742D5AE.CD432688.IP)
[16:01:23] *** Quits: igl (igl@moz-823E37BE.adsl.alicedsl.de) (Ping timeout)
[16:01:37] <MaikKlein> I mean obviously I can't -> error: found type name used as a variable
[16:02:02] <MaikKlein> but is something similar possible? 
[16:02:39] <doy> MaikKlein: for one thing, it should be returning a Shader, not a VertexShader
[16:02:44] <kimundi> strcat, engla: A generic collect() instead of specific to_* methods would also be accetable. I'm just against needing to use module::from_iterable()
[16:03:14] <benh> no, single enum variants aren't types in their own right
[16:03:23] <MaikKlein> ah 
[16:03:54] *** Joins: cmr_ (cmr_@moz-AF1E4A33.clients.kiwiirc.com)
[16:04:07] <benh> you'd have to do something like struct VertexShader(BaseShader); struct FragmentShader(BaseShader); enum Shader { VertexShader_(VertexShader), FragmentShader_(FragmentShader) } I think
[16:04:36] <doy> benh: or just have the function return a value of type Shader instead(:
[16:05:01] <benh> but then you lose information at the type level :(
[16:06:49] *** Quits: Ralith (ralith@moz-50F3C77.vc.shawcable.net) (Ping timeout)
[16:07:00] *** Quits: illissius (illissius@A518C422.3F1C0C4.3AEF08B3.IP) (Ping timeout)
[16:07:42] *** Joins: illissius (illissius@A518C422.3F1C0C4.3AEF08B3.IP)
[16:07:52] <strcat> kimundi: I don't know what's wrong with 'let set: HashSet<int> = from_iterable(vector)'
[16:09:31] *** Quits: martndemus (martndemus@moz-FAE8D24A.sshunet.nl) (Input/output error)
[16:09:50] <strcat> could be called collect if you want, I just thought that name was clearer
[16:12:28] <cmr_> bsmedberg: very low, a few messages a week usually
[16:13:15] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[16:13:48] <MaikKlein> why doesn't rust have inheritance like c++? I mean there must be a reason right?
[16:14:19] <friggle> MaikKlein: something of a discussion in https://lwn.net/Articles/548560/
[16:15:26] <bstrie> MaikKlein: it will never have multiple inheritance because of https://en.wikipedia.org/wiki/Multiple_inheritance#The_diamond_problem . It might possibly have single inheritance some day, but likely not for 1.0
[16:15:37] *** Joins: unbracketed (textual@moz-7F0EE151.lsanca.fios.verizon.net)
[16:16:05] * strcat doubts it
[16:16:18] *** Quits: posco (oscarboyki@moz-121FFE47.hsd1.ca.comcast.net) (Quit: posco)
[16:16:28] <bstrie> pcwalton keeps saying he might want it, but I've never seen him actually make a concrete proposal for it
[16:16:34] <bblum> bstrie: I all but created it
[16:16:40] *** Joins: dan_johnsin (dan_johnsi@6902762D.11B071D.FB9A45AF.IP)
[16:16:44] <bblum> it was already there when I showed up last summer
[16:16:52] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Quit: Computer has gone to sleep.)
[16:17:11] <bblum> I rearranged about half the code, and created MutexARC and RWARC, which share some of the code
[16:17:40] <bblum> i also added arc::unwrap, but brson removed it because it was complicated
[16:17:55] <bstrie> bblum: I asked because I saw https://dl.acm.org/citation.cfm?id=1111597 and wondered if it was relevant. in the abstract it says "Reference-counting is traditionally considered unsuitable for multiprocessor systems. According to conventional wisdom, the update of reference slots and reference-counts requires atomic or synchronized operations. In this work we demonstrate this is not the case"
[16:18:18] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[16:18:24] <bblum> I think eholk originally made ARC
[16:18:49] <Jesse> speaking of ARC, does this tweet mean anything to you? https://twitter.com/chvest/status/341576956661342209
[16:19:06] <bstrie> so I was just curious if the implementation of ARCs actually does all the things that that paper purports are unnecessary
[16:19:08] <Jesse> (i know some of those words, but not in a programming context...)
[16:19:20] <bblum> bstrie: well, it uses atomc xadd, of course
[16:19:38] <bblum> and RWARC's lock is based on pipes, which use atomic xchg
[16:19:49] <MaikKlein> .
[16:19:53] *** Joins: jihyun (uid7128@moz-D8B63698.irccloud.com)
[16:20:19] *** Joins: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[16:21:11] <bblum> Jesse: the desire for fences and CAS seems fishy but justifiable; i don't know what park/unpark mean
[16:21:51] *** Quits: z0w0 (zack@moz-B5D18119.lns1.woo.bigpond.net.au) (Client exited)
[16:22:09] <Jesse> ok i guess CAS is compare-and-swap
[16:22:15] *** Joins: eholk (eholk@moz-6D2C9014.uconnect.utah.edu)
[16:22:22] <cmr_> it is
[16:22:36] <bblum> i think there's a compare and swap intrinsic function
[16:22:46] *** Joins: seth (seth@2557E599.66715431.D25A875A.IP)
[16:23:07] <strcat> they still result in the same thing as a lock though, it has to keep caches in sync, etc.
[16:23:14] <cmr_> http://superuser.com/questions/568596/what-are-the-net-consequences-of-core-parking
[16:23:54] *** Quits: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP) (Ping timeout)
[16:24:05] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[16:25:41] *** Quits: H4199 (chatzilla@moz-64E556D3.austin.res.rr.com) (Ping timeout)
[16:25:43] <bblum> i guess we don't have memory fence intrinsics but they wouldn't be hard to add
[16:25:52] *** Quits: MaikKlein (maik@moz-972D34E0.dip0.t-ipconnect.de) (Ping timeout)
[16:25:53] *** Quits: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net) (Quit: Computer has gone to sleep.)
[16:27:14] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[16:27:29] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[16:27:30] *** Quits: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP) (Ping timeout)
[16:27:35] <cmr_> doener: why did you add buf_len? Is there something wrong with buf.len()?
[16:29:53] *** kimundi is now known as zz_kimundi
[16:30:34] *** Joins: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP)
[16:31:03] <doener> cmr_: ah, I didn't check the callsite of from_bytes(). Didn't know that the buffer contains only the compressed data. The assertion that triggered for you made me think that it was larger
[16:31:28] <cmr_> doener: It is only compressed data, I have no idea why the assertion was being triggered :)
[16:31:34] *** Quits: KindOne (KindOne@B2A5C4FE.9C5C45A3.EC6A1518.IP) (Ping timeout)
[16:31:46] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[16:31:48] <cmr_> At least... it should be.
[16:31:58] <doener> cmr_: ah wait, right, you need buf_len for the assertion
[16:32:22] <doener> cmr_: you only stored the uncompressed size before. So that assertion was bound to fail
[16:32:27] <mib_zgi3z3> is some document explaining in more detail what "not production ready" means?
[16:32:53] <cmr_> mib_zgi3z3: will break.
[16:32:55] <doener> cmr_: you need the uncompressed size for the decompression to work, and the compressed size for the assertion to work. 
[16:33:13] <mib_zgi3z3> i'm thinking of processing some CSV files with financial data and converting them to a binary file format. on windows. can i expect smooth sailing (Assuming i'm learning the language)
[16:33:13] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[16:33:16] *** Joins: victorporof (victorporo@AD24D94A.E934E1A1.4A6B528C.IP)
[16:33:22] <cmr_> doener: Right. buf.len() should be compressed size, container.size should be uncompressed size. At least, that's what I was thinking when I implemented it...
[16:33:31] <cmr_> It was late, who knows what I actually wrote :)
[16:34:02] <doener> cmr_: that's fine, just that you can't assert the buf.len() then :-)
[16:34:06] <cmr_> right :)
[16:34:15] <bstrie> mib_zgi3z3: "not production ready" means "we will break things without warning"
[16:34:25] <bstrie> "code you write today may not run tomorrow"
[16:34:29] <mib_zgi3z3> as in the desing specs will change?
[16:34:32] <bstrie> yes
[16:34:36] <bstrie> nothing is set in stone yet
[16:34:39] <bblum> Jesse: park/unpark appear to be java names for semaphores, so i replied to his tweet
[16:34:39] <mib_zgi3z3> or as in "many bugs, code will crash, weird errors..."
[16:34:46] *** Quits: Jesin (Jessin_@moz-157A63DD.cc.lehigh.edu) (Quit: Leaving)
[16:34:49] <bstrie> mib_zgi3z3: well that too :)
[16:34:53] *** Quits: judder (maradukewa@385DDD8F.206937E4.78E362FE.IP) (Ping timeout)
[16:35:02] <bstrie> mib_zgi3z3: if there was a greek letter before "alpha", that's the stage that rust would be at
[16:35:10] <Jesse> bblum: thanks
[16:35:17] <cmr_> mib_zgi3z3: it works well, more or less, but won't be stable with newer versions of rust
[16:35:22] <mib_zgi3z3> i see
[16:35:26] <cmr_> I really need to be less sloppy with my code... the debug/test cycle is too long to not be :(
[16:35:37] <mib_zgi3z3> i'm trying to get a feel on it's stability
[16:35:46] <mib_zgi3z3> are many reporting errors or troubles?
[16:35:53] *** Joins: Ralith (ralith@moz-77D578BD.wireless.sfu.ca)
[16:35:55] <cmr_> mib_zgi3z3: compiler and language is very unstable
[16:35:56] <bstrie> mib_zgi3z3: a stable, backwards-compatible 1.0 release is scheduled for the end of the year, if you'd like to try again later :)
[16:36:12] *** Joins: KindOne (KindOne@moz-65B0B365.dynamic.ip.windstream.net)
[16:36:13] <lahwran> hey, anyone here want to convince me not to use rust?
[16:36:20] <lahwran> I'd appreciate if anyone would attempt to do so
[16:36:33] <bstrie> mib_zgi3z3: see https://github.com/mozilla/rust/issues for errors and troubles
[16:37:04] <cmr_> lahwran: any code you write will be broken within two weeks, if not less.
[16:37:13] <bstrie> lahwran: don't use rust, it's just too awesome
[16:37:21] <lahwran> cmr_: holy shit, that's way more convincing than I was expecting
[16:37:35] <bstrie> too awesome for backwards compatibility
[16:37:39] <lahwran> bstrie: I usually ask a question that looks more or less like that when I think something looks too good to be true
[16:37:40] <bstrie> that's for squares, man
[16:37:47] <bstrie> my dad was backwards-compatible
[16:38:27] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Quit: Jesse)
[16:38:41] <bstrie> lahwran: anyway yeah you should not use rust if you are easily frustrated by things being broken without warning every day
[16:38:53] <cmr_> lahwran: there are a bunch of unimplemented features too.
[16:38:53] <lahwran> I spent most of last weekend asking people to convince me not to get tmobile or the nexus 4
[16:38:54] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[16:38:59] *** Joins: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net)
[16:39:16] <lahwran> there were a few things I found from that, none deal-breaking like "meh, backwards compatibility, idgaf"
[16:39:26] <lahwran> I understand why that'd be true for a language in heavy dev, though
[16:39:35] <cmr_> also young language
[16:39:47] <lahwran> that was my meaning
[16:40:13] <strcat> lahwran: it will work fine most of the time but you shouldn't be surprised if you run into known codegen bugs
[16:40:35] <strcat> I don't think you should expect to find *unknown* ones more than another language, but there are plenty of known, unfixed bugs
[16:40:46] <lahwran> okay, so don't trust it with anything hardcore yet?
[16:40:52] *** zz_kimundi is now known as kimundi
[16:41:32] <cmr_> yeah that's a safe bet, assuming you don't mind rewriting/fixing/throwing away old code :)
[16:41:55] <lahwran> hardcore as in high-security
[16:41:59] <bstrie> oh god, pcwalton's article is at the top of /r/programming
[16:42:03] <cmr_> oh yeah definitely not
[16:42:10] <lahwran> rust looks like the language design would be awesome for high security stuff eventually
[16:42:15] <cmr_> bstrie: pretty high in HN too
[16:42:20] <lahwran> bstrie: link?
[16:42:26] <bstrie> http://www.reddit.com/r/programming/comments/1fkhwa/removing_garbage_collection_from_the_rust_language/
[16:42:28] <cmr_> There should be a rule: no high profile blog posts :)
[16:42:45] <lahwran> link directly to article? I can't open reddit
[16:43:04] <lahwran> (self-inflicted web filtering to prevent undue distraction)
[16:43:09] <cmr_> http://pcwalton.github.io/blog/2013/06/02/removing-garbage-collection-from-the-rust-language/
[16:43:23] <bstrie> cmr_: I feel like HN is more dismissive and faux-trendy, but proggit just has a plain higher proportion of crazies from reddit at large
[16:43:25] <mib_zgi3z3> cmr_: this article is why i'm here, so there should be more posts like this :)
[16:44:08] <mib_zgi3z3> cmr_: HN is very hipstery, each year a new language is in vogue: ruby -> erlang -> scala -> go
[16:44:21] <bstrie> both communities generally have some good comments, but their fringes will be different
[16:45:06] <cmr_> yeah
[16:45:07] <bstrie> mib_zgi3z3: I see it more as ruby -> node -> clojure -> go :)
[16:45:38] <friggle> mib_zgi3z3: well every Go article on HN right now seems to devolve in to the same set of arguments about its merits as a language
[16:45:51] *** Joins: azita (Azita@2557E599.66715431.D25A875A.IP)
[16:46:24] <mib_zgi3z3> btw, i find the "&16 comments" "@xxx" decorations (&@) on the /r/rust annoying, as in visual noise which makes it a little bit harder to read. just my opinion
[16:46:41] <bstrie> mib_zgi3z3: that's the point! I put those there :P
[16:47:02] <bstrie> but if we get rid of @ I'll have to change it :(
[16:47:07] <mib_zgi3z3> they are funny, but they are not good design in my opinion. not that i'm a designer :p
[16:47:28] <engla> especially the &16 part  just makes it harder to read
[16:47:36] <engla> ~16 would be easier
[16:47:38] *** Joins: sawrubh (uid6719@moz-D8B63698.irccloud.com)
[16:47:53] <bstrie> engla: well now you're just making a comment on rust in general :)
[16:48:11] <bstrie> let's find out if it's even possible for me to type a line without an emoticon
[16:48:14] <bstrie> phew
[16:48:16] <benh> mib_zgi3z3: if you have a reddit account, you can set it to not display subreddit-specific css
[16:48:18] <engla> sure, but that comment number is where your eyes go on reddit. just saying I thought about it just like mib_zgi3z3 before
[16:49:08] *** Joins: Mowah (Mowah@moz-C7674B3E.cust.bredbandsbolaget.se)
[16:49:10] <mib_zgi3z3> yes, you have to concentrate a bit to see the most popular posts. this is a little bit tyring, which makes you scan less articles in the end
[16:49:22] *** Joins: k00mi (koomi@moz-ECD7DE60.pools.arcor-ip.net)
[16:49:29] *** Quits: doener (bs@moz-AA189A5A.unitymedia.biz) (Quit: leaving)
[16:49:50] <bstrie> mib_zgi3z3 engla: there, changed it just for you
[16:50:10] <engla> already much better
[16:50:12] <mib_zgi3z3> yes, this is better :)
[16:50:20] <bstrie> maybe I'll add in unsafe pointers if @ goes away
[16:50:29] *** Quits: toddaaro (toddaaro@moz-98F46974.us) (Quit: leaving)
[16:50:35] *** Joins: toddaaro (toddaaro@moz-98F46974.us)
[16:50:35] <bstrie> oh I know, I'll just figure out how to wrap the links in Gc<foo>
[16:50:55] <cmr_> oh god please no
[16:50:59] <cmr_> I actually use r/rust to read content
[16:51:17] <cmr_> (You'd use :before and :after css, though)
[16:51:38] <bstrie> that's what I'm doing, yeah
[16:52:01] <bstrie> engla: check it out, are you sure you don't like it? >:)
[16:52:13] *** Joins: carllerche (carllerche@moz-BF6CB667.hsd1.ca.comcast.net)
[16:52:33] <bstrie> I should have done this for april fools' day
[16:52:41] *** Quits: \n (NDesaulnie@2557E599.66715431.D25A875A.IP) (Quit: \n)
[16:52:49] <bstrie> changed all the @ to shared_ptr and the ~ to uniq_ptr
[16:52:50] *** Quits: cowboyd (cowboyd@1D8844A7.1B729417.CEE440B6.IP) (Client exited)
[16:52:55] <cmr_> heh
[16:52:58] <cmr_> that would have been funny
[16:52:58] <engla> haha. 
[16:53:04] <bstrie> ok, I'll change it back now
[16:53:22] <engla> as long as the comments link is clear, I'm ok with anything. Those other links are just noise anyway
[16:53:37] <engla> (share a link by email? what is this?)
[16:54:06] *** Quits: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net) (Quit: Computer has gone to sleep.)
[16:54:12] <engla> maybe the share link should be RcMut<>
[16:54:26] <cmr_> Does %? have severe runtime performance ramifications or does the magic happen at compile-time?
[16:54:27] <bstrie> RWAtomicRC<>
[16:54:36] <bstrie> cmr_: %? is runtime, it's reflection
[16:54:40] <bstrie> not sure if it's really severe
[16:54:46] <bstrie> don't use it in production code, I guess :P
[16:55:39] *** Quits: seth (seth@2557E599.66715431.D25A875A.IP) (Input/output error)
[16:56:06] *** Joins: \n (NDesaulnie@2557E599.66715431.D25A875A.IP)
[16:56:08] *** Joins: mschifer (Adium@2557E599.66715431.D25A875A.IP)
[16:58:38] *** Joins: posco (oscarboyki@692ED873.5999CED5.71743E61.IP)
[16:58:59] *** Quits: joebobjoe (joebobjoe@55F2E07A.7F841963.2213276E.IP) (Quit: Textual IRC Client: www.textualapp.com)
[16:59:55] *** Joins: joebobjoe (joebobjoe@55F2E07A.7F841963.2213276E.IP)
[17:00:02] <cmr_> rusti: fmt!("%d", 5i32)
[17:00:03] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/RRNK
[17:00:14] <cmr_> it's stuff like that that I use %? for
[17:00:25] <cmr_> "I don't remember which it is and I CBF to look it up"
[17:01:00] <cmr_> Is there even a flag for i32 and the rest of the numerics?
[17:02:21] *** Joins: seth (seth@2557E599.66715431.D25A875A.IP)
[17:03:19] *** Quits: seth (seth@2557E599.66715431.D25A875A.IP) (Input/output error)
[17:03:23] *** Joins: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net)
[17:04:03] <EXetoC> bstrie: you mean because it prints the values? or maybe everything is looked up at run time, which would be unnecessary, I guess
[17:05:14] <engla> cmr_: there aren't that many flags. https://github.com/mozilla/rust/blob/incoming/src/libstd/unstable/extfmt.rs
[17:05:38] <engla> only float int uint and no size-specific
[17:06:04] <cmr_> I'd by fine with that if they accepted the varying sized types
[17:06:05] *** Joins: seth (seth@2557E599.66715431.D25A875A.IP)
[17:06:08] *** Joins: sully_ (sully@moz-45967CBE.emarhavil.com)
[17:06:11] <cmr_> But they don't... so it's kinda useless.
[17:06:17] *** Quits: sully_ (sully@moz-45967CBE.emarhavil.com) (Quit: leaving)
[17:07:06] *** Joins: sully (sully@moz-45967CBE.emarhavil.com)
[17:07:16] <strcat> so many trolls in that reddit thread
[17:07:16] * sully starting today; in Holodeck now
[17:07:31] <cmr_> and HN
[17:07:34] <strcat> and people convinced that C++ is the pinnacle of programming and can't be improved upon
[17:07:57] *** Quits: bnicholson (bnicholson@moz-E98974C1.hsd1.ca.comcast.net) (Ping timeout)
[17:08:06] <strcat> lightweight references that can never be dangling? apparently they can't exist from one of those comments
[17:08:17] <cmr_> someone told me in this channel a few weeks ago though, that's like saying water's wet ;)
[17:09:21] *** Joins: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net)
[17:09:34] <strcat> and people with zero understanding of C++'s memory model trying to claim that Rust has nothing adding to it
[17:09:37] *** Quits: hansjorg (hansjorg@moz-EECB5F79.static.cust.telenor.com) (Quit: Leaving.)
[17:09:52] <strcat> anyone who has actually used C++ knows about references and iterators.... and that move/ownership semantics do not replace them
[17:09:52] <cmr_> I tried understanding C++'s memory model once :\
[17:10:00] <strcat> cmr_: same as rust's without safety ;p
[17:12:02] <cmr_> How is it that there's read_bytes but not write_bytes?
[17:12:41] <xazax> what I miss the most is template metaprogramming
[17:12:54] <cmr_> xazax: macros don't do it for you?
[17:13:05] <xazax> for instance the ability to do compile time dimensional analysis is woot
[17:13:34] <nmatsakis> anyone here know whether the name you supply to an LLVM instruction (e.g., an alloca) must be unique? or is it merely advisory?
[17:13:38] <cmr_> Syntax extensions will eventually allow arbitrary compiletime stuff
[17:13:40] <xazax> cmr_, are macros capable of doing that? (I'm not an experienced user of those macros)
[17:14:04] <cmr_> xazax: Not sure about macros specifically (macros via macro_rules!), but syntax extensions can do anything
[17:14:10] <nmatsakis> cmr_: not *arbitrary*
[17:14:19] <nmatsakis> there are limits to what they can do, because they don't have access to type information
[17:14:25] <cmr_> nmatsakis: No?
[17:14:26] <cmr_> Ah
[17:14:26] <nmatsakis> since it hasn't been computed yet.
[17:14:32] <xazax> aww
[17:14:35] <nmatsakis> they can only do syntactic transformations, basically.
[17:14:37] <strcat> nmatsakis: they can cheat and generate code depending on the types though
[17:14:39] <strcat> like fmt! does
[17:14:42] <xazax> that is the point of dymensional analysis
[17:14:44] <nmatsakis> fm! does not do that.
[17:14:53] <nmatsakis> fmt! takes the types from the string
[17:14:57] <strcat> nmatsakis: yeah, that's what I mean
[17:15:01] <nmatsakis> if it is sees %s, it generates a call to "format_string()" which expects a ~str
[17:15:03] <strcat> nmatsakis: it sees %d and generates code expecting an int
[17:15:07] <nmatsakis> right
[17:15:11] <nmatsakis> they can do a lot, that's for sure.
[17:15:12] <xazax> what does it do with %?
[17:15:14] <nmatsakis> just not *anything* :)
[17:15:22] <strcat> or it could see %foo and generate code expecting a type implementing a trait or with a method
[17:15:25] <nmatsakis> xazax: it generates a call to a function that uses runtime reflection.
[17:15:28] *** Joins: deepdog (deepdog@moz-490E834C.client.mchsi.com)
[17:15:31] <nmatsakis> xazax: keep in mind you can do quite a lot with traits.
[17:15:32] *** Joins: doener (doener@moz-121949B3.unitymediagroup.de)
[17:15:33] <strcat> or it could output static asserts ;p
[17:16:26] <engla> is it possible for fmt! to support reordering of formats?
[17:16:40] *** Joins: brson (brson@2557E599.66715431.D25A875A.IP)
[17:16:40] <xazax> runtime reflection? isn't it costly performanve vise?
[17:16:40] *** ChanServ sets mode: +o brson
[17:16:56] <cmr_> engla: aatch and I think dbaup were working on a new and improved fmt!
[17:16:58] <nmatsakis> xazax: not really, but also, it's debug output. 
[17:17:07] <engla> cmr_: cool
[17:17:24] <cmr_> https://github.com/aatch/rust/tree/new-fmt
[17:17:26] <nmatsakis> xazax: the proper way to do that %? is really to use traits, as cmr_ was just mentioning.
[17:17:51] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[17:18:24] *** Joins: MaikKlein (maik@moz-972D34E0.dip0.t-ipconnect.de)
[17:18:43] <engla> thanks
[17:19:43] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[17:19:52] *** Joins: tikue (tkuehn@2557E599.66715431.D25A875A.IP)
[17:20:08] <nmatsakis> strcat: so do yo know whether the names you supply to llvm instructions must be unique? I'm guess not...
[17:20:16] <nmatsakis> *guessing
[17:20:23] <bstrie> nmatsakis: ah, but could a syntax extension spin up a subprocess to run another copy of rustc on the code that it needs type information about? :)
[17:20:25] <strcat> nmatsakis: which names?
[17:20:30] *** Quits: tikue (tkuehn@2557E599.66715431.D25A875A.IP) (Quit: tikue)
[17:20:41] <nmatsakis> strcat: guess you don't know then ;) when you create an llvm instruction, you can optionally supply a name.
[17:20:49] <nmatsakis> strcat: e.g., I'm using it to name allocas after the variable they represent
[17:20:57] <nmatsakis> strcat: but I was wondering about shadowing and if I have to care.
[17:21:12] <strcat> nmatsakis: ah
[17:21:30] <strcat> nmatsakis: does it just generate a metadata node? or are there actually names as a separate concept?
[17:21:33] <strcat> I didn't know about that.
[17:21:41] <nmatsakis> strcat: I don't exactly know, it shows up when you disassemble
[17:21:48] <nmatsakis> strcat: instead of %3 or whatever, it'll print %foo
[17:21:55] <nmatsakis> strcat: much nicer to read :)
[17:22:05] <strcat> nmatsakis: I'd expect it to not know about shadowing then
[17:22:12] <strcat> I guess they are register names?
[17:22:16] <nmatsakis> strcat: my assumption is that LLVM operates on pointer identity.
[17:22:24] <nmatsakis> strcat: and these are just for making the output look nicer.
[17:22:30] <strcat> nmatsakis: it has register identities though
[17:22:34] *** Quits: novabyte (Instantbir@moz-3E0F9699.cable.virginmedia.com) (Input/output error)
[17:22:35] *** Joins: tikue (tkuehn@2557E599.66715431.D25A875A.IP)
[17:22:39] <nmatsakis> strcat: I...don't think this has anything to do with registers.
[17:22:49] <nmatsakis> strcat: I can supply arbitrary text, after all.
[17:22:52] <cmr_> LLVM registers, not real registers
[17:23:08] <nmatsakis> regardless
[17:23:21] <strcat> nmatsakis: it has an infinite number of LLVM registers though, and I thought that's what the '3' referred to
[17:23:23] *** Quits: Ralith (ralith@moz-77D578BD.wireless.sfu.ca) (Ping timeout)
[17:23:25] *** Joins: bnicholson (bnicholson@2557E599.66715431.D25A875A.IP)
[17:23:49] <strcat> %a = foo
[17:23:58] <strcat> inst bar %a
[17:24:07] *** Quits: davbo (dave@moz-3FFA637C.oucs.ox.ac.uk) (Quit: Leaving)
[17:24:16] <nmatsakis> yeah, I don't know, i'm reading docs now.
[17:24:26] <cmr_> If they do correspond to LLVM registers you do n eed to care about names, because it's supposed to be SSA I thought
[17:24:30] *** Joins: cowboyd (cowboyd@1D8844A7.1B729417.CEE440B6.IP)
[17:24:47] <nmatsakis> yes, if they correspond directly, I probably do care.
[17:24:54] <nmatsakis> maybe i'll just append an id to ensure it's unique.
[17:25:04] <strcat> nmatsakis: I'm 90% sure that the %foo symbols are the name for the SSA value
[17:25:05] *** Joins: Blei (philipp@moz-96D25F7A.cust.bluewin.ch)
[17:25:08] *** Quits: bnicholson (bnicholson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[17:25:24] <nmatsakis> strcat: well, they are the name, but the question is whether it matters if I use the same name or not. In many cases, LLVM helpfully canonicalizes for you,
[17:25:30] <nmatsakis> strcat: I guess I can just test this with a simple test case :)
[17:25:32] <strcat> nmatsakis: ah
[17:25:58] *** Joins: ysuzuki (ysuzuki@moz-285468F7.net219126120.t-com.ne.jp)
[17:27:19] *** Parts: SingingBoyo (androirc@moz-94AE1D3A.bchsia.telus.net) (Done for now - Probably Busy)
[17:27:38] <nmatsakis> the answer: it canonicalizes.
[17:28:02] * nmatsakis spends 22 minutes discussing on IRC, 30 seconds testing.
[17:29:22] <cmr_> I think my next project is going to be rustdoc instead of getting rid of that ebml atrocity.
[17:29:32] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[17:29:32] *** ChanServ sets mode: +o dherman
[17:29:46] *** Joins: tjc (tjc@moz-24D1560B.telebyte.com)
[17:29:47] *** ChanServ sets mode: +o tjc
[17:29:52] *** Quits: CarpNet (ac@moz-FD24B77.sohonet.co.uk) (Quit: Leaving)
[17:29:53] *** Joins: tcsc (tcsc@moz-ADC0ED45.hsd1.ct.comcast.net)
[17:30:09] <bblum> sully: https://github.com/mozilla/rust/wiki/Proposal-for-closure-reform
[17:31:39] *** Quits: tjc (tjc@moz-24D1560B.telebyte.com) (Quit: zzzzzzzzzz)
[17:31:48] *** Joins: echristo (echristo@D423593A.D6CCE4AE.77834EAA.IP)
[17:31:58] <sully> this channel has gotten big.
[17:32:58] <bstrie> sully: welcome back!
[17:33:02] <sully> o/
[17:33:03] *** Joins: tjc (tjc@moz-24D1560B.telebyte.com)
[17:33:03] *** ChanServ sets mode: +o tjc
[17:33:45] <tikue> rusti: [1, 2, 3].min()
[17:33:47] -rusti- 1
[17:33:58] <tikue> rusti: [1, 2, 3].max()
[17:33:59] -rusti- 3
[17:34:23] *** Quits: cmr_ (cmr_@moz-AF1E4A33.clients.kiwiirc.com) (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
[17:35:19] <strcat> rusti: [].max()
[17:35:21] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/EgAD
[17:35:39] <strcat> rusti: let x: ~[int] = ~[]; x.max()
[17:35:40] -rusti- rust: task failed at 'max called on empty iterator', /build/rust-incoming-git/src/rust/src/libstd/old_iter.rs:240
[17:35:40] -rusti- rust: domain main @0x14521b0 root task failed
[17:35:40] -rusti- application terminated with error code 101
[17:36:08] <strcat> nmatsakis: heh :)
[17:36:39] <strcat> nmatsakis: ah so you just have to assign the name to the initial alloca, and then it generates it for you from there? that makes sense
[17:36:40] *** Joins: jroll (jroll@moz-5989BB9E.members.linode.com)
[17:36:47] <strcat> for some reason I thought the name became the way you had to refer to it
[17:36:50] <friggle> has graydon commented on this no-gc proposal at all yet?
[17:37:03] *** Joins: judder (maradukewa@385DDD8F.206937E4.78E362FE.IP)
[17:38:06] *** Joins: Jesse (jruderman@2557E599.66715431.D25A875A.IP)
[17:39:38] *** Joins: bnicholson (bnicholson@2557E599.66715431.D25A875A.IP)
[17:40:38] <MaikKlein> bjz, does glcore work with the current incoming?
[17:40:44] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[17:41:32] <strcat> http://www.reddit.com/r/programming/comments/1fkhwa/removing_garbage_collection_from_the_rust_language/cabcl53?context=3 a downvote for that? yay.
[17:41:39] * strcat hates reddit ;p
[17:42:14] <engla> better ignore occational downvotes if you want to remain sane
[17:42:17] *** Quits: joebobjoe (joebobjoe@55F2E07A.7F841963.2213276E.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[17:42:27] <bstrie> strcat: how dare you disagree with dfjkfskjhfshdfjhsdjl
[17:42:36] <MaikKlein> :D
[17:43:00] *** Joins: cmr_ (cmr_@moz-AF1E4A33.clients.kiwiirc.com)
[17:43:56] *** Quits: Jesse (jruderman@2557E599.66715431.D25A875A.IP) (Connection reset by peer)
[17:43:56] *** Joins: Jesse (jruderman@2557E599.66715431.D25A875A.IP)
[17:44:12] <cmr_> friggle: I can't imagine they would have developed it in isolation.
[17:44:36] <strcat> well I've talked to pcwalton about wanting to be able to make custom smart pointers before
[17:44:51] <friggle> I'm really looking forward to seeing the full proposal
[17:44:52] *** Quits: bnicholson (bnicholson@2557E599.66715431.D25A875A.IP) (Quit: Ex-Chat)
[17:44:55] <strcat> right now you can't really since you can't overload some trait
[17:45:02] *** Joins: hansjorg (hansjorg@moz-1D800A00.dsl.no.powertech.net)
[17:45:02] *** Joins: bnicholson (bnicholson@2557E599.66715431.D25A875A.IP)
[17:45:11] <bstrie> ah, so strcat is to blame for taking away our curlicues
[17:45:14] <strcat> *x.borrow_mut() = 10
[17:45:21] <strcat> or for RcMut
[17:45:30] <strcat> do x.with_mut_borrow |x| { /* not fun */ }
[17:45:31] <tjc> nmatsakis: ping
[17:46:07] <strcat> you know I keep forgetting people with the mib_sdajfdsoijgadsg names are different people
[17:46:29] <strcat> it should just join together some random words ;p
[17:46:30] *** Joins: Jesse_ (jruderman@2557E599.66715431.D25A875A.IP)
[17:46:37] *** Joins: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net)
[17:46:58] *** Quits: Jesse (jruderman@2557E599.66715431.D25A875A.IP) (Connection reset by peer)
[17:47:11] *** Joins: balpert (alpert@moz-B247840C.hsd1.ca.comcast.net)
[17:47:44] *** Joins: Jesse (jruderman@2557E599.66715431.D25A875A.IP)
[17:47:52] *** Quits: Jesse_ (jruderman@2557E599.66715431.D25A875A.IP) (Connection reset by peer)
[17:48:50] <bstrie> mib_correct_battery_horse_staple
[17:49:10] <bstrie> "how did mibbit guess my passphrase"
[17:50:19] *** Joins: thomaslee (thomaslee@moz-6C3931E3.static.twtelecom.net)
[17:50:22] *** Quits: dsirenko (mitra@8E712A0.54C21BA0.9F317420.IP) (Ping timeout)
[17:50:52] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke. It's all a joke.)
[17:51:48] <cmr_> strcat: r? https://github.com/mozilla/rust/pull/6826
[17:51:56] <cmr_> I thought that had already landed...
[17:51:58] *** Joins: dsirenko (mitra@8E712A0.54C21BA0.9F317420.IP)
[17:52:17] <strcat> cmr_: I ran into that too :) (still having to refer to libstd as core in libextra)
[17:52:37] <cmr_> it's super obnoxious :(
[17:52:42] <bstrie> haha
[17:52:52] <bstrie> the summer of the eternal snapshot
[17:53:37] <strcat> well the next snapshot will be super nice for the memory usage reduction in stage0 ;p
[17:53:47] <MaikKlein> would it make sense to write a wrapper for http://glm.g-truc.net/ ? Or would it better to have a native rust math lib?
[17:54:12] <cmr_> MaikKlein: well bjz already has lmath
[17:54:26] <cmr_> " OpenGL Mathematics (GLM) is a header only C++ mathematics library for graphics software based on the OpenGL Shading Language (GLSL) specification. " sounds like it'd be really obnoxious to port.
[17:54:28] <bstrie> MaikKlein: tell bjz that it can't be done in rust, to trick him into doing it
[17:54:36] <Blei> c++ -> yikes
[17:54:39] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[17:54:39] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/Tk74EA
[17:54:39] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[17:54:41] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[17:54:41] <ghrust> 01[13rust01] 15bors pushed 8 new commits to 06auto: 02http://git.io/sAjcJA
[17:54:41] <ghrust> 13rust/06auto 14cf64324 15Corey Richardson: extra::term overhaul
[17:54:41] <ghrust> 13rust/06auto 147281166 15Corey Richardson: Use find_equiv in term
[17:54:41] <ghrust> 13rust/06auto 141f27c63 15Corey Richardson: rustpkg borrowed pointers
[17:54:41] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[17:54:55] <MaikKlein> bstrie, haha :D
[17:55:50] <MaikKlein> i mean a math lib is probably used pretty heavily and I am not sure how big the overhead in rust is if I write a wrapper for a c++ lib
[17:55:59] <cmr_> You can't write a wrapper for it
[17:56:01] <cmr_> It's headers-only
[17:56:03] <MaikKlein> oh
[17:56:06] <cmr_> ie, compiletime, template processing.
[17:56:32] <MaikKlein> well then I probably help bjz with his math lib
[17:56:51] <cmr_> he just got it working with incoming the other day, sounds like a great time to do so :)
[17:57:04] <cmr_> https://github.com/bjz/lmath-rs
[17:57:24] <cmr_> He wants to merge https://github.com/bjz/cgmath-rs into it
[17:58:08] <MaikKlein> I'll have a look thanks
[17:59:40] <cmr_> So raise of hands, who *does* have colors with rustc right now?
[18:00:10] * mark_edward raises hands
[18:00:10] <strcat> not me. because my terminal doesn't lie about TERM
[18:00:32] <strcat> cmr_: doesn't it just hardcode a few common ones atm
[18:00:37] <cmr_> yeah
[18:00:41] <cmr_> xterm and 3 others
[18:00:45] <cmr_> I don't remember what they were anymore
[18:00:51] <cmr_> BUt I want to know who actually sees them :)
[18:00:55] <strcat> screen and urxvt? if I take a wild guess
[18:00:56] *** Quits: Jesse (jruderman@2557E599.66715431.D25A875A.IP) (Quit: Jesse)
[18:01:22] <cmr_> https://github.com/cmr/rust/commit/cf64324e19efd159fe0411f55a608f4f747e298d#L1L52
[18:01:29] <cmr_> screen and screen-bce and xterm-256color
[18:01:31] *** Quits: btipling (btipling@moz-D51E0AEB.xen.prgmr.com) (Quit: ZNC - http://znc.sourceforge.net)
[18:01:39] <cmr_> or, sorry, xterm-color
[18:01:49] <cmr_> but not just screen
[18:02:39] *** Quits: JesseH (JesseH@moz-2E766C3E.mc.at.cox.net) (Quit: github.com/jessehorne)
[18:02:52] *** Quits: dsirenko (mitra@8E712A0.54C21BA0.9F317420.IP) (Ping timeout)
[18:03:31] <bstrie> mine is screen-256color, because otherwise tmux can't show colors in vim
[18:04:01] <strcat> cmr_: if I used xterm I wouldn't have this http://i.imgur.com/d7GyLcF.png ;p
[18:04:06] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[18:04:14] *** Joins: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net)
[18:04:21] <MaikKlein> is it usual in rust to have files with 3000 lines of code? 
[18:04:27] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[18:04:40] <bstrie> MaikKlein: no more than it is in python
[18:04:52] <bstrie> or any other language
[18:04:57] <cmr_> anyway windows support is trivial to add, though I have more extra::term refactorings I want to sneak in before that (term.write_colored(&str, color_enum_variant, bold_bool))
[18:05:02] *** Quits: brson (brson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[18:05:46] *** Joins: brson (brson@2557E599.66715431.D25A875A.IP)
[18:05:46] *** ChanServ sets mode: +o brson
[18:05:47] *** Quits: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP) (Quit: Leaving)
[18:05:47] *** Joins: btipling (btipling@moz-D51E0AEB.xen.prgmr.com)
[18:05:51] *** Joins: fabiand (fabiand@moz-571979A5.adsl.alicedsl.de)
[18:06:11] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Ping timeout)
[18:06:43] *** Quits: illissius (illissius@A518C422.3F1C0C4.3AEF08B3.IP) (Ping timeout)
[18:06:59] <bstrie> strcat: you better hope nobody ever invents a malicious xttp protocol, because you'll be helpless to recognize it
[18:06:59] *** Joins: illissius (illissius@A518C422.3F1C0C4.3AEF08B3.IP)
[18:07:18] <strcat> bstrie: it only highlights http:// ones ;p
[18:07:33] <strcat> and I could make the numbers smaller if I wasn't too lazy to tweak the font size a bit
[18:07:52] *** Joins: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[18:08:17] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[18:08:24] <strcat> it's a pretty reasonable regexp. it recognizes urls that meet the RFC requirements (so not i18n ones, cause then you essentially have '.+')
[18:08:26] *** Quits: brson (brson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[18:08:32] *** Joins: Jesse (jruderman@2557E599.66715431.D25A875A.IP)
[18:09:36] *** Quits: tikue (tkuehn@2557E599.66715431.D25A875A.IP) (Quit: tikue)
[18:09:39] <cmr_> I use:
[18:09:41] <cmr_> (?:https?://|ftp://|news://|mailto:|file://|www\.)
[18:09:41] <cmr_> [\w\-\@;\/?:&=%\$_.+!*\x27(),~#]+[\w\-\@;\/?&=%\$_+!*\x27()~]
[18:10:02] *** Quits: seth (seth@2557E599.66715431.D25A875A.IP) (Input/output error)
[18:10:25] *** Joins: graydon (graydon@moz-2141437A.bchsia.telus.net)
[18:10:26] *** ChanServ sets mode: +qo graydon graydon
[18:11:18] <bstrie> cmr_: I had a little bit of a heart attack trying to parse that regex
[18:11:49] *** Quits: illissius (illissius@A518C422.3F1C0C4.3AEF08B3.IP) (Ping timeout)
[18:11:53] <cmr_> yeah I didn't write it and I have no idea what it does except the protocol, but it works really well :)
[18:12:26] *** Quits: MaikKlein (maik@moz-972D34E0.dip0.t-ipconnect.de) (Ping timeout)
[18:12:29] <bstrie> shame on you, it could be one of those perl regexes that steals your credit card information by hijacking your webcam to peer into your wallet
[18:12:36] *** Joins: illissius (illissius@A518C422.3F1C0C4.3AEF08B3.IP)
[18:12:42] <cmr_> lol
[18:13:03] *** Joins: brendan (brendaneic@2557E599.66715431.D25A875A.IP)
[18:14:02] <bstrie> graydon: I've been meaning to ask, did you choose ~ and @ originally because the former is linear and the latter is cyclical? :P
[18:14:35] *** Joins: dimension (dimension@moz-4CCD79C5.dsl.dynamic.simnet.is)
[18:14:37] <cmr_> heh
[18:14:51] <graydon> yes
[18:14:57] <bstrie> brilliant
[18:15:09] <cmr_> really?
[18:17:24] *** Joins: carter (carter@moz-BDFE46F6.nyc.biz.rr.com)
[18:17:40] *** Quits: igl1 (igl@moz-432220ED.adsl.alicedsl.de) (Ping timeout)
[18:17:49] *** Joins: igl (igl@moz-82347D8C.adsl.alicedsl.de)
[18:18:16] <graydon> yeah. well, more that visually, ~ is a single line and @ is a large squiggly blob.
[18:18:39] <graydon> there aren't a lot of plausible sigils to work with. most of ascii is reserved for meaningful operators.
[18:19:01] <bstrie> mmm, large squiggly blob. instead of Gc<>, we can have Lsb<>
[18:19:01] <graydon> I guess the way we're using it, it's not strictly a sigil, it's an operator too
[18:19:02] <cmr_> I noted that `, ?, %, and $ were unused (except $ in macros)
[18:19:35] <graydon> $ was reserved for macros. % is our remainder operator. ? was used for pattern variable-binding for a long time. I liked it, nobody else did.
[18:19:38] *** Joins: rusti_ (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[18:19:44] <cmr_> Oh, modulo, right
[18:19:46] <bstrie> I contend that ` should remain unused for easier pasting into markdown
[18:19:48] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[18:19:48] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[18:19:56] <graydon> ` I consider too visually ambiguous with ' to use in production
[18:20:06] <cmr_> I definitely don't think rust should use more sigils
[18:20:08] <bstrie> that's the same reason that python3 dropped `
[18:20:09] <cmr_> I was joknig D:
[18:20:10] <graydon> and, yeah, it's not a bad thing to reserve a few for quoting-in other languages anyways
[18:20:22] *** Quits: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP) (Quit: eatkinson)
[18:20:22] <engla> ~ and ` are both tricky to type on various keyboard layouts. Sure, it's possible to remap and fix
[18:20:39] <graydon> I still think # ought to have remained reserved for syntax extensions but ah well
[18:20:47] <graydon> lose a few battles, price you pay for consensus :)
[18:21:09] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[18:21:13] <cmr_> I would like to see ? valid in identifiers, a la ruby
[18:21:29] <bstrie> let _??_?_?? = 4;
[18:21:45] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[18:21:57] <cmr_> if self.foo_enabled? { ... }, or self.enabled?(foo)
[18:22:15] <strcat> cmr_: yes please, that would end the is_not_foo debate ;p
[18:22:20] <strcat> foo.empty?
[18:22:22] <strcat> !foo.empty?
[18:22:34] <doener> hmm, I looks like self-by-value won't work for 64bit types on 32bit the way self is handled currently.
[18:22:35] <strcat> maybe not everyone likes that :)
[18:22:39] <engla> ? loks like an operator
[18:22:47] <engla> *oo
[18:22:51] <bstrie> it depends on your background
[18:23:07] <bstrie> ? looks like nothing to me, because I'm neither from ruby nor do I ever use the ternary operator :P
[18:23:41] <cmr_> I've only used ruby in passing, but that was the #1 thing it impressed on me, ? in identifiers
[18:24:05] <cmr_> Much more generally useful than ternary operator
[18:24:09] *** Quits: cmr_ (cmr_@moz-AF1E4A33.clients.kiwiirc.com) (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
[18:24:36] *** Quits: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP) (Input/output error)
[18:24:52] <bstrie> getting rid of the ternary operator was the best thing that rust ever did, because it was the snowball the led to two years of feature-cutting :P
[18:26:04] <doener> I dislike the way "if something.is_fishy?" looks. "If ..." is not a question
[18:26:14] *** Quits: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[18:27:00] <bstrie> my own proposal was that we use ? to denote whenever a function is returning an option
[18:27:39] <bstrie> rather than using it to denote a function whose value is truthy/falsy, as per ruby
[18:28:45] <benh> gross
[18:29:53] *** Quits: tjc (tjc@moz-24D1560B.telebyte.com) (Ping timeout)
[18:30:45] *** Quits: sankha93 (Instantbir@D46AAA40.F6D95C1.8B6C1D65.IP) (Ping timeout)
[18:31:09] *** Quits: balpert (alpert@moz-B247840C.hsd1.ca.comcast.net) (Quit: balpert)
[18:31:10] <strcat> doener: it doesn't have to read like english, it's a different language - making things look/read like english isn't much help to people who aren't as fluent with it anyway ;p
[18:31:17] * strcat shrugs
[18:31:25] <strcat> I don't have a strong opinion on allowing ? or not anyway
[18:31:38] *** Joins: seth (seth@2557E599.66715431.D25A875A.IP)
[18:32:54] *** Joins: lkuper (lkuper@moz-D862222C.dhcp-bl.indiana.edu)
[18:33:02] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[18:33:13] *** Quits: mib_zgi3z3 (Mibbit@F0C8E617.4C7AE645.2662C207.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[18:33:47] <hjr3> hi all. was talking with a friend about ~[]. i remember reading that ~[] is not really an owned pointer, but a special case. thus, you cannot do https://gist.github.com/hjr3/5700195
[18:34:05] <hjr3> am i remember wrong?
[18:34:25] <bstrie> hjr3: you remember right, but this is actually going to be fixed
[18:34:32] <hjr3> perfect, thanks!
[18:34:33] <bstrie> in the future, ~[] will be a normal pointer
[18:34:36] <bstrie> but not today
[18:34:40] <strcat> well @ is immutable so... you can't modify the vector
[18:34:42] *** Quits: echristo (echristo@D423593A.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[18:34:45] <strcat> you'd need @mut
[18:34:55] *** Joins: sankha93 (Instantbir@7251FAC.BC703A9E.8B6C1D65.IP)
[18:34:56] <strcat> @[] vectors do exist.
[18:35:22] <hjr3> strcat interesting. will play with it more, thanks
[18:35:55] <strcat> graydon: https://github.com/mozilla/rust/pull/6913 r?
[18:36:06] *** Quits: fabiand (fabiand@moz-571979A5.adsl.alicedsl.de) (Quit: Verlassend)
[18:36:29] *** Joins: steve (steve@moz-7EA3A323.public.wayport.net)
[18:36:34] *** steve is now known as steveklabnik
[18:37:12] <Jesse> \o/ rust interns!
[18:38:03] *** Joins: fabiand (fabiand@moz-571979A5.adsl.alicedsl.de)
[18:39:26] *** Quits: EXetoC (ex@moz-2DBEB1E4.customer.t3.se) (Quit: WeeChat 0.4.1)
[18:39:43] <engla> rust incoming compiles! I just fed that thing some more swapfile.
[18:40:04] *** Joins: echristo (echristo@D423593A.D6CCE4AE.77834EAA.IP)
[18:40:09] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[18:40:09] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 141a642ab to 144f6285f: 02http://git.io/N3iJvQ
[18:40:09] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[18:40:11] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[18:40:11] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/q-g0zg
[18:40:11] <ghrust> 13rust/06auto 14e900dba 15Daniel Micay: rename the Ptr trait to RawPtr...
[18:40:11] <ghrust> 13rust/06auto 145ddbc88 15bors: auto merge of #6913 : thestinger/rust/ptr, r=graydon...
[18:40:11] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[18:40:18] *** Joins: MaikKlein (maik@moz-972D34E0.dip0.t-ipconnect.de)
[18:41:14] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[18:41:26] *** Joins: balpert (alpert@moz-793B8F0F.khanacademy.org)
[18:43:47] *** Joins: tikue (tkuehn@2557E599.66715431.D25A875A.IP)
[18:46:12] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[18:46:13] *** Joins: EXetoC (ex@moz-2DBEB1E4.customer.t3.se)
[18:46:26] <MaikKlein> hm
[18:46:49] <MaikKlein> is rustdoc usable right now?
[18:46:55] *** Joins: vosen (vosen@moz-266BA656.icpnet.pl)
[18:46:56] *** Joins: Ralith (ralith@moz-50F3C77.vc.shawcable.net)
[18:47:02] *** Joins: alisdair (textual@moz-EBE9F394.bchsia.telus.net)
[18:47:27] <EXetoC> is that not what they use for the official distribution?
[18:47:46] <MaikKlein> I think so
[18:48:00] <steveklabnik> yeah
[18:48:05] <steveklabnik> it is, as far as i know
[18:48:12] <MaikKlein> I am trying to extract the docs out of lmath and it runs since 5 mins
[18:48:24] <strcat> MaikKlein: do you have pandoc?
[18:48:31] <MaikKlein> strcat, no
[18:48:43] <strcat> MaikKlein: well it needs pandoc, maybe it doesn't check for errors properly
[18:48:57] <strcat> should open a bug about that if there isn't one
[18:49:45] <MaikKlein> ah yeah it works with pandoc
[18:49:58] <MaikKlein> ok I'll search for an open ticket
[18:50:57] *** Quits: pyrac (pyrac@moz-96C2FD1F.w109-214.abo.wanadoo.fr) (Quit: pyrac)
[18:51:16] *** Joins: blitter (blitter@moz-BA14D5CF.dyn.centurytel.net)
[18:51:36] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[18:51:58] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[18:52:48] *** Joins: tjc (tjc@36B3FF50.4D3A0C06.43B20542.IP)
[18:52:48] *** ChanServ sets mode: +o tjc
[18:54:18] *** Quits: tikue (tkuehn@2557E599.66715431.D25A875A.IP) (Quit: tikue)
[18:54:49] *** Quits: brendan (brendaneic@2557E599.66715431.D25A875A.IP) (Quit: brendan)
[18:55:58] *** Joins: tikue (tkuehn@2557E599.66715431.D25A875A.IP)
[18:56:20] *** Quits: seth (seth@2557E599.66715431.D25A875A.IP) (Input/output error)
[18:56:26] *** Joins: brendan (brendaneic@2557E599.66715431.D25A875A.IP)
[18:56:30] *** Joins: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP)
[18:56:53] *** Quits: sk (sk@EA324BFE.54A580E3.78DD174B.IP) (Quit: Leaving)
[18:57:54] *** Quits: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP) (Quit: eatkinson)
[18:59:04] *** Quits: brendan (brendaneic@2557E599.66715431.D25A875A.IP) (Quit: brendan)
[19:02:12] *** Quits: Jesse (jruderman@2557E599.66715431.D25A875A.IP) (Ping timeout)
[19:02:31] *** Joins: Jesse (jruderman@2557E599.66715431.D25A875A.IP)
[19:02:51] *** Joins: pyrac (pyrac@moz-96C2FD1F.w109-214.abo.wanadoo.fr)
[19:03:21] *** Quits: ssbr (ssbr@moz-F4C1E66D.dsl.bell.ca) (Ping timeout)
[19:04:42] *** Quits: doener (doener@moz-121949B3.unitymediagroup.de) (Quit: leaving)
[19:05:14] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[19:05:36] *** Quits: rusti_ (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[19:05:42] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[19:05:46] <strcat> rusti: 2
[19:05:48] -rusti- 2
[19:06:34] <cmr> Hm
[19:07:05] <cmr> It's a bit hard to test that terminfo path searching works correctly (only uses paths that exist) if none of the terminfo files are installed on the buildbots :)
[19:07:15] *** Quits: tikue (tkuehn@2557E599.66715431.D25A875A.IP) (Quit: tikue)
[19:07:34] <strcat> don't they have ncurses?
[19:07:39] <cmr> Seems not.
[19:07:45] <bstrie> cmr: true, but you'll be able to test the failure paths quite thoroughly
[19:07:53] *** Quits: fabiand (fabiand@moz-571979A5.adsl.alicedsl.de) (Quit: Verlassend)
[19:08:44] <cmr> My test uses screen, which I figured was pretty generic :\
[19:09:23] <cmr> it's certainly in ncurses source
[19:09:44] <cmr> Should I just mark it xfail?
[19:09:51] *** Quits: eholk (eholk@moz-6D2C9014.uconnect.utah.edu) (Quit: eholk)
[19:10:37] *** Quits: sankha93 (Instantbir@7251FAC.BC703A9E.8B6C1D65.IP) (Ping timeout)
[19:11:58] <MaikKlein> hm I found the following in a rustdoc file Method identity fn identity() -> Self. Isn't this a function?
[19:12:14] <MaikKlein> that I would call like vec3::identity()?
[19:12:31] <MaikKlein> because it has no self parameter
[19:12:50] <tjc> MaikKlein: If it's declared inside a trait, it's a static method
[19:12:57] <tjc> that's how you know it's static, because it doesn't have a self parameter
[19:14:13] <MaikKlein> do I call static methods like this? vec3::identity()
[19:14:22] <bstrie> yep
[19:14:42] *** Joins: sankha93 (Instantbir@7251FAC.BC703A9E.8B6C1D65.IP)
[19:14:54] <bstrie> assuming that your definition looks like `impl vec3 { fn identity() ... }`
[19:16:36] *** Quits: zxcdw (r-a@moz-C7C5467B.cust.bredband2.com) (Ping timeout)
[19:16:38] *** Joins: zxcdw (r-a@moz-C7C5467B.cust.bredband2.com)
[19:18:05] *** Joins: ircloggr (nodebot@moz-218B8E8E.compute-1.amazonaws.com)
[19:18:36] *** Quits: ysuzuki (ysuzuki@moz-285468F7.net219126120.t-com.ne.jp) (Client exited)
[19:19:04] *** Joins: Blub\w (wry@moz-A3283263.wireless.dyn.drei.com)
[19:19:17] <engla> if it's in a trait then you have to use the trait name instead of vec3
[19:19:45] <bstrie> ah right, good point
[19:19:49] *** Joins: ssbr (ssbr@moz-A48A4550.s-ip.magma.ca)
[19:21:09] *** Joins: brendan (brendaneic@2557E599.66715431.D25A875A.IP)
[19:21:54] *** Joins: barosl (barosl@1E71221E.C81E10FB.7544CABF.IP)
[19:21:58] <MaikKlein> oh
[19:22:05] <MaikKlein> thanks engla
[19:22:21] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[19:23:36] *** Quits: victorporof (victorporo@AD24D94A.E934E1A1.4A6B528C.IP) (Quit: victorporof)
[19:23:44] *** Quits: tjc (tjc@36B3FF50.4D3A0C06.43B20542.IP) (Quit: zzzzzzzzzz)
[19:24:43] *** Joins: tjc (tjc@36B3FF50.4D3A0C06.43B20542.IP)
[19:24:44] *** ChanServ sets mode: +o tjc
[19:26:05] *** Quits: xazax (xazax@moz-D7592A2A.csoma.elte.hu) (Client exited)
[19:26:54] *** Joins: seth (seth@2557E599.66715431.D25A875A.IP)
[19:31:01] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[19:31:01] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/q-g0zg
[19:31:01] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[19:31:08] *** Quits: seth (seth@2557E599.66715431.D25A875A.IP) (Ping timeout)
[19:34:06] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[19:34:06] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/DIxO5A
[19:34:06] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[19:34:08] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[19:34:08] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/qDSn_w
[19:34:08] <ghrust> 13rust/06auto 145b09dca 15Tim Chevalier: docs: Mention recently-added rustpkg features in the rustpkg manual
[19:34:08] <ghrust> 13rust/06auto 14c68c015 15bors: auto merge of #6906 : catamorphism/rust/rustpkg-doc, r=graydon...
[19:34:08] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[19:34:29] <cmr> strcat: Should I xfail the tests for terminfo?
[19:34:47] <strcat> cmr: not sure.
[19:34:57] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[19:35:16] <strcat> cmr: are there ones requiring ncurses to be installed?
[19:35:29] *** Quits: steveklabnik (steve@moz-7EA3A323.public.wayport.net) (Ping timeout)
[19:35:32] <cmr> strcat: https://github.com/cmr/terminfo-rs/blob/master/searcher.rs#L61
[19:35:43] <cmr> It really just requires that the paths exist.
[19:35:47] <strcat> ah right
[19:35:48] <cmr> So it could be mocked I suppose
[19:35:59] *** Joins: jeff (jeff@4231C034.745B261B.F12515B4.IP)
[19:36:48] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[19:36:58] <kimundi> Reading the reddit thread, there really needs to be an top-upvoted post containing "DEFINITION OF MEMORY SAFETY: [...]" on each rust thread to point people to if they're trying to argue that a memory-unsafe language correctly used is memory safe...
[19:37:58] <strcat> kimundi: it won't help ;p, people know that C++ doesn't have issues with resource leaks (other than cycles) so they're going to pretend that means equivalence with memory safety if that's the POV they're pushing
[19:38:31] <strcat> I happen to like a lot of C++ but I don't pretend it's not plagued with problems...
[19:38:33] <kimundi> All these c++ claims end up as "You don't need a language that prevents bugs if you don't write bugs"... It's idiotic...
[19:38:47] <cmr> Well it's true.
[19:38:57] <cmr> Impossible, but true :p
[19:39:06] <kimundi> Yeah...
[19:39:06] <EXetoC> so most humans aren't superhumans? huh
[19:39:19] <kimundi> Who would've thought :P
[19:39:20] <strcat> kimundi: the usual argument on reddit is gc vs. no gc and people conflate gc with memory safety
[19:39:38] <strcat> so the C++ fans invented some distortions of the meaning of memory safety ;p
[19:41:05] <kimundi> I mostly just feel sorry for us rusties who have to explain them all the time that what they're saying... Just doesn't make sense in reality.
[19:41:59] <pnkfelix> nmatsakis: ping
[19:42:08] *** Joins: steveklabnik (steve@moz-684A3920.sub-70-199-224.myvzw.com)
[19:42:12] <strcat> kimundi: well they know they're not correct, but they want C++11 to be "successful" so they are willing to bend the truth
[19:42:14] <strcat> it's advocacy
[19:42:17] <strcat> it's not always honest.
[19:42:55] <bblum> just parsing libstd seems to take 15+ seconds
[19:43:00] <strcat> anyway just be clear and use 'dangling reference and/or iterator invalidation' instead of 'memory safety'
[19:43:05] *** Parts: judder (maradukewa@385DDD8F.206937E4.78E362FE.IP) ()
[19:43:28] <doomlord> people who want memory safe C++ should be migratig to rust really instead of pretending C++ is memory safe
[19:43:50] <doomlord> C++ for better or for worse has an unsafe language at its core, its silly to pretend otherwise
[19:43:54] <bstrie> doomlord: but that's so much more difficult than just believing in a different definition of "memory safety" :)
[19:44:00] <steveklabnik> heh
[19:44:15] <bstrie> "no true scotsman would return an interior reference"
[19:44:31] *** Joins: judder (maradukewa@385DDD8F.206937E4.78E362FE.IP)
[19:44:42] <doomlord> iterators in C++ are pointers ashamed of what they really are :)
[19:44:43] <strcat> right, apparently C++ programmers put every file object in a shared_ptr
[19:44:45] *** Parts: judder (maradukewa@385DDD8F.206937E4.78E362FE.IP) ()
[19:44:48] <strcat> since files aren't copyable...
[19:44:54] <strcat> but really, they don't.
[19:44:54] <tjc> bblum: if you have CFG_DISABLE_OPTIMIZE set, unsetting it may help
[19:45:05] <cmr> fwiw, I rarely if ever use shared_ptr, unique_ptr etc...
[19:45:12] <bblum> tjc: i see, yeah, ok
[19:45:12] <cmr> but I don't write production quality C++
[19:45:18] <tjc> some safety checks got introduced that are disabled when optimization is on (things should be fine again after the next snapshot)
[19:45:31] <strcat> cmr: well you only really need unique_ptr for wrapping legacy libs anyway
[19:46:10] *** Joins: judder (maradukewa@385DDD8F.206937E4.78E362FE.IP)
[19:46:14] *** Parts: judder (maradukewa@385DDD8F.206937E4.78E362FE.IP) ()
[19:46:46] *** Quits: posco (oscarboyki@692ED873.5999CED5.71743E61.IP) (Quit: posco)
[19:49:37] <pnkfelix> nmatsakis: nm, I want to puzzle on own more.
[19:50:40] *** Joins: maik_ (maik@moz-13F840A5.dip0.t-ipconnect.de)
[19:51:42] *** Quits: MaikKlein (maik@moz-972D34E0.dip0.t-ipconnect.de) (Ping timeout)
[19:52:53] <cmr> Is it eve possible to xfail a unit test?
[19:53:23] <bstrie> cmr: yes, you comment it out :)
[19:54:09] *** Joins: victorporof (victorporo@AD24D94A.E934E1A1.4A6B528C.IP)
[19:55:58] *** Quits: heftig (heftig@moz-8E0B0A99.dip0.t-ipconnect.de) (Ping timeout)
[19:56:25] *** Quits: brendan (brendaneic@2557E599.66715431.D25A875A.IP) (Quit: brendan)
[19:56:27] *** Quits: Axord (xord@moz-C3CCF156.lsanca.dsl-w.verizon.net) (Quit: I'm sure it's perfectly safe)
[19:56:56] <tjc> cmr: you can use #[ignore(reason = "monkeys")]
[19:57:02] <tjc> preferably with a better reason than "monkeys", though
[19:57:05] <strcat> cmr: there are essentially zero "modern" C++ libs anyway. ;p
[19:57:15] <cmr> tjc: ah, thanks
[19:57:18] <strcat> boost uses C++03 with a few C++11 bits tacked on behind ifdefs
[19:57:20] <tjc> yw
[19:57:30] <strcat> well actually, C++98*
[19:57:41] <strcat> + they support older/broken compilers
[19:57:54] <strcat> boost::optional doesn't even have move semantics implemented.
[19:58:24] *** Joins: heftig (heftig@moz-A96955D1.dip0.t-ipconnect.de)
[19:58:56] *** Quits: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net) (Quit: Computer has gone to sleep.)
[19:59:04] *** Joins: brendan (brendaneic@2557E599.66715431.D25A875A.IP)
[20:00:18] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[20:00:25] *** Quits: \n (NDesaulnie@2557E599.66715431.D25A875A.IP) (Quit: \n)
[20:00:30] *** Joins: seth (seth@2557E599.66715431.D25A875A.IP)
[20:00:34] *** Quits: victorporof (victorporo@AD24D94A.E934E1A1.4A6B528C.IP) (Ping timeout)
[20:01:34] *** Joins: eholk (eholk@moz-6D2C9014.uconnect.utah.edu)
[20:01:43] *** Quits: seth (seth@2557E599.66715431.D25A875A.IP) (Connection reset by peer)
[20:03:45] <cmr> rusti: static foo: &'static [u8] = &'static [1, 2, 3]; static bar: &'static [u8] = &'static [1, 2, 3]; #[static_assert] static baz: bool = foo.len() == bar.len(); 123
[20:03:47] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/ZKQV
[20:04:25] <cmr> So could methods on static things that only use/capture etc other static things (and immutable at that) be possible?
[20:04:40] *** Quits: steveklabnik (steve@moz-684A3920.sub-70-199-224.myvzw.com) (Connection reset by peer)
[20:04:41] <cmr> ie, if everything involved is static, it could be computed at compile time?
[20:05:42] <Jeaye> Is static meant to be constexpr like that?
[20:05:59] <cmr> Yes, afaik
[20:06:10] *** Quits: brendan (brendaneic@2557E599.66715431.D25A875A.IP) (Quit: brendan)
[20:07:10] *** Joins: SingingBoyo (brandon@moz-94AE1D3A.bchsia.telus.net)
[20:08:27] <cmr> strcat: r? https://github.com/mozilla/rust/pull/6826
[20:08:45] <strcat> Jeaye: static means stored in the rodata section
[20:08:49] *** Quits: maik_ (maik@moz-13F840A5.dip0.t-ipconnect.de) (Ping timeout)
[20:08:49] <strcat> so it has to be computed at compile-time
[20:08:52] *** Joins: brendan (brendaneic@2557E599.66715431.D25A875A.IP)
[20:08:54] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[20:08:56] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[20:10:09] *** Joins: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP)
[20:11:12] *** Quits: Palmik (palmik@moz-5CA3F354.pks.muni.cz) (Ping timeout)
[20:11:13] <Jeaye> Ahh
[20:11:13] *** Joins: Palmik (palmik@moz-5CA3F354.pks.muni.cz)
[20:11:22] * Jeaye was thinking of C++'s static.
[20:11:34] <Jeaye> cmr: Makes sense that the above code should work then
[20:15:23] <erickt> Hey #rust, does anyone know of a good venue or two in San Francisco Bay Area for us to host a meetup?
[20:15:52] <bstrie> break into mozilla hq and steal their conference rooms
[20:16:15] <cmr> I have a feeling walking out with a conference room is going to be a tad difficult
[20:16:29] <bstrie> when you steal a conference room you actually fill it with cement
[20:17:00] <kimundi> strcat: Mind if I replace IteratorUtil::to_vec() with a generic IteratorUtil::collect() method?
[20:17:12] <strcat> kimundi: what will it do?
[20:17:17] <erickt> bstrie: heh
[20:17:19] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[20:17:53] <kimundi> strcat: return an container that contains the elements of the iterator
[20:18:07] <tjc> erickt: if you want to host it at the Mozilla office (near Embarcadero), I'm sure I could arrange that for you
[20:18:09] <strcat> kimundi: yeah but how do you implement it generically?
[20:18:19] <strcat> on IteratorUtil
[20:18:23] <tjc> either the SF office or the MV office, whichever you think would be more appealing for people :-)
[20:18:55] <erickt> tjc: ooh that'd be nifty.
[20:19:12] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[20:19:13] <bstrie> strcat: is it accurate to say that, philosophically, rust iterators are more like python iterators than c++ iterators?
[20:19:26] <tjc> erickt: if you want to drop me a line at tchevalier@mozilla.com with a tentative date/time, I can make inquiries
[20:19:28] <strcat> bstrie: well they are like Boost.Range, which are proper C++ iterators ;p
[20:19:43] <strcat> bstrie: they know when to stop without comparing to a second sentinel iterator
[20:19:53] <bstrie> ah ok, I was reading http://www.cplusplus.com/reference/iterator/ and thinking that this looked nothing like what rust provides
[20:20:07] <kimundi> strcat: I think collect() would have to be a generic method with return value T: Collectable. Collectable would be a trait with a function to collect the elemnts of an iterator into the self type
[20:20:08] *** Joins: BitPuffin (quassel@moz-8370D1B9.bredband.comhem.se)
[20:20:09] <erickt> tjc: will do
[20:20:12] <strcat> bstrie: http://www.boost.org/doc/libs/1_53_0/libs/range/doc/html/range/reference/adaptors/introduction.html
[20:20:14] <strcat> etc.
[20:20:20] <bstrie> thanks
[20:20:35] <strcat> bstrie: http://www.boost.org/doc/libs/1_53_0/libs/range/doc/html/range/reference/algorithms/non_mutating.html like these
[20:20:56] <bstrie> neat
[20:21:06] <strcat> we could probably have mutable iterator objects but they would probably have to be carefully done with unsafe code
[20:21:43] <strcat> as in yielding &mut instead of &
[20:22:04] <strcat> but somehow you have to prevent keeping the &mut and calling .next() again
[20:22:10] *** Quits: BitPuffin (quassel@moz-8370D1B9.bredband.comhem.se) (Ping timeout)
[20:23:09] <kimundi> strcat: Is the from_iterable fn you keep mentioning already traitified somewhere in std?
[20:23:11] *** Joins: BitPuffin (quassel@moz-8370D1B9.bredband.comhem.se)
[20:23:17] <strcat> kimundi: not yet
[20:23:23] <strcat> kimundi: but I think that's what you need
[20:23:41] <kimundi> ess, that's what Collectable would be basically
[20:23:46] <kimundi> yes*
[20:24:01] <strcat> kimundi: so, I think what we should do is make FromIter taking an internal iterator
[20:24:12] <strcat> and then add .collect() to IteratorUtil wrapping it
[20:24:18] <strcat> does that make sense?
[20:24:24] <kimundi> yeah, that was my plan
[20:24:30] <strcat> good :)
[20:24:46] <strcat> kimundi: so yeah, FromIter would be in iter.rs and then the extra method on IteratorUtil
[20:24:57] <strcat> + a bunch of impls
[20:24:57] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[20:26:02] <kimundi> So, I need to add the FromIter trait, implement it on at least ~[T], add the collect method to IteratorUtil and write impls. Anything else?
[20:26:23] <strcat> kimundi: no I think that's all
[20:26:56] <kimundi> Ah, last thing: remove to_vec() ;)
[20:27:07] *** Quits: pyrac (pyrac@moz-96C2FD1F.w109-214.abo.wanadoo.fr) (Quit: pyrac)
[20:27:29] <strcat> so, let ~[int] = foo.transform(|x| x + 2).collect();
[20:27:33] <strcat> that's nice
[20:27:43] *** Quits: Blei (philipp@moz-96D25F7A.cust.bluewin.ch) (Quit: WeeChat 0.4.1)
[20:28:07] <strcat> since then you can get @[int], HashSet or whatever else
[20:28:08] <kimundi> yeah it is. And just one latter longer than to_vec()
[20:28:14] <kimundi> letter*
[20:28:33] <strcat> kimundi: + a type hint though
[20:28:45] <kimundi> true
[20:28:47] <strcat> unless it gets inferred somewhere else
[20:29:06] <strcat> which might be common when you do actually need a vec...
[20:30:14] <kimundi> strcat: what is blocking transform -> map btw?
[20:30:25] <strcat> kimundi: method resolve is broken-ish
[20:30:27] <strcat> on generics
[20:30:30] <strcat> it doesn't check type bounds
[20:30:38] <strcat> so it thinks IteratorUtil could be implemented on any T ;\
[20:30:52] <strcat> it conflicts with Option's map method
[20:30:54] <strcat> among others
[20:31:18] *** Joins: \n (NDesaulnie@2557E599.66715431.D25A875A.IP)
[20:31:21] <strcat> even though Option obviously isn't an iterator object (it would be an iterable letting you grab an iterator object)
[20:32:01] *** Joins: dcoates (dcoates@moz-BE33DA21.fw1.sfo1.mozilla.net)
[20:32:20] *** Joins: seth (seth@2557E599.66715431.D25A875A.IP)
[20:32:37] *** Joins: pragmatic (pragmatic@moz-1A421840.hsd1.ca.comcast.net)
[20:33:13] <jdm> tjc: note that jack gave a link to a particular servo branch that reproduced the error, not master: https://github.com/metajack/rust-css/tree/test-ice
[20:33:19] <jdm> in regards to #5790
[20:33:34] <tjc> jdm: I thought he said you had to build servo as a whole to see the error
[20:33:37] <tjc> with that particular branch of rust-css
[20:33:43] <tjc> rather than just building rust-css on its own
[20:33:46] <jdm> oh, hmm
[20:33:48] <jdm> that's a good point
[20:34:04] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[20:34:04] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/qDSn_w
[20:34:04] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[20:34:39] <tjc> feel free to try to reproduce and reopen, though!
[20:35:01] *** Quits: tjc (tjc@36B3FF50.4D3A0C06.43B20542.IP) (Quit: zzzzzzzzzz)
[20:35:38] *** Quits: cowboyd (cowboyd@1D8844A7.1B729417.CEE440B6.IP) (Client exited)
[20:36:07] <kimundi> strcat: "kimundi: so, I think what we should do is make FromIter taking an internal iterator" ah, I just saw the _internal_ iterator part. Why not an external?
[20:36:24] <strcat> kimundi: because all external iterators will have the collect method already
[20:36:26] *** Joins: snearch (snearch@moz-70E36F27.pool.mediaways.net)
[20:36:41] <strcat> they can just pass |f| self.advance(f)
[20:36:54] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[20:36:54] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/Elb2dA
[20:36:54] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[20:36:57] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[20:36:58] <ghrust> 01[13rust01] 15bors pushed 9 new commits to 06auto: 02http://git.io/5ZfEDQ
[20:36:58] <ghrust> 13rust/06auto 14cf64324 15Corey Richardson: extra::term overhaul
[20:36:58] <ghrust> 13rust/06auto 147281166 15Corey Richardson: Use find_equiv in term
[20:36:58] <ghrust> 13rust/06auto 141f27c63 15Corey Richardson: rustpkg borrowed pointers
[20:36:58] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[20:38:09] <spider-mario> Iâ€™m getting a strange error message
[20:38:11] <spider-mario> error: expected `for` closure to return `bool`, but found `bool`
[20:38:28] <benh> :D
[20:38:31] *** Quits: seth (seth@2557E599.66715431.D25A875A.IP) (Ping timeout)
[20:38:31] <cmr> spider-mario: can you pastebin the code for that?
[20:38:32] <spider-mario> thatâ€™s with rustc from master, Iâ€™m currently building incoming
[20:38:40] <spider-mario> Iâ€™ll do that in a minute
[20:38:55] <benh> there's some weirdness around how the for-loop sugar expands I think
[20:39:15] <cmr> My favorite is still the [type error] messages
[20:40:44] <kimundi> strcat: I'm confused... Do you mean that collect can just convert the external to an internal itself, so FromIterable might as well be written to use internal ones?
[20:40:52] <spider-mario> whatâ€™s the recommended paste site around here?
[20:41:12] *** Quits: \n (NDesaulnie@2557E599.66715431.D25A875A.IP) (Ping timeout)
[20:41:15] <kimundi> spider-mario: githubs gists are nice
[20:41:36] <spider-mario> ok
[20:41:46] *** Joins: \n (NDesaulnie@43CB6079.66715431.D25A875A.IP)
[20:41:53] <kimundi> spider-mario: but anything will do really, as long as the code is readable
[20:42:08] <cmr> gist has rust highlighting, which is nice
[20:42:38] <kimundi> The syntax highlighning just results in a few bold keywords, though...
[20:42:45] <doomlord> http://www.webtoolkit.eu/wt <<< would a rust equiv of this make any sense / is anyone doing one
[20:43:42] <spider-mario> it used to work under older versions of Rust, I tried to update it to make it work with newer revisions, and so far I havenâ€™t managed to do so
[20:43:42] <spider-mario> https://gist.github.com/spider-mario/5701214
[20:44:31] *** Quits: \n (NDesaulnie@43CB6079.66715431.D25A875A.IP) (Ping timeout)
[20:44:55] <spider-mario> I guess I got a little lost in all those expansions and indirectionsÂ :p
[20:45:40] *** Joins: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net)
[20:45:54] <kimundi> spider-mario: The limited while needs to return an bool now
[20:46:23] <cmr> why?
[20:46:23] <spider-mario> thatâ€™s what I added the `; true` for in the macro, I thought it would be enough
[20:46:27] *** Joins: \n (NDesaulnie@2557E599.66715431.D25A875A.IP)
[20:46:29] <cmr> the macro returns true
[20:46:52] <spider-mario> it returns a function that returns true
[20:47:08] <kimundi> Hm... sorrty didn't read more than the first 3 lines :P
[20:47:34] <spider-mario> donâ€™t apologize, thatâ€™s my fault (not making my code clear enough) :p
[20:47:55] *** Quits: carter (carter@moz-BDFE46F6.nyc.biz.rr.com) (Quit: Textual IRC Client: www.textualapp.com)
[20:47:56] *** Joins: pauls (pauls@moz-BFEF1F22.ccs.neu.edu)
[20:49:00] <spider-mario> part of why I canâ€™t get it to work is that I donâ€™t remember all of my intentions
[20:49:26] <spider-mario> (what returns what and why? why do I use for? etc.)
[20:50:53] <cmr> What's the option that lets you view the macro-expanded source?
[20:50:53] *** Quits: Palmik (palmik@moz-5CA3F354.pks.muni.cz) (Ping timeout)
[20:50:59] *** Joins: Palmik (palmik@moz-5CA3F354.pks.muni.cz)
[20:51:14] *** Quits: txdv (quassel@966F3542.3BA477DA.14C26596.IP) (Ping timeout)
[20:51:14] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[20:51:25] <spider-mario> --pretty expanded
[20:51:25] *** Quits: unbracketed (textual@moz-7F0EE151.lsanca.fios.verizon.net) (Quit: Computer has gone to sleep.)
[20:51:41] <cmr>     for (|body| { limited_while(3, || answer != ~"42", body); true }) || {
[20:51:47] <cmr> well there's your problem
[20:52:11] *** Quits: maxli (maxli@F2D29657.F60B0462.67AC9B1.IP) (Quit: Leaving.)
[20:52:15] <cmr> there shouldn't be two closures there
[20:52:33] *** Joins: cowboyd (cowboyd@moz-1BD02A1E.sw.biz.rr.com)
[20:52:55] <cmr> and the for doesn't work when you remove the extra parenthesis  around the limited_while!
[20:52:59] <cmr> Weird edge case it seems :S
[20:53:31] *** Joins: txdv (quassel@966F3542.3BA477DA.14C26596.IP)
[20:53:57] <spider-mario> I noticed that problem with the extra parenthesis
[20:54:13] <spider-mario> but Iâ€™ve got one version that used to work with older rusts
[20:54:17] <spider-mario> gonna paste that in a sec
[20:54:48] <cmr> it could very well be a regression
[20:55:03] <cmr> this is a pretty small test case, it should land in the compiler tests.
[20:55:55] <spider-mario> this used to work, afair: http://paste.awesom.eu/yOz
[20:56:46] <spider-mario> which is weird, now that I think about it
[20:56:49] <spider-mario> did it really work?Â :/
[20:57:50] <spider-mario> I think it did
[20:58:11] <spider-mario> well, only the body needs to return a boolean, supposedly
[20:58:23] <spider-mario> not the consumer
[20:58:24] <spider-mario> is that right?
[20:59:11] *** Joins: victorporof (victorporo@AD24D94A.E934E1A1.4A6B528C.IP)
[20:59:16] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[20:59:45] <graydon> spider-mario: I think we had to add extra parens to the LHS and RHS of macro patterns in recent releases
[20:59:46] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[21:00:03] <graydon> the exact reasoning eludes me, as so much in macro-land does
[21:00:03] <spider-mario> oh
[21:00:15] *** Quits: balpert (alpert@moz-793B8F0F.khanacademy.org) (Quit: balpert)
[21:00:31] <pauls> Only to the RHS, IIRC.
[21:00:37] *** Quits: ssbr (ssbr@moz-A48A4550.s-ip.magma.ca) (Client exited)
[21:01:13] *** Quits: victorporof (victorporo@AD24D94A.E934E1A1.4A6B528C.IP) (Connection reset by peer)
[21:01:48] <pauls> ...and only if you're trying to make a block. Basically, you cannot reuse the outer delimiters as the thing being transcribed.
[21:02:33] <pauls> The macro looks fine to me.
[21:02:53] *** Quits: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net) (Quit: Computer has gone to sleep.)
[21:03:24] *** Quits: sankha93 (Instantbir@7251FAC.BC703A9E.8B6C1D65.IP) (Quit: Instantbird 1.4 -- http://www.instantbird.com)
[21:03:49] *** Quits: brendan (brendaneic@2557E599.66715431.D25A875A.IP) (Quit: brendan)
[21:04:17] <SingingBoyo> Is there a way to copy a struct but change some of its fields?  Or do I need to write methods for that myself?
[21:04:33] *** Joins: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net)
[21:04:44] <strcat> SingingBoyo: yes there's a functional update syntax
[21:04:48] <strcat> sec, thinking.
[21:05:25] <strcat> it's something with .. but I never remember the exact syntax :(
[21:05:28] <cmr> NewStruct { field: val, ..oldstruct }
[21:05:44] <strcat> rusti: struct Foo { x: int, y: int, z: int} let x = Foo{ x: 5, y: 10, z: 15}; let z = Foo { x: 7, ..y }; z
[21:05:46] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/bHcP
[21:06:01] <strcat> rusti: struct Foo { x: int, y: int, z: int} let x = Foo{ x: 5, y: 10, z: 15}; let y = Foo { x: 7, .. x }; y
[21:06:03] -rusti- {x: 7, y: 10, z: 15}
[21:06:23] <SingingBoyo> great, thanks
[21:06:42] *** Joins: brendan (brendaneic@2557E599.66715431.D25A875A.IP)
[21:07:42] *** Quits: cstrahan (cstrahan@moz-4C7E5789.hsd1.dc.comcast.net) (Ping timeout)
[21:07:57] *** Joins: mleise (marco@moz-3468AB5B.pools.arcor-ip.net)
[21:10:21] *** Joins: H4199 (chatzilla@moz-64E556D3.austin.res.rr.com)
[21:12:01] *** Quits: vcl (chatzilla@741D4FEA.76F9E272.DA40C4B3.IP) (Quit: ChatZilla 0.9.90 [Firefox 21.0/20130511120803])
[21:12:12] *** Quits: deepdog (deepdog@moz-490E834C.client.mchsi.com) (Quit: Leaving)
[21:12:51] *** Joins: mschifer1 (Adium@2557E599.66715431.D25A875A.IP)
[21:12:51] *** Quits: mschifer (Adium@2557E599.66715431.D25A875A.IP) (Connection reset by peer)
[21:12:57] *** Quits: eholk (eholk@moz-6D2C9014.uconnect.utah.edu) (Quit: eholk)
[21:13:17] *** Joins: mschifer (Adium@2557E599.66715431.D25A875A.IP)
[21:13:22] *** Quits: Palmik (palmik@moz-5CA3F354.pks.muni.cz) (Quit: Lost terminal)
[21:13:27] *** Quits: mschifer1 (Adium@2557E599.66715431.D25A875A.IP) (Connection reset by peer)
[21:14:19] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[21:15:16] *** Quits: dimension (dimension@moz-4CCD79C5.dsl.dynamic.simnet.is) (Quit: Leaving)
[21:17:15] *** Quits: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net) (Connection reset by peer)
[21:18:43] <kimundi> "error: method `from_iter` has an incompatible type: expected type parameter but found type parameter
[21:18:43] <kimundi> "
[21:18:51] <kimundi> Fun :)
[21:19:13] <EXetoC> :>
[21:19:26] *** Joins: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net)
[21:19:36] *** Joins: annodomini (lambda@moz-6424FBF8.hfc.comcastbusiness.net)
[21:20:11] <brendanc> heh, that reminds me of ocaml
[21:21:21] *** Joins: tikue (tkuehn@2557E599.66715431.D25A875A.IP)
[21:21:46] *** Joins: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP)
[21:21:46] <SingingBoyo> rusti: extern mod extra;  use extra::*; 0
[21:21:47] -rusti- foo.rs:10:9: 10:26 error: "extern mod" declarations are not allowed here
[21:21:47] -rusti- foo.rs:10          extern mod extra;  use extra::*; 0
[21:21:47] -rusti-                    ^~~~~~~~~~~~~~~~~
[21:21:47] -rusti- error: aborting due to previous error
[21:21:47] -rusti- application terminated with error code 101
[21:21:56] <Thiez> kimundi: does this help: https://botbot.me/mozilla/rust/msg/3065351/ ?
[21:22:10] <SingingBoyo> oh right can't do that with rusti.  hmm
[21:22:11] <Thiez> I had a similar error a while ago and nmatsakis explained it
[21:22:28] *** Joins: carter (carter@moz-BDFE46F6.nyc.biz.rr.com)
[21:23:05] <kimundi> Not really :)
[21:23:51] *** Joins: brson (brson@2557E599.66715431.D25A875A.IP)
[21:23:51] *** ChanServ sets mode: +o brson
[21:24:03] <Thiez> perhaps try compiling with rustc --be-more-informative-stupid-tool :p
[21:24:16] <bstrie> hmm
[21:24:26] <bstrie> rustc --all-features-implemented
[21:24:29] *** Joins: eholk (eholk@moz-6D2C9014.uconnect.utah.edu)
[21:24:48] <bstrie> rustc --all-bugs-fixed --faster-than-cplusplus
[21:24:51] <Eridius> rustc --dwim
[21:25:26] <Eridius> kimundi: what's the code in question?
[21:25:34] <Thiez> 'once we figured out the type inference, the intent-inference step was surprisingly easy'
[21:25:42] <kimundi> Eridius: Solved it already
[21:26:59] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[21:28:08] *** Quits: brendan (brendaneic@2557E599.66715431.D25A875A.IP) (Quit: brendan)
[21:28:52] <Thiez> I don't like the plan to get rid of @, but it'll be interesting to see how much effort it will take to remove all @ from the compiler
[21:29:21] <Thiez> I wonder if it can be done without too much transmute hackery
[21:29:30] *** Quits: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP) (Ping timeout)
[21:29:33] *** Joins: brendan (brendaneic@2557E599.66715431.D25A875A.IP)
[21:30:02] <SingingBoyo> do modules not quite work properly?  I have commands and commands::create_issue, and I can't use commands::prompt (which is defined in commands.rs)
[21:30:44] *** Quits: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net) (Quit: Computer has gone to sleep.)
[21:30:47] *** Joins: novabyte (Instantbir@moz-3E0F9699.cable.virginmedia.com)
[21:30:52] <bstrie> SingingBoyo: is prompt declared to be public?
[21:31:04] *** Quits: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net) (Ping timeout)
[21:31:06] <SingingBoyo> bstrie: yup
[21:31:28] <novabyte> is there a Rust bundle for Textmate?
[21:31:53] *** Joins: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net)
[21:32:24] <bstrie> novabyte: I think only for sublime text
[21:32:28] <bstrie> novabyte: you could make one!
[21:33:16] <novabyte> bstrie: I may have to ;)
[21:33:22] *** Quits: \n (NDesaulnie@2557E599.66715431.D25A875A.IP) (Ping timeout)
[21:34:03] <novabyte> bstrie: how much of the language is still a moving target?
[21:34:06] <novabyte> *syntax
[21:34:42] <bstrie> novabyte: not a great deal, but it's hardly set in stone. I would expect breakage before 1.0
[21:34:53] <Eridius> well, we may lose @, and there may be changes around fn/proc/whatnot, but from what I understand it's trending more towards stabilization
[21:35:08] *** Joins: \n (NDesaulnie@43CB6079.66715431.D25A875A.IP)
[21:35:52] *** Joins: jgilbert (jgilbert@43CB6079.66715431.D25A875A.IP)
[21:36:04] *** Quits: saml (sam@moz-14C16814.cst.lightpath.net) (Quit: Leaving)
[21:36:08] *** Joins: tjc (tjc@moz-E232F212.hfc.comcastbusiness.net)
[21:36:08] *** ChanServ sets mode: +o tjc
[21:36:18] <SingingBoyo> This is really odd.  it knows the module is there but won't call fns in it... wonder if my files are all in the right place.
[21:36:28] *** Quits: brendan (brendaneic@2557E599.66715431.D25A875A.IP) (Quit: brendan)
[21:36:41] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[21:36:41] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/5ZfEDQ
[21:36:41] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[21:36:54] <Thiez> Eridius: there probably won't be a proc
[21:37:08] <SingingBoyo> if I have commands and commands::create_issue, then I should have ./commands.rs and ./commands/create_issue.rs right?
[21:37:15] <Thiez> after some more thinking supposedly we can do with just fn
[21:37:23] <Eridius> Thiez: oh? good to hear
[21:37:32] <Eridius> I do want my once fns though
[21:37:49] <tjc> SingingBoyo: You probably want to have ./commands/mod.rs instead of ./commands.rs
[21:37:54] <Thiez> Eridius: http://smallcultfollowing.com/babysteps/blog/2013/05/30/removing-procs/
[21:38:02] <tjc> then you can refer to that file inside `use` directives as just `commands`
[21:38:05] <tjc> it's a convention
[21:38:56] <SingingBoyo> tjc: alright.  anything I need to do to tell rustc to look for commands/mod.rs?  Or does it do that automatically?
[21:39:07] <tjc> SingingBoyo: it's automatic
[21:39:38] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[21:39:38] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/dYKvDA
[21:39:38] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[21:39:39] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[21:39:39] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/ZpwrNA
[21:39:39] <ghrust> 13rust/06auto 14fe70361 15Steve Klabnik: Add better documentation for the Prelude.
[21:39:39] <ghrust> 13rust/06auto 14846545a 15bors: auto merge of #6907 : steveklabnik/rust/prelude_docs, r=graydon
[21:39:39] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[21:40:34] <SingingBoyo> unfortunately it still refuses to find my functions.  grr.
[21:41:01] <Eridius> SingingBoyo: are the functions themselves public?
[21:41:46] <SingingBoyo> Eridius: yup.  really not sure what's going on here, gonna see if I can recreate it with something smaller
[21:41:51] *** Quits: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP) (Quit: eatkinson)
[21:43:46] *** Quits: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net) (Input/output error)
[21:45:55] *** Joins: seth (seth@2557E599.66715431.D25A875A.IP)
[21:46:01] *** Quits: EXetoC (ex@moz-2DBEB1E4.customer.t3.se) (Ping timeout)
[21:47:28] <brson> I'm going to try bisecting incoming again
[21:48:23] <cmr> strcat: \o/
[21:48:26] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Quit: Leaving.)
[21:48:30] <strcat> cmr: landed?
[21:48:33] <cmr> yup
[21:48:36] <strcat> yay :)
[21:48:54] <strcat> brson: which problem? the 32-bit segfault one?
[21:49:13] <brson> strcat: are there multiple problems on incoming?
[21:49:22] *** Quits: novabyte (Instantbir@moz-3E0F9699.cable.virginmedia.com) (Quit: bye bye)
[21:49:46] <strcat> brson: yeah it's red on 32-bit OS X and linux
[21:50:04] <strcat> could be OOM. but I doubt it
[21:50:21] <strcat> as in some unchecked malloc call and we run out of VM
[21:50:53] <strcat> graydon: is there a more complete log of 'recent builds' somewhere?
[21:50:57] <strcat> http://buildbot.rust-lang.org/builders/incoming-full-mac that thing
[21:51:04] <strcat> would be nice to know when it turned red
[21:51:35] *** Joins: brendan (brendaneic@2557E599.66715431.D25A875A.IP)
[21:52:15] <SingingBoyo> alright, got my nice minimal example.  Not sure if it's a problem with submodules caller supermodule's functions or a problem with my understanding, but...
[21:52:17] <SingingBoyo> https://gist.github.com/singingboyo/5701730
[21:52:45] *** Quits: cowboyd (cowboyd@moz-1BD02A1E.sw.biz.rr.com) (Client exited)
[21:52:46] <graydon> strcat: if you go to grid or tgrid views you can see a more complete picture
[21:52:51] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[21:53:00] <graydon> strcat: and if you append &length=50 or =100 or such it'll show you more cells
[21:53:12] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[21:53:57] *** Quits: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net) (Ping timeout)
[21:54:45] *** Joins: jensnock_ (jensnocker@moz-8BE55278.customer.t3.se)
[21:54:54] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Ping timeout)
[21:54:55] *** Quits: jdm (jdm@DB05BBF2.BB1F48F2.971E19F6.IP) (Ping timeout)
[21:55:53] *** Joins: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net)
[21:56:50] *** Joins: mib_ftl5cz (Mibbit@4A9C7BFC.5E7A94F9.6AA50C35.IP)
[21:57:57] <kimundi> strcat: Gonna head to bed now, but this is what I have so far: https://github.com/Kimundi/rust/compare/mozilla:incoming...incoming
[21:58:15] *** Joins: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP)
[21:58:32] *** Quits: mib_ftl5cz (Mibbit@4A9C7BFC.5E7A94F9.6AA50C35.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[21:58:53] <strcat> kimundi: that looks good :)
[21:59:55] *** Joins: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP)
[22:00:01] *** Joins: mflamer (Mibbit@moz-FE8B7976.dsl.pltn13.sbcglobal.net)
[22:00:06] *** Joins: solancile (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net)
[22:00:56] *** Quits: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net) (Ping timeout)
[22:01:11] *** Joins: bent_ (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net)
[22:01:13] <kimundi> strcat: Should I remove iter::to_vec as well, or just IterUtil::to_vec?
[22:01:14] *** Joins: steven_is_false (user@moz-144077DE.bchsia.telus.net)
[22:01:18] *** bent_ is now known as bent
[22:01:43] <strcat> kimundi: iter::to_vec too, I think
[22:02:07] <steven_is_false> Hi! I have an owned array that I can't write to a arc::RWARC value. The compiler complains that I can't move it into the borrowed closure. How can I get around this?
[22:02:08] <kimundi> peaople would have to write iter::FromIter::from_iter
[22:02:09] *** Quits: alisdair (textual@moz-EBE9F394.bchsia.telus.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[22:02:19] <Eridius> kimundi: if your comment is meant to be documentation, doesn't it need /// instead of //?
[22:02:27] <strcat> kimundi: well we can put FromIter in prelude
[22:02:33] <strcat> along with Iterator and IteratorUtil
[22:02:41] <strcat> and Times is already there
[22:03:05] <kimundi> strcat: Or I just add iter::collect
[22:03:06] *** Quits: \n (NDesaulnie@43CB6079.66715431.D25A875A.IP) (Ping timeout)
[22:03:08] *** Joins: \n (NDesaulnie@2557E599.66715431.D25A875A.IP)
[22:03:43] <kimundi> anyway gonna remove to_vec. Eridius what comment did you mean?
[22:04:01] <kimundi> Eridius: Ah I see
[22:04:06] <Eridius> kimundi: FromIter::from_iter
[22:09:05] *** Joins: EXetoC (ex@moz-2DBEB1E4.customer.t3.se)
[22:09:32] *** Quits: lmandel (lmandel@F2D29657.F60B0462.67AC9B1.IP) (Quit: lmandel)
[22:10:18] *** Quits: doomlord (doomlod@moz-3CF8202D.range81-159.btcentralplus.com) (Ping timeout)
[22:13:11] *** Parts: steven_is_false (user@moz-144077DE.bchsia.telus.net) (ERC Version 5.3 (IRC client for Emacs))
[22:13:25] *** Quits: EXetoC (ex@moz-2DBEB1E4.customer.t3.se) (Quit: WeeChat 0.4.1)
[22:13:26] *** Quits: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP) (Quit: eatkinson)
[22:13:43] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Quit: Leaving)
[22:15:06] <SingingBoyo> is there somewhere that hosts documentation from the nightly builds?  Or do I need to run make ... or something and just get my own copy?
[22:15:24] *** Joins: rocode (rocode@moz-64C1010D.rocode.net)
[22:15:31] *** Quits: jeff (jeff@4231C034.745B261B.F12515B4.IP) (Quit: jeff)
[22:15:58] <bblum> 75% done Sizedifying libstd...
[22:16:06] *** Joins: jrfeenst (jrfeenst@moz-F912484F.cpe.norwoodlight.com)
[22:16:16] *** Quits: jgilbert (jgilbert@43CB6079.66715431.D25A875A.IP) (Ping timeout)
[22:16:40] *** Joins: EXetoC (ex@moz-2DBEB1E4.customer.t3.se)
[22:17:08] *** Joins: doomlord (doomlod@moz-3CF8202D.range81-159.btcentralplus.com)
[22:18:58] *** Quits: EXetoC (ex@moz-2DBEB1E4.customer.t3.se) (Quit: WeeChat 0.4.1)
[22:19:26] *** Joins: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP)
[22:21:06] *** Joins: pcwalton (pcwalton@2557E599.66715431.D25A875A.IP)
[22:21:06] *** ChanServ sets mode: +o pcwalton
[22:22:12] *** Joins: EXetoC (ex@moz-2DBEB1E4.customer.t3.se)
[22:22:12] *** Quits: EXetoC (ex@moz-2DBEB1E4.customer.t3.se) (Quit: EXetoC)
[22:22:19] *** Joins: EXetoC (ex@moz-2DBEB1E4.customer.t3.se)
[22:24:15] <tikue> rusti: let (x, y): (int, int); if 0 {x = 1; y = 2;} else {x = 2; y = 1;}
[22:24:17] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/QfXE
[22:24:37] <tikue> rusti: let (x, y): (int, int); if false {x = 1; y = 2;} else {x = 2; y = 1;}
[22:24:38] -rusti- ()
[22:25:16] *** Joins: balpert (alpert@moz-793B8F0F.khanacademy.org)
[22:25:25] <tikue> rusti: let (x, y): (int, int); if false {(x, y) = (1, 2);} else {(x, y) = (2, 1);}
[22:25:27] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/XNUS
[22:25:31] *** Quits: Blub\w (wry@moz-A3283263.wireless.dyn.drei.com) (Ping timeout)
[22:27:19] *** Joins: dbaupp (Thunderbir@moz-C6B1454A.lns20.syd7.internode.on.net)
[22:27:32] *** Joins: nano (Mibbit@moz-972880B.superkabel.de)
[22:27:35] <nano> hey
[22:27:44] <nano> c99 added the restrict keyword
[22:27:59] <Luqman> rusti: let (x, y) = if true { (1, 2) } else { (2, 1) }; (x, y)
[22:27:59] <nano> is there something like this in rust?
[22:28:00] -rusti- (1, 2)
[22:28:10] <Luqman> tikue: ^ that's probably what you want
[22:28:23] *** Joins: igl1 (igl@moz-60C8F00E.adsl.alicedsl.de)
[22:28:35] <tikue> Luqman: yes, thank you. Still trying to rewire my brain to do it that way
[22:29:00] *** Quits: igl (igl@moz-82347D8C.adsl.alicedsl.de) (Ping timeout)
[22:30:08] *** Quits: igl1 (igl@moz-60C8F00E.adsl.alicedsl.de) (Ping timeout)
[22:30:10] <strcat> nano: once we have TBAA, yes
[22:30:17] <Eridius> TBAA?
[22:30:22] <strcat> type-based alias analysis
[22:30:38] <strcat> nano: LLVM defines NoAlias for 2 pointers as meaning a) neither points to the same thing or b) neither is used for writes
[22:30:59] <nano> i see
[22:31:05] <strcat> which happens to apply to every single & and &mut pointer to freezable (Const) things
[22:31:07] *** Joins: jgilbert (jgilbert@2557E599.66715431.D25A875A.IP)
[22:31:16] *** Joins: igl (igl@moz-5B2EA735.adsl.alicedsl.de)
[22:31:30] <strcat> which is everything in rust that doesn't contain @mut, std::cell:Cell, extra::rc::RcMut, or similar types
[22:31:38] <strcat> anyway, it's not implemented yet
[22:31:41] *** Quits: doomlord (doomlod@moz-3CF8202D.range81-159.btcentralplus.com) (Ping timeout)
[22:32:00] <strcat> nano: ~ parameters are already marked noalias but it's trickier because of non-Const things for &/&mut
[22:33:04] *** Quits: igl (igl@moz-5B2EA735.adsl.alicedsl.de) (Ping timeout)
[22:33:30] <nano> ty strcat
[22:33:43] *** Joins: igl (igl@moz-10D396AE.adsl.alicedsl.de)
[22:34:19] <strcat> brson: heh, I'm not sure why that pthread_atfork error happens :(
[22:35:00] <strcat> I guess librustrt needs to be given jemalloc's link flags
[22:35:04] *** Joins: quaddle (Mibbit@moz-E919BED1.dynamic.amis.net)
[22:35:20] <strcat> it's weird because I successfully compiled/tested/benchmarked it...
[22:35:25] *** Joins: Blub\w (wry@moz-A3283263.wireless.dyn.drei.com)
[22:36:14] *** Joins: igl1 (igl@moz-C9860CCA.adsl.alicedsl.de)
[22:36:32] *** Quits: igl (igl@moz-10D396AE.adsl.alicedsl.de) (Ping timeout)
[22:37:55] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Client exited)
[22:37:58] *** Quits: igl1 (igl@moz-C9860CCA.adsl.alicedsl.de) (Ping timeout)
[22:38:22] <xenocons> pcwalton: enjoyed the recent blog post, well done
[22:39:34] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[22:39:34] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/ZpwrNA
[22:39:34] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[22:40:22] <pcwalton> thanks, we'll see how it pans out :)
[22:42:06] <xenocons> it is an interesting one, i admit ~ vs @ has been a stumbling block for me a bit too
[22:42:28] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[22:42:28] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/K40v3A
[22:42:28] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[22:42:29] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[22:42:29] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/hxFXIg
[22:42:29] <ghrust> 13rust/06auto 1445441e0 15Philipp BrÃ¼schweiler: Add test for issue #6698
[22:42:29] <ghrust> 13rust/06auto 14394ac1a 15Philipp BrÃ¼schweiler: resolve: don't resolve paths that point to non-static methods...
[22:42:29] <ghrust> 13rust/06auto 1413aa188 15bors: auto merge of #6910 : Blei/rust/fix-6698, r=pcwalton...
[22:42:31] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[22:42:47] <lkuper> pcwalton: your blog post came right on the tail of my "you don't have to do manual memory management in Rust unless you want to!" claim...
[22:42:48] *** Joins: igl (igl@moz-285F62B1.adsl.alicedsl.de)
[22:42:57] <xenocons> especially around 'if i read a file using the library calls in io, how are the bytes returned'
[22:43:02] <xenocons> lkuper: got a link?
[22:43:09] * lkuper should maybe just refrain from claiming anything at all about Rust until 1.0.
[22:43:26] <lkuper> xenocons: it's this comment thread: http://pcwalton.github.io/blog/2013/05/20/safe-manual-memory-management/#comment-915756558
[22:43:30] <xenocons> lkuper: nothing wrong with blogging, even if stuff changes :)
[22:43:41] <xenocons> ah
[22:44:11] <xenocons> sams response is interesting actually
[22:44:38] *** Quits: igl (igl@moz-285F62B1.adsl.alicedsl.de) (Ping timeout)
[22:44:59] <lkuper> it is.  samth was exactly the person I was hoping to hear from on this, because "evolvable programming" is his stock-in-trade
[22:45:08] *** Joins: aatch (aatch@moz-B437F499.pocketrent.com)
[22:45:08] *** Joins: igl (igl@moz-2D1641AB.adsl.alicedsl.de)
[22:45:28] *** Quits: tjc (tjc@moz-E232F212.hfc.comcastbusiness.net) (Quit: zzzzzzzzzz)
[22:45:36] <pcwalton> I was kind of hoping that it would not hit HN or Reddit
[22:46:03] <pcwalton> because it was designed to be an RFC and I think those communities interpret it as "we are going to do that"
[22:46:07] <pcwalton> when it's just a proposal
[22:46:08] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[22:46:12] <lkuper> so I'm imagining a scenario where you can evolve programs from being Java-ish, where everything is @-allocated, to being more like C or C++ where you have very fine-grained control
[22:46:21] <pcwalton> right
[22:46:26] <lkuper> and to have a compilable, runnable, testable program the whole time
[22:46:27] <pcwalton> I think that that would be an interesting language
[22:46:34] <pcwalton> and worth pursuing
[22:46:37] <pcwalton> I don't think Rust is that language
[22:46:39] <lkuper> yeah, I dunno if that language is Rust
[22:46:50] <pcwalton> the libraries favor ~ and & a lot
[22:47:53] <aatch> pcwalton, from my perspective, I generally find myself thinking "how can I factor out these @-boxes?" whenever I start using them.
[22:48:05] <pcwalton> right, I think most Rust programmers do
[22:48:07] <pcwalton> certainly I do
[22:48:26] *** Joins: tjc (tjc@moz-E232F212.hfc.comcastbusiness.net)
[22:48:26] *** ChanServ sets mode: +o tjc
[22:48:49] *** Quits: cdidd (cdidd@moz-D9B11263.broadband.corbina.ru) (Ping timeout)
[22:49:14] <xenocons> heh
[22:49:42] *** Quits: nano (Mibbit@moz-972880B.superkabel.de) (Quit: http://www.mibbit.com ajax IRC Client)
[22:49:51] <xenocons> funny enough, im having a discussion about managed pointers vs native pointers and safety (for another language) on github, it makes me feel happy that so much thought is going into this in rust 
[22:50:11] *** Quits: tjc (tjc@moz-E232F212.hfc.comcastbusiness.net) (Ping timeout)
[22:50:22] <pcwalton> @ is usually a last resort, which I think is fine
[22:50:58] <doublec> xenocons: what language?
[22:50:59] <lkuper> it might help cut down on the HN freak-out if you titled it differently, like "What if we removed garbage collection from Rust?"
[22:50:59] *** Joins: novabyte (Instantbir@moz-B4C485A7.mullvad.net)
[22:51:09] <xenocons> doublec: F#
[22:51:13] <pcwalton> lkuper: yeah, that would have been better
[22:51:15] <doublec> ah ok
[22:51:23] <pcwalton> honestly it wasn't a freakout though, the response was quite positive
[22:51:35] <xenocons> im fighting a losing war it seems atm heh
[22:51:41] <pcwalton> I just didn't want other members of the community and core team to make it feel like I was trying to rally community support to ram my opinions through
[22:51:43] *** Quits: donri (dag@moz-9BB61102.tbcn.telia.com) (Client exited)
[22:51:51] <xenocons> i need to read more about what can be done at compiler time with pointer safety + verification
[22:52:22] *** Quits: Nisstyre (wes@moz-A4FF38E0.netflash.net) (Quit: Leaving)
[22:52:42] <doublec> xenocons: I wrote a little about what can be done in ATS in that area: http://bluishcoder.co.nz/2013/01/25/an-introduction-to-pointers-in-ats.html
[22:52:58] <bblum> brson: the other thing about "T:Unsized" is that it has the "pure" problem
[22:53:35] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Computer has gone to sleep.)
[22:53:45] <lkuper> pcwalton: yeah, the response was positive.  it's a good post
[22:54:00] <novabyte> can anyone point me to some example projects using rustpkg (even if they're unstable)?
[22:54:02] <xenocons> doublec: cool, i will read this, ty
[22:54:03] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[22:54:26] <aatch> novabyte, I don't think so. rustpkg isn't done yet
[22:54:46] <pcwalton> there was good conversation about borrow checking on the ATS mailing list
[22:54:50] <novabyte> I've had a look at the pull request for the rust-http-client and it's still not clear to me how to declaratively control a Rust build
[22:54:57] *** Quits: EXetoC (ex@moz-2DBEB1E4.customer.t3.se) (Quit: WeeChat 0.4.1)
[22:55:04] <pcwalton> it sounds like ATS and Rust can both express things that the other an't
[22:55:04] <pcwalton> can't
[22:55:08] *** Joins: EXetoC (ex@moz-2DBEB1E4.customer.t3.se)
[22:55:27] <doublec> pcwalton: yeah that was a good discussion
[22:55:34] <novabyte> aatch: yep, I know it's work-in-progress are there any examples of how it will work?
[22:55:36] <bjz> pnkfelix pnkfelix|rcirc: cheers for the reply, I'm working on putting together a response
[22:55:53] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[22:55:57] <aatch> novabyte, the tests for rustpkg itself?
[22:55:58] <pcwalton> AIUI ATS can reason about array indexes (since it's dependently typed) and Rust can't, but Rust can reason about field disjointness
[22:56:13] <novabyte> aatch: ah ok, didn't know there were any
[22:56:45] <aatch> novabyte, they actually might be examples, I'm not certain. But still, they're there
[22:56:59] <novabyte> thanks
[22:57:33] <doublec> pcwalton: yes, that's what I understood too. Or at least, some things rust does very elegeantly requires a fair bit of complex ATS code.
[22:59:07] *** Joins: tjc (tjc@moz-E232F212.hfc.comcastbusiness.net)
[22:59:07] *** ChanServ sets mode: +o tjc
[23:00:01] <pcwalton> ultimately it's just the classic specialized tool versus generic tool tradeoff
[23:00:40] <pcwalton> btw I think ATS2 is pretty awesome
[23:02:12] *** Quits: tjc (tjc@moz-E232F212.hfc.comcastbusiness.net) (Quit: zzzzzzzzzz)
[23:02:19] *** Quits: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[23:02:31] *** Quits: pnkfelix|rcirc (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: rcirc on GNU Emacs 24.2.1)
[23:03:04] *** Joins: Sorella (queen@B12A78F5.BA14766C.95C8B7C6.IP)
[23:03:15] <pnkfelix> bjz: "Sorry for the length of the reply; I didn't have time to write a shorter one."
[23:03:29] <bjz> pnkfelix: no worries
[23:03:36] *** Quits: EXetoC (ex@moz-2DBEB1E4.customer.t3.se) (Quit: WeeChat 0.4.1)
[23:05:04] <bjz> pnkfelix: and by the way my use of 'intuitive' made my skin crawl as soon as I posted it :)
[23:07:07] <pnkfelix> bjz: Well, if it makes you feel better, I find it intuitive too.  I think the important thing is to figure out whether "no tree structure in the middle of paths" is a hard constraint or not.
[23:08:10] *** Quits: brendan (brendaneic@2557E599.66715431.D25A875A.IP) (Quit: brendan)
[23:08:24] *** Quits: jensnock_ (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[23:09:12] <SingingBoyo> Is it possible to take something defined as pub fn foo(x:~str) -> int and get a ~fn(~str) -> int to store in a map?  or do I need to define the pub fn as a closure?
[23:09:51] <aatch> SingingBoyo, it should coerce
[23:10:12] *** Joins: arcterus (arcterus@moz-8B0B939D.mycingular.net)
[23:10:12] <aatch> it's possible that it won't coerce to ~fn however.
[23:10:25] <SingingBoyo> yeah:  non-scalar cast: `extern "Rust" fn(~[~str]) -> int` as `~fn(~[~str]) -> int`
[23:10:38] <aatch> You can't cast
[23:10:41] *** Joins: eschweic (Adium@43CB6079.66715431.D25A875A.IP)
[23:10:55] *** Joins: EXetoC (ex@moz-2DBEB1E4.customer.t3.se)
[23:11:02] <SingingBoyo> wait it should coerce?  that might be it
[23:11:41] <aatch> rusti: fn test(a:int) -> int { a } let x : ~fn(int) -> int = test; x(1)
[23:11:44] -rusti- 1
[23:11:44] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[23:11:54] <aatch> there you go
[23:11:54] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[23:12:29] <SingingBoyo> oh hmm I think it's cause I'm putting it in a map and it doesn't like figuring out the typing for that.  well, no type inference for this function I guess
[23:13:01] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[23:13:50] *** Joins: aruniiird (arun@84E199D6.DCDBCF8E.83D0DF30.IP)
[23:14:28] *** Joins: reyre_ (reyre@moz-9002CDDA.cpe.net.cable.rogers.com)
[23:15:42] *** Quits: jgilbert (jgilbert@2557E599.66715431.D25A875A.IP) (Input/output error)
[23:17:33] *** Joins: jgilbert (jgilbert@2557E599.66715431.D25A875A.IP)
[23:18:58] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Quit: Leaving.)
[23:19:17] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[23:19:47] <SingingBoyo> do the modes for os::make_dir actually do anything?
[23:20:04] *** Quits: aruniiird (arun@84E199D6.DCDBCF8E.83D0DF30.IP) (Ping timeout)
[23:20:13] *** Quits: arcterus (arcterus@moz-8B0B939D.mycingular.net) (Client exited)
[23:20:19] *** Joins: maik_ (maik@moz-13F840A5.dip0.t-ipconnect.de)
[23:20:26] *** Quits: maik_ (maik@moz-13F840A5.dip0.t-ipconnect.de) (Quit: Leaving)
[23:20:28] <strcat> I assume it sets the mode passed to mkdir
[23:20:37] *** Joins: MaikKlein (maik@moz-13F840A5.dip0.t-ipconnect.de)
[23:20:41] <xenocons> hm so ATS seems interesting
[23:20:47] <strcat> it should use a flag type to wrap it, if it doesn't right now
[23:20:47] <xenocons> doublec: ty for blog link
[23:20:57] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Ping timeout)
[23:22:12] <SingingBoyo> strcat:yeah it's just a straight c_int right now.
[23:23:20] <doublec> xenocons: np. I've written a fair bit of ats code - mostly for a bitcoin mining pool which has been in operation for a couple of years using it now.
[23:23:39] <xenocons> doublec: cool, have you done any stuff around zerocoin?
[23:24:09] <doublec> xenocons: no, but I've seen it mentioned a few times now.
[23:24:22] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[23:24:32] *** Joins: a_m0d (a_m0d@moz-9F925EFA.hm.shawcable.net)
[23:24:39] <xenocons> ah k
[23:24:41] <doublec> I'm keen to try writing one of the pool components in Rust to compare
[23:25:02] <xenocons> do it!
[23:25:20] <doublec> Other langauges I've tried tended to fall over due to runtime limitations in the libraries. It's been an interesting stress test.
[23:26:14] <doublec> ATS doesn't really have a strong concurrency answer
[23:26:39] <doublec> it's pthreads and/or a task switching library I wrote using ucontext and libevent.
[23:27:43] *** Quits: igl (igl@moz-2D1641AB.adsl.alicedsl.de) (Ping timeout)
[23:27:51] *** Joins: igl (igl@moz-8835A41C.adsl.alicedsl.de)
[23:28:08] *** Joins: wuwei`lab (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[23:28:49] <xenocons> interesting thing abouts ATS is the burden it places on the programmer to thread proofs through pointers
[23:28:49] *** wuwei`lab is now known as wuwei
[23:29:00] <xenocons> does that make things difficult?
[23:29:21] <xenocons> realise this might be a bit off topic, ill stop now :)
[23:29:40] <pcwalton> sully: http://buildbot.rust-lang.org/bors/bors.html
[23:31:15] *** Joins: igl1 (igl@moz-F25765AE.adsl.alicedsl.de)
[23:31:29] *** Quits: igl (igl@moz-8835A41C.adsl.alicedsl.de) (Ping timeout)
[23:31:33] *** Quits: paulproteus (quassel@rose.makesad.us) (Ping timeout)
[23:32:04] <strcat> xenocons: it's on-topic enough that it seems fine to talk about
[23:32:19] <strcat> looking at how other languages provide memory safety is useful
[23:32:22] <doublec> xenocons: in short, yes it does. Code is more verbose.
[23:32:39] <doublec> xenocons: and it prevents chaining of function calls. You often have to do things on individual lines.
[23:32:49] <SingingBoyo> are owned pointers to traits not coerced to borrowed pointers?
[23:33:18] <strcat> ~Trait isn't really an ~ to a trait
[23:33:43] <strcat> it's actually 2 pointers
[23:33:59] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[23:34:01] <xenocons> right, im interested in the balance of providing pointer 'safety' and burden on programmer
[23:34:16] <doublec> xenocons: see for example this code: https://ezcrypt.it/1y6n#M5oZjsz1vemFcEsOQ7ySVRtV
[23:34:41] <doublec> xenocons: there the get_left and get_right must can't be embedded on the 'compare' call because we need to extract the proofs
[23:34:46] *** Quits: carter (carter@moz-BDFE46F6.nyc.biz.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[23:34:53] <xenocons> ah, thats a bit irritating
[23:34:53] <doublec> xenocons: so compare(get_left(t), get_right(t)) isn't possible
[23:34:59] <xenocons> right
[23:35:01] <strcat> pcwalton: LLVM generates really beautiful code for the iterator adaptors btw, I hadn't looked into chaining a bunch before
[23:35:04] <xenocons> btw i like the SML smell to this language, heh
[23:35:10] <strcat> pcwalton: it happily collapses a dozen chained ones to a loop
[23:35:35] <strcat> so... I doubt they'd ever be slower than internal ones
[23:35:43] <doublec> xenocons: on the other hand the proofs let you do lots of interesting safety things. For example, this walkthrough of defining an interface to a C api from least safe to more safe:
[23:35:43] <xenocons> sidetopic: ive got 157 unread rust mailing list emails, but... hows the IO rewrite going?
[23:35:47] <doublec> xenocons: http://bluishcoder.co.nz/2012/08/30/safer-handling-of-c-memory-in-ats.html
[23:35:54] *** Joins: Sodel_the_V (user@moz-853663E1.va.shawcable.net)
[23:36:07] <xenocons> doublec: let me read that
[23:36:18] *** Joins: aruniiird (arun@moz-3DB73AA5.azulsystems.com)
[23:36:27] <strcat> println on the other hand spits out 20000 lines of IR :(
[23:36:39] <\n> does rust not have pre and post decrement operators?
[23:36:49] <strcat> \n: just += and -=
[23:36:49] *** Joins: paulproteus (quassel@moz-E86A3B42.makesad.us)
[23:37:10] <strcat> and 'a = x' doesn't evaluate to x as an expression
[23:38:20] *** Joins: igl (igl@moz-3CB41F01.adsl.alicedsl.de)
[23:38:56] *** Quits: igl1 (igl@moz-F25765AE.adsl.alicedsl.de) (Ping timeout)
[23:40:10] *** Quits: igl (igl@moz-3CB41F01.adsl.alicedsl.de) (Ping timeout)
[23:40:34] <MaikKlein> is it intended that I can't use "use" in an impl block? like impl Test { use lmath::vec::*; ... }
[23:40:40] *** Joins: igl (igl@moz-60CB4266.adsl.alicedsl.de)
[23:40:56] <SingingBoyo> ooh boy managed a segfault.  I just have so much 'luck' with these
[23:41:38] <pcwalton> MaikKlein: it's not implemented
[23:42:17] *** Quits: annodomini (lambda@moz-6424FBF8.hfc.comcastbusiness.net) (Quit: annodomini)
[23:42:19] *** Joins: igl1 (igl@moz-6FBE2AEE.adsl.alicedsl.de)
[23:42:28] *** Quits: igl (igl@moz-60CB4266.adsl.alicedsl.de) (Ping timeout)
[23:42:30] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[23:42:30] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/hxFXIg
[23:42:30] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[23:42:35] <xenocons> doublec: okay, i got the gist of it, a proof seems a lot like a constraint, which is great for a lot of conditions (even at the cost of a burden to programmer) but its important to realise that it is 'safer' (as you said) not 'safe' heh
[23:43:15] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[23:43:28] <xenocons> kinda a null argument on my side (no pun intended)
[23:43:33] <pcwalton> strcat: it would be helpful to start filing bugs if you see rust generating horrible IR compared to clang
[23:43:45] <pcwalton> in theory with the Datum stuff we should have a framework for generating good IR
[23:43:51] <strcat> pcwalton: well it's pre-optimization when it's horrible :)
[23:43:55] <pcwalton> of course
[23:43:59] <pcwalton> but I want to improve compile speeds
[23:44:07] <pcwalton> if clang is generating better IR at -O0 then we should try to match them
[23:44:10] *** Quits: igl1 (igl@moz-6FBE2AEE.adsl.alicedsl.de) (Ping timeout)
[23:44:15] *** Joins: igl (igl@moz-4665B49D.adsl.alicedsl.de)
[23:44:24] <doublec> xenocons: right, that's a good summary
[23:44:24] <pcwalton> btw I had an idea to maybe make rustc special-case range() and each() and just generate the loop
[23:44:37] <pcwalton> which is horrible but it might be a large win
[23:44:49] <pcwalton> we need to look at where anonymous closures are created
[23:44:50] <strcat> pcwalton: I'm impressed that LLVM can do http://ix.io/5Wx -> http://ix.io/5XS
[23:45:00] <strcat> I'm sure it takes a lot of time ;p
[23:45:12] <pcwalton> I really want to fix our compile speeds
[23:45:33] *** Joins: steven_is_false (user@moz-144077DE.bchsia.telus.net)
[23:45:44] <strcat> pcwalton: we also generate invalid IR, aatch added -Z llvm-lint
[23:45:49] <pcwalton> uh-oh
[23:45:50] <strcat> and it reports undefined behaviour in IR
[23:45:54] <strcat> which we have a lot of.
[23:45:56] <strcat> from glue
[23:46:17] <pcwalton> speaking of glue, we generate take glue for noncopyable types :)
[23:46:31] <brson> strcat: that optimization you posted is impressive
[23:48:23] <aatch> I'm worried that I can recognise sections where specific optimizations did work.
[23:49:41] *** Joins: lmandel (lmandel@FE1F74.86ED00A7.971E19F6.IP)
[23:49:48] <mflamer> sorry to interrupt, what is an "anonymous lifetime"? I get the general life time idea of owned pointers, but not sure if I'm supposed to declare lifetime explicitly somehow?
[23:50:42] <bstrie> mflamer: it's not always necessary to name lifetimes, so an anonymous lifetime is just any time that you use a & without explicitly naming the lifetime
[23:50:55] <bstrie> at least, I think so
[23:51:20] <strcat> you only need explicit names on fn signatures
[23:51:24] <strcat> 99% of the time at least
[23:52:00] *** Joins: unbracketed (textual@moz-7F0EE151.lsanca.fios.verizon.net)
[23:52:15] *** Joins: JesseH (JesseH@moz-2E766C3E.mc.at.cox.net)
[23:52:25] *** Quits: unbracketed (textual@moz-7F0EE151.lsanca.fios.verizon.net) (Quit: Computer has gone to sleep.)
[23:52:32] <JesseH> Is there curses bindings for rust?
[23:52:39] *** Quits: igl (igl@moz-4665B49D.adsl.alicedsl.de) (Ping timeout)
[23:53:03] <steven_is_false> JesseH: Someone was working on something they called amulet I think.
[23:53:04] <strcat> pcwalton: well I guess I'll report a bug for util::swap, that's a good place to start
[23:53:07] <strcat> that IR is horrible
[23:53:10] *** Quits: tcsc (tcsc@moz-ADC0ED45.hsd1.ct.comcast.net) (Quit: computer sleeping)
[23:53:42] <JesseH> I found this https://github.com/drhodes/rust-ncurses 
[23:53:46] <JesseH> Anyone here used it before?
[23:54:02] <aatch> strcat, that'd be nice. I wouldn't mind working on that problem some more, but I don't really know where to start.
[23:54:37] *** Quits: lkuper (lkuper@moz-D862222C.dhcp-bl.indiana.edu) (Ping timeout)
[23:54:45] *** Joins: igl (igl@moz-FE397357.adsl.alicedsl.de)
[23:54:54] <bstrie> JesseH: several people have tried to wrap curses with no luck, it's apparently a beast\
[23:55:01] *** Quits: seth (seth@2557E599.66715431.D25A875A.IP) (Input/output error)
[23:55:08] <bstrie> I think we have bindings to something else though... forget exactly what
[23:55:20] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[23:55:26] <JesseH> Ill look around :P
[23:55:59] <strcat> pcwalton: any idea what the static_allocas: thing is?
[23:56:03] <strcat> it's not in the clang IR
[23:56:24] <pcwalton> I think that's for the locals in the function?
[23:58:21] <aatch> strcat, every llvm fn needs an entry block, for some reason rustc seems to think that all the arguments need allocas
[23:58:28] <aatch> which I'm not sure is true...
[23:58:41] <strcat> ah
[23:58:49] <pcwalton> it was done that way for simplicity
[23:58:55] <pcwalton> but we could get rid of the arg allocas in many cases
[23:58:58] <pcwalton> although I think for debug info
[23:59:00] <pcwalton> we may want them...
[23:59:11] <aatch> but in the clang output, you'll see an "entry" block.
[23:59:24] <pcwalton> in general sabre told us not to use LLVM ValueRefs for anything which might need a name in debug mode
[23:59:29] <pcwalton> use allocas instead
[23:59:45] <strcat> aatch: clang doesn't put one
