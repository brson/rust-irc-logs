[00:00:21] <SiegeLord> Bitwise ops ruin everything ;)
[00:00:37] <tjc> we wouldn't have all these problems if we had Unicode ops
[00:01:10] <bblum> ï¼†ï¼†
[00:01:33] *** Quits: BitPuffin (quassel@moz-49828767.cust.tele2.se) (Ping timeout)
[00:01:44] <toddaaro> &
[00:01:49] <toddaaro> are yours unicode?
[00:01:58] <toddaaro> they appear fancier
[00:02:04] <sp3d> last I heard the convention was to use &(&x))
[00:02:04] *** Quits: doomlord_ (servitor@moz-13E69BC8.range86-180.btcentralplus.com) (Connection reset by peer)
[00:02:42] <engla> toddaaro: fullwidth variants
[00:03:41] <ChrisMorgan> And instead of "&&" for and, you could have reserved the keyword "and".
[00:04:04] <bblum> we're trying to look like c++ though
[00:04:08] <acrichto> ChrisMorgan: noooo (although that's just my opinion)
[00:04:26] <bblum> we could go the full sml route and use 'andalso'
[00:04:30] <ChrisMorgan> That would simplify ||, too; it would be unambiguously a closure with no arguments, rather than "probably or"
[00:04:33] <toddaaro> engla: ahh
[00:04:37] <SiegeLord> I'd say ditch bitwise & and use & for boolean
[00:04:44] <tjc> let's not use "andalso"
[00:04:46] <bblum> SiegeLord: um... what would bitwise be
[00:04:48] <bblum> tjc: ;)
[00:04:49] <tjc> that's, like, the worst thing about SML
[00:04:54] <bblum> andalso is pretty stupid
[00:04:56] <SiegeLord> bblum: bitor()
[00:05:02] <acrichto> bblum: orelse!
[00:05:03] <SiegeLord> *bitand
[00:05:20] <tjc> first time I ever saw that I asked my undergrad advisor "do people really use boolean-and so much less often than mutually recursive functions?"
[00:05:22] <tjc> he said "yes"
[00:05:42] <ecr> a mere operator is too simpl
[00:05:52] <ecr> let's use some crazy monoid machinery
[00:06:25] *** Joins: alisdair (textual@moz-EA60A466.dedicated.allstream.net)
[00:06:33] <ecr> Any true <> Any false == Any true
[00:06:42] <ecr> All true <> All false == All false
[00:06:55] *** Joins: DeokjinKim (Mibbit@B4104EBB.3CC170B1.1E14B209.IP)
[00:07:22] <sp3d> bblum: C++ *has* "and", as of some version :P
[00:07:29] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[00:09:01] * ChrisMorgan wouldn't expect Rust to go with other than && and ||, given its overall styleâ€”but it is unfortunate that || in particular can then at first glance be used as a unary operator
[00:09:33] *** Quits: ecr (Thunderbir@moz-BBE3ABD.mv.mozilla.com) (Quit: ecr)
[00:11:09] *** Quits: mschifer (Adium@moz-BBE3ABD.mv.mozilla.com) (Quit: Leaving.)
[00:13:33] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: Places to go, people to annoy)
[00:15:07] *** Joins: dbaupp (Thunderbir@moz-712A1135.lns20.syd6.internode.on.net)
[00:15:18] *** Quits: sp3d (a@moz-49806493.dhcp.stls.mo.charter.com) (Ping timeout)
[00:20:34] *** Joins: MaikKlein1 (maik@moz-4C6F98CE.dip0.t-ipconnect.de)
[00:23:04] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[00:23:07] *** Quits: MaikKlein1 (maik@moz-4C6F98CE.dip0.t-ipconnect.de) (Ping timeout)
[00:26:51] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[00:27:17] *** Joins: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP)
[00:28:32] *** Quits: Houm (Houm@moz-25669AA8.fbx.proxad.net) (Quit: No Ping reply in 180 seconds.)
[00:30:12] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[00:30:12] *** ChanServ sets mode: +o dherman
[00:33:00] *** Joins: samx (sami@moz-48EC0983.dyn.optonline.net)
[00:33:29] *** Quits: fabiand (fabiand@moz-FCBBAF15.adsl.alicedsl.de) (Quit: Verlassend)
[00:33:49] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[00:35:00] *** Quits: samx (sami@moz-48EC0983.dyn.optonline.net) (Quit: This computer has gone to sleep)
[00:35:18] *** ozten is now known as ozten|walkthedog
[00:35:23] *** Quits: ozten|walkthedog (ozten@moz-DD3B00B4.hsd1.wa.comcast.net) (Quit: ozten|walkthedog)
[00:38:11] *** Quits: vk (vk@858480B7.B568D26C.93B001FA.IP) (Quit: vk)
[00:38:20] <graydon> heading out, night folks
[00:38:25] <pcwalton> graydon: g'night!
[00:38:25] *** Quits: graydon (Adium@A5087023.2354C43D.D8E68FF6.IP) (Quit: Leaving.)
[00:40:14] *** Joins: jfbk (textual@moz-EEA9CFB3.nyc.res.rr.com)
[00:45:13] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[00:47:05] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[00:47:33] *** Quits: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP) (Quit: Leaving.)
[00:48:06] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[00:48:43] *** Quits: bnicholson (bnicholson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[00:48:46] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Quit: Leaving.)
[00:50:46] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Ping timeout)
[00:51:23] *** Joins: sp3d (a@moz-49806493.dhcp.stls.mo.charter.com)
[00:51:31] *** Quits: alisdair (textual@moz-EA60A466.dedicated.allstream.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[00:54:48] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[00:55:39] *** Joins: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP)
[00:55:39] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/4SLJ7w
[00:55:39] *** Parts: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP) ()
[00:55:51] *** Quits: dbaupp (Thunderbir@moz-712A1135.lns20.syd6.internode.on.net) (Quit: dbaupp)
[00:56:03] <ChrisMorgan> How would I speak of a statement `use X;`? As using X? (Seems rather generic, could refer to having code that utilises it rather than just a `use` statement.) As importing X? (Sounds better, but not the terminology used in the statement itself.) Something else?
[00:58:32] *** Joins: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP)
[00:58:32] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/LAwA1Q
[00:58:32] *** Parts: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP) ()
[00:58:34] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[00:58:34] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/aXmqNg
[00:58:34] <ghrust> 13rust/06auto 14bfbd822 15Alex Crichton: Make all lang_items optional...
[00:58:34] <ghrust> 13rust/06auto 14cbb8fae 15bors: auto merge of #7828 : alexcrichton/rust/lang-opt, r=graydon...
[00:58:35] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[00:59:04] *** Joins: dbaupp (Thunderbir@moz-712A1135.lns20.syd6.internode.on.net)
[01:06:07] <aatch> ChrisMorgan, in the Rust parser, those constructs are called "view items" if that helps
[01:06:19] <aatch> (which includes extern mod)
[01:06:36] <ChrisMorgan> aatch: I'm talking about regular documentation and in conversation.
[01:07:15] <aatch> ChrisMorgan, then "import" is probably fine, since you can lump both 'use' and 'extern mod' under that
[01:07:17] <ChrisMorgan> Say, for example, I have a secondary trait which needs to be ___[e]d so that the methods it exposes are in scope.
[01:07:38] *** Joins: bnicholson (bnicholson@moz-E98974C1.hsd1.ca.comcast.net)
[01:07:39] <engla> the manual says 'use declaration'
[01:07:39] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[01:07:39] <ghrust> 01[13rust01] 15bors pushed 1 new commit to 06auto: 02http://git.io/G2xRmw
[01:07:39] <ghrust> 13rust/06auto 144bfb230 15bors: auto merge of #7829 : graydon/rust/codegen-compiletests, r=thestinger...
[01:07:39] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[01:07:47] *** Quits: Archer (Archer@moz-B3C4C551.bb.online.no) (Quit: Leaving)
[01:08:19] <engla> but has no verb
[01:08:43] <aatch> I'd say "import" is fine.
[01:11:09] *** Joins: dew (Instantbir@moz-2C6F2E2.dhcp.stls.mo.charter.com)
[01:11:55] *** Quits: slaren (slaren@moz-254A8D7B.red-79-153-227.dynamicip.rima-tde.net) (Ping timeout)
[01:17:28] *** Joins: doomlord_ (servitor@moz-13E69BC8.range86-180.btcentralplus.com)
[01:17:44] *** Joins: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP)
[01:17:58] <tikue> which option method is best for doing one thing with x in some(x) and another thing when None
[01:18:10] <tikue> s/when/if
[01:18:17] <tikue> s/in/if
[01:18:19] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[01:18:28] <sp3d> match, presumably
[01:18:44] *** Joins: slaren (slaren@moz-89461CF2.red-83-38-70.dynamicip.rima-tde.net)
[01:18:51] <tikue> sp3d: true. I always forget that match is sometimes better than any option method...
[01:19:22] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[01:19:22] *** ChanServ sets mode: +o dherman
[01:20:39] *** Quits: eschweic1 (Adium@moz-BBE3ABD.mv.mozilla.com) (Quit: Leaving.)
[01:21:20] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[01:21:51] <engla> match is so nice to read. I almost want   match predicate { true => ... false => .. }
[01:22:06] <pcwalton> engla: ocaml says "warning, bad style" if you do that :)
[01:22:36] <tikue> engla: with options I think there's _almost_ always a better alternative to match
[01:22:49] <pcwalton> in Scala they don't match on options much
[01:22:54] <engla> not sure
[01:22:58] <pcwalton> it's considered good style to not match on option
[01:23:02] <tikue> engla: esp. when it's like match option { some(stuff) => do stuff with stuff, none => do nothing, }
[01:23:03] <pcwalton> in ML you usually do
[01:23:06] <doomlord_> is that because they interface with legacy java libraries
[01:23:10] <pcwalton> match on option
[01:23:14] <pcwalton> nah, I think it's just the culture
[01:23:50] *** Quits: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP) (Ping timeout)
[01:23:58] <dbaupp> aatch: bstrie was asking why https://github.com/mozilla/rust/pull/7644 had failed?
[01:23:58] *** Quits: bytewise (bytewise@moz-649C630D.unitymediagroup.de) (Quit: Leaving)
[01:24:05] <engla> tikue: yeah. Still some methods missing on option, and some were recently fixed (.map() fixed with lifetime)
[01:24:28] <aatch> dbaupp, no idea
[01:24:29] <tikue> engla: I find myself using for option.iter().advance a ton
[01:24:35] <aatch> dbaupp, thats the problem
[01:24:47] <dbaupp> aatch: heh, ok. (I couldn't remember the issues at all.)
[01:24:54] <dbaupp> (also, :( )
[01:25:11] <engla> tikue: I don't like how it looks. But with for loop reform that one will be closure free so that's nice
[01:25:35] <tikue> engla: we still don't know how it will look though, right
[01:25:54] <engla> right
[01:25:59] <dbaupp> tikue: something like `for option |x| { .. }` or `for x in option { .. }`
[01:26:07] <dbaupp> (or something else)
[01:26:08] <aatch> engla, tikue, potentially it would look like `for option |x| { ... }`
[01:26:08] <tikue> +1 for the latter :)
[01:26:28] <engla> It can't look like a closure if it's not
[01:27:07] <tikue> it seems right now there's two fairly evenly split camps on the issue
[01:27:18] <engla> anyway, what it looks like is potentially separate from how it works
[01:27:26] <tikue> true
[01:27:27] <engla> and how it works changes first
[01:27:33] <tikue> engla: it already changed, no?
[01:27:40] <engla> no
[01:27:56] <doomlord_> https://github.com/crabtw/rust-bindgen << is this guy "the maintainer" of rust-bindgen
[01:28:01] <tikue> for option.iter().advance |x| { } <==> for x in option { }
[01:28:16] <tikue> presumably?
[01:28:27] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Quit: pcwalton)
[01:28:44] <dbaupp> tikue: yes
[01:29:01] <tikue> dbaupp: cool
[01:29:56] <eevee> interface/terminal.rs:105:31: 105:90 error: cannot pack type `~entity::AttackAction`, which does not fulfill `Send`, as a trait bounded by Send
[01:29:59] <eevee> interface/terminal.rs:105                         return ~AttackAction{ actor: player, target: creature } as ~Action;
[01:30:08] <eevee> can i tell rust i don't give a crap whether Action is sendable
[01:30:44] <aatch> eevee, ~Action:()
[01:30:54] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[01:30:54] *** ChanServ sets mode: +o pcwalton
[01:32:16] *** Joins: steven_is_false (user@94DAA07D.489858D2.8BF36650.IP)
[01:32:43] <steven_is_false> Hello.
[01:32:51] <eevee> aatch: that seems to be a syntax error pretty much anywhere
[01:32:51] *** Joins: MaikKlein1 (maik@moz-4C6F98CE.dip0.t-ipconnect.de)
[01:33:46] * ChrisMorgan drastically prefers `for x in option { ... }` to `for option |x| { ... }`, assuming that it *isn't* a closure. Otherwise it'd be very confusing.
[01:34:24] <tikue> ChrisMorgan: I mean, it still closes over variables -- it just has extra syntax, like break
[01:34:54] <tikue> ChrisMorgan: but it would work exactly as a closure would work barring that, if I understand it correctly
[01:35:13] * tikue still prefers `for x in option { â€¦ }` because it's prettier
[01:35:26] <engla> no, closures require you to think about captures
[01:35:58] *** Parts: steven_is_false (user@94DAA07D.489858D2.8BF36650.IP) (ERC Version 5.3 (IRC client for Emacs))
[01:36:12] <tikue> engla: that's a good point
[01:38:15] <dbaupp> bblum: what's the cause of eevee's error above?
[01:38:33] <eevee> (AttackAction contains some @muts)
[01:38:46] <dbaupp> (and, ~Trait be bounded to be not implicitly ~Trait:Send?)
[01:39:09] <eevee> (also isn't it called Owned now)
[01:39:21] <aatch> eevee, no, it was Owned, now Send
[01:39:50] <bblum> ~Trait is equivalent to ~Trait:Send
[01:39:55] <bblum> eevee: you can write ~Trait:'static
[01:40:19] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[01:40:22] <dbaupp> aatch: there's been a pile of rumblings about fmt! etc... we should really finish that rewrite ;P
[01:40:25] <bblum> if there are borrowed pointers in there, i'm not sure if it will work 
[01:40:32] <bblum> but if there is a @ ptr it should be fine
[01:40:45] <aatch> dbaupp, I know...
[01:42:16] <eevee> this is getting super ugly but that does work, thanks  :)
[01:42:28] <eevee> this code almost compiles for the first time since 0.5
[01:43:26] <mark_edward> why doesn't this work: https://gist.github.com/MarkJr94/6016988
[01:43:46] <mark_edward> i get error, type of valaue must be known in contexxt at the closure
[01:45:05] *** Joins: sankha93 (Instantbir@E735FC94.D56F0A4C.E7DAB6F9.IP)
[01:45:24] <dbaupp> mark_edward: closure's can't be generic independently of any type params in scope
[01:45:28] <dbaupp> *closures
[01:45:30] <dbaupp> (I think.)
[01:45:40] <mark_edward> dbaupp: ...
[01:45:42] *** Quits: azakai (alon@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[01:45:45] <mark_edward> what does that mean?
[01:45:46] <dbaupp> mark_edward: ?
[01:46:04] <tikue> it cant infer the type
[01:46:12] <dbaupp> mark_edward: oh, well, a generic function is one like fn foo<A>(a: A) {}
[01:46:12] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[01:46:29] <mark_edward> can we make generic closures?
[01:46:46] <dbaupp> mark_edward: yeah, using a proper normal `fn`, except then it's not a closure
[01:47:03] *** Quits: Uther (Instantbir@moz-1B244B05.hfc.dyn.abo.bbox.fr) (Ping timeout)
[01:47:12] <dbaupp> mark_edward: (you can make a closure that calls this fn with the appropriate arguments though, and this should get inferred properly, maybe.
[01:47:13] <dbaupp> )
[01:47:19] <mark_edward> can you declare `fn`s inside of other `fn`s
[01:47:22] * dbaupp doesn't really know
[01:47:23] <dbaupp> mark_edward: yes
[01:47:44] <dbaupp> mark_edward: you can even declare structs and traits and impls inside `fn`s.
[01:47:56] <tikue> dbaupp: whoa
[01:47:56] <mark_edward> cool!
[01:48:01] <tikue> dbaupp: why did i not know that?!
[01:48:04] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[01:48:13] <dbaupp> tikue: magic? :P
[01:48:43] <tikue> dbaupp: can you declare structs inside structs
[01:48:45] <Luqman> you can put pretty much everything inside a function body
[01:48:49] <dbaupp> tikue: nope
[01:49:46] <dbaupp> Luqman: I think that (inside a fn body) trying to `use` something from a `mod` (also in that body) doesn't work
[01:49:55] <dbaupp> Luqman: and #[deriving] doesn't work
[01:50:08] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[01:50:09] <dbaupp> (those are the only restrictions I know of.)
[01:50:10] <Luqman> dbaupp: hence the "pretty much" :P
[01:50:10] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Quit: Leaving)
[01:50:24] <dbaupp> yeah, and at least one of them is a bug
[01:50:30] <tikue> Luqman: pretty much was pretty much correct :P
[01:50:35] *** Joins: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP)
[01:50:36] <tikue> dbaupp: which? deriving?
[01:50:50] <tikue> dbaupp: I think you should be able to do deriving and use both inside functions
[01:50:54] *** Quits: MaikKlein1 (maik@moz-4C6F98CE.dip0.t-ipconnect.de) (Ping timeout)
[01:51:12] <dbaupp> tikue: yeah, the deriving one is definitely a bug, the use one is possibly not, because of how name resolution in Rust works
[01:51:15] <tikue> use because less namespace pollution and deriving because, well, if you can define structs in fns...
[01:51:20] * dbaupp doesn't know
[01:51:44] <tikue> mm, use should be allowed in fn's IMO
[01:51:47] <tikue> if possible
[01:52:05] <dbaupp> tikue: it is allowed
[01:52:28] <dbaupp> e.g. fn foo() { use std::num; } works fine
[01:52:41] <dbaupp> but fn foo() { use some_mod; mod some_mod {} } doesn't
[01:52:45] <tikue> dbaupp: ah ok, cool! all these little things I never knew after having worked on rust for upwards of 2 months heh
[01:52:50] <dbaupp> although, it might just need a self::
[01:52:51] <tikue> s/on/with
[01:52:52] * dbaupp tries
[01:53:10] <tikue> gotcha
[01:54:05] <Luqman> tikue: i always forget you can name the arms in a match with @
[01:54:21] <tikue> Luqman: I just found that out today lol
[01:54:31] <tikue> Luqman: I still don't understand how/when to use it
[01:54:48] *** Joins: samx (sami@moz-48EC0983.dyn.optonline.net)
[01:54:49] <tikue> Luqman: oh wait, I actually knew it before but forgot. is it like...
[01:55:06] <Luqman> i've used it when i wanted to destructure something but also be able to refer to the whole thing
[01:55:24] <tikue> match 5 { 5 @ i => println!("i is %d", i), _ => {} }
[01:55:36] <dbaupp> ok, `fn foo() { use self::some_mod; mod some_mod {} }` doesn't work
[01:55:51] <Luqman> tikue: i @ 5
[01:55:52] <dbaupp> tikue: other way around
[01:55:56] <tikue> Luqman: it also is subjectively nicer than match 5 { i if i == 5 => {} _ => {} }
[01:56:07] <tikue> ah kk
[01:56:25] <tikue> so like
[01:56:42] <tikue> match Some(5) { Some(5) @ my_some => {}, None => {} }
[01:56:48] <tikue> oh wait did it wrong again
[01:57:03] <tikue> match Some(5) { my_some @ Some(5) => {}, my_none @ None => {} }
[01:57:19] * tikue thinks it should use a different sigil
[01:58:11] <tikue> match @Some(5) { my_some @ @Some(5) => { /* this looks horrible */ }, _ => {} }
[01:58:40] <dbaupp> tikue: yeah, there's been discussion about it before
[02:02:32] *** Joins: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com)
[02:07:34] <pcwalton> if we nuke @ then the problem solves itself
[02:07:35] *** kimundi is now known as zz_kimundi
[02:07:37] <pcwalton> for gc pointers
[02:08:58] <dbaupp> pcwalton: would there be some sugar for matching on pointers like that?
[02:09:22] <dbaupp> (or would it just be patterns like &x, and you can borrow the pointer?)
[02:11:39] <pcwalton> dbaupp: undecided
[02:11:43] *** Joins: alisdair (textual@moz-EBE9F394.bchsia.telus.net)
[02:11:44] <pcwalton> possibly Gc(&x)
[02:12:21] *** Quits: alisdair (textual@moz-EBE9F394.bchsia.telus.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[02:12:30] *** Joins: alisdair (textual@moz-EBE9F394.bchsia.telus.net)
[02:17:56] <tikue> on a related note, if we rust can reserve Gc it should deservedly be able to reserve `and` and `or`
[02:18:06] <tikue> s/we/rust
[02:18:38] *** Quits: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca) (Ping timeout)
[02:19:26] *** Joins: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca)
[02:19:40] *** Quits: Nisstyre (wes@moz-FD86289.netflash.net) (Quit: Leaving)
[02:21:54] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[02:23:35] *** Joins: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP)
[02:23:41] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[02:24:57] *** Quits: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP) (Quit: Leaving.)
[02:25:23] *** Quits: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP) (Quit: Konversation terminated!)
[02:25:32] *** Joins: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP)
[02:25:59] *** Quits: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP) (Quit: Konversation terminated!)
[02:26:05] *** Joins: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP)
[02:28:31] <dbaupp> tikue: "reserve" Gc?
[02:28:51] <dbaupp> tikue: (I don't think the plan is for `Gc` to be a keyword.)
[02:28:53] <tikue> dbaupp: oh, right. It wouldn't be. nvm :)
[02:29:02] *** Quits: jgilbert (jgilbert@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[02:32:26] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[02:32:28] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[02:32:42] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[02:33:09] *** Joins: zslayton (Mibbit@moz-14AA87A9.nyc.res.rr.com)
[02:35:15] *** Joins: ross (ross@moz-8A84103E.br.br.cox.net)
[02:39:45] *** Joins: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net)
[02:40:06] <engla> any ident in the prelude is taking up the namespace. Not reserved, but still to be avoided in most programs
[02:41:12] <doomlord> i just tried to start reading template parameters in my bindgen fork... bad idea at 3:40am. 
[02:41:42] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[02:43:03] <doomlord> i dont want to read template declarations, but rather allow a pre-determinated substitution of rust equivalents. (eg turn C++ std::vector<T> foo;  into rust libcpp::vector<T> foo..
[02:43:10] <doomlord> but not now. sleep.
[02:45:09] *** Quits: doomlord (doomlod@moz-13E69BC8.range86-180.btcentralplus.com) (Ping timeout)
[02:46:39] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[02:47:18] *** Joins: MaikKlein1 (maik@moz-4C6F98CE.dip0.t-ipconnect.de)
[02:47:29] *** Quits: zz_kimundi (kimundi@moz-D9C2E0F6.dip0.t-ipconnect.de) (Ping timeout)
[02:47:35] <pcwalton> strcat: vector exchange malloc fn is gone now?
[02:47:44] <strcat> pcwalton: yep, headers are gone on them
[02:47:46] <pcwalton> ok
[02:48:02] <strcat> and strings used that too
[02:48:29] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[02:48:38] <strcat> there's still the allocator for ~fn but.. it could be taught to just ask for extra space and initialize tydesc itself
[02:48:39] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[02:50:27] <jensnockert> I should never mail early in the morning.
[02:50:29] *** Joins: zz_kimundi (kimundi@moz-BF6F2565.dip0.t-ipconnect.de)
[02:50:55] *** zz_kimundi is now known as kimundi
[02:51:05] * jensnockert fails again with mailing in the morning.
[02:51:36] * jensnockert should just give up on mailing, and demand that all mailing lists switch to snailmail.
[02:51:58] <jensnockert> At least I know then how many I am mailing.
[02:53:49] <dbaupp> strcat: I saw you said that the if [true,false] { .. } elimination shouldn't use the ast... what should it use?
[02:54:00] <tedh> hi strcat, i am seeing a small perf regression with your vector header removal in a program that spawns lots of tasks and sends 64k buffers between them, does that make any sense to you?  I thought it would be a strict improvement
[02:54:29] * jensnockert hugs bjz: Sorry for not mailing properly :(
[02:54:36] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Client exited)
[02:54:54] <strcat> tedh: it does mean the minimum vector allocation size is smaller
[02:55:00] <strcat> so it will be in a smaller allocator size class
[02:55:05] <dbaupp> jensnockert: send your mail by typing it directly to the server via telnet, that'd solve it too.
[02:55:08] *** Joins: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP)
[02:55:22] <dbaupp> jensnockert: (also, your hugs scared him off :( )
[02:55:29] <jensnockert> :(
[02:55:34] * jensnockert cries.
[02:55:37] <strcat> tedh: so it means there might be a realloc where there wasn't before
[02:55:39] * jensnockert isn't really.
[02:55:42] <strcat> but overall it's a strict improvement
[02:55:51] * dbaupp hugs jensnockert
[02:55:58] * jensnockert squees.
[02:56:00] <strcat> you could get better than the old behaviour by reserving the same amount as it did before (since more will be usable)
[02:56:21] <dbaupp> tedh: are you allocating them with vec::with_capacity?
[02:56:26] <pcwalton> strcat: we can also just nuke ~fn
[02:56:32] <pcwalton> by making the Thunk trait
[02:56:41] <tedh> dbaupp: yes
[02:57:24] <strcat> pcwalton: it'd be nice to remove headers from stack closures, although I think they get optimized out most of the time
[02:57:38] <pcwalton> yeah, but for codegen cleanliness reasons
[02:57:43] <pcwalton> especially until iter reform is done
[02:58:21] <strcat> they use the tydesc and that's the 2nd field so it's a bit annoying to remove all but that
[02:58:21] <dbaupp> is there a reasonable roadmap/idea of how to actually implement the `for` changes?
[02:58:49] <strcat> dbaupp: depends on whether we're going to change the syntax
[02:58:50] <pcwalton> dbaupp: I think we need a temporary "foreach" keyword :(
[02:58:59] <pcwalton> well, if we change the syntax
[02:59:03] <pcwalton> too much lookahead with "in"
[02:59:24] <pcwalton> strcat: why do they use the tydesc?
[02:59:38] <strcat> pcwalton: they seem to need it to know how big they are
[02:59:45] <strcat> pcwalton: and I guess to handle glue for what they contain
[03:00:08] <strcat> it's a bit weird
[03:01:21] <strcat> pcwalton: in the closure take glue, it loads a size from the tydesc and copies that much
[03:01:23] *** Quits: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP) (Ping timeout)
[03:01:50] <strcat>         let sz = Load(bcx, GEPi(bcx, tydesc, [0u, abi::tydesc_field_size]));
[03:01:58] <pcwalton> closure... take glue?
[03:02:02] * pcwalton is confused
[03:02:03] <pcwalton> i
[03:02:03] <pcwalton> s
[03:02:03] <pcwalton> n
[03:02:03] <pcwalton> 
[03:02:03] <pcwalton> 
[03:02:03] <pcwalton> 
[03:02:06] <pcwalton> damn colloquy
[03:02:11] <pcwalton> isn't that just copying a pointer?
[03:02:17] <strcat> pcwalton: it says it's a deep copy for ~fn
[03:02:19] <pcwalton> for &fn
[03:02:22] <pcwalton> oh sure, for ~fn
[03:02:29] <pcwalton> (btw, I am removing that facility right now) ;)
[03:02:40] <strcat> pcwalton: the ~fn case is the scariest one
[03:02:44] <engla> strcat: I have bad news for the closure lifetime issue, https://github.com/mozilla/rust/issues/7814
[03:02:53] *** Quits: Earnestly (earnest@2AB30F53.FB5005.2BCC804A.IP) (Ping timeout)
[03:03:08] <pcwalton> I'm removing the ability to copy ~fn
[03:03:11] * strcat seems to remember some discussion about being able to store them directly in a struct
[03:03:18] <strcat> pcwalton: ah
[03:03:25] <pcwalton> because I'm removing the :Copy bound
[03:03:35] <strcat> pcwalton: it will have :Clone though, right?
[03:03:37] <pcwalton> bblum made it so that copying an ~fn required the :Copy bound, I'm removing the Copy bound from the language
[03:03:38] <pcwalton> no
[03:03:44] <pcwalton> fn:Foo only works if Foo is a built-in trait
[03:03:49] <strcat> ah
[03:03:56] <pcwalton> if you want clonable ~fn you can use a factory, which is what we do today
[03:04:03] <pcwalton> it might be annoying but it's macro-able
[03:04:42] <pcwalton> ~Thunk and ~ClonableThunk maybe
[03:05:13] <strcat> pcwalton: so I think it will basically just need the tydesc to call free glue
[03:05:20] <pcwalton> ah yeah, free glue
[03:05:21] <pcwalton> bah
[03:05:23] <pcwalton> you're right
[03:05:23] <bblum> https://github.com/mozilla/rust/issues/2830
[03:05:24] <strcat> but it doesn't need the other 3 fields
[03:05:27] *** Joins: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP)
[03:05:34] <bblum> Clone should be supported eventually
[03:05:35] <pcwalton> you gotta have the tydescs because it's an existential type. duh :)
[03:05:38] <bblum> by which i mean, i have no plan to do it myself
[03:05:53] <strcat> pcwalton: I was surprised how resilient ~Trait was to me removing headers
[03:06:11] <strcat> it actually checks the tydesc and never assumes anything about the box, didn't have to fix much
[03:06:12] <bblum> also i believe niko was originally responsible for making ~fn noncopyable
[03:06:19] <bblum> i was responsible for making it briefly copyable
[03:06:23] <strcat> (the tydesc inside the trait ptr part, not the box)
[03:06:23] <bblum> with :Copy
[03:06:36] <strcat> ~fn not so much :)
[03:06:49] <pcwalton> bblum: ironically the biggest fallout from making &fn:Copy not be implicitly copyable anymore was the old TLS interface
[03:07:00] <pcwalton> but acrichto, like a superhero, came in and saved the day
[03:07:08] <pcwalton> I was peppering transmutes throughout the code to work around it
[03:07:26] *** Quits: seth (seth@moz-42C5FAA8.nc.res.rr.com) (Input/output error)
[03:07:31] <bblum> pcwalton: yes i figured that would be a problem
[03:07:35] <bblum> for the most part, we do not copy closures
[03:07:55] <bblum> the biggest fallout from making stack closures noncopyable was IterBytes implementations, which move it around everywhere
[03:09:12] *** Quits: jfbk (textual@moz-EEA9CFB3.nyc.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[03:09:31] <pcwalton> I'm close to done rebasing my decopy change, with the windows OOM now fixed
[03:09:39] <strcat> pcwalton: what was causing that?
[03:09:41] <pcwalton> spent 4 days on that windows OOM
[03:09:50] <pcwalton> strcat: the macro expander clones entire token trees
[03:09:57] <pcwalton> which is several 1.5GB allocations
[03:09:59] <pcwalton> in check-fast
[03:10:03] <pcwalton> because that's a huge file
[03:10:03] <strcat> ah
[03:10:11] <pcwalton> with a big macro invocation I guess.
[03:10:20] <pcwalton> anyway, I made it stop doing that.
[03:11:26] *** Joins: eatkinson (eatkinson@moz-AD233F1B.dia.static.qwest.net)
[03:11:27] * dbaupp wants an owned ast and consuming a `fold`
[03:11:31] <dbaupp> *a consuming
[03:11:54] <strcat> pcwalton: will strdup_uniq and tvec::duplicate_uniq end up being unused?
[03:12:03] <strcat> I guess ~"foo" still uses strdup_uniq
[03:12:10] <pcwalton> strdup_uniq is for ~"foo"
[03:12:33] *** Quits: doomlord_ (servitor@moz-13E69BC8.range86-180.btcentralplus.com) (Connection reset by peer)
[03:12:38] *** Quits: LU324 (stuff@moz-A17E9A7B.dyn.embarqhsd.net) (Ping timeout)
[03:13:21] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Quit: yichoi)
[03:16:38] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[03:18:51] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[03:19:42] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[03:19:42] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 144bfb230 to 148a1002f: 02http://git.io/N3iJvQ
[03:19:42] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[03:19:43] *** Joins: ghrust (ghrust@AD60B2E3.6A2AE50.F3114085.IP)
[03:19:43] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/f8OrxA
[03:19:43] <ghrust> 13rust/06auto 1460bf40c 15Alex Crichton: Make all lang_items optional...
[03:19:43] <ghrust> 13rust/06auto 142a5e5e6 15bors: auto merge of #7828 : alexcrichton/rust/lang-opt, r=graydon...
[03:19:43] *** Parts: ghrust (ghrust@AD60B2E3.6A2AE50.F3114085.IP) ()
[03:21:03] *** Quits: bytbox (s@moz-DC83764A.washdc.fios.verizon.net) (Ping timeout)
[03:21:45] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[03:22:58] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[03:23:23] <strcat> pcwalton: btw why are strings/vectors called estr/evec?
[03:23:29] <strcat> "e"
[03:23:36] <pcwalton> strcat: nobody knows except graydon
[03:23:41] <pcwalton> :)
[03:23:45] <strcat> heh :P
[03:24:24] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Quit: pcwalton)
[03:24:39] *** Quits: tikue (tkuehn@moz-BBE3ABD.mv.mozilla.com) (Quit: tikue)
[03:26:23] *** Quits: MaikKlein1 (maik@moz-4C6F98CE.dip0.t-ipconnect.de) (Ping timeout)
[03:30:07] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[03:30:51] *** Joins: vk (vk@858480B7.B568D26C.93B001FA.IP)
[03:32:19] *** Joins: strcat1 (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[03:32:23] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[03:32:23] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[03:33:48] <mark_edward> rusti!!!!!!!!!!!!
[03:34:06] <aatch> "encapsulated"?
[03:34:10] <aatch> That's how I read it.
[03:34:22] *** Quits: duckinator (nick@moz-74B346B5.mostlyincorrect.info) (Quit: Nickname collision due to Services enforced nickname change, your nick was overruled)
[03:35:02] *** Quits: anri (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net) (Quit: anri)
[03:35:09] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[03:35:11] *** Quits: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca) (Quit: Leaving)
[03:35:17] *** strcat1 is now known as strcat
[03:36:14] <dbaupp> rusti: !!!!!!!!!!!!
[03:36:14] -rusti- <anon>:8:4: 8:5 error: unexpected token: `}`
[03:36:15] -rusti- <anon>:8     };
[03:36:15] -rusti-              ^
[03:36:15] -rusti- application terminated with error code 101
[03:36:15] <mark_edward> strcat and rusti are back. 
[03:36:24] <dbaupp> mark_edward: nope, your code was invalid :P
[03:36:31] <dbaupp> rusti: !!!!!!!!!!!!1
[03:36:32] -rusti- 1
[03:36:35] <mark_edward> strcat: does rusti live on your machine?
[03:36:39] <strcat> mark_edward: yes
[03:36:42] <strcat> my laptop
[03:37:17] <mark_edward> i think i have an AWS micro-tier instance lying around, would that be enough to host it/
[03:37:25] *** Quits: eatkinson (eatkinson@moz-AD233F1B.dia.static.qwest.net) (Quit: eatkinson)
[03:37:26] <acrichto> dbaupp: for isrustfastyet, is there a reason that the window of time for the memory graph is much larger than the one for the compile-time graph?
[03:37:48] <mark_edward> rusti:  !!!!!1
[03:37:48] -rusti- -2
[03:37:53] <mark_edward> ?
[03:37:56] <dbaupp> acrichto: yeah, the memory one is modern and the compile-time one was written in the dark ages
[03:38:01] <dbaupp> mark_edward: bitwise complement
[03:38:11] <strcat> hm
[03:38:13] <dbaupp> acrichto: i.e. you can zoom the memory one
[03:38:22] <mark_edward> dbaupp: oh, i thought it was bool/style egation
[03:38:25] <acrichto> dbaupp: aww I was hoping the memory one could start out a bit smaller
[03:38:28] *** Joins: eatkinson (eatkinson@moz-AD233F1B.dia.static.qwest.net)
[03:38:39] <dbaupp> acrichto: (I should probably set it to default to last 2 weeks or something, yeah)
[03:38:45] <mark_edward> *negation
[03:38:59] <acrichto> dbaupp: btw, that site is fantastic
[03:39:02] <dbaupp> however, it's non trivial to get the #hash,hash,hash links to work nicely with it
[03:39:07] <dbaupp> thanks :)
[03:39:17] <mark_edward> rusti: !0xff_ff
[03:39:18] -rusti- -65536
[03:39:31] <dbaupp> rusti: !0xffu8
[03:39:31] -rusti- 0
[03:39:53] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[03:39:56] <mark_edward> rusti: !0xefff_ffff_ffff_ffff
[03:39:57] -rusti- 1152921504606846976
[03:40:13] <mark_edward> rusti:!0xefff_ffff_ffff_ffff
[03:40:14] -rusti- 1152921504606846976
[03:40:19] <dbaupp> acrichto: in any case, the memory-bencher has dropped off the internet :(
[03:40:19] <mark_edward> rusti: 0xefff_ffff_ffff_ffff
[03:40:20] -rusti- -1152921504606846977
[03:40:28] <acrichto> dbaupp: yeah it's not super serious
[03:40:41] <mark_edward> rusti: 0x8fff_ffff_ffff_ffff
[03:40:42] -rusti- -8070450532247928833
[03:40:52] <dbaupp> acrichto: the worst bit is it could be using the time to be bench older and older pull requests... but the automated script is probably written incorrectly
[03:40:54] * dbaupp sighs
[03:41:03] <dbaupp> s/ be / /
[03:41:14] *** Quits: Jesin (Jessin_@moz-48B48C95.eecs.lehigh.edu) (Quit: Leaving)
[03:41:17] <mark_edward> rusti: 0x7fff_ffff_ffff_ffff
[03:41:18] -rusti- 9223372036854775807
[03:41:23] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[03:41:31] <mark_edward> ^^ this is largest possible int, right?
[03:41:42] <acrichto> dbaupp: if it's something which can run on more than one machine, I have some spare cycles on one that could do some benchmarks
[03:41:54] *** Joins: duckinator (nick@moz-74B346B5.mostlyincorrect.info)
[03:42:05] <acrichto> dbaupp: although it's osx, so if they're all linux right now that's probably not good
[03:42:25] *** Quits: samx (sami@moz-48EC0983.dyn.optonline.net) (Quit: This computer has gone to sleep)
[03:42:44] <dbaupp> acrichto: nah, it'd have to be listed separately anyway (currently, "all" = one machine)
[03:42:54] <dbaupp> acrichto: even if it was the linux x64 too
[03:42:56] <mark_edward> strcat: what do you think about my AWS proposal?
[03:43:08] <strcat> how much memory do they have?
[03:43:14] <dbaupp> acrichto: (because different machines have different characteristics)
[03:43:21] <acrichto> dbaupp: yeah...
[03:43:29] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[03:43:35] *** Joins: ghrust (ghrust@C621748.6A2AE50.F3114085.IP)
[03:43:35] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 142a5e5e6 to 148a1002f: 02http://git.io/N3iJvQ
[03:43:35] *** Parts: ghrust (ghrust@C621748.6A2AE50.F3114085.IP) ()
[03:43:37] *** Joins: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP)
[03:43:37] <ghrust> 01[13rust01] 15bors pushed 10 new commits to 06auto: 02http://git.io/BUDtlA
[03:43:37] <ghrust> 13rust/06auto 14491501e 15Patrick Walton: librustc: Add a lint mode for unnecessary `copy` and remove a bunch of them.
[03:43:37] <ghrust> 13rust/06auto 143439740 15Patrick Walton: librustc: Remove all uses of "copy".
[03:43:38] <ghrust> 13rust/06auto 146cce801 15Patrick Walton: librustc: Remove `copy` expressions from the language.
[03:43:40] *** Parts: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP) ()
[03:43:45] <dbaupp> acrichto: also... I think the memory recording technique only works on linux :(
[03:43:59] <acrichto> oh yeah it's that cgroups thing right?
[03:44:15] <dbaupp> so it'd be really nice, and if I had the data I'd throw it up... but it probably won't work :(
[03:44:16] <dbaupp> yeah
[03:45:11] <dbaupp> mark_edward: (the strcat's question is because rusti needs a minimum of ~128MiB to be workable.)
[03:45:20] <mark_edward> strcat: Micro Instance 613 MiB of memory, up to 2 ECUs (for short periodic bursts), EBS storage only, 32-bit or 64-bit platform
[03:46:39] <dbaupp> acrichto: (yay for optional langitems, btw :) )
[03:46:49] <acrichto> I liked how they turned out
[03:47:06] <dbaupp> yeah, it looks pretty clean
[03:47:07] <acrichto> dbaupp: I added a small rpass test to ensure that it doesn't have to get larger
[03:47:08] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[03:47:18] <acrichto> although it ended up needing a linkhack thing for linux which makes me sad
[03:48:50] <acrichto> dbaupp: thanks for the 2 r+'s :)
[03:48:58] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[03:50:33] <dbaupp> acrichto: np :)
[03:50:42] <dbaupp> what's the linkhack thing do?
[03:51:07] <acrichto> it basically just passes arguments to the linker but only on linux
[03:51:46] <dbaupp> ah, so they're not passed by default?
[03:52:01] <acrichto> apparently not...
[03:52:05] <dbaupp> how peculiar
[03:52:59] <acrichto> I wanted to create a '*u8' via '&"Hello"[0]' but then that required the out-of-bounds lang_item, so I resorted to transmute instead
[03:53:16] <acrichto> I think transmute is one of my favorite things in rust
[03:57:26] <dbaupp> you're a bad person :P
[03:57:36] <jensnockert> Do we have optional langitems?!
[03:57:47] <jensnockert> \o/
[03:58:02] <dbaupp> jensnockert: not yet
[03:58:06] <dbaupp> jensnockert: they bounced
[03:58:13] <jensnockert> But there is a PR?
[03:58:41] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[03:58:41] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1400aeda0 to 148a1002f: 02http://git.io/N3iJvQ
[03:58:41] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[03:58:43] *** Joins: ghrust (ghrust@AD60B2E3.6A2AE50.F3114085.IP)
[03:58:43] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/RNvwbQ
[03:58:43] <ghrust> 13rust/06auto 143a59a7a 15Alex Crichton: Make all lang_items optional...
[03:58:43] <ghrust> 13rust/06auto 14db50798 15bors: auto merge of #7828 : alexcrichton/rust/lang-opt, r=graydon...
[03:58:43] *** Parts: ghrust (ghrust@AD60B2E3.6A2AE50.F3114085.IP) ()
[03:58:55] <dbaupp> speak of the devil, etc etc
[03:58:58] <dbaupp> jensnockert: https://github.com/mozilla/rust/pull/7828
[03:59:03] <acrichto> coming up soon...
[03:59:15] * jensnockert hugs acrichto.
[04:00:51] *** Joins: bytbox (s@moz-DC83764A.washdc.fios.verizon.net)
[04:01:03] <dbaupp> I have a feeling that using them to break std into core and std will make some people unhappy.
[04:03:02] *** Quits: eatkinson (eatkinson@moz-AD233F1B.dia.static.qwest.net) (Quit: eatkinson)
[04:03:18] <acrichto> we should have a std and something like a rustrt
[04:03:32] <acrichto> although I'm not sure if that's possible...
[04:03:34] <dbaupp> gah... how do I make a positive test that a `#[no_implicit_prelude];` attribute is working?
[04:03:55] <dbaupp> I can test for things not being imported... but that'll break if when the things in the prelude get renamed
[04:04:06] <Luqman> a compile-fail test that uses something that'd be in the prelude maybe
[04:04:24] <acrichto> dbaupp: yeah add a cfail test and make sure that an import isn't flagged as an unused import
[04:04:38] <dbaupp> rusti: use std::prelude::Add;
[04:04:39] -rusti- <anon>:7:13: 7:30 warning: unused import [-W unused-imports (default)]
[04:04:39] -rusti- <anon>:7          use std::prelude::Add;
[04:04:40] -rusti-                       ^~~~~~~~~~~~~~~~~
[04:04:40] -rusti- ()
[04:04:51] <dbaupp> rusti: use std::prelude::println; println("foo");
[04:04:53] -rusti- foo
[04:04:53] -rusti- ()
[04:05:01] <acrichto> weird...
[04:05:14] <dbaupp> rusti: use std::prelude::Add; 1 + 2
[04:05:15] -rusti- <anon>:7:13: 7:30 warning: unused import [-W unused-imports (default)]
[04:05:15] -rusti- <anon>:7          use std::prelude::Add; 1 + 2
[04:05:15] -rusti-                       ^~~~~~~~~~~~~~~~~
[04:05:16] -rusti- 3
[04:05:26] <dbaupp> rusti: use std::prelude::Add; 1i.add(&2)
[04:05:28] -rusti- 3
[04:05:29] <acrichto> you don't need the Add trait to add integers
[04:05:41] <dbaupp> right
[04:05:50] <acrichto> that's not the behavior I expected though...
[04:06:31] <dbaupp> I'll just add a cfail that uses a lot of things from the prelude, so hopefully the won't all get renamed at once.
[04:08:59] *** Quits: ilyoan (ilyoan@B4104EBB.3CC170B1.1E14B209.IP) (Input/output error)
[04:11:23] *** Quits: n0vember (n0vember@moz-690FFF9D.org) (Quit: ZNC - http://znc.in)
[04:12:56] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[04:12:56] *** ChanServ sets mode: +o dherman
[04:13:37] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[04:15:04] *** Quits: dew (Instantbir@moz-2C6F2E2.dhcp.stls.mo.charter.com) (Ping timeout)
[04:15:11] *** Joins: dew (Instantbir@moz-2C6F2E2.dhcp.stls.mo.charter.com)
[04:15:49] *** Quits: jesse99 (jesse99@moz-F226420.hsd1.wa.comcast.net) (Ping timeout)
[04:16:21] *** Quits: vk (vk@858480B7.B568D26C.93B001FA.IP) (Quit: vk)
[04:17:59] <mark_edward> dbaupp: why are we breaking std up!!!!!!!1!
[04:18:26] <dbaupp> mark_edward: to allow people to run without the runtime but still use all the things that work without the runtime
[04:18:31] *** Quits: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP) (Ping timeout)
[04:18:42] <dbaupp> mark_edward: (this is something I want to happen... not sure if it actually will.)
[04:19:05] <mark_edward> dbaupp: maybe just mark individual modules with a #[no_runtime] attribute?
[04:19:25] <dbaupp> mark_edward: it's more fine grained than that
[04:19:33] <dbaupp> (at least it is at the moment)
[04:19:41] <dbaupp> mark_edward: also, what's so bad about breaking std into two?
[04:19:59] <mark_edward> that's one two many things from one thing
[04:20:30] <mark_edward> std, extra, and core back from the dead!
[04:20:37] * mark_edward catches the vapors
[04:22:30] *** Joins: n0vember (n0vember@moz-690FFF9D.org)
[04:22:32] *** Joins: jfbk (textual@moz-EEA9CFB3.nyc.res.rr.com)
[04:22:40] <dbaupp> presumably it'd be done in such a way that people using the runtime-std (i.e. normal users) wouldn't have to worry about the difference, but the option would still be there
[04:23:29] <dbaupp> (as in, if it was done, it would be unacceptable to have `use core::str::StrSlice` but `use std::str::OwnedStr`.)
[04:24:04] *** Quits: bytbox (s@moz-DC83764A.washdc.fios.verizon.net) (Ping timeout)
[04:24:09] *** Joins: tikue (tkuehn@moz-A7CDB794.dia.static.qwest.net)
[04:24:14] *** qmx is now known as zombie222
[04:24:25] *** zombie222 is now known as qmx
[04:25:51] <ChrisMorgan> Alternative version: figure out what the code uses and compile just that, and link it into your own code. I presume that's been considered? How hard would it be? I know it'd be notably slower.
[04:26:25] *** Quits: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net) (Client exited)
[04:26:33] *** Quits: tikue (tkuehn@moz-A7CDB794.dia.static.qwest.net) (Quit: tikue)
[04:27:23] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[04:27:37] *** Joins: nano (nano@moz-972880B.superkabel.de)
[04:27:41] <dbaupp> ChrisMorgan: no idea how hard that would be (and not sure if it's been considered... i've only considered it briefly before deciding I don't know enough to implement it.)
[04:29:11] <ChrisMorgan> The way that springs to mind immediately is that you'd do the first step of compiling everything, and then form a dependency graph starting at the entry point (or everything public, in a library crate) and throw away anything not in the dependency graph before continuing.
[04:30:56] <dbaupp> ChrisMorgan: you'd presumably have to compile std with a reduced feature set too
[04:31:07] <dbaupp> ChrisMorgan: since some things are totally unsupported on some platforms
[04:31:14] <dbaupp> https://github.com/mozilla/rust/pull/7844 r?
[04:31:40] *** Joins: strcat1 (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[04:31:46] <ChrisMorgan> dbaupp: sure, you'd probably need some #[cfg] to ensure that certain things _can't_ be used.
[04:31:47] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[04:31:50] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[04:31:50] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14db50798 to 148a1002f: 02http://git.io/N3iJvQ
[04:31:50] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[04:31:52] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[04:31:52] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/rV7_bw
[04:31:52] <ghrust> 13rust/06auto 14712ac83 15Austin King: Rename Option swap_unwrap to take_unwrap. Fixes Issue#7764
[04:31:52] <ghrust> 13rust/06auto 144bd716a 15bors: auto merge of #7831 : ozten/rust/issues-7764-swap_unwarp-take-unwrap, r=pcwalton...
[04:31:52] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[04:31:53] *** Joins: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net)
[04:31:55] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[04:32:00] *** strcat1 is now known as strcat
[04:32:40] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[04:33:20] <dbaupp> ChrisMorgan: yeah, I guess #[cfg(not(no_runtime))] could go on a whole pile of things
[04:33:38] <dbaupp> (i.e. they disappear when compiling with `rustc --cfg no_runtime`)
[04:34:17] <dbaupp> acrichto: it failed again?
[04:34:34] <ChrisMorgan> I think, though, as a generalisation, you'd be fine just letting the dependency graph sort that outâ€”anything that isn't used gets left out. You'd only need that on things where there's some other strange dependency. Leave the rest to other cfg switches.
[04:35:10] <dbaupp> ChrisMorgan: that'd be pretty hard to do, I think.
[04:35:15] <dbaupp> ChrisMorgan: (for compiling std)
[04:35:46] <dbaupp> acrichto: I guess you need to xfail-fast the smallest-hello-world
[04:36:32] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Client exited)
[04:36:36] <dbaupp> ChrisMorgan: i.e. resolve would have to cope with identifying that this function either used or visible outside the crate before complaining about unresolved names
[04:37:17] <acrichto> dbaupp: oh I forgot xfail-fast for windows
[04:37:43] <dbaupp> ChrisMorgan: e.g. if you had #[cfg(not(no_runtime))] pub fn foo() { bar(); } fn bar() { some_runtime_function() } #[cfg(not(no_runtime))] fn some_runtime_function() {}
[04:38:17] <dbaupp> ChrisMorgan: it would have to work out that bar is unused (the hardest bit) and private before complaining
[04:38:37] <dbaupp> ChrisMorgan: i'm sure it's possible, but pcwalton has said that resolve is too complicated as it is.
[04:39:00] <dbaupp> acrichto: are you a reviewer? https://github.com/mozilla/rust/pull/7844
[04:41:40] *** Joins: tikue (tkuehn@moz-A7CDB794.dia.static.qwest.net)
[04:45:12] *** Joins: Jesin (Jessin_@moz-157A63DD.cc.lehigh.edu)
[04:45:22] *** Quits: Jesin (Jessin_@moz-157A63DD.cc.lehigh.edu) (Quit: Leaving)
[04:46:50] <acrichto> dbaupp: what's the use case for no prelude but using std?
[04:47:20] *** Joins: jesse99 (jesse99@moz-F226420.hsd1.wa.comcast.net)
[04:47:38] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[04:47:50] *** Quits: nano (nano@moz-972880B.superkabel.de) (Connection reset by peer)
[04:47:59] <acrichto> dbaupp: also why did you have to override fold_item as well?
[04:48:26] *** Quits: lmandel (lmandel@8B192B20.1F93A08E.ADB88A9.IP) (Quit: lmandel)
[04:48:27] <dbaupp> acrichto: _mod doesn't have the attributes, the containing `item` does
[04:48:59] *** Quits: jesse99 (jesse99@moz-F226420.hsd1.wa.comcast.net) (Quit: jesse99)
[04:49:01] <dbaupp> acrichto: and, use case for std but no prlude is because Haskell has it.
[04:49:04] <dbaupp> *prelude
[04:49:21] *** Joins: Jesin (Jessin_@moz-3AD6F09F.res.lehigh.edu)
[04:49:27] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[04:50:41] <dbaupp> acrichto: makes it easier to have alternative preludes, since currently the prelude occupies the whole namespace
[04:50:49] * dbaupp doesn't really know why Haskell has it
[04:50:56] *** Quits: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP) (Quit: Leaving.)
[04:51:20] <acrichto> dbaupp: it seems like it should be checked and then become entirely a no-op, but if there's not really a compelling use case I'm hesitant
[04:51:45] <dbaupp> acrichto: what do you mean by becoming entirely a no-op?
[04:52:21] <dbaupp> acrichto: (just put a comment with your reservations and let someone else decide. :) )
[04:52:58] <acrichto> dbaupp: the method I figure should look like "if attribute { inject prelude }
[04:53:06] <acrichto> not convinced there has to be a copy involved and other modifications
[04:53:10] <jensnockert> No point in having "no prelude" imply "no standard library" is there?
[04:53:18] <dbaupp> acrichto: oh, they're all required
[04:53:25] <dbaupp> jensnockert: that's backwards...
[04:53:40] <jensnockert> Well, no point in the other way around either.
[04:53:44] <dbaupp> jensnockert: at least, we currently have `#[no_std]` which "implies" #[no_implicit_prelude]
[04:53:50] <acrichto> dbaupp: I'll read more closely later when I get a chance
[04:54:21] <jensnockert> You could technically have an alternative libstd that implements the whole prelude.
[04:54:35] <dbaupp> acrichto: waaait, the @copy *item isn't required!
[04:54:38] * dbaupp fixes that
[04:54:58] <dbaupp> acrichto: but other than that, it does become a no-op if there's a #[no_implicit_prelude].
[04:55:34] <acrichto> dbaupp: there is an array of attributes on the crate struct
[04:55:52] <dbaupp> jensnockert: oh, so it'd be convenient to be able to say #[use_prelude="my_crate::prelude"]
[04:55:59] <dbaupp> acrichto: yup, that's checked, isn't it?
[04:56:00] <acrichto> dbaupp: https://github.com/huonw/rust/blob/99a76c26aeab8d7dca6f8fe0000ac6c3f015fed5/src/librustc/front/std_inject.rs#L25
[04:56:08] <acrichto> dbaupp: shouldn't that line just have another clause for this attribute?
[04:56:14] <acrichto> b/c they're the same thing essentially
[04:56:17] <jensnockert> dbaupp: That would be an even more convenient thing, yes.
[04:56:19] <dbaupp> acrichto: https://github.com/huonw/rust/blob/99a76c26aeab8d7dca6f8fe0000ac6c3f015fed5/src/librustc/front/std_inject.rs#L70 ?
[04:56:35] <acrichto> github u slow
[04:56:35] <dbaupp> acrichto: because the `extern mod std` still needs to happen
[04:57:08] <acrichto> dbaupp: ooooooh
[04:57:26] <dbaupp> jensnockert: we could have #[implicit_imports="my_crate::prelude::*, my_other_crate::not_a_prelude::SomeTrait"]
[04:57:36] <dbaupp> jensnockert: but that might be making things magical
[04:58:01] <jensnockert> dbaupp: I prefer the prelude ones.
[04:58:12] <dbaupp> "how on earth is this function in scope?" etc.
[04:58:23] <jensnockert> You could allow multiple #[use_prelude]s
[04:58:34] <dbaupp> jensnockert: that'd work
[04:58:49] *** Quits: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net) (Client exited)
[04:59:07] *** Joins: eatkinson (eatkinson@moz-AD233F1B.dia.static.qwest.net)
[04:59:11] <acrichto> dbaupp: so then why not just guard the 'use std::prelude::*' injection?
[04:59:23] <acrichto> dbaupp: it looks like you're guarding that, but from a different location
[04:59:23] <dbaupp> acrichto: because this is more efficient
[04:59:34] <acrichto> dbaupp: "efficient"
[04:59:43] <dbaupp> acrichto: this avoids doing the fold totally if you've got #[no_implicit_prelude] at the top of the crate
[04:59:43] <acrichto> dbaupp: it's traversing more things but that's the least of our worries
[04:59:50] <dbaupp> hm?
[05:00:07] <acrichto> dbaupp: unless this is something like a huge regression, I'd go for clarity
[05:00:20] <dbaupp> I'm fixing the `@copy *item` problem now
[05:01:29] <dbaupp> acrichto: this is essentially as clear as it can be (i.e. checking the attributes directly), I think any other way would require introducing a use_prelude: @mut bool
[05:01:44] <dbaupp> acrichto: which gets set/reset as the fold goes up and down the AST
[05:01:47] <acrichto> dbaupp: yeah actually now that I think about it lemme see it with the copy fixed and I'll probably approve
[05:03:06] <dbaupp> acrichto: pushed
[05:04:59] <dbaupp> thanks!
[05:05:17] <acrichto> dbaupp: np
[05:05:18] * dbaupp moves on to making macros expand better
[05:06:06] <dbaupp> acrichto: wait, you appear to have r+'d the old commit... maybe I didn't push properly...
[05:06:31] <dbaupp> acrichto: oh, nope, I guess it was just github being slow or something.
[05:06:36] * acrichto refreshes the page
[05:10:20] *** Quits: ross (ross@moz-8A84103E.br.br.cox.net) (Quit: )
[05:12:53] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[05:19:27] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Ping timeout)
[05:19:51] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[05:23:57] *** Quits: rfw (rfw@moz-C65A114.rfw.name) (Quit: WeeChat 0.3.7)
[05:31:18] *** Joins: strcat1 (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:31:24] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[05:32:07] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[05:32:43] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[05:32:57] *** strcat1 is now known as strcat
[05:35:33] *** Joins: jgilbert (jgilbert@986623D2.9083A694.9CA62458.IP)
[05:36:34] *** Quits: eatkinson (eatkinson@moz-AD233F1B.dia.static.qwest.net) (Quit: eatkinson)
[05:38:16] *** Joins: Uther (Instantbir@moz-1B244B05.hfc.dyn.abo.bbox.fr)
[05:47:21] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:48:02] <jensnockert> Since I failed miserably with keeping stuff in order on the mailing list, http://www.reddit.com/r/rust/comments/1igvye/vision_for_rust_simd/
[05:48:05] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[05:49:57] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[05:51:06] <dbaupp> jensnockert: is your preferred syntax meant to be used like `let x: <f32, .. 4> = 1f32.splat()` (or whatever)?
[05:51:11] *** Joins: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP)
[05:51:28] <jensnockert> That is what I would prefer.
[05:51:39] <jensnockert> Not sure if the parser constraints would allow it.
[05:51:58] * jensnockert mumbles about silly computer scientists.
[05:52:04] <dbaupp> It probably would...
[05:52:32] <dbaupp> although we'd end up with stuff like `size_of::<<f32, .. 4>>()`
[05:52:43] * dbaupp doesn't think that is too bad
[05:52:53] <jensnockert> As long as it parses, I think it looks good.
[05:53:18] <jensnockert> You should pay a small price of fugly for using low-level features.
[05:55:09] <dbaupp> Yeah
[05:55:36] <dbaupp> (I could imagine SIMD<f32, .. 4> might be possible... and require less special-casing. not zero though.)
[05:56:26] *** Quits: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP) (Ping timeout)
[05:57:16] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[05:58:35] <jensnockert> I just don't want to mix it in with struct / tuple, because that requires a lot of special casing.
[05:58:55] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[06:00:03] <dbaupp> yeah
[06:00:42] <aatch> I need to get my new computer working... stupid graphics drives
[06:00:45] <aatch> drivers*
[06:00:51] *** Quits: tikue (tkuehn@moz-A7CDB794.dia.static.qwest.net) (Quit: tikue)
[06:03:02] *** Quits: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Quit: Don't tell them I was here...)
[06:04:20] <jensnockert> No, I need meat. brb.
[06:04:54] *** Joins: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[06:07:46] *** Joins: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP)
[06:07:46] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/rV7_bw
[06:07:46] *** Parts: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP) ()
[06:10:46] *** Joins: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP)
[06:10:46] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/OpXgcw
[06:10:46] *** Parts: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP) ()
[06:10:48] *** Joins: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP)
[06:10:48] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/WhAKLQ
[06:10:48] <ghrust> 13rust/06auto 1488a1b71 15Alex Crichton: Make all lang_items optional...
[06:10:48] <ghrust> 13rust/06auto 14af54f63 15bors: auto merge of #7828 : alexcrichton/rust/lang-opt, r=graydon...
[06:10:48] *** Parts: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP) ()
[06:16:13] *** Joins: robertknight_ (robertknig@moz-B6DD6E0B.range86-166.btcentralplus.com)
[06:18:19] *** Joins: vk (vk@moz-389FEE13.hsd1.ca.comcast.net)
[06:19:06] *** Quits: alisdair (textual@moz-EBE9F394.bchsia.telus.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[06:19:38] *** Quits: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Ping timeout)
[06:19:50] *** Joins: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[06:19:54] *** Joins: thpickert (thpickert@moz-24816453.tng.de)
[06:22:12] *** Joins: riley (riley@moz-E40BCEED.hsd1.ca.comcast.net)
[06:28:51] *** Quits: vk (vk@moz-389FEE13.hsd1.ca.comcast.net) (Quit: vk)
[06:30:07] *** Joins: vk (vk@moz-389FEE13.hsd1.ca.comcast.net)
[06:31:53] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[06:31:53] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[06:32:14] *** Quits: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Quit: Don't tell them I was here...)
[06:34:01] *** Quits: sankha93 (Instantbir@E735FC94.D56F0A4C.E7DAB6F9.IP) (Ping timeout)
[06:34:35] *** Quits: jgilbert (jgilbert@986623D2.9083A694.9CA62458.IP) (Ping timeout)
[06:37:27] *** Joins: pcwalton (pcwalton@moz-481A040C.hsd1.ca.comcast.net)
[06:37:27] *** ChanServ sets mode: +o pcwalton
[06:38:08] *** Joins: sankha93 (Instantbir@E490E24E.B6A63309.25B273F5.IP)
[06:41:22] *** Quits: vk (vk@moz-389FEE13.hsd1.ca.comcast.net) (Quit: vk)
[06:43:04] *** Joins: vk (vk@moz-389FEE13.hsd1.ca.comcast.net)
[06:44:37] *** Joins: alisdair (textual@moz-EBE9F394.bchsia.telus.net)
[06:46:31] *** Joins: rfw (rfw@moz-C65A114.rfw.name)
[06:48:03] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[06:48:14] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[06:48:35] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[06:48:56] *** Joins: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[06:50:32] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[06:50:53] *** Joins: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP)
[06:51:05] *** Parts: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP) ()
[06:51:07] *** Joins: doener (doener@moz-121949B3.unitymediagroup.de)
[06:52:28] *** Quits: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Quit: zzzZZZzzz)
[06:55:42] *** Quits: vk (vk@moz-389FEE13.hsd1.ca.comcast.net) (Quit: vk)
[06:57:40] *** Quits: robertknight_ (robertknig@moz-B6DD6E0B.range86-166.btcentralplus.com) (Ping timeout)
[07:02:01] *** Quits: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net) (Ping timeout)
[07:06:29] *** Joins: orshem (orshem@81F00A95.B9DE554A.EB50AD2C.IP)
[07:08:10] *** Quits: aatch (aatch@moz-B437F499.pocketrent.com) (Client exited)
[07:08:53] *** Joins: jaen (jaen@moz-8D6137D6.neoplus.adsl.tpnet.pl)
[07:17:07] *** Joins: Houm (Houm@moz-25669AA8.fbx.proxad.net)
[07:20:52] *** Joins: tikue (tkuehn@moz-A7CDB794.dia.static.qwest.net)
[07:29:20] *** Quits: pcwalton (pcwalton@moz-481A040C.hsd1.ca.comcast.net) (Quit: pcwalton)
[07:31:33] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[07:31:43] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[07:31:45] *** kimundi is now known as zz_kimundi
[07:33:49] *** Joins: fread2282 (Mibbit@moz-B64ADAED.nat.asu.edu)
[07:34:18] <fread2282> how can I implement thing[n]?
[07:34:30] <fread2282> the vec subscripting
[07:34:40] <fread2282> (for my own vec type)
[07:35:08] <acrichto> fread2282: implement the Index trait (ops::Index)
[07:36:06] <fread2282> acrichto: yay, thanks
[07:36:29] <dbaupp> fread2282: although, indexing only works where n is an integer at the moment
[07:36:39] <dbaupp> fread2282: (even if you implement that trait.)
[07:37:50] *** Joins: SimonSapin (simon@moz-D0C2F181.zone2.bethere.co.uk)
[07:37:57] <fread2282> So for implementing PythonRC, what does `cast::copy_lifetime(self, &(*self.ptr).value)` do in extra::rc?
[07:38:10] <fread2282> (in fn borrow)
[07:38:49] <dbaupp> fread2282: it makes the &... borrow have the same lifetime as self
[07:39:21] <dbaupp> its signature is <'a>(&'a S, &T) -> &'a T, fwiw
[07:40:03] *** Joins: StarLight (StarLight@moz-CBF51929.dynamic.avangarddsl.ru)
[07:42:07] *** Quits: StarLight (StarLight@moz-CBF51929.dynamic.avangarddsl.ru) (Client exited)
[07:42:21] *** Quits: alisdair (textual@moz-EBE9F394.bchsia.telus.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[07:44:05] *** Quits: tikue (tkuehn@moz-A7CDB794.dia.static.qwest.net) (Quit: tikue)
[07:44:19] *** Joins: StarLight (StarLight@moz-CBF51929.dynamic.avangarddsl.ru)
[07:46:50] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[07:46:50] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/WhAKLQ
[07:46:50] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[07:47:17] <dbaupp> yay, optional lang items \o/
[07:47:22] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[07:49:03] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[07:49:44] *** Joins: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP)
[07:49:44] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/cX9tFw
[07:49:44] *** Parts: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP) ()
[07:50:47] <acrichto> awww de-copy didn't merge :(
[07:50:53] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[07:52:49] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[07:52:49] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/cX9tFw
[07:52:49] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[07:52:52] *** Joins: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP)
[07:52:52] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/zBayeg
[07:52:52] <ghrust> 13rust/06auto 1440f7434 15Graydon Hoare: test: new codegen tests, rename hello.
[07:52:52] <ghrust> 13rust/06auto 14a93244d 15bors: auto merge of #7839 : graydon/rust/new-codegen-tests, r=pcwalton...
[07:52:53] *** Parts: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP) ()
[07:54:35] *** Quits: riley (riley@moz-E40BCEED.hsd1.ca.comcast.net) (Client exited)
[07:54:40] *** Joins: pcwalton (pcwalton@moz-481A040C.hsd1.ca.comcast.net)
[07:54:40] *** ChanServ sets mode: +o pcwalton
[07:54:53] *** Quits: pcwalton (pcwalton@moz-481A040C.hsd1.ca.comcast.net) (Quit: pcwalton)
[07:55:42] *** Joins: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP)
[07:55:43] *** Joins: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP)
[07:56:05] *** Quits: SimonSapin (simon@moz-D0C2F181.zone2.bethere.co.uk) (Ping timeout)
[07:57:25] *** Quits: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP) (Ping timeout)
[07:57:35] <ChrisMorgan> On my earlier question of what to call a `use` statement, I just realised there is the "unused import" warning. Sounds like calling it an import is something that's done.
[07:57:59] *** Joins: SimonSapin (simon@moz-D0C2F181.zone2.bethere.co.uk)
[07:59:34] <fread2282> dbaupp: my real question is with the use of the .value and what I should do for python when I'm just "fake" managing a pointer in rust?
[08:00:03] <fread2282> so it's only a pointer, not even a ref count in rust
[08:00:49] <cmr> ChrisMorgan: yes, they are called imports
[08:02:39] * fread2282 is really confused
[08:03:30] <cmr> fread2282: you want a custom smart pointer that uses the python functions to bump/drop the refcount?
[08:04:10] <dbaupp> fread2282: oh... um, because Rc is struct Rc { ptr: *RcInner } struct RcInner { ref_count: uint, value: T }
[08:04:18] <dbaupp> fread2282: I don't really understand the question...
[08:05:08] <dbaupp> acrichto: I have a feeling that the only way that will land is to close the tree to give pcwalton something stable to rebase on :(
[08:05:24] <fread2282> cmr: yes, basically. So the CPython API/C-land functions manage the actual RC logic. the `.value` part of `cast::copy_lifetime(self, &(*self.ptr).value)` is confusing me...is that just because that's what it returns?
[08:06:23] <fread2282> or is the .value port needed to the lifetimes?
[08:06:28] <dbaupp> fread2282: yeah, it's a function &'a Rc<T> -> &'a T right
[08:06:41] <dbaupp> fread2282: the .value is just a field in the struct
[08:07:09] <dbaupp> fread2282: https://github.com/mozilla/rust/blob/master/src/libextra/rc.rs#L32
[08:08:20] <fread2282> dbaupp: yeah, so just to be 100% sure, the `.value` part of `cast::copy_lifetime(self, &(*self.ptr).value)` is just because borrow needs to return the value?
[08:08:29] <dbaupp> fread2282: right
[08:08:41] <fread2282> dbaupp: cool
[08:08:44] <cmr> ChrisMorgan: I found a brokenness with the vim highlighting: http://i.imgur.com/iJAoqUN.png (https://github.com/cmr/rustdoc_ng/blob/master/jsonify.rs#L66)
[08:08:57] *** Joins: doomlord (doomlod@moz-13E69BC8.range86-180.btcentralplus.com)
[08:14:17] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.1)
[08:15:20] *** Joins: Ms2ger (Ms2ger@54323780.629A11C5.3773EA9F.IP)
[08:15:40] <ChrisMorgan> cmr: where's the brokenness there?
[08:16:14] <cmr> ChrisMorgan: variant name stops being highlighted after &Vector
[08:16:37] <cmr> the indentation on those arms was also way too deep
[08:16:40] <ChrisMorgan> Ah. That's because they aren't followed by ()
[08:17:06] <cmr> ahhh
[08:17:44] <jensnockert> Urghâ€¦ I really should fix syntax highlighting for TextMate sometime.
[08:18:09] * jensnockert uses C++ as highlighting scheme, and it doesn't really work at all.
[08:18:10] <ChrisMorgan> That's what was there before. I'm strongly considering changing it about so that an Upper identifier is not treated in that "function call" way.
[08:18:30] * jensnockert hugs ChrisMorgan.
[08:18:56] <ChrisMorgan> cmr: as for the indentation, that's not the indentation my indent script does; use = to reindent it and it'll go to a more reasonable level.
[08:19:16] <ChrisMorgan> jensnockert: TextMate? Come drink the Vim kool-aid! :-)
[08:19:22] <dbaupp> cmr: any new about the bencher being dead? :(
[08:19:41] <jensnockert> I used to use vim, but then I realized that the support for non-english sucks.
[08:20:18] <cmr> dbaupp: yes, it's currently deracked and on the floor. hopefully back up today
[08:20:29] <dbaupp> cmr: oh, wow... why?
[08:20:30] <jensnockert> And I don't want to use another editor for when writing non-programming stuff.
[08:20:50] <cmr> dbaupp: needed to rack another server
[08:20:54] * dbaupp thinks jensnockert should use emacs
[08:20:58] <dbaupp> cmr: aha
[08:21:08] * dbaupp thinks we need more flamewars on #rust
[08:21:11] <dbaupp> :P
[08:21:23] <jensnockert> I have tried emacs, but I just didn't get used to it.
[08:21:39] <ChrisMorgan> jensnockert: what's wrong with Vim's non-English support?
[08:22:01] <jensnockert> ChrisMorgan: If you're using an IME, the escape key doesn't work for starters.
[08:22:02] <ChrisMorgan> Latin languages it's fine with. Outside that, depends on having a suitable monospace font.
[08:22:40] *** Joins: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP)
[08:22:55] <ChrisMorgan> Really? Works fine for me in Ubuntu and I've tested it on Windows some years ago...
[08:23:21] <jensnockert> And you cannot switch modes at all.
[08:23:37] *** Joins: CarpNet (ac@moz-FD24B77.sohonet.co.uk)
[08:23:47] <jensnockert> It treats hitting i as trying to write ã„, for example.
[08:24:19] <jensnockert> Unlike TextMate/Emacs, which have the sense of ignoring input method stuff for all shortcuts and commands.
[08:25:06] <dbaupp> is there a trait that implies a type has no dtor?
[08:25:15] <jensnockert> And I also had a hard time getting greek diacritics to work correctly, but I think that may have been an issue with my system.
[08:25:57] *** Joins: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP)
[08:26:43] <jensnockert> Also never got it to produce a final sigma, but that seems like 50/50 in applications in general.
[08:27:28] *** Joins: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP)
[08:27:40] *** Quits: SimonSapin (simon@moz-D0C2F181.zone2.bethere.co.uk) (Ping timeout)
[08:27:43] *** Parts: Lovot (root@AE31FB56.8153C3BF.F3C9A2D9.IP) ()
[08:27:54] <jensnockert> Does emacs have Rust support?
[08:28:41] <dbaupp> jensnockert: yes
[08:28:59] *** Quits: fread2282 (Mibbit@moz-B64ADAED.nat.asu.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[08:29:04] <jensnockert> Maybe I should try that at some point.
[08:29:09] <dbaupp> jensnockert: https://github.com/mozilla/rust/tree/master/src/etc/emacs (I guess it's Rust has emacs support)
[08:30:54] *** Joins: SimonSapin (simon@moz-D0C2F181.zone2.bethere.co.uk)
[08:30:54] <jensnockert> nmatsakis codes on it, so it should be fine.
[08:31:04] <doomlord> i got a lot further with emacs than vi, but its still got some alien bindings for me. on the plus side, emacs is the only recent editor i've found that matches the keyboard-driven tiled windowing of breif/codewright that i've always missed
[08:31:50] <doomlord> there's cases in emacs i can't fix where you can't press "esc" to cancel something, as its code design predates the widespread availability of this key.
[08:32:00] *** Quits: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP) (Ping timeout)
[08:32:31] <doomlord> (if you try and rebind that.. you always seem to break something .. )
[08:32:31] <dbaupp> hitting C-g repeatedly always seems to work for me?
[08:32:38] <dbaupp> oh
[08:32:39] <cmr> vim has tiled splits, :split and :vsplit (I have keybindings for them hinged off Ctrl-W but I don't know if that's standard or something deep in my vimrc...)
[08:33:15] <jensnockert> doomlord: But they had every other key, http://upload.wikimedia.org/wikipedia/commons/4/47/Space-cadet.jpg
[08:33:17] <doomlord> yes that works. however, no matter how much i want to like emacs.. my fingers are just still too used to 'esc' unfortunately :(
[08:33:24] *** Quits: robn (robn@moz-76B0302C.static.internode.on.net) (Quit: Coyote finally caught me)
[08:33:29] *** Joins: robn (robn@moz-76B0302C.static.internode.on.net)
[08:34:04] <doomlord> i've heard of emacs-users rebinding caps-lock to ctrl which is suppossedly more ergonomic, objectively. (interesting how google have decided caps-lock could serve a better purpose too...)
[08:34:22] <jensnockert> I have capslock rebound to an extra modifier.
[08:34:35] <ChrisMorgan> cmr: <C-W>s and <C-W>v for split is standard
[08:34:48] <jensnockert> I use it for almost all commands I define in anything.
[08:34:59] * ChrisMorgan has rebound Caps Lock to Backspace
[08:35:43] * dbaupp uses capslock to toggle between keyboard layouts
[08:36:02] * jensnockert uses Caps Lock-a for that.
[08:36:26] <doomlord> wow, capslock reprposing seems a lot more common than i had realised :)
[08:37:47] <jensnockert> It is a huge button with no purpose on one of the better spots on the keyboard ;)
[08:37:50] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[08:38:11] <ChrisMorgan> My experience with normal people is that there are three classes of use of Caps Lock: (a) accidental; (b) TYPING EMAILS IN ALL CAPITALS FOR NO APPARENT REASON (I have one person in particular in mind); and (c) because they don't know about Shift (!).
[08:38:21] <doomlord> i'll have to try it sometime
[08:38:32] <ChrisMorgan> Yes, I have actually come across a couple of people in that third class.
[08:38:39] <Eridius> I bind caps-lock to ctrl
[08:38:39] <dbaupp> doomlord: typing emails in all caps? yeah, it's pretty fun!
[08:38:42] <Eridius> (and I'm not an emacs user)
[08:38:59] <ChrisMorgan> s/APPARENT/APARRENT/\
[08:39:04] <Eridius> I know a guy who presses caps lock for every capital letter, because he claims it's faster than using shift
[08:39:38] <jensnockert> My old girlfriend used sticky keysâ€¦
[08:39:39] <ChrisMorgan> Eridius: I guess I can alter the definition of my third class to "not knowing or not desiring to use"
[08:39:48] <ChrisMorgan> *twitch*
[08:39:49] <jensnockert> She even installed a sticky keys program on her Mac.
[08:40:15] <jensnockert> It made shift work like caps lockâ€¦
[08:40:29] <doomlord> anyone know off hand the relative size of Clang (C++ front-end)  vs LLVM back end
[08:40:41] <jensnockert> doomlord: In what metric?
[08:40:42] <cmr> doomlord, LLVM is really huge
[08:40:48] <cmr> I don't know how large clang is
[08:40:50] <ChrisMorgan> My sister used Sticky Keys for a while with a broken arm. She resisted my trying to get her to learn a single-hand-optimised keyboard layout.
[08:40:57] <doomlord> ^in LOC , if thats a suitable metric for code complexity..
[08:41:19] <jensnockert> ChrisMorgan: Yeah, but that makes a bit more sense.
[08:41:59] <ChrisMorgan> Matter of fact, I suggested it that time. Knew it must be useful for *someone* and finally found the answer.
[08:42:39] <ChrisMorgan> doomlord: http://www.ohloh.net/p/llvm http://www.ohloh.net/p/clang
[08:43:25] <dbaupp> http://www.ohloh.net/p/rust-lang
[08:43:45] * dbaupp doesn't think the LOC count is correct
[08:44:01] <doomlord> clang , 208 manyears ? 1m loc;   llvm: 1.5m loc, 334 manyears
[08:44:14] * ChrisMorgan thinks someone needs to add rust support to ohcount
[08:44:24] * ChrisMorgan added NSIS to it a few years ago
[08:44:41] *** Quits: sankha93 (Instantbir@E490E24E.B6A63309.25B273F5.IP) (Ping timeout)
[08:45:16] *** Quits: acrichto (acrichto@moz-B63D64BD.res.cmu.edu) (Ping timeout)
[08:45:16] *** Quits: mjrosenb (mjrosenb@moz-B3592BDA.club.cc.cmu.edu) (Ping timeout)
[08:45:16] *** Quits: pauls (pauls@moz-BFEF1F22.ccs.neu.edu) (Ping timeout)
[08:45:31] *** Quits: flowsnake (flowsnake@moz-1918C33E.aztw.cable.virginmedia.com) (Ping timeout)
[08:45:31] *** Quits: bblum (bblum@moz-2B41ACB5.andrew.cmu.edu) (Ping timeout)
[08:45:31] *** Quits: rpearl (rpearl@moz-2B41ACB5.andrew.cmu.edu) (Ping timeout)
[08:45:31] *** Quits: rntz (rntz@moz-C76A8D96.sp.cs.cmu.edu) (Ping timeout)
[08:45:38] * dbaupp nominates ChrisMorgan
[08:45:44] *** Quits: SimonSapin (simon@moz-D0C2F181.zone2.bethere.co.uk) (Ping timeout)
[08:45:45] <doomlord> my opponent thinks that rust is a waste of time because there's no need to throw away the resources that went into C++ sourcecode. my argument is (a) languages still leverage & build on eachother, (b) we dont throw anything away as we can still bind to libraries
[08:46:04] *** Joins: rntz (rntz@moz-C76A8D96.sp.cs.cmu.edu)
[08:46:06] *** Joins: pauls (pauls@moz-BFEF1F22.ccs.neu.edu)
[08:46:19] *** Joins: rpearl (rpearl@moz-2B41ACB5.andrew.cmu.edu)
[08:46:19] *** Joins: bblum (bblum@moz-2B41ACB5.andrew.cmu.edu)
[08:46:33] <doomlord> plus rust would make people better c++ programmers if they had to go back :)
[08:46:34] <ChrisMorgan> ohcount looks to have stalled yet again...
[08:46:52] <doener> ChrisMorgan: before I forget again, thanks for the suggestions on the vim RustRun() function! Didn't get around to improve it yet
[08:47:06] <ChrisMorgan> You're welcome.
[08:48:09] <dbaupp> doomlord: is the same lpapp(?) person?
[08:48:14] <doomlord> yes
[08:49:16] <dbaupp> It's probably more productive to saw off your own arm or something :/
[08:49:30] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[08:49:41] *** Joins: flowsnake (flowsnake@moz-1918C33E.aztw.cable.virginmedia.com)
[08:50:38] *** Joins: mjrosenb (mjrosenb@moz-B3592BDA.club.cc.cmu.edu)
[08:51:22] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[08:51:31] *** Joins: acrichto_ (acrichto@moz-B63D64BD.res.cmu.edu)
[08:52:19] <heftig> hm, could you bindgen using libraries with debug information? and would that be easier than generating from C/C++ headers?
[08:53:04] *** Parts: cmr (moznet@moz-EC676DFE.members.linode.com) (Leaving)
[08:53:07] *** Joins: cmr (moznet@moz-EC676DFE.members.linode.com)
[08:53:19] <cmr> heftig, how often do you have a library with debuginfo, compared to headers?
[08:54:00] <jensnockert> Also, a lot of constants would not appear in the debuginfo.
[08:54:00] <heftig> cmr: just wondering
[08:54:08] <cmr> I think it'd be possible
[08:54:11] <cmr> not positive
[08:54:17] <jensnockert> While I assume clang-magic could parse out them.
[08:54:19] <heftig> I noticed the lvc's "abi compliance checker" moved to using debug info
[08:56:43] <jensnockert> Oh, Windows, how I love thee "You need ~2000MB to install this, but the selected disk only has ~500000MB of space available"
[08:57:11] <jensnockert> Not that it is M$ or Windows fault.
[08:58:02] *** Joins: z0w0 (zack@A76ECE44.E8D776F0.D76C0449.IP)
[08:59:18] *** zz_kimundi is now known as kimundi
[09:01:21] <doomlord> a lot of my interest in rust comes from observations about ways i think c++ breaks programmers ability to work with eachother
[09:02:21] <doomlord> too much context
[09:02:38] <ChrisMorgan> What? How did I get a segfault? A SIGSEGV emanating from Rust code?
[09:04:38] <ChrisMorgan> `#0  0x0000000000000000 in ?? ()` `#1  0x000000000040f469 in server::__extensions__::serve_forever_4898::anon::expr_fn_6962 ()`
[09:05:31] <klutzy> i've heard currently closures cannot capture illegal borrow thus can segfault
[09:07:10] <klutzy> like this https://github.com/mozilla/rust/issues/7810
[09:08:37] *** Joins: davbo (dave@moz-3FFA637C.oucs.ox.ac.uk)
[09:10:08] *** Quits: doomlord (doomlod@moz-13E69BC8.range86-180.btcentralplus.com) (Quit: Leaving)
[09:11:08] <ChrisMorgan> The closure bit had been a mere convenience, so I've gone back to the old style I had for the moment and it all works properly again. Thanks.
[09:13:07] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[09:15:09] <ChrisMorgan> dbaupp: increased from around 2,000 to just over 2,400 requests per second by reading 1024 bytes of the request (that will be the entire request) at once and buffering it myself, though still then reading it byte by byte from that in a moderately inefficient manner. Haven't figured out how much time is spent in request reading and how much in response writing yet.
[09:18:06] *** Joins: SimonSapin (simon@88F51059.F3BBB17D.144F44FA.IP)
[09:18:37] <ChrisMorgan> Over 3500 per second on concurrency of 2. Concurrency of 10 makes the server stop responding properly after a few tens of thousands rapid requests (precise breaking point unknown). Could be server or could be ab causing it, but not good.
[09:20:22] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[09:20:27] *** Joins: nawfel (Mibbit@221B85BA.F451898B.DFAB1F33.IP)
[09:21:47] <nawfel> rusti: "hello?"
[09:22:54] <nawfel> hello, where can i find rusti? please
[09:23:05] *** Joins: mye (mye@moz-9A61833B.dip0.t-ipconnect.de)
[09:26:05] <kimundi> nawfel: rusti-the-irc-bot runs on strcats laptop, which is not allways connected
[09:26:29] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[09:26:52] <kimundi> nawfel: If it's not online, you have to use the actualy rust prograqms on your computer :)
[09:27:21] <nawfel> thx kimundi :)
[09:27:53] <kimundi> (There is talk about making a web interface for the same machinery rusti-the-bot runs on, but it'S not yet done)
[09:28:45] *** Joins: ghrust (ghrust@C621748.6A2AE50.F3114085.IP)
[09:28:45] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/zBayeg
[09:28:45] *** Parts: ghrust (ghrust@C621748.6A2AE50.F3114085.IP) ()
[09:29:28] <nawfel> happy for that (not for it being undone.... you know...) thx again
[09:29:42] *** Joins: mib_4waqwt (Mibbit@moz-BEF318E8.vie.surfer.at)
[09:30:50] *** Quits: nawfel (Mibbit@221B85BA.F451898B.DFAB1F33.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[09:31:45] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[09:31:45] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/nY74lA
[09:31:45] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[09:31:47] *** Joins: ghrust (ghrust@AD60B2E3.6A2AE50.F3114085.IP)
[09:31:47] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/wXnOfg
[09:31:47] <ghrust> 13rust/06auto 14d5f53c7 15Alex Crichton: Provide more useful messages when tests are given -h or --help...
[09:31:47] <ghrust> 13rust/06auto 14c9e9dd3 15bors: auto merge of #7840 : alexcrichton/rust/better-test-help, r=huonw...
[09:31:48] *** Parts: ghrust (ghrust@AD60B2E3.6A2AE50.F3114085.IP) ()
[09:32:10] *** Quits: mib_4waqwt (Mibbit@moz-BEF318E8.vie.surfer.at) (Quit: http://www.mibbit.com ajax IRC Client)
[09:32:39] *** Quits: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com) (Input/output error)
[09:37:32] *** kimundi is now known as zz_kimundi
[09:37:45] *** Joins: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP)
[09:37:45] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14c9e9dd3 to 14a93244d: 02http://git.io/N3iJvQ
[09:37:45] *** Parts: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP) ()
[09:37:47] *** Joins: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP)
[09:37:47] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/S6FJBA
[09:37:47] <ghrust> 13rust/06auto 14948a624 15Alex Crichton: Add a `get_mut` method for TLS...
[09:37:47] <ghrust> 13rust/06auto 14c032ddd 15bors: auto merge of #7841 : alexcrichton/rust/tls++, r=huonw...
[09:37:48] *** Parts: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP) ()
[09:38:16] <pnkfelix> acrichto_: ping
[09:39:27] *** Quits: km (quassel@FDBAF0A0.DBF71E41.29C67456.IP) (Ping timeout)
[09:40:30] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[09:50:00] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[09:50:26] <dbaupp> erickt: ping
[09:51:56] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[09:52:07] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Ping timeout)
[09:53:36] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[09:54:35] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[09:56:18] *** Joins: sigma (sigma@51C589B3.EF2694B5.DFAC6AA7.IP)
[09:56:34] *** Joins: Earnestly (earnest@2AB30F53.FB5005.2BCC804A.IP)
[09:58:59] *** Quits: sigma (sigma@51C589B3.EF2694B5.DFAC6AA7.IP) (Quit: Leaving.)
[09:59:00] *** Joins: sigma (sigma@51C589B3.EF2694B5.DFAC6AA7.IP)
[10:00:50] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Ping timeout)
[10:09:45] *** Joins: sankha93 (Instantbir@E8C69F6B.D948C092.E7DAB6F9.IP)
[10:16:01] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[10:16:16] *** Joins: doomlord_ (servitor@moz-13E69BC8.range86-180.btcentralplus.com)
[10:29:42] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[10:30:30] *** Joins: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP)
[10:30:46] *** zz_kimundi is now known as kimundi
[10:35:18] *** Joins: Liothen (liothen@moz-32BDFBCC.spkn.qwest.net)
[10:35:27] *** Quits: Uther (Instantbir@moz-1B244B05.hfc.dyn.abo.bbox.fr) (Ping timeout)
[10:35:54] *** Joins: moslemmasry (muslimmasr@61E15AA0.4186B72C.563BE9DB.IP)
[10:35:54] *** Quits: dwhyte (dwhyte@ED9190FB.B72E355F.7BF4A4B0.IP) (Quit: Leaving.)
[10:36:01] *** Quits: moslemmasry (muslimmasr@61E15AA0.4186B72C.563BE9DB.IP) (User has been banned from Mozilla (abuse))
[10:36:42] *** Quits: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP) (Ping timeout)
[10:49:40] *** Quits: KindOne (KindOne@698375B8.8E36DE4.EC6A1518.IP) (Ping timeout)
[10:50:28] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[10:50:50] *** Quits: sankha93 (Instantbir@E8C69F6B.D948C092.E7DAB6F9.IP) (Ping timeout)
[10:52:06] <doener> anyone else getting "undefined symbol: _ZN2io14__extensions__10meth_174834read17_313c82ad8c8061e56_08preE" when building stage1 libextra?
[10:52:16] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[10:52:40] <dbaupp> doener: no
[10:52:49] <dbaupp> (but i'm not on the very tip of master.)
[10:52:53] <doener> I'm pretty sure building the same version of rust worked yesterday, but the packages that apt updated since then don't seem suspicious
[10:53:29] *** Joins: KindOne (KindOne@moz-B6E1F784.dynamic.ip.windstream.net)
[10:54:24] *** Joins: sankha93 (Instantbir@F7C28E4F.CAFD56BA.25B273F5.IP)
[10:54:35] *** Joins: fabiand (fabiand@moz-8DE1A8B.adsl.alicedsl.de)
[10:55:49] *** Quits: sankha93 (Instantbir@F7C28E4F.CAFD56BA.25B273F5.IP) (Quit: He will be back!)
[10:57:31] *** Joins: sk (sk@A298A44C.54A580E3.78DD174B.IP)
[10:57:58] *** Quits: StarLight (StarLight@moz-CBF51929.dynamic.avangarddsl.ru) (Ping timeout)
[10:59:01] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[11:01:57] *** Quits: darkf (darkf@moz-F9058B8A.net) (Ping timeout)
[11:02:41] *** Joins: darkf (darkf@moz-F9058B8A.net)
[11:04:56] <doomlord_> damn my indecision :) continue hacking rust-bindgen, or enhance swig and make something to further rust-ify C interfaces from naming conventions
[11:05:36] *** Joins: StarLight (StarLight@moz-C8C82E57.pppoe.avangarddsl.ru)
[11:05:43] <doomlord_> ( detect functions with structname_blahblah(structname* args) and stuff them in an impl .. etc )
[11:06:08] <doomlord_> (and rely on improving general purpose C++ -> C interface generators )
[11:07:27] *** kimundi is now known as zz_kimundi
[11:13:46] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[11:13:46] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/S6FJBA
[11:13:46] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[11:16:44] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[11:16:44] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/Nemf-g
[11:16:44] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[11:16:45] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[11:16:45] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/tOWyMg
[11:16:45] <ghrust> 13rust/06auto 14ad3a697 15OGINO Masanori: Add project information to l10n templates.
[11:16:45] <ghrust> 13rust/06auto 149da42dc 15bors: auto merge of #7835 : omasanori/rust/l10n-improvement, r=pnkfelix...
[11:16:46] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[11:19:35] <doener> hrm, can't reproduce the problem on another box also running Debian Sid, weird
[11:25:03] *** Quits: z0w0 (zack@A76ECE44.E8D776F0.D76C0449.IP) (Quit: z0w0)
[11:25:19] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[11:25:23] *** Joins: z0w0 (zack@A76ECE44.E8D776F0.D76C0449.IP)
[11:25:37] *** Joins: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net)
[11:25:55] <orshem> anybody around right now? i have a few questions regarding vectors
[11:26:09] <orshem> how do i create a new vectors of n size?
[11:26:24] <orshem> does it grow automatically?
[11:26:29] <engla> vec::from_fn
[11:26:51] <engla> or just  ~[0, ..N] if N is a constant
[11:27:04] <engla> vec is a dynamic array yes
[11:28:01] <doener> argh... I had some old libstd...so from benchmarking runs in my root build directory which it decided to use instead of the one it was supposed to build
[11:28:21] *** Joins: bytbox (s@moz-DC83764A.washdc.fios.verizon.net)
[11:28:26] <orshem> engla, thx
[11:29:11] <orshem> i've tried to read the source but i get lost in the lifetime & generic variables
[11:29:44] <dbaupp> gosh... the attr handling code allocates so much.
[11:29:48] * dbaupp fixes it
[11:30:42] *** Parts: Phlogistique (no@moz-B2BEB013.net) ()
[11:31:29] *** Joins: donri (dag@moz-9BB61102.tbcn.telia.com)
[11:34:36] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[11:36:40] *** Joins: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net)
[11:39:03] *** Joins: moslemmasry (muslimmasr@61E15AA0.4186B72C.563BE9DB.IP)
[11:39:07] *** Quits: moslemmasry (muslimmasr@61E15AA0.4186B72C.563BE9DB.IP) (User has been banned from Mozilla (abuse))
[11:42:53] *** Quits: _Vi (vi@527C345F.497AA854.B16B3BE6.IP) (Ping timeout)
[11:43:12] *** Quits: orshem (orshem@81F00A95.B9DE554A.EB50AD2C.IP) (Quit: Leaving)
[11:43:39] *** Joins: timm (timm@moz-37B954AF.superkabel.de)
[11:45:02] *** Joins: novabyte (Instantbir@moz-3E0F9699.cable.virginmedia.com)
[11:46:18] *** Quits: bytbox (s@moz-DC83764A.washdc.fios.verizon.net) (Ping timeout)
[11:46:24] *** Quits: z0w0 (zack@A76ECE44.E8D776F0.D76C0449.IP) (Client exited)
[11:50:35] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[11:50:56] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[11:52:50] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[11:53:09] *** Quits: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP) (Quit: baiba, back in at most 2 weeks)
[11:54:45] *** Joins: webber46 (webber46@moz-98D2F3C5.cust.bredband2.com)
[11:54:55] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[11:56:18] *** Joins: mulemmasr (muslimmasr@61E15AA0.4186B72C.563BE9DB.IP)
[11:56:39] *** Quits: mulemmasr (muslimmasr@61E15AA0.4186B72C.563BE9DB.IP) (User has been banned from Mozilla (abuse))
[11:57:07] *** Joins: MaikKlein1 (maik@moz-4C6F98CE.dip0.t-ipconnect.de)
[12:02:54] *** Joins: BitPuffin (quassel@moz-49828767.cust.tele2.se)
[12:05:14] *** Joins: bytbox (s@moz-DC83764A.washdc.fios.verizon.net)
[12:06:08] *** Joins: anri (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net)
[12:06:37] *** Joins: LU324 (stuff@moz-A17E9A7B.dyn.embarqhsd.net)
[12:09:24] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[12:16:14] *** zz_kimundi is now known as kimundi
[12:17:10] *** Joins: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[12:17:10] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[12:19:12] *** Joins: mulemmasr (muslimmasr@61E15AA0.4186B72C.563BE9DB.IP)
[12:19:15] *** Quits: mulemmasr (muslimmasr@61E15AA0.4186B72C.563BE9DB.IP) (User has been banned from Mozilla (abuse))
[12:21:19] *** Quits: bytbox (s@moz-DC83764A.washdc.fios.verizon.net) (Ping timeout)
[12:22:39] <kimundi> rust-buildbot: dance
[12:22:40] <rust-buildbot> <(^.^<)
[12:22:41] <rust-buildbot> <(^.^)>
[12:22:42] <rust-buildbot> (>^.^)>
[12:22:42] <rust-buildbot> (7^.^)7
[12:22:44] <rust-buildbot> (>^.^<)
[12:23:03] <kimundi> [o__o]: ping
[12:23:03] <[o__o]> Are you in need of my services, kimundi?
[12:23:28] <kimundi> [o__o]: dance
[12:23:31] *** Joins: bytbox (s@moz-DC83764A.washdc.fios.verizon.net)
[12:26:05] *** Joins: maxli (maxli@moz-AC89B3C8.vlan445.asr1.yyz1.gblx.net)
[12:34:04] *** Quits: ssbr (ssbr@moz-141F89C6.block0.gvtc.com) (Ping timeout)
[12:35:25] *** Joins: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP)
[12:36:43] *** Joins: victorporof (victorporo@A15909FD.8E4D8E22.4A6B528C.IP)
[12:37:14] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[12:41:07] *** Joins: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP)
[12:41:10] *** Quits: anri (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net) (Quit: anri)
[12:41:35] *** Quits: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP) (Ping timeout)
[12:49:36] *** Quits: MaikKlein1 (maik@moz-4C6F98CE.dip0.t-ipconnect.de) (Ping timeout)
[12:51:24] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[12:52:46] *** Joins: ghrust (ghrust@CFE85B59.6A2AE50.F3114085.IP)
[12:52:46] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/tOWyMg
[12:52:46] *** Parts: ghrust (ghrust@CFE85B59.6A2AE50.F3114085.IP) ()
[12:53:08] *** Joins: jeff (jeff@moz-F81F6C4E.nyc.biz.rr.com)
[12:53:17] *** Joins: ssbr (ssbr@moz-141F89C6.block0.gvtc.com)
[12:53:21] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[12:53:57] *** Quits: reyre (reyre@moz-9002CDDA.cpe.net.cable.rogers.com) (Client exited)
[12:54:37] *** Joins: doomlord (doomlod@moz-13E69BC8.range86-180.btcentralplus.com)
[12:55:15] *** Quits: victorporof (victorporo@A15909FD.8E4D8E22.4A6B528C.IP) (Connection reset by peer)
[12:55:44] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[12:55:44] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/BD_pEQ
[12:55:44] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[12:55:46] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[12:55:46] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/SQjZJA
[12:55:46] <ghrust> 13rust/06auto 140fd4d5d 15Alex Crichton: Sort lint attributes to print them in a more sane way...
[12:55:46] <ghrust> 13rust/06auto 1493c270c 15bors: auto merge of #7843 : alexcrichton/rust/better-lint-help, r=huonw...
[12:55:47] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[13:02:24] *** Quits: novabyte (Instantbir@moz-3E0F9699.cable.virginmedia.com) (Quit: bye bye)
[13:06:32] *** Joins: jesse99 (jesse99@moz-F226420.hsd1.wa.comcast.net)
[13:07:27] *** Quits: jesse99 (jesse99@moz-F226420.hsd1.wa.comcast.net) (Quit: jesse99)
[13:07:29] *** Joins: jesse99 (jesse99@moz-F226420.hsd1.wa.comcast.net)
[13:09:34] *** Joins: cowboyd (cowboyd@moz-1BD02A1E.sw.biz.rr.com)
[13:14:21] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[13:15:49] *** Joins: saml (sam@moz-14C16814.cst.lightpath.net)
[13:22:53] *** Quits: KindOne (KindOne@moz-B6E1F784.dynamic.ip.windstream.net) (Ping timeout)
[13:26:44] *** Joins: KindOne (KindOne@moz-16B3D182.dynamic.ip.windstream.net)
[13:28:35] *** Quits: jfbk (textual@moz-EEA9CFB3.nyc.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[13:35:17] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Connection reset by peer)
[13:35:20] *** Joins: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net)
[13:35:52] *** Quits: jeff (jeff@moz-F81F6C4E.nyc.biz.rr.com) (Quit: jeff)
[13:36:01] *** Joins: mw (mw@moz-7586EEA0.adsl.highway.telekom.at)
[13:36:44] *** Parts: mw (mw@moz-7586EEA0.adsl.highway.telekom.at) ()
[13:38:22] *** Joins: MaikKlein1 (maik@moz-4C6F98CE.dip0.t-ipconnect.de)
[13:39:12] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[13:39:14] *** Joins: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca)
[13:39:33] *** Quits: Egbert9e9 (un@moz-B4B0CE25.inter.net.il) (Ping timeout)
[13:41:27] *** Joins: Azdle (Azdle@moz-B334B496.hfc.comcastbusiness.net)
[13:43:05] *** Quits: bytbox (s@moz-DC83764A.washdc.fios.verizon.net) (Quit: Lost terminal)
[13:44:11] *** Joins: reyre (reyre@86C3727C.33EE9F8A.1139E686.IP)
[13:44:36] *** Joins: bytbox (s@moz-DC83764A.washdc.fios.verizon.net)
[13:44:58] *** Quits: geomyidae (geomyidae@DD6F7E3A.21468E9A.30200F38.IP) (Ping timeout)
[13:46:06] *** Joins: jeff (jeff@moz-F81F6C4E.nyc.biz.rr.com)
[13:47:08] *** Quits: DeokjinKim (Mibbit@B4104EBB.3CC170B1.1E14B209.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[13:51:51] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[13:52:12] <MaikKlein1> rust-buildbot: dance
[13:52:14] <rust-buildbot> <(^.^<)
[13:52:15] <rust-buildbot> <(^.^)>
[13:52:16] <rust-buildbot> (>^.^)>
[13:52:17] <rust-buildbot> (7^.^)7
[13:52:18] <rust-buildbot> (>^.^<)
[13:52:18] *** Joins: mreedell (mreedell@moz-CA456699.hsd1.vt.comcast.net)
[13:52:22] <MaikKlein1> I see
[13:53:00] <MaikKlein1> busy busy rust team
[13:53:38] *** Joins: sankha93 (Instantbir@B3D2983B.18989014.F44414AF.IP)
[13:53:49] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[13:54:45] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: Leaving.)
[13:57:07] *** Quits: mreedell (mreedell@moz-CA456699.hsd1.vt.comcast.net) (Quit: Textual IRC Client: http://www.textualapp.com/)
[13:59:23] *** Quits: thpickert (thpickert@moz-24816453.tng.de) (Ping timeout)
[14:00:36] *** Joins: jedestep (jedestep@34641662.FB4DE631.66C78B76.IP)
[14:00:45] *** Quits: jaen (jaen@moz-8D6137D6.neoplus.adsl.tpnet.pl) (Ping timeout)
[14:01:00] *** Quits: jedestep (jedestep@34641662.FB4DE631.66C78B76.IP) (Quit: leaving)
[14:01:04] *** Joins: _Vi (vi@527C345F.497AA854.B16B3BE6.IP)
[14:01:13] *** Joins: jedestep (jedestep@34641662.FB4DE631.66C78B76.IP)
[14:03:39] *** Quits: MaikKlein1 (maik@moz-4C6F98CE.dip0.t-ipconnect.de) (Ping timeout)
[14:07:27] *** Joins: lmandel (lmandel@8B192B20.1F93A08E.ADB88A9.IP)
[14:11:25] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[14:11:25] *** ChanServ sets mode: +o dherman
[14:30:49] *** Joins: milinda (milinda@moz-A7272ABE.dhcp-bl.indiana.edu)
[14:31:45] *** Joins: ghrust (ghrust@C621748.6A2AE50.F3114085.IP)
[14:31:45] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/SQjZJA
[14:31:45] *** Parts: ghrust (ghrust@C621748.6A2AE50.F3114085.IP) ()
[14:32:24] *** Joins: mib_0gpx0h (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP)
[14:32:41] <cmr> "Add dependence arc from running rustc to its libraries."
[14:32:47] <cmr> is that sentence coherent?
[14:33:34] <sigma> assuming you mean from a "running instance of rustc to it's libraries" yeh
[14:34:06] <cmr> it's from https://github.com/mozilla/rust/pull/7820
[14:34:43] *** Joins: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP)
[14:34:43] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/pIXWLQ
[14:34:43] *** Parts: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP) ()
[14:34:43] *** Joins: ghrust (ghrust@E7A4CCE2.6A2AE50.F3114085.IP)
[14:34:44] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/LTOQLQ
[14:34:44] <ghrust> 13rust/06auto 14040e470 15Huon Wilson: rustc: implement a `#[no_implicit_prelude]` attribute....
[14:34:44] <ghrust> 13rust/06auto 145921feb 15bors: auto merge of #7844 : huonw/rust/no-implicit-prelude, r=alexcrichton...
[14:34:44] *** Parts: ghrust (ghrust@E7A4CCE2.6A2AE50.F3114085.IP) ()
[14:35:16] <ChrisMorgan> Is && ambiguous? (Can it, with the appropriate tokens around it, be a double-borrowing pointer?)
[14:35:35] <dbaupp> ChrisMorgan: no, it's always and
[14:35:54] <ChrisMorgan> Good. It's a pity || isn't always or.
[14:37:12] *** Quits: cowboyd (cowboyd@moz-1BD02A1E.sw.biz.rr.com) (Client exited)
[14:37:29] <mib_0gpx0h> what determines if something fulfills Send?
[14:37:47] <cmr> mib_0gpx0h: it cannot contain any &T or @T, recursively.
[14:38:04] <mib_0gpx0h> ah I see, thanks!
[14:38:19] <cmr> (or &mut and @mut, obviously)
[14:38:51] <mib_0gpx0h> cmr right.. but ~ should be OK?
[14:39:12] <mib_0gpx0h> since those are owned?
[14:39:18] <cmr> mib_0gpx0h: yep
[14:39:27] <jedestep> iirc, owned types should be Send because they can become owned by the receiver
[14:39:50] <mib_0gpx0h> cmr thanks for the help
[14:40:17] <jedestep> mib_0gpx0h: hopefully at some point we can clean up the @'s :I
[14:40:21] *** Joins: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP)
[14:42:34] *** Quits: jeff (jeff@moz-F81F6C4E.nyc.biz.rr.com) (Ping timeout)
[14:44:00] *** Joins: jeff (jeff@moz-F81F6C4E.nyc.biz.rr.com)
[14:46:31] *** Quits: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP) (Ping timeout)
[14:46:39] *** Joins: cornelius (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP)
[14:48:36] <ChrisMorgan> I want to do high-resolution timing of my code. Anything in std/extra?
[14:48:54] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[14:49:29] <cmr> extra::time::precise_time_ns()
[14:50:14] <ChrisMorgan> Danke!
[14:50:35] *** Joins: victorporof (victorporo@95520E16.124F9E.4A6B528C.IP)
[14:50:38] <cmr> ChrisMorgan: have you tossed your HTTP server into perf to see where the bottleneck is yet?
[14:51:02] <ChrisMorgan> cmr: can't get perf on account of using a mainline kernel
[14:51:31] <cmr> ChrisMorgan: what is mainline in this context?
[14:51:32] <ChrisMorgan> (I'm using a mainline kernel on account of a kernel bug which led to the fan going at full speed after first sleep.)
[14:51:42] <dbaupp> ChrisMorgan: can't you get mainline perf?/build it yourself?
[14:51:45] <ChrisMorgan> Meaning, not a properly supported one from Canonical.
[14:51:53] <ChrisMorgan> dbaupp: haven't got to figuring that out
[14:51:57] <cmr> heh!
[14:52:20] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[14:52:29] *** Joins: km (quassel@FDBAF0A0.DBF71E41.29C67456.IP)
[14:52:32] <dbaupp> gah, rustc, stop complaining at me already!
[14:52:51] <cmr> You want CONFIG_PERF_EVENTS=y
[14:53:03] <cmr> it's in General setup > Kernel Performance Events And Counters
[14:53:17] <ChrisMorgan> cmr: [blank stare]
[14:53:36] <cmr> (use `make nconfig` or `make xconfig` for a nice configuration interface)
[14:53:38] *** Quits: PeterSP (peter@moz-4DAF5777.bstnma.fios.verizon.net) (Ping timeout)
[14:53:38] *** Quits: bytbox (s@moz-DC83764A.washdc.fios.verizon.net) (Ping timeout)
[14:54:06] <ChrisMorgan> `perf` requires an appropriate linux-tools-[kernel-version-number] package, but the PPA at http://kernel.ubuntu.com/~kernel-ppa/mainline/ doesn't include linux-tools packages
[14:54:09] *** Joins: cowboyd (cowboyd@1D8844A7.1B729417.CEE440B6.IP)
[14:54:17] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[14:54:41] <cmr> oh
[14:56:02] <dbaupp> ChrisMorgan: clearly the solution is to use a distro that has the updated kernel
[14:56:15] <cmr> you can download a kernel tarball from kernel.org, cd tools/perf, run make
[14:56:24] <dbaupp> because reinstalling an operating system is exactly the best solution to profiling a web server
[14:57:47] <ChrisMorgan> This all sounds like work :D
[14:57:57] <cmr> And writing a web server isn't? :P
[14:59:00] *** Joins: PeterSP (peter@moz-4DAF5777.bstnma.fios.verizon.net)
[15:00:41] <ChrisMorgan> That's different. Progress there is measurable.
[15:00:47] <ChrisMorgan> ;-)
[15:01:32] <cmr> the steam summer sale combined with steam for linux has basically killed my productivity as of late
[15:02:45] *** Quits: cjh (chellmuth@moz-45C21C42.compute-1.amazonaws.com) (Client exited)
[15:02:53] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Ping timeout)
[15:06:07] *** Quits: BitPuffin (quassel@moz-49828767.cust.tele2.se) (Ping timeout)
[15:06:08] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[15:06:20] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Textual IRC Client: www.textualapp.com)
[15:08:11] <ChrisMorgan> Oh, goody. Reading the request is taking almost all of the time! That is *exactly* what I wanted to hear, because I *know* it's written in such a way that it will be slow.
[15:08:44] <jedestep> steam for linux is missing just enough games that i still run windows on my home computer
[15:09:05] <cmr> I dual boot too, but it has enough good games that I'm quite content infrequently rebooting
[15:09:34] <dbaupp> ChrisMorgan: awesome!
[15:09:46] <jedestep> i should have set up a dual boot, i even reinstalled windows recently
[15:09:48] <dbaupp> ChrisMorgan: you're using newrt, right?
[15:09:52] <ChrisMorgan> Yes.
[15:11:00] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[15:11:09] <ChrisMorgan> Old runtime is definitely slower; I ran another web server someone wrote (still fairly simple) which actually used the old RT properly (rather than my convoluted adapter, which makes it about five times slower) and it's still something like five times as slow as the new one with my code.
[15:11:16] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[15:11:55] <dbaupp> yeah, old-io has layers upon layers of badness
[15:12:10] *** Joins: bytbox (s@moz-DC83764A.washdc.fios.verizon.net)
[15:12:31] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Textual IRC Client: www.textualapp.com)
[15:17:01] *** Joins: pcwalton (pcwalton@moz-481A040C.hsd1.ca.comcast.net)
[15:17:01] *** ChanServ sets mode: +o pcwalton
[15:21:56] *** Joins: eholk (eholk@moz-4FD9C8.uconnect.utah.edu)
[15:22:29] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[15:24:22] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[15:25:12] *** Quits: bytbox (s@moz-DC83764A.washdc.fios.verizon.net) (Ping timeout)
[15:27:19] *** kimundi is now known as zz_kimundi
[15:30:04] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[15:32:04] *** Quits: fabiand (fabiand@moz-8DE1A8B.adsl.alicedsl.de) (Quit: Verlassend)
[15:36:21] *** Quits: Houm (Houm@moz-25669AA8.fbx.proxad.net) (Input/output error)
[15:37:25] <cmr> doomlord_: http://www.yosefk.com/blog/c-as-an-intermediate-language.html
[15:39:11] <doomlord_> interesting :)
[15:40:18] *** Joins: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net)
[15:40:38] *** Quits: echristo (echristo@moz-1892C634.hsd1.ca.comcast.net) (Quit: echristo)
[15:40:54] <doomlord_> (i liked the idea of compiling to c, but eveyone who's actually into compilers says its better to use something dedicated)
[15:44:36] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[15:45:18] *** Joins: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[15:45:26] <ChrisMorgan> Hmm... RUST_LOG=::rt::backtrace isn't working with new rt for task failure, should it perhaps be ::std::rt::backtrace?
[15:45:39] <ChrisMorgan> No... something else?
[15:47:49] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[15:48:29] *** Quits: mark_edward (quassel@moz-4A9A2F15.dynamic.utc.edu) (Ping timeout)
[15:49:22] <ChrisMorgan> For some reason, my SharedChan is getting closed after the first send. I access it in another task, as perf_ch.clone().send(...). That style of thing worked in my adapter, but doesn't seem to be working here?
[15:49:53] *** Quits: pcwalton (pcwalton@moz-481A040C.hsd1.ca.comcast.net) (Quit: pcwalton)
[15:51:02] *** Quits: milinda (milinda@moz-A7272ABE.dhcp-bl.indiana.edu) (Input/output error)
[15:51:52] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[15:52:51] <dbaupp> acrichto_: ping
[15:53:05] <SiegeLord> Maybe we should compile Rust to Rust
[15:53:31] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[15:53:32] *** Joins: pcwalton (pcwalton@moz-481A040C.hsd1.ca.comcast.net)
[15:53:32] *** ChanServ sets mode: +o pcwalton
[15:56:30] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[15:56:30] <ghrust> 01[13rust01] 15alexcrichton 04force-pushed 06master from 1493c270c to 14f8af720: 02http://git.io/V2xBBQ
[15:56:30] <ghrust> 13rust/06master 14f8af720 15Alex Crichton: Add documentation about mutable statics to rust.md
[15:56:30] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[15:56:39] *** Joins: Kruppe (user@moz-4DDA8AB8.uwaterloo.ca)
[15:57:02] <dbaupp> acrichto_: I think you should fix that... :S
[15:57:13] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[15:57:14] <ghrust> 01[13rust01] 15alexcrichton 04force-pushed 06master from 14f8af720 to 148885b74: 02http://git.io/V2xBBQ
[15:57:14] <ghrust> 13rust/06master 148885b74 15Alex Crichton: Add documentation about mutable statics to rust.md
[15:57:14] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[15:58:16] <acrichto_> gah no!
[15:58:37] *** Joins: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP)
[15:58:37] <ghrust> 01[13rust01] 15alexcrichton 04force-pushed 06master from 148885b74 to 149db1903: 02http://git.io/V2xBBQ
[15:58:37] *** Parts: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP) ()
[15:58:44] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[15:58:44] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 145921feb to 149db1903: 02http://git.io/N3iJvQ
[15:58:44] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[15:58:48] *** Joins: ghrust (ghrust@CFE85B59.6A2AE50.F3114085.IP)
[15:58:48] <ghrust> 01[13rust01] 15bors pushed 8 new commits to 06auto: 02http://git.io/EISmww
[15:58:48] <ghrust> 13rust/06auto 143c19f1b 15Felix S. Klock II: Refactored int/uint range code in preparation for change to range_rev semantics....
[15:58:48] <ghrust> 13rust/06auto 14db0a13b 15Felix S. Klock II: Switch over to new range_rev semantics; fix #5270.
[15:58:48] <ghrust> 13rust/06auto 143896d46 15Felix S. Klock II: Fix #5270: another test I did not update properly.
[15:58:50] *** Parts: ghrust (ghrust@CFE85B59.6A2AE50.F3114085.IP) ()
[15:58:53] <acrichto_> ah sorry :(
[15:59:06] <cmr> acrichto_: shouldn't it be 93c270c, not 9db1903:?
[16:00:03] <ChrisMorgan> Hmm. Don't like the sound of this at all. I really can't figure out the difference between a SharedChan scheme which works and one which closes it after the first clone passes out of scope.
[16:00:08] <acrichto_> cmr: yes :( one sec...
[16:00:40] *** Joins: Houm (Houm@moz-25669AA8.fbx.proxad.net)
[16:00:55] <acrichto_> oh dear I can't find that ref in my local copy...
[16:00:58] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Computer has gone to sleep.)
[16:01:19] *** Joins: mark_edward (quassel@moz-4A5B1251.wisolt4.epbfi.com)
[16:02:29] *** Quits: Houm (Houm@moz-25669AA8.fbx.proxad.net) (Ping timeout)
[16:03:51] *** Joins: mw (mw@moz-7586EEA0.adsl.highway.telekom.at)
[16:04:08] <acrichto_> dbaupp: cmr: argh I can't reset to that commit b/c I apparently don't have it and nor can I fetch it
[16:04:42] <cmr> I don't have that commit either, my rust isn't new enough
[16:04:44] *** Joins: Houm (Houm@moz-25669AA8.fbx.proxad.net)
[16:05:21] <cmr> acrichto_: can you maybe edit something in .git and pretend it's their, push it and hope github hasn't run a gc yet?
[16:06:01] *** Quits: mark_edward (quassel@moz-4A5B1251.wisolt4.epbfi.com) (Ping timeout)
[16:06:19] <acrichto_> cmr: I don't think that a gc has run yet... I just can't figure out how to fetch it from the remote (I'm not sure you can?)
[16:06:22] <dbaupp> acrichto_: did your lint-help patch land?
[16:06:28] <acrichto_> dbaupp: no
[16:06:38] <dbaupp> acrichto_: ok, I'm confused...
[16:07:00] <acrichto_> dbaupp: cmr: I could just apply the patches manually
[16:07:01] *** Quits: pcwalton (pcwalton@moz-481A040C.hsd1.ca.comcast.net) (Ping timeout)
[16:07:02] <dbaupp> https://github.com/mozilla/rust/commit/93c270c (for reference)
[16:07:04] <acrichto_> but that loses authorship...
[16:07:18] <engla> acrichto_: you can't fetch a commit id from a remote, only tags and branches (this is by design)
[16:07:19] <dbaupp> I've got that hash
[16:07:24] <acrichto_> dbaupp: oh wait yes it did
[16:07:27] <acrichto_> it was another one that failed
[16:07:43] <dbaupp> ok, I'll force push that master?
[16:07:50] *** Joins: mark_edward (quassel@moz-4A5B1251.wisolt4.epbfi.com)
[16:07:51] <acrichto_> dbaupp: yes please
[16:07:55] <dbaupp> (well, i guess that's a fast forward.)
[16:08:31] <acrichto_> dbaupp: git push -f origin 93c270c:master
[16:08:40] <acrichto_> that's what we want
[16:09:02] * cmr 's origin is his github fork, uses mozilla remote
[16:09:10] <cmr> and I've never accidentally pushed to the wrong repo :P
[16:09:16] *** zz_kimundi is now known as kimundi
[16:09:17] <sigma> yet
[16:09:20] <acrichto_> cmr: yeah I've removed origin as a git@ address now so this doesn't happen again
[16:09:22] *** Quits: jedestep (jedestep@34641662.FB4DE631.66C78B76.IP) (Ping timeout)
[16:09:36] <acrichto_> sorry about this :(
[16:09:41] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[16:09:42] <ghrust> 01[13rust01] 15huonw pushed 12 new commits to 06master: 02http://git.io/zMsTwg
[16:09:42] <ghrust> 13rust/06master 14712ac83 15Austin King: Rename Option swap_unwrap to take_unwrap. Fixes Issue#7764
[16:09:42] <ghrust> 13rust/06master 14ad3a697 15OGINO Masanori: Add project information to l10n templates.
[16:09:42] <ghrust> 13rust/06master 1440f7434 15Graydon Hoare: test: new codegen tests, rename hello.
[16:09:44] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[16:10:07] <acrichto_> dbaupp: thank you so much
[16:10:10] <dbaupp> acrichto_: np
[16:10:16] <engla> my master from yesterday is at 93c270c, which is even later
[16:10:37] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[16:10:41] *** Quits: mark_edward (quassel@moz-4A5B1251.wisolt4.epbfi.com) (Ping timeout)
[16:10:42] <acrichto_> I'm gonna go make sure that this doesn't happen again now
[16:10:46] *** Joins: ghrust (ghrust@C621748.6A2AE50.F3114085.IP)
[16:10:46] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 145ebd729 to 1493c270c: 02http://git.io/N3iJvQ
[16:10:46] *** Parts: ghrust (ghrust@C621748.6A2AE50.F3114085.IP) ()
[16:10:49] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[16:10:49] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/38rT7A
[16:10:49] <ghrust> 13rust/06auto 14040e470 15Huon Wilson: rustc: implement a `#[no_implicit_prelude]` attribute....
[16:10:49] <ghrust> 13rust/06auto 142cd3e0d 15bors: auto merge of #7844 : huonw/rust/no-implicit-prelude, r=alexcrichton...
[16:10:49] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[16:10:52] <dbaupp> acrichto_: (you could put a comment on the HEAD commit so that anyone looking knows why there were 12 commits pushed to master.)
[16:11:40] <dbaupp> anyway, yeah, I have my upstream push url set to "no_push"... had to change it back for this ;)
[16:11:46] * dbaupp changes it back to no_push
[16:12:08] <acrichto_> dbaupp: on the HEAD? does it show anywhere that 12 commits were pushed?
[16:12:19] *** Joins: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com)
[16:12:27] *** Joins: mark_edward (quassel@moz-4A5B1251.wisolt4.epbfi.com)
[16:12:43] <dbaupp> acrichto_: I see commits being pushed on by github front page?
[16:13:19] <dbaupp> *my
[16:13:30] <dbaupp> https://github.com/mozilla/rust/commit/93c270c63d158805a068b8e7ced660df1051c3ca
[16:13:43] <acrichto_> dbaupp: huh I never look at that, but yeah I'll add something
[16:13:50] <dbaupp> acrichto_: wait... maybe not... since it was just changing a branch pointer.
[16:13:55] * dbaupp doesn't know
[16:14:56] <dbaupp> acrichto_: anyway... did you test the optional lint thing cross crate?
[16:15:25] *** Quits: mib_0gpx0h (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[16:15:36] <acrichto_> dbaupp: you mean optional lang items?
[16:15:45] *** Quits: cornelius (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[16:15:48] <dbaupp> acrichto_: ah, yes.
[16:16:32] <acrichto_> dbaupp: not yet, does it not work? It should...
[16:16:36] <dbaupp> acrichto_: because, I have a feeling the .get() in https://github.com/mozilla/rust/blob/master/src/librustc/middle/lang_items.rs#L97 crashes it
[16:16:50] <dbaupp> (each_item is only called by metadata::encode)
[16:16:57] <acrichto_> dbaupp: oh then you're probably right
[16:17:34] * dbaupp has a bug that's causing the lang_items to not get recognised properly
[16:18:28] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[16:18:36] *** Joins: mulemmasr (muslimmasr@E4AB8A06.7093D426.563BE9DB.IP)
[16:18:42] *** Quits: mulemmasr (muslimmasr@E4AB8A06.7093D426.563BE9DB.IP) (User has been banned from Mozilla (abuse))
[16:19:13] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[16:19:59] <cmr> acrichto_: when using *x.unwrap() as you suggested yesterday I get "cannot move out of dereference of & pointer". however, the thing I am stashing in TLS is of very non-trivial size. would using a @T help?
[16:20:08] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[16:20:39] <acrichto_> cmr: if you don't want to use @T, then you have to do your data munging on the TLS value in the closure that you're giving `get`
[16:21:01] <cmr> acrichto_: I don't mind using @T, but it does fix the problem?
[16:21:15] <acrichto_> cmr: yeah, but sadface for @
[16:21:21] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[16:21:35] *** Joins: bytbox (s@moz-A9059E76.wireless.umd.edu)
[16:21:47] <cmr> It's only used in the code that directly touches the AST which is full of @ anyway
[16:21:57] <acrichto_> oh I guess it's not that bad then
[16:22:06] <cmr> (the whole thing is various contexts from rustc, which aren't sendable either)
[16:23:26] *** Joins: tcsc (tcsc@moz-ADC0ED45.hsd1.ct.comcast.net)
[16:23:47] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[16:24:09] *** Joins: graydon (graydon@moz-1C52C8D0.cable.teksavvy.com)
[16:24:09] *** ChanServ sets mode: +qo graydon graydon
[16:26:52] *** Quits: Ralith (ralith@moz-50F3C77.vc.shawcable.net) (Ping timeout)
[16:26:54] <ChrisMorgan> Hmm... TcpStream.write() is expensive. I clearly need to buffer it.
[16:27:11] *** jdm is now known as jemdan
[16:27:15] *** jemdan is now known as jendam
[16:27:17] <Seldaek> ChrisMorgan: even with newrt?
[16:27:27] *** Quits: bytbox (s@moz-A9059E76.wireless.umd.edu) (Ping timeout)
[16:27:30] <dbaupp> ChrisMorgan: are you calling it for every byte?
[16:27:32] <ChrisMorgan> Especially with newrt. Old one had SocketBuf, new one doesn't have any such thing.
[16:27:38] <ChrisMorgan> dbaupp: no, not this time.
[16:27:48] <Seldaek> ChrisMorgan: the old one was awful (even with SocketBuf), but I hoped it'd get better
[16:27:52] <ChrisMorgan> That's only for read. And I fixed that part at the socket level.
[16:28:13] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[16:28:34] *** Joins: dherman (dherman@moz-BBE3ABD.mv.mozilla.com)
[16:28:34] *** ChanServ sets mode: +o dherman
[16:28:40] *** jendam is now known as jdm
[16:29:33] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[16:29:36] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Computer has gone to sleep.)
[16:30:00] *** Joins: MaikKlein1 (maik@moz-4C6F98CE.dip0.t-ipconnect.de)
[16:30:30] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[16:30:52] <ChrisMorgan> Put it this way: to send "HTTP/1.1 %s\r\n" where %s is "200 OK" is about 35Î¼s faster joined and converted to bytes at runtime and written once than written three times, avoiding the string joining.
[16:31:28] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Quit: Jesse)
[16:31:34] *** Joins: ferdinand (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP)
[16:32:53] *** Joins: eschweic (Adium@moz-BBE3ABD.mv.mozilla.com)
[16:34:50] *** Joins: jedestep (jedestep@34641662.FB4DE631.66C78B76.IP)
[16:35:27] <ChrisMorgan> I guess I'll need to write a buffer with flush() and all and a destructor to flush if not done.
[16:36:16] *** Joins: eatkinson (eatkinson@moz-BBE3ABD.mv.mozilla.com)
[16:39:50] *** Quits: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com) (Input/output error)
[16:40:20] *** Quits: victorporof (victorporo@95520E16.124F9E.4A6B528C.IP) (Connection reset by peer)
[16:42:35] *** Joins: jaredhanson (jaredhanso@moz-8323839A.hfc.comcastbusiness.net)
[16:42:49] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[16:44:25] *** Quits: MaikKlein1 (maik@moz-4C6F98CE.dip0.t-ipconnect.de) (Ping timeout)
[16:44:25] *** Joins: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com)
[16:44:51] *** Joins: Ralith (ralith@moz-99DB1CA1.wireless.sfu.ca)
[16:45:17] *** Joins: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP)
[16:45:43] <jasom> Why can't I compare a ~str to a &str?
[16:45:53] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[16:46:00] *** Joins: MaikKlein1 (maik@moz-4C6F98CE.dip0.t-ipconnect.de)
[16:46:21] *** Quits: joone (joone@moz-C50DC051.jf.intel.com) (Client exited)
[16:46:58] <doener> jasom: missing compiler support. &str == ~str should work though
[16:47:38] *** Joins: jensnock_ (jensnocker@moz-8BE55278.customer.t3.se)
[16:47:50] <dbaupp> jasom: the inference for which impl of Eq to use just looks at the left arg, and so it decides to use ~str without giving &str a chance
[16:48:24] <bblum> oh yeah that's a stupid bug
[16:48:29] <bblum> try switching the order of them and it should work
[16:48:30] <Ms2ger> foo as &str == bar? :)
[16:48:31] <jasom> Ioh
[16:48:42] <jasom> I can also do ~str == &str.to_string()
[16:48:43] *** Quits: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com) (Ping timeout)
[16:49:01] <dbaupp> jasom: that works (.to_owned()), but it's an extra allocations
[16:49:05] <dbaupp> *allocation
[16:49:06] <doener> jasom: that causes an allocation though
[16:49:15] <dbaupp> Ms2ger: foo.as_slice() == bar
[16:49:32] <Eridius> you could use foo.equiv(bar)
[16:49:44] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[16:49:44] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 142cd3e0d to 1493c270c: 02http://git.io/N3iJvQ
[16:49:44] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[16:49:47] *** Joins: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP)
[16:49:47] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/sr6hkA
[16:49:47] <ghrust> 13rust/06auto 140cc7074 15Michael Woerister: Made ast::blk not use spanned<T> anymore.
[16:49:47] <ghrust> 13rust/06auto 149c1e530 15bors: auto merge of #7826 : michaelwoerister/rust/end_of_spanned, r=cmr...
[16:49:48] *** Parts: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP) ()
[16:50:26] <jasom> Eridius:  mismatched types: expected `&<V24>` but found `&str` for foo.equiv
[16:50:37] *** Joins: joone (joone@moz-1C0E78E8.fm.intel.com)
[16:50:45] <dbaupp> jasom: foo.equiv(&bar)
[16:51:21] *** Quits: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP) (Ping timeout)
[16:51:42] <Eridius> rusti: let x = ~"test"; let y = &"test"; x.equiv(&y)
[16:52:01] <cmr> Am I the only one who tab completes rusti? :P
[16:52:02] <Eridius> where's rusti?
[16:52:11] <cmr> Eridius: on holiday
[16:52:16] <Eridius> cmr: rust-buildbot is in the tab-complete list. rusti is so short I just type it
[16:52:26] <Eridius> cmr: although amusingly, I just tab-completed cmr ;)
[16:53:45] *** Joins: bytbox (s@moz-75D4B5A8.wireless.umd.edu)
[16:57:26] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[16:58:30] <slaren> I am having a weird issue with the trunk rustc
[16:58:50] <slaren> I am trying to use glcore in a program, but I am getting unresolved name errors
[16:59:18] <slaren> the interesting part is that each time I rebuild glcore, different names are missing
[17:00:59] <slaren> is there any known issue that could cause that ?
[17:01:33] *** Quits: bytbox (s@moz-75D4B5A8.wireless.umd.edu) (Ping timeout)
[17:01:42] <cmr> slaren: it builds for me
[17:02:07] <cmr> oh you're tring to use it
[17:02:14] <slaren> yeah, glcore itself builds fine
[17:02:28] <slaren> the problem is when trying to use it
[17:02:45] <slaren> for example, sometimes the type GLfloat is missing
[17:02:50] <cmr> Yup I get it now too
[17:03:21] <dbaupp> is there a `pub use something::*;` in glcore?
[17:03:27] <sully> argh, failed merge
[17:03:27] <sully> sigh
[17:03:33] <cmr> it's because it isn't linking to libgl
[17:03:57] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[17:03:57] *** ChanServ sets mode: +o pcwalton
[17:04:41] <cmr> bjz_: ping
[17:04:46] <MaikKlein1> oh man I never can answer some questions about Rust on SO, ppl are always too fast :(
[17:04:56] <cmr> People are asking rust questions on SO?
[17:05:03] * dbaupp apologises
[17:05:03] <MaikKlein1> ofc :D
[17:05:18] <Eridius> last time I went looking for rust questions on SO a whole week went by without any showing up
[17:05:27] *** Parts: mw (mw@moz-7586EEA0.adsl.highway.telekom.at) ()
[17:05:54] <Eridius> "asked 7 hours ago" .. "asked 3 days ago" .. "asked 6 days ago". yeah, not a very dense set of questions there
[17:06:19] <cmr> https://github.com/bjz/glcore-rs/blob/master/src/functions.rs#L7
[17:06:26] <cmr> Ok, so it *should* be linking to libGL I think..
[17:06:26] <dbaupp> MaikKlein1: it's allowed/good to have more than one answer for a question
[17:06:40] *** Joins: brson (brson@C261DB39.6E5482D7.8DDCAE07.IP)
[17:06:40] *** ChanServ sets mode: +o brson
[17:06:54] <sigma> This channel seems to be the best place. Maybe we should start mirroring common questions on SO so people have a less ephemeral reference
[17:07:05] *** Joins: bytbox (s@moz-75D4B5A8.wireless.umd.edu)
[17:07:07] <cmr> sigma: that's probably a good idea
[17:07:10] <dbaupp> I'm guessing the problem is https://github.com/bjz/glcore-rs/blob/3b75d002f81d96420f516819a79ba864bcab0f0d/src/glcore.rc#L15
[17:07:13] *** Joins: jgilbert (jgilbert@moz-4C088FCE.hsd1.ca.comcast.net)
[17:07:23] <dbaupp> pub use * seems to be bad
[17:07:33] * dbaupp has been confused by it before
[17:07:48] <cmr> I'm getting like:
[17:07:50] <cmr> ./libglcore-aab0ea9c29e32ed3-0.1.so: undefined reference to `glVertexAttribLPointer'
[17:07:52] <sully> ok, that wasn't a very bad conflict
[17:07:53] <cmr> for every glFoo used
[17:08:03] <pcwalton> just use reddit /r/rust for Rust questions ;)
[17:08:05] <Eridius> cmr: #[nolink]#[link_args="-lGL"] .. isn't the #[nolink] going to prevent the actual linking?
[17:08:08] <dbaupp> cmr: linker references?
[17:08:08] <sully> the "nice" thing about making changes to metadata and coherence is that nobody wants to touch those
[17:08:10] <cmr> Eridius: no idea
[17:08:11] <sully> so there aren't many conflicts
[17:08:16] <pcwalton> 1234 readers on reddit now
[17:08:16] <cmr> never seen it before
[17:08:17] <slaren> https://gist.github.com/anonymous/665a40b6c9b5ea773fe3
[17:08:19] <dbaupp> *linker errors
[17:08:26] <cmr> dbaupp: yes
[17:08:34] <cmr> error: linking with `cc` failed with code 1
[17:08:36] <cmr> note: cc arguments: -L/home/cmr/.local/lib/rustc/x86_64-unknown-linux-gnu/lib -m64 -o foo foo.o -L/home/cmr/.local/lib/rustc/x86_64-unknown-linux-gnu/lib -lstd-6c65cf4b443341b1-0.8-pre -L. -lglcore-aab0ea9c29e32ed3-0.1 -lGL -lrustrt -lrt -lpthread -L. -lrt -ldl -lm -lmorestack -lrustrt -Wl,-rpath,$ORIGIN/../../../lib/rustc/x86_64-unknown-linux-gnu/lib -Wl,-rpath,$ORIGIN/.
[17:08:38] <cmr> -Wl,-rpath,/home/cmr/.local/lib/rustc/x86_64-unknown-linux-gnu/lib -Wl,-rpath,/home/cmr/.local/src/glcore-rs/lib/. -Wl,-rpath,/usr/local/lib/rustc/x86_64-unknown-linux-gnu/lib -lGL
[17:08:42] <slaren> that's an example of what I am seeing, both versions of glcore where built in the same system, with the same paremeters etc
[17:08:46] <cmr> that's with rustc -L . --link-args='-lGL' foo.rs
[17:09:04] <cmr> where foo.rs is just `extern mod glcore; fn main() {}`
[17:09:35] <cmr> slaren: ok, so we're getting two different sets of errors
[17:09:37] <dbaupp> cmr: I remember seeing an issue about this stuff
[17:09:43] <dbaupp> cmr: I can't find it now
[17:09:58] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[17:11:03] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[17:11:09] <sigma> pcwalton: it was definitely /r/rust that brought me here
[17:12:23] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[17:12:27] <bstrie> pcwalton: reading the servo parallel layout thread, you mention phantom types. iirc you also mentioned phantom types as a sort of "replacement" for typestate, would typestate have also sufficed for this purpose in servo, "conditionally forbidding
[17:12:31] <bstrie> access to methods in certain contexts
[17:12:31] <bstrie> ?
[17:12:34] <bstrie> "
[17:12:47] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[17:13:32] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[17:13:32] *** ChanServ sets mode: +o tjc
[17:16:30] *** Joins: igl (igl@moz-65234DC8.adsl.alicedsl.de)
[17:16:48] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[17:18:45] <bblum> is there a way to figure out which commit your detached HEAD is on?
[17:18:54] <Eridius> yes
[17:18:55] <cmr> git show HEAD
[17:19:02] <Eridius> or `git log`
[17:19:02] <bblum> oooh, git show.
[17:19:08] <Eridius> bblum: you should be using a shell prompt that shows this to you
[17:19:13] <bblum> git branch, status, and show-branch all did not work
[17:19:17] <Eridius> bblum: what's your shell? there's bash and zsh prompts in git.git's contrib/ dir
[17:19:24] <bblum> Eridius: bash
[17:19:27] <bblum> let me see here
[17:19:30] <Eridius> and fish-shell ships with a git prompt (which I ported from the bash one)
[17:19:38] <Eridius> bblum: if you source the bash completion, then you get the bash prompt too
[17:19:52] <Eridius> just stick $(__git_ps1 " (%s)") in your $PS1 (or whatever format string you want)
[17:20:11] <Eridius> and if you read the git completion file it'll tell you about env vars you can set to get extra goodies, like upstream/dirty/stash indicators
[17:20:30] <Eridius> err I guess not env vars, they're just bash vars. No need to export them
[17:20:32] <bstrie> yes, the git branch and status in the shell prompt is indispensible
[17:20:45] <bblum> oops, gotta install bash-completion first
[17:20:52] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Connection reset by peer)
[17:20:59] <bblum> thanks Eridius 
[17:21:10] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[17:21:10] *** ChanServ sets mode: +o pcwalton
[17:21:11] <bstrie> however, it does make the shell take like three seconds to cd into the rust folder
[17:21:18] <bblum> c.c
[17:21:19] <Eridius> bstrie: get a faster HD?
[17:21:27] <bstrie> bblum: until it caches it, anyway
[17:21:34] <Eridius> it only has to do that if its stat cache is stale
[17:21:39] <bblum> i tend to have rust in cache usually
[17:22:16] *** Quits: Ralith (ralith@moz-99DB1CA1.wireless.sfu.ca) (Ping timeout)
[17:22:30] <bstrie> Eridius: I tend to blame the slowness of bash rather than blaming the rpm of my hdd
[17:22:42] <bstrie> but honestly I'm not sure what is happening in that period
[17:22:48] <bblum> don't you have a HD LED?
[17:23:06] <sp3d> HD LEDs are among the most powerful diagnostic tools known to man
[17:23:10] <bblum> :3
[17:23:13] *** Quits: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP) (Ping timeout)
[17:23:17] <bstrie> my tower isn't in sight!
[17:23:29] *** Joins: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP)
[17:23:42] <jasom> I remember when I didn't need an HD led; disks have gotten way quieter
[17:23:47] <bstrie> I have a huge gaming pc that won't fit on my desk, so it sits on its own table behind the desk
[17:23:54] *** Joins: pnathan (pnathan@F773BFB5.4D8DCA79.56034600.IP)
[17:23:59] <Eridius> bstrie: if you have upstream indicators, it has a git rev-list running, but that's probably fast (especially if you haven't diverged much from upstream).
[17:24:11] <Eridius> if you have dirty state showing, it has to run `git diff --no-ext-diff --quiet --exit-code`, which is probably the slowest part
[17:24:24] <bstrie> hmm
[17:24:29] <Eridius> also `git diff-index --cached --quiet HEAD --`
[17:24:44] <Eridius> and if you show untracked it runs `git ls-files --others --exclude-standard`
[17:24:48] *** Quits: pnathan (pnathan@F773BFB5.4D8DCA79.56034600.IP) (Quit: Colloquy for iPhone - http://colloquy.mobi)
[17:25:01] <Eridius> so yeah, the `git diff` is probably the slowest part if it doesn't have a valid stat cache
[17:25:10] <Eridius> if it's done that recently, it'll have a stat cache that prevents it from having to re-stat most of your tree
[17:25:32] <bstrie> you know a whole lot about this script
[17:25:52] <graydon> roah, the BRs got really messed up with that force-push
[17:25:55] *** Quits: jgilbert (jgilbert@moz-4C088FCE.hsd1.ca.comcast.net) (Ping timeout)
[17:25:55] <graydon> PRs
[17:26:03] <Eridius> bstrie: well I did port it to fish ;)
[17:26:10] <bstrie> haha, that'll do it I guess
[17:26:16] *** Quits: jaredhanson (jaredhanso@moz-8323839A.hfc.comcastbusiness.net) (Ping timeout)
[17:26:48] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[17:26:55] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[17:27:47] *** jdm is now known as jdm|busy
[17:28:51] <dbaupp> urgh, I've some how got safe code to produce an invalid enum variant.
[17:29:00] *** Quits: cowboyd (cowboyd@1D8844A7.1B729417.CEE440B6.IP) (Client exited)
[17:29:17] <cmr> dbaupp: delicious, hand it off for bblum to make an exploit with it
[17:29:34] <dbaupp> cmr: the "safe code" is all of libsyntax
[17:29:38] <cmr> oh
[17:29:41] <dbaupp> + some modifications
[17:29:43] <bstrie> dbaupp: it's probably just a few bits off, just shuffle it around in memory for a while until it's valid
[17:30:21] <dbaupp> cmr: but there isn't any unsafe {} in it, so it *shouldn't* be happening
[17:30:22] <dbaupp> :/
[17:31:13] <Eridius> dbaupp: surely it uses some APIs that are internally unsafe. Maybe one of those APIs isn't sound?
[17:31:26] <dbaupp> Eridius: presumably
[17:31:53] <bstrie> yes, surely it's not a compiler bug. when was the last time you saw one of those?
[17:31:59] <dbaupp> Eridius: the problem is mostly trying to work out which change broke it
[17:32:14] <Eridius> dbaupp: `git bisect~
[17:32:17] <Eridius> s/~/`/
[17:32:22] <dbaupp> bstrie: compiler bug? I've heard tales of them, but surely they're just a myth
[17:32:27] <dbaupp> Eridius: yeah, it's one commit
[17:32:30] * Eridius had to run a multi-hour `git bisect` to figure out what the heck was causing the segfaults in tests
[17:32:33] <Eridius> that was fun
[17:32:43] * dbaupp gives up for the night
[17:32:44] *** Joins: mschifer (Adium@moz-BBE3ABD.mv.mozilla.com)
[17:32:54] * strcat has daily builds going back 2-3 months
[17:32:59] <bblum> Eridius: ok, i have git completion but i have no __git_ps1 command in scope
[17:33:03] <bblum> now what
[17:33:10] <Jeaye> strcat: You've been keeping them? :P
[17:33:22] <strcat> Jeaye: well they're in my pacman cache and I never clear it ;p
[17:33:24] <bstrie> strcat: are you archiving every single daily build? how much storage does that need?
[17:33:27] <Jeaye> heh
[17:33:31] *** Quits: Kruppe (user@moz-4DDA8AB8.uwaterloo.ca) (Ping timeout)
[17:33:37] <strcat> bstrie: 25MiB each before, 30MiB now
[17:33:44] <strcat> they're xz-compressed packages
[17:33:54] <strcat> I could turn up the compression level too, it's just at -6
[17:33:56] <Eridius> bblum: really? what completion are you using? The one that lives in the git.git repo in the contrib/ dir provides the prompt function
[17:33:57] <pnkfelix> strcat: hmm, maybe I'll start doing that.
[17:34:12] <Eridius> bblum: maybe you're using some distribution that hacked off the prompt part and left only the completion?
[17:34:17] <Eridius> or maybe you forgot to actually source the completion
[17:34:44] <strcat> Jeaye: I never clear it because then I'd lose the ones I need for 32-bit chroots and have to redownload it
[17:34:47] <strcat> ;p
[17:35:21] <dbaupp> cmr: is the bencher saving its builds?
[17:35:21] <bblum> i installed it from portage and then sourced source /etc/bash_completion.d/git
[17:35:57] <cmr> dbaupp: nope
[17:36:17] <strcat> /var/cache/pacman/pkg/rust-git-release.0.6.2265.gb417bc8-1-x86_64.pkg.tar.xz
[17:36:20] <strcat> /var/cache/pacman/pkg/rust-git-release.0.6.2268.geadd83d-1-x86_64.pkg.tar.xz
[17:36:22] <strcat> etc.
[17:36:39] <strcat> it was called rust-incoming-git before so the sort order is messed up
[17:36:55] <bblum> Eridius: oh found it
[17:36:56] <bstrie> bblum: here's mine for comparison, I also use bash: https://github.com/bstrie/dotfiles/blob/master/.benrc#L33
[17:37:06] *** Quits: CarpNet (ac@moz-FD24B77.sohonet.co.uk) (Quit: Leaving)
[17:37:06] <bblum> i needed /etc/bash_completion.d/git_prompt
[17:37:10] <bblum> silly gentoo, separating them
[17:37:17] <Eridius> lol
[17:38:14] <bblum> ok hot it works
[17:38:15] *** Quits: mark_edward (quassel@moz-4A5B1251.wisolt4.epbfi.com) (Ping timeout)
[17:38:17] *** Joins: mark_edward (quassel@moz-4A5B1251.wisolt4.epbfi.com)
[17:40:14] *** Joins: Uther (Instantbir@moz-1B244B05.hfc.dyn.abo.bbox.fr)
[17:41:04] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[17:41:57] <strcat> dbaupp: do you know what parts of RNG are still using the C++ runtime?
[17:42:03] * strcat thought that was gone now
[17:42:04] <dbaupp> strcat: 0
[17:42:14] <strcat> hrm
[17:42:20] <pnkfelix> brson: out of curiosity, is rebooting on OS X strictly necessary?  Or put more simply: is there a way to play with setting without rebooting?
[17:42:20] <dbaupp> strcat: oh, wait, the C++ scheduler uses it
[17:42:45] <dbaupp> strcat: also there's a test that uses it, to check correctness of the Rust one
[17:42:52] <strcat> rusti: 2
[17:42:54] *** Quits: jedestep (jedestep@34641662.FB4DE631.66C78B76.IP) (Ping timeout)
[17:42:56] -rusti- 2
[17:42:57] <strcat> rusti: 2
[17:42:59] -rusti- 2
[17:43:05] <Ms2ger> rusti, 42
[17:43:13] <Ms2ger> Doesn't like commas?
[17:43:15] <strcat> nope
[17:43:24] * strcat taught it 'rust:' only ;p
[17:43:26] <strcat> rusti *
[17:43:42] *** Joins: Ralith (ralith@moz-50F3C77.vc.shawcable.net)
[17:43:58] *** Joins: jedestep (jedestep@34641662.FB4DE631.66C78B76.IP)
[17:44:02] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[17:44:56] <brson> pnkfelix: yeah, you can run the 'limit' command by hand, then the 'ulimit -n' command. ulimit -n applies to the current shell only
[17:44:58] <dbaupp> strcat: why the question about the rng?
[17:45:05] <strcat> just curious
[17:45:15] <pnkfelix> brson: ah, I bet I left out the "limit" invocation when I was messing with this
[17:45:20] <pnkfelix> brson: thanks
[17:45:28] <dbaupp> strcat: it does call into the runtime to seed itself
[17:46:05] <dbaupp> strcat: just using the runtime to read from /dev/urandom / the windows one.
[17:47:26] *** Quits: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP) (Ping timeout)
[17:47:40] <graydon> I wonder if I should disable the benchmarks when running on valgrind
[17:48:19] <graydon> heart says yes. makefile hacking sloth says no.
[17:49:20] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Quit: Computer has gone to sleep.)
[17:49:31] *** Quits: dbaupp (Thunderbir@moz-712A1135.lns20.syd6.internode.on.net) (Ping timeout)
[17:49:55] *** Quits: jensnock_ (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[17:50:03] *** Joins: jviereck (Adium@moz-587DE482.ethz.ch)
[17:50:14] *** Quits: jviereck (Adium@moz-587DE482.ethz.ch) (Client exited)
[17:50:49] *** jdm|busy is now known as jdm
[17:51:43] *** Quits: bytbox (s@moz-75D4B5A8.wireless.umd.edu) (Ping timeout)
[17:54:27] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[17:55:11] *** Joins: vosen (vosen@moz-266BA656.icpnet.pl)
[17:55:23] *** Joins: ecr (Thunderbir@moz-BBE3ABD.mv.mozilla.com)
[17:56:31] *** Quits: huseby (huseby@moz-4E8C421A.husebyhome.com) (Quit: Leaving)
[17:57:00] <brendanc> brson: I was told you'd know the answer to this -- I'm confused about the relationship between RUST_MIN_STACK and Coroutine::new's MIN_STACK_SIZE.
[17:57:05] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Computer has gone to sleep.)
[17:57:16] <brendanc> I guess you get the max of those two for any new task?
[17:58:31] *** Joins: steven_is_false (user@moz-144077DE.bchsia.telus.net)
[17:59:08] *** Quits: MaikKlein1 (maik@moz-4C6F98CE.dip0.t-ipconnect.de) (Ping timeout)
[17:59:08] *** Joins: tcr (tcr@D26BCFC9.C2203064.EDCE493E.IP)
[17:59:08] <jasom> what is upcall_new_stack?  I'm seeing it on my oprof reports
[17:59:15] *** Joins: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net)
[17:59:24] <slaren> uhm, I am having the same problems using glcore with rust 0.7
[17:59:34] *** Joins: Puffas (Miranda@699AE908.82029D1.FFB20EAF.IP)
[17:59:36] <cmr> slaren: glcore is pretty much abandoned.
[17:59:38] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: Leaving.)
[18:00:14] <strcat> hrm
[18:00:22] <slaren> I understand that it has problems using opengl extensions at the moment
[18:00:27] <slaren> but is it really abandoned ?
[18:00:29] <cmr> slaren: yes
[18:00:44] <cmr> to be replaced with https://github.com/bjz/gl-rs when #6661 lands
[18:00:44] *** Parts: Puffas (Miranda@699AE908.82029D1.FFB20EAF.IP) (I'm a happy Miranda NG user! Get it here: http://miranda-ng.org/)
[18:01:40] <steven_is_false> Hi! Running Rust on MinGW on Wine on Linux seems to be working okay but it's really slow. Is it possible to run Rust directly on Wine on Linux, and would I see any speedups?
[18:01:55] <steven_is_false> (The build process is slow.)
[18:01:56] <slaren> so at the moment I should just use the opengl es bindings instead ?
[18:02:02] <bstrie> steven_is_false: for best results you should run linux in a vm that is running on wine on linux
[18:02:03] <cmr> slaren: probably
[18:02:09] <tjc> steven_is_false: you should be able to run it under WINE, but I wouldn't expect it to be fast
[18:02:12] <steven_is_false> bstrie: :)
[18:02:31] <slaren> anyway, that looks like a weird bug in the compiler
[18:02:43] <cmr> slaren: it is
[18:02:46] <cmr> known bug
[18:02:46] <bstrie> steven_is_false: are you trying to test only windows-specific rust?
[18:03:00] <slaren> ah, ok
[18:03:01] <steven_is_false> bstrie: Yes. I'm trying to run it under Valgrind.
[18:03:10] <slaren> do you know the issue # ?
[18:03:29] <jasom> steven_is_false: running under valgrind is going to be slow no matter what
[18:03:29] <tjc> steven_is_false: I don't think valgrind works well on anything but Linux
[18:03:39] *** Joins: huseby (huseby@moz-4E8C421A.husebyhome.com)
[18:03:42] *** Joins: zslayton1 (Mibbit@1D191528.269AFE30.6A3AF4D7.IP)
[18:03:49] <steven_is_false> tjc: That's why I'm using WINE
[18:04:01] <strcat> tjc: yeah you can debug win32 programs with valgrind *on linux* :)
[18:04:10] <tjc> strcat: ah ok :-)
[18:04:40] <brendanc> jasom: I think upcall_new_stack is when rust has to grab a new stack segment because it's run out of room on the current one
[18:05:09] <brendanc> setting the RUST_MIN_STACK envvar to something larger might help
[18:05:50] <steven_is_false> I think I can just cross compile for mingw.
[18:05:57] <steven_is_false> And then run Rust
[18:06:17] <jasom> brendanc: yup, that fixed it
[18:06:18] <jasom> thanks
[18:07:27] <graydon> brendanc: the thing that surprises me about all this is that "measuring 2 programs and deciding automatically if you got an improvement" should ... be ... a pretty common task?
[18:08:00] <graydon> brendanc: yet I have stumped like 19 different people-who-know-stats because they always assume there's an operator in the loop who can judge the distribution and perform statistical hypothesis testing. not automatic.
[18:08:08] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[18:08:16] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[18:08:38] <brson> brendanc: there isn't currently a relationship. the new scheduler ignores RUST_MIN_STACK. in the future i guess RUST_MIN_STACK will override MIN_STACK_SIZE
[18:09:13] <graydon> brson: welcome back!
[18:09:24] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[18:09:27] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[18:09:29] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[18:10:02] <brson> graydon: thanks!
[18:10:12] <jasom> so it looks like by default, it not only callocates more stack, it also frees it when you return up, so if you make a deep call very often, it's quite slow
[18:10:31] <brson> jasom: it does not free on the way back up
[18:11:09] <jasom> brson: what is upcall_del_stack then?
[18:11:17] <jasom> b/c I'm hitting that a lot too
[18:11:26] <cmr> Was RUST_LOG changed recently? I'm g
[18:11:28] <cmr> oh
[18:11:42] <bblum> hi brson
[18:11:42] <cmr> I even reviewed that PR
[18:11:45] * cmr feels silly
[18:11:46] <brson> jasom: it just moves up the stack linked list. the free happens lazily at the next yield
[18:11:58] <jasom> ah
[18:12:05] <brson> bblum: hi
[18:13:08] <bblum> guess which suite of test cases is passing on the new scheduler
[18:13:16] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[18:13:43] <brson> bblum: linked failure
[18:13:53] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[18:13:56] <bblum> naturally
[18:14:21] *** Joins: cowboyd (cowboyd@moz-1BD02A1E.sw.biz.rr.com)
[18:14:37] *** Joins: azakai_ (alon@moz-BBE3ABD.mv.mozilla.com)
[18:14:48] <brson> wicked
[18:15:02] <bblum> brson: oh, so, in the old runtime we had this mechanism where if the "main" taskgroup failed, it would kill all other tasks no matter the linkage situation, so that the whole process could exit
[18:15:22] <bblum> this would cause, for example, the test runner to kill any hanging tests if another test case failed early
[18:15:30] *** Joins: echristo (echristo@DCF57675.D6CCE4AE.77834EAA.IP)
[18:15:42] <cmr> A view_item is an reexport/import yeah?
[18:15:45] <brson> bblum ecr toddaaro: after thinking about it I think we should be developing against master unless I fall behind again, so no need to do pulls against brson/io now
[18:16:11] <bblum> but, i'm pretty unenthusiastic about this mechanism, and think we might be able to get away without having it?
[18:16:20] <bblum> (currently i have a rtabort unimplemented where that mechanism should be)
[18:16:37] <brson> bblum: ok, that doesn't even sound familiar to me, so yeah
[18:16:43] *** Joins: mr_trousers (Mibbit@A86C200B.E1A3AC2F.C2410B14.IP)
[18:16:52] *** Quits: mr_trousers (Mibbit@A86C200B.E1A3AC2F.C2410B14.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[18:17:10] <ecr> brson: roger that
[18:17:15] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[18:17:20] <bblum> brson: this was the rust_task_kill_all -> fail_sched_loop -> kill_all_tasks thing
[18:17:31] <bblum> also, do you mean i should put pull requests against master starting with the giant one right now?
[18:17:49] *** Joins: bytewise (bytewise@moz-649C630D.unitymediagroup.de)
[18:18:20] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[18:19:36] <brson> bblum: yes, I think so
[18:19:49] <bblum> hmm time to do a big rebase then
[18:20:26] <jack> @mut [] doesn't implement push?
[18:22:02] <ecr> brson: olsonjeffery was interested in working on something related to newsched. I suggested implemented timers (#6435) since that shouldn't overlap with my work on net/file io. He's developing against your io branch.
[18:22:20] <pnkfelix> jack: I think the idea is that you can't reallocate the storage for an @mut [], only for a ~[].   You'd have to introduce a level of indirection, something like @mut ~[] ?
[18:22:40] <strcat> pnkfelix: there's realloc for @mut
[18:23:22] <jack> is there a reason or is the trait implementation just missing for @mut []?
[18:23:29] <pnkfelix> strcat: okay, then I'm wrong, and I don't understand why there's no push for @mut []
[18:23:40] <brendanc> brson: ah ok. I was looking at plumbing an init_stack_size through TaskOpts and I guess all I have to do is pass it down to Coroutine::new in this case
[18:24:34] <brson> ecr bblum: ok, well my io branch is mostly just an out of date master at this point since (almost) everything's merged. it shouldn't hurt anything to develop against it and I'll keep doing development there so it will get updated. I'll try to merge whatever's on it now and then ff it to master
[18:24:34] <strcat> pnkfelix: probably just that the stdlib sucks for @str/@[] and the @mut ones
[18:26:04] <ecr> brson: it shouldn't be a problem for me. I've been reading up on various IO systems for the past few days so I can just start implementing against master instead.
[18:26:05] *** Joins: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP)
[18:26:05] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/sr6hkA
[18:26:05] *** Parts: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP) ()
[18:26:24] <bblum> brson: also it looks like the threadring difference you mentioned was just random variance? although there is a slight slowdown once all the linked failure stuff is actually hooked in
[18:26:30] <heftig> strcat: do you know if DST is going anywhere?
[18:26:39] <bblum> oddly task-perf-one-million seems to be -faster- with the linked failure code hooked in
[18:26:44] <pnkfelix> strcat: can you give me a file+line hint?  I'm not seeing where realloc is, apart from the one for OwnedVec ?
[18:27:33] <strcat> pnkfelix: well ~[] has reserve for both unique and managed-unique
[18:27:41] <strcat> so I imagine managed would use the same path as managed-unique
[18:27:53] <strcat> pnkfelix: look in vec.rs, the 'fn reserve'
[18:28:01] <brson> brendanc: sounds right
[18:28:01] <strcat> the C++ stuff still does vecs
[18:28:48] *** Joins: ghrust (ghrust@E7A4CCE2.6A2AE50.F3114085.IP)
[18:28:48] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/ZD_qSQ
[18:28:48] *** Parts: ghrust (ghrust@E7A4CCE2.6A2AE50.F3114085.IP) ()
[18:28:49] *** Joins: MaikKlein1 (maik@moz-EF706AF.dip0.t-ipconnect.de)
[18:28:49] *** Joins: ghrust (ghrust@AD60B2E3.6A2AE50.F3114085.IP)
[18:28:49] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/piScmA
[18:28:49] <ghrust> 13rust/06auto 14040e470 15Huon Wilson: rustc: implement a `#[no_implicit_prelude]` attribute....
[18:28:50] <ghrust> 13rust/06auto 14060de10 15bors: auto merge of #7844 : huonw/rust/no-implicit-prelude, r=alexcrichton...
[18:28:50] *** Parts: ghrust (ghrust@AD60B2E3.6A2AE50.F3114085.IP) ()
[18:29:39] *** Joins: anri (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net)
[18:30:03] <bblum> task-perf-spawnalot is 28% faster with linked failure bookkeeping than without o_O
[18:34:14] <brson> olsonjeffery: I suggest developing against master now and not brson/io. hopefully now that the new scheduler is pretty stable we can avoid creating such long-lived forks
[18:35:07] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[18:36:56] *** Joins: brendan (brendaneic@FB2030FC.5F77D495.B41F1B80.IP)
[18:37:23] <pcwalton> 1337 open issues
[18:37:28] <bblum> xlnt
[18:37:32] <Ms2ger> Can't fix anything
[18:37:38] <bblum> unless we find new bugs
[18:37:44] <cmr> *until
[18:38:14] <MaikKlein1> haha
[18:38:34] <ecr> only accept PRs that make exactly one regression
[18:38:47] <slaren> is there any tool or compiler flag to inspect the rust_metadata ?
[18:41:21] <MaikKlein1> slaren, I think -Z meta-stats  
[18:42:24] <Ms2ger> ecr, introduce one regression and fix one issue, clearly :)
[18:42:31] <sully> oh, sigh
[18:42:35] <sully> made rustc segfault
[18:42:36] <sully> danger
[18:42:56] <slaren> MaikKlein1: I tried that, but it doesn't seem to show more than the sizes of some stats
[18:43:11] *** Quits: sk (sk@A298A44C.54A580E3.78DD174B.IP) (Input/output error)
[18:43:14] <MaikKlein1> slaren, yeah I saw that too, dunno sry
[18:45:12] <sully> ok, wtf.
[18:45:26] <sully> I have rustc failing in nondeterminitsic ways
[18:46:04] <strcat> sully: hashmaps like doing that
[18:46:24] <sully> oh, that's terrible.
[18:48:03] <sully> oh my god it is a different failure depending on what logging I have enabled
[18:48:15] <doener> ouch
[18:49:02] *** Quits: Jesin (Jessin_@moz-3AD6F09F.res.lehigh.edu) (Ping timeout)
[18:49:18] <bblum> sully: https://github.com/mozilla/rust/issues/2726 ?
[18:49:52] *** Quits: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net) (Ping timeout)
[18:50:15] *** Joins: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP)
[18:50:40] *** Joins: thpickert (thpickert@moz-99F22CD3.dynamic.dsl.tng.de)
[18:50:56] <sully> no, it is segfaulting in reflect::__extensions__::visit_estr_uniq
[18:52:05] *** Quits: SimonSapin (simon@88F51059.F3BBB17D.144F44FA.IP) (Ping timeout)
[18:52:13] <MaikKlein1> hm
[18:52:19] <MaikKlein1> what does this mean now ? error: can't find crate for `std`
[18:52:35] <thpickert> How do I use RngUtil::gen_bytes() to generate a vector of 16 random byte values?
[18:52:45] <thpickert> I can't figure out the syntax.
[18:52:55] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[18:53:08] <engla> sully: maybe strcat knows
[18:53:36] <cmr> rusti: use std::rand::RngUtil; let mut rng = std::rang::rng(); rng.gen_bytes(16)
[18:53:39] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/SJWa
[18:54:13] <cmr> rusti: use std::rand::RngUtil; let mut rng = std::rand::rng(); rng.gen_bytes(16)
[18:54:15] -rusti- ~[113, 216, 62, 175, 205, 28, 98, 139, 49, 187, 246, 15, 206, 71, 222, 198]
[18:54:22] <cmr> thpickert: ^
[18:54:44] <thpickert> cmr: You rock!
[18:55:29] <cmr> strcat: yeah, please don't get hit by a bus
[18:55:45] <MaikKlein1> ??
[18:56:03] *** Quits: dherman (dherman@moz-BBE3ABD.mv.mozilla.com) (Quit: dherman)
[18:56:11] *** Quits: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP) (Ping timeout)
[18:56:11] <cmr> MaikKlein1: http://en.wikipedia.org/wiki/Bus_factor
[18:56:14] *** Joins: lucian (lucian@moz-22A14C6A.cable.virginmedia.com)
[18:56:18] <engla> I guess you are fine with us others getting hit
[18:56:40] *** Joins: dherman (dherman@moz-BBE3ABD.mv.mozilla.com)
[18:56:40] *** ChanServ sets mode: +o dherman
[18:57:08] <cmr> engla: yeah pretty much :p
[18:57:12] <thpickert> engla: Only if you *have to* get hit, in order to save strcat.
[18:57:18] <cmr> heh
[18:57:28] <strcat> sully: strange. perhaps there's some place still calling it with a managed str
[18:57:30] *** Joins: tikue (tkuehn@moz-BBE3ABD.mv.mozilla.com)
[18:57:56] *** Quits: lucian (lucian@moz-22A14C6A.cable.virginmedia.com) (Ping timeout)
[18:59:01] *** Quits: bytewise (bytewise@moz-649C630D.unitymediagroup.de) (Quit: Leaving)
[19:02:21] <pnkfelix> I haven't seen it clearly stated in my emails: has a location been established for Niko's dry run?
[19:02:35] <tjc> pnkfelix: last I heard was Niko's vidyo room
[19:02:38] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[19:02:56] <pnkfelix> tjc: okay so I'll plan on that until further notice.  thanks.
[19:05:47] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Ping timeout)
[19:06:09] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[19:07:07] *** Joins: strcat1 (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[19:07:16] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[19:07:54] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[19:08:21] <pnkfelix> strcat: I'm still trying to understand your reasoning here.  If you were to try to generalize `fn reserve` to work on @mut [] the same way that it works on ~[], I would think you'd need to update all of the pointers to the vec; the single assignment "*ptr = realloc_raw(..)" would not suffice, right?
[19:08:49] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Ping timeout)
[19:09:41] <strcat1> pnkfelix: ah, true
[19:09:57] * pnkfelix breathes a sigh of relief.  "Not taking crazy pills!"
[19:10:12] *** Joins: devinus (devinus@moz-3C0F65B9.sw.biz.rr.com)
[19:11:26] *** Quits: MaikKlein1 (maik@moz-EF706AF.dip0.t-ipconnect.de) (Ping timeout)
[19:11:48] *** Joins: fabiand (fabiand@moz-8DE1A8B.adsl.alicedsl.de)
[19:12:17] *** Quits: dherman (dherman@moz-BBE3ABD.mv.mozilla.com) (Quit: dherman)
[19:13:56] <engla> that reminds me, take your pills
[19:16:59] <jasom> how do I efficiently get the Nth byte from a string as a u8?  Best I have so far is str::as_buf(s, |bytes,count| { unsafe { ptr::offset(bytes,n) } })
[19:18:23] <strcat1> jasom: just index it
[19:19:07] <jasom> oh
[19:19:16] *** Joins: SimonSapin (simon@moz-D0C2F181.zone2.bethere.co.uk)
[19:19:41] <cmr> String indexing isn't character indexing?
[19:19:42] <engla> the only thing you avoid with as_buf is the bounds check
[19:19:59] <engla> it's not
[19:20:17] <jasom> cmr: character indexing is very inefficient
[19:20:19] <cmr> I suppose indexing is usually expected to be O(1)
[19:20:23] <cmr> jasom: but it's correct
[19:20:30] <jasom> cmr: sometimes
[19:20:40] *** Quits: brson (brson@C261DB39.6E5482D7.8DDCAE07.IP) (Ping timeout)
[19:20:43] <strcat1> cmr: rarely 
[19:20:45] <jasom> not a one-to-one mapping between characters and glyphs
[19:21:05] <strcat1> you only really want code points as a basis for getting the real units you care about
[19:21:13] <jasom> (if you define characters as code points anyway)
[19:21:19] <sp3d> speaking of unicode, rusti (program) does awful with cjk wide characters
[19:22:55] *** Quits: sankha93 (Instantbir@B3D2983B.18989014.F44414AF.IP) (Quit: He will be back!)
[19:24:13] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[19:25:10] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[19:26:01] *** Joins: orshem (orshem@81F00A95.B9DE554A.EB50AD2C.IP)
[19:26:08] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[19:26:08] *** ChanServ sets mode: +o brson
[19:26:14] *** Quits: _Vi (vi@527C345F.497AA854.B16B3BE6.IP) (Ping timeout)
[19:28:31] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Connection reset by peer)
[19:28:41] *** Quits: brendan (brendaneic@FB2030FC.5F77D495.B41F1B80.IP) (Quit: brendan)
[19:28:50] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[19:29:56] *** Joins: dherman (dherman@moz-BBE3ABD.mv.mozilla.com)
[19:29:56] *** ChanServ sets mode: +o dherman
[19:30:06] <sully> strcat1: would that cause segfaults?
[19:30:35] <strcat1> sully: it could
[19:30:41] *** Quits: jedestep (jedestep@34641662.FB4DE631.66C78B76.IP) (Quit: leaving)
[19:30:44] <sully> that is... unfortuante
[19:30:47] <strcat1> sully: @str has headers, ~str doesn't... hm
[19:30:48] *** Joins: true_droid (Adium@moz-123FD9B8.beck.volia.net)
[19:30:57] <strcat1> I don't really see how it could be messing that up though
[19:31:16] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[19:32:03] <sully> hm, when it trips assert, it is the assert at line 1760 in str.rs
[19:33:06] *** Quits: tikue (tkuehn@moz-BBE3ABD.mv.mozilla.com) (Quit: tikue)
[19:33:17] *** Quits: fabiand (fabiand@moz-8DE1A8B.adsl.alicedsl.de) (Quit: Verlassend)
[19:33:53] *** Quits: eatkinson (eatkinson@moz-BBE3ABD.mv.mozilla.com) (Quit: eatkinson)
[19:34:14] *** Quits: ecr (Thunderbir@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[19:34:15] *** Quits: devinus (devinus@moz-3C0F65B9.sw.biz.rr.com) (Quit: Computer has gone to sleep.)
[19:34:51] *** Parts: steven_is_false (user@moz-144077DE.bchsia.telus.net) (ERC Version 5.3 (IRC client for Emacs))
[19:35:09] <mark_edward> strcat1: what do you think about the AWS instance for rusti?
[19:35:17] *** Joins: eatkinson (eatkinson@moz-BBE3ABD.mv.mozilla.com)
[19:35:57] *** Joins: tikue (tkuehn@moz-BBE3ABD.mv.mozilla.com)
[19:36:14] <graydon> re-r+ someone? https://github.com/mozilla/rust/pull/7829
[19:36:19] <strcat1> mark_edward: dunno ;p
[19:36:54] <mark_edward> it'd be a good way to ensure rusti:'s uptime! the only problem is that you probably couldn't recompile rust on that machine
[19:37:08] *** Joins: brendan (brendaneic@FB2030FC.5F77D495.B41F1B80.IP)
[19:37:09] <mark_edward> how much Memory does that need?
[19:37:16] <cmr> rusti already uses the arch package
[19:38:06] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[19:38:18] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[19:39:28] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[19:39:56] *** Quits: qmx (qmx@moz-D6C3C2E6.qmx.me) (Ping timeout)
[19:44:11] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[19:46:27] <engla> I'll ask my question from this issue here, https://github.com/mozilla/rust/pull/7833#issuecomment-21136000   can the compiler be this smart to optimize the allocation of ~[] away if it's not needed?
[19:47:06] <strcat1> it won't, right now
[19:47:13] *** Joins: qmx (qmx@moz-D6C3C2E6.qmx.me)
[19:47:28] <strcat1> it will never optimize away allocations because they're a black box to it
[19:47:47] <strcat1> if we didn't have segmented stacks + foreign function wrappers, LLVM would optimize away dead stores
[19:47:48] <strcat1> that's about it
[19:48:10] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[19:48:36] *** Quits: ferdinand (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[19:49:10] <engla> ok
[19:49:34] <engla> no high-level analysis of ultimate effects of the code and which parts are not needed
[19:50:34] <strcat1> it does, but it can't through library calls
[19:50:40] <strcat1> and all of our C functions are wrapped
[19:51:16] <engla> ~[] is a literal so it could do the analysis before involving the implementation of vec
[19:51:19] *** Quits: eschweic (Adium@moz-BBE3ABD.mv.mozilla.com) (Quit: Leaving.)
[19:51:52] <cmr> rustc doesn't do any optimization at all outside of llvm afaik
[19:51:54] <cmr> yet
[19:52:40] *** Joins: geomyidae (cole@DD6F7E3A.21468E9A.30200F38.IP)
[19:53:06] <strcat1> it won't
[19:53:09] *** Quits: orshem (orshem@81F00A95.B9DE554A.EB50AD2C.IP) (Ping timeout)
[19:53:17] <strcat1> at least it's unlikely it will
[19:53:26] <strcat1> we could tell LLVM about purity stuff if we actually knew
[19:53:29] *** Quits: Uther (Instantbir@moz-1B244B05.hfc.dyn.abo.bbox.fr) (Ping timeout)
[19:53:36] <doener> engla: wouldn't the allocation only be useless iff the hashmap gets dropped right after the consume call?
[19:53:50] <engla> yes, but that's the majority of the use cases
[19:54:34] <engla> not that there are many data points through the source tree, but the only places where the replace dance is needed is because the hashmap is locked up inside @mut
[19:54:55] <engla> ok only places except one
[19:55:08] <sully> ok, the segfault/string bug is not my fault
[19:55:15] <sully> something is pretty messed up in master
[19:56:45] *** Joins: Uther (Instantbir@moz-1B244B05.hfc.dyn.abo.bbox.fr)
[19:57:08] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (No route to host)
[19:57:18] *** Quits: geomyidae (cole@DD6F7E3A.21468E9A.30200F38.IP) (Quit: Konversation terminated!)
[19:59:51] *** Joins: dwhyte (dwhyte@ED9190FB.B72E355F.7BF4A4B0.IP)
[20:01:53] <graydon> meep. someone r+ https://github.com/mozilla/rust/pull/7829 ? it's just build fixes from last review
[20:02:06] <doener> graydon: looks good to me FWIW
[20:02:25] <cmr> I thought I did r+ it
[20:02:27] <doener> ah, cmr to the rescue :-)
[20:02:27] <cmr> apparently not
[20:02:32] <cmr> sorry!
[20:02:45] <cmr> graydon: bors feature request: mind reading
[20:02:57] <pnkfelix> cmr: no you did
[20:03:11] <graydon> oh silly me, needed to reload :(
[20:03:12] <cmr> pnkfelix: before just now I mean
[20:03:32] <graydon> cmr: mind reading? _already added_
[20:03:37] <graydon> BOOM
[20:03:45] <graydon> (read your mind)
[20:04:02] <brendanc> bors feature request: time travel
[20:04:16] <graydon> done 20 YEARS AGO
[20:04:16] *** Joins: _Vi (vi@527C345F.497AA854.B16B3BE6.IP)
[20:04:27] *** Joins: ghrust (ghrust@AD60B2E3.6A2AE50.F3114085.IP)
[20:04:27] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/piScmA
[20:04:27] *** Parts: ghrust (ghrust@AD60B2E3.6A2AE50.F3114085.IP) ()
[20:04:36] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[20:05:07] *** Joins: geomyidae (cole@DD6F7E3A.21468E9A.30200F38.IP)
[20:05:25] <sully> I'm having a lot of trouble minimizing this debug spew segfault
[20:05:26] <sully> sigh
[20:06:37] <bblum> sully: is it the issue i linked at you
[20:06:41] <sully> no
[20:06:44] <bblum> oh
[20:06:46] *** Quits: geomyidae (cole@DD6F7E3A.21468E9A.30200F38.IP) (Quit: Konversation terminated!)
[20:06:55] *** Joins: geomyidae (cole@DD6F7E3A.21468E9A.30200F38.IP)
[20:07:26] *** Joins: ghrust (ghrust@C621748.6A2AE50.F3114085.IP)
[20:07:26] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/kKlQag
[20:07:26] *** Parts: ghrust (ghrust@C621748.6A2AE50.F3114085.IP) ()
[20:07:27] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[20:07:27] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/nIzV6g
[20:07:27] <ghrust> 13rust/06auto 144bf6b84 15Graydon Hoare: make: turn off --bench when running under valgrind
[20:07:27] <ghrust> 13rust/06auto 146d78a36 15Graydon Hoare: extra: avoid possible divide-by-zero conditions test.
[20:07:27] <ghrust> 13rust/06auto 148c08265 15bors: auto merge of #7829 : graydon/rust/codegen-compiletests, r=cmr...
[20:07:29] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[20:07:34] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[20:07:41] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[20:07:41] *** Quits: strcat1 (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[20:07:43] <engla> did the decopy branch go in? no lockdown yet?
[20:08:05] <tikue> where is rusti guys :(
[20:08:21] <engla> it lives on strcat's computer
[20:08:27] <graydon> nobody has pinged me suggesting lockdown. tree's open, no?
[20:08:32] <engla> ok
[20:08:36] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:08:39] <graydon> pcwalton: did you want me to close tree for you to land copy?
[20:08:46] <pcwalton> graydon: I'll try once more
[20:09:17] *** Joins: ecr (Thunderbir@moz-BBE3ABD.mv.mozilla.com)
[20:09:17] <pcwalton> argh, bitrotted in the last hour
[20:09:30] <graydon> ok. it's easiest if we do it during workday. I'm happy to back off the bench thing I'm landing.
[20:09:35] <graydon> it's lower priority
[20:10:45] <cmr> HAHA!
[20:11:09] <graydon> cmr: ?
[20:11:14] <cmr> rustdoc_ng will now properly run on rustdoc_ng
[20:11:17] <graydon> \o/
[20:11:34] <tikue> is it possible to do: for thing.iter().advance |foo @ Foo| { }
[20:11:49] <cmr> It'd run on std too if I could pass through --cfg options
[20:12:02] * cmr is elated
[20:12:04] *** Joins: orshem (orshem@81F00A95.B9DE554A.EB50AD2C.IP)
[20:12:08] *** Quits: ecr (Thunderbir@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[20:14:40] <bblum> jld: how does the Option<~T> optimization work when it passes such an option to a more generic function that expects Option<T>?
[20:14:49] <jld> bblum: Monomorphization.
[20:14:57] <bblum> oh yeah, of course
[20:15:31] <jld> bblum: Which is not quite as simple an answer as it sounds like, because the monomorphizer tries to deduplicate instances that should be the same.
[20:15:55] *** Joins: nslus (nslus@6BC3A018.3A8A22C3.59B6123A.IP)
[20:16:05] *** Quits: nslus (nslus@6BC3A018.3A8A22C3.59B6123A.IP) (Quit: Leaving.)
[20:16:10] *** Joins: nslus (nslus@6BC3A018.3A8A22C3.59B6123A.IP)
[20:16:57] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Computer has gone to sleep.)
[20:17:25] <bblum> jld: what does that mean?
[20:18:25] <sully> grum type_use grum
[20:18:29] <orshem> sorry for being obtuse, why is @mut bad? how does it lead to dynamic failure?
[20:18:48] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[20:19:01] *** Joins: eschweic (Adium@moz-BBE3ABD.mv.mozilla.com)
[20:19:12] <pnkfelix> orshem: http://www.smallcultfollowing.com/babysteps/blog/2012/11/18/imagine-never-hearing-the-phrase-aliasable/
[20:19:49] *** Joins: eschweic1 (Adium@moz-BBE3ABD.mv.mozilla.com)
[20:19:51] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[20:19:51] *** ChanServ sets mode: +o brson
[20:20:00] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[20:20:08] *** Quits: eschweic (Adium@moz-BBE3ABD.mv.mozilla.com) (Connection reset by peer)
[20:21:03] *** huseby is now known as husebyFEWD
[20:21:44] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[20:21:51] <jld> bblum: It's... sort of parametricity-lite.  foo::<int> and foo::<*T> are the same function, at least if foo's parameter bounds don't contain traits that can distinguish them.
[20:22:26] <cmr> orshem: It's not bad, it's just to be avoided if at all possible.
[20:22:55] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:22:59] <bblum> jld: oh, so you have to duplicate those again?
[20:23:00] <cmr> Less efficient, isn't sendable, dynamic failure
[20:23:07] <bblum> jld: what are other examples?
[20:23:12] <jld> bblum: Well, not *T, but &T and such.
[20:23:27] <bblum> sure, null is a legal value for *T
[20:23:35] <strcat> orshem: it's covered in the tutorial, freezing section
[20:23:53] <strcat> orshem: borrow & from @mut -> any modification through any @mut handle to it causes a failure
[20:24:00] <strcat> and borrowing &mut will fail
[20:24:11] <strcat> borrow &mut from @mut ->  borrowing another &mut, & or modifying it will fail
[20:24:39] <jld> bblum: The original author of that code might be able to comment more coherently on it.  (Or, someone who hasn't just spent the past 3.5 hours fighting videoconference software and breaking it worse than when it started and is about to finally leave for lunch.)
[20:24:52] <orshem> pnkfelix, cmr, strcat: thanks. I'm now reading it all again.
[20:25:02] *** Quits: thpickert (thpickert@moz-99F22CD3.dynamic.dsl.tng.de) (Quit: thpickert)
[20:25:08] <bblum> jld: i see, don't worry about it :P
[20:25:31] <Luqman> 23
[20:26:01] *** Quits: mark_edward (quassel@moz-4A5B1251.wisolt4.epbfi.com) (Ping timeout)
[20:26:11] *** Joins: mark_edward (quassel@moz-4A5B1251.wisolt4.epbfi.com)
[20:27:09] <orshem> in the tutorial, freezing section, why the need to deref and reref: let z = &*y; won't let z = y be the same?
[20:27:30] <orshem> they're both managed pointers to the same data
[20:27:31] <strcat> no
[20:27:37] <strcat> & isn't a managed ptr
[20:27:53] <strcat> &/&mut are just a pointer - no runtime machinery at all
[20:28:06] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[20:28:17] <orshem> so y is a borroed pointer not managed?
[20:28:29] <cmr> orshem: it doesn't have to be
[20:28:40] <cmr> the whole point of borrowed pointers is zero-overhead memory safety
[20:29:04] <orshem> but in the example is it?
[20:29:11] <orshem> right above here: https://github.com/mozilla/rust/blob/master/doc/tutorial.md#dereferencing-pointers
[20:29:35] <orshem> what is the type of x y and z?
[20:30:04] <cmr> z is &mut int, y and x are @mut int
[20:30:19] <cmr> or, z is &int, sorry
[20:31:35] *** [a]bacus is now known as abacus
[20:31:42] <orshem> cmr: ok thanks
[20:31:59] <orshem> so that's why the &* to change the type of the pointer
[20:32:37] *** bnicholson is now known as bnicholson|afk
[20:33:48] *** Joins: Jesse_ (jruderman@moz-BBE3ABD.mv.mozilla.com)
[20:34:01] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Connection reset by peer)
[20:40:11] *** Quits: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP) (Quit: Lost terminal)
[20:41:51] <orshem> i'm sorry for harping on but does @mut dynamic failure only occur as a result of a mixture of both @mut and borrowed pointers? right? as long as i'm using only @mut i'm in no danger 
[20:42:01] <doener> right
[20:42:12] <orshem> ok that's makes sense
[20:42:51] *** Joins: dummy (Mibbit@4872D98E.8F46EAB6.44CE36B8.IP)
[20:43:15] *** Quits: dummy (Mibbit@4872D98E.8F46EAB6.44CE36B8.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[20:43:18] *** Quits: eschweic1 (Adium@moz-BBE3ABD.mv.mozilla.com) (Quit: Leaving.)
[20:43:31] <orshem> thanks
[20:43:32] *** Joins: dherman_ (dherman@moz-BBE3ABD.mv.mozilla.com)
[20:43:44] *** Quits: nslus (nslus@6BC3A018.3A8A22C3.59B6123A.IP) (Quit: Leaving.)
[20:43:55] *** Quits: dherman (dherman@moz-BBE3ABD.mv.mozilla.com) (Connection reset by peer)
[20:43:55] *** dherman_ is now known as dherman
[20:44:00] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[20:44:14] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[20:44:14] *** ChanServ sets mode: +o tjc
[20:45:22] *** Quits: tikue (tkuehn@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[20:45:22] *** Quits: eatkinson (eatkinson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[20:46:02] *** Joins: eschweic (Adium@moz-BBE3ABD.mv.mozilla.com)
[20:46:02] *** Joins: eatkinson (eatkinson@moz-BBE3ABD.mv.mozilla.com)
[20:46:09] <orshem> the comments in vec.rs are out of sync with the code
[20:47:35] <doomlord_> not getting very far trying to add limited template support to bindgen :(
[20:48:05] *** Quits: timm (timm@moz-37B954AF.superkabel.de) (Input/output error)
[20:48:22] <orshem> new question: (sorry) if @mut is going away how will it its use case be replaced?
[20:48:28] <engla> orshem: please point out which comments are
[20:49:08] <orshem> the comment on unzip_slice for example refer two issues which has long been closed.. :)
[20:49:31] <orshem> the FIXME
[20:50:01] <doomlord_> I thought i could just replace some hard coded templates with my own rust equivalent so that i could get bindings of C++ classes with collection classes/smartptrs
[20:50:08] *** Joins: Jesin (Jessin_@moz-3AD6F09F.res.lehigh.edu)
[20:50:21] <engla> right ok. I'd guess the unzip functions are going to be removed in favor of iterators orshem 
[20:50:51] <doomlord_> but even this is proving an uphill struggle :) 
[20:51:39] *** Quits: dew (Instantbir@moz-2C6F2E2.dhcp.stls.mo.charter.com) (Ping timeout)
[20:52:31] <bstrie> pnkfelix nmatsakis: can either of you think of a good test case to round out https://github.com/mozilla/rust/issues/2355 ?
[20:52:48] *** Quits: tcsc (tcsc@moz-ADC0ED45.hsd1.ct.comcast.net) (Quit: computer sleeping)
[20:54:41] *** Quits: maxli (maxli@moz-AC89B3C8.vlan445.asr1.yyz1.gblx.net) (Quit: Leaving.)
[20:54:55] *** Joins: Nisstyre (wes@moz-FD86289.netflash.net)
[20:55:17] *** Joins: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP)
[20:55:21] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[20:55:28] *** Joins: steven_is_false (user@7F13409A.459BA655.23E4E477.IP)
[20:56:47] <steven_is_false> What's the official style for if else expressions?
[20:57:06] <orshem> I wonder how rust will perform using stack data when possible but using @ for everything else (without unique or borrowed pointers)
[20:57:09] <cmr> steven_is_false: like `if foo { x } else { bar }`?
[20:57:26] <bstrie> steven_is_false: not sure how there's room for interpretation there :P
[20:57:32] <orshem> looking at go memory usage should be similar or better
[20:57:34] <steven_is_false> I meant for multiline expressions like if foo { \n bar \n } else { \n car \n }
[20:57:42] <cmr> ah
[20:57:42] <steven_is_false> Where \n stands for a newline
[20:57:50] <bstrie> steven_is_false: oh you mean brace style, do whatever, nobody cares
[20:57:59] <steven_is_false> bstrie: :(
[20:58:03] <cmr> that's the style I use
[20:58:06] <bstrie> eventually the pretty printer will solve the problem and people can continue not caring :)
[20:58:13] <cmr> bstrie: "eventually"
[20:58:17] <bstrie> indeed
[20:58:32] <bstrie> cmr: btw I know you're busy rewriting rustdoc but can you also rewrite the pretty printer. and rusti
[20:58:50] <steven_is_false> A problem with the pretty printer is that rust has statements that are also expressions.
[20:58:54] <bstrie> steven_is_false: fwiw that's the style I use too. but really, it's a silly argument
[20:59:22] *** Quits: true_droid (Adium@moz-123FD9B8.beck.volia.net) (Quit: Leaving.)
[20:59:28] <engla> bstrie: is it enough with a testcase for  <A: Iterator<A>> ?
[20:59:45] *** Quits: doener (doener@moz-121949B3.unitymediagroup.de) (Quit: leaving)
[21:00:06] <bstrie> engla: that's the thing, I have no damn idea what f-bounded polymorphism is! pnkfelix mentions writing a more substantial test case in the comments, I was wondering if one ever materialized
[21:00:24] <engla> ok, well I don't have any idea either
[21:00:45] <cmr> http://work.tinou.com/2009/07/wtf-is-fbounded-polymorphism.html heh
[21:00:52] <bstrie> haha
[21:00:59] *** Quits: orshem (orshem@81F00A95.B9DE554A.EB50AD2C.IP) (Ping timeout)
[21:01:07] *** Joins: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net)
[21:01:19] *** kimundi is now known as zz_kimundi
[21:01:21] *** Quits: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP) (Ping timeout)
[21:02:01] <cmr> bstrie: I don't really want to touch the pretty printer, sorry! :p
[21:02:08] <bblum> ok runtime people, have a gander
[21:02:10] <bblum> https://github.com/mozilla/rust/pull/7858
[21:02:14] <bblum> toddaaro ecr sully
[21:02:51] *** ozten is now known as ozten|mtg
[21:03:15] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[21:04:25] *** Jesse_ is now known as Jesse
[21:04:28] *** Quits: mark_edward (quassel@moz-4A5B1251.wisolt4.epbfi.com) (Ping timeout)
[21:06:19] *** Quits: eschweic (Adium@moz-BBE3ABD.mv.mozilla.com) (Quit: Leaving.)
[21:07:12] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[21:07:20] *** Quits: zslayton1 (Mibbit@1D191528.269AFE30.6A3AF4D7.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[21:07:24] *** Joins: tikue (tkuehn@moz-BBE3ABD.mv.mozilla.com)
[21:07:41] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[21:11:22] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[21:11:49] *** Quits: Ms2ger (Ms2ger@54323780.629A11C5.3773EA9F.IP) (Quit: nn)
[21:12:00] <steven_is_false> Ugh, how do I import the utility iterator methods like any into a crate in rust itself (like librustpkg?)
[21:12:26] *** husebyFEWD is now known as huseby
[21:12:40] <cmr> steven_is_false: IteratorUtil is in the prelude
[21:12:45] *** Joins: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com)
[21:13:15] <steven_is_false> cmr: Right but the crates in Rust itself don't import the prelude right?
[21:13:24] <cmr> steven_is_false: all but libstd do
[21:13:30] <cmr> they don't have #[no_std] anymore.
[21:13:50] <steven_is_false> cmr: Hmm.
[21:13:55] *** Quits: mye (mye@moz-9A61833B.dip0.t-ipconnect.de) (Quit: mye)
[21:14:18] <steven_is_false> Yep, I'm working on old code.
[21:14:20] *** Joins: orshem (orshem@81F00A95.B9DE554A.EB50AD2C.IP)
[21:14:27] <steven_is_false> I made a mistake with git checkout.
[21:14:49] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[21:17:22] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[21:17:59] *** zz_kimundi is now known as kimundi
[21:19:40] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[21:20:12] *** Quits: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net) (Quit: msingle)
[21:20:16] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Connection reset by peer)
[21:22:33] <sully> arbjksadlfjad hidden invariants in metadata
[21:23:03] <sully> turns out we depend on methods inside impls not having their parent item encoded
[21:23:25] <sully> because that's how decode distinguishes between regular static methods and inherent ones
[21:23:27] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[21:23:29] *** Quits: noam (noam@F6B530A7.720527A7.416762B.IP) (Ping timeout)
[21:23:30] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[21:24:52] *** Joins: noam (noam@F6B530A7.720527A7.416762B.IP)
[21:26:01] <steven_is_false> What's the equivalent of Haskell's >>= operator for the option type?
[21:26:16] <steven_is_false> It's called something like chain right?
[21:26:23] <sully> chain
[21:26:26] *** Joins: zslayton1 (Mibbit@1D191528.269AFE30.6A3AF4D7.IP)
[21:26:28] <steven_is_false> sully: Thanks
[21:27:32] *** Quits: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net) (Input/output error)
[21:28:04] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:28:58] *** Quits: reyre (reyre@86C3727C.33EE9F8A.1139E686.IP) (Client exited)
[21:29:01] *** Joins: reyre (rick@B2D8AB09.33EE9F8A.1139E686.IP)
[21:29:35] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Computer has gone to sleep.)
[21:30:41] *** Joins: jedestep (jedestep@34641662.FB4DE631.66C78B76.IP)
[21:31:47] *** Joins: robertknight (robertknig@moz-B6DD6E0B.range86-166.btcentralplus.com)
[21:31:47] *** Quits: tikue (tkuehn@moz-BBE3ABD.mv.mozilla.com) (Quit: tikue)
[21:31:59] <engla> chain or chain_ref
[21:32:54] *** Quits: orshem (orshem@81F00A95.B9DE554A.EB50AD2C.IP) (Quit: Leaving)
[21:33:22] <cmr> rusti: enum Foo { A {}, B<T> {x: B} }
[21:33:23] -rusti- <anon>:7:27: 7:28 error: expected `}` but found `<`
[21:33:23] -rusti- <anon>:7          enum Foo { A {}, B<T> {x: B} }
[21:33:24] -rusti-                                     ^
[21:33:24] -rusti- application terminated with error code 101
[21:34:03] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[21:36:04] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[21:39:28] <doomlord_> ast::Path{ spane,global,idents,rp,types:~[]} ... is  'types' a list of template type arguments ?
[21:39:34] <cmr> doomlord_: yep
[21:40:03] <cmr> someone needs to add a comment in the source about that
[21:40:06] * cmr does it now
[21:40:33] *** Joins: bytbox (s@moz-DC83764A.washdc.fios.verizon.net)
[21:41:13] <doomlord_> i kind of guessed from context and trying to track down where to stick the template arguemnts, seemed that was the only place it could go :)
[21:41:20] <cmr> yup
[21:41:28] <cmr> very confusing though, imo
[21:41:42] <cmr> especially when you're not working from that angle
[21:42:19] <doomlord_> my intermediate is called 'type_params'
[21:42:19] *** Parts: steven_is_false (user@7F13409A.459BA655.23E4E477.IP) (ERC Version 5.3 (IRC client for Emacs))
[21:43:01] <doomlord_> sometimes i found myself annotating tuples with typedefs, not sure if thats a bad idea or not
[21:43:13] *** Quits: eatkinson (eatkinson@moz-BBE3ABD.mv.mozilla.com) (Quit: eatkinson)
[21:43:14] <doomlord_> (makes it harder to see what the real type is..)
[21:43:42] <cmr> could also use a tuple struct (`struct Foo(T1, T2)`) if you actually want to give a name to it
[21:44:03] *** Quits: webber46 (webber46@moz-98D2F3C5.cust.bredband2.com) (Quit: webber46)
[21:44:14] <doomlord_> ok
[21:44:32] <doomlord_> this isn't making me feel as stupid as haskell did
[21:44:48] <doomlord_> my excuse is its the number of wrapped libraries here :)
[21:45:24] <sully> strcat: yup, the culprit for the debug crashes is in fact 811855, 'remove headers from unique vectors'
[21:46:04] <strcat> sully: can you try to get it down to a simple test case?
[21:46:18] <strcat> I have a fairly good idea about the whole flow of those types through trans
[21:46:29] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[21:46:29] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/nIzV6g
[21:46:29] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[21:46:46] <sully> so, I have an easy to reproduce test case, but it isn't simple
[21:47:38] <sully> hm, I'll file a bug
[21:47:38] *** Joins: tcsc (tcsc@moz-ADC0ED45.hsd1.ct.comcast.net)
[21:49:20] *** Joins: timm (timm@moz-37B954AF.superkabel.de)
[21:49:27] *** Quits: heftig (heftig@moz-E56E7873.dip0.t-ipconnect.de) (Ping timeout)
[21:49:29] *** Joins: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP)
[21:49:29] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/i2-Xug
[21:49:29] *** Parts: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP) ()
[21:50:29] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[21:51:07] *** Joins: mark_edward (quassel@moz-4A9A2F15.dynamic.utc.edu)
[21:51:08] *** Joins: ecr (Thunderbir@moz-BBE3ABD.mv.mozilla.com)
[21:52:27] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[21:52:29] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[21:52:29] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/i2-Xug
[21:52:29] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[21:52:31] *** Joins: ghrust (ghrust@CFE85B59.6A2AE50.F3114085.IP)
[21:52:31] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/aKaZ9A
[21:52:31] <ghrust> 13rust/06auto 143e57251 15BjÃ¶rn Steinbrink: Remove duplicated code from trans_intrinsics...
[21:52:31] <ghrust> 13rust/06auto 1415ea4a8 15BjÃ¶rn Steinbrink: Generate better code for intrinsics...
[21:52:31] <ghrust> 13rust/06auto 14798559f 15bors: auto merge of #7851 : dotdash/rust/intrinsics, r=pcwalton
[21:52:33] *** Parts: ghrust (ghrust@CFE85B59.6A2AE50.F3114085.IP) ()
[21:53:08] *** Parts: glinscott (garylinsco@789A6618.53EB7C1.FFFE3AA.IP) ()
[21:54:11] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[21:54:11] *** ChanServ sets mode: +o brson
[21:54:18] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Quit: ChatZilla 0.9.90 [Firefox 22.0/20130618035212])
[21:54:26] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[21:54:29] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[21:54:30] *** ChanServ sets mode: +o brson
[21:54:47] <brson> ecr: do you have dns bindings on your radar?
[21:54:54] *** Quits: johns (johns@2557E599.66715431.D25A875A.IP) (Ping timeout)
[21:55:02] *** Joins: johns (johns@moz-BBE3ABD.mv.mozilla.com)
[21:55:05] <pcwalton> merge failure!!!!!!!!!!!!!!!!!!!!!!!!!
[21:55:11] <pcwalton> graydon: can we please close the tree
[21:55:13] <graydon> sure
[21:55:59] *** graydon changes topic to 'TREE IS CLOSED : http://www.rust-lang.orgÂ | logs at https://botbot.me/mozilla/rust/ and http://irclog.gr/#browse/irc.mozilla.org/rust | http://huonw.github.io/isrustfastyet/mem/ | landings http://buildbot.rust-lang.org/bors/bors.html'
[21:56:14] <cmr> Is there any fanciness that will allow me to not use two matches here? https://github.com/cmr/rustdoc_ng/blob/master/visit.rs#L55
[21:56:54] <cmr> Ideally it'd be, like, (name, visibility): match x.node.kind { ... => (Some(id), Some(vis)), _ => (None, None) }
[21:57:21] <graydon> pcwalton: bors is off, all builds interrupted
[21:57:26] <pcwalton> graydon: thanks
[21:58:08] *** Joins: heftig (heftig@moz-E8A91210.dip0.t-ipconnect.de)
[21:59:18] *** Quits: cowboyd (cowboyd@moz-1BD02A1E.sw.biz.rr.com) (Client exited)
[21:59:49] <Luqman> cmr: let (name, visibility) = match x.node.kind { ast::named_field(id, vis) => (Some(id), Some(vis)), _ => (None, None) };
[21:59:51] <sully> strcat: https://github.com/mozilla/rust/issues/7860
[21:59:54] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[21:59:54] <ghrust> 01[13rust01] 15pcwalton pushed 10 new commits to 06master: 02http://git.io/xrM8AA
[21:59:54] <ghrust> 13rust/06master 14b4e674f 15Patrick Walton: librustc: Add a lint mode for unnecessary `copy` and remove a bunch of them.
[21:59:54] <ghrust> 13rust/06master 1499b33f7 15Patrick Walton: librustc: Remove all uses of "copy".
[21:59:55] <ghrust> 13rust/06master 1499d44d2 15Patrick Walton: librustc: Remove `copy` expressions from the language.
[21:59:57] <pcwalton> pushed
[21:59:58] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[21:59:59] <cmr> Luqman: they are struct fields
[22:00:20] <cmr> pcwalton: you wanted to push to auto
[22:00:24] <cmr> there are no master tests
[22:00:28] <Luqman> cmr: yea, before the struct then just use name/visibility in the struct
[22:00:36] <pcwalton> oh
[22:00:37] <cmr> Luqman: ah, of course
[22:00:46] *** Quits: robertknight (robertknig@moz-B6DD6E0B.range86-166.btcentralplus.com) (Ping timeout)
[22:00:48] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[22:00:48] <ghrust> 01[13rust01] 15pcwalton 04force-pushed 06auto from 14798559f to 143f8d548: 02http://git.io/N3iJvQ
[22:00:48] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[22:00:58] <strcat> sully: so, reflect.rs and repr.rs in libstd are what visits the types
[22:00:59] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[22:01:04] <strcat> there's visit_estr_uniq
[22:01:08] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[22:01:08] *** ChanServ sets mode: +o tjc
[22:01:09] <strcat> and visit_estr_uniq_managed
[22:01:14] <strcat> hrm wait no
[22:01:20] *** Joins: eatkinson (eatkinson@moz-BBE3ABD.mv.mozilla.com)
[22:01:21] <strcat> that's for vectors, sorry ;p
[22:01:25] <strcat> all strings are without headers
[22:01:31] <strcat> anyway, let me take a look...
[22:01:40] *** Joins: Archer (Archer@moz-B3C4C551.bb.online.no)
[22:02:19] <pcwalton> argh, bitrot
[22:02:55] *** Quits: darkf (darkf@moz-F9058B8A.net) (Client exited)
[22:03:25] <strcat> sully: hm, should that example be failing?
[22:03:28] <strcat> it runs fine for me
[22:03:38] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[22:03:39] <doomlord_> wow!
[22:03:52] <strcat> oh wait I wasn't at the tip of master, sec
[22:04:22] <strcat> sully: it runs fine :(
[22:04:42] <strcat> hrm wait
[22:04:50] <strcat> you mean there's a segfault inside rustc, I misunderstood
[22:05:02] <sully> yes
[22:05:35] <sully> when run with debugging enabled for the module I said
[22:05:39] <sully> meth
[22:05:52] <sully> hm.... the vector is /empty/ in the case this is failing
[22:06:12] *** Joins: strcat1 (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[22:06:15] <strcat1> sully: well if it has offsets wrong...
[22:06:23] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (NickServ (GHOST command used by strcat1))
[22:06:36] *** Quits: vladimir-lu (vladimir-l@moz-428433D9.cable.virginmedia.com) (Ping timeout)
[22:07:03] <sully> oh, wait
[22:07:05] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (NickServ (GHOST command used by strcat1))
[22:07:11] *** strcat1 is now known as strcat
[22:07:19] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[22:07:25] <sully> hm, the *stage1* compiler is crashing
[22:07:31] <strcat> sully: it still won't die for me
[22:07:35] <strcat> sully: but not stage2?
[22:07:55] <strcat> it's totally possible that I messed up the stage stuff ;]
[22:08:13] <sully> yeah, looks like stage2 works
[22:08:28] <sully> ah, and the "reduced test case" that I wrote, but that worked just fine
[22:08:31] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[22:08:43] <sully> segfaults when compiled with stage0
[22:08:46] <strcat> sully: I had to change the TyVisitor stuff so maybe I did it wrong
[22:09:05] <strcat> the tests are only run in stage2 so...
[22:09:09] <strcat> that's what I got it working for ;p
[22:09:27] <cmr> snapshot!
[22:10:15] <strcat> the headers go away when you compile the stage1 libstd
[22:10:21] *** Quits: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP) (Ping timeout)
[22:10:25] <sully> oh, yeah, that's what happened
[22:10:35] <sully> the library isn't in sync with the code generated by the stage0 compiler
[22:10:43] <cmr> rusti: fn foo() { extern mod extra; use extra::json::ToJson; let s = ~"foo"; println(fmt!("%?, s.to_json)); }
[22:10:43] -rusti- <anon>:9:19: 9:20 error: unknown start of token: 63
[22:10:44] -rusti- <anon>:9     println(fmt!("%?", r))
[22:10:44] -rusti-                             ^
[22:10:44] -rusti- application terminated with error code 101
[22:10:49] *** Quits: timm (timm@moz-37B954AF.superkabel.de) (Input/output error)
[22:10:55] <cmr> rusti: fn foo() { extern mod extra; use extra::json::ToJson; let s = ~"foo"; println(fmt!("%?", s.to_json)); } foo()
[22:10:56] -rusti- <anon>:7:20: 7:37 error: "extern mod" declarations are not allowed here
[22:10:56] -rusti- <anon>:7          fn foo() { extern mod extra; use extra::json::ToJson; let s = ~"foo"; println(fmt!("%?", s.to_json)); } foo()
[22:10:56] -rusti-                              ^~~~~~~~~~~~~~~~~
[22:10:56] -rusti- error: aborting due to previous error
[22:10:57] -rusti- application terminated with error code 101
[22:11:01] <cmr> bah!
[22:11:06] <strcat> sully: I think I know how to fix it
[22:11:09] <strcat> I'll give you a diff
[22:11:20] <sully> well, just snapshot
[22:11:29] <strcat> well I know where I screwed up :)
[22:12:17] <sully> (I mean, it would have been better to not break it, but at this point the easiest fix is probably snapshotting)
[22:12:26] <sully> I rewrote the debug prints to work
[22:12:29] *** Quits: jedestep (jedestep@34641662.FB4DE631.66C78B76.IP) (Ping timeout)
[22:12:34] <sully> since that is a pretty silly way to be formatting those anyways
[22:13:09] <strcat> sully: http://ix.io/6Ip that should work
[22:13:11] <strcat> I think...
[22:13:35] <strcat> oh and also strings
[22:13:45] <strcat> hrm
[22:13:52] <strcat> I think strings should still be fine
[22:13:54] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[22:14:00] <strcat> just not vectors
[22:14:52] *** Joins: MaikKlein1 (maik@moz-EF706AF.dip0.t-ipconnect.de)
[22:15:31] <strcat> anyway the TyVisitor stuff is pretty strange.
[22:16:05] *** Joins: ghrust (ghrust@E7A4CCE2.6A2AE50.F3114085.IP)
[22:16:05] <ghrust> 01[13rust01] 15pcwalton pushed 1 new commit to 06auto: 02http://git.io/v6FJKA
[22:16:05] <ghrust> 13rust/06auto 143d13d4b 15Patrick Walton: libextra: Add a stray deriving or two.
[22:16:05] *** Parts: ghrust (ghrust@E7A4CCE2.6A2AE50.F3114085.IP) ()
[22:16:08] *** Joins: ghrust (ghrust@CFE85B59.6A2AE50.F3114085.IP)
[22:16:08] <ghrust> 01[13rust01] 15pcwalton merged 06auto into 06master: 02http://git.io/81bs8Q
[22:16:08] *** Parts: ghrust (ghrust@CFE85B59.6A2AE50.F3114085.IP) ()
[22:16:44] <sully> removing that would need to be properly timed with a snapshot, too
[22:17:00] <pcwalton> anyone want to rename all the remaining "unwrap"s to "get"s?
[22:17:32] <graydon> pcwalton: was that .. it?
[22:17:41] <pcwalton> graydon: I pushed one earlier
[22:17:44] <pcwalton> 10 commits
[22:17:51] <graydon> ah I see
[22:17:52] <pcwalton> this was a followup to address another botched merge
[22:18:02] <graydon> so we're done? shall I trigger an auto build?
[22:18:07] <pcwalton> yeah, it's all landed.
[22:18:17] <graydon> let's see if auto likes it before we get bors all snitty :)
[22:18:31] <strcat> sully: yeah it's all very confusing to sync together
[22:18:42] <strcat> since it changes trans + lang items
[22:18:46] <strcat> and also library code
[22:19:08] <strcat> the vector_exchange_malloc fn never made it to stage0 ;p
[22:19:13] <graydon> brson: if I want to build a thing that performs transactions-at-a-distance between tasks and a central db, do I want to use comm::oneshot and send little requests / wait for responses? or a rwarc perhaps?
[22:19:17] <strcat> since I added/removed it since the last snapshot
[22:19:27] <graydon> (I guess this question is for everyone; I've done very little comms programming)
[22:20:51] <brson> graydon: use comm::stream probably
[22:21:11] <brson> graydon: and your messages will send oneshots on which the db should send the result
[22:21:22] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[22:21:33] <strcat> sully: heh and my patch is a bit broken
[22:21:39] * strcat forgot to access the field
[22:21:42] <graydon> ok. is that any better than just contending a rwarc that holds the db as a non-active object?
[22:21:50] <MaikKlein1> hm can we use rwarc on different machines oO?
[22:22:11] <graydon> this is one machine
[22:22:14] <MaikKlein1> ah ok
[22:22:23] <graydon> by "distance" I mean in multiple tasks
[22:22:33] <strcat> graydon: which db is it btw?
[22:22:45] <brson> graydon: hard to say what 'better' means here. message passing is more rusty. if you're concerned with perf then _maybe_ a rwarc will be faster
[22:22:52] <graydon> for "db" here read "hashtable that regularly writes itself to the filesystem"
[22:23:03] <graydon> brson: I'm concerned primarily with how much work it is to write :(
[22:23:14] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[22:23:26] <graydon> I realize message passing is rusty, but this is pretty much "tasks performing transactions against a table"
[22:24:03] <cmr> pcwalton: .unwrap() was removed?
[22:24:05] <strcat> I guess you could wrap it behind a RWARC
[22:24:17] <pcwalton> cmr: it's gone for option I think but not for result... or the other way around
[22:24:30] <brson> graydon: it would take slightly less code to create and clone a bunch of rwarcs then spawn a bunch of tasks to hold them
[22:24:30] *** Joins: ross (ross@moz-8A84103E.br.br.cox.net)
[22:25:01] <brson> *a single rwarc
[22:25:01] <strcat> sully: https://github.com/thestinger/rust/commit/28a0cb4419de81b449a8b84f2da66c20f45f706d actually working patch, I think :)
[22:25:08] <graydon> mhm. this is a curious thing. I guess I'm leaning towards that but I like the temporal decoupling of messages. hm hm.
[22:25:12] <jack> is there no way to create unit tests programmatically?
[22:25:21] <graydon> jack: sure, compiletest does
[22:25:28] <graydon> er, well, depends; what do you mean?
[22:25:44] <jack> graydon: i want to make the reftests work with unittest like output
[22:25:47] <jack> (for servo)
[22:25:51] <graydon> yup
[22:26:30] <graydon> totally doable. see compiletest/compiletest.rs => test::run_tests_console
[22:26:38] <brson> jack: also, in servo, there was at one point a directory called 'reftest' that generated tests using the extra::test runner
[22:26:46] <graydon> you just need to compose a list of test descriptors and a test options struct
[22:26:48] <brson> though it broke long ago
[22:27:09] <jack> graydon: looks like extra::tests isn't in the docs. that's why i missed it.
[22:27:15] <graydon> eek!
[22:27:22] <MaikKlein1> btw how does port.recv work. is it just loop { if(port.got_message) return sth)} ?
[22:27:26] <jack> brson: i've rewritten it completely.
[22:27:29] <brson> i think that's intentional. it was never intended to be a supported api
[22:27:49] <graydon> I would like to ... mature extra::test into something supported. it's pretty great!
[22:27:59] <graydon> but step by step. we're discovering what we need there as we go.
[22:28:39] *** Quits: Azdle (Azdle@moz-B334B496.hfc.comcastbusiness.net) (Ping timeout)
[22:28:59] <jack> ok. if i find anything weird i'll report it
[22:29:02] <strcat> rusti: fmt!("%?", @mut 5)
[22:29:03] -rusti- ~"@5"
[22:29:12] <strcat> might as well make that print as @mut 5 while I'm looking at this file
[22:29:36] <strcat> rusti: fmt!("%?", @mut [5])
[22:29:38] -rusti- ~"@[mut 5]"
[22:29:43] <strcat> ugh
[22:29:53] <strcat> rusti: fmt!("%?", @mut "foo")
[22:29:54] -rusti- ~"@\"foo\""
[22:30:04] <pcwalton> yay for consistency
[22:30:17] *** Quits: tcr (tcr@D26BCFC9.C2203064.EDCE493E.IP) (Client exited)
[22:30:21] <brson> jack: ok, but if you want to see how to drive extra::test, the old reftest may be easier to understand than compiletest - compiletest is pretty overgrown
[22:30:47] <strcat> huh
[22:30:54] <strcat> we pass mtbl as a uint
[22:31:00] <strcat> I hope there's not something masked into it
[22:31:20] <pcwalton> graydon: are the bots running tests on my push?
[22:31:21] <pcwalton> I'm done now
[22:31:37] <graydon> pcwalton: triggering now
[22:31:56] *** Joins: aatch (aatch@moz-B437F499.pocketrent.com)
[22:31:57] <sully> how likely is my change to conflict with yours once it lands?
[22:31:59] <sully> just curious
[22:32:00] <pcwalton> MaikKlein1: no, it puts the task to sleep inside the port
[22:34:04] <zslayton1> pcwalton: I remember back in v0.5 (I think?), pipes were said to be pretty slow and that I/O rework was planned/underway. Has that work finished?
[22:34:16] <pcwalton> it's not
[22:34:18] <pcwalton> getting close
[22:34:30] <zslayton1> oh, okay. Cool!
[22:34:41] <sully> oh, no. a conflict in encoder.rs
[22:35:33] *** Joins: maxli (maxli@B5559308.9C54E60.2FA4EA88.IP)
[22:35:42] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[22:35:55] *** Joins: eschweic (Adium@moz-BBE3ABD.mv.mozilla.com)
[22:36:08] <strcat> huh
[22:36:12] *** Joins: tikue (tkuehn@moz-BBE3ABD.mv.mozilla.com)
[22:36:14] <strcat> it actually tries to write a mut qualifier
[22:36:19] *** Joins: eschweic1 (Adium@moz-BBE3ABD.mv.mozilla.com)
[22:36:22] <strcat>         self.writer.write_char('@');
[22:36:23] *** Quits: eschweic (Adium@moz-BBE3ABD.mv.mozilla.com) (Connection reset by peer)
[22:36:25] <strcat>         self.write_mut_qualifier(mtbl);
[22:36:35] <strcat> weird
[22:37:41] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[22:38:05] <strcat> rusti: fmt!("%?", @mut [1, 2])
[22:38:06] -rusti- ~"@[mut 1, mut 2]"
[22:38:23] <MaikKlein1> pcwalton, ok thanks, where would I need to look for this? in pipes.rs?
[22:38:26] <strcat> uh
[22:38:28] <cmr> is that even valid rust? O_o
[22:38:33] <pcwalton> MaikKlein1: it's in pipes.rs and also std/rt/*
[22:38:48] *** ozten|mtg is now known as ozten
[22:38:49] *** Joins: BitPuffin (quassel@moz-49828767.cust.tele2.se)
[22:38:49] <MaikKlein1> pcwalton, ok thanks
[22:39:44] <strcat> cmr: fixing it
[22:39:48] <strcat> it's really bad
[22:39:58] <strcat> but I don't know what's wrong with @ vs @mut
[22:40:06] <strcat> messed up visit glue
[22:40:10] <strcat> my least favourite glue!
[22:40:25] * strcat knows how to fix @mut [1, 2] though
[22:41:22] <strcat>     exact_test(&(@mut [1, 2]), "@mut [1, 2]");
[22:41:24] <strcat> lets see...
[22:41:50] <MaikKlein1> I see we are already using an event system for tasks under the hood "fn task_signal_event", but it's in rt. the runtime will be gone soon right?
[22:42:20] <MaikKlein1> at least thats what I heard
[22:42:38] <jasom> is it possible to reference the struct itself in a struct literal?
[22:42:55] <jasom> (e.g. for a literal circular reference)
[22:43:06] <aatch> jasom, no.
[22:43:06] *** Quits: tikue (tkuehn@moz-BBE3ABD.mv.mozilla.com) (Quit: tikue)
[22:43:23] <sully> hm, I have a PR to submit, but I guess I should wait until pcwalton's stuff lands?
[22:43:24] <MaikKlein1> jasom, y but you need to use a pointer, if you mean struct Foo { f: ~Foo}
[22:43:29] <sully> since it will probably fial to merge
[22:43:35] <cmr> MaikKlein1: that's a declaration, not a literal
[22:43:46] <MaikKlein1> oh whats a literal again?
[22:43:58] *** Joins: jdm (jdm@moz-AC89B3C8.vlan445.asr1.yyz1.gblx.net)
[22:44:03] *** Quits: dherman (dherman@moz-BBE3ABD.mv.mozilla.com) (Quit: dherman)
[22:44:22] *** Quits: zslayton1 (Mibbit@1D191528.269AFE30.6A3AF4D7.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:44:28] <cmr> construction of a value
[22:44:38] *** Joins: dherman (dherman@moz-BBE3ABD.mv.mozilla.com)
[22:44:38] *** ChanServ sets mode: +o dherman
[22:44:39] <jasom> MaikKlein1: when you create a struct like: Circle { radius : 3 }
[22:44:40] <aatch> jasom, you cannot reference a partially-constructed value
[22:44:58] <MaikKlein1> ah i see
[22:45:05] <pcwalton> sully: it landed
[22:45:06] <jasom> aatch: durn.  I may need to add a zero type to my enum just to allow partially initialized structs then
[22:45:07] <strcat> cmr: it's messed up
[22:45:13] <strcat> it treats @T as an opaque box
[22:45:15] <sully> oh, so is the tree open again?
[22:45:17] <strcat> so it doesn't know if it's mutable
[22:45:25] <pcwalton> sully: I think so (check with graydon)
[22:45:36] <strcat> rusti: fmt!("%?", @mut "foo")
[22:45:37] -rusti- ~"@\"foo\""
[22:45:48] <graydon> tree is not quite open
[22:45:49] <graydon> it's building
[22:46:20] <graydon> will be open in an hour and a half, give or take
[22:46:23] *** Quits: SimonSapin (simon@moz-D0C2F181.zone2.bethere.co.uk) (Ping timeout)
[22:46:27] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[22:46:27] <jasom> aatch: Common Lisp does it with reader-magic: #1=('foo . #1#)
[22:47:08] <MaikKlein1> if I do let i = 5; then 5 is a literal?
[22:47:14] <jasom> MaikKlein1: yes
[22:47:43] <jasom> MaikKlein1: http://en.wikipedia.org/wiki/Literal_(computer_programming)
[22:47:46] *** Quits: Uther (Instantbir@moz-1B244B05.hfc.dyn.abo.bbox.fr) (Ping timeout)
[22:47:53] *** Quits: donri (dag@moz-9BB61102.tbcn.telia.com) (Client exited)
[22:48:02] *** Quits: tcsc (tcsc@moz-ADC0ED45.hsd1.ct.comcast.net) (Quit: computer sleeping)
[22:51:33] <strcat> rusti: fmt!("%?", @mut [@mut 5, @mut 6])
[22:51:34] -rusti- ~"@[mut @mut 5, mut @mut 6]"
[22:51:41] <strcat> wait what
[22:51:47] <strcat> rusti: fmt!("%?", @mut 5)
[22:51:48] -rusti- ~"@5"
[22:51:55] <strcat> yeah, visit glue sucks
[22:52:21] *** Quits: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com) (Input/output error)
[22:52:26] <strcat> don't know what an opaque box is
[22:52:31] <bblum> why do i have to rebuild llvm so often????
[22:52:36] <strcat> all I know is that it's used everywhere and it's horrible
[22:52:38] <bblum> this is my 2nd time today
[22:52:39] <strcat> :(
[22:52:46] <strcat> bblum: hrm, I don't
[22:52:53] <strcat> bblum: you're somehow touching mtime on the trigger file
[22:53:03] <strcat> bblum: you could just fudge it
[22:53:31] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[22:53:38] <strcat> src/rustllvm/llvm-auto-clean-trigger
[22:53:44] *** Quits: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net) (Ping timeout)
[22:55:20] <strcat> bblum: just touch -d "1920-05-14" llvm-auto-clean-trigger
[22:55:23] <strcat> and it should stop ;p
[22:56:12] *** Joins: jensnockert (jensnocker@moz-C5F27039.cust.bredband2.com)
[22:56:13] *** Joins: vk (vk@858480B7.B568D26C.93B001FA.IP)
[22:57:24] <sully> hm
[22:57:46] <sully> master is broken for me, it seems?
[22:58:13] <toddaaro> http://how-bazaar.blogspot.co.nz/2013/07/stunned-by-go.html
[22:58:16] <toddaaro> ecr just found that on Go
[22:58:21] <toddaaro> via hackernews
[22:58:57] <ecr> I'm pretty happy you can't do that with Rust
[22:59:51] *** Quits: eholk (eholk@moz-4FD9C8.uconnect.utah.edu) (Quit: eholk)
[22:59:52] <toddaaro> ecr: to be fair - you can unsafe { transmute<A,B>(yeeeaaaa) }
[23:00:11] *** Joins: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP)
[23:00:11] *** Joins: fread2282 (Mibbit@moz-76CA17C1.nat.asu.edu)
[23:00:12] *** Quits: jeff (jeff@moz-F81F6C4E.nyc.biz.rr.com) (Quit: jeff)
[23:00:17] <ecr> toddaaro: blasphemy
[23:00:18] <cmr> toddaaro: Are you sure about that?
[23:00:22] <strcat> ecr: well, interfaces are unlike anything in rust
[23:00:24] <cmr> I don't think that's possible with trait objects
[23:00:32] <fread2282> rusti: let mut x = @1; *x += 1; x
[23:00:34] -rusti- <anon>:7:25: 7:27 error: cannot assign to immutable dereference of @ pointer
[23:00:34] -rusti- <anon>:7          let mut x = @1; *x += 1; x
[23:00:34] -rusti-                                   ^~
[23:00:34] -rusti- error: aborting due to previous error
[23:00:34] -rusti- application terminated with error code 101
[23:00:34] <cmr> It can't just pull a vtable out of nowhere
[23:00:38] <fread2282> rusti: let mut x = ~1; *x += 1; x
[23:00:40] <strcat> ecr: they're dynamic typing with reflection
[23:00:40] -rusti- ~2
[23:00:53] <jensnockert> toddaaro: Yeah, that is insane.
[23:00:56] <fread2282> what is wrong here?
[23:01:01] *** Quits: sigma (sigma@51C589B3.EF2694B5.DFAC6AA7.IP) (Ping timeout)
[23:01:06] *** Joins: eholk (eholk@moz-4FD9C8.uconnect.utah.edu)
[23:01:10] <cmr> fread2282: nothing?
[23:01:11] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Textual IRC Client: www.textualapp.com)
[23:01:18] <strcat> ecr: the actual interface is just a guideline ;p
[23:01:21] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Connection reset by peer)
[23:01:27] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[23:01:33] <fread2282> cmr: then my understanding is wrong :)
[23:01:34] <cmr> fread2282: you can only mutate @mut
[23:01:35] <jensnockert> strcat: Just like traffic signs?
[23:01:43] <ecr> strcat: Right, but I'd thought they at least allowed you to enforce an ADT. Apparently not.
[23:01:44] <cmr> fread2282: @T is immutable
[23:01:49] <toddaaro> cmr: transmute yo, if you use transmute all bets are off
[23:02:00] *** huseby is now known as husebyERRAND
[23:02:02] <cmr> toddaaro: right, but it's just alchemy, it's not conjuration
[23:02:05] <strcat> ecr: well you can reflect on the type and get the concrete data type out of them, etc.
[23:02:27] <strcat> so if you take Writer, you can extract the real type (for a known set of types) and call anything on it
[23:02:28] <toddaaro> cmr: would transmute just fail here? it might - I guess the types are different sizes?
[23:02:39] *** Quits: fread2282 (Mibbit@moz-76CA17C1.nat.asu.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[23:02:50] <cmr> toddaaro: depends on what you're transmuting to/from, but I'd imagine it'd be a silent failure followed by dramatic runtime explosions
[23:03:15] <cmr> Assuming trait objects
[23:03:18] <toddaaro> I guess that is ok, as you would never escape your test suite with that nonsense
[23:03:26] <cmr> it's simply just not possible with parameterization
[23:04:13] <doomlord_> got some progress on my attempts to add  little rudimentry c++ binding ability in rustbindgen; i'm intending to allow manually translated collection class templates
[23:04:33] <doomlord_> i've got bindgen throwing the template parameters it finds across, but not the actual template definitions... 
[23:05:08] <doomlord_> ... my intention is to simplify what my interface c++ headers include with dummy collection classes (same layout) and i'll manually write rust equivalents
[23:05:21] <doomlord_> https://github.com/crabtw/rust-bindgen/pull/35
[23:05:33] <strcat> rusti: fmt!("%?", (@mut 5,))
[23:05:34] -rusti- ~"(@mut 5,)"
[23:05:38] <strcat> rusti: fmt!("%?", @mut 2)
[23:05:40] -rusti- ~"@2"
[23:05:47] *** Quits: kaeso (kaeso@moz-F21FF626.unstable.it) (Ping timeout)
[23:05:47] *** Quits: andor (andor@moz-708868D.neferty.me) (Ping timeout)
[23:05:47] *** Quits: jez0990 (quassel@moz-3BA8545E.kimsufi.com) (Ping timeout)
[23:05:56] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[23:06:02] <doomlord_> i wont take offense if these changes aren't welcome just yet, i'd apreciate any suggestions for improving the approach
[23:06:06] *** Quits: glandium (glandium@moz-A09032B1.kimsufi.com) (Ping timeout)
[23:06:17] *** Quits: pnathan (Adium@B9840254.2CD8A5F8.477B877D.IP) (Ping timeout)
[23:06:28] *** Quits: dherman (dherman@moz-BBE3ABD.mv.mozilla.com) (Quit: dherman)
[23:06:34] *** Quits: Seldaek (seld@moz-5DEA7688.ch) (Ping timeout)
[23:06:34] *** Joins: rusti_ (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[23:07:31] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[23:07:31] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[23:07:42] <homa_rano> dumb question: is there a valid syntax to swap values (a,b=b,a)?
[23:07:48] *** Joins: strcat1 (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[23:08:04] <jdm> util::swap :)
[23:08:05] <bblum> homa_rano: util::swap
[23:08:09] <jdm> there used to be <->
[23:08:10] <kmc> isn't there "a <-> b" or did i hallucinate that
[23:08:12] <jdm> but nevermore
[23:08:14] <kmc> ah
[23:08:24] <jdm> heh, hallucinating syntax
[23:08:24] <homa_rano> less dumb question: what about a,b=b,a+b?
[23:08:28] <jdm> those are the bad days
[23:08:37] <cmr> homa_rano: not in one step, not afaik
[23:08:59] <homa_rano> ok, thanks
[23:09:01] <bblum> kmc: that syntax used to exist half a year ago
[23:09:09] <bblum> it wasn't even the bad old days
[23:09:14] <bblum> it was just redundant
[23:09:43] <kmc> jdm: it wouldn't be the first time :)
[23:09:57] *** Quits: MaikKlein1 (maik@moz-EF706AF.dip0.t-ipconnect.de) (Ping timeout)
[23:10:49] <doomlord_> swap values .. mutability :)
[23:11:24] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[23:11:25] *** Quits: RMF (RMF@moz-F40FCF19.dsl.telepac.pt) (Quit: Textual IRC Client: www.textualapp.com)
[23:11:57] <doomlord_> were you tempted by gcc's operators for min / max ..  ?>  <?
[23:11:58] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[23:12:21] <strcat1> they removed those
[23:12:50] <strcat1> they were pretty terrible
[23:13:08] *** Joins: Seldaek (seld@E733C546.5464C2F1.F113998C.IP)
[23:13:15] *** Joins: glandium (glandium@DEB153B8.D2E4ABCD.A00B1FE4.IP)
[23:13:58] *** Joins: vermeille (vermeille@moz-436628F6.net)
[23:14:00] *** Joins: dherman (dherman@moz-BBE3ABD.mv.mozilla.com)
[23:14:00] *** ChanServ sets mode: +o dherman
[23:14:15] *** Joins: jez0990 (quassel@moz-3BA8545E.kimsufi.com)
[23:14:30] <bjz_> doomlord_: ?> <?   ??
[23:14:30] *** Joins: andor (andor@moz-708868D.neferty.me)
[23:14:57] <doomlord_> gcc used to have those as c extentions for min/max
[23:15:07] <bjz_> heh, neat
[23:15:10] *** Joins: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net)
[23:15:12] *** Joins: kaeso (kaeso@moz-F21FF626.unstable.it)
[23:15:44] <doomlord_> rusts' easier additon of named methods is better i guess :)
[23:15:55] <homa_rano> doomlord_: ...which one was which?
[23:16:12] <doomlord_> good question
[23:16:12] <homa_rano> they both imply the greater one gets chosen
[23:16:46] *** sam113101_afk is now known as sam113101
[23:16:57] <strcat1> <? was min
[23:18:01] <jensnockert> Go has some really surprising operators as well.
[23:18:03] <Luqman> homa_rano: you can do `let (a, b) = (b, a + b);`
[23:18:06] <jensnockert> &^ for example.
[23:18:17] <bjz_> ?
[23:18:40] <jensnockert> (Which is a & !b)
[23:19:27] <homa_rano> Luqman, that unfortunately doesn't work in a loop
[23:20:05] <homa_rano> jensnockert: well ^ is bitwise not, so a&^b == a& ^b
[23:20:18] <strcat1> use util::swap if you actually want to swap memory locations
[23:20:25] <jensnockert> homa_rano: Yeah, but it is an actual operator, at least according to the manual.
[23:20:38] <homa_rano> an actual operator, but not totally surprising
[23:20:45] <homa_rano> perhaps just in its existance
[23:21:17] *** Joins: timm (timm@moz-37B954AF.superkabel.de)
[23:21:26] <jensnockert> homa_rano: What is xor in Go btw?
[23:21:36] <homa_rano> also ^
[23:21:48] <jensnockert> That is just braindead /o\
[23:22:05] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[23:22:11] <homa_rano> makes sense to me; ^a == 0^a
[23:22:19] <homa_rano> sortof
[23:23:00] *** Quits: timm (timm@moz-37B954AF.superkabel.de) (Ping timeout)
[23:23:25] <kmc> wait but 0^a is not not-a
[23:24:07] <homa_rano> er, -1 I mean
[23:24:20] <homa_rano> xor and not are related in my brain anyway
[23:25:18] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[23:25:54] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[23:26:59] <mark_edward> jensnockert: i saw you're reddit post on SIMD
[23:27:03] *** Joins: dbaupp (Thunderbir@moz-712A1135.lns20.syd6.internode.on.net)
[23:27:04] <mark_edward> COOL STUFF BRO
[23:27:05] <jensnockert> mark_edward: \o/
[23:27:08] * jensnockert hugs mark_edward
[23:27:30] <cmr> it is very cool
[23:27:30] <mark_edward> it's so cool to see people doing all these interesting things in rust
[23:27:35] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[23:27:39] <mark_edward> who did the OpenCL stuff?
[23:27:46] <cmr> erickt I think
[23:28:00] <cmr> one of the various eric[k]'s
[23:28:00] <mark_edward> nice
[23:28:08] <cmr> http://www.catb.org/~esr/ecsl/
[23:28:20] <mark_edward> so will we be getting dependent types someday? i think it;d be a good addition...
[23:29:49] <sully> yeah, master is definitely broken
[23:29:51] <bstrie> nmatsakis: is https://github.com/mozilla/rust/issues/5033 the bug for associated items, or is "associated type synonyms" something different?
[23:29:57] *** Quits: vk (vk@858480B7.B568D26C.93B001FA.IP) (Ping timeout)
[23:29:57] <kmc> homa_rano: now you're assuming a 2s complement machine ;)
[23:30:00] <sully> due to calls to copy in compiletest
[23:31:26] <cmr> Ok so I need a name for the stuff following the variant name in a non-c-like enum variant
[23:31:39] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[23:31:46] <cmr> enum Foo { A (int, uint), B {a: uint, b: int} }
[23:32:03] <cmr> is there an official name for that?
[23:32:24] *** bnicholson|afk is now known as bnicholson
[23:32:45] *** Joins: tikue (tkuehn@moz-BBE3ABD.mv.mozilla.com)
[23:32:53] <bblum> cmr: structlike enum variants
[23:33:09] <bblum> oh, for the actual stuff
[23:33:10] <cmr> Sure, that's the name for the variant, but the actual *stuff* you use
[23:33:12] <cmr> yeah
[23:33:17] <cmr> it's for rustdoc's json output
[23:33:18] <Eridius> cmr: what do you call the T in ~[T]?
[23:33:26] <cmr> Eridius: I don't :p
[23:33:27] <bblum> members
[23:33:31] <cmr> members!
[23:33:33] <cmr> perfect
[23:33:34] <Eridius> there you go. variant member type, perhaps
[23:33:38] <cmr> good enoguh, at least
[23:33:40] <jensnockert> I call it element type :(
[23:33:47] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[23:33:51] <strcat1> jensnockert++
[23:34:04] <bblum> eholk: ping
[23:34:55] *** Joins: vk (vk@858480B7.B568D26C.93B001FA.IP)
[23:36:13] <cmr> graydon: ping
[23:36:20] <graydon> cmr: pong
[23:37:03] <eholk> bblum: pong
[23:37:09] <cmr> graydon: so once this prototype generates docs equal to or better than the current rustdoc, would it be possible to have the doc builder use it, but not yet land it in the tree? it'll need some serious cleanup (it's very prototype-quality code (messy and such), by design)
[23:37:23] <graydon> umm
[23:37:33] <graydon> I suppose. it'd be quite a lot of work to arrange..
[23:37:34] <bblum> eholk: what do you think the best plan of attack is for porting the pipe compiler to the new runtime?
[23:37:39] *** Quits: brendan (brendaneic@FB2030FC.5F77D495.B41F1B80.IP) (Quit: brendan)
[23:37:42] <cmr> graydon: you can say no :p
[23:37:52] <cmr> if it's not going to be easy that's fine
[23:38:03] <bblum> eholk: i was going to ask, do you think it'd be feasible to have pipec compile to code that uses the oneshots that already exist? but that is clearly nonsense because of the bounded memory thing
[23:38:07] <mark_edward> strcat1: opinion on dependent types... how much work is that?
[23:38:17] <bblum> eholk: actually, it might not be clearly nonsense; what do you think of that idea?
[23:38:18] <graydon> ok. I think no, though it's possible, I think it'd be best to just try to get it near-parity, do a build of the docs to showcase how it works, address people's concerns, cleanup, land etc. as usual
[23:38:21] <eholk> bblum: i think most of the stuff that should depend on the runtime is in pipes.rs
[23:38:28] <cmr> yep
[23:38:29] *** Joins: tiffnya (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net)
[23:38:41] *** Quits: mschifer (Adium@moz-BBE3ABD.mv.mozilla.com) (Quit: Leaving.)
[23:38:42] *** Quits: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net) (Ping timeout)
[23:38:43] <toddaaro> bblum: I do really want the bounded-memory protocol-style pipes in the runtime not pipes eventually
[23:38:44] <graydon> thanks. sorry, just pressed for time and it'd be a few days tooling to arrange
[23:38:58] <cmr> yeah no that's fine
[23:39:05] <strcat1> mark_edward: no idea, but I don't think it really fits into rust's type system
[23:39:06] <toddaaro> bblum eholk : they are just a super useful construct, though perhaps mostly as an implementation tool
[23:39:20] <mark_edward> strcat1: what do you mean? 
[23:39:35] <strcat1> I mean dependent typing would be proposing a new type system
[23:40:12] <strcat1> something like adding associated constants/types or allowing integers as type parameters seems more feasible to implement without changing everything
[23:40:20] <mark_edward> jensnockert seems to have a subset of what's needed implemented on his branch?
[23:40:26] <eholk> bblum: i think maybe the difference between one shots and packets is pretty small
[23:40:59] <jensnockert> mark_edward: I doubt it, I just hard-code it for SIMD types.
[23:41:01] <eholk> bblum: i guess maybe the question is could the protocols be implemented as macros on top of oneshots
[23:41:09] <mark_edward> jensnockert: ah, i see
[23:41:27] <bblum> yeah that's what i mean
[23:41:39] <mark_edward> i think it'd be pretty useful.. generalized fixed size/capacity containers, for example
[23:41:44] <bblum> eholk: i'm not worried about porting the guts, but i wonder about stuff like...implementing select to be compatible to select over a protocol-generated pipe and a newrt-style oneshot
[23:41:48] <mark_edward> SI unit types
[23:41:51] <eholk> bblum: the bounded protocol stuff is mostly about where the buffers come fromâ€¦ you might be able to add an extra pointer to the oneshot to points to the buffer (which I think is basically how it already works at some level)
[23:42:18] <eholk> also, if you update the pipe compiler, please make it use movable self. I've wanted to do that for a while, but I'm lazy
[23:42:25] <bblum> yes
[23:42:38] <bblum> stuff is a lot nicer nowadays with movable self
[23:42:39] <strcat1> mark_edward: I don't really think it's needed for containers
[23:42:46] <graydon> are we at the point yet where a struct can have a & to a thing that outlives it?
[23:42:48] <strcat1> you just need associated constants and/or integers as type parameters
[23:43:01] <strcat1> graydon: yes
[23:43:06] <aatch> graydon, depends on what you mean
[23:43:08] <strcat1> graydon: iterators work that way
[23:43:08] <cmr> graydon: maybe... but structs can only have one region parameter atm
[23:43:20] <mark_edward> strcat1: then what's the difference between that and C++ sstyle int template params?
[23:43:20] <cmr> so you can't have that plus & of a different region ;(
[23:43:21] <strcat1> graydon: look at the iterator in treemap.rs
[23:43:23] <graydon> strcat1: I would declare that like struct Foo<'a> { field: &'a Other; }
[23:43:23] <graydon> ?
[23:43:25] <eholk> bblum: i think select was pretty independent of the protocol compiler.. Either select is only implemented for a few of the standard protocols, or there's a trait that all pipes implement that is selectable (i think it's the latter)
[23:43:28] <strcat1> graydon: 'self
[23:43:33] <graydon> only 'self?
[23:43:41] <strcat1> graydon: there's a naming restriction, it acts like a normal lifetime though
[23:43:43] <bblum> eholk: yes, Selectable; i am looking at it now
[23:43:44] <graydon> ok
[23:43:44] *** strcat1 is now known as strcat
[23:43:47] <cmr> Or 'static I think? Maybe that's just traits
[23:43:55] <cmr> or impls
[23:43:56] <strcat> cmr: yeah 'static is allowed but always breaks
[23:43:57] * cmr can't remember
[23:43:58] <strcat> :D
[23:43:59] <cmr> heh
[23:44:00] <graydon> I never remember why that's so. is that going away?
[23:44:09] <aatch> graydon, that's fine, but struct Foo<'self> { field: &'self Other<'self> } can break
[23:44:11] <strcat> graydon: I think nmatsakis said it was a temporary restriction on naming
[23:44:13] <cmr> graydon: there's an open bug about it and niko wants to fix it
[23:44:14] <strcat> don't recall completely
[23:44:20] <graydon> ok
[23:44:36] <aatch> since it forces the borrow to last longer than it should.
[23:44:41] <strcat> graydon: the treemap iterator builds a whole stack of pointers into the tree though, without unsafe code
[23:44:53] <strcat> and then it ends up inside iterator adaptors with their own &'self fn stuff
[23:45:03] <aatch> We need struct Foo<'a,'b> { field: &'a Other<'b> }
[23:45:03] <strcat> all works well, without unsafe code
[23:45:10] * strcat already found most of the bugs :P
[23:45:14] *** Quits: vk (vk@858480B7.B568D26C.93B001FA.IP) (Quit: vk)
[23:45:14] <strcat> and most are fixed
[23:45:26] <graydon> and is it &mut 'self or &'self mut ?
[23:45:30] <strcat> 'self mut
[23:46:11] <bblum> &<l> <mq> <T>
[23:47:41] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[23:47:41] *** ChanServ sets mode: +o tjc
[23:48:29] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[23:48:32] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[23:48:32] *** ChanServ sets mode: +o brson
[23:50:35] <graydon> huh
[23:50:43] <graydon> it tells me "anonymous lifetimes are not permitted here"
[23:50:50] *** Joins: DeokjinKim (Mibbit@B4104EBB.3CC170B1.1E14B209.IP)
[23:51:04] *** Quits: rusti_ (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[23:51:08] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[23:51:18] <graydon> struct Work<'self, T> { prep: 'self Prep }
[23:51:25] <graydon> er
[23:51:26] <strcat> graydon: missing & ;p
[23:51:28] <graydon> struct Work<'self, T> { prep: &'self Prep }
[23:51:31] <strcat> hrm
[23:51:40] <bblum> is prep itself lifetime-parameterized?
[23:51:42] <cmr> Is T or Prep region-parameterized
[23:51:45] <bblum> &'self Prep<'self>
[23:51:49] <cmr> well not T
[23:51:50] *** Quits: dherman (dherman@moz-BBE3ABD.mv.mozilla.com) (Quit: dherman)
[23:51:50] <cmr> yeah
[23:51:52] <bblum> cmr: T cannot be, no HKT
[23:51:52] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[23:51:54] <cmr> right
[23:52:03] <cmr> Are they officially lifetimes and not regions?
[23:52:11] <cmr> I see region a lot in the source but that's not indicative of anything
[23:52:11] *** Quits: echristo (echristo@DCF57675.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[23:52:14] <bblum> that is the preferred terminology
[23:52:37] <strcat> cmr: the compiler has weird names for most things
[23:52:40] <cmr> rusti: enum Foo { pub A, priv C }
[23:52:43] -rusti- ()
[23:52:46] <cmr> interesting
[23:52:46] <Eridius> how does module visibility work? if I have a private module in my .rs file, I can apparently access public items within that module. But I assume that nobody else outside of this .rs file can do that?
[23:52:48] <graydon> I guess they have to be
[23:52:51] <strcat> graydon: do you remember why strings/vectors are called estr/evec?
[23:53:02] * strcat has been curious about that
[23:53:11] <graydon> e was for ... explicit? extended? enhanced?
[23:53:14] <bblum> brson: can you tell me about "// XXX: Hack extra allocation to make by-val self work"?
[23:53:28] <Eridius> similarly if I wrap that private module in another one, I can still access the public item 2 levels deep. Is the rule that I can see any private module defined in this .rs file no matter how many levels deep?
[23:53:33] <strcat> graydon: so I guess we can do evec_ng next ;p
[23:53:37] <graydon> strcat: it was when we were moving from all-vecs-are-linear to you-describe-the-storage-mode
[23:53:51] <strcat> ah
[23:54:00] <graydon> please feel free to s/evec/vec/ and s/estr/str/ throughout
[23:54:23] <strcat> graydon: well there are some leftover 'str' and 'vec' code paths
[23:54:27] <graydon> I am pretty sure there's no old-vec code lying around still?
[23:54:28] <graydon> oh crap
[23:54:30] <strcat> I zapped one from the TyVisitor
[23:54:32] <graydon> delete delete delete
[23:54:34] *** Quits: vosen (vosen@moz-266BA656.icpnet.pl) (Quit: Leaving)
[23:54:39] <strcat> graydon: they're small/dead though afaik
[23:54:55] <bblum> evec_ng c.c
[23:55:07] <strcat> but anyway a lot of the code is very weird now that headers are gone on a lot of stuff
[23:55:12] <aatch> evec_ng_plus
[23:55:18] <strcat> like, there's a lot of old dead code assuming headers are there
[23:55:24] <graydon> no doubt
[23:55:32] <brson> bblum: at one point by-val self only worked with word-size things
[23:55:44] <bblum> is it fine now?
[23:55:45] <bblum> brson: btw, https://github.com/mozilla/rust/pull/7858
[23:55:49] <brson> bblum: idk
[23:56:04] <aatch> bblum, I think it does now.
[23:56:08] <bblum> let's find out
[23:56:32] <strcat> graydon: https://github.com/thestinger/rust/commit/0239a06a6401d789a70c0089ada071ca981874df was just that
[23:56:38] <strcat> I think there are some other dead paths in the TyVisitor :(
[23:56:54] <strcat> and I can't figure out why it treats some @ as opaque_box and others as box
[23:56:59] *** Quits: eholk (eholk@moz-4FD9C8.uconnect.utah.edu) (Quit: eholk)
[23:57:14] <strcat> rusti: fmt!("%?", @mut 5)
[23:57:15] -rusti- ~"@5"
[23:57:19] <strcat> rusti: fmt!("%?", (@mut 5,))
[23:57:20] -rusti- ~"(@mut 5,)"
[23:57:30] <strcat> rusti: fmt!("%?", @mut [@mut 5, @mut 4])
[23:57:31] -rusti- ~"@[mut @mut 5, mut @mut 4]"
[23:57:32] <graydon> cases where we monomorphized perhaps
[23:57:35] <Eridius> does module visibility work at all, within a crate? Or does it only affect what's visible outside the crate?
[23:57:43] <graydon> I don't claim those paths are without bugs
[23:57:50] *** Joins: echristo (echristo@4241698A.2E4FD3DD.225F4543.IP)
[23:57:55] <cmr> Eridius: outside faik
[23:57:58] <graydon> Eridius: should control references that cross module boundaries
[23:57:58] <cmr> *afaik
[23:58:03] <bblum> @[mut ...] o_O
[23:58:10] <strcat> bblum: I just fixed that part ;p
[23:58:14] <bblum> c.c
[23:58:15] <bblum> nice
[23:58:16] <graydon> yeah [mut ...] is old, from mut fields
[23:58:24] <Eridius> ok, that explains the behavior I'm seeing. Kind of a shame though, it means I can't wrap up private functionality in a mod and know for a fact it's not used outside of this .rs file
[23:58:25] <bblum> yes, i remember [mut ...]
[23:58:28] <strcat> graydon: well it puts it on *every* element
[23:58:30] <strcat> 19:57:31              -- | Notice(rusti): ~"@[mut @mut 5, mut @mut 4]"
[23:58:32] <strcat> that's just weird
[23:58:33] <Eridius> but I don't know if there's any real practical implication here
[23:59:14] <strcat> anyway I think I fixed all but fmt!("%?", @mut 5)
[23:59:15] <graydon> Eridius: huh? that is .. specifically what it's supposed to control
[23:59:20] <strcat> when the @mut is inside another type... it's fixed
[23:59:22] <graydon> Eridius: any module-crossing. crate-local or otherwise.
[23:59:25] <graydon> or inter-crate
[23:59:45] <strcat> maybe something weird about simplified_glue_type
[23:59:53] <Eridius> graydon: ok then I'm confused. I made a mod top with two children, mod one and mod two, and mod one had a pub function. mod two could call that pub function
