[00:01:36] *** Quits: nicknikolov (nicknikolov@moz-ko7.r6m.215.90.IP) (Connection closed)
[00:03:01] *** Joins: nicknikolov (nicknikolov@moz-ko7.r6m.215.90.IP)
[00:03:29] *** Quits: nicknikolov (nicknikolov@moz-ko7.r6m.215.90.IP) (Connection closed)
[00:06:52] *** Joins: ghservo (ghservo@moz-abh.5u0.30.192.IP)
[00:06:52] -ghservo- [13servo] 15glennw opened pull request #6214: First step towards 3d transforms. (06master...06parse-transforms) 02http://git.io/vklin
[00:06:52] *** Parts: ghservo (ghservo@moz-abh.5u0.30.192.IP) ()
[00:07:49] *** Quits: godlikesme (godlikesme@moz-2a2.dsd.174.79.IP) (Ping timeout: 121 seconds)
[00:09:24] *** Quits: gsingh93 (gulshan@moz-ln1ktu.st3l.iv8o.0004.2601.IP) (Ping timeout: 121 seconds)
[00:10:20] *** Quits: dbaron (dbaron@moz-r17no2.2rkg.9kg1.0101.2620.IP) (Ping timeout: 121 seconds)
[00:10:46] <pcwalton> hmm, gperftools captures frame addresses, but can't symbolicate them
[00:10:57] <pcwalton> at least, on Mac
[00:12:17] <cmr> pcwalton: does addr2line help?
[00:12:42] <pcwalton> mac knows not of which you speak ;)
[00:12:44] <cmr> heh
[00:12:50] <pcwalton> (the Mac binutils equivalents are extremely primitive)
[00:13:17] <pcwalton> I wouldn't be surprised if it just can't read Mach-O
[00:13:22] <cmr> I never found gperftools very compelling compared to a real profiler and valgrind or asan, but I guess it might help in Rust since we don't support asan yet. How does their profiler work?
[00:13:24] <pcwalton> which is fine, Instruments.app is better anyway
[00:13:33] <pcwalton> cmr: it's based on sampling by sending signals
[00:13:37] <pcwalton> which is actually quite a reasonable approach
[00:13:54] *** Quits: mccr8 (mccr8@moz-cfhap5.mtv2.mozilla.com) (Quit: quit)
[00:14:01] <cmr> How does it handle threads? Just tgkill?
[00:14:01] <pcwalton> if you don't need the kernel stacks, which I don't
[00:14:04] <njn> pcwalton: you know about |atos| on Mac?
[00:14:06] <pcwalton> probably
[00:14:17] <pcwalton> njn: oh, nice
[00:14:19] <pcwalton> TIL
[00:14:32] <njn> :)
[00:14:35] <cmr> I assume that's the addr2line equiv.?
[00:14:38] <pcwalton> yeah
[00:14:50] <pcwalton> anyway, I want this for desktop ARM Linux, not Mac, since Instruments.app is an awesome sampling profiler already
[00:15:27] <cmr> yeah.
[00:15:49] *** Joins: gandalf (zbraniecki@moz-cp7c4m.ca.comcast.net)
[00:16:01] <cmr> I think perf works on ARM, not sure how well it works outside of Android though.
[00:16:25] <pcwalton> perf is a nightmare on ARM desktop linux
[00:16:29] <pcwalton> for capturing callstacks
[00:16:33] <cmr> Shame
[00:16:43] <pcwalton> and also, I've never liked the interface for call stack navigation
[00:16:56] <pcwalton> it's clearly a tool designed for kernel developers and userspace is kind of an afterthought
[00:17:04] <cmr> I agree, perf is pretty terrible to use compared to Instruments.app or VTune
[00:17:14] * cmr is a VTune fanboy
[00:17:19] <pcwalton> yeah, VTune would be great
[00:17:25] <cmr> Free for open source! Probably no ARM though.
[00:20:38] *** Quits: rillian (giles@moz-84unpo.osuosl.org) (Ping timeout: 121 seconds)
[00:21:10] <pcwalton> oh heh, pprof is a perl script that calls addr2line
[00:21:22] <pcwalton> well, that works I guess
[00:21:56] <pcwalton> â€¦ and it just got killed by the OOM killer
[00:21:59] <pcwalton> when running against servo
[00:22:51] *** Quits: sneakyness (textual@moz-tmbr33.biz.rr.com) (Connection closed)
[00:22:59] *** Joins: sneakyness (textual@moz-tmbr33.biz.rr.com)
[00:23:04] *** Quits: ahal|afk (ahal@moz-b8e0a0.cpe.pppoe.ca) (A TLS packet with unexpected length was received.)
[00:23:50] *** Joins: hyowon (Mibbit@moz-rde.dlj.94.210.IP)
[00:24:23] <pcwalton> oh hey, it seems to work beautifully for Rust code
[00:24:29] <pcwalton> at least on x86
[00:24:37] <pcwalton> once you have enough swap to run pprof
[00:24:45] <pcwalton> name demangling in particular works great
[00:27:36] *** Joins: je_julie (uid29643@moz-2q4j9e.brockwell.irccloud.com)
[00:28:05] *** Joins: godlikesme (godlikesme@moz-2a2.dsd.174.79.IP)
[00:28:14] *** Quits: Jayflux (Jason@moz-3ejd3p.as13285.net) (Quit: Leaving)
[00:36:49] *** Joins: ghservo (ghservo@moz-m9l.5u0.30.192.IP)
[00:36:49] -ghservo- [13servo] 15bors-servo merged 06auto into 06master: 02http://git.io/vkloL
[00:36:49] *** Parts: ghservo (ghservo@moz-m9l.5u0.30.192.IP) ()
[00:36:53] *** Joins: ghservo (ghservo@moz-abh.5u0.30.192.IP)
[00:36:53] -ghservo- [13servo] 15bors-servo closed pull request #6212: Update CSS tests expected data to revision 31d63cc79bd4c929ed582229e936d7b389f3e6ab (06master...06css_meta_buildbot) 02http://git.io/vklvy
[00:36:53] *** Parts: ghservo (ghservo@moz-abh.5u0.30.192.IP) ()
[00:42:22] *** Quits: hyowon (Mibbit@moz-rde.dlj.94.210.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[00:44:29] <njn> hmm: "warning: use of `#[derive]` with a raw pointer, #[warn(raw_pointer_derive)] on by default"
[00:44:29] *** Quits: waddlesplash (haikuvian@moz-ptk.nn5.219.104.IP) (Connection closed)
[00:44:37] *** Joins: mib_420nm6 (Mibbit@moz-juv.9o3.252.72.IP)
[00:44:49] *** Joins: waddlesplash (haikuvian@moz-ptk.nn5.219.104.IP)
[00:45:42] <njn> but if I give it a typedef, the warning goes away?!
[00:47:41] *** Quits: mib_420nm6 (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[00:48:21] *** Quits: wolfviking0 (wolfviking0@moz-8hd.3b6.246.162.IP) (Client exited)
[00:53:25] <zmike_> http://i.imgur.com/avq3hH0.png
[00:53:44] *** Joins: blank_na1e (blank_name@moz-pah0nm.mi.frontiernet.net)
[00:53:46] <pcwalton> ooh
[00:54:03] <zmike_> only 349 threads required!
[00:55:14] <Savago> zmike: looks nice.
[00:55:26] <Savago> Each page is a pipeline? Or just a screenshot?
[00:55:34] <zmike_> full browser
[00:55:50] <fabrice> nice app icon
[00:56:06] *** mcote is now known as mcote|afk
[00:56:26] *** Quits: blank_name (blank_name@moz-f80.i34.36.50.IP) (Ping timeout: 121 seconds)
[00:56:56] <larsberg> pcwalton: are there other sites you'd suggest for the dialer?
[00:57:08] <larsberg> zmike_ is on an amazing roll in prep for our LinuxCon Japan demos
[00:57:24] <pcwalton> TWiS perhaps? :)
[00:58:02] <zmike_> what is that?
[00:58:09] <pcwalton> this week in servo
[00:58:21] *** Joins: rillian (giles@moz-84unpo.osuosl.org)
[00:58:37] <zmike_> aha
[00:58:52] <zmike_> link?
[00:58:57] <pcwalton> one sec
[00:59:36] <larsberg> http://blog.servo.org/2015/05/28/twis-33/
[00:59:44] <pcwalton> zmike_: ^
[01:00:00] <zmike_> I'll put it next to wikipedia
[01:00:13] <larsberg> hrm, cnn and gold's look like they didn't finish rendering
[01:01:12] *** Joins: dbaron (dbaron@moz-12jr9n.dynamic.fusionbroadband.com)
[01:01:22] *** Joins: ghservo (ghservo@moz-l7j.5u0.30.192.IP)
[01:01:22] -ghservo- [13rust-layers] 15glennw pushed 2 new commits to 06master: 02http://git.io/vkldN
[01:01:22] -ghservo- 13rust-layers/06master 14a17886f 15Patrick Walton: Separate out the viewport from the dirty rect, and only mark tiles...
[01:01:22] -ghservo- 13rust-layers/06master 148420385 15glennw: Merge pull request #167 from pcwalton/viewport-dirty-rect-separation...
[01:01:22] *** Parts: ghservo (ghservo@moz-l7j.5u0.30.192.IP) ()
[01:01:41] <zmike_> servo isn't strong enough for gold's most of the time and dies halfway through the loading set
[01:01:52] <larsberg> zmike_: more reps imo
[01:01:56] <zmike_> def
[01:02:08] *** kimundi is now known as zz_kimundi
[01:03:41] <zmike_> side by side: http://imgur.com/a/G3Vsk
[01:04:25] <pcwalton> check it out https://dl.dropboxusercontent.com/u/4186469/servo-profile.png
[01:04:30] *** Joins: hyowon (Mibbit@moz-rde.dlj.94.210.IP)
[01:04:37] <pcwalton> gperftools works great on release builds of servo
[01:07:14] *** Quits: acrichto (acrichto@moz-u3dg2t.sfo1.mozilla.com) (Ping timeout: 121 seconds)
[01:07:24] * zmike_ begins a release build
[01:07:38] * larsberg will see zmike_ tomorrow
[01:08:10] * zmike_ catches fire from proximity to his computer during compile
[01:08:34] <larsberg> pcwalton: that's much more detailed and useful than I expected!
[01:08:40] <pcwalton> larsberg: yeah, it's great
[01:08:46] <pcwalton> tomorrow I'll see if it works on ARM :)
[01:09:27] <larsberg> :-)
[01:11:26] *** Joins: jgallagher (john@moz-6ge.dhn.131.24.IP)
[01:12:09] <zmike_> laptop keyboard almost too hot to use...
[01:12:50] <larsberg> you should see what happens when I am building both linux and OSX snapshots at the same time
[01:13:01] <zmike_> you eat a box of donuts?
[01:13:58] *** Quits: sneakyness (textual@moz-tmbr33.biz.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[01:14:12] <larsberg> zmike_: that's always a safe bet
[01:14:22] *** Quits: Savago (Savago@moz-8hd.3b6.246.162.IP) (Client exited)
[01:14:25] <zmike_> such great bulking
[01:14:52] *** Joins: acrichto (acrichto@moz-u3dg2t.sfo1.mozilla.com)
[01:17:13] *** Quits: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net) (Client exited)
[01:17:49] <zmike_> abinader!!!!!!!!
[01:17:50] *** Joins: jbomo (dkd@moz-uol4mm.fios.verizon.net)
[01:19:04] *** Quits: godlikesme (godlikesme@moz-2a2.dsd.174.79.IP) (Ping timeout: 121 seconds)
[01:20:30] *** Joins: Nashenas88 (Nashenas88@moz-of81j9.miamfl.sbcglobal.net)
[01:22:53] *** Joins: fkaa (tundmatu@moz-501od2.business.telia.com)
[01:28:51] *** chmanchester is now known as chmanchester|afk
[01:36:15] *** Joins: slyu (slyu@moz-2hf62a.HINET-IP.hinet.net)
[01:43:34] *** Quits: naudtov (naudtov@moz-3rgsah.hfc.comcastbusiness.net) (Quit: Textual IRC Client: www.textualapp.com)
[01:44:51] *** Quits: Cork (Cork@moz-rmmud5.priv.bahnhof.se) (Ping timeout: 121 seconds)
[01:46:36] *** Joins: Cork (Cork@moz-rmmud5.priv.bahnhof.se)
[01:55:21] *** Joins: godlikesme (godlikesme@moz-2a2.dsd.174.79.IP)
[01:58:09] *** Quits: Jesse (jruderman@moz-cfhap5.mtv2.mozilla.com) (Client exited)
[01:59:17] *** Quits: gandalf (zbraniecki@moz-cp7c4m.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[02:01:25] *** Joins: playjax (chatzilla@moz-5d5guj.optusnet.com.au)
[02:06:49] <njn> for FreeType we use libc::{malloc,realloc,free} for all allocations, which means we use the system malloc.
[02:07:06] <njn> if we instead used alloc::heap::allocate et al., I think we'd get jemalloc instead
[02:07:18] <njn> which seems preferable
[02:08:11] *** Joins: c74d3 (c74d3a4ebb6@moz-rhs0n6.mggc.hibn.4404.2002.IP)
[02:08:16] *** Quits: Nekit1234007 (nekit@moz-0a7.a78.189.91.IP) (Quit: Lost terminal)
[02:08:49] *** Quits: caitp (caitp@moz-lmogh4.cable.rogers.com) (Ping timeout: 121 seconds)
[02:09:26] *** Quits: c74d (c74d3a4ebb6@moz-0ersgu.oc.cox.net) (Ping timeout: 121 seconds)
[02:09:45] *** c74d3 is now known as c74d
[02:11:09] <njn> although the fact that heap::alloc::deallocate requires that you pass in the size of the thing being freed would cause problems :(
[02:11:18] <njn> since FreeType's callbacks don't provide that
[02:11:41] <njn> I guess I can use heap_size_of
[02:11:43] *** Quits: godlikesme (godlikesme@moz-2a2.dsd.174.79.IP) (Ping timeout: 121 seconds)
[02:11:51] <njn> since "The old_size parameter may be any value in range_inclusive(requested_size, usable_size)."
[02:13:44] *** Joins: mib_g1v7sk (Mibbit@moz-juv.9o3.252.72.IP)
[02:14:58] *** Quits: mib_g1v7sk (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[02:15:06] *** Quits: hyowon (Mibbit@moz-rde.dlj.94.210.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[02:16:13] <mwu> man. macros
[02:16:18] <mwu> screw macros.
[02:17:08] <mwu> I'd rather write prolog
[02:27:52] <gw> njn: I think thats why I used the libc malloc when I first wrote it. although I hadn't noticed that doc you quoted
[02:28:04] <njn> gw: ok
[02:28:24] <njn> gw: I'm a little puzzled you even provide alloc/dealloc funcs, since they didn't do anything non-standard
[02:28:32] <njn> gw: but I'm happy, because I'm now hijacking themn
[02:28:36] <njn> :)
[02:29:10] <gw> njn: it was so I could do some debug logging of freetype allocs I think. figured they might as well stay around :)
[02:29:19] <njn> ah, makes sense
[02:29:45] <njn> gw: I wonder if libc::malloc should call jemalloc
[02:29:53] <njn> though I understand that whole issue is comlex
[02:29:56] <njn> *complex
[02:29:57] <mwu> no
[02:31:10] <gw> njn: I come from a games background, where we instrumented every alloc via our own heap. I generally like to make all 3rd party libs funnel through one allocator where possible, for auditing :)
[02:31:27] *** Quits: agile (mike@moz-m71dqt.rcsntx.sbcglobal.net) (Connection closed)
[02:31:48] <njn> gw: https://blog.mozilla.org/nnethercote/2013/11/08/libraries-should-permit-custom-allocators/
[02:32:46] <gw> njn: indeed
[02:33:56] *** Quits: playjax (chatzilla@moz-5d5guj.optusnet.com.au) (Quit: ChatZilla 0.9.91.1 [Firefox 32.0.1/20140911151253])
[02:33:59] <mwu> let me show you my battle scars from all the times we replaced the system allocator wrong
[02:40:55] *** Joins: Jesse (jruderman@moz-pqc1f5.ca.comcast.net)
[02:44:32] *** Joins: hyowon (Mibbit@moz-rde.dlj.94.210.IP)
[02:46:02] *** Parts: Caspy7 (chatzilla@moz-q45ho1.6qgi.ef7f.0306.2602.IP) ("")
[02:50:36] *** Joins: caitp (caitp@moz-lmogh4.cable.rogers.com)
[02:53:33] *** Quits: zz_kimundi (kimundi@moz-ch362e.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[02:56:06] *** Joins: zz_kimundi (kimundi@moz-68riih.dip0.t-ipconnect.de)
[02:56:08] *** zz_kimundi is now known as kimundi
[02:57:17] <zmike_> fact: there is no easier way to trigger crashes than trying to make a recording of an app
[03:09:10] *** Joins: acgtyrant (acgtyrant@moz-0k4.4sk.186.39.IP)
[03:09:51] *** mcote|afk is now known as mcote
[03:11:26] *** Quits: caitp (caitp@moz-lmogh4.cable.rogers.com) (Ping timeout: 121 seconds)
[03:24:40] *** Quits: mwu (mwu@moz-ba7o6m.oi2i.p882.0085.2601.IP) (Quit: Leaving)
[03:27:12] *** Quits: acgtyrant (acgtyrant@moz-0k4.4sk.186.39.IP) (Connection closed)
[03:32:21] *** Joins: frogzilla (Mibbit@moz-juv.9o3.252.72.IP)
[03:35:00] *** Quits: pgonda (peter@moz-s36.0tp.134.75.IP) (Ping timeout: 121 seconds)
[03:38:30] *** Quits: frogzilla (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[03:45:35] *** Joins: ghservo (ghservo@moz-l3t.5u0.30.192.IP)
[03:45:35] -ghservo- [13servo] 15bors-servo pushed 0 new commits to 06tmp: 02http://git.io/vk8RH
[03:45:35] *** Parts: ghservo (ghservo@moz-l3t.5u0.30.192.IP) ()
[03:45:36] *** Joins: ghservo (ghservo@moz-abh.5u0.30.192.IP)
[03:45:36] -ghservo- [13servo] 15bors-servo pushed 2 new commits to 06tmp: 02http://git.io/vk8RQ
[03:45:36] -ghservo- 13servo/06tmp 14a21f6c4 15Nicholas Nethercote: Measure paint task buffer maps in the memory profiler....
[03:45:36] -ghservo- 13servo/06tmp 1410127d6 15bors-servo: Auto merge of #6199 - nnethercote:instrument-paint-task-buffer-map, r=pcwalton...
[03:45:36] *** Parts: ghservo (ghservo@moz-abh.5u0.30.192.IP) ()
[03:45:37] *** Joins: ghservo (ghservo@moz-l7j.5u0.30.192.IP)
[03:45:37] -ghservo- [13servo] 15bors-servo merged 06tmp into 06auto: 02http://git.io/vk8RQ
[03:45:37] *** Parts: ghservo (ghservo@moz-l7j.5u0.30.192.IP) ()
[03:52:00] *** mcote is now known as mcote|afk
[03:55:21] <Manishearth> njn pong
[03:55:41] <njn> Manishearth: about that blog post... do you want to write it or should I? :)
[03:57:41] <Manishearth> njn together -- i write the plugins bit  , you write about memory measureme
[04:00:54] <Manishearth> njn do you have a rough outline/idea of what it should look like?
[04:01:31] <njn> Manishearth: 1. explain how it works in Firefox; 2. explain how it works in Servo, and the improvements
[04:02:36] <Manishearth> cool
[04:02:50] *** Joins: gandalf (zbraniecki@moz-cp7c4m.ca.comcast.net)
[04:03:33] <Manishearth> njn So you wre 1.; I write most of 2 :)
[04:04:11] <njn> Manishearth: the plugin is only part of part 2
[04:06:29] <Manishearth> I kn :)
[04:06:41] <Manishearth> *know
[04:06:55] <Manishearth> urgh bad ssh connection
[04:08:50] <Manishearth> njn okay , so create a gist or something and write your part, and then I'll continue off of there?
[04:10:52] <njn> Manishearth: sorry, I don't want to do a dual-author post
[04:11:00] *** Joins: mib_yyvw7p (Mibbit@moz-juv.9o3.252.72.IP)
[04:11:29] <Manishearth> oh, okay :/
[04:12:37] <njn> I'm happy to let you post about it, if you want to
[04:13:44] <Manishearth> I only know the Servo side of it :)
[04:14:32] <Manishearth> I'd love to, but I can't do 1. unless I have something to link to
[04:16:02] *** Joins: acgtyrant (acgtyrant@moz-3kd.b79.160.124.IP)
[04:16:22] *** Joins: gsingh93 (gulshan@moz-ln1ktu.st3l.iv8o.0004.2601.IP)
[04:16:33] *** Quits: mib_yyvw7p (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[04:18:53] *** Quits: kanru (kanru@moz-aj9ejj.HINET-IP.hinet.net) (Ping timeout: 121 seconds)
[04:19:08] <njn> https://developer.mozilla.org/en-US/docs/Mozilla/Performance/Memory_reporting
[04:20:13] *** Joins: kanru (kanru@moz-aj9ejj.HINET-IP.hinet.net)
[04:20:14] <cmr> njn: is servo's memory reporting reusable outside of servo?
[04:20:36] <njn> cmr: conceivably
[04:20:40] *** Quits: jga (jga@moz-e4s.t1q.244.77.IP) (Connection closed)
[04:21:15] <cmr> njn: I'd be interested in using some of that, do you have a link? (I imagine it needs to be extracted)
[04:21:26] <njn> cmr: there are multiple parts to it, so it depends exactly what you want to do
[04:22:32] <njn> cmr: https://github.com/servo/servo/blob/master/components/util/mem.rs has HeapSizeOf and heap_size_of, which is how you measure the size of data structures
[04:22:42] <Manishearth> cmr: the HeapSizeOf can be extracted
[04:22:50] <njn> cmr: Manishearth's plugin adds auto-deriving support for HeapSizeOf
[04:24:03] <njn> cmr: https://github.com/servo/servo/blob/master/components/profile_traits/mem.rs and https://github.com/servo/servo/blob/master/components/profile/mem.rs are the memory profiler and the infrastructure for subsystems to communicate with it, including reporting measurements
[04:24:22] <njn> cmr: that part is less harder to make generic
[04:24:31] <njn> sorry, just "harder"
[04:25:00] *** Joins: ghservo (ghservo@moz-l7j.5u0.30.192.IP)
[04:25:00] -ghservo- [13servo] 15bors-servo merged 06auto into 06master: 02http://git.io/vk8RQ
[04:25:00] *** Parts: ghservo (ghservo@moz-l7j.5u0.30.192.IP) ()
[04:25:05] *** Joins: ghservo (ghservo@moz-l7j.5u0.30.192.IP)
[04:25:05] -ghservo- [13servo] 15bors-servo closed pull request #6199: Measure paint task buffer maps in the memory profiler. (06master...06instrument-paint-task-buffer-map) 02http://git.io/vks2M
[04:25:05] *** Parts: ghservo (ghservo@moz-l7j.5u0.30.192.IP) ()
[04:25:14] <njn> cmr: it would be good if HeapSizeOf was in core Rust, because for some types implementing HeapSizeOf is hard without being able to see private fields
[04:25:23] *** Quits: acgtyrant (acgtyrant@moz-3kd.b79.160.124.IP) (Connection closed)
[04:25:30] <cmr> njn: yeah, HeapSizeOf looks really useful.
[04:25:51] <njn> cmr: we currently have to do some silly stuff to measure LinkedList<>
[04:25:57] *** Joins: acgtyrant (acgtyrant@moz-3kd.b79.160.124.IP)
[04:26:20] <cmr> I might try integrating that stuff into hprof somehow...
[04:26:27] <Manishearth> eddyb mentioned something about wanting a "Weight" in the core
[04:26:33] <njn> Manishearth: have you landed your plugin? If not, I just realized you could remove the comment at https://github.com/servo/servo/blob/master/components/util/mem.rs#L38
[04:26:38] <Manishearth> eg the weight of Arc is 1/refcount
[04:26:47] <njn> Manishearth: I saw that, but didn't know what he meant
[04:26:48] <Manishearth> njn: no, need a plugins person to review it
[04:27:02] <Manishearth> njn: weight = heapsizeof except that refcounts are taken into account
[04:27:21] <njn> ok
[04:27:40] <njn> Weight is a too-clever name, IMO
[04:27:54] <Manishearth> heh
[04:30:58] <Manishearth> njn: so, if I write the post, I'll have a small bit with links to the MDN article and your blog post (I think you have one on this) and a quick description for the firefox stuff, then an explanation of HeapSizeOf and the plugin, and then an explanation of the profile/ stuff
[04:31:09] <Manishearth> njn: I think it would be best if you wrote this though
[04:31:25] <eddyb> Manishearth: "heap" size is confusing
[04:31:31] <Manishearth> You know enough about the plugin to write about it :)
[04:31:43] <njn> Manishearth: I can do it. I just don't like multi-author blog posts :/
[04:31:43] <eddyb> and it seems to be specific to... well, heap
[04:31:48] <Manishearth> njn: cool
[04:31:56] <njn> eddyb: it is specific to the heap
[04:31:58] <eddyb> whereas [u8; N]::weight() == N
[04:32:11] <Manishearth> njn: let me know if there's stuff you want to know about the plugin
[04:32:18] <njn> Manishearth: k, thanks
[04:32:36] <Manishearth> We already use a similar plugin for #[jstraceable] which was mentioned in https://blog.mozilla.org/research/2014/08/26/javascript-servos-only-garbage-collector/
[04:32:44] <Manishearth> actually no, that post doesn't mention it
[04:32:46] <eddyb> x.size_of() - size_of_val(&x) might be a similar enough value :P
[04:32:49] <Manishearth> it mentiones our encodable hacks
[04:32:58] <eddyb> err, x.weight() - size_of_val(&x)
[04:33:04] <Manishearth> eddyb: weight() = sizeof()+heap_size_of()
[04:33:24] <Manishearth> heap_size_of can be composed easily, sizeof() cannot
[04:33:47] <Manishearth> because heapsize is just sum(heapsize of children)
[04:34:14] <Manishearth> and then you specialcase Box/Vec to be heapsize=sizeof(child)+heapsizeof(child)
[04:34:25] <Manishearth> (we use jemalloc calls instead though)
[04:37:32] <njn> size_of is inaccurate, because malloc calls frequently round up to a larger size
[04:38:03] <Manishearth> yeah
[04:40:14] *** darkowlzz|afk is now known as darkowlzz
[04:40:17] *** Joins: mib_4js254 (Mibbit@moz-juv.9o3.252.72.IP)
[04:44:05] *** Quits: mib_4js254 (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[05:02:20] *** darkowlzz is now known as darkowlzz|afk
[05:06:42] *** Joins: dstrbad (dstrbad@moz-vfo5vo.cable.xnet.hr)
[05:11:12] *** Joins: bogdan_maris (Instantbird@moz-662.esi.231.62.IP)
[05:13:47] *** Joins: c74d3 (c74d3a4ebb6@moz-0ersgu.oc.cox.net)
[05:14:46] *** Quits: c74d (c74d3a4ebb6@moz-rhs0n6.mggc.hibn.4404.2002.IP) (Ping timeout: 121 seconds)
[05:15:22] *** c74d3 is now known as c74d
[05:17:38] *** Quits: lurk_ (chatzilla@moz-qm19cj.in.comcast.net) (Connection closed)
[05:17:49] *** Quits: Zaggy1024 (Zaggy1024@moz-5unah9.mpls.qwest.net) (Connection closed)
[05:19:33] *** Quits: dinfuehr (dinfuehr@moz-c25.u8s.112.91.IP) (Connection closed)
[05:21:54] * frewsxcv is scared what servo would look like with https://github.com/frewsxcv/crate-deps
[05:24:03] *** Joins: brendan (brendaneich@moz-ooj7cv.ca.comcast.net)
[05:24:11] *** Joins: lurk_ (chatzilla@moz-qm19cj.in.comcast.net)
[05:25:36] *** Quits: slyu (slyu@moz-2hf62a.HINET-IP.hinet.net) (A TLS packet with unexpected length was received.)
[05:30:35] *** Quits: brendan (brendaneich@moz-ooj7cv.ca.comcast.net) (Ping timeout: 121 seconds)
[05:33:44] *** Joins: slyu (slyu@moz-2hf62a.HINET-IP.hinet.net)
[05:34:03] *** Parts: slyu (slyu@moz-2hf62a.HINET-IP.hinet.net) ()
[05:35:07] *** Joins: caitp (caitp@moz-lmogh4.cable.rogers.com)
[05:39:09] *** Quits: caitp (caitp@moz-lmogh4.cable.rogers.com) (Ping timeout: 121 seconds)
[05:49:44] *** Quits: gsingh93 (gulshan@moz-ln1ktu.st3l.iv8o.0004.2601.IP) (Ping timeout: 121 seconds)
[05:53:45] *** Quits: jbomo (dkd@moz-uol4mm.fios.verizon.net) (Quit: )
[05:54:30] *** Joins: dinfuehr (dinfuehr@moz-c25.u8s.112.91.IP)
[06:04:01] <SimonSapin> frewsxcv: I think brson did it at some point
[06:04:38] *** Joins: Guest46 (textual@moz-vmb6mb.b2gd.h79t.0256.2001.IP)
[06:05:45] *** Joins: kaksmet (kaksmet@moz-n1sp9f.se.alltele.net)
[06:07:49] *** Quits: waddlesplash (haikuvian@moz-ptk.nn5.219.104.IP) (Connection closed)
[06:07:50] *** Joins: waddlesplash (haikuvian@moz-ptk.nn5.219.104.IP)
[06:08:28] <edunham> http://www.reddit.com/r/rust/comments/35dh3e/servos_dependency_graph/ maybe
[06:09:00] <SimonSapin> exactly, thanks edunham :)
[06:09:09] <gw> I think that's just a picture of spaghetti
[06:09:30] <gw> :)
[06:20:30] *** Quits: fkaa (tundmatu@moz-501od2.business.telia.com) (RecvQ exceeded)
[06:20:47] *** darkowlzz|afk is now known as darkowlzz
[06:20:52] *** Joins: fkaa (tundmatu@moz-501od2.business.telia.com)
[06:22:16] *** Quits: Guest46 (textual@moz-vmb6mb.b2gd.h79t.0256.2001.IP) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[06:23:05] *** Quits: dbaron (dbaron@moz-12jr9n.dynamic.fusionbroadband.com) (Ping timeout: 121 seconds)
[06:23:44] *** Quits: chc4 (chc4@moz-pdo0at.ma.comcast.net) (Quit: AHHHHH BEES)
[06:31:19] *** darkowlzz is now known as darkowlzz|afk
[06:41:54] *** Quits: dstrbad (dstrbad@moz-vfo5vo.cable.xnet.hr) (A TLS packet with unexpected length was received.)
[06:42:14] *** Quits: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com) (Ping timeout: 121 seconds)
[06:42:42] *** Joins: laumann (thomas@moz-n9e72h.0.fullrate.dk)
[06:42:54] *** Joins: dstrbad (dstrbad@moz-vfo5vo.cable.xnet.hr)
[06:56:29] <njn> Manishearth: do you have a link to your latest version of the HeapSizeOf branch?
[06:58:40] *** Joins: Layl (Mibbit@moz-iachg4.sdb.prolocation.net)
[06:59:43] <Layl> hey, I've got a question about the servo rendering design, the display_list seems to just draw all backgrounds then all borders without sorting, how is correct layering achieved here?
[07:00:50] *** Joins: agile (mike@moz-m71dqt.rcsntx.sbcglobal.net)
[07:02:28] <SimonSapin> Layl: I think that correct ordering/stacking is done when creating display lists
[07:02:40] <njn> Manishearth: also, could the plugin auto-derive this impl?
[07:02:41] <njn> impl<T: HeapSizeOf> HeapSizeOf for Option<T> {
[07:02:43] <njn>     fn heap_size_of_children(&self) -> usize {
[07:02:44] <njn>         match *self {
[07:02:46] <njn>             None => 0,
[07:02:47] <njn>             Some(ref x) => x.heap_size_of_children()
[07:02:49] <njn>         }
[07:02:50] <njn>     }
[07:02:52] <njn> }
[07:03:00] <SimonSapin> Layl: try ./mach grep z_index
[07:05:36] <Layl> SimonSapin: the odd thing is, first background and borders are drawn, then block background and borders
[07:05:49] <Layl> they're not drawn through eachother to get the layering right but after eachother
[07:06:36] <SimonSapin> Layl: If our code does something different than http://dev.w3.org/csswg/css2/zindex.html describes, it may be a bug
[07:07:53] <Layl> I think I'm just misunderstanding what the different things in the display list are
[07:09:36] <Layl> just for clarification, does display_list.optimize_and_draw_into_context draw the final result or instead draw to a texture that will later be layered correctly?
[07:10:38] <njn> Manishearth: ok, partway through a draft; I'll continue on Monday
[07:10:40] *** Quits: njn (chatzilla@moz-e6r6of.iinet.net.au) (Quit: ChatZilla 0.9.91.1 [Firefox 41.0a1/20150524155217])
[07:10:53] <SimonSapin> The latter, I think. Thereâ€™s a compositor
[07:11:10] <Layl> that would clarify things
[07:12:43] <Layl> I thought the compositor just combined together the tiles though, not having anything to do with the layout
[07:14:03] <SimonSapin> things like 'overflow: scroll' get a separate layer
[07:15:13] <Manishearth> crowbot: ping njn it would autoderive the impl if Option was defined locally, yes. (all generics automatically get T:HeapSizeOf). I suspect it is possible to write a macro that uses csearch to do it for externally-defined enums, but ... we can't use the existing derive infra for it :/
[07:15:13] *** Quits: waddlesplash (haikuvian@moz-ptk.nn5.219.104.IP) (Connection closed)
[07:15:20] *** Joins: waddlesplash (haikuvian@moz-ptk.nn5.219.104.IP)
[07:17:20] <Layl> hm, I guess it doesn't really matter if you draw block or non block backgrounds first since they shouldn't overlap in an area without overflow anyways
[07:17:49] *** Joins: jviereck (Adium@moz-pqri8u.dclient.hispeed.ch)
[07:18:16] *** Quits: nattokirai (nattokirai@moz-rq9a8e.asahi-net.or.jp) (Client exited)
[07:19:31] *** Quits: jviereck (Adium@moz-pqri8u.dclient.hispeed.ch) (Quit: Leaving.)
[07:25:22] *** Quits: kaksmet (kaksmet@moz-n1sp9f.se.alltele.net) (Connection closed)
[07:46:37] *** Joins: playjax (chatzilla@moz-5d5guj.optusnet.com.au)
[07:50:17] *** Quits: dstrbad (dstrbad@moz-vfo5vo.cable.xnet.hr) (A TLS packet with unexpected length was received.)
[07:56:36] *** Joins: dstrbad (dstrbad@moz-vfo5vo.cable.xnet.hr)
[08:00:10] *** Joins: jiojiajiu (Guro@moz-trc2j7.asianet.co.th)
[08:09:58] *** Quits: playjax (chatzilla@moz-5d5guj.optusnet.com.au) (Connection closed)
[08:18:11] <Layl> hm, what's a good analogy to understand the way servo turns a series of elements into a series of boxes (assuming no nesting)
[08:18:17] <Layl> is it like a text cursor?
[08:19:58] <Manishearth> Layl: perhaps http://limpet.net/mbrubeck/2014/08/08/toy-layout-engine-1.html ?
[08:20:18] <Layl> thanks, that's going to be really useful
[08:20:28] *** Quits: hyowon (Mibbit@moz-rde.dlj.94.210.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[08:20:56] <Layl> I'm building a UI framework for rust and I thought it would be a good idea to take inspiration from browsers since I generally enjoy working with web based interfaces more than things like winforms
[08:21:21] <Manishearth> I'm actually writing a toy compositor *right now*
[08:24:21] *** Joins: kosmodrey (kosmodrey@moz-9lj.ble.109.46.IP)
[08:31:48] *** Quits: laumann (thomas@moz-n9e72h.0.fullrate.dk) (Ping timeout: 121 seconds)
[08:32:19] *** Quits: bogdan_maris (Instantbird@moz-662.esi.231.62.IP) (Client exited)
[08:36:11] *** kimundi is now known as zz_kimundi
[08:42:47] *** Joins: kmicu (kmicu@moz-uga.edn.218.91.IP)
[08:45:53] *** Joins: jviereck (Adium@moz-pqri8u.dclient.hispeed.ch)
[08:45:54] *** Joins: jedireza (jedireza@moz-ungcc1.dsl.ovh.fr)
[08:52:34] *** Joins: laumann (thomas@moz-gqpfnm.science.ku.dk)
[08:54:38] *** Quits: jviereck (Adium@moz-pqri8u.dclient.hispeed.ch) (Quit: Leaving.)
[08:57:39] *** Joins: playjax (chatzilla@moz-5d5guj.optusnet.com.au)
[08:57:50] *** Joins: jviereck (Adium@moz-pqri8u.dclient.hispeed.ch)
[08:58:14] *** Quits: jviereck (Adium@moz-pqri8u.dclient.hispeed.ch) (Quit: Leaving.)
[08:58:23] *** Joins: jviereck (Adium@moz-pqri8u.dclient.hispeed.ch)
[08:59:01] *** Joins: filsmick (filsmick@moz-0svev4.abo.wanadoo.fr)
[08:59:21] *** Quits: jviereck (Adium@moz-pqri8u.dclient.hispeed.ch) (Quit: Leaving.)
[08:59:29] *** Joins: aravindavk (aravinda@moz-m6j.f0d.244.121.IP)
[09:00:54] *** Joins: Nekit1234007 (nekit@moz-0a7.a78.189.91.IP)
[09:04:04] *** Joins: psd (psd@moz-dhiu0h.mtnl.net.in)
[09:06:37] *** Quits: playjax (chatzilla@moz-5d5guj.optusnet.com.au) (Ping timeout: 121 seconds)
[09:08:39] *** Joins: bj-chunfeng (Mibbit@moz-7v0vka.members.linode.com)
[09:10:08] *** darkowlzz|afk is now known as darkowlzz
[09:10:58] *** Joins: nicknikolov (nicknikolov@moz-ko7.r6m.215.90.IP)
[09:11:01] *** Quits: nicknikolov (nicknikolov@moz-ko7.r6m.215.90.IP) (Connection closed)
[09:11:02] *** Joins: nicknikolov (nicknikolov@moz-ko7.r6m.215.90.IP)
[09:12:04] *** Joins: Guest46 (textual@moz-vmb6mb.b2gd.h79t.0256.2001.IP)
[09:12:31] *** zz_kimundi is now known as kimundi
[09:13:27] *** Quits: jiojiajiu (Guro@moz-trc2j7.asianet.co.th) (Connection closed)
[09:13:39] *** Joins: jiojiajiu (Guro@moz-trc2j7.asianet.co.th)
[09:15:07] <bj-chunfeng> how to run servo under headless mode?
[09:15:28] <bj-chunfeng> I know the test way by headless mode: ./mach test-content
[09:17:12] <Manishearth> bj-chunfeng: build with SERVO_HEADLESS=1
[09:17:15] <Manishearth> then run
[09:17:31] <Manishearth> needs mesa i think
[09:17:43] *** Joins: ghservo (ghservo@moz-abh.5u0.30.192.IP)
[09:17:43] -ghservo- [13servo] 15cloudtrends opened issue #6215: Testing under headless mode 02http://git.io/vk4aa
[09:17:43] *** Parts: ghservo (ghservo@moz-abh.5u0.30.192.IP) ()
[09:18:56] <bj-chunfeng> Testing under headless mode http://git.io/vk4aa  this issue posted by me.
[09:21:03] <bj-chunfeng> Manishearth , thanks , and I am now rebuild the servo by command : ./mach build --dev SERVO_HEADLESS=1
[09:21:29] *** Quits: jiojiajiu (Guro@moz-trc2j7.asianet.co.th) (Ping timeout: 121 seconds)
[09:22:12] <Manishearth> bj-chunfeng: the env var comes first i think
[09:22:22] <Manishearth> SERVO_HEADLESS=1 ./mach build ....
[09:23:13] <bj-chunfeng> :--) , yeah 
[09:26:25] <bj-chunfeng> Manishearth , A personal question , if you run : ./mach run http://www.baidu.com . the console will output some chinese characters
[09:27:04] <bj-chunfeng> I seach some of them form html code in page : http://www.baidu.com , but find nothing . so , those character should been generated by js code .
[09:27:57] <bj-chunfeng> My question is : why  servo just output those chinese code ? How could I triger this michanism in servo ?
[09:28:59] <Manishearth> could be console.log
[09:29:04] <Manishearth> or something
[09:30:00] <bj-chunfeng> O , got it !
[09:32:06] <Layl> would it be at all feasible to embed servo in a game engine, or would that summon elder gods of evil
[09:32:52] <Layl> I guess elder gods get summoned either way, but are there less or more elder gods summoned than if you try to embed gecko
[09:33:41] <Manishearth> Layl: sounds doable
[09:33:45] <Manishearth> but why not use piston?
[09:34:23] <Layl> because embedding a game engine in a game engine doesn't sound like something that would be very useful
[09:34:35] *** Joins: kaksmet (kaksmet@moz-n1sp9f.se.alltele.net)
[09:34:47] <Manishearth> heh
[09:35:05] <Manishearth> oh you want to embed servo in a game engine, not use it as a game engine
[09:35:09] <Manishearth> yeah that sounds doable
[09:35:19] <Layl> well, not really want, just wondering about if it's possible
[09:42:14] * nox counts the day before Servo becomes a GTA V mod.
[09:42:17] <nox> the days*
[09:43:26] <Layl> my experiments in the past with communication between game engines and html rendering engines have not been very successful, though I like web based UIs, it ends up being a nightmare to wire javascript the the rest of the codebase
[09:45:28] <bj-chunfeng> Manishearth,  do you create the work "Rustacean" ? what is stand for?
[09:45:32] <bj-chunfeng> the word
[09:48:34] *** kimundi is now known as zz_kimundi
[09:56:57] *** zz_kimundi is now known as kimundi
[09:58:04] *** Quits: jedireza (jedireza@moz-ungcc1.dsl.ovh.fr) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[10:02:30] <SimonSapin> bj-chunfeng: It means people using Rust or involved with the Rust project somehow. Itâ€™s a pun on crustacean.
[10:04:15] *** Joins: bombless (bombless@moz-2ie.5em.21.116.IP)
[10:04:50] *** Joins: Ms2ger (Ms2ger@moz-15i.9ho.190.193.IP)
[10:07:37] *** Quits: filsmick (filsmick@moz-0svev4.abo.wanadoo.fr) (Quit: )
[10:07:42] *** Joins: filsmick (filsmick@moz-0svev4.abo.wanadoo.fr)
[10:11:00] *** Quits: gandalf (zbraniecki@moz-cp7c4m.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[10:13:28] <nox> Manishearth: Any plans to give push rights to more people btw? Not that I want to push, I want to do triage sometimes.
[10:13:55] *** Joins: jiojiajiu (Guro@moz-trc2j7.asianet.co.th)
[10:16:29] <SimonSapin> nox: weâ€™ve done it before, but I donâ€™t think we have a formal decision process for that yet
[10:16:36] <nox> Ok.
[10:20:13] *** Quits: jiojiajiu (Guro@moz-trc2j7.asianet.co.th) (Connection closed)
[10:20:42] *** Joins: jiojiajiu (Guro@moz-trc2j7.asianet.co.th)
[10:26:22] *** Quits: Jesse (jruderman@moz-pqc1f5.ca.comcast.net) (Client exited)
[10:29:27] *** Quits: bj-chunfeng (Mibbit@moz-7v0vka.members.linode.com) (Quit: http://www.mibbit.com ajax IRC Client)
[10:32:13] *** Joins: godlikesme (godlikesme@moz-2a2.dsd.174.79.IP)
[10:34:23] *** Quits: Guest46 (textual@moz-vmb6mb.b2gd.h79t.0256.2001.IP) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[10:39:24] *** Quits: nicknikolov (nicknikolov@moz-ko7.r6m.215.90.IP) (Connection closed)
[10:39:45] *** Joins: nicknikolov (nicknikolov@moz-ko7.r6m.215.90.IP)
[10:40:00] <abinader> zmike_ !!!
[10:40:23] <abinader> Hopefully I shall have time this weekend
[10:43:47] *** Quits: nicknikolov (nicknikolov@moz-ko7.r6m.215.90.IP) (Ping timeout: 121 seconds)
[10:44:04] *** Quits: dstrbad (dstrbad@moz-vfo5vo.cable.xnet.hr) (A TLS packet with unexpected length was received.)
[10:52:44] *** kimundi is now known as zz_kimundi
[10:56:13] *** Quits: jiojiajiu (Guro@moz-trc2j7.asianet.co.th) (Connection closed)
[10:56:30] *** Joins: jiojiajiu (Guro@moz-trc2j7.asianet.co.th)
[11:00:21] *** Parts: Layl (Mibbit@moz-iachg4.sdb.prolocation.net) ()
[11:06:00] <mmatyas> Hm, is the android build supposed to work currently?
[11:07:19] *** Quits: psd (psd@moz-dhiu0h.mtnl.net.in) (Connection closed)
[11:07:53] <mmatyas> I get black screen in emulator and a white screen on device
[11:08:26] *** darkowlzz is now known as darkowlzz|afk
[11:14:04] *** Joins: sneakyness (textual@moz-tmbr33.biz.rr.com)
[11:14:38] *** Joins: pgonda (peter@moz-s36.0tp.134.75.IP)
[11:15:50] *** Joins: psd (psd@moz-dhiu0h.mtnl.net.in)
[11:17:55] *** Joins: nattokirai (nattokirai@moz-rq9a8e.asahi-net.or.jp)
[11:22:57] *** Quits: pgonda (peter@moz-s36.0tp.134.75.IP) (Ping timeout: 121 seconds)
[11:27:50] *** Joins: till (till@moz-ndafsa.adsl.alicedsl.de)
[11:28:27] *** Quits: bjz (bjz@moz-4cc8qn.bigpond.net.au) (Quit: My Mac has gone to sleep. ZZZzzzâ€¦)
[11:30:10] *** Joins: Guest46 (textual@moz-fjd.c8p.157.183.IP)
[11:31:13] *** Quits: aravindavk (aravinda@moz-m6j.f0d.244.121.IP) (Ping timeout: 121 seconds)
[11:32:05] *** Joins: jga (jga@moz-e4s.t1q.244.77.IP)
[11:35:30] *** Joins: bjz (bjz@moz-4cc8qn.bigpond.net.au)
[11:36:48] *** Quits: bombless (bombless@moz-2ie.5em.21.116.IP) (Quit: Leaving)
[11:37:38] *** Quits: psd (psd@moz-dhiu0h.mtnl.net.in) (Ping timeout: 121 seconds)
[11:39:38] *** Joins: psd (psd@moz-5h74fr.mtnl.net.in)
[11:41:35] *** Quits: kmicu (kmicu@moz-uga.edn.218.91.IP) (Client exited)
[11:44:23] *** Quits: sneakyness (textual@moz-tmbr33.biz.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[11:45:23] *** Joins: pgonda (peter@moz-s36.0tp.134.75.IP)
[11:46:03] *** Joins: dstrbad (dstrbad@moz-vfo5vo.cable.xnet.hr)
[11:52:44] *** Joins: jviereck (Adium@moz-va9fku.zhdk.ch)
[11:55:38] *** darkowlzz|afk is now known as darkowlzz
[11:56:11] <Ms2ger> Manishearth, https://github.com/rust-lang/rust/pull/25760 builds locally now
[11:56:12] <crowbot1> PR #25760: Use an iterator for reader::tagged_docs. - https://github.com/rust-lang/rust/pull/25760
[11:56:24] *** Joins: nicknikolov (nicknikolov@moz-ko7.r6m.215.90.IP)
[12:04:27] *** Quits: jga (jga@moz-e4s.t1q.244.77.IP) (Ping timeout: 121 seconds)
[12:04:30] *** Quits: Guest46 (textual@moz-fjd.c8p.157.183.IP) (Ping timeout: 121 seconds)
[12:05:30] *** Quits: Ms2ger (Ms2ger@moz-15i.9ho.190.193.IP) (Ping timeout: 121 seconds)
[12:08:05] *** Quits: acgtyrant (acgtyrant@moz-3kd.b79.160.124.IP) (Connection closed)
[12:12:50] *** Joins: dinfuehr_ (dinfuehr@moz-c25.u8s.112.91.IP)
[12:15:31] *** Quits: dinfuehr (dinfuehr@moz-c25.u8s.112.91.IP) (Ping timeout: 121 seconds)
[12:16:43] *** Joins: duncan (paul@moz-dst.ms6.225.173.IP)
[12:16:54] *** Quits: dinfuehr_ (dinfuehr@moz-c25.u8s.112.91.IP) (Ping timeout: 121 seconds)
[12:23:07] *** darkowlzz is now known as darkowlzz|afk
[12:23:14] *** Joins: bdero1 (bran@moz-216hqv.oo5r.e4su.0006.2601.IP)
[12:23:22] *** darkowlzz|afk is now known as darkowlzz
[12:23:43] *** Quits: bdero (bran@moz-lbs.91h.47.73.IP) (Connection closed)
[12:24:53] *** Joins: acgtyrant (acgtyrant@moz-3kd.b79.160.124.IP)
[12:26:55] *** Joins: cakecatz (cakecatz@moz-edrvuc.sannet.ne.jp)
[12:28:10] *** Quits: pgonda (peter@moz-s36.0tp.134.75.IP) (Quit: Lost terminal)
[12:28:34] *** Joins: kmicu (kmicu@moz-uga.edn.218.91.IP)
[12:31:22] *** Quits: jviereck (Adium@moz-va9fku.zhdk.ch) (Quit: Leaving.)
[12:44:55] *** darkowlzz is now known as darkowlzz|afk
[12:45:05] *** Joins: jviereck (Adium@moz-va9fku.zhdk.ch)
[12:45:46] *** Quits: jviereck (Adium@moz-va9fku.zhdk.ch) (Quit: Leaving.)
[12:45:47] *** Joins: jviereck1 (Adium@moz-va9fku.zhdk.ch)
[12:46:53] *** darkowlzz|afk is now known as darkowlzz
[12:55:35] *** Joins: ghservo (ghservo@moz-l7j.5u0.30.192.IP)
[12:55:35] -ghservo- [13servo] 15SimonSapin 04deleted 06rustup_2015-05-21 at 14fd4afc9: 02http://git.io/vkB6j
[12:55:35] *** Parts: ghservo (ghservo@moz-l7j.5u0.30.192.IP) ()
[12:57:45] *** Joins: ahal (ahal@moz-b8e0a0.cpe.pppoe.ca)
[12:58:00] *** Joins: Ms2ger (Ms2ger@moz-15i.9ho.190.193.IP)
[12:59:26] *** Quits: fkaa (tundmatu@moz-501od2.business.telia.com) (RecvQ exceeded)
[12:59:37] *** Joins: fkaa (tundmatu@moz-501od2.business.telia.com)
[13:04:01] *** Joins: jdm (jdm@moz-1s76ai.dsl.teksavvy.com)
[13:04:01] *** ChanServ sets mode: +qo jdm jdm
[13:05:39] *** Quits: jviereck1 (Adium@moz-va9fku.zhdk.ch) (Quit: Leaving.)
[13:05:58] *** Joins: jviereck (Adium@moz-va9fku.zhdk.ch)
[13:08:21] *** Quits: jviereck (Adium@moz-va9fku.zhdk.ch) (Quit: Leaving.)
[13:11:11] <nox> How do I use crowbot1 for memos again?
[13:11:24] * jgraham longs for a servo try-equivalent
[13:11:41] <nox> try-equivalent?
[13:12:29] <jgraham> to test changes on buildbot before they actually land
[13:12:56] <jgraham> Well specifically before homu gets involved
[13:12:59] *** Joins: ghservo (ghservo@moz-m9l.5u0.30.192.IP)
[13:12:59] -ghservo- [13servo] 15jdm closed issue #6215: Testing under headless mode 02http://git.io/vk4aa
[13:12:59] *** Parts: ghservo (ghservo@moz-m9l.5u0.30.192.IP) ()
[13:13:53] <jgraham> In this specific case because trying to run the css tests 10 times in a row to look for intermittents on my own machine is taking forever and using lots of resources
[13:13:53] <Manishearth> jgraham: I believe @bors: try should work for us too
[13:14:03] <Manishearth> nox: `crowbot: tell foo bar`
[13:14:45] <jgraham> Manishearth: I guess I mean "without having to make a PR, without having to run all jobs, and without stealing machine time from the integration queue"
[13:14:46] *** Quits: nicknikolov (nicknikolov@moz-ko7.r6m.215.90.IP) (Connection closed)
[13:15:17] <Manishearth> hah
[13:16:04] <jgraham> :(
[13:16:44] <Ms2ger> We can do that if you set up some build slaves in the London office :)
[13:17:33] <Manishearth> try: -b o -p jgraham 
[13:17:57] <jgraham> I am not a platform!
[13:18:15] <Manishearth> you are now
[13:18:27] <jgraham> Ms2ger: If you don't have anything useful to say, I have a review for you :p
[13:18:34] <jgraham> ;)
[13:18:35] <Manishearth> hahaha
[13:18:57] <Manishearth> Ms2ger: oh also youi should have a look at the form owner PR on h5e
[13:19:10] <Manishearth> Ms2ger: and, for FileReader the w3c spec is the right one, yes?
[13:19:14] <Ms2ger> Correct
[13:19:22] <Manishearth> cool
[13:19:35] <Manishearth> Also, who here wants to review some libsyntax?
[13:21:10] <capella> ms2ger: Do you remember the link to the long original discussions regarding moz use of mercurial vs git?
[13:21:31] <Ms2ger> Predates me
[13:21:54] <Manishearth> capella: gps would have it I presume
[13:22:43] <Manishearth> capella: let the Git flow through you. Come to the dark side...
[13:22:54] <capella> heehee
[13:23:11] <Manishearth> Also, hg vs mercurial isn't a big deal when you've used sourcedepot :o
[13:26:17] *** Joins: caitp (caitp@moz-lmogh4.cable.rogers.com)
[13:28:16] <nox> crowbot1: tell pcwalton that I don't get how we can JIT compile things such as "div:matches(â€¦)" without ASTs.
[13:29:15] *** Quits: jiojiajiu (Guro@moz-trc2j7.asianet.co.th) (Ping timeout: 121 seconds)
[13:30:00] <jgraham> capella: There was a set of blog postsâ€¦
[13:30:01] *** Quits: je_julie (uid29643@moz-2q4j9e.brockwell.irccloud.com) (Quit: Connection closed for inactivity)
[13:30:32] <capella> right! My google-fu is failing me - I've read them but can't find my way back :/
[13:30:42] <capella> heh - not important
[13:30:45] <jgraham> http://soberbuildengineer.com/blog/2007/04/version-control-system-shootout-redux-redux/
[13:30:52] <capella> ohh
[13:31:05] <capella> jgraham thats it!
[13:32:27] <jdm> nox: I have granted you the power of pushing to the servo organization. use this only for good, never for evil.
[13:33:11] *** Joins: KiChjang (KiChjang@moz-19h7ll.dynamic.uwaterloo.ca)
[13:34:48] <nox> :O
[13:35:02] <nox> jdm: Thanks.
[13:35:06] <Manishearth> :D
[13:35:33] <jgraham> jdm: Speaking of reviews, is https://reviewable.io/reviews/servo/servo/6009 done? I guess so because you changed the labels, but you didn't mark it as done in reviewableâ€¦
[13:36:12] <nox> jdm: Does r+ rights come with that?
[13:36:38] <Manishearth> nox: not yet
[13:36:46] <nox> Ok.
[13:36:55] <Manishearth> you might be getting then though :)
[13:37:18] *** Joins: ghservo (ghservo@moz-l3t.5u0.30.192.IP)
[13:37:18] -ghservo- [13servo] 15bors-servo pushed 0 new commits to 06tmp: 02http://git.io/vkBbv
[13:37:18] *** Parts: ghservo (ghservo@moz-l3t.5u0.30.192.IP) ()
[13:37:22] *** Joins: ghservo (ghservo@moz-0l2.5u0.30.192.IP)
[13:37:22] -ghservo- [13servo] 15bors-servo merged 06tmp into 06auto: 02http://git.io/vkBbU
[13:37:22] *** Parts: ghservo (ghservo@moz-0l2.5u0.30.192.IP) ()
[13:38:20] <nox> What's I-bustage?
[13:38:41] <jdm> a meaningless tag
[13:38:47] <nox> Ok.
[13:38:50] * jdm isn't sure it's ever been applied
[13:39:02] <nox> jdm: https://github.com/servo/servo/issues/6195
[13:39:02] <crowbot1> Issue #6195: Failures in css-tests because of missing Ahem font - https://github.com/servo/servo/issues/6195
[13:39:10] <jdm> heh
[13:39:28] *** Quits: KiChjang (KiChjang@moz-19h7ll.dynamic.uwaterloo.ca) (Quit: WeeChat 1.2)
[13:41:13] <Manishearth> nox: if it gets applied it means something went horribly wrong and the person behind it will be fed to rust's -Z eat-laundry pass
[13:41:54] <jgraham> Yeah, I don't think that should be I-bustage
[13:42:22] <jgraham> I imagine bustage is "breaks servo in some major way that was somehow missed by the tests"
[13:42:38] <jgraham> (e.g. can't actually start a window, only headless)
[13:42:51] <Manishearth> yeah
[13:45:07] *** Joins: nicknikolov (nicknikolov@moz-ko7.r6m.215.90.IP)
[13:45:55] *** Joins: mwu (mwu@moz-ou3dbv.oi2i.p882.0085.2601.IP)
[13:49:45] *** Joins: Rym (y@moz-h2o.mso.205.31.IP)
[13:56:39] *** Quits: twi (twi@moz-dhvtp3.clients.your-server.de) (A TLS packet with unexpected length was received.)
[13:56:45] *** Joins: twi (twi@moz-dhvtp3.clients.your-server.de)
[13:59:06] *** Joins: sneakyness (textual@moz-tmbr33.biz.rr.com)
[14:00:40] *** mcote|afk is now known as mcote
[14:01:14] *** Quits: caitp (caitp@moz-lmogh4.cable.rogers.com) (Ping timeout: 121 seconds)
[14:11:22] *** AutomatedTester|AFK is now known as AutomatedTester
[14:12:22] *** darkowlzz is now known as darkowlzz|afk
[14:13:35] <jgraham> https://pastebin.mozilla.org/8835121
[14:13:37] <jgraham> Gah
[14:13:54] *** Joins: frogzilla (Mibbit@moz-juv.9o3.252.72.IP)
[14:14:42] <jgraham> 10 tests that are unstable 1 time in 10 from 10 runs does sort of suggest that it might be 100 tests with 100 runs
[14:15:51] *** Quits: filsmick (filsmick@moz-0svev4.abo.wanadoo.fr) (Quit: )
[14:18:05] *** Quits: jgallagher (john@moz-6ge.dhn.131.24.IP) (Client exited)
[14:20:33] *** Quits: Rym (y@moz-h2o.mso.205.31.IP) (Ping timeout: 121 seconds)
[14:20:53] *** Quits: frogzilla (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:22:18] *** darkowlzz|afk is now known as darkowlzz
[14:25:48] <jack> acrichto: I just build your cargo branch, but where is the binary?
[14:25:59] <jack> target/$triple/debug?
[14:26:24] <jack> Oh. The error I got is because rustc is not on the path.
[14:29:33] *** Joins: Rym (y@moz-h2o.mso.205.31.IP)
[14:34:19] <jdm> jgraham: can you see what the crashes were? could it be the XOpendDisplay problem that plagues other WPT tests?
[14:45:00] *** Quits: nattokirai (nattokirai@moz-rq9a8e.asahi-net.or.jp) (Client exited)
[14:47:12] *** mcote is now known as mcote|biab
[14:47:44] *** Joins: jviereck (Adium@moz-3a24o1.ethz.ch)
[14:50:36] *** Joins: chotchki (chotchki@moz-m0fj8g.res.bhn.net)
[14:50:58] *** Quits: chotchki (chotchki@moz-m0fj8g.res.bhn.net) (Quit: Leaving)
[14:52:21] *** Joins: jgallagher (john@moz-d5e8oc.hfc.comcastbusiness.net)
[14:53:51] *** Quits: jviereck (Adium@moz-3a24o1.ethz.ch) (Quit: Leaving.)
[14:54:15] <jgraham> jdm: Not in the first one I looked at at least
[14:54:21] <jgraham> Which is a bit confusing
[14:57:04] *** AutomatedTester is now known as AutomatedTester|AFK
[15:01:29] *** Quits: dstrbad (dstrbad@moz-vfo5vo.cable.xnet.hr) (A TLS packet with unexpected length was received.)
[15:01:30] *** Joins: jga (jga@moz-e4s.t1q.244.77.IP)
[15:03:38] *** Joins: dstrbad (dstrbad@moz-vfo5vo.cable.xnet.hr)
[15:05:57] *** Joins: Jesse (jruderman@moz-pqc1f5.ca.comcast.net)
[15:07:51] *** Quits: jga (jga@moz-e4s.t1q.244.77.IP) (Ping timeout: 121 seconds)
[15:08:16] *** Quits: Nekit1234007 (nekit@moz-0a7.a78.189.91.IP) (Connection closed)
[15:10:31] <jack> I like how installing rust nightly doens't fix the LD_LIBRARY_PATH problem.
[15:10:59] *** Joins: ProgramFOX (ProgramFOX@moz-8hi.i51.176.91.IP)
[15:14:38] *** Joins: jviereck (Adium@moz-9nt55l.ethz.ch)
[15:16:45] *** Joins: Nekit1234007 (nekit@moz-0a7.a78.189.91.IP)
[15:18:09] *** Quits: jviereck (Adium@moz-9nt55l.ethz.ch) (Quit: Leaving.)
[15:19:55] *** Quits: logbot (logbot@moz-4j4idd.glob.com.au) (Ping timeout: 121 seconds)
[15:20:06] *** Joins: gsingh93 (gulshan@moz-ln1ktu.st3l.iv8o.0004.2601.IP)
[15:25:18] *** Joins: Boddlnagg (Patrick@moz-qc3ib5.dyn.telefonica.de)
[15:25:49] *** Joins: Nekit1235007 (nekit@moz-0a7.a78.189.91.IP)
[15:25:57] *** Quits: Nekit1234007 (nekit@moz-0a7.a78.189.91.IP) (Connection closed)
[15:26:06] *** Nekit1235007 is now known as Nekit1234007
[15:27:01] *** Joins: logbot (logbot@moz-4j4idd.glob.com.au)
[15:27:12] *** Quits: till (till@moz-ndafsa.adsl.alicedsl.de) (Connection closed)
[15:27:34] *** Joins: till (till@moz-ndafsa.adsl.alicedsl.de)
[15:28:43] <jdm> 50 unreviewed files in the SM upgrade
[15:28:46] * jdm makes progress
[15:29:36] *** Quits: acgtyrant (acgtyrant@moz-3kd.b79.160.124.IP) (Connection closed)
[15:29:48] *** mcote|biab is now known as mcote
[15:33:15] *** Joins: dbaron (dbaron@moz-12jr9n.dynamic.fusionbroadband.com)
[15:39:11] * jack tests new cargo shared output dirs
[15:39:46] <SimonSapin> kmc: Is html5ever on crates.io blocked on something? https://github.com/servo/html5ever/commit/7c6e56f5a497ed0d04f7a4dffd02d0d2c8085e9f
[15:40:36] <Manishearth> SimonSapin: git deps
[15:40:39] *** Quits: laumann (thomas@moz-gqpfnm.science.ku.dk) (Ping timeout: 121 seconds)
[15:41:21] <SimonSapin> string-cache and mac are both on crates.io now
[15:41:52] *** Joins: laumann (thomas@moz-gqpfnm.science.ku.dk)
[15:43:16] *** Quits: Rym (y@moz-h2o.mso.205.31.IP) (Ping timeout: 121 seconds)
[15:49:19] <nox> jdm: https://github.com/servo/servo/pull/5972 r?
[15:49:20] <crowbot1> PR #5972: Makes Node::remove recursively remove all descendants of removed node from the doc. - https://github.com/servo/servo/pull/5972
[15:49:43] <Ms2ger> Right, that one
[15:49:44] *** Joins: ghservo (ghservo@moz-ij9.5u0.30.192.IP)
[15:49:44] -ghservo- [13servo] 15bors-servo 04force-pushed 06tmp from 14162a2e1 to 1410127d6: 02http://git.io/veWu4
[15:49:44] *** Parts: ghservo (ghservo@moz-ij9.5u0.30.192.IP) ()
[15:49:45] *** Joins: ghservo (ghservo@moz-ij9.5u0.30.192.IP)
[15:49:45] -ghservo- [13servo] 15bors-servo 04force-pushed 06auto from 14162a2e1 to 148eeeeb6: 02http://git.io/A9I6iA
[15:49:45] *** Parts: ghservo (ghservo@moz-ij9.5u0.30.192.IP) ()
[15:50:21] *** Joins: jga (jga@moz-e4s.t1q.244.77.IP)
[15:50:30] *** Quits: Jesse (jruderman@moz-pqc1f5.ca.comcast.net) (Client exited)
[15:50:33] *** Joins: Savago (Savago@moz-8hd.3b6.246.162.IP)
[15:50:39] <Ms2ger> nox, what's with the submodule update?
[15:50:59] <nox> Ms2ger: What?
[15:51:03] *** Joins: aravindavk (aravinda@moz-bg8.u1n.172.122.IP)
[15:51:03] *** Joins: ghservo (ghservo@moz-0l2.5u0.30.192.IP)
[15:51:03] -ghservo- [13servo] 15jdm closed pull request #5972: Makes Node::remove recursively remove all descendants of removed node from the doc. (06master...06remove-children-from-doc) 02http://git.io/vJNTH
[15:51:03] *** Parts: ghservo (ghservo@moz-0l2.5u0.30.192.IP) ()
[15:51:08] *** Quits: nicknikolov (nicknikolov@moz-ko7.r6m.215.90.IP) (Connection closed)
[15:51:16] <Ms2ger> There's a submodule update in there
[15:51:40] <jdm> someone remind me to reopen that PR in 30 minutes
[15:52:13] <nox> Oh.
[15:52:14] * jdm considers having highfive announce submodule updates every time a PR is updated
[15:52:15] *** Joins: Rym (y@moz-h2o.mso.205.31.IP)
[15:52:37] <nox> Why does that happen?
[15:53:17] <Ms2ger> git commit -a
[15:54:02] * jdm tries to remember why he downloaded the 140mb diff of the mozjs SM upgrade PR
[15:54:16] <Ms2ger> Wrong repo?
[15:54:19] <nox> No I mean, why do submodules end up dirty when rebasing or checking out older branches and whatnot.
[15:54:24] <nox> It drives me crazy.
[15:54:37] <Manishearth> nox: there's a gitconfig setting to silence that
[15:54:46] <Ms2ger> <jgraham> A programmer has a problem. They think "I know I'll use submodules". Now they have a tree of problems.
[15:55:23] *** Joins: ghservo (ghservo@moz-abh.5u0.30.192.IP)
[15:55:23] -ghservo- [13servo] 15Ms2ger opened pull request #6216: Update web-platform-tests to revision 075802c1d3387d07e31cd5887459d539b1297c8d. (06master...06wpt_20150529) 02http://git.io/vkRj0
[15:55:23] *** Parts: ghservo (ghservo@moz-abh.5u0.30.192.IP) ()
[15:55:29] <Manishearth> jdm: alternatively, cancel the build via buildbot
[15:55:38] <jdm> pffft, effort
[15:55:41] <Ms2ger> "These commits modify unsafe code. Please review it carefully!"
[15:55:44] <Ms2ger> I hope not
[15:55:48] <nox> Also, I've read something about having a plugin derive_Foo to do derive(Foo), shouldn't jstraceable be like this?
[15:55:56] <Manishearth> Ms2ger: it does `git diff | grep unsafe`
[15:56:02] <Manishearth> nox: yes
[15:56:03] <jdm> nox: yes, that would be a nice change
[15:56:08] <Manishearth> I already did it for heapsize
[15:56:12] <nox> That's E-easy no?
[15:56:15] <Manishearth> will do for jstraceable post heapsize
[15:56:18] <Manishearth> yes
[15:56:30] *** Quits: Rym (y@moz-h2o.mso.205.31.IP) (Ping timeout: 121 seconds)
[15:56:31] <Manishearth> jdm: oh, also, brson mentioned on reddit that inline(always) is a bad idea
[15:56:39] <jdm> oh?
[15:56:55] <Manishearth> perhaps we should make our no_jsmanaged_fields! use inline(always) and for autogenerated trace stuff just #[inline]?
[15:57:12] <mwu> Manishearth: oh, are we adding memory reporting for dom objects?
[15:57:25] <Manishearth> mwu: nono
[15:57:37] <Manishearth> mwu: the DOM uses a similar plugin for deriving GC trace hooks
[15:57:48] <Manishearth> #[jstraceable]
[15:57:57] <Manishearth> (it's part of #[dom_struct])
[15:58:02] *** Quits: dstrbad (dstrbad@moz-vfo5vo.cable.xnet.hr) (A TLS packet with unexpected length was received.)
[15:58:58] <mwu> Manishearth: oh I didn't read back far enough
[15:59:13] *** darkowlzz is now known as darkowlzz|afk
[16:03:04] <Ms2ger> r? https://github.com/servo/servo/pull/6216
[16:03:04] <crowbot1> PR #6216: Update web-platform-tests to revision 075802c1d3387d07e31cd5887459d539b1297c8d. - https://github.com/servo/servo/pull/6216
[16:03:23] <Manishearth> Files changed: 1,617
[16:03:25] <Manishearth> lolno
[16:03:55] * Manishearth tries anyway
[16:04:03] <Manishearth> lets see if my connection can handle it
[16:04:31] <Manishearth> Ms2ger: can you keep the expectation changes separate from the additions?
[16:04:41] *** Joins: gandalf (zbraniecki@moz-cp7c4m.ca.comcast.net)
[16:05:03] <nox> Manishearth: That would mean a commit with failing tests.
[16:05:23] <jack> I'm confused. I just did ./mach build --release, then ran it again. the second one (after no changes!) took 123s
[16:05:26] * Manishearth wants automation for wpt that does the update and checks for tests that used to pass but fail now and flags them
[16:05:37] <Manishearth> nox: sqaush
[16:05:39] <jack> That does not seem normal.
[16:05:40] <Manishearth> *ua
[16:06:05] *** Joins: ghservo (ghservo@moz-l7j.5u0.30.192.IP)
[16:06:05] -ghservo- [13servo] 15bors-servo 04force-pushed 06tmp from 148eeeeb6 to 1410127d6: 02http://git.io/veWu4
[16:06:05] *** Parts: ghservo (ghservo@moz-l7j.5u0.30.192.IP) ()
[16:06:07] *** Joins: ghservo (ghservo@moz-abh.5u0.30.192.IP)
[16:06:07] -ghservo- [13servo] 15bors-servo 04force-pushed 06auto from 148eeeeb6 to 14ab1ba02: 02http://git.io/A9I6iA
[16:06:07] *** Parts: ghservo (ghservo@moz-abh.5u0.30.192.IP) ()
[16:06:37] *** Quits: jga (jga@moz-e4s.t1q.244.77.IP) (Ping timeout: 121 seconds)
[16:06:43] <jgraham> Manishearth: test updates make PASS->FAIL reasonably normal
[16:06:48] *** Joins: Rym (y@moz-h2o.mso.205.31.IP)
[16:07:01] *** Parts: waddlesplash (haikuvian@moz-ptk.nn5.219.104.IP) ("See you on the flip side!")
[16:07:09] *** Quits: Ms2ger (Ms2ger@moz-15i.9ho.190.193.IP) (Ping timeout: 121 seconds)
[16:07:44] <Manishearth> jgraham: but a reviewable subset?
[16:08:09] *** Joins: quibbit (Mibbit@moz-juv.9o3.252.72.IP)
[16:09:31] <jgraham> Reviewing for what?
[16:10:15] <jgraham> I mean there wouldn't be any code changes in the browser, so there's nothing to review there. You could review the test changes ofc
[16:10:29] <Manishearth> jgraham: reviewing the failures
[16:10:37] <Manishearth> some failures might not be due to the test changing
[16:10:42] <Manishearth> right now wpt is the wild west for us
[16:10:50] <Manishearth> because we don't support a lot of things
[16:11:04] *** Quits: Rym (y@moz-h2o.mso.205.31.IP) (Ping timeout: 121 seconds)
[16:11:14] <Manishearth> but eventually we'll want to pass it and to keep it working. a wpt upgrade may catch regressions
[16:11:22] <jgraham> Right, but why "used to PASS and FAIL now"?
[16:11:48] <Manishearth> because "didn't exist but fails now" will happen for new features we don't support
[16:12:08] <jack> Cargo target dir sharing doesn't seem to help us :(
[16:12:11] <jack> I'll have to dig more.
[16:13:13] <jgraham> A test that produces PASS when the feature doesn't exist at all is rather broken. But still I don't see how a wpt upgrade can go from PASS->FAIL in that case because a wpt upgrade doesn't change whether the feature exists
[16:13:40] <jgraham> Or do you now mean "new tests that are fails"?
[16:14:13] <jgraham> In that case I don't see that they're more important than other fails
[16:15:04] <Manishearth> jgraham: PASS->FAIL means a regression
[16:15:12] <Manishearth> at the moment it doesn't
[16:15:22] <Manishearth> but when we start supporting most features
[16:15:48] <Manishearth> it should. shiny new features won't be used in older tests generally, they get their own directory
[16:20:40] *** darkowlzz|afk is now known as darkowlzz
[16:20:48] *** Joins: jga (jga@moz-e4s.t1q.244.77.IP)
[16:20:51] <jgraham> Manishearth: I still don't understand
[16:21:12] <jdm> 10 unreviewed files remain
[16:21:21] *** Joins: Rym (y@moz-h2o.mso.205.31.IP)
[16:21:25] <jgraham> PASS->FAIL certainly means a regression if you change code
[16:21:45] <Manishearth> jgraham: sorry, regression was a bad word. hidden bug
[16:21:50] <Manishearth> *bad word to use
[16:21:59] <mwu> \o/
[16:22:49] <jgraham> Well certainly it's a case where we may have thought we matched the spec, but actually don't
[16:23:04] <Manishearth> yeah
[16:23:33] <jgraham> So yes, it can be useful for someone to go through that and file issues, but it can't block the upgrade or anythin
[16:23:36] <jgraham> g
[16:25:39] *** Quits: Rym (y@moz-h2o.mso.205.31.IP) (Ping timeout: 121 seconds)
[16:29:25] *** Joins: jviereck (Adium@moz-pqri8u.dclient.hispeed.ch)
[16:32:46] <Manishearth> of course
[16:33:05] <Manishearth> jsut saying that I'd like tooling for this :)
[16:35:58] *** Joins: Rym (y@moz-h2o.mso.205.31.IP)
[16:37:52] *** Quits: larsberg (sid89@moz-1a60qu.0j4i.jtu0.0101.2620.IP) (Quit: )
[16:39:45] *** Joins: jedireza (jedireza@moz-ungcc1.dsl.ovh.fr)
[16:40:14] *** Quits: Rym (y@moz-h2o.mso.205.31.IP) (Ping timeout: 121 seconds)
[16:42:38] *** Joins: mccr8 (mccr8@moz-cfhap5.mtv2.mozilla.com)
[16:47:33] *** Quits: laumann (thomas@moz-gqpfnm.science.ku.dk) (Ping timeout: 121 seconds)
[16:48:11] *** Joins: wolfviking0 (wolfviking0@moz-8hd.3b6.246.162.IP)
[16:49:13] <zmike_> abinader: stop being so busy!!!!
[16:49:34] *** Joins: laumann (thomas@moz-1f0.hq0.225.130.IP)
[16:50:31] *** Joins: Rym (y@moz-h2o.mso.205.31.IP)
[16:50:44] <laumann> Does anyone know how to use the -x/--exit flag in Servo?
[16:50:50] <laumann> It says "Exit after load flag", and I assumed that after loading the first page, the application would exit
[16:50:55] <laumann> but it doesn't seem to work that way
[16:51:28] *** Joins: MrZeus (MrZeus@moz-jf4304.skybroadband.com)
[16:53:38] <jdm> bleah, only callback.rs and CodegenRust.py left
[16:53:59] <jdm> laumann: I think it only works in conjuction with the PNG output stuff?
[16:54:34] *** Quits: jedireza (jedireza@moz-ungcc1.dsl.ovh.fr) (Quit: Textual IRC Client: www.textualapp.com)
[16:54:48] *** Quits: Rym (y@moz-h2o.mso.205.31.IP) (Ping timeout: 121 seconds)
[16:54:58] <laumann> oh
[16:55:41] <mwu> callback.rs isn't too horrible to understand
[16:56:11] *** Joins: Rym (y@moz-h2o.mso.205.31.IP)
[16:56:15] <mwu> but CodegenRust.py has so much stuff that I don't know if I remember all of it
[16:59:25] <mwu> though a lot of the stuff I don't remember is usually the ports from gecko's Codegen.py
[16:59:30] *** Joins: ghservo (ghservo@moz-abh.5u0.30.192.IP)
[16:59:30] -ghservo- [13servo] 15jdm reopened pull request #5972: Makes Node::remove recursively remove all descendants of removed node from the doc. (06master...06remove-children-from-doc) 02http://git.io/vJNTH
[16:59:30] *** Parts: ghservo (ghservo@moz-abh.5u0.30.192.IP) ()
[17:00:26] *** Quits: Rym (y@moz-h2o.mso.205.31.IP) (Ping timeout: 121 seconds)
[17:01:44] *** Joins: Ms2ger (Ms2ger@moz-15i.9ho.190.193.IP)
[17:03:28] *** Joins: ghservo (ghservo@moz-l3t.5u0.30.192.IP)
[17:03:28] -ghservo- [13servo] 15bors-servo pushed 0 new commits to 06tmp: 02http://git.io/vk0V1
[17:03:28] *** Parts: ghservo (ghservo@moz-l3t.5u0.30.192.IP) ()
[17:03:30] *** Joins: ghservo (ghservo@moz-l7j.5u0.30.192.IP)
[17:03:30] -ghservo- [13servo] 15bors-servo merged 06auto into 06tmp: 02http://git.io/vk0Vy
[17:03:30] *** Parts: ghservo (ghservo@moz-l7j.5u0.30.192.IP) ()
[17:03:31] *** Joins: ghservo (ghservo@moz-l7j.5u0.30.192.IP)
[17:03:31] -ghservo- [13servo] 15bors-servo merged 06tmp into 06auto: 02http://git.io/vk0Vy
[17:03:31] *** Parts: ghservo (ghservo@moz-l7j.5u0.30.192.IP) ()
[17:03:32] *** Joins: ghservo (ghservo@moz-m9l.5u0.30.192.IP)
[17:03:32] -ghservo- [13servo] 15bors-servo closed pull request #6216: Update web-platform-tests to revision 075802c1d3387d07e31cd5887459d539b1297c8d. (06master...06wpt_20150529) 02http://git.io/vkRj0
[17:03:32] *** Parts: ghservo (ghservo@moz-m9l.5u0.30.192.IP) ()
[17:06:47] *** chmanchester|afk is now known as chmanchester
[17:07:19] <jdm> mwu: could you gist the generated TestBindingBinding.rs?
[17:07:25] *** Quits: FreeFull (freefull@moz-f65lp3.skybroadband.com) (Quit: )
[17:07:27] <jdm> I want to be able to refer to that while reviewing codegen changes
[17:08:27] <mwu> damn, haste won't let me put that up
[17:09:02] <mwu> whoa, gist recognizes rust
[17:10:20] <mwu> jdm: https://gist.github.com/michaelwu/982032c9246b67d93155
[17:10:24] <jdm> thanks
[17:10:39] <jdm> mmm, 11k
[17:10:44] *** Joins: Rym (y@moz-h2o.mso.205.31.IP)
[17:11:33] *** Quits: quibbit (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[17:15:01] *** Quits: Rym (y@moz-h2o.mso.205.31.IP) (Ping timeout: 121 seconds)
[17:17:24] *** Quits: jviereck (Adium@moz-pqri8u.dclient.hispeed.ch) (Quit: Leaving.)
[17:19:44] *** darkowlzz is now known as darkowlzz|afk
[17:25:20] *** Joins: Rym (y@moz-h2o.mso.205.31.IP)
[17:29:34] *** Quits: Rym (y@moz-h2o.mso.205.31.IP) (Ping timeout: 121 seconds)
[17:30:26] *** Quits: till (till@moz-ndafsa.adsl.alicedsl.de) (A TLS packet with unexpected length was received.)
[17:31:50] <abinader> zmike: o/
[17:32:05] <Savago> I guess he was too busy to reply before...
[17:32:18] <Savago> abinader: :-)
[17:32:33] <abinader> zmike_ rebasing & addressing jdm's review :-)
[17:32:35] <zmike_> abinader: \o
[17:32:58] <abinader> Savago: o/ !
[17:33:16] <abinader> wazuuuuupppp
[17:33:43] <Savago> Mehâ€¦ writing expenses report using a Windows VM with a IE only website.
[17:33:52] <Ms2ger> jgraham, I got https://pastebin.mozilla.org/8835144 from running with --manifest-update, you know what's up with that?
[17:35:39] <abinader> Savago: haha, don't get me started on company policies :-)
[17:37:22] <mwu> worst we ever had was an excel expenses template that you had to print out and staple receipts to
[17:39:53] *** Joins: Rym (y@moz-h2o.mso.205.31.IP)
[17:40:47] *** Quits: laumann (thomas@moz-1f0.hq0.225.130.IP) (Ping timeout: 121 seconds)
[17:42:03] *** Joins: bdero (bran@moz-lbs.91h.47.73.IP)
[17:42:06] *** Quits: bdero1 (bran@moz-216hqv.oo5r.e4su.0006.2601.IP) (Quit: Leaving.)
[17:42:22] *** Quits: Luqman (laden@moz-bjmiqc.csclub.uwaterloo.ca) (Ping timeout: 121 seconds)
[17:42:42] *** Joins: bdero1 (bran@moz-lbs.91h.47.73.IP)
[17:42:42] *** Quits: bdero (bran@moz-lbs.91h.47.73.IP) (Connection closed)
[17:42:59] *** Joins: ghservo (ghservo@moz-ij9.5u0.30.192.IP)
[17:42:59] -ghservo- [13servo] 15bors-servo merged 06auto into 06master: 02http://git.io/vk0Vy
[17:42:59] *** Parts: ghservo (ghservo@moz-ij9.5u0.30.192.IP) ()
[17:43:01] *** Joins: ghservo (ghservo@moz-l7j.5u0.30.192.IP)
[17:43:01] -ghservo- [13servo] 15bors-servo closed pull request #5972: Makes Node::remove recursively remove all descendants of removed node from the doc. (06master...06remove-children-from-doc) 02http://git.io/vJNTH
[17:43:01] *** Parts: ghservo (ghservo@moz-l7j.5u0.30.192.IP) ()
[17:43:02] *** Joins: ghservo (ghservo@moz-0l2.5u0.30.192.IP)
[17:43:02] -ghservo- [13servo] 15bors-servo closed issue #5963: Nodes that are not attached to the Document are still accessible through getElementById 02http://git.io/vJ73N
[17:43:02] *** Parts: ghservo (ghservo@moz-0l2.5u0.30.192.IP) ()
[17:43:16] *** Quits: bdero1 (bran@moz-lbs.91h.47.73.IP) (Connection closed)
[17:43:17] *** Joins: bdero (bran@moz-lbs.91h.47.73.IP)
[17:43:52] *** Joins: bdero1 (bran@moz-lbs.91h.47.73.IP)
[17:43:52] *** Quits: bdero (bran@moz-lbs.91h.47.73.IP) (Connection reset by peer)
[17:44:08] *** Quits: Rym (y@moz-h2o.mso.205.31.IP) (Ping timeout: 121 seconds)
[17:46:26] *** Joins: bdero (bran@moz-lbs.91h.47.73.IP)
[17:46:26] *** Quits: bdero1 (bran@moz-lbs.91h.47.73.IP) (Connection closed)
[17:47:01] *** Joins: bdero1 (bran@moz-lbs.91h.47.73.IP)
[17:47:01] *** Quits: bdero (bran@moz-lbs.91h.47.73.IP) (Connection closed)
[17:47:36] *** Joins: bdero (bran@moz-lbs.91h.47.73.IP)
[17:47:36] *** Quits: bdero1 (bran@moz-lbs.91h.47.73.IP) (Connection reset by peer)
[17:48:11] *** Joins: bdero1 (bran@moz-lbs.91h.47.73.IP)
[17:48:11] *** Quits: bdero (bran@moz-lbs.91h.47.73.IP) (Connection closed)
[17:48:46] *** Joins: bdero (bran@moz-lbs.91h.47.73.IP)
[17:48:46] *** Quits: bdero1 (bran@moz-lbs.91h.47.73.IP) (Connection closed)
[17:48:49] *** Joins: laumann (thomas@moz-1f0.hq0.225.130.IP)
[17:49:21] *** Joins: bdero1 (bran@moz-lbs.91h.47.73.IP)
[17:49:21] *** Quits: bdero (bran@moz-lbs.91h.47.73.IP) (Connection closed)
[17:51:19] *** Joins: mib_0yjk7m (Mibbit@moz-juv.9o3.252.72.IP)
[17:51:25] *** Quits: psd (psd@moz-5h74fr.mtnl.net.in) (Quit: Leaving)
[17:52:06] *** Joins: Luqman (laden@moz-bjmiqc.csclub.uwaterloo.ca)
[17:52:07] *** Quits: mib_0yjk7m (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[17:54:27] *** Joins: Rym (y@moz-h2o.mso.205.31.IP)
[17:58:17] *** Joins: playjax (chatzilla@moz-r0982v.optusnet.com.au)
[17:58:43] *** Quits: Rym (y@moz-h2o.mso.205.31.IP) (Ping timeout: 121 seconds)
[18:01:56] *** Joins: Rym (y@moz-h2o.mso.205.31.IP)
[18:03:22] *** Joins: caitp (caitp@moz-lmogh4.cable.rogers.com)
[18:09:57] *** Quits: laumann (thomas@moz-1f0.hq0.225.130.IP) (Ping timeout: 121 seconds)
[18:10:09] *** Joins: laumann (thomas@moz-1f0.hq0.225.130.IP)
[18:10:59] <jdm> crowbot1: ping pcwalton could you reply to https://github.com/servo/rust-azure/pull/160 ?
[18:10:59] <crowbot1> PR #160: Implement fill_rect for surface pattern with repetition style. - https://github.com/servo/rust-azure/pull/160
[18:11:28] *** Joins: Jayflux (Jason@moz-3ejd3p.as13285.net)
[18:17:42] *** Quits: laumann (thomas@moz-1f0.hq0.225.130.IP) (Ping timeout: 121 seconds)
[18:17:47] *** Joins: laumann (thomas@moz-1f0.hq0.225.130.IP)
[18:19:14] *** Quits: dbaron (dbaron@moz-12jr9n.dynamic.fusionbroadband.com) (Ping timeout: 121 seconds)
[18:23:02] *** Joins: nefzaoui (nefzaoui@moz-f8f.t6o.104.154.IP)
[18:27:33] *** Quits: ProgramFOX (ProgramFOX@moz-8hi.i51.176.91.IP) (Quit: ChatZilla 0.9.91.1 [Firefox 38.0.1/20150513174244])
[18:29:03] *** Quits: Boddlnagg (Patrick@moz-qc3ib5.dyn.telefonica.de) (Connection closed)
[18:29:23] *** Joins: Boddlnagg (Patrick@moz-qc3ib5.dyn.telefonica.de)
[18:30:48] *** Joins: mib_wdalpj (Mibbit@moz-juv.9o3.252.72.IP)
[18:32:24] *** Joins: till (till@moz-ndafsa.adsl.alicedsl.de)
[18:32:35] <zmike_> tfw script finally compiles
[18:35:00] *** Joins: fkaa_ (tundmatu@moz-501od2.business.telia.com)
[18:38:00] *** Quits: fkaa (tundmatu@moz-501od2.business.telia.com) (Ping timeout: 121 seconds)
[18:38:24] *** Quits: laumann (thomas@moz-1f0.hq0.225.130.IP) (Quit: leaving)
[18:39:23] *** Joins: jiojiajiu (Guro@moz-trc2j7.asianet.co.th)
[18:41:11] *** AutomatedTester|AFK is now known as AutomatedTester
[18:41:42] *** Quits: jiojiajiu (Guro@moz-trc2j7.asianet.co.th) (Connection closed)
[18:44:24] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[18:44:24] *** ChanServ sets mode: +o pcwalton
[18:44:24] <crowbot1> pcwalton: nox said that I don't get how we can JIT compile things such as "div:matches(â€¦)" without ASTs.
[18:44:24] <crowbot1> pcwalton: jdm said could you reply to https://github.com/servo/rust-azure/pull/160 ?
[18:44:48] *** Quits: fkaa_ (tundmatu@moz-501od2.business.telia.com) (Quit: )
[18:46:04] <pcwalton> jdm: done
[18:46:08] <jdm> thanks!
[18:46:27] <pcwalton> is there a way to shut down Servo cleanly when running in headless mode?
[18:46:36] <pcwalton> i.e. without sending a signal
[18:48:30] *** Quits: till (till@moz-ndafsa.adsl.alicedsl.de) (A TLS packet with unexpected length was received.)
[18:48:52] *** Joins: till (till@moz-ndafsa.adsl.alicedsl.de)
[18:52:54] *** Quits: till (till@moz-ndafsa.adsl.alicedsl.de) (Ping timeout: 121 seconds)
[18:53:55] *** Quits: gsingh93 (gulshan@moz-ln1ktu.st3l.iv8o.0004.2601.IP) (Ping timeout: 121 seconds)
[18:54:06] <pcwalton> aha, window.close() works
[18:56:53] <pcwalton> hmm, profiling didn't work on arm with apt-get gperftools :(
[18:56:56] * pcwalton tries building locally
[18:57:39] *** Quits: Rym (y@moz-h2o.mso.205.31.IP) (Ping timeout: 121 seconds)
[19:00:19] *** Joins: dbaron (dbaron@moz-r17no2.2rkg.9kg1.0101.2620.IP)
[19:04:31] *** Joins: fkaa (tundmatu@moz-501od2.business.telia.com)
[19:10:06] *** Quits: godlikesme (godlikesme@moz-2a2.dsd.174.79.IP) (Connection closed)
[19:19:57] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[19:25:10] *** Quits: playjax (chatzilla@moz-r0982v.optusnet.com.au) (Ping timeout: 121 seconds)
[19:34:50] *** Quits: duncan (paul@moz-dst.ms6.225.173.IP) (Connection closed)
[19:36:35] *** Quits: MrZeus (MrZeus@moz-jf4304.skybroadband.com) (Ping timeout: 121 seconds)
[19:50:07] <mwu> are enums inside enums efficiently represented?
[19:50:31] * mwu sees some comments about that possibility in adt.rs
[19:52:37] <Manishearth> mwu: I think no?
[19:52:46] <mwu> ok
[19:52:58] <Manishearth> Because you can extract the inner type and pass it to a fn in a different crate and now there's a cost
[19:53:09] <Manishearth> though ... if the enum is private and never used that way ... perhaps
[19:53:21] <mwu> https://github.com/rust-lang/rust/blob/master/src/librustc_trans/trans/adt.rs#L32
[19:53:32] <Manishearth> and there are probably ways of doing it in a limited sense for special cases
[19:53:35] <evilpie> SimonSapin: hey, I updated #5851 recently
[19:53:35] <crowbot1> Issue #5851: Implement the HTML background attribute - https://github.com/servo/servo/pull/5851
[19:54:01] <Manishearth> (eg the discriminant of the parent enum is the discriminant of the child, and incremental for the rest)
[19:54:21] <Manishearth> mwu: ah, the discriminants are packed. nice
[19:54:37] <mwu> nah that's a possibility
[19:54:41] <mwu> just a todo list.
[19:55:03] <mwu> unless someone implemented it and never took it off this list
[19:55:21] <Manishearth> ah
[19:55:37] <cmr> no, they're not packed.
[19:55:43] <mwu> hmm
[19:55:52] <mwu> might look into implementing it later
[19:56:04] <cmr> I'm not sure you can.
[19:56:14] <cmr> You need to be able to take a reference into one of the interior values.
[19:56:25] <Manishearth> cmr: at the very least, for a zero-cost destructure, we could choose the largest child enum and use its discriminant as a starting point for the parent (unrolling it)
[19:56:41] <Manishearth> cmr: yeah, that's my concern too
[19:56:57] <mwu> I mean, if it's byte aligned, should be doable, no?
[19:56:58] <Manishearth> I think unrolling an enum works fine here though
[19:57:37] <Manishearth> mwu: enum Foo{Bar(Bar), Baz(Baz)} if let Foo::Bar(ref bar) = foo {..}
[19:57:38] <Manishearth> now
[19:57:49] <Manishearth> ref bar is a Bar byreference
[19:58:15] <Manishearth> if Bar itself was an enum, it the referecne should contain an independent discriminant
[19:58:25] <jgraham> Ms2ger: Not sure. Is your tree clean?
[19:58:41] <Manishearth> otherwise if I pass it to a fn that takes an &Bar, that fn will be confused since the discriminant was borked
[19:58:57] <mwu> and it should be doable if we can fit Bar into a u8 or u16
[19:59:18] <Manishearth> mwu: how does that fix the reference problem?
[19:59:36] <Manishearth> mwu: you need &Bar to behave the same regardless of the origin of the Bar
[19:59:37] <zmike_> how can I create an impl for both *const and *mut types?
[19:59:39] *** Quits: caitp (caitp@moz-lmogh4.cable.rogers.com) (Quit: Leaving)
[19:59:46] <Manishearth> zmike_: Ctrl-C Ctrl-V
[19:59:51] <Manishearth> welcome to the world of Go
[19:59:53] <Manishearth> we hope you stay
[19:59:55] <zmike_> if I try to have both then it compiler errors
[19:59:59] <Manishearth> wha
[20:00:19] *** Joins: not_gavin (gavin@moz-46i.6l4.14.76.IP)
[20:00:21] <zmike_> https://gist.github.com/zmike/bcd165651d74e2b0d8ac
[20:00:26] <mwu> Manishearth: I'm not sure how it doesn't solve the problem? it ends up being represented like {foo: u8, bar: u8}
[20:00:29] *** Joins: eibwen (eibwen@moz-4fjp9d.dip0.t-ipconnect.de)
[20:00:45] <mwu> and you take a reference to the second thing
[20:01:04] <zmike_> reload for error message
[20:01:14] <Manishearth> mwu: could you expand that?
[20:01:18] <Manishearth> *expand on
[20:01:49] *** Joins: caitp (caitp@moz-lmogh4.cable.rogers.com)
[20:01:51] <zmike_> oh
[20:01:54] *** chmanchester is now known as chmanchester|afk
[20:01:55] <Manishearth> zmike_: the error message refers to a nonptr
[20:01:56] <zmike_> that's a different error and I can't read
[20:02:15] <Manishearth> I don't see why that's broken either though
[20:02:24] <Manishearth> unless you're doing some dark pointer voodoo
[20:02:29] <mwu> if foo only has two possibilities, you can use the lower 8 bits to store the discriminant for foo, and then the next 8 bits to store the discriminant for bar
[20:02:33] <Manishearth> ...wait, who am I talking to? of course you are
[20:02:37] <mwu> assuming bar can be stored in 8 bits
[20:03:04] <mwu> and it's addressable
[20:03:17] <Manishearth> hmmm
[20:03:22] <Manishearth> still not sure if that's right
[20:03:27] <Manishearth> but that might work
[20:04:16] <zmike_> Manishearth: what might this error mean:
[20:04:19] <zmike_> string_list.rs:40:19: 40:35 error: the trait `wrappers::CefWrap<*const types::cef_string_utf16>` is not implemented for the type `*mut types::cef_string_utf16` [E0277]
[20:04:44] <zmike_> I tried adding a const impl and it continues to fail
[20:05:17] <Manishearth> mwu: so represented as a struct with explicit discriminant fields, how would https://gist.github.com/Manishearth/ff9e9aaa66864d163cb7 look ?
[20:05:24] *** Quits: aravindavk (aravinda@moz-bg8.u1n.172.122.IP) (Quit: Konversation terminated!)
[20:05:30] <Manishearth> zmike_: you implemented it for String?
[20:06:01] <Manishearth> zmike_: also, do you want to use the From/Into traits instead?
[20:06:16] <zmike_> Manishearth: https://gist.github.com/zmike/f983a43f840bd1826b47
[20:06:22] <zmike_> I'm trying to add to some pcwalton magic
[20:06:27] <zmike_> but it's too magical
[20:06:29] <mwu> Manishearth: it just wouldn't work. it's just for enums that can be represented as u16 or u8
[20:08:07] *** Joins: dstrbad (dstrbad@moz-teorbf.dsl.iskon.hr)
[20:08:25] <Manishearth> ah okay
[20:08:28] <Manishearth> yeah that would work
[20:09:46] <Manishearth> zmike_: I don't see that impl anywhere
[20:09:57] <zmike_> I did some editing
[20:10:08] <zmike_> the cef_string_userfree_t is a type for *mut cef_string_utf16_t
[20:10:37] <Manishearth> ah
[20:10:54] <Manishearth> I still don't see that impl anywhere
[20:11:09] <zmike_> line 256
[20:11:21] <Manishearth> that is not that impl
[20:11:22] <Manishearth> impl<'a> CefWrap<cef_string_userfree_t> for String 
[20:11:25] <Manishearth> you want
[20:11:44] <Manishearth> impl<'a> CefWrap<cef_string_userfree_t> for *mut cef_string_utf16
[20:11:55] <zmike_> err
[20:11:58] <zmike_> they're the same type though
[20:12:04] <Manishearth> no ... ?
[20:12:11] *** Quits: mib_wdalpj (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[20:12:15] <Manishearth> How is String = *mut cef_string_utf16?
[20:12:20] <Manishearth> you know that, the type system doesn't
[20:12:33] <zmike_> no, cef_string_userfree_t is *mut cef_string_utf16
[20:12:53] <Manishearth> zmike_: I'm saying that `for String` is the problem
[20:13:04] <zmike_> confusing
[20:13:05] <zmike_> but ok
[20:13:08] <Manishearth> also you want *const there too but that's a different thing
[20:13:17] <Manishearth> zmike_: nowhere in the error message does it say String :)
[20:13:24] <zmike_> this is true
[20:14:00] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[20:14:00] *** ChanServ sets mode: +o pcwalton
[20:14:26] <Manishearth> 01:41 <@Manishearth> that is not that impl
[20:14:26] <Manishearth> 01:41 <@Manishearth> impl<'a> CefWrap<cef_string_userfree_t> for String 
[20:14:26] <Manishearth> 01:41 <@Manishearth> you want
[20:14:32] <Manishearth> ack
[20:14:36] <Manishearth> sorry
[20:17:29] <zmike_> my head hurts :/
[20:19:58] * Manishearth gives zmike_ a *const aspirin_t
[20:20:29] * zmike_ calls rust_panic
[20:20:39] <zmike_> I have no idea how to fix this
[20:20:41] <zmike_> too much macro
[20:20:44] <zmike_> not enough PhD
[20:20:52] * Manishearth proposes syntax extensions
[20:20:56] <zmike_> pcwalton: your macros have defeated me
[20:21:30] <Manishearth> zmike_: compile it with -Z unstable-options --pretty=expanded
[20:22:00] *** Quits: nefzaoui (nefzaoui@moz-f8f.t6o.104.154.IP) (Ping timeout: 121 seconds)
[20:24:23] <Manishearth> then there will be no more macro
[20:24:25] <Manishearth> only xuul
[20:24:38] <Manishearth> *zuul
[20:24:43] <cmr> *xul
[20:24:44] <Manishearth> too mcuh firefox
[20:24:47] <cmr> not enough firefox
[20:24:49] <Manishearth> haha
[20:25:22] *** Joins: nefzaoui (nefzaoui@moz-f8f.t6o.104.154.IP)
[20:25:31] <Manishearth> you may want to comment out the panic!()s though
[20:25:54] <Manishearth> -pretty=expanded makes them look ugly, as would be expected of a tool with that name
[20:27:01] <zmike_> Manishearth:  is there some easy way to add those flags?
[20:27:10] <Manishearth> zmike_: what are you compiling? embedding?
[20:27:13] <zmike_> yes
[20:27:17] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[20:27:19] <zmike_> alwyas
[20:27:33] <Manishearth> ./mach cargo rustc ....
[20:27:36] <Manishearth> I think
[20:28:14] <Manishearth> ./mach cargo rustc -- -Z unstable-options --pretty=expanded
[20:28:22] <Manishearth> in the ports/cef dir
[20:28:31] <Manishearth> it should give you one mega rs file
[20:29:13] <zmike_> ugh
[20:29:16] <Manishearth> cmr: why is OIBIT called OIBIT when the traits are opt out?
[20:29:18] <zmike_> I'll just write it out manually
[20:29:40] <Manishearth> zmike_: why not just keep adding impls till the compiler is happy?
[20:29:41] <cmr> Manishearth: force of habit from the old rfc.
[20:29:47] <Manishearth> cmr: yay nomenclature
[20:29:53] <zmike_> Manishearth: I tried that and it kept throwing the same error no matter what I did
[20:30:01] <Manishearth> zmike_: should I try?
[20:30:09] <Manishearth> gimme the branch and what you want done
[20:30:20] <zmike_> Manishearth: uhhhh
[20:30:23] <zmike_> how about
[20:30:25] <zmike_> I do it the long way
[20:30:31] <zmike_> and then it'll be easier for me to explain
[20:30:33] *** chmanchester|afk is now known as chmanchester
[20:30:39] <Manishearth> kay
[20:30:42] <zmike_> thanks though
[20:30:51] * zmike_ favicons harder
[20:30:58] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[20:30:58] *** ChanServ sets mode: +o pcwalton
[20:31:44] *** Joins: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com)
[20:41:17] *** Quits: Savago (Savago@moz-8hd.3b6.246.162.IP) (Client exited)
[20:46:33] *** Joins: jviereck (Adium@moz-8msfvp.dynamic.hispeed.ch)
[20:48:19] <mwu> jdm: are all the DOMRefCell fields things that layout might want access?
[20:48:55] <jdm> mwu: the idea originally was to use DOMRefCell everywhere to catch any places where they were being misused
[20:49:17] <jdm> their reason for being no longer makes sense since we stopped running script and layout in parallel, of course
[20:49:23] <mwu> oh.
[20:49:23] <jdm> and RefCell keeps sneaking back in
[20:49:29] <mwu> ok..
[20:49:44] * jdm isn't sure whether to take a principled stand or remove them all
[20:50:25] *** Quits: jgallagher (john@moz-d5e8oc.hfc.comcastbusiness.net) (Client exited)
[20:51:02] <mwu> why did we stop running script and layout in parallel? too hard to make it work sanely?
[20:52:26] <jdm> I don't recall, but pcwalton surely must.
[20:54:29] <Ms2ger> We still don't want layout to mutate dom objects, surely
[20:54:37] <pcwalton> we never ran script and layout fully in parallel, and we can't
[20:54:41] <pcwalton> but we should run it partially in parallel
[20:54:52] <pcwalton> that is: style recalc/flow construction should not run in parallel
[20:54:53] <pcwalton> however, layout acn
[20:54:55] <pcwalton> can*
[20:55:00] <pcwalton> and we actually do, in the case of CSS animations
[20:55:08] <pcwalton> which are reftested
[20:55:09] <pcwalton> so we know it's working
[20:55:19] <Ms2ger> jgraham, not quite, but I'll check on a clean tree at some point
[20:55:22] <jdm> pcwalton: we totally did before, hence why we kept seeing occasional borrow failures when script would be mutating while layout was reading
[20:55:29] <pcwalton> oh yes, we did
[20:55:32] <pcwalton> apologies
[20:55:34] <pcwalton> anyway
[20:55:36] <mwu> hah
[20:55:49] <pcwalton> we should back off to only running style recalc/flow construction with the lock held
[20:55:58] <pcwalton> but keep layout running without it held
[20:56:08] *** Joins: larsberg (Adium@moz-kmvlue.cable.rcn.com)
[20:56:08] *** ChanServ sets mode: +o larsberg
[20:56:23] <pcwalton> oh, and there was this one nasty case that prevented us from doing it before, where someone added some random code that looks at the DOM right before display list construction
[20:56:28] <pcwalton> but I fixed that with CSS transitions
[20:56:32] <pcwalton> so there should be no more problems like that
[20:56:34] <Manishearth> jdm: we could make domrefcell just plain unsafecell in release mode
[20:56:41] <jdm> Manishearth: D:
[20:56:54] <mwu> layout should only care about some fraction of things that script can do though, right
[20:56:59] <Ms2ger> pcwalton, file that, please?
[20:57:03] <pcwalton> Ms2ger: it's fixed
[20:57:12] <pcwalton> oh, you mean run layout/script in parallel where we can?
[20:57:13] <pcwalton> ok
[20:57:14] <Ms2ger> Yeah
[20:57:15] <Ms2ger> Thanks
[20:57:18] *** Quits: jviereck (Adium@moz-8msfvp.dynamic.hispeed.ch) (Quit: Leaving.)
[20:57:28] <jdm> mwu: yes, hence the traits for layout etc.
[20:57:45] <mwu> hmm
[20:57:50] *** Joins: ghservo (ghservo@moz-0l2.5u0.30.192.IP)
[20:57:50] -ghservo- [13servo] 15pcwalton opened issue #6217: Run layout and script concurrently 02http://git.io/vkunC
[20:57:50] *** Parts: ghservo (ghservo@moz-0l2.5u0.30.192.IP) ()
[20:58:27] <larsberg> Does anybody have an idea offhand why summit-one.html (longcat) works fine standalone but renders nothing when it's inside an iframe (summit3.html)? Note that summit-two.html (spinning rust logo) *does* work standalone or inside an iframe.
[21:02:24] *** Quits: kosmodrey (kosmodrey@moz-9lj.ble.109.46.IP) (Ping timeout: 121 seconds)
[21:03:08] <edunham> larsberg: when we talked yesterday about problems automating the build for servo snapshots, are those snapshots what you'd get from a successful `./mach build --release`, or something else?
[21:03:20] *** Quits: sneakyness (textual@moz-tmbr33.biz.rr.com) (Quit: Textual IRC Client: www.textualapp.com)
[21:04:11] <Manishearth> Servo snapshots, or Servo Rust snapshots?
[21:04:12] <larsberg> edunham: Sorry for being unclear! Those snapshots are just builds of the Rust compiler that have additional targets and a few random flags to configure.
[21:04:42] <edunham> nah, no problem -- I've been deluged with information lately and don't always write down the right parts
[21:04:43] <Manishearth> edunham: Larsberg has magic scripts that kick off all of the relevant builds at once, but I hear they're very specific to his setup
[21:04:51] <larsberg> edunham: Basically, we build versions of rustc that run on any of 32 bit linux, 64 bit linux, 64 bit OSX, and target the host platform + arm-android
[21:05:23] <Manishearth> also docs
[21:05:26] <edunham> larsberg: are those scripts something you'd be able to chuck in a public repo somewhere?
[21:05:50] <larsberg> Manishearth: the scripts have no magic; all the magic is in the machine config. And it was mainly tweaking the setup of a linux VM until it had a set of compilers and libs barely sufficient to compile Rust while not taking a depedency on any GNU libraries older than about 2001 :-)
[21:05:58] <Manishearth> haha
[21:06:08] <Manishearth> throwback to the Travis days
[21:06:16] <larsberg> edunham: Instructions are here - https://github.com/servo/servo/wiki/Updating-the-Rust-compiler-used-by-Servo
[21:06:34] * Manishearth hated those llvm bugs
[21:07:02] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[21:07:17] <edunham> whoa, a wiki?! what is this, a project with actual docs? 
[21:07:28] * edunham impressed and appreciating it
[21:07:52] *** Joins: froglegstew (Mibbit@moz-juv.9o3.252.72.IP)
[21:07:54] <larsberg> edunham: thanks! particularly for the infrastructure stuff, we *do* try to have all of it written down to avoid too much magic
[21:08:26] <larsberg> I think the only bit we haven't written down is the stuff that we really intend to automate soon now - launching homu again in a screen session as root after we reboot the master.
[21:08:37] <Manishearth> edunham: (beware: wiki pages may be old and outdated)
[21:08:39] <larsberg> Because that's just too embarrassing to record in public
[21:08:56] <Manishearth> hah
[21:09:09] <larsberg> Manishearth: untrue for at least the infra stuff; I keep those up to date. Even tested the "adding a new builder" stuff for the two we added this week!
[21:09:15] <Manishearth> larsberg: ah okay
[21:09:55] <edunham> larsberg: thank you for writing things down :)
[21:11:03] <edunham> so, in an ideal situation, the rust compiler prebuild could be done automatically... should that happen on a VM we host, or be packaged to allow people to do it locally?
[21:11:04] * Manishearth grumbles about nobody writing things down at MS
[21:11:14] <larsberg> edunham: thank you for looking into improving it all! We're all really excited, even if Rust is going to take up a lot of your time for a little while.
[21:11:27] <Manishearth> all docs are found in the distributed network of minds which may or may not work there anymore
[21:11:45] <larsberg> I'd love for the prebuilt compiler to happen on our machines and be automatically uploaded to the s3 bucket (which others can't do)
[21:12:10] <Manishearth> edunham: well, the osx stuff is there too, so to do it locally you need both machines or VMs. Unless you xcompile all the things
[21:12:22] <edunham> I figure there's 3 phases to my onboarding... first, get deluged with information and learn how broken things are... second, implement interim fixes for the truly terrifying stuff... third, architect and deploy correct, best-practices, long-term solutions that'll be able to run without me
[21:12:24] <larsberg> Locally, if it's an emergency, you can always just run a Servo build against any old rust compiler (even a nightly). The snapshots are mainly important when we need to either cherry-pick a compiler fix (which we do less of now) or are far enough along in an upgrade that you want to start testing android and gonk
[21:12:53] <edunham> okay, that information helps a lot
[21:13:12] <Manishearth> Note that nightlies aren't as awesome as our snapshots -- nightlies don't contain all 3 xcompile toolchains
[21:13:23] <edunham> if lack of the snapshots wouldn't totally halt development, it's not as bad as i was thinking
[21:13:28] <Manishearth> So using nightlies is not a permanent solution
[21:13:52] <edunham> from what i understood before, it was looking like lars's laptop was a SPOF on the toolchain's critical path :)
[21:13:57] <Manishearth> hahaha
[21:14:43] *** Joins: FreeFull (freefull@moz-o5b738.range86-156.btcentralplus.com)
[21:15:06] <edunham> yeah there are a few terror points around... any time i go "how are backups set up?" and get the response
[21:15:15] <larsberg> well, without the magical snapshots, you can't actually land a rust upgrade, because the automation will check on all platforms and punt. So it doesn't stop local work from progressing, but you can't land anything in main
[21:15:18] <edunham> "backups?" it calls for immediate action
[21:15:49] <Manishearth> with saltfs we don't need infra backups much I presume
[21:15:52] <larsberg> I'm super glad jack decided to roll out salt. Modulo our "seekrits" files, you could burn down all of Servo's servers and we could bring them back up pretty quickly.
[21:16:15] <Manishearth> larsberg: note that for infra failures you're still (mostly) the SPOF
[21:16:18] <nox> Let's not anyway.
[21:16:18] * larsberg notes that the folks in #build have been talking positively about using Ansible for their machine setups for the future, but doesn't know where that's at
[21:16:29] <Manishearth> if you take a vacation and the servers go down we're screwed :p
[21:17:18] <larsberg> Manishearth: nah, jack can pick up anything off the floor, too. And SOON there will be 3 of us :-)
[21:17:29] <Manishearth> ah cool
[21:17:41] <edunham> other than that little "prebuilding the rust compiler" detail...
[21:17:43] <Manishearth> I understand most of the salt/twistd stuff but not all of it
[21:18:01] <Manishearth> larsberg: btw, Rust removed support for internal docs by default
[21:18:14] <Manishearth> they pollute the search results and are unstable and unused
[21:18:21] <Manishearth> *but* we do use plugins
[21:18:26] <Manishearth> and need those docs
[21:18:30] <nox> (When) will Servo stop including its own Rust?
[21:19:04] <Manishearth> larsberg: so, should we compile with --enable-compiler-docs, or do you think the gain of dropping out the noisy docs outweighs the extra work required for writing plugins?
[21:19:16] <Manishearth> (since we don't write plugins often)
[21:20:05] <edunham> larsberg: in this case, I'm thinking it might be appropriate to attempt to write salt configs which set up a machine capable of prebuilding rust... doing it in config management shouldn't be a whole lot harder than doing it locally, and would be self-documenting
[21:20:39] <larsberg> edunham: that sounds perfect
[21:21:02] <edunham> ok, and a good place for me to learn to Salt as well :)
[21:21:22] * edunham has played with chef, some puppet, and a teeny bit of Ansible so far
[21:21:47] <larsberg> nox: We could probably do something like Gecko is doing right now and require a minimum version of Rust. The only problem is that we'd ALSO have to require a maximum version, as you can't just have a willy-nilly-whatever version of Rust on your system and expect the spaghetti of Servo packages to cook up nicely
[21:21:53] <edunham> larsberg: what distro are you running on the machine that can do the build successfully?
[21:22:22] <larsberg> edunham: It's just an Ubuntu 14.04 LTS version. I can give you the dpkg list, which is the only magic, IIRC.
[21:22:23] <Manishearth> nox: we get some Rust fluidity if we disable our in-tree plugins, but there are plugins in our out of tree deps too
[21:22:40] <mwu> jdm: so if DOMRefCell was primarily to protect against layout, and now we don't run them at the same time, does that mean they could converted to Cells? or would RefCells protect against what scripts might do
[21:22:47] <nox> larsberg: Why a maximum version though?
[21:22:53] <nox> For the unstable things it uses?
[21:22:55] <mwu> just wondering in theory - don't actually want to go in that direction
[21:22:56] <edunham> larsberg: that would be very helpful :) 
[21:22:58] <Manishearth> mwu: for safety, RefCells
[21:23:03] <larsberg> nox: Yes, because we use unstable features.
[21:23:10] <Manishearth> mwu: or Cells wherever possible. Cell won't work for non-Copy stuff
[21:23:11] <jdm> mwu: still RefCell, because stuff like String isn't Copy
[21:23:13] *** mcote is now known as mcote|afk
[21:23:31] <Manishearth> I suggested unsafecell but that's probably a bad idea
[21:23:33] <jdm> we don't have anything like DOMCell because there aren't borrowing concerns
[21:24:00] <mwu> ah. but in theory if we did something terrible and just copied strings all the time, we could get away with cell
[21:24:27] <Manishearth> mwu: ick
[21:24:32] <Manishearth> mwu: no, hecause destructors
[21:24:36] <Manishearth> *because
[21:24:44] <mwu> what do you mean
[21:24:47] <Manishearth> when do you run the destructor when you've COWed a string?
[21:25:02] <larsberg> edunham: https://pastebin.mozilla.org/8835186
[21:25:04] <mwu> btw, not suggesting to do anything here. I'm just trying to understand the data structures
[21:25:08] <Manishearth> and what do you do about existing borrows?
[21:25:25] <Manishearth> mwu: http://manishearth.github.io/blog/2015/05/27/wrapper-types-in-rust-choosing-your-guarantees/
[21:25:28] <edunham> larsberg: thanks
[21:25:28] <mwu> oh no I'm suggesting something even more horrible
[21:25:35] <mwu> no cow just copy all the time
[21:25:36] *** jandem is now known as jandem-away
[21:25:42] <Manishearth> mwu: copy all the time is stil lvague
[21:25:56] <Manishearth> copy all the time works for Cell because T:Copy --> C:!Drop
[21:25:56] <mwu> if you grab a string from a cell, it gets copied
[21:25:59] <Manishearth> * T:!Drop
[21:26:04] <Manishearth> mwu: oh
[21:26:12] <Manishearth> okay, that solves the reference problem
[21:26:27] <Manishearth> also is insanely heavy and oh please god lets not do it
[21:26:49] <Manishearth> I thought you meant copy all the time like how Cell does it
[21:26:55] <mwu> but would it be safe?
[21:26:57] <Manishearth> wait, this *is* how Cell does it
[21:26:59] <Manishearth> oh I see
[21:27:24] <Manishearth> hmm
[21:27:27] *** Quits: jdm (jdm@moz-1s76ai.dsl.teksavvy.com) (Quit: )
[21:27:36] * Manishearth ponders interior references
[21:27:43] * Manishearth ponders UB
[21:27:57] <Manishearth> it *seems* safe
[21:28:03] <Manishearth> but with UnsafeCell you can't be sure
[21:28:13] <Manishearth> llvm might be up to its tricks
[21:28:44] <Manishearth> mwu: okay, this looks safe to me
[21:28:52] <Manishearth> but ... why?
[21:28:56] <mwu> oh ok, cool
[21:29:12] <Manishearth> RefCell isn't so heavy
[21:29:13] <mwu> cuz I was trying to find a different theoretical scenario to answer my question
[21:29:16] <Manishearth> ah
[21:29:47] <mwu> I'm just trying to figure out if we care if a js callback decides to modify a cell that we borrow
[21:29:54] <Manishearth> um
[21:30:05] <Manishearth> mwu: borrow using .borrow()?
[21:30:06] <Manishearth> yyes
[21:30:07] <Manishearth> yes
[21:30:09] <Manishearth> much yes
[21:30:10] <Manishearth> we care
[21:30:38] <Manishearth> this is third time I'm saying this today, but LLVM assumes stuff about &T and &mut T
[21:30:40] <mwu> yes, but the question is if we *actually* care. if we just started copying strings all the time, would it actually matter
[21:30:47] <Manishearth> no no
[21:30:50] <Manishearth> you would cause UB
[21:31:07] <Manishearth> fiddling with the T behind &T is undefined behavior
[21:31:23] <Manishearth> and reading the T behind &mut T is too
[21:31:27] <mwu> hmm ok
[21:31:33] <Manishearth> unsafe will let you do it
[21:31:34] <mwu> I think this gives me enough info
[21:31:37] <Manishearth> but it will not make it safe
[21:31:55] <Manishearth> if you want raw pointers, there should be raw pointers *everywhere*
[21:32:04] * zmike_ has raw pointers everywhere
[21:32:18] <Manishearth> a mix of rust and raw pointers unless carefully handcrafted by pcwalton or Niko is a recipe for UB
[21:32:27] <Manishearth> zmike_++
[21:32:44] * zmike_ also has rust and raw pointers mixed
[21:32:50] * Manishearth bonks zmike_ 
[21:32:57] * zmike_ embeds harder
[21:33:11] <Manishearth> mixing is fine, but only one type should be alive at a time
[21:33:36] <Manishearth> where "alive" can be loosened to exclude cases where the ptrs are alive, but not being used
[21:34:00] * Manishearth wonders how people manage to program in C++ and not  UB all the things
[21:34:42] <mwu> I'm mostly looking at how things look at a higher level from the DOM POV
[21:34:47] *** Quits: kmicu (kmicu@moz-uga.edn.218.91.IP) (Client exited)
[21:35:25] <Manishearth> ah
[21:35:26] <mwu> and it sounds like strings are refcell'd to make things behave properly and not to make the dom behave in a particular way
[21:35:33] <Manishearth> yes
[21:35:39] <mwu> perfect
[21:35:48] <Manishearth> mwu: read the blog post about refcells, we use them for their purpose
[21:35:58] <Manishearth> and not for some arcane servo purpose
[21:36:23] *** Quits: OilleYao (uid32548@moz-cf17m5.charlton.irccloud.com) (Quit: Connection closed for inactivity)
[21:36:30] <mwu> I read it, but that wouldn't give me this answer
[21:36:43] <Manishearth> ah
[21:36:46] <Manishearth> yeah
[21:38:44] *** Quits: nefzaoui (nefzaoui@moz-f8f.t6o.104.154.IP) (Ping timeout: 121 seconds)
[21:47:56] *** Quits: larsberg (Adium@moz-kmvlue.cable.rcn.com) (Quit: Leaving.)
[21:48:15] <Manishearth> edunham: oh, https://github.com/servo/saltfs/issues/32#issuecomment-106943622 reminded me
[21:48:15] <crowbot1> Issue #32: Need automation for prebuilding Rust compiler - https://github.com/servo/saltfs/issues/32
[21:48:30] <Manishearth> Rust has a bunch of automation it doesn't do at all
[21:48:32] <Manishearth> notably:
[21:48:45] <Manishearth>  - cross compiling osx -> android
[21:49:01] <Manishearth>  - doing a 32bit build on a 32bit machine (not too important)
[21:49:06] *** Joins: ghservo (ghservo@moz-ij9.5u0.30.192.IP)
[21:49:06] -ghservo- [13servo] 15asbaker opened pull request #6218: Update dependencies for js, fontconfig-sys and mozjs_sys (06master...06update-dependencies-for-6088) 02http://git.io/vkuol
[21:49:06] *** Parts: ghservo (ghservo@moz-ij9.5u0.30.192.IP) ()
[21:49:07] <Manishearth>  - hopefully some valgrind
[21:49:18] <edunham> Manishearth: in that first sentence, "it" == servo?
[21:49:20] <Manishearth> I was planning on working on this at some point, but I didn't get the time
[21:49:24] <Manishearth> edunham: no, Rust
[21:49:29] <edunham> oh, ok
[21:49:49] <Manishearth> edunham: We should have builders for those, even if they don't run per-push
[21:49:55] * edunham re-parses it into "there's a bunch of places where Rust should have automation but doesn't"
[21:49:59] <Manishearth> yeah
[21:50:15] <Manishearth> Though I guess brson already mentioned this to you
[21:50:44] <Manishearth> (osx -> android breaks a lot. and we eventually need to track perf stuff for rust, rustc is slow)
[21:51:56] *** Quits: ahal (ahal@moz-b8e0a0.cpe.pppoe.ca) (A TLS packet with unexpected length was received.)
[21:53:29] *** Joins: nefzaoui (nefzaoui@moz-89s.8io.108.154.IP)
[21:54:08] *** Quits: dstrbad (dstrbad@moz-teorbf.dsl.iskon.hr) (A TLS packet with unexpected length was received.)
[21:56:04] <zmike_> who should I cc on a PR for script stuff
[21:56:09] <Manishearth> zmike_: me
[21:56:12] <zmike_> k
[21:56:13] <Manishearth> or jdm
[21:56:17] *** Joins: dinfuehr (dinfuehr@moz-4fk061.highway.telekom.at)
[21:57:12] *** Joins: ghservo (ghservo@moz-abh.5u0.30.192.IP)
[21:57:12] -ghservo- [13servo] 15zmike opened pull request #6219: Favicon support: way more work than anyone expected or considered (06master...06favicons_and_stringlOWWW-MY-HEAD) 02http://git.io/vkuiL
[21:57:12] *** Parts: ghservo (ghservo@moz-abh.5u0.30.192.IP) ()
[21:57:33] <zmike_> I was told not to bother jdm because he has important smup business that he needs to focus on
[21:58:02] <Manishearth> yes
[21:58:22] <zmike_> ugh I need a shower now
[21:58:54] *** Quits: nefzaoui (nefzaoui@moz-89s.8io.108.154.IP) (Ping timeout: 121 seconds)
[21:59:02] <pcwalton> swapon"
[21:59:12] <pcwalton> "swapon" execution is racing the OOM killer about to kill rustc
[21:59:15] <pcwalton> which will win
[21:59:25] <pcwalton> yesss, swapon won
[22:01:12] *** Quits: eibwen (eibwen@moz-4fjp9d.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[22:01:52] *** Joins: playjax (chatzilla@moz-rmccb0.optusnet.com.au)
[22:09:43] <zmike_> is there a msg somewhere for when the <head> tag has been parsed?
[22:10:31] *** Quits: Boddlnagg (Patrick@moz-qc3ib5.dyn.telefonica.de) (Quit: Leaving.)
[22:10:49] <pcwalton> as of the "reflow 200 milliseconds" commit the parser knows when the body has started to be parsed
[22:11:11] <zmike_> hm that would be good enough
[22:11:21] <zmike_> did it get sent to constellation/compositor anywhere?
[22:11:44] *** Joins: nefzaoui (nefzaoui@moz-7ja.0ff.108.154.IP)
[22:12:33] <pcwalton> no, it's only internal
[22:12:34] <zmike_> I guess htmlbodyelement.rs::bind_to_tree
[22:12:38] <zmike_> would be the easiest place
[22:12:40] <pcwalton> wouldn't be too hard to send it out
[22:12:53] <zmike_> indeed
[22:12:59] <zmike_> assuming that's a good place?
[22:13:04] *** Quits: vodik (simon@moz-86ind4.dedicated.allstream.net) (Connection closed)
[22:13:31] <zmike_> that's what you added in the 200ms reflow commit
[22:13:51] <pcwalton> yeah, that'll work
[22:13:54] <zmike_> cool
[22:14:16] <zmike_> Manishearth: hold off on that review, gonna put up another commit to speed up favicons...
[22:19:18] <Manishearth> got rustfmt working, without hacks!
[22:21:05] <pcwalton> for servo?
[22:21:24] *** Joins: Savago (Savago@moz-28o.4t3.247.50.IP)
[22:25:14] <Manishearth> yes
[22:25:22] <Manishearth> you can jsut run it on a file
[22:25:39] <Manishearth> there's a lot it can't fix though
[22:29:12] *** Quits: fkaa (tundmatu@moz-501od2.business.telia.com) (Ping timeout: 121 seconds)
[22:29:46] *** Joins: fkaa (tundmatu@moz-n4as1f.cust.tele2.se)
[22:31:37] *** Quits: nefzaoui (nefzaoui@moz-7ja.0ff.108.154.IP) (Ping timeout: 121 seconds)
[22:32:10] <zmike_> Manishearth: ok, commits pushed
[22:32:21] <zmike_> I think servo officially gets favicons to apps faster than chromium now
[22:32:29] <zmike_> so...yay for that
[22:33:12] <Manishearth> :D
[22:33:22] <Manishearth> well, chromium and co cache them
[22:33:25] *** Quits: Ms2ger (Ms2ger@moz-15i.9ho.190.193.IP) (Ping timeout: 121 seconds)
[22:33:47] <zmike_> you mean the app I assume
[22:33:53] <zmike_> not the engine
[22:34:55] <Manishearth> ah
[22:35:06] <fabrice> zmike_: gecko gets the url of the favicons as soon as they show up in meta or link@rel tags
[22:35:24] <zmike_> fabrice: that's what servo does now
[22:35:46] <zmike_> chromium seems to send it to the app after the page has finished loading
[22:35:49] <zmike_> or nearabouts
[22:38:30] <fabrice> really? color me surprised
[22:39:07] <zmike_> this is CEF, the embedding api
[22:39:39] <zmike_> but it seems to just send it whenever it gets a message from blink
[22:40:10] *** Quits: dinfuehr (dinfuehr@moz-4fk061.highway.telekom.at) (Connection closed)
[22:41:15] <mwu> zmike_: oh, have you seen the bindgen++ work I've done?
[22:42:24] <zmike_> mwu: I'm afraid to ask
[22:42:47] <mwu> wait are you working on the cef embeddings
[22:42:53] * mwu getting confused
[22:43:02] <zmike_> yes
[22:43:06] <mwu> ok
[22:43:14] <mwu> hastebin.com/irikikuvab
[22:43:49] <mwu> it's a bindgen fork normally used for binding to C code
[22:44:03] <mwu> but now it supports some C++
[22:44:05] <zmike_> ah
[22:44:21] *** Quits: crowbot1 (nodebot@moz-con2he.compute-1.amazonaws.com) (A TLS packet with unexpected length was received.)
[22:44:23] <zmike_> we're using the cef bindings generator with some rust stuff that pcwalton hacked together
[22:44:24] *** Joins: crowbot (nodebot@moz-qce80t.compute-1.amazonaws.com)
[22:45:05] <mwu> I added vtable support, so I was playing around the idea of directly generating objects that inherit from C++ interfaces
[22:45:07] <zmike_> but we do still have a few types that aren't autogenerated
[22:45:13] *** Quits: jga (jga@moz-e4s.t1q.244.77.IP) (Ping timeout: 121 seconds)
[22:45:19] <zmike_> oh
[22:45:23] <zmike_> we're also using the C api
[22:45:24] <zmike_> not C++
[22:45:30] <mwu> ahh
[22:45:56] <zmike_> the C++ should work anyway since it calls the C functions internally
[22:46:29] <mwu> got it
[22:52:47] <abinader> calling it a night, cya folks :)
[23:06:44] *** Quits: Nekit1234007 (nekit@moz-0a7.a78.189.91.IP) (Quit: leaving)
[23:07:29] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Connection closed)
[23:07:48] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[23:09:37] *** Joins: wilfredh (uid159@moz-md9so9.brockwell.irccloud.com)
[23:17:16] *** Quits: playjax (chatzilla@moz-rmccb0.optusnet.com.au) (Connection closed)
[23:17:56] *** Quits: gandalf (zbraniecki@moz-cp7c4m.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[23:19:13] *** Quits: froglegstew (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[23:25:34] *** Quits: mwu (mwu@moz-ou3dbv.oi2i.p882.0085.2601.IP) (Quit: Leaving)
[23:31:53] *** Quits: mccr8 (mccr8@moz-cfhap5.mtv2.mozilla.com) (Quit: quit)
[23:41:19] *** Joins: rohinpatel (rohinpatel@moz-a7vbbc.wireless.ubc.ca)
[23:42:29] *** Joins: playjax (chatzilla@moz-rmccb0.optusnet.com.au)
[23:46:01] *** Quits: Savago (Savago@moz-28o.4t3.247.50.IP) (Client exited)
[23:50:36] *** Joins: dinfuehr (dinfuehr@moz-4fk061.highway.telekom.at)
[23:53:04] *** Joins: ghservo (ghservo@moz-abh.5u0.30.192.IP)
[23:53:04] -ghservo- [13servo] 15metajack opened pull request #6220: Switch task_info to use modern Cargo tools. (06master...06task-info-build-cleanup) 02http://git.io/vkzIn
[23:53:04] *** Parts: ghservo (ghservo@moz-abh.5u0.30.192.IP) ()
[23:54:42] *** Quits: dinfuehr (dinfuehr@moz-4fk061.highway.telekom.at) (Ping timeout: 121 seconds)
[23:55:27] *** Joins: bletchfsc (Mibbit@moz-juv.9o3.252.72.IP)
[23:57:29] *** Quits: bletchfsc (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[23:59:39] *** Joins: nattokirai (nattokirai@moz-rq9a8e.asahi-net.or.jp)
