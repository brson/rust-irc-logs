[00:00:56] <pcwalton> I think there's no point in bisecting
[00:00:57] <pcwalton> too many things
[00:01:05] <pcwalton> I think the moment it got fixed in korea it busted again
[00:01:22] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[00:03:48] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Quit: yichoi)
[00:05:56] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[00:07:52] *** Joins: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com)
[00:08:45] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[00:12:47] *** Quits: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com) (Quit: Leaving)
[00:13:37] *** Joins: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com)
[00:15:58] *** Quits: TimAbraldes (quassel@125EF623.B2666F0E.66399531.IP) (Input/output error)
[00:16:29] <larsberg> pcwalton: is it also possible that something changed wikipedia-side that we don't handle? There are commits like 238741f64 that mention specific wikipedia pages that do not load if I checkout at that commit
[00:16:53] <larsberg> (I'm still strongly in favor of bringing reftests back online quickly and improving our test coverage dramatically)
[00:18:03] <larsberg> like, the donation banner might be killing us
[00:20:49] *** Quits: jet (jet@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: jet)
[00:21:16] *** Joins: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP)
[00:21:16] <ghservo> [13servo] 15jdm closed issue #279: Make calls from JS to Rust without a virtual call 02http://git.io/hhQ9uA
[00:21:16] *** Parts: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP) ()
[00:23:58] <yichoi> +1 with larsberg. I cannot fully trust every new patches will not break existing features yet
[00:27:19] *** Joins: vky (chatzilla@moz-4F2E17BF.dsl.dynamic.sonic.net)
[00:27:20] <pcwalton> looks like nothing but the root flow is being laid out
[00:27:22] <pcwalton> iiiiinteresting
[00:29:55] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[00:30:01] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[00:31:54] *** Joins: TimAbraldes (quassel@125EF623.B2666F0E.66399531.IP)
[00:32:43] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[00:35:37] *** Quits: CaseyBecking (CaseyBecki@ED8170C4.82E507D6.C334098E.IP) (Ping timeout)
[00:35:58] *** Quits: bholley (bholley@moz-A2189431.hsd1.ca.comcast.net) (Ping timeout)
[00:40:19] <pcwalton> the problem is the "height" property.
[00:40:22] <pcwalton> makes the height 6px
[00:40:23] <pcwalton> inspecting
[00:41:04] *** Joins: jet (jet@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[00:42:10] *** Quits: TimAbraldes (quassel@125EF623.B2666F0E.66399531.IP) (Input/output error)
[00:44:07] <pcwalton> I think it's the "height: 100%" :)
[00:45:43] <yichoi> ah height. I've seen it before
[00:46:00] <pcwalton> yeah, it thinks the containing block's height is 0 for the root
[00:46:09] <pcwalton> so it sets height to 0
[00:46:13] <pcwalton> 100% of 0 == 0
[00:46:16] <pcwalton> uhm.
[00:48:38] <larsberg> yeah, that seems bogus
[00:48:48] <larsberg> I thought the root element was supposed to be the size of the viewport
[00:48:49] <larsberg> http://www.w3.org/TR/CSS2/visudet.html#containing-block-details
[00:49:20] <pcwalton> yup
[00:50:23] <pcwalton> now I suspect fixing this will yield *another* bug, in which you can't scroll the overflow of the root area
[00:50:29] <pcwalton> but this will make wikipedia readable again anyway
[00:51:16] *** Joins: crowbot (nodebot@moz-AC9499B2.cable.teksavvy.com)
[00:51:52] <pcwalton> fixed!
[00:51:56] <pcwalton> making a PR and a reftest.
[00:52:03] *** Quits: crowbot (nodebot@moz-AC9499B2.cable.teksavvy.com) (Input/output error)
[00:52:05] <larsberg> great work!
[00:52:19] *** jdm|away is now known as jdm
[00:57:32] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[01:00:31] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[01:04:03] <jack> pcwalton: are you saying it was a wikipedia css change that broke it? :)
[01:04:10] <pcwalton> jack: I'm not sure
[01:04:27] <pcwalton> I think it was the servo commit which added support for css "height"
[01:04:51] <pcwalton> btw, what do people think about having space for 0 or 1 Boxes inline for InlineFlow?
[01:05:09] *** Joins: mib_hc3sve (Mibbit@B4104EBB.3CC170B1.1E14B209.IP)
[01:05:37] <jack> What for?
[01:05:52] <jack> Do most inline flows only have 1 box?
[01:06:32] <mib_hc3sve> pcwalton : ping
[01:06:41] *** mib_hc3sve is now known as patrickkim
[01:07:30] *** Joins: CaseyBecking (CaseyBecki@moz-29F30CC3.lsanca.fios.verizon.net)
[01:08:10] *** Quits: harth (heather@moz-C07D5168.p2p.sfo1.mozilla.com) (Client exited)
[01:09:12] <pcwalton> patrickkim: pong
[01:09:19] <pcwalton> jack: yup, 70% on wikipedia and 90% on google
[01:09:22] <pcwalton> pretty graph forthcoming :)
[01:09:35] <jack> interesting.
[01:09:44] <jack> i would have thought it would be soem N but that N is larger than 1 :)
[01:10:01] <pcwalton> me too, I was surprised
[01:10:05] <jack> what's the performance boost to having it inline? just saving the allocation?
[01:10:11] <pcwalton> yup, saves the allocation.
[01:10:21] <pcwalton> this should result in much fewer allocations than Blink
[01:10:58] <patrickkim> yesterday, we talk about arc<fontcontexthandle>
[01:11:03] <pcwalton> right
[01:11:09] <patrickkim> free type is not thread safe.
[01:11:16] <pcwalton> so FreeType is not thread safe, we will need to use MutexArc<FontContextHandle>
[01:11:25] *** Quits: ibnc (ibnc@moz-718F3037.client.mchsi.com) (Client exited)
[01:11:43] <patrickkim> now, fontcontext has rcmut<font>
[01:11:52] *** Joins: harth (heather@moz-C07D5168.p2p.sfo1.mozilla.com)
[01:11:55] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[01:12:23] <patrickkim> when fontcontext create, fontcontext handle is makes too
[01:12:38] <patrickkim> now, fontcontext thread safe on servo
[01:12:56] <patrickkim> but arc is confusing and slow
[01:13:23] <patrickkim> how thank about?
[01:13:26] *** Quits: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com) (Client exited)
[01:13:28] <pcwalton> it is likely that we will need a separate FontContext per thread
[01:13:29] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Ping timeout)
[01:13:33] <pcwalton> for parallel layout
[01:13:35] <patrickkim> yes.
[01:13:40] <pcwalton> because there is likely to be contention on the MutexArc
[01:13:44] <patrickkim> we tested your branch
[01:13:57] <patrickkim> wip branch to parr layout
[01:13:58] <pcwalton> so I think that perhaps we should clone the FontContext into each thread.
[01:14:52] <patrickkim> fontcontext with mutexarc makes 20~30% slow down(rendering,flowconstruct,displaylistbuild..so on)
[01:15:21] <pcwalton> hmmm, that seems surprising because the mutex is likely to be uncontended for now, but I believe you
[01:15:38] <pcwalton> so perhaps we should just make the FontContext cloneable
[01:15:42] <pcwalton> and clone it into each thread
[01:15:56] <patrickkim> hum..
[01:16:00] <pcwalton> perhaps we should do this
[01:16:05] <pcwalton> separate out the LayoutContext into two parts
[01:16:10] <jack> or just create the LayoutContext in the worker threads?
[01:16:12] <pcwalton> the sendable shared part and the nonsendable part
[01:16:19] <pcwalton> the nonsendable part will be created in each worker thread.
[01:16:26] <pcwalton> the FontContext is contained within the nonsendable part.
[01:16:29] <pcwalton> the sendable part is Arc'd
[01:16:32] <patrickkim> i agree with jack
[01:17:01] <pcwalton> the screen size and image cache at least are going to have to be communicated into each worker thread
[01:17:17] <patrickkim> yes
[01:18:36] <patrickkim> pcwalton, how about arc<fontcontexthandle> -> rc<fontcontexthandle>
[01:18:38] <pcwalton> so by having two parts of the LayoutContext we can communicate the screen size and image cache into the worker thread while recreating a separate font context in each thread
[01:18:42] <pcwalton> patrickkim: works for me
[01:18:57] <pcwalton> as long as we recreate the font context handle in each thread.
[01:19:26] <pcwalton> https://docs.google.com/spreadsheet/ccc?key=0AmYOd6rv-l1OdFBfa0hLYzlfbklrRUVVY0xPSFJXZ2c&usp=sharing
[01:19:28] <pcwalton> does this week?
[01:19:29] <patrickkim> ok. i recreate pr
[01:19:29] <pcwalton> work?
[01:19:39] <pcwalton> look at Chart1
[01:20:04] *** kimundi is now known as zz_kimundi
[01:21:59] <jack> pcwalton: i'd be curious to benchmark 1 vs. 8
[01:22:01] <jack> or something like that.
[01:22:09] <pcwalton> 8 will get you upwards of 90% I think
[01:22:15] <pcwalton> gotta be careful about memory use though.
[01:22:16] <jack> 85% is 8 on your data there
[01:22:19] <pcwalton> I'm worried about memory usage
[01:22:28] *** Joins: ibnc (ibnc@moz-718F3037.client.mchsi.com)
[01:22:49] <jack> why are there so many inline flows with 0 boxes?
[01:23:07] <jack> what does that even mean? :)
[01:23:24] <pcwalton> empty inline formatting context
[01:23:27] <pcwalton> are those ever meaningful?
[01:23:34] <pcwalton> that'd correspond to like <a></a> or something
[01:23:43] <jack>  but 50% of them are empty
[01:24:06] <jack> that makes me think it's tables or something
[01:24:10] <jack> and we're omitting them
[01:24:19] <pcwalton> is there a doc on how to write reftests?
[01:24:36] <jack> pcwalton: gecko has one which applies. one sec
[01:24:59] <pcwalton> oh wait, I was looking in the wrong dir
[01:25:11] <jack> https://developer.mozilla.org/en-US/docs/Creating_reftest-based_unit_tests
[01:30:55] *** Joins: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP)
[01:30:55] <ghservo> [13servo] 15pcwalton opened pull request #1370: layout: Make "height" relative to the initial containing block for the root. (06master...06height-containing-block) 02http://git.io/qQmsEQ
[01:30:55] *** Parts: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP) ()
[01:30:59] *** Quits: Jayflux (Jason@moz-17160F9B.as13285.net) (Quit: Leaving)
[01:31:01] <pcwalton> jack: r? https://github.com/mozilla/servo/pull/1370
[01:35:01] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[01:35:57] *** Quits: ibnc (ibnc@moz-718F3037.client.mchsi.com) (Quit: )
[01:37:43] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Quit: yichoi)
[01:41:42] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: Lost terminal)
[01:42:01] *** Joins: crowbot (nodebot@moz-F5F7AC36.scl3.mozilla.com)
[01:42:03] <jdm> boom
[01:42:17] <jdm> crowbot: acid2 bug
[01:42:18] <crowbot> jdm: Try working on issue #781 - Implement `z-index` https://github.com/mozilla/servo/issues/781
[01:42:43] <jdm> let's talk about #1367
[01:42:43] <crowbot> Issue #1367: Use &str rather than ~str (aka. DOMString) for parameters - https://github.com/mozilla/servo/issues/1367
[01:42:57] <jdm> crowbot: source
[01:42:57] <crowbot> jdm: https://github.com/jdm/fennecbot
[01:43:08] <jdm> larsberg: ^
[01:43:18] <larsberg> jdm: awesome!
[01:43:20] <jdm> crowbot: easy bug
[01:43:21] <crowbot> jdm: Try working on issue #648 - Move webidl files to dom/webidl https://github.com/mozilla/servo/issues/648
[01:44:59] <larsberg> I think height was regressed in issue #1255
[01:45:00] <crowbot> Issue #1255: Fix compute height using 'height' property - https://github.com/mozilla/servo/pull/1255
[01:45:10] <larsberg> (yay, crowbot!)
[01:45:56] *** Quits: dbaupp (Thunderbir@1D1B1F7A.D5A1DCF.37681C44.IP) (Ping timeout)
[01:46:11] *** Joins: ghservo (ghservo@C8693FCB.6A2AE50.F3114085.IP)
[01:46:11] <ghservo> 01[13servo01] 15bors-servo 04force-pushed 06auto from 14acb6d28 to 144b3defb: 02http://git.io/c8GovQ
[01:46:11] *** Parts: ghservo (ghservo@C8693FCB.6A2AE50.F3114085.IP) ()
[01:46:13] *** Joins: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP)
[01:46:13] <ghservo> 01[13servo01] 15bors-servo pushed 2 new commits to 06auto: 02http://git.io/2QTHZg
[01:46:13] <ghservo> 13servo/06auto 14225ae67 15Patrick Walton: layout: Make "height" relative to the initial containing block for the root....
[01:46:13] <ghservo> 13servo/06auto 14f751f1b 15bors-servo: auto merge of #1370 : pcwalton/servo/height-containing-block, r=metajack...
[01:46:13] *** Parts: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP) ()
[01:46:13] <crowbot> Issue #1370: layout: Make "height" relative to the initial containing block for the root. - https://github.com/mozilla/servo/pull/1370
[01:46:14] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[01:46:14] *** ChanServ sets mode: +o brson
[01:46:56] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[01:47:14] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[01:47:34] <larsberg> jdm: hah! You even implemented the spec thing :-)
[01:47:39] <jdm> :)
[01:47:59] <jdm> hmm, I may want to suppress the issue fetching for messages from ghservo
[01:49:32] <larsberg> yeah, we don't need the bots to start talking to each other, ala Eliza and Zippy...
[01:54:05] *** Quits: jet (jet@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: jet)
[01:58:34] *** Quits: dbaron (dbaron@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Ping timeout)
[01:59:06] <pcwalton> changing ~Box to Box makes flow tree construction 60% faster on the rainbow page.
[02:00:56] *** Joins: dbaupp (Thunderbir@1D1B1F7A.D5A1DCF.37681C44.IP)
[02:01:34] *** Joins: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP)
[02:01:34] <ghservo> [13servo] 15pcwalton opened pull request #1371: layout: Change `~Box` to `Box`. (06master...06flatten-box) 02http://git.io/XirZkA
[02:01:34] *** Parts: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP) ()
[02:01:35] <crowbot> Issue #1371: layout: Change `~Box` to `Box`. - https://github.com/mozilla/servo/pull/1371
[02:01:37] <pcwalton> larsberg: r? https://github.com/mozilla/servo/pull/1371
[02:01:43] <larsberg> that's really good! Servo was already comparable to Gecko/Webkit/Blink in sequential flow tree construction on those pages, wasn't it?
[02:01:48] <pcwalton> welllll
[02:01:50] <pcwalton> it's hard to tell.
[02:01:58] <pcwalton> in Blink it is intertwined with selector matching
[02:02:13] <pcwalton> and in WebKit
[02:02:20] <pcwalton> and they're much faster if you add both of ours
[02:02:22] <pcwalton> so it's hard to say.
[02:02:40] <pcwalton> we allocate way too much in selector matching still.
[02:03:23] *** Quits: crowbot (nodebot@moz-F5F7AC36.scl3.mozilla.com) (Input/output error)
[02:03:35] *** Joins: crowbot (nodebot@moz-F5F7AC36.scl3.mozilla.com)
[02:03:45] <pcwalton> oh yeah, I promised to add a reftest for acid1.
[02:03:49] * pcwalton does so.
[02:16:03] <larsberg> speaking of, only 3 of our 12 reftests currently pass (OSX), and the failures appear legit (though that's before your height change)
[02:19:23] <pcwalton> yikes
[02:19:34] <pcwalton> also our PNGs have reversed colors if they're 8 bit :(
[02:19:37] <pcwalton> not good.
[02:19:42] <pcwalton> I'll submit the PR anyway.
[02:19:45] <jack> why would they be 8bit?
[02:19:56] <jack> i think when you redid hte texture stuff you changed the color format
[02:20:05] <pcwalton> err
[02:20:08] <pcwalton> not 8 bit, I mean RGB
[02:20:10] <jack> so our png code that snarfs pixel data is now getting the wrong colors
[02:20:37] <jack> dhedlund: found that earlier and i confirmed on osx and linux (intel)
[02:20:39] <pcwalton> has the libpng stuff landed yet?
[02:21:04] <jack> the bug is likely in the compositor where it writes out the PNG
[02:21:19] <jack> probably assuming somethign wrong about the pixel format from glReadPixels or whatever that is called
[02:21:44] <pcwalton> larsberg: most of them pass for me, the problem is that a lot of times the renderer crashes
[02:21:52] <pcwalton> when creating a Skia-GL context
[02:21:55] <pcwalton> sigh
[02:22:10] *** Joins: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP)
[02:22:10] <ghservo> 01[13servo01] 15bors-servo 04force-pushed 06auto from 14f751f1b to 144b3defb: 02http://git.io/c8GovQ
[02:22:10] *** Parts: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP) ()
[02:22:13] *** Joins: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP)
[02:22:14] <ghservo> 01[13servo01] 15bors-servo pushed 2 new commits to 06auto: 02http://git.io/zL6yQA
[02:22:14] <ghservo> 13servo/06auto 141ba7143 15Patrick Walton: layout: Change `~Box` to `Box`....
[02:22:14] <ghservo> 13servo/06auto 14279a82b 15bors-servo: auto merge of #1371 : pcwalton/servo/flatten-box, r=larsbergstrom...
[02:22:14] *** Parts: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP) ()
[02:22:26] <pcwalton> jack: oh no, the problem is when *displaying* a PNG from libpng
[02:23:50] <jack> OH!
[02:24:02] <pcwalton> maybe we don't support all the png::ColorType-s yet
[02:24:14] <jack> i guess Ryan and Lars didn't test RGB, only the RGBA that we needed for acid2?
[02:24:18] <pcwalton> yeah
[02:24:27] * pcwalton tries saving in RGBA
[02:25:32] <pcwalton> aw man, I need Gimp to do this.
[02:26:42] <fabrice> pcwalton: or imagemagick?
[02:26:51] * pcwalton can't be bothered to learn the command line invocation
[02:27:09] * jdm just searches google every time
[02:27:55] <larsberg> jack: hrm, we tested a bunch of files ad-hoc that were RGB and RGBA while I was there in Korea, but I'll admit I r+'d the PR after another change or two without re-running on all the different files
[02:28:41] <larsberg> he had generated a bunch of axes in various shapes, IIRC :-)
[02:30:40] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[02:30:43] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Quit: yichoi)
[02:31:48] <larsberg> pcwalton: Skia-GL context crashes... and here I thought that OSX was my safe platform for that stuff <groan>
[02:32:00] <pcwalton> maybe I'll just make it pass -c for ref tests.
[02:32:51] <larsberg> One thing I'm a little worried about is the renderer task and thread safety. I'm a little concerned that we could get switched between pthreads if we call send/recv between when we create and destroy any graphics stuff that is pthread-specific.
[02:33:43] <larsberg> It hasn't come up in my debugging (tracing what pthread the render task is running on), though honestly getting servo to live long enough on the nvidia stack is still a challenge.
[02:34:39] <pcwalton> a task on a single threaded scheduler should always run on that scheduler
[02:34:55] <jdm> yes, that's a change we should make
[02:35:04] <pcwalton> no I mean
[02:35:05] <pcwalton> it always does
[02:35:07] <pcwalton> today
[02:35:26] <pcwalton> so says brson
[02:35:45] <jdm> and I meant that we should spawn the render task on a single threaded scheduler
[02:35:48] <larsberg> I thought only the compositor was only one on a single threaded scheduler.
[02:35:49] <pcwalton> ohh
[02:35:50] <pcwalton> I see
[02:35:51] <pcwalton> right
[02:37:58] *** Joins: ghservo (ghservo@C8693FCB.6A2AE50.F3114085.IP)
[02:37:58] <ghservo> [13servo] 15ksh8281 opened pull request #1372: Remove @ in layout task.font_context & fix linux/FontContextHandle (06master...06remove_@_in_LayoutTask.FontContext2) 02http://git.io/3M7a0Q
[02:37:58] *** Parts: ghservo (ghservo@C8693FCB.6A2AE50.F3114085.IP) ()
[02:38:08] <pcwalton> even RGBA doesn't fix it
[02:38:09] <pcwalton> hmm
[02:38:39] *** Joins: ghservo (ghservo@C8693FCB.6A2AE50.F3114085.IP)
[02:38:39] <ghservo> [13servo] 15larsbergstrom opened issue #1373: Spawn render task on the Single Threaded scheduler 02http://git.io/oga9GA
[02:38:39] *** Parts: ghservo (ghservo@C8693FCB.6A2AE50.F3114085.IP) ()
[02:39:02] <patrickkim> pcwalton : ping
[02:39:08] <pcwalton> patrickkim: reviewing.
[02:39:17] <patrickkim> ok thank you!
[02:40:18] *** Joins: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP)
[02:40:18] <ghservo> [13servo] 15bors-servo closed pull request #1371: layout: Change `~Box` to `Box`. (06master...06flatten-box) 02http://git.io/XirZkA
[02:40:18] *** Parts: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP) ()
[02:40:19] *** Joins: ghservo (ghservo@79968228.6A2AE50.F3114085.IP)
[02:40:19] <ghservo> 01[13servo01] 15bors-servo merged 06auto into 06master: 02http://git.io/zL6yQA
[02:40:19] *** Parts: ghservo (ghservo@79968228.6A2AE50.F3114085.IP) ()
[02:46:39] *** Quits: dbaupp (Thunderbir@1D1B1F7A.D5A1DCF.37681C44.IP) (Quit: dbaupp)
[02:46:44] *** Joins: dbaupp (Thunderbir@1D1B1F7A.D5A1DCF.37681C44.IP)
[02:46:49] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[02:49:09] *** Quits: dbaupp (Thunderbir@1D1B1F7A.D5A1DCF.37681C44.IP) (Quit: dbaupp)
[02:49:12] *** Joins: dbaupp (Thunderbir@1D1B1F7A.D5A1DCF.37681C44.IP)
[02:54:33] *** Joins: canhtak (canhtak@moz-1D882009.wl.t.ulaval.ca)
[02:57:35] *** Quits: harth (heather@moz-C07D5168.p2p.sfo1.mozilla.com) (Client exited)
[02:59:03] <kmc> we also put script on its own OS thread because SpiderMonkey can block and the Rust scheduler has no knowledge of it
[03:00:25] <jack> kmc: wasn't that a workaorund to a schedulre bug though?
[03:00:42] <jack> The other schedulers should have been stealing the layout task
[03:00:45] *** Joins: bholley (bholley@moz-A2189431.hsd1.ca.comcast.net)
[03:01:00] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Quit: pcwalton)
[03:02:44] *** Joins: harth (heather@moz-C07D5168.p2p.sfo1.mozilla.com)
[03:03:02] <jdm> there were many good reasons for putting it on its own thread
[03:03:52] *** Quits: harth (heather@moz-C07D5168.p2p.sfo1.mozilla.com) (Client exited)
[03:04:45] <kmc> it's true that off the top of my head I can't think of a reason why SpiderMonkey would make a blocking system call
[03:04:57] <kmc> even for poorly coded scripts
[03:05:53] *** Quits: zz_kimundi (kimundi@moz-19623CE3.dip0.t-ipconnect.de) (Ping timeout)
[03:10:01] *** Joins: zz_kimundi (kimundi@moz-3DA1FAC3.dip0.t-ipconnect.de)
[03:10:03] *** zz_kimundi is now known as kimundi
[03:12:59] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[03:14:55] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[03:31:13] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[03:34:16] *** Quits: bholley (bholley@moz-A2189431.hsd1.ca.comcast.net) (Quit: bholley)
[03:36:39] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[03:42:43] *** Quits: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca) (Quit: Leaving.)
[04:00:01] *** Joins: dbaron (dbaron@moz-A035068C.dsl.dynamic.sonic.net)
[04:03:16] <patrickkim> larsberg : ping
[04:04:35] <patrickkim> jack : ping
[04:04:54] <jack> pong
[04:05:29] <patrickkim> i sent pr last hour
[04:05:45] <patrickkim> it is got r+ by pcwalton
[04:06:09] <patrickkim> but, it has confilt with master branch, 
[04:06:27] <patrickkim> after rebase, reply is deleted
[04:06:37] <patrickkim> could you review my pr?
[04:06:46] <patrickkim> https://github.com/mozilla/servo/pull/1372
[04:06:59] <jack> did you change anything besides a rebase?
[04:07:28] <patrickkim> no , just confilt resolve.
[04:09:19] <patrickkim> thank you jack
[04:10:11] *** Joins: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP)
[04:10:11] <ghservo> 01[13servo01] 15bors-servo pushed 0 new commits to 06auto: 02http://git.io/IL1yEg
[04:10:11] *** Parts: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP) ()
[04:10:12] *** Joins: ghservo (ghservo@F6EE6DE3.6A2AE50.F3114085.IP)
[04:10:12] <ghservo> 01[13servo01] 15bors-servo pushed 4 new commits to 06auto: 02http://git.io/3IKyjg
[04:10:12] <ghservo> 13servo/06auto 1455771bc 15patrick kim: make font/platform/gfx/font_context safe
[04:10:12] <ghservo> 13servo/06auto 140026eb0 15patrick kim: remove @ in LayoutTask.FontContext
[04:10:12] <ghservo> 13servo/06auto 14ac216be 15patrick kim: makes linux/Arc<FontContextHandle> Rc<FontContextHandle>
[04:10:14] *** Parts: ghservo (ghservo@F6EE6DE3.6A2AE50.F3114085.IP) ()
[04:24:19] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[04:43:27] *** Quits: maxiepoo (mnew@moz-6F50ADE.hsd1.il.comcast.net) (Ping timeout)
[04:46:41] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Quit: yichoi)
[04:47:11] *** Joins: Debloper (debloper@moz-88FF8AE8.redhat.com)
[04:48:16] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[04:48:39] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Quit: yichoi)
[04:50:24] <patrickkim> jack : ping
[04:52:27] <jack> pong
[04:52:43] <patrickkim> i saw my pr got test failed
[04:52:52] <patrickkim> so i tested on my computer,
[04:52:57] <patrickkim> it is works
[04:53:04] <patrickkim> make check-content
[04:53:16] <patrickkim> what is point of problem?
[04:59:21] <jack> one of the content tests timed out
[04:59:27] <jack> i'll retry it.
[04:59:41] <patrickkim> ok thank you jack.
[04:59:47] <patrickkim> my problem is
[05:00:06] <patrickkim> every content test works well in my machine :(
[05:00:31] <jack> I think it must be an intermittent problem. We ran into it in Korea, and jdm and I were trying to figure it out. I guess we didn't succeed yet :)
[05:00:40] <jdm> we did?
[05:00:44] <jdm> I fixed that one; it was legitimate.
[05:00:50] <jack> jdm: oh
[05:00:54] <jack> then perhaps this is something else
[05:01:10] * jdm checks which test timed out
[05:01:14] *** Joins: ghservo (ghservo@79968228.6A2AE50.F3114085.IP)
[05:01:14] <ghservo> 01[13servo01] 15bors-servo pushed 4 new commits to 06auto: 02http://git.io/FbXd7g
[05:01:14] <ghservo> 13servo/06auto 1455771bc 15patrick kim: make font/platform/gfx/font_context safe
[05:01:14] <ghservo> 13servo/06auto 140026eb0 15patrick kim: remove @ in LayoutTask.FontContext
[05:01:14] <ghservo> 13servo/06auto 14ac216be 15patrick kim: makes linux/Arc<FontContextHandle> Rc<FontContextHandle>
[05:01:16] *** Parts: ghservo (ghservo@79968228.6A2AE50.F3114085.IP) ()
[05:01:27] <jack> jdm: buidl log http://servo-buildbot.pub.build.mozilla.org/builders/mac/builds/656/steps/shell/logs/stdio
[05:01:37] <patrickkim> is test machine mac?
[05:01:48] *** Joins: bholley (bholley@moz-A2189431.hsd1.ca.comcast.net)
[05:01:48] <jack> yes
[05:01:57] <jack> we don't run content tests on linux
[05:02:33] <jdm> looks like test_collections.html
[05:02:46] <jdm> sigh
[05:03:02] <patrickkim> ok i will test on mac.
[05:03:11] <patrickkim> my os is ubuntu :(
[05:06:23] <jack> jdm: sigh? is that a common culprit?
[05:06:34] <jdm> no, it's just not a clear candidate for failure
[05:07:09] <jack> we'll no shortly if it's sporadic perhaps
[05:07:13] <jack> s/no/know/
[05:07:15] * jack is tired
[05:07:53] *** Quits: canhtak (canhtak@moz-1D882009.wl.t.ulaval.ca) (Quit: canhtak)
[05:08:28] <jdm> huh, servo -z fails on linux master
[05:08:33] <jdm> task '<unnamed>' failed at 'Need a graphics context to do rendering', /home/jdm/sdb/servo/src/compiler/rust/src/libstd/option.rs:317
[05:08:57] <jdm> I blame kmc
[05:10:20] <patrickkim> oh.. it is intermittent problem
[05:11:12] <patrickkim> test runs well on my mac..
[05:11:46] *** Joins: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP)
[05:11:46] <ghservo> [13servo] 15jdm opened issue #1374: -z is broken on Linux 02http://git.io/rGjA1Q
[05:11:46] *** Parts: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP) ()
[05:11:57] <jack> patrickkim: it's also possible it fails in 10.6 but not elsewhere
[05:12:00] <jack> or 10.7 i guess
[05:12:07] <jack> the mac builders are running lion
[05:13:33] <patrickkim> oh.. my mac is 10.9
[05:14:04] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[05:14:23] *** Joins: pradeep (pradeep@5AB4884B.FCC4549.14D5B978.IP)
[05:15:56] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[05:17:22] <jack> appears it passed the second time, so intermittant it is.
[05:19:10] *** Joins: ghservo (ghservo@79968228.6A2AE50.F3114085.IP)
[05:19:10] <ghservo> 01[13servo01] 15bors-servo merged 06auto into 06master: 02http://git.io/FbXd7g
[05:19:10] *** Parts: ghservo (ghservo@79968228.6A2AE50.F3114085.IP) ()
[05:19:11] *** Joins: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP)
[05:19:11] <ghservo> [13servo] 15bors-servo closed pull request #1372: Remove @ in layout task.font_context & fix linux/FontContextHandle (06master...06remove_@_in_LayoutTask.FontContext2) 02http://git.io/3M7a0Q
[05:19:11] *** Parts: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP) ()
[05:20:56] *** Quits: bholley (bholley@moz-A2189431.hsd1.ca.comcast.net) (Ping timeout)
[05:23:22] *** Joins: ghservo (ghservo@F6EE6DE3.6A2AE50.F3114085.IP)
[05:23:22] <ghservo> [13servo] 15jdm opened issue #1375: Redirect stderr to stdout in content test harness 02http://git.io/LvzW3w
[05:23:22] *** Parts: ghservo (ghservo@F6EE6DE3.6A2AE50.F3114085.IP) ()
[05:30:07] *** Quits: CaseyBecking (CaseyBecki@moz-29F30CC3.lsanca.fios.verizon.net) (Quit: Leaving...)
[05:31:18] *** Joins: bholley (bholley@moz-A2189431.hsd1.ca.comcast.net)
[05:42:02] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[05:46:28] <pradeep> jdm: ping
[05:51:35] *** Quits: dbaupp (Thunderbir@1D1B1F7A.D5A1DCF.37681C44.IP) (Ping timeout)
[05:55:27] *** Joins: sankha93 (Instantbir@D5222D53.35354309.EFB84E89.IP)
[05:57:06] *** Quits: sankha93 (Instantbir@D5222D53.35354309.EFB84E89.IP) (Ping timeout)
[05:59:00] *** Joins: june0cho_ (june0.cho@5AB4884B.FCC4549.14D5B978.IP)
[06:27:54] <jdm> pradeep: pong!
[06:28:43] <eddyb> morning :)
[06:29:10] <eddyb> cmr: did anything happen while I was gone?
[06:30:32] *** Quits: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net) (Quit: Hibernating, be back soon.)
[06:32:40] <eddyb> jdm: would it be possible to slow down loading a PNG file from the local fs / network to something like 50 bytes per second, in servo?
[06:34:39] <eddyb> the way I have it right now, alpha is always 0 before the pixel is fully loaded
[06:37:14] *** Quits: bholley (bholley@moz-A2189431.hsd1.ca.comcast.net) (Quit: bholley)
[06:38:23] <eddyb> I think there has to be an interface for interlacing information, since otherwise it would look like tiny pixels in a sea of transparency
[06:38:56] <pradeep> jdm: regarding #1319, I get the error even if I manipulate the DocumentFragment after a delay of 5s
[06:38:57] <crowbot> Issue #1319: Fix race in parallel selector matching - https://github.com/mozilla/servo/issues/1319
[06:39:12] <eddyb> hah, when did that bot get in here?
[06:39:51] <pradeep> eddyb: I guess it comes in when we use the # numbering for github issues :)
[06:40:41] <eddyb> pradeep: I remember someone asking for it yesterday (or was it two days ago?)
[06:42:53] <jdm> eddyb: add a sleep in http://mxr.mozilla.org/servo/source/src/components/net/file_loader.rs#17 ?
[06:42:53] <crowbot> Issue #17: Fix borrowck errors and erros in layout positioning - https://github.com/mozilla/servo/pull/17
[06:43:12] <jdm> grr
[06:43:32] <eddyb> haha
[06:43:40] <jdm> pradeep: are you using master?
[06:43:43] <pradeep> jdm: so is this also explained by your idea that "initial resize event is racing with the initial document modification events"
[06:43:45] <jdm> theoretically we fixed the problem
[06:43:48] <cmr> whoa, servo is on mxr?
[06:43:59] <jdm> cmr: yes, but no submodules unfortunately
[06:44:14] <pradeep> jdm: oh... I'll pull the latest commits and test
[06:45:11] <eddyb> jdm: eh, this has highlighting https://github.com/mozilla/servo/blob/master/src/components/net/file_loader.rs#L17
[06:45:20] <jdm> eddyb: yes, but it's a pain to search
[06:45:42] <jdm> I have a firefox alias that lets me type "sxrf file_" to find that file
[06:46:31] <eddyb> jdm: but thanks - that looks like very good code, btw. I just have to find where it stops being chunked now
[06:47:39] <jdm> eddyb: similarly http://mxr.mozilla.org/servo/source/src/components/net/http_loader.rs#70 , which currently sends the whole http response at once
[06:47:39] <crowbot> Issue #70: Add a clean target for spidermonkey - https://github.com/mozilla/servo/issues/70
[06:47:57] <jdm> crowbot: ssh
[06:48:59] <eddyb> IMO the current rust-png/stb-image choice is a hack. I guess I can just keep loading it to a buffer and once a predictor function -> enum {NotPng,MaybePng,ForSurePng} returns ForSurePng, replace the buffer with a PNG Decoder
[06:49:03] <jack> jdm: why sxrf? servo cross-ref?
[06:49:28] <jdm> jack: because I have mxr and mxrf burned into my muscle memory for mozilla-central
[06:49:31] <jack> that is a little brutal on the left hand for typing
[06:49:42] <jdm> sxrf is servo mxr file search
[06:49:48] <jdm> rxrf is rust mxr file search
[06:49:59] <pradeep> jack: not if you use Dvorak :P
[06:50:00] <jdm> and yeah, it's not the most convenient choice
[06:50:04] <jack> I think you should add these to our tools page. I need to go add them. They sound awesome.
[06:50:31] * jdm does that
[06:50:48] <jdm> not sure which page to add it to
[06:51:02] <jack> make one :) pradeep's emacs stuff should be there too :)
[06:51:06] <jack> and kmc's debugging script, etc
[06:51:23] <jdm> that's on the debugging page
[06:56:11] <jdm> pradeep: https://github.com/mozilla/servo/wiki/Tools - feel free to add your emacs stuff
[06:56:43] <pradeep> nice!
[06:57:47] <pradeep> jdm: The mini HTML file seems to work. But the original Yellow River page gives "task '<unnamed>' failed at 'index out of bounds: the len is 1 but the index is 1', /home/spradeep/Code/servo/src/components/main/layout/text.rs:91
[06:58:00] <eddyb> jdm: gaaah the image cache is so contrived. but I found the code responsible for concatenating the received file chunks: https://github.com/mozilla/servo/blob/master/src/components/net/image_cache_task.rs#L443-L463
[06:58:17] <jdm> eddyb: hee hee, yres
[06:58:29] <jdm> pradeep: backtrace!
[06:59:55] <eddyb> and it's neat because it already has multiple loading states, I can add DecodingPng in there and handle the case where Option<~png::Decoder> becomes None by switching to a fully decoded state
[07:00:04] <eddyb> the only problem I see left is partial rendering
[07:00:20] *** Quits: miketaylr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net) (Quit: Leaving...)
[07:00:50] <eddyb> which means I have to find *another* data flow in that file
[07:02:22] <jdm> oh man, I should really port https://developer.mozilla.org/en-US/docs/Mozilla/WebIDL_bindings to the servo wiki
[07:02:32] <eddyb> jdm: does it make sense to have proper error messages bubble up through the net component?
[07:02:34] <jdm> that would probably clear up a lot of confusion for people working on DOM interfaces
[07:02:51] <eddyb> like, the safe Err(~str) kind of errors
[07:03:05] <jdm> eddyb: I... doubt it.
[07:03:30] <jdm> it's not the kind of thing that needs exposing, typically
[07:03:46] <pradeep> jdm: I've updated the issue
[07:03:52] <eddyb> jdm: chrome://net-internals has a lot of goodies, is there any interface like that already in servo or planned?
[07:04:35] <eddyb> I can just debug! the Err at the point where it's transformed into an opaque error
[07:04:38] <jdm> eddyb: no interface like that, and we haven't done any planning like that yet
[07:04:54] <jdm> right, firefox has the notion of NSPR logging which is used like RUST_LOG
[07:05:14] <jdm> debug! is fine right now
[07:07:17] <jdm> pradeep: feel like minizing it again? :)
[07:07:59] <pradeep> jdm: will do that anyway... not familiar with layout code, so it's taking me a while :)
[07:08:07] <eddyb> self.purge_waiters(url, || ImageReady(image.clone()) ); // I assume there is a way to send a status to the waiters without purging them
[07:08:16] <pradeep> going for ryan's bday party now
[07:08:30] *** Joins: ghservo (ghservo@C8693FCB.6A2AE50.F3114085.IP)
[07:08:30] <ghservo> [13servo] 15jdm opened issue #1376: Port WebIDL bindings docs from MDN 02http://git.io/I7LVMA
[07:08:30] *** Parts: ghservo (ghservo@C8693FCB.6A2AE50.F3114085.IP) ()
[07:11:18] *** Joins: dbaupp (Thunderbir@moz-EB2EFE6F.lns20.syd6.internode.on.net)
[07:12:21] *** Joins: victorporof (victorporo@C8C495F5.E3195F0D.9B1E38F4.IP)
[07:14:12] <eddyb> I guess my fancy state thing won't work in servo, I might have to make pixels always an Arc https://github.com/eddyb/rust-png/blob/rust-streaming-decoder/png.rs#L66-L70
[07:15:11] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[07:16:54] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[07:30:41] *** Joins: miketaylr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net)
[07:32:27] *** Quits: miketaylr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net) (Connection reset by peer)
[07:32:28] *** Joins: miketaylrrrr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net)
[07:34:15] *** Joins: miketaylr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net)
[07:34:26] *** Quits: miketaylrrrr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net) (Connection reset by peer)
[07:36:29] *** Quits: miketaylr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net) (Ping timeout)
[07:39:14] *** Joins: alex-abreu (alex@moz-4B4D75AD.rev.sfr.net)
[08:11:18] *** Quits: dbaron (dbaron@moz-A035068C.dsl.dynamic.sonic.net) (Ping timeout)
[08:15:16] *** Quits: k4nar (quassel@moz-F5EFF779.kimsufi.com) (Quit: No Ping reply in 180 seconds.)
[08:15:29] *** Joins: k4nar (quassel@moz-F5EFF779.kimsufi.com)
[08:24:38] *** Joins: dbaron (dbaron@moz-A035068C.dsl.dynamic.sonic.net)
[08:25:32] *** Quits: dbaron (dbaron@moz-A035068C.dsl.dynamic.sonic.net) (Input/output error)
[08:33:06] *** Joins: miketaylr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net)
[08:35:23] *** Quits: miketaylr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net) (Ping timeout)
[09:00:11] *** Joins: wilma (Mibbit@moz-7CD2F96E.informatik.tu-muenchen.de)
[09:10:06] *** Joins: glazou (glazou@D8B9C081.E820043D.D4C04133.IP)
[09:10:51] *** Quits: pradeep (pradeep@5AB4884B.FCC4549.14D5B978.IP) (Connection reset by peer)
[09:10:52] *** Quits: june0cho_ (june0.cho@5AB4884B.FCC4549.14D5B978.IP) (Connection reset by peer)
[09:11:07] *** Joins: pradeep (pradeep@5AB4884B.FCC4549.14D5B978.IP)
[09:11:07] *** Joins: june0cho_ (june0.cho@5AB4884B.FCC4549.14D5B978.IP)
[09:15:55] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[09:17:18] *** Quits: june0cho_ (june0.cho@5AB4884B.FCC4549.14D5B978.IP) (Connection reset by peer)
[09:17:18] *** Quits: pradeep (pradeep@5AB4884B.FCC4549.14D5B978.IP) (Connection reset by peer)
[09:17:28] *** Joins: june0cho (june0.cho@5AB4884B.FCC4549.14D5B978.IP)
[09:17:31] *** Joins: pradeep (pradeep@5AB4884B.FCC4549.14D5B978.IP)
[09:17:47] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[09:25:53] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[09:29:00] *** Joins: jet (jet@moz-79F891EE.hsd1.ca.comcast.net)
[09:29:01] *** Joins: ghservo (ghservo@1E8607E8.6A2AE50.F3114085.IP)
[09:29:02] <ghservo> [13servo] 15SimonSapin closed issue #263: Calculate em units correctly 02http://git.io/582DaQ
[09:29:02] *** Parts: ghservo (ghservo@1E8607E8.6A2AE50.F3114085.IP) ()
[09:33:06] *** Joins: miketaylr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net)
[09:35:19] *** Quits: miketaylr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net) (Ping timeout)
[09:39:46] *** Quits: june0cho (june0.cho@5AB4884B.FCC4549.14D5B978.IP) (Connection reset by peer)
[09:39:47] *** Quits: pradeep (pradeep@5AB4884B.FCC4549.14D5B978.IP) (Connection reset by peer)
[09:40:01] *** Joins: june0cho (june0.cho@5AB4884B.FCC4549.14D5B978.IP)
[09:40:09] *** Joins: pradeep (pradeep@5AB4884B.FCC4549.14D5B978.IP)
[09:42:42] *** Quits: vky (chatzilla@moz-4F2E17BF.dsl.dynamic.sonic.net) (Quit: ChatZilla 0.9.90.1 [Firefox 26.0/20131202182626])
[09:44:45] *** Joins: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP)
[09:44:45] <ghservo> [13servo] 15SimonSapin closed issue #344: "div #styled" doesn't match a div with id="styled" while "#styled" does 02http://git.io/k9DpUg
[09:44:45] *** Parts: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP) ()
[09:47:36] *** Joins: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP)
[09:47:36] <ghservo> [13servo] 15SimonSapin closed issue #516: break script dependency on gfx 02http://git.io/AViecQ
[09:47:36] *** Parts: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP) ()
[09:49:18] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Quit: Lost terminal)
[09:50:46] *** Joins: ghservo (ghservo@F6EE6DE3.6A2AE50.F3114085.IP)
[09:50:46] <ghservo> [13servo] 15SimonSapin closed issue #611: Servo should build libpng 02http://git.io/VYVbyQ
[09:50:46] *** Parts: ghservo (ghservo@F6EE6DE3.6A2AE50.F3114085.IP) ()
[09:58:58] *** Quits: jet (jet@moz-79F891EE.hsd1.ca.comcast.net) (Quit: jet)
[09:59:51] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[10:00:06] *** Quits: deokjinkim (Mibbit@B4104EBB.3CC170B1.1E14B209.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[10:00:15] *** Quits: june0cho (june0.cho@5AB4884B.FCC4549.14D5B978.IP) (Connection reset by peer)
[10:00:17] *** Quits: pradeep (pradeep@5AB4884B.FCC4549.14D5B978.IP) (Connection reset by peer)
[10:00:31] *** Joins: june0cho_ (june0.cho@5AB4884B.FCC4549.14D5B978.IP)
[10:00:47] *** Joins: pradeep (pradeep@5AB4884B.FCC4549.14D5B978.IP)
[10:02:10] *** Joins: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP)
[10:02:10] <ghservo> [13servo] 15SimonSapin closed issue #714: PNG transparancy issue 02http://git.io/sqt4cw
[10:02:10] *** Parts: ghservo (ghservo@9C8B94D4.6A2AE50.F3114085.IP) ()
[10:02:39] *** Quits: pradeep (pradeep@5AB4884B.FCC4549.14D5B978.IP) (Connection reset by peer)
[10:02:40] *** Quits: june0cho_ (june0.cho@5AB4884B.FCC4549.14D5B978.IP) (Connection reset by peer)
[10:04:50] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[10:05:29] *** Joins: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP)
[10:05:29] <ghservo> [13servo] 15SimonSapin closed issue #875: Avoid using DOMString for non-nullable strings 02http://git.io/mQH3BA
[10:05:29] *** Parts: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP) ()
[10:05:32] *** Joins: june0cho_ (june0.cho@5AB4884B.FCC4549.14D5B978.IP)
[10:05:46] *** Joins: pradeep (pradeep@5AB4884B.FCC4549.14D5B978.IP)
[10:10:07] *** Joins: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP)
[10:10:07] <ghservo> [13servo] 15SimonSapin closed issue #925: Split dom out of script crate 02http://git.io/25KtuQ
[10:10:07] *** Parts: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP) ()
[10:11:17] *** Quits: pradeep (pradeep@5AB4884B.FCC4549.14D5B978.IP) (Quit: Lost terminal)
[10:12:49] <glazou> SimonSapin, flooding #servo with commits ?-)
[10:13:05] <SimonSapin> glazou: no, just closing old issues that are now fixed or dupes
[10:13:10] <glazou> :-)
[10:13:40] <SimonSapin> ("now" being sometimes months ago)
[10:14:11] *** Quits: june0cho_ (june0.cho@5AB4884B.FCC4549.14D5B978.IP) (Connection reset by peer)
[10:14:26] *** Joins: june0cho_ (june0.cho@5AB4884B.FCC4549.14D5B978.IP)
[10:21:11] *** Joins: Ms2ger (Ms2ger@moz-2BA54FF.ugent.be)
[10:33:06] *** Joins: miketaylr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net)
[10:34:53] *** Quits: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com) (Ping timeout)
[10:35:24] *** Quits: miketaylr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net) (Ping timeout)
[11:16:41] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[11:18:36] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[11:33:07] *** Joins: miketaylr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net)
[11:35:29] *** Quits: miketaylr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net) (Ping timeout)
[11:39:21] *** Quits: wilma (Mibbit@moz-7CD2F96E.informatik.tu-muenchen.de) (Quit: http://www.mibbit.com ajax IRC Client)
[11:40:37] *** Quits: Ms2ger (Ms2ger@moz-2BA54FF.ugent.be) (Quit: bbl)
[11:47:42] *** Joins: Kostic (marko@moz-58F4E400.mbb.telenor.rs)
[12:05:55] *** kimundi is now known as zz_kimundi
[12:06:02] *** zz_kimundi is now known as kimundi
[12:10:19] *** Joins: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com)
[12:29:58] <eddyb> woo, I'm just 1.5 times slower than libpng :D
[12:30:25] *** Joins: Ms2ger (Ms2ger@moz-B6861E63.ibbt.be)
[12:31:30] <dbaupp> eddyb: are you compiling with `--opt-level=3 -Z lto` squeeze as much performance out of the compiler as possible?
[12:31:42] <eddyb> -Z lto is a thing o_O?
[12:32:35] <cmr> it is no
[12:32:37] <cmr> w
[12:32:43] <cmr> <3 acrichto
[12:32:54] <eddyb> eeeeh
[12:33:00] <eddyb> fatal runtime error: thread-local pointer is null. bogus!
[12:33:06] *** Joins: miketaylr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net)
[12:33:07] <dbaupp> it's *really* slow, unfortunately.
[12:33:29] <eddyb> I am sending the poem to my new friend who loves random novels
[12:35:30] *** Quits: miketaylr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net) (Ping timeout)
[12:35:58] <eddyb> so, uhm, other than the poem, I got nothing with -Z lto
[12:36:34] <eddyb> wait, no, the compiler finishes. the generated code is the problem
[12:36:46] *** Quits: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com) (Ping timeout)
[12:37:02] <eddyb> I probably need stage2 to use lto
[12:38:35] <eddyb> self.image.pixels[i] = byte; // that's 15% of 90%. bound checks
[12:39:22] <eddyb> I could use something unsafe, since that section will never be called with i > pixels.length unless there's a logic error somewhere else
[12:40:21] *** Joins: canhtak (canhtak@moz-1D882009.wl.t.ulaval.ca)
[12:42:05] <eddyb> 15% of 80%, actually. that's not a huge gain if I remove it, and there's no other things marked red in perf
[12:44:24] *** Quits: canhtak (canhtak@moz-1D882009.wl.t.ulaval.ca) (Quit: canhtak)
[12:49:28] <eddyb> dbaupp: vec::raw::init_elem barely makes a dent
[12:50:36] <cmr> eddyb: perf can also give you (real! not sampled) numbers about cache misses and branch mispredicts.
[12:51:12] <eddyb> with vec::raw::init_elem, at least it gives me other places where it's slow
[12:51:39] <eddyb> i += 1; is a stack load, lea to add 1 and a stack store
[12:52:09] *** Joins: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP)
[12:52:09] <ghservo> [13rust-cssparser] 15SimonSapin opened pull request #33: Add parsing from bytes, with rust-encoding. (06master...06master) 02http://git.io/6mcmTg
[12:52:09] *** Parts: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP) ()
[12:52:58] <eddyb> the stack load appears 5.5 times more than the "if i % 4 == 0" below
[12:54:29] <eddyb> heh, there's multiple (specialized) instances of that i += 1 statement
[12:59:52] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[13:00:17] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[13:16:43] *** Joins: canhtak (canhtak@moz-1D882009.wl.t.ulaval.ca)
[13:17:38] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[13:19:11] <eddyb> this is a bad idea
[13:19:26] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[13:19:35] <eddyb> having just one test image can lead to optimizing for the predominant amount of filters used in that image
[13:25:42] <SimonSapin> jack: How can I make a Servo submodule depend on another submodule? I want to add rust-encoding, and make rust-cssparser depend on it.
[13:27:21] <SimonSapin> I have "DEPS_rust-cssparser += rust-encoding" in mk/sub.mk. When I touch a file in rust-encoding and re-run make, a recursive make seems to be run in rust-cssparser, but that one decides it has nothing to do, since it doesnâ€™t know about the dependency
[13:28:02] <SimonSapin> jack: Am I doing something wrong, or is our build system just broken for this kind of case?
[13:35:00] <Ms2ger> "is our build system just broken"
[13:35:01] <Ms2ger> Yes
[13:35:51] <eddyb> cmr: bah, kcachegrind > perf
[13:36:08] <eddyb> it has sorting and stuff
[13:37:08] *** Joins: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com)
[13:40:04] *** bhearsum|afk is now known as bhearsum|buildduty
[13:49:14] *** Quits: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com) (Quit: Leaving)
[13:49:19] *** Joins: ^emi (glenlivet@moz-9FE842F.cpe.net.cable.rogers.com)
[13:55:11] *** kimundi is now known as zz_kimundi
[14:00:25] <larsberg> SimonSapin: Did you add rust-encoding to the list of CFG_SUBMODULES in configure and re-run it?
[14:00:41] <SimonSapin> larsberg: yes
[14:01:09] <larsberg> Though I agree with ms2ger. changes to rust-layers never trigger rust-azure to be rebuilt despite the presence of those dependencies.
[14:01:11] <SimonSapin> Servoâ€™s makefile seems to know about the dependency, but rust-cssparserâ€™s doesnâ€™t
[14:01:25] <larsberg> I've just gotten used to "make clean-rust-azure; make -j8" every time i change rust-layers.
[14:02:42] <SimonSapin> I see
[14:02:48] <SimonSapin> So it is broken
[14:03:15] <SimonSapin> Ok, Iâ€™ll leave it like this, and hopefully switching to CMake will fix all this
[14:04:41] <larsberg> SimonSapin: Yes, In order to fix it right now, I think we'd have to also have a dependency on the .dummy file for rust-encoding in rust-cssparser's Makefile.
[14:04:48] <larsberg> But I assume it's not that easy or it would already be generating that :-)
[14:04:56] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[14:08:43] <larsberg> Yeah, I'd wait for jack's CMake work. I think we could theoretically change the src/support/rust-cssparser/Makefile.in to know about the rust-encoding file, but unless it's generating a .dummy, that will be tricky.
[14:08:51] <larsberg> It should all go away when jack lands that :-)
[14:10:58] *** Quits: Kostic (marko@moz-58F4E400.mbb.telenor.rs) (Ping timeout)
[14:11:06] <SimonSapin> thanks for clarifying
[14:14:01] *** Joins: ahal (ahal@moz-7DE89BF0.cable.teksavvy.com)
[14:17:37] <jack> SimonSapin: just add the dep in Mk/sub.mk
[14:19:15] <jack> Oh you did that.  One sec. Can you post your sub.Mk or a diff?
[14:21:36] <SimonSapin> jack: https://pastebin.mozilla.org/3755289
[14:24:10] *** Joins: victorporof_ (victorporo@C8C495F5.E3195F0D.9B1E38F4.IP)
[14:24:54] *** Quits: victorporof (victorporo@C8C495F5.E3195F0D.9B1E38F4.IP) (Ping timeout)
[14:26:24] *** Quits: victorporof_ (victorporo@C8C495F5.E3195F0D.9B1E38F4.IP) (Ping timeout)
[14:26:53] *** Joins: Kostic (marko@moz-58F4E400.mbb.telenor.rs)
[14:28:04] *** Joins: victorporof (victorporo@C8C495F5.E3195F0D.9B1E38F4.IP)
[14:29:40] <larsberg> jack: It looks like the same problem with rust-azure. When something like rust-layers is rebuilt, make knows to run the Makefile for rust-azure
[14:29:51] *** Joins: victorporof_ (victorporo@C8C495F5.E3195F0D.9B1E38F4.IP)
[14:29:52] <larsberg> But because none of the deps in rust-azure have changed, the build is a no-op
[14:30:08] *** Quits: victorporof (victorporo@C8C495F5.E3195F0D.9B1E38F4.IP) (Ping timeout)
[14:31:12] *** Joins: victorporof (victorporo@C8C495F5.E3195F0D.9B1E38F4.IP)
[14:32:16] *** Quits: victorporof_ (victorporo@C8C495F5.E3195F0D.9B1E38F4.IP) (Ping timeout)
[14:32:38] *** Joins: victorporof_ (victorporo@C8C495F5.E3195F0D.9B1E38F4.IP)
[14:33:27] *** Quits: victorporof (victorporo@C8C495F5.E3195F0D.9B1E38F4.IP) (Ping timeout)
[14:39:11] <jack> larsberg: i think you have the dependencies backwards. rust-azure shouldn't depend on rust-layers :)
[14:40:00] <SimonSapin> jack: yes, swap them, but I see the same issue
[14:41:05] *** Quits: Kostic (marko@moz-58F4E400.mbb.telenor.rs) (Ping timeout)
[14:45:33] <jack> nm, lars was right
[14:45:51] <jack> SimonSapin: rust-cssparser is built by rustpkg, so it should find the dep without needing to name it
[14:46:08] <jack> does rust-cssparser have an "extern mod foo = "rust-encoding"?
[14:46:13] <SimonSapin> jack: is it? Iâ€™m pretty sure Iâ€™m looking at make output
[14:46:33] <jack> Make should be running rustpkg to build rust-cssparser.
[14:46:53] <jack> it's definitely in CFG_SUBMODULES_RUSTPKG
[14:47:44] <SimonSapin> make[1]: Entering directory '/home/simon/builds/servo/x86_64-unknown-linux-gnu/src/support/css/rust-cssparser'
[14:47:49] <SimonSapin> make[1]: Nothing to be done for 'all'.
[14:48:17] <jack> nm
[14:48:18] <SimonSapin> did rustpkg know how to build color_data.rs from Python, before I removed it?
[14:48:19] <jack> sigh.
[14:52:14] <jack> casual digging implies this should work. DEF_SUBMODULE_DEPS defines DONE_DEPS_rust-cssparser for example
[15:00:00] <jack> larsberg: i can confirm the rust-azure thing
[15:00:39] <larsberg> jack: nice :-) I was just going to wait until your cmake changes landed to see if that fixed it
[15:00:54] <larsberg> And I was honestly hoping I wouldn't be playing around in all of those submodules as long as I have been...
[15:05:14] *** Quits: Debloper (debloper@moz-88FF8AE8.redhat.com) (Quit: Leaving.)
[15:05:24] <jack> I wish make had a way to rpint out the expanded makefile
[15:05:58] *** Joins: Kostic (marko@moz-58F4E400.mbb.telenor.rs)
[15:06:21] <jack> i guess i'll have to sort through -pn output
[15:06:53] <cmr> jack: pnkfelix swears by http://bashdb.sourceforge.net/remake/
[15:07:20] <jack> cmr: is that like redo?
[15:07:33] <jack> Oh!
[15:07:36] <cmr> the backup software?
[15:07:47] <jack> that sounds amazing
[15:08:00] <jack> no, redo is a djb's build system
[15:08:03] <cmr> I haven't used it to its full potential but it's helped a lot when wrangling rust's makefiles.
[15:08:20] <jack> he never released it so i thought maybe this was a implementation based on djb's description
[15:18:34] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[15:20:27] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[15:23:01] *** Quits: canhtak (canhtak@moz-1D882009.wl.t.ulaval.ca) (Connection reset by peer)
[15:23:05] *** Joins: canhtak (canhtak@moz-1D882009.wl.t.ulaval.ca)
[15:25:35] <jack> cmr: that found the problem very quickly :)
[15:25:39] <jack> thanks for hte pointer
[15:25:43] <cmr> np
[15:25:57] <jack> larsberg: so the rust-azure target does get triggered to rebuild
[15:26:08] <jack> but there is nothing in the rust-azure makefile that has a dependency on rust-layers
[15:26:22] <jack> so it happily just exits with nothing to do
[15:28:03] <larsberg> Yup, that's what I was noticing as well :-) No worries for now if it's a bunch of work; the rebuild is quick enough until cmake lands
[15:53:11] *** Joins: miketaylr (mtaylor@moz-8ACC7131.dyn.grandenetworks.net)
[15:57:18] *** Quits: fabrice (fabrice@moz-94F028C6.hsd1.ca.comcast.net) (Quit: Leaving.)
[15:57:30] *** Joins: fabrice (fabrice@moz-94F028C6.hsd1.ca.comcast.net)
[15:59:36] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[15:59:59] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[16:00:18] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[16:02:02] *** Quits: fabrice (fabrice@moz-94F028C6.hsd1.ca.comcast.net) (Ping timeout)
[16:04:01] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[16:04:18] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[16:08:00] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[16:08:19] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[16:10:42] *** Joins: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net)
[16:12:29] *** zz_kimundi is now known as kimundi
[16:13:18] <jack> i have to figure out a way to solve this for cmake too :)
[16:14:10] *** Quits: Ms2ger (Ms2ger@moz-B6861E63.ibbt.be) (Quit: bbl)
[16:14:30] *** Joins: ghservo (ghservo@79968228.6A2AE50.F3114085.IP)
[16:14:30] <ghservo> [13servo] 15SimonSapin closed issue #218: Root element background should fill entire canvas 02http://git.io/SGToLA
[16:14:30] *** Parts: ghservo (ghservo@79968228.6A2AE50.F3114085.IP) ()
[16:15:05] *** Quits: glazou (glazou@D8B9C081.E820043D.D4C04133.IP) (Quit: bbl)
[16:21:35] *** Joins: bholley (bholley@moz-A2189431.hsd1.ca.comcast.net)
[16:33:28] <SimonSapin> jack: How do we do review for servo submodules that are maintained by an upstream thatâ€™s not us?
[16:33:44] *** Joins: fabrice (fabrice@moz-7B0110AD.mv.mozilla.com)
[16:33:59] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[16:34:18] <SimonSapin> I have some rust-encodings in pull requests upstream waiting for review, but Iâ€™d like to start using them in Servo now
[16:34:21] <SimonSapin> https://github.com/mozilla-servo/rust-encoding/compare/lifthrasiir:rust-0.9-pre...rust-servo
[16:35:13] *** Joins: jet (jet@moz-79F891EE.hsd1.ca.comcast.net)
[16:40:59] *** Quits: bholley (bholley@moz-A2189431.hsd1.ca.comcast.net) (Quit: bholley)
[16:45:46] *** Joins: bholley (bholley@moz-A2189431.hsd1.ca.comcast.net)
[16:50:39] *** Joins: ibnc (ibnc@moz-718F3037.client.mchsi.com)
[16:57:55] *** ahal is now known as ahal|lunch
[16:59:12] <jack> SimonSapin: in the case of rust-http and glfw-rs we have commit rights upstream
[16:59:16] <jack> or at least someone on the team does
[16:59:37] <jack> so we just open PRs upstream and get them merged after review like the normal process
[17:00:11] *** Joins: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP)
[17:00:11] <ghservo> [13servo] 15SimonSapin opened pull request #1377: Add support for non-UTF8 CSS stylesheets, with rust-encoding. (06master...06encoding) 02http://git.io/8PS_oQ
[17:00:11] *** Parts: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP) ()
[17:00:16] <jack> so far upstream maintainers have been wonderfully responsive, so we haven't run into any issues.
[17:00:56] <jack> we use 'servo' branch to mark our build system changes, and just merge in upstream/master when we want updates.
[17:01:59] *** Joins: TimAbraldes (quassel@125EF623.B2666F0E.66399531.IP)
[17:02:03] <SimonSapin> rust-encoding is maintained by a student who seems to work a few days on it every few weeks
[17:02:56] <SimonSapin> (gross approximations with small sample sizeâ€¦)
[17:03:07] <cmr> same could be said for bjz too though!
[17:09:51] *** Quits: doomlord_ (servitor@moz-D40D68D6.range86-184.btcentralplus.com) (Connection reset by peer)
[17:10:32] <jack> for the new build system, i want the submodules to be buildable standalone, and also with servo. How do we handle dependencies that works for both cases?
[17:11:02] <jack> In some cases, the submodules can live lower down the tree. like glfw-rs needing glfw
[17:11:06] <jack> or rust-auzre needing skia
[17:11:35] <jack> but in some cases, they can't get pushed down. rust-opengles is used by rust-azure, rust-layers and servo
[17:11:36] *** Joins: jackneill (jackneill@moz-91DAEB3F.pool.digikabel.hu)
[17:12:52] <jack> the current system knows it needs to magically reach out of its tree a few levels and then back down a different subtree to find its dependency
[17:13:32] <jack> but that means you can't build submodules without recreating this crazy directory structure
[17:14:46] <fabrice> jack: have you considered using repo instead of submodules. We did the switch in b2g and it's way easier to manage
[17:15:15] <jack> fabrice: do you have a pointer to a readme about that? i can go look at it
[17:15:29] <jack> probably doens't solve this problem, but may solve others. submodule management is currently no fun.
[17:15:43] *** Joins: ghservo (ghservo@79968228.6A2AE50.F3114085.IP)
[17:15:43] <ghservo> [13servo] 15pcwalton closed pull request #1370: layout: Make "height" relative to the initial containing block for the root. (06master...06height-containing-block) 02http://git.io/qQmsEQ
[17:15:43] *** Parts: ghservo (ghservo@79968228.6A2AE50.F3114085.IP) ()
[17:16:14] <SimonSapin> jack: will the standalone builds use cmake as well?
[17:16:22] <fabrice> jack: a readme on repo? I have nothing you can't google...
[17:16:47] <jack> i figured repo was ungooglable. but turns out it's the first result
[17:16:50] <jack> sorry :)
[17:16:50] *** Joins: ghservo (ghservo@1E8607E8.6A2AE50.F3114085.IP)
[17:16:50] <ghservo> [13servo] 15pcwalton closed pull request #1368: Fix #1264: support namespaced attribute selectors. (06master...06master) 02http://git.io/7eITBw
[17:16:50] *** Parts: ghservo (ghservo@1E8607E8.6A2AE50.F3114085.IP) ()
[17:17:34] *** Joins: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP)
[17:17:34] <ghservo> [13servo] 15pcwalton closed pull request #1316: Make the layout context thread-safe (06master...06parallel-layout) 02http://git.io/hfBrUg
[17:17:34] *** Parts: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP) ()
[17:19:29] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[17:21:27] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[17:21:53] *** Joins: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP)
[17:21:53] <ghservo> [13servo] 15pcwalton opened issue #1378: Stop touching the DOM node in boxes after flow tree construction 02http://git.io/OSemMg
[17:21:53] *** Parts: ghservo (ghservo@2EE61FCC.6A2AE50.F3114085.IP) ()
[17:29:17] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[17:32:48] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[17:42:29] <jack> is there a command i can run to find non-ascii bytes in a directory of text files?
[17:42:36] <jack> or flies which have non-ascii bytes?
[17:43:41] <larsberg> The 'file' command will tell you if it's a binary, text file, etc.
[17:43:58] <larsberg> Oh, you mean text files with unicode - sorry :-)
[17:44:49] <larsberg> That said, file will tell you if it's ASCII text or something else
[17:50:49] *** ahal|lunch is now known as ahal
[17:53:39] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[17:53:40] *** ChanServ sets mode: +o jdm
[18:02:08] *** Joins: brendan (brendaneic@777B9EEC.C030CAFC.1EF54B18.IP)
[18:11:16] *** Joins: doomlord_ (servitor@moz-D40D68D6.range86-184.btcentralplus.com)
[18:23:01] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[18:23:01] *** ChanServ sets mode: +o brson
[18:24:44] *** Quits: brendan (brendaneic@777B9EEC.C030CAFC.1EF54B18.IP) (Quit: brendan)
[18:26:55] *** Quits: jet (jet@moz-79F891EE.hsd1.ca.comcast.net) (Quit: jet)
[18:32:52] *** Joins: brendan (brendaneic@777B9EEC.C030CAFC.1EF54B18.IP)
[18:37:00] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[18:39:08] *** Joins: pcwalton (pcwalton@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[18:39:09] *** ChanServ sets mode: +o pcwalton
[18:39:42] <pcwalton> jack: were you working on a rust upgrade? I forget
[18:41:23] <jack> Starting on that today
[18:42:02] <pcwalton> awesome
[18:42:07] <pcwalton> this will clear the way for parallel layout
[18:42:17] <pcwalton> since we'll get a shiny new chase-lev deque
[18:46:12] <jdm> woo
[18:57:49] *** Quits: bholley (bholley@moz-A2189431.hsd1.ca.comcast.net) (Quit: bholley)
[19:07:46] <pcwalton> oh, huh, nsStyleContext is ref counted in Gecko
[19:07:52] <pcwalton> I figured that'd be too expensive but I guess not
[19:07:55] <pcwalton> full speed ahead!
[19:08:50] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[19:08:55] <pcwalton> now it'll have to be atomically ref counted in Servo :( but if it's too expensive we can move to GC or something.
[19:12:29] *** Joins: Ms2ger (Ms2ger@57ACE628.C60A97A6.F9FB0584.IP)
[19:18:18] *** Quits: Kostic (marko@moz-58F4E400.mbb.telenor.rs) (Quit: Kostic)
[19:22:57] *** jdm is now known as jdm|away
[19:27:10] *** Quits: brendan (brendaneic@777B9EEC.C030CAFC.1EF54B18.IP) (Quit: brendan)
[19:27:38] *** Joins: ghservo (ghservo@C8693FCB.6A2AE50.F3114085.IP)
[19:27:38] <ghservo> [13servo] 15pcwalton opened pull request #1379: net: Color space convert 32-bit ARGB PNGs as well. (06master...06png) 02http://git.io/Ik_0Bg
[19:27:38] *** Parts: ghservo (ghservo@C8693FCB.6A2AE50.F3114085.IP) ()
[19:27:44] <pcwalton> larsberg: r? https://github.com/mozilla/servo/pull/1379
[19:28:19] <larsberg> pcwalton: will look at it now
[19:29:06] *** Joins: brendan (brendaneic@777B9EEC.C030CAFC.1EF54B18.IP)
[19:34:22] *** bhearsum|buildduty is now known as bhearsum|bbl
[19:37:37] <kmc> jdm|away: does servo -z always fail for you? it works for me on about-mozilla but i'm not on the very latest master
[19:38:42] <jdm|away> kmc: I was running it on content tests, I'll check
[19:39:03] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[19:39:09] <jdm|away> kmc: yeah, I see no failure for about-mozilla
[19:39:33] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[19:41:14] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[19:43:41] *** Quits: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net) (Quit: Hibernating, be back soon.)
[19:46:57] <eddyb> jdm|away: I made a contraption to align an index to remove some comparisons... and I shaved like 50ms >_>
[19:50:57] *** Joins: ghservo (ghservo@C8693FCB.6A2AE50.F3114085.IP)
[19:50:57] <ghservo> 01[13servo01] 15bors-servo pushed 2 new commits to 06auto: 02http://git.io/89wZtQ
[19:50:57] <ghservo> 13servo/06auto 1485f1af4 15Patrick Walton: net: Color space convert 32-bit ARGB PNGs as well.
[19:50:57] <ghservo> 13servo/06auto 14214c91a 15bors-servo: auto merge of #1379 : pcwalton/servo/png, r=larsbergstrom...
[19:50:57] *** Parts: ghservo (ghservo@C8693FCB.6A2AE50.F3114085.IP) ()
[19:52:02] <kmc> jdm|away: check-content also works for me on Linux
[19:52:07] <kmc> so maybe it's some change since 4b3defb2825289ff47d099c87887ba990aa2bffe
[19:57:46] <jdm|away> kmc: my suspicion is that it doesn't work
[19:57:50] <jdm|away> but we're not printing stderr
[19:57:54] <jdm|away> so we don't see failure messages
[19:58:02] <jdm|away> kmc: run a single test
[20:00:01] *** Quits: six600110 (six600110@moz-C663577C.hsd1.il.comcast.net) (Client exited)
[20:00:14] <eddyb> *** Error in `./png': free(): invalid pointer: 0x00007f3df19cd010 ***
[20:00:37] <eddyb> and now it worked. and it's slower. how I love optimizing these things
[20:01:01] <kmc> and we don't check the return code either? sigh
[20:01:09] <kmc> anyway I see the same error now :/
[20:02:59] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[20:03:12] <kmc> oh it's because we try to use the ctx when the render task shuts down from window.close()
[20:03:17] <kmc> ./servo -z "data:text/html;base64,$(base64 <<<'<script>window.close()</script>')"
[20:03:28] <jdm|away> makes sense
[20:03:32] <kmc> i'll fix that
[20:03:38] <kmc> and also see about checking the exit code in contenttest
[20:03:56] <jdm|away> kmc: want to make it print stderr as well while you're there? :)
[20:04:15] <kmc> sure
[20:06:04] <eddyb> pcwalton: the conversion can be done directly by rust-png, btw
[20:06:24] <eddyb> pcwalton: once I manage to be at least as fast as libpng, of course :P
[20:06:33] *** Joins: bholley (bholley@moz-A2189431.hsd1.ca.comcast.net)
[20:06:35] <eddyb> then you're only decoding once
[20:09:46] <eddyb> pcwalton: why didn't you use mut_chunks + swap?
[20:09:58] <eddyb> it should be slightly faster then
[20:10:44] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:11:54] <eddyb> gotta love it when idiomatic high-level operations are faster than C-like array access and swap
[20:14:55] *** Quits: brendan (brendaneic@777B9EEC.C030CAFC.1EF54B18.IP) (Quit: brendan)
[20:14:56] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[20:21:32] <pcwalton> didn't know that mut_chunks existed
[20:21:32] <pcwalton> whee
[20:22:05] *** Quits: Ms2ger (Ms2ger@57ACE628.C60A97A6.F9FB0584.IP) (Ping timeout)
[20:28:15] <jdm|away> interesting, another test_collections.html failure
[20:28:21] <jdm|away> something is definitely worth looking into there
[20:28:35] <jdm|away> please don't retry yet
[20:28:41] <jdm|away> I want to try running the test on the machine
[20:28:52] <pcwalton> ok
[20:29:24] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[20:31:27] <jdm|away> oho!
[20:31:34] <jdm|away> it's the same selector race that pradeep saw
[20:31:36] <jdm|away> good, good
[20:32:40] <jdm|away> pcwalton: does anything in https://github.com/mozilla/servo/issues/1319 give you a clue as to where the problem might be?
[20:32:49] <jdm|away> ignore the stuff before the most recent two comments
[20:33:26] <pcwalton> maybe a rust codegen bug?
[20:35:25] *** Joins: ghservo (ghservo@1E8607E8.6A2AE50.F3114085.IP)
[20:35:25] <ghservo> [13servo] 15jdm opened issue #1380: Add a test harness method that disables the task failure page 02http://git.io/ip1EeA
[20:35:25] *** Parts: ghservo (ghservo@1E8607E8.6A2AE50.F3114085.IP) ()
[20:37:06] <pcwalton> jdm|away: do you have a minimal test case/STR?
[20:37:20] *** Joins: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP)
[20:37:20] <ghservo> [13servo] 15pcwalton closed pull request #1379: net: Color space convert 32-bit ARGB PNGs as well. (06master...06png) 02http://git.io/Ik_0Bg
[20:37:20] *** Parts: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP) ()
[20:37:39] *** Joins: ghservo (ghservo@79968228.6A2AE50.F3114085.IP)
[20:37:39] <ghservo> 01[13servo01] 15bors-servo 04force-pushed 06auto from 14214c91a to 14e1d5621: 02http://git.io/c8GovQ
[20:37:39] *** Parts: ghservo (ghservo@79968228.6A2AE50.F3114085.IP) ()
[20:37:49] <jdm|away> pcwalton: pradeep says that http://en.wikipedia.org/wiki/Yellow_River is reproducible, but obviously not minimal
[20:37:56] *** Joins: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP)
[20:37:56] <ghservo> 01[13servo01] 15pcwalton pushed 1 new commit to 06master: 02http://git.io/p9kk_w
[20:37:56] <ghservo> 13servo/06master 14c9c9984 15Patrick Walton: test: Add missing line in reftest list. rs=sillytestfix
[20:37:56] *** Parts: ghservo (ghservo@DE823A67.6A2AE50.F3114085.IP) ()
[20:38:04] <pcwalton> mmm
[20:38:07] <jdm|away> nothing smaller that's ironclad; test_collections.html obviously triggers sometimes
[20:38:09] <pcwalton> probably going to be another day of this :(
[20:38:12] <pcwalton> of debugging
[20:38:43] <jdm|away> I see the Yellow River failure on linux
[20:38:52] <jdm|away> I'll try minimizing
[20:39:02] <pcwalton> great
[20:39:18] *** Joins: brendan (brendaneic@777B9EEC.C030CAFC.1EF54B18.IP)
[20:51:05] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[20:52:51] *** Joins: dbaron (dbaron@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[20:53:20] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[20:53:32] *** Quits: brendan (brendaneic@777B9EEC.C030CAFC.1EF54B18.IP) (Quit: brendan)
[20:54:17] <jdm|away> pcwalton: got it!
[20:54:44] *** Joins: brendan (brendaneic@777B9EEC.C030CAFC.1EF54B18.IP)
[20:54:58] <jdm|away> pcwalton: pasted in the issue
[20:58:39] *** Quits: kmapped2 (kmapped2@A35331CF.60E9685E.20F09BA6.IP) (Quit: leaving)
[21:00:22] *** Quits: bholley (bholley@moz-A2189431.hsd1.ca.comcast.net) (Quit: bholley)
[21:01:10] *** Quits: pcwalton (pcwalton@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[21:02:25] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[21:02:25] *** ChanServ sets mode: +o pcwalton
[21:02:59] <pcwalton> jdm|away: cool, thanks!
[21:04:46] *** jdm|away is now known as jdm
[21:08:04] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Ping timeout)
[21:08:53] *** bhearsum|bbl is now known as bhearsum|buildduty
[21:09:08] *** Joins: pcwalton (pcwalton@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[21:09:08] *** ChanServ sets mode: +o pcwalton
[21:09:38] *** Joins: hoverbear (hoverbear@moz-4B831497.wireless.uvic.ca)
[21:09:58] *** Quits: hoverbear (hoverbear@moz-4B831497.wireless.uvic.ca) (Quit: Hibernating, be back soon.)
[21:14:03] *** Joins: hoverbear (hoverbear@moz-4B831497.wireless.uvic.ca)
[21:16:05] *** Joins: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro)
[21:17:02] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[21:17:06] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[21:17:06] *** ChanServ sets mode: +o brson
[21:17:45] *** Quits: canhtak (canhtak@moz-1D882009.wl.t.ulaval.ca) (Quit: canhtak)
[21:22:07] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[21:23:48] *** Joins: bholley (bholley@moz-A2189431.hsd1.ca.comcast.net)
[21:23:50] *** Quits: bholley (bholley@moz-A2189431.hsd1.ca.comcast.net) (Quit: bholley)
[21:31:39] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[21:36:48] *** Quits: hoverbear (hoverbear@moz-4B831497.wireless.uvic.ca) (Quit: Hibernating, be back soon.)
[21:40:37] *** Quits: jackneill (jackneill@moz-91DAEB3F.pool.digikabel.hu) (Ping timeout)
[21:40:59] *** Quits: dbaron (dbaron@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: 8403864 bytes have been tenured, next gc will be global.)
[21:41:20] *** Joins: Kostic (marko@moz-58F4E400.mbb.telenor.rs)
[21:41:24] *** Joins: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com)
[21:41:54] *** Quits: eddyb (eddy@moz-68E0B7D0.residential.rdsnet.ro) (Ping timeout)
[21:42:00] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[21:42:23] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[21:43:17] *** Quits: dbaupp (Thunderbir@moz-EB2EFE6F.lns20.syd6.internode.on.net) (Ping timeout)
[21:47:03] *** Joins: dzbarsky (Adium@BC1B0569.D5562F02.B5C6E82B.IP)
[21:50:09] *** Quits: dzbarsky (Adium@BC1B0569.D5562F02.B5C6E82B.IP) (Quit: Leaving.)
[21:50:20] *** Joins: dzbarsky (Adium@BC1B0569.D5562F02.B5C6E82B.IP)
[21:55:36] *** Quits: brendan (brendaneic@777B9EEC.C030CAFC.1EF54B18.IP) (Quit: brendan)
[21:56:53] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[21:57:17] *** Joins: canhtak (canhtak@moz-1D882009.wl.t.ulaval.ca)
[21:58:40] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[21:58:40] *** ChanServ sets mode: +o brson
[22:00:12] *** Joins: brendan (brendaneic@777B9EEC.C030CAFC.1EF54B18.IP)
[22:09:42] *** Joins: dherman (dherman@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[22:09:42] *** ChanServ sets mode: +qo dherman dherman
[22:12:46] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Input/output error)
[22:13:14] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[22:14:58] *** Quits: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com) (Ping timeout)
[22:16:54] *** Joins: jet (jet@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[22:18:13] *** Joins: jensnockert (jensnocker@moz-7DC16A5F.afb.bredband2.com)
[22:18:38] *** Joins: harth (heather@moz-C07D5168.p2p.sfo1.mozilla.com)
[22:19:24] *** Quits: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com) (Ping timeout)
[22:19:39] *** Joins: vodik (simon@moz-FD4ADBC6.cable.teksavvy.com)
[22:20:32] *** Quits: alex-abreu (alex@moz-4B4D75AD.rev.sfr.net) (Ping timeout)
[22:21:54] *** Quits: harth (heather@moz-C07D5168.p2p.sfo1.mozilla.com) (Client exited)
[22:27:42] *** Joins: harth (heather@moz-C07D5168.p2p.sfo1.mozilla.com)
[22:27:48] *** Quits: fabrice (fabrice@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[22:27:55] *** Quits: harth (heather@moz-C07D5168.p2p.sfo1.mozilla.com) (Client exited)
[22:28:28] *** Joins: fabrice (fabrice@moz-7B0110AD.mv.mozilla.com)
[22:29:08] <kmc> jdm: the crash doesn't even cause servo itself to exit with a non-zero status :/
[22:29:29] <kmc> I guess it switches to the "I tried" page
[22:29:42] <jdm> yes, that's what I would expect
[22:29:43] <kmc> so maybe I'll disable that behavior in headless mode
[22:29:52] <jdm> hence the issue I filed about making it optional
[22:30:12] <kmc> ah i see that now
[22:30:46] <kmc> command line flag seems easier than a method exposed to JS; are you okay with that alternative?
[22:31:40] <jdm> totally
[22:31:46] <jdm> I prefer it, actually
[22:32:14] <kmc> cool
[22:32:54] *** Quits: canhtak (canhtak@moz-1D882009.wl.t.ulaval.ca) (Quit: canhtak)
[22:33:40] *** Joins: canhtak (canhtak@moz-1D882009.wl.t.ulaval.ca)
[22:34:15] *** bhearsum|buildduty is now known as bhearsum|afk
[22:35:21] *** Joins: dbaron (dbaron@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[22:36:41] <pcwalton> who wants to review a layout bug?
[22:36:44] <pcwalton> a fix for one
[22:36:52] <pcwalton> jdm: want to?
[22:36:59] <pcwalton> it's that bug
[22:37:04] <jdm> pcwalton: I can try
[22:37:13] *** Joins: ghservo (ghservo@C8693FCB.6A2AE50.F3114085.IP)
[22:37:13] <ghservo> [13servo] 15pcwalton opened pull request #1381: layout: Don't delete non-text boxes from the list of input boxes when (06master...06bogus-box-deletion) 02http://git.io/7CUG7w
[22:37:13] *** Parts: ghservo (ghservo@C8693FCB.6A2AE50.F3114085.IP) ()
[22:37:13] <pcwalton> jdm: over to you https://github.com/mozilla/servo/pull/1381
[22:37:32] <pcwalton> I can explain what the issue is (my understanding anyway)
[22:37:44] <pcwalton> the problem is that flush_clump_to_list is expected to keep `in_boxes` constant
[22:37:51] <pcwalton> because it is keeping indices into that list
[22:38:10] <pcwalton> unfortunately the piece of code that handles non-text boxes (i.e. imageboxes) mutated the list
[22:38:17] <pcwalton> the right code was commented out actually
[22:38:22] <jdm> heh
[22:38:27] <pcwalton> so the solution was to take the commented out code and write .clone()
[22:38:32] <pcwalton> now this probably isn't so efficient
[22:38:34] <pcwalton> as I FIXME'd
[22:38:39] <pcwalton> but it fixes the problem.
[22:47:49] *** Quits: canhtak (canhtak@moz-1D882009.wl.t.ulaval.ca) (Quit: canhtak)
[22:50:02] <kmc> actually in this case the failing pipeline sends FailureMsg but the constellation never receives it, weird
[22:50:23] <jdm> doubly weird
[22:51:29] <pcwalton> does anyone have an objection to running ref tests with -c?
[22:51:44] <pcwalton> I think it has a decent chance of eliminating crashes on mac
[22:52:52] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[22:54:43] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[22:55:45] *** Quits: pcwalton (pcwalton@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[22:55:53] <jack> pcwalton: you think the crashes that cause i tried are renderer issues?
[22:56:06] <jdm> jack: definitely not.
[22:56:21] <jdm> I am wondering what crashes he's talking about
[22:56:49] <jack> well, he left so we may never know :)
[22:57:05] <larsberg> I'd doubt it as well - any renderer issues (e.g. of the form I mentioned) would cause X level errors that would tear the process down
[22:57:15] <jdm> IRC's *mic drop* is /quit
[22:57:22] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[22:57:22] *** ChanServ sets mode: +o pcwalton
[22:57:58] <larsberg> From what I've seen, my issue #1373 is speculative because we don't do anything that would give up control to the scheduler in a given rendering
[22:57:59] <crowbot> Issue #1373: Spawn render task on the Single Threaded scheduler - https://github.com/mozilla/servo/issues/1373
[23:00:09] *** Quits: dherman (dherman@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Ping timeout)
[23:00:19] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[23:00:20] *** ChanServ sets mode: +o brson
[23:00:36] *** Joins: dherman (dherman@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[23:00:36] *** ChanServ sets mode: +qo dherman dherman
[23:00:42] *** Quits: brendan (brendaneic@777B9EEC.C030CAFC.1EF54B18.IP) (Quit: brendan)
[23:01:23] <jdm> pcwalton: is there any way we could enforce in_boxes not being mutated?
[23:01:34] <jdm> I see some code transforms some elements, which presumably requires mutability
[23:02:08] *** Joins: dbaupp (Thunderbir@4F13D67D.D5A1DCF.37681C44.IP)
[23:02:09] <pcwalton> I'm not sure
[23:02:14] <pcwalton> we need some mutability sadly
[23:06:56] <jdm> it would be lovely to have a crashtest harness
[23:07:00] <jdm> this new test is perfect
[23:07:05] * jdm files an issue
[23:09:21] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Quit: yichoi)
[23:09:25] *** Joins: brendan (brendaneic@777B9EEC.C030CAFC.1EF54B18.IP)
[23:09:33] *** Quits: jet (jet@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: jet)
[23:11:52] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[23:14:19] *** Joins: jet (jet@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[23:18:47] <kmc> hm ./servo ../src/test/html/content/test_collections.html  fails with 'assertion failed: right_i > 0 && right_i < boxes.len()', /home/keegan/proj/servo/servo/src/components/main/layout/text.rs:61
[23:18:51] <kmc> anyone else see this?
[23:18:53] <jdm> kmc: yep
[23:18:56] <jdm> PR is open to fix it
[23:19:17] <kmc> sweet
[23:19:51] <jdm> jack: bors is stuck on a PR that tested fine
[23:19:54] <jdm> and was merged
[23:20:05] <jdm> pcwalton: did you close #1379 by hand?
[23:20:05] <crowbot> Issue #1379: net: Color space convert 32-bit ARGB PNGs as well. - https://github.com/mozilla/servo/pull/1379
[23:20:10] <pcwalton> yes
[23:21:14] <jdm> pcwalton: wait, did you also merge it by hand while bors was testing?
[23:22:02] <jack> bors doesn't test. bors just polls every 3 minutes for status.
[23:22:30] <jack> it's possible it doesn't recognize the buildbot status that resulted or that it's crashing because it's in a confused state. i can check the bors log
[23:22:37] <jdm> that seems likely
[23:22:48] <jack> you have access too, it's jus ta different machine in that same VPN
[23:23:39] <jdm> jack: where's the log?
[23:23:44] * jdm is SSHed in
[23:24:38] <jack>  /builds/bors/servo
[23:25:17] *** Joins: deokjinkim (Mibbit@B4104EBB.3CC170B1.1E14B209.IP)
[23:26:57] <jdm> nothing beyond 2013-12-11 12:37:38 PST - INFO - merging pcwalton/servo/png = 85f1af42 into auto
[23:27:07] <jack> it's running now
[23:27:16] <jdm> wasn't that three hours ago?
[23:27:17] <jack> so maybe we just kill it and restart
[23:27:25] <jack> i mean that it's in the process list right now
[23:27:31] <jdm> huh
[23:27:32] <jack> it could have been running for 3 hours :)
[23:31:23] <jdm> jack: shall I go ahead and kill it?
[23:31:38] <jdm> I assume it's restarted with /builds/bors/servo/bin/python /builds/bors/servo/bin/bors --quiet ?
[23:35:03] *** Quits: Kostic (marko@moz-58F4E400.mbb.telenor.rs) (Ping timeout)
[23:36:41] *** Joins: bholley (bholley@moz-A2189431.hsd1.ca.comcast.net)
[23:47:37] <jack> jdm: yes
[23:47:42] <jack> oh wait
[23:47:45] <jack> yes to your first question
[23:47:59] <jack> i think there is something that restarts it. bhearsum|afk?
[23:48:17] *** Quits: bholley (bholley@moz-A2189431.hsd1.ca.comcast.net) (Quit: bholley)
[23:49:49] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Quit: yichoi)
[23:56:15] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[23:58:34] *** Joins: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP)
[23:58:34] <ghservo> 01[13servo01] 15bors-servo merged 06master into 06auto: 02http://git.io/C5txHg
[23:58:34] *** Parts: ghservo (ghservo@24260B07.6A2AE50.F3114085.IP) ()
[23:58:36] *** Joins: ghservo (ghservo@F6EE6DE3.6A2AE50.F3114085.IP)
[23:58:36] <ghservo> 01[13servo01] 15bors-servo pushed 2 new commits to 06auto: 02http://git.io/fqltbg
[23:58:36] <ghservo> 13servo/06auto 14dcacab8 15Patrick Walton: layout: Don't delete non-text boxes from the list of input boxes when...
[23:58:36] <ghservo> 13servo/06auto 14acb3d9f 15bors-servo: auto merge of #1381 : pcwalton/servo/bogus-box-deletion, r=jdm...
[23:58:37] *** Parts: ghservo (ghservo@F6EE6DE3.6A2AE50.F3114085.IP) ()
