[00:00:21] <strcat> brson: https://ftp.mozilla.org/pub/mozilla.org/firefox/nightly/latest-mozilla-aurora/ they sign these
[00:11:59] *** Joins: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP)
[00:11:59] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14299c455 to 1413dafa0: 02http://git.io/N3iJvQ
[00:11:59] *** Parts: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP) ()
[00:19:13] *** Quits: enix_ (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[00:22:07] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Max SendQ exceeded)
[00:22:30] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[00:23:15] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Max SendQ exceeded)
[00:23:40] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[00:24:24] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Max SendQ exceeded)
[00:24:45] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[00:25:09] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Max SendQ exceeded)
[00:25:30] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[00:29:15] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Max SendQ exceeded)
[00:29:45] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[00:33:11] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Max SendQ exceeded)
[00:33:35] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[00:34:09] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Max SendQ exceeded)
[00:34:33] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[00:34:44] <seanmonstar> is someone doing a talk on rust in MV for the cloud services team next week?
[00:35:45] *** Joins: aurynj (Eon@C498BDEC.C264657C.C6282BC4.IP)
[00:37:33] *** Joins: enix_ (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[00:41:58] *** Quits: TimAbraldes (quassel@125EF623.B2666F0E.66399531.IP) (Input/output error)
[00:42:18] <brson> seanmonstar: yes
[00:42:49] <seanmonstar> ah excellent. i had hoped to meet someone while i'm up there
[00:44:46] <ChrisMorgan> Will that talk be available in any form anywhere?
[00:45:36] <brson> ChrisMorgan: i doubt it - i don't even know what the content is going to be yet - i'm looking at it as a very early dry run of our sales pitch
[00:45:56] <strcat> cmr: heh, TCO breaking that test is funny
[00:45:56] <seanmonstar> i'd bet it's a "wtf is rust" talk
[00:46:10] <brson> seanmonstar: what do you want to hear?
[00:46:14] <strcat> cmr: thanks for landing that ;), it's a nice optimization
[00:46:29] * ChrisMorgan hopes Cloud Services uses Rust at some time
[00:46:38] <seanmonstar> ChrisMorgan: i'd love to
[00:46:55] <ChrisMorgan> seanmonstar: you're Cloud Services, I take it?
[00:47:01] * seanmonstar nods
[00:47:10] <seanmonstar> working on Firefox Accounts
[00:47:20] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[00:47:32] <seanmonstar> brson: anything. i'm more interested to putting faces to irc handles
[00:47:52] <seanmonstar> and possibly asking questions about pecularities i still struggle with
[00:50:29] <strcat> acrichto: would it be okay for libsync to depend on libcollections? (or the reverse)
[00:50:38] <strcat> or should I make another crate for concurrent containers
[00:50:45] <strcat> (depending on both)
[00:51:07] <strcat> atm I'm leaning towards making another
[00:53:08] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Max SendQ exceeded)
[00:53:29] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[00:54:08] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Max SendQ exceeded)
[00:54:32] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[00:56:16] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Max SendQ exceeded)
[00:57:03] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[00:57:54] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[00:57:55] *** ChanServ sets mode: +ao dherman dherman
[00:58:53] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Max SendQ exceeded)
[00:59:31] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[00:59:42] <cmr> strcat: sure
[00:59:55] <cmr> strcat: I'm thinking about working on TBAA next
[01:00:29] *** Quits: bvssvni (Mibbit@moz-A47B6F8E.bb.online.no) (Quit: http://www.mibbit.com ajax IRC Client)
[01:01:13] <cmr> strcat: a separate crate is probably best
[01:01:23] <cmr> to avoid dep weirdness..
[01:02:07] <strcat> cmr: fixing any remaining misuse of &mut or missing Unsafe would be a prerequisite for that
[01:02:17] *** Quits: andrew-__ (andrew-d_w@F831D131.9DFA657C.CC0301A2.IP) (Input/output error)
[01:02:26] <strcat> and we'd be able to add noalias on &mut and &T where T doesn't contain Unsafe (I think that's how it works?)
[01:02:35] * strcat hasn't looked at the Unsafe stuff in detail
[01:02:38] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[01:03:19] <cmr> I *think* all the remaining misuse has been cleaned up in the stdlib.
[01:03:26] <cmr> will probably have to take a pass through the compiler
[01:04:08] <strcat> I doubt the compiler misuses &mut in a *signature*, but perhaps it does for &
[01:04:35] <strcat> but for TBAA (not just attributes) misuse in more than the signature of functions would matter
[01:04:39] <cmr> middle::ty is suspect
[01:06:48] *** Joins: lpy (lpy@E44EE2C4.F09091A8.1348A864.IP)
[01:11:08] <huon> cmr: writing https://github.com/mozilla/rust/issues/13146 would probably help
[01:11:20] *** Quits: canhtak (canhtak@54F87F4D.60A12A38.BF4BC958.IP) (Quit: canhtak)
[01:12:00] *** Quits: lpy (lpy@E44EE2C4.F09091A8.1348A864.IP) (Client exited)
[01:12:50] *** Joins: canhtak (canhtak@54F87F4D.60A12A38.BF4BC958.IP)
[01:13:28] <brson> rustarting buildbot
[01:13:38] <brson> hopefully the last time for a while
[01:13:49] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[01:20:44] *** Joins: andrew-__ (andrew-d_w@F831D131.9DFA657C.CC0301A2.IP)
[01:21:39] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Ping timeout)
[01:23:58] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[01:23:58] *** ChanServ sets mode: +ao dherman dherman
[01:27:23] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[01:27:23] *** ChanServ sets mode: +ao pcwalton pcwalton
[01:28:28] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[01:28:35] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[01:28:47] *** Joins: lkuper (lkuper@moz-61339218.dyn.optonline.net)
[01:31:29] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Max SendQ exceeded)
[01:31:54] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[01:33:42] <cmr> brson: rustarting, eh?
[01:34:07] <brson> lol
[01:34:09] <brson> not intentional
[01:34:13] <cmr> sure, sure :p
[01:34:21] <acrichto> strcat: I'd also lean towards another, not sure what the name would be though
[01:34:29] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Max SendQ exceeded)
[01:34:32] <strcat> acrichto: yeah that's the problem as always
[01:34:35] <strcat> naming things
[01:34:42] <strcat> acrichto: it will have one type at first so I could just name it after that...
[01:34:47] <strcat> libshard -> ShardMap/ShardSet
[01:34:50] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[01:35:16] <strcat> concurrent hash map/set with fine-grained locking (your choice of the # of shards)
[01:35:24] * strcat had to port it to the new hash
[01:35:47] <strcat> I'm not quite sure if it should double-hash or not though
[01:36:14] <strcat> needs to hash to find the right map/set, and then hash again - or, it could reuse it
[01:36:42] <strcat> for a small number of shards it won't matter, but if you use a *very* large number then it seems bad, as a hash map will only ever see a subset of hashes
[01:36:51] <strcat> but inefficient to hash twice
[01:36:53] <strcat> ;s
[01:37:07] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[01:37:17] <cmr> Add a special Hasher that wraps another one and hashes twice, leave the choice to the user :p
[01:38:45] <acrichto> "Rust is uninstalled. Have a nice day." bahaha
[01:39:01] <acrichto> brson: did you mean for --uninstall to download the installer?
[01:39:30] <cmr>             let in_t = 
[01:39:33] <cmr> whoops
[01:39:44] <strcat> brson: the rusti buildbot could also host the arch nightly repo, so it could be on rust-lang.org
[01:40:06] <strcat> arch's build server is getting crowded ;s
[01:40:45] <strcat> dunno how big these VMs are though
[01:41:16] *** Quits: k4nar (quassel@moz-EE8DAF45.ip-91-121-75.eu) (Quit: No Ping reply in 180 seconds.)
[01:41:20] <strcat> (it'd be nice if the ubuntu repo was official too, as many people use it)
[01:41:22] <brson> acrichto: yes
[01:41:27] *** Quits: aurynj (Eon@C498BDEC.C264657C.C6282BC4.IP) (Ping timeout)
[01:41:30] *** Joins: k4nar (quassel@moz-EE8DAF45.ip-91-121-75.eu)
[01:41:32] <acrichto> kewl
[01:41:33] <brson> acrichto: the installer is used to uninstall
[01:42:51] *** kimundi is now known as zz_kimundi
[01:43:09] <acrichto> brson: awesome work btw, this is amazing to have!
[01:43:15] <cmr> it really is
[01:43:33] <cmr> "Rust is just like hair salon that forbids you from setting your own hair on fire."
[01:44:29] *** Joins: lpy (lpy@1AF10827.F09091A8.1348A864.IP)
[01:44:35] * strcat found the claim that array bounds checking on [] is totalitarian hilarious
[01:44:44] <strcat> we still have unsafe indexing... it's right there if you want it
[01:44:59] <strcat> rust just isn't going to pretend it's safe ;s
[01:46:14] *** Quits: lpy (lpy@1AF10827.F09091A8.1348A864.IP) (Client exited)
[01:47:13] *** Joins: lpy (lpy@1AF10827.F09091A8.1348A864.IP)
[01:48:39] *** Quits: lpy (lpy@1AF10827.F09091A8.1348A864.IP) (Client exited)
[01:49:30] *** Quits: jdm (jdm@FCCEA34F.7672369.D8E68FF6.IP) (Quit: Lost terminal)
[01:50:14] *** Joins: lpy (lpy@1AF10827.F09091A8.1348A864.IP)
[01:50:27] <cmr> Would anyone care if I removed #[static_assert]?
[01:50:45] <strcat> we have static asserts?
[01:50:48] <acrichto> cmr: I would mildly object
[01:50:55] <acrichto> why remove it?
[01:50:59] <cmr> strcat: it checks if a `static` or `static mut` is initialized to true.
[01:51:05] <strcat> rusti: #[static_assert] static x: bool = true;
[01:51:06] -rusti- <anon>:10:26: 10:48 warning: code is never used: `x`, #[warn(dead_code)] on by default
[01:51:06] -rusti- <anon>:10         #[static_assert] static x: bool = true;
[01:51:06] -rusti-                                    ^~~~~~~~~~~~~~~~~~~~~~
[01:51:06] -rusti- ()
[01:51:07] <cmr> acrichto: because it's not useful and nobody uses it.
[01:51:08] <strcat> rusti: #[static_assert] static x: bool = false;
[01:51:09] -rusti- pastebinned 7 lines of output: http://sprunge.us/QeiJ
[01:51:33] * strcat tries to think of a use case
[01:51:40] *** Quits: lpy (lpy@1AF10827.F09091A8.1348A864.IP) (Client exited)
[01:51:47] <acrichto> cmr: I suppose it's quite limited by not having evaluation of things like size_of in statics
[01:51:53] <cmr> right.
[01:51:53] <acrichto> but when you need it, it's a *very* useful thing to have
[01:51:58] <strcat> won't this make generics broken?
[01:52:04] <strcat> when we get T::constant
[01:52:04] <acrichto> it's such a small amount of code, I'm not sure if we should remove it
[01:52:21] <strcat> you'd be able to put (nearly) arbitrary requirements in generics not part of the signature
[01:52:27] <strcat> sounds a lot like templates
[01:52:37] <strcat> where does static_assert run? trans? :|
[01:52:58] <strcat> hm.
[01:53:12] <cmr> yes.
[01:53:31] <strcat> seems like more transmutes waiting to happen ;s
[01:53:41] <huon> is it feature gated?
[01:53:44] <strcat> I like static asserts in C++ but that's because I can't use trait bounds
[01:53:55] <strcat> huon: no
[01:54:03] <strcat> (or it wouldn't have worked in rusti)
[01:54:10] <huon> any objections to feature gating it, then?
[01:54:20] <cmr> I could feature gate it.
[01:54:29] <strcat> imo we should remove it and have it go through an RFC if it's desired
[01:54:36] <strcat> if there's no current use case, why keep it?
[01:54:45] <cmr> servo doesn't even use it
[01:54:49] <strcat> and the interactions with generics need to be thought out
[01:55:03] <strcat> the transmute size check is basically a static assert
[01:55:25] <strcat> (but we don't have CTFE so you can't actually check size_of with it)
[01:55:31] <strcat> you could probably do *something* though
[01:55:49] *** Joins: lpy (lpy@1AF10827.F09091A8.1348A864.IP)
[01:56:06] <cmr> strcat: what interactions with generics are there? We can't have generic statics, can we?
[01:56:37] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[01:57:03] *** Quits: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP) (Ping timeout)
[01:58:07] <strcat> cmr: we can't have constants in traits yet, but that'd do it
[02:00:03] <brson> omg mcpherrin just sign up to rust-dev already :p
[02:00:34] *** Joins: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP)
[02:00:42] <brson> oh he's not here :(
[02:01:04] *** Joins: cgaebel (clark@moz-F9D89110.nyc.res.rr.com)
[02:02:17] *** Quits: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP) (Ping timeout)
[02:02:35] *** Joins: McPherrin (mcpherrin@moz-464166A4.hsd1.ca.comcast.net)
[02:05:46] *** Quits: jxs (joaoxsouls@1FF12F4F.CDF09DE2.D6573861.IP) (Connection reset by peer)
[02:07:57] *** Joins: jxs (joaoxsouls@1FF12F4F.CDF09DE2.D6573861.IP)
[02:08:53] *** Joins: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP)
[02:09:07] *** Quits: bjz_ (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[02:09:53] <cmr> In trans_intrinsic is there any way to get the span of the call to the intrinsic :|
[02:09:53] *** Joins: zimbabao (rajaram@31A794DB.867BB49C.BE4CF869.IP)
[02:10:04] <cmr> debugging this change is going to be impossible.
[02:10:29] <huon> cmr: you might have to change that first...
[02:16:15] *** Quits: andrew-__ (andrew-d_w@F831D131.9DFA657C.CC0301A2.IP) (Input/output error)
[02:16:36] *** Joins: andrew-d_w (andrew-d_w@F831D131.9DFA657C.CC0301A2.IP)
[02:17:27] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[02:18:58] *** Quits: lpy (lpy@1AF10827.F09091A8.1348A864.IP) (Client exited)
[02:19:57] <cmr> oh this issue.
[02:20:00] <cmr> I hate this issue.
[02:20:24] <huon> rusti: unsafe { std::cast::transmute::<u8, u16>(1) }
[02:20:26] -rusti- <anon>:1:1: 1:1 error: transmute called on types with different sizes: u8 (8 bits) to u16 (16 bits)
[02:20:26] -rusti- <anon>:1 #[feature(globs, macro_rules, struct_variant, simd, asm)];
[02:20:26] -rusti-          ^
[02:20:26] -rusti- application terminated with error code 101
[02:20:30] <huon> cmr: that one, right?
[02:20:41] <cmr> yeah
[02:21:39] <acrichto> rusti: unsafe { std::intrinsics::transmute::<u8, u16>(1) }
[02:21:40] -rusti- <anon>:10:18: 10:55 error: transmute called on types with different sizes: u8 (8 bits) to u16 (16 bits)
[02:21:40] -rusti- <anon>:10         unsafe { std::intrinsics::transmute::<u8, u16>(1) }
[02:21:40] -rusti-                            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[02:21:41] -rusti- application terminated with error code 101
[02:21:50] *** Quits: andrew-d_w (andrew-d_w@F831D131.9DFA657C.CC0301A2.IP) (Ping timeout)
[02:21:58] <acrichto> it's only if you monomorphize through another function that the span is wrong
[02:22:04] <cmr> yeah.
[02:22:04] *** Quits: Axord (xord@moz-BC8E2FBC.static.rvsd.ca.charter.com) (Ping timeout)
[02:22:14] <cmr> well
[02:22:31] <cmr> I think I'll replace std::cast::transmute with a reexport, would that be acceptable?
[02:22:49] *** Quits: jxs (joaoxsouls@1FF12F4F.CDF09DE2.D6573861.IP) (Quit: bye)
[02:22:50] <huon> looks bad in the docs
[02:23:21] *** Joins: jxs (joaoxsouls@1FF12F4F.CDF09DE2.D6573861.IP)
[02:23:40] <huon> (https://github.com/rust-lang/rfcs/pull/8 addresses that, though)
[02:24:09] *** Quits: enix_ (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[02:24:41] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[02:25:15] <brson> cmr: not yet no
[02:25:27] <cmr> yeah I forgot about that rfc
[02:26:22] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[02:26:27] * strcat puts the 'language subset' argument to use in the bounds check thread
[02:26:48] <strcat> can we *pleaaaaaase* make an official list of absolutely rejected things so we can just point people to it?
[02:26:59] <strcat> rejected/removed features page
[02:27:12] * strcat would write some
[02:27:42] <huon> strcat: https://github.com/mozilla/rust/issues/4632 and https://github.com/mozilla/rust/issues/4707
[02:28:01] <strcat> hm, but they're closed
[02:28:14] <strcat> ah I see
[02:28:25] <strcat> anyway if there's support for having it in the official documentation I'll write some
[02:28:29] <strcat> (right now)
[02:29:12] <strcat> could also elaborate on some of this in the unsafety section I wrote for the manual
[02:29:41] <cmr> I would love that.
[02:31:45] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[02:34:58] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Ping timeout)
[02:35:20] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[02:38:28] *** Joins: Axord (xord@moz-BC8E2FBC.static.rvsd.ca.charter.com)
[02:38:39] <cmr> huon: I really have no idea how to fix this
[02:39:23] <huon> cmr: side table mapping something to spans?
[02:39:36] <huon> no idea what "something" should be, though...
[02:40:34] *** Quits: Axord (xord@moz-BC8E2FBC.static.rvsd.ca.charter.com) (Ping timeout)
[02:41:39] <cmr> neither do I
[02:41:51] <cmr> and there's the issue of *getting* the spans from other crate's metadata
[02:42:08] <cmr> I'd be happy to work around that hackily, it'd be better than what we have.
[02:42:54] <huon> maybe NodeId of every generic function *call* -> span, and then a transmute error would work upwards to find the nearest call in the call stack that was in that map
[02:43:18] <huon> (anything not in that map would be a generic call from a different crate)
[02:44:23] <huon> i.e. `std::calls_transmute_internally::<u8, u64>()` would point to that call, not to the actual transmute call inside it one (since there's no source location directly associated with the transmute call itself)
[02:44:31] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Max SendQ exceeded)
[02:44:46] <cmr> right
[02:44:55] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[02:45:06] <cmr> that's going to be a big table.
[02:45:24] <huon> can probably use SmallIntMap
[02:45:31] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Max SendQ exceeded)
[02:45:33] <huon> and it only has to be populated for trans itself
[02:45:55] <cmr> I suppose that, when I hit this error, I could go build that map, just for this.
[02:46:16] <huon> ooh, that's an idea
[02:46:22] <cmr> or just walk upwards directly
[02:46:26] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[02:46:33] <cmr> but there is no call stack, that's not how it works, to my knowledge.
[02:46:43] <huon> there kinda is?
[02:47:18] <huon> since this will be caused by explicitly monomorphising something, which presumably has a base cause somewhere in the actual source code
[02:47:35] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Max SendQ exceeded)
[02:47:45] <huon> oh... how about, when monomorphising something, pass the span down (when a non-trivial span exists)
[02:47:54] <cmr> I tried that but couldn't find a span
[02:47:57] <cmr> I'll look harder
[02:48:23] <cmr> (after I couldn't find the span is when I said I didn't know how to solve it :p)
[02:49:25] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[02:50:17] <huon> cmr: can't you get the span from map_node in monomorphize?
[02:50:33] <cmr> that's of the fn decl.
[02:50:44] <huon> oh, hm
[02:51:13] <huon> in callee, then?
[02:51:21] <cmr> I'm currently trawling through there
[02:52:18] <huon> grep to the monomorphic_fn call :)
[02:52:28] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Max SendQ exceeded)
[02:52:41] <cmr> I'm like 3 steps above you in the callstack there :p
[02:52:54] <huon> hah
[02:53:05] <huon> but.. can't you map the ExprOrMethodCall to a Span?
[02:53:09] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[02:53:33] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Max SendQ exceeded)
[02:53:34] <cmr> callee::trans
[02:53:55] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[02:53:55] <cmr> Nope, that's also to the fn decl iirc
[02:54:03] *** Quits: darnuria (darnuria@moz-AB6EB255.ip-91-121-133.eu) (Ping timeout)
[02:54:04] <cmr> I did try that but came to the conclusion it wasn't what I was looking for
[02:54:07] <cmr> Ah yes
[02:54:12] <cmr> that's just the type parameters
[02:54:26] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Max SendQ exceeded)
[02:54:40] <cmr> callee::trans can push its ast::Expr further down the stack
[02:54:54] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[02:55:25] *** Joins: Axord (xord@moz-BC8E2FBC.static.rvsd.ca.charter.com)
[02:55:26] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Max SendQ exceeded)
[02:56:04] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[02:56:28] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Max SendQ exceeded)
[02:56:50] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[02:57:01] *** Joins: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP)
[02:57:01] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/tBBvMA
[02:57:01] *** Parts: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP) ()
[02:57:15] <cmr> actually...
[03:00:14] *** Quits: canhtak (canhtak@54F87F4D.60A12A38.BF4BC958.IP) (Quit: canhtak)
[03:01:57] *** Joins: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP)
[03:01:57] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/RCAevA
[03:01:57] *** Parts: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP) ()
[03:01:57] *** Joins: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP)
[03:01:57] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/U3vxxg
[03:01:57] <ghrust> 13rust/06auto 14940bfb2 15Alex Crichton: Revert "Modules are either public, or private, so private modules should be stripped out"...
[03:01:57] <ghrust> 13rust/06auto 147e987c3 15bors: auto merge of #13173 : alexcrichton/rust/rustdoc-mods, r=huonw...
[03:01:58] *** Parts: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP) ()
[03:04:23] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[03:06:58] <cmr> huon: yeah I'm just blind
[03:07:06] <cmr> ExprOrMethodCall is indeed what I wanted.
[03:07:26] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Max SendQ exceeded)
[03:07:50] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[03:08:00] <huon> cmr: getting the info directly from a higher level would be better if it's possible (saves map lookups)
[03:08:25] <cmr> huon: directly from what where?
[03:08:34] <cmr> there will only be one ast_map lookup in the error case?
[03:09:19] <huon> cmr: I dunno, but at some point you'll be handling an Expr, right?
[03:09:24] <huon> (and that has it's span in it)
[03:09:29] <huon> error case?
[03:09:35] *** Quits: KokaKiwi (kokakiwi@moz-D674DAC6.kokakiwi.net) (Ping timeout)
[03:09:45] <cmr> &T -> &mut U is the error case
[03:10:03] <huon> erm, aren't we talking about the crappy spans?
[03:10:32] <cmr> well, wrongly sized transmute is the same dealeo.
[03:11:07] <huon> right...
[03:11:20] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Max SendQ exceeded)
[03:11:25] <huon> I was thinking about passing the span down from where it's known through all the calls
[03:11:51] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[03:11:53] <huon> but you're thinking about passing the ExprOrMethodCall down into monomorphic_fn?
[03:11:58] <cmr> yeah
[03:12:05] <cmr> almost done that, testing soon
[03:12:15] <huon> ... how are you doing a lint in trans?
[03:12:24] <huon> (or just making it a hard error?)
[03:12:25] <cmr> I'm not, span_err :P
[03:12:32] <huon> heh, ok
[03:12:44] <cmr> it's easy to workaround
[03:12:53] <cmr> transmute to *mut U then to &mut U
[03:12:56] <huon> :/
[03:12:58] <cmr> but harder to do that accidentally.
[03:13:09] <huon> ... that's just as wrong
[03:13:12] <cmr> yes it is.
[03:13:25] <huon> but yeah, I guess it's wrong, so a hard error is ok
[03:15:24] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Max SendQ exceeded)
[03:15:45] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[03:16:00] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[03:16:00] *** ChanServ sets mode: +o tjc
[03:18:54] *** Quits: gimpf (gimpf@moz-9EFA1B81.adsl.highway.telekom.at) (Ping timeout)
[03:23:16] <brson> r? https://github.com/mozilla/rust/pull/13174
[03:23:44] *** Joins: darnuria (darnuria@moz-AB6EB255.ip-91-121-133.eu)
[03:24:01] <huon> brson: need a priority for that last one?
[03:24:19] <brson> huon: yes please
[03:29:01] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[03:29:38] <brson> acrichto: I think to document these install methods I want to create rust-lang.org/install.html that explains the options and presents download links
[03:29:46] <brson> then modify README.md to link to that
[03:29:55] <acrichto> brson: I agree
[03:30:01] <acrichto> plus a small button on the main page
[03:30:03] <brson> I'm not sure if one README.md can sufficiently explain how to acquire rust
[03:30:14] <acrichto> it should say to use install.sh
[03:30:18] <acrichto> and point to install.html
[03:30:20] <acrichto> but not much else
[03:30:25] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[03:33:35] *** Quits: darnuria (darnuria@moz-AB6EB255.ip-91-121-133.eu) (Ping timeout)
[03:36:28] <ChrisMorgan> brson: `curl â€¦ | sudo sh`? *BIG shudder.*
[03:37:19] <cmr> unused variable saves my bacon again
[03:37:21] <cmr> I love rust
[03:37:57] <brson> ChrisMorgan: trust me!
[03:38:09] <brson> (not really)
[03:38:50] <ChrisMorgan> brson: seriously, I wish people would stop doing that. It's simply not a good plan, and not just for the security aspect of it; if the download breaks partway through you'll be left in an indeterminate state.
[03:39:08] *** Joins: KokaKiwi (kokakiwi@moz-D674DAC6.kokakiwi.net)
[03:39:35] <brson> ChrisMorgan: don't use it
[03:40:00] <ChrisMorgan> I mean recommending it or even mentioning it.
[03:40:23] <huon> ChrisMorgan: is there a better solution for mildly complicated installation scripts?
[03:40:31] <huon> (downloading to a temporary file?)
[03:40:36] <ChrisMorgan> huon: yep
[03:40:46] <ChrisMorgan> That's it.
[03:41:03] <ChrisMorgan> Oh, and don't serve it over HTTP.
[03:41:39] <ChrisMorgan> That's just asking for MITM, if you're paranoid â˜º
[03:41:54] <huon> ChrisMorgan: see the logs for this channel a few hours ago
[03:42:02] <cmr> huon: it works \o/
[03:42:13] <huon> ChrisMorgan: HTTP has been discussed already :)
[03:42:15] <huon> cmr: \o/
[03:42:17] <cmr> /home/cmr/hacking/rust/src/libstd/cast.rs:59:5: 59:26 error: unsafe transmute from {} to {}(undefined behavior), use the Unsafe type instead
[03:42:19] <cmr> /home/cmr/hacking/rust/src/libstd/cast.rs:59     intrinsics::transmute(thing)
[03:42:21] <cmr>                                                  ^~~~~~~~~~~~~~~~~~~~~
[03:43:08] <huon> {}?
[03:43:15] <cmr> got lazy
[03:43:21] <cmr> that will be the type :p
[03:43:27] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Max SendQ exceeded)
[03:43:46] <huon> "incorrect transmute from {} to {}, use the Unsafe type to avoid undefined behaviour"
[03:43:48] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[03:43:53] <huon> (since all transmutes are unsafe :P )
[03:44:04] <cmr> hey that's not a bad message, let me steal that.
[03:44:21] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Max SendQ exceeded)
[03:44:24] * huon wants royalties
[03:44:46] <cmr> also nice try with your Australian english
[03:44:56] <huon> (does it fix spans on non-intrinsic::transmute transmute calls?)
[03:45:05] <huon> cmr: you mean my correct english, right?
[03:45:26] <cmr> It reports the samer error 6 times...
[03:45:29] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[03:45:51] <cmr> ah probably 6 calls to std::cast
[03:46:21] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Max SendQ exceeded)
[03:46:31] *** Quits: zz_kimundi (kimundi@moz-137CBE82.dip0.t-ipconnect.de) (Ping timeout)
[03:46:38] <huon> hah, that's kinda useless
[03:46:44] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[03:46:56] <cmr> but it's progress, and fixable.
[03:47:15] <huon> I guess working out exactly what monomorphisation site caused the current instanciation is hard
[03:47:29] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Max SendQ exceeded)
[03:47:37] <cmr> not sure that is.
[03:47:44] <huon> e.g. `foo::<int>(); fn foo<T>() { transmute::<u8, i8>(1) }
[03:47:51] <huon> it's not the foo call
[03:47:55] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[03:48:00] <huon> but if there was a T in the transmute call, it would be
[03:48:04] <cmr> ah that's true
[03:48:21] <huon> something something substs
[03:48:37] * strcat hopes this mail isn't too sarcastic
[03:48:41] <strcat> too late though
[03:48:57] *** Joins: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca)
[03:50:24] *** Joins: zz_kimundi (kimundi@moz-F76B25A2.dip0.t-ipconnect.de)
[03:50:26] *** zz_kimundi is now known as kimundi
[03:50:42] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[03:51:47] *** Joins: aurynj (Eon@C498BDEC.C264657C.C6282BC4.IP)
[03:51:52] <ChrisMorgan> "to avoid undefined behaviour". Problem is, Rust simply doesn't *let* you do it; you can't opt in to undefined behaviour, can you?
[03:52:03] <huon> ChrisMorgan: `unsafe`
[03:52:16] <ChrisMorgan> ?
[03:52:24] <huon> e.g. you can create null & pointers, store out-of-range chars, transmute & to &mut
[03:52:29] <cmr> ChrisMorgan: `*T -> &'a mut T` causes undefined behavior.
[03:52:30] <huon> put non-utf8 data in strs
[03:53:02] <huon> inside `unsafe` you have to be careful to avoid invoking UB
[03:53:03] <ChrisMorgan> I mean in this particular case. It's an error, not a warning.
[03:53:08] <huon> outside unsafe the compiler catches it
[03:53:26] <huon> (theoretically, there's still a few things we're doing incorrectly)
[03:53:38] <huon> rusti: -128i8 / -1
[03:53:39] -rusti- 0
[03:53:53] <huon> that's UB (e.g. 0 is a wrong answer.)
[03:54:00] <cmr> isn't that just unspecified?
[03:54:10] <huon> well, maybe...
[03:54:15] * huon checks
[03:54:28] <cmr> I'm pretty sure we opt into that behavior explicitly in llvm
[03:54:29] <huon> nope
[03:54:30] <huon> "Overflow also leads to undefined behavior; this is a rare case, but can occur, for example, by doing a 32-bit division of -2147483648 by -1."
[03:54:38] <cmr> ok.
[03:54:41] <huon> http://llvm.org/docs/LangRef.html#sdiv-instruction
[03:54:54] <ChrisMorgan> Yeah, but in this particular transmute case, the error message directs you to do something "to avoid undefined behaviour" when it never lets you get such undefined behaviour in the first place.
[03:54:57] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Ping timeout)
[03:55:12] <huon> ChrisMorgan: oh, I see
[03:55:25] <huon> you can still get the UB, e.g. transmute &mut & to &mut &mut
[03:55:30] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[03:55:31] *** ChanServ sets mode: +o tjc
[03:55:39] <huon> or & to *mut to &mut
[03:57:41] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[04:00:28] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Max SendQ exceeded)
[04:00:52] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[04:01:12] <aatch> Dear god, never have I seen so much wild speculation
[04:01:31] <aatch> (bounds checking thread on ML)
[04:02:02] * huon has an IDEA
[04:02:09] * aatch ducks
[04:02:13] <huon> we could have RUST_NOBOUNDSCHECKS=1 ./foo
[04:02:16] <huon> to avoid the bounds checks
[04:02:36] <huon> and for maximum flexibility we should check taht env var each time, so it can be controlled dynamically
[04:02:39] <aatch> huon, before the bounds check, we check for the environment variable! It's genious.
[04:02:44] <aatch> genius*
[04:02:52] * huon is a genious
[04:03:07] * aatch going home
[04:03:10] *** Joins: darnuria (darnuria@moz-AB6EB255.ip-91-121-133.eu)
[04:03:14] *** Quits: aatch (James@moz-B437F499.pocketrent.com) (Client exited)
[04:03:40] <sfackler> huon: gottagofast
[04:04:23] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Max SendQ exceeded)
[04:05:19] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[04:05:22] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[04:05:46] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Max SendQ exceeded)
[04:06:14] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[04:06:41] <cmr> Perhaps we should have an -> operator, that does all autoderef, and also through unsafe pointers ...
[04:06:45] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Max SendQ exceeded)
[04:07:08] <cmr>  (*(*selector).tail).next = me;
[04:07:20] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[04:07:35] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Max SendQ exceeded)
[04:07:56] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[04:08:06] <cmr> brson: the intrinsics RFC means eventually std::cast::transmute will be the intrinsic directly, right?
[04:08:20] <cmr> acrichto: shame on you for invoking undefined behavior! (comm::select had transmutes from & to &mut)
[04:09:05] <huon> cmr: they weren't UB until a week or so ago
[04:09:12] <cmr> so? :p
[04:09:24] <brson> cmr: yes
[04:09:29] <cmr> ok.
[04:09:42] <cmr> this error message always points to the call to the intrinsic, unfortunately.
[04:09:53] <cmr> but eventually things *will* be calls to the intrinsic
[04:09:58] <cmr> so, less work for me
[04:10:12] <huon> cmr: even outside libstd?
[04:10:20] <cmr> huon: yeah.
[04:10:23] <cmr> well.
[04:10:25] <cmr> actually
[04:10:27] <cmr> let me test
[04:10:49] <huon> how does that makes sense? (i.e. there's no span to attach to)
[04:11:34] <cmr> waiting for stage1 to finish...
[04:12:14] *** Quits: Jesse (jruderman@moz-62518563.mtv2.mozilla.com) (Quit: Jesse)
[04:12:47] *** Quits: brson (brson@moz-62518563.mtv2.mozilla.com) (Ping timeout)
[04:15:07] *** Quits: darnuria (darnuria@moz-AB6EB255.ip-91-121-133.eu) (Ping timeout)
[04:15:28] *** Quits: k4nar (quassel@moz-EE8DAF45.ip-91-121-75.eu) (Quit: No Ping reply in 180 seconds.)
[04:15:40] *** Joins: k4nar (quassel@moz-EE8DAF45.ip-91-121-75.eu)
[04:15:46] <huon> I'd guess it's just using the same dummy span?
[04:15:52] <huon> (as it currently uses)
[04:17:05] *** Joins: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP)
[04:17:05] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/U3vxxg
[04:17:05] *** Parts: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP) ()
[04:18:19] *** Quits: lkuper (lkuper@moz-61339218.dyn.optonline.net) (Quit: lkuper)
[04:19:32] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[04:21:56] *** Joins: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP)
[04:21:56] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/HDBZqg
[04:21:56] *** Parts: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP) ()
[04:21:59] *** Joins: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP)
[04:21:59] <ghrust> [13rust] 15bors pushed 3 new commits to 06auto: 02http://git.io/7gUOEA
[04:21:59] <ghrust> 13rust/06auto 14080d210 15Brian Anderson: mk: Always touch libuv.a...
[04:21:59] <ghrust> 13rust/06auto 14476f0e3 15Brian Anderson: mk: Fix syntax error in installation target
[04:22:00] <ghrust> 13rust/06auto 1422a04ce 15bors: auto merge of #13174 : brson/rust/dist, r=alexcrichton,huonw
[04:22:02] *** Parts: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP) ()
[04:23:36] <cmr> huon: yeah
[04:24:37] <cmr> huon: this is a pain :( not sure what the best way to get the root cause that made the bad transmute.
[04:24:55] <cmr> I may just wait for rfc 8 to be implemented.
[04:25:43] <huon> cmr: it will still be a problem (e.g. wrappers around transmutes)
[04:26:16] <cmr> yeah :(
[04:26:35] <huon> but, I think you can hack something together with the pass-Spans-down idea, by passing spans through everything handling Exprs, and only proprogate teh current span if it's no the dummy one
[04:26:51] <huon> (otherwise just keep passing down the same one)
[04:27:00] <huon> bleh, poorly explained :(
[04:27:02] *** Quits: cgaebel (clark@moz-F9D89110.nyc.res.rr.com) (Ping timeout)
[04:27:08] <cmr> that *is* what it's doing though.
[04:27:24] <cmr> the ExprOrMethodCall is created directly from the ast::Expr that callee:trans gets
[04:27:42] <huon> yes, but then that gets overwritten by the inlined transmute calsl
[04:27:46] <huon> which all have bad spans
[04:27:53] <huon> (right?)
[04:28:22] <cmr> not quite, the expr is deserialized to a dummy span. rather than getting overwritten, it simply never exists.
[04:28:34] <cmr> this is for the trans for std::cast::transmute, specifically.
[04:28:41] <huon> I meant the ExprOrMethodCall gets overwritten
[04:28:49] <huon> by the new ExprOrMethodCall for the inlined item
[04:28:55] <cmr> I don't believe it does?
[04:29:06] <huon> surely it does?
[04:29:20] <huon> how else does it work out it's transing std::cast::transmute?
[04:29:26] * cmr goes to stare at the RUST_LOG again
[04:31:32] *** Joins: lpy (lpy@E44EE2C4.F09091A8.1348A864.IP)
[04:32:20] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[04:33:23] *** Quits: lpy (lpy@E44EE2C4.F09091A8.1348A864.IP) (Ping timeout)
[04:35:02] <cmr> huon: what was the point you were trying to make? I think I misinterpreted.
[04:37:02] <huon> cmr: I'm occupied, will explain in a sec
[04:37:55] <cmr> ok
[04:39:37] *** Quits: aurynj (Eon@C498BDEC.C264657C.C6282BC4.IP) (Quit: Leaving)
[04:41:57] *** Quits: zimbabao (rajaram@31A794DB.867BB49C.BE4CF869.IP) (Ping timeout)
[04:43:32] *** Quits: luz (lu.cy@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[04:43:38] *** Quits: Kxepal (Miranda@moz-AA60EEAD.pppoe.mtu-net.ru) (Connection reset by peer)
[04:43:55] *** Joins: Kxepal (Miranda@moz-AA60EEAD.pppoe.mtu-net.ru)
[04:44:40] *** Joins: darnuria (darnuria@moz-AB6EB255.ip-91-121-133.eu)
[04:48:38] <cmr> I'm thinking about just keeping a stack of expressions in expr::trans / expr::trans_into
[04:48:51] <cmr> it pushes the current expr, does the translating, then pops it.
[04:53:06] <cmr> and keeping that in tls
[04:53:13] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[04:53:13] *** ChanServ sets mode: +ao pcwalton pcwalton
[04:53:25] <cmr> I think I might open an issue for this first
[04:54:45] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[04:55:50] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Connection reset by peer)
[04:56:00] <huon> cmr: https://gist.github.com/huonw/54d320a831e7bbdfe053 (is probably still unhelpful)
[04:56:06] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[04:57:23] <cmr> ah that's what you meant.
[04:57:32] <cmr> I understand now.
[04:57:42] <huon> I guess keeping a stack and then searching that stack for the first expr with a sensible span works too
[04:57:43] *** Joins: luz (lu.cy@moz-CD18B14B.customer.cdi.no)
[04:57:56] <huon> (that's basically what my idea is, but just keeping that span, rather than the whole stack)
[04:58:21] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Connection reset by peer)
[04:58:36] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[05:00:46] <cmr> I think I'll open an issue for feedback
[05:04:00] *** Joins: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP)
[05:04:00] <ghrust> [13rust] 15cmr 04force-pushed 06try from 14ce54655 to 14f64fdf5: 02http://git.io/k471pw
[05:04:00] <ghrust> 13rust/06try 148ddd5f5 15Corey Richardson: Remove libc from std...
[05:04:00] <ghrust> 13rust/06try 14301dd7a 15Corey Richardson: fix fallout from std::libc separation
[05:04:00] <ghrust> 13rust/06try 14c258f5c 15Corey Richardson: Add unrecognized_lint
[05:04:02] *** Parts: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP) ()
[05:12:30] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[05:13:01] *** Quits: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca) (Quit: canhtak)
[05:24:42] *** Joins: edwardw (Mibbit@EE646FE3.EE06708D.4BFBD933.IP)
[05:30:30] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[05:31:59] *** Joins: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP)
[05:31:59] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/7gUOEA
[05:31:59] *** Parts: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP) ()
[05:41:51] *** Joins: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP)
[05:41:51] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/V7WKLA
[05:41:51] *** Parts: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP) ()
[05:41:52] *** Joins: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP)
[05:41:52] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/NfitIQ
[05:41:52] <ghrust> 13rust/06auto 14f1739b1 15Sean McArthur: serialize: use Result...
[05:41:52] <ghrust> 13rust/06auto 147be2aa1 15bors: auto merge of #13107 : seanmonstar/rust/encoder-errors, r=erickt...
[05:41:52] *** Parts: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP) ()
[05:42:43] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Max SendQ exceeded)
[05:43:02] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[05:44:00] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Connection reset by peer)
[05:44:39] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[05:46:17] <sfackler> wow, stripping most of the failure from rust-postgres cut the rlib size from 11MB to 6.6MB
[05:47:00] <cmr> yeah.
[05:47:03] <cmr> failure isn't small
[05:47:23] <sfackler> the .so only changed by a couple hundred kb interestingly
[05:47:26] <strcat> sfackler: probably still has failure through libstd
[05:48:11] <strcat> (division, indexing, etc.)
[05:49:45] <cmr> Oh lord
[05:49:55] <cmr> syntax and rustc show up in the std doc search.
[05:49:58] <cmr> that's miserable.
[05:53:01] *** Joins: zimbabao (rajaram@47769425.AE842F9B.81C3DAA1.IP)
[05:58:42] * ChrisMorgan thinks cross-crate search results should only appear after the current crate's results, with an obvious heading in between
[05:58:52] <cmr> agree
[05:58:53] <ChrisMorgan> "Results from other crates:"
[06:11:57] *** Joins: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP)
[06:11:57] <ghrust> [13rust] 15bors 04force-pushed 06auto from 147be2aa1 to 1422a04ce: 02http://git.io/N3iJvQ
[06:11:58] *** Parts: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP) ()
[06:11:59] *** Joins: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP)
[06:11:59] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/BdaIYw
[06:11:59] <ghrust> 13rust/06auto 145744556 15Michael Darakananda: Added lint for #[deriving] structs and enums with unsafe pointers. #13032.
[06:11:59] <ghrust> 13rust/06auto 145a68892 15bors: auto merge of #13108 : pongad/rust/lintraw, r=huonw...
[06:11:59] *** Parts: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP) ()
[06:23:56] *** Joins: NiccosSystem (NiccosSyst@moz-ED196BB4.customer.lyse.net)
[06:43:38] *** Quits: ChrisMorgan (chris@moz-8DCBEA52.vic.adsl.internode.on.net) (Ping timeout)
[07:02:47] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[07:21:57] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[07:21:57] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/BdaIYw
[07:21:57] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[07:26:54] *** Joins: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP)
[07:26:54] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/o5dnkQ
[07:26:54] <ghrust> 13rust/06auto 14f1739b1 15Sean McArthur: serialize: use Result...
[07:26:54] <ghrust> 13rust/06auto 14ff64381 15bors: auto merge of #13107 : seanmonstar/rust/encoder-errors, r=erickt...
[07:26:54] *** Parts: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP) ()
[07:26:58] *** Joins: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP)
[07:26:58] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/HGUBbg
[07:26:58] *** Parts: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP) ()
[07:28:21] <klutzy> $ rustc -v
[07:28:26] <klutzy> host: x86_64-w64-mingw32
[07:28:31] <klutzy> :)
[07:28:58] <klutzy> with vadim's patches and some msys2-specific local patches
[07:29:07] <klutzy> unwinding still doesn't work though
[07:29:26] <cmr> who needs unwinding
[07:31:34] <klutzy> not I now :p
[07:36:09] *** Joins: eddyb (eddy@F8B50789.F33C1089.FB866788.IP)
[07:40:28] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[07:46:01] *** McPherrin is now known as mcpherrin
[07:50:43] <eddyb> why does TyPath have an interior ID?
[07:55:57] <cmr> it seems to be used all around
[07:56:16] <eddyb> correct answer is "reasons" (unknown)
[07:56:30] <eddyb> I so wish we have a move_map right now
[07:56:38] <eddyb> (move_iter + map + collect)
[07:57:20] *** Joins: Nekit1234007 (Nekit12340@DEC494C7.E25DEE64.4707F662.IP)
[08:03:53] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[08:05:03] *** flaper87|afk is now known as flaper87
[08:07:25] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[08:07:50] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[08:08:49] *** Quits: edwardw (Mibbit@EE646FE3.EE06708D.4BFBD933.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[08:09:44] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[08:14:50] <eddyb> Generics {ty_params, lifetimes}: Generics
[08:15:09] <eddyb> I wish I didn't have to write the type when I have a structure pattern :S
[08:15:26] <eddyb> works nicely in closures, not so much in functions
[08:22:50] *** Joins: Zr40 (zr40@EE4BB9F5.926C319A.BE2F4011.IP)
[08:23:05] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:23:39] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:23:39] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:24:19] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:25:36] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:25:50] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[08:25:51] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:36:49] *** Joins: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP)
[08:36:49] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/o5dnkQ
[08:36:49] *** Parts: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP) ()
[08:39:46] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:41:52] *** Joins: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP)
[08:41:52] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/k92_8w
[08:41:52] *** Parts: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP) ()
[08:41:52] *** Joins: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP)
[08:41:52] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/RDBSgg
[08:41:52] <ghrust> 13rust/06auto 1407aae2a 15Alex Crichton: native: Use WNOHANG before signaling...
[08:41:52] <ghrust> 13rust/06auto 141ecb9d0 15bors: auto merge of #13131 : alexcrichton/rust/issue-13124, r=brson...
[08:41:53] *** Parts: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP) ()
[08:43:48] *** Joins: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se)
[08:57:38] <eddyb> cmr: https://github.com/mozilla/rust/issues/13175#issuecomment-38899056
[08:58:18] <eddyb> which is, uhm, kinda more elegant than a stack of expressions
[08:59:22] *** Joins: eibwen (kvirc@moz-565A1408.dip0.t-ipconnect.de)
[08:59:38] <eddyb> cmr: https://github.com/cmr/rust/commit/d46026366ec976fe4bca2dce5862a92a6c6716cd#diff-d1609daffc6be5b1e5e7158c0f8109deR373
[09:00:02] <eddyb> cmr: best practices is to call ty::get in the smallest scope you need its result (because it's unsafe)
[09:00:30] <cmr> eddyb: does it really matter? the tcx isn't ever going to be dropped.
[09:00:44] <eddyb> and it helps future refactorings if all accesses are of the form ty::get(t).sty
[09:00:58] <cmr> ok, that it more pursuasive.
[09:01:49] <eddyb> I actually thought you're doing something more complicated with in_type_ and out_type_
[09:02:43] <eddyb> cmr: doesn't ref_id do what you added with node?
[09:03:04] <cmr> yes actually.
[09:03:08] <cmr> just noticing that now.
[09:03:17] <eddyb> not sure why I didn't remove the Option around it, but you should be able to do it
[09:03:25] <cmr> well, not quite
[09:03:32] <cmr> that Option is useful.
[09:03:33] <eddyb> like, if you can have that node, you can always have a ref_id
[09:03:38] <eddyb> cmr: for?
[09:03:46] <cmr> eddyb: where it doesn't exist.
[09:03:51] <cmr> or it's from a method call
[09:04:05] <cmr> it doesn't exist if the function being monomorphized is from metadata.
[09:04:05] <eddyb> intrinsics can't be method calls
[09:04:20] <eddyb> it should exist :/
[09:07:18] <cmr> erm, I was thinking about the span, sorry.
[09:07:23] <cmr> no idea about that node
[09:07:49] <eddyb> well, there will be a span for inlined items
[09:08:02] <eddyb> not sure what exactly it uses, but you will get a span
[09:08:11] <cmr> ok, DUMMY_SP doesn't count
[09:08:24] <cmr> (which is what it uses)
[09:08:28] <eddyb> astencode is responsible for creating the spans
[09:08:30] <eddyb> cmr: aww
[09:08:55] <eddyb> cmr: you can print the path of the expression
[09:09:09] <cmr> the expression is in std::cast
[09:09:13] <eddyb> that should be enough, I would think
[09:09:15] <cmr> that doesn't really help.
[09:09:24] <eddyb> cmr: uhm, no
[09:09:29] <eddyb> the path includes functions
[09:09:42] <cmr> which path are you refering to?
[09:09:48] <eddyb> the ast_map path
[09:09:54] <cmr> of what?
[09:10:06] <eddyb> which you can get from the same ID
[09:10:19] <eddyb> cmr: ref_id
[09:10:24] <cmr> the node id is of the call to the intrinsic in std::cast::transmute
[09:10:45] <eddyb> wait, uhm
[09:11:04] <eddyb> cmr: so you want the expression that called std::cast::transmute which is a wrapper?
[09:11:14] <cmr> of course I do :P
[09:11:25] <eddyb> the solution is to stop having so many wrappers
[09:11:36] <cmr> that's a cop-out for bad error messages.
[09:11:51] <cmr> yes, rfc #8 will fix this for direct calls to transmute.
[09:12:21] <eddyb> cmr: instead of expressions you could have a monomorphization stack
[09:12:34] <eddyb> if you want C++-like errors
[09:13:15] <eddyb> cmr: we already have some form of tracking in monomorphize to limit infinite recursion and other things
[09:13:44] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Max SendQ exceeded)
[09:14:07] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[09:14:29] <cmr> eddyb: you're right, the monomorphization stack would be more accurate.
[09:14:33] <eddyb> invalid transmute (from std::cast::transmute<&T, &mut T> from my_transmute<&mut T> from foobar)
[09:15:20] <eddyb> can show spans for each ref_id that triggered monomorphization etc.
[09:15:35] <eddyb> cmr: things like these make me want to enforce it at the type level
[09:15:58] <cmr> well
[09:16:15] <cmr> my battery is almost dead
[09:16:16] <eddyb> <T, U: TransmutableFrom<T>>
[09:16:20] <cmr> which means it's time for me to sleep.
[09:16:25] <eddyb> night :)
[09:16:46] <cmr> but I'm not sure type predicates are necessarily the best solution here.
[09:16:53] *** Joins: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP)
[09:16:53] <ghrust> [13rust] 15bors 04force-pushed 06auto from 141ecb9d0 to 14ff64381: 02http://git.io/N3iJvQ
[09:16:53] *** Parts: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP) ()
[09:16:53] *** Joins: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP)
[09:16:54] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/HOMMzQ
[09:16:54] <ghrust> 13rust/06auto 140063504 15Brian Anderson: rustdoc: Display rust logo again. Closes #13148
[09:16:54] <ghrust> 13rust/06auto 14b6ea796 15bors: auto merge of #13149 : brson/rust/rustdoclogo, r=alexcrichton
[09:16:54] *** Parts: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP) ()
[09:17:01] <cmr> in particular I'm not convinced they buy you better error messages
[09:17:18] <eddyb> cmr: why?
[09:17:39] <eddyb> the error is automatically triggered at the monomorphization boundary, not at the deepest level
[09:18:03] <eddyb> and you can give reasons for why it's not satisfied, like kinds
[09:18:16] <eddyb> can even do it deeply
[09:18:28] <cmr> ah I see what you mean now
[09:18:31] <eddyb> (&T, &U) -> (&mut T, &mut U) should be invalid
[09:18:39] <cmr> yes.
[09:18:44] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Max SendQ exceeded)
[09:18:59] <eddyb> but you need some trans information (adt, mostly)
[09:19:20] <cmr> just sizes right?
[09:20:03] <eddyb> cmr: if you do fancier analysis, you need the offsets of each field
[09:20:07] <eddyb> like the tuple example above
[09:20:23] <cmr> oh you're going in that direction.
[09:20:33] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[09:20:36] <cmr> I contemplated that but decided that would make transmute too neutered.
[09:20:39] <eddyb> but that's all optional
[09:20:55] <eddyb> I want a Pod kind
[09:21:07] <cmr> so transmute wouldn't require U: TransmutableInto<T> ?
[09:21:20] <eddyb> cmr: assuming T -> U
[09:21:21] <cmr> also we have one?
[09:21:28] <eddyb> cmr: not Copy ;)
[09:21:43] <eddyb> Pod as in really plain data (no pointers or ranged values)
[09:21:51] <eddyb> (no padding either)
[09:22:19] <cmr> so just plain product of primitives?
[09:22:20] <eddyb> f32 -> u32 should be safe, for example
[09:22:24] <eddyb> cmr: mhmm
[09:22:45] <eddyb> &[u8] -> &[RGB] etc.
[09:23:26] <eddyb> language-level endian safety would be crazy, but probably worth it
[09:26:25] *** Quits: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net) (Quit: Sharp)
[09:33:12] <cmr> I think I might implement sizeof tomorrow.
[09:33:33] <cmr> that'd be nice to have on the State of Rust
[09:34:33] <flaper87> strcat: around? r? https://github.com/mozilla/rust/pull/13160 (I had to rebase)
[09:35:09] <eddyb> cmr: an operator?
[09:35:12] <flaper87> strcat: thanks :)
[09:35:22] <cmr> eddyb: yes
[09:35:29] <cmr> rusti: sizeof int
[09:35:29] -rusti- <anon>:10:9: 10:15 error: `sizeof` is a reserved keyword
[09:35:29] -rusti- <anon>:10         sizeof int
[09:35:29] -rusti-                   ^~~~~~
[09:35:30] -rusti- application terminated with error code 101
[09:35:39] <eddyb> not sure how I feel about it
[09:40:18] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[09:44:12] <eddyb> doener: can I ask you for a favor?
[09:44:29] <doener> what is it?
[09:44:35] <eddyb> doener: now that you got bool working as i1, can Option<()> or Result<(), ()> use u1 as well?
[09:44:38] <eddyb> via trans::adt
[09:44:47] <eddyb> then we can remove bool from the language and put it in std
[09:46:05] <eddyb> doener: i1 not u1 :P
[09:46:38] <doener> hm, shouldn't be too hard I guess
[09:47:02] <eddyb> I don't think you need to add a new representation
[09:47:23] <eddyb> just handle a CLike with a discriminator repr of one bit
[09:47:32] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: rcirc on GNU Emacs 24.3.1)
[09:47:52] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[09:48:25] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: rcirc on GNU Emacs 24.3.1)
[09:48:42] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[09:48:42] *** ChanServ sets mode: +o pnkfelix
[09:57:14] <cmr> So...
[09:57:28] <cmr> nvm
[09:58:08] <eddyb> cmr: dat battery
[09:58:32] <cmr> I was at 20%
[09:58:37] <cmr> :p
[09:59:07] <cmr> but feh
[09:59:11] <cmr> g'night
[10:00:12] *** Quits: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se) (Quit: mediocrity)
[10:00:43] <eddyb> cmr: P passes borrowck
[10:00:57] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Max SendQ exceeded)
[10:01:18] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[10:01:40] <eddyb> wait, no, that was match checking :/
[10:01:48] <eddyb> 312 errors
[10:04:57] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Max SendQ exceeded)
[10:05:17] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[10:06:04] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Max SendQ exceeded)
[10:06:44] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[10:07:12] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Max SendQ exceeded)
[10:07:45] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[10:09:17] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Max SendQ exceeded)
[10:10:03] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[10:10:25] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Max SendQ exceeded)
[10:10:54] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[10:15:23] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[10:19:58] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Max SendQ exceeded)
[10:20:24] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[10:21:04] *** Joins: bvssvni (Mibbit@moz-A47B6F8E.bb.online.no)
[10:24:31] *** flaper87 is now known as flaper87|afk
[10:42:43] *** flaper87|afk is now known as flaper87
[10:43:57] <doener> eddyb: https://gist.github.com/dotdash/223eb1a91dab4941e982
[10:44:37] <eddyb> doener: OMG OMG OMG
[10:44:57] <eddyb> doener: does it work for Option<()>?
[10:45:14] <eddyb> or Result<(), ()>?
[10:45:27] <doener> let me try
[10:45:49] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[10:46:04] <doener> uh, wait, no need too. That's a different code path which I didn't touch
[10:46:18] <eddyb> aww :(
[10:53:43] <strcat> doener: ;)
[10:54:31] <doener> eddyb: https://github.com/dotdash/rust/commit/529c4c9e98558bb99b74021886cb831fa07fbdcc
[10:55:28] <eddyb> doener: hang on, you actually added u1 in the type system?
[10:55:49] <eddyb> can you use it as a type?
[10:56:06] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[10:56:49] <doener> eddyb: the way "repr" is implemented needs an IntType for the chosen repr, so I had to add that (short of rewriting the "repr" handling ;-))
[10:56:51] <eddyb> doener: I think you still need to change trans::adt to use that when the discriminant fits in one bit
[10:57:00] <doener> eddyb: yeah
[10:57:20] <eddyb> enum bool {false, true} should work without the explicit values and repr
[10:57:23] <eddyb> doener: but good job :D
[10:58:03] <doener> eddyb: you can't use u1 in code, deliberately didn't made the parser recognize that
[10:58:48] <doener> eddyb: the explicit values are from back when I first implemented it with i1 instead of u1, which failed miserably, because of the sign extension when the value gets converted to i64 internally
[10:59:03] <eddyb> it's not in the parser, it's in resolve
[10:59:15] <eddyb> but I guess you didn't touch it so it's fine
[10:59:27] <eddyb> doener: hah
[11:03:05] <eddyb> doener: I actually had i1 in my disassembler project thingie
[11:03:13] <eddyb> doener: {0, -1} behaves oddly
[11:05:33] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[11:08:24] <eddyb> what's up with bors?
[11:09:20] *** Parts: kimundi (kimundi@moz-F76B25A2.dip0.t-ipconnect.de) (leaving)
[11:09:40] *** Joins: kimundi (kimundi@moz-F76B25A2.dip0.t-ipconnect.de)
[11:13:32] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[11:16:37] *** Joins: cgaebel (clark@moz-F9D89110.nyc.res.rr.com)
[11:21:48] *** Joins: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP)
[11:21:48] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/HOMMzQ
[11:21:48] *** Parts: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP) ()
[11:23:32] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[11:25:02] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[11:25:05] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[11:26:44] *** Joins: aurynj (Eon@C498BDEC.C264657C.C6282BC4.IP)
[11:26:51] *** Joins: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP)
[11:26:51] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/arRHRA
[11:26:51] *** Parts: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP) ()
[11:26:53] *** Joins: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP)
[11:26:53] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/j_mISA
[11:26:53] <ghrust> 13rust/06auto 144d6c47b 15Tomas Sedovic: Derive TotalEq for std::intrinsics::TypeId...
[11:26:53] <ghrust> 13rust/06auto 14794ee03 15bors: auto merge of #13154 : tomassedovic/rust/patch-1, r=alexcrichton...
[11:26:53] *** Parts: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP) ()
[11:26:55] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[11:27:02] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[11:30:04] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[11:31:02] *** Joins: gimpf (gimpf@moz-B34F13A9.adsl.highway.telekom.at)
[11:31:57] <huon> doener, eddyb: couldn't adt actually chose i1, i2, i3, ... based on the exact ranges of the discriminants?
[11:32:01] <huon> *choose
[11:32:09] <huon> (I guess anything beyond i1 has limited returns)
[11:58:01] *** Quits: zimbabao (rajaram@47769425.AE842F9B.81C3DAA1.IP) (Ping timeout)
[11:58:43] *** Joins: sunfish (chatzilla@8F761026.B5EF4AF6.E96CA9D8.IP)
[12:11:44] *** Quits: sunfish (chatzilla@8F761026.B5EF4AF6.E96CA9D8.IP) (Ping timeout)
[12:14:40] *** Joins: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca)
[12:15:12] <doener> huon: given the current implementation, you have to define each possible type with its usable range. Probably not worth the effort
[12:18:09] *** Joins: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se)
[12:19:43] <huon> doener: I guess so (I think we do range asserts on the discriminants anyway, so the additional stuff probably doesn't help)
[12:22:58] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[12:26:17] <eddyb> huon: I think the new folding will produce better IDs
[12:26:29] <huon> eddyb: what's bad about our current ones?
[12:26:36] <eddyb> not always post-order
[12:27:13] <eddyb> expressions have their ID after their sub-expressions' for example
[12:27:36] <huon> strcat: ben noordhuis wasn't asking about signing :)
[12:28:18] <strcat> huon: a gpg signature is just a checksum with authentication
[12:28:22] <huon> strcat: also, I don't think the checked-indexing thread will go anywhere with people who fundamentally wish to just subvert the whole `unsafe` system
[12:28:59] <strcat> doesn't mean they should be left in an echo chamber
[12:29:03] <huon> strcat: oh, but... the checksum was for download-corruption purposes, not authentication? (i.e. sha256sum *.gz) would work
[12:29:12] <huon> yup, it's annoying :(
[12:29:13] <strcat> huon: yeah, but why not sign it? brson has a key available
[12:29:28] <strcat> I don't think that install script changes without manual intervention, maybe I'm wrong
[12:29:31] <huon> eddyb: isn't that exactly post-order?
[12:30:03] <huon> eddyb: (i.e. expressions having their id after subexpressions)
[12:30:20] <huon> eddyb: or are you saying that we currently don't have that property of expressions?
[12:30:40] <eddyb> huon: oops I was thinking of pre-order
[12:30:48] <eddyb> huon: I shouldn't use fancy terms >_>
[12:31:10] <eddyb> huon: fold.rs used to be all over the place
[12:31:11] <huon> eddyb: heh, I always have to think twice to remember which one's which
[12:31:21] <eddyb> I'm trying to at least have id, node, span
[12:31:52] <eddyb> (if anything, it makes ast_map do less redundant fills)
[12:34:13] <eddyb> like 10 mails in the discussion and I haven't heard anything about elisions yet
[12:34:22] <eddyb> only random access needs bound checking
[12:34:55] <eddyb> and random access usually comes from *user input* which means turning checking off will make your program vulnerable
[12:35:01] <eddyb> it's really that simple
[12:36:48] <doener> eddyb: btw, what would Option<()> being i1 gain us?
[12:37:19] <eddyb> doener: I don't know of an example right now
[12:37:36] <eddyb> doener: I guess, maybe ast::Mutability? but that doesn't have anything inside its variants
[12:38:08] <eddyb> doener: meh, it's just nice to have things isomorphic to booleans being optimized just as well
[12:38:43] <eddyb> doener: maybe Option<T>'s discriminator should be i1 in general?
[12:38:49] <huon> eddyb: you sometimes need indexing because you're modifying some elements while iterating over the whole vector
[12:39:08] <huon> (i.e. elements other than the one that's currently indexed.)
[12:40:11] <eddyb> huon: it's either random access (in which case you're vulnerable without checks) or deterministic (in which case you either get elision or you can wait for a superoptimizer)
[12:41:13] <eddyb> huon: mailing list makes me sad
[12:41:18] <eddyb> that's why I don't read it often
[12:41:55] *** Joins: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP)
[12:41:55] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/j_mISA
[12:41:55] *** Parts: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP) ()
[12:42:03] <doener> eddyb: that would work by using repr, but Option<()> is still { i1, [0 x i1], [0 x i8] } then. And removing the zero-length fields would take some effort
[12:42:20] <eddyb> that sounds like an issue
[12:42:32] <eddyb> doener: can't the repr be deduced?
[12:42:50] <eddyb> right now it should be u8 for Option<T>
[12:42:53] <doener> eddyb: just added U1 to range_to_inttype
[12:42:59] <doener> building...
[12:43:01] <eddyb> nice :)
[12:43:15] <eddyb> are those two fields padding and content?
[12:43:44] <eddyb> why do we output them when they're 0 length? to make it simpler to access the fields later?
[12:44:16] <eddyb> "In fact I think I'm quite clever" ohh strcat
[12:44:53] <doener> eddyb: The constructor for Some(()) will want to store () to the field, so it needs something to get a pointer to
[12:45:14] <strcat> I'm not really sure what I wrote, I'm really tired
[12:45:24] <strcat> I hope it's sensible and that I didn't call anyone a horse
[12:45:26] <eddyb> strcat: don't worry, it's accurate
[12:45:35] <doener> eddyb: that's what I meant by "would take some effort". I tried to have it turn Option<()> into a CEnum, but then trans_field_ptr explodes
[12:45:46] <eddyb> CLike you mean?
[12:45:51] <eddyb> unless the names have changed
[12:46:01] <huon> strcat: calling people horses is the most productive use of a ML though
[12:46:04] <eddyb> doener: it should use Ignore though
[12:46:05] <doener> the Repr variant is CEnum
[12:46:48] *** Joins: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP)
[12:46:48] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/KUv15A
[12:46:48] *** Parts: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP) ()
[12:46:49] *** Joins: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP)
[12:46:49] <ghrust> [13rust] 15bors pushed 4 new commits to 06auto: 02http://git.io/cal2ZA
[12:46:49] <ghrust> 13rust/06auto 14ae213a7 15Huon Wilson: std: migrate the errno -> IoError converter from libnative....
[12:46:49] <ghrust> 13rust/06auto 14a41887d 15Huon Wilson: rand: bubble up IO errors when creating an OSRng.
[12:46:50] <ghrust> 13rust/06auto 143411031 15Huon Wilson: rand: bubble up IO messages futher....
[12:46:52] *** Parts: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP) ()
[12:48:01] <huon> cgaebel: s/double/f64/ for Rust :P
[12:48:12] <eddyb> "Yes. Rust is just like hair salon that forbids you from setting your own hair on fire."
[12:48:42] <huon> (also, the thing that corresponds to const double* in C most closely would be &[f64], rather than Vec<f64>)
[12:48:45] * huon nitpicks
[12:49:04] <strcat> it doesn't help that thunderbird decides to output 20 autosaved drafts and puts them in gmail's sent mail so I don't know what I actually sent
[12:49:10] * strcat has to look in gmail :|
[12:51:36] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[12:59:26] <doener> eddyb: yeah, deducing i1 works
[13:01:09] <doener> (updated the eddyb hackery commit on my i1_bool branch)
[13:01:56] *** Joins: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP)
[13:01:56] <ghrust> [13rust] 15bors 04force-pushed 06auto from 1455508c6 to 14794ee03: 02http://git.io/N3iJvQ
[13:01:56] *** Parts: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP) ()
[13:01:58] *** Joins: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP)
[13:01:58] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/iK_b4A
[13:01:58] <ghrust> 13rust/06auto 14ad12f32 15Alex Crichton: native: Ignore SIGPIPE by default...
[13:01:58] <ghrust> 13rust/06auto 143be44e9 15bors: auto merge of #13158 : alexcrichton/rust/issue-13123, r=brson...
[13:01:58] *** Parts: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP) ()
[13:02:49] <eddyb> doener: that one line in adt?
[13:04:13] <doener> eddyb: yup
[13:04:39] <eddyb> doener: you added an u1 leaf in reflect?
[13:04:52] <eddyb> that it will be fun when it breaks
[13:04:56] <eddyb> s/it//
[13:05:20] <eddyb> do we need bool for anything?
[13:05:33] <eddyb> within the compiler, that is. and I meant ty_bool
[13:05:43] <eddyb> I guess the result of certain expressions
[13:06:34] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[13:06:47] <doener> eddyb: I just blindly grep'ed for TyI8 and added TyI1 everywhere
[13:06:57] <doener> or rather TyU1 now 
[13:07:08] <doener> except for resolve
[13:18:58] *** Joins: zimbabao (rajaram@31A794DB.867BB49C.BE4CF869.IP)
[13:26:47] *** Joins: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP)
[13:26:47] <ghrust> [13rust] 15bors 04force-pushed 06auto from 143be44e9 to 14794ee03: 02http://git.io/N3iJvQ
[13:26:47] *** Parts: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP) ()
[13:26:48] *** Joins: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP)
[13:26:48] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/y8WiXw
[13:26:48] <ghrust> 13rust/06auto 1481ec1f3 15Flavio Percoco: Rename Pod into Copy...
[13:26:48] <ghrust> 13rust/06auto 14b8601a3 15bors: auto merge of #13160 : FlaPer87/rust/rename-pod, r=thestinger...
[13:26:49] *** Parts: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP) ()
[13:27:09] <eddyb> nice
[13:28:17] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[13:28:51] *** Quits: zv (zv@moz-955F83E9.hsd1.ca.comcast.net) (Ping timeout)
[13:30:08] *** Joins: zv (zv@moz-955F83E9.hsd1.ca.comcast.net)
[13:50:14] *** Quits: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca) (Quit: canhtak)
[13:53:44] <eddyb> is there anything better than v.move_iter().next().unwrap() to move out of the first element of a vector?
[13:59:46] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[14:01:44] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[14:02:46] <pnkfelix> eddyb: shift ?
[14:03:02] <pnkfelix> eddyb: (or maybe unshift() ... i forget which is which)
[14:03:16] <eddyb> oh, pop would work
[14:03:35] *** Joins: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca)
[14:03:45] <eddyb> but I'd rather want &move [T] operations
[14:04:08] <pnkfelix> eddyb: I'm confused, I thought you wanted the first element
[14:04:13] <pnkfelix> eddyb: pop() gives you the last
[14:04:17] <eddyb> pnkfelix: the only element
[14:08:15] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[14:08:50] *** Joins: edwardw (Mibbit@E7CEB7EA.EE06708D.4BFBD933.IP)
[14:11:48] *** Quits: edwardw (Mibbit@E7CEB7EA.EE06708D.4BFBD933.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:17:04] <kimundi> eddyb: v.move_iter().nth(0) ?
[14:17:10] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[14:17:15] <kimundi> wait, thats still a option...
[14:17:15] <eddyb> kimundi: thanks, that's nicer
[14:17:20] <eddyb> no, it's okay
[14:22:06] *** Joins: sunfish (chatzilla@8F761026.B5EF4AF6.E96CA9D8.IP)
[14:24:12] <TheHydroImpulse> Has there been any implementation dicussions (i.e., what needs to be done) on higher-kinded types yet?
[14:25:03] <erickt> hey folks, I was just going to start an issue to remove RefCell::get because of it's surprising behavior to actually perform a clone. Should this be an RFC b/c it's a major std structure?
[14:26:06] *** Quits: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca) (Quit: canhtak)
[14:27:44] <eddyb> rusti: bar.baz
[14:27:45] -rusti- <anon>:10:9: 10:12 error: unresolved name `bar`.
[14:27:45] -rusti- <anon>:10         bar.baz
[14:27:45] -rusti-                   ^~~
[14:27:45] -rusti- error: aborting due to previous error
[14:27:45] -rusti- application terminated with error code 101
[14:27:48] <eddyb> bleah
[14:27:54] <eddyb> rusti: &(0+1)
[14:27:54] -rusti- 1
[14:27:58] <eddyb> :/
[14:29:07] <erickt> TheHydroImpulse: If I recall correctly, nmatsakis said a week or so ago that there has not been any real plans made for HKT yet
[14:29:59] <TheHydroImpulse> erickt cool, thanks.
[14:30:58] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Quit: ì „ ì´ë§Œ ê°‘ë‹ˆë‹¤.)
[14:35:44] *** Joins: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net)
[14:42:33] *** Joins: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca)
[14:42:35] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[14:47:45] *** Quits: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net) (Ping timeout)
[14:48:10] *** Joins: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net)
[14:59:37] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[15:01:59] *** Joins: edwardw (edwardw@96096B9B.3A7E5B9F.CBB0B5C2.IP)
[15:06:47] *** Joins: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP)
[15:06:47] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/y8WiXw
[15:06:47] *** Parts: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP) ()
[15:07:56] *** Joins: victorporof (victorporo@13F2CEC5.7672369.D8E68FF6.IP)
[15:09:45] *** Quits: Nekit1234007 (Nekit12340@DEC494C7.E25DEE64.4707F662.IP) (Ping timeout)
[15:10:12] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[15:11:48] *** Joins: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP)
[15:11:48] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/7AHOGA
[15:11:48] *** Parts: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP) ()
[15:13:24] *** Joins: cornelius (Mibbit@moz-F87A2DAF.gae.googleusercontent.com)
[15:13:27] *** Quits: cornelius (Mibbit@moz-F87A2DAF.gae.googleusercontent.com) (Quit: cornelius)
[15:16:45] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[15:16:45] <ghrust> [13rust] 15bors pushed 6 new commits to 06auto: 02http://git.io/jCfIlg
[15:16:45] <ghrust> 13rust/06auto 140738567 15Eduard Burtescu: Used inherited mutability in lexer::Reader.
[15:16:45] <ghrust> 13rust/06auto 1435704b1 15Eduard Burtescu: De-@ TokenTree.
[15:16:45] <ghrust> 13rust/06auto 149bd28e2 15Eduard Burtescu: De-@ NamedMatch.
[15:16:47] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[15:19:32] <eddyb> nice :). I still haven't finished the P stuff, but I'm done with the bulk of it
[15:21:17] *** Quits: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se) (Quit: mediocrity)
[15:22:22] <eddyb> bleah, have to redesign a few things in expansion
[15:23:45] <eddyb> okay, combine_substructure can have ownership, that's nice
[15:25:03] *** Quits: ggherdov_ (sid11402@moz-E77DEB21.irccloud.com) (Ping timeout)
[15:25:30] *** Joins: ggherdov_ (sid11402@moz-E77DEB21.irccloud.com)
[15:28:44] *** Quits: sunfish (chatzilla@8F761026.B5EF4AF6.E96CA9D8.IP) (Ping timeout)
[15:28:47] *** Joins: Nekit1234007 (Nekit12340@DEC494C7.E25DEE64.4707F662.IP)
[15:29:23] *** Quits: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP) (Ping timeout)
[15:30:35] *** Joins: Yurumechan (23f9939a@B2F514.E4420F21.EEF52F3A.IP)
[15:33:07] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[15:33:25] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[15:35:55] *** Quits: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca) (Quit: canhtak)
[15:37:22] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[15:37:45] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[15:39:28] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[15:40:52] *** Joins: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca)
[15:41:14] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.3)
[15:41:36] <eddyb> no, I can't :(
[15:42:22] <flaper87> acrichto: the s/Pod/Copy/ patch landed, are you going to create a new snapshot? Otherwise, I can help
[15:42:29] <eddyb> this might cause needless copying during expansion
[15:42:35] <eddyb> which could be pruned by cfg2
[15:43:48] <acrichto> flaper87: feel free
[15:46:37] *** Joins: victorporof_ (victorporo@13F2CEC5.7672369.D8E68FF6.IP)
[15:47:27] *** Quits: victorporof (victorporo@13F2CEC5.7672369.D8E68FF6.IP) (Ping timeout)
[15:48:29] <eddyb> oi, I just had a good idea :D
[15:48:48] <eddyb> huon: pre-expansion AST shouldn't have NodeId's
[15:48:49] *** Joins: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP)
[15:48:49] <ghrust> [13rust] 15FlaPer87 merged 06master into 06snap-stage3: 02http://git.io/ivyAdg
[15:48:49] *** Parts: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP) ()
[15:49:03] <eddyb> flaper87 has commit access?
[15:49:16] * eddyb feels compelled to go through the process himself
[15:49:35] *** Joins: intuxicated (intuxicate@3AEA5E5.FBDFAF77.BD3E1BB3.IP)
[15:50:05] <eddyb> huon: we could, uhm, intern AST nodes at various points, and only expand them later
[15:50:16] <eddyb> huon: I guess pre-mapping AST doesn't have NodeId's at all
[15:51:27] <eddyb> also, ty::ctxt<'tcx> can have arena: &'tcx Arena<t_box_> and map: ast_map::Map<'tcx> which would hold 'tcx references to the AST
[15:51:37] <eddyb> that should be safe
[15:51:55] <eddyb> but I can't do that until I clean up the PR which makes tcx use an arena
[15:52:22] <flaper87> eddyb: this is like the first time I've actually used them
[16:01:07] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[16:01:07] *** ChanServ sets mode: +ao dherman dherman
[16:07:28] *** Quits: Zr40 (zr40@EE4BB9F5.926C319A.BE2F4011.IP) (Quit: leaving)
[16:12:17] *** Quits: edwardw (edwardw@96096B9B.3A7E5B9F.CBB0B5C2.IP) (Ping timeout)
[16:12:48] *** Joins: edwardw (edwardw@BB690835.D7DB55D8.50B134B9.IP)
[16:14:06] *** Joins: nielsle (nielsle@moz-C46DA772.boa.fiberby.dk)
[16:16:28] *** Joins: TimAbraldes (quassel@moz-7FD19BDC.hsd1.or.comcast.net)
[16:21:06] <erickt> acrichto: r? https://github.com/mozilla/rust/pull/13183. It removes list::List
[16:21:25] <eddyb> erickt: the one someone spent a lot of time refactoring?
[16:21:32] <erickt> that was me!
[16:22:24] <eddyb> erickt: I was thinking of abinader(?)
[16:22:45] <erickt> oh? *checks the PR log
[16:23:00] <eddyb> maybe I'm misremembering
[16:23:09] <erickt> eddyb: are you thinking of DList?
[16:23:21] <eddyb> pretty sure it was List
[16:24:11] <eddyb> erickt: https://github.com/mozilla/rust/pull/12348
[16:24:13] <erickt> this? https://github.com/mozilla/rust/issues/12620
[16:24:21] <eddyb> I'm not going crazy :)
[16:24:51] <erickt> heh
[16:25:41] <erickt> eddyb: and yeah, it is removing his hard work :(
[16:26:01] <erickt> eddyb: it was talked about in https://github.com/mozilla/rust/wiki/Meeting-weekly-2014-03-25
[16:26:06] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[16:26:14] <eddyb> yeah, I know
[16:27:01] <erickt> we really need to start a libpersistent
[16:28:31] <eddyb> acrichto: r? https://github.com/mozilla/rust/pull/13170 fixed tests
[16:31:13] *** Quits: edwardw (edwardw@BB690835.D7DB55D8.50B134B9.IP) (Quit: Leaving...)
[16:31:50] *** Joins: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP)
[16:31:50] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14be44f8d to 14b8601a3: 02http://git.io/N3iJvQ
[16:31:50] *** Parts: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP) ()
[16:32:40] *** Joins: edwardw (edwardw@C3D32C6E.E4C8743.30C05AB6.IP)
[16:38:14] *** Quits: eddyb (eddy@F8B50789.F33C1089.FB866788.IP) (Ping timeout)
[16:46:52] *** Joins: huhlig (sid17687@moz-A42E5B7B.irccloud.com)
[16:55:19] *** Quits: zimbabao (rajaram@31A794DB.867BB49C.BE4CF869.IP) (Ping timeout)
[16:55:41] *** Quits: doener (doener@moz-C68F600D.unity-media.net) (Quit: leaving)
[17:01:46] *** Joins: andrew-d_w (andrew-d_w@moz-17320F4E.hsd1.ca.comcast.net)
[17:02:42] *** Quits: andrew-d_w (andrew-d_w@moz-17320F4E.hsd1.ca.comcast.net) (Input/output error)
[17:03:03] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[17:06:37] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[17:07:38] *** Quits: Kxepal (Miranda@moz-AA60EEAD.pppoe.mtu-net.ru) (Ping timeout)
[17:08:58] *** Joins: eddyb (eddy@F8B50789.F33C1089.FB866788.IP)
[17:09:23] <nmatsakis> pnkfelix: so, reading the code, it does seem that what you did is... consistent with what it was doing before. I'm still creeped out by what it was doing before.
[17:09:37] <pnkfelix> nmatsakis: I was just reading over my test case again
[17:09:39] <nmatsakis> pnkfelix: and trying to remember why I thought this was ok
[17:09:49] <nmatsakis> slash "there has got to be a better way"
[17:10:03] <pnkfelix> nmatsakis: I know that I did look into the potential for 'a to be on other parameters besides &'a self
[17:10:15] <nmatsakis> pnkfelix: ah, I think part of it is this: originally, there as a separate field for "transformed self type",
[17:10:18] <pnkfelix> nmatsakis: but my memory is that when I investigated such a case, it somehow worked...
[17:10:27] <nmatsakis> pnkfelix: but as part of eddyb's changes he unified that into the method signature itself
[17:11:02] *** Joins: Kxepal (Miranda@moz-E12B707E.pppoe.mtu-net.ru)
[17:11:43] <nmatsakis> pnkfelix: so before it wasn't that we mixed the substituted and unsubstituted things like that
[17:11:48] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[17:11:48] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14de83310 to 14b8601a3: 02http://git.io/N3iJvQ
[17:11:48] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[17:11:48] *** Joins: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP)
[17:11:48] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/BmlRTQ
[17:11:48] <ghrust> 13rust/06auto 1407aae2a 15Alex Crichton: native: Use WNOHANG before signaling...
[17:11:48] <ghrust> 13rust/06auto 14d6b5ef7 15bors: auto merge of #13131 : alexcrichton/rust/issue-13124, r=brson...
[17:11:49] *** Parts: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP) ()
[17:12:14] <pnkfelix> nmatsakis: to me a potentially better avenue for investigation would be to try to attack #13139
[17:12:29] <nmatsakis> pnkfelix: and I see that later, we are very careful to treat the 0th argument differently
[17:12:46] <nmatsakis> pnkfelix: yes, I remember now
[17:12:57] <nmatsakis> there's even a comment
[17:12:58] <nmatsakis>                 // For annoying reasons, we've already handled the
[17:12:58] <nmatsakis>                 // substitution of self for object calls.
[17:12:58] <pnkfelix> nmatsakis: ah.  Maybe that is how we are handling 'a being attached to other parameters
[17:13:09] <nmatsakis> indeed, the reasons are annoying.
[17:13:21] <nmatsakis> what i'm not sure is why I r+'d this ;)
[17:13:28] <nmatsakis> vs trying to keep the self argument separated out
[17:13:36] <nmatsakis> I guess because in all the other paths it does work out cleanly,
[17:13:38] <pnkfelix> nmatsakis: eh, Code Review is really hard
[17:13:43] <pnkfelix> nmatsakis: harder than writing code, probably
[17:14:00] <nmatsakis> and hopefully with DST this gets nicer.
[17:14:09] <nmatsakis> no, I mean, it's a reasonable sol'n in some sense
[17:14:16] <nmatsakis> but also a total hack ;)
[17:14:22] <nmatsakis> (but the whole situation is annoying)
[17:14:51] <nmatsakis> so basically I think your patch is ok
[17:14:57] <nmatsakis> one could imagine refactoring this, but it's a separate bug
[17:15:32] <nmatsakis> pnkfelix: so regarding #13139, which I hadn't seen, I had a brnach way back when
[17:15:38] <nmatsakis> pnkfelix: that addressed this by having distinct types
[17:15:45] <pnkfelix> nmatsakis: yeah.  I don't like how unconfident I am about everything holding together, which is why it would be nice to look at #13139
[17:15:48] <nmatsakis> pnkfelix: which is still what I would like to do
[17:15:50] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[17:16:04] <nmatsakis> pnkfelix: the branch died because we lacked default methods, which made it painful to write all the substitution code,
[17:16:15] <pnkfelix> nmatsakis: ah I was musing about distinct types internally but was thinking that such would be rejected as over-engineering
[17:16:18] <nmatsakis> pnkfelix: but we have them now. I can briefly describe to you how I had it setup. IT was building and running at one time.
[17:16:35] <pnkfelix> nmatsakis: Did you put your branch up on github?
[17:16:38] <nmatsakis> pnkfelix: oh, well, I don't think it is ;) I don't see anything as more imp't that ensuring that our type checker is correct
[17:16:42] <nmatsakis> oh that branch is way old
[17:16:49] <pnkfelix> nmatsakis: Not about re-adopting it
[17:16:51] <nmatsakis> it might sitll be on github *somewhere*
[17:16:57] <pnkfelix> nmatsakis: more that I am likely to go home soonish
[17:17:20] <nmatsakis> pnkfelix: the key idea was to parameterize sty with the type T which is "a reference to another type"
[17:17:35] <nmatsakis> and to move all the inference variants out of sty
[17:17:54] <nmatsakis> basically then you had distinct types for "things that might include inference varibales"
[17:17:58] <nmatsakis> and things that definitely do not
[17:17:59] <pnkfelix> nmatsakis: Yes yes yes
[17:18:10] <nmatsakis> this helped to guarantee that the #13139 property held,
[17:18:10] <pnkfelix> nmatsakis: i.e. a way to have distinct types for things that are Type Schemas
[17:18:19] <nmatsakis> because the type of an AST item
[17:18:20] <pnkfelix> nmatsakis: versus Intermediate Inferences
[17:18:22] <nmatsakis> had a distinct type
[17:18:25] <pnkfelix> nmatsakis: versus Final/Concrete Types
[17:18:26] <nmatsakis> from the type of a reference to an ast item
[17:18:27] <nmatsakis> yes
[17:18:33] <nmatsakis> so basically what I found was
[17:18:40] <nmatsakis> at almost every place where the type changed,
[17:18:45] <nmatsakis> was precisely where you should be performing a subst
[17:18:48] <nmatsakis> so it was pretty clean
[17:18:50] <nmatsakis> and then the writeback stage
[17:18:55] <nmatsakis> did the reverse transformation
[17:19:01] <nmatsakis> that's why we currently have separate per-fn tables
[17:19:03] <nmatsakis> for inference types
[17:19:07] <nmatsakis> we used to rewrite them in place
[17:19:11] <nmatsakis> but I refactored it as part of this branch
[17:19:17] <nmatsakis> because the main table
[17:19:22] <nmatsakis> had a distinct type from the per-fn tables
[17:19:34] <nmatsakis> i.e., map(node-id, normal-type)
[17:19:38] <nmatsakis> vs map<node-id, inference-type>
[17:20:12] <pnkfelix> nmatsakis: I follow
[17:20:13] *** Joins: zimbabao (rajaram@31A794DB.867BB49C.BE4CF869.IP)
[17:20:15] <nmatsakis> pnkfelix: I'll put some notes into that bug I guess.
[17:20:19] <nmatsakis> and see if I still have the branch somewhere
[17:20:19] <pnkfelix> nmatsakis: Okay this would be a cool thing to explore
[17:20:26] <nmatsakis> I've done it now in two different compilers,
[17:20:29] <nmatsakis> so I know it does work :)
[17:20:29] <pnkfelix> nmatsakis: Rather than trying to pepper the code with assertions
[17:20:38] <nmatsakis> (rustc and my thesis work ;)
[17:20:44] <nmatsakis> but it does require some fancy generic code at times
[17:20:45] <nmatsakis> to avoid code dup
[17:20:52] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Input/output error)
[17:20:54] <nmatsakis> and it'd be that much nicer with associated items
[17:21:13] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[17:21:21] <pnkfelix> nmatsakis: I was talking to nical about associated items today
[17:21:36] <pnkfelix> nmatsakis: Hopefully we'll get to them soon after 1.0.
[17:21:58] <nmatsakis> yes
[17:22:20] <nmatsakis> pnkfelix: the thing I'd like to do in mid april, I think, is start rewriting the vtable / method code (I have to finish my rwite-up, I've been completing my JS prototype slowly) 
[17:22:32] <nmatsakis> and I hope in that time to give some thought to associated items, I think it'll be easy enough to lay the groundwork
[17:22:51] <pnkfelix> nmatsakis: Ah, so as part of fundeps, make sure we have a path towards assitems
[17:23:44] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Ping timeout)
[17:24:57] <nmatsakis> pnkfelix: right. I remember now one issue that did arise on the branch: the canonicalization tables for types were different. I think I just avoided canonicalization during inference, but I think that cost performance.
[17:25:33] <nmatsakis> pnkfelix: so you'd want separate tables. we could probably make a smarter canonicalization scheme as well
[17:25:57] <nmatsakis> maybe some way to cheat and share tables if there is no inference data
[17:25:58] <nmatsakis> idk
[17:26:04] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[17:26:13] * eddyb notices ping
[17:26:18] <nmatsakis> it wasn't really a ping
[17:26:19] <pnkfelix> nmatsakis: would storing an enum in the table (with each variant corresponding to different ty<_> variants) ?
[17:26:21] <eddyb> of course it's something bad!
[17:26:24] <pnkfelix> nmatsakis: would that help here?
[17:26:27] <nmatsakis> eddyb: ;) I wans't blaming you
[17:26:41] <nmatsakis> eddyb: just noting that this is why the code wasn't as I remembered.
[17:26:57] <nmatsakis> pnkfelix: not sure I follow
[17:27:18] <eddyb> nmatsakis: blaming me is fine
[17:28:08] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Quit: ì „ ì´ë§Œ ê°‘ë‹ˆë‹¤.)
[17:28:09] <eddyb> acrichto: where does this fluke originate from? http://buildbot.rust-lang.org/builders/auto-linux-32-opt/builds/5038/steps/test/logs/stdio
[17:28:24] <pnkfelix> nmatsakis: I'm not familiar with the canonicalization table
[17:28:35] <acrichto> eddyb: https://github.com/mozilla/rust/issues/12827
[17:28:36] <pnkfelix> nmatsakis: so I'll wait until I familiarize myself before I try to suggest solutions
[17:28:46] <nmatsakis> pnkfelix: to be honest, I suspect an arena (making allocation cheap) might be good enough
[17:28:56] <nmatsakis> pnkfelix: I was using @T for everything
[17:29:03] <nmatsakis> pnkfelix: so lots and lots of calls to malloc and ref counting overhead
[17:29:09] <nmatsakis> pnkfelix: this was pre-regions, in fact :)
[17:29:16] <eddyb> nmatsakis: btw, I figured how we can have a safe non-owning ast_map
[17:29:24] <acrichto> eddyb: I think it's a libuv bug, haven't tracked it down yet
[17:29:29] <eddyb> nmatsakis: same lifetime as the tcx interner arena
[17:30:00] <eddyb> it should be simple to try out after 'tcx is in place
[17:30:12] <pnkfelix> nmatsakis: okay.  I'll see if I get a chance to play with it.
[17:30:18] <nmatsakis> eddyb: makes sense. (I still want to 'just" make node-id's an index someday.)
[17:30:29] <pnkfelix> nmatsakis: would be exciting to make the types encode this invariant
[17:30:31] <nmatsakis> though that may well be crazy talk
[17:30:42] <eddyb> nmatsakis: but librustdoc will be the pain point because it likes to store things in TLD :(
[17:30:46] <nmatsakis> pnkfelix: Yes, I really want to leverage type system to help convince us our code is correct :)
[17:31:15] <eddyb> nmatsakis: P is aaaaalmost there, a few more days of pushing borrow errors aside :D
[17:31:23] <nmatsakis> pnkfelix: in previous life, I pushed this really far with scala, and was very happy with the result. Refactoring was a dream. I think Rust is soon (or will be soon) getting to the point we can do similar things...
[17:31:48] <pnkfelix> nmatsakis: I gotta go, if you have further advice / avenues for investigation, please do note them on the bug.  I'll talk to you later!
[17:31:55] <eddyb> nmatsakis: even without in-place folding or arenas, it should have a smaller memory footprint
[17:31:56] <nmatsakis> pnkfelix: ok. ttyl.
[17:32:34] <nmatsakis> eddyb: do we have a version of TLD that permits borrowed pointers but enforces a lexical scoping?
[17:32:43] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: rcirc on GNU Emacs 24.3.1)
[17:32:46] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[17:34:53] *** Joins: sunfish (chatzilla@30A19522.A5F785DE.396E4C6D.IP)
[17:34:56] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[17:40:12] *** Quits: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca) (Quit: canhtak)
[17:41:39] <SimonSapin> "Generic Unix installers, currently built for Linux and Mac" So the same binary works on both systems?
[17:42:29] <SimonSapin> ah sorry, I see there are different links below that, in the same email
[17:42:32] <benh> There seem to be separate downloads for linux/mac, I assume it's the packaging/build process that's generic
[17:48:03] *** Joins: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se)
[17:50:32] *** Joins: andrew-d_w (andrew-d_w@F68B2AC.7A62F771.CC0301A2.IP)
[17:50:58] *** Quits: andrew-d_w (andrew-d_w@F68B2AC.7A62F771.CC0301A2.IP) (Input/output error)
[17:51:19] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[17:52:24] *** Joins: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP)
[17:52:24] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/w7cGHw
[17:52:24] <ghrust> 13rust/06auto 14e575cd6 15Alex Crichton: native: Ignore SIGPIPE by default...
[17:52:24] <ghrust> 13rust/06auto 140eb4dcb 15bors: auto merge of #13158 : alexcrichton/rust/issue-13123, r=brson...
[17:52:24] *** Parts: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP) ()
[17:58:26] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[18:00:00] *** Joins: andrew-__ (andrew-d_w@F68B2AC.7A62F771.CC0301A2.IP)
[18:00:43] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Ping timeout)
[18:04:50] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[18:07:22] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[18:08:23] *** Quits: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net) (Quit: Sharp)
[18:09:45] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[18:13:40] <eddyb> nmatsakis: that or RefCells with 0 runtime cost
[18:13:48] <eddyb> nmatsakis: maybe in another parallel universe
[18:13:55] *** Joins: gwty (gwtypc@61574159.FA920D05.137C914F.IP)
[18:16:09] <nmatsakis> eddyb: huh?
[18:17:00] <eddyb> nmatsakis: I read what you said as "static data with lexical scoping" which sounded like fairy tales
[18:17:24] *** Joins: Sharp (Sharp@19388942.6B775EBE.DC877F3B.IP)
[18:17:30] <nmatsakis> eddyb: ah, ok, well, that's not what I meant :)
[18:18:27] <nmatsakis> hmm, actually, I'm not quite sure how the API would work  :)
[18:18:36] <nmatsakis> I had in mind that you push a value and supply a closure 
[18:18:56] <nmatsakis> but I guess that to get a value you must also do: fn get<R>(closure: |&T| -> R) -> R
[18:19:19] <nmatsakis> which is ok I guess
[18:19:42] <nmatsakis> (paired with fn push<R>(v: &T, closure: || -> R) -> R)
[18:19:44] <nmatsakis> and presumably some kind of key
[18:21:47] *** Joins: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP)
[18:21:47] <ghrust> [13rust] 15bors 04force-pushed 06auto from 140eb4dcb to 14b8601a3: 02http://git.io/N3iJvQ
[18:21:47] *** Parts: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP) ()
[18:21:49] *** Joins: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP)
[18:21:49] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/t1sRvw
[18:21:49] <ghrust> 13rust/06auto 140e190b9 15Alex Crichton: native: Use WNOHANG before signaling...
[18:21:49] <ghrust> 13rust/06auto 14fd4f15e 15bors: auto merge of #13131 : alexcrichton/rust/issue-13124, r=brson...
[18:21:49] *** Parts: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP) ()
[18:22:38] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[18:22:38] *** ChanServ sets mode: +o tjc
[18:23:15] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[18:28:05] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[18:31:41] *** Quits: NiccosSystem (NiccosSyst@moz-ED196BB4.customer.lyse.net) (Ping timeout)
[18:37:30] *** Joins: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca)
[18:41:04] *** Joins: brson (brson@moz-62518563.mtv2.mozilla.com)
[18:41:05] *** ChanServ sets mode: +qo brson brson
[18:41:19] *** Quits: brson (brson@moz-62518563.mtv2.mozilla.com) (Quit: leaving)
[18:41:23] *** Joins: brson (brson@moz-62518563.mtv2.mozilla.com)
[18:41:23] *** ChanServ sets mode: +qo brson brson
[18:43:30] <acrichto> brson: I wonder if S3 supports listing functionality
[18:43:37] <acrichto> it'd be nice to go to /dist and just see everything in there
[18:44:05] <eddyb> or, you know, not having /index.html in doc URLs :P
[18:46:25] <steveklabnik> i think s3 does but it's expensive
[18:46:42] <steveklabnik> https://www.appneta.com/blog/s3-list-get-bucket-default/
[18:47:30] <steveklabnik> But LISTs are over 12 times more expensive than GETs.
[18:47:49] <acrichto> oh well, probably not worth the convenience
[18:47:57] <acrichto> we could just auto-generate something I suppose
[18:51:14] *** Quits: dcrewi (david@moz-AB8667CE.gyrae.net) (Ping timeout)
[18:51:15] *** Joins: vfetwnuncszu (david@moz-AB8667CE.gyrae.net)
[18:51:30] *** vfetwnuncszu is now known as dcrewi
[19:04:25] <erickt> anyone working on a snapshot?
[19:04:35] <eddyb> erickt: flaper87, I think
[19:06:38] <flaper87> erickt: I am, still waiting for the buildbot jobs to finish
[19:06:51] *** Quits: dcrewi (david@moz-AB8667CE.gyrae.net) (Ping timeout)
[19:07:10] <erickt> flaper87: great. did you include the big serialization change as part of it?
[19:07:15] <flaper87> erickt: does the snap3 branch have the commit you need?
[19:07:17] <flaper87> lol
[19:07:22] <flaper87> let me check
[19:07:57] <flaper87> erickt: https://github.com/mozilla/rust/commit/f1739b14a1346419a4598339aee32aab07e0d12e this ?
[19:08:15] <erickt> flaper87: that's the one
[19:08:38] <flaper87> erickt: cool, then yup, I'll submit the PR as soon as the remaining job finishes
[19:08:49] <erickt> thanks!
[19:08:59] <flaper87> my pleasure
[19:09:45] * flaper87 goes back to reading the vtable code
[19:09:54] *** Joins: vfetwnuncszu (david@moz-AB8667CE.gyrae.net)
[19:10:09] *** vfetwnuncszu is now known as dcrewi
[19:12:31] *** Quits: victorporof_ (victorporo@13F2CEC5.7672369.D8E68FF6.IP) (Ping timeout)
[19:16:35] *** Joins: victorporof (victorporo@13F2CEC5.7672369.D8E68FF6.IP)
[19:24:37] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Ping timeout)
[19:25:00] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[19:26:55] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[19:26:55] *** ChanServ sets mode: +ao pcwalton pcwalton
[19:32:04] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[19:36:58] *** Quits: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Ping timeout)
[19:41:45] *** Joins: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP)
[19:41:45] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/t1sRvw
[19:41:45] *** Parts: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP) ()
[19:46:08] <larsberg> do any of you know where __tls_get_addr should be defined on Android? it's being generated in some servo code and I find it hard to believe it doesn't exist, but I fail with a missing symbol loading libraries that use and can't track it down in the Obvious Places (e.g., there no libpthread on android and it's not in libc)
[19:46:47] *** Joins: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP)
[19:46:47] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/qRAZ4w
[19:46:47] <ghrust> 13rust/06auto 1468c2706 15Alex Crichton: native: Ignore SIGPIPE by default...
[19:46:47] <ghrust> 13rust/06auto 1442e1003 15bors: auto merge of #13158 : alexcrichton/rust/issue-13123, r=brson...
[19:46:47] *** Parts: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP) ()
[19:49:37] <acrichto> larsberg: it's core enough to be in something like libdl or libc possibly, but I'm not actually sure where it originates from...
[19:50:07] <eddyb> flaper87: which vtable? (should've asked earlier, I know)
[19:51:26] <larsberg> acrichto: thanks, I'll keep looking! it was just weird to see come from dlopen "Error from dlopen(\@\@ta/com.example.ServoAndroid/lib/libservo.so): dlopen failed: cannot locate symbol "__tls_get_addr" referenced by "libservo.so"..."
[19:51:37] <acrichto> whoa
[19:52:14] <larsberg> (that's our custom reporting - dlopen on android doesn't load recursive dependencies, so you have to read the elf header and load them yourselves up the chain... ugh)
[19:52:38] <acrichto> hm, tls_get_addr isn't dfined for me in the android toolchain
[19:54:36] <larsberg> is it a new change to generate it? the only thing I saw in the Rust sources was in src/llvm/lib/Target/ARM/ARMISelLowering.cpp. 
[19:54:53] <larsberg> I may be able to refactor some bits of servo code to remove our use of local_data on Android (it's only used in one place)
[19:55:28] * larsberg is assuming it's local_data::get that's generating that call
[19:57:28] <acrichto> these are generated from #[thread_local] things
[19:57:34] <acrichto> they correspond to LLVM's thread_local attribute on globls
[19:57:37] <acrichto> globals*
[19:57:45] <acrichto> the only one we use now is the thread_local for the rust task pointer
[19:57:52] <acrichto> although no
[19:57:56] <acrichto> android uses pthread TLS
[19:57:59] <acrichto> for this reason I think...
[20:00:03] *** Joins: NiccosSystem (NiccosSyst@moz-ED196BB4.customer.lyse.net)
[20:01:53] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[20:02:44] *** Quits: edwardw (edwardw@C3D32C6E.E4C8743.30C05AB6.IP) (Ping timeout)
[20:02:48] <larsberg> acrichto: aha, we have a few static muts in servo marked #[thread_local]
[20:03:03] * acrichto looks at pcwalton
[20:03:24] <larsberg> shh, he's busy today :-)
[20:03:28] <acrichto> lol
[20:03:38] <acrichto> I think you'll have to stub those out for android
[20:03:46] *** Joins: edwardw (edwardw@4112974A.B4358688.30F15291.IP)
[20:03:46] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[20:03:46] *** ChanServ sets mode: +o tjc
[20:04:11] <larsberg> OK, sounds good. What's the longer-term plan? Will you generate the pthread_ versions for variables marked with that attribute?
[20:04:21] <larsberg> (I can open an issue, if that's easier)
[20:04:24] <acrichto> I don't think so
[20:04:34] <acrichto> the long-term plan is first-class support for speedy task-local things
[20:04:41] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[20:04:43] <acrichto> which will involve #[thread_local], but it'll be more clever across platforms
[20:05:13] <larsberg> OK, makes sense. thanks!
[20:05:24] <acrichto> sadly it may be awhile :(
[20:05:43] <larsberg> no rush, just trying to leap through the usual android hurdles :-)
[20:07:20] <larsberg> btw, while you're here... I was trying to link servo as libservo.a instead of the usual dynamic loaded library, but got all sorts of very strange errors related to malformed references to other dynamic libraries (e.g., our version of spidermonkey, etc.) and abandoned it. Should that have worked? Linking & loading on android seems a bit of a minefield...
[20:07:35] <acrichto> were you building an rlib or a staticlib?
[20:07:45] <larsberg> staticlib
[20:08:03] <acrichto> hm, when you build it it should tell you everything that you're msising
[20:08:06] <acrichto> in terms of native libraries
[20:08:49] <larsberg> maybe I'll give that a try after I get android working again with dynamic libs (I'm pretty close right now)
[20:09:15] <larsberg> I'd prefer not to have servo building both dylib and rlib files for everything, as it really hurts our already-pretty-bad build time
[20:09:29] <acrichto> building both shouldn't take extra build time
[20:09:34] <acrichto> you can build the simultaneuously
[20:10:16] <larsberg> hrm, the timing was significantly longer adding the two attributes to all of our lib.rs files and generating both the dylib and rlibs...
[20:10:36] <larsberg> and make clean-servo ; make servo went up quite a bit as well. I should get Real Numbers.
[20:11:16] <acrichto> hm, I'd be curious about that
[20:11:23] <acrichto> if you run -Z time-passes you can see what the slow parts are
[20:11:39] <acrichto> more time will be spent assembling the archive, but most of the time should be spent in LLVM not in archiving
[20:12:10] <larsberg> oh, I nearly always build with --disable-optimize, so perhaps archive assembly is a larger portion of my build times
[20:12:26] <larsberg> (otherwise servo incremental builds are maddeningly slow)
[20:12:28] <acrichto> oh that'd be interesting, I'd be open to optimizing it for sure
[20:13:14] <larsberg> excellent; I'll collect some data and open an issue
[20:13:19] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[20:14:02] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[20:14:09] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[20:14:10] *** ChanServ sets mode: +o tjc
[20:14:22] *** Quits: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca) (Quit: canhtak)
[20:15:47] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[20:17:37] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[20:20:38] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[20:20:42] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[20:20:42] *** ChanServ sets mode: +o tjc
[20:24:31] *** Joins: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca)
[20:27:43] <eddyb> huon, cmr: why are we using malloc/free instead of mmap/munmap in TypedArena? it would be nice to round up each chunk's capacity to the page size
[20:27:57] *** Joins: victorporof_ (victorporo@13F2CEC5.7672369.D8E68FF6.IP)
[20:28:24] *** Quits: victorporof (victorporo@13F2CEC5.7672369.D8E68FF6.IP) (Ping timeout)
[20:29:51] *** Joins: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net)
[20:29:51] *** ChanServ sets mode: +ao dherman dherman
[20:32:57] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[20:34:00] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[20:34:00] *** ChanServ sets mode: +o tjc
[20:36:43] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[20:44:07] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[20:45:01] *** Quits: edwardw (edwardw@4112974A.B4358688.30F15291.IP) (Quit: Leaving...)
[20:51:18] *** Quits: aurynj (Eon@C498BDEC.C264657C.C6282BC4.IP) (Ping timeout)
[20:56:39] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[20:56:39] *** ChanServ sets mode: +o tjc
[21:00:07] *** Quits: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca) (Quit: canhtak)
[21:01:07] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[21:01:47] *** Joins: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP)
[21:01:47] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/qRAZ4w
[21:01:47] *** Parts: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP) ()
[21:01:48] *** Joins: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca)
[21:01:59] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[21:04:55] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[21:04:55] *** ChanServ sets mode: +o tjc
[21:06:41] *** Joins: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP)
[21:06:41] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/rWgePg
[21:06:41] *** Parts: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP) ()
[21:06:43] *** Joins: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP)
[21:06:43] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/IhqDGg
[21:06:43] <ghrust> 13rust/06auto 142e6607a 15Flavio Percoco: Remove `Freeze` and add `Share` in vim's syntax
[21:06:43] <ghrust> 13rust/06auto 14cbfc0a5 15bors: auto merge of #13161 : FlaPer87/rust/master, r=alexcrichton
[21:06:43] *** Parts: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP) ()
[21:20:51] *** Quits: sunfish (chatzilla@30A19522.A5F785DE.396E4C6D.IP) (Ping timeout)
[21:21:55] *** Joins: Jesse (jruderman@moz-62518563.mtv2.mozilla.com)
[21:22:53] *** Joins: sunfish (chatzilla@30A19522.A5F785DE.396E4C6D.IP)
[21:24:36] *** Quits: sunfish (chatzilla@30A19522.A5F785DE.396E4C6D.IP) (Ping timeout)
[21:25:43] *** Joins: sunfish (chatzilla@30A19522.A5F785DE.396E4C6D.IP)
[21:36:23] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[21:36:34] <cmr> eddyb: please open a PR for that :)
[21:36:57] *** Quits: sunfish (chatzilla@30A19522.A5F785DE.396E4C6D.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 28.0/20140317233501])
[21:38:15] *** Joins: Nekit1234007_ (Nekit12340@4005741D.E0484215.4707F662.IP)
[21:38:51] *** Quits: Nekit1234007 (Nekit12340@DEC494C7.E25DEE64.4707F662.IP) (Ping timeout)
[21:39:05] <eddyb> cmr: mmaybe if it's required to show that arenas are much better than ~ in the AST
[21:39:05] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Client exited)
[21:43:09] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[21:45:08] *** Quits: andrew-__ (andrew-d_w@F68B2AC.7A62F771.CC0301A2.IP) (Input/output error)
[21:45:30] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[21:55:30] *** Quits: eddyb (eddy@F8B50789.F33C1089.FB866788.IP) (Ping timeout)
[22:01:22] *** Quits: NiccosSystem (NiccosSyst@moz-ED196BB4.customer.lyse.net) (Ping timeout)
[22:01:28] *** Joins: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP)
[22:02:06] *** Quits: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: pcwalton)
[22:03:24] <erickt> nmatsakis: ping
[22:07:45] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[22:09:34] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[22:14:22] *** Joins: NiccosSystem (NiccosSyst@moz-ED196BB4.customer.lyse.net)
[22:16:39] *** Quits: NiccosSystem (NiccosSyst@moz-ED196BB4.customer.lyse.net) (Ping timeout)
[22:17:54] *** Quits: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca) (Quit: canhtak)
[22:21:20] *** Quits: mediocrity (Thunderbir@moz-8A2E9A09.bredband.comhem.se) (Client exited)
[22:26:45] <acrichto> brson/rust/whattayaknowitsmoreandroidfixes
[22:33:05] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[22:33:09] <bjz> acrichto brson: the TryPortIterator thing popped up again re. glfw: https://github.com/bjz/glfw-rs/pull/117#issuecomment-38944836
[22:34:51] <acrichto> interesting, it doesn't seem to be a concurrent use case but rather a "move things from point A to point B" use case
[22:35:06] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[22:35:16] *** Quits: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP) (Client exited)
[22:35:50] <bjz> acrichto: what do you mean?
[22:36:19] <acrichto> in glfw there's not much concurrency, it's jsut moving things from one end of the event loop to the other, right?
[22:36:22] <acrichto> (I think)
[22:36:42] *** Quits: gwty (gwtypc@61574159.FA920D05.137C914F.IP) (Ping timeout)
[22:38:05] *** Joins: mib_uij4kq (Mibbit@17C39DD.FA4CF353.CC1A2609.IP)
[22:38:57] <bjz> acrichto: oh yeah
[22:39:26] <bjz> acrichto: we're using channels as a way to work with C callbacks
[22:39:36] <bjz> might not be the best way though :/
[22:40:04] <acrichto> oh no, not saying that, just reflecting on the use case
[22:40:16] <acrichto> in a normal concurrent sense "draining the channel" normally means you're doing something wrong
[22:40:17] *** Joins: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP)
[22:40:28] <acrichto> b/c there's never a concept of draining the channel if you're concurrently pushing to it
[22:40:31] <acrichto> but in this case, it makes total sense
[22:40:35] <bjz> hm
[22:40:56] *** Quits: mib_uij4kq (Mibbit@17C39DD.FA4CF353.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:41:38] <bjz> so was that why you were hesitant when I first proposed that?
[22:42:03] <acrichto> basically yeah
[22:42:13] <bjz> ah
[22:42:36] <bjz> yeah it was this use case I had in mind - didn't really do a good job of explaining it though
[22:42:50] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[22:44:17] *** Joins: jaras (textual@CA59A5EC.5F4B69C0.52E4E107.IP)
[22:51:15] <brson> r? https://github.com/mozilla/rust/pull/13187
[22:51:15] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[22:51:15] *** ChanServ sets mode: +ao pcwalton pcwalton
[22:57:12] *** Joins: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca)
[23:00:42] *** Joins: mbrubeck (sid17036@moz-A42E5B7B.irccloud.com)
[23:01:37] *** kimundi is now known as zz_kimundi
[23:01:50] *** Joins: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP)
[23:01:50] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/IhqDGg
[23:01:50] *** Parts: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP) ()
[23:03:37] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[23:06:47] *** Joins: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP)
[23:06:47] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/ihZd1A
[23:06:47] *** Parts: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP) ()
[23:06:47] *** Joins: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP)
[23:06:47] <ghrust> [13rust] 15bors pushed 3 new commits to 06auto: 02http://git.io/V3VcKQ
[23:06:47] <ghrust> 13rust/06auto 1435e8a6b 15Alex Crichton: syntax: Accept meta matchers in macros...
[23:06:47] <ghrust> 13rust/06auto 149f1f716 15Brian Anderson: Convert most code to new inner attribute syntax....
[23:06:48] <ghrust> 13rust/06auto 14c316ef7 15bors: auto merge of #13162 : alexcrichton/rust/attr-syntax, r=brson...
[23:06:50] *** Parts: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP) ()
[23:07:50] <mcpherrin> I feel bad on working on a fresh regex implementation in Rust since there seems to be a pile already.  Does anyone have a sense of what we'd actually want for inclusion in Rust?
[23:08:46] <bvssvni> mcpherrin: do you think about a syntax extension?
[23:09:42] <mcpherrin> Here's what I'm going to make:
[23:10:11] <mcpherrin>  - Regex parser in rust.  Important as it defines a syntax to aim for compatibility.  Fairly minimal feature set
[23:10:29] <sfackler> mcpherrin: there's a wiki page and issue that have a lot of discussion about what to support/what algorithms to use
[23:10:38] <mcpherrin> sfackler: I read the issue, not the wiki page
[23:10:49] <mcpherrin> - Dynamic matcher that can be used at runtime
[23:11:00] <mcpherrin> - DFA/code generator for compiling regexes
[23:11:11] <mcpherrin> - syntax extension for using the above in rust code
[23:11:30] <mcpherrin> the first two are working, third and fourth this weekend
[23:12:12] <mcpherrin> I'm writing this either way, but I hope it can be useful to the rust community
[23:12:44] <mcpherrin> * Should I write an RFC for inclusion when I have a prototype?
[23:13:12] <sfackler> a syntax extension to precompile regexes would be nice to have but not at all necessary for an initial release. Just being able to write Matcher::new("\d+").match("10") or whatever would be awesome
[23:13:19] *** Joins: andrew-__ (andrew-d_w@F68B2AC.7A62F771.CC0301A2.IP)
[23:13:41] <bvssvni> also an iterator for matches would be nice
[23:13:44] *** Quits: andrew-__ (andrew-d_w@F68B2AC.7A62F771.CC0301A2.IP) (Input/output error)
[23:13:45] <sfackler> sure
[23:14:04] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Ping timeout)
[23:14:05] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[23:14:07] <sfackler> I think the API and implementation decisions are the things that would be most important to hash out
[23:14:52] <mcpherrin> Okay, well I'll prototype something over the weekend and people can bang on it to suggest improvements
[23:15:12] <mcpherrin> \d and + are both things my existing code doesn't have :-P
[23:15:21] <mcpherrin> (easy to add)
[23:15:28] *** Quits: jaras (textual@CA59A5EC.5F4B69C0.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[23:15:40] <mcpherrin> [0-9][0-9]* works though.
[23:15:50] <sfackler> I think good unicode support is also something that people want
[23:16:01] <mcpherrin> My existing prototype works on unicode code points
[23:16:04] *** Joins: andrew-__ (andrew-d_w@F68B2AC.7A62F771.CC0301A2.IP)
[23:16:21] <mcpherrin> I think we have normalization in std already so that's good enough
[23:16:31] *** Joins: jaras (textual@CA59A5EC.5F4B69C0.52E4E107.IP)
[23:16:36] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Ping timeout)
[23:16:44] *** Quits: jaras (textual@CA59A5EC.5F4B69C0.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[23:17:04] <mcpherrin> I also want a `match` like thing for writing lexers
[23:18:14] <mcpherrin> rematch! foo { m@"\d+" => Digit(m), "+" => OpPlus(m) } kinda thing
[23:18:23] <mcpherrin> outside prototype scope though.
[23:19:12] <mcpherrin> I'm concerned about getting shoehorned into an API that is either confusing, or hard to add features like that on without reimplementing everything.
[23:20:27] *** Quits: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP) (Ping timeout)
[23:20:48] <flaper87> erickt: FYI, going through snapshot fixes now (removing unwrap_ >.>)
[23:32:32] *** Quits: victorporof_ (victorporo@13F2CEC5.7672369.D8E68FF6.IP) (Quit: victorporof_)
[23:36:14] *** Joins: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP)
[23:36:28] *** Joins: vadimcn (chatzilla@moz-E841EA3A.hsd1.wa.comcast.net)
[23:37:13] <erickt> flaper87: awesome
[23:40:55] *** Quits: eibwen (kvirc@moz-565A1408.dip0.t-ipconnect.de) (Ping timeout)
[23:41:46] *** Joins: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP)
[23:41:46] <ghrust> [13rust] 15bors pushed 3 new commits to 06auto: 02http://git.io/DVpoPw
[23:41:46] <ghrust> 13rust/06auto 14c6bbb95 15Alex Crichton: syntax: Accept meta matchers in macros...
[23:41:46] <ghrust> 13rust/06auto 14b387da4 15Brian Anderson: Convert most code to new inner attribute syntax....
[23:41:46] <ghrust> 13rust/06auto 143c59229 15bors: auto merge of #13162 : alexcrichton/rust/attr-syntax, r=brson...
[23:41:48] *** Parts: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP) ()
[23:45:56] *** Quits: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP) (Ping timeout)
[23:53:15] *** Quits: jyyou (jyyou@moz-47B052FA.cs.nctu.edu.tw) (Ping timeout)
[23:53:25] *** Quits: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net) (Quit: dherman)
[23:58:59] *** Joins: jyyou (jyyou@moz-47B052FA.cs.nctu.edu.tw)
[23:59:09] *** Quits: Sharp (Sharp@19388942.6B775EBE.DC877F3B.IP) (Quit: Sharp)
