[01:19:55] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Quit: Leaving...)
[03:09:08] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[04:57:45] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[05:25:21] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[07:57:44] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Quit: Leaving...)
[08:47:47] *** Joins: bjz (brendanzab@moz-38D46E1C.perm.iinet.net.au)
[13:00:50] *** Quits: bjz (brendanzab@moz-38D46E1C.perm.iinet.net.au) (Quit: Leaving...)
[13:02:01] *** Joins: bjz (brendanzab@moz-38D46E1C.perm.iinet.net.au)
[13:09:03] *** Quits: bjz (brendanzab@moz-38D46E1C.perm.iinet.net.au) (Quit: Leaving...)
[13:43:42] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[14:30:19] *** Quits: [o__o] (~o__o@moz-24EBFAC7.me) (Ping timeout)
[14:31:39] *** Joins: [o__o] (~o__o@moz-24EBFAC7.me)
[14:33:27] *** Quits: jga (asdf@6EA50D94.971C5B66.B5524284.IP) (Ping timeout)
[14:34:11] *** Joins: jga (asdf@6EA50D94.971C5B66.B5524284.IP)
[18:07:26] <cmr> Seldaek: for the record, none of the issues I'm ccing you in are release criticil
[18:07:28] <cmr> *critical
[18:07:41] <cmr> I'm preparing the PR to merge rustdoc_ng into master right now
[18:10:18] <Seldaek> yeah no problem I'm just keeping track of them here
[18:10:22] <cmr> yup
[18:38:30] <cmr> Seldaek: rustdoc_web doesn't care what the json's filename is right? it pulls the crate name out of the JSON?
[18:38:48] <Seldaek> yes
[18:39:02] <Seldaek> it just scans input/<version>/*.json
[18:39:14] <Seldaek> and version is kept as the dirname is iirc
[18:42:33] <Seldaek> cmr: also there is a "grunt browse" command which starts a server hosting the docs locally, in case this is helpful 
[18:43:05] <cmr> I'm trying to figure out how to make the makefile do its things.
[18:43:06] <Seldaek> doesn't change much from file:// but I had less flickering due to web fonts here going through a proper server
[18:43:14] <Seldaek> yeah, makefiles are hell
[18:43:26] <Seldaek> anything you want to do it'll figure out a way to mess with you
[18:44:49] <Seldaek> cmr: about the version hash btw.. I'm not sure how to best handle this. I guess you should update the config.json's baseSourceUrls with the proper values pointing to github's current hash
[18:45:12] <cmr> yeah, I was going to do a sed
[18:45:16] <Seldaek> ok
[18:45:34] <Seldaek> and please run it in the right dir so the links aren't stdlib/stdlib/ ;)
[18:45:37] <cmr> it'd be nice if rustdoc_web could be bundled into a single script
[18:45:40] <cmr> yeah about that
[18:45:49] <cmr> the links are going to be broken I think, for a while
[18:46:00] <Seldaek> alternatively you can just remove stdlib/ from the end of the baseSourceUrl
[18:46:08] <Seldaek> that works too I think
[18:46:21] <cmr> I have no idea where rustc is run from in the makefile
[18:46:29] <Seldaek> the config.json value for that overrides the urls contained in the json file
[18:46:30] <cmr> needs some handling on my side
[18:46:31] <Seldaek> or something
[18:47:12] <Seldaek> as for bundling into a single script.. yes. It's not impossible, but I'm not sure if there are tools for this
[18:52:47] <Seldaek> cmr: looks like https://github.com/crcn/nexe can build an executable that includes node itself + your sources.. a bit radical but it would certainly help with the dependency on node (at least on nix, no windows support)
[18:53:22] <cmr> Seldaek: turns out we already have a node dependency to build the docs, so we're fine on that front
[18:54:13] <cmr> it's just a PITA to copy json into a dir rather than saying rustdoc_web --input path/to/jsons --output path/to/html/output
[18:54:27] <cmr> not helped by the fact that makefiles are obtuse
[18:54:38] <Seldaek> cmr: oh but I can add a CLI arg for rustdoc_web at least
[18:54:44] <Seldaek> so you don't need to move the stuff around
[18:54:50] <cmr> that would be fantastic
[18:57:44] <Seldaek> cmr: buut, you run via grunt or how do you do it?
[18:58:13] <cmr> Seldaek: I'll run whatever I need to as long as I don't need to cd anywhere
[18:58:16] <cmr> Seldaek: even 
[18:58:21] <cmr> erm
[18:58:37] <cmr> even just a shell script that does `npm install; ....`
[18:59:32] <Seldaek> can the shell script cd? :p
[18:59:39] <cmr> pushd + popd
[18:59:42] <cmr> yes
[18:59:42] <Seldaek> and how do you get the repo, submodule?
[18:59:50] <cmr> nah I just cp'd it in
[18:59:59] <Seldaek> whaa? :p
[19:00:06] <cmr> figure just do rollup PRs until the dust settles
[19:00:50] <Seldaek> I see
[19:02:45] <Seldaek> well if it's gonna be a flat copy into mozilla/rust I'd happily do a PR for that myself to at least retain authorship of those bits, but this probably should wait a bit, at least this weekend I'll try to work a bit on it again, wrap up critical issues
[19:03:08] <cmr> ok
[19:03:27] <Seldaek> but I can PR against your tree if you have something already
[19:03:50] <Seldaek> and then add whatever commands to make it work
[19:04:10] <Seldaek> if you get everything working to the point of having the jsons dumped, I guess I can take it from there
[19:04:30] <cmr> Ok, I can do that
[19:04:43] <Seldaek> however, I'd think we still need an external tool
[19:04:59] <Seldaek> and that's why I think it's not such a great idea to have it in the rust repo itself
[19:05:17] <cmr> Well the rust repo needs it to generate the docs
[19:05:22] <cmr> submodule would be fine probably
[19:05:25] <Seldaek> because ideally we would build docs for multiple rust versions from the outside
[19:05:43] <Seldaek> if you do that, then you get dropdowns to switch versions
[19:05:49] <Seldaek> that can be nice I think
[19:06:33] <Seldaek> I just don't know if it makes sense that the rust repo knows how to generate its docs or not
[19:06:42] <cmr> I'm not really aiming for ideal right now, I just want rustdoc out and rustdoc_ng in :p
[19:06:52] <Seldaek> to me this is a completely separated thing than the language
[19:07:12] <cmr> rustdoc is part of the standard Rust distribution, as is the documentation for the stdlib.
[19:07:19] <Seldaek> I don't quite get the way everything is mushed into mozilla/rust atm. seems un-git-y
[19:07:37] <cmr> well when things are separate everything breaks as soon as the language changes
[19:07:40] <cmr> which is thrice daily :p
[19:07:44] <Seldaek> :p
[19:07:55] <Seldaek> I suppose..
[19:08:20] <Seldaek> it'd still be easier for me to update the templates without having to PR and wait for bors 3 days though
[19:08:34] <Seldaek> if it just took latest from a submodule at every build that'd be nice
[19:09:07] <cmr> that'd break the integrity of the buildbots
[19:09:15] <cmr> they only run "trusted" reviewed code
[19:09:27] <Seldaek> :/
[19:09:39] <Seldaek> why is so annoying to do the right thing
[19:09:56] <Seldaek> anyway ok then
[19:10:05] <cmr> I mean I'm sure something can be worked out
[19:10:14] <Seldaek> I'll PR against your tree whenever you tell me it's ready
[19:10:34] <cmr>  /ideally/ rustdoc_web would be written in rust, using our awesome templating library, and our awesome web server, and our awesome everything :p
[19:10:45] <Seldaek> then whenever this chaos settles in six months we can reassess and split it out if needed
[19:11:27] <Seldaek> we could subtree-merge our repos in though to keep history, but I don't know if that matters
[19:11:47] <cmr> I don't care about rustdoc_ng's history, certainly not enough to figure out how to do a subtree operation
[19:11:51] <Seldaek> also I can't say I remember the 20 args you need to give git for things to go well :p
[19:12:04] <cmr> exactly!
[23:21:11] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Quit: Leaving...)
