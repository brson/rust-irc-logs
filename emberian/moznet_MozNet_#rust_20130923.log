[00:00:06] <doomlord_> kimundi - it does actually write out the kind of node aswel so to make jsut a call-graph, only look for jdefs from method_call etc
[00:00:27] *** Quits: Jesin (Jessin_@moz-C8BB4444.cc.lehigh.edu) (Ping timeout)
[00:00:50] <kimundi> doomlord_: I'm very curious, but also very sleep deprived right now - need to go to bed now ;)
[00:01:46] *** Joins: saneyuki (Tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[00:03:26] *** Quits: saneyuki (Tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[00:04:33] *** Joins: Jesin (Jessin_@moz-C8BB4444.cc.lehigh.edu)
[00:06:12] *** Joins: OSstudent (Mibbit@moz-5AF9AA47.hsd1.va.comcast.net)
[00:06:57] *** Quits: Jesin (Jessin_@moz-C8BB4444.cc.lehigh.edu) (Ping timeout)
[00:07:38] *** Joins: slack1256 (slack@moz-84917BD2.baf.movistar.cl)
[00:10:21] *** Quits: bytewise (bytewise@moz-4A801D04.unitymediagroup.de) (Quit: Leaving)
[00:13:22] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Quit: Leaving)
[00:14:21] *** Quits: aaron (aaron@5D8AE3EF.EC8C25A6.72ECBEEF.IP) (Quit: leaving)
[00:15:55] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[00:16:03] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: nejucomo)
[00:16:37] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[00:17:52] *** Quits: lerc (quassel@B2E8CAD3.A8D14E52.788638A4.IP) (Ping timeout)
[00:19:55] *** Joins: lerc (quassel@B2E8CAD3.A8D14E52.788638A4.IP)
[00:22:28] *** Joins: Jesin (Jessin_@moz-CDB412A.cc.lehigh.edu)
[00:24:05] *** Quits: OSstudent (Mibbit@moz-5AF9AA47.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[00:24:12] *** Joins: adu (ajr@moz-BF2B1AE4.washdc.fios.verizon.net)
[00:24:55] <jensnockert> It is really late here, and I have llvm issues. Can someone quickly notice what is wrong with the following IR? https://gist.github.com/jensnockert/6665213
[00:25:00] <jensnockert> I <3 you.
[00:26:32] <tiffany> is the list of attributes in the manual incomplete?
[00:26:59] *** Quits: adu (ajr@moz-BF2B1AE4.washdc.fios.verizon.net) (Quit: adu)
[00:27:01] <jensnockert> tiffany: In the Rust manual? Yes.
[00:27:16] <tiffany> I'm trying to debug a segfault and I'm wondering if it might be a stack overflow
[00:27:32] <tiffany> isn't there an attribute to use a C-friendly stack?
[00:27:51] <doomlord_> yes
[00:27:56] <doomlord_> let me check what it is,
[00:28:07] <jensnockert> #[fixed_stack_segment] ?
[00:28:11] *** Joins: adu (ajr@moz-BF2B1AE4.washdc.fios.verizon.net)
[00:28:13] <tiffany> also, the environment variable to force singlethreaded is RUST_THREADS, right?
[00:29:39] *** Quits: lbergstrom (Adium@D6B9EF06.FF448E4A.B459E86F.IP) (Quit: Leaving.)
[00:31:00] <mcpherrin> tiffany: yes, but even with RUST_THREADS=1 you still get two threads
[00:31:19] <adu> I'm getting an error with the rust command
[00:31:25] <tiffany> what are they used for?
[00:31:35] <tiffany> as long as things aren't swapping between threads
[00:31:53] <mcpherrin> The runtime spawns an extra thread; I don't know the details but I saw somebody file a bug recently
[00:31:57] <tiffany> I'm not convinced my engine works in a multithreaded environment (I'm currently rewriting part of it in rust)
[00:32:10] <adu> http://pastie.org/8347552
[00:32:33] <mcpherrin> adu: well it probably shouldn't do that
[00:32:37] <adu> probably
[00:32:58] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[00:33:13] <Eridius> tiffany: I would assume that RUST_THREADS=1 means that any rust code you write still is tied to one thread. I don't know what the second thread is for though, and I suppose you might want to try and find out if you can
[00:33:32] <adu> rustc --help works fine :)
[00:33:32] <tiffany> my guess is it's used by libuv to schedule stuff on the 1 worker thread
[00:33:34] <Luqman> adu: yea... it does that :(
[00:33:39] <tiffany> but that's a guess
[00:33:46] <jensnockert> adu: OS X?
[00:33:53] <adu> jensnockert: yes
[00:34:06] *** Joins: z0w0 (zack@64F0E14B.3C29B4A9.2CE63F58.IP)
[00:34:10] <jensnockert> adu: I get the same thing, I think there is a work-around somehow.
[00:34:11] <adu> also: http://pastie.org/8347558
[00:34:40] <adu> I think it's version 0.7
[00:34:46] <Eridius> adu: that's quite the size on the mmap call
[00:35:16] <adu> I wonder if it's negative
[00:35:39] <adu> hmm no
[00:36:11] <Eridius> adu: attach gdb and see where that came from?
[00:36:14] <tiffany> 7000 petabytes is quite a bit of memory to be mmapping
[00:36:26] <mcpherrin> rusti: let x: u64 = 7522747388523884544u64; x as i64
[00:36:27] -rusti- 7522747388523884544i64
[00:36:32] <adu> even in 64 bit, the top nybble is 6, which would still be positive
[00:36:48] <mcpherrin> rusti: let x: u64 = 7522747388523884544u64; x as f64
[00:36:49] -rusti- 7522747388523885804f64
[00:38:14] <adu> I remember this working so well when I compiled it myself, switching to MacPorts was a bad idea
[00:39:08] <mcpherrin> 0.7 is pretty old too, you might want to get from git (0.8 is about to be released)
[00:39:10] *** kimundi is now known as zz_kimundi
[00:39:39] <adu> Eridius: http://pastie.org/8347565
[00:41:03] <adu> I think I'm going to uninstall the macports version and install the latest rust instead
[00:41:36] <engla> I think it's a known problem adu
[00:41:40] <adu> ok
[00:41:53] <engla> and it was surely fixed
[00:43:01] <Eridius> adu: homebrew > macports. If you install with homebrew you can use --HEAD to install current master instead of 0.6
[00:43:04] <Eridius> s/0.6/0.7/
[00:43:28] <Eridius> although compiling yourself is probably best for rust
[00:43:58] <jensnockert> Could someone take a look at this IR? https://gist.github.com/jensnockert/6665213
[00:44:05] <adu> it makes no difference to me
[00:44:27] <adu> I just like to minimize the amount of custom builds by using macports
[00:44:45] <Eridius> adu: macports is notable for reinstalling system-provided components, because it likes to control everything
[00:44:58] <Eridius> adu: whereas homebrew is happy to just use system-provided components if there's no particular reason not to
[00:45:16] <Eridius> homebrew also does have "pre-brewed" versions of some of the more popular projects
[00:45:26] <Eridius> jensnockert: if only I understood LLVM IR
[00:45:39] <adu> well, I find that macosx-provided apache and mysql are notoriously difficult to configure
[00:45:51] <jensnockert> I thought I mostly did, but this is just silly.
[00:45:51] <Eridius> macosx doesn't provide mysql...
[00:46:09] <jensnockert> Mac OS X only provides Postgres iirc?
[00:46:13] <adu> er i mean sqlite3
[00:46:24] <Eridius> jensnockert: I can guess that this IR represents a function called add() that takes two i8 args and returns an i8, and is implemented by calling some sort of `add` instruction with the two args
[00:46:35] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[00:46:40] <jensnockert> Eridius: Yes, but there is a syntax error somewhere.
[00:46:45] <Eridius> adu: what's wrong with macosx-provided sqlite3? Only thing I can recall is I don't think it's configured to enable full-text searching
[00:46:54] <strcat> jensnockert: don't think you're supposed to number the parameters
[00:47:03] <Eridius> jensnockert: I have no idea about the format of IR. Is the lack of indentation on line 2 significant? What about line terminators?
[00:47:07] <strcat> at least, the IR builder stuff isn't like tha
[00:47:16] <jensnockert> Urghâ€¦
[00:47:20] <adu> Eridius: nothing, my comment was primarily about apache
[00:47:27] <jensnockert> I'll change them to %arg0 or something and try again.
[00:47:50] <jensnockert> strcat: The error message is at the top btw.
[00:47:53] <jensnockert> If that helps any.
[00:48:07] <Eridius> jensnockert: ahh, totally missed that
[00:48:42] *** Quits: z0w0 (zack@64F0E14B.3C29B4A9.2CE63F58.IP) (Client exited)
[00:49:01] * jensnockert prods Rust to compile itself faster.
[00:49:29] <jensnockert> I should probably disable optimizationsâ€¦
[00:49:57] <strcat> tthat will make it compile *itself* much slower
[00:50:33] <engla> jensnockert:   define i8 @add(i8, i8) { %result = add i8 %0, %1 ret i8 %result }   with some newlines
[00:50:51] <jensnockert> engla: Tried that, but that also erred :S
[00:51:03] <engla> it compiled here
[00:51:07] <Eridius> curiously the llvm.org/docs/LangRef.html doesn't seem to define the argument list format
[00:51:26] <jensnockert> Eridius: The LangRef is horribad in many other ways too ;)
[00:51:28] <engla> jensnockert: the add is typed
[00:52:18] <jensnockert> Yeah, but that is red herring.
[00:52:23] <adu> i forget, do i have to build llvm custom too?
[00:52:39] <Eridius> adu: rust will build llvm for you
[00:52:44] <adu> oh ok
[00:52:50] <jensnockert> define double @increment(double %0) {
[00:52:50] <jensnockert>          ret f64 %result
[00:52:50] <jensnockert> }
[00:52:53] <jensnockert> Fails too.
[00:53:26] <strcat> f64 isn't a type and result isn't declared ;p
[00:53:39] <Luqman> you're not suppose to number the args afaik
[00:53:41] <strcat> and I don't think you can number params that way
[00:53:44] <strcat> yeah
[00:53:50] <jensnockert> strcat: Err, yes.
[00:53:53] *** Joins: z0w0 (zack@64F0E14B.3C29B4A9.2CE63F58.IP)
[00:53:57] <jensnockert> strcat: And no, you cannot
[00:54:03] <jensnockert> strcat: %arg0 worked fine.
[00:54:11] <jensnockert> Everything works now.
[00:54:29] <jensnockert> Just that the iteration time takes ages since I need to rebuild rustc.
[00:54:37] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Quit: Leaving)
[00:54:53] *** Joins: OSstudent (Mibbit@moz-5AF9AA47.hsd1.va.comcast.net)
[00:55:24] * strcat just wants to land the fixed snapshot for 0.8
[00:55:51] * jensnockert hugs strcat.
[00:56:00] <Eridius> what's wrong with the snapshot?
[00:56:07] <SiegeLord> Damn, I should just stay out of bikeshed discussions >_<
[00:56:16] <Eridius> SiegeLord: :P
[00:56:22] <strcat> Eridius: the linux snapshot is not portable
[00:56:31] <Eridius> SiegeLord: thanks for contributing. I just happen to disagree with you :P
[00:56:33] <strcat> it only runs on distros choosing to split ncurses up
[00:56:35] <strcat> which is non-default
[00:56:36] <Eridius> strcat: :/
[00:56:40] <tiffany> both of the segfaults I've been getting seem to be caused by loading the graphics module of my engine
[00:56:42] <tiffany> that's odd
[00:56:59] <Eridius> SiegeLord: (in case it's not obvious, I'm Kevin Ballard from the bikeshed)
[00:57:04] <jensnockert> Now I can do stupid shit like https://gist.github.com/jensnockert/6665213
[00:57:16] <jensnockert> Super-stupid shitâ€¦
[00:57:24] <Eridius> jensnockert: what's the benefit of this?
[00:57:39] <engla> strcat you should land the option change .. it's a change that once you thunk it you can't unthink it
[00:57:44] <engla> jensnockert: nice
[00:57:48] <jensnockert> I can hack out some bits from the compiler, and put them in libstd, mostly.
[00:57:56] <Eridius> jensnockert: so what, replacing some intrinsics?
[00:58:05] <engla> it's better than inline asm
[00:58:19] <jensnockert> Eridius: Essentially, but also stuff like the Add trait for primitives.
[00:58:25] <Eridius> jensnockert: nice
[00:59:45] *** Joins: eatkinson (eatkinson@moz-E57448EF.airbears2.berkeley.edu)
[01:00:37] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[01:00:48] *** Quits: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net) (Ping timeout)
[01:01:02] <jensnockert> Eridius: Need to add a bit of support to allow for new "declare" statements, but after that, it should work excellent.
[01:01:54] <aatch> jensnockert, I'm not sure if I should be impressed or horrified
[01:02:01] <aatch> I'm thinking both?
[01:02:06] <jensnockert> aatch: Horrified, definitely horrified.
[01:02:10] *** Joins: jasdevsingh (jasdevsing@moz-21CF4479.hsd1.va.comcast.net)
[01:02:18] *** Joins: saneyuki (Tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[01:02:21] *** Joins: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net)
[01:02:34] <aatch> jensnockert, how'd you do it btw? I could never see anything about injecting IR into LLVM
[01:02:35] <jensnockert> Is definitely spelled that way?
[01:02:36] <tiffany> is anyone aware of segfaults after the exit of main() while working with glfw, opengl, glew, harfbuzz, freetype2, or cairo?
[01:02:57] <sp3d> http://d-e-f-i-n-i-t-e-l-y.com/
[01:03:10] <jensnockert> aatch: It is well hidden, called ParseAssemblyString
[01:03:46] <jensnockert> sp3d: I think I spelled it right, but it is hard to tell.
[01:03:58] <cmr> tiffany: servo uses all of those, I think.
[01:03:59] *** Quits: saneyuki (Tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[01:04:14] <aatch> I use the fact that definitely contains the word "finite" to remember it.
[01:04:30] <tiffany> figuring out which one is going wrong would require tearing my graphics code apart
[01:05:05] <aatch> tiffany, does gdb not give you any clues?
[01:05:09] <tiffany> though, the only one initialized is glfw
[01:05:27] <tiffany> aatch: one segfault doesn't happen under gdb, and the other happens inside of rust_main() after main() exits
[01:05:41] <aatch> tiffany, ugh, one of those
[01:05:42] <cmr> tiffany: the exit of rust's main? Is it exploding when running the annihilator (destructing and freeing @-ptrs)?
[01:05:43] <tiffany> in some function with deallocate in the name
[01:06:27] <tiffany> #0  0x00007fffec26fd00 in ?? ()
[01:06:27] <tiffany> #1  0x00007ffff6b2de62 in __nptl_deallocate_tsd () from /usr/lib/libpthread.so.0
[01:07:08] <tiffany> oh, I have an idea of what it is
[01:07:17] <tiffany> the graphics module is the only one which I have returning values into rust right now
[01:07:34] <tiffany> maybe my code to convert some static data from C types to rust types is bad
[01:08:28] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Ping timeout)
[01:08:30] <tiffany> http://pastebin.ca/2457056 can anyone see if there's something immediately wrong with this?
[01:08:38] <Eridius> cmr, Seldaek: found an unfortunate design problem with rustdoc_ng: it only shows documentation for trait methods that's present on the trait itself. It won't show any documentation present on implementations of the trait
[01:08:46] <tiffany> the data that function returns is supposed to be statically allocated, that is, never freed
[01:08:59] <Eridius> aside from just generally not allowing implementations to provide extra info, there are traits in libstd where all the documentation is on the implementation (notably StrSlice)
[01:10:36] <cmr> Eridius: Yes, but that's not a problem with rustdoc, that's a problem with the code.
[01:10:42] <cmr> We discussed this yesterday.
[01:10:53] <Eridius> cmr: it's a problem with rustdoc if a particular trait implementation wishes to provide more information
[01:11:02] <cmr> Eridius: The docs on the impl show up on the type page, but the builtins don't have types in the module heirarchy.
[01:11:09] *** Quits: slack1256 (slack@moz-84917BD2.baf.movistar.cl) (Quit: Konversation terminated!)
[01:11:14] <Eridius> cmr: e.g. in my path rewrite, WindowsPath provides extra information on its trait impl
[01:11:19] <Eridius> ahhh
[01:11:26] <Eridius> ok I see. That works
[01:11:33] <strcat> tiffany: it won't be statically allocated because you've got a Result and some ~str inside it
[01:11:44] <strcat> so when it goes out of scope, the Result is gone and the interior strings are destroyed
[01:11:56] <tiffany> well the conversion to rust doesn't have to be static
[01:12:05] <tiffany> as long as rust isn't free'ing the data returned by the function
[01:12:16] <strcat> which function?
[01:12:23] <tiffany> the il_dependencies C function
[01:12:55] <tiffany> I'm not really all that familiar with rust's ffi stuff, is this copying or moving?
[01:14:08] *** Quits: Guest_ (textual@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: Textual IRC Client: www.textualapp.com)
[01:14:53] <strcat> tiffany: rust only has one form of built-in way of passing/returning
[01:14:58] <strcat> it does a shallow memcpy
[01:15:04] <strcat> never an exception to that
[01:15:35] *** Joins: jstoja (julienbord@C5477ED6.490653D0.7B75DA8D.IP)
[01:15:42] <strcat> a 'move' just means the source can no longer be used, because the type had a destructor/&fn/&mut
[01:17:08] <tiffany> so from_buf_raw will memcpy the buffer, but not the contents of the pointers it contains; and CString::new will copy the contents of those pointers to create CStrings?
[01:17:26] <tiffany> or did I misinterpret
[01:17:28] <Eridius> what? no
[01:17:35] <strcat> tiffany: I was talking about language features
[01:17:39] <strcat> not library functions doing whatever
[01:17:49] <Eridius> tiffany: CString::new() doesn't copy anything, at all
[01:18:00] <tiffany> that could be my problem then
[01:18:53] <tiffany> to_owned always copies, right?
[01:19:26] <strcat> the string one? it creates a new allocation and copies into it
[01:20:04] <tiffany> so rust isn't using the data returned from il_dependencies outside of that function
[01:21:15] *** Quits: OSstudent (Mibbit@moz-5AF9AA47.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[01:22:03] <engla> Eridius: https://github.com/mozilla/rust/issues/9406  your path work is related I guess?
[01:22:12] <tiffany> strcat: when you were talking about passing/returning, did you mean moving things between slots?
[01:22:37] <strcat> I meant passing/returning/assigning by-value
[01:23:17] <tiffany> I was aware those did shallow copies, I guess I was confused by terminology
[01:23:47] <strcat> (although essentially everything is 'by-value', since a borrowed pointer is just a regular value)
[01:23:54] <tiffany> the distinction between into_* and to_* style functions, maybe?
[01:24:22] <strcat> that's different than what I was talking about
[01:24:34] <strcat> into vs. to is a library-level thing
[01:24:43] <tiffany> well I'm thinking of library-level stuff
[01:25:10] <strcat> ah
[01:25:35] <cmr> into_* takes by self and shouldn't allocate, to_* takes by references and will do all the allocation it needs to
[01:26:02] <cmr> ...iirc
[01:26:15] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[01:27:12] <engla> into_owned is defined for the string types and copies if needed
[01:27:18] <engla> taking by value
[01:30:38] *** Quits: jstoja (julienbord@C5477ED6.490653D0.7B75DA8D.IP) (Ping timeout)
[01:31:16] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[01:32:01] <Eridius> engla: yes my path work should allow that to be fixed (glob would have to switch to the appropriate vector constructor. I'm not looking forward to porting the compiler and standard libraries)
[01:32:59] <engla> it needs to happen anyway
[01:33:13] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[01:33:49] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[01:34:22] <tiffany> oh
[01:34:24] <tiffany> that's interesting
[01:34:30] <tiffany> it's segfaulting inside of getopt_long
[01:34:54] <strcat> getopt reshuffles around the argv you pass it
[01:35:08] <strcat> and argv is supposed to be a null-terminated array of pointers
[01:35:42] <tiffany> oh
[01:35:44] <tiffany> that would probably do it
[01:36:53] *** Quits: adu (ajr@moz-BF2B1AE4.washdc.fios.verizon.net) (Quit: adu)
[01:36:53] <tiffany> how do I generate a null-terminated array from a vector?
[01:37:26] <strcat> assuming you have an array of raw pointers, put a null pointer at the end
[01:37:42] *** Joins: adu (ajr@moz-BF2B1AE4.washdc.fios.verizon.net)
[01:38:49] <erickt> engla: oops. I did that right before I had to run out
[01:41:09] <tiffany> I tried printing the values in argv and it segfaults on the first one
[01:41:28] <tiffany> oh, I think I know what's going wrong
[01:43:17] <tiffany> or not
[01:43:29] <tiffany> I thought it was freeing the vector I was makign the pointer from
[01:43:36] <tiffany> before I could use it
[01:44:53] *** Joins: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP)
[01:45:42] *** Joins: cairsds (Mibbit@moz-3ECBAB41.dfri.se)
[01:46:18] <tiffany> if you make a * pointer from a ~, and the ~ goes out of scope, will the * pointer will become invalid?
[01:46:23] *** Joins: Chef (ajr@moz-907AA849.dsl.teksavvy.com)
[01:46:36] <cmr> Yes
[01:46:36] <benh> yes
[01:46:37] <strcat> depends on how you make it
[01:46:41] <bogen> how do I go from ~str to &-ptr?   error: mismatched types: expected `&std::path::PosixPath` but found `~str` (expected &-ptr but found ~str)
[01:46:46] <strcat> if the ~ is still around... it will be freed
[01:47:15] *** Quits: eatkinson (eatkinson@moz-E57448EF.airbears2.berkeley.edu) (Quit: eatkinson)
[01:47:23] <cmr> bogen: it wants a path, you're giving it a string.
[01:47:34] <cmr> bogen: do &Path(your_str)
[01:48:24] <tiffany> I'm not sure how to write this function
[01:48:30] <tiffany> I need to convert os::args() into argc+argv
[01:48:39] <bogen> cmr: ok, just a cast... I'm caching on
[01:49:14] <cmr> bogen: not a cast. you're constructing a new Path.
[01:49:28] <strcat> tiffany: it will be freed when it goes out of scope
[01:49:37] <strcat> so you need to assign it somewhere where it will live long enough
[01:49:52] <strcat> append a null, and pass it as a ptr
[01:50:09] <strcat> but you also need to convert it to an array of raw ptrs first...
[01:50:12] <strcat> &str isn't a ptr
[01:50:12] *** Joins: jstoja (julienbord@moz-1A1C2BAF.ip.tsinghua.edu.cn)
[01:51:32] <tiffany> I have it returning the vector of strings, and the vector of *i8 and it's still segfaulting
[01:51:49] *** Quits: adu (ajr@moz-BF2B1AE4.washdc.fios.verizon.net) (Quit: adu)
[01:52:03] <strcat> how are you converting this stuff?
[01:52:28] <strcat> you have ~[~str] lets say, how are you converting that to ~[*u8] and then **u8 atm?
[01:52:33] <tiffany> http://pastebin.ca/2457078
[01:54:00] <strcat> tiffany: you know to_c_str is allocating + copying, right?
[01:54:08] <tiffany> oh
[01:54:29] <tiffany> so I only need to return the ~ pointer for the vector then?
[01:55:25] *** Quits: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca) (Quit: Leaving.)
[01:56:23] <tiffany> oh
[01:56:25] <tiffany> that's weird
[01:56:40] <tiffany> argv is 0x4
[01:57:15] <tiffany> and argc is negative several million
[01:57:57] <tiffany> ah
[01:58:05] <tiffany> I was using extern fn instead of extern "C" fn
[01:59:22] <tiffany> that seems to have fixed it
[02:00:18] <tiffany> still segfaulting after main() though
[02:08:58] *** Quits: Earnestly (earnest@moz-BE290A2B.dyn.plus.net) (Ping timeout)
[02:08:59] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[02:09:22] <luisbg> good night everybody
[02:11:17] *** Joins: pcwalton (pcwalton@moz-BBE3ABD.mv.mozilla.com)
[02:11:17] *** ChanServ sets mode: +ao pcwalton pcwalton
[02:13:05] *** Joins: jstojaa (julienbord@C5477ED6.490653D0.7B75DA8D.IP)
[02:13:25] <jstojaa> hi
[02:13:44] *** Quits: jstojaa (julienbord@C5477ED6.490653D0.7B75DA8D.IP) (Quit: leaving)
[02:15:52] *** Quits: btipling (btipling@moz-D51E0AEB.xen.prgmr.com) (Quit: ZNC - http://znc.sourceforge.net)
[02:16:28] *** Joins: btipling (btipling@moz-D51E0AEB.xen.prgmr.com)
[02:16:56] *** Quits: LimeBurst (me@247D1419.D73964AC.27A8748.IP) (Quit: leaving)
[02:17:10] *** Joins: LimeBurst (me@247D1419.D73964AC.27A8748.IP)
[02:20:11] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[02:22:48] <jensnockert> Stupid overload: https://gist.github.com/jensnockert/6665784
[02:23:29] <jensnockert> Inline IR modules \o/ /o\ \o\
[02:24:20] *** Joins: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net)
[02:24:29] *** Joins: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca)
[02:24:31] *** Joins: devin909 (Mibbit@moz-D6B64647.bootp.virginia.edu)
[02:24:51] *** Quits: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca) (Input/output error)
[02:24:54] *** Joins: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca)
[02:25:02] <devin909> i've been seeing a lot of ~[~str] . what kind of pointer is this?
[02:25:18] <pcwalton> unique pointer to array of unique pointers to strings
[02:25:44] <pcwalton> vector<string> if that helps you
[02:25:46] <devin909> i see, so its pretty much an array of string
[02:26:03] *** Quits: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca) (Quit: Leaving.)
[02:26:08] <engla> \o/ /o/o\ <o /o\
[02:27:40] <cmr> jensnockert: Now how much of librustc can you rip out and make useless for non-users of std? :p
[02:27:56] <jensnockert> cmr: Hmâ€¦ we'll see.
[02:28:10] <jensnockert> Quite a bit, I think.
[02:28:49] <cmr> I don't think that's actually a good idea.
[02:28:54] <cmr> I don't really see any benefit
[02:29:12] <cmr> Although the intrinsics could be simplified
[02:29:34] <strcat> some
[02:29:46] <strcat> lots use uint/int, which is target dependent
[02:29:53] <cmr> ah
[02:30:14] *** Joins: saneyuki (Tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[02:30:24] <strcat> I guess you could cfg() that all
[02:30:39] <cmr> yeah but eh
[02:31:12] <jensnockert> Or you could just add a type-alias in LLVM using a cfg, and it would magically fix itself, I think.
[02:31:50] <jensnockert> We'll see.
[02:31:51] *** Joins: Guest_ (textual@moz-4C5426D6.hsd1.sc.comcast.net)
[02:32:03] *** Guest_ is now known as polyfractal
[02:32:20] <jensnockert> I'm mostly doing it to prove to myself that I could do it.
[02:32:21] <jensnockert> https://github.com/jensnockert/rust/tree/inline-ir
[02:32:26] <jensnockert> ^- is the code btw.
[02:33:41] *** Quits: paulproteus (quassel@rose.makesad.us) (Ping timeout)
[02:33:56] *** Joins: paulproteus (quassel@moz-E86A3B42.makesad.us)
[02:39:15] *** Quits: zz_kimundi (kimundi@moz-532457B.dip0.t-ipconnect.de) (Ping timeout)
[02:39:55] <acrichto> flaper87|afk: thanks for rebasing, I'm going to bring this up with brson tomorrow to see what he thinks about it
[02:40:10] <acrichto> strcat: oh I'll fix the rust icon, that's not fantastic
[02:40:11] *** Quits: Ferreus (daniel@moz-548B3C78.dyn.telefonica.de) (Quit: WeeChat 0.4.1)
[02:40:36] *** Quits: paulproteus (quassel@rose.makesad.us) (Ping timeout)
[02:40:47] *** Joins: paulproteus (quassel@moz-E86A3B42.makesad.us)
[02:40:48] *** Quits: jstoja (julienbord@moz-1A1C2BAF.ip.tsinghua.edu.cn) (Ping timeout)
[02:41:58] <polyfractal> I feel silly even asking this (very new to Rust), but I noticed the compiler won't let allow dynamically sized arrays (via variable). Are vectors the only option if you want dynamic-sized arrays?
[02:42:31] <acrichto> strcat: looks like a snapshot succeeded, thanks! I'm making a commit for them right now
[02:42:37] *** Joins: zz_kimundi (kimundi@moz-BFDA4039.dip0.t-ipconnect.de)
[02:42:39] <strcat> acrichto: I already did ;p
[02:42:59] <acrichto> strcat: is it in the queue?
[02:43:04] *** zz_kimundi is now known as kimundi
[02:43:09] <acrichto> polyfractal: right now that's the solution, yeah
[02:43:15] <strcat> acrichto: https://github.com/mozilla/rust/pull/9415 I just did it after you pinged me
[02:43:24] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[02:43:25] * strcat was playing a game
[02:43:44] <acrichto> strcat: haha, aww no stage0 code to remove
[02:44:04] <strcat> hopefully the libtinfo dep is gone... lets see
[02:44:12] * acrichto crosses fingers
[02:44:27] <cmr> It should be.
[02:44:59] <strcat> nope. not gone
[02:45:05] <cmr> dammit
[02:45:13] *** Joins: jstoja (julienbord@moz-1A1C2BAF.ip.tsinghua.edu.cn)
[02:45:14] <strcat> hrm
[02:45:26] <strcat> still in librustllvm :|
[02:45:28] <polyfractal> acrichto: great, thanks.  :)
[02:45:29] <strcat> acrichto: oh I know why...
[02:45:34] <strcat> we need to use the llvm clean trigger
[02:45:36] <strcat> damn
[02:45:56] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[02:45:56] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/OHlwlg
[02:45:56] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[02:45:56] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[02:45:56] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/Eq3Q_g
[02:45:56] <ghrust> 13rust/06auto 14088a5f6 15Daniel Micay: register snapshots
[02:45:56] <ghrust> 13rust/06auto 14168a71c 15bors: auto merge of #9415 : thestinger/rust/snapshot, r=alexcrichton
[02:45:56] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[02:45:58] <strcat> what a PITA ;p
[02:45:58] <acrichto> strcat: oh whoops
[02:47:56] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[02:47:56] <ghrust> 01[13rust01] 15thestinger pushed 1 new commit to 06snap-stage3: 02http://git.io/GHQhiQ
[02:47:56] <ghrust> 13rust/06snap-stage3 1473a3c69 15Daniel Micay: touch LLVM clean trigger
[02:47:56] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[02:48:03] <strcat> :s
[02:48:17] *** Quits: jstoja (julienbord@moz-1A1C2BAF.ip.tsinghua.edu.cn) (Quit: leaving)
[02:48:22] <acrichto> strcat: we don't want snapshots based on commits that aren't in master though
[02:48:58] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[02:48:58] <ghrust> 01[13rust01] 15thestinger pushed 1 new commit to 06master: 02http://git.io/6NT_Fw
[02:48:58] <ghrust> 13rust/06master 148c45423 15Daniel Micay: touch LLVM clean trigger
[02:48:58] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[02:49:05] <strcat> ugh
[02:49:12] <strcat> different id
[02:49:25] <acrichto> bots can be cancelled
[02:49:38] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[02:49:38] <ghrust> 01[13rust01] 15thestinger 04force-pushed 06snap-stage3 from 1473a3c69 to 148c45423: 02http://git.io/f3Qwfg
[02:49:38] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[02:50:24] <strcat> there
[02:50:49] <strcat> now this time it'll work...
[02:50:51] <strcat> ;[
[02:51:20] <strcat> and everyone has the fun of rebuilding LLVM, I guess
[02:51:34] <acrichto> you'll probably have to re-trigger the built at least once
[02:51:47] <acrichto> llvm doesn't like being upgraded, esspecially on windows
[02:51:48] <strcat> from those rustpkg ones?
[02:51:52] <strcat> acrichto: oh, yeah
[02:52:00] <acrichto> also rustpkg may strike again yeah...
[02:52:55] <strcat> oh well at least I don't have to rebuild llvm locally
[02:53:15] <strcat> touch -d 1980-01-01 saves the day
[02:53:20] <cmr> heh]
[02:53:34] *** Joins: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net)
[02:57:57] *** Joins: adu (ajr@moz-BF2B1AE4.washdc.fios.verizon.net)
[02:59:34] *** Quits: josedonizetti (josedonize@moz-CA73D699.cpe.teksavvy.com) (Quit: josedonizetti)
[03:05:54] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[03:05:54] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14168a71c to 148c45423: 02http://git.io/N3iJvQ
[03:05:54] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[03:06:02] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[03:19:14] *** Joins: cls2be (chatzilla@moz-51A0F41F.hsd1.va.comcast.net)
[03:19:24] *** Quits: tikue_ (tkuehn@6D6C18A9.E2CAEE6E.689607DE.IP) (Quit: tikue_)
[03:19:38] *** Joins: tikue_ (tkuehn@6D6C18A9.E2CAEE6E.689607DE.IP)
[03:20:53] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[03:20:53] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1456ee266 to 148c45423: 02http://git.io/N3iJvQ
[03:20:53] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[03:20:54] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[03:20:54] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/d-twNA
[03:20:54] <ghrust> 13rust/06auto 14a5cf9fd 15Scott Lawrence: Add docs for extra::semver
[03:20:54] <ghrust> 13rust/06auto 1440834a0 15bors: auto merge of #9413 : bytbox/rust/master, r=alexcrichton
[03:20:55] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[03:21:20] <cls2be> Can someone tell me if there's a function that removes a range of elements from a vector?
[03:23:40] <adu> hmm, my program no longer compiles
[03:23:43] <adu> I get "error: expected `in`, found `{`"
[03:23:54] <tiffany> howcome rustpkg only checks to make sure main.rs is fresh, and not other files in the create?
[03:24:13] <cmr> adu: for loop syntax changed
[03:24:25] <cmr> tiffany: bug
[03:24:25] <adu> cmr: what did it change to?
[03:24:36] <cmr> adu: for pattern in iterator { body }
[03:24:38] <cmr> eg
[03:24:50] <cmr> rusti: for i in range(0, 5) { print!("{} ", i); }
[03:24:54] -rusti- 0 1 2 3 4 ()
[03:25:16] <strcat> it's covered in the extended release notes + iterator tutorial
[03:25:18] *** Joins: ChrisMorgan (chris@moz-C61AABB3.its.monash.edu.au)
[03:25:25] <engla> cls2be: I don't think there is a method that does that directly. there is .retain(), .swap_remove(), .truncate() etc
[03:25:29] <adu> cmr: "for i, ch in str::each_chari(s) { â€¦ }"?
[03:25:48] <cmr> for ch, i in s.iter().enumerate(), iirc
[03:25:55] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[03:25:55] <strcat> (ch, i)
[03:26:01] <strcat> tuples always have ()
[03:26:04] <cmr> ah, yes.
[03:26:23] <engla> and enumerate places the index before the element
[03:26:27] <engla> so (i, ch)
[03:26:30] <cmr> oh
[03:26:34] <cls2be> engla: Thank you
[03:27:17] <adu> http://static.rust-lang.org/doc/tutorial-container.html ?
[03:27:28] <adu> I get AccessDenied
[03:27:36] <strcat> adu: http://static.rust-lang.org/doc/master/tutorial-container.html#iterators
[03:27:36] <cmr> http://static.rust-lang.org/doc/master/tutorial-container.html
[03:27:43] <strcat> and the release notes
[03:28:02] <strcat> str::each_chari was deprecated in rust 0.7 though
[03:28:17] <strcat> was it actually still around?
[03:28:24] <strcat> I thought those were gone in 0.6/0.7
[03:33:33] <adu> soâ€¦ what replaced each_chari?
[03:33:47] <strcat> iterators
[03:34:05] <engla> so many changes
[03:34:07] <strcat> cmr told you the replacement code
[03:34:30] *** Joins: josedonizetti (josedonize@moz-CA73D699.cpe.teksavvy.com)
[03:34:43] *** Joins: naq (naq@D5C2D2DF.E4265FCD.E481B5B.IP)
[03:34:45] <adu> s.iter().enumerate()? ok
[03:35:03] *** Quits: GeneralMaximus (ankur@CE720DCC.457F5A6C.D5D59AD9.IP) (Quit: Computer has gone to sleep.)
[03:35:18] <tiffany> rustpkg is failing to find packages as well
[03:35:40] *** Quits: ChrisMorgan (chris@moz-C61AABB3.its.monash.edu.au) (Ping timeout)
[03:35:48] *** Quits: tikue_ (tkuehn@6D6C18A9.E2CAEE6E.689607DE.IP) (Ping timeout)
[03:35:58] <engla> did each_chari give byte indices or counted indices?
[03:36:34] <tiffany> do I put bug reports for rustpkg in the same place as rustc?
[03:36:41] *** Joins: maik (maik@moz-85739CD7.dip0.t-ipconnect.de)
[03:36:45] <strcat> yes, rust is 1 project on github
[03:38:11] *** Joins: ChrisMorgan (chris@moz-C61AABB3.its.monash.edu.au)
[03:38:49] <adu> so does http://static.rust-lang.org/doc/master/std/iter/struct.Enumerate.html mean it's (ch, i) or (i, ch)?
[03:39:26] <strcat> (uint, A)
[03:39:26] <cmr> (uint, A)
[03:39:33] <strcat> where A is the element type of the iterator you use it on
[03:39:33] <cmr> (index, item)
[03:41:53] <adu> now I'm getting "error: failed to resolve import `extra::getopts`"
[03:41:54] *** Joins: variable (root@B7EB2247.C9C74790.67659D25.IP)
[03:42:12] <variable> ... rust 0.7 fails to build
[03:42:44] <variable> http://paste.pound-python.org/show/7k1huG4O7B6WxCo83NGw/
[03:42:58] <variable> also, why in the world does rust bundle llvm ? :(
[03:43:04] <adu> is get opts still available?
[03:43:09] <strcat> variable: because it needs LLVM patches
[03:43:12] <strcat> adu: yes, look at the docs
[03:43:13] *** Quits: cls2be (chatzilla@moz-51A0F41F.hsd1.va.comcast.net) (Quit: ChatZilla 0.9.90.1 [Firefox 21.0/20130511120803])
[03:43:13] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[03:43:20] <strcat> it's there
[03:43:24] <variable> strcat: ah, I see :(
[03:43:29] <variable> strcat: in any case it doesn't build
[03:43:41] <strcat> variable: looks like your C++ compiler is too old to build it
[03:43:46] <adu> "error: expected item but found `exter`"
[03:44:03] <strcat> variable: or just broken
[03:44:04] <variable> strcat: unlikely
[03:44:08] <variable> but possible
[03:44:09] <adu> I just copy-pasted the beginning of these docs: http://static.rust-lang.org/doc/master/extra/getopts/index.html
[03:44:26] <cmr> adu: typo
[03:44:31] <cmr> exter -> extern
[03:44:33] <variable> strcat: my C++ compiler is clang 3.3
[03:44:34] <adu> oh ok
[03:44:42] <strcat> variable: well you're the first person with this error and a few thousand people have likely built it ;\
[03:44:52] <strcat> although you should use master, not 0.7
[03:45:06] <strcat> they're just tags on master, not supported releases
[03:45:15] <variable> ah
[03:45:25] <variable> let me build from master
[03:47:14] *** Quits: josedonizetti (josedonize@moz-CA73D699.cpe.teksavvy.com) (Quit: josedonizetti)
[03:47:49] *** Joins: sw17ch (sw17ch@moz-675AFBCF.hsd1.mi.comcast.net)
[03:47:57] *** Joins: josedonizetti (josedonize@moz-CA73D699.cpe.teksavvy.com)
[03:48:32] <pcwalton> what did std::iterator turn into?
[03:49:23] <variable> cfg: disabling valgrind due to its unreliability on this platform
[03:49:26] <strcat> pcwalton: std::iter
[03:49:27] <variable> in what universe....
[03:49:51] <tiffany> okay...
[03:49:54] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Ping timeout)
[03:49:57] <cmr> variable: what are you on?
[03:50:01] <variable> FreeBSD
[03:50:10] <tiffany> rustpkg thinks this file is fresh and isn't building the package despite the crate not existing
[03:50:15] <pcwalton> BSD isn't very well maintained
[03:50:19] <pcwalton> that is, the BSD port of rust
[03:50:27] <variable> pcwalton: I'm compiling from master
[03:50:29] *** Joins: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP)
[03:50:30] *** Quits: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP) (Z:lined (Open Proxy found on your host. Please visit www.blitzed.org/proxy?ip=115.68.131.49 for more information.))
[03:50:39] <pcwalton> it still isn't very well maintained :)
[03:50:45] <variable> :(
[03:50:51] <strcat> it works on the buildbot, at least
[03:50:56] <variable> is this some rust specific valgrind hacks?
[03:50:59] <pcwalton> yeah, I want to turn off the bot honestly
[03:51:01] <variable> can the switch be flipped ?
[03:51:05] <pcwalton> you can try
[03:51:07] <variable> pcwalton: which bot? the FreeBSD one
[03:51:08] <variable> ?
[03:51:09] <pcwalton> yes
[03:51:12] <variable> why1?
[03:51:13] <strcat> pcwalton: it's not the bottleneck afaik
[03:51:15] <variable> * why !?
[03:51:18] <pcwalton> FreeBSD is not Tier 1 as far as I'm concerned
[03:51:21] <strcat> I don't think it runs the full test suite
[03:51:22] <variable> pcwalton: *please* leave it on
[03:51:22] <tiffany> am I the only person for which rustpkg just doesn't work at all?
[03:51:23] <pcwalton> we don't have enough maintainers
[03:51:31] <pcwalton> variable: are you volunteering to do the maintenance?
[03:51:36] <tiffany> every time I try to test a problem with it I run into another problem
[03:51:41] <variable> pcwalton: what kind of maintaince ?
[03:51:53] <pcwalton> make sure it continues to build, fixing bugs in it
[03:52:16] <variable> the former, sure; the latter I'd need signifigent amounts of help with 
[03:52:25] <pcwalton> I just know that our development has been slowed down due to BSD in the past
[03:52:31] *** Quits: ChrisMorgan (chris@moz-C61AABB3.its.monash.edu.au) (Ping timeout)
[03:52:50] <variable> pcwalton: it would be very sad to lose FreeBSD as a platform that rust runs on
[03:52:50] <pcwalton> I'm fine with leaving the bot building it but I'm unsure that I'd be willing to back patches out because they break BSD, is all
[03:53:05] <variable> I can't imagine running systems code on !BSD
[03:53:22] <adu> "ch == '\n'" and "std::char::is_whitespace(ch)" both fail with type errors "expected `uint` but found `char`" and "expected `char` but found `uint`" respectively
[03:53:26] <variable> pcwalton: have you tried to engage the BSD folk at all?
[03:53:46] <strcat> adu: you've got the pattern backwards
[03:53:55] <variable> I'm sure that if there were any questions about FreeBSD they would be willing to help
[03:54:02] <strcat> variable: you could very well be the first person to actually compile rust on freebsd
[03:54:07] <pcwalton> no
[03:54:07] <strcat> beyond the buildbot
[03:54:09] <pcwalton> the support was contributed
[03:54:12] <strcat> ah
[03:54:12] <pcwalton> a while ago
[03:54:21] <variable> strcat: I know that there is a port for 0.7
[03:54:24] <adu> strcat: pattern?
[03:54:35] <variable> pcwalton: I'd guess that once they contributed support they didn't expect there to be much breakage
[03:54:41] <strcat> adu: the for loop syntax is 'for pattern in iterator {}' where pattern works like let/match
[03:54:45] <variable> anyone email them (and cc the bsd list?) 
[03:55:07] <strcat> let pattern = expr; is the let syntax, for example
[03:55:13] <strcat> let (a, b) = (1, "foo")
[03:55:24] <adu> strcat: how does that solve the uint/char issue?
[03:55:30] <strcat> you have them backwards
[03:55:40] <variable> pcwalton: I'd love to use and try rust but it would be really sad if I had to use Linux to do that
[03:55:42] <strcat> your ch is the index
[03:55:52] *** Joins: ChrisMorgan (chris@moz-173FDD52.its.monash.edu.au)
[03:56:05] <adu> strcat: I changed that to "for (ch, i) in s.iter().enumerate()"
[03:56:06] <pcwalton> I'm happy keeping BSD tier 1 if someone maintains it, but the core team is currently focused on platforms that are of importance for Servo
[03:56:08] <engla> adu: it's (i, ch)
[03:56:11] <adu> strcat: I'm working on another issue now
[03:56:30] <adu> engla: ok I can swap them again
[03:56:31] *** Joins: skoizza (Mibbit@173CD8FD.E8B6FA7D.DDE5D3F6.IP)
[03:56:35] <pcwalton> which is currently Windows, Mac, Linux, with userbase of something like 90%, 9%, 1%
[03:56:38] <cmr> variable: I'd be interesting in helping maintain BSD, but I don't have lots of BSD knowledge.
[03:56:44] <strcat> adu: enumerate yields (uint, A)
[03:56:47] *** Quits: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net) (Quit: eatkinson)
[03:57:00] <pcwalton> now we've been doing a bad job of that given our windows support ;)
[03:57:16] <variable> cmr: we are quite welcoming to questions and I could either answer questions or figure out where to get them
[03:57:35] <pcwalton> and if you want to maintain BSD, then that's great! I think it's great for the project to have BSD
[03:57:36] * cmr kicks his freebsd vm back up
[03:57:40] <skoizza> What module should I be looking in for trying to handle events in rust, specifically listening for key strokes?
[03:57:49] <pcwalton> anyway, back to the topic...
[03:58:03] <cmr> skoizza: So, we don't have any highlevel abstraction or even a lowlevel abstraction for TTYs.
[03:58:05] <pcwalton> I think the configure says "disabling valgrind due to unreliability" if the platform is not whitelisted
[03:58:20] <cmr> skoizza: You need to put the TTY into raw mode and then read on the fd (which is likely stdin)
[03:58:24] <pcwalton> and probably BSD is not whitelisted because nobody is maintaining it
[03:58:28] <cmr> skoizza: And for that you need an ioctl
[03:58:37] <skoizza> cmr: ioctl?
[03:58:39] <strcat> yeah it'd have to be maintained to add valgrind suppressions where they are needed
[03:58:48] <variable> pcwalton: okay
[03:58:49] <skoizza> cmr: what im trying to do is to listen for a control+c command issued by a user
[03:58:58] <cmr> skoizza: That is a signal, not a keystroke.
[03:59:01] <variable> pcwalton: I think step one is making sure that rust has contact with bsd folk
[03:59:15] <cmr> skoizza: http://en.wikipedia.org/wiki/Ioctl
[03:59:20] <strcat> skoizza: well, if you're the shell it's a key sequence - isn't it?
[03:59:31] <variable> strcat: okay
[03:59:33] <strcat> it's SIGINT for an application running in a shell
[03:59:45] <skoizza> strcat: ah, ill have to do some more googling
[04:00:16] <maik> any idea where I can find the source file sys/select.h in linux?
[04:00:33] * strcat doesn't know for sure if the shell sees SIGINT or not
[04:00:38] <variable>  /usr/include/sys/select.h ?
[04:00:47] <variable> maik: usually "locate sys/select.h" is a good way to find it
[04:01:03] <variable> cmr: its midnight for  me and I'm about to go to sleep
[04:01:10] <variable> but I'd be happy to stay in email contact
[04:01:18] <cmr> variable: sure, corey@octayn.net
[04:01:48] <maik> variable, ah nice didn't know that, thanks
[04:03:25] <variable> cmr: mail sent
[04:06:11] <cmr> variable: thanks, I'll keep in touch if I need help
[04:06:19] <variable> awesome
[04:06:41] <variable> cmr: I'll try to linger on IRC too; but generally email will be much easier for me
[04:06:46] <adu> how do I convert extra::get opts::Fail_ to std::str?
[04:06:52] <variable> cmr: pcwalton: thanks for your help.
[04:06:59] <pcwalton> no problem
[04:07:10] *** Quits: maik (maik@moz-85739CD7.dip0.t-ipconnect.de) (Ping timeout)
[04:07:11] <variable> http://paste.pound-python.org/show/UFYMw8aKWqMh4w9K8aps/ -> building master
[04:07:35] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[04:08:36] <variable> I don't see the defintion at all in the tools/ directory
[04:08:53] *** Quits: josedonizetti (josedonize@moz-CA73D699.cpe.teksavvy.com) (Quit: josedonizetti)
[04:09:15] <strcat> variable: this is a clean build dir, right?
[04:09:20] <variable> strcat: should be, yes
[04:09:40] <pcwalton> what did from_str_radix become?
[04:10:02] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[04:10:07] <strcat> pcwalton: it's a trait now
[04:10:12] <strcat> don't remember where
[04:10:19] <pcwalton> num::FromStrRadix
[04:10:23] <variable> okay, I'm going to do a completely clean build
[04:10:24] <variable> and go to sleep
[04:10:32] <variable> and look in the morning
[04:10:33] *** Joins: Yeri (jasonjasmi@41C91A8A.CE609BA5.E39FBF79.IP)
[04:10:41] <engla> it was a trait, convenience generic function std::num::from_str_radix added
[04:10:47] <strcat> I don't see TGError in our LLVM submodule beyond a comment
[04:11:02] *** Quits: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net) (Quit: eholk)
[04:11:03] <engla> (and removed from_str_radix from numeric type modules)
[04:11:17] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[04:13:31] <Luqman> i'm pretty sure we don't build clang anymore
[04:13:51] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[04:13:59] <strcat> Luqman: we don't
[04:14:41] <zxcdw> What has changed which makes it not required anymore compared to when it was required to build clang?
[04:14:49] <strcat> it was never used afaik
[04:15:05] <strcat> we just built it because we expected (and still expect) to use it at some point
[04:15:27] <strcat> for example to give rustc support for using C libraries without hardcoding the signatures on rust's side
[04:15:36] *** Joins: josedonizetti (josedonize@moz-CA73D699.cpe.teksavvy.com)
[04:15:38] <strcat> or as a linker driver, instead of calling gcc
[04:16:26] <tiffany> x86_64-unknown-linux-gnu/stage0/bin/rustc: error while loading shared libraries: libtinfo.so.5: cannot open shared object file: No such file or directory
[04:16:32] <tiffany> why did that happen?
[04:16:41] <cmr> tiffany: it's a bug in the snapshot.
[04:16:55] <cmr> if you're on arch there's a libtinfo in the aur
[04:16:58] <cmr> it's just a symlink
[04:17:08] <strcat> yeah but if you install it, stuff you build will start linking to it
[04:17:12] <strcat> so it's really awful
[04:17:21] <cmr> yech, didn't know that
[04:17:38] <zxcdw> So is there a better fix than a symlink?
[04:17:52] <strcat> not incorrectly linking against a non-portable library
[04:17:53] <zxcdw> Or.. the "right way"? :)
[04:18:02] <strcat> we just need a new snapshot
[04:18:06] <tiffany> I have a /usr/lib/libtinfo.so.5
[04:18:16] <zxcdw> Ah, right
[04:18:19] <strcat> but it is not going well
[04:18:47] <tiffany> or not
[04:19:04] *** Joins: osa1 (uid13910@moz-5F4AA75A.irccloud.com)
[04:19:49] <tiffany> I had it in locate's db but it's gone now apparently
[04:19:57] <strcat> windows builder really, really doesn't like doing an LLVM rebuild
[04:20:19] <tiffany> what is libtinfo?
[04:20:30] <strcat> tiffany: part of ncurses
[04:20:50] <strcat> there's a non-default configure flag you can pass to split it out
[04:20:59] <strcat> the snapshot is incorrectly linking against it, it's not portable
[04:21:12] <strcat> I am fixing it... it's just taking a while to get the bots to succeed at building
[04:21:18] <tiffany> ah
[04:24:01] *** Joins: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net)
[04:24:56] *** Quits: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net) (Quit: eholk)
[04:25:12] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[04:25:24] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Quit: Jesse)
[04:27:41] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[04:30:21] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[04:30:43] <adu> I can't figure this out
[04:30:45] *** Quits: polyfractal (textual@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[04:30:46] <adu> "error: failed to find an implementation of trait std::sys::FailWithCause for extra::getopts::Fail_"
[04:32:59] *** Joins: eatkinson (eatkinson@moz-E57448EF.airbears2.berkeley.edu)
[04:32:59] <ChrisMorgan> Are you using fail!(something)?
[04:34:33] <adu> yes std::result::Err(f) => fail!(f),
[04:35:00] <Luqman> ah, fail! takes a string, f is not a string
[04:35:04] <adu> after match getopts(...)
[04:35:37] <ChrisMorgan> fail! takes something implementing FailWithCause; ~str is the main such type.
[04:35:42] <adu> how do I convert extra::getopts::Fail_ to a string?
[04:35:53] <ChrisMorgan> .to_err_msg()
[04:36:23] <adu> where is that documented?
[04:36:34] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[04:36:43] <ChrisMorgan> It'll be in the API docs. Actually, I was looking at the source.
[04:36:48] <adu> http://static.rust-lang.org/doc/extra/getopts/enum.Fail_.html gives me AccessDenied
[04:36:59] <Luqman> ChrisMorgan: i don't see that in extra::getopts
[04:37:22] <strcat> adu: the front page links to http://static.rust-lang.org/doc/master/extra/index.html
[04:37:30] <strcat> there's nothing under doc/ except 0.7 and master
[04:37:36] <strcat> and I guess older versions
[04:37:43] <Luqman> adu: there's function fail_str which will give you what you want in extra::getopts
[04:38:09] <adu> I get "error: unresolved name `fail_str`"
[04:38:23] <ChrisMorgan> adu: http://static.rust-lang.org/doc/master/extra/getopts/enum.Fail_.html
[04:39:02] <ChrisMorgan> Luqman: it's there.
[04:39:38] <Luqman> ChrisMorgan: ah sorry, i was on a different branch that's a bit behind :P
[04:39:55] *** Quits: devin909 (Mibbit@moz-D6B64647.bootp.virginia.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[04:40:27] *** Quits: eatkinson (eatkinson@moz-E57448EF.airbears2.berkeley.edu) (Quit: eatkinson)
[04:41:46] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[04:44:28] <jyyou> i am sure that rust master is built fine on freebsd 9.1.
[04:44:46] <strcat> jyyou: did you build it there?
[04:44:58] <adu> ChrisMorgan: thanks
[04:45:08] <strcat> I'm not sure what the problem was earlier, because the errors were from lines not in the current LLVM source
[04:45:29] <sw17ch> when building from source, does the current build system do partial builds? (for the Rust sources themselves)
[04:45:44] <cmr> sw17ch: no, it's not possible.
[04:45:52] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[04:45:52] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/d-twNA
[04:45:52] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[04:45:53] <cmr> Rust's compilation model is entirely different.
[04:45:58] <strcat> sw17ch: it also has to self-host
[04:46:02] <sw17ch> ah well. okay.
[04:46:10] <sw17ch> so every build is a complete rebuild then?
[04:46:16] <cmr> At the moment yes.
[04:46:24] <sw17ch> meh. oh well. it happens. :)
[04:46:29] <sw17ch> hurray for -j5
[04:46:30] <cmr> Incremental builds is desired but low priority.
[04:46:35] <strcat> sw17ch: won't really help
[04:46:40] <sw17ch> it helps a little
[04:46:44] <sw17ch> for about 30 seconds :)
[04:46:46] <strcat> rust has to self-host, so it's basically serial
[04:46:59] <cmr> yeah, incremental builds only helps with stage1
[04:47:02] <sw17ch> well, the c++ bits get build in parallel yes?
[04:47:06] <sw17ch> right, that
[04:47:10] <strcat> sw17ch: it won't make you rebuild those
[04:47:13] *** Quits: josedonizetti (josedonize@moz-CA73D699.cpe.teksavvy.com) (Quit: josedonizetti)
[04:47:16] <strcat> unless you touch them
[04:47:24] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[04:47:35] <strcat> lets say you edit libextra
[04:47:40] <strcat> it will skip libstd in stage0
[04:47:44] <strcat> but it goes
[04:48:20] <adu> what does "error: use of partially moved value: `program_and_args`" mean?
[04:48:58] <strcat> sw17ch: anyway basically it has to use the snapshot compiler to make a new compiler and then build the final compiler with that
[04:49:14] <sw17ch> strcat: compiling compilers: actually pretty not easy
[04:49:16] <strcat> so even if you only touch libextra, it still has to build a compiler out of that and then compile everything (including libstd) with it
[04:49:37] <sw17ch> right, i see now
[04:49:41] <sw17ch> thank you :)
[04:50:35] *** Quits: jasdevsingh (jasdevsing@moz-21CF4479.hsd1.va.comcast.net) (Quit: jasdevsingh)
[04:50:39] <strcat> adu: http://static.rust-lang.org/doc/master/tutorial.html#move-semantics
[04:50:52] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[04:50:53] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/0Wq1yg
[04:50:53] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[04:50:54] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[04:50:54] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/ve0ARw
[04:50:54] <ghrust> 13rust/06auto 140442764 15Alex Crichton: Actually default rustc to have debug! output...
[04:50:54] <ghrust> 13rust/06auto 14563e6bb 15bors: auto merge of #9385 : alexcrichton/rust/actually-ndebug, r=pnkfelix...
[04:50:55] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[04:51:11] <strcat> (after reading that) a partial move is a move out of 1 field, so the whole object becomes unusable
[04:51:30] *** Quits: canhtak (jeremy@moz-8E705AE1.wl.t.ulaval.ca) (Quit: canhtak)
[04:51:41] <strcat> you will want to destructure the whole object at once, take a reference to the field or clone it instead
[04:51:45] <strcat> depending on what you're doing
[04:52:41] <jyyou> strcat: i am not sure either. my source tree has no clang directory
[04:53:29] <strcat> it must work on freebsd though because the buildbot builds every pull request before it lands
[04:53:42] * strcat shrugs
[04:53:59] <adu> YEY it works again
[04:55:24] <adu> https://gist.github.com/andydude/5711998
[04:57:05] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[04:57:13] <adu> I'm very happy with the s/~"/"/g change :)
[04:58:35] <strcat> adu: you can remove the ~ on the opts vector too
[04:58:44] <adu> oh
[04:58:58] <strcat> a fixed-size vector is enough there (getopts just wants &[])
[04:59:04] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[04:59:11] *** Quits: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net) (Ping timeout)
[04:59:26] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[05:00:54] *** Joins: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net)
[05:01:20] <adu> cool
[05:02:36] *** Joins: aeqwa (aeqwa@moz-FB75D788.dsl.tropolys.de)
[05:02:45] *** Quits: saneyuki (Tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[05:05:28] *** Joins: maik (maik@moz-85739CD7.dip0.t-ipconnect.de)
[05:08:14] *** Quits: dandy (Dandy@moz-84CC8377.hsd1.co.comcast.net) (Quit: Leaving)
[05:12:55] *** Joins: josedonizetti (josedonize@moz-CA73D699.cpe.teksavvy.com)
[05:13:42] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[05:15:29] *** Quits: sw17ch (sw17ch@moz-675AFBCF.hsd1.mi.comcast.net) (Quit: sw17ch)
[05:16:06] *** Parts: Chef (ajr@moz-907AA849.dsl.teksavvy.com) ()
[05:17:56] *** Joins: jviereck (Adium@moz-D03659.dip0.t-ipconnect.de)
[05:19:08] <pcwalton> what did build_sized become?
[05:20:24] *** Quits: jviereck (Adium@moz-D03659.dip0.t-ipconnect.de) (Quit: Leaving.)
[05:20:53] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[05:20:53] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14563e6bb to 1440834a0: 02http://git.io/N3iJvQ
[05:20:53] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[05:22:15] <jeaye> Is there anything more I need to do other than 'extern mod foo' to link with libfoolonghash.so (assuming it's in the linking path)? The 'extern mod' succeeds, but I get linker errors after compilation.
[05:23:31] *** Quits: Yeri (jasonjasmi@41C91A8A.CE609BA5.E39FBF79.IP) (Quit: Yeri)
[05:27:56] <maik> http://static.rust-lang.org/doc/master/tutorial-ffi.html there is no example of c macros. Is it possible to wrap them in Rust? 
[05:29:03] *** Quits: hoverbear (andrew@moz-86FCBF4B.gv.shawcable.net) (Quit: hoverbear)
[05:29:30] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Client exited)
[05:29:59] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[05:30:28] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[05:31:39] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[05:32:16] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[05:33:02] *** Joins: saneyuki (Tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[05:34:07] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[05:34:14] *** Quits: skoizza (Mibbit@173CD8FD.E8B6FA7D.DDE5D3F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[05:34:52] *** Parts: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) ()
[05:35:12] *** Quits: saneyuki (Tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[05:36:31] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[05:37:29] *** Quits: josedonizetti (josedonize@moz-CA73D699.cpe.teksavvy.com) (Quit: josedonizetti)
[05:39:17] <strcat> https://github.com/mozilla/rust/issues/9421 meh.
[05:39:20] <strcat> this is really irritating
[05:39:54] <strcat> git checkout master src/etc/pkg/rust-logo.ico -> endless bad time
[05:40:00] <strcat> not sure how it happened in the first place though
[05:40:40] <pcwalton> interesting
[05:40:49] <pcwalton> the measurement I just took put Servo at 410ms and Gecko at 290ms
[05:40:56] <pcwalton> for reflowing
[05:41:04] <pcwalton> btw, with earlier rustc Servo was at 920ms
[05:41:11] <pcwalton> rustc performance dramatically improved
[05:41:18] <pcwalton> I assume because constants are being cross crate inlined now
[05:41:45] <strcat> pcwalton: we also have loop-vectorize at --opt-level=2, so maybe something got SSE'ed
[05:41:50] <pcwalton> oh yeah
[05:41:55] <pcwalton> 2x perf difference
[05:41:58] <pcwalton> I also did make an algorithmic fix
[05:42:01] <pcwalton> but not on the order of 2x
[05:42:45] <strcat> LLVM's `bugpoint` utility is the best thing ever... wish I knew about it before
[05:42:54] <strcat> you give it IR where you have an assert, and it cuts it down to a minimal example
[05:43:32] * strcat has a tiny mergefunc failure case now
[05:43:33] <pcwalton> oh wait
[05:43:36] <pcwalton> 94ms
[05:43:39] <pcwalton> yeah, that's what I was getting
[05:44:01] <pcwalton> oh wait, I see 205ms
[05:44:35] *** Joins: fyolnish (fyolnish@moz-59BB4C3C.uqwimax.jp)
[05:44:37] <strcat> http://ix.io/8db it made this from all of libextra...
[05:44:49] <strcat> can't believe I could have done this earlier
[05:44:54] <pcwalton> yeah, I love bugpoint
[05:45:08] * strcat had no idea how he was going to track it down
[05:45:32] <strcat> anyway looks like it's LLVM's fault
[05:45:34] <strcat> good news
[05:45:42] <pcwalton> why is that not valid to merge?
[05:45:48] <pcwalton> the first and fourth functions
[05:46:21] <strcat> pcwalton: it's valid to merge, but mergefunc causes an assert trying
[05:46:24] <pcwalton> those *look* like mergeable functions
[05:46:25] <pcwalton> ahh, ok
[05:47:14] <Luqman> strcat: what's the assert?
[05:47:40] <strcat> Bitcast requires both operands to be pointer or neither
[05:47:42] <strcat>   %4 = bitcast i64* %1 to i64
[05:48:10] <strcat> from opt foo.ll -mergefunc on that IR
[05:48:27] <pcwalton> ok, looks like we're ~2x as slow as Gecko
[05:48:31] <pcwalton> and I have ideas on how to optimize this further
[05:48:33] <strcat> this could be my first LLVM patch ;p
[05:49:38] <strcat> afaict it's because it normalizes pointers to integers but then doesn't make proper casts
[05:49:51] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[05:51:07] *** Quits: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca) (Quit: Leaving)
[05:51:58] <strcat> pcwalton: it's odd that these get through type_use at all, *shrug*
[05:52:20] <pcwalton> I don't trust type_use at all
[05:52:30] <strcat> they are just like |a, b| b
[05:52:34] *** Quits: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[05:52:43] <strcat> |_, b| b
[05:54:31] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[05:55:14] *** Quits: pcwalton (pcwalton@moz-BBE3ABD.mv.mozilla.com) (Quit: pcwalton)
[05:55:28] *** Joins: eatkinson (eatkinson@moz-6964FF68.airbears2.berkeley.edu)
[05:56:40] *** Joins: GeneralMaximus (ankur@CE720DCC.457F5A6C.D5D59AD9.IP)
[05:59:05] <Luqman> strcat: bugpoint is amazing!
[05:59:11] <strcat> Luqman: yeah.
[05:59:26] <strcat> Luqman: I seriously just did bugpoint -mergefunc on libextra.ll and got this
[05:59:37] * strcat is simplifying it a bit by hand now
[06:00:52] <Luqman> yea, it is fantastically amazing
[06:02:59] *** Quits: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net) (Ping timeout)
[06:03:51] *** Joins: josedonizetti (josedonize@moz-CA73D699.cpe.teksavvy.com)
[06:05:38] *** nrc is now known as nrc|afk
[06:05:40] *** Quits: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[06:08:21] <strcat> Luqman: it's beautifully simple now
[06:09:21] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[06:09:47] <Luqman> strcat: oh, even shorter?
[06:10:27] <strcat> yeah
[06:10:29] <strcat> by hand
[06:10:44] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[06:12:31] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Client exited)
[06:13:07] <strcat> Luqman: http://ix.io/8dc beautiful
[06:13:15] <strcat> kills mergefunc
[06:13:17] <strcat> ;]
[06:13:21] *** Quits: cairsds (Mibbit@moz-3ECBAB41.dfri.se) (Quit: http://www.mibbit.com ajax IRC Client)
[06:13:36] <jeaye> Visibility problem: (How can I access foo in burp?) https://gist.github.com/jeaye/f83e64361397265d7651
[06:14:20] <strcat> acrichto: ah it failed again. did you restart it?
[06:14:22] *** Joins: nkoep (nik@moz-A60B8D9F.pool.mediaways.net)
[06:14:25] <strcat> someone did ;p
[06:14:47] <acrichto> strcat: yeah
[06:14:56] <Luqman> jeaye: self::foo maybe
[06:15:21] *** Joins: pcwalton (pcwalton@moz-481A040C.hsd1.ca.comcast.net)
[06:15:21] *** ChanServ sets mode: +ao pcwalton pcwalton
[06:15:29] <jeaye> Luqman: Neither self nor super work
[06:15:31] <SiegeLord> Maybe ::foo::...
[06:15:45] <strcat> pcwalton: http://ix.io/8dc by hand down to this ;p, specifically happens with a function ptr store
[06:15:49] <jeaye> SiegeLord: Ahah!
[06:15:57] <jeaye> crate root
[06:16:04] <jeaye> Good call. Thanks
[06:16:16] * strcat doesn't quite understand how it goes wrong :(
[06:16:20] <strcat> at least it's tiny
[06:16:34] <strcat> bug report time I guess
[06:17:04] <jeaye> SiegeLord: But I can't say `use ::foo::Foo`
[06:17:11] *** Quits: pcwalton (pcwalton@moz-481A040C.hsd1.ca.comcast.net) (Quit: .)
[06:17:18] <jeaye> I can only use it at ::foo::Foo in all cases.
[06:17:27] <SiegeLord> Can you do use foo; ?
[06:17:55] <jeaye> I can.
[06:18:40] <maik> hm
[06:18:46] <maik> http://static.rust-lang.org/doc/master/std/libc/index.html is missing re exports
[06:22:10] *** Joins: tikue_ (tkuehn@6D6C18A9.E2CAEE6E.689607DE.IP)
[06:23:18] *** Joins: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP)
[06:30:07] <ChrisMorgan> How do I generate ng docs for my own code?
[06:30:44] <bjz> is there a better way to do vec::append_one on a &[T]?
[06:31:50] <strcat> bjz: do it another way
[06:31:57] <strcat> get an iterator over it and chain it
[06:32:06] <strcat> &[T] and &mut [T] are fixed-size views
[06:32:36] <bjz> strcat: I was doing vec::append_one(attrlist.to_owned(), 0)
[06:32:49] <strcat> well how long do you need the new one?
[06:32:56] <bjz> one more
[06:32:57] <strcat> you can create imaginary sequences with iterators
[06:33:10] <bjz> I just append once
[06:33:25] <bjz> let attrs_terminated = vec::append_one(attrlist.to_owned(), 0);
[06:33:26] <strcat> I mean how long do you need the array with the appended thing
[06:33:40] <strcat> rusti: let xs = &[1, 2, 3]; let ys = &[4]; for &i in xs.iter().chain(ys.iter()) { print!("{} ", i) }
[06:33:41] -rusti- 1 2 3 4 ()
[06:34:00] <strcat> rusti: let xs = &[1, 2, 3]; let ys = &[4]; xs.iter().chain(ys.iter()).idx(3)
[06:34:01] -rusti- Some(&4)
[06:34:04] <bjz> attrlist.len + 1
[06:34:05] <strcat> rusti: let xs = &[1, 2, 3]; let ys = &[4]; xs.iter().chain(ys.iter()).idx(2)
[06:34:05] -rusti- Some(&3)
[06:34:08] *** Quits: aeqwa (aeqwa@moz-FB75D788.dsl.tropolys.de) (Quit: Lost terminal)
[06:34:23] <strcat> bjz: by long I mean lifetime ;p
[06:34:30] <bjz> ohh
[06:34:33] <bjz> ffi::alcCreateContext(self.ptr, vec::raw::to_ptr(attrs_terminated))
[06:34:45] <strcat> ah ;[, then you need to copy
[06:34:51] <strcat> I see why you're doing it now too
[06:34:56] <bjz> yeah
[06:35:01] <bjz> :(
[06:35:19] <strcat> bjz: have them pass you ~[T] and push to it? so at least *some* copies are eliminated
[06:35:32] <strcat> don't see another way beyond making a null-terminated vector type
[06:35:39] <strcat> and having them use it from the start
[06:35:50] <bjz> yep
[06:36:20] <strcat> libraries use null terminators are very unfriendly for FFI
[06:36:28] <strcat> they shouldn't do that... :[
[06:36:33] <bjz> it's only called rarely, for a context setup, so I don't think a copy is too awful
[06:37:05] <bjz> I would rather have a nice api
[06:37:31] <strcat> the people who made the library should be saner and take a length
[06:37:33] <strcat> ;p
[06:38:22] <bjz> device.create_context([STEREO_SOURCES, SYNC])
[06:38:22] <bjz> yeah :/
[06:39:37] <strcat> bjz: I'm curious if portaudio is a nicer library overall
[06:39:59] <strcat> certainly has a nicer home page ;p
[06:40:09] <bjz> haa
[06:40:20] <bjz> does it have positional sound/doppler?
[06:40:22] <strcat> because I remember openal also being one of those libs with global init nonsense
[06:40:24] *** Quits: eatkinson (eatkinson@moz-6964FF68.airbears2.berkeley.edu) (Quit: eatkinson)
[06:40:53] *** Quits: tikue_ (tkuehn@6D6C18A9.E2CAEE6E.689607DE.IP) (Quit: tikue_)
[06:41:24] <bjz> strcat: nothing worse than opengl :P
[06:41:35] <strcat> yeah. opengl is weird as hell
[06:41:39] <strcat> all those global state/stack things
[06:41:40] <bjz> x)
[06:41:56] <bjz> global state machines, yay!
[06:42:42] <strcat> bjz: I think portaudio just handles input/output and other libraries build audio utilities on top of it
[06:42:54] <bjz> strcat: yeah
[06:43:07] <bjz> strcat: I need a lib for games
[06:43:48] <Ralith> strcat: the opengl stack stuff has been obsolete for decades
[06:43:54] <Ralith> much of the state stuff, too
[06:45:52] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[06:45:52] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/VXuLlw
[06:45:52] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[06:45:56] <strcat> Ralith: well, I've only looked at terrible gl2.1 code :(
[06:46:17] <strcat> or I guess it was opengl 3.2/3.3ish with deprecated features everywhere
[06:46:25] *** Quits: adu (ajr@moz-BF2B1AE4.washdc.fios.verizon.net) (Quit: adu)
[06:46:31] <Ralith> sounds like it was written against gl1 to me
[06:47:13] <Ralith> modern gl is basically a concise assembly language for rasterized 3D graphics
[06:47:35] <Ralith> (though it's a little more general than that strictly)
[06:52:28] *** Joins: eatkinson (eatkinson@moz-E57448EF.airbears2.berkeley.edu)
[06:53:39] *** Joins: cairsds (Mibbit@A083BCB.AAB185EE.9D625D35.IP)
[06:57:13] *** Joins: Ms2ger (Ms2ger@moz-45EBCB4A.adsl-dyn.isp.belgacom.be)
[06:59:01] *** Joins: dio (dio@moz-4D43194C.retail.telecomitalia.it)
[07:02:42] *** Joins: jaen (jaen@FB01674D.56B727FE.4B52F012.IP)
[07:03:33] *** Joins: saneyuki (Tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[07:03:40] *** Joins: fabiand (fabiand@F6C9D380.3A27401E.16E13E53.IP)
[07:05:13] *** Joins: tefter (tefter@B5D119DC.B856A0A1.73804765.IP)
[07:05:44] *** Quits: saneyuki (Tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[07:07:05] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[07:07:22] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[07:08:11] <strcat> acrichto: great, it's going to fail on OS X
[07:08:13] <strcat> valgrind stuff
[07:08:19] <acrichto> :(
[07:08:38] <acrichto> but nothing changed...
[07:08:44] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[07:10:55] *** Quits: fabiand (fabiand@F6C9D380.3A27401E.16E13E53.IP) (Ping timeout)
[07:10:59] <strcat> acrichto: it looks really bad
[07:11:01] <strcat> :s
[07:11:03] <strcat> same error each time
[07:11:13] <strcat> something to do with the runtime/scheduler
[07:11:16] <acrichto> I saw this happening for the last snapshot
[07:11:22] <acrichto> but it ended up passing just fine...
[07:11:38] <strcat> oh :s
[07:11:46] <strcat> it's not supposed to pass afaik
[07:11:50] <strcat> but I won't worry
[07:11:52] <acrichto> not in the logs of the succesful snapshot
[07:11:56] <acrichto> but in logs of failing snapshots
[07:12:02] <acrichto> didn't check the sucessful logs
[07:12:05] <strcat> oh
[07:12:16] <Eridius> woo, my WindowsPath test suite has now surpassed the actual code (in terms of line count)
[07:15:34] *** Quits: tefter (tefter@B5D119DC.B856A0A1.73804765.IP) (Client exited)
[07:15:41] *** Quits: eatkinson (eatkinson@moz-E57448EF.airbears2.berkeley.edu) (Quit: eatkinson)
[07:15:41] *** Joins: fabiand (fabiand@F6C9D380.3A27401E.16E13E53.IP)
[07:19:12] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[07:19:27] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[07:20:53] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[07:20:53] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/byxxWA
[07:20:53] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[07:20:55] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[07:20:55] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/-j0Urg
[07:20:55] <ghrust> 13rust/06auto 1483499d1 15Alex Crichton: Place *all* rustdoc output in doc/{crate}
[07:20:55] <ghrust> 13rust/06auto 1480e0968 15bors: auto merge of #9422 : alexcrichton/rust/fix-link, r=thestinger...
[07:20:55] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[07:22:32] *** Joins: sebcrozet (sebcrozet@moz-D8879CC3.w80-13.abo.wanadoo.fr)
[07:22:45] *** Quits: fabiand (fabiand@F6C9D380.3A27401E.16E13E53.IP) (Ping timeout)
[07:22:55] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[07:23:54] *** Joins: tikue_ (tkuehn@6D6C18A9.E2CAEE6E.689607DE.IP)
[07:24:09] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[07:24:15] <strcat> acrichto: there it goes *again*
[07:28:02] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[07:32:50] *** flaper87|afk is now known as flaper87
[07:33:45] <flaper87> acrichto: ping
[07:34:58] *** Joins: tefter (tefter@B5D119DC.B856A0A1.73804765.IP)
[07:35:08] <flaper87> acrichto: wondering if you could r+ this PR https://github.com/mozilla/rust/pull/9194 Last week was very busy and didn't get a chance to work on the new implementation.
[07:35:13] <flaper87> already working on it
[07:35:33] *** Quits: tikue_ (tkuehn@6D6C18A9.E2CAEE6E.689607DE.IP) (Ping timeout)
[07:36:02] *** Joins: tikue_ (tkuehn@6D6C18A9.E2CAEE6E.689607DE.IP)
[07:38:40] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[07:39:25] *** Quits: maik (maik@moz-85739CD7.dip0.t-ipconnect.de) (Ping timeout)
[07:39:28] *** Quits: tikue_ (tkuehn@6D6C18A9.E2CAEE6E.689607DE.IP) (Ping timeout)
[07:42:41] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Ping timeout)
[07:46:55] *** Quits: fyolnish (fyolnish@moz-59BB4C3C.uqwimax.jp) (Client exited)
[07:49:25] *** Quits: josedonizetti (josedonize@moz-CA73D699.cpe.teksavvy.com) (Quit: josedonizetti)
[07:51:14] *** Joins: fabiand (fabiand@moz-A1B1CF9.pool.mediaways.net)
[07:58:47] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.1)
[08:00:16] *** Joins: bheylin_ (brianheyli@moz-3D24C757.static.chello.nl)
[08:01:29] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[08:06:19] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[08:10:05] *** Joins: maik (maik@moz-85739CD7.dip0.t-ipconnect.de)
[08:10:38] *** Quits: bheylin_ (brianheyli@moz-3D24C757.static.chello.nl) (Quit: bheylin_)
[08:13:01] *** Quits: maik (maik@moz-85739CD7.dip0.t-ipconnect.de) (Ping timeout)
[08:13:38] *** kimundi is now known as zz_kimundi
[08:13:59] *** Joins: valenting (Thunderbir@C6866972.77435D89.FB866788.IP)
[08:15:04] *** Joins: victorporof (victorporo@8CD8EBC4.60E0D239.9B1E38F4.IP)
[08:18:02] <Eridius> rusti: "/".split_terminator_iter('/')
[08:18:05] -rusti- std::str::CharSplitIterator<,char>{string: "/", sep: '/', allow_trailing_empty: false, only_ascii: true, finished: false}
[08:18:06] <Eridius> rusti: "/".split_terminator_iter('/').to_owned_vec()
[08:18:07] -rusti- ~[""]
[08:19:38] *** Quits: heftig (heftig@moz-1CC2E990.dip0.t-ipconnect.de) (Ping timeout)
[08:19:54] *** Joins: heftig (heftig@moz-1CC2E990.dip0.t-ipconnect.de)
[08:20:00] <dbaupp> rusti: "/a/".split_terminator_iter('/').to_owned_vec()
[08:20:01] -rusti- ~["", "a"]
[08:23:53] <Eridius> rusti: "".split_terminator_iter('/').to_owned_vec()
[08:23:55] -rusti- ~[]
[08:24:02] <Eridius> rusti: "".split_iter('/').to_owned_vec()
[08:24:03] -rusti- ~[""]
[08:24:25] *** Joins: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP)
[08:25:21] *** Joins: CarpNet (ac@moz-FD24B77.sohonet.co.uk)
[08:29:40] *** Quits: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[08:30:04] *** Quits: valenting (Thunderbir@C6866972.77435D89.FB866788.IP) (Ping timeout)
[08:33:56] *** Joins: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP)
[08:34:13] *** Joins: saneyuki (Tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[08:35:14] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[08:36:23] *** Quits: saneyuki (Tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[08:47:49] *** Joins: maik (maik@moz-85739CD7.dip0.t-ipconnect.de)
[08:50:54] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[08:50:54] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/-j0Urg
[08:50:54] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[08:51:56] *** Joins: skade (skade@moz-DA43A266.hsi.kabel-badenwuerttemberg.de)
[08:53:20] <maik> is anyone working on a gui lib for rust? maybe some gtk bindings etc?
[08:54:18] <klutzy> there was GtkRust on github but it was pre-0.7 last time I saw
[08:54:32] <jensnockert> I really want ObjC bindings :S
[08:54:59] <jensnockert> But calling vararg functions isn't easy with Rust :(
[08:55:22] <dbaupp> jensnockert: would inline LLVM make that easier?
[08:55:39] <klutzy> I played with win32 gui binding, but it is nearly hello-world stage
[08:55:42] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Quit: Leaving)
[08:55:45] <jensnockert> dbaupp: Yes, but that's just a work-around for not being able to call vararg functions.
[08:55:52] *** Quits: ggherdov_ (uid11402@moz-E77DEB21.irccloud.com) (Ping timeout)
[08:56:12] *** Joins: ggherdov_ (uid11402@moz-E77DEB21.irccloud.com)
[08:56:12] <jensnockert> ObjC is just sugar around a small amount of functions in the ObjC runtime.
[08:56:34] <dbaupp> maik: just make an app that uses the web browser as the gui, and renders to html/ajax/whatever
[08:56:45] <dbaupp> maik: (even cooler: make it work in servo)
[08:56:48] <maik> :D
[08:56:50] *** Joins: davbo (dave@moz-3FFA637C.oucs.ox.ac.uk)
[08:57:04] <jensnockert> dbaupp: https://developer.apple.com/library/mac/documentation/cocoa/reference/objcruntimeref/Reference/reference.html
[08:57:24] <jensnockert> The main issue is calling `id objc_msgSend(id theReceiver, SEL theSelector, ...)'
[08:58:17] *** Quits: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[08:58:29] <dbaupp> a wrapper that takes &[SEL]?
[08:58:41] <maik> btw what is a browser engine? is it just core of a browser? like a window that can parse stuff like html and render it?
[08:58:53] <jensnockert> No, the â€¦ argument is kind of like printf, they can be any type.
[08:59:16] <jensnockert> theSelector is just which method on theReceiver to call.
[09:00:10] <jensnockert> You could of course do it with a really simple syntax extension too.
[09:01:02] <dbaupp> jensnockert: oh!
[09:01:33] <jensnockert> There are variants for fp-return and structure-return functions as well, but they have essentially the same signature.
[09:01:39] *** Quits: ChrisMorgan (chris@moz-173FDD52.its.monash.edu.au) (Ping timeout)
[09:01:44] <dbaupp> I see
[09:02:52] <ldunn> Hm. Are `extern` blocks only for functions?
[09:02:52] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[09:03:15] <dbaupp> ldunn: no, they should work for `static`s too
[09:03:20] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[09:03:25] <ldunn> ah! hm
[09:03:43] <ldunn> so they do, perfect
[09:03:48] <jensnockert> Magic, I have a working local snapshot /o\
[09:06:36] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[09:07:52] *** Quits: skade (skade@moz-DA43A266.hsi.kabel-badenwuerttemberg.de) (Ping timeout)
[09:08:41] <dbaupp> cmr: ping
[09:09:36] *** Quits: maik (maik@moz-85739CD7.dip0.t-ipconnect.de) (Ping timeout)
[09:10:26] <dbaupp> does anyone happen to know/can construct a testcase for this of the top of their heads? https://github.com/mozilla/rust/issues/4353
[09:10:32] <dbaupp> *off
[09:10:35] *** Joins: tgummerer (tgummerer@moz-3E762AD9.kthopen.kth.se)
[09:13:44] *** Quits: victorporof (victorporo@8CD8EBC4.60E0D239.9B1E38F4.IP) (Ping timeout)
[09:14:43] *** Joins: fyolnish (fyolnish@moz-48630B10.panda-world.ne.jp)
[09:22:43] *** Joins: victorporof (victorporo@8CD8EBC4.60E0D239.9B1E38F4.IP)
[09:22:43] *** Quits: victorporof (victorporo@8CD8EBC4.60E0D239.9B1E38F4.IP) (Connection reset by peer)
[09:22:47] *** Joins: victorporof (victorporo@8CD8EBC4.60E0D239.9B1E38F4.IP)
[09:23:16] *** Joins: victorporof_ (victorporo@8CD8EBC4.60E0D239.9B1E38F4.IP)
[09:24:29] *** Quits: victorporof (victorporo@8CD8EBC4.60E0D239.9B1E38F4.IP) (Ping timeout)
[09:24:53] *** Quits: tgummerer (tgummerer@moz-3E762AD9.kthopen.kth.se) (Ping timeout)
[09:26:19] <jensnockert> `make check-stage1-doc-tutorial-ffi NO_REBUILD=1` how I love thee <3.
[09:32:11] *** Quits: dio (dio@moz-4D43194C.retail.telecomitalia.it) (Ping timeout)
[09:35:32] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Client exited)
[09:35:58] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[09:37:39] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[09:42:10] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[09:44:26] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[09:55:14] *** Quits: cdidd (cdidd@moz-3A421781.broadband.corbina.ru) (Input/output error)
[09:58:18] *** Quits: fabiand (fabiand@moz-A1B1CF9.pool.mediaways.net) (Quit: Verlassend)
[10:00:59] *** Quits: victorporof_ (victorporo@8CD8EBC4.60E0D239.9B1E38F4.IP) (Quit: victorporof_)
[10:04:15] *** Quits: z0w0 (zack@64F0E14B.3C29B4A9.2CE63F58.IP) (Quit: z0w0)
[10:04:53] *** Joins: saneyuki (Tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[10:07:04] *** Quits: saneyuki (Tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[10:09:06] *** Joins: saneyuki (Tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[10:09:13] <jensnockert> Urgh, found the error.
[10:09:26] <jensnockert> LLVM produces non-utf8 error strings /o\
[10:12:15] *** Joins: cdidd (cdidd@moz-CD8979FF.broadband.corbina.ru)
[10:13:23] *** Joins: maik (maik@moz-85739CD7.dip0.t-ipconnect.de)
[10:15:42] *** Joins: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au)
[10:15:58] *** Quits: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au) (Quit: ChatZilla 0.9.90.1 [Firefox 25.0/20130917123208])
[10:21:32] *** Joins: Earnestly (earnest@moz-BE290A2B.dyn.plus.net)
[10:29:57] *** Joins: victorporof (victorporo@D5C23157.DA9DCE7D.79933D60.IP)
[10:35:21] <maik> will servo be able to execute javascript? or is this out of scope of a browser engine?
[10:36:05] <dbaupp> it currently can execute (a subset of) javascript
[10:36:36] <dbaupp> it uses spidermonkey (firefox's js engine)
[10:41:02] <maik> now I am confused with "subset". Is there some wiki page that shows how much js is supported? Or does it support everything that spidermonkey supports?
[10:41:41] <jensnockert> maik: I think the actual language is supported, but not all of the DOM etc.
[10:41:52] <dbaupp> aatch: ping
[10:44:39] <maik> I am asking because dbaupp mentioned previously that I "could" use servo for a GUI lib which kinda caught my interest. If I could use some existing js libs that would be amazing.
[10:44:47] <maik> not sure how far servo is atm though
[10:46:24] <dbaupp> well, you can just use firefox/chrome/any other web browser until servo matures :P
[10:46:38] <dbaupp> (and/or contribute to make it mature faster :P )
[10:48:31] * maik imagines the faces that people would do if they would start an editor and firefox/chrome would open
[10:49:07] <jensnockert> A friend developed a Webkit-backed version of vim, called happyedit.
[10:49:22] <jensnockert> So certainly possible.
[10:52:11] <maik> how would you do interop between javascript and rust? Imagine having a slider from 0-100 and rust would just print out the values
[10:52:29] <maik> I heard that javascript has no c ffi?
[10:55:53] <jensnockert> maik: You can expose objects to JS.
[10:56:25] <jensnockert> And when JS does stuff on those objects, methods in your C / Rust / ObjC / x code gets called.
[11:02:38] *** Quits: fyolnish (fyolnish@moz-48630B10.panda-world.ne.jp) (Client exited)
[11:02:53] *** Quits: dew (Instantbir@moz-D2FA52B6.static.stls.mo.charter.com) (Ping timeout)
[11:03:27] *** Joins: dew (Instantbir@moz-D2FA52B6.static.stls.mo.charter.com)
[11:07:44] *** Joins: fabiand (fabiand@moz-84D5F8C9.adsl.alicedsl.de)
[11:17:32] *** Quits: saneyuki (Tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[11:21:33] *** Joins: canhtak (jeremy@moz-8E705AE1.wl.t.ulaval.ca)
[11:22:44] *** Quits: nrc|afk (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[11:27:42] *** Quits: Liothen (liothen@moz-788EBAD0.spkn.qwest.net) (Quit: Textual IRC Client: www.textualapp.com)
[11:29:04] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[11:42:40] *** Quits: maik (maik@moz-85739CD7.dip0.t-ipconnect.de) (Ping timeout)
[11:43:43] *** Joins: skade (skade@moz-DA43A266.hsi.kabel-badenwuerttemberg.de)
[11:47:43] *** Joins: tgummerer (tgummerer@moz-3E762AD9.kthopen.kth.se)
[11:50:18] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Quit: Jesse)
[11:50:22] *** Quits: Jesin (Jessin_@moz-CDB412A.cc.lehigh.edu) (Ping timeout)
[12:00:29] *** Quits: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net) (Ping timeout)
[12:01:57] *** zz_kimundi is now known as kimundi
[12:02:08] *** Joins: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net)
[12:05:54] *** Joins: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net)
[12:06:01] *** Joins: saneyuki (Tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[12:06:44] *** Joins: novabyte (Instantbir@moz-118134F7.cable.virginmedia.com)
[12:08:12] *** Quits: saneyuki (Tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[12:08:23] *** Joins: Jesin (Jessin_@moz-C8BB4444.cc.lehigh.edu)
[12:11:38] *** Joins: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca)
[12:12:09] *** Quits: fabiand (fabiand@moz-84D5F8C9.adsl.alicedsl.de) (Quit: Verlassend)
[12:12:56] *** Joins: fabiand (fabiand@moz-84D5F8C9.adsl.alicedsl.de)
[12:20:23] <dbaupp> haha, https://github.com/mozilla/rust/issues/1 has so many bug reference just from people writing "#1" in commits/issues.
[12:21:19] <kimundi> dbaupp: haha
[12:22:03] <kimundi> dbaupp: r? https://github.com/mozilla/rust/pull/9398
[12:22:37] <Seldaek> dbaupp: seems to be a problem of most projects yeah, they should probably start numbering issues at 10 :)
[12:24:24] <dbaupp> kimundi: r+ after the s/it's/its/ change I commented on
[12:24:30] <dbaupp> Seldaek: https://github.com/mozilla/rust/issues/10 still a few there too :P
[12:25:49] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[12:28:56] *** Quits: canhtak (jeremy@moz-8E705AE1.wl.t.ulaval.ca) (Quit: canhtak)
[12:31:10] <kimundi> gar, rust-logo
[12:31:37] <kimundi> how do I get my git to ignore that it has changed? It doesn always reapear after an hard reset
[12:31:43] *** Joins: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net)
[12:32:50] <dbaupp> I just made a commit with it only, and then rebase on top of master, and that commit disappeared
[12:32:56] <dbaupp> *rebased
[12:32:58] <Seldaek> dbaupp: alright then, #1000000000 it is
[12:33:06] <Seldaek> #onemilliontrilliondollars
[12:33:17] <SiegeLord> Just use a hash ;)
[12:33:21] <dbaupp> Seldaek: sounds good; lets get jobs at github to implement this!
[12:33:31] <SiegeLord> It's the git wayâ„¢
[12:33:48] <Seldaek> SiegeLord: yeah, and if you edit the issue report the url changes :)
[12:34:46] <Seldaek> dbaupp: seems to be mostly because of stack traces that people didn't put in fenced ``` blocks
[12:34:56] <kimundi> dbaupp: rebased https://github.com/mozilla/rust/pull/9398
[12:35:55] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[12:36:38] *** Joins: MrOrdinaire (Mibbit@1A659656.A607747.FD383126.IP)
[12:37:05] <MrOrdinaire> hi, could anyone point me to where I can read more about Send-able types?
[12:37:54] <dbaupp> MrOrdinaire: http://static.rust-lang.org/doc/master/std/kinds/trait.Send.html but that's only a tiny little bit more
[12:37:56] <kimundi> Hm, not sure about where to point you
[12:38:08] <kimundi> MrOrdinaire: Any specific questions?
[12:38:28] <ChrisMorgan> http://static.rust-lang.org/doc/master/rust.html: "Types of this kind can be safely sent between tasks. This kind  includes scalars, owning pointers, owned closures, and structural types  containing only other owned types. All Send types are 'static. "
[12:38:28] *** Quits: nkoep (nik@moz-A60B8D9F.pool.mediaways.net) (Ping timeout)
[12:39:58] <kimundi> In other words, an Sendable type may not point to anything that might be concurrently accessed by someone else in a way that causes race conditions.
[12:40:30] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[12:40:39] <MrOrdinaire> dbaupp, kimundi, ChrisMorgan: Thank you.
[12:40:55] <MrOrdinaire> So I guess the Send trait is a compiler magic?
[12:40:56] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[12:40:56] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/jtuwgQ
[12:40:56] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[12:40:56] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[12:40:57] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/jAyMhw
[12:40:57] <ghrust> 13rust/06auto 14bb7bc6c 15Marvin LÃ¶bel: Extended the module tutorial section about files a bit
[12:40:57] <ghrust> 13rust/06auto 145b6ef09 15bors: auto merge of #9398 : Kimundi/rust/work1, r=huonw
[12:40:57] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[12:41:19] <kimundi> Someone here who has an opinion about renaming str.rfind() to str.find_rev(), please comment here: https://github.com/mozilla/rust/pull/9392
[12:41:21] <amatus> what's with the ' in front of 'static?
[12:41:27] <ChrisMorgan> amatus: lifetime
[12:41:36] <kimundi> amatus: 'IDENT is our lifetime syntax
[12:41:37] <dbaupp> MrOrdinaire: (I think the rule is ~, * and the primitives are sendable, and an aggregate type is Send if and only if it only contains entirely sendable types, and isn't marked #[non_send])
[12:42:01] <kimundi> 'static is a special kind that for shares the same syntax to make it more obvious what it means
[12:42:06] <dbaupp> MrOrdinaire: and yes, it is compiler magic
[12:43:21] <kimundi> Or worded differently: 'static in that context is a build-in trait that only types that either contain no references, or references with static lifetime
[12:43:42] <MrOrdinaire> ChrisMorgan: Could you elaborate why "All Send types are 'static"?
[12:43:43] <kimundi> ... have.
[12:43:49] <MrOrdinaire> dbaupp: thanks a bunch
[12:44:11] <ChrisMorgan> MrOrdinaire: because that's what it says. :P
[12:44:36] <kimundi> MrOrdinaire: It's okay for a type that can be send across tasks to contain a pointer into static memory, because that will never go away for the lifetime of your process
[12:44:46] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[12:46:01] <kimundi> struct Foo { label: &'static str, } // This is a Sendable type, and also fulfills 'static. It can only be initialized with a compiletime constant string
[12:46:14] *** Joins: canhtak (jeremy@moz-8E705AE1.wl.t.ulaval.ca)
[12:46:14] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[12:46:16] <MrOrdinaire> kimundi: thanks a bunch
[12:46:20] <MrOrdinaire> I get it now
[12:48:08] *** Quits: cdidd (cdidd@moz-CD8979FF.broadband.corbina.ru) (Input/output error)
[12:50:26] *** Joins: fyolnish (fyolnish@moz-3BED4C7D.uqwimax.jp)
[12:53:00] *** Joins: nkoep (nik@moz-CA5CECB5.vpn.rwth-aachen.de)
[12:55:38] *** Joins: aeqwa (aeqwa@moz-183FEBFF.dsl.tropolys.de)
[12:57:00] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[13:03:31] <kimundi> rusti: 5u8.to_char()
[13:03:34] -rusti- <anon>:7:9: 8:5 error: type `u8` does not implement any method in scope named `to_char`
[13:03:34] -rusti- <anon>:7          5u8.to_char()
[13:03:34] -rusti- <anon>:8     };
[13:03:34] -rusti- error: aborting due to previous error
[13:03:34] -rusti- application terminated with error code 101
[13:03:55] <kimundi> rusti: 'f'.to_char()
[13:03:56] -rusti- <anon>:7:9: 8:5 error: type `char` does not implement any method in scope named `to_char`
[13:03:56] -rusti- <anon>:7          'f'.to_char()
[13:03:56] -rusti- <anon>:8     };
[13:03:56] -rusti- error: aborting due to previous error
[13:03:56] -rusti- application terminated with error code 101
[13:04:26] *** Quits: MrOrdinaire (Mibbit@1A659656.A607747.FD383126.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[13:04:37] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[13:06:00] *** Joins: cowboyd (cowboyd@moz-1BD02A1E.sw.biz.rr.com)
[13:08:48] *** Joins: maik (maik@moz-85739CD7.dip0.t-ipconnect.de)
[13:09:49] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[13:11:26] *** Quits: maik (maik@moz-85739CD7.dip0.t-ipconnect.de) (Ping timeout)
[13:11:36] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[13:11:45] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[13:13:46] *** Quits: tgummerer (tgummerer@moz-3E762AD9.kthopen.kth.se) (Ping timeout)
[13:19:01] *** Quits: GeneralMaximus (ankur@CE720DCC.457F5A6C.D5D59AD9.IP) (Quit: Computer has gone to sleep.)
[13:22:38] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[13:23:07] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[13:24:03] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[13:24:33] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: Textual IRC Client: www.textualapp.com)
[13:24:51] *** Joins: GeneralMaximus (ankur@CE720DCC.457F5A6C.D5D59AD9.IP)
[13:27:20] *** Quits: novabyte (Instantbir@moz-118134F7.cable.virginmedia.com) (Quit: bye bye)
[13:27:58] *** jorendorff_away is now known as jorendorff
[13:29:55] <bogen> is there any way to do a call trace on an assertion (not in a debugger)? When an unhandled assertion is in a library module the file:line displayed does not point to the actual fault line. I was thinking of something along the lines wrapping the call to main with some code to trap the abort and do a call trace.
[13:30:47] *** jorendorff is now known as jorendorff_away
[13:30:54] <kimundi> bogen: Sadly a debugger like gdb is the only way to get something like that at the moment
[13:31:04] <dbaupp> bogen: what kind of assertion? on in rustc, or in your code?
[13:31:08] <dbaupp> *one
[13:32:07] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[13:32:34] <dbaupp> (also, the old runtime use to support `RUST_LOG=::rt::backtrace` which would show the call stack at each fail!() call; doesn't work in the new runtime though (not sure if there are plans to reimplement it).)
[13:33:11] <bogen> task <unnamed> failed at 'assertion failed: start <= end', /home/dwight/rust-work/rust-git/src/rust/src/libstd/vec.rs:895
[13:33:12] <jensnockert> I really hope there are plans.
[13:33:26] <jensnockert> The lack of stack traces are annoying.
[13:33:36] <bogen> The fault is in my code and is trivial enough to find the problem on stuff like that
[13:34:22] <bogen> that was just a case of size not being checked prior to acting on a vector.
[13:35:53] <dbaupp> yeah, gdb and `break rust_begin_unwind`, or `catch throw` (?); unfortunately.
[13:36:37] *** Joins: saneyuki (Tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[13:36:45] *** Joins: sk (sk@84ED2246.E25437ED.78DD174B.IP)
[13:37:22] <kimundi> rusti: range(4, 10).nth(0)
[13:37:26] -rusti- Some(4)
[13:38:12] *** Joins: Larry (larryfox@moz-343B6F0C.nyc.biz.rr.com)
[13:38:17] *** Quits: saneyuki (Tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Ping timeout)
[13:38:43] <bogen> I'm starting to use "#!/usr/bin/env rustx" for rust "scripts" and would like stack traces on run time errors to handle that.  rustx = http://pastebin.mozilla.org/3128575
[13:39:12] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[13:43:14] <osa1> any ideas why I'm getting same error 3 times: http://lpaste.net/93297 ?
[13:43:43] <osa1> um .. yeah apparently they're not same error. sorry, just waking up.
[13:43:48] <Seldaek> it's not technically the same error, even though they're related
[13:44:00] <Seldaek> good mornin' then ;)
[13:44:06] <sw17ch> are there plans to try and link to the source code the documentation is generated from in the Rust docs? For example, it would be nice if there was a 'Source' link next to the 'INITIAL_CAPACITY' Static on this page (http://static.rust-lang.org/doc/master/std/hashmap/index.html) that linked to here (https://github.com/mozilla/rust/blob/master/src/libstd/hashmap.rs#L34).
[13:44:38] <dbaupp> haha, rsaarelm asked the same question on #rust-gamedev 2 minutes ago :P
[13:44:42] <dbaupp> (the answer is yes)
[13:45:08] <dbaupp> e.g. the reference node.js implementation has them http://seld.be/rustdoc/master/std/from_str/trait.FromStr.html
[13:45:28] <osa1> good morning :)
[13:46:05] <osa1> another question, everything in Rust is either a declaration or an expression, right? so how can I return a value in a loop? I'm trying something like this http://lpaste.net/93298 but doesn't work
[13:46:29] <dbaupp> Seldaek: the plan is to use hashes rather than just .../blob/master/..., yeah? (since that goes out of date, etc.)
[13:47:02] <dbaupp> osa1: loop, for and while are all expressions that have value `()`
[13:47:19] <dbaupp> rusti: let x = (for i in range(0, 10) {}); x
[13:47:20] -rusti- <anon>:7:22: 7:23 warning: unused variable: `i` [-W unused-variable (default)]
[13:47:20] -rusti- <anon>:7          let x = (for i in range(0, 10) {}); x
[13:47:20] -rusti-                                ^
[13:47:21] -rusti- ()
[13:47:56] <dbaupp> osa1: so you just need to run the loop outside the println and `break` out of it
[13:48:34] <dbaupp> rusti: let mut x = 5; loop { x += x - 3; if x % 5 == 0 { break; } } println!("{}", x)
[13:48:34] -rusti- 35
[13:48:34] -rusti- ()
[13:48:36] <osa1> dbaupp: got it, classic imperative style. when I first heard everything is an expression I though this kind of thing would be cool
[13:49:23] *** Joins: maik (maik@moz-85739CD7.dip0.t-ipconnect.de)
[13:49:35] <dbaupp> osa1: yeah, it'd be pretty fancy if (say) `break 10` gave the loop that value.
[13:50:14] <Seldaek> dbaupp: yes for master it should be a hash, for 0.8 I guess not 
[13:50:16] <myname> but wouldn't that conflict with "break 10" as "break 10 layers of loops"?
[13:50:26] <kimundi> conflicts a bit with labeld break though :P
[13:50:31] * ChrisMorgan (a Python guy, where everything is a statement) thought everything-is-an-expression-with-the-last-value-if-there's-no-semicolon was only a gimickâ€”until he used it
[13:50:54] <dbaupp> Seldaek: it'd still have to be some sort of non /master/ reference, right? (e.g. the hash that the 0.8 tag corresponds to?)
[13:50:55] <engla> osa1: maybe you can use some kind of iterator construction if you want to do that
[13:51:15] <dbaupp> myname: that doesn't exist in rust, but, yeah, it would conflict if it did
[13:51:21] <Seldaek> dbaupp: well, you can have tag names in there too, like 0.8 :)
[13:51:28] <dbaupp> Seldaek: ah, right
[13:51:31] <myname> dbaupp: are there no plans?
[13:51:39] <dbaupp> myname: we have labelled break instead
[13:51:45] <myname> ah
[13:52:15] <dbaupp> rusti: 'outer: for _ in range(0, 10) { for _ in range(0, 10) { break 'outer; } println("no print") }
[13:52:16] -rusti- ()
[13:52:31] <engla> naming loops is nice
[13:52:36] <kimundi> ChrisMorgan: I find it pretty cool that 'return' is no longer a repetitive typed keyword, but only used in the rare cases where you need early return.
[13:52:48] *** Joins: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net)
[13:53:01] <myname> dbaupp: so you can't return strings in a loop with that syntax ;p
[13:53:03] <ChrisMorgan> Yeah, I've found it surprisingly useful.
[13:53:47] <dbaupp> myname: yeah, you can; strings are `"..."` :P and characters and lifetimes are actually disambiguated at the token stage, so that would still work; it'd just be a weird overloading.
[13:54:01] <dbaupp> (a very weird overloading)
[13:54:14] <kimundi> (very very weird)
[13:54:25] <dbaupp> I'm considering adding a lint for unnecessary `return`
[13:54:31] <kimundi> Do it!
[13:54:58] * dbaupp files a bug so that he doesn't forget/gets someone else to do the work :P
[13:55:48] *** Quits: maik (maik@moz-85739CD7.dip0.t-ipconnect.de) (Ping timeout)
[13:55:56] *** Quits: dew (Instantbir@moz-D2FA52B6.static.stls.mo.charter.com) (Ping timeout)
[13:56:00] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.1)
[13:56:02] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[13:56:02] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/jAyMhw
[13:56:02] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[13:56:03] <engla> now that the old for loop is dead, `return` could be allowed in closures
[13:56:13] <engla> now there might be other good reasons it's not allowed
[13:57:30] *** Joins: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com)
[13:57:36] *** Joins: jasdevsingh (jasdevsing@moz-21CF4479.hsd1.va.comcast.net)
[13:58:05] <dbaupp> https://github.com/mozilla/rust/issues/9426
[13:58:23] <engla> hm yeah it's a bad idea
[13:58:27] <dbaupp> why?
[13:58:51] <engla> the 'return' in lambda expressions thing, sorry
[13:59:07] <dbaupp> yeah, but why?
[14:00:01] <dbaupp> (if one needs captured variables and early return, Rust currently leaves you high and dry in verbose-workaround land.)
[14:00:12] *** Joins: Ferreus (ferreus@moz-4FA3FF80.dyn.telefonica.de)
[14:03:17] <engla> the ambiguity, I mean in the worst cases you have several  do fxyz { }   blocks nested
[14:03:30] *** Joins: wakandan (Mibbit@5232D4B6.13322C48.EAD3CEA6.IP)
[14:03:44] <engla> and to keep track of the `return` in there and which closures they return from sounds confusing
[14:04:03] <wakandan> hi there
[14:04:11] <wakandan> I'm implementing a linked list for learning purpose 
[14:04:21] <wakandan> how exactly do I instantiate a new struct?
[14:04:36] <wakandan> is there kind of Node.new() or something?
[14:04:41] <engla> hi wakandan 
[14:04:53] <wakandan> hi engla 
[14:04:56] <engla> you write   Node { a: 1, b: "hi" }
[14:05:11] <wakandan> ah 
[14:05:16] <dbaupp> engla: presumably it's no worse than having nested `fn`s? (I'd argue that the ambiguity is worth it, since not having return in closures is really annoying when you need it.)
[14:05:25] <wakandan> I'm having a list of number
[14:05:33] <wakandan> converting that list into a linked list 
[14:05:49] <wakandan> if I do Node{a: array[i]} for example 
[14:05:50] <wakandan> would that work?
[14:06:06] <engla> but nested `fn` are not really that common
[14:06:31] <engla> also closure blocks blend in much better, they look like loop or other blocks
[14:07:30] <wakandan> hi dbaupp 
[14:07:38] <wakandan> dbaupp: how come you always online :)
[14:08:25] <engla> wakandan: you have to give all struct members a value
[14:08:28] *** Joins: saneyuki (Tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[14:08:51] <engla> it's also customary to create an associated function called ::new()
[14:09:16] <dbaupp> engla: true, but as I said, not allowing for ambiguity reasons is a bit like nested if statements because it's hard to tell which elses match with which ifs :P (I understand your point, but I think it's mostly up to the programmer to make sure their code is understandable; and also that not having `return` makes certain patterns extremely unpleasant.)
[14:09:44] <dbaupp> wakandan: hi... a combination of timezones and being a student who doesn't spend enough time studying :P
[14:09:57] <wakandan> you're a student???
[14:10:01] * dbaupp is
[14:10:02] *** Quits: _1126 (1126@moz-83D60E55.lileth.net) (Quit: leaving)
[14:10:02] <wakandan> dbaupp: no way
[14:10:10] <dbaupp> hah, why?
[14:10:14] *** Joins: _1126 (1126@moz-83D60E55.lileth.net)
[14:10:23] <wakandan> dbaupp: you sound a lot of like my profs
[14:10:39] *** Joins: cdidd (cdidd@moz-1D4B0575.broadband.corbina.ru)
[14:10:52] *** Joins: charmander (charmander@8B522D39.982343C0.37A78CD5.IP)
[14:10:56] * dbaupp can't tell if that's good or bad... maybe he's spending too much time in academia already :P
[14:11:02] *** Quits: cdidd (cdidd@moz-1D4B0575.broadband.corbina.ru) (Connection reset by peer)
[14:11:17] *** Joins: cdidd (cdidd@moz-E43F830C.broadband.corbina.ru)
[14:11:22] <myname> there is no such time as too much
[14:11:37] <wakandan> myname: ok now you're sounding like my prof 
[14:11:44] <wakandan> lol
[14:11:53] <wakandan> struct Node {     value: int,     next: Option<~Node> }
[14:11:54] <dbaupp> anyway, destroying the illusion of always being online... bedtime for me.
[14:12:07] <wakandan> how do I create a new Node?
[14:12:08] <myname> dbaupp: which timezone are you in?
[14:12:13] * kimundi as a german university student always finds it annoying that the english language does not differentiate between grade/middle school-student and college/university student
[14:12:13] <wakandan> what value should I put for "next"?
[14:12:25] <engla> wakandan: None is a good start :)
[14:12:27] <dbaupp> myname: australia (AEST)
[14:12:32] <myname> i see
[14:12:40] <myname> kimundi: where do you study?
[14:12:48] <wakandan> dbaupp: it's pretty late then
[14:13:00] <bogen> myname: there can be "too much" acadamia time if it is not balanced with real world experience
[14:13:01] *** Joins: novabyte (Instantbir@moz-118134F7.cable.virginmedia.com)
[14:13:03] <wakandan> kimundi: probably germany?
[14:13:10] <dbaupp> kimundi: it does: "XYZ-school student" vs. "university student" :P
[14:13:23] <dbaupp> wakandan: yup, just after midnight
[14:13:57] <kimundi> dbaupp: See, the problem is just I don't know that :P american and german school system just don't have a good mapping to each other. At least not one I've learned yet.
[14:14:04] <kimundi> wakandan: Yeah
[14:14:13] <kimundi> Tu Dortmund
[14:14:19] <wakandan> kimundi: pls don't tell me you're a student as well
[14:14:25] <kimundi> (Technical University)
[14:14:41] <myname> wakandan: lmao
[14:14:42] <kimundi> wakandan: I am :P
[14:14:50] <wakandan> T_T
[14:15:04] <wakandan> I don't know what I'm doing during my uni life
[14:15:08] <wakandan> was&
[14:15:09] <dbaupp> kimundi: yeah, someone was explaining the german system to me... it sounds weird. :P
[14:15:21] <kimundi> Well, I wasted it the last 6 months with rust :P
[14:15:30] <myname> kimundi: that's not wasting
[14:15:49] * dbaupp can't believe kimundi would put `wasted` and `rust` in the same sentence
[14:15:55] <kimundi> dbaupp: See, I'm saying the same about your system. xD 
[14:16:02] <myname> rust is really close to being my language of choice
[14:16:20] <wakandan> dbaupp: haha
[14:16:34] <kimundi> dbaupp: Well, I wasted time _on_ rust that I should've used elsewhere :P. 
[14:16:49] <kimundi> okay, not wasting
[14:17:07] <dbaupp> kimundi: impossible; any time *not* allocated to rust is wasted.
[14:17:14] <myname> :D
[14:17:51] <myname> tbh i love spending time with esoteric languages, even if other people tell that wasting of time
[14:18:11] <Seldaek> myname: what do you mean esoteric? :p
[14:18:16] *** Quits: novabyte (Instantbir@moz-118134F7.cable.virginmedia.com) (Quit: bye bye)
[14:18:21] *** Joins: novabyte (Instantbir@moz-118134F7.cable.virginmedia.com)
[14:18:23] <bogen> I would not consider rust as esoteric. It has too much of a mainstream feel to it.
[14:18:43] <kimundi> Okay, how about this: I set my priorities in a way that are detrimental to the attention I pay at the uni, but beneficial to my involvement with rust. ;)
[14:18:48] <myname> like esolangs.org esoteric
[14:19:03] <bogen> (which makes rust easier to dive into than many "new" languages)
[14:19:09] <kimundi> myname: Port rustc to Trifunge!
[14:19:20] <myname> there is trifunge?
[14:19:24] <Seldaek> myname: it isn't listed there it seems :)
[14:19:24] <myname> i have to check
[14:19:38] <kimundi> The is a formal definition for Nfunge :P
[14:20:06] *** Quits: novabyte (Instantbir@moz-118134F7.cable.virginmedia.com) (Quit: bye bye)
[14:20:33] <kimundi> (maybe not on that site, sorry)
[14:20:39] <kimundi> (I meant in gneral)
[14:20:59] * dbaupp wills people to submit/review more PRs so that he can wake up to some awesome new features.
[14:21:03] <myname> befunge is one of my favorites
[14:21:16] <myname> but armok is close to making me really excited
[14:21:32] * kimundi has to google armok
[14:21:39] <myname> https://github.com/Frib/Armok
[14:21:58] <myname> it's basically a language based on dwarves
[14:22:13] *** Quits: jasdevsingh (jasdevsing@moz-21CF4479.hsd1.va.comcast.net) (Quit: jasdevsingh)
[14:22:20] <kimundi> Ah, the dwarffortress one xD
[14:22:24] <myname> yeah
[14:22:31] <wakandan> let mut nextNode: ~Node = ~Node{value:-1, next: None}; 	let mut head: &~Node = &nextNode;
[14:22:33] <myname> the name suuggests that
[14:22:40] <wakandan> i'm getting "error: cannot assign to `nextNode` because it is borrowed"
[14:23:15] <kimundi> let head: &mut ~Node = &mut nextNode; // ?
[14:24:15] <wakandan> found `mut` in ident position linkedlist.rs:9 	let &mut head: ~Node = &nextNode;
[14:24:28] <engla> wakandan: it is borrowed because you create a reference to it in head
[14:24:29] <kimundi> not there :P
[14:24:40] <wakandan> I think I need sometimes to get used to "never NULL" system 
[14:24:50] <wakandan> uhm 
[14:24:58] <wakandan> i don't think I'm getting it
[14:25:08] <wakandan> i'm trying to build a linked list 
[14:25:16] <wakandan> so is my direction here right?
[14:25:21] <wakandan> I keep a head node 
[14:25:36] <kimundi> wakandan: &T and &mut T are different types of references, which have nothing todo with whether they are stored in a mutable or immutable variable
[14:25:50] <wakandan> I got a list of numbers, for each number I will create a new Node, and chain it somehow
[14:25:53] <engla> Node { next: Option<~Node> }  is the essence of a linked list, so sure
[14:26:01] <wakandan> yup 
[14:26:25] <wakandan> kimundi: &T should be a pointer to a struct in stack
[14:26:33] <kimundi> wakandan: You want to append nextNode to head?
[14:26:42] <wakandan> kimundi: &mut T is a mutable pointer to T?
[14:26:47] <wakandan> something like that 
[14:26:54] <wakandan> I mean, I want head to be my first number
[14:26:55] <wakandan> and so on
[14:26:58] <engla> to simplify, don't take any references wakandan. Only do the owning pointers for now
[14:27:28] <kimundi> wakandan: Yes except both point at any value T, not neccessary on the stack
[14:27:41] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Quit: class)
[14:28:11] <wakandan> engla: this is the list 
[14:28:12] <wakandan> let numbers = ~[1,2,4,5,8];
[14:28:27] <kimundi> let nextNode = ~Node{value:-1, next: None};  let mut head = ~Node { value:2, next: Some(nextNode) }
[14:28:27] <wakandan> for head, let mut head: Node?
[14:28:44] <engla> yes wakandan 
[14:28:52] <wakandan> kimundi: -1 was like, something to init the "nextNode"
[14:29:38] <kimundi> wakandan: Hm, should plug in the right value directly there :P
[14:29:53] <engla> you can use the methods on Option to make this easier, in particular   Option.take()
[14:30:06] <wakandan> engla: I don't know what it is 
[14:30:15] <engla> of course, you can look it up!
[14:30:21] *** Quits: variable (root@B7EB2247.C9C74790.67659D25.IP) (Quit: I found 1 in /dev/zero)
[14:30:21] <wakandan> engla: as a matter of fact, I don't know how to keep the "head" above referenced T_T
[14:30:35] <kimundi> wakandan: The line I wrote should work
[14:30:37] <engla> head = None; // empty list
[14:30:37] <kimundi> let nextNode = ~Node{value:-1, next: None};  let mut head = ~Node { value:2, next: Some(nextNode) }
[14:31:07] <kimundi> after that, nextNode got moved into head, and you can return head or keep appending to it
[14:31:19] <kimundi> Or, prepending in this case
[14:31:30] *** Joins: Chef (Chef@moz-A1EAC770.dsl.teksavvy.com)
[14:31:48] <wakandan> hmm
[14:31:55] <wakandan> kimundi: but -1 was not in the list...
[14:31:56] *** Parts: Chef (Chef@moz-A1EAC770.dsl.teksavvy.com) ()
[14:32:08] <engla> prepend is     let old_head = head.take(); head = Some(Node { value: 1, next: old_head })
[14:32:11] <kimundi> wakandan: Well, why did you add it then? :P
[14:32:14] <wakandan> I did that because I didn't know how to initilize a node, so that I can point "head" into
[14:32:21] <wakandan> let numbers = ~[1,2,4,5,8];	 	let mut nextNode: Node; 	for &num in numbers.iter() { 		nextNode = ~Node {value: num, next: None};	 	}
[14:32:25] <wakandan> here is what I wrote
[14:32:27] <wakandan> but i'm stuck
[14:32:29] <kimundi> wakandan: (Not sure what you where trying to do there originally)
[14:32:43] *** Joins: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP)
[14:32:54] <wakandan> kimundi: I was trying to create a linked list from a list of numbers...
[14:33:22] <kimundi> Sure, I just misunderstood :)
[14:33:27] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[14:33:42] <wakandan> kimundi: so, what should I write in the for loop?
[14:34:00] <engla> Maybe it's easier to think about it with  Option<~Node> as a regular, nullable pointer, with null represented by None
[14:34:01] <wakandan> kimundi: in my head, because rust doesn't have "null" value, I can't really check if it's the first value or not 
[14:34:50] <wakandan> engla: or may be my approach was not quite correct
[14:34:55] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[14:35:22] <wakandan> engla: could you help me write a quick linked list from that list of number?
[14:35:36] <engla> yes, I was trying to help with the definition of prepend above
[14:35:41] <kimundi> wakandan: So, you can either iterate over the numbers in reverse and build the list from the button up, or iterate in the normal direction and keep two pointers, one to the head for later returning, and one for the tail that you keep appending at. However, I think the latter will make you more trouble, so I would just do the former
[14:36:02] <wakandan> kimundi: ah!
[14:36:13] <wakandan> kimundi: I was looking at the second
[14:36:18] <wakandan> kimundi: T_T
[14:36:29] <wakandan> btw where can I look for stuff in rust?
[14:36:33] <wakandan> like, how to reverse a list?
[14:37:10] <kimundi> wakandan: Look in the docs for the stdlib or the source code. We just got a new doc generator, and it's still not feature complete
[14:37:26] <wakandan> http://www.scala-lang.org/api/current/ <-- this looks good
[14:37:28] <kimundi> wakandan: I'm not sure if we can already do something like "show all operation I can do on this type"
[14:37:41] <kimundi> But we'll get there
[14:37:43] <kimundi> anyway
[14:38:03] *** Joins: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net)
[14:39:09] <wakandan> may be I could help with some documentation or something
[14:39:21] <kimundi> let mut head = None; for e in v.iter().invert() { let old_head = head.take(); head = ~Node{ value: e, next: old_head }; }; return head
[14:39:25] <engla> I'm sure you can wakandan 
[14:39:32] *** jorendorff_away is now known as jorendorff
[14:39:50] <kimundi> That seems the easiest course of action
[14:40:00] <kimundi> wait
[14:40:23] <kimundi> replace the word 'head' with 'tail' :P
[14:40:35] <kimundi> Then it's correct
[14:40:43] <kimundi> No wait...
[14:40:45] <kimundi> arrg
[14:40:49] * kimundi is confusing himself
[14:40:50] <wakandan> kimundi: ah! that "None" value 
[14:41:05] <wakandan> kimundi: thought there's nothing like that in rust
[14:41:11] <engla> lol
[14:41:39] <kimundi> 'head' is correct
[14:41:53] <engla> yeah
[14:42:06] <engla> but you need the Some()
[14:42:08] <engla> for head
[14:42:11] <kimundi> where?
[14:42:21] <engla> head = Some(~Node { .. })
[14:42:28] <kimundi> ah, right
[14:42:29] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[14:42:33] <engla> it's like my code above for prepend except I forgot  the ~
[14:42:43] <kimundi> engla: Ah, didn't see your code
[14:42:57] * wakandan so confused
[14:43:25] <engla> owned datastructures are confusing
[14:43:30] <engla> but the operations you need are simple
[14:43:41] <engla> let head = None   // this is the empty list
[14:44:00] <wakandan> if(head==None) doesn't work
[14:44:27] <wakandan> engla: rust concepts are quite tough for me
[14:44:40] <kimundi> rusti: struct Node { value: uint, next: Option<~Node> }; let v = [1u,2,3,4]; let mut head = None; for e in v.iter().invert().map(|x| *x) { let old_head = head.take(); head = Some(~Node{ value: e, next: old_head }); }; head
[14:44:40] <engla> you'd use match, not if
[14:44:41] -rusti- Some(~main::Node{value: 1u, next: Some(~main::Node{value: 2u, next: Some(~main::Node{value: 3u, next: Some(~main::Node{value: 4u, next: None})})})})
[14:45:13] <kimundi> wakandan: == Is an overridable operator, Option only implements it if the underlying type implements it
[14:45:23] <kimundi> rusti: Some(5u) == None
[14:45:24] -rusti- false
[14:45:34] <kimundi> rusti: struct Custom; Some(Custom) == None
[14:45:34] -rusti- <anon>:7:24: 7:44 error: failed to find an implementation of trait std::cmp::Eq for main::Custom
[14:45:35] -rusti- <anon>:7          struct Custom; Some(Custom) == None
[14:45:35] -rusti-                                  ^~~~~~~~~~~~~~~~~~~~
[14:45:35] -rusti- application terminated with error code 101
[14:45:47] <wakandan> why do you do this? let old_head = head.take();
[14:45:52] <wakandan> when head=None?
[14:45:59] <engla> wakandan: it works for either case
[14:46:24] <engla> wakandan: it transfers the ownership to the variable old_head
[14:46:37] <kimundi> wakandan: take will return the value of the option, and replace it with an None. If it's already None to being with, that'S not an problem, it just returns None
[14:46:49] <wakandan> engla: I looked at it like an npe in java
[14:46:52] <engla> wakandan: it's like a swap operation where the value None is swapped into head
[14:47:12] <engla> npe?
[14:47:17] <kimundi> null pointer exception
[14:47:33] *** Quits: skade (skade@moz-DA43A266.hsi.kabel-badenwuerttemberg.de) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[14:47:39] <kimundi> wakandan: You'll have to learn to never fear about npe anymore :D
[14:47:44] *** Quits: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP) (Quit: Lost terminal)
[14:48:10] <wakandan> kimundi: that's what I fear :D
[14:48:23] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[14:48:37] <engla> i don't see the connection to Null
[14:48:44] <wakandan> btw I found this http://static.rust-lang.org/doc/master/std/vec.html from google
[14:48:52] <kimundi> wakandan: We don't have implicit null. A type T can never be anything else than its value T. An Option<T> is simply a gneric type with two possible values: Some(T) or None
[14:49:08] <engla> wakandan: you should find this http://www.rust-lang.org/
[14:49:12] <wakandan> does it apply for other modules as well?
[14:49:15] <engla> then click on the doc links to the left
[14:49:48] <wakandan> engla: ah right! http://static.rust-lang.org/doc/0.7/std/index.html
[14:49:53] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[14:49:57] <wakandan> engla: haiz :(
[14:50:16] <cmr> wakandan: don't use google! it lies!
[14:50:18] <engla> use "Trunk" docs
[14:50:37] <wakandan> http://static.rust-lang.org/doc/master/std/index.html
[14:50:49] <wakandan> AccessDenied
[14:50:56] <kimundi> wakandan: Are you suing 0.7 or git master? If git, use trunk docs.
[14:51:13] <wakandan> kimundi:  it's trunk, from rust-lang home page
[14:51:29] <kimundi> wakandan: We just replaced the doc builder, there are still a few problems with our docs :P
[14:51:36] <wakandan> kimundi: ah ok
[14:51:51] <engla> oh bummer
[14:52:12] <wakandan> I'm wishing to write a bunch of code snippets in rust and push it into github
[14:52:19] <wakandan> each with detailed explanation
[14:52:27] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[14:52:30] <kimundi> sounds good!
[14:53:09] <wakandan> this linked list thing probably the first
[14:53:14] <wakandan> but I need to understand it first
[14:53:21] *** Joins: josedonizetti (josedonize@DF22210B.35D9DDB.8EF76F75.IP)
[14:53:27] <kimundi> sure, just keep asking :)
[14:53:32] <wakandan> let mut head = None; let old_head = head.take();
[14:53:47] <wakandan> but....head is None, how could you take something from None?
[14:54:20] <kimundi> wakandan: Well, you're taking the value away and replace it with None
[14:54:29] <kimundi> wakandan: And the value can be either Some(T) or None
[14:55:08] <wakandan> kimundi: oh, as in engla said, it's an ownership transfer or something?
[14:55:42] <kimundi> Well, that's what happens conceptually yeah. But that's not really relevant for the definition of the function :)
[14:55:48] <engla> head is of type Option<~Node>
[14:55:51] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[14:55:57] <engla> you can't copy this type, it's a uniquely owned Node
[14:56:06] *** Quits: Earnestly (earnest@moz-BE290A2B.dyn.plus.net) (Quit: WeeChat 0.4.2-rc1)
[14:56:18] <wakandan> engla: "head is of type Option<~Node>" <-- but I didn't declare that did I?
[14:56:27] <kimundi> wakandan: It infered
[14:56:32] <wakandan> T_T
[14:56:41] <engla> feel free to declare it
[14:56:51] <wakandan> ok, because of the assignment in the for loop?
[14:56:54] <kimundi> rusti: struct Node { value: uint, next: Option<~Node> }; let v = [1u,2,3,4]; let mut head: Option<~Node> = None; for e in v.iter().invert().map(|x| *x) { let old_head: Option<~Node> = head.take(); head = Some(~Node{ value: e, next: old_head }); }; head
[14:56:55] -rusti- Some(~main::Node{value: 1u, next: Some(~main::Node{value: 2u, next: Some(~main::Node{value: 3u, next: Some(~main::Node{value: 4u, next: None})})})})
[14:57:17] <kimundi> wakandan: Right, rusts type inferer can can infer backwards from the usage of an variable what type it should have
[14:57:22] *** Quits: sk (sk@84ED2246.E25437ED.78DD174B.IP) (Quit: Leaving)
[14:57:34] <kimundi> Let me add even more type annotations :P
[14:57:42] <wakandan> kimundi: how the hell can it do that :(
[14:57:57] <sw17ch> The new doc builder makes things pretty. :)
[14:58:02] <engla> now, good type inference is no reason for frowny faces :)
[14:58:08] <wakandan> sw17ch: can't wait!!!!!
[14:58:24] <wakandan> engla: because nobody said that to me 
[14:58:27] <wakandan> alright 
[14:58:31] <kimundi> rusti: struct Node { value: uint, next: Option<~Node> }; let v = [1u,2,3,4]; let mut head: Option<~Node> = None::<Option<~Node>>; for e in v.iter().invert().map(|x| *x) { let old_head: Option<~Node> = head.take(); head = Some::<Option<~Node>>(~Node{ value: e, next: old_head }); }; head
[14:58:35] -rusti- pastebinned 11 lines of output: http://sprunge.us/HJHN
[14:58:35] <sw17ch> engla: agreed. type inference is the magic that makes static types substantially less painful.
[14:59:02] *** Joins: Earnestly (earnest@moz-BE290A2B.dyn.plus.net)
[14:59:08] <wakandan> so in the first iteration, head is None --> head.take() is None, yes?
[14:59:19] <wakandan> then, kimundi assigns new value to head
[14:59:23] <kimundi> rusti: struct Node { value: uint, next: Option<~Node> }; let v = [1u,2,3,4]; let mut head: Option<~Node> = None::<~Node>; for e in v.iter().invert().map(|x| *x) { let old_head: Option<~Node> = head.take(); head = Some::<~Node>(~Node{ value: e, next: old_head }); }; head
[14:59:24] -rusti- Some(~main::Node{value: 1u, next: Some(~main::Node{value: 2u, next: Some(~main::Node{value: 3u, next: Some(~main::Node{value: 4u, next: None})})})})
[14:59:29] <kimundi> (hm, strange)
[14:59:31] <wakandan> and it goes on from there
[14:59:39] <wakandan> kimundi: what's strange?
[14:59:41] <kimundi> wakandan: righjt
[14:59:54] <wakandan> kimundi: let old_head = head.take(); <--- this is crucial
[14:59:58] <kimundi> wakandan: Nothing related to you :)
[15:00:04] <kimundi> right
[15:00:16] <kimundi> if you wanted to write it manually it would be
[15:00:36] <engla> wakandan: nobody will tell if you don't ask the questions
[15:00:46] <engla> wakandan: or experiment :)
[15:00:51] *** Joins: skade (skade@moz-DA43A266.hsi.kabel-badenwuerttemberg.de)
[15:00:54] <wakandan> engla: that means I should write more code
[15:00:56] <wakandan> engla: yup!
[15:01:15] <kimundi> actually, I'm to lazy to write it out manually :P
[15:01:28] <wakandan> why do you need to do this? .map(|x| *x) kimundi 
[15:01:55] <kimundi> wakandan: ah, becase .iter() on a vector iterates over references into the vector, instead of copying the values out
[15:02:21] <kimundi> in case of an uint that would make no difference
[15:02:57] <sw17ch> Does this module (http://static.rust-lang.org/doc/master/std/rt/index.html) give a good summary of the relative size of the Rust runtime?
[15:03:00] <kimundi> But a vector can contain anything, so... Some types don'T like being copied around willy nilly (Or rather, you are forbidden to do so)
[15:03:50] <kimundi> wakandan: So, the map(|x| *x) there is an iterator adapter, that transforms one iterator into another by applying an function on each element
[15:03:55] <wakandan> kimundi: so would it rather be better *not* to have that '|x| *x'?
[15:04:22] <kimundi> wakandan: In this case it dereferences every element and passes them through, something which only works with implicit copyable types like uint
[15:04:31] <wakandan> kimundi: oh, by that you mean each of the element is being dereferenced beforehand
[15:05:10] *** Joins: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net)
[15:05:21] <kimundi> rusti: let v = [1, 2, 3, 4]; for e in v.iter() { print!("{} ", e); }
[15:05:21] -rusti- pastebinned 10 lines of output: http://sprunge.us/cWZI
[15:05:55] <flaper87> acrichto: ping
[15:06:04] <kimundi> rusti: let v = [1, 2, 3, 4]; for e in v.iter() { print!("{:?} ", e); }
[15:06:05] -rusti- &1 &2 &3 &4 ()
[15:06:23] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[15:06:24] *** Quits: noam (noam@F6B530A7.720527A7.416762B.IP) (Ping timeout)
[15:06:28] <kimundi> wakandan: ^ iter() gives you references
[15:06:41] *** Joins: noam (noam@F6B530A7.720527A7.416762B.IP)
[15:06:43] <kimundi> rusti: let v = [1, 2, 3, 4]; for e in v.iter().map(|x| *x) { print!("{:?} ", e); }
[15:06:43] -rusti- 1 2 3 4 ()
[15:07:10] <wakandan> kimundi: yup, i just tried removing that map thing, it does give error for type mismatch
[15:07:15] <wakandan> kimundi: understood
[15:07:55] <wakandan> v.iter().invert().map(|x| *x) is "lazy", I hope?
[15:08:02] <kimundi> wakandan: It is
[15:08:34] <kimundi> wakandan: the type that the map() function returns to you implements Iterator<T>
[15:09:12] <wakandan> alright
[15:09:48] <wakandan> kimundi: why do you need the "Some" in this 
[15:09:48] <wakandan> head = Some(~Node{ value: e, next: old_head }); 
[15:10:07] <wakandan> I never thought of "Some" usecase here
[15:10:13] <kimundi> and every time the for loop syntax loops it calls .next() on that type, which will cause the MapIterator to call next() the VectorIterator it wraps, and apply the function that dereferences the value to it
[15:10:15] <wakandan> so didn't know what to write
[15:10:33] <kimundi> wakandan: becasue the value of head is still Option<~Node>
[15:10:54] <wakandan> head = None implies that?
[15:10:58] <kimundi> wakandan: So it either needs to have the value None or Some(~Node)
[15:11:05] <kimundi> rigjt
[15:11:17] <wakandan> kimundi: oh, interesting
[15:11:38] <kimundi> you can also bee explicit
[15:11:46] <kimundi> rusti: None::<uint>
[15:11:46] -rusti- None
[15:11:55] <kimundi> This is a None value of type Option<uint>
[15:11:59] <wakandan> where does this "Some" come from?
[15:12:09] <wakandan> hmm
[15:12:19] <kimundi> enum Option<T> { Some(T), None }
[15:12:37] <wakandan> I think None is a bit misleading to my opinion, it means "null" in python and js while it means "something with no value" in rust
[15:12:56] <kimundi> defined in std::option::Option, reexported in std::prelude, which is imported per default
[15:13:19] <wakandan> kimundi: ok
[15:13:40] <kimundi> wakandan: null is more "no value" than "None" imo :P
[15:13:52] <wakandan> kimundi: lol 
[15:14:03] <wakandan> I want to put these code somewhere for you guys to reivew
[15:14:11] <wakandan> how can I make this as a pull request?
[15:14:26] <wakandan> I mean the code we've been discussing
[15:14:32] <kimundi> For every type T, and value of type Option<T> has two possible values: None or Some(T)
[15:14:53] <kimundi> wakandan: You can jsut make an gist
[15:15:03] <kimundi> https://gist.github.com/
[15:15:19] <kimundi> If you just want to show it to people and allow comments
[15:15:29] <wakandan> hmm
[15:15:34] <kimundi> Unless you've got an concrete plan to add an documentation page or so
[15:15:42] <wakandan> cuz i'm sure my discussion will have misunderstanding
[15:15:44] <kimundi> Or want to maek an own repo for that
[15:15:50] <wakandan> and so on
[15:16:03] <engla> Python is cheating, None is its own type
[15:16:18] <wakandan> engla: lol 
[15:16:22] <engla> or you could say that all python values have the same type "PyObject" and None is just one of the values possible
[15:16:25] <wakandan> engla: so long I didn't touch that
[15:16:34] <engla> anyway, they only add the None value once
[15:17:50] *** Joins: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net)
[15:20:25] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[15:21:57] *** Joins: maik (maik@moz-85739CD7.dip0.t-ipconnect.de)
[15:22:54] <geal> is there a documentation about how one is expected to use rustpkg? If I am just using one file and I want to use a package found on github, do I need to create a pkg.rs? Do I use "rustpkg install github.com/a/b", or do I clone the repo and use "rustpkg build" ?
[15:24:07] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[15:24:25] <geal> also, I don't really grok the "workspace" word in https://github.com/mozilla/rust/blob/master/doc/rustpkg.md . What does it refer to? The current project folder?
[15:25:31] *** Quits: sebcrozet (sebcrozet@moz-D8879CC3.w80-13.abo.wanadoo.fr) (Quit: Gone)
[15:25:44] *** Quits: cairsds (Mibbit@A083BCB.AAB185EE.9D625D35.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[15:29:15] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[15:30:57] *** Joins: riley (riley@8BA43816.9AA11D69.65DDFA89.IP)
[15:31:19] *** Quits: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net) (Ping timeout)
[15:32:36] <wakandan> http://mibpaste.com/DV68QO kimundi could you quickly check if my understanding is correct on the linked list example?
[15:32:53] *** Joins: Guest (textual@moz-E06F46F0.corp.bitshelter.com)
[15:33:03] *** Guest is now known as exobit
[15:34:19] *** Quits: StarLight (StarLight@moz-7B20A13C.dynamic.avangarddsl.ru) (Ping timeout)
[15:34:22] *** Joins: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net)
[15:36:52] <wakandan> http://mibpaste.com/DV68QO engla hope you could take a quick look as well :D
[15:37:03] <wakandan> i'm sure I'm missing out on something there
[15:37:20] <kimundi> .invert() to reverse a list -> .invert() to iterate from the back. There's actually a bit more going on there: The Ierator object returned from iter() implements both Iterator and DoubleEndedIterator, which means you basically have an range of values that you can advance from both sides until they meet in the middle.
[15:37:31] *** Joins: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net)
[15:37:52] *** Joins: StarLight (StarLight@moz-8AA8C953.pppoe.avangarddsl.ru)
[15:38:16] <kimundi> The for syntax always advance from the front, .invert() swaps both ends so that the back becomes the front
[15:38:26] <wakandan> kimundi: wow 
[15:38:48] <wakandan> kimundi: where's that I idea come from, I never know something similar
[15:38:51] <kimundi> It's pretty neat, yeah :)
[15:39:02] <wakandan> kimundi: guest I could put "to iterate from the back" for now
[15:39:06] <kimundi> D calls them ranges, and pythons iterators are similar too, I think
[15:39:16] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[15:39:17] *** Quits: jaen (jaen@FB01674D.56B727FE.4B52F012.IP) (Ping timeout)
[15:39:28] *** Joins: bheylin_ (brianheyli@moz-3D24C757.static.chello.nl)
[15:40:12] <wakandan> kimundi: hmm for pythong I don't think so 
[15:40:16] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[15:40:26] <wakandan> kimundi: list[::-1] actually creates a new list
[15:40:31] *** Quits: bheylin_ (brianheyli@moz-3D24C757.static.chello.nl) (Quit: bheylin_)
[15:40:55] <wakandan> kimundi: is there anything else?
[15:41:11] <kimundi> I think this one: http://docs.python.org/2/library/itertools.html
[15:41:22] <kimundi> Not sure, just overheard them being compared a few times
[15:41:45] <wakandan> kimundi: ah, that's itertool, a library 
[15:42:15] *** Joins: bytewise (bytewise@moz-4A801D04.unitymediagroup.de)
[15:42:28] <kimundi> Might well be, I literally know nothing about python except the fact that it uses significant whitespace ;)
[15:43:36] *** Quits: Jesin (Jessin_@moz-C8BB4444.cc.lehigh.edu) (Quit: Leaving)
[15:43:59] <wakandan> kimundi: should I commit it now? is there anything I should add?
[15:44:06] *** Joins: hoverbear (andrew@EBFA78B5.F19E5E7B.E74D50F2.IP)
[15:44:09] <kimundi> Still looking over it
[15:44:20] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[15:44:21] <wakandan> I guess I should try to work on it some more tmr, with some fn usage or something 
[15:44:24] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[15:44:25] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[15:44:34] <wakandan> or probably I should just keep it KISS for the time being
[15:45:42] *** Quits: hoverbear (andrew@EBFA78B5.F19E5E7B.E74D50F2.IP) (Quit: hoverbear)
[15:45:50] <kimundi> Hm, I would change the .map(|x| *x) part a bit - The dereference there only works with implicitly copyable types, so you could elaborate on that. Or change it to .map(|x| x.clone()), and explain that in order to get an value out of an reference you have to make a copy through it.
[15:46:19] <wakandan> kimundi: oh 
[15:46:58] <kimundi> And I again recommend gist :) It's an annonymously usable pastebin site from github with syntax higlinging, comment functionality and revision control
[15:47:16] <kimundi> You can just keep editing the same gist for example
[15:47:51] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[15:48:14] <kimundi> here, I made one myself as an example: https://gist.github.com/Kimundi/d2be7a7109117c2c4d0f
[15:48:17] <wakandan> "The dereference there only works with implicitly copyable types, so you could elaborate on that" I don't quite understand this myself, but I could add "The dereference there only works with implicitly copyable types"
[15:48:27] <kimundi> wakandan: That'S fine
[15:48:40] <wakandan> kimundi: the indentation is gone! T_T
[15:48:45] <kimundi> mayb add an  "like uint" at the end
[15:48:50] <engla> kimundi: "significant whitespace" is close to being FUD. It's *significant indentation*.
[15:49:00] <kimundi> wakandan: It was in you mibit paste already :P
[15:49:07] <wakandan> oh ok 
[15:49:11] <wakandan> the it should do then
[15:49:14] <kimundi> engla: Meh, same difference to me :P
[15:49:30] <wakandan> but how do others see a gist if I don't give it to them?
[15:49:37] <wakandan> they can't search for it right?
[15:49:38] <kimundi> wakandan: Just apste the link :P
[15:49:49] *** Quits: canhtak (jeremy@moz-8E705AE1.wl.t.ulaval.ca) (Quit: canhtak)
[15:50:02] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[15:50:26] <wakandan> yeah...
[15:50:32] <kimundi> If you are logged into github, you can make an public or private gist. public ones are searchable and viewable on your gist profile, private ones you have to paste links to for anyone to see
[15:51:15] *** Joins: hoverbear (andrew@EBFA78B5.F19E5E7B.E74D50F2.IP)
[15:51:58] <kimundi> Of course, if you want to actually write that down as an help achieve or so you might want to start an blog or something - but for know gist fits the bill for quickly gathering code
[15:52:34] <kimundi> you can also have multible files per gist, so you can just grow an list of examples and maybe post it to the rust subreddit or so
[15:52:46] *** Quits: maik (maik@moz-85739CD7.dip0.t-ipconnect.de) (Ping timeout)
[15:52:52] *** Quits: hoverbear (andrew@EBFA78B5.F19E5E7B.E74D50F2.IP) (Quit: hoverbear)
[15:53:50] <amatus> is the ./configure --target-tripple exactly what is passed to the llvm build?
[15:53:53] <kimundi> (There are also a few spelling errors here and there)
[15:53:57] *** Joins: bheylin_ (brianheyli@C709828D.E7BADBF1.B0C2132F.IP)
[15:54:51] <kimundi> wakandan: "the for loop will chunk out references of" "the return value of iter() will chunk out references of"
[15:55:56] <kimundi> You can think of it like an pipeline
[15:55:57] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[15:55:57] *** ChanServ sets mode: +ao dherman dherman
[15:56:15] *** Joins: Palmik (palmik@moz-11EA685D.pks.muni.cz)
[15:56:24] <wakandan> kimundi: alright
[15:56:55] <kimundi> The rest seems fine
[15:57:04] <wakandan> kimundi: cool!
[15:57:27] <wakandan> kimundi: it's been a very good learning experience, as always
[15:57:31] *** Quits: wakandan (Mibbit@5232D4B6.13322C48.EAD3CEA6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[15:57:34] <kimundi> "head should be "Some" so that it could have "None"" reads a bit weird, but isn't incorrect
[15:58:03] <kimundi> :)
[15:59:20] *** Joins: hoverbear (andrew@EBFA78B5.F19E5E7B.E74D50F2.IP)
[15:59:57] <kimundi> Oh, he left :(
[16:00:58] *** Quits: bheylin_ (brianheyli@C709828D.E7BADBF1.B0C2132F.IP) (Ping timeout)
[16:01:19] *** Joins: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP)
[16:01:19] *** ChanServ sets mode: +o jdm
[16:02:20] *** Joins: Kruppe (user@moz-253119B0.esg.uwaterloo.ca)
[16:02:47] *** Joins: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP)
[16:05:06] *** Joins: six600110_ (six600110@moz-2FA48202.neo.res.rr.com)
[16:05:10] *** Quits: six600110_ (six600110@moz-2FA48202.neo.res.rr.com) (Connection reset by peer)
[16:06:47] *** Quits: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net) (Client exited)
[16:06:48] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[16:07:16] *** Joins: donri (donri@moz-9BB61102.tbcn.telia.com)
[16:07:39] *** Quits: huseby (huseby@moz-4E8C421A.husebyhome.com) (Quit: rebooting)
[16:08:37] *** Joins: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net)
[16:09:14] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[16:09:58] *** Joins: canhtak (jeremy@moz-8E705AE1.wl.t.ulaval.ca)
[16:11:34] *** flaper87 is now known as flaper87|afk
[16:15:07] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[16:15:37] *** Joins: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net)
[16:20:58] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[16:20:58] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/Enzmog
[16:20:58] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[16:20:59] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[16:21:00] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/yQ1WgA
[16:21:00] <ghrust> 13rust/06auto 1490e1e8f 15Georges Dubus: Fixed a small typo in the tutorial...
[16:21:00] <ghrust> 13rust/06auto 14eb55348 15bors: auto merge of #9423 : madjar/rust/patch-1, r=alexcrichton...
[16:21:00] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[16:21:13] <geal> is there an example of how I should use rustpkg? like "I want to use that library, so I type rust install foo, then write extern mod somewhere". I would really need something simple like that to understand it
[16:21:24] *** Joins: ferristseng (ferristsen@699D12D2.96F115D7.DDE5D3F6.IP)
[16:21:32] <geal> I have no problem with the other parts of the language, but rustpkg is really making me feel stupid :(
[16:22:02] <cmr> rustpkg isn't part of the language, and it's nowhere near done, so it's a normal reaction (I also feel that way about it)
[16:22:10] *** Quits: ferristseng (ferristsen@699D12D2.96F115D7.DDE5D3F6.IP) (Quit: leaving)
[16:22:29] <geal> ok
[16:22:40] *** Joins: ferristseng (ferristsen@699D12D2.96F115D7.DDE5D3F6.IP)
[16:22:41] <geal> so, what's the common pattern to include a lib? git submodules?
[16:22:45] <jack> geal: You'd just use `extern mod foo = "github.com/something/foo";`
[16:22:51] *** Parts: ferristseng (ferristsen@699D12D2.96F115D7.DDE5D3F6.IP) ()
[16:23:03] <jack> when you build your project with rustpkg, it will grab foo from the right place and install it automatically.
[16:23:17] *** Joins: funktion (funktion@699D12D2.96F115D7.DDE5D3F6.IP)
[16:23:52] *** Quits: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP) (Ping timeout)
[16:24:22] <geal> jack: ok, so I have to build my project with rustpkg, I cannot have just one file that I build directly with rustc?
[16:26:12] *** Quits: fabiand (fabiand@moz-84D5F8C9.adsl.alicedsl.de) (Quit: Verlassend)
[16:26:37] <jack> geal: you can certainly, but then you'll need to install the dependency yourself. which means you'll need a workspace in RUST_PATH
[16:27:12] <jack> geal: this should work: `mkdir -p ~/.rust/src; export RUST_PATH=~/.rust; rustpkg install foo`
[16:27:14] *** Quits: Ralith (ralith@moz-36466B9F.customer.broadstripe.net) (Ping timeout)
[16:27:21] <jack> that should be libfoo in ~/.rust/lib/...
[16:27:30] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[16:27:49] <jack> then you're lib will need a -L ~/.rust/lib/... so it knows where to find the library.
[16:27:58] <jack> rustpkg just does that for you if you build with it.
[16:28:29] <funktion> is there any way i can handle an interrupt signal in rust?
[16:28:49] <cmr> funktion: see piazza. short answer: no
[16:28:56] <geal> jack: ok, I just tried that, you saved me :)
[16:28:59] <cmr> (you need to use C fii)
[16:29:02] <cmr> *ffi
[16:29:52] <geal> and to create and build a project with rustpkg, I just need to write a pkg.rs, right? I see that file can declare dependencies, bt can rustpkg guess dependencies by looking at imports in other files?
[16:29:52] *** Quits: skade (skade@moz-DA43A266.hsi.kabel-badenwuerttemberg.de) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[16:30:11] <jack> cmr: piazza?
[16:30:12] <cmr> geal: you don't need a pkg.rs
[16:30:27] <cmr> jack: it's the online forum thing the OS class is using
[16:30:33] <jack> geal: you need lib.rs or main.rs depending on if it's a lib or a bin
[16:31:02] <geal> ok
[16:31:06] <jack> cmr: i suspected that. i used that in a class I took online once.
[16:32:33] *** Joins: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl)
[16:32:44] *** Quits: funktion (funktion@699D12D2.96F115D7.DDE5D3F6.IP) (Quit: leaving)
[16:32:49] <geal> so I can declare the package id and everything else directly in main.rs, right?
[16:34:33] *** Joins: vodik (simon@moz-F8BD1425.net.uwaterloo.ca)
[16:34:56] *** Quits: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net) (Quit: eholk)
[16:35:51] *** Joins: echristo (echristo@DCF57675.D6CCE4AE.77834EAA.IP)
[16:36:15] *** Joins: andrew-d_w (andrew-d_w@moz-5A92CAFF.dsl.static.sonic.net)
[16:36:40] *** Quits: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin_)
[16:37:03] *** Joins: andrew-__ (andrew-d_w@moz-5A92CAFF.dsl.static.sonic.net)
[16:37:56] *** Quits: andrew-d_w (andrew-d_w@moz-5A92CAFF.dsl.static.sonic.net) (Ping timeout)
[16:38:43] *** Joins: valenting (Thunderbir@8837482B.F5D5DDE0.7A932F41.IP)
[16:40:03] *** Quits: vodik (simon@moz-F8BD1425.net.uwaterloo.ca) (Ping timeout)
[16:40:59] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Client exited)
[16:41:48] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: Leaving.)
[16:42:29] *** Joins: miza (miza@moz-908EA8DE.home.otenet.gr)
[16:43:36] <jack> geal: usually the link metadata is inferred from the directory name
[16:44:18] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[16:45:17] <engla> one of my WIP branches has been stricken by "warning: CRLF will be replaced by LF in src/etc/pkg/rust-logo.ico"
[16:45:27] <engla> it's miserable and it won't go away
[16:45:35] *** Joins: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net)
[16:45:36] <cmr> brson was running against that too
[16:46:45] <engla> I know it's fixed somewhere but .. this branch is not so easy to just rebase
[16:48:11] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[16:48:29] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Input/output error)
[16:48:43] *** Joins: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com)
[16:50:08] <cmr> I think you can add something to the .gitattributes to make it shut up
[16:50:39] <engla> yeah I did that and rm'd the .ico file on that branch for now
[16:51:17] <engla> but it's like a sticky state on that branch that doesn't go away with reset --hard or anything, that's the annoying part
[16:53:40] <kimundi> yeah, that'S blocking me too at the moment
[16:53:59] *** Quits: andrew-__ (andrew-d_w@moz-5A92CAFF.dsl.static.sonic.net) (Input/output error)
[16:54:21] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[16:54:40] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[16:55:58] *** Joins: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl)
[16:59:43] *** Joins: andrew-__ (andrew-d_w@moz-5A92CAFF.dsl.static.sonic.net)
[17:00:12] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Ping timeout)
[17:01:53] *** Quits: andrew-__ (andrew-d_w@moz-5A92CAFF.dsl.static.sonic.net) (Input/output error)
[17:01:59] *** Joins: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP)
[17:02:13] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[17:05:08] *** Joins: azakai (alon@moz-BBE3ABD.mv.mozilla.com)
[17:08:23] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[17:08:41] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[17:08:41] <ghrust> 01[13rust01] 15alexcrichton merged 06master into 06snap-stage3: 02http://git.io/aOGWyA
[17:08:41] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[17:09:55] *** Joins: huseby (huseby@moz-4E8C421A.husebyhome.com)
[17:10:04] *** Quits: canhtak (jeremy@moz-8E705AE1.wl.t.ulaval.ca) (Quit: canhtak)
[17:12:15] *** Quits: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP) (Quit: back tomorrow afternoon)
[17:12:17] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[17:12:17] *** ChanServ sets mode: +ao brson brson
[17:15:32] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[17:15:39] <cmr> acrichto: I have a question about https://github.com/mozilla/rust/pull/9206
[17:15:55] *** Quits: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net) (Client exited)
[17:16:00] <cmr> acrichto: How does this play into cross-crate statics? Won't the "id drift" problem come into play?
[17:16:18] <cmr> If we're going to make that nodeid part of the ABI, I'd like to be guaranteed that it's always the same.
[17:16:47] <cmr> If we're going to make that nodeid part of the ABI, I'd like to be guaranteed that it's always the same.
[17:16:49] <cmr> And I don't think that can be guaranteed; adding a priv static before that pub static would change the id, and thus the ABI, which isn't really acceptable
[17:16:50] <cmr> (sorry)
[17:16:50] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[17:16:52] <bstrie> olsonjeffery: sorry I missed your practice presentation on friday, how did it go?
[17:17:16] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[17:17:16] *** ChanServ sets mode: +ao brson brson
[17:17:32] <acrichto> cmr: it'll work out just fine because you read the symbol name from external crates
[17:17:49] <acrichto> cmr: the name of a static is generated once and only once, the node_id just guarantees that the name is unique
[17:17:52] <acrichto> (hopefully)
[17:17:55] *** Joins: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net)
[17:18:10] <cmr> acrichto: but not at linktime. What I'm saying is you have a bunch of programs linking against this libfoo, which has a public static.
[17:18:26] <cmr> You do theoeretically ABI-compatible changes to libfoo, say, adding a private static.
[17:18:32] <cmr> Then compile it and update the system libfoo
[17:18:45] <cmr> If the nodeid changes, the existing programs linked against the old libfoo are now broken.
[17:18:58] <cmr> by linktime I mean dynamic-link time
[17:19:09] <acrichto> hmm that's not good
[17:19:35] *** Quits: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net) (Ping timeout)
[17:19:45] <cmr> I consider myself the resident ABI-nazi, as maintaining a stable ABI is super important for me and I want Rust to make that easy.
[17:19:47] <cmr> :p
[17:20:10] <acrichto> yeah no that's a serious problem
[17:20:16] <acrichto> you have some serious eagle-eyes lol
[17:20:25] <acrichto> I'll make a test case and open an issue
[17:20:38] <Luqman> brson: hey, i got the crate map thing working on windows
[17:20:43] <cmr> (I think this is the second bug my weekly PR review for TWiR has caught!)
[17:21:00] *** Joins: jasdevsingh (jasdevsing@53EDD83A.8878667B.DDE5D3F6.IP)
[17:21:28] <cmr> acrichto: really it should be taking a hash of the fqn, not sure how easy that'd be
[17:21:38] <acrichto> cmr: they all have the same name, that was the problem
[17:22:11] <cmr> oh I see now, it's a scoping thing
[17:22:17] <olsonjeffery> bstrie: it didn't happen, yet.. im way behind
[17:22:19] <cmr> Well, for cases like that where it's internal, using the nodeid is fine
[17:22:26] <olsonjeffery> hoping to get something together for this week..
[17:22:54] <acrichto> cmr: still a problem though b/c of generic methods
[17:22:58] <acrichto> nothing is "only internal"
[17:23:21] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: Leaving.)
[17:23:22] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[17:23:39] <cmr> acrichto: example?
[17:23:49] <acrichto> cmr: sec, opening an issue
[17:23:49] <cmr> you can't have a pub static in a method.
[17:23:51] <cmr> ok
[17:23:56] *** Quits: huseby (huseby@moz-4E8C421A.husebyhome.com) (Quit: Leaving)
[17:24:23] <brson> Luqman: how dod you do it?
[17:24:49] *** Joins: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net)
[17:24:54] <Luqman> brson: just find it at runtime with GetProcAddress on windows
[17:26:22] <brson> Luqman: nice
[17:26:47] <brson> Luqman: do you have an idea of how this feature will interact with static linking?
[17:27:28] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[17:28:10] <Luqman> brson: we could probably just cfg it off since it wouldn't be an issue then given the symbol would be available at linktime
[17:28:18] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[17:28:22] *** Quits: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin_)
[17:29:04] *** Quits: azakai (alon@moz-BBE3ABD.mv.mozilla.com) (Quit: Ex-Chat)
[17:29:18] *** Joins: huseby (huseby@moz-4E8C421A.husebyhome.com)
[17:30:00] *** Joins: azakai (alon@moz-BBE3ABD.mv.mozilla.com)
[17:30:19] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[17:30:44] <Luqman> brson: was also all green on try
[17:31:20] *** Quits: valenting (Thunderbir@8837482B.F5D5DDE0.7A932F41.IP) (Ping timeout)
[17:31:55] <acrichto> cmr: https://github.com/mozilla/rust/issues/9431
[17:32:13] *** Quits: CarpNet (ac@moz-FD24B77.sohonet.co.uk) (Quit: Leaving)
[17:33:47] <olsonjeffery> brson: hey i have a quick question.. is `std::select` and the stuff in rt actually done and ready for use? i ask because there is at least one ticket in the big batch of newrt stuff that concerns flushing out select in ewrt
[17:33:50] <olsonjeffery> newrt
[17:33:58] *** Joins: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com)
[17:34:15] <olsonjeffery> so i just want to make sure that select is actually ready and available.. flaper87|afk is planning on impl'ing it for rt::io::timer::Timer to make a better recv_timeout() ..
[17:35:29] *** Joins: nejucomo (Adium@moz-A94CACD5.dsl.pltn13.sbcglobal.net)
[17:35:29] <olsonjeffery> brson: also can we change the signature of select::select() to take a ~[&Select] so we can pass in selectable items of different types (eg for recv_timeout we'd be passing in a port and a timer)
[17:35:36] <olsonjeffery> ?
[17:37:57] <cmr> https://github.com/mozilla/rust/pull/9291
[17:38:00] <cmr> Why was cond removed?
[17:38:03] <cmr> I liked cond :(
[17:38:22] <engla> https://github.com/mozilla/rust/issues/9282
[17:38:48] <acrichto> cmr: actually I don't think 9431 is a problem at all, see my last comment.
[17:39:26] <cmr> acrichto: when I'm done twir
[17:40:28] <brson> olsonjeffery: select doesn't work for heterogeneous selectable types because there's a bunch of code commented out in select.rs
[17:40:59] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[17:40:59] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/yQ1WgA
[17:40:59] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[17:41:09] <brson> olsonjeffery: I don't know if select can be implemented for I/O types - the intent was just to do it for ports, and use tasks to adapt I/O to ports. but give it a shot
[17:41:56] <cmr> To butcher a phrase I just saw; less tasks is better tasks?
[17:42:04] <olsonjeffery> :/
[17:42:05] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[17:42:53] <acrichto> brson: do you have an opinion on implementing recv_timeout in terms of polling for now? https://github.com/mozilla/rust/pull/9194
[17:43:28] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[17:43:53] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:44:43] <olsonjeffery> i don't care for that particular polling approach
[17:44:46] *** Quits: LimeBurst (me@247D1419.D73964AC.27A8748.IP) (Quit: leaving)
[17:44:50] <olsonjeffery> i think it should just sleep until the timeout is done
[17:45:01] <olsonjeffery> if we can't have real select
[17:45:05] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[17:45:34] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[17:45:50] <acrichto> I'm still not a fan of having polling at all :(
[17:45:57] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[17:46:08] <cmr> I would rather have a recv_timeout that can be improved than no recv_timeout at all
[17:46:40] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[17:46:40] *** ChanServ sets mode: +ao dherman dherman
[17:47:02] <acrichto> which we will, just possibly not for 0.8
[17:47:06] <acrichto> which I think is ok
[17:48:14] <brson> olsonjeffery: also, select isn't currently implemented for std::comm, only std::comm::rt. std::comm::rt needs to be moved to std::comm
[17:48:23] <olsonjeffery> yeah.
[17:48:41] <olsonjeffery> brson: is there a particular barrier to adding select for heterogeneous types that im not aware of?
[17:48:45] *** Quits: cowboyd (cowboyd@moz-1BD02A1E.sw.biz.rr.com) (Client exited)
[17:48:59] <olsonjeffery> i mean.. if we can get the desired behavior using descheduling and whatnot
[17:49:11] <olsonjeffery> which we do in several other places in uvio.. i don't see why we can't w/ timer..
[17:49:15] *** Quits: davbo (dave@moz-3FFA637C.oucs.ox.ac.uk) (Client exited)
[17:49:25] <olsonjeffery> im curious if there's something im issing. i guess ill dig into the select code.
[17:49:27] <brson> olsonjeffery: I believe the commented-out code in select.rs is triggering a type system bug of some kind
[17:49:47] <olsonjeffery> ok. was it just trait object stuff? i guess ill find out..
[17:49:58] <brson> olsonjeffery: i don't want to do polling. I'll give that pr a look in a bit
[17:50:14] <brson> olsonjeffery: idk, i didn't write it and haven't given it a very close look
[17:50:24] <olsonjeffery> k
[17:50:42] <cmr> brson: 0.8 this week?
[17:50:46] <cmr> next few days?
[17:51:25] *** Joins: skade (skade@moz-4F00C394.web.vodafone.de)
[17:51:33] <brson> cmr: aiming for thursday
[17:51:49] <brson> it's sad we're going to have some major caveats about the runtime and the windows build process
[17:51:58] <brson> but oh well
[17:52:04] <brson> try to get an rc today maybe
[17:52:05] *** Quits: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net) (Quit: No Ping reply in 180 seconds.)
[17:52:44] *** Joins: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net)
[17:55:23] *** Joins: BitPuffin (isak@moz-49828767.cust.tele2.se)
[17:55:29] *** Joins: LimeBurst (me@247D1419.D73964AC.27A8748.IP)
[17:57:35] *** Quits: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net) (Quit: ozten)
[17:58:13] *** Quits: skade (skade@moz-4F00C394.web.vodafone.de) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[17:58:29] *** Quits: Ms2ger (Ms2ger@moz-45EBCB4A.adsl-dyn.isp.belgacom.be) (Ping timeout)
[17:59:09] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:59:14] *** Joins: cowboyd (cowboyd@1D8844A7.1B729417.CEE440B6.IP)
[17:59:21] *** Joins: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net)
[17:59:48] *** Quits: toshok (toshok@moz-67C55A1F.com) (Ping timeout)
[18:00:08] *** Quits: yosemite (sam@moz-8CEAB1B0.dasbistro.com) (Ping timeout)
[18:00:48] <olsonjeffery> brson: what're the remaining rt caveats? no segmented stacks?
[18:00:59] <olsonjeffery> that was the only thing i saw in the release notes..
[18:02:17] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[18:02:24] <brson> olsonjeffery: no segmented stacks, linked failure has a segfaulting race, scheduling can starve tasks and livelock
[18:02:41] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[18:02:41] *** ChanServ sets mode: +ao pcwalton pcwalton
[18:03:31] *** Joins: yosemite (sam@moz-8CEAB1B0.dasbistro.com)
[18:05:24] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[18:06:11] *** Joins: toshok (toshok@moz-67C55A1F.com)
[18:06:40] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[18:06:40] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[18:06:53] <jensnockert> Urghâ€¦ tuple ABI :(
[18:07:26] * jensnockert was hoping that they were just anonymous structs.
[18:08:09] <engla> ok.. so what is different?
[18:09:26] <jensnockert> They are packed into integers /o\
[18:09:34] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[18:09:37] <doomlord_> ouch
[18:09:49] <doomlord_> or is that an optimization in some situations
[18:10:01] *** Joins: skade (skade@moz-4F00C394.web.vodafone.de)
[18:10:05] <jensnockert> Probably an optimization.
[18:10:40] *** Quits: tefter (tefter@B5D119DC.B856A0A1.73804765.IP) (Ping timeout)
[18:10:53] *** Joins: tefter (tefter@B5D119DC.B856A0A1.73804765.IP)
[18:12:28] <Eridius> brson: rc today already? cripes, this seems fast
[18:12:32] <Eridius> guess I'm not sneaking path rewrite in :(
[18:13:00] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Client exited)
[18:13:02] <engla> that sounds weird
[18:13:09] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[18:13:31] *** Quits: nkoep (nik@moz-CA5CECB5.vpn.rwth-aachen.de) (Ping timeout)
[18:13:49] <kimundi> Hm I wish my doc PR for StrSlice went in
[18:13:56] *** Joins: Ms2ger (Ms2ger@moz-A7E92E04.ugent.be)
[18:15:55] *** Joins: nrc|afk (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[18:15:59] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[18:16:00] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/1HcaiQ
[18:16:00] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[18:16:00] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[18:16:00] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/rw6W6w
[18:16:00] <ghrust> 13rust/06auto 144aa3e95 15Brian Anderson: std::rt: Implement task yielding. Fix a starvation problem
[18:16:00] <ghrust> 13rust/06auto 14782ad36 15bors: auto merge of #9430 : brson/rust/sched, r=alexcrichton...
[18:16:01] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[18:16:04] <nejucomo> How are tuples and structs different in ABI?
[18:16:50] *** Joins: orshem (orshem@F0A9EA9.588A166C.E3D28531.IP)
[18:18:38] <jensnockert> nejucomo: None, I think
[18:18:55] <jensnockert> nejucomo: But I was talking about Rust tuples, and LLVM structs.
[18:19:27] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[18:19:27] *** ChanServ sets mode: +o tjc
[18:20:22] *** Quits: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net) (Ping timeout)
[18:21:59] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[18:22:42] <brson> have we done a new snapshot since fixing tinfo?
[18:23:49] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[18:23:49] <ghrust> 01[13rust01] 15brson merged 06master into 06snap-stage3: 02http://git.io/yQ1WgA
[18:23:49] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[18:24:00] <acrichto> brson: buildbot is working on it now
[18:24:04] *** Quits: skade (skade@moz-4F00C394.web.vodafone.de) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[18:24:19] <acrichto> brson: it failed once, retrying to see if it was spurious
[18:24:24] *** Joins: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net)
[18:24:46] <brson> oh ...
[18:25:16] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[18:25:16] *** ChanServ sets mode: +o tjc
[18:25:18] <brson> well i just pushed another commit to snap-stage3 :-
[18:25:34] <brson> oops
[18:25:55] *** Joins: jviereck (Adium@moz-D03659.dip0.t-ipconnect.de)
[18:26:08] *** Joins: vodik (simon@moz-B4D815F0.dynamic.uwaterloo.ca)
[18:26:31] <acrichto> oh well
[18:26:39] <acrichto> the more snapshots the merrier
[18:27:24] *** Quits: nejucomo (Adium@moz-A94CACD5.dsl.pltn13.sbcglobal.net) (Quit: Leaving.)
[18:28:12] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Client exited)
[18:30:01] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[18:30:07] *** Joins: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl)
[18:30:34] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[18:30:41] <olsonjeffery> bblum: ping
[18:30:56] <bblum> olsonjeffery: pong
[18:31:23] *** Joins: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net)
[18:31:23] *** ChanServ sets mode: +ao dherman dherman
[18:31:33] <olsonjeffery> bblum: so im looking over std::select and noticed the code commented out around select2 and doing selects on heterogeneous types.. but i can't find anything in the impl of select that actually justifies the restriction
[18:31:44] <olsonjeffery> why not just make select::select() take a ~[&Select] ?
[18:32:05] *** Joins: nkoep (nik@moz-A60B8D9F.pool.mediaways.net)
[18:32:44] <olsonjeffery> also that would kind of sidestep the (imo) overly-complex approach to select2 where we impl Select on &mut Select ...
[18:32:44] *** Quits: saneyuki (Tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Client exited)
[18:33:28] <Eridius> olsonjeffery: I have no context here (never looked at that), but if select operates on ~[&Select], how are you supposed to deal with the results? You can't very well use the result as an index into your Select array and read it, because the result type would be different
[18:33:32] <Eridius> *different depending on index
[18:34:19] <bblum> olsonjeffery: it does not work because there are &Trait bugs
[18:34:22] <bblum> the code is correct
[18:34:30] <bblum> the compiler is wrong
[18:34:45] <kimundi> Business as usual
[18:34:48] <olsonjeffery> Eridius: select doesn't actually return anything
[18:35:01] <olsonjeffery> it only returns the index of which entry in the provided vec has a ready value
[18:35:06] <Eridius> ugh, doc links are dead again
[18:35:09] <olsonjeffery> so i don't think that point really holds..
[18:35:28] <Eridius> olsonjeffery: right, but don't you typically turn around and use that index to pull out the right object from your array and read from it directly?
[18:35:43] <bblum> olsonjeffery: making select() take a ~[&Select] would still require implementing Select on &Select, and also would shift the burden of "x as &Select, y as &Select, etc" to the user/caller
[18:35:43] <Eridius> let idx = select(ports); let val = ports[idx].read() // or whatever the API is
[18:35:56] <bblum> olsonjeffery: select2() is meant as a convenience wrapper for when you want heterogeneity
[18:35:58] <engla> Eridius: you need a separate vector for the &mut refs then
[18:36:24] <kimundi> bblum: But is making that conversion implicit on the table?
[18:36:27] <Eridius> ugh why are docs broken
[18:36:33] <kimundi> casting to trait objects, that is
[18:36:42] <kimundi> isn't*, sorry
[18:36:58] <olsonjeffery> Eridius: you could match on the index, with the caller knowing which type is in which index.. at least for when the contents of the vec aren't really dynamic
[18:37:05] <olsonjeffery> like when providing a port and a timer, for example
[18:37:14] <bblum> kimundi: i don't think the compiler would be capable of that
[18:37:24] *** Joins: skade (skade@moz-94C6BCF.dip0.t-ipconnect.de)
[18:37:26] <bblum> a syntax extension would be appropriate
[18:37:30] *** Joins: nejucomo (Adium@moz-AC868E2D.hfc.comcastbusiness.net)
[18:37:34] <brson> Eridius: the docs get deleted every time they are regenerated. there's a window where they don't exist
[18:37:35] <bblum> there was  one for the old select implementation
[18:38:00] <Eridius> :/
[18:38:07] <kimundi> bblum: Of what, making coercion to trait objects implicit? There was an ancient pull request from pcwalton that implemented that, and it's still kinda planned
[18:38:19] <bblum> kimundi: hmm, well, i could be wrong
[18:38:25] <pcwalton> yes, I want to do that
[18:38:37] <kimundi> would have to pass them as &ptr of course
[18:38:37] <brson> maybe I can make the doc upload smarter
[18:38:44] <bblum> but it seems hard to reason about, e.g., turning the expression [a,b,c] into a list of trait objects where a,b,c are all of different types
[18:39:01] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[18:39:11] <kimundi> bblum: The type would still be [&Trait]
[18:39:22] *** Joins: squiddy (squiddy@moz-937F4F38.adsl.alicedsl.de)
[18:39:55] <kimundi> Of course, the problem is: Once you have an trait object, how to go back :P
[18:40:14] <cmr> kimundi: you don't
[18:40:19] <acrichto> brson: could you upload to another directory, swap the two "quickly", then delete the old one?
[18:40:32] <bblum> cmr: with &Trait you can
[18:40:35] *** Quits: h3r3tic (heretic@moz-8BC3B3DB.se) (Client exited)
[18:40:37] <Eridius> is there some reason we don't have some way to convert from a trait object back into a concrete type?
[18:40:37] <kimundi> cmr: I don't actually know what the api here is.
[18:40:55] <cmr> bblum: wait, you can? does it fail ala java's ClassCastException?
[18:40:55] *** Joins: steveklabnik (steveklabn@moz-5EF6C37C.socal.res.rr.com)
[18:41:05] <bblum> cmr: no, look at select.rs
[18:41:11] <bblum> in the commented out code
[18:41:12] * Eridius imagines something like `match traitobj { x@TypeA => doSomethingWith(x), x@TypeB => doSomethingElseWith(x) }
[18:41:41] <bblum> pcwalton: what if you write, "let _ = [a,b,c];", where a,b,c mutually implement two different possible traits? what will the type inferrer do?
[18:42:03] <pcwalton> it follows the normal coercion rules
[18:42:08] <pcwalton> so it's only if you use a value in a trait context
[18:42:09] <kimundi> Eridius: Would probably work in theory, all information are there. Every of those matches would need an _ => case though because you can never be sure that the list is exhaustive
[18:42:11] <pcwalton> that the coercion happens
[18:42:39] <Eridius> kimundi: oh right, yeah you would need _
[18:42:59] <bblum> that seems like it wouldn't be suitable for select then
[18:43:06] <cmr> bblum: I don't see where it's taking a &Trait and turning it back into a T?
[18:43:18] <kimundi> bblum: why not?
[18:43:19] <cmr> (or even a &T)
[18:43:31] <bblum> cmr: https://github.com/mozilla/rust/blob/master/src/libstd/select.rs#L113
[18:43:42] <bblum> kimundi: because it wouldn't be able to infer through the list
[18:44:16] <cmr> bblum: that's normal creation of a trait object, not the runtime conversion I'm thinking about.
[18:44:25] <kimundi> bblum: why not?
[18:44:41] <bblum> cmr: oh yeah, runtime conversion is not a thing that is needed for this task, though
[18:44:42] *** Quits: nejucomo (Adium@moz-AC868E2D.hfc.comcastbusiness.net) (Quit: Leaving.)
[18:44:49] <bblum> &Trait is sufficient
[18:44:50] <brson> acrichto: probably, yes
[18:45:02] <cmr> right
[18:47:17] <olsonjeffery> bblum: https://gist.github.com/olsonjeffery/6675045
[18:47:23] <olsonjeffery> that compiles and runs..
[18:47:31] <olsonjeffery> i don't think Select needs to be impl'd for &select
[18:47:46] <olsonjeffery> im saying that the sig for std::select::select() should become ~[&Select]
[18:48:03] <olsonjeffery> instead of <A: Select>(v: ~[&A])
[18:49:01] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[18:49:07] <bblum> olsonjeffery: then that would mean the user would have to write 'as &mut Select' everywhere
[18:49:08] <olsonjeffery> and, yeah.. the trait object conversion is an inconvenience.
[18:49:17] <bblum> even if they had a homogeneous list of stuff
[18:49:33] <olsonjeffery> bblum: you're constructing an interesting argument
[18:49:41] <olsonjeffery> "let's keep a hamstrung impl of select because of syntax warts"
[18:49:49] <bblum> this isn't about syntax
[18:50:08] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[18:50:11] <olsonjeffery> so its about parsing semantics?
[18:50:17] <bblum> it is also not about parsing
[18:50:22] <bblum> it is about how trait objects work
[18:50:23] <bblum> this is about having the maximally convenient interface for select in both the heterogeneous case and homogeneous case simultaneously
[18:50:28] <olsonjeffery> i think the need for heterogeneous ports trumps having to do as &mut Select
[18:50:30] <olsonjeffery> that's my argument
[18:50:35] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[18:50:40] <olsonjeffery> if we can't have them via select2 because of a compiler error
[18:51:41] <bblum> well, let me also point out that with the 'impl Select for &mut Select', the function select() *can* be instantiated with T = &mut Select
[18:51:44] *** Joins: nejucomo (Adium@moz-AC868E2D.hfc.comcastbusiness.net)
[18:52:07] <bblum> having the 'hamstrung impl' makes select() strictly more general than it would be in the scheme you're suggeseting
[18:52:23] <engla> right. a workaround might even be a newtype   SelectObj(&mut Select)
[18:52:42] <bblum> that is not necessary
[18:53:06] <engla> it's necessary for a 3rd party workaround
[18:53:17] <engla> i.e. when you can't impl Select for &mut Select yourself
[18:53:36] *** nrc|afk is now known as nrc
[18:53:48] *** Quits: vodik (simon@moz-B4D815F0.dynamic.uwaterloo.ca) (Ping timeout)
[18:53:50] <bblum> ah, well, fortunately, since select.rs provides impl Select for &mut Select, nobody will have to do that sort of thing
[18:54:04] <bblum> (also, iirc, the 'hamstrung impl' could be uncommented as it is; it's just the select2() function that doesn't work yet)
[18:54:18] <engla> oh then.. maybe try that
[18:54:19] *** Joins: sglez (Mibbit@E19C1D7A.4B605195.A208C5.IP)
[18:55:02] <engla> I think this is an interesting issue in general, the new IO code needs some answers for this as well. as in.. what's the best model for the API w.r.t trait objects and/or generics
[18:55:48] *** Quits: alp (alp@moz-D1CEC204.com) (Quit: FLAG_FIN)
[18:55:52] <kmc> is there currently a fmt!() code which calls to_str()?
[18:56:13] *** Joins: canhtak (jeremy@moz-C3EEEF4B.wl.t.ulaval.ca)
[18:56:13] *** Quits: Ms2ger (Ms2ger@moz-A7E92E04.ugent.be) (Connection reset by peer)
[18:56:21] *** Joins: alp (alp@moz-D1CEC204.com)
[18:56:21] <olsonjeffery> generally trait objects aren't being surfaced to users
[18:56:49] *** Quits: jasdevsingh (jasdevsing@53EDD83A.8878667B.DDE5D3F6.IP) (Ping timeout)
[18:57:02] <olsonjeffery> but they're kind of lynchpin of substituting out different backends that impl IoFactory
[18:57:11] <olsonjeffery> but it was written before trait objects were working
[18:57:13] *** Quits: alp (alp@moz-D1CEC204.com) (Quit: FLAG_FIN)
[18:57:26] <acrichto> kmc: do you mean a format!() directive which wants T:ToStr?
[18:57:28] <olsonjeffery> so there's a bunch of RtioFooObject workarouns that can be removed
[18:57:45] *** Joins: alp (alp@moz-D1CEC204.com)
[18:58:11] <engla> for example std::fmt uses &mut Writer
[18:58:18] *** Joins: jasdevsingh (jasdevsing@53EDD83A.8878667B.DDE5D3F6.IP)
[18:58:51] <kmc> ok
[18:59:09] <kmc> I meant the oldschool fmt!() actually
[18:59:21] <engla> oh it wasn't for you kmc 
[18:59:22] <acrichto> kmc: ah, then the answer is "forever no"
[19:01:05] <engla> olsonjeffery: just a random thing, struct FileStream has public struct members, that should probably change to priv at some point
[19:01:14] <olsonjeffery> engla: we accept pull requests!
[19:01:38] <engla> hehe
[19:01:38] *** Joins: tdc (santegoeds@moz-ADD1F5DF.range86-135.btcentralplus.com)
[19:01:54] <engla> I'm scared of everything in rt/ especially after reading rt/uv/uvio.rs
[19:01:57] *** Quits: myname (myname@F6BC1CBC.2C5F047.A0197E77.IP) (Ping timeout)
[19:03:39] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[19:04:44] <cmr> engla: it's not that bad
[19:05:07] *** Joins: Ms2ger (Ms2ger@moz-45EBCB4A.adsl-dyn.isp.belgacom.be)
[19:05:23] *** Joins: myname (myname@F6BC1CBC.2C5F047.A0197E77.IP)
[19:05:38] *** Joins: h3r3tic (heretic@moz-8BC3B3DB.se)
[19:05:40] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[19:06:48] <engla> I'm sure it's fine, I just search&replaced throught there for the Cell -> Mut replacement
[19:07:00] <engla> and there is a lot of Cells used for all the closures
[19:08:23] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Ping timeout)
[19:08:25] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[19:09:01] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[19:10:33] <cmr> ah, yeah
[19:10:36] <cmr> it's quite unfortunate.
[19:13:13] *** tikue is now known as tikue_class
[19:13:52] *** Joins: vodik (simon@moz-94BEDA01.net.uwaterloo.ca)
[19:14:06] *** Quits: nejucomo (Adium@moz-AC868E2D.hfc.comcastbusiness.net) (Quit: Leaving.)
[19:14:29] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Input/output error)
[19:14:58] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[19:17:04] *** Quits: vodik (simon@moz-94BEDA01.net.uwaterloo.ca) (Ping timeout)
[19:17:05] *** Joins: eatkinson (eatkinson@moz-D86C5DB2.airbears2.berkeley.edu)
[19:17:43] *** Quits: eatkinson (eatkinson@moz-D86C5DB2.airbears2.berkeley.edu) (Quit: eatkinson)
[19:20:19] *** Quits: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com) (Ping timeout)
[19:20:34] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Connection reset by peer)
[19:21:06] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[19:21:55] *** Quits: huseby (huseby@moz-4E8C421A.husebyhome.com) (Quit: Leaving)
[19:22:49] *** jdm is now known as jdm|away
[19:23:07] *** Joins: huseby (huseby@moz-4E8C421A.husebyhome.com)
[19:24:11] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[19:25:00] *** Joins: TheDust (Stijn@moz-8C2076C2.upc-d.chello.nl)
[19:27:55] <jensnockert> Hmâ€¦ moving all the intrinsics from rustc to libstd didn't save any code :(
[19:28:10] <jensnockert> Not unexpected though.
[19:28:54] <jensnockert> Considering it is essentially the same code.
[19:30:02] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[19:32:34] *** Ms2ger is now known as All
[19:32:49] <engla> acrichto: I'll give your .as_imm and .as_mut suggestion further thought
[19:32:55] *** All is now known as Ms2ger
[19:32:56] <cmr> I'd be OK with moving the intrinsics into the library rather than having them as part of the language, as long as it's correct.
[19:34:09] *** Quits: jasdevsingh (jasdevsing@53EDD83A.8878667B.DDE5D3F6.IP) (Ping timeout)
[19:34:17] <acrichto> engla: I just thought that it was the direction that Option was moving in
[19:34:23] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[19:34:33] <engla> yeah, just not sure it's possible
[19:34:53] *** Joins: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP)
[19:34:56] <engla> but I'll consider it, even if my reply on the PR .. doesn't hehe
[19:35:03] <acrichto> I figured it's be struct ReadPtr<'self> { priv value: &'self T, priv parent: &'self Mut<T> }
[19:35:10] <acrichto> just not 'priv value'
[19:35:19] <engla> yeah but we still need .get()
[19:35:24] <acrichto> how come?
[19:35:31] <engla> explanation is in the PR now
[19:35:32] *** Joins: jasdevsingh (jasdevsing@54AD5FAB.2F87036F.DDE5D3F6.IP)
[19:35:35] * acrichto reads
[19:35:36] *** Quits: huseby (huseby@moz-4E8C421A.husebyhome.com) (Input/output error)
[19:36:02] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[19:37:19] *** Joins: huseby (huseby@moz-4E8C421A.husebyhome.com)
[19:38:27] *** Joins: aeqwa_ (aeqwa@moz-52EC52CB.dsl.tropolys.de)
[19:39:52] *** Quits: aeqwa (aeqwa@moz-183FEBFF.dsl.tropolys.de) (Ping timeout)
[19:40:29] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[19:40:50] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[19:41:17] <strcat> acrichto: hm, why are there queued up snapshot builds?
[19:41:46] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[19:41:46] *** ChanServ sets mode: +o tjc
[19:41:52] <acrichto> strcat: brson pushed one as well
[19:41:58] <strcat> ah
[19:42:10] * acrichto shakes fist at timestamps
[19:42:17] <acrichto> tjc: rustpkg tests are still failing on snapshots :( http://buildbot.rust-lang.org/builders/snap3-linux/builds/538/steps/test/logs/stdio
[19:42:29] <tjc> acrichto: Ok thanks, I'll look
[19:42:31] <acrichto> same thing with date comparisons
[19:42:32] *** Joins: vodik (simon@moz-7067B345.net.uwaterloo.ca)
[19:42:53] <acrichto> maybe it's just a dirty workspace b/c it's *always* failing
[19:43:59] <tjc> acrichto: meh, I'll just rewrite all the datestamp()-using tests to use the same trick that no_rebuilding_dep does
[19:44:01] <strcat> brson: the sad part is one of them actually succeeded.... but I'd forgotten to make it clean away LLVM
[19:44:34] <acrichto> engla: you are correct about the lifetimes btw
[19:45:08] <acrichto> engla: that's unfortunate :(
[19:45:19] <engla> yes
[19:45:55] *** Joins: mib_93x7hz (Mibbit@BEF10AB9.DD834F63.AE2B2F80.IP)
[19:46:00] <engla> users of Mut<T> will curse it for the amount of typing needed
[19:46:28] <engla> well, the Cell:new(x); cell.take() thing is still easy. but not the rest
[19:47:02] *** Quits: mib_93x7hz (Mibbit@BEF10AB9.DD834F63.AE2B2F80.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[19:47:11] <doomlord_> Mut<T> .. what is this, any links
[19:47:21] <engla> doomlord_: https://github.com/mozilla/rust/pull/9429
[19:47:21] <acrichto> I guess it'd be too much of a burden to require one borrow and then you clone existing borrows
[19:47:31] *** Quits: steveklabnik (steveklabn@moz-5EF6C37C.socal.res.rr.com) (Ping timeout)
[19:47:41] <strcat> engla: is it any better than using closures?
[19:48:17] <engla> potentially. You have to use a statement and a local variable for the borrow
[19:48:27] <engla> but you can still use it with closure borrow too
[19:49:00] <acrichto> tjc: also it turns out that none of the structures in workcache are `pub`, which is amusing becuase they should all be failing to resolve but xcrate private-ness is not a thing 
[19:49:03] <doomlord_> i keep hearing about @mut problems and the possibility of @ being removed outright
[19:49:14] <acrichto> tjc: more amusing than anything, I'm fixing in my xcrate-privacy pull
[19:49:18] *** Quits: huseby (huseby@moz-4E8C421A.husebyhome.com) (Quit: Leaving)
[19:49:25] <engla> doomlord_: that's not true, @ might change syntax and it may be moved into a library
[19:49:43] <tjc> acrichto: heh
[19:49:52] <acrichto> doomlord_: Mut<T> wouldn't be as useful though because you don't have any possibility of debugging borrows
[19:49:53] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[19:50:11] <strcat> acrichto: it could still be implemented
[19:50:12] <acrichto> not as useful only for debugging that is
[19:50:16] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[19:50:26] <acrichto> more macros :(
[19:50:37] *** Quits: vodik (simon@moz-7067B345.net.uwaterloo.ca) (Ping timeout)
[19:50:47] <doomlord_> IMO it would be a shame to lose such compact syntax for a complimentary case. one argument i have is the amount of situations where people mix languages (eg embedding a scripting language  in C/C++ r layering csharp on c++) .. the idea of a single language with convinient syntax for both extremes is very appealing 
[19:51:33] <strcat> I think that Rc is usually going to be what people want, not Gc - at least outside data structures
[19:51:49] <strcat> when you find yourself wanting shared ownership, it's usually some long-lived big blob
[19:51:55] <strcat> or a container
[19:52:48] <strcat> and it's better for memory usage, just not throughput with many, many copies
[19:52:52] <engla> I'm not sure if this Mut<T> thing improves the usability of Rc though.. well, you can use it without borrow closures and that's good
[19:52:54] <mcpherrin> strcat: Or big complicated circular data structures, but I suppose you could get away with having everythign have teh same lifetime
[19:53:13] <strcat> mcpherrin: well, with Rc/@ you can't create cycles easily
[19:53:24] <mcpherrin> with @mut you can :P
[19:53:28] <strcat> you need to put a non-Freeze thing in them
[19:53:57] <doomlord_> (the 'blob' case was definitely common for things i worked on)
[19:54:07] <engla> strcat: do you think a restriction on Rc<Mut<T>> to T: Send is ok?
[19:54:18] <strcat> engla: yes
[19:54:30] *** Joins: huseby (huseby@moz-4E8C421A.husebyhome.com)
[19:54:30] *** Joins: valenting (Thunderbir@C6866972.77435D89.FB866788.IP)
[19:54:41] <doomlord_> (big precompiled datastructures, immutable , sometimes generated in tools and read in as a binary blob)
[19:54:44] <engla> ok
[19:55:07] *** Quits: jasdevsingh (jasdevsing@54AD5FAB.2F87036F.DDE5D3F6.IP) (Quit: jasdevsingh)
[19:55:18] *** Quits: orshem (orshem@F0A9EA9.588A166C.E3D28531.IP) (Quit: Leaving)
[19:55:46] <strcat> Rc has an entirely predictable cost - it uses 1 more word to store a count, and every time you call clone() it does a refcount++ (+ a refcount-- when it goes out of scope)
[19:55:50] *** Joins: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP)
[19:56:24] <strcat> an efficient gc has to use 2-3x the amount of memory to amortize the cost
[19:56:34] <strcat> and rustc has memory usage issues atm more than anything.
[19:57:00] *** Joins: aeqwa (aeqwa@moz-5634EEB.dsl.tropolys.de)
[19:57:36] *** Quits: aeqwa_ (aeqwa@moz-52EC52CB.dsl.tropolys.de) (Ping timeout)
[19:58:57] <doomlord_> is it possible rust will just give up on GC (and the challenge of doing a decent gc runtime). 
[19:59:14] <strcat> no
[19:59:18] <cmr> doomlord_: servo uses it quite a bit, so no, probably not
[19:59:34] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[19:59:51] <cmr> strcat: do you know why rust requires libstdc++? Could it use libc++ or libc++abi instead?
[20:00:20] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[20:00:21] <strcat> cmr: it has a hard dep on libstdc++ for the libsupc++ exception ABI
[20:00:39] <strcat> there's still C++ source so there's that too
[20:00:47] *** Quits: skade (skade@moz-94C6BCF.dip0.t-ipconnect.de) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[20:01:03] <strcat> it could use libc++abi instead, and not have a dependency on an actual C++ library - afaik
[20:01:19] <cmr> I think libc++abi has the same ABI
[20:01:23] <cmr> I'm trying to verify that now
[20:01:24] <strcat> it doesn't
[20:01:27] <cmr> No? Ok.
[20:01:45] <strcat> libstdc++ -> GNU C++ library, libsupc++ -> GNU C++ ABI library
[20:01:56] <strcat> libc++ -> LLVM C++ library, libc++abi -> LLVM C++ ABI librar
[20:01:58] <strcat> y
[20:02:03] *** Quits: valenting (Thunderbir@C6866972.77435D89.FB866788.IP) (Quit: valenting)
[20:02:15] *** Joins: valenting (Thunderbir@C6866972.77435D89.FB866788.IP)
[20:02:19] <strcat> libc++ can use either the GNU ABI or the libc++abi one
[20:02:35] <strcat> but that's not relevant to us since we don't actually need a C++ stdlib once we clear out the C++ 
[20:02:55] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[20:03:11] <cmr> Where do we explicitly depend on libsupc++? I can see the link stuff in back/link.rs, but last I looked, it was just using a smallish wrapper in librustrt to actually throw/catch exceptions.
[20:03:19] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[20:03:41] <Luqman> cmr: the __gxx_personality_ stuff i assume
[20:04:15] *** Joins: sproing (Mibbit@moz-88FA8127.wireless.concordia.ca)
[20:04:27] <sproing> ping ...
[20:04:41] *** Joins: skade (skade@moz-94C6BCF.dip0.t-ipconnect.de)
[20:04:49] <sproing> I am looking for an open-souce developer who can help me in completing my survey (5 minutes)
[20:04:53] <cmr> it looks like it's just using the itanium abi..
[20:04:56] *** Joins: _Y_ (Mibbit@moz-EB6F1441.dynamic.isp.telekom.rs)
[20:05:06] <_Y_> hi guys, I have a question
[20:05:09] *** Quits: BitPuffin (isak@moz-49828767.cust.tele2.se) (Quit: WeeChat 0.4.1)
[20:05:19] <sproing> well .. Here is the link incase any developer is willing to help ... [http://tinyurl.com/n8ghfy8] 
[20:05:36] <_Y_> I'm hitting this error failed at 'assertion failed: (w > 0)', C:\dev\lang\rust\src\libstd\io.rs:662
[20:06:18] *** Parts: sproing (Mibbit@moz-88FA8127.wireless.concordia.ca) ()
[20:06:33] <strcat> cmr: libc++abi doesn't have gxx personality stuff
[20:06:39] *** Quits: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net) (Input/output error)
[20:06:57] <strcat> well
[20:07:05] <strcat> it has similarly named functions but the ABI is different
[20:07:10] <strcat> you can't mix libsupc++ + libc++abi
[20:07:22] <strcat> we could switch the ABI without any work
[20:07:30] <acrichto> cmr: what's the status on http://huonw.github.io/isrustfastyet/mem/ ?
[20:07:40] <strcat> (this is why libc++ doesn't *always* use libc++abi)
[20:07:49] <acrichto> cmr: if you've just got some scripts which can generate those graphs, could I take a look at them?
[20:08:23] <cmr> acrichto: I have a buttload of builds building right now.
[20:08:25] <pcwalton> acrichto: thanks for nuking rustdoc. I'm going to try to rebase and land @fn again
[20:08:39] <acrichto> pcwalton: np :), I don't think that rustdoc_ng uses @fn at all
[20:08:51] <cmr> acrichto: in dbaupp's isrustfastyet repo there's some scripts that slurp up some json and spit out a website
[20:09:04] <cmr> acrichto: but I don't have any usable scripts for collecting the bench data anymore
[20:09:11] <acrichto> cmr: do you need any help getting them running? We've been getting a lot of oom bugs lately and I'm curious where it's all coming from
[20:09:22] <cmr> acrichto: yes please!
[20:09:28] <acrichto> cmr: how can I help :)
[20:09:35] *** Quits: jviereck (Adium@moz-D03659.dip0.t-ipconnect.de) (Quit: Leaving.)
[20:09:55] <cmr> acrichto: so basically I have /mnt/rustb/$sha1/stage2, which is a copy of the stage2 from the build dir. That part is all set and awesome, using dbaupp's multibuilder.
[20:10:21] <cmr> acrichto: it needs a script to checkout the sha, decide what it's going to measure, and then do so, using cgroups.
[20:10:35] <acrichto> how were the graphs generated before?
[20:10:38] <cmr> I have some python scripts in https://github.com/cmr/rust-bench that are kinda hacky, but work, more or less.
[20:10:43] <acrichto> I think that just compiling stage2 is a good benchmark
[20:11:08] <cmr> I was using https://github.com/cmr/rust-bench/blob/master/plot_data.py for a while, but dbaupp's side of things pull json from octayn.net/benches and build the website every 15 minutes
[20:11:53] <acrichto> cool, so we just need to generate octayn.net/benches
[20:11:58] <cmr> yes
[20:12:30] <cmr> https://github.com/cmr/rust-bench/blob/master/rust-bench.py#L53 is the json structure it uses
[20:13:50] <acrichto> cmr: where are you running all this?
[20:14:21] <cmr> strcat: I see `_Unwind_Reason_Code __gxx_personality_v0 (int, _Unwind_Action, _Unwind_Exception_Class, struct _Unwind_Exception *, struct _Unwind_Context *);` in libc++abi, is that not correct/does it do differnt things than libsupc++'s?
[20:14:25] <cmr> acrichto: on my desktop
[20:14:45] <strcat> cmr: we can switch to it without altering our source, but it's a different ABI
[20:14:47] <strcat> you can't mix them
[20:14:48] <cmr> I stop everything it's running to do benches, but otherwise it's always just building in the background, 6 at a time.
[20:14:54] <cmr> strcat: Oh, ok.
[20:15:04] <strcat> libc++ supports using multiple ABIs for that reason
[20:15:09] <strcat> otherwise libc++abi would be part of it
[20:15:13] <cmr> I thought you meant we had hardcoded assumptions about the ABI somewhere in trans.
[20:15:19] <strcat> cmr: I doubt we do
[20:15:47] <strcat> it's more just that everything you link together has to link against the same exception ABI lib
[20:15:56] <strcat> if you're doing cross-library exceptions
[20:16:56] <acrichto> cmr: could you start generating the json for irfy for now?
[20:17:10] <acrichto> cmr: or is there another reasont that no benchmarks have been getting generated?
[20:17:53] <acrichto> brson: also, would it be possible for us to get a dedicated machine to start running these memory benchmarks?
[20:19:12] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Input/output error)
[20:20:05] <cmr> acrichto: I'll get it going in a few minutes
[20:20:08] *** Quits: tdc (santegoeds@moz-ADD1F5DF.range86-135.btcentralplus.com) (Ping timeout)
[20:20:30] <acrichto> cmr: cool, if we can get a dedicated machine for this then I'll set it up to start spitting out all the data as well
[20:20:33] *** jdm|away is now known as jdm
[20:20:34] *** Joins: aeqwa_ (aeqwa@moz-426F1868.dsl.tropolys.de)
[20:20:36] *** Quits: TheDust (Stijn@moz-8C2076C2.upc-d.chello.nl) (Connection reset by peer)
[20:20:38] <acrichto> and then maybe your desktop can cool down for a bit :P
[20:20:39] <cmr> mmm
[20:20:51] <cmr> Core 0:         +60.0Â°C  (high = +85.0Â°C, crit = +105.0Â°C)
[20:20:53] <cmr> I see no problem :P
[20:21:10] *** Quits: aeqwa (aeqwa@moz-5634EEB.dsl.tropolys.de) (Ping timeout)
[20:21:14] <acrichto> it's below high!
[20:22:00] <brson> acrichto: which builder is running the memory benchmarks now?
[20:22:08] <cmr> brson: my desktop
[20:22:09] <acrichto> brson: none, it's cmr's desktop
[20:22:19] <cmr> it was never official rust infrastructure
[20:22:31] <brson> is there a build target for it?
[20:22:38] <cmr> Does anyone have TWiR announcements besides jeaye?
[20:22:41] <acrichto> just the contents of cmr/rust-bench
[20:22:44] *** Joins: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com)
[20:22:44] <cmr> brson: no, it's custom scripts.
[20:22:52] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[20:23:06] <brson> does it require any special os support?
[20:23:09] <acrichto> brson: I've seen an uptick in oom reports recently, and I think that tracking memory usage is generally a good thing to do
[20:23:12] <strcat> brson: needs linux for cgroups
[20:23:17] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[20:24:13] <cmr> brson: should work on ubuntu 12.04, not 100% sure
[20:24:49] <strcat> cmr: I think it will but you have to enable the memory cgroup on the kernel line
[20:27:23] <brson> cmr: what other infrastructure changes do you need to start displaying more metrics? you mentioned something about the current format being undiscoverable
[20:28:05] <cmr> brson: I... don't remember, been too long since I've thought about it. I don't even remember where the metrics are uploaded to
[20:28:13] <strcat> brson: btw I found out why that ico problem happens https://github.com/mozilla/rust/issues/9421
[20:28:16] <strcat> but I don't know a proper solution
[20:28:17] <_Y_> guys, does anyone know what is most common cause of breaking https://github.com/mozilla/rust/blob/master/src/libstd/io.rs#L663 assertion?
[20:28:43] <acrichto> brson: if we want to display on isrustfastyet then dbaupp should just need to re-point where to scrape the data from
[20:29:10] <strcat> brson: hardcoding the ico file as binary would work... but if we ever have more binaries it will be an issue again
[20:29:12] <cmr> acrichto: he's talking about the metrics the buildbots generate.
[20:29:12] <strcat> it's a misuse of the * glob
[20:29:29] <strcat> * text=auto is good, it means auto-detect text + fix end-of-line
[20:29:40] <acrichto> cmr brson: ah those are definitely uploaded, nothing is scraping them right now though
[20:29:47] <strcat> but eol=lf applies *before* that auto-detection
[20:29:49] <acrichto> I was looking at those the other day
[20:29:50] <strcat> it just mangles everything
[20:30:21] <cmr> _Y_: https://github.com/mozilla/rust/blob/master/src/libstd/str.rs#L969 using invalid utf8
[20:30:57] <brson> acrichto: they are uploaded in a way that makes them hard to discover. cmr wants them all tarred together
[20:31:06] <brson> cmr: I put these on my todo list https://github.com/mozilla/rust/issues/9435
[20:31:06] <brson> https://github.com/mozilla/rust/issues/9436
[20:31:17] * strcat shrugs
[20:31:19] <brson> my todo list is big
[20:31:34] <cmr> brson: thanks!
[20:31:37] <_Y_> hmm
[20:31:41] <_Y_> that's weird
[20:31:42] <strcat> I am just going to remove EOL normalization...
[20:31:58] <brson> cmr: I guess we need a real machine for these measurements?
[20:32:01] <_Y_> @cmr is "a\x85" invalid utf?
[20:32:05] <cmr> brson: yes.
[20:32:05] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[20:32:12] <cmr> brson: at least for reliable ones.
[20:32:13] <brson> ugh, and it has to be a linux machine. can linux be installed on a mac mini?
[20:32:19] <strcat> _Y_: what do you mean by \x85 - a byte, or a code point?
[20:32:22] <brson> mini's are so nice and small
[20:32:25] <brson> stackable
[20:32:32] <strcat> brson: I'm sure it can
[20:32:55] <acrichto> "linux on mac mini" first hit on google is "A mac mini tale of woe"
[20:33:16] <acrichto> although that has nothing to do with linux
[20:33:18] <kmc> rustdoc-ng is live on rust-lang.org now?? sweeeeeet
[20:33:19] <cmr> http://askubuntu.com/questions/301457/installing-ubuntu-onto-mac-mini has a story of success
[20:33:21] <kmc> it looks awesome
[20:33:52] <strcat> brson: how much ram do the mac minis have?
[20:33:58] *** Quits: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com) (Quit: Leaving)
[20:34:04] <cmr> acrichto: brson: I'm perfectly happy running the benches on my desktop, it can be low priority.
[20:34:09] <_Y_> @strcat i assume code point
[20:34:33] <brson> think i'll avoid the mini's for linux
[20:34:37] <_Y_> It's from this http://www.w3.org/TR/xml11/#sec-line-ends
[20:34:40] <strcat> _Y_: 85 is a valid code point, it's just 'U'
[20:34:53] <strcat> but I'm guessing it's a byte... not a code point
[20:35:00] <acrichto> cmr: it'd be awesome to having something like this maintained though
[20:35:20] <strcat> _Y_: if it's a byte, it's invalid UTF-8
[20:35:21] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[20:35:21] *** ChanServ sets mode: +o tjc
[20:35:39] <_Y_> could you clarify the it's just 'U'?
[20:35:54] <strcat> er I mean '0x85 is a valid code point'
[20:36:01] <strcat> _Y_: sorry, that was a mistake
[20:36:50] <strcat> _Y_: http://www.fileformat.info/info/unicode/char/133/index.htm
[20:37:41] * strcat shrugs
[20:37:49] <_Y_> ah
[20:37:52] <_Y_> I see
[20:38:02] <strcat> yet again I linked to the wrong page
[20:38:08] <strcat> http://www.fileformat.info/info/unicode/char/85/index.htm ;p
[20:38:22] <strcat> but I doubt they're using \x85 to mean the 0x85 code point
[20:38:26] <strcat> they probably mean a byte
[20:38:34] <_Y_> nah they mean that one
[20:38:46] <_Y_> I'm doing EoL
[20:38:55] <_Y_> and 85 you linked is exactly that
[20:39:01] * strcat didn't realize the URLs were in hex >.<
[20:39:12] <strcat> _Y_: ah
[20:39:23] <_Y_> it's NEL
[20:39:31] <_Y_> hurray :D
[20:40:12] <_Y_> thanks string cat :)
[20:40:39] <strcat> np ;p
[20:40:53] *** Quits: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net) (Quit: sw17ch)
[20:41:10] *** Joins: aeqwa (aeqwa@moz-84DC629C.dsl.tropolys.de)
[20:41:21] <strcat> oh.... they have a separate kind of url where it's not hex
[20:41:46] *** Quits: aeqwa_ (aeqwa@moz-426F1868.dsl.tropolys.de) (Ping timeout)
[20:42:10] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[20:43:25] <tjc> acrichto: r? https://github.com/mozilla/rust/pull/9437
[20:44:13] <acrichto> tjc: thanks!
[20:45:56] *** Quits: skade (skade@moz-94C6BCF.dip0.t-ipconnect.de) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[20:45:58] *** Quits: victorporof (victorporo@D5C23157.DA9DCE7D.79933D60.IP) (Quit: victorporof)
[20:46:03] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[20:46:03] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14782ad36 to 14eb55348: 02http://git.io/N3iJvQ
[20:46:03] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[20:46:04] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[20:46:04] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/RE5UyA
[20:46:04] <ghrust> 13rust/06auto 1490e839e 15Tim Chevalier: rustpkg: Stop comparing dates in tests...
[20:46:04] <ghrust> 13rust/06auto 142b84d1f 15bors: auto merge of #9437 : catamorphism/rust/rustpkg-dates, r=alexcrichton...
[20:46:05] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[20:46:29] *** Joins: skade (skade@moz-94C6BCF.dip0.t-ipconnect.de)
[20:48:21] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[20:48:28] <brson> I pinged the sundown maintainer about markdown standardization, and he doesn't know what's going on. Sounds like possibly nothing's happening, everybody's busy.
[20:48:51] <cmr> That's unfortunate.
[20:48:52] <strcat> meh ;[
[20:49:04] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Quit: Jesse)
[20:49:16] <acrichto> pandoc it is for now then!
[20:49:38] <brson> he asked me if mozilla was interested in helping :)
[20:49:42] <brson> i'm going to have to say no
[20:49:56] <acrichto> so many things to do!
[20:50:04] <cmr> I was just going to ask if mozilla could push for markdown standardization :p
[20:50:48] <strcat> ok this ico thing is really driving me insane
[20:50:52] <brson> it does seem vaguely within the realm of something mozilla might do
[20:51:21] <Ms2ger> All our standardization people are busy, sorry ;)
[20:51:39] <strcat> it's a loose form of standardization anyway
[20:52:09] <indirect> brson: cmr: apparently it's kind of making progress but you should talk to codinghorror? http://www.fastcolabs.com/3015487/john-gruber-and-jeff-atwood-explain-why-markdown-is-still-growing-up
[20:53:00] <strcat> um
[20:53:03] <strcat> that wouldn't be good
[20:53:05] <strcat> 'automatic return-based linebreaks '
[20:53:15] <strcat> that means you can't use it in source code with line length limits
[20:53:21] <strcat> that's just what stackoverflow/reddit want
[20:53:24] <cmr> I'd see it as under the "Experience" part of the vision statement: having a single, consistent formatting language to use on the web rather than a dozen+.
[20:53:58] <brson> indirect: thanks, i hadn't seen that
[20:54:08] <strcat> if they really care a lot about making newlines act that way, it's never going to become standard :s
[20:54:11] <benh> I'm already having trouble with github markdown where manual linebreaks in commit messages result in linebreaks in pull request messages :(
[20:55:07] <engla> hm I've noticed that github PR text is not wrapped when it ends up in git
[20:55:37] <engla> git basically requires a hard-wrapped commit message
[20:55:42] <strcat> git expects you to manually wrap, though
[20:56:05] <strcat> it's not an enforced expectation, despite strong encouragement to keep the description at 50 columns and the rest at... 72 iirc
[20:56:25] <benh> Yeah. Git expects you to manually wrap, but your pull request messages are then unreasonably broken into lines. If you "fix" the pull request, bors produces a commit message without hard linebreaks iirc. :(
[20:56:42] <benh> Clearly the solution is to not have multi-line pull request messages :(
[20:56:51] <engla> I don't think so
[20:56:55] <strcat> breaking into lines is the correct thing to do
[20:57:04] <strcat> markdown ignores a single newline
[20:57:10] <Luqman> r? https://github.com/mozilla/rust/pull/9301
[20:57:12] <strcat> it treats it as a space
[20:57:13] *** Joins: steveklabnik (steveklabn@moz-5EF6C37C.socal.res.rr.com)
[20:57:40] <strcat> but apparently their "standard markdown" breaks that very important aspect of it because for *their use case* it doesn't matter...
[20:57:41] <indirect> yeah. to get a newline, you have to put two trailing spaces after your text before the \n
[20:57:51] <engla> in some of my PRs I've remembered to wrap the text
[20:57:54] <strcat> so it looks like it's not going to be a standard markdown after all
[20:58:25] <strcat> vim knows what a git commit msg is and will help you format it properly ;p
[20:58:40] <engla> benh: this merge has readable git log because the PR text was hard wrapped 1ac8e8885bb1917f71ce432dcf181253b47f0bca
[20:58:41] <benh> I've been ignoring the 50 characters for the first line thing :(
[20:58:59] *** Joins: Jesin (Jessin_@moz-48B48C95.eecs.lehigh.edu)
[20:59:06] <strcat> benh: vim will highlight it as a syntax error ;p
[20:59:12] <strcat> afaik other text editors have that too
[20:59:23] <benh> engla: but i assume it looked bad on the web interface because all the newlines were interpreted as <br/>s?
[20:59:34] *** Quits: sglez (Mibbit@E19C1D7A.4B605195.A208C5.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[20:59:37] <strcat> their web interface is fluid, though
[20:59:42] <strcat> it could be different tommorow
[21:00:06] <benh> strcat: yeah, sort of, vim displays the first 50 chars as yellow and then the rest as grey
[21:00:16] <engla> benh: it looks ok https://github.com/mozilla/rust/pull/8884
[21:00:21] *** Quits: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP) (Quit: Lost terminal)
[21:00:32] <benh> meh
[21:01:33] *** Quits: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net) (Ping timeout)
[21:02:42] <strcat> anyway I guess we're stuck with pandoc for the near/far future
[21:04:33] <brson> we could still switch to sundoc. it works
[21:04:35] <steveklabnik> bummer
[21:04:42] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[21:04:42] *** ChanServ sets mode: +o pnkfelix
[21:04:48] <steveklabnik> i missed the last bit of scrollback, why are we stuck with pandoc?
[21:04:55] <cmr> steveklabnik: we're not
[21:05:15] <strcat> brson: yeah, but it's dead now - there are various still maintained forks
[21:06:04] <_Y_> strcat
[21:06:04] <strcat> markdown variants all differ so we need to pick one that's going to stay around for 1.0
[21:06:04] *** Joins: themgt (themgt@moz-EEE4DC4.baf.movistar.cl)
[21:06:08] <steveklabnik> right
[21:06:17] <steveklabnik> i think GitHub flavored markdown will 'win'
[21:06:17] <_Y_> I have a question for ya
[21:06:26] <steveklabnik> personally. just due to size and usage
[21:06:26] *** Joins: tikue (tkuehn@90828AFE.B9B3942C.689607DE.IP)
[21:06:43] *** Quits: cdidd (cdidd@moz-E43F830C.broadband.corbina.ru) (Input/output error)
[21:07:04] <strcat> steveklabnik: it doesn't handle newlines sanely for source code
[21:07:09] <Eridius> github-flavored markdown has the benefit of being consistent between filing issues, writing wikis, and writing documentation
[21:07:20] <strcat> but it doesn't work for source code.
[21:07:24] <steveklabnik> Eridius: yes, that's my answer too
[21:07:27] <steveklabnik> strcat: what is the nl issue?
[21:07:39] <strcat> steveklabnik: normal markdown treats a single newline as a space, you can wrap long lines
[21:07:44] <strcat> and text editors will automatically do it
[21:07:51] <steveklabnik> right
[21:08:01] <strcat> github flavoured markdown treats a single newline as an actual newline
[21:08:05] <strcat> you can't wrap long lines
[21:08:07] <steveklabnik> ah
[21:08:10] <cmr> It doesn't do that in code blocks, does it?
[21:08:23] <steveklabnik> i don't EVER write code longer than 80 chars, so i've never even noticed
[21:08:30] <steveklabnik> it's been hard to adjust to Rust's being longer, frankly
[21:08:47] *** Joins: aeqwa_ (aeqwa@moz-30A5D8E5.dsl.tropolys.de)
[21:08:56] <strcat> to write a 5 sentence paragraph in github markdown you need a really, really long line
[21:08:58] <strcat> ;\
[21:09:06] <steveklabnik> nope, i wrap that to 80 cols too
[21:09:13] <steveklabnik> links with long URLs are the only time i dont 80 col
[21:09:18] <steveklabnik> because there's no break
[21:09:23] *** Quits: aeqwa (aeqwa@moz-84DC629C.dsl.tropolys.de) (Ping timeout)
[21:09:24] <strcat> steveklabnik: you can't, with github markdown
[21:09:31] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[21:09:38] <steveklabnik> weirdseies. i wonder how i haven't run into this.
[21:09:49] <strcat> steveklabnik: normal markdown treats the newline as a space, github markdown doesn't
[21:09:51] <acrichto> the bors queue is getting long again
[21:10:04] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[21:10:04] <steveklabnik> strcat: yeah, i get it now. makes total sense, thanks for explaining
[21:10:09] <strcat> because markdown is for source code + emails with wrapped lines
[21:10:26] <strcat> and stackoverflow/reddit/github don't care about that - it's for the majority of people who don't wrap their lines
[21:10:35] * strcat shrugs
[21:10:42] <strcat> I didn't realize this was part of the standardization effort
[21:10:47] <strcat> makes it totally inappropriate for us...
[21:11:02] * strcat sighs
[21:11:07] *** Quits: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net) (Ping timeout)
[21:11:30] <cmr> http://cmr.github.io/blog/2013/09/23/this-week-in-rust/
[21:11:55] <cmr> Can someone post that to reddit please?
[21:12:02] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[21:12:09] *** Quits: KindOne (KindOne@moz-C94C4780.dynamic.ip.windstream.net) (Ping timeout)
[21:12:09] <Eridius> cmr: why don't you?
[21:12:21] <cmr> Eridius: because that'd involve walking home to get my password database
[21:12:26] <Eridius> hah ok I'll do it
[21:12:29] <cmr> thanks :)
[21:12:39] <Eridius> is this #16? Looks like the last one says (15)
[21:12:46] <cmr> yes
[21:12:53] <Eridius> although I suspect moving to dates would be better
[21:13:07] <cmr> probably.
[21:13:17] <Eridius> http://www.reddit.com/r/rust/comments/1mzhr9/this_week_in_rust_sept_23rd_2013/
[21:13:49] <strcat> and rust hasn't been able to build on arch linux for the whole week ;p
[21:14:33] <sp3d> cmr: "macro\_rules!"?
[21:14:35] * acrichto checks the snapshot builder
[21:15:03] <cmr> oops, seems escaping doesn't work like that
[21:16:02] *** Joins: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net)
[21:16:19] <cmr> Ah it's because of the backticks
[21:16:29] *** Joins: jesseray (Mibbit@moz-EE907FB2.dhcp.insightbb.com)
[21:16:31] *** Joins: KindOne (KindOne@moz-C94C4780.dynamic.ip.windstream.net)
[21:16:33] <strcat> acrichto: we also still need pandoc upgraded on the doc builder
[21:16:38] <strcat> so it syntax highlights the code blocks
[21:16:47] <acrichto> strcat: I think it's a stylesheet issue, not a pandoc issue
[21:16:50] <strcat> oh
[21:17:16] <acrichto> oh wait nevermind
[21:17:22] <acrichto> it may be both...
[21:17:39] *** Joins: jmgrosen (jmgrosen@moz-BF80C818.sbcc.edu)
[21:17:42] <acrichto> so my pandoc locally generates weird classes, there was rust syntax highlighting in the old stylesheets, but I generated different classes
[21:17:46] *** Joins: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com)
[21:17:51] <acrichto> although it looks like no classes are generated on the builders
[21:17:53] <acrichto> http://static.rust-lang.org/doc/master/std/fmt/index.html
[21:17:54] *** Quits: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net) (Quit: msingle)
[21:18:11] *** Quits: Kruppe (user@moz-253119B0.esg.uwaterloo.ca) (Ping timeout)
[21:18:30] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: Leaving.)
[21:18:46] <cmr> acrichto: already, getting the bencher back
[21:18:47] <jesseray> I used Github to create a fork of mozilla/rust called jesseray/rust. I cloned it, changed a file, git add, git commit, git push origin master. Having updated my fork, I want to build my fork of Rust so that it runs the #[test]s. How do I do that?
[21:18:48] *** Quits: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net) (Ping timeout)
[21:18:48] *** Quits: Palmik (palmik@moz-11EA685D.pks.muni.cz) (Quit: Lost terminal)
[21:18:58] <cmr> jesseray: make check
[21:19:15] <strcat> acrichto: yeah the builder pandoc is too old
[21:19:15] <jesseray> ./configure; make check ?
[21:19:27] <acrichto> cmr: \o/
[21:19:28] <jesseray> (new to this compiling stuff =P)
[21:19:57] <cmr> jesseray: if you haven't configured yet, yes.
[21:20:01] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[21:20:06] <jeaye> Great work, cmr. We all appreciate it!
[21:20:15] *** Quits: zxcdw (r-a@858B320D.B543C4DE.3933CC16.IP) (Ping timeout)
[21:20:27] <jesseray> Thanks for the quick help. I wanted to make sure my first pull request wasn't a dud =P
[21:20:30] <strcat> acrichto: failed, again
[21:20:30] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[21:20:55] <acrichto> strcat: not to fear, tjc is here!
[21:21:02] *** Joins: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net)
[21:21:02] <tjc> uh-oh
[21:21:18] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[21:21:18] <ghrust> 01[13rust01] 15alexcrichton merged 06auto into 06snap-stage3: 02http://git.io/RE5UyA
[21:21:18] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[21:21:20] * strcat is overly frustrated about the snapshot thing
[21:21:31] <acrichto> tjc: you fixed the tests failing on the snapshot builers
[21:21:45] <jesseray> The bench runner isn't working? Well, that explains the results I was getting. (0ns execution, +/- 0ns. FAST!!!! lol)
[21:21:47] <acrichto> or at least that's what i suspect
[21:21:49] <tjc> acrichto: oh, great!
[21:22:01] <engla> jesseray: the help may be quick, but 'make check' won't be
[21:22:08] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.1)
[21:22:20] <strcat> jesseray: LLVM can optimize out most benchmarks
[21:22:34] <jesseray> Yeah, I've run make and built everything from scratch before... on my atom processor... took hours and hours ^_^
[21:22:34] <engla> if the benchmark runs for too long I think you get 0ns too
[21:22:39] <strcat> we need to be able to mark variables as volatile
[21:22:58] <tjc> acrichto: I spoke too soon, a test failed
[21:22:59] * kimundi resists the urge to present 'FOOterator' as serious naming scheme for Iterator constructors
[21:23:06] <acrichto> tjc: :(
[21:23:11] <strcat> jesseray: you were probably swapping rather than it being the atom's fault
[21:23:12] <cmr> kimundi: give in! give in to the glorious urge!
[21:23:13] <jesseray> strcat: if I compiled using rustc --optimize=0 (or whatever it is, I forgot), would it still optimize out the benchmark?
[21:23:27] <cmr> jesseray: --opt-level=0, no, it won't.
[21:23:31] <kimundi> cmr: "foo bar".spliterator() :P
[21:23:32] <strcat> jesseray: no, in that case it might be taking too long
[21:23:32] *** Quits: valenting (Thunderbir@C6866972.77435D89.FB866788.IP) (Ping timeout)
[21:23:37] * acrichto cancels snapshot build
[21:24:00] *** Quits: ircloggr (nodebot@moz-218B8E8E.compute-1.amazonaws.com) (Client exited)
[21:24:11] *** Joins: ircloggr (nodebot@moz-218B8E8E.compute-1.amazonaws.com)
[21:24:33] <acrichto> tjc: r=me on any fix to those tests
[21:24:34] <mcpherrin> kimundi: I like it.  I hereby title them kimunterators.
[21:24:42] <tjc> acrichto: ok, I'm puzzled, though
[21:24:43] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[21:24:47] <tjc> it passed on my machine!
[21:24:51] <kimundi> mcpherrin: :P
[21:25:21] <cmr> acrichto: if you really want to be awesome, you could get a simple script using aatch's grease-bench going.
[21:25:22] <acrichto> tjc: maybe there's another reason why they've been failing remotely
[21:25:37] <acrichto> cmr: what's that for?
[21:25:52] <jesseray> I used --opt-level=0. The function I was benching just zipped two iterators to iterate over a string two characters at a time to omit some of the chars. The string was about 120 characters long.
[21:25:59] <steveklabnik> cmr: putting macro\_rules!
[21:26:03] <cmr> acrichto: same thing my python script does, but in rust
[21:26:04] <jesseray> That shouldn't take so long that the bench runner times out, right?
[21:26:04] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[21:26:04] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 142b84d1f to 14eb55348: 02http://git.io/N3iJvQ
[21:26:04] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[21:26:05] <steveklabnik> you dont need the \ inside ``s
[21:26:08] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[21:26:08] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/xnpcLw
[21:26:08] <ghrust> 13rust/06auto 149969b57 15Brian Anderson: More 0.8 release notes
[21:26:08] <ghrust> 13rust/06auto 142e77c25 15bors: auto merge of #9438 : brson/rust/relnotes, r=thestinger
[21:26:08] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[21:26:13] <cmr> steveklabnik: already fixed, waiting on github to update
[21:26:18] <steveklabnik> cool
[21:26:39] <steveklabnik> cmr: also, you missed my new rustpkg tutorial
[21:27:04] <steveklabnik> cmr: i dont know why http://static.rust-lang.org/doc/master/tutorial-rustpkg.html ins't showing up, come to think of it
[21:27:21] <steveklabnik> https://github.com/mozilla/rust/blob/master/doc/tutorial-rustpkg.md
[21:27:49] *** Joins: jasdevsingh (jasdevsing@54AD5FAB.2F87036F.DDE5D3F6.IP)
[21:28:02] <jasdevsingh> is there any command to immediately quit a rust program?
[21:28:07] *** Quits: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin_)
[21:28:19] <brson> steveklabnik: could the build rules be wrong? it doesn't appear to be built in the logs http://buildbot.rust-lang.org/builders/doc/builds/971/steps/compile/logs/stdio
[21:28:31] <mcpherrin> jasdevsingh: you could libc::exit(0)
[21:28:34] <cmr> jasdevsingh: std::libc::exit
[21:28:35] <steveklabnik> brson: i dont know anything about that, i just made the file
[21:28:44] <jesseray> On Linux, Ctrl+C will stop the execution of any command-line application.
[21:28:45] <cmr> jasdevsingh: it's considered poor form, though, and doesn't run destructors or anything.
[21:28:54] <cmr> jesseray: unless it handles sigint
[21:28:58] <steveklabnik> brson: if it requires making a change somewhere else to actually get it built i didn't. i can submit a PR if you can point me the way
[21:29:25] <brson> steveklabnik: it's just some copy-paste in mk/docs.mk
[21:29:36] <steveklabnik> brson: word, will investigate now
[21:30:19] <brson> steveklabnik: 'make docs' is the command for it
[21:30:41] <jasdevsingh> cmr thanks!
[21:30:47] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[21:30:49] <steveklabnik> brson: thanks! halfway done... :)
[21:31:10] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[21:31:33] <mcpherrin> is the new rustdoc search just looking at identifier names?
[21:31:37] *** Joins: nejucomo (Adium@moz-A94CACD5.dsl.pltn13.sbcglobal.net)
[21:31:38] <mcpherrin> not descriptions/help text?
[21:31:48] <cmr> mcpherrin: iirc yes
[21:31:59] <cmr> mcpherrin: someone contributed a new search which is vastly better, but it hasn't been integrated yet.
[21:32:06] <mcpherrin> cmr: okay, cool
[21:32:13] <mcpherrin> 'cause searching new docs is a bit of a pain
[21:32:20] <mcpherrin> can't ctrl-f nearly as effectively
[21:33:49] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[21:35:26] *** Joins: binroot (Mibbit@EB2C2C40.83BCE10.DDE5D3F6.IP)
[21:36:14] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[21:36:44] *** Joins: jgilbert_ (jgilbert@moz-BBE3ABD.mv.mozilla.com)
[21:37:01] *** Quits: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[21:37:47] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[21:38:57] <steveklabnik> brson: r? https://github.com/mozilla/rust/pull/9439
[21:39:05] *** Quits: tikue (tkuehn@90828AFE.B9B3942C.689607DE.IP) (Quit: tikue)
[21:39:25] *** Quits: heftig (heftig@moz-1CC2E990.dip0.t-ipconnect.de) (Ping timeout)
[21:40:07] *** Quits: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP) (Ping timeout)
[21:40:18] <indirect> steveklabnik: I don't understand why, but adium has decided that all of your messages mention my name and should be highlighted :P
[21:40:30] <steveklabnik> indirect: ahahahah
[21:41:42] <binroot> I'm getting a local malloc error in these ~15 lines of code. And I using the function correctly?
[21:41:46] <binroot> https://gist.github.com/BinRoot/6677361
[21:41:48] <tjc> obviously, anyone with this problem should change their irc nick to purple_sparklepony
[21:41:55] <Eridius> indirect: why are you using adium for IRC?
[21:42:04] <Eridius> tjc: you mean twilight_sparkle
[21:42:12] <cmr> binroot: handlers can't take a &fn
[21:42:14] <indirect> Eridus: because I have a bouncer and it means I don't need Yet Another Comms App
[21:42:26] <strcat> binroot: you aren't going to be able to handle signals that way afaik
[21:42:33] <strcat> you need to use signalfd on linux or a hack elsewhere
[21:42:39] <binroot> oh
[21:42:48] <binroot> does signalfd work the same way?
[21:42:51] <strcat> no
[21:42:55] <cmr> binroot: try using `extern "C" fn()`
[21:42:57] <indirect> Eridius: I'm already running Adium, Flint (for Campfire), Hipchat, and Messages.app. Adding Textual would be okay I guess but make me sad
[21:43:05] <acrichto> steveklabnik: there's a doc/rustpkg.html target, is that no longer in use?
[21:43:09] <Eridius> indirect: irssi! (or weechat)
[21:43:16] <steveklabnik> acrichto: no, it is the rustpkg manual, we need it
[21:43:19] <jeaye> weechat! <3
[21:43:19] <strcat> it's going to break because the signal handler will get called once per thread or something
[21:43:21] *** Quits: nkoep (nik@moz-A60B8D9F.pool.mediaways.net) (Ping timeout)
[21:43:23] <steveklabnik> acrichto: i link to it at the bottom of the tutorial
[21:43:29] <indirect> steveklabnik: oh yeah I was going to ask about that... I googled for ruskpkg to read your new docs and got that and was confused
[21:43:30] <steveklabnik> acrichto: sharp eye normally though!
[21:44:05] <acrichto> steveklabnik: oh whoops, wrong tab-complete apparently
[21:44:31] <jesseray> I don't use an IRC app at all. I just go to http://chat.mibbit.com/?server=irc.mozilla.org&channel=%23rust =)
[21:45:29] *** Quits: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net) (Ping timeout)
[21:45:34] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[21:46:10] <jasdevsingh> is there a simple way to convert a string into a vector or bytes?
[21:46:20] <Eridius> rusti: "foo".as_bytes()
[21:46:23] -rusti- &[102u8, 111u8, 111u8]
[21:46:38] <jasdevsingh> GG
[21:46:44] <jeaye> heh
[21:46:45] <kimundi> if its compiletime constant: bytes!("foo")
[21:46:59] <kimundi> rusti: bytes!("hello")
[21:47:00] -rusti- &[104u8, 101u8, 108u8, 108u8, 111u8]
[21:47:36] <cmr> jasdevsingh: what does "GG" mean?
[21:47:42] <mcpherrin> rusti: "abc".into_bytes()
[21:47:42] -rusti- <anon>:7:9: 8:5 error: type `&'static str` does not implement any method in scope named `into_bytes`
[21:47:42] -rusti- <anon>:7          "abc".into_bytes()
[21:47:43] -rusti- <anon>:8     };
[21:47:43] -rusti- error: aborting due to previous error
[21:47:43] -rusti- application terminated with error code 101
[21:47:47] <jasdevsingh> GG = good damn
[21:47:50] <jasdevsingh> game***
[21:47:56] <mcpherrin> rusti: (~"abc").into_bytes()
[21:47:57] -rusti- ~[97u8, 98u8, 99u8]
[21:48:12] *** Joins: bat (jgilbert@moz-BBE3ABD.mv.mozilla.com)
[21:48:19] <jeaye> cmr: Commonly used in video games. 
[21:48:27] <jeaye> Like Quake!
[21:48:30] <cmr> That's what I thought it was
[21:48:32] *** Quits: jgilbert_ (jgilbert@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[21:48:33] <jasdevsingh> sorry for being a noob, but whats 'rusti'?
[21:48:41] <jasdevsingh> is that a way to run rust in the irc channel
[21:48:41] <mcpherrin> jasdevsingh: it's a bot that runs rust scripts
[21:48:44] <jasdevsingh> ah okay
[21:48:45] <cmr> But I don't really see how it's relevant... in this or any non-competitive context.
[21:48:48] <jesseray> rusti is a rust interpreter, semi-working =P
[21:49:01] <cmr> jesseray: rusti-the-bot is a rust compiler, fully working.
[21:49:22] <jasdevsingh> rusti: println("GGGGGGGGG")
[21:49:23] -rusti- GGGGGGGGG
[21:49:23] -rusti- ()
[21:49:30] <jeaye> cmr: It's become like "touche", "your point", "you win", or even "fair enough".
[21:49:33] <steveklabnik> cmr: some poeople use it to mean the successful completion of any task
[21:49:37] <jasdevsingh> ^^
[21:49:47] <cmr> Interesting! What a strange culture that I seem to not live in anymore.
[21:49:52] <steveklabnik> GG cmr's misunderstanding
[21:50:28] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[21:50:36] <jesseray> youngsters and their damned abbreviations... (grumble, grumble)
[21:50:48] <jasdevsingh> LOOOOOL
[21:51:11] *** Joins: heftig (heftig@moz-67BFBDEB.dip0.t-ipconnect.de)
[21:51:38] <jeaye> cmr: When does the TWiR email go out?
[21:51:51] <cmr> right now, thanks for reminding me.
[21:51:53] * jeaye didn't know if you'd forgotten.
[21:51:59] <kimundi> haha
[21:52:23] *** Quits: cowboyd (cowboyd@1D8844A7.1B729417.CEE440B6.IP) (Client exited)
[21:52:28] <mcpherrin> cmr: heh, you need to automate this :P
[21:54:13] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[21:56:25] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[21:57:50] *** Joins: nkoep (nik@moz-916468C6.vpn.rwth-aachen.de)
[21:58:43] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Quit: Leaving)
[21:58:57] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[21:59:14] <lahwran> what's the quickest way to get a rust compiler on mac?
[21:59:25] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[21:59:30] <lahwran> oh wait it's in the tutorial
[21:59:59] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[22:02:15] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[22:03:17] *** Quits: squiddy (squiddy@moz-937F4F38.adsl.alicedsl.de) (Quit: Leaving)
[22:04:09] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[22:04:10] *** ChanServ sets mode: +o pnkfelix
[22:05:04] *** Joins: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net)
[22:06:54] <binroot> how do you import an extern struct in rust? is it similar to extern fn?
[22:07:06] <cmr> binroot: there's no such thing as an extern struct
[22:07:24] *** ozten is now known as ozten|afk
[22:07:32] <binroot> signalfd gets a sigset_t as a parameter
[22:07:37] <binroot> but sigset_t is a struct from signal
[22:07:44] <binroot> signal.h
[22:07:53] <kimundi> binroot: You define an struct haiving the same layout as the struct on the C side, and declare the extern fn in the extern block to use that
[22:08:04] <binroot> ooh interesting
[22:11:22] <kmc> right, there's no way to do it without duplicating (or at least generating duplicate) code :/
[22:11:50] <kmc> I expect the layout of sigset_t will depend on the platform and so this is a situation where you might need some codegen or C wrapper code
[22:12:16] <kmc> but yeah, Rust structs are compatible with C structs on the same platform
[22:12:26] *** Joins: a_m0d|home (a_m0d@moz-D2E0D7FB.acanac.net)
[22:13:12] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[22:13:48] *** Quits: jmgrosen (jmgrosen@moz-BF80C818.sbcc.edu) (Quit: jmgrosen)
[22:15:01] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[22:15:04] *** Joins: tikue (tkuehn@90828AFE.B9B3942C.689607DE.IP)
[22:15:44] *** Quits: santiago (santiago@moz-8ADE82B4.socal.res.rr.com) (Connection reset by peer)
[22:16:00] *** Joins: santiago (santiago@moz-8ADE82B4.socal.res.rr.com)
[22:16:15] <a_m0d|home> Could anyone give me some help to get this commit (https://github.com/am0d/rust-web/commit/4d373d464f8562cb1633f4b508d12f95370a9ee0) to compile?
[22:16:28] <a_m0d|home> I'm having troubles with satisfying lifetimes.
[22:16:44] <Eridius> a_m0d|home: what's the ~ for on line 91?
[22:17:20] <a_m0d|home> Eridius: I was only wondering if it made any difference, but it doesn't (at least, not to the error message I get)
[22:18:18] <brson> cmr acrichto: in a followup vmg did say that he recommends using sundown as a doc parser for Rust. sundown isn't deprecated, just 'done'. he also said he's happy to fix bugs we hit
[22:18:22] *** Quits: miza (miza@moz-908EA8DE.home.otenet.gr) (Input/output error)
[22:18:48] <acrichto> brson: now that is indeed appealing, time to slurp in some C!
[22:19:23] <brson> Elixir is also using sundown
[22:19:45] <a_m0d|home> Eridius: I need to have the lifetimes in there because the libhttp ResponseWriter requires a lifetime
[22:20:11] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[22:20:15] <a_m0d|home> but when I move everything into the struct I can't seem to satisfy the lifetime constraints at all
[22:20:28] <brson> s3 operations are all slow
[22:20:50] <brson> even moving one directory to another appears to really involve renaming every file recursively
[22:21:10] <acrichto> brson: :(
[22:21:36] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[22:22:31] <kimundi> brson: Use two directories and double buffer with a top level link? (DISCLAIMER: I have no idea what I'm talking about)
[22:22:53] *** Quits: nkoep (nik@moz-916468C6.vpn.rwth-aachen.de) (Ping timeout)
[22:22:56] *** Quits: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[22:24:02] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[22:24:41] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[22:25:21] *** Joins: ross (ross@moz-5EA04060.br.br.cox.net)
[22:25:37] *** Quits: bat (jgilbert@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[22:26:20] <steveklabnik> http://www.reddit.com/r/rust/comments/1mzmrh/question_about_rust_traits_and_implementations/ 
[22:26:30] <kimundi> a_m0d|home: Does an Request or ResponseWriter maybe contain one of esch other?
[22:26:32] <steveklabnik> i feel like this has to do with tagging structs with types or something but i barely remember what that means even
[22:27:15] <Luqman> brson: added a more detailed comment
[22:27:22] <kmc> a_m0d|home: is that dispatch_request() the same pub fn dispatch_request(&mut self) mentioned later in the diff?
[22:28:50] <a_m0d|home> kmc: Yes it is
[22:29:01] <kmc> hmm
[22:29:04] <a_m0d|home> kimundi: Yes, ResponseWriter does contain a Request
[22:29:23] <a_m0d|home> https://github.com/chris-morgan/rust-http/blob/master/src/libhttp/server/response.rs#L25
[22:30:34] <a_m0d|home> Looking at the source for Response.rs now, maybe I can get away with just using the ResponseWriter since it has the Request; maybe I don't need to store the Request separately
[22:30:41] *** Quits: Ms2ger (Ms2ger@moz-45EBCB4A.adsl-dyn.isp.belgacom.be) (Quit: nn)
[22:30:46] <kimundi> a_m0d|home: the same youre trying to store right next to it in the struct?
[22:31:08] <a_m0d|home> kimundi: I think it might be; I'll have to look into that a bit more.
[22:31:13] <kmc> a_m0d|home: what if you change HelloWorldServer to have Â«fn dispatch_request<'t>(&self, request: &'t Request, response: &'t mut ResponseWriter)Â» and then explicitly type the let as Â«let mut controller: ~TodoController<'t> = ~TodoController::new(request, response);Â»
[22:32:20] *** Joins: jgilbert (jgilbert@moz-BBE3ABD.mv.mozilla.com)
[22:32:39] <kimundi> a_m0d|home: If ResponseWriter does not contain the request, but merely holds an reference to it, then you may not move the response to anywhere else for the duration where responsewriter exists. 
[22:33:56] <a_m0d|home> kimundi: Yes, it is the same request: https://github.com/chris-morgan/rust-http/blob/master/src/libhttp/server/mod.rs#L90
[22:34:18] <kimundi> a_m0d|home: Then storing it in a struct with the writer won't work
[22:34:24] *** Joins: dew (Instantbir@moz-8A71886F.dhcp.stls.mo.charter.com)
[22:34:38] *** Quits: josedonizetti (josedonize@DF22210B.35D9DDB.8EF76F75.IP) (Quit: josedonizetti)
[22:35:09] <a_m0d|home> kmc: If I pass those 2 structs in as parameters, it works fine (see my master branch: https://github.com/am0d/rust-web/blob/master/src/todo_controller.rs#L30)
[22:35:25] <a_m0d|home> But I don't want to have to pass those into every function I call, but rather store them on the object
[22:35:34] *** Joins: gandalf (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net)
[22:35:55] <a_m0d|home> kimundi: So there's no way this will work then?  I'll just have to access the request through the ResponseWriter if I store it in the struct?
[22:36:39] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[22:37:07] <kimundi> a_m0d|home: You _can not_ store the request in the struct. It would mean it could be moved around, which would change its memory address, which would make references to it dangling
[22:37:32] <kimundi> a_m0d|home: You could store refrences to both request and ResponseWriter though
[22:37:38] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[22:37:52] <kimundi> a_m0d|home: Or, even just request
[22:37:54] <a_m0d|home> How do I store a reference to it?  That's really all I want
[22:38:16] <a_m0d|home> I thought that the &'self in there would make it a reference
[22:38:54] <kimundi> ... hu
[22:39:15] <kimundi> Okay I could've sworn those where by value there. Okay, I'm out of ideas
[22:39:16] <engla> a question on my PR I can't answer. Is it correct that Rc<T> is Freeze for any T, even if T is non-Freeze?
[22:39:45] <kimundi> strcat: ^ ?
[22:40:36] <aatch> engla, not sure. Does the impl have Freeze?
[22:40:43] <a_m0d|home> kimundi: Thanks for trying.  I might just have to abandon the idea then.  It's a pity that it doesn't work because I would have expected it to.
[22:41:07] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[22:41:07] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/xnpcLw
[22:41:07] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[22:41:09] <a_m0d|home> kmc Eridius: Thanks to you too for trying
[22:41:31] *** Joins: nkoep (nik@moz-A60B8D9F.pool.mediaways.net)
[22:41:31] <engla> aatch: the impl is unrestricted. The constructors are restricted,  from_send<T: Send>  and from_freeze<T: Freeze>  to statically prevent cycles
[22:43:09] <aatch> engla, I don't think that Rc<T> can be Freeze for any T, though I'm not certain.
[22:43:14] <Eridius> a_m0d|home: your source doesn't build with latest rust. Maybe you should try updating?
[22:43:44] <jorendorff> hmm. Suppose I am given     x : &'a (~str, ~str)    Can I return a reference to the first string as type     &'a str    ?
[22:44:01] <aatch> jorendorff, in theory.
[22:44:05] <a_m0d|home> Eridius: I know that the sub-module I pull from (libhttp) doesn't build - it's due to the hygienic macro changes
[22:44:09] <acrichto> jorendorff: yes, let &(ref myref, _) = my_tuple;
[22:44:18] <Eridius> a_m0d|home: it does if you update it to master
[22:44:22] <jorendorff> acrichto: thanks
[22:44:24] <Eridius> a_m0d|home: you have it pegged to an older version
[22:45:11] <a_m0d|home> Eridius: It's not building on my machine, but I'm still compiling rust master right now
[22:45:12] <jorendorff> rusti: |&(ref a, _)| a
[22:45:13] -rusti- <anon>:7:10: 7:21 error: the type of this value must be known in this context
[22:45:13] -rusti- <anon>:7          |&(ref a, _)| a
[22:45:13] -rusti-                    ^~~~~~~~~~~
[22:45:13] -rusti- error: aborting due to previous error
[22:45:13] -rusti- application terminated with error code 101
[22:45:22] <Eridius> ok this is wacky. I updated to latest rust, then checked out my branch again, and now src/etc/pkg/rust-logo.ico is marked as modified, and git warns me that it's normalizing line endings on every prompt
[22:45:28] <jorendorff> eh, maybe it'll work in my program
[22:46:06] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[22:46:06] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/CHYipQ
[22:46:06] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[22:46:07] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[22:46:07] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/cH6r-w
[22:46:07] <ghrust> 13rust/06auto 1420a10ff 15Luqman Aden: Find the cratemap at runtime on windows.
[22:46:07] <ghrust> 13rust/06auto 149705399 15bors: auto merge of #9301 : luqmana/rust/ncm, r=brson...
[22:46:07] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[22:46:35] <benh> Eridius: If you do not have any own changes, I think you can make that go away with git reset --hard (which is fairly destructive)
[22:46:41] <Eridius> benh: that's not working
[22:46:47] <Eridius> benh: deleting the file and re-checking-out doesn't either
[22:46:59] <Eridius> .gitattributes has `* text eol=lf`, which is clearly wrong, but I don't know why this wasn't a problem before
[22:47:13] <benh> It was discussed a few days ago, I thought it was fixed
[22:47:13] <Eridius> my guess right now is because the gitattribute was modified after the last time I touched that path, so git never re-checked it out and therefore re-normalized
[22:47:21] <Eridius> benh: yeah my branch is based on an older rust
[22:47:27] <benh> ah
[22:47:32] <benh> It's "* text=auto eol=lf" now
[22:47:33] <Eridius> since I have a bunch of changes that I didn't want to have to port on top
[22:47:36] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[22:47:44] <benh> but reset --hard worked for me iirc :/
[22:48:56] *** Joins: dandy (Dandy@moz-84CC8377.hsd1.co.comcast.net)
[22:49:46] <Eridius> screw it. `echo '*.ico binary' >> .git/info/attributes`
[22:50:05] <a_m0d|home> Eridius: okay, updated to latest rusthttp.  I didn't quite understand git submodule properly :(
[22:50:28] <engla> aatch: Freeze is inherited through ~ and & pointers, but not through the *mut RcBox<T> inside Rc<T>. So I don't know if it's intentional
[22:51:01] <aatch> engla, you'd have to ask strcat about that.
[22:51:36] <engla> I mean more intentional in rustc
[22:53:43] *** a_m0d|home is now known as a_m0d|away
[22:54:21] <jorendorff> acrichto: that let-form typechecks, but the type of myref is &~str ... how do I get an &'a str from that?
[22:55:26] *** Quits: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net) (Client exited)
[22:55:29] <engla> rusti: let s: &str = *&~"hi there"; println(s)
[22:55:36] <engla> you need the deref
[22:55:40] -rusti- hi there
[22:55:42] -rusti- ()
[22:56:34] <kimundi> rusti: let s = &~"hello"; println(s.as_slice());
[22:56:35] -rusti- hello
[22:56:35] -rusti- ()
[22:56:46] <kimundi> jorendorff: ^ that also works
[22:56:52] *** ozten|afk is now known as ozten
[22:57:48] <engla> autoderef is pretty thorough
[22:57:52] <engla> rusti: let s = &~&~~~"hi"; println(s.as_slice())
[22:57:54] -rusti- hi
[22:57:54] -rusti- ()
[22:57:59] * jorendorff tries to understand this
[22:58:10] <engla> ignore me then hehe
[22:58:14] <engla> sorry for confusing
[22:58:47] <acrichto> jorendorff: looks like it was answered, but yeah I recommend as_slice()
[22:58:56] <jorendorff> as_slice
[22:59:12] <acrichto> the other option is explicit dereferencing with type coercion
[22:59:18] <kimundi> engla: wait, we still have arbitrary depth autoderef?
[22:59:21] *** Quits: skade (skade@moz-94C6BCF.dip0.t-ipconnect.de) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[22:59:29] <acrichto> let myslice: &str = *mything; (where mything: &~str)
[22:59:44] <kimundi> rusti: let s = ~~~~~~~~~~~~~~~~~~"hello"; println(s.as_slice());
[22:59:45] -rusti- hello
[22:59:45] -rusti- ()
[22:59:50] <engla> jorendorff: the &str type is called a string slice.  ~str is an owned string.
[22:59:52] <kimundi> ... xD
[23:00:08] <jorendorff> fn first<'a>(pair : &'a (~str, ~str)) -> &'a str { let &(ref x, _) = pair; x.as_slice() }
[23:00:21] <jorendorff> ok, great!
[23:00:40] <engla> rusti: let s = ~&~@@~@@@~@mut ~~~"hi"; println(s.as_slice())
[23:00:41] -rusti- hi
[23:00:44] -rusti- ()
[23:00:51] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[23:01:01] <strcat> the rules for Freeze/Send are weird
[23:01:28] <strcat> it doesn't go through &/&mut/*/*mut so I'm not sure if most things using them are correct
[23:01:51] <engla> Freeze inherits through & when I tested.-
[23:01:55] <kimundi> rusti: ~~~~~~~&&&&&@@@@@@mut@mut@mut"############"
[23:01:55] -rusti- <anon>:7:16: 7:18 error: unexpected token: `&&`
[23:01:55] -rusti- <anon>:7          ~~~~~~~&&&&&@@@@@@mut@mut@mut"############"
[23:01:56] -rusti-                          ^~
[23:01:56] -rusti- application terminated with error code 101
[23:02:01] <engla> and ~ of course
[23:02:31] <strcat> acrichto: why are the snapshots still failing? :(
[23:02:31] *** Quits: _Y_ (Mibbit@moz-EB6F1441.dynamic.isp.telekom.rs) (Quit: http://www.mibbit.com ajax IRC Client)
[23:02:40] <strcat> engla: afaik & is *always* freeze
[23:03:03] <aatch> kimundi, you also can't have & anywhere but the "beginning" (top? I dunno)
[23:03:13] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[23:03:18] <acrichto> strcat: as to what's failing, tjc is on it, as to why it's *always* failing, your guess is as good as mine :(
[23:03:24] *** Quits: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP) (Quit: buildmaster reconfigured: bot disconnecting)
[23:03:24] *** Joins: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP)
[23:03:33] <engla> strcat: I'll show my test
[23:03:34] <Luqman> kimundi: put some spaces in between
[23:03:44] <engla> rusti: struct Foo<T> { v: T }  fn fr<T: Freeze>(_: T) { }  let f = Foo{v:std::cell::Cell::new(1)}; fr(&f)
[23:03:45] -rusti- pastebinned 5 lines of output: http://sprunge.us/fcQW
[23:03:53] <acrichto> is Option<extern "C" fn()> actually 1-word right now?
[23:03:55] <engla> rusti: struct Foo<T> { v: T }  fn fr<T: Freeze>(_: T) { }   fr(&3)
[23:03:56] -rusti- ()
[23:03:58] <kimundi> Luqman: Yeah I know, but didn'T want to continues spamming :P
[23:04:09] <strcat> hm
[23:04:10] <acrichto> rusti: sys::size_of::<Option<extern "C" fn()>>()
[23:04:17] -rusti- pastebinned 11 lines of output: http://sprunge.us/gdPc
[23:04:19] <brson> I made a change to buildbot that should fix the periodically missing master docs
[23:04:20] <strcat> engla: is it * it doesn't inherit through then?
[23:04:21] <acrichto> rusti: ::std::sys::size_of::<Option<extern "C" fn()>>()
[23:04:24] -rusti- 8u
[23:04:27] <jorendorff> aaaarrrrrgggh borrowed value does not live long enough (throws computer out window, goes to play baseball with kids)
[23:04:28] <kimundi> brson: \o/
[23:04:31] <engla> strcat: yes, it doesn't through *T
[23:04:46] <aatch> acrichto, so yes
[23:04:54] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[23:05:04] <acrichto> aatch: :)
[23:05:04] <kimundi> jorendorff: Seems like a reasonable course of action :)
[23:05:09] <jorendorff> :)
[23:05:16] <acrichto> brson: yay! what was it?
[23:05:52] <brson> acrichto: s3cmd sync has a --delete-removed flag that just works
[23:06:15] <acrichto> brson: how convenient!
[23:06:15] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[23:06:17] <aatch> jorendorff, you gonna go coach a group of misfits and lead them to an improbable win against better-equipped, better-trained team?
[23:06:18] <kimundi> that sounds very magically
[23:07:25] <kmc> laptops are easy to throw out the window but for satisfaction value it's hard to beat a big desktop PC and CRT monitor
[23:07:50] <mcpherrin> sometimes I wish rustc had a --just-never-deallocate-things-borrows-live-forever flag
[23:08:20] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[23:08:23] <jorendorff> hahaha
[23:08:32] <mcpherrin> (akin to the "never use free()" method of memory management in C)
[23:08:40] <jorendorff> --i-dont-ever-want-to-hear-about-ReSkolemized-anything
[23:08:53] <engla> that one sounds good
[23:09:00] <kmc> if you're never free()ing stuff in C you can also install a dummy malloc() that's faster than the usual one, I reckon
[23:09:26] <jorendorff> --the-call-at-49:28-is-magical-dont-worry-about-it
[23:09:34] <aatch> --#^*@-you-skolemization
[23:09:47] <aatch> kmc, dmd did that
[23:09:54] <kmc> does rustc have messages about skolemizing or are you on a haskell riff now
[23:10:04] <mcpherrin> kmc: yeah, mmap infinity virtual address space and just bump-the-pointer to allocate.
[23:10:14] * acrichto just wrote sundown bindings, time to see how much dox needs to change
[23:10:14] *** Quits: donri (donri@moz-9BB61102.tbcn.telia.com) (Client exited)
[23:10:21] <mcpherrin> one syscall, and malloc becomes like 5 instructions.
[23:10:23] <jorendorff> kmc: i just got one: "note: first, the lifetime cannot outlive lifetime re_infer(ReSkolemized(0u, br_anon(0u)))..."
[23:10:30] <kmc> :)
[23:10:35] <kmc> ah
[23:10:36] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Input/output error)
[23:10:57] <kmc> I wrote a toy libc-less C program and I just used mmap() and munmap() as my malloc/free...
[23:11:07] <olsonjeffery> flaper87|afk: ping
[23:11:10] <kmc> 4kB internal fragmentation isn't so bad right
[23:11:25] <mcpherrin> Or another fun way of allocating is to just mmap your entire address space and let the OS handle allocating pages for you.  malloc() returns rand().  Hope for the best!
[23:11:31] <strcat> kmc: more about the overhead
[23:11:34] <kmc> hehe
[23:11:37] <mcpherrin> (That's what ASLR means, right??)
[23:11:44] <kmc> strcat: yeah it's neither fast nor slim :)
[23:12:14] <strcat> mcpherrin: malloc is as fast as it's going to get with jemalloc
[23:12:22] <strcat> the overhead of our calls into C are larger than the time to allocate
[23:12:34] <aatch> strcat, real allocation yes.
[23:12:42] <kmc> why is there still significant overhead to call into C, when we're not using segmented stacks?
[23:12:49] <aatch> strcat, but if you don't ever free then you don't need all the management.
[23:12:51] <mcpherrin> strcat: well with a bump-the-pointer malloc you don't have to call into C
[23:13:00] *** Quits: jgilbert (jgilbert@moz-BBE3ABD.mv.mozilla.com) (Connection reset by peer)
[23:13:08] <mcpherrin> could do that in pure rust.
[23:13:12] <strcat> aatch: 'all the management' is cheaper than the actual page faults
[23:13:44] <benh> I thought we were doing segmented stacks
[23:13:47] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[23:13:53] <benh> at least the compiler complains about the fixed stack segment thing missing
[23:13:54] <strcat> we still have the segmented stack glue
[23:13:55] <benh> or did.
[23:13:57] *** Joins: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP)
[23:14:01] *** Quits: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP) (Quit: alisdair)
[23:14:03] <strcat> it just doesn't do anything useful atm
[23:14:03] <kmc> benh: I thought they went away with new-RT, with the intent that they'll come back on 32-bit platforms
[23:14:10] <kmc> but I don't think there's any reason to use them on 64-bit
[23:14:30] <aatch> I thought we had the intent to use them but currently aren't because the new RT doesn't support them because hard
[23:14:31] <kmc> (which doesn't mean the compiler shouldn't complain about stuff that will break on 32-bit, of course)
[23:14:39] <benh> I see
[23:15:02] <aatch> If somebody wants to implement it...
[23:15:34] *** Joins: josedonizetti (josedonize@moz-CA73D699.cpe.teksavvy.com)
[23:15:47] <kmc> fast FFI seems like an important part of what makes Rust appealing
[23:15:56] <strcat> kmc: we still need a strategy on 64-bit to handle stack safety
[23:16:13] <kmc> to make stack overflow a deterministic failure?
[23:16:23] <strcat> kmc: yes
[23:16:29] <kmc> (presumably that doesn't have to cover C code called from Rust)
[23:16:52] <kmc> I liked the proposal of guard page + explicit check code in functions that use more than 1 page of stack
[23:17:05] <kmc> I haven't thought about all the ramifications
[23:17:14] <strcat> kmc: that's what I proposed, since it's how you do stack safety for C/C++
[23:17:35] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[23:18:07] <strcat> rust isn't very appealing as a system's language right now because there's no standard library
[23:18:32] <kmc> what do you mean, you have all of libc!!
[23:18:35] <strcat> you don't get any of libstd/libextra if you're writing something like a library
[23:18:38] <kmc> (half kidding)
[23:18:47] <benh> Because you're not in a rust task?
[23:18:49] <kmc> strcat: why not? because they use managed boxes and stuff?
[23:18:57] <benh> I think you can't fail!() either
[23:19:04] <strcat> kmc: and failure, and conditions (TLS + failure), and so on
[23:19:26] <strcat> if we move more towards conditions, we'll need a whole fork of the stdlib
[23:19:40] <doomlord_> how likely is the idea of seperating out the libraries into a subset that needs no runtime
[23:19:45] <kmc> lots of people want it
[23:19:50] <cmr> doomlord_: 100%
[23:19:54] <benh> glorious return of libcore
[23:19:57] <cmr> It's next on my to-do list
[23:20:01] <strcat> I don't think it's as likely as you'd think
[23:20:01] <cmr> But not quite like that
[23:20:01] <kmc> I like this idea of various "profiles" that delineate the language features you can use and the features the environment must provide
[23:20:09] <strcat> modules use runtime features in a few functions but not others
[23:20:15] *** Joins: ofeldt (ofeldt@moz-56FD8CD3.dip0.t-ipconnect.de)
[23:20:32] <cmr> You need task failure and TLS, but that's just about it.
[23:20:36] <strcat> if you use different error handling idioms with/without the runtime it's just going to be weird
[23:20:54] *** Quits: ofeldt- (ofeldt@moz-24067E5A.dip0.t-ipconnect.de) (Ping timeout)
[23:21:14] <benh> Couldn't you just fall back to pthread thread-local storage if you want to do conditions outside the runtime?
[23:21:19] <kmc> I find conditions super weird regardless ;)
[23:21:20] <benh> ""just"" :/
[23:21:27] <strcat> benh: you don't always have pthreads
[23:21:32] <cmr> benh: using pthreads isn't really runtimeless
[23:21:40] <cmr> And runtimeless is a misnomer.
[23:21:48] <cmr> It's jsut you need to supply certain parts of the runtime yourself.
[23:22:01] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[23:22:08] <kmc> even GCC has crti.o and libgcc.a and such ;)
[23:22:19] <strcat> if you use rust to do say, a linux kernel module, you don't have libc/pthreads
[23:22:27] <mcpherrin> I'd like to be able to run rust programs with just newlib and uboot
[23:22:38] <mcpherrin> or on the xen mini-OS
[23:22:47] <benh> well yeah
[23:22:48] <kmc> it'd be cool to run Rust tasks as kernel threads directly
[23:23:00] <kmc> speaking of stack overflow
[23:23:04] *** Quits: cstrahan (cstrahan@moz-71FAC30.hsd1.va.comcast.net) (Ping timeout)
[23:23:06] <kmc> (since they only get 8 kB)
[23:23:17] <benh> strcat: i meant in the "writing a userspace library for use by other programming languages" case where you'd have all the libc posix runtime stuff, just not the rust rt
[23:23:19] <cmr> The point of "profiles" is that it's a separate libstd for every environment. You can't combine them etc.
[23:23:22] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Quit: Leaving)
[23:23:31] <kmc> also a context where overflowing your stack is probably an exploitable privilege escalation :)
[23:23:42] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[23:23:46] <strcat> kmc: it always is
[23:24:05] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[23:24:05] *** ChanServ sets mode: +ao brson brson
[23:24:15] <strcat> if you have 3 threads, and the 3rd thread overflows, it will likely overrun into the 2nd thread's stack
[23:24:16] *** kimundi is now known as zz_kimundi
[23:24:19] <strcat> it will be entirely silent
[23:24:29] <kmc> I know
[23:24:50] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[23:24:55] <kmc> but many userspace programs don't manipulate untrusted data or run with special privileges
[23:25:02] <kmc> whereas all kernel code is a security risk in this way
[23:25:04] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[23:25:05] *** Quits: dherman (dherman@moz-B31C6965.dsl.pltn13.sbcglobal.net) (Quit: dherman)
[23:25:39] <strcat> could make a new stdlib using only the C11 libc
[23:26:26] <strcat> the thread stuff is done because they needed it for C++11 support
[23:26:39] <strcat> (both just wrap pthreads on linux)
[23:26:41] * strcat shrugs
[23:26:41] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[23:26:55] <strcat> and pthreads are entirely a userspace concept anyway ;p
[23:28:23] *** Quits: jesseray (Mibbit@moz-EE907FB2.dhcp.insightbb.com) (Ping timeout)
[23:28:29] <strcat> lightweight threads are soon going to be useless on linux anyway
[23:28:41] <cmr> Why?
[23:28:45] *** Quits: binroot (Mibbit@EB2C2C40.83BCE10.DDE5D3F6.IP) (Ping timeout)
[23:29:04] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[23:31:28] <strcat> cmr: http://www.linuxplumbersconf.org/2013/ocw//system/presentations/1653/original/LPC%20-%20User%20Threading.pdf
[23:31:40] <strcat> google wants to add N:M scheduling to the kernel
[23:32:11] <strcat> rather than reinventing the kernel in Go
[23:32:15] <strcat> (poorly)
[23:33:33] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[23:34:16] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[23:34:45] *** Joins: mark_edward (quassel@3BF24883.4ADC0C81.CB6AFAE5.IP)
[23:35:05] <strcat> pdf.js can't handle these pdfs ;\
[23:35:06] <kmc> from skimming, sounds more like going to 1:1 model with a syscall to bypass the kernel scheduler and tell it who runs next
[23:35:14] <steveklabnik> strcat: evince
[23:35:16] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[23:35:16] *** ChanServ sets mode: +ao pcwalton pcwalton
[23:35:20] <kmc> pdf.js works for me
[23:35:39] <cmr> it's doing fine for me.
[23:35:52] <strcat> well maybe it's because I opened 6 of them
[23:36:12] <kmc> haha
[23:36:35] *** Joins: nejucomo1 (Adium@moz-A94CACD5.dsl.pltn13.sbcglobal.net)
[23:36:35] *** Quits: nejucomo (Adium@moz-A94CACD5.dsl.pltn13.sbcglobal.net) (Connection reset by peer)
[23:38:18] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[23:38:38] *** Quits: nejucomo1 (Adium@moz-A94CACD5.dsl.pltn13.sbcglobal.net) (Quit: Leaving.)
[23:38:40] *** Quits: jasdevsingh (jasdevsing@54AD5FAB.2F87036F.DDE5D3F6.IP) (Quit: jasdevsingh)
[23:40:39] *** jorendorff is now known as jorendorff_away
[23:40:40] *** Quits: Larry (larryfox@moz-343B6F0C.nyc.biz.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[23:40:45] <tjc> does evince render things better than a drunk kindergartner with a crayon these days?
[23:41:27] <engla> absolutely
[23:41:39] <tjc> it's changed in the past 10 years, then :-)
[23:41:42] <engla> pdf.js is way slower than evince
[23:41:49] <sp3d> shouts to mupdf if we're discussing speed ;)
[23:42:08] <strcat> tjc: poppler is the pdf lib it actually uses to render
[23:42:26] <strcat> there are at least a dozen of them
[23:42:27] <strcat> all basically the same
[23:43:06] <mcpherrin> pdf.js is okay for rendering short-ish mostly text documents
[23:43:20] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[23:43:20] <mcpherrin> every time I accidentally open a map in PDF.js I hate myself for the next two minutes
[23:43:20] *** ChanServ sets mode: +ao dherman dherman
[23:43:59] <strcat> tjc: http://ix.io/8dH o_O, I didn't realize how widely used it was
[23:44:24] <strcat> so yeah... lot of people invested in fixing it ;P
[23:45:26] <aatch> strcat, oh KDE, you have such ridiculous dependencies
[23:45:47] <sfackler> is there a known bug with generic types in traits with rustdoc? the return value of FromBase64::from_base64 shows up as std::result::Result instead of Result<~[u8], ~str>
[23:45:57] <strcat> this is just the reverse dep tree for poppler, so it makes kde look saner than it is ;p
[23:46:10] <cmr> sfackler: yes, cross-crate types are broken.
[23:46:23] <sfackler> cool
[23:46:31] <dandy> Could somebody explain to me what VectorVector is? http://static.rust-lang.org/doc/master/std/vec/trait.VectorVector.html
[23:46:36] <sfackler> the new docs look amazing, by the way :)
[23:46:40] <aatch> strcat, I know. Looking at it made me remember how screwed it is.
[23:46:52] <cmr> dandy: it represents a vector of vectors.
[23:46:57] <cmr> dandy: look at what implements it
[23:48:03] *** Quits: hoverbear (andrew@EBFA78B5.F19E5E7B.E74D50F2.IP) (Quit: hoverbear)
[23:48:12] <aatch> Ah, you got impls on Options working
[23:48:17] <aatch> I mean enums
[23:48:19] <aatch> like Option
[23:50:09] <cmr> well, it was Seldaek's bug :p
[23:50:13] <cmr> acrichto fixed it in the port
[23:50:32] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[23:50:34] <acrichto> brson: sundown took rendering times for rustdoc from 30s to 0.5s
[23:50:43] <acrichto> I think using FFI is faster than fork/exec/pipe io
[23:51:12] <strcat> acrichto: need to add a syntax highlighter as a dep too
[23:51:21] <strcat> pygments or kate is still going to fork
[23:51:35] <acrichto> nooo
[23:51:44] <acrichto> well, we don't *need* a syntax highlighter
[23:52:01] <strcat> all those samples should really be syntax highlighted
[23:52:12] <acrichto> well, we do kinda have a compiler on-hand...
[23:52:17] <aatch> cmr, it was annoying when I was looking for the methods on Option and the main docs were down.
[23:52:41] <strcat> acrichto: I think the fork is hoedown ;p
[23:53:06] <strcat> acrichto: what does sundown do with a single newline at the end of a line?
[23:54:39] <acrichto> strcat: http://www.contrib.andrew.cmu.edu/~acrichto/doc/std/
[23:54:49] <acrichto> the front page tells me that it's not a <br/> tag
[23:55:09] <acrichto> http://www.contrib.andrew.cmu.edu/~acrichto/doc/std/fmt/index.html nooo we have to go change ~~~{.rust}
[23:55:51] *** Quits: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net) (Quit: Leaving.)
[23:56:17] <strcat> acrichto: we still need some way of highlighting different kinds of snippets :s
[23:56:17] <strcat> in the tutorial, etc. too
[23:56:28] <acrichto> ```rust
[23:56:30] <acrichto> ```
[23:56:30] *** Quits: KindOne (KindOne@moz-C94C4780.dynamic.ip.windstream.net) (Ping timeout)
[23:56:34] <acrichto> like github I'd imagine
[23:56:37] <strcat> that works in pandoc too
[23:56:44] <strcat> fwiw
[23:56:45] <acrichto> also the tutorial isn't becoming sundown any time soon
[23:57:04] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[23:57:13] <strcat> why?
[23:57:48] <cmr> So FreeBSD 10 uses a pure-LLVM toolchain, which requires different linking options. Should it have a new entry in rustc::driver::session::Os?
[23:57:48] <acrichto> I think it uses lots of fancy pandoc things
[23:57:51] <acrichto> although I could be wrong
[23:58:06] *** Joins: ChrisMorgan (chris@moz-D7F2B7D6.static.tpgi.com.au)
[23:58:25] <cmr> Meh, I might not worry about that and work on getting profiles working. Profiles need to specify the proper linker options per-platform.
[23:58:35] <cmr> That information shouldn't be in the compiler.
[23:59:03] <aatch> Hoedown looks pretty good
[23:59:21] <acrichto> what's the link for hoedown?
[23:59:45] <jeaye> I'm trying to separate some of my build into separate libs. For my math lib, I build the shared object just fine, and the 'extern mod' succeeds, but I get linker errors saying my vectors aren't found. All mods are pub. Ideas?
