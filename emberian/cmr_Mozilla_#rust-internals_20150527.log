[00:00:14] <eddyb> bstrie: https://www.reddit.com/r/rust/comments/37b6oo/the_calendar_example_challenge/crla8yp #nopromises
[00:00:23] *** Quits: skeuomorf (skeuomorf@moz-ij1.21q.32.197.IP) (Ping timeout: 121 seconds)
[00:00:28] *** Joins: Guest38 (textual@moz-4hh.6p3.217.74.IP)
[00:01:24] <doomrobo> eddyb, oh. But how does that relate to an implementation for Iterators? atm it's only for &[T] and I agree it should probably also be for [T; N] but I see usefulness way beyond that
[00:01:32] <eddyb> nmatsakis: any chance offsetof in https://github.com/rust-lang/rfcs/pull/591 could be replaced with some kind of "associated fields" scheme?
[00:01:53] <eddyb> doomrobo: chunks::<N>() instead of chunks(n)
[00:02:33] <doomrobo> what's the practical difference?
[00:03:01] <eddyb> doomrobo: most times I've had to chunk something, it was fixed size and not getting actual fixed size arrays made it so much less useful
[00:03:40] <eddyb> with arbitrary iterators, you need fixed-size arrays if you don't want to allocate all over the place
[00:04:26] <doomrobo> eddyb, interesting. Most times I've had to chunk something, they've been slices. Also chunks can't guarantee a fixed-size array as a return value because the number of source elements may not be divisible by the chunk size
[00:04:47] <doomrobo> it's gonna need to return a Vec, I'm almost sure
[00:05:03] <eddyb> yeah, well, I'm never going to use it if it returns a Vec<T>
[00:05:19] <eddyb> nor is anyone who uses iterators for performance reasons
[00:05:30] *** Quits: bkearns (Adium@moz-rudtng.static.wiline.com) (Quit: Leaving.)
[00:05:33] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[00:05:42] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[00:05:58] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[00:06:23] <aatch> eddyb, doomrobo, I've used a chunk iterator to process data in python, since neither row-by-row nor "All of the data!" worked very well.
[00:06:27] <eddyb> and then they can argue against including something which eagerly allocates and which may be abused/misused
[00:06:34] *** Quits: nicknikolov (nicknikolov@moz-0q4.2rm.211.90.IP) (Connection closed)
[00:07:49] <doomrobo> hmm, is there a more generic trait it could return so that it could optimize when the source data is a slice? Into something?
[00:07:53] <aatch> I'm not sure if it's a good candidate for std::iter, but it's certainly useful for performance when your bottleneck isn't the iteration itself.
[00:09:13] <aatch> (I'll leave "should it be in std" to the libs team)
[00:09:36] <doomrobo> eddyb, I'm not very familiar with the atmosphere of the core development of Rust, but is there such a strong emphasis on highly efficient code? If there is, then I don't have a good chance
[00:10:01] <eddyb> aatch: well, there's an itertools crate
[00:10:13] <aatch> eddyb, yes, that's what I was implying.
[00:10:28] <eddyb> doomrobo: one thing to note is that Iterator is in libcore, which doesn't have allocation available
[00:10:41] <eddyb> so this would have to be an extension trait
[00:10:56] <aatch> eddyb, I was more pointing out that "performance reasons" can mean more than "highly-optimised loops".
[00:11:07] <doomrobo> Yeah, I suppose it would
[00:12:28] <eddyb> doomrobo: I have to go to sleep, and don't take what I said as some kind of official viewpoint. talk to acrichto or aturon about library additions, I guess
[00:13:06] <eddyb> I'd say grain a salt but you'd need a sack :P
[00:13:51] <doomrobo> haha thanks for the opinion though! gn
[00:14:17] <aatch> My specific case for iterating over chunks was reading from a very large CSV file, so I had a chain of iterators that read a line, parsed it into a row, then collected some number of rows before throwing them all at a database.
[00:16:43] <doomrobo> mine actually came up while doing the matasano crypto challenges. I ended up shoehorning some things I think, but I was able to use slice::chunks to do what I needed
[00:16:56] <aatch> doomrobo, I'd say don't worry about handling every single last case super-efficiently. It's not like the existence of a chunking iterator in itertools means nobody can ever write a chunking iterator ever again.
[00:18:58] <doomrobo> I really won't be possible to handle almost anything super-efficiently if I'm implementing this generically. I figured this would fit better in std since there's already a chunks() for slices, but it's definitely not the end of the world if it goes to another library. Also I'll have to find the time to make sure I get everything just right, write tests, and a persuasive RFC :P
[00:19:36] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[00:23:00] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[00:26:49] *** Quits: erz (erz@moz-fiq1tl.broadband.corbina.ru) (Quit: My Mac has gone to sleep. ZZZzzz…)
[00:29:48] *** Quits: goyox86 (textual@moz-6gq.t8s.78.166.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[00:35:40] *** Joins: swgillespie (swgillespie@moz-1i5.3un.220.167.IP)
[00:35:53] <nrc> aatch: when you were looking at || codegen, did you have a reduced test case? I tried rebasing the gist from the issue, but it no longer fails. My smallest test case is libsyntax :-(
[00:36:19] <aatch> nrc, I think I was using that Gist.
[00:36:39] <nrc> ah, curses
[00:39:26] *** Joins: tamird (textual@moz-gg3hct.res.rr.com)
[00:41:08] *** Joins: bjz (bjz@moz-4cc8qn.bigpond.net.au)
[00:50:48] *** Quits: Sho (sho@moz-83s.6h6.28.5.IP) (Quit: Konversation terminated!)
[00:59:09] *** Quits: Guest38 (textual@moz-4hh.6p3.217.74.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[00:59:34] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[01:00:21] *** Joins: koobs (koobs@moz-lu0tvm.internode.on.net)
[01:00:25] <koobs> morning
[01:00:35] <koobs> bstrie: ack
[01:01:20] *** Joins: skeuomorf (skeuomorf@moz-ij1.21q.32.197.IP)
[01:07:21] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[01:07:43] <bstrie> koobs: syn
[01:07:49] <koobs> heh.
[01:07:55] <koobs> bstrie: so, your doco and build system suck :)
[01:08:00] <koobs> bstrie: no offense :)
[01:08:32] <koobs> bstrie: something probably simple im not grokking, rust wants gcc > 4.6 or clang 3.2+ iirc
[01:08:40] <koobs> bstrie: what is the cstd or compiler feature set you need?
[01:09:03] <huon> I believe LLVM needs C++11
[01:09:04] <koobs> Since freebsd can (based on describing what features are needed) supply (either from base or ports/packages) the right compiler
[01:09:18] <koobs> right, so i can declare that a port needs c++11-lang or c++11-lib
[01:09:24] <koobs> without an issue
[01:09:32] <huon> (I don't know the C requirements)
[01:09:39] <koobs> yeh, that would be super good to doc
[01:09:53] <huon> acrichto might have a better idea
[01:09:57] <koobs> Rust uses/aims for C standard <foo> and uses <bar> feature/extensions
[01:10:22] <huon> I believe all the non-LLVM non-Rust code is in src/rt
[01:10:24] <acrichto> koobs: yeah Rust itself doesn't need a very recent C/C++ compiler, but LLVM needs C++11
[01:10:24] <koobs> I wont get on your back today about the build system :) leave that for another day
[01:10:36] *** Mutabah_ is now known as Mutabah
[01:10:40] <koobs> acrichto: right. the distinction in *that* dependency is key
[01:11:01] <koobs> since one cannot have llvm/clang installed without having satisfied its dependencies, rust should just go
[01:11:20] <koobs> secondly, using system clang/llvm/whatever is going to be key
[01:11:30] <koobs> and i havent yet figured out how to do that, even when overriding CC
[01:12:20] *** Quits: skeuomorf (skeuomorf@moz-ij1.21q.32.197.IP) (Ping timeout: 121 seconds)
[01:13:41] <koobs> id start with declaring the need for llvm rather beyond clang/gcc xy+
[01:13:52] <koobs> its a dependency, whether bundled or otherwise
[01:14:08] <koobs> i think thats what threw me off
[01:17:26] <koobs> acrichto bstrie any clue what specific features are used, or reasons for needing gcc47 specifically ?
[01:19:02] <koobs> __atomic ?
[01:20:02] <acrichto> koobs: gcc 47 was just the first compiler that has the full c++11 support llvm needs I think
[01:20:08] <acrichto> koobs: I dunno about what specific features LLVm uses
[01:20:19] <koobs> acrichto: right
[01:20:36] <koobs> acrichto: can you clarify for me the "what rust needs" from a compiler aspect ?
[01:20:48] <acrichto> koobs: a C compiler
[01:20:53] <acrichto> basically that's it
[01:20:53] <koobs> right.
[01:21:00] <acrichto> no particular requirements
[01:21:03] <koobs> hmm.
[01:21:07] <koobs> this is going to be fun
[01:21:14] <aatch> preferably from this decade.
[01:21:19] <koobs> once im clear on things ill submit a PR for the building from source doco
[01:21:26] <koobs> aatch: can i read not 4.2.1? ;)
[01:21:39] <koobs> i tell you what, i'll test it across the gcc spectrum
[01:21:42] <koobs> and see what happens
[01:21:57] <koobs> since ports/packages on most if not all OS's will handle what LLVM needs in terms of dependencies
[01:22:12] <koobs> so the next question is, how do i stop rust using the bundled llvm bits
[01:22:13] <aatch> koobs, I dunno. I'm just assuming that whatever non-Rust, non-LLVM code we have probably won't compile with a C compiler from the 80's
[01:22:27] <koobs> aatch: any specific non-rust non-llvm code?
[01:22:30] <koobs> in mind
[01:22:41] <koobs> i dont know what i dont know about rust yet :)
[01:22:49] <koobs> "dragons be here"
[01:22:51] <aatch> koobs, I don't even know what that code is. I'm just rambling.
[01:22:58] <koobs> aatch: understood
[01:23:08] <koobs> what other external libs/vendored code is there?
[01:23:14] <koobs> in the dist tarballs/repo's/whatever
[01:23:57] <aatch> koobs, as for using a non-bundled LLVM, it can be done, but we actually use a patched version of LLVM right now.
[01:24:30] <koobs> i hear that are perf changes only, and that rust ought to be llvm (non-fork) compat
[01:24:41] <koobs> that they are*
[01:24:48] <aatch> koobs, I'm not sure of the guarentees around that though.
[01:24:53] <koobs> sure
[01:25:24] <koobs> are you going to fork llvm long term, or is the vendored code just a holding area for upstreaming because things cant wait?
[01:25:57] <aatch> koobs, dunno, I can't remember exactly the status of the stuff that isn't upstreamed already.
[01:26:14] <koobs> aatch: my guess is no though, again long-term
[01:26:21] *** Quits: mib_k0r6wu (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[01:26:38] <koobs> perhaps something that ought to be considered if rust wants to get the kind of exposure/traction i imagine it wants :)
[01:26:44] <koobs> again long term
[01:26:44] <aatch> zwarich, is it your changes that are still different from upstream? Or did they get merged.
[01:27:41] <zwarich> aatch: my changes, didn't get merged, they also didn't get the full case they were intended to handle
[01:28:02] <zwarich> which was eliminating null checks with zippered iterators
[01:28:09] <zwarich> zip'd rather
[01:29:43] *** Joins: skeuomorf (skeuomorf@moz-ij1.21q.32.197.IP)
[01:30:07] <aatch> zwarich, ah. I might see what the difference is without your changes if I get some time (long weekend coming up...).
[01:31:07] <zwarich> aatch: presumedly not much
[01:31:36] *** Quits: _Vi (vi@moz-bbs.vhj.131.104.IP) (Ping timeout: 121 seconds)
[01:32:33] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[01:32:40] <aatch> zwarich, at the very least being able to definitively say that building with the system LLVM (of an appropriate version) will always work would be nice.
[01:33:02] <koobs> aatch: at least then youll get feedback from users/consumers
[01:34:40] <aatch> koobs, yeah, I just don't know what our current guarantees are around using a non-bundled LLVM.
[01:35:03] <koobs> aatch: that benefits are there for not making guarantees?
[01:35:21] <koobs> if that is actaully what would be achieved by saying "you should be able to use system llvm"
[01:35:26] <bluss>  in-place.
[01:35:26] <bluss> To summarise, the algorithm is the classic quicksort, but essentially depth-first; upon each call to next it does the work necessary to find the next item then pauses the state until the next call to next.
[01:35:40] <aatch> koobs, for a while we had patches that were necessary for the compiler.
[01:35:43] <bluss> that's https://github.com/benashford/rust-lazysort 
[01:35:48] <aatch> koobs, but I don't think that's true anymore.
[01:35:55] <aatch> bluss, wrong channel?
[01:36:13] <bluss> aatch: should have been #rust.
[01:36:30] <aatch> bluss, given the discussion in there right now, I sorta guessed.
[01:36:31] <koobs> aatch: *nods*, but a productive collaboration with projects whos software you depend on is the best thing you can do for long term sustainability
[01:36:42] <koobs> aatch: much less to worry about locally
[01:36:50] <aatch> koobs, agreed.
[01:37:23] <koobs> aatch: and, a world of difference grokking rust and how to package it, create an ecosystem for it, etc
[01:37:43] <koobs> should be as easy as you make it for developers, but for everyone else
[01:39:14] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[01:39:35] <aatch> koobs, that said, I recall there being a debian package and debian has some pretty restrictive rules about packaging, IIRC.
[01:39:47] <koobs> aatch: im reading it and fedora's bug notes on it
[01:39:58] <koobs> aatch: much magling was/is necessary
[01:40:02] <koobs> mangling*
[01:40:41] <koobs> aatch: personally id start by gently removing all the hand-holdy bits of ./configure that infer/imply/force/override things (specifically with regard to compilers/flags/envs)
[01:41:13] <gus> aatch: Indeed, it is here: https://packages.debian.org/sid/rustc
[01:41:17] <koobs> if the docs say you need X, and X is indeed required, then all of that ought not be necessary, and build wont build
[01:41:52] <koobs> aatch: we have rust 1.0.0 in ports, but it apparently doesnt build on 9.x, and is limited to amd64
[01:41:56] <koobs> not sure why
[01:42:00] *** Quits: c74d (c74d3a4ebb6@moz-0ersgu.oc.cox.net) (Ping timeout: 121 seconds)
[01:42:01] <koobs> hence all this discovery
[01:42:17] *** Joins: c74d (c74d3a4ebb6@moz-kfb9ol.mggc.hibn.4404.2002.IP)
[01:44:04] <gus> koobs: Can you repeat whatever you're trying to work out?  I'm trying to read the scrollback, but I can probably just give you any answers directly for what we found during the Debian packaging.
[01:44:15] *** Joins: _Vi (vi@moz-bbs.vhj.131.104.IP)
[01:44:26] <koobs> gus, will do , give me a tick
[01:45:10] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[01:48:28] *** Quits: _Vi (vi@moz-bbs.vhj.131.104.IP) (Ping timeout: 121 seconds)
[01:49:26] *** Joins: _Vi (vi@moz-bbs.vhj.131.104.IP)
[01:54:44] *** Joins: kkoski (kkoski@moz-1av.n0d.255.50.IP)
[01:59:27] *** Quits: jga (jga@moz-kma.t1q.244.77.IP) (Ping timeout: 121 seconds)
[02:00:06] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[02:00:20] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[02:14:34] *** chmanchester is now known as chmanchester|afk
[02:16:51] *** Quits: ytain (ytain@moz-ffpck2.dsl.teksavvy.com) (Quit: Textual IRC Client: www.textualapp.com)
[02:17:07] *** Joins: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net)
[02:17:07] *** ChanServ sets mode: +o pcwalton
[02:18:16] *** Quits: swgillespie (swgillespie@moz-1i5.3un.220.167.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[02:20:06] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[02:21:27] *** Quits: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se) (Ping timeout: 121 seconds)
[02:24:52] *** Quits: kkoski (kkoski@moz-1av.n0d.255.50.IP) (Connection closed)
[02:26:19] <frewsxcv> https://www.youtube.com/watch?v=Fx304EfqtMo&feature=iv&src_vid=9R3iEBjOrwY&annotation_id=annotation_4165940309
[02:26:25] <frewsxcv> rob pike speaking right now at gophercon
[02:27:35] *** Quits: skeuomorf (skeuomorf@moz-ij1.21q.32.197.IP) (Ping timeout: 121 seconds)
[02:31:08] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[02:35:33] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[02:37:49] *** Joins: rumpler (Mibbit@moz-juv.9o3.252.72.IP)
[02:39:22] *** Quits: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net) (Client exited)
[02:48:46] *** Joins: bkearns (Adium@moz-2l9j31.ca.comcast.net)
[02:51:16] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[02:56:43] *** Quits: zz_kimundi (kimundi@moz-0meql0.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[02:57:11] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[02:58:02] *** Joins: zz_kimundi (kimundi@moz-siarqd.dip0.t-ipconnect.de)
[02:58:03] *** zz_kimundi is now known as kimundi
[03:00:17] *** Joins: p1start (p1start@moz-nftjhe.org)
[03:00:20] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[03:00:28] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[03:00:29] *** Quits: rumpler (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[03:00:30] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[03:10:02] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[03:13:30] *** Joins: capella-s3 (capella-s3@moz-vcqob4.res.rr.com)
[03:20:05] <koobs> gus: my understanding is thus far is rust depends on a) llvm (which wants implicit c++11 support) b) c compiler
[03:20:30] <koobs> gus: ive submitted a PR which fixes allowing for user-flag overrides (this case CC)
[03:21:03] <koobs> gus: im currently at, how do i stop it from using bundled llvm
[03:21:57] *** Joins: summerlight_ (summerlight@moz-99k.2mj.130.121.IP)
[03:27:51] <Havvy> The bundled LLVM has required patches.
[03:29:24] <Luqman> Havvy: well, afaik those patches aren't necessary. just some optimizations
[03:29:37] <Luqman> but you probably can't build with upstream past a certain revision
[03:30:05] <Luqman> if you want to try, there's a configure flag you can pass --llvm-root or something
[03:35:18] *** Joins: semarie (semarie@moz-tlq7ff.arbitrary.ch)
[03:36:19] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[03:36:57] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[03:39:04] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[03:41:29] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[03:44:41] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[03:46:33] *** Joins: garming (garming@moz-gjqnss.xtra.co.nz)
[03:48:39] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[03:52:32] <garming> nrc: finally some free time. have you got some detail on the callback structure that would help me?
[03:53:22] <nrc> garming: hi! DId you read about closures?
[03:54:00] *** Joins: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net)
[03:54:06] <nrc> I expect you will store a ref to the callback in the resolver as Option<Box<Fn<...>>>
[03:54:20] <nrc> where ... are the types of the args you want to pass to the callback
[03:54:35] <nrc> er, Option<Box<Fn<...> -> bool>>
[03:54:43] <nrc> because you want to return a bool, right
[03:54:45] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[03:55:09] <garming> nrc: i know some of the closure info mentioned, but i'll read more deeply from the article you sent. 
[03:55:30] <garming> nrc: so the args would be - the different types of nodes? 
[03:55:49] <nrc> garming: I thought you could pass one of these: https://github.com/rust-lang/rust/blob/master/src/libsyntax/ast_map/mod.rs#L105
[03:56:14] <garming> nrc: and match against them in the callback 
[03:56:17] <nrc> so, Option<Box<Fn<map::Node> -> bool>>
[03:56:24] <nrc> garming: right
[03:56:41] <nrc> garming: you'll have to see hwo that works out in practice, of course
[03:56:45] <nrc> *how
[03:57:08] <garming> nrc: i'll see how i go. today and tomorrow should be my 'rust time'
[03:57:38] <nrc> great. I should be online for another few hours and most of tomorrow - AMA!
[03:59:35] <Manishearth> nrc: what is the air-speed velocity of an unladen swallow?
[04:00:30] <nrc> african or european?
[04:00:53] <Manishearth> :D
[04:02:36] <Havvy> Indian
[04:03:37] <ChrisMorgan> acrichto: you’re back around now, I gather?
[04:04:16] <Manishearth> Havvy: (It was a Monty Python reference)
[04:04:30] <Havvy> I know.
[04:04:35] <Manishearth> we have a nonbeleiver amongst us. Fetchez la vache!
[04:05:00] * Havvy coconut shell gallops away.
[04:05:11] <Manishearth> hahaha
[04:05:19] <Manishearth> "that's not even a horse!"
[04:06:16] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[04:12:56] <acrichto> ChrisMorgan: I am indeed!
[04:14:23] *** Quits: tamird (textual@moz-gg3hct.res.rr.com) (Quit: My Mac has gone to sleep. ZZZzzz…)
[04:14:58] <ChrisMorgan> acrichto: good, can we try https://github.com/rust-lang/rust-playpen/pull/120?
[04:16:20] *** Quits: capella-s3 (capella-s3@moz-vcqob4.res.rr.com) (Quit: Talk atcha later)
[04:16:40] *** Joins: capella-s3 (capella-s3@moz-vcqob4.res.rr.com)
[04:16:52] *** Quits: capella-s3 (capella-s3@moz-vcqob4.res.rr.com) (Quit: Talk atcha later)
[04:17:10] *** Joins: capella-s3 (capella-s3@moz-vcqob4.res.rr.com)
[04:17:21] <acrichto> ChrisMorgan: sure!
[04:18:04] *** Joins: tamird (textual@moz-gg3hct.res.rr.com)
[04:18:25] <acrichto> ChrisMorgan: hm, this defaults the "test" parameter to True?
[04:18:57] <ChrisMorgan> acrichto: that’s… not a good idea.
[04:19:10] <acrichto> ChrisMorgan: in web.py:62
[04:19:24] <ChrisMorgan> That wouldn’t affect play.rl.o, of course, only other consumers, but it’s definitely not what I meant!
[04:23:44] <ChrisMorgan> acrichto: fix’t.
[04:23:58] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[04:24:10] *** Quits: ebfull (ebfull@moz-2hf06a.co.comcast.net) (Ping timeout: 121 seconds)
[04:24:34] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[04:24:50] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[04:25:17] <acrichto> ChrisMorgan: hm, doesn't seem to work?
[04:25:30] <acrichto> https://play.rust-lang.org/?gist=ee58c99997bef4a747e9&version=stable
[04:25:46] <gus> koobs: sorry, I disappeared before you replied.   rustc currently builds/works with unmodified upstream LLVM >=3.6 (rc4)
[04:26:06] * ChrisMorgan puzzles about what is happening, for it is working for him locally
[04:26:36] <ChrisMorgan> acrichto: is evaluate.sh not getting updated on the server?
[04:26:41] <ChrisMorgan> That’s the main thing I can think of.
[04:26:42] <gus> koobs: if you're packaging rust you want to get familiar with ./configure script and the args it supports.  You want --llvm-root=/usr/lib/llvm-3.6 (or whatever) to use the system LLVM.
[04:26:50] <acrichto> ChrisMorgan: nah it's there
[04:27:46] <ChrisMorgan> acrichto: updated in each sandbox and containing the appropriate $2?
[04:28:26] <acrichto> lemme re-run init.sh
[04:28:32] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[04:29:01] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[04:29:06] * ChrisMorgan has been running it locally with a simple copy of bottle.py and a trivial wrapper instead of `playpen` that doesn’t bother about sandboxing or multiple channels of rustc
[04:30:21] <gus> koobs: Debian build-deps for rustc are here (See the Build-Depends and Build-Depends-Indep): https://alioth.debian.org/plugins/scmgit/cgi-bin/gitweb.cgi?p=pkg-rust/rust.git;a=blob;f=debian/control;h=3ee47b3c0e0cb8ff3303b1cce903aed489af85f9;hb=HEAD
[04:30:58] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[04:31:10] <gus> koobs: (that doesn't include the default "build-essential" packages - make/gcc/g++/libc-dev - that sort of thing)
[04:34:20] *** Quits: semarie (semarie@moz-tlq7ff.arbitrary.ch) (Ping timeout: 121 seconds)
[04:35:04] <gus> koobs: CC/CXX/CFLAGS/CXXFLAGS env vars are already picked up and used by ./configure (see 'grep envopt ./configure').  I have a patch to add LDFLAGS, but it needs a bit of further work to support cross-compiling properly before I send it upstream.
[04:35:55] *** Quits: summerlight_ (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[04:37:22] <ChrisMorgan> acrichto: --test is clearly not getting through to rustc when deployed, and evaluate.sh is the main place I can see where that could happen. On my own machine it *is* working.
[04:38:34] <koobs> gus: i didnt see that CXX worked
[04:38:36] <koobs> hmm
[04:39:01] *** Joins: semarie (semarie@moz-tlq7ff.arbitrary.ch)
[04:39:45] <gus> I don't think I've tried overriding CXX, so perhaps it doesn't work in practice (but the intention is there :P )
[04:42:10] <koobs> gus, indeed :D
[04:46:46] *** Quits: tamird (textual@moz-gg3hct.res.rr.com) (Quit: My Mac has gone to sleep. ZZZzzz…)
[04:51:06] *** Quits: playbot (playbot@moz-1vk5qd.compute.amazonaws.com) (Connection closed)
[04:51:06] *** Quits: playbot-mini (playbot-min@moz-1vk5qd.compute.amazonaws.com) (Connection closed)
[04:51:26] <acrichto> ChrisMorgan: alright that was it
[04:51:37] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[04:51:45] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[04:51:52] <ChrisMorgan> Any idea why it didn’t happen?
[04:52:03] <acrichto> I have to manually run init.sh
[04:52:10] <acrichto> and the VM just ran out of disk space
[04:52:16] <ChrisMorgan> Ick!
[04:53:12] *** Joins: playbot-mini (playbot-min@moz-1vk5qd.compute.amazonaws.com)
[04:53:12] *** Joins: playbot (playbot@moz-1vk5qd.compute.amazonaws.com)
[04:53:34] <acrichto> playbot: 3
[04:53:35] -playbot- 3
[04:53:52] <ChrisMorgan> playbot: VERSION
[04:53:54] -playbot- "rustc 1.0.0 (a59de37e9 2015-05-13) (built 2015-05-14)"
[04:53:58] * ChrisMorgan prefers that check
[04:55:47] <koobs> gus: rust depends on libffi?
[04:56:30] <koobs> gus; and why not a declared dep on llvm?
[04:56:43] *** Joins: ebfull (ebfull@moz-2hf06a.co.comcast.net)
[04:57:48] *** Joins: c74d3 (c74d3a4ebb6@moz-0ersgu.oc.cox.net)
[04:57:54] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[04:59:26] *** Quits: c74d (c74d3a4ebb6@moz-kfb9ol.mggc.hibn.4404.2002.IP) (Ping timeout: 121 seconds)
[04:59:35] *** c74d3 is now known as c74d
[05:01:39] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[05:01:48] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[05:02:33] *** Quits: aatch (james@moz-8r6eer.orns.ubhm.e000.2406.IP) (Connection closed)
[05:03:13] *** Quits: ebfull (ebfull@moz-2hf06a.co.comcast.net) (Connection closed)
[05:05:17] <nrc> name mangling question: _ZN4iter8Iterator3sum12closure.1157E
[05:05:28] <nrc> where does the .1157 come from?
[05:06:17] <gus> koobs: these are excellent questions :/
[05:06:25] <koobs> gus: <3
[05:06:36] <koobs> gus: :D
[05:06:45] <gus> koobs: several rust .so's seem to have linked against libffi - I'll need to dig further to find out exactly what/why
[05:06:53] <koobs> yah, twould be interesting
[05:06:59] <koobs> certainly if only from a doco PoV
[05:07:14] <koobs> ill see what my build of rust (just with llvm installed) says it links with
[05:07:16] <nrc> it's not a nodeid, although the 57 might be
[05:08:00] *** Joins: mib_kcdj7t (Mibbit@moz-juv.9o3.252.72.IP)
[05:08:01] <sfackler> acrichto: is someone already implementing socket timeouts?
[05:08:09] <acrichto> sfackler: not yet
[05:08:18] <gus> koobs: It looks like LLVM is linked statically, which is not what I expected.
[05:08:59] <gus> koobs: trying to dig back through the output from the last build, but I can't find the relevant link line.
[05:09:11] <koobs> good times
[05:09:13] <koobs> :d
[05:09:19] <gus> koobs: the binary clearly works despite me not having the llvm runtime libs installed on this particular machine.
[05:09:24] <koobs> ill see what this build does by default
[05:09:28] <gus> (so it must be statically linked for some reason)
[05:09:30] <koobs> sure, but works is the minimum requirement :D
[05:09:47] <koobs> i do recall something in ./configure that mentions a static build (whether default or not i cant recall)
[05:10:13] <koobs> gus: am i correc tin assuming debian does shared by default, then packages stat seperately?
[05:11:01] <geofft> ... what's a clownshoe? Is that just a name for a double-underscore? 
[05:11:55] *** Quits: mib_kcdj7t (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[05:13:13] *** Quits: hyunsik (hyunsik@moz-3qgjl9.ca.comcast.net) (Connection closed)
[05:16:10] <gus> koobs: this is doing whatever the rust build process is producing. We aren't forcing static or dynamic.
[05:16:26] <sfackler> geofft: I believe so, yeah
[05:16:26] <gus> koobs: looks like the ffi dependency is coming in from llvm, fwiw.
[05:18:08] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[05:18:17] <gus> .. and it looks like `llvm-config --libs` will indeed lead to static linking in LLVM.
[05:18:43] <gus> koobs: I might have to look at how the Debian LLVM is built.
[05:19:15] *** Quits: doomrobo (doomrobo@moz-7rfp9f.res.rr.com) (Quit: Leaving)
[05:21:11] <koobs> gus: interesting
[05:21:18] <koobs> i noted the use of llvm-config
[05:21:24] <koobs> may not be the best way
[05:22:40] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[05:23:15] *** Quits: capella-s3 (capella-s3@moz-vcqob4.res.rr.com) (Quit: Talk atcha later)
[05:23:18] *** Joins: capella-s3 (capella-s3@moz-vcqob4.res.rr.com)
[05:24:12] *** Joins: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com)
[05:32:41] *** Quits: O01eg (o01eg@moz-i6idov.6kf4.3egh.2698.2a02.IP) (Client exited)
[05:33:19] <koobs> http://llvm.org/docs/Packaging.html
[05:33:23] <koobs> for rust, would be awesome.
[05:34:47] <koobs> gus: from ^ page:
[05:34:50] <koobs> --enable-libffi
[05:34:52] <koobs>     Depend on libffi to allow the LLVM interpreter to call external functions. 
[05:34:58] <gus> yep, just saw that.
[05:35:04] <koobs> rust may be implicitly doing it
[05:35:18] <koobs> so no explicit depends (but rather via llvm)
[05:35:37] <koobs> gus: isolation test, llvm without ffi, see what rust does
[05:36:35] <gus> there doesn't seem to be an obvious llvm-config flag that influences static vs dynamic, and the --libs output lists many LLVM components that only appear to have static libs available.
[05:36:43] <koobs> seems our llvm ports dont have that enabled (or an option for it)
[05:36:53] <koobs> gus: sounds reasonable
[05:37:37] <gus> I don't know if that's normal or some quirk of the Debian LLVM build process.  I think we'd need --libs to return the single "-lLLVM-3.6" for shared linking to happen.
[05:37:43] *** Joins: ptalbot (ptalbot@moz-j4gnuh.fbx.proxad.net)
[05:38:10] <koobs> presumably
[05:38:21] <gus> I might try hacking the rust build config to see what happens (but not now, since that's 90+ minutes of crunching to see the results)
[05:38:31] <koobs> gus: ill report back what i find/identify at our end
[05:38:40] <koobs> yah, thats the only issue ;)
[05:38:56] <koobs> gus: can debian have multiple llvm installed concurrently?
[05:39:08] <gus> Some 'advice on packaging rustc' would be great, just so we don't go off into separate directions.
[05:39:32] <gus> koobs: yes, provided they have different package names and file paths - which they do.
[05:39:37] <koobs> gus: certainly getting clear on deps, and "improving" the build system to honour user env better would be a good start
[05:39:41] <koobs> right now its getting in the way
[05:39:47] <gus> you need to specify CC?
[05:40:13] <koobs> our cc *is* clang
[05:40:23] <koobs> not pretty results :)
[05:40:26] <koobs> but, beyond that
[05:40:38] <gus> huh. You might need to hack command line flags as well then.
[05:40:45] <koobs> im afraid of that.
[05:40:58] <koobs> but now that i can *apparently* peice out llvm (system build)
[05:41:02] <koobs> it might bypass some fluff/crap
[05:41:26] <gus> fwiw, passing RUSTFLAGS='-C link-args="-Wl,-z,relro"' through ./configure and build seems to actually work.
[05:41:47] <koobs> gus alternative to CFLAGS if theres a problem?
[05:42:28] <gus> koobs: "luckily" there's only a small amount of C in the rustc source (once you remove LLVM).
[05:43:06] <koobs> \o/
[05:43:21] <koobs> ill throw gcc 4.2.1 at it and see how it goes :D
[05:43:37] <geofft> acrichto: can I depend on private libstd things in a test? 
[05:43:51] *** Quits: bjz (bjz@moz-4cc8qn.bigpond.net.au) (Connection closed)
[05:44:09] <acrichto> geofft: you'd have to put it in libstd to do that
[05:44:27] <koobs> gus: curl and git should be removes from the deps list too, red herrings
[05:44:30] <gus> koobs: there's a couple of small vendored libraries (jemalloc, libbacktrace) and compiler-rt.
[05:44:45] <koobs> gus: jason evans is a bsd boy, so thats fine :)
[05:45:06] <gus> koobs: yeah, they're mostly to keep the ./configure script happy.  I can remove them but I'd need to patch ./configure to not freak out.
[05:45:06] <geofft> oh, does #[test] in libstd just work? do I not have to put things in the external test-runner? 
[05:45:20] <koobs> i'll see how it goes, worst case, i have those libs to reference in freebsd ports, so porting/fixes will have been done there
[05:45:32] <koobs> gus: yeh. that sucks :D
[05:45:41] <acrichto> geofft: yeah that'll work
[05:46:03] <acrichto> geofft: although signal masks being global state means it may not be a good candidate
[05:46:10] <koobs> gus configure feels like an install.sh extension of curl |sh
[05:46:14] <acrichto> geofft: you can feel free to add a stub function to rust_test_builtins.c
[05:46:17] <gus> koobs: meh, they're tiny compared to some of the rest of what gets pulled in at build-time (latex).
[05:46:26] <koobs> gus dont even :)
[05:46:44] <koobs> ===>>> Installation of devel/llvm36 (llvm36-3.6.0) complete
[05:46:51] <koobs> \o/
[05:46:55] <koobs> 26 mins ish
[05:46:55] <geofft> signal masks are per-thread with pthread_sigmask, so I _think_ I can safely mask, spawn, store the result of the test, unmask, and report it 
[05:47:17] <geofft> so I might try this. 
[05:47:23] <gus> I'm pretty happy to pull in all sorts of things at build time, so long as they don't leak through into run-time deps on downstream users.
[05:47:24] <acrichto> geofft: ah yeah that sounds fine
[05:47:51] <koobs> depending on llvm feels weird.
[05:47:58] * koobs shakes off the feeling for now
[05:48:19] <Manishearth> steveklabnik: btw, lots of feedback on the book here http://edunham.net/2015/05/07/starting_rust.html
[05:49:35] <koobs> gus: aside from the build time dep on llvm for rust, are there any run time deps ?
[05:49:40] <koobs> llc36, etc ?
[05:49:53] <gus> none.
[05:50:12] <gus> (other than - ideally - a dependency on the llvm shared library, as you pointed out)
[05:50:27] <koobs> right
[05:50:30] <koobs> danke
[05:52:35] <koobs> gus: libclang.so? its the only one i can see our llvm port/package install
[05:52:43] <koobs> though it installs the stat lib too
[05:53:05] <koobs> oops wait.
[05:53:12] <koobs> wrong port :D
[05:53:26] <koobs> libLLVM-3.6.so
[05:53:28] <koobs> rog.
[05:54:14] *** Joins: summerlight_ (summerlight@moz-99k.2mj.130.121.IP)
[05:54:40] *** Joins: James (quassel@moz-739rgr.range86-148.btcentralplus.com)
[05:55:15] <Manishearth> WindowsBunny: success on building with mingw
[05:55:20] <Manishearth> I did a reconfigure and it works
[05:55:23] <Manishearth> thanks!
[05:55:54] <Manishearth> I don't know what I'm going to do with this though. Much prefer hacking on my linux box. I have vim and sublime here but it's ... not the same
[05:56:05] *** Quits: ptalbot (ptalbot@moz-j4gnuh.fbx.proxad.net) (Ping timeout: 121 seconds)
[05:56:38] <gus> koobs: oh, and I can confirm that the rust Makefiles work with "-j$n" ;)
[05:57:06] <koobs> \o/
[05:57:12] <koobs> i think were jobs_safe by default
[05:57:19] <koobs> not explicit allow -jn
[05:57:23] <XMPPwocky> although, afaik, it breaks on windows
[05:57:26] <koobs> thats our expectation at least :)
[05:57:33] <XMPPwocky> with more than 2 jobs 
[05:58:07] <gus> XMPPwocky: I'll be sure to pay that the appropriate attention when there's a Debian port to Windows ;)
[05:58:09] <huon> cmr: https://crates.io/crates/ioctl-rs
[05:58:47] <koobs> *tests llvm-root*
[05:58:49] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[05:59:11] <koobs> configure: not reconfiguring LLVM, external LLVM root
[05:59:13] <koobs> spose thats good
[05:59:33] *** Quits: genbattle (genbattle@moz-4v0.gkd.16.182.IP) (Ping timeout: 121 seconds)
[05:59:51] <koobs> hmm.
[05:59:58] <koobs> llvm-config vs llvm-config36
[06:01:25] *** Joins: p1start (p1start@moz-nftjhe.org)
[06:03:02] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[06:03:06] <koobs> progress.
[06:03:39] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[06:05:43] *** Joins: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP)
[06:08:54] *** Quits: Diggsey (diggsey@moz-97o4tk.dsl.pipex.com) (Ping timeout: 121 seconds)
[06:10:34] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[06:12:16] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[06:14:47] *** Joins: rkruppe_ (chatzilla@moz-3nj.rnu.131.95.IP)
[06:16:00] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[06:16:12] *** rkruppe_ is now known as rkruppe
[06:16:50] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[06:25:39] *** Joins: dinfuehr (dinfuehr@moz-c25.u8s.112.91.IP)
[06:26:29] *** Joins: ebfull (ebfull@moz-2hf06a.co.comcast.net)
[06:27:28] *** Joins: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de)
[06:28:59] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Quit: It's a joke, it's all a joke.)
[06:30:43] *** Joins: laumann (thomas@moz-n9e72h.0.fullrate.dk)
[06:35:42] *** Quits: James (quassel@moz-739rgr.range86-148.btcentralplus.com) (Ping timeout: 121 seconds)
[06:40:14] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[06:48:13] *** Quits: garming (garming@moz-gjqnss.xtra.co.nz) (Quit: ChatZilla 0.9.91.1 [Firefox 38.0.5/20150521175336])
[06:48:44] *** Quits: akawaka (akawaka@moz-0bb8q8.irvnca.sbcglobal.net) (Ping timeout: 121 seconds)
[06:49:08] *** Joins: akawaka (akawaka@moz-0bb8q8.irvnca.sbcglobal.net)
[06:51:49] *** Quits: Havvy (Havvy@moz-2v0ao2.5euu.k9bm.0007.2601.IP) (Connection closed)
[06:52:48] <koobs> *still building*
[06:55:41] *** Quits: semarie (semarie@moz-tlq7ff.arbitrary.ch) (Quit: WeeChat 1.1)
[06:56:23] *** Joins: squiddy (squiddy@moz-md4.pm3.19.178.IP)
[06:57:44] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[06:59:43] *** Joins: rkruppe_ (chatzilla@moz-3nj.rnu.131.95.IP)
[07:00:00] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[07:00:07] *** rkruppe_ is now known as rkruppe
[07:03:39] *** Quits: jbomo (dkd@moz-uol4mm.fios.verizon.net) (Quit: )
[07:06:24] <koobs>   Rust is ready to roll
[07:06:25] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[07:06:25] <koobs> oh good.
[07:07:38] <koobs> gus: https://dpaste.de/pJbg/raw
[07:07:46] *** Quits: Astrum|Lap (Astrum|Lap@moz-skcefh.co.comcast.net) (Client exited)
[07:07:53] <koobs> not installed, hence not founds 
[07:08:25] <koobs> this is interesting, since base has cc is clang (no gcc installed)
[07:09:04] *** Joins: munksgaard (munksgaard@moz-478pev.u.parknet.dk)
[07:10:58] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[07:12:59] <gus> koobs: that's expected, since you haven't installed the libraries yet.
[07:13:11] <gus> it needs LD_LIBRARY_PATH at this point.
[07:14:14] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[07:15:32] <gus> koobs: I see you still have libgcc_s.so.1 installed, which is the only runtime-remnant a binary should have from being built with gcc aiui.
[07:19:00] *** Joins: ptalbot (ptalbot@moz-jaf.h4a.102.129.IP)
[07:19:09] *** Joins: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se)
[07:22:03] <nrc> when are closures zero-sized?
[07:22:52] <Luqman> nrc: when there are no captures?
[07:24:17] *** Quits: nham (nham@moz-lglsfe.il.comcast.net) (Quit: leaving)
[07:25:11] <huon> (and by-value captures of zero-sized types)
[07:26:15] <nrc> thanks!
[07:27:10] *** Joins: zmack (zmack@moz-htpein.home.aster.pl)
[07:31:08] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[07:31:27] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[07:31:30] *** Quits: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[07:31:57] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[07:32:12] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[07:38:46] <eddyb> nrc: is this about making closures coercible to fn pointers those cases?
[07:39:12] <nrc> eddyb: no, I'm trying to get parallel codegen working again
[07:39:32] <nrc> we're doing something wrong with llvm types and linkage for closures
[07:39:43] <nrc> not sure exactly what or why
[07:40:00] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[07:45:11] *** Quits: Kxepal (Miranda@moz-fb7sh5.pppoe.mtu-net.ru) (Ping timeout: 121 seconds)
[07:45:35] *** Joins: rkruppe_ (chatzilla@moz-3nj.rnu.131.95.IP)
[07:46:00] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[07:46:07] *** rkruppe_ is now known as rkruppe
[07:46:44] *** Joins: Kxepal (Miranda@moz-9ru7r8.pppoe.mtu-net.ru)
[07:48:19] <nrc> eddyb, Luqman, huon: anyone know where the 'names' of closures come from? Why is one called `closure:1155` and another `closure:1153` etc.?
[07:49:37] <eddyb> nrc: IDs?
[07:49:52] <eddyb> and/or LLVM appending integers to keep things distinct
[07:50:11] <eddyb> two instances of foo1 will become foo1 and foo11 or something like that
[07:50:28] <nrc> I think it is earlier than llvm - ast_map::with_path gives these names
[07:50:57] <p1start> The names in error messages are just the file/line where the closures were defined
[07:51:02] <nrc> I suspect something to do with NodeIds, but the node id of the closure inquestion is 51
[07:51:42] <nrc> this isn't from the error message, it is the 'name' which we mange to get the symbol name
[07:52:20] *** Quits: Kxepal (Miranda@moz-9ru7r8.pppoe.mtu-net.ru) (Connection closed)
[07:54:20] <huon> nrc: is it a line number?
[07:54:30] *** Joins: nodweber_ (nodweber@moz-knt.fgq.178.5.IP)
[07:54:38] <nrc> huon: nope, line is 14
[07:54:38] *** Joins: genbattle (genbattle@moz-r09mao.xtra.co.nz)
[07:54:44] *** Joins: imperio (Mibbit@moz-aibeqg.fbx.proxad.net)
[07:57:29] <huon> nrc: I wonder if it's expansion
[07:57:49] *** Quits: mtsr (mtsr@moz-5r1gp7.yourbnc.co.uk) (Connection closed)
[07:57:59] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[07:58:02] <huon> line ~315 of syntax/ext/expand.rs of my current checkout has stuff with ExprClosure
[07:58:03] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[07:58:32] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Client exited)
[07:58:41] <huon> hm, actually it's not at all obvious to me where names get attached
[07:58:41] * nrc looks
[07:59:50] <nrc> there is some renaming though
[07:59:57] <nrc> lets look at pretty expanded...
[08:00:28] <nrc> that is not at all helpful
[08:00:34] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[08:00:36] <nrc> looks like the closure is not expanded at all
[08:00:38] *** Joins: mtsr (mtsr@moz-5r1gp7.yourbnc.co.uk)
[08:01:19] *** Parts: imperio (Mibbit@moz-aibeqg.fbx.proxad.net) ()
[08:03:26] <eddyb> what would it be expanded into :P?
[08:03:43] <eddyb> only typeck knows what traits a closure implements
[08:03:57] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[08:05:06] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[08:05:09] *** Quits: munksgaard (munksgaard@moz-478pev.u.parknet.dk) (Ping timeout: 121 seconds)
[08:05:15] <eddyb> nmatsakis: here's my input on the matter. it has certain implications for generic impls of [T; N] and maybe associated fields
[08:05:18] <eddyb> nmatsakis: https://github.com/rust-lang/rfcs/pull/591#issuecomment-105809406
[08:06:30] *** Quits: genbattle (genbattle@moz-r09mao.xtra.co.nz) (Ping timeout: 121 seconds)
[08:07:51] <bluss> omg yes
[08:08:10] <doener> nrc: the numbers are attached via gensym_name
[08:08:19] <eddyb> doener: oh, those bloody things
[08:08:29] <eddyb> gensym is wasteful and I never went back to fix it
[08:08:33] <eddyb> it's also misused
[08:08:43] <doener> nrc: called by mangle_internal_name_by_path_and_seq via get_or_create_declaration_if_closure
[08:09:09] <eddyb> (and LLVM already produces unique numbers... for constants I didn't bother generating strings, it's not worth it)
[08:10:16] <nrc> ah, right
[08:10:19] <nrc> thanks doener!
[08:10:40] <eddyb> bluss: what :)?
[08:12:49] *** Quits: laumann (thomas@moz-n9e72h.0.fullrate.dk) (Ping timeout: 121 seconds)
[08:14:14] <bluss> eddyb: the array trait.
[08:20:00] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[08:20:30] *** Joins: Tobba (Tobba@moz-6oh.7ki.21.217.IP)
[08:27:12] *** Quits: Skyler (Skyler@moz-rv949t.sd.cox.net) (Ping timeout: 121 seconds)
[08:38:13] *** Quits: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com) (Ping timeout: 121 seconds)
[08:39:16] *** Joins: laumann (thomas@moz-vj4.hq0.225.130.IP)
[08:40:46] *** Joins: Kxepal (Miranda@moz-unuini.pppoe.mtu-net.ru)
[08:42:12] <kimundi> eddyb: Your comment on that sizeof thread looks interesting, but maybe you want to add an sentence describing what you actually mean with it? Right now its just a blob of code without explanation
[08:42:42] <eddyb> kimundi: it's an alternative proposal
[08:42:52] *** Joins: genbattle (genbattle@moz-r09mao.xtra.co.nz)
[08:42:58] <kimundi> I'd write that there then :)
[08:43:03] <eddyb> kimundi: if that's not obvious, I've failed :/
[08:43:18] <kimundi> Sorry, but... You have then :P
[08:43:25] <huon> it might be obvious, but having a sentence or two of text is always good :)
[08:43:31] <kimundi> I only understood it because of your IRC comments and past discussions about it
[08:44:31] <Manishearth> kimundi: sizeof thread?
[08:44:49] *** Joins: munksgaard (munksgaard@moz-1f0.hq0.225.130.IP)
[08:45:08] <Manishearth> on a related note, is https://github.com/servo/servo/pull/6188 something the wider community would like?
[08:47:09] <eddyb> kimundi: better?
[08:47:26] *** Joins: nicknikolov (nicknikolov@moz-0q4.2rm.211.90.IP)
[08:47:56] *** Joins: Havvy (Havvy@moz-epv20b.wa.comcast.net)
[08:49:37] *** Joins: aepsil0n (eduard@moz-6491ha.mv2h.pepi.8071.2a02.IP)
[08:54:41] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[08:54:54] <kimundi> eddyb: Yep, thats better
[08:55:52] <eddyb> FieldsOf::<T>.foo wouldn't let you get the type. I mean, you could use some typeof trickery...
[08:56:12] <eddyb> the main issue here is that tuple fields aren't trivial to implement
[08:58:32] *** Joins: larhat (Adium@moz-egv.ld6.128.213.IP)
[08:58:54] *** Joins: arielb1 (Mibbit@moz-cmi.jfj.114.192.IP)
[08:58:54] *** Joins: skdfghksjhdg (Mibbit@moz-6ujaf4.pppoe.mtu-net.ru)
[08:59:15] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[08:59:36] *** Quits: larhat (Adium@moz-egv.ld6.128.213.IP) (Quit: Leaving.)
[09:02:00] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[09:10:35] *** Quits: skdfghksjhdg (Mibbit@moz-6ujaf4.pppoe.mtu-net.ru) (Quit: http://www.mibbit.com ajax IRC Client)
[09:11:57] *** Quits: nrc (nrc@moz-14pjgj.xtra.co.nz) (Ping timeout: 121 seconds)
[09:25:16] *** Joins: Skyler (Skyler@moz-rv949t.sd.cox.net)
[09:30:40] *** Joins: sjdhgksdf (Mibbit@moz-6ujaf4.pppoe.mtu-net.ru)
[09:32:01] *** Joins: goyox86 (textual@moz-qfs.570.70.83.IP)
[09:34:53] *** Quits: nicknikolov (nicknikolov@moz-0q4.2rm.211.90.IP) (Connection closed)
[09:35:03] *** Joins: nicknikolov (nicknikolov@moz-0q4.2rm.211.90.IP)
[09:37:32] *** Quits: nicknikolov (nicknikolov@moz-0q4.2rm.211.90.IP) (Connection closed)
[09:37:37] *** Joins: nicknikolov (nicknikolov@moz-0q4.2rm.211.90.IP)
[09:37:56] *** Quits: njn (chatzilla@moz-e6r6of.iinet.net.au) (Quit: ChatZilla 0.9.91.1 [Firefox 41.0a1/20150524155217])
[09:38:46] *** Quits: sjdhgksdf (Mibbit@moz-6ujaf4.pppoe.mtu-net.ru) (Quit: http://www.mibbit.com ajax IRC Client)
[09:45:34] *** kimundi is now known as zz_kimundi
[09:46:44] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Client exited)
[09:48:52] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[09:52:20] <cmr> huon: oh, neat.
[09:53:23] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[09:57:57] <cmr> huon: no, not as neat as I thought, that's pretty awful.
[09:58:02] *** Joins: nrc (nrc@moz-14pjgj.xtra.co.nz)
[09:58:02] *** ChanServ sets mode: +o nrc
[09:58:24] <cmr> It works though I guess.
[10:28:17] <huon> cmr: (I've got no idea what it does, I just saw the name and the dcuddeback != cmr)
[10:28:22] <cmr> ;)
[10:28:36] *** Joins: erz (erz@moz-fiq1tl.broadband.corbina.ru)
[10:30:42] *** Quits: bdero (bran@moz-lbs.91h.47.73.IP) (Ping timeout: 121 seconds)
[10:42:35] *** Quits: joh (uid13099@moz-2c7ap3.ealing.irccloud.com) (Quit: Connection closed for inactivity)
[10:43:00] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[10:46:21] *** Quits: genbattle (genbattle@moz-r09mao.xtra.co.nz) (Ping timeout: 121 seconds)
[10:46:57] *** Joins: ytain (ytain@moz-ffpck2.dsl.teksavvy.com)
[10:47:34] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[10:50:32] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[10:52:26] <eddyb> playbot: let _: &for<'a> Clone+Copy;
[10:52:28] -playbot- ()
[10:52:33] <eddyb> hah
[10:52:52] *** Joins: summerlight (summerlight@moz-99k.2mj.130.121.IP)
[10:53:23] *** Joins: tamird (textual@moz-gg3hct.res.rr.com)
[10:54:12] <eddyb> nmatsakis: where does TyPolyTraitRef(TyParamBounds) store the 'a in for<'a>? doesn't it need to be kept for name resolution?
[10:55:25] *** Quits: summerlight_ (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[10:57:09] <eddyb> whoa, it's stashed in bound_lifetimes
[11:02:44] *** Joins: vmx (vmx@moz-jqu7a2.dip0.t-ipconnect.de)
[11:02:57] *** Parts: vmx (vmx@moz-jqu7a2.dip0.t-ipconnect.de) ("Leaving")
[11:04:20] *** Quits: arielb1 (Mibbit@moz-cmi.jfj.114.192.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[11:05:16] *** Joins: ryanhiebert (ryanhiebert@moz-nsd5kl.ks.cox.net)
[11:06:02] *** Joins: jga (jga@moz-ghe.t1q.244.77.IP)
[11:09:33] *** Quits: nrc (nrc@moz-14pjgj.xtra.co.nz) (Ping timeout: 121 seconds)
[11:11:01] *** Joins: bjz (bjz@moz-4cc8qn.bigpond.net.au)
[11:14:45] *** Quits: Kingsquee (kingsley@moz-3fm07c.bchsia.telus.net) (Quit: Konversation terminated!)
[11:15:07] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[11:18:18] *** Joins: Quxxy (chatzilla@moz-efh10q.internode.on.net)
[11:18:46] *** Quits: goyox86 (textual@moz-qfs.570.70.83.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[11:18:54] *** Quits: nicknikolov (nicknikolov@moz-0q4.2rm.211.90.IP) (Connection closed)
[11:19:38] <Quxxy> Ok, I give up; given an ast::Arg, how do I get the argument's identifier?  I know I used to know this, but I've forgotten and I *think* I have to use the NodeId, but that's just a u32 and the docs are useless and I'm so lost and sad :'(
[11:20:01] <eddyb> Quxxy: what stage are you?
[11:20:10] <eddyb> or rather, which pass in the compilation
[11:20:28] <eddyb> for docs: use grep :P
[11:20:44] <Quxxy> I've run phase 2; technically, I'm actually not in rustc.  I'm trying to hack rustdoc into rust_negdnib
[11:20:56] <eddyb> uhm
[11:21:00] <Quxxy> (bindgen backwards; i.e. Rust -> C header file)
[11:21:12] <eddyb> Quxxy: what's the last pass that runs?
[11:21:20] <Quxxy> Wait, sorry; phase 3
[11:21:31] <eddyb> nobody uses numbers :/
[11:21:33] <cmr> Quxxy: you want to look at the `pat`
[11:21:52] <cmr> It's not necessarily a single identifier.
[11:21:57] <eddyb> well, yeah. keep in mind your argument might not even have identifiers
[11:22:02] <Quxxy> cmr: Ooooooh, of course; I remember being angry at this before
[11:22:32] *** Quits: jga (jga@moz-ghe.t1q.244.77.IP) (Connection closed)
[11:23:42] <Quxxy> Incidentally, *is* there a way to go from NodeId to some sort of... canonical path or anything, is there?  I ask only because it'd be *real* helpful if I could tell that a type was written as `libc::c_short`
[11:24:00] <cmr> No, you need a DefId for that.
[11:24:15] <cmr> But you want to look at resolve and the DefMap.
[11:24:31] <cmr> But that doesn're preserve typedefs like libc::c_short iirc.
[11:24:38] <Quxxy> Ok, than...oh balls
[11:24:40] <eddyb> uhm
[11:24:47] <eddyb> cmr: DefId is NodeId+crate
[11:24:50] <cmr> eddyb: yes.
[11:24:51] <Quxxy> I was kinda hoping I'd luck out on that one :P
[11:25:00] <eddyb> cmr: you mean Def :P
[11:25:05] <cmr> maybe!
[11:25:08] <cmr> it's been too long...
[11:25:17] <eddyb> Quxxy: so, what's the last pass that runs?
[11:25:29] <eddyb> Quxxy: do you have resolve and typeck?
[11:25:31] <Quxxy> Currently, `fn f() -> libc::c_short {0}` turns into `int16_t f();` which is slightly not quite what the user may have wanted
[11:25:32] <cmr> yes.
[11:25:33] <Quxxy> Yes, I believe so
[11:25:40] <Quxxy> I have enough to be able to resolve the types in external crates
[11:25:42] <eddyb> this is very important because otherwise the info is simply not there
[11:25:49] <Quxxy> I assumed so :P
[11:26:08] <eddyb> right, you can take the NodeId of the TyPath and use it to look up the def_map
[11:26:33] <eddyb> in the case of a type-def you'll have something like Def::DefTy
[11:26:38] <Quxxy> Yup
[11:27:07] <Quxxy> I've got it burrowing down to the TypeScheme, and from there on to the actual sty
[11:27:18] <eddyb> Quxxy: that's not useful
[11:27:27] <Quxxy> I was just hoping I could somehow special-case the libc aliases
[11:27:37] <eddyb> not if you want to tell between type aliases and their targets
[11:27:52] <eddyb> you'll have to look at the Def
[11:28:59] <eddyb> not sure if there's an easy way to look up libc::c_foo ahead of time
[11:29:18] <eddyb> (because then you'd just be comparing integers)
[11:29:18] <Quxxy> Yeah, I've got the Def already
[11:29:50] <eddyb> there's a function in middle::ty which gives you the path
[11:30:26] <eddyb> pub fn item_path_str(cx: &ctxt, id: ast::DefId) -> String {
[11:31:14] <eddyb> wait, why is this chaining the thing at the end? https://github.com/rust-lang/rust/blob/master/src/librustc/middle/ty.rs#L5545
[11:32:27] <eddyb> playbot: fn foo<T:>(){}
[11:32:29] -playbot- ()
[11:32:30] <eddyb> welp
[11:33:26] <Quxxy> fn ohnoes< D: >(){}
[11:34:28] <Quxxy> Hahahaha, yessss; that gives me the full path to the alias
[11:34:38] <Quxxy> Time for special-case kludges!
[11:35:26] <eddyb> Quxxy: you might want to cache them or something
[11:35:34] <eddyb> strings aren't that cheap to make
[11:35:45] <Quxxy> I'm not at the "do this properly" stage yet
[11:35:53] <Quxxy> This is still "is this shit even going to work?!" stage
[11:35:56] <eddyb> (cache a "special cases" enum)
[11:36:01] <eddyb> Quxxy: sure :). good luck!
[11:36:08] <Quxxy> Combined with a healthy dose of "what the hell am I doing I don't even"
[11:37:11] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[11:37:24] *** Joins: jga (jga@moz-ghe.t1q.244.77.IP)
[11:38:02] <Quxxy> Thanks :)
[11:38:06] *** Joins: bdero (bran@moz-itn.uao.189.18.IP)
[11:38:21] *** Joins: goyox86 (textual@moz-6gq.t8s.78.166.IP)
[11:39:32] *** Quits: bdero (bran@moz-itn.uao.189.18.IP) (Connection closed)
[11:39:41] *** Joins: bdero (bran@moz-itn.uao.189.18.IP)
[11:41:43] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[11:42:23] <eddyb> Quxxy: btw, there was a reason I asked about the anonymized type thing
[11:42:43] <eddyb> just how much do you want them?
[11:43:21] <Quxxy> I think they, or something like them, are essential for sane, high-performance composition in Rust
[11:43:27] <Quxxy> I wants them pretty decently
[11:43:42] <Quxxy> But I don't want to make *too* much noise since I can't really donate time to make them happen :(
[11:47:32] <Quxxy> Why?  Is there some sort of titanic battle coming?
[11:48:05] *** Quits: ChrisMorgan (ChrisMorgan@moz-g6osuq.tpgi.com.au) (Ping timeout: 121 seconds)
[11:51:43] <eddyb> Quxxy: :D
[11:52:30] *** Quits: ryanhiebert (ryanhiebert@moz-nsd5kl.ks.cox.net) (Quit: Leaving...)
[11:53:19] *** Joins: mgottschlag (quassel@moz-q3gigp.h71g.nb65.1398.2a00.IP)
[11:54:03] *** Quits: tamird (textual@moz-gg3hct.res.rr.com) (Quit: My Mac has gone to sleep. ZZZzzz…)
[11:55:00] *** Joins: nicknikolov (nicknikolov@moz-0q4.2rm.211.90.IP)
[11:55:36] *** Joins: ryanhiebert (ryanhiebert@moz-nsd5kl.ks.cox.net)
[11:55:54] <Quxxy> Muahahaha; `pub extern fn levi_height() -> libc::c_short { 160 }` --> `short levi_height();`  :FD
[11:57:11] *** zz_kimundi is now known as kimundi
[12:01:00] *** Quits: laumann (thomas@moz-vj4.hq0.225.130.IP) (Ping timeout: 121 seconds)
[12:03:03] *** Joins: laumann (thomas@moz-gqpfnm.science.ku.dk)
[12:06:01] *** Joins: Binero (jeroen@moz-91joat.69vi.s4ge.1810.2a02.IP)
[12:09:38] *** Joins: harrisonclarke (harrisoncla@moz-th044a.ns.bellaliant.net)
[12:10:32] <cmr> libclang is startlingly easy to use with the Python bindings.
[12:10:42] <cmr> bindgen should be written in python.
[12:11:01] <Quxxy> I actually took a crack at that once
[12:11:51] <Quxxy> Went pretty quick right up until the moment I decided that I needed to reverse the conditional compilation constraints used in windows.h
[12:17:12] *** Joins: Sho (sho@moz-83s.6h6.28.5.IP)
[12:17:43] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[12:18:04] *** Quits: Tobba (Tobba@moz-6oh.7ki.21.217.IP) (Ping timeout: 121 seconds)
[12:20:20] *** kimundi is now known as zz_kimundi
[12:22:12] *** Joins: mib_ufv9mc (Mibbit@moz-juv.9o3.252.72.IP)
[12:25:00] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[12:28:37] *** Quits: ctennis (ctennis@moz-vcpg3c.in.comcast.net) (Quit: Leaving...)
[12:30:25] *** Quits: ryanhiebert (ryanhiebert@moz-nsd5kl.ks.cox.net) (Connection closed)
[12:31:03] *** Joins: ryanhiebert (ryanhiebert@moz-nsd5kl.ks.cox.net)
[12:31:21] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[12:31:26] *** Quits: goyox86 (textual@moz-6gq.t8s.78.166.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[12:31:51] *** Quits: mgottschlag (quassel@moz-q3gigp.h71g.nb65.1398.2a00.IP) (Ping timeout: 121 seconds)
[12:32:40] *** Joins: dbfvhai (uoerwyfbvb@moz-da5.f5i.67.41.IP)
[12:32:42] <dbfvhai> .
[12:32:44] <dbfvhai> did usa intelligence supply isis with weapons like they did with al-qaeda to justify creating wars & killing people?
[12:32:44] <dbfvhai> wars in the middle east,people killing, vague expolsions is that creative mess ,usa said to&did excute?
[12:32:44] <dbfvhai> did usa excute the creative mess in the middle east like they said they will, does the creative mess include explosions with uncertain responsibles to create wars?
[12:32:44] <dbfvhai> plz, send my qs to help limiting usa & israel aggression against others& may then lessen number of people killed in the middle east.
[12:33:12] *** Parts: dbfvhai (uoerwyfbvb@moz-da5.f5i.67.41.IP) ()
[12:33:21] <WindowsBunny> Oh good, they saw themselves out
[12:35:15] <capella> "drive-by spamming"
[12:35:51] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[12:37:25] *** Joins: jdm (jdm@moz-ilbt2e.cable.teksavvy.com)
[12:39:17] *** Joins: mgottschlag (quassel@moz-q3gigp.h71g.nb65.1398.2a00.IP)
[12:39:35] <harrisonclarke> are the github label conventions documented somewhere? i'm curious about what the letter prefixes on them mean.
[12:41:24] <WindowsBunny> harrisonclarke: They were on the wiki
[12:41:27] <WindowsBunny> UNTIL THE WIKI DIED
[12:41:43] * WindowsBunny shakes his paw at steveklabnik
[12:41:58] * Manishearth sings "The day the Wiki died" in the tone of Don McLean's American Pie
[12:42:05] <Manishearth> WindowsBunny: it's on a different repo btw
[12:44:41] <harrisonclarke> found it: https://github.com/rust-lang/rust-wiki-backup/blob/master/Note-tag-label-names-and-definitions.md
[12:44:48] *** Quits: mgottschlag (quassel@moz-q3gigp.h71g.nb65.1398.2a00.IP) (Ping timeout: 121 seconds)
[12:50:15] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Client exited)
[12:51:24] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[12:56:13] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Connection closed)
[12:56:35] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[12:59:07] *** Joins: casey_ (casey@moz-v0ns05.tpgi.com.au)
[12:59:25] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Connection closed)
[13:16:21] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Client exited)
[13:18:28] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[13:22:40] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[13:23:06] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Connection closed)
[13:23:20] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[13:24:55] *** Quits: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua) (A TLS packet with unexpected length was received.)
[13:26:40] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[13:28:54] *** Joins: goyox86 (textual@moz-qfs.570.70.83.IP)
[13:36:10] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Client exited)
[13:36:46] *** Joins: canhtak (jeremy@moz-kcs.u0t.149.5.IP)
[13:52:51] *** Quits: Binero (jeroen@moz-91joat.69vi.s4ge.1810.2a02.IP) (Ping timeout: 121 seconds)
[13:52:52] *** Quits: bkearns (Adium@moz-2l9j31.ca.comcast.net) (Quit: Leaving.)
[13:54:50] *** Quits: _Vi (vi@moz-bbs.vhj.131.104.IP) (Ping timeout: 121 seconds)
[14:01:12] *** Quits: jgallagher (john@moz-6ge.dhn.131.24.IP) (Client exited)
[14:05:28] *** Joins: ctennis (ctennis@moz-f8q.e72.137.99.IP)
[14:07:18] *** Quits: casey_ (casey@moz-v0ns05.tpgi.com.au) (Connection closed)
[14:07:40] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[14:10:34] *** Joins: tamird (textual@moz-lje.m54.130.157.IP)
[14:11:42] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Ping timeout: 121 seconds)
[14:14:54] *** Quits: ctennis (ctennis@moz-f8q.e72.137.99.IP) (Ping timeout: 121 seconds)
[14:24:33] *** Quits: summerlight (summerlight@moz-99k.2mj.130.121.IP) (Quit: Leaving)
[14:26:03] *** Joins: summerlight (summerlight@moz-99k.2mj.130.121.IP)
[14:30:34] *** Quits: ptalbot (ptalbot@moz-jaf.h4a.102.129.IP) (Connection closed)
[14:33:10] *** Joins: jgallagher (john@moz-d5e8oc.hfc.comcastbusiness.net)
[14:33:19] *** zz_kimundi is now known as kimundi
[14:34:56] *** Quits: nodweber_ (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[14:40:21] *** Quits: squiddy (squiddy@moz-md4.pm3.19.178.IP) (Quit: Leaving)
[14:41:37] *** Joins: _Vi (vi@moz-bbs.vhj.131.104.IP)
[14:58:15] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Quit: Leaving.)
[14:58:49] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[14:59:58] *** Joins: mtsr_ (mtsr@moz-40gpj7.yourbnc.co.uk)
[15:03:01] *** Joins: arielb1 (Mibbit@moz-cmi.jfj.114.192.IP)
[15:06:12] <arielb1> eddyb: ping
[15:07:10] <arielb1> why do you think gh25776 creates backwards-compat problems?
[15:07:10] <[o__o]> Combining explicit T: Sized and T: ?Sized bounds is silently accepted and results in T: Sized.: https://github.com/rust-lang/rust/issues/25776
[15:07:27] <arielb1> the :Sized bound is a supertrait
[15:07:37] <arielb1> of course removing a supertrait is a backwards-compat hazard
[15:11:36] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[15:13:31] *** Quits: canhtak (jeremy@moz-kcs.u0t.149.5.IP) (Client exited)
[15:13:40] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[15:21:13] *** Quits: summerlight (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[15:25:26] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[15:25:40] *** Quits: harrisonclarke (harrisoncla@moz-th044a.ns.bellaliant.net) (Connection closed)
[15:25:47] *** Joins: harrisonclarke (harrisoncla@moz-th044a.ns.bellaliant.net)
[15:25:53] *** Quits: goyox86 (textual@moz-qfs.570.70.83.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[15:26:11] *** Joins: BlakeWilliams (BW@moz-32q.80a.230.173.IP)
[15:26:15] *** Joins: pauls (pauls@moz-e5p333.ccs.neu.edu)
[15:27:57] *** Quits: arielb1 (Mibbit@moz-cmi.jfj.114.192.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[15:28:09] *** Joins: summerlight (summerlight@moz-99k.2mj.130.121.IP)
[15:29:07] *** Joins: awelkie (Mibbit@moz-51u.qo3.134.68.IP)
[15:29:27] <munksgaard> Can you view the attributes of items defined in external crates?
[15:29:47] <munksgaard> From a plugin
[15:32:58] *** Quits: summerlight (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[15:36:45] *** Joins: davebettin (davebettin@moz-hde.5e5.136.67.IP)
[15:36:56] <Manishearth> munksgaard: yes
[15:37:03] <Manishearth> get_attrs and has_attr
[15:37:07] <Manishearth> middle__ty is your friend
[15:37:11] <Manishearth> * middle::ty
[15:37:13] <Manishearth> also your enemy
[15:37:24] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Quit: It's a joke, it's all a joke.)
[15:37:27] <munksgaard> It works on functions in external crates as well?
[15:37:41] <munksgaard> Manishearth: ^
[15:38:19] <Manishearth> functions ... probably 
[15:38:22] <Manishearth> if you have the defid
[15:38:38] <Manishearth> chec kthe source for the _attr fns
[15:39:03] <awelkie> Is there any reason why c#-style async/await couldn't be done with a compiler plugin?
[15:39:19] <Manishearth> awelkie: no reason I can think of
[15:39:26] <Manishearth> just make it unwrap into channels underneath
[15:39:36] <Manishearth> proper coroutines would be hard with plugins OTOH
[15:39:55] <Manishearth> you need to create closure-like iterators there and that's better done in situ
[15:40:30] <awelkie> So you're saying the easy way would be to use threads, and doing it all in one thread would be pretty difficult?
[15:41:13] <Manishearth> yes
[15:41:43] <Manishearth> I do hope we get closure-like python/JSesque generator/coroutine support
[15:42:14] <awelkie> Well that's why I'm asking. A lot of people seem to want it, and I was wondering if someone could do it in a plugin rather than waiting for a language change.
[15:43:56] *** Joins: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de)
[15:44:10] <Manishearth> awelkie: hard to do it as a plugin efficiently
[15:44:16] <Manishearth> there is coroutine-rs though
[15:44:26] <Manishearth> I don't think it's the exact sort of coroutines we want
[15:44:29] <Manishearth> ... but it's a step
[15:44:34] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[15:47:09] *** Quits: laumann (thomas@moz-gqpfnm.science.ku.dk) (Ping timeout: 121 seconds)
[15:47:53] *** Joins: semarie (semarie@moz-4lmh4m.privacyfoundation.ch)
[15:49:11] *** Joins: laumann (thomas@moz-vj4.hq0.225.130.IP)
[15:51:01] *** Quits: harrisonclarke (harrisoncla@moz-th044a.ns.bellaliant.net) (Connection closed)
[15:51:08] *** jdm is now known as jdm|busy
[15:52:12] *** Quits: awelkie (Mibbit@moz-51u.qo3.134.68.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[15:54:06] *** Joins: nham (nham@moz-lglsfe.il.comcast.net)
[15:58:23] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[15:58:34] *** Joins: O01eg (o01eg@moz-7fe1ek.nlre.4n8f.2698.2a02.IP)
[15:59:17] *** Quits: munksgaard (munksgaard@moz-1f0.hq0.225.130.IP) (Ping timeout: 121 seconds)
[16:01:19] *** Joins: munksgaard (munksgaard@moz-vj4.hq0.225.130.IP)
[16:01:55] *** Joins: imperio (Mibbit@moz-aibeqg.fbx.proxad.net)
[16:07:33] *** Quits: munksgaard (munksgaard@moz-vj4.hq0.225.130.IP) (Ping timeout: 121 seconds)
[16:17:51] *** Joins: kushal (kdas@moz-0bg.hkq.143.114.IP)
[16:19:16] *** Joins: arielb1 (Ariel@moz-9he9ta.red.bezeqint.net)
[16:23:10] *** Joins: brson (brson@moz-48fqub.res.rr.com)
[16:23:11] *** ChanServ sets mode: +o brson
[16:24:38] *** Joins: munksgaard (munksgaard@moz-1f0.hq0.225.130.IP)
[16:25:00] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[16:25:28] *** Joins: Binero (jeroen@moz-91joat.69vi.s4ge.1810.2a02.IP)
[16:26:29] *** jdm|busy is now known as jdm
[16:29:10] *** Quits: playbot (playbot@moz-1vk5qd.compute.amazonaws.com) (Connection closed)
[16:29:10] *** Quits: playbot-mini (playbot-min@moz-1vk5qd.compute.amazonaws.com) (Connection closed)
[16:29:11] *** Joins: playbot-mini (playbot-min@moz-1vk5qd.compute.amazonaws.com)
[16:29:11] *** Joins: playbot (playbot@moz-1vk5qd.compute.amazonaws.com)
[16:35:48] *** Quits: imperio (Mibbit@moz-aibeqg.fbx.proxad.net) (Quit: http://www.mibbit.com ajax IRC Client)
[16:36:13] *** Quits: rovar (rovar@moz-6iq.47m.88.38.IP) (Ping timeout: 121 seconds)
[16:37:31] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[16:38:29] *** Joins: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP)
[16:40:42] *** Quits: mib_ufv9mc (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[16:43:02] *** Joins: Astrum|Lap (Astrum|Lap@moz-7enfbr.co.comcast.net)
[16:49:58] *** Joins: Guest38 (textual@moz-j72nfe.ca.comcast.net)
[16:54:09] *** Quits: playbot (playbot@moz-1vk5qd.compute.amazonaws.com) (Connection closed)
[16:54:09] *** Quits: playbot-mini (playbot-min@moz-1vk5qd.compute.amazonaws.com) (Connection closed)
[16:54:12] *** Joins: playbot-mini (playbot-min@moz-1vk5qd.compute.amazonaws.com)
[16:54:12] *** Joins: playbot (playbot@moz-1vk5qd.compute.amazonaws.com)
[16:54:30] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[16:55:02] *** Joins: rkruppe_ (chatzilla@moz-3nj.rnu.131.95.IP)
[16:55:21] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[16:55:28] *** rkruppe_ is now known as rkruppe
[16:57:09] *** Joins: Diggsey (diggsey@moz-5e07a6.dsl.pipex.com)
[16:57:53] <acrichto> nmatsakis: ping
[16:57:58] <nmatsakis> acrichto: pong
[16:58:09] <acrichto> nmatsakis: is it intended that const fn usage in statics is stable righ tnow?
[16:58:29] <nmatsakis> well, defining a const fn is not stable, right?
[16:58:44] <acrichto> sure, but we have some stable const fns in the stdlib now
[16:58:53] <acrichto> e.g. UnsafeCell::new/AtomicUsize::new
[16:59:04] <nmatsakis> ok that is wrong...
[16:59:11] <nmatsakis> did I just miss that?
[16:59:17] <nmatsakis> (I guess so)
[16:59:29] <acrichto> nmatsakis: oh eddyb may have put that into the snapshot PR
[16:59:41] <nmatsakis> tbh I hadn't even realized the const fn PR landed ;)
[16:59:42] * nmatsakis so behind
[16:59:45] <acrichto> nmatsakis: https://github.com/rust-lang/rust/pull/25790/commits
[16:59:59] <nmatsakis> I see
[17:00:05] <nmatsakis> well, it'd be easy enough to make it unstable to call them
[17:00:16] <acrichto> I'll add a comment
[17:00:18] <WindowsBunny> oh boy, we have const fns already?
[17:06:29] *** Quits: Havvy (Havvy@moz-epv20b.wa.comcast.net) (Connection closed)
[17:07:18] *** chmanchester|afk is now known as chmanchester
[17:11:33] *** Joins: Havvy (Havvy@moz-epv20b.wa.comcast.net)
[17:14:25] *** Quits: tamird (textual@moz-lje.m54.130.157.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[17:14:50] <nmatsakis> acrichto: I guess I can open a PR to stability check calls to const fn...
[17:15:08] <acrichto> nmatsakis: ah yeah sry was halfway through a comment and I got distracted
[17:15:12] <acrichto> I'll add that eventually!
[17:16:00] <nmatsakis> acrichto: alternatively of course we could just revert the change eddyb made, not sure which is best, but it's probably better to feature gate for now just in case
[17:16:27] <nmatsakis> acrichto: that is, until we reach point (if we do) where we know we WANT some const fn to be callable from stable code
[17:17:02] <acrichto> nmatsakis: yeah I think feature gating is probably the best option here
[17:23:00] <arielb1> nmatsakis: how did we end up allowing where-clauses with no type parameters?
[17:24:09] <WindowsBunny> arielb1: Really?
[17:24:22] <arielb1> WindowsBunny: only lifetime parameters
[17:24:56] <arielb1> of course, as lifetimes don't participate in trait matching, these are all either true or false
[17:26:41] <nmatsakis> arielb1: well, I think it makes sense to allow it altogether in any case
[17:28:56] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[17:30:06] *** Quits: laumann (thomas@moz-vj4.hq0.225.130.IP) (Quit: leaving)
[17:31:13] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (A TLS packet with unexpected length was received.)
[17:31:47] <nmatsakis> acrichto: almost have that const-fn stability patch ready
[17:32:24] <arielb1> could someone r=eddyb gh25796?
[17:32:24] <[o__o]> Implement defaults for associated types: https://github.com/rust-lang/rust/pull/25796
[17:32:42] <acrichto> nmatsakis: \o/
[17:33:06] <eddyb> acrichto, nmatsakis: there are no const fn calls in anything that can be considered stable code. I tried to make sure it's backwards-compat (no INIT constants have been removed). it was mostly internal cleanup which I've had waiting around since the original const-fn PR. no concerns were raised while the PR was open. apologies for any inconveniences
[17:33:35] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[17:33:35] *** ChanServ sets mode: +o pcwalton
[17:33:39] <nmatsakis> arielb1: in that PR, how did you handle the interaction of defaults for assoc types and default fns?
[17:33:50] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[17:33:56] <arielb1> nmatsakis: what interaction?
[17:33:57] <nmatsakis> I've been second guessing what the RFC says in this respect
[17:33:59] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[17:33:59] *** ChanServ sets mode: +o pcwalton
[17:34:18] <acrichto> eddyb: oh yeah it's all fine, I just noticed that tests started using const fns in initializer expressions without having a feature gate
[17:34:21] <nmatsakis> arielb1: the RFC has some wording about default fn implementations being allowed to make assumptions about the defaults on assoc types
[17:34:29] <arielb1> didn't implement that
[17:34:39] <nmatsakis> ok, good, I figured you wouldn't
[17:34:56] <arielb1> I would rather implement default-method where-clauses in general
[17:35:30] <eddyb> SimonSapin, Yurume: next nightly should unblock rust-encoding https://github.com/rust-lang/rust/pull/25797
[17:35:51] <SimonSapin> eddyb: yes, I saw it land. Thanks for the patch!
[17:35:55] <nmatsakis> arielb1: yeah, i'm not a fan of it, and it would be very complicating
[17:36:10] <nmatsakis> aturon: we should discuss associated type defaults and default fns in traits :) 
[17:36:25] <arielb1> nmatsakis: default-fn where-clauses are nice
[17:36:32] <arielb1> but that requires an RFC
[17:36:48] <arielb1> and we have to figure out a syntax ;-)
[17:36:48] <aturon> nmatsakis: heh, what about them specifically? definitely some hazards...
[17:37:20] <SimonSapin> eddyb: I think I solved my failing doctest mystery, I needed # #![feature(cell_extras)]
[17:37:21] <arielb1> fn clone(&self) -> Self impl where Self: Copy { *t }
[17:37:56] <aturon> nmatsakis: nevermind, read backscroll, and I agree with arielb1 
[17:38:18] <nmatsakis> arielb1: https://github.com/arielb1/rust/commit/ae10e478eb61e75ebf3a7bf672b34b582555fd8e#commitcomment-11391013
[17:38:21] <aturon> (i would also prefer using where clauses)
[17:38:40] <nmatsakis> well, I think wht we all want
[17:38:43] <nmatsakis> is some more flexible way to do defaults
[17:38:57] <nmatsakis> that lets you have more than one default, and extra conditions, 
[17:39:02] <nmatsakis> that don't become conditions on the trait as a whole
[17:39:03] <nmatsakis> (right?)
[17:39:10] <aturon> right
[17:39:15] <nmatsakis> it's not clear to me that this should be called "default fn where clauses"
[17:39:42] <aturon> nmatsakis: sure, that's just one potential avenue
[17:39:50] <eddyb> arielb1: `impl` as a keyword?
[17:40:00] <arielb1> eddyb: it is
[17:40:03] <eddyb> I know
[17:40:13] <eddyb> but I mean, that's what you want to use to distinguish?
[17:40:27] <eddyb> the way I would do this is: fn clone(&self) -> Self; fn clone(&self) -> Self where Self: Copy { *t }
[17:40:39] <arielb1> eddyb: bikeshed
[17:41:01] <eddyb> sure is. but it requires no new syntax, just new semantics
[17:41:01] <nmatsakis> eddyb: that's not clear to me, (partial) specialization might also be what you want here for example
[17:41:13] <nmatsakis> I think i'd prefer default method definitions to be outside of traits
[17:41:15] <nmatsakis> and in impls
[17:41:34] <nmatsakis> and then have some way, maybe, to select sets of defaults as well
[17:41:44] *** Joins: rovar (rovar@moz-6iq.47m.88.38.IP)
[17:42:57] <arielb1> nmatsakis: comments added
[17:43:46] <nmatsakis> arielb1: thanks
[17:45:01] <eddyb> nmatsakis: at some point I thought it might be a good idea to replace things like fold::noop_fold_foo(self, foo) with fold::Default(self).fold_foo(foo)
[17:45:18] <eddyb> nmatsakis: no bare functions, just an impl on a wrapper type
[17:45:32] <nmatsakis> interesting thought. why would that be better?
[17:45:46] <nmatsakis> we'd get to write self in the defaults I guess
[17:46:01] <eddyb> better? not sure
[17:46:03] <SimonSapin> Who’s running http://rustcamp.com/ ?
[17:46:07] <steveklabnik> we are
[17:46:20] <nmatsakis> eddyb: seems a bit tricky to delegate, you'd have to write (*self).visit_foo()?
[17:46:28] <nmatsakis> eddyb: well I guess self.0.visit_foo()
[17:46:32] <eddyb> oh
[17:46:33] <SimonSapin> steveklabnik: perhaps the site could say that?
[17:46:45] <SimonSapin> steveklabnik: and also say in what country the event is taking place :)
[17:46:51] <eddyb> nmatsakis: must've been something else then
[17:46:52] <Quxxy> eddyb: rustig producing a C header file and a Python ctypes loader from a Rust crate: https://gist.github.com/DanielKeep/695d5baf3a3276840f61 :D
[17:47:37] <eddyb> cool!
[17:47:52] <Quxxy> Thanks to your (and cmr's) help earlier :)
[17:47:54] <nmatsakis> SimonSapin: it does say "UC Berkeley".... 
[17:48:06] <eddyb> Quxxy: eh, it was nothing
[17:48:45] <SimonSapin> nmatsakis: Right. And I could google that name and find out. But it still gives a very California-centric impression
[17:48:54] <SimonSapin> "Of course it’s in CA, no need to say it"
[17:49:25] <eddyb> is California its own country now?
[17:49:37] <steveklabnik> not yet ;)
[17:49:45] <steveklabnik> anyway, that's a good point simon
[17:49:58] <SimonSapin> eddyb: state/country/continent/whatever. It’s far from where I live
[17:50:27] *** Joins: dinfuehr_ (dinfuehr@moz-c25.u8s.112.91.IP)
[17:50:31] <Manishearth> steveklabnik: So, is it a regular conference or something different?
[17:50:39] *** Quits: dinfuehr_ (dinfuehr@moz-c25.u8s.112.91.IP) (Connection closed)
[17:50:46] <Manishearth> (also, http://rustconf.com/ still exists and is mysterious)
[17:51:00] *** Joins: dinfuehr_ (dinfuehr@moz-c25.u8s.112.91.IP)
[17:51:14] <eddyb> Manishearth: "soon" means "it's done when it's done"
[17:51:20] <bstrie> Quxxy: awesome
[17:51:22] <Manishearth> eddyb: heh
[17:51:24] <eddyb> RustConf 2015 circa 2017
[17:51:33] <steveklabnik> Manishearth: 1. a one day conference. the term is 'camp' because we want this to be... 'trial run' is too loose. The firs tyear running an event, it's always tough. we want to set expectations correctly
[17:51:39] <Manishearth> aha
[17:51:40] <steveklabnik> 2. we have a handle on rustconf.com
[17:51:41] <eddyb> (it's a version number. 2.0.15)
[17:51:49] <steveklabnik> cant say more than that right now
[17:52:05] <Manishearth> any change a talk on plugin-fu would work?
[17:52:09] <Manishearth> so many secrets
[17:52:22] <eddyb> Manishearth: you work for the competition. get real :P
[17:52:35] <Manishearth> heh
[17:52:54] <SimonSapin> Manishearth: secrets? what are you working on again? :)
[17:53:04] <Manishearth> lol
[17:53:30] <Manishearth> I don't actually think any secrets are involved, just that the lawyery language in the NDA has me scared :p
[17:53:46] *** Quits: dinfuehr (dinfuehr@moz-c25.u8s.112.91.IP) (Ping timeout: 121 seconds)
[17:53:52] <Manishearth> eddyb: clearly I should give a talk on C# at rustcamp :p
[17:54:26] <steveklabnik> Manishearth: are you working on C#? I have a friend who does that over at microsoft
[17:54:36] <bstrie> steveklabnik: I think the post could have used a less cryptic name :P
[17:54:39] <Manishearth> steveklabnik: I'm not :)
[17:54:50] <steveklabnik> bstrie: the post?
[17:54:51] <Manishearth> I'm working on office for android. fun stuff, but C++/Java
[17:54:53] <steveklabnik> oh on reddit
[17:55:04] *** Quits: dinfuehr_ (dinfuehr@moz-c25.u8s.112.91.IP) (Ping timeout: 121 seconds)
[17:55:31] <Manishearth> steveklabnik: I know where the VS team is and I'm owndering how I can get them to officially work on Rust integration :P
[17:55:33] <bstrie> steveklabnik: when the call for proposals opens, might be worth another post with a self-descriptive name
[17:55:39] <steveklabnik> Manishearth: oh nice
[17:55:47] <steveklabnik> bstrie: sure :)
[17:58:30] *** Joins: avikpal (avikpal@moz-j2a.un0.238.117.IP)
[17:59:30] *** Quits: brson (brson@moz-48fqub.res.rr.com) (Quit: leaving)
[18:00:25] <bstrie> steveklabnik: I just want to make sure that it registers to people at large that rust is having an official conference-type thing. that's a big deal imo
[18:00:47] <bstrie> koobs: any progress since yesterday?
[18:00:55] <steveklabnik> quite fair
[18:00:56] <steveklabnik> :)
[18:02:07] *** Joins: rkruppe_ (chatzilla@moz-3nj.rnu.131.95.IP)
[18:03:21] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[18:03:22] *** rkruppe_ is now known as rkruppe
[18:03:55] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[18:05:04] *** Joins: eibwen (eibwen@moz-mvc8eh.dip0.t-ipconnect.de)
[18:07:25] *** Quits: zmike_ (discomfitor@moz-oek0ra.ct.comcast.net) (Quit: Leaving)
[18:07:33] *** Joins: zmike_ (discomfitor@moz-oek0ra.ct.comcast.net)
[18:10:35] <nmatsakis> acrichto: oh, hmm, const fn feature gate is a bit more subtle than I thought ;) my first attempt wound up prohibing too much
[18:11:02] *** Joins: tamird (textual@moz-lje.m54.130.157.IP)
[18:11:14] <acrichto> nmatsakis: :(
[18:13:07] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[18:14:26] <XMPPwocky> acrichto: re gh25817 : what do you mean by "an iterator adaptor like IntoIter"? i didn't want once() to just return option::IntoIter directly because it seemed like exposing too much
[18:14:26] * flaper87 just noticed rustcamp...
[18:14:26] <[o__o]> Implement std::iter::once/empty (RFC 771): https://github.com/rust-lang/rust/pull/25817
[18:14:32] <flaper87> that's super cool!
[18:14:44] <acrichto> XMPPwocky: oh I just meant as an implementation detail
[18:14:52] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[18:14:52] *** ChanServ sets mode: +o pcwalton
[18:15:00] <acrichto> XMPPwocky: e.g. internally storing Option doesn't allow reusing size_hint, but internally storing IntoIter allows using the size_hint impl elsewhere
[18:15:29] <XMPPwocky> oh, I see what you mean
[18:15:35] <XMPPwocky> github's email sort of broke the threading there
[18:19:50] <XMPPwocky> is there a better way to implement Clone for Empty<T> than manually? 
[18:19:59] <XMPPwocky> #[derive] adds an unnecessary Clone bound
[18:20:13] <eddyb> uhm
[18:20:19] <eddyb> XMPPwocky: you can't have such a type
[18:20:22] <eddyb> (AFAIK)
[18:20:30] <eddyb> playbot: struct Foo<T>;
[18:20:31] -playbot- <anon>:9:20: 9:21 error: parameter `T` is never used
[18:20:31] -playbot- <anon>:9         struct Foo<T>;
[18:20:31] -playbot- output truncated; full output at: http://bit.ly/1cZMtDh
[18:20:38] <XMPPwocky> eddyb: there's a PhantomData in 
[18:20:41] <eddyb> sure
[18:20:49] <eddyb> PhantomData<T>: Clone
[18:20:59] <eddyb> that shouldn't depend on T: Clone AFAIK
[18:21:12] <eddyb> XMPPwocky: unless we don't emit where clauses from deriving yet
[18:22:29] <XMPPwocky> eddyb: http://is.gd/aL61Wd does not appear to
[18:25:10] <XMPPwocky> what's the makefile target for libcore + tests?
[18:25:47] <eddyb> check-stage1-coretest IIRC
[18:25:53] <XMPPwocky> y
[18:25:53] <XMPPwocky> ty
[18:26:05] *** Joins: rkruppe_ (chatzilla@moz-3nj.rnu.131.95.IP)
[18:26:45] <XMPPwocky> oh, i can't derive anyways, because this is in libcore and things get weird around that
[18:27:23] *** Quits: joneshf-laptop_ (joneshf@moz-l4h.b5s.208.98.IP) (Ping timeout: 121 seconds)
[18:27:24] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[18:27:26] <XMPPwocky> am I supposed to get
[18:27:26] <XMPPwocky> error: unresolved name `core::default::Default::default`
[18:27:30] *** rkruppe_ is now known as rkruppe
[18:27:35] <XMPPwocky> when deriving Default in libcore
[18:28:19] <XMPPwocky> for some reason, deriving Clone works
[18:29:42] *** Joins: gsingh93 (uid22642@moz-aq0iah.charlton.irccloud.com)
[18:31:39] *** Quits: Jesin (Jesin@moz-a3uhsd.fios.verizon.net) (Quit: Leaving)
[18:31:59] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[18:32:36] <sfackler> XMPPwocky: you just need to add `pub use default;` to this: https://github.com/rust-lang/rust/blob/master/src/libcore/lib.rs#L161-L171
[18:34:17] *** Joins: Jesin (Jesin@moz-a3uhsd.fios.verizon.net)
[18:34:52] *** Quits: Quxxy (chatzilla@moz-efh10q.internode.on.net) (Ping timeout: 121 seconds)
[18:35:13] *** Quits: Murarth (Murarth@moz-mpmr8r.phnx.qwest.net) (Client exited)
[18:35:59] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[18:36:19] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[18:36:28] <XMPPwocky> aha
[18:36:51] <XMPPwocky> should i make that a separate PR? it seems like it's a little unrelated
[18:37:24] <sfackler> nah
[18:37:39] <sfackler> that submodule's a hacky convenience thing
[18:38:10] *** Joins: Murarth (Murarth@moz-mpmr8r.phnx.qwest.net)
[18:38:26] <XMPPwocky> alrighty
[18:38:46] <XMPPwocky> at least #[derive] uses core now, i seem to remember it referring to std at some point
[18:45:05] *** Quits: zmack (zmack@moz-htpein.home.aster.pl) (Connection closed)
[18:45:31] *** Joins: zmack (zmack@moz-htpein.home.aster.pl)
[18:47:24] *** Quits: rovar (rovar@moz-6iq.47m.88.38.IP) (Ping timeout: 121 seconds)
[18:47:37] *** Joins: rovar (rovar@moz-6iq.47m.88.38.IP)
[18:47:52] <arielb1> It seems like 40% of reported ICEs are already fixed
[18:49:33] *** Quits: zmack (zmack@moz-htpein.home.aster.pl) (Ping timeout: 121 seconds)
[18:49:49] *** Quits: Binero (jeroen@moz-91joat.69vi.s4ge.1810.2a02.IP) (Ping timeout: 121 seconds)
[18:49:51] <bluss> Manishearth: can you remove pr https://github.com/rust-lang/rust/pull/25651 from your rollup? hope it's not too disruptive
[18:50:16] *** Joins: Binero (jeroen@moz-9quuoa.access.telenet.be)
[18:50:58] <Manishearth> bluss: will do
[18:51:47] <bluss> thanks
[18:53:09] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[18:54:39] <XMPPwocky> arielb1: release trains complicate bug reporting
[18:55:23] <XMPPwocky> at least any bug that's *super* common should get caught in beta
[18:56:28] <steveklabnik> it's not really trains
[18:56:35] <steveklabnik> it's just a side effect of any period of time before a release
[18:56:44] <XMPPwocky> /c/Users/Nathaniel/rust/x86_64-pc-windows-gnu/stage1/test/coretesttest-x86_64-pc-windows-gnu.exe: error while loading shared libraries: test-d8ace771.dll: cannot open shared object file: No such file or directory
[18:56:57] <XMPPwocky> i forgot stage1 tests were still borked on windows
[18:57:15] *** Joins: James (quassel@moz-739rgr.range86-148.btcentralplus.com)
[18:57:39] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[18:58:14] *** chmanchester is now known as chmanchester|afk
[18:58:21] *** chmanchester|afk is now known as chmanchester
[19:00:41] *** Quits: _Vi (vi@moz-bbs.vhj.131.104.IP) (Ping timeout: 121 seconds)
[19:04:21] *** chmanchester is now known as chmanchester|afk
[19:05:36] <eddyb> acrichto: please don't tell me impl !Sync for LocalKey should've been done and yet it didn't happen in 1.0
[19:06:34] <Manishearth> eddyb: I noticed that while writing the wrapper blog post, but I assumed that as long as it was !Send it's okay
[19:06:46] <Manishearth> but Sync gives us a Send &LocalKey, which is bad too
[19:07:13] <eddyb> Manishearth: it's not Copy so Send is not really relevant
[19:07:37] <Manishearth> eddyb: I don't get that
[19:07:56] <Manishearth> eddyb: !Copy + Send and !Copy + !Send are both valid patterns
[19:08:02] <eddyb> Manishearth: it's in a static
[19:08:02] <Manishearth> you can move a Box through a channel
[19:08:05] <eddyb> you can't move out of a static
[19:08:09] <Manishearth> oh
[19:08:13] <Manishearth> okay
[19:08:22] <eddyb> &'static LocalKey shouldn't be Send (i.e. LocalKey shouldn't be Sync) if we want to remove the existing indirection
[19:09:37] *** Joins: killercup (killercup@moz-723bo4.dip0.t-ipconnect.de)
[19:10:26] <eddyb> acrichto: it shouldn't be that hard to remove the indirection, actually. just have the initializer fn pointer right besides the inner key
[19:10:37] *** Joins: larhat (Adium@moz-vlo5br.cable.virginm.net)
[19:10:48] <eddyb> I'm guessing that would've been hell without const fn
[19:12:39] *** ker is now known as oli_obk
[19:12:45] *** Joins: A205B064 (A205B064@moz-9s9nhk.nap.wideopenwest.com)
[19:13:15] <oli_obk> eddyb: should I create the large const optimization as a new PR before this PR?
[19:14:00] <eddyb> oli_obk: if you want to, yeah, that would be great
[19:15:00] <eddyb> oli_obk: it mostly boils down to having unique symbol names for constant expressions that you can access between crates
[19:17:47] <eddyb> oli_obk: it gets trickier because the contents of the constants matter... maybe there should be a hash?
[19:18:18] <oli_obk> so you mean if there are two pub constants that just refer to the same other big constant?
[19:18:25] <arielb1> nmatsakis: I think I implemented select-fastpath in the wrong location
[19:18:27] <eddyb> no
[19:18:37] <eddyb> oli_obk: that is already going to create only one allocation
[19:18:43] <eddyb> static allocation, I mean
[19:18:49] <eddyb> oli_obk: I am talking about cross-crate
[19:18:58] <eddyb> and it doesn't matter what size they are
[19:20:02] <nmatsakis> arielb1: I canceled r+ for now, maybe leave comments on bugs (trying to keep heads down ftm)
[19:20:05] <arielb1> it mostly speeds up type_is_sized and type_moves_by_defaults
[19:20:10] <oli_obk> eddyb: i didn't mean referring to with static references. I meant if they take the other constant by value
[19:20:12] <nmatsakis> arielb1: er, leave comments on the PR I meant 
[19:20:12] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[19:20:21] <nmatsakis> arielb1: but yes that makes sense
[19:20:23] <eddyb> oli_obk: that is still optimized atm
[19:20:27] <oli_obk> ok
[19:20:33] <eddyb> (AFAIK, anyways)
[19:20:52] <eddyb> and that's not what acrichto is worried about
[19:21:02] <oli_obk> i understand what the worry is
[19:21:22] <oli_obk> i don't understand what you meant by "it gets trickier because the contents of the constants matter... maybe there should be a hash?"
[19:21:40] <eddyb> oli_obk: well...
[19:22:13] <eddyb> oli_obk: if you write &5 in two places, it will use the same static space
[19:24:47] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[19:26:26] *** Joins: goyox86 (textual@moz-rvv.00r.255.109.IP)
[19:31:32] <arielb1> are diagnostics error codes supposed to be recycled?
[19:32:58] *** Quits: rovar (rovar@moz-6iq.47m.88.38.IP) (Ping timeout: 121 seconds)
[19:33:22] *** Joins: mdup (cc@moz-6fgo9p.abo.wanadoo.fr)
[19:34:21] <eddyb> arielb1: I've wondered that myself. never seen stability guarantees
[19:34:27] *** Joins: nrc (nrc@moz-14pjgj.xtra.co.nz)
[19:34:28] *** ChanServ sets mode: +o nrc
[19:35:21] <bstrie> arielb1: I'd say avoid it if it's not too much of a burden
[19:35:41] <nmatsakis> arielb1: they are not supposed to be recycled, no.
[19:35:58] <bstrie> I'd be too afraid of people posting them into SO questions where they become solidified for all eternity
[19:36:08] <mdup> I found something weird with the type inference for signed vs. unsigned. https://users.rust-lang.org/t/is-this-behaviour-desirable/1595
[19:36:13] <mdup> should I file an issue?
[19:36:56] *** Joins: rovar (rovar@moz-6iq.47m.88.38.IP)
[19:37:05] <semarie> what is the current plan for building cargo with stable release ? 1.1.0beta (like 1.0.0) don't have required features stabilized
[19:37:10] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[19:37:10] *** ChanServ sets mode: +o pcwalton
[19:37:58] <steveklabnik> it's just one thing right?
[19:38:00] <steveklabnik> some FS api?
[19:39:21] <semarie> steveklabnik: metadata_ext, fs and fs_ext (if I recall correctly)
[19:39:44] <semarie> hum... "remind" should be better
[19:40:53] <steveklabnik> i'm not sure what the plan is
[19:41:02] <steveklabnik> but i guess it starts with figuring out what needs to be done to get those stable :)
[19:45:02] *** Quits: semarie (semarie@moz-4lmh4m.privacyfoundation.ch) (A TLS packet with unexpected length was received.)
[19:51:00] *** Quits: rovar (rovar@moz-6iq.47m.88.38.IP) (Ping timeout: 121 seconds)
[19:51:17] *** chmanchester|afk is now known as chmanchester
[19:53:18] *** Quits: kushal (kdas@moz-0bg.hkq.143.114.IP) (Quit: Leaving)
[19:56:08] *** Joins: rkruppe_ (chatzilla@moz-3nj.rnu.131.95.IP)
[19:57:23] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[19:57:32] *** rkruppe_ is now known as rkruppe
[20:00:00] *** Quits: bdero (bran@moz-itn.uao.189.18.IP) (Ping timeout: 121 seconds)
[20:01:10] *** Quits: goyox86 (textual@moz-rvv.00r.255.109.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[20:01:12] *** Joins: goyox86 (textual@moz-rvv.00r.255.109.IP)
[20:02:46] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[20:05:35] *** Quits: goyox86 (textual@moz-rvv.00r.255.109.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[20:06:24] *** Quits: munksgaard (munksgaard@moz-1f0.hq0.225.130.IP) (Ping timeout: 121 seconds)
[20:07:06] *** Quits: nodweber (nodweber@moz-knt.fgq.178.5.IP) (Ping timeout: 121 seconds)
[20:09:05] *** Quits: avikpal (avikpal@moz-j2a.un0.238.117.IP) (Connection closed)
[20:13:44] *** Joins: genbattle (genbattle@moz-4v0.gkd.16.182.IP)
[20:14:21] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[20:15:14] *** Joins: harrison_ (harrisoncla@moz-uur7pt.eastlink.ca)
[20:15:51] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[20:18:20] *** Joins: jbomo (dkd@moz-uol4mm.fios.verizon.net)
[20:18:55] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[20:19:34] *** Joins: mib_naj73u (Mibbit@moz-juv.9o3.252.72.IP)
[20:20:42] *** Joins: c0170 (c0170@moz-4stj9o.cable.virginm.net)
[20:23:21] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Ping timeout: 121 seconds)
[20:23:47] *** Quits: harrison_ (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[20:24:53] *** Quits: Guest38 (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[20:28:23] *** Joins: sigma (sigma@moz-k1ghg8.range109-153.btcentralplus.com)
[20:32:12] *** Joins: goyox86 (textual@moz-rvv.00r.255.109.IP)
[20:32:23] <simukis> mdup: if you’re still here
[20:32:45] <simukis> there was a lot of discussion about allowing negative literals for unsigned types
[20:33:11] *** Quits: goyox86 (textual@moz-rvv.00r.255.109.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[20:33:16] <simukis> and it went nowhere so we just kept the “it overflows” behaviour
[20:33:26] *** Joins: munksgaard (munksgaard@moz-1f0.hq0.225.130.IP)
[20:33:53] <simukis> and we can’t quite change it now because tere’s surely people who’re working with binary using -1 instead of !0 or 0xffff_ffff
[20:34:14] *** Joins: chc4 (chc4@moz-pdo0at.ma.comcast.net)
[20:34:41] <richo> not directly rust-related, but rust-build-infra relevant, is there a way in make to programmatically access (ideally recursively) the downstream dependencies of a target?
[20:34:55] *** Joins: goyox86 (textual@moz-rvv.00r.255.109.IP)
[20:35:23] *** Joins: _Vi (vi@moz-bbs.vhj.131.104.IP)
[20:36:14] <simukis> https://internals.rust-lang.org/t/forbid-unsigned-integer/752 is a relevant thread, mdup
[20:37:29] *** Joins: rovar (rovar@moz-6iq.47m.88.38.IP)
[20:38:35] <simukis> richo: I don’t think make has it. At least I haven’t found anything when I looked for similar things in GNU make
[20:38:46] <richo> thanks :(
[20:38:51] <simukis> alternative make implementations might have something like that
[20:39:05] <richo> that's not really helpful, afaik only gnu make is supported
[20:39:32] <richo> I'm bulk refactoring mk/* / documenting some things / trying to get some hacks I use sane enough to push upstream
[20:41:24] <simukis> pnkfelix: where did https://github.com/rust-lang/meeting-minutes/blob/7bb395946c0ded0068b1e61338e135a9dc9a8ff3/weekly-meetings/2015-03-31.md#feature-gate--expr go?
[20:42:24] <pnkfelix> simukis: we might have subsequently just removed it outright
[20:42:48] <pnkfelix> simukis: (i.e. I infer you are asking "what/where is the feature gate to re-enable negation of unsigned integer types?")
[20:43:43] <simukis> pnkfelix: no, apparently -1 still works just fine without any feature gates
[20:43:43] *** Joins: Guest38 (textual@moz-j72nfe.ca.comcast.net)
[20:44:05] *** Quits: ryanhiebert (ryanhiebert@moz-nsd5kl.ks.cox.net) (Connection closed)
[20:44:07] <simukis> pnkfelix: https://users.rust-lang.org/t/is-this-behaviour-desirable/1595
[20:44:30] *** Joins: ryanhiebert (ryanhiebert@moz-nsd5kl.ks.cox.net)
[20:44:32] <simukis> ah, just a missed case
[20:45:52] <simukis> so yeah, do you feel the case reported in the link above a bug or feature?
[20:46:32] <pnkfelix> simukis: bug
[20:47:11] <pnkfelix> <sigh>
[20:48:14] <simukis> I might be interested in tackling this since I’ve nothing to do until exams begin anyway
[20:48:23] <pnkfelix> possibly related gh24676
[20:48:23] <[o__o]> Unsigned negation in for inferred expressions doesn't warn: https://github.com/rust-lang/rust/issues/24676
[20:50:08] <simukis> hmm, looks similar
[20:51:52] *** Quits: munksgaard (munksgaard@moz-1f0.hq0.225.130.IP) (Ping timeout: 121 seconds)
[20:52:35] *** Quits: sigma (sigma@moz-k1ghg8.range109-153.btcentralplus.com) (Ping timeout: 121 seconds)
[20:52:37] *** Joins: ChrisMorgan (ChrisMorgan@moz-g6osuq.tpgi.com.au)
[20:53:11] *** Quits: jdm (jdm@moz-ilbt2e.cable.teksavvy.com) (Quit: )
[20:54:05] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[20:57:20] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[20:57:47] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[20:57:47] *** ChanServ sets mode: +o pcwalton
[20:58:20] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Ping timeout: 121 seconds)
[21:01:47] *** Joins: mjboa (mike@moz-gfdglf.hsi06.unitymediagroup.de)
[21:02:21] *** Quits: whipsch (whipsch@moz-bl4i0b.from.irc.camp) (Ping timeout: 121 seconds)
[21:05:58] *** Quits: gsingh93 (uid22642@moz-aq0iah.charlton.irccloud.com) (Quit: Connection closed for inactivity)
[21:07:33] *** Quits: jgallagher (john@moz-d5e8oc.hfc.comcastbusiness.net) (Client exited)
[21:08:12] *** Quits: ytain (ytain@moz-ffpck2.dsl.teksavvy.com) (Quit: Textual IRC Client: www.textualapp.com)
[21:08:30] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[21:09:38] *** Quits: rovar (rovar@moz-6iq.47m.88.38.IP) (Ping timeout: 121 seconds)
[21:13:04] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[21:16:00] *** Joins: whipsch (whipsch@moz-bl4i0b.from.irc.camp)
[21:17:49] <ChrisMorgan> acrichto: so, everything was upgraded properly on the playground but colours still don’t work. I’m guessing that means that the terminfo it finds in that environment doesn’t know anything. I wonder how to get around that…
[21:17:56] *** Joins: rovar (rovar@moz-6iq.47m.88.38.IP)
[21:18:59] *** Joins: ytain (ytain@moz-ffpck2.dsl.teksavvy.com)
[21:19:34] <arielb1> nmatsakis: I think my wf fix breaks intentionally-by-accident you 22019 example
[21:19:52] <arielb1> gh22019
[21:19:52] <[o__o]> Cache failure when environment contains predicates with free lifetimes: https://github.com/rust-lang/rust/issues/22019
[21:19:59] <arielb1> you can just remove the damn where-clause of course
[21:23:34] *** Joins: gsingh93 (gulshan@moz-ln1ktu.st3l.iv8o.0004.2601.IP)
[21:28:13] *** Quits: rovar (rovar@moz-6iq.47m.88.38.IP) (Ping timeout: 121 seconds)
[21:35:07] *** kimundi is now known as zz_kimundi
[21:36:08] *** zz_kimundi is now known as kimundi
[21:39:39] <burntsushi> acrichto: RE my regex PR: the current version is `0.1.30`. when you said minor version update, did you mean bump to `0.2.0`? (i was confused by your mention of major version, since we're still 0.x and i figure a 1.0.0 will have a bit more fanfare :P)
[21:39:47] <arielb1> nrc: cc rfc1135
[21:40:16] *** Joins: bytewise (bytewise@moz-mkh5h4.hsi16.unitymediagroup.de)
[21:40:29] *** Joins: rovar (rovar@moz-6iq.47m.88.38.IP)
[21:41:06] * nrc looks
[21:42:29] *** Joins: ctennis (ctennis@moz-vcpg3c.in.comcast.net)
[21:42:41] *** Joins: munksgaard (munksgaard@moz-478pev.u.parknet.dk)
[21:47:16] <ChrisMorgan> acrichto: ouch, sorry about breaking the bot with my changes to evaluate.sh. I forgot that it was a consumer of it too. Not at all good of me.
[21:50:44] *** Joins: bdero (bran@moz-lbs.91h.47.73.IP)
[21:55:50] * ChrisMorgan always forgets to add `r? @acrichto` on things like https://github.com/rust-lang/rust-playpen/pull/123
[21:55:55] <ChrisMorgan> acrichto: r? https://github.com/rust-lang/rust-playpen/pull/123
[21:57:02] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[21:57:59] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Connection closed)
[21:59:48] *** Joins: nickniko_ (nicknikolov@moz-ko7.r6m.215.90.IP)
[22:01:06] *** Quits: munksgaard (munksgaard@moz-478pev.u.parknet.dk) (Ping timeout: 121 seconds)
[22:02:03] *** Quits: nicknikolov (nicknikolov@moz-0q4.2rm.211.90.IP) (Ping timeout: 121 seconds)
[22:02:56] *** Joins: James_ (quassel@moz-q6malq.range86-148.btcentralplus.com)
[22:03:04] <arielb1> why can't you normalize under a binder?
[22:03:17] *** Quits: James (quassel@moz-739rgr.range86-148.btcentralplus.com) (Ping timeout: 121 seconds)
[22:03:43] *** Quits: Binero (jeroen@moz-9quuoa.access.telenet.be) (Client exited)
[22:05:41] <bstrie> edunham: welcome aboard, and let me be either the first or the hundredth person to say that I'm so, so sorry for the mess that you'll be straightening out :P
[22:06:13] <bstrie> oh, does this mean that the mac builders can live under edunham's desk now? brson will gain some legroom
[22:11:56] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[22:13:00] *** bvssvni is now known as bvssvni_
[22:13:07] <edunham> bstrie: Hypothetically we can throw some money at some *-as-a-service company and have the OSX infrastructure be their problem... (https://github.com/rust-lang/rust/issues/19286)
[22:13:22] * edunham hasn't dug into this yet, but it's on the todo list
[22:14:07] <edunham> then again, i've ordered an external monitor and might need some risers for it, so i wouldn't turn down a stack of old hardware
[22:16:34] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[22:17:01] *** Quits: tamird (textual@moz-lje.m54.130.157.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[22:19:16] *** Joins: summerlight (summerlight@moz-99k.2mj.130.121.IP)
[22:19:33] *** Quits: o11c (ben@moz-9bd9kh.customer.t3.se) (Connection closed)
[22:22:37] *** Quits: jga (jga@moz-ghe.t1q.244.77.IP) (Ping timeout: 121 seconds)
[22:23:08] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[22:23:08] *** ChanServ sets mode: +o pcwalton
[22:23:09] *** Quits: mib_naj73u (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:23:38] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Ping timeout: 121 seconds)
[22:24:58] *** Joins: foo (ctennis@moz-vcpg3c.in.comcast.net)
[22:25:16] *** Quits: ctennis (ctennis@moz-vcpg3c.in.comcast.net) (Ping timeout: 121 seconds)
[22:25:16] <arielb1> nrc: r? gh25840
[22:25:16] <[o__o]> Prevent comparison and dereferencing of raw pointers in constexprs: https://github.com/rust-lang/rust/pull/25840
[22:26:20] <arielb1> bstrie: the mac builders are the fastest we have now
[22:26:47] * nrc looks
[22:26:56] * nrc actually makes a coffee, then will look
[22:27:04] *** Quits: killercup (killercup@moz-723bo4.dip0.t-ipconnect.de) (Quit: Bye)
[22:28:50] <WindowsBunny> Gankro: The subteams should work on notifying of final comment periods on the day of, rather than a day later :P
[22:29:05] <Gankro> WindowsBunny: I thought we did!
[22:29:10] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Ping timeout: 121 seconds)
[22:29:22] <Gankro> I think niko posted on the lang ones
[22:29:28] <Gankro> And was like "ok that's handled"
[22:29:47] <Gankro> Also I don't have the rights to tag RFCs yet ):
[22:30:14] <huon> WindowsBunny: you do know that FCP's are a full week, right? :)
[22:30:33] <WindowsBunny> huon: Yeah, but missing a day from a 7 day period is a significant portion!
[22:30:58] <huon> sure, just your message implied you may've thought they were only a day
[22:31:41] <acrichto> burntsushi: oh I was saying I'm fine bumping to 0.1.31
[22:32:00] <acrichto> ChrisMorgan: yeah having to set the TERM variable actually makes sense now that I think about it
[22:32:02] <burntsushi> acrichto: ah! cool. will do.
[22:33:03] <nrc> can I dump a backtrace from within rust code without panicking?
[22:33:43] <huon> nrc: you might be able to call stuff in std::rt::backtrace(?) directly?
[22:33:46] <ChrisMorgan> acrichto: quite so, I really don’t know why it didn’t occur to me earlier that I would need to do that, to get consistent ANSI codes if nothing else.
[22:34:04] <huon> nrc: I vaguely recall njn experimenting with this sort of stuff with servo (I think)
[22:34:14] <huon> nrc: also acrichto would be the expert
[22:34:23] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[22:34:57] <acrichto> nrc: that may not be exposed frm the stdlib right now
[22:35:07] <acrichto> nrc: http://doc.rust-lang.org/std/rt/backtrace/fn.write.html
[22:35:07] *** Quits: JustAPerson (JustAPerson@moz-un628q.moe) (Ping timeout: 121 seconds)
[22:35:08] <acrichto> nvmd!
[22:35:25] <huon> look at those wonderful docs :P
[22:35:49] <nrc> that's what I was thinking!
[22:36:11] *** Quits: nickniko_ (nicknikolov@moz-ko7.r6m.215.90.IP) (Connection closed)
[22:36:47] <nrc> thanks acrichto and huon!
[22:37:51] <WindowsBunny> Is it possible to have a macro return a Result without triggering unused_result?
[22:38:04] <ChrisMorgan> acrichto: responded on rust-playpen#123, I don’t think TERM setting is an issue.
[22:38:26] <acrichto> ChrisMorgan: ok, will take a look soon
[22:38:35] *** Joins: JustAPerson (JustAPerson@moz-un628q.moe)
[22:38:46] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Ping timeout: 121 seconds)
[22:40:26] <eddyb> playbot: let _x = Ok(0);
[22:40:27] -playbot- <anon>:9:18: 9:20 error: unable to infer enough type information about `_`; type annotations required [E0282]
[22:40:27] -playbot- <anon>:9         let _x = Ok(0);
[22:40:27] -playbot- output truncated; full output at: http://bit.ly/1AyLhBq
[22:40:33] <eddyb> playbot: let _x = Ok::<_,()>(0);
[22:40:34] -playbot- ()
[22:40:48] <eddyb> playbot: {let _x = Ok::<_,()>(0);_x};
[22:40:49] -playbot- <anon>:9:9: 9:37 warning: unused result which must be used, #[warn(unused_must_use)] on by default
[22:40:50] -playbot- <anon>:9         {let _x = Ok::<_,()>(0);_x};
[22:40:50] -playbot- output truncated; full output at: http://bit.ly/1Qb1yi2
[22:40:55] *** Joins: jga (jga@moz-ghe.t1q.244.77.IP)
[22:40:55] <eddyb> WindowsBunny: don't think so
[22:41:18] <WindowsBunny> eddyb: Damn, so making println! return a Result isn't likely to happen
[22:41:30] <eddyb> playbot: {#![allow(unused_must_use)] Ok::<_,()>(0)};
[22:41:31] -playbot- <anon>:9:12: 9:13 error: an inner attribute is not permitted in this context
[22:41:31] -playbot- <anon>:9         {#![allow(unused_must_use)] Ok::<_,()>(0)};
[22:41:31] -playbot- output truncated; full output at: http://bit.ly/1AyLlkT
[22:41:38] <WindowsBunny> nevermind that it would be a breaking change anyway
[22:42:29] *** Quits: summerlight (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[22:46:12] <eddyb> acrichto, pnkfelix: so, is there any chance that we could remove the Sized bound from Clone (and thus Copy)? there's some nice DST things that we could do with [T]: Copy iff T: Copy (and even better, str: Copy)
[22:46:47] *** Quits: JustAPerson (JustAPerson@moz-un628q.moe) (Ping timeout: 121 seconds)
[22:46:59] <huon> I guess we could have a `where Self: Sized` on the `clone` method
[22:47:09] <pnkfelix> it certainly seems like an unintended consequence of `Copy: Clone`. 
[22:47:18] <eddyb> huon: I wonder why that isn't automatic
[22:48:05] <eddyb> whether it's required is a property of the signature... I don't know, this whole "object-safe" stuff seems uncalled for
[22:48:31] <ChrisMorgan> eddyb: what’s an example of something that str implementing Copy would achieve?
[22:48:33] <eddyb> and we're going back to the previous state of "object-safe methods" just with more manual annotations
[22:48:43] <eddyb> ChrisMorgan: creating Rc<str> from &str
[22:48:50] *** Quits: larhat (Adium@moz-vlo5br.cable.virginm.net) (Quit: Leaving.)
[22:49:25] <ChrisMorgan> acrichto: yay! \o/ colour is now working on play.rl.o ☺
[22:49:37] <eddyb> huon, pnkfelix: but removing the Sized bound of Clone is backwards-incompatible, strictly speaking
[22:49:39] *** Quits: playbot (playbot@moz-1vk5qd.compute.amazonaws.com) (Connection closed)
[22:49:39] *** Quits: playbot-mini (playbot-min@moz-1vk5qd.compute.amazonaws.com) (Connection closed)
[22:49:39] <pnkfelix> eddyb: didn't you file an RFC for this?  Or was it only a discuss thread?
[22:49:41] *** Joins: playbot-mini (playbot-min@moz-1vk5qd.compute.amazonaws.com)
[22:49:41] *** Joins: playbot (playbot@moz-1vk5qd.compute.amazonaws.com)
[22:49:41] <acrichto> ChrisMorgan: yay!
[22:49:53] <eddyb> pnkfelix: I don't think it was either
[22:50:09] <pnkfelix> eddyb: I thought you were pointing out my mistakes in reasoning about it somewhere on github
[22:50:24] <WindowsBunny> So is Emily going to hang out on IRC?
[22:50:33] <ChrisMorgan> acrichto: I was wondering about RUST_BACKTRACE=1, especially for tests. What do you think?
[22:50:40] <eddyb> pnkfelix: https://github.com/rust-lang/rust/issues/25776
[22:50:41] <ChrisMorgan> WindowsBunny: edunham
[22:50:43] <nrc> logs + backtraces = awesome
[22:50:49] <WindowsBunny> ChrisMorgan: Ah ha!
[22:50:52] <eddyb> substitute NotObjectSafe with Clone
[22:50:56] <edunham> \o
[22:51:00] <WindowsBunny> ChrisMorgan: Someone should update the teams page :P
[22:51:01] <acrichto> ChrisMorgan: I would not expect it, especially for tests, b/c tests are super noisy with it on
[22:51:07] <eddyb> pnkfelix: I don't know how macros could make use of this TBQH
[22:51:33] <ChrisMorgan> acrichto: noisy perhaps, but it’s a very helpful thing to have.
[22:51:55] <edunham> WindowsBunny: link to teams page, and I'll try to fix it myself?
[22:51:59] <acrichto> ChrisMorgan: right but play is not a good place to be noisy
[22:52:04] <WindowsBunny> edunham: http://www.rust-lang.org/team.html
[22:52:11] <edunham> ah, thanks :)
[22:52:19] <ChrisMorgan> acrichto: I guess so.
[22:52:25] <WindowsBunny> A page which I can't find a link to anywhere
[22:52:28] <eddyb> pnkfelix: I also don't expect anyone to have written SizedOnlyTrait + ?Sized intentionally
[22:52:37] <WindowsBunny> except somewhere deep in the rust internals discourse
[22:53:01] <ChrisMorgan> acrichto: I could get really fancy and make it detect backtraces and either make them grey or collapse them by default, but that’s all extra work that I don’t feel like touching at the moment at least.
[22:53:14] <edunham> hmm. Not sure if I actually belong on that particular page; "tools" team appears to be "people who write tools in Rust" sort of thing
[22:53:47] <edunham> soon enough I'll start trying to package Rust/Cargo for the more popular distros, which will be a fun adventure, and then I guess it'd count :)
[22:53:57] <pnkfelix> WindowsBunny: there was a link on twitter
[22:53:59] <eddyb> pnkfelix: I wanted to use Rc<str> in the interner to test the waters and Rc::copy_from<T: ?Sized+Copy>(src: &T) -> Rc<T> seemed like a nice API to try out
[22:54:15] *** Joins: swgillespie (swgillespie@moz-1i5.3un.220.167.IP)
[22:54:27] <huon> edunham: oh awesome
[22:54:30] *** Joins: mohawk (Mibbit@moz-juv.9o3.252.72.IP)
[22:54:39] <eddyb> pnkfelix: but I can't just make the changes because of stability
[22:54:42] <WindowsBunny> edunham: Does Windows count as a distro? :P
[22:54:51] <huon> edunham: meet gus (gus meet edunham) (gus has done a lot of work with packaging for debian
[22:54:56] *** Joins: njn (chatzilla@moz-e6r6of.iinet.net.au)
[22:55:01] <nrc> oh god, instant regret, I'd forgotten how long trans stack traces were
[22:55:08] * nrc eyes bleed
[22:55:23] <arielb1> eddyb: I think we have Copy: Sized
[22:55:31] * eddyb is also not convinced object safety is working out for us
[22:55:43] <arielb1> object safety != : Sized
[22:55:45] <eddyb> arielb1: we have Copy: Clone and Clone: Sized
[22:56:00] <huon> object safety solves a very concrete problem
[22:56:07] <eddyb> does it now?
[22:56:28] <eddyb> in what case can't you just put `where Self: Sized` on the problematic methods?
[22:56:30] <arielb1> eddyb: and you want to make clone not Self: Sized
[22:56:31] <edunham> WindowsBunny: nice to meet you!
[22:56:34] <ChrisMorgan> acrichto: ooh, I didn’t make tests get colour! I could do that too!
[22:56:38] <arielb1> not :Sized
[22:56:44] <eddyb> arielb1: yes
[22:56:45] *** Quits: lu324 (lu324___@moz-3v8ljg.dhcp.embarqhsd.net) (Ping timeout: 121 seconds)
[22:56:45] <huon> eddyb: yes, object safety allows <T: Trait + ?Sized> &T to be used with &Trait
[22:56:49] <arielb1> and that is, of course, a [breaking-change]
[22:57:02] *** Joins: lu324 (lu324___@moz-3v8ljg.dhcp.embarqhsd.net)
[22:57:03] <eddyb> huon: is there a trait you can't make object-safe?
[22:57:22] <arielb1> eddyb: a trait with a Sized as a supertrait
[22:57:25] <huon> eddyb: by just sticking where Self: Sized on every method?
[22:57:29] <eddyb> yes
[22:57:37] <huon> eddyb: Eq couldn't be implemented for [T] or str if we did that
[22:57:43] <huon> *PartialEq
[22:57:45] <arielb1> or an associated type bound that requires Self: Sized
[22:58:01] <eddyb> huon: on every method which breaks object safety
[22:58:02] *** Quits: mohawk (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:58:13] <huon> eddyb: the `eq` method breaks object safety
[22:59:05] <pnkfelix> Is the Eq trait even a reasonable example here?
[22:59:11] <eddyb> huon: *how*?
[22:59:15] <pnkfelix> its not like Box<Eq> makes sense, right?
[22:59:34] <huon> eddyb: `fn eq(&self, other: &Self) -> bool`
[22:59:37] <eddyb> isn't it fn foo(&self, other: &T) where T is a type parameter of the trait?
[22:59:39] <WindowsBunny> edunham: I claim your toes for my personal nibbling.
[22:59:42] <huon> oh, we've switch to a type parameter
[22:59:43] <arielb1> eddyb: yes
[22:59:44] <eddyb> huon: that's... not the signature
[22:59:46] <arielb1> but Eq forces Self=T
[23:00:02] <huon> eddyb: well, any trait with a method with that signature fails
[23:00:18] <huon> eddyb: sure we could switch them all to use defaulted type parameters... but really?
[23:00:21] <arielb1> huon: in that case you could add Self: Sized (maybe?)
[23:00:52] <huon> arielb1: this is an example when we can't add that
[23:01:03] <huon> because the trait can be used with [T] or str
[23:01:08] <arielb1> huon: with PartialEq/Eq of course you can't because of supertrait
[23:01:09] <huon> s/can/might want to be/
[23:01:26] <eddyb> so what you want to say is `where Self != Trait`
[23:01:48] <huon> yup, that fine-grained rule has been proposed :)
[23:03:03] <eddyb> but you also need `Self: Sized` if you, e.g. return Self by value
[23:03:15] <arielb1> nmatsakis: about lifetime parameters
[23:03:39] <arielb1> nmatsakis: I think my wf fix breaks intentionally-by-accident you gh22019 example
[23:03:40] <[o__o]> Cache failure when environment contains predicates with free lifetimes: https://github.com/rust-lang/rust/issues/22019
[23:04:52] <acrichto> steveklabnik: ping
[23:04:59] <acrichto> steveklabnik: is the referenced issue on https://github.com/rust-lang/rust/pull/25836 the wrong issue?
[23:06:45] <eddyb> huon: yeah, I don't think we can do much better without type inequality
[23:07:21] <nmatsakis> arielb1: I saw your comment in IRC earlier; I don't have an immediate reaction at this moment :)
[23:07:35] *** Joins: JustAPerson (JustAPerson@moz-un628q.moe)
[23:07:43] *** Joins: dinfuehr (dinfuehr@moz-uocjue.highway.telekom.at)
[23:08:14] *** Joins: o11c (ben@moz-9bd9kh.customer.t3.se)
[23:08:58] <eddyb> huon: really bums me that we've made it backwards-incompatible to remove : Sized bounds
[23:09:21] <arielb1> eddyb: why should they differ from any other bound?
[23:09:22] <eddyb> ?Sized "bounds" are still weird
[23:10:01] <arielb1> removing bounds from functions is safe
[23:10:06] <arielb1> from traits is not because invariance
[23:10:13] <arielb1> from structs should be safe
[23:10:57] <arielb1> removing supertraits is bad because invariance but in other direction from normal trait bounds
[23:10:59] <eddyb> what about `trait Clone where Self: Sized {...}`, would that exhibit the issue?
[23:11:11] <arielb1> eddyb: all Self: bounds are supertraits
[23:11:26] <eddyb> where (Self,): Sized :P
[23:11:38] <arielb1> eddyb: that does not imply Self: Sized
[23:11:55] <eddyb> really, is there no controversial way that we could have avoided backwards-incompatibility?
[23:11:58] <arielb1> it actually (should) cause a wf error requiring you to add a Self: Sized
[23:12:05] <arielb1> eddyb: put the Self: Sized bound on clone
[23:12:20] <arielb1> rather than on the trait
[23:12:26] <arielb1> then it won't become a supertrait bound
[23:12:27] *** Quits: mdup (cc@moz-6fgo9p.abo.wanadoo.fr) (Ping timeout: 121 seconds)
[23:12:31] <arielb1> simple
[23:12:34] <eddyb> arielb1: that would require hindsight
[23:13:06] *** Quits: Astrum|Lap (Astrum|Lap@moz-7enfbr.co.comcast.net) (Client exited)
[23:13:06] <arielb1> eddyb: Clone: Sized came from the days before where-clauses on methods
[23:13:15] *** Quits: eibwen (eibwen@moz-mvc8eh.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[23:13:40] <arielb1> I think the general rule is that you shouldn't add random supertrait bounds
[23:13:57] <steveklabnik> acrichto: pong
[23:14:01] * steveklabnik look
[23:14:01] <steveklabnik> s
[23:14:22] <acrichto> steveklabnik: ah yeah just added a few comments to that thread
[23:14:24] <eddyb> huon: hmm, maybe my reasoning was: automatically implying `where Self: Sized` where needed because of by-value uses of Self, not necessarily object-unsafe conditions, thus making more traits object-safe by default
[23:14:53] <eddyb> huon: s/implying/not requiring it on the trait itself/
[23:15:16] *** Quits: dinfuehr (dinfuehr@moz-uocjue.highway.telekom.at) (Connection closed)
[23:15:50] <steveklabnik> acrichto: updated. you were right about the issue number, my bad :(
[23:16:42] *** kimundi is now known as zz_kimundi
[23:18:09] <acrichto> steveklabnik: hm, I think there's a flag to make rustdoc not emit heading numbers maybe?
[23:18:15] <acrichto> steveklabnik: it's probably just some random thing that needs to be passed
[23:21:25] <ChrisMorgan> Why exactly do our test runners produce a leading \n?
[23:22:14] *** Joins: tamird (textual@moz-gg3hct.res.rr.com)
[23:24:31] *** Quits: gsingh93 (gulshan@moz-ln1ktu.st3l.iv8o.0004.2601.IP) (Ping timeout: 121 seconds)
[23:25:23] <steveklabnik> acrichto: hmm. yeah, i mean, i guess i don't see 1. 2. 3. as a problem, but if you want them removed, i can check it out
[23:25:31] *** Quits: mjboa (mike@moz-gfdglf.hsi06.unitymediagroup.de) (Quit: leaving)
[23:25:59] <acrichto> steveklabnik: oh I thought that's what the bug was about
[23:29:17] <steveklabnik> it currently shows 0.1 0.2 0.3
[23:29:23] <steveklabnik> this makes them just 1, 2, 3
[23:29:34] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[23:32:48] *** Quits: lu324 (lu324___@moz-3v8ljg.dhcp.embarqhsd.net) (Connection closed)
[23:33:05] *** Joins: lu324 (lu324___@moz-3v8ljg.dhcp.embarqhsd.net)
[23:33:20] *** Quits: aepsil0n (eduard@moz-6491ha.mv2h.pepi.8071.2a02.IP) (Connection closed)
[23:34:48] *** Quits: nham (nham@moz-lglsfe.il.comcast.net) (Quit: leaving)
[23:35:59] <arielb1> nrc: updated gh25840
[23:35:59] <[o__o]> Prevent comparison and dereferencing of raw pointers in constexprs: https://github.com/rust-lang/rust/pull/25840
[23:37:02] <nrc> arielb1: lgtm, but needs a rebase
[23:44:38] <Gankro> Is it UB to read an undef location as *any* type, or are there special dispensations for e.g. primitives?
[23:45:17] * o11c reminds Gankro that floats might have trap representations
[23:45:29] <Gankro> s/primitive/integer :P
[23:45:43] <huon> Gankro: in LLVM, I think reading an undef location creates an undef value
[23:45:50] <huon> it's not inherently UB to do the read
[23:45:53] <huon> (I may be wrong)
[23:46:36] <huon> (i.e. for any type)
[23:47:02] *** Joins: nodweber (nodweber@moz-knt.fgq.178.5.IP)
[23:47:31] <huon> Gankro: hm, how long ago was ~[T] like Vec<Option<T>>?
[23:47:53] <Gankro> huon: I only recall strcat alluding to it
[23:47:57] <huon> (it's not something I remember)
[23:47:58] <huon> ah
[23:48:20] <huon> I guess nmatsakis or pcwalton would know for sure
[23:48:22] <eddyb> the Option<T> sounds like zeroing
[23:48:33] <Gankro> Needless to say they were happy to not have that be the case anymore!
[23:50:58] *** Quits: mgottschlag (quassel@moz-8uvcc8.hsi15.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[23:51:26] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[23:51:26] *** ChanServ sets mode: +o pcwalton
[23:51:40] *** Joins: mgottschlag (quassel@moz-jofqrs.scc.kit.edu)
[23:54:36] <koobs> bstrie: rust built with system llvm
[23:54:56] <koobs> bstrie: next is tests on 9.x (apparently broken) and i386 on all versions
[23:56:07] <huon> is there a channel for the tools subteam?
[23:56:43] <huon> (answer: yes, the obvious guess)
[23:57:42] *** Quits: bytewise (bytewise@moz-mkh5h4.hsi16.unitymediagroup.de) (Quit: Quit)
[23:58:20] <gus> edunham: hi :)   Re cargo, I just need a version that can build with a stable rustc and then the Debian package is good to go.
[23:58:30] <Gankro> huon: That's actually a honeypot channel for naive snoopers ;)
[23:58:57] <huon> Gankro: maybe that's what they've told you
[23:59:07] <huon> Gankro: there's layers and layers of intrigue
