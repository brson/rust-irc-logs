[00:00:45] *** Quits: Siosm (quassel@moz-hkaoqt.fr) (Ping timeout: 121 seconds)
[00:10:44] <Gankro> nmatsakis: if we had specified field destruction order, could we not say that fields in tuples and structs strictly outlive other fields?
[00:11:15] <Gankro> *fields and tuples
[00:11:20] <nmatsakis> Gankro: i.e., that field `f` strictly outlives field `g`, because we know `f` will be destroyed first?
[00:11:23] <nmatsakis> er, 'g' first
[00:11:24] <Gankro> yes
[00:11:44] <nmatsakis> yes, we could say that, of course we'd have to assign distinct lifetimes to them or what have you
[00:11:47] <nmatsakis> MIR probably helps here
[00:11:51] <nmatsakis> by making all of this explicit 
[00:11:55] <nmatsakis> or offering us the opportunity to do so
[00:12:06] <nmatsakis> so that this kind of reasoning just follows naturally
[00:12:12] <Gankro> nmatsakis: so non-strict outlives relationships only *really* derive from opaque container types, then?
[00:12:37] <nmatsakis> I'm not sure I can parse that sentence =)
[00:12:50] <nmatsakis> but I think the answer is yes
[00:12:54] <nmatsakis> that is, if you impl Drop, basically
[00:13:08] <nmatsakis> then we have no real insight into what order you are swapping and dropping things
[00:13:30] <nmatsakis> I think what you mean by "non-strict outlives relationships derive from..." is "we have to be conservative"
[00:13:45] <nmatsakis> *we have to be conservative due to
[00:13:51] <nmatsakis> in which case that sounds about right?
[00:14:00] <nmatsakis> anyway, I'm not really here, got to go, ttynw
[00:14:09] <Gankro> nmatsakis: kk no worries
[00:15:05] *** Joins: zmack (zmack@moz-va0ce0.fios.verizon.net)
[00:20:57] *** Joins: zmack_ (zmack@moz-va0ce0.fios.verizon.net)
[00:21:01] *** Quits: zmack (zmack@moz-va0ce0.fios.verizon.net) (Ping timeout: 121 seconds)
[00:22:12] *** Quits: swgillespie (swgillespie@moz-cla.3un.220.167.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:38:47] *** chmanchester is now known as chmanchester|afk
[01:27:18] *** Joins: Elaine (Elaine@moz-35s2fm.members.linode.com)
[01:27:29] *** ChanServ sets mode: +o Elaine
[01:28:31] *** Quits: Lateralus (Lateralus@moz-4eoqem.br.cox.net) (Connection closed)
[01:33:05] *** Joins: dcb (textual@moz-v6l3du.ca.comcast.net)
[01:33:53] *** Quits: dcb (textual@moz-v6l3du.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[01:34:27] *** Joins: dcb (textual@moz-v6l3du.ca.comcast.net)
[01:36:09] <tamird> acrichto so turns out changing to `linker: "lld"` isn't enough because it's not in the PATH. Is there a standard way of referring to llvm-provided binaries in rustc?
[01:36:35] *** Quits: dcb (textual@moz-v6l3du.ca.comcast.net) (Connection closed)
[01:43:57] *** Joins: Nashenas88 (Nashenas88@moz-of81j9.miamfl.sbcglobal.net)
[01:49:42] *** Joins: Quxxy (chatzilla@moz-efh10q.internode.on.net)
[01:50:43] *** Parts: Quxxy (chatzilla@moz-efh10q.internode.on.net) ("")
[02:01:58] *** Joins: pwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[02:01:58] *** ChanServ sets mode: +o pwalton
[02:02:18] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Connection closed)
[02:02:18] *** pwalton is now known as pcwalton
[02:14:47] *** Joins: Kingsquee (kingsquee@moz-k72lip.bchsia.telus.net)
[02:19:47] *** Quits: newbie (eibwen@moz-oh9d77.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[02:20:54] *** Quits: Peach (Fancy3D@moz-500.6lb.246.96.IP) (Ping timeout: 121 seconds)
[02:24:09] *** Quits: Sho (sho@moz-0vcao9.cust.telecolumbus.net) (Quit: Konversation terminated!)
[02:34:05] *** Joins: Peach (Fancy3D@moz-500.6lb.246.96.IP)
[02:36:23] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[02:38:11] *** Joins: dp_ (dp@moz-jbmop1.gb4f.8ao9.0e35.2a01.IP)
[02:42:57] *** Joins: summerlight__ (summerlight@moz-lb3.6do.193.175.IP)
[02:48:44] *** Quits: zmack_ (zmack@moz-va0ce0.fios.verizon.net) (Connection closed)
[02:48:50] *** Quits: barosl (barosl@moz-tmp.qma.67.220.IP) (Quit: Leaving)
[02:51:57] *** Quits: kimundi (kimundi@moz-bsafd4.bs4k.bqfc.57bc.2002.IP) (Ping timeout: 121 seconds)
[02:53:19] *** Quits: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com) (Client exited)
[02:55:54] *** Joins: kimundi (kimundi@moz-k57ctm.dip0.t-ipconnect.de)
[03:01:25] *** Quits: Nashenas88 (Nashenas88@moz-of81j9.miamfl.sbcglobal.net) (Client exited)
[03:06:02] *** Joins: Nashenas88 (Nashenas88@moz-of81j9.miamfl.sbcglobal.net)
[03:06:18] * Gankro is having fun making a fool of themselves in nmatsakis' shiny new break everything RFC
[03:22:10] *** Quits: Pierre_M_ (Pierre_M@moz-l5anv0.slkc.qwest.net) (Ping timeout: 121 seconds)
[03:31:08] *** Joins: avikpal (avikpal@moz-tqd.p8t.194.117.IP)
[03:36:05] *** Quits: avikpal (avikpal@moz-tqd.p8t.194.117.IP) (Ping timeout: 121 seconds)
[03:38:00] *** Joins: avikpal (avikpal@moz-ii1.loq.194.117.IP)
[03:42:33] *** Joins: barosl (barosl@moz-tmp.qma.67.220.IP)
[03:47:57] *** Quits: avikpal (avikpal@moz-ii1.loq.194.117.IP) (Ping timeout: 121 seconds)
[03:55:11] *** Joins: avikpal (avikpal@moz-ao9.9l2.194.117.IP)
[03:57:23] *** Joins: Pierre_M_ (Pierre_M@moz-l5anv0.slkc.qwest.net)
[04:11:08] *** Joins: avikpal_ (avikpal@moz-flv.4af.194.117.IP)
[04:11:09] *** Quits: avikpal (avikpal@moz-ao9.9l2.194.117.IP) (Ping timeout: 121 seconds)
[04:15:18] *** Joins: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net)
[04:15:18] *** ChanServ sets mode: +o pcwalton
[04:20:31] *** Quits: Amaranth (travis@moz-1raqsl.cpe.cableone.net) (Ping timeout: 121 seconds)
[04:21:30] <Manishearth> Gankro: mir?
[04:21:39] <Manishearth> or something else?
[04:21:46] <Gankro> No https://github.com/rust-lang/rfcs/pull/1214
[04:22:20] <Gankro> MIR is an implementation detail
[04:22:24] <Gankro> *so boring*
[04:22:39] <Manishearth> but so awesome
[04:22:44] <Manishearth> think of all the things we can do with MIR
[04:23:16] <Manishearth> oh, also, nmatsakis, know any other awesome profs at my uni? Your recommendation last time turned out to be awesome :D
[04:23:22] *** Joins: genbattle (genbattle@moz-poo2cb.xtra.co.nz)
[04:24:39] <Manishearth> otherwise I'm considering taking a program analysis course, which seems to be a sort of primer-to-understanding-borrowck if that ever exists
[04:25:54] <Manishearth> Gankro: that sounds like a fun thing to read on my flight today
[04:26:36] <Manishearth> trying to understand type system nuances without internet is going to be ... interesting
[04:27:12] <edunham> Manishearth: file bugs against the docs you're reading offline for "___ did not make sense without Googling"? that could actually be a pretty good test of documentation
[04:27:33] <Manishearth> edunham: yeah but I'm not reading docs offline :)
[04:27:37] <Manishearth> I'm reading an rfc offline
[04:28:03] <Gankro> Just draft a rambling email
[04:28:05] <Manishearth> I was surprisingly able to do that with the XHR spec last year as long as I had a copy of Fetch and DOM.
[04:28:12] <edunham> ah. I guess I consider RFCs to be documentation for the proposed change
[04:28:14] <Manishearth> Gankro: in my world, all emails are rambling emails
[04:28:38] <Manishearth> edunham: yeah, they end up being stand ins for docs for a while, but eventually someome documents them
[04:29:14] <Gankro> edunham: The annoying thing about RFCs is they silently drift from reality
[04:29:38] <Gankro> So you're like "oh this was specified in RFC xxxx" and then some compiler dev is like "lol that's not how it works at all anymore"
[04:30:15] <Gankro> And then you cry
[04:30:18] <Gankro> every time
[04:30:43] <edunham> nah, I only cry sometimes... sysadminning makes one cynical and lowers one's expectations of the world :P
[04:32:22] <Gankro> Ah, the old dead inside strategy
[04:41:20] *** Quits: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net) (Client exited)
[04:42:10] *** Joins: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net)
[04:42:10] *** ChanServ sets mode: +o pcwalton
[04:42:43] *** Quits: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net) (Client exited)
[04:55:32] *** Joins: dcb (textual@moz-v6l3du.ca.comcast.net)
[04:59:56] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[05:14:43] *** Quits: RC9 (RCIX@moz-7omm6s.ph.cox.net) (Connection closed)
[05:17:51] *** Joins: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net)
[05:21:05] *** Quits: avikpal_ (avikpal@moz-flv.4af.194.117.IP) (Ping timeout: 121 seconds)
[05:21:54] *** Joins: avikpal (avikpal@moz-p1h.ds3.194.117.IP)
[05:25:50] *** Quits: summerlight__ (summerlight@moz-lb3.6do.193.175.IP) (Ping timeout: 121 seconds)
[05:33:04] *** Quits: Nashenas88 (Nashenas88@moz-of81j9.miamfl.sbcglobal.net) (Client exited)
[05:35:44] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Connection closed)
[05:36:23] *** Quits: genbattle (genbattle@moz-poo2cb.xtra.co.nz) (Ping timeout: 121 seconds)
[05:41:50] *** Quits: avikpal (avikpal@moz-p1h.ds3.194.117.IP) (Ping timeout: 121 seconds)
[05:42:30] *** Joins: avikpal (avikpal@moz-nq9.0kg.194.117.IP)
[05:46:36] *** Quits: andrew-d (andrew-d@moz-dgoafa.cusf.glje.ff48.2607.IP) (Ping timeout: 121 seconds)
[05:47:21] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Connection closed)
[05:47:47] *** Joins: andrew-d (andrew-d@moz-dgoafa.cusf.glje.ff48.2607.IP)
[05:48:27] *** Joins: summerlight__ (summerlight@moz-lb3.6do.193.175.IP)
[05:49:15] *** Quits: amir (amir@moz-jnohkj.3bcq.01f6.0168.2a02.IP) (Ping timeout: 121 seconds)
[05:52:29] *** Quits: avikpal (avikpal@moz-nq9.0kg.194.117.IP) (Ping timeout: 121 seconds)
[05:54:09] *** Joins: avikpal (avikpal@moz-9ec.420.194.117.IP)
[06:02:23] *** Joins: amir (amir@moz-qbf4gg.fiber7.init7.net)
[06:10:51] *** Joins: laumann (thomas@moz-n9e72h.0.fullrate.dk)
[06:12:56] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[06:13:14] *** Quits: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net) (Client exited)
[06:13:49] *** Joins: mukilan (mukilan@moz-71j.del.164.122.IP)
[06:15:22] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[06:16:59] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Ping timeout: 121 seconds)
[06:19:28] *** Joins: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net)
[06:20:33] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[06:20:54] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Quit: It's a joke, it's all a joke.)
[06:22:07] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Connection closed)
[06:23:17] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[06:27:32] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Connection closed)
[06:30:32] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[06:31:25] *** Joins: eerie (eerie@moz-bn66jk.red.bezeqint.net)
[06:33:03] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[06:35:57] *** Quits: dcb (textual@moz-v6l3du.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[06:38:24] *** Quits: eerie (eerie@moz-bn66jk.red.bezeqint.net) (Ping timeout: 121 seconds)
[06:39:29] *** Quits: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net) (Client exited)
[06:43:55] *** Quits: Peach (Fancy3D@moz-500.6lb.246.96.IP) (Client exited)
[06:46:47] *** Joins: dcb (textual@moz-v6l3du.ca.comcast.net)
[06:50:00] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[06:55:50] *** Joins: eljay (eljay@moz-fmte10.skybroadband.com)
[07:01:54] *** Quits: dcb (textual@moz-v6l3du.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[07:02:53] *** Quits: Rym (uid91135@moz-n2i7qm.charlton.irccloud.com) (Quit: Connection closed for inactivity)
[07:15:55] *** Joins: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net)
[07:16:20] *** Quits: laumann (thomas@moz-n9e72h.0.fullrate.dk) (Ping timeout: 121 seconds)
[07:21:26] *** Quits: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net) (Client exited)
[07:22:15] *** Joins: nagisa (nagisa@moz-8t068g.static.zebra.lt)
[07:22:44] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[07:23:45] *** Joins: dlight (dlight@moz-1pmpc1.gvt.net.br)
[07:26:47] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Ping timeout: 121 seconds)
[07:32:39] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Quit: It's a joke, it's all a joke.)
[07:34:53] *** Joins: eerie (eerie@moz-bn66jk.red.bezeqint.net)
[07:36:37] *** Joins: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net)
[07:37:34] *** Quits: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net) (Client exited)
[07:39:14] *** Quits: eerie (eerie@moz-bn66jk.red.bezeqint.net) (Ping timeout: 121 seconds)
[07:45:09] *** Quits: avikpal (avikpal@moz-9ec.420.194.117.IP) (Ping timeout: 121 seconds)
[07:45:11] *** Joins: laumann (thomas@moz-n9e72h.0.fullrate.dk)
[07:46:00] *** Joins: avikpal (avikpal@moz-9ec.420.194.117.IP)
[07:46:45] *** Quits: laumann (thomas@moz-n9e72h.0.fullrate.dk) (Quit: leaving)
[07:46:48] *** Joins: laumann (thomas@moz-n9e72h.0.fullrate.dk)
[07:59:00] *** Quits: oddvar (oddvar@moz-iu5hbq.openmarket.com) (Ping timeout: 121 seconds)
[07:59:51] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[08:01:53] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[08:09:36] *** Joins: Lateralus (Lateralus@moz-4eoqem.br.cox.net)
[08:15:47] *** Joins: waffles (Wafflespean@moz-855.9ac.136.123.IP)
[08:16:19] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[08:16:52] *** Joins: avikpal_ (avikpal@moz-8g9.onn.194.117.IP)
[08:17:21] *** Quits: waffles (Wafflespean@moz-855.9ac.136.123.IP) (Quit: C'yall later :))
[08:18:16] *** Quits: avikpal (avikpal@moz-9ec.420.194.117.IP) (Ping timeout: 121 seconds)
[08:23:39] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[08:26:34] *** Joins: eerie (eerie@moz-bn66jk.red.bezeqint.net)
[08:27:10] *** Quits: eerie (eerie@moz-bn66jk.red.bezeqint.net) (Connection closed)
[08:27:42] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Ping timeout: 121 seconds)
[08:28:26] *** Quits: Lateralus (Lateralus@moz-4eoqem.br.cox.net) (Connection closed)
[08:29:26] *** Quits: mukilan (mukilan@moz-71j.del.164.122.IP) (A TLS packet with unexpected length was received.)
[08:30:40] *** Quits: aldeka (quassel@moz-qqf.of6.243.162.IP) (Connection closed)
[08:30:41] *** Joins: aldeka (quassel@moz-qqf.of6.243.162.IP)
[08:37:29] *** Joins: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net)
[08:43:03] *** Quits: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net) (Client exited)
[08:47:52] *** Joins: jensnockert (jensnockert@moz-pvj.o2f.219.84.IP)
[08:51:20] *** Quits: jensnockert (jensnockert@moz-pvj.o2f.219.84.IP) (Connection closed)
[08:54:51] *** Quits: bjz (bjz@moz-puppgq.tpgi.com.au) (Quit: My Mac has gone to sleep. ZZZzzz…)
[08:55:25] *** Joins: jensnockert (jensnockert@moz-pvj.o2f.219.84.IP)
[08:57:46] *** Quits: jensnockert (jensnockert@moz-pvj.o2f.219.84.IP) (Connection closed)
[09:00:24] *** Quits: dbittman (piranha@moz-3ab361.ca.comcast.net) (Ping timeout: 121 seconds)
[09:02:18] *** Joins: mukilan (mukilan@moz-71j.del.164.122.IP)
[09:03:16] *** Joins: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net)
[09:04:02] *** Quits: nham (nham@moz-lglsfe.il.comcast.net) (Ping timeout: 121 seconds)
[09:04:46] *** Joins: p1start (p1start@moz-nftjhe.org)
[09:17:10] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[09:18:46] *** Quits: laumann (thomas@moz-n9e72h.0.fullrate.dk) (Ping timeout: 121 seconds)
[09:20:44] *** Joins: eerie (eerie@moz-8qhkpk.red.bezeqint.net)
[09:23:05] *** Joins: mitaa (mitaa@moz-6qr023.dyn.drei.com)
[09:25:01] *** Quits: eerie (eerie@moz-8qhkpk.red.bezeqint.net) (Ping timeout: 121 seconds)
[09:27:42] <acrichto> tamird: we typically have $target/stageN/rustlib/$target/bin for binaries
[09:27:53] <acrichto> that's auto-added to PATH so lld should be in there if you want it in PATH automatically
[09:30:35] *** Quits: eljay (eljay@moz-fmte10.skybroadband.com) (Quit: Leaving)
[09:38:22] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[09:43:31] *** Joins: eljay (eljay@moz-fmte10.skybroadband.com)
[09:48:12] *** Joins: summerlight_ (summerlight@moz-lb3.6do.193.175.IP)
[09:51:43] *** Quits: summerlight__ (summerlight@moz-lb3.6do.193.175.IP) (Ping timeout: 121 seconds)
[09:53:59] *** Joins: mukilan_ (mukilan@moz-p2u.ljc.164.122.IP)
[09:54:39] *** Quits: mukilan (mukilan@moz-71j.del.164.122.IP) (Ping timeout: 121 seconds)
[09:55:59] *** Quits: mukilan_ (mukilan@moz-p2u.ljc.164.122.IP) (A TLS packet with unexpected length was received.)
[09:57:18] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Connection closed)
[09:58:10] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[10:03:09] *** Joins: newbie (eibwen@moz-oh9d77.dip0.t-ipconnect.de)
[10:09:38] *** Joins: druznek (druznek@moz-0s4.6mg.235.2.IP)
[10:10:13] *** Joins: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP)
[10:21:29] *** Joins: eerie (eerie@moz-11broi.red.bezeqint.net)
[10:25:46] *** Quits: eerie (eerie@moz-11broi.red.bezeqint.net) (Ping timeout: 121 seconds)
[10:28:56] *** Joins: avikpal (avikpal@moz-pce.ep4.194.117.IP)
[10:30:36] *** Quits: avikpal_ (avikpal@moz-8g9.onn.194.117.IP) (Ping timeout: 121 seconds)
[10:32:32] *** Quits: mitaa (mitaa@moz-6qr023.dyn.drei.com) (Ping timeout: 121 seconds)
[10:33:26] *** Joins: Feyn (aram@moz-mne.csn.115.42.IP)
[10:38:48] *** Joins: nham (nham@moz-lglsfe.il.comcast.net)
[10:43:35] *** Joins: sigma (sigma@moz-92585k.range217-44.btcentralplus.com)
[10:43:57] *** Joins: mitaa (mitaa@moz-bla0s8.dyn.drei.com)
[10:46:48] *** Quits: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua) (A TLS packet with unexpected length was received.)
[10:47:27] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[10:48:15] *** Joins: summerlight__ (summerlight@moz-lb3.6do.193.175.IP)
[10:48:21] *** Joins: blueridanus (Mibbit@moz-rlu.hnt.59.138.IP)
[10:51:43] *** Quits: summerlight_ (summerlight@moz-lb3.6do.193.175.IP) (Ping timeout: 121 seconds)
[10:52:08] <blueridanus> What theme does rustdoc use for syntax highlighting? 
[10:52:12] <blueridanus> It looks so nice.
[10:59:42] *** Joins: eerie (eerie@moz-11broi.red.bezeqint.net)
[11:01:59] *** Joins: James__ (quassel@moz-vcnd98.range86-148.btcentralplus.com)
[11:04:54] *** Joins: imperio (Mibbit@moz-8otf3a.fbx.proxad.net)
[11:13:14] *** Quits: druznek (druznek@moz-0s4.6mg.235.2.IP) (Quit: Leaving)
[11:14:04] *** Joins: Lateralus (Lateralus@moz-4eoqem.br.cox.net)
[11:14:34] *** Quits: eerie (eerie@moz-11broi.red.bezeqint.net) (Connection closed)
[11:26:12] *** Joins: mukilan (mukilan@moz-p2u.ljc.164.122.IP)
[11:27:09] *** Quits: stl (stl@moz-al5.8pf.15.176.IP) (Ping timeout: 121 seconds)
[11:27:18] *** Quits: bgamari (bgamari@moz-lflj1l.hsi7.kabel-badenwuerttemberg.de) (Ping timeout: 121 seconds)
[11:27:47] *** Quits: nham (nham@moz-lglsfe.il.comcast.net) (Ping timeout: 121 seconds)
[11:27:58] *** Joins: eerie (eerie@moz-11broi.red.bezeqint.net)
[11:29:46] *** Joins: eerie_ (eerie@moz-11broi.red.bezeqint.net)
[11:29:46] *** Quits: eerie (eerie@moz-11broi.red.bezeqint.net) (NickServ (RECOVER command used by eerie_))
[11:29:46] *** eerie_ is now known as eerie
[11:38:54] *** Quits: avikpal (avikpal@moz-pce.ep4.194.117.IP) (Ping timeout: 121 seconds)
[11:38:56] *** Joins: avikpal_ (avikpal@moz-pce.ep4.194.117.IP)
[11:39:45] *** Quits: avikpal_ (avikpal@moz-pce.ep4.194.117.IP) (Connection closed)
[11:39:51] *** Joins: avikpal (avikpal@moz-pce.ep4.194.117.IP)
[11:41:00] *** Joins: dp (dp@moz-jbmop1.gb4f.8ao9.0e35.2a01.IP)
[11:42:46] *** Quits: avikpal (avikpal@moz-pce.ep4.194.117.IP) (Connection closed)
[11:42:52] *** Joins: avikpal_ (avikpal@moz-pce.ep4.194.117.IP)
[11:43:40] *** Quits: dp_ (dp@moz-jbmop1.gb4f.8ao9.0e35.2a01.IP) (Ping timeout: 121 seconds)
[11:43:53] *** Joins: Amaranth (travis@moz-1raqsl.cpe.cableone.net)
[11:51:32] *** Joins: arielb1 (Ariel@moz-b95g78.red.bezeqint.net)
[11:52:04] *** Quits: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net) (Client exited)
[11:59:43] *** Quits: eerie (eerie@moz-11broi.red.bezeqint.net) (Connection closed)
[11:59:48] *** Joins: eerie (eerie@moz-11broi.red.bezeqint.net)
[12:00:17] *** Quits: eljay (eljay@moz-fmte10.skybroadband.com) (Quit: Leaving)
[12:02:31] *** Joins: bgamari (bgamari@moz-lflj1l.hsi7.kabel-badenwuerttemberg.de)
[12:07:18] *** Joins: eljay (eljay@moz-fmte10.skybroadband.com)
[12:09:41] *** Joins: avikpal (avikpal@moz-05i.mf2.194.117.IP)
[12:10:53] *** Quits: avikpal_ (avikpal@moz-pce.ep4.194.117.IP) (Ping timeout: 121 seconds)
[12:13:55] *** Joins: Quxxy (chatzilla@moz-0nv.jkp.167.59.IP)
[12:14:12] *** Parts: Quxxy (chatzilla@moz-0nv.jkp.167.59.IP) ("")
[12:23:36] *** Quits: blueridanus (Mibbit@moz-rlu.hnt.59.138.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[12:25:51] *** Joins: avikpal_ (avikpal@moz-f6m.p8t.194.117.IP)
[12:26:44] *** Quits: avikpal (avikpal@moz-05i.mf2.194.117.IP) (Ping timeout: 121 seconds)
[12:29:02] *** Quits: eerie (eerie@moz-11broi.red.bezeqint.net) (Connection closed)
[12:30:41] *** Quits: aldeka (quassel@moz-qqf.of6.243.162.IP) (Connection closed)
[12:30:42] *** Joins: aldeka (quassel@moz-qqf.of6.243.162.IP)
[12:32:41] *** Joins: avikpal (avikpal@moz-rk0.420.194.117.IP)
[12:33:52] *** Quits: avikpal_ (avikpal@moz-f6m.p8t.194.117.IP) (Ping timeout: 121 seconds)
[12:36:57] *** Joins: eerie (eerie@moz-11broi.red.bezeqint.net)
[12:42:54] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[12:42:56] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Quit: Leaving)
[12:43:12] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[12:44:57] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Connection closed)
[12:45:19] *** Joins: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net)
[12:47:32] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[12:50:29] *** Quits: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net) (Client exited)
[12:51:21] *** Quits: MatrixBridge (matrixirc@moz-905bpb.openmarket.com) (Connection closed)
[12:51:26] *** Joins: MatrixBridge (matrixirc@moz-905bpb.openmarket.com)
[12:54:19] *** Joins: blueridanus (Mibbit@moz-k63.43p.20.201.IP)
[12:59:19] *** Joins: apasel422 (Mibbit@moz-6ga37r.ma.comcast.net)
[13:01:41] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Connection closed)
[13:06:11] *** Quits: eerie (eerie@moz-11broi.red.bezeqint.net) (Connection closed)
[13:07:07] <SimonSapin> Is `*mut ()` or `*mut Void` with `enum Void {}` better to represent `void*` in FFI? Does it matter?
[13:08:38] <SimonSapin> or `*mut std::os::raw::c_void`?
[13:08:46] *** Quits: avikpal (avikpal@moz-rk0.420.194.117.IP) (Ping timeout: 121 seconds)
[13:09:15] <WindowsBunny> SimonSapin: The lattermost
[13:09:21] <ChrisMorgan> (Who knew c_void would be so involved?)
[13:09:37] <SimonSapin> WindowsBunny: why does it matter?
[13:11:14] <WindowsBunny> SimonSapin: I have no idea, but it might have something to do with llvm
[13:11:14] <doener> SimonSapin: generally, void* should be i8* for llvm, not {}*, it would otherwise not recognize e.g. malloc() because there's a sig mismatch
[13:11:47] <WindowsBunny> "For LLVM to recognize the void pointer type and by extension functions like malloc(), we need to have it represented as i8* in  LLVM bitcode."
[13:11:53] <WindowsBunny> from the liblibc comments
[13:12:17] <SimonSapin> Context: a Rust lib (html5ever) wants to provide a C API where it takes pointers that are opaque to Rust but given back to C in callbacks
[13:12:26] <SimonSapin> so malloc is not involved
[13:12:42] <WindowsBunny> then it probably doesn't matter one bit
[13:12:52] <SimonSapin> hehe, ok
[13:13:02] <WindowsBunny> It's only so llvm can properly detect certain special functions like malloc and friends
[13:13:40] <WindowsBunny> SimonSapin: Just do not put a DST behind the *
[13:13:51] <SimonSapin> right
[13:14:12] <eddyb> force C users to create Rust-compatible vtables :P
[13:15:29] <SimonSapin> what could go wrong
[13:16:12] <ChrisMorgan> eddyb: … whoa!
[13:18:42] <WindowsBunny> eddyb: Rust should just use COM
[13:19:12] <eddyb> WindowsBunny: would that incur *any* overhead for out trait objects?
[13:20:14] <eddyb> *our
[13:21:49] <Manishearth> WindowsBunny: you'd be happiest when we shipped rust with a wine runtime, right?
[13:22:14] <WindowsBunny> Manishearth: just use winapi on linux as well :D
[13:22:15] *** Quits: lu324 (lu324___@moz-gogein.dhcp.embarqhsd.net) (Ping timeout: 121 seconds)
[13:22:35] <WindowsBunny> eddyb: wellll COM kinda needs an invasive vtable
[13:22:44] <eddyb> intrusive?
[13:22:47] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[13:23:52] <WindowsBunny> same thing
[13:24:23] <eddyb> apcully: uhm, how could we use _ for lifetimes if we already have _ for types?
[13:25:15] <Manishearth> what?
[13:25:35] <Manishearth> eddyb: '_ ?
[13:25:49] <eddyb> apcully: inside a function, given struct Foo<'a, T>(&'a T); both Foo::<'a> and Foo::<T> are valid (AFAIK). so what would Foo::<_> be? right now it's a type, but it would be ambiguous if _ could be a '_
[13:25:52] <eddyb> Manishearth: yeah
[13:26:04] <eddyb> apcully: am I missing something?
[13:26:19] <Manishearth> eddyb: I think Foo::<'a> isn't valid
[13:26:30] <eddyb> that's convenient
[13:26:32] <Manishearth> the reverse works because elision
[13:26:39] <Manishearth> but we don't elide types
[13:26:44] *** Joins: Nashenas88 (Nashenas88@moz-of81j9.miamfl.sbcglobal.net)
[13:26:47] <eddyb> Manishearth: note the ::
[13:26:48] <Manishearth> e.g. transmute::<T> doesn't work
[13:26:57] <Manishearth> it's either transmute() or transmute::<T, U>
[13:26:59] <eddyb> also, why are calling everything elision now?
[13:27:12] <Manishearth> Foo::<T> works because 'a is elided
[13:27:26] <eddyb> I thought lifetime elision meant specifically &T -> &U signatures
[13:27:49] <Manishearth> eddyb: I thought it also included cases where you leave out a lifetime in a type name
[13:28:04] <Manishearth> eg. let x: Foo = ... where Foo is Foo<'a>
[13:28:20] <Manishearth> so it's a small step from there to func param lists
[13:28:23] <Manishearth> anyway we can try this
[13:28:34] <eddyb> Manishearth: I haven't seen that term before the &T -> &U signature feature thing
[13:28:50] <Manishearth> ah
[13:29:03] <eddyb> maybe in different contexts, but not lifetimes
[13:29:15] <eddyb> playbot: struct Foo<'a, T>(&'a T);
[13:29:16] -playbot- <anon>:9:9: 9:34 error: the parameter type `T` may not live long enough [E0309]
[13:29:17] -playbot- <anon>:9         struct Foo<'a, T>(&'a T);
[13:29:17] -playbot- output truncated; full output at: http://bit.ly/1CIdRBV
[13:29:20] <eddyb> playbot: struct Foo<'a, T: 'a>(&'a T);
[13:29:21] -playbot- ()
[13:29:30] <eddyb> playbot: struct Foo<'a, T: 'a>(&'a T); Foo::<'static, i32>;
[13:29:31] -playbot- <anon>:9:39: 9:59 warning: path statement with no effect, #[warn(path_statements)] on by default
[13:29:31] -playbot- <anon>:9         struct Foo<'a, T: 'a>(&'a T); Foo::<'static, i32>;
[13:29:31] -playbot- output truncated; full output at: http://bit.ly/1OdLYSJ
[13:29:36] <eddyb> playbot: struct Foo<'a, T: 'a>(&'a T); let _ = Foo::<'static, i32>;
[13:29:37] -playbot- ()
[13:29:41] <eddyb> playbot: struct Foo<'a, T: 'a>(&'a T); let _ = Foo::<'static>;
[13:29:42] -playbot- <anon>:9:47: 9:61 error: unable to infer enough type information about `_`; type annotations or generic parameter binding required [E0282]
[13:29:42] -playbot- <anon>:9         struct Foo<'a, T: 'a>(&'a T); let _ = Foo::<'static>;
[13:29:42] -playbot- output truncated; full output at: http://bit.ly/1CIdVS5
[13:29:45] <ChrisMorgan> WAH! Why do str and [u8] have to hash differently? ☹
[13:29:51] <eddyb> Manishearth: you were wrong :P
[13:30:05] <eddyb> playbot: struct Foo<'a, T: 'a>(&'a T); let _: fn(&i32) -> _ = Foo::<'static>;
[13:30:05] -playbot- <anon>:9:62: 9:76 error: mismatched types:
[13:30:06] -playbot-  expected `fn(&i32) -> _`,
[13:30:06] -playbot- output truncated; full output at: http://bit.ly/1OdM0d9
[13:30:10] <eddyb> playbot: struct Foo<'a, T: 'a>(&'a T); let _: fn(&'static i32) -> _ = Foo::<'static>;
[13:30:11] -playbot- ()
[13:31:20] <Manishearth> eddyb: er, I was right
[13:31:38] <eddyb> Manishearth: you said Foo::<'a> won't work
[13:31:47] <Manishearth> eddyb: http://is.gd/fgTjo7
[13:31:49] <Manishearth> it doesn't
[13:31:49] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Connection closed)
[13:32:07] <eddyb> Manishearth: that's Foo<'a> in a type position
[13:32:13] <eddyb> not what I was talking about
[13:32:14] *** Quits: Feyn (aram@moz-mne.csn.115.42.IP) (Quit: Leaving)
[13:32:14] <Manishearth> eddyb: oh I see
[13:32:18] <Manishearth> you were talking about ctor
[13:32:24] <Manishearth> you're right
[13:32:25] <Manishearth> hm
[13:32:41] *** Quits: sigma (sigma@moz-92585k.range217-44.btcentralplus.com) (Ping timeout: 121 seconds)
[13:32:54] <eddyb> or any function. I guess the function example is better
[13:32:57] <Manishearth> yep
[13:33:02] <Manishearth> interesting then
[13:33:09] *** Joins: dgrunwald (Daniel@moz-9bh1o6.hsi4.kabel-badenwuerttemberg.de)
[13:33:58] *** Joins: eerie (eerie@moz-11broi.red.bezeqint.net)
[13:36:26] *** Joins: stl (stl@moz-al5.8pf.15.176.IP)
[13:37:15] *** Quits: imperio (Mibbit@moz-8otf3a.fbx.proxad.net) (Quit: http://www.mibbit.com ajax IRC Client)
[13:38:07] *** Quits: eerie (eerie@moz-11broi.red.bezeqint.net) (Ping timeout: 121 seconds)
[13:41:23] *** Joins: avikpal (avikpal@moz-rk0.420.194.117.IP)
[13:45:26] *** Joins: avikpal_ (avikpal@moz-5lc.p8t.194.117.IP)
[13:46:14] *** Quits: avikpal (avikpal@moz-rk0.420.194.117.IP) (Ping timeout: 121 seconds)
[13:47:45] *** Joins: waffles (wafflespean@moz-855.9ac.136.123.IP)
[13:48:14] *** Joins: summerlight_ (summerlight@moz-lb3.6do.193.175.IP)
[13:48:47] *** Joins: avikpal (avikpal@moz-obu.okj.251.117.IP)
[13:49:25] *** Joins: casey (casey@moz-v0ns05.tpgi.com.au)
[13:50:30] *** Joins: lu324 (lu324___@moz-gogein.dhcp.embarqhsd.net)
[13:51:23] *** Quits: avikpal_ (avikpal@moz-5lc.p8t.194.117.IP) (Ping timeout: 121 seconds)
[13:51:40] <apcully> eddyb: basically, I was looking at the examples in your RFC, and didn't see that `fn left<'a, 'left>(cx: Context<'a, 'left, _>) -> &'a Inner<'left>` would be ambiguous... I guess there's a corner case I didn't consider?
[13:51:44] *** Quits: summerlight__ (summerlight@moz-lb3.6do.193.175.IP) (Ping timeout: 121 seconds)
[13:52:48] *** Joins: mib_15b9zg (Mibbit@moz-566.i8s.156.179.IP)
[13:53:22] <apcully> I shouldn't have used the word elision
[13:53:55] *** Joins: harrisonclarke (harrisoncla@moz-6kr843.eastlink.ca)
[13:54:08] *** Quits: harrisonclarke (harrisoncla@moz-6kr843.eastlink.ca) (Connection closed)
[13:55:13] *** Quits: dgrunwald (Daniel@moz-9bh1o6.hsi4.kabel-badenwuerttemberg.de) (Quit: Leaving.)
[13:55:23] <apcully> can `_` be used as a type parameter in any case where we're talking about lifetime elision?
[13:55:35] *** Joins: imperio (Mibbit@moz-8otf3a.fbx.proxad.net)
[13:56:03] *** Joins: avikpal_ (avikpal@moz-5lc.p8t.194.117.IP)
[13:58:44] *** Quits: avikpal (avikpal@moz-obu.okj.251.117.IP) (Ping timeout: 121 seconds)
[13:59:40] *** Joins: jdm (jdm@moz-ilbt2e.cable.teksavvy.com)
[14:00:04] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[14:01:43] *** Joins: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net)
[14:01:52] *** Quits: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net) (Client exited)
[14:04:02] *** Joins: bdero (bran@moz-nr0176.b90n.1kaj.018d.2601.IP)
[14:08:32] <doener> acrichto: ping
[14:10:44] *** Quits: waffles (wafflespean@moz-855.9ac.136.123.IP) (Connection closed)
[14:11:27] <eddyb> apcully: _ can be used as a type parameter in cases where lifetimes are allowed
[14:11:45] *** Joins: waffles (wafflespean@moz-855.9ac.136.123.IP)
[14:12:03] <eddyb> apcully: '_ is supposed to do for lifetimes what _ does for types *and also* work in signatures (where _ doesn't. well, it does in closure signatures, I guess)
[14:14:15] <apcully> eddyb: the idea was to allow _ to work in signatures for things that can be elided
[14:14:34] <eddyb> apcully: ah
[14:14:40] <apcully> which, right now, is just lifetimes
[14:14:41] <eddyb> apcully: but then you have issues with type defaults
[14:14:45] *** Quits: larsberg (sid89@moz-1a60qu.0j4i.jtu0.0101.2620.IP) (Quit: )
[14:15:11] <eddyb> struct Foo<'a, T: 'a = ()>(&'a T);
[14:15:39] <apcully> my brain's melting...
[14:15:59] <eddyb> so Foo<_> a Foo<'_, ()>?
[14:16:10] *** Quits: acrichto (acrichto@moz-u3dg2t.sfo1.mozilla.com) (Ping timeout: 121 seconds)
[14:16:33] *** Joins: dp_ (dp@moz-4c9oaa.fbx.proxad.net)
[14:16:39] <eddyb> apcully: nmatsakis also mentioned potentially using _ as an unconstrained generic type. which would make this even worse
[14:16:42] *** Joins: Havvy[Hex] (Havvy@moz-epv20b.wa.comcast.net)
[14:16:49] <eddyb> apcully: and besides
[14:17:03] <eddyb> what if I want to explicitely give a type inside a function
[14:17:10] <eddyb> but one of the lifetimes has to be inferred?
[14:17:18] <eddyb> Foo<'a, '_, 'b, T>
[14:17:31] *** Joins: acrichto (acrichto@moz-u3dg2t.sfo1.mozilla.com)
[14:17:31] *** ChanServ sets mode: +o acrichto
[14:17:34] *** Quits: sp3d (sp3d@moz-re8m3s.mf75.3igv.0240.2601.IP) (Ping timeout: 121 seconds)
[14:18:06] <eddyb> I don't see the value in using _ as a lifetime inside of a type
[14:18:33] <apcully> what does "'a = ()" mean in the above?
[14:18:46] *** Quits: Havvy (Havvy@moz-u3p4vo.m707.nviq.01c2.2601.IP) (Ping timeout: 121 seconds)
[14:19:12] *** Quits: dp (dp@moz-jbmop1.gb4f.8ao9.0e35.2a01.IP) (Ping timeout: 121 seconds)
[14:19:27] <eddyb> apcully: T = () where T: 'a
[14:19:42] <eddyb> () is the default, :'a is a bound (and bounds come before defaults)
[14:20:22] *** Joins: ytain (ytain@moz-u0rb5h.dsl.teksavvy.com)
[14:20:24] <apcully> ok, let me parse that for a bit...
[14:22:52] *** Quits: apasel422 (Mibbit@moz-6ga37r.ma.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[14:23:49] *** Quits: eddyb (eddyb@moz-0op.2f0.121.86.IP) (Ping timeout: 121 seconds)
[14:24:32] *** Joins: Quxxy (chatzilla@moz-efh10q.internode.on.net)
[14:25:17] *** Joins: eddyb (eddyb@moz-042.8f9.121.86.IP)
[14:27:19] <apcully> eddyb: honestly, I also prefer '_, I think it's the most internally consistent name. "_" was suggested as a way to get around the "line-noise" complaint.
[14:27:46] <eddyb> apcully: oh, line-noise
[14:27:57] <eddyb> IMO it's as much line-noise as _1
[14:28:23] <eddyb> the worst part is not being able to google for it, just like everything else
[14:28:29] <eddyb> but, I may have a solution for that :D
[14:28:36] <nox> Google's fault.
[14:28:41] <eddyb> nox: definitely
[14:28:50] <nox> And GitHub's fault, too.
[14:29:28] <eddyb> so a few months ago I made a demo of integrating a simple GUI text editor with rustc
[14:30:03] <eddyb> it was displaying errors and types of AST nodes
[14:30:07] <nox> Does rustc expose the same parseable format as Clang for its errors?
[14:30:15] <apcully> if we allowed "_" to mean "elision" in signatures, then Foo<_> should either generate a compile failure (my pref, though possibly a back-compat issue), or we'd need some way of specifying precedence
[14:30:17] <nox> If not, shouldn't it?
[14:30:33] <eddyb> apcully: which makes it very complicated
[14:30:50] *** Quits: smkz (a@moz-gdd4un.fs1g.619c.a880.2604.IP) (Connection closed)
[14:30:52] <eddyb> apcully: also, right now we always have lifetimes before types
[14:30:53] *** Joins: smkz (a@moz-gdd4un.fs1g.619c.a880.2604.IP)
[14:31:16] <eddyb> could become a parsing nightmare
[14:31:59] <eddyb> with a relatively small driver around rustc, I think we can make a tool to explain every little bit of syntax
[14:32:42] <apcully> eddyb: that's... a great idea
[14:32:52] <apcully> translate obscure syntax into something google-able
[14:33:21] <eddyb> heck, you could even emit half-decent english (cdecl-style, but for all syntax)
[14:33:35] *** Quits: rdgawdzi (sid91768@moz-36ps68.ealing.irccloud.com) (*.net *.split)
[14:33:35] *** Quits: jbcrail (sid24674@moz-s17jb5.charlton.irccloud.com) (*.net *.split)
[14:33:35] *** Quits: jroesch (sid26078@moz-o13a59.charlton.irccloud.com) (*.net *.split)
[14:33:35] *** Quits: steshaw (sid30841@moz-mij4a1.highgate.irccloud.com) (*.net *.split)
[14:33:35] *** Quits: huseby (huseby@moz-m7l0au.d2vr.5em6.6400.2605.IP) (*.net *.split)
[14:33:35] *** Quits: zwarich (sid63988@moz-402giv.ealing.irccloud.com) (*.net *.split)
[14:33:35] *** Quits: carllerche (sid50851@moz-8i75uq.brockwell.irccloud.com) (*.net *.split)
[14:33:35] *** Quits: nmatsakis (sid381@moz-32a8b5.0j4i.jtu0.0101.2620.IP) (*.net *.split)
[14:33:35] *** Quits: ggherdov_ (sid11402@moz-u71qnt.charlton.irccloud.com) (*.net *.split)
[14:33:35] *** Quits: vadimcn (uid46608@moz-0d43u8.highgate.irccloud.com) (*.net *.split)
[14:33:35] *** Quits: aturon (sid379@moz-hhfc8n.0j4i.jtu0.0101.2620.IP) (*.net *.split)
[14:33:35] *** Quits: wcosta|afk (sid430@moz-ve87os.0j4i.jtu0.0101.2620.IP) (*.net *.split)
[14:33:35] *** Quits: jack (sid19593@moz-fhlsm9.highgate.irccloud.com) (*.net *.split)
[14:33:35] *** Quits: andrew-d (andrew-d@moz-dgoafa.cusf.glje.ff48.2607.IP) (*.net *.split)
[14:33:35] *** Quits: yuriks (quassel@moz-hnlou0.yuriks.net) (*.net *.split)
[14:33:35] *** Quits: Ericson2314 (user@moz-5muv45.m9e4.oi28.0306.2602.IP) (*.net *.split)
[14:33:35] *** Quits: dherman (sid7996@moz-u0jlif.ealing.irccloud.com) (*.net *.split)
[14:33:35] *** Quits: richo (richo@moz-slrmp8.fs1g.619c.a880.2604.IP) (*.net *.split)
[14:33:35] *** Quits: huon (huon@moz-hj272o.8rnv.rggd.6180.2400.IP) (*.net *.split)
[14:33:35] *** Quits: chmanchester|afk (sid313@moz-6igabj.0j4i.jtu0.0101.2620.IP) (*.net *.split)
[14:33:35] *** Quits: scott (uid25790@moz-e5ok1n.brockwell.irccloud.com) (*.net *.split)
[14:33:35] *** Quits: jvns (sid26231@moz-p7mvuh.brockwell.irccloud.com) (*.net *.split)
[14:33:35] *** Quits: ephemeron (ephemeron@moz-h5kea2.i2gt.qoll.a880.2604.IP) (*.net *.split)
[14:33:35] *** Quits: erikj (erikj@moz-1bq7nj.com) (*.net *.split)
[14:33:35] *** Quits: bdero (bran@moz-nr0176.b90n.1kaj.018d.2601.IP) (*.net *.split)
[14:33:35] *** Quits: spastorino (sid27384@moz-i6sgse.brockwell.irccloud.com) (*.net *.split)
[14:33:35] *** Quits: pnkfelix (sid344@moz-nnnecs.0j4i.jtu0.0101.2620.IP) (*.net *.split)
[14:33:35] *** Quits: O01eg (o01eg@moz-6jbkkc.nslb.3egh.2698.2a02.IP) (*.net *.split)
[14:33:35] *** Quits: reem (sid78397@moz-octfcu.brockwell.irccloud.com) (*.net *.split)
[14:33:35] *** Quits: carter (carter@moz-aheg3i.ieqc.6fdm.3c03.2600.IP) (*.net *.split)
[14:33:35] *** Quits: dbussink (dbussink@moz-hsd6q3.bussink.me) (*.net *.split)
[14:33:35] *** Quits: andor (andor@moz-vmf87u.aft4.r2sr.41d0.2001.IP) (*.net *.split)
[14:33:35] *** Quits: smkz (a@moz-gdd4un.fs1g.619c.a880.2604.IP) (*.net *.split)
[14:33:35] *** Quits: jyyou (jyyou@moz-nhbjfr.bo6r.4bjo.8900.2400.IP) (*.net *.split)
[14:33:35] *** Quits: frewsxcv (sid86219@moz-dneii9.brockwell.irccloud.com) (*.net *.split)
[14:33:35] *** Quits: cha0s (chaos@moz-ebt9bj.q7tv.7c32.b0c0.2a03.IP) (*.net *.split)
[14:33:35] *** Quits: wycats (sid79@moz-b4lrm3.brockwell.irccloud.com) (*.net *.split)
[14:33:35] *** Quits: ato (sid11@moz-c1oek8.0j4i.jtu0.0101.2620.IP) (*.net *.split)
[14:33:35] *** Quits: Gankro (sid71432@moz-sc2bd6.charlton.irccloud.com) (*.net *.split)
[14:33:35] *** Quits: gus (quassel@moz-s29c4j.1136.t8sg.1801.2401.IP) (*.net *.split)
[14:33:35] *** Quits: jld (jld@moz-onnk26.xlerb.net) (*.net *.split)
[14:33:35] *** Quits: DenSchub (DenSchub@moz-6io4fd.hol4.1ume.2260.2a02.IP) (*.net *.split)
[14:33:35] *** Quits: seanmonstar (seanmonstar@moz-jd3i0j.fkdv.ulf6.3c01.2600.IP) (*.net *.split)
[14:33:35] *** Quits: nrc (sid365@moz-3taf2s.0j4i.jtu0.0101.2620.IP) (*.net *.split)
[14:33:35] *** Quits: nox (sid3872@moz-fvvn96.ealing.irccloud.com) (*.net *.split)
[14:33:35] *** Quits: stask (sid61294@moz-0bjq4h.ealing.irccloud.com) (*.net *.split)
[14:33:35] *** Quits: jethrogb (jethrob@moz-p2iedd.scintilla.utwente.nl) (*.net *.split)
[14:33:35] *** Quits: lkuper (sid44041@moz-7edef8.ealing.irccloud.com) (*.net *.split)
[14:33:35] *** Quits: dprien (dprien@moz-15s7c4.udtd.gaqb.04f8.2a01.IP) (*.net *.split)
[14:33:36] <eddyb> apcully: you'd also link to the book or a reference or something
[14:33:50] *** Quits: nmatsaki1 (nmatsakis@moz-no0.93r.245.63.IP) (A TLS packet with unexpected length was received.)
[14:34:09] *** Joins: nmatsaki1 (nmatsakis@moz-no0.93r.245.63.IP)
[14:34:09] *** Joins: carter (carter@moz-aheg3i.ieqc.6fdm.3c03.2600.IP)
[14:34:09] *** Joins: dprien (dprien@moz-15s7c4.udtd.gaqb.04f8.2a01.IP)
[14:34:09] *** Joins: jroesch (sid26078@moz-o13a59.charlton.irccloud.com)
[14:34:09] *** Joins: wycats (sid79@moz-b4lrm3.brockwell.irccloud.com)
[14:34:09] *** Joins: steshaw (sid30841@moz-mij4a1.highgate.irccloud.com)
[14:34:09] *** Joins: dbussink (dbussink@moz-hsd6q3.bussink.me)
[14:34:09] *** Joins: erikj (erikj@moz-1bq7nj.com)
[14:34:09] *** Joins: ephemeron (ephemeron@moz-h5kea2.i2gt.qoll.a880.2604.IP)
[14:34:09] *** Joins: andrew-d (andrew-d@moz-dgoafa.cusf.glje.ff48.2607.IP)
[14:34:09] *** Joins: huon (huon@moz-hj272o.8rnv.rggd.6180.2400.IP)
[14:34:09] *** Joins: gus (quassel@moz-s29c4j.1136.t8sg.1801.2401.IP)
[14:34:09] *** Joins: andor (andor@moz-vmf87u.aft4.r2sr.41d0.2001.IP)
[14:34:09] *** Joins: jethrogb (jethrob@moz-p2iedd.scintilla.utwente.nl)
[14:34:09] *** Joins: jyyou (jyyou@moz-nhbjfr.bo6r.4bjo.8900.2400.IP)
[14:34:09] *** Joins: cha0s (chaos@moz-ebt9bj.q7tv.7c32.b0c0.2a03.IP)
[14:34:09] *** Joins: spastorino (sid27384@moz-i6sgse.brockwell.irccloud.com)
[14:34:09] *** Joins: richo (richo@moz-slrmp8.fs1g.619c.a880.2604.IP)
[14:34:09] *** Joins: zwarich (sid63988@moz-402giv.ealing.irccloud.com)
[14:34:09] *** Joins: ggherdov_ (sid11402@moz-u71qnt.charlton.irccloud.com)
[14:34:09] *** Joins: lkuper (sid44041@moz-7edef8.ealing.irccloud.com)
[14:34:09] *** Joins: frewsxcv (sid86219@moz-dneii9.brockwell.irccloud.com)
[14:34:09] *** Joins: carllerche (sid50851@moz-8i75uq.brockwell.irccloud.com)
[14:34:09] *** Joins: DenSchub (DenSchub@moz-6io4fd.hol4.1ume.2260.2a02.IP)
[14:34:09] *** Joins: jack (sid19593@moz-fhlsm9.highgate.irccloud.com)
[14:34:09] *** Joins: Gankro (sid71432@moz-sc2bd6.charlton.irccloud.com)
[14:34:09] *** Joins: nox (sid3872@moz-fvvn96.ealing.irccloud.com)
[14:34:09] *** Joins: huseby (huseby@moz-m7l0au.d2vr.5em6.6400.2605.IP)
[14:34:09] *** Joins: nrc (sid365@moz-3taf2s.0j4i.jtu0.0101.2620.IP)
[14:34:09] *** Joins: chmanchester|afk (sid313@moz-6igabj.0j4i.jtu0.0101.2620.IP)
[14:34:09] *** Joins: nmatsakis (sid381@moz-32a8b5.0j4i.jtu0.0101.2620.IP)
[14:34:09] *** Joins: pnkfelix (sid344@moz-nnnecs.0j4i.jtu0.0101.2620.IP)
[14:34:09] *** Joins: wcosta|afk (sid430@moz-ve87os.0j4i.jtu0.0101.2620.IP)
[14:34:09] *** Joins: ato (sid11@moz-c1oek8.0j4i.jtu0.0101.2620.IP)
[14:34:09] *** Joins: stask (sid61294@moz-0bjq4h.ealing.irccloud.com)
[14:34:09] *** Joins: seanmonstar (seanmonstar@moz-jd3i0j.fkdv.ulf6.3c01.2600.IP)
[14:34:09] *** Joins: jbcrail (sid24674@moz-s17jb5.charlton.irccloud.com)
[14:34:09] *** Joins: jvns (sid26231@moz-p7mvuh.brockwell.irccloud.com)
[14:34:09] *** Joins: reem (sid78397@moz-octfcu.brockwell.irccloud.com)
[14:34:09] *** Joins: Ericson2314 (user@moz-5muv45.m9e4.oi28.0306.2602.IP)
[14:34:09] *** bruford.mozilla.org sets mode: +oooo wycats huon nrc nmatsakis
[14:34:09] *** Joins: jld (jld@moz-onnk26.xlerb.net)
[14:34:09] *** Joins: rdgawdzi (sid91768@moz-36ps68.ealing.irccloud.com)
[14:34:09] *** Joins: dherman (sid7996@moz-u0jlif.ealing.irccloud.com)
[14:34:09] *** Joins: aturon (sid379@moz-hhfc8n.0j4i.jtu0.0101.2620.IP)
[14:34:09] *** Joins: scott (uid25790@moz-e5ok1n.brockwell.irccloud.com)
[14:34:09] *** Joins: yuriks (quassel@moz-hnlou0.yuriks.net)
[14:34:09] *** Joins: vadimcn (uid46608@moz-0d43u8.highgate.irccloud.com)
[14:34:09] *** Joins: bdero (bran@moz-nr0176.b90n.1kaj.018d.2601.IP)
[14:34:09] *** Joins: O01eg (o01eg@moz-6jbkkc.nslb.3egh.2698.2a02.IP)
[14:34:09] *** Joins: smkz (a@moz-gdd4un.fs1g.619c.a880.2604.IP)
[14:34:09] *** bruford.mozilla.org sets mode: +o aturon
[14:34:43] *** Joins: eerie (eerie@moz-11broi.red.bezeqint.net)
[14:34:55] *** Quits: DenSchub (DenSchub@moz-6io4fd.hol4.1ume.2260.2a02.IP) (Ping timeout: 121 seconds)
[14:35:00] *** Quits: seanmonstar (seanmonstar@moz-jd3i0j.fkdv.ulf6.3c01.2600.IP) (Ping timeout: 121 seconds)
[14:35:05] *** Quits: dherman (sid7996@moz-u0jlif.ealing.irccloud.com) (Ping timeout: 121 seconds)
[14:35:05] *** Quits: rdgawdzi (sid91768@moz-36ps68.ealing.irccloud.com) (Ping timeout: 121 seconds)
[14:35:06] *** Quits: stask (sid61294@moz-0bjq4h.ealing.irccloud.com) (Ping timeout: 121 seconds)
[14:35:06] *** Quits: huon (huon@moz-hj272o.8rnv.rggd.6180.2400.IP) (Ping timeout: 121 seconds)
[14:35:21] *** Quits: zwarich (sid63988@moz-402giv.ealing.irccloud.com) (Ping timeout: 121 seconds)
[14:35:38] *** Quits: carter (carter@moz-aheg3i.ieqc.6fdm.3c03.2600.IP) (Ping timeout: 121 seconds)
[14:35:50] *** Quits: smkz (a@moz-gdd4un.fs1g.619c.a880.2604.IP) (Connection closed)
[14:35:52] *** Quits: Ericson2314 (user@moz-5muv45.m9e4.oi28.0306.2602.IP) (Connection closed)
[14:35:54] *** Joins: smkz (a@moz-gdd4un.fs1g.619c.a880.2604.IP)
[14:35:55] *** Joins: Ericson2314 (user@moz-5muv45.m9e4.oi28.0306.2602.IP)
[14:36:07] <eddyb> wycats, steveklabnik, Manishearth, bstrie: ^^ what do you think of the above idea? (a syntax highlighter that also tells you what all syntactical elements and groups are, and links to appropriate documentation)
[14:36:08] *** Quits: jld (jld@moz-onnk26.xlerb.net) (Ping timeout: 121 seconds)
[14:36:13] *** Joins: DenSchub (DenSchub@moz-6io4fd.hol4.1ume.2260.2a02.IP)
[14:36:23] *** Quits: andor (andor@moz-vmf87u.aft4.r2sr.41d0.2001.IP) (Ping timeout: 121 seconds)
[14:36:26] *** Quits: O01eg (o01eg@moz-6jbkkc.nslb.3egh.2698.2a02.IP) (Ping timeout: 121 seconds)
[14:36:29] *** Joins: andor (andor@moz-vmf87u.aft4.r2sr.41d0.2001.IP)
[14:36:44] *** Joins: seanmonstar (seanmonstar@moz-jd3i0j.fkdv.ulf6.3c01.2600.IP)
[14:36:46] *** Joins: O01eg (o01eg@moz-6jbkkc.nslb.3egh.2698.2a02.IP)
[14:36:51] *** Joins: jld (jld@moz-onnk26.xlerb.net)
[14:37:02] *** Joins: rdgawdzi (sid91768@moz-36ps68.ealing.irccloud.com)
[14:37:04] *** Joins: huon (huon@moz-hj272o.8rnv.rggd.6180.2400.IP)
[14:37:04] *** ChanServ sets mode: +o huon
[14:37:04] *** Joins: stask (sid61294@moz-0bjq4h.ealing.irccloud.com)
[14:37:04] <eddyb> I don't want to promise anything because I'm still tangled in uni admission stuff, but I don't want it to be lost either
[14:37:21] *** Joins: dherman (sid7996@moz-u0jlif.ealing.irccloud.com)
[14:37:26] *** Joins: zwarich (sid63988@moz-402giv.ealing.irccloud.com)
[14:37:28] *** Quits: waffles (wafflespean@moz-855.9ac.136.123.IP) (Connection closed)
[14:37:31] *** Joins: waffles (wafflespean@moz-855.9ac.136.123.IP)
[14:37:59] *** Quits: avikpal_ (avikpal@moz-5lc.p8t.194.117.IP) (Ping timeout: 121 seconds)
[14:38:18] *** Joins: carter (carter@moz-aheg3i.ieqc.6fdm.3c03.2600.IP)
[14:38:31] <nox> Not sure if that was lost in netsplit so:
[14:38:32] <nox> eddyb: Does rustc has something like -fdiagnostics-print-source-range-info?
[14:38:44] <nox> eddyb: If it doesn't, it should, and then you could share work with Clang.
[14:38:57] *** Quits: eerie (eerie@moz-11broi.red.bezeqint.net) (Ping timeout: 121 seconds)
[14:39:07] <eddyb> and such a tool, hooked up to the playpen, could be an answer for most "google doesn't understand this" issues
[14:39:12] <eddyb> nox: what does that do?
[14:39:29] <nox> eddyb: Parseable format for ranges and whatnot.
[14:39:37] <eddyb> it's already parseable
[14:39:37] <nox> eddyb: exprs.c:47:15:{47:8-47:14}{47:17-47:24}: error: invalid operands to binary expression ('int *' and '_Complex float')
[14:39:45] <nox> Even the ranges?
[14:40:01] <eddyb> let me find an example
[14:40:21] <nox> I hope you don't count the numbers of space and ~ and whatnot.
[14:40:38] <nox> And if it's a different format than Clang's, I would call this a missed opportunity,
[14:40:38] *** Joins: avikpal (avikpal@moz-292.dm6.227.117.IP)
[14:40:51] <nox> Emacs and Vim already have stuff to properly integrate Clang's messages,
[14:40:55] <nox> and Xcode too obviously.
[14:41:25] <eddyb> <anon>:2:2: 2:5 error: unresolved name `bar`
[14:41:42] <eddyb> rustc doesn't have any multi-range diagnostics
[14:41:47] <nox> So not the same. :(
[14:41:59] <eddyb> it's human-readable and it's enabled by default
[14:42:03] *** Joins: avikpal_ (avikpal@moz-ckf.fgm.194.117.IP)
[14:43:07] <eddyb> clang looks like it's pointing at the + and then the operands are the two ranges
[14:43:14] <eddyb> nox: what about a name not found error?
[14:43:24] <nox> eddyb: Only one range.
[14:43:30] <nox> On the name.
[14:43:33] <eddyb> what does the output look like?
[14:43:43] <nox> Possibly followed by another line for the fixit hint
[14:43:49] *** Quits: bdero (bran@moz-nr0176.b90n.1kaj.018d.2601.IP) (Ping timeout: 121 seconds)
[14:44:08] <nox> eddyb: " The information is a simple sequence of brace enclosed ranges, where each range lists the start and end line/column locations."
[14:44:19] <eddyb> for the specific error
[14:44:29] <nox> So for a name not found it would be <anon>:2:2:{2:2-2:5}
[14:44:44] <eddyb> I'm curious about the human-readaable output when it has only one range
[14:45:00] <eddyb> nox: without the flag for the ranges, you just get 2:2?
[14:45:02] <nox> eddyb: Oh, it doesn't print the ranges offsets in the human-readable format,
[14:45:10] <nox> it just prints 2:2 and the line of code like rustc does.
[14:45:29] <nox> I don't see the point of printing the ranges' boundaries in a human-readable format.
[14:45:35] *** Quits: avikpal (avikpal@moz-292.dm6.227.117.IP) (Ping timeout: 121 seconds)
[14:45:52] <nox> And IMO, Clang's errors including multiple ranges are better than Rust's.
[14:45:56] <eddyb> do you see the point in printing the column number at all?
[14:46:07] <nox> For cases like http://is.gd/q5go3R
[14:46:26] <nox> eddyb: The column number helps editors lacking the full integration.
[14:46:39] <nox> But yeah, could be omitted too.
[14:47:16] <eddyb> <anon>:2:2: 2:15 error: the trait `core::ops::Add<f32>` is not implemented for the type `i32` [E0277]
[14:47:18] <eddyb> huh
[14:47:18] <nox> But it also helps terminal emulators including custom actions on click.
[14:47:38] <eddyb> why are there two possible error messages?
[14:47:49] <nox> I like how Clang puts the error at the '+' and understrikes both operands.
[14:48:30] *** Quits: waffles (wafflespean@moz-855.9ac.136.123.IP) (Ping timeout: 121 seconds)
[14:48:45] <eddyb> does clang ever output more than two ranges?
[14:49:14] <nox> eddyb: Don't think so, but it could.
[14:49:30] <nox> eddyb: And Rust comes with a machinery for custom lints, so people could find uses for this, maybe.
[14:50:10] <nox> eddyb: http://clang.llvm.org/diagnostics.html
[14:50:11] <nagisa> ~~~~ ^ ~~~~~
[14:50:11] <nagisa>              | // ternary range, this goes down more
[14:50:45] <nox> nagisa: What do you mean?
[14:51:15] <nagisa> well, just thinking how you could understrike three operands
[14:51:25] <nagisa> (just being bored)
[14:52:21] <nox> nagisa: That's what Clang does. :)
[14:52:23] *** Quits: rkruppe (chatzilla@moz-3nj.rnu.131.95.IP) (Quit: ChatZilla 0.9.91.1 [Firefox 39.0/20150630154324])
[14:52:32] <nox> But that's only 2 ranges.
[14:52:36] <nox> 2 ranges and a caret.
[14:52:46] <nox> I think that's the main difference between Rust and Clang on that regard,
[14:52:57] <nox> Rust considers that the caret is one of the boundaries of the only range of the message, right?
[14:53:09] <nox> Whereas in Clang, the caret might not even be in a range.
[14:53:19] <nagisa> well, we don’t really mark caret position at all
[14:53:26] <nox> That, too.
[14:53:30] <nagisa> you just give start and end of what you want to underline
[14:53:51] <nox> Anyway, Clang is superior on that front, might be a good idea to do as it does, what do you people think?
[14:54:13] <nagisa> to position caret at an arbitrary position we’d need to have ability to set point at which to set it (or even multiple of them)
[14:54:28] <nox> Also, fixit hints are a very neat idea, IMO.
[14:54:29] <nagisa> which is another good item for my diagnostics builder design document
[14:54:54] <nagisa> huon: ↑ might be a good one for yours as well, AFAIR you were making one
[14:55:31] *** Joins: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net)
[14:55:36] *** Joins: waffles (wafflespean@moz-855.9ac.136.123.IP)
[14:55:44] <nox> nagisa: What do you mean about the caret position?
[14:56:19] *** Quits: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net) (Client exited)
[14:56:35] <nagisa> well, we currently print diagnostic messages like this emit_error(span, "msg"), where span is basically `struct Span { start, end }`
[14:57:14] <nagisa> you could do something like error().span(from, to).caret(x).caret(y).emit() and get something like ~~~^~~~^~~~, where both carets are respectively at x and y positions
[14:58:06] <nox> nagisa: I see.
[15:00:06] *** Quits: avikpal_ (avikpal@moz-ckf.fgm.194.117.IP) (Ping timeout: 121 seconds)
[15:01:22] <Manishearth> eddyb: so basically formatted ast-json?
[15:01:34] <eddyb> Manishearth: not at all
[15:01:44] <eddyb> Manishearth: annotated source
[15:01:45] <nox> So anyway, what do you people think about copying what Clang does?
[15:01:56] <Manishearth> eddyb: yeah, I know, better-formatted ast-json :)
[15:02:12] <eddyb> you can't get the original source from ast-json
[15:02:20] <Manishearth> yeah yeah technicalities
[15:02:45] <eddyb> nox: only behind a flag like -Z clang-like-range-output-in-diagnostics
[15:03:00] <nox> eddyb: Why not the same flag?
[15:03:08] <eddyb> we don't have -f flags
[15:03:11] <nox> Oh right.
[15:03:27] <nox> Well, the Clang format is behind a flag too, that's not a problem.
[15:03:37] <nox> But what about carets and multiple ranges?
[15:03:50] <eddyb> I mean, I don't hate it, but I see no use to it besides being clang-tooling-compatible
[15:03:54] <eddyb> nox: that's trickier
[15:04:01] <eddyb> the error you showed on the playpen is odd
[15:04:05] <nox> Clang tooling compatible sounds a good reason on its own.
[15:04:13] <nox> Integrating tools into editors is a PITA,
[15:04:19] <nox> anything that helps that is a good thing, IMO.
[15:04:33] <eddyb> I was expecting the more general "Add<U> is not implemented for T" or something like that
[15:04:45] <nox> eddyb: That's what I have here.
[15:04:45] <eddyb> which is not an error you can split into sub-ranges
[15:05:04] <nox> "error: binary operation `+` cannot be applied to type `&'static str`"
[15:05:13] <nox> I can't read apparently.
[15:05:16] <eddyb> I'm not sure what triggers that error
[15:05:20] <nox> eddyb: Why couldn't we?
[15:05:40] <eddyb> T: Add<U> is just a "trait not implemented for type" error
[15:05:42] <nox> eddyb: What about the part where Rust prints the range even in the human-readable format? Is that useful?
[15:07:09] <eddyb> clang has different semantics there, where it points to one thing and underlines two other disjoint ranges
[15:07:18] <eddyb> I'm not sure
[15:07:21] <nox> eddyb: It's not different, it's more complete.
[15:07:33] <nox> I would say Rust is a dumbed down Clang on this feature.
[15:08:25] <eddyb> I've used the end column of a range a few times. it's also necessary if the end of the range is a long way from the start of it, the underlining won't help you there
[15:09:03] <nox> eddyb: Used how?
[15:09:10] <eddyb> went to that position
[15:09:16] <eddyb> in my editor
[15:09:32] <nox> Ok, but what about if Rust ever support multiple ranges?
[15:09:47] <nox> As for the caret, if I mistyped a lifetime name, I would like "'mistyped" to be underlined,
[15:09:53] <nox> but the caret be under the "m".
[15:10:05] <nox> And I would like my editor to jump at the m, not the quote.
[15:10:40] <eddyb> that seems oddly specific
[15:10:55] <nox> I would say compile errors are to be oddly specific.
[15:11:22] <eddyb> like, how many times do you write a lifetime name that's not in scope?
[15:11:30] <eddyb> it's a rare error
[15:11:52] <eddyb> nox: anyway, what's missing for custom a + b errors is the source of a T: Add<U> obligation
[15:12:14] <nox> eddyb: Not often, but that's something easily covered by a fixit hint.
[15:12:34] <nox> eddyb: Ok.
[15:12:50] <nox> Anyway, for error reporting, everything Rust does Clang can do too, and Clang does more.
[15:13:05] *** Joins: laumann (thomas@moz-3m6.3kq.109.2.IP)
[15:13:07] *** Quits: joneshf-laptop (joneshf@moz-l4h.b5s.208.98.IP) (Ping timeout: 121 seconds)
[15:13:08] <eddyb> clang is not a Rust compiler, let's not forget that
[15:13:32] <eddyb> yes, rustc can do some things better, but comparing it to clang won't do as much good as just trying to improve rustc in the context of Rust
[15:13:36] <nox> Clang is a compiler and compiles from text-based code.
[15:13:43] <eddyb> if you have Matrix<T> + Matrix<T> and the Add impl requires T: MatrixElem
[15:13:50] *** Joins: dgrunwald (Daniel@moz-9m4v2i.hsi4.kabel-badenwuerttemberg.de)
[15:13:53] <nox> It helps code reuse in editors.
[15:14:21] <eddyb> you could get a "MatrixElem not implemented by T" for the whole add expression
[15:14:37] <eddyb> without any mention that Matrix<T>: Add requires T: MatrixElem
[15:14:43] *** Joins: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net)
[15:14:55] <nox> Sure, but that's orthogonal to how errors are printed though.
[15:14:55] <eddyb> that's a far bigger issue atm
[15:15:01] <eddyb> nox: it's actually not
[15:15:20] <eddyb> nox: the same information loss that occurs there also makes it impossible to print the error in a non-generic way
[15:15:30] <nox> It's just an example about a specific error.
[15:15:43] <eddyb> it's no longer an add expression, it's just a span of something that wants T: Add<U>
[15:15:56] <eddyb> with no custom printing logic
[15:16:11] <nox> I don't see how it's related to how errors should be printed.
[15:16:30] <nox> I read what you say as "we don't do multiple ranges because our current design doesn't let us do that".
[15:16:40] <eddyb> oh
[15:16:52] <eddyb> nox: that was about the add expression example
[15:17:20] <nox> Yeah, that's just an example among others, obviously Clang and rustc compiles different languages so the examples don't fit exactly.
[15:17:21] <eddyb> I can't think of other errors that could have multiple ranges
[15:18:18] <nox> eddyb: Multiple ranges or not,
[15:18:50] <nox> CLang and rustc are both compilers for text-based languages,
[15:18:58] <nox> they can both make use of fixit hints,
[15:19:10] <nox> the former already implemented them and there is already code for its output format in editors,
[15:19:20] <nox> so not reusing that format sounds like a bad idea to me.
[15:21:06] <nox> There are at least errors in Rust that could benefit from a specific caret position, if not multiple ranges.
[15:21:10] <eddyb> http://is.gd/D0yo3B this is weird
[15:21:39] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[15:22:28] <nox> eddyb: Doesn't the AST node of the '+' operation knows where both arguments are?
[15:22:38] <eddyb> nox: it does
[15:22:58] <nox> So a different error could be emitted for binary operators, couldn't it?
[15:22:58] <eddyb> hmm http://is.gd/6mztxk
[15:23:12] <eddyb> nox: from T: Add<U> not implemented?
[15:23:16] <nox> Yes.
[15:23:24] <eddyb> that obligation records a span, not a node
[15:23:29] <nox> With not a massive amount of specific code, I mean.
[15:23:42] <nox> Well, the obligation could record a caret and two spans, couldn't it?
[15:24:10] <eddyb> it's the same thing used for all T: Trait obligations
[15:25:02] <eddyb> this is so derpy, somehow it ended up with 4 identical obligations http://is.gd/VPOSRq
[15:25:23] *** Quits: laumann (thomas@moz-3m6.3kq.109.2.IP) (Ping timeout: 121 seconds)
[15:25:29] <nox> But it's doable, no?
[15:25:45] <eddyb> this is another error that's emitted from the same thing http://is.gd/2X3cU4
[15:26:01] <eddyb> nox: let me check something real quick
[15:26:23] *** Quits: casey (casey@moz-v0ns05.tpgi.com.au) (Connection closed)
[15:26:27] <eddyb> nox: https://github.com/rust-lang/rust/blob/master/src/librustc/middle/infer/mod.rs#L104
[15:26:38] <nox> Anyway, my point was just about errors are printed, that C++ and Rust are different and produce different kind of errors have nothing to do with this IMO.
[15:34:10] *** Joins: Elaine (Elaine@moz-35s2fm.members.linode.com)
[15:34:10] <eddyb> so what the parser does is it uses the start of the LHS and the end of the RHS for the span of a binop expression
[15:34:10] <nox> Ah ah, that's awful.
[15:34:10] *** Quits: eerie (eerie@moz-11broi.red.bezeqint.net) (Ping timeout: 121 seconds)
[15:34:10] <eddyb> that's where you'll get support for multi-range output ;)
[15:34:10] <eddyb> not on a + b
[15:34:10] <nox> Why not on a + b?
[15:34:10] <eddyb> nox: support as in, community support
[15:34:10] <eddyb> I suggest opening an issue about the suboptimal error reporting for binops originating from macros
[15:34:10] <nox> So if one day I'm bored and I want to make it so on a + b, that's not a bad idea per se?
[15:34:10] *** ChanServ sets mode: +o Elaine
[15:34:33] <eddyb> nox: it should be uniform, ofc
[15:34:50] <nox> eddyb: Btw,
[15:35:07] <eddyb> nox: also, two lines are wasted for macro span and expansion site
[15:35:07] <nox> eddyb: http://clang.llvm.org/diagnostics.html grep for "Automatic Macro Expansion" and look at the first snippet just afterwards.
[15:35:12] <nox> It's similar to what you did.
[15:35:19] <nox> To what you linked*
[15:35:19] <eddyb> yeah, I was going to mention that
[15:36:42] <eddyb> so, one note for the macro definition and one note for the expansion site
[15:36:46] <nox> eddyb: Otherwise,
[15:36:56] <nox> we can wait for Rust to become more popular than the C family of languages,
[15:37:02] <nox> and then Clang will have to copy rustc's format!
[15:37:04] <nox> :P
[15:37:42] <eddyb> instead, we could be printing enough information to be able to find the exact expression inside the macro
[15:38:02] <nox> That's what Clang does but not by default because it's overwhelming.
[15:39:09] <eddyb> I wonder if I scan screw with the spans
[15:39:40] <eddyb> nox: http://is.gd/3UVD7k
[15:39:42] <eddyb> lol
[15:39:59] <nox> Weird. :D
[15:40:09] <eddyb> http://is.gd/nM7q1x ahahahaha
[15:40:23] <nox> eddyb: That reminds me,
[15:40:36] <nox> is it really useful to say "in expansion of if let"?
[15:40:40] <eddyb> (that's proof that we do macro expansion span tracking wrong)
[15:40:41] <nox> I guess that it's useful for macros,
[15:40:42] <eddyb> nox: no
[15:40:47] <eddyb> I don't think we should do that at all
[15:40:50] <nox> but for if let it sounds like a leaking implementation detail.
[15:40:59] <nox> I shouldn't no that if let is expanded to something else.
[15:40:59] <eddyb> heck, we do it for closures!
[15:41:01] <eddyb> why?!
[15:41:03] <nox> lol
[15:41:12] <eddyb> it's very annoying for closures
[15:41:32] <nox> It shouldn't be done but for macros, right?
[15:41:35] <eddyb> https://github.com/rust-lang/rust/blob/master/src/libsyntax/ext/expand.rs#L345
[15:41:38] <eddyb> nox: IMO yes
[15:41:52] <nox> Why was it done for everything?
[15:42:10] <eddyb> it's only doing the usual hygienic renaming for closures :/
[15:42:11] <nox> Sounds like a case of "it could be done so we did it".
[15:42:46] *** Joins: sigma (sigma@moz-92585k.range217-44.btcentralplus.com)
[15:45:33] <eddyb> blame says https://github.com/rust-lang/rust/pull/25318
[15:45:43] *** Joins: eerie (eerie@moz-11broi.red.bezeqint.net)
[15:46:03] <eddyb> yeah, looks like a mistake
[15:46:07] <eddyb> (for closures)
[15:48:05] <eddyb> nox: the other place I wanted to link to was https://github.com/rust-lang/rust/blob/master/src/librustc/middle/traits/mod.rs#L99
[15:48:18] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[15:48:24] <eddyb> nox: technically, it should be possible to add a BinOpExpr variant to both of those
[15:48:50] *** Joins: joneshf-laptop (joneshf@moz-8v5.psd.245.76.IP)
[15:49:16] <eddyb> "can't add T with U" sounds like a nicer error than the two options we have today
[15:49:42] <eddyb> I guess "subtract" needs to reverse the order
[15:49:56] <nox> Cool. :)
[15:49:58] *** Joins: avikpal (avikpal@moz-gvv.loq.194.117.IP)
[15:50:31] <eddyb> nox: mind if you open issues for the improvements/bugs that showed up in here?
[15:50:44] *** Joins: aepsil0n (eduard@moz-96u0hs.hsi8.kabel-badenwuerttemberg.de)
[15:50:58] <eddyb> it's been two hours and I was supposed to brush my math skills not trigger weird compiler behavior
[15:51:11] <nox> eddyb: I would love to see this kind of integration one day for Rust: http://clang-analyzer.llvm.org/images/analyzer_xcode.png
[15:51:38] <nox> eddyb: BinOpExpr variant, maybe Clang flag and format, and maybe caret? That's the three issues right?
[15:52:13] <eddyb> nox: the whacky macro stuff
[15:52:19] <eddyb> not sure if it has been reported before
[15:52:23] <nox> Oh right.
[15:52:31] <eddyb> that example with arrows is cool
[15:52:34] <nox> Not reporting expansions of if let and closures, too?
[15:53:14] <eddyb> I asked about closures on the PR that added it, that same PR claims it's necessary in for/if-let/while-let expansions
[15:53:27] <nox> lolwat
[15:53:35] <nox> eddyb: Do you have the link to the PR?
[15:53:42] <eddyb> because there are nodes with no correspondence to user code
[15:53:43] <nox> Then I let you do your maths. :P
[15:53:46] <eddyb> nox: I linked to it
[15:53:53] <nox> Oh right, missed it.
[15:54:17] <eddyb> we could have arrow things for paths through the CFG. with the MIR, that's what a lot of the analysis is going to see anyway
[15:54:42] <nox> Arrows for things like "value was moved here" would be quite cool.
[15:54:48] <eddyb> there's a way to dump a CFG in dot form, that you can render with graphviz
[15:54:56] <eddyb> but it's not very pretty
[15:55:28] <eddyb> nox: no no no I have the perfect usecase
[15:55:41] <eddyb> regionck constraints
[15:55:42] <nox> Xcode's Bézier curves are quite gorgeous on the eye.
[15:56:23] <eddyb> "cannot relate lifetimes because of conflicting requirements"
[15:56:36] <nox> It takes quite the attention to detail to justify the need of Bézier curves in a damn code editor, ah ah.
[15:56:40] <eddyb> that only blames a single lifetime relation
[15:56:55] <eddyb> or, I guess, 2 incompatible ones
[15:57:33] <eddyb> but they most likely bubbled up from some thing that you might not even think about
[15:58:07] <eddyb> I used to reduce the bodies of functions to find the error because the compiler was being useless at pointing me to the source of the faulty constraints
[15:58:25] <eddyb> but if it color-coded chains of constraints
[15:58:39] *** Quits: avikpal (avikpal@moz-gvv.loq.194.117.IP) (Ping timeout: 121 seconds)
[15:58:58] *** Quits: waffles (wafflespean@moz-855.9ac.136.123.IP) (Quit: C'yall later...)
[15:59:03] *** Joins: waffles (wafflespean@moz-855.9ac.136.123.IP)
[15:59:06] <eddyb> I could check the starts of conflicting chains and quickly find the culprit
[16:00:07] <nox> eddyb: Sounds interesting. By color-coded chains you mean something actually producible and readable from the console, right?
[16:00:19] <nox> As opposed to fancy graphical arrows overlaying the code.
[16:00:59] <eddyb> ah, I wanted to mention how box-drawing stuff could look better than ^ and ~
[16:01:08] <eddyb> but, no, not console-based
[16:01:13] <eddyb> I wouldn't mind a HTML5 diagnostic report thing that's slightly interactive (but you can't change the source code and see changes dynamically, you need a native IDE for anything like that)
[16:01:15] *** Joins: avikpal (avikpal@moz-292.dm6.227.117.IP)
[16:01:49] <nox> There is so much to do in terms of integration with editors in general…
[16:02:28] <nox> For example in Erlang where you have non-linear patterns, I would love colour-coded variable names to distinguish matches against existing variables vs shadowing of previous variables.
[16:02:42] <eddyb> you need that for Rust, too
[16:02:48] <eddyb> kdevelop does it for C++
[16:03:10] <eddyb> IME it's easier to get something useful starting from scratch than integrating with an existing non-Rust editor
[16:04:38] <eddyb> nox: my experiment with very simple rustc integration https://github.com/eddyb/r3
[16:05:03] <eddyb> ttyl
[16:09:32] *** Joins: filsmick (filsmick@moz-0qapam.abo.wanadoo.fr)
[16:12:35] *** Quits: arielb1 (Ariel@moz-b95g78.red.bezeqint.net) (Quit: Ex-Chat)
[16:12:47] *** Quits: aepsil0n (eduard@moz-96u0hs.hsi8.kabel-badenwuerttemberg.de) (Connection closed)
[16:17:18] *** Quits: eerie (eerie@moz-11broi.red.bezeqint.net) (Connection closed)
[16:17:35] *** Quits: jdm (jdm@moz-ilbt2e.cable.teksavvy.com) (Quit: )
[16:19:36] *** Joins: jimtla (textual@moz-mp47i5.res.rr.com)
[16:19:39] *** Joins: dcb (textual@moz-v6l3du.ca.comcast.net)
[16:20:17] *** Quits: avikpal (avikpal@moz-292.dm6.227.117.IP) (Ping timeout: 121 seconds)
[16:27:51] *** Joins: nham (nham@moz-lglsfe.il.comcast.net)
[16:30:25] <SimonSapin> Can I construct a type T such as mem::align_of::<T>() >= 16 ? This is an attempt at using Box::into_raw to work around std::rt::heap being unstable
[16:31:05] <SimonSapin> (string-cache stores tags in the lower bits of a pointer)
[16:31:27] <eddyb> I should know better than keep IRC open :P
[16:31:34] *** Joins: GBGamer (npm@moz-n1h.qkj.56.172.IP)
[16:31:34] <eddyb> SimonSapin: only with SIMD, which it itself unstable
[16:32:04] <SimonSapin> eddyb: Did I just nerdsnipe you? :)
[16:32:45] <eddyb> putting stuff like [i32x4; 0] at the start of a structure to align it to 16 bytes is a "popular" trick
[16:32:59] <eddyb> #[repr(align(N))] would be nice
[16:37:27] *** Joins: avikpal (avikpal@moz-qqk.cra.194.117.IP)
[16:39:54] *** Quits: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net) (Client exited)
[16:41:33] *** Quits: sigma (sigma@moz-92585k.range217-44.btcentralplus.com) (Ping timeout: 121 seconds)
[16:45:10] *** Quits: mib_15b9zg (Mibbit@moz-566.i8s.156.179.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[16:46:00] *** Joins: avikpal_ (avikpal@moz-u49.3e4.194.117.IP)
[16:46:29] *** Quits: avikpal (avikpal@moz-qqk.cra.194.117.IP) (Ping timeout: 121 seconds)
[16:49:04] *** Joins: avikpal (avikpal@moz-dje.loq.194.117.IP)
[16:50:31] *** Quits: avikpal_ (avikpal@moz-u49.3e4.194.117.IP) (Ping timeout: 121 seconds)
[16:51:02] *** Quits: doener (doener@moz-fnh.n4j.147.5.IP) (Quit: leaving)
[16:51:12] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[16:52:59] *** Quits: tamird (textual@moz-lat.dkr.14.50.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[16:54:50] *** Joins: eerie (eerie@moz-11broi.red.bezeqint.net)
[16:55:26] *** Joins: listochkin (listochkin@moz-u28j0j.interview.volia.net)
[16:55:53] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[16:56:56] *** Quits: avikpal (avikpal@moz-dje.loq.194.117.IP) (Ping timeout: 121 seconds)
[16:58:59] *** Quits: eerie (eerie@moz-11broi.red.bezeqint.net) (Ping timeout: 121 seconds)
[17:02:08] *** Joins: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net)
[17:02:14] <Gankro> eddyb: how does let x = &SOME_CONST work? Copies the const as a temporary in the fn?
[17:02:36] <eddyb> Gankro: it's actually a pointer to .rodata even if it's not 'static
[17:02:56] <Gankro> huh
[17:03:00] <Gankro> magic
[17:03:42] <Gankro> eddyb: Probably still better to just make it a static if you're always going to take a ref to it?
[17:03:57] <eddyb> if you remove one line (or was it 3?) in the compiler, you get 'static lifetime aka "rvalue promotion"
[17:04:33] <eddyb> it's going to be half a year since rvalue promotions were implemented and there is still no RFC :P
[17:07:23] *** Quits: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net) (Client exited)
[17:07:48] *** Quits: dcb (textual@moz-v6l3du.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[17:08:00] *** Joins: dcb (textual@moz-v6l3du.ca.comcast.net)
[17:08:16] *** Joins: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net)
[17:10:56] *** wcosta|afk is now known as wcosta
[17:13:00] *** Joins: harrisonclarke (harrisoncla@moz-rf5rhc.eastlink.ca)
[17:16:12] <SimonSapin> oops, string-cache is unsound since filling drop
[17:18:32] <SimonSapin> on further reading it’s not, but only by chance
[17:24:15] *** Quits: dcb (textual@moz-v6l3du.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[17:26:09] <Gankro> SimonSapin: that's been my general experience with filling drop
[17:26:42] <Gankro> SimonSapin: lemme guess, d1d1d1... is just barely too big to be a valid value?
[17:27:16] <SimonSapin> the lower bits don’t match the "dynamic" tag (which is the only case where Drop does anything)
[17:28:02] <SimonSapin> a different filling value would have triggered extra reference count decrements
[17:28:20] *** Joins: dbittman (piranha@moz-3ab361.ca.comcast.net)
[17:28:42] *** Joins: eerie (eerie@moz-11broi.red.bezeqint.net)
[17:28:59] *** Quits: listochkin (listochkin@moz-u28j0j.interview.volia.net) (Quit: Textual IRC Client: www.textualapp.com)
[17:34:00] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[17:37:17] *** Quits: Quxxy (chatzilla@moz-efh10q.internode.on.net) (Ping timeout: 121 seconds)
[17:38:02] *** Quits: harrisonclarke (harrisoncla@moz-rf5rhc.eastlink.ca) (Connection closed)
[17:38:22] *** Joins: harrisonclarke (harrisoncla@moz-rf5rhc.eastlink.ca)
[17:39:15] <SimonSapin> Box::from_raw is not stable… can I just transmute until it is?
[17:39:43] <nagisa> https://github.com/rust-lang/rust/issues/26292#issuecomment-122571120 can be closed
[17:40:18] *** Joins: mib_g8fz8e (Mibbit@moz-hu6.nja.252.72.IP)
[17:42:03] *** Quits: Kingsquee (kingsquee@moz-k72lip.bchsia.telus.net) (Quit: Leaving)
[17:42:17] <Gankro> SimonSapin: In practical terms, yes
[17:42:36] <Gankro> As in the compiler won't possibly do something exotic
[17:42:50] <SimonSapin> I made a function to limit the inference on transmute
[17:44:23] *** Joins: dcb (textual@moz-v6l3du.ca.comcast.net)
[17:44:59] *** Quits: Nashenas88 (Nashenas88@moz-of81j9.miamfl.sbcglobal.net) (Client exited)
[17:51:30] *** Quits: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net) (Client exited)
[17:52:19] *** Quits: eerie (eerie@moz-11broi.red.bezeqint.net) (Connection closed)
[17:53:42] *** Joins: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net)
[17:54:38] *** Joins: avikpal (avikpal@moz-14q.onn.194.117.IP)
[17:57:38] <SimonSapin> In retrospect, the switch to filling drop should have renamed unsafe_drop_flag, with the old name giving an error message that says to update to filling drop
[17:57:43] *** Quits: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net) (Client exited)
[17:57:50] <SimonSapin> maybe
[18:00:43] *** Joins: apasel422 (Mibbit@moz-6ga37r.ma.comcast.net)
[18:00:43] *** Joins: avikpal_ (avikpal@moz-14q.onn.194.117.IP)
[18:00:45] *** Quits: avikpal (avikpal@moz-14q.onn.194.117.IP) (Connection closed)
[18:02:50] *** Quits: dcb (textual@moz-v6l3du.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[18:05:04] *** Quits: avikpal_ (avikpal@moz-14q.onn.194.117.IP) (Ping timeout: 121 seconds)
[18:09:54] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[18:17:12] *** Joins: eerie (eerie@moz-11broi.red.bezeqint.net)
[18:18:16] *** Quits: summerlight_ (summerlight@moz-lb3.6do.193.175.IP) (Ping timeout: 121 seconds)
[18:20:47] *** Quits: eerie (eerie@moz-11broi.red.bezeqint.net) (Connection closed)
[18:20:57] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[18:21:03] *** Quits: hugod (user@moz-jka.jmo.24.70.IP) (Connection closed)
[18:26:00] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[18:26:42] *** Joins: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net)
[18:26:42] *** ChanServ sets mode: +o pcwalton
[18:29:22] *** Quits: barosl (barosl@moz-tmp.qma.67.220.IP) (Quit: Leaving)
[18:29:30] <SimonSapin> can I make a macro_rule that accepts either a string or an ident? (The ident would got through stringify!)
[18:29:44] <SimonSapin> I can’t seem to get one not match the other pattern
[18:31:01] <SimonSapin> hum, stringify! works with strings too so I can get away with a single pattern
[18:31:09] *** Joins: eerie (eerie@moz-11broi.red.bezeqint.net)
[18:31:35] *** Joins: barosl (barosl@moz-tmp.qma.67.220.IP)
[18:32:40] *** Joins: Guest53 (textual@moz-rvv.00r.255.109.IP)
[18:41:57] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[18:47:18] *** Joins: eerie_ (eerie@moz-11broi.red.bezeqint.net)
[18:47:18] *** Quits: eerie (eerie@moz-11broi.red.bezeqint.net) (Connection closed)
[18:47:18] *** eerie_ is now known as eerie
[18:49:13] *** Quits: jimtla (textual@moz-mp47i5.res.rr.com) (Quit: My Mac has gone to sleep. ZZZzzz…)
[18:50:39] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Connection closed)
[18:54:22] <eddyb> SimonSapin: you don't need them to be exclusive, you can just use precedence
[18:54:27] <eddyb> playbot: stringify!("foo")
[18:54:28] -playbot- "\"foo\""
[18:54:34] <eddyb> SimonSapin: do you want the extra quotes?
[18:54:45] <SimonSapin> oh
[18:54:59] <SimonSapin> I don’t
[18:55:07] <eddyb> if you have a rule taking an ident and one taking an expr, an ident will go to the ident rule and a string will go to the expr rule
[18:56:03] <SimonSapin> eddyb: not what I’m seeing
[18:56:33] <SimonSapin> https://gist.github.com/anonymous/399767d203bbea728abf
[18:56:52] <eddyb> playbot: macro_rules! stringy { ($x:ident) => (stringify!($x)); ($x:expr) => ($x) } (stringy!(a), stringy!("foo"))
[18:56:53] -playbot- <anon>:9:107: 9:112 error: expected ident, found "foo"
[18:56:53] -playbot- <anon>:9         macro_rules! stringy { ($x:ident) => (stringify!($x)); ($x:expr) => ($x) } (stringy!(a), stringy!("foo"))
[18:56:53] -playbot- output truncated; full output at: http://bit.ly/1CIDLoU
[18:57:07] <eddyb> OH
[18:57:12] <eddyb> SimonSapin: I forgot about that
[18:57:20] <SimonSapin> If I swap them I get "unresolved name" errors
[18:58:55] <eddyb> SimonSapin: so what happens is that $x:whatever is irrefutable atm
[18:58:55] <SimonSapin> I was so close :(
[18:59:07] <eddyb> it could be avoided for ident
[18:59:35] <SimonSapin> I think that’s the last remaining obstacle to having string-cache run on stable rust (if somewhat degraded)
[19:00:18] <eddyb> well...
[19:00:53] <SimonSapin> eddyb: would making ident refutable be a big change?
[19:01:13] <eddyb> possibly not
[19:01:41] <eddyb> it's harder in general because parsing is destructive (can emit errors, etc.)
[19:02:29] *** Quits: mib_g8fz8e (Mibbit@moz-hu6.nja.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[19:03:34] <eddyb> SimonSapin: how are you using the string value?
[19:03:59] <SimonSapin> eddyb: calling a function that takes &str
[19:04:15] <eddyb> I... I may know how
[19:04:18] <SimonSapin> well, the macro expands to a call
[19:07:24] <eddyb> playbot: macro_rules! expr { ($x:expr) => ($x) } macro_rules! stringy { ($($x:tt)*) => (match Some(stringify!($($x)*)) { Some($($x)*) => $($x)*, _ => "" }) } (stringy!(a), stringy!("foo"))
[19:07:25] -playbot- output truncated; full output at: http://bit.ly/1e7olyE
[19:07:40] <eddyb> playbot: macro_rules! expr { ($x:expr) => ($x) } macro_rules! stringy { ($($x:tt)*) => (expr!(match Some(stringify!($($x)*)) { Some($($x)*) => $($x)*, _ => "" })) } (stringy!(a), stringy!("foo"))
[19:07:41] -playbot- ("a", "")
[19:08:24] <eddyb> tricky
[19:08:56] *** Quits: Defaultti (Defaultti@moz-bmdn13.kapsi.fi) (Quit: Quitting.)
[19:11:02] <eddyb> playbot: concat!(a, "foo")
[19:11:03] -playbot- <anon>:9:17: 9:18 error: expected a literal
[19:11:03] -playbot- <anon>:9         concat!(a, "foo")
[19:11:03] -playbot- output truncated; full output at: http://bit.ly/1CIEPt8
[19:12:01] *** Joins: listochkin (listochkin@moz-u28j0j.interview.volia.net)
[19:12:09] *** Quits: waffles (wafflespean@moz-855.9ac.136.123.IP) (Quit: C'yall later...)
[19:14:51] *** Joins: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net)
[19:15:15] <SimonSapin> eddyb: which libsyntax file should I be looking at to make ident refutable?
[19:15:25] <eddyb> playbot: macro_rules! expr { ($x:expr) => ($x) } macro_rules! stringy { ($($x:tt)*) => (expr!(match Some("") { Some($($x)*) => $($x)*, _ => stringify!($($x)*) })) } (stringy!(a), stringy!("foo"))
[19:15:27] -playbot- ("", "\"foo\"")
[19:15:30] <eddyb> hmpf
[19:15:39] <eddyb> SimonSapin: in ext/tt
[19:15:50] <eddyb> one of them is the macro_rules matcher
[19:16:11] <eddyb> literal tokens are refutable, but $x:foo aren't
[19:17:00] *** Joins: Defaultti (Defaultti@moz-bmdn13.kapsi.fi)
[19:17:20] *** Joins: eerie_ (eerie@moz-11broi.red.bezeqint.net)
[19:17:20] *** Quits: eerie (eerie@moz-11broi.red.bezeqint.net) (NickServ (RECOVER command used by eerie_))
[19:17:20] *** eerie_ is now known as eerie
[19:19:40] <SimonSapin> make `fn parse_nt(…) -> Nonterminal` return Option
[19:20:32] <eddyb> huh
[19:20:37] <SimonSapin> no?
[19:20:42] <eddyb> let me see
[19:24:37] <eddyb> SimonSapin: here's the current refutability https://github.com/rust-lang/rust/blob/master/src/libsyntax/ext/tt/macro_parser.rs#L435-L438
[19:25:42] <eddyb> and I think this is irrefutable https://github.com/rust-lang/rust/blob/master/src/libsyntax/ext/tt/macro_parser.rs#L417
[19:26:28] <SimonSapin> I see
[19:27:29] <eddyb> https://github.com/rust-lang/rust/blob/master/src/libsyntax/ext/tt/macro_parser.rs#L487-L488
[19:27:38] <eddyb> name_string is actually the fragment kind
[19:30:07] <eddyb> I think you just need to check here that for "ident", you have token::Ident, and not do anything otherwise https://github.com/rust-lang/rust/blob/master/src/libsyntax/ext/tt/macro_parser.rs#L417
[19:33:18] <SimonSapin> like this? https://gist.github.com/anonymous/51694e186581a98a2f13
[19:34:53] *** Joins: npm (npm@moz-pi07bg.hfc.comcastbusiness.net)
[19:35:10] <eddyb> SimonSapin: the other way around
[19:35:24] <eddyb> SimonSapin: if name is "ident" it has to be token::Ident
[19:35:54] <eddyb> if the name is not "ident", it should not care, and behave exactly as it used to
[19:38:15] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[19:38:18] *** Quits: mukilan (mukilan@moz-p2u.ljc.164.122.IP) (A TLS packet with unexpected length was received.)
[19:38:41] *** Quits: GBGamer (npm@moz-n1h.qkj.56.172.IP) (Ping timeout: 121 seconds)
[19:39:29] *** Joins: npm_ (npm@moz-oq7.0t6.56.172.IP)
[19:42:12] <SimonSapin> https://gist.github.com/anonymous/02ca143f0d3cbba5347f ?
[19:42:14] *** Quits: lu324 (lu324___@moz-gogein.dhcp.embarqhsd.net) (Connection closed)
[19:42:34] *** Joins: lu324 (lu324___@moz-gogein.dhcp.embarqhsd.net)
[19:43:05] *** Quits: npm (npm@moz-pi07bg.hfc.comcastbusiness.net) (Ping timeout: 121 seconds)
[19:43:19] *** npm_ is now known as npm
[19:43:39] *** Quits: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net) (Client exited)
[19:47:21] *** Joins: eerie_ (eerie@moz-11broi.red.bezeqint.net)
[19:47:21] *** Quits: eerie (eerie@moz-11broi.red.bezeqint.net) (NickServ (RECOVER command used by eerie_))
[19:47:21] *** eerie_ is now known as eerie
[19:48:29] *** npm is now known as GBGamer
[19:53:28] *** Joins: laumann (thomas@moz-n9e72h.0.fullrate.dk)
[19:55:18] *** Quits: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net) (Client exited)
[20:02:14] *** Joins: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net)
[20:07:26] *** Quits: eerie (eerie@moz-11broi.red.bezeqint.net) (Connection closed)
[20:08:09] *** Quits: Guest53 (textual@moz-rvv.00r.255.109.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[20:09:19] *** Quits: harrisonclarke (harrisoncla@moz-rf5rhc.eastlink.ca) (Connection closed)
[20:09:52] *** Joins: harrisonclarke (harrisoncla@moz-rf5rhc.eastlink.ca)
[20:10:12] <eddyb> SimonSapin: yes, that looks good (assuming it even works :D) (sorry, I didn't see your message because you didn't highlight me)
[20:10:46] <nham> anyone who's familiar with the orphan check rules want to review my attempted explanations? gh26982
[20:10:46] <[o__o]> Add explanation for E0210 and revise E0117.: https://github.com/rust-lang/rust/pull/26982
[20:11:36] <SimonSapin> eddyb: ok. I got "error: can't find crate for `syntax`" when trying to use my build from `make rustc-stage1`, trying a full build now
[20:11:57] <eddyb> SimonSapin: you need to set LD_LIBRARY_PATH
[20:12:26] <SimonSapin> I have export LD_LIBRARY_PATH="$PREFIX/lib:$PREFIX/lib/rustlib/x86_64-unknown-linux-gnu/lib:$LD_LIBRARY_PATH"
[20:12:28] <nagisa> Yurume, Yurumechan: ping
[20:12:36] <Yurume> pong
[20:12:39] <Yurume> yup?
[20:12:43] <eddyb> SimonSapin: not that one
[20:12:46] <eddyb> SimonSapin: x86_64-unknown-linux-gnu/stage1/lib
[20:12:46] <SimonSapin> And PREFIX=/home/simon/tmp/rust-build/x86_64-unknown-linux-gnu/stage
[20:12:59] <SimonSapin> stage1 *
[20:13:10] <nagisa> Yurume: are you working on splitting your encoding crate into interface at the moment? I might see if I can do something over the weekend
[20:13:24] <eddyb> the .so's the compiler uses are in the shallow lib dir
[20:14:02] *** Quits: harrisonclarke (harrisoncla@moz-rf5rhc.eastlink.ca) (Ping timeout: 121 seconds)
[20:14:27] <Yurume> nagisa: not now. in fact, I'm recovering from the daily job for recent weeks (and couldn't do any work requiring more than 20min of concentration).
[20:14:45] <Yurume> feel free to file a PR, I would be glad to review that
[20:15:17] *** Quits: dp_ (dp@moz-4c9oaa.fbx.proxad.net) (Ping timeout: 121 seconds)
[20:17:13] <SimonSapin> eddyb: I do have libsyntax-7e44814b.so in $LD_LIBRARY_PATH
[20:17:33] <eddyb> SimonSapin: you have the wrong directory
[20:17:40] <eddyb> oh
[20:17:42] <eddyb> SimonSapin: nevermind
[20:17:55] <eddyb> SimonSapin: no idea then
[20:18:34] <eddyb> (the ordering seems fine, too, even if I wouldn't dare to put both directory in LD_LIBRARY_PATH)
[20:18:48] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Quit: It's a joke, it's all a joke.)
[20:19:14] <eddyb> SimonSapin: if you just do echo $LD_LIBRARY_PATH in your shell, does that look correct?
[20:19:30] <SimonSapin> I added the second one as an attempt to fix this, same without
[20:19:36] <eddyb> :(
[20:21:17] *** Joins: SiegeLord (sl@moz-9jtaei.ca.comcast.net)
[20:21:24] <SimonSapin> does the order of patterns matter in macro_rules?
[20:21:35] <SimonSapin> if not, idents will still match expr
[20:24:15] <eddyb> SimonSapin: it does, first pattern that isn't refuted wins
[20:24:25] <SimonSapin> ok
[20:25:38] *** Joins: npm (npm@moz-pi07bg.hfc.comcastbusiness.net)
[20:26:25] *** Quits: GBGamer (npm@moz-oq7.0t6.56.172.IP) (NickServ (RECOVER command used by npm))
[20:26:25] *** npm is now known as GBGamer
[20:31:17] *** Quits: ytain (ytain@moz-u0rb5h.dsl.teksavvy.com) (Quit: Textual IRC Client: www.textualapp.com)
[20:31:39] *** Joins: hugod (user@moz-jka.jmo.24.70.IP)
[20:34:34] <eddyb> Gankro: is there no way to do an adjacency B-search in a BTreeMap?
[20:35:11] <eddyb> Gankro: or should I not abuse BTreeMap as a range tree?
[20:36:06] <eddyb> maybe "adjacency" is the wrong word
[20:36:31] <Gankro> You want to do predecessor queries?
[20:36:42] <eddyb> Gankro: I need an O(log N) operation to find the element just before a given key
[20:36:54] <eddyb> yupp, that's a better word :D
[20:37:27] <Gankro> eddyb: there's an rfc. Right now you can abuse range()
[20:37:37] <eddyb> but range gives me things insi- OH
[20:37:56] <apasel422> eddyb: https://github.com/rust-lang/rfcs/pull/1195
[20:37:56] <eddyb> Gankro: I did not consider iterating (unbounded, key] in reverse
[20:38:12] <Gankro> Eddyb yeah exactly
[20:38:19] <eddyb> very cool, thanks!
[20:38:52] <eddyb> still not 100% sure I can map Spans to scopes properly with such a thing, but at least I have the tools
[20:39:29] <apasel422> Gankro: r? https://github.com/contain-rs/trie/pull/17
[20:40:05] <Gankro> Apasel on phone. Be back home in 30
[20:40:55] <SimonSapin> eddyb: It works, thanks a lot! https://github.com/rust-lang/rust/pull/27115
[20:42:08] *** Quits: blueridanus (Mibbit@moz-k63.43p.20.201.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[20:42:33] <Gankro> Real talk range is way slower than the dedicated api should be, though
[20:43:04] <eddyb> real talk? is that autocorrect talking?
[20:43:14] <eddyb> aww I can't cc @rust-lang/lang
[20:43:47] <eddyb> I forgot how it's ignored if the person writing it doesn't see the team
[20:44:20] <nagisa> eddyb: does using direct link work (e.g. https://github.com/orgs/rust-lang/teams/lang)?
[20:44:39] <nagisa> apparently not
[20:44:47] <eddyb> it wouldn't do anything anyway
[20:44:47] <nagisa> (this is why I dislike current implementation of teams)
[20:45:00] <eddyb> just like linking to https://github.com/eddyb doesn't cc me
[20:45:08] <eddyb> it's only a dumb link
[20:45:17] <nagisa> but linking to issue or PR properly converts to #<id>
[20:45:21] <Gankro> realtalk is a real thing :p
[20:45:46] <steveklabnik> realtalk: i use realtalk all the time
[20:46:08] * eddyb <- whoosh
[20:46:47] <Gankro> Eddyb "but seriously" "for serious" "for reals" "realtalk"
[20:47:03] *** Quits: untitaker (untitaker@moz-7p06v2.highway.telekom.at) (Ping timeout: 121 seconds)
[20:47:10] <Elaine> forizzle
[20:47:54] <eddyb> fo' rizzle: A bastardization of 'for real', which is a bastardization of 'true that', which is a bastardization of 'that is true'.
[20:48:40] <eddyb> this description is competing with GoT
[20:48:40] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[20:49:06] *** Joins: untitaker (untitaker@moz-0ea47j.highway.telekom.at)
[20:49:22] <eddyb> Gankro: was it supposed to have some punctuation that was omitted due to the "smart"phone?
[20:49:41] <Gankro> Eh my english is pretty phonetic
[20:49:51] <steveklabnik> one might say it's hooked
[20:49:54] <steveklabnik> on phoentics
[20:50:12] <Elaine> eh close enough
[20:50:23] <Gankro> I unno howta spell tha words i say eh?
[20:51:08] <eddyb> steveklabnik: do you pronounce that like phoenix?
[20:51:11] * nagisa points at #rust-offwhatever and pouts angrily
[20:51:23] <Elaine> +1
[20:51:51] <GBGamer> eddyb: I think it's like fon-tiks
[20:51:56] <steveklabnik> fo net ticks
[20:51:56] <Gankro> nagisa: post a real issue :p I just answered a lang question and r+'d a PR in this convo
[20:52:21] <steveklabnik> i guess i missed an e
[20:52:29] <steveklabnik> phonetics
[20:52:34] <GBGamer> nah you just switched e and n
[20:52:38] <nagisa> Gankro: easy for you to say when you have questions to answer and rights to r+ :
[20:52:39] <nagisa> 😃
[20:52:53] <eddyb> steveklabnik: but really, I want to hear "phoentics"
[20:53:30] <GBGamer> it's like a mix of a Phoenix and a tick
[20:53:49] <Gankro> nagisa: i will answer literally any rust question you got
[20:54:31] <nagisa> Gankro: how do I write a $1B net-worth social network website before my food gets cold?
[20:54:55] <eddyb> https://translate.google.com/#en/ro/phoentics this works better than expected
[20:55:02] <Gankro> Hire rockstars
[20:55:18] <Gankro> Steve knows rails
[20:55:21] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[20:55:26] * eddyb takes rocks and arranges them in a pentagram
[20:55:31] <eddyb> is this how you rockstar?
[20:55:42] <GBGamer> make certain to write it in PHP
[20:55:54] <nagisa> and keep the food heated, right?
[20:55:55] <eddyb> GBGamer: and them spend billions mutating PHP
[20:56:13] <GBGamer> eddyb: pretty much
[20:56:30] *** Joins: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP)
[20:56:49] <eddyb> add type annotations, maybe some AOT, find a self-deprecating name for your mutation...
[20:57:28] *** Quits: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua) (Ping timeout: 121 seconds)
[20:57:30] <SimonSapin> eddyb: can I make this macro work with any string, but only literals?
[20:57:33] <Gankro> nagisa nah eat cold foods. They probably only check for negative deltas
[20:58:10] <eddyb> SimonSapin: huh?
[20:58:12] <GBGamer> Gankro: real rust question: what did we do to create machine code when we used OCaml
[20:58:20] <eddyb> SimonSapin: you can make whatever you have take &'static str
[20:58:26] <Elaine> GBGamer: custom code.
[20:58:38] <Elaine> had our own backend
[20:58:41] <Elaine> didn't use llvm or anything
[20:58:46] <SimonSapin> eddyb: I want it to match the behavior of the plugin, which only works with string literals, not any string
[20:58:56] <SimonSapin> … expression
[20:58:58] <GBGamer> so we converted to LLVM when we switched to rustc?
[20:59:15] <Elaine> yes.
[20:59:21] <SimonSapin> hum, yeah, 'static is a good approximation
[20:59:28] <GBGamer> cool, thanks, I always wondered
[21:00:04] <nagisa> Elaine: here’s a question for you: how long are you a contributor now?
[21:00:29] <eddyb> SimonSapin: I presume the plugin does some cool caching?
[21:01:20] <eddyb> SimonSapin: well, it wouldn't be caching, more like pre-hashing
[21:01:35] <Elaine> nagisa: well, I don't know when the last time I actually wrote code for Rust was...
[21:01:54] <Elaine> About 2.5 years now though
[21:02:01] <SimonSapin> eddyb: it has a list of known static strings, so that atom!(html) expends to something like Atom { data: 732_u64 }
[21:02:22] *** Joins: npm (npm@moz-8dj.0t6.56.172.IP)
[21:02:34] <Elaine> nagisa: why?
[21:03:07] <nagisa> Elaine: I’ve been wondering about this for a while, because when you started popping up you seemed to be quite experienced already. My curiosity is satisfied now.
[21:03:09] *** Quits: GBGamer (npm@moz-pi07bg.hfc.comcastbusiness.net) (NickServ (RECOVER command used by npm))
[21:03:09] *** npm is now known as GBGamer
[21:03:17] <Elaine> nagisa: I'm https://github.com/cmr/
[21:03:23] <nagisa> oh!
[21:03:24] *** Quits: mitaa (mitaa@moz-bla0s8.dyn.drei.com) (Ping timeout: 121 seconds)
[21:03:27] <nagisa> so that’s why!
[21:03:53] <eddyb> SimonSapin: so the stable version is less efficient?
[21:03:58] <SimonSapin> yes
[21:04:04] <Gankro> Elaine has entered their traditional rust developper twilight years, wherein all code they ever wrote will get rewritten
[21:04:08] <SimonSapin> trade offs
[21:04:11] <eddyb> SimonSapin: even for idents, you do a lookup?
[21:04:23] <SimonSapin> yes
[21:04:34] <eddyb> but are the idents pre-defined in both cases, in a module somewhere?
[21:04:44] <SimonSapin> it’s an OrderedPhfSet lookup
[21:04:47] <Gankro> Actually on that note, does anyone know who eefriedman is?
[21:04:51] <GBGamer> oh, Elaine, did you do that cool talk about typesystems at the Rust 1.0 thing?
[21:05:04] <GBGamer> or was that someone else with a three letter nick
[21:05:05] <Elaine> GBGamer: no, that was kmc
[21:05:15] <Elaine> Dependent types in 5 minutes
[21:05:19] <SimonSapin> eddyb: hum, now that you say that, I could generate the macro to use literal strings in patterns
[21:05:42] <GBGamer> okay, 3-letter nicks are quite annoying
[21:06:11] <GBGamer> I'm glad you knew what I was talking about though, thanks
[21:06:40] <eddyb> SimonSapin: because I'm thinking you could have the idents as methods or fields on the interner, and get them from there. but that only works if you provide that structure
[21:06:46] <eddyb> /nick edy
[21:07:15] <eddyb> edb is easier to confuse, though, even better
[21:07:39] <nox> GBGamer: Three-letters *unpronounceable* nick. :P
[21:07:48] <SimonSapin> eddyb: Do you mean `use something::something; something.html()`? Not as convenient as `atom!(html)`
[21:08:00] <GBGamer> yeah, nox is pretty easy to get
[21:08:44] <nox> Someone should take "___", you need to leave a blank of 1s while talking to mention them.
[21:08:45] <nagisa> eddyb: edb sounds alot like some debugger.
[21:09:14] <eddyb> nagisa: you got me
[21:09:45] <eddyb> SimonSapin: I mean, atom!(html) expanding to grabbing .html or ::html from somewhere
[21:09:45] <GBGamer> eddyb is actually just a super advanced debugger
[21:10:11] *** GBGamer is now known as ____
[21:10:12] <eddyb> employing biological neural networks
[21:10:13] <SimonSapin> eddyb: would that work with atom!("html") ?
[21:10:13] <nox> The debugger with feels.
[21:10:18] <____> mwahahahahaha
[21:10:19] <nox> ____: Ah ah.
[21:10:40] <eddyb> SimonSapin: and that would hit the slow path
[21:10:41] <nox> SimonSapin: Why do you need both, btw?
[21:10:45] *** ____ is now known as GBGamer
[21:11:15] *** Joins: dcb (textual@moz-updd7a.hfc.comcastbusiness.net)
[21:11:18] <eddyb> not really sure it's worth optimizing it that much
[21:11:26] <eddyb> SimonSapin: do you do any small-string optimization?
[21:12:24] <SimonSapin> eddyb: oh, I just remembered that the plugin also expands to a pattern (for `match`), this macro doesn’t :(
[21:13:00] <eddyb> riiiight
[21:13:35] <eddyb> SimonSapin: if you used the module with constants form, it could work for idents
[21:13:41] <SimonSapin> yes, strings 7 bytes or less are stored inline
[21:13:54] *** Joins: arthurprs (Mibbit@moz-566.i8s.156.179.IP)
[21:14:46] <eddyb> except when they wouldn't :/
[21:14:58] <eddyb> playbot: "foo" as *const str
[21:14:59] -playbot- <anon>:8:5: 8:9 error: the trait `core::marker::Sized` is not implemented for the type `str` [E0277]
[21:14:59] -playbot- <anon>:8     show({
[21:14:59] -playbot- output truncated; full output at: http://bit.ly/1Vfglxs
[21:16:46] <arthurprs> Gankro: do you think this is acceptable? https://github.com/arthurprs/rust-optimized-inttostr/commit/5ae32382e00e2fd836fe82e195874a60f5612dd0#diff-75009d71fc672c2f26529de8c1281c18R89
[21:17:00] <eddyb> SimonSapin: oh I just figured how you can get a range of integers without having to type them manually
[21:17:09] <SimonSapin> a range?
[21:17:17] <eddyb> a sequence, rather
[21:17:21] <eddyb> 0, 1, 2, 3, 4...
[21:17:44] *** Quits: GBGamer (npm@moz-8dj.0t6.56.172.IP) (Ping timeout: 121 seconds)
[21:18:08] <eddyb> playbot: enum Foo { A, B } const A: usize = Foo::A as usize; const B: usize = Foo::B as usize; match 0 { A => "A", B => "B", _ => "" }
[21:18:08] -playbot- <anon>:9:44: 9:50 error: constant evaluation error: non-constant path in constant expr
[21:18:09] -playbot- <anon>:9         enum Foo { A, B } const A: usize = Foo::A as usize; const B: usize = Foo::B as usize; match 0 { A => "A", B => "B", _ => "" }
[21:18:09] -playbot- output truncated; full output at: http://bit.ly/1HH203m
[21:18:13] <eddyb> huh
[21:18:34] <Gankro> arthurprs: it's not really standard style but nothing seems immediately wrong?
[21:18:58] <eddyb> SimonSapin: oh, the compiler needs to be taught that
[21:19:12] <arthurprs> Gankro: I fell I'm hunting asm instructions down at this point :x
[21:19:30] <arthurprs> but it does show up on small number benchmarks
[21:19:45] <Gankro> arthurprs: If you know C++ you could right idiom passes :)
[21:20:12] <Gankro> arthurprs: nastier code for measured perf is A-OK to me
[21:20:25] * eddyb can only wrong idioms
[21:20:26] <Gankro> It's just usually people don't bother to measure so I make sure to ask
[21:20:56] *** Joins: GBGamer (npm@moz-n8d.qkj.56.172.IP)
[21:21:15] *** Joins: mib_nkek3s (Mibbit@moz-hu6.nja.252.72.IP)
[21:22:09] *** Quits: mib_nkek3s (Mibbit@moz-hu6.nja.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[21:22:45] <apasel422> sigh: https://github.com/rust-lang/rust/issues/27116
[21:23:21] <eddyb> where is the downvote button on GitHub?
[21:23:58] <Gankro> I got this
[21:24:40] *** Joins: mitaa (mitaa@moz-k5aba3.dyn.drei.com)
[21:25:14] <GBGamer> "should I use this?" "no"
[21:26:33] *** Quits: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net) (Client exited)
[21:26:37] *** Quits: listochkin (listochkin@moz-u28j0j.interview.volia.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[21:27:30] *** Joins: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net)
[21:28:43] <eddyb> GBGamer: smooth
[21:29:11] <GBGamer> well, Rust is not meant to be a whitespace language (thankfully)
[21:29:47] <eddyb> you can omit semicolons except for the end of let statements and item declarations
[21:29:53] <eddyb> and between expressions
[21:30:11] <Gankro> But you know, other than that...
[21:31:27] <AlisdairO> i wonder if that was actually serious or just trollery
[21:32:10] <AlisdairO> it’s always boggled my mind that people get *that* wound up about it either way
[21:33:41] <GBGamer> yeah, I don't really get it
[21:34:21] <Gankro> This is why I comissioned slag
[21:34:27] <Gankro> So worth it
[21:34:49] <GBGamer> Rust has much nicer semantics because it isn't whitespace dependent, but if you're using a language that is meant to be whitespace dependent, they work just as well
[21:35:11] <GBGamer> (well, I don't know much nicer, but it is nice for returns)
[21:36:00] *** Quits: dcb (textual@moz-updd7a.hfc.comcastbusiness.net) (Ping timeout: 121 seconds)
[21:37:42] <AlisdairO> Gankro: commissioned?  I’m imagining you organising a swap off, and in return writing something to allow you to use curly braces and semi colons in python :D
[21:38:03] <Gankro> Nah I think I owe mystor like 50 bucks
[21:38:17] <AlisdairO> lol :D
[21:39:26] *** Quits: AlisdairO (anonymous@moz-ntsaoe.cable.virginm.net) (Client exited)
[21:39:33] <steveklabnik> realtalk: you owe him 50 bucks
[21:39:40] <steveklabnik> lol
[21:40:54] *** Quits: filsmick (filsmick@moz-0qapam.abo.wanadoo.fr) (Quit: )
[21:43:00] <Gankro> Chump's in a different country >:D
[21:58:39] <SimonSapin> eddyb: "best" solution: https://gist.github.com/anonymous/909cee0e566140a7c814
[21:58:42] <SimonSapin> (generated, of course)
[21:59:41] <SimonSapin> 2364 lines of macro_rules
[22:00:28] <Gankro> oh geez, I thought you said that was the *generator*
[22:01:23] <eddyb> case insensitive, too? sheesh
[22:02:00] <SimonSapin> eddyb: only for ns!, not atom!
[22:02:04] <SimonSapin> the generator is https://github.com/servo/string-cache/blob/43c6f112042447e82f3275ab1b1bfc182568dd93/build.rs
[22:03:10] <eddyb> you could do some of this with enums
[22:03:22] <eddyb> since your data is an integer
[22:09:57] *** Joins: elif (chatzilla@moz-ev8m1p.res.rr.com)
[22:13:16] *** Quits: eljay (eljay@moz-fmte10.skybroadband.com) (Ping timeout: 121 seconds)
[22:14:26] *** Joins: RC9 (RCIX@moz-tri.dfa.8.198.IP)
[22:16:10] <SimonSapin> eddyb: Atom.data is a u64, either a pointer, 7 bytes, or an ID for a static string
[22:16:23] <SimonSapin> these are only for the static strings
[22:22:28] *** Quits: arthurprs (Mibbit@moz-566.i8s.156.179.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:22:39] *** Quits: martin (martin@moz-9td.bol.200.84.IP) (Ping timeout: 121 seconds)
[22:25:23] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Connection closed)
[22:26:14] *** Quits: dgrunwald (Daniel@moz-9m4v2i.hsi4.kabel-badenwuerttemberg.de) (Quit: Leaving.)
[22:27:18] *** Joins: genbattle (genbattle@moz-poo2cb.xtra.co.nz)
[22:30:29] *** Quits: GBGamer (npm@moz-n8d.qkj.56.172.IP) (Ping timeout: 121 seconds)
[22:31:54] *** Joins: GBGamer (npm@moz-n8d.qkj.56.172.IP)
[22:32:29] *** Joins: tamird (textual@moz-kak.d5m.14.107.IP)
[22:33:10] *** Quits: dlight (dlight@moz-1pmpc1.gvt.net.br) (A TLS packet with unexpected length was received.)
[22:34:42] *** Joins: npm (npm@moz-821.0t6.56.172.IP)
[22:35:22] *** Quits: genbattle (genbattle@moz-poo2cb.xtra.co.nz) (Ping timeout: 121 seconds)
[22:36:06] *** Joins: dlight (dlight@moz-1pmpc1.gvt.net.br)
[22:37:05] *** Quits: GBGamer (npm@moz-n8d.qkj.56.172.IP) (Ping timeout: 121 seconds)
[22:42:35] *** Quits: joneshf-laptop (joneshf@moz-8v5.psd.245.76.IP) (Connection closed)
[22:42:42] *** Joins: joneshf-laptop (joneshf@moz-0iuff6.scrm01.sbcglobal.net)
[22:43:12] *** Quits: newbie (eibwen@moz-oh9d77.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[22:43:35] *** Joins: p1start (p1start@moz-nftjhe.org)
[22:47:30] *** Joins: genbattle (genbattle@moz-poo2cb.xtra.co.nz)
[22:47:38] *** Joins: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca)
[22:47:57] <Gankro> SimonSapin: Is this distinct from tendril?
[22:49:18] *** Quits: genbattle (genbattle@moz-poo2cb.xtra.co.nz) (Quit: Leaving)
[22:51:53] *** Joins: genbattle (genbattle@moz-poo2cb.xtra.co.nz)
[22:51:55] *** Quits: harrisonclarke (harrisoncla@moz-uur7pt.eastlink.ca) (Connection closed)
[22:53:39] <SimonSapin> Gankro: yes
[22:53:49] <SimonSapin> html5ever uses both, but they’re independent
[22:54:01] <Gankro> small vs big, I assume?
[22:54:12] *** Joins: arthurprs (Mibbit@moz-566.i8s.156.179.IP)
[22:54:22] *** Quits: nham (nham@moz-lglsfe.il.comcast.net) (Ping timeout: 121 seconds)
[22:54:32] <SimonSapin> likely to be in a small set vs not
[22:56:22] *** Quits: genbattle (genbattle@moz-poo2cb.xtra.co.nz) (Ping timeout: 121 seconds)
[22:56:29] *** Quits: tamird (textual@moz-kak.d5m.14.107.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[22:58:42] <SimonSapin> string-cache provides fast comparison and hashing (one u64), tendril reduces the amount of copying (it’s kind of a mix of Cow and Rc) and supports multiple formats (UTF-8 with conversions with str, WTF-8, arbitrary bytes)
[22:59:25] <SimonSapin> though we don’t use formats yet (and unsure if we will), html5ever is still hard-coded to UTF-8
[23:01:15] *** Joins: genbattle (genbattle@moz-poo2cb.xtra.co.nz)
[23:02:58] *** Quits: swgillespie (swgillespie@moz-rn1.vmq.232.104.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[23:06:37] <Gankro> Doesn't html need to deal with arbitrary encodings?
[23:12:21] *** Quits: SiegeLord (sl@moz-9jtaei.ca.comcast.net) (Connection closed)
[23:13:21] *** Quits: RC9 (RCIX@moz-tri.dfa.8.198.IP) (Ping timeout: 121 seconds)
[23:20:51] *** Joins: dcb (textual@moz-v6l3du.ca.comcast.net)
[23:21:27] *** Joins: brson (brson@moz-f0v.335.39.84.IP)
[23:21:27] *** ChanServ sets mode: +o brson
[23:22:18] *** Quits: laumann (thomas@moz-n9e72h.0.fullrate.dk) (Ping timeout: 121 seconds)
[23:24:30] *** Quits: apasel422 (Mibbit@moz-6ga37r.ma.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[23:50:14] *** Joins: RC9 (RCIX@moz-7omm6s.ph.cox.net)
[23:56:29] *** Quits: RC9 (RCIX@moz-7omm6s.ph.cox.net) (Connection closed)
