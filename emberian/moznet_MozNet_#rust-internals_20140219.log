[00:00:16] <nrc> new_one: it would be good to merge the type params stuff before getting too deep with the lifetime stuff - otherwise you'll have rebasing nightmares
[00:00:17] <acrichto> bjz: now this sounds exciting
[00:00:38] <acrichto> bjz: you should benchmark against C printf for integer formatting to get a sense of if we're in the right ballpark or not
[00:00:56] <bjz> acrichto: maybe in a future PR :)
[00:01:58] <bjz> acrichto: plus I'm reasonable happy with the refactor of pad_integral and with_padding
[00:02:08] <bjz> acrichto: seems to be much clearer
[00:02:13] <bjz> at least imo
[00:02:21] <acrichto> hehe, I'm sure anything is much clearer than what I originally wrote
[00:02:31] <bjz> hah
[00:02:37] <bjz> well at least it worked
[00:02:55] <bjz> it was a starting point
[00:03:00] <bjz> same with std::num::strconv
[00:08:17] <brson> r? https://github.com/mozilla/rust/pull/12311
[00:13:38] <acrichto> I was hoping to get another opinion
[00:13:41] <acrichto> oh well
[00:14:35] <brson> there's still time
[00:14:48] <brson> i didn't realize we'd gotten through all the P-high-untriaged bugs
[00:14:57] <acrichto> we did?!
[00:15:06] <brson> the tag doesn't exist
[00:15:15] <acrichto> was it delted?
[00:15:20] <acrichto> I could have swore we didn't get through all of them
[00:15:42] <acrichto> tags with no issues show up differently...
[00:16:12] <brson> oh, i must have had a filter on
[00:16:38] *** Joins: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[00:16:41] <brson> when you are showing a milestone, the sidebar doesn't acknowlede the existance of other tags
[00:16:53] <acrichto> oh whoops so did I
[00:16:55] <brson> 33 P-high-untriaged left
[00:17:19] <brson> we did remove 5 1.0 bugs just yesterday
[00:17:32] <acrichto> \o/
[00:17:44] *** Quits: new_one (new_one@ECFBFAA9.328FFDD8.B3C0173E.IP) (Client exited)
[00:19:26] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[00:20:37] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[00:22:36] <acrichto> brson: just curious, but have you ever seen anything like http://buildbot.rust-lang.org/builders/auto-linux-64-x-android-t/builds/1264/steps/test/logs/stdio before?
[00:22:42] <acrichto> just part of https://github.com/mozilla/rust/pull/12164
[00:23:56] <brson> acrichto: no. perhaps we're reading metadata from the wrong libraries?
[00:24:16] <acrichto> last I checked that symbol definitely did exist though
[00:24:33] <acrichto> I should try to reproduce in a local emulator
[00:33:40] *** Quits: steveklabnik (steev@B1BA5385.27F34CF7.5670445F.IP) (Quit: leaving)
[00:36:56] *** Joins: steveklabnik (steev@B1BA5385.27F34CF7.5670445F.IP)
[00:41:09] *** Joins: bjz_ (bjz@B398BE78.F804C29E.D35A31DF.IP)
[00:41:52] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[00:43:41] <bjz_> acrichto: https://github.com/mozilla/rust/pull/12382
[00:43:50] <bjz_> gotta head out, bbl
[00:46:48] *** Joins: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP)
[00:46:48] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14a3fe94d to 14ee8f45e: 02http://git.io/N3iJvQ
[00:46:48] *** Parts: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP) ()
[00:46:49] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[00:46:49] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/o7u9Vg
[00:46:49] <ghrust> 13rust/06auto 14636d9b7 15mr.Shu: Changed NonCamelCaseTypes lint to warn by default...
[00:46:49] <ghrust> 13rust/06auto 14024c6b2 15bors: auto merge of #12290 : mrshu/rust/lint-warn-by-default, r=alexcrichton...
[00:46:49] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[00:55:47] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Input/output error)
[01:00:02] *** Parts: aepsil0n (eduard@moz-15CB80F2.hsi8.kabel-badenwuerttemberg.de) ()
[01:01:07] *** Joins: erickt (Adium@moz-BDF423C7.hfc.comcastbusiness.net)
[01:03:14] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[01:08:12] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[01:08:12] *** ChanServ sets mode: +ao pcwalton pcwalton
[01:11:49] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[01:11:49] <ghrust> [13rust] 15bors pushed 3 new commits to 06auto: 02http://git.io/8FPDgQ
[01:11:49] <ghrust> 13rust/06auto 14ece12d8 15Virgile Andreani: mk: Fix the regexp of SHOW_DOCS...
[01:11:49] <ghrust> 13rust/06auto 1454f710f 15Virgile Andreani: mk: Talk about `make clean` in the build help
[01:11:50] <ghrust> 13rust/06auto 14b61a94a 15bors: auto merge of #12364 : Armavica/rust/mk-tips, r=alexcrichton...
[01:11:52] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[01:17:35] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[01:27:43] *** Quits: erickt (Adium@moz-BDF423C7.hfc.comcastbusiness.net) (Quit: Leaving.)
[01:28:39] *** Quits: eibwen (kvirc@moz-960503D8.dip0.t-ipconnect.de) (Ping timeout)
[01:34:59] *** Joins: erickt (Adium@moz-BDF423C7.hfc.comcastbusiness.net)
[01:38:31] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[01:38:41] <nrc> how can I get bors to retry landing?
[01:39:19] <tjc> nrc: if you comment on the commit saying "@bors: retry", that should work
[01:39:22] <tjc> without the quotation marks
[01:40:04] <nrc> thanks tjc!
[01:43:08] <brson> nrc if you are not a reviewer yet, then you need to get somebody else to ask bors
[01:43:26] <brson> i wonder how much mileage we could get from marketing rust to rust-the-game enthusaists
[01:43:26] <erickt> acrichto: oops, I meant to ping you over here :)
[01:44:41] <erickt> brson: we really should reach out to the developers and see if they'll support mods, so we can put rust in his rust
[01:44:55] <erickt> maybe to add rust(ed iron spots)
[01:49:10] <nrc> Can we get bors to reply with "I'm sorry nrc, I can't let you do that"?
[01:50:07] <nrc> Could someone summon bors for me please? https://github.com/mozilla/rust/pull/12328 and https://github.com/mozilla/rust/pull/12245
[01:50:22] *** Quits: bjz_ (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[01:51:12] <sfackler> nrc: done
[01:51:44] <nrc> thanks!
[01:51:50] *** Joins: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP)
[01:51:50] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/NNFN4Q
[01:51:50] <ghrust> 13rust/06auto 14c7b6006 15Eduard Bopp: Warn about unnecessary parentheses upon assignment...
[01:51:50] <ghrust> 13rust/06auto 149f2d6b2 15bors: auto merge of #12366 : aepsil0n/rust/feature/unnecessary_parens_around_assigned_values, r=alexcrichton...
[01:51:50] *** Parts: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP) ()
[01:52:42] <erickt> brson: one thing acrichto didn't get to in the meeting was my interest in being able to override a default method in a subtrait. For example `trait StreamHasher: Writer { fn write_le_f64(&mut self, f: f64) { if f == 0.0 || f == -0.0 { self.write_le_u64(0) } else { self.write_le_u64(transmute(f)) } }`
[01:53:18] <erickt> brson: is that something that would someday be possible? Or do you know if it'd do something bad to the type system?
[01:53:40] <erickt> brson: I couldn't find an issue that talked about this feature
[01:59:02] <brson> erickt: maybe it could cause weird issues with diamond inheritance? e.g. if some type implements both Writer and StreamHasher then who gets to implement write_le_f64
[01:59:21] <erickt> damn good point
[01:59:31] <brson> surely not unsolvable
[02:00:29] <erickt> or what if a method just wants a `Hash`, does it call `Hash.write_le_f64` or `StreamHash.write_le_f64`?
[02:01:18] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[02:01:35] <erickt> well so the whole reason why I'd want this is for the reason above. Hashes have special hook to treat 0.0 and -0.0 as hashing to the same value
[02:03:57] <erickt> I can only think of two ways of getting that functionality if we switch over to using `Writer`. One, we copy-paste a overwritten `fn write_le_f64()` into all hashers, or two, we just let 0.0 and -0.0 hash to two different hashes
[02:04:10] <Eridius> what's the motivating reason for using Writer?
[02:04:13] <Eridius> since Hash can't possibly return Err
[02:04:50] <brson> if floats don't implement TotalOrd they won't be usable in hash tables anyway. we could not support hashing floats at all
[02:07:01] <erickt> brson: that's fair
[02:07:34] <erickt> Eridius: My hash pr has a StreamState trait that is almost exactly `Writer`
[02:09:10] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Quit: leaving)
[02:11:48] *** Joins: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP)
[02:11:48] <ghrust> [13rust] 15bors 04force-pushed 06auto from 149f2d6b2 to 14ee8f45e: 02http://git.io/N3iJvQ
[02:11:48] *** Parts: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP) ()
[02:11:50] *** Joins: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP)
[02:11:50] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/GS4THg
[02:11:50] <ghrust> 13rust/06auto 14df1686d 15Nick Cameron: Make priavcy checking aware that a `use` directive can point to two defintions (namespaces) with different privacy. Closes #4110
[02:11:50] <ghrust> 13rust/06auto 14a25f447 15bors: auto merge of #12245 : nick29581/rust/priv2, r=alexcrichton...
[02:11:51] *** Parts: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP) ()
[02:24:48] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[02:25:38] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[02:26:52] <Eridius> what is this about? error: provided type arguments with defaults, #[deny(default_type_param_usage)] on by default
[02:27:00] <Eridius> I thought default type params only required the feature gate in order to define them
[02:33:13] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[02:53:40] *** Quits: mawuli (mawuli@moz-5ADAB167.com.gh) (Ping timeout)
[02:54:22] *** Joins: mawuli (mawuli@moz-5ADAB167.com.gh)
[02:56:25] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[02:58:17] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Ping timeout)
[03:02:21] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[03:04:19] *** Joins: new_one (new_one@B720B8AC.381E905C.B3C0173E.IP)
[03:04:44] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[03:13:41] <erickt> Eridius: there's a feature gate that prevents you from declaring them, and a lint to prevent you from implementing a trait that uses them
[03:14:22] <erickt> Eridius: I think there's a good argument to setting #[allow(default_type_param_usage)] by default
[03:16:32] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[03:19:03] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[03:19:03] *** ChanServ sets mode: +ao dherman dherman
[03:21:51] *** Joins: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP)
[03:21:51] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/GS4THg
[03:21:51] *** Parts: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP) ()
[03:26:51] *** Joins: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP)
[03:26:52] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/64erWQ
[03:26:52] *** Parts: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP) ()
[03:41:11] *** Quits: aatch (James@moz-B437F499.pocketrent.com) (Client exited)
[03:50:38] *** Quits: zz_kimundi (kimundi@moz-3A1FA64A.dip0.t-ipconnect.de) (Ping timeout)
[03:51:05] <bstrie> so what's this plan for "removing string types" that pcwalton mentions in the meeting notes?
[03:51:16] <cmr> bstrie: Str I imagine.
[03:51:27] <cmr> where struct Str(priv Vec<u8>)
[03:51:49] <cmr> I don't think there's been a concrete proposal...
[03:51:56] <bstrie> just as long as we still try to enforce utf8
[03:52:09] <bstrie> by default, anyway
[03:52:12] <cmr> should bully him into elaborating
[03:53:02] <bstrie> I'm just leery of doing the wrong thing and either A) fucking up like C did, B) fucking up like C++ did, or C) fucking up like python did
[03:53:11] <tjc> can't it be all three?
[03:53:20] <cmr> heh
[03:53:44] <bstrie> pursuing the trifecta: no strings, too many strings, terrible strings
[03:54:31] <bstrie> oh, I would be remiss if I didn't mention D) fucking up like java and javascript did
[03:54:39] *** Joins: zz_kimundi (kimundi@moz-73713BC5.dip0.t-ipconnect.de)
[03:54:41] *** zz_kimundi is now known as kimundi
[03:55:33] *** Joins: ktt3ja (ktt3ja@moz-85E2770C.hsd1.va.comcast.net)
[03:56:10] <tjc> in the meantime, I'm over here working with [Char], Bytestring, and Text in Haskell
[03:56:27] <bstrie> oh right, E) making your string a linked list
[03:57:00] <bstrie> I think that Go gets it right
[03:57:07] <bstrie> I mean, that's just what I hear
[03:57:09] <bstrie> haven't used it much
[03:57:14] <bstrie> but it's from the utf-8 folks
[03:57:20] <bstrie> so they get the benefit of the doubt
[03:57:37] <bstrie> but they also probably reimplemented all of unicode in Go to do it
[03:58:38] <strcat> Go definitely doesn't get strings right
[03:58:42] <strcat> they don't guarantee UTF-8 encoding
[03:58:46] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[03:58:48] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[03:59:01] <tjc> "Thompson's design was outlined on September 2, 1992, on a placemat in a New Jersey diner with Rob Pike."
[03:59:23] <tjc> Wikipedia articles always leave out the interesting details
[03:59:26] <tjc> like what they had for dinner
[03:59:27] <cmr> yeah I think utf8 was literally written on a napkin.
[04:00:11] *** Joins: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net)
[04:00:12] *** ChanServ sets mode: +ao pcwalton pcwalton
[04:00:37] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[04:01:04] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[04:03:05] *** Joins: lpy|afk (lpy@7360AA58.F09091A8.1348A864.IP)
[04:14:25] *** Quits: sunfish (chatzilla@moz-8DE7F965.dsl.dynamic.sonic.net) (Ping timeout)
[04:19:08] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[04:21:45] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[04:31:05] *** Quits: erickt (Adium@moz-BDF423C7.hfc.comcastbusiness.net) (Quit: Leaving.)
[04:34:39] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[04:39:12] *** Quits: mawuli (mawuli@moz-5ADAB167.com.gh) (Ping timeout)
[04:41:29] *** Joins: mawuli (mawuli@moz-5ADAB167.com.gh)
[04:41:50] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[04:41:51] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/_cIHZA
[04:41:51] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[04:45:01] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[04:46:50] *** Joins: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP)
[04:46:50] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/Yg9_cA
[04:46:50] <ghrust> 13rust/06auto 14f976918 15Patrick Walton: librustc: Remove unique vector patterns from the language....
[04:46:50] <ghrust> 13rust/06auto 145ff3344 15bors: auto merge of #12244 : pcwalton/rust/deuniquevectorpatterns, r=pcwalton...
[04:46:50] *** Parts: ghrust (ghrust@23EC81EC.6A2AE50.F3114085.IP) ()
[04:50:36] *** Joins: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net)
[04:50:40] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[04:57:28] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[04:59:14] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Ping timeout)
[05:04:00] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[05:04:01] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[05:04:29] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:04:38] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:09:28] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[05:09:28] *** ChanServ sets mode: +ao dherman dherman
[05:09:47] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[05:11:48] *** Joins: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP)
[05:11:48] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/wcL5cA
[05:11:48] <ghrust> 13rust/06auto 14616088a 15Nick Cameron: All uses of `extern fn` should mean `extern "C" fn`. Closes #9309.
[05:11:48] <ghrust> 13rust/06auto 143b555d2 15bors: auto merge of #12328 : nick29581/rust/abi, r=alexcrichton
[05:11:49] *** Parts: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP) ()
[05:13:19] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[05:13:19] *** ChanServ sets mode: +ao dherman dherman
[05:22:43] *** lpy|afk is now known as lpy
[05:33:29] *** Quits: canhtak (canhtak@moz-8C86DA1D.wl.t.ulaval.ca) (Ping timeout)
[05:51:50] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[05:51:50] <ghrust> [13rust] 15bors 04force-pushed 06auto from 143b555d2 to 14cae5999: 02http://git.io/N3iJvQ
[05:51:50] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[05:51:51] *** Joins: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP)
[05:51:51] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/8QT2fw
[05:51:51] <ghrust> 13rust/06auto 142c3a043 15Patrick Walton: librustc: Remove unique vector patterns from the language....
[05:51:51] <ghrust> 13rust/06auto 14764480d 15bors: auto merge of #12244 : pcwalton/rust/deuniquevectorpatterns, r=pcwalton...
[05:51:52] *** Parts: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP) ()
[06:16:43] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[06:16:51] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[06:16:51] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14764480d to 14cae5999: 02http://git.io/N3iJvQ
[06:16:51] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[06:16:52] *** Joins: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP)
[06:16:52] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/7fBX5A
[06:16:52] <ghrust> 13rust/06auto 140658913 15Steven Fackler: rustdoc: Only inject extern crates if not present
[06:16:52] <ghrust> 13rust/06auto 1474f3e04 15bors: auto merge of #12361 : sfackler/rust/rustdoc-test-extern, r=alexcrichton
[06:16:53] *** Parts: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP) ()
[06:17:30] *** Quits: pcwalton (pcwalton@moz-DA87EE4.hsd1.ca.comcast.net) (Quit: pcwalton)
[06:22:57] *** Joins: eddyb (eddy@moz-41DB10DA.residential.rdsnet.ro)
[06:24:47] <cmr> bstrie: want an exercise in frustration? Try encoding a value as JSON, using only http://static.rust-lang.org/doc/master/extra/json/index.html for reference :)
[06:24:56] <cmr> (any the docs it hyperlinks to, transitively)
[06:26:13] <eddyb> json::stringify pls
[06:26:18] <cmr> srsly.
[06:26:26] <eddyb> (and json::parse)
[06:26:31] *** Quits: ktt3ja (ktt3ja@moz-85E2770C.hsd1.va.comcast.net) (Quit: Leaving)
[06:26:40] <eddyb> browser compat!
[06:26:50] <cmr> lol
[06:31:38] <Luqman> cmr: json::Encoder::str_encode
[06:32:40] <eddyb> is that a thing?
[06:33:33] <eddyb> you must be kidding me, it's the second code example
[06:33:43] <eddyb> learn some highlighting, rustdoc!
[06:34:09] <eddyb> str_encode reminds me of ugly PHP APIs
[06:34:48] <cmr> Luqman: ohh fancy.
[06:41:12] *** Joins: edwardw (edwardw@655F78EA.BF27AFA4.B9C6B12A.IP)
[06:41:18] <edwardw> r? https://github.com/mozilla/rust/pull/12349
[06:43:29] <Diamond> why does windows need a stage3 for installs?
[06:45:35] <eddyb> stage3 is what we make snapshots of
[06:46:28] <eddyb> should be equivalent to stage2, most likely done for good measure
[06:46:41] <Diamond> ah
[06:46:43] <cmr> Do we consider it an anti-pattern to do println!("{}", var_of_type_str)
[06:46:52] <cmr> instead of just std::io::println
[06:46:57] <cmr> if not, why don't we?
[06:47:44] <Yurume> println!(single_expr_of_type_str)
[06:47:53] <Yurume> should we allow for this?
[06:47:59] <eddyb> that should do "{}"
[06:48:08] <Yurume> yes, ommittable "{}" I meant
[06:48:18] <cmr> I'd be ok with it.
[06:48:21] <eddyb> so it would work with more than just strings
[06:48:56] <Yurume> ah, right. single_expr_that_impls_Show to be exact.
[06:49:20] <Yurume> is it possible with the current macro system?
[06:49:32] <eddyb> it's not a rule-based macro
[06:49:33] <cmr> should be...
[06:49:37] <Yurume> ah right
[06:49:38] <Yurume> hmm
[06:49:45] <eddyb> format_args! handles this
[06:49:47] <Yurume> yeah, we can just toss them as token trees
[06:49:48] <cmr> if the first (and only) value isn't a string literal, use "{}"
[06:49:59] <eddyb> rusti: print!(foo)
[06:50:01] -rusti- <anon>:10:16: 10:19 error: format argument must be a string literal.
[06:50:01] -rusti- <anon>:10         print!(foo)
[06:50:01] -rusti-                          ^~~
[06:50:01] -rusti- error: aborting due to previous error
[06:50:01] -rusti- application terminated with error code 101
[06:50:06] <edwardw> should be doable
[06:50:23] <Yurume> cmr: no, if there is exactly one value, parse it as an expr and use "{}".
[06:50:41] <cmr> isn't that what I said?
[06:50:47] <Yurume> how about println!("{}"); then?
[06:51:06] <Yurume> hmm, it might be a matter of convention
[06:51:07] <cmr> Yurume: that works today, but you need to escape the {}
[06:52:50] <eddyb> so you don't break anything, replace the "not a string literal" error case when there's just one argument
[06:58:14] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[06:58:23] <sfackler> is the official terminology "syntax extension" or "macro"? or both?
[06:58:27] <cmr> eddyb: http://huonw.github.io/isrustfastyet/mem/ look at how stable the past few runs have been.
[06:58:29] * sfackler is writing slides
[06:58:45] <cmr> sfackler: The terminology *I* endorse is syntax extension for the general feature, macro for macro_rules
[06:59:26] <sfackler> sounds good
[06:59:28] <eddyb> "syntax extensions" = "macros" + "procedural macros", I guess
[06:59:45] <cmr> attributes are considered syntax extensions too.
[07:00:03] <eddyb> cmr: I wasn't sure whether those fit in "procedural macros"
[07:00:08] <eddyb> I've also heard "rule-based macro" for the macro_rules variety
[07:00:08] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Ping timeout)
[07:00:14] <cmr> certainly not, since they're not procedural macros :)
[07:00:23] <cmr> they do no inherent syntax transformation
[07:00:46] <eddyb> OMG
[07:00:48] <cmr> rule-based macros is what our macros are, in other macro-y lands.
[07:00:50] <eddyb> what happened with the graph?
[07:01:46] <eddyb> cmr: is it something in your benching process?
[07:01:53] <cmr> eddyb: I have changed nothing.
[07:02:00] <eddyb> great X_X
[07:02:01] <cmr> not strictly true.
[07:02:03] <cmr> I upgraded my kernel.
[07:02:16] <cmr> but is included in more than the most recent flat line.
[07:02:28] <eddyb> can you try one of the sets I've gave you in the past?
[07:02:42] <cmr> for what?
[07:02:55] <eddyb> to see whether they become flat as well
[07:03:01] <cmr> sure
[07:03:03] <cmr> which ones?
[07:04:21] <eddyb> let me check...
[07:04:37] <eddyb> cmr: http://huonw.github.io/isrustfastyet/mem/#77eedda,9dbbfb8,d150f6b
[07:09:15] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[07:13:45] <eddyb> why does this talk about glue_take? https://github.com/mozilla/rust/pull/12330
[07:14:07] <cmr> good question
[07:14:13] <cmr> the issue was originally for glue_take
[07:14:16] * eddyb prods nrc
[07:15:10] *** Quits: new_one (new_one@B720B8AC.381E905C.B3C0173E.IP) (Client exited)
[07:15:22] <cmr> I see a w
[07:15:28] <eddyb> mhmm
[07:15:28] <cmr> it was probably supposed to be a ^w
[07:15:44] <eddyb> cmr: I guess the actual mechanism here is the cleanup cancellation for moving out of lvalues
[07:16:02] <eddyb> which is zeroing out, for both of the tested cases
[07:16:46] <eddyb> glue_drop before glue_take is solely for @T
[07:17:20] <eddyb> what could happen here is copy x to x, zero x *oops*
[07:17:42] <eddyb> (if there is no intermediary rvalue)
[07:18:15] <cmr> eddyb: benches re-running now.
[07:18:19] <eddyb> gaah github.... why are you showing me absolute times?
[07:18:21] <cmr> bother huon to update the graphs later.
[07:19:02] <eddyb> if they don't have close to identical memory behaviors, then there's no point
[07:26:51] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[07:26:51] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/7fBX5A
[07:26:51] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[07:30:58] <cmr> r? https://github.com/mozilla/rust/pull/12387
[07:31:22] <cmr> edwardw: ^ would have made it much easier to pick apart matches :)
[07:31:56] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[07:31:57] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/OIxb7w
[07:31:57] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[07:32:23] <edwardw> cmr: cool!
[07:46:15] <acrichto> bjz: oh yay! I will take a look probably tomorrow morning
[07:50:24] <cmr> You know what's annoying? That line comments in the "files" view of a PR don't end up on the line in the commit that most recently changed that line.
[07:51:07] <cmr> you end up with two separate views of a PR, each with their own set of comments...
[07:53:10] <cmr> hm, can macros look at the AST they are contained in?
[07:53:14] <cmr> well, synexts.
[07:53:33] <eddyb> don't think so
[07:53:48] <cmr> for example, impl Foo { cons! { ... } } would be able to see that it's an impl for Foo and say `pub fn new() -> Foo { ... }`
[07:55:01] <cmr> or more likely new! { ... } :P
[07:56:05] <eddyb> cmr: I want Self for that
[07:56:12] <edwardw> cmr: probably not, https://github.com/mozilla/rust/issues/11692 seems to be related to your question
[07:56:28] <cmr> eddyb: that'd do too.
[07:56:49] <cmr> edwardw: you're all over the place! <3
[07:56:58] <edwardw> LOL
[07:57:15] <edwardw> well, they are all macro related ;)
[07:57:29] <cmr> eddyb: I remember having reservations about it in the past, but I can't remember what they were anymore.
[07:57:52] <cmr> eddyb: what really grinds my gears is that I am writing TokenizerState three times in a row to write the constructors.
[07:57:55] <cmr> *constructor
[07:58:04] <cmr> And I cannot type that word for the life of me.
[08:01:33] *** Quits: edwardw (edwardw@655F78EA.BF27AFA4.B9C6B12A.IP) (Quit: Leaving...)
[08:02:22] *** Joins: Zr40 (zr40@moz-CCFEAB92.adsl.xs4all.nl)
[08:05:27] <eddyb> cmr: reservations about what?
[08:05:46] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[08:06:17] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[08:06:20] <eddyb> I know I wanted Self in impls when I had to gave the self argument a type
[08:07:14] <eddyb> TyInfer means it still has to be special-cased in typeck::astconv and... meh
[08:07:23] <cmr> eddyb: about Self in non-trait declaration contexts.
[08:08:52] <eddyb> do we want to wait another week, for a meeting?
[08:09:03] <cmr> just send an email to the list
[08:09:05] <eddyb> cmr: is there any associated issue?
[08:09:07] <cmr> acrichto: updated https://github.com/mozilla/rust/pull/12387
[08:09:49] <cmr> eddyb: not finding one.
[08:09:50] <eddyb> "Show outdated diff" is just broken >_>
[08:10:25] <cmr> works for me...
[08:10:43] <eddyb> must be my broken chrome version
[08:11:47] <eddyb> on reddit and gist.github.com (and a few other sites), the viewport is smaller and the cursor is offset
[08:12:39] <eddyb> the previous one was an aura build, and on the same sites it was zoomed in (at 100%), but at least I could zoom out and it looked normal around 75%
[08:16:51] *** Joins: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP)
[08:16:51] <ghrust> [13rust] 15bors 04force-pushed 06auto from 148529f35 to 1474f3e04: 02http://git.io/N3iJvQ
[08:16:51] *** Parts: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP) ()
[08:17:32] <eddyb> cmr: do you know whether I can enable relative times on github?
[08:18:22] <eddyb> I really don't like checking the date every time I look at a timestamp to actually understand it
[08:18:25] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[08:20:16] <eddyb> ah, that's what that checkbox does, advertizes positions from https://jobs.github.com/
[08:23:21] *** Joins: huon (Thunderbir@moz-826BD85A.lns20.syd6.internode.on.net)
[08:24:24] <huon> question: how can I tell a function call is an FFI function if I have the NodeId/DefId? (if anyone knows off the top of their head)
[08:24:27] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[08:24:45] <eddyb> huon: the DefId of the function?
[08:25:15] <eddyb> or of the call expression?
[08:25:44] <eddyb> a FFI function will be a NodeForeignItem, while a regular function will be NodeItem/NodeTraitMethod/NodeMethod
[08:27:04] <eddyb> cmr: I can't do anything on github, dammit
[08:27:17] <eddyb> all the buttons are broken
[08:27:35] <eddyb> https://github.com/mozilla/rust/pull/12382#discussion_r9856786
[08:27:46] * eddyb sees CPS and lets out an evil grin >:)
[08:28:39] <huon> eddyb: ah, of course, thanks.
[08:28:52] * huon should've thought of that himself
[08:29:46] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[08:30:35] <eddyb> Yurume: lol https://github.com/mozilla/rust/pull/12384
[08:30:41] <Luqman> eddyb: continuation passing style? :P
[08:31:02] <eddyb> Luqman: my std::fmt redesign abuses it
[08:31:32] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Ping timeout)
[08:31:33] <eddyb> to allow for non-writer formatters
[08:31:40] <Yurume> eddyb: XD
[08:37:05] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 30.0a1/20140216030203])
[08:43:14] *** Joins: doener (doener@moz-C68F600D.unity-media.net)
[08:49:59] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[08:56:52] *** Joins: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP)
[08:56:52] <ghrust> [13rust] 15bors 04force-pushed 06auto from 1421f354a to 1474f3e04: 02http://git.io/N3iJvQ
[08:56:52] *** Parts: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP) ()
[09:12:18] *** Joins: eibwen (kvirc@moz-4A816755.dip0.t-ipconnect.de)
[09:13:30] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Ping timeout)
[09:16:36] *** flaper87|afk is now known as flaper87
[09:17:33] *** Joins: lpy (lpy@9A6870A6.F09091A8.1348A864.IP)
[09:22:30] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[09:27:00] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[09:27:30] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[09:28:48] *** Joins: rca (rcatolino@moz-D6F89A8C.adsl.proxad.net)
[09:31:13] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[09:36:20] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[09:47:12] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Quit: Lost terminal)
[09:50:09] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[09:50:18] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[09:50:23] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[09:54:07] *** Joins: sunfish (chatzilla@moz-8DE7F965.dsl.dynamic.sonic.net)
[10:02:14] *** Quits: Zr40 (zr40@moz-CCFEAB92.adsl.xs4all.nl) (Ping timeout)
[10:03:46] *** Joins: Zr40 (zr40@moz-CCFEAB92.adsl.xs4all.nl)
[10:06:55] *** Joins: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP)
[10:06:55] <ghrust> [13rust] 15bors merged 06auto into 06master: 02https://github.com/mozilla/rust/compare/74f3e0474b38...9f68f793d444
[10:06:55] *** Parts: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP) ()
[10:11:53] *** Joins: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP)
[10:11:53] <ghrust> [13rust] 15bors pushed 7 new commits to 06auto: 02http://git.io/tzpxXw
[10:11:53] <ghrust> 13rust/06auto 14f0cb0eb 15Alex Crichton: rustdoc: Fixup links to enum variants...
[10:11:53] <ghrust> 13rust/06auto 14867988c 15Alex Crichton: rustdoc: Show macros in documentation...
[10:11:54] <ghrust> 13rust/06auto 146db37bb 15Alex Crichton: rustdoc: Highlight methods jumped to...
[10:11:56] *** Parts: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP) ()
[10:12:06] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[10:15:26] *** Joins: canhtak (canhtak@moz-3C5DEB35.wl.t.ulaval.ca)
[10:17:35] *** Quits: canhtak (canhtak@moz-3C5DEB35.wl.t.ulaval.ca) (Ping timeout)
[10:32:57] *** Joins: aurynj (Eon@583ABBE5.60FA2E28.B9E25744.IP)
[10:36:44] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[10:36:57] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[10:38:38] *** flaper87 is now known as flaper87|afk
[10:42:28] *** flaper87|afk is now known as flaper87
[10:44:28] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[10:44:32] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[10:50:17] *** flaper87 is now known as flaper87|afk
[10:50:34] *** flaper87|afk is now known as flaper87
[10:51:27] <eddyb> huon: I wonder whether cmr's reruns of these commits finished http://huonw.github.io/isrustfastyet/mem/#77eedda,9dbbfb8,d150f6b
[10:51:40] <eddyb> huon: can you check whether the data changed? or just refresh the graph
[10:55:29] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Input/output error)
[10:55:59] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[10:56:23] *** Quits: lpy (lpy@9A6870A6.F09091A8.1348A864.IP) (Client exited)
[10:56:54] *** Joins: lpy (lpy@7360AA58.F09091A8.1348A864.IP)
[10:57:41] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Ping timeout)
[11:17:26] <huon> eddyb: when did he rerun them?
[11:17:34] <eddyb> a few hours ago
[11:17:56] <huon> oh, it doesn't update automatically
[11:18:25] <huon> and currently I'm concentrating on something so you'll have to wait a little while for me to do it manually :)
[11:19:11] <eddyb> np
[11:20:50] *** Quits: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net) (Quit: Sharp)
[11:21:49] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[11:21:50] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/tzpxXw
[11:21:50] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[11:25:29] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.3)
[11:26:48] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[11:26:49] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/bfwDPw
[11:26:49] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[11:29:50] *** Joins: aepsil0n (eduard@moz-15CB80F2.hsi8.kabel-badenwuerttemberg.de)
[11:31:42] *** Quits: rca (rcatolino@moz-D6F89A8C.adsl.proxad.net) (Ping timeout)
[11:34:15] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[11:37:26] <huon> eddyb: are those the only ones?
[11:37:33] <eddyb> yupp
[11:37:51] <huon> why them?
[11:38:01] <huon> (out of interest)
[11:38:03] <eddyb> because they don't touch the compiler at all
[11:38:17] <eddyb> they should be identical
[11:39:15] <huon> ah, I see
[11:39:21] <eddyb> huon: if you've missed the discussion, cmr upgraded his kernel and there's a flat line on irsy, we're hoping to reproduce the same effect on older jitter
[11:39:31] <huon> I did miss it
[11:39:36] <huon> ok, cool
[11:39:45] <huon> I'm regenerating it now
[11:39:51] <huon> i'll ping you when I upload it
[11:40:00] <eddyb> doesn't seem to be an obvious rust change that could've caused that flat line
[11:40:03] <eddyb> huon: thanks :)
[11:45:59] *** Joins: rca (rcatolino@moz-D6F89A8C.adsl.proxad.net)
[11:54:44] <flaper87> acrichto: damn, so frustrating that I still miss some obvious things, I'll add what's missing today
[12:09:40] *** Joins: rca_ (rcatolino@moz-59EB1693.adsl.proxad.net)
[12:10:16] *** Quits: rca (rcatolino@moz-D6F89A8C.adsl.proxad.net) (Ping timeout)
[12:13:25] *** Quits: dcrewi (david@moz-AB8667CE.gyrae.net) (Ping timeout)
[12:13:27] *** Joins: vfetwnuncszu (david@moz-AB8667CE.gyrae.net)
[12:13:42] *** vfetwnuncszu is now known as dcrewi
[12:14:44] <huon> bjz: btw, I really like your new formatting code, especially with the new Radix design
[12:22:10] <eddyb> huon: it looks better
[12:22:33] <huon> eddyb: yup
[12:22:48] <huon> eddyb: 3 things is a very small sample size though
[12:23:09] <eddyb> huon: there's 12 PRs forming a flatline, around those 3
[12:23:39] <eddyb> it looks like an island of stability now
[12:23:47] <huon> eddyb: yes, but only 3 were re-benched
[12:24:00] <eddyb> which is interesting...
[12:24:02] <huon> so it might've just happened that there was no jitter for all 3
[12:24:15] <huon> since there was no jitter for 9 of the surrounding ones previously
[12:24:20] <eddyb> why are you spoiling my happiness?
[12:24:30] * huon rains on the parade
[12:24:41] <huon> eddyb: it does look like it's fixed, though
[12:24:43] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[12:25:09] <huon> I've made updating the graphs much btw, so if you can get cmr to rebench some more I can just pump that through
[12:25:19] <eddyb> much what?
[12:25:38] <eddyb> cmr: whenever you have time for it, feel free to rebench a few larger sets to confirm :D
[12:27:07] <huon> much better
[12:27:20] * huon can't finish senten
[12:27:55] <huon> (or "much easier")
[12:28:28] <eddyb> such sntsc
[12:28:30] <eddyb> wow
[12:29:28] <huon> many typing
[12:29:31] <huon> so difficulty
[12:31:10] *** Joins: edwardw (Mibbit@D286B842.1B2F6624.7F41E82D.IP)
[12:36:03] <aepsil0n> where are tests for non-std libraries (e.g. libnum) supposed to go?
[12:36:19] <aepsil0n> simply src/test/?
[12:36:54] <huon> aepsil0n: inside libnum
[12:36:55] *** Joins: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP)
[12:36:55] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/SG5BOg
[12:36:55] *** Parts: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP) ()
[12:37:10] <huon> there's normally a pile of #[test] directives at the bottom of each file
[12:37:52] <aepsil0n> ah... found it
[12:38:07] <aepsil0n> expected that in a different file
[12:39:05] <aepsil0n> i think putting it in the same file could have caused #12383
[12:39:47] <huon> yes, hard to detect privacy failures like that
[12:40:14] <huon> (well, normally the dead_code lint tells you (<3 dead_code), but it can't do it for traits, due to various limitations... :( )
[12:41:47] *** Joins: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP)
[12:41:47] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/xEZwJA
[12:41:47] <ghrust> 13rust/06auto 140bdfd0f 15Douglas Young: Avoid returning original macro if expansion fails....
[12:41:47] <ghrust> 13rust/06auto 1499f8380 15bors: auto merge of #12370 : rcxdude/rust/macro_fix, r=alexcrichton...
[12:41:47] *** Parts: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP) ()
[12:41:49] *** Joins: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP)
[12:41:49] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/4u3FiA
[12:41:49] *** Parts: ghrust (ghrust@94BD74B8.6A2AE50.F3114085.IP) ()
[12:42:07] <aepsil0n> gonna take it apart
[12:43:51] <huon> aepsil0n: don't
[12:43:58] <huon> (if you mean move tests out of their files)
[12:44:07] <aepsil0n> yes i meant that
[12:44:14] <aepsil0n> y not?
[12:44:41] <aepsil0n> too radical change?
[12:44:48] <huon> the private trait thing is an edge case, and nowhere else uses out-of-file tests
[12:45:17] <huon> so unless we have a huge number of these priv traits, I think we should just fixed them case-by-case, rather than departing from the current convention
[12:45:27] <huon> (convention for tests)
[12:45:42] <aepsil0n> ok
[12:45:52] <aepsil0n> still the convention is a little awkward
[12:46:03] <aepsil0n> that file in particular has grown above 2000 lines of code
[12:46:32] <aepsil0n> besides the privacy issue
[12:46:56] <huon> yeah, there's a few like that
[12:47:08] <huon> it is annoying
[12:49:01] <aepsil0n> well, i'll leave it at that and open an issue to discuss the matter instead
[12:49:31] <huon> sounds good
[12:53:53] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[13:05:36] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[13:09:17] *** kimundi is now known as zz_kimundi
[13:17:21] *** Joins: doomlord_ (servitor@moz-9B2006BF.range109-151.btcentralplus.com)
[13:17:51] *** Parts: edwardw (Mibbit@D286B842.1B2F6624.7F41E82D.IP) ()
[13:21:54] *** Joins: canhtak (canhtak@moz-8C86DA1D.wl.t.ulaval.ca)
[13:53:41] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Quit: Leaving...)
[13:56:44] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[13:56:44] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/xEZwJA
[13:56:44] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[14:01:47] *** Joins: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP)
[14:01:48] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/twvmyw
[14:01:48] *** Parts: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP) ()
[14:12:29] *** Quits: canhtak (canhtak@moz-8C86DA1D.wl.t.ulaval.ca) (Quit: canhtak)
[14:28:39] *** Quits: sunfish (chatzilla@moz-8DE7F965.dsl.dynamic.sonic.net) (Ping timeout)
[14:30:09] *** Joins: canhtak (canhtak@moz-8C86DA1D.wl.t.ulaval.ca)
[14:34:03] <huon> r? https://github.com/mozilla/rust/pull/12394
[14:35:41] <eddyb> huon: do you need the " as *c_char" cast?
[14:35:50] *** Joins: lpy (lpy@12172131.F09091A8.1348A864.IP)
[14:36:41] <huon> eddyb: I think so
[14:37:22] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[14:37:22] <pnkfelix> huon: r+
[14:37:25] <huon> thanks
[14:37:43] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[14:37:55] <huon> eddyb: (I just tried removing it, and yes, the cast is needed)
[14:38:15] <eddyb> weird, I'm guessing *c_char is different from *u8
[14:38:16] <flaper87> pnkfelix: so fast
[14:38:18] <flaper87> :D
[14:39:09] <huon> eddyb: I don't think coercions via the return value of a function work at all
[14:39:23] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[14:39:29] <eddyb> doesn't as_ptr() produce *T?
[14:39:45] <huon> for vectors and strings
[14:40:12] <eddyb> huon: aaah, I see your confusion
[14:40:19] <eddyb> not that case, the one in trans/common
[14:41:09] <huon> oh
[14:41:14] <huon> ooohhhh
[14:41:24] <huon> yes, c_char is i8
[14:41:48] <huon> fun fact: librustc has almost precisely 300 `unsafe` blocks that do FFI
[14:42:16] <huon> about about 20 that do non-FFI unsafe things (not disjoint sets)
[14:42:24] * huon -> bed
[14:42:42] *** Quits: dcrewi (david@moz-AB8667CE.gyrae.net) (Ping timeout)
[14:43:25] *** Joins: vfetwnuncszu (david@moz-AB8667CE.gyrae.net)
[14:43:32] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: rcirc on GNU Emacs 24.3.1)
[14:43:41] *** vfetwnuncszu is now known as dcrewi
[14:45:50] *** Quits: bytbox (s@moz-AA99B23F.washdc.fios.verizon.net) (Input/output error)
[14:55:47] *** Quits: canhtak (canhtak@moz-8C86DA1D.wl.t.ulaval.ca) (Quit: canhtak)
[15:08:56] *** Joins: edwardw (edwardw@24D7341C.32602B75.B9C6B12A.IP)
[15:11:47] *** Joins: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP)
[15:11:47] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/gPAoeA
[15:11:47] *** Parts: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP) ()
[15:16:52] *** Joins: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP)
[15:16:52] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/WMWoZg
[15:16:52] *** Parts: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP) ()
[15:16:53] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[15:16:53] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/3JBKBg
[15:16:53] <ghrust> 13rust/06auto 145611463 15Dylan Braithwaite: Clarify unit of size in docs for size_of functions....
[15:16:53] <ghrust> 13rust/06auto 1498b0775 15bors: auto merge of #12374 : dylanbraithwaite/rust/size_of_unit_clarification, r=cmr...
[15:16:54] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[15:24:47] *** Joins: canhtak (canhtak@moz-8C86DA1D.wl.t.ulaval.ca)
[15:30:58] *** Joins: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net)
[15:35:30] *** Quits: Kxepal (Miranda@moz-E72C39CC.pppoe.mtu-net.ru) (Ping timeout)
[15:39:13] *** Joins: Kxepal (Miranda@moz-ECC1F51A.pppoe.mtu-net.ru)
[15:48:45] *** Quits: canhtak (canhtak@moz-8C86DA1D.wl.t.ulaval.ca) (Quit: canhtak)
[15:50:25] *** Joins: doomlord__ (servitor@moz-9B2006BF.range109-151.btcentralplus.com)
[15:50:43] *** Joins: canhtak (canhtak@moz-8C86DA1D.wl.t.ulaval.ca)
[15:51:35] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[15:51:42] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[15:56:46] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Quit: Lost terminal)
[15:58:38] *** Quits: mawuli (mawuli@moz-5ADAB167.com.gh) (Ping timeout)
[15:58:39] *** Quits: canhtak (canhtak@moz-8C86DA1D.wl.t.ulaval.ca) (Quit: canhtak)
[16:00:40] *** Joins: mawuli (mawuli@moz-5ADAB167.com.gh)
[16:15:37] *** Joins: canhtak (canhtak@moz-8C86DA1D.wl.t.ulaval.ca)
[16:18:49] *** Quits: canhtak (canhtak@moz-8C86DA1D.wl.t.ulaval.ca) (Quit: canhtak)
[16:21:23] *** Quits: Kxepal (Miranda@moz-ECC1F51A.pppoe.mtu-net.ru) (Quit: Kxepal)
[16:21:40] *** Joins: Kxepal (Miranda@moz-ECC1F51A.pppoe.mtu-net.ru)
[16:26:52] *** Joins: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP)
[16:26:52] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/3JBKBg
[16:26:52] *** Parts: ghrust (ghrust@B750D19A.6A2AE50.F3114085.IP) ()
[16:31:53] *** Joins: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP)
[16:31:53] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/tMFlXQ
[16:31:53] *** Parts: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP) ()
[16:31:53] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[16:31:53] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/8RfYPA
[16:31:53] <ghrust> 13rust/06auto 14eca25cb 15Eduard Bopp: Warn about unnecessary parentheses upon assignment...
[16:31:53] <ghrust> 13rust/06auto 140b83995 15bors: auto merge of #12366 : aepsil0n/rust/feature/unnecessary_parens_around_assigned_values, r=alexcrichton...
[16:31:54] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[16:38:11] *** Quits: dcrewi (david@moz-AB8667CE.gyrae.net) (Ping timeout)
[16:38:20] *** Joins: canhtak (canhtak@moz-8C86DA1D.wl.t.ulaval.ca)
[16:39:35] *** Joins: vfetwnuncszu (david@moz-AB8667CE.gyrae.net)
[16:39:50] *** vfetwnuncszu is now known as dcrewi
[16:41:58] <bjz> acrichto: r? https://github.com/mozilla/rust/pull/12382
[16:51:03] <eddyb> so I start working again after being struck down by cold for a few days
[16:51:25] <eddyb> and I have to wait for LLVM to compile >_>
[16:52:44] <eddyb> I guess -j2 is enough to intertwine the LLVM build and all the rust libraries
[16:55:46] *** Quits: lpy (lpy@12172131.F09091A8.1348A864.IP) (Client exited)
[17:01:54] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[17:01:54] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/EaR1Kw
[17:01:54] <ghrust> 13rust/06auto 1465b3036 15Flavio Percoco: Regression test closes #7660
[17:01:54] <ghrust> 13rust/06auto 14af4b5b4 15bors: auto merge of #12375 : FlaPer87/rust/issue-7660, r=cmr
[17:01:54] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[17:08:43] *** Joins: sunfish (chatzilla@moz-C06D9702.mtv1.mozilla.com)
[17:10:02] *** Quits: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net) (Quit: I'm sure it's perfectly safe)
[17:16:27] *** Quits: canhtak (canhtak@moz-8C86DA1D.wl.t.ulaval.ca) (Quit: canhtak)
[17:17:54] *** Quits: edwardw (edwardw@24D7341C.32602B75.B9C6B12A.IP) (Quit: Leaving...)
[17:20:25] <cmr> huon: eddyb: are things taken care of?
[17:21:18] <eddyb> cmr: did you see my comment about doing a larger batch?
[17:21:55] <cmr> yes, but I don't quite understand the context.
[17:22:02] <cmr> were the results pleasing?
[17:22:22] <eddyb> they're in normal limits of CPU jitter, but almost identical memory behavior
[17:22:26] <cmr> ohhhh yes they were.
[17:22:30] <cmr> exciitng.
[17:22:43] <cmr> we really need to figure out where that 4MB is coming from though
[17:22:43] <eddyb> see the 12 point long flat line around them
[17:22:44] *** zz_kimundi is now known as kimundi
[17:22:47] <cmr> we really shouldn't have jitter.
[17:23:07] <eddyb> I don't think we'll ever be able to remove the CPU jitter
[17:23:10] <cmr> it's probably hashmap issues.
[17:23:12] <cmr> CPU yeah.
[17:23:26] <cmr> nothing to do about that really.
[17:23:29] <eddyb> but I don't really care as long as the graph makes sense memory wise
[17:24:08] <cmr> right
[17:24:12] <cmr> it is a memory graph after all.
[17:24:47] <cmr> I bet the hashmap residency changes are going to be a win for us.
[17:27:18] *** Quits: rca_ (rcatolino@moz-59EB1693.adsl.proxad.net) (Quit: leaving)
[17:28:43] <acrichto> bjz: I think I'll just hope that I tested everything as part of the changes to pad_integral
[17:28:53] <acrichto> bjz: that method is pretty gnarly
[17:29:31] *** Quits: aepsil0n (eduard@moz-15CB80F2.hsi8.kabel-badenwuerttemberg.de) (Ping timeout)
[17:30:03] <bjz> acrichto: so you think it could still be improved?
[17:30:16] <acrichto> bjz: nah, it's just one of those things that's inherently complicated
[17:30:24] <acrichto> if I squinted really hard I'm sure I could understand it
[17:30:35] <bjz> I tried to make it clearer
[17:30:53] <acrichto> oh I should actually read it then
[17:31:15] <bjz> oh, you didn't look?
[17:31:39] *** Joins: canhtak (canhtak@moz-8C86DA1D.wl.t.ulaval.ca)
[17:32:00] <acrichto> I may have... glossed over that section :)
[17:32:22] <bjz> https://github.com/bjz/rust/blob/fmt-int/src/libstd/fmt/mod.rs#L901-L950
[17:33:10] *** Joins: bytbox (s@moz-AA99B23F.washdc.fios.verizon.net)
[17:33:30] <acrichto> "If we're under the maximum width"
[17:33:30] <acrichto> hm there seems to be no checks against a maximum width
[17:33:45] <acrichto> seems copy/pasted from strings/
[17:33:46] <acrichto> ?
[17:34:24] <bjz> the original implementation treated it as a minimum width
[17:34:41] <bjz> I kept that comment in tact
[17:34:52] <bjz> ohh
[17:34:56] <acrichto> yeah
[17:35:02] <acrichto> there were no comments in the previous impl
[17:35:04] <acrichto> sorry about that :(
[17:35:40] <acrichto> man these are the most messed up formatting rules
[17:35:43] <acrichto> but I guess they make sense
[17:35:45] <bjz> did the original impl have a maximum width?
[17:35:47] <acrichto> FlagSignAwareZeroPad
[17:35:51] <acrichto> that's crazy
[17:35:53] <bjz> heh
[17:36:04] <bjz> yeah
[17:36:04] <acrichto> nah only strings have a maximum width
[17:36:07] <acrichto> if I remember, you have {width}.{precision}
[17:36:17] <bjz> I was surprised at some of those names
[17:36:19] <bjz> :D
[17:36:23] <acrichto> and {precision} for strings is max-width whereas it's something else for integers
[17:36:25] <acrichto> or something like that
[17:36:32] *** Joins: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP)
[17:36:35] <acrichto> I lifted most of this from python
[17:36:53] <acrichto> bjz: this looks good, nice cleanup!
[17:36:59] <bjz> cool
[17:37:00] <bjz> :)
[17:37:20] <bjz> I didn't expect to get such good performance improvements
[17:37:32] <bjz> I was thinking maybe 20%
[17:37:59] <acrichto> what'd it end up being?
[17:38:11] <eddyb> bjz: LLVM is biased towards nice code :D
[17:38:21] <bjz> acrichto: 60-80%
[17:38:39] <acrichto> bjz: whoa!
[17:38:41] <acrichto> nice!
[17:39:04] <eddyb> you treat the dragon well, and it will fly you with great speed ;)
[17:39:12] <bjz> look at the benchmarks in the comment
[17:39:24] <bjz> I updated them
[17:39:33] <bjz> I will fix that comment
[17:39:35] <acrichto> wow!
[17:39:41] <acrichto> that's crazy
[17:39:53] <acrichto> I always suspected our number formatting code as a little... inefficient
[17:40:01] <cmr> what changed?
[17:40:51] <acrichto> still need to read that part hehe
[17:41:20] <bjz> acrichto: I think we'll be able to get some good gains in the floating point
[17:41:37] <acrichto> that'd be awesome
[17:41:51] <bjz> acrichto: if we use the Dragon and Grisu algorithms
[17:42:08] <acrichto> a dragon algorithm sounds intendse
[17:42:12] <bjz> there's basically a couple of seminal papers on it
[17:42:21] <bjz> one by Guy Steele
[17:42:25] <acrichto> format!("{:>+3d}", 1)
[17:42:26] <bjz> <3
[17:42:26] <acrichto> hahaha
[17:42:56] <eddyb> what does that produce?
[17:43:12] <eddyb> +>>1?
[17:43:13] <cmr>  +1
[17:43:15] <cmr> I think
[17:43:38] * cmr does not remember the formatting micro-language
[17:43:47] <eddyb> but then what do > and 3 do?
[17:43:53] <acrichto> " +1" yeah
[17:43:57] <acrichto> > == right align
[17:43:57] *** Joins: dherman (dherman@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[17:43:57] *** ChanServ sets mode: +ao dherman dherman
[17:44:01] <acrichto> + == always emit a sign
[17:44:03] <acrichto> 3 == with
[17:44:06] <acrichto> d == decimal formatting
[17:44:41] <bjz> I do like the language, I just think we could improve the tutorial a little. maybe have a standalone one
[17:44:59] <eddyb> ohh, right, 3 is always the width, for some reason I thought you had to do something like 03 to pad
[17:45:01] <bjz> but yeah - docs - what fun :D
[17:45:25] <bjz> acrichto
[17:45:41] <bjz> acrichto: so if a type is Pod, it also is Clone?
[17:45:47] <acrichto> rusti: format!("{:03}", 4)
[17:45:48] <bjz> DeepClone?
[17:45:49] -rusti- ~"004"
[17:45:52] <cmr> bjz: no.
[17:45:58] <cmr> it's 
[17:46:06] <acrichto> bjz: no but if it's pod you don't need clone, it's essentially memcpy-able
[17:46:07] <cmr> just "implicitly copyable" to use the old term
[17:46:08] <bjz> https://github.com/mozilla/rust/pull/12382#discussion_r9874369
[17:46:21] <bjz> acrichto: I'm thinking for generic code
[17:46:34] <bjz> ohh
[17:46:42] <bjz> hmm
[17:47:24] *** Joins: aepsil0n (eduard@moz-D52819E1.mullvad.net)
[17:48:04] <bjz> acrichto: btw, I had that commit in there because it made it easier to work generically
[17:48:16] <bjz> with the integer formatting
[17:48:22] <acrichto> it seems a little odd for Int to be such a grab-bag of traits?
[17:48:55] <bjz> hm
[17:49:39] *** Quits: dherman (dherman@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: dherman)
[17:50:25] <bjz> acrichto: Int was meant to be a common specification between i8-64, int, u8-64, uint
[17:50:33] <acrichto> yeah
[17:50:40] <acrichto> I suppose it's not too bad then
[17:50:48] <acrichto> it is kinda nice to be able to format!() a generic int
[17:50:49] <bjz> acrichto: it might be a little excessive
[17:51:01] <bjz> might be worth revisiting though
[17:51:39] <bjz> but yeah, the numeric traits are still being looked at, so that can come later I think
[17:53:02] <acrichto> certailny
[17:53:20] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[17:56:25] <acrichto> bjz: did someone already mention lifting is_positive out of the loop?
[17:56:25] <acrichto> or rather the 'if is_positive' check
[17:56:25] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[17:56:25] <bjz> yeah
[17:56:25] <bjz> no performance change
[17:56:25] <bjz> interestingly
[17:56:34] <acrichto> go llvm!
[17:56:38] <acrichto> I think
[17:56:45] <acrichto> zomg fmt_int is so readable
[17:56:46] <bjz> I think
[17:56:52] <bjz> heh :D
[17:57:02] <bjz> I spent a long time on that
[17:57:10] <acrichto> lol
[17:57:10] <eddyb> CS 103 level of readability?
[17:57:32] <acrichto> this is pretty beautiful
[17:57:56] <bjz> ^_^
[17:57:58] <bjz> ty!
[17:58:37] <acrichto> bjz: hm, so I assume that the tests pass, but how does this work for negative things?
[17:58:45] <acrichto> oh lol
[17:58:46] <acrichto> nvmd
[17:59:25] <bjz> fine. we take into account two's complement too
[17:59:38] <bjz> which gave me pain at first
[18:00:23] <eddyb> if only we had associated items... we could make that buffer 2 characters for u8 => Hex
[18:01:19] <bjz> eddyb: I too wish for associated items. would make so many things nicer :(
[18:02:32] <eddyb> and according to kimundi, we could abuse them for almost complete generics-over-static-values
[18:03:33] <bjz> yeah
[18:03:37] <bjz> :P
[18:03:55] <acrichto> bjz: https://github.com/mozilla/rust/pull/12382#issuecomment-35528457
[18:04:12] *** Quits: sunfish (chatzilla@moz-C06D9702.mtv1.mozilla.com) (Ping timeout)
[18:08:01] <bjz> acrichto: will we have a num::parse module in the future?
[18:08:02] *** Quits: zw01 (zev@3C32E5CD.21A2D65F.BCF77D2A.IP) (Ping timeout)
[18:08:28] <acrichto> that's a good question
[18:09:22] <bjz> at the moment we have FromStrRadix
[18:09:35] <bjz> but I'm not really a fan of that API
[18:09:55] <acrichto> could we hide these implementation details completely?
[18:10:03] <bjz> yeah
[18:10:09] <acrichto> I suppose the one thing we need to expose is formatting with an arbitrary radix 
[18:10:10] <bjz> I like the idea of hiding the trait
[18:10:18] <bjz> yeah, but we have that
[18:10:19] <acrichto> pub mod fmt { mod num; }
[18:10:43] <acrichto> we could in theory add another formatting flag
[18:10:48] <acrichto> for an arbitrary base
[18:10:50] <acrichto> but that may get difficult
[18:11:01] <bjz> yeah, I was wondering about that
[18:11:04] *** Joins: zw01 (zev@3C32E5CD.21A2D65F.BCF77D2A.IP)
[18:11:29] <acrichto> the formatting sub-language is quite complicated as-is though
[18:11:49] <eddyb> DSL everything!
[18:11:55] <bjz> GenericRadix::new(36).format_int(55)
[18:12:00] <bjz> :P
[18:12:18] <eddyb> bjz: why is GenericRadix not a tuple struct?
[18:12:19] <acrichto> how about one or two top-level functions which don't special-case the radix?
[18:12:30] <acrichto> the implementation can special-case the radix
[18:12:32] <bjz> eddyb: it needs to validate it
[18:12:36] <eddyb> ahh
[18:12:57] <bjz> eddyb: 2 <= base <= 36
[18:13:13] <bjz> rust has no range types :)
[18:13:40] <eddyb> what's "cast"?
[18:13:55] <bjz> eddyb: std::num::cast
[18:14:01] <bjz> an ugly thing
[18:14:33] <bjz> acrichto: could you be more explicit
[18:14:46] <acrichto> indeed, I should be!
[18:14:46] <bjz> acrichto: what signatures would you think?
[18:15:13] <acrichto> fn to_str<T: Int>(num: T, radix: uint) -> ~str;
[18:15:15] <acrichto> that should be one
[18:15:46] <acrichto> or hm, maybe not at all
[18:15:46] <bjz> we will have floats too
[18:15:55] <acrichto> maybe we should do your generix radix
[18:15:58] <bjz> probably in that module
[18:16:08] <acrichto> format!("{}", Radix(some_int, some_radix))
[18:16:10] <acrichto> but that's it
[18:16:30] <acrichto> you get heap allocation, formatting, formatting into a buffer all for free
[18:16:39] <bjz> ah, thats a neat way of exposing it
[18:16:53] <acrichto> but Radix is the only thing exposed by the module
[18:16:57] *** Joins: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP)
[18:16:57] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/EaR1Kw
[18:16:57] *** Parts: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP) ()
[18:16:58] <bjz> yep
[18:17:03] <acrichto> implementation wise you can delegate to a specific base for the optimized version
[18:17:05] <acrichto> I like that idea
[18:17:30] * bjz kind of just wants to get rid of all the to_strs
[18:17:52] <acrichto> fmt::num::Radix ?
[18:18:01] <bjz> yeah
[18:18:18] <acrichto> impl<T: Int> fmt::Show for Radix<T> { ... }
[18:18:24] <bjz> how would the numeric parsing API fit in?
[18:18:24] <acrichto> struct Radix<T>(T, uint);
[18:18:27] <bjz> yeah
[18:18:36] <acrichto> parsing I'm not quite sure
[18:18:49] <acrichto> although perhaps that should be separate functionality
[18:18:53] <bjz> I want it to fit nicely with the design
[18:18:57] <bjz> it would
[18:19:48] <bjz> str -parse-> num -fmt-> str
[18:20:30] <bjz> Writer -parse-> T -fmt-> Writer
[18:20:32] <acrichto> strconv is nice as a one-stop-shop, do we want to keep everything in one spot?
[18:21:33] <bjz> but formatting is more than strings I guess
[18:21:51] *** Joins: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP)
[18:21:51] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/LFS8kg
[18:21:51] <ghrust> 13rust/06auto 142eacc72 15Alex Crichton: Fix staticlib outputs linking to blank archives...
[18:21:51] <ghrust> 13rust/06auto 14209b47f 15bors: auto merge of #12379 : alexcrichton/rust/fix-ar-thing, r=brson...
[18:21:52] *** Parts: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP) ()
[18:21:53] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[18:21:54] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/Fav9YA
[18:21:54] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[18:22:05] <bjz> I dunno
[18:22:13] <bjz> I will think about it
[18:22:36] *** Joins: sunfish (chatzilla@moz-BBE3ABD.mv.mozilla.com)
[18:28:42] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Input/output error)
[18:29:02] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[18:29:02] *** ChanServ sets mode: +qo brson brson
[18:29:09] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Ping timeout)
[18:29:10] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[18:30:48] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[18:30:56] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Ping timeout)
[18:32:25] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[18:32:37] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[18:32:46] <cmr> r? https://github.com/mozilla/rust/pull/12387
[18:33:29] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[18:33:30] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[18:33:52] <acrichto> github. load.
[18:34:59] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Ping timeout)
[18:35:52] <cmr> acrichto: thanks
[18:35:57] <sfackler> ugh, every time I see krate I shudder a bit D:
[18:36:26] <flaper87> sfackler: loool
[18:36:33] <acrichto> krate
[18:36:36] <flaper87> krate
[18:36:39] <sfackler> augh!
[18:36:44] *** Joins: new_one (new_one@75512748.6D46D672.B3C0173E.IP)
[18:36:46] <eddyb> Kthulu?
[18:37:14] <cmr> KRATE
[18:37:39] <sfackler> it's even worse than clazz!
[18:38:00] <eddyb> do we hate underscores?
[18:42:37] <steveklabnik> eddyb: what do you mean?
[18:42:45] <eddyb> _crate or crate_
[18:42:56] <steveklabnik> _crate has meaning
[18:42:58] <steveklabnik> semantically
[18:43:06] <steveklabnik> crate_ is waaay worse than krate imho
[18:43:14] <cmr> not in rust, we have priv for that :)
[18:43:28] <sfackler> I use crate_, type_, etc for my own stuff
[18:43:33] <cmr> so do I
[18:43:34] <sfackler> cmr: it'll ignore unused variable warnings
[18:43:37] <steveklabnik> For occasions where unused variables are intentional, their names may be prefixed with an underscore to silence the warning, like let _monster_size = 50;.
[18:43:41] <cmr> sfackler: oh yeah, that.
[18:43:42] <steveklabnik> from the tutorial ^^^^
[18:43:45] <cmr> derp.
[18:43:52] * cmr doesn't make unused variables
[18:43:57] * steveklabnik doesnt either
[18:45:04] *** Joins: edwardw (edwardw@655F78EA.BF27AFA4.B9C6B12A.IP)
[18:46:24] *** Quits: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net) (Quit: Sharp)
[18:48:23] *** Joins: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net)
[18:55:48] *** Joins: lkuper (lkuper@1E0BD410.CDD31A0A.51B6877.IP)
[18:57:07] <eddyb> huon: ouch, I've started another chain of @ -> &
[18:59:01] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[19:00:06] *** Quits: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net) (Ping timeout)
[19:00:40] *** Joins: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net)
[19:05:28] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[19:05:43] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[19:06:02] <acrichto> any opinions on taking apart std::unstable? https://github.com/mozilla/rust/pull/12311
[19:07:26] <eddyb> might as well stabilize the implementation details
[19:08:06] <eddyb> strcat was declaring intrinsics wherever they were used
[19:08:10] *** Quits: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net) (Quit: Sharp)
[19:08:21] <eddyb> (in rust-core, that is)
[19:09:07] <acrichto> this isn't for stabilization though, I believe the plan is to still mark them as #[unstable]
[19:09:22] <acrichto> the idea is that if we have stability attributes that 'mod unstable'
[19:09:25] <acrichto> isn't that necessary
[19:09:30] <eddyb> right, my bad
[19:10:09] <eddyb> but with attributes, you can easily change stability, so it's purely superior to the module
[19:10:39] <acrichto> cool, that was my thinking
[19:10:48] <eddyb> and I'm assuming stable APIs will remain frozen in place
[19:11:15] <acrichto> yeah
[19:13:15] *** Joins: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net)
[19:18:11] <eddyb> this is compiling... it better work :)
[19:21:43] <eddyb> do we have an xfailed test for #4252?
[19:23:24] <sfackler> acrichto: +1
[19:24:18] <flaper87> acrichto: +1
[19:25:44] <eddyb> "error: cannot implement a destructor on a structure with type parameters"
[19:25:50] <eddyb> should I remove that?
[19:26:54] <eddyb> TADAAAA
[19:27:06] <eddyb> where's strcat, I want to give him his present?
[19:27:34] <eddyb> (issue-4252 compiles without errors, that is)
[19:27:36] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[19:27:36] *** ChanServ sets mode: +ao pcwalton pcwalton
[19:27:48] <eddyb> pcwalton: ahh, you just missed some good news :P
[19:28:09] <pcwalton> what's up?
[19:28:15] <sfackler> eddyb: do generic destructors work now!?
[19:28:15] <eddyb> [21:27] <eddyb> (issue-4252 compiles without errors, that is)
[19:28:27] <pcwalton> oh cool :)
[19:28:29] <pcwalton> that's awesome
[19:28:34] <eddyb> sfackler: it was rather easy
[19:28:35] <sfackler> !!!!!
[19:28:48] <eddyb> surprised nobody's done it, it's just 10 lines or so
[19:28:57] <eddyb> the rest is me cleaning up a few related things
[19:29:08] <sfackler> strcat had a comment on that issue saying that he though it would be a nightmare, which probably scared everyone away :P
[19:29:25] <eddyb> all the information is already there :)
[19:31:49] *** Joins: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP)
[19:31:49] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/LFS8kg
[19:31:49] *** Parts: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP) ()
[19:32:29] <acrichto> eddyb: you are a champion
[19:32:40] * eddyb coughs a bit more
[19:33:14] <acrichto> lol
[19:33:19] <acrichto> best cure for a sickness is fixing bugs!
[19:33:38] <eddyb> hmm, I'm adding a Pod bound because I want to move out of &mut self *and* it's testing one more thing :P
[19:34:12] <eddyb> why does Pod not work?
[19:34:36] <eddyb> surely this is type-checked as a normal trait impl
[19:34:43] *** Joins: Sharp (Sharp@19388942.6B775EBE.DC877F3B.IP)
[19:35:29] <eddyb> rusti: fn foo<T: Pod>(x: Option<T>) {let _ = (x, x);} foo(0)
[19:35:41] -rusti- failed to pastebin 5 lines of output
[19:35:44] <eddyb> rusti: fn foo<T: Pod>(x: Option<T>) {let _ = (x, x);} foo(0)
[19:35:46] -rusti- pastebinned 5 lines of output: http://ix.io/aCh
[19:35:59] <eddyb> rusti: fn foo<T: Pod>(x: Option<T>) {let _ = (x, x);} foo(Some(0))
[19:36:00] -rusti- ()
[19:36:05] <eddyb> hmpf
[19:36:50] *** Joins: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP)
[19:36:50] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/QugCAQ
[19:36:50] *** Parts: ghrust (ghrust@4089EBDC.6A2AE50.F3114085.IP) ()
[19:36:51] *** Joins: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP)
[19:36:51] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/cDkJtA
[19:36:51] <ghrust> 13rust/06auto 14418eea1 15Nick Cameron: Fix bug with zero-length filemaps and rename bytepos_to_local_charpos to bytepos_to_charpos.
[19:36:51] <ghrust> 13rust/06auto 141228fb0 15bors: auto merge of #11904 : nick29581/rust/0filemap, r=alexcrichton
[19:36:51] *** Parts: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP) ()
[19:36:52] <eddyb> X::call &Y(42) &Z<Y>{x: Y(42)}
[19:36:54] <eddyb> X::default_method &Y(42) &Z<Y>{x: Y(42)}
[19:36:58] <eddyb> pcwalton: ^^ proof
[19:37:10] <eddyb> those are called from the destructor
[19:37:31] <eddyb> does it make sense to remove the error for Drop impls on structs with type parameters?
[19:38:08] <eddyb> I assume it was added to prevent ICEing an unsuspecting user
[19:40:51] <eddyb> wait, there's some interaction with the Send checking code
[19:41:50] <eddyb> oh, yeah, it makes sense, struct Foo<T>(T); can't force T to be Send, I'll leave that error be
[19:42:11] <eddyb> I wonder what I should do with TypedArena
[19:42:29] <eddyb> how would one trigger a destructor in-place?
[19:43:46] <eddyb> (strcat would know, but he's not here)
[19:44:55] <sfackler> eddyb: drop(thing), unless you're doing something super sketchy
[19:45:04] <sfackler> which is probably the case since you're in TypedArena :P
[19:45:16] <eddyb> sfackler: that's not in-place, that moves ownership to drop
[19:45:26] <nrc> could someone with GitHUb r-ness summon bors for me please - https://github.com/mozilla/rust/pull/12328
[19:45:27] <sfackler> ah
[19:46:07] <sfackler> nrc: is that supposed to update compiler-rt?
[19:46:36] <sfackler> and libuv?
[19:46:44] <nrc> sfackler: no :-( I'll try again....
[19:46:54] <nrc> thanks for noticing
[19:49:50] <nrc> OK, that is better
[19:50:00] <nrc> I'll get the hang of this Git thing eventually
[19:51:44] <eddyb> hmm, I think we can have a drop_ref intrinsic (if we don't already) that's basically the drop glue
[19:52:02] *** Joins: dherman (dherman@moz-C07D5168.p2p.sfo1.mozilla.com)
[19:52:02] *** ChanServ sets mode: +ao dherman dherman
[19:53:11] <eddyb> sfackler: I guess *ptr = init(); will do?
[19:54:42] * flaper87 wonders how would people feel if we require 2 r+ to approve a patch
[19:55:16] <flaper87> that'd definitely have an impact on how long a patch would wait before being approved but it seems to me that will help a lot when we reach 1.0
[19:55:36] <flaper87> I mean, it'll help making sure that at least 2 reviewers had looked at the patch when it is approved
[19:55:52] <flaper87> that kinda already happens nowadays but it's an implicit process
[19:58:50] <eddyb> flaper87: two keys to unlock the rusty cogs?
[19:59:45] *** Joins: tjc (tjc@moz-346C31FF.tmodns.net)
[19:59:45] *** ChanServ sets mode: +o tjc
[20:00:27] <eddyb> flaper87: it should work fine, if we give more contributors review powers
[20:00:48] <eddyb> and I think we can do that without making them repo owners
[20:01:53] <cmr> I'm a fan of the code ownership process.
[20:02:04] <cmr> or, maintainer, not owner.
[20:02:42] <cmr> every module or what have you is assigned a maintainer
[20:02:50] <cmr> said maintainer needs to approve every change taht goes through it
[20:02:53] <eddyb> ohh
[20:02:54] <cmr> plus another reviewer
[20:03:01] <cmr> (linux does this)
[20:03:12] <flaper87> yeah, we do that in some parts of OpenStack
[20:03:14] <eddyb> we kindof implicitly do it sometimes
[20:03:24] * flaper87 realizes that he keeps bringing openstack in every convo
[20:03:26] <eddyb> but only because there's areas of the code with only one or two experts
[20:03:36] <flaper87> thing is openstack is a huge community and we've faced many of these issues
[20:04:02] <eddyb> cmr: did you get a chance to rebench a larger set of PRs?
[20:07:34] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Ping timeout)
[20:08:07] *** Quits: tjc (tjc@moz-346C31FF.tmodns.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[20:10:38] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[20:12:22] * flaper87 just sent an email w.r.t the 2 r+ thing
[20:13:04] <flaper87> nmatsakis: around?
[20:13:12] *** Quits: doomlord_ (servitor@moz-9B2006BF.range109-151.btcentralplus.com) (Quit: Leaving)
[20:15:17] <pnkfelix> regarding fractional r+, someone I was talking to recently described their employer's process, where the first reviewer (who I think is perhaps part of a priveleged subgroup) assigned the patch with the number of reviewers it needs
[20:15:33] <pnkfelix> so that it isn't a flat "every patch needs two reviewers"
[20:15:58] <pnkfelix> but instead, someone says "this looks like something big/hairy enough that it needs K reviewers"
[20:16:15] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Input/output error)
[20:16:37] <eddyb> so small fixes are reviewed faster than an hypothetical 10k line change to trans
[20:16:43] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[20:17:38] <eddyb> I shouldn't have put the issue in the commit, now it's hard to access from the PR... but meh
[20:17:47] <flaper87> eddyb: lol at hypothetical 10k line chage to trans
[20:17:53] <flaper87> like you didn't do that already
[20:17:54] <flaper87> :D
[20:17:55] <eddyb> pcwalton, nmatsakis, acrichto: r? https://github.com/mozilla/rust/pull/12403
[20:18:07] <flaper87> pnkfelix: that sounds like an interesting approach 
[20:18:30] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Ping timeout)
[20:19:10] *** Joins: tjc (tjc@moz-346C31FF.tmodns.net)
[20:19:10] *** ChanServ sets mode: +o tjc
[20:19:43] <pnkfelix> eddyb: in light of https://github.com/graydon/bors/issues/20 could you please not leave your PR descriptions empty
[20:20:19] <eddyb> I wish I could help
[20:20:20] * pnkfelix apologizes for not attempting to fix bors yet
[20:20:36] <pnkfelix> eddyb: ... is that meant to imply that you cannot edit the description on the PR?
[20:20:46] <eddyb> GitHub is broken for me, I'm surprised I could send the PR at all
[20:21:08] <eddyb> I think I could've input a description before sending it, editing won't work
[20:21:18] <pnkfelix> eddyb: okay I'll edit
[20:21:26] <eddyb> I'll keep trying to update my chrome version, there's a few broken things which I hate :/
[20:21:43] <pnkfelix> eddyb: I guess in the future, as painful as it is to suggest, maybe write the first line twice.  ("Ugh", I know.)
[20:22:02] <eddyb> I'd rather fix bors than have to do *that*
[20:22:25] <eddyb> ah, python. now I'm torn
[20:23:42] <eddyb> pnkfelix: thanks :)
[20:25:25] <eddyb> huon: is this my first PR with more than one commit?
[20:26:14] <eddyb> I've grown the bad habit of batching changes just because of how long it would take to test each one of them. it's not that hard to split them, though, if you remember what goes when
[20:28:22] *** Parts: aepsil0n (eduard@moz-D52819E1.mullvad.net) ()
[20:33:58] *** Quits: edwardw (edwardw@655F78EA.BF27AFA4.B9C6B12A.IP) (Quit: Leaving...)
[20:43:02] <eddyb> if we make macros accept one token tree...
[20:43:17] <eddyb> acrichto: we could have try! expr
[20:44:18] <eddyb> and then C++ and Java people will wonder where "catch" is
[20:45:39] <eddyb> try!(expr, FooError => fail!("no foos allowed"), err => return Err(err))
[20:46:49] *** Joins: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP)
[20:46:49] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/cDkJtA
[20:46:49] *** Parts: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP) ()
[20:48:05] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[20:48:08] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[20:48:29] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:49:48] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[20:51:50] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[20:51:50] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/KMNf6w
[20:51:50] <ghrust> 13rust/06auto 144667c49 15Yehuda Katz: Adds support for working with URL Paths...
[20:51:50] <ghrust> 13rust/06auto 146ae5de0 15bors: auto merge of #12231 : wycats/rust/url_path_parse, r=alexcrichton...
[20:51:50] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[20:51:53] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[20:51:53] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/T2n6vw
[20:51:53] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[20:52:08] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[20:52:11] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[20:52:30] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:52:33] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:53:14] <wycats> yay
[20:54:26] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[20:54:38] *** Quits: dherman (dherman@moz-C07D5168.p2p.sfo1.mozilla.com) (Quit: dherman)
[20:59:52] *** Joins: dherman (dherman@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[20:59:52] *** ChanServ sets mode: +ao dherman dherman
[21:00:12] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[21:00:30] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[21:01:07] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Quit: pcwalton)
[21:02:23] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[21:02:23] *** ChanServ sets mode: +qo brson brson
[21:05:04] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[21:05:11] <larsberg> Is there a tradeoff between `match x { &Con(ref i) => ...}` and `match *x { Con(ref i) => ...}`, for `x:&something` except where there are lifetime issues that prevent the latter?
[21:05:35] <acrichto> eddyb: awesome!
[21:05:37] *** Quits: dherman (dherman@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: dherman)
[21:05:43] <eddyb> larsberg: you mean, like a performance tradeoff?
[21:05:56] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[21:05:56] *** ChanServ sets mode: +ao pcwalton pcwalton
[21:06:09] <larsberg> eddyb: performance, semantics, or even stylistic :-)
[21:06:09] *** Quits: bytbox (s@moz-AA99B23F.washdc.fios.verizon.net) (Ping timeout)
[21:06:11] <eddyb> please remember that *x is a semantic dereference and not a physical one
[21:06:27] <larsberg> jack and I were arguing about it during code review and there was nobody around to mediate :-)
[21:06:39] <sfackler> I think the convention is to do match *foo {}
[21:06:41] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[21:06:42] *** ChanServ sets mode: +qo brson brson
[21:06:53] <larsberg> eddyb: so the * should have no effect whatsoever?
[21:07:04] <eddyb> larsberg: none of them dereference ;)
[21:07:27] <eddyb> match *x { ... } matches against the lvalue dereference of x, which is x
[21:07:42] <eddyb> these lvalue semantics are crazy to define in Rust
[21:08:13] <eddyb> there is no type which can explain the properties of *x, other than a hypothetical one, maybe similar to T& and const T& in C++
[21:08:18] <larsberg> cool, thanks. I'll stick with that except where borrowchk can't quite handle it (we have a few cases where in `*x` you get value doesn't live long enough and introducing a temp would make the lifetime too long, though that maybe old-rust)
[21:08:58] <eddyb> that's pre-rvalue-semantics
[21:09:27] <bjz> acrichto: hm, the issue with reducing the public api is there is no way to pass down the formatter, it seems
[21:09:39] <jack> larsberg, nmatsakis: is that a known borrowck limitation?
[21:09:48] <bjz> acrichto: I need `pub fn fmt_int<R: GenericRadix, T: Int>(radix: R, mut x: T, f: &mut fmt::Formatter) -> fmt::Result {` to be exposed
[21:09:51] <jack> or maybe this is fixed on master
[21:09:56] <larsberg> jack: I suspect it's our 1.5 month old rust
[21:10:25] <bjz> acrichto: and then further, I need GenericRadix to be exposed as well. and the other format tokens
[21:10:55] <larsberg> eddyb: thanks for the explanation! Hopefully the formal semantics work will make this all clearer, once that gets worked out :-)
[21:11:09] <nmatsakis> jack: is what a known limitation? (no time to read all backscroll)
[21:11:50] <eddyb> nmatsakis: I think they have rvalue problems (that you fixed some weeks ago)
[21:13:00] <larsberg> when we have code that looks like "match a.borrow().field.borrow_mut().get()" things work ok, but "match *a.borrow().field.borrow_mut().get()" yields "value doesn't live long enough"
[21:13:26] <jack> nmatsakis: https://github.com/larsbergstrom/rust-layers/commit/53f501ed88facd39135295cf7df77ae1b8995ebb#diff-3d98ac2a08faffaf6fa20a263dd91ec8R152
[21:13:40] <jack> nmatsakis: trying to change to match *.... { ... } gives borrowck errors.
[21:13:53] <jack> I think even in the case where you use a temporary
[21:14:05] <eddyb> nmatsakis: I can't comment on github, but for normal type checking ty::construct_parameter_environment is created for the function that you're type checking in
[21:14:14] *** Quits: Zr40 (zr40@moz-CCFEAB92.adsl.xs4all.nl) (Quit: leaving)
[21:14:36] <pnkfelix> eddyb: what is going on with you and github?  Is it a issue on your local-client, or on the server-side?
[21:14:44] <eddyb> I think it's my stupid chrome
[21:14:50] <eddyb> might be both
[21:15:25] <pnkfelix> eddyb: have you tried firefox?
[21:15:41] <eddyb> should I be ashamed of saying "no"?
[21:15:53] *** Quits: tjc (tjc@moz-346C31FF.tmodns.net) (Ping timeout)
[21:16:01] <eddyb> nmatsakis: the equivalent here is a monomorphized function (in which trans wants to call Drop::drop), so I was guessing there shouldn't be any generics *for the call*
[21:16:04] <pnkfelix> eddyb: well, no, except that its odd to be shut out of this semi-crucial bit of infraastructure
[21:16:19] <pnkfelix> eddyb: so if I were in your shoes, I would have tried `links` by now.  :)
[21:16:21] <eddyb> ah, I didn't uninstall firefox
[21:16:28] *** Joins: bytbox (s@moz-AA99B23F.washdc.fios.verizon.net)
[21:16:46] <eddyb> of course, it wants to check addons *sigh*
[21:17:32] *** Quits: aurynj (Eon@583ABBE5.60FA2E28.B9E25744.IP) (Ping timeout)
[21:17:36] <eddyb> whoa, it can clean itself up now?
[21:18:08] *** Quits: canhtak (canhtak@moz-8C86DA1D.wl.t.ulaval.ca) (Ping timeout)
[21:19:17] *** Joins: canhtak (canhtak@moz-8C86DA1D.wl.t.ulaval.ca)
[21:22:14] <eddyb> pnkfelix: thanks for pushing me :)
[21:22:34] <pnkfelix> eddyb: hey, did Firefox just win another user?
[21:22:38] <pnkfelix> eddyb: :)
[21:22:53] <eddyb> no, the fonts are terrible and the default theme is eww
[21:23:07] <eddyb> maybe I could fix those :/
[21:23:14] <eddyb> TBH, I want servo
[21:23:57] <nmatsakis> larsberg: from when is this rustc?
[21:24:30] <larsberg> eddyb: Nice! Though for now, Firefox is paying all the Moz staff's salaries, so I'm not going to be offended if you are slow to move to Servo... once we have cookies, that is :-)
[21:24:44] <larsberg> nmatsakis: Very early January, unfortunately. 
[21:25:01] <eddyb> that's not going to have rvalue fixes, I don't think
[21:25:39] <eddyb> larsberg: I want to move to servo, I could care less about these sorry pileups of C++!
[21:25:56] <eddyb> (inb4 debate about "could care less" and "couldn't care less")
[21:26:01] <nmatsakis> larsberg: you want something with #3511
[21:26:07] <nmatsakis> larsberg: (the fixes for that)
[21:26:38] *** Joins: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com)
[21:28:11] <larsberg> nmatsakis: thanks! I'm doing preliminary work to do a Rust upgrade to master, so hopefully we'll pick that up soon.
[21:28:23] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Ping timeout)
[21:30:52] <flaper87> we're 1 day away from our first meetup and people keeps joining the group. w00000000t 
[21:33:22] <eddyb> nmatsakis: no answer? I'll have to go soon and I'm curious
[21:39:56] * eddyb throws a pebble at the surface of the channel
[21:41:19] * flaper87 watches how the pebble bounces away
[21:48:08] <nmatsakis> eddyb: sorry, in a meeting, no anwer to what
[21:48:33] <eddyb> nmatsakis: the ty::construct_parameter_environment issue
[21:51:23] <nmatsakis> eddyb: what is the issue / question
[21:51:53] <eddyb> nmatsakis: sorry. your comment on my most recent PR https://github.com/mozilla/rust/pull/12403#discussion_r9883408
[21:52:07] <eddyb> is there anything wrong with my assumption?
[21:54:10] <nmatsakis> eddyb: ah hmm you are correct yes
[22:01:47] *** Joins: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP)
[22:01:47] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/KMNf6w
[22:01:47] *** Parts: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP) ()
[22:01:57] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[22:03:12] <acrichto> huon: ping
[22:03:16] <bjz> acrichto: committed to the PR
[22:03:33] <acrichto> bjz: cool, will take another look
[22:03:36] <bjz> https://github.com/mozilla/rust/pull/12382
[22:03:55] <huon> acrichto: pong (for a few minutes)
[22:04:17] <acrichto> huon: oh ok, I got some emails of some of your comments on 12382 but they disappeared
[22:04:20] <acrichto> and now I can't find them :(
[22:05:03] <acrichto> huon: re tiny functions, I agree, but I don't think any of these will be used cross-crate as all the formatting is in libstd and that's where the inlining matters
[22:05:43] <acrichto> also hm, I think you're right about that comment with negative signs on octal/hex/binary
[22:05:54] <acrichto> I think at some point I wasn't going to do it but then everyone else did it so I added it
[22:06:05] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[22:06:16] <bjz> acrichto: shall I fix that
[22:06:28] <acrichto> bjz: sure
[22:06:31] <huon> acrichto: I guess so re #[inline] (I've just been "burnt" recently with std::str::utf8_char_width not being inlined, and so required me to copy the definition out to be able to do legitimate perf comparisons.)
[22:06:37] <bjz> acrichto: I thought it was a little weird, but was just going with what was there
[22:06:50] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[22:06:50] *** ChanServ sets mode: +qo brson brson
[22:06:56] *** Joins: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP)
[22:06:56] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/VODWhw
[22:06:56] *** Parts: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP) ()
[22:06:56] *** Joins: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP)
[22:06:56] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/Y_CEUA
[22:06:56] <ghrust> 13rust/06auto 1434ffe3c 15Corey Richardson: rustc: support dumping the AST as JSON...
[22:06:56] <ghrust> 13rust/06auto 1485e05f8 15bors: auto merge of #12387 : cmr/rust/ast-json, r=alexcrichton...
[22:06:57] *** Parts: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP) ()
[22:06:58] <acrichto> huon: true, although -Zlto is good for quick perf comparisons as everything becomes #[inline]
[22:07:15] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[22:07:15] *** ChanServ sets mode: +o tjc
[22:07:24] <huon> acrichto: true, but it makes iteration several seconds slower
[22:07:45] <huon> (er, compile-test cycle iteration, not for ... in ... iteration)
[22:08:10] <eddyb> "seconds"? try it on rustc :P
[22:08:26] <huon> acrichto: (and it was crashing my compiler before :P )
[22:08:35] <eddyb> (how much RAM does it even take?)
[22:08:52] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Connection reset by peer)
[22:08:52] *** Joins: tjc_ (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[22:09:07] <eddyb> huon: executables built with LTO used to have TLS problems within the runtime, I think
[22:09:21] <huon> eddyb: yeah, ages ago
[22:09:32] <huon> this was a compiler ICE (or an LLVM one, can't remember the details)
[22:09:55] <eddyb> can we teach LLVM to spit ICE?
[22:10:02] <eddyb> it's a white dragon, after all
[22:10:08] <huon> haha
[22:10:10] * huon goes
[22:10:51] *** Quits: huon (Thunderbir@moz-826BD85A.lns20.syd6.internode.on.net) (Quit: huon)
[22:12:33] <eddyb> nmatsakis: fixed the two nits, I'll leave now
[22:12:39] <eddyb> good night and thanks for all the fish :P
[22:13:45] <nmatsakis> eddyb: ok, r+'d
[22:14:07] <bjz> acrichto: fixed the negative signs
[22:14:20] *** Quits: eddyb (eddy@moz-41DB10DA.residential.rdsnet.ro) (Ping timeout)
[22:14:50] *** Quits: doener (doener@moz-C68F600D.unity-media.net) (Quit: leaving)
[22:20:26] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[22:25:17] <acrichto> bjz: looking
[22:26:09] <acrichto> bjz: I thought the only public function in that module would be 'fn radix'?
[22:26:31] <acrichto> bjz: I also thought that fmt::num would be private
[22:27:16] <bjz> acrichto: what about when you want to pass on the formatter to print stuff? :/
[22:28:08] <bjz> maybe I will just not have that
[22:29:45] <bjz> acrichto: like https://github.com/bjz/rust/blob/12134ec828064bf749d585de0f994e78fe73a850/src/libstd/fmt/mod.rs#L1132-L1138
[22:30:07] <bjz> acrichto: I don't know how I would pass on the argument information to it
[22:30:12] <bjz> ohhh!
[22:30:30] <acrichto> ?
[22:30:36] <bjz> Hexidecimal::fmt(&x, f)!
[22:30:42] <bjz> oh wait
[22:30:48] <bjz> that does not work atm
[22:31:05] <acrichto> use fmt::UpperHex; value.fmt(f);
[22:31:08] <bjz> oh there are hacks in there
[22:31:10] <bjz> yeah
[22:31:13] <bjz> silly me
[22:31:35] <bjz> I will simplify the API then
[22:31:49] *** Quits: canhtak (canhtak@moz-8C86DA1D.wl.t.ulaval.ca) (Quit: canhtak)
[22:32:05] *** Joins: canhtak (canhtak@moz-8C86DA1D.wl.t.ulaval.ca)
[22:37:57] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[22:39:57] *** Quits: tjc_ (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[22:40:01] *** Joins: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net)
[22:40:02] *** ChanServ sets mode: +o tjc
[22:52:09] *** Joins: dherman (dherman@moz-BBE3ABD.mv.mozilla.com)
[22:52:09] *** ChanServ sets mode: +ao dherman dherman
[22:53:02] *** Quits: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP) (Quit: Lost terminal)
[23:00:32] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[23:01:51] *** Joins: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP)
[23:01:51] <ghrust> [13rust] 15bors 04force-pushed 06auto from 1485e05f8 to 146ae5de0: 02http://git.io/N3iJvQ
[23:01:51] *** Parts: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP) ()
[23:02:06] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[23:05:36] <acrichto> bjz: I think I may have misled you sorry
[23:05:48] <acrichto> rusti: format!("{:x}", -1u8)
[23:05:49] -rusti- ~"ff"
[23:05:59] <acrichto> bjz: ^ I don't think a sign should be printed there
[23:06:07] <bjz> oh
[23:06:16] <bjz> ok
[23:06:28] <bjz> for ocatal as well?
[23:06:45] <acrichto> only decimal should print a sign
[23:06:49] <bjz> ok
[23:06:53] <acrichto> decimal + signed integers == print a negative sign
[23:07:05] <bjz> what about the radix ones
[23:08:05] <acrichto> I feel like signs only really matter in decimal, other bases you're just looking for letters and representation
[23:08:09] <bjz> ok
[23:08:14] <acrichto> but that's only true from a CS perspective, not a math one
[23:08:33] *** Quits: dherman (dherman@moz-BBE3ABD.mv.mozilla.com) (Quit: dherman)
[23:18:38] *** Joins: dherman (dherman@moz-BBE3ABD.mv.mozilla.com)
[23:18:39] *** ChanServ sets mode: +ao dherman dherman
[23:19:54] *** Quits: dherman (dherman@moz-BBE3ABD.mv.mozilla.com) (Quit: dherman)
[23:22:33] *** Quits: doomlord__ (servitor@moz-9B2006BF.range109-151.btcentralplus.com) (Quit: Leaving)
[23:23:07] *** flaper87 is now known as flaper87|afk
[23:27:20] *** Quits: canhtak (canhtak@moz-8C86DA1D.wl.t.ulaval.ca) (Quit: canhtak)
[23:27:41] *** Joins: Sharp_ (Sharp@moz-3301C7AB.static-ip.telepacific.net)
[23:28:02] *** Quits: Sharp (Sharp@19388942.6B775EBE.DC877F3B.IP) (Ping timeout)
[23:28:03] *** Sharp_ is now known as Sharp
[23:28:08] *** Quits: vadimcn (chatzilla@FB06B64.76F9E272.DA40C4B3.IP) (Ping timeout)
[23:28:10] *** Joins: vadimcn_ (chatzilla@FB06B64.76F9E272.DA40C4B3.IP)
[23:28:12] *** vadimcn_ is now known as vadimcn
[23:40:07] <bjz> acrichto: done
[23:40:13] <bjz> https://github.com/mozilla/rust/pull/12382
[23:42:02] *** Joins: canhtak (canhtak@moz-8C86DA1D.wl.t.ulaval.ca)
[23:45:04] <acrichto> bjz: looking
[23:47:15] *** Quits: lkuper (lkuper@1E0BD410.CDD31A0A.51B6877.IP) (Quit: lkuper)
[23:47:30] <acrichto> bjz: you duplicated the is_positive logic?
[23:47:37] <acrichto> I thought you didn't see a difference when lifting it out?
[23:52:08] <bjz> acrichto: there was a minor difference for signed ints
[23:52:21] <acrichto> how much?
[23:52:25] <bjz> I didn't notice it because it's only one case though
[23:52:52] <bjz> probably 1-3%
[23:53:01] <bjz> but maybe I was imagining it
[23:53:08] <acrichto> eh, the code isn't that big or bad
[23:53:25] <bjz> I think it wduces the +/-
[23:53:44] <bjz> which means that probably longer numbers were worse. maybe
[23:54:36] <acrichto> you may also see variance b/c the xortshift rng is randomly seeded
[23:54:40] <acrichto> so it's different between runs
[23:54:44] <bjz> yeah
[23:58:14] *** Quits: tjc (tjc@moz-7EE2AFFC.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
