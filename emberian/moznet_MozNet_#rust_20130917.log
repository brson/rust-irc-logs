[00:01:08] <strcat> pcwalton: and that out ptr thing is about to finally land :P
[00:01:22] *** Quits: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net) (Ping timeout)
[00:01:23] <strcat> needing to tag invoke instructions on function ptrs with sret too
[00:01:25] <strcat> needed*
[00:01:36] *** Joins: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net)
[00:01:44] *** Quits: snadon (chatzilla@53E4C32F.E454E1CD.47C41102.IP) (Quit: ChatZilla 0.9.90.1 [Firefox 24.0/20130909203154])
[00:01:50] <strcat> so that cuts down a lot on the # of possibly aliasing ptrs
[00:02:02] <pcwalton> strcat: can we vectorize sum yet?
[00:02:15] *** Parts: doomlord_ (servitor@moz-2BA2D1DA.range86-184.btcentralplus.com) (Leaving)
[00:02:18] <strcat> pcwalton: on floats?
[00:02:22] <pcwalton> on ints
[00:03:24] *** Parts: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Leaving...)
[00:04:10] * pcwalton wonders if sprocketnes has vectorizable loops
[00:05:05] *** Quits: Ferreus (daniel@moz-FF204807.pools.arcor-ip.net) (Quit: WeeChat 0.4.1)
[00:05:16] <Eridius> pcwalton: with a hypothetical fourcc!(), what endianness would it use?
[00:05:39] <kimundi> Just make fourcc support both :P
[00:05:48] <Eridius> using what syntax?
[00:05:52] *** Joins: Azdle (patrick@moz-8C723B60.hsd1.mn.comcast.net)
[00:06:00] <kimundi> fourcc!("abcd") == fourcc!(-"dcba")
[00:06:10] <strcat> pcwalton: doesn't seem like we get a vectorized accumulation
[00:06:17] <kimundi> seems logical to me at least
[00:06:20] <pcwalton> strcat: bleh
[00:06:36] <Eridius> kimundi: and which one is which endianness? :P
[00:06:45] <strcat> pcwalton: probably just some tiny issue again
[00:06:47] *** Joins: ercax (ercan@moz-917BB3A7.dyn.optonline.net)
[00:06:48] <strcat> the IR looks good
[00:06:49] <pcwalton> it can in C++
[00:06:52] <pcwalton> even with std::accumulate
[00:06:59] <olsonjeffery> brson: ping
[00:07:06] <strcat> pcwalton: I'm looking at it for fold
[00:07:10] <strcat> could try without it
[00:07:47] <kimundi> Eridius: THAT is a good question :P I guess If I had to choose, I'd define them such that the bytes in memory are in the same order as the regular one
[00:07:49] <strcat> pcwalton: http://ix.io/86G that's from
[00:07:51] <strcat> fn sum(xs: &[f32]) -> f32 {
[00:07:53] <strcat>     xs.iter().fold(0.0, |a, &b| a + b)
[00:07:55] <strcat> }
[00:08:05] <strcat> LLVM is really picky about this stuff
[00:08:32] <acrichto> engla: ping
[00:08:34] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[00:09:06] <engla> acrichto: hi
[00:09:24] <acrichto> engla: on your overflow req, what was the speedup from? I thought it was slower before?
[00:09:30] <engla> acrichto: and congrats^^
[00:09:32] <kimundi> rusti: let x: u32 = unsafe{ transmute(bytes!("0123")) }; x
[00:09:32] -rusti- <anon>:7:30: 7:39 error: unresolved name `transmute`.
[00:09:32] -rusti- <anon>:7          let x: u32 = unsafe{ transmute(bytes!("0123")) }; x
[00:09:32] -rusti-                                        ^~~~~~~~~
[00:09:32] -rusti- error: aborting due to previous error
[00:09:33] -rusti- application terminated with error code 101
[00:09:45] <kimundi> rusti: let x: u32 = unsafe{ std::cast::transmute(bytes!("0123")) }; x
[00:09:45] -rusti- <anon>:1:0: 1:0 error: transmute called on types with different sizes: &[u8] (128 bits) to u32 (32 bits)
[00:09:45] -rusti- <anon>:1 extern mod extra;
[00:09:45] -rusti-          ^
[00:09:46] -rusti- application terminated with error code 101
[00:09:52] <acrichto> engla: thanks :)
[00:10:00] *** Joins: z0w0 (zack@moz-F83C02B5.lns5.woo.bigpond.net.au)
[00:10:07] <engla> it was slower before, I removed that from the PR text since it was no longer true
[00:10:14] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[00:10:29] <acrichto> was it just a mismeasured benchmark or did you change code to optimize better?
[00:10:36] *** Quits: dave1629 (dave@moz-F7321B31.public.wayport.net) (Ping timeout)
[00:10:37] <strcat> pcwalton: http://ix.io/86I seems like it should be able to vectorize that :s
[00:10:56] <strcat> well
[00:11:01] <strcat> maybe it needs that gather stuff
[00:11:16] <engla> acrichto: it could be the former, I also wrote that if it optimizes better to the point of invalidating the bench that's good in itself
[00:11:33] <Eridius> kimundi: the problem with trying to define it that way, is that it would evaluate to different integral values depending on the endianness of the platform
[00:11:34] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[00:11:36] <Eridius> which seems problematic
[00:11:42] <kimundi> rusti: let x: u32 = unsafe{ let (p, _) : (*u32, uint) = transmute(bytes!("0123")); *p }; x
[00:11:42] -rusti- <anon>:7:58: 7:67 error: unresolved name `transmute`.
[00:11:42] -rusti- <anon>:7          let x: u32 = unsafe{ let (p, _) : (*u32, uint) = transmute(bytes!("0123")); *p }; x
[00:11:42] -rusti-                                                                    ^~~~~~~~~
[00:11:42] -rusti- error: aborting due to previous error
[00:11:43] -rusti- application terminated with error code 101
[00:11:51] <kimundi> rusti: let x: u32 = unsafe{ let (p, _) : (*u32, uint) = std::cast::transmute(bytes!("0123")); *p }; x
[00:11:52] <Eridius> although maybe not. I don't know. Maybe that's actually a good thing
[00:11:52] -rusti- 858927408u32
[00:12:32] <Eridius> I guess it depends on whether magic numbers in data formats are expected to be read using a hard-coded endianness, or read using the platform-native endianness, because you'd want fourcc!() to match
[00:13:02] <aatch> I always figured that they were in the order as written
[00:13:18] <Eridius> I suppose you could do something like fourcc!("foob") is platform-native, and fourcc!("foob", big)/fourcc!("foob", little) to control it
[00:13:41] <kimundi> Eridius: right
[00:14:02] <Eridius> aatch: in a data format it's easy to say that. But I wouldn't want to say reader.readInt32Little() == fourc!!("foob") and have it silently be wrong on a big-endian platform
[00:14:18] <Eridius> i.e. it's more complicated when it returns a platform-native integral value instead of a sequence of bytes
[00:14:57] *** Quits: ozten (ozten@19BD73A1.5D8BCA3A.A0C1B52F.IP) (Quit: ozten)
[00:15:32] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[00:16:11] <engla> acrichto: I don't know. The new code isn't bad, .reserve_additional should be inserted with every .push_str but maybe its capacity check helps..  if self.capacity() - self.len() < n { /* overflow check, then grow */ }
[00:16:39] <acrichto> engla: I was mostly just curious, this all looks pretty good to me
[00:16:46] <Eridius> rusti: quote_expr!(1+2)
[00:16:47] -rusti- <anon>:7:23: 7:24 error: Expected token `,`
[00:16:48] -rusti- <anon>:7          quote_expr!(1+2)
[00:16:48] -rusti-                                 ^
[00:16:48] -rusti- application terminated with error code 101
[00:16:52] <Eridius> hrm, what does that do?
[00:17:29] <engla> acrichto: I'm happy with the big net reduction in unsafe code in str.
[00:17:53] <acrichto> engla: with the one comment I have, I think you can reduce a few more lines (mostly "}"), but still :)
[00:18:02] <acrichto> engla: r+ with my comment
[00:18:10] <engla> oh I'll check your comment
[00:18:19] *** Quits: steveklabnik (steveklabn@moz-5EF6C37C.socal.res.rr.com) (Ping timeout)
[00:18:20] <strcat> Eridius: incomprehensible quasi-quoter stuffs
[00:18:44] <strcat> somehow I didn't break it when I added char as a non-integer literal
[00:18:54] <kimundi> good night everyone
[00:19:06] <sfackler> Eridius: it turns an expression into code that generates an AST for that expression
[00:19:09] <engla> acrichto: ok I'll explore that
[00:19:15] <Eridius> sfackler: and what's the use for this?
[00:19:31] <sfackler> it makes it easier to build syntax extensions
[00:19:34] <sfackler> take a look at
[00:19:53] <sfackler> https://github.com/mozilla/rust/blob/master/src/libsyntax/ext/env.rs
[00:20:20] <Eridius> hah, that's the one I opened up already to check
[00:21:17] <sfackler> so in the case of option_env!, it expands to either ::std::option::None::<&'static str> or ::std::option::Some("some value")
[00:21:43] <sfackler> but creating the AST for those constructs is a pain, so the quasiquoter does it for you
[00:21:47] <Eridius> I see
[00:23:53] <strcat> brson: do you think we should do https://github.com/mozilla/rust/issues/1835 ? it'd be really easy since I split out the rust function declaration/calling
[00:24:13] <strcat> brson: the only concern would be LLVM changing the fastcc ABI between releases
[00:24:24] <strcat> although, you'd be using extern "C" in a real rust system lib
[00:26:07] <cmr> strcat: +1 from me; we don't offer ABI compatability yet.
[00:26:51] <acrichto> it'd help expose a lot of bugs in ABI stuff for sure
[00:27:27] <strcat> yeah we have misuses of extern fn
[00:27:29] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Input/output error)
[00:27:36] <strcat> extern fn == extern "Rust" fn now
[00:27:43] <strcat> it would be easy to fix though
[00:27:49] *** Quits: ww (Mibbit@moz-DFAED48A.lightspeed.sntcca.sbcglobal.net) (Quit: http://www.mibbit.com ajax IRC Client)
[00:28:18] <engla> acrichto: maybe I should remove the #[bench] tests? they are kind of there just to show how I was measuring
[00:28:41] <acrichto> engla: nah I was just kidding
[00:28:44] <acrichto> they're fine to keep
[00:28:46] *** Quits: miloshadzic (miloshadzi@F8195CC5.425C93D4.449B8A48.IP) (Quit: Textual IRC Client: www.textualapp.com)
[00:29:37] <strcat> cmr: llvm release cycle is 6 months, so that'd be the worst case ABI breakage time anyway
[00:30:28] <cmr> strcat: I imagine using fastcc is going to be problematic once we want to actually define an ABI? What does LLVM consider the severity of fastcc breakages as?
[00:30:55] <cmr> Well, not really problematic I guess
[00:30:58] <cmr> we have extern "C"
[00:30:59] <strcat> cmr: they will happily break the bytecode/fastcc definition between releases
[00:31:27] *** Joins: victorporof_ (victorporo@CFB98BB1.77B8163B.2B3D3D4.IP)
[00:31:27] <strcat> they auto-promote internal fns to fastcc
[00:31:33] <cmr> Yeah, I did know that
[00:32:45] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[00:32:48] *** Quits: victorporof (victorporo@CFB98BB1.77B8163B.2B3D3D4.IP) (Ping timeout)
[00:34:03] <cmr> olsonjeffery: reviewing your fileinfo stuff
[00:34:25] <brson> strcat: it would be worth experimenting with. having an arbitrary abi that is subject to llvm's whims is a concern though
[00:34:50] <mark_edward> im getting an ICE from using an pub static mut obejct in an unsafe block
[00:36:32] *** Joins: Larry (larryfox@moz-8D6C9B2A.nycmny.fios.verizon.net)
[00:36:41] <brson> olsonjeffery: pong
[00:37:40] <Eridius> rusti: bytes!(3.2, 4.5)
[00:37:41] <olsonjeffery> brson: i'd like to work on #9128, after cmr is done savaging my PR. could i trouble you to expand on the brief items I have in there? i'd like to know more about where to look/get-started on a BasicEventLoop, what tests I should look at adapting, etc
[00:37:44] -rusti- pastebinned 8 lines of output: http://ix.io/86J
[00:37:49] <cmr> olsonjeffery: ;P
[00:38:24] <tiffany> is there a way to access exec() style functions in rust?
[00:38:40] <Eridius> hrm, why do those span errs not include the ^~~~ stuff?
[00:38:50] <Eridius> is it because it covers the whole line?
[00:38:59] <strcat> tiffany: FFI, it's not exposed in the stdlib
[00:39:10] <strcat> there's std::run if you just need to spawn a process
[00:39:11] <Eridius> oh because the span actually covers 2 lines I guess. That's.. interesting
[00:39:15] <strcat> but nothing to replace the rust process with another
[00:39:46] *** Quits: nejucomo_ (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: Leaving.)
[00:40:07] <tiffany> oh
[00:40:09] <tiffany> std::run will work
[00:40:13] <Eridius> shouldn't the bytes!() error use the span of the unsupported expr, rather than the whole bytes!()?
[00:40:21] <tiffany> uh..
[00:40:24] <olsonjeffery> cmr:  also, maybe you should look at the total diff of the PR before making comments ;)
[00:40:32] <tiffany> just to make sure, rust doesn't run the arguments through the shell, right?
[00:40:33] <cmr> olsonjeffery: can I make comments on the whole diff?
[00:40:41] <olsonjeffery> you can view the whole diff at once
[00:40:48] <olsonjeffery> like that FileInfo ctor goes away
[00:40:51] <cmr> I can!
[00:40:52] *** Quits: gandi (zbraniecki@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: My lid went down)
[00:41:00] <cmr> Sorry :(
[00:41:09] <strcat> yay it passed
[00:41:35] <olsonjeffery> cmr: and as for the squashing, yes. its yucky.
[00:41:52] <olsonjeffery> i was serious really freakin' sick of the gnarly rebases i dealt with during all of the homingio work. that was a convenience for me.
[00:41:58] <cmr> yeah
[00:43:59] <olsonjeffery> but i digress. feedback is always welcome.
[00:44:41] <brson> olsonjeffery: i would have like to make all the tests in sched.rs not rely on libuv
[00:44:52] *** Joins: vadimcn (chatzilla@A2267643.76F9E272.DA40C4B3.IP)
[00:45:49] <brson> olsonjeffery: for a BasicEventLoop i would expose the 'signal' part of the C++ 'lock_and_signal' type, which is just a mutex + condition variable, and use that for simulating the libuv async handles
[00:46:33] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[00:46:56] *** Quits: lazyden (lazyden@47A36AC9.35CBBBD0.F246D1AF.IP) (Quit: lazyden)
[00:47:36] *** Quits: itdaniher (it@moz-6C3ABA7E.bstnma.fios.verizon.net) (Ping timeout)
[00:47:39] *** Joins: DAddYE_ (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[00:48:13] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[00:49:01] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[00:49:19] *** Quits: DAddYE_ (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[00:50:02] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[00:50:09] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Quit: Jesse)
[00:50:49] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[00:50:49] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/bMociA
[00:50:49] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[00:51:01] <engla> acrichto: I've incorporated your suggestion. Thanks for reviewing!
[00:51:11] <acrichto> engla: cool, will look at in a few
[00:54:36] *** Joins: yardena (yardena@moz-A95F12B1.members.linode.com)
[00:54:49] *** Parts: yardena (yardena@moz-A95F12B1.members.linode.com) ()
[00:55:48] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[00:55:48] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/UOJ7mQ
[00:55:48] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[00:55:49] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[00:55:49] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/qQCE-g
[00:55:49] <ghrust> 13rust/06auto 149ea295b 15Corey Richardson: extra::json: use a different encoding for enums....
[00:55:49] <ghrust> 13rust/06auto 14bb4d4d7 15Corey Richardson: Fix hardcoded string in libsyntax
[00:55:50] <ghrust> 13rust/06auto 14d0e0c33 15Corey Richardson: Update syntax test
[00:55:51] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[00:55:56] <dandy> anybody here NOT using make?
[00:56:00] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[00:56:18] <strcat> dandy: hm?
[00:56:27] <mcpherrin> dandy: not using make for what?  I'm currently using IRC, not make ;)
[00:56:42] <dandy> I'm on windows so make isn't really a good tool for me
[00:57:01] <strcat> dandy: you don't need make for pure rust projects
[00:57:03] <dandy> I don't want to just use rake or something though, I would rather pick something that others are using
[00:57:12] <dandy> it sure makes it easier to use a build tool
[00:57:34] *** Joins: lazyden (lazyden@47A36AC9.35CBBBD0.F246D1AF.IP)
[00:57:39] <bjz> dandy: I don't use make for my projects
[00:57:54] <bjz> dandy: ie. my rust ones
[00:57:59] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Quit: leaving)
[00:58:10] <dandy> you just do rustc with arguments?
[00:58:21] <bjz> dandy: no, rustpkg
[00:58:40] * cmr writes build.sh scripts that call rustc directly when rustpkg doesn't suffice
[00:58:41] <bjz> dandy: still needs work, but its usable
[00:58:44] <dandy> uhhh... time to go read up on that then
[00:58:47] <strcat> dandy: rustc main.rs will scale up to any number of modules
[00:58:49] *** Quits: lkuper_ (lkuper@moz-D862222C.dhcp-bl.indiana.edu) (Ping timeout)
[00:58:57] <strcat> rustpkg lets you handle more than one crate/binary
[00:59:06] <strcat> or more complex needs
[00:59:24] *** Joins: lazyden_ (lazyden@47A36AC9.35CBBBD0.F246D1AF.IP)
[00:59:25] <strcat> rust has the linking information in the source files
[00:59:34] *** Quits: lazyden (lazyden@47A36AC9.35CBBBD0.F246D1AF.IP) (Connection reset by peer)
[00:59:34] *** lazyden_ is now known as lazyden
[00:59:38] <acrichto> strcat: sret landed!
[00:59:44] <strcat> acrichto: yep :)
[00:59:49] <acrichto> a bit late to the party, but nice!
[01:00:39] <strcat> acrichto: http://huonw.github.io/isrustfastyet/buildbot/ strange combination of drops/spikes
[01:00:42] <strcat> :s
[01:00:47] <strcat> hopefully the increases are just noise
[01:00:59] <acrichto> strcat: the snapshot builders were running while your request was running
[01:01:03] <strcat> ah
[01:01:08] <acrichto> the most recent spike was llvm
[01:01:16] *** Joins: dave1629 (dave@moz-F7321B31.public.wayport.net)
[01:01:25] <acrichto> I see a tiny bump, but that's rustdoc_ng
[01:01:30] <acrichto> and expected b/c we're just compiling more code
[01:01:41] <bjz> tjc: what does .rust do?
[01:01:57] <strcat> bjz: it's where it stores your dependencies, etc.
[01:02:03] <bjz> tjc: I find I have to rm it to force a rebuild
[01:02:16] <strcat> bjz: I guess that's a bug
[01:02:29] <bjz> otherwise it thinks everything's 'fresh'
[01:02:36] <tjc> bjz: .rust/rustpkg_db.json stores the dependency cache
[01:02:41] <tjc> the goal is for you to never have to remove it, so -
[01:02:46] <tjc> I'm curious why you need to force a rebuild
[01:02:53] *** Joins: Ralith (ralith@moz-A7071297.customer.broadstripe.net)
[01:03:47] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[01:04:07] <bjz> tjc: like when I update a dependant workspace
[01:04:14] *** Quits: sigma (sigma@51C589B3.EF2694B5.DFAC6AA7.IP) (Ping timeout)
[01:04:16] <tjc> bjz: ah ok. Yeah, that's a known bug
[01:04:22] *** Quits: doomlord__ (servitor@moz-2BA2D1DA.range86-184.btcentralplus.com) (Ping timeout)
[01:04:39] <tjc> as you know, because you reported it :-)
[01:04:40] *** Quits: n00b6502 (kwr5y54@moz-2BA2D1DA.range86-184.btcentralplus.com) (Ping timeout)
[01:05:03] *** Joins: maik (maik@moz-E348F31D.dip0.t-ipconnect.de)
[01:05:40] *** Joins: n00b6502 (kwr5y54@moz-2BA2D1DA.range86-184.btcentralplus.com)
[01:06:51] *** Joins: doomlord__ (servitor@moz-2BA2D1DA.range86-184.btcentralplus.com)
[01:06:54] <bjz> oh yeah
[01:07:04] <bjz> tjc: sorry, forgot -_-
[01:07:16] * bjz feels silly
[01:07:22] <tjc> heh
[01:07:29] *** Joins: vadimcn_ (chatzilla@7C4E54EF.6997D204.DA40C4B3.IP)
[01:07:57] * bjz has been know to forget what bugs he has submitted
[01:08:02] <bjz> *known
[01:08:07] *** Quits: vadimcn (chatzilla@A2267643.76F9E272.DA40C4B3.IP) (Ping timeout)
[01:08:11] *** vadimcn_ is now known as vadimcn
[01:09:00] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[01:09:00] <brson> cmr: twir is a godsend for compiling release notes
[01:11:12] *** Quits: Diamond (dick@moz-9A33D9AB.cm.sunflower.com) (Ping timeout)
[01:14:27] <mark_edward> i think i've got a minimal test case for this ICE i've been encountering. related to a more complicated example in alibrary i've been working on
[01:14:42] <mark_edward> found here: https://gist.github.com/MarkJr94/6588904 does anyone know what's going on?
[01:14:47] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[01:16:08] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Ping timeout)
[01:16:31] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[01:17:56] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[01:18:16] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[01:20:13] <mark_edward> brson: pongo
[01:21:38] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Ping timeout)
[01:21:46] *** Joins: sigma (sigma@moz-43189A53.range109-151.btcentralplus.com)
[01:22:31] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[01:23:44] *** Joins: a_m0d|home (a_m0d@moz-F3856C20.acanac.net)
[01:23:48] <mark_edward> bjz: ping
[01:24:06] <bjz> mark_edward: poingy
[01:24:06] *** Joins: vadimcn_ (chatzilla@F6F0E375.5334B0D2.DA40C4B3.IP)
[01:24:14] *** Quits: vadimcn (chatzilla@7C4E54EF.6997D204.DA40C4B3.IP) (Ping timeout)
[01:24:18] *** vadimcn_ is now known as vadimcn
[01:24:49] <mark_edward> do you kow what's going on here? https://gist.github.com/MarkJr94/6588904
[01:25:11] *** Joins: hoverbear (andrew@moz-86FCBF4B.gv.shawcable.net)
[01:25:24] <mark_edward> bjz: if i remove the drop impl i don't get the ICE i think
[01:26:40] <bjz> heh, wut
[01:26:44] <bjz> if you get rid of the unsafe ptrs?
[01:26:53] <bjz> what happens?
[01:27:04] <mark_edward> hm... i'll try no unsafe ptrs with the drop impl and get back to you
[01:27:06] *** Joins: vadimcn_ (chatzilla@A2267643.76F9E272.DA40C4B3.IP)
[01:27:14] *** Quits: vadimcn (chatzilla@F6F0E375.5334B0D2.DA40C4B3.IP) (Ping timeout)
[01:27:18] *** vadimcn_ is now known as vadimcn
[01:28:15] <mark_edward> bjz: CHANGED it to INTS ANd kept the Drop impl, still got ICE. so i'm pretty sure it's the Drop impl
[01:29:24] <mark_edward> bjz: also if i keep the drop impl, but remove the static variable, it's fine (as expected) so i think the issue is "static variable with Drop impl"
[01:29:31] <bjz> mark_edward: what happens if you get rid of the casts in the static decl?
[01:29:52] <bjz> pretty sure it'll make no diff
[01:30:21] <bjz> but yeah - looks like a bug. or something that needs an error message.
[01:30:32] <bjz> check if there's an issue or make one
[01:30:36] <mark_edward> bjz: yeah https://gist.github.com/MarkJr94/6588904 this still gives ICE
[01:31:06] <mark_edward> do you know if it's supposed to impossible to have a static variable with the Drop trait and all that's missing is an error, or what?
[01:32:48] <engla> well the assert points out which line it is mark_edward 
[01:32:54] *** Quits: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net) (Quit: eholk)
[01:33:16] <brson> mark_edward: pong
[01:33:20] <engla> since it's a mismatch of assert_eq!(vals.len(), st.fields.len());  with 2 == 3, I'll have to assume it's the drop flag yeah
[01:33:47] <mark_edward> brson: the above decision with bjz is what i wanted to ask you about
[01:33:52] <bjz> mark_edward: sounds like it should be an error
[01:33:57] <mark_edward> engla: thanks for the information
[01:34:04] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Quit: Leaving)
[01:34:09] <strcat> acrichto: well, I guess when cmr's PR lands we'll see if there was really a drop in the time ;p
[01:34:11] <bjz> mark_edward: what would it mean to drop a static?
[01:34:30] <mark_edward> when the program ends drop it? whatever C++ does i think
[01:34:41] <acrichto> strcat: the snapshot builders are still running, so if there's not a drop then I don't think that it's too bad
[01:34:55] <strcat> acrichto: ah
[01:35:30] <strcat> acrichto: are they really running? they aren't show as pending here http://buildbot.rust-lang.org/console?branch=snap-stage3&refresh=15
[01:35:46] <strcat> maybe they just finished
[01:36:00] <mark_edward> bjz: staatic variables can have destructors in C++ right?
[01:37:09] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[01:37:34] <strcat> putting things with destructors in statics should likely be forbidden
[01:37:57] <strcat> there was just a conversation about why we don't have (won't have) init functions for modules
[01:38:22] *** Quits: slack1256 (slack@moz-F5B8C14B.baf.movistar.cl) (Quit: Konversation terminated!)
[01:38:49] <mark_edward> strcat: right, i see, so it's a design decision not an error. should i still file a bug? there should at least be an error message right, instedad of ICE?
[01:38:58] <strcat> yes
[01:39:12] <strcat> the error message is likely just the lack of an explicit reported error there
[01:39:41] *** Quits: Jesin (Jessin_@moz-679F0D97.cc.lehigh.edu) (Ping timeout)
[01:40:30] *** Joins: Jesin (Jessin_@moz-679F0D97.cc.lehigh.edu)
[01:40:36] <mark_edward> strcat: interestingly, if i remove all members from the struct, i can still have a static variable with the Drop trait. that's a separate but related issue, right?
[01:41:02] <strcat> same issue
[01:41:29] <mark_edward> okay, so i should just file 1 issue then? im off to it!
[01:42:09] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[01:42:12] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[01:43:49] <acrichto> strcat: they were all retried
[01:43:54] <acrichto> the builds, so that may be why they're not showing up
[01:43:58] <strcat> ah
[01:46:39] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[01:46:44] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[01:46:49] *** Joins: m_kato (m_kato@moz-C286AD9A.bitcat.net)
[01:46:51] *** Quits: anshin (anshin@CD85F10D.F21429E2.354459FA.IP) (Quit: leaving)
[01:46:55] *** Joins: anshin (anshin@CD85F10D.F21429E2.354459FA.IP)
[01:48:09] *** Joins: steveklabnik (steveklabn@moz-5EF6C37C.socal.res.rr.com)
[01:49:07] *** Joins: pachuco (Mibbit@774163F0.9F696E54.67669A9A.IP)
[01:49:30] *** Quits: pachuco (Mibbit@774163F0.9F696E54.67669A9A.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[01:49:42] *** Quits: anshin (anshin@CD85F10D.F21429E2.354459FA.IP) (Quit: leaving)
[01:49:49] *** Joins: anshin (anshin@CD85F10D.F21429E2.354459FA.IP)
[01:50:32] <steveklabnik> tjc: just pushed an update to the rustpkg tutorial that addresses the review stuff
[01:50:39] <tjc> steveklabnik: great, will take a look
[01:51:51] <steveklabnik> :)
[01:53:21] <mark_edward> strcat: is this issue: https://github.com/mozilla/rust/issues/9243 sufficiently clear? do i need a better explanation?
[01:53:36] <strcat> acrichto: https://github.com/mozilla/rust/pull/9244 r?
[01:54:10] <strcat> mark_edward: yes, that's good
[01:54:27] <mark_edward> cool!
[01:54:31] <jesseray> If I write [#cfg(unix)]; let x = ~"Unix Build"; let y = ~"Unrelated"; ... would the conditional compilation apply to the variable 'y' also?
[01:56:08] *** Joins: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net)
[01:56:08] <tjc> jesseray: I don't think you can actually attach #cfg attributes to statements; only to items
[01:56:11] *** Quits: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu) (Ping timeout)
[01:56:11] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[01:56:24] <tjc> items are: functions, type definitions, trait definitions, static declarations, a few other things
[01:56:24] <jesseray> k
[01:56:53] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[01:56:56] *** Quits: eholk (eholk@moz-F70D5031.hsd1.in.comcast.net) (Quit: eholk)
[01:56:59] <Jesse> how do i find the "current" documentation for a thing?
[01:57:23] <tjc> Jesse: what kind of thing?
[01:57:27] <Jesse> googling often finds me e.g. http://static.rust-lang.org/doc/core/local_data.html vs http://static.rust-lang.org/doc/std/local_data.htmlâ€Ž
[01:58:12] <jesseray> Rust Homepage -> Left Sidebar -> Beside "Trunk"
[01:58:46] <brson> I'm going to try to eliminate those stale docs this week
[01:58:55] <Jesse> brson: \o/
[01:59:08] <Jesse> brson: please make the URLs redirect if it's not too hard
[01:59:26] <strcat> I think that's probably too much of a mess
[01:59:36] <strcat> the doc builder really just needs to clear all the old ones
[01:59:43] <strcat> like, what happens if a module is removed
[01:59:44] <strcat> or moved
[01:59:56] <steveklabnik> yeah
[02:00:16] <strcat> (atm they stay behind unless they are overwritten)
[02:00:34] <Jesse> or moved and then a new module with the same name is added
[02:00:37] <steveklabnik> lol that literally just happened to me
[02:00:37] *** Joins: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[02:00:46] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[02:00:48] <steveklabnik> what happened to int::from_str
[02:00:58] <strcat> steveklabnik: removed, FromStr is a trait and from_str is in prelude
[02:01:02] <steveklabnik> word
[02:01:07] <Jesse> but it would be nice if the common cases resulted in redirects rather than broken URLs and lost googlejuice
[02:01:17] <Eridius> r? https://github.com/mozilla/rust/pull/9245
[02:01:22] <engla> steveklabnik: it's now  from_str::<int>()
[02:01:23] <tjc> not our googlejuice!
[02:01:27] <strcat> Jesse: duplicate content is the biggest issue
[02:02:01] <steveklabnik> engla: thanks!
[02:02:21] <engla> steveklabnik: I removed int::from_str, maybe "no thanks"? ;-)
[02:02:53] <steveklabnik> ha!
[02:02:59] <steveklabnik> error: unresolved name `int`. Did you mean `map`?
[02:02:59] <steveklabnik> src/evict/issue.rs:124                     from_str<int>(versionOpt.unwrap()).unwrap()
[02:03:05] <steveklabnik> oh
[02:03:05] *** Quits: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[02:03:06] <steveklabnik> the ::
[02:04:00] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[02:04:05] * brson dinner
[02:04:18] <strcat> steveklabnik: in expressions, <> always has :: to avoid being parsed as < (what it did there)
[02:04:36] <steveklabnik> makes sense.
[02:04:49] <steveklabnik> just read too fast
[02:04:53] <strcat> C++ allows it because it uses type checking to finish parsing ;p
[02:05:27] <Jesse> could rustc detect when it "looks like you forgot a ::" ?
[02:05:33] <Jesse> and emit a better error message
[02:05:40] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[02:05:48] <jesseray> rusti: from_str::<int>("100");
[02:05:52] -rusti- ()
[02:06:08] *** Quits: a_m0d|home (a_m0d@moz-F3856C20.acanac.net) (Quit: Leaving.)
[02:06:42] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Quit: pcwalton)
[02:06:42] <strcat> Jesse: I don't think so
[02:06:48] *** Joins: cmr_ (Mibbit@7F79C235.9FD16973.7923FEFE.IP)
[02:07:50] <cmr_> Hey all; power outage on campus. Something operated by national grid went down and a material containment in the materials lab seems to have failed. I won't be around for probably ~1-2 days.
[02:08:04] <Jesse> strcat: like if the things to the left and right of a "<" are both type names?
[02:08:04] *** Quits: cmr_ (Mibbit@7F79C235.9FD16973.7923FEFE.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[02:08:34] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[02:08:34] *** ChanServ sets mode: +ao pcwalton pcwalton
[02:08:44] <Jesse> cmr: O_o
[02:09:03] *** Quits: RMF (RMF@78B6AE45.A4D51E9D.6119BA41.IP) (Quit: Textual IRC Client: www.textualapp.com)
[02:09:18] <tjc> cmr: That sounds worrisome
[02:09:34] <andrew-d> cmr: 0_0
[02:09:35] <pnkfelix> strcat: I've been idly thinking about that myself (there's some bug that was part of triage).  How often do you see "Exp1 < Exp2 > Exp2" ?  (Apart from the unix shell)
[02:09:49] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[02:10:19] <pnkfelix> cmr: (yikes)
[02:10:28] <andrew-d> cmr: If you don't mind my asking, what campus?
[02:10:31] <strcat> pnkfelix: it's valid rust
[02:10:36] <strcat> afaict
[02:10:38] <strcat> rusti: 2 > 3 < true
[02:10:39] -rusti- true
[02:10:45] <strcat> rusti: 2 < 3 > true
[02:10:46] -rusti- false
[02:10:51] *** Quits: tefter (tefter@B5D119DC.B856A0A1.73804765.IP) (Ping timeout)
[02:10:57] <pnkfelix> strcat: sure, that wasn't exactly my point
[02:10:58] <mcpherrin> equalities on booleans seems weird
[02:11:04] *** Joins: tefter (tefter@B5D119DC.B856A0A1.73804765.IP)
[02:11:05] <strcat> rusti: 2 << 3 >> 3
[02:11:06] -rusti- 2
[02:11:14] <tjc> pnkfelix: I never see it, and it wouldn't occur to me to write it
[02:11:57] <tjc> though I may be a misguided since my general tendency is to parenthesize the heck out of everything so that I don't have to remember operator precedence :-)
[02:12:13] <strcat> mcpherrin: ordering you mean? it's very useful for deriving orderings
[02:12:29] <strcat> haskell does it too for that reason, since it does make sense semantically
[02:12:38] *** Quits: maik (maik@moz-E348F31D.dip0.t-ipconnect.de) (Ping timeout)
[02:12:46] <jesseray> tjc: I do the same thing. The heavy use of operators by Haskell programmers makes me want to tear out hair =P
[02:13:08] <jesseray> Theirs, not mine ;)
[02:13:09] <tjc> jesseray: Heh, yeah, when I wrote Haskell code I hardly ever defined my own operators, and reading others' code where they did generally confused me
[02:13:19] <tjc> except in a very few places like Parsec where it was well-established
[02:14:16] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[02:14:22] *** Quits: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net) (Ping timeout)
[02:14:26] <strcat> tjc: have you seen the haskell-lens ones?
[02:14:37] <tjc> strcat: Nope, haven't seen it
[02:14:49] <Eridius> hrm, is there a reason the byte-swapping functions are in unstable/intrinsics.rs? (and there's not one for int/uint)
[02:14:52] *** Joins: SingingBoyo (brandon@DAC9C672.CE76D40F.4F048BDC.IP)
[02:14:56] <strcat> tjc: http://hackage.haskell.org/packages/archive/lens/3.8.5/doc/html/Control-Lens-Operators.html ridiculous number of them ;p
[02:15:04] * strcat thinks there are ~100
[02:15:06] <jxv> rust's mascot = salad fingers?
[02:15:14] *** Quits: vadimcn (chatzilla@A2267643.76F9E272.DA40C4B3.IP) (Ping timeout)
[02:15:23] <strcat> looks like gobbledygook to me
[02:15:25] <Jesse> andrew-d: googlestalking reveals that cmr is a student at Clarkson University
[02:15:25] *** Joins: vadimcn (chatzilla@7C4E54EF.6997D204.DA40C4B3.IP)
[02:16:02] <tjc> wow
[02:16:32] <jxv> I like those monads, strcat
[02:17:53] *** Joins: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net)
[02:19:08] <Eridius> bah, the unstable/intrinsics byte-swapping functions are also signed-only
[02:21:09] *** Quits: robn (robn@moz-76B0302C.static.internode.on.net) (Quit: Coyote finally caught me)
[02:21:12] *** Joins: robn (robn@moz-76B0302C.static.internode.on.net)
[02:21:37] <Eridius> rusti: std::unstable::intrinsics::to_be32(54i32)
[02:21:38] -rusti- error: internal compiler error: unexpected failure
[02:21:38] -rusti- note: the compiler hit an unexpected failure path. this is a bug
[02:21:38] -rusti- note: try running with RUST_LOG=rustc=1 to get further details and report the results to github.com/mozilla/rust/issues
[02:21:38] -rusti- 905969664i32
[02:21:43] <Eridius> wow
[02:21:58] <Eridius> it hit an ICE and it spit out a result at the same time? That's impressive
[02:21:58] <strcat> Eridius: it's from rustc -v
[02:22:06] <strcat> Eridius: I run it to do this
[02:22:08] <strcat> rusti: version
[02:22:09] -rusti- error: internal compiler error: unexpected failure
[02:22:09] -rusti- note: the compiler hit an unexpected failure path. this is a bug
[02:22:09] -rusti- note: try running with RUST_LOG=rustc=1 to get further details and report the results to github.com/mozilla/rust/issues
[02:22:09] -rusti- "rustc 0.8-pre (0ec4d34 2013-09-16 11:30:42 -0700)"
[02:22:13] <strcat> heh
[02:22:15] <strcat> rusti: version
[02:22:16] -rusti- "rustc 0.8-pre (0ec4d34 2013-09-16 11:30:42 -0700)"
[02:22:23] <strcat> Eridius: anyway rustc -v is buggy
[02:22:29] <strcat> I know that's ridiculous :]
[02:22:32] <Eridius> o_O
[02:23:23] *** Joins: RMF (RMF@78B6AE45.A4D51E9D.6119BA41.IP)
[02:23:31] <Eridius> so why is byte-swapping in intrinsics?
[02:23:45] <pcwalton> it's an LLVM intrinsic
[02:23:54] <engla> Eridius: it should be there, but it lacks wrapper
[02:23:55] <Eridius> I get that byte-swapping uses an intrinsic, but the actual to_le32(), etc are rust functions that wrap the bswap32() intrinsic
[02:24:45] <Eridius> I also note that the wrapper functions aren't marked #[inline]
[02:25:15] <SingingBoyo> steveklabnik:  argh.  PRs everywhere as I'm working on making evict more rustic.
[02:25:21] <SingingBoyo> steveklabnik:  much appreciated :)
[02:26:26] *** Quits: vadimcn (chatzilla@7C4E54EF.6997D204.DA40C4B3.IP) (Ping timeout)
[02:27:39] <steveklabnik> SingingBoyo: any time!
[02:27:47] <steveklabnik> are you doing the method name changes now?
[02:27:49] *** Joins: ross (ross@moz-5EA04060.br.br.cox.net)
[02:27:54] <steveklabnik> well, not methods
[02:27:56] <steveklabnik> function names
[02:28:22] *** Quits: tefter (tefter@B5D119DC.B856A0A1.73804765.IP) (Ping timeout)
[02:30:07] <steveklabnik> SingingBoyo: also, evict list in the evict repo shows... nothing?
[02:30:59] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[02:30:59] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/qQCE-g
[02:30:59] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[02:31:19] <SingingBoyo> steveklabnik: whoops, thats a doc failure on my part.  try evict list --committed or evict sync and then evict list
[02:31:39] * SingingBoyo adds another issue
[02:31:59] <steveklabnik> ahhh nice
[02:32:03] <steveklabnik> makes sense
[02:32:10] <steveklabnik> what do you think about the whole 'one issue per file' thing?
[02:33:00] *** Joins: Shaladdle (Shaladdle@moz-424BC304.hsd1.pa.comcast.net)
[02:34:41] <SingingBoyo> steveklabnik: I've thought about it, but it would mean an insignificant rework of almost everything to make the most of it.
[02:34:48] <steveklabnik> gotcha
[02:35:11] <steveklabnik> i dont know how much i'll actually USE evict, just checking it out, so i have no strong opinon
[02:35:24] <steveklabnik> i think it'd be a bit easier on vcs, but i have no data, only speculation
[02:35:52] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[02:35:52] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/hJDv6w
[02:35:52] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[02:35:52] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[02:35:53] <ghrust> 01[13rust01] 15bors pushed 8 new commits to 06auto: 02http://git.io/kl4TOA
[02:35:53] <ghrust> 13rust/06auto 142017cc3 15blake2-ppc: std::num: Add uint::next_power_of_two_opt...
[02:35:53] <ghrust> 13rust/06auto 148d488f3 15blake2-ppc: std::vec: Fix hazards with uint overflows in unsafe code...
[02:35:53] <ghrust> 13rust/06auto 148fce135 15blake2-ppc: std::vec: Add function vec::bytes::push_bytes...
[02:35:55] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[02:36:12] <SingingBoyo> steveklabnik: I feel like if I want any kind of widespread adoption it'd mean at least integrating somehow with existing bug-trackers
[02:36:34] * steveklabnik nods
[02:37:05] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[02:37:08] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: Places to go, people to annoy)
[02:37:17] <SingingBoyo> steveklabnik: I feel like I may end up testing rust-http with github sometime soon hehe
[02:37:28] <steveklabnik> :)
[02:38:06] * SingingBoyo wishes he didn't have school so he had more time for rust/evict
[02:41:27] <Eridius> rusti: "fÃ¼".to_ascii()
[02:41:29] -rusti- error: internal compiler error: unexpected failure
[02:41:29] -rusti- note: the compiler hit an unexpected failure path. this is a bug
[02:41:29] -rusti- note: try running with RUST_LOG=rustc=1 to get further details and report the results to github.com/mozilla/rust/issues
[02:41:29] -rusti- task <unnamed> failed at 'assertion failed: self.is_ascii()', /build/rust-git/src/rust/src/libstd/str/ascii.rs:104
[02:41:29] -rusti- application terminated with error code 101
[02:41:34] <steveklabnik> heh
[02:42:04] <strcat> rusti: "fÃ¼".to_ascii()
[02:42:05] -rusti- task <unnamed> failed at 'assertion failed: self.is_ascii()', /build/rust-git/src/rust/src/libstd/str/ascii.rs:104
[02:42:05] -rusti- application terminated with error code 101
[02:42:15] <strcat> that rustc -v ICE is annoying
[02:42:23] <SingingBoyo> rusti: "fü"
[02:42:27] -rusti- pastebinned 7 lines of output: http://ix.io/86N
[02:42:46] <bjz_> ?
[02:42:51] <strcat> it's a bug
[02:43:34] <SingingBoyo> apparently rusti doesn't like non-ascii chars very much
[02:43:56] <strcat> SingingBoyo: it's fine with that
[02:44:01] <strcat> it has to be valid UTF-8 though
[02:44:28] <strcat> rusti: "â˜ƒ"
[02:44:29] -rusti- "\u2603"
[02:44:34] <SingingBoyo> so what, ü isn't valid UTF-8?  guess I need to brush up on my character encodings...
[02:44:42] <Eridius> rusti: let mut x = 0u32; x |= 5u32; x
[02:44:43] -rusti- 5u32
[02:45:30] *** Quits: kimundi (kimundi@moz-845FFCCA.dip0.t-ipconnect.de) (Ping timeout)
[02:45:36] *** Joins: alisdair (textual@FAD454DC.CDDF2711.C4CBE0CB.IP)
[02:45:53] <mcpherrin> SingingBoyo: certainly the pair of utf-8 bytes my terminal renders for Ã¼ is valid
[02:46:04] <mcpherrin> dunno if it's getting converted along the way
[02:46:08] <mcpherrin> rusti: "Ã¼"
[02:46:09] -rusti- "\xfc"
[02:46:14] <mcpherrin> rusti: "fÃ¼"
[02:46:16] -rusti- "f\xfc"
[02:46:32] <strcat> rusti: println("Ã¼")
[02:46:33] -rusti- Ã¼
[02:46:33] -rusti- ()
[02:47:20] <pnkfelix> rusti: "f?"
[02:47:21] -rusti- "f?"
[02:47:44] <SingingBoyo> rusti: "fü"
[02:47:45] -rusti- error: internal compiler error: unexpected failure
[02:47:45] -rusti- note: the compiler hit an unexpected failure path. this is a bug
[02:47:45] -rusti- note: try running with RUST_LOG=rustc=1 to get further details and report the results to github.com/mozilla/rust/issues
[02:47:45] -rusti- application terminated with error code 101
[02:47:57] <SingingBoyo> huh, maybe xchat screws it up on me.
[02:48:02] <SingingBoyo> silly IRC client is silly
[02:48:07] *** Quits: riley (riley@8BA43816.9AA11D69.65DDFA89.IP) (Client exited)
[02:48:11] <strcat> whatever SingingBoyo is writing isn't valid UTF-8 and gets turned to a replacement character
[02:48:22] <strcat> which some irc clients will display as a question mark
[02:48:24] <strcat> but it's not
[02:48:41] <pnkfelix> strcat: ah that explains that mystery.
[02:48:52] <mark_edward> if an expression gets passed to a macro, is it guaranteed to have been evaluated already?
[02:49:05] *** Joins: kimundi (kimundi@moz-19BC658F.dip0.t-ipconnect.de)
[02:49:09] <strcat> pnkfelix: http://ix.io/86O a browser should show something that's obviously not a question mark for that
[02:49:18] <strcat> irc clients are often weird ;p
[02:49:56] <SingingBoyo> yeah no kidding.  it shows up fine for me, but apparently doesn't stay that way when I copy-paste it
[02:50:38] <pnkfelix> I see, this explains mcpherrin's interactions
[02:50:41] <strcat> my terminal shows it as the replacement character too, but not inside weechat since I think ncurses mangles it to a question mark
[02:50:53] <strcat> ncurses hates unicode
[02:51:12] <strcat> it's fine with a subset of ucs4 characters.... mangles things like combining characters
[02:51:13] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[02:52:02] <Luqman> SingingBoyo: something somewhere doesn't seem to be using utf-8 then
[02:52:15] <strcat> SingingBoyo: use hexchat ;p
[02:52:21] <strcat> xchat is pretty much dead
[02:52:30] <strcat> (or any other client, but hexchat is a lively fork of xchat)
[02:52:49] <strcat> apparently xchat defaults to latin1 or something like that...
[02:52:51] <heftig> rusti: "fÃ¼"
[02:52:51] -rusti- "f\xfc"
[02:52:59] <heftig> wat
[02:53:04] *** Quits: alisdair (textual@FAD454DC.CDDF2711.C4CBE0CB.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[02:53:06] <strcat> heftig: just the repr code
[02:53:16] <strcat> don't know why it does it that way
[02:53:20] *** kimundi is now known as zz_kimundi
[02:53:34] <strcat> rusti: println("fÃ¼")
[02:53:34] -rusti- fÃ¼
[02:53:35] -rusti- ()
[02:53:53] <SingingBoyo> strcat: yeah, it just happened to be the one I'd figured out easily ages ago.  really should switch
[02:53:56] <heftig> strcat: \xfc is iso-8859-1, not utf-8
[02:54:38] <strcat> heftig: the \xfc refers to a code point
[02:54:52] <strcat> there's a bug open about it
[02:55:23] <mark_edward> strcat: if an $x:expr is passed to a macro, and the evaluation of $x (say a function call) produces a side effect, will that side effect have taken already in the macro body, or do i need to do something liek `let _ = $x; in the macro body?
[02:56:17] <strcat> mark_edward: macros are a parse-time thing, so no
[02:56:31] <mark_edward> so i need to evaluate it in the body, got it
[02:58:23] *** Joins: vadimcn (chatzilla@A2267643.76F9E272.DA40C4B3.IP)
[02:58:48] <cmr> Jesse: nice sleuthing :p
[02:58:56] *** Joins: heftig2 (heftig2@moz-C1BA554.dip0.t-ipconnect.de)
[02:59:12] <heftig> "fÃ¼"
[02:59:17] <Jesse> cmr: so part of campus was evacuated or something?
[02:59:40] <heftig> SingingBoyo: try saying fÃ¼ again, please
[02:59:47] <mark_edward> attrs on macros are not yet supported :-(
[02:59:48] <strcat> a radioactive beast escaped from the laboratory and took out the power grid, obviously
[02:59:57] <SingingBoyo> fü
[03:00:04] <strcat> SingingBoyo: still wrong ;p
[03:00:12] * SingingBoyo is not surprised
[03:00:20] *** zz_kimundi is now known as kimundi
[03:00:40] <heftig> SingingBoyo: you're sending something else that's not utf-8, probably iso-8859-1 or 15 or windows 1252
[03:01:14] <SingingBoyo> heftig: yeah, we figured it's an XChat problem.  Finally the push I needed to go find something different
[03:01:19] <hoverbear> How can I make a correction in the docs?
[03:01:28] <steveklabnik> SingingBoyo: did you say you're working on the style stuff for evict?
[03:01:30] *** Quits: heftig2 (heftig2@moz-C1BA554.dip0.t-ipconnect.de) (Quit: heftig2)
[03:01:30] <steveklabnik> hoverbear: which docs?
[03:01:42] <hoverbear> http://static.rust-lang.org/doc/rust.html#do-expressions
[03:02:00] <steveklabnik> so that's in doc/rust.md
[03:02:03] <steveklabnik> in the repo
[03:02:04] <SingingBoyo> steveklabnik: working on moving to snake_case, yeah.
[03:02:05] <mark_edward> strcat: are debug!() statements guaranteed to be completely compiled out? even if say one argument is an expression containing  afnction ca;ll that may have side effects?
[03:02:10] <hoverbear> steveklabnik: Thanks.
[03:02:18] <steveklabnik> SingingBoyo: word, I won't do that then ;)
[03:02:19] <strcat> mark_edward: yes
[03:02:23] <strcat> mark_edward: I think so
[03:02:26] <mark_edward> cool
[03:02:31] <strcat> mark_edward: double-check though
[03:02:37] <strcat> I don't know where it evaluates the expr you pass
[03:02:42] <steveklabnik> hoverbear: any time. i'm trying to actively improve docs, please let me know if there's anyhting that should be fixed that you don't feel like doing
[03:02:44] <mark_edward> alright, thanks
[03:03:02] <sfackler> they expand to somethihng like if false { println(fmt!(stuff)) } iirc
[03:03:07] <sfackler> if you don't pass --cfg debug
[03:04:24] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[03:05:02] <hoverbear> steveklabnik: Line above my linked anchor, should it be "A loop expression is only permitted in the body of a loop." ?
[03:06:04] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[03:06:19] <steveklabnik> should be continue instead of loop
[03:06:20] <steveklabnik> the first one
[03:08:21] <hoverbear> steveklabnik: Ok, PR on the way
[03:08:24] <steveklabnik> awesome
[03:08:29] <steveklabnik> thanks!
[03:08:47] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Ping timeout)
[03:08:59] <aatch> mark_edward, debug statements are completely compiled out. The debug macro expands to `if cfg!(debug) { __log(4, fmt!("%?", <expression>) }`. constant conditions are compiled out.
[03:09:07] *** Quits: bjz_ (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[03:09:10] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[03:09:27] <mark_edward> aatch: thank you!
[03:09:49] <aatch> So if true { <expr> }  is compiled to <expr> and if false { <expr> } is completely compiled out,
[03:09:58] <aatch> this is done in rustc itself, not llvm.
[03:10:27] <aatch> I'm pretty sure dbaupp worked on that.
[03:10:40] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[03:11:10] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[03:11:10] *** ChanServ sets mode: +ao brson brson
[03:12:54] <cmr> Jesse: yeah, one of the academic buildings
[03:13:15] <cmr> I don't think anything actually happened, but there was a "strong smell of sulfur"
[03:14:26] <cmr> power's back up now, so whatever it was the power company fixed it quick
[03:16:23] *** Quits: aatch (aatch@moz-B437F499.pocketrent.com) (Quit: Leaving)
[03:16:29] *** Quits: SingingBoyo (brandon@DAC9C672.CE76D40F.4F048BDC.IP) (Quit: Leaving)
[03:18:58] *** Joins: aatch (James@moz-B437F499.pocketrent.com)
[03:19:32] *** Joins: SingingBoyo (singingboy@DAC9C672.CE76D40F.4F048BDC.IP)
[03:19:40] <mark_edward> aatch: can you explain this to me then? https://gist.github.com/MarkJr94/6589689
[03:20:17] *** Quits: aatch (James@moz-B437F499.pocketrent.com) (Quit: Leaving)
[03:20:30] <mark_edward> guess not...
[03:20:52] *** Joins: aatch (James@moz-B437F499.pocketrent.com)
[03:22:35] <aatch> mark_edward, huh, looks like my copy of rust was a little out of date. There's also a check for the logging level
[03:23:31] <mark_edward> it seems whether or not you have the RUST_LOG variable set, affects the expression evaluation, which may have side effects. is that the behavior you think should be there?
[03:23:48] <aatch> mark_edward, i'd say yes.
[03:24:10] <sfackler> that seems wrong
[03:24:11] <mark_edward> how come? it seems dangerous in some weird way to me
[03:24:30] <aatch> think of it more like lazy evaluation.
[03:25:30] <cmr> It's exactly what it's supposed to do
[03:25:31] <mark_edward> how is that even possible at runtime btw? im confused... 
[03:25:41] <aatch> mark_edward, there's two parts.
[03:25:45] <cmr> mark_edward: it branches on a global which stores the log level.
[03:25:46] *** Quits: dave1629 (dave@moz-F7321B31.public.wayport.net) (Quit: dave1629)
[03:25:56] <aatch> mark_edward, the compile-time is for debug only.
[03:25:56] <cmr> And then checks the log entries and the crate map for itself.
[03:26:22] *** Joins: mib_69tnfa (Mibbit@F7E2F3F.17A0D1EC.B7830B68.IP)
[03:26:31] <mark_edward> but how does it choose whether or not to evaluate the expression or not at runtime?
[03:26:35] *** Joins: dave1629 (dave@moz-F7321B31.public.wayport.net)
[03:26:56] <cmr> The expression is in the body of where it jumps too after the branch
[03:27:02] <cmr> It's just like an if statement.
[03:27:31] <ercax> hi, is there a function to get the path separator anywhere? I looked in std::os and std::path and didn't see anything.
[03:27:57] <engla> mark_edward: you can see what it expands to with rustc --pretty expanded 
[03:28:38] <mib_69tnfa> Hi all. Could anyone tell me if I can define a function to handle signals (such as sigint) in Rust? It's easy in C, but it seems Rust didn't export such a function in libc.
[03:28:56] <cmr> mib_69tnfa: we don't export it in std::libc because signal handlers are racy and unsafe.
[03:29:12] <cmr> mib_69tnfa: but you can add extern blocks for sigaction yourself, see the FFI tutorial.
[03:29:20] <strcat> I don't think it will work
[03:29:27] <cmr> mib_69tnfa: there's an open issue for libuv signal integration
[03:29:41] <cmr> I don't either, signal handlers to weird stuff to the stack
[03:29:48] <mark_edward> engla: ah it's clear to me now...
[03:29:55] <strcat> signalfd is the modern way to handle signals, but sadly linux only
[03:30:10] <strcat> there are hacks with pselect elsewhere
[03:30:24] <strcat> libuv abstracts it.
[03:31:07] <mib_69tnfa> oh, thanks for your prompt replies
[03:31:57] <mib_69tnfa> strcat: did you mean I couldn't implement it in cmr's way?
[03:32:47] *** Quits: aatch (James@moz-B437F499.pocketrent.com) (Quit: Leaving)
[03:32:56] *** Joins: aatch (James@moz-B437F499.pocketrent.com)
[03:33:20] <mark_edward> is rustc guaranteed to optimize away empty function calls?
[03:33:31] <cmr> mark_edward: as in fn foo() {} ?
[03:34:01] <cmr> I think the only *guaranteed* optimization is trivial dead branch elimination (if true/if false)
[03:34:05] <mark_edward> cmr: more like fn foo(x: &MyType) {}, but yeah
[03:34:06] <strcat> mark_edward: if it's inside the same crate or #[inline] and you enable optimizations, sure
[03:34:06] <cmr> Everything else is up to llvm
[03:34:20] <strcat> cmr: you can consider LLVM's optimization passes to be guarantees though
[03:34:54] <strcat> they're deterministic, and they have test cases preventing a regression on something like that
[03:35:01] <cmr> Ok, nice.
[03:35:45] <mark_edward> so from what you know of LLVM do you think such a thing would always be optimized away? what if evaluating the argument passed had side effects?
[03:35:53] <strcat> to calculate inlining cost, it adds up the cost of the individual instructions
[03:36:13] <strcat> if it's below the set cost and inlining is enabled (--opt-level=2 and above) it will inline it
[03:36:19] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Quit: Leaving...)
[03:36:21] <cmr> mark_edward: it'd inline the function body, it wouldn't eliminate the call.
[03:36:35] <cmr> argument evaluation is at a higher level than that.
[03:36:52] <cmr> check the IR yourself
[03:36:54] <strcat> it can also eliminate a call to a readonly/readnone/nounwind function without inlining
[03:37:11] <mark_edward> i see, and since the body is empty, it'd essentailly be a noop?
[03:37:24] <strcat> if it's empty, it's readonly/readnone/nounwind
[03:37:26] <cmr> strcat: wait, what do you mean by that and how does it work?
[03:37:39] <strcat> cmr: llvm detects if a function is readnone/readonly/nounwind
[03:37:54] <strcat> we could also set it on cross-crate metadata if we had an effects system
[03:38:02] <strcat> cmr: it's actually a bug in LLVM
[03:38:06] <strcat> it's missing a 'halting' attribute
[03:38:50] <steveklabnik> is this kind of thing the way to do this kind of thing still? https://github.com/mneumann/rust-redis/blob/master/redis.rs#L119-L124
[03:39:06] <strcat> http://lists.cs.uiuc.edu/pipermail/llvm-commits/Week-of-Mon-20100705/103670.html not merged yet, so it eliminates calls to functions with infinite looping/recursion.
[03:39:27] <aatch> strcat, also if a function is generic it can be inlined.
[03:39:44] <strcat> aatch: for now ;p
[03:40:27] <strcat> we can export generic instantiations in the future
[03:40:31] <aatch> strcat, yeah, I'm guessing we should be looking in the crate for an actual instance instead of always monomorphising.
[03:40:47] <strcat> that'd actually be a real use case for type_use. (a working one ;p)
[03:41:35] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[03:41:46] *** Quits: mib_69tnfa (Mibbit@F7E2F3F.17A0D1EC.B7830B68.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[03:41:49] <strcat> but meh
[03:41:53] <strcat> can just use LTO
[03:43:48] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[03:44:17] <cmr> Woo my PR landed
[03:44:24] <cmr> rustpkg_web ready for integration
[03:45:16] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Client exited)
[03:45:24] <aatch> strcat, that's a cool commit btw.
[03:45:24] <cmr> erm
[03:45:26] <cmr> rustdoc
[03:45:29] <aatch>  HexChat: 2.9.5 ** OS: Linux 3.10.10-1-ARCH x86_64 ** Distro: ArchLinux ** CPU: 8 x Intel(R) Core(TM) i7-3615QM CPU @ 2.30GHz (GenuineIntel) @ 1.86GHz ** RAM: Physical: 3.8GB, 74.4% free ** Disk: Total: 109.3GB, 46.7% free ** VGA: Intel Corporation 3rd Gen Core processor Graphics Controller ** Sound: HDA-Intel - HDA Intel PCH ** Ethernet: 645 NetXtreme BCM57766 Gigabit Ethernet PCIe ** Uptime: 4h 39m 41s **
[03:45:52] <cmr> aatch: wrong button?
[03:46:04] <aatch> cmr, yes.
[03:46:25] <aatch> Or, more accurately, I did not know what the button would do.
[03:46:33] <cmr> heh
[03:46:36] <steveklabnik> ... where did net go?
[03:46:37] <steveklabnik> is it gone?
[03:46:43] <cmr> steveklabnik: Yes it is.
[03:46:49] <cmr> std::rt::io::net
[03:46:56] <aatch> steveklabnik, if you're doing net stuff use the new runtime io.
[03:47:00] <steveklabnik> word
[03:47:05] <steveklabnik> i just want to make a tcp connection
[03:47:06] *** Quits: StarLight (StarLight@moz-117E4F7E.dynamic.avangarddsl.ru) (Ping timeout)
[03:47:25] <aatch> it's a little lacking in filesystem io, but the network stuff is solid.
[03:47:35] <cmr> steveklabnik: https://github.com/cmr/rust-examples/blob/master/echo_server.rs
[03:47:39] <aatch> (which reflects the focus in libuv on network stuff)
[03:47:43] <cmr> also client
[03:47:44] <SingingBoyo> aatch: what button did you find?
[03:47:51] * SingingBoyo goes button hunting
[03:47:51] *** Quits: spud (spud@moz-8F8D4E52.lightspeed.bcvloh.sbcglobal.net) (Ping timeout)
[03:47:54] <steveklabnik> cmr: <3 <3 <3
[03:48:10] <aatch> SingingBoyo, "Display System Info" under "Window" of all places.
[03:48:44] <SingingBoyo> aatch: well mine saya Send System Info which makes slightly more sense.  But yeah that's weird
[03:49:27] *** Quits: heftig (heftig@moz-C1BA554.dip0.t-ipconnect.de) (Ping timeout)
[03:49:39] <cmr> steveklabnik: you're awesome for doing docs stuff
[03:50:01] <steveklabnik> :)
[03:50:04] <steveklabnik> i enjoy it
[03:50:37] <strcat> cmr: there's lots of fairly low-hanging optimization stuff to do still...
[03:51:00] <cmr> strcat: I dunno, all the opt work you do is fairly magic to me
[03:51:02] <strcat> passing by-value self properly, investigating using byval for the indirect parameters, etc.
[03:51:10] <strcat> cmr: heh :)
[03:51:17] <cmr> I mean I understand *what* the changes are
[03:51:19] *** Joins: spud (spud@moz-8F8D4E52.lightspeed.bcvloh.sbcglobal.net)
[03:51:25] <cmr> but not how to go about discovering or fixing them
[03:51:31] *** Joins: StarLight (StarLight@moz-EF4285BF.dynamic.avangarddsl.ru)
[03:51:38] <cmr> I still have a pile of other rust work too :\
[03:51:39] *** Joins: heftig (heftig@moz-C1BA554.dip0.t-ipconnect.de)
[03:51:47] * strcat compares sample programs to clang and then fixes it to be the same perf
[03:51:54] <strcat> I should make a repo of them
[03:52:04] <cmr> extra::url, gl-rs, rust-http, and then rustpkg
[03:52:04] <strcat> it's too hard to maintain in the main repository
[03:52:08] <cmr> Plus irfy
[03:53:45] *** Quits: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[03:54:54] *** dew1 is now known as dew
[03:57:47] *** Joins: nejucomo_ (Adium@moz-434492BB.dsl.static.sonic.net)
[03:57:56] *** Quits: sigma (sigma@moz-43189A53.range109-151.btcentralplus.com) (Quit: Leaving.)
[03:57:58] <steveklabnik> where is std::rt::io::net::ip ?
[03:58:01] <steveklabnik> :/
[03:58:13] <steveklabnik> not familliar with the organization of rt
[03:58:49] *** Quits: Larry (larryfox@moz-8D6C9B2A.nycmny.fios.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[03:58:51] <cmr> it's in libstd/rt/io/net/ip.rs :p
[03:59:00] <steveklabnik> ugh
[03:59:04] <cmr> the official rustdocs don't do std::rt, but seld.be/rustdoc does
[03:59:06] <steveklabnik> was in src/rt
[04:00:01] <cmr> yeah, that's the old c++ runtime
[04:00:10] *** Quits: Azdle (patrick@moz-8C723B60.hsd1.mn.comcast.net) (Quit: Leaving)
[04:01:12] <sfackler> bblum: ping
[04:03:11] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[04:03:11] <steveklabnik> bummer, cmr, example just hangs for me for now. hmmmm.
[04:03:17] <steveklabnik> wonder if it's the read_to_end()
[04:03:41] *** Joins: xorcon (Mibbit@moz-9998D0C0.hsd1.wa.comcast.net)
[04:04:18] <SingingBoyo> steveklabnik: if it's with network, I'd expect read_to_end() to hang.  Not that I know much more about it.
[04:04:26] <steveklabnik> yeah
[04:04:43] <SingingBoyo> in fact, what the heck is a network example doing with read_to_end() ...
[04:04:44] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[04:04:49] <xorcon> On rust-nightly, I'm trying to compile code that used to work using the pipes library and DuplexStream(). Did this get moved somewhere?
[04:06:17] <olsonjeffery> xorcon: they both have been removed
[04:06:25] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[04:06:32] *** Joins: zeuxcg (zeuxcg@moz-80D1F912.hsd1.ca.comcast.net)
[04:06:42] *** Quits: canhtak (jeremy@moz-20B62323.wl.t.ulaval.ca) (Quit: canhtak)
[04:06:49] <sfackler> DuplexStream is still around
[04:06:53] <sfackler> it's in extra::comm
[04:08:12] <xorcon> I'm getting tmp.rs:7:25: 7:49 error: use of undeclared type name `DuplexStream`
[04:08:32] <xorcon> I'm using extra::comm;
[04:09:25] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[04:09:46] <sfackler> rusti: extra::comm::DuplexStream::<(), ()>()
[04:09:50] -rusti- pastebinned 1 lines of output: http://ix.io/86R
[04:10:27] <sfackler> xorcon: ^
[04:10:35] <steveklabnik> yup, that's what's hanging
[04:10:49] *** Quits: spud (spud@moz-8F8D4E52.lightspeed.bcvloh.sbcglobal.net) (Ping timeout)
[04:10:54] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[04:10:54] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/kl4TOA
[04:10:54] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[04:11:47] <xorcon> hmmm
[04:11:48] <xorcon> thanks
[04:12:00] <xorcon> what is the <(),()> all about? 
[04:12:41] <sfackler> it's specifying the types of the chan and port as unit. i.e. "give me a DuplexPort that can send () and receive ()"
[04:12:51] <ion> itâ€™s also art
[04:12:52] *** Joins: barosl (barosl@3DE683B6.E551553C.7544CABF.IP)
[04:13:06] <engla> () is the nil/unit type and value which is zero sized
[04:13:14] *** Quits: nejucomo_ (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: Leaving.)
[04:13:20] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Client exited)
[04:13:29] <SingingBoyo> xorcon: basically the equivalent of void in most languages, but it's actually a type rather than the absence of type
[04:14:28] <steveklabnik> looks like i'll have to figure this out with just plain read before
[04:14:33] <steveklabnik> oh well
[04:14:37] <steveklabnik> that's enough for the evening, i think
[04:14:37] <ion> As algebraic types, () corresponds to 1 and void corresponds to 0.
[04:14:54] <steveklabnik> i'll see you all later!
[04:14:57] *** Quits: steveklabnik (steveklabn@moz-5EF6C37C.socal.res.rr.com) (Quit: bai)
[04:15:13] <engla> there is a void too
[04:15:27] <engla> rusti: let x: &std::util::Void;
[04:15:28] -rusti- <anon>:7:13: 7:14 warning: unused variable: `x` [-W unused-variable (default)]
[04:15:28] -rusti- <anon>:7          let x: &std::util::Void;
[04:15:28] -rusti-                       ^
[04:15:29] -rusti- ()
[04:15:52] <ion> (That is, you can produce exactly one unique value of type () and exactly zero values of type void.)
[04:15:53] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[04:15:53] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/sE8UGg
[04:15:53] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[04:15:54] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[04:15:54] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/a6qtIA
[04:15:54] <ghrust> 13rust/06auto 14edf20cc 15Tim Chevalier: testsuite: Add test for #4208...
[04:15:54] <ghrust> 13rust/06auto 14b75e075 15bors: auto merge of #9233 : catamorphism/rust/issue-4208, r=catamorphism...
[04:15:54] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[04:16:44] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[04:17:27] <Jesse> you can do that?? ( let x: &std::util::Void; )
[04:17:39] *** Joins: bjz (Mibbit@E428DE71.E5FDABE2.886B98E.IP)
[04:17:53] <xorcon> okay, so if you import just DuplexPort<(),()> then I can't use DuplexPort<~str,uint> ?
[04:18:03] <engla> I guess you can do  let x: std::util::Void; too
[04:18:05] <sfackler> yeah. you can't access x unless the compiler's sure that you've given it a value
[04:18:13] <engla> you just can't find a value to assign to x
[04:18:25] *** Joins: maik (maik@moz-E348F31D.dip0.t-ipconnect.de)
[04:18:32] <sfackler> xorcon: you don't import DuplexPort<(),()>
[04:18:55] <sfackler> "use extra::comm::DuplexPort; DuplexPort::<(), ()>(); DuplexPort<int, float>();"
[04:19:28] <sfackler> er, DuplexPort::<int, float>()
[04:19:37] <xorcon> ahh okay
[04:19:45] <erickt> cmr / kimundi / bjz: I finally submitted my #[deriving(FromPrimitive)] PR at https://github.com/mozilla/rust/pull/9250. It may not yet be ready for merging in yet though 
[04:20:21] <erickt> but it does work :)
[04:23:54] <bjz> erickt: hmm - I get a 404
[04:24:12] <erickt> bjz: try again, it works for me
[04:24:18] <SingingBoyo> bjz: it's definitely there
[04:26:34] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[04:27:44] <bjz> erickt: oh, mibbet added the full stop to the url
[04:27:45] <bjz> :P
[04:27:52] <bjz> erickt: awesome
[04:29:30] *** Quits: ercax (ercan@moz-917BB3A7.dyn.optonline.net) (Quit: WeeChat 0.4.1)
[04:29:31] <bjz> erickt: will have a closer look later today
[04:29:35] *** Quits: xorcon (Mibbit@moz-9998D0C0.hsd1.wa.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[04:33:32] <erickt> bjz: cool :)
[04:33:41] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[04:33:42] <erickt> I'm off to bed now, thanks for checking it out :)
[04:33:45] *** Quits: Yeri (jasonjasmi@41C91A8A.CE609BA5.E39FBF79.IP) (Quit: Yeri)
[04:34:01] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[04:34:24] *** Joins: aeqwa (aeqwa@moz-C28C90E3.dsl.tropolys.de)
[04:34:57] *** Quits: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP) (Quit: Lost terminal)
[04:35:32] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[04:35:41] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[04:36:46] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Ping timeout)
[04:36:54] <mark_edward> error: internal compiler error: node_id_to_type: no type for node `unknown node (id=1163)`
[04:37:11] <mark_edward> :-( i'm going to bed. maybe tomorrow's rust won't have this problem
[04:38:22] <sfackler> mark_edward: i think i've run into that trying to link things built with different compiler versions
[04:39:09] <mark_edward> sfackler: in that case waiting will only exacerbate it. i'll test your hypothesis
[04:39:20] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[04:39:45] <mark_edward> nope still here. bedtime
[04:40:01] <bjz> mark_edward: make sure you rebuild your libs with the new rustc
[04:40:15] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[04:40:47] <mark_edward> bjz: i did. im using my fork of your openal. btw https://github.com/bjz/openal-rs/pull/3 r?
[04:41:08] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[04:43:11] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[04:44:57] *** Quits: Shaladdle (Shaladdle@moz-424BC304.hsd1.pa.comcast.net) (Client exited)
[04:48:17] <olsonjeffery> is there a legitimate way to call a &mut self method inside of a by-val self method?
[04:48:59] <strcat> olsonjeffery: yes, it's just inconvenient because you can't currently put mut on the self param
[04:49:08] <strcat> olsonjeffery: let mut this = self; ;p
[04:49:33] <strcat> being able to say 'foo(mut self)' would be nice
[04:49:38] <strcat> works on other parameters.
[04:49:56] <strcat> mut &self would be unambiguous too
[04:50:37] <hoverbear> tikue: You around?
[04:53:46] <olsonjeffery> strcat: ty
[04:54:15] *** Joins: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP)
[04:54:47] <sfackler> does anyone know why statics need to have their types specified?
[04:56:05] <strcat> sfackler: same reason as functions - inference is explicitly restricted to be local
[04:56:22] <strcat> is it a good idea? I don't know
[04:56:32] <strcat> I think statics nested in functions should have their types inferred
[04:56:42] <eevee> it makes your api types explicit?
[04:56:46] <strcat> right
[04:56:53] <strcat> but what if it's private? :P
[04:57:03] <strcat> the only place it really annoys me is inside fns
[04:57:11] <sfackler> it could be infered from the rhs of the declaration only
[04:57:42] <sfackler> it looks a bit silly to have static thing: MyStructThingy = MyStructThingy { foo: .., bar: .. };
[04:58:16] <sfackler> or e.g. static FOO: i32 = 10i32;
[04:58:43] *** Joins: nejucomo_ (Adium@moz-434492BB.dsl.static.sonic.net)
[04:59:02] <sfackler> inferring from usage is definitely a bad idea
[05:00:52] *** Joins: Diamond (dick@moz-9A33D9AB.cm.sunflower.com)
[05:00:58] *** Joins: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP)
[05:02:41] *** Joins: kseo_ (kseo@338DE5BC.4166765B.485A6DF.IP)
[05:02:42] *** Quits: kseo (kseo@338DE5BC.4166765B.485A6DF.IP) (Connection reset by peer)
[05:05:05] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[05:05:58] <sfackler> is Cell the canonical way to get around the once-fn issue?
[05:06:45] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[05:10:36] <Luqman> sfackler: pretty much
[05:12:46] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[05:12:48] *** Quits: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net) (Ping timeout)
[05:13:48] * sfackler hopes once-fns make it into 1.0
[05:14:25] *** Quits: maik (maik@moz-E348F31D.dip0.t-ipconnect.de) (Ping timeout)
[05:14:36] *** Joins: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net)
[05:19:54] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[05:20:00] *** Quits: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Quit: G'night everynyan~!)
[05:25:52] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[05:25:52] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/a6qtIA
[05:25:52] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[05:27:05] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[05:30:51] *** Quits: Earnestly (earnest@moz-BE290A2B.dyn.plus.net) (Ping timeout)
[05:30:52] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[05:30:52] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/aqif6g
[05:30:52] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[05:30:54] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[05:30:54] <ghrust> 01[13rust01] 15bors pushed 1 new commit to 06auto: 02http://git.io/hP9Z6A
[05:30:54] <ghrust> 13rust/06auto 1466ecff2 15bors: auto merge of #9237 : brson/rust/valgrind, r=thestinger...
[05:30:54] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[05:32:01] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[05:32:38] *** Quits: bjz (Mibbit@E428DE71.E5FDABE2.886B98E.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[05:33:01] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[05:39:14] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Client exited)
[05:40:05] <sfackler> acrichto: ping?
[05:40:39] <tikue> hoverbear: hey
[05:41:23] <hoverbear> tikue: How's it going?
[05:42:35] <tikue> hoverbear: good yourself? you pinged me?
[05:43:06] <hoverbear> tikue: Had a question about the echo server you sent me
[05:43:14] <tikue> hoverbear: sure
[05:43:16] <hoverbear> Don't anymore
[05:43:18] <tikue> ah ok
[05:46:43] <acrichto> sfackler: pong
[05:47:00] <sfackler> undefined reference to `pool::PostgresConnectionPool::with_connection::__static_fmtstr::h9a7ee2112a4ae134Y4aj::v0.1'
[05:47:02] <sfackler> D:
[05:47:36] <acrichto> I believe I have a fix for that
[05:47:53] <sfackler> looks like address_insignificant didn't fix the issue
[05:47:56] <sfackler> oh, cool
[05:47:57] <acrichto> sfackler: could you post your code though?
[05:48:10] <acrichto> address_insignificant I believe is causing the issue
[05:48:29] <acrichto> I'm guessing this is something in a library, and you're linking to the library
[05:48:41] <acrichto> and not only that but the format string is in a function which is generic
[05:49:11] <strcat> acrichto: are you going to send a PR for the snapshot?
[05:49:27] <acrichto> strcat: whoa did it build?!
[05:49:36] <acrichto> b/c I would *love* to do that
[05:49:49] <strcat> oh, no :(
[05:49:51] <acrichto> no!
[05:49:51] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[05:49:52] <acrichto> linux!
[05:49:53] <acrichto> why!
[05:49:56] <acrichto> you were so close
[05:49:58] <strcat> passed on mac
[05:50:00] <acrichto> flaky test
[05:50:04] *** Quits: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca) (Connection reset by peer)
[05:50:06] <sfackler> acrichto: https://github.com/sfackler/rust-postgres/tree/fmtstr-bug src/pool/test.rs fails to link
[05:50:11] * acrichto retries bors
[05:50:16] <acrichto> sooo close
[05:50:28] <sfackler> oh man, it's been forever since a snapshot :O
[05:50:57] <acrichto> strcat: I'll make you a deal
[05:51:06] <acrichto> if you take a look at https://github.com/mozilla/rust/pull/9130 I'll ferry the snapshot in tonight
[05:51:15] <strcat> ;p
[05:51:15] <acrichto> (or tomorrow morning if I fall asleep)
[05:51:40] <acrichto> sfackler: are you building rust locally?
[05:51:42] <strcat> I actually already looked at that
[05:51:47] <strcat> I thought I r+'ed it?
[05:51:57] * strcat shrugs
[05:52:03] <acrichto> oh maybe I overwrote it with a push -f
[05:52:04] <sfackler> acrichto: running off of strcat's nightly builds for arch
[05:52:05] <acrichto> and forgot
[05:52:09] *** Quits: Jesin (Jessin_@moz-679F0D97.cc.lehigh.edu) (Ping timeout)
[05:52:22] <acrichto> sfackler: ah ok, I *think* that if you remove address_insignificant you should build/link just fine
[05:52:33] <acrichto> sfackler: obviously that's not a long-term solution
[05:52:39] *** Joins: rlin-nb (rlin@moz-99690620.hinet-ip.hinet.net)
[05:52:48] <acrichto> my fix is dependent on the code in 9130 though
[05:52:54] <sfackler> the issue with that is that you'll end up with a ton of duplicated functions?
[05:53:00] <acrichto> duplicated statics
[05:53:07] <sfackler> ah
[05:53:13] <acrichto> when they could otherwise be coalesced
[05:53:26] <strcat> acrichto: btw is the reason & can't be inlined just due to it being split into 2 parts?
[05:53:27] <acrichto> the solution I'm gonna implement is that you will put the static in at most once per crate
[05:53:29] *** Joins: Jesin (Jessin_@moz-679F0D97.cc.lehigh.edu)
[05:53:35] <acrichto> strcat: no it could be inlined just fine
[05:53:41] <acrichto> but the name we give it (to llvm) is "const"
[05:53:46] <acrichto> and it's *always* "const"
[05:53:48] <strcat> oh
[05:53:49] <strcat> wat
[05:53:54] <acrichto> llvm will silently rename these to "constNNN"
[05:53:59] <strcat> ugh
[05:54:02] <acrichto> so it all works intra-module
[05:54:06] <sfackler> i'll fire up a build to verify
[05:54:09] <acrichto> and inter-module fix will require more work
[05:54:09] <strcat> why doesn't it throw an error?
[05:54:11] <strcat> :s
[05:54:13] <acrichto> beats me
[05:54:21] <acrichto> this has been the cause of like all the inner static problems
[05:54:26] <strcat> you should have to opt-in to something weird like that
[05:54:31] <acrichto> we even have a function "note_unique_llvm_symbol"
[05:54:36] <acrichto> we just don't use it except for *glue*
[05:54:43] <acrichto> eah exactly
[05:54:48] *** Quits: robn (robn@moz-76B0302C.static.internode.on.net) (Ping timeout)
[05:54:49] <strcat> I'm going to break all the glue soon
[05:54:51] <acrichto> not a fan of llvm's behavior in this regard
[05:55:22] <acrichto> argh we were so close to a snapshot
[05:55:28] <strcat> I kind of want to try moving the ~T/~[T] drop glue into the stdlib
[05:55:40] <strcat> by defining the type there and sticking a lang item on it
[05:55:42] <SingingBoyo> is it possible to run tidy.py on my own project?
[05:55:42] <acrichto> that would be kinda awesome
[05:55:47] <acrichto> strcat: although maybe not
[05:55:49] *** Quits: nejucomo_ (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: Leaving.)
[05:56:00] <acrichto> b/c then freeing correctness is librar-dependent?
[05:56:01] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[05:56:07] <acrichto> and then all non-libstd users have to re-implement the logic
[05:56:16] <SingingBoyo> trying to get evict to have rustic formatting and all that good stuff
[05:56:26] <acrichto> strcat: I'd think about it, anyway train arriving now so I'll be back in a bit
[05:56:29] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[05:56:31] * acrichto cheers bors on
[05:58:09] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Ping timeout)
[05:58:10] <aatch> btw, llvm's behaviour for naming is mostly to handle the case where you don't care about the name LLVM is using.
[05:58:18] <strcat> I didn't release we could attach release notes to the github tags
[05:58:32] *** Joins: robn (robn@moz-76B0302C.static.internode.on.net)
[05:58:48] <strcat> and downloads
[05:58:49] <aatch> like any language that is only using the JIT.
[06:04:06] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: WeeChat 0.4.1)
[06:05:25] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[06:06:17] *** Joins: jaen (jaen@moz-FA224228.play-internet.pl)
[06:07:04] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[06:07:42] *** Joins: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP)
[06:14:44] *** Quits: hoverbear (andrew@moz-86FCBF4B.gv.shawcable.net) (Quit: hoverbear)
[06:18:46] *** nrc is now known as nrc|afk
[06:29:08] <Eridius> rusti: let v = [55u8, ..4]; unsafe { *v.as_imm_buf(|p,_| p as *u32) }
[06:29:09] -rusti- 926365495u32
[06:29:13] <Eridius> rusti: 0x55555555u32
[06:29:14] -rusti- 1431655765u32
[06:29:35] <Eridius> rusti: let v = [0x55u8, ..4]; unsafe { *v.as_imm_buf(|p,_| p as *u32) }
[06:29:36] -rusti- 1431655765u32
[06:29:41] *** Quits: aeqwa (aeqwa@moz-C28C90E3.dsl.tropolys.de) (Quit: Lost terminal)
[06:29:45] *** Quits: heftig (heftig@moz-C1BA554.dip0.t-ipconnect.de) (Ping timeout)
[06:30:38] *** Joins: heftig (heftig@moz-C1BA554.dip0.t-ipconnect.de)
[06:32:15] *** Quits: sammykim (Mibbit@B4104EBB.3CC170B1.1E14B209.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[06:32:24] *** Quits: anshin (anshin@CD85F10D.F21429E2.354459FA.IP) (Client exited)
[06:32:33] *** Joins: bjz (Mibbit@35DC2AD4.E5FDABE2.886B98E.IP)
[06:33:59] <acrichto> 22 files changed, 19 insertions(+), 526 deletions(-)
[06:34:01] <acrichto> yay snapshots
[06:34:04] *** Quits: ross (ross@moz-5EA04060.br.br.cox.net) (Quit: )
[06:34:27] <acrichto> oh wait, 1645 deletions(-)
[06:34:31] *** Joins: anshin (anshin@CD85F10D.F21429E2.354459FA.IP)
[06:34:33] <acrichto> forgot the deleted files
[06:34:34] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[06:34:38] <pcwalton> nice
[06:35:27] <olsonjeffery> acrichto: i got a rebase-against-master of the file io PR, plus changes re: comments
[06:35:39] <olsonjeffery> in retrospect, i should've seperated the two. but so it goes.
[06:35:50] <acrichto> olsonjeffery: sounds good to me
[06:36:01] <olsonjeffery> as soon as make-check-stage1 is done
[06:37:15] * acrichto wants to axe fmt!, but probably also wants to land a snapshot as well
[06:37:24] *** Quits: dandy (Dandy@moz-84CC8377.hsd1.co.comcast.net) (Connection reset by peer)
[06:38:08] *** Joins: sebcrozet (sebcrozet@moz-F96421F3.w80-13.abo.wanadoo.fr)
[06:38:35] <pcwalton>  166 files changed, 3480 insertions(+), 4798 deletions(-)
[06:38:39] <pcwalton> will rebase this tomorrow
[06:38:40] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: Textual IRC Client: www.textualapp.com)
[06:38:44] <pcwalton> I think all the tests are passing?
[06:38:51] <acrichto> dear god
[06:39:23] <pcwalton> I'm sorry this is taking so long
[06:39:24] <acrichto> what was that awhile back about verifying our compiler about inserting backdoors? :)
[06:39:33] <SingingBoyo> pcwalton: you're crazy.  what did you change?
[06:39:40] <pcwalton> removing @fn
[06:39:56] <acrichto> what's it being removed for?
[06:40:05] <pcwalton> as part of the general move to simplify fn types
[06:40:08] <pcwalton> going home
[06:40:17] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Quit: .)
[06:40:32] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[06:40:35] <olsonjeffery> in keeping with rust's general disdain for managed boxes, in general.
[06:40:50] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[06:40:50] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/kT3AnQ
[06:40:50] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[06:41:14] <SingingBoyo> acrichto: if you're full-time shouldn't you have plenty of time to axe fmt! AND land a snapshot? :p
[06:41:16] *** Quits: anshin (anshin@CD85F10D.F21429E2.354459FA.IP) (Client exited)
[06:41:38] <SingingBoyo> acrichto: congratulations on that, btw.  finally checked my email today.
[06:41:43] * SingingBoyo is late to the party
[06:41:49] <olsonjeffery> heh. snapshot builds take the better part of a day. it's about having all your ducks in a row.
[06:41:53] <Eridius> quck
[06:41:54] <Eridius> quack
[06:42:22] <olsonjeffery> also mumble mumble valgrind cleanliness
[06:42:55] <acrichto> SingingBoyo: thanks :), hopefully by this time tomorrow night, fmt! will be a thing of the past (no way that's happening)
[06:43:44] <SingingBoyo> acrichto: it's okay, axing fmt! will break half of evict on me
[06:44:00] <acrichto> this is going to break like all rust code in existence lol
[06:44:05] <SingingBoyo> and I already have too many things to add/change
[06:44:13] <olsonjeffery> it's like a million contributors, crying out at once "wait wait! i want to land my PR first!" and then going silent
[06:44:48] <zeuxcg> are you guys breaking as many things as possible before 0.8 so that after that there's less stuff to break? :)
[06:44:59] <SingingBoyo> I just tried to count the number of open + low-pri issues I have for evict...
[06:45:09] *** Joins: anshin (anshin@CD85F10D.F21429E2.354459FA.IP)
[06:45:14] * SingingBoyo creates another issue for a command to count issues
[06:45:48] <olsonjeffery> SingingBoyo: does evict interact with the github issues system or is it purely local?
[06:45:50] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[06:45:50] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/RZePFg
[06:45:50] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[06:45:52] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[06:45:52] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/18ORNQ
[06:45:52] <ghrust> 13rust/06auto 140107028 15Alex Crichton: Resume inlining globals across crates...
[06:45:52] <ghrust> 13rust/06auto 14d1c0550 15bors: auto merge of #9130 : alexcrichton/rust/inline-globals, r=thestinger...
[06:45:52] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[06:46:00] <olsonjeffery> i skimmed the readme earlier, so forgive my ignorance
[06:46:14] <SingingBoyo> olsonjeffery: currently purely local. Hoping to add in github integration at some point though.
[06:46:27] * olsonjeffery nods
[06:47:15] *** Quits: jaen (jaen@moz-FA224228.play-internet.pl) (Ping timeout)
[06:47:24] <acrichto> zeuxcg: the more broken, the merrier!
[06:47:39] <acrichto> zeuxcg: but actually these are all changes which have been meaning to land, but a lot of them have been blocked on a new snapshot
[06:47:47] <acrichto> which will hopefully be coming any time now...
[06:48:03] <SingingBoyo> olsonjeffery: though it integrates with git, so you can always checkout the repo and use evict to see all the issues everyone has synced in
[06:48:08] <zeuxcg> is snapshot a prebuilt compiler for bootstrapping?
[06:48:19] <acrichto> zeuxcg: yeah, it's basically stage3 artifacts from some point in time
[06:48:26] <acrichto> we just save them in s3 for forever
[06:48:32] <olsonjeffery> SingingBoyo: yeah.. it's an intriguing premise
[06:48:34] <acrichto> src/snapshots.txt describes all the old snapshots
[06:48:44] <olsonjeffery> does it maintain a separate branch in the repo, ala gh pages?
[06:49:49] <SingingBoyo> olsonjeffery: nope, which is alternately a good/bad thing.  You get separate issues for each branch, but... you get separate issues for each branch.
[06:50:10] <strcat> why must we always have 1337 bugs
[06:50:23] <SingingBoyo> olsonjeffery: which in my experience has been hit and miss with usefulness, but hopefully once I stop needing a sync command it'll be cleaner
[06:50:24] <strcat> oh there goes one
[06:50:26] <strcat> ;p
[06:51:01] <SingingBoyo> strcat: because the bugs being 'leet proves that the devs are even more elite?  :D
[06:51:01] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: sleep)
[06:51:05] <olsonjeffery> im always trying to use org-mode (and always falling off the wagon), so i like the idea of local issue management
[06:51:22] <olsonjeffery> in theory, anyways.
[06:54:36] <SingingBoyo> olsonjeffery: it's certainly helped me keep track of what needs to be done for evict.  remains to be seen how well the idea scales up though.
[06:58:24] <acrichto> bors, build faster
[06:58:27] <acrichto> plz
[07:02:12] *** Quits: kseo_ (kseo@338DE5BC.4166765B.485A6DF.IP) (Ping timeout)
[07:05:44] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[07:06:57] *** Joins: kseo (kseo@108EFB34.4166765B.485A6DF.IP)
[07:07:24] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[07:09:50] <klutzy> anyone can add A-windows label to this? https://github.com/mozilla/rust/issues/8598
[07:10:33] <klutzy> and this https://github.com/mozilla/rust/issues/9252
[07:12:37] <olsonjeffery> klutzy: done
[07:13:08] <klutzy> olsonjeffery: thanks! :D
[07:13:22] <olsonjeffery> np. thanks again for the uv win32 sleuthing
[07:15:12] *** Quits: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net) (Ping timeout)
[07:15:57] *** Quits: yong (chatzilla@89F941DF.4E87ADC2.263D9828.IP) (Client exited)
[07:16:15] *** Quits: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net) (Ping timeout)
[07:21:47] *** Quits: doublec (doublec@moz-4DA4FA7C.cd.pn) (Ping timeout)
[07:22:14] *** Joins: mark_edward (quassel@moz-97E995A.hsd1.in.comcast.net)
[07:23:21] *** Joins: doublec (doublec@moz-4DA4FA7C.cd.pn)
[07:25:36] *** Quits: kseo (kseo@108EFB34.4166765B.485A6DF.IP) (Ping timeout)
[07:26:19] *** Quits: Jesin (Jessin_@moz-679F0D97.cc.lehigh.edu) (Ping timeout)
[07:26:43] *** Joins: Jesin (Jessin_@moz-679F0D97.cc.lehigh.edu)
[07:28:37] *** Quits: wilsonk-laptop (kvirc@moz-8E86F35A.cg.shawcable.net) (Ping timeout)
[07:32:20] *** Quits: Jesin (Jessin_@moz-679F0D97.cc.lehigh.edu) (Ping timeout)
[07:32:57] *** Joins: wilsonk-laptop (kvirc@moz-8E86F35A.cg.shawcable.net)
[07:32:59] *** Joins: jaen (jaen@FB01674D.56B727FE.4B52F012.IP)
[07:35:32] *** Joins: nkoep (nik@moz-4FD4CCAD.pool.mediaways.net)
[07:35:34] *** Quits: barosl (barosl@3DE683B6.E551553C.7544CABF.IP) (Ping timeout)
[07:35:40] *** Quits: LimeBurst (me@247D1419.D73964AC.27A8748.IP) (Ping timeout)
[07:36:40] *** Joins: LimeBurst (me@247D1419.D73964AC.27A8748.IP)
[07:37:03] *** Joins: barosl (barosl@3DE683B6.E551553C.7544CABF.IP)
[07:37:16] *** Joins: Jesin (Jessin_@moz-679F0D97.cc.lehigh.edu)
[07:37:26] *** Quits: dbaupp (Thunderbir@moz-EAA09AEF.lns20.syd7.internode.on.net) (Ping timeout)
[07:40:35] *** victorporof_ is now known as victorporof
[07:40:52] <Eridius> rusti: bytes!(3,)
[07:40:53] -rusti- <anon>:7:17: 7:18 error: unexpected token: `<eof>`
[07:40:53] -rusti- <anon>:7          bytes!(3,)
[07:40:53] -rusti-                           ^
[07:40:53] -rusti- application terminated with error code 101
[07:41:00] <Eridius> not quite sure `<eof>` is the best error message there
[07:41:04] *** Joins: dbaupp (Thunderbir@moz-EAA09AEF.lns20.syd7.internode.on.net)
[07:41:28] *** Joins: kseo (kseo@108EFB34.4166765B.485A6DF.IP)
[07:44:33] *** Joins: fabiand (fabiand@moz-912BAB9.adsl.alicedsl.de)
[07:48:43] *** Quits: paulproteus (quassel@rose.makesad.us) (Ping timeout)
[07:48:59] *** Joins: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au)
[07:49:16] *** Joins: paulproteus (quassel@moz-E86A3B42.makesad.us)
[07:50:39] *** Quits: kseo (kseo@108EFB34.4166765B.485A6DF.IP) (Client exited)
[07:51:29] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[07:55:50] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[07:55:50] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/18ORNQ
[07:55:50] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[08:00:49] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[08:00:49] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/9ZKPVQ
[08:00:49] <ghrust> 13rust/06auto 1462991e6 15adridu59: gitattributes: force LF line endings for all files...
[08:00:49] <ghrust> 13rust/06auto 146055611 15bors: auto merge of #9214 : adridu59/rust/issue-7723, r=thestinger...
[08:00:50] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[08:06:04] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[08:07:06] <dbaupp> acrichto: lies and deceit! I had all the `:`'s, just the pretty printer can't handle them: https://github.com/mozilla/rust/issues/9253
[08:07:12] *** Quits: SingingBoyo (singingboy@DAC9C672.CE76D40F.4F048BDC.IP) (Ping timeout)
[08:07:44] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[08:09:22] *** Quits: Diamond (dick@moz-9A33D9AB.cm.sunflower.com) (Quit: Leaving.)
[08:10:28] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[08:10:58] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[08:11:16] *** Joins: Shaladdle (Shaladdle@moz-424BC304.hsd1.pa.comcast.net)
[08:12:38] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[08:13:08] <acrichto> dbaupp: I no longer trust bors
[08:14:05] *** Joins: kseo (kseo@108EFB34.4166765B.485A6DF.IP)
[08:15:05] <dbaupp> acrichto: heh
[08:15:20] <dbaupp> acrichto: (how's the new gig so far?)
[08:15:42] <acrichto> landed rustdoc_ng, and we're *this* close to a snapshot
[08:16:02] <dbaupp> productive first day! \o/
[08:16:09] <acrichto> (although rustdoc_ng is still entirely cmr, I just fixed a minor linkage issue :P)
[08:16:17] <acrichto> well, cmr/Seldaek
[08:16:33] * dbaupp helped a little on rustdoc_ng too
[08:16:44] <dbaupp> but yeah, cmr did some amazing work on getting it all implemented.
[08:17:01] * acrichto git blame src/rustdoc_ng/rustdoc_ng.rs
[08:17:41] <dbaupp> is the history preserved at all? or was it landed as one code dump?
[08:17:53] <acrichto> nah it probably isn't
[08:18:01] <acrichto> good point...
[08:18:05] <dbaupp> is it even possible to merge repos like that?
[08:18:25] <acrichto> git does magical things sometimes
[08:18:58] <Seldaek> dbaupp: it is possible, via git subtree-merge 
[08:19:09] <Seldaek> subtree-split also is possible, to extract a directory with all history from a repo
[08:19:17] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[08:19:35] <dbaupp> Seldaek: ooh, neat
[08:19:43] <Seldaek> it is one of the most archaic corners of git though :p
[08:20:36] <Seldaek> iirc cmr elected to not care about history to avoid dealing with git subtree
[08:20:56] <dbaupp> sounds sensible
[08:22:17] <Eridius> subtree-merge is neat
[08:22:20] <Eridius> Seldaek: it's not really very hard
[08:22:34] <Eridius> heck, subtree-merge might actually be simpler than submodules ;)
[08:22:44] <Seldaek> I guess not but like all things git, it's only easy once you understand it :p
[08:22:47] <Eridius> you just tell git merge the correct strategy and give it the strategy-specific option to tell it what sub-path to merge into
[08:22:53] <Eridius> it's all in the git-merge manpage
[08:23:29] <Seldaek> in any case I guess it's too late so no biggie
[08:26:46] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[08:35:14] *** Joins: CarpNet (ac@moz-FD24B77.sohonet.co.uk)
[08:41:41] *** Joins: donri (donri@moz-9BB61102.tbcn.telia.com)
[08:44:01] *** Joins: orshem (orshem@F0A9EA9.588A166C.E3D28531.IP)
[08:46:32] <orshem> rusti: let mut v = [1, 2, 3, 4]; let (v[1], v[2]) = (v[2], v[1]); 
[08:46:32] -rusti- <anon>:7:41: 7:42 error: expected `,` but found `[`
[08:46:32] -rusti- <anon>:7          let mut v = [1, 2, 3, 4]; let (v[1], v[2]) = (v[2], v[1]); 
[08:46:32] -rusti-                                                   ^
[08:46:32] -rusti- application terminated with error code 101
[08:47:02] <orshem> hi everyone. is it possible to achieve this ^ in some other way?
[08:47:11] <orshem> some other one liner?
[08:47:49] <klutzy> orshem: `let` is used to define new variable, not to assign value to existing var
[08:48:23] <klutzy> omitting let gives you ICE. it is known at..
[08:48:42] <Yurumechan> rusti: let mut  v = [1,2,3,4]; ::std::util::swap(&v[1], &v[2]); v
[08:48:45] <orshem> klutzy, i know but some releases ago i could do this, something like "v[1], v[2] = v[2], v[1]"
[08:48:46] -rusti- pastebinned 8 lines of output: http://ix.io/876
[08:48:55] <orshem> without let or tuples
[08:49:02] <Yurumechan> ah, should have it been mut
[08:49:20] *** Quits: kseo (kseo@108EFB34.4166765B.485A6DF.IP) (Ping timeout)
[08:49:22] <Yurumechan> anyway you can use swap function
[08:50:17] *** Joins: mihneadb (mihneadb@97D1680F.7E118222.89C0DD0D.IP)
[08:50:43] <orshem> Yurumechan, yep. but with this pattern i could do more than two way swaps. 
[08:50:59] *** Joins: kseo (kseo@108EFB34.4166765B.485A6DF.IP)
[08:51:27] <Yurumechan> i am not sure about l-value pattern
[08:51:30] *** Quits: sebcrozet (sebcrozet@moz-F96421F3.w80-13.abo.wanadoo.fr) (Ping timeout)
[08:51:40] *** Joins: gibbon (mathias@moz-1376FFC5.csbnet.se)
[08:51:44] <Yurumechan> did it really work in the past?
[08:52:29] <dbaupp> rusti: let mut v = [1,2,3,4]; ::std::util::swap(&mut v[1], &mut v[2]); v
[08:52:31] -rusti- pastebinned 8 lines of output: http://ix.io/877
[08:52:46] <dbaupp> usti: let mut v = [1,2,3,4]; v.swap(1, 2); v
[08:52:51] <dbaupp> rusti: let mut v = [1,2,3,4]; v.swap(1, 2); v
[08:52:52] -rusti- [1, 3, 2, 4]
[08:52:56] * dbaupp will get there eventually
[08:53:11] *** Quits: orshem (orshem@F0A9EA9.588A166C.E3D28531.IP) (Ping timeout)
[08:53:40] <dbaupp> Yurumechan: orshem may've been thinking of `v[1] <-> v[2]`
[08:53:56] * myname votes for a rubywarrior clone in rust
[08:54:48] <Yurumechan> dbaupp : i forgot to put mut there, it is a bit hard ti write rust code in the mobile
[08:55:07] <gibbon> Not sure what the technical term is, but can I have a function return a function which closes over one of the arguments to the first function? I tried with expressing lifetimes and all but with no luck.. Something like "let multipleOfAny ys = (\x -> any (\y -> x /= y && y `mod` x == 0) ys)" in haskell
[08:55:35] <Eridius> gibbon: you can return a ~fn, which is an owned closure
[08:55:45] <dbaupp> Yurumechan: yeah :) (I was just checking that it worked; since I didn't think it got past the borrow checker.)
[08:56:21] <gibbon> ah makes sense, forgot about different kinds of clusures.. thanks Eridius, I'll experiment further.
[08:57:13] <dbaupp> rusti: fn multipleOfAny(ys: ~[int]) -> ~fn(int) -> bool { |x| ys.iter.any(|y| x != y && y % x == 0) } let f = multipleOfAny(~[2,3,5,7]); (f(13), f(30))
[08:57:17] -rusti- pastebinned 5 lines of output: http://ix.io/878
[08:57:25] <dbaupp> rusti: fn multipleOfAny(ys: ~[int]) -> ~fn(int) -> bool { |x| ys.iter().any(|y| x != y && y % x == 0) } let f = multipleOfAny(~[2,3,5,7]); (f(13), f(30))
[08:57:29] -rusti- pastebinned 5 lines of output: http://ix.io/879
[08:57:38] <dbaupp> rusti: fn multipleOfAny(ys: ~[int]) -> ~fn(int) -> bool { |x| ys.iter().any(|&y| x != y && y % x == 0) } let f = multipleOfAny(~[2,3,5,7]); (f(13), f(30))
[08:57:40] -rusti- (false, false)
[08:57:44] <dbaupp> :(
[08:57:46] *** Joins: sebcrozet (sebcrozet@moz-C27D92D8.w193-252.abo.wanadoo.fr)
[08:58:18] <dbaupp> oh, I'm using the function backwards
[08:58:46] <gibbon> I might have gotten something backwards as well.
[09:00:06] <dbaupp> rusti: fn multipleOfAny(ys: ~[int]) -> ~fn(int) -> bool { |x| ys.iter().any(|&y| x != y && x % y == 0) } let f = multipleOfAny(~[2,3,5,7]); (f(13), f(30))
[09:00:07] -rusti- (false, true)
[09:01:02] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Client exited)
[09:01:23] *** Joins: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net)
[09:02:32] *** Quits: lazyden (lazyden@47A36AC9.35CBBBD0.F246D1AF.IP) (Connection reset by peer)
[09:03:04] *** Quits: wilmoore (wilmoore@moz-71431C3A.hsd1.co.comcast.net) (Ping timeout)
[09:03:28] *** Joins: orshem (orshem@F0A9EA9.588A166C.E3D28531.IP)
[09:03:30] *** flaper87|afk is now known as flaper87
[09:03:53] <orshem> does #moz-net have something like a shadow ban?
[09:04:17] <orshem> i keep getting disconnected on the server side though my irc client's telling me everything peachy
[09:04:29] <Eridius> dbaupp: thanks for the review. I'm going to bed now, but I'll incorporate any more feedback you have tomorrow
[09:04:46] <Amaranth> orshem: Shadow ban would be letting you join every channel and talk but not showing it to anyone else
[09:06:26] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[09:06:34] <dbaupp> Eridius: np :)
[09:06:48] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[09:06:52] *** Quits: z0w0 (zack@moz-F83C02B5.lns5.woo.bigpond.net.au) (Connection reset by peer)
[09:07:03] <orshem> Amaranth, oh that's not what i'm seeing. i'm seeing myself as connected and anything i type appear to be going through but i'm not seeing any other activity on the channel
[09:07:28] *** Quits: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[09:07:32] <Amaranth> orshem: Yeah that would just be a bug or connectivity issues
[09:07:47] <Amaranth> I can't think of any reason to have something like that intentionally
[09:08:07] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[09:08:14] <dbaupp> Eridius: (but, yeah, I think bytes! was written by someone learning how to write syntax extensions too, so it's not necessarily the best template; that said, not much of syntax::ext is super amazing.)
[09:08:16] <gibbon> Is there a non-fugly way to use a function like the ond dbaupp wrote up there in a filter? (filter(|x| f(**x)) is what I consider rather fugly)
[09:08:30] <orshem> Amaranth, i have a running ping to 8.8.8.8 and i'm not seeing any pl. weird
[09:09:08] <Amaranth> Try restarting your IRC client, maybe it keeps ending up in a weird state
[09:10:03] <dbaupp> gibbon: not really; Rust doesn't compose particularly well, due to the different types of pointers & ownership, so it'll be always be a wart. :( (filter(|&x| f(*x)) might be slight nicer, if you don't want to be a 2-star programmer, but it's not changing anything fundamental.)
[09:10:08] <orshem> dbaupp, Yurumechan: thanks for the swap solution. will rust ever be smart enough to be allow to mutable borrow two different subset of a vector at the same time?
[09:10:30] <dbaupp> orshem: not in general, no
[09:10:51] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[09:10:51] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/9ZKPVQ
[09:10:51] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[09:11:00] <gibbon> dbaupp: understandable.. thanks
[09:11:36] <orshem> dbaupp, why? complexity in the borrow checker? or a soundness problem? 
[09:11:40] <dbaupp> orshem: but you can do it a little bit with `match`, e.g. `match *foo { [ref mut x, .._, ref mut y] => { ... } }`
[09:11:58] <orshem> Amaranth, thanks. just tried that before. hope it'll help
[09:12:09] <dbaupp> orshem: it's proving that the borrows are disjoint is halting-problem-complete in general
[09:12:33] <dbaupp> one could imagine a weaker best-effort version
[09:15:49] <orshem> dbaupp, so no chance :(. thanks.
[09:15:51] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[09:15:52] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/vnaLTg
[09:15:52] <ghrust> 13rust/06auto 144f92f45 15Huon Wilson: Tests for fixed issues....
[09:15:52] <ghrust> 13rust/06auto 1407e821a 15bors: auto merge of #9225 : huonw/rust/closing-time, r=alexcrichton...
[09:15:52] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[09:16:04] *** Joins: Jesse_ (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[09:17:05] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Connection reset by peer)
[09:17:28] <orshem> dbaupp, how goes the rand mod rewrite? 
[09:17:54] <orshem> when it goes through i'll probably have to rewrite every file of rust i've written :)
[09:17:59] *** Quits: kseo (kseo@108EFB34.4166765B.485A6DF.IP) (Client exited)
[09:19:16] <dbaupp> orshem: getting there, I'm aiming to get it cleaned up and merged thursday/this weekend
[09:19:54] <dbaupp> orshem: what are you working on that uses rand everywhere?
[09:20:06] <orshem> dbaupp, thanks for the hard work! it's much appreciated.
[09:21:33] <orshem> dbaupp, i've gone through this: http://weblog.jamisbuck.org/2011/2/7/maze-generation-algorithm-recap and ported all the algorithm to rust to learn the language
[09:21:40] *** Joins: tefter (tefter@B5D119DC.B856A0A1.73804765.IP)
[09:21:54] <orshem> also some lsystem from processing 
[09:22:14] <orshem> all of which use rand
[09:22:53] *** Joins: afrey71 (Mibbit@moz-583695FC.anonymizer.ccc.de)
[09:23:22] <afrey71> Is there some kind of uniq() method? Eliminating duplicates in a vector?
[09:23:50] * afrey71 searched through the reference, but failed to find something.
[09:24:14] *** Quits: sebcrozet (sebcrozet@moz-C27D92D8.w193-252.abo.wanadoo.fr) (Ping timeout)
[09:26:17] <dbaupp> orshem: aha, those maze generators look pretty neat
[09:26:21] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[09:26:34] <dbaupp> afrey71: .dedup I think
[09:26:49] *** Joins: sigma (sigma@moz-43189A53.range109-151.btcentralplus.com)
[09:26:54] <dbaupp> rusti: let mut v = ~[1,1,2,3,4,5,5,5,1,1]; v.dedup(); v
[09:26:55] -rusti- ~[1, 2, 3, 4, 5, 1]
[09:26:56] *** Joins: sebcrozet (sebcrozet@moz-F96421F3.w80-13.abo.wanadoo.fr)
[09:32:48] *** Quits: orshem (orshem@F0A9EA9.588A166C.E3D28531.IP) (Quit: Leaving)
[09:34:39] <mihneadb> wow
[09:34:39] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[09:34:42] *** Joins: Ferreus (daniel@moz-7BF03B06.pools.arcor-ip.net)
[09:34:45] <mihneadb> dedup is in place
[09:34:48] <mihneadb> interesting choice
[09:40:06] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[09:40:19] <afrey71> dbaupp: thanks, a name I didn't look for.
[09:41:32] <afrey71> rusti: let mut v = ~[~1, ~2, ~1]; v.dedup(); v
[09:41:34] -rusti- ~[~1, ~2, ~1]
[09:41:57] <afrey71> Hm.. too bad I have owned boxes in there... :-(
[09:43:05] *** Quits: anshin (anshin@CD85F10D.F21429E2.354459FA.IP) (Ping timeout)
[09:45:06] <afrey71> Any easy way to deduplicate based on values pointed to?
[09:48:00] <afrey71> With a statefull filter, maybe?
[09:49:12] <mihneadb> if dedup could take a comparison function
[09:51:57] *** Quits: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP) (Ping timeout)
[09:55:38] *** Quits: dave1629 (dave@moz-F7321B31.public.wayport.net) (Quit: dave1629)
[09:56:45] <kimundi> rusti: let mut v = ~[~1, ~1, ~2]; v.dedup(); v
[09:56:46] -rusti- ~[~1, ~2]
[09:57:23] <kimundi> Vector needs to be sorted for dedup to work anyway
[09:57:42] *** nrc|afk is now known as nrc
[09:58:02] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[10:02:05] *** Joins: dave1629 (dave@moz-F7321B31.public.wayport.net)
[10:05:28] *** Quits: Axord (xord@moz-1B228827.lsanca.dsl-w.verizon.net) (Ping timeout)
[10:06:46] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[10:08:26] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[10:13:36] *** Quits: victorporof (victorporo@CFB98BB1.77B8163B.2B3D3D4.IP) (Quit: victorporof)
[10:17:33] *** Quits: Jesin (Jessin_@moz-679F0D97.cc.lehigh.edu) (Input/output error)
[10:19:53] *** Joins: zagabar (zagabar@858B320D.B543C4DE.3933CC16.IP)
[10:19:56] *** Quits: mihneadb (mihneadb@97D1680F.7E118222.89C0DD0D.IP) (Input/output error)
[10:21:22] *** Quits: ktos (ktos@moz-D3D6BE18.swidnica.mm.pl) (Ping timeout)
[10:25:49] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[10:25:49] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/vnaLTg
[10:25:49] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[10:30:49] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[10:30:49] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/6HbRcQ
[10:30:49] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[10:30:52] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[10:30:52] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/cncPaQ
[10:30:52] <ghrust> 13rust/06auto 14e1507f3 15Steve Klabnik: Update rustpkg man page....
[10:30:52] <ghrust> 13rust/06auto 142a706aa 15bors: auto merge of #9234 : steveklabnik/rust/rustpkg_manpage, r=cmr...
[10:30:52] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[10:31:30] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[10:32:11] * zxcdw pokes zagabar 
[10:32:21] <zagabar> :O
[10:32:24] * zagabar pokes back
[10:33:38] * kimundi revokes both zagabar's and zxcdw's poking privileges
[10:35:49] * dbaupp revokes kimundi's revocal privileges
[10:36:06] <kimundi> D:
[10:36:09] <zagabar> D:
[10:36:22] * bjz did not think kimundi ever had the right to revoke zagabar and zxcdw's poking priviledges
[10:36:41] * dbaupp revokes bjz's thinking privileges
[10:36:49] * bjz thinks
[10:36:57] <bjz> o_o
[10:37:02] * dbaupp tries revoking them again
[10:37:10] * bjz thinks again
[10:37:23] * dbaupp turns his revoking privileges off and on again.
[10:37:48] * dbaupp tries for a third time
[10:37:49] * bjz thinks dbaupp never had those revoking priviledges
[10:38:08] * zagabar revokes his own anti-right to rule the world
[10:38:14] * zagabar tries to rule the world
[10:38:15] <bjz> o_o
[10:38:32] * bjz thinks it's time to escape
[10:38:34] <dbaupp> but those kind people in the email said that it worked every time! :'(
[10:38:40] <bjz> time to go home!
[10:38:52] <kimundi> WRLDCTR.exe - permission denied
[10:38:52] <bjz> late night at uni -_+
[10:38:59] <bjz> damn mibbet
[10:39:04] <bjz> *mibbit
[10:39:23] <bjz> o/
[10:39:40] <kimundi> bye \o
[10:39:51] <dbaupp> sudo WRLDCTR.exe
[10:39:52] *** Quits: bjz (Mibbit@35DC2AD4.E5FDABE2.886B98E.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[10:39:57] * dbaupp hopes this works
[10:40:30] <kimundi> WRLDCTR had an critical error: This is an windows application, you dolt!
[10:41:09] <dbaupp> sudo wine WRLDCTR.exe
[10:41:24] <kimundi> Initiating world control...
[10:41:29] <kimundi> processing...
[10:41:35] <kimundi> processing...
[10:41:42] <kimundi> processing...
[10:41:55] <kimundi> BLUESCREEN!
[10:42:18] <klutzy> oh no world is on windows?
[10:42:56] <zxcdw> zagabar: look what you did!
[10:42:59] <kimundi> what did you expect? :P
[10:43:01] <zxcdw> Crashed that Windows machine
[10:43:44] <zagabar> haha thta's why the world is how it is
[10:44:07] <zagabar> we've got viruses and stuff crashing
[10:44:20] <zagabar> and if you look up, there is a huge blue screen most of the time
[10:44:32] <kimundi> "This part of the world experienced an critical failure. Please reinsert boot disk and reboot Australia"
[10:45:45] <dbaupp> ah, that explains the earthquakes
[10:48:29] *** Quits: fhahn (fhahn@moz-7924DB5C.vie.surfer.at) (Ping timeout)
[10:50:10] *** Joins: fhahn (fhahn@moz-7924DB5C.vie.surfer.at)
[10:57:13] *** Quits: dave1629 (dave@moz-F7321B31.public.wayport.net) (Quit: dave1629)
[11:00:29] <afrey71> kimundi: ah, missed that part, thanks.
[11:00:57] <afrey71> Next question: how do I sort a vector?
[11:01:16] * afrey71 somehow didn't get the hang of where to find stuff, yet.
[11:01:25] <kimundi> afrey71: Hmm, godd question
[11:01:33] <kimundi> I know there are sorting functions in extra
[11:01:41] <kimundi> But I'm not sure if any are in std
[11:01:50] <kimundi> rusti: extra::sort::qsort
[11:02:03] <dbaupp> rusti: extra::sort::qsort(~[3,5,2,6])
[11:02:05] -rusti- pastebinned 10 lines of output: http://ix.io/85t
[11:02:05] -rusti- <anon>:7:9: 8:5 error: this function takes 4 parameters but 1 parameter was supplied
[11:02:05] -rusti- <anon>:7          extra::sort::qsort(~[3,5,2,6])
[11:02:06] -rusti- <anon>:8     };
[11:02:06] -rusti- error: aborting due to previous error
[11:02:06] -rusti- application terminated with error code 101
[11:02:12] <dbaupp> four? o_O
[11:02:33] <kimundi> rusti: extra::sort::sort(~[9,8,6,7])
[11:02:34] -rusti- <anon>:7:9: 7:26 error: unresolved name `extra::sort::sort`.
[11:02:34] -rusti- <anon>:7          extra::sort::sort(~[9,8,6,7])
[11:02:34] -rusti-                   ^~~~~~~~~~~~~~~~~
[11:02:35] -rusti- error: aborting due to previous error
[11:02:35] -rusti- application terminated with error code 101
[11:02:41] <kimundi> meh, whatever
[11:02:44] *** Joins: dew1 (Instantbir@moz-D2FA52B6.static.stls.mo.charter.com)
[11:02:45] *** Quits: dew (Instantbir@moz-D2FA52B6.static.stls.mo.charter.com) (Ping timeout)
[11:02:46] * kimundi opens github page
[11:02:54] <afrey71> dbaupp, kimundi: ah, thx. First time I need 'extra'. ;-)
[11:03:14] <dbaupp> rusti: let mut v = ~[4,7,3,5]; extra::sort::tim_sort(v); v
[11:03:15] -rusti- ~[3, 4, 5, 7]
[11:04:09] <afrey71> Uh.. tim stands for?
[11:04:15] <klutzy> TimSort
[11:04:20] <kimundi> rusti: extra::sort::quick_sort(~[9,8,6,7], |&l, &r| l < r)
[11:04:21] -rusti- <anon>:7:33: 7:43 warning: unnecessary allocation, the sigil can be removed [-W unnecessary-allocation (default)]
[11:04:21] -rusti- <anon>:7          extra::sort::quick_sort(~[9,8,6,7], |&l, &r| l < r)
[11:04:21] -rusti-                                           ^~~~~~~~~~
[11:04:21] -rusti- ()
[11:04:27] <klutzy> it's python's standard sort algorithm
[11:04:54] <kimundi> rusti: let mut v = ~[9,8,6,7]; extra::sort::quick_sort(v, |&l, &r| l < r); v
[11:04:56] -rusti- ~[6, 7, 8, 9]
[11:04:59] <kimundi> rusti: let mut v = ~[9,8,6,7]; extra::sort::quick_sort(v, |&l, &r| l > r); v
[11:05:01] -rusti- ~[9, 8, 7, 6]
[11:05:14] <afrey71> ah, looks like a special sort algo: http://en.wikipedia.org/wiki/Timsort
[11:05:40] <afrey71> kimundi, dbaupp, rusti: thanks for the examples (and their interpretation...)
[11:06:12] <dbaupp> rusti: use extra::sort::Sort; let mut v = ~[4,7,3,5]; v.sort(); v
[11:06:13] -rusti- <anon>:7:56: 7:65 error: type `~[<VI3>]` does not implement any method in scope named `sort`
[11:06:13] -rusti- <anon>:7          use extra::sort::Sort; let mut v = ~[4,7,3,5]; v.sort(); v
[11:06:13] -rusti-                                                                  ^~~~~~~~~
[11:06:13] -rusti- error: aborting due to previous error
[11:06:14] -rusti- application terminated with error code 101
[11:06:28] <dbaupp> rusti: use extra::sort::Sort; let mut v = ~[4,7,3,5]; v.qsort(); v
[11:06:28] -rusti- ~[3, 4, 5, 7]
[11:06:36] * dbaupp wills someone to make extra::sort sane
[11:06:56] <kimundi> Hm, am I the only one who finds typedefs in general kinda... bad? It just makes it hard to find the signature of what it actually expects.
[11:07:01] *** Joins: kseo (kseo@338DE5BC.4166765B.485A6DF.IP)
[11:07:05] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[11:08:46] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[11:12:56] <Amaranth> kimundi: No, typedefs are awesome. You can ensure you don't pass an int containing inches to something expecting an int containing centimeters
[11:13:03] <Amaranth> And other less obvious examples
[11:13:04] *** Joins: a_m0d|home (a_m0d@moz-E131BF3E.acanac.net)
[11:13:16] <pnkfelix> Amaranth: well, for some definition of "ensure"
[11:13:19] <kimundi> Amaranth: I don't see the connection there
[11:13:26] <kimundi> I'm not meaing newtypes
[11:13:37] <kimundi> type Le<'self, T> = &'self fn(v1: &T, v2: &T) -> bool;
[11:14:15] <Amaranth> Ah, those are usually done for clarity and conciseness
[11:14:18] <kimundi> It's not THAT bad, the new docs handle that actually well: http://seld.be/rustdoc/master/extra/sort/fn.quick_sort.html
[11:14:27] <kimundi> Can click on it and directly get to the definition etc
[11:14:42] <Amaranth> If you have a dozen places that reference that function pointer it can be annoying typing it out every time
[11:14:47] <kimundi> Amaranth: Well... I'd argue about 'claraity' :P
[11:14:51] <pnkfelix> kimundi: I wouldn't get rid of them as a language feature.  I see it as a stylistic issue about whether to use them.
[11:15:33] <Amaranth> kimundi: Well if you had a function that took three different similar looking function pointers you'd probably enjoy the clarity of being able to see which is which at a glance
[11:15:35] <kimundi> pnkfelix: Yeah, I'm not saying they should be removed directly
[11:15:42] <pnkfelix> kimundi: and if you thinking tracking down what types are expected is hard now â€¦. its only going to get harder when/if we add associated items.
[11:16:24] *** Joins: ceninan (ceninan@moz-6BD43586.a370.priv.bahnhof.se)
[11:16:26] <pnkfelix> kimundi: (well, actually, that's probably not true.  I was thinking of the C++ template experience, but associated items won't work like that...)
[11:16:30] <kimundi> I know they have good uses cases
[11:16:56] <kimundi> And the docs make getting to the actual definiton easy, so it's not really a problem
[11:17:04] *** Joins: victorporof (victorporo@C77D234B.A58E0E41.6A4F8DA2.IP)
[11:17:48] *** Quits: rlin-nb (rlin@moz-99690620.hinet-ip.hinet.net) (Quit: Leaving.)
[11:17:48] <kimundi> But I also recall taking a long time till I finally understood how the IO monad in haskell works, because no one told me that IO is actually a typedef:P
[11:18:45] <kimundi> Also there is still the problem that 'pub use' and 'type' are to similar to each other
[11:19:26] *** Joins: canhtak (jeremy@moz-8CBCE134.wl.t.ulaval.ca)
[11:19:30] <kimundi> pcwalton told me we can't fold 'type' into 'pub use' because of cyclic import errors, but till this day I still don'T know what a cyclic import error actually _IS_ :P
[11:19:35] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[11:20:19] <dbaupp> kimundi: mod foo { pub use bar::baz; } mod bar { pub use foo::baz; } ?
[11:20:30] <kimundi> Tested that, works
[11:20:35] <dbaupp> really?
[11:21:04] <kimundi> rusti: pub mod foo { pub use bar::baz; } pub mod bar { pub use foo::baz; }
[11:21:13] -rusti- pastebinned 14 lines of output: http://ix.io/87b
[11:21:31] <dbaupp> mod's inside fns aren't `use`-able.
[11:21:41] <kimundi> ah, right
[11:21:50] <kimundi> dbaupp: Ah, I tested something similar
[11:21:55] <dbaupp> but, running it in normal rustc, gives unresolved imports for each us
[11:21:56] <dbaupp> e
[11:22:40] <kimundi> So, the problem is foo::baz points to bar::baz and other way round, okay
[11:22:58] <kimundi> That THAT is an error I fully understand
[11:23:33] <kimundi> But now I understand even less how that could possibly become an problem.
[11:23:54] <kimundi> Just... Don't do that, right?
[11:25:29] <dbaupp> heh, probably
[11:26:17] <kimundi> I imagine an merge of type and pub use like this:
[11:26:50] <kimundi> Every definition has an 'canonical path' - The point in a crate where it is actually defined
[11:27:09] <dbaupp> what about `type Foo<T, U, V> = ~fn(T, Option<(U, U)>) -> ~[V]` (for example)?
[11:27:52] <pnkfelix> dbaupp: Wait, we support parameterized type definifionts?
[11:27:56] <pnkfelix> *definitions
[11:28:11] <kimundi> dbaupp: Not arguing against the ability to shorten things
[11:28:27] <dbaupp> rusti: type Foo<T> = ~[T]; let x: Foo<int> = ~[1,2,3]; x
[11:28:28] -rusti- ~[1, 2, 3]
[11:28:31] <dbaupp> pnkfelix: yup
[11:28:35] <kimundi> You can have as many pub uses of any item or even other pub uses, as they all will point to the canonical path.
[11:28:45] <dbaupp> rusti: type Foo<'self, T> = &'self [T]; let x: Foo<'static, int> = &[1,2,3]; x
[11:28:46] -rusti- &[1, 2, 3]
[11:28:50] <pnkfelix> dbaupp: whoa!  I don't know why I was deliberately avoiding trying to write that
[11:28:50] *** Joins: tgummerer (tgummerer@moz-552F30F.kthopen.kth.se)
[11:28:58] *** Quits: sigma (sigma@moz-43189A53.range109-151.btcentralplus.com) (Ping timeout)
[11:29:13] <kimundi> pub use can already rename, it seems logical to extend that to also redefine type parameters.
[11:29:32] <dbaupp> `pub use Foo<T> = ~[int]`?
[11:30:17] *** Quits: sebcrozet (sebcrozet@moz-F96421F3.w80-13.abo.wanadoo.fr) (Quit: Gone)
[11:30:38] <kimundi> Then you can remove 'type', and replace it with 'pub use', as type definitions become merely a syntactic transformation.
[11:31:13] <dbaupp> pnkfelix: heh
[11:31:22] <dbaupp> pnkfelix: heard back from the llvm folks yet?
[11:31:27] <pnkfelix> I don't know.  I am not convinced unifying this use case underneath `pub use` is a good idea.
[11:32:08] <kimundi> pnkfelix: It seems better to me than the current situation, where you can't do anything with a typedef except use it in an typesignature
[11:32:25] *** Joins: mihneadb (mihneadb@EF54FE47.3689173D.FCAAE698.IP)
[11:32:36] <pnkfelix> dbaupp: nope, radio silence.  I've been doing non-Rust stuff today (was up until 5am my time investigating http://llvm.org/bugs/show_bug.cgi?id=17261 , but I'm not sure if the hypothesis in my end comment there holds any weight.
[11:34:25] <kimundi> use Tup3<T> = (T, T, T); Tup3<uint>::some_tup_function(); // Should work imo
[11:34:47] <dbaupp> pnkfelix: it seems reasonable, but I'm no expert at all
[11:34:50] *** Quits: mihneadb (mihneadb@EF54FE47.3689173D.FCAAE698.IP) (Input/output error)
[11:34:56] <dbaupp> kimundi: I believe that's been discussed *a lot*
[11:35:16] *** Joins: Earnestly (earnest@moz-BE290A2B.dyn.plus.net)
[11:35:17] *** Joins: mihneadb (mihneadb@EF54FE47.3689173D.FCAAE698.IP)
[11:35:28] <kimundi> dbaupp: I know, sadly I only now gained the knowledge to actually have an opinion about that :(
[11:35:36] *** Joins: sigma (sigma@moz-5748D6CF.range109-145.btcentralplus.com)
[11:36:59] *** Quits: mihneadb (mihneadb@EF54FE47.3689173D.FCAAE698.IP) (Ping timeout)
[11:37:02] <kimundi> would be nice if I could find some old discussion to read about the reasoning...
[11:37:28] *** Quits: jaen (jaen@FB01674D.56B727FE.4B52F012.IP) (Quit: WeeChat 0.4.1)
[11:37:35] *** Joins: jaen (jaen@FB01674D.56B727FE.4B52F012.IP)
[11:39:10] <kimundi> I just think two ways to create an alias to some type are one to many... 
[11:40:15] <dbaupp> kimundi: here's the bikeshed that needs painting https://github.com/mozilla/rust/issues/6894
[11:40:47] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[11:40:47] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/cncPaQ
[11:40:47] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[11:41:13] <pnkfelix> I don't understand if Kimundi is complaining about, in the Tup3 example: (1.) a failure of `use`, (2.) a failure of `type`, (3.) a failure to pun modules and impls for types ...
[11:43:35] <kimundi> pnkfelix: "Merge type with pub use, make it support both reshuffling of type parameters and renaming, make it work as an alias to the real type"
[11:43:48] <dbaupp> https://mail.mozilla.org/pipermail/rust-dev/2013-September/005603.html "it gives me the necessary error at compile time"... not really: C++ errors :(
[11:43:53] <pnkfelix> kimundi: but is that actually going to get you to what you asked for in your example?
[11:44:26] <kimundi> As in, "use Tup3<T> = (T, T, T); Tup3<uint>::some_tup_function();" could be rewritten from the compiler as "(uint, uint, uint)::some_tup_function();"
[11:44:26] <pnkfelix> kimundi: Its not clear to me whether you can write your example right now anyway, regardless of whether you use `type` or `pub use` ...
[11:45:46] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[11:45:46] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/rcKTgw
[11:45:46] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[11:45:47] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[11:45:47] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/2OfRWQ
[11:45:47] <ghrust> 13rust/06auto 14a0b9cc6 15Steve Klabnik: New rustpkg tutorial.
[11:45:47] <ghrust> 13rust/06auto 14cf2253b 15Steve Klabnik: Updating rustpkg tutorial from feedback.
[11:45:47] <ghrust> 13rust/06auto 147ea8533 15bors: auto merge of #9239 : steveklabnik/rust/rustpkg_tutorial, r=catamorphism...
[11:45:49] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[11:46:13] * pnkfelix spent some time in a private messaging session with rusti trying to get it to define something with impl (int,int,int) { fn foo() -> (int, int, int) { â€¦ } } and was not successful.
[11:46:44] <Amaranth> dbaupp: The only confusing thing in that C++ error was that he changed the function from print_all to draw_all. Not sure what you mean otherwise
[11:47:12] <kimundi> rusti: struct Foo<T>(T, T); impl Foo<T: Add<T, T>> { fn add(x: Foo<T, T>) -> T { let Foo(a, b) = x; a + b } }; Foo::<uint, uint>::add(Foo(45, 45))
[11:47:23] -rusti- pastebinned 20 lines of output: http://ix.io/87e
[11:47:50] <dbaupp> Amaranth: I don't see a mention of the "print" function which is causing the error
[11:47:54] <kimundi> rusti: struct Foo<T>(T, T); impl<T: Add<T, T>> Foo<T> { fn add(x: Foo<T, T>) -> T { let Foo(a, b) = x; a + b } }; Foo::<uint, uint>::add(Foo(45, 45))
[11:47:57] -rusti- pastebinned 4 lines of output: http://ix.io/87h
[11:48:12] <pnkfelix> kimundi: c'mon, take the hint: "spent some time in a private messaging session"
[11:48:46] <Amaranth> dbaupp: I think line 18 would be the call to print
[11:48:58] *** Joins: glyc (Mibbit@moz-20CEEF38.hsd1.ca.comcast.net)
[11:49:23] <bjz> pnkfelix: you need an intermediate trait :(
[11:49:38] <pnkfelix> bjz: I don't actually *mind* this
[11:49:43] <Amaranth> Yes line 18 is the call to print and after union is supposed to be a newline and the second message tells you where you tried to instantiate so you can see what went wrong
[11:49:49] <bjz> pnkfelix: yeah
[11:50:08] *** Joins: mihneadb (mihneadb@EF54FE47.3689173D.FCAAE698.IP)
[11:50:44] <pnkfelix> bjz: Its more that I was trying to understand what kimundi was originally asking for.  I didn't want the proposal to unify `type` and `pub use` to get obfuscated by examples that wouldn't work post-unification
[11:50:45] <bjz> pnkfelix: I don't think that's an issue
[11:50:45] <bjz> pnkfelix: one tricky issue is: impl<T> Trait for T { ... } // now Trait cannot be impled on anything else
[11:50:53] <glyc> Q: about rustdoc, I'm trying /** comments */ but they aren't showing up in the output index.html.
[11:51:07] <glyc> what am I missing about rustdoc use
[11:51:22] *** Quits: a_m0d|home (a_m0d@moz-E131BF3E.acanac.net) (Client exited)
[11:51:23] <bjz> pnkfelix: oh ok
[11:51:23] <bjz> pnkfelix: didn't have the context
[11:52:50] <dbaupp> Amaranth: maybe; but why not just have "`print` method doesn't make sense for <type>" (or, in Rust, "Print trait not implemented for <type>").
[11:53:20] <dbaupp> glyc: what is the comment supposed to be attached to?
[11:54:03] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[11:54:14] <glyc> dbaupp: http://mibpaste.com/uXveRK  I tried top of file, in front of function, and inside function. None worked.
[11:54:50] <dbaupp> glyc: they'd all be attached to `main`, but main is private so it probably doesn't appear in the documentation
[11:55:14] <glyc> dbaupp: how does attaching work? 
[11:55:23] <glyc> dbaupp: the next function after the docs?
[11:55:58] <dbaupp> glyc: /** */ and /// "attach" to the next item (i.e. are part of the attributes of that item) /*! */ and //! attach to the parent item
[11:56:02] <dbaupp> yeah
[11:56:24] <glyc> dbaupp: nice. If I do:   pub fn main() ... then it works.
[11:56:27] <glyc> whew! thanks!
[11:56:33] <dbaupp> the doc comments are actually just sugar for #[doc="<your text>"], and act essentially
[11:56:58] *** Joins: wakandan (Mibbit@5B9B91CA.8FF05F7.4605F140.IP)
[11:57:27] *** Quits: cdidd (cdidd@moz-D40E07FA.broadband.corbina.ru) (Ping timeout)
[11:57:49] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[11:57:50] <glyc> dbaupp: act essentially?
[11:58:04] <dbaupp> the same
[11:58:07] <glyc> ah
[11:58:12] * dbaupp can't finish sentences :S
[11:58:17] <glyc> :-)
[11:58:54] *** Joins: PGGB (PGGB@BD9E64E0.2702580D.85889BB1.IP)
[11:58:56] *** Joins: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net)
[11:59:01] <wakandan> hi there
[11:59:21] <wakandan> i'm working toward my first pull request for rust :)
[11:59:39] <wakandan> I understand that my edit must go through some tests 
[11:59:57] <wakandan> how can I run rust's tests?
[12:00:47] <dbaupp> wakandan: where have you changed things? in libstd or libextra only?
[12:01:06] <wakandan> uhm in libstd
[12:01:24] <wakandan> working on removing "either"
[12:01:47] <wakandan> the file is kill.rs to be specific
[12:01:53] <dbaupp> aha, you can run `make check` to run the whole testsuite (very slow!)
[12:02:04] <wakandan> oh 
[12:02:08] <dbaupp> or `make check-stage2-std` to run just the tests for std
[12:02:11] <wakandan> I saw that but forgot!
[12:03:00] <wakandan> where does that "check-stage2-std" come from?
[12:03:04] <kimundi> pnkfelix: Okay, this is an example of the current situation: https://gist.github.com/Kimundi/6593425
[12:03:09] <dbaupp> wakandan: or even `make check-stage2-std NO_REBUILD=1` if you are just making adjustments to std alone (e.g. fixing a typo in a test), since that will avoid doing the full compiler bootstrap due to an irrelevant change.
[12:03:52] <dbaupp> wakandan: it's an autogenerated build target that's saying run the `std` tests with the stage2 compiler (there's check-stage1-extra, check-stage2-syntax, etc etc)
[12:05:20] <wakandan> oh!
[12:05:32] <wakandan> where can I check for more of that? (for future usage)
[12:05:34] <kimundi> pnkfelix: And it just seems strange to me that you have to decide between "only be able to rename, but use it like the original" and "able to reshuffle the typeparameters, but only be able to use it in a limited way"
[12:05:41] *** Joins: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[12:06:07] <dbaupp> wakandan: https://github.com/mozilla/rust/wiki/Note-testsuite is pretty comprehensive
[12:06:35] <glyc> Q: can rustdoc run code? I'm thinking of test-fixtures
[12:06:46] <kimundi> wakandan: Btw, as general recommendation: 'make check-stage1' while doing the changes still you're ready, then 'make check' to test it once completly
[12:07:03] <kimundi> Actually, correction:
[12:07:19] <dbaupp> glyc: rustdoc doesn't run code; it is supposed to expand macros (but currently doesn't do so correctly)
[12:07:26] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[12:07:28] <dbaupp> glyc: (what do you mean by test-fixture?)
[12:07:31] <glyc> dpaupp: ok
[12:07:50] <kimundi> "make check-stage1-std" till std is ready, "make check_stage1-extra" till extra is ready... etc and then "make check-stage1" for the testsuite in general
[12:07:52] <glyc> dpaupp: http://www.concordion.org/Tutorial.html
[12:08:28] <glyc> dpaupp: docs + embedded calls to test fixtures = spec-by-example
[12:08:51] <kimundi> Does haskells module system have something like "pub use" ?
[12:08:52] <dbaupp> that could be implemented as a tool on top of libsyntax, but rustdoc itself doesn't support it
[12:09:06] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[12:09:20] <dbaupp> kimundi: yes `module Bar (x, y, z) where import Foo (x, y, z)`
[12:09:26] <glyc> dbaupp: cool!  is there a tool that currently uses libsyntax that I could use as an example?
[12:09:47] <dbaupp> glyc: rustdoc_ng (newly in the source tree)
[12:10:11] <glyc> dbaupp: I'll check it out
[12:10:13] <dbaupp> or, https://github.com/huonw/spellck as a simpler example
[12:10:19] <glyc> nice, thanks
[12:10:22] * dbaupp assumes it doesn't compile
[12:10:30] * dbaupp puts that on his list of things to update
[12:10:33] <kimundi> dbaupp: Hm, do you know how it realates to haskells typedefs?
[12:10:38] <kimundi> relates*
[12:10:46] <dbaupp> kimundi: what do you mean?
[12:11:17] <dbaupp> kimundi: Haskell's `type` is identical to our `type`, I believe
[12:11:21] <kimundi> dbaupp: Our pub use and type are similar but not identical. Is it the same in haskell?
[12:12:04] <dbaupp> no, they're different, but there isn't really a concept of `use` vs. `mod` like we have
[12:13:13] <glyc> I assume rustdoc_ng is the next-generation of rustdoc?
[12:13:18] <dbaupp> yup
[12:13:27] <glyc> nice
[12:13:50] <dbaupp> soon we'll have rustdoc_web in the source tree too and the official docs will look/act like http://seld.be/rustdoc/master/std/index.html
[12:13:55] *** Joins: krdln (Mibbit@moz-3B40D57B.icm.edu.pl)
[12:14:38] <glyc> nice
[12:14:58] <Seldaek> dbaupp: I'll try and take some time with the gf to go over the design one last time tonight and tweak some stuff, and if I can add impls in a few more places they're missing still
[12:15:46] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[12:16:08] *** Quits: glyc (Mibbit@moz-20CEEF38.hsd1.ca.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[12:16:19] <dbaupp> Seldaek: <3 (I hope your gf has been/is/will be thanked/acknowledged for this!)
[12:16:32] *** Quits: krdln (Mibbit@moz-3B40D57B.icm.edu.pl) (Quit: http://www.mibbit.com ajax IRC Client)
[12:18:46] <dbaupp> Seldaek: (is she learning Rust now? :P )
[12:19:16] <bstrie> Seldaek: a night together spent hacking on the rust compiler... how exquisitely romantic
[12:19:25] <bstrie> candlelight coding
[12:20:20] <bstrie> let's think of other ways to make rust hacking more collaborative
[12:20:28] <bstrie> like, a rust drinking game!
[12:20:33] <Seldaek> :P
[12:20:37] <bstrie> every time you forget to declare a variable as mutable, take a drink
[12:20:37] <Seldaek> no she's not learning rust
[12:20:44] <bstrie> every time you hit an ICE, finish your drink
[12:20:52] <Seldaek> but I'll try to convince her to make us a mascot too :p
[12:21:02] <dbaupp> extreme rusting? everyone gets laptops and jumps out of an aeroplane ... person who submits the most pull requests by the ground wins.
[12:21:08] <kimundi> bstrie: That's one way to reach the balmer peak...
[12:21:22] <bstrie> bah, we don't need a mascot. but if she does draw one, make it a mushroom
[12:21:31] <bstrie> dbaupp: I love it
[12:21:46] <dbaupp> combine it with the drinking game and it's perfect!
[12:22:05] <kimundi> ... for painting the landscape red
[12:22:18] <Seldaek> bstrie: yeah it's not critical but would be cool still, the cog's alright but it's not to funniest thing for stickers and all
[12:22:32] * dbaupp hopes we can feature this event at RUSTCON 20soon
[12:22:48] <kimundi> Seldaek: Make it a cute little cog robot :P
[12:22:48] <bstrie> dbaupp: '012, you mean
[12:22:55] <bstrie> actually, a robot would be fine
[12:23:01] <bstrie> but no official mascots pls
[12:23:06] <kimundi> Cute little bors
[12:23:22] <bstrie> a little robot named grautjat
[12:23:33] <kimundi> "Integrate! Integrate! Yay!"
[12:23:44] <Seldaek> I'm sure I asked but are there (m)any people here from europe?  would be cool to hijack FOSDEM as a mini-rustcon..
[12:23:56] <bstrie> Seldaek: http://seleniac.org/map/
[12:24:05] <bstrie> Seldaek: use your web inspector to poke at each dot and figure out the names
[12:24:18] <bstrie> still working on making it nicer
[12:24:18] <kimundi> âš™ < I love rust!
[12:24:36] <Amaranth> haha, only one person apparently used "Canada"
[12:24:38] <Seldaek> bstrie: that is.. not intuitive :p
[12:24:54] <bstrie> Seldaek: right, I want to make it so that if you move your cursor near a dot it will just tell you the name
[12:24:54] <Seldaek> but thanks
[12:24:59] <bstrie> but, busy busy
[12:25:05] <bstrie> Amaranth: several just put "canada"
[12:25:08] <Seldaek> yeah I know how it is
[12:25:10] <Amaranth> Are the ones in the ocean people who said "Earth"?
[12:25:16] <Seldaek> still cool to have
[12:25:16] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[12:25:27] <bstrie> Amaranth: they're people who don't have any location data at all on their github profile
[12:25:33] <bstrie> read the text, people!
[12:25:48] <Amaranth> Oh I stopped after the canada bit to laugh
[12:26:25] <dbaupp> bstrie: reading? who has time for that?
[12:27:25] <bstrie> also, I need to find a new geocoding api
[12:27:35] <bstrie> since there was a recent stink over people using google maps against the ToS
[12:27:44] <bstrie> which I do here
[12:28:47] <Seldaek> bstrie: don't find anyone I recognize from irc :/
[12:29:17] <dbaupp> bstrie: openstreetmaps has some
[12:29:59] <dbaupp> bstrie: http://wiki.openstreetmap.org/wiki/Nominatim
[12:30:00] <bstrie> dbaupp: how good are they at fuzzy place matching, like if I say "blah university" does it actually have good results
[12:30:12] <bstrie> because a lot of people on github just list their location as blah university
[12:30:40] <Seldaek> it'snot as good as gmaps for sure, but use it for the good of mankind :p
[12:30:43] <dbaupp> bstrie: no idea; I've only used it for lat-lon -> city name, which worked fine
[12:31:17] *** jorendorff_away is now known as jorendorff
[12:31:41] <pnkfelix> kimundi: okay, thanks for the elaboration.  I think this probably goes back to this issue that our resolve semantics is already in desperate need of both specification and implementation cleanup (regardless of how we might choose to generalize the resolve rulesâ€¦)
[12:31:50] <afrey71> rusti: let x = std::hashmap::HashSet<int>::new();
[12:32:04] -rusti- pastebinned 11 lines of output: http://ix.io/87r
[12:32:19] <bstrie> let x = ::std::hashmap::HashSet<int>::new();
[12:32:23] <afrey71> rusti: let x = std::hashmap::HashSet::new<int>();
[12:32:24] -rusti- <anon>:7:44: 7:47 error: unresolved name `int`.
[12:32:24] <dbaupp> rusti: let x = std::hashmap::HashSet::new::<int>(); x.is_empty()
[12:32:24] -rusti- <anon>:7          let x = std::hashmap::HashSet::new<int>();
[12:32:24] -rusti-                                                      ^~~
[12:32:24] -rusti- error: aborting due to previous error
[12:32:24] -rusti- application terminated with error code 101
[12:32:24] -rusti- <anon>:7:17: 7:50 error: the impl referenced by this path has 1 type parameter, but 0 type parameters were supplied
[12:32:26] -rusti- <anon>:7          let x = std::hashmap::HashSet::new::<int>(); x.is_empty()
[12:32:28] -rusti-                           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[12:32:30] -rusti- error: aborting due to previous error
[12:32:32] -rusti- application terminated with error code 101
[12:32:56] <dbaupp> rusti: let mut x = std::hashmap::HashSet::new(); x.insert(1); x.is_empty()
[12:32:57] -rusti- false
[12:32:58] <bjz> rusti: let x = std::hashmap::HashSet::<int>::new(); x.is_empty()
[12:32:58] -rusti- true
[12:33:12] <bjz> :P
[12:33:12] <dbaupp> oh, type params there work? neat.
[12:33:31] <bstrie> still hate that syntax :P
[12:33:39] <engla> I didn't know that it parsed with extra ::
[12:33:42] <bstrie> not that I have any better suggestions, as usual
[12:33:44] <afrey71> bjz, dbaupp: another double colon? Wow, thanks.
[12:33:48] <engla> rusti: let _ = std::hashmap::HashSet::<int>::new::();
[12:33:49] -rusti- ()
[12:34:05] <bstrie> aside from my usual suggestion of abandoning finite lookahead
[12:34:13] <bjz> bstrie: aye
[12:34:33] <bjz> afrey71: it's the same ::, just in a different location
[12:35:07] <bstrie> maybe we should have rusti just send error message as a PM to the person who submitted the command?
[12:35:07] <bjz> afrey71: needed to disambiguate the <, without losing finite lookahead
[12:35:24] <dbaupp> bstrie: not just finite lookahead... being able to parse separately from resolve/typechecking too.
[12:35:29] <bstrie> bah
[12:36:43] <pnkfelix> bstrie: sometimes we want to illustrate an error to the channel, though.  Plus I would prefer to encourage people to take all drafting interactions with rusti off-channel
[12:37:31] <bstrie> how about we give all the people with r+ access voice in here, and then people with voice get their error messages printed to the channel instead of PM :)
[12:38:13] <pnkfelix> nmatsakis, kmc, jack: Maybe one of the channel operators could change the channel topic to remind/tell people that one can `/msg rusti` with test expressions?
[12:38:32] <afrey71> pnkfelix: I intended to illustrate the error(s). Rust complaining "error: unresolved name `int`" sounds pretty weird to me.
[12:39:08] <pnkfelix> afrey71: yeah I didn't mean to point finger at you.  (I actually deliberately stopped myself from doing so.)
[12:39:18] <pnkfelix> afrey71: (after reading the interaction you had with rusti)
[12:39:31] * afrey71 uses a local rusti process, but that seems to have issues with the examples working here...
[12:40:15] <dbaupp> afrey71: the rusti-bot just places the input into a normal .rs file and compiles it with rustc; local-rusti is very different and broken
[12:41:33] *** Joins: enomado (nomad@DB5C5EEB.5ED34291.AB610CFE.IP)
[12:42:38] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[12:43:00] <kimundi> Idea: Using "rusti:" here just makes it respond with pm's. To make it visible here, you have to shout: "RUSTI:" :P
[12:43:11] <bstrie> haha
[12:43:15] <bstrie> I like that
[12:43:18] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[12:43:21] <pnkfelix> I actually don't mind that idea
[12:43:51] <kimundi> or "rusti: yell <input>"
[12:44:29] <pnkfelix> The assumption is that people will respond to rusti's PM response via `/msg` rather than more uses of `rusti:  â€¦`, at least for the short term, right?
[12:44:35] *** Quits: afrey71 (Mibbit@moz-583695FC.anonymizer.ccc.de) (Quit: http://www.mibbit.com ajax IRC Client)
[12:44:36] <dbaupp> https://github.com/thestinger/rust-playpen
[12:44:51] <pnkfelix> (actually, I guess rusti could remind you of this on that initlal response it makes)
[12:45:06] <pnkfelix> dbaupp: thanks, maybe its time for me to try playing with it
[12:45:20] <pnkfelix> dbaupp: though I think I'd need to do it in a Linux VM, right?
[12:45:28] <dbaupp> hm, I'm not sure if the python part of the IRC bot is there.
[12:45:46] <dbaupp> pnkfelix: strcat runs it in a linux cgroup for security/resource limiting
[12:45:49] <kimundi> (I know that for me personally, the reason I use rusti instead per pm is that it is to much bother to open a private message window. If that happens automatically, and is more convenient to continue there than in this chat, it would probably drive me to doing that directly)
[12:46:03] <kimundi> pnkfelix: right
[12:46:51] <kimundi> pnkfelix: afaik, playpen is prepared to be used in archlinux
[12:47:01] <kimundi> uses pacstrap and all
[12:47:05] <pnkfelix> kimundi: ah, not just any linux distribution?
[12:47:40] <kimundi> It would certainly work elsewhere, just more work to do manually :P
[12:47:57] <bstrie> this is strcat's clever plan to lock us all into using arch
[12:49:21] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[12:49:56] *** Quits: tgummerer (tgummerer@moz-552F30F.kthopen.kth.se) (Quit: Leaving)
[12:50:02] *** Joins: tgummerer (tgummerer@moz-552F30F.kthopen.kth.se)
[12:50:14] <kimundi> well, worked for me :P
[12:50:38] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[12:51:44] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[12:52:18] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Ping timeout)
[12:55:05] <kimundi> pnkfelix: Hm, can you tell me if/where the difference between 'pub use' and 'type' is compiler-phase wise?
[12:55:18] <pnkfelix> kimundi: no, sorry, I don't know offhand
[12:55:28] <kimundi> okay
[12:55:44] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[12:55:44] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/2OfRWQ
[12:55:44] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[12:55:44] <dbaupp> kimundi: in middle::resolve some where
[12:56:09] *** Quits: tgummerer (tgummerer@moz-552F30F.kthopen.kth.se) (Ping timeout)
[12:57:02] <kimundi> The last time I was prompted to look into resolve resulted in me renaming a bunch of items there to modern naming conventions :P
[12:57:17] <dbaupp> kimundi: build_reduced_graph_for_{item,view_item}
[12:58:07] <dbaupp> in fact there's two instances of `item_ty` and `view_item_use` each, so searching for them'd work too
[12:59:06] <kimundi> Hm... but what do they do :P
[12:59:12] * kimundi lacks context in both directions
[12:59:30] <dbaupp> I dunno, read the code.
[12:59:32] *** Quits: enomado (nomad@DB5C5EEB.5ED34291.AB610CFE.IP) (Quit: Leaving)
[12:59:45] * dbaupp is super-helpful. :P
[13:00:25] <kimundi> One question: What is resolves purpose exactly? Handling use statements?
[13:00:47] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[13:00:47] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/yiKEZQ
[13:00:47] <ghrust> 13rust/06auto 14876cb76 15Alex Crichton: Add the rustdoc_ng binary to the makefile rules...
[13:00:47] <ghrust> 13rust/06auto 14f45c640 15bors: auto merge of #9241 : alexcrichton/rust/build-rustdoc-ng, r=catamorphism...
[13:00:48] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[13:01:06] <pnkfelix> kimundi: my impression was that it takes care of paths in general.  Anything of the form foo::bar::baz::<and>::so::<on>
[13:01:13] * kimundi finds it hard to ask questions if he doesn't know what to ask about :P
[13:01:19] <dbaupp> kimundi: linking an occurance of `range(1, 10)` with std::iterator::range (etc)
[13:01:43] <dbaupp> kimundi: by looking at everything in scope, including the use statements.
[13:01:44] <kimundi> okay, so general path lookup, either in an use statement or an expresssion, right?
[13:02:10] <dbaupp> (i.e use statements are "only" relevant because they bring things into scope.)
[13:02:13] <pnkfelix> kimundi: expressions == (value-expressions and type-expressions) 
[13:02:31] <pnkfelix> dbaupp: kimundi: and patterns (right?)
[13:02:56] <dbaupp> pnkfelix: a pattern can be a path so yes
[13:03:09] <dbaupp> rusti: match None { std::option::None => true, _ => false }
[13:03:09] -rusti- <anon>:7:15: 7:19 error: cannot determine a type for this expression: unconstrained type
[13:03:10] -rusti- <anon>:7          match None { std::option::None => true, _ => false }
[13:03:10] -rusti-                         ^~~~
[13:03:10] -rusti- error: aborting due to previous error
[13:03:10] -rusti- application terminated with error code 101
[13:03:17] <dbaupp> rusti: match None::<int> { std::option::None => true, _ => false }
[13:03:18] -rusti- true
[13:03:31] *** Joins: afrey71 (Mibbit@CF7BD5F.E66B8A73.DEAC7DD4.IP)
[13:03:40] *** Joins: RageOfThou (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[13:03:48] <kimundi> Okay, so for example "build_reduced_graph_for_view_item"
[13:03:55] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[13:04:15] <kimundi> What is the input of that function?
[13:04:35] <kimundi> something like the "range" in "for x in range(0, 10)" ?
[13:04:42] <dbaupp> no, `use foo`
[13:04:50] <dbaupp> it gets called in visit_view_item
[13:05:20] *** Joins: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com)
[13:05:29] <kimundi> okay, so for every use statement build_reduced_graph_for_view_item gets called to get to the 'canonical path' it points at?
[13:05:32] <dbaupp> (I believe that part is adding everything from a use into the module scope)
[13:05:53] <dbaupp> along with the thing it "actually" points to, yeah.
[13:07:46] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[13:09:26] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[13:13:19] *** Joins: aeqwa (aeqwa@moz-B4E718F8.dsl.tropolys.de)
[13:17:32] *** Quits: quvarxa (chatzilla@moz-978E4C31.static.tpgi.com.au) (Quit: ChatZilla 0.9.90.1 [Firefox 24.0/20130909203154])
[13:23:56] *** Joins: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP)
[13:28:18] *** Joins: Larry (larryfox@moz-343B6F0C.nyc.biz.rr.com)
[13:29:06] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[13:29:17] *** Quits: Larry (larryfox@moz-343B6F0C.nyc.biz.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[13:29:47] *** Joins: Larry (larryfox@moz-343B6F0C.nyc.biz.rr.com)
[13:31:27] *** Quits: Larry (larryfox@moz-343B6F0C.nyc.biz.rr.com) (Ping timeout)
[13:31:43] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Connection reset by peer)
[13:31:57] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[13:32:28] *** Joins: Larry (larryfox@moz-343B6F0C.nyc.biz.rr.com)
[13:36:58] *** Quits: mihneadb (mihneadb@EF54FE47.3689173D.FCAAE698.IP) (Input/output error)
[13:38:30] *** Quits: fabiand (fabiand@moz-912BAB9.adsl.alicedsl.de) (Quit: Verlassend)
[13:44:04] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[13:44:25] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[13:45:10] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[13:45:46] *** Quits: afrey71 (Mibbit@CF7BD5F.E66B8A73.DEAC7DD4.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[13:49:28] *** Quits: jfbk (jfbk@moz-EEA9CFB3.nyc.res.rr.com) (Quit: )
[13:51:17] *** Joins: afrey71 (Mibbit@moz-FFEF2F3.maier.linuxprofy.net)
[13:57:27] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.1)
[13:58:33] *** Joins: penguin_dan (dan_johnsi@6902762D.11B071D.FB9A45AF.IP)
[13:59:27] *** Joins: anshin (anshin@CD85F10D.F21429E2.354459FA.IP)
[13:59:51] *** Joins: sebcrozet (sebcrozet@moz-87D51607.w80-13.abo.wanadoo.fr)
[14:03:59] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[14:04:25] *** Quits: Ferreus (daniel@moz-7BF03B06.pools.arcor-ip.net) (Ping timeout)
[14:04:37] *** Joins: Ferreus (daniel@moz-7BF03B06.pools.arcor-ip.net)
[14:04:40] *** Joins: lmandel (lmandel@13F2CEC5.7672369.D8E68FF6.IP)
[14:05:38] <engla> fourcc? I thought that was a joke!
[14:08:10] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[14:08:28] *** Joins: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net)
[14:08:42] <dbaupp> engla: pcwalton was thinking it'd be a better/nice/faster method for tags in the crate meatdata, I believe.
[14:08:47] <dbaupp> *metadata, heh.
[14:09:04] <engla> ok
[14:09:07] <doomlord__> tags / metadate ?
[14:09:13] <doomlord__> tags / metadata^
[14:10:43] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[14:10:44] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/yiKEZQ
[14:10:44] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[14:10:46] <engla> aha
[14:15:24] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[14:15:25] <dbaupp> doomlord__: each compiled crate contains a pile of heirarchical information about modules/exports/traits/types/inlinable items as a big binary blob, and each of the pieces is delimited by magic numbers indicating what it's storing (I believe).
[14:15:29] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[14:15:43] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[14:15:43] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/Hd9ogw
[14:15:43] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[14:15:44] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[14:15:44] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/cd_R6A
[14:15:44] <ghrust> 13rust/06auto 144e161a4 15Daniel Micay: switch Drop to `&mut self`
[14:15:44] <ghrust> 13rust/06auto 1429cdf58 15bors: auto merge of #9244 : thestinger/rust/drop, r=catamorphism...
[14:15:44] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[14:16:15] *** Joins: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net)
[14:16:24] *** Joins: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP)
[14:16:41] <dbaupp> doomlord__: (and the magic numbers are the tags; they're currently just defined as statics in rustc::metadata.)
[14:17:30] <engla> reading backlog, if the problem is that 'vuint' is slow, I guess any fixed width integer could solve that
[14:17:40] <mark_edward> doomlord__: how is you syntax highlighting thing goign!?
[14:18:13] <dbaupp> engla: aha, right. and pcwalton was saying "might as well make it human readable", yeah?
[14:18:31] <engla> I guess so
[14:18:48] <engla> we should enable this by default for all enums
[14:18:51] <engla> :)
[14:19:27] <bstrie> what is this syntax highlighting thing
[14:19:52] *** Quits: sebcrozet (sebcrozet@moz-87D51607.w80-13.abo.wanadoo.fr) (Client exited)
[14:20:44] *** Joins: hoverbear (andrew@moz-86FCBF4B.gv.shawcable.net)
[14:21:28] *** Joins: sebcrozet (sebcrozet@moz-A855F6C0.w82-127.abo.wanadoo.fr)
[14:21:36] *** Joins: dherman (dherman@moz-BDCCF091.hfc.comcastbusiness.net)
[14:21:36] *** ChanServ sets mode: +ao dherman dherman
[14:21:47] <mark_edward> bstrie: it wasn't really a syntax highlighting thing, more like an AST analyzy thing.... i can't find the link, he had a demo that explained it better
[14:21:59] *** Joins: nejucomo_ (Adium@moz-434492BB.dsl.static.sonic.net)
[14:22:11] <kimundi> rustfind on github
[14:23:28] <mark_edward> bstrie: http://dobkeratops.github.io/rftest/librustc/back/link.rs.html#123 ah yeah this demo is pretty cool
[14:24:05] <bstrie> neat
[14:24:17] <mark_edward> i wish you could browse every code base that way...
[14:25:16] <benh> should list all implemented traits/implementing impls next to the type/trait imo
[14:25:49] *** Quits: Khady (Khady@moz-31F9D77E.khady.info) (Ping timeout)
[14:26:04] <benh> pretty great though :D
[14:26:43] <mark_edward> benh: help doomlord with it! i wish i could, but i don't know enough about this sort of stuff! i thinks a great project and a good proving ground for building a rust IDe eventually
[14:27:25] *** Quits: hoverbear (andrew@moz-86FCBF4B.gv.shawcable.net) (Quit: hoverbear)
[14:27:27] *** Quits: jmgrosen (jmgrosen@moz-848F6087.sb.sd.cox.net) (Quit: jmgrosen)
[14:27:32] <luisbg> morning :)
[14:27:43] <dbaupp> benh: a little bit like http://seld.be/rustdoc/master/std/from_str/trait.FromStr.html ? :)
[14:28:00] *** Quits: sebcrozet (sebcrozet@moz-A855F6C0.w82-127.abo.wanadoo.fr) (Ping timeout)
[14:28:09] <benh> fine, i'll go with that :)
[14:33:10] *** Joins: cubic (cubic@moz-FE5AD6C7.mc.videotron.ca)
[14:33:18] *** Quits: xales (xales@moz-7DEA692E.forevernothing.com) (Ping timeout)
[14:33:29] *** Quits: jroll (jroll@moz-5989BB9E.members.linode.com) (Ping timeout)
[14:33:42] *** Quits: ivan (ivan@moz-531C3EC9.members.linode.com) (Ping timeout)
[14:33:54] *** Quits: friggle (friggle@moz-A607EAFA.members.linode.com) (Ping timeout)
[14:33:55] *** Quits: jesseray (Mibbit@moz-EE907FB2.dhcp.insightbb.com) (Ping timeout)
[14:34:20] <mark_edward> doomlord__: ping
[14:34:36] *** Quits: Caseus (bacon@moz-9F046088.members.linode.com) (Ping timeout)
[14:34:42] <doomlord__> hi
[14:35:26] *** Quits: bstrie (ben@moz-D5A1D0F5.members.linode.com) (Ping timeout)
[14:35:33] *** Joins: Caseus (bacon@moz-9F046088.members.linode.com)
[14:35:35] *** Joins: jroll (jroll@moz-5989BB9E.members.linode.com)
[14:35:50] *** Quits: dherman (dherman@moz-BDCCF091.hfc.comcastbusiness.net) (Quit: dherman)
[14:37:17] *** Joins: friggle (friggle@moz-A607EAFA.members.linode.com)
[14:37:19] *** Joins: maik (maik@moz-E348F31D.dip0.t-ipconnect.de)
[14:37:24] *** Joins: jesseray (Mibbit@moz-EE907FB2.dhcp.insightbb.com)
[14:37:59] *** Joins: mib_5b1t5y (Mibbit@243E1FF9.2DDB60F0.D196F00B.IP)
[14:38:21] *** Joins: ivan (ivan@moz-531C3EC9.members.linode.com)
[14:38:35] *** Quits: mib_5b1t5y (Mibbit@243E1FF9.2DDB60F0.D196F00B.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:38:38] *** Joins: mihneadb (mihneadb@EF54FE47.3689173D.FCAAE698.IP)
[14:38:43] *** Joins: bstrie (ben@moz-D5A1D0F5.members.linode.com)
[14:40:18] *** Quits: jaen (jaen@FB01674D.56B727FE.4B52F012.IP) (Ping timeout)
[14:42:17] *** Joins: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com)
[14:42:21] <mark_edward> doomlord__: hey i tried to makr rustfibd
[14:42:25] *** Joins: dherman (dherman@moz-BDCCF091.hfc.comcastbusiness.net)
[14:42:25] *** ChanServ sets mode: +ao dherman dherman
[14:42:39] <doomlord__> yes its broken, old::visitor deleted - i need to rework that
[14:49:34] *** Joins: fabiand (fabiand@moz-D1D00732.pool.mediaways.net)
[14:50:19] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[14:51:29] *** Quits: echristo (echristo@60A74940.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[14:58:10] *** Joins: jaen (jaen@moz-4A50686C.play-internet.pl)
[14:59:36] <olsonjeffery> acrichto: i think you're looking at some bogus file
[14:59:52] <acrichto> olsonjeffery: really? I'm looking at the overall diff
[14:59:53] <olsonjeffery> both what's on github and what's in my local repo doesn't reflect the fs_fstat call in RtioStream
[15:00:07] <acrichto> RtioStream shouldn't exist?
[15:00:26] <acrichto> I added that during processes but ended up removing it
[15:00:36] <olsonjeffery> this is the overall diff: https://github.com/mozilla/rust/pull/9235/files
[15:00:41] <olsonjeffery> search for fstat
[15:00:47] <olsonjeffery> it's only in the ll bindings
[15:01:13] <acrichto> oh sorry I mean 'trait RtioStream' should be deleted
[15:01:13] <olsonjeffery> it's definitely not in rtio
[15:01:26] <olsonjeffery> ah ok. that makes sense.
[15:01:27] *** Joins: bent (chatzilla@moz-932324BF.hsd1.ca.comcast.net)
[15:01:37] <acrichto> with that though, r+, this is awesome!
[15:01:40] <acrichto> also nice work :)
[15:01:50] <klutzy> \o/
[15:01:51] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[15:01:56] <olsonjeffery> fixed
[15:02:38] <acrichto> olsonjeffery: thanks!
[15:02:49] <olsonjeffery> yeah. let's allow 0.8 to land, i guess, and see what the community thinks of the APIs and what's still needed
[15:03:02] <olsonjeffery> i want to work on decoupling the EventLoop et al from libuv
[15:03:11] <olsonjeffery> i imagine there's
[15:03:15] <olsonjeffery> fsync is one thing i didn't map
[15:03:25] <olsonjeffery> also a streaming readdir. please pipe in on that libuv ticket
[15:03:31] <acrichto> libstd - libuv would be a pretty awesome thing to have
[15:03:47] <olsonjeffery> yeah. we need to get to the "blessed crate" arch first, i think
[15:03:56] <acrichto> olsonjeffery: yeah I'm not super passionate one way or the other on that, I mainly just wanted to make sure we understood what was happening
[15:04:27] <olsonjeffery> im kind of in the "good enough for the goose is good enough for the gander" camp. but, yeah. we can't neccesarily tolerate such extravegencies.
[15:05:02] <olsonjeffery> then again, someone in a memory-constrained scenario probably isn't using the libuv runtime, either.
[15:05:11] <acrichto> hehe
[15:05:54] <olsonjeffery> as part of #9128 want to hatch the scheme for "platform-backed IO" 
[15:06:08] <olsonjeffery> tl;dr a shadow of rt::uv, but with per-platform native calls for various things
[15:06:32] <olsonjeffery> the "truly blocking" option that will eschew scheduler magic to the greatest extent possible
[15:06:35] <acrichto> basically like a libc backend for libstd?
[15:06:55] <olsonjeffery> acrichto: posix/bsd sockets on *nix (or maybe some NS stuff in OSX, where aprop)
[15:06:56] <olsonjeffery> win32 on windows
[15:07:02] <olsonjeffery> basically being more OS-idiomatic
[15:07:19] <olsonjeffery> the ultimate goal will be to converge on libuv, heh.
[15:07:20] <acrichto> makes sense, although that seems like kinda what libuv is doing, but I dunno
[15:08:17] <olsonjeffery> acrichto: well the point is that several users have made very clear that they don't want to take the dep and they would want the "purely blocking" underlying APIs
[15:08:40] <olsonjeffery> also an ultimate goal is to sort of get to a much lighterweight scheduler/eventloop/iofactory, i think
[15:08:53] <olsonjeffery> so that you don't neccesarily have to spin up a new scheduler to use platform-backed IO
[15:08:56] <acrichto> that would definitely be a useful abstraction to have
[15:08:58] <olsonjeffery> which would pretty much be the case right now
[15:09:31] <olsonjeffery> anywho. that's the direction im going in. on the plus side, not much will be user facing, so i won't have people hassling me for docs.
[15:09:42] <acrichto> hehe :)
[15:09:49] <acrichto> thanks for those by the way, they look really good
[15:11:10] <olsonjeffery> you're welcome. no guarantees on whether its valid rust :)
[15:11:24] <olsonjeffery> cmr kinda sorta said he'd take on a ticket i made about compiling code examples that are in docstrings
[15:11:27] <olsonjeffery> as part of the build
[15:11:29] <acrichto> it'd be nice to auto-test the docs,
[15:11:42] <acrichto> yeah not sure wehther that would be detrimental or not
[15:11:54] <olsonjeffery> yeah. when i did the (second?) libuv net file stuff (what ultimate died in extra::net::tcp, etc)
[15:11:59] <olsonjeffery> the docs were really, really out of date
[15:12:02] <acrichto> I suppose I like the tutorial's perspective where you can "comment things out" and have them not show up
[15:12:09] <olsonjeffery> because of the massive churn between 0.3 and 0.7
[15:12:19] <acrichto> man that stuff ws old
[15:12:45] <olsonjeffery> i like to think that the horrible design of that system was what pushed brson to design newrt
[15:13:26] <acrichto> at least something worked out well :)
[15:14:04] <kimundi> What I think would be nice to have the option in the tutorial to show all source necessary to make this snipped run
[15:14:19] <kimundi> A check box for unhiding the commented out stuff
[15:14:53] *** Quits: StarLight (StarLight@moz-EF4285BF.dynamic.avangarddsl.ru) (Ping timeout)
[15:15:35] *** Quits: nejucomo_ (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: Leaving.)
[15:16:54] <olsonjeffery> kimundi: yeah. that is an issue
[15:18:41] <olsonjeffery> acrichto: yeah. it was kind of something had to happen though.. basically rust independently learning the lessons of PEP 3156
[15:19:08] <olsonjeffery> and if you think that one was bad.. you should've seen the iteration/POC that I had before that.
[15:19:21] <olsonjeffery> (which, btw, was the first use case that demanded crust fns)
[15:19:30] *** Joins: jstevans (Instantbir@94E82C66.C422786F.DDE5D3F6.IP)
[15:19:51] <acrichto> interesting...
[15:20:19] *** Joins: curmet (Mibbit@moz-E3EF3B5D.pools.arcor-ip.net)
[15:20:19] <olsonjeffery> and the "libuv support" before that was an rt c++ function that wrapped all the libuv stuff in a class
[15:20:35] *** Parts: curmet (Mibbit@moz-E3EF3B5D.pools.arcor-ip.net) ()
[15:20:46] <acrichto> that sounds like fun :P
[15:22:16] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[15:24:52] *** Joins: adridu59 (Mibbit@moz-E7A273CD.ac-paris.fr)
[15:25:24] *** Quits: adridu59 (Mibbit@moz-E7A273CD.ac-paris.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[15:25:45] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[15:25:45] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/cd_R6A
[15:25:45] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[15:25:57] *** Quits: jaen (jaen@moz-4A50686C.play-internet.pl) (Ping timeout)
[15:30:47] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[15:30:47] <ghrust> 01[13rust01] 15bors pushed 19 new commits to 06auto: 02http://git.io/ByW-kw
[15:30:47] <ghrust> 13rust/06auto 14af65057 15Jeff Olson: std/rt: in-progress file io work...
[15:30:47] <ghrust> 13rust/06auto 14055488d 15Jeff Olson: merge cleanup
[15:30:48] <ghrust> 13rust/06auto 14b49fc4c 15Jeff Olson: std: adding file::{stat,mkdir,rmdir}, FileInfo and FileReader/FileWriter...
[15:30:49] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[15:32:25] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[15:34:14] *** Joins: Kruppe (user@moz-A7EEDB3D.net.uwaterloo.ca)
[15:35:17] * olsonjeffery crosses fingers
[15:36:52] <olsonjeffery> win32 build failed
[15:37:25] <acrichto> that was fast :(
[15:37:52] <olsonjeffery> it's from the multistring parsing i added
[15:38:01] <olsonjeffery> the only use was in a win32-build-only section in os.rs
[15:38:12] <olsonjeffery> so it never built for me, so that's on me.
[15:38:34] <olsonjeffery> im pretty sure my local rust repo *still* hasn't finished building llvm on windows, heh
[15:39:52] *** Quits: maik (maik@moz-E348F31D.dip0.t-ipconnect.de) (Ping timeout)
[15:40:45] <olsonjeffery> acrichto: fixed
[15:41:31] <olsonjeffery> ill go ahead and run the build, because im bored. heh.
[15:42:45] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[15:42:45] <ghrust> 01[13rust01] 15olsonjeffery 04force-pushed 06try from 1471bebeb to 145d9932f: 02http://git.io/k471pw
[15:42:45] <ghrust> 13rust/06try 145d9932f 15Jeff Olson: std: fix win32 build error in os::env()
[15:42:45] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[15:43:28] <olsonjeffery> huh. is try not running on the buildbot?
[15:43:38] *** Quits: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP) (Ping timeout)
[15:43:49] <olsonjeffery> nm i see it
[15:44:22] *** Joins: jaen (jaen@moz-DE580867.play-internet.pl)
[15:45:23] <wakandan> uhm
[15:45:25] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[15:45:34] <wakandan> this morning I did a fetch and merge
[15:45:40] *** Joins: nejucomo_ (Adium@moz-A1B9243C.static-ip.telepacific.net)
[15:45:40] <wakandan> and I got the latest update
[15:45:45] <wakandan> then I did a fetch again
[15:45:46] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[15:45:46] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 144f770d7 to 1429cdf58: 02http://git.io/N3iJvQ
[15:45:46] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[15:45:47] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[15:45:47] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/2AHK9w
[15:45:47] <ghrust> 13rust/06auto 14b0647fe 15Kevin Ballard: Limit spans in bytes!() error messages to the argument in question...
[15:45:47] <ghrust> 13rust/06auto 1472e7c62 15bors: auto merge of #9245 : kballard/rust/bytes-span, r=catamorphism...
[15:45:47] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[15:45:49] <wakandan> now the update is gone...
[15:45:54] <wakandan> anybody know why?
[15:45:59] <wakandan> I'm quite new to git
[15:46:43] <benh> if you're on the master branch and you just say "git pull", it should only ever move you forwards
[15:46:49] <benh> or git fetch/git merge i guess.
[15:47:11] <benh> What is gone?
[15:47:16] <klutzy> git fetch only fetches remote commits
[15:47:23] *** flaper87 is now known as flaper87|afk
[15:47:31] <klutzy> `git merge origin/master` will merge commits to your branch
[15:47:56] <strcat> git pull is fetch + merge
[15:48:45] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[15:49:32] *** jld is now known as jld|tent
[15:50:12] <wakandan> klutzy: the latest update I got in the morning
[15:53:28] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[15:53:40] <nejucomo_> Does firefoxos run on the same hardware as android, typically?  Does the ARM & Android porting work for rust apply as well to firefox os devices?
[15:53:45] *** nejucomo_ is now known as nejucomo
[15:54:54] <strcat> nejucomo: firefox OS uses an android kernel
[15:55:22] <nejucomo> Ok.  (I'm reading their platform overview pages for the first time...)
[15:55:28] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[15:55:33] *** flaper87|afk is now known as flaper87
[15:56:14] <nejucomo> -and does android target a specific hardware platform?  ARM only?
[15:56:24] <klutzy> https://github.com/mozilla/rust/issues/7889 has both E-easy and E-hard :o
[15:56:25] <olsonjeffery> some kind of llvm build error on try-win
[15:56:30] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[15:57:18] <nejucomo> Sorry, this is a bit off topic.  I was just wondering about the potential to modify firefoxos platform with rust code...
[16:00:42] <olsonjeffery> anyone here could can unwedge try-win?
[16:00:45] <mark_edward> strcat: it does? the JVM makes me sad. iOS shows that you can program quality stuff in native code
[16:01:02] <strcat> mark_edward: it doesn't use the JVM 
[16:01:04] <olsonjeffery> acrichto: can you re-r+ my PR.. sadly, i can't verify it works on try-win for reasons above.. and im building llvm :/
[16:01:06] <strcat> it uses the android *kernel*
[16:01:20] <strcat> mark_edward: objective-C is slower than the real JVM anyway ;p
[16:01:33] <strcat> unless you stick to just the subset that's C
[16:01:34] <mark_edward> strcat: ah i see! 
[16:01:40] <strcat> dalvik is really slow though
[16:02:05] <strcat> mark_edward: it's just a patched linux kernel
[16:02:08] <mark_edward> yeah... i really wish you could right mobile apps in Rust, C++ if i had to.
[16:02:22] *** Joins: hoverbear (andrew@moz-DBAF5998.wireless.uvic.ca)
[16:02:36] <mark_edward> strcat: oh ok, i thought people would be writing webapps running on the Dalvik VM, lol
[16:02:49] <strcat> the reason for ubuntu's mobile version and firefoxos using android kernels are just so that they have the drivers available
[16:03:00] <mark_edward> makes perfect sense
[16:03:08] <strcat> I would rather see mozilla push for proper upstream open drivers instead of piggybacking on android's blobs
[16:03:49] <strcat> since doing something positive for FOSS can't really be expected of canonical ;p
[16:03:55] *** Quits: Benvie (brandon@5FD20F9A.53D07D95.EFF8B7BF.IP) (Quit: )
[16:03:56] *** Joins: SingingBoyo (singingboy@DAC9C672.CE76D40F.4F048BDC.IP)
[16:04:40] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[16:04:58] *** Quits: jstevans (Instantbir@94E82C66.C422786F.DDE5D3F6.IP) (Ping timeout)
[16:05:18] <mark_edward> strcat: silly, canonical IS FOSS
[16:05:51] <strcat> not really
[16:06:05] <strcat> lots of closed source software as a service projects, with open-source clients
[16:06:15] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[16:06:19] <mark_edward> strcat: needed a /s tag. play on the "Ubuntu is Linux" spat
[16:06:22] <strcat> they make you sign a contributor's agreement handing over your copying to contribute to anything
[16:06:42] <strcat> (they have a more modern one "only" allowing them to use your software under a proprietary license)
[16:06:53] <strcat> handing over your copyright*
[16:06:57] * strcat shrugs
[16:07:08] <strcat> they're as bad as oracle ;p
[16:07:55] <Amaranth> :(
[16:08:16] <mark_edward> yeah, but i like the pretty UI, so i use it on my desktop, which has a big enough GPU+CPU to run Unity with only a few stutters
[16:08:18] <SiegeLord> Doesn't Rust grab your copyright too?
[16:08:21] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[16:08:21] <ghrust> 01[13rust01] 15alexcrichton merged 06master into 06snap-stage3: 02http://git.io/Y51w9A
[16:08:21] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[16:08:57] <Amaranth> mark_edward: Compiz on desktop still uses OpenGL 1.1 plus a couple extensions required for unity
[16:09:05] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.1)
[16:09:06] <Amaranth> I tried to fix it but they were worried about stability
[16:09:15] <Amaranth> Doesn't matter anymore since they're throwing it out
[16:10:24] <afrey71> SiegeLord: huh? Rust is a language, not a legal entity...
[16:10:40] <SiegeLord> afrey71: The copyright in each file is to the "Rust developers"
[16:10:51] <strcat> SiegeLord: mozilla doesn't use copyright assignment
[16:11:01] <strcat> if you don't work for mozilla, you own the copyright on any contributions
[16:11:08] <mark_edward> afrey71: for Rust  code, of course it is?
[16:11:18] <strcat> "Rust developers" is just an easy way to refer to anyone who ever contributed
[16:11:24] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[16:11:48] <SiegeLord> Let's hope they never decide to relicense the code :P
[16:11:51] *** Quits: SingingBoyo (singingboy@DAC9C672.CE76D40F.4F048BDC.IP) (Ping timeout)
[16:12:09] <Amaranth> It's released under the expat license anyway
[16:12:18] <afrey71> SiegeLord: Yeah, lots of OSS projects do that. It's not a single legal entity, but a (borrowed? ;-)  ) pointer to a group of copyright holders.
[16:12:18] <strcat> it's under MIT/apache
[16:12:32] *** Joins: kelvin (kelvin@453FAF36.474E6E0A.DDE5D3F6.IP)
[16:12:33] <Amaranth> strcat: MIT is ambiguous
[16:13:22] <cmr> Amaranth: not when the full text of the license is included with the distribution?
[16:13:44] <Amaranth> cmr: Right which is how I knew it was the expat license ;)
[16:14:24] <Amaranth> Although I guess for the most part things seem to have settled on MIT = Expat and MIT/X11 = the other MIT license mainly used for X
[16:14:30] *** Quits: wakandan (Mibbit@5B9B91CA.8FF05F7.4605F140.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[16:14:47] <kelvin> So I'm currently using libc to do background processes and such with fork(). Do tasks and futures in rust provide the same basic functionality?
[16:15:16] <cmr> kelvin: kinda-sorta-not-really, since rust tasks aren't preemptively scheduled.
[16:15:22] <cmr> So you need to insert yield points.
[16:15:26] <strcat> cmr: they are, you can ask for threads
[16:15:36] <strcat> spawn_sched instead of spawn
[16:15:42] *** Joins: ozten (ozten@19BD73A1.5D8BCA3A.A0C1B52F.IP)
[16:15:44] <kelvin> cmr: yield points?
[16:15:46] <strcat> kelvin: no
[16:15:52] <strcat> well, kind of...
[16:15:53] <cmr> strcat: that's an entirely new scheduler, not just a task, isn't it?
[16:16:10] <strcat> cmr: thread == scheduler
[16:16:21] <strcat> cmr: each thread has an event loop
[16:16:26] <Amaranth> Are they rescheduled on syscalls or is it entirely cooperative?
[16:16:45] <cmr> Amaranth: entirely cooperative, but newrt io yields for you.
[16:16:49] <strcat> Amaranth: schedulers are threads, and non-scheduler tasks are scheduled onto the scheduler cooperatively
[16:16:51] <cmr> that's part of its point; scheduler integration.
[16:16:59] <olsonjeffery> cmr: yield on calls into io, send & recv iirc
[16:17:10] <olsonjeffery> whoops. Amaranth: i mean.
[16:17:23] <olsonjeffery> and probably stuff that impls Select
[16:17:28] <strcat> so... as far as I understand it
[16:17:33] <strcat> spawn_sched -> spawn 3 times
[16:17:37] <strcat> you have 4 tasks on 1 thread
[16:18:01] <strcat> (sharing the event loop)
[16:18:03] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[16:18:08] <Amaranth> That makes them really good for a lot of short lived tasks, network communication, and not a lot else I can think of
[16:18:23] *** Quits: Kruppe (user@moz-A7EEDB3D.net.uwaterloo.ca) (Ping timeout)
[16:19:22] <olsonjeffery> Amaranth: well we chose easy-to-reason-about semantics over flexibility, at this time
[16:19:28] <olsonjeffery> also we're sort of hamstrung by libuv
[16:19:36] <olsonjeffery> which will hopefully be dealt with in the mid-term
[16:19:47] <olsonjeffery> and s/well we chose/well brson chose/
[16:19:57] <olsonjeffery> in any case, i think its better than what we had before
[16:20:28] <kelvin> so, moral of the story, if I want fork()-like functionality, I should just stick with libc for the time being?
[16:20:35] <strcat> kelvin: no
[16:20:39] *** Quits: nejucomo (Adium@moz-A1B9243C.static-ip.telepacific.net) (Quit: Leaving.)
[16:20:56] <cmr> So it seems the newrt has a concept of a GreenTask and a SchedTask
[16:21:15] <cmr> SchedTask are 1:1 threads, GreenTask are N:M threads
[16:21:18] *** Joins: jstevans (Instantbir@AFF373EB.8FFBE666.DDE5D3F6.IP)
[16:21:50] <strcat> ah right it's different than the old days
[16:21:54] *** Quits: jaen (jaen@moz-DE580867.play-internet.pl) (Ping timeout)
[16:22:03] <olsonjeffery> SchedTask/GreenTask is about runtime context
[16:22:24] <cmr> so when created a SchedTask what happens?
[16:22:31] <olsonjeffery> you don't create a SchedTask
[16:22:34] *** Joins: echristo (echristo@DCF57675.D6CCE4AE.77834EAA.IP)
[16:22:46] <olsonjeffery> when you spawn a task, it's a GreenTask (coro + heap, etc)
[16:22:48] <cmr> Then waht's new_sched_task public? :\
[16:22:58] <cmr> *why's
[16:23:10] <strcat> cmr: you can create new schedulers
[16:23:13] <olsonjeffery> SchedTask is the "schceduler context", ie code that runs during task rescheduling, clean-up, teardown, etc
[16:23:47] <olsonjeffery> if you look at uvio, cases where deschedule_running_task_and_then
[16:23:49] <strcat> cmr: I think if you spawn a scheduler and then spawn a few tasks from it - that's a group of tasks scheduled on the same scheduler thread
[16:23:57] <strcat> olsonjeffery knows more though ;p
[16:24:00] <olsonjeffery> that cb that is passed is in the "task cleanup code" and it runs in the SchedTask context
[16:24:12] <mark_edward> i've heard realy great things about GHC's runtime. do you guys get inspiration from that?
[16:24:33] <strcat> well haskell has a similar way of doing things
[16:24:45] <strcat> but they have yield points on allocations, and 99.9% of haskell code is allocating like crazy all the time
[16:24:53] <Amaranth> N:M threads are making a comeback :)
[16:25:21] <strcat> Amaranth: well, to allow you to express efficient I/O without callbacks
[16:25:26] <olsonjeffery> anyways. tl;dr == a Scheduler is always 1:1 with OS threads .. all tasks are subordinate to a Scheduler
[16:25:38] <olsonjeffery> sometimes the scheduler's janitor code runs "as a task" of sorts, in between other user tasks
[16:25:39] <Amaranth> strcat: That was the original point too
[16:25:41] <olsonjeffery> that is the SchedTask
[16:25:54] <kimundi> So what call would you have to make to spawn a new task on a new scheduler?
[16:25:59] <Amaranth> Well, that and because they thought it was more efficient that the overhead of a kernel thread for each userspace thread
[16:26:03] <olsonjeffery> kimundi: spawn_sched
[16:26:21] <kimundi> I see
[16:26:45] <Amaranth> But the scheduling was too complicated and kernel threads turned out to be really cheap so 1:1 threads won
[16:26:49] <kimundi> But I guess per default it could migrate away from that? workstealing and such?
[16:26:51] <olsonjeffery> also when the Scheduler goes into the EventLoop, that is in SchedTask
[16:27:14] <olsonjeffery> and when the EventLoop wakes the scheduler up for some reason, it'll re-enter the GreenTask as aprop
[16:27:28] <strcat> Amaranth: lack of preemption + cheaper userspace context switches is what makes them good for that
[16:27:35] <olsonjeffery> anyways. conceal your eyes, these impl details are not important.
[16:28:55] <strcat> if you implemented preemptive fair-ish scheduling in userland, it'd be much slower than just yielding when they need to wait for something from the event loop
[16:28:57] <olsonjeffery> avert*
[16:29:29] <kimundi> Just to confirm: Does the runtime per default spawn as many scheduler as there are cpu cores, so that all spawned task get distributed evenly over them, being belanced with workstealing and such?
[16:29:48] <kimundi> Or is that wrong/todo?
[16:29:50] <Amaranth> kimundi: Apparently it spawns 17 kernel threads on startup
[16:29:55] <strcat> kimundi: you can spawn as many threads as you like
[16:30:02] <strcat> Amaranth: on OS X maybe...
[16:30:06] *** Joins: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP)
[16:30:06] *** ChanServ sets mode: +o jdm
[16:30:06] <kimundi> strcat: Asking about default behavior here
[16:30:27] <kimundi> only using task::spawn, that is
[16:30:35] *** Quits: Ralith (ralith@moz-A7071297.customer.broadstripe.net) (Ping timeout)
[16:30:43] <olsonjeffery> task::spawn creates a new task in the existing scheduler
[16:30:46] *** Joins: sebcrozet (sebcrozet@moz-87D51607.w80-13.abo.wanadoo.fr)
[16:30:49] <olsonjeffery> all tasks are cooperative within the same scheduler
[16:31:16] <kimundi> So, per default only using task spawn all task usercode spawns will run on only one scheduler?
[16:31:25] <olsonjeffery> yes.
[16:31:30] <kimundi> and thus one thread?
[16:31:34] <olsonjeffery> correct.
[16:31:53] <kimundi> Is workstealing implemented?
[16:31:57] <strcat> yes
[16:32:03] <strcat> but not efficiently ;]
[16:32:10] *** Joins: xales (xales@moz-7DEA692E.forevernothing.com)
[16:32:35] <kimundi> So, if you spawn N schedulers, and then continue to spawn M tasks on the last one, would they get evenly distributed?
[16:33:02] <kelvin> are futures fundamentally the same as tasks, running on one scheduler and one thread?
[16:33:08] <Amaranth> Or distributed at all?
[16:33:15] <olsonjeffery> kimundi: depends.
[16:33:19] <cmr> kelvin: are you talking about extra::future?
[16:33:22] <kelvin> yeah
[16:33:29] <olsonjeffery> if those tasks have IO, they have to "re-home" to the scheduler that created, because of impl details of libuv
[16:33:34] <kimundi> olsonjeffery: On whether yield gets called and/or io happens?
[16:35:10] <cmr> kelvin: so, extra::future is really old, and hasn't been touched in any significant way in almost a year
[16:35:26] <strcat> Amaranth: it spawns 4 on startup, on linux
[16:35:32] <strcat> on a CPU with 4 cores at least.
[16:35:42] <Amaranth> strcat: I was just going by https://github.com/mozilla/rust/issues/8870
[16:36:06] <strcat> that's rustc though, not rust in general + it's on OS X so libuv has awful workarounds
[16:36:30] <strcat> rustc -v also spawns 4 threads on linux though
[16:36:44] <strcat> just looking at strace and counting the clone calls
[16:37:15] <strcat> it also forks at some point... ?
[16:37:22] *** Joins: miza (miza@moz-908EA8DE.home.otenet.gr)
[16:38:12] *** Joins: victorporof_ (victorporo@DD69D5EC.67CDC207.79933D60.IP)
[16:38:15] <strcat> rustc seems to vary a bit, sometimes it spawns more
[16:38:17] <kelvin> cmr: ok, I was asking because it's in the task tutorial http://static.rust-lang.org/doc/tutorial-tasks.html and I was curious about how it worked
[16:38:34] *** Quits: anshin (anshin@CD85F10D.F21429E2.354459FA.IP) (Client exited)
[16:38:38] *** Quits: victorporof (victorporo@C77D234B.A58E0E41.6A4F8DA2.IP) (Ping timeout)
[16:39:12] *** Joins: anshin (anshin@CD85F10D.F21429E2.354459FA.IP)
[16:39:48] *** Quits: anshin (anshin@CD85F10D.F21429E2.354459FA.IP) (Client exited)
[16:39:53] <strcat> olsonjeffery: so if you spawn a new scheduler and don't spawn any tasks from it, will it always just be a 1:1 scheduled task atm?
[16:39:53] *** Joins: anshin (anshin@CD85F10D.F21429E2.354459FA.IP)
[16:40:07] <strcat> or do other tasks get rescheduled onto it
[16:40:28] <olsonjeffery> strcat: if the Scheduler is sleeping (because all active tasks are blocked on IO, recv, etc) it may try to steal work
[16:41:15] <olsonjeffery> tasks don't reschedule to other schedulers voluntarily, they only get stolen away or re-homed for IO
[16:41:22] *** Quits: anshin (anshin@CD85F10D.F21429E2.354459FA.IP) (Client exited)
[16:41:36] <olsonjeffery> and you can pin a task to a schedule deliberately, if that's what you want
[16:41:37] *** Joins: anshin (anshin@CD85F10D.F21429E2.354459FA.IP)
[16:41:49] <strcat> ah, was wondering if that functionality was still around
[16:42:00] <olsonjeffery> well, actually i might be wrong there, hold on
[16:42:10] <strcat> olsonjeffery: but I guess pinning to it doesn't mean it can't steal work?
[16:42:15] <olsonjeffery> i know a task always holds its "parent scheduler" that created it
[16:44:21] <olsonjeffery> ok.. so it looks like you can't manually pin a task right now
[16:44:32] *** Joins: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP)
[16:44:49] <olsonjeffery> but it happens, practically speaking, if the task ends up holding IO handles
[16:45:19] <olsonjeffery> in which case, another scheduler might try to steal the task, but it'll end up re-homing it to its parent scheduler when it goes to do IO with said handles
[16:46:08] *** Quits: mihneadb (mihneadb@EF54FE47.3689173D.FCAAE698.IP) (Connection reset by peer)
[16:46:17] *** Quits: barosl (barosl@3DE683B6.E551553C.7544CABF.IP) (Quit: ëžœë¤ì€ ì‡ í‡´í–ˆìŠµë‹ˆë‹¤.)
[16:46:25] *** Joins: mihneadb (mihneadb@EF54FE47.3689173D.FCAAE698.IP)
[16:48:07] *** Quits: mihneadb (mihneadb@EF54FE47.3689173D.FCAAE698.IP) (Ping timeout)
[16:49:08] *** flaper87 is now known as flaper87|afk
[16:49:14] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[16:49:25] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[16:52:02] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.1)
[16:52:20] <olsonjeffery> is there a weekly meeting going on?
[16:52:34] *** Quits: kelvin (kelvin@453FAF36.474E6E0A.DDE5D3F6.IP) (Ping timeout)
[16:55:24] *** Joins: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net)
[16:55:34] <pnkfelix> olsonjeffery: in five minutes I believe.  Or else I'm missing it.
[16:56:50] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[16:56:55] <pnkfelix> cmr: I don't think I'd be pointing at Rust compilation times as a way to support design decisions to newcomers right now.  :)
[16:57:38] <cmr> pnkfelix: computational complexity was a huge part of the decision aiui
[16:58:43] <olsonjeffery> pnkfelix: etherpad link, please?
[16:58:52] <pnkfelix> olsonjeffery: it hasn't started yet?
[16:58:56] <olsonjeffery> i paved my machine, so i can't go to my browser history as i usually do
[16:59:08] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: Leaving.)
[16:59:21] <olsonjeffery> what was last week's url?
[17:00:29] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[17:00:42] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[17:00:42] *** ChanServ sets mode: +ao brson brson
[17:01:02] <benh> I'm guessing https://etherpad.mozilla.org/Meeting-weekly-2013-09-10 
[17:01:13] <benh> https://etherpad.mozilla.org/Meeting-weekly-2013-09-17 also seems to exist!!
[17:02:11] <olsonjeffery> yeah.. it's usually stubbed out ahead of time..
[17:02:13] *** Joins: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP)
[17:04:16] *** Joins: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net)
[17:05:24] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[17:05:24] *** ChanServ sets mode: +o tjc
[17:05:48] <anshin> help
[17:06:34] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[17:06:45] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[17:07:27] <strcat> brson: https://github.com/mozilla/rust/pull/9256 r?
[17:07:29] *** Joins: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP)
[17:07:32] *** Quits: tgummerer (tgummerer@51D3B54.FEF996EA.EA6FEF3D.IP) (Ping timeout)
[17:08:12] <anshin> disregard. typed "/amsg help" assuming it would explain the amsg command
[17:09:05] *** Joins: nejucomo_ (Adium@moz-A94CACD5.dsl.pltn13.sbcglobal.net)
[17:09:24] <olsonjeffery> heh, nice: http://buildbot.rust-lang.org/builders/try-bsd/builds/449/steps/test/logs/stdio
[17:09:43] <olsonjeffery> helpful!
[17:10:36] <olsonjeffery> oh, shoot. i see the issue. that's not good at all.
[17:11:45] *** Quits: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP) (Ping timeout)
[17:12:38] *** Quits: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net) (Quit: Leaving.)
[17:12:56] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[17:12:56] *** ChanServ sets mode: +ao pcwalton pcwalton
[17:13:17] *** Joins: eschweic (Adium@moz-54DE4365.cit.cornell.edu)
[17:13:49] *** Quits: fabiand (fabiand@moz-D1D00732.pool.mediaways.net) (Quit: Verlassend)
[17:14:11] *** Joins: riley (riley@8BA43816.9AA11D69.65DDFA89.IP)
[17:14:40] *** Joins: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP)
[17:15:00] <engla> should this be converted into a fixme? "NOTE: `BufferedWriter` will NOT flush its buffer when dropped."
[17:15:38] *** Joins: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net)
[17:16:04] <sfackler> maybe? it's blocked on the inability to get a mutable reference to self in drop, but there are some unanswered questions about what it should do if it hits a condition trying to flush
[17:17:20] <strcat> drop takes &mut self now
[17:17:22] <engla> right. you get &mut self in Drop as of a couple of hours ago
[17:17:33] <strcat> it should eventually take it by-value
[17:17:37] <strcat> if possible
[17:17:57] <strcat> anyway I need to start clearing out the transmutes of & to &mut
[17:18:06] <strcat> want to tag them as readonly
[17:18:09] <strcat> (for T: Freeze)
[17:18:10] *** Joins: maik (maik@moz-FECBC48.dip0.t-ipconnect.de)
[17:18:20] *** Quits: lenstr (lenstr@E0E80B8D.ED45D46B.DFEAE789.IP) (Client exited)
[17:18:41] <engla> That sounds good. Eventually we'll need docs for safe use of unsafe
[17:19:00] <strcat> brson and I started that
[17:19:17] <strcat> engla: https://github.com/mozilla/rust/wiki/Unsafety-draft
[17:19:41] *** Quits: hoverbear (andrew@moz-DBAF5998.wireless.uvic.ca) (Quit: hoverbear)
[17:19:59] <engla> because of the overflow issue, I think we should have campaigns to limit the number of lines that are unsafe, and review them periodically
[17:20:47] *** Joins: BossKonaSegway (Michael@moz-2986F42D.col.wideopenwest.com)
[17:24:06] <strcat> I think it's complete now...
[17:24:54] *** Parts: eakuefner (eakuefner@moz-9EDCAF3.com) ()
[17:25:41] *** Joins: ofeldt- (ofeldt@moz-39E7AEB3.dip0.t-ipconnect.de)
[17:26:05] *** Joins: nano (nano@moz-74CAD1CA.superkabel.de)
[17:26:21] *** Quits: ofeldt (ofeldt@moz-4984319B.dip0.t-ipconnect.de) (Ping timeout)
[17:26:46] <engla> I wanted to ask you about ptr.offset; since it takes an int offset, and says that arithmetic overflow is UB, I still assume that ptr.offset can reach any index in a vector, so it's valid for offsets between int::max and uint::max too
[17:28:01] *** Joins: hoverbear (andrew@moz-9929A47A.wireless.uvic.ca)
[17:28:09] <strcat> it can reach any index in a vector
[17:28:53] <strcat> there are intptr_t (int is the same size) and uintptr_t in C
[17:29:18] <strcat> so you have to be able to address all the memory with a signed integer afaik (where -1 can represent an error)
[17:29:20] <strcat> at least on POSIX
[17:29:38] *** Joins: serge_sans_paille (serge@moz-46D3B235.fbx.proxad.net)
[17:30:37] <zxcdw> It would be nice to see some formal analysis between C and Rust from the view of making a system to compile from C to Rust.
[17:30:51] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[17:30:51] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/2AHK9w
[17:30:51] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[17:31:07] <zxcdw> What sorts of issues would arise, what kind of compromises would be need to made and would it even be plausible to make such a compiler in the first place without too ig sacrifices :)
[17:31:26] <strcat> zxcdw: it would be possible, without any real issues/compromises
[17:31:35] *** AutomatedTester is now known as AutomatedTester|away
[17:31:35] *** Quits: CarpNet (ac@moz-FD24B77.sohonet.co.uk) (Quit: Leaving)
[17:31:39] <strcat> you would translate C functions to 'unsafe fn'
[17:31:52] <strcat> and there are 1:1 mappings between the languages for everything
[17:32:20] <strcat> at least with C89
[17:32:25] <zxcdw> I would be more interested in learning/pondering about how far one could go with translating idiomatic C to idiomatic Rust :)
[17:32:33] *** Joins: tikue_ (tkuehn@400137F6.28336FB0.689607DE.IP)
[17:32:37] <zxcdw> as in, throw in Linux kernel and let it spit out same but in Rust ;)
[17:32:43] <strcat> zxcdw: that wouldn't be possible
[17:33:07] <strcat> idiomatic rust is fundamentally different than idiomatic C, because it contains the unsafe concepts and builds safe abstractions on them
[17:34:06] <zxcdw> Well, if anything, I've learned that if human can do such translation with some drawbacks and pitfalls, eventually so should a static analysis tool somehow :)
[17:34:16] <zxcdw> Not that I would envision such a tool to be real or even working
[17:34:33] <strcat> it's provably not possible in all cases, and not feasible in almost all
[17:34:34] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[17:34:35] <zxcdw> rather than to just to see what fails and where, why and what can be done to work around and with what drawbacks etc
[17:34:41] *** Joins: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP)
[17:34:41] *** Quits: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP) (Z:lined (Open Proxy found on your host. Please visit www.blitzed.org/proxy?ip=115.68.131.49 for more information.))
[17:35:04] <tjc> humans can write novels, computers can't do that yet :-) (at least not ones that a human would enjoy reading)
[17:35:22] <tjc> converting C to rust is a creative task
[17:36:00] <zxcdw> Same could be said about language translation, but it still happens in compilers and even nativ elanguage translatiosn too, albeit at somewhat varying accuracy :)
[17:36:45] <tjc> Sure, but compilers translate a "more-understandable" language to a "less-understandable" language
[17:37:06] <strcat> compiling C is easy, proving it to be memory safe isn't ;p
[17:37:07] *** Joins: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr)
[17:37:12] <adridu59> "error: failed to find an implementation of trait std::num::Algebraic for int" yuck!
[17:37:15] <strcat> and to translate to safe rust you'd need to do that
[17:37:32] <strcat> most C functions aren't memory safe, anyway
[17:38:07] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[17:38:19] <olsonjeffery> can i get one more r+ from someone? i just fixed some whitespace on this: https://github.com/mozilla/rust/pull/9235
[17:38:21] <olsonjeffery> apologies
[17:38:44] <strcat> olsonjeffery: you can have git warn you about that when you try to commit, btw
[17:39:33] <strcat> olsonjeffery: copy .git/hooks/pre-commit.sample to .git/hooks/pre-commit (and do it in /usr/share/git-core/templates/hooks for new repos)
[17:39:43] <strcat> magical whitespace errors
[17:39:48] <strcat> from our .gitattributes
[17:39:59] <bjz> adridu59: what are you trying to do? pow?
[17:40:13] <adridu59> sqrt and pow
[17:40:17] <adridu59> I did casr
[17:40:19] <adridu59> cast
[17:40:24] <bjz> -_-#
[17:40:30] *** Quits: hoverbear (andrew@moz-9929A47A.wireless.uvic.ca) (Quit: hoverbear)
[17:40:34] <adridu59> but sqrt says "expected `<VI1>` but found `float` (expected float but found integral variable)"
[17:40:43] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[17:40:43] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/P870Cw
[17:40:43] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[17:40:43] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[17:40:44] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/nWBCbg
[17:40:44] <ghrust> 13rust/06auto 14a5275ff 15Jeff Olson: std: whitespace clean up io::file docs
[17:40:44] <ghrust> 13rust/06auto 145e402ed 15bors: auto merge of #9235 : olsonjeffery/rust/newrt_file_io_1, r=thestinger...
[17:40:44] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[17:40:57] <bjz> pow isnt impled for int yet :(
[17:41:02] <adridu59> I think that there's something wrong with the error message too
[17:41:04] <adridu59> "expected `<VI1>` but found `float` (expected float but found integral variable)"
[17:41:14] *** jack is now known as jack|plane
[17:41:14] *** Joins: hoverbear (andrew@moz-9929A47A.wireless.uvic.ca)
[17:41:15] <bjz> what was the code?
[17:41:17] <adridu59> says both found float and expected float
[17:41:21] <strcat> I don't really understnad why that very useful sample hook isn't the default...
[17:41:25] <strcat> understand*
[17:41:39] <olsonjeffery> strcat: gracias
[17:41:49] <adridu59> my bad! that one was my fault
[17:41:53] <bjz> if you tried sqrt(cast(2)), it wouldn't work
[17:42:01] <adridu59> but the error message is still very misleading
[17:42:04] <olsonjeffery> strcat: yeah, i usually try to run make check before pushing, i failed to do that :/
[17:42:14] <adridu59> no it's because I wanted to use it in a range and forgot to cast back to int
[17:42:18] <adridu59> (so much casts)
[17:42:19] *** Quits: Larry (larryfox@moz-343B6F0C.nyc.biz.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[17:42:21] <bjz> oh
[17:43:19] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[17:44:07] <mark_edward> rusti: std::uint::from_str("100")
[17:44:08] -rusti- <anon>:7:9: 7:28 error: unresolved name `std::uint::from_str`.
[17:44:08] -rusti- <anon>:7          std::uint::from_str("100")
[17:44:08] -rusti-                   ^~~~~~~~~~~~~~~~~~~
[17:44:09] -rusti- error: aborting due to previous error
[17:44:09] -rusti- application terminated with error code 101
[17:44:57] <mark_edward> rusti: let x: uint = from_str("100"); x
[17:45:00] -rusti- pastebinned 7 lines of output: http://ix.io/87S
[17:45:02] *** Quits: afrey71 (Mibbit@moz-FFEF2F3.maier.linuxprofy.net) (Quit: http://www.mibbit.com ajax IRC Client)
[17:45:21] <mark_edward> rusti: let x: Option<uint> = from_str("100"); x
[17:45:21] -rusti- Some(100u)
[17:45:44] <kimundi> rusti: ::std::num::pow_with_uint(45, 5)
[17:45:44] -rusti- <anon>:7:9: 7:34 error: cannot determine a type for this bounded type parameter: unconstrained type
[17:45:45] -rusti- <anon>:7          ::std::num::pow_with_uint(45, 5)
[17:45:45] -rusti-                   ^~~~~~~~~~~~~~~~~~~~~~~~~
[17:45:45] -rusti- application terminated with error code 101
[17:45:50] <kimundi> rusti: ::std::num::pow_with_uint(45u, 5u)
[17:45:51] -rusti- <anon>:7:9: 7:34 error: cannot determine a type for this bounded type parameter: unconstrained type
[17:45:51] -rusti- <anon>:7          ::std::num::pow_with_uint(45u, 5u)
[17:45:51] -rusti-                   ^~~~~~~~~~~~~~~~~~~~~~~~~
[17:45:51] -rusti- application terminated with error code 101
[17:46:10] <kimundi> rusti: let f: float = ::std::num::pow_with_uint(45u, 5u); f
[17:46:11] -rusti- 184528125
[17:46:25] <kimundi> strcat: Ah, this reminds me
[17:46:30] <adridu59> mark_edward: iirc that one was modified very recently
[17:46:47] <kimundi> strcat: Idea I had earlier to make people spam this channel less with rusti (includes myself)
[17:47:18] <kimundi> strcat: normal "rusti: " makes it reply in an pm, which hopefully makes the person issuing the command continue it there
[17:47:43] *** Quits: adridu59 (Mibbit@moz-6C393FDD.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[17:47:52] <kimundi> strcat: If you want to show something to the channel, you have to type "rusti: yell <input>" or "RUSTI: <input>"
[17:48:43] * strcat shrugs
[17:49:53] <kimundi> to work around the "using the bot directly is more convenient than querying it" problem :P
[17:51:21] *** Joins: jstevans1 (Instantbir@AFF373EB.8FFBE666.DDE5D3F6.IP)
[17:51:21] *** Quits: jstevans (Instantbir@AFF373EB.8FFBE666.DDE5D3F6.IP) (Connection reset by peer)
[17:52:48] *** Joins: jstevans (Instantbir@8D7D56CC.996F3747.DDE5D3F6.IP)
[17:53:53] *** Quits: jstevans1 (Instantbir@AFF373EB.8FFBE666.DDE5D3F6.IP) (Ping timeout)
[17:57:39] *** Joins: Larry (larryfox@moz-343B6F0C.nyc.biz.rr.com)
[17:58:09] *** Joins: Khady (Khady@moz-31F9D77E.khady.info)
[17:59:04] *** Joins: mrb (mrb@moz-BF7E8289.ca)
[18:00:48] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[18:00:48] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 145e402ed to 1472e7c62: 02http://git.io/N3iJvQ
[18:00:48] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[18:00:50] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[18:00:50] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/5vQtLw
[18:00:50] <ghrust> 13rust/06auto 1477bbf23 15Steve Klabnik: Implementing 'rustpkg init'....
[18:00:50] <ghrust> 13rust/06auto 14023aab4 15bors: auto merge of #9236 : steveklabnik/rust/rustpkg_init, r=catamorphism...
[18:00:51] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[18:01:40] *** Joins: steveklabnik (steveklabn@moz-5EF6C37C.socal.res.rr.com)
[18:01:41] *** Quits: tikue_ (tkuehn@400137F6.28336FB0.689607DE.IP) (Quit: tikue_)
[18:01:53] <bstrie> just googled for "python list" and the second result is the official docs for python 1.5
[18:02:01] <bstrie> this is my greatest fear for rust
[18:02:04] <steveklabnik> heh
[18:02:21] <steveklabnik> yeah, at 1.0 we should have a Great Purge
[18:02:30] <steveklabnik> frankly, losing the google juice would be good
[18:02:34] <steveklabnik> less people finding old answers ;)
[18:02:52] <acrichto> tjc: ping
[18:03:07] <kmc> "that's your greatest fear?"
[18:04:11] <bstrie> kmc: bad docs will kill a language :)
[18:04:26] <kmc> indeed
[18:04:39] <strcat> bstrie: python has bad documentation and is doing fine ;p
[18:05:15] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Quit: pcwalton)
[18:05:20] <strcat> good APIs + bad documentation > good documentation + terrible APIs (php), apparently
[18:05:27] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[18:05:29] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: Leaving.)
[18:06:02] <bstrie> strcat: python survived for me because of how frequently I could blindly guess and have things Just Work
[18:06:06] *** Joins: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com)
[18:06:07] *** ChanServ sets mode: +ao pcwalton pcwalton
[18:06:17] *** Joins: tiffany (kawaii@moz-EB8B0C08.dhcp.embarqhsd.net)
[18:06:19] <bstrie> a good repl abets this
[18:06:33] <bstrie> like, I wanted to see if there was a method on lists to remove an item by value
[18:06:37] <bstrie> turns out it was .remove
[18:06:39] <bstrie> took me two guesses
[18:06:57] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[18:06:57] *** ChanServ sets mode: +o tjc
[18:06:58] <strcat> bstrie: well, you have to just blindly guess because they don't have the needed interfaces listed, or possible exceptions, or examples for most functions
[18:07:02] <strcat> :D
[18:07:32] <bstrie> ok, but let's still set our docs bar higher than python's :P
[18:08:07] <kmc> and you can query docs from the repl in python
[18:08:18] <kmc> they aren't great docs but they're right there, which makes the guesswork that much more effective
[18:09:09] <kmc> my #1 complaint about library documentation is when there are docs for each function/type but no overview that tells you where to start looking
[18:09:44] <olsonjeffery> good docs are a great thing, for sure. except when you have to write/maintain them.
[18:10:25] <tjc> olsonjeffery: arguably, writing the docs first makes writing the code (and maintaining it) easier ;-)
[18:10:26] <bstrie> olsonjeffery: didn't you hear, steveklabnik volunteered to write and maintain all rust docs for the rest of his life
[18:10:29] <tjc> (Not that I ever really do that)
[18:10:30] <strcat> kmc: I'm tempted to move http://static.rust-lang.org/doc/tutorial-container.html#iterators into the module docstring of std::iter...
[18:10:39] <strcat> no one ever finds it
[18:10:55] <tjc> oh, hey, steveklabnik promised to do that? sweet, let's send him a T-shirt ;-)
[18:11:07] * kimundi holds the opinion that having to only type three '/' instead of and elaborate "/** * * * */" constructs helps lower the bar quite a bit
[18:11:16] <steveklabnik> bstrie tjc ahahahaha
[18:11:29] <steveklabnik> i wore that shirt the other day EVEN THOUGH IT WAS BROWN
[18:11:43] <tjc> steveklabnik: what's wrong with brown? (I think I know the answer)
[18:11:44] <kimundi> They're all brown
[18:11:44] <steveklabnik> tjc: thanks for the r+, will have another incoming soon that fixes the tutorial to use it and fixes the usage message o_O
[18:11:47] <bstrie> brown is so gauche
[18:11:49] <olsonjeffery> my rust shirt got bleach stains.
[18:11:50] <olsonjeffery> im sad.
[18:11:51] <tjc> steveklabnik: awesome!
[18:11:57] <olsonjeffery> im still gonna wear it for my rust talk
[18:12:01] <steveklabnik> brown isn't black, i only wear black clothing, with the occasional splash of red. ;)
[18:12:04] <tjc> olsonjeffery: makes up for all the bleached shirts in the world that have rust stains
[18:12:09] <strcat> olsonjeffery: that's what brown sharpie is for
[18:12:13] <tjc> steveklabnik: Yeah, my guess was "because it's not black" :-)
[18:12:14] <kimundi> olsonjeffery: Be happy, yours is uniqe!
[18:12:15] <kmc> strcat: yeah, that sounds good to me
[18:12:30] <bstrie> steveklabnik: just have everyone in the auditorium wear sunglasses
[18:12:33] <strcat> although I guess it'll ruin the sharpie.
[18:12:37] <strcat> but it's worth it
[18:12:43] <steveklabnik> i'm happy to write docs in exchange for everyone else answering my silly questions about how it works :)
[18:13:55] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Input/output error)
[18:14:00] <olsonjeffery> ARGH.
[18:14:00] <steveklabnik> it being the code
[18:14:33] <strcat> hm
[18:14:59] <strcat> I guess https://github.com/mozilla/rust/wiki/Unsafety-draft can become part of the ffi tutorial, and it can be renamed
[18:15:29] * strcat doesn't have a good name
[18:15:46] <strcat> there's already an unsafe block section there
[18:16:01] *** Quits: jstevans (Instantbir@8D7D56CC.996F3747.DDE5D3F6.IP) (Ping timeout)
[18:16:25] <olsonjeffery> brson: did you know that try-win is wedged on llvm build, it seems?
[18:18:15] <acrichto> brson: it is? which one?
[18:18:37] <acrichto> wait, no, olsonjeffery ^
[18:18:40] <acrichto> that's who I meant
[18:18:51] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[18:19:04] *** Quits: hoverbear (andrew@moz-9929A47A.wireless.uvic.ca) (Quit: hoverbear)
[18:19:59] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[18:20:40] *** Quits: ozten (ozten@19BD73A1.5D8BCA3A.A0C1B52F.IP) (Quit: ozten)
[18:20:59] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[18:21:05] <olsonjeffery> acrichto: http://buildbot.rust-lang.org/builders/try-win/builds/584/steps/compile/logs/stdio
[18:21:55] *** Joins: lkuper_ (lkuper@moz-C4C820C6.dhcp-bl.indiana.edu)
[18:21:58] <olsonjeffery> looks like last 3 builds failed.. but they're all different
[18:22:05] <olsonjeffery> although 2 of 3 are llvm related
[18:22:07] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[18:22:11] <olsonjeffery> so maybe its something else..
[18:22:49] <steveklabnik> sooooooo this is a 'lol i code in ruby all day' kind of question. i'm writing code that reads off of a tcp socket. is there any pros/cons to reading/writing one byte at a time?
[18:23:07] *** Joins: ahal_ (ahal@F77132FB.12EEDBD3.6BEEAEBD.IP)
[18:23:08] <steveklabnik> it keeps the socket _open_ the whole time, so one byte at a time just means buffering, not like setup/teardown yeah?
[18:23:21] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[18:23:21] <ghrust> 01[13rust01] 15olsonjeffery pushed 2 new commits to 06try: 02http://git.io/RQ04jg
[18:23:21] <ghrust> 13rust/06try 14a5275ff 15Jeff Olson: std: whitespace clean up io::file docs
[18:23:21] <ghrust> 13rust/06try 1470152ff 15Jeff Olson: std: fix win32 build issue re: multistring parsing
[18:23:21] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[18:23:29] <acrichto> olsonjeffery: are these happning on recent requests, on those I just retry them back-to-back and it works out ok
[18:23:29] *** Quits: ahal_ (ahal@F77132FB.12EEDBD3.6BEEAEBD.IP) (Connection reset by peer)
[18:23:45] *** Joins: brson_ (chatzilla@moz-BBE3ABD.mv.mozilla.com)
[18:23:46] <sfackler> If you're reading directly from the TcpStream, there's a fair amount of overhead for each read. If you wrap it in a BufferedStream, you should be okay
[18:23:53] <olsonjeffery> acrichto: i honestly don't know.. just making noise about what im seeing
[18:23:59] <steveklabnik> sfackler: currently using     let mut socket = net::tcp::TcpStream::connect(SocketAddr { ip: ip, port: 6379 });
[18:24:04] <olsonjeffery> acrichto: ill be building llvm on my windows vm for the next three centuries
[18:24:13] <steveklabnik> sfackler: so i'll check out a bufferedstream, thanks
[18:24:17] <olsonjeffery> so im trying to find a way to troubleshoot windows builds besides failing in auto over and over :)
[18:24:42] <strcat> steveklabnik: it will get closed by the destructor, not before then, but writing/reading directly won't buffer like fread/fwrite in C
[18:24:42] <acrichto> olsonjeffery: yeah it's sad :(
[18:24:48] <acrichto> olsonjeffery: if you just make again it should work
[18:24:51] <acrichto> *should*
[18:24:53] *** Joins: ahal_ (ahal@F77132FB.12EEDBD3.6BEEAEBD.IP)
[18:25:23] *** Joins: skoizza (Mibbit@262EE4DB.1E68D00F.DDE5D3F6.IP)
[18:25:48] <steveklabnik> strcat: roger. so what's that mean, exactly? if it won't buffer, it drops stuff or something?
[18:26:26] <strcat> steveklabnik: no buffering means if you write 1 byte, it will actually go through the dance of sending off that 1 byte
[18:26:44] <strcat> if it's buffered, it will just write to a buffer until it fills or you flush
[18:26:49] <steveklabnik> ahh
[18:27:05] <steveklabnik> this makes sense
[18:27:18] <acrichto> sfackler: https://github.com/mozilla/rust/pull/9257 should fix the bug you were seeing last night
[18:27:22] <steveklabnik> i'm thinking more on the read side at the moment, but yeah
[18:27:24] <strcat> tcp has extra buffering by the OS anyway but it's not enough
[18:27:31] <sfackler> acrichto: awesome
[18:27:39] <olsonjeffery> needs more buffer
[18:27:54] <strcat> stuff like http://en.wikipedia.org/wiki/Nagle's_algorithm
[18:28:02] <steveklabnik> i basically read a charater, and then detect 'oh i need to read until a newline'
[18:28:28] <steveklabnik> so of course it's easy to think of it as just reading one character at a time
[18:28:54] <strcat> steveklabnik: alternatively, just don't worry about it and add buffering later when you want it to perform well
[18:29:39] <steveklabnik> seems good
[18:30:21] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[18:33:23] *** Quits: nejucomo_ (Adium@moz-A94CACD5.dsl.pltn13.sbcglobal.net) (Quit: Leaving.)
[18:33:24] *** Joins: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP)
[18:33:59] *** Quits: mrb (mrb@moz-BF7E8289.ca) (Quit: %%% - nam yekacnap - %%%)
[18:34:07] <olsonjeffery> acrichto: so i got another try failure on try-win .. is there a way to make it retry/continue?
[18:34:18] <olsonjeffery> w/o pushing
[18:34:23] *** Quits: skoizza (Mibbit@262EE4DB.1E68D00F.DDE5D3F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[18:34:57] <acrichto> olsonjeffery: yeah, you can trigger a rebuild from bors' console
[18:35:08] <acrichto> olsonjeffery: what's the failure though?
[18:35:10] *** Joins: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com)
[18:37:13] <olsonjeffery> acrichto: buildbot.rust-lang.org/builders/try-win/builds/585/steps/compile/logs/stdio
[18:37:52] <acrichto> olsonjeffery: oh that can just be @bors: retried
[18:38:03] <acrichto> that may be a builder which is just building the llvm update for the first time
[18:38:13] <olsonjeffery> that's in try.. not the failures on auto
[18:38:22] <olsonjeffery> im pushing directly form my local repo to mozilla/rust try
[18:38:38] <olsonjeffery> the build failures with actual compile errors in auto
[18:38:49] <olsonjeffery> i can't repro/move past those compile errors in try because of issues above
[18:39:01] <olsonjeffery> but maybe im misunderstandin you
[18:39:28] <acrichto> ooooh
[18:39:34] <acrichto> yeah just re-trigger the build
[18:39:39] <acrichto> sorry I thought that was on auto
[18:40:03] <acrichto> olsonjeffery: re-triggered it 
[18:40:06] <olsonjeffery> ty
[18:40:08] <acrichto> http://buildbot.rust-lang.org/builders/try-win/builds/586
[18:40:17] *** Joins: jviereck (Adium@moz-2E6DC681.dip0.t-ipconnect.de)
[18:40:44] <strcat> hrm
[18:42:26] <jviereck> hi, I've heard there are plans about implementing RegExp in Rust? Is there any document I can read up on it?
[18:42:38] <acrichto> rt::io::process::Drop$Process::drop:: -- that is such a useful symbol! yay
[18:44:14] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[18:45:11] *** Joins: hoverbear (andrew@moz-DBAF5998.wireless.uvic.ca)
[18:45:54] <mark_edward> will there be docs for the new I/O? i think such a tutorial would be agood one to add to the container, error-handling, etc. tutorials.
[18:46:39] <pcwalton> yes, there should definitely be docs for the new I/O
[18:47:13] <steveklabnik> yeah, that'd be Real good
[18:48:09] *** Quits: sebcrozet (sebcrozet@moz-87D51607.w80-13.abo.wanadoo.fr) (Quit: Gone)
[18:49:08] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Input/output error)
[18:53:11] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[18:54:23] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[18:54:26] <kimundi> jviereck: There is a wiki page that ssbr started, but it never progressed to actual implementations
[18:54:34] <cmr> jviereck: https://github.com/mozilla/rust/wiki/Lib-re
[18:54:41] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.1)
[18:56:21] *** Joins: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl)
[18:56:35] <steveklabnik> how do i initialize a mutable vector to empty?
[18:56:38] <steveklabnik> o_O
[18:56:50] <cmr> rusti: let mut x = ~[];
[18:56:51] -rusti- <anon>:7:17: 7:24 error: cannot determine a type for this local variable: unconstrained type
[18:56:51] -rusti- <anon>:7          let mut x = ~[];
[18:56:51] -rusti-                           ^~~~~~~
[18:56:51] -rusti- error: aborting due to previous error
[18:56:51] -rusti- application terminated with error code 101
[18:56:57] <pcwalton> what does empty mean? zero length or filled with zeroes?
[18:57:02] <steveklabnik> zero length
[18:57:14] <pcwalton> ~[]
[18:57:15] <steveklabnik> 'loop through this thing, add them to an array
[18:57:29] *** Quits: jez0990 (quassel@moz-3BA8545E.kimsufi.com) (Quit: http://quassel-irc.org - Chat comfortably. Anywhere.)
[18:57:35] <steveklabnik> i swear i did ~[]
[18:57:36] *** Joins: Axord (xord@moz-1B228827.lsanca.dsl-w.verizon.net)
[18:57:44] <steveklabnik> but now that i asked, it works. thanks. sigh.
[18:58:05] *** Quits: miza (miza@moz-908EA8DE.home.otenet.gr) (Input/output error)
[18:58:13] <sw17ch> Has any one attempted writing a parser-combinator library in Rust yet?
[18:58:20] <mark_edward> rusti: let x = ~[1u, 2, 3, 4, 5,]; let y = x.rev_iter().collect::<~[uint]>(); y
[18:58:24] -rusti- pastebinned 26 lines of output: http://ix.io/87Y
[18:58:46] <mcpherrin> sw17ch: yeah, somebody has.  Called rparse I think?
[18:58:47] *** Quits: eschweic (Adium@moz-54DE4365.cit.cornell.edu) (Quit: Leaving.)
[18:58:48] <cmr> sw17ch: Yes, it was done for 0.5
[18:58:55] <cmr> https://github.com/jesse99/rparse
[18:59:02] <steveklabnik> mark_edward: yeah, collect would be a good way to do it
[18:59:09] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[18:59:35] <mark_edward> rusti: let x = ~[1u, 2, 3, 4, 5,]; let y = x.rev_iter().map(|&x| x.clone()).collect::<~[uint]>(); y
[18:59:36] -rusti- ~[5u, 4u, 3u, 2u, 1u]
[19:00:22] <mark_edward> rusti: let x = ~[1u, 2, 3, 4, 5,]; let y = x.move_iter().collect::<~[uint]>(); y
[19:00:23] -rusti- ~[1u, 2u, 3u, 4u, 5u]
[19:00:29] <mark_edward> nice
[19:00:36] <strcat> if you no longer need to the original array you can reverse it in0place
[19:00:41] <strcat> in-place*
[19:00:43] *** Joins: jez0990 (quassel@moz-3BA8545E.kimsufi.com)
[19:01:02] <mark_edward> i know but i enjoy iterator chaining
[19:01:05] <strcat> std::iter has reverse for any double-ended iterator (dlists, deque, vectors, smallintmap, etc.)
[19:01:09] <mark_edward> i need to find excuses to use it
[19:01:11] <strcat> mark_edward: it uses iterator chaining :)
[19:01:19] <mark_edward> cooL!
[19:01:25] <strcat> rusti: let mut xs = [1, 2, 3, 4, 5]; xs.mut_iter().reverse_(); xs
[19:01:26] -rusti- [5, 4, 3, 2, 1]
[19:01:46] <strcat> rusti: let mut xs = [1, 2, 3, 4, 5]; let mut ys = [6, 7, 8, 9, 10]; xs.mut_iter().zip(ys.mut_iter()).reverse_(); (xs, ys)
[19:01:48] <strcat> er
[19:01:52] -rusti- pastebinned 26 lines of output: http://ix.io/880
[19:01:54] <strcat> rusti: let mut xs = [1, 2, 3, 4, 5]; let mut ys = [6, 7, 8, 9, 10]; xs.mut_iter().chain(ys.mut_iter()).reverse_(); (xs, ys)
[19:01:55] -rusti- ([10, 9, 8, 7, 6], [5, 4, 3, 2, 1])
[19:02:22] <strcat> iterators are more than just immutable forward views, they're like D's ranges
[19:02:28] <mark_edward> that looks pretty handy!!!
[19:02:37] <benh> (i love the .enumerate() adaptor)
[19:02:42] <mark_edward> do you think they compete with D's ranges?
[19:02:48] <strcat> mark_edward: yes
[19:02:49] <mark_edward> (well)?
[19:02:52] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[19:02:59] <benh> (thanks for not makig me type out . zip [0..] . all the time)
[19:03:06] <strcat> Iterator == ForwardRange (or InputRange, if it's also Clone)
[19:03:14] <strcat> DoubleEndedIterator == BidirectionalRange
[19:03:25] <strcat> there's not a full equivalent to random-access ranges yet.
[19:04:24] <tjc> strcat: about your PR #9258 - I noticed you removed "casting a raw pointer to a safe pointer type" from the list of unsafe features. did we get rid of that?
[19:04:27] <tjc> or did it become safe?
[19:05:03] <benh> Can anyone remind me whether there's a make target in rustc for "just rebuild the crates i changed / relink the compiler once, don't do multiple stages/don't rebuil std/extra/etc"?
[19:05:10] <strcat> tjc: well it doesn't exist as a language feature
[19:05:22] <tjc> strcat: oh, ok, it never existed?
[19:05:27] <strcat> tjc: I don't think so
[19:05:31] <tjc> ok, cool
[19:05:39] <strcat> tjc: I have intrinsics listed in the in-depth section
[19:05:41] <steveklabnik> what do you think of thise code? https://github.com/steveklabnik/redis/blob/master/src/example/main.rs
[19:05:59] <strcat> although cast::transmute would only be directly unsafe if you violated one of the other rules ;p
[19:06:54] <tjc> strcat: looks good as a whole, I just made one line comment
[19:07:03] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[19:08:05] <strcat> tjc: updated
[19:08:59] <steveklabnik> my inner functional programmer says 'pushing a result onto an array is really a map'
[19:09:05] <steveklabnik> but i'm not that good with rust yet
[19:09:18] <tjc> steveklabnik: if we had deforestation for Rust, that would be more-or-less true :-)
[19:09:38] <tjc> instead of deforestation we have iterators, which make the absence of intermediate data structures explicit
[19:09:53] <tjc> which is probably more appropriate for Rust anyway, since it's a strict language and is more about making choices explicit
[19:10:13] *** Quits: paulproteus (quassel@rose.makesad.us) (Ping timeout)
[19:10:50] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[19:10:59] <strcat> iterators <3
[19:11:29] *** AutomatedTester|away is now known as AutomatedTester
[19:11:37] *** Joins: jgilbert (jgilbert@moz-BBE3ABD.mv.mozilla.com)
[19:12:17] <steveklabnik> tjc: makes total sense
[19:12:28] *** Joins: paulproteus (quassel@moz-E86A3B42.makesad.us)
[19:14:06] <tjc> oh, cool, surprise LLVM rebuild
[19:14:12] <tjc> lunchtime, I guess :-)
[19:16:13] *** jdm is now known as jdm|f00ding
[19:16:24] *** Quits: hoverbear (andrew@moz-DBAF5998.wireless.uvic.ca) (Quit: hoverbear)
[19:17:33] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[19:20:19] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[19:22:04] *** Joins: nejucomo_ (Adium@moz-A94CACD5.dsl.pltn13.sbcglobal.net)
[19:22:42] *** Joins: ozten (ozten@19BD73A1.5D8BCA3A.A0C1B52F.IP)
[19:23:01] *** Joins: hoverbear (andrew@moz-DBAF5998.wireless.uvic.ca)
[19:23:23] <jviereck> cmr, kimundi: cool, thanks. I've implemented the JS's RegExp in JS again and about to start implementing a JIT for it: https://github.com/jviereck/regexp.js
[19:23:53] <jviereck> the research summary on the wiki sounds like a good start to get some papers to read through ;)
[19:24:11] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[19:25:56] <pcwalton> github is down?!
[19:26:00] <pcwalton> ok, it's really lunchtime
[19:26:13] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[19:26:18] <steveklabnik> lol
[19:27:39] <steveklabnik> btw, i will be in SFO for the next few days 
[19:27:43] *** Joins: eholk (eholk@moz-BA312F07.crest.iu.edu)
[19:27:43] *** Quits: tikue (quassel@moz-FEADCD38.hsd1.pa.comcast.net) (Connection reset by peer)
[19:27:44] *** Quits: noam (noam@F6B530A7.720527A7.416762B.IP) (Connection reset by peer)
[19:27:44] *** Joins: tikue (quassel@moz-FEADCD38.hsd1.pa.comcast.net)
[19:27:46] <steveklabnik> driving up today, leaving like sunday or something
[19:27:48] *** Quits: rossm (rossm@moz-EE3BB1DC.br.br.cox.net) (Connection reset by peer)
[19:27:48] *** Quits: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net) (Connection reset by peer)
[19:27:50] <kimundi> jviereck: If you're interested to work on it, then it'S probably better to first flesh out an interface and parser :) Can allways plugin specifc backend afterwards.  I'm just unsure about which regex variant/subset ssbr originally decided on as best.
[19:27:58] *** Joins: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net)
[19:28:10] *** Joins: rossm (rossm@moz-EE3BB1DC.br.br.cox.net)
[19:28:17] *** Quits: jyyou (jyyou@28A2398D.56303981.3A70C586.IP) (Ping timeout)
[19:28:17] *** Quits: dbaupp (Thunderbir@moz-EAA09AEF.lns20.syd7.internode.on.net) (Ping timeout)
[19:28:22] *** Joins: noam (noam@F6B530A7.720527A7.416762B.IP)
[19:28:26] *** Joins: jyyou (jyyou@moz-47B052FA.cs.nctu.edu.tw)
[19:28:27] *** Joins: brendan (brendaneic@moz-BDCCF091.hfc.comcastbusiness.net)
[19:28:28] *** Quits: echristo (echristo@DCF57675.D6CCE4AE.77834EAA.IP) (Ping timeout)
[19:28:28] *** Quits: joone_ (joone@3CCE8CB5.2160464A.A34EC3BB.IP) (Ping timeout)
[19:28:34] *** Quits: dherman (dherman@moz-BDCCF091.hfc.comcastbusiness.net) (Ping timeout)
[19:28:43] *** Joins: joone_ (joone@moz-C50DC051.jf.intel.com)
[19:28:47] *** Quits: robn (robn@moz-76B0302C.static.internode.on.net) (Ping timeout)
[19:28:57] *** Quits: steveklabnik (steveklabn@moz-5EF6C37C.socal.res.rr.com) (Quit: bai)
[19:29:05] <tjc> steveklabnik: neat! I'll actually be in SF on Wednesday and Thursday, drop me an email if you want to drop by the SF office :-)
[19:29:07] *** Quits: sfackler (sfackler@moz-AEECCEBA.com) (Ping timeout)
[19:29:13] *** Quits: photex (photex@399640B9.24E301D6.9510F13D.IP) (Ping timeout)
[19:29:18] *** Quits: joelteon (joel@moz-317E8D0C.io) (Ping timeout)
[19:29:19] <tjc> oops, he's gone
[19:29:23] <strcat> um, what happened to github
[19:29:35] <olsonjeffery> they weren't using rust, that's what.
[19:29:36] *** Quits: dforsyth (dforsyth@A677A619.1C765EF.EE6E63A5.IP) (Ping timeout)
[19:29:41] <tjc> github is down
[19:29:44] <cmr> Major service outage.
[19:29:45] <tjc> we're going for lunch ;-)
[19:29:51] <olsonjeffery> file io will never land!
[19:29:52] *** Joins: robn (robn@moz-76B0302C.static.internode.on.net)
[19:30:00] *** Quits: brson_ (chatzilla@moz-BBE3ABD.mv.mozilla.com) (Quit: ChatZilla 0.9.90.1 [Firefox 26.0a1/20130825030201])
[19:30:02] *** Joins: dherman (dherman@moz-BDCCF091.hfc.comcastbusiness.net)
[19:30:02] *** ChanServ sets mode: +ao dherman dherman
[19:30:14] * jensnockert hugs olsonjeffery, I know your pain.
[19:30:15] <Eridius> damn you github! I just got up!
[19:31:21] <jviereck> kimundi: I don't plan to implement this in Rust, but in JavaScript. Do you think there could be value in "prototyping" different backends in JS first to see how they perform before writing them in Rust? 
[19:31:29] <olsonjeffery> acrichto: on the plus side.. the windows build completed (well, the compile.. tests running now).. so when github gets back we can hopefully go g2g
[19:31:45] *** Joins: dbaupp (Thunderbir@moz-EAA09AEF.lns20.syd7.internode.on.net)
[19:31:45] <cmr> jviereck: I would think it'd be harder to prototype in JS than Rust tbh
[19:31:47] <olsonjeffery> oh, nice
[19:31:56] <olsonjeffery> missing libpthread.dll errors on windows build
[19:31:57] <cmr> match and enums make for nice state machines
[19:32:16] <jviereck> btw, the interesting page might be this one, which is the debugger frontend to the library, showing how the matches happen and highlights the relevant parts in the regexp/input string: http://jviereck.github.io/regexp.js/
[19:32:42] <kimundi> hmmm
[19:33:40] <kimundi> rusti: extra::getopts::opt_val()
[19:33:41] -rusti- <anon>:7:9: 8:5 error: this function takes 2 parameters but 0 parameters were supplied
[19:33:41] -rusti- <anon>:7          extra::getopts::opt_val()
[19:33:41] -rusti- <anon>:8     };
[19:33:41] -rusti- error: aborting due to previous error
[19:33:42] -rusti- application terminated with error code 101
[19:33:46] *** Joins: joelteon (joel@moz-317E8D0C.io)
[19:33:59] *** Quits: nejucomo_ (Adium@moz-A94CACD5.dsl.pltn13.sbcglobal.net) (Ping timeout)
[19:34:08] *** Joins: nejucomo_ (Adium@moz-A94CACD5.dsl.pltn13.sbcglobal.net)
[19:34:24] <Eridius> acrichto: you around?
[19:34:55] <kimundi> rusti: let m = extra::getopts::getopts("--foo", ~[extra::getopts::optflag("foo")]); extra::getopts::opt_val(m, "bar")
[19:34:59] -rusti- pastebinned 8 lines of output: http://ix.io/882
[19:35:37] *** Quits: anshin (anshin@CD85F10D.F21429E2.354459FA.IP) (Connection reset by peer)
[19:35:51] *** Joins: anshin (anshin@CD85F10D.F21429E2.354459FA.IP)
[19:36:22] *** Joins: andrew-__ (andrew-d_w@moz-5A92CAFF.dsl.static.sonic.net)
[19:36:25] *** Joins: photex (photex@399640B9.24E301D6.9510F13D.IP)
[19:36:26] *** Joins: sfackler (sfackler@moz-AEECCEBA.com)
[19:36:26] *** Quits: a__ (a__@moz-25043B93.nycmny.fios.verizon.net) (Broken pipe)
[19:36:46] <kimundi> rusti: let args = ~[~"--foo"]; let m = extra::getopts::getopts(args, ~[extra::getopts::optflag("foo")]); extra::getopts::opt_val(m.unwrap(), "bar")
[19:36:49] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Ping timeout)
[19:36:55] -rusti- failed to pastebin 5 lines of output
[19:36:57] <cmr> kimundi: you can query rusti you know.
[19:38:12] *** Joins: jstevans (Instantbir@72A99104.C8A19C38.DDE5D3F6.IP)
[19:38:29] <strcat> alright ix.io has crossed me for the last time
[19:38:34] <strcat> back to sprunge
[19:39:10] <kimundi> rusti: let args = ~[~"--foo"]; let m = extra::getopts::getopts(args, [extra::getopts::optflag("foo")]); extra::getopts::opt_val(&m.unwrap(), "foo")
[19:39:11] -rusti- Some(Given)
[19:39:15] <benh> oh no :(
[19:39:25] *** Quits: andrew-__ (andrew-d_w@moz-5A92CAFF.dsl.static.sonic.net) (Input/output error)
[19:39:29] <kimundi> why does this work, even though extra::getopts::opt_val is priavte?
[19:39:29] <benh> I've become a fan of ix.io since I've seen you use it 
[19:39:45] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[19:39:57] <olsonjeffery> strcat: why not gist? it's still up, heh.
[19:40:14] *** Joins: dforsyth (dforsyth@A677A619.1C765EF.EE6E63A5.IP)
[19:40:18] <olsonjeffery> i use gist-buffer a lot in emacs
[19:40:31] <kimundi> I think if we use gist for rusti we'd have to create a new unbanned account every other day
[19:40:48] <olsonjeffery> there's no anonymous svc account access?
[19:41:14] <olsonjeffery> tl;dr -- command-line pastebin API maint. is a thankless task
[19:41:14] * kimundi is just going to assume that what we do here will trigger any spam algorithm
[19:41:36] <Eridius> I thought there was another command-line pastebin besides ix.io? And I thought rusti used it as fallback?
[19:41:54] <strcat> olsonjeffery: github will probably ban me
[19:42:11] <kimundi> But seriously, can someone confirm for me that extra::getopts::opt_val is private?
[19:42:32] <kimundi> I don't see a pub in front of it, but using it works...
[19:42:57] *** Quits: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com) (Ping timeout)
[19:43:01] <kimundi> And if I change it to a method without pub, in no longer works :P
[19:43:06] <Eridius> kimundi: looks private to me. I feel like there's some visibility bug though]
[19:43:24] <Eridius> rather, I feel like I heard that there's some visibility bug, but I don't know the details
[19:43:40] <kimundi> Yeah, bug for sure
[19:43:45] *** Joins: tikue_ (tkuehn@B57CA43C.B9B3942C.689607DE.IP)
[19:43:51] * kimundi is just going to mark it as public
[19:43:54] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[19:43:57] <Eridius> let's just go check github issues... ;)
[19:45:07] *** Joins: Diamond (dick@moz-63AD8970.ks.ok.cox.net)
[19:45:32] <benh> I think the parser is broken re: boxed traits with type parameters and kind bounds... or I'm understanding them less than I thought
[19:45:55] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[19:45:56] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/5vQtLw
[19:45:56] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[19:45:58] <benh> rusti: trait Trait<T> {} fn foo<T>(x: ~Trait:Freeze<T>) {}
[19:45:59] <Eridius> "I think"..."broken".."boxed traits" yep!
[19:45:59] -rusti- <anon>:7:41: 7:56 error: wrong number of type arguments: expected 1 but found 0
[19:45:59] -rusti- <anon>:7          trait Trait<T> {} fn foo<T>(x: ~Trait:Freeze<T>) {}
[19:45:59] -rusti-                                                   ^~~~~~~~~~~~~~~
[19:46:00] -rusti- application terminated with error code 101
[19:46:06] <benh> rusti: trait Trait<T> {} fn foo<T>(x: ~Trait<T>:Freeze) {}
[19:46:07] -rusti- <anon>:7:49: 7:50 error: expected `,` but found `:`
[19:46:07] -rusti- <anon>:7          trait Trait<T> {} fn foo<T>(x: ~Trait<T>:Freeze) {}
[19:46:07] -rusti-                                                           ^
[19:46:08] -rusti- application terminated with error code 101
[19:46:29] <Eridius> benh: ~Trait:Freeze<T> is not valid syntax
[19:46:34] <Eridius> why are you putting Trait: in there?
[19:46:40] <Eridius> ~Freeze<T> would be a boxed trait
[19:47:01] <benh> The idea is that it's a boxed object of a type implementing the trait Trait
[19:47:16] <Eridius> wouldn't that just be ~Trait<T> then?
[19:47:22] <kimundi> rusti: trait Trait<T>: Freeze+Send {} fn foo<T>(x: ~Trait<T>:Freeze+Send) {}
[19:47:22] -rusti- <anon>:7:62: 7:63 error: expected `,` but found `:`
[19:47:22] -rusti- <anon>:7          trait Trait<T>: Freeze+Send {} fn foo<T>(x: ~Trait<T>:Freeze+Send) {}
[19:47:22] -rusti-                                                                        ^
[19:47:22] -rusti- application terminated with error code 101
[19:47:33] <Eridius> get rid of the :Freeze+Send in your arg list
[19:47:39] <kimundi> rusti: trait Trait: Freeze+Send {} fn foo(x: ~Trait:Freeze+Send) {}
[19:47:39] -rusti- <anon>:7:44: 7:45 warning: unused variable: `x` [-W unused-variable (default)]
[19:47:40] -rusti- <anon>:7          trait Trait: Freeze+Send {} fn foo(x: ~Trait:Freeze+Send) {}
[19:47:40] -rusti-                                                      ^
[19:47:40] -rusti- ()
[19:48:19] <benh> Isn't it valid to further restrict the box type by requiring Freeze?
[19:48:25] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[19:48:34] <benh> or another build-in bound, I dunno
[19:48:41] <kimundi> As I understood it, it is
[19:48:53] <benh> Just seems that the <T> at the end is parsed as parameterizing Freeze rather than Trait
[19:48:54] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[19:49:07] <benh> (from looking at ast dumps)
[19:49:15] <kimundi> rusti: trait Trait<T> {} fn foo<T>(x: ~Trait<T>) {}
[19:49:16] -rusti- <anon>:7:37: 7:38 warning: unused variable: `x` [-W unused-variable (default)]
[19:49:16] -rusti- <anon>:7          trait Trait<T> {} fn foo<T>(x: ~Trait<T>) {}
[19:49:16] -rusti-                                               ^
[19:49:16] -rusti- ()
[19:49:19] <benh> but ~Trait<T>:Freeze doesn't parse either
[19:49:37] <Eridius> benh: how would you further restrict a boxed trait by another trait? How would that actually be enforced?
[19:49:47] <kimundi> Wouldn'T wonder me if it'S either or at the moment :P
[19:49:53] <benh> Yeah, I dunno
[19:50:03] <Eridius> since it's a boxed trait, you can't possibly know at compile-time if the wrapped type implements the further constraining trait. And doing this at runtime would just be terrible
[19:50:17] <kimundi> rusti: trait Trait: Freeze+Send {} fn foo(_: ~Trait:Freeze+Send) {}
[19:50:18] -rusti- ()
[19:50:22] <kimundi> rusti: trait Trait: Freeze {} fn foo(_: ~Trait:Freeze+Send) {}
[19:50:24] -rusti- ()
[19:50:28] <kimundi> rusti: trait Trait {} fn foo(_: ~Trait:Freeze+Send) {}
[19:50:29] -rusti- ()
[19:50:31] <benh> Then maybe it should be rejected :D
[19:50:35] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Ping timeout)
[19:50:39] <Eridius> kimundi: wat, why is that not throwing a syntax error?
[19:50:47] <kimundi> I definitly had to do that a few days ago, though
[19:50:47] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[19:50:48] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/HbIIsg
[19:50:48] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[19:50:49] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[19:50:49] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/zxmxGg
[19:50:49] <ghrust> 13rust/06auto 14befc561 15Daniel Micay: remove unnecessary transmutes
[19:50:49] <ghrust> 13rust/06auto 149e8fb4a 15bors: auto merge of #9256 : thestinger/rust/drop, r=alexcrichton
[19:50:50] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[19:52:01] <Eridius> ooh github's back
[19:52:22] *** bent is now known as bent|lunch
[19:52:36] <kimundi> Eridius: Okay, my usecase for that was
[19:52:39] <kimundi> rusti: trait Foo{} struct Bar; impl Foo for Bar; extra::arc::Arc::new(~Bar as ~Foo)
[19:52:40] -rusti- <anon>:7:51: 7:71 error: instantiating a type parameter with an incompatible type `~main::Foo:Send`, which does not fulfill `Freeze`
[19:52:40] -rusti- <anon>:7          trait Foo{} struct Bar; impl Foo for Bar; extra::arc::Arc::new(~Bar as ~Foo)
[19:52:40] -rusti-                                                             ^~~~~~~~~~~~~~~~~~~~
[19:52:40] -rusti- error: aborting due to previous error
[19:52:41] -rusti- application terminated with error code 101
[19:52:49] <kimundi> why is solvable with
[19:52:52] <benh> Is putting type bounds bunched up like that without spaces around the : and + the prefered form?
[19:52:59] <kimundi> rusti: trait Foo{} struct Bar; impl Foo for Bar; extra::arc::Arc::new(~Bar as ~Foo:Send+Freeze)
[19:53:00] -rusti- extra::arc::Arc<~main::Foo:Send+Freeze>{x: std::unstable::sync::UnsafeArc<~main::Foo:Send+Freeze>{data: (0x7f7f1a01f0a0 as *mut ())}}
[19:53:09] <benh> The prettyprinter currently prints them spaced out in type parameter lists
[19:53:18] <Eridius> kimundi: I'm rather shocked that is even considered valid syntax, much less compiles
[19:53:43] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[19:53:51] <kimundi> rusti: trait Foo{} struct Bar{ priv unsend: @uint } impl Foo for Bar; extra::arc::Arc::new(~Bar as ~Foo:Send+Freeze)
[19:53:54] -rusti- pastebinned 8 lines of output: http://ix.io/885
[19:54:50] *** Quits: serge_sans_paille (serge@moz-46D3B235.fbx.proxad.net) (Quit: tchÃ´)
[19:55:04] <kimundi> rusti: trait Foo{} struct Bar{ priv unsend: @uint } impl Foo for Bar; extra::arc::Arc::new(~Bar{unsend:@4u} as ~Foo:Send+Freeze)
[19:55:04] -rusti- <anon>:7:93: 7:129 error: cannot pack type `~main::Bar`, which does not fulfill `Send`, as a trait bounded by Send+Freeze
[19:55:04] -rusti- <anon>:7          trait Foo{} struct Bar{ priv unsend: @uint } impl Foo for Bar; extra::arc::Arc::new(~Bar{unsend:@4u} as ~Foo:Send+Freeze)
[19:55:04] -rusti-                                                                                                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[19:55:05] -rusti- error: aborting due to previous error
[19:55:06] -rusti- application terminated with error code 101
[19:55:31] <benh> kimundi: do you prefer ~Foo:Send+Freeze over ~Foo: Send + Freeze there?
[19:55:47] <Eridius> I always thought that to add extra constraints you needed to make a super-trait that inherited from all the traits you want
[19:56:04] <Eridius> I guess ~Foo:Send+Freeze is being used here as an alternative to that approach? But it's not the same thing as a ~Foo obviously
[19:56:14] <kimundi> benh: I'm not worrying about style right now :P
[19:56:18] <benh> I am!
[19:56:19] <Eridius> in fact I'm kind of surprised the syntax here isn't ~Foo+Send+Freeze
[19:56:25] <benh> I'm trying to make sense of what the pretty-printer does
[19:56:27] <Eridius> because that's what you're really constructing
[19:57:08] <kimundi> What is a type that is Send but not Freeze? Or does the one forbid the other?
[19:57:26] <sfackler> that syntax for kinds is required (I think) for closures: "~fn():Send+Freeze"
[19:57:56] <Eridius> sfackler: ahh
[19:58:09] <kimundi> Eridius: Not just alternative, other way round doesn't work
[19:58:33] <benh> I think it's ~fn:Send+Freeze() :(
[19:58:35] <kimundi> rusti: trait Foo: Send + Freeze{} struct Bar; impl Foo for Bar; extra::arc::Arc::new(~Bar as ~Foo)
[19:58:36] -rusti- <anon>:7:66: 7:86 error: instantiating a type parameter with an incompatible type `~main::Foo:Send`, which does not fulfill `Freeze`
[19:58:36] -rusti- <anon>:7          trait Foo: Send + Freeze{} struct Bar; impl Foo for Bar; extra::arc::Arc::new(~Bar as ~Foo)
[19:58:36] -rusti-                                                                            ^~~~~~~~~~~~~~~~~~~~
[19:58:37] -rusti- error: aborting due to previous error
[19:58:37] -rusti- application terminated with error code 101
[19:58:56] *** Quits: maik (maik@moz-FECBC48.dip0.t-ipconnect.de) (Ping timeout)
[19:59:21] *** Joins: Ferio (Ferio@moz-E7EA111C.clients.kiwiirc.com)
[19:59:49] <sfackler> kimundi: Cells are Send but not Freeze iirc
[20:01:01] *** Joins: SingingBoyo (singingboy@moz-A6B3A9E6.ubcsecure.wireless.ubc.ca)
[20:01:06] <sfackler> as are mutable Arcs
[20:01:28] <Eridius> rusti: let x = [0x55u8, ..4]; let y: u32 = unsafe { cast::transmute(x) }; y
[20:01:42] -rusti- pastebinned 11 lines of output: http://ix.io/88a
[20:02:08] <Eridius> rusti: let x = [0x55u8, ..4]; let y: u32 = unsafe { std::cast::transmute(x) }; y
[20:02:09] -rusti- 1431655765u32
[20:03:42] *** Quits: nano (nano@moz-74CAD1CA.superkabel.de) (Quit: nano)
[20:04:21] *** Joins: deLta30 (quassel@346E0819.57CB425F.CA052C06.IP)
[20:04:26] *** Quits: deLta30 (quassel@346E0819.57CB425F.CA052C06.IP) (Quit: deLta30)
[20:04:29] *** Quits: jgilbert (jgilbert@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[20:06:09] *** Joins: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com)
[20:07:35] <kimundi> Where does Cell live module-wise?
[20:07:43] *** Joins: ww (Mibbit@moz-DFAED48A.lightspeed.sntcca.sbcglobal.net)
[20:07:52] <Luqman> kimundi: std::cell::Cell
[20:08:50] <kimundi> rusti: trait Foo{} struct Bar{ priv unfreeze: std::cell:Cell } impl Foo for Bar; extra::arc::Arc::new(~Bar{unfreeze:std::cell::Cell::new(45u)} as ~Foo:Send+Freeze)
[20:08:54] -rusti- pastebinned 5 lines of output: http://ix.io/88b
[20:09:16] <ww> given an enum whose members are defined with uint, how do i convert a uint to the corresponding enum member?
[20:09:43] <strcat> ww: you can't, in safe code
[20:09:51] <strcat> well
[20:09:52] <kimundi> ww wait for erick 's syntax extions for that :P
[20:09:55] <strcat> without making a big match expression
[20:09:56] <sfackler> ww: a huge match statement, or wait for https://github.com/mozilla/rust/pull/9250
[20:10:23] <ww> bummer.  ok.  i'll build a map to map the uint back to enum for now
[20:10:39] <strcat> ww: well just make a big match expr
[20:10:59] <ww> which is faster?  a match expr or a map lookup?
[20:11:32] <kimundi> match
[20:11:35] <kimundi> definitly match
[20:11:43] <strcat> a match expr will be optimized well
[20:11:48] <ww> ok thx
[20:12:34] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[20:12:37] <Eridius> anyone know if acrichto is correct here? https://github.com/mozilla/rust/pull/9255#discussion-diff-6407286
[20:12:42] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[20:12:47] <strcat> rusti: testing testing 1 2 3
[20:12:47] -rusti- <anon>:7:17: 7:24 error: expected one of `; }` but found `testing`
[20:12:47] -rusti- <anon>:7          testing testing 1 2 3
[20:12:47] -rusti-                           ^~~~~~~
[20:12:47] -rusti- application terminated with error code 101
[20:12:50] <strcat> ;[
[20:12:54] <olsonjeffery> ok can i get one more r+ on my file io PR (github is back up) and the windows build passed on try
[20:13:29] <olsonjeffery> a thousand apologies
[20:16:34] <Eridius> rusti: "foo".byte_iter().reverse()
[20:16:35] -rusti- <anon>:7:9: 8:5 error: type `std::iter::Map<,&u8,u8,std::vec::VecIterator<,u8>>` does not implement any method in scope named `reverse`
[20:16:35] -rusti- <anon>:7          "foo".byte_iter().reverse()
[20:16:35] -rusti- <anon>:8     };
[20:16:35] -rusti- error: aborting due to previous error
[20:16:36] -rusti- application terminated with error code 101
[20:16:48] <Eridius> that should totally work
[20:17:17] <sfackler> rusti: "foo".byte_iter().reverse_()
[20:17:18] -rusti- pastebinned 26 lines of output: http://sprunge.us/FBUZ
[20:17:42] <Eridius> oh it has a trailing _? Bah
[20:17:47] *** Joins: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP)
[20:17:50] <Eridius> curious error you got tho
[20:17:54] <sfackler> yay resolve errors
[20:18:18] <Eridius> rusti: "foo".byte_iter().reverse_().collect::<~[u8]>()
[20:18:19] -rusti- pastebinned 29 lines of output: http://sprunge.us/MDKV
[20:18:38] <Eridius> well that's not very useful
[20:18:41] * olsonjeffery crosses fingers, again
[20:19:13] <Eridius> yay for byte_rev_iter
[20:19:30] *** Quits: hoverbear (andrew@moz-DBAF5998.wireless.uvic.ca) (Quit: hoverbear)
[20:19:31] *** Joins: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com)
[20:22:06] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[20:22:10] *** Joins: eschweic (Adium@moz-54DE4365.cit.cornell.edu)
[20:22:16] <strcat> Eridius: reverse is for in-place reverse
[20:22:20] <strcat> invert is to flip next and next_back
[20:22:36] *** Quits: nejucomo_ (Adium@moz-A94CACD5.dsl.pltn13.sbcglobal.net) (Quit: Leaving.)
[20:23:01] *** jdm|f00ding is now known as jdm
[20:23:09] <strcat> rusti: let mut xs = [1, 2, 3, 4, 5]; let mut ys = [6, 7, 8, 9, 10]; xs.mut_iter().chain(ys.mut_iter()).reverse_(); (xs. ys)
[20:23:10] -rusti- <anon>:7:118: 7:124 error: attempted access of field `ys` on type `[int, .. 5]`, but no field with that name was found
[20:23:10] -rusti- <anon>:7          let mut xs = [1, 2, 3, 4, 5]; let mut ys = [6, 7, 8, 9, 10]; xs.mut_iter().chain(ys.mut_iter()).reverse_(); (xs. ys)
[20:23:10] -rusti-                                                                                                                                ^~~~~~
[20:23:10] -rusti- error: aborting due to previous error
[20:23:11] -rusti- application terminated with error code 101
[20:23:23] <Eridius> strcat: ahh
[20:23:26] <strcat> rusti: let mut xs = [1, 2, 3, 4, 5]; let mut ys = [6, 7, 8, 9, 10]; xs.mut_iter().chain(ys.mut_iter()).reverse_(); (xs, ys)
[20:23:27] -rusti- ([10, 9, 8, 7, 6], [5, 4, 3, 2, 1])
[20:23:36] <Eridius> rusti: "foo".byte_rev().invert()
[20:23:37] -rusti- <anon>:7:9: 7:26 error: type `&'static str` does not implement any method in scope named `byte_rev`
[20:23:37] -rusti- <anon>:7          "foo".byte_rev().invert()
[20:23:37] -rusti-                   ^~~~~~~~~~~~~~~~~
[20:23:37] -rusti- error: aborting due to previous error
[20:23:37] -rusti- application terminated with error code 101
[20:23:41] *** Quits: anshin (anshin@CD85F10D.F21429E2.354459FA.IP) (Quit: leaving)
[20:23:43] <Eridius> rusti: "foo".byte_iter().invert()
[20:23:44] -rusti- pastebinned 1 lines of output: http://sprunge.us/DUFT
[20:23:45] *** Joins: anshin (anshin@CD85F10D.F21429E2.354459FA.IP)
[20:24:17] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[20:24:54] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[20:25:29] *** Quits: jviereck (Adium@moz-2E6DC681.dip0.t-ipconnect.de) (Quit: Leaving.)
[20:28:19] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[20:28:19] *** ChanServ sets mode: +ao brson brson
[20:29:15] *** Joins: rlbaker (rlbaker@8CD40108.464ADDF7.94FF2961.IP)
[20:30:14] <acrichto> Eridius: cfg! is evaluated at complie-time, not runtime
[20:30:32] <Eridius> acrichto: well yeah.
[20:30:37] <Eridius> but the target endianness is known at compile-time
[20:31:10] <Eridius> based on how target_endian is used in unstable/intrinsics, and based on its name, I'd have to assume that it's the endianness of the target arch, not the host arch
[20:31:18] <Eridius> which is exactly what I want
[20:32:00] *** Joins: nejucomo_ (Adium@moz-434492BB.dsl.static.sonic.net)
[20:32:48] *** bent|lunch is now known as bent
[20:33:00] *** Quits: tgummerer (tgummerer@moz-5DC8FA44.tbcn.telia.com) (Ping timeout)
[20:36:17] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[20:36:27] *** Quits: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin_)
[20:38:59] *** Quits: ceninan (ceninan@moz-6BD43586.a370.priv.bahnhof.se) (Ping timeout)
[20:40:30] <Luqman> Eridius: but i think that's at compile time for *rustc*
[20:40:39] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[20:41:08] *** Joins: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl)
[20:41:47] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[20:45:55] <acrichto> Eridius: sorry was out for a second, but you can compile rustc for the x86_64 triple and then target an i686 triple, cfg! evaluates the x86_64 one and you want to evaluate the i686 one
[20:46:00] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[20:46:17] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[20:46:17] *** ChanServ sets mode: +o tjc
[20:46:19] *** Quits: ahal_ (ahal@F77132FB.12EEDBD3.6BEEAEBD.IP) (Quit: Leaving)
[20:46:35] *** Joins: echristo (echristo@DCF57675.D6CCE4AE.77834EAA.IP)
[20:47:16] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[20:47:45] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[20:48:55] <Eridius> acrichto: I still don't follow. target_endian should be the endian value of the target arch, no?
[20:49:16] <Eridius> are you suggesting that cfg!() is somehow producing a different value than using #[cfg(target_endian = "little")] would?
[20:49:19] <acrichto> Eridius: at compile-time, not at runtime
[20:49:33] <Eridius> at compile-time, the host compiler knows what the target endianness is
[20:49:50] *** Joins: lkuper__ (lkuper@BAE96B56.1C5FF2E6.51B6877.IP)
[20:50:04] <acrichto> yeah, so cfg!(target_endian = "big") is saying "is this compiler instance currently running as a big-endian instance?"
[20:50:19] <benh> dbaupp: Why is run-pass/issue-7673-cast-generically-implemented-trait.rs xfail'd because of a pretty-printing issue?
[20:50:20] <acrichto> the question you want to answer is "am I targeting a big-endian instance as I generate code?"
[20:50:21] <Eridius> is it? Why would it ask that question?
[20:50:39] <Eridius> why would cfg!() return what the current compiler instance is, rather than what the config values for the code it's compiling is?
[20:50:42] <acrichto> Eridius: yeah, cfg! is evaluated at compile time, and in this case that's the compile-time of the compiler
[20:51:02] <acrichto> cfg!() returns what the parameters were at compile-time
[20:51:09] <Eridius> if what you're saying is correct, then cfg!() is completely useless. For everything.
[20:51:12] <acrichto> when the compiler is compiling itself
[20:51:18] <Eridius> which seems unlikely
[20:51:30] <acrichto> Eridius: no, it's useful for doing things like if cfg!(windows) { ... } else { ... }
[20:51:37] <acrichto> which means "am I currently running on windows?"
[20:51:48] <Eridius> acrichto: not if what you say is correct, because the compiler instance could be running on unix, but cross-compiling to windows
[20:52:06] <acrichto> Eridius: no that's the problem with the pull request
[20:52:16] <acrichto> the question you *want* to answer is whether you're cross-compiling to windows
[20:52:23] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[20:52:25] <acrichto> cfg!(xxx) is asking the wrong question
[20:52:36] <acrichto> sess.target_cfg.is_windows() is what you'd want
[20:52:43] <acrichto> or whatever the equivalent is
[20:53:03] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[20:53:13] <Eridius> ...oh!
[20:53:18] <Eridius> I just suddenly realized what you've been trying to say
[20:53:31] <benh> How do the pretty-printer tests work?
[20:53:37] <acrichto> Eridius: compiling compilers is confusing :(
[20:53:40] <Eridius> what you've been trying to say is that the code I'm writing is not compiled when fourcc!() is seen in client code
[20:53:52] <Eridius> and therefore my cfg!() directive is being evaluated at the wrong time
[20:53:56] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[20:53:57] <acrichto> Eridius: yeah
[20:54:03] <Eridius> ok that makes a heck of a lot more sense
[20:54:07] <acrichto> sorry :(
[20:54:26] <Eridius> naw I should have realized that originally. I'm just not used to working on the compiler directly
[20:54:54] *** Quits: lkuper__ (lkuper@BAE96B56.1C5FF2E6.51B6877.IP) (Ping timeout)
[20:55:04] <tikue_> I really want Eridius's patch to land hehe
[20:55:28] <Eridius> tikue_: oh? you have a use for this?
[20:55:35] <acrichto> this is an instance where it'd be really nice to have loadable syntax extensions...
[20:55:55] *** Quits: bytbox (s@moz-DC83764A.washdc.fios.verizon.net) (Ping timeout)
[20:55:57] <tikue_> is there any current way to do it without transmuting?
[20:56:42] <benh> rusti: ~1 as ~Send
[20:56:42] -rusti- <anon>:7:9: 7:20 error: failed to find an implementation of trait std::kinds::Send for int
[20:56:42] -rusti- <anon>:7          ~1 as ~Send
[20:56:42] -rusti-                   ^~~~~~~~~~~
[20:56:43] -rusti- application terminated with error code 101
[20:56:49] <benh> Ints aren't sendable?
[20:57:20] <kimundi> benh: Seems more like a bug by ommission
[20:57:27] <Eridius> acrichto: it's not clear how to get the target_cfg from an ExtCtxt
[20:57:40] <acrichto> Eridius: you'll want to grab it from the Session
[20:57:41] <kimundi> benh: Or rather, I think kind taritobject don't work yet
[20:57:51] <Eridius> acrichto: I see a ParseSess, but that doens't seem to be the right session
[20:57:51] <kmc> they're implicitly copyable so you don't actually need a Send instance to send
[20:57:57] <kmc> so yeah probably an omission
[20:58:00] <kimundi> rusti: struct Foo; ~Foo as ~Send
[20:58:01] -rusti- <anon>:7:21: 7:34 error: failed to find an implementation of trait std::kinds::Send for main::Foo
[20:58:02] -rusti- <anon>:7          struct Foo; ~Foo as ~Send
[20:58:02] -rusti-                               ^~~~~~~~~~~~~
[20:58:02] -rusti- application terminated with error code 101
[20:58:07] <strcat> benh: Send isn't a trait
[20:58:16] <benh> Is it a kind?
[20:58:20] <strcat> kinds are still noticeably different, yeah
[20:58:20] <kimundi> rusti: trait Bar{} impl Bar for Foo{} struct Foo; ~Foo as ~Bar
[20:58:21] -rusti- ~main::Bar:Send
[20:58:24] <Eridius> there's a CrateConfig, which might be useful, but I don't really want to have to parse that myself if I don't have to
[20:58:50] <strcat> if you could inherit kinds we wouldn't need trait bounds
[20:58:58] <acrichto> Eridius: oh dear this may be evaluated too soon, let me check
[20:59:05] *** Quits: tikue_ (tkuehn@B57CA43C.B9B3942C.689607DE.IP) (Ping timeout)
[20:59:08] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[20:59:26] *** Joins: lkuper__ (lkuper@BAE96B56.1C5FF2E6.51B6877.IP)
[21:00:13] <benh> I'm looking at https://github.com/mozilla/rust/issues/9253
[21:00:43] <olsonjeffery> please please please pass.
[21:00:51] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[21:00:51] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/zxmxGg
[21:00:51] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[21:00:51] *** Joins: bytbox (s@moz-DC83764A.washdc.fios.verizon.net)
[21:01:19] <benh> What's a good legit use of trait bounds in types? :)
[21:01:43] <olsonjeffery> benh: in the file io api, we have stuff like: `fn open<P: PathLike>(path: &P) -> ...`
[21:01:48] *** Joins: andrew-__ (andrew-d_w@moz-5A92CAFF.dsl.static.sonic.net)
[21:01:51] <olsonjeffery> so path::Path and str impl PathLike
[21:02:27] <olsonjeffery> that's an example in a function..
[21:02:28] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Ping timeout)
[21:02:30] <engla> strcat: nice to see the unsafe text making its way into the official documentation. I have a question though, there must be some things unsafe code must never do, and some things that must never *escape* an unsafe clause; I mean, can we break the pointer aliasing rules during an unsafe block?
[21:02:47] <strcat> no, you can't break the pointer aliasing rules
[21:02:48] <olsonjeffery> for Port<T: Send> we're saying that only sendable types should be allowed..
[21:03:02] <benh> I'm looking for an example where the : Send shows up outside of < >
[21:03:05] <strcat> engla: all of those are things you can never do
[21:03:27] <olsonjeffery> benh: Send isn't a "real" trait.. it's a compiler trait that the compiler will assign based on how it reasons about a type
[21:03:27] <strcat> the list of things that must never escape unsafe are the same - you can't allow any indirect way of doing those things
[21:03:51] *** Joins: tikue_ (tkuehn@B57CA43C.B9B3942C.689607DE.IP)
[21:04:04] <strcat> bblum: if we make kinds act as real traits, would it make sense to remove trait bounds?
[21:04:13] <strcat> trait Foo: Send + Bar {}
[21:04:15] <strcat> ~Foo
[21:04:32] <tikue_> strcat: you mean have them inferred or what?
[21:04:37] <strcat> no
[21:04:52] <acrichto> Eridius: take a look at src/libsyntax/ext/cfg.rs
[21:04:54] *** Quits: lkuper__ (lkuper@BAE96B56.1C5FF2E6.51B6877.IP) (Ping timeout)
[21:04:56] <strcat> I just mean not having them at all
[21:05:01] <Eridius> acrichto: yeah I'm looking at that. Should I just replicate that?
[21:05:01] <acrichto> Eridius: I think you'd want to do something similar to that
[21:05:08] <engla> should it be clear that "behavior considered unsafe" is something you can never do.. i.e. it's not something you can do inside an unsafe {}  clause?   I guess we can define that the two points regarding char and ~str are always unsafe too, even though you'd get away with building a string byte-by-byte today
[21:05:09] <strcat> tikue_: trait bounds as in bounds on *traits*
[21:05:11] <strcat> no on generic fns
[21:05:14] <acrichto> Eridius: sadly I dunno of a better way :(
[21:05:19] <strcat> not*
[21:05:24] <Eridius> acrichto: ok, thanks for checking
[21:05:46] <strcat> I guess it's not a widely known about feature that we have function/trait bounds though
[21:05:47] *** Quits: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net) (Connection reset by peer)
[21:05:47] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[21:05:48] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/86NLPA
[21:05:48] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[21:05:49] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[21:05:49] <ghrust> 01[13rust01] 15bors pushed 1 new commit to 06auto: 02http://git.io/so10Xw
[21:05:49] <ghrust> 13rust/06auto 14c135cb2 15bors: auto merge of #9235 : olsonjeffery/rust/newrt_file_io_1, r=thestinger...
[21:05:49] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[21:06:08] <acrichto> strcat: did you restart the linux snapshot recently?
[21:06:16] <strcat> acrichto: no, but someone else might have
[21:06:26] <acrichto> huh, maybe I'm just dreaming
[21:06:27] <benh> I just want a realistic example for "type: trait or kind or w/e" syntax outside of a generics list :)
[21:06:39] <benh> bonus points if there's type variables or region variables nearby
[21:06:45] <tikue_> strcat: isn't that how you make "supertraits"? like ```trait stream: Reader + Writer``` or whatnot
[21:06:58] <strcat> tikue_: I'm not talking about removing that feature
[21:07:05] <tikue_> strcat: ah ok. i'm just confused then
[21:07:07] <strcat> I'm talking about using it instead of trait bounds
[21:07:21] <strcat> rusti: trait Foo {} impl Foo for int {} ~5 as ~Foo
[21:07:22] -rusti- ~main::Foo:Send
[21:07:26] <strcat> note the :Send
[21:07:37] <strcat> I guess it should really say :Send + Freeze
[21:08:17] <strcat> anyway that seems redundant if we make inheritance from kinds and kind objects work (as in, making them proper traits)
[21:08:34] *** Quits: aeqwa (aeqwa@moz-B4E718F8.dsl.tropolys.de) (Quit: Lost terminal)
[21:08:54] <engla> strcat: ok, I think the text can be clearer, as it reads to me as these are things that must not escape an unsafe block
[21:08:58] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[21:09:05] *** Joins: lkuper__ (lkuper@BAE96B56.1C5FF2E6.51B6877.IP)
[21:09:31] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[21:09:31] <strcat> engla: "This is a list of behaviour `unsafe` blocks/functions *must prevent*." what should it say?
[21:10:06] *** Quits: eschweic (Adium@moz-54DE4365.cit.cornell.edu) (Quit: Leaving.)
[21:10:25] <strcat> escaping isn't really relevant - the unsafe blocks must not break those rules
[21:10:29] <engla> must prevent from what? It goes on to say that safe code can never cause these things, so I read it as when the unsafe block is done, and we are back in safe code, no trace of such behavior can be left
[21:10:54] <strcat> they are things they must prevent - they can't happen
[21:11:12] <strcat> a correct rust program never allows any of those things to happen
[21:11:20] <strcat> inside or outside of unsafe blocks, there's no distinction
[21:11:39] <engla> Yes you have clarified that here, but the text wasn't 100% clear
[21:12:00] <strcat> from my POV I just restated what was there ;p
[21:12:11] *** Quits: tikue_ (tkuehn@B57CA43C.B9B3942C.689607DE.IP) (Ping timeout)
[21:12:40] <engla> no
[21:12:46] <strcat> they are a list of issues you have to prevent in unsafe blocks, but you don't have to worry about them outside of unsafe blocks
[21:12:51] <engla> consider the reader's confusion about unsafe blocks and then unsafe behavior
[21:13:11] <engla> now tell me again... is unsafe behavior ok if it's inside an unsafe block? it doesn't say if with 100% clarity
[21:13:22] *** Joins: tikue_ (tkuehn@B57CA43C.B9B3942C.689607DE.IP)
[21:13:22] *** Quits: SingingBoyo (singingboy@moz-A6B3A9E6.ubcsecure.wireless.ubc.ca) (Ping timeout)
[21:13:31] <benh> What is the syntax for a path that refers to a type that is a boxed trait that fulfills some kind bounds like Send and is also parameterised over a type T?
[21:13:33] <strcat> engla: it seems clear to me
[21:13:33] <engla> I'm just helping you proof this text for ignorants like me
[21:13:36] <strcat> it says they must prevent it
[21:13:47] <engla> ok, it's not clear to me
[21:14:06] <strcat> well I don't know how to make that more clear without muddying the waters
[21:14:32] <benh> I assume it involves ~ some::Trait : Send <T> but I can't seem to get the tokens in the right order...
[21:14:34] <strcat> there isn't a distinction between what you can do inside and outside of unsafe blocks - it's just that outside of unsafe blocks, you can't accidentally do any of these things
[21:14:41] <tikue_> are `priv` fields truly private? can one use reflection to get around it?
[21:14:41] *** Quits: lkuper__ (lkuper@BAE96B56.1C5FF2E6.51B6877.IP) (Ping timeout)
[21:14:48] <engla> then say that in the text:)
[21:14:57] <engla> readers will be confused about unsafe blocks vs. unsafe behavior
[21:15:00] <benh> tikue_: format!() etc can print them
[21:15:02] <strcat> tikue_: they are not truly private in terms of reads, at the moment
[21:15:05] *** victorporof_ is now known as victorporof
[21:15:08] <strcat> engla: I *do* say that
[21:15:30] *** Quits: rlbaker (rlbaker@8CD40108.464ADDF7.94FF2961.IP) (Quit: rlbaker)
[21:15:34] <tikue_> it'd be nice if you needed an unsafe block to access private fields
[21:15:50] <Earnestly> Heh, Dijkstra seems to pop up everywhere
[21:15:57] <strcat> tikue_: I made an RFC and it was decided against
[21:16:05] <tikue_> ah
[21:16:11] <strcat> so you just have to always store valid values in private fields
[21:16:32] <strcat> in live objects
[21:16:32] <engla> I don't see it :(
[21:16:43] *** Joins: valenting (Thunderbir@F8AEB5FE.ECBF5C84.FB866788.IP)
[21:16:59] *** Quits: brendan (brendaneic@moz-BDCCF091.hfc.comcastbusiness.net) (Quit: brendan)
[21:17:04] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[21:17:28] *** Joins: lkuper__ (lkuper@BAE96B56.1C5FF2E6.51B6877.IP)
[21:18:06] <engla> reader's confusion here:  "+This is a list of behaviour `unsafe` blocks/functions *must prevent*. These issues cannot be caused+by safe code, if all interfaces using `unsafe` code internally are correct. "
[21:18:25] <engla> 1) prevent from what? 2) cannot be caused by safe code -- does that include code inside unsafe blocks?
[21:18:27] *** Quits: dherman (dherman@moz-BDCCF091.hfc.comcastbusiness.net) (Quit: dherman)
[21:18:36] <strcat> they must prevent it
[21:18:49] <strcat> there's not a specific set of ways you must prevent it
[21:19:00] <strcat> it's entirely up to you to figure it out on a per-case basis
[21:19:07] <strcat> that's the responsibility you take on by writing an unsafe block
[21:19:20] <engla> I understand that
[21:19:40] *** Quits: anshin (anshin@CD85F10D.F21429E2.354459FA.IP) (Quit: leaving)
[21:20:47] <engla> I've said everything already. I'm fine with asking you and having my better understanding of the text, but other ignorants will come after me
[21:20:54] <engla> I can tell them too
[21:21:09] <strcat> I don't know what you want me to change it to
[21:21:42] <engla> someone else can do it later I guess
[21:21:47] <strcat> I could change the section header
[21:21:54] <tikue_> do you guys have a link to this
[21:22:01] <strcat> engla: do what though?
[21:22:13] <engla> clarify the documentation
[21:22:17] <strcat> tikue_: https://github.com/mozilla/rust/pull/9258/files
[21:22:26] *** Quits: lkuper__ (lkuper@BAE96B56.1C5FF2E6.51B6877.IP) (Ping timeout)
[21:23:06] <engla> it needs some care when using "safe" and "unsafe" in multiple meanings
[21:23:48] *** Quits: sw17ch (sw17ch@moz-62998E95.hfc.comcastbusiness.net) (Quit: sw17ch)
[21:23:59] <engla> The only thing I'm stubborn about is to make my point clear, but I'm sure it has been done now
[21:24:03] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:24:05] <tikue_> engla: what if it was "This is a list of behavior that implementors using `unsafe` blocks/functions are contractually tasked with preventing:"
[21:24:10] *** Joins: lkuper__ (lkuper@BAE96B56.1C5FF2E6.51B6877.IP)
[21:24:21] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Connection reset by peer)
[21:24:23] <tikue_> s/implementors/implementers
[21:24:29] <kimundi> strcat: For what it's worth, I'm with engla in that it can be misunderstood (if it's still the same header I read weeks ago) - could I get a link to the wiki page?
[21:24:33] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:24:36] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[21:24:37] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:24:40] *** Quits: nejucomo_ (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: Leaving.)
[21:24:42] <strcat> kimundi: I wrote it today
[21:24:50] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Quit: testing)
[21:24:52] <engla> preventing from what? or preventing from being visible outside the unsafe{} block or never occuring?
[21:24:57] <kimundi> Okay, then ignore the part where I agree xD
[21:25:05] <tjc> brson: r? https://github.com/mozilla/rust/pull/9263
[21:25:08] <tikue_> engla: presumably never occuring?
[21:25:16] <strcat> engla: I reworded some of the earlier parts
[21:25:20] <tikue_> "preventing from occuring"
[21:25:31] <engla> I know for a fact I can create an invalid str by pushing a byte to it, and then make it valid again by pushing again.  Now I understand this text has now defined this to be invalid
[21:25:33] <strcat> the unsafe functions part is unclear
[21:26:00] <engla> which is fine.
[21:26:57] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[21:27:01] <strcat> engla: there
[21:27:07] <strcat> it no longer uses 'unsafe' to refer to potentially unsafe code
[21:27:10] <strcat> well
[21:27:10] <kimundi> Could I get a link to the unsafeness text?
[21:27:16] <strcat> it's always only potentially unsafe
[21:27:18] * strcat shrugs
[21:27:31] <strcat> I feel like I'm muddying the waters by making a distinction, but now it does
[21:27:33] *** Joins: vodik (simon@moz-CBE4BB13.cable.teksavvy.com)
[21:27:40] *** Joins: nejucomo (nejucomo@moz-AE961E34.rev.dedibox.fr)
[21:27:43] <strcat> kimundi: https://github.com/mozilla/rust/pull/9258
[21:27:50] <kimundi> ah, it's a PR, thx
[21:28:57] *** Quits: lkuper__ (lkuper@BAE96B56.1C5FF2E6.51B6877.IP) (Ping timeout)
[21:29:04] <strcat> rewriting the lede of the unsafe block part too
[21:29:30] <strcat> unsafe == not memory safe
[21:29:32] <acrichto> strcat: is #3547 subsumed by mergefunc?
[21:29:35] *** Quits: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP) (Ping timeout)
[21:29:50] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[21:29:52] <strcat> unsafe function -> not memory safe in all cases
[21:30:02] <strcat> unsafe block -> not provably memory safe
[21:30:09] <strcat> they still have to be used safely
[21:30:19] *** Quits: nejucomo (nejucomo@moz-AE961E34.rev.dedibox.fr) (Quit: leaving)
[21:30:41] <strcat> acrichto: lets say it's not until switching is done
[21:30:49] <acrichto> strcat: sounds safe
[21:30:59] <strcat> if we aren't planning on fixing type_use we should just remove it now
[21:31:13] <strcat> I was just leaving open some room for changing our minds by not doing that yet
[21:31:27] *** Joins: lkuper__ (lkuper@BAE96B56.1C5FF2E6.51B6877.IP)
[21:31:31] <pcwalton> strcat++
[21:31:32] *** Joins: nejucomo (nejucomo@moz-AE961E34.rev.dedibox.fr)
[21:31:34] <pcwalton> destroy type_use
[21:31:47] *** Quits: nejucomo (nejucomo@moz-AE961E34.rev.dedibox.fr) (Quit: leaving)
[21:31:59] <strcat> pcwalton: https://github.com/mozilla/rust/issues/9222 the relevant bug
[21:32:07] <bblum> strcat: you mean, have to write deriving for them?
[21:32:09] <engla> strcat: and by "safe code", it is meant, all code outside unsafe{}, together with code inside unsafe{} that respects these rules
[21:32:10] <strcat> would be really easy to just rip it out atm
[21:32:33] <strcat> bblum: well, they'd still be automatically implemented
[21:32:39] <strcat> but we could allow inheritance from them
[21:32:49] <bblum> strcat: i believe we already do
[21:32:52] <bblum> i implemented that ;)
[21:33:05] <strcat> bblum: so isn't ~Foo:Send redundant? you can make 'trait Bar: Foo + Send {}'
[21:33:08] *** Quits: lmandel (lmandel@13F2CEC5.7672369.D8E68FF6.IP) (Quit: lmandel)
[21:33:32] <strcat> (assuming it works)
[21:33:54] <strcat> and impl<T: Foo + Send> Bar for T {}
[21:33:55] <bblum> strcat: hmm, i think that that will not work because we can't in all cases let a trait object automatically implement its own triat
[21:34:15] <bblum> of course that would be fine to automatically derive in the case of empty traits like send
[21:34:17] *** Quits: valenting (Thunderbir@F8AEB5FE.ECBF5C84.FB866788.IP) (Ping timeout)
[21:34:27] *** Quits: lkuper__ (lkuper@BAE96B56.1C5FF2E6.51B6877.IP) (Ping timeout)
[21:34:35] <bblum> but
[21:34:37] <strcat> bblum: ah, I see what you mean
[21:34:43] <bblum> another advantage of Foo:Send is that it automatically promotes to Foo
[21:34:46] <bblum> Bar would not
[21:35:01] <strcat> couldn't be say a trait object implements all the traits, as long as they don't use Self?
[21:35:14] <strcat> er
[21:35:15] *** Joins: lkuper__ (lkuper@BAE96B56.1C5FF2E6.51B6877.IP)
[21:35:17] <strcat> s/be/we/
[21:35:25] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[21:35:35] *** Quits: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net) (Quit: msingle)
[21:35:58] * strcat understands the problem now, though
[21:36:03] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[21:36:03] *** ChanServ sets mode: +o tjc
[21:36:23] *** Quits: lkuper_ (lkuper@moz-C4C820C6.dhcp-bl.indiana.edu) (Ping timeout)
[21:36:26] *** Joins: eschweic (Adium@moz-B823728F.syrcny.east.verizon.net)
[21:36:32] *** Quits: tefter (tefter@B5D119DC.B856A0A1.73804765.IP) (Client exited)
[21:37:04] *** Quits: penguin_dan (dan_johnsi@6902762D.11B071D.FB9A45AF.IP) (Quit: Leaving)
[21:37:27] *** Quits: lkuper__ (lkuper@BAE96B56.1C5FF2E6.51B6877.IP) (Ping timeout)
[21:37:36] <benh> Someone help me out here :(
[21:37:56] <benh> With a path with generics arguments like foo<T>, you can't have a kind bound?
[21:38:17] *** Quits: tikue_ (tkuehn@B57CA43C.B9B3942C.689607DE.IP) (Quit: tikue_)
[21:38:29] <benh> pretend foo is a trait and you're saying ~blah as ~foo<T> except you also want to make it sendable?
[21:38:34] <benh> or not sendable i guess
[21:38:53] *** Quits: heftig (heftig@moz-C1BA554.dip0.t-ipconnect.de) (Ping timeout)
[21:39:12] <vadimcn> acrichto: r? https://github.com/mozilla/rust/pull/9254
[21:39:34] <acrichto> vadimcn: ah yes, that looks good to me, but I wanted to run it by brson as well
[21:39:35] *** Joins: miza (miza@moz-908EA8DE.home.otenet.gr)
[21:40:15] <acrichto> vadimcn: also I checked that out, but I had some unknown exception code in "just building" rust, and I think that one of the issues said that'd be fixed by a snapshot?
[21:40:15] *** Quits: bheylin_ (brianheyli@moz-8255E94E.adsl.online.nl) (Quit: bheylin_)
[21:40:55] <vadimcn> acrichto: can you give me more details?
[21:41:13] * acrichto boots a windows vm
[21:41:26] *** Joins: tefter (tefter@B5D119DC.B856A0A1.73804765.IP)
[21:41:33] *** Quits: jdm (jdm@92FB48CA.8B5E9DF.9A8C35B4.IP) (Quit: Lost terminal)
[21:41:48] <acrichto> vadimcn: when compiling stage0 std "the application was unable to start correctly (0xc0000005")
[21:42:24] <vadimcn> yes, that's the missing dlls you need to grab from old mingw/bin
[21:43:02] *** Quits: [o__o] (~o__o@moz-24EBFAC7.me) (Input/output error)
[21:43:12] *** Joins: carllerche (carllerche@moz-BF6CB667.hsd1.ca.comcast.net)
[21:43:15] *** Joins: [o__o] (~o__o@moz-24EBFAC7.me)
[21:43:23] <vadimcn> acrichto: libstdc++-6.dll and libpthread-2.dll
[21:43:52] <acrichto> vadimcn: :(
[21:43:53] <vadimcn> acrichto: I usually also copy libgcc_s_dw2-1.dll, just in case
[21:44:35] *** Joins: Jesin (Jessin_@moz-679F0D97.cc.lehigh.edu)
[21:44:54] <vadimcn> acrichto: why so sad?
[21:44:56] <acrichto> huh, I thought I followed those instructions...
[21:45:04] <acrichto> I thought #5878 indicated that a snapshot would fix this
[21:45:11] <acrichto> but I think I'm dreaming agin
[21:45:42] *** Joins: heftig (heftig@moz-61654AE9.dip0.t-ipconnect.de)
[21:46:20] <vadimcn> acrichto: so what exactly did you do?   Seems that there are many sets of instructions floating around these days...
[21:46:35] <Ferio> rusti: for std::os::env().iter().advance | &(name, value) | {}
[21:46:36] -rusti- <anon>:7:27: 7:28 error: expected `in`, found `.`
[21:46:36] -rusti- <anon>:7          for std::os::env().iter().advance | &(name, value) | {}
[21:46:36] -rusti-                                     ^
[21:46:36] -rusti- application terminated with error code 101
[21:46:57] <acrichto> vadimcn: I followed https://github.com/mozilla/rust/wiki/Note-getting-started-developing-Rust
[21:46:58] *** Joins: brendan (brendaneic@moz-BDCCF091.hfc.comcastbusiness.net)
[21:47:01] <Ferio> hmm different version... :(
[21:47:06] <acrichto> up until "More info"
[21:47:11] <strcat> Ferio: rusti uses master
[21:47:21] <acrichto> rusti: version
[21:47:22] -rusti- "rustc 0.8-pre (0ec4d34 2013-09-16 11:30:42 -0700)"
[21:47:28] *** Quits: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP) (Quit: gnight)
[21:47:33] *** Joins: lkuper_ (lkuper@moz-C4C820C6.dhcp-bl.indiana.edu)
[21:47:51] <vadimcn> acrichto: The snapshot needs to be built using upgraded mingw, so that binaries are linked to the correct dlls.  BUT, in order to build it you need to seed stage0 with old dlls, because that's what snapshot compiler was linked to.
[21:48:21] <acrichto> vadimcn: ah I see
[21:48:48] *** Joins: hoverbear (andrew@EBFA78B5.F19E5E7B.E74D50F2.IP)
[21:48:48] <acrichto> vadimcn: which parts are the instructions for acquiring the relevant dlls?
[21:48:53] <Ferio> ok, any idea why the 0.7 compiler complains about the lifetime of the borrowed pointer in this case? env() returns &(~str,~str)
[21:49:05] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[21:49:25] <strcat> Ferio: because it's a temporary, it's gone immediately
[21:49:39] <Ferio> how can I unpack it then?
[21:49:49] <strcat> well, if it returns & it's not actually gone immediately
[21:49:57] <strcat> since it will have a lifetime on that
[21:50:30] *** Joins: barosl (barosl@3DE683B6.E551553C.7544CABF.IP)
[21:50:31] <vadimcn> acrichto: If you still have the old mingw folder, the easiest is to grab them from mingw/bin.   Otherwise... I'm not sure.  I used to downgrade gcc abd g++ to 4.5.1, but this stopped working as of late.
[21:50:35] <engla> Ferio: it's a bug and I think it still exists. use something like let env = std::os::env(); 
[21:50:45] <strcat> Ferio: it returns ~[]
[21:50:59] <strcat> so the ~[] will be gone right away unless you store it somewhere
[21:51:06] <strcat> based on the current definition of rvalues (it's not a bug)
[21:51:34] <strcat> we haven't defined semantics for extending the lifetime of temporaries
[21:51:42] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[21:51:45] <engla> I think it's this https://github.com/mozilla/rust/issues/3511
[21:52:00] <acrichto> vadimcn: I don't think I have an old mingw folder, I just downloaded mingw last night to get what I have now
[21:52:02] <strcat> engla: yeah, it's just an RFC
[21:52:12] <strcat> may or may not be defined differently
[21:52:35] <strcat> C++ makes them live until the end of an expression or as long as there are const& references to it
[21:52:39] <Ferio> engla: thx that did the trick
[21:52:45] <engla> I understand. I thought the general sentiment was that this will change to make Ferio's code valid
[21:52:58] <vadimcn> acrichto: can you run 'mingw-get upgrade "g++<4.6"'?  
[21:53:04] <jstevans> So my code won't compile when I try to do { let mut s_array: ~[~str[]] = ~[]; handle(s_array); }
[21:53:21] <cmr> jstevans: ~[~str[]] is a completely invalid type.
[21:53:24] <strcat> engla: it would make values live a lot longer since we use expressions heavily
[21:53:25] <cmr> jstevans: ~[~[str]]
[21:53:40] <jstevans> Sorry, that's what I meant, cmr
[21:53:50] <engla> add another ~!
[21:53:55] <acrichto> vadimcn: it appears to be doing something
[21:54:00] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[21:54:07] <engla> ~[~[~str]] maybe
[21:54:16] <jstevans> When I do { let muts_array: ~[~[str]] = ~[]; handle(s_array.clone()); } it compiles, but doesn't modify s_array
[21:54:35] <jstevans> How would I pass it in such a way that modifies the original s_array?
[21:54:38] <cmr> jstevans: Yes, you're cloning the vector and passing the new one.
[21:54:41] <acrichto> rusti: let muts_array: ~[~[str]] = ~[];
[21:54:42] -rusti- <anon>:7:29: 7:32 error: bare `str` is not a type
[21:54:42] -rusti- <anon>:7          let muts_array: ~[~[str]] = ~[];
[21:54:42] -rusti-                                       ^~~
[21:54:42] -rusti- error: aborting due to previous error
[21:54:42] -rusti- application terminated with error code 101
[21:55:04] <jstevans> rusti: let mut s_array: ~[~[str]] = ~[];
[21:55:04] -rusti- <anon>:7:30: 7:33 error: bare `str` is not a type
[21:55:04] <strcat> jstevans: don't clone it, and pass it as &mut [T] (or &mut ~[T] if you need to change the length)
[21:55:05] -rusti- <anon>:7          let mut s_array: ~[~[str]] = ~[];
[21:55:05] -rusti-                                        ^~~
[21:55:05] -rusti- error: aborting due to previous error
[21:55:05] -rusti- application terminated with error code 101
[21:55:06] <cmr> jstevans: you probably want to take &mut ~[~[str]], so you can grow the original vector as well as mutate the elements.
[21:55:13] *** Quits: canhtak (jeremy@moz-8CBCE134.wl.t.ulaval.ca) (Quit: canhtak)
[21:55:20] <vadimcn> acrichto: ok, save
[21:55:23] <Luqman> jstevans: your function can either take something like &mut [T] or &mut ~[T]
[21:55:37] <vadimcn> acrichto: save libgcc_s_dw2-1.dll  and libstdc++-6.dll
[21:55:53] <vadimcn> acrichto: then run 'mingw-get upgrade'
[21:55:57] <acrichto> vadimcn: still downloading, but where are those located?
[21:56:20] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[21:56:24] <vadimcn> c:\mingw\bin if you used the default location
[21:56:58] <acrichto> and where should they go?
[21:57:19] <jstevans> Great, thanks strcat, cmr, and Luqman!
[21:58:01] <jstevans> Is there a good way to split strings on a character in 0.7?
[21:58:04] <jstevans> also to get a substring?
[21:58:07] <vadimcn> acrichto: into stage0\bin
[21:58:19] *** Joins: obk (Mibbit@56A7885C.6849BFB2.CB858787.IP)
[21:58:45] <vadimcn> acrichto: actually, while you are at it, run 'mingw-get upgrade "libpthread=2.8.0-3"' and save libpthread-2.dll as well
[21:59:24] <acrichto> vadimcn: says that one is up to date
[21:59:50] <vadimcn> acrichto: Is there  libpthread-2.dll in mingw\bin ? 
[22:00:06] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[22:00:22] <acrichto> yes
[22:00:26] <engla> jstevans: I think it has split_iter()
[22:00:39] <vadimcn> acrichto: ok, save it along with the other two
[22:01:46] <vadimcn> acrichto:  make sure you run 'mingw-get upgrade' in the end to get everything back to the latest version
[22:02:00] <acrichto> vadimcn: ah it was deleted upon upgrading
[22:02:05] * acrichto re-reverts back
[22:02:06] <obk> What is the workaround for http://mibpaste.com/7qUG41 ?
[22:02:30] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[22:03:56] <acrichto> vadimcn: it seems to be getting farther than before...
[22:04:11] <vadimcn> acrichto: What's it doing?
[22:04:32] <acrichto> compiling stage0
[22:04:33] <benh> acrichto: thanks for the review :)
[22:04:46] <acrichto> benh: np :), always good to see pretty printing tests
[22:04:58] <vadimcn> acrichto: cool, it should get to the happy end now :)
[22:05:12] <acrichto> vadimcn: aha! just bulit libstd
[22:05:17] *** Joins: pcwalton (pcwalton@moz-BBE3ABD.mv.mozilla.com)
[22:05:17] *** ChanServ sets mode: +ao pcwalton pcwalton
[22:06:28] *** Quits: jgilbert (jgilbert@moz-7B0110AD.mv.mozilla.com) (Ping timeout)
[22:07:06] <benh> looking at the pretty printer got me confused for a while and then I filed https://github.com/mozilla/rust/issues/9265 :)
[22:07:09] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[22:08:15] *** Quits: andrew-__ (andrew-d_w@moz-5A92CAFF.dsl.static.sonic.net) (Input/output error)
[22:08:36] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[22:08:40] *** Quits: Houm (Houm@moz-25669AA8.fbx.proxad.net) (Ping timeout)
[22:08:50] *** Joins: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca)
[22:09:46] <olsonjeffery> oh boy, hoo-ray
[22:10:08] <olsonjeffery> \o/
[22:10:34] *** Quits: jstevans (Instantbir@72A99104.C8A19C38.DDE5D3F6.IP) (Ping timeout)
[22:10:52] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[22:10:57] <cmr> olsonjeffery: did io land?
[22:11:00] <cmr> file io
[22:11:30] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[22:11:30] *** ChanServ sets mode: +ao brson brson
[22:11:40] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[22:11:42] *** Joins: canhtak (jeremy@moz-8CBCE134.wl.t.ulaval.ca)
[22:11:52] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[22:13:13] *** Quits: eholk (eholk@moz-BA312F07.crest.iu.edu) (Quit: eholk)
[22:13:23] *** Joins: Houm (Houm@moz-25669AA8.fbx.proxad.net)
[22:13:48] *** Joins: tikue_ (tkuehn@B57CA43C.B9B3942C.689607DE.IP)
[22:15:48] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[22:15:48] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/fTEvnA
[22:15:48] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[22:17:49] *** Joins: jstevans (Instantbir@72A99104.C8A19C38.DDE5D3F6.IP)
[22:18:04] *** Quits: brendan (brendaneic@moz-BDCCF091.hfc.comcastbusiness.net) (Quit: brendan)
[22:18:32] <pcwalton> grrrr, more fold stuff went in that uses @fn
[22:18:40] <pcwalton> PSA: please stop using @fn
[22:18:50] <pcwalton> you bitrot an 8,000 line patch every time you do :)
[22:19:02] *** Joins: mihneadb (mihneadb@EF54FE47.3689173D.FCAAE698.IP)
[22:19:03] <obk> What does @fn even do?
[22:19:11] <obk> As opposed to &fn
[22:19:47] <pcwalton> it's a reference counted closure that copies its environment and can't move between tasks, basically
[22:19:47] *** Quits: tikue_ (tkuehn@B57CA43C.B9B3942C.689607DE.IP) (Ping timeout)
[22:19:52] *** Quits: Amaranth (travis@moz-F81BB56A.cpe.cableone.net) (Quit: Leaving...)
[22:20:26] <engla> obk: &fn is a borrowed closure so it can refer to either a stack closure, or a ~fn, or a @fn.
[22:20:46] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[22:20:46] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/jD0f1g
[22:20:46] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[22:20:47] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[22:20:47] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/4UU0FQ
[22:20:47] <ghrust> 13rust/06auto 149adcbac 15Alex Crichton: Prevent a rare linkage issue with an xcrate static...
[22:20:47] <ghrust> 13rust/06auto 140efc482 15bors: auto merge of #9257 : alexcrichton/rust/better-address-insignificant, r=thestinger...
[22:20:47] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[22:20:51] <olsonjeffery> cmr: yes
[22:21:18] *** Joins: jgilbert (jgilbert@moz-BBE3ABD.mv.mozilla.com)
[22:21:58] <obk> pcwalton: If that's so, how come there's no ~fn for a function that can be invoked only once?
[22:22:01] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[22:22:02] <engla> obk: (It can also refer to a regular function, wrapped)
[22:22:23] <obk> This would avoid the type errors when such functions try to move a value.
[22:22:24] <pcwalton> obk: there is, behind a flag; but there is a chance that it will turn into just a trait that takes ~self
[22:22:39] *** Quits: ww (Mibbit@moz-DFAED48A.lightspeed.sntcca.sbcglobal.net) (Quit: http://www.mibbit.com ajax IRC Client)
[22:22:59] <obk> ~fn sounds simpler - I'm probably missing something...?
[22:23:10] <pcwalton> traits that take ~self are already in the language
[22:23:19] <pcwalton> and give you what you want
[22:23:27] *** Joins: brendan (brendaneic@moz-BDCCF091.hfc.comcastbusiness.net)
[22:23:29] <pcwalton> the thing that is missing is sugar to make them as convenient as ~fn
[22:23:38] <obk> But a ~fn is just a closure, it has nothing to do with traits.
[22:23:52] <pcwalton> closures and traits are almost the same thing
[22:23:57] <pcwalton> boxed traits
[22:24:03] <pcwalton> ~Trait, that is
[22:24:08] *** Quits: Ferio (Ferio@moz-E7EA111C.clients.kiwiirc.com) (Quit: http://www.kiwiirc.com/ - A hand crafted IRC client)
[22:24:09] <pcwalton> the only difference is that traits have multiple methods
[22:24:28] <obk> Hmmm. I guess so...
[22:24:29] <luisbg> pcwalton, that is a good line for the Tutorial right there
[22:24:40] <luisbg> <pcwalton> closures and traits are almost the same thing [...]
[22:24:42] <pcwalton> this doesn't have consensus btw; it might not happen
[22:24:55] * luisbg learns a lot about Rust by just reading this channel, always interesting conversations
[22:25:01] *** Joins: Amaranth (travis@moz-F81BB56A.cpe.cableone.net)
[22:25:12] <dbaupp> benh: https://github.com/mozilla/rust/issues/9253 means that `~A:` doesn't roundtrip through the pretty printer properly, but it's required for rpass/issue-7673-* to work.
[22:25:13] <obk> Well, it is pretty tiresome to run against the problems with stuff like http://mibpaste.com/7qUG41
[22:25:24] <pcwalton> yes, it is
[22:25:26] <obk> with_borrow only invokes the function (exactly) once
[22:25:27] <pcwalton> we have to fix it somehow
[22:25:49] <obk> I don't suppose there's a workaround for now?
[22:25:53] <benh> dbaupp: sorry, at the time of writing i didn't realize that xfail-pretty exists and is not xfail :)
[22:25:56] <pcwalton> you can use -Z once-fns
[22:26:00] <pcwalton> and then use "once fn"
[22:26:14] <dbaupp> benh: ah, I see you've fixed it! nice.
[22:26:16] <obk> But RcMut wasn't written that way... it takes &fn
[22:26:24] <pcwalton> there's no workaround in that case
[22:26:35] <obk> I was afraid of that :-(
[22:26:37] <pcwalton> just put the variable in a cell
[22:26:39] <pcwalton> and use cell.take
[22:26:50] <benh> wasn't too hard! feels good to be able to contribute even a little, though
[22:27:05] *** Joins: nejucomo_ (Adium@moz-A1B9243C.static-ip.telepacific.net)
[22:27:32] <obk> Hmmm.... using cell. I guess there's no problem of the cell being passed into the closure...
[22:27:39] <dbaupp> benh: :)
[22:27:41] <strcat> I think we should remove RcMut/@mut anyway and encourage still following the mutability rules for most of the box
[22:27:56] <strcat> Rc<Mut<T>> would be the same, but you could use Mut on one field
[22:28:08] <strcat> RcMut/@mut are way too corase
[22:28:10] <strcat> coarse*
[22:28:22] <pcwalton> strcat: yes, I would like to, but there is an objection that pnkfelix raised regarding incremental/generational GC write barriers...
[22:28:46] <obk> Another nice thing would be to allow getting an Rc<T> out of an Rc<Mut<T>> (or whatever it is)
[22:28:47] <strcat> pcwalton: I thought the solution for that was just having Mut/Cell (and other non-Freeze types) responsible for calling an API?
[22:28:49] <pcwalton> you need Mut<T> to trip the write barrier
[22:29:04] <pcwalton> yeah if they know to do that and can reliably trip the write barrier it should be OK
[22:29:44] <pcwalton> if we have a good card marking scheme for GC it should be fine
[22:31:11] <dbaupp> obk: the problem with that is it's only safe if the Rc that you are converting is the only reference; otherwise you could mutate memory that that Rust thinks is immutable
[22:32:15] <strcat> you can't get Rc<T> from Rc<Mut<T>>
[22:32:24] <strcat> the boxes have a different representation
[22:32:32] <obk> Well, the Rc could lock the Rc<Mut<T>> until it is released
[22:32:45] <strcat> obk: Rc is {count,object}
[22:32:47] <obk> If it was aware it was taken from it
[22:32:50] <pcwalton> also I think that the with_foo thing is usually an anti-pattern
[22:33:01] <strcat> Rc<Mut<T>> is {count,{freeze_state,object}}
[22:33:04] <strcat> you can't convert
[22:33:05] <pcwalton> just return a reference to a newtype struct with a borrowed pointer in it and use RAII
[22:33:06] <obk> That is, Rc: {count,object,Option<Rc<Mut>}
[22:33:17] <obk> Then it could release it when it was done
[22:33:38] *** Quits: brendan (brendaneic@moz-BDCCF091.hfc.comcastbusiness.net) (Quit: brendan)
[22:33:39] <strcat> obk: that would raise the size of every Rc box
[22:33:49] <strcat> atm they only have 1 word overhead, compared to ~
[22:34:11] <strcat> (+ refcounting overhead on clones/destruction, but you can use moves)
[22:34:24] <obk> It would, but it would also allow expressing the fact that sometimes one wants to pass an immutable Rc to a function and know it won't change it. Even if one wantsto mutate the Rc inb other places.
[22:34:44] <obk> Right now, once someting is in RcMut, there's no way to pass a read-only version of it around.
[22:34:48] <obk> Hmmm.
[22:34:50] <strcat> you would use & in that case
[22:35:23] <obk> Well, since RcMut only has with_borrow, this gets cumbersome very fast.
[22:35:26] <strcat> the only reason to pass Rc/RcMut to a function is if you don't know when it's going to stop needing it
[22:35:42] <strcat> obk: it should, it means there are dynamic failure cases all over your code
[22:35:51] <obk> I suppose so...
[22:35:52] <strcat> it's not a good pattern
[22:36:15] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Client exited)
[22:36:22] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[22:36:25] *** Quits: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net) (Quit: dave1629)
[22:36:34] <obk> I'm trying to write some barely-linear data structure (basically the spine is linear but there are additional immutable references around).
[22:36:51] <obk> The Rc syntax isn't very friendly for that...
[22:37:06] <strcat> Rc will overload * and &*
[22:37:18] <strcat> RcMut isn't meant to be friendly
[22:37:18] <obk> That would help a lot, when that happens.
[22:37:32] <strcat> it could be more magical but it would make failure cases easier
[22:37:40] <nejucomo_> Did the syntax for for loops change since v0.4?  I thought they used to look like the do syntax...
[22:37:44] <jstevans> In 0.7, in run::ProcessOptions, why are in_fd and out_fd of type Option<c_int>?
[22:37:52] *** Joins: jensnockert (jensnocker@moz-3AFB03C7.mobileonline.telia.com)
[22:37:55] <obk> Hard to make only correct code easier without also allowing for unsafe code :-)
[22:37:56] <strcat> atm you can clearly see the scope where you have to guarantee you aren't using the RcMut elsewhere
[22:37:57] <cmr> jensnockert: Yes, it changes very much.
[22:38:02] <jstevans> as opposed to type of e.g. Option<Path>?
[22:38:03] *** Quits: jensnockert (jensnocker@moz-3AFB03C7.mobileonline.telia.com) (Connection reset by peer)
[22:38:09] <strcat> obk: safe != correct ;p
[22:38:09] <Luqman> nejucomo_: yep it has
[22:38:14] <cmr> nejucomo_: erm, yes, it changed very much
[22:38:22] <obk> Well, yes, I meant incorrect code.
[22:38:29] <dbaupp> jstevans: because they use file descriptors, so that you can pipe in directly from memory
[22:38:32] <strcat> obk: yeah, RcMut/@mut are hard to deal with
[22:38:34] *** nejucomo_ is now known as nejucomo
[22:38:39] <obk> I am somewhat worried that we'll end up like C++ with a dozen "pointer types"
[22:38:52] *** Quits: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[22:38:55] <obk> And safety would become a library thing instead of a language thing.
[22:38:55] <strcat> containers are essentially pointer types
[22:38:56] <cmr> We already have 7, why stop there?
[22:39:00] <dbaupp> jstevans: I believe/hope it's going to be made nicer, since it's currently very hard to actually create those file desciptors
[22:39:02] <jstevans> dbaupp: Is there a way to redirect output to a file?
[22:39:05] <nejucomo> What's the proper type annotation for a static vector?  I've tried [T] and &[T]...
[22:39:14] <cmr> nejucomo: &'static [T]
[22:39:15] <strcat> obk: don't know what you mean by it becoming a library thing
[22:39:23] <jstevans> dbaupp: output of a Process*
[22:39:30] <pcwalton> IMHO, there's little difference between implementing something in rustc's codegen and implementing something as a library if it has a safe interface
[22:39:31] <benh> or maybe [T, .. length]?
[22:39:34] <obk> Well, if one looks at Rc (as an example), there's a lot of unsafe code in there.
[22:39:37] <pcwalton> rustc's codegen is as unsafe as a library
[22:39:39] <dbaupp> jstevans: you can use `std::libc::open` to get a file descriptor that points to a file
[22:39:43] <pcwalton> since LLVM is not formally proven correct
[22:39:43] <Luqman> nejucomo: do you mean a fixed length vector?
[22:39:45] <engla> obk: is every iterator in C++ considered its own pointer type?
[22:39:50] <pcwalton> LLVM doesn't even have a defined semantics :)
[22:39:53] <pcwalton> formally
[22:40:16] <obk> So, if one has a dozen different pointer types (Rc and Arc and Mut and Cell and what not), each with a small piece of unsafe { ... } stuff... how comfortable are we that the combinations are safe?
[22:40:19] <strcat> obk: it's better to have unsafe blocks than code generation in the compiler
[22:40:25] <strcat> they are much, much easier to verify
[22:40:29] <nejucomo> Luqman: Yes, although if it inferred the length from the (static) value expression, that would be nice.
[22:40:29] <pcwalton> obk: we need to formally prove it sound
[22:40:29] <strcat> code generation is very hard to get right
[22:40:39] <pcwalton> it's quite important that we formally prove the borrow check sound, I think
[22:40:41] <obk> No argument there... libraries are easier to fix.
[22:40:43] <pcwalton> we keep finding little holes in it
[22:40:49] <pcwalton> from there we can prove the libraries sound
[22:40:49] <strcat> obk: easier to understand
[22:41:00] <strcat> obk: it's nearly impossible to understand what the codegen is doing
[22:41:04] <nejucomo> Hmâ€¦   &'static [T] is accepted, but results in type errors elsewhere...
[22:41:05] <Luqman> nejucomo: so the type would be [T, ..3] or similar
[22:41:18] *** Joins: dave1629 (dave@moz-17578A1A.hsd1.va.comcast.net)
[22:41:30] <obk> Is it still possible to prove the libraries are sound, even when using unsafe { ... } blocks? Sounds hard.
[22:41:30] <strcat> rust is high-level, LLVM bytecode isn't ;p
[22:41:34] <dbaupp> nejucomo: you can use `static foo: &'static [int] = &[1,2,3];`
[22:41:40] <obk> Well, formally proving stuff is always hard...
[22:41:46] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[22:41:52] <strcat> obk: it's no less possible than proving the language correct
[22:42:03] <strcat> whether Rc is a language feature or not, it's implemented the same way
[22:42:04] <pcwalton> everything emitted by codegen is basically one giant unsafe { ... } block
[22:42:15] <pcwalton> since LLVM is not a formally verified assembly language
[22:42:20] <pcwalton> even if it were, it'd have to be, well, formally verified :)
[22:42:31] <strcat> pcwalton: well, and LLVM IR will never be memory safe
[22:42:32] <obk> I don't envy anyone trying that :-D
[22:42:39] <strcat> so it will always be our responsibility to generate correct code
[22:42:42] <pcwalton> yeah
[22:42:49] <pcwalton> LLVM itself has a lot of undefined behavior
[22:42:52] <jstevans> dbaupp: I've got std::libc::funcs::c95::stdio::foreign_mod::fopen() is this what I want?
[22:42:58] <pcwalton> it'd be a lot easier to verify a small subset of Rust correct
[22:43:02] <nejucomo> dbaupp: Is there a reason the static lifetime or the static length cannot or should not be inferred from the value expression?
[22:43:12] <jstevans> dbaupp: That gives me a pointer to a FILE
[22:43:15] <pcwalton> we've just started on this
[22:43:16] <dbaupp> jstevans: no, that gives a *FILE; you need std::libc::open.
[22:43:33] <jstevans> dbaupp: I'm in 0.7, that doesn't seem to exist
[22:43:44] <dbaupp> jstevans: in the docs?
[22:43:50] <jstevans> http://static.rust-lang.org/doc/0.7/std/libc.html
[22:43:56] <jstevans> Am I missing something?
[22:44:05] <dbaupp> jstevans: all the things in std::libc are reexported at the top level, and old rustdoc doesn't show this
[22:44:06] <cmr> It'd be a reexport, which old-rustdoc doesn't show.
[22:44:11] <dbaupp> rusti: std::libc::open
[22:44:12] -rusti- fn(*i8, i32, i32) -> i32
[22:44:27] <engla> wow a function signature printed.. pretty!
[22:44:41] <dbaupp> jstevans: in this case, getting the source and searching that is the best documentation
[22:44:44] <obk> At any rate, using a Cell worked to solve my problem for now. It would be nice to do this with a ~fn, when that is made available. Cleaner and more efficient.
[22:44:47] <pcwalton> it's interesting because the borrow check is one of the uses of formal type safety proofs in industry languages that is very important to our engineering efforts
[22:44:58] <pcwalton> because the security of our browser engine depends on it :)
[22:45:31] *** Joins: Ferio (Ferio@moz-E7EA111C.clients.kiwiirc.com)
[22:45:44] <nejucomo> Hmâ€¦  Can anyone help me understand this error: http://sebsauvage.net/paste/?1393d957feb35b66#zY8YLI3CRLib5in2u9Puw2Rf7QeXhdooJVPIY6bAFCw=
[22:46:11] <cmr> nejucomo: You're using a fixed-length vector, which implement very few traits.
[22:46:16] <cmr> And there is no iterator over fixed-length vectors.
[22:46:24] <benh> nejucomo: try for c in chunks.iter() {
[22:46:24] <kimundi>  where few == 0 :P
[22:46:29] <cmr> You can't iterate over a vector directorly.
[22:46:30] <cmr> *directly
[22:46:34] <cmr> You need an iterator object
[22:46:38] <nejucomo> Thanks.
[22:46:55] *** Quits: RageOfThou (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[22:47:01] <kmc> we should fix it so that 'for' explicitly requries the Iterator trait, rather than obliviously calling .next()
[22:47:02] <cmr> kimundi: No, I'm pretty sure there are some?
[22:47:03] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[22:47:05] <kmc> I assume there's a ticket for that already
[22:47:16] <kimundi> cmr: How would you implement them?
[22:47:28] <kimundi> cmr: At maximum the kinds
[22:47:43] <cmr> kimundi: no idea, I just recall talk of it
[22:47:47] <strcat> kmc: yes
[22:47:56] <cmr> impl<T> Foo for [T, ..2] { .. }
[22:48:12] <cmr> Maybe it never materialized
[22:48:15] <kimundi> cmr: Hm, do we have such cases?
[22:48:30] <cmr> I think the stuff in extra::crypto have trait implementations.
[22:48:53] *** Joins: RageOfThou (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[22:49:37] <kmc> how do you write the impl generic over the length?
[22:49:49] <Luqman> you can't afaik
[22:49:54] <cmr> kmc: you can't
[22:49:59] <cmr> not in current rust
[22:50:02] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Quit: Bye!)
[22:50:12] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[22:50:40] <nejucomo> Is it possible & sane to declare constants in a module with the same name as a type?  struct T {â€¦}; mod T { const foo: â€¦}; impl T { method: â€¦} ?
[22:51:02] <strcat> yes, types and values are in different namespaces
[22:51:05] <cmr> brson: Sorry about the meeting, I forgot I had a class at that time now :(
[22:51:07] <strcat> at least I think it's possible
[22:51:12] *** Quits: vodik (simon@moz-CBE4BB13.cable.teksavvy.com) (Ping timeout)
[22:51:14] <strcat> rusti: static x: int = 5; struct x {}
[22:51:14] -rusti- <anon>:7:38: 7:39 error: Unit-like struct definition should be written as `struct x;`
[22:51:15] -rusti- <anon>:7          static x: int = 5; struct x {}
[22:51:15] -rusti-                                                ^
[22:51:15] -rusti- application terminated with error code 101
[22:51:22] <strcat> rusti: static x: int = 5; struct x { x: int }
[22:51:23] -rusti- ()
[22:52:49] <Luqman> some things like like newtype structs end up in both the type and value namespaces
[22:53:45] <kimundi> Which is something that I think should be forbidden/warned about
[22:53:49] <nejucomo> Oopsâ€¦  I want to reference the type inside the module: http://sebsauvage.net/paste/?c8906da7d1beaeb3#/iUbh5MG3Uc3yMMC88OwwyRfOs6gBGwE+ZESYnh4dTM=
[22:54:10] *** Quits: Jesin (Jessin_@moz-679F0D97.cc.lehigh.edu) (Ping timeout)
[22:54:26] * nejucomo tries a renaming use item inside the mod...
[22:55:12] *** Quits: lkuper_ (lkuper@moz-C4C820C6.dhcp-bl.indiana.edu) (Ping timeout)
[22:55:26] *** Joins: cdidd (cdidd@moz-F34BA2DD.broadband.corbina.ru)
[22:55:32] *** Quits: miza (miza@moz-908EA8DE.home.otenet.gr) (Input/output error)
[22:55:43] *** Parts: kmc (keegan@moz-D2A53639.compute-1.amazonaws.com) ()
[22:55:43] <brson> cmr: no worries
[22:56:09] <nejucomo> Hrm. I think I misunderstood the problem.  It's a syntax error: http://sebsauvage.net/paste/?24d91d5d55d771a9#xuwLn9X1dNXSqi2WUjNEyGfLUYltq9/4E4q6GXicw+o=
[22:56:56] <nejucomo> Oh, that paste is confusingly inconsistent.  I meant this: http://sebsauvage.net/paste/?c53b6fc29218d9f6#ftMFy+9XFmra8DUSGAjkpjeHS4f7Gna6dy9Eywohc9c=
[22:57:28] <Luqman> nejucomo: that's because it should be BitBucket { bits: 0, count: 0 }
[22:57:34] <Luqman> you can't leave off the field names there
[22:57:44] <nejucomo> Sighâ€¦  I just realized that.
[22:58:04] * nejucomo glances at caffeine meter, turns down verbosity knob.
[22:58:08] <dbaupp> you'll also need to import the type from the parent, but it'll probably conflict with the module
[22:59:42] *** Joins: kmc (keegan@moz-D2A53639.compute-1.amazonaws.com)
[22:59:42] *** ChanServ sets mode: +o kmc
[23:00:08] <nejucomo> Hrmâ€¦  Hrm.  This also causes a namespace collision with the impl...
[23:00:20] *** jorendorff is now known as jorendorff_away
[23:00:34] <nejucomo> I wish http://codepad.org/ had a rust button...
[23:00:46] <strcat> This is a list of behavior which is forbidden in all Rust code. The compiler will prevent the safe
[23:00:49] <strcat> subset of Rust from ever causing it, under the assumption that all `unsafe` blocks/functions are
[23:00:51] <strcat> correct.
[23:00:53] <strcat> kimundi: how is that?
[23:01:21] * strcat shrugs
[23:02:10] * nejucomo hunts for examples of a type, impl, and mod all with the same namespace in std/extra...
[23:02:13] <dbaupp> nejucomo: gist.github.com has rust highlighting
[23:02:22] <dbaupp> nejucomo: there won't be one
[23:02:33] *** Joins: mihneadb_ (mihneadb@41E65AA5.B2E373EA.FCAAE698.IP)
[23:02:33] <nejucomo> Ok.  So this is an unusual practice?
[23:02:50] <dbaupp> yeah
[23:02:59] <nejucomo> I suppose I can have a static method on the impl return a borrowed static pointer...
[23:03:01] *** Quits: mihneadb (mihneadb@EF54FE47.3689173D.FCAAE698.IP) (Connection reset by peer)
[23:03:05] <dbaupp> yeah
[23:03:21] <dbaupp> that's how it's normally done at the moment
[23:03:32] <dbaupp> rusti: let f: float = Real::pi(); f
[23:03:33] -rusti- 3.14159265
[23:03:35] <nejucomo> I thought to emulate the interface of uint::bits, though, as an example interface (from the outside perspective).
[23:03:58] <dbaupp> the built in types get special treatment, or something.
[23:03:58] <nejucomo> Ok, I'll just stick to the standard convention.
[23:04:01] * dbaupp doesn't know
[23:04:10] <strcat> dbaupp: they don't
[23:04:17] <strcat> rusti: std::uint::bits
[23:04:17] -rusti- 64u
[23:04:18] <nejucomo> I don't know either, but I do know there're macros there.
[23:04:20] <strcat> that's a module
[23:04:33] <dbaupp> strcat: oh; how does `uint` work as a module name then?
[23:04:41] <engla> There's a trait for ::bits too, maybe it will replace uint::bits later
[23:04:52] <dbaupp> rusti: use std::uint; trait Foo {} impl Foo for uint {}
[23:04:53] <strcat> dbaupp: oh you mean the lack of type namespaces on the built-ins?
[23:04:53] -rusti- <anon>:7:13: 7:22 warning: unused import [-W unused-imports (default)]
[23:04:54] -rusti- <anon>:7          use std::uint; trait Foo {} impl Foo for uint {}
[23:04:54] -rusti-                       ^~~~~~~~~
[23:04:54] -rusti- ()
[23:05:02] <dbaupp> strcat: yeah
[23:05:14] <nejucomo> Traits can only define methods, right?  Not "static values", so it would become uint::bits() ?
[23:05:25] <dbaupp> at the moment yes
[23:05:45] <strcat> dbaupp: a good reason to enforce TypeName and module_name at a language level
[23:06:14] <engla> rusti: std::num::Primitive::bits(None::<uint>)
[23:06:14] -rusti- 64u
[23:06:37] <dbaupp> strcat: yup; some people don't like that at all though.
[23:06:40] <strcat> why does that take an Option?
[23:06:49] <dbaupp> strcat: can't specify the self type
[23:06:54] *** Quits: Larry (larryfox@moz-343B6F0C.nyc.biz.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[23:07:00] <strcat> you can
[23:07:00] <engla> it's a workaround until  <for uint>  is allowed
[23:07:05] <strcat> isn't it allowed?
[23:07:05] <dbaupp> (and bits always returns uint, no way to infer Self.)
[23:07:06] <engla> if I understand correctly
[23:07:22] <nejucomo> heheâ€¦ now I'm struggling to define the lifetime of the returned borrow as static...
[23:07:24] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[23:07:47] <strcat> rusti: trait Foo { fn foo() {} } impl Foo for int {} Foo::<for int>::foo()
[23:07:47] -rusti- pastebinned 7 lines of output: http://sprunge.us/PchJ
[23:07:57] * strcat thought it was impl'ed
[23:08:18] <dbaupp> strcat: tuttut, pay attention :P
[23:08:56] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[23:09:04] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[23:09:08] *** Quits: alisdair (textual@1697D94C.7742FB18.FBC8476D.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[23:09:54] <dbaupp> nejucomo: `fn foo() -> &'static T { &'static x }`
[23:09:59] *** Joins: Jesin (Jessin_@moz-971F1FB4.cc.lehigh.edu)
[23:10:13] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[23:10:16] <dbaupp> nejucomo: (or with a local `static foo: T = ...; &foo`)
[23:10:28] *** Quits: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca) (Quit: Leaving.)
[23:10:34] *** Joins: maxli (maxli@moz-A607CA26.student.cs.uwaterloo.ca)
[23:10:44] <nejucomo> Thanks.
[23:11:43] *** Joins: maik (maik@moz-FECBC48.dip0.t-ipconnect.de)
[23:12:58] <nejucomo> Yay.  Not only has the compiler caught many silly mistakes, but so have my first few unittests.
[23:14:53] *** Quits: eschweic (Adium@moz-B823728F.syrcny.east.verizon.net) (Quit: Leaving.)
[23:15:07] *** Joins: eschweic (Adium@moz-B823728F.syrcny.east.verizon.net)
[23:15:26] <nejucomo> Hmâ€¦  I just noticed: I added a fn to a non-pub mod, but did not refer to it anywhere, and "rust test" said nothing about unused code...
[23:15:31] *** Quits: jstevans (Instantbir@72A99104.C8A19C38.DDE5D3F6.IP) (Connection reset by peer)
[23:15:31] *** Joins: jstevans1 (Instantbir@72A99104.C8A19C38.DDE5D3F6.IP)
[23:15:49] <nejucomo> Does rustc warn about unused code?  Is this a special case because it's in a #[cfg(test)] mod?
[23:16:13] <kimundi> nejucomo: No, unused functions are not yet detected by anything
[23:16:23] <kimundi> nejucomo: Only unused variables inside a function
[23:17:00] <nejucomo> ok.
[23:17:08] *** Quits: obk (Mibbit@56A7885C.6849BFB2.CB858787.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[23:17:12] *** Joins: jstevans (Instantbir@FF1BF4C4.65B70227.DDE5D3F6.IP)
[23:17:12] <brson> kimundi: it would be nice to have a summary of the current thinking on https://github.com/mozilla/rust/issues/7887 to put in the detailed release notes. maybe also have a pass over the libraries and make sure we're doing things consistently
[23:17:27] <strcat> maybe we should just remove &mut str
[23:17:51] <dbaupp> rusti: let _: &mut str;
[23:17:52] -rusti- <anon>:7:21: 7:24 error: bare `str` is not a type
[23:17:52] -rusti- <anon>:7          let _: &mut str;
[23:17:52] -rusti-                               ^~~
[23:17:52] -rusti- error: aborting due to previous error
[23:17:53] -rusti- application terminated with error code 101
[23:17:57] <brson> kimundi: the conventions on this subject still aren't clear to me, but it seems we're approaching consensus, so would be nice to document them, maybe even in the coding conventions page on the wiki
[23:17:57] <strcat> heh
[23:18:02] *** Quits: jstevans1 (Instantbir@72A99104.C8A19C38.DDE5D3F6.IP) (Ping timeout)
[23:18:06] * strcat didn't realize it wasn't even a type
[23:18:23] <Seldaek> deployed a new build of http://seld.be/rustdoc/ with up to date docs and new search engine, please do tell if you see any regression 
[23:18:31] <sp3d> what is it, if not a type?
[23:18:33] <vadimcn> acrichto: still building?
[23:18:35] <strcat> obviously whoever implemented slices realized index-assign was unsafe ;]
[23:18:43] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[23:18:45] <acrichto> vadimcn: nah it ended up building successfully
[23:18:46] <strcat> sp3d: 'str' isn't a type
[23:18:49] <sp3d> right.
[23:18:50] <kimundi> brson: To be honest it's not clear to me if we're reaching consensus, too
[23:18:55] <brson> kimundi: oh :-/
[23:18:57] <strcat> sp3d: so &mut str isn't a type, because there aren't mutable string slices
[23:19:08] <strcat> (there could be, but they wouldn't be useful)
[23:19:27] <kmc> the dark secret is that ~str and &str are totally different things
[23:19:27] <dbaupp> Seldaek: should the search box have browser autocomplete disabled? I'm pressing arrows there makes it popup/move around as well as the big list of matches.
[23:19:34] <strcat> because you can't assign arbitrary stuff to the string without changing the length
[23:19:36] <kmc> likewise ~[T] and &[T]
[23:19:57] <sp3d> in C the ability to mutate a char* without being the one to free it is perfectly expressible
[23:20:02] <strcat> engla: I reworded that lede again
[23:20:11] <strcat> engla: I *think* you will like it now ;p
[23:20:37] <Seldaek> dbaupp: yes yes true, forgot about that
[23:21:17] <sp3d> or "mutate the contents of a char* buffer", I guess
[23:21:35] <strcat> brson: I'll write the section on transitioning to the new for loop
[23:21:44] <strcat> luckily I think internal iterators were already mostly gone in 0.7
[23:21:55] *** Quits: jstevans (Instantbir@FF1BF4C4.65B70227.DDE5D3F6.IP) (Ping timeout)
[23:22:20] <brson> strcat: thanks
[23:23:38] <engla> strcat: exciting
[23:23:40] <engla> :)
[23:23:45] <dbaupp> Seldaek: looks pretty good :)
[23:24:23] *** Joins: jstevans (Instantbir@21DD3365.9FF7733C.DDE5D3F6.IP)
[23:25:52] *** Parts: dbaupp (Thunderbir@moz-EAA09AEF.lns20.syd7.internode.on.net) ()
[23:26:01] *** Joins: dbaupp (Thunderbir@moz-EAA09AEF.lns20.syd7.internode.on.net)
[23:26:04] <engla> strcat: It's so much better
[23:28:09] *** Quits: canhtak (jeremy@moz-8CBCE134.wl.t.ulaval.ca) (Quit: canhtak)
[23:28:47] *** Joins: canhtak (jeremy@moz-8CBCE134.wl.t.ulaval.ca)
[23:29:11] *** Quits: canhtak (jeremy@moz-8CBCE134.wl.t.ulaval.ca) (Quit: canhtak)
[23:30:21] <kimundi> brson: All I can say is that the current naming of Option for the main operation move, reference, and mutable reference are 'unwrap', 'get_ref', 'get_mut_ref', which doesn't seem ideal to me...
[23:30:36] <aatch> rusti: let _: &mut [int];
[23:30:37] -rusti- ()
[23:30:51] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[23:30:51] <ghrust> 01[13rust01] 15bors merged 06auto into 06master: 02http://git.io/4UU0FQ
[23:30:51] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[23:30:59] <dbaupp> brson: is https://github.com/mozilla/rust/issues/7087 another thing that is worth mentioning? (most of the stdlib has been converted to the as/to (copy)/into (move) pattern, and it seems like a useful piece of knowledge for predicting code behaviour)
[23:31:01] <nejucomo> Does: type A B -create a type alias called A which is synonymous with B?  (For example, can code use traits of B with an A variable?)
[23:31:27] <nejucomo> I wish there were an example here: http://static.rust-lang.org/doc/rust.html#type-definitions
[23:31:33] <aatch> nejucomo, normally, though there are some exceptions.
[23:31:56] <brson> dbaupp: yes. can you write something about it and put it in both the release notes and the style guide?
[23:32:11] <strcat> syntax highlighting doesn't work on the github wikis :(
[23:32:22] <kimundi> nejucomo: 'type Foo = Bar' is an alias for the _type_ only. You can't use it to call assoziated functions, and you can't import from it.
[23:32:44] <dbaupp> brson: sure; RELEASES.txt as well as detailed release notes on the wiki?
[23:33:15] <kimundi> nejucomo: contrast to 'pub use', which allows you to do those things, but you can only rename the type, not reshuffle type parameters
[23:33:27] <nejucomo> I find the manual confusing here for two reasons.  One is that it calls these "type definitions", but I also think of struct and enum as "type definitions".  The other is that it says it "defines a new name for an existing type", but I'm not sure how that relates to the exceptions kimundi just mentioned.
[23:33:31] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[23:34:00] <aatch> nejucomo, it should be type alias.
[23:34:10] <brson> dbaupp: I'll put a one-liner in RELEASES.text (working on that now). I need something more descriptive for the detailed release notes on the wiki, but also the (still crappy) style guide: https://github.com/mozilla/rust/wiki/Note-style-guide
[23:34:19] *** Quits: Jesin (Jessin_@moz-971F1FB4.cc.lehigh.edu) (Quit: Leaving)
[23:34:23] <kimundi> nejucomo: I did a writeup what is possible in both cases earlier today: https://gist.github.com/Kimundi/6593425
[23:34:42] <strcat> brson: ok I think that's good enough
[23:35:00] <brson> strcat: thanks!
[23:35:14] *** Joins: skoizza (Mibbit@moz-C3630477.hsd1.va.comcast.net)
[23:35:16] <Seldaek> dbaupp: fixed autocomplete btw
[23:35:23] <dbaupp> brson: yup, I'll get to it tomorrow if someone hasn't done it first.
[23:35:45] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[23:35:46] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/duB9sQ
[23:35:46] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[23:36:00] *** Quits: nkoep (nik@moz-4FD4CCAD.pool.mediaways.net) (Client exited)
[23:36:01] <brson> dbaupp: it isn't clear to me what the outcome of issue #7087 was? what did we end up doing?
[23:36:27] *** Joins: dandy (Dandy@moz-84CC8377.hsd1.co.comcast.net)
[23:36:49] <nejucomo> Hm, I just added https://github.com/mozilla/rust/issues/9266 but I don't see a way to label it as documentation or enhancement.  Can only maintainers adjust those labels?
[23:37:03] *** Joins: canhtak (jeremy@moz-8CBCE134.wl.t.ulaval.ca)
[23:37:05] <aatch> nejucomo, correct
[23:37:06] <nejucomo> kimundi: Awesome.  Thanks for the reference.
[23:37:53] <dbaupp> brson: as == no copying & generally very cheap (&str to &[u8]), to = copies and allocations (e.g. &str to ~str), into = move, no copies/allocations (e.g. convert ~str to ~[u8])
[23:38:00] <aatch> nejucomo, tagged as A-docs
[23:38:27] <nejucomo> Thanks.
[23:38:27] <strcat> dbaupp: so would int -> uint be 'as' or 'to'?
[23:38:30] <mark_edward> is there any what to go from a char to an integral type without using `as` ... i know about the recent PR, but  still
[23:39:06] <dbaupp> strcat: don't know; I believe they're all using `to`, but I'm not sure it's been explicitly decided what to do for small/primitive types.
[23:39:08] <strcat> mark_edward: `as` is the only language-level conversion
[23:39:19] <nejucomo> kimundi: I'm adding a link to your gist to that ticket.
[23:39:29] <kimundi> nejucomo: Updated that gist to show also use as type
[23:39:31] <kimundi> nejucomo: sure
[23:39:33] <mark_edward> strcat: any utility functions though
[23:40:18] <strcat> mark_edward: what kind of functionality are you looking for?
[23:40:22] <Eridius> acrichto: I updated #9255 again
[23:40:42] <strcat> I want to define traits for numeric conversion, but they're just going to be truncate vs. clamp to max
[23:40:52] <strcat> 'as' will truncate
[23:41:00] <strcat> rusti: 0b000000001 as u8
[23:41:00] <maik> rusti: std::int::from_str(~"42")
[23:41:01] -rusti- 1u8
[23:41:01] -rusti- <anon>:7:9: 7:27 error: unresolved name `std::int::from_str`.
[23:41:01] -rusti- <anon>:7          std::int::from_str(~"42")
[23:41:01] -rusti-                   ^~~~~~~~~~~~~~~~~~
[23:41:01] -rusti- error: aborting due to previous error
[23:41:01] -rusti- application terminated with error code 101
[23:41:08] <strcat> rusti: 0b100000000 as u8
[23:41:09] -rusti- 0u8
[23:41:10] *** Quits: donri (donri@moz-9BB61102.tbcn.telia.com) (Client exited)
[23:41:21] <mark_edward> strcat: using chars as index into some sort of translation table for HTML chars i think... it's from rustfind,, doomlord__ could explain better if you wanted
[23:41:45] <strcat> mark_edward: you really have a 21-bit table? :s
[23:41:58] <strcat> doomlord__: okay ;p
[23:42:00] *** Quits: sigma (sigma@moz-5748D6CF.range109-145.btcentralplus.com) (Ping timeout)
[23:42:19] *** Quits: nejucomo (Adium@moz-A1B9243C.static-ip.telepacific.net) (Quit: Leaving.)
[23:42:24] <strcat> char is 21-bit and represents a valid unicode code point
[23:42:29] <dbaupp> strcat: it's only a few megs
[23:42:45] <engla> isn't 'x' as u32  ok?
[23:42:54] <dbaupp> rusti: 'x' as u32
[23:42:55] <strcat> engla: yes
[23:42:56] -rusti- 120u32
[23:43:09] <strcat> engla: it won't ever truncate, if you convert to u32/u64/i32/i64
[23:43:31] <dbaupp> rusti: 'Ã¶' as u8
[23:43:32] -rusti- 246u8
[23:43:37] <engla> it could have a function to do exactly that in std::char, but it's not really needed
[23:43:46] <dbaupp> rusti: '\u0100' as u8
[23:43:48] -rusti- 0u8
[23:43:51] <maik> float has a from_str function but int doesn't?
[23:44:00] <strcat> maik: it's a trait
[23:44:11] <strcat> the old float free functions just haven't been removed yet
[23:44:15] <Luqman> brson: what exactly is the crate_map used for and would it possible to not have to pass it to start the runtime
[23:44:18] <strcat> rusti: from_str::<int>("100")
[23:44:19] -rusti- Some(100)
[23:44:20] <engla> oh no, that's an oversight by me
[23:44:32] <maik> strcat, ah 
[23:44:58] <kimundi> r? https://github.com/mozilla/rust/pull/9267
[23:44:59] <engla> I'll fix that now
[23:45:33] <dbaupp> kimundi: documentation too \o/
[23:46:13] <dbaupp> kimundi: (well, documentation in some places :P )
[23:46:39] <kimundi> dbaupp: Did only half-modernize it :P
[23:47:11] <kimundi> dbaupp: All the methods need better names too, but I had no time for thinking of good ones
[23:47:19] <doomlord__> heh. must stop assuming char=i8
[23:47:49] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[23:47:59] <strcat> doomlord__: char = i21, semantically
[23:48:11] <strcat> with a gap in the range of valid values
[23:48:23] <strcat> (surrogates used by UTF-16)
[23:48:44] *** Joins: brendan (brendaneic@moz-BDCCF091.hfc.comcastbusiness.net)
[23:48:49] <dbaupp> strcat: (u21 in Rust terms, right?)
[23:49:00] <strcat> dbaupp: well, there's no way to actually tell if it's signed/unsigned
[23:49:08] <strcat> since the most significant bit is always 0
[23:49:16] <dbaupp> strcat: of the 21 bits?
[23:49:20] <strcat> (although in a debugger, it will appear as an unsigned character)
[23:49:40] <strcat> dbaupp: of the 4 bytes it will be stored in
[23:49:47] <dbaupp> strcat: implementation detail :P
[23:49:48] <brson> Luqman: currently it only holds a list of logging flags (one per statement). It is very desirable to not have it in the signature of `start`.
[23:49:51] <engla> doomlord__: you can have this char as a token to remind you 'â™ž' 
[23:50:04] <doomlord__> is it safe to cast it to u32 then for using it as an index, or should we use a hashmap for character translation (if its going to use unicode etc.. it would be sparse ) .. my code was probably assuming char's can be translated by a 256 entry array :)
[23:50:06] <strcat> dbaupp: well, the size isn't really
[23:50:18] <strcat> doomlord__: you should use u8 to represent a byte
[23:50:23] <strcat> it is safe to cast char to u32
[23:50:37] <dbaupp> strcat: if you're talking about it as an i21/u21 then the size it's stored in is.
[23:50:43] <brson> Luqman: Either it could be a macro, so that the user can retrieve it less-magically, or it could be some kind of weak symbol that std expects to be available
[23:50:45] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[23:50:45] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14deab289 to 140efc482: 02http://git.io/N3iJvQ
[23:50:45] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[23:50:46] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[23:50:46] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/QtcxPg
[23:50:46] <ghrust> 13rust/06auto 14e12c3bf 15Daniel Micay: document what unsafety means...
[23:50:46] <ghrust> 13rust/06auto 14c6bd0e3 15bors: auto merge of #9258 : thestinger/rust/doc, r=catamorphism...
[23:50:46] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[23:50:55] <brson> Luqman: there's an issue open about this somewhere
[23:50:59] <strcat> dbaupp: well, LLVM doesn't distinguish between signed/unsigned
[23:51:03] <strcat> that's a silly rust idea! ;p
[23:51:21] <brson> Luqman: this is related https://github.com/mozilla/rust/issues/6322
[23:51:54] *** Quits: echristo (echristo@DCF57675.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[23:52:27] *** Quits: brendan (brendaneic@moz-BDCCF091.hfc.comcastbusiness.net) (Quit: brendan)
[23:52:55] *** Joins: nejucomo_ (Adium@moz-434492BB.dsl.static.sonic.net)
[23:53:56] <strcat> oh right I wanted to fix how we generate the entry function
[23:54:09] <strcat> we generate the real entry, an unmangled rust_main and a mangled one
[23:54:18] <strcat> and the unmangled rust_main always calls the mangled main
[23:54:24] <Luqman> yea, it also makes working with SDL a pain right now
[23:54:29] * strcat just hates seeing it in the IR
[23:54:55] <strcat> always get totally confused because it inlines the mangled one into rust_main but doesn't remove it...
[23:55:15] *** Quits: skoizza (Mibbit@moz-C3630477.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[23:56:27] *** Joins: a__ (a__@moz-25043B93.nycmny.fios.verizon.net)
[23:57:03] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[23:57:08] <Luqman> i see a _rust_main and a mangled main that look seemingly the same 
[23:57:11] *** Joins: tjc (tjc@moz-73CBF774.dsl.pltn13.sbcglobal.net)
[23:57:11] *** ChanServ sets mode: +o tjc
[23:57:23] <Luqman> minus the llvm.lifetime.start/end in _rust_main
[23:57:44] *** Quits: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com) (Client exited)
[23:57:51] <strcat> Luqman: those are from inlining
[23:58:00] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[23:58:05] <strcat> it marks the lifetime of inlined registers
[23:58:21] *** Joins: wilmoore (wilmoore@moz-7EE4D9D6.mystrotv.com)
[23:58:29] <strcat> if you don't optimize you'll see the call from rust_main to the other
[23:58:54] <Luqman> strcat: ah, that makes sense. and yea it is weird that it keeps it around
[23:59:00] <brson> the snapshot bot can't get past tests::no_rebuilding_dep in rustpkg
[23:59:00] <strcat> I'm not sure if it's supposed to always be mangled, or if we really want a rust_main symbol
[23:59:02] *** Quits: hoverbear (andrew@EBFA78B5.F19E5E7B.E74D50F2.IP) (Quit: hoverbear)
[23:59:39] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[23:59:54] <strcat> Luqman: I don't quite understand why it bothers to mark them, but it does! ;p
[23:59:58] <brson> I don't seem to be able to link rustc anymore: task <unnamed> failed at 'failure in fork: Cannot allocate memory', /home/brian/dev/rust2/src/libstd/run.rs:659
