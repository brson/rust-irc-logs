[00:00:02] *** Quits: eibwen (kvirc@moz-B706ADB3.dip0.t-ipconnect.de) (Ping timeout)
[00:13:34] *** Joins: pnkfelix (pnkfelix@49869947.3778D849.1D6E592A.IP)
[00:16:39] *** Joins: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP)
[00:16:39] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/E64s5g
[00:16:39] *** Parts: ghrust (ghrust@511FAEBD.6A2AE50.F3114085.IP) ()
[00:21:34] *** Joins: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP)
[00:21:35] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/V5Jl3Q
[00:21:35] <ghrust> 13rust/06auto 146a6d933 15Alex Crichton: test: Ignore some phase(syntax) tests...
[00:21:35] <ghrust> 13rust/06auto 144eea6f7 15bors: auto merge of #12659 : alexcrichton/rust/fix-snap, r=sfackler...
[00:21:35] *** Parts: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP) ()
[00:21:39] *** Joins: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP)
[00:21:39] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/UesUrQ
[00:21:39] *** Parts: ghrust (ghrust@5AC7F92B.6A2AE50.F3114085.IP) ()
[00:22:11] *** Joins: lpy (lpy@E44EE2C4.F09091A8.1348A864.IP)
[00:27:24] *** Quits: jensnockert (jensnocker@moz-9353D75F.e0f8471ae7fa.afb.bredband2.com) (Input/output error)
[00:29:31] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[00:41:40] *** Quits: lpy (lpy@E44EE2C4.F09091A8.1348A864.IP) (Client exited)
[00:54:54] *** Joins: lpy (lpy@E44EE2C4.F09091A8.1348A864.IP)
[01:03:13] *** Joins: jdm (jdm@moz-E41E4269.dsl.teksavvy.com)
[01:17:28] *** Joins: Puzzler (puzzler@moz-CD721145.hsd1.mi.comcast.net)
[01:17:46] *** Parts: Puzzler (puzzler@moz-CD721145.hsd1.mi.comcast.net) ()
[01:26:05] *** Joins: Guest_ (textual@moz-ED7F06D5.lightspeed.cicril.sbcglobal.net)
[01:26:45] *** Guest_ is now known as bmurphy1976
[01:31:39] *** Joins: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP)
[01:31:39] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/V5Jl3Q
[01:31:39] *** Parts: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP) ()
[01:33:26] *** Quits: canhtak (canhtak@moz-46C3B4C8.wl.t.ulaval.ca) (Quit: canhtak)
[01:33:38] *** Quits: pnkfelix (pnkfelix@49869947.3778D849.1D6E592A.IP) (Ping timeout)
[01:36:29] *** Joins: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP)
[01:36:29] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/5DsJ_A
[01:36:29] *** Parts: ghrust (ghrust@49477F7E.6A2AE50.F3114085.IP) ()
[01:36:30] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[01:36:30] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/6BBVOw
[01:36:30] <ghrust> 13rust/06auto 144c2353a 15Steven Fackler: Make visible types public in rustc
[01:36:30] <ghrust> 13rust/06auto 14fbe26af 15bors: auto merge of #12662 : sfackler/rust/unexported-type, r=cmr
[01:36:31] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[01:37:08] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[01:39:08] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[01:47:51] *** Joins: canhtak (canhtak@moz-46C3B4C8.wl.t.ulaval.ca)
[01:55:43] *** Quits: bmurphy1976 (textual@moz-ED7F06D5.lightspeed.cicril.sbcglobal.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[02:03:50] *** Joins: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP)
[02:03:50] <ghrust> [13rust] 15alexcrichton merged 06master into 06snap-stage3: 02http://git.io/mPG90g
[02:03:50] *** Parts: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP) ()
[02:08:33] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[02:09:54] *** Quits: jdm (jdm@moz-E41E4269.dsl.teksavvy.com) (Ping timeout)
[02:13:16] *** Joins: Guest_ (textual@moz-ED7F06D5.lightspeed.cicril.sbcglobal.net)
[02:27:31] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Connection reset by peer)
[02:28:30] *** Quits: blank_name (blank_name@463DB555.53526368.6D228269.IP) (Quit: Lost terminal)
[02:30:25] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[02:34:59] *** Joins: blank_name (blank_name@463DB555.53526368.6D228269.IP)
[02:46:33] *** Joins: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP)
[02:46:33] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/6BBVOw
[02:46:33] *** Parts: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP) ()
[02:46:53] *** Quits: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net) (Quit: I'm sure it's perfectly safe)
[02:56:20] *** Joins: Axord (xord@moz-C0D5F15A.lsanca.dsl-w.verizon.net)
[02:57:20] *** Quits: blank_name (blank_name@463DB555.53526368.6D228269.IP) (Quit: leaving)
[02:57:25] *** Joins: blank_name (blank_name@463DB555.53526368.6D228269.IP)
[02:58:14] *** Quits: lpy (lpy@E44EE2C4.F09091A8.1348A864.IP) (Ping timeout)
[02:58:46] *** Joins: lpy (lpy@E44EE2C4.F09091A8.1348A864.IP)
[03:08:17] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[03:15:24] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[03:18:21] *** Quits: lpy (lpy@E44EE2C4.F09091A8.1348A864.IP) (Ping timeout)
[03:29:57] *** Quits: Guest_ (textual@moz-ED7F06D5.lightspeed.cicril.sbcglobal.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[03:37:29] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[03:38:58] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[03:42:50] *** Joins: eddyb (eddy@DD15F8DE.17CB6122.FCAAE698.IP)
[03:48:42] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[03:49:12] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[03:58:52] *** Quits: kimundi (kimundi@moz-94744042.dip0.t-ipconnect.de) (Ping timeout)
[04:01:42] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[04:02:12] *** Joins: kimundi (kimundi@moz-C46B8065.dip0.t-ipconnect.de)
[04:03:24] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[04:06:41] *** kimundi is now known as zz_kimundi
[04:08:45] *** Quits: bytewise (bytewise@moz-20A3039F.adsl.alicedsl.de) (Ping timeout)
[04:13:32] *** zz_kimundi is now known as kimundi
[04:40:45] *** Joins: brson (brson@F16146EB.9D3722BB.58DC3EE6.IP)
[04:40:45] *** ChanServ sets mode: +qo brson brson
[04:56:30] *** Joins: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP)
[04:56:30] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/w3QQRg
[04:56:30] *** Parts: ghrust (ghrust@88C0CBA2.6A2AE50.F3114085.IP) ()
[04:56:32] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[04:56:32] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/evhRvQ
[04:56:32] <ghrust> 13rust/06auto 14d92fdb2 15Micah Chalmer: Emacs: Remove README warning of old whitespace bug...
[04:56:32] <ghrust> 13rust/06auto 143f3425a 15bors: auto merge of #12663 : MicahChalmer/rust/emacs-remove-ws-bug-warning, r=brson...
[04:56:33] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[05:03:40] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[05:07:25] *** Quits: brson (brson@F16146EB.9D3722BB.58DC3EE6.IP) (Quit: leaving)
[05:14:42] *** Quits: kaeso (kaeso@moz-F21FF626.unstable.it) (Ping timeout)
[05:14:53] *** Joins: kaeso (kaeso@moz-F21FF626.unstable.it)
[05:15:01] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[05:15:48] *** Quits: canhtak (canhtak@moz-46C3B4C8.wl.t.ulaval.ca) (Quit: canhtak)
[05:17:34] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[05:22:20] *** Quits: blank_name (blank_name@463DB555.53526368.6D228269.IP) (Quit: leaving)
[05:22:49] *** Joins: blank_name (blank_name@463DB555.53526368.6D228269.IP)
[05:23:11] *** Joins: brson (brson@6A848D32.C1B840DD.76F66111.IP)
[05:23:11] *** ChanServ sets mode: +qo brson brson
[05:26:08] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[05:29:32] *** Joins: bvssvni (Mibbit@moz-C4579D6F.bb.online.no)
[05:40:47] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[05:42:48] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[05:46:21] *** Joins: lpy (lpy@E44EE2C4.F09091A8.1348A864.IP)
[05:50:25] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Quit: Lost terminal)
[06:06:39] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[06:06:40] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/evhRvQ
[06:06:40] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[06:13:13] *** Quits: lpy (lpy@E44EE2C4.F09091A8.1348A864.IP) (Client exited)
[06:16:32] *** Quits: Kxepal (Miranda@moz-D26FCE20.pppoe.mtu-net.ru) (Quit: Kxepal)
[06:16:46] *** Joins: Kxepal (Miranda@moz-D26FCE20.pppoe.mtu-net.ru)
[06:20:05] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[06:23:16] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[06:26:05] *** Joins: huon1 (Thunderbir@moz-826BD85A.lns20.syd6.internode.on.net)
[06:26:54] *** huon1 is now known as huon
[06:42:41] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[06:43:04] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[06:53:06] *** Joins: edwardw (edwardw@24D7341C.32602B75.B9C6B12A.IP)
[06:59:27] *** Joins: angdev (angdev@3AC3DC35.8E8CA546.413CBA8C.IP)
[07:01:13] *** Quits: angdev (angdev@3AC3DC35.8E8CA546.413CBA8C.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[07:01:50] *** Joins: angdev (angdev@3AC3DC35.8E8CA546.413CBA8C.IP)
[07:01:51] *** Quits: angdev (angdev@3AC3DC35.8E8CA546.413CBA8C.IP) (Quit: angdev)
[07:03:54] *** Joins: lpy (lpy@E44EE2C4.F09091A8.1348A864.IP)
[07:33:02] <edwardw> phew, glad I kept commits small, otherwise rebasing would be a real pain in the ass this time around
[07:33:35] <huon> <3 sensibly separated commits
[07:35:04] *** Joins: eibwen (kvirc@moz-170ABD96.dip0.t-ipconnect.de)
[07:41:11] *** Quits: eibwen (kvirc@moz-170ABD96.dip0.t-ipconnect.de) (Ping timeout)
[07:46:56] *** Quits: brson (brson@6A848D32.C1B840DD.76F66111.IP) (Ping timeout)
[07:51:21] *** Joins: brson (brson@F16146EB.9D3722BB.58DC3EE6.IP)
[07:51:21] *** ChanServ sets mode: +qo brson brson
[07:59:27] *** Joins: _eddyb_ (eddy@F8B50789.F33C1089.FB866788.IP)
[07:59:38] *** Quits: eddyb (eddy@DD15F8DE.17CB6122.FCAAE698.IP) (Connection reset by peer)
[07:59:56] *** _eddyb_ is now known as eddyb
[08:00:09] <eddyb> rusti: "am I alive?"
[08:00:09] -rusti- "am I alive?"
[08:00:09] *** flaper87|afk is now known as flaper87
[08:00:24] <eddyb> so why is firefox pretending my internet is down?
[08:00:29] * eddyb sets firefox on fire
[08:00:38] <Yurume> firefox is down
[08:00:41] <eddyb> oh wait, it already is a fire fox
[08:00:52] <Yurume> water fox
[08:01:04] * flaper87 is back
[08:01:08] <eddyb> I refuse to give in to the pokemon madness
[08:01:59] <eddyb> though I'd sure love to write some random combination generator + evolutions
[08:03:11] *** Joins: Zr40 (zr40@EE4BB9F5.926C319A.BE2F4011.IP)
[08:04:06] <huon> rusti: version
[08:04:07] -rusti- "rustc 0.10-pre (999d55d 2014-03-01 11:41:30 -0800)"
[08:04:14] * huon hugs strcat
[08:04:23] <eddyb> what on earth is this https://etherpad.mozilla.org/undefined
[08:04:31] <eddyb> rusti: 
[08:04:32] -rusti- ()
[08:04:54] <eddyb> I was on this https://etherpad.mozilla.org/Rust-meeting-weekly and it reconnected and it ended up on undefined
[08:05:10] * eddyb is growing a hostility towards ECMAScript
[08:05:39] <Yurume> pick your favorite ES version to assult
[08:05:44] <Yurume> assault*
[08:05:54] <Yurume> for me it's 3
[08:06:08] *** Quits: edwardw (edwardw@24D7341C.32602B75.B9C6B12A.IP) (Quit: Leaving...)
[08:07:36] <eddyb> 7 is lost on me
[08:08:00] <eddyb> they just can't make anything I would use instead of Rust
[08:09:22] <eddyb> (Rust with JIT & runtime AST/CFG manipulation would be crazy good. but I don't need it in as many situations as I did in JS)
[08:14:24] *** Quits: Zr40 (zr40@EE4BB9F5.926C319A.BE2F4011.IP) (Quit: leaving)
[08:15:39] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[08:15:59] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[08:16:20] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[08:17:58] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[08:18:00] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[08:26:17] *** Quits: brson (brson@F16146EB.9D3722BB.58DC3EE6.IP) (Quit: leaving)
[08:32:57] <eddyb> hmm, I wonder if the linked list model for Weak RC handles can be improved upon... maybe using a vector instead of a list, when you just add Weak's and never remove them?
[08:33:35] <eddyb> well, if one of the Weak handles dies before its Strong counterpart... can just zero the entry
[08:34:20] *** Quits: KokaKiwi (kokakiwi@moz-D674DAC6.kokakiwi.net) (Ping timeout)
[08:34:39] *** Joins: KokaKiwi (kokakiwi@moz-D674DAC6.kokakiwi.net)
[08:43:00] *** Quits: bvssvni (Mibbit@moz-C4579D6F.bb.online.no) (Quit: http://www.mibbit.com ajax IRC Client)
[08:45:08] *** Joins: lpy_ (lpy@7360AA58.F09091A8.1348A864.IP)
[08:45:56] *** Quits: lpy (lpy@E44EE2C4.F09091A8.1348A864.IP) (Ping timeout)
[09:18:58] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[09:20:30] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[09:42:52] *** Joins: Zr40 (zr40@EE4BB9F5.926C319A.BE2F4011.IP)
[10:09:07] *** Joins: glaebhoer1 (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[10:13:51] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[10:19:52] *** Joins: aepsil0n (ebopp@moz-EF530DCB.ita.uni-heidelberg.de)
[10:25:17] <kimundi> eddyb: https://github.com/mozilla/rust/pull/12667
[10:26:19] <eddyb> kimundi: sweet, thanks :D
[10:26:36] <eddyb> hopefully DST will allow us to impl Trait directly to add methods to trait objects
[10:26:38] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[10:26:44] <kimundi> yeah
[10:27:30] <eddyb> do we have a virtual cost bench?
[10:27:47] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[10:27:51] <eddyb> something using the bencher black box huon added, to prevent LLVM from devirtualizing it
[10:28:18] <kimundi> no idea
[10:28:30] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[10:29:26] <eddyb> let mut x = 0; let y = &mut x as &mut Any; /* trick LLVM into thinking anything could happen */ black_box(&mut y); /* extract the value and do a comparison */ black_box(y.as_ref::<int>() == 0);
[10:29:38] <eddyb> with before and after times
[10:30:20] <eddyb> should be about twice as fast from your change
[10:33:25] <eddyb> rusti: static ONE: uint = 1; enum Foo {A = 1, B = (ONE + ONE) as u32}
[10:33:29] -rusti- pastebinned 7 lines of output: http://ix.io/aUp
[10:33:44] <eddyb> rusti: static ONE: uint = 1; enum Foo {A = 1, B = (ONE + ONE) as u32} B
[10:33:45] -rusti- B
[10:34:31] <eddyb> rusti: static ONE: uint = 1; #[repr(u32)] enum Foo {A = 1, B = (ONE + ONE) as u32} B
[10:34:32] -rusti- B
[10:34:34] <eddyb> rusti: static ONE: uint = 1; #[repr(u32)] enum Foo {A = 1, B = (ONE + ONE) as u32} B as uint
[10:34:35] -rusti- 2u
[10:34:47] <eddyb> rusti: static ONE: uint = 1; #[repr(u32)] enum Foo {A = 1, B = (ONE + ONE) as u32} match A {A => {} B => {}}
[10:34:48] -rusti- ()
[10:34:51] <kimundi> trying to reproduce a bug?
[10:34:53] <eddyb> rusti: static ONE: uint = 1; #[repr(u32)] enum Foo {A = 1, B = (ONE + ONE) as u32} match A {A..B => {}}
[10:34:53] -rusti- <anon>:10:94: 10:98 error: non-numeric type used in range
[10:34:54] -rusti- <anon>:10         static ONE: uint = 1; #[repr(u32)] enum Foo {A = 1, B = (ONE + ONE) as u32} match A {A..B => {}}
[10:34:54] -rusti-                                                                                                        ^~~~
[10:34:54] -rusti- error: aborting due to previous error
[10:34:54] -rusti- application terminated with error code 101
[10:34:58] <eddyb> meh
[10:35:17] *** Quits: dcrewi (david@moz-AB8667CE.gyrae.net) (Ping timeout)
[10:36:50] <eddyb> rusti: static MAX: uint = -1 as uint; match 0 {1u..MAX => {},_ => {}}
[10:36:51] *** Joins: vfetwnuncszu (david@moz-AB8667CE.gyrae.net)
[10:36:51] -rusti- ()
[10:36:54] *** vfetwnuncszu is now known as dcrewi
[10:36:59] <eddyb> rusti: static MAX: uint = -1; match 0 {1u..MAX => {},_ => {}}
[10:37:00] -rusti- <anon>:10:41: 10:45 error: mismatched types in range
[10:37:00] -rusti- <anon>:10         static MAX: uint = -1; match 0 {1u..MAX => {},_ => {}}
[10:37:00] -rusti-                                                   ^~~~
[10:37:00] -rusti- error: aborting due to previous error
[10:37:00] -rusti- application terminated with error code 101
[10:55:22] <eddyb> nmatsakis: I think one can implement TupleZip (and other type-matching recursive contraptions) with associated items
[10:57:37] <eddyb> (and variadic generics, of course)
[10:58:20] <eddyb> btw, you can map over &[T, ..N] to produce another [T, ..N] without any heap allocation, with variadic generics
[10:59:37] *** Quits: b (b@moz-55CA322E.org) (Ping timeout)
[10:59:59] <kimundi> eddyb: Earlier, did you mean adding something like https://gist.github.com/Kimundi/8a99fd4f89d7537f9f62 and comparing before/after the removal of void pointer?
[11:00:08] *** Joins: b (b@moz-55CA322E.org)
[11:00:20] <eddyb> kimundi: yupp
[11:01:00] <eddyb> &mut isn't required *now* but if we start giving LLVM stronger immutability guarantees, it would ignore those calls to black_box
[11:04:17] <eddyb> nmatsakis: trait TupleZip<RHS>: Tuple {type Result: Tuple; fn zip(self, rhs: RHS) -> Result;} impl TupleZip<()> for () {type Result = (); fn zip(self, _: ()) -> () {}} impl<AHead, ATail: TupleZip<BTail>, BHead, BTail: Tuple> TupleZip<(BHead, ..BTail)> for (AHead, ..ATail) {type Result = ((AHead, BHead), ..AHeadATail::Result); fn zip(self @ (a_head, ..a_tail), (b_head, ..b_tail): (BHead, ..BTail)) -> Result {((a_head, b_head), ..a_tail.zip(
[11:04:18] <eddyb> b_tail))}}
[11:04:22] <eddyb> TADAAA
[11:05:36] <kimundi> eddyb: I have the feeling you need to use something that allows for more than one line for these examples ;)
[11:07:46] <eddyb> commence frustration with firefox' incapacity to do \b
[11:08:22] * eddyb has gotten used to Ctrl+directional arrows and also double click
[11:09:04] *** Joins: summerlight_ (summerligh@327FC32B.2C956A45.501EFF44.IP)
[11:09:44] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[11:14:08] <eddyb> kimundi: did you manage to get a before/after measurement?
[11:15:10] <kimundi> eddyb: Still waiting for the after bench to run/compile - if it works, I'll backport the bench to before my change and run it again
[11:15:51] <eddyb> okay, thanks :)
[11:20:57] <kimundi> eddyb: hm, the after bench gives 4ns/iter
[11:21:13] <eddyb> does the black box not work?
[11:21:20] <kimundi> no idea
[11:21:28] <kimundi> how do I check?
[11:21:37] <eddyb> copy that bench into a standalone file
[11:21:59] <eddyb> run rustc on it with --test -O3 --emit=ir
[11:22:23] <kimundi> the rustc with my changes I assume?
[11:22:32] <eddyb> with the std changes, yeah
[11:22:45] <eddyb> if you name your test function something unique, like alakazam, it will be easy to grep for. can even add #[no_mangle]
[11:23:07] <eddyb> I guess it should be ok to gist the entire thing, if you don't use LTO (which would cause a lot of IR bloat)
[11:24:48] *** Joins: doomlord__ (servitor@moz-99BE89EC.range86-184.btcentralplus.com)
[11:24:52] *** Quits: doomlord__ (servitor@moz-99BE89EC.range86-184.btcentralplus.com) (Quit: doomlord__)
[11:26:09] <eddyb> nmatsakis, kimundi: https://github.com/mozilla/rust/issues/10124 but it still doesn't fit within the github code view :/
[11:27:05] <kimundi> eddyb: -O3 not recognized, I assume you meant just -O ?
[11:27:14] <eddyb> --opt-level=3, sorry
[11:27:31] <eddyb> (it has a higher inline threshold, in this case a higher chance to catch an issue)
[11:27:42] <eddyb> (than -O == --opt-level=2)
[11:28:36] <kimundi> eddyb: https://gist.github.com/Kimundi/73a07caf82e8c5017022
[11:29:09] <eddyb> too much cruft for me, lemme filt it
[11:29:34] <huon> eddyb: there is a benchmark about cost of virtual calls, but I don't think it's doing the correct thing at all
[11:29:50] <eddyb> curl https://gist.githubusercontent.com/Kimundi/73a07caf82e8c5017022/raw/db94a26e237e10016137d45ef2537023579c64d0/as_ref.ll | rustfilt | clip
[11:29:57] <eddyb> resulting in https://gist.github.com/eddyb/f2eca897abe9374a2dfc
[11:30:12] <huon> eddyb: need a stdin -> gist program :P
[11:30:32] <huon> (or just ix.io )
[11:30:43] <eddyb> I have ix, I don't really like it
[11:31:03] <kimundi> eddyb: I have no idea what that curl... line changes, and how the end result is supoosed to look better :)
[11:31:22] <eddyb> symbols are readable
[11:31:29] <eddyb> that's what "rustfilt" is for
[11:32:06] <eddyb> huon: it inlines the bench runner without LTO :/
[11:32:16] <huon> yeah, that's fine
[11:32:19] <eddyb> and the black box https://gist.github.com/eddyb/f2eca897abe9374a2dfc#file-as_ref-ll-L94
[11:32:32] <eddyb> I don't think it's supposed to inline the black box
[11:32:51] <eddyb> or is the asm call strong enough?
[11:33:11] <eddyb>  %17 = call %"struct.std::intrinsics::TypeId[#1]" %16(i8* %arg.i.sroa.5.0.copyload)
[11:33:18] <eddyb> kimundi: still 4ns?
[11:33:43] <eddyb> %18 = icmp ne i64 %.fca.0.extract.i, 4150853580804116396
[11:33:49] <eddyb> it's actually doing all the virtual work
[11:34:20] <kimundi> yes
[11:34:30] <kimundi> still 4ns if I run that standalone file
[11:34:42] *** Quits: doomlord_ (servitor@moz-99BE89EC.range86-184.btcentralplus.com) (Ping timeout)
[11:34:45] <eddyb> can you run it with stage0?
[11:35:06] <eddyb> (may need to trigger a build of libtest for stage0)
[11:35:24] <kimundi> can't find crate for `green` :P
[11:35:34] <eddyb> riiight. the compiler doesn't need it so it's not built
[11:35:55] <eddyb> I think make check-stage1 will build stage0 libgreen and libtest. but I'm not sure
[11:36:42] <eddyb> huon: I guess I like how it inlines the bench, there's no call overhead to care about and the inline asm acts as an optimization barrier
[11:39:08] <kimundi> eddyb: compiled with stage0 its still 4ns
[11:40:02] <eddyb> the black box might actually be wrong
[11:40:24] <eddyb> it doesn't actually run inside the loop
[11:41:11] <kimundi> Well, tell me what to change cause this is black magic to me ;D
[11:41:45] <eddyb> huon: derp https://github.com/mozilla/rust/blob/master/src/libtest/lib.rs
[11:41:59] <eddyb> err, firefox is silly again
[11:42:15] <eddyb> huon: do you see the problem? https://github.com/mozilla/rust/blob/master/src/libtest/lib.rs#L1168
[11:42:59] <kimundi> eddyb: huh
[11:43:13] <eddyb> well, there's more than one problem :/. constructing a black box is hard
[11:43:14] <kimundi> eddyb: apparently compiling with stage0 already uses the new libstd
[11:43:20] <eddyb> kimundi: ahh, sorry
[11:43:35] <eddyb> what's your source, I'll run it then
[11:43:39] <kimundi> eddyb: compiling it with an oldish nightly gives 7ns
[11:44:04] <kimundi> eddyb: source is at the end of https://gist.github.com/Kimundi/73a07caf82e8c5017022
[11:44:05] <eddyb> okay, so the black box not being perfect still gives pretty good timings (since the call is not removed)
[11:44:47] <eddyb> kimundi: well, put those numbers in the description and wait for a r+ :D
[11:44:55] <kimundi> kay :)
[11:46:02] <eddyb> gotta love languages with cheap tops
[11:47:33] <eddyb> Many would still require a virtual call, or a more generic "PHF" that wouldn't perform worse
[11:48:03] <huon> eddyb: what's the problem?
[11:48:18] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[11:48:28] <eddyb> huon: & instead of &mut
[11:49:02] <huon> eddyb: so?
[11:49:06] <eddyb> LLVM seems to not consider that the inline asm can modify the &mut &mut Any
[11:49:15] <huon> as far as LLVM knows it's read, though?
[11:49:27] <kimundi> Updated PR, running a final make check now to make sure I didn't miss any standalone tests
[11:49:28] <eddyb> right, so that blocks *some* optimizations
[11:50:00] <eddyb> actually, let me check again to see how much it actually hoisted out the loop
[11:51:28] <huon> eddyb: submit any improvements you come up with upstream
[11:51:30] <eddyb> huon: nevermind, I don't think it actually hoisted out much, it's just this messy IR that's confusing
[11:51:40] <huon> (hm, maybe it should be marked as "memory" volatile)
[11:51:47] <eddyb> oh, yeah, that would be helpful
[11:51:55] <huon> r? https://github.com/mozilla/rust/pull/12669
[11:52:01] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[11:52:42] <huon> huh?? https://github.com/mozilla/rust/wiki/Rust-for-CXX-programmers/_history
[11:52:42] <eddyb> not sure if it can even tell between &T and &mut T, I may have overreacted :P
[11:53:32] <eddyb> someone doesn't know how to use the GitHub UI, teehee
[11:53:57] <eddyb> (it's a bit confusing, IIRC. and allowing everyone to edit the wiki is dangerous)
[11:55:01] <eddyb> huon: nice, less AST nodes :D
[11:57:52] <kimundi> That CXX document needs some serious updating :D
[11:58:29] <kimundi> "Option and Either are very common patterns, so they're predefined along with utility methods." - we removed Either months ago
[11:59:46] <kimundi> aaah, I brokwe it
[11:59:53] <kimundi> help!
[12:02:27] <kimundi> How do I revert it?
[12:03:00] *** lpy_ is now known as lpy
[12:03:14] <Zr40> https://github.com/mozilla/rust/wiki/Rust-for-CXX-programmers/_compare/159bbb2660575431806a76c5060071a60532ad22...35f85db2c515a5d481bf5f5432cbe76f2a7451db
[12:03:27] <Zr40> but I don't see how that breaks it
[12:03:34] <kimundi> Me neither
[12:04:31] <kimundi> But apparently a revert fixes it
[12:05:38] <huon> https://github.com/mozilla/rust/issues/12100 is the correct solution
[12:05:48] <huon> just make it a proper page in the repo :P
[12:06:37] <Zr40> hm, is the file type supposed to be restructuredtext? It looks like markdown to me
[12:06:46] *** Joins: bmurphy1976 (bmurphy197@moz-ED7F06D5.lightspeed.cicril.sbcglobal.net)
[12:06:49] *** Quits: bmurphy1976 (bmurphy197@moz-ED7F06D5.lightspeed.cicril.sbcglobal.net) (Quit: bmurphy1976)
[12:07:13] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[12:07:47] <huon> that page is really sensitive, and any adjustment at all to a table seems to break it entirely
[12:08:07] <Zr40> hm, the links look like rst though
[12:10:10] <eddyb> someone changed it back and forth between markdown and rst
[12:10:14] <eddyb> like, twenty times
[12:13:11] <Yurume> plain HTML ftw
[12:15:07] <eddyb> huon: no r? https://github.com/mozilla/rust/pull/12667
[12:17:24] <eddyb> http://llvmweekly.org/issue/9 wat is Fracture?
[12:18:38] <eddyb> makes me cry a bit (more) inside
[12:19:16] <eddyb> acrichto: get ready - "I, for one, welcome our new C++11 overloards."
[12:20:07] <Yurume> decompiler *to* LLVM IR?
[12:20:23] <eddyb> I think dagger does the same thing
[12:20:33] <eddyb> the simplest thing it enables is recompilation
[12:20:55] <Yurume> indeed
[12:21:19] <Yurume> something like the conversion from obscure binary to PNaCl
[12:21:22] <eddyb> which means you can take something like the WoW binary (which is -O0 or -O1 in debug mode :P), turn it into LLVM IR, then LTO it against the wine binary
[12:21:34] <eddyb> s/binary/libraries
[12:21:45] <eddyb> then you end up with something that runs better on linux than windows
[12:22:30] <Yurume> winelib, you mean?
[12:22:38] <eddyb> yeah
[12:24:46] <eddyb> wiREd was just too bad to get anything done with/in it
[12:25:28] <eddyb> the analyzer definitely has potential, once you abstract away control flow and stack usage, you can easily produce LLVM IR out of it
[12:26:31] <eddyb> but how can I work on r3 when other people are doing similar things and they're much better at it? :(
[12:43:52] *** Quits: glaebhoer1 (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Connection reset by peer)
[12:43:52] *** Joins: ninechars (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[12:56:15] *** Joins: eibwen (kvirc@moz-D4DF209C.dip0.t-ipconnect.de)
[13:01:55] *** Joins: canhtak (canhtak@moz-46C3B4C8.wl.t.ulaval.ca)
[13:22:10] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[13:22:14] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[13:28:04] *** Quits: ninechars (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Connection reset by peer)
[13:28:09] *** Joins: ninechars (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[13:29:01] *** Joins: doomlord_ (servitor@moz-99BE89EC.range86-184.btcentralplus.com)
[13:37:22] <huon> acrichto: http://article.gmane.org/gmane.comp.compilers.llvm.devel/70836
[13:49:38] <eddyb> gj: error: â€˜F_Binaryâ€™ is not a member of â€˜llvm::sys::fsâ€™
[13:50:00] <eddyb> so what is going on?
[13:50:32] <huon> LLVM version mismatch
[13:51:00] <eddyb> but I just spent half an our building a brand new LLVM :(
[13:51:42] *** Joins: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP)
[13:51:42] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/nrx8tA
[13:51:42] <ghrust> 13rust/06auto 1458802d6 15Alex Crichton: test: Ignore some more syntax extension tests...
[13:51:42] <ghrust> 13rust/06auto 146e7f170 15bors: auto merge of #12665 : alexcrichton/rust/fix-snap-again, r=huonw...
[13:51:42] *** Parts: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP) ()
[13:52:58] <eddyb> huon: OMG I'm an idiot =))
[13:53:08] * eddyb slaps himself a few times
[13:53:14] <eddyb> that explains why LLVM rebuilt itself
[13:53:57] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[13:54:18] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[13:54:56] <eddyb> huon: so I checked out rust again... from my outdated github fork master
[14:07:04] *** Quits: Blaze_ (tuomino2@moz-785A3407.org.aalto.fi) (Ping timeout)
[14:10:37] *** Joins: Blaze_ (tuomino2@moz-785A3407.org.aalto.fi)
[14:19:09] *** Quits: lpy (lpy@7360AA58.F09091A8.1348A864.IP) (Ping timeout)
[14:34:05] <eddyb> time: 176.408 s linking
[14:34:14] <eddyb> cmr: ^ gold is only slightly better
[14:37:29] *** Joins: aochagavia (Mibbit@moz-C82E8769.static.ziggozakelijk.nl)
[14:38:01] <aochagavia> I have read that in order to compile the compiler on Windows you need to have Win32
[14:38:17] <aochagavia> does that mean that it won't work on a x64 windoes?
[14:38:26] <aochagavia> *windows
[14:38:56] <cmr> aochagavia: no, it means it's just going to be a 32bit app
[14:39:15] <aochagavia> ok, so I don't need another OS to build the compiler... that is fine
[14:39:32] <aochagavia> thank you!
[14:42:07] *** Joins: edwardw (edwardw@655F78EA.BF27AFA4.B9C6B12A.IP)
[14:42:19] *** Quits: aochagavia (Mibbit@moz-C82E8769.static.ziggozakelijk.nl) (Quit: http://www.mibbit.com ajax IRC Client)
[14:49:11] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[14:58:45] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Connection reset by peer)
[14:59:05] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[15:01:33] *** Joins: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP)
[15:01:33] <ghrust> [13rust] 15bors merged 06auto into 06master: 02http://git.io/nrx8tA
[15:01:33] *** Parts: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP) ()
[15:03:58] <eddyb> nmatsakis: how's your monday :)?
[15:04:55] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[15:05:16] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[15:06:32] *** Joins: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP)
[15:06:32] <ghrust> [13rust] 15bors pushed 0 new commits to 06auto: 02http://git.io/MhoV7w
[15:06:32] *** Parts: ghrust (ghrust@C82447D.6A2AE50.F3114085.IP) ()
[15:06:33] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[15:06:33] <ghrust> [13rust] 15bors pushed 3 new commits to 06auto: 02http://git.io/V046Zg
[15:06:33] <ghrust> 13rust/06auto 146c760d4 15Corey Richardson: Remove libc from std...
[15:06:33] <ghrust> 13rust/06auto 1474a72c7 15Corey Richardson: fix fallout from std::libc separation
[15:06:33] <ghrust> 13rust/06auto 142772099 15bors: auto merge of #12526 : cmr/rust/separate-libc, r=alexcrichton...
[15:06:35] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[15:06:58] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[15:09:33] *** Quits: canhtak (canhtak@moz-46C3B4C8.wl.t.ulaval.ca) (Quit: canhtak)
[15:12:04] <nmatsakis> eddyb: not bad... Rust team meeting this week, so I'm overlooking the ocean in Santa Cruz :)
[15:12:08] <nmatsakis> and...catching up on e-mail
[15:12:25] <nmatsakis> maybe not quite as nice as waxing up a surfboard. not that I, you know, surf.
[15:13:08] <eddyb> nmatsakis: try being surrounded by an ocean of land :P
[15:15:58] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[15:20:51] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[15:21:21] *** Joins: lpy (lpy@12172131.F09091A8.1348A864.IP)
[15:27:33] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[15:29:59] *** Joins: bmurphy1976 (bmurphy197@46E64081.D240E006.6624BF1.IP)
[15:32:17] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[15:35:20] *** Joins: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net)
[15:36:49] *** Joins: canhtak (canhtak@moz-46C3B4C8.wl.t.ulaval.ca)
[15:38:03] <flaper87> nmatsakis: hey, morning! Any plans to discuss opt-in kinds in this week's meeting ? 
[15:39:13] <eddyb> flaper87: meeting is next week AFAIK
[15:43:40] <flaper87> oh, erm, then next meeting :D
[15:44:15] <eddyb> nmatsakis: I feel I'm less productive without some form of interaction
[15:44:47] <eddyb> and then I forget all the ideas I've had over the weekend. so yeah, I want to be done with this Deref business
[15:55:06] *** Joins: sunfish (chatzilla@moz-42DA0C69.dsl.dynamic.sonic.net)
[15:57:36] *** Quits: Zr40 (zr40@EE4BB9F5.926C319A.BE2F4011.IP) (Quit: leaving)
[15:58:28] *** Quits: canhtak (canhtak@moz-46C3B4C8.wl.t.ulaval.ca) (Quit: canhtak)
[15:58:52] *** Joins: canhtak (canhtak@moz-46C3B4C8.wl.t.ulaval.ca)
[16:06:31] *** Joins: jensnockert (jensnocker@moz-C4B24C3.customers.ownit.se)
[16:09:03] *** Quits: edwardw (edwardw@655F78EA.BF27AFA4.B9C6B12A.IP) (Quit: Leaving...)
[16:10:14] *** Quits: canhtak (canhtak@moz-46C3B4C8.wl.t.ulaval.ca) (Quit: canhtak)
[16:12:30] *** Joins: jensnock_ (jensnocker@moz-33279404.customers.ownit.se)
[16:13:12] *** Quits: jensnockert (jensnocker@moz-C4B24C3.customers.ownit.se) (Ping timeout)
[16:14:11] *** Quits: jensnock_ (jensnocker@moz-33279404.customers.ownit.se) (Input/output error)
[16:14:23] *** Quits: lpy (lpy@12172131.F09091A8.1348A864.IP) (Quit: Leaving...)
[16:14:33] *** Joins: lpy (lpy@12172131.F09091A8.1348A864.IP)
[16:14:42] *** Joins: canhtak (canhtak@moz-46C3B4C8.wl.t.ulaval.ca)
[16:16:51] *** Quits: lpy (lpy@12172131.F09091A8.1348A864.IP) (Client exited)
[16:28:15] *** Quits: summerlight_ (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[16:31:47] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[16:32:19] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[16:32:23] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[16:32:30] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[16:38:18] * jdm sometimes wishes there were friend impls
[16:38:32] <jdm> sometimes I want a field to be private for msot consumers but not all
[16:39:19] <cmr> We need ACLs for everything.
[16:40:11] <eddyb> jdm: next one-use keyword gets r- from me
[16:41:14] <eddyb> even if it does completely nothing :P
[16:41:43] <jdm> eddyb: guess we'll use for in that case!
[16:42:01] <jdm> priv foo pub for Sometime: uint
[16:42:08] <Sharp> jdm: What are the usecases where you'd want to do that with something outside your module?  I always felt like friend was a hack to work around the fact that private is almost always too restrictive.
[16:42:08] <jdm> s/Sometime/Something/
[16:42:17] <SiegeLord> https://github.com/mozilla/rust/issues/10383
[16:42:37] <jdm> Sharp: actually in this case I guess I could move the code into the same module
[16:44:40] <Sharp> Okay, cool.  The only time I recall regularly seeing people use friend is for tests and I think (correct me if I'm wrong) Rust tests live inside their modules.  So that's why I was curious.
[16:47:51] <acrichto> huon: oh well, it was good while it lasted! more impetus to start working on binary builds of LLVM or being more compatible with the system LLVM
[16:48:31] *** Quits: Kxepal (Miranda@moz-D26FCE20.pppoe.mtu-net.ru) (Ping timeout)
[16:52:17] *** Joins: Kxepal (Miranda@moz-363D0201.pppoe.mtu-net.ru)
[16:58:53] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:02:29] <bstrie> cmr: "rustc uses libnative by default now" !! I figured this would be more than a footnote :P
[17:03:44] <erickt> I didn't even know librustc used any tasks
[17:03:48] *** Joins: jensnockert (jensnocker@moz-840940F2.wireless.lu.se)
[17:04:07] <eddyb> erickt: it's more than just tasks
[17:04:10] <eddyb> also IO
[17:04:15] <cmr> bstrie: why?
[17:05:20] <bstrie> cmr: iunno, it just seems like a pretty major change. and if it *wasn't* a major change, then it seems worth trumpeting how easy it was to switch the default runtime implementation :P
[17:06:06] <cmr> https://github.com/alexcrichton/rust/commit/40ab198356bbec05b308b2e61ebc6fe9e23ade9d
[17:06:08] <cmr> 6 line change
[17:07:48] <bstrie> oh I see, this was just for rustc itself, not for all rust code
[17:07:55] <cmr> yeah.
[17:08:23] <cmr> when we actually switch the default runtime for rust code, that will get a big mention, definiely not a footnote.
[17:16:20] <acrichto> bstrie: oh when I said that I got an executable under 200K it was with heavy modifications elsewhere, rustc was still producing > ~400K executables for libnative
[17:16:39] *** Joins: dherman (dherman@F16146EB.9D3722BB.58DC3EE6.IP)
[17:16:39] *** ChanServ sets mode: +ao dherman dherman
[17:17:38] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[17:17:38] <ghrust> [13rust] 15alexcrichton merged 06master into 06snap-stage3: 02http://git.io/bI_o_A
[17:17:38] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[17:18:22] <bstrie> acrichto: ah well :) imo 200K is the threshold under which people won't mentally round up twice to a megabyte, but maybe I'm being silly
[17:19:09] <cmr> acrichto: do you know what I need to do to fix http://buildbot.rust-lang.org/builders/auto-mac-32-opt/builds/4570/steps/compile/logs/stdio ?
[17:19:16] <cmr> looks like it just needs rustrt
[17:21:37] *** Joins: nrc (nrc@F16146EB.9D3722BB.58DC3EE6.IP)
[17:21:49] *** Parts: aepsil0n (ebopp@moz-EF530DCB.ita.uni-heidelberg.de) ()
[17:22:54] <acrichto> cmr: yeah
[17:23:13] <acrichto> cmr: hm that's an interesting conundrum
[17:23:15] <acrichto> it also needs libstd
[17:23:18] <acrichto> for _rust_stack_exhausted
[17:23:25] <cmr> mac why :(
[17:23:41] <acrichto> oh hm that's building a dylib
[17:24:16] <acrichto> cmr: is there any rust code in liblibc?
[17:24:24] <acrichto> I thought there wasn't any
[17:24:24] <cmr> acrichto: yes, looking at it now
[17:24:31] <cmr>  pub unsafe fn opendir(dirname: *c_char) -> *DIR {
[17:24:33] <cmr>      rust_opendir(dirname)
[17:24:35] <cmr>  }
[17:24:39] <cmr> line 3672
[17:24:43] <acrichto> that could be changed
[17:24:45] <cmr> says it's to work around mysterious linker issues.
[17:24:50] <acrichto> #[link_name = "rust_opendir"]
[17:24:51] <cmr> it *should* be changed
[17:24:54] <acrichto> oh
[17:25:06] <cmr> I don't have a mac to test on though
[17:25:21] <acrichto> having 0 rust code coudl be difficul;t though
[17:28:02] <cmr> is there a 32 bit mac try bot?
[17:28:24] *** Joins: brson (brson@F16146EB.9D3722BB.58DC3EE6.IP)
[17:28:25] *** ChanServ sets mode: +qo brson brson
[17:28:42] <cmr> doesn't look like it
[17:28:49] <jensnockert> cmr: Why would you want one?
[17:28:56] <cmr> jensnockert: bug only on 32bit mac
[17:29:03] <jensnockert> No 32-bit Mac can run a modern Mac OS.
[17:29:26] <cmr> well we build and test on it.
[17:30:07] *** Quits: bmurphy1976 (bmurphy197@46E64081.D240E006.6624BF1.IP) (Quit: Textual IRC Client: www.textualapp.com)
[17:31:39] *** Joins: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP)
[17:31:39] <ghrust> [13rust] 15bors pushed 4 new commits to 06auto: 02http://git.io/nzXlVQ
[17:31:39] <ghrust> 13rust/06auto 146c760d4 15Corey Richardson: Remove libc from std...
[17:31:39] <ghrust> 13rust/06auto 1474a72c7 15Corey Richardson: fix fallout from std::libc separation
[17:31:40] <ghrust> 13rust/06auto 142219783 15Corey Richardson: rt: remove opendir/readdir hack
[17:31:43] *** Parts: ghrust (ghrust@38D6F008.6A2AE50.F3114085.IP) ()
[17:32:43] <acrichto> cmr: I'm not sure we should remove that workaround
[17:32:49] <acrichto> it seems like a legitimate problem
[17:32:52] <eddyb> uhm... what? 9am
[17:33:08] <cmr> acrichto: if it's a legitimate problem, it will fail.
[17:33:18] <eddyb> I should've kept xkcd.com/now open
[17:33:48] <cmr> wait does that actually update in realtime
[17:33:56] <eddyb> yupp
[17:34:12] *** Quits: dherman (dherman@F16146EB.9D3722BB.58DC3EE6.IP) (Quit: dherman)
[17:34:22] <eddyb> ohhh, nmatsakis is usually on the east coast but he moved to the west coast for the workweek?
[17:34:49] <eddyb> (I did CTCP-TIME because I'm annoying like that)
[17:36:12] *** Joins: dherman (dherman@F16146EB.9D3722BB.58DC3EE6.IP)
[17:36:12] *** ChanServ sets mode: +ao dherman dherman
[17:37:40] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:41:35] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[17:49:59] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[17:50:35] *** Quits: jensnockert (jensnocker@moz-840940F2.wireless.lu.se) (Input/output error)
[17:51:18] *** Quits: sunfish (chatzilla@moz-42DA0C69.dsl.dynamic.sonic.net) (Ping timeout)
[18:03:02] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[18:08:07] *** Joins: jensnockert (jensnocker@moz-AED896E2.wireless.lu.se)
[18:14:21] *** Quits: canhtak (canhtak@moz-46C3B4C8.wl.t.ulaval.ca) (Quit: canhtak)
[18:19:57] *** Quits: Sharp (Sharp@moz-633F3606.hsd1.ca.comcast.net) (Quit: Sharp)
[18:21:35] *** Joins: geoffhill (geoffhill@moz-95FF7399.members.linode.com)
[18:22:26] *** Joins: intuxicated (intuxicate@C36E0E08.A0BADBCC.DA0107E2.IP)
[18:25:56] *** Joins: edwardw (edwardw@ED48E813.BF27AFA4.B9C6B12A.IP)
[18:27:59] *** Quits: jensnockert (jensnocker@moz-AED896E2.wireless.lu.se) (Input/output error)
[18:28:26] *** Joins: jensnockert (jensnocker@moz-AED896E2.wireless.lu.se)
[18:30:00] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[18:30:11] *** Quits: jensnockert (jensnocker@moz-AED896E2.wireless.lu.se) (Ping timeout)
[18:38:50] *** Joins: sunfish (chatzilla@moz-BBE3ABD.mv.mozilla.com)
[18:39:57] <jdm> root.rs:33:16: 33:21 error: variable 'js' is still repeating at this depth
[18:40:00] <jdm> wat
[18:40:22] <eddyb> jdm: is that an actual Rust error?
[18:40:24] <cmr> yes.
[18:40:31] <cmr> from the macro expander.
[18:40:39] <eddyb> aah, those ones
[18:40:54] <eddyb> rusti: let mut x; loop {x = ~x; x.foo;}
[18:40:55] -rusti- <anon>:10:34: 10:39 error: type inference failed because I could not find a type
[18:40:55] -rusti-  that's both of the form <generic #3> and of the form @<generic #3> - such a type would have to be infinitely large.
[18:40:55] -rusti- <anon>:10         let mut x; loop {x = ~x; x.foo;}
[18:40:55] -rusti-                                            ^~~~~
[18:40:56] -rusti- application terminated with error code 101
[18:41:03] <eddyb> rusti: let mut x; loop {x = ~x; x.foo();}
[18:41:08] -rusti- timeout triggered!
[18:41:19] <eddyb> cmr: I thought it was something similar to ^^
[18:41:22] <cmr> no
[18:41:26] <cmr> it's from transcription
[18:41:33] <cmr> I don't know exactly what makes it happen
[18:41:45] <eddyb> yeah, no, I remember that
[18:41:56] <eddyb> I had to deal with it during the renaming PR
[18:42:22] <edwardw> eddyb: you also did renaming?
[18:42:26] <eddyb> there's a piece of code making sure you don't write expansions that don't make sense
[18:42:29] <jdm> relevant code: https://pastebin.mozilla.org/4457376
[18:42:46] <eddyb> edwardw: renaming as in snake_case => CamelCase
[18:43:00] <edwardw> eddyb: ha
[18:43:28] <eddyb> jdm: $js is not in a repeating expansion
[18:43:39] <eddyb> it's still a list
[18:43:52] * edwardw wonders who can be bugged to review renaming PR
[18:44:05] <eddyb> edwardw: everyone \o/
[18:44:08] * jdm wonders if macro syntax is documented anywhere
[18:44:19] <eddyb> jdm: not sure what you want to do there though, so I can't really suggest anything
[18:44:31] <pauls> jdm: there's a macro section in the reference, and a macro tutorial.
[18:44:34] <eddyb> how many times do you want the match to show up?
[18:44:43] <edwardw> please do then :) this round of rebasing is a real pain in the ass duo to ~[] -> Vec
[18:44:54] <eddyb> jdm: do you want to repeat the entire block?
[18:45:00] *** Joins: canhtak (canhtak@moz-46C3B4C8.wl.t.ulaval.ca)
[18:45:10] <pauls> The error in question is caused by matching something under more layers of `$(...)*` than it is transcribed under...
[18:45:11] <jdm> eddyb: so here's an example potential usage with a similar macro:
[18:45:12] <jdm>     root!(rooted_three = three,
[18:45:12] <jdm>           rooted_int_container = int_container in {
[18:45:27] <jdm> eddyb: so in theory I would like one match per a = b expression
[18:45:34] <eddyb> riight
[18:45:42] <pauls> ...so the transcriber doesn't know how to turn that sequence into actual tokens (concatenating them all is rarely the right answer)
[18:45:53] <jdm> oh, it's the $() thing I guess
[18:46:00] <eddyb> jdm: you need to wrap the unsafe block in $()* I think
[18:48:58] <nrc> huon: r? https://github.com/mozilla/rust/pull/12671
[18:51:17] <edwardw> r? https://github.com/mozilla/rust/pull/12563
[18:52:39] <eddyb> r? https://github.com/mozilla/rust/pull/12491 https://github.com/mozilla/rust/pull/12610
[18:52:49] <eddyb> inb4 pcwalton r+
[18:53:20] <edwardw> and why all travis build failed?
[18:53:32] <eddyb> waiting on snapshot, I think
[18:53:39] <edwardw> k
[18:53:41] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[19:00:35] <nrc> cmr: where can I find this expand method?
[19:01:08] <eddyb> nmatsakis: www.reddit.com/r/rust/comments/1zfdof/cost_of_polymorphism_in_rust/cftaq32?context=10
[19:02:01] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[19:02:21] <sfackler> nrc: you'll probably have to implement it on SmallVector. It'll be just a simple for v in i { self.push(v) }
[19:02:25] <edwardw> vec_ng::Vec seems not have extend method
[19:02:40] <cmr> oh it's a Vec
[19:02:47] <cmr> impl Extendable for it.
[19:02:51] <cmr> http://static.rust-lang.org/doc/master/std/iter/trait.Extendable.html#tymethod.extend
[19:04:56] <eddyb> http://ssp.impulsetrain.com/goto.html this is interesting
[19:05:05] <eddyb> but good luck implementing that in borrowck =))
[19:05:20] <nrc> cmr, sfackler: thanks!
[19:09:18] <cmr> kmc: what was that thing you had mentioned somepoint, some sort of prism that demonstrated the various relationships between type inference / dependant types etc?
[19:09:28] <kmc> lambda cube
[19:09:46] <cmr> thanks
[19:09:50] * cmr bookmarks
[19:09:56] * kmc . o O ( 4 simultaneous type systems in a single rotation of the lambda cube )
[19:10:08] <sfackler> haha
[19:10:41] <flaper87> edwardw: btw, great work on making rust hygienic 
[19:10:53] <edwardw> flaper87: heh
[19:11:04] <edwardw> and with a bug in it
[19:11:20] <kmc> cmr: it generalizes to http://en.wikipedia.org/wiki/Pure_type_system
[19:13:52] <eddyb> "higher order dependently-typed polymorphic lambda calculus"
[19:14:02] <eddyb> this sounds like a great boss name
[19:17:07] *** Quits: canhtak (canhtak@moz-46C3B4C8.wl.t.ulaval.ca) (Quit: canhtak)
[19:19:22] *** Joins: Sharp (Sharp@moz-3301C7AB.static-ip.telepacific.net)
[19:20:23] <eddyb> "Wells' result implies that type inference for System F is impossible."
[19:20:59] <eddyb> nmatsakis: I wonder how these type inference problems impact things like variadic generics and generics over numeric constants (in their various forms)
[19:22:24] <eddyb> " As of 2008, GHC, a Haskell compiler, goes beyond HM, and now uses System F extended with non-syntactic type equality, for example."
[19:22:39] <eddyb> I have no idea what that means and the thoughts stemming from it are scary
[19:25:29] <kmc> well generalizing from HM to System F means that GHC allows a function to take a polymorphic argument
[19:25:39] <kmc> e.g.   (forall a.  a -> a) -> b
[19:26:01] <kmc> this is relatively simple and very useful, as long as you don't expect inference to work in every situation
[19:26:25] <eddyb> kmc: explain it like I'm 5
[19:26:31] <eddyb> or like Rust is the sole language I know
[19:27:00] <eddyb> it is fn<A>(|A| -> A) -> B?
[19:27:15] <kmc> yeah; imagine that closure types can have type parameters
[19:27:24] <eddyb> aaah
[19:27:29] <eddyb> HKF?
[19:27:51] <kmc> fn f(g: <A> |A| -> ()) { g::<int>(3); g::<~str>(~"hello"); }
[19:28:18] <eddyb> it's more complicated than HKT, isn't it?
[19:28:21] <kmc> hard to implement in Rust because polymorphism is implemented by monomorphization
[19:28:34] <kmc> this is orthogonal to higher-kinded types, I believe
[19:28:44] <eddyb> actually, it can be implemented by HKT
[19:29:01] <eddyb> take a HKT functor
[19:29:37] <eddyb> not sure if this can be part of the language with just HKT
[19:29:48] <eddyb> I mean, Some has a HKT
[19:29:54] <kmc> I'd be interested to see how you implement this in terms of HKT
[19:29:58] <eddyb> but it's a value... so semantics are weird
[19:30:01] <cmr> Some is not higher kinded.
[19:30:04] <kmc> eddyb: it does?
[19:30:10] <cmr> Some is fn Some<T>(x: T) -> Option<T>
[19:30:18] <eddyb> yupp
[19:30:27] <cmr> that's ... pretty standard.
[19:30:29] <eddyb> so the type of Some is <T>fn(T) -> Option<T>
[19:30:40] <eddyb> the type of Some::<T> is not higher-kinded
[19:31:40] <kmc> I think "higher-kinded type" only includes kinds with an arrow to the left of another arrow, i.e. (* -> *) -> *
[19:32:16] <kmc> in Haskell parlance, a type with kind (* -> *) is just called a type constructor
[19:32:31] <eddyb> I think we call that HKTs :/
[19:32:44] <eddyb> s/s//
[19:33:10] <eddyb> kmc: anyways, be generic over a type that implements a HKT trait that has a method that performs the function
[19:33:24] <kmc> (it's confusing because sometimes "type" means "concrete types" i.e. "types which can have values" i.e. kind *, and sometimes it means any type-expression including type constructors)
[19:33:38] <eddyb> Rust traits are pretty powerful. I just figured how to implement TupleZip *without the C++ template error atrocities*
[19:33:43] <eddyb> s/just/this morning/
[19:33:53] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[19:36:19] <eddyb> trait<T> Sink {fn sink(T);} fn f<G: Sink>(g: G) {g::<int>::sink(3); g::<~str>::sink(~"hello");}
[19:36:33] <eddyb> wait, this is making my head spin
[19:36:41] <kmc> that doesn't even require HKT does it?
[19:36:57] <eddyb> it is HKT, but I don't think it does, no
[19:37:02] <eddyb> you can have generic methods on traits :/
[19:37:13] <eddyb> so your example is implementable today
[19:37:28] <kmc> I had it more like   trait Sink { fn sink<A>(A); };   fn f<G: Sink>(g: G) { ... }
[19:37:49] <eddyb> and maybe take &self so it's like Fn
[19:38:10] <eddyb> I guess the advantage comes from not having to describe a trait/type class for this?
[19:38:23] <eddyb> so it's like sugar?
[19:38:34] <kmc> I think it's more fundamental than that
[19:38:46] <kmc> try writing Haskell's runST using rank-1 types and type classes
[19:39:04] <eddyb> do I want to ask what "runST" is?
[19:39:31] <eddyb> higher-kinded traits allow you to genericize over certain patterns
[19:39:44] <kmc> the ST monad allows you to create a "closed universe" of imperative code executing on real mutable variables, then run it as a pure computation
[19:39:46] <eddyb> so that probably helps
[19:39:54] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[19:39:59] *** Joins: canhtak (canhtak@moz-46C3B4C8.wl.t.ulaval.ca)
[19:40:05] <kmc> the higher-rank polymorphism of runST ensures that the closed universe is really closed, with zero run-time cost
[19:40:09] <eddyb> oh dear
[19:40:14] <kmc> it's pretty awesome
[19:40:59] <eddyb> "closed" reminds me of how you can actually implement that map HKT trait without HKT, but then it's not really bounded
[19:41:57] <eddyb> kmc: where does Haskell fit generic methods on type classes?
[19:42:36] <kmc> they're allowed even in Haskell 98; there's nothing special about them
[19:42:53] <eddyb> I think Rust has a bit more power than a strict type system of its kind would
[19:42:59] <eddyb> kmc: nevermind then
[19:43:11] <kmc> "strict type system"?
[19:43:22] <eddyb> kmc: that lambda cube is getting to my head
[19:44:44] <eddyb> kmc: try to read and understand the TupleZip example here. just to show sympathy for my current state of confusion :P https://github.com/mozilla/rust/issues/10124
[19:45:13] <eddyb> alternatively, you could give an abstract analysis of what is going on in there. that would actually be helpful, unlike getting you dizzy
[19:46:00] <eddyb> http://www.egison.org/ people do love their fancy descriptions that mean nothing to a lot of people reading them
[19:46:57] <kmc> eddyb: I believe the reason that traits don't really give you higher-rank polymorphism is related to the fact that you can't call a generic method through a trait object
[19:47:33] <eddyb> that's not going to happen :P
[19:47:36] <kmc> indeed
[19:47:48] <eddyb> someone raised that same problem when I told him about variadic generics
[19:48:10] <kmc> fn f(g: <A> |A| -> ()) { g::<int>(3); g::<~str>(~"hello"); }   is very much like calling a generic method through a trait object
[19:48:22] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[19:48:34] <eddyb> and he tried to explain me how it's actually implemented
[19:48:40] <eddyb> with a CPS-like construct
[19:48:44] <eddyb> and "boxing"
[19:49:23] <kmc> implemented where?
[19:50:02] <eddyb> that weird "runtime" polymorphism in Haskell
[19:52:04] <aatch> eddyb, this is a little old, but Higher-kinded types are to regular types what higher-order functions are to regular functions.
[19:52:29] <eddyb> ahh, higher-order function (HOFs?) is what I meant earlier
[19:53:03] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Ping timeout)
[19:53:40] <eddyb> aatch: so Some is a HOF with a HKT function type?
[19:54:43] <aatch> eddyb, no. Some is just a constructor to produce a value of type Option<T>
[19:55:02] <eddyb> Some is generic
[19:55:12] <kmc> eddyb: GHC implements polymorphism the same way as most high-level languages, which is to assume that values have a uniform representation (e.g. pointer to heap object with certain standard fields) and emit a single version of the code which works through that representation
[19:55:15] <eddyb> it's a fn<T>(T) -> Option<T>
[19:55:24] <kmc> it's the Rust / C++ approach which is "weird", imo ;P
[19:55:28] <aatch> eddyb, yes, but it doesn't specifically take a function as it's argument.
[19:55:30] <kmc> of course it's necessary for the design goals of Rust and C++
[19:55:44] <eddyb> kmc: so it's like ObjC?
[19:55:58] <eddyb> aatch: ahh, that's what HOFs are?
[19:56:08] <eddyb> then Some isn't one, of course
[19:56:09] <kmc> I don't know about ObjC... it's like Java, Scala, C#, Python, Ruby, JS, etc...
[19:56:15] <eddyb> right
[19:56:32] <eddyb> ObjC is a bit lower level I think, but it can be abstracted by JS
[19:56:33] <kmc> even like a lot of C programs
[19:56:46] <aatch> And Option isn't a HKT because the kind is just `* -> *`, which is the same idea as the function.
[19:57:01] <aatch> It just takes a type and produces a new type
[19:57:29] <aatch> HKT would be Foo<T<S>>, where T is itself some arbitrary generic type
[19:57:49] <aatch> so the "kind" is `(* -> *) -> *`
[19:57:55] <eddyb> not Option
[19:58:15] <kmc> that's a confusing syntax for it, imo
[19:58:27] <eddyb> if you could take Some as a value, what type would it have?
[19:58:39] <aatch> Option<T>
[19:58:42] <kmc> if I do  let x: Foo<T<S>> = ...  there are no HKTs involved; that works today of course
[19:58:46] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[19:58:48] <eddyb> aatch: erm... it's a function
[19:58:57] <aatch> Some itself?
[19:59:02] <eddyb> yeah
[19:59:09] <aatch> It's fn<T>(T) -> Option<T>
[19:59:13] <eddyb> right
[19:59:24] <aatch> rusti: Some
[19:59:24] -rusti- pastebinned 8 lines of output: http://sprunge.us/Egjc
[19:59:31] <eddyb> so what's the actual type?
[19:59:40] <eddyb> is it T => fn(T) -> Option<T> 
[19:59:49] <aatch> rusti: Some::<int>
[19:59:49] -rusti- fn(int) -> std::option::Option<int>
[19:59:51] <eddyb> <T> fn(T) -> Option<T>?
[19:59:57] <eddyb> aatch: not that. that I know very well :P
[20:00:41] <eddyb> maybe I should ask this... what's it called to have a lambda from a type to a value?
[20:00:48] <eddyb> and pass that lambda by value
[20:01:12] <aatch> eddyb, that doesn't really make sense
[20:01:25] <kmc> it does
[20:01:26] <kmc> System F has those
[20:02:06] <eddyb> I'm not sure it's possible to pass Some by value though
[20:02:25] <eddyb> I mean... first-class generic values? that sounds confusing
[20:02:31] * eddyb slaps himself
[20:02:41] <kmc> map = Î›A. Î›B. Î»(f: A -> B)...
[20:02:49] <kmc> a Î› in a term produces a âˆ€ in the type
[20:03:30] *** Quits: brson (brson@F16146EB.9D3722BB.58DC3EE6.IP) (Quit: leaving)
[20:03:53] <eddyb> do I even want to know?
[20:04:16] <kmc> and then I would call 'map' like:  map Int String (Î»x. show x) [2,3,4]
[20:04:28] <kmc> in other words there's syntax for type application as well as type abstraction
[20:04:54] <kmc> eddyb: I don't know, do you?  why are we talking about this if you don't want to learn what's going on?
[20:05:09] <eddyb> someone should make some sort of series titled "lost in lambdas"
[20:05:38] <aatch> kmc, but is that really taking a type and producing a value? or is it taking two types, producing a type which is then used to produce a value?
[20:05:50] <kmc> it's taking a type and producing a value...
[20:05:54] <eddyb> kmc: it's the same reason I used to spend nights reading wikipedia pages on quantum physics a few abstraction levels beyond my understanding
[20:05:58] <kmc> that value is a function
[20:06:05] <kmc> here a simpler example
[20:06:17] <kmc> id = Î›T. Î»(t: T). t
[20:06:23] <kmc> polymorphic identity function
[20:06:30] <eddyb> I... I can read that o_O
[20:06:34] <kmc> so (id String) or (id Int) is a value
[20:06:44] <kmc> so is (id String "foo") or (id Int 3)
[20:06:45] <aatch> kmc, I think I understand, it gets confusing with function types
[20:06:58] *** Joins: brson (brson@E9A6A33E.708C0A12.C7EEF3A2.IP)
[20:06:58] *** ChanServ sets mode: +qo brson brson
[20:06:58] <eddyb> so that's one way to abstract fn id<T>(x: T) -> T {x}
[20:07:08] <kmc> yeah. it's hard to build an example that doesn't use function types because (absent type classes etc.) you can't do anything with that T directly
[20:07:08] <aatch> Because the function is value, but can also be used to produce more values.
[20:08:06] <aatch> thus, (id String) is a function (which is a value), and (id String "foo") is a String which is also a value.
[20:09:08] * aatch puts his Haskell hat on, now values are just nullary functions
[20:10:16] <aatch> Technically we do have syntax for type application like that though.
[20:10:24] <aatch> rusti: id::<~str>
[20:10:24] -rusti- <anon>:10:9: 10:19 error: unresolved name `id`.
[20:10:25] -rusti- <anon>:10         id::<~str>
[20:10:25] -rusti-                   ^~~~~~~~~~
[20:10:25] -rusti- error: aborting due to previous error
[20:10:25] -rusti- application terminated with error code 101
[20:11:46] *** Quits: edwardw (edwardw@ED48E813.BF27AFA4.B9C6B12A.IP) (Quit: Leaving...)
[20:11:46] <eddyb> Some always works :P
[20:12:22] <kmc> aatch: noooooo "values are just nullary functions" is one of those myths about Haskell which is not even a little true
[20:12:38] <kmc> so many of those
[20:12:49] <kmc> http://conal.net/blog/posts/everything-is-a-function-in-haskell
[20:12:54] <aatch> kmc, eh, it's more of an abstraction in my head to help simplify things
[20:12:58] <eddyb> well... a function returning a value is that value itself
[20:13:03] <eddyb> so isn't it the other way around?
[20:13:05] <kmc> eddyb: ?
[20:13:18] <eddyb> I mean, a function taking no arguments and returning a value
[20:13:24] <kmc> aatch: but the truth is simpler, which is that every function in Haskell has one argument
[20:13:42] <aatch> kmc, true
[20:15:23] <aatch> Anyway, while not as elegant, doing something like `Some::<~str>` is /technically/ applying types to get a value. However, we cannot do this at runtime.
[20:15:37] <kmc> it's funny how the Haskell detractors and the really excited beginners often believe the same myths
[20:16:02] <eddyb> aatch: do you really need to do it at runtime?
[20:16:21] <eddyb> also, how do you do variadic generics when generics are a lambda construct?
[20:16:40] <eddyb> it's relatively simple in an impure type system
[20:16:57] <eddyb> just can't combine it with things like HKT (or there's limitations)
[20:17:22] <aatch> eddyb, not very easily. The best we could probably do and stay safe is limit it to Tuple types.
[20:17:23] <eddyb> (you can't combine it with default type params, and those also conflict with HKT. much fun)
[20:17:38] <eddyb> aatch: so what is Tuple?
[20:17:50] <aatch> (T1, T2, T3,...)
[20:18:21] <eddyb> and in Haskell?
[20:18:30] <aatch> eddyb, oh, no idea.
[20:18:43] <aatch> Probably similar though.
[20:18:46] <eddyb> can you be generic over a tuple in Haskell?
[20:18:58] <kmc> generic over all tuples of different size? not really
[20:19:13] <kmc> except that there are some type classes for tuples
[20:19:22] <eddyb> while variadic generics should be easier to implement than HKT in Rust =))
[20:19:27] <kmc> but that's not a language feature, somebody just wrote the impls up to like 7 or whatever ;P
[20:19:37] <eddyb> kmc: we do it up to 12
[20:20:06] <eddyb> and you can probably reduce the busy work to one simple macro
[20:20:15] <eddyb> that you can fill up to 100
[20:20:20] <aatch> Anyway, you can force non-interaction with HKT by just having special variadic type constructor that only takes '*' and only produces '*'
[20:20:24] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[20:20:39] <aatch> eddyb, most of it *is* done by macros
[20:21:54] <eddyb> I should just give up on hoping to have nmatsakis around
[20:22:02] <kmc> tbh it's a little disheartening to bring up Haskell or System F here and get responses like "do I even want to know"... it's like, you're designing a language with an advanced type system, you do want to know how type systems work
[20:22:03] <eddyb> buy a few boxes of red bull
[20:22:15] <eddyb> and implement variadic generics in all their glory
[20:22:35] <eddyb> (surviving the process is optional)
[20:23:10] <kmc> I think the Haskell solution to variadic generics is to take a type-level list, i.e. a type like   Cons Int (Cons String Nil)
[20:23:17] <eddyb> HKT isn't even that useful compared to all the nice things variadic generics bring. associated items are also neat
[20:23:26] <eddyb> kmc: that's a tuple type
[20:23:34] <eddyb> kmc: wait, no, sorry
[20:23:39] <kmc> if you give me an example of Rust code using variadic generics I can try to translate it to Haskell
[20:23:54] <eddyb> kmc: tuple linear algorithms
[20:24:01] <eddyb> or reducing algorithms
[20:24:21] <kmc> ?
[20:24:22] <eddyb> the simplest Rust example is Clone, but Haskell doesn't have that, sorry
[20:24:31] *** Quits: luz (lu.cy@moz-CD18B14B.customer.cdi.no) (Connection reset by peer)
[20:24:34] <kmc> how is Clone variadic?
[20:24:40] <eddyb> Clone implemented for tuples
[20:25:30] <eddyb> bleah... what's an easy one?
[20:25:34] <kmc> class CloneOne t;  class Clone t;  instance Clone Nil;  instance (CloneOne a, Clone b) => Clone (Cons a b)
[20:26:04] <eddyb> looks confusing
[20:26:17] <kmc> trait CloneOne; trait Clone;  impl Clone for Nil;  impl<A: CloneOne, B: Clone> Clone for Cons<A, B>;
[20:26:24] <kmc> yeah the syntax is not great
[20:26:25] <eddyb> but I did use a type level Cons list yesterday, so I can imagine how it would look
[20:26:28] <kmc> sugar for this makes sense
[20:26:51] <eddyb> kmc: wait, so, Haskell is like C++03 pairs? LOL
[20:27:12] <eddyb> + pre-variadic-generic-Rust-tuples
[20:27:23] <kmc> eddyb: this isn't a very common thing to do in Haskell
[20:27:39] <eddyb> can you do variadic functions otherwise?
[20:27:46] <eddyb> I guess no, because of currying
[20:28:12] <eddyb> so there, currying isn't all-powerful
[20:28:14] <kmc> now you're talking about variadic functions rather than variadic polymorphism
[20:28:23] <eddyb> which is an usecase
[20:28:49] <kmc> and it's not currying that gets in the way, it's that there are no types for variadic functions in Haskell / System F / any of these related systems
[20:28:57] <kmc> the best you can do is a typeclass
[20:29:07] <kmc> not the one above but slightly similar
[20:29:11] <eddyb> like in current Rust =))
[20:29:24] <eddyb> kmc: there's like 4 features in my RFC that give you all the power, when combined
[20:29:54] <eddyb> you have variadic generics, which is the ability to do type Foo<..T> and fn foo<..T>
[20:30:09] <kmc> in fact currying is essential to making those typeclass-based variadic functions usable the same way as ordinary functions
[20:30:14] <eddyb> (capturing multiple types in a tuple named `T`)
[20:30:50] <eddyb> expanding a tuple type (including those variadic ones) within a type list of any kind (function argument types, another tuple, generic actual type parameters, etc.)
[20:31:32] <eddyb> pattern matching ..x in a tuple and function/closure arguments, capturing multiple values in a tuple named `x`
[20:31:43] *** Joins: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP)
[20:31:43] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/v7N8jQ
[20:31:43] <ghrust> 13rust/06auto 142e00bb0 15g3xzh: Add NaNs, infinities and overflows support to sum...
[20:31:43] <ghrust> 13rust/06auto 14051345a 15bors: auto merge of #12355 : g3xzh/rust/stats-sum, r=huonw...
[20:31:43] *** Parts: ghrust (ghrust@C95C9FF.6A2AE50.F3114085.IP) ()
[20:31:53] <eddyb> and expanding a tuple value within a value list (function arguments and a tuple)
[20:32:10] <eddyb> the former two and the latter two are symmetric
[20:32:26] *** Quits: canhtak (canhtak@moz-46C3B4C8.wl.t.ulaval.ca) (Quit: canhtak)
[20:32:31] <eddyb> and the two symmetric types are for types and values, respectively
[20:32:35] <eddyb> (yay abstraction)
[20:32:53] <eddyb> kmc: any one of those features by itself is barely useful
[20:33:01] *** Joins: canhtak (canhtak@moz-46C3B4C8.wl.t.ulaval.ca)
[20:33:14] <eddyb> combined, it allows you to have something crazy like Vec[a, b, c] work (if you make Index variadic)
[20:34:17] <eddyb> nobody commented on the previous desperate rant. okay. I guess I won't risk my life to implement a complex feature in rustc :P
[20:37:48] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[20:37:58] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[20:40:19] <kimundi> r? https://github.com/mozilla/rust/pull/12667
[20:45:51] *** Quits: dcrewi (david@moz-AB8667CE.gyrae.net) (Ping timeout)
[20:47:36] <aatch> kimundi, any idea about the error Travis hit?
[20:47:49] <aatch> Seems like it might just be transient though.
[20:47:58] <kimundi> Travis fails everything right now
[20:48:00] <eddyb> need-snapshot AFAIK
[20:48:04] <kimundi> until a snapshot
[20:48:25] *** Joins: luz (lu.cy@moz-CD18B14B.customer.cdi.no)
[20:48:32] <aatch> Yeah just saw that everything is failing.
[20:48:55] <huon> r? https://github.com/mozilla/rust/pull/12673
[20:53:05] <aatch> huon, tests?
[20:53:40] <huon> aatch: std::vec_ng has no tests at all ...
[20:54:17] <aatch> huon, so? gotta start somewhere. I'm not too bothered, just doing my due diligence
[20:54:32] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[20:54:59] *** Joins: dcrewi (david@moz-AB8667CE.gyrae.net)
[20:55:13] *** Joins: vfetwnuncszu (david@moz-AB8667CE.gyrae.net)
[20:55:42] <huon> aatch: fiiinnnneee :P
[20:55:57] *** Quits: vfetwnuncszu (david@moz-AB8667CE.gyrae.net) (Quit: leaving)
[20:56:12] <aatch> It really *should* have tests, I might do that later if I get bored.
[20:56:47] <aatch> As in, I'm not going to make you implement a full test suite. That would just be mean.
[20:57:35] *** Quits: intuxicated (intuxicate@C36E0E08.A0BADBCC.DA0107E2.IP) (Ping timeout)
[21:06:26] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[21:14:10] <huon> aatch: r? https://github.com/mozilla/rust/pull/12673
[21:14:46] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[21:15:16] <huon> thansk
[21:15:33] * eddyb throws a pebble at Santa Cruz. PIIING
[21:15:48] <eddyb> timeout. and bed for me
[21:16:39] *** Joins: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP)
[21:16:39] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14051345a to 146e7f170: 02http://git.io/N3iJvQ
[21:16:39] *** Parts: ghrust (ghrust@99CAE845.6A2AE50.F3114085.IP) ()
[21:16:40] *** Joins: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP)
[21:16:40] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/fojI9A
[21:16:40] <ghrust> 13rust/06auto 14161332e 15Marvin LÃ¶bel: Cleaned up `std::any`...
[21:16:40] <ghrust> 13rust/06auto 14fe7a3fd 15bors: auto merge of #12667 : Kimundi/rust/any_improv, r=Aatch...
[21:16:41] *** Parts: ghrust (ghrust@7BEB6F9D.6A2AE50.F3114085.IP) ()
[21:17:10] <nmatsakis> cmr: you are inaudible
[21:17:11] <aatch> ah! been a while since ghrust has pinged me.
[21:17:21] <kimundi> aatch: Same here xD
[21:17:53] <eddyb> nmatsakis: is that a PONG :D?
[21:18:23] <eddyb> also, are you having cmr on TV land without recording anything? makes a bit sad, but it's okay, I guess, if I'm not part of the process
[21:21:44] *** Joins: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com)
[21:23:02] *** Quits: eddyb (eddy@F8B50789.F33C1089.FB866788.IP) (Ping timeout)
[21:23:28] *** Quits: brson (brson@E9A6A33E.708C0A12.C7EEF3A2.IP) (Ping timeout)
[21:24:19] *** Joins: brson (brson@4A08E125.708C0A12.C7EEF3A2.IP)
[21:24:19] *** ChanServ sets mode: +qo brson brson
[21:30:03] *** Quits: ninechars (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Ping timeout)
[21:30:09] *** Joins: ninechars (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[21:39:04] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[21:46:42] *** Joins: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP)
[21:46:42] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/wfqkrg
[21:46:42] <ghrust> 13rust/06auto 146cb34cf 15Huon Wilson: std: add reserve_additional and an Extendable impl to Vec.
[21:46:42] <ghrust> 13rust/06auto 14f3df661 15bors: auto merge of #12673 : huonw/rust/extendable-vec, r=Aatch...
[21:46:43] *** Parts: ghrust (ghrust@2E45E35D.6A2AE50.F3114085.IP) ()
[21:54:30] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[22:01:39] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[22:07:19] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[22:08:58] *** Quits: ninechars (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Ping timeout)
[22:12:45] *** Joins: ninechars (glaebhoerl@moz-B5B88D72.catv.broadband.hu)
[22:16:10] *** Joins: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP)
[22:16:12] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Connection reset by peer)
[22:16:59] *** Quits: sunfish (chatzilla@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[22:18:03] *** Joins: sunfish (chatzilla@moz-BBE3ABD.mv.mozilla.com)
[22:23:08] *** Joins: eddyb (eddy@F8B50789.F33C1089.FB866788.IP)
[22:30:22] *** flaper87 is now known as flaper87|afk
[22:30:35] <kimundi> Can I get a re-r+? https://github.com/mozilla/rust/pull/12667
[22:31:04] <eddyb> reerplus?
[22:31:35] <eddyb> one more pokemon name (--)
[22:31:47] <kimundi> redasherplusquestionmark
[22:32:36] <eddyb> looks about right. final evolution?
[22:33:42] <kimundi> redasherplusquestionmark 2: Electric bugalo
[22:34:16] <eddyb> haha but I don't think that's how pokemons work
[22:36:09] <kimundi> worked for porygon
[22:36:59] <kimundi> granted, "Porygon", "Porygon 2" and "Porygon Z" don't exactly follow traditional versioning schemes :U
[22:37:47] <eddyb> zemantic versioning?
[22:38:08] <kimundi> Semver would make a good pokemon name too
[22:39:19] <eddyb> I don't have enough time/proficiency to put into a pokemon-like creature thing game nonsense :(
[22:40:31] <kimundi> do you mean playing or creating?
[22:41:09] <eddyb> creating. though I probably shouldn't try gamedev if I'm so bad at playing games *sigh*
[22:41:31] <kimundi> urg, apparently make check -j4 doesn't really work - I'm still discovering compile errors in my PR
[22:43:41] <eddyb> I need a hardware xkill button
[22:43:52] <eddyb> Ctrl+Alt+Esc is too complicated for firefox
[22:43:52] <kimundi> builfd one
[22:44:13] <kimundi> a big, red, glowing button
[22:44:18] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[22:44:28] <eddyb> what does this button do? *poof* all your unsaved data is gone
[22:45:53] *** Joins: pcwalton (pcwalton@F16146EB.9D3722BB.58DC3EE6.IP)
[22:45:53] *** ChanServ sets mode: +ao pcwalton pcwalton
[22:47:07] <eddyb> hmm
[22:51:43] *** Joins: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP)
[22:51:43] <ghrust> [13rust] 15bors 04force-pushed 06auto from 14f3df661 to 146e7f170: 02http://git.io/N3iJvQ
[22:51:43] *** Parts: ghrust (ghrust@2DCF43EA.6A2AE50.F3114085.IP) ()
[22:51:44] *** Joins: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP)
[22:51:44] <ghrust> [13rust] 15bors pushed 2 new commits to 06auto: 02http://git.io/oSzJBg
[22:51:44] <ghrust> 13rust/06auto 146cb34cf 15Huon Wilson: std: add reserve_additional and an Extendable impl to Vec.
[22:51:44] <ghrust> 13rust/06auto 14c951696 15bors: auto merge of #12673 : huonw/rust/extendable-vec, r=Aatch...
[22:51:44] *** Parts: ghrust (ghrust@4BC7FFDD.6A2AE50.F3114085.IP) ()
[22:53:18] <eddyb> kimundi: oh, here's a pokemon name "A team of researchers announce the creation of a dropleton,[92] the first known quasiparticle that behaves like a liquid."
[22:53:27] <eddyb> (from like 4 days ago)
[23:00:12] *** Quits: NiccosSystem (NiccosSyst@AB1AFDE.FC7B0C35.A7597CB6.IP) (Ping timeout)
[23:03:31] *** Quits: Yurume (Yurume@A826BD81.8A0DEF81.38747683.IP) (Ping timeout)
[23:03:57] *** Quits: zv (zv@moz-955F83E9.hsd1.ca.comcast.net) (Ping timeout)
[23:04:09] *** Joins: zv (zv@moz-955F83E9.hsd1.ca.comcast.net)
[23:05:12] *** Quits: ninechars (glaebhoerl@moz-B5B88D72.catv.broadband.hu) (Quit: )
[23:05:14] *** Joins: Yurume (Yurume@A826BD81.8A0DEF81.38747683.IP)
[23:06:56] *** Quits: Yurume (Yurume@A826BD81.8A0DEF81.38747683.IP) (Ping timeout)
[23:09:37] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[23:10:06] *** Joins: Yurume (Yurume@A826BD81.8A0DEF81.38747683.IP)
[23:10:39] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[23:11:55] *** Quits: mawuli (mawuli@moz-A89BBCE.com.gh) (Connection reset by peer)
[23:13:00] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[23:13:21] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[23:14:01] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[23:15:03] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[23:26:59] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[23:34:39] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Quit: Lost terminal)
[23:35:54] *** Joins: mawuli (mawuli@moz-A89BBCE.com.gh)
[23:48:11] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[23:50:59] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[23:57:01] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[23:57:32] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
