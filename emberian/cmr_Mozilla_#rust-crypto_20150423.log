[00:19:04] *** Quits: brson (brson@moz-h4f.m43.48.37.IP) (Ping timeout: 121 seconds)
[00:19:22] *** Joins: brson (brson@moz-q9q.abh.232.109.IP)
[01:08:34] *** Quits: atomic (atomic@moz-qpd.aq7.187.37.IP) (Ping timeout: 121 seconds)
[01:12:18] *** Joins: atomic (atomic@moz-vjb.r8r.42.192.IP)
[01:32:11] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[01:42:20] *** Quits: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua) (Ping timeout: 121 seconds)
[01:44:15] *** Quits: atomic (atomic@moz-vjb.r8r.42.192.IP) (Ping timeout: 121 seconds)
[01:51:57] *** Quits: brson (brson@moz-q9q.abh.232.109.IP) (Quit: leaving)
[01:58:05] *** Joins: atomic (atomic@moz-hqmkvu.mit.edu)
[02:43:43] *** Joins: Riastradh (riastradh@moz-72bfrp.torservers.net)
[02:52:12] *** Quits: Riastradh (riastradh@moz-72bfrp.torservers.net) (Ping timeout: 121 seconds)
[02:58:45] <bascule> blockchainiacs: https://twitter.com/bascule/status/591069167966691330
[02:58:55] <bascule> lol Ilari
[02:59:05] <bascule> frewsxcv: I implemented it in Rubby
[02:59:48] <bascule> frewsxcv: https://github.com/ruby/openssl/pull/12/files
[03:00:08] <bascule> if someone hasn't yet, I'd totally be down to do it unless you want to, heh
[03:00:23] <bascule> I was also talking to people on both the Chrome and Mozilla security teams
[03:00:46] <bascule> and they sent me links to their test suites
[03:01:00] <bascule> although they don't implement any of the "MAY"s by design, which... rocks
[03:02:12] *** Joins: adu (ajr@moz-0foa9t.md.comcast.net)
[03:03:00] <bascule> I implemented some of the MAYs for reasons of backwards compatibility
[03:03:11] <bascule> for example Chrome and Firefox both disallow any wildcards other than "*."
[03:03:19] <bascule> which rules!
[03:03:44] <adu> hi bascule 
[03:03:48] <bascule> in Firefox, certificates with double wildcard SANs now completely break TLS negotiation, lol
[03:04:02] <bascule> adu: sup
[03:04:08] <adu> not much
[03:04:26] <bascule> anyway, tl;dr: I am all for way more restrictive, simplified hostname verification behavior
[03:04:51] <bascule> like, wtf: https://github.com/ruby/openssl/pull/12/files#diff-9a42342b138609980dc7474cb96040eeR212
[03:17:03] <frewsxcv> bascule: i dont have enough time to work on it by myself, but if others were helping, i would definitely contribute
[03:17:42] <frewsxcv> right now hyper doesnt do any hostname verification, and itd be nice if it did before it gets popular
[03:20:57] <bascule> I could totally make an rfc6125 crate
[03:21:10] <bascule> and support "loose" and "strict" behaviors perhaps
[03:21:11] <adu> wait
[03:21:13] <bascule> strict by default!
[03:22:02] <adu> bascule: does that mean that i18n dns names are all verifiably uncertifyable?
[03:22:23] <bascule> adu: the IDNA problem goes away if you only allow "*."
[03:22:38] <bascule> 		+    assert_equal(false, OpenSSL::SSL.verify_wildcard("xn--qdk4b9b", "x*"))
[03:22:41] <bascule> +    assert_equal(false, OpenSSL::SSL.verify_wildcard("xn--qdk4b9b", "*--qdk4b9b"))
[03:22:44] <bascule> +    assert_equal(true,  OpenSSL::SSL.verify_wildcard("xn--qdk4b9b", "xn--qdk4b9b"))
[03:23:09] * adu does not understand
[03:23:15] <bascule> hmm, that seems to actually be missing the test for the important behavior
[03:23:16] <bascule> lol
[03:23:18] <bascule> Rubby!
[03:23:20] <bascule> anyway
[03:23:26] <bascule> uhh
[03:23:31] <bascule> *. should match IDNA names
[03:23:48] <adu> are you talking about wildcard certificates?
[03:23:55] <bascule> yes
[03:24:13] <adu> my company has been trying to get one of those
[03:24:15] <bascule> this is about hostname verification for X.509 certificates
[03:26:08] * adu does not understand the appeal of paying lots of money to a handful of companies and filling out volumes of application forms to make the hostname turn green in Firefox
[03:28:36] * adu made a self-signed cert in less than a minute and 40 key strokes, and the red hostname does not bother me
[03:33:16] <frewsxcv> because that makes phishing easier. and phishing is bad.
[03:41:34] <frewsxcv> relevant issue https://github.com/hyperium/hyper/issues/472
[04:28:29] *** Quits: atomic (atomic@moz-hqmkvu.mit.edu) (Ping timeout: 121 seconds)
[04:36:52] *** Joins: atomic (atomic@moz-vjb.r8r.42.192.IP)
[04:41:24] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[04:46:00] <Ilari> If one wants real fun with DNS internationalization, there's gatewayed DNS-SD zones... Space is not the worst thing one can encounter in there...
[04:47:52] <Tobba> internationalization is fun
[04:47:59] <Tobba> there are a few TLDs that don't verify anything properly
[04:48:45] <Tobba> I've seen .la domains with emojis, but I
[04:48:53] <Tobba> I'm sure they'd allow all kinds of crazy shit
[04:49:09] <mcpherrin> emojis seem fairly harmless as i18n domains go
[04:49:43] <Tobba> I'd suspect allowing them is a side effect about not caring about the blacklist
[04:49:51] <mcpherrin> But I'm sure some phishers will find novel ways to use them
[04:50:48] <Tobba> güëÄgle
[04:51:38] <Tobba> bank‚öΩÔ∏èfamerica
[04:51:44] <Tobba> I'm sure if you use a shitty enough font this looks just right
[04:54:54] *** Quits: atomic (atomic@moz-vjb.r8r.42.192.IP) (Ping timeout: 121 seconds)
[04:55:23] <Ilari> The most terrifying character in DNS-SD names is... '.'.
[04:55:43] <Tobba> oh dear.
[04:55:57] <Tobba> is that a dot or a variation of the dot
[04:57:02] <mcpherrin> it appears to be the same byte I get when I hit . on my keyboard, (0x2E)
[04:57:18] <Tobba> hm
[04:57:23] <Tobba> I'm sure unicode has multiple dots
[04:58:25] <Ilari> It is the 0x2E one.
[04:58:58] <bascule> $ od -c dawtz
[04:58:59] <bascule> 0000000    .  \n   .  \n
[04:58:59] <bascule> 0000004
[04:59:03] <bascule> that's not very helpful!
[04:59:07] <cmr> lol
[04:59:30] <cmr> Sure it is; you know it's the ASCII . :)
[05:02:03] *** Quits: gsingh93 (gulshan@moz-3fu4am.mi.comcast.net) (Ping timeout: 121 seconds)
[05:02:03] <bascule> but uhh yeah
[05:02:05] <bascule> 0000000    005056  005056
[05:02:05] <Ilari> I guess one could use master file notation backslash-escaping . and \
[05:02:23] <bascule> Ilari: if I copypasta that character out of my irssi, I get the same thing as when I hit .
[05:02:51] <Ilari> bascule: Because it is the same codepoint.
[05:03:09] <bascule> are you talking about encoding "." as punycode?
[05:03:14] <Ilari> bascule: UTF-8.
[05:03:22] <bascule> I'm confused
[05:03:25] <cmr> so am I
[05:03:35] <Ilari> DNS-SD uses UTF-8.
[05:03:55] <Ilari> ... On the wire.
[05:04:18] <bascule> so this is why I try to build all my crypto-APIs around, say, Vec<u8> but continue...
[05:04:59] <Tobba> Ilari: that can't possibly be a good idea
[05:05:25] <bascule> speaking of that
[05:05:34] <Tobba> I think I'm stating the obvious here, hm
[05:05:36] <Ilari> Tobba: DNS itself has labels be 8-bit clean.
[05:05:52] <bascule> https://github.com/cryptosphere/rust-macaroons/blob/master/src/token.rs#L99
[05:05:56] <bascule> ^^^ how do I not do that?
[05:06:20] <bascule> I'm trying to take a hexadecimal value and turn it into an i16
[05:06:27] <Tobba> Ilari: not just that, but the same character can be encoded differently than it should be
[05:06:40] <Tobba> I'm imagining this is gonna break some crappier implementations pretty hard somehow
[05:06:45] <bascule> and I couldn't figure out how to do that without involving UTF-8
[05:06:50] <bascule> but, for obvious reasons, I'd really rather not
[05:06:53] <cmr> bascule: what's a "hexadecimal value"?
[05:07:23] <bascule> cmr: I want to use from_str_radix to parse 4 bytes which represent a length prefix serialized as hex
[05:07:45] <Tobba> bascule: if its equal or above 65, subtract 55, otherwise subtract 48?
[05:07:52] <Tobba> (then multiply by the appropriate power of 16)
[05:07:53] <bascule> haha Tobba 
[05:07:53] <bascule> sure
[05:07:57] <bascule> I can write my own thing
[05:08:42] *** Joins: atomic (atomic@moz-ums8mr.tor-exit.network)
[05:08:43] <bascule> std::str::from_ascii or something to that effect would be nice though
[05:09:34] <cmr> I'm not sure what the obvious reasons are, tbh.
[05:09:55] <bascule> reasons for what?
[05:10:00] <cmr> I guess it will do a bit more work than from_ascii if it's invalid.
[05:10:10] <cmr> for avoiding the utf8 decode
[05:10:58] <bascule> in security-critical contexts, it's just nice to not have to, say, loop in unicode to parse a 4-byte hexadecimal length prefix
[05:11:17] <bascule> there's kind of a general philosophy around that stuff: http://langsec.org/
[05:32:11] <bascule> cmr: RFC 6125 is another place where dealing in pure-ASCII would be nice
[05:38:57] <cmr> Yeah.
[05:39:09] <cmr> There used to be a std::ascii or something that was pretty nice to work with...
[05:41:19] <bascule> cmr: if I were to write an RFC 6125 crate in Rust today, I'd probably just deal in pure Vec<u8>s *shrug*
[05:58:29] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[06:04:46] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[06:06:40] *** Quits: adu (ajr@moz-0foa9t.md.comcast.net) (Client exited)
[06:50:23] *** Quits: Asandari (Asandari@moz-emp96u.cable.teksavvy.com) (Ping timeout: 121 seconds)
[06:50:53] *** Joins: Asandari (Asandari@moz-emp96u.cable.teksavvy.com)
[07:11:35] *** Joins: Tobba|Laptop (Tobba@moz-1hh.7ki.21.217.IP)
[07:53:36] *** Quits: Tobba|Laptop (Tobba@moz-1hh.7ki.21.217.IP) (Connection closed)
[08:11:44] *** Joins: Tobba|Laptop (Tobba@moz-1hh.7ki.21.217.IP)
[08:12:01] *** Quits: Tobba|Laptop (Tobba@moz-1hh.7ki.21.217.IP) (Connection closed)
[08:24:01] *** Joins: Tobba|Laptop (Tobba@moz-1hh.7ki.21.217.IP)
[08:56:02] *** Quits: Tobba|Laptop (Tobba@moz-1hh.7ki.21.217.IP) (Connection closed)
[12:05:42] *** Joins: Riastradh (riastradh@moz-ib8bp9.us.unmetered.com)
[12:12:08] *** Quits: Riastradh (riastradh@moz-ib8bp9.us.unmetered.com) (Ping timeout: 121 seconds)
[12:55:44] *** Joins: Riastradh (riastradh@moz-kvs6fc.torservers.net)
[13:08:06] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[14:34:30] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[14:55:02] *** Quits: Riastradh (riastradh@moz-kvs6fc.torservers.net) (Ping timeout: 121 seconds)
[15:22:21] *** Joins: gsingh93 (gulshan@moz-5pm.d6o.112.76.IP)
[15:23:42] *** Quits: gsingh93 (gulshan@moz-5pm.d6o.112.76.IP) (Quit: WeeChat 1.1.1)
[15:23:50] *** Joins: gsingh93 (gulshan@moz-5pm.d6o.112.76.IP)
[15:32:30] *** Quits: randati (antti@moz-mr7m5u.763s.ieq4.0708.2001.IP) (Ping timeout: 121 seconds)
[15:33:32] *** Joins: randati (antti@moz-09o5q7.763s.ieq4.0708.2001.IP)
[15:47:31] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[15:53:59] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[15:55:29] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[15:56:35] *** Joins: Tuba (Tobba@moz-o13d22.bredband.telia.com)
[15:56:58] *** Joins: Tobba_ (Tobba@moz-o13d22.bredband.telia.com)
[15:59:59] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[16:00:03] *** Tobba_ is now known as Tobba
[16:00:37] *** Quits: Tuba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[16:28:49] *** Quits: gsingh93 (gulshan@moz-5pm.d6o.112.76.IP) (Ping timeout: 121 seconds)
[16:53:42] *** Joins: brson (brson@moz-cfhap5.mtv2.mozilla.com)
[17:05:00] *** Joins: gsingh93 (gulshan@moz-3fu4am.mi.comcast.net)
[17:38:24] *** Joins: Riastradh (riastradh@moz-md1mas.ipredator.se)
[17:54:00] *** Quits: gsingh93 (gulshan@moz-3fu4am.mi.comcast.net) (Ping timeout: 121 seconds)
[18:07:47] *** Joins: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net)
[18:52:37] <Ilari> bascule: Regarding :vomit:, it apparently isn't a valid emoji (nor has it unicode codepoint). :->
[20:18:48] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Quit: leaving)
[20:27:50] <bascule> lol
[20:27:53] <bascule> Ilari: :fu: !#$!#
[20:28:16] <bascule> U+1F595
[20:44:24] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[21:32:37] *** Quits: Riastradh (riastradh@moz-md1mas.ipredator.se) (Ping timeout: 121 seconds)
[22:00:17] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[22:28:02] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[22:41:32] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[22:52:47] *** Quits: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net) (Ping timeout: 121 seconds)
[23:27:25] *** Joins: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net)
