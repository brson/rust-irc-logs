[00:27:41] *** Quits: brson (brson@moz-f3o.2li.56.172.IP) (Ping timeout: 121 seconds)
[00:56:48] *** Joins: blank_name (blank_name@moz-9fb.kec.183.192.IP)
[00:58:17] *** Joins: aatch (james@moz-is4j4r.cable.telstraclear.net)
[00:59:44] *** Joins: ChrisMorgan (ChrisMorgan@moz-g6osuq.tpgi.com.au)
[01:03:43] *** Quits: blank_name (blank_name@moz-9fb.kec.183.192.IP) (Ping timeout: 121 seconds)
[01:04:41] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Connection closed)
[01:05:46] *** Joins: blank_name (blank_name@moz-892.rni.183.192.IP)
[01:05:53] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[01:08:27] *** Joins: annodomini (lambda@moz-0bk.v8v.197.166.IP)
[01:11:39] *** Quits: blank_name (blank_name@moz-892.rni.183.192.IP) (Ping timeout: 121 seconds)
[01:19:02] *** Joins: blank_name (blank_name@moz-n1vb3k.mi.frontiernet.net)
[01:25:18] *** Quits: ryanhiebert (ryanhiebert@moz-nsd5kl.ks.cox.net) (Connection closed)
[01:25:21] *** Joins: ryanhiebert (ryanhiebert@moz-nsd5kl.ks.cox.net)
[01:27:43] *** Quits: annodomini (lambda@moz-0bk.v8v.197.166.IP) (Client exited)
[01:47:27] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[01:52:57] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[02:03:02] *** Joins: blank_na1e (blank_name@moz-e01vhh.mi.frontiernet.net)
[02:05:34] *** Quits: blank_name (blank_name@moz-n1vb3k.mi.frontiernet.net) (Ping timeout: 121 seconds)
[02:08:51] *** Quits: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se) (Ping timeout: 121 seconds)
[02:17:20] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[02:17:23] *** Joins: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se)
[02:25:06] *** Joins: p1start (p1start@moz-nftjhe.org)
[02:59:50] *** Quits: zz_kimundi (kimundi@moz-l6kkds.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[03:02:04] *** Joins: zz_kimundi (kimundi@moz-q41ugj.dip0.t-ipconnect.de)
[03:02:06] *** zz_kimundi is now known as kimundi
[03:16:08] *** Joins: annodomini (lambda@moz-0bk.v8v.197.166.IP)
[03:59:40] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[04:16:51] *** Quits: annodomini (lambda@moz-0bk.v8v.197.166.IP) (Client exited)
[05:26:52] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[05:44:49] *** Joins: barosl (barosl@moz-tmp.qma.67.220.IP)
[08:06:02] *** Joins: Rym_ (y@moz-c2u.sd4.38.217.IP)
[08:06:13] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Connection closed)
[08:16:48] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[08:18:59] *** Joins: p1start (p1start@moz-nftjhe.org)
[08:46:10] *** kimundi is now known as zz_kimundi
[09:00:07] *** Joins: proc (proc@moz-m4bmmk.dip0.t-ipconnect.de)
[09:27:22] *** zz_kimundi is now known as kimundi
[09:38:26] *** kimundi is now known as zz_kimundi
[11:19:45] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[11:40:02] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[11:40:03] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[11:40:24] *** Quits: Rym_ (y@moz-c2u.sd4.38.217.IP) (Connection closed)
[12:26:10] *** Quits: aatch (james@moz-is4j4r.cable.telstraclear.net) (Ping timeout: 121 seconds)
[12:27:43] <bluss> Gankro: everything is so beautiful with ArrayVec *_*
[12:27:47] <bluss> Gankro: lookit https://github.com/bluss/bmap/blob/master/src/bmap.rs#L45-L64
[13:17:01] *** zz_kimundi is now known as kimundi
[13:49:04] *** Joins: killercup (killercup@moz-qj5qhi.dip0.t-ipconnect.de)
[14:11:01] *** Quits: ryanhiebert (ryanhiebert@moz-nsd5kl.ks.cox.net) (Connection closed)
[14:11:23] *** Joins: ryanhiebert (ryanhiebert@moz-nsd5kl.ks.cox.net)
[14:14:29] *** Quits: burntsushi (burntsushi@moz-t92kn9.ma.charter.com) (Quit: Konversation terminated!)
[14:15:25] *** Quits: ryanhiebert (ryanhiebert@moz-nsd5kl.ks.cox.net) (Ping timeout: 121 seconds)
[14:24:51] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[14:26:36] *** Joins: burntsushi (burntsushi@moz-t92kn9.ma.charter.com)
[14:35:01] *** Joins: killercu_ (killercup@moz-qj5qhi.dip0.t-ipconnect.de)
[14:36:04] *** Quits: killercu_ (killercup@moz-qj5qhi.dip0.t-ipconnect.de) (Quit: Bye)
[14:37:46] *** Quits: killercup (killercup@moz-qj5qhi.dip0.t-ipconnect.de) (Ping timeout: 121 seconds)
[15:02:18] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[15:06:30] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[15:14:42] *** Quits: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua) (Ping timeout: 121 seconds)
[15:45:25] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[15:49:39] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[16:18:29] <Gankro> bluss: Yeah if you roll back to BTreeMap 1.0 it was basically that
[16:19:05] <Gankro> Err, I guess we didn't have drain
[16:20:00] <bluss> Gankro: this version inserts faster than the libcollections. Probably all because of statically known B
[16:20:32] <Gankro> Interesting. Const B had no gains when I did it
[16:22:49] <Gankro> bluss: https://github.com/rust-lang/rust/pull/22189
[16:24:04] <bluss> I recongnize that now
[16:24:23] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[16:24:59] <bluss> this experiment can only do insertion and search
[16:25:07] <bluss> it benches like this: https://gist.github.com/anonymous/2d75da773d91acf993d9
[16:25:51] <bluss> probably no matter. I'm doing this because it's using fixed size array backing and I wanted to do that since before we had a real btree
[16:26:02] <bluss> and now I got the array tools to do it suddenly so I had to try
[16:26:12] <Gankro> Are you using parent pointers in your design?
[16:26:24] <Gankro> Wait what, we can use fixed sized arays now?!
[16:26:26] <bluss> no
[16:26:55] <bluss> Gankro: when someone invented how to inhibit drop on the fixed size arrays you own :)
[16:26:58] <bluss> not me I think
[16:27:07] <Gankro> My understanding is that Google's btree uses parent pointers and they're the fastest game in town
[16:27:31] <bluss> yes I think it's neeed for fast iteration
[16:27:35] <Gankro> No allocation for search stacks in iterators or insert/delete
[16:27:39] <bluss> first I wanted to make this threaded
[16:27:44] <bluss> but parent pointers is saner
[16:27:50] <bluss> I should try that!
[16:27:57] <Gankro> Awesome!
[16:28:15] <bluss> !crate arrayvec
[16:28:16] <rustbot> arrayvec (0.3.3) - A vector with a fixed capacity, it can be stored on the stack too. -> https://crates.io/crates/arrayvec
[16:28:24] <bluss> I put the fixed size array magic there ^
[16:28:39] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[16:30:05] <Gankro> Only downside is len is tracked redundantly :/
[16:30:30] <bluss> yes
[16:30:39] <bluss> and some drop flags too
[16:30:59] <bluss> but those will expire by themselves, I have high hopes for that
[16:32:44] <Gankro> Might lose them in 1.3
[16:34:34] *** Quits: barosl (barosl@moz-tmp.qma.67.220.IP) (Quit: Leaving)
[16:37:41] *** Joins: barosl (barosl@moz-tmp.qma.67.220.IP)
[16:40:15] *** kimundi is now known as zz_kimundi
[16:48:06] *** Quits: blank_na1e (blank_name@moz-e01vhh.mi.frontiernet.net) (Ping timeout: 121 seconds)
[16:50:58] *** Quits: acrichto (acrichto@moz-u3dg2t.sfo1.mozilla.com) (Ping timeout: 121 seconds)
[17:02:50] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[17:03:49] *** zz_kimundi is now known as kimundi
[17:06:55] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Ping timeout: 121 seconds)
[17:07:37] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[17:10:48] <bluss> Gankro: why doesn't the libcollections btree use parent pointers?
[17:11:34] <Gankro> bluss: Didn't know it was A Thing
[17:11:52] <Gankro> I was working off my academic background which says parent pointers are bad
[17:12:25] <bluss> aha hehe
[17:12:35] <bluss> I'm looking at a prior impl I had in C
[17:13:03] <bluss> and it uses parent pointers as well, so I just try to follow that now
[17:14:45] <bluss> Gankro: I suspected it was for fear of pervasive raw pointers
[17:15:00] <bluss> which is reasonable but maybe not pragmatic enough
[17:45:13] <bluss> Gankro: iteration with parent pointers. https://gist.github.com/anonymous/1051484c4575252ecfa8   looks like it's algorithmically worse for lots of keys (?) my up and down traversal might be made smarter
[17:45:18] <bluss> there's a lot to win ^
[17:46:22] <Gankro> btree is really bad at "stateful" iteration anyway
[17:47:03] <bluss> absolutely
[17:50:25] <Gankro> It would be interesting to try a version of BTreeMap that caches the search stack in the BTreeMap struct
[17:50:35] <Gankro> So it only gets allocated once
[18:39:36] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[19:12:29] *** Joins: blank_name (blank_name@moz-d5sbf3.mi.frontiernet.net)
[19:27:07] *** Joins: killercup (killercup@moz-qj5qhi.dip0.t-ipconnect.de)
[19:43:04] *** Quits: Rym (y@moz-c2u.sd4.38.217.IP) (Connection closed)
[19:44:16] *** Joins: acrichto (acrichto@moz-u3dg2t.sfo1.mozilla.com)
[19:44:16] *** ChanServ sets mode: +qo acrichto acrichto
[19:44:25] *** Joins: Rym (y@moz-c2u.sd4.38.217.IP)
[19:59:16] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Connection closed)
[20:00:23] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[20:35:09] *** Joins: simukis (nagisa@moz-8t068g.static.zebra.lt)
[20:35:51] *** Joins: p1start (p1start@moz-nftjhe.org)
[20:57:11] *** kimundi is now known as zz_kimundi
[21:47:30] *** Quits: killercup (killercup@moz-qj5qhi.dip0.t-ipconnect.de) (Quit: Bye)
[21:50:52] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[21:51:55] *** Joins: p1start (p1start@moz-nftjhe.org)
[21:54:26] *** zz_kimundi is now known as kimundi
[22:49:48] *** Quits: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua) (Ping timeout: 121 seconds)
[23:08:49] *** kimundi is now known as zz_kimundi
[23:13:04] *** Quits: proc (proc@moz-m4bmmk.dip0.t-ipconnect.de) (Quit: Gotta eat my pizza)
[23:24:38] *** Joins: brson (brson@moz-r1h.uhc.47.96.IP)
[23:24:38] *** ChanServ sets mode: +qo brson brson
[23:30:35] *** Quits: brson (brson@moz-r1h.uhc.47.96.IP) (Ping timeout: 121 seconds)
