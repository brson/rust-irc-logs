[00:00:00] *** Quits: brendan (brendaneic@2557E599.66715431.D25A875A.IP) (Quit: brendan)
[00:00:07] <strcat> aatch: well that has jemalloc support
[00:00:21] <flu_> rusti: Some(2i).while_some(|x| { match x { 0 => None, val => Some(val - 1) } })
[00:00:22] -rusti- ()
[00:00:22] <strcat> aatch: https://blog.mozilla.org/jseward/2012/06/05/valgrind-now-supports-jemalloc-builds-directly/
[00:00:42] <aatch> well I get a tonne of use of uninit values
[00:01:31] <strcat> aatch: jmp based on uninit?
[00:01:40] <strcat> those are unrelated to jemalloc
[00:01:43] <aatch> strcat, nope, just a use of.
[00:02:57] <flu_> rusti: Some(1).add(None)
[00:02:59] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/DEjQ
[00:03:01] *** Joins: cpeterson (cpeterson@moz-BE33DA21.fw1.sfo1.mozilla.net)
[00:03:11] <flu_> rusti: Some(1).add(&None)
[00:03:12] -rusti- Some(1)
[00:05:38] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[00:06:27] <flu_> seems like Result<T, U> could implement ExtendedIter<T> - or would that be weird to completely ignore the error types?
[00:06:41] <strcat> ExtendedIter is deprecated
[00:06:44] <aatch> Ok, so lets see if adding the --enable-tls to the configure flags help.
[00:06:48] <flu_> what's the new hotness?
[00:06:56] <strcat> std::iterator
[00:07:11] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[00:07:49] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[00:08:44] *** Quits: \n (NDesaulnie@2557E599.66715431.D25A875A.IP) (Quit: \n)
[00:09:50] <flu_> nice. loving IteratorUtil<A> 
[00:09:54] *** Joins: mreedell (mreedell@moz-9950CA28.hsd1.pa.comcast.net)
[00:09:55] <brson> is there a problem with valgrind + jemalloc?
[00:10:01] <strcat> brson: shouldn't be
[00:10:03] <strcat> bots look fine
[00:10:17] <brson> incoming is broken, bots don't look  fine
[00:10:19] <strcat> valgrind explicitly supports jemalloc
[00:10:25] <strcat> brson: well it doesn't look broken from that
[00:10:37] *** Quits: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net) (Client exited)
[00:10:47] <aatch> brson, I'm trying to get incoming green, but I can't reproduce that error.
[00:10:54] <brson> aatch: it's i686
[00:11:08] <aatch> brson, but isn't it cross-compiled?
[00:11:25] <aatch> so it's still running on x86, just as i686?
[00:11:28] <brson> aatch: it is, but cross-compile isn't necessary to reproduce it (if we're thinking of the same error)
[00:11:35] <brson> aatch: that's right
[00:11:46] <aatch> I ran the same command it did.
[00:11:49] <brson> ../configure --build-triple=i686-unknown-linux-gnu will reproduce it without a cross-compile
[00:11:51] <Jesse> ooh can we use ~ for unique pointers and â‰ˆ for gc pointers?
[00:12:01] *** Joins: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net)
[00:12:03] <brson> aatch: the some configure?
[00:12:09] <aatch> brson, yep
[00:12:46] <aatch> well, -build-triple=x86_64-unknown-linux-gnu,i686-unknown-linux-gnu
[00:13:13] <aatch> I'm wondering if it is related to valgrind though.
[00:13:22] <brson> --build-triple doesn't take two triples, maybe you mean --host-triple?
[00:13:30] <brson> --host-triples
[00:13:36] <aatch> brson, possibly.
[00:13:42] <aatch> I'll double check.
[00:14:37] <aatch> and, apparently no, I didn't have the build triple...
[00:15:36] <Jesse> is there a way to annotate a resource type (such as a file handle) with "if you put this in a GC box you're going to have a bad time"?
[00:15:36] *** Quits: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: ChatZilla 0.9.90-rdmsoft [XULRunner 18.0.2/20130201065344])
[00:16:07] <aatch> Jesse, why would that happen?
[00:16:17] <bblum> graydon: in bug triage, what do i do with bugs that are way over my head where there's just nothing for me to do?
[00:16:43] <bblum> like, to note that i looked at it and decided i had nothing to contribute
[00:16:51] <graydon> can you reproduce it?
[00:17:15] <Jesse> aatch: not being able to predict when it will go away
[00:17:21] <graydon> is it classified and filled-in properly? (tags, title, testcase)
[00:17:27] <strcat> Jesse: can't predict that about *anything* in @
[00:17:32] <aatch> Jesse, why wouldn't you be able to predict that?
[00:17:34] *** Quits: EXetoC (ex@moz-2DBEB1E4.customer.t3.se) (Quit: WeeChat 0.4.1)
[00:17:41] <strcat> except that it goes away at the end of the task
[00:17:52] <bblum> graydon: they're not the type of bug for which reproduction is useful (type system discussion and/or "wish you could do this"); they are classified fine
[00:17:55] <aatch> (I assume you mean that the underlying resource might dies suddenly)
[00:18:11] <graydon> do you think it is a potential candidate for one of the maturity-level milestones? https://github.com/mozilla/rust/issues/milestones
[00:18:12] <strcat> let x: @Option<File>; ...; *x = None /* deterministic destruction */
[00:18:13] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[00:18:34] <dbaupp> strcat: that requires @mut, right?
[00:18:39] <strcat> yes
[00:18:48] <bblum> graydon: some are already classified as such; some are not candidates
[00:19:33] <bblum> i mean, i looked over the checklist provided in the email, and none of the suggested actions were applicable
[00:19:36] <strcat> meh I can't understand this type inference bug
[00:19:38] <strcat> workaround it is
[00:19:45] <Jesse> strcat: that's almost legit and i almost want a dynamic warning when the GC cleans it up for me
[00:19:50] <graydon> bblum: well, if they're still legitimate bugs and you have nothing to add or change, just note that and the date it was revisited (so that it is marked as having-been-commented-on and drops to the bottom of the time-sorted list of stuff to review in next week's random triage)
[00:20:07] *** Joins: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net)
[00:20:18] <bblum> ah, so i should leave a comment being like "revisited today"
[00:20:20] <strcat> Jesse: well I don't know why you would be using gc if that was important
[00:20:30] *** Quits: MaikKlein (maik@moz-C3CB0EB4.dip0.t-ipconnect.de) (Ping timeout)
[00:20:34] <graydon> bblum: see if there are dupes to merge them with; if they're vague, maybe suggest merging or dropping as out-of-scope
[00:20:47] <strcat> if you need deterministic resource cleanup and the task lifetime isn't enough, you don't want @
[00:20:49] <Jesse> strcat: hence my initial suggestion of having a warning when you put such a type in a GC box
[00:20:51] <graydon> if they're pure wishlist, classify as such (+/- milestone "far future")
[00:20:56] <strcat> Jesse: what about memory?
[00:21:06] <strcat> that's not an unlimited resource either
[00:21:28] <Jesse> well, at least the GC understands memory pressure
[00:21:37] <strcat> I don't think it does
[00:21:46] <strcat> s/does/will/
[00:22:01] <strcat> memory pressure can't be handled very portably
[00:22:22] <strcat> afaik the only way to deal with system-wide memory pressure are linux specific apis, I doubt they exist elsewhere
[00:22:59] <strcat> and they are very sketchy
[00:23:39] <Jesse> well, if not memory pressure, then at least memory use
[00:24:38] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[00:24:38] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/FtqaYg
[00:24:38] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[00:24:49] <strcat> Jesse: a gc can't really do much with that
[00:25:03] <strcat> do you want it to run more frequent gc cycles as it uses more memory?
[00:27:01] *** Quits: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net) (Quit: Computer has gone to sleep.)
[00:27:07] *** Joins: k00mi (koomi@moz-202752AD.pools.arcor-ip.net)
[00:27:22] <Jesse> well, if the alternative is running more frequent gc cycles just because your program continued running...
[00:27:43] *** Quits: koomi (koomi@moz-56053A3B.pools.arcor-ip.net) (Ping timeout)
[00:28:31] <Luqman> bblum: i very much support a quick resolution of #7048
[00:29:31] <bblum> Luqman: :3
[00:29:32] <strcat> kimundi: FromIter hits really weird type inference issues...
[00:29:33] *** Joins: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net)
[00:29:56] <strcat> probably best to rewrite iterator.rs to just not use the iter.rs ones ;\
[00:30:09] <strcat> anyway that will be faster
[00:30:54] <dbaupp> strcat: yeah, I found that you had to put an explicit type annotation for .collect()
[00:31:08] <strcat> even when it should infer
[00:31:24] *** Quits: jeff (jeff@moz-E636CFF5.nycmny.east.verizon.net) (Quit: jeff)
[00:31:46] <dbaupp> yes
[00:31:59] <aatch> bblum, that is incredibly amusing.
[00:32:19] <bblum> aatch: i don't know why it doesn't work :<
[00:32:34] <dbaupp> strcat: it only worked if it was (e.g.) returned from a function with an appropriate annotation
[00:32:44] <dymk> so, now that there isn't extern mod, what's used for FFI stuff? 
[00:32:50] <Eridius> extern { }
[00:32:56] <pcwalton> dymk: extern { ... }
[00:33:08] <aatch> bblum, we should probably overhaul the character handling in tokenizer
[00:33:23] <aatch> apparently what we have isn't ideal for programming anyway.
[00:33:32] <bblum> "isn't ideal for programming"?
[00:34:35] <aatch> bblum, as in the character sets a too narrow
[00:34:43] <aatch> it's a small thing
[00:34:54] <aatch> hence why nothing has happened.
[00:35:02] <aatch> there's an issue open somewhere about it
[00:35:17] *** Joins: brendan (brendaneic@moz-423245E1.sub-70-197-15.myvzw.com)
[00:35:31] <dbaupp> aatch, bblum: https://github.com/mozilla/rust/issues/6181 probably fits into that
[00:36:18] <bblum> different error messages; possibly related anyway
[00:36:41] *** Quits: dymk (dymk@moz-2490795B.client.dyn.strong-sf34.as22781.net) (Ping timeout)
[00:37:28] <strcat> dbaupp: I'm going to end up renaming all of the IteratorUtil methods to foo_ anyway
[00:37:31] <strcat> from all these conflicts ;\
[00:37:38] <dbaupp> strcat: :(
[00:37:50] <dbaupp> strcat: what about renaming the other methods?
[00:37:57] *** Joins: devbug (quassel@moz-E1DE087C.bchsia.telus.net)
[00:38:02] <strcat> too many
[00:38:10] <dbaupp> oh :(
[00:38:11] <strcat> dbaupp: http://ix.io/66B plenty of other things to fix too ;p
[00:38:44] *** Quits: hjr3 (hradtke@moz-E8F2FF56.public.wayport.net) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[00:39:02] <dbaupp> strcat: well, most of them look like .each just needs to be rewritten...
[00:39:06] <strcat> yep
[00:39:13] *** Joins: \n (NDesaulnie@moz-C2B49FFE.hsd1.ca.comcast.net)
[00:39:20] <strcat> simple enough
[00:39:29] <strcat> the method resolve thing makes me sad though ;p
[00:40:58] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Textual IRC Client: www.textualapp.com)
[00:42:24] <bblum> anybody here good with nonsequential memory semantics?
[00:42:57] <bblum> i wish to know whether, with an atomic write followed by a nonatomic write, the latter write can show up before the former
[00:43:03] <bblum> (on another core)
[00:43:06] *** Joins: steven_is_false (user@moz-144077DE.bchsia.telus.net)
[00:43:23] <Ralith> what kind of atomic write?
[00:43:35] *** Quits: graydon (graydon@3853DDD.39EEDBB3.D758B1AA.IP) (Quit: Leaving.)
[00:43:38] *** Joins: dymk (dymk@moz-2490795B.client.dyn.strong-sf34.as22781.net)
[00:45:07] <dbaupp> does someone feel like looking at https://github.com/mozilla/rust/pull/7027? (it's steven_is_false 's)
[00:45:30] <brson> nmatsakis: https://github.com/mozilla/rust/issues/7049
[00:46:23] <bblum> Ralith: xchg? xadd? cmpxchg?
[00:47:00] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[00:47:15] <flu_> excellent choice of symbols for the failure example in #6181
[00:47:31] <dbaupp> flu_: :D
[00:48:07] <flu_> important for when we are all using the aforementioned lisp machine keyboards. heheh
[00:48:50] *** Quits: alisdair (textual@moz-EA60A466.dedicated.allstream.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[00:49:11] <flu_> does bors ever re-test a PR after a test fails against it? or is that something that is manually triggered?
[00:49:23] <dbaupp> manually triggered
[00:49:38] <flu_> hmm. I'll have to watch for the CI to get fixed :-/
[00:50:50] <flu_> i.e., PR #6713
[00:51:02] <dbaupp> strcat: http://huonw.github.io/isrustfastyet/#1310212
[00:51:31] <dbaupp> strcat: unsurprisingly things got (slightly) faster!
[00:54:30] *** Joins: bnicholson (bnicholson@moz-E98974C1.hsd1.ca.comcast.net)
[00:55:58] *** Quits: jrfeenst (jrfeenst@moz-F912484F.cpe.norwoodlight.com) (Quit: jrfeenst)
[00:57:46] *** Joins: qmx (qmx@158DBDE0.B4C46C69.F6297865.IP)
[00:58:24] <toddaaro> http://www.cs.ucf.edu/~dcm/Teaching/COT4810-Spring2011/Literature/SplitOrderedLists.pdf
[00:58:33] <bblum> aatch: in unstable::atomics, what if i want to do an operation but require no ordering guarantees?
[00:58:33] <toddaaro> that is the lock-free hashmap algorithm I'm a bit familiar with
[00:58:48] <aatch> bblum, you cannot at the moment.
[00:59:00] <aatch> simply because the compiler intrinsics don't exist yet
[00:59:06] <bblum> i see
[00:59:24] <bblum> do things like AtomicBool::store compile to simple mov instructions on x86?
[00:59:41] <pcwalton> bblum: I think so, but they inhibit compiler reorderings.
[00:59:41] <aatch> bblum, I think so.
[00:59:51] <bblum> pcwalton: oh good
[01:00:06] <aatch> it's the memory consistency that gets you, actually
[01:01:13] <bblum> hm?
[01:01:18] *** Quits: seth (seth@2557E599.66715431.D25A875A.IP) (Input/output error)
[01:01:28] *** Joins: bnicholson_ (bnicholson@moz-E98974C1.hsd1.ca.comcast.net)
[01:02:09] <aatch> Well the ordering constraints affect when and how other threads will see any changes to shared memory.
[01:02:32] *** bnicholson_ is now known as identify
[01:02:40] *** identify is now known as bnicholson_
[01:02:41] <bblum> yeah, i know
[01:02:55] <bblum> i mean, what do you mean by "gets you"?
[01:03:03] <aatch> bblum, but that is normally the slow down
[01:03:18] *** Quits: reyre_ (reyre@moz-9002CDDA.cpe.net.cable.rogers.com) (Client exited)
[01:03:23] *** Joins: jrfeenst (jrfeenst@moz-F912484F.cpe.norwoodlight.com)
[01:03:35] <aatch> as in performance wise, the consistency guarentees are what "gets" you.
[01:03:40] <bblum> oh, right
[01:03:58] <aatch> sorry, not as clear as I should have been.
[01:04:09] <bblum> x86 will do cache coherence anyway even if you don't have an atomic op, yes
[01:04:41] <bblum> btw, i always wondered, if you have a situation which will make x86 do that dance, do you actually lose any additional performance if you use a superfluous atomic op there?
[01:04:41] *** Joins: seth (seth@2557E599.66715431.D25A875A.IP)
[01:05:27] *** Quits: seth (seth@2557E599.66715431.D25A875A.IP) (Input/output error)
[01:05:48] *** Parts: ecr (ereed@2557E599.66715431.D25A875A.IP) ()
[01:06:09] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[01:06:18] *** bnicholson is now known as IRCMonkey6656
[01:06:23] *** Quits: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net) (Client exited)
[01:06:54] *** bnicholson_ is now known as bnicholson
[01:07:53] *** Joins: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net)
[01:08:00] <aatch> bblum, I don't know enough about the architecture to be sure. But on x86 it might be the ordering at the processing level.
[01:08:32] <aatch> so while it would normally do out-of-order execution it can't because of the atomic op.
[01:08:51] <strcat> dbaupp: great, now 200 borrowck errors from rvalues
[01:08:51] <aatch> I'm not an expert, so it might have some tricks that mean it can't
[01:08:54] <mark_edward> can you dictate the underlying type of C-style enum?
[01:08:57] <strcat> dbaupp: all need to be hoisted out
[01:09:09] <aatch> mark_edward, no
[01:09:13] <dbaupp> strcat: those are *really* annoying
[01:09:30] <strcat> yep I'm hitting 3-4 different bugs with this
[01:09:37] <mark_edward> :-( the default size on x64 being 64bit is irritating for C interop...
[01:09:43] <strcat> there are ~100 incorrect borrowck errors ;[
[01:09:48] <strcat> from each -> iter().advance
[01:11:39] *** Quits: bnicholson (bnicholson@moz-E98974C1.hsd1.ca.comcast.net) (Input/output error)
[01:11:39] *** Quits: IRCMonkey6656 (bnicholson@moz-E98974C1.hsd1.ca.comcast.net) (Input/output error)
[01:11:51] *** Joins: bnicholson (bnicholson@moz-E98974C1.hsd1.ca.comcast.net)
[01:12:37] *** Quits: eholk (eholk@moz-9AB4D52F.hsd1.ut.comcast.net) (Quit: eholk)
[01:12:58] *** Quits: true_droid (Adium@moz-123FD9B8.beck.volia.net) (Quit: Leaving.)
[01:13:01] <dbaupp> strcat: is there a bug about this?
[01:13:08] <strcat> I'll check after it's done
[01:13:25] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[01:13:45] <strcat> anyway it's far from a search and replace because of this bug.
[01:14:09] <strcat> for expr.each |x|
[01:14:11] <strcat> has to become
[01:14:14] <strcat> let r = expr;
[01:14:19] <strcat> for r.iter().advance {
[01:14:26] <strcat> I guess you could still hack it together
[01:14:43] <strcat> anyway borrowck doesn't work with temp values
[01:14:44] <pcwalton> btw, in case anyone is interested in the state of servo http://i.imgur.com/B468iaf.png
[01:15:07] <bblum> clicking on the links doesn't work at all, i bet :P
[01:15:12] <pcwalton> yes, it does
[01:15:17] <bblum> oh, nice
[01:15:24] <dbaupp> strcat: yes, I noticed that too :(
[01:17:47] *** Quits: eschweic (Adium@2557E599.66715431.D25A875A.IP) (Quit: Leaving.)
[01:18:43] <bblum> aatch: if i do a foo.load(Release); foo.store(true, Release);, will llvm emit two barriers?
[01:18:45] <bblum> or 1?
[01:19:27] <strcat> dbaupp: 15 more!
[01:20:23] *** Quits: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP) (Quit: eatkinson)
[01:20:46] <brson> aatch: make any more progress on the incoming bug?
[01:21:01] <strcat> nmatsakis: is it a known issue that borrowck doesn't understand chained temporaries?
[01:21:05] <aatch> bblum, not sure. it's complex because the barriers are based on synchronizing a memory location with certain semantics.
[01:21:16] <aatch> brson, nope. still can't repro
[01:21:23] <strcat> nmatsakis: xs.find(k).each |x| works but xs.find(k).iter().advance doesn't work
[01:21:28] <strcat> has to be hoisted out like
[01:21:34] <strcat> let r = xs.find(key)
[01:21:37] <strcat> r.iter().advance
[01:21:50] <aatch> and running the test under valgrind doesn't seem to make a difference.
[01:22:13] <brson> aatch: I think I'll try to minimize the incoming test case. it's going to be awful because it uses deriving(Decoder, Encoder) ...
[01:22:57] <strcat> nmatsakis: oh I guess this is just the good old rvalue issue.
[01:23:33] <bblum> brson: looking at strconv test_from_str_ignore_underscores... with the cross-compile you recommended; it seems to pass just fine
[01:23:44] <bblum> so i dunno what to do with https://github.com/mozilla/rust/issues/6018
[01:24:04] <bblum> (it also seems your #[ignore] directive never made it into the tree)
[01:24:56] <aatch> bblum, release isn't a valid ordering for a load
[01:24:57] <brson> bblum: sounds like this case is closed
[01:25:43] <strcat> borrowck workarounds in borrowck :)
[01:26:23] *** Quits: ion (ion@heh.fi) (Ping timeout)
[01:26:25] <bblum> strcat: who borrow checks the borrow checker
[01:26:29] <bblum> (answer: the snapshot compiler)
[01:26:43] <aatch> bblum, yup, I just fallback to seq_cst for unrecognised orderings.
[01:26:55] <bblum> (alternate answer: the metatheory proof we haven't written yet...)
[01:27:06] <bblum> aatch: hmm, well
[01:27:14] <strcat> bblum: the compiler is self-aware and has been adding unsoundness into itself over time
[01:27:17] <dbaupp> strcat: are you just doing Option, or all the vec.each's too?
[01:27:21] <strcat> dbaupp: option
[01:27:33] <aatch> which might not be the best idea. I have a feeling I did that because the Ordering enum had all the options.
[01:27:42] <bblum> strcat: straight outta 'reflections on trusting trust'
[01:27:43] <aatch> and then I decided against it.
[01:28:23] *** Joins: ion (ion@heh.fi)
[01:28:25] <strcat> dbaupp: 100 manual fixes of errors shown only after a compile are no fun
[01:28:47] *** Joins: eholk (eholk@moz-E45742D4.public.wayport.net)
[01:28:48] <dbaupp> bblum: 'reflections on trusting t[rust]'
[01:28:55] <dbaupp> strcat: yes :(
[01:29:09] <bblum> yes, reflections on trusting rust
[01:29:10] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[01:29:25] <bblum> we super need to write a paper called that
[01:29:35] <dbaupp> strcat: at least bors is fairly quite at the moment so there (hopefully) aren't too many merge conflicts
[01:29:37] * strcat still thinks we need to give bors commit access to himself
[01:30:01] <dbaupp> bblum: subtitle 'must trust rust'
[01:30:05] <bblum> aatch: fetch_add returns the value that was there before the xadd, right?
[01:30:10] *** Quits: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP) (Quit: yichoi)
[01:30:16] <bblum> (that is, it's __sync_fetch_and_add, not __sync_add_and_fetch?)
[01:30:42] <aatch> bblum, yep
[01:31:01] <bblum> i suppose i'll add some documentation to that effect
[01:31:08] * strcat hopes it will finally work
[01:31:35] <aatch> bblum, hmm, I suppose I should have done that.
[01:31:37] <aatch> Oh well.
[01:31:41] <bblum> i got you covered
[01:33:04] <aatch> ty :D
[01:33:57] <aatch> brson, so I just did a `make check` with build, host and target as i686-unknown-linux-gnu and didn't get any errors...
[01:34:58] <brson> aatch: with optimizations on?
[01:35:00] <strcat> dbaupp: stage0 done! ;p
[01:35:11] <dbaupp> strcat: :D
[01:35:21] <strcat> died in stage1
[01:35:23] <strcat> yay cfg
[01:35:37] <aatch> brson, yes
[01:35:58] <brson> aatch: maybe it's due to reading uninitialized memory and you've got convenient nulls ...
[01:36:44] <strcat> you can tell jemalloc to initialize it all to a poison value
[01:36:56] <aatch> strcat, how?
[01:37:10] <bblum> aatch: same deal with unsafe fn atomic_add?
[01:37:22] <strcat> "opt.junk" (bool) r- [--enable-fill]
[01:37:24] <strcat>     Junk filling enabled/disabled. If enabled, each byte of uninitialized allocated memory will be initialized to 0xa5. All deallocated memory will be initialized to 0x5a. This is intended for debugging and will impact performance negatively. This option is disabled by default unless --enable-debug is specified during configuration, in which case it is enabled by default unless running inside
[01:37:26] <strcat> Valgrind [2] . 
[01:37:28] <strcat> with mallctl
[01:37:33] <strcat> somewhere in early startup
[01:37:36] <bblum> aatch: i feel like those functions should have an assert that the type is word-sized
[01:37:51] *** Quits: jgilbert (jgilbert@2557E599.66715431.D25A875A.IP) (Ping timeout)
[01:38:19] <aatch> bblum, yes, all the intrinsics forward straight to the underlying llvm instructions
[01:38:45] <aatch> and you are probably right. I was being lazy.
[01:39:15] <bblum> oh, i suppose transmute has that assertion
[01:39:47] <dbaupp> bjz, jensnockert: ping
[01:39:47] <aatch> bblum, oh right, yes. That was not deliberate however...
[01:39:47] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[01:40:36] *** Quits: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[01:40:43] <aatch> strcat, but valgrind gives me no errors
[01:41:04] <strcat> aatch: valgrind isn't all-knowing ;p
[01:41:14] <strcat> it only catches a fraction of issues, not all invalid reads
[01:41:20] <aatch> hmm, I suppose
[01:41:22] <strcat> they don't check the stack
[01:41:30] <strcat> it probably checks our stacks
[01:41:37] <strcat> but not for the platform thread
[01:42:42] <strcat> int main() { int a[4]; a[4] = 10; }
[01:42:45] <strcat> valgrind doesn't catch it
[01:42:49] <strcat> there are many things it misses. ;p
[01:43:55] <strcat> aatch: http://i.imgur.com/PyWdtYA.png if only we had address sanitizer?
[01:44:32] <aatch> strcat, I might be able to add that without too much trouble actually...
[01:45:14] <strcat> gcc's address saniziter has color... clang's is uglier ;\
[01:45:20] *** Joins: jgilbert (jgilbert@2557E599.66715431.D25A875A.IP)
[01:45:30] <strcat> maybe in clang 3.3 it's newer
[01:46:09] <strcat> heh they are just different
[01:47:43] *** Joins: deepdog (deepdog@moz-490E834C.client.mchsi.com)
[01:48:02] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[01:50:30] <strcat> dbaupp: the compiler ICEs now :[
[01:50:56] <dbaupp> strcat: yup, that's always fun
[01:52:01] *** Quits: \n (NDesaulnie@moz-C2B49FFE.hsd1.ca.comcast.net) (Quit: \n)
[01:52:39] <strcat> dbaupp: from an @mut borrow :)
[01:52:42] <strcat> rust: task failed at 'borrowed', /home/strcat/projects/rust/src/librustc/middle/astencode.rs:1115
[01:52:44] <strcat> yay
[01:53:01] *** Joins: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP)
[01:53:04] <strcat> it's from the temporary values I added as borrowck workarounds
[01:53:16] <strcat> going to have to wrap them all in useless {} blocks too.
[01:53:18] *** Quits: mreedell (mreedell@moz-9950CA28.hsd1.pa.comcast.net) (Quit: Computer has gone to sleep.)
[01:53:58] <dbaupp> :(
[01:54:06] * strcat hates @mut ;\
[01:54:32] *** Joins: tjc (tjc@moz-B867959A.redactedconsulting.com)
[01:54:32] *** ChanServ sets mode: +o tjc
[01:56:48] <bblum> don't hate the type; hate the dynamic check
[01:56:56] <strcat> the dynamic check is because of the type ;p
[01:57:09] <bblum> the type is utterly necessary for many use cases
[01:57:37] <strcat> it's not ever necessary
[01:57:40] <strcat> it's often easier
[01:57:50] <bblum> how else are you gonna write a safe doubly-linked data structure?
[01:58:05] <strcat> by storing the nodes in a map ;p
[01:58:14] <bblum> keyed by?
[01:58:17] *** Quits: brendan (brendaneic@moz-423245E1.sub-70-197-15.myvzw.com) (Quit: brendan)
[01:58:24] <bblum> some integer identifier?
[01:58:34] <strcat> bblum: floats, and then you re-balance when they get too close xD
[01:58:43] <bblum> o_o
[01:58:49] <strcat> bblum: I'm not really serious ;p
[01:58:58] <bblum> i... could tell.
[01:59:30] <bblum> in fact, i think you and i had this discussion before
[01:59:31] <bblum> https://github.com/mozilla/rust/issues/5150
[02:00:36] <strcat> bblum: I remember reading a horrible stackoverflow answer about RDBMS one time encouraging using float keys and then inserting elements "in-between"
[02:00:49] <strcat> so now it's stuck in my head
[02:01:12] <pcwalton> you could conceivably make a custom smart pointer that feels like a unique pointer but has weak backreferences, but then I still think it would need dynamic borrowing
[02:01:53] *** Joins: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net)
[02:01:54] <bblum> pcwalton: i'd prefer to write my own assertions, i think
[02:01:54] *** Quits: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP) (Connection reset by peer)
[02:02:04] *** Quits: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net) (Quit: eatkinson)
[02:02:05] <bblum> (as a library data structure implementor, i mean)
[02:02:09] <dbaupp> strcat: that doesn't sound horrible... that sounds like genius! :P
[02:02:13] <strcat> rust: task failed at 'borrowed', /home/strcat/projects/rust/src/librustc/middle/astencode.rs:1135
[02:02:15] <strcat> damn
[02:02:30] <strcat> I guess I really need to wrap every single one of these borrowck workaround temporaries in {}
[02:02:32] * strcat sighs
[02:02:32] <bblum> reason being with dynamic borrowing, the user of my library could cause an innocent borrow inside my library to fail if they had taken a simultaneous mutable borrow themselves
[02:02:59] <bblum> i should go back and actually construct this case
[02:03:10] *** Quits: eholk (eholk@moz-E45742D4.public.wayport.net) (Ping timeout)
[02:03:31] <bblum> the "principle of least surprise" was really super broken when i realised a borrow might fail or not depending on the particular load/elements of the data structure
[02:03:42] *** Parts: steven_is_false (user@moz-144077DE.bchsia.telus.net) (ERC Version 5.3 (IRC client for Emacs))
[02:03:53] <cmr> bjz: Yes, why?
[02:04:22] *** Joins: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP)
[02:04:28] *** Joins: mreedell (mreedell@moz-9950CA28.hsd1.pa.comcast.net)
[02:04:43] <strcat> bblum: it's too frustrating to deal with these errors sanely...
[02:04:45] *** Joins: eholk (eholk@moz-E45742D4.public.wayport.net)
[02:04:47] <strcat> they come out of nowhere
[02:05:02] <strcat> I would rather just not have @mut and be forced to use unsafe for data structures like that
[02:05:09] <pcwalton> it is annoying, but I don't know how to fix it
[02:05:12] <strcat> at least then you only need to verify the data structure is correct
[02:05:13] *** Quits: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP) (Input/output error)
[02:05:17] <pcwalton> without something like &own/&mut
[02:05:24] <bblum> &own/&mut/&const seems fine to me
[02:05:26] <pcwalton> which would make them unusable
[02:05:45] <pcwalton> I mean, having &mut that couldn't be borrowed to &imm was really really annoygin
[02:05:46] <pcwalton> annoying
[02:05:56] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[02:06:13] <bblum> yeah, but you could do &const just fine
[02:06:18] <bblum> and that was all you needed for stuff like Eq
[02:06:36] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[02:06:36] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/T1-FPA
[02:06:36] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[02:06:37] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[02:06:38] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/wD2CoQ
[02:06:38] <ghrust> 13rust/06auto 145a3e1cd 15Luqman Aden: librustc: Don't allow newtype or unit-like structs to shadow other names in the value namespace.
[02:06:38] <ghrust> 13rust/06auto 14a95232a 15Luqman Aden: librustc: Better errors for duplicate definitions.
[02:06:38] <ghrust> 13rust/06auto 14693b9ce 15Luqman Aden: Add test for #7044.
[02:06:38] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[02:06:44] <bblum> (i think?)
[02:07:00] <strcat> pcwalton: well I don't mind that @mut has rough edges, I only mind that the compiler uses it everywhere when it shouldn't
[02:07:16] <pcwalton> &const wasn't very good because interior pointers were AM locations
[02:07:26] <pcwalton> so e.g. you couldn't ref into a Option<T>
[02:07:31] <pcwalton> &const Option<T>
[02:08:05] <pcwalton> strcat: agreed, that's bad
[02:08:29] <strcat> pcwalton: I don't think @mut should be sugar in the syntax though... it's too brittle
[02:08:31] <pcwalton> I think probably the way to do it safely is global concurrent GC
[02:08:32] <strcat> @ is fine
[02:09:12] <pcwalton> strcat: I find @mut ugly to begin with so I'm OK with that ;)
[02:09:26] <pcwalton> Servo uses @mut everywhere for its flow tree
[02:09:46] *** Quits: tcsc (tcsc@moz-ADC0ED45.hsd1.ct.comcast.net) (Quit: computer sleeping)
[02:10:14] *** Quits: kini (kini@moz-92AA953A.members.linode.com) (Ping timeout)
[02:11:11] *** Joins: kini (kini@moz-92AA953A.members.linode.com)
[02:12:00] * pcwalton wonders if dynamic borrowing of @mut just shouldn't exist
[02:12:06] *** Quits: Jesse (jruderman@2557E599.66715431.D25A875A.IP) (Connection reset by peer)
[02:12:08] <pcwalton> and should be implemented as a library
[02:12:15] <pcwalton> I mean, implicit dynamic borrowing of @mut
[02:12:28] *** Joins: Jesse (jruderman@2557E599.66715431.D25A875A.IP)
[02:12:40] <strcat> pcwalton: well, RcMut uses with_mut_borrow
[02:12:41] <pcwalton> require you to say it because failing with 'borrowed' is very confusing
[02:12:44] <strcat> and tbh I find it much easier to follow
[02:12:55] *** Quits: eholk (eholk@moz-E45742D4.public.wayport.net) (Ping timeout)
[02:13:02] <strcat> because you're forced to do a dynamic borrow in a closure
[02:13:06] <strcat> and it's very clear that you're doing it
[02:13:08] <pcwalton> strcat: it doesn't even have to use 'with' I think. just use a region pointer glued to the @ pointer it came from, with a dtor to reset the borrow.
[02:13:25] <strcat> pcwalton: yeah but then it becomes harder to follow again
[02:13:33] <pcwalton> possibly
[02:13:39] <strcat> pcwalton: the error I just hit is because
[02:13:47] <strcat> well nvm
[02:13:52] <strcat> I have no idea why I'm still hitting it...
[02:13:59] <aatch> yay... rebuilding llvm...
[02:14:03] <strcat> somehow turning .each into .iter().advance hits an @mut check
[02:14:13] <pcwalton> to be clear, the 'borrowed' error is very bad and should say where in the call stack you hit it
[02:14:19] <pcwalton> the two locations
[02:14:28] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[02:14:37] <cmr> strcat: Doesn't using closures for borrowed pointers make the region system useless?
[02:14:44] <strcat> pcwalton: well it seems like a bug that I'm hitting it and .each wasn't anyway
[02:14:49] <pcwalton> ah, ok
[02:15:28] <pcwalton> maybe the thing to do is the more principled thing
[02:15:38] <pcwalton> treat dynamic borrows more as option types than as null pointers
[02:15:53] <pcwalton> i.e. make the preferred case "ask if I can be mutated, if so do X, if not do Y"
[02:16:39] * strcat will just keep adding {} blocks to everything he changed ;\
[02:16:42] <strcat> until it works...
[02:16:54] <bblum> pcwalton: i feel like in basically all the cases, you nee to be able to borrow, though
[02:17:04] *** Joins: eholk (eholk@moz-E45742D4.public.wayport.net)
[02:17:14] <pcwalton> yes, there isn't much you can do if you couldn't borrow
[02:17:17] <pcwalton> your program can't proceed
[02:17:17] <bblum> so people will just be like fail!() in the other branch
[02:18:11] <cmr> Won't that make it *harder* to write safe programs, not easier?
[02:18:39] *** Joins: lmandel (lmandel@FE1F74.86ED00A7.971E19F6.IP)
[02:18:42] <strcat> making @mut more painful to use will make it easier to write correct programs because you won't use it except as a last resort ;p
[02:18:48] <pcwalton> so the typical problem is wanting to take references to ~[] pointers inside @mut objects
[02:18:54] <pcwalton> for example, to .each() over a vector
[02:19:07] <pcwalton> to ~[] arrays rather
[02:19:16] <pcwalton> this has an iterator invalidation problems
[02:19:21] <pcwalton> problem* I can't type today
[02:19:23] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[02:19:26] <strcat> pcwalton: the principled thing would be not having borrows from @mut and forcing you to just use @mut everywhere ;p
[02:19:36] <strcat> ofc then you'd lose out on the stdlib and shared code
[02:19:40] <pcwalton> this is why we introduced dynamic borrowing
[02:19:48] <pcwalton> also Option<T> inside a @mut object
[02:20:01] <pcwalton> same problem, iterator invalidation
[02:20:23] <strcat> pcwalton: it's worse than iterator invalidation in python/java
[02:20:29] <bblum> aatch: uhh..... the Atomic* types lack a way to clone them
[02:20:33] <pcwalton> the vexing thing is that it applies to *all* fields
[02:20:37] <pcwalton> not just the thing you're iterating over
[02:20:40] <strcat> their iterators use @mut, not &, so they can fail only in edge cases
[02:20:55] <strcat> @mut failures are much more common than invalidating an iterator in python
[02:20:55] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[02:20:59] <bblum> aatch: i feel like they should use UnsafeAtomicRcBox
[02:21:21] <aatch> bblum, I left it out because I figured they would be fairly low-level
[02:21:30] <cmr> Anyone want to review https://github.com/mozilla/rust/pull/7027 ?
[02:21:35] <bblum> i see, so i should put my own UnsafeatomicRcBox around them
[02:21:36] <strcat> pcwalton: for example with std::map in C++, you only actually invalidate an iterator by removing the node it currently points at - python/java would make that a dynamic failure
[02:21:37] <bblum> that's fine
[02:21:38] <strcat> but not the general case
[02:21:42] <aatch> as in, they should be use to /implement/ UnsafeAtomicRcBox
[02:21:47] <strcat> the @mut barrier is much more coarse
[02:21:53] <bblum> sure yeah
[02:21:54] <pcwalton> yes, it's much easier to do it
[02:21:54] <bblum> no, i agree
[02:22:17] *** Quits: cpeterson (cpeterson@moz-BE33DA21.fw1.sfo1.mozilla.net) (Ping timeout)
[02:22:44] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[02:23:01] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[02:23:11] <pcwalton> I don't really know of a good solution here, everything has a downside
[02:23:17] *** Quits: tikue (tkuehn@2557E599.66715431.D25A875A.IP) (Quit: tikue)
[02:24:53] *** Joins: brendan (brendaneic@moz-C252503F.public.wayport.net)
[02:25:01] <pcwalton> &own/&const would not let you iterate over a ~[]/Option<T>; dynamic borrowing has failures; global concurrent GC has overhead and is un-systemsy; SafeSTL is ad-hoc, slow, and hard to enforce correctness of at the compiler level; being unsafe is, well, being unsafe
[02:25:33] <bblum> i dunno, i never thought &const and the purity rule was too bad
[02:25:53] <bblum> i remember in some of the hairier situations, putting the thing inside an option and swap_unwrapping it out to operate on it
[02:25:55] <pcwalton> IMHO the language was not really usable then
[02:26:01] *** Quits: kimundi (kimundi@moz-786AC1FA.dip0.t-ipconnect.de) (Ping timeout)
[02:26:03] <pcwalton> we got so many complaints about it
[02:26:19] <bblum> but at least then i was sort of... being honest with myself about where the dynamic failure was
[02:26:58] <bblum> rather, i should say, i only needed to write code that had dynamic failure in the hairiest of cases, and could rely on the purity rule in most situations (such as when i needed to use Eq)
[02:27:08] <strcat> pcwalton: well... I'm finding the ones I'm hitting quite annoying
[02:27:11] <strcat> all from changing
[02:27:17] <pcwalton> the reviewers on our paper slammed us for using purity, and rightly so
[02:27:17] <strcat> foo().bar()
[02:27:19] <strcat> to
[02:27:21] <strcat> let r = foo();
[02:27:22] <pcwalton> it's a sledgehammer
[02:27:23] <strcat> r.bar()
[02:27:24] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[02:27:42] <dbaupp> does anyone happen to know what the difference between `str::bytes_slice*` and `str::as_bytes*` are?
[02:27:43] *** Quits: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP) (Ping timeout)
[02:27:46] <bblum> well
[02:27:53] <bblum> one of the reviewers pointed out that it was a shame
[02:28:12] <bblum> it didn't feel like slamming us, more a "you should discuss why there's nothing better you can do"
[02:28:30] <bblum> and for submitting to a PL conference i feel like they'd have slammed us harder for the dynamic failure solution
[02:28:35] <pcwalton> I read "can't you do something better?" differently :)
[02:28:58] *** Joins: kimundi (kimundi@moz-52983424.dip0.t-ipconnect.de)
[02:29:03] * pcwalton shrugs. to me PL is not really about avoiding dynamic failures
[02:29:27] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Client exited)
[02:29:33] <pcwalton> I can't speak for the reviewers of course
[02:29:37] *** Quits: paulproteus (quassel@rose.makesad.us) (Ping timeout)
[02:29:45] <bblum> well, it's not about the mere presence of dynamic failure
[02:29:56] <strcat> pcwalton: it's hard to reason about though
[02:30:00] <bblum> more about usability and principle-of-least-surprise
[02:30:07] <strcat> if you have @mut in a data structure and you do anything but a deep clone
[02:30:08] <pcwalton> strcat: would you prefer &const and pure to return?
[02:30:18] *** Joins: paulproteus (quassel@moz-E86A3B42.makesad.us)
[02:30:22] <strcat> pcwalton: no, I'd rather just push @mut out of the language to a library and not have sugar
[02:30:29] <pcwalton> ok, we agree then :)
[02:30:31] <strcat> it should be painful to use
[02:30:34] <strcat> @ shouldn't be
[02:30:40] <pcwalton> I mean, pure was pretty painful
[02:30:42] *** Quits: jgilbert (jgilbert@2557E599.66715431.D25A875A.IP) (Ping timeout)
[02:31:04] <strcat> @ is elegant and still lets you keep all of the nice mutability guarantees, and lends itself to writing persistent data structures
[02:31:08] * bblum hopes to be able to infer pure (even if it's not relied on)
[02:31:14] <pcwalton> purity being about *memory safety* is kind of weird
[02:31:19] <strcat> @mut really feels like the ugliest thing in the language to me. and it's too easy to use (wrong)
[02:31:40] *** Quits: mreedell (mreedell@moz-9950CA28.hsd1.pa.comcast.net) (Quit: Computer has gone to sleep.)
[02:31:44] <pcwalton> that feels like a wart, especially when we had to keep extending the definition of pure to mean "memory safe in this context"
[02:31:49] <strcat> it should only be for edge cases so it shouldn't have to be pretty
[02:31:59] <bblum> back in the version 0.3/0.4 days i didn't feel like @mut was ugly
[02:32:04] *** Joins: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net)
[02:32:16] <pcwalton> to be fair you didn't use @mut very often because of mut fields
[02:32:16] <strcat> bblum: it made code not using @mut uglier though
[02:32:27] <strcat> I shouldn't have to worry about @mut borrows if I'm not using it
[02:32:42] *** kimundi is now known as zz_kimundi
[02:32:44] <strcat> should the containers use & or &const on all their APIs? I don't want to think about it
[02:32:46] <pcwalton> I think that if there were some solution to make @mut less coarse
[02:32:49] <pcwalton> then it would go a very long way
[02:32:56] <pcwalton> I don't know what that solution is
[02:33:03] <bblum> less coarse?
[02:33:29] <pcwalton> e.g. if you're iterating over an ~[] array stored inside an @mut, only dynamic failure if you were actually going to invalidate *that* iterator
[02:33:37] <pcwalton> not if you mutate it for whatever other reason
[02:33:55] <pcwalton> hmmm
[02:34:03] <bblum> istr writing that sort of a check when i implemented DList
[02:34:07] <bblum> it was... difficult to reason about
[02:34:25] * strcat hopes this finally works
[02:34:31] <strcat> it became incredibly ugly though
[02:34:38] <pcwalton> remember that the reason d'etre for DList/DVec's existence is precisely because &const/pure was causing problems :)
[02:34:45] <pcwalton> that was redundant
[02:34:54] *** Quits: brendan (brendaneic@moz-C252503F.public.wayport.net) (Ping timeout)
[02:34:56] <strcat> yay it worked.
[02:34:59] <bblum> hm? i made DList for other reasons
[02:35:05] <pcwalton> well, DVec existed for that reason
[02:35:20] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[02:35:24] <pcwalton> the &mut borrow check errors were so bad that everyone stopped using ~vec
[02:35:25] <bblum> yeah, DVec was pretty stupid.
[02:35:44] <pcwalton> maybe the solution is to not make borrowing the entire @mut box not done so often
[02:35:49] <pcwalton> make it hard to do
[02:35:59] <bblum> instead borrow parts of it?
[02:36:03] <pcwalton> if you need to borrow a ~[] field, have a type that's like DVec
[02:36:06] <pcwalton> or rather
[02:36:07] <pcwalton> like Mut
[02:36:24] <strcat> pcwalton: it shouldn't be possible to get a dynamic failure from it without library APIs, imo
[02:36:29] <strcat> borrowing it should be a method
[02:36:36] <pcwalton> yeah, I'm starting to agree
[02:36:46] <pcwalton> (it also makes the custom smart pointers proposal way easier)
[02:36:58] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[02:37:03] <cmr> Which/whose proposal?
[02:37:09] <pcwalton> this is basically the X philosophy applied to Rust
[02:37:09] <cmr> Only one I've seen is kimundi's
[02:37:17] <pcwalton> cmr: it's basically kimundi's
[02:37:27] <pcwalton> if we don't know how to solve something, it is best to not solve it at all for rust 1.0 :)
[02:37:33] <pcwalton> and leave open solutions to rust 2.0
[02:37:37] <dbaupp> strcat: yay! :D
[02:37:50] <Jesse> but you have to borrow to do so many things
[02:37:54] *** Joins: jorendorff (jorendorff@moz-AF5FD687.hsd1.tn.comcast.net)
[02:38:04] <pcwalton> Jesse: you do, but most Rust programs don't use @mut that often
[02:38:07] <pcwalton> the compiler is the exception
[02:38:13] <strcat> and if they do use @mut they can just pass around @mut
[02:38:19] <strcat> and they won't get a dynamic failure until they borrow from it
[02:38:25] <strcat> it's the borrow from it that should be painful
[02:38:43] <sp3d> pcwalton: as in, X11?
[02:38:45] <strcat> do x.with_mut_borrow |x| { } really makes you think about it
[02:38:47] <pcwalton> yeah
[02:38:55] <strcat> do x.with_mut_borrow |y| { } *
[02:39:01] <sp3d> I would not use that as a metaphor, because X specified a lot of policy in very ad-hoc ways
[02:39:04] *** Quits: jorendorff (jorendorff@moz-AF5FD687.hsd1.tn.comcast.net) (Quit: jorendorff)
[02:39:09] <strcat> wayland then
[02:39:22] <strcat> they don't know how to solve multi-gpu so it's not part of the protocol and clients have to deal with it ;p
[02:39:50] <sp3d> maybe best to just say "tools, not solutions"
[02:39:51] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Connection reset by peer)
[02:40:13] <pcwalton> the one thing that it would close off is having &mut not borrowable to &imm if we didn't want to; however, we could always reintroduce &own because I think we want "restrict pointers" no matter what
[02:40:17] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[02:40:19] <pcwalton> so I think it actually closes off nothing
[02:40:23] <erickt> brson: ping
[02:40:45] <strcat> pcwalton: LLVM considers &T with T: Const to be noalias, so it's not a problem from a performance POV
[02:40:54] <strcat> it's only silly @mut
[02:41:27] <Ralith> strcat: llvm doesn't have 'Const', do you mean clang?
[02:41:30] *** Quits: eholk (eholk@moz-E45742D4.public.wayport.net) (Quit: eholk)
[02:41:33] <strcat> our Const
[02:41:54] *** Quits: brson (brson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[02:41:55] <strcat> Freeze* now, if that landed
[02:42:15] <Ralith> so you mean rust advises llvm of that, then
[02:42:24] <strcat> it should, it doesn't yet
[02:42:30] <bblum> do x.borrow |y| and do x.borrow_mut |y| are the names i'd use
[02:42:42] <bblum> i never liked the name "with" as long as it could be avoided
[02:42:50] <pcwalton> it's Lispy but yeah, it's verbose
[02:42:54] <pcwalton> you're probably right there
[02:42:54] <pcwalton> I
[02:43:06] * pcwalton wonders if Mut wasn't such a bad idea after all
[02:43:13] <pcwalton> at least it's fine-grained...
[02:43:26] <strcat> /home/strcat/projects/rust/src/librust/rust.rc:246:12: 246:35 error: borrowed value does not live long enough
[02:43:28] <strcat> /home/strcat/projects/rust/src/librust/rust.rc:246         for find_cmd(*args.head()).iter().advance |command| {
[02:43:30] <strcat>                                                                ^~~~~~~~~~~~~~~~~~~~~~~
[02:43:33] <pcwalton> IOW @Rc Mut<...>
[02:43:41] <pcwalton> to use Kimundi's proposal
[02:43:41] <strcat> now I get one of these wonderful errors... so I rewrite it to use a temp var and I then I get an @mut error
[02:43:41] <cmr> so what's the difference between do x.borrow/x.borrow_mut { ... } and let x = &foo / &mut foo, and the end of the lifetime?
[02:43:43] <strcat> yay ;p
[02:43:58] <cmr> Is it just that the function can handle more cases?
[02:43:59] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[02:44:18] <strcat> cmr: borrow/borrow_mut are more painful to use and clearly scope the dynamic freeze
[02:44:35] <bblum> ok, better head out
[02:44:46] <cmr> strcat: mm, makes sense
[02:44:50] <bblum> people who attend the tuesday meetings: please read my effects proposal on the mailing list before tomorrow morning
[02:44:52] <aatch> bah, so adding address sanitizer support is harder than I though.
[02:45:02] *** Quits: deepdog (deepdog@moz-490E834C.client.mchsi.com) (Ping timeout)
[02:45:04] <strcat> aatch: yeah I think clang/gcc do the grunt work
[02:45:11] <strcat> and ask for dynamic checks on anything the language leaves undef
[02:45:25] <strcat> I don't think it just operates on LLVM IR, it assumes a correct compiler
[02:45:38] <aatch> strcat, well there's an asan pass, but you're probably correct
[02:45:52] <strcat> aatch: afaik that just converts the annotations into checks, I could be wrong
[02:46:05] <pcwalton> btw, I have a bold plan for large reductions in trans/LLVM time if anyone is interested (I won'
[02:46:06] <pcwalton> t
[02:46:11] <pcwalton> be able to get for it for a bit)
[02:46:32] <aatch> pcwalton, ooo ooo!
[02:46:33] <pcwalton> which is: #[no_unwind], and have libstd be able to query for whether that flag was set in compilation
[02:46:38] * aatch jumps up and down.
[02:46:40] <strcat> pcwalton: dbaupp and I are converting most things to external iterators so that should remove the need to hardcode that loop optimization you talked about
[02:46:41] <pcwalton> and call a condition handler instead of throwing
[02:46:45] <pcwalton> strcat: awesome
[02:46:57] <strcat> just need to extend 'for'
[02:46:57] <pcwalton> call a condition handler instead of throwing, which the compiler will set
[02:47:31] <pcwalton> that should reduce almost all the cleanups and let us actually FastISel the compiler if you build it without optimization
[02:47:34] <pcwalton> I predict large wins
[02:47:35] <aatch> pcwalton, so #[no_unwind] as a crate-level attr?
[02:47:41] <pcwalton> yeah
[02:47:45] <pcwalton> it's like -fno-exceptions
[02:47:48] <pcwalton> kernels and such want it anyway
[02:47:54] <aatch> makes sense
[02:47:57] <pcwalton> and compilers, since compilers cannot reasonably recover from any failure
[02:48:01] <strcat> pcwalton: well imo converting it into abort() is fine. for a single-task program it's nearly the same thing
[02:48:13] <pcwalton> all that rustc needs to is print "ICE" and then exit
[02:48:17] <strcat> except if you rely on destructors to do work beyond cleanup
[02:48:21] <strcat> but you can still abort() from OOM
[02:49:09] <pcwalton> also if someone wants to make us not generate take glue for noncopyable things that'd be cool
[02:50:18] <strcat> pcwalton: seems like only things with @ need take glue
[02:50:27] <strcat> shouldn't we just be generating a memcpy directly otherwise?
[02:50:28] <pcwalton> @ won't eventually
[02:50:37] <pcwalton> @ will become clone just like everything else
[02:50:44] <pcwalton> then take glue will no longer exist as a concept
[02:50:56] <aatch> pcwalton, hurrah!
[02:50:57] <strcat> I guess it zeroes atm too
[02:52:06] *** Joins: steveklabnik (steveklabn@moz-658E911C.public.wayport.net)
[02:53:03] <pcwalton> anyhow, heading out -- have a good evening everyone
[02:53:06] <strcat> \o
[02:53:13] *** Quits: pcwalton (pcwalton@2557E599.66715431.D25A875A.IP) (Quit: pcwalton)
[02:58:59] *** Quits: steveklabnik (steveklabn@moz-658E911C.public.wayport.net) (Ping timeout)
[03:05:17] <aatch> huh, incoming build wont configure on mac
[03:05:25] *** Quits: Sorella (queen@B12A78F5.BA14766C.95C8B7C6.IP) (Quit: (quit))
[03:06:02] *** Joins: Jesin (Jessin_@moz-3AD6F09F.res.lehigh.edu)
[03:08:04] *** Parts: Diamond (dick@moz-625C0DAF.ks.ok.cox.net) ()
[03:10:40] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[03:13:54] *** Joins: steven_is_false (user@moz-144077DE.bchsia.telus.net)
[03:15:06] <steven_is_false> Strange, https://github.com/facebook/hiphop-php/issues/745 . In hindsight it's obvious but I never thought before that changing a memory allocator could cause memory leaks. How does anyone else feels this relates to Rust? 
[03:15:08] <Eridius> cmr: if you see this, are you planning on extending terminfo to understand if conditionals?
[03:15:34] *** Quits: dymk (dymk@moz-2490795B.client.dyn.strong-sf34.as22781.net) (Connection reset by peer)
[03:16:06] <mark_edward> is there a sizeof function?
[03:16:20] <steven_is_false> mark_edward: sys::size_of::<T>()
[03:17:12] *** Joins: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP)
[03:17:18] <strcat> Eridius: he is
[03:17:27] *** Quits: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net) (Client exited)
[03:17:28] <mark_edward> tanks
[03:17:37] *** Joins: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[03:19:17] *** Quits: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP) (Ping timeout)
[03:19:26] <Jesse> steven_is_false: sounds like fragmentation and possibly failing to release pages to the OS, rather than leaking allocations
[03:19:50] <aatch> also PHP is completely different to Rust
[03:20:45] <strcat> steven_is_false: jemalloc handles limiting fragmentation better than any other allocation because both facebook and mozilla have worked on making it handle that well
[03:21:13] <strcat> any other allocator*
[03:21:33] <strcat> anyway, fragmentation issues still exist with large allocations regardless of the allocator
[03:21:33] <Jesse> it handled fragmentation well even before that. that's why we took it ;)
[03:21:47] <Eridius> strcat: oh good. my recent commit lets it find my terminfo, but I still can't emit colors :/
[03:21:53] <strcat> Jesse: well, it handled it better than the windows allocator
[03:21:59] <steven_is_false> I thought that jemalloc was taken because it handles concurrency better?
[03:22:22] <strcat> steven_is_false: it handles parallelism better too. but so does tcmalloc
[03:22:24] <Jesse> malloc ain't free
[03:22:43] <strcat> allocations under 4k don't use locks
[03:22:47] <strcat> with jemalloc
[03:22:52] <strcat> and likely similar with tcmalloc
[03:22:58] <steven_is_false> strcat: amortized?
[03:23:10] <strcat> steven_is_false: not really
[03:23:16] <strcat> they use thread-local arenas
[03:23:20] <strcat> and mmap
[03:23:25] <strcat> so they don't use kernel locks like you do with sbrk
[03:23:29] <strcat> glibc still uses sbrk
[03:24:06] <steven_is_false> strcat: glibc still uses sbrk!
[03:24:32] <strcat> it uses mmap too, I guess for large ones
[03:24:43] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[03:26:32] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[03:28:32] <strcat> steven_is_false: I don't really understand why glibc doesn't use a better allocator. it does use thread-local arenas and packs things by size group but it's just not as good
[03:29:01] <strcat> doesn't scale as well and fragments more so it's less predictable
[03:29:14] <mcpherrin> Is it a codesize issue?
[03:29:16] <steven_is_false> strcat: Maybe they want more portability? I don't know.
[03:29:23] <strcat> the RES usage also isn't very predictable with a lot of threads
[03:29:44] <strcat> mcpherrin: not really. glibc is huge already ;p
[03:29:58] <strcat> their allocator isn't simple
[03:30:14] *** Quits: tjc (tjc@moz-B867959A.redactedconsulting.com) (Quit: zzzzzzzzzz)
[03:30:32] <strcat> mcpherrin: I think to change the performance characteristics, it would have to be a big push
[03:30:44] <strcat> mcpherrin: even if it was significantly better in 99% of use cases
[03:31:17] *** Quits: RMF (RMF@E80DA7BB.A3D80C3C.8D19547B.IP) (Quit: Textual IRC Client: www.textualapp.com)
[03:31:20] *** Quits: eevee (eevee@moz-A643AA65.evrt.wa.frontiernet.net) (Ping timeout)
[03:31:31] <strcat> mcpherrin: linux distros all heavily patch glibc because upstream sucks - even distros that usually avoid patching anything upstream rejects
[03:31:37] <strcat> so it's not that surprising.
[03:32:18] <strcat> debian-based distros use a "fork" (essentially a patchset) of glibc with the same ABI
[03:32:35] <strcat> http://www.eglibc.org/home
[03:32:37] *** Joins: tiffnya (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net)
[03:32:53] *** Joins: eevee (eevee@moz-A643AA65.evrt.wa.frontiernet.net)
[03:33:06] *** Quits: lmandel (lmandel@FE1F74.86ED00A7.971E19F6.IP) (Quit: lmandel)
[03:34:17] <strcat> arch is actually down to 3 patches with 2.17
[03:34:25] <strcat> probably has to do with drepper being gone ;p
[03:36:26] <steven_is_false> Well, anyways it probable doesn't matter to me anyways. I plan on structuring my program such that there are no heap allocations in the main loop.
[03:36:33] <mcpherrin> He's not czar of glibc anymore?!
[03:36:45] <mcpherrin> Man, I need to get into this decade
[03:36:45] <strcat> mcpherrin: nope, he works in investment banking now or something
[03:36:56] *** Quits: Jesse (jruderman@2557E599.66715431.D25A875A.IP) (Quit: Jesse)
[03:36:57] <strcat> mcpherrin: they pushed him out of his leadership role so he quit
[03:37:06] <mcpherrin> wtf, that seems unDrepper
[03:37:10] <strcat> glibc still hasn't recovered though
[03:37:41] <strcat> when eglibc ceases to exist, it will be the actual end of the age of drepper ;p
[03:37:43] <aatch> I don't keep up with politics, why is this important?
[03:37:52] <strcat> mcpherrin: http://www.linkedin.com/in/ulrichdrepper
[03:37:56] <aatch> (the lack of drepper)
[03:37:57] <strcat> mcpherrin: works for goldmann sachs :D
[03:38:17] <strcat> aatch: he was a very intelligent, massive jerk
[03:38:30] <strcat> aatch: and was unable to work with other people.
[03:38:31] <aatch> strcat, oh. One of those people.
[03:38:37] <steven_is_false> So like Linus Torvalds but meaner?
[03:38:39] <strcat> aatch: he intentionally left things broken out of spite
[03:38:53] <strcat> aatch: people would submit patches and he'd rewrite them in a broken way (intentionally) and apply them
[03:39:03] *** Quits: Boreeas (Boreeas@moz-F35C832D.boreeas.net) (Ping timeout)
[03:39:03] <strcat> steven_is_false: linus isn't a jerk
[03:39:09] <strcat> linus just has a special kind of humour
[03:39:12] <steven_is_false> strcat: Fair enough
[03:39:13] <aatch> "you questioned me so I am going to intentionally cripple your use case"
[03:39:17] <strcat> aatch: yep
[03:39:25] *** Quits: Guest__ (textual@moz-E64A54F3.nyc.res.rr.com) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[03:39:51] <aatch> also, linus doesn't suffer fools, rather than being straight-up mean.
[03:39:54] *** Quits: benh (ben@moz-4A0366D2.org) (Ping timeout)
[03:40:16] <strcat> aatch: yeah he just tells it like it is, and likes sarcasm ;p
[03:40:40] <strcat> drepper is actually cruel to people.
[03:41:04] <aatch> Most of the time I've seen him go off it's been in response to a "X should be done this way" type comment.
[03:41:17] <mcpherrin> I had a friend who ported glibc to OpenSolaris
[03:41:31] *** Quits: jack (jack@moz-F1B36F9F.hsd1.nm.comcast.net) (Ping timeout)
[03:41:31] <mcpherrin> of course none of his patches were ever accepted by drepper 
[03:41:40] <strcat> anyway looks like they are working hard to get the eglibc changes and various distro changes upstream now
[03:41:45] <mcpherrin> (Unsupported OSes should stay that way, apparently)
[03:42:09] *** Joins: benh (ben@moz-4A0366D2.org)
[03:42:22] *** Joins: Boreeas (Boreeas@moz-F35C832D.boreeas.net)
[03:45:12] <aatch> I think I understand it. drepper seems like he treats everyone as inherently inferior. Like there is no way somebody could fix *his* code. Nobody else has the ability, for he is the uber-programmer.
[03:45:41] <aatch> I got over that stage when I was 16.
[03:47:49] <strcat> well that seems bad, I'm getting random "killed the stack canary" errors in compile-fail
[03:47:51] <strcat> :|
[03:47:55] <mark_edward> how do you declare a mod that's in a directory above you?
[03:48:00] <aatch> mark_edward, super::
[03:48:02] <ssbr> "a special kind of humor" where linus swears at people and attempts to publicly humiliate them
[03:48:13] <aatch> mark_edward, assuming you mean 'use'
[03:48:15] <ssbr> that isn't acceptable behavior
[03:48:28] <ssbr> Even if it _is_ better than some other technical people.
[03:49:22] *** Quits: sp3d (a@moz-49806493.dhcp.stls.mo.charter.com) (Ping timeout)
[03:49:22] *** Joins: jack (jack@moz-F1B36F9F.hsd1.nm.comcast.net)
[03:49:33] <Luqman> Unhandled condition: read_error: {kind: OtherIoError, desc: "Placeholder error. You shouldn\'t be seeing this", detail: None}
[03:49:34] <mark_edward> aatch: yes, thank you
[03:49:36] <Luqman> hmmm...
[03:49:36] *** Joins: mleise (marco@moz-3468AB5B.pools.arcor-ip.net)
[03:51:22] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[03:53:00] <mark_edward> what does it mean when rust test just says "running x test" and gives no more output?
[03:53:28] <dbaupp> Luqman: is that with the new io?
[03:54:21] <steven_is_false> We have a ring buffer in the libraries right?
[03:54:30] <Luqman> dbaupp: no idea, just one of the many failures with my pull #7046 on mac.
[03:54:37] *** Joins: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP)
[03:54:37] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1488daa24 to 1437733c7: 02http://git.io/N3iJvQ
[03:54:37] *** Parts: ghrust (ghrust@24260B07.6A2AE50.F3114085.IP) ()
[03:54:41] *** Joins: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP)
[03:54:41] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/x1ybQw
[03:54:41] <ghrust> 13rust/06auto 145a3e1cd 15Luqman Aden: librustc: Don't allow newtype or unit-like structs to shadow other names in the value namespace.
[03:54:41] <ghrust> 13rust/06auto 14a95232a 15Luqman Aden: librustc: Better errors for duplicate definitions.
[03:54:41] <ghrust> 13rust/06auto 14693b9ce 15Luqman Aden: Add test for #7044.
[03:54:43] *** Parts: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP) ()
[03:55:28] <steven_is_false> Aahh we have a deque which is implemented as a circular buffer.
[03:56:02] <steven_is_false> I wonder if we could use the mirrored memory mmap trick to create a better deque?
[03:56:39] <steven_is_false> Although I have no idea how that would effect garbage collection.
[03:57:17] <aatch> mirrored memory mmap?
[03:57:48] <steven_is_false> aatch: One uses virtual memory to map two halves of an array to the same space.
[03:58:01] <steven_is_false> aatch: The memory layout is ABCDEFABCDEF
[03:58:30] <steven_is_false> One can then implement a ring buffer over that.
[03:59:15] *** Joins: wikkit (Mibbit@moz-346194C9.mc.videotron.ca)
[03:59:18] <strcat> mmap is too slow to use directly
[03:59:21] <Luqman> bblum: I think #6892 would be related to #3181
[03:59:32] *** Joins: sp3d (a@moz-49806493.dhcp.stls.mo.charter.com)
[03:59:36] *** Parts: wikkit (Mibbit@moz-346194C9.mc.videotron.ca) ()
[03:59:37] <steven_is_false> strcat: Yes, that's the problem with all the cool low-level hacks.
[04:00:13] <strcat> most deques are probably going to be under 4k
[04:01:00] *** Joins: oxide (Mibbit@993DE0B4.AA18ECD0.580BDDEE.IP)
[04:01:40] <steven_is_false> strcat: Isn't most of that virtual memory, and not physical memory though?
[04:03:02] <steven_is_false> It's still dumb to call the stuff directly though.
[04:03:10] <strcat> steven_is_false: it comes from pools though
[04:04:09] <steven_is_false> strcat: I thought memory came from heaps. What kind pools can you stack in heaps? jk 
[04:05:45] *** Joins: brson (brson@72B1AFF8.AD1E507F.3688B332.IP)
[04:05:46] *** ChanServ sets mode: +o brson
[04:09:29] *** Quits: jrfeenst (jrfeenst@moz-F912484F.cpe.norwoodlight.com) (Quit: jrfeenst)
[04:11:08] <Jeaye> I'm getting No rule to make target `/home/jeaye/project/rust/src/rt/sync/timer.cpp' on Linux with the latest incoming.
[04:11:15] <Jeaye> I've cleaned and tried rebuilding a couple of times.
[04:11:31] <dbaupp> oops... making rustc segfault :(
[04:11:46] <Jeaye> :(
[04:12:17] <dbaupp> Jeaye: ./configure'ing too?
[04:12:28] <Jeaye> I've reconfigured, yup
[04:12:34] <Jeaye> Trying it all again now.
[04:12:39] *** Joins: tjc (tjc@moz-B867959A.redactedconsulting.com)
[04:12:39] *** ChanServ sets mode: +o tjc
[04:12:57] <oxide> hey
[04:13:24] *** Joins: FreezerburnV (freezerbur@moz-5718C330.bltmmd.fios.verizon.net)
[04:13:35] <Eridius> rusti: fmt!("%x", 0x1234567890_u64 as u32)
[04:13:40] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/HSZJ
[04:13:44] <Luqman> bblum: so should it be that the destructor is run even if dest=Ignore?
[04:13:47] <Eridius> rusti: fmt!("%x", 0x1234567890_u64 as u32 as uint)
[04:13:51] -rusti- ~"34567890"
[04:14:10] <steven_is_false> Jeaye: What do you think about https://github.com/Jeaye/q3/issues/2 ?
[04:14:15] <Jeaye> dbaupp: Hmm, trying the whole thing again did it.
[04:14:20] <Jeaye> steven_is_false: Looking
[04:14:37] <oxide> i tried installing .6 on a manjaro and a debian set up both but fail to finish the compile. (color me newbie.) Is .7 any where near?
[04:14:39] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[04:15:02] <dbaupp> oxide: the end of the month, apparently
[04:15:17] <oxide> ah. good! Will try again then then.
[04:15:33] <strcat> oxide: you're probably just running out of memory
[04:15:49] <oxide> on manjaro error 1
[04:15:53] <oxide> ?
[04:16:05] <strcat> that's not an error, just the last line make bubbled up
[04:16:13] <oxide> or maybe that was on deb
[04:17:15] <bblum> Luqman: definitely
[04:17:34] <bblum> you should never be able to create a value of Drop kind that does not have its dtor run
[04:17:36] <Jeaye> steven_is_false: I think that's entirely reasonable. 
[04:17:54] <steven_is_false> Jeaye: Thanks
[04:18:37] <Jeaye> steven_is_false: I'm finishing up some console properties and a Rust update (a week behind incoming) and then I'll make sure that works. 
[04:18:48] <steven_is_false> Cool.
[04:21:16] *** Quits: brson (brson@72B1AFF8.AD1E507F.3688B332.IP) (Quit: Lost terminal)
[04:23:05] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[04:24:05] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[04:27:59] *** Joins: pyrac (pyrac@moz-B2CB8564.w92-156.abo.wanadoo.fr)
[04:30:46] *** Joins: brson (brson@72B1AFF8.AD1E507F.3688B332.IP)
[04:30:46] *** ChanServ sets mode: +o brson
[04:31:24] <brson> there was a new lwn article about rust on the 8th
[04:31:29] <brson> rust and go again
[04:33:45] <aatch> brson, I still can't repro that test failure!
[04:34:15] <aatch> I'm using the exact same commands as the buildbot
[04:36:08] <aatch> I do get two different failures though.
[04:36:43] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke. It's all a joke.)
[04:36:57] *** Quits: qmx (qmx@158DBDE0.B4C46C69.F6297865.IP) (Quit: Textual IRC Client: www.textualapp.com)
[04:37:59] <brson> aatch: my ebml branch has a ~400 line test case for the i686 failure on incoming. it works on my laptop. testing at home now
[04:38:08] *** Joins: alisdair (textual@moz-EBE9F394.bchsia.telus.net)
[04:38:32] <brson> aatch: maybe you could give it a try. it's run-pass/auto-encode
[04:39:26] <aatch> brson, the one I have is closer to 200 lines.
[04:39:44] <brson> this one inlines all the relevant parts of extra::serialize and extra::ebml
[04:39:49] <brson> it's self-contained
[04:40:07] <brson> and reduced
[04:40:30] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[04:40:53] <steven_is_false> What do people think about using unicode names in the libraries (particularly the math libraries?) For example, does anyone think Î³(4.0) is better than gamma(4.0)? What about f32::Ï€() versus f32::pi()?
[04:41:34] <dbaupp> steven_is_false: too hard to type
[04:41:35] <aatch> steven_is_false, the issue is entry method
[04:41:45] <aatch> I can't easily enter pi
[04:41:48] <Jesse> i â™¥ unicode
[04:41:59] <dbaupp> steven_is_false: (it'd look nice though!)
[04:42:01] <aatch> Ï€ <- copy pasted
[04:42:02] <Jesse> pi is easy, opt+p
[04:42:15] <aatch> Jesse, thanks captian apple
[04:42:32] <aatch> captain*
[04:42:33] *** Quits: nonehaxor (nonehaxor@BA9CBAE.4C3B0355.EE6E63A5.IP) (Ping timeout)
[04:42:48] <dbaupp> Jesse: easy on every keyboard layout and OS?
[04:43:29] <strcat> Jesse: the unicode arrows take 2 keypresses for me, doesn't mean they do for you
[04:43:52] <Jesse> ooh i would like unicode arrows to take 2 keypresses
[04:44:09] <steven_is_false> \rightarrow is how I type â†’
[04:44:25] <Jesse> hehe
[04:45:37] *** Joins: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP)
[04:45:37] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/x1ybQw
[04:45:37] *** Parts: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP) ()
[04:45:39] *** Joins: nonehaxor (nonehaxor@BA9CBAE.4C3B0355.EE6E63A5.IP)
[04:46:28] <dbaupp> rusti: 1i
[04:46:32] -rusti- 1
[04:47:07] <steven_is_false> rusti: let â†’ = 4; â†’
[04:47:08] -rusti- <anon>:10:9: 10:12 error: unknown start of token: 8594
[04:47:08] -rusti- <anon>:10          let â†’ = 4; â†’
[04:47:08] -rusti-                    ^~~
[04:47:08] -rusti- application terminated with error code 101
[04:47:11] <dbaupp> hm, http://lwn.net/SubscriberLink/553131/ee5f866f998608ab/ appears to be incorrect: "Fortunately, i is not a permitted suffix"
[04:49:11] *** Joins: carter (carter@moz-12C317EF.nyc.res.rr.com)
[04:49:37] <Jeaye> let Â»Â»Â» = 4; Â»Â»Â»
[04:49:44] <Jeaye> rusti: let Â»Â»Â» = 4; Â»Â»Â»
[04:49:44] -rusti- <anon>:10:9: 10:12 error: unknown start of token: 187
[04:49:45] -rusti- <anon>:10          let Â»Â»Â» = 4; Â»Â»Â»
[04:49:45] -rusti-                    ^~~
[04:49:45] -rusti- application terminated with error code 101
[04:50:33] <brson> lwn says "Possibly a bigger problem is that any tool that wishes to accurately analyze the syntax of a program needs to perform a complete type analysis"
[04:50:47] <brson> re rust semicolons
[04:51:24] <sp3d> is that true?
[04:51:48] *** Quits: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net) (Quit: ["Textual IRC Client: www.textualapp.com"])
[04:51:54] <dbaupp> rusti: if true { 1 } else { 2 } println("foo")
[04:51:57] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/eCTP
[04:52:08] <brson> sp3d: no
[04:52:23] <brson> rust analysis syntax without typechecking
[04:52:44] <Jeaye> rusti: ~"foo".iter().enumerate().advance |(i, &c)| { println(fmt!("%?:%?", i, c)); }
[04:52:46] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/cVba
[04:52:53] <aatch> maybe they are thinking of C++? *wishful*
[04:53:25] <Jeaye> So str.each becomes str.iter().enumerate().advance?
[04:53:26] <sp3d> brson: ok, that was what I thought
[04:54:26] <dbaupp> Jeaye: str.eachi becomes that
[04:54:39] <Jeaye> And str.each?
[04:54:41] <dbaupp> Jeaye: str.each becomes str.enumerate().advance
[04:54:45] <dbaupp> gah
[04:54:52] <dbaupp> str.iter().advance
[04:55:13] <Jeaye> There's no documentation on this yet, correct?
[04:55:20] *** Joins: sankha93 (Instantbir@83FDCCBB.7C356C25.8B6C1D65.IP)
[04:55:25] <Jeaye> Other than the emails.
[04:55:25] <dbaupp> Jeaye: there should be, in str.rs
[04:55:35] <Jeaye> Noted. Thanks, dbaupp 
[04:55:47] <dbaupp> i.e. I believe my most recent patch included doc-strings
[04:58:42] *** Joins: devinus (devinus@DAEC7122.372FE49C.29F95E0F.IP)
[05:00:28] *** Joins: doomlord (doomlod@moz-8F385DB0.range109-153.btcentralplus.com)
[05:00:53] <Jeaye> rusti: ~"foo".iter().advance |c| { println(fmt!("%?", c)); }
[05:00:54] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/WMCa
[05:01:33] <dbaupp> rusti: use std::iterator::IteratorUtil; for ~"foo".iter().advance |c| { println(fmt!("%?", c)); }
[05:01:34] -rusti- <anon>:10:60: 10:67 error: `for` must be followed by a block call
[05:01:34] -rusti- <anon>:10          use std::iterator::IteratorUtil; for ~"foo".iter().advance |c| { println(fmt!("%?", c)); }
[05:01:34] -rusti-                                                                       ^~~~~~~
[05:01:34] -rusti- application terminated with error code 101
[05:01:47] <dbaupp> rusti: use std::iterator::IteratorUtil; for "foo".iter().advance |c| { println(fmt!("%?", c)); }
[05:01:49] -rusti- 'f'
[05:01:49] -rusti- 'o'
[05:01:49] -rusti- 'o'
[05:01:49] -rusti- ()
[05:02:51] <Jeaye> Hmm.
[05:03:08] <dbaupp> ?
[05:03:36] <Jeaye> Just absorbing. Thanks for the help.
[05:03:45] <dbaupp> :)
[05:03:59] <strcat> advance is a temporary hack until for knows about external iterators
[05:04:13] <dbaupp> (sorry for breaking things... but it had to be done.)
[05:05:30] <strcat> Jeaye: there's a lot of documentation on it
[05:07:49] <bjz> cmr, dbaupp: it seems you pinged me
[05:07:55] <bjz> (lost in scrollback)
[05:08:13] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[05:08:19] <dbaupp> bjz: first commit of https://github.com/mozilla/rust/pull/7050
[05:08:36] <Eridius> rusti: use std::iterator::*; let mut c = Counter::new(1, 1); println(fmt!("%?", c.take(3).collect())); c.take(4).collect()
[05:08:41] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/PCOc
[05:08:49] <dbaupp> bjz: I'm not sure if those functions were designed to take by value rather than by reference for a reason?
[05:08:58] <Eridius> rusti: use std::iterator::*; let mut c = Counter::new(1, 1); println(fmt!("%?", c.take(3).collect::<~[int]>())); c.take(4).collect::<~[int]()
[05:09:00] -rusti- line longer than 150 columns, pastebinned: http://sprunge.us/TFfW
[05:09:01] <Eridius> rusti: use std::iterator::*; let mut c = Counter::new(1, 1); println(fmt!("%?", c.take(3).collect::<~[int]>())); c.take(4).collect::<~[int]>()
[05:09:02] <bjz> dbaupp: no real reason
[05:09:06] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/SNMb
[05:09:15] <Eridius> rusti: use std::iterator::*; let c = Counter::new(1, 1); println(fmt!("%?", c.take(3).collect::<~[int]>())); c.take(4).collect::<~[int]>()
[05:09:16] <dbaupp> bjz: so that change is ok?
[05:09:19] -rusti- ~[1, 2, 3]
[05:09:19] -rusti- ~[1, 2, 3, 4]
[05:09:36] <dbaupp> Eridius: how nice is that! :)
[05:09:42] <Eridius> dbaupp: actually it's not what I want :/
[05:09:51] <dbaupp> oh :(
[05:10:07] <Eridius> not really all that surprising tho
[05:10:16] <dbaupp> oh.. you want c to be "used up"?
[05:10:24] *** Quits: stowellde (uid6365@moz-D8B63698.irccloud.com) (Quit: Connection closed for inactivity)
[05:10:29] <Eridius> dbaupp: yes
[05:10:44] <dbaupp> strcat: ^
[05:10:48] <strcat> ?
[05:10:55] <bjz> dbaupp: yup, looks good
[05:11:02] <Eridius> strcat: I want some way to consume part of an iterator, then consume another part later
[05:11:15] <dbaupp> strcat: why doesn't c require mut there?
[05:11:20] <bjz> dbaupp: did you take advantage of the associated function fix?
[05:11:29] <strcat> dbaupp: moves
[05:11:45] <dbaupp> bjz: for the impl?
[05:11:49] <dbaupp> *impls
[05:11:50] <bjz> aye
[05:11:52] <strcat> Eridius: adaptors can't take by-ref
[05:11:59] <strcat> Eridius: we could have a way to unwrap them
[05:12:21] <strcat> well I guess we could chain a lot of &mut together...
[05:12:24] <strcat> it won't borrowck right now
[05:12:28] <strcat> so not an option yet
[05:12:38] <dbaupp> bjz: yes
[05:12:39] <Eridius> :/
[05:12:43] *** Quits: tjc (tjc@moz-B867959A.redactedconsulting.com) (Quit: zzzzzzzzzz)
[05:12:45] <dbaupp> strcat: https://github.com/mozilla/rust/pull/7050 r?
[05:12:51] <strcat> Eridius: you can deconstruct an iterator adaptor when you're done with it
[05:13:26] <Eridius> strcat: I just looked, the fields are priv
[05:13:33] <strcat> Eridius: yes they are supposed to be.
[05:13:38] <Eridius> so how do I deconstruct it?
[05:13:38] <strcat> as I said
[05:13:41] <strcat> 01:09:54          strcat | Eridius: we could have a way to unwrap them
[05:14:12] <strcat> or they could all use &mut but I don't really see that working
[05:14:27] <strcat> the ones like advance use &mut because they don't need an object
[05:14:30] <strcat> fold, etc.
[05:15:05] <aatch> hmm, is there any reason why certain environment variables wouldn't be inherited by a sub process
[05:15:16] *** Joins: tjc (tjc@moz-B867959A.redactedconsulting.com)
[05:15:16] *** ChanServ sets mode: +o tjc
[05:16:24] <Jeaye> str.each_line is gone, but str.each_line_any remains.
[05:16:40] <Eridius> is there a line iterator now?
[05:16:52] <strcat> Jeaye: needs to be removed along with dozens of others
[05:17:02] <strcat> most of the API will be removed, it's not useful
[05:17:05] <dbaupp> Eridius: yep
[05:17:08] <Eridius> yay
[05:17:14] <dbaupp> Eridius: .line_iter
[05:17:48] <dbaupp> Jeaye: that's the last one left... since the conversion is slightly non-trivial
[05:17:55] <Jeaye> ah
[05:18:04] *** Quits: FreezerburnV (freezerbur@moz-5718C330.bltmmd.fios.verizon.net) (Quit: FreezerburnV)
[05:18:07] <dbaupp> strcat: most things have been removed
[05:18:14] <dbaupp> strcat: I'm sure more is possible though
[05:18:16] <strcat> dbaupp: each, each_mut? ;p
[05:18:25] <strcat> filter, map, fold, other variants of those
[05:18:25] <dbaupp> strcat: from str, yes :)
[05:18:46] <strcat> I thought there was a lot more
[05:18:48] <dbaupp> and the ones in vec are mostly just from old_iter
[05:19:02] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[05:19:15] <strcat> eac_split_within
[05:19:26] <dbaupp> oh, yeah, that one too
[05:19:36] <dbaupp> (it's got such a silly name :/ )
[05:19:43] <strcat> contains_char
[05:20:14] <dbaupp> do we have iter().contains(foo) yet?
[05:20:25] <strcat> .any is contains with a lambda
[05:20:33] *** Quits: Jesin (Jessin_@moz-3AD6F09F.res.lehigh.edu) (Quit: Leaving)
[05:20:35] <steven_is_false> Goodnight
[05:20:36] *** Quits: steven_is_false (user@moz-144077DE.bchsia.telus.net) (Client exited)
[05:20:37] <Jeaye> rusti: for "foo bar".split_iter(' ').advance |x| { println(x); }
[05:20:41] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/KPhI
[05:20:43] <strcat> we could have contains as a &T shortcut
[05:21:06] <dbaupp> rusti: use std::iterator::*; for "foo bar".split_iter(' ').advance |x| { println(x); }
[05:21:08] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/IbOL
[05:21:14] *** Quits: yong (chatzilla@74DA0C97.4E87ADC2.263D9828.IP) (Ping timeout)
[05:21:24] <dbaupp> Jeaye: rusti's too old! :(
[05:21:24] <Jeaye> rusti: std::iterator::IteratorUtil; for "foo bar".split_iter(' ').advance |x| { println(x); }
[05:21:26] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/QGHN
[05:21:34] <Jeaye> dbaupp: But that's valid?
[05:21:40] <dbaupp> I think so
[05:21:44] <Jeaye> Not working here locally.
[05:21:50] <dbaupp> sec
[05:21:53] <Jeaye> But it's what's in the email.
[05:21:56] <strcat> pfft, rusti ages quickly
[05:22:03] <strcat> err
[05:22:04] <Jeaye> strcat: Very true. :P
[05:22:14] <strcat> rusti: use std::iterator::*; for "foo bar".split_iter(' ').advance |x| { println(x); }
[05:22:15] -rusti- foo
[05:22:15] -rusti- bar
[05:22:15] -rusti- ()
[05:22:16] *** Joins: yong (chatzilla@74DA0C97.4E87ADC2.263D9828.IP)
[05:22:18] <strcat> dbaupp: there
[05:22:20] <strcat> ;p
[05:22:50] <strcat> rusti: use std::iterator::*; for "abc def ghi jkl".split_iter(' ').take(2).advance |x| { println(x); }
[05:22:52] -rusti- abc
[05:22:52] -rusti- def
[05:22:52] -rusti- ()
[05:22:55] <strcat> yay iterators
[05:23:06] <strcat> and ofc it's as lazy as it has to be
[05:23:08] <Jeaye> I don't see what's different in yours
[05:23:14] <strcat> Jeaye: take(2) and more words
[05:23:20] <Jeaye> Nah, the first one
[05:23:20] <strcat> Jeaye: oh you mean why it compiled?
[05:23:23] <Jeaye> yes
[05:23:27] <strcat> I updated rusti's rust-incoming-git pkg
[05:23:33] <Jeaye> Oh, damnit.
[05:23:35] <Jeaye> hahah
[05:23:40] <Jeaye> You had me thinking you changed something.
[05:23:50] <strcat> Packages (2):
[05:23:51] <strcat> Name                          Old Version                  New Version                  Net Change  Download Size
[05:23:53] <strcat> testing/hwids                 20130512-1                   20130607-1                   0.02 MiB         0.28 MiB
[05:23:55] <strcat> thestinger/rust-incoming-git  release.0.6.2132.g94f72dd-1  release.0.6.2164.g1310212-1  -0.81 MiB       26.22 MiB
[05:23:57] <strcat> ;p
[05:23:59] <dbaupp> rusti: use std::iterator::*; for "abc def\nghi".split_iter(std::char::is_whitespace).advance |x| { println(x); }
[05:24:00] -rusti- abc
[05:24:01] -rusti- def
[05:24:01] -rusti- ghi
[05:24:01] -rusti- ()
[05:24:40] <bjz> dbaupp: has foldr been removed?
[05:24:50] <strcat> bjz: rev_iter().fold() for vectors
[05:24:52] *** Quits: sankha93 (Instantbir@83FDCCBB.7C356C25.8B6C1D65.IP) (Quit: Instantbird 1.4 -- http://www.instantbird.com)
[05:24:56] <dbaupp> bjz: yes
[05:24:56] <strcat> foldr has more meaning on other types
[05:25:14] <dbaupp> (the argument order is switched too)
[05:25:36] <aatch> I love how well iterators optimize personally
[05:26:01] <strcat> well I love how we can write adaptors and have them for dozens of kinds of iterators without any extra work.
[05:26:10] <strcat> and that they're nicely lazy and optimize well ;p
[05:26:11] <bjz> do I need to import something?
[05:26:13] <strcat> and compile quickly!
[05:26:20] <strcat> bjz: std::iterator::IteratorUtil
[05:26:37] <strcat> not in prelude yet due to method resolve bugs (also why some things have a trailing underscore in their name)
[05:26:46] <strcat> soon more things will have underscores :(
[05:26:48] <strcat> take, any
[05:27:19] <strcat> once I actually get the tests to pass for this...
[05:27:39] <Jeaye> Nice things are all working now. The interface is good 'n' consistent, once one gets a bit used to it. Thanks again.
[05:28:26] *** Joins: steveklabnik (steveklabn@moz-C3166165.hsd1.ca.comcast.net)
[05:28:49] <strcat> dbaupp: ugh
[05:29:05] <strcat> -        return b.each(|&x| f(x)) && y.advance(f);
[05:29:06] <strcat> +        b.iter().advance(|&x| f(x)) && y.advance(f)
[05:29:08] <strcat>      }
[05:29:10] <strcat> somehow broke it ;\
[05:29:30] <strcat> maybe advance didn't get updated right with the internal iterator protocol change
[05:29:51] * strcat doesn't understand ;\
[05:30:02] <dbaupp> strcat: it looks correct...
[05:30:16] <dbaupp> strcat: maybe VecIterator is wrong?
[05:30:20] <aatch> Hmm, valgrind uses LD_PRELOAD, is it likely that fork might deliberately not pass it to the child?
[05:30:25] <strcat> dbaupp: no it's treeset
[05:30:37] <strcat> dbaupp: oh you mean that iterator. it's an Option
[05:30:41] <strcat> maybe I screwed it up, sec
[05:31:00] <strcat> nope.
[05:31:07] <strcat> not Option's responsibility anyway
[05:31:11] <strcat> // Immutable iterator over an `Option<A>`
[05:31:13] <strcat> pub struct OptionIterator<'self, A> {
[05:31:15] <strcat>     priv opt: Option<&'self A>
[05:31:17] <strcat> }
[05:31:19] <strcat> impl<'self, A> Iterator<&'self A> for OptionIterator<'self, A> {
[05:31:21] <strcat>     fn next(&mut self) -> Option<&'self A> {
[05:31:23] <strcat>         util::replace(&mut self.opt, None)
[05:31:25] <strcat>     }
[05:31:27] <strcat> }
[05:31:51] <dbaupp> does util::replace do the right thing?
[05:31:55] <strcat> yes
[05:32:00] <strcat> it works throughout the codebase ;po
[05:32:03] <strcat> just not here
[05:32:15] * strcat is thinking
[05:32:15] <dbaupp> how strange
[05:32:36] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[05:34:44] <bjz> Luqman: I have rray building
[05:34:55] <bjz> Luqman: just checking the output
[05:35:09] <bjz> (heh, it takes a while
[05:35:10] <bjz> )
[05:35:19] <strcat> dbaupp: I think Option's each method was incorrect.
[05:35:23] <strcat> perhaps.
[05:35:39] <bjz> jensnockert: I'm wondering, maybe it would be better if intoperlation went in extra?
[05:35:47] <bjz> *interpolation
[05:35:52] <strcat> hrmm
[05:35:58] <dbaupp> strcat: :(
[05:36:32] <jensnockert> bjz: Right now std and extra are the same essentially.
[05:36:55] <strcat> yeah we haven't really decided what to put in extra
[05:37:12] <jensnockert> The split seems really random.
[05:37:13] <strcat> extra::{rc, deque, treemap} are definitely going to be in libstd
[05:37:16] <strcat> jensnockert: it is
[05:37:18] <strcat> it's arbitrary
[05:37:49] <strcat> but I am glad the core stdlib is called std
[05:37:50] <jensnockert> Some obvious std-candidates are in extra, and some really edge-case things are in std.
[05:37:58] <bjz> jensnockert: brson was just wondering if Interpolation is really appropriate. Maybe it would be better in a sci lib? I think lerp and invlerp might be primitive enough to go in though.
[05:38:02] <aatch> it'll settle once we have stuff that should definately be extra
[05:38:28] <bjz> jensnockert: just a thought, that's all
[05:39:19] *** Joins: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com)
[05:39:20] <strcat> dbaupp: ha it was a bug in my update of treemap's code
[05:39:22] * strcat sighs
[05:39:25] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[05:39:32] <dbaupp> :)
[05:39:34] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[05:39:48] <strcat> I had right before left
[05:39:55] <bjz> jensnockert: as doomlord_ says, having lerp would be very attractive for graphics/games devs
[05:39:58] <dbaupp> you've got it lucky... I'm dealing with:
[05:40:12] <dbaupp>  /home/huon/rust/src/libstd/core.rc:70:13: 70:19 error: expected item but found `extern`
[05:40:12] <dbaupp>  /home/huon/rust/src/libstd/core.rc:70 #[cfg(test)] extern mod realstd(name = "std");
[05:40:14] <strcat> because I fixed each_reverse, copy-pasted it (it's a 1-liner) and converted it from calling each_reverse recursively to each
[05:40:16] <strcat> but forgot to flip it
[05:40:24] <bjz> jensnockert: but I'm still not entirely sure about the more specific ones
[05:40:25] <strcat> fn each<'r, K: TotalOrd, V>(node: &'r Option<~TreeNode<K, V>>,
[05:40:27] <strcat>                             f: &fn(&'r K, &'r V) -> bool) -> bool {
[05:40:29] <strcat>     node.iter().advance(|x| each(&x.left, f) && f(&x.key, &x.value) &&
[05:40:31] <strcat>                             each(&x.right, f))
[05:40:33] <strcat> }
[05:40:35] <strcat> anyway, fixed :)
[05:40:39] <dbaupp> strcat: ah, right.
[05:41:21] <bjz> jensnockert: does that make sense? Sorry, I know you spent a while on those
[05:41:31] <Eridius> rusti: unsafe { std::cast::transmute::<~[u8],~[u32]>(~[1,2,3,4]) }
[05:41:32] -rusti- ~[67305985]
[05:41:45] <Eridius> rusti: 0x01020304
[05:41:47] -rusti- 16909060
[05:41:51] <Eridius> rusti: 0x04030201
[05:41:52] -rusti- 67305985
[05:42:15] <bjz> Eridius: heh, neat!
[05:42:25] <Eridius> I'm actually surprised that it seems to change the size properly
[05:42:35] <Luqman> "struct variant kinds unimpl in enum_variants"
[05:42:39] <Eridius> rusti: unsafe { std::cast::transmute::<~[u8],~[u32]>(~[1]) }
[05:42:40] -rusti- ~[1]
[05:42:42] <Luqman> ^ what exactly does that mean?
[05:42:47] <jensnockert> bjz: The more complex ones are extremely useful in animation and UI, but I don't mind splitting them out to a library.
[05:43:11] <bjz> jensnockert: yeah, I might add some to lmath
[05:43:13] <jensnockert> I think the whole of extra should be split out into libraries.
[05:43:30] <jensnockert> Just bundled with the compiler
[05:43:33] <aatch> Eridius, the size of vectors is stored in bytes
[05:43:46] <Eridius> aatch: oh really?
[05:43:52] <bjz> jensnockert: I'm thinking some sort of spline stuff etc. would be nice for lmath, but later
[05:44:00] <dbaupp> Luqman: it means there's an enum like enum A { Foo { x: int, .. } } and something is happening to it... can't remember the details of where I've seen it
[05:44:22] <jensnockert> bjz: Lucky that I implemented the methods for some of the more common ones then ;)
[05:44:22] <dbaupp> jensnockert: I think that split is the plan, maybe.
[05:44:33] <Eridius> aatch: is it safe to rely on cast::transmute letting me turn a ~[u8] into a ~[u32]?
[05:44:37] <jensnockert> dbaupp: Yeah, I hope so.
[05:44:49] <Luqman> dbaupp: yea, i'm running into an ICE with trying to calling a method on that kind of enum
[05:45:01] <aatch> Eridius, depends, are you relying on endianness?
[05:45:12] <Eridius> aatch: no, the ~[u8] is actually random data, I just need random u32's
[05:45:15] <strcat> Eridius: no it's not safe to rely on casts between pointer types
[05:45:17] <Eridius> specifically, it's std::rand::seed()
[05:45:47] <strcat> safe right now. but it will probably break in the future
[05:45:48] <bjz> Luqman: rray now works again!
[05:45:58] <Eridius> strcat: bah. What do you recommend then for what I want?
[05:45:59] <Luqman> bjz: sweet!
[05:46:01] <aatch> strcat, why would it break in the future?
[05:46:02] <bjz> Luqman: pushed to the repo
[05:46:03] <strcat> kind of thing type-based alias analysis forbids
[05:46:10] <strcat> aatch: casting between arbitrary pointer types
[05:46:12] <bjz> Luqman: :D
[05:46:25] <jensnockert> bjz: I still think some sort of numeric library should be bundled with the compiler.
[05:46:41] <jensnockert> bjz: PyPy is definitely showing the way forward there.
[05:46:46] <strcat> jensnockert: I don't see a problem with bundling it if you can actually stabilize it
[05:46:51] <strcat> but lmath isn't going to be stable for a long time
[05:47:00] <bjz> strcat: alas no :(
[05:47:14] <strcat> the language is going to change a lot in ways that lmath will adapt to
[05:47:26] <bjz> strcat: looks like it will be much better in the future now
[05:47:38] <bjz> I de-traitified everything
[05:47:48] <Jeaye> Oh, that'll be good.
[05:47:55] <bjz> will make it MUCH simpler
[05:47:58] <Jeaye> The traits were pretty rough. :P
[05:48:11] <bjz> Jeaye: you're welcome to check it out
[05:48:26] <Jeaye> Will do.
[05:48:26] <bjz> Jeaye: it's much simpler now :)
[05:48:31] <strcat> bjz: so you can't write generic code for any Vec3 outside of the lib?
[05:48:40] <bjz> strcat: you can
[05:48:41] <strcat> I can see why it'd be simpler with the way the language is
[05:48:54] <strcat> but it shows that traits are a pretty big failure 
[05:48:55] <bjz> strcat: but it's impled directly on the structs
[05:49:02] <bjz> strcat: indeed
[05:49:05] <strcat> bjz: impls on structs aren't generic though
[05:49:11] <strcat> you can't write code taking a generic vec3
[05:49:14] <strcat> externally
[05:49:15] <bjz> strcat: that is my sadness factor
[05:49:24] <bjz> I had to give up on traits
[05:49:30] <strcat> why?
[05:49:43] <bjz> It was too dificult to manage
[05:49:50] <Luqman> bjz: did the the index changes have any impact?
[05:50:18] <bjz> also the way of calling associated functions was, well, yuck
[05:50:40] <strcat> bjz: well it's sad that you had to write it like you would in C...
[05:50:59] <bjz> it's also difficult for users to import what they need
[05:51:12] <strcat> I guess, but these are problems with the language
[05:51:17] <bjz> like, you have to do a glob import to pull in all the traits
[05:51:55] <strcat> well it makes rust look pretty bad, is all I'm saying
[05:52:05] <bjz> strcat: believe me, I know
[05:52:09] <strcat> fyi that's how Go used to implement their vectors before they hardcoded it into the language
[05:52:15] <strcat> a python script generated the code
[05:52:40] <bjz> strcat: it's the thing that concerns me about traits
[05:53:05] <bjz> strcat: but I'm not smart enough to think of a solution
[05:53:07] <strcat> what concerns me about traits is that no one is using them so they aren't going to be fixed...
[05:53:15] <strcat> the stdlib doesn't really use them, servo doesn't, the compiler doesn't
[05:53:20] <bjz> strcat: all I know is they are difficult
[05:53:26] <bjz> I was trying!
[05:53:33] <bjz> :(
[05:53:41] * strcat shrugs
[05:53:47] <bjz> I might have another go
[05:53:54] <bjz> but it was holdinbg me back
[05:53:58] <bjz> *holding
[05:54:02] <strcat> Iterator is barely generic and it feels like the first thing written using generic traits in the stdlib
[05:54:05] <strcat> hits so many bugs
[05:54:06] <sully> what wasn't working?
[05:54:06] <aatch> I generally find them too limiting. Or you end up with balooning type parameters
[05:54:26] <strcat> method resolve bugs, type inference bugs, lack of default methods, lack of associated types
[05:54:38] <bjz> aatch: will be easier with associated items at least
[05:54:45] <strcat> trait objects don't work at all but they don't really matter. that should be fixed last
[05:54:52] <strcat> trait inheritance doesn't work at all <- that's important
[05:54:53] <bjz> strcat: another thing is that you can't specialise them
[05:54:53] <aatch> associated items would be nice.
[05:55:00] <strcat> bjz: you can - default methods
[05:55:03] <aatch> especially say associated enums
[05:55:03] <strcat> bjz: but they don't work.
[05:55:04] <sully> default methods are super fucked
[05:55:12] <strcat> sully: so is inheritance
[05:55:14] <sully> I've got a couple patches in the queue that fix some of it
[05:55:26] <strcat> sully: well that makes me happy
[05:55:36] <strcat> it should be a priority because the entire stdlib has to be rewritten around them
[05:55:43] <strcat> iterators are only the start of it.
[05:55:57] <strcat> I mean look at vec/str
[05:56:01] <strcat> they hardcode everything
[05:56:13] <strcat> if we write a small vector, it will be unusable
[05:56:38] <Eridius> rusti: use std::iterator::*; [1,2,3].iter().take(5).collect::<~[int]>()
[05:56:41] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/LdEH
[05:56:43] <strcat> you can't make drop-in alternate implementations of pretty much anything in the stdlib
[05:56:56] <Eridius> rusti: use std::iterator::*; [1,2,3].iter().take(5).collect::<~[&int]>()
[05:56:57] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/VeJG
[05:57:03] <bjz> strcat: the other issue is overloading. Operator overloads are going to be very difficult (but not insummountable). The issue is that generic client code will have to include lmath-specific RHS trait constraints on the type parameters.
[05:57:14] <Eridius> I don't suppose there's an .iter() variant that copies elements?
[05:57:22] <strcat> Eridius: .transform(|x| x.clone)
[05:57:30] <strcat> clone() *
[05:57:32] <bjz> strcat: also, client code will only be able to use the RHSs that lmath implements
[05:57:37] <Eridius> strcat: I want .iter_copy() or somesuch on &[T]
[05:57:42] *** zz_kimundi is now known as kimundi
[05:57:51] <strcat> Eridius: definitely not with Copy
[05:57:55] <strcat> Copy is deprecated
[05:58:04] <bjz> strcat: again, I don't know how to solve that :(
[05:58:15] <strcat> Eridius: in the future it will be
[05:58:18] <Eridius> rusti: use std::iterator::*; [1,2,3].iter().transform(|x| x.clone).take(5).collect::<~[int]>()
[05:58:19] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/XLdN
[05:58:22] <strcat> Eridius: .iter().map(Clone::clone)
[05:58:24] <strcat> that's not bad
[05:58:30] <strcat> I don't want to add .iter_copy to every container
[05:58:42] <Eridius> strcat: so make it a default method in Iterable
[05:58:50] <Eridius> rusti: use std::iterator::*; [1,2,3].iter().transform(|x| *x).take(5).collect::<~[int]>()
[05:58:51] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/BNca
[05:58:53] <strcat> Eridius: it shouldn't have sugar
[05:58:57] <strcat> slow things should feel slow
[05:59:12] <strcat> .map(Clone::clone) is really not much worse than _copy
[05:59:13] <Eridius> it's a goddamn integer. Taking a pointer is slower!
[05:59:31] <Eridius> rusti: use std::iterator::*; println(fmt!("%?", [1,2,3].iter().transform(|x| *x).take(5).collect::<~[int]>()))
[05:59:33] <strcat> Eridius: vectors are generic though. they don't just hold integers
[05:59:33] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/QBig
[05:59:39] <Eridius> strcat: yeah but they often do
[05:59:58] <Eridius> sigh, why am I getting borrowck issues?
[05:59:58] <strcat> Eridius: _copy versions of everything would be ridiculous
[06:00:09] <Eridius> not everything.. just iter
[06:00:09] <strcat> Eridius: find_copy, get_copy, intersect_copy
[06:00:14] <strcat> Eridius: okay but why iter?
[06:00:17] <dbaupp> Eridius: the compiler is pretty good with optimising iterators
[06:00:34] <Eridius> strcat: because of the issue I'm hitting right now with rusti?
[06:00:58] <Eridius> rusti: use std::iterator::*; let x = [1,2,3]; x.iter().transform(|&x| x).take(5).collect::<~[int]>()
[06:01:00] -rusti- ~[1, 2, 3]
[06:01:01] <strcat> Eridius: that's because you need temporary values
[06:01:09] <strcat> rust sucks at rvalues right now
[06:01:12] <strcat> it can't chain them
[06:01:49] <bjz> Luqman: still runs pretty slow :(
[06:02:06] <aatch> bjz, this rray?
[06:02:11] <bjz> aatch: aye
[06:02:14] <strcat> Eridius: there are different types of copies
[06:02:26] <strcat> Clone, DeepClone are the two we have right now
[06:03:29] <strcat> we already need an API for moving, by-ref and by-mut-ref
[06:03:33] <strcat> for almost everything
[06:04:06] <strcat> by-clone and by-deep-clone is too much bloat since they're sugar for something by-ref can do (clone takes &self anyway)
[06:05:15] <strcat> anyway we have serious API bloat
[06:05:21] <strcat> find_copy, get_copy on HashMap
[06:05:48] <strcat> get, get_mut, contains_key_equiv, find_equiv, insert_or_update_with, find_or_insert_with, find_or_insert, mangle
[06:05:57] <strcat> it's hardly better than how vec/str ended up.
[06:06:25] <aatch> bjz, mind pushing the lmath fixes? I wouldn't mind investigating rray if it's slower than it should be.
[06:06:42] <bjz> aatch: already done :)
[06:06:59] <bjz> oh wait
[06:07:09] <bjz> did I not push lmath?
[06:07:19] <aatch> last commit: 7 hours ago
[06:07:34] <bjz> no, that's right
[06:07:42] <bjz> I pushed it earlier today
[06:07:53] <aatch> hmm, maybe I need to update rustc
[06:07:57] <bjz> I fixed rray when I got home
[06:07:59] <bjz> yeah
[06:08:05] <bjz> it relies on a recent fix
[06:08:31] <bjz> not sure how old your rustc is
[06:08:54] <aatch> urp, over a week old.
[06:09:10] <strcat> dbaupp: https://github.com/mozilla/rust/pull/7055 heh.
[06:09:24] <strcat> dbaupp: still might be a few things to fix. haven't gotten to test/bench yet
[06:09:24] <bjz> aatch: heh, that's your answer :)
[06:10:23] *** Quits: pyrac (pyrac@moz-B2CB8564.w92-156.abo.wanadoo.fr) (Quit: pyrac)
[06:10:45] <dbaupp> strcat: :D
[06:10:56] <strcat> dbaupp: compile-fail hates me though
[06:11:08] <dbaupp> things weren't failing?
[06:11:13] <strcat> dbaupp: they are failing
[06:11:19] <strcat> dbaupp: they're segfaulting ;
[06:11:21] <strcat> ;\
[06:11:31] <strcat> deref of null pointers somewhere
[06:11:36] <strcat> maybe a bug in the runtime in oom handling
[06:11:42] *** Quits: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[06:11:44] <strcat> the tests seem to be *too* concurrent sometimes
[06:12:01] <dbaupp> you can use RUST_THREADS=1 or 2, right?
[06:12:01] <aatch> strcat, I think I'm running into that at times.
[06:12:13] <strcat> dbaupp: RUST_THREAD, I think
[06:13:39] <dbaupp> these huge patches must be horrible for everyone else... :S
[06:14:53] *** Joins: eschweic (Adium@moz-5CF47426.dia.static.qwest.net)
[06:15:04] *** Quits: eschweic (Adium@moz-5CF47426.dia.static.qwest.net) (Quit: Leaving.)
[06:15:29] <strcat> dbaupp: at least the stdlib will suck a lot less.
[06:15:41] <dbaupp> strcat: yeah...
[06:15:55] <strcat> by 0.8 we'll be at a point where the containers/iterators will be sane compared to other languages ;p
[06:16:06] <dbaupp> heh :)
[06:16:08] <steveklabnik> :)
[06:16:42] <dbaupp> there's no way to dump the lexed tokens is there?
[06:17:03] <strcat> maybe we'll even have removed the unused param we give to every function + unused headers on ~ allocs + horrible zeroing on moves + FFI wrappers by then ;p
[06:17:45] *** Quits: carter (carter@moz-12C317EF.nyc.res.rr.com) (Quit: Textual IRC Client: www.textualapp.com)
[06:22:15] <Eridius> wat: error: use of undeclared module `std::cast`
[06:22:26] <Eridius> rusti: std::cast::transmute::<~[u8],~[u32]>
[06:22:49] <Eridius> rusti?
[06:22:56] <strcat> rusti: 5
[06:22:57] -rusti- 5
[06:23:07] <Eridius> I know I was asking it to print out a function, but still...
[06:23:07] <strcat> there was just no output
[06:23:20] <Eridius> strcat: what happened to the "no output" message? also, a function value is no output?
[06:23:38] <strcat> rusti: fmt!("%?", |x, y| x + y)
[06:23:39] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/CQBQ
[06:24:04] <strcat> rusti: fmt!("%?", |x: int, y: int| x + y)
[06:24:05] -rusti- ~""
[06:24:10] <Eridius> rusti: fmt!("%?", print)
[06:24:12] -rusti- ~""
[06:24:16] <Eridius> weird
[06:24:22] <strcat> fmt is weird/terrible
[06:24:28] <Eridius> anyway, why the heck is my std::cast::transmute not working in my code?
[06:24:36] <strcat> needs to learn to use ToStr for %s and how to use Writers
[06:24:40] <strcat> Eridius: dunno
[06:25:35] <Eridius> huh, ::std::cast::transmute works. But I'm not inside a nested module
[06:25:41] <dbaupp> strcat: aatch and I are doing things with fmt! ... really slowly
[06:25:51] <strcat> rustc: /home/strcat/projects/rust/src/rt/rust_stack.cpp:55: void check_stack_canary(stk_seg*): Assertion `stk->canary == canary_value && "Somebody killed the canary"' failed.
[06:25:54] <strcat> huh seriously
[06:25:56] <aatch> dbaupp, oh god, the rebasing for that.
[06:26:00] <strcat> I wonder why this is happening, and only in compile-fail
[06:26:02] <strcat> :|
[06:26:24] <Eridius> hrm, what the heck is the current precedence of `as`?
[06:27:20] <dbaupp> aatch: it'll be eaaasy ;P
[06:27:40] <dbaupp> Eridius: it binds tighter than binops
[06:27:54] <Eridius> dbaupp: but not than %, apparently
[06:28:06] <strcat> rusti: 5 as int % 2
[06:28:11] -rusti- 1
[06:28:13] <dbaupp> rusti: 10 % 2.0 as int
[06:28:15] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/YYHG
[06:28:31] <dbaupp> rusti: 10 + 2.0 as int
[06:28:37] -rusti- timeout triggered!
[06:28:41] <dbaupp> rusti: 10 * 2.0 as int
[06:28:44] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/NKKW
[06:28:54] <dbaupp> rusti: 10 + 2.0 as int
[06:28:57] -rusti- 12
[06:29:12] <Eridius> so I guess it's between * and +. weird
[06:30:19] <aatch> Eridius, 'as' is between (*, /, %) and (-, +)
[06:30:38] <aatch> with the first set having higher precedence.
[06:30:40] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[06:30:40] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/z5Umjg
[06:30:40] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[06:30:42] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[06:30:42] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/myIWRg
[06:30:42] <ghrust> 13rust/06auto 14febba9f 15Young-il Choi: rt: dummy function pthread_atfork for android
[06:30:42] <ghrust> 13rust/06auto 146bdd4c8 15bors: auto merge of #7054 : yichoi/rust/after_jemalloc, r=brson...
[06:30:43] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[06:30:44] <Eridius> woohoo, my Mersenne Twister impl is now correct!
[06:31:14] <Eridius> I'm writing this for matasano, but I wonder if it's worth contributing to libstd
[06:31:38] <aatch> Eridius, we already have a solid random number generator
[06:31:55] <dbaupp> Eridius: I've got a rewrite of rand
[06:32:04] <strcat> Eridius: transmuting ~[T] to ~[U] should always be fine but if you transmute &[T] to &[U] I guarantee that will break in the future
[06:32:17] <dbaupp> Eridius: https://github.com/huonw/rust-rand
[06:32:22] <strcat> it's not valid in C/C++ for all pointer types
[06:32:25] <Eridius> strcat: good to know
[06:32:31] <strcat> only certain casts are valid
[06:32:45] <dbaupp> Eridius: (if you've got any feedback, feel free to help :) )
[06:32:47] <Eridius> aatch: I'm not familiar with Isaac, I don't know how MT19937 compares, but occasionally it can be useful to have multiple generators
[06:33:11] <aatch> Eridius, true
[06:33:30] <dbaupp> Eridius: implemented so far: https://github.com/huonw/rust-rand/blob/master/bench/run.rs#L86
[06:33:59] <dbaupp> (some are very random... giving 0 constantly... but debugging is hard.)
[06:34:04] <Eridius> hah
[06:34:36] <Eridius> ok I guess I won't bother looking into giving this code to rust, since dbaupp apparently already has an MT19937 impl
[06:34:56] <dbaupp> Eridius: if yours is faster than mine... :)
[06:35:01] <Eridius> dbaupp: I haven't benchmarked anything
[06:35:24] <strcat> woo, pass the std/extra tests, finally
[06:35:36] <aatch> bjz, what kind of time should I be looking at for rray?
[06:35:48] <dbaupp> (I'm planning to get that back into std & extra at some point soon... soon..)
[06:35:53] <bjz> aatch: no idea :)
[06:36:07] <bjz> aatch: I would reccomend talking to Luqman
[06:36:37] <bjz> aatch: I'm not too familiar with the logic, I've just been doing dumb build fixes
[06:36:37] *** Joins: nano (nano@moz-972880B.superkabel.de)
[06:37:08] <Eridius> wat. -Wunused-imports is giving me a bogus failure
[06:37:14] <bjz> aatch: I might need to implement a better lerp for the Vecs
[06:37:15] <Eridius> oh nm. wrooooong file
[06:37:29] <bjz> aatch: actually
[06:37:38] <Luqman> aatch: there are some various shortcuts that can be taken in the intersection method
[06:37:43] <bjz> aatch: why did I say that :P
[06:37:52] <bjz> aatch: no lerp is used :P
[06:38:33] <aatch> Luqman, oh, I'm just seeing if there is anything that can be done by the compiler.
[06:38:50] <bjz> Luqman: ahh, neat
[06:38:58] <bjz> * aatch
[06:39:36] <bjz> aatch: I might need to also review what I've been inlining in lmath
[06:39:48] <bjz> I've been a tad heavy-handed
[06:39:53] *** Quits: tjc (tjc@moz-B867959A.redactedconsulting.com) (Quit: Places to go, people to annoy)
[06:40:06] *** Joins: sankha93 (Instantbir@C37F5D63.1F4087EF.8B6C1D65.IP)
[06:40:23] *** Quits: skchrko_ (sk@61A494B3.BA40E8A.AAC02D62.IP) (Ping timeout)
[06:40:35] *** Quits: sk (sk@61A494B3.BA40E8A.AAC02D62.IP) (Ping timeout)
[06:40:36] *** Joins: skchrko_ (sk@61A494B3.BA40E8A.AAC02D62.IP)
[06:41:54] *** Joins: sk (sk@61A494B3.BA40E8A.AAC02D62.IP)
[06:42:06] <aatch> Ok, so extra::rope needs some love...
[06:42:50] <dbaupp> aatch: https://github.com/mozilla/rust/pull/7050 r?
[06:44:03] <strcat> aatch: s/love/rewrite/
[06:44:09] <strcat> it's full of copies, etc.
[06:44:19] <aatch> strcat, its full of @~str
[06:44:26] <strcat> aatch: yep just delete it and make a new one
[06:44:31] <strcat> :D
[06:44:36] <strcat> that's what I did with treemap.
[06:44:43] <strcat> it used to be unbalanced *and* used @
[06:44:45] <strcat> how great
[06:44:47] <strcat> and did copies
[06:44:54] <strcat> and didn't have a remove fn :S
[06:45:09] <strcat> although it did have the advantage of being like 15 lines of code
[06:45:17] <dbaupp> :( I broke hashmaps
[06:45:20] * dbaupp fixes them
[06:45:51] <aatch> strcat, lol.
[06:46:06] <aatch> I think implementing a proper rope would actually make this code /shorter/
[06:47:04] <dbaupp> aatch: thanks!
[06:47:13] *** Joins: pyrac (pyrac@29E99D66.73C89388.AD05C589.IP)
[06:47:29] <dbaupp> aaah, null-asymmetry...
[06:51:01] *** Quits: dbaupp (Thunderbir@moz-C6B1454A.lns20.syd7.internode.on.net) (Ping timeout)
[06:52:53] <aatch> Luqman, well, I've managed to speed up rray by 15%
[06:55:51] *** Joins: z0w0 (zack@FDF4EF6A.2CA5CD8.5F93A189.IP)
[06:57:28] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[06:59:01] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Client exited)
[07:00:36] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[07:02:34] *** Joins: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com)
[07:04:01] *** Quits: k00mi (koomi@moz-202752AD.pools.arcor-ip.net) (Ping timeout)
[07:05:07] <strcat> oh great
[07:05:15] <strcat> the pretty tests hit the stack canary too now
[07:05:23] <strcat> I think something is srsly wrong
[07:05:47] <strcat> ;[
[07:06:00] * strcat tries with RUST_THREAD=1
[07:12:13] *** Quits: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[07:13:32] *** Joins: doener (doener@moz-121949B3.unitymediagroup.de)
[07:14:54] *** Joins: dbaupp (Thunderbir@moz-73E90475.lns20.syd6.internode.on.net)
[07:16:10] *** Quits: brson (brson@72B1AFF8.AD1E507F.3688B332.IP) (Quit: leaving)
[07:19:00] <aatch> Shit.
[07:19:07] <aatch> I can't use Cell
[07:19:20] <aatch> because take() is a trait method
[07:19:24] <aatch> on iterator
[07:19:32] <aatch> and also a method on Cell
[07:19:54] <aatch> and it finds the method first.
[07:20:07] <aatch> then complains theres impl of the trait for Cell
[07:21:02] *** Joins: fabiand (fabiand@10B22D2A.3A27401E.16E13E53.IP)
[07:21:43] *** Joins: ghrust (ghrust@C621748.6A2AE50.F3114085.IP)
[07:21:43] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/myIWRg
[07:21:43] *** Parts: ghrust (ghrust@C621748.6A2AE50.F3114085.IP) ()
[07:22:19] <dbaupp> aatch: I think strcat's renamed it in his latest pull
[07:22:19] <kimundi> aatch.: I have a branch where i renamed cell.take to cell.take_out because of that issue
[07:22:31] <strcat> dbaupp: nope
[07:22:37] <dbaupp> strcat: oh
[07:22:46] <dbaupp> kimundi's solution is good
[07:22:48] <strcat> dbaupp: oh you mean not landed yet
[07:22:55] <dbaupp> strcat: yeah
[07:22:55] <strcat> aatch: I renamed it to take_
[07:23:05] <strcat> aatch: it's a bug though.
[07:23:13] <aatch> I gathered
[07:23:20] <strcat> aatch: Cell isn't an Iterator impl, obviously :)
[07:23:32] <strcat> horrid buggy
[07:23:35] <strcat> makes generic impls awful
[07:23:39] <aatch> it should at least look at the impl methods first.
[07:23:42] <strcat> conflict with all the things ;\
[07:23:51] <mcpherrin>  /13
[07:23:53] <mcpherrin> oops
[07:23:53] <strcat> aatch: it thinks generic impls conflict with all types
[07:23:54] <kimundi> strcat: so you renamed it after all? :p
[07:24:04] <strcat> kimundi: yep I got pissed and renamed it
[07:24:07] <strcat> and any -> any_
[07:24:27] <strcat> can be renamed back when that bug is fixed ;p
[07:24:40] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[07:24:40] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/X6l8mA
[07:24:40] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[07:24:42] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[07:24:42] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/PYLDhg
[07:24:42] <ghrust> 13rust/06auto 147e6a594 15Huon Wilson: std: convert pow, hypot, atan2, log to take arguments by reference.
[07:24:42] <ghrust> 13rust/06auto 1419c31b6 15Huon Wilson: extra: implement .norm(), and Polar conversion functions for complex numbers....
[07:24:42] <ghrust> 13rust/06auto 14075da9c 15bors: auto merge of #7050 : huonw/rust/extra-complex-work, r=Aatch
[07:24:44] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[07:25:02] <kimundi> I could still make a pr for cell if it helps
[07:25:41] *** Quits: alisdair (textual@moz-EBE9F394.bchsia.telus.net) (Quit: Textual IRC Client: www.textualapp.com)
[07:25:55] * strcat needs someone to review that ;p
[07:29:49] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[07:31:41] <aatch> bjz, Luqman, https://github.com/luqmana/rray/pull/3
[07:32:14] <bjz> nice!
[07:32:39] <aatch> bjz, it's the little things
[07:32:51] <bjz> :)
[07:32:54] <aatch> someone on an older HDD will see even more improvement.
[07:33:13] <aatch> Also, pre-allocating the string helps.
[07:33:24] <aatch> or atleast mostly pre-allocating.
[07:34:14] <bjz> rusti: let mut s = ~""; s.push_str("hi"); s
[07:34:18] -rusti- ~"hi"
[07:35:11] <bjz> aatch: commented
[07:35:21] *** Quits: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Quit: Don't tell them I was here...)
[07:35:39] *** Quits: doomlord (doomlod@moz-8F385DB0.range109-153.btcentralplus.com) (Ping timeout)
[07:36:32] <aatch> huh, that didn't seem to work at some point.
[07:36:57] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[07:37:31] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Ping timeout)
[07:37:39] <aatch> bjz, fixed
[07:38:27] <bjz> why is std::extra needed?
[07:38:42] <bjz> sorry
[07:38:46] <bjz> extern extra
[07:39:25] <aatch> it is not... I was going to use extra::rope until i realized that it sucks
[07:39:57] <bjz> hehe :)
[07:40:17] <bjz> awesome
[07:41:06] <bjz> merged
[07:41:28] *** Quits: dualhbridge (dad@moz-9FEE6D3B.maine.res.rr.com) (Ping timeout)
[07:41:55] <aatch> making it parallel would take more work though.
[07:41:56] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Connection reset by peer)
[07:42:01] *** Joins: Palmik (palmik@moz-5CA3F354.pks.muni.cz)
[07:42:06] <bjz> aatch: there might also be improvements to be had in lmath too
[07:42:10] <bjz> aatch: yeah
[07:42:19] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[07:42:23] <bjz> aatch: it would be an interesting challenge though
[07:44:50] <aatch> since `Scene` seems to be read-only, it could probably be wrapped in a standard ARC
[07:44:59] <aatch> since that incurs no locking
[07:45:47] <aatch> bjz, btw, the answer is yes, you have been a bit too liberal with #[inline(always)]
[07:46:10] <bjz> aatch: could you help with fixing that?
[07:46:29] <bjz> aatch: I'd be interested to see what you do
[07:48:04] <aatch> bjz, well I'm heading off now, so I might look at it later. But I'd say change every single one to #[inline]
[07:48:11] <bjz> ok cool
[07:48:15] <bjz> thanks!
[07:48:24] *** kimundi is now known as zz_kimundi
[07:49:50] <aatch> General rule of thumb is to only have 'always' for looping higher-order fns
[07:49:58] <aatch> so iterators, maps etc.
[07:50:11] <aatch> because they play havoc with LLVM's inliner
[07:50:43] <bjz> cool
[07:50:49] <strcat> aatch: well iterators shouldn't be higher-order fns ;p
[07:50:59] <aatch> strcat, you know what I mean.
[07:51:03] * strcat does
[07:51:09] *** aatch is now known as aatch|gone
[07:51:14] *** Quits: thou (thou@moz-1C1CA9F7.fasttrackcomm.net) (Input/output error)
[07:51:52] *** Quits: oxide (Mibbit@993DE0B4.AA18ECD0.580BDDEE.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[07:52:15] <aatch|gone> bjz, just quickly, I'd be interested to know what effect it has on compile time and runtime code.
[07:52:43] *** Joins: noam_ (noam@F6B530A7.720527A7.416762B.IP)
[07:52:52] *** Joins: Blei (philipp@moz-96D25F7A.cust.bluewin.ch)
[07:53:19] *** Quits: noam (noam@F6B530A7.720527A7.416762B.IP) (Ping timeout)
[07:53:29] *** Quits: noam_ (noam@F6B530A7.720527A7.416762B.IP) (Connection reset by peer)
[07:53:40] *** Joins: noam_ (noam@F6B530A7.720527A7.416762B.IP)
[07:57:05] *** Joins: true_droid (Adium@moz-123FD9B8.beck.volia.net)
[08:01:10] *** Joins: dualhbridge (dad@moz-9FEE6D3B.maine.res.rr.com)
[08:03:01] *** Quits: dualhbridge (dad@moz-9FEE6D3B.maine.res.rr.com) (Ping timeout)
[08:07:12] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[08:07:30] *** zz_kimundi is now known as kimundi
[08:08:09] *** Joins: SimonSapin (simon@88F51059.F3BBB17D.144F44FA.IP)
[08:09:16] *** Joins: pascal (pascal@moz-3A678551.pascalj.de)
[08:10:35] *** Quits: jdm (jdm@DB05BBF2.BB1F48F2.971E19F6.IP) (Ping timeout)
[08:11:01] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[08:13:22] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[08:14:14] *** Joins: Nisstyre (wes@moz-FD86289.netflash.net)
[08:15:44] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[08:15:44] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/PYLDhg
[08:15:44] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[08:21:23] <steveklabnik> r? https://github.com/graydon/rust-www/pull/5
[08:21:29] <steveklabnik> :)
[08:23:52] *** Joins: donri (dag@moz-9BB61102.tbcn.telia.com)
[08:28:06] *** Quits: fabiand (fabiand@10B22D2A.3A27401E.16E13E53.IP) (Ping timeout)
[08:28:48] *** Joins: fabiand (fabiand@10B22D2A.3A27401E.16E13E53.IP)
[08:33:12] *** Joins: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP)
[08:37:33] *** Quits: devbug (quassel@moz-E1DE087C.bchsia.telus.net) (Client exited)
[08:44:58] *** Joins: dualhbridge (dad@moz-9FEE6D3B.maine.res.rr.com)
[08:56:18] *** Joins: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net)
[08:57:22] *** Joins: _1126 (1126@moz-83D60E55.lileth.net)
[08:57:24] *** Joins: mindbound (Mibbit@6EB9D10.20CC70E6.92EB3D3E.IP)
[08:57:43] *** Quits: steveklabnik (steveklabn@moz-C3166165.hsd1.ca.comcast.net) (Ping timeout)
[08:58:55] *** Joins: jaen (jaen@82FFD77.C79D1C03.43DC2829.IP)
[08:59:04] *** Joins: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP)
[08:59:35] *** Quits: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP) (Quit: WeeChat 0.4.2-dev)
[08:59:54] *** Quits: _1126 (1126@moz-83D60E55.lileth.net) (Quit: leaving)
[09:00:16] <mindbound> Greetings. Suppose I tried implementing dependent types (think Agda, ATS) on Rust. Would that even be feasible (i.e. is it worth trying) and what could be a good place to start? I'm thinking an external library since I doubt that you need this in the default Rust packaging.
[09:00:43] <Yoric> Implementing dependent types as a library?
[09:00:48] <Yoric> As a compiler library, you mean?
[09:00:51] <mindbound> Yes.
[09:01:37] <Yoric> I haven't followed recent versions of Rust closely enough, so I cannot reply to the technical question.
[09:01:42] *** Quits: jaen (jaen@82FFD77.C79D1C03.43DC2829.IP) (Ping timeout)
[09:01:45] *** Joins: wilsonk-laptop (kvirc@moz-39EFBFC2.cg.shawcable.net)
[09:01:49] *** Joins: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP)
[09:01:55] <Yoric> But it would certainly be fun to try a "DRust" :)
[09:02:05] *** Quits: wilsonk|2 (kvirc@moz-39EFBFC2.cg.shawcable.net) (Ping timeout)
[09:02:53] <Ralith> mindbound: it would be very hard to do, if at all possible
[09:03:09] <Ralith> you might be better off taking a language designed for DT and making it more suitable for use on systems task
[09:03:13] <Ralith> (see idris, for example)
[09:03:38] *** Joins: _1126 (1126@moz-83D60E55.lileth.net)
[09:03:42] *** Joins: jaen (jaen@82FFD77.C79D1C03.43DC2829.IP)
[09:05:08] *** Joins: EXetoC (ex@moz-2DBEB1E4.customer.t3.se)
[09:05:13] *** Joins: davbo (dave@moz-3FFA637C.oucs.ox.ac.uk)
[09:06:16] <mindbound> I'm using a lot of formal verification and theorem proving in my research and we are thinking about using Rust for production code (when that becomes relevant Rust might have become stable enough to do this), so I'm interested in augmenting the type system to make the transition from e.g. Coq or Agda easier.
[09:06:46] *** Joins: jorendorff (jorendorff@moz-AF5FD687.hsd1.tn.comcast.net)
[09:07:48] <mindbound> Technically we *could* use some of the already existing Haskell-esque languages but they seem to be... not exactly on-par performance-wise and pure functional programming, although interesting and relevant theoretically, can be a lot of PITA when writing large amounts of practical code/.
[09:08:21] <Yoric> Couldn't you extract Rust programs from Coq proofs?
[09:08:49] *** Joins: orshem (orshem@19491716.F0FDCE77.E3D28531.IP)
[09:09:33] *** Quits: jaen (jaen@82FFD77.C79D1C03.43DC2829.IP) (Ping timeout)
[09:10:10] *** Joins: novabyte (Instantbir@moz-3E0F9699.cable.virginmedia.com)
[09:10:11] *** Joins: jaen (jaen@82FFD77.C79D1C03.43DC2829.IP)
[09:11:42] *** Quits: jorendorff (jorendorff@moz-AF5FD687.hsd1.tn.comcast.net) (Ping timeout)
[09:11:55] <mindbound> That would probably mean augmenting Coq itself (since its built-in extraction mechanism supports only ML and Haskell, AFAIR) but yeah, I guess I could look into that.
[09:13:34] *** Quits: sk (sk@61A494B3.BA40E8A.AAC02D62.IP) (Quit: Leaving)
[09:14:22] <Ralith> mindbound: have you looked at idris? Support for large amounts of practical code and good performance are design goals.
[09:14:49] <Ralith> and optimizations are likely to be easier than leveraging DT into rust
[09:15:14] *** Joins: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP)
[09:17:38] *** Quits: sankha93 (Instantbir@C37F5D63.1F4087EF.8B6C1D65.IP) (Ping timeout)
[09:22:11] *** Quits: vcl (chatzilla@741D4FEA.76F9E272.DA40C4B3.IP) (Ping timeout)
[09:22:35] <mindbound> I haven't yet, will do. The first impression is somewhat weird (drags along the Haskell ecology, compiles to some kind of intermediate language that generates C code) and FFI seems to be rather lacking. Other than that, thank you, will consider that as an alternative.
[09:23:53] *** Joins: vcl (chatzilla@741D4FEA.76F9E272.DA40C4B3.IP)
[09:27:04] <Ralith> mindbound: it sounds like you're loosely familiar with the previous major version. In the current version, the FFI is quite usable, its connections to haskell are mostly aesthetic (aside from having its compiler written in it), and codegen is directly to C by default. I've got a more or less complete LLVM codegen which I'm working to get merged in and further optimized as well.
[09:27:51] <Ralith> freenode #idris if you'd like to ask further questions, though I myself will be sleeping shortly
[09:28:25] <mindbound> I see. Thank you, will try to familiarise with it more closely.
[09:28:36] *** Joins: mindginative (mindginati@moz-D5A0DD8.dsl.dyn.ihug.co.nz)
[09:30:36] *** Joins: sankha93 (Instantbir@85AE4D1B.56EC8A95.8B6C1D65.IP)
[09:40:07] *** Joins: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net)
[09:45:55] *** Joins: victorporof (victorporo@D4D7A384.56056C9.D111398B.IP)
[09:51:08] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[09:58:45] *** Quits: sankha93 (Instantbir@85AE4D1B.56EC8A95.8B6C1D65.IP) (Ping timeout)
[09:59:15] *** kimundi is now known as zz_kimundi
[10:00:54] *** Quits: mindginative (mindginati@moz-D5A0DD8.dsl.dyn.ihug.co.nz) (Quit: brb)
[10:03:53] *** zz_kimundi is now known as kimundi
[10:04:42] <bjz> Ralith: heyy, stealing our users are you? :D
[10:05:16] * bjz kids :)
[10:05:52] *** Joins: sankha93 (Instantbir@85AE4D1B.56EC8A95.8B6C1D65.IP)
[10:06:36] *** Quits: heftig (heftig@moz-F25B4C08.dip0.t-ipconnect.de) (Ping timeout)
[10:07:16] *** Quits: Palmik (palmik@moz-5CA3F354.pks.muni.cz) (Ping timeout)
[10:07:19] <Ralith> bjz: :D
[10:07:33] <Ralith> bjz: I like to think of it as promoting diversity.
[10:09:39] <orshem> Does Rust have task globals?
[10:10:09] <dbaupp> orshem: yes
[10:10:18] <orshem> Also task constructor and destructor?
[10:10:19] <dbaupp> std::task_local
[10:10:31] <dbaupp> (or core::task_local, if you're on 0.6)
[10:10:46] <orshem> dbaupp: thanks. I'm on incoming
[10:10:50] *** Joins: heftig (heftig@moz-F83F2908.dip0.t-ipconnect.de)
[10:10:51] <dbaupp> hm, actually ...::local_data
[10:11:24] <dbaupp> What do you mean by task {con,de}structor?
[10:11:41] *** Parts: artagnon (uid7560@moz-A588D045.irccloud.com) ()
[10:11:45] <orshem> I want to define a unique global. then it should be possible for me to borrow it whenever I want all throughout the task?
[10:12:47] <dbaupp> oh, yes. the normal method is to have a 'get_data' function that either retrieves the global from TLS (task local storage) or creates it and inserts it (if it's not already there)
[10:12:56] <orshem> dbaupp: I mean a function that runs when the task end even if it was aborted
[10:13:08] <orshem> kind of like finally for tasks
[10:13:11] <dbaupp> orshem: oh, not sure about that last one
[10:13:23] *** Parts: dualhbridge (dad@moz-9FEE6D3B.maine.res.rr.com) ()
[10:13:46] *** Joins: dualhbridge (dad@moz-9FEE6D3B.maine.res.rr.com)
[10:14:07] <dbaupp> orshem: an example of using a unique global in TLS: https://github.com/mozilla/rust/blob/incoming/src/libstd/rand.rs#L837
[10:14:53] <orshem> is the @@ neccesary?
[10:15:02] <orshem> it hurts the eye :)
[10:16:56] <orshem> I don't understand the prolifiration of @ inside rustc. I read on the web that you plan to do away with the gc pointer in most cases but it appears that rustc can't manage without it :)
[10:17:08] <engla> it's not that much
[10:17:33] <orshem> when I try to use only unique pointers with references the borrow checker is most impolite
[10:17:39] *** Joins: Palmik (palmik@moz-5CA3F354.pks.muni.cz)
[10:18:07] *** Quits: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP) (Ping timeout)
[10:19:01] <orshem> There's a dearth of examples of correct usage of idiomatic Rust
[10:19:15] <dbaupp> orshem: the problem with rustc is it's been around for a long time... and so isn't example of good rust.
[10:19:22] <orshem> probably because it is a moving target :)
[10:19:33] <dbaupp> (so most of the @'s are from a time when there wasn't much choice about it)
[10:19:36] <engla> idiomatic rust is changing with the language
[10:19:43] *** Quits: Nisstyre (wes@moz-FD86289.netflash.net) (Quit: Leaving)
[10:22:45] *** Joins: sk (sk@44FB31D1.A56C954C.78DD174B.IP)
[10:24:34] <engla> there needs to be a new snapshot after the memory usage fix
[10:25:18] *** Joins: Enkrod (Thunderbir@moz-B8EF99D1.dip0.t-ipconnect.de)
[10:25:27] <Enkrod> Hey guys
[10:25:38] <dbaupp> engla: yeah, aatch|gone was pushing to get the tree green for a snapshot... I don't think it's been very successful :(
[10:25:57] <EXetoC> Ralith: diversity? no need for that when we hit 1.0!
[10:26:50] <engla> ok
[10:27:31] *** Joins: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP)
[10:27:31] *** Quits: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP) (Z:lined (Open Proxy found on your host. Please visit www.blitzed.org/proxy?ip=115.68.131.49 for more information.))
[10:27:38] <Enkrod> I'm trying to setup rust under msys and am having trouble. Someone here can show me the way around?
[10:29:28] <dbaupp> Enkrod: what sort of trouble? :)
[10:30:57] <Ralith> EXetoC: save for those features postponed to 2.0, anyway
[10:32:57] <Enkrod> i'm following the "Note getting started developing Rust" and have arrived at https://github.com/mozilla/rust/wiki/Note-getting-started-developing-Rust#downloading-and-building-rust
[10:32:57] <Enkrod> But when i go 
[10:32:57] <Enkrod> cd rust
[10:32:57] <Enkrod> ./configure
[10:32:57] <Enkrod> it tells me error: needed but unable to find any of: CFG_PYTHON python2.7 python 2.6 python2 python
[10:33:50] <Enkrod> i installed python 2.7 as told to C:\Python27 and now i don't know how to solve this :/
[10:34:05] <dbaupp> oh. you have got python installed...
[10:34:11] <dbaupp> xenocons: ping
[10:34:20] <orshem> in msys run python see if it recognize it
[10:34:29] <orshem> Enkrod: ^
[10:35:13] <Enkrod> command not found
[10:35:18] <orshem> you can try defining  CFG_PYTHON and pointing it to your python installation
[10:37:09] <Enkrod> Allright I'll see if that solves it. Thank you guys I'll be back when I hit a wall again :)
[10:40:38] <xenocons> dbaupp: pong
[10:40:55] <xenocons> Enkrod: try adding python27 into your path
[10:41:05] <dbaupp> xenocons: was just wondering if you can help Enkrod here :)
[10:41:39] <xenocons> go control panel>System>Advanced System Settings>Environment Variables
[10:41:57] <Enkrod> I should have spend more time learning my way around linux... thank you xenocons
[10:42:07] <xenocons> oh
[10:42:10] <xenocons> not windows?
[10:42:19] <Enkrod> no, yes, it is win7
[10:42:23] <xenocons> ah okay
[10:42:31] <Enkrod> i meant the shell damnit
[10:42:42] <xenocons> so go to there and add in C:\python27\ into the path
[10:43:14] <Enkrod> thats what happens when a webdeveloper tries his hand in real programming X)
[10:43:31] *** Quits: sankha93 (Instantbir@85AE4D1B.56EC8A95.8B6C1D65.IP) (Ping timeout)
[10:43:43] <xenocons> hehe, python + PATH has been a constant nightmare (not in just Rust)
[10:43:55] <xenocons> it seems the windows python 27 installer doesnt really drop it into PATH
[10:45:14] <Enkrod> that did the trick, thank you so much!
[10:45:24] <xenocons> np, i struggled with it too
[10:48:37] <Enkrod> Whuh... time to learn again. I am soooo looking forward to Firefox OS
[10:48:53] *** Joins: sankha93 (Instantbir@85AE4D1B.56EC8A95.8B6C1D65.IP)
[10:49:05] *** Joins: MaikKlein (maik@moz-C3CB0EB4.dip0.t-ipconnect.de)
[10:49:11] *** Joins: Sodel_the_V (user@moz-853663E1.va.shawcable.net)
[10:49:59] <xenocons> is this a mobile\tablet thing?
[10:50:29] <bjz> orshem: they would very much like TLS not to be reliant on @
[10:50:40] <bjz> orshem: 'they' == the devs
[10:51:22] *** Quits: devinus (devinus@DAEC7122.372FE49C.29F95E0F.IP) (Quit: Computer has gone to sleep.)
[10:51:41] *** Quits: Sodel_the_V (user@moz-853663E1.va.shawcable.net) (Quit: Eaten by a grue)
[10:52:06] <bjz> Ralith: +1 to linguistic diversity :P
[10:52:13] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[10:52:59] <orshem> bjz: Why is it reliant on @? Can't it be ~ at declaration and & everywhere else?
[10:54:27] <orshem> so long as the pointer won't change, only the data
[10:54:35] <bjz> orshem: no idea
[10:54:41] *** Joins: Sodel_the_V (user@moz-853663E1.va.shawcable.net)
[10:55:20] <bjz> as has been said in the scrollback, there was a time when @ was the only thing that really worked properly
[10:55:31] <bjz> not sure if it was to do with that
[10:55:40] <Enkrod> xenocons: It's more like a Webtechnology-Becomes-OS-Thing that has the potential to fully integrate the Web and everything on a mobile device. There may even be additional uses with Desktop-PC, I'm not quite sure about that thou
[10:55:46] <bjz> (it was before my time in Rust land)
[10:56:32] <bjz> orshem: there are many things in the rust source that need modernising
[10:56:49] <bjz> we're still working out how best to use the language :)
[10:56:56] <orshem> bjz: thanks. nice to get a look behind the scenes :)
[10:57:45] *** Quits: MaikKlein (maik@moz-C3CB0EB4.dip0.t-ipconnect.de) (Ping timeout)
[10:58:50] <Enkrod> Alright, gotta go tend to the bossman. CYA
[10:59:18] *** Quits: Enkrod (Thunderbir@moz-B8EF99D1.dip0.t-ipconnect.de) (Quit: Enkrod)
[10:59:21] *** Quits: sankha93 (Instantbir@85AE4D1B.56EC8A95.8B6C1D65.IP) (Ping timeout)
[10:59:57] *** Quits: fabiand (fabiand@10B22D2A.3A27401E.16E13E53.IP) (Ping timeout)
[11:00:42] *** Joins: fabiand (fabiand@10B22D2A.3A27401E.16E13E53.IP)
[11:03:22] *** Joins: sankha93 (Instantbir@85AE4D1B.56EC8A95.8B6C1D65.IP)
[11:03:59] <cmr> bjz: you asked if I was the this week in rust guy, and I said "Yes, why?:
[11:04:45] <bjz> cmr: ohh, yeah just letting you know, lmath is actually fixed now
[11:04:56] <bjz> :P
[11:05:00] <cmr> bjz: Oh, sweet! :)
[11:05:18] <bjz> (hopefully it works for abit longer than the last time)
[11:05:21] <bjz> :P
[11:05:31] *** Quits: fabiand (fabiand@10B22D2A.3A27401E.16E13E53.IP) (Ping timeout)
[11:06:00] *** Quits: mindbound (Mibbit@6EB9D10.20CC70E6.92EB3D3E.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[11:08:52] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[11:10:31] *** Joins: hoelzro (hoelzro@moz-937642A5.ro)
[11:11:44] <hoelzro> hi everyone, this is a cross post from freenode's rust channel, but I wrote the following code as an experiment:  https://gist.github.com/hoelzro/5755165
[11:12:15] *** Joins: MaikKlein (maik@moz-C3CB0EB4.dip0.t-ipconnect.de)
[11:12:15] <hoelzro> what would be the proper way to allow mod2::bar to call mod1::foo?
[11:13:33] <cmr> hoelzro: pub mod mod1, use mod1
[11:13:34] <cmr> g2g
[11:13:39] <hoelzro> I see
[11:13:47] <dbaupp> rusti: ::std::str::Ã¶Ã¤Ã¥
[11:13:50] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/cfAD
[11:14:00] <hoelzro> but why can I use mod1::foo from fn main, then?
[11:17:02] <Blei> hoelzro: mod1 and mod2 are private modules that are only visible in the top-module of this file. main() is also in that top module, bar isn't
[11:17:05] <Blei> iiuc
[11:17:11] <hoelzro> I see
[11:17:16] <hoelzro> that's kinda what I thought
[11:18:33] <dbaupp> strcat: str.substr is sufficiently confusing that it appears *every* use of it in the code base is incorrect
[11:18:49] <dbaupp> strcat: lucky I'm deleting it, I guess
[11:19:53] <Blei> hoelzro: please disregard what i said, apparently i don't understand correctly
[11:20:03] <hoelzro> heh, ok
[11:20:18] <Blei> in fact, you can make the current code run by changing the invocation of foo to `::mod1::foo()`
[11:20:46] <Blei> or `super::mod1::foo()`
[11:20:55] <hoelzro> I see
[11:21:13] <hoelzro> would you mind providing a link to the section in the manual describing this?
[11:21:25] <Blei> where beginning with `::` forces lookup starting at the global module root, and `super::` start lookup at the parent module
[11:21:27] <hoelzro> I wasn't able to find it, but I'll admit my search was probably not the most thorough
[11:21:40] <Blei> i'm not sure this is documented
[11:22:04] *** Quits: mark_edward (quassel@moz-6B90E517.rh.uchicago.edu) (Client exited)
[11:22:31] *** Joins: mark_edward (quassel@moz-6B90E517.rh.uchicago.edu)
[11:23:01] <Blei> i can't find it in the manuals either
[11:23:31] <mark_edward> is there a known issue with rustc foo.rc -Z debug-info?
[11:24:44] <Blei> mark_edward: https://github.com/mozilla/rust/issues/6814
[11:24:46] *** Joins: noj (jon@moz-D51AE9DE.swym.se)
[11:24:46] <dbaupp> mark_edward: yes
[11:24:59] <mark_edward> ok cool, just wondering
[11:26:39] *** Quits: MaikKlein (maik@moz-C3CB0EB4.dip0.t-ipconnect.de) (Ping timeout)
[11:28:11] *** Joins: k00mi (koomi@moz-202752AD.pools.arcor-ip.net)
[11:32:06] *** Joins: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net)
[11:37:22] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[11:38:07] *** Quits: solancile (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net) (Ping timeout)
[11:39:17] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[11:42:29] *** Joins: doomlord (doomlod@moz-8F385DB0.range109-153.btcentralplus.com)
[11:44:18] *** Quits: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net) (Quit: msingle)
[11:53:13] <orshem> "rustc test.rs --test" output nothing to std even though tst.rs has some #[test] functions
[11:53:27] <orshem> sorry test.rs
[11:53:44] <orshem> am I using the wrong syntax
[11:53:59] <orshem> I'm not getting an error, just no output
[11:54:25] <dbaupp> orshem: that just compiles the test executable
[11:54:52] <dbaupp> to run the tests, you need to run the executable it creates
[11:55:03] <dbaupp> (you can also use 'rust', e.g. 'rust test test.rs')
[11:55:50] <EXetoC> and #[test] in impls are ignored last time I checked
[11:56:14] *** kimundi is now known as zz_kimundi
[11:57:10] <orshem> dbaupp EXetoC: thanks
[12:02:05] *** zz_kimundi is now known as kimundi
[12:06:20] *** Quits: sankha93 (Instantbir@85AE4D1B.56EC8A95.8B6C1D65.IP) (Quit: Instantbird 1.4 -- http://www.instantbird.com)
[12:06:37] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Quit: Computer has gone to sleep.)
[12:07:22] *** Joins: fabiand (fabiand@moz-11409B54.adsl.alicedsl.de)
[12:08:54] <mark_edward> can a stuct have mutable member?
[12:09:18] <dbaupp> mark_edward: only if it has a layer of indirection via &mut or @mut
[12:09:44] <mark_edward> what about if it is a raw pointer? is there *mut ?
[12:13:11] *** Joins: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net)
[12:13:34] <dbaupp> oh, yes, that works too
[12:13:44] *** Joins: HollyRain (HollyRain@moz-50A83091.dyn.user.ono.com)
[12:13:50] *** Quits: HollyRain (HollyRain@moz-50A83091.dyn.user.ono.com) (Quit: HollyRain)
[12:14:46] <mark_edward> ok cool, thanks
[12:17:20] *** Quits: Blei (philipp@moz-96D25F7A.cust.bluewin.ch) (Quit: WeeChat 0.4.1)
[12:18:20] *** Joins: maxli (maxli@F2D29657.F60B0462.67AC9B1.IP)
[12:18:45] <cmr> mark_edward: keep in mind you can have mutable structs without that
[12:19:02] <mark_edward> yeah I know. just need one mutable field
[12:19:05] <cmr> ok
[12:19:07] <cmr> :)
[12:19:26] <mark_edward> it's private anyway, the field. thanks for the advice though!
[12:20:59] <dbaupp> cmr: what do you mean?
[12:21:11] <dbaupp> cmr: (oh, doesn't matter, I misread.)
[12:28:54] *** Quits: SimonSapin (simon@88F51059.F3BBB17D.144F44FA.IP) (Ping timeout)
[12:29:29] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[12:32:07] *** Joins: SimonSapin (simon@88F51059.F3BBB17D.144F44FA.IP)
[12:32:54] *** Quits: novabyte (Instantbir@moz-3E0F9699.cable.virginmedia.com) (Quit: bye bye)
[12:34:37] *** Quits: SimonSapin (simon@88F51059.F3BBB17D.144F44FA.IP) (Ping timeout)
[12:37:28] *** Joins: SimonSapin (simon@88F51059.F3BBB17D.144F44FA.IP)
[12:38:12] <jensnockert> bjz: Why do you need pub fns in an impl? Isn't it enough to mark them pub in the trait?
[12:40:00] <doomlord> can it say 'pub impl {....}'
[12:40:55] <orshem> doomlord: that feature is deprecated
[12:41:05] <orshem> or so I remember reading
[12:41:08] <jensnockert> Yes.
[12:41:08] <doomlord> oh :(
[12:41:21] <jensnockert> But isn't the impl pub by default if the trait it implements is?
[12:41:40] <doomlord> if that was the case then great
[12:41:50] <orshem> to streamline the code so there's only one place to look when you want to find out if something is pub or priv
[12:42:02] <jensnockert> I have always coded like that, and it seems to workâ€¦
[12:42:11] <jensnockert> May just be my imagination thoughâ€¦
[12:42:46] *** Quits: Palmik (palmik@moz-5CA3F354.pks.muni.cz) (Ping timeout)
[12:43:31] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[12:45:27] *** Joins: Palmik (palmik@moz-5CA3F354.pks.muni.cz)
[12:45:58] *** Joins: sankha93 (Instantbir@83FDCCBB.7C356C25.8B6C1D65.IP)
[12:50:45] <orshem> I managed to hang rustc...
[12:51:20] <orshem> inside test.rs I added as the first line "mod test;"...
[12:53:20] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[12:53:50] <orshem> Github search has improved... there is already an issue for this #4338
[12:54:49] *** Joins: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP)
[12:54:49] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/EmflKw
[12:54:49] *** Parts: ghrust (ghrust@FD7BC443.6A2AE50.F3114085.IP) ()
[12:54:51] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[12:54:51] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/vU_l4w
[12:54:51] <ghrust> 13rust/06auto 141ac90bb 15Philipp BrÃ¼schweiler: lexer: show correct span on unrecognized token start...
[12:54:51] <ghrust> 13rust/06auto 14278b3be 15Philipp BrÃ¼schweiler: decoder: better error message when failing to look up an id
[12:54:53] <ghrust> 13rust/06auto 143f62f9b 15Philipp BrÃ¼schweiler: ty: several small fixes to is_instantiable...
[12:54:55] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[12:57:58] *** Quits: Sodel_the_V (user@moz-853663E1.va.shawcable.net) (Ping timeout)
[12:58:15] *** Joins: Sodel_the_V (user@moz-853663E1.va.shawcable.net)
[13:00:06] *** Quits: Sodel_the_V (user@moz-853663E1.va.shawcable.net) (Quit: Eaten by a grue)
[13:02:42] *** Joins: dylukes (dylukes@moz-B5418F79.hsd1.pa.comcast.net)
[13:05:04] *** Quits: zheng_li (zheng_li@moz-D6711E9E.xenplanet.org) (Ping timeout)
[13:08:34] *** Quits: kemurphy (kemurphy@moz-7332FD74.hsd1.pa.comcast.net) (Ping timeout)
[13:08:43] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Ping timeout)
[13:11:53] *** Joins: kemurphy (kemurphy@moz-7332FD74.hsd1.pa.comcast.net)
[13:14:02] *** Joins: zheng_li (zheng_li@moz-D6711E9E.xenplanet.org)
[13:14:50] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[13:16:13] <bjz> jensnockert: that feature is deprecated
[13:16:25] <jensnockert> Why?
[13:16:38] <bjz> jensnockert: visibility must now be specified at the item level
[13:16:47] <jensnockert> That is super-sillyâ€¦
[13:17:55] <bjz> jensnockert: well, it was kinda wierd that only type impls could have the visibility qualifier, and not trait impls
[13:18:16] <bjz> at also is in keeping with being more explicit
[13:18:22] <jensnockert> Yes, but why cannot trait impls inherit visibility?
[13:18:39] <jensnockert> As in, why do you now have to type pub fn in trait impls?
[13:19:35] <bjz> say, if you're in the middle of a trait impl, reading along, it's better to be able to look to the method, as opposed to the impl
[13:19:37] <bjz> but yeah
[13:19:48] <bjz> I don't know the real reasons
[13:20:00] <bjz> that would be a question for pcwalton
[13:21:10] <bjz> jensnockert: https://github.com/mozilla/rust/wiki/Note-style-guide#impls
[13:21:42] <bjz> jensnockert: it was in the style guide already
[13:22:02] <bjz> "Avoid pub impl Type { ... }. Instead put pub modifiers on the method names. This allows a reader to immediately tell which methods are public at a glance."
[13:22:22] <jensnockert> Oh well, I still find it weird.
[13:22:23] <orshem> I get "error: Illegal anonymous lifetime: anonymous lifetimes are not permitted here"
[13:22:36] <bjz> orshem: gist?
[13:22:36] <jensnockert> Maybe I am too used to public-by-default.
[13:22:43] <orshem> But I can't create an explicit lifeline either
[13:23:03] <dbaupp> orshem: you probably need `'self`
[13:23:16] <dbaupp> orshem: is it a type definition?
[13:23:24] <orshem> dbaupp: yes
[13:23:32] <bjz> jensnockert: yeah, I'm not troubled. I think it's in line with the 'immutable by default' thing
[13:23:34] <dbaupp> with a &str or &[] in it?
[13:23:40] <orshem> yes
[13:24:03] <bjz> orshem: we really need a gist to be of assistance
[13:24:07] <jensnockert> bjz: Could also be that for me, private methods in Traits make minimal sense.
[13:24:42] <dbaupp> jensnockert: they might make more sense if default methods worked (but, admittedly, not much more)
[13:24:52] <orshem> bjz jensnockert: it will take me a minute. I don't have a github account so I'm looking for a free paste
[13:25:07] <dbaupp> orshem: you can use gist.github.com without an account
[13:25:08] <jensnockert> dbaupp: Yeah, possibly with default methods.
[13:26:57] <jensnockert> bjz: Just so you know, I'll rewrite your remove-freestanding-functions patch so we use num::min etc. everywhere instead.
[13:27:05] <jensnockert> And see if that actually works.
[13:27:25] <bjz> yeah, I should close that PR
[13:27:36] *** Joins: cowboyd (cowboyd@1D8844A7.1B729417.CEE440B6.IP)
[13:28:10] <orshem> jensnockert dbaupp: https://gist.github.com/anonymous/5756798
[13:28:14] <orshem> thanks
[13:28:47] <jensnockert> orshem: The problem is the & in next.
[13:28:49] <dbaupp> orshem: hmmm, borrowed pointers are tricky with datastructures. what are you trying to make?
[13:29:03] <jensnockert> You need to specify that the struct outlives next.
[13:29:16] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[13:29:38] <orshem> dbaupp: but the easy way to learn a language without a large library is to recreate data structures :)
[13:29:58] <orshem> I'm trying to create a simple trie
[13:30:02] <dbaupp> orshem: you can stop the immediate error message via `struct Node<'self, V> { .. next: Option<&'self Node<V>>, children: Option<~Node<'self, V>> }`
[13:30:09] <orshem> using only ~ &
[13:30:13] <orshem> not @
[13:30:23] <dbaupp> what's 'next' for?
[13:30:37] *** Joins: Blub\w (wry@moz-54CAE90C.wireless.dyn.drei.com)
[13:31:23] <orshem> dbaupp: the next child of the parent node if it exist
[13:32:05] <dbaupp> oh.
[13:32:13] <dbaupp> so it's a linked list?
[13:32:58] <dbaupp> (i.e. a linked list of children)
[13:33:12] <orshem> dbaupp: http://en.wikipedia.org/wiki/Trie
[13:33:20] <orshem> I have to run
[13:36:57] *** Joins: saml (sam@moz-14C16814.cst.lightpath.net)
[13:41:32] *** Quits: jaen (jaen@82FFD77.C79D1C03.43DC2829.IP) (Ping timeout)
[13:44:07] *** Joins: Blei (philipp@moz-96D25F7A.cust.bluewin.ch)
[13:44:10] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[13:44:21] *** Joins: thou (thou@moz-1C1CA9F7.fasttrackcomm.net)
[13:48:11] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[13:49:39] <jensnockert> I'm getting make: *** No rule to make target `/Users/Jens/Code/Git/rust/src/libstd/std.rc', needed by `x86_64-apple-darwin/stage0/lib/rustc/x86_64-apple-darwin/lib/libstd.dylib'.  Stop. when trying to build incoming, something people recognize?
[13:50:22] <dbaupp> jensnockert: does running make a second time help?
[13:50:29] *** Joins: jed (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP)
[13:50:32] <jensnockert> I'll try.
[13:50:42] <jensnockert> Oh yes, it does.
[13:51:50] *** Joins: mje (Mibbit@moz-7F01A599.hsd1.pa.comcast.net)
[13:54:13] *** Joins: MaikKlein (maik@F02915A3.C3960D65.B166373C.IP)
[13:56:22] *** kimundi is now known as zz_kimundi
[13:57:25] <jensnockert> And you still cannot have multiple implementations of a generic function :(
[14:01:00] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[14:01:09] *** Joins: kermie (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP)
[14:03:57] *** Quits: kermie (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[14:04:17] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Quit: Leaving)
[14:04:20] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[14:05:03] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[14:06:23] *** Joins: lmandel (lmandel@F2D29657.F60B0462.67AC9B1.IP)
[14:07:01] *** Joins: skippydippy (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP)
[14:08:11] *** Quits: sankha93 (Instantbir@83FDCCBB.7C356C25.8B6C1D65.IP) (Ping timeout)
[14:08:30] *** Quits: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net) (Quit: msingle)
[14:08:56] *** Joins: sankha93 (Instantbir@83FDCCBB.7C356C25.8B6C1D65.IP)
[14:12:00] *** Quits: cowboyd (cowboyd@1D8844A7.1B729417.CEE440B6.IP) (Client exited)
[14:15:11] *** Joins: solancile (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net)
[14:15:47] *** Joins: novabyte (Instantbir@moz-3E0F9699.cable.virginmedia.com)
[14:16:22] <jensnockert> Also, lgamma must be seriously brokenâ€¦
[14:17:20] <dbaupp> jensnockert: ?
[14:17:40] <jensnockert> dbaupp: Unix lgamma should only take one param, http://pubs.opengroup.org/onlinepubs/009695399/functions/lgamma.html
[14:17:47] <jensnockert> Yet in Rust, it magically takes two.
[14:17:59] <dbaupp> ahahaha, yay?
[14:19:26] <mje> noob looking for real-world Rust code samples.  I know how to "Hello World" and calc fibonacci, but would love to see bigger examples of how people are using it for practical purposes.
[14:20:47] <mje> I found this which is concise enough and understandable: https://github.com/eevee/clio
[14:20:51] <mje> any other suggestions?
[14:21:36] <engla> there is no unification of copy and clone yet?
[14:21:51] <dbaupp> engla: not yet
[14:22:16] <engla> ok
[14:22:27] <dbaupp> mje: maybe https://github.com/Jeaye/q3
[14:22:51] <dbaupp> mje: (it's significantly more modern than clio, at least)
[14:25:21] *** Quits: lmandel (lmandel@F2D29657.F60B0462.67AC9B1.IP) (Connection reset by peer)
[14:27:01] *** Joins: lmandel (lmandel@F2D29657.F60B0462.67AC9B1.IP)
[14:27:53] <jed> when running a test, is there any way to expect the test to exit with fail!() rather than assert a value?
[14:28:51] *** Quits: ski (md9slj@moz-A8E54C8B.studat.chalmers.se) (Ping timeout)
[14:29:22] *** Joins: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net)
[14:29:45] *** Joins: victorporof_ (victorporo@D4D7A384.56056C9.D111398B.IP)
[14:30:10] <dbaupp> jed: #[should_fail]
[14:30:23] <jed> dbaupp: thanks :)
[14:31:06] *** Quits: victorporof (victorporo@D4D7A384.56056C9.D111398B.IP) (Ping timeout)
[14:31:38] *** Quits: rntz (rntz@moz-C76A8D96.sp.cs.cmu.edu) (Ping timeout)
[14:31:55] *** Joins: Jesin (Jessin_@moz-48B48C95.eecs.lehigh.edu)
[14:32:21] *** Joins: rntz (rntz@moz-C76A8D96.sp.cs.cmu.edu)
[14:34:39] *** Joins: Guest_ (textual@BBE7C46A.B4F11D08.8612FA94.IP)
[14:34:51] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[14:36:03] *** Joins: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com)
[14:37:44] <jensnockert> At least my stdlib builds now.
[14:38:30] <mje> dbaupp: wow, thanks!
[14:41:42] *** zz_kimundi is now known as kimundi
[14:44:45] <cmr> mje: bunch of code in extra is practical
[14:47:24] <mje> cmr: you mean extra in the std lib?
[14:47:25] *** Quits: KindOne (KindOne@moz-F9A4DD6A.dynamic.ip.windstream.net) (Ping timeout)
[14:47:55] <cmr> mje: yes
[14:48:09] <dbaupp> cmr: a lot of it is quite old though
[14:48:24] <mje> thanks, also found this which will be very helpful: https://github.com/mozilla/cargo-central/blob/master/packages.json
[14:48:39] <cmr> bjz: cargo doesn't exist anymore
[14:48:43] <cmr> erm, mje
[14:50:23] *** Quits: cscottnet (cscott@moz-2577C94A.net) (Ping timeout)
[14:50:27] <mje> oh
[14:50:36] <mje> it's hard to keep up...
[14:51:20] <jed> mje: I have been reading some of the code in extra for examples and I found them helpful
[14:51:52] *** Joins: KindOne (KindOne@moz-571E01D9.dynamic.ip.windstream.net)
[14:52:29] <jensnockert> And now extra too! \o/
[14:55:12] *** Quits: KindOne (KindOne@moz-571E01D9.dynamic.ip.windstream.net) (Ping timeout)
[14:56:30] *** Quits: fabiand (fabiand@moz-11409B54.adsl.alicedsl.de) (Quit: Verlassend)
[14:57:27] *** Joins: fabiand (fabiand@moz-11409B54.adsl.alicedsl.de)
[14:59:04] *** Joins: KindOne (KindOne@moz-AFDB893D.dynamic.ip.windstream.net)
[15:00:37] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Connection reset by peer)
[15:00:44] *** Quits: Guest_ (textual@BBE7C46A.B4F11D08.8612FA94.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[15:01:07] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[15:03:57] *** Joins: ghrust (ghrust@AD60B2E3.6A2AE50.F3114085.IP)
[15:03:57] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14743c3a3 to 14075da9c: 02http://git.io/N3iJvQ
[15:03:57] *** Parts: ghrust (ghrust@AD60B2E3.6A2AE50.F3114085.IP) ()
[15:03:58] *** Joins: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP)
[15:03:58] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/0w_Zsg
[15:03:58] <ghrust> 13rust/06auto 141ac90bb 15Philipp BrÃ¼schweiler: lexer: show correct span on unrecognized token start...
[15:03:58] <ghrust> 13rust/06auto 14278b3be 15Philipp BrÃ¼schweiler: decoder: better error message when failing to look up an id
[15:03:58] <ghrust> 13rust/06auto 143f62f9b 15Philipp BrÃ¼schweiler: ty: several small fixes to is_instantiable...
[15:04:00] *** Parts: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP) ()
[15:04:59] *** Joins: deepdog (deepdog@moz-490E834C.client.mchsi.com)
[15:05:32] *** Joins: Guest_ (textual@BBE7C46A.B4F11D08.8612FA94.IP)
[15:06:28] *** Joins: jdm (jdm@DB05BBF2.BB1F48F2.971E19F6.IP)
[15:06:29] *** Joins: ben (ben@moz-9E05E9C9.hfc.comcastbusiness.net)
[15:06:32] *** Parts: ben (ben@moz-9E05E9C9.hfc.comcastbusiness.net) ()
[15:07:02] *** Joins: Ben (Ben@moz-9E05E9C9.hfc.comcastbusiness.net)
[15:07:03] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Connection reset by peer)
[15:07:21] <jensnockert> I really wish there was a possibility of automagically casting from T to &T.
[15:07:29] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[15:07:34] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[15:09:01] <dbaupp> jensnockert: yeah... it does make non-copying/consuming code ugly
[15:09:27] <jensnockert> x.something(&1, &2) seems silly.
[15:09:50] <jensnockert> *especially silly.
[15:10:29] <dbaupp> yeah :(
[15:11:05] *** Quits: Guest_ (textual@BBE7C46A.B4F11D08.8612FA94.IP) (Quit: Textual IRC Client: www.textualapp.com)
[15:11:56] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Ping timeout)
[15:12:41] *** Joins: judder (maradukewa@85208D00.97F8E51D.E305BD61.IP)
[15:13:32] *** Quits: pyrac (pyrac@29E99D66.73C89388.AD05C589.IP) (Ping timeout)
[15:13:57] *** Joins: Guest_ (textual@BBE7C46A.B4F11D08.8612FA94.IP)
[15:14:18] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[15:14:59] *** Quits: KindOne (KindOne@moz-AFDB893D.dynamic.ip.windstream.net) (Ping timeout)
[15:15:03] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[15:16:06] *** Joins: Jessin (Jessin_@moz-48B48C95.eecs.lehigh.edu)
[15:16:27] *** Quits: Jessin (Jessin_@moz-48B48C95.eecs.lehigh.edu) (Quit: Leaving)
[15:18:35] <friggle> why is that silly?
[15:18:49] <friggle> explicit yes
[15:19:00] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[15:19:46] *** Quits: Guest_ (textual@BBE7C46A.B4F11D08.8612FA94.IP) (Quit: Textual IRC Client: www.textualapp.com)
[15:20:13] <dbaupp> friggle: it's just normally one would expect primitive numerical operations to not use references
[15:20:37] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[15:21:16] *** Joins: KindOne (KindOne@moz-6AB05B6C.dynamic.ip.windstream.net)
[15:21:36] <jensnockert> And since you can always convert T to &T, it is just random mumbo-jumbo I need to utter on every function invocation.
[15:24:27] <dbaupp> unfortunately, allowing it in general would make code harder to reason about. "does this move into the function, or is it just referenced?"
[15:26:37] <jensnockert> Not really.
[15:26:53] <jensnockert> Or maybe.
[15:26:57] <jensnockert> Still not worse than C.
[15:29:08] <jensnockert> Allowing it for constants seems obvious at least.
[15:30:43] <dbaupp> yes
[15:30:43] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Connection reset by peer)
[15:31:09] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[15:33:34] *** Joins: cscottnet (cscott@moz-2577C94A.net)
[15:35:21] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[15:35:25] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Quit: jaen)
[15:35:44] *** Joins: tikue (tkuehn@moz-CF8BEBEF.dia.static.qwest.net)
[15:35:53] *** Joins: RMF (RMF@moz-659583E0.dsl.telepac.pt)
[15:36:25] *** Joins: jaen (jaen@moz-606152AD.play-internet.pl)
[15:37:55] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[15:38:47] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[15:41:24] *** Quits: tikue (tkuehn@moz-CF8BEBEF.dia.static.qwest.net) (Quit: tikue)
[15:41:43] *** Quits: js (jeremie@moz-DCCE2247.rsr.lip6.fr) (Quit: WeeChat 0.3.8)
[15:43:32] *** Quits: KindOne (KindOne@moz-6AB05B6C.dynamic.ip.windstream.net) (Ping timeout)
[15:45:38] *** Joins: frogonia (Mibbit@3E9D68F2.B1163E0C.2A6693DD.IP)
[15:47:11] *** Joins: KindOne (KindOne@moz-A7414729.dynamic.ip.windstream.net)
[15:48:04] *** Joins: steveklabnik (steveklabn@moz-C3166165.hsd1.ca.comcast.net)
[15:48:53] *** Joins: graydon (graydon@moz-9918B407.vc.shawcable.net)
[15:48:53] *** ChanServ sets mode: +qo graydon graydon
[15:49:18] *** Joins: tcsc (tcsc@moz-ADC0ED45.hsd1.ct.comcast.net)
[15:50:13] *** Quits: KindOne (KindOne@moz-A7414729.dynamic.ip.windstream.net) (Ping timeout)
[15:50:35] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[15:50:45] <erickt> graydon: ping!
[15:50:48] *** Joins: KindOne (KindOne@moz-2C5C2A4F.dynamic.ip.windstream.net)
[15:50:49] <graydon> pong
[15:50:55] <erickt> good morning :)
[15:51:27] <erickt> So I'm poking away at our bytes-to-str functions, and I came across this issue about nulls in strings: https://github.com/mozilla/rust/issues/2268
[15:51:32] *** Joins: joebobjoe (joebobjoe@55F2E07A.7F841963.2213276E.IP)
[15:52:00] <graydon> yup
[15:52:06] *** Quits: MaikKlein (maik@F02915A3.C3960D65.B166373C.IP) (Ping timeout)
[15:52:25] <erickt> Right now we allow nulls to be inside the string. Is this wrong? should I add another pass through the string to catch null characters?
[15:53:31] <erickt> we're already doing a validation pass to confirm the bytes are utf8
[15:54:10] <graydon> I don't know if null is a valid utf8 byte
[15:54:24] <bstrie> it's valid ascii, no?
[15:54:32] *** Joins: ski (md9slj@moz-4BB5E0FF.studat.chalmers.se)
[15:54:41] *** Quits: KindOne (KindOne@moz-2C5C2A4F.dynamic.ip.windstream.net) (Ping timeout)
[15:54:49] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Ping timeout)
[15:54:49] *** Joins: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP)
[15:54:49] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/0w_Zsg
[15:54:49] *** Parts: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP) ()
[15:54:54] <erickt> graydon: acorrding to http://en.wikipedia.org/wiki/UTF-8, null seems to be valid
[15:54:56] <mleise> null is ok
[15:55:02] <mleise> 255 is not :)
[15:55:16] <bstrie> graydon: that answers it, we'll use 255-terminated strings
[15:55:23] <mleise> O.o
[15:55:31] <erickt> heh
[15:55:35] <graydon> :(
[15:55:39] <mleise> in fact D uses 255 as the initial value for chars
[15:56:03] <mleise> (and NaN for floats, and null for pointers)
[15:56:30] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[15:56:34] <erickt> huh. http://en.wikipedia.org/wiki/UTF-8#Modified_UTF-8 mentions that java and dalvik uses 0xC0, 0x80 to represent nulls
[15:57:02] <graydon> well .. we put a trailing null in our ~str as a minor speedup on c compat
[15:57:03] <bstrie> graydon: think about it, it's still cheap to convert a 255-terminated string over to null-terminated for C interop, because you just need to xor 11111111
[15:57:23] *** Quits: igl1 (igl@moz-25AA7AA8.adsl.alicedsl.de) (Ping timeout)
[15:57:26] *** Joins: \n (NDesaulnie@2557E599.66715431.D25A875A.IP)
[15:57:35] <graydon> our str is really ptr,len, where ptr is utf8 bytes
[15:57:51] *** Joins: ghrust (ghrust@E7A4CCE2.6A2AE50.F3114085.IP)
[15:57:51] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/ae-roQ
[15:57:51] *** Parts: ghrust (ghrust@E7A4CCE2.6A2AE50.F3114085.IP) ()
[15:57:53] <graydon> so I'd say accept null, if null is valid utf8
[15:57:53] *** Joins: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP)
[15:57:53] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/9FXcxA
[15:57:53] <ghrust> 13rust/06auto 14715f259 15Steven Stewart-Gallus: Prototyped a dynamic library facility interface
[15:57:53] <ghrust> 13rust/06auto 14e25f0a8 15Steven Stewart-Gallus: Fixed up formatting, and nits
[15:57:53] <ghrust> 13rust/06auto 14ef07aab 15bors: auto merge of #7027 : sstewartgallus/rust/dynamic_lib, r=graydon...
[15:57:53] *** Joins: igl (igl@moz-77397090.adsl.alicedsl.de)
[15:57:55] *** Parts: ghrust (ghrust@C8693FCB.6A2AE50.F3114085.IP) ()
[15:58:05] <erickt> There are some C apis, like the Windows environment array, that purposely embed nulls in the environment string, as in "foo:bar\0baz:blu\0\0"
[15:58:24] <mleise> what do you mean by accept \0? as string termination or inside the string?
[15:58:47] <graydon> as a valid codepoint
[15:58:50] <erickt> mleise: allow strings that have a null character in the middle of a rust string, as in "foo\0bar"
[15:58:52] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Ping timeout)
[15:59:05] *** Joins: KindOne (KindOne@moz-70ED3F20.dynamic.ip.windstream.net)
[15:59:08] <graydon> it is a valid codepoint in this datatype
[15:59:10] *** Joins: brson (brson@2557E599.66715431.D25A875A.IP)
[15:59:10] *** ChanServ sets mode: +o brson
[15:59:27] *** Joins: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com)
[15:59:34] <erickt> thanks graydon
[15:59:41] <mleise> it confuses me a little, but graydon sounds convincing :)
[16:00:04] <graydon> you might want the c-string making function to scan for nulls, or have a variant that does
[16:00:07] <engla> erickt: are those strings safe for ~str? (utf-8 clean)
[16:01:00] *** tiffnya is now known as tiffany
[16:01:07] *** Joins: KindTwo (KindOne@moz-91C52096.dynamic.ip.windstream.net)
[16:01:19] <tiffany> I was going to make the argument that you should just allow arbitrary binary data in strings, but that is already gone with utf-8 validation
[16:01:30] *** Quits: KindOne (KindOne@moz-70ED3F20.dynamic.ip.windstream.net) (Ping timeout)
[16:01:47] <graydon> I windows strings are commonly utf16. but null seems ok there too.
[16:01:54] <graydon> unicode permits null
[16:01:59] <erickt> graydon: I'll look into a variant that adds that
[16:02:10] <graydon> thanks
[16:02:10] <steveklabnik> graydon: r? https://github.com/graydon/rust-www/pull/5
[16:02:11] <tiffany> strings in windows API are rather painful
[16:02:13] <erickt> engla: they are utf-8 clean
[16:02:19] <engla> ok
[16:02:23] *** KindTwo is now known as KindOne
[16:02:26] *** Joins: pnkfelix1 (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net)
[16:02:29] <erickt> I got to run though, coworker got a flat and needs a ride
[16:02:53] *** Quits: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net) (Connection reset by peer)
[16:03:04] <tiffany> I had to deal with at least 7 distinct types for strings and characters while dealing with some small things that mingw doesn't have wrappers for
[16:03:48] <steveklabnik> also, where is http://static.rust-lang.org/doc/extra/index.html generated from? it was late last night, but i couldn't figure it out
[16:04:04] *** pnkfelix1 is now known as pnkfelix
[16:04:14] <bstrie> has master been updated?
[16:04:18] <bstrie> or better, removed? :)
[16:04:35] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[16:04:57] <graydon> steveklabnik: master
[16:05:36] *** Quits: cdidd (cdidd@moz-D8D3789B.broadband.corbina.ru) (Input/output error)
[16:05:59] <steveklabnik> ah
[16:06:01] *** Joins: eholk (eholk@moz-368610EF.uconnect.utah.edu)
[16:06:23] *** Joins: tjc (tjc@moz-B867959A.redactedconsulting.com)
[16:06:23] *** ChanServ sets mode: +o tjc
[16:06:41] *** Joins: eschweic (Adium@2557E599.66715431.D25A875A.IP)
[16:06:52] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[16:06:53] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14ef07aab to 14bf41586: 02http://git.io/N3iJvQ
[16:06:53] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[16:06:54] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[16:06:54] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/_2UgMw
[16:06:54] <ghrust> 13rust/06auto 14779191c 15Alex Crichton: Remove all usage of the global LLVMContextRef...
[16:06:55] <ghrust> 13rust/06auto 145c5095d 15Alex Crichton: Have JIT execution take ownership of the LLVMContextRef...
[16:06:55] <graydon> https://etherpad.mozilla.org/Meeting-weekly-2013-06-11
[16:06:55] <ghrust> 13rust/06auto 14443a48e 15bors: auto merge of #7040 : alexcrichton/rust/issue-6511-threadsafe-llvm, r=graydon...
[16:06:57] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[16:07:15] *** Quits: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net) (Client exited)
[16:07:25] *** Joins: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net)
[16:07:28] <true_droid> any ideas if some/all concepts from this post made it into Rust? http://smallcultfollowing.com/babysteps/blog/2012/11/18/imagine-never-hearing-the-phrase-aliasable/
[16:07:53] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Ping timeout)
[16:07:54] *** Quits: KindOne (KindOne@moz-91C52096.dynamic.ip.windstream.net) (Ping timeout)
[16:08:09] *** Quits: brson (brson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[16:08:17] <bstrie> true_droid: they did, yes
[16:08:47] <jed> got a compiler bug: fn foo(&'self mut self, key: ~str, val: FooStruct) -> @mut self { self } gives an unexpected failure
[16:08:56] <bstrie> true_droid: some of the changes, like removing const, are still in progress
[16:09:03] <true_droid> bstrie: thanks
[16:09:17] <jed> sorry, should return @mut BarStruct
[16:09:22] <bblum> do we need to rehash the DST issue? it doesn't feel resolved but we probably won't make any progress on it
[16:09:28] *** Joins: brson (brson@2557E599.66715431.D25A875A.IP)
[16:09:28] *** ChanServ sets mode: +o brson
[16:09:41] <pnkfelix> bblum: maybe add to agenda?
[16:09:57] *** Joins: pcwalton (pcwalton@43CB6079.66715431.D25A875A.IP)
[16:09:58] *** ChanServ sets mode: +o pcwalton
[16:10:02] *** Joins: pyrac (pyrac@moz-B2CB8564.w92-156.abo.wanadoo.fr)
[16:10:33] <pcwalton> can someone post the link to the agenda again?
[16:10:42] *** cscottnet is now known as cscottnet_away
[16:10:43] <pnkfelix> https://etherpad.mozilla.org/Meeting-weekly-2013-06-11
[16:10:59] *** cscottnet_away is now known as cscottnet
[16:11:43] *** Joins: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net)
[16:12:11] <jed> http://pastebin.com/BBZa2Br1
[16:12:19] <jed> ^ produces unexpected error
[16:13:13] *** Joins: KindOne (KindOne@moz-DB2371AA.dynamic.ip.windstream.net)
[16:15:23] <dbaupp> strcat: ping
[16:15:36] *** Joins: tikue (tkuehn@2557E599.66715431.D25A875A.IP)
[16:15:58] *** Quits: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[16:16:07] *** Quits: KindOne (KindOne@moz-DB2371AA.dynamic.ip.windstream.net) (Ping timeout)
[16:16:09] *** Quits: frogonia (Mibbit@3E9D68F2.B1163E0C.2A6693DD.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[16:16:54] *** Joins: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP)
[16:17:15] *** Joins: KindOne (KindOne@moz-A3617BEC.dynamic.ip.windstream.net)
[16:17:18] *** Quits: Jesin (Jessin_@moz-48B48C95.eecs.lehigh.edu) (Ping timeout)
[16:17:40] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[16:18:08] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[16:19:09] *** Quits: KindOne (KindOne@moz-A3617BEC.dynamic.ip.windstream.net) (Ping timeout)
[16:19:31] <dbaupp> https://github.com/mozilla/rust/pull/7060 r?
[16:20:48] *** Joins: cstrahan (cstrahan@moz-4C7E5789.hsd1.dc.comcast.net)
[16:21:27] *** Quits: pyrac (pyrac@moz-B2CB8564.w92-156.abo.wanadoo.fr) (Quit: pyrac)
[16:23:30] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Computer has gone to sleep.)
[16:26:28] *** Joins: snearch (snearch@moz-311F1160.pool.mediaways.net)
[16:28:08] *** Quits: tcsc (tcsc@moz-ADC0ED45.hsd1.ct.comcast.net) (Quit: computer sleeping)
[16:28:38] *** Joins: azita (Azita@2557E599.66715431.D25A875A.IP)
[16:30:32] *** Joins: dimension (dimension@moz-4CCD79C5.dsl.dynamic.simnet.is)
[16:31:57] *** Joins: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com)
[16:32:55] *** Quits: joebobjoe (joebobjoe@55F2E07A.7F841963.2213276E.IP) (Quit: Textual IRC Client: www.textualapp.com)
[16:40:49] <friggle> kimundi: maybe you should post your @ vs Gc<> proposal to the mailing list to make sure the right people see it?
[16:42:59] *** Joins: seth (seth@moz-D840E602.dsl.static.sonic.net)
[16:43:14] *** Quits: dbaupp (Thunderbir@moz-73E90475.lns20.syd6.internode.on.net) (Ping timeout)
[16:44:17] <kimundi> friggle: Well pcwalton and graydon already saw it, had a short conversation with pcwalton yesterday about it.
[16:44:50] *** Parts: dualhbridge (dad@moz-9FEE6D3B.maine.res.rr.com) ()
[16:45:26] *** Joins: ecr (ereed@2557E599.66715431.D25A875A.IP)
[16:45:29] <friggle> kimundi: oh cool
[16:45:41] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[16:48:18] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[16:48:42] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Quit: Computer has gone to sleep.)
[16:48:57] *** Quits: seth (seth@moz-D840E602.dsl.static.sonic.net) (Ping timeout)
[16:49:59] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[16:50:27] *** Quits: SimonSapin (simon@88F51059.F3BBB17D.144F44FA.IP) (Ping timeout)
[16:51:08] <friggle> kimundi: what was the feedback?
[16:51:11] *** Quits: jed (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[16:52:16] <kimundi> friggle: pcwalton seemed to be positive about it, but there is still no final decision. In fact, they are talking about it on the Meeting right now :)
[16:53:38] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[16:54:31] <pnkfelix>  graydon: the ccache on the build bots, have you confirmed via ccache â€”show-stats that its mostly using the cached versions?  I had to set CCACHE_BASEDIR per-directory in my â€”enable-ccache flag to get that effectâ€¦
[16:54:46] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[16:54:46] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14443a48e to 14bf41586: 02http://git.io/N3iJvQ
[16:54:46] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[16:54:48] *** Joins: ghrust (ghrust@C621748.6A2AE50.F3114085.IP)
[16:54:48] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/nJiTew
[16:54:48] <ghrust> 13rust/06auto 14967c7d8 15Ben Blum: Replace str::raw::buf_as_slice with c_str_to_static_slice. Close #3843.
[16:54:48] <ghrust> 13rust/06auto 14d25fae0 15Ben Blum: Remove 'this could be clearer' FIXME. Looks fine. Close #2618.
[16:54:48] <ghrust> 13rust/06auto 148081aea 15Ben Blum: Tag a bunch of destructors that need mutable self with FIXME for #4330. Close #4943.
[16:54:51] *** Parts: ghrust (ghrust@C621748.6A2AE50.F3114085.IP) ()
[16:55:18] <jld> I do have a question, but I didn't think it needed to be asked in the meeting instead of on IRC:
[16:55:28] <jld> How much do we care about ABI compatibility between different versions of rustc?
[16:55:44] <pnkfelix> graydon: (I admit ignorance of the buildbot structure; i just wanted to confirm that there's no "oh duh"s there)
[16:56:35] <cmr> big meeting!
[16:56:49] <cmr> jld: as a user, I care about it a lot after the language stablizes.
[16:57:10] <graydon> pnkfelix: hm, lemme check
[16:57:26] <pnkfelix> jld: i vaguely thought there was discussion of ABI compatibility during one of the recent bug triage meetings
[16:57:30] <graydon> pnkfelix: most of them run in the same workspace as the last build, without clean-llvm, so they don't even hit ccache
[16:57:41] <jld> I ask because anything I do to enum representations can break compatibility (and already has, with null pointers), but if I understand what's going on with metadata/encoder/decoder this shouldn't be too hard to avoid.
[16:57:43] <pnkfelix> jld: (or rather, I vaguely recall)
[16:57:56] *** Quits: ecr (ereed@2557E599.66715431.D25A875A.IP) (Quit: Leaving.)
[16:58:01] <pnkfelix> graydon: Ah, okay, they aren't clean builds, thx
[16:58:01] *** Joins: ecr (ereed@2557E599.66715431.D25A875A.IP)
[16:58:10] <cmr> Yeah, "def ID drift" I think?
[16:58:43] *** Quits: eschweic (Adium@2557E599.66715431.D25A875A.IP) (Quit: Leaving.)
[16:59:06] *** Quits: brson (brson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[16:59:10] *** Quits: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP) (Quit: eatkinson)
[16:59:15] *** Quits: tikue (tkuehn@2557E599.66715431.D25A875A.IP) (Quit: tikue)
[16:59:25] <cmr> bblum: I like the syntax you came up with, much better.
[16:59:49] *** Quits: ecr (ereed@2557E599.66715431.D25A875A.IP) (Ping timeout)
[16:59:55] <pnkfelix> bblum: regarding the deguaring of the examples
[17:00:09] <pnkfelix> bblum: in your Proposal-for-effects
[17:00:22] <graydon> pnkfelix: they're clean, but not clean-llvm; the clean target leaves llvm artifacts in place
[17:00:51] *** Parts: judder (maradukewa@85208D00.97F8E51D.E305BD61.IP) ()
[17:01:38] <jld> pnkfelix: There's also a comment by... pcwalton I think? on one of the relevant issues, to the effect that we aren't concerned.  But there might have been confusion about source-level vs. binary-level compatibility (or pre-1.0 vs. post-1.0)
[17:02:05] <jld> And maybe this should be asked somewhere more peristent than IRC....
[17:02:05] *** Quits: skippydippy (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[17:02:22] *** Joins: judder (maradukewa@85208D00.97F8E51D.E305BD61.IP)
[17:02:22] <pnkfelix> bblum: is it only higher-order functions that are desugared into effect-parametric ones?  Do you get a separate effect variable for each function argument?
[17:02:53] <pnkfelix> jld: sometimes I think IRC is more persistent than github
[17:03:11] *** Joins: eschweic (Adium@2557E599.66715431.D25A875A.IP)
[17:03:45] <bblum> pnkfelix: yeah
[17:03:52] <pnkfelix> jld: at least the dialogue here is permanently logged, rather than being able to be revised later
[17:04:02] *** Joins: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP)
[17:04:15] <bblum> pnkfelix: 1 per argument that's a closure or a struct with a function pointer inside
[17:04:22] <bblum> and 1 per typeclass-qualified typaram
[17:04:35] *** Joins: tikue (tkuehn@2557E599.66715431.D25A875A.IP)
[17:04:36] *** Quits: tikue (tkuehn@2557E599.66715431.D25A875A.IP) (Quit: tikue)
[17:04:41] <bblum> (traits should actually be able to have multiple effect vars, but that wouldn't be the default)
[17:04:44] <pnkfelix> bblum: What have you read so far on effect inference?  It was a pet topic of mine but I am ignorant of the state-of-the art
[17:04:51] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:05:01] <pnkfelix> bblum: i.e. my knowledge basically ends with the FX-91 system
[17:05:03] <bblum> (so you could be like trait foo<%e1,%e2> { fn a() %e1; fn b() %e2; } )
[17:05:24] *** Joins: dualhbridge (dad@moz-9FEE6D3B.maine.res.rr.com)
[17:05:25] <bblum> pnkfelix, I know nothing about this; i have only read "Lightweight polymorphic effects" which was just about syntax
[17:05:34] *** Quits: tjc (tjc@moz-B867959A.redactedconsulting.com) (Quit: zzzzzzzzzz)
[17:05:35] <pnkfelix> bblum: though I did read the background papers on Associative-Commutative Unification thoroughly
[17:05:37] *** Quits: pcwalton (pcwalton@43CB6079.66715431.D25A875A.IP) (Quit: pcwalton)
[17:05:40] <pnkfelix> bblum: okay
[17:05:46] <bblum> please enlighten me
[17:05:57] <cmr> bblum: Effects would be purely compile-time right?
[17:05:59] <pnkfelix> bblum: well, the quick story is
[17:06:13] <bblum> cmr: toddaaro and i were discussing some ways they might not be, but i think all of them are bad ideas
[17:06:16] <pnkfelix> bblum: effect-inference is trickier than type-inference
[17:06:17] <bblum> so, yes
[17:06:33] *** Joins: tikue (tkuehn@2557E599.66715431.D25A875A.IP)
[17:06:45] <bblum> why's that?
[17:07:09] <pnkfelix> bblum: in part because with types, you (usually) have straight-forward structural decomposition when you are trying to match up the type expected by an expression context with the type produced by a resukt
[17:07:12] <pnkfelix> bblum: result
[17:07:34] <pnkfelix> bblum: but with effects, you are working on unifiying systems of equations
[17:08:05] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[17:08:07] <pnkfelix> bblum: where you have equations like:  (effect-union A B) =? (effect-union A A)
[17:08:20] <pnkfelix> bblum: sorry, that was bad, I need to rewrite 
[17:08:25] *** Joins: pcwalton (pcwalton@2557E599.66715431.D25A875A.IP)
[17:08:25] *** ChanServ sets mode: +o pcwalton
[17:08:26] *** Joins: ecr (ereed@2557E599.66715431.D25A875A.IP)
[17:08:32] <bblum> hmm
[17:08:34] <pnkfelix> bblum: (with distinquished unificiation variables and constants)
[17:08:39] <pnkfelix> bblum: a better example
[17:08:41] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[17:09:24] <pnkfelix> bblum: (effect-union ?a X X) = (effect-union ?b)
[17:09:47] <pnkfelix> bblum: this is called, I think, ACUI unification
[17:10:01] <pnkfelix> bblum: Associative, Commutative, Unitary, Idempotent
[17:10:06] *** Quits: lmandel (lmandel@F2D29657.F60B0462.67AC9B1.IP) (Quit: lmandel)
[17:10:06] <bblum> ok, which would arise from "fn b() { do_X; a(); }"
[17:10:23] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:10:23] <bblum> ok, ACUI all seem like conditions that would make the job easier, though, right?
[17:10:31] <pnkfelix> bblum: no, not necessarily
[17:10:37] <bblum> do tell...
[17:10:49] <pnkfelix> bblum: because you might choose values for the unification variables
[17:10:59] <pnkfelix> bblum: that are proven later to be unworkable
[17:11:13] <pnkfelix> bblum: basically, you can't be as eager in your constrait solving
[17:11:28] <pnkfelix> bblum: as you are with a structural unification system
[17:12:10] <bblum> i can believe that you have to accumulate a ton of effects for the entire crate before being able to solve any of them...
[17:12:26] <bblum> but once you did, i don't see it being that hard... wouldn't you just do it in call-graph order?
[17:12:46] <bblum> s/ton of effects/ton of constraints/
[17:13:14] <pnkfelix> bblum: here, I'll give you a reference
[17:13:24] *** Joins: lmandel (lmandel@F2D29657.F60B0462.67AC9B1.IP)
[17:13:32] <bblum> i was also hoping that binary effect domains would make the job easier
[17:13:36] <pnkfelix> bblum: http://dl.acm.org/citation.cfm?id=99583.99623
[17:14:02] <bblum> (i.e., each effect domain has only elements "does the thing" or "doesn't do the thing")
[17:14:26] <bblum> (not that that makes subeffecting a total order or anything, of course)
[17:15:45] <pnkfelix> bblum: hmm, that reference only says that the constraint sets (for the kernel language of the paper) can have their satisfiability decided in polynomial time â€¦ I was hoping for a tighter bound
[17:16:02] <bblum> delicious polynomial time
[17:16:43] <pnkfelix> bblum: ah, the other problem was that 
[17:16:59] <pnkfelix> bblum: this language had a name for the 'pure' effect
[17:17:14] <pnkfelix> bblum: so that the equations you had to solve had to allow for that possiblity
[17:17:28] <bblum> 'pure' means the bottom effect?
[17:17:34] <flu_> can I get another r? on https://github.com/mozilla/rust/pull/7035 - build issues seem to be sorted out now
[17:17:34] <pnkfelix> bblum: which meant (union IO) ?= (union ?e IO)
[17:17:56] <bblum> uh, i don't follow
[17:17:59] <bblum> (this article is older than my little brother)
[17:18:00] <pnkfelix> bblum: you could solve the above by either of : [?e := IO], or by [?e := Pure]
[17:18:25] <bblum> ok, i see
[17:18:41] <bblum> well, fine? presumably you would figure out which based on other constraints that appeared
[17:18:42] <pnkfelix> bblum: â€¦ depending on what kind of effect lattice you are talking about, then yes, Pure is the bottom effect
[17:19:58] *** Quits: kemurphy (kemurphy@moz-7332FD74.hsd1.pa.comcast.net) (Ping timeout)
[17:20:12] *** Joins: brson (brson@2557E599.66715431.D25A875A.IP)
[17:20:12] *** ChanServ sets mode: +o brson
[17:20:15] *** Quits: brson (brson@2557E599.66715431.D25A875A.IP) (Quit: brson)
[17:20:19] *** Joins: brson (brson@2557E599.66715431.D25A875A.IP)
[17:20:19] *** ChanServ sets mode: +o brson
[17:20:20] *** Joins: tbrock (tbrock@34641662.FB4DE631.66C78B76.IP)
[17:20:39] <brson> http://lwn.net/SubscriberLink/553131/ee5f866f998608ab/
[17:21:02] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[17:21:03] <tbrock> hey guys, when you are done building rust where does the binary go if you don't run make install
[17:21:03] <cmr> brson: I linked to that the day it was released, nobody seemed to care :)
[17:21:26] <cmr> tbrock: $target/stage2/$target/bin, iirc
[17:21:38] <pnkfelix> bblum: yes, I'm just trying to point out that some of the standard structural approaches that work for type inference don't necessarily work for effect inference, that's all.
[17:21:40] <tbrock> ah, i looked in stage3 and there wasn't anything there :-)
[17:22:05] *** Joins: MaikKlein (maik@moz-C3CB0EB4.dip0.t-ipconnect.de)
[17:22:11] <tbrock> that is exactly where it is thank you @cmr
[17:22:21] <pnkfelix> bblum: (I still need to go digest your proposal.  I'll probably poke you with questions later in the week.)
[17:22:24] <jj2baile_> x.
[17:22:44] <bblum> pnkfelix: yeah, please do; i expect you will have valuable feedback :)
[17:22:50] <bblum> and thanks for the paper
[17:23:53] *** Joins: kemurphy (kemurphy@moz-7332FD74.hsd1.pa.comcast.net)
[17:23:56] *** Quits: k00mi (koomi@moz-202752AD.pools.arcor-ip.net) (Quit: WeeChat 0.4.1)
[17:25:03] *** Joins: blitter (blitter@moz-FB45689C.dyn.centurytel.net)
[17:26:17] *** Quits: MaikKlein (maik@moz-C3CB0EB4.dip0.t-ipconnect.de) (Ping timeout)
[17:26:19] *** Quits: erick (erick@E1304535.2A7189BF.BE19388.IP) (Ping timeout)
[17:27:09] *** Quits: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP) (Ping timeout)
[17:27:51] *** Joins: pnkfelix1 (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net)
[17:27:52] *** Quits: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net) (Connection reset by peer)
[17:29:14] *** Quits: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[17:29:34] *** Quits: pnkfelix1 (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net) (Quit: Leaving.)
[17:29:52] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[17:29:58] *** Joins: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net)
[17:30:18] <jld> I suspect that a lot of the `return retval;` in the Linux kernel (and similar) is because of using `goto out;` where a Rust or C++ program could use destructors/RAII, and less an artifact of the statement/expression thing.
[17:31:08] <jld> Although, also, Result.
[17:31:50] *** Joins: MaikKlein (maik@moz-C3CB0EB4.dip0.t-ipconnect.de)
[17:32:40] *** Quits: steveklabnik (steveklabn@moz-C3166165.hsd1.ca.comcast.net) (Ping timeout)
[17:32:41] *** Joins: jed (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP)
[17:32:59] *** Quits: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net) (Quit: Leaving.)
[17:33:02] *** Joins: erick (erick@E1304535.2A7189BF.BE19388.IP)
[17:33:33] <flu_> <3 'make check' running tidy. 
[17:33:42] *** Quits: rfw (rfw@moz-C65A114.rfw.name) (Ping timeout)
[17:34:04] <flu_> it'll keep the tabs from ever invading the codebase!
[17:34:37] <cmr> Heretic! Tabs-as-indentation is superior!
[17:34:42] <flu_> heheh
[17:34:59] <jed> tabs are truly the superior whitespace
[17:35:14] <flu_> they are superior from a logical point of view, but emotion rules my heart, and my heart loves spaces
[17:35:29] <cmr> ou are an inferior person and will be purged in the coming revolution
[17:35:35] <cmr> :p
[17:35:56] <cmr> In all seriousness, are the meeting notes complete? They seem to end in a really weird place
[17:36:24] * flu_ naps while waiting on make check to finish
[17:36:26] <flu_> cmr: link?
[17:36:37] <cmr> flu_: https://etherpad.mozilla.org/Meeting-weekly-2013-06-11
[17:36:45] <flu_> thx
[17:36:56] *** Joins: rfw (rfw@moz-C65A114.rfw.name)
[17:36:59] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[17:37:11] <pcwalton> they're basically complete yeah
[17:37:39] <cmr> pcwalton: what a cliff hanger!
[17:38:21] *** Joins: pyrac (pyrac@moz-B2CB8564.w92-156.abo.wanadoo.fr)
[17:44:45] *** Quits: bnicholson (bnicholson@moz-E98974C1.hsd1.ca.comcast.net) (Ping timeout)
[17:45:09] <flu_> I really like the motivation behind the effects proposal, if not the syntax and particulars discussed. I'd really like to be that explicit with the compiler though!
[17:45:46] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[17:45:46] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/nJiTew
[17:45:46] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[17:45:55] <brson> today I'm going to try to use bugpoint to figure out what optimization is causing the incoming breakage
[17:45:59] *** Joins: koomi (koomi@moz-B2B8B6D1.superkabel.de)
[17:46:07] <bblum> flu_: if you have suggestions for changing the syntax or particulars, i'm all ears
[17:46:09] <nmatsakis> strcat: ping
[17:46:20] <flu_> bblum: you bet :-)
[17:48:25] *** Quits: paulproteus (quassel@rose.makesad.us) (Ping timeout)
[17:48:43] *** Joins: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP)
[17:48:43] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/HVjD_g
[17:48:43] *** Parts: ghrust (ghrust@1E8607E8.6A2AE50.F3114085.IP) ()
[17:48:44] *** Joins: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP)
[17:48:44] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/e77UvQ
[17:48:44] <ghrust> 13rust/06auto 14983269e 15Ron Dahlgren: Updated documentation to refer to extra module...
[17:48:44] <ghrust> 13rust/06auto 149e4beaa 15Ron Dahlgren: Fix all issues with sample code...
[17:48:44] <ghrust> 13rust/06auto 14d0b1979 15bors: auto merge of #7035 : influenza/rust/getopts-doc-update, r=bstrie...
[17:48:46] *** Parts: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP) ()
[17:48:50] <nmatsakis> cmr: seriosuly :)
[17:49:00] *** Quits: davbo (dave@moz-3FFA637C.oucs.ox.ac.uk) (Client exited)
[17:49:11] <nmatsakis> cmr: (re: cliffhanger)
[17:49:15] *** Joins: slimer (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP)
[17:49:42] *** Quits: dualhbridge (dad@moz-9FEE6D3B.maine.res.rr.com) (Client exited)
[17:50:08] <jld> Speaking of tabs, I still haven't told the mailing list about my eternally-work-in-progress rust-mode.el replacement (which conflates characters and columns in a way that breaks oddly if any tabs get in, and is probably also not non-ASCII-clean now that I think about it...)
[17:50:39] *** Joins: paulproteus (quassel@moz-E86A3B42.makesad.us)
[17:50:58] *** Joins: Jesin (Jessin_@moz-48B48C95.eecs.lehigh.edu)
[17:54:03] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[17:55:51] *** Joins: tjc (tjc@moz-76C711F4.hsd1.wa.comcast.net)
[17:55:51] *** ChanServ sets mode: +o tjc
[17:56:49] *** Joins: MaikKlein1 (maik@moz-7BA8C29B.dip0.t-ipconnect.de)
[17:57:05] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:58:05] *** Quits: MaikKlein (maik@moz-C3CB0EB4.dip0.t-ipconnect.de) (Ping timeout)
[17:59:03] *** Quits: MaikKlein1 (maik@moz-7BA8C29B.dip0.t-ipconnect.de) (Ping timeout)
[17:59:06] *** Quits: yong (chatzilla@74DA0C97.4E87ADC2.263D9828.IP) (Ping timeout)
[17:59:53] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[18:01:14] *** Joins: mini (leo86@moz-8057780A.retail.telecomitalia.it)
[18:01:20] <mini> ciao
[18:01:20] <mini> !list
[18:01:24] *** Quits: mini (leo86@moz-8057780A.retail.telecomitalia.it) (Quit: )
[18:01:29] *** Joins: yong (chatzilla@74DA0C97.4E87ADC2.263D9828.IP)
[18:02:01] *** Joins: bnicholson (bnicholson@2557E599.66715431.D25A875A.IP)
[18:02:12] <bblum> hm
[18:02:27] <bblum> pretty sure i found a race in my sync::rwlock implementation
[18:02:43] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[18:02:53] <bblum> requires an arcane call pattern; won't be too hard to fix
[18:03:10] *** Joins: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net)
[18:03:47] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[18:03:49] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[18:05:00] <bblum> nmatsakis: we meeting now?
[18:05:10] <strcat> nmatsakis: pong
[18:05:52] <nmatsakis> bblum: yep, just joining.
[18:06:21] <nmatsakis> jld: does it...work?
[18:06:28] <nmatsakis> strcat: I want to discuss iterators, but not this sec
[18:07:14] <strcat> ahh that bitrotted already
[18:08:02] *** Joins: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP)
[18:08:47] *** Joins: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com)
[18:08:49] *** Parts: ecr (ereed@2557E599.66715431.D25A875A.IP) ()
[18:09:16] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[18:09:34] *** Quits: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net) (Ping timeout)
[18:09:35] *** Quits: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP) (Connection reset by peer)
[18:11:07] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[18:11:15] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Computer has gone to sleep.)
[18:13:35] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[18:14:05] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[18:16:12] <cmr> jjj
[18:16:27] *** Joins: skchrko__ (sk@61A494B3.BA40E8A.AAC02D62.IP)
[18:16:27] *** Quits: skchrko_ (sk@61A494B3.BA40E8A.AAC02D62.IP) (Connection reset by peer)
[18:16:32] <cmr> whoops, sorry :)
[18:17:38] *** Joins: ecr (ereed@2557E599.66715431.D25A875A.IP)
[18:18:49] <strcat> rusti: 5
[18:18:51] -rusti- 5
[18:19:44] <nano> rusti: wat
[18:19:45] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/TbMP
[18:20:08] *** Joins: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP)
[18:20:45] <jld> nmatsakis: Sort of.  As mentioned it misbehaves annoyingly in block comments, and I've more recently noticed that in some cases it tries to indent to a negative column.
[18:20:59] <jld> (And doesn't handle #[] quite right, and multiline patterns, and...)
[18:21:45] <bstrie> brson: is that air.mozilla.org video restricted? seems like people are having trouble viewing it
[18:22:05] *** Quits: fabiand (fabiand@moz-11409B54.adsl.alicedsl.de) (Quit: Verlassend)
[18:24:34] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Ping timeout)
[18:24:52] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[18:25:10] <mcpherrin> bstrie: The Brendan fireside chat? I'm pretty sure it's mozilla/mozillians only
[18:25:27] <bstrie> mcpherrin: but brson posted it to reddi t:P
[18:25:40] <mcpherrin> I know :)
[18:25:49] <bstrie> someone get a torrent going
[18:26:59] <mcpherrin> It explicitly says mozillians only in the first fireside chat with Mitchell from last year
[18:27:15] <bstrie> well I'm removing the link then
[18:27:21] <brson> bstrie: i did not realize :-/
[18:27:41] <bstrie> it's not fair to tempt those who can't see it :P
[18:27:48] *** Quits: sk (sk@44FB31D1.A56C954C.78DD174B.IP) (Quit: Leaving)
[18:27:59] <brson> it says 'volunteers and staff'
[18:29:18] <mcpherrin> volunteers == vouched on mozillians.org
[18:30:29] <bstrie> I forget if I'm vouched or not
[18:33:38] *** Quits: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP) (Input/output error)
[18:33:41] *** Joins: steven_is_false (user@moz-144077DE.bchsia.telus.net)
[18:33:54] <bstrie> yeah, even though I signed the agreement I'm still not vouched on mozillians
[18:34:11] <mcpherrin> bstrie: I can vouch you
[18:34:19] <steven_is_false> Hi! What's wrong with rust run --opt-level=3 -L rust-sdl -L rust-opengles -L rust-dlfcn -L pX-x_assets --test -o check /home/steven/mine/documents/public/programming/projects/pX-x/src/pX-x.rs ? I'm getting the following error: error: no input filename given
[18:34:20] <bstrie> mcpherrin: https://mozillians.org/en-US/u/bstrie/
[18:34:38] <tjc> FIRST
[18:34:40] *** Quits: z0w0 (zack@FDF4EF6A.2CA5CD8.5F93A189.IP) (Client exited)
[18:34:47] <mcpherrin> tjc: >:(
[18:34:52] <tjc> :-D
[18:34:58] <tjc> not sure if you can have multiple vouches
[18:35:01] <mcpherrin> Nope
[18:35:05] <bstrie> haha
[18:35:11] *** Joins: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP)
[18:35:24] <bstrie> so many people fighting over me
[18:35:27] <bstrie> I'm swooning
[18:35:39] <tjc> :-D
[18:36:15] <Blei> steven_is_false: try using rustc instead of rust run
[18:36:27] <steven_is_false> Blei: I know it works with rustc
[18:37:26] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Computer has gone to sleep.)
[18:38:16] <strcat> tjc: https://github.com/mozilla/rust/pull/7055 r?
[18:38:43] <tjc> strcat: looking
[18:38:47] <flu_> Anybody available to vouch me? I've got two PR's in and at least two weeks worth of IRC lurking :-) https://mozillians.org/en-US/u/ronald.dahlgren/
[18:39:09] <tjc> flu_: what's your github username?
[18:39:13] <bstrie> does being vouched require that you actually submitted a contributor agreement?
[18:39:14] <flu_> influenza
[18:39:32] <bstrie> or is it more of an informal thing
[18:39:45] <tjc> good enough for me!
[18:39:49] <mcpherrin> bstrie: informal thing
[18:39:49] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[18:39:49] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/e77UvQ
[18:39:49] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[18:40:02] <tjc> bstrie_: AFAIK it means "I know this person exists and is not a bot or a troll and really has some vague interest in contributing to Mozilla"
[18:40:07] <strcat> bstrie: I think the contributor agreement is mostly about having commit access
[18:40:09] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[18:40:12] *** Quits: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[18:40:23] <strcat> compile-fail hates me
[18:40:30] <strcat> they segfault without RUST_THREAD=1 now ;\
[18:40:35] <strcat> nothing else does...
[18:40:49] <strcat> rustc: /home/strcat/projects/rust/src/rt/rust_stack.cpp:55: void check_stack_canary(stk_seg*): Assertion `stk->canary == canary_value && "Somebody killed the canary"' failed.
[18:40:56] <strcat> poor birds
[18:40:59] <flu_> tjc: woot! thanks
[18:41:05] <tjc> flu_: no prob!
[18:41:11] <tjc> heh, won't somebody please, please think of the stack canary?
[18:42:28] * strcat hopes it's a local problem and unrelated to turning each -> iter().advance...
[18:42:35] *** Joins: MaikKlein1 (maik@moz-7BA8C29B.dip0.t-ipconnect.de)
[18:42:46] *** Joins: ghrust (ghrust@E7A4CCE2.6A2AE50.F3114085.IP)
[18:42:46] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/0W6uhQ
[18:42:46] *** Parts: ghrust (ghrust@E7A4CCE2.6A2AE50.F3114085.IP) ()
[18:43:04] <strcat> I can't really see how it would be ;p
[18:43:25] *** Quits: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP) (Ping timeout)
[18:43:36] *** Quits: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk) (Connection reset by peer)
[18:44:28] *** Joins: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk)
[18:45:47] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[18:45:47] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/0W6uhQ
[18:45:47] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[18:45:48] *** Quits: sankha93 (Instantbir@83FDCCBB.7C356C25.8B6C1D65.IP) (Ping timeout)
[18:45:50] *** Joins: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP)
[18:45:50] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/dgvcUw
[18:45:50] <ghrust> 13rust/06auto 144f2f545 15Daniel Micay: add Iterator implementations for Option
[18:45:50] <ghrust> 13rust/06auto 14004816f 15Daniel Micay: option: remove redundant old_iter impls
[18:45:50] <ghrust> 13rust/06auto 14c582ef0 15bors: auto merge of #7055 : thestinger/rust/iterator, r=catamorphism...
[18:45:52] *** Parts: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP) ()
[18:45:57] *** Joins: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP)
[18:47:54] * strcat bribes bors with motor oil
[18:48:20] <flu_> strcat: ! not oil! oil + wire brush destroys rust!
[18:48:41] <jed> oh no :o
[18:49:10] <bstrie> all I can hear is "DESTROYS RUST ON CONTACT" over and over again in billy mays' voice
[18:50:04] *** Joins: sankha93 (Instantbir@B0ABF041.4C100BA0.8B6C1D65.IP)
[18:50:10] <jed> all it takes is 3 easy payments of 19.99, and they'll even throw in a second one free of charge if you call now
[18:50:45] <flu_> Somebody was mentioning all of the 'unnecessary `unsafe` block' warnings yesterday - are those fair game to clean up?
[18:50:56] <strcat> flu_: I don't think so, I think most are wrong
[18:51:07] <flu_> heh
[18:51:08] <cmr> we really need a snapshot
[18:51:08] <strcat> there seems to have been a regression in unsafe checking
[18:51:14] <bstrie> but you can clean them up by fixing the warning
[18:51:16] <cmr> (and also incoming to be not on fire)
[18:51:33] <flu_> bstrie: i.e., the real solution 
[18:51:50] <strcat> the string module with be 1/2 as big as it was last week soon :)
[18:52:12] <Amanieu> kind of disappointed my closure proposal didn't get discussed in the meeting :(
[18:53:05] <bstrie> hm, I have to follow four "vouched by" links on mozillians.org until I get to someone who didn't need vouching. that basically makes me a fifth-generation vampire
[18:54:03] <strcat> rusti: use std::iterator::*; for "abc def ghi jkl".split_iter(' ').take(3).advance |x| { println(fmt!("%?", x)) }
[18:54:04] -rusti- "abc"
[18:54:04] -rusti- "def"
[18:54:04] -rusti- "ghi"
[18:54:04] -rusti- ()
[18:54:36] <strcat> rusti: use std::iterator::*; for "abc def ghi jkl".split_iter(' ').take_while(|x| x[0] != 'g').advance |x| { println(fmt!("%?", x)) }
[18:54:37] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/jcdF
[18:54:43] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[18:54:43] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14c582ef0 to 14d0b1979: 02http://git.io/N3iJvQ
[18:54:43] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[18:54:44] *** Joins: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP)
[18:54:44] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/7s9ZMg
[18:54:44] <ghrust> 13rust/06auto 140c7ba3c 15Alex Crichton: Add a finally impl for `extern "Rust" fn()`
[18:54:45] <ghrust> 13rust/06auto 1441dae55 15bors: auto merge of #7056 : alexcrichton/rust/issue-4727, r=graydon...
[18:54:45] *** Parts: ghrust (ghrust@DE823A67.6A2AE50.F3114085.IP) ()
[18:55:03] *** Quits: MaikKlein1 (maik@moz-7BA8C29B.dip0.t-ipconnect.de) (Ping timeout)
[18:55:03] <brson> Amanieu: where is your closure proposal?
[18:55:09] <strcat> rusti: use std::iterator::*; for "abc def ghi jkl".split_iter(' ').take_while(|x| x[0] != 103).advance |x| { println(fmt!("%?", x)) }
[18:55:10] -rusti- "abc"
[18:55:10] -rusti- "def"
[18:55:10] -rusti- ()
[18:55:31] <strcat> heh, windows.
[18:55:53] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[18:56:25] <cmr> C:\bot\slave\auto-win\build\src\libstd\run.rs:592:20: 592:62 error: type `str::StrCharIterator/&` does not implement any method in scope named `any`
[18:56:27] <tikue> anyone know of a str::to_lowercase function, or a char equivalent?
[18:56:32] <cmr> what is /up/ with that error message?
[18:56:39] <strcat> tikue: we don't have that much unicode support yet
[18:57:07] <tikue> strcat: ah ok, thanks
[18:57:25] <cmr> Isn't that the old syntax?
[18:57:31] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[18:57:31] <ghrust> 01[13rust01] 15thestinger 04force-pushed 06try from 140bf7a1c to 149be3c2d: 02http://git.io/k471pw
[18:57:31] <ghrust> 13rust/06try 144f2f545 15Daniel Micay: add Iterator implementations for Option
[18:57:31] <ghrust> 13rust/06try 14004816f 15Daniel Micay: option: remove redundant old_iter impls
[18:57:32] <ghrust> 13rust/06try 149be3c2d 15Daniel Micay: fix windows build
[18:57:33] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[18:57:36] <cmr> oh it's try
[18:57:53] * strcat steals a working windows build bot from incoming
[18:59:00] <kimundi> tikue: Because full unicode support is is non-trivial, lower/uppercase currently only exist on Ascii
[18:59:28] *** Quits: ssbr (ssbr@moz-C9F16F18.dsl.bell.ca) (Client exited)
[18:59:29] <kimundi> rusti: "Hello".to_ascii()
[18:59:30] -rusti- &[{chr: 72}, {chr: 101}, {chr: 108}, {chr: 108}, {chr: 111}]
[18:59:36] <strcat> cmr: that's from the method resolve bug
[18:59:50] <kimundi> rusti: 'H'.to_ascii().to_lower().to_char()
[18:59:51] <strcat> or... nvm
[18:59:51] -rusti- 'h'
[18:59:57] <flu_> There's also 'titlecase' and languages without case. strings seemed so easy when we took the ethnocentric route of 'ascii for everyone!'
[19:00:20] <tikue> rusti: "Foo".to_ascii().to_lower()
[19:00:21] -rusti- ~[{chr: 102}, {chr: 111}, {chr: 111}]
[19:00:30] <tikue> rusti: "Foo".to_ascii().to_lower().to_char()
[19:00:31] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/UYWb
[19:00:39] <cmr> rusti: "Foo".to_ascii().to_lower().to_str()
[19:00:40] -rusti- ~"[\'f\', \'o\', \'o\']"
[19:00:46] <tikue> haha that's beautiful
[19:00:49] <kimundi> rusti: "Foo".to_ascii().to_lower().to_str_ascii()
[19:00:50] -rusti- ~"foo"
[19:00:55] <strcat> ugh coursera sends me the least interesting course suggestions ever
[19:00:59] <Amanieu> brson: I added it at the bottom of the closure reform wiki page
[19:01:04] <tikue> kimundi: thank you :)
[19:01:09] <Amanieu> brson: https://github.com/mozilla/rust/wiki/Proposal-for-closure-reform
[19:01:10] <kimundi> Had to add an extra second to_str() method for that xD
[19:01:22] <cmr> strcat: I enjoyed the crypto course
[19:01:22] <strcat> they might as well be suggesting https://www.coursera.org/course/equinenutrition at this rate ;p
[19:01:28] <strcat> cmr: as did I! :)
[19:01:39] <Amanieu> brson: Sorry if I didn't use the proper procedure for proposals, this is my first contribution to rust
[19:02:00] <strcat> cmr: crypto II keeps getting delayed though.
[19:02:04] <strcat> I've been waiting like a year
[19:02:11] <kimundi> There is a proper procedure for proposals?
[19:02:39] <cmr> strcat: I'm waiting for "coding the matrix", it looks interesting
[19:03:30] *** Joins: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP)
[19:03:30] <ghrust> 01[13rust01] 15thestinger 04force-pushed 06try from 149be3c2d to 14bbe3d4a: 02http://git.io/k471pw
[19:03:30] <ghrust> 13rust/06try 14bbe3d4a 15Daniel Micay: fix windows build
[19:03:30] *** Parts: ghrust (ghrust@AC22872E.6A2AE50.F3114085.IP) ()
[19:04:17] <kimundi> rusti: let ãƒžãƒˆãƒªãƒƒã‚¯ã‚¹ = "The chosen one"; ãƒžãƒˆãƒªãƒƒã‚¯ã‚¹
[19:04:18] -rusti- "The chosen one"
[19:04:26] *** Quits: \n (NDesaulnie@2557E599.66715431.D25A875A.IP) (Ping timeout)
[19:04:37] <strcat> ãƒƒ my new smiley face
[19:05:00] <strcat> watch out cat with smiling eyes
[19:05:11] *** Joins: \n (NDesaulnie@43CB6079.66715431.D25A875A.IP)
[19:05:51] <strcat> ugh, why is the windows bot so slow
[19:06:13] <brson> Amanieu: there isn't really a proper channel. the mailing list is usually the easiest way to get the right kind of attention
[19:06:15] *** Quits: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP) (Ping timeout)
[19:06:36] <flu_> brson: can you link me to the mailing list?
[19:06:55] <steven_is_false> strcat: Is it process overhead? I don't know.
[19:06:58] <flu_> must have allll the rust action
[19:07:29] <cmr> https://mail.mozilla.org/pipermail/rust-dev/
[19:07:48] <flu_> thanks cmr - that linked to the signup page
[19:07:50] *** Joins: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP)
[19:08:42] <kimundi> If rust is mature, I'm all for a 'cuteicode' lib wich defines traits with assoziated constants, types and methods like Ï€, Îµ, fn âˆ€(), fn âˆƒ(), type â„• ... etc
[19:09:28] <jensnockert> kimundi: Everything is better in full width.
[19:09:51] <kimundi> 'full with'?
[19:10:02] <steven_is_false> kimundi: Do we have a big number library?
[19:10:14] <cmr> extra::bigint iirc
[19:10:17] <kimundi> there ie extra::bignum
[19:10:34] *** Joins: bytbox (s@moz-1BF85CE5.wireless.umd.edu)
[19:10:47] <steven_is_false> But how will we do â„?
[19:11:22] <kimundi> With your keyboard, if possible :)
[19:11:29] <steven_is_false> :)
[19:11:30] <jed> make everything a range
[19:11:42] <kimundi> (I'm talking about a optional 'fun' library here)
[19:12:14] <steven_is_false> What would the âˆ€ function do?
[19:13:01] <steven_is_false> let evens = do âˆ€ |Ï‡| { Ï‡ % 2 == 0 }?
[19:13:01] <Amanieu> bool predicate + range?
[19:13:12] <Luqman> .âˆ€ instead of .all and .âˆƒ instead of .any?
[19:13:20] <kimundi> Ah, dunno. Just thought it could smiply be a alias for iter.all() or sth like that
[19:13:38] <EXetoC> if only I had a math/programming keyboard
[19:13:58] <steven_is_false> A question about mozillians, C++ isn't an allowed skill. Do I just put CXX instead?
[19:13:59] *** Quits: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP) (Ping timeout)
[19:14:23] <EXetoC> where you got a gazillion weird symbols on the right side
[19:14:28] <tjc> steven_is_false: looks like https://mozillians.org/en-US/group/cplusplus/
[19:14:41] <cmr> "This Week In Rust" will likely be a day late today, my high school graduation is on saturday
[19:14:45] <cmr> *this week
[19:14:48] <mcpherrin> Luqman: Soon enough we'll end up turning into APL
[19:14:53] <steven_is_false> tjc: Thanks.
[19:15:16] *** Joins: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP)
[19:15:19] <kimundi> EXetoC: I'm using http://www.neo-layout.org/
[19:15:38] * brson not able to operate bugpoint successfully
[19:16:28] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Textual IRC Client: www.textualapp.com)
[19:16:37] <strcat> heh, the 'can't import from trait' thing is really annoying for my gmp bindings
[19:16:50] <strcat> let x: Mpz = 5; // what I want
[19:16:57] *** Quits: tjc (tjc@moz-76C711F4.hsd1.wa.comcast.net) (Quit: zzzzzzzzzz)
[19:17:00] <strcat> let x: Mpz = IntConvertible::from_int(5); // what I have
[19:17:19] <strcat> generic literals like haskell would be so nice ;p
[19:18:07] *** Joins: tjc (tjc@moz-76C711F4.hsd1.wa.comcast.net)
[19:18:07] *** ChanServ sets mode: +o tjc
[19:21:50] <strcat> heh 0.6 was certainly a long time ago. I forgot that it was before iterators were even possible with methods
[19:21:53] *** Quits: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP) (Input/output error)
[19:21:53] <flu_> brson: can I get some r? action on https://github.com/mozilla/rust/pull/7033 please
[19:22:39] *** Quits: mje (Mibbit@moz-7F01A599.hsd1.pa.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[19:23:46] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[19:24:03] <steven_is_false> flu_: Hoorah, for bug fixes!
[19:24:10] <engla> steven_is_false: I don't think âˆ€ is a letter (so it can't be in identifiers)
[19:24:39] <steven_is_false> rusti: let âˆ€ = 0; âˆ€
[19:24:40] -rusti- <anon>:10:9: 10:12 error: unknown start of token: 8704
[19:24:40] -rusti- <anon>:10          let âˆ€ = 0; âˆ€
[19:24:40] -rusti-                    ^~~
[19:24:40] -rusti- application terminated with error code 101
[19:24:45] <flu_> engla: it's the universal quantifier! :-)
[19:24:50] <steven_is_false> engla: I guess not.
[19:25:04] <engla> rusti: let Î± = 1; Î±
[19:25:05] -rusti- 1
[19:25:11] <engla> only letters :)
[19:25:28] <flu_> if anything it should be an operator for iterables. haha
[19:25:35] <steven_is_false> rusti: let Î“ = 0; Î“
[19:25:37] -rusti- 0
[19:25:40] <mcpherrin> rusti: let â˜ƒ = "snowman"; â˜ƒ
[19:25:40] -rusti- <anon>:10:9: 10:12 error: unknown start of token: 9731
[19:25:40] -rusti- <anon>:10          let â˜ƒ = "snowman"; â˜ƒ
[19:25:40] -rusti-                    ^~~
[19:25:41] -rusti- application terminated with error code 101
[19:25:50] <steven_is_false> rusti: let Î“Î˜ = 0; Î“
[19:25:52] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/dKUY
[19:26:03] <steven_is_false> rusti: let Î“Î˜ = 0; Î“Î˜
[19:26:04] -rusti- 0
[19:26:11] <steven_is_false> rusti: Î˜
[19:26:12] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/cgFS
[19:26:28] <slimer> rusti: loop { println("hi!"); }
[19:26:29] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/DMOF
[19:26:42] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[19:26:46] <mcpherrin> rusti: let á…á…á…á… = 0; á…á…á…á…
[19:26:46] <steven_is_false> We could have a sum method named Î£
[19:26:48] -rusti- 0
[19:27:02] <jed> rusti has impressive knowledge of greek
[19:27:32] <Earnestly> steven_is_false: Now we're getting into APL territory: Î», Î”, Ï€, etc.
[19:27:50] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[19:28:13] <EXetoC> Âº
[19:28:19] <rpearl> https://github.com/mozilla/rust/issues/666 nobody took it seriously though :<
[19:28:27] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[19:28:42] <Earnestly> EXetoC: â„–
[19:28:43] <mcpherrin> rusti: let â…– = 0.4; â…–
[19:28:43] -rusti- <anon>:10:9: 10:12 error: unknown start of token: 8534
[19:28:44] -rusti- <anon>:10          let â…– = 0.4; â…–
[19:28:44] -rusti-                    ^~~
[19:28:44] -rusti- application terminated with error code 101
[19:28:48] <jed> rusti: let Ð”=5; Ð”
[19:28:49] -rusti- 5
[19:28:51] *** Joins: milinda (Mibbit@moz-A7272ABE.dhcp-bl.indiana.edu)
[19:28:58] <mcpherrin> I'm sad I can't use â…–
[19:29:47] <vcl> So I'm trying to run rust test suite by issuing "make check", but it just runs formatting check, finds some errors in files I haven't touched and stops...
[19:29:52] * mcpherrin is forking rust and disallowing ASCII
[19:30:04] <mcpherrin> all variable names must be a single unicode character
[19:30:06] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Quit: Jesse)
[19:30:08] <flu_> strcat: are you thestinger on github?
[19:30:13] <strcat> flu_: yes
[19:30:22] <vcl> is "make check" still the right command?
[19:30:36] <flu_> looking at this - https://github.com/mozilla/rust/issues/7014 - might make more sense as part of an enumerable trait that extends iterator
[19:30:55] <flu_> seems like having a definite size is an unnecessary constraint for types that can be iterated
[19:31:37] <strcat> flu_: that's why it would be a hint and use a default method
[19:32:01] <flu_> is 'hint' meaningful in rust? like, is that a #[something] sort of thing?
[19:32:01] *** Joins: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP)
[19:32:13] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Client exited)
[19:32:35] <strcat> fn size(&self) -> Option<uint> { None }
[19:32:59] *** Quits: \n (NDesaulnie@43CB6079.66715431.D25A875A.IP) (Quit: \n)
[19:33:13] <flu_> yeah, making it return Option helps negate that, just feels slightly weird to me :-P  - does having that function help with some of your external iterator implementations?
[19:33:24] <strcat> it helps with performance
[19:33:38] <strcat> collect can pass along the size hint
[19:33:54] <strcat> or it could be
[19:34:00] <strcat> fn size(&self) -> SizeHint
[19:34:11] <strcat> enum SizeHint { Infinite, Length(uint), Unknown }
[19:34:34] <strcat> like D
[19:34:41] <strcat> http://www.python.org/dev/peps/pep-0424/
[19:34:43] <flu_> i like that - it would be way less ambiguous than the meaning of 'None'
[19:35:00] <flu_> ambiguous from just looking at the code, assuming the dev reads no documentation... which is usually the case
[19:35:03] <bblum> infinite
[19:35:03] <bblum> nice.
[19:36:25] <strcat> anyway would be nice to have it a default method
[19:36:43] <flu_> yeah - default methods are supposed to be coming soon-ish, right?
[19:36:53] <strcat> I hope!
[19:36:57] <sully> yeah
[19:36:57] *** Joins: brendan (brendaneic@2557E599.66715431.D25A875A.IP)
[19:37:00] <strcat> I want to make all the IteratorUtil ones default methods
[19:37:06] <sully> well, default methods are already here, but are disabled
[19:37:10] <sully> because they are super broken
[19:37:32] <sully> I have fixed a couple of bugs, but haven't pushed them yet
[19:37:50] <sully> working on a couple involving polymorphism
[19:38:12] <strcat> anyway I'm tempted to rename it to be more D-like so we can make slices generic
[19:38:13] <flu_> sully: are we going to introduce any sort of explicit override notation to help with that?
[19:38:16] *** Parts: steven_is_false (user@moz-144077DE.bchsia.telus.net) (ERC Version 5.3 (IRC client for Emacs))
[19:38:23] <strcat> Iterator -> ForwardRange, next -> pop_front
[19:38:33] <strcat> and &[T] and &mut [T] can *be* the iterators for vectors
[19:38:41] <sully> flu_: no, I odn't think so
[19:38:51] <strcat> and then we can have pop_back (they're double ended ranges)
[19:39:10] <strcat> and reverse (we'll still need wrappers for reverse iterators)
[19:39:47] *** Joins: txdv (quassel@966F3542.3BA477DA.14C26596.IP)
[19:39:53] <flu_> strcat: trying to follow. how do you mean that &[T] would be the iterator?
[19:40:10] <strcat> it would implement Iterator (probably called ForwardRange)
[19:40:22] <flu_> oh, right
[19:40:31] <strcat> xs.slice(1, 3).take_while(|&x| x < 3).fold(0, |a, b| a + b)
[19:40:50] <flu_> I see now. The name change implies that it is more slice-y and less 'a thing that iterates'
[19:40:53] <acrichto> tjc: it happened again http://buildbot.rust-lang.org/builders/auto-mac/builds/1666/steps/test/logs/stdio :(
[19:41:06] <strcat> flu_: yeah since we could have ones that implement pop_back too
[19:41:10] <strcat> and random access ranges
[19:41:20] <tjc> acrichto: ok, I suggest just marking that rustpkg test as ignore everywhere, since it seems to keep happening, and there's already an issue open
[19:41:21] <tjc> sorry!
[19:41:40] <acrichto> oh no problem, I guess that doesn't really have any more helpful logs than before...
[19:41:45] *** Joins: berak (chatzilla@60A244BC.5E545589.16E13E53.IP)
[19:41:59] <strcat> http://buildbot.rust-lang.org/builders/incoming-full-win/builds/1478 yay!
[19:42:22] <strcat> now watch it break on OS X too
[19:42:48] *** Joins: ghrust (ghrust@E7A4CCE2.6A2AE50.F3114085.IP)
[19:42:48] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 1441dae55 to 14d0b1979: 02http://git.io/N3iJvQ
[19:42:48] *** Parts: ghrust (ghrust@E7A4CCE2.6A2AE50.F3114085.IP) ()
[19:42:49] *** Joins: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP)
[19:42:50] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/NwXKkQ
[19:42:50] <ghrust> 13rust/06auto 1412203a7 15Ron Dahlgren: Check stk before dereferencing...
[19:42:50] <ghrust> 13rust/06auto 14301f900 15Ron Dahlgren: Assert stk rather than checking null...
[19:42:50] <ghrust> 13rust/06auto 14965522e 15bors: auto merge of #7033 : influenza/rust/rust-7022, r=brson...
[19:42:53] *** Parts: ghrust (ghrust@5FEF1C87.6A2AE50.F3114085.IP) ()
[19:43:25] <acrichto> tjc: r? https://github.com/mozilla/rust/pull/7056
[19:43:48] <tjc> acrichto: approved
[19:43:56] <acrichto> tjc: thanks!
[19:43:58] <tjc> np
[19:44:28] <strcat> flu_: http://dlang.org/phobos/std_range.html that's what D has
[19:45:04] <strcat> slices are a forward range, bidirectional (can access/pop from the back) and random access
[19:45:06] *** Joins: alisdair (textual@moz-EBE9F394.bchsia.telus.net)
[19:45:19] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[19:45:30] *** Quits: txdv (quassel@966F3542.3BA477DA.14C26596.IP) (Ping timeout)
[19:45:57] <strcat> well input range and forward range are essentially the same. it's just a forward range would be a range with Clone in rust
[19:46:34] <strcat> don't need a trait for it
[19:46:48] <flu_> yeah
[19:47:03] <strcat> anyway. might as well steal all the nice adaptors from python/haskell/D too :)
[19:47:38] <flu_> definitely!
[19:49:15] *** Joins: MaikKlein1 (maik@moz-7BA8C29B.dip0.t-ipconnect.de)
[19:49:27] <flu_> so scala collections seemed to take the approach of explicitly defining pretty much every common usecase - 'zipWithIndex' being a prime example. I wonder if it's worth the library noise to have that versus just saying, 'use zip and a range'
[19:49:52] <strcat> flu_: they might use use external iterators
[19:49:55] <strcat> might not use*
[19:50:03] *** Quits: orshem (orshem@19491716.F0FDCE77.E3D28531.IP) (Ping timeout)
[19:50:17] <strcat> and then they'd have to define zip on every container for iterating over 2 containers of the same type
[19:50:27] <flu_> heh, right, which would lead to the method explosion you mentioned the other day
[19:50:34] *** Joins: sk (sk@61A494B3.BA40E8A.AAC02D62.IP)
[19:50:36] <strcat> oh nvm
[19:50:38] <strcat> http://www.scala-lang.org/docu/files/collections-api/collections.html
[19:50:41] <strcat> err
[19:50:55] <strcat> well, click iterators in the side-bar ;p
[19:50:55] *** Quits: alisdair (textual@moz-EBE9F394.bchsia.telus.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[19:51:07] *** Quits: Blei (philipp@moz-96D25F7A.cust.bluewin.ch) (Quit: WeeChat 0.4.1)
[19:51:18] <flu_> yeah, trying to remember what 'foreach' was syntactic sugar for
[19:53:46] <flu_> oh, each type defines foreach as a method
[19:54:05] <strcat> there's a benefit to leaving has_next and next as separate things but also huge drawbacks. it sometimes lets you avoid copies but it also means you have to add in failure and it won't optimize as well
[19:54:08] <flu_> strangely, they chose to push down a 'size' method, but also a 'hasDefiniteSize' method
[19:54:12] <strcat> I like Option for next
[19:54:55] * strcat isn't sure why scala has has_next though
[19:55:05] <strcat> doesn't seem to have a purpose if you have gc for everything...
[19:56:19] <MaikKlein1> wow this looks really interesting http://smallcultfollowing.com/babysteps/blog/2013/06/11/data-parallelism-in-rust/
[19:59:27] *** Parts: berak (chatzilla@60A244BC.5E545589.16E13E53.IP) ()
[20:00:09] *** Quits: eschweic (Adium@2557E599.66715431.D25A875A.IP) (Quit: Leaving.)
[20:03:23] <engla> flu_: zipWithIndex, is that just rust's .enumerate() ?
[20:03:38] *** Joins: eschweic (Adium@2557E599.66715431.D25A875A.IP)
[20:05:07] <slimer> any suggestions for good networking examples?
[20:05:08] *** Joins: \n (NDesaulnie@2557E599.66715431.D25A875A.IP)
[20:05:30] <slimer> I know sockets are fairly young but just curious
[20:05:40] *** Joins: carter (carter@moz-BDFE46F6.nyc.biz.rr.com)
[20:06:02] <flu_> engla: not sure about enumerate() - zipWithIndex is basically fn(&self: Iterable) -> &[(T,uint)]
[20:06:11] <flu_> where I just made up iterable. ha
[20:07:31] *** Quits: eschweic (Adium@2557E599.66715431.D25A875A.IP) (Quit: Leaving.)
[20:07:41] <engla> ok
[20:07:57] <engla> x.enumerate() is  Counter::new(0,1).zip(x)
[20:08:12] *** Joins: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net)
[20:08:37] *** Quits: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net) (Max SendQ exceeded)
[20:08:48] *** Joins: Jesse (jruderman@2557E599.66715431.D25A875A.IP)
[20:08:59] <flu_> engla: I have a lot to learn in the rust std and extra libs
[20:09:03] <flu_> :-P
[20:09:49] *** Joins: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP)
[20:09:49] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14965522e to 14d0b1979: 02http://git.io/N3iJvQ
[20:09:49] *** Parts: ghrust (ghrust@F6EE6DE3.6A2AE50.F3114085.IP) ()
[20:09:52] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[20:09:52] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/jM24tg
[20:09:52] <ghrust> 13rust/06auto 140174ef9 15Nick Desaulniers: Remove extra::par fixes #5626
[20:09:52] <ghrust> 13rust/06auto 144a2e6df 15Nick Desaulniers: fix merge conflicts due to bit rot
[20:09:52] <ghrust> 13rust/06auto 140454996 15bors: auto merge of #7034 : nickdesaulniers/rust/removePar, r=brson...
[20:09:55] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[20:09:56] <engla> learn it quick before it changes 
[20:10:45] <flu_> I know right? haha
[20:12:38] <nmatsakis> strcat: re-ping
[20:13:06] <strcat> nmatsakis: pong
[20:14:06] <nmatsakis> strcat: so I was wondering whether you still thought internal iterators were neccessary
[20:14:35] <strcat> nmatsakis: I don't really think they are - but it's definitely easier to write them in some cases
[20:14:46] <strcat> but as soon as you've written an external one, the internal one might as well be thrown out
[20:15:09] <slimer> anyone have suggestions for good examples of networking? I know sockets are fairly young, but curious
[20:15:10] <slimer> thanks!
[20:15:30] <strcat> treemap's internal iterator for example
[20:15:32] <strcat>     node.each(|x| each(&x.left, f) && f(&x.key, &x.value) && each(&x.right, f))
[20:15:57] <nmatsakis> strcat: yeah, so I'm ... feeling like I'd prefer to see us just use one or the other, and given the choice, I'd prefer external iterators. It can be a pain to write, it's true but it's not *that* bad. People do it for Java all the time. Maybe a syntax extension could do the yield transform, too.
[20:16:10] *** Quits: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP) (Quit: eatkinson)
[20:16:21] <strcat> nmatsakis: yeah, we've started purging most of the internal iterators wherever we have external ones already
[20:16:32] <vcl> I'm trying to run Rust test suite by issuing "make check", but it just runs formatting check, finds some errors in files I haven't touched and stops... "make check" is not supposed to work this way, is it?
[20:16:35] <vcl> anyone?
[20:16:43] <strcat> nmatsakis: I'm not sure if there's a point in leaving around iter.rs
[20:16:43] <nmatsakis> strcat: I kind of like the idea of removing the `for` transform...
[20:16:54] <strcat> the internal iterator adaptors are such a pain to use/read
[20:17:04] <nmatsakis> strcat: that is, one could adapt the for syntax to use external iterators.
[20:17:14] <nmatsakis> strcat: but it wouldn't be the "closure transform" it is today.
[20:17:46] <strcat> nmatsakis: yeah I suggested adding another form of it, but I hope we can get rid of the internal one for simplicity
[20:17:57] <strcat> until we do have something like yield, they can really be a huge pain to make though
[20:18:06] <strcat> if you have a complex tree
[20:18:07] *** Joins: devinus (devinus@DAEC7122.372FE49C.29F95E0F.IP)
[20:18:14] <flu_> brson: https://github.com/mozilla/rust/pull/7033 - I'm two for two on needing second checks ;-(
[20:18:31] <nmatsakis> strcat: yes, that's true. I guess I just...don't care that much. You write an iterator once.
[20:19:08] <nmatsakis> strcat: it seems weird to support two incompatible techniques
[20:19:13] <strcat> nmatsakis: I agree
[20:19:14] <nmatsakis> strcat: and I am wary of overloading for to be smart
[20:19:22] *** Quits: tikue (tkuehn@2557E599.66715431.D25A875A.IP) (Quit: tikue)
[20:19:30] <nmatsakis> strcat: because it sounds...kinda hard and like it might interact with inference and other things, I don't know.
[20:19:41] <strcat> nmatsakis: I don't think we really need 'for' sugar for internal iterators anyway
[20:19:48] <strcat> break and return don't do what they should
[20:19:55] *** Quits: seth (seth@36F4FFD0.D917DD2F.B66DD36E.IP) (Input/output error)
[20:19:57] <strcat> using "do" statements is more clear, imo
[20:19:58] <nmatsakis> strcat: well, they're not guaranteed to do what they should.
[20:20:00] <strcat> and not much uglier
[20:20:11] <strcat> nmatsakis: yeah so they act strangely with borrow checking
[20:20:17] <strcat> people often ask about weird problems with our for loops
[20:20:19] <nmatsakis> strcat: one positive benefit: return could just mean 'return from local closure'
[20:20:50] <nmatsakis> strcat: yeah sp o
[20:20:53] <nmatsakis> strcat: oops
[20:21:02] <flu_> I'm not really sure what yield semantics give you that cant be accomplished with Options and flat_map
[20:21:10] <nmatsakis> strcat: yeah so I'm tentatively in favor of moving to external iterators
[20:21:45] <strcat> flu_: it makes it much easier to write iterators that would use the call stack (recursion) if written as internal ones
[20:22:05] <strcat> nmatsakis: I know pcwalton likes them because we can compile them faster too ;p
[20:22:10] *** Quits: Jesse (jruderman@2557E599.66715431.D25A875A.IP) (Quit: Jesse)
[20:22:12] <strcat> since loop bodies won't be closures
[20:22:53] <nmatsakis> strcat: there are some other issues that would be addressed,
[20:23:00] <nmatsakis> strcat: for example move semantics inside a for loop can be cleaned up
[20:23:17] <nmatsakis> strcat: you can write fold safely in the general case
[20:23:35] <nmatsakis> that is, "for x.each |i| { a = f(a, i); }"
[20:23:47] <nmatsakis> is not permitted now because the reference to `a` in `f(a, i)` moves out of an upvar
[20:24:01] *** Joins: Jesse (jruderman@2557E599.66715431.D25A875A.IP)
[20:24:03] *** Joins: dualhbridge (dad@moz-F0E83B75.dyn-adsl.midmaine.net)
[20:24:25] * strcat always hits the one where 'return &mut x' conflicts with itself
[20:24:43] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[20:24:43] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[20:25:58] <strcat> nmatsakis: internal iterators just seem to bump against many rust-specific things - we can't represent them as a trait, they hit borrowck issues because of the signature of the closure, etc.
[20:26:09] <strcat> they are a fine concept but a huge pain in rust
[20:26:38] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[20:26:44] *** Joins: ssbr (ssbr@moz-B9B9415A.s-ip.magma.ca)
[20:26:51] <strcat> I kind of gave up on iter.rs after realizing I needed to make _ref versions of everything
[20:27:20] *** Joins: HollyRain (HollyRain@moz-50A83091.dyn.user.ono.com)
[20:27:48] <HollyRain> finally, does the GC is going to be removed of the language?
[20:28:20] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[20:28:44] *** Quits: \n (NDesaulnie@2557E599.66715431.D25A875A.IP) (Quit: \n)
[20:28:49] <kimundi> Is there anyway to prototype a syntax extension without doing "trail and error in libsyntax - complie rustc - repeat"?
[20:29:15] <kimundi> HollyRain: It might get moved to the std lib
[20:29:25] <strcat> kimundi: they will be dynamically loadable one day, there's work started on it
[20:30:24] <strcat> nmatsakis: and internal iterators are our biggest source of abusing forced inline - LLVM really doesn't like them
[20:30:30] <kimundi> pcwalton: Btw, is there someplace I should put my @-smartpointer proposal so that is better findable? Maybe copy it to the wiki?
[20:30:37] <strcat> I think all loop bodies are force inlined right now in the compiler
[20:30:45] *** Joins: \n (NDesaulnie@2557E599.66715431.D25A875A.IP)
[20:30:49] *** Quits: Jesse (jruderman@2557E599.66715431.D25A875A.IP) (Quit: Jesse)
[20:31:43] *** Quits: msingle (Thunderbir@moz-930E5D97.hr.hr.cox.net) (Ping timeout)
[20:32:18] <nmatsakis> strcat: yeah, it seems like a win all around to me.
[20:33:31] *** Joins: Jesse (jruderman@2557E599.66715431.D25A875A.IP)
[20:33:43] *** Joins: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP)
[20:33:43] *** Quits: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP) (Z:lined (Open Proxy found on your host. Please visit www.blitzed.org/proxy?ip=115.68.131.49 for more information.))
[20:33:58] *** Quits: HollyRain (HollyRain@moz-50A83091.dyn.user.ono.com) (Quit: bye, bye)
[20:34:06] *** Quits: Palmik (palmik@moz-5CA3F354.pks.muni.cz) (Quit: Lost terminal)
[20:34:39] *** Quits: deepdog (deepdog@moz-490E834C.client.mchsi.com) (Quit: Leaving)
[20:34:39] *** Quits: themgt (themgt@moz-248BBB96.dhcp.gnvl.sc.charter.com) (Quit: themgt)
[20:35:36] *** Quits: brendan (brendaneic@2557E599.66715431.D25A875A.IP) (Quit: brendan)
[20:37:14] *** Quits: pyrac (pyrac@moz-B2CB8564.w92-156.abo.wanadoo.fr) (Quit: pyrac)
[20:37:22] *** Quits: dylukes (dylukes@moz-B5418F79.hsd1.pa.comcast.net) (Quit: ["Textual IRC Client: www.textualapp.com"])
[20:37:27] *** Joins: brendan (brendaneic@2557E599.66715431.D25A875A.IP)
[20:40:24] *** Quits: dimension (dimension@moz-4CCD79C5.dsl.dynamic.simnet.is) (Quit: Leaving)
[20:40:56] <graydon> worst part about debugging errors spat out by a fuzzer: deciding if they are actually errors, or bugs in the fuzzer
[20:41:45] *** Quits: jaen (jaen@moz-606152AD.play-internet.pl) (Quit: WeeChat 0.4.1)
[20:42:34] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[20:44:33] *** Quits: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net) (Ping timeout)
[20:45:48] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[20:46:35] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[20:48:03] *** Joins: steven_is_false (user@moz-144077DE.bchsia.telus.net)
[20:48:07] <Luqman> r? https://github.com/mozilla/rust/pull/7064
[20:48:40] *** Joins: seth (seth@2557E599.66715431.D25A875A.IP)
[20:49:02] *** Joins: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP)
[20:49:03] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 140454996 to 14d0b1979: 02http://git.io/N3iJvQ
[20:49:03] *** Parts: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP) ()
[20:49:40] <steven_is_false> Hi! What is the current state of https://github.com/mozilla/rust/issues/6089 ?
[20:49:49] <graydon> r+ thanks Luqman
[20:50:10] <doener> if you're already at it... r? https://github.com/mozilla/rust/pull/7069
[20:50:40] <graydon> steven_is_false: pending new-sched / io interface
[20:50:45] <graydon> as pointed out in the bug
[20:50:51] <graydon> doener: checking
[20:51:03] <Amanieu> so what exactly is &const T?
[20:51:09] <Amanieu> it doesn't seem to be documented anywhere
[20:51:24] <kimundi> Amanieu: read only, but not immutable
[20:52:10] <graydon> doener: nice, r+
[20:52:14] <doener> thanks!
[20:52:31] <heftig> wasn't it the other way around? &const T cannot have any mutable fields?
[20:52:42] <kimundi> That is, if you read from a &const twice you might get different values, something than can never happen with &
[20:52:43] <heftig> i.e. no &mut and no @mut fields?
[20:53:02] *** Joins: devbug (quassel@moz-E1DE087C.bchsia.telus.net)
[20:53:04] <graydon> Amanieu: it was added long ago when mutability didn't inherit and thus we had a lot more methods working on values that had "interior" mutability, but that only read the value
[20:53:16] <Amanieu> so it's a &T that can be aliased with a &mut T?
[20:53:38] <kimundi> kinda, yeah
[20:53:41] <graydon> Amanieu: now that we have inherited mutability (from the owner) it tends to be the case that methods that only read just take &t and the compiler borrows &mut t to &t just fine
[20:53:48] <graydon> so it's kinda legacy, we're discussing removing it
[20:53:56] <graydon> excess complexity, leads to conversations like this one :)
[20:54:06] <Amanieu> also the use of the 'const' keyword is very misleading
[20:54:09] <graydon> there are a couple cases where it's slightly useful, but not clear if they can't be worked around
[20:54:15] <Amanieu> since it's obviously not constant
[20:54:18] <graydon> yeah
[20:54:23] <strcat> heftig: &const can alias &mut basically
[20:54:45] <sp3d> sounds more like "volatile"?
[20:54:45] <graydon> it was because it was a subtype of & and &mut. "I promise to use this to only read through it"
[20:54:48] <strcat> heftig: unlike &, you can't take a deeper pointer inside of &const (potentially into an enum or container)
[20:54:55] <graydon> i.e. it's const from the perspective of the person you pass it to
[20:54:57] <graydon> they are not to write to it
[20:55:20] <graydon> but anyway, it's mostly vestigial and I think more confusion than it's worth at this point
[20:55:45] <steven_is_false> Is it possible to make it a datatype? Like BorrowedConst <T>?
[20:56:01] <graydon> I'm not sure that'd make it any clearer
[20:57:09] *** Joins: tcsc (tcsc@moz-ADC0ED45.hsd1.ct.comcast.net)
[20:57:12] <steven_is_false> graydon: Well you said worth it so wouldn't it be easier to implement it as a datatype than a builtin?
[20:57:40] *** Quits: Jesse (jruderman@2557E599.66715431.D25A875A.IP) (Quit: Jesse)
[20:58:18] <graydon> I said I thought it was more confusion than it was worth. I'd prefer to just remove the concept and see if we can use different idioms in the cases it's used.
[20:58:29] <steven_is_false> graydon: Fair enough
[20:58:35] <steven_is_false> Okay, so I don't really get the IO rewrite stuff.
[20:58:46] <graydon> datatypes that the compiler needs to know about are a little lower burden than type qualifiers, but not a ton
[20:59:12] *** Quits: maxli (maxli@F2D29657.F60B0462.67AC9B1.IP) (Quit: Leaving.)
[20:59:17] <graydon> steven_is_false: the IO system is being rewirtten to integrate with the scheduler, because the two are intrinsically related and our previous attempts to deal with them separately made for a big, slow mess
[20:59:35] <steven_is_false> graydon: Okay.
[20:59:42] *** Quits: dualhbridge (dad@moz-F0E83B75.dyn-adsl.midmaine.net) (Quit: Leaving.)
[21:00:10] <steven_is_false> graydon: Isn't there a bunch of work going on in moving the tasking stuff to Rust already?
[21:00:18] <graydon> steven_is_false: yes. same work.
[21:00:27] <steven_is_false> graydon: Okay.
[21:00:55] <graydon> https://github.com/mozilla/rust/issues/4419 is the metabug
[21:01:08] <graydon> there's a ton of documentation on what's going on. brian has been very thorough.
[21:01:26] <steven_is_false> graydon: Anyway I can help?
[21:01:30] <graydon> sure!
[21:01:57] <graydon> see the "current work items" section? :)
[21:02:12] *** Quits: brendan (brendaneic@2557E599.66715431.D25A875A.IP) (Quit: brendan)
[21:02:17] <graydon> in particular, there's a lot pending in the subtask https://github.com/mozilla/rust/issues/4248
[21:02:28] <graydon> we don't have much of the new IO _API surface_ written yet
[21:02:57] *** Quits: Ralith (ralith@moz-50F3C77.vc.shawcable.net) (Ping timeout)
[21:02:58] <graydon> brian has done a TCP version. we could really use a version that does, say, file, stdio and pipes
[21:03:52] <jensnockert> I'm getting some errors when testing my changes, I'm getting stack overflows on test/run-pass/assert-approx-eq-macro-success.rs, test/run-pass/block-arg.rs, test/run-pass/const-binops.rs, test/run-pass/utf8_idents.rs ?
[21:03:57] <jensnockert> Is this considered normal?
[21:04:10] *** Joins: themgt (themgt@moz-248BBB96.dhcp.gnvl.sc.charter.com)
[21:04:16] <jensnockert> I have just changed some small stuff in libstd.
[21:04:26] <steven_is_false> If IO is being integrated into the scheduler how does that effect projects that want to integrate a main loop (such as GTK's) into the system.
[21:04:42] *** Quits: themgt (themgt@moz-248BBB96.dhcp.gnvl.sc.charter.com) (Client exited)
[21:04:58] <graydon> steven_is_false: it's designed to support just this sort of case
[21:05:21] <steven_is_false> graydon: So https://github.com/mzabaluev/grust/issues/4 is going to be possible?
[21:05:22] <graydon> steven_is_false: namely, that any given rust program has _one_ event-loop-and-IO-scheduler active at a time
[21:06:09] <graydon> but it can be replaced. the default is uv and our coroutine scheduler. but you ought to be able to switch out for things like glib, qt, nspr or some other event loop
[21:06:59] <graydon> steven_is_false: probably, yes. we're starting on uv because it runs very well on other platforms. but brian's design for the IO system is based on a factory model wherein the event loop can be switched-out.
[21:07:21] <steven_is_false> graydon: Cool!
[21:07:31] <graydon> at this point I suspect there'll be a lot of accidental coupling
[21:07:52] <graydon> such that switching out uv _initially_ will be some work. but it's one of the main concepts driving the design.
[21:08:14] <graydon> we know the event loop and coroutine system have to know about one another, but are reluctant to say "all rust programs must always use uv as an event loop"
[21:08:35] <graydon> so went with "rust programs (written on top of our libstd) will use uv as an event loop unless they provide their own"
[21:09:13] <graydon> at least that's the plan. in reality we will see how it pans out. it currently runs and can do blocking TCP at a decent clip (much faster than the current system)
[21:09:20] *** Joins: brendan (brendaneic@2557E599.66715431.D25A875A.IP)
[21:09:29] <graydon> and when you make a blocking TCP call your coroutine deschedules. that's the main thing :)
[21:10:02] <steven_is_false> Okay.
[21:11:02] <graydon> we were finding that every OS / platform / interop scenario wanted its own event loop to be running the show, so this seemed like the only way
[21:11:28] <bstrie> ah, was going to ask if &const was going away but it looks like that's just been answered
[21:11:31] <bstrie> +1 to removing it
[21:11:49] *** Joins: eschweic (Adium@2557E599.66715431.D25A875A.IP)
[21:11:57] *** Joins: tikue (tkuehn@2557E599.66715431.D25A875A.IP)
[21:12:07] *** Joins: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP)
[21:12:07] <steven_is_false> graydon: I hate being stuck inside library main loops!
[21:13:25] <Eridius> if &const goes away, what replaces it?
[21:14:22] <graydon> Eridius: depends on the use-case
[21:14:58] <graydon> Eridius: that question -- which use-cases still require it, in light of current mutability system -- is the question requiring a careful answer before we consider removing it.
[21:15:28] <flu_> Anyone around to get bors to fire on https://github.com/mozilla/rust/pull/7033 again? I forgot to commit the tab/spaces fix the first time around :-/
[21:15:32] *** Quits: MaikKlein1 (maik@moz-7BA8C29B.dip0.t-ipconnect.de) (Ping timeout)
[21:15:34] <graydon> right now we're just considering it in terms of "a hunch that no important use-cases remain that can't be expressed equally well with a different, existing construct"
[21:16:15] <graydon> flu_: r+
[21:16:27] <Eridius> graydon: in my code right now I have vec::bytes::copy_memory(output, vec::const_slice(output, n, m), m-n)
[21:16:31] *** Quits: bytbox (s@moz-1BF85CE5.wireless.umd.edu) (Ping timeout)
[21:16:33] <flu_> graydon: thx
[21:16:34] <Eridius> I don't see how to express that without &const
[21:17:38] <graydon> &mut[] should borrow to &[]
[21:18:13] <Eridius> graydon: but that precludes using the &mut[] while the &[] is borrowed
[21:18:17] <graydon> though that's an interesting one since your slices are disjoint
[21:18:50] <Eridius> graydon: in my real code, I am not in fact overlapping memory, but in the above snippet I might be (if m - n > n)
[21:18:51] *** Quits: milinda (Mibbit@moz-A7272ABE.dhcp-bl.indiana.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[21:19:13] <graydon> yes. I think it might require an unsafe helper that splits a &mut[] in two
[21:19:18] <graydon> (disjoint)
[21:19:38] <Eridius> graydon: this shoudl be possible with overlapping slices though. vec::bytes::copy_memory() is certainly documented as behaving correctly when the memory overlaps
[21:20:08] *** Quits: Blub\w (wry@moz-54CAE90C.wireless.dyn.drei.com) (Ping timeout)
[21:20:10] <graydon> tricky. I guess!
[21:20:30] <Eridius> &const solved this problem, although not terribly well
[21:20:38] *** Quits: sankha93 (Instantbir@B0ABF041.4C100BA0.8B6C1D65.IP) (Quit: Instantbird 1.4 -- http://www.instantbird.com)
[21:20:57] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[21:21:02] *** Quits: tcsc (tcsc@moz-ADC0ED45.hsd1.ct.comcast.net) (Quit: bye!)
[21:21:04] <graydon> I'd be happy to see this and any other examples you know on the mailing list?
[21:21:32] <graydon> I can imagine suggesting a variety of unsafe solutions to it; I'm not really clear on const being a "better" way of expressing it than any other, but it's certainly one way
[21:21:33] <Eridius> well this is the one I know of from my own code. I'm using the same idiom in 3 different places
[21:21:37] <graydon> ok
[21:22:03] <Eridius> there shouldn't be anything unsafe about copying memory from a &[u8] to a &mut [u8]
[21:22:14] <bblum> aww, what?? we can't close bugs from commit comments anymore?
[21:22:18] <graydon> I mean, the overlapping case does unsafe stuff that rust can't reason about anyways.
[21:22:26] <graydon> bblum: only when it lands on master
[21:22:36] <graydon> which is one reason we want to remove the distinction
[21:22:39] <graydon> (one of many)
[21:22:47] <bblum> ohhhhh.
[21:23:10] <flu_> graydon: also screws up my github streak :-P
[21:23:43] <graydon> Eridius: no, but the reason it's "safe" is beyond rust's type system's little brain. it doesn't understand much about overlapping slices, you have to fake it out with library APIs that do something arithmetically safe but declared unsafe. so it's a question of figuring out the right API here.
[21:24:37] <flu_> wait, strike my previous. Seems like proposing a pull request counts as activity
[21:24:47] <graydon> Eridius: I mean, we could make an API that takes 1 &mut[], two (pos,len) pairs, and does a copy.. it's not like there's no plausibly-safe API
[21:25:23] <Eridius> graydon: I'm just worried about it becoming overly cumbersome to do what should be a fairly simple operation
[21:25:30] <graydon> just a question of whether it happens a lot, if this is an API pattern it's worth keeping const for
[21:25:34] <graydon> costs and benefits, y'know
[21:25:46] *** Quits: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk) (Ping timeout)
[21:25:47] *** Quits: ecr (ereed@2557E599.66715431.D25A875A.IP) (Quit: Leaving.)
[21:26:15] <Eridius> moving around bytes in a ~[u8] seems like something that isn't terribly uncommon. It was certainly considered common enough to create the vec::bytes module
[21:26:42] <graydon> not what I mean. I mean common as in lots of APIs.
[21:26:50] <Eridius> for reference, if I want to copy m bytes at offset n to the front of a slice in Go, I can just say `copy(buf[:m], buf[n:])`. Trivial there
[21:26:56] <Eridius> graydon: ah. I don't know
[21:27:04] <graydon> go doesn't have any mutability control
[21:27:07] <Eridius> true
[21:27:10] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[21:27:20] *** Quits: brson (brson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[21:27:26] <Eridius> and in my most recent Go project, the lack of protection against data races was my biggest annoyance
[21:27:34] <graydon> or strict lifecycle boundaries. all references keep everything alive. it makes these sorts of things "easy" by spending elsewhere.
[21:27:55] *** Joins: tcsc (tcsc@moz-ADC0ED45.hsd1.ct.comcast.net)
[21:27:56] <\n> is there a macro like assert! that prints expected vs actual?
[21:28:07] <Eridius> assert_eq! works in tests. I don't konw if it works elsewhere
[21:28:13] <\n> thx
[21:28:14] *** Joins: ecr (ereed@2557E599.66715431.D25A875A.IP)
[21:28:32] *** Joins: brson (brson@2557E599.66715431.D25A875A.IP)
[21:28:32] *** ChanServ sets mode: +o brson
[21:28:50] <graydon> *shrug* I mean, I respect their choices. they did a nice job and it seems pretty tidy. I just think it's important not to pretend there's a free lunch.
[21:28:58] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[21:29:03] <graydon> (when there are real free lunches, I'm the first to pursue 'em!)
[21:29:18] *** Joins: nielsle (nielsle@moz-5CE8ECCD.boa.fiberby.dk)
[21:29:23] *** Joins: bytbox (s@moz-1BF85CE5.wireless.umd.edu)
[21:31:39] *** Joins: Ralith (ralith@moz-3767A14F.wireless.sfu.ca)
[21:33:28] *** Quits: Ralith (ralith@moz-3767A14F.wireless.sfu.ca) (Ping timeout)
[21:34:43] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Ping timeout)
[21:34:48] <bblum> hmm
[21:34:59] <bblum> autoref/deref won't turn a *mut T into a &mut T for me if i'm inside an unsafe block
[21:35:02] <bblum> is this intended?
[21:35:28] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[21:36:16] *** Joins: SimonSapin (simon@moz-73287A57.zone9.bethere.co.uk)
[21:36:25] <flu_> oh man. I had no idea rust's match statement includes guard expressions. rust love++
[21:37:09] <sully> hm, do we still have struct update?
[21:37:18] <strcat> yes
[21:37:26] <sully> what is the syntax?
[21:37:33] <bblum> sully: { fields, ..other_struct }
[21:38:51] <\n> isn't there a way to alias two different structs?
[21:39:11] *** Quits: devinus (devinus@DAEC7122.372FE49C.29F95E0F.IP) (Quit: Computer has gone to sleep.)
[21:39:20] <bblum> pcwalton: see ^ re auto(de)ref
[21:39:45] <steven_is_false> I'm a bit confused about the task::yield function.
[21:39:50] <pcwalton> autoderef never works on *
[21:40:00] *** Joins: ghrust (ghrust@C621748.6A2AE50.F3114085.IP)
[21:40:00] *** kimundi is now known as zz_kimundi
[21:40:00] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/bpi2CA
[21:40:00] *** Parts: ghrust (ghrust@C621748.6A2AE50.F3114085.IP) ()
[21:40:21] <bblum> i guess the idea is you should have to think about dereferencing your *Ts, huh?
[21:40:34] <steven_is_false> As I understand it's implemented in C++. and the main work is done in ctx.next->swap(ctx)
[21:40:40] <pcwalton> right
[21:40:45] <graydon> steven_is_false: ok ..
[21:41:18] *** Quits: bytbox (s@moz-1BF85CE5.wireless.umd.edu) (Ping timeout)
[21:41:18] <steven_is_false> But there doesn't seem to be a context.h header file
[21:41:19] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[21:41:50] <\n> ah type keyword
[21:41:52] <graydon> steven_is_false: src/rt/arch/<target>/context.h
[21:42:10] <graydon> steven_is_false: the work of which is in _context.S on each arch
[21:42:16] *** Joins: Jesse (jruderman@2557E599.66715431.D25A875A.IP)
[21:42:30] <flu_> what's the precise term for the 'a in 'fn foo(x &'a Bar)' ?
[21:42:38] <tjc> flu_: it's a lifetime variable
[21:42:41] <steven_is_false> graydon: Okay that makes sense then.
[21:42:48] <bstrie> the reasong that you can't borrow two &muts at the same time is because of reborrowing, right?
[21:42:55] *** Joins: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP)
[21:42:55] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/_zXf2g
[21:42:55] *** Parts: ghrust (ghrust@9C8B94D4.6A2AE50.F3114085.IP) ()
[21:42:55] <flu_> tjc: right, thanks - still trying to wrap my head around those
[21:42:57] *** Joins: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP)
[21:42:57] <ghrust> 01[13rust01] 15bors pushed 4 new commits to 06auto: 02http://git.io/S704Gw
[21:42:57] <ghrust> 13rust/06auto 1412203a7 15Ron Dahlgren: Check stk before dereferencing...
[21:42:57] <ghrust> 13rust/06auto 14301f900 15Ron Dahlgren: Assert stk rather than checking null...
[21:42:57] <ghrust> 13rust/06auto 1437c8558 15Ron Dahlgren: Replace tabs with spaces
[21:42:58] *** Parts: ghrust (ghrust@2EE61FCC.6A2AE50.F3114085.IP) ()
[21:43:09] <tjc> flu_: no prob; you've seen the borrowed pointer tutorial?
[21:43:17] <tjc> that and Niko's blog are probably the best places to go
[21:43:37] <flu_> borrowed pointer tutorial is linked from the github wiki IIRC, which blog is Niko's?
[21:43:45] <bblum> bstrie: because in order to borrow an &mut T to an &T, you need to statically freeze all mutable paths to the data, so &mut T really means "mutability ownership"
[21:43:55] <tjc> flu_: http://smallcultfollowing.com/babysteps/
[21:44:15] <flu_> ah, ok! I've found my way to that blog several times in the last few days. haha
[21:44:16] <strcat> flu_: it's linked from the tutorial too
[21:44:24] <strcat> the official one
[21:44:30] <steven_is_false> Okay so the swap function jumps to the next task, and than after a while gets jumped back to.
[21:44:41] <bstrie> bblum: is this only theoretically a problem in multithreaded code?
[21:45:12] <bblum> bstrie: no
[21:45:31] <bstrie> I'm trying to construct a single-threaded example that would be incorrect if you borrowed two &mut
[21:45:35] <bstrie> but not sure where to begin
[21:45:47] <strcat> bstrie: same things that would be invalid in other languages
[21:45:50] <strcat> iterator invalidation
[21:45:53] <strcat> changing the type stored in an enum
[21:45:59] <strcat> changing the size of a container
[21:46:03] <strcat> removing an element from a container
[21:46:14] <bblum> bstrie: let mut x = Some(...); let xp1 = &mut x; let xp2 = &mut x; let imm_xp = &*xp1; let inner_data = imm_xp.get_ref(); *xp2 = None; // inner_data invalidated
[21:46:54] <steven_is_false> So as yield is implemented right now any problems with it should be problems with scheduling, and setting ctx.next.
[21:46:54] <bblum> a complete alias analysis would be needed to know that xp1 and xp2 pointed to the same thing, so we can't know that the imm_xp borrow needs to freeze xp2 in addition to xp1
[21:47:30] <bstrie> is "complete" alias analysis undecidable?
[21:47:37] <bblum> yep
[21:47:43] <bstrie> ok :)
[21:48:49] <tjc> Rice's Theorem applies
[21:48:52] <steven_is_false> How is ctx.next set? Is just going following the linked list of ctx.next 's guaranteed to always form a cycle?
[21:48:56] <tjc> every interesting static analysis is undecidable :-)
[21:49:01] <bstrie> haha
[21:49:06] <steven_is_false> And pass through every thread?
[21:49:10] <tjc> that's more or less what it really says
[21:49:17] <tjc> also known as the full employment theorem for compiler writers
[21:49:23] <bblum> tjc: :3
[21:49:37] *** Joins: alisdair (textual@BB0336C3.D2943E17.C579BC3E.IP)
[21:49:38] <tjc> well, it's not quite the same theorem, but a related one
[21:49:46] *** Quits: alisdair (textual@BB0336C3.D2943E17.C579BC3E.IP) (Quit: Textual IRC Client: www.textualapp.com)
[21:50:18] <bblum> of course, a good static analysis researcher knows that you can have interesting static analyses as long as you reject "questionable but okay" code too
[21:50:26] <tjc> right
[21:51:04] <steven_is_false> Suppose one has two threads doing task::spawn { loop { task::yield() } }. Could they end up just tossing the control back, and forth between them, and freeze up the application?
[21:51:36] *** Quits: saml (sam@moz-14C16814.cst.lightpath.net) (Quit: Leaving)
[21:51:42] *** Quits: lmandel (lmandel@F2D29657.F60B0462.67AC9B1.IP) (Quit: lmandel)
[21:51:48] *** Quits: ecr (ereed@2557E599.66715431.D25A875A.IP) (Quit: Leaving.)
[21:52:34] *** Quits: novabyte (Instantbir@moz-3E0F9699.cable.virginmedia.com) (Ping timeout)
[21:52:43] <bblum> i want my colour rustc output back :(
[21:52:50] *** Quits: brson (brson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[21:52:57] <strcat> bblum: cmr needs to teach it to handle conditionals
[21:53:03] *** Joins: ecr (ereed@2557E599.66715431.D25A875A.IP)
[21:53:04] *** Quits: mleise (marco@moz-3468AB5B.pools.arcor-ip.net) (Ping timeout)
[21:53:21] <strcat> it can't handle complex escapes for setaf/setab right now ;\
[21:53:25] <bjz> Luqman: hoy
[21:53:26] *** Joins: brson (brson@2557E599.66715431.D25A875A.IP)
[21:53:26] *** ChanServ sets mode: +o brson
[21:53:41] <bblum> strcat: THIS IS AN IMPORTANT REGRESSION
[21:53:53] <strcat> heh
[21:54:38] <bblum> aatch|gone: ok, so atomic stores can't be Acquire, and loads can't be Release, but they each can be the respective other two orderings?
[21:54:42] *** Quits: ecr (ereed@2557E599.66715431.D25A875A.IP) (Quit: Leaving.)
[21:54:50] <tjc> ideally rustc would support rainbow emoji error messages
[21:55:02] <strcat> ponysay!
[21:55:05] <tjc> heh
[21:55:08] <bblum> fortunately ideals are subjective
[21:55:41] <tjc> "Cannot move out of dereference of @ pointer. No pony for you!"
[21:57:07] *** Quits: vcl (chatzilla@741D4FEA.76F9E272.DA40C4B3.IP) (Ping timeout)
[21:57:17] *** Joins: vcl (chatzilla@741D4FEA.76F9E272.DA40C4B3.IP)
[21:58:37] *** Quits: Jesin (Jessin_@moz-48B48C95.eecs.lehigh.edu) (Ping timeout)
[21:58:42] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Computer has gone to sleep.)
[21:59:14] *** Quits: vcl (chatzilla@741D4FEA.76F9E272.DA40C4B3.IP) (Ping timeout)
[21:59:18] *** Joins: vcl_ (chatzilla@741D4FEA.76F9E272.DA40C4B3.IP)
[21:59:20] *** vcl_ is now known as vcl
[21:59:36] <bblum> aatch|gone: i suppose an xchg operation must always be full consistency huh, because it's both?
[22:00:04] *** Joins: vcl_ (chatzilla@741D4FEA.76F9E272.DA40C4B3.IP)
[22:00:06] <strcat> bblum: tjc: http://i.imgur.com/SNNMHJr.png rustc 2.0
[22:00:22] * strcat wonders if the dialog can be bigger
[22:00:22] <flu_> bwahaha
[22:00:42] <bblum> you should figlet it
[22:00:42] <bstrie> wonderful
[22:00:46] *** Joins: reyre_ (reyre@moz-9002CDDA.cpe.net.cable.rogers.com)
[22:00:50] *** Joins: cade (cadecairos@moz-DB3BF95F.members.linode.com)
[22:00:52] <tjc> strcat: :-D
[22:01:00] <tjc> Definitely a use case for compiler plug-ins
[22:01:08] *** Quits: vcl (chatzilla@741D4FEA.76F9E272.DA40C4B3.IP) (Ping timeout)
[22:01:11] <ion> strcat: nice
[22:01:15] *** Joins: vcl (chatzilla@741D4FEA.76F9E272.DA40C4B3.IP)
[22:01:27] <pcwalton> well, the borrow check *is* pretty magical
[22:01:40] <strcat> bblum: it's just http://terse.tk/ponysay/ ;p
[22:01:45] <cade> You guys probably hear this a lot, but is there a way to stop the "no debug symbols in executable" when compiling?
[22:01:47] <strcat> rustc() { /usr/bin/rustc $@ |& ponysay -W 80 }
[22:02:14] *** Joins: devinus (devinus@DAEC7122.372FE49C.29F95E0F.IP)
[22:02:16] *** Quits: vcl_ (chatzilla@741D4FEA.76F9E272.DA40C4B3.IP) (Ping timeout)
[22:02:25] <jed> cade: on 0.6 running with -Z debug-info did it, but now that makes rustc complain about how no compilation unit is present
[22:02:53] *** Joins: vcl_ (chatzilla@741D4FEA.76F9E272.DA40C4B3.IP)
[22:03:00] <tjc> cade: I don't know, but there's an issue open in the issue tracker to fix it, if it helps to know
[22:03:04] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Quit: Leaving.)
[22:03:05] *** Quits: vcl (chatzilla@741D4FEA.76F9E272.DA40C4B3.IP) (Ping timeout)
[22:03:21] *** Joins: jgilbert (jgilbert@2557E599.66715431.D25A875A.IP)
[22:03:36] *** Joins: vcl (chatzilla@741D4FEA.76F9E272.DA40C4B3.IP)
[22:03:49] *** Quits: tjc (tjc@moz-76C711F4.hsd1.wa.comcast.net) (Quit: zzzzzzzzzz)
[22:04:02] <cade> yeah I found that issue. I was curious to see if there were any work-arounds not present in the issue
[22:04:36] <cade> jed: -Z debug-info did the trick on my machine
[22:04:37] *** Quits: vcl_ (chatzilla@741D4FEA.76F9E272.DA40C4B3.IP) (Ping timeout)
[22:05:17] *** Joins: vcl_ (chatzilla@741D4FEA.76F9E272.DA40C4B3.IP)
[22:05:37] *** Quits: vcl (chatzilla@741D4FEA.76F9E272.DA40C4B3.IP) (Ping timeout)
[22:06:16] <flu_> why might you want to define functions as taking unique boxes rather than always defining them as using borrowed boxes?
[22:06:24] *** Joins: vcl (chatzilla@741D4FEA.76F9E272.DA40C4B3.IP)
[22:06:36] <steven_is_false> flu_: So they take them
[22:06:39] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[22:06:52] <steven_is_false> flu_: And grab ownership
[22:07:09] <pcwalton> flu_: so they can grab them and stash them somewhere to free later
[22:07:19] <steven_is_false> flu_: One use is sending data to other tasks
[22:07:24] *** Quits: vcl_ (chatzilla@741D4FEA.76F9E272.DA40C4B3.IP) (Ping timeout)
[22:07:30] *** Quits: azita (Azita@2557E599.66715431.D25A875A.IP) (Ping timeout)
[22:07:38] <flu_> steven_is_false: ok, that makes sense. in that case you really do want to transfer ownership
[22:07:59] *** Quits: pcwalton (pcwalton@2557E599.66715431.D25A875A.IP) (Quit: pcwalton)
[22:08:01] *** Joins: ecr (ereed@2557E599.66715431.D25A875A.IP)
[22:08:29] *** Joins: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net)
[22:08:38] *** Quits: vcl (chatzilla@741D4FEA.76F9E272.DA40C4B3.IP) (Ping timeout)
[22:08:53] *** Quits: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net) (Max SendQ exceeded)
[22:09:06] *** Quits: spider-mario (spidermari@moz-2F72F6FF.dsl.quantic-telecom.net) (Input/output error)
[22:09:50] *** Joins: pcwalton (pcwalton@2557E599.66715431.D25A875A.IP)
[22:09:50] *** ChanServ sets mode: +o pcwalton
[22:09:53] *** Joins: vcl_ (chatzilla@741D4FEA.76F9E272.DA40C4B3.IP)
[22:10:08] *** Joins: azita (Azita@2557E599.66715431.D25A875A.IP)
[22:11:19] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[22:11:23] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[22:11:30] *** Joins: vcl (chatzilla@741D4FEA.76F9E272.DA40C4B3.IP)
[22:12:17] *** Quits: vcl_ (chatzilla@741D4FEA.76F9E272.DA40C4B3.IP) (Ping timeout)
[22:13:24] *** Quits: vcl (chatzilla@741D4FEA.76F9E272.DA40C4B3.IP) (Ping timeout)
[22:14:36] *** Joins: tjc (tjc@moz-A4D91ECF.hfc.comcastbusiness.net)
[22:14:36] *** ChanServ sets mode: +o tjc
[22:16:02] *** Quits: devinus (devinus@DAEC7122.372FE49C.29F95E0F.IP) (Quit: Computer has gone to sleep.)
[22:16:43] *** Quits: joelteon (joel@moz-317E8D0C.io) (Quit: bye)
[22:17:26] *** Joins: joelteon (joel@moz-317E8D0C.io)
[22:17:41] <flu_> pcwalton, steven_is_false - thinking about it in terms of transferring ownership actually makes a lot of sense to me. I can think of cases where a method might produce heavyweight structures and want to transfer ownership to a collection that it returns, or (as steven_is_false mentioned) transferring ownership to a task
[22:17:54] <flu_> and thus some of the fog was lifted. haha
[22:18:28] <strcat> flu_: there are many times when you need ownership (your own copy) of something
[22:18:33] <strcat> it's best for it to be in the signature
[22:18:46] <strcat> that way, it works for non-copyable objects and will be faster since you can avoid the copy in the caller
[22:18:59] <flu_> right
[22:19:20] <strcat> for example look at extra::priority_queue
[22:19:25] *** Quits: jed (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:19:27] <strcat> you can use it to do an in-place heap sort of a vector
[22:20:11] <strcat> PriorityQueue::from_vec(xs).to_sorted_vec()
[22:20:21] <flu_> yeah, was looking at the from_vec definition
[22:22:14] <cmr> nmatsakis, super like the fork/join strawman
[22:23:04] <flu_> am I right in interpreting the unsafe block as a means of telling the compiler, "hey I know what I'm going"?  when I first encountered it, I was thinking it might have been as a way of flagging all code that touches it as unsafe (like the way const bleeds around in c++)
[22:23:11] <flu_> *what I'm doing
[22:23:58] <cmr> nmatsakis, One thing I'd like to see for divide though is the job returning something, and a function that gets called over a vector of all the return values of the jobs.
[22:24:24] <strcat> flu_: unsafe functions mark a function as unsafe
[22:24:30] <strcat> it can only be used in an unsafe block
[22:24:44] <cmr> nmatsakis, Although I think that could be implemented by having the jobs push their result onto a shared data structure?
[22:24:55] <strcat> unsafe blocks are a way to have the compiler trust you, and they need to be correct for all possible inputs 
[22:24:57] <flu_> strcat: right, so the unsafe block is more to relax compiler restrictions than force safeness 
[22:26:48] *** Quits: RMF (RMF@moz-659583E0.dsl.telepac.pt) (Ping timeout)
[22:27:53] *** Quits: \n (NDesaulnie@2557E599.66715431.D25A875A.IP) (Quit: \n)
[22:27:53] *** Quits: dolphinling (andrew@moz-80A1E448.uvm.edu) (Ping timeout)
[22:28:37] *** Joins: dolphinling (andrew@moz-80A1E448.uvm.edu)
[22:30:35] *** Joins: RMF (RMF@moz-494A6C28.dsl.telepac.pt)
[22:31:40] *** Quits: ssbr (ssbr@moz-B9B9415A.s-ip.magma.ca) (Client exited)
[22:31:59] *** Joins: \n (NDesaulnie@2557E599.66715431.D25A875A.IP)
[22:32:26] *** Quits: jdm (jdm@DB05BBF2.BB1F48F2.971E19F6.IP) (Quit: Lost terminal)
[22:32:44] *** Quits: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: ChatZilla 0.9.90-rdmsoft [XULRunner 18.0.2/20130201065344])
[22:32:48] <bblum> eholk: did you see https://github.com/mozilla/rust/issues/7021
[22:33:27] <eholk> bblum: no, thanks for pointing it out
[22:33:44] *** Joins: Sodel_the_V (user@moz-853663E1.va.shawcable.net)
[22:34:02] *** Joins: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP)
[22:34:02] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/S704Gw
[22:34:02] *** Parts: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP) ()
[22:36:32] <steven_is_false> Can someone who uses Rust on Windows help me with https://github.com/mozilla/rust/pull/7027 ?
[22:36:46] <cmr> steven_is_false, Lucky you, I am booted into windows! :)
[22:36:50] <steven_is_false> I can't test on a Windows box.
[22:36:52] *** Joins: ghrust (ghrust@79968228.6A2AE50.F3114085.IP)
[22:36:52] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/oupEKQ
[22:36:52] *** Parts: ghrust (ghrust@79968228.6A2AE50.F3114085.IP) ()
[22:36:52] *** Joins: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP)
[22:36:52] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/RZSrPQ
[22:36:52] <ghrust> 13rust/06auto 140174ef9 15Nick Desaulniers: Remove extra::par fixes #5626
[22:36:52] <ghrust> 13rust/06auto 144a2e6df 15Nick Desaulniers: fix merge conflicts due to bit rot
[22:36:52] <ghrust> 13rust/06auto 147558cf5 15bors: auto merge of #7034 : nickdesaulniers/rust/removePar, r=brson...
[22:36:55] <cmr> steven_is_false, What do you need?
[22:36:55] *** Parts: ghrust (ghrust@614D05BD.6A2AE50.F3114085.IP) ()
[22:37:03] *** Quits: pcwalton (pcwalton@2557E599.66715431.D25A875A.IP) (Quit: pcwalton)
[22:37:10] <cmr> ah
[22:37:13] <cmr> let me take a poke at it
[22:37:17] <steven_is_false> cmr: Thanks.
[22:37:56] *** Joins: pcwalton (pcwalton@2557E599.66715431.D25A875A.IP)
[22:37:56] *** ChanServ sets mode: +o pcwalton
[22:37:58] *** Quits: slimer (Mibbit@BBE7C46A.B4F11D08.8612FA94.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:40:47] *** Joins: Sorella (queen@B12A78F5.BA14766C.95C8B7C6.IP)
[22:40:59] *** Quits: carter (carter@moz-BDFE46F6.nyc.biz.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[22:41:35] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[22:42:05] *** Joins: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[22:42:06] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Connection reset by peer)
[22:42:51] *** Quits: snearch (snearch@moz-311F1160.pool.mediaways.net) (Quit: Verlassend)
[22:43:00] *** Joins: Ralith (ralith@moz-3767A14F.wireless.sfu.ca)
[22:47:16] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[22:47:24] *** Quits: \n (NDesaulnie@2557E599.66715431.D25A875A.IP) (Quit: \n)
[22:48:16] *** Quits: tikue (tkuehn@2557E599.66715431.D25A875A.IP) (Quit: tikue)
[22:49:54] *** Joins: devinus (devinus@DAEC7122.372FE49C.29F95E0F.IP)
[22:49:55] *** Quits: doener (doener@moz-121949B3.unitymediagroup.de) (Ping timeout)
[22:51:33] *** Joins: MaikKlein1 (maik@moz-7BA8C29B.dip0.t-ipconnect.de)
[22:52:01] *** Joins: tikue (tkuehn@2557E599.66715431.D25A875A.IP)
[22:52:37] *** Quits: infynyxx_ (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[22:52:40] *** Quits: devinus (devinus@DAEC7122.372FE49C.29F95E0F.IP) (Quit: Computer has gone to sleep.)
[22:53:10] *** Joins: maxli1 (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[22:53:31] *** Quits: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Connection reset by peer)
[22:53:40] *** Quits: maxli1 (maxli@C03F2759.C70D537E.2FA4EA88.IP) (Quit: Leaving.)
[22:53:44] *** Joins: maxli (maxli@C03F2759.C70D537E.2FA4EA88.IP)
[22:54:23] *** Quits: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net) (Ping timeout)
[22:54:26] *** Quits: doomlord (doomlod@moz-8F385DB0.range109-153.btcentralplus.com) (Ping timeout)
[22:56:08] <bblum> brson: ping
[22:57:21] <flu_> in the examples here (http://static.rust-lang.org/doc/tutorial-borrowed-ptr.html#named-lifetimes) - why does the shape parameter need to have a lifetime specified at all? it seems that only the a and b parameters need specific lifetimes..?
[22:58:09] <tjc> flu_: hmm, I think you're right
[22:59:00] <flu_> tjc: just trying to figure out if it's contrived to show that multiple lifetimes can be specified, or if it is actually needed in that case
[22:59:30] <tjc> flu_: I suspect it's a mistake
[22:59:44] <tjc> I mean, nothing wrong with the code, it compiles, it's just not as general as it could be
[23:00:06] *** Quits: brendan (brendaneic@2557E599.66715431.D25A875A.IP) (Quit: brendan)
[23:00:23] *** Quits: donri (dag@moz-9BB61102.tbcn.telia.com) (Client exited)
[23:00:26] <flu_> oh wait, lol
[23:00:31] <flu_> didn't read to the end
[23:00:52] <flu_> last paragraph and example say the same thing - basically since you aren't returning something from shape, you can omit the tmp specifier
[23:00:57] <tjc> ah ok
[23:01:02] <tjc> well, I didn't read to the end either :-)
[23:01:05] *** Quits: azita (Azita@2557E599.66715431.D25A875A.IP) (Quit: azita)
[23:01:12] <flu_> I got overly excited at understanding something. haha
[23:01:37] <tjc> :-D
[23:03:07] *** Parts: steven_is_false (user@moz-144077DE.bchsia.telus.net) (ERC Version 5.3 (IRC client for Emacs))
[23:03:19] *** Quits: nano (nano@moz-972880B.superkabel.de) (Connection reset by peer)
[23:03:33] *** Quits: Ralith (ralith@moz-3767A14F.wireless.sfu.ca) (Ping timeout)
[23:03:50] *** Quits: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[23:04:26] *** Joins: brendan (brendaneic@2557E599.66715431.D25A875A.IP)
[23:05:26] *** Quits: reyre_ (reyre@moz-9002CDDA.cpe.net.cable.rogers.com) (Client exited)
[23:05:38] *** Quits: brson (brson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[23:06:54] *** Joins: Ralith (ralith@moz-3767A14F.wireless.sfu.ca)
[23:07:09] *** Joins: brson (brson@2557E599.66715431.D25A875A.IP)
[23:07:09] *** ChanServ sets mode: +o brson
[23:07:25] *** Joins: \n (NDesaulnie@2557E599.66715431.D25A875A.IP)
[23:09:48] <strcat> tjc: https://github.com/mozilla/rust/pull/7072 r? added another fix
[23:09:55] <brson> bblum: pong
[23:09:55] *** Quits: Ralith (ralith@moz-3767A14F.wireless.sfu.ca) (Ping timeout)
[23:10:10] <strcat> the copy_nonoverlapping_memory docstring said the memory may overlap :)
[23:10:39] <tjc> strcat: that's embarrassing! approved :-)
[23:11:38] *** Joins: steven_is_false (user@moz-144077DE.bchsia.telus.net)
[23:13:00] *** Joins: bent (chatzilla@moz-932324BF.hsd1.ca.comcast.net)
[23:14:22] <steven_is_false> Hi! So cmr fixed my pull request https://github.com/mozilla/rust/pull/7027 . Does that mean I should pull from his fix and push it to my branch?
[23:14:45] <bblum> brson: if i added something like a "#[cfg(test)] fn interleave_here() { for 5.times { task::yield() } }"
[23:14:55] <bblum> and called it a bunch of places in the concurrency primitives
[23:15:10] <bblum> it would compile out for non-test code, right?
[23:15:14] <flu_> strcat: you still working in src/libstd/iterator.rs ?
[23:15:16] <brson> bblum: yes
[23:15:36] <brson> bblum: you would also need to define a #[cfg(not(test))] noop version
[23:15:40] <bblum> yeah, of course
[23:15:45] <strcat> flu_: not right now
[23:15:46] *** Joins: azita (Azita@2557E599.66715431.D25A875A.IP)
[23:15:55] <strcat> flu_: I have an open PR touching it though
[23:16:00] *** Quits: koomi (koomi@moz-B2B8B6D1.superkabel.de) (Quit: WeeChat 0.4.1)
[23:16:10] <steven_is_false> https://github.com/cmr/rust/commit/a3102e00fcec14453479342b6b4a0166ecb6b13d is the commit URL how do I get the branch URL to pull from?
[23:16:16] <flu_> doing typo scrubbing on comments, thought it might be better just to let you know rather than a separate PR
[23:16:41] *** aatch|gone is now known as aatch
[23:16:46] <bblum> brson: so... if i have it in, say, std::pipes -- will it be present in the pipes test cases, and absent in libextra test cases for things that use pipes?
[23:17:01] <tjc> flu: pull requests for comment typos are good, so long as you don't mind
[23:17:09] <tjc> it's less effort for me to type "r+" than to make my own pull request :-)
[23:17:26] *** Quits: brendan (brendaneic@2557E599.66715431.D25A875A.IP) (Quit: brendan)
[23:17:28] <brson> bblum: yes
[23:17:42] <aatch> just don't do individual PRs for each typo :P
[23:17:50] <bblum> what about that weird two-versions-of-core thing that we ran into last summer
[23:18:01] <bblum> i forget what the deal was with that :X
[23:18:05] <flu_> no, don't mind at all. trying to be conservative with the build resources since each test verification seems to take over an hour
[23:19:54] <tjc> flu_: Yeah, it's unfortunate that we have to run an hour of tests for a typo, but that's the core team's problemâ€¦ don't worry about using build resources so long as you're improving the codebase :-)
[23:20:06] *** Quits: tcsc (tcsc@moz-ADC0ED45.hsd1.ct.comcast.net) (Quit: computer sleeping)
[23:20:38] *** Joins: wilsonk|2 (kvirc@moz-39EFBFC2.cg.shawcable.net)
[23:21:06] *** Quits: wilsonk-laptop (kvirc@moz-39EFBFC2.cg.shawcable.net) (Ping timeout)
[23:21:26] <aatch> I was actually thinking how to fix that.
[23:21:47] *** Joins: ghrust (ghrust@C621748.6A2AE50.F3114085.IP)
[23:21:47] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 147558cf5 to 141175e94: 02http://git.io/N3iJvQ
[23:21:47] *** Parts: ghrust (ghrust@C621748.6A2AE50.F3114085.IP) ()
[23:21:50] *** Joins: ghrust (ghrust@E7A4CCE2.6A2AE50.F3114085.IP)
[23:21:51] <ghrust> 01[13rust01] 15bors pushed 1 new commit to 06auto: 02http://git.io/5A6c4g
[23:21:51] <ghrust> 13rust/06auto 143f900dc 15bors: auto merge of #7055 : thestinger/rust/iterator, r=catamorphism...
[23:21:51] *** Parts: ghrust (ghrust@E7A4CCE2.6A2AE50.F3114085.IP) ()
[23:22:05] <strcat> thanks for being broken ghrust
[23:23:13] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[23:23:17] <brson> bblum: it is something to be aware of. if your test cases in std explictly use std::comm::* then they will use the ones without the test yields
[23:23:30] <brson> but if you just use comm::* then you'll be using the test versions
[23:23:59] <cmr> steven_is_false, hi
[23:24:05] *** Joins: reyre_ (reyre@moz-9002CDDA.cpe.net.cable.rogers.com)
[23:24:20] <steven_is_false> cmr: Thanks for creating the windows fixes.
[23:24:29] <cmr> steven_is_false, So, what you can do it "git remote add cmr https://github.com/cmr/rust.git; git fetch cmr; git cherry-pick a3102e00fce"
[23:24:30] *** Joins: cpeterson (cpeterson@moz-BE33DA21.fw1.sfo1.mozilla.net)
[23:24:56] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[23:26:45] <steven_is_false> cmr: Thanks that seems to work.
[23:27:06] *** Quits: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Connection reset by peer)
[23:27:28] *** Joins: wuwei|offline (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[23:27:49] <steven_is_false> Perfect!
[23:28:40] *** Quits: thou (thou@moz-1C1CA9F7.fasttrackcomm.net) (Input/output error)
[23:28:41] <bblum> brson: i... why exactly?
[23:28:43] <bblum> that's terrible :x
[23:29:40] *** Joins: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net)
[23:29:48] <steven_is_false> graydon: cmr: So now someone could r+ if they feel that it'd be a good idea.
[23:29:55] <flu_> hmm.. the fact that rusti sessions terminate when an assert fails is a little less than ideal...
[23:30:08] <cmr> flu_, rusti itself is a lot less than ideal :)
[23:30:11] <strcat> rusti is very broken/useless
[23:30:20] <flu_> lolll
[23:30:23] <flu_> rusti: botsnack
[23:30:24] <aatch> strcat, it's gotten better recently
[23:30:25] -rusti- "nom nom"
[23:30:28] <strcat> rusti: "I'm secretly rustc"
[23:30:29] -rusti- "I\'m secretly rustc"
[23:30:29] <flu_> they aren't talking about you buddy
[23:30:43] <strcat> rusti> let mut x = 5;
[23:30:45] <strcat> rusti> x = 10;
[23:30:47] <strcat> usti> x
[23:30:49] <cmr> rusti-the-bot is just a script running rustc in a sandbox
[23:30:50] <strcat> 5
[23:31:13] <strcat> aatch: it just recompiles the entire chain of commands each time
[23:31:28] <aatch> strcat, yeah...
[23:31:37] <aatch> I didn't say it was good
[23:31:40] <graydon> steven_is_false: what did you want me to review?
[23:31:44] <strcat> and it uses sketchy AST manipulation to try to find the current expr
[23:32:02] <strcat> so... imo it's useless in the current state, might as well have a wrapper around rustc ;p
[23:32:06] <strcat> I assume it will get less bad...
[23:32:11] <MaikKlein1> any news on https://github.com/mozilla/rust/pull/6661 ?
[23:32:11] *** Joins: brendan (brendaneic@2557E599.66715431.D25A875A.IP)
[23:32:24] <steven_is_false> graydon: cmr fixed the windows issues in https://github.com/mozilla/rust/pull/7027
[23:32:29] <strcat> anyway rustc has plenty of issues
[23:33:24] <acrichto> strcat: https://github.com/mozilla/rust/pull/7070 fixes that rusti issue!
[23:33:33] <strcat> ;0
[23:33:47] <cmr> "Rewrite rusti" nice :p
[23:33:57] <acrichto> along with everything except that task failure doesn't work at all
[23:34:20] <strcat> strcat@thinktank i ~ master % echo 'fn main() {}' | rustc -o '-' -   
[23:34:22] <strcat> error: linking with `cc` failed with code 1
[23:34:24] <strcat> note: cc arguments: -L/usr/lib/rustc/x86_64-unknown-linux-gnu/lib -m64 -o - -.o -L/usr/lib/rustc/x86_64-unknown-linux-gnu/lib -lstd-c3ca5d77d81b46c1-0.7-pre -lrustrt -lrt -lpthread -lrt -ldl -lm -lmorestack -lrustrt -Wl,-rpath,$ORIGIN/../../usr/lib/rustc/x86_64-unknown-linux-gnu/lib -Wl,-rpath,/usr/lib/rustc/x86_64-unknown-linux-gnu/lib
[23:34:26] <strcat> note: gcc: error: unrecognized command line option â€˜-.oâ€™
[23:34:28] <strcat> :D
[23:34:42] *** Quits: eholk (eholk@moz-368610EF.uconnect.utah.edu) (Quit: eholk)
[23:34:44] <strcat> that one is easy to fix at least
[23:35:48] <brson> bblum: stdtest links to std, so there are two versions of everything but the lang items. the ones under `extern mod std` are 'the real std' and everything else is the test std
[23:36:02] <brson> bblum: this is going to change though because we're going to move extra::test into std
[23:36:05] <brson> eventually
[23:36:10] *** Quits: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP) (Quit: eatkinson)
[23:36:11] <brson> will fix everything
[23:36:22] * aatch has heard that one before.
[23:36:31] <brson> everything!
[23:37:26] *** Joins: jrfeenst (jrfeenst@moz-F912484F.cpe.norwoodlight.com)
[23:37:35] <strcat> brson: is there some way of running code on the platform thread before it creates any other threads (in user code)?
[23:38:24] <bblum> brson: is this something that'll fix quickly after the next snapshot?
[23:38:37] <bblum> if so i can just wait for the confusion to go away
[23:38:45] <aatch> strcat, you can use #[start] to implement your own startup fn
[23:39:05] <flu_> aatch: can you use #[vc] to secure first round funding? 
[23:39:07] <flu_> yuk yuk yuk
[23:39:13] *** Joins: koomi (koomi@moz-202752AD.pools.arcor-ip.net)
[23:39:17] <strcat> aatch: ah, how do you start up the scheduler from there?
[23:39:33] *** Quits: MaikKlein1 (maik@moz-7BA8C29B.dip0.t-ipconnect.de) (Ping timeout)
[23:39:33] <bblum> really, #[start]? not #[lang="start"] ?
[23:39:38] <aatch> strcat, look in the start lang item
[23:39:57] <aatch> bblum, lang item is the default, #[start] allows you to override.
[23:40:04] <bblum> ah.
[23:40:11] <bblum> presumably things without custom attributes aren't overridable.
[23:40:12] <aatch> since it gets pissy if you have multiple lang items
[23:40:13] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[23:40:26] <strcat> aatch: ah perfect, this'll work :)
[23:40:34] <flu_> tjc: PR ready for r? at https://github.com/mozilla/rust/pull/7073
[23:40:52] <aatch> lol, #[start] was one of my earliest PRs
[23:41:01] <tjc> flu_: approved, thanks!
[23:41:35] <flu_> woot. given enough time, I might be able to make functional contributions!
[23:42:21] <bblum> graydon: hmm, i'm coming around to your idea of a limited inference for sized bound based on function signature
[23:42:36] *** cscottnet is now known as cscottnet_away
[23:42:36] <tjc> a journey of a thousand miles begins with a single pull request :-)
[23:42:40] <bblum> function return type is really super common
[23:42:50] <bblum> and that would lighten the load considerably on data structure implementors
[23:42:58] <bblum> who want to take "fn insert(x: T)" all the time
[23:43:09] <bblum> although with impls.... hmmm
[23:43:19] <bblum> maybe harder to infer :\
[23:44:20] <graydon> bblum: yeah. I don't think it's too exotic to assume params, return, in-a-vec-or-tup => sized
[23:44:24] <strcat> aatch: beautiful, thanks :)
[23:44:46] *** Quits: SimonSapin (simon@moz-73287A57.zone9.bethere.co.uk) (Ping timeout)
[23:44:56] *** Quits: Sodel_the_V (user@moz-853663E1.va.shawcable.net) (Quit: Eaten by a grue)
[23:45:00] <graydon> all other tycons are nominal
[23:45:12] *** Joins: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP)
[23:45:18] <bblum> graydon: the problem with impls is if you have "impl <T> Foo { fn bar(ptr: &T) ... fn baz(val: T) ... }"
[23:45:20] <graydon> or fn, I guess
[23:45:23] *** Parts: steven_is_false (user@moz-144077DE.bchsia.telus.net) (ERC Version 5.3 (IRC client for Emacs))
[23:45:26] <bblum> if you infer that impl <T: Sized>
[23:45:27] <graydon> right
[23:45:32] <bblum> then you can't call fn bar with an unsized thing
[23:45:50] <graydon> it can't compile without the bound though
[23:46:01] <graydon> *shrug*
[23:46:10] <bblum> but the situation is somewhat more cryptic to the user
[23:46:14] <graydon> not insisting. but i wouldn't mind.
[23:46:19] *** Quits: azita (Azita@2557E599.66715431.D25A875A.IP) (Quit: azita)
[23:46:29] <bblum> could the compiler have some way to know how to hint
[23:46:35] <graydon> hm?
[23:46:49] <bblum> "Can't instantiate fn bar with (inferred!) sized bound - consider splitting bar to a separate impl"?
[23:46:55] <graydon> "need sized ... because here ->"?
[23:47:04] <bjz> pcwalton: have you thought about methodising transmute?
[23:47:05] <graydon> yeah
[23:47:08] <bblum> yeah, "note: sized bound inferred because of fn foo"
[23:47:43] <bblum> then you end up with two separate "impl<T>"s, and a third party looks at it and is like "? why is this"
[23:49:07] *** Quits: tikue (tkuehn@2557E599.66715431.D25A875A.IP) (Quit: tikue)
[23:49:35] <aatch> I'm ok with not inferring on generic impls, or atleast forcing a bound in those cases.
[23:49:50] <bblum> that's also a possibility
[23:50:08] <graydon> mm! maybe
[23:50:15] <graydon> just fns?
[23:50:23] *** Joins: Jesin (Jessin_@4FE0CEF2.B4552BE7.C85D72.IP)
[23:50:29] <pcwalton> bjz: makes me nervous b/c of autoderef/autoref
[23:50:33] <bblum> it kinda depends on how often functions with generic return types are inside impls vs outside impls
[23:50:38] <graydon> mhm
[23:50:43] <bjz> pcwalton: how so?
[23:50:50] <aatch> The big thing for me is definitely that doing fn foo<T:Sized>(a: arg) -> Foo<T>;
[23:50:52] <pcwalton> you won't necessarily know what you're transmuting to
[23:51:08] <bblum> pcwalton: you mean from
[23:51:10] <pcwalton> right, from
[23:51:22] <aatch> will get very, very tedious
[23:51:43] <bblum> aatch: yeah, that is my main fear too; did you see the stats for how often function return types came up
[23:51:49] <strcat> aatch: https://github.com/thestinger/rust-seccomp/blob/master/seccomp.rs#L89 beautiful! :)
[23:51:58] <bjz> pcwalton: mmk
[23:51:58] * pcwalton kind of likes the "unsized" keyword still
[23:52:24] <bblum> impl <unsized T> MyTrait for &T
[23:52:28] <bblum> that's ok too
[23:52:34] <strcat> prctl(PR_SET_NO_NEW_PRIVS, 0x1, 0, 0, 0) = 0
[23:52:36] <strcat> prctl(PR_SET_SECCOMP, 0x2, 0x7f30e340f050, 0xffffffffffffffff, 0) = 0
[23:52:38] <strcat> write(1, "foobar\n", 7foobar
[23:52:40] <strcat> )                 = 7
[23:52:42] <strcat> exit_group(0)                           = ?
[23:52:46] <bblum> you get the "why does this have weird special case rules" problem any way you swing it
[23:52:57] *** Joins: azita (Azita@2557E599.66715431.D25A875A.IP)
[23:53:02] *** Quits: azita (Azita@2557E599.66715431.D25A875A.IP) (Quit: azita)
[23:53:11] <strcat> if write wasn't allowed:
[23:53:12] <strcat> --- SIGSYS {si_signo=SIGSYS, si_code=0x1, si_pid=18446744073566442096, si_uid=32717, si_value={int=1, ptr=0xc000003e00000001}} ---
[23:53:15] <strcat> :)
[23:53:15] <brson> strcat: the only way to run code before the runtime starts is to override `#[start]`, but then you are on your own to set up the runtime
[23:53:16] <aatch> strcat, heh, who needs a scheduler!
[23:53:41] <brson> bblum: I am planning to change the stdtest behavior in the near future
[23:53:46] <bjz> pcwalton: thant's a shame :(
[23:53:48] <aatch> brson, uh, he just did that.
[23:53:56] * strcat wishes rust knew the varargs ABI
[23:54:00] <brson> aatch: just did what?
[23:54:08] <bjz> pcwalton: I understand your point
[23:54:11] <strcat> but I think I'll be fine hardcoding them as if it was the normal ABI since this is linux specific
[23:54:36] <aatch> brson, that link, using #[start] to override the entry fn
[23:54:46] <flu_> strcat: I had a similar problem with rust_bindgen vs var args methods
[23:55:05] <strcat> well this only has to run on linux so I think it's fine if I ignore the quirks it can have
[23:55:09] <flu_> ended up just marking it with a "TODO: figure this out" and commenting out those function sigs
[23:55:25] <strcat> I'm just going to abuse #[link_name = "foo"]
[23:56:12] <bblum> brson: ok yeah, let me know when you do
[23:56:25] * bblum files an issue and assigns it to himself
[23:57:59] *** Quits: Jesin (Jessin_@4FE0CEF2.B4552BE7.C85D72.IP) (Ping timeout)
[23:59:51] <strcat> heh
[23:59:53] <strcat> rustc: /build/rust-incoming-git/src/rust/src/llvm/include/llvm/Support/Casting.h:231: typename llvm::enable_if<llvm::is_same<Y, typename llvm::simplify_type<From>::SimpleType>, typename llvm::cast_retty<X, Y*>::ret_type>::type llvm::cast(Y*) [with X = llvm::Function; Y = llvm::Value; typename llvm::enable_if<llvm::is_same<Y, typename llvm::simplify_type<From>::SimpleType>, typename
[23:59:55] <strcat> llvm::cast_retty<X, Y*>::ret_type>::type = llvm::Function*]: Assertion `isa<X>(Val) && "cast<Ty>() argument of incompatible type!"' failed.
[23:59:59] * strcat cries
