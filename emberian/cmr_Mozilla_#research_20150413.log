[00:29:20] *** Joins: gal (gal@moz-nj2.ruf.170.166.IP)
[00:32:46] *** Joins: reqshark (reqshark@moz-amtd83.cable.rcn.com)
[00:39:40] *** Joins: brson (brson@moz-jjc.abh.232.109.IP)
[00:39:40] *** ChanServ sets mode: +o brson
[01:23:27] *** Quits: c74d3 (c74d3a4ebb6@moz-0ersgu.oc.cox.net) (Ping timeout: 121 seconds)
[01:24:34] *** Joins: c74d (c74d3a4ebb6@moz-lm47dn.mggc.hibn.4404.2002.IP)
[01:26:05] *** Quits: gal (gal@moz-nj2.ruf.170.166.IP) (Client exited)
[01:40:18] *** Joins: gal (gal@moz-9f3.ruf.170.166.IP)
[01:54:45] *** Quits: gal (gal@moz-9f3.ruf.170.166.IP) (Client exited)
[01:59:41] *** Quits: brson (brson@moz-jjc.abh.232.109.IP) (Ping timeout: 121 seconds)
[02:02:55] *** Joins: brson (brson@moz-cfhap5.mtv2.mozilla.com)
[02:02:55] *** ChanServ sets mode: +o brson
[02:07:22] *** nrc|afk is now known as nrc
[02:14:46] *** Quits: brson (brson@moz-cfhap5.mtv2.mozilla.com) (Quit: leaving)
[02:44:18] *** Joins: brson (brson@moz-vvt35d.tmodns.net)
[02:44:18] *** ChanServ sets mode: +o brson
[02:45:02] *** Quits: brson (brson@moz-vvt35d.tmodns.net) (Quit: leaving)
[04:50:46] *** Joins: ddamjano (Instantbird@moz-la37im.ehig.7h68.8388.2a02.IP)
[05:02:56] *** Quits: ddamjano (Instantbird@moz-la37im.ehig.7h68.8388.2a02.IP) (Ping timeout: 121 seconds)
[05:15:46] *** Quits: roc (chatzilla@moz-53a.fci.192.203.IP) (Connection closed)
[05:30:12] *** Joins: c74d3 (c74d3a4ebb6@moz-0ersgu.oc.cox.net)
[05:30:59] *** Quits: c74d (c74d3a4ebb6@moz-lm47dn.mggc.hibn.4404.2002.IP) (Ping timeout: 121 seconds)
[06:04:28] *** Joins: ddamjano (Instantbird@moz-m0b7og.ehig.7h68.8388.2a02.IP)
[06:37:29] *** Joins: int3_ (int3_@moz-qj4r31.ca.comcast.net)
[07:09:52] *** Joins: Dexter (Alessio@moz-lsijj5.retail.telecomitalia.it)
[07:23:23] *** Joins: mbx (textual@moz-jgccpd.res.rr.com)
[07:27:31] *** Quits: jschuster (schuster@moz-n100gq.ma.comcast.net) (Ping timeout: 121 seconds)
[07:28:23] *** Joins: jschuster (schuster@moz-n100gq.ma.comcast.net)
[07:29:04] *** Joins: bjz (bjz@moz-b43.1aa.161.202.IP)
[07:36:22] *** Quits: int3_ (int3_@moz-qj4r31.ca.comcast.net) (Connection closed)
[07:36:47] *** Joins: int3_ (int3_@moz-qj4r31.ca.comcast.net)
[07:40:49] *** Quits: int3_ (int3_@moz-qj4r31.ca.comcast.net) (Ping timeout: 121 seconds)
[07:48:04] *** Quits: reqshark (reqshark@moz-amtd83.cable.rcn.com) (Quit: peace out!)
[08:03:29] *** Quits: mbx (textual@moz-jgccpd.res.rr.com) (Quit: My Mac has gone to sleep. ZZZzzz…)
[08:08:37] *** Quits: bjz (bjz@moz-b43.1aa.161.202.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[08:28:29] *** Joins: bjz (bjz@moz-4l6.mjm.52.113.IP)
[08:30:03] *** Joins: copumpki_ (copumpkin@moz-regr09.dyn.optonline.net)
[08:32:36] *** Quits: copumpkin (copumpkin@moz-regr09.dyn.optonline.net) (Ping timeout: 121 seconds)
[08:35:49] *** Quits: bjz (bjz@moz-4l6.mjm.52.113.IP) (Ping timeout: 121 seconds)
[08:54:31] *** Joins: int3_ (int3_@moz-qj4r31.ca.comcast.net)
[08:58:43] *** Quits: int3_ (int3_@moz-qj4r31.ca.comcast.net) (Ping timeout: 121 seconds)
[09:02:38] *** Joins: bjz (bjz@moz-puppgq.tpgi.com.au)
[09:20:48] *** Joins: roc (chatzilla@moz-5r49q8.orcon.net.nz)
[09:22:50] *** Quits: roc (chatzilla@moz-5r49q8.orcon.net.nz) (Connection closed)
[09:59:12] *** Joins: roc (chatzilla@moz-5r49q8.orcon.net.nz)
[10:37:34] *** Joins: roc_ (chatzilla@moz-dq40ka.orcon.net.nz)
[10:39:32] *** Quits: roc (chatzilla@moz-5r49q8.orcon.net.nz) (Ping timeout: 121 seconds)
[10:39:34] *** roc_ is now known as roc
[10:43:34] *** Quits: nrc (nrc@moz-4bhi2i.xtra.co.nz) (Connection closed)
[10:44:15] *** Joins: nrc (nrc@moz-4bhi2i.xtra.co.nz)
[10:49:05] *** Quits: nrc (nrc@moz-4bhi2i.xtra.co.nz) (Ping timeout: 121 seconds)
[10:51:18] *** Joins: till (till@moz-m8t13q.adsl.alicedsl.de)
[12:07:12] *** Joins: pnkfelix (pnkfelix@moz-6v5.3nd.202.89.IP)
[13:10:42] *** Joins: ehsan (ehsan@moz-4gmmoh.fibre.fibrestream.ca)
[13:37:13] *** jandem-away is now known as jandem
[13:40:16] *** Joins: jweathersby (Adium@moz-trimim.ip.windstream.net)
[13:52:19] *** Joins: jdm (jdm@moz-ilbt2e.cable.teksavvy.com)
[13:58:28] *** Quits: ddamjano (Instantbird@moz-m0b7og.ehig.7h68.8388.2a02.IP) (Ping timeout: 121 seconds)
[14:02:39] *** Joins: ddamjano (Instantbird@moz-m0b7og.ehig.7h68.8388.2a02.IP)
[14:15:58] *** Quits: ddamjano (Instantbird@moz-m0b7og.ehig.7h68.8388.2a02.IP) (Ping timeout: 121 seconds)
[14:22:31] *** Joins: mchang (mchang@moz-i5m.05u.207.66.IP)
[15:20:33] *** Quits: mchang (mchang@moz-i5m.05u.207.66.IP) (Client exited)
[15:23:20] *** Joins: mchang (mchang@moz-i5m.05u.207.66.IP)
[15:23:56] *** Joins: system64 (uid17738@moz-7c4aav.uxbridge.irccloud.com)
[15:30:07] *** Quits: jdm (jdm@moz-ilbt2e.cable.teksavvy.com) (Connection closed)
[15:48:28] *** Joins: ddamjano (Instantbird@moz-m0b7og.ehig.7h68.8388.2a02.IP)
[15:49:03] *** Quits: mchang (mchang@moz-i5m.05u.207.66.IP) (Client exited)
[15:55:19] *** Joins: brson (brson@moz-cfhap5.mtv2.mozilla.com)
[15:55:19] *** ChanServ sets mode: +o brson
[15:56:16] *** Joins: mbx (textual@moz-jgccpd.res.rr.com)
[16:22:34] *** Joins: terrence (terrence@moz-ql99l0.sd.cox.net)
[16:28:55] *** Quits: Dexter (Alessio@moz-lsijj5.retail.telecomitalia.it) (Quit: Leaving)
[16:46:52] *** khuey|away is now known as khuey
[16:47:27] *** Joins: mchang (mchang@moz-i5m.05u.207.66.IP)
[17:02:28] *** Joins: nrc (nrc@moz-4bhi2i.xtra.co.nz)
[17:03:35] *** Quits: flaper87 (flaper87@moz-fnn.1e9.132.209.IP) (Ping timeout: 121 seconds)
[17:07:29] *** Quits: nrc (nrc@moz-4bhi2i.xtra.co.nz) (Ping timeout: 121 seconds)
[17:12:31] *** Joins: flaper87 (flaper87@moz-fnn.1e9.132.209.IP)
[17:16:08] *** Joins: pcwalton (pcwalton@moz-nh2.o1i.216.216.IP)
[17:16:08] *** ChanServ sets mode: +o pcwalton
[17:16:25] *** Quits: azakai|2__ (alon@moz-l3ofdg.sntcca.sbcglobal.net) (Quit: Ex-Chat)
[17:17:56] *** Joins: azita_ (Azita@moz-qjbkeh.mtv2.mozilla.com)
[17:20:45] *** Quits: pnkfelix (pnkfelix@moz-6v5.3nd.202.89.IP) (Quit: rcirc on GNU Emacs 24.3.92.1)
[17:26:32] *** Parts: azita_ (Azita@moz-qjbkeh.mtv2.mozilla.com) ()
[17:28:19] *** Joins: azita_ (Azita@moz-qjbkeh.mtv2.mozilla.com)
[17:34:49] *** Parts: azita_ (Azita@moz-qjbkeh.mtv2.mozilla.com) ()
[17:46:11] *** Joins: azakai (alon@moz-e36oq4.ujol.1ibb.0101.2620.IP)
[17:47:46] *** Joins: jdm (jdm@moz-ilbt2e.cable.teksavvy.com)
[18:03:11] *** Quits: pcwalton (pcwalton@moz-nh2.o1i.216.216.IP) (Client exited)
[18:23:17] <lkuper> currently listening to Ras Bodik talk about how much bz and pcwalton know about parallel layout :)
[18:23:47] <lkuper> or incremental layout, really
[18:29:33] *** Quits: ddamjano (Instantbird@moz-m0b7og.ehig.7h68.8388.2a02.IP) (Ping timeout: 121 seconds)
[18:30:49] *** Quits: jdm (jdm@moz-ilbt2e.cable.teksavvy.com) (Ping timeout: 121 seconds)
[18:38:42] *** Quits: brson (brson@moz-cfhap5.mtv2.mozilla.com) (Quit: leaving)
[18:50:46] *** Joins: jdm (jdm@moz-ilbt2e.cable.teksavvy.com)
[19:02:40] *** Quits: flaper87 (flaper87@moz-fnn.1e9.132.209.IP) (Ping timeout: 121 seconds)
[19:24:25] *** Joins: ddamjano (Instantbird@moz-m0b7og.ehig.7h68.8388.2a02.IP)
[19:25:50] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[19:25:50] *** ChanServ sets mode: +o pcwalton
[19:31:31] *** Joins: nrc (nrc@moz-4bhi2i.xtra.co.nz)
[19:35:29] *** Joins: Dexter (Alessio@moz-lsijj5.retail.telecomitalia.it)
[19:37:39] *** Quits: ddamjano (Instantbird@moz-m0b7og.ehig.7h68.8388.2a02.IP) (Ping timeout: 121 seconds)
[20:07:06] *** Joins: ddamjano (Instantbird@moz-m0b7og.ehig.7h68.8388.2a02.IP)
[20:08:40] *** Joins: flaper87 (flaper87@moz-fnn.1e9.132.209.IP)
[20:10:09] *** Quits: till (till@moz-m8t13q.adsl.alicedsl.de) (Quit: night)
[20:18:52] *** Quits: ehsan (ehsan@moz-4gmmoh.fibre.fibrestream.ca) (A TLS packet with unexpected length was received.)
[20:26:05] <aturon> nrc: hey, i recently realized i never followed up about the blog series (the first of which went out on Friday). would you be interested in writing up a post about "What DST is, and why you should care?" This would come somewhat later in the series, after a few of the more basic concepts have been covered (cc nmatsakis)
[20:30:31] <nrc> aturon: I could, I'm not sure it's a good topic for a high profile blog post - I don't think DST is really a selling point for Rust and its not something that is very necessary for people to know about, at least until they know Rust pretty well
[20:30:50] *** Joins: ehsan (ehsan@moz-4gmmoh.fibre.fibrestream.ca)
[20:31:14] <aturon> nmatsakis: ^
[20:40:10] <kmc> I think you could talk about DST as part of an article discussing how Rust puts as much as possible in library-land and gives users the power to build abstractions equal with the "built-in" ones
[20:40:37] <kmc> which was already a big theme in the concurrency post
[20:41:13] <aturon> right, and in particular talking about making user-defined smart pointers integrate with the rest of the language
[20:41:55] <aturon> i mean, nrc is right that it's a pretty "advanced" topic, but that's why it would come late in the series -- and i think it's possible to get the high-level ideas and benefits across without delving too much into detail.
[20:42:06] *** Quits: ehsan (ehsan@moz-4gmmoh.fibre.fibrestream.ca) (A TLS packet with unexpected length was received.)
[20:42:30] *** Joins: ehsan (ehsan@moz-4gmmoh.fibre.fibrestream.ca)
[20:43:16] <nrc> I think a blog about the Rust philosophy of pushing lnag stuff to the libs, with DST as a part of that, would be great (like kmc said)
[20:44:08] <jack> aturon: If you want a toy example for DST you might use the one from Servo we ran into which was Arc<Trait>
[20:44:10] *** Quits: ehsan (ehsan@moz-4gmmoh.fibre.fibrestream.ca) (A TLS packet with unexpected length was received.)
[20:44:32] <kmc> that doesn't work yet, does it?
[20:44:34] <aturon> jack: yes, hopefully that part of DST will actually be working by then :)
[20:44:35] <jack> Maybe there are more concise examples, but that one is nice because working around it is also hard
[20:44:37] <kmc> hehe
[20:44:56] <aturon> but yeah, that's the kind of thing i had in mind for "smart pointers playing with language features" (here, trait objects)
[20:44:59] <jack> Working around it without Arc<Box<Trait>> anyway
[20:45:02] <aturon> yeah
[20:45:09] <kmc> DST makes traits like Deref and Borrow really powerful
[20:45:41] <kmc> I implemented a custom string type and it has most of the expected string behavior thanks to traits like that
[20:46:24] <aturon> nrc: in terms of scheduling, we have weekly posts lined up heading into 1.0 right now, so this would likely come a couple weeks after the 1.0 release (haven't figured out exact timeline for the later part of the series)
[20:46:31] *** Joins: ehsan (ehsan@moz-4gmmoh.fibre.fibrestream.ca)
[21:04:13] *** Quits: ehsan (ehsan@moz-4gmmoh.fibre.fibrestream.ca) (A TLS packet with unexpected length was received.)
[21:18:40] *** Joins: brson (brson@moz-cfhap5.mtv2.mozilla.com)
[21:18:41] *** ChanServ sets mode: +o brson
[21:21:46] *** Quits: Dexter (Alessio@moz-lsijj5.retail.telecomitalia.it) (Quit: Leaving)
[21:35:07] <khuey> roc: so I think I'm pretty close to finally figuring out this damn bug
[21:40:00] *** Joins: pnkfelix (pnkfelix@moz-eljppb.fbx.proxad.net)
[21:40:27] *** Quits: mchang (mchang@moz-i5m.05u.207.66.IP) (Client exited)
[21:41:14] <roc> yeah???!!!
[21:44:05] <khuey> roc: so after a clone(2) call we try to set up some mapping for rr's use for the new thread
[21:44:09] <khuey> /process/whatever
[21:44:18] *** Joins: mchang (mchang@moz-i5m.05u.207.66.IP)
[21:44:20] <khuey> roc: and the syscall we inject to do that is the one being "missed"
[21:44:39] <khuey> roc: but it looks like we're using the ip from the thread that called clone(2) to determine where to put our instructions in
[21:44:40] <roc> "missed" how?
[21:44:47] <khuey> missed as in we don't hit it
[21:44:53] <khuey> and we end up somewhere we don't expect
[21:44:55] <khuey> and rr asserts
[21:45:00] <roc> mmmm
[21:45:16] <roc> are we flushing the instruction cache for the wrong thread?
[21:45:23] <khuey> no
[21:45:29] <khuey> we're installing the syscall at the wrong ip
[21:45:38] <khuey> I think the kernel might be lying to us about the ip of the new thread
[21:45:43] <khuey> and telling us its the ip of the old thread
[21:45:48] <khuey> since it hasn't run yet
[21:45:51] <roc> mmmmmmm
[21:45:54] <roc> bad kernel
[21:45:56] <khuey> but I haven't verified that yet
[21:46:07] <khuey> rr appears to be using the right tasks at least
[21:47:08] <roc> on rr trunk, AutoRemoteSyscalls::AutoRemoteSyscalls uses t->vm()->traced_syscall_ip() as the address of the syscall instruction to use
[21:47:57] <khuey> on my old branch we just grab t->ip()
[21:48:07] <roc> khuey: which is either found by scanning the VDSO for a usable instruction, or by using the instruction we placed in the rr page
[21:48:45] <khuey> though
[21:48:55] * khuey checks something
[21:49:02] <roc> I made that change a while back to try to get closer to support PaX kernels, which don't let you modify code pages
[21:49:48] <khuey> I wonder if we immediately reget the registers after cloning a task
[21:50:57] <khuey> we do call wait() on teh new Task
[21:52:19] <khuey> alright, my theory is still that the kernel is lying
[21:52:22] * khuey attempts to verify that
[21:57:31] <khuey> rr definitely does PTRACE_GETREGS on the new task
[22:00:30] <khuey> roc: yup, at https://github.com/khuey/rr/blob/arm/src/task.cc#L1593
[22:00:36] <khuey> roc: the new and old tasks have the exact same registers
[22:01:21] <khuey> so the ip is not the thing passed into clone
[22:01:33] <khuey> the ip reported by the kernel, that is
[22:04:22] *** Quits: pnkfelix (pnkfelix@moz-eljppb.fbx.proxad.net) (Quit: rcirc on GNU Emacs 24.3.92.1)
[22:08:18] *** Quits: mbx (textual@moz-jgccpd.res.rr.com) (Quit: My Mac has gone to sleep. ZZZzzz…)
[22:10:29] *** Quits: mchang (mchang@moz-i5m.05u.207.66.IP) (Client exited)
[22:10:31] *** Quits: Manishearth (manishearth@moz-8puj7k.net) (Ping timeout: 121 seconds)
[22:11:32] *** Joins: Manishearth (manishearth@moz-8puj7k.net)
[22:16:44] *** Quits: ddamjano (Instantbird@moz-m0b7og.ehig.7h68.8388.2a02.IP) (Ping timeout: 121 seconds)
[22:28:16] *** Joins: tadh (quassel@moz-77pugv.res.rr.com)
[22:46:15] <khuey> roc: unfortunately it's not obvious to me how to fix this in the kernel
[22:46:25] <khuey> the obvious changes to mirror x86 make it not boot :P
[22:46:38] <khuey> roc: but rr can parse the arguments to clone to figure out where we're "supposed" to go
[22:48:55] *** Quits: bjz (bjz@moz-puppgq.tpgi.com.au) (Quit: My Mac has gone to sleep. ZZZzzz…)
[22:56:03] <roc> yeah
[23:08:53] *** Quits: roc (chatzilla@moz-dq40ka.orcon.net.nz) (Connection closed)
[23:54:42] *** Joins: fungos (quassel@moz-p1o.6pj.156.69.IP)
[23:58:35] *** Joins: roc (chatzilla@moz-h8ll9b.dqqd.b0fh.0cb0.2001.IP)
