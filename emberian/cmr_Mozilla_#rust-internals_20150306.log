[16:06:46] *** Joins: cmr (cmr@moz-35s2fm.members.linode.com)
[16:06:47] *** ChanServ sets mode: +o cmr
[16:07:19] <nmatsakis> japaric: hey so I was doing some experimenting with type inference and it seemed like some of hte errors you reported seeing shouldn't happen;
[16:07:28] <nmatsakis> japaric: do you have a branch I could build from that implements the approach I was talking about?
[16:08:08] <japaric> nmatsakis: yeah, I can push my WIP branch
[16:10:38] *** Quits: jdm (jdm@moz-ilbt2e.cable.teksavvy.com) (Quit: )
[16:11:07] <japaric> nmatsakis: https://github.com/japaric/rust/tree/binops-ng (pretty bare bones at the moment)
[16:13:13] <nmatsakis> japaric: thanks
[16:13:39] *** Joins: jdm (jdm@moz-ilbt2e.cable.teksavvy.com)
[16:13:40] <japaric> nmatsakis: I think you can reproduce what I saw if you type check PartialEq::eq(&Shl::shl(bits, 31), &0) with bits: u32
[16:14:04] <japaric> s/Shl/Shr/
[16:14:42] <japaric> nmatsakis: and exponent += Add::add(127, 23) with exponent: i16
[16:14:56] <japaric> nmatsakis: and I meant type check in your branch without my changes
[16:14:59] <nmatsakis> yes, ok, I can believe that -- simpler tests didnt' expose the problem, but shifting in particular might cause it 
[16:15:04] <nmatsakis> yes, right I understood
[16:15:11] <nmatsakis> I'll experiment
[16:15:31] <nmatsakis> I can certainly imagine why those errors might occur
[16:15:36] <nmatsakis> but I wanted to look at the precise examples
[16:20:10] *** Joins: munksgaard (munksgaard@moz-478pev.u.parknet.dk)
[16:23:20] <arrrrrrr1> rusti: let x = 0 as *const u8; let y = x as *mut u16;
[16:23:21] -playbot- ()
[16:23:32] <arrrrrrr1> this is new
[16:27:49] *** Joins: dinfuehr (dinfuehr@moz-kul4hn.highway.telekom.at)
[16:31:53] *** Quits: dinfuehr (dinfuehr@moz-kul4hn.highway.telekom.at) (Ping timeout: 121 seconds)
[16:32:49] *** Joins: Astrum|Lap (Astrum|Lap@moz-7enfbr.co.comcast.net)
[16:35:03] *** Joins: asddiow (Mibbit@moz-4val3f.broadband.corbina.ru)
[16:35:24] *** Quits: pnkfelix (pnkfelix@moz-6v5.3nd.202.89.IP) (Quit: rcirc on GNU Emacs 24.3.92.1)
[16:35:31] *** Parts: asddiow (Mibbit@moz-4val3f.broadband.corbina.ru) ()
[16:35:46] *** Joins: asddiow (Mibbit@moz-4val3f.broadband.corbina.ru)
[16:35:58] *** Quits: asddiow (Mibbit@moz-4val3f.broadband.corbina.ru) (Quit: http://www.mibbit.com ajax IRC Client)
[16:36:49] <awe> acrichto: dynamic libraries still use std::old_path::Path. :(
[16:36:57] *** Quits: mystor (mystor@moz-ldavpp.home3.cgocable.net) (Connection closed)
[16:37:29] *** Joins: mystor (mystor@moz-ldavpp.home3.cgocable.net)
[16:39:02] *** Quits: Astrum|Lap (Astrum|Lap@moz-7enfbr.co.comcast.net) (Ping timeout: 121 seconds)
[16:40:27] <arrrrrrr1> what is http://is.gd/F51QAS meant to show?
[16:40:35] <arrrrrrr1> the original syntax already works
[16:40:39] <WindowsBunny> Manishearth: it failed btw
[16:41:31] *** Quits: mystor (mystor@moz-ldavpp.home3.cgocable.net) (Ping timeout: 121 seconds)
[16:42:32] <Manishearth> WindowsBunny: same reason? :/
[16:42:40] <Manishearth> WindowsBunny: can you get a RUST_BACKTRACE?
[16:42:47] <Manishearth> or see if it passes under that
[16:44:01] <awe> arrrrrrr1: It seems to me like they want this to happen automatically?
[16:44:29] <WindowsBunny> Manishearth: http://puu.sh/goXjG/6e3b2c32a9.png
[16:45:45] <Manishearth> WindowsBunny: <3
[16:45:55] <Manishearth> Anyone can figure out why that happened?
[16:46:03] <Manishearth> > 7764 illegal instruction
[16:46:04] *** Quits: summerlight (summerlight@moz-99k.2mj.130.121.IP) (Ping timeout: 121 seconds)
[16:46:23] <WindowsBunny> Manishearth: Yeah, that's how rust crashes
[16:46:39] <WindowsBunny> it hits an illegal instruction signal :D
[16:46:58] *** Quits: darnuria (darnuria@moz-cagds5.kokakiwi.net) (Connection closed)
[16:47:31] *** Joins: darnuria (darnuria@moz-cagds5.kokakiwi.net)
[16:48:42] *** Quits: minzh (minzh@moz-njk.vg0.96.122.IP) (A TLS packet with unexpected length was received.)
[16:50:00] *** Joins: rustical (..@moz-55rvi2.dclient.hispeed.ch)
[16:51:06] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[16:51:26] <arrrrrrr1> if typedefs generated types that can be cast to the original type with `as`, that would be great
[16:51:47] <Manishearth> WindowsBunny: https://github.com/rust-lang/rust/pull/23097
[16:51:49] <arrrrrrr1> if you have a typedef then you should use `as` always anyway
[16:52:11] <WindowsBunny> Manishearth: Should I test this individually?
[16:52:41] <Manishearth> WindowsBunny: eh, I'm going to push the rollup sans that PR anyway
[16:53:01] *** Joins: Astrum|Lap (Astrum|Lap@moz-7enfbr.co.comcast.net)
[16:53:51] *** Joins: Slide (slide@moz-qip.011.149.49.IP)
[16:54:10] <Manishearth> WindowsBunny: but sure, if you want to heat your room, I have no objection :P
[16:54:21] <WindowsBunny> Manishearth: Hey, it's winter :P
[16:54:37] <Manishearth> lol
[16:54:51] *** Joins: petrochenkov (Mibbit@moz-4val3f.broadband.corbina.ru)
[16:54:59] <WindowsBunny> I swear, if llvm rebuilds
[16:55:12] <WindowsBunny> I am going to randomly stab someone in here
[16:55:25] * Zoxc runs away
[16:55:48] <Manishearth> WindowsBunny: protip: don't git checkout master
[16:55:56] <Manishearth> WindowsBunny: git fetch origin; git checkout origin/master
[16:56:02] <Manishearth> optional git checkout -B master
[16:56:17] <Manishearth> probably your master is pre-yesterday's rollup
[16:56:36] <WindowsBunny> Manishearth: I just re-fetched, and then did a git reset --hard
[16:56:38] * Manishearth wonders if he should start doing octopus rollups
[16:56:42] <WindowsBunny> that's it
[16:56:55] <WindowsBunny> basically a jump from your PR to just this PR
[16:56:57] <Manishearth> WindowsBunny: ah
[16:57:03] <Manishearth> that should just work (tm)
[16:57:23] * WindowsBunny chases after Zoxc with a knife
[16:58:00] * Manishearth deletes WindowsBunny's registry while he's off chasing Zoxc 
[16:58:11] * Zoxc drops a banana peel
[17:01:30] *** Quits: mpk (mpk@moz-0pd.skh.51.84.IP) (Client exited)
[17:04:40] *** Joins: brson (brson@moz-cfhap5.mtv2.mozilla.com)
[17:04:40] *** ChanServ sets mode: +o brson
[17:09:04] *** Joins: Kxepal (Miranda@moz-b1v3ht.pppoe.mtu-net.ru)
[17:10:35] *** Joins: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net)
[17:10:35] *** ChanServ sets mode: +o pcwalton
[17:13:40] <arrrrrrr1> is struct X(T); called a unit struct?
[17:13:47] *** Quits: laumann (laumann@moz-n9e72h.0.fullrate.dk) (Ping timeout: 121 seconds)
[17:14:15] <arrrrrrr1> or was that struct X;?
[17:14:47] <Manishearth> a	tuple struct
[17:14:51] <Manishearth> arrrrrrr1: ^
[17:14:55] <arrrrrrr1> but specifically with one argument
[17:14:56] <Manishearth> the latter is a unit struct
[17:15:04] <arrrrrrr1> I'll just call it newtype struct
[17:15:07] <Manishearth> the type `()` is (well, was) called unit
[17:15:08] <WindowsBunny> with one argument it is newtype
[17:15:15] <Manishearth> struct X is effectively the same as ()
[17:15:18] <WindowsBunny> with one or more arguments it is tuple struct
[17:15:18] <Manishearth> so unit struct
[17:15:21] <Manishearth> yeah
[17:15:24] <WindowsBunny> and zero arguments is unit struct
[17:18:29] *** Joins: bluss (bluss@moz-ec5o68.cust.bredbandsbolaget.se)
[17:19:10] *** Joins: eerie (eerie@moz-v3eps5.red.bezeqint.net)
[17:19:55] *** Joins: pnkfelix (pnkfelix@moz-eljppb.fbx.proxad.net)
[17:19:56] *** ChanServ sets mode: +o pnkfelix
[17:22:02] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[17:22:25] *** Quits: Slide (slide@moz-qip.011.149.49.IP) (Ping timeout: 121 seconds)
[17:22:37] *** Joins: Slide (slide@moz-qip.011.149.49.IP)
[17:23:38] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[17:24:18] <barosl> Manishearth, `force` in gh23107 didn't get effective
[17:24:18] <[o__o]> Rollup of PRs in the queue; Friday: https://github.com/rust-lang/rust/pull/23107
[17:24:25] <barosl> You should command it again
[17:24:38] <barosl> It seems that `force` sometimes doesn't work, no?
[17:26:22] *** Joins: mpk (mpk@moz-0pd.skh.51.84.IP)
[17:27:08] <Manishearth> ah, right, thanks
[17:27:13] <Manishearth> yeah, sometimes it doesn't
[17:27:44] *** Quits: avikpal (avikpal@moz-rle.nmc.194.117.IP) (Connection closed)
[17:28:35] *** Joins: dinfuehr (dinfuehr@moz-kul4hn.highway.telekom.at)
[17:31:08] *** Joins: scialex (scialex@moz-j5mi8i.cs.brown.edu)
[17:32:02] *** Quits: Amaranth (travis@moz-1raqsl.cpe.cableone.net) (Connection closed)
[17:32:18] *** Joins: avikpal (avikpal@moz-rle.nmc.194.117.IP)
[17:32:39] *** Quits: dinfuehr (dinfuehr@moz-kul4hn.highway.telekom.at) (Ping timeout: 121 seconds)
[17:33:23] *** Quits: squiddy (squiddy@moz-md4.pm3.19.178.IP) (Quit: Leaving)
[17:35:52] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[17:38:04] *** Joins: madmalik (uid13697@moz-lfin5p.brockwell.irccloud.com)
[17:39:04] <japaric> nmatsakis: re-r? gh23117 moved to check to wf, and added a test for a case that the previous version didn't catch in time
[17:39:04] <[o__o]> Check that traits with default impls have no methods: https://github.com/rust-lang/rust/pull/23117
[17:39:53] *** Quits: larhat (Adium@moz-8v4.af0.232.213.IP) (Quit: Leaving.)
[17:41:47] *** japaric is now known as japaric|afk
[17:43:28] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[17:43:56] *** Quits: eerie (eerie@moz-v3eps5.red.bezeqint.net) (Connection closed)
[17:44:02] *** Joins: eerie (eerie@moz-v3eps5.red.bezeqint.net)
[17:44:48] *** Joins: Amaranth (travis@moz-1raqsl.cpe.cableone.net)
[17:45:32] *** Quits: Rym (y@moz-bim.h8b.39.217.IP) (Ping timeout: 121 seconds)
[17:49:21] *** Joins: eerie_ (eerie@moz-v3eps5.red.bezeqint.net)
[17:50:07] *** Quits: pnkfelix (pnkfelix@moz-eljppb.fbx.proxad.net) (Quit: rcirc on GNU Emacs 24.3.92.1)
[17:50:17] *** Quits: avikpal (avikpal@moz-rle.nmc.194.117.IP) (Ping timeout: 121 seconds)
[17:52:06] *** Quits: eerie (eerie@moz-v3eps5.red.bezeqint.net) (Ping timeout: 121 seconds)
[17:54:01] *** Quits: LinuxBunny (Retep998@moz-gv8vtu.east.verizon.net) (Ping timeout: 121 seconds)
[17:54:15] *** Quits: Murarth (Murarth@moz-c6ubhh.phnx.qwest.net) (Quit: Alfador is the Entity!)
[17:56:18] *** Quits: eerie_ (eerie@moz-v3eps5.red.bezeqint.net) (Connection closed)
[17:56:30] *** Joins: Murarth (Murarth@moz-tkj.b85.166.46.IP)
[17:57:03] *** Quits: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net) (Client exited)
[17:59:04] *** Joins: bfops (uid58242@moz-e5u6m0.charlton.irccloud.com)
[18:00:43] *** Joins: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net)
[18:00:43] *** ChanServ sets mode: +o pcwalton
[18:08:55] <simukis> acrichto: you probably want to rollup that deadlock PR
[18:09:32] *** Quits: kushal (kdas@moz-3tt6sl.202.sitibroadband.in) (Quit: Leaving)
[18:12:24] <Gankro> aturon: So apparently the drain RFC doesn't specify anything outside of Vec and String? Seems inconsistent?
[18:13:44] *** Joins: Rym (y@moz-bim.h8b.39.217.IP)
[18:14:20] *** Quits: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net) (Client exited)
[18:17:45] <brson> Is deriving(Rand) now another deriving that only works for an out-of-tree crate?
[18:18:12] *** Quits: Rym (y@moz-bim.h8b.39.217.IP) (Ping timeout: 121 seconds)
[18:22:24] *** Quits: Guest63 (textual@moz-qfs.570.70.83.IP) (Quit: My Mac has gone to sleep. ZZZzzz…)
[18:22:58] <bluss> crate rand_macros on crates.io has its own syntax extension #[deriving_Rand]
[18:23:25] <bluss> *derive_Rand (of course)
[18:24:33] *** Quits: johnsoft (johnsoft@moz-69mrig.res.rr.com) (Ping timeout: 121 seconds)
[18:26:13] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[18:29:22] *** Joins: dinfuehr (dinfuehr@moz-kul4hn.highway.telekom.at)
[18:29:28] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[18:29:41] <barosl> acrichto, Have any exceptions occurred in Homu? The `force` command sometimes gets ignored, so I want to know it was due to an obvious reason
[18:30:02] <acrichto> barosl: nah no exceptions since I started it last
[18:30:09] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Connection closed)
[18:30:13] <barosl> Duh
[18:30:14] <acrichto> which was yesterday I think?
[18:30:24] <barosl> Yes, it was
[18:31:35] *** Joins: mystor (mystor@moz-vpa.r78.15.130.IP)
[18:33:13] <kmc> lol we should implement ultra hack sugar
[18:33:21] <kmc> where derive(UnknownTrait) is sugar for derive_UnknownTrait
[18:33:26] *** Quits: dinfuehr (dinfuehr@moz-kul4hn.highway.telekom.at) (Ping timeout: 121 seconds)
[18:33:39] <sfackler> kmc pls
[18:34:00] <kmc> I wanted to, like, register deriving extensions to traits themselves in a proper way
[18:34:01] <cmr> I mean
[18:34:03] <kmc> but screw it
[18:34:08] <cmr> until we actually implement derive
[18:34:11] <kmc> there's not much you can do because exansion runs so early
[18:34:13] <cmr> that's not that bad of an idea
[18:34:27] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[18:35:20] <kmc> this would be like a 10 line patch to libsyntax/ext/deriving/mod.rs
[18:36:40] <nmatsakis> acrichto mw: so (for me at least) building with RUSTFLAGS='-g' doesn't work for rustc -- do you think we should add this to bors somehow?
[18:36:54] *** Joins: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net)
[18:36:54] *** ChanServ sets mode: +o pcwalton
[18:37:13] <nmatsakis> kmc: I always wanted derive(Foo,Bar) to be shorthand for derive_Foo and derive_Bar
[18:37:18] <nmatsakis> kmc: seems like the simplest thing
[18:37:51] <kmc> what are the arguments against?
[18:38:07] *** Joins: srh (User@moz-80e.38o.254.50.IP)
[18:38:08] <brson> bluss: derive(Rand) is still in tree though
[18:38:25] <sfackler> it seems like it'd also be really easy to add "deriving" registration to the plugin system
[18:38:42] <kmc> sfackler: yeah
[18:38:46] *** Joins: blank_name (blank_name@moz-mteiba.mi.frontiernet.net)
[18:39:11] <XMPPwocky> i wonder if there could be a more general solution... as in actually defining derive as a macro that adds #[derive_foo] descriptors. not possible with today's macros, but...
[18:39:13] <kmc> but is the key for that registration just the unqualified name of the trait, as a string?
[18:39:18] <kmc> ideally not
[18:39:34] *** japaric|afk is now known as japaric
[18:39:39] *** Joins: johnsoft (johnsoft@moz-69mrig.res.rr.com)
[18:39:50] <kmc> if the answer is "yes" then we might as well save the complexity and go with the simple sugar
[18:39:53] *** Quits: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net) (Client exited)
[18:40:20] <kmc> (simple sugar intended to connote that it's delicious and probably bad for you)
[18:41:00] *** Quits: huseby (huseby@moz-m7l0au.d2vr.5em6.6400.2605.IP) (Client exited)
[18:41:07] <sfackler> I can't think of any concrete reasons to oppose the derive(Foo) -> derive_Foo sugar other than it seems super janky :P
[18:41:12] <kmc> so this actually would be back-compat, too
[18:41:24] <kmc> we would gate derive_* and only allow derive(...) in source
[18:41:37] <kmc> and there's no way to introduce a new item decorator in the stable language
[18:41:47] <kmc> although I should check that macro_rules! derive_Rand wouldn't conflict
[18:42:10] <kmc> stuff like that I'm willing to fudge around back-compat
[18:42:21] <kmc> it's not like macro_rules! derive_Rand would do anything sensible today, it's just an error
[18:42:38] <sfackler> i think it'll be back compat without any changes
[18:42:46] <sfackler> since unknown attributes are feature gated
[18:42:49] <kmc> in the long term we really should have a way to define deriving thru macro_rules
[18:42:54] <kmc> but that requires more thought
[18:43:04] <sfackler> that'd be really nice
[18:43:10] <kmc> whether we should normalize struct definitions before passing them thru as token trees, etc
[18:43:33] <kmc> derive(Foo) -> derive_Foo sugar is a step towards that too
[18:43:54] <kmc> if we added another registrar method we'd also need an attribute or something to use it from macro_rules
[18:44:45] <aturon> Gankro: oh good point; i basically take it as establishing a new collections convention and think we can roll out in other collections where it makes sense
[18:46:32] *** Joins: huseby (huseby@moz-m7l0au.d2vr.5em6.6400.2605.IP)
[18:51:03] <kmc> we probably can't do much better than derive_Foo as long as derive is purely a syntax extension
[18:51:10] <Gankro> aturon: re: https://github.com/rust-lang/rust/pull/23071#issuecomment-77586034
[18:51:18] <WindowsBunny> Manishearth: Okay, just that specific PR causes a test failure
[18:51:22] <WindowsBunny> Manishearth: But not the same failure
[18:51:27] <WindowsBunny> it just causes a regular failure
[18:51:32] *** Joins: dcb (textual@moz-j72nfe.ca.comcast.net)
[18:51:38] <Gankro> Not sure if collections (like HashMap) which have no ordering should have `drain()` or `drain(..)`
[18:51:43] <kmc> what I really really super want for like 100 reasons is the ability to generate new items late in compilation, just before trans, and send them back through for type checking etc.
[18:52:04] <Manishearth> kmc weren't you there when we discussed autoderive?
[18:52:05] <kmc> doing this properly would be an awesome project and an enormous one
[18:52:11] <cmr> kmc: I mean, can't you?
[18:52:12] <Manishearth> yeah, you were
[18:52:13] <aturon> Gankro: the `..` option doesn't work well, since the signature is supposed to be bounded by a trait
[18:52:19] <aturon> that allows all range types
[18:52:19] *** Joins: pcwalton (pcwalton@moz-u92.384.6.71.IP)
[18:52:19] *** ChanServ sets mode: +o pcwalton
[18:52:26] <cmr> make a new AST, go through everything after phase 2 again
[18:52:34] <WindowsBunny> Manishearth: http://puu.sh/gp5sg/94b8666359.png
[18:52:42] <Gankro> aturon: That... is not what the RFC or impl are doing?
[18:52:44] <kmc> represent the entire annotated AST as an attribute grammar and run all analysis in parallel and to a fixed point
[18:52:44] <Manishearth> +1 to the sugar
[18:52:51] *** Quits: huseby (huseby@moz-m7l0au.d2vr.5em6.6400.2605.IP) (Client exited)
[18:52:57] <Gankro> They accept some custom DrainInput trait
[18:53:04] <kmc> that'd also be awesome for rusti
[18:53:07] <aturon> Gankro: grrrr
[18:53:07] *** Joins: huseby (huseby@moz-m7l0au.d2vr.5em6.6400.2605.IP)
[18:53:09] <kmc> cmr: yes but slooooooow
[18:53:15] <cmr> kmc: mehhhh
[18:53:22] <Gankro> aturon: ?
[18:53:28] <aturon> (checking)
[18:53:32] <Manishearth> windowsbunny can you lea a comment witthe link?
[18:53:38] <WindowsBunny> Manishearth: I did
[18:53:46] <Manishearth> k
[18:53:48] <aturon> Gankro: so the RFC says "Where Trait is some trait that is implemented for at least Range<usize>, RangeTo<usize>, RangeFrom<usize>, FullRange, and usize."
[18:53:53] *** Quits: ptalbot (ptalbot@moz-1gn7gb.eu0n.jcdj.0660.2001.IP) (Ping timeout: 121 seconds)
[18:53:57] <kmc> cmr: I guess it won't be that bad, because you only run trans and LLVM once :)
[18:54:13] <aturon> Gankro: though I interpreted that to be a kind of RangeLike<T> trait that we've discussed before
[18:54:14] *** Quits: scialex (scialex@moz-j5mi8i.cs.brown.edu) (Quit: Leaving)
[18:54:19] <aturon> Gankro: and want for other reasons
[18:54:22] <aturon> not something custom for draining
[18:54:33] <aturon> (hence the grr)
[18:54:40] <WindowsBunny> Manishearth: What is interesting is that the test fails normally with this PR
[18:54:43] *** Quits: Murarth (Murarth@moz-tkj.b85.166.46.IP) (Quit: Mani Mani is always Mani Mani at Mani Mani with all Mani Mani Mani)
[18:54:48] <WindowsBunny> Manishearth: but with the rest of the rollup it fails AND explodes
[18:54:51] <kmc> Manishearth: I've been around for various discussions about the future of derive, I'm not sure what you're referring to exactly
[18:54:53] *** Joins: Murarth (Murarth@moz-c6ubhh.phnx.qwest.net)
[18:54:58] <Gankro> aturon: Might want to peek in on the impl PR
[18:55:21] <aturon> Gankro: yep, will do. i'm at a little symposium today so don't have much bandwidth to review, but please don't sign off till i've had a chance to look as well
[18:55:31] <aturon> (and thanks for the heads-up)
[18:58:51] <kmc> ah yeah we only treat attributes as syntax extensions if they correspond specifically to a Decorator or a Modifier
[18:58:53] *** Joins: Guest63 (textual@moz-6gq.t8s.78.166.IP)
[18:58:55] <kmc> wonder if there's already a test
[19:00:02] <aturon> Gankro: https://github.com/rust-lang/rust/pull/23071#issuecomment-77614708 and below
[19:03:31] <arrrrrrr1> Such a trait would need at least the following methods: is_decreasing, is_bounded_by, bound_by(T, T) -> Self
[19:03:40] <arrrrrrr1> or Option<Self>
[19:04:17] *** Quits: WindowsBunny (Peter@moz-gv8vtu.east.verizon.net) (Connection closed)
[19:04:22] *** Joins: WindowsBunny (Peter@moz-gv8vtu.east.verizon.net)
[19:04:35] <Gankro> aturon: Ah shoot, there's no way to do something like trait Drain<Input> { type Drain: blah; fn drain(&mut self, Input) -> Drain } without HKT, eh?
[19:05:28] <Gankro> That's my ideal vision of such an API, as it permits specialization of the iterator based on input
[19:06:01] <Gankro> e.g. FullRange can be much simple than Range, which may have perf consequences
[19:06:28] *** Quits: mystor (mystor@moz-vpa.r78.15.130.IP) (Connection closed)
[19:06:32] <aturon> arrrrrrr1: i disagree. i would expect that drain in String and Vec, for example, would instantiate the trait with usize
[19:06:48] <aturon> Gankro: yeah, i think we talked through this the first time around
[19:07:08] <Gankro> aturon: probably :)
[19:07:42] <Gankro> Would it be back-compat to change to such an API later?
[19:07:50] <arrrrrrr1> if the trait is defined on Range<T>, RangeTo<T>, etc. then that is not possible
[19:07:51] *** Joins: Rym (y@moz-bim.h8b.39.217.IP)
[19:08:06] <Gankro> With arrrrrrr1's current impl I think it would be, but not with aturon's proposed impl
[19:08:08] <arrrrrrr1> Gankro: there are no performance conequences in the current implementation
[19:08:17] <Gankro> arrrrrrr1: Oh, great!
[19:08:21] <arrrrrrr1> Gankro: write it down then
[19:08:33] <Gankro> arrrrrrr1: Write what down?
[19:08:37] <arrrrrrr1> the trait
[19:08:41] <arrrrrrr1> at least the signatures
[19:11:44] <Gankro> arrrrrrr1: Posted on the issue
[19:12:12] <arrrrrrr1> no, the signature of the trait aturon proposes
[19:12:20] <arrrrrrr1> the one that's implemented on Range<T>
[19:12:23] *** Quits: Rym (y@moz-bim.h8b.39.217.IP) (Ping timeout: 121 seconds)
[19:12:46] <arrrrrrr1> I'm saying that there is no reasonable way to write such a trait
[19:13:09] <Gankro> arrrrrrr1: Oh. trait RangeLike<T>  { fn bounds(&self) -> (Bound<T>, Bound<T>) }
[19:13:25] <Gankro> Where Bound is the one in std::collections
[19:13:41] <arrrrrrr1> what's Bound<T>?
[19:13:53] <arrrrrrr1> ah
[19:13:54] <Gankro> Inclusive(T) | Exclusive(T) | Unbounded
[19:14:23] <Gankro> Possibly those are &T's somewhere
[19:14:39] <Gankro> But that's the basic gist. Covers everything, I think?
[19:14:39] *** Joins: Rym (y@moz-bim.h8b.39.217.IP)
[19:15:43] <Gankro> arrrrrrr1: The fact that Vec and String have no overhead isn't particularly surprising; they're super simple structures. I'm less certain that VecDeque or BTreeMap will be as lucky
[19:15:50] <arrrrrrr1> that trait looks quite useless for Range<T> in general
[19:16:22] <Gankro> arrrrrrr1: I don't follow
[19:16:32] *** Joins: O01eg (o01eg@moz-ma9ee4.l582.4n8f.2698.2a02.IP)
[19:16:49] <Gankro> a..b is (Inclusive(a), Exclusive(b))
[19:17:09] <arrrrrrr1> if anything it should be (Option<T>, Option<T>)
[19:17:27] <brson> I filed a PR to throw away RFC 8 (intrinsics) w/o implementing https://github.com/rust-lang/rfcs/pull/948
[19:17:43] <arrrrrrr1> and that trait cannot be implemented on T itself
[19:17:45] <Gankro> arrrrrrr1: We'd rather not shut out range_inclusive types of things
[19:17:56] *** Quits: pcwalton (pcwalton@moz-u92.384.6.71.IP) (Client exited)
[19:19:11] *** Quits: Rym (y@moz-bim.h8b.39.217.IP) (Ping timeout: 121 seconds)
[19:19:45] *** Joins: zmack_ (zmack@moz-b26i0b.home.aster.pl)
[19:20:20] <WindowsBunny> Manishearth: After the beta period is over, we should have a second beta which is _just_ fixing bugs and improving performance
[19:20:27] <WindowsBunny> and to hell with the library and new features
[19:21:11] *** Joins: japaric_ (japaric@moz-n1d.9tj.233.190.IP)
[19:21:35] *** Quits: zmack (zmack@moz-b26i0b.home.aster.pl) (Ping timeout: 121 seconds)
[19:22:06] <brson> i'm a big fan of fixing bugs and perf and not doing features
[19:22:47] *** Joins: japaric__ (japaric@moz-fqr.cpr.230.201.IP)
[19:23:37] <Gankro> brson: +1 from collections stuff. Everything we're doing is fiddling with #unstable stuff
[19:23:51] <Gankro> That I doubt will stabilize for 1.0
[19:23:59] *** Quits: japaric (japaric@moz-mnb.nid.233.190.IP) (Ping timeout: 121 seconds)
[19:24:26] <Gankro> Would like to collect up "real" stress tests for perf
[19:25:26] <Gankro> arrrrrrr1: I g2g, hopefully we can pick this up later
[19:25:31] *** Quits: japaric_ (japaric@moz-n1d.9tj.233.190.IP) (Ping timeout: 121 seconds)
[19:28:51] *** Joins: Rym (y@moz-bim.h8b.39.217.IP)
[19:30:08] *** Joins: dinfuehr (dinfuehr@moz-kul4hn.highway.telekom.at)
[19:30:55] *** Joins: adu (ajr@moz-vd1fau.fios.verizon.net)
[19:33:50] *** Joins: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net)
[19:33:50] *** ChanServ sets mode: +o pcwalton
[19:34:05] *** Joins: srh_ (User@moz-80e.38o.254.50.IP)
[19:34:11] *** Quits: dinfuehr (dinfuehr@moz-kul4hn.highway.telekom.at) (Ping timeout: 121 seconds)
[19:35:13] <brson> how do i see all open prs for rust-lang?
[19:36:05] *** Quits: Kxepal (Miranda@moz-b1v3ht.pppoe.mtu-net.ru) (Connection closed)
[19:36:17] <cmr> brson: not sure you can :(
[19:36:20] <cmr> at least not from github
[19:36:27] <cmr> (without opening a tab for each repo)
[19:36:31] <adu> https://github.com/rust-lang/rust/pulls
[19:36:50] <adu> oh in all repos?
[19:36:54] <brson> adu: yeah
[19:36:57] <adu> hmm
[19:37:03] <brson> i feel like i've seen something like this before but maybe not
[19:37:09] <brson> i also feel like it would be super-useful
[19:37:19] <brson> i rarely browse anything but rust-lang/rust and rust-lang/cargo
[19:37:21] <adu> there's probably an app for that, or you'd have to use the github API
[19:37:37] *** japaric__ is now known as japaric
[19:37:39] *** Quits: srh (User@moz-80e.38o.254.50.IP) (Ping timeout: 121 seconds)
[19:39:22] <adu> http://gittyapp.com/
[19:39:46] *** Joins: Kxepal (Miranda@moz-b1v3ht.pppoe.mtu-net.ru)
[19:40:24] *** Joins: japaric_ (japaric@moz-10i.1in.121.200.IP)
[19:41:30] <adu> http://jaredly.github.io/github-issues-viewer/
[19:41:45] <WindowsBunny> https://github.com/issues?q=is%3Aopen+is%3Aissue+user%3Arust-lang
[19:41:48] <WindowsBunny> HERE YOU GO
[19:41:57] * WindowsBunny pokes brson with his ingenious solution
[19:42:22] <WindowsBunny> erm
[19:42:26] <WindowsBunny> replace is:issue with is:pr
[19:42:32] <cmr> neat
[19:42:40] <cmr> 175 open PRs O_o
[19:42:42] <brson> WindowsBunny: nice!
[19:42:50] *** Quits: japaric (japaric@moz-fqr.cpr.230.201.IP) (Ping timeout: 121 seconds)
[19:43:03] <brson> very sweet
[19:43:05] <japaric_> nmatsakis: re-r? gh23117 moved the span to the impl
[19:43:05] <[o__o]> Check that traits with default impls have no methods: https://github.com/rust-lang/rust/pull/23117
[19:43:07] *** Quits: Defaultti (Defaultti@moz-bmdn13.kapsi.fi) (Quit: Quitting.)
[19:43:45] *** japaric_ is now known as japaric
[19:43:56] *** Quits: zmack_ (zmack@moz-b26i0b.home.aster.pl) (Connection closed)
[19:45:04] <nmatsakis> japaric: :) sorry, but that hashtable is going away
[19:45:16] <nmatsakis> want to just revert and we'll run with the old one?
[19:45:16] <nmatsakis> it's fine
[19:45:36] <nmatsakis> (that is, I removed that hashtable in PR for #22978 which I'm rebasing now...)
[19:46:33] <adu> WindowsBunny: or https://github.com/issues?q=is:open+is:issue+user:rust-lang+-repo:rust-lang/rust
[19:46:40] <adu> for all NON-rust issues
[19:47:09] *** Joins: nrc (nrc@moz-4bhi2i.xtra.co.nz)
[19:47:09] *** ChanServ sets mode: +o nrc
[19:47:09] <WindowsBunny> adu: Or even just remove is::issue to get _anything_ open in rust-lang that isn't rust
[19:47:29] <japaric> nmatsakis: reverted
[19:47:54] <nmatsakis> japaric: r+
[19:48:17] *** Joins: Defaultti (Defaultti@moz-bmdn13.kapsi.fi)
[19:48:56] <kmc> Manishearth: can an item Modifier add attributes that are themselves item Decorators and have it work?
[19:49:27] <sfackler> kmc: yep
[19:52:41] <sfackler> though I have been meaning to kill off the distinction between modifiers and decorators
[19:53:01] *** Joins: scialex (scialex@moz-j5mi8i.cs.brown.edu)
[19:54:19] <Manishearth> kmc yes we do this in servo see jsttaceable.rs
[19:54:37] <Manishearth> (on mobile)
[19:55:25] <Manishearth> kmc i was referring to portland
[19:55:49] <Manishearth> you werthere for at least part of it
[19:56:21] <Manishearth> the o on derive, encoding, and plugin stability
[19:56:27] <Manishearth> *one
[19:56:50] <kmc> sfackler: omg me too. I noticed today that MultiModifier has a big ole copy-paste of the Modifier code :(
[19:56:56] <kmc> they should be one thing
[19:56:59] <sfackler> yeah
[19:57:05] <Manishearth> kill it all
[19:57:05] <kmc> they're handled at different points in expansion though (I also learned today)
[19:57:12] <kmc> so it might be hard
[19:57:19] <kmc> Manishearth: destroy all syntax extensions, replace with fexprs
[19:57:29] <Manishearth> kmc sadly, custom derivinos nontvial to getight
[19:57:34] <kmc> that is about the most "not bare metal" choice you could possibly make in a programming language
[19:57:53] <Manishearth> i eddy sng days cooking up a dgn
[19:58:06] <Manishearth> *spent
[19:58:10] <kmc> derivinos... those are the quantum particles you need to understand to write deriving extensions
[19:58:11] <Manishearth> *days
[19:58:43] <kmc> yeah
[19:58:49] <japaric> nmatsakis: this should work right? unsafe impl Bound for .. {} fn f(_: Box<Trait+Bound>) {}  //~ error: only the builtin traits can be used as closure or object bounds
[19:59:06] <Manishearth> and it turned out to not work for Eq/PEq/Ord/POrd/Enc/Dec anyway
[19:59:07] <japaric> nmatsakis: (it works if I do s/Bound/Send in the function)
[19:59:11] <nmatsakis> japaric: not implemented yet
[19:59:15] <nrc> kmc: the idea is to deprecate Modifier in favour of MultiMOdifier
[19:59:17] <simukis> no worries, I understand quantum physics somewhat and just spent an unsuccessful day trying to call a native function from Java.
[19:59:18] <Manishearth> kmc lol
[19:59:19] <nmatsakis> japaric: in principle yes 
[19:59:40] <nmatsakis> japaric: generalizing object types is going to be some bit of effort, I'm working on one of the precursors right now actually...
[19:59:51] <nrc> There is a MultiDecorator in the works too
[20:00:08] <nrc> (in fact I thought Modifiers were already deprecated....)
[20:00:10] <Manishearth> ill get the flamethrower
[20:00:44] <Manishearth> nrc i couldnt land itn the rollup f so reason
[20:00:51] <Manishearth> *for some
[20:01:06] <Manishearth> s/the/a
[20:02:11] *** Joins: corallok (corallok@moz-k1scau.res.rr.com)
[20:04:00] <nrc> Manishearth: do you remember the issue number?
[20:05:14] *** kimundi is now known as zz_kimundi
[20:06:54] *** Quits: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP) (Ping timeout: 121 seconds)
[20:10:20] <Manishearth> nrc no, and mobile, but it had multimodifier in its name
[20:10:41] <nrc> thanks
[20:15:52] *** japaric is now known as japaric|afk
[20:17:41] *** Quits: mpk (mpk@moz-0pd.skh.51.84.IP) (Client exited)
[20:21:33] *** Joins: mystor (mystor@moz-vpa.r78.15.130.IP)
[20:21:58] *** Quits: mystor (mystor@moz-vpa.r78.15.130.IP) (Connection closed)
[20:24:48] *** Joins: dinfuehr (dominik@moz-kul4hn.highway.telekom.at)
[20:24:50] *** dinfuehr is now known as dinfuehr_
[20:26:47] *** Joins: dinfuehr (dinfuehr@moz-kul4hn.highway.telekom.at)
[20:27:05] *** Quits: dinfuehr (dinfuehr@moz-kul4hn.highway.telekom.at) (Connection closed)
[20:27:16] *** Joins: dinfuehr (dinfuehr@moz-kul4hn.highway.telekom.at)
[20:27:40] *** Quits: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua) (Ping timeout: 121 seconds)
[20:28:40] *** Quits: dinfuehr (dinfuehr@moz-kul4hn.highway.telekom.at) (Quit: )
[20:31:04] *** Quits: {0}grant ({0}grant@moz-63ubas.in.charter.com) (Ping timeout: 121 seconds)
[20:33:57] *** Joins: Guest63_ (textual@moz-56c.qli.61.176.IP)
[20:34:12] *** Joins: srh__ (User@moz-80e.38o.254.50.IP)
[20:35:37] *** Quits: Guest63 (textual@moz-6gq.t8s.78.166.IP) (Ping timeout: 121 seconds)
[20:37:39] *** Quits: srh_ (User@moz-80e.38o.254.50.IP) (Ping timeout: 121 seconds)
[20:38:13] *** Quits: corallok (corallok@moz-k1scau.res.rr.com) (Quit: Leaving)
[20:38:37] <kmc> hm, so in the most naive implementation, #[derive(UnknownTrait)] will give 'warning: unused attribute #[derive_UnknownTrait]' but not abort compilation
[20:39:17] <kmc> i might whitelist the traits known to the compiler, and require #![feature(custom_derive)] otherwise, pre-desugaring
[20:39:28] <XMPPwocky> kmc: and then those warnings will be masked if compilation fails for other reasons.
[20:39:35] <kmc> yep :/
[20:39:36] <XMPPwocky> i.e. because the trai wasn't implemented
[20:41:45] <bluss> since syntax exts are not in 1.0, there is no rush
[20:44:15] <arrrrrrr1> https://github.com/rust-lang/rfcs/pull/949
[20:45:02] *** Quits: semarie (semarie@moz-hci.2cf.10.85.IP) (A TLS packet with unexpected length was received.)
[20:45:11] <nmatsakis> eddyb: ping
[20:46:24] *** Joins: mystor (mystor@moz-ldavpp.home3.cgocable.net)
[20:46:50] <nmatsakis> nm
[20:46:53] <nmatsakis> eddyb: unping
[20:47:10] *** Quits: Astrum|Lap (Astrum|Lap@moz-7enfbr.co.comcast.net) (Client exited)
[20:51:26] *** Joins: dinfuehr (dominik@moz-0uoq80.highway.telekom.at)
[20:54:43] *** Quits: dinfuehr_ (dominik@moz-kul4hn.highway.telekom.at) (Ping timeout: 121 seconds)
[20:56:28] *** Quits: scialex (scialex@moz-j5mi8i.cs.brown.edu) (Quit: Leaving)
[20:58:50] <kmc> oh my god... what if we could run the macro_rules! engine in reverse
[20:58:52] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[20:59:26] <kmc> what I actually mean by this: I identify a pattern in my code, I write a macro to abstract it, then I highlight all the repetitive code and my editor converts those into macro invocations
[20:59:42] <WindowsBunny> kmc: You're talking crazy again
[20:59:50] * WindowsBunny fetches the straitjacket
[21:00:00] <kmc> I realized that I am basically writing each macro twice, once as macro_rules! and once as a Vim macro :)
[21:01:13] *** Joins: Zoom (Zoom@moz-nu5tph.broadband.corbina.ru)
[21:02:34] *** Joins: Astrum|Lap (Astrum|Lap@moz-7enfbr.co.comcast.net)
[21:02:57] <brson> nrc: the gist on your tooling thread has 404d
[21:02:59] <brson> http://internals.rust-lang.org/t/rust-tools/922
[21:06:15] *** Joins: erickt (erickt@moz-4hh.6p3.217.74.IP)
[21:06:39] <nrc> Thanks brson, fixed
[21:06:54] <nrc> I bet the hash-looking thing in the URL changes with each revision
[21:07:06] <nrc> I couldn't find a way to get a link to the latest revision :-(
[21:09:08] *** Quits: vadimcn (uid46608@moz-o7asbu.uxbridge.irccloud.com) (Quit: Connection closed for inactivity)
[21:19:51] *** Quits: pcwalton (pcwalton@moz-6kjabm.ca.comcast.net) (Client exited)
[21:22:24] <kmc> do I need an RFC to add a new gated feature? an active one, if not accepted?
[21:23:03] <cmr> well
[21:23:12] <cmr> fmtq just convinced me to write rustfmt
[21:23:21] <kmc> bstrie was also going to write rustfmt B|
[21:23:30] <cmr> bstrie: are you writing rustfmt in the next 20 hours?
[21:23:37] <kmc> no I think he's camping in the woods still
[21:23:41] <cmr> because I can either spend 20 hours formatting these bindgen'd windows sdk headers, or I can write rustfmt
[21:23:44] <cmr> lol
[21:24:03] <erickt> haha
[21:24:24] <arrrrrrr1> if it takes you 20 hours to format them then they are probably full of bugs anyway
[21:24:42] <cmr> WindowsBunny is just a format nazi
[21:25:04] <nrc> cmr: what kind of formatting exactly?
[21:25:22] * nrc wonders whether is prototype can help
[21:25:25] <nrc> *his
[21:25:36] <cmr> nrc: I don't really know, let me look at the diff...
[21:25:47] *** Quits: evanfarrar (evanfarrar@moz-l67mu1.cst.lightpath.net) (Connection closed)
[21:26:00] <cmr> oh right, there is no diff
[21:26:19] <nrc> lol
[21:26:21] <cmr> stuff like putting bindgen's all-arguments-on-own-line into a reasonable compact style
[21:27:03] <nrc> cmr: do you ahve a link to the files?
[21:27:07] <cmr> one sec
[21:27:09] <arrrrrrr1> bindgens? that's just the pretty printer
[21:27:37] <cmr> nrc: https://github.com/cmr/winapi-rs/blob/bindgen-crap/src/d3d9.rs before
[21:27:40] <arrrrrrr1> bindgen would probably be much better if it hadn't been changed to the libsyntax thing
[21:27:41] <cmr> oh wait there will be a diff
[21:27:52] <arrrrrrr1> and it's completely useless now too, lol
[21:28:03] <cmr> arrrrrrr1: "completely useless"?
[21:28:08] <arrrrrrr1> because not in 1.0
[21:28:16] <nrc> Jesus, that is ugly
[21:28:27] <cmr> I don't use the syntax extension, I use the command line tool
[21:28:35] <cmr> which can be built with a nightly and used forever
[21:28:38] <cmr> nrc: right!?
[21:28:39] <arrrrrrr1> and given that bindgen's output is not bug-free and has to be inspected manually only a madman would have it generated by the plugin
[21:28:43] *** Quits: dinfuehr (dominik@moz-0uoq80.highway.telekom.at) (Client exited)
[21:29:12] <nrc> I guess the complex function types cause the pretty printer trouble
[21:29:16] <kmc> arrrrrrr1: for the n+1th time, please stop calling things "completely useless" because they displease you
[21:29:24] <kmc> plenty of people will still be on nightly after 1.0
[21:29:30] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[21:29:32] <nrc> I'm not even sure how that should be formatted
[21:29:43] <arrrrrrr1> cmr: yes the command line tool can be used, but first of all that requires all people who want to use it to install two compilers. and it means that the output can't be improved.
[21:31:21] <cmr> nrc: https://github.com/cmr/winapi-rs/blob/master/src/d3d9.rs
[21:31:23] <cmr> after
[21:31:38] <cmr> still not pretty
[21:31:54] <cmr> but it's just huge gobs of structs, it's not supposed to be pretty :P
[21:31:55] <arrrrrrr1> those functions should just be on one line each
[21:32:08] <arrrrrrr1> no use limiting them to 100 columns
[21:32:17] <arrrrrrr1> having the function names nicely lined up is more important
[21:32:24] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[21:32:51] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[21:34:17] *** Joins: srh_ (User@moz-80e.38o.254.50.IP)
[21:34:34] <nrc> cmr: so, I don't think my rustfmt prototype can help, sorry
[21:34:51] <arrrrrrr1> aturon: ping
[21:34:56] <arrrrrrr1> ping ping ping ping ping
[21:36:22] *** Joins: evanfarrar (evanfarrar@moz-l67mu1.cst.lightpath.net)
[21:37:15] *** Joins: mr_fribble (Mibbit@moz-juv.9o3.252.72.IP)
[21:37:38] *** Quits: srh__ (User@moz-80e.38o.254.50.IP) (Ping timeout: 121 seconds)
[21:40:36] *** Joins: zmack (zmack@moz-4b0.o8l.26.188.IP)
[21:41:57] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[21:43:03] *** Quits: zmack (zmack@moz-4b0.o8l.26.188.IP) (Connection closed)
[21:43:04] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[21:43:56] *** Quits: Zoom (Zoom@moz-nu5tph.broadband.corbina.ru) (Ping timeout: 121 seconds)
[21:45:14] *** Quits: srh_ (User@moz-80e.38o.254.50.IP) (Quit: Leaving)
[21:47:53] *** Joins: sprang (sprang@moz-d0kmvi.12d9.sm5v.0009.2601.IP)
[21:47:55] *** Joins: zmack (zmack@moz-4b0.o8l.26.188.IP)
[21:48:13] <nrc> I just got a panic on overflow for the first time
[21:48:16] <nrc> I am so happy
[21:48:28] <nrc> I don't think I've ever been so happy to see my program crash
[21:48:37] <nrc> overflow is awful
[21:50:05] <haxe> I call that "implicit modulo"
[21:50:28] <XMPPwocky> so where does overflow panic now
[21:51:00] <acrichto> Manishearth: ping
[21:53:16] *** Quits: rustical (..@moz-55rvi2.dclient.hispeed.ch) (A TLS packet with unexpected length was received.)
[21:53:49] <nrc> XMPPwocky: when something overflows
[21:54:04] *** Quits: evanfarrar (evanfarrar@moz-l67mu1.cst.lightpath.net) (Connection closed)
[21:54:12] *** Quits: blaenk (blaenkdenum@moz-em283u.res.rr.com) (Connection closed)
[21:54:23] <nrc> debug only, I believe
[21:54:34] *** Joins: blaenk (blaenkdenum@moz-em283u.res.rr.com)
[21:55:43] <XMPPwocky> ah
[21:55:49] <XMPPwocky> so this is the thing that was planned for a while
[21:55:50] <XMPPwocky> it just landed
[21:56:54] *** Joins: evanfarrar (evanfarrar@moz-l67mu1.cst.lightpath.net)
[21:57:17] <acrichto> Manishearth: unping (forgot I could push to your rollup branch)
[21:59:48] *** Quits: mr_fribble (Mibbit@moz-juv.9o3.252.72.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:01:07] <nrc> it landed a while back, but this is the first time I've observed it in action
[22:01:22] <kmc> it only landed a few days ago i thought
[22:02:13] *** Quits: jdm (jdm@moz-ilbt2e.cable.teksavvy.com) (Quit: )
[22:02:26] <nrc> oh
[22:02:36] <nrc> for some defintion of "while back" then, I guess
[22:02:44] *** Quits: amanone (amanone@moz-eh1rje.sk83.bjud.7e00.2a01.IP) (Quit: WeeChat 0.4.2)
[22:07:49] <cmr> Are raw pointers still nullable?
[22:07:58] <arrrrrrr1> of course
[22:08:26] <cmr> You say "of course" like it hasn't been endlessly discussed....
[22:08:40] *** Quits: zmack (zmack@moz-4b0.o8l.26.188.IP) (Connection closed)
[22:08:47] <blaenk> what just landed?
[22:08:50] <blaenk> XMPPwocky?
[22:09:00] <cmr> blaenk: overflow checking
[22:09:04] <blaenk> ooo
[22:09:10] <cmr> and it wasn't "just"
[22:09:27] *** Joins: zmack (zmack@moz-4b0.o8l.26.188.IP)
[22:09:37] *** Joins: Zoom (Zoom@moz-nu5tph.broadband.corbina.ru)
[22:12:08] *** Parts: Zoom (Zoom@moz-nu5tph.broadband.corbina.ru) ("Leaving")
[22:14:33] *** Quits: zmack (zmack@moz-4b0.o8l.26.188.IP) (Connection closed)
[22:14:55] *** Joins: zmack (zmack@moz-4b0.o8l.26.188.IP)
[22:16:58] <XMPPwocky> cmr: then why is everything breaking now? :P
[22:17:26] *** Quits: evanfarrar (evanfarrar@moz-l67mu1.cst.lightpath.net) (Connection closed)
[22:17:36] <cmr> XMPPwocky: maybe a nightly with it just landed, or everyone just updated? I dunno :P
[22:17:51] <XMPPwocky> i mean, "just" as in a few days ago
[22:18:18] *** Quits: zmack (zmack@moz-4b0.o8l.26.188.IP) (Connection closed)
[22:18:42] *** Joins: pcwalton (pcwalton@moz-l8ebtf.sfo1.mozilla.com)
[22:18:42] *** ChanServ sets mode: +o pcwalton
[22:19:50] <cmr> ah, that is accurate
[22:20:00] <cmr> I usually take "just landed" as in the most recently landed PR
[22:20:31] *** Joins: zmack (zmack@moz-4b0.o8l.26.188.IP)
[22:20:32] <blaenk> if I found an ice and I have no idea what cuased it, I just called it 'internal compiler error', hopefully not a problem lol
[22:20:48] <blaenk> https://github.com/rust-lang/rust/issues/23133
[22:21:12] <cmr> blaenk: backtrace plz
[22:21:17] <blaenk> coming up
[22:21:27] <kmc> strcat is back on our github threads :(
[22:21:33] <kmc> https://github.com/rust-lang/rust/issues/12148
[22:21:53] <kmc> if none of you have the guts to ban him, maybe I'll just start deleting his comments
[22:22:01] <kmc> otherwise our code of conduct is a pitiful joke
[22:22:20] <blaenk> cmr: updated with --verbose as well
[22:22:46] <cmr> kmc: is it possible to ban people on github?
[22:22:53] <kmc> it had better be
[22:22:58] <cmr> I know of no way
[22:23:05] <kmc> otherwise what's the point of even having a CoC
[22:23:08] <cmr> (which is one of the reasons I dislike github for large projects)
[22:23:16] <kmc> if our primary development happens in a place where we cannot enforce it
[22:23:20] *** Joins: p1start (p1start@moz-nftjhe.org)
[22:23:26] <kmc> this shit sucks
[22:23:39] <nrc> we probably can by asking GH
[22:23:47] <kmc> nothing erodes my motivation to work on Rust faster than this
[22:23:59] <eibwen> this particular comment does not violate the CoC IMO
[22:24:01] *** Quits: dcb (textual@moz-j72nfe.ca.comcast.net) (Quit: My Mac has gone to sleep. ZZZzzz…)
[22:24:04] <kmc> eibwen: of course not
[22:24:09] <kmc> eibwen: but strcat has had about 20 second chances
[22:24:17] <kmc> he'll say something awful, ragequit, and then sneak back in
[22:24:33] <kmc> the last time people seemed basically up for banning him if he ever comes back
[22:24:36] <kmc> but
[22:24:44] <kmc> if we don't do it, then this will keep happening
[22:24:59] <kmc> the last "should we ban strcat" conversations were sadly reminiscent of other conversations a year ago
[22:25:10] <kmc> can we stop making excuses for him already
[22:25:19] <sfackler> == kmc
[22:25:30] <kmc> I love the language but if abusive people are openly tolerated, in defiance of the stated policy, then I really don't  want to work on Rust anymore
[22:25:48] <kmc> it doesn't matter that he's not being abusive right at this moment
[22:25:52] <kmc> because the pattern is absurdly clear
[22:25:58] <kmc> how many more chances does he get
[22:26:54] *** Quits: Rym (y@moz-bim.h8b.39.217.IP) (Ping timeout: 121 seconds)
[22:27:19] *** nrc is now known as nrc|afk
[22:27:27] <kmc> expect to hear from me at the next rust meeting if nothing happens before then
[22:27:31] <kmc> cc steveklabnik 
[22:29:28] <blaenk> how do you downgrade/revert to a previous nightly in multirust again?
[22:29:37] <blaenk> should I multirust override nightly-<date>
[22:29:46] <blaenk> if I currently have the nightly toolchain
[22:29:47] <cmr> kmc: I, at least, agree.
[22:30:28] *** Joins: laumann (laumann@moz-n9e72h.0.fullrate.dk)
[22:30:43] *** Joins: evanfarrar (evanfarrar@moz-l67mu1.cst.lightpath.net)
[22:31:54] *** Joins: Rym (y@moz-bim.h8b.39.217.IP)
[22:32:54] *** Quits: zmack (zmack@moz-4b0.o8l.26.188.IP) (Connection closed)
[22:33:24] <brson> blaenk: yes
[22:33:37] <blaenk> sweet :D I did it and it worked
[22:33:47] <blaenk> now just need to remember to remove the override once this ICE is fixed
[22:34:06] <blaenk> looks like it's yesterday's nightly that introduced the ICE
[22:34:19] <blaenk> cause I created an override with multirust to yesterday's and it builds fine
[22:34:28] *** Joins: zmack (zmack@moz-4b0.o8l.26.188.IP)
[22:36:23] *** Quits: zmack (zmack@moz-4b0.o8l.26.188.IP) (Connection closed)
[22:36:52] *** Quits: laumann (laumann@moz-n9e72h.0.fullrate.dk) (Ping timeout: 121 seconds)
[22:36:57] <eibwen> rustc doesn't seem to be able to handle multi-codepoints graphemes correctly
[22:37:48] <cmr> eibwen: yeah, it's a long-standing issue that comes and goes
[22:37:50] <eibwen> `/*<multi-codepoint-grapheme>*/error` produces a location different from the one found in `/*a*/error`
[22:38:06] <cmr> is it still behind a feature gate?
[22:38:20] <eibwen> I put it into a comment
[22:38:25] <cmr> ah
[22:38:27] <cmr> obnoxious
[22:38:29] <cmr> :p
[22:38:32] <eibwen> :)
[22:38:52] <eibwen> is it an easy fix? or does that have deep roots?
[22:40:47] <cmr> eibwen: I'm not sure anymore
[22:40:58] <cmr> I suspect it should be some grapheme-cluster-awareness to the codemap
[22:41:03] <cmr> and not much more
[22:41:07] <cmr> can't find the issue right now
[22:41:30] *** Joins: zmack (zmack@moz-4b0.o8l.26.188.IP)
[22:41:41] <eibwen> is the regex implementation grapheme-aware?
[22:42:04] <cmr> I don't remember, but I think so.
[22:42:19] <cmr> I know burntsushi expended some nontrivial effort getting it unicode-correct.
[22:43:21] <arrrrrrr1> is there a way to get an iterator Vec<Vec<u8>> -> &[u8] with a known typename?
[22:43:48] <eibwen> arrrrrrr1: I don't understand
[22:43:56] <eibwen> oh, now I do
[22:44:28] <arrrrrrr1> I'll just write my own
[22:44:34] *** Quits: zmack (zmack@moz-4b0.o8l.26.188.IP) (Connection closed)
[22:44:42] <eibwen> yes, you can use a trait object as the function in map
[22:45:25] *** Joins: zmack (zmack@moz-4b0.o8l.26.188.IP)
[22:45:41] *** Quits: bytbox (s@moz-65tbo6.fios.verizon.net) (Connection closed)
[22:47:28] <arrrrrrr1> but then I have to box it
[22:47:43] <arrrrrrr1> https://gist.github.com/anonymous/c08d476c9fad8ce778f0
[22:47:45] <arrrrrrr1> much simpler
[22:47:51] <arrrrrrr1> or at least more efficient
[22:50:42] <blaenk> acrichto: kinda confused now cause TempDir is also in std::fs now? thought we were moving it out of tree hence crates.io tempdir?
[22:51:07] <blaenk> oh its deprecated
[22:51:15] *** zz_kimundi is now known as kimundi
[22:51:21] <blaenk> thought so, but the docs still show it's just 'unstable' so got confused
[22:52:14] *** Quits: zmack (zmack@moz-4b0.o8l.26.188.IP) (Connection closed)
[22:53:10] *** Quits: simukis (nagisa@moz-8t068g.static.zebra.lt) (Client exited)
[22:54:46] *** Joins: zmack (zmack@moz-4b0.o8l.26.188.IP)
[22:55:53] <arrrrrrr1> how do I check equality of two iterators?
[22:57:56] <kimundi> arrrrrrr1: I think there is/was a method for that somewhere...
[22:58:05] <kimundi> iter_eq or so
[22:58:29] *** Quits: zmack (zmack@moz-4b0.o8l.26.188.IP) (Connection closed)
[22:58:53] <acrichto> blaenk: yeah I think the deprecation hasn't landed just yet
[22:58:59] <blaenk> no worries
[22:59:12] *** Quits: adu (ajr@moz-vd1fau.fios.verizon.net) (Client exited)
[23:00:25] <arrrrrrr1> https://gist.github.com/anonymous/5707a39b91c74db1188f
[23:00:27] <arrrrrrr1> huh
[23:01:05] <gleb> would it be possible for rustc to do coherence check after typeck? the former takes a lot of time sometimes but typeck errors are more frequent
[23:03:16] *** Joins: zmack (zmack@moz-4b0.o8l.26.188.IP)
[23:04:14] <bstrie> cmr: I am not, in fact, writing rustfmt within the next 20 hours. why, is that a challenge? :)
[23:04:45] <cmr> bstrie: it might be...
[23:05:38] *** Joins: rustical (tsur@moz-55rvi2.dclient.hispeed.ch)
[23:05:45] <bstrie> also I am not in the woods at the *moment*, as I have temporarily rejoined civilization to charge my phone at a starbucks and steal their internet
[23:05:48] <bstrie> then back to the woods I go
[23:13:21] *** Joins: jdm (jdm@moz-ilbt2e.cable.teksavvy.com)
[23:15:32] <bstrie> nmatsakis: gleb has a good question, can typeck happen before coherence checking, since the former fails more often?
[23:16:34] *** Quits: brson (brson@moz-cfhap5.mtv2.mozilla.com) (Ping timeout: 121 seconds)
[23:17:44] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[23:19:06] <Gankro> nmatsakis: piing
[23:19:19] *** Quits: zmack (zmack@moz-4b0.o8l.26.188.IP) (Connection closed)
[23:20:14] *** Joins: zmack (zmack@moz-4b0.o8l.26.188.IP)
[23:23:32] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
[23:31:03] *** Quits: Astrum|Lap (Astrum|Lap@moz-7enfbr.co.comcast.net) (Client exited)
[23:31:15] *** Quits: p1start (p1start@moz-nftjhe.org) (Ping timeout: 121 seconds)
[23:32:18] *** Joins: p1start (p1start@moz-nftjhe.org)
[23:33:30] *** Quits: evanfarrar (evanfarrar@moz-l67mu1.cst.lightpath.net) (Connection closed)
[23:33:43] *** Quits: Guest38021 (rovar@moz-m2j7h0.dyn.optonline.net) (Connection closed)
[23:36:51] *** Joins: jxv (jxv___@moz-qneod7.pk6i.d98i.030a.2602.IP)
[23:38:21] *** Joins: evanfarrar (evanfarrar@moz-l67mu1.cst.lightpath.net)
[23:40:03] *** Quits: evanfarrar (evanfarrar@moz-l67mu1.cst.lightpath.net) (Connection closed)
[23:44:17] *** Quits: kmcguire (kmcguire@moz-pg1gb9.biz.rr.com) (Connection closed)
[23:44:33] *** Joins: kmcguire (kmcguire@moz-pg1gb9.biz.rr.com)
[23:45:31] *** Joins: reem (reem@moz-2icmmi.ca.comcast.net)
[23:52:40] *** Joins: arrrrrrrrr (arrrrrrrrs@moz-pigq28.dynamic.qsc.de)
[23:55:26] *** Quits: arrrrrrr1 (arrrrrrrrs@moz-772c7u.dynamic.qsc.de) (Ping timeout: 121 seconds)
[23:57:56] <kmc> Manishearth: :P re https://github.com/Manishearth/rust/commit/1fffdafe41a98df58521cccf81f952bde4f08092
[23:58:02] <kmc> fixing the tests by making them match the bug :P
[23:58:17] *** Quits: zmack (zmack@moz-4b0.o8l.26.188.IP) (Connection closed)
[23:59:05] *** Quits: reem (reem@moz-2icmmi.ca.comcast.net) (Connection closed)
